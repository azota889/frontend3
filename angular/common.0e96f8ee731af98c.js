"use strict";(self.webpackChunkBalacoClient=self.webpackChunkBalacoClient||[]).push([[2076],{88089:(k,f,c)=>{c.d(f,{J:()=>x});var h=c(27691),b=c(51698),n=c(64198),u=c(26860),v=c(2812),O=c(41426),g=c(63709);let x=(()=>{var d;class m{replaceImageInContent(e){return new b.c(o=>{if(e.includes("<img ")){var t=this.findAllSubString(e,"<img"),i=[],a=[];t.forEach(r=>{var s=e.indexOf("src=",r),l=e.indexOf('"',Number(s)+5),p=e.substring(Number(s)+5,Number(l)+1);p.includes(";base64")?i.push({oldUrl:p}):p.includes("blob:")&&a.push({oldUrl:p})}),i.length>0?this.reUploadBase64File(i,(r,s)=>{null==s?a&&a.length>0?this.reUploadBlobFile(a,(l,p)=>{null!=p?(e=this.replaceHomeworkContent(e,r),e=this.replaceHomeworkContent(e,l),o.next({errorMessage:void 0,content:e}),o.complete()):(o.next({errorMessage:p,content:e}),o.complete())}):(e=this.replaceHomeworkContent(e,r),o.next({errorMessage:void 0,content:e}),o.complete()):(o.next({errorMessage:s,content:e}),o.complete())}):a.length>0?this.reUploadBlobFile(a,(r,s)=>{null==s?(e=this.replaceHomeworkContent(e,r),o.next({errorMessage:void 0,content:e}),o.complete()):(o.next({errorMessage:s,content:e}),o.complete())}):(e=this.replaceHomeworkContent(e,[]),o.next({errorMessage:void 0,content:e}),o.complete())}else o.next({errorMessage:void 0,content:e}),o.complete()})}replaceHomeworkContent(e,o){return o.length>0&&o.forEach(t=>{e=e.replace(t.oldUrl??"  ",t.newUrl+'" class="w-100 img-fluid"')}),e}findAllSubString(e,o){for(var t=0,i=0,a=[];e.indexOf(o,t)>-1;)i=e.indexOf(o,t),a.push(i),t=i+o.length;return a}getTypeFile(e){var o=e.indexOf(";");return e.substring(5,o)}getFileName(e){var o=e.split("").reverse().join(""),t=o.indexOf(";"),i=o.indexOf("/",t);return o.substring(t,i).split("").reverse().join("")}convertBlobToBase64(e){return new Promise(o=>{var t=new Image;t.crossOrigin="Anonymous",t.addEventListener("load",function(){var i=document.createElement("canvas"),a=i.getContext("2d");i.width=t.width,i.height=t.height,a?.drawImage(t,0,0);var r=i.toDataURL("image/png");o(r)},!1),t.src=e})}reUploadBase64File(e,o){if(e&&e.length>0){let r,a=e.length;for(var t=[],i=0;i<e.length;i++){const s=e[i],l=s.oldUrl?.substring(0,s.oldUrl.length-1);this.startUploadBlobFile(s,l??"",[],(p,y)=>{null==y?t=t.concat(p):r=y,a-=1,0==a&&o(t,r)})}}else o([],"lang_auto_khong_upload_duoc_anh_vui_long_thu_lai_sau")}reUploadBlobFile(e,o){if(e&&e.length>0){let r,a=e.length;for(var t=[],i=0;i<e.length;i++){const s=e[i],l=s?.oldUrl?.substring(0,s.oldUrl.length-1);this.convertBlobToBase64(l??"").then(p=>{this.startUploadBlobFile(s,p,[],(y,T)=>{null==T?t=t.concat(y):r=T,a-=1,0==a&&o(t,r)})})}}else o([],"lang_auto_khong_upload_duoc_anh_vui_long_thu_lai_sau")}startUploadBlobFile(e,o,t,i){if(o&&""!=o){var a=this.getTypeFile(o),r=this.myPdfService.b64toFile(o,this.getFileName(a),a);(0,n.w4)(r).then(s=>{this.apiUploadService.uploadToCdnForHomework(s).subscribe(l=>{if(l.type!=h.hv.UploadProgress)if(1==l.success){var p={...e,newUrl:l.data?.url??""};t.push(p),i(t,void 0)}else i(t,this.commonService.translateToKeyParam("lang_auto_khong_upload_duoc_anh_vui_long_thu_lai_sau_loi",l.message??"none"))})})}else i(t,"lang_auto_khong_upload_duoc_anh_vui_long_thu_lai_sau")}constructor(e,o,t){this.commonService=e,this.apiUploadService=o,this.myPdfService=t}}return(d=m).\u0275fac=function(e){return new(e||d)(u.KVO(v.R),u.KVO(O.T),u.KVO(g.C))},d.\u0275prov=u.jDH({token:d,factory:d.\u0275fac,providedIn:"root"}),m})()},6152:(k,f,c)=>{c.d(f,{b:()=>o});var h=c(10710),b=c(59640),n=c(26860),u=c(9691),v=c(54460),O=c(65162),g=c(76975);const x=function(t){return{"text-danger":t}},d=function(t){return[t]},m=function(t){return{backto:t}};function _(t,i){if(1&t&&(n.qex(0),n.j41(1,"div",3)(2,"div",4)(3,"b"),n.EFF(4),n.nI1(5,"mytranslate"),n.k0s(),n.EFF(6),n.nI1(7,"formatFullDateTimeByUserUnitPipe"),n.j41(8,"span",5),n.EFF(9),n.nI1(10,"mytranslate"),n.nI1(11,"mytranslate"),n.k0s()(),n.j41(12,"a",6),n.nI1(13,"navigationLocalize"),n.EFF(14),n.nI1(15,"mytranslate"),n.k0s()(),n.bVm()),2&t){const a=n.XpG(2);n.R7$(4),n.SpI("",n.bMT(5,10,"lang_business_config_billing_end_time"),":"),n.R7$(2),n.SpI(" ",n.bMT(7,12,a.vipAccountObj.endTime)," ( "),n.R7$(2),n.Y8G("ngClass",n.eq3(22,x,a.vipAccountObj.subscriptionTimeDtoObj.days<10)),n.R7$(1),n.LHq(" ",a.vipAccountObj.subscriptionTimeDtoObj.days," ",n.bMT(10,14,"lang_auto_day"),", ",a.vipAccountObj.subscriptionTimeDtoObj.hours," ",n.bMT(11,16,"lang_auto_clock"),") "),n.R7$(3),n.Y8G("routerLink",n.eq3(24,d,n.bMT(13,18,"/auth/vip-packages/"+(a.type===a.vipPackageType.STUDENT?"studentVip":"teacherVip"))))("queryParams",n.eq3(26,m,a.backToLink)),n.R7$(2),n.SpI(" ",n.bMT(15,20,"lang_azt_renew_now")," ")}}function e(t,i){if(1&t&&(n.j41(0,"div",1),n.DNE(1,_,16,28,"ng-container",2),n.k0s()),2&t){const a=n.XpG();n.R7$(1),n.Y8G("ngIf",a.vipAccountObj.isVipTeacher&&a.type===a.vipPackageType.TEACHER||a.vipAccountObj.isVipStudent&&a.type===a.vipPackageType.STUDENT)}}let o=(()=>{var t;class i extends b.H{getData(){this.checkVipAccountService.getVipInfo(this.type,(r,s)=>{if(null!=s)return this.errorStatusObj(s);this.vipAccountObj=r?.vipSubscriptionObj,this.successStatusObj(),this.vipAccountObj&&(this.vipAccountObj.subscriptionTimeDtoObj=this.sAztTimeService.getDayHourMinuteOfSubtract(this.vipAccountObj?.endTime),(this.vipAccountObj.subscriptionTimeDtoObj.days<0||this.vipAccountObj.subscriptionTimeDtoObj.hours<0||this.vipAccountObj.subscriptionTimeDtoObj.minutes<0)&&(this.vipAccountObj.subscriptionTimeDtoObj={days:0,hours:0,minutes:0}))})}ngOnInit(){super.ngOnInit(),this.backToLink=this.type===this.vipPackageType.TEACHER?"/admin/dashboard":"/student/classroom/0",this.getData()}constructor(r){super(),this.sAztTimeService=r,this.vipPackageType=h.W5,this.backToLink=""}}return(t=i).\u0275fac=function(r){return new(r||t)(n.rXU(u.F))},t.\u0275cmp=n.VBU({type:t,selectors:[["azota-vip-package-warning-box"]],inputs:{type:"type"},features:[n.Vt3],decls:1,vars:1,consts:[["class","p-2 box",4,"ngIf"],[1,"p-2","box"],[4,"ngIf"],[1,"flex","items-center"],[1,"mr-auto"],[3,"ngClass"],["azt-track-service","azota-business-package-expired-v3CxKNRMa",1,"btn","btn-sm","btn-outline-primary","px-2","py-1",3,"routerLink","queryParams"]],template:function(r,s){1&r&&n.DNE(0,e,2,1,"div",0),2&r&&n.Y8G("ngIf",s.vipAccountObj&&s.vipAccountObj.subscriptionTimeDtoObj&&s.vipAccountObj.subscriptionTimeDtoObj.days<10)},dependencies:[v.YU,v.bT,O.Wk,g.F2,g.wp,g.Rr],encapsulation:2}),i})()},18470:(k,f,c)=>{c.r(f),c.d(f,{conf:()=>x,language:()=>d});var h=c(41574),b=Object.defineProperty,n=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,v=Object.prototype.hasOwnProperty,g={};((m,_,e,o)=>{if(_&&"object"==typeof _||"function"==typeof _)for(let t of u(_))!v.call(m,t)&&"default"!==t&&b(m,t,{get:()=>_[t],enumerable:!(o=n(_,t))||o.enumerable})})(g,h);var x={wordPattern:/(-?\d*\.\d\w*)|([^\`\~\!\@\#\%\^\&\*\(\)\-\=\+\[\{\]\}\\\|\;\:\'\"\,\.\<\>\/\?\s]+)/g,comments:{lineComment:"//",blockComment:["/*","*/"]},brackets:[["{","}"],["[","]"],["(",")"]],onEnterRules:[{beforeText:/^\s*\/\*\*(?!\/)([^\*]|\*(?!\/))*$/,afterText:/^\s*\*\/$/,action:{indentAction:g.languages.IndentAction.IndentOutdent,appendText:" * "}},{beforeText:/^\s*\/\*\*(?!\/)([^\*]|\*(?!\/))*$/,action:{indentAction:g.languages.IndentAction.None,appendText:" * "}},{beforeText:/^(\t|(\ \ ))*\ \*(\ ([^\*]|\*(?!\/))*)?$/,action:{indentAction:g.languages.IndentAction.None,appendText:"* "}},{beforeText:/^(\t|(\ \ ))*\ \*\/\s*$/,action:{indentAction:g.languages.IndentAction.None,removeText:1}}],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"',notIn:["string"]},{open:"'",close:"'",notIn:["string","comment"]},{open:"`",close:"`",notIn:["string","comment"]},{open:"/**",close:" */",notIn:["string"]}],folding:{markers:{start:new RegExp("^\\s*//\\s*#?region\\b"),end:new RegExp("^\\s*//\\s*#?endregion\\b")}}},d={defaultToken:"invalid",tokenPostfix:".ts",keywords:["abstract","any","as","asserts","bigint","boolean","break","case","catch","class","continue","const","constructor","debugger","declare","default","delete","do","else","enum","export","extends","false","finally","for","from","function","get","if","implements","import","in","infer","instanceof","interface","is","keyof","let","module","namespace","never","new","null","number","object","package","private","protected","public","override","readonly","require","global","return","set","static","string","super","switch","symbol","this","throw","true","try","type","typeof","undefined","unique","unknown","var","void","while","with","yield","async","await","of"],operators:["<=",">=","==","!=","===","!==","=>","+","-","**","*","/","%","++","--","<<","</",">>",">>>","&","|","^","!","~","&&","||","??","?",":","=","+=","-=","*=","**=","/=","%=","<<=",">>=",">>>=","&=","|=","^=","@"],symbols:/[=><!~?:&|+\-*\/\^%]+/,escapes:/\\(?:[abfnrtv\\"']|x[0-9A-Fa-f]{1,4}|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})/,digits:/\d+(_+\d+)*/,octaldigits:/[0-7]+(_+[0-7]+)*/,binarydigits:/[0-1]+(_+[0-1]+)*/,hexdigits:/[[0-9a-fA-F]+(_+[0-9a-fA-F]+)*/,regexpctl:/[(){}\[\]\$\^|\-*+?\.]/,regexpesc:/\\(?:[bBdDfnrstvwWn0\\\/]|@regexpctl|c[A-Z]|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4})/,tokenizer:{root:[[/[{}]/,"delimiter.bracket"],{include:"common"}],common:[[/[a-z_$][\w$]*/,{cases:{"@keywords":"keyword","@default":"identifier"}}],[/[A-Z][\w\$]*/,"type.identifier"],{include:"@whitespace"},[/\/(?=([^\\\/]|\\.)+\/([dgimsuy]*)(\s*)(\.|;|,|\)|\]|\}|$))/,{token:"regexp",bracket:"@open",next:"@regexp"}],[/[()\[\]]/,"@brackets"],[/[<>](?!@symbols)/,"@brackets"],[/!(?=([^=]|$))/,"delimiter"],[/@symbols/,{cases:{"@operators":"delimiter","@default":""}}],[/(@digits)[eE]([\-+]?(@digits))?/,"number.float"],[/(@digits)\.(@digits)([eE][\-+]?(@digits))?/,"number.float"],[/0[xX](@hexdigits)n?/,"number.hex"],[/0[oO]?(@octaldigits)n?/,"number.octal"],[/0[bB](@binarydigits)n?/,"number.binary"],[/(@digits)n?/,"number"],[/[;,.]/,"delimiter"],[/"([^"\\]|\\.)*$/,"string.invalid"],[/'([^'\\]|\\.)*$/,"string.invalid"],[/"/,"string","@string_double"],[/'/,"string","@string_single"],[/`/,"string","@string_backtick"]],whitespace:[[/[ \t\r\n]+/,""],[/\/\*\*(?!\/)/,"comment.doc","@jsdoc"],[/\/\*/,"comment","@comment"],[/\/\/.*$/,"comment"]],comment:[[/[^\/*]+/,"comment"],[/\*\//,"comment","@pop"],[/[\/*]/,"comment"]],jsdoc:[[/[^\/*]+/,"comment.doc"],[/\*\//,"comment.doc","@pop"],[/[\/*]/,"comment.doc"]],regexp:[[/(\{)(\d+(?:,\d*)?)(\})/,["regexp.escape.control","regexp.escape.control","regexp.escape.control"]],[/(\[)(\^?)(?=(?:[^\]\\\/]|\\.)+)/,["regexp.escape.control",{token:"regexp.escape.control",next:"@regexrange"}]],[/(\()(\?:|\?=|\?!)/,["regexp.escape.control","regexp.escape.control"]],[/[()]/,"regexp.escape.control"],[/@regexpctl/,"regexp.escape.control"],[/[^\\\/]/,"regexp"],[/@regexpesc/,"regexp.escape"],[/\\\./,"regexp.invalid"],[/(\/)([dgimsuy]*)/,[{token:"regexp",bracket:"@close",next:"@pop"},"keyword.other"]]],regexrange:[[/-/,"regexp.escape.control"],[/\^/,"regexp.invalid"],[/@regexpesc/,"regexp.escape"],[/[^\]]/,"regexp"],[/\]/,{token:"regexp.escape.control",next:"@pop",bracket:"@close"}]],string_double:[[/[^\\"]+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/"/,"string","@pop"]],string_single:[[/[^\\']+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/'/,"string","@pop"]],string_backtick:[[/\$\{/,{token:"delimiter.bracket",next:"@bracketCounting"}],[/[^\\`$]+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/`/,"string","@pop"]],bracketCounting:[[/\{/,"delimiter.bracket","@bracketCounting"],[/\}/,"delimiter.bracket","@pop"],{include:"common"}]}}}}]);