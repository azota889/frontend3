(self.webpackChunkBalacoClient=self.webpackChunkBalacoClient||[]).push([[7940],{27940:(R,k,l)=>{"use strict";l.r(k),l.d(k,{QuestionLibraryModule:()=>Do});var d=l(54460),u=l(10936),c=l(89163),C=l(65162),g=l(23047),h=l(15343),O=l(13763),_=l(25571),v=l(44233),m=l(5502),p=l(21656),I=l(70050),b=l(7050),y=l(91100),w=l(1133),T=l(50866),F=l(89121),j=l(59640),t=l(48891),Q=l(57686),Mt=l(17776),ut=l(52909),E=l(52811),St=l(51614),z=l(96451),Rt=l(50334),A=l(47712),x=l(76975);const mt=e=>({"box p-2 mt-2":e}),_t=e=>({nodeObjs:e}),Ft=e=>({"padding-left":e}),Lt=()=>({"mr-2":!0});function qt(e,s){1&e&&t.eu8(0)}function zt(e,s){if(1&e&&(t.j41(0,"div",7)(1,"ng-scrollbar",8,2),t.DNE(3,qt,1,0,"ng-container",9),t.k0s()()),2&e){const n=t.XpG(),i=t.sdS(3);t.Y8G("ngClass",t.eq3(3,mt,"create"==n.modeView)),t.R7$(),t.Y8G("visibility","hover"),t.R7$(2),t.Y8G("ngTemplateOutlet",i)}}function At(e,s){1&e&&t.eu8(0)}function Gt(e,s){if(1&e&&(t.j41(0,"div",10),t.DNE(1,At,1,0,"ng-container",9),t.k0s()),2&e){const n=t.XpG(),i=t.sdS(3);t.Y8G("ngClass",t.eq3(2,mt,"create"==n.modeView)),t.R7$(),t.Y8G("ngTemplateOutlet",i)}}function Dt(e,s){1&e&&(t.j41(0,"div",13)(1,"h3",14),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s()()),2&e&&(t.R7$(2),t.JRh(t.bMT(3,1,"lang_create_tree_category_select_level_subject_require")))}function Pt(e,s){1&e&&(t.j41(0,"div",13)(1,"h3",14),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s()()),2&e&&(t.R7$(2),t.JRh(t.bMT(3,1,"lang_create_tree_category_select_level_subject_no_data")))}function $t(e,s){if(1&e&&(t.qex(0),t.DNE(1,Dt,4,3,"div",12)(2,Pt,4,3,"div",12),t.bVm()),2&e){const n=t.XpG(2);t.R7$(),t.Y8G("ngIf",!("create"!=n.modeView||n.rawNodes.length||n.schoolLevelValue&&n.schoolSubjectValue)),t.R7$(),t.Y8G("ngIf",!n.rawNodes.length&&n.schoolLevelValue&&n.schoolSubjectValue)}}function Nt(e,s){1&e&&t.eu8(0)}function Yt(e,s){if(1&e&&(t.j41(0,"div",15),t.DNE(1,Nt,1,0,"ng-container",16),t.k0s()),2&e){const n=t.XpG(2),i=t.sdS(5);t.R7$(),t.Y8G("ngTemplateOutlet",i)("ngTemplateOutletContext",t.eq3(2,_t,n.nodeObjs))}}function Vt(e,s){if(1&e&&t.DNE(0,$t,3,2,"ng-container",11)(1,Yt,2,4,"ng-template",null,3,t.C5r),2&e){const n=t.sdS(2),i=t.XpG();t.Y8G("ngIf",!i.rawNodes.length||!i.schoolLevelValue||!i.schoolSubjectValue)("ngIfElse",n)}}function Bt(e,s){1&e&&t.nrm(0,"lucide-icon",29)}function Xt(e,s){1&e&&t.nrm(0,"lucide-icon",30)}function Kt(e,s){if(1&e){const n=t.RV6();t.j41(0,"i",26),t.bIt("click",function(){t.eBV(n);const o=t.XpG().$implicit,a=t.XpG(3);return t.Njj(a.clickToNode(o))}),t.DNE(1,Bt,1,0,"lucide-icon",27)(2,Xt,1,0,"lucide-icon",28),t.k0s()}if(2&e){const n=t.XpG().$implicit;t.R7$(),t.Y8G("ngIf",!n.isExpand),t.R7$(),t.Y8G("ngIf",n.isExpand)}}function Ut(e,s){1&e&&t.nrm(0,"lucide-icon",31),2&e&&t.Y8G("ngClass",t.lJ4(1,Lt))}function Jt(e,s){if(1&e){const n=t.RV6();t.qex(0),t.j41(1,"a",32),t.bIt("click",function(o){t.eBV(n);const a=t.XpG(2).$implicit;return t.XpG(3).goToFrameQuestionList(a),t.Njj(o.stopPropagation())}),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s(),t.bVm()}if(2&e){const n=t.XpG(2).$implicit;t.R7$(2),t.SpI("(",n.totalQuestion+" "+t.bMT(3,1,"lang_auto_cau_hoi"),")")}}function Wt(e,s){if(1&e&&(t.j41(0,"span",33),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&e){const n=t.XpG(2).$implicit;t.R7$(),t.SpI("(",n.totalQuestion+" "+t.bMT(2,1,"lang_auto_cau_hoi"),")")}}function Ht(e,s){if(1&e&&(t.qex(0),t.DNE(1,Jt,4,3,"ng-container",11)(2,Wt,3,3,"ng-template",null,4,t.C5r),t.bVm()),2&e){const n=t.sdS(3),i=t.XpG().$implicit;t.R7$(),t.Y8G("ngIf",i.totalQuestion>0)("ngIfElse",n)}}function Zt(e,s){if(1&e){const n=t.RV6();t.j41(0,"a",34),t.nI1(1,"mytranslate"),t.bIt("click",function(){t.eBV(n);const o=t.XpG().$implicit,a=t.XpG(3);return t.Njj(a.removeKnowledgeForm(o))}),t.j41(2,"span",35),t.nrm(3,"lucide-icon",36),t.k0s()()}2&e&&t.Y8G("matTooltip",t.bMT(1,1,"lang_auto_xoa"))}function te(e,s){1&e&&t.eu8(0)}function ee(e,s){if(1&e&&(t.qex(0),t.j41(1,"div",37),t.DNE(2,te,1,0,"ng-container",16),t.k0s(),t.bVm()),2&e){const n=t.XpG().$implicit;t.XpG(3);const i=t.sdS(5);t.R7$(2),t.Y8G("ngTemplateOutlet",i)("ngTemplateOutletContext",t.eq3(2,_t,n.children))}}function ne(e,s){if(1&e){const n=t.RV6();t.qex(0),t.j41(1,"div",19)(2,"div",20),t.DNE(3,Kt,3,2,"i",21),t.j41(4,"label",22),t.bIt("click",function(){const o=t.eBV(n).$implicit,a=t.XpG(3);return t.Njj(a.clickToNode(o))}),t.DNE(5,Ut,1,2,"lucide-icon",23),t.nrm(6,"span",24),t.nI1(7,"mathJaxContent"),t.nI1(8,"async"),t.nI1(9,"safeContentQuestion"),t.DNE(10,Ht,4,2,"ng-container",17),t.k0s(),t.DNE(11,Zt,4,3,"a",25),t.k0s(),t.DNE(12,ee,3,4,"ng-container",17),t.k0s(),t.bVm()}if(2&e){const n=s.$implicit,i=t.XpG(3);t.R7$(),t.Y8G("hidden",!n.isShow),t.R7$(),t.yjJ("id","node-",n.randomHashId,"-",n.level,"-",n.nodeIndex,""),t.Y8G("ngStyle",t.eq3(18,Ft,12*n.level+"px")),t.R7$(),t.Y8G("ngIf",n.children.length),t.R7$(2),t.Y8G("ngIf",n.data.id&&("knowledge"==n.typeNode||"objective"==n.typeNode&&!n.children.length)),t.R7$(),t.Y8G("innerHTML",t.bMT(9,16,t.bMT(8,14,t.bMT(7,12,n.text))),t.npT),t.R7$(4),t.Y8G("ngIf","structure"==i.modeView),t.R7$(),t.Y8G("ngIf","create"==i.modeView),t.R7$(),t.Y8G("ngIf",n.isExpand)}}function ie(e,s){if(1&e&&(t.qex(0),t.DNE(1,ne,13,20,"ng-container",18),t.bVm()),2&e){const n=s.$implicit;t.R7$(),t.Y8G("ngForOf",n)}}function oe(e,s){if(1&e&&t.DNE(0,ie,2,1,"ng-container",17),2&e){const n=s.nodeObjs,i=t.XpG();t.Y8G("ngIf",i.asTemplateDataObj(n))}}let pt=(()=>{var e;class s extends Rt.C{constructor(){super(...arguments),this.bankId=0,this.nodeEmitData=new t.bkB,this.nodeObjs=[],this.uuidService=(0,t.WQX)(ut.D)}clickToNode(i){i.children.length&&(i.isExpand?this.collapse(i):this.expand(i))}goToFrameQuestionList(i){if("structure"!=this.modeView)return;let o=this.commonService.getCurrentUrlWithoutLocale();this.commonService.myNavigationWithQueryString("/admin/question-library/view-question-list-node/"+this.bankId+"/"+i.data.id,"?backto="+encodeURIComponent(o))}removeKnowledgeForm(i){this.nodeObjs=this.removeOneNodeById(this.nodeObjs,i),this.nodeEmitData.emit(this.nodeObjs)}asTemplateDataObj(i){return i}standardTreeNodes(i,o){let a=[];return i.forEach((r,f)=>{let M={level:o,typeNode:r.objectiveId?"objective":r.knowledgeId?"knowledge":"",isExpand:0===o,isShow:!0,nodeIndex:f,selected:!1,randomHashId:this.uuidService.getUuid(),text:r.title,data:{...r,children:[]},children:[],totalQuestion:r.totalQuestion??0};M.children=this.standardTreeNodes(r.children,o+1),a.push(M)}),a}removeOneNodeById(i,o){return(i=i.filter(a=>a.randomHashId!=o.randomHashId)).forEach(a=>a.children=this.removeOneNodeById(a.children,o)),i}ngOnChanges(i){i.rawNodes&&(this.nodeObjs=this.standardTreeNodes(this.rawNodes,0),this.nodeEmitData.emit(this.nodeObjs))}}return(e=s).\u0275fac=(()=>{let n;return function(o){return(n||(n=t.xGo(e)))(o||e)}})(),e.\u0275cmp=t.VBU({type:e,selectors:[["app-question-library-tree-component"]],inputs:{rawNodes:"rawNodes",modeView:"modeView",schoolSubjectValue:"schoolSubjectValue",schoolLevelValue:"schoolLevelValue",useScrollBar:"useScrollBar",bankId:"bankId"},outputs:{nodeEmitData:"nodeEmitData"},features:[t.Vt3,t.OA$],decls:6,vars:2,consts:[["mainContent",""],["recursiveListTmpl",""],["perfectScroll",""],["showKnowledge",""],["notHaveQuestion",""],["class","relative","style","height: calc(100vh - 250px); overflow-y: auto",3,"ngClass",4,"ngIf"],["class","relative",3,"ngClass",4,"ngIf"],[1,"relative",2,"height","calc(100vh - 250px)","overflow-y","auto",3,"ngClass"],["track","vertical","pointerEventsMethod","scrollbar",3,"visibility"],[4,"ngTemplateOutlet"],[1,"relative",3,"ngClass"],[4,"ngIf","ngIfElse"],["class","mx-auto my-auto text-center midle-box",4,"ngIf"],[1,"mx-auto","my-auto","text-center","midle-box"],[1,"text-slate-500","text-md",2,"font-weight","420"],["id","list-category-arr",1,"grid","grid-cols-12","gap-1"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"col-span-12",3,"hidden"],[1,"flex","items-center","mt-1","w-full","hover:bg-slate-100","dark:hover:bg-darkmode-400","rounded",3,"id","ngStyle"],["class","mr-2","aria-hidden","true",3,"click",4,"ngIf"],[2,"line-height","1.6",3,"click"],["name","dot","size","14",3,"ngClass",4,"ngIf"],[3,"innerHTML"],["class","ml-auto btn btn-transparent btn-outline-danger btn-sm text-slate-700 font-medium",3,"matTooltip","click",4,"ngIf"],["aria-hidden","true",1,"mr-2",3,"click"],["name","chevron-right","size","14",4,"ngIf"],["name","chevron-down","size","14",4,"ngIf"],["name","chevron-right","size","14"],["name","chevron-down","size","14"],["name","dot","size","14",3,"ngClass"],[1,"link__color","ml-2",3,"click"],[1,"ml-2",2,"opacity","0.5"],[1,"ml-auto","btn","btn-transparent","btn-outline-danger","btn-sm","text-slate-700","font-medium",3,"click","matTooltip"],[1,"w-4","h-4","flex-none"],["name","x","size","18"],[1,"grid","grid-cols-12","gap-1","w-full","children-tmp"]],template:function(i,o){1&i&&t.DNE(0,zt,4,5,"div",5)(1,Gt,2,4,"div",6)(2,Vt,3,2,"ng-template",null,0,t.C5r)(4,oe,1,1,"ng-template",null,1,t.C5r),2&i&&(t.Y8G("ngIf",o.useScrollBar),t.R7$(),t.Y8G("ngIf",!o.useScrollBar))},dependencies:[d.YU,d.Sq,d.bT,d.T3,d.B3,A.oV,m.Yh,h.WGl,d.Jj,x.wp,x.km,x.ep],encapsulation:2}),s})();function ae(e,s){1&e&&(t.j41(0,"div",10)(1,"div",11),t.nrm(2,"azt-loading-ui",12),t.j41(3,"h3",13),t.EFF(4),t.nI1(5,"mytranslate"),t.k0s()()()),2&e&&(t.R7$(4),t.JRh(t.bMT(5,1,"lang_cms_common_loading")))}function se(e,s){if(1&e){const n=t.RV6();t.j41(0,"app-question-library-tree-component",14),t.bIt("nodeEmitData",function(o){t.eBV(n);const a=t.XpG();return t.Njj(a.nodeDataEmitted=o)}),t.k0s()}if(2&e){const n=t.XpG();t.Y8G("rawNodes",n.nodeObjsData)("modeView","create")("schoolSubjectValue",n.form.controls.schoolSubject.value)("schoolLevelValue",n.form.controls.schoolLevel.value)("useScrollBar",!0)}}function re(e,s){1&e&&t.nrm(0,"azt-loading-ui",15)}let le=(()=>{var e;class s extends j.H{getKnowledgeData(i){let o=this.form.controls.schoolLevel?.value??0,a=this.form.controls.schoolSubject?.value??0,r=this.form.controls.bookIdFormControl?.value??0;this.bookName=i.bookName??"",a&&o&&(this.initStatusObj(),this.waitDestroy(this.aiElearningService.aiApiV1ElearningGetKnowledgeTreeGet(o,a,void 0,r>0?r:void 0).subscribe({next:f=>{this.nodeObjsData=f.nodes,this.stopStatusObj()},error:f=>this.errorStatusObj(f.error.message,!0)})))}saveQuestionLibrary(){this.savingData=!0;let r={levelId:this.form.controls.schoolLevel?.value??0,subjectId:this.form.controls.schoolSubject?.value??0,bookId:this.form.controls.bookIdFormControl?.value??0,bookName:this.bookName,nodes:this.getNodeSaveApi()};this.waitDestroy(this.eBanksService.apiEbanksPost(r).subscribe(f=>{if(this.savingData=!1,!f.success)return this.errorStatusObj(f.message,!0);this.successStatusObj("lang_testbank_test_list_create_new_tree_document_success",!0),this.commonService.myNavigation("/admin/question-library/view-question-library/"+f.data?.id+"/0")}))}getNodeSaveApi(){return this.nodeDataEmitted.map(i=>({name:i.text,suggestModel:i.typeNode,suggestId:i.data.objectiveId??i.data.knowledgeId,children:this.getChildNode(i.children)}))}getChildNode(i){return i.map(o=>({name:o.text,suggestModel:o.data.objectiveId?"objective":o.data.knowledgeId?"knowledge":"",suggestId:o.data.objectiveId??o.data.knowledgeId,children:this.getChildNode(o.children)}))}ngOnInit(){this.backToLink=this.commonService.getMyQueryParam("backto")??"/admin/question-library/dashboard"}constructor(i,o,a){super(),this.eBanksService=i,this.aiElearningService=o,this.uuidService=a,this.backToLink="",this.nodeObjsData=[],this.nodeDataEmitted=[],this.bookName="",this.savingData=!1,this.form=new u.gE({schoolLevel:new u.MJ(0,{nonNullable:!0}),schoolSubject:new u.MJ(0,{nonNullable:!0}),bookIdFormControl:new u.MJ(0,{nonNullable:!0})})}}return(e=s).\u0275fac=function(i){return new(i||e)(t.rXU(Q.nd),t.rXU(Mt.T5),t.rXU(ut.D))},e.\u0275cmp=t.VBU({type:e,selectors:[["app-add-new-question-library"]],features:[t.Vt3],decls:15,vars:16,consts:[["doneLoading",""],[3,"headerBackToLink"],[1,"container-fluid","overflow-hidden"],[1,"text-md","font-bold","mt-3"],[1,"mt-3","box","p-2"],[3,"changeDataEvent","form","removeLevelSubjectWithOtherName","showBookData","layout","useExamSchoolLogData"],["class","box mt-2","style","height: calc(100vh - 250px); overflow-y: auto",4,"ngIf","ngIfElse"],[1,"mt-2","float-right"],["type","button",1,"btn","btn-primary",3,"click","disabled"],["class","mr-1",4,"ngIf"],[1,"box","mt-2",2,"height","calc(100vh - 250px)","overflow-y","auto"],[1,"mx-auto","my-auto","text-center","midle-box"],[1,"mr-2"],[1,"text-slate-500","text-md",2,"font-weight","420"],[3,"nodeEmitData","rawNodes","modeView","schoolSubjectValue","schoolLevelValue","useScrollBar"],[1,"mr-1"]],template:function(i,o){if(1&i){const a=t.RV6();t.j41(0,"teacher-layout",1)(1,"div",2)(2,"h3",3),t.EFF(3),t.nI1(4,"mytranslate"),t.k0s(),t.j41(5,"div",4)(6,"config-level-subject-book",5),t.bIt("changeDataEvent",function(f){return t.eBV(a),t.Njj(o.getKnowledgeData(f))}),t.k0s()(),t.DNE(7,ae,6,3,"div",6)(8,se,1,5,"ng-template",null,0,t.C5r),t.j41(10,"div",7)(11,"button",8),t.bIt("click",function(){return t.eBV(a),t.Njj(o.saveQuestionLibrary())}),t.DNE(12,re,1,0,"azt-loading-ui",9),t.EFF(13),t.nI1(14,"mytranslate"),t.k0s()()()()}if(2&i){const a=t.sdS(9);t.Y8G("headerBackToLink",o.backToLink),t.R7$(3),t.JRh(t.bMT(4,12,"lang_create_tree_question_library")),t.R7$(3),t.Y8G("form",o.form)("removeLevelSubjectWithOtherName",!0)("showBookData",!0)("layout","label_in_one_line")("useExamSchoolLogData",!0),t.R7$(),t.Y8G("ngIf",o.statusObj.loading)("ngIfElse",a),t.R7$(4),t.Y8G("disabled",o.savingData||!o.nodeDataEmitted.length),t.R7$(),t.Y8G("ngIf",o.savingData),t.R7$(),t.SpI(" ",t.bMT(14,14,"lang_create_tree_category_btn")," ")}},dependencies:[d.bT,E.R,St.X,z.Q,pt,x.wp],encapsulation:2}),s})();var ce=l(39712),J=l(33887),$=l(51221),S=l(86925),gt=l(37497),de=l(30977),ue=l(52240),bt=l(24506),ft=l(51698),me=l(62095),W=l(9280);let _e=(()=>{var e;class s{constructor(i,o,a){this.commonService=i,this.examService=o,this.documentService=a,this.currentCountProcess=0,this.totalCountProcess=0,this.currentFolderCount=0,this.totalFolderCount=0,this.listExamObjsSelected=[],this.listQuestionIds=[]}processSelectedObjs(i){return new ft.c(o=>{this.totalCountProcess=i.length,this.totalFolderCount=i.filter(a=>a.type==S.Y.EXAM_CATEGORY).length,this.listExamObjsSelected=i.filter(a=>a.type==S.Y.EXAM),this.getAllDataFromCates(i.filter(a=>a.type==S.Y.EXAM_CATEGORY),a=>{this.listExamObjsSelected=this.listExamObjsSelected.concat(...a),this.currentFolderCount==this.totalFolderCount&&this.startGetQuestionOfExam().subscribe(r=>{r&&(o.next(this.listQuestionIds),o.complete())})})})}startGetQuestionOfExam(){return new ft.c(i=>{this.listExamObjsSelected.forEach(o=>{o.type==S.Y.EXAM&&this.examService.apiExamGetQuestionsIdGet(o.id??0).subscribe(a=>{a.data&&(this.listQuestionIds=this.listQuestionIds.concat(...a.data?.questionObjs.map(r=>r.id))),this.currentCountProcess++,this.currentCountProcess==this.totalCountProcess&&(i.next(!0),i.complete())})})})}getAllDataFromCates(i,o){if(!i.length)return o([]);i.forEach(a=>{let r={categoryId:a.id,documentType:void 0,shareType:void 0,fileType:void 0,classroomId:void 0,name:void 0,suggestExamPurpose:void 0,lite:1,getGlobal:0,page:1,itemPerPage:-1};this.documentService.apiDocumentsGet(r.categoryId,r.documentType,r.shareType,r.fileType,r.classroomId,r.name,r.suggestExamPurpose,r.lite,r.getGlobal,r.page,r.itemPerPage).subscribe(f=>{let M=[],P=[],Po=this.commonService.replaceForFolderName(f.data?.currentCategory?.name?f.data?.currentCategory?.name+"_"+f.data?.currentCategory?.id:""),Et=this.commonService.createFolderNameExportFiles([Po??"IdCate-"+a.id]);f&&1==f.success&&(f.data?.categoryObjs.forEach(G=>{M.push({id:G.id,name:G.name,parentCateName:Et,parentId:a.id,type:S.Y.EXAM_CATEGORY,childs:[]}),this.totalCountProcess++,this.totalFolderCount++}),f.data?.documentObjs.forEach(G=>{G.exam&&(P.push({id:G.exam.id,name:G.exam.name,parentCateName:Et,parentId:a.id,type:S.Y.EXAM,childs:[]}),this.totalCountProcess++)})),this.currentFolderCount++,this.currentCountProcess++,o(P),M.length&&setTimeout(()=>{this.getAllDataFromCates(M,o)},400)})})}}return(e=s).\u0275fac=function(i){return new(i||e)(t.KVO(me.R),t.KVO(bt.R),t.KVO(W.DK))},e.\u0275prov=t.jDH({token:e,factory:e.\u0275fac,providedIn:"root"}),s})();var ht=l(22613),pe=l(81587),ge=l(69135),N=l(94743);const be=e=>({"midle-box":e}),fe=e=>({active:e}),he=e=>({clickable:e}),ve=e=>({"truncate-bread":e}),xe=(e,s)=>({"w-60":e,"w-52":s}),vt=e=>[e],xt=()=>({"text-pending":!0});function ye(e,s){if(1&e&&(t.j41(0,"span",13),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&e){const n=t.XpG();t.R7$(),t.SpI("(",t.bMT(2,1,"lang_auto_da_chon")+" "+n.clipboardSelected,")")}}function Ie(e,s){1&e&&(t.qex(0),t.nrm(1,"azt-loading-ui",17),t.j41(2,"h3",18),t.EFF(3),t.nI1(4,"mytranslate"),t.k0s(),t.bVm()),2&e&&(t.R7$(3),t.JRh(t.bMT(4,1,"lang_cms_common_loading")))}function Ce(e,s){if(1&e&&(t.qex(0),t.j41(1,"h3",19),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s(),t.j41(4,"h3",20),t.EFF(5),t.nI1(6,"mytranslate"),t.k0s(),t.nrm(7,"azt-loading-ui",21),t.bVm()),2&e){const n=t.XpG(2);t.R7$(2),t.JRh(t.bMT(3,5,"lang_exam_import_processing")),t.R7$(3),t.JRh(t.bMT(6,7,"lang_exam_import_processing_message")),t.R7$(2),t.Y8G("type","progress-circle")("valueProcessing",n.sAztImportMultipleExamFolderService.currentCountProcess)("totalProcessing",n.sAztImportMultipleExamFolderService.totalCountProcess)}}function Oe(e,s){if(1&e&&(t.j41(0,"div",14)(1,"div",15),t.DNE(2,Ie,5,3,"ng-container",16)(3,Ce,8,9,"ng-container",16),t.k0s()()),2&e){const n=t.XpG();t.R7$(),t.Y8G("ngClass",t.eq3(3,be,n.loadingCategory)),t.R7$(),t.Y8G("ngIf",n.loadingCategory),t.R7$(),t.Y8G("ngIf",n.onImport)}}function je(e,s){if(1&e){const n=t.RV6();t.j41(0,"li",37)(1,"a",38),t.bIt("click",function(){const o=t.eBV(n).$implicit,a=t.XpG(2);return t.Njj(a.gotoFolder(o))}),t.j41(2,"span",39,1),t.nI1(4,"mytranslate"),t.j41(5,"span"),t.EFF(6),t.nI1(7,"mytranslate"),t.k0s()()()()}if(2&e){const n=s.$implicit,i=t.sdS(3),o=t.XpG(2);t.Y8G("ngClass",t.eq3(11,fe,n.id==o.currentCategoryId)),t.R7$(),t.Y8G("ngClass",t.eq3(13,he,n.id!=o.currentCategoryId)),t.R7$(),t.FS9("matTooltip",t.bMT(4,7,n.name)),t.Y8G("ngClass",t.eq3(15,ve,n.id!=o.currentCategoryId))("isDisabledTooltip",!1)("matTooltipDisabled",i.isDisabled),t.R7$(4),t.JRh(t.bMT(7,9,n.name))}}function ke(e,s){if(1&e){const n=t.RV6();t.j41(0,"span",28)(1,"input",50),t.bIt("change",function(){t.eBV(n);const o=t.XpG(5);return t.Njj(o.actionValueOfFormInClipboard())}),t.k0s()()}if(2&e){const n=t.XpG().$implicit;t.Y8G("formGroup",n)}}function we(e,s){if(1&e&&(t.qex(0),t.DNE(1,ke,2,1,"span",49),t.bVm()),2&e){const n=s.$implicit;t.R7$(),t.Y8G("ngIf",n)}}function Te(e,s){if(1&e&&(t.j41(0,"span",48),t.DNE(1,we,2,1,"ng-container",30),t.k0s()),2&e){const n=t.XpG().$implicit,i=t.XpG(2);t.R7$(),t.Y8G("ngForOf",t.eq3(1,vt,i.getClipboardFormGroupByExamCategory(n)))}}function Qe(e,s){1&e&&t.nrm(0,"input",51),2&e&&t.Y8G("disabled",!0)}function Ee(e,s){1&e&&(t.j41(0,"span"),t.nrm(1,"azt-svg-icon",52),t.nI1(2,"mytranslate"),t.k0s()),2&e&&(t.R7$(),t.FS9("matTooltip",t.bMT(2,2,"lang_auto_da_chia_se")),t.Y8G("size",24))}function Me(e,s){1&e&&t.nrm(0,"azt-svg-icon",53),2&e&&t.Y8G("size",24)}function Se(e,s){1&e&&(t.j41(0,"span",54),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&e&&(t.R7$(),t.JRh(t.bMT(2,1,"lang_auto_chia_se")))}function Re(e,s){if(1&e){const n=t.RV6();t.qex(0),t.j41(1,"div",40),t.DNE(2,Te,2,3,"span",41)(3,Qe,1,1,"ng-template",null,2,t.C5r),t.k0s(),t.j41(5,"div",42)(6,"div",43),t.bIt("click",function(){const o=t.eBV(n).$implicit,a=t.XpG(2);return t.Njj(a.gotoFolder(o))}),t.j41(7,"div",44),t.DNE(8,Ee,3,4,"span",45)(9,Me,1,1,"ng-template",null,3,t.C5r),t.k0s(),t.j41(11,"div",46,1),t.nI1(13,"mytranslate"),t.j41(14,"span"),t.EFF(15),t.nI1(16,"mytranslate"),t.k0s()(),t.DNE(17,Se,3,3,"span",47),t.k0s()(),t.bVm()}if(2&e){const n=s.$implicit,i=t.sdS(4),o=t.sdS(10),a=t.sdS(12),r=t.XpG(2);t.R7$(2),t.Y8G("ngIf",-1!=n.id)("ngIfElse",i),t.R7$(4),t.Y8G("ngClass",t.l_i(17,xe,-1==n.id,-1!=n.id)),t.R7$(2),t.Y8G("ngIf",n.shared)("ngIfElse",o),t.R7$(3),t.FS9("matTooltip",t.bMT(13,13,n.name)),t.Y8G("isDisabledTooltip",!1)("matTooltipDisabled",a.isDisabled),t.R7$(3),t.HbH(r.isMobileWebView&&-1!=n.id?"azt-wv-item-name":""),t.R7$(),t.JRh(t.bMT(16,15,n.name)),t.R7$(2),t.Y8G("ngIf",-1==n.id)}}function Fe(e,s){if(1&e){const n=t.RV6();t.qex(0,28),t.j41(1,"input",50),t.bIt("change",function(){t.eBV(n);const o=t.XpG(4);return t.Njj(o.actionValueOfFormInClipboard())}),t.k0s(),t.bVm()}if(2&e){const n=t.XpG().$implicit;t.Y8G("formGroup",n)}}function Le(e,s){if(1&e&&(t.qex(0),t.DNE(1,Fe,2,1,"ng-container",49),t.bVm()),2&e){const n=s.$implicit;t.R7$(),t.Y8G("ngIf",n)}}function qe(e,s){1&e&&(t.nrm(0,"lucide-icon",60),t.nI1(1,"mytranslate")),2&e&&(t.FS9("matTooltip",t.bMT(1,2,"lang_testbank_folder_and_file_published")),t.Y8G("ngClass",t.lJ4(4,xt)))}function ze(e,s){1&e&&(t.nrm(0,"lucide-icon",61),t.nI1(1,"mytranslate")),2&e&&(t.FS9("matTooltip",t.bMT(1,2,"lang_testbank_folder_and_file_Unpublished")),t.Y8G("ngClass",t.lJ4(4,xt)))}function Ae(e,s){if(1&e&&(t.j41(0,"span",62),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&e){const n=t.XpG().$implicit;t.R7$(),t.Lme("",t.bMT(2,2,"lang_testbank_folder_and_file_number_attended"),": ",null==n.exam?null:n.exam.attended,"")}}function Ge(e,s){1&e&&(t.j41(0,"div",63),t.nrm(1,"azt-svg-icon",64),t.nI1(2,"mytranslate"),t.k0s()),2&e&&(t.R7$(),t.FS9("matTooltip",t.bMT(2,2,"lang_auto_da_chia_se")),t.Y8G("size",16))}function De(e,s){if(1&e&&(t.qex(0),t.j41(1,"div",40)(2,"span",48),t.DNE(3,Le,2,1,"ng-container",30),t.k0s()(),t.j41(4,"div",42)(5,"div",55)(6,"div",44),t.DNE(7,qe,2,5,"lucide-icon",56)(8,ze,2,5,"lucide-icon",57),t.k0s(),t.j41(9,"div",46,1)(11,"span"),t.EFF(12),t.k0s(),t.DNE(13,Ae,3,4,"span",58),t.k0s(),t.DNE(14,Ge,3,4,"div",59),t.k0s()(),t.bVm()),2&e){const n=s.$implicit,i=t.sdS(10),o=t.XpG(2);t.R7$(3),t.Y8G("ngForOf",t.eq3(13,vt,o.getClipboardFormGroupByExam(n.exam))),t.R7$(4),t.Y8G("ngIf",1==(null==n.exam?null:n.exam.isPublished)),t.R7$(),t.Y8G("ngIf",1!=(null==n.exam?null:n.exam.isPublished)),t.R7$(),t.Mz_("matTooltip"," ",o.isMobileWebView?"":null==n.exam?null:n.exam.name,""),t.Y8G("isDisabledTooltip",!1)("matTooltipDisabled",i.isDisabled),t.R7$(2),t.ZvI("mb-0 d-block ",o.isMobileWebView?"azt-wv-item-name":"",""),t.R7$(),t.JRh(null==n.exam?null:n.exam.name),t.R7$(),t.Y8G("ngIf",o.isMobileWebView),t.R7$(),t.Y8G("ngIf",n.shared)}}function Pe(e,s){if(1&e){const n=t.RV6();t.j41(0,"div",22)(1,"ol",23)(2,"li",24)(3,"a",25),t.bIt("click",function(){t.eBV(n);const o=t.XpG();return t.Njj(o.goBackToAllCategoryPageEvent())}),t.j41(4,"h2",26),t.EFF(5),t.nI1(6,"mytranslate"),t.k0s()()(),t.DNE(7,je,8,17,"li",27),t.k0s()(),t.j41(8,"div",14)(9,"form",28)(10,"div",29),t.DNE(11,Re,18,20,"ng-container",30)(12,De,15,15,"ng-container",30),t.k0s()()(),t.j41(13,"div",31)(14,"div",32)(15,"azt-paging",33),t.bIt("goToPaginationPage",function(o){t.eBV(n);const a=t.XpG();return t.Njj(a.goToPage(o))}),t.k0s()(),t.j41(16,"div",34)(17,"p",35),t.EFF(18),t.nI1(19,"number"),t.nI1(20,"mytranslate"),t.k0s()(),t.j41(21,"div",36)(22,"p",35),t.EFF(23),t.nI1(24,"number"),t.nI1(25,"mytranslate"),t.k0s()()()}if(2&e){const n=t.XpG();t.R7$(5),t.SpI(" ",t.bMT(6,8,"lang_auto_tat_ca")," "),t.R7$(2),t.Y8G("ngForOf",n.listBreadcrumb),t.R7$(2),t.Y8G("formGroup",n.form),t.R7$(2),t.Y8G("ngForOf",n.categoryObjs),t.R7$(),t.Y8G("ngForOf",n.documentObjs),t.R7$(3),t.Y8G("pageObj",n.pageObj),t.R7$(3),t.JRh(t.bMT(19,10,n.totalExam)+" "+t.bMT(20,12,"lang_testbank_test_list_document")),t.R7$(5),t.JRh(t.bMT(24,14,n.totalExam)+" "+t.bMT(25,16,"lang_testbank_test_list_document"))}}function $e(e,s){1&e&&(t.j41(0,"span",65),t.nrm(1,"azt-loading-ui"),t.k0s())}let Ne=(()=>{var e;class s extends J._{confirmImport(){this.onImport=!0,this.dialogRef.disableClose=!0;let i=this.clipboardService.getCurrentClipBoard().filter(a=>a.action==$.$.SELECTED),o=[];this.getFormValue().clipboardObjs.filter(a=>a.checked).forEach(a=>{o.push({id:a.id,name:a.name,parentId:this.currentCategoryId,parentCateName:"",type:a.type,childs:[]})}),i.length&&this.sAztImportMultipleExamFolderService.processSelectedObjs(o).subscribe(a=>{this.dialogRef.disableClose=!1,this.showSuccessSnack("lang_exam_import_finished"),this.dialogRef.close(a)})}btnCloseDialog(){this.dialogRef.close([])}gotoFolder(i){i.id!=this.currentCategoryId&&(this.pageObj.setPageNumber(1),this.currentCategoryId=i.id,this.shareType=i.shareType??"",this.getCategoryObjs())}getClipboardSelectedNotice(){let i=this.form.getRawValue().clipboardObjs.filter(o=>o.checked).length;this.clipboardSelected=i}goToPage(i){this.pageObj.setPageNumber(i),this.getCategoryObjs()}goBackToAllCategoryPageEvent(){this.pageObj.setPageNumber(1),this.currentCategoryId=0,this.shareType="",this.getCategoryObjs()}getCategoryObjs(){this.loadingCategory=!0;let i={categoryId:0!=this.currentCategoryId?this.currentCategoryId:0,documentType:void 0,shareType:this.shareType??"",fileType:"exam",classroomId:void 0,name:"",suggestExamPurpose:void 0,lite:void 0,getGlobal:0,page:this.pageObj.page,itemPerPage:void 0};this.waitDestroy(this.documentService.apiDocumentsGet(i.categoryId,i.documentType,i.shareType,i.fileType,i.classroomId,i.name,i.suggestExamPurpose,i.lite,i.getGlobal,i.page,i.itemPerPage).subscribe(o=>{if(!o.success)return this.showErrorSnack(o.message??""),void(this.loadingCategory=!1);var a=this.commonService.castObj(o.data?.documentObjs)??[],r=this.convertExamObj(a);this.documentObjs=r,this.categoryObjs=o.data?.categoryObjs??[],this.totalExam=o.data?.total??0,this.pageObj.setTotalPages(this.totalExam),this.initFormData(),this.getListParentCategoryObjs()}))}getListParentCategoryObjs(){this.waitDestroy(this.examCategoryService.apiExamCategoryGetBreadcrumbsGet(this.currentCategoryId,this.shareType??"","new").subscribe(i=>{if(!i.success)return this.showErrorSnack(i.message);this.listBreadcrumb=(i.data?.objs??[]).map(o=>({...o,shared:!1,sharedGroups:[],sharedTeachers:[],paths:[]}))}))}convertExamObj(i){var o=[];return i.forEach(a=>{a.exam&&o.push({name:a.exam.name,updatedAt:a.exam.updatedAt,createdAt:a.exam.createdAt,attended:a.exam.attended,isPublished:a.exam.isPublished,exam:a.exam,shared:a.shared,type:"exam",paths:a.paths,isGlobalAzota:0})}),o}getFormValue(){return this.form.getRawValue()}initFormData(){this.categoryObjs&&this.categoryObjs.length>0&&this.categoryObjs.forEach(i=>{if(!i.id)return;let o=this.clipboardService.hasInClipboard(i.id,S.Y.EXAM_CATEGORY),a=new u.gE({id:new u.MJ(i.id,{nonNullable:!0}),name:new u.MJ(i.name??"",{nonNullable:!0}),type:new u.MJ(S.Y.EXAM_CATEGORY,{nonNullable:!0}),action:new u.MJ($.$.SELECTED,{nonNullable:!0}),checked:new u.MJ(o,{nonNullable:!0})});this.form.controls.clipboardObjs.push(a)}),this.documentObjs&&this.documentObjs.length>0&&this.documentObjs.forEach(i=>{if(!i.exam||"exam"!=i.type)return;let o=this.clipboardService.hasInClipboard(i.exam?.id??0,S.Y.EXAM),a=new u.gE({id:new u.MJ(i.exam.id??0,{nonNullable:!0}),name:new u.MJ(i.exam.name??"",{nonNullable:!0}),type:new u.MJ(S.Y.EXAM,{nonNullable:!0}),action:new u.MJ($.$.SELECTED,{nonNullable:!0}),checked:new u.MJ(o,{nonNullable:!0})});this.form.controls.clipboardObjs.push(a)})}getClipboardFormGroupByExamCategory(i){return this.form.controls.clipboardObjs.controls.find(o=>o.controls.id.value==i.id&&o.controls.type.value==S.Y.EXAM_CATEGORY)}getClipboardFormGroupByExam(i){return this.form.controls.clipboardObjs.controls.find(o=>o.controls.id.value==i?.id&&o.controls.type.value==S.Y.EXAM)}actionValueOfFormInClipboard(){this.getFormValue().clipboardObjs.forEach(i=>{if(!i.checked)return this.clipboardService.removeDocumentInClipboard(i.id,i.type);this.clipboardService.setActionToClipboard(i.id,i.type,$.$.SELECTED,i.name)})}ngOnInit(){super.ngOnInit(),this.clipboardService.resetClipBoardAfterPasteOrCancelAllActions(),this.getCategoryObjs(),this.form.valueChanges.subscribe(i=>this.getClipboardSelectedNotice())}constructor(i,o,a,r,f,M,P){super(P,M),this.clipboardService=i,this.documentService=o,this.examService=a,this.sAztImportMultipleExamFolderService=r,this.examCategoryService=f,this.dialogRef=M,this.data=P,this.onImport=!1,this.loadingCategory=!1,this.currentCategoryId=0,this.pageObj=new gt.d(24),this.shareType="",this.totalExam=0,this.documentObjs=[],this.categoryObjs=[],this.clipboardSelected=0,this.listBreadcrumb=[],this.loadingDataTrans=this.commonService.myTranslateInstant("lang_auto_dang_tai_du_lieu")??"\u0110ang t\u1ea3i d\u1eef li\u1ec7u",this.processingDataTrans=this.commonService.myTranslateInstant("lang_auto_dang_xu_ly_du_lieu")??"\u0110ang x\u1eed l\xfd d\u1eef li\u1ec7u ",this.folderTitleTrans=this.commonService.myTranslateInstant("lang_auto_thu_muc")??"Th\u01b0 m\u1ee5c",this.examTitleTrans=this.commonService.myTranslateInstant("lang_auto_de_thi")??"\u0110\u1ec1 thi",this.form=new u.gE({clipboardObjs:new u.Yp([]),isSelectAll:new u.MJ(!1,{nonNullable:!0})})}}return(e=s).\u0275fac=function(i){return new(i||e)(t.rXU(de.g),t.rXU(ue.D),t.rXU(bt.R),t.rXU(_e),t.rXU(W.Ns),t.rXU(c.CP,8),t.rXU(c.Vh,8))},e.\u0275cmp=t.VBU({type:e,selectors:[["app-import-question-folder-dialog"]],features:[t.Vt3],decls:18,vars:15,consts:[["shownCateObjs",""],["c","isDisabled"],["shareCate",""],["noShare",""],[1,"box"],[1,"p-3","border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"text-md","mr-auto","font-bold"],["class","link__color ml-2 font-normal text-sm",4,"ngIf"],["class","overflow-auto py-2","style","height: 400px",4,"ngIf","ngIfElse"],[1,"p-3","flex","justify-end"],[1,"btn","w-24","btn-secondary","mr-3",3,"click","disabled"],[1,"btn","btn-primary","mw-24",3,"click","disabled"],["class","w-3 mr-2",4,"ngIf"],[1,"link__color","ml-2","font-normal","text-sm"],[1,"overflow-auto","py-2",2,"height","400px"],[1,"mx-auto","my-auto","text-center",3,"ngClass"],[4,"ngIf"],[1,"mr-2"],[1,"text-slate-500","text-md",2,"font-weight","420"],[1,"text-slate-500","text-md","block","mt-1",2,"font-weight","420"],[1,"text-slate-700","text-xs","block","mt-2",2,"font-weight","420"],[1,"mt-2",3,"type","valueProcessing","totalProcessing"],[1,"mr-auto"],[1,"breadcrumb"],[1,"breadcrumb-item","font-medium"],[3,"click"],[1,"text-sm"],["class","breadcrumb-item active",3,"ngClass",4,"ngFor","ngForOf"],[3,"formGroup"],[1,"grid","grid-cols-12","gap-2"],[4,"ngFor","ngForOf"],[1,"azt-document-footer","flex","items-center","flex-col-reverse","sm:flex-row","mt-1"],[1,"mr-0","sm:mr-auto","mt-2"],[3,"goToPaginationPage","pageObj"],[1,"text-right","mt-2","azt-hidden","md:block"],[1,"text-md"],[1,"ml-auto","text-right","-mt-2","block","md:hidden"],[1,"breadcrumb-item","active",3,"ngClass"],[3,"click","ngClass"],[3,"ngClass","matTooltip","isDisabledTooltip","matTooltipDisabled"],[1,"col-span-1","items-center","text-center"],["formArrayName","clipboardObjs",4,"ngIf","ngIfElse"],[1,"col-span-11","items-center"],[1,"title-exam","flex","items-center","clickable","sm:w-full",3,"click","ngClass"],[1,"image-fit"],[4,"ngIf","ngIfElse"],[1,"truncate","ml-3",3,"matTooltip","isDisabledTooltip","matTooltipDisabled"],["class","whitespace-nowrap ml-2 py-0.5 px-2 rounded-full text-xs bg-primary text-white font-medium",4,"ngIf"],["formArrayName","clipboardObjs"],[3,"formGroup",4,"ngIf"],["type","checkbox","formControlName","checked",1,"form-check-input","flex-none",3,"change"],["type","checkbox",1,"form-check-input","flex-none",3,"disabled"],["type","folder-share",3,"size","matTooltip"],["type","folder",3,"size"],[1,"whitespace-nowrap","ml-2","py-0.5","px-2","rounded-full","text-xs","bg-primary","text-white","font-medium"],[1,"title-exam","flex","items-center","clickable","w-52","sm:w-full"],["name","file-check","size","24",3,"matTooltip","ngClass",4,"ngIf"],["name","file","size","24",3,"matTooltip","ngClass",4,"ngIf"],["class","azt-wv-sub-info mx-auto",4,"ngIf"],["class","icon-share ml-2",4,"ngIf"],["name","file-check","size","24",3,"matTooltip","ngClass"],["name","file","size","24",3,"matTooltip","ngClass"],[1,"azt-wv-sub-info","mx-auto"],[1,"icon-share","ml-2"],["type","user-share",2,"padding","3px",3,"size","matTooltip"],[1,"w-3","mr-2"]],template:function(i,o){if(1&i){const a=t.RV6();t.j41(0,"div",4)(1,"div",5)(2,"h2",6),t.EFF(3),t.nI1(4,"mytranslate"),t.DNE(5,ye,3,3,"span",7),t.k0s()(),t.j41(6,"div",5),t.DNE(7,Oe,4,5,"div",8)(8,Pe,26,18,"ng-template",null,0,t.C5r),t.k0s(),t.j41(10,"div",9)(11,"button",10),t.bIt("click",function(){return t.eBV(a),t.Njj(o.btnCloseDialog())}),t.EFF(12),t.nI1(13,"mytranslate"),t.k0s(),t.j41(14,"button",11),t.bIt("click",function(){return t.eBV(a),t.Njj(o.confirmImport())}),t.DNE(15,$e,2,0,"span",12),t.EFF(16),t.nI1(17,"mytranslate"),t.k0s()()()}if(2&i){const a=t.sdS(9);t.R7$(3),t.SpI(" ",t.bMT(4,9,"lang_select_folder_or_exam_to_import")," "),t.R7$(2),t.Y8G("ngIf",o.clipboardSelected),t.R7$(2),t.Y8G("ngIf",o.loadingCategory||o.onImport)("ngIfElse",a),t.R7$(4),t.Y8G("disabled",o.onImport),t.R7$(),t.SpI(" ",t.bMT(13,11,"lang_auto_huy")," "),t.R7$(2),t.Y8G("disabled",o.onImport),t.R7$(),t.Y8G("ngIf",o.onImport),t.R7$(),t.SpI(" ",t.bMT(17,13,"Import")," ")}},dependencies:[d.YU,d.Sq,d.bT,A.oV,u.qT,u.Zm,u.BC,u.cb,u.j4,u.JD,u.v8,ht.q,pe.t,ge.f,E.R,N.m,h.WGl,d.QX,x.wp],encapsulation:2}),s})();var Ye=l(60531),L=l(46899),Ve=l(74175),Be=l(80859);const Xe=()=>({"text-pending":!0}),Ke=(e,s)=>[e,s],Ue=()=>({"text-primary":!0}),Je=e=>[e];let We=(()=>{var e;class s extends j.H{importFolder(){this.sAztDialogService.open(Ne,{width:"950px",data:{ebankId:this.bankId??0},restoreFocus:!1,autoFocus:!1}).afterClosed().subscribe(a=>{a?.length&&console.log(a)})}beforeOpenEditor(i="editor"){this.editorOutputDataService.setMode(i),this.commonService.myNavigationWithQueryString("/admin/testbank/azota-editor/0",`?backto=${decodeURIComponent(`/admin/question-library/choose-import-question-mode/${this.bankId}`)}&importQuestionBankId=${this.bankId}`)}changeFileAction(i){this.file=i,this.startParser(this.file)}startParser(i){this.saveAndSwitch(i)}saveAndSwitch(i){this.editorOutputDataService.setFileProcess(i),this.commonService.myNavigationWithQueryString("/admin/testbank/azota-editor/0",`?backto=${decodeURIComponent(`/admin/question-library/choose-import-question-mode/${this.bankId}`)}&importQuestionBankId=${this.bankId}`)}ngOnInit(){super.ngOnInit(),this.bankId=Number(this.commonService.getMyParam(this.activeRoute,"bankId"))}constructor(i,o,a){super(),this.activeRoute=i,this.editorOutputDataService=o,this.sAztDialogService=a,this.allUploadFileTypes=ce.PO,this.bankId=0}}return(e=s).\u0275fac=function(i){return new(i||e)(t.rXU(C.nX),t.rXU(Ye.O),t.rXU(L.i))},e.\u0275cmp=t.VBU({type:e,selectors:[["coazt-choose-import-question-mode"]],features:[t.Vt3],decls:50,vars:54,consts:[[3,"headerBackToLink"],[1,"mt-5"],[1,"flex","items-center","justify-center"],[1,"font-medium","text-lg"],[1,"mx-auto",2,"max-width","800px"],[1,"box","flex","items-center","px-5","py-5","justify-center","zoom-in","mb-3",3,"click"],[1,"w-8","h-8","flex-none","image-fit","overflow-hidden","mr-5"],["name","square-pen","size","32",3,"ngClass"],[1,"text-center"],[3,"emitFiles","fileType","limitSize"],["id","box-left-file-drop",1,"h-full","cursor-pointer","box","p-5"],[1,"h-full","flex","items-center",2,"min-height","20vh"],[1,"mx-auto","text-center"],[1,"w-16","h-16","flex-none","image-fit","overflow-hidden","mx-auto","upload-box"],["name","cloud-upload","size","64",3,"ngClass"],[1,"mt-3"],[1,"font-medium","text-lg","upload-box"],[1,"text-slate-500","text-xs","mt-1"],["azt-track-service","create-new-document-WauQzqbISx","href","https://docs.azota.vn/docs/huong-dan-su-dung/de-thi/chon-file-keo-tha-file-de-tao-de/","target","_blank",1,"text-primary",3,"click"],[1,"pt-2"],["azt-track-service","create-new-document-O5FkqsuTLC","id","download-link-item",3,"click","dataUrl","target","fileName","fileDescription","classStyle"],["id","download-link-item",3,"click","dataUrl","target","fileName","fileDescription","classStyle"],[1,"mt-3","text-center","font-medium"],[1,"text-center","mt-3"],[3,"routerLink"],[1,"btn","btn-primary"],["name","folder-input","size","18"],[1,"ml-2"]],template:function(i,o){1&i&&(t.j41(0,"teacher-layout",0)(1,"div",1)(2,"div",2)(3,"div",3),t.EFF(4),t.nI1(5,"mytranslate"),t.k0s()()(),t.j41(6,"div",1)(7,"div",4)(8,"div",5),t.bIt("click",function(){return o.beforeOpenEditor()}),t.j41(9,"div",6),t.nrm(10,"lucide-icon",7),t.k0s(),t.j41(11,"div",8)(12,"div",3),t.EFF(13),t.nI1(14,"mytranslate"),t.k0s()()(),t.j41(15,"azt-upload-single-document-to-editor",9),t.bIt("emitFiles",function(r){return o.changeFileAction(r)}),t.j41(16,"div",10)(17,"div",11)(18,"div",12)(19,"div",13),t.nrm(20,"lucide-icon",14),t.k0s(),t.j41(21,"div",15)(22,"div",16),t.EFF(23),t.nI1(24,"mytranslate"),t.k0s(),t.j41(25,"div",17),t.EFF(26),t.nI1(27,"mytranslate"),t.j41(28,"a",18),t.bIt("click",function(r){return r.stopPropagation()}),t.EFF(29),t.nI1(30,"mytranslate"),t.k0s(),t.j41(31,"div",19)(32,"azt-download-link-item",20),t.nI1(33,"convertRawLinkOfGitHubWithLocale"),t.nI1(34,"mytranslate"),t.bIt("click",function(r){return o.isMobileWebView?"":r.stopPropagation()}),t.k0s(),t.EFF(35," \xa0|\xa0 "),t.j41(36,"azt-download-link-item",21),t.nI1(37,"convertRawLinkOfGitHubWithLocale"),t.nI1(38,"mytranslate"),t.bIt("click",function(r){return o.isMobileWebView?"":r.stopPropagation()}),t.k0s()()()()()()()(),t.j41(39,"div",22),t.EFF(40),t.nI1(41,"mytranslate"),t.k0s(),t.j41(42,"div",23)(43,"a",24),t.nI1(44,"navigationLocalize"),t.j41(45,"button",25),t.nrm(46,"lucide-icon",26),t.j41(47,"span",27),t.EFF(48),t.nI1(49,"mytranslate"),t.k0s()()()()()()()),2&i&&(t.Y8G("headerBackToLink","/admin/question-library/view-question-library/"+o.bankId+"/0"),t.R7$(4),t.SpI(" ",t.bMT(5,23,"lang_azt_enter_questions_into_the_bank")," "),t.R7$(6),t.Y8G("ngClass",t.lJ4(47,Xe)),t.R7$(3),t.SpI(" ",t.bMT(14,25,"lang_question_library_import_question_by_manual_editor")," "),t.R7$(2),t.Y8G("fileType",t.l_i(48,Ke,o.allUploadFileTypes.WORD,o.allUploadFileTypes.AZT))("limitSize",200),t.R7$(5),t.Y8G("ngClass",t.lJ4(51,Ue)),t.R7$(3),t.JRh(t.bMT(24,27,"lang_auto_chon_file_hoc_keo_tha_file_vao_day")),t.R7$(3),t.SpI(" ",t.bMT(27,29,"lang_auto_azota_support_file_type")," .docx. "),t.R7$(3),t.SpI(" ",t.bMT(30,31,"lang_auto_tim_hieu_them")," "),t.R7$(3),t.Y8G("dataUrl",t.bMT(33,33,"medias_[LANG]/de_mau_azota.docx?raw=true"))("target","_self")("fileName",t.bMT(34,35,"lang_testbank_create_document_azota_docx_model"))("fileDescription","lang_testbank_create_document_azota_docx_model")("classStyle","text-primary"),t.R7$(4),t.Y8G("dataUrl",t.bMT(37,37,"medias_[LANG]/mau_de_dung_sai_azota_v2.docx?raw=true"))("target","_self")("fileName",t.bMT(38,39,"lang_testbank_create_document_azota_docx_true_false_model"))("fileDescription","lang_testbank_create_document_azota_docx_true_false_model")("classStyle","text-primary"),t.R7$(4),t.SpI(" ",t.bMT(41,41,"lang_auto_hoac")," "),t.R7$(3),t.Y8G("routerLink",t.eq3(52,Je,t.bMT(44,43,"/admin/question-library/import-question-to-library/"+o.bankId))),t.R7$(5),t.JRh(t.bMT(49,45,"lang_azt_import_from_your_exam_questions")))},dependencies:[C.Wk,d.YU,Ve.W,Be.p,z.Q,h.WGl,x.F2,x.wp,x.V3],encapsulation:2}),s})();var Y=l(65106),V=l(25539),B=l(32639),D=l(18718),He=l(11002),Ze=l(52986),q=l(30657),X=l(5271),H=l(64486),Z=l(66793),tt=l(47426),et=l(4375),nt=l(42789),it=l(60780),ot=l(5955),at=l(6625),tn=l(3968),K=l(9570),en=l(6417),nn=l(88114);const on=e=>({"skeleton-box-loading":e}),an=e=>({"pb-2":e});function sn(e,s){if(1&e&&t.nrm(0,"div",3),2&e){const n=t.XpG();t.Y8G("ngClass",t.eq3(1,on,n.renderConfigObj.isFirstRender))}}function rn(e,s){if(1&e&&(t.j41(0,"div",24),t.nrm(1,"azt-dynamic-hook",17),t.k0s()),2&e){let n;const i=t.XpG(2);t.R7$(),t.Y8G("content",null!==(n=null==i.question.groupInfo?null:i.question.groupInfo.groupContent)&&void 0!==n?n:"")}}function ln(e,s){if(1&e&&t.nrm(0,"azt-test-audio-ui",25),2&e){const n=t.XpG(2);t.Y8G("questionObj",n.question)("isShowList",!0)}}function cn(e,s){if(1&e&&(t.j41(0,"div",28)(1,"b",29),t.EFF(2),t.nI1(3,"isTrueFalseAnswer"),t.k0s(),t.nrm(4,"azt-dynamic-hook",17),t.k0s()),2&e){let n;const i=s.$implicit,o=t.XpG(3);t.R7$(2),t.JRh(t.bMT(3,2,o.question)?(null!==(n=i.alpha)&&void 0!==n?n:i.key).toLowerCase()+")":(null!==(n=i.alpha)&&void 0!==n?n:i.key)+"."),t.R7$(2),t.Y8G("content",i.content)}}function dn(e,s){if(1&e&&(t.j41(0,"div",26),t.DNE(1,cn,5,4,"div",27),t.k0s()),2&e){const n=t.XpG(2);t.Y8G("answerSizeManager",0),t.R7$(),t.Y8G("ngForOf",n.question.answersOrigin)}}function un(e,s){if(1&e){const n=t.RV6();t.j41(0,"div",4)(1,"div",5),t.DNE(2,rn,2,1,"div",6),t.j41(3,"div",7),t.DNE(4,ln,1,2,"azt-test-audio-ui",8),t.j41(5,"div",9)(6,"div",9)(7,"div",10),t.EFF(8),t.nI1(9,"mytranslate"),t.k0s(),t.j41(10,"mat-select",11)(11,"mat-option",12),t.EFF(12),t.nI1(13,"mytranslate"),t.k0s(),t.j41(14,"mat-option",12),t.EFF(15),t.nI1(16,"mytranslate"),t.k0s(),t.j41(17,"mat-option",12),t.EFF(18),t.nI1(19,"mytranslate"),t.k0s(),t.j41(20,"mat-option",12),t.EFF(21),t.nI1(22,"mytranslate"),t.k0s()()(),t.j41(23,"div",13)(24,"azt-question-tag-in-question-library-with-create-mode",14),t.bIt("changeTagEmit",function(o){t.eBV(n);const a=t.XpG();return t.Njj(a.changeTagEmit.emit(o))})("applyTagToAllEmit",function(o){t.eBV(n);const a=t.XpG();return t.Njj(a.applyTagToAllEmit.emit(o))})("removeTagEmit",function(){t.eBV(n);const o=t.XpG();return t.Njj(o.removeTagEmit.emit())}),t.k0s()(),t.j41(25,"div",15)(26,"azt-similar-question-box-in-create-mode",16),t.bIt("reCallSimilarQuestionEmit",function(){t.eBV(n);const o=t.XpG();return t.Njj(o.reCallSimilarQuestionEmit.emit())})("deleteSimilarQuestionEmit",function(){t.eBV(n);const o=t.XpG();return t.Njj(o.deleteSimilarQuestionEmit.emit())}),t.k0s()()(),t.nrm(27,"azt-dynamic-hook",17),t.k0s(),t.DNE(28,dn,2,2,"div",18),t.nI1(29,"isOneChoiceAnswer"),t.nI1(30,"isTrueFalseAnswer"),t.j41(31,"div",19),t.nrm(32,"azt-question-answer-view-with-simple-result-box-for-teacher",20),t.k0s(),t.j41(33,"div",21)(34,"div",22)(35,"span"),t.EFF(36),t.nI1(37,"mytranslate"),t.k0s()(),t.j41(38,"azt-question-knowledge-unit-for-question-library-to-auto-suggestion",23),t.bIt("selectKnowledgeEmit",function(o){t.eBV(n);const a=t.XpG();return t.Njj(a.selectKnowledgeEmit.emit(o))}),t.k0s()()()()}if(2&e){let n,i,o;const a=t.XpG();t.R7$(),t.xc7("font-size","1em")("line-height","1.7")("overflow","auto"),t.Y8G("id","question_render_container_"+a.question.id)("ngClass",t.eq3(51,an,a.question.attachments.length>0)),t.R7$(),t.Y8G("ngIf",null==a.question.groupInfo?null:a.question.groupInfo.isFirstInGroup),t.R7$(2),t.Y8G("ngIf",a.question.attachments.length>0),t.R7$(4),t.SpI(" ",t.bMT(9,35,"lang_auto_cau")+" "+(null!=a.question.labelIndex?a.question.labelIndex:a.index+1)," "),t.R7$(2),t.Y8G("ngModel",a.question.answerType)("disabled",!0),t.R7$(),t.Y8G("value",3),t.R7$(),t.SpI(" ",t.bMT(13,37,"lang_testbank_create_exam_width_file_docx_essay")," "),t.R7$(2),t.Y8G("value",1),t.R7$(),t.SpI(" ",t.bMT(16,39,"lang_auto_trac_nghiem")," "),t.R7$(2),t.Y8G("value",4),t.R7$(),t.SpI(" ",t.bMT(19,41,"lang_auto_dien_tu")," "),t.R7$(2),t.Y8G("value",5),t.R7$(),t.SpI("",t.bMT(22,43,"lang_auto_trac_nghiem")," \u0110/S"),t.R7$(3),t.Y8G("questionObj",a.question)("currentQuestionTags",a.question.tags),t.R7$(2),t.Y8G("bankObj",a.bankObj)("question",a.question)("similarStatus",a.similarStatus),t.R7$(),t.Y8G("content",null!==(n=a.question.content)&&void 0!==n?n:""),t.R7$(),t.Y8G("ngIf",(t.bMT(29,45,a.question)||t.bMT(30,47,a.question))&&a.question.answers&&a.question.answers.length>0),t.R7$(4),t.Y8G("questionObj",a.question),t.R7$(4),t.JRh(t.bMT(37,49,"lang_auto_don_vi_kien_thuc")),t.R7$(2),t.Y8G("bankObj",a.bankObj)("bankKnowledgeObjs",a.bankKnowledgeObjs)("objectiveId",null!==(i=a.question.objectiveId)&&void 0!==i?i:0)("questionContent",null!==(o=a.question.content)&&void 0!==o?o:"")("answerContents",a.getAnswerContents(a.question))}}let mn=(()=>{var e;class s extends H.I{constructor(){super(...arguments),this.follower=new q.e,this.selectKnowledgeEmit=new t.bkB,this.reCallSimilarQuestionEmit=new t.bkB,this.deleteSimilarQuestionEmit=new t.bkB,this.changeTagEmit=new t.bkB,this.applyTagToAllEmit=new t.bkB,this.removeTagEmit=new t.bkB}getAnswerContents(i){return i.answers.map(o=>o.content)}ngOnInit(){super.ngOnInit();let i=new Z.C(!0,!1,!1);super.initData(i,this.follower,this.question)}}return(e=s).\u0275fac=(()=>{let n;return function(o){return(n||(n=t.xGo(e)))(o||e)}})(),e.\u0275cmp=t.VBU({type:e,selectors:[["azt-question-standalone-for-question-library-in-import-mode"]],inputs:{question:"question",index:"index",follower:"follower",knowledgeObjs:"knowledgeObjs",bankObj:"bankObj",bankKnowledgeObjs:"bankKnowledgeObjs",similarStatus:"similarStatus"},outputs:{selectKnowledgeEmit:"selectKnowledgeEmit",reCallSimilarQuestionEmit:"reCallSimilarQuestionEmit",deleteSimilarQuestionEmit:"deleteSimilarQuestionEmit",changeTagEmit:"changeTagEmit",applyTagToAllEmit:"applyTagToAllEmit",removeTagEmit:"removeTagEmit"},features:[t.Vt3],decls:4,vars:3,consts:[["elementRended",""],["load_effect_lazy","",1,"question-standalone-box",3,"id"],["class","question-standalone-loader-box",3,"ngClass",4,"ngIf","ngIfElse"],[1,"question-standalone-loader-box",3,"ngClass"],[1,"question-standalone-content-box"],[1,"question-standalone-container-ebank","p-3","border-none",3,"id","ngClass"],["class","group-content-of-question-standalone",4,"ngIf"],[1,"question-standalone-main-content"],[3,"questionObj","isShowList",4,"ngIf"],[1,"flex","items-center"],[1,"question-standalone-label","whitespace-nowrap","mr-2"],[3,"ngModel","disabled"],[3,"value"],[1,"ml-3"],[3,"changeTagEmit","applyTagToAllEmit","removeTagEmit","questionObj","currentQuestionTags"],[1,"ml-auto"],[3,"reCallSimilarQuestionEmit","deleteSimilarQuestionEmit","bankObj","question","similarStatus"],[3,"content"],["class","row answers",3,"answerSizeManager",4,"ngIf"],[1,"flex"],[3,"questionObj"],[1,"box-help","p-2"],[1,"help-title","uppercase"],[3,"selectKnowledgeEmit","bankObj","bankKnowledgeObjs","objectiveId","questionContent","answerContents"],[1,"group-content-of-question-standalone"],[3,"questionObj","isShowList"],[1,"row","answers",3,"answerSizeManager"],["class","answer col-sm-12 col-md-6",4,"ngFor","ngForOf"],[1,"answer","col-sm-12","col-md-6"],[1,"answer-label"]],template:function(i,o){if(1&i&&(t.j41(0,"div",1),t.DNE(1,sn,1,3,"div",2)(2,un,39,53,"ng-template",null,0,t.C5r),t.k0s()),2&i){const a=t.sdS(3);t.Y8G("id","question_render_element_"+o.question.id),t.R7$(),t.Y8G("ngIf",!o.renderConfigObj.isRenderElement)("ngIfElse",a)}},dependencies:[d.YU,d.Sq,d.bT,tt.wT,et.VO,u.BC,u.vS,nt.N,it.c,ot.C,at.l,tn.M,K.x,en.K,nn.h,x.wp,x.V6,x.FC],styles:['.pr-7[_ngcontent-%COMP%]{padding-right:28px}.w-38px[_ngcontent-%COMP%]{width:38px}.remove-grid[_ngcontent-%COMP%]{display:block!important}.question-standalone-loader-box[_ngcontent-%COMP%]{min-height:50px}  .skeleton-box-loading{width:100%;height:30px;max-width:100%;margin-bottom:5px;display:inline-block}  .skeleton-box-loading:after{position:absolute;top:0;right:0;bottom:0;left:0;transform:translate(-100%);animation:_ngcontent-%COMP%_shimmer 2s infinite;content:""}.question-standalone-box[_ngcontent-%COMP%]{margin-bottom:30px;display:block;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);border-radius:.375rem}.question-standalone-container[_ngcontent-%COMP%]{padding:15px}.question-standalone-for-test-finder[_ngcontent-%COMP%]{border:none;margin-bottom:0;padding:0}.question-standalone-for-test-finder[_ngcontent-%COMP%]   .question-standalone-main-content[_ngcontent-%COMP%]{padding:15px;border:1px solid rgb(228,228,228)}.group-of-question-standalone-for-test-finder[_ngcontent-%COMP%]{padding:15px!important;border:1px solid rgb(228,228,228)!important}.question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid #2262ae!important;outline:3px solid rgba(125,160,201,.65)!important}.group-of-question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid green!important;outline:3px solid rgba(0,193,0,.321)!important}.question-standalone-label[_ngcontent-%COMP%]{font-weight:700}.question-standalone-content-box[_ngcontent-%COMP%]{position:relative}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]{color:#f44336;position:relative;padding-left:20px;display:flex;align-items:center}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]:before{content:"!";position:absolute;left:0;color:#fff;background:#f44336;width:15px;height:15px;text-align:center;border-radius:50%;font-size:smaller;display:flex;justify-content:center;align-items:center}.question-standalone-step-container-box[_ngcontent-%COMP%]{margin-bottom:50px}.group-content-of-question-standalone[_ngcontent-%COMP%]{margin-bottom:10px;font-weight:700}.answer[_ngcontent-%COMP%]{display:flex;align-items:center}.answer-label[_ngcontent-%COMP%]{width:20px;height:30px;min-width:20px;min-height:30px;display:flex;align-items:center;justify-content:flex-start;border-radius:50%;border-width:2px;border-style:solid;border-color:transparent}.answer-box[_ngcontent-%COMP%]{border-radius:0 0 3px 3px;padding:8px 20px;justify-content:space-between;align-items:center}.selected-answer[_ngcontent-%COMP%]{background-color:#f39c12;color:#fff}.answer-content-front[_ngcontent-%COMP%]{display:flex!important;flex-wrap:wrap;width:calc(100% - 30px)}.explainTxt[_ngcontent-%COMP%]{width:125px;font-weight:500;display:flex;align-items:center}#examHeader[_ngcontent-%COMP%]{display:block;border:1px solid #e7e7e7;border-radius:3px;overflow:hidden}.arrow_btn[_ngcontent-%COMP%]{font-size:20px;vertical-align:middle;width:20px;height:20px;color:#fff;margin-left:auto!important;margin-right:auto!important;-webkit-user-select:none;user-select:none}.bottom_action[_ngcontent-%COMP%]{position:fixed;padding:15px;bottom:0;left:0;background:#312e2e;color:#fff;width:100%}.bottom_action[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]{display:block}.btn-ans-result[_ngcontent-%COMP%]{color:#fff;background-color:#f39c12}.show-list[_ngcontent-%COMP%]{max-width:200px}.show-list[_ngcontent-%COMP%]   .show-sheet[_ngcontent-%COMP%]   .listli[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:27px;height:27px;border-radius:50%;border:1px solid #347da5;display:flex;align-items:center;color:#fff;justify-content:center;font-size:12px;cursor:pointer;-webkit-user-select:none;user-select:none}.top_action[_ngcontent-%COMP%]{position:fixed;padding:10px;top:0;left:0;background:#312e2e;color:#fff;width:100%}.scrollSheetMobile[_ngcontent-%COMP%]{max-height:200px;overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.scrollSheetMobile[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.notify-badge[_ngcontent-%COMP%]{position:absolute;right:3px;top:3px;text-align:center;color:#afafaf;padding:0;font-size:20px;cursor:pointer}.attach-container[_ngcontent-%COMP%]{background:#fff;padding:10px 0 0;border-radius:5px;width:83.33%;border:1px solid #e8e8e8}.answer-review[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:50%;border:1px solid rgb(52,125,165);display:flex;align-items:center;color:#fff;justify-content:center;font-size:15px;-webkit-user-select:none;user-select:none}.border-none[_ngcontent-%COMP%]{border:none!important}.bg-question[_ngcontent-%COMP%]{margin-top:15px;padding:15px 10px;background:#fff}.question-pending-part[_ngcontent-%COMP%]{width:100%;height:50px}.pencil-edit[_ngcontent-%COMP%]{position:absolute;top:-5px;right:-5px;width:30px;height:30px;border-radius:50%;text-align:center;background:#a9a9a9;z-index:9999}.pencil-edit[_ngcontent-%COMP%]   .lucide[_ngcontent-%COMP%]{color:#fff;stroke-width:2.5px;height:29px}.margin-question-bar[_ngcontent-%COMP%]{margin-top:calc(3rem + 40px)!important}.sheet-screen[_ngcontent-%COMP%]{max-height:calc(100vh - 140px);overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.sheet-screen[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.box-help[_ngcontent-%COMP%]{border-top:1px solid #d7d7d7;padding:10px 30px 0 0}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]{text-align:center;font-size:11px;margin-top:-20px}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#fff;padding:0 10px;color:#d58e0b}.box-help[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]{font-size:13px;overflow-x:auto;overflow-y:hidden}  .layout{display:grid;margin:20px 0;grid-row-gap:20px}  .layout-4{grid-template-columns:1fr 1fr 1fr 1fr}  .layout-2{grid-template-columns:1fr 1fr}  .layout-1{grid-template-columns:1fr}  .question-standalone-content-box{max-width:100%;overflow-x:auto;overflow-y:hidden}  #boxContentQuestion .question-standalone-container{max-width:800px}@keyframes _ngcontent-%COMP%_shimmer{to{transform:translate(100%)}}@media (max-width: 768px){.answer-content-front[_ngcontent-%COMP%]{justify-content:center}.btn-ans-result[_ngcontent-%COMP%]{margin-right:auto!important}}@media (max-width: 800px){  #boxContentQuestion .question-standalone-container{max-width:calc(90vw - 16px)!important}}']}),s})();function _n(e,s){if(1&e){const n=t.RV6();t.j41(0,"div",2)(1,"azt-question-standalone-for-question-library-in-import-mode",3),t.bIt("selectKnowledgeEmit",function(o){t.eBV(n);const a=t.XpG().$implicit,r=t.XpG();return t.Njj(r.selectKnowledgeEmit(o,a))})("reCallSimilarQuestionEmit",function(){t.eBV(n);const o=t.XpG(2);return t.Njj(o.getQuestionsSimilarity())})("deleteSimilarQuestionEmit",function(){t.eBV(n);const o=t.XpG().$implicit,a=t.XpG();return t.Njj(a.deleteSimilarQuestion(o))})("changeTagEmit",function(o){t.eBV(n);const a=t.XpG().$implicit,r=t.XpG();return t.Njj(r.setTag(a,[o]))})("applyTagToAllEmit",function(){t.eBV(n);const o=t.XpG().$implicit,a=t.XpG();return t.Njj(a.applyTagAll(o))})("removeTagEmit",function(){t.eBV(n);const o=t.XpG().$implicit,a=t.XpG();return t.Njj(a.setTag(o,[]))}),t.k0s()()}if(2&e){const n=t.XpG(),i=n.$implicit,o=n.index,a=t.XpG();t.R7$(),t.Y8G("question",i)("index",o)("follower",a.followerRenderQuest)("bankObj",a.ebankDataObj)("bankKnowledgeObjs",a.bankKnowledgeObjs)("similarStatus",a.similarStatus)}}function pn(e,s){if(1&e&&(t.qex(0),t.DNE(1,_n,2,6,"div",1),t.bVm()),2&e){const n=t.XpG();t.R7$(),t.Y8G("ngIf",n.ebankDataObj)}}let gn=(()=>{var e;class s extends j.H{constructor(){super(...arguments),this.similarStatus="loading",this.followerRenderQuest=new q.e,this.sAztKnowledgeObjectiveForQuestionLibraryService=(0,t.WQX)(X.z),this.bankKnowledgeObjs=[],this.sAztSimilarQuestionService=(0,t.WQX)(Ze.z)}applyTagAll(i){const o=this.questionObjs.indexOf(i);this.questionObjs.forEach((a,r)=>{r<=o||(a.tags=i.tags)})}setTag(i,o){let a=this.questionObjs.find(r=>r.id==i.id);a&&(a.tags=o)}deleteSimilarQuestion(i){this.questionObjs=this.questionObjs.filter(o=>o.id!=i.id)}selectKnowledgeEmit(i,o){let a=this.questionObjs.find(r=>r.id==o.id);a&&(a.objectiveId=i.suggestId)}getQuestionsSimilarity(){this.similarStatus="loading";let i=this.questionObjs.map(o=>({questionId:o.id,questionContent:o.content??"",answerContents:o.answers.map(a=>a.content)}));this.ebankDataObj&&this.sAztSimilarQuestionService.callApiToGetSimilarQuestions(this.ebankDataObj,i,o=>{this.similarStatus="success",this.questionObjs.forEach(a=>{let r=o.find(f=>f.questionId==a.id)?.similarResponse;a.similarQuestionInfo={similarRate:r?.maxSimilarRate,duplicateAccept:void 0,duplicateMetadata:r}})},o=>{this.similarStatus="error",this.errorStatusObj(o,!0)})}checkCurrentKnowledgeTreeNode(){this.questionObjs.forEach(i=>{if(i.objectiveId){let o=this.sAztKnowledgeObjectiveForQuestionLibraryService.getObjBySuggestId(this.bankKnowledgeObjs,i.objectiveId);o||(i.objectiveId=o)}})}ngOnInit(){this.initStatusObj(),super.ngOnInit(),this.sAztKnowledgeObjectiveForQuestionLibraryService.getKnowledgeByApi(this.questionBankId,(i,o)=>{this.ebankDataObj=o,this.bankKnowledgeObjs=i,this.checkCurrentKnowledgeTreeNode(),this.getQuestionsSimilarity()},i=>{})}}return(e=s).\u0275fac=(()=>{let n;return function(o){return(n||(n=t.xGo(e)))(o||e)}})(),e.\u0275cmp=t.VBU({type:e,selectors:[["app-view-list-import-questions"]],inputs:{questionObjs:"questionObjs",questionBankId:"questionBankId"},features:[t.Vt3],decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],["class","box mb-5",4,"ngIf"],[1,"box","mb-5"],[3,"selectKnowledgeEmit","reCallSimilarQuestionEmit","deleteSimilarQuestionEmit","changeTagEmit","applyTagToAllEmit","removeTagEmit","question","index","follower","bankObj","bankKnowledgeObjs","similarStatus"]],template:function(i,o){1&i&&t.DNE(0,pn,2,1,"ng-container",0),2&i&&t.Y8G("ngForOf",o.questionObjs)},dependencies:[d.Sq,d.bT,mn],encapsulation:2}),s})();function bn(e,s){if(1&e&&t.nrm(0,"azt-loading-effect",3),2&e){const n=t.XpG();t.Y8G("currentStatusObj",n.statusObj)}}function fn(e,s){1&e&&t.nrm(0,"azt-loading-ui",14)}function hn(e,s){if(1&e){const n=t.RV6();t.j41(0,"div",4)(1,"div",5)(2,"div",6)(3,"span",7),t.EFF(4),t.nI1(5,"mytranslate"),t.k0s(),t.j41(6,"span",8),t.EFF(7),t.nI1(8,"mytranslate"),t.k0s()(),t.j41(9,"div",9)(10,"flexed-on-the-top",10)(11,"button",11),t.bIt("click",function(){t.eBV(n);const o=t.XpG();return t.Njj(o.handleSubmitData())}),t.DNE(12,fn,1,0,"azt-loading-ui",12),t.EFF(13),t.nI1(14,"mytranslate"),t.k0s()()()(),t.nrm(15,"app-view-list-import-questions",13),t.k0s()}if(2&e){const n=t.XpG();t.R7$(4),t.SpI(" ",t.bMT(5,8,"lang_azt_categorize_requirements_for_each_question")," "),t.R7$(3),t.SpI(" ","("+n.questionObjs.length+" "+t.bMT(8,10,"lang_notice_question")+")"," "),t.R7$(3),t.Y8G("colorBackground","#f0f8ffe8"),t.R7$(),t.Y8G("disabled",n.isDisable()||n.isSaveLoading),t.R7$(),t.Y8G("ngIf",n.isSaveLoading),t.R7$(),t.SpI(" ",t.bMT(14,12,"lang_azt_save_to_the_bank")," "),t.R7$(2),t.Y8G("questionObjs",n.questionObjs)("questionBankId",n.bankId)}}let vn=(()=>{var e;class s extends j.H{getQuestion(){this.waitDestroy(this.ebankQuestionService.apiEbanksQuestionsListPost({ebankId:this.bankId,page:1,size:-1}).subscribe(o=>{if(!o.success)return this.errorStatusObj(o.message,!0);let a=o.data?.list.map(r=>r.questionTest)??[];this.initData(a)}))}isDisable(){return this.questionObjs.some(o=>null==o.similarQuestionInfo)}getQuestionIdError(){let i=this.questionObjs.find(r=>null==r.similarQuestionInfo)?.id,o=this.questionObjs.find(r=>null==r.objectiveId)?.id,a=this.questionObjs.find(r=>r.tags.length<=0)?.id;return i||o||a||0}saveQuestionObjs(i){this.isSaveLoading=!0,this.ebankQuestionService.apiEbanksQuestionsPost({ebankId:this.bankId,fileName:"Import",questions:i}).subscribe(a=>{if(this.isSaveLoading=!1,!a.success)return this.showErrorSnack(a.message);this.showSuccessSnack("lang_core_luu_vao_ngan_hang_thanh_cong"),this.myNavigation(`/admin/question-library/view-question-library/${Number(this.bankId)}/0`)})}handleSubmitData(){let i=this.getQuestionIdError();if(i)return this.scrollToQuestion(i);let o=this.questionObjs.map(a=>({tags:a.tags.map(r=>r.code).filter(this.commonService.notEmpty)??[],similarRate:a.similarQuestionInfo?.similarRate??0,similarQuestionInfo:a.similarQuestionInfo,questionId:a.id,objectiveId:a.objectiveId}));this.saveQuestionObjs(o)}scrollToQuestion(i){document.getElementById("question_render_element_"+i)?.scrollIntoView()}initData(i){this.loadQuest(i,o=>{this.questionObjs=o,this.stopStatusObj()})}loadQuest(i,o){const a=this.commonService.castJsonToClassObjs(V.I,JSON.stringify(i));this.questionRenderService.parseRenderQuestions(a??[],r=>{},this.configRenderService).then(r=>o(r)).catch(r=>{this.showErrorSnack("lang_auto_de_thi_tai_khong_thanh_cong"),o(a??[])})}ngOnInit(){this.initStatusObj(),super.ngOnInit(),this.bankId=Number(this.commonService.getMyParam(this.activeRoute,"bankId")),this.backLink=`/admin/question-library/choose-import-question-mode/${this.bankId}/1`,this.getQuestion()}constructor(i,o){super(),this.ebankQuestionService=i,this.activeRoute=o,this.bankId=0,this.backLink="",this.questionObjs=[],this.isSaveLoading=!1,this.questionRenderService=(0,t.WQX)(B.g),this.configRenderService=new Y.y(!0)}}return(e=s).\u0275fac=function(i){return new(i||e)(t.rXU(Q.N8),t.rXU(C.nX))},e.\u0275cmp=t.VBU({type:e,selectors:[["app-import-question-to-library"]],features:[t.Vt3],decls:4,vars:3,consts:[["doneLoading",""],[3,"headerBackToLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[1,"config-import-question","mt-5"],[1,"mb-3","flex","items-center"],[1,"flex","items-center","font-medium"],[1,"text-lg"],[1,"text-slate-500","ml-4"],[1,"ml-auto"],[3,"colorBackground"],[1,"btn","btn-primary",3,"click","disabled"],["class","mr-2",4,"ngIf"],[3,"questionObjs","questionBankId"],[1,"mr-2"]],template:function(i,o){if(1&i&&(t.j41(0,"teacher-layout",1),t.DNE(1,bn,1,1,"azt-loading-effect",2)(2,hn,16,14,"ng-template",null,0,t.C5r),t.k0s()),2&i){const a=t.sdS(3);t.Y8G("headerBackToLink",o.backLink),t.R7$(),t.Y8G("ngIf",o.statusObj.loading)("ngIfElse",a)}},dependencies:[d.bT,D.K,E.R,He.$,z.Q,gn,x.wp],encapsulation:2}),s})();var xn=l(30427),st=l(60833),yt=l(58447),It=l(54313),yn=l(81328);const In=()=>({"mr-1":!0});function Cn(e,s){1&e&&t.nrm(0,"azt-loading-ui",3),2&e&&t.Y8G("size",16)}function On(e,s){1&e&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&e&&(t.R7$(),t.JRh(t.bMT(2,1,"long_core_chon_khung_kien_thuc")))}function jn(e,s){if(1&e&&t.nrm(0,"azt-dynamic-hook",9),2&e){const n=t.XpG(2);t.Y8G("content",n.currentKnowledgeTreeNode.name)}}function kn(e,s){if(1&e){const n=t.RV6();t.j41(0,"div",4),t.DNE(1,On,3,3,"span",5)(2,jn,1,1,"azt-dynamic-hook",6),t.j41(3,"a",7),t.bIt("click",function(){t.eBV(n);const o=t.XpG();return t.Njj(o.openKnowledgeObjectiveTreeNodeDialog())}),t.nrm(4,"lucide-icon",8),t.j41(5,"span"),t.EFF(6),t.nI1(7,"mytranslate"),t.k0s()()()}if(2&e){const n=t.XpG();t.R7$(),t.Y8G("ngIf",!n.currentKnowledgeTreeNode),t.R7$(),t.Y8G("ngIf",n.currentKnowledgeTreeNode),t.R7$(2),t.Y8G("ngClass",t.lJ4(6,In)),t.R7$(2),t.JRh(t.bMT(7,4,"lang_auto_sua"))}}let Ct=(()=>{var e;class s extends j.H{openKnowledgeObjectiveTreeNodeDialog(){this.sAztDialogService.open(yn.y,{data:{bankObj:this.bankObj,selectedObj:{objectiveId:this.objectiveId}},width:"100vw",restoreFocus:!1}).afterClosed().subscribe(o=>{o&&(this.initStatusObj(),this.waitDestroy(this.questionService.apiQuestionUpdateQuestionKnowledgePost({ebankId:this.bankObj.id,questions:[{questionId:this.questionId,knowledgeId:void 0,objectiveId:o.suggestId}]}).subscribe(r=>{if(!r)return this.errorStatusObj("lang_update_question_knowledge_unsuccessfully",!0);this.currentKnowledgeTreeNode=o,this.selectKnowledgeEmit.emit(o),this.successStatusObj("lang_update_question_knowledge_successfully",!0)})))})}ngOnInit(){this.currentKnowledgeTreeNode=this.sAztKnowledgeObjectiveForQuestionLibraryService.getObjBySuggestId(this.bankKnowledgeObjs,this.objectiveId)}constructor(i,o){super(),this.questionService=i,this.sAztDialogService=o,this.sAztKnowledgeObjectiveForQuestionLibraryService=(0,t.WQX)(X.z),this.selectKnowledgeEmit=new t.bkB}}return(e=s).\u0275fac=function(i){return new(i||e)(t.rXU(W.wP),t.rXU(L.i))},e.\u0275cmp=t.VBU({type:e,selectors:[["azt-question-knowledge-unit-for-question-library-to-update"]],inputs:{bankKnowledgeObjs:"bankKnowledgeObjs",questionId:"questionId",bankObj:"bankObj",objectiveId:"objectiveId"},outputs:{selectKnowledgeEmit:"selectKnowledgeEmit"},features:[t.Vt3],decls:4,vars:2,consts:[["loadingDone",""],[1,"treeview-dd"],["class","ml-3",3,"size",4,"ngIf","ngIfElse"],[1,"ml-3",3,"size"],[1,"flex"],[4,"ngIf"],[3,"content",4,"ngIf"],[1,"ml-2","link__hover","link__color","clickable",2,"display","inline-flex","align-items","center",3,"click"],["name","tags","size","16",3,"ngClass"],[3,"content"]],template:function(i,o){if(1&i&&(t.j41(0,"div",1),t.DNE(1,Cn,1,1,"azt-loading-ui",2)(2,kn,8,7,"ng-template",null,0,t.C5r),t.k0s()),2&i){const a=t.sdS(3);t.R7$(),t.Y8G("ngIf",o.statusObj.loading)("ngIfElse",a)}},dependencies:[d.YU,d.bT,h.WGl,E.R,K.x,x.wp],styles:["label[_ngcontent-%COMP%]{margin-bottom:0;cursor:pointer}.bi[_ngcontent-%COMP%]{cursor:pointer;margin-right:.3rem}"]}),s})();var wn=l(68106);function Tn(e,s){if(1&e&&(t.j41(0,"span",3),t.nI1(1,"mytranslate"),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s()),2&e){const n=t.XpG();t.FS9("matTooltip",t.bMT(1,2,"lang_auto_gan_nhan_muc_do_nhan_biet")),t.R7$(2),t.SpI(" ",t.bMT(3,4,n.currentQuestionTagName)," ")}}function Qn(e,s){1&e&&(t.j41(0,"span",4),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&e&&(t.R7$(),t.SpI("*",t.bMT(2,1,"lang_question_library_not_have_question_tag"),""))}let Ot=(()=>{var e;class s extends j.H{constructor(){super(...arguments),this.changeTagEmit=new t.bkB,this.applyTagToAllEmit=new t.bkB,this.removeTagEmit=new t.bkB,this.sAztQuestionTagService=(0,t.WQX)(wn.c),this.questionTags=[]}initData(){this.viewQuestionTags=this.questionTags.map(o=>({...o,showName:this.commonService.getValueOfKeyInObject(o,this.commonService.getCurrentLang()+"Name")??o.enName??"Empty"}));let i=this.commonService.getFirstOfArray(this.questionObj.tags??[])?.code;this.currentQuestionTagName=i?"azt_lang_tag_"+i:void 0}ngOnChanges(){this.sAztQuestionTagService.getQuestionTags(i=>{this.questionTags=i,this.initData()})}}return(e=s).\u0275fac=(()=>{let n;return function(o){return(n||(n=t.xGo(e)))(o||e)}})(),e.\u0275cmp=t.VBU({type:e,selectors:[["azt-question-tag-in-question-library-with-edit-mode"]],inputs:{questionObj:"questionObj",currentQuestionTags:"currentQuestionTags"},outputs:{changeTagEmit:"changeTagEmit",applyTagToAllEmit:"applyTagToAllEmit",removeTagEmit:"removeTagEmit"},features:[t.Vt3,t.OA$],decls:4,vars:2,consts:[["notHaveQuestionTag",""],[1,"clickable"],["class","py-0.5 px-2 rounded-full bg-gray text-black font-medium flex items-center",3,"matTooltip",4,"ngIf","ngIfElse"],[1,"py-0.5","px-2","rounded-full","bg-gray","text-black","font-medium","flex","items-center",3,"matTooltip"],[1,"text-pending"]],template:function(i,o){if(1&i&&(t.j41(0,"span",1),t.DNE(1,Tn,4,6,"span",2)(2,Qn,3,3,"ng-template",null,0,t.C5r),t.k0s()),2&i){const a=t.sdS(3);t.R7$(),t.Y8G("ngIf",null==o.questionObj.tags?null:o.questionObj.tags.length)("ngIfElse",a)}},dependencies:[d.bT,A.oV,x.wp],encapsulation:2}),s})();const En=e=>({"skeleton-box-loading":e}),Mn=e=>({"pb-2":e}),jt=e=>({"padding-mobile":e});function Sn(e,s){if(1&e&&t.nrm(0,"div",4),2&e){const n=t.XpG();t.Y8G("ngClass",t.eq3(1,En,n.renderConfigObj.isFirstRender))}}function Rn(e,s){if(1&e&&t.nrm(0,"azt-test-audio-ui",25),2&e){const n=t.XpG(2);t.Y8G("questionObj",n.questionObj)("isShowList",!0)}}function Fn(e,s){if(1&e&&(t.j41(0,"div",26),t.EFF(1),t.nI1(2,"isOfflineExam"),t.nI1(3,"mytranslate"),t.k0s()),2&e){let n;const i=t.XpG(2);t.R7$(),t.Lme(" ",i.customQuestionLabel+" "+((null!=i.questionObj.labelIndex?i.questionObj.labelIndex:i.curQuestionIndex)+(null!==(n=i.examObj.startQuestionIndex)&&void 0!==n?n:1))," ",t.bMT(2,2,i.examObj)?" ("+t.bMT(3,4,"lang_auto_hoi_de_thi_offline")+") ":null," ")}}function Ln(e,s){1&e&&(t.j41(0,"div",17),t.EFF(1,"|"),t.k0s())}function qn(e,s){1&e&&(t.j41(0,"div",17),t.EFF(1,"|"),t.k0s())}function zn(e,s){1&e&&(t.j41(0,"div",27),t.nI1(1,"mytranslate"),t.nrm(2,"lucide-icon",28),t.k0s()),2&e&&t.FS9("matTooltip",t.bMT(1,1,"lang_auto_dap_an_cua_cau_hoi_nay_da_duoc_co_dinh"))}function An(e,s){1&e&&(t.j41(0,"div",32)(1,"span",33),t.nrm(2,"azt-loading-ui"),t.k0s()())}function Gn(e,s){if(1&e&&(t.j41(0,"div",35)(1,"b",36),t.EFF(2),t.nI1(3,"isTrueFalseAnswer"),t.k0s(),t.nrm(4,"azt-dynamic-hook",37),t.k0s()),2&e){let n;const i=s.$implicit,o=t.XpG(5);t.R7$(2),t.JRh(t.bMT(3,2,o.questionObj)?(null!==(n=i.alpha)&&void 0!==n?n:i.key).toLowerCase()+")":(null!==(n=i.alpha)&&void 0!==n?n:i.key)+"."),t.R7$(2),t.Y8G("content",i.content)}}function Dn(e,s){if(1&e&&t.DNE(0,Gn,5,4,"div",34),2&e){const n=t.XpG(4);t.Y8G("ngForOf",n.questionObj.answers)}}function Pn(e,s){if(1&e&&(t.j41(0,"div",30),t.DNE(1,An,3,0,"div",31)(2,Dn,1,1,"ng-template",null,1,t.C5r),t.k0s()),2&e){const n=t.sdS(3),i=t.XpG(3);t.Y8G("answerSizeManager",0),t.R7$(),t.Y8G("ngIf",i.questionObj.isLoading)("ngIfElse",n)}}function $n(e,s){if(1&e&&(t.qex(0),t.DNE(1,Pn,4,3,"div",29),t.nI1(2,"isOneChoiceAnswer"),t.nI1(3,"isTrueFalseAnswer"),t.bVm()),2&e){const n=t.XpG(2);t.R7$(),t.Y8G("ngIf",(t.bMT(2,1,n.questionObj)||t.bMT(3,3,n.questionObj))&&n.questionObj.answers&&n.questionObj.answers.length>0)}}function Nn(e,s){if(1&e&&(t.j41(0,"div",38)(1,"div",39)(2,"span"),t.EFF(3),t.nI1(4,"mytranslate"),t.k0s()(),t.j41(5,"div",40),t.nrm(6,"azt-dynamic-hook",37),t.k0s()()),2&e){const n=t.XpG(2);t.Y8G("ngClass",t.eq3(5,jt,n.isMobileDevice)),t.R7$(3),t.JRh(t.bMT(4,3,"lang_auto_huong_dan_giai_upper")),t.R7$(3),t.Y8G("content",n.questionObj.help)}}function Yn(e,s){if(1&e){const n=t.RV6();t.j41(0,"div",38)(1,"div",41)(2,"span"),t.EFF(3),t.nI1(4,"mytranslate"),t.k0s()(),t.j41(5,"div",40)(6,"azt-question-knowledge-unit-for-question-library-to-update",42),t.bIt("selectKnowledgeEmit",function(o){t.eBV(n);const a=t.XpG(2);return t.Njj(a.selectKnowledgeEmit.emit(o))}),t.k0s()()()}if(2&e){let n;const i=t.XpG(2);t.Y8G("ngClass",t.eq3(8,jt,i.isMobileDevice)),t.R7$(3),t.JRh(t.bMT(4,6,"lang_auto_don_vi_kien_thuc")),t.R7$(3),t.Y8G("bankObj",i.ebankDataObj)("bankKnowledgeObjs",i.bankKnowledgeObjs)("questionId",i.questionObj.id)("objectiveId",null!==(n=i.questionObj.objectiveId)&&void 0!==n?n:0)}}function Vn(e,s){if(1&e&&(t.j41(0,"div",5)(1,"div",6),t.nrm(2,"azt-question-group-content-box",7),t.j41(3,"div",8),t.DNE(4,Rn,1,2,"azt-test-audio-ui",9),t.j41(5,"div",10),t.DNE(6,Fn,4,6,"div",11)(7,Ln,2,0,"div",12),t.j41(8,"div",13)(9,"mat-select",14)(10,"mat-option",15),t.EFF(11),t.nI1(12,"mytranslate"),t.k0s(),t.j41(13,"mat-option",15),t.EFF(14),t.nI1(15,"mytranslate"),t.k0s(),t.j41(16,"mat-option",15),t.EFF(17),t.nI1(18,"mytranslate"),t.k0s(),t.j41(19,"mat-option",15),t.EFF(20),t.nI1(21,"mytranslate"),t.k0s()()(),t.DNE(22,qn,2,0,"div",12)(23,zn,3,3,"div",16),t.j41(24,"div",17),t.EFF(25,"|"),t.k0s(),t.nrm(26,"azt-question-tag-in-question-library-with-edit-mode",18),t.j41(27,"div",17),t.EFF(28,"|"),t.k0s(),t.j41(29,"div",19)(30,"span",20),t.EFF(31),t.nI1(32,"mytranslate"),t.k0s(),t.j41(33,"span",21),t.EFF(34),t.k0s()()(),t.nrm(35,"azt-question-content-box",7),t.DNE(36,$n,4,5,"ng-container",22),t.nI1(37,"isOfflineExam"),t.nrm(38,"azt-question-answer-view-with-simple-result-box-for-teacher",23),t.DNE(39,Nn,7,7,"div",24)(40,Yn,7,10,"div",24),t.k0s()()()),2&e){const n=t.XpG();t.R7$(),t.xc7("font-size","1em")("line-height","1.7")("overflow","auto"),t.Y8G("id","question_render_container_"+n.questionObj.id)("ngClass",t.eq3(49,Mn,n.questionObj.attachments.length>0)),t.R7$(),t.Y8G("examObj",n.examObj)("questionObj",n.questionObj)("renderConfigObj",n.renderConfigObj),t.R7$(2),t.Y8G("ngIf",n.questionObj.attachments.length>0),t.R7$(2),t.Y8G("ngIf",!n.hideQuestionLabel),t.R7$(),t.Y8G("ngIf",!n.hideQuestionLabel),t.R7$(2),t.Y8G("ngModel",n.questionObj.answerType)("disabled",!0),t.R7$(),t.Y8G("value",3),t.R7$(),t.SpI(" ",t.bMT(12,37,"lang_testbank_create_exam_width_file_docx_essay")," "),t.R7$(2),t.Y8G("value",1),t.R7$(),t.SpI(" ",t.bMT(15,39,"lang_auto_trac_nghiem")," "),t.R7$(2),t.Y8G("value",4),t.R7$(),t.SpI(" ",t.bMT(18,41,"lang_auto_dien_tu")," "),t.R7$(2),t.Y8G("value",5),t.R7$(),t.SpI("",t.bMT(21,43,"lang_auto_trac_nghiem")," \u0110/S"),t.R7$(2),t.Y8G("ngIf",n.questionObj.isFixAns),t.R7$(),t.Y8G("ngIf",n.questionObj.isFixAns),t.R7$(3),t.Y8G("questionObj",n.questionObj)("currentQuestionTags",n.questionObj.tags),t.R7$(5),t.SpI("",t.bMT(32,45,"lang_question_library_id_question"),":\xa0"),t.R7$(3),t.JRh(n.questionObj.id),t.R7$(),t.Y8G("examObj",n.examObj)("questionObj",n.questionObj)("renderConfigObj",n.renderConfigObj),t.R7$(),t.Y8G("ngIf",!t.bMT(37,47,n.examObj)),t.R7$(2),t.Y8G("questionObj",n.questionObj),t.R7$(),t.Y8G("ngIf",n.questionObj.help),t.R7$(),t.Y8G("ngIf",n.bankKnowledgeObjs&&n.bankKnowledgeObjs.length&&n.ebankDataObj)}}let rt=(()=>{var e;class s extends H.I{ngOnInit(){super.ngOnInit();const i=this.commonService.castJsonToObj(this.examObj.expandInfo??"")??void 0;this.customQuestionLabel=i?.label??"C\xe2u";let o=new Z.C(this.disableLazy,this.disableRender,this.isExport);super.initData(o,this.follower,this.questionObj)}constructor(){super(),this.follower=new q.e,this.bankKnowledgeObjs=[],this.curQuestionIndex=0,this.isShowExplain=!1,this.isExport=!1,this.disableLazy=!1,this.disableRender=!1,this.hideQuestionLabel=!1,this.selectKnowledgeEmit=new t.bkB,this.customQuestionLabel=""}}return(e=s).\u0275fac=function(i){return new(i||e)},e.\u0275cmp=t.VBU({type:e,selectors:[["azt-question-standalone-for-question-library-in-view-mode"]],inputs:{examObj:"examObj",questionObj:"questionObj",follower:"follower",ebankDataObj:"ebankDataObj",bankKnowledgeObjs:"bankKnowledgeObjs",curQuestionIndex:"curQuestionIndex",isShowExplain:"isShowExplain",isExport:"isExport",disableLazy:"disableLazy",disableRender:"disableRender",hideQuestionLabel:"hideQuestionLabel"},outputs:{selectKnowledgeEmit:"selectKnowledgeEmit"},features:[t.Vt3],decls:4,vars:3,consts:[["elementRended",""],["doneLoad",""],["load_effect_lazy","",3,"id"],["class","question-standalone-loader-box",3,"ngClass",4,"ngIf","ngIfElse"],[1,"question-standalone-loader-box",3,"ngClass"],[1,"question-standalone-content-box"],[1,"question-standalone-container","box","border-none",3,"id","ngClass"],[3,"examObj","questionObj","renderConfigObj"],[1,"question-standalone-main-content"],[3,"questionObj","isShowList",4,"ngIf"],[1,"flex","items-center","mb-2"],["class","box-service-question-name",4,"ngIf"],["class","edit-question-header-dr",4,"ngIf"],[1,"first-text"],[3,"ngModel","disabled"],[3,"value"],["class","fix-answer",3,"matTooltip",4,"ngIf"],[1,"edit-question-header-dr"],[3,"questionObj","currentQuestionTags"],[1,"first-text","border-none"],[2,"color","rgba(0, 0, 0, 0.3803921569)"],[1,"font-bold"],[4,"ngIf"],[3,"questionObj"],["class","box-help mt-2",3,"ngClass",4,"ngIf"],[3,"questionObj","isShowList"],[1,"box-service-question-name"],[1,"fix-answer",3,"matTooltip"],["name","pin","size","16"],["class","row answers",3,"answerSizeManager",4,"ngIf"],[1,"row","answers",3,"answerSizeManager"],["class","col-sm-12 text-center",4,"ngIf","ngIfElse"],[1,"col-sm-12","text-center"],[1,"w-6","h-6","inline-block","mx-auto"],["class","answer col-sm-12 col-md-6",4,"ngFor","ngForOf"],[1,"answer","col-sm-12","col-md-6"],[1,"answer-label"],[3,"content"],[1,"box-help","mt-2",3,"ngClass"],[1,"help-title"],[1,"tex2jax_process","help-content","text-slate-500"],[1,"help-title","uppercase"],[3,"selectKnowledgeEmit","bankObj","bankKnowledgeObjs","questionId","objectiveId"]],template:function(i,o){if(1&i&&(t.j41(0,"div",2),t.DNE(1,Sn,1,3,"div",3)(2,Vn,41,51,"ng-template",null,0,t.C5r),t.k0s()),2&i){const a=t.sdS(3);t.Y8G("id","question_render_element_"+o.questionObj.id),t.R7$(),t.Y8G("ngIf",!o.renderConfigObj.isRenderElement)("ngIfElse",a)}},dependencies:[d.YU,d.Sq,d.bT,tt.wT,et.VO,A.oV,u.BC,u.vS,h.WGl,nt.N,it.c,ot.C,E.R,yt.y,It.$,at.l,K.x,Ct,Ot,x.wp,x.st,x.V6,x.FC],styles:['.pr-7[_ngcontent-%COMP%]{padding-right:28px}.w-38px[_ngcontent-%COMP%]{width:38px}.remove-grid[_ngcontent-%COMP%]{display:block!important}.question-standalone-loader-box[_ngcontent-%COMP%]{min-height:50px}  .skeleton-box-loading{width:100%;height:30px;max-width:100%;margin-bottom:5px;display:inline-block}  .skeleton-box-loading:after{position:absolute;top:0;right:0;bottom:0;left:0;transform:translate(-100%);animation:_ngcontent-%COMP%_shimmer 2s infinite;content:""}.question-standalone-box[_ngcontent-%COMP%]{margin-bottom:30px;display:block;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);border-radius:.375rem}.question-standalone-container[_ngcontent-%COMP%]{padding:15px}.question-standalone-for-test-finder[_ngcontent-%COMP%]{border:none;margin-bottom:0;padding:0}.question-standalone-for-test-finder[_ngcontent-%COMP%]   .question-standalone-main-content[_ngcontent-%COMP%]{padding:15px;border:1px solid rgb(228,228,228)}.group-of-question-standalone-for-test-finder[_ngcontent-%COMP%]{padding:15px!important;border:1px solid rgb(228,228,228)!important}.question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid #2262ae!important;outline:3px solid rgba(125,160,201,.65)!important}.group-of-question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid green!important;outline:3px solid rgba(0,193,0,.321)!important}.question-standalone-label[_ngcontent-%COMP%]{font-weight:700}.question-standalone-content-box[_ngcontent-%COMP%]{position:relative}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]{color:#f44336;position:relative;padding-left:20px;display:flex;align-items:center}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]:before{content:"!";position:absolute;left:0;color:#fff;background:#f44336;width:15px;height:15px;text-align:center;border-radius:50%;font-size:smaller;display:flex;justify-content:center;align-items:center}.question-standalone-step-container-box[_ngcontent-%COMP%]{margin-bottom:50px}.group-content-of-question-standalone[_ngcontent-%COMP%]{margin-bottom:10px;font-weight:700}.answer[_ngcontent-%COMP%]{display:flex;align-items:center}.answer-label[_ngcontent-%COMP%]{width:20px;height:30px;min-width:20px;min-height:30px;display:flex;align-items:center;justify-content:flex-start;border-radius:50%;border-width:2px;border-style:solid;border-color:transparent}.answer-box[_ngcontent-%COMP%]{border-radius:0 0 3px 3px;padding:8px 20px;justify-content:space-between;align-items:center}.selected-answer[_ngcontent-%COMP%]{background-color:#f39c12;color:#fff}.answer-content-front[_ngcontent-%COMP%]{display:flex!important;flex-wrap:wrap;width:calc(100% - 30px)}.explainTxt[_ngcontent-%COMP%]{width:125px;font-weight:500;display:flex;align-items:center}#examHeader[_ngcontent-%COMP%]{display:block;border:1px solid #e7e7e7;border-radius:3px;overflow:hidden}.arrow_btn[_ngcontent-%COMP%]{font-size:20px;vertical-align:middle;width:20px;height:20px;color:#fff;margin-left:auto!important;margin-right:auto!important;-webkit-user-select:none;user-select:none}.bottom_action[_ngcontent-%COMP%]{position:fixed;padding:15px;bottom:0;left:0;background:#312e2e;color:#fff;width:100%}.bottom_action[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]{display:block}.btn-ans-result[_ngcontent-%COMP%]{color:#fff;background-color:#f39c12}.show-list[_ngcontent-%COMP%]{max-width:200px}.show-list[_ngcontent-%COMP%]   .show-sheet[_ngcontent-%COMP%]   .listli[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:27px;height:27px;border-radius:50%;border:1px solid #347da5;display:flex;align-items:center;color:#fff;justify-content:center;font-size:12px;cursor:pointer;-webkit-user-select:none;user-select:none}.top_action[_ngcontent-%COMP%]{position:fixed;padding:10px;top:0;left:0;background:#312e2e;color:#fff;width:100%}.scrollSheetMobile[_ngcontent-%COMP%]{max-height:200px;overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.scrollSheetMobile[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.notify-badge[_ngcontent-%COMP%]{position:absolute;right:3px;top:3px;text-align:center;color:#afafaf;padding:0;font-size:20px;cursor:pointer}.attach-container[_ngcontent-%COMP%]{background:#fff;padding:10px 0 0;border-radius:5px;width:83.33%;border:1px solid #e8e8e8}.answer-review[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:50%;border:1px solid rgb(52,125,165);display:flex;align-items:center;color:#fff;justify-content:center;font-size:15px;-webkit-user-select:none;user-select:none}.border-none[_ngcontent-%COMP%]{border:none!important}.bg-question[_ngcontent-%COMP%]{margin-top:15px;padding:15px 10px;background:#fff}.question-pending-part[_ngcontent-%COMP%]{width:100%;height:50px}.pencil-edit[_ngcontent-%COMP%]{position:absolute;top:-5px;right:-5px;width:30px;height:30px;border-radius:50%;text-align:center;background:#a9a9a9;z-index:9999}.pencil-edit[_ngcontent-%COMP%]   .lucide[_ngcontent-%COMP%]{color:#fff;stroke-width:2.5px;height:29px}.margin-question-bar[_ngcontent-%COMP%]{margin-top:calc(3rem + 40px)!important}.sheet-screen[_ngcontent-%COMP%]{max-height:calc(100vh - 140px);overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.sheet-screen[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.box-help[_ngcontent-%COMP%]{border-top:1px solid #d7d7d7;padding:10px 30px 0 0}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]{text-align:center;font-size:11px;margin-top:-20px}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#fff;padding:0 10px;color:#d58e0b}.box-help[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]{font-size:13px;overflow-x:auto;overflow-y:hidden}  .layout{display:grid;margin:20px 0;grid-row-gap:20px}  .layout-4{grid-template-columns:1fr 1fr 1fr 1fr}  .layout-2{grid-template-columns:1fr 1fr}  .layout-1{grid-template-columns:1fr}  .question-standalone-content-box{max-width:100%;overflow-x:auto;overflow-y:hidden}  #boxContentQuestion .question-standalone-container{max-width:800px}@keyframes _ngcontent-%COMP%_shimmer{to{transform:translate(100%)}}@media (max-width: 768px){.answer-content-front[_ngcontent-%COMP%]{justify-content:center}.btn-ans-result[_ngcontent-%COMP%]{margin-right:auto!important}}@media (max-width: 800px){  #boxContentQuestion .question-standalone-container{max-width:calc(90vw - 16px)!important}}',".box-service-question-name[_ngcontent-%COMP%]{outline:1px solid #ccc;padding:3px 10px!important;border-radius:3px;font-weight:500;width:-moz-fit-content;width:fit-content}.edit-question-header-dr[_ngcontent-%COMP%]{color:#607d8b;margin:0 10px}.first-text[_ngcontent-%COMP%]{display:flex;align-items:center;padding:0!important}.first-text[_ngcontent-%COMP%]   marquee[_ngcontent-%COMP%]{width:100px}.first-text[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;margin:0;padding:0;width:100%;display:flex;justify-content:center;align-items:center}@media screen and (max-width: 500px){.edit-question-header-dr[_ngcontent-%COMP%]{margin:0 9px}}"]}),s})();const Bn=()=>({}),Xn=e=>({id:0,name:"",countQuestion:0,showFrontend:0,allowStudentView:!1,editable:!1,permissionObj:e});function Kn(e,s){1&e&&(t.j41(0,"span",11),t.nrm(1,"azt-loading-ui"),t.k0s())}let lt=(()=>{var e;class s extends J._{confirmDelete(){this.initStatusObj(),this.waitDestroy(this.eBanksQuestionService.apiEbanksQuestionsDeletePost({questionIds:[this.data.questionObj.id],ebankId:this.data.ebankId}).subscribe(i=>{if(!i.success)return this.errorStatusObj(i.message,!0);this.successStatusObj("lang_cms_delete_success",!0),this.dialogRef.close(!0)}))}btnCloseDialog(){this.dialogRef.close(!1)}constructor(i,o,a){super(a,o),this.eBanksQuestionService=i,this.dialogRef=o,this.data=a,this.followerRenderQuest=new q.e}}return(e=s).\u0275fac=function(i){return new(i||e)(t.rXU(Q.N8),t.rXU(c.CP,8),t.rXU(c.Vh,8))},e.\u0275cmp=t.VBU({type:e,selectors:[["app-remove-question-library-dialog"]],features:[t.Vt3],decls:17,vars:18,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-3","border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"intro-y","overflow-auto",2,"max-height","calc(100vh - 150px)"],[1,"text-md","mr-auto","font-bold"],[1,"border-t","border-slate-200/60","dark:border-darkmode-400","py-2","mt-2"],[3,"examObj","questionObj","follower","curQuestionIndex"],[1,"p-3","flex","justify-end"],[1,"btn","w-24","btn-secondary","mr-3",3,"click"],[1,"btn","btn-danger","mw-24",3,"click","disabled"],["class","w-3 mr-2",4,"ngIf"],[1,"w-3","mr-2"]],template:function(i,o){1&i&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),t.EFF(5),t.nI1(6,"mytranslate"),t.k0s(),t.j41(7,"div",5),t.nrm(8,"azt-question-standalone-for-question-library-in-view-mode",6),t.k0s()()()(),t.j41(9,"div",7)(10,"button",8),t.bIt("click",function(){return o.btnCloseDialog()}),t.EFF(11),t.nI1(12,"mytranslate"),t.k0s(),t.j41(13,"button",9),t.bIt("click",function(){return o.confirmDelete()}),t.DNE(14,Kn,2,0,"span",10),t.EFF(15),t.nI1(16,"mytranslate"),t.k0s()()()),2&i&&(t.R7$(5),t.SpI(" ",t.bMT(6,9,"lang_remove_question_from_library")," "),t.R7$(3),t.Y8G("examObj",t.eq3(16,Xn,t.lJ4(15,Bn)))("questionObj",o.data.questionObj)("follower",o.followerRenderQuest)("curQuestionIndex",o.data.index),t.R7$(3),t.SpI(" ",t.bMT(12,11,"lang_auto_dong")," "),t.R7$(2),t.Y8G("disabled",o.statusObj.loading),t.R7$(),t.Y8G("ngIf",o.statusObj.loading),t.R7$(),t.SpI(" ",t.bMT(16,13,"lang_auto_xoa")," "))},dependencies:[d.bT,E.R,rt,x.wp],styles:[".answer-content[_ngcontent-%COMP%]{display:flex!important;flex-wrap:wrap}.answer-box[_ngcontent-%COMP%]{border-radius:0 0 3px 3px;padding:8px 20px;justify-content:space-between;align-items:center}.answer[_ngcontent-%COMP%]{display:flex;align-items:center}.group-content-of-question-standalone[_ngcontent-%COMP%]{margin-bottom:10px;font-weight:700}.question-standalone-label[_ngcontent-%COMP%]{font-weight:700}.answer-label[_ngcontent-%COMP%]{min-width:20px;min-height:30px;display:flex;align-items:center;justify-content:flex-start;border-radius:50%;border-width:2px;border-style:solid;border-color:transparent}"]}),s})();var U=l(17818),Un=l(31613);function Jn(e,s){if(1&e&&(t.j41(0,"button",11)(1,"span",12),t.EFF(2),t.nI1(3,"mytranslate"),t.nI1(4,"number"),t.k0s(),t.nrm(5,"lucide-icon",13),t.k0s()),2&e){let n;const i=t.XpG(),o=t.sdS(5);t.Y8G("matMenuTriggerFor",o),t.R7$(2),t.JRh(t.bMT(3,2,"lang_auto_ty_le_trung")+": "+t.i5U(4,4,100*(null!==(n=null==i.question.similarQuestionInfo?null:i.question.similarQuestionInfo.similarRate)&&void 0!==n?n:0),"1.2-2")+"%")}}function Wn(e,s){if(1&e&&(t.j41(0,"button",14)(1,"span",12),t.EFF(2),t.nI1(3,"mytranslate"),t.nI1(4,"number"),t.k0s()()),2&e){let n;const i=t.XpG();t.R7$(2),t.JRh(t.bMT(3,1,"lang_auto_ty_le_trung")+": "+t.i5U(4,3,100*(null!==(n=null==i.question.similarQuestionInfo?null:i.question.similarQuestionInfo.similarRate)&&void 0!==n?n:0),"1.2-2")+"%")}}function Hn(e,s){1&e&&t.nrm(0,"azt-loading-ui",15)}let Zn=(()=>{var e;class s extends j.H{constructor(){super(...arguments),this.deleteSimilarQuestionEmit=new t.bkB,this.sAztDialogService=(0,t.WQX)(L.i)}deleteQuestionObj(){this.sAztDialogService.open(lt,{width:"750px",data:{questionObj:this.question,ebankId:this.bankObj.id??0,index:1},restoreFocus:!1,autoFocus:!1}).afterClosed().subscribe(a=>{a&&(this.successStatusObj("lang_cms_delete_success",!0),this.deleteSimilarQuestionEmit.emit())})}}return(e=s).\u0275fac=(()=>{let n;return function(o){return(n||(n=t.xGo(e)))(o||e)}})(),e.\u0275cmp=t.VBU({type:e,selectors:[["azt-similar-question-box-in-activity-mode"]],inputs:{bankObj:"bankObj",question:"question"},outputs:{deleteSimilarQuestionEmit:"deleteSimilarQuestionEmit"},features:[t.Vt3],decls:14,vars:8,consts:[["noDuplicate",""],["duplicateQuestionsMenu","matMenu"],[1,"ml-auto",2,"padding","0"],["class","btn btn-sm btn-danger",3,"matMenuTriggerFor",4,"ngIf","ngIfElse"],["xPosition","before"],[1,"p-3","box",2,"max-width","800px","background","rgb(0 0 0 / 6%)",3,"click"],[1,"box",2,"max-height","350px","overflow","scroll"],[3,"bankObj","question"],[1,"mt-3","text-right"],[1,"btn","btn-sm","btn-danger","mr-3",3,"click"],["class","mr-1",4,"ngIf"],[1,"btn","btn-sm","btn-danger",3,"matMenuTriggerFor"],[1,"ml-3"],["name","chevron-down","size","18"],[1,"btn","btn-sm","btn-success","text-white"],[1,"mr-1"]],template:function(i,o){if(1&i){const a=t.RV6();t.j41(0,"div",2),t.DNE(1,Jn,6,7,"button",3)(2,Wn,5,6,"ng-template",null,0,t.C5r),t.j41(4,"mat-menu",4,1)(6,"div",5),t.bIt("click",function(f){return t.eBV(a),f.preventDefault(),t.Njj(f.stopPropagation())}),t.j41(7,"div",6),t.nrm(8,"azt-list-similar-questions",7),t.k0s(),t.j41(9,"div",8)(10,"button",9),t.bIt("click",function(){return t.eBV(a),t.Njj(o.deleteQuestionObj())}),t.DNE(11,Hn,1,0,"azt-loading-ui",10),t.EFF(12),t.nI1(13,"mytranslate"),t.k0s()()()()()}if(2&i){const a=t.sdS(3);t.R7$(),t.Y8G("ngIf",null==o.question.similarQuestionInfo||null==o.question.similarQuestionInfo.duplicateMetadata||null==o.question.similarQuestionInfo.duplicateMetadata.similarityQuestions?null:o.question.similarQuestionInfo.duplicateMetadata.similarityQuestions.length)("ngIfElse",a),t.R7$(7),t.Y8G("bankObj",o.bankObj)("question",o.question),t.R7$(3),t.Y8G("ngIf",o.statusObj.loading),t.R7$(),t.SpI(" ",t.bMT(13,6,"lang_auto_xoa_cau_hoi")," ")}},dependencies:[d.bT,U.kk,U.Cp,h.WGl,E.R,Un.e,d.QX,x.wp],encapsulation:2}),s})();const ti=e=>({"skeleton-box-loading":e}),ei=e=>({"pb-2":e}),kt=e=>({"padding-mobile":e});function ni(e,s){if(1&e&&t.nrm(0,"div",4),2&e){const n=t.XpG();t.Y8G("ngClass",t.eq3(1,ti,n.renderConfigObj.isFirstRender))}}function ii(e,s){if(1&e&&t.nrm(0,"azt-test-audio-ui",27),2&e){const n=t.XpG(2);t.Y8G("questionObj",n.questionObj)("isShowList",!0)}}function oi(e,s){if(1&e&&(t.j41(0,"div",28),t.EFF(1),t.nI1(2,"isOfflineExam"),t.nI1(3,"mytranslate"),t.k0s()),2&e){let n;const i=t.XpG(2);t.R7$(),t.Lme(" ",i.customQuestionLabel+" "+((null!=i.questionObj.labelIndex?i.questionObj.labelIndex:i.curQuestionIndex)+(null!==(n=i.examObj.startQuestionIndex)&&void 0!==n?n:1))," ",t.bMT(2,2,i.examObj)?" ("+t.bMT(3,4,"lang_auto_hoi_de_thi_offline")+") ":null," ")}}function ai(e,s){1&e&&(t.j41(0,"div",17),t.EFF(1,"|"),t.k0s())}function si(e,s){1&e&&(t.j41(0,"div",17),t.EFF(1,"|"),t.k0s())}function ri(e,s){1&e&&(t.j41(0,"div",29),t.nI1(1,"mytranslate"),t.nrm(2,"lucide-icon",30),t.k0s()),2&e&&t.FS9("matTooltip",t.bMT(1,1,"lang_auto_dap_an_cua_cau_hoi_nay_da_duoc_co_dinh"))}function li(e,s){if(1&e){const n=t.RV6();t.j41(0,"azt-similar-question-box-in-activity-mode",31),t.bIt("deleteSimilarQuestionEmit",function(){t.eBV(n);const o=t.XpG(2);return t.Njj(o.deleteSimilarQuestionEmit.emit())}),t.k0s()}if(2&e){const n=t.XpG(2);t.Y8G("bankObj",n.ebankDataObj)("question",n.questionObj)}}function ci(e,s){1&e&&(t.j41(0,"div",35)(1,"span",36),t.nrm(2,"azt-loading-ui"),t.k0s()())}function di(e,s){if(1&e&&(t.j41(0,"div",38)(1,"b",39),t.EFF(2),t.nI1(3,"isTrueFalseAnswer"),t.k0s(),t.nrm(4,"azt-dynamic-hook",40),t.k0s()),2&e){let n;const i=s.$implicit,o=t.XpG(5);t.R7$(2),t.JRh(t.bMT(3,2,o.questionObj)?(null!==(n=i.alpha)&&void 0!==n?n:i.key).toLowerCase()+")":(null!==(n=i.alpha)&&void 0!==n?n:i.key)+"."),t.R7$(2),t.Y8G("content",i.content)}}function ui(e,s){if(1&e&&t.DNE(0,di,5,4,"div",37),2&e){const n=t.XpG(4);t.Y8G("ngForOf",n.questionObj.answers)}}function mi(e,s){if(1&e&&(t.j41(0,"div",33),t.DNE(1,ci,3,0,"div",34)(2,ui,1,1,"ng-template",null,1,t.C5r),t.k0s()),2&e){const n=t.sdS(3),i=t.XpG(3);t.Y8G("answerSizeManager",0),t.R7$(),t.Y8G("ngIf",i.questionObj.isLoading)("ngIfElse",n)}}function _i(e,s){if(1&e&&(t.qex(0),t.DNE(1,mi,4,3,"div",32),t.nI1(2,"isOneChoiceAnswer"),t.nI1(3,"isTrueFalseAnswer"),t.bVm()),2&e){const n=t.XpG(2);t.R7$(),t.Y8G("ngIf",(t.bMT(2,1,n.questionObj)||t.bMT(3,3,n.questionObj))&&n.questionObj.answers&&n.questionObj.answers.length>0)}}function pi(e,s){if(1&e&&(t.j41(0,"div",41)(1,"div",42)(2,"span"),t.EFF(3),t.nI1(4,"mytranslate"),t.k0s()(),t.j41(5,"div",43),t.nrm(6,"azt-dynamic-hook",40),t.k0s()()),2&e){const n=t.XpG(2);t.Y8G("ngClass",t.eq3(5,kt,n.isMobileDevice)),t.R7$(3),t.JRh(t.bMT(4,3,"lang_auto_huong_dan_giai_upper")),t.R7$(3),t.Y8G("content",n.questionObj.help)}}function gi(e,s){if(1&e){const n=t.RV6();t.j41(0,"div",41)(1,"div",44)(2,"span"),t.EFF(3),t.nI1(4,"mytranslate"),t.k0s()(),t.j41(5,"div",43)(6,"azt-question-knowledge-unit-for-question-library-to-update",45),t.bIt("selectKnowledgeEmit",function(o){t.eBV(n);const a=t.XpG(2);return t.Njj(a.selectKnowledgeEmit.emit(o))}),t.k0s()()()}if(2&e){let n;const i=t.XpG(2);t.Y8G("ngClass",t.eq3(8,kt,i.isMobileDevice)),t.R7$(3),t.JRh(t.bMT(4,6,"lang_auto_don_vi_kien_thuc")),t.R7$(3),t.Y8G("bankObj",i.ebankDataObj)("bankKnowledgeObjs",i.bankKnowledgeObjs)("questionId",i.questionObj.id)("objectiveId",null!==(n=i.questionObj.objectiveId)&&void 0!==n?n:0)}}function bi(e,s){if(1&e&&(t.j41(0,"div",5)(1,"div",6),t.nrm(2,"azt-question-group-content-box",7),t.j41(3,"div",8),t.DNE(4,ii,1,2,"azt-test-audio-ui",9),t.j41(5,"div",10),t.DNE(6,oi,4,6,"div",11)(7,ai,2,0,"div",12),t.j41(8,"div",13)(9,"mat-select",14)(10,"mat-option",15),t.EFF(11),t.nI1(12,"mytranslate"),t.k0s(),t.j41(13,"mat-option",15),t.EFF(14),t.nI1(15,"mytranslate"),t.k0s(),t.j41(16,"mat-option",15),t.EFF(17),t.nI1(18,"mytranslate"),t.k0s(),t.j41(19,"mat-option",15),t.EFF(20),t.nI1(21,"mytranslate"),t.k0s()()(),t.DNE(22,si,2,0,"div",12)(23,ri,3,3,"div",16),t.j41(24,"div",17),t.EFF(25,"|"),t.k0s(),t.nrm(26,"azt-question-tag-in-question-library-with-edit-mode",18),t.j41(27,"div",17),t.EFF(28,"|"),t.k0s(),t.j41(29,"div",19)(30,"span",20),t.EFF(31),t.nI1(32,"mytranslate"),t.k0s(),t.j41(33,"span",21),t.EFF(34),t.k0s()(),t.j41(35,"div",22),t.DNE(36,li,1,2,"azt-similar-question-box-in-activity-mode",23),t.k0s()(),t.nrm(37,"azt-question-content-box",7),t.DNE(38,_i,4,5,"ng-container",24),t.nI1(39,"isOfflineExam"),t.nrm(40,"azt-question-answer-view-with-simple-result-box-for-teacher",25),t.DNE(41,pi,7,7,"div",26)(42,gi,7,10,"div",26),t.k0s()()()),2&e){const n=t.XpG();t.R7$(),t.xc7("font-size","1em")("line-height","1.7")("overflow","auto"),t.Y8G("id","question_render_container_"+n.questionObj.id)("ngClass",t.eq3(50,ei,n.questionObj.attachments.length>0)),t.R7$(),t.Y8G("examObj",n.examObj)("questionObj",n.questionObj)("renderConfigObj",n.renderConfigObj),t.R7$(2),t.Y8G("ngIf",n.questionObj.attachments.length>0),t.R7$(2),t.Y8G("ngIf",!n.hideQuestionLabel),t.R7$(),t.Y8G("ngIf",!n.hideQuestionLabel),t.R7$(2),t.Y8G("ngModel",n.questionObj.answerType)("disabled",!0),t.R7$(),t.Y8G("value",3),t.R7$(),t.SpI(" ",t.bMT(12,38,"lang_testbank_create_exam_width_file_docx_essay")," "),t.R7$(2),t.Y8G("value",1),t.R7$(),t.SpI(" ",t.bMT(15,40,"lang_auto_trac_nghiem")," "),t.R7$(2),t.Y8G("value",4),t.R7$(),t.SpI(" ",t.bMT(18,42,"lang_auto_dien_tu")," "),t.R7$(2),t.Y8G("value",5),t.R7$(),t.SpI("",t.bMT(21,44,"lang_auto_trac_nghiem")," \u0110/S"),t.R7$(2),t.Y8G("ngIf",n.questionObj.isFixAns),t.R7$(),t.Y8G("ngIf",n.questionObj.isFixAns),t.R7$(3),t.Y8G("questionObj",n.questionObj)("currentQuestionTags",n.questionObj.tags),t.R7$(5),t.SpI("",t.bMT(32,46,"lang_question_library_id_question"),":\xa0"),t.R7$(3),t.JRh(n.questionObj.id),t.R7$(2),t.Y8G("ngIf",n.ebankDataObj),t.R7$(),t.Y8G("examObj",n.examObj)("questionObj",n.questionObj)("renderConfigObj",n.renderConfigObj),t.R7$(),t.Y8G("ngIf",!t.bMT(39,48,n.examObj)),t.R7$(2),t.Y8G("questionObj",n.questionObj),t.R7$(),t.Y8G("ngIf",n.questionObj.help),t.R7$(),t.Y8G("ngIf",n.bankKnowledgeObjs&&n.bankKnowledgeObjs.length&&n.ebankDataObj)}}let fi=(()=>{var e;class s extends H.I{ngOnInit(){super.ngOnInit();const i=this.commonService.castJsonToObj(this.examObj.expandInfo??"")??void 0;this.customQuestionLabel=i?.label??"C\xe2u";let o=new Z.C(this.disableLazy,this.disableRender,this.isExport);super.initData(o,this.follower,this.questionObj)}constructor(){super(),this.follower=new q.e,this.bankKnowledgeObjs=[],this.curQuestionIndex=0,this.isShowExplain=!1,this.isExport=!1,this.disableLazy=!1,this.disableRender=!1,this.hideQuestionLabel=!1,this.selectKnowledgeEmit=new t.bkB,this.deleteSimilarQuestionEmit=new t.bkB,this.customQuestionLabel=""}}return(e=s).\u0275fac=function(i){return new(i||e)},e.\u0275cmp=t.VBU({type:e,selectors:[["azt-question-standalone-for-question-library-in-activity-mode"]],inputs:{examObj:"examObj",questionObj:"questionObj",follower:"follower",ebankDataObj:"ebankDataObj",bankKnowledgeObjs:"bankKnowledgeObjs",curQuestionIndex:"curQuestionIndex",isShowExplain:"isShowExplain",isExport:"isExport",disableLazy:"disableLazy",disableRender:"disableRender",hideQuestionLabel:"hideQuestionLabel"},outputs:{selectKnowledgeEmit:"selectKnowledgeEmit",deleteSimilarQuestionEmit:"deleteSimilarQuestionEmit"},features:[t.Vt3],decls:4,vars:3,consts:[["elementRended",""],["doneLoad",""],["load_effect_lazy","",3,"id"],["class","question-standalone-loader-box",3,"ngClass",4,"ngIf","ngIfElse"],[1,"question-standalone-loader-box",3,"ngClass"],[1,"question-standalone-content-box"],[1,"question-standalone-container","box","border-none",3,"id","ngClass"],[3,"examObj","questionObj","renderConfigObj"],[1,"question-standalone-main-content"],[3,"questionObj","isShowList",4,"ngIf"],[1,"flex","items-center","mb-2"],["class","box-service-question-name",4,"ngIf"],["class","edit-question-header-dr",4,"ngIf"],[1,"first-text"],[3,"ngModel","disabled"],[3,"value"],["class","fix-answer",3,"matTooltip",4,"ngIf"],[1,"edit-question-header-dr"],[3,"questionObj","currentQuestionTags"],[1,"first-text","border-none"],[2,"color","rgba(0, 0, 0, 0.3803921569)"],[1,"font-bold"],[1,"ml-auto"],[3,"bankObj","question","deleteSimilarQuestionEmit",4,"ngIf"],[4,"ngIf"],[3,"questionObj"],["class","box-help mt-2",3,"ngClass",4,"ngIf"],[3,"questionObj","isShowList"],[1,"box-service-question-name"],[1,"fix-answer",3,"matTooltip"],["name","pin","size","16"],[3,"deleteSimilarQuestionEmit","bankObj","question"],["class","row answers",3,"answerSizeManager",4,"ngIf"],[1,"row","answers",3,"answerSizeManager"],["class","col-sm-12 text-center",4,"ngIf","ngIfElse"],[1,"col-sm-12","text-center"],[1,"w-6","h-6","inline-block","mx-auto"],["class","answer col-sm-12 col-md-6",4,"ngFor","ngForOf"],[1,"answer","col-sm-12","col-md-6"],[1,"answer-label"],[3,"content"],[1,"box-help","mt-2",3,"ngClass"],[1,"help-title"],[1,"tex2jax_process","help-content","text-slate-500"],[1,"help-title","uppercase"],[3,"selectKnowledgeEmit","bankObj","bankKnowledgeObjs","questionId","objectiveId"]],template:function(i,o){if(1&i&&(t.j41(0,"div",2),t.DNE(1,ni,1,3,"div",3)(2,bi,43,52,"ng-template",null,0,t.C5r),t.k0s()),2&i){const a=t.sdS(3);t.Y8G("id","question_render_element_"+o.questionObj.id),t.R7$(),t.Y8G("ngIf",!o.renderConfigObj.isRenderElement)("ngIfElse",a)}},dependencies:[d.YU,d.Sq,d.bT,tt.wT,et.VO,A.oV,u.BC,u.vS,h.WGl,nt.N,it.c,ot.C,E.R,yt.y,It.$,at.l,Zn,K.x,Ct,Ot,x.wp,x.st,x.V6,x.FC],styles:['.pr-7[_ngcontent-%COMP%]{padding-right:28px}.w-38px[_ngcontent-%COMP%]{width:38px}.remove-grid[_ngcontent-%COMP%]{display:block!important}.question-standalone-loader-box[_ngcontent-%COMP%]{min-height:50px}  .skeleton-box-loading{width:100%;height:30px;max-width:100%;margin-bottom:5px;display:inline-block}  .skeleton-box-loading:after{position:absolute;top:0;right:0;bottom:0;left:0;transform:translate(-100%);animation:_ngcontent-%COMP%_shimmer 2s infinite;content:""}.question-standalone-box[_ngcontent-%COMP%]{margin-bottom:30px;display:block;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);border-radius:.375rem}.question-standalone-container[_ngcontent-%COMP%]{padding:15px}.question-standalone-for-test-finder[_ngcontent-%COMP%]{border:none;margin-bottom:0;padding:0}.question-standalone-for-test-finder[_ngcontent-%COMP%]   .question-standalone-main-content[_ngcontent-%COMP%]{padding:15px;border:1px solid rgb(228,228,228)}.group-of-question-standalone-for-test-finder[_ngcontent-%COMP%]{padding:15px!important;border:1px solid rgb(228,228,228)!important}.question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid #2262ae!important;outline:3px solid rgba(125,160,201,.65)!important}.group-of-question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid green!important;outline:3px solid rgba(0,193,0,.321)!important}.question-standalone-label[_ngcontent-%COMP%]{font-weight:700}.question-standalone-content-box[_ngcontent-%COMP%]{position:relative}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]{color:#f44336;position:relative;padding-left:20px;display:flex;align-items:center}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]:before{content:"!";position:absolute;left:0;color:#fff;background:#f44336;width:15px;height:15px;text-align:center;border-radius:50%;font-size:smaller;display:flex;justify-content:center;align-items:center}.question-standalone-step-container-box[_ngcontent-%COMP%]{margin-bottom:50px}.group-content-of-question-standalone[_ngcontent-%COMP%]{margin-bottom:10px;font-weight:700}.answer[_ngcontent-%COMP%]{display:flex;align-items:center}.answer-label[_ngcontent-%COMP%]{width:20px;height:30px;min-width:20px;min-height:30px;display:flex;align-items:center;justify-content:flex-start;border-radius:50%;border-width:2px;border-style:solid;border-color:transparent}.answer-box[_ngcontent-%COMP%]{border-radius:0 0 3px 3px;padding:8px 20px;justify-content:space-between;align-items:center}.selected-answer[_ngcontent-%COMP%]{background-color:#f39c12;color:#fff}.answer-content-front[_ngcontent-%COMP%]{display:flex!important;flex-wrap:wrap;width:calc(100% - 30px)}.explainTxt[_ngcontent-%COMP%]{width:125px;font-weight:500;display:flex;align-items:center}#examHeader[_ngcontent-%COMP%]{display:block;border:1px solid #e7e7e7;border-radius:3px;overflow:hidden}.arrow_btn[_ngcontent-%COMP%]{font-size:20px;vertical-align:middle;width:20px;height:20px;color:#fff;margin-left:auto!important;margin-right:auto!important;-webkit-user-select:none;user-select:none}.bottom_action[_ngcontent-%COMP%]{position:fixed;padding:15px;bottom:0;left:0;background:#312e2e;color:#fff;width:100%}.bottom_action[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]{display:block}.btn-ans-result[_ngcontent-%COMP%]{color:#fff;background-color:#f39c12}.show-list[_ngcontent-%COMP%]{max-width:200px}.show-list[_ngcontent-%COMP%]   .show-sheet[_ngcontent-%COMP%]   .listli[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:27px;height:27px;border-radius:50%;border:1px solid #347da5;display:flex;align-items:center;color:#fff;justify-content:center;font-size:12px;cursor:pointer;-webkit-user-select:none;user-select:none}.top_action[_ngcontent-%COMP%]{position:fixed;padding:10px;top:0;left:0;background:#312e2e;color:#fff;width:100%}.scrollSheetMobile[_ngcontent-%COMP%]{max-height:200px;overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.scrollSheetMobile[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.notify-badge[_ngcontent-%COMP%]{position:absolute;right:3px;top:3px;text-align:center;color:#afafaf;padding:0;font-size:20px;cursor:pointer}.attach-container[_ngcontent-%COMP%]{background:#fff;padding:10px 0 0;border-radius:5px;width:83.33%;border:1px solid #e8e8e8}.answer-review[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:50%;border:1px solid rgb(52,125,165);display:flex;align-items:center;color:#fff;justify-content:center;font-size:15px;-webkit-user-select:none;user-select:none}.border-none[_ngcontent-%COMP%]{border:none!important}.bg-question[_ngcontent-%COMP%]{margin-top:15px;padding:15px 10px;background:#fff}.question-pending-part[_ngcontent-%COMP%]{width:100%;height:50px}.pencil-edit[_ngcontent-%COMP%]{position:absolute;top:-5px;right:-5px;width:30px;height:30px;border-radius:50%;text-align:center;background:#a9a9a9;z-index:9999}.pencil-edit[_ngcontent-%COMP%]   .lucide[_ngcontent-%COMP%]{color:#fff;stroke-width:2.5px;height:29px}.margin-question-bar[_ngcontent-%COMP%]{margin-top:calc(3rem + 40px)!important}.sheet-screen[_ngcontent-%COMP%]{max-height:calc(100vh - 140px);overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.sheet-screen[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.box-help[_ngcontent-%COMP%]{border-top:1px solid #d7d7d7;padding:10px 30px 0 0}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]{text-align:center;font-size:11px;margin-top:-20px}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#fff;padding:0 10px;color:#d58e0b}.box-help[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]{font-size:13px;overflow-x:auto;overflow-y:hidden}  .layout{display:grid;margin:20px 0;grid-row-gap:20px}  .layout-4{grid-template-columns:1fr 1fr 1fr 1fr}  .layout-2{grid-template-columns:1fr 1fr}  .layout-1{grid-template-columns:1fr}  .question-standalone-content-box{max-width:100%;overflow-x:auto;overflow-y:hidden}  #boxContentQuestion .question-standalone-container{max-width:800px}@keyframes _ngcontent-%COMP%_shimmer{to{transform:translate(100%)}}@media (max-width: 768px){.answer-content-front[_ngcontent-%COMP%]{justify-content:center}.btn-ans-result[_ngcontent-%COMP%]{margin-right:auto!important}}@media (max-width: 800px){  #boxContentQuestion .question-standalone-container{max-width:calc(90vw - 16px)!important}}',".box-service-question-name[_ngcontent-%COMP%]{outline:1px solid #ccc;padding:3px 10px!important;border-radius:3px;font-weight:500;width:-moz-fit-content;width:fit-content}.edit-question-header-dr[_ngcontent-%COMP%]{color:#607d8b;margin:0 10px}.first-text[_ngcontent-%COMP%]{display:flex;align-items:center;padding:0!important}.first-text[_ngcontent-%COMP%]   marquee[_ngcontent-%COMP%]{width:100px}.first-text[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;margin:0;padding:0;width:100%;display:flex;justify-content:center;align-items:center}@media screen and (max-width: 500px){.edit-question-header-dr[_ngcontent-%COMP%]{margin:0 9px}}"]}),s})();const hi=()=>({}),vi=e=>({id:0,name:"",countQuestion:0,showFrontend:0,allowStudentView:!1,editable:!1,permissionObj:e});function xi(e,s){if(1&e&&t.nrm(0,"azt-loading-effect",3),2&e){const n=t.XpG();t.Y8G("currentStatusObj",n.statusObj)}}function yi(e,s){1&e&&(t.j41(0,"div",6),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&e&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"lang_auto_danh_sach_trong")," "))}function Ii(e,s){1&e&&t.nrm(0,"azt-loading-ui",13)}function Ci(e,s){if(1&e){const n=t.RV6();t.j41(0,"div",14)(1,"azt-question-standalone-for-question-library-in-activity-mode",15),t.bIt("selectKnowledgeEmit",function(o){const a=t.eBV(n).$implicit,r=t.XpG(3);return t.Njj(r.selectKnowledgeEmit(o,a))})("deleteSimilarQuestionEmit",function(){const o=t.eBV(n).$implicit,a=t.XpG(3);return t.Njj(a.deleteSimilarQuestion(o))}),t.k0s()()}if(2&e){const n=s.$implicit,i=s.index,o=t.XpG(3);t.R7$(),t.Y8G("examObj",t.eq3(7,vi,t.lJ4(6,hi)))("questionObj",n)("follower",o.followerRenderQuest)("curQuestionIndex",i)("ebankDataObj",o.ebankDataObj)("bankKnowledgeObjs",o.bankKnowledgeObjs)}}function Oi(e,s){if(1&e){const n=t.RV6();t.j41(0,"div",7)(1,"div",8)(2,"div"),t.EFF(3),t.nI1(4,"mytranslate"),t.j41(5,"span",9),t.EFF(6),t.k0s(),t.EFF(7),t.nI1(8,"relativeTime"),t.k0s(),t.j41(9,"button",10),t.bIt("click",function(){t.eBV(n);const o=t.XpG(2);return t.Njj(o.rejectEbanksImport())}),t.DNE(10,Ii,1,0,"azt-loading-ui",11),t.EFF(11),t.nI1(12,"mytranslate"),t.k0s()(),t.DNE(13,Ci,2,9,"div",12),t.k0s()}if(2&e){const n=t.XpG(2);t.R7$(3),t.SpI(" ",t.bMT(4,7,"lang_core_tao_boi")," "),t.R7$(3),t.JRh(null==n.firstQuestionObj.creator?null:n.firstQuestionObj.creator.fullName),t.R7$(),t.SpI(" ",t.bMT(8,9,n.firstQuestionObj.createdAt)," "),t.R7$(2),t.Y8G("disabled",n.isLoadReject),t.R7$(),t.Y8G("ngIf",n.isLoadReject),t.R7$(),t.SpI(" ",t.bMT(12,11,"lang_auto_tu_choi")," "),t.R7$(2),t.Y8G("ngForOf",n.questionObjs)}}function ji(e,s){if(1&e&&t.DNE(0,yi,3,3,"div",4)(1,Oi,14,13,"div",5),2&e){const n=t.XpG();t.Y8G("ngIf",!n.firstQuestionObj),t.R7$(),t.Y8G("ngIf",n.firstQuestionObj)}}let ki=(()=>{var e;class s extends j.H{deleteSimilarQuestion(i){this.questionObjs=this.questionObjs.filter(o=>o.id!=i.id)}selectKnowledgeEmit(i,o){let a=this.questionObjs.find(r=>r.id==o.id);a&&(a.objectiveId=i.suggestId)}rejectEbanksImport(){this.sAztDialogService.open(xn.M,{width:"600px",data:{title:"lang_core_ban_co_chac_chan_tu_choi_them_moi_cau_hoi_khong",msg:""},restoreFocus:!1}).afterClosed().subscribe(a=>{a&&(this.isLoadReject=!0,this.waitDestroy(this.ebankService.apiEbanksImportsTurnImportIdRejectGet(this.turnImportId).subscribe(r=>{if(this.isLoadReject=!1,!r.success)return this.errorStatusObj(r.message,!0);this.commonService.myNavigationBySpecialQueryString(this.backLink),this.showSuccessSnack("lang_auto_tu_choi_thanh_cong")})))})}getQuestion(){this.waitDestroy(this.ebankQuestionService.apiEbanksQuestionsListPost({ebankId:this.bankId,turnImportId:this.turnImportId,page:1,size:-1}).subscribe(o=>{if(!o.success)return this.errorStatusObj(o.message,!0);this.firstQuestionObj=this.commonService.getFirstOfArray(o.data?.list??[]),this.loadQuest(o.data?.list.map(a=>a.questionTest)??[],a=>{a.forEach(r=>{let f=o.data?.list.find(M=>M.questionTest.id==r.id);f&&(r.similarQuestionInfo={similarRate:f.percentDuplicate,duplicateAccept:f.duplicateAccept,duplicateMetadata:f.duplicateMetadata})}),this.followerRenderQuest.setNumQuest(a.length),this.questionObjs=a}),this.successStatusObj()}))}loadQuest(i,o){const a=this.commonService.castJsonToClassObjs(V.I,JSON.stringify(i));this.questionRenderService.parseRenderQuestions(a??[],r=>{},this.configRenderService).then(r=>o(r)).catch(r=>{this.showErrorSnack("lang_auto_de_thi_tai_khong_thanh_cong"),o(a??[])})}ngOnInit(){this.initStatusObj(),super.ngOnInit(),this.turnImportId=Number(this.commonService.getMyParam(this.activeRoute,"turnImportId")),this.bankId=Number(this.commonService.getMyParam(this.activeRoute,"bankId")),this.backLink=`/admin/question-library/view-question-library/${this.bankId}/1`,this.getQuestion(),this.sAztKnowledgeObjectiveForQuestionLibraryService.getKnowledgeByApi(this.bankId,(i,o)=>{this.ebankDataObj=o,this.bankKnowledgeObjs=i},i=>{})}constructor(i,o,a,r){super(),this.ebankService=i,this.ebankQuestionService=o,this.activeRoute=a,this.sAztDialogService=r,this.ebanksImports=[],this.turnImportId=0,this.bankId=0,this.questionObjs=[],this.backLink="",this.isLoadReject=!1,this.followerRenderQuest=new q.e,this.questionRenderService=(0,t.WQX)(B.g),this.configRenderService=new Y.y(!0),this.sAztKnowledgeObjectiveForQuestionLibraryService=(0,t.WQX)(X.z),this.bankKnowledgeObjs=[]}}return(e=s).\u0275fac=function(i){return new(i||e)(t.rXU(st.n),t.rXU(Q.N8),t.rXU(C.nX),t.rXU(L.i))},e.\u0275cmp=t.VBU({type:e,selectors:[["app-question-activity"]],features:[t.Vt3],decls:4,vars:3,consts:[["doneLoading",""],[3,"headerBackToLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],["class","pt-10 flex justify-center",4,"ngIf"],["class","p-3",4,"ngIf"],[1,"pt-10","flex","justify-center"],[1,"p-3"],[1,"flex","items-center","justify-between","mb-2"],[1,"font-medium"],[1,"btn","btn-danger","px-5",3,"click","disabled"],["class","mr-2",4,"ngIf"],["class","mt-3",4,"ngFor","ngForOf"],[1,"mr-2"],[1,"mt-3"],[3,"selectKnowledgeEmit","deleteSimilarQuestionEmit","examObj","questionObj","follower","curQuestionIndex","ebankDataObj","bankKnowledgeObjs"]],template:function(i,o){if(1&i&&(t.j41(0,"teacher-layout",1),t.DNE(1,xi,1,1,"azt-loading-effect",2)(2,ji,2,2,"ng-template",null,0,t.C5r),t.k0s()),2&i){const a=t.sdS(3);t.Y8G("headerBackToLink",o.backLink),t.R7$(),t.Y8G("ngIf",o.statusObj.loading)("ngIfElse",a)}},dependencies:[d.Sq,d.bT,D.K,E.R,fi,z.Q,x.wp,x.NA],encapsulation:2}),s})();const ct=e=>[e],wt=()=>({"mr-2":!0}),wi=()=>({backTo:"/admin/question-library/dashboard"});function Ti(e,s){if(1&e&&t.nrm(0,"azt-loading-effect",4),2&e){const n=t.XpG();t.Y8G("currentStatusObj",n.statusObj)}}function Qi(e,s){if(1&e&&(t.j41(0,"div",22)(1,"div",23)(2,"div",24),t.nI1(3,"navigationLocalize"),t.j41(4,"div",25),t.EFF(5),t.k0s(),t.j41(6,"div",26),t.EFF(7),t.nI1(8,"number"),t.nI1(9,"mytranslate"),t.k0s()()()()),2&e){const n=s.$implicit;t.R7$(2),t.Y8G("routerLink",t.eq3(10,ct,t.bMT(3,4,"/admin/question-library/view-question-library/"+n.id+"/0")))("queryParams",t.lJ4(12,wi)),t.R7$(3),t.JRh(n.name),t.R7$(2),t.JRh(t.bMT(8,6,n.totalQuestion)+" "+t.bMT(9,8,"lang_notice_question"))}}function Ei(e,s){if(1&e){const n=t.RV6();t.qex(0),t.j41(1,"div",6)(2,"div",7)(3,"div",8)(4,"h3",9),t.EFF(5),t.nI1(6,"mytranslate"),t.k0s()(),t.j41(7,"div",10)(8,"button",11),t.nI1(9,"navigationLocalize"),t.nrm(10,"lucide-icon",12),t.EFF(11),t.nI1(12,"mytranslate"),t.k0s()()()(),t.j41(13,"div",13),t.DNE(14,Qi,10,13,"div",14),t.k0s(),t.j41(15,"div",15)(16,"div",16)(17,"div",17)(18,"azt-paging",18),t.bIt("goToPaginationPage",function(o){t.eBV(n);const a=t.XpG(2);return t.Njj(a.goToPage(o))}),t.k0s()(),t.j41(19,"div",19)(20,"p",20),t.EFF(21),t.nI1(22,"mytranslate"),t.k0s()(),t.j41(23,"div",21)(24,"p",20),t.EFF(25),t.nI1(26,"mytranslate"),t.k0s()()()(),t.bVm()}if(2&e){const n=t.XpG(2);t.R7$(5),t.SpI(" ",t.bMT(6,8,"lang_notice_bank_question")," "),t.R7$(3),t.Y8G("routerLink",t.eq3(18,ct,t.bMT(9,10,"/admin/question-library/add-new-question-library"))),t.R7$(2),t.Y8G("ngClass",t.lJ4(20,wt)),t.R7$(),t.SpI(" ",t.bMT(12,12,"lang_azt_create_a_question_bank")," "),t.R7$(3),t.Y8G("ngForOf",n.ebankList),t.R7$(4),t.Y8G("pageObj",n.pageObj),t.R7$(3),t.JRh(n.totalEbank+" "+t.bMT(22,14,"lang_testbank_test_list_document")),t.R7$(4),t.JRh(n.totalEbank+" "+t.bMT(26,16,"lang_testbank_test_list_document"))}}function Mi(e,s){1&e&&(t.j41(0,"div",27)(1,"p",28),t.nrm(2,"azt-svg-icon",29),t.k0s(),t.j41(3,"p",30),t.EFF(4),t.nI1(5,"mytranslate"),t.k0s(),t.j41(6,"p",31)(7,"button",32),t.nI1(8,"navigationLocalize"),t.nrm(9,"lucide-icon",12),t.EFF(10),t.nI1(11,"mytranslate"),t.k0s()()()),2&e&&(t.R7$(2),t.Y8G("size",82),t.R7$(2),t.SpI(" ",t.bMT(5,5,"lang_azt_you_dont_have_any_question_bank_yet")," "),t.R7$(3),t.Y8G("routerLink",t.eq3(11,ct,t.bMT(8,7,"/admin/question-library/add-new-question-library"))),t.R7$(2),t.Y8G("ngClass",t.lJ4(13,wt)),t.R7$(),t.SpI(" ",t.bMT(11,9,"lang_azt_create_a_question_bank")," "))}function Si(e,s){if(1&e&&t.DNE(0,Ei,27,21,"ng-container",5)(1,Mi,12,14,"ng-template",null,1,t.C5r),2&e){const n=t.sdS(2),i=t.XpG();t.Y8G("ngIf",i.ebankList.length)("ngIfElse",n)}}let Ri=(()=>{var e;class s extends j.H{getEbankList(){this.initStatusObj(),this.waitDestroy(this.ebankService.apiEbanksListPost({page:this.pageObj.page,size:this.pageObj.pageSize}).subscribe(o=>{if(!o.success)return this.errorStatusObj(o.message,!0);this.ebankList=o.data?.objs??[],this.totalEbank=o.data?.total??0,this.pageObj.setTotalPages(this.totalEbank),this.stopStatusObj()}))}goToPage(i){this.pageObj.setPageNumber(i)}ngOnInit(){super.ngOnInit(),this.getEbankList()}constructor(i){super(),this.ebankService=i,this.ebankList=[],this.totalEbank=0,this.pageObj=new gt.d(24)}}return(e=s).\u0275fac=function(i){return new(i||e)(t.rXU(st.n))},e.\u0275cmp=t.VBU({type:e,selectors:[["app-question-library-dashboard"]],features:[t.Vt3],decls:4,vars:3,consts:[["doneLoading",""],["emptyQuestionLibrary",""],[3,"headerBackToLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[4,"ngIf","ngIfElse"],[1,"mt-5"],[1,"flex","flex-col-reverse","sm:flex-row","items-center"],[1,"w-full","sm:w-auto","mt-3","sm:mt-0","mr-auto"],[1,"text-xl","font-medium"],[1,"w-full","sm:w-auto","flex"],[1,"btn","btn-primary","shadow-md","ml-2",3,"routerLink"],["name","plus","size","16",3,"ngClass"],[1,"grid","grid-cols-12","mt-5","gap-5"],["class","col-span-12 sm:col-span-6 md:col-span-4 lg:col-span-3",4,"ngFor","ngForOf"],[2,"height","25px"],[1,"flex","items-center","flex-col-reverse","sm:flex-row","mt-3"],[1,"mr-0","sm:mr-auto","mt-2",2,"position","absolute","bottom","10px"],[3,"goToPaginationPage","pageObj"],[1,"text-right","pb-2","azt-hidden","md:block",2,"position","absolute","bottom","10px","right","20px"],[1,"text-md"],[1,"ml-auto","text-right","-mt-2","block","md:hidden"],[1,"col-span-12","sm:col-span-6","md:col-span-4","lg:col-span-3"],[1,"h-full","relative"],[1,"box","p-5","zoom-in","h-full",3,"routerLink","queryParams"],[1,"font-medium"],[1,"mt-3"],[1,"intro-y","empty-trash","flex","flex-col","justify-center","text-center",2,"height","400px"],[1,"text-primary","text-center"],["type","inbox-empty",3,"size"],[1,"text-lg","font-medium","mt-1"],[1,"text-md","text-slate-500","mt-4"],[1,"btn","btn-primary","shadow-md",3,"routerLink"]],template:function(i,o){if(1&i&&(t.j41(0,"teacher-layout",2),t.DNE(1,Ti,1,1,"azt-loading-effect",3)(2,Si,3,2,"ng-template",null,0,t.C5r),t.k0s()),2&i){const a=t.sdS(3);t.Y8G("headerBackToLink","/admin/dashboard"),t.R7$(),t.Y8G("ngIf",o.statusObj.loading)("ngIfElse",a)}},dependencies:[C.Wk,d.YU,d.Sq,d.bT,D.K,ht.q,N.m,z.Q,h.WGl,d.QX,x.F2,x.wp],styles:[".ribbon[_ngcontent-%COMP%]{position:absolute;right:-2px;top:-2px;z-index:1;overflow:hidden;width:45px;height:45px;text-align:right}.ribbon[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:7px;color:#fff;text-transform:uppercase;text-align:center;font-weight:700;line-height:12px;transform:rotate(45deg);-webkit-transform:rotate(45deg);width:55px;display:block;background:linear-gradient(#68cc00,#68cc009c);box-shadow:0 3px 10px -5px #636363;position:absolute;top:6px;right:-14px}"]}),s})();var Tt=l(76627);const Fi=()=>({"mr-2":!0}),Li=e=>({"mb-2":e}),qi=()=>({}),zi=e=>({id:0,name:"",countQuestion:0,showFrontend:0,allowStudentView:!1,editable:!1,permissionObj:e}),Qt=e=>({"mr-2":e});function Ai(e,s){if(1&e&&t.nrm(0,"azt-loading-effect",5),2&e){const n=t.XpG();t.Y8G("currentStatusObj",n.statusObj)}}function Gi(e,s){1&e&&(t.j41(0,"div",11)(1,"h3",12),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s()()),2&e&&(t.R7$(2),t.JRh(t.bMT(3,1,"lang_question_library_no_question_exist")))}function Di(e,s){if(1&e){const n=t.RV6();t.j41(0,"div",19)(1,"div",20)(2,"azt-question-standalone-for-question-library-in-view-mode",21),t.bIt("selectKnowledgeEmit",function(o){const a=t.eBV(n).$implicit,r=t.XpG(4);return t.Njj(r.selectKnowledgeEmit(o,a))}),t.k0s(),t.j41(3,"div",22)(4,"button",23),t.nrm(5,"lucide-icon",24),t.k0s()(),t.j41(6,"mat-menu",25,2)(8,"div",26)(9,"ul",27)(10,"li")(11,"a",28),t.bIt("click",function(){const o=t.eBV(n),a=o.$implicit,r=o.index,f=t.XpG(4);return t.Njj(f.showRemoveQuestionDialog(a,r))}),t.j41(12,"span"),t.nrm(13,"lucide-icon",29),t.j41(14,"span",30),t.EFF(15),t.nI1(16,"mytranslate"),t.k0s()()()(),t.j41(17,"li")(18,"a",31),t.bIt("click",function(){const o=t.eBV(n).$implicit,a=t.XpG(4);return t.Njj(a.editQuestionEvent(o))}),t.j41(19,"span"),t.nrm(20,"lucide-icon",32),t.j41(21,"span",30),t.EFF(22),t.nI1(23,"mytranslate"),t.k0s()()()()()()()()()}if(2&e){const n=s.$implicit,i=s.index,o=s.last,a=t.sdS(7),r=t.XpG(4);t.R7$(),t.Y8G("ngClass",t.eq3(16,Li,!o)),t.R7$(),t.Y8G("examObj",t.eq3(19,zi,t.lJ4(18,qi)))("questionObj",n)("follower",r.followerRenderQuest)("curQuestionIndex",i)("ebankDataObj",r.ebankDataObj)("bankKnowledgeObjs",r.bankKnowledgeObjs),t.R7$(2),t.Y8G("matMenuTriggerFor",a),t.R7$(9),t.Y8G("ngClass",t.eq3(21,Qt,!r.isMobileDevice)),t.R7$(2),t.JRh(t.bMT(16,12,"lang_auto_xoa_cau_hoi")),t.R7$(5),t.Y8G("ngClass",t.eq3(23,Qt,!r.isMobileDevice)),t.R7$(2),t.JRh(t.bMT(23,14,"lang_core_chinh_sua_de_thi"))}}function Pi(e,s){1&e&&t.nrm(0,"azt-loading-ui",33)}function $i(e,s){if(1&e){const n=t.RV6();t.j41(0,"div",13),t.DNE(1,Di,24,25,"div",14),t.k0s(),t.j41(2,"div",15)(3,"button",16),t.bIt("click",function(){t.eBV(n);const o=t.XpG(3);return t.Njj(o.loadMoreQuestion())}),t.DNE(4,Pi,1,0,"azt-loading-ui",17),t.EFF(5),t.nI1(6,"mytranslate"),t.nrm(7,"lucide-icon",18),t.k0s()()}if(2&e){const n=t.XpG(3);t.R7$(),t.Y8G("ngForOf",n.questionObjs),t.R7$(2),t.Y8G("disabled",n.questionObjs.length<n.page*n.sizeApi),t.R7$(),t.Y8G("ngIf",n.isLoadingNextPage),t.R7$(),t.SpI(" ",t.bMT(6,5,"lang_auto_xem_them")," "),t.R7$(2),t.Y8G("ngClass",t.lJ4(7,Fi))}}function Ni(e,s){if(1&e&&(t.j41(0,"div",7)(1,"div")(2,"span",8),t.EFF(3),t.nI1(4,"mytranslate"),t.k0s(),t.j41(5,"span",9),t.EFF(6),t.nI1(7,"mytranslate"),t.k0s()(),t.DNE(8,Gi,4,3,"div",10)(9,$i,8,8,"ng-template",null,1,t.C5r),t.k0s()),2&e){const n=t.sdS(10),i=t.XpG(2);t.R7$(3),t.JRh(t.bMT(4,4,i.ebankFrameObj.name)),t.R7$(3),t.SpI("(",i.questionObjs.length+" "+t.bMT(7,6,"lang_auto_cau_hoi"),")"),t.R7$(2),t.Y8G("ngIf",!i.questionObjs.length)("ngIfElse",n)}}function Yi(e,s){if(1&e&&t.DNE(0,Ni,11,8,"div",6),2&e){const n=t.XpG();t.Y8G("ngIf",n.ebankDataObj&&n.ebankFrameObj)}}let Vi=(()=>{var e;class s extends j.H{showRemoveQuestionDialog(i,o){this.sAztDialogService.open(lt,{width:"750px",data:{questionObj:i,ebankId:this.ebankDataObj?.id??0,index:o},restoreFocus:!1,autoFocus:!1}).afterClosed().subscribe(f=>{f&&(this.questionObjs=this.questionObjs.filter(M=>M.id!=i.id))})}editQuestionEvent(i){let o=`/admin/question-library/view-question-list-node/${this.bankId}/${this.frameId}`+(this.backLink?"?backto="+encodeURIComponent(this.backLink):"");window.location.href=this.commonService.getLocalRouter("/admin/testbank/azota-editor/0")+"/"+i.id+"?backto="+encodeURIComponent(o)+"&r="+(i.rawIndex??0)+"&ebankId="+this.bankId}loadMoreQuestion(){this.page++,this.getDataFrame(!0)}selectKnowledgeEmit(i,o){let a=this.questionObjs.find(r=>r.id==o.id);a&&(a.objectiveId=i.suggestId)}getDataFrame(i){this.isLoadingNextPage=i,i||this.initStatusObj(),this.eBanksQuestionService.apiEbanksQuestionsListPost({ebankId:this.bankId,ebankFrameId:this.frameId,page:this.page,size:this.sizeApi}).subscribe(a=>{if(this.isLoadingNextPage=!1,!a.success||!a.data?.ebank)return this.errorStatusObj(a.message,!0);this.ebankDataObj={...a.data.ebank,totalQuestion:0,actionWaitingRead:0,frames:[],isShare:!1},this.ebankFrameObj=a.data?.ebankFrame,this.loadQuest(a.data.list.map(r=>r.questionTest),r=>{this.followerRenderQuest.setNumQuest(r.length),this.questionObjs.push(...r),this.successStatusObj()}),this.sAztKnowledgeObjectiveForQuestionLibraryService.getKnowledgeByApi(this.ebankDataObj.id,(r,f)=>this.bankKnowledgeObjs=r,r=>{})})}loadQuest(i,o){const a=this.commonService.castJsonToClassObjs(V.I,JSON.stringify(i));this.questionRenderService.parseRenderQuestions(a??[],r=>{},this.configRenderService).then(r=>o(r)).catch(r=>{this.showErrorSnack("lang_auto_de_thi_tai_khong_thanh_cong"),o(a??[])})}ngOnInit(){this.waitDestroy((0,Tt.z)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.frameId=Number(this.commonService.getMyParam(this.activeRoute,"frameId")),this.bankId=Number(this.commonService.getMyParam(this.activeRoute,"bankId")),this.backLink=this.commonService.getMyQueryParam("backto")??"/admin/question-library/view-question-library/"+this.bankId+"/0",this.getDataFrame(!1)}))}constructor(i,o,a){super(),this.activeRoute=i,this.eBanksQuestionService=o,this.sAztDialogService=a,this.sAztKnowledgeObjectiveForQuestionLibraryService=(0,t.WQX)(X.z),this.questionRenderService=(0,t.WQX)(B.g),this.configRenderService=new Y.y(!0),this.backLink="",this.frameId=0,this.bankId=0,this.page=1,this.sizeApi=50,this.isLoadingNextPage=!1,this.questionObjs=[],this.followerRenderQuest=new q.e,this.bankKnowledgeObjs=[]}}return(e=s).\u0275fac=function(i){return new(i||e)(t.rXU(C.nX),t.rXU(Q.N8),t.rXU(L.i))},e.\u0275cmp=t.VBU({type:e,selectors:[["app-view-list-question-node"]],features:[t.Vt3],decls:4,vars:3,consts:[["doneLoading",""],["showList",""],["mainMenu","matMenu"],[3,"headerBackToLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],["class","container mx-auto mt-3","style","max-width: 1000px",4,"ngIf"],[1,"container","mx-auto","mt-3",2,"max-width","1000px"],[1,"font-medium"],[1,"ml-3","text-slate-500","text-xs"],["class","box p-3 mt-3",4,"ngIf","ngIfElse"],[1,"box","p-3","mt-3"],[1,"text-slate-500","text-md",2,"font-weight","420"],[1,"box","rounded-none","mt-3",2,"background-color","transparent"],["class","question-standalone-content-box",4,"ngFor","ngForOf"],[1,"mt-3","mx-auto","w-full","text-center"],[1,"btn","btn-transparent","mx-auto",3,"click","disabled"],["class","mr-1",4,"ngIf"],["name","chevron-down","size","20",3,"ngClass"],[1,"question-standalone-content-box"],[1,"box-service","box","border","border-slate-400","dark:border-darkmode-400","px-3","py-2","relative",3,"ngClass"],[3,"selectKnowledgeEmit","examObj","questionObj","follower","curQuestionIndex","ebankDataObj","bankKnowledgeObjs"],[1,"absolute",2,"left","auto","top","10px","right","10px"],[1,"btn","btn-sm","btn-transparent",3,"matMenuTriggerFor"],["name","ellipsis-vertical"],["xPosition","before"],[1,"dropdown-menu","show","relative","w-72"],[1,"dropdown-content"],[1,"dropdown-item","text-danger",2,"align-items","center",3,"click"],["name","trash","size","16",3,"ngClass"],[2,"vertical-align","middle"],[1,"dropdown-item",2,"align-items","center",3,"click"],["name","file-pen-line","size","16",3,"ngClass"],[1,"mr-1"]],template:function(i,o){if(1&i&&(t.j41(0,"teacher-layout",3),t.DNE(1,Ai,1,1,"azt-loading-effect",4)(2,Yi,1,1,"ng-template",null,0,t.C5r),t.k0s()),2&i){const a=t.sdS(3);t.Y8G("headerBackToLink",o.backLink),t.R7$(),t.Y8G("ngIf",o.statusObj.loading)("ngIfElse",a)}},dependencies:[d.YU,d.Sq,d.bT,U.kk,U.Cp,D.K,E.R,rt,z.Q,h.WGl,x.wp],styles:[".box-service-name[_ngcontent-%COMP%], .box-service-question-name[_ngcontent-%COMP%]{outline:1px solid #ccc;padding:3px 10px!important;border-radius:3px;font-weight:500}.box-service-question-name[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content}.box-service-question[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap}.box-service-question[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child{border-right:none}.box-service-question[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:last-child{border-right:none}.box-help[_ngcontent-%COMP%]{border-top:1px solid #d7d7d7;padding:10px}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]{text-align:center;font-size:11px;margin-top:-20px}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#fff;padding:0 10px;color:#d58e0b}.box-help[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]{font-size:13px;overflow-x:auto;overflow-y:hidden}.custom-cell-knowledge[_ngcontent-%COMP%]{position:absolute;left:10px;top:0;bottom:0}.custom-colums-knowledge[_ngcontent-%COMP%]{height:calc(100vh - 200px);overflow-y:auto}@media screen and (max-width: 768px){.custom-colums-knowledge[_ngcontent-%COMP%]{height:auto!important;overflow-y:hidden}}"]}),s})();var dt=l(68323);function Bi(e,s){if(1&e&&(t.j41(0,"div",1),t.nrm(1,"div",2),t.k0s()),2&e){const n=t.XpG();t.R7$(),t.Y8G("chart",n.chartSkill)}}let Xi=(()=>{var e;class s extends j.H{constructor(){super(...arguments),this.keyTitle="",this.height=300,this.width=250}handleData(){return this.data.filter(o=>0!==o.totalQuestion).map(o=>({name:this.commonService.myTranslateInstant(o.name),y:o.totalQuestion}))}createPieChart(){let i=this.handleData();if(!i.length)return;const o=i.reduce((r,f)=>(f.y??0)>(r.y??0)?f:r,i[0]);i=i.map(r=>r.y===o.y?{...r,sliced:!0,selected:!0}:r);let a=new g.t1({chart:{type:"pie",height:this.height,width:this.width},title:{text:this.commonService.myTranslateInstant(this.keyTitle)},credits:{enabled:!1},series:[{name:this.commonService.myTranslateInstant("lang_core_total_question"),type:"pie",data:i,dataLabels:{enabled:!0,distance:-40,format:"{point.name}: {point.y}",style:{color:"#000000"},filter:{operator:"==",property:"y",value:o.y??0}}}]});this.chartSkill=a}ngOnInit(){this.createPieChart()}}return(e=s).\u0275fac=(()=>{let n;return function(o){return(n||(n=t.xGo(e)))(o||e)}})(),e.\u0275cmp=t.VBU({type:e,selectors:[["app-azt-pie-chart"]],inputs:{keyTitle:"keyTitle",data:"data",height:"height",width:"width"},features:[t.Vt3],decls:1,vars:1,consts:[["class","mb-5",4,"ngIf"],[1,"mb-5"],[3,"chart"]],template:function(i,o){1&i&&t.DNE(0,Bi,2,1,"div",0),2&i&&t.Y8G("ngIf",o.chartSkill)},dependencies:[d.bT,g.S6],encapsulation:2}),s})();function Ki(e,s){1&e&&(t.j41(0,"div",2),t.nrm(1,"azt-loading-ui",3),t.k0s()),2&e&&(t.R7$(),t.Y8G("size",30))}function Ui(e,s){1&e&&(t.j41(0,"div",6),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&e&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"lang_homework_homework_list_not_found")," "))}function Ji(e,s){1&e&&(t.j41(0,"div",14),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&e&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"lang_homework_homework_list_not_found")," "))}function Wi(e,s){if(1&e&&(t.j41(0,"tr")(1,"td",19)(2,"div",20),t.nrm(3,"azt-create-avatar",21),t.j41(4,"div",22)(5,"h3",11),t.EFF(6),t.k0s(),t.j41(7,"p",23),t.EFF(8),t.k0s()()()(),t.j41(9,"td",19),t.EFF(10),t.k0s()()),2&e){const n=s.$implicit;t.R7$(3),t.Y8G("linkAvatar",n.avatar)("nameCreateAvatar",n.fullName)("size",35),t.R7$(3),t.JRh(n.fullName),t.R7$(2),t.JRh(n.email),t.R7$(2),t.JRh(n.totalQuestion)}}function Hi(e,s){if(1&e&&(t.j41(0,"table",15)(1,"thead")(2,"tr")(3,"th",16),t.EFF(4),t.nI1(5,"mytranslate"),t.k0s(),t.j41(6,"th",17),t.EFF(7),t.nI1(8,"mytranslate"),t.k0s()()(),t.j41(9,"tbody"),t.DNE(10,Wi,11,6,"tr",18),t.k0s()()),2&e){const n=t.XpG(3);t.R7$(4),t.JRh(t.bMT(5,3,"lang_auto_ho_va_ten")),t.R7$(3),t.JRh(t.bMT(8,5,"S\u1ed1 l\u01b0\u1ee3ng c\xe2u h\u1ecfi")),t.R7$(3),t.Y8G("ngForOf",n.dataAnalytics.members)}}function Zi(e,s){if(1&e&&(t.j41(0,"div")(1,"div",7),t.nrm(2,"app-azt-pie-chart",8)(3,"app-azt-pie-chart",8)(4,"app-azt-pie-chart",8),t.k0s(),t.j41(5,"div",9)(6,"div",10)(7,"p",11),t.EFF(8),t.nI1(9,"mytranslate"),t.k0s()(),t.DNE(10,Ji,3,3,"div",12)(11,Hi,11,7,"table",13),t.k0s()()),2&e){const n=t.XpG(2);t.R7$(2),t.Y8G("data",n.dataAnalytics.frames)("width",400)("keyTitle","lang_core_so_luong_cau_hoi_theo_cau_truc"),t.R7$(),t.Y8G("data",n.dataAnalytics.tags)("width",400)("keyTitle","lang_core_ty_le_muc_do_kho_cua_cau_hoi"),t.R7$(),t.Y8G("data",n.dataAnalytics.answerTypes)("width",400)("keyTitle","lang_core_ty_le_cac_dang_thuc_cau_hoi"),t.R7$(4),t.JRh(t.bMT(9,12,"lang_core_danh_sach_dong_gop")),t.R7$(2),t.Y8G("ngIf",!n.dataAnalytics.members.length),t.R7$(),t.Y8G("ngIf",n.dataAnalytics.members.length)}}function to(e,s){if(1&e&&t.DNE(0,Ui,3,3,"div",4)(1,Zi,12,14,"div",5),2&e){const n=t.XpG();t.Y8G("ngIf",!n.dataAnalytics),t.R7$(),t.Y8G("ngIf",n.dataAnalytics)}}let eo=(()=>{var e;class s extends j.H{getData(){this.initStatusObj(),this.ebankService.apiEbanksCountQuestionsGet(this.bankId,void 0).subscribe(i=>i.success?(this.dataAnalytics=i.data,this.dataAnalytics?(this.dataAnalytics.frames=this.dataAnalytics.frames,this.dataAnalytics.answerTypes.forEach(o=>o.name="lang_tool_knowledge_answer_type_"+o.name),this.dataAnalytics.tags=this.dataAnalytics.tags,void this.stopStatusObj()):this.stopStatusObj()):this.errorStatusObj(i.message,!0))}ngOnInit(){this.getData()}constructor(i){super(),this.ebankService=i}}return(e=s).\u0275fac=function(i){return new(i||e)(t.rXU(st.n))},e.\u0275cmp=t.VBU({type:e,selectors:[["app-question-library-analytics-box"]],inputs:{bankId:"bankId"},features:[t.Vt3],decls:3,vars:2,consts:[["doneLoading",""],["class","flex justify-center items-center p-5",4,"ngIf","ngIfElse"],[1,"flex","justify-center","items-center","p-5"],[3,"size"],["class","flex justify-center items-center",4,"ngIf"],[4,"ngIf"],[1,"flex","justify-center","items-center"],[1,"flex","justify-around","mr-5","ml-5"],[3,"data","width","keyTitle"],[1,"w-full"],[1,"flex","justify-between","items-center","pb-2",2,"border-bottom","1px solid #ddd"],[1,"font-medium"],["class","flex justify-center items-center mt-3",4,"ngIf"],["class","table","style","white-space: initial",4,"ngIf"],[1,"flex","justify-center","items-center","mt-3"],[1,"table",2,"white-space","initial"],[1,"whitespace-nowrap"],[1,"whitespace-nowrap","text-center"],[4,"ngFor","ngForOf"],[1,"text-center","capitalize"],[1,"flex","items-center"],[3,"linkAvatar","nameCreateAvatar","size"],[1,"ml-3","text-left"],[1,"text-slate-500","text-xs"]],template:function(i,o){if(1&i&&t.DNE(0,Ki,2,1,"div",1)(1,to,2,2,"ng-template",null,0,t.C5r),2&i){const a=t.sdS(2);t.Y8G("ngIf",o.statusObj.loading)("ngIfElse",a)}},dependencies:[d.Sq,d.bT,dt.p,E.R,Xi,x.wp],encapsulation:2}),s})();var no=l(60495),io=l(87840),oo=l(3635),ao=l(46882);function so(e,s){1&e&&(t.j41(0,"div",2),t.nrm(1,"azt-loading-ui",3),t.k0s()),2&e&&(t.R7$(),t.Y8G("size",30))}function ro(e,s){if(1&e){const n=t.RV6();t.j41(0,"tr")(1,"td",10)(2,"div",4),t.nrm(3,"azt-create-avatar",11),t.j41(4,"div",12)(5,"h3",13),t.EFF(6),t.k0s(),t.j41(7,"p",14),t.EFF(8),t.k0s()()()(),t.j41(9,"td",10),t.EFF(10),t.nI1(11,"mytranslate"),t.k0s(),t.j41(12,"td",15)(13,"lucide-icon",16),t.nI1(14,"mytranslate"),t.bIt("click",function(){const o=t.eBV(n).$implicit,a=t.XpG(2);return t.Njj(a.showEditPermissionDialog(o))}),t.k0s()()()}if(2&e){const n=s.$implicit,i=t.XpG(2);t.R7$(3),t.Y8G("nameCreateAvatar",n.fullName)("linkAvatar",n.avatar)("size",35),t.R7$(3),t.JRh(n.fullName),t.R7$(2),t.JRh(n.email),t.R7$(2),t.JRh(t.bMT(11,7,i.checkRole(n.role))),t.R7$(3),t.FS9("matTooltip",t.bMT(14,9,"lang_common_edit"))}}function lo(e,s){if(1&e){const n=t.RV6();t.j41(0,"div")(1,"div",4)(2,"p"),t.EFF(3),t.nI1(4,"mytranslate"),t.k0s(),t.j41(5,"span",5),t.bIt("click",function(){t.eBV(n);const o=t.XpG();return t.Njj(o.showListPeopleWhoWillShare())}),t.EFF(6),t.nI1(7,"mytranslate"),t.k0s()(),t.j41(8,"table",6)(9,"thead")(10,"tr")(11,"th",7),t.EFF(12),t.nI1(13,"mytranslate"),t.k0s(),t.j41(14,"th",8),t.EFF(15),t.nI1(16,"mytranslate"),t.k0s(),t.nrm(17,"th"),t.k0s()(),t.j41(18,"tbody"),t.DNE(19,ro,15,11,"tr",9),t.k0s()()()}if(2&e){const n=t.XpG();t.R7$(3),t.JRh(t.bMT(4,5,"lang_core_danh_sach_thanh_vien")),t.R7$(3),t.SpI("+ ",t.bMT(7,7,"lang_teacher_group_group_add_member"),""),t.R7$(6),t.JRh(t.bMT(13,9,"lang_auto_ho_va_ten")),t.R7$(3),t.JRh(t.bMT(16,11,"Vai tr\xf2")),t.R7$(4),t.Y8G("ngForOf",n.members)}}let co=(()=>{var e;class s extends j.H{showListPeopleWhoWillShare(){this.sAztDialogService.open(io.z,{data:{shareDataObj:this.shareDataObj,setData:()=>this.getData()},autoFocus:!1,restoreFocus:!1}).afterClosed().subscribe(o=>{o&&this.getData()})}showEditPermissionDialog(i){let o={fullName:i.fullName,phone:i.phone,email:i.email,avatar:i.avatar,id:i.userId,teamPermissions:this.ebankPermissions.filter(r=>r.code==i.role),allowEditPermission:!0,allowDeletePermission:!0};this.sAztDialogService.open(no.A,{data:{teacherObj:o,shareDataObj:this.shareDataObj},restoreFocus:!1}).afterClosed().subscribe(r=>{r&&this.getData()})}checkRole(i){return this.ebankPermissions.find(o=>o.code==i)?.key??"lang_auto_nguoi_xem"}getUserTeachers(i){this.teacherGroupService.apiTeacherGroupGetUserTeachersGet().subscribe(o=>{if(!o.success)return i(o.message);let a=this.shareDataObj.teacherObjs;this.shareDataObj.allTeacherPermissionObjs=o.data?.map(r=>({...r,id:r.teacherId??0,allowEditPermission:!0,allowDeletePermission:!0,teamPermissions:a.find(f=>f.id==r.id)?.teamPermissions??[]}))??[],i(void 0)})}getData(){this.initStatusObj(),this.ebankMemberService.apiEbanksMemberEbankIdGet(this.bankId).subscribe(i=>{if(!i.success)return this.errorStatusObj(i.message,!0);this.members=i.data??[],this.shareDataObj.teacherObjs=this.members?.map(o=>({fullName:o.fullName,phone:o.phone,email:o.email,avatar:o.avatar,id:o.userId,allowEditPermission:!0,allowDeletePermission:!0,teamPermissions:this.ebankPermissions.filter(a=>a.code==o.role)})),this.getUserTeachers(o=>{if(o)return this.errorStatusObj(o,!0);this.stopStatusObj()})})}createShareData(){this.shareDataObj={objectId:this.bankId,objectCode:"EBANK",ebankPermissions:this.ebankPermissions,allGroupPermissionObjs:[],allTeacherPermissionObjs:[],groupObjs:[],teacherObjs:[]}}ngOnInit(){this.initStatusObj(),this.createShareData(),this.getData()}constructor(i,o,a){super(),this.ebankMemberService=i,this.sAztDialogService=o,this.teacherGroupService=a,this.members=[],this.ebankPermissions=[{id:1,key:"lang_auto_chu_so_huu",code:"owner"},{id:3,key:"lang_auto_nguoi_soan_thao",code:"editor"},{id:2,key:"lang_auto_nguoi_xem",code:"viewer"}]}}return(e=s).\u0275fac=function(i){return new(i||e)(t.rXU(oo.V),t.rXU(L.i),t.rXU(ao.x))},e.\u0275cmp=t.VBU({type:e,selectors:[["coazt-question-library-permission-management"]],inputs:{bankId:"bankId"},features:[t.Vt3],decls:2,vars:2,consts:[["class","p-5 flex justify-center items-center",4,"ngIf"],[4,"ngIf"],[1,"p-5","flex","justify-center","items-center"],[3,"size"],[1,"flex","items-center"],[1,"clickable","ml-3","link-color","clickable","uppercase",3,"click"],[1,"table","mt-2",2,"white-space","initial"],[1,"whitespace-nowrap"],[1,"whitespace-nowrap","text-center"],[4,"ngFor","ngForOf"],[1,"text-center","capitalize"],[3,"nameCreateAvatar","linkAvatar","size"],[1,"ml-3","text-left"],[1,"font-medium"],[1,"text-slate-500","text-xs"],[1,"text-right","capitalize"],["size","20","name","pencil",1,"clickable",3,"click","matTooltip"]],template:function(i,o){1&i&&t.DNE(0,so,2,1,"div",0)(1,lo,20,13,"div",1),2&i&&(t.Y8G("ngIf",o.statusObj.loading),t.R7$(),t.Y8G("ngIf",o.members.length&&!o.statusObj.loading))},dependencies:[d.Sq,d.bT,A.oV,dt.p,E.R,h.WGl,x.wp],encapsulation:2}),s})(),uo=(()=>{var e;class s extends j.H{constructor(){super(...arguments),this.nodeObjsData=[]}convertFrameDataToNode(i){return i.map(o=>({id:o.id,getQuestionKey:"",title:o.name,parentId:o.parentId,children:this.convertFrameDataToNode(o.children),position:o.position,nodeType:1,objectiveId:"objective"==o.suggestModel?o.suggestId:void 0,knowledgeId:"knowledge"==o.suggestModel?o.suggestId:void 0,questions:o.questions.map(a=>({...a,difficultyIndex:0})),totalQuestion:o.totalQuestion}))}ngOnInit(){this.nodeObjsData=this.convertFrameDataToNode(this.bankInfoObj.frames)}}return(e=s).\u0275fac=(()=>{let n;return function(o){return(n||(n=t.xGo(e)))(o||e)}})(),e.\u0275cmp=t.VBU({type:e,selectors:[["app-question-library-structure-box"]],inputs:{bankInfoObj:"bankInfoObj"},features:[t.Vt3],decls:1,vars:6,consts:[[3,"bankId","rawNodes","modeView","schoolSubjectValue","schoolLevelValue","useScrollBar"]],template:function(i,o){1&i&&t.nrm(0,"app-question-library-tree-component",0),2&i&&t.Y8G("bankId",o.bankInfoObj.id)("rawNodes",o.nodeObjsData)("modeView","structure")("schoolSubjectValue",o.bankInfoObj.subjectId)("schoolLevelValue",o.bankInfoObj.levelId)("useScrollBar",!1)},dependencies:[pt],encapsulation:2}),s})();var mo=l(34143);function _o(e,s){1&e&&(t.j41(0,"div",2),t.nrm(1,"azt-loading-ui",3),t.k0s()),2&e&&(t.R7$(),t.Y8G("size",30))}function po(e,s){1&e&&(t.j41(0,"div",6),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&e&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"lang_homework_homework_list_not_found")," "))}function go(e,s){if(1&e){const n=t.RV6();t.j41(0,"a",22),t.bIt("click",function(){t.eBV(n);const o=t.XpG(2).$implicit,a=t.XpG(3);return t.Njj(a.viewActivityLog(o.addQuestionMeta.turnImportId))}),t.EFF(1),t.k0s()}if(2&e){const n=t.XpG(2).$implicit;t.R7$(),t.JRh(n.addQuestionMeta.sourceName)}}function bo(e,s){if(1&e&&(t.j41(0,"span",23),t.EFF(1),t.k0s()),2&e){const n=t.XpG(2).$implicit;t.R7$(),t.JRh(n.addQuestionMeta.sourceName)}}function fo(e,s){if(1&e&&(t.j41(0,"div",17),t.nrm(1,"lucide-icon",18),t.j41(2,"span",19),t.EFF(3),t.nI1(4,"mytranslate"),t.nI1(5,"mytranslate"),t.k0s(),t.DNE(6,go,2,1,"a",20)(7,bo,2,1,"span",21),t.k0s()),2&e){const n=t.XpG().$implicit;t.R7$(3),t.E5c("",t.bMT(4,5,"lang_admin_guide_add_new")," ",n.addQuestionMeta.totalQuestion," ",t.bMT(5,7,"lang_core_cau_hoi_vao"),""),t.R7$(3),t.Y8G("ngIf",n.addQuestionMeta),t.R7$(),t.Y8G("ngIf",!n.targetId)}}function ho(e,s){if(1&e&&(t.j41(0,"div",17),t.nrm(1,"azt-svg-icon",24),t.j41(2,"span",19),t.EFF(3),t.nI1(4,"mytranslate"),t.k0s(),t.j41(5,"span",23),t.EFF(6),t.k0s()()),2&e){const n=t.XpG().$implicit;t.R7$(),t.Y8G("type","user-cog")("size",14),t.R7$(2),t.JRh(t.bMT(4,4,"lang_core_thay_doi_quyen_cho_tai_khoan")),t.R7$(3),t.JRh(n.changeRoleMemberMeta.fullName)}}function vo(e,s){if(1&e&&(t.j41(0,"div",17),t.nrm(1,"lucide-icon",25),t.j41(2,"span",19),t.EFF(3),t.nI1(4,"mytranslate"),t.k0s(),t.j41(5,"span",23),t.EFF(6),t.k0s()()),2&e){const n=t.XpG().$implicit;t.R7$(3),t.JRh(t.bMT(4,2,"lang_core_them_moi_thanh_vien")),t.R7$(3),t.JRh(n.createMemberMeta.fullName)}}function xo(e,s){if(1&e&&(t.j41(0,"div",17),t.nrm(1,"lucide-icon",26),t.j41(2,"span",19),t.EFF(3),t.nI1(4,"mytranslate"),t.k0s(),t.j41(5,"span",23),t.EFF(6),t.k0s()()),2&e){const n=t.XpG().$implicit;t.R7$(3),t.JRh(t.bMT(4,2,"lang_core_them_moi_ngan_hang_cau_hoi")),t.R7$(3),t.JRh(n.createEbankMeta.name)}}function yo(e,s){if(1&e&&(t.j41(0,"div",17),t.nrm(1,"lucide-icon",27),t.j41(2,"span",19),t.EFF(3),t.nI1(4,"mytranslate"),t.k0s(),t.j41(5,"span",23),t.EFF(6),t.k0s()()),2&e){const n=t.XpG().$implicit;t.R7$(3),t.JRh(t.bMT(4,2,"lang_core_xoa_cau_hoi")),t.R7$(3),t.JRh(null==n.delQuestionMeta||null==n.delQuestionMeta.questionIds?null:n.delQuestionMeta.questionIds.join(", "))}}function Io(e,s){if(1&e&&(t.j41(0,"div",17),t.nrm(1,"lucide-icon",28),t.j41(2,"span",19),t.EFF(3),t.nI1(4,"mytranslate"),t.k0s(),t.j41(5,"span",23),t.EFF(6),t.k0s()()),2&e){const n=t.XpG().$implicit;t.R7$(3),t.JRh(t.bMT(4,2,"lang_core_xoa_thanh_vien")),t.R7$(3),t.JRh(n.delMemberMeta.fullName)}}function Co(e,s){if(1&e&&(t.j41(0,"div",10)(1,"div",11),t.nrm(2,"azt-create-avatar",12),t.j41(3,"div",13)(4,"h3",14),t.EFF(5),t.k0s(),t.DNE(6,fo,8,9,"div",15)(7,ho,7,6,"div",15)(8,vo,7,4,"div",15)(9,xo,7,4,"div",15)(10,yo,7,4,"div",15)(11,Io,7,4,"div",15),t.k0s()(),t.j41(12,"p",16),t.EFF(13),t.nI1(14,"relativeTime"),t.k0s()()),2&e){const n=s.$implicit;t.Y8G("ngClass",s.index>0?"mt-5":""),t.R7$(2),t.Y8G("nameCreateAvatar",null==n.creator?null:n.creator.fullName)("linkAvatar",null==n.creator?null:n.creator.avatar)("size",35),t.R7$(3),t.JRh(null==n.creator?null:n.creator.fullName),t.R7$(),t.Y8G("ngIf",n.addQuestionMeta),t.R7$(),t.Y8G("ngIf",n.changeRoleMemberMeta),t.R7$(),t.Y8G("ngIf",n.createMemberMeta),t.R7$(),t.Y8G("ngIf",n.createEbankMeta),t.R7$(),t.Y8G("ngIf",null==n.delQuestionMeta?null:n.delQuestionMeta.questionIds),t.R7$(),t.Y8G("ngIf",n.delMemberMeta),t.R7$(2),t.JRh(t.bMT(14,12,n.createdAt))}}function Oo(e,s){if(1&e&&(t.j41(0,"div")(1,"div",7),t.nrm(2,"div",8),t.k0s(),t.DNE(3,Co,15,14,"div",9),t.k0s()),2&e){const n=t.XpG(2);t.R7$(3),t.Y8G("ngForOf",n.ebankAction.actions)}}function jo(e,s){if(1&e&&t.DNE(0,po,3,3,"div",4)(1,Oo,4,1,"div",5),2&e){const n=t.XpG();t.Y8G("ngIf",!n.ebankAction),t.R7$(),t.Y8G("ngIf",n.ebankAction)}}let ko=(()=>{var e;class s extends j.H{viewActivityLog(i){this.commonService.myNavigation("/admin/question-library/view-question-activity/"+this.bankId+"/"+i)}getData(){this.initStatusObj(),this.ebankActionService.apiEbanksActionListPost({ebankId:this.bankId,page:this.page,limit:this.limit}).subscribe(o=>{if(!o.success)return this.errorStatusObj(o.message,!0);this.ebankAction=o.data,this.stopStatusObj()})}ngOnInit(){this.getData()}constructor(i){super(),this.ebankActionService=i,this.bankId=0,this.page=1,this.limit=20}}return(e=s).\u0275fac=function(i){return new(i||e)(t.rXU(mo.H))},e.\u0275cmp=t.VBU({type:e,selectors:[["app-question-library-activity-log"]],inputs:{bankId:"bankId"},features:[t.Vt3],decls:3,vars:2,consts:[["doneLoading",""],["class","p-5 flex justify-center items-center",4,"ngIf","ngIfElse"],[1,"p-5","flex","justify-center","items-center"],[3,"size"],["class","p-5 flex justify-center items-center font-medium text-slate-500",4,"ngIf"],[4,"ngIf"],[1,"p-5","flex","justify-center","items-center","font-medium","text-slate-500"],[1,"box-vertical-line","absolute","flex","justify-center"],[1,"vertical-line"],["class","flex justify-between items-center relative",3,"ngClass",4,"ngFor","ngForOf"],[1,"flex","justify-between","items-center","relative",3,"ngClass"],[1,"flex","items-center"],[3,"nameCreateAvatar","linkAvatar","size"],[1,"ml-2"],[1,"font-medium"],["class","flex items-center text-xs font-medium",4,"ngIf"],[1,"text-xs","text-slate-500"],[1,"flex","items-center","text-xs","font-medium"],["name","file-plus","size","14",1,"text-primary"],[1,"mr-2","ml-2","text-slate-500"],["class","text-primary",3,"click",4,"ngIf"],["class","text-primary",4,"ngIf"],[1,"text-primary",3,"click"],[1,"text-primary"],[1,"text-primary",3,"type","size"],["name","user-plus","size","14",1,"text-primary"],["name","church","size","14",1,"text-primary"],["name","trash-2","size","14",1,"text-danger"],["name","user-minus","size","14",1,"text-danger"]],template:function(i,o){if(1&i&&t.DNE(0,_o,2,1,"div",1)(1,jo,2,2,"ng-template",null,0,t.C5r),2&i){const a=t.sdS(2);t.Y8G("ngIf",o.statusObj.loading)("ngIfElse",a)}},dependencies:[d.YU,d.Sq,d.bT,dt.p,E.R,N.m,h.WGl,x.wp,x.NA],styles:[".vertical-line[_ngcontent-%COMP%]{border-left:2px solid lightgray}.box-vertical-line[_ngcontent-%COMP%]{width:35px;height:calc(100% - 2.5rem);padding-top:35px;padding-bottom:35px}"]}),s})();var wo=l(27208);const To=()=>({}),Qo=(e,s)=>({expandInfo:e,id:0,name:"",countQuestion:0,showFrontend:0,allowStudentView:!1,editable:!1,permissionObj:s});let Eo=(()=>{var e;class s extends J._{btnCloseDialog(){this.dialogRef.close(!1)}showRemoveQuestionDialog(){this.sAztDialogService.open(lt,{width:"750px",data:{questionObj:this.questionObj,ebankId:this.bankId??0,index:1},restoreFocus:!1,autoFocus:!1}).afterClosed().subscribe(a=>{a&&(this.successStatusObj("lang_cms_delete_success",!0),this.dialogRef.close(!0))})}editQuestion(){let i=`/admin/question-library/view-question-library/${this.bankId}/${this.data.tab}`;window.location.href=this.commonService.getLocalRouter("/admin/testbank/azota-editor/0")+"/"+this.questionObj.id+"?backto="+encodeURIComponent(i)+"&r="+(this.questionObj.rawIndex??0)+"&ebankId="+this.bankId}constructor(i,o){super(o,i),this.dialogRef=i,this.data=o,this.sAztDialogService=(0,t.WQX)(L.i),this.followerRenderQuest=new q.e,this.bankId=0,this.questionObj=o.questionObj,this.bankId=o.bankId}}return(e=s).\u0275fac=function(i){return new(i||e)(t.rXU(c.CP,8),t.rXU(c.Vh,8))},e.\u0275cmp=t.VBU({type:e,selectors:[["app-question-dialog"]],features:[t.Vt3],decls:15,vars:19,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400","p-3"],[1,"box-service","box","border","border-slate-400","dark:border-darkmode-400","px-3","py-2","relative","mb-2"],[3,"examObj","questionObj","follower","hideQuestionLabel"],[1,"p-3","flex","justify-end"],[1,"btn","w-24","btn-secondary","mr-3",3,"click"],[1,"btn","btn-danger",3,"click"],[1,"btn","btn-primary","ml-3",3,"click"]],template:function(i,o){1&i&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2),t.nrm(3,"azt-question-standalone-for-question-library-in-view-mode",3),t.nI1(4,"mytranslate"),t.k0s()(),t.j41(5,"div",4)(6,"button",5),t.bIt("click",function(){return o.btnCloseDialog()}),t.EFF(7),t.nI1(8,"mytranslate"),t.k0s(),t.j41(9,"button",6),t.bIt("click",function(){return o.showRemoveQuestionDialog()}),t.EFF(10),t.nI1(11,"mytranslate"),t.k0s(),t.j41(12,"button",7),t.bIt("click",function(){return o.editQuestion()}),t.EFF(13),t.nI1(14,"mytranslate"),t.k0s()()()),2&i&&(t.R7$(3),t.Y8G("examObj",t.l_i(16,Qo,t.bMT(4,7,"lang_powerpoint_frontend_chart_question"),t.lJ4(15,To)))("questionObj",o.questionObj)("follower",o.followerRenderQuest)("hideQuestionLabel",!0),t.R7$(4),t.SpI(" ",t.bMT(8,9,"lang_auto_dong")," "),t.R7$(3),t.SpI(" ",t.bMT(11,11,"lang_core_xoa_cau_hoi")," "),t.R7$(3),t.SpI(" ",t.bMT(14,13,"lang_core_sua_cau_hoi")," "))},dependencies:[rt,x.wp],encapsulation:2}),s})();var Mo=l(32099);let So=(()=>{var e;class s extends j.H{onSearchBox(i){if(this.searchContentObj=i,""==this.searchContentObj.searchContent)return;let o=Number(this.searchContentObj.searchContent);if(!o)return this.showErrorSnack("lang_core_ma_cau_hoi_khong_hop_le");this.searchQuestion(o)}searchQuestion(i){this.initStatusObj(),this.ebankQuestionService.apiEbanksQuestionsListPost({ebankId:this.bankId,questionIds:[i],page:1,size:1}).subscribe(a=>{if(!a.success)return this.errorStatusObj(a.message,!0);this.loadQuest(a.data?.list.map(r=>r.questionTest)??[],r=>{let f=this.commonService.getFirstOfArray(r);if(!f)return this.errorStatusObj("lang_core_ma_cau_hoi_khong_ton_tai",!0);this.showQuestionDialog(f),this.successStatusObj()})})}showQuestionDialog(i){this.sAztDialogService.open(Eo,{width:"750px",data:{questionObj:i,bankId:this.bankId,tab:this.tab},autoFocus:!1,restoreFocus:!1}).afterClosed().subscribe(a=>{a&&(this.searchContentObj.resetSearchContentEvent("NOT_EMIT_EVENT"),this.reloadData.emit(!0))})}loadQuest(i,o){const a=this.commonService.castJsonToClassObjs(V.I,JSON.stringify(i));this.questionRenderService.parseRenderQuestions(a??[],r=>{},this.configRenderService).then(r=>o(r)).catch(r=>{this.showErrorSnack("lang_auto_de_thi_tai_khong_thanh_cong"),o(a??[])})}constructor(i,o){super(),this.ebankQuestionService=i,this.sAztDialogService=o,this.reloadData=new t.bkB,this.questionRenderService=(0,t.WQX)(B.g),this.configRenderService=new Y.y(!0),this.searchContentObj=new wo.Z}}return(e=s).\u0275fac=function(i){return new(i||e)(t.rXU(Q.N8),t.rXU(L.i))},e.\u0275cmp=t.VBU({type:e,selectors:[["app-question-library-search-question-box"]],inputs:{bankId:"bankId",tab:"tab"},outputs:{reloadData:"reloadData"},features:[t.Vt3],decls:2,vars:5,consts:[[3,"onSearch","isServerSearch","isManualSearch","placeholder"]],template:function(i,o){1&i&&(t.j41(0,"azt-search-box",0),t.nI1(1,"mytranslate"),t.bIt("onSearch",function(r){return o.onSearchBox(r.searchObj)}),t.k0s()),2&i&&t.Y8G("isServerSearch",!0)("isManualSearch",!0)("placeholder",t.bMT(1,3,"lang_core_nhap_ma_cau_hoi"))},dependencies:[Mo.W,x.wp],encapsulation:2}),s})();function Ro(e,s){if(1&e&&t.nrm(0,"azt-loading-effect",3),2&e){const n=t.XpG();t.Y8G("currentStatusObj",n.statusObj)}}function Fo(e,s){if(1&e&&(t.j41(0,"span",26),t.EFF(1),t.k0s()),2&e){const n=t.XpG(3);t.R7$(),t.JRh(n.bankInfoObj.actionWaitingRead)}}function Lo(e,s){if(1&e){const n=t.RV6();t.j41(0,"div",5)(1,"div",6)(2,"p")(3,"span",7),t.EFF(4),t.nI1(5,"mytranslate"),t.k0s(),t.j41(6,"span",8),t.EFF(7),t.nI1(8,"mytranslate"),t.k0s()(),t.j41(9,"app-question-library-search-question-box",9),t.bIt("reloadData",function(){t.eBV(n);const o=t.XpG(2);return t.Njj(o.getDataBank())}),t.k0s()(),t.j41(10,"div",10)(11,"div",11)(12,"div",12),t.bIt("click",function(){t.eBV(n);const o=t.XpG(2);return t.Njj(o.selectTab(0))}),t.nrm(13,"lucide-icon",13),t.EFF(14),t.nI1(15,"mytranslate"),t.k0s(),t.j41(16,"div",14),t.bIt("click",function(){t.eBV(n);const o=t.XpG(2);return t.Njj(o.selectTab(1))}),t.nrm(17,"lucide-icon",15),t.EFF(18),t.nI1(19,"mytranslate"),t.DNE(20,Fo,2,1,"span",16),t.k0s(),t.j41(21,"div",14),t.bIt("click",function(){t.eBV(n);const o=t.XpG(2);return t.Njj(o.selectTab(2))}),t.nrm(22,"azt-svg-icon",17),t.EFF(23),t.nI1(24,"mytranslate"),t.k0s(),t.j41(25,"div",18),t.bIt("click",function(){t.eBV(n);const o=t.XpG(2);return t.Njj(o.selectTab(3))}),t.nrm(26,"lucide-icon",19),t.EFF(27),t.nI1(28,"mytranslate"),t.k0s()(),t.j41(29,"div",20)(30,"button",21),t.bIt("click",function(){t.eBV(n);const o=t.XpG(2);return t.Njj(o.goToCreateExamMatrix())}),t.EFF(31),t.nI1(32,"mytranslate"),t.k0s(),t.j41(33,"button",22),t.bIt("click",function(){t.eBV(n);const o=t.XpG(2);return t.Njj(o.goToChooseImportQuestionMode())}),t.EFF(34),t.nI1(35,"mytranslate"),t.k0s()()(),t.j41(36,"div",23),t.nrm(37,"app-question-library-structure-box",24)(38,"app-question-library-activity-log",25)(39,"app-question-library-analytics-box",25)(40,"coazt-question-library-permission-management",25),t.k0s()()}if(2&e){const n=t.XpG(2);t.R7$(4),t.JRh(t.bMT(5,29,n.bankInfoObj.name)),t.R7$(3),t.SpI("(",n.bankInfoObj.totalQuestion+" "+t.bMT(8,31,"lang_auto_cau_hoi"),")"),t.R7$(2),t.Y8G("bankId",n.bankId)("tab",n.tab),t.R7$(3),t.HbH(0==n.tab?"btn-tab-select":"text-slate-500"),t.R7$(2),t.SpI(" ",t.bMT(15,33,"lang_core_cau_truc")," "),t.R7$(2),t.HbH(1==n.tab?"btn-tab-select":"text-slate-500"),t.R7$(2),t.SpI(" ",t.bMT(19,35,"lang_core_cac_hoat_dong")," "),t.R7$(2),t.Y8G("ngIf",null==n.bankInfoObj?null:n.bankInfoObj.actionWaitingRead),t.R7$(),t.HbH(2==n.tab?"btn-tab-select":"text-slate-500"),t.R7$(),t.Y8G("type","chart-pie")("size",16),t.R7$(),t.SpI(" ",t.bMT(24,37,"lang_core_phan_tich")," "),t.R7$(2),t.HbH(3==n.tab?"btn-tab-select":"text-slate-500"),t.R7$(2),t.SpI(" ",t.bMT(28,39,"lang_auto_phan_quyen")," "),t.R7$(4),t.JRh(t.bMT(32,41,"lang_core_tao_ma_tran_de_thi")),t.R7$(3),t.SpI("+ ",t.bMT(35,43,"lang_cms_enter_question_description"),""),t.R7$(3),t.Y8G("hidden",0!=n.tab)("bankInfoObj",n.bankInfoObj),t.R7$(),t.Y8G("hidden",1!=n.tab)("bankId",n.bankId),t.R7$(),t.Y8G("hidden",2!=n.tab)("bankId",n.bankId),t.R7$(),t.Y8G("hidden",3!=n.tab)("bankId",n.bankId)}}function qo(e,s){if(1&e&&t.DNE(0,Lo,41,45,"div",4),2&e){const n=t.XpG();t.Y8G("ngIf",n.bankInfoObj)}}const Ao=[{path:"",component:F.z,canActivate:[T.t],children:[{path:"dashboard",component:Ri},{path:"choose-import-question-mode/:bankId",component:We},{path:"view-question-library/:bankId/:tab",component:(()=>{var e;class s extends j.H{selectTab(i){this.tab=i,this.commonService.myNavigation("/admin/question-library/view-question-library/"+this.bankId+"/"+this.tab)}goToChooseImportQuestionMode(){this.commonService.myNavigation(`/admin/question-library/choose-import-question-mode/${this.bankId}`)}goToCreateExamMatrix(){this.myNavigationWithQueryString("/admin/testbank/mix-ebank-template/0/ebank/0",`?bankId=${this.bankId}&levelId=${this.bankInfoObj?.levelId}&subjectId=${this.bankInfoObj?.subjectId}&bookId=${this.bankInfoObj?.bookId}`)}getDataBank(){this.initStatusObj(),this.eBanksService.apiEbanksIdGet(this.bankId,1).subscribe(i=>{if(!i.success)return this.errorStatusObj(i.message,!0);this.bankInfoObj=i.data,this.stopStatusObj()})}ngOnInit(){this.bankId=Number(this.commonService.getMyParam(this.activeRoute,"bankId")),this.backLink=this.commonService.getMyQueryParam("backto")??"/admin/question-library/dashboard",this.getDataBank(),this.waitDestroy((0,Tt.z)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.tab=Number(this.commonService.getMyParam(this.activeRoute,"tab")),this.tab>3&&this.selectTab(0)}))}constructor(i,o){super(),this.activeRoute=i,this.eBanksService=o,this.backLink="",this.tab=0,this.bankId=0}}return(e=s).\u0275fac=function(i){return new(i||e)(t.rXU(C.nX),t.rXU(Q.nd))},e.\u0275cmp=t.VBU({type:e,selectors:[["app-view-bank"]],features:[t.Vt3],decls:4,vars:3,consts:[["doneLoading",""],[3,"headerBackToLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],["class","p-3",4,"ngIf"],[1,"p-3"],[1,"flex","justify-between","items-center"],[1,"font-medium"],[1,"ml-2","text-slate-500","text-xs"],[3,"reloadData","bankId","tab"],[1,"flex","justify-between","mt-5"],[1,"flex","font-medium"],[1,"btn-tab","clickable",3,"click"],["name","list","size","16",1,"mr-2"],[1,"btn-tab","clickable","ml-2",3,"click"],["name","users","size","16",1,"mr-2"],["class","text-xs number-red",4,"ngIf"],[1,"mr-2",3,"type","size"],[1,"btn-tab","clickable","nl-2",3,"click"],["name","settings","size","16",1,"mr-2"],[1,"flex","items-start","mb-2"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-primary","ml-3",3,"click"],[1,"box","p-5",2,"border-radius","0rem 0.375rem 0.375rem 0.375rem"],[3,"hidden","bankInfoObj"],[3,"hidden","bankId"],[1,"text-xs","number-red"]],template:function(i,o){if(1&i&&(t.j41(0,"teacher-layout",1),t.DNE(1,Ro,1,1,"azt-loading-effect",2)(2,qo,1,1,"ng-template",null,0,t.C5r),t.k0s()),2&i){const a=t.sdS(3);t.Y8G("headerBackToLink",o.backLink),t.R7$(),t.Y8G("ngIf",o.statusObj.loading)("ngIfElse",a)}},dependencies:[d.bT,D.K,N.m,z.Q,h.WGl,eo,co,uo,ko,So,x.wp],styles:[".btn-tab[_ngcontent-%COMP%]{padding:10px 15px 18px;display:flex;justify-content:center;align-items:center}.btn-tab-select[_ngcontent-%COMP%]{background:#fff;border-top-left-radius:8px;border-top-right-radius:8px}.number-red[_ngcontent-%COMP%]{background:red;border-radius:50%;width:17px;height:17px;color:#fff;font-weight:900;display:flex;justify-content:center;align-items:center;margin:auto auto auto 5px}"]}),s})()},{path:"add-new-question-library",component:le},{path:"import-question-to-library/:bankId",component:vn},{path:"view-question-list-node/:bankId/:frameId",component:Vi},{path:"view-question-activity/:bankId/:turnImportId",component:ki}]}];let Go=(()=>{var e;class s{}return(e=s).\u0275fac=function(i){return new(i||e)},e.\u0275mod=t.$C({type:e}),e.\u0275inj=t.G2t({imports:[C.iI.forChild(Ao),C.iI,w.XE]}),s})(),Do=(()=>{var e;class s{}return(e=s).\u0275fac=function(i){return new(i||e)},e.\u0275mod=t.$C({type:e}),e.\u0275inj=t.G2t({imports:[C.iI,d.MD,p.s,m.Id,u.YN,u.X1,c.hM,I.L,O.Lk,m.Id,_.xv,y.Q,b.b,h.flO.pick(h.Ptg),v.An,Go,g.Fr]}),s})()},60531:(R,k,l)=>{"use strict";l.d(k,{O:()=>C});var d=l(48891),u=l(50589),c=l(62095);let C=(()=>{var g;class h{setMode(_){this.browserStorageService.saveSimpleStorage("__editor:mode_open",_)}getMode(){var _=this.browserStorageService.getSimpleStorage("__editor:mode_open")||"editor";return this.browserStorageService.removeSimpleStorage("__editor:mode_open"),_}setFileProcess(_){this.file=_}getFirstFile(){let _=this.file;return this.file=void 0,_}setOutputData(_){this.data=_}getOutputData(){return this.data}redirectToConfig(_){this.data.homework&&_.showHomework(),(this.data.exam||this.data.examOffline)&&_.showExam()}setMatrixData(_,v){v?this.matrix=_:this.browserStorageService.saveSimpleStorage("__editor:matrix-data",JSON.stringify(_))}getMatrixData(){var _=this.browserStorageService.getSimpleStorage("__editor:matrix-data");return this.browserStorageService.removeSimpleStorage("__editor:matrix-data"),_?this.commonService.castJsonToObj(_):this.matrix}constructor(_,v){this.browserStorageService=_,this.commonService=v,this.data={}}}return(g=h).\u0275fac=function(_){return new(_||g)(d.KVO(u.z),d.KVO(c.R))},g.\u0275prov=d.jDH({token:g,factory:g.\u0275fac,providedIn:"root"}),h})()},51221:(R,k,l)=>{"use strict";l.d(k,{$:()=>d});var d=function(u){return u.COPY="copy",u.CUT="cut",u.DELETE="delete",u.SELECTED="selected",u}(d||{})},86925:(R,k,l)=>{"use strict";l.d(k,{Y:()=>d});var d=function(u){return u[u.EXAM_CATEGORY=0]="EXAM_CATEGORY",u[u.EXAM=1]="EXAM",u}(d||{})},10296:(R,k,l)=>{"use strict";l.d(k,{R:()=>O});var d=l(43277),c=l(18148),C=l(48891),g=l(52509),h=l(62095);let O=(()=>{var _;class v{constructor(p,I){this.mobileWebviewService=p,this.commonService=I}shareFileWithBlob(p,I){if(this.commonService.isMobileWebview(void 0)){c.L.openLoadingEffect(this.commonService.myTranslateInstant("lang_auto_dang_lay_du_lieu_tu_he_thong")??"");let b=new FileReader;b.readAsDataURL(p),b.onloadend=()=>{let y=b.result;"string"==typeof y&&(this.mobileWebviewService.sendShareFileBase64(I,String(y)),c.L.closeLoadingEffect(100))}}else d.saveAs(p,I)}shareFileWithBase64(p,I){this.commonService.isMobileWebview(void 0)?this.mobileWebviewService.sendShareFileBase64(I,p):d.saveAs(p,I)}}return(_=v).\u0275fac=function(p){return new(p||_)(C.KVO(g.f),C.KVO(h.R))},_.\u0275prov=C.jDH({token:_,factory:_.\u0275fac,providedIn:"root"}),v})()},30977:(R,k,l)=>{"use strict";l.d(k,{g:()=>C});var d=l(51221),u=l(86925),c=l(48891);let C=(()=>{var g;class h{constructor(){this.clipboardObjs=[]}setActionToClipboard(_,v,m,p){var I={id:_,name:p,type:v,action:m};this.clipboardObjs.filter(y=>y.id==I.id&&y.type==I.type).length>0?this.clipboardObjs.forEach(y=>{y.id==I.id&&y.type==I.type&&(y.action=I.action)}):this.clipboardObjs.push(I)}hasInClipboard(_,v){return this.clipboardObjs.filter(p=>p.id==_&&p.type==v).length>0}hasCopyFolderActionInClipboard(){var _=!1;return this.clipboardObjs.forEach(v=>{v.type==u.Y.EXAM_CATEGORY&&v.action==d.$.COPY&&(_=!0)}),_}getActionOfDocumentObj(_,v){var m=this.clipboardObjs.filter(p=>p.id==_&&p.type==v);if(m&&m.length>0)return m[0].action}removeDocumentInClipboard(_,v){for(var m=0;m<this.clipboardObjs.length;m++)this.clipboardObjs[m].id==_&&this.clipboardObjs[m].type==v&&this.clipboardObjs.splice(m,1)}isPasteToSelfFolder(_){var v=!1;return this.clipboardObjs.forEach(m=>{m.id==_&&m.type==u.Y.EXAM_CATEGORY&&m.action==d.$.COPY&&(v=!0)}),v}getCurrentClipBoard(){return this.clipboardObjs}resetClipBoardAfterPasteOrCancelAllActions(){this.clipboardObjs=[]}}return(g=h).\u0275fac=function(_){return new(_||g)},g.\u0275prov=c.jDH({token:g,factory:g.\u0275fac,providedIn:"root"}),h})()},18148:(R,k,l)=>{"use strict";l.d(k,{L:()=>d});let d=(()=>{var u;class c{static openLoadingEffect(g){c.getDomElement().style.display="flex",setTimeout(()=>{c.changeMsgLoadingEffect(g)},50)}static closeLoadingEffect(g){return new Promise(h=>{setTimeout(()=>{const O=c.getDomElement();O&&(O.style.display="none"),h(!0)},g)})}static changeMsgLoadingEffect(g){c.getDomContent().innerText=g}static getDomContent(){return document.getElementById(c.idStatusContent)??document.createElement("span")}static getDomElement(){return document.getElementById(c.idComponent)??this.createDomElement()}static createDomElement(){const g=document.createElement("div");return g.id=c.idComponent,g.setAttribute("style","position: fixed;display: flex;width: 100vw;height: 100%;background: #000000c7;color: #ffffff;font-size: 20px;font-weight: lighter;justify-content: center;align-items: center;cursor: progress;z-index: 9999;top: 0;left: 0;"),g.style.display="none",g.innerHTML=`\n        <div class="text-center" style="height: 85%; overflow-x: auto;">\n            <div class="flex justify-center mt-5">\n                <svg width="20" viewBox="0 0 58 58" xmlns="http://www.w3.org/2000/svg">\n                    <g fill="none" fill-rule="evenodd">\n                        <g transform="translate(2 1)" stroke="currentColor" stroke-width="1.5">\n                            <circle cx="42.601" cy="11.462" r="5" fill-opacity="1" fill="currentColor">\n                                <animate attributeName="fill-opacity" begin="0s" dur="1.3s" values="1;0;0;0;0;0;0;0" calcMode="linear" repeatCount="indefinite"></animate>\n                            </circle>\n                            <circle cx="49.063" cy="27.063" r="5" fill-opacity="0" fill="currentColor">\n                                <animate attributeName="fill-opacity" begin="0s" dur="1.3s" values="0;1;0;0;0;0;0;0" calcMode="linear" repeatCount="indefinite"></animate>\n                            </circle>\n                            <circle cx="42.601" cy="42.663" r="5" fill-opacity="0" fill="currentColor">\n                                <animate attributeName="fill-opacity" begin="0s" dur="1.3s" values="0;0;1;0;0;0;0;0" calcMode="linear" repeatCount="indefinite"></animate>\n                            </circle>\n                            <circle cx="27" cy="49.125" r="5" fill-opacity="0" fill="currentColor">\n                                <animate attributeName="fill-opacity" begin="0s" dur="1.3s" values="0;0;0;1;0;0;0;0" calcMode="linear" repeatCount="indefinite"></animate>\n                            </circle>\n                            <circle cx="11.399" cy="42.663" r="5" fill-opacity="0" fill="currentColor">\n                                <animate attributeName="fill-opacity" begin="0s" dur="1.3s" values="0;0;0;0;1;0;0;0" calcMode="linear" repeatCount="indefinite"></animate>\n                            </circle>\n                            <circle cx="4.938" cy="27.063" r="5" fill-opacity="0" fill="currentColor">\n                                <animate attributeName="fill-opacity" begin="0s" dur="1.3s" values="0;0;0;0;0;1;0;0" calcMode="linear" repeatCount="indefinite"></animate>\n                            </circle>\n                            <circle cx="11.399" cy="11.462" r="5" fill-opacity="0" fill="currentColor">\n                                <animate attributeName="fill-opacity" begin="0s" dur="1.3s" values="0;0;0;0;0;0;1;0" calcMode="linear" repeatCount="indefinite"></animate>\n                            </circle>\n                            <circle cx="27" cy="5" r="5" fill-opacity="0" fill="currentColor">\n                                <animate attributeName="fill-opacity" begin="0s" dur="1.3s" values="0;0;0;0;0;0;0;1" calcMode="linear" repeatCount="indefinite"></animate>\n                            </circle>\n                        </g>\n                    </g>\n                </svg>\n            </div>\n            <div style="margin-top: 10px;position: relative;">\n                <span id="${c.idStatusContent}"></span>\n            </div>\n        </div>`,document.body.appendChild(g),g}}return(u=c).idComponent="azt-status-loading-effect",u.idStatusContent="azt-status-loading-effect-content",c})()},74175:(R,k,l)=>{"use strict";l.d(k,{W:()=>I});var d=l(47947),u=l(59640),c=l(48891),C=l(10296),g=l(62095),h=l(27691),O=l(54460),_=l(76975);const v=["*","*"];function m(b,y){if(1&b){const w=c.RV6();c.qex(0),c.j41(1,"a",2),c.bIt("click",function(){c.eBV(w);const F=c.XpG();return c.Njj(F.shareFileToFlutter())}),c.j41(2,"span"),c.EFF(3),c.nI1(4,"mytranslate"),c.k0s(),c.SdG(5),c.k0s(),c.bVm()}if(2&b){const w=c.XpG();c.R7$(),c.Aen(w.style),c.HbH(w.classStyle),c.FS9("target",w.target),c.R7$(2),c.JRh(c.bMT(4,7,w.fileDescription))}}function p(b,y){if(1&b&&(c.j41(0,"a",3)(1,"span"),c.EFF(2),c.nI1(3,"mytranslate"),c.k0s(),c.SdG(4,1),c.k0s()),2&b){const w=c.XpG();c.Aen(w.style),c.HbH(w.classStyle),c.FS9("href",w.dataUrl,c.B4B),c.FS9("target",w.target),c.FS9("download",w.fileName),c.R7$(2),c.JRh(c.bMT(3,9,w.fileDescription))}}let I=(()=>{var b;class y extends u.H{downloadFile(){return this.http.get(this.dataUrl,{responseType:"blob"}).pipe((0,d.T)(T=>T))}shareFileToFlutter(){this.downloadFile().subscribe(T=>{this.shareFileFlutterService.shareFileWithBlob(T,this.fileName)})}ngOnInit(){super.ngOnInit()}constructor(T,F,j){super(),this.shareFileFlutterService=T,this.commonService=F,this.http=j,this.dataUrl="",this.target="",this.fileName="",this.fileDescription="",this.classStyle="",this.style=""}}return(b=y).\u0275fac=function(T){return new(T||b)(c.rXU(C.R),c.rXU(g.R),c.rXU(h.Qq))},b.\u0275cmp=c.VBU({type:b,selectors:[["azt-download-link-item"]],inputs:{dataUrl:"dataUrl",target:"target",fileName:"fileName",fileDescription:"fileDescription",classStyle:"classStyle",style:"style"},features:[c.Vt3],ngContentSelectors:v,decls:3,vars:2,consts:[["NormalWeb",""],[4,"ngIf","ngIfElse"],[3,"click","target"],[3,"href","target","download"]],template:function(T,F){if(1&T&&(c.NAR(v),c.DNE(0,m,6,9,"ng-container",1)(1,p,5,11,"ng-template",null,0,c.C5r)),2&T){const j=c.sdS(2);c.Y8G("ngIf",F.isMobileWebView)("ngIfElse",j)}},dependencies:[O.bT,_.wp],encapsulation:2}),y})()},89121:(R,k,l)=>{"use strict";l.d(k,{z:()=>C});var d=l(59640),u=l(48891),c=l(65162);let C=(()=>{var g;class h extends d.H{constructor(){super(...arguments),this.id="default-id"}}return(g=h).\u0275fac=(()=>{let O;return function(v){return(O||(O=u.xGo(g)))(v||g)}})(),g.\u0275cmp=u.VBU({type:g,selectors:[["app-common-master-page"]],inputs:{id:"id"},features:[u.Vt3],decls:2,vars:1,consts:[[3,"id"]],template:function(_,v){1&_&&(u.j41(0,"div",0),u.nrm(1,"router-outlet"),u.k0s()),2&_&&u.FS9("id",v.id)},dependencies:[c.n3],encapsulation:2}),h})()},43277:function(R,k){var l,u;void 0!==(u="function"==typeof(l=function(){"use strict";function C(m,p,I){var b=new XMLHttpRequest;b.open("GET",m),b.responseType="blob",b.onload=function(){v(b.response,p,I)},b.onerror=function(){console.error("could not download file")},b.send()}function g(m){var p=new XMLHttpRequest;p.open("HEAD",m,!1);try{p.send()}catch{}return 200<=p.status&&299>=p.status}function h(m){try{m.dispatchEvent(new MouseEvent("click"))}catch{var p=document.createEvent("MouseEvents");p.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),m.dispatchEvent(p)}}var O="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,_=O.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),v=O.saveAs||("object"!=typeof window||window!==O?function(){}:"download"in HTMLAnchorElement.prototype&&!_?function(m,p,I){var b=O.URL||O.webkitURL,y=document.createElement("a");y.download=p=p||m.name||"download",y.rel="noopener","string"==typeof m?(y.href=m,y.origin===location.origin?h(y):g(y.href)?C(m,p,I):h(y,y.target="_blank")):(y.href=b.createObjectURL(m),setTimeout(function(){b.revokeObjectURL(y.href)},4e4),setTimeout(function(){h(y)},0))}:"msSaveOrOpenBlob"in navigator?function(m,p,I){if(p=p||m.name||"download","string"!=typeof m)navigator.msSaveOrOpenBlob(function c(m,p){return typeof p>"u"?p={autoBom:!1}:"object"!=typeof p&&(console.warn("Deprecated: Expected third argument to be a object"),p={autoBom:!p}),p.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(m.type)?new Blob(["\ufeff",m],{type:m.type}):m}(m,I),p);else if(g(m))C(m,p,I);else{var b=document.createElement("a");b.href=m,b.target="_blank",setTimeout(function(){h(b)})}}:function(m,p,I,b){if((b=b||open("","_blank"))&&(b.document.title=b.document.body.innerText="downloading..."),"string"==typeof m)return C(m,p,I);var y="application/octet-stream"===m.type,w=/constructor/i.test(O.HTMLElement)||O.safari,T=/CriOS\/[\d]+/.test(navigator.userAgent);if((T||y&&w||_)&&typeof FileReader<"u"){var F=new FileReader;F.onloadend=function(){var Q=F.result;Q=T?Q:Q.replace(/^data:[^;]*;/,"data:attachment/file;"),b?b.location.href=Q:location=Q,b=null},F.readAsDataURL(m)}else{var j=O.URL||O.webkitURL,t=j.createObjectURL(m);b?b.location=t:location.href=t,b=null,setTimeout(function(){j.revokeObjectURL(t)},4e4)}});O.saveAs=v.saveAs=v,R.exports=v})?l.apply(k,[]):l)&&(R.exports=u)}}]);