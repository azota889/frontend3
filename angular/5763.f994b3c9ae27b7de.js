"use strict";(self.webpackChunkBalacoClient=self.webpackChunkBalacoClient||[]).push([[5763],{86359:(D,j,c)=>{c.d(j,{f:()=>T});var l=c(59640),r=c(26860),m=c(76975);let T=(()=>{var g;class f extends l.H{replaceAdsContent(p){if(!p.template||!p.productAttributes)return p;let u=p.productAttributes;return u.push({id:0,productId:0,attributeId:0,value:p.name,attribute:{id:0,categoryId:0,displayName:"NAME",variableName:"NAME"}}),u.push({id:0,productId:0,attributeId:0,value:p.actionUrl??"",attribute:{id:0,categoryId:0,displayName:"URL",variableName:"URL"}}),u.push({id:0,productId:0,attributeId:0,value:p.description??"",attribute:{id:0,categoryId:0,displayName:"DESCRIPTION",variableName:"DESCRIPTION"}}),u.push({id:0,productId:0,attributeId:0,value:p.thumbnailUrl??"",attribute:{id:0,categoryId:0,displayName:"THUMBNAIL",variableName:"THUMBNAIL"}}),u.forEach(_=>{_.attribute?.variableName&&(p.template=this.commonService.replaceAll(p.template,"${"+_.attribute.variableName.toUpperCase()+"}",_.value))}),p}ngOnChanges(){this.obj=this.replaceAdsContent(this.obj)}}return(g=f).\u0275fac=function(){let I;return function(u){return(I||(I=r.xGo(g)))(u||g)}}(),g.\u0275cmp=r.VBU({type:g,selectors:[["azt-frontend-ads-item"]],inputs:{obj:"obj"},features:[r.Vt3,r.OA$],decls:2,vars:3,consts:[[3,"innerHTML"]],template:function(p,u){if(1&p&&(r.nrm(0,"div",0),r.nI1(1,"safeNormalHtmlContent")),2&p){let _;r.Y8G("innerHTML",r.bMT(1,1,null!==(_=u.obj.template)&&void 0!==_?_:""),r.npT)}},dependencies:[m._y],encapsulation:2}),f})()},75421:(D,j,c)=>{c.d(j,{u:()=>g});var l=c(89163),r=c(33887),m=c(26860),T=c(76975);let g=(()=>{var f;class I extends r._{btnCloseDialog(){this.dialogRef.close(!1)}confirmDialog(){this.dialogRef.close(!0)}constructor(u,_){super(_,u),this.dialogRef=u,this.data=_}}return(f=I).\u0275fac=function(u){return new(u||f)(m.rXU(l.CP,8),m.rXU(l.Vh,8))},f.\u0275cmp=m.VBU({type:f,selectors:[["azt-dialog-danger"]],features:[m.Vt3],decls:12,vars:7,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5"],[1,"text-md","flex"],[1,"text-md",3,"innerHtml"],[1,"p-3","text-right"],["azt-track-service","azt-dialog-danger-9EJYp6jGzr",1,"btn","w-24","btn-secondary","mr-2",3,"click"],["azt-track-service","azt-dialog-danger-ffMh3NrPRC",1,"btn","w-24","btn-danger",3,"click"]],template:function(u,_){1&u&&(m.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),m.nrm(4,"span",4),m.k0s()()(),m.j41(5,"div",5)(6,"button",6),m.bIt("click",function(){return _.btnCloseDialog()}),m.EFF(7),m.nI1(8,"mytranslate"),m.k0s(),m.j41(9,"button",7),m.bIt("click",function(){return _.confirmDialog()}),m.EFF(10),m.nI1(11,"mytranslate"),m.k0s()()()),2&u&&(m.R7$(4),m.Y8G("innerHtml",_.data.content,m.npT),m.R7$(3),m.SpI(" ",m.bMT(8,3,"lang_auto_huy")," "),m.R7$(3),m.SpI(" ",m.bMT(11,5,"lang_auto_xac_nhan")," "))},dependencies:[T.wp],encapsulation:2}),I})()},20013:(D,j,c)=>{c.d(j,{T:()=>p});var l=c(26860),r=c(9516),m=c(54460),T=c(52811);function g(u,_){1&u&&l.SdG(0,0,["*ngIf","!isUploadFile"])}function f(u,_){1&u&&(l.j41(0,"span",5),l.nrm(1,"azt-loading-ui"),l.k0s())}const I=["*"];let p=(()=>{var u;class _ extends r.L{constructor(){super(...arguments),this.uploadComplete=new l.bkB}emitUploadComplete(k){k.length>0&&this.uploadComplete.emit(k[0])}}return(u=_).\u0275fac=function(){let F;return function(A){return(F||(F=l.xGo(u)))(A||u)}}(),u.\u0275cmp=l.VBU({type:u,selectors:[["azt-upload-single-box"]],outputs:{uploadComplete:"uploadComplete"},features:[l.Vt3],ngContentSelectors:I,decls:6,vars:3,consts:[[1,"flex","items-center","justify-center","h-full",3,"click"],["type","file","id","box-left-file-input",1,"form-control","file-input",2,"display","none",3,"accept","change","cancel"],["formChoseFile",""],[4,"ngIf"],["class","w-4 h-4 inline-block",4,"ngIf"],[1,"w-4","h-4","inline-block"]],template:function(k,A){if(1&k){const O=l.RV6();l.NAR(),l.j41(0,"div",0),l.bIt("click",function(){l.eBV(O);const t=l.sdS(2);return l.Njj(A.onOpenFileDictionary()&&t.click())}),l.j41(1,"input",1,2),l.bIt("change",function(t){return A.onFileSelected(t)})("cancel",function(t){return A.onCancelSelect(t)}),l.k0s(),l.DNE(3,g,1,0,"ng-content",3),l.j41(4,"div"),l.DNE(5,f,2,0,"span",4),l.k0s()()}2&k&&(l.R7$(1),l.FS9("accept",A.fileType),l.R7$(2),l.Y8G("ngIf",!A.isUploadFile),l.R7$(2),l.Y8G("ngIf",A.isUploadFile))},dependencies:[m.bT,T.R],encapsulation:2}),_})()},95763:(D,j,c)=>{c.r(j),c.d(j,{AzotaAdsModule:()=>oe});var l=c(54460),r=c(10936),m=c(65162),T=c(69223),g=c(15343),f=c(10123),I=c(5502),p=c(21656),u=c(70050),_=c(7050),F=c(91100),k=c(43234),A=c(1133),O=c(59640),M=c(75421),t=c(26860),U=c(46899),h=c(67551),S=c(18718),R=c(96451),C=c(76975);function at(a,s){if(1&a&&t.nrm(0,"azt-loading-effect",5),2&a){const e=t.XpG();t.Y8G("currentStatusObj",e.statusObj)}}const nt=function(a){return{backTo:a}},w=function(){return{"mr-1":!0}};function ot(a,s){if(1&a){const e=t.RV6();t.j41(0,"tr")(1,"td",23),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td",24)(8,"button",25),t.nI1(9,"navigationLocalize"),t.nrm(10,"lucide-icon",26),t.j41(11,"span",27),t.EFF(12),t.nI1(13,"mytranslate"),t.k0s()(),t.j41(14,"button",28),t.bIt("click",function(){const i=t.eBV(e).$implicit,d=t.XpG(3);return t.Njj(d.handelUpdateAdsCategory(i.id))}),t.nrm(15,"lucide-icon",29),t.j41(16,"span",27),t.EFF(17),t.nI1(18,"mytranslate"),t.k0s()(),t.j41(19,"button",30),t.bIt("click",function(){const o=t.eBV(e),i=o.$implicit,d=o.index,v=t.XpG(3);return t.Njj(v.handleRemoveAdsCategory(i,d))}),t.nrm(20,"lucide-icon",31),t.j41(21,"span",27),t.EFF(22),t.nI1(23,"mytranslate"),t.k0s()()()()}if(2&a){const e=s.$implicit,n=s.index,o=t.XpG(3);t.R7$(2),t.JRh(n+1),t.R7$(2),t.JRh(e.name),t.R7$(2),t.JRh(e.description),t.R7$(2),t.Y8G("routerLink",t.bMT(9,11,"/azota-ads/ads-list/"+e.id))("queryParams",t.eq3(19,nt,o.backTo)),t.R7$(2),t.Y8G("ngClass",t.lJ4(21,w)),t.R7$(2),t.JRh(t.bMT(13,13,"lang_common_view")),t.R7$(3),t.Y8G("ngClass",t.lJ4(22,w)),t.R7$(2),t.JRh(t.bMT(18,15,"lang_auto_sua")),t.R7$(3),t.Y8G("ngClass",t.lJ4(23,w)),t.R7$(2),t.JRh(t.bMT(23,17,"lang_auto_xoa"))}}function rt(a,s){if(1&a&&(t.qex(0),t.DNE(1,ot,24,24,"tr",22),t.bVm()),2&a){const e=t.XpG(2);t.R7$(1),t.Y8G("ngForOf",e.adsCategoryList)}}function st(a,s){1&a&&(t.j41(0,"tr",32)(1,"td",33),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s()()),2&a&&(t.R7$(2),t.SpI(" ",t.bMT(3,1,"lang_homework_homework_list_not_found")," "))}function it(a,s){if(1&a){const e=t.RV6();t.j41(0,"div",6)(1,"div",7)(2,"h3",8),t.EFF(3),t.nI1(4,"mytranslate"),t.k0s(),t.j41(5,"div",9)(6,"button",10),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.handelCreateAdsCategory())}),t.j41(7,"span",11),t.nrm(8,"lucide-icon",12),t.k0s(),t.EFF(9),t.nI1(10,"mytranslate"),t.k0s()()(),t.j41(11,"div",13)(12,"div",14)(13,"drag-scroll")(14,"table",15)(15,"thead")(16,"tr",16)(17,"th",17),t.EFF(18),t.nI1(19,"mytranslate"),t.k0s(),t.j41(20,"th",18),t.EFF(21),t.nI1(22,"mytranslate"),t.k0s(),t.j41(23,"th"),t.EFF(24),t.nI1(25,"mytranslate"),t.k0s(),t.j41(26,"th",19),t.EFF(27),t.nI1(28,"mytranslate"),t.k0s()()(),t.j41(29,"tbody"),t.DNE(30,rt,2,1,"ng-container",20),t.DNE(31,st,4,3,"ng-template",null,21,t.C5r),t.k0s()()()()()()}if(2&a){const e=t.sdS(32),n=t.XpG();t.R7$(3),t.SpI(" ",t.bMT(4,8,"lang_azt_advertisement_category_list")," "),t.R7$(6),t.SpI(" ",t.bMT(10,10,"lang_azt_add_category")," "),t.R7$(9),t.JRh(t.bMT(19,12,"lang_auto_STT")),t.R7$(3),t.JRh(t.bMT(22,14,"lang_azt_category_name")),t.R7$(3),t.JRh(t.bMT(25,16,"lang_auto_mo_ta")),t.R7$(3),t.JRh(t.bMT(28,18,"lang_auto_hanh_dong")),t.R7$(3),t.Y8G("ngIf",n.adsCategoryList.length)("ngIfElse",e)}}const V=function(a){return[a]};let lt=(()=>{var a;class s extends O.H{handleRemoveAdsCategory(n,o){const i=`${this.commonService.myTranslateInstant("lang_azt_are_you_sure_you_want_to_delete_category")} <b>${n.name}<b/>?`;this.dialogService.open(M.u,{data:{content:i},restoreFocus:!1,width:"500px"}).afterClosed().subscribe(d=>{d&&this.waitDestroy(this.advertisingService.apiAdvertisingCategoriesIdDelete(n.id).subscribe(v=>{if(!v.success)return this.errorStatusObj(v.message,!0);this.adsCategoryList.splice(o,1),this.successStatusObj("lang_admin_guide_delete_success",!0)}))})}handelCreateAdsCategory(){this.myNavigationWithQueryString("/azota-ads/create-ads-category",`?backto=${this.backTo}`)}handelUpdateAdsCategory(n){this.myNavigationWithQueryString(`/azota-ads/update-ads-category/${n}`,`?backto=${this.backTo}`)}getData(){this.initStatusObj(),this.waitDestroy(this.advertisingService.apiAdvertisingCategoriesGet().subscribe(n=>{if(!n.success)return this.errorStatusObj(n.message,!0);this.adsCategoryList=n.data?.objs??[],this.successStatusObj()}))}ngOnInit(){super.ngOnInit(),this.getData()}constructor(n,o){super(),this.dialogService=n,this.advertisingService=o,this.adsCategoryList=[],this.backTo="/azota-ads/ads-category"}}return(a=s).\u0275fac=function(n){return new(n||a)(t.rXU(U.i),t.rXU(h.yG))},a.\u0275cmp=t.VBU({type:a,selectors:[["ads-category"]],features:[t.Vt3],decls:13,vars:19,consts:[[3,"headerBackToLink"],[1,"mb-3","mt-3"],[1,"clickable","btn","btn-info","mr-3",3,"routerLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],["doneLoading",""],[3,"currentStatusObj"],[1,"ads-category","mt-5"],[1,"flex","flex-col","sm:flex-row","sm:items-center"],[1,"text-lg","font-medium","mr-4"],[1,"mt-2","sm:mt-0","sm:ml-auto"],[1,"btn","btn-primary",3,"click"],[1,"w-5","h-5","mr-2","inline-block"],["name","plus","size","20"],[1,"mt-3"],[1,"intro-y","h-full"],["drag-scroll-item","",1,"table","table-report","mt-2",2,"white-space","initial","display","table"],[1,"box"],[1,"whitespace-nowrap","text-center","p-2",2,"width","50px"],[2,"width","300px"],[1,"text-center","whitespace-nowrap",2,"width","100px"],[4,"ngIf","ngIfElse"],["emptyData",""],[4,"ngFor","ngForOf"],[1,"text-center"],[1,"text-center","whitespace-nowrap"],[1,"btn","btn-sm","btn-success-soft","mr-2",3,"routerLink","queryParams"],["name","eye","size","18",3,"ngClass"],[1,"azt-hidden","md:inline-block"],[1,"btn","btn-sm","btn-primary-soft","mr-2",3,"click"],["name","square-pen","size","18",3,"ngClass"],[1,"btn","btn-sm","btn-danger-soft",3,"click"],["name","trash-2","size","18",3,"ngClass"],[2,"height","80px"],["colspan","4",1,"text-center","p-5"]],template:function(n,o){if(1&n&&(t.j41(0,"teacher-layout",0)(1,"div",1)(2,"a",2),t.nI1(3,"navigationLocalize"),t.EFF(4),t.nI1(5,"mytranslate"),t.k0s(),t.j41(6,"a",2),t.nI1(7,"navigationLocalize"),t.EFF(8),t.nI1(9,"mytranslate"),t.k0s()(),t.DNE(10,at,1,1,"azt-loading-effect",3),t.DNE(11,it,33,20,"ng-template",null,4,t.C5r),t.k0s()),2&n){const i=t.sdS(12);t.Y8G("headerBackToLink","/super-role/admin-tool"),t.R7$(2),t.Y8G("routerLink",t.eq3(15,V,t.bMT(3,7,"/azota-ads/ads-category"))),t.R7$(2),t.SpI(" ",t.bMT(5,9,"lang_azt_manage_categories")," "),t.R7$(2),t.Y8G("routerLink",t.eq3(17,V,t.bMT(7,11,"/azota-ads/ads-list/0"))),t.R7$(2),t.SpI(" ",t.bMT(9,13,"lang_azt_manage_ads")," "),t.R7$(2),t.Y8G("ngIf",1==o.statusObj.loading)("ngIfElse",i)}},dependencies:[m.Wk,l.YU,l.Sq,l.bT,S.K,R.Q,g.WGl,f.jd,f.Ew,C.F2,C.wp],encapsulation:2}),s})();var b=c(15766),x=c(47426),E=c(74960),N=c(4375),B=c(81587);function ct(a,s){1&a&&(t.j41(0,"div",25)(1,"span"),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s()()),2&a&&(t.R7$(2),t.SpI("",t.bMT(3,1,"lang_azt_please_enter_category_name"),"!"))}function dt(a,s){if(1&a&&(t.j41(0,"mat-option",26),t.EFF(1),t.k0s()),2&a){const e=s.$implicit;t.Y8G("value",e),t.R7$(1),t.SpI(" ",e," ")}}function mt(a,s){1&a&&(t.j41(0,"div",25)(1,"span"),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s()()),2&a&&(t.R7$(2),t.SpI("",t.bMT(3,1,"lang_azt_please_enter_information_field"),"!"))}const J=function(a){return{"border-danger":a}};function ut(a,s){if(1&a){const e=t.RV6();t.j41(0,"div",27)(1,"div",28)(2,"div",29)(3,"div",30)(4,"span",31),t.EFF(5),t.nI1(6,"mytranslate"),t.k0s(),t.nrm(7,"input",32),t.nI1(8,"mytranslate"),t.k0s(),t.j41(9,"div",33)(10,"button",34),t.bIt("click",function(){const i=t.eBV(e).index,d=t.XpG();return t.Njj(d.removeFileForm(i))}),t.nrm(11,"lucide-icon",35),t.k0s()()(),t.j41(12,"div",36)(13,"div",7)(14,"div",37),t.EFF(15),t.nI1(16,"mytranslate"),t.k0s(),t.nrm(17,"input",38),t.nI1(18,"mytranslate"),t.k0s(),t.j41(19,"div",10)(20,"label",39),t.EFF(21),t.nI1(22,"mytranslate"),t.k0s(),t.j41(23,"div",7),t.nrm(24,"textarea",40),t.nI1(25,"mytranslate"),t.k0s()()()()()}if(2&a){const e=s.$implicit,n=s.index,o=t.XpG();t.R7$(1),t.Y8G("formGroup",e),t.R7$(4),t.SpI(" ",t.bMT(6,10,"lang_azt_field_name")," "),t.R7$(2),t.FS9("placeholder",t.bMT(8,12,"lang_azt_field_name")+"..."),t.Y8G("ngClass",t.eq3(22,J,e.controls.displayName.errors&&e.controls.displayName.touched)),t.R7$(3),t.Y8G("disabled",0===n&&1===o.form.controls.attributesList.length),t.R7$(5),t.SpI(" ",t.bMT(16,14,"lang_azt_variable_name")," "),t.R7$(2),t.FS9("placeholder",t.bMT(18,16,"lang_azt_variable_name")+"..."),t.Y8G("ngClass",t.eq3(24,J,e.controls.variableName.errors&&e.controls.variableName.touched)),t.R7$(4),t.JRh(t.bMT(22,18,"lang_azt_field_description")),t.R7$(3),t.FS9("placeholder",t.bMT(25,20,"lang_azt_field_description")+"...")}}const pt=function(){return{"mr-1":!0}};let _t=(()=>{var a;class s extends O.H{saveAdsCategory(){if(this.form.invalid)return this.form.markAllAsTouched();this.initStatusObj();const n=this.convertFormToParam();this.waitDestroy(this.advertisingService.apiAdvertisingCategoriesPost(n).subscribe(o=>{if(!o.success)return this.errorStatusObj(o.message,!0);this.myNavigation(`/azota-ads/create-ads-template/${o.data?.id}`)}))}handleDestroy(){this.myNavigation(this.backToLink)}addNewFieldForm(){this.form.controls.attributesList.push(this.createFieldForm("","",""))}removeFileForm(n){this.form.controls.attributesList.removeAt(n)}createFieldForm(n,o,i){return new r.gE({displayName:new r.MJ(n,{nonNullable:!0,validators:[r.k0.required,b.M.noWhiteSpace]}),variableName:new r.MJ(o,{nonNullable:!0,validators:[r.k0.required,b.M.noWhiteSpace]}),description:new r.MJ(i,{nonNullable:!0}),valueType:new r.MJ("string",{nonNullable:!0,validators:[r.k0.required,b.M.noWhiteSpace]}),sourceType:new r.MJ("free",{nonNullable:!0,validators:[r.k0.required,b.M.noWhiteSpace]})})}convertFormToParam(){const{attributesList:n,name:o,adsPosition:i,desc:d}=this.form.controls,v=n.controls.map(y=>({displayName:y.controls.displayName.value,variableName:y.controls.variableName.value.toUpperCase(),description:y.controls.description.value,valueType:y.controls.valueType.value,sourceType:y.controls.sourceType.value}));return{name:o.value,position:i.value,description:d.value,attributes:v}}ngOnInit(){super.ngOnInit(),this.addNewFieldForm(),this.backToLink=this.commonService.getMyQueryParam("backto")??"/azota-ads/ads-category"}constructor(n){super(),this.advertisingService=n,this.backToLink="",this.listPositions=this.commonService.getEnumValues(h.rA),this.form=new r.gE({name:new r.MJ("",{nonNullable:!0,validators:[r.k0.required,b.M.noWhiteSpace]}),adsPosition:new r.MJ(h.rA.ALLPOSITION,{nonNullable:!0,validators:[r.k0.required]}),desc:new r.MJ("",{nonNullable:!0,validators:[r.k0.required]}),attributesList:new r.Yp([])})}}return(a=s).\u0275fac=function(n){return new(n||a)(t.rXU(h.yG))},a.\u0275cmp=t.VBU({type:a,selectors:[["create-ads-category"]],features:[t.Vt3],decls:49,vars:39,consts:[[3,"headerBackToLink"],[1,"mt-5"],[1,"text-md","uppercase","font-medium"],[1,"box","mt-4","p-5"],[3,"formGroup"],[1,"azt-form-group"],["for","name",1,"form-label","font-medium"],[1,"input-group"],["type","text","id","name","formControlName","name",1,"form-control",3,"placeholder"],["class","text-danger text-xs font-medium mt-2",4,"ngIf"],[1,"azt-form-group","mt-3"],["id","bankIdInput","appearance","outline"],[3,"formControl"],[3,"value",4,"ngFor","ngForOf"],["for","desc",1,"form-label","font-medium"],["formControlName","desc","name","desc","id","desc",1,"form-control",2,"height","80px",3,"placeholder"],[1,"flex","flex-col","sm:flex-row","sm:items-center"],["for","name",1,"form-label","font-medium","mr-2"],[1,"btn","btn-sm","btn-primary-soft","mt-2","sm:mt-0","ml-auto",3,"click"],["name","plus","size","18",3,"ngClass"],[1,"grid","grid-cols-12","gap-4","mt-3"],["class","col-span-12 md:col-span-6",4,"ngFor","ngForOf"],[1,"flex","ml-auto","w-full","justify-end","mt-3"],["type","button",1,"btn","btn-secondary","min-width-100","mr-2",3,"click"],[1,"btn","btn-primary","min-width-100",3,"click"],[1,"text-danger","text-xs","font-medium","mt-2"],[3,"value"],[1,"col-span-12","md:col-span-6"],[1,"border","border-slate-200","dark:border-darkmode-400","rounded-md","pb-1",3,"formGroup"],[1,"p-2","bg-slate-100","dark:bg-darkmode-400","flex","items-center"],[1,"flex","items-center"],[1,"mr-2"],["type","text","formControlName","displayName",1,"form-control","form-control-sm",2,"width","9rem",3,"ngClass","placeholder"],[1,"ml-auto"],[1,"btn","btn-sm","btn-outline-danger",3,"disabled","click"],["name","trash-2","size","18"],[1,"p-3"],[1,"input-group-text","whitespace-nowrap",2,"width","125px"],["type","text","formControlName","variableName",1,"form-control","form-control-sm",3,"ngClass","placeholder"],["for","name",1,"form-label"],["type","text","formControlName","description",1,"form-control","form-control-sm",2,"height","60px",3,"placeholder"]],template:function(n,o){1&n&&(t.j41(0,"teacher-layout",0)(1,"div",1)(2,"h3",2),t.EFF(3),t.nI1(4,"mytranslate"),t.k0s(),t.j41(5,"div",3)(6,"form",4)(7,"div",5)(8,"label",6),t.EFF(9),t.nI1(10,"mytranslate"),t.k0s(),t.j41(11,"div",7),t.nrm(12,"input",8),t.nI1(13,"mytranslate"),t.k0s(),t.DNE(14,ct,4,3,"div",9),t.k0s(),t.j41(15,"div",10)(16,"label",6),t.EFF(17),t.nI1(18,"mytranslate"),t.k0s(),t.j41(19,"mat-form-field",11)(20,"mat-select",12),t.DNE(21,dt,2,2,"mat-option",13),t.k0s()()(),t.j41(22,"div",10)(23,"label",14),t.EFF(24),t.nI1(25,"mytranslate"),t.k0s(),t.j41(26,"div",7),t.nrm(27,"textarea",15),t.nI1(28,"mytranslate"),t.k0s(),t.DNE(29,mt,4,3,"div",9),t.k0s(),t.j41(30,"div",10)(31,"div",16)(32,"label",17),t.EFF(33),t.nI1(34,"mytranslate"),t.k0s(),t.j41(35,"button",18),t.bIt("click",function(){return o.addNewFieldForm()}),t.nrm(36,"lucide-icon",19),t.EFF(37),t.nI1(38,"mytranslate"),t.k0s()(),t.j41(39,"div",20),t.DNE(40,ut,26,26,"div",21),t.k0s()()()(),t.j41(41,"div",22)(42,"button",23),t.bIt("click",function(){return o.handleDestroy()}),t.EFF(43),t.nI1(44,"mytranslate"),t.k0s(),t.j41(45,"button",24),t.bIt("click",function(){return o.saveAdsCategory()}),t.j41(46,"span"),t.EFF(47),t.nI1(48,"mytranslate"),t.k0s()()()()()),2&n&&(t.Y8G("headerBackToLink",o.backToLink),t.R7$(3),t.SpI(" ",t.bMT(4,18,"lang_azt_add_category")," "),t.R7$(3),t.Y8G("formGroup",o.form),t.R7$(3),t.JRh(t.bMT(10,20,"lang_azt_category_name")),t.R7$(3),t.FS9("placeholder",t.bMT(13,22,"lang_azt_enter_category_name")),t.R7$(2),t.Y8G("ngIf",o.form.controls.name.errors&&o.form.controls.name.touched),t.R7$(3),t.JRh(t.bMT(18,24,"lang_azt_category_ads_position")),t.R7$(3),t.Y8G("formControl",o.form.controls.adsPosition),t.R7$(1),t.Y8G("ngForOf",o.listPositions),t.R7$(3),t.JRh(t.bMT(25,26,"lang_auto_mo_ta")),t.R7$(3),t.FS9("placeholder",t.bMT(28,28,"lang_core_nhap_mo_ta")),t.R7$(2),t.Y8G("ngIf",o.form.controls.desc.errors&&o.form.controls.desc.touched),t.R7$(4),t.JRh(t.bMT(34,30,"lang_azt_information_field")),t.R7$(3),t.Y8G("ngClass",t.lJ4(38,pt)),t.R7$(1),t.SpI(" ",t.bMT(38,32,"lang_azt_add_information_field")," "),t.R7$(3),t.Y8G("ngForOf",o.form.controls.attributesList.controls),t.R7$(3),t.SpI(" ",t.bMT(44,34,"lang_button_cancel")," "),t.R7$(4),t.JRh(t.bMT(48,36,"lang_button_save")))},dependencies:[l.YU,l.Sq,l.bT,r.qT,r.me,r.BC,r.cb,x.wT,E.rl,N.VO,r.l_,r.j4,r.JD,B.t,R.Q,g.WGl,C.wp],encapsulation:2}),s})();function gt(a,s){if(1&a&&t.nrm(0,"azt-loading-effect",3),2&a){const e=t.XpG();t.Y8G("currentStatusObj",e.statusObj)}}function bt(a,s){1&a&&(t.j41(0,"div",26)(1,"span"),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s()()),2&a&&(t.R7$(2),t.SpI("",t.bMT(3,1,"lang_azt_please_enter_category_name"),"!"))}function ft(a,s){if(1&a&&(t.j41(0,"mat-option",27),t.EFF(1),t.k0s()),2&a){const e=s.$implicit;t.Y8G("value",e),t.R7$(1),t.SpI(" ",e," ")}}function ht(a,s){1&a&&(t.j41(0,"div",26)(1,"span"),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s()()),2&a&&(t.R7$(2),t.SpI("",t.bMT(3,1,"lang_azt_please_enter_information_field"),"!"))}const X=function(a){return{"border-danger":a}};function vt(a,s){if(1&a){const e=t.RV6();t.j41(0,"div",28)(1,"div",29)(2,"div",30)(3,"div",31)(4,"span",32),t.EFF(5),t.nI1(6,"mytranslate"),t.k0s(),t.nrm(7,"input",33),t.nI1(8,"mytranslate"),t.k0s(),t.j41(9,"div",34)(10,"button",35),t.bIt("click",function(){const i=t.eBV(e).index,d=t.XpG(2);return t.Njj(d.removeFileForm(i))}),t.j41(11,"span",36),t.nrm(12,"lucide-icon",37),t.k0s()()()(),t.j41(13,"div",38)(14,"div",10)(15,"div",39),t.EFF(16),t.nI1(17,"mytranslate"),t.k0s(),t.nrm(18,"input",40),t.nI1(19,"mytranslate"),t.k0s(),t.j41(20,"div",13)(21,"label",41),t.EFF(22),t.nI1(23,"mytranslate"),t.k0s(),t.j41(24,"div",10),t.nrm(25,"textarea",42),t.nI1(26,"mytranslate"),t.k0s()()()()()}if(2&a){const e=s.$implicit,n=s.index,o=t.XpG(2);t.R7$(1),t.Y8G("formGroup",e),t.R7$(4),t.SpI(" ",t.bMT(6,10,"lang_azt_field_name")," "),t.R7$(2),t.FS9("placeholder",t.bMT(8,12,"lang_azt_field_name")+"..."),t.Y8G("ngClass",t.eq3(22,X,e.controls.displayName.errors&&e.controls.displayName.touched)),t.R7$(3),t.Y8G("disabled",0===n&&1===o.form.controls.attributesList.length),t.R7$(6),t.SpI(" ",t.bMT(17,14,"lang_azt_variable_name")," "),t.R7$(2),t.FS9("placeholder",t.bMT(19,16,"lang_azt_variable_name")+"..."),t.Y8G("ngClass",t.eq3(24,X,e.controls.variableName.errors&&e.controls.variableName.touched)),t.R7$(4),t.JRh(t.bMT(23,18,"lang_azt_field_description")),t.R7$(3),t.FS9("placeholder",t.bMT(26,20,"lang_azt_field_description")+"...")}}function Ct(a,s){if(1&a){const e=t.RV6();t.j41(0,"div",4)(1,"h3",5),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s(),t.j41(4,"div",6)(5,"form",7)(6,"div",8)(7,"label",9),t.EFF(8),t.nI1(9,"mytranslate"),t.k0s(),t.j41(10,"div",10),t.nrm(11,"input",11),t.nI1(12,"mytranslate"),t.k0s(),t.DNE(13,bt,4,3,"div",12),t.k0s(),t.j41(14,"div",13)(15,"label",9),t.EFF(16),t.nI1(17,"mytranslate"),t.k0s(),t.j41(18,"mat-form-field",14)(19,"mat-select",15),t.DNE(20,ft,2,2,"mat-option",16),t.k0s()()(),t.j41(21,"div",13)(22,"label",17),t.EFF(23),t.nI1(24,"mytranslate"),t.k0s(),t.j41(25,"div",10),t.nrm(26,"textarea",18),t.nI1(27,"mytranslate"),t.k0s(),t.DNE(28,ht,4,3,"div",12),t.k0s(),t.j41(29,"div",13)(30,"div",19)(31,"label",20),t.EFF(32),t.nI1(33,"mytranslate"),t.k0s()(),t.j41(34,"div",21),t.DNE(35,vt,27,26,"div",22),t.k0s()()()(),t.j41(36,"div",23)(37,"button",24),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.handleDestroy())}),t.EFF(38),t.nI1(39,"mytranslate"),t.k0s(),t.j41(40,"button",25),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.updateAdsCategory())}),t.j41(41,"span"),t.EFF(42),t.nI1(43,"mytranslate"),t.k0s()()()()}if(2&a){const e=t.XpG();t.R7$(2),t.SpI(" ",t.bMT(3,15,"lang_azt_update_category")," "),t.R7$(3),t.Y8G("formGroup",e.form),t.R7$(3),t.JRh(t.bMT(9,17,"lang_azt_category_name")),t.R7$(3),t.FS9("placeholder",t.bMT(12,19,"lang_azt_enter_category_name")),t.R7$(2),t.Y8G("ngIf",e.form.controls.name.errors&&e.form.controls.name.touched),t.R7$(3),t.JRh(t.bMT(17,21,"lang_azt_category_ads_position")),t.R7$(3),t.Y8G("formControl",e.form.controls.adsPosition),t.R7$(1),t.Y8G("ngForOf",e.listPositions),t.R7$(3),t.JRh(t.bMT(24,23,"lang_auto_mo_ta")),t.R7$(3),t.FS9("placeholder",t.bMT(27,25,"lang_core_nhap_mo_ta")),t.R7$(2),t.Y8G("ngIf",e.form.controls.desc.errors&&e.form.controls.desc.touched),t.R7$(4),t.JRh(t.bMT(33,27,"lang_azt_information_field")),t.R7$(3),t.Y8G("ngForOf",e.form.controls.attributesList.controls),t.R7$(3),t.SpI(" ",t.bMT(39,29,"lang_button_cancel")," "),t.R7$(4),t.JRh(t.bMT(43,31,"lang_button_update"))}}let yt=(()=>{var a;class s extends O.H{updateAdsCategory(){if(this.form.invalid)return this.form.markAllAsTouched();const n=this.convertFormToParam();this.waitDestroy(this.advertisingService.apiAdvertisingCategoriesIdPut(this.categoryId,n).subscribe(o=>{if(!o.success)return this.errorStatusObj(o.message,!0);this.showSuccessSnack("C\u1eadp nh\u1eadt danh m\u1ee5c th\xe0nh c\xf4ng!")}))}handleDestroy(){this.myNavigation(this.backToLink)}addNewFieldForm(){this.form.controls.attributesList.push(this.createFieldForm("","",""))}removeFileForm(n){this.form.controls.attributesList.removeAt(n)}getData(){this.initStatusObj(),this.waitDestroy(this.advertisingService.apiAdvertisingCategoriesIdGet(this.categoryId).subscribe(n=>{if(!n.success)return this.errorStatusObj(n.message,!0);const o=n.data;this.form.controls.name.setValue(o?.name??""),this.form.controls.adsPosition.setValue(this.commonService.getEnumTypeWithDefault(h.rA,o?.position??"",h.rA.ALLPOSITION)),this.form.controls.desc.setValue(o?.description??""),o?.attributes?.forEach(i=>{this.form.controls.attributesList.push(this.createFieldForm(i.displayName,i.variableName,i.description??"",i.id))}),this.successStatusObj()}))}createFieldForm(n,o,i,d){return new r.gE({id:new r.MJ(d,{nonNullable:!0}),displayName:new r.MJ(n,{nonNullable:!0,validators:[r.k0.required,b.M.noWhiteSpace]}),variableName:new r.MJ(o,{nonNullable:!0,validators:[r.k0.required,b.M.noWhiteSpace]}),description:new r.MJ(i,{nonNullable:!0}),valueType:new r.MJ("string",{nonNullable:!0,validators:[r.k0.required,b.M.noWhiteSpace]}),sourceType:new r.MJ("free",{nonNullable:!0,validators:[r.k0.required,b.M.noWhiteSpace]})})}convertFormToParam(){const{attributesList:n,name:o,adsPosition:i,desc:d}=this.form.controls,v=n.controls.map(y=>({id:y.controls.id?.value??0,displayName:y.controls.displayName.value,variableName:y.controls.variableName.value.toUpperCase(),description:y.controls.description.value,valueType:y.controls.valueType.value,sourceType:y.controls.sourceType.value}));return{name:o.value,position:i.value,description:d.value,attributes:v}}ngOnInit(){super.ngOnInit(),this.categoryId=Number(this.commonService.getMyParam(this.activeRoute,"categoryId")??0),this.backToLink=this.commonService.getMyQueryParam("backto")??"/azota-ads/ads-category",this.getData()}constructor(n,o){super(),this.advertisingService=n,this.activeRoute=o,this.backToLink="",this.categoryId=0,this.listPositions=this.commonService.getEnumValues(h.rA),this.form=new r.gE({name:new r.MJ("",{nonNullable:!0,validators:[r.k0.required,b.M.noWhiteSpace]}),adsPosition:new r.MJ(h.rA.ALLPOSITION,{nonNullable:!0,validators:[r.k0.required]}),desc:new r.MJ("",{nonNullable:!0,validators:[r.k0.required]}),attributesList:new r.Yp([])})}}return(a=s).\u0275fac=function(n){return new(n||a)(t.rXU(h.yG),t.rXU(m.nX))},a.\u0275cmp=t.VBU({type:a,selectors:[["update-ads-category"]],features:[t.Vt3],decls:4,vars:3,consts:[[3,"headerBackToLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],["doneLoading",""],[3,"currentStatusObj"],[1,"mt-5"],[1,"text-md","uppercase","font-medium"],[1,"box","mt-4","p-5"],[3,"formGroup"],[1,"azt-form-group"],["for","name",1,"form-label","font-medium"],[1,"input-group"],["type","text","id","name","formControlName","name",1,"form-control",3,"placeholder"],["class","text-danger text-xs font-medium mt-2",4,"ngIf"],[1,"azt-form-group","mt-3"],["id","bankIdInput","appearance","outline"],[3,"formControl"],[3,"value",4,"ngFor","ngForOf"],["for","desc",1,"form-label","font-medium"],["formControlName","desc","name","desc","id","desc",1,"form-control",2,"height","80px",3,"placeholder"],[1,"flex","flex-col","sm:flex-row","sm:items-center"],["for","name",1,"form-label","font-medium","mr-2"],[1,"grid","grid-cols-12","gap-4","mt-3"],["class","col-span-12 md:col-span-6",4,"ngFor","ngForOf"],[1,"flex","ml-auto","w-full","justify-end","mt-3"],["type","button",1,"btn","btn-secondary","min-width-100","mr-2",3,"click"],[1,"btn","btn-primary","min-width-100",3,"click"],[1,"text-danger","text-xs","font-medium","mt-2"],[3,"value"],[1,"col-span-12","md:col-span-6"],[1,"border","border-slate-200","dark:border-darkmode-400","rounded-md","pb-1",3,"formGroup"],[1,"p-2","bg-slate-100","dark:bg-darkmode-400","flex","items-center"],[1,"flex","items-center"],[1,"mr-2"],["type","text","formControlName","displayName",1,"form-control","form-control-sm",2,"width","9rem",3,"ngClass","placeholder"],[1,"ml-auto"],[1,"btn","btn-sm","btn-outline-danger",3,"disabled","click"],[1,"w-4","h-4","inline-block"],["name","trash-2","size","18"],[1,"p-3"],[1,"input-group-text","whitespace-nowrap",2,"width","125px"],["type","text","formControlName","variableName",1,"form-control","form-control-sm",3,"ngClass","placeholder"],["for","name",1,"form-label"],["type","text","formControlName","description",1,"form-control","form-control-sm",2,"height","60px",3,"placeholder"]],template:function(n,o){if(1&n&&(t.j41(0,"teacher-layout",0),t.DNE(1,gt,1,1,"azt-loading-effect",1),t.DNE(2,Ct,44,33,"ng-template",null,2,t.C5r),t.k0s()),2&n){const i=t.sdS(3);t.Y8G("headerBackToLink",o.backToLink),t.R7$(1),t.Y8G("ngIf",1==o.statusObj.loading)("ngIfElse",i)}},dependencies:[l.YU,l.Sq,l.bT,r.qT,r.me,r.BC,r.cb,x.wT,E.rl,N.VO,r.l_,r.j4,r.JD,S.K,B.t,R.Q,g.WGl,C.wp],encapsulation:2}),s})();var L=c(82653),W=c(82040),q=c(39712),K=c(89163),It=c(33887),H=c(52811);function kt(a,s){1&a&&(t.j41(0,"span",12),t.nrm(1,"azt-loading-ui"),t.k0s())}const At=function(a){return{"error-border":a}};let Tt=(()=>{var a;class s extends It._{closeDialog(){this.dialogRef.close(void 0)}saveObj(){this.initStatusObj(),this.waitDestroy(this.advertisingService.apiAdvertisingPartnersPost({name:this.nameFormControl.value}).subscribe(o=>{if(!o.success)return this.errorStatusObj(o.message,!0);this.waitDestroy(this.advertisingService.apiAdvertisingPartnersGet().subscribe(i=>{if(!i.success)return this.closeDialog();this.stopStatusObj(),this.dialogRef.close(i.data?.objs??[])}))}))}ngOnInit(){super.ngOnInit()}constructor(n,o,i){super(i,o),this.advertisingService=n,this.dialogRef=o,this.data=i,this.nameFormControl=new r.MJ("",{nonNullable:!0,validators:[b.M.noWhiteSpace]})}}return(a=s).\u0275fac=function(n){return new(n||a)(t.rXU(h.yG),t.rXU(K.CP,8),t.rXU(K.Vh))},a.\u0275cmp=t.VBU({type:a,selectors:[["app-create-partner-dialog"]],features:[t.Vt3],decls:19,vars:15,consts:[[1,"box","p-2"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"box","mt-4","p-2"],[1,"grid","grid-cols-12","mb-3"],[1,"col-span-12","lg:col-span-12"],[1,"form-label","mb-0","font-medium","flex","items-center"],[1,"setting-input"],["type","text",1,"form-control",3,"formControl","ngClass"],[1,"p-2","flex","justify-end"],[1,"btn","btn-secondary","w-24","mr-2",3,"click"],[1,"btn","btn-primary",3,"disabled","click"],["class","w-4 h-4 inline-block mr-2",4,"ngIf"],[1,"w-4","h-4","inline-block","mr-2"]],template:function(n,o){1&n&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"label",5),t.EFF(6),t.nI1(7,"mytranslate"),t.k0s()(),t.j41(8,"div",4)(9,"div",6),t.nrm(10,"input",7),t.k0s()()()(),t.j41(11,"div",8)(12,"button",9),t.bIt("click",function(){return o.closeDialog()}),t.EFF(13),t.nI1(14,"mytranslate"),t.k0s(),t.j41(15,"button",10),t.bIt("click",function(){return o.saveObj()}),t.DNE(16,kt,2,0,"span",11),t.EFF(17),t.nI1(18,"mytranslate"),t.k0s()()()()),2&n&&(t.R7$(6),t.SpI(" ",t.bMT(7,7,"lang_cms_admin_create_ads_partner")," "),t.R7$(4),t.Y8G("formControl",o.nameFormControl)("ngClass",t.eq3(13,At,o.nameFormControl.invalid)),t.R7$(3),t.SpI(" ",t.bMT(14,9,"lang_auto_huy")," "),t.R7$(2),t.Y8G("disabled",o.statusObj.loading||o.nameFormControl.invalid),t.R7$(1),t.Y8G("ngIf",o.statusObj.loading),t.R7$(1),t.SpI(" ",t.bMT(18,11,"lang_auto_luu")," "))},dependencies:[l.YU,l.bT,r.me,r.BC,r.l_,H.R,C.wp],encapsulation:2}),s})(),Q=(()=>{var a;class s extends O.H{cancel(){this.commonService.myNavigation(this.backTo)}uploadThumbnailImage(n){this.form.controls.thumbnailUrl.setValue(n.url??"")}createPartner(){this.sAztDialogService.open(Tt,{width:"500px",restoreFocus:!1,data:{}}).afterClosed().subscribe(n=>{null!=n&&(this.partnerObjs=n)})}constructor(){super(),this.sAztDialogService=(0,t.WQX)(U.i),this.categoryId=0,this.templateObj=void 0,this.partnerObjs=[],this.attributeObjs=[],this.allUploadToCdnMenuTypes=q.b8,this.allUploadFileTypes=q.PO,this.backTo="",this.form=new r.gE({name:new r.MJ("",{nonNullable:!0,validators:[b.M.noWhiteSpace]}),partnerId:new r.MJ(0,{nonNullable:!0,validators:[r.k0.min(1)]}),actionUrl:new r.MJ("",{nonNullable:!0,validators:[b.M.noWhiteSpace]}),description:new r.MJ("",{nonNullable:!0}),thumbnailUrl:new r.MJ("",{nonNullable:!0}),isActive:new r.MJ(!0,{nonNullable:!0}),attributeObjs:new r.Yp([])})}}return(a=s).\u0275fac=function(n){return new(n||a)},a.\u0275cmp=t.VBU({type:a,selectors:[["app-base-create-or-update-ads"]],features:[t.Vt3],decls:0,vars:0,template:function(n,o){},encapsulation:2}),s})();var Z=c(20013),Y=c(86359);function jt(a,s){if(1&a&&t.nrm(0,"azt-loading-effect",3),2&a){const e=t.XpG();t.Y8G("currentStatusObj",e.statusObj)}}function Ft(a,s){if(1&a&&(t.j41(0,"mat-option",32),t.EFF(1),t.k0s()),2&a){const e=s.$implicit;t.Y8G("value",e.id),t.R7$(1),t.SpI(" ",e.name," ")}}const z=function(a){return{"error-border":a}};function Ot(a,s){if(1&a&&(t.j41(0,"div",9)(1,"div",10)(2,"label",11),t.EFF(3),t.k0s()(),t.j41(4,"div",10)(5,"div",18),t.nrm(6,"input",19),t.k0s()()()),2&a){const e=s.$implicit;t.R7$(3),t.Lme("",e.controls.attributeDisplayName.value," - ",e.controls.attributeVariableName.value,""),t.R7$(3),t.Y8G("formControl",e.controls.attributeValue)("ngClass",t.eq3(4,z,e.controls.attributeValue.invalid))}}function Rt(a,s){if(1&a&&(t.j41(0,"div",33)(1,"div",10),t.nrm(2,"azt-frontend-ads-item",34),t.k0s()()),2&a){const e=t.XpG(2);t.R7$(2),t.Y8G("obj",e.currentAdsObj)}}const St=function(a){return[a]};function zt(a,s){if(1&a){const e=t.RV6();t.j41(0,"div",4)(1,"form",5)(2,"div",6)(3,"h3",7),t.EFF(4),t.nI1(5,"mytranslate"),t.k0s(),t.j41(6,"div",8)(7,"div",9)(8,"div",10)(9,"label",11),t.EFF(10),t.nI1(11,"mytranslate"),t.k0s()(),t.j41(12,"div",12)(13,"div",13)(14,"mat-form-field",14)(15,"mat-select",15),t.DNE(16,Ft,2,2,"mat-option",16),t.k0s()()(),t.j41(17,"div",17),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.createPartner())}),t.EFF(18),t.nI1(19,"mytranslate"),t.k0s()()(),t.j41(20,"div",9)(21,"div",10)(22,"label",11),t.EFF(23),t.nI1(24,"mytranslate"),t.k0s()(),t.j41(25,"div",10)(26,"div",18),t.nrm(27,"input",19),t.k0s()()(),t.j41(28,"div",9)(29,"div",10)(30,"label",11),t.EFF(31),t.nI1(32,"mytranslate"),t.k0s()(),t.j41(33,"div",10)(34,"div",18),t.nrm(35,"input",19),t.k0s()()(),t.j41(36,"div",9)(37,"div",10)(38,"label",11),t.EFF(39),t.nI1(40,"mytranslate"),t.k0s()(),t.j41(41,"div",10)(42,"div",18),t.nrm(43,"textarea",19),t.k0s()()(),t.j41(44,"div",9)(45,"div",10)(46,"label",11),t.EFF(47),t.nI1(48,"mytranslate"),t.k0s()(),t.j41(49,"div",10)(50,"div",18),t.nrm(51,"input",19),t.k0s()(),t.j41(52,"div",20)(53,"azt-upload-single-box",21),t.bIt("uploadComplete",function(o){t.eBV(e);const i=t.XpG();return t.Njj(i.uploadThumbnailImage(o))}),t.EFF(54),t.nI1(55,"mytranslate"),t.k0s()()(),t.DNE(56,Ot,7,6,"div",22),t.j41(57,"div",9)(58,"div",10)(59,"div",23),t.nrm(60,"input",24),t.j41(61,"label",25),t.EFF(62),t.nI1(63,"mytranslate"),t.k0s()()()(),t.nrm(64,"hr",26),t.DNE(65,Rt,3,1,"div",27),t.k0s(),t.j41(66,"div",28)(67,"button",29),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.cancel())}),t.EFF(68),t.nI1(69,"mytranslate"),t.k0s(),t.j41(70,"button",30),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.saveObj(!1))}),t.EFF(71),t.nI1(72,"mytranslate"),t.k0s(),t.j41(73,"button",31),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.saveObj(!0))}),t.EFF(74),t.nI1(75,"mytranslate"),t.k0s()()()()()}if(2&a){const e=t.XpG();t.R7$(1),t.Y8G("formGroup",e.form),t.R7$(3),t.SpI(" ",t.bMT(5,32,e.adsId?"lang_cms_admin_edit_ads_title":"lang_cms_admin_create_ads_title")," "),t.R7$(6),t.SpI(" ",t.bMT(11,34,"lang_cms_admin_create_ads_partner")," "),t.R7$(4),t.Y8G("ngClass",t.eq3(56,z,e.form.controls.partnerId.invalid)),t.R7$(1),t.Y8G("formControl",e.form.controls.partnerId),t.R7$(1),t.Y8G("ngForOf",e.partnerObjs),t.R7$(2),t.JRh(t.bMT(19,36,"lang_cms_admin_create_ads_create_new_partner")),t.R7$(5),t.SpI(" ",t.bMT(24,38,"lang_cms_admin_create_ads_name")," "),t.R7$(4),t.Y8G("formControl",e.form.controls.name)("ngClass",t.eq3(58,z,e.form.controls.name.invalid)),t.R7$(4),t.SpI(" ",t.bMT(32,40,"lang_cms_admin_create_ads_action_url")," "),t.R7$(4),t.Y8G("formControl",e.form.controls.actionUrl)("ngClass",t.eq3(60,z,e.form.controls.actionUrl.invalid)),t.R7$(4),t.SpI(" ",t.bMT(40,42,"lang_cms_admin_create_ads_description")," "),t.R7$(4),t.Y8G("formControl",e.form.controls.description)("ngClass",t.eq3(62,z,e.form.controls.description.invalid)),t.R7$(4),t.SpI(" ",t.bMT(48,44,"lang_cms_admin_create_ads_thumbnail_url")," "),t.R7$(4),t.Y8G("formControl",e.form.controls.thumbnailUrl)("ngClass",t.eq3(64,z,e.form.controls.thumbnailUrl.invalid)),t.R7$(2),t.Y8G("uploadToCdnMenu",e.allUploadToCdnMenuTypes.ADMIN)("fileType",t.eq3(66,St,e.allUploadFileTypes.IMAGE))("allowCompressImage",!1),t.R7$(1),t.SpI(" ",t.bMT(55,46,"lang_cms_admin_create_ads_upload_image")," "),t.R7$(2),t.Y8G("ngForOf",e.form.controls.attributeObjs.controls),t.R7$(4),t.Y8G("formControl",e.form.controls.isActive),t.R7$(2),t.JRh(t.bMT(63,48,"lang_cms_admin_create_ads_is_active")),t.R7$(3),t.Y8G("ngIf",e.currentAdsObj),t.R7$(3),t.JRh(t.bMT(69,50,"lang_auto_huy")),t.R7$(2),t.Y8G("disabled",e.form.invalid),t.R7$(1),t.JRh(t.bMT(72,52,"lang_auto_luu")),t.R7$(2),t.Y8G("disabled",e.form.invalid),t.R7$(1),t.JRh(t.bMT(75,54,"lang_core_luu_va_dong"))}}let $t=(()=>{var a;class s extends Q{initForm(){this.form.controls.partnerId.setValue(this.commonService.getFirstOfArray(this.partnerObjs)?.id??0),this.attributeObjs.forEach(n=>{this.form.controls.attributeObjs.push(new r.gE({attributeId:new r.MJ(n.id,{nonNullable:!0}),attributeDisplayName:new r.MJ(n.displayName,{nonNullable:!0}),attributeVariableName:new r.MJ(n.variableName,{nonNullable:!0}),attributeValue:new r.MJ("",{nonNullable:!0})}))})}initData(){this.initStatusObj(),this.waitDestroy((0,L.p)([this.advertisingService.apiAdvertisingCategoriesCategoryIdTemplatesGet(this.categoryId),this.advertisingService.apiAdvertisingCategoriesCategoryIdAttributesGet(this.categoryId),this.advertisingService.apiAdvertisingPartnersGet()]).pipe((0,W.M)(([n,o,i])=>n.success?o.success?i.success?(this.templateObj=n.data,this.attributeObjs=o.data?.objs??[],this.partnerObjs=i.data?.objs??[],this.initForm(),void this.stopStatusObj()):this.errorStatusObj(i.message,!0):this.errorStatusObj(o.message,!0):this.errorStatusObj(n.message,!0))).subscribe())}saveObj(n){this.initStatusObj();let o=this.form.getRawValue(),i={categoryId:this.categoryId,partnerId:o.partnerId,name:o.name,description:o.description,thumbnailUrl:o.thumbnailUrl,actionUrl:o.actionUrl,isActive:o.isActive?1:0,attributes:o.attributeObjs.map(d=>({attributeId:d.attributeId,value:d.attributeValue}))};this.waitDestroy(this.advertisingService.apiAdvertisingProductsPost(i).subscribe(d=>{if(!d.success)return this.errorStatusObj(d.message,!0);this.successStatusObj("lang_cms_add_success",!0),n&&this.cancel()}))}ngOnInit(){super.ngOnInit(),this.commonService.translateMetaData({title:"lang_cms_admin_common_ads",description:"lang_cms_admin_common_ads",image:"lang_cms_test_image"}),this.categoryId=Number(this.commonService.getMyParam(this.activeRoute,"categoryId")??0),this.backTo="/azota-ads/ads-list/"+this.categoryId,this.initData(),this.form.valueChanges.subscribe(n=>{let o=this.form.controls.attributeObjs.getRawValue().map(i=>({id:0,productId:0,attributeId:i.attributeId,value:i.attributeValue,attribute:{id:i.attributeId,categoryId:this.categoryId,displayName:i.attributeDisplayName,variableName:i.attributeVariableName}}));this.currentAdsObj={id:0,categoryId:this.categoryId,partnerId:this.form.controls.partnerId.value,name:this.form.controls.name.value,description:this.form.controls.description.value,thumbnailUrl:this.form.controls.thumbnailUrl.value,actionUrl:this.form.controls.actionUrl.value,isActive:this.form.controls.isActive.value?1:0,template:this.templateObj?.data,productAttributes:o}})}constructor(n,o){super(),this.advertisingService=n,this.activeRoute=o,this.adsId=0}}return(a=s).\u0275fac=function(n){return new(n||a)(t.rXU(h.yG),t.rXU(m.nX))},a.\u0275cmp=t.VBU({type:a,selectors:[["app-create-ads"]],features:[t.Vt3],decls:4,vars:3,consts:[[3,"headerBackToLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],["doneLoading",""],[3,"currentStatusObj"],[1,"mt-5"],[3,"formGroup"],[1,"azt-config-document","mx-auto",2,"max-width","1000px"],[1,"text-md","uppercase","font-medium"],[1,"box","mt-4","p-5"],[1,"grid","grid-cols-12","mb-3"],[1,"col-span-12","lg:col-span-12"],[1,"form-label","mb-0","font-medium","flex","items-center"],[1,"col-span-12"],[1,"azt-form-group"],["appearance","outline",2,"width","100%",3,"ngClass"],[3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[1,"link-color","clickable","pt-1",3,"click"],[1,"setting-input"],["type","text",1,"form-control",3,"formControl","ngClass"],[1,"link-color","clickable","pt-1"],[1,"inline-block",3,"uploadToCdnMenu","fileType","allowCompressImage","uploadComplete"],["class","grid grid-cols-12 mb-3",4,"ngFor","ngForOf"],[1,"form-check","form-switch","items-center","w-full","clickable"],["id","isActive","type","checkbox",1,"form-check-input","mr-2",3,"formControl"],["for","isActive",1,"flex","items-center","mr-auto"],[1,"mb-3"],["class","grid grid-cols-12mb-3",4,"ngIf"],[1,"text-right","mt-5"],[1,"btn","w-24","btn-secondary","mr-3",3,"click"],[1,"btn","btn-primary-soft","w-24","mr-3",3,"disabled","click"],[1,"btn","btn-primary",3,"disabled","click"],[3,"value"],[1,"grid","grid-cols-12mb-3"],[3,"obj"]],template:function(n,o){if(1&n&&(t.j41(0,"teacher-layout",0),t.DNE(1,jt,1,1,"azt-loading-effect",1),t.DNE(2,zt,76,68,"ng-template",null,2,t.C5r),t.k0s()),2&n){const i=t.sdS(3);t.Y8G("headerBackToLink",o.backTo),t.R7$(1),t.Y8G("ngIf",1==o.statusObj.loading)("ngIfElse",i)}},dependencies:[l.YU,l.Sq,l.bT,r.qT,r.me,r.Zm,r.BC,r.cb,x.wT,E.rl,N.VO,r.l_,r.j4,S.K,Z.T,Y.f,R.Q,C.wp],encapsulation:2}),s})();function Mt(a,s){if(1&a&&t.nrm(0,"azt-loading-effect",3),2&a){const e=t.XpG();t.Y8G("currentStatusObj",e.statusObj)}}function xt(a,s){if(1&a&&(t.j41(0,"mat-option",32),t.EFF(1),t.k0s()),2&a){const e=s.$implicit;t.Y8G("value",e.id),t.R7$(1),t.SpI(" ",e.name," ")}}const $=function(a){return{"error-border":a}};function Et(a,s){if(1&a&&(t.j41(0,"div",9)(1,"div",10)(2,"label",11),t.EFF(3),t.k0s()(),t.j41(4,"div",10)(5,"div",18),t.nrm(6,"input",19),t.k0s()()()),2&a){const e=s.$implicit;t.R7$(3),t.Lme("",e.controls.attributeDisplayName.value," - ",e.controls.attributeVariableName.value,""),t.R7$(3),t.Y8G("formControl",e.controls.attributeValue)("ngClass",t.eq3(4,$,e.controls.attributeValue.invalid))}}function Nt(a,s){if(1&a&&(t.j41(0,"div",33)(1,"div",10),t.nrm(2,"azt-frontend-ads-item",34),t.k0s()()),2&a){const e=t.XpG(2);t.R7$(2),t.Y8G("obj",e.currentAdsObj)}}const Gt=function(a){return[a]};function Dt(a,s){if(1&a){const e=t.RV6();t.j41(0,"div",4)(1,"form",5)(2,"div",6)(3,"h3",7),t.EFF(4),t.nI1(5,"mytranslate"),t.k0s(),t.j41(6,"div",8)(7,"div",9)(8,"div",10)(9,"label",11),t.EFF(10),t.nI1(11,"mytranslate"),t.k0s()(),t.j41(12,"div",12)(13,"div",13)(14,"mat-form-field",14)(15,"mat-select",15),t.DNE(16,xt,2,2,"mat-option",16),t.k0s()()(),t.j41(17,"div",17),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.createPartner())}),t.EFF(18),t.nI1(19,"mytranslate"),t.k0s()()(),t.j41(20,"div",9)(21,"div",10)(22,"label",11),t.EFF(23),t.nI1(24,"mytranslate"),t.k0s()(),t.j41(25,"div",10)(26,"div",18),t.nrm(27,"input",19),t.k0s()()(),t.j41(28,"div",9)(29,"div",10)(30,"label",11),t.EFF(31),t.nI1(32,"mytranslate"),t.k0s()(),t.j41(33,"div",10)(34,"div",18),t.nrm(35,"input",19),t.k0s()()(),t.j41(36,"div",9)(37,"div",10)(38,"label",11),t.EFF(39),t.nI1(40,"mytranslate"),t.k0s()(),t.j41(41,"div",10)(42,"div",18),t.nrm(43,"textarea",19),t.k0s()()(),t.j41(44,"div",9)(45,"div",10)(46,"label",11),t.EFF(47),t.nI1(48,"mytranslate"),t.k0s()(),t.j41(49,"div",10)(50,"div",18),t.nrm(51,"input",19),t.k0s()(),t.j41(52,"div",20)(53,"azt-upload-single-box",21),t.bIt("uploadComplete",function(o){t.eBV(e);const i=t.XpG();return t.Njj(i.uploadThumbnailImage(o))}),t.EFF(54),t.nI1(55,"mytranslate"),t.k0s()()(),t.DNE(56,Et,7,6,"div",22),t.j41(57,"div",9)(58,"div",10)(59,"div",23),t.nrm(60,"input",24),t.j41(61,"label",25),t.EFF(62),t.nI1(63,"mytranslate"),t.k0s()()()(),t.nrm(64,"hr",26),t.DNE(65,Nt,3,1,"div",27),t.k0s(),t.j41(66,"div",28)(67,"button",29),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.cancel())}),t.EFF(68),t.nI1(69,"mytranslate"),t.k0s(),t.j41(70,"button",30),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.saveObj(!1))}),t.EFF(71),t.nI1(72,"mytranslate"),t.k0s(),t.j41(73,"button",31),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.saveObj(!0))}),t.EFF(74),t.nI1(75,"mytranslate"),t.k0s()()()()()}if(2&a){const e=t.XpG();t.R7$(1),t.Y8G("formGroup",e.form),t.R7$(3),t.SpI(" ",t.bMT(5,32,e.adsId?"lang_cms_admin_edit_ads_title":"lang_cms_admin_create_ads_title")," "),t.R7$(6),t.SpI(" ",t.bMT(11,34,"lang_cms_admin_create_ads_partner")," "),t.R7$(4),t.Y8G("ngClass",t.eq3(56,$,e.form.controls.partnerId.invalid)),t.R7$(1),t.Y8G("formControl",e.form.controls.partnerId),t.R7$(1),t.Y8G("ngForOf",e.partnerObjs),t.R7$(2),t.JRh(t.bMT(19,36,"lang_cms_admin_create_ads_create_new_partner")),t.R7$(5),t.SpI(" ",t.bMT(24,38,"lang_cms_admin_create_ads_name")," "),t.R7$(4),t.Y8G("formControl",e.form.controls.name)("ngClass",t.eq3(58,$,e.form.controls.name.invalid)),t.R7$(4),t.SpI(" ",t.bMT(32,40,"lang_cms_admin_create_ads_action_url")," "),t.R7$(4),t.Y8G("formControl",e.form.controls.actionUrl)("ngClass",t.eq3(60,$,e.form.controls.actionUrl.invalid)),t.R7$(4),t.SpI(" ",t.bMT(40,42,"lang_cms_admin_create_ads_description")," "),t.R7$(4),t.Y8G("formControl",e.form.controls.description)("ngClass",t.eq3(62,$,e.form.controls.description.invalid)),t.R7$(4),t.SpI(" ",t.bMT(48,44,"lang_cms_admin_create_ads_thumbnail_url")," "),t.R7$(4),t.Y8G("formControl",e.form.controls.thumbnailUrl)("ngClass",t.eq3(64,$,e.form.controls.thumbnailUrl.invalid)),t.R7$(2),t.Y8G("uploadToCdnMenu",e.allUploadToCdnMenuTypes.ADMIN)("fileType",t.eq3(66,Gt,e.allUploadFileTypes.IMAGE))("allowCompressImage",!1),t.R7$(1),t.SpI(" ",t.bMT(55,46,"lang_cms_admin_create_ads_upload_image")," "),t.R7$(2),t.Y8G("ngForOf",e.form.controls.attributeObjs.controls),t.R7$(4),t.Y8G("formControl",e.form.controls.isActive),t.R7$(2),t.JRh(t.bMT(63,48,"lang_cms_admin_create_ads_is_active")),t.R7$(3),t.Y8G("ngIf",e.currentAdsObj),t.R7$(3),t.JRh(t.bMT(69,50,"lang_auto_huy")),t.R7$(2),t.Y8G("disabled",e.form.invalid),t.R7$(1),t.JRh(t.bMT(72,52,"lang_auto_luu")),t.R7$(2),t.Y8G("disabled",e.form.invalid),t.R7$(1),t.JRh(t.bMT(75,54,"lang_core_luu_va_dong"))}}let Ut=(()=>{var a;class s extends Q{initForm(){this.form.controls.partnerId.setValue(this.updateAdsObj?.partnerId??0),this.form.controls.name.setValue(this.updateAdsObj?.name??""),this.form.controls.actionUrl.setValue(this.updateAdsObj?.actionUrl??""),this.form.controls.description.setValue(this.updateAdsObj?.description??""),this.form.controls.thumbnailUrl.setValue(this.updateAdsObj?.thumbnailUrl??""),this.form.controls.isActive.setValue(!!this.updateAdsObj?.isActive),this.attributeObjs.forEach(n=>{let o=this.updateAdsObj?.productAttributes?.find(i=>i.attributeId==n.id);this.form.controls.attributeObjs.push(new r.gE({attributeId:new r.MJ(n.id,{nonNullable:!0}),attributeDisplayName:new r.MJ(n.displayName,{nonNullable:!0}),attributeVariableName:new r.MJ(n.variableName,{nonNullable:!0}),attributeValue:new r.MJ(o?.value??"",{nonNullable:!0})}))})}initData(){this.initStatusObj(),this.waitDestroy((0,L.p)([this.advertisingService.apiAdvertisingCategoriesCategoryIdTemplatesGet(this.categoryId),this.advertisingService.apiAdvertisingCategoriesCategoryIdAttributesGet(this.categoryId),this.advertisingService.apiAdvertisingPartnersGet(),this.advertisingService.apiAdvertisingProductsIdGet(this.adsId)]).pipe((0,W.M)(([n,o,i,d])=>n.success?o.success?i.success?(this.templateObj=n.data,this.attributeObjs=o.data?.objs??[],this.partnerObjs=i.data?.objs??[],this.updateAdsObj=d.data,this.initForm(),void this.stopStatusObj()):this.errorStatusObj(i.message,!0):this.errorStatusObj(o.message,!0):this.errorStatusObj(n.message,!0))).subscribe())}saveObj(n){this.initStatusObj();let o=this.form.getRawValue(),i={categoryId:this.categoryId,partnerId:o.partnerId,name:o.name,description:o.description,thumbnailUrl:o.thumbnailUrl,actionUrl:o.actionUrl,isActive:o.isActive?1:0,attributes:o.attributeObjs.map(d=>({attributeId:d.attributeId,value:d.attributeValue}))};this.waitDestroy(this.advertisingService.apiAdvertisingProductsProductIdPut(this.adsId,i).subscribe(d=>{if(!d.success)return this.errorStatusObj(d.message,!0);this.successStatusObj("lang_cms_update_success",!0),n&&this.cancel()}))}ngOnInit(){super.ngOnInit(),this.commonService.translateMetaData({title:"lang_cms_admin_common_ads",description:"lang_cms_admin_common_ads",image:"lang_cms_test_image"}),this.categoryId=Number(this.commonService.getMyParam(this.activeRoute,"categoryId")??0),this.adsId=Number(this.commonService.getMyParam(this.activeRoute,"adsId")??0),this.backTo="/azota-ads/ads-list/"+this.categoryId,this.initData(),this.form.valueChanges.subscribe(n=>{let o=this.form.controls.attributeObjs.getRawValue().map(i=>({id:0,productId:0,attributeId:i.attributeId,value:i.attributeValue,attribute:{id:i.attributeId,categoryId:this.categoryId,displayName:i.attributeDisplayName,variableName:i.attributeVariableName}}));this.currentAdsObj={id:0,categoryId:this.categoryId,partnerId:this.form.controls.partnerId.value,name:this.form.controls.name.value,description:this.form.controls.description.value,thumbnailUrl:this.form.controls.thumbnailUrl.value,actionUrl:this.form.controls.actionUrl.value,isActive:this.form.controls.isActive.value?1:0,template:this.templateObj?.data,productAttributes:o}})}constructor(n,o){super(),this.advertisingService=n,this.activeRoute=o,this.adsId=0,this.updateAdsObj=void 0,this.form=new r.gE({name:new r.MJ("",{nonNullable:!0,validators:[b.M.noWhiteSpace]}),partnerId:new r.MJ(0,{nonNullable:!0,validators:[r.k0.min(1)]}),actionUrl:new r.MJ("",{nonNullable:!0,validators:[b.M.noWhiteSpace]}),description:new r.MJ("",{nonNullable:!0}),thumbnailUrl:new r.MJ("",{nonNullable:!0}),isActive:new r.MJ(!0,{nonNullable:!0}),attributeObjs:new r.Yp([])})}}return(a=s).\u0275fac=function(n){return new(n||a)(t.rXU(h.yG),t.rXU(m.nX))},a.\u0275cmp=t.VBU({type:a,selectors:[["app-update-ads"]],features:[t.Vt3],decls:4,vars:3,consts:[[3,"headerBackToLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],["doneLoading",""],[3,"currentStatusObj"],[1,"mt-5"],[3,"formGroup"],[1,"azt-config-document","mx-auto",2,"max-width","1000px"],[1,"text-md","uppercase","font-medium"],[1,"box","mt-4","p-5"],[1,"grid","grid-cols-12","mb-3"],[1,"col-span-12","lg:col-span-12"],[1,"form-label","mb-0","font-medium","flex","items-center"],[1,"col-span-12"],[1,"azt-form-group"],["appearance","outline",2,"width","100%",3,"ngClass"],[3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[1,"link-color","clickable","pt-1",3,"click"],[1,"setting-input"],["type","text",1,"form-control",3,"formControl","ngClass"],[1,"link-color","clickable","pt-1"],[1,"inline-block",3,"uploadToCdnMenu","fileType","allowCompressImage","uploadComplete"],["class","grid grid-cols-12 mb-3",4,"ngFor","ngForOf"],[1,"form-check","form-switch","items-center","w-full","clickable"],["id","isActive","type","checkbox",1,"form-check-input","mr-2",3,"formControl"],["for","isActive",1,"flex","items-center","mr-auto"],[1,"mb-3"],["class","grid grid-cols-12mb-3",4,"ngIf"],[1,"text-right","mt-5"],[1,"btn","w-24","btn-secondary","mr-3",3,"click"],[1,"btn","btn-primary-soft","w-24","mr-3",3,"disabled","click"],[1,"btn","btn-primary",3,"disabled","click"],[3,"value"],[1,"grid","grid-cols-12mb-3"],[3,"obj"]],template:function(n,o){if(1&n&&(t.j41(0,"teacher-layout",0),t.DNE(1,Mt,1,1,"azt-loading-effect",1),t.DNE(2,Dt,76,68,"ng-template",null,2,t.C5r),t.k0s()),2&n){const i=t.sdS(3);t.Y8G("headerBackToLink",o.backTo),t.R7$(1),t.Y8G("ngIf",1==o.statusObj.loading)("ngIfElse",i)}},dependencies:[l.YU,l.Sq,l.bT,r.qT,r.me,r.Zm,r.BC,r.cb,x.wT,E.rl,N.VO,r.l_,r.j4,S.K,Z.T,Y.f,R.Q,C.wp],encapsulation:2}),s})();var wt=c(76627),tt=c(25329);function Lt(a,s){if(1&a&&t.nrm(0,"azt-loading-effect",6),2&a){const e=t.XpG();t.Y8G("currentStatusObj",e.statusObj)}}function Yt(a,s){if(1&a&&(t.j41(0,"mat-option",16),t.EFF(1),t.k0s()),2&a){const e=s.$implicit;t.Y8G("value",e.id),t.R7$(1),t.Lme("",e.name," - ",e.position,"")}}function Pt(a,s){1&a&&(t.j41(0,"span",33),t.nrm(1,"azt-loading-ui"),t.k0s())}function Vt(a,s){1&a&&(t.j41(0,"span",33),t.nrm(1,"azt-loading-ui"),t.k0s())}const G=function(a){return{backTo:a}},P=function(){return{"mr-1":!0}},Bt=function(a,s){return{"btn-success-soft":a,"btn-pending-soft":s}};function Jt(a,s){if(1&a){const e=t.RV6();t.j41(0,"mat-card",20)(1,"mat-card-content",21)(2,"div",22)(3,"div",23)(4,"b"),t.EFF(5),t.k0s(),t.EFF(6),t.k0s(),t.j41(7,"div",24)(8,"a",25),t.nI1(9,"navigationLocalize"),t.nrm(10,"lucide-icon",26),t.EFF(11),t.nI1(12,"mytranslate"),t.k0s(),t.j41(13,"button",27),t.bIt("click",function(){const i=t.eBV(e).$implicit,d=t.XpG(4);return t.Njj(d.changeStatus(i))}),t.DNE(14,Pt,2,0,"span",28),t.nrm(15,"lucide-icon",29),t.j41(16,"span",30),t.EFF(17),t.nI1(18,"mytranslate"),t.nI1(19,"mytranslate"),t.k0s()(),t.j41(20,"button",31),t.bIt("click",function(){const i=t.eBV(e).$implicit,d=t.XpG(4);return t.Njj(d.deleteObj(i))}),t.DNE(21,Vt,2,0,"span",28),t.nrm(22,"lucide-icon",32),t.j41(23,"span",30),t.EFF(24),t.nI1(25,"mytranslate"),t.k0s()()()()()()}if(2&a){const e=s.$implicit,n=s.index,o=t.XpG(4);t.R7$(5),t.SpI("",n+1,"."),t.R7$(1),t.SpI(" ",e.name," "),t.R7$(2),t.Y8G("routerLink",t.bMT(9,13,"/azota-ads/edit-ads/"+e.categoryId+"/"+e.id))("queryParams",t.eq3(23,G,o.backTo)),t.R7$(2),t.Y8G("ngClass",t.lJ4(25,P)),t.R7$(1),t.SpI(" ",t.bMT(12,15,"lang_auto_sua")," "),t.R7$(2),t.Y8G("ngClass",t.l_i(26,Bt,e.isActive,!e.isActive)),t.R7$(1),t.Y8G("ngIf",o.changeStatusId==e.id),t.R7$(1),t.Y8G("ngClass",t.lJ4(29,P)),t.R7$(2),t.JRh(e.isActive?t.bMT(18,17,"lang_cms_admin_ads_is_active"):t.bMT(19,19,"lang_cms_admin_ads_is_inactive")),t.R7$(4),t.Y8G("ngIf",o.deletingId==e.id),t.R7$(1),t.Y8G("ngClass",t.lJ4(30,P)),t.R7$(2),t.JRh(t.bMT(25,21,"lang_auto_xoa"))}}function Xt(a,s){if(1&a&&(t.j41(0,"div",17)(1,"div",18),t.DNE(2,Jt,26,31,"mat-card",19),t.k0s()()),2&a){const e=t.XpG(3);t.R7$(2),t.Y8G("ngForOf",e.objs)}}function Wt(a,s){if(1&a){const e=t.RV6();t.qex(0),t.j41(1,"div",9)(2,"mat-form-field",10)(3,"mat-select",11),t.bIt("selectionChange",function(){t.eBV(e);const o=t.XpG(2);return t.Njj(o.changeCategoryId())}),t.DNE(4,Yt,2,3,"mat-option",12),t.k0s()(),t.j41(5,"span",13),t.nI1(6,"navigationLocalize"),t.EFF(7),t.nI1(8,"mytranslate"),t.k0s(),t.j41(9,"a",14),t.nI1(10,"navigationLocalize"),t.EFF(11),t.nI1(12,"mytranslate"),t.k0s()(),t.DNE(13,Xt,3,1,"div",15),t.bVm()}if(2&a){const e=t.XpG(2);t.R7$(3),t.Y8G("formControl",e.currentCategoryFormControl),t.R7$(1),t.Y8G("ngForOf",e.categoryObjs),t.R7$(1),t.Y8G("routerLink",t.bMT(6,9,"/azota-ads/create-ads-template/"+e.currentCategoryFormControl.value))("queryParams",t.eq3(17,G,e.backTo)),t.R7$(2),t.SpI(" ",t.bMT(8,11,"S\u1eeda template")," "),t.R7$(2),t.Y8G("routerLink",t.bMT(10,13,"/azota-ads/create-ads/"+e.currentCategoryFormControl.value))("queryParams",t.eq3(19,G,e.backTo)),t.R7$(2),t.SpI(" ",t.bMT(12,15,"lang_cms_admin_ads_create_new_ads")," "),t.R7$(2),t.Y8G("ngIf",e.objs.length>0)}}function qt(a,s){if(1&a&&(t.j41(0,"span",34),t.nI1(1,"navigationLocalize"),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s()),2&a){const e=t.XpG(2);t.Y8G("routerLink",t.bMT(1,3,"/azota-ads/create-ads-category"))("queryParams",t.eq3(7,G,e.backTo)),t.R7$(2),t.JRh(t.bMT(3,5,"lang_cms_admin_ads_create_new_category"))}}function Kt(a,s){if(1&a&&(t.DNE(0,Wt,14,21,"ng-container",7),t.DNE(1,qt,4,9,"ng-template",null,8,t.C5r)),2&a){const e=t.sdS(2),n=t.XpG();t.Y8G("ngIf",n.categoryObjs.length>0)("ngIfElse",e)}}const et=function(a){return[a]};function Qt(a,s){if(1&a&&t.nrm(0,"azt-loading-effect",3),2&a){const e=t.XpG();t.Y8G("currentStatusObj",e.statusObj)}}function Zt(a,s){if(1&a&&(t.j41(0,"div",11)(1,"span",12),t.EFF(2),t.k0s(),t.j41(3,"span",13),t.EFF(4),t.k0s()()),2&a){const e=s.$implicit;t.R7$(2),t.SpI(" ","${"+e.variableName+"}"," "),t.R7$(2),t.SpI(" ","- "+e.description," ")}}function te(a,s){if(1&a&&(t.j41(0,"div",24)(1,"div",16),t.nrm(2,"azt-frontend-ads-item",25),t.k0s()()),2&a){const e=t.XpG(2);t.R7$(2),t.Y8G("obj",e.currentAdsObj)}}function ee(a,s){if(1&a){const e=t.RV6();t.j41(0,"div",4)(1,"div",5)(2,"h3",6),t.EFF(3),t.nI1(4,"mytranslate"),t.k0s(),t.j41(5,"div",7)(6,"div",8)(7,"h3",9),t.EFF(8),t.nI1(9,"mytranslate"),t.k0s(),t.j41(10,"div",10)(11,"div",11)(12,"span",12),t.EFF(13),t.k0s(),t.j41(14,"span",13),t.EFF(15),t.nI1(16,"mytranslate"),t.k0s()(),t.j41(17,"div",11)(18,"span",12),t.EFF(19),t.k0s(),t.j41(20,"span",13),t.EFF(21),t.nI1(22,"mytranslate"),t.k0s()(),t.j41(23,"div",11)(24,"span",12),t.EFF(25),t.k0s(),t.j41(26,"span",13),t.EFF(27),t.nI1(28,"mytranslate"),t.k0s()(),t.j41(29,"div",11)(30,"span",12),t.EFF(31),t.k0s(),t.j41(32,"span",13),t.EFF(33),t.nI1(34,"mytranslate"),t.k0s()(),t.DNE(35,Zt,5,2,"div",14),t.k0s()(),t.j41(36,"div",15)(37,"div",16)(38,"h3",9),t.EFF(39),t.nI1(40,"mytranslate"),t.k0s()(),t.j41(41,"div",17),t.nrm(42,"editor",18),t.nI1(43,"getTinyMceKey"),t.nI1(44,"getTinyMceConfig"),t.k0s()(),t.nrm(45,"hr",19),t.DNE(46,te,3,1,"div",20),t.k0s(),t.j41(47,"div",21)(48,"button",22),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.handleDestroy())}),t.EFF(49),t.nI1(50,"mytranslate"),t.k0s(),t.j41(51,"button",23),t.bIt("click",function(){t.eBV(e);const o=t.XpG();return t.Njj(o.saveTemplate())}),t.EFF(52),t.nI1(53,"mytranslate"),t.k0s()()()()}if(2&a){const e=t.XpG();t.R7$(3),t.SpI(" ",t.bMT(4,19,"lang_azt_create_ads_template")," "),t.R7$(5),t.SpI(" ",t.bMT(9,21,"lang_azt_information_field")," "),t.R7$(5),t.JRh("${NAME}"),t.R7$(2),t.SpI(" ","- "+t.bMT(16,23,"lang_cms_admin_create_ads_name")," "),t.R7$(4),t.SpI("","${URL}","}"),t.R7$(2),t.SpI(" ","- "+t.bMT(22,25,"lang_cms_admin_create_ads_action_url")," "),t.R7$(4),t.JRh("${DESCRIPTION}"),t.R7$(2),t.SpI(" ","- "+t.bMT(28,27,"lang_cms_admin_create_ads_description")," "),t.R7$(4),t.JRh("${THUMBNAIL}"),t.R7$(2),t.Lme("","- "+t.bMT(34,29,"lang_cms_admin_create_ads_thumbnail_url")," - ",e.adsDefaultThumbnail,""),t.R7$(2),t.Y8G("ngForOf",e.categoryAttributeList),t.R7$(4),t.SpI(" ",t.bMT(40,31,"lang_auto_noi_dung")," "),t.R7$(3),t.FS9("apiKey",t.bMT(43,33,"")),t.Y8G("formControl",e.template)("init",t.bMT(44,35,"admin_common")),t.R7$(4),t.Y8G("ngIf",e.currentAdsObj),t.R7$(3),t.JRh(t.bMT(50,37,"lang_auto_huy")),t.R7$(3),t.JRh(t.bMT(53,39,"lang_auto_luu"))}}const ae=[{path:"",children:[{path:"ads-list/:categoryId",component:(()=>{var a;class s extends O.H{changeStatus(n){if(null==this.objs.find(d=>d.id==n.id))return;this.changeStatusId=n.id;let i=n.isActive?this.advertisingService.apiAdvertisingProductsProductIdDeactivatePut(n.id):this.advertisingService.apiAdvertisingProductsProductIdActivatePut(n.id);this.waitDestroy(i.subscribe(d=>{if(this.changeStatusId=0,!d.success)return this.errorStatusObj(d.message,!0);n.isActive=n.isActive?0:1}))}deleteObj(n){const o=this.commonService.myTranslateInstant("lang_cms_admin_ads_are_your_sure_to_delete_this_ads")+`: <b>${n.name}<b/>?`;this.sAztDialogService.open(M.u,{data:{content:o},restoreFocus:!1,width:"500px"}).afterClosed().subscribe(i=>{i&&(this.deletingId=n.id,this.waitDestroy(this.advertisingService.apiAdvertisingProductsDeletePost({productIds:[n.id]}).subscribe(d=>{if(this.deletingId=0,!d.success)return this.errorStatusObj(d.message,!0);this.objs=this.objs.filter(v=>v.id!=n.id)})))})}changeCategoryId(){this.commonService.myNavigation("/azota-ads/ads-list/"+this.currentCategoryFormControl.value)}getData(){this.initStatusObj(),this.getCategory(n=>{if(n)return this.errorStatusObj(n,!0);let o=this.getDefaultCategoryId();this.currentCategoryFormControl.value!=o&&this.currentCategoryFormControl.setValue(o),this.waitDestroy(this.advertisingService.apiAdvertisingProductsListPost({categoryId:o,page:1,size:1e4}).subscribe(d=>{if(!d.success)return this.errorStatusObj(d.message,!0);this.objs=d.data?.objs??[],this.stopStatusObj()}))})}getCategory(n){this.waitDestroy(this.advertisingService.apiAdvertisingCategoriesGet().subscribe(o=>{if(!o.success)return n(o.message);this.categoryObjs=o.data?.objs??[],n(void 0)}))}getDefaultCategoryId(){let n=Number(this.commonService.getMyParam(this.activeRoute,"categoryId")??0);return null!=this.categoryObjs.find(o=>o.id==n)?n:this.commonService.getFirstOfArray(this.categoryObjs)?.id??0}ngOnInit(){super.ngOnInit(),this.waitDestroy((0,wt.z)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.getData()})),this.commonService.translateMetaData({title:"lang_cms_admin_common_ads",description:"lang_cms_admin_common_ads",image:"lang_cms_test_image"}),this.headerBackTo=this.commonService.getMyQueryParam("backTo")??"/super-role/admin-tool",this.backTo=this.commonService.getMyQueryParam("backTo")??this.commonService.getCurrentUrlWithoutLocale()}constructor(n,o,i){super(),this.advertisingService=n,this.activeRoute=o,this.sAztDialogService=i,this.currentCategoryFormControl=new r.MJ(0,{nonNullable:!0}),this.objs=[],this.categoryObjs=[],this.deletingId=0,this.changeStatusId=0,this.backTo="",this.headerBackTo=""}}return(a=s).\u0275fac=function(n){return new(n||a)(t.rXU(h.yG),t.rXU(m.nX),t.rXU(U.i))},a.\u0275cmp=t.VBU({type:a,selectors:[["app-common-guide"]],features:[t.Vt3],decls:14,vars:19,consts:[[3,"headerBackToLink"],[1,"container-fluid","component-wrap","centerBoth","hasBg","mt-3"],[1,"mb-3"],[1,"clickable","btn","btn-info","mr-3",3,"routerLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],["doneLoading",""],[3,"currentStatusObj"],[4,"ngIf","ngIfElse"],["emptyCategory",""],[1,"mb-3","box","p-2","flex"],["appearance","outline"],[3,"formControl","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[1,"clickable","flex-none","btn","btn-secondary","ml-3",3,"routerLink","queryParams"],[1,"clickable","flex-none","btn","btn-primary","ml-3",3,"routerLink","queryParams"],["class","card mt-1",4,"ngIf"],[3,"value"],[1,"card","mt-1"],[1,"card-body"],["appearance","outlined","class","mb-2","style","background-color: #fff; border: none",4,"ngFor","ngForOf"],["appearance","outlined",1,"mb-2",2,"background-color","#fff","border","none"],[1,"form-control",2,"overflow-y","auto"],[1,"flex","align-items-center"],[1,"w-full"],[1,"flex-none","items-center"],[1,"btn","btn-sm","btn-primary-soft","mr-2",3,"routerLink","queryParams"],["name","square-pen","size","18",3,"ngClass"],[1,"btn","btn-sm","mr-2",3,"ngClass","click"],["class","w-4 h-4 flex mr-1",4,"ngIf"],["name","shield-check","size","18",3,"ngClass"],[1,"azt-hidden","md:inline-block"],[1,"btn","btn-sm","btn-danger-soft",3,"click"],["name","trash-2","size","18",3,"ngClass"],[1,"w-4","h-4","flex","mr-1"],[1,"clickable","btn","btn-primary",3,"routerLink","queryParams"]],template:function(n,o){if(1&n&&(t.j41(0,"teacher-layout",0)(1,"div",1)(2,"div",2)(3,"a",3),t.nI1(4,"navigationLocalize"),t.EFF(5),t.nI1(6,"mytranslate"),t.k0s(),t.j41(7,"a",3),t.nI1(8,"navigationLocalize"),t.EFF(9),t.nI1(10,"mytranslate"),t.k0s()(),t.DNE(11,Lt,1,1,"azt-loading-effect",4),t.DNE(12,Kt,3,2,"ng-template",null,5,t.C5r),t.k0s()()),2&n){const i=t.sdS(13);t.Y8G("headerBackToLink",o.headerBackTo),t.R7$(3),t.Y8G("routerLink",t.eq3(15,et,t.bMT(4,7,"/azota-ads/ads-category"))),t.R7$(2),t.SpI(" ",t.bMT(6,9,"lang_azt_manage_categories")," "),t.R7$(2),t.Y8G("routerLink",t.eq3(17,et,t.bMT(8,11,"/azota-ads/ads-list/0"))),t.R7$(2),t.SpI(" ",t.bMT(10,13,"lang_azt_manage_ads")," "),t.R7$(2),t.Y8G("ngIf",o.statusObj.loading)("ngIfElse",i)}},dependencies:[m.Wk,l.YU,l.Sq,l.bT,r.BC,x.wT,tt.RN,tt.m2,E.rl,N.VO,r.l_,S.K,H.R,R.Q,g.WGl,C.F2,C.wp],encapsulation:2}),s})()},{path:"create-ads/:categoryId",component:$t},{path:"edit-ads/:categoryId/:adsId",component:Ut},{path:"ads-category",component:lt},{path:"create-ads-category",component:_t},{path:"update-ads-category/:categoryId",component:yt},{path:"create-ads-template/:categoryId",component:(()=>{var a;class s extends O.H{saveTemplate(){const n={categoryId:this.categoryId,data:this.commonService.replaceAll(this.template.value,this.adsDefaultThumbnail,"${THUMBNAIL}")??""};this.waitDestroy(this.advertisingService.apiAdvertisingTemplatesPost(n).subscribe(o=>{if(!o.success)return this.errorStatusObj(o.message,!0);this.successStatusObj("T\u1ea1o template th\xe0nh c\xf4ng"),this.myNavigation(`/azota-ads/ads-list/${this.categoryId}`)}))}handleDestroy(){this.myNavigation(this.backToLink)}initAds(){this.currentAdsObj={id:0,categoryId:this.categoryId,partnerId:0,name:"NAME_SAMPLE",description:"DESCRIPTION_SAMPLE",thumbnailUrl:k.c.adsDefaultThumbnail,actionUrl:"https://google.com.vn",isActive:1,template:this.template.value,productAttributes:this.categoryAttributeList.map(n=>({id:0,productId:0,attributeId:n.id,value:n.variableName,attribute:{id:n.id,categoryId:this.categoryId,displayName:n.displayName,variableName:n.variableName}}))}}getData(n){this.initStatusObj();const o=this.advertisingService.apiAdvertisingCategoriesCategoryIdAttributesGet(n),i=this.advertisingService.apiAdvertisingCategoriesCategoryIdTemplatesGet(n);this.waitDestroy((0,L.p)([o,i]).subscribe({next:([d,v])=>d.success?v.success?(this.categoryAttributeList=d.data?.objs??[],this.template.setValue(this.commonService.replaceAll(v.data?.data,"${THUMBNAIL}",this.adsDefaultThumbnail)??""),void this.successStatusObj()):this.errorStatusObj(v.message,!0):this.errorStatusObj(d.message,!0),error:d=>this.errorStatusObj(d.message,!0)}))}ngOnInit(){super.ngOnInit(),this.categoryId=Number(this.commonService.getMyParam(this.activeRoute,"categoryId")??0),this.backToLink=this.commonService.getMyQueryParam("backto")??"/azota-ads/ads-category",this.getData(this.categoryId),this.template.valueChanges.subscribe(n=>{this.initAds()})}constructor(n,o){super(),this.activeRoute=n,this.advertisingService=o,this.backToLink="",this.categoryId=0,this.template=new r.MJ("",{nonNullable:!0,validators:[r.k0.required]}),this.categoryAttributeList=[],this.adsDefaultThumbnail=k.c.adsDefaultThumbnail}}return(a=s).\u0275fac=function(n){return new(n||a)(t.rXU(m.nX),t.rXU(h.yG))},a.\u0275cmp=t.VBU({type:a,selectors:[["app-create-ads-template"]],features:[t.Vt3],decls:4,vars:3,consts:[[3,"headerBackToLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],["doneLoading",""],[3,"currentStatusObj"],[1,"mt-5"],[1,"azt-config-document","mx-auto",2,"max-width","1000px"],[1,"text-md","uppercase","font-medium"],[1,"box","p-5","mt-3"],[1,"mt-0"],[1,"text-md","font-medium"],[1,"mt-2"],[1,"mt-3"],[1,"rounded-md","bg-slate-200","px-3","py-1","text-slate-600","text-xs","dark:bg-darkmode-300","dark:text-slate-400","inline-block"],[1,"mt-1","mr-1","text-xs","leading-relaxed","text-slate-500"],["class","mt-3",4,"ngFor","ngForOf"],[1,"grid","grid-cols-12","mt-4"],[1,"col-span-12","lg:col-span-12"],[1,"col-span-12","lg:col-span-12","mt-3"],[3,"formControl","apiKey","init"],[1,"mt-3","mb-3"],["class","grid grid-cols-12mb-3",4,"ngIf"],[1,"text-right","mt-5"],[1,"btn","w-24","btn-secondary","mr-3",3,"click"],[1,"btn","btn-primary","w-24",3,"click"],[1,"grid","grid-cols-12mb-3"],[3,"obj"]],template:function(n,o){if(1&n&&(t.j41(0,"teacher-layout",0),t.DNE(1,Qt,1,1,"azt-loading-effect",1),t.DNE(2,ee,54,41,"ng-template",null,2,t.C5r),t.k0s()),2&n){const i=t.sdS(3);t.Y8G("headerBackToLink",o.backToLink),t.R7$(1),t.Y8G("ngIf",1==o.statusObj.loading)("ngIfElse",i)}},dependencies:[l.Sq,l.bT,r.BC,T.xn,r.l_,S.K,Y.f,R.Q,C.wp,C.Hw,C.yc],encapsulation:2}),s})()}]}];let ne=(()=>{var a;class s{}return(a=s).\u0275fac=function(n){return new(n||a)},a.\u0275mod=t.$C({type:a}),a.\u0275inj=t.G2t({imports:[m.iI.forChild(ae),m.iI,A.XE]}),s})(),oe=(()=>{var a;class s{}return(a=s).\u0275fac=function(n){return new(n||a)},a.\u0275mod=t.$C({type:a}),a.\u0275inj=t.G2t({providers:[{provide:T.vn,useValue:k.c.azt_tiny_mce_script_src}],imports:[m.iI,l.MD,r.YN,T.sv,p.s,r.X1,ne,F.Q,u.L,I.Id,_.b,g.flO.pick(g.Ptg),f.AC]}),s})()}}]);