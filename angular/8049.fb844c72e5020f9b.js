"use strict";(self.webpackChunkBalacoClient=self.webpackChunkBalacoClient||[]).push([[8049],{63038:(b,f,c)=>{c.d(f,{m:()=>h});var u=c(65879);let h=(()=>{class p{constructor(_){this.el=_}onInput(){this.adjustTextAreaHeight(this.el.nativeElement)}ngAfterViewInit(){this.adjustTextAreaHeight(this.el.nativeElement)}adjustTextAreaHeight(_){_.style.overflow="hidden",_.style.height="auto",_.style.height=_.scrollHeight+30+"px"}}return p.\u0275fac=function(_){return new(_||p)(u.Y36(u.SBq))},p.\u0275dir=u.lG2({type:p,selectors:[["textarea","autoResize",""]],hostBindings:function(_,m){1&_&&u.NdJ("input",function(x){return m.onInput(x.target.value)})}}),p})()},43277:(b,f,c)=>{c.d(f,{C:()=>q});var u=c(19347),h=c(66469),p=c(72164),t=c(65879),_=c(3309),m=c(96814),r=c(49538),x=c(78497),T=c(71646),k=c(36727);function A(n,l){1&n&&(t.TgZ(0,"div",9)(1,"b"),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&n&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"lang_azt_muc_do_thuon_thuc_ky_nang")))}function y(n,l){1&n&&(t.TgZ(0,"div",10)(1,"h4",11),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"lang_azt_muc_do_thuon_thuc_ky_nang")," "))}function O(n,l){1&n&&(t.TgZ(0,"div",12)(1,"span",13),t._UZ(2,"azt-loading-ui"),t.qZA()())}function I(n,l){if(1&n&&(t.TgZ(0,"div",15)(1,"div",16)(2,"div",17),t._UZ(3,"div",18),t.qZA()()()),2&n){const e=t.oxw(4);t.xp6(3),t.Q6J("chart",e.chartSkill)}}function D(n,l){if(1&n&&t.YNc(0,I,4,1,"div",14),2&n){const e=t.oxw(3);t.Q6J("ngIf",e.chartSkill)}}function z(n,l){if(1&n){const e=t.EpF();t.TgZ(0,"div",19)(1,"button",20),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.dialogRef.close())}),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()}2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"lang_auto_dong")," "))}function Z(n,l){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,A,4,3,"div",4),t.YNc(2,y,4,3,"div",5),t.YNc(3,O,3,0,"div",6),t.TgZ(4,"azt-mat-dialog-content"),t.YNc(5,D,1,1,"ng-template",null,7,t.W1O),t.qZA(),t.YNc(7,z,4,3,"div",8),t.qZA()),2&n){const e=t.MAs(6),o=t.oxw(2);t.xp6(1),t.Q6J("ngIf",1==o.type),t.xp6(1),t.Q6J("ngIf",!o.type),t.xp6(1),t.Q6J("ngIf",o.statusObj.loading)("ngIfElse",e),t.xp6(4),t.Q6J("ngIf",1==o.type)}}function E(n,l){1&n&&(t.TgZ(0,"th",31),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_don_vi_kien_thuc")," "))}function P(n,l){if(1&n&&(t.TgZ(0,"td",32)(1,"span"),t._uU(2),t.qZA()()),2&n){const e=l.$implicit;t.xp6(2),t.Oqu(e.title)}}function j(n,l){1&n&&(t.TgZ(0,"th",31),t._UZ(1,"span",33),t.qZA())}const L=function(n){return{"block w-28":n}};function N(n,l){if(1&n){const e=t.EpF();t.TgZ(0,"span",35),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().$implicit,g=t.oxw(3);return t.KtG(g.goToPractice(a.examHashId))}),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()}if(2&n){const e=t.oxw(4);t.Q6J("ngClass",t.VKq(4,L,!e.isMobileDevice)),t.xp6(1),t.Oqu(t.lcZ(2,2,"lang_testbank_practice"))}}function M(n,l){if(1&n&&(t.TgZ(0,"td",32),t.YNc(1,N,3,6,"span",34),t.qZA()),2&n){const e=l.$implicit;t.xp6(1),t.Q6J("ngIf",e.examHashId)}}function R(n,l){1&n&&(t.TgZ(0,"th",36)(1,"span",33),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&n&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"lang_auto_ty_le")))}const U=function(n){return{"width.%":n}};function w(n,l){if(1&n&&(t.TgZ(0,"td",32)(1,"div",37)(2,"div",38),t.ALo(3,"number"),t.TgZ(4,"span",39),t._uU(5),t.ALo(6,"number"),t.qZA()()()()),2&n){const e=l.$implicit;t.xp6(2),t.Q6J("ngStyle",t.VKq(8,U,t.xi3(3,2,100*e.point,"1.0-1"))),t.xp6(3),t.Oqu(e.point?t.xi3(6,5,100*e.point,"1.0-1")+"%":"")}}function J(n,l){1&n&&t._UZ(0,"tr",40)}function Q(n,l){1&n&&t._UZ(0,"tr",41)}function Y(n,l){if(1&n){const e=t.EpF();t.TgZ(0,"div",21)(1,"div",9)(2,"b"),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()(),t.TgZ(5,"azt-mat-dialog-content")(6,"table",22),t.ynx(7,23),t.YNc(8,E,3,3,"th",24),t.YNc(9,P,3,1,"td",25),t.BQk(),t.ynx(10,26),t.YNc(11,j,2,0,"th",24),t.YNc(12,M,2,1,"td",25),t.BQk(),t.ynx(13,27),t.YNc(14,R,4,3,"th",28),t.YNc(15,w,7,10,"td",25),t.BQk(),t.YNc(16,J,1,0,"tr",29),t.YNc(17,Q,1,0,"tr",30),t.qZA()(),t.TgZ(18,"div",19)(19,"button",20),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.closeDetailSkill())}),t._uU(20),t.ALo(21,"mytranslate"),t.qZA()()()}if(2&n){const e=t.oxw(2);t.xp6(3),t.Oqu(t.lcZ(4,6,"lang_testbank_frontend_student_skill_statistic_title")),t.xp6(3),t.Q6J("dataSource",e.skillItem),t.xp6(10),t.Q6J("matHeaderRowDef",e.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns),t.xp6(3),t.hij(" ",t.lcZ(21,8,"lang_auto_dong")," ")}}function B(n,l){if(1&n&&(t.TgZ(0,"div",1),t.YNc(1,Z,8,5,"div",2),t.YNc(2,Y,22,10,"div",3),t.qZA()),2&n){const e=t.oxw();t.Q6J("ngClass",1==e.type?"box p-3":""),t.xp6(1),t.Q6J("ngIf",!e.skillItem.length),t.xp6(1),t.Q6J("ngIf",e.skillItem.length)}}let q=(()=>{class n extends p.e{getSkillProfile(){this.studentPracticeService.aiApiV1StudentPracticeSkillProficiencyPost({schoolLevelId:this.levelId,schoolSubjectId:this.subjectId,userId:this.userId}).subscribe({next:o=>{this.createChartSkill(o.skillChapterViewItems),this.stopStatusObj()},error:o=>{this.errorStatusObj(o.message,!0)}})}convertTitle(e,o){return this.commonService.myTranslateInstant(e)+" ("+(o.reduce((g,v)=>(g??0)+(v??0),0)?.toString()??"")+")"}createChartSkill(e){let o=e.map(i=>i.title??""),a=e.map(i=>0==i.countExcellent?null:i.countExcellent),g=e.map(i=>0==i.countGood?null:i.countGood),v=e.map(i=>0==i.countNotGood?null:i.countNotGood),C=e.map(i=>0==i.countTerrible?null:i.countTerrible),S=e.map(i=>0==i.countNonePractice?null:i.countNonePractice),H=this.convertTitle("lang_azt_xuat_sac",a),F=this.convertTitle("lang_azt_kha",g),K=this.convertTitle("lang_azt_trung_binh",v),G=this.convertTitle("lang_azt_yeu",C),W=this.convertTitle("lang_auto_chua_thi",S),$=new h.kL({chart:{type:"column",style:{fontFamily:"Arial"}},title:{text:"",align:"center"},xAxis:{categories:o},yAxis:{min:0,title:{text:this.commonService.myTranslateInstant("lang_azt_so_kien_thuc")},stackLabels:{enabled:!0}},credits:{enabled:!1},plotOptions:{column:{stacking:"normal",dataLabels:{enabled:!0}}},series:[{name:H,type:"column",data:a,color:"green",tooltip:{headerFormat:"<b>{point.x}</b><br/><b>{series.name}: {point.y}</b><br/>",pointFormatter:function(){return e[this.index].excellentSkills.map((s,d)=>d+1+": "+s.title).join("<br/>")}},events:{click:i=>{this.openDetailSkill(e[i.point.index].excellentSkills)}}},{name:F,type:"column",data:g,color:"yellow",tooltip:{headerFormat:"<b>{point.x}</b><br/><b>{series.name}: {point.y}</b><br/>",pointFormatter:function(){return e[this.index].goodSkills.map((s,d)=>d+1+": "+s.title).join("<br/>")}},events:{click:i=>{this.openDetailSkill(e[i.point.index].goodSkills)}}},{name:K,type:"column",data:v,color:"orange",tooltip:{headerFormat:"<b>{point.x}</b><br/><b>{series.name}: {point.y}</b><br/>",pointFormatter:function(){return e[this.index].notGoodSkills.map((s,d)=>d+1+": "+s.title).join("<br/>")}},events:{click:i=>{this.openDetailSkill(e[i.point.index].notGoodSkills)}}},{name:G,type:"column",data:C,color:"red",tooltip:{headerFormat:"<b>{point.x}</b><br/><b>{series.name}: {point.y}</b><br/>",pointFormatter:function(){return e[this.index].terribleSkills.map((s,d)=>d+1+": "+s.title).join("<br/>")}},events:{click:i=>{this.openDetailSkill(e[i.point.index].terribleSkills)}}},{name:W,type:"column",data:S,color:"grey",tooltip:{headerFormat:"<b>{point.x}</b><br/><b>{series.name}: {point.y}</b><br/>",pointFormatter:function(){return e[this.index].nonePracticeSkills.map((s,d)=>d+1+": "+s.title).join("<br/>")}},events:{click:i=>{this.openDetailSkill(e[i.point.index].nonePracticeSkills)}}}]});this.chartSkill=$,this.stopStatusObj()}goToPractice(e){if(!e)return;let o=this.commonService.getMyQueryParam("backto"),a=this.commonService.getCurrentUrlWithoutLocale();this.commonService.myNavigationWithQueryString("/de-thi/"+e,"?backto="+encodeURIComponent(a+"?backto="+o)),this.dialogRef.close()}openDetailSkill(e){1==this.type&&(this.skillItem=e)}closeDetailSkill(){this.skillItem=[]}ngOnInit(){super.ngOnInit(),this.validLevelAndSubject=10==this.levelId||11==this.levelId||32==this.subjectId&&12==this.levelId,this.validLevelAndSubject&&(this.initStatusObj(),this.getSkillProfile())}constructor(e,o,a){super(a,o),this.studentPracticeService=e,this.dialogRef=o,this.validLevelAndSubject=!1,this.skillItem=[],this.displayedColumns=["name","actionCol","percent"],a&&(this.subjectId=a.subjectId,this.levelId=a.levelId,this.userId=a.userId,this.type=1)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(_.p4),t.Y36(u.so,8),t.Y36(u.WI,8))},n.\u0275cmp=t.Xpm({type:n,selectors:[["coazt-student-skill-chapter"]],inputs:{type:"type",userId:"userId",levelId:"levelId",subjectId:"subjectId"},features:[t.qOj],decls:1,vars:1,consts:[[3,"ngClass",4,"ngIf"],[3,"ngClass"],[4,"ngIf"],["class","skill-statistical",4,"ngIf"],["class","mb-3",4,"ngIf"],["class","w-auto text-left bg-gray-200","style","padding: 10px 24px; margin-left: -24px; margin-right: -24px",4,"ngIf"],["class","flex justify-center items-center m-5",4,"ngIf","ngIfElse"],["doneLoading",""],["class","flex items-center justify-end pt-2 w-full bg-white",4,"ngIf"],[1,"mb-3"],[1,"w-auto","text-left","bg-gray-200",2,"padding","10px 24px","margin-left","-24px","margin-right","-24px"],[1,"font-medium"],[1,"flex","justify-center","items-center","m-5"],[1,"w-6","h-6","m-5"],["class","report-box intro-x mt-3",4,"ngIf"],[1,"report-box","intro-x","mt-3"],[1,"h-[400px]"],[1,"chart-center"],[3,"chart"],[1,"flex","items-center","justify-end","pt-2","w-full","bg-white"],[1,"btn","btn-secondary","w-32",3,"click"],[1,"skill-statistical"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","actionCol"],["matColumnDef","percent"],["mat-header-cell","","class","text-center",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[1,"center-span"],["class","text-white btn btn-pending","style","font-weight: 430;",3,"ngClass","click",4,"ngIf"],[1,"text-white","btn","btn-pending",2,"font-weight","430",3,"ngClass","click"],["mat-header-cell","",1,"text-center"],[1,"progress"],[1,"progress-done",3,"ngStyle"],[1,"text-md","font-medium","span-baseline-middle"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&t.YNc(0,B,3,3,"div",0),2&e&&t.Q6J("ngIf",o.validLevelAndSubject)},dependencies:[m.mk,m.O5,m.PC,r.BZ,r.fO,r.as,r.w1,r.Dz,r.nj,r.ge,r.ev,r.XQ,r.Gk,h.Dm,x.R,T.n,m.JJ,k.JV],encapsulation:2}),n})()}}]);