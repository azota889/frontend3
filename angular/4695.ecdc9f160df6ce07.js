"use strict";(self.webpackChunkBalacoClient=self.webpackChunkBalacoClient||[]).push([[4695],{57003:(q,F,n)=>{n.d(F,{Q:()=>J});var e=n(81519),i=n(10936),W=n(34514),t=n(47426),S=n(89163),o=n(99503),P=n(79347),c=n(33887),g=n(38009),h=n(9691),z=n(80037),$=n(48485),a=n(48891),I=n(33634),U=n(51913),y=n(3780),L=n(54460),B=n(81587),E=n(27985),N=n(52811),K=n(9842),ot=n(76975);function nt(O,w){1&O&&(a.j41(0,"div",5),a.nrm(1,"azt-loading-ui"),a.k0s())}function et(O,w){if(1&O&&(a.j41(0,"div",27)(1,"div",28),a.nrm(2,"azt-list-classroom-checkbox",29),a.k0s()()),2&O){const x=a.XpG(2);a.R7$(2),a.Y8G("form",x.form)("classroomGroupData",x.classroomWithGroup)("examClassroomObjs",x.examClassroomObjs)("permissionName",x.permissionTypes.exam)}}function tt(O,w){if(1&O&&(a.j41(0,"div",27)(1,"div",30)(2,"div",31)(3,"h3",32),a.EFF(4),a.nI1(5,"mytranslate"),a.k0s()(),a.nrm(6,"list-student-checkbox",33),a.k0s()()),2&O){const x=a.XpG(2);a.R7$(4),a.SpI(" ",a.bMT(5,5,"lang_test_config_student_list")," "),a.R7$(2),a.Y8G("form",x.form)("classroomGroupData",x.classroomWithGroup)("examStudentObjs",x.data.examStudents)("permissionName",x.permissionTypes.exam)}}function T(O,w){if(1&O){const x=a.RV6();a.j41(0,"div",6)(1,"form",7)(2,"div",8)(3,"div",9)(4,"div",10)(5,"div",11),a.EFF(6),a.nI1(7,"mytranslate"),a.k0s()(),a.j41(8,"div",12)(9,"div",13)(10,"div",14)(11,"input",15),a.bIt("change",function(){a.eBV(x);const k=a.XpG();return a.Njj(k.clearAllCheckBox(0))}),a.k0s(),a.j41(12,"label",16),a.EFF(13),a.nI1(14,"mytranslate"),a.k0s()(),a.j41(15,"div",17)(16,"input",18),a.bIt("change",function(){a.eBV(x);const k=a.XpG();return a.Njj(k.clearAllCheckBox(2))}),a.k0s(),a.j41(17,"label",19),a.EFF(18),a.nI1(19,"mytranslate"),a.k0s()(),a.j41(20,"div",20)(21,"input",21),a.bIt("change",function(){a.eBV(x);const k=a.XpG();return a.Njj(k.clearAllCheckBox(3))}),a.k0s(),a.j41(22,"label",22),a.EFF(23),a.nI1(24,"mytranslate"),a.k0s()()()(),a.DNE(25,et,3,4,"div",23)(26,tt,7,7,"div",23),a.k0s()()()(),a.j41(27,"div",24)(28,"button",25),a.bIt("click",function(){a.eBV(x);const k=a.XpG();return a.Njj(k.closeDialog())}),a.EFF(29),a.nI1(30,"mytranslate"),a.k0s(),a.j41(31,"button",26),a.bIt("click",function(){a.eBV(x);const k=a.XpG();return a.Njj(k.savePublishExam("save"))}),a.EFF(32),a.nI1(33,"mytranslate"),a.k0s()()}if(2&O){const x=a.XpG();a.R7$(),a.Y8G("formGroup",x.form),a.R7$(5),a.SpI(" ",a.bMT(7,13,"lang_testbank_test_config_who_tested")," "),a.R7$(5),a.Y8G("value",0),a.R7$(2),a.SpI(" ",a.bMT(14,15,"lang_testbank_test_config_all_people")," "),a.R7$(3),a.Y8G("value",2),a.R7$(2),a.SpI(" ",a.bMT(19,17,"lang_testbank_test_config_assigne_class")," "),a.R7$(3),a.Y8G("value",3),a.R7$(2),a.SpI(" ",a.bMT(24,19,"lang_testbank_test_config_assigne_student")," "),a.R7$(2),a.Y8G("ngIf",2===x.form.controls.whoAllow.value),a.R7$(),a.Y8G("ngIf",3===x.form.controls.whoAllow.value),a.R7$(3),a.SpI(" ",a.bMT(30,21,"lang_auto_huy")," "),a.R7$(2),a.Y8G("disabled",3===x.form.controls.whoAllow.value&&x.form.controls.studentIds.errors||2===x.form.controls.whoAllow.value&&x.form.controls.classroomFormArray.errors),a.R7$(),a.SpI(" ",a.bMT(33,23,"lang_auto_luu")," ")}}let J=(()=>{var O;class w extends c._{clearAllCheckBox(R){1==R?this.isSelectClassroom=!1:2==R&&(this.isSelectClassroom=!0)}closeDialog(R){this.dialogRef.close(R)}savePublishExam(R){this.initStatusObj();let k="publish"===R?1:void 0;var m=this.form.getRawValue();const M=this.sAztClassroomCheckboxService.getClassroomIdsCheckedInGroup(this.form.controls.classroomFormArray);let b=[];if(3==m.whoAllow&&m.studentIds&&m.studentIds.length){let Y=this.commonService.arrayToDictionary(m.studentIds,v=>v.classroomId.toString());Object.entries(Y).forEach(([v,D],s)=>{let C=this.commonService.getFirstOfArray(D)?.classroomId;C&&b?.push({classroomId:C,assignStudentIds:D.map(d=>d.studentId)})})}else b=void 0;let j={whoAllow:m.whoAllow,isPublished:k??void 0,classroomIds:M,assignStudents:b,isSaveConfig:0};var u=this.permissionService.hasEditPermission("exam",this.obj)?this.documentConfigService.apiDocumentConfigSaveExamConfigPost(this.hashId,j):this.documentConfigService.apiDocumentConfigSaveExamDataForConfigClassroomPost(this.hashId,j);this.waitDestroy(u.subscribe(Y=>{1==Y.success?(this.successStatusObj(),this.showSuccessSnack("lang_auto_luu_thanh_cong"),this.closeDialog(Y.data?.obj)):this.errorStatusObj(Y.message??"",!0)}))}getExamDataByHashId(R){this.initStatusObj(),this.waitDestroy(this.documentConfigService.apiDocumentConfigGetExamDataForConfigClassroomV2Get(R).subscribe(k=>{if(1==k.success){if(null!=k.data){var M,m=k.data?.examObj;if(!(M=this.castObj(m)))return;M.limitQuestionGroupsParse=this.commonService.myParseJson(m.limitQuestionGroups??""),this.obj=M,this.hashId=this.obj.hashId??"",this.classroomWithGroup=k.data.classroomGroupObjs??new Array,this.classroomObjs=this.commonService.concatMultipleArray(k.data.classroomGroupObjs.map(b=>b.classroomObjs)),this.examClassroomObjs=k.data.examClassroomObjs??[],this.form.patchValue({whoAllow:this.obj.whoAllow}),this.isSelectClassroom=2==this.obj.whoAllow,this.successStatusObj()}}else this.errorStatusObj(k.message??"",!0)}))}ngOnInit(){super.ngOnInit(),this.getExamDataByHashId(this.hashId)}constructor(R,k,m,M,b){super(M,m),this.documentConfigService=R,this.permissionService=k,this.dialogRef=m,this.data=M,this.sAztClassroomCheckboxService=b,this.permissionTypes=g.t,this.checkDialogFastContent=[],this.classroomObjs=[],this.examClassroomObjs=[],this.isSelectClassroom=!1,this.hashId="",this.classroomWithGroup=[],this.hashId=M.hashId,this.form=new i.gE({whoAllow:new i.MJ(0,{nonNullable:!0}),classroomFormArray:new i.Yp([]),studentIds:new i.Yp([])},{validators:[z.j.classroomInGroupCheckBoxValidator,$.H.studentCheckBoxValidator]})}}return(O=w).\u0275fac=function(R){return new(R||O)(a.rXU(I.x),a.rXU(U.p),a.rXU(S.CP,8),a.rXU(S.Vh,8),a.rXU(y.Q))},O.\u0275cmp=a.VBU({type:O,selectors:[["config-online-exam-dialog"]],features:[a.Jv_([{provide:e.$O,useClass:o.fb,deps:[t.Ju,W.ij]},{provide:e.vq,useFactory:P.Yw,deps:[h.F]}]),a.Vt3],decls:6,vars:2,consts:[["doneLoading",""],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-body"],["class","loading flex items-center justify-center",4,"ngIf","ngIfElse"],[1,"loading","flex","items-center","justify-center"],[1,"col-md-12","setting"],[3,"formGroup"],[1,"setting-base"],["id","azt-config-who-allow",1,"grid","grid-cols-12","mt-4"],[1,"col-span-12","lg:col-span-3","pr-2"],[1,"mb-0","font-medium","flex","items-center"],[1,"col-span-12","lg:col-span-9"],[1,"flex","flex-col","sm:flex-row"],[1,"form-check","mr-5"],["id","config-who-all","formControlName","whoAllow","type","radio",1,"form-check-input",3,"change","value"],["for","config-who-all",1,"form-check-label"],[1,"form-check","mt-2","sm:mt-0","mr-5"],["id","config-who-class","formControlName","whoAllow","type","radio",1,"form-check-input",3,"change","value"],["for","config-who-class",1,"form-check-label"],[1,"form-check","mt-2","sm:mt-0"],["id","config-who-student","formControlName","whoAllow","type","radio",1,"form-check-input",3,"change","value"],["for","config-who-student",1,"form-check-label"],["class","col-span-12 mt-4",4,"ngIf"],[1,"text-right","mt-4"],["azt-track-service","config-exam-classroom-6-a-m4KztM",1,"btn","w-24","btn-secondary","mr-3",3,"click"],["azt-track-service","config-exam-classroom-brv1ZZTsfLY",1,"btn","w-24","btn-primary",3,"click","disabled"],[1,"col-span-12","mt-4"],[1,"azt-list-classroom"],[3,"form","classroomGroupData","examClassroomObjs","permissionName"],[1,"border","border-slate-200/60","dark:border-darkmode-400","rounded-md","pb-1"],[1,"p-3","bg-slate-100","dark:bg-darkmode-400","flex","items-center"],[1,"mr-auto"],[3,"form","classroomGroupData","examStudentObjs","permissionName"]],template:function(R,k){if(1&R&&(a.j41(0,"div",1)(1,"div",2)(2,"div",3),a.DNE(3,nt,2,0,"div",4)(4,T,34,25,"ng-template",null,0,a.C5r),a.k0s()()()),2&R){const m=a.sdS(5);a.R7$(3),a.Y8G("ngIf",k.statusObj.loading)("ngIfElse",m)}},dependencies:[L.bT,i.qT,i.me,i.Fm,i.BC,i.cb,i.j4,i.JD,B.t,E.D,N.R,K.M,ot.wp],encapsulation:2}),w})()},9842:(q,F,n)=>{n.d(F,{M:()=>rt});var e=n(10936),i=n(38009),W=n(59640),t=n(48891),S=n(54460),o=n(5502),P=n(74151),c=n(27208),g=n(89163),h=n(33887),z=n(35048);let $=(()=>{var l;class V extends h._{btnCloseDialog(_){if(!_)return this.dialogRef.close();this.dialogRef.close(_)}ngOnInit(){}constructor(_,r){super(r,_),this.dialogRef=_,this.data=r,this.selectAllFormControl=new e.MJ(!1,{nonNullable:!0}),this.showCheckedFormControl=new e.MJ(!1,{nonNullable:!0}),this.studentObjs=[],this.totalStudentsSelected=0,this.totalStudentsShow=0,this.searchContentObj=new c.Z}}return(l=V).\u0275fac=function(_){return new(_||l)(t.rXU(g.CP,8),t.rXU(g.Vh,8))},l.\u0275cmp=t.VBU({type:l,selectors:[["azt-assign-student-dialog"]],features:[t.Vt3],decls:1,vars:1,consts:[[3,"closeBox","data"]],template:function(_,r){1&_&&(t.j41(0,"azt-select-student",0),t.bIt("closeBox",function(X){return r.btnCloseDialog(X)}),t.k0s()),2&_&&t.Y8G("data",r.data)},dependencies:[z.w],encapsulation:2}),V})();var a=n(51913),I=n(3780),U=n(46899),y=n(17818),L=n(45785),B=n(47712),E=n(56551),N=n(15343),K=n(91032),ot=n(32099),nt=n(95825),et=n(76975);const tt=(l,V)=>({"classroom-box-in-full-screen-in-mobile":l,"classroom-box-in-full-screen-in-desktop":V}),T=(l,V)=>({"w-85":l,"w-56":V}),J=l=>({"ml-3":l}),O=(l,V)=>({"bg-primary text-white font-medium":l,"hover:bg-slate-100 dark:hover:bg-darkmode-400":V}),w=(l,V)=>({"bg-primary text-white font-medium":l," hover:bg-slate-100 dark:hover:bg-darkmode-400":V}),x=l=>({"grid-column":l}),R=l=>({"text-success font-medium":l});function k(l,V){if(1&l){const f=t.RV6();t.j41(0,"button",45),t.bIt("click",function(){t.eBV(f);const r=t.XpG();return t.Njj(r.selectByGroupId(void 0))}),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()}if(2&l){const f=t.XpG();t.Y8G("ngClass",t.l_i(5,O,0===f.mapClassroomGroupDataToForm.groupIdSelected,0!==f.mapClassroomGroupDataToForm.groupIdSelected)),t.R7$(),t.Lme(" ",t.bMT(2,3,"lang_auto_tat_ca")," (",f.mapClassroomGroupDataToForm.totalAllClassrooms,") ")}}function m(l,V){if(1&l){const f=t.RV6();t.j41(0,"button",48),t.bIt("click",function(){t.eBV(f);const r=t.XpG().$implicit,A=t.XpG(2);return t.Njj(A.selectByGroupId(r.groupObj))}),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()}if(2&l){const f=t.XpG().$implicit,_=t.XpG(2);t.Y8G("ngClass",t.l_i(4,w,_.mapClassroomGroupDataToForm.groupIdSelected===f.groupObj.id,_.mapClassroomGroupDataToForm.groupIdSelected!==f.groupObj.id)),t.R7$(),t.SpI(" ",t.bMT(2,2,f.groupObj.name)+" ("+f.groupObj.totalAllClassrooms+")"," ")}}function M(l,V){if(1&l&&(t.qex(0),t.DNE(1,m,3,7,"button",47),t.bVm()),2&l){const f=V.$implicit;t.R7$(),t.Y8G("ngIf",f.groupObj.isShowGroup)}}function b(l,V){if(1&l&&(t.qex(0),t.DNE(1,M,2,1,"ng-container",46),t.bVm()),2&l){const f=t.XpG();t.R7$(),t.Y8G("ngForOf",f.mapClassroomGroupDataToForm.groupObjs)}}function j(l,V){if(1&l){const f=t.RV6();t.j41(0,"button",49),t.nI1(1,"mytranslate"),t.bIt("click",function(){t.eBV(f);const r=t.XpG();return t.Njj(r.sAztMatDrawerService.openDrawer())}),t.nrm(2,"lucide-icon",50),t.k0s()}2&l&&t.FS9("matTooltip",t.bMT(1,1,"lang_auto_mo_menu"))}function u(l,V){if(1&l){const f=t.RV6();t.j41(0,"button",51),t.nI1(1,"mytranslate"),t.bIt("click",function(){t.eBV(f);const r=t.XpG();return t.Njj(r.sAztMatDrawerService.closeDrawer())}),t.nrm(2,"lucide-icon",52),t.k0s()}2&l&&t.FS9("matTooltip",t.bMT(1,1,"lang_auto_dong_menu"))}function Y(l,V){if(1&l&&(t.j41(0,"span",53),t.EFF(1),t.k0s()),2&l){const f=t.XpG();t.R7$(),t.SpI(" ",(f.filterObj.isShowChecked?1:0)+(f.filterObj.isShowNotChecked?1:0)," ")}}function v(l,V){if(1&l&&(t.qex(0),t.j41(1,"span",59),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s(),t.EFF(4),t.nI1(5,"mytranslate"),t.bVm()),2&l){const f=t.XpG().$implicit;t.R7$(2),t.JRh(t.bMT(3,2,f.groupObj.name)),t.R7$(2),t.SpI(" ","("+f.groupObj.totalAllClassrooms+" "+t.bMT(5,4,"lang_testbank_test_list_classes")+")"," ")}}function D(l,V){if(1&l&&(t.j41(0,"span",64),t.EFF(1),t.nI1(2,"slice"),t.j41(3,"span"),t.EFF(4),t.k0s()()),2&l){const f=t.XpG(2).$implicit;t.FS9("matTooltip",f.classroomObj.name),t.R7$(),t.SpI(" ",t.brH(2,4,f.classroomObj.name,0,25)+"..."," "),t.R7$(3),t.Lme("(",f.classroomObj.studentIdsSelected.length,"/",f.classroomObj.countStudents,")")}}function s(l,V){if(1&l&&(t.j41(0,"span"),t.EFF(1),t.j41(2,"span"),t.EFF(3),t.k0s()()),2&l){const f=t.XpG(2).$implicit;t.R7$(),t.SpI(" ",f.classroomObj.name," "),t.R7$(2),t.Lme("(",f.classroomObj.studentIdsSelected.length,"/",f.classroomObj.countStudents,")")}}function C(l,V){1&l&&(t.j41(0,"span",65),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&l&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"lang_testbank_test_config_share")," "))}function d(l,V){if(1&l){const f=t.RV6();t.qex(0),t.j41(1,"div",60),t.bIt("click",function(){t.eBV(f);const r=t.XpG().$implicit,A=t.XpG(2);return t.Njj(A.selectClassroomEvent(r.groupObj,r.classroomObj))}),t.j41(2,"span",22),t.nrm(3,"lucide-icon",61),t.k0s(),t.DNE(4,D,5,8,"span",62)(5,s,4,3,"span",15)(6,C,3,3,"span",63),t.nI1(7,"fullPermission"),t.k0s(),t.bVm()}if(2&l){let f,_;const r=t.XpG().$implicit;t.R7$(),t.Y8G("ngClass",t.eq3(7,R,r.classroomObj.studentIdsSelected.length>0)),t.R7$(3),t.Y8G("ngIf",(null!==(f=null==r.classroomObj.name?null:r.classroomObj.name.length)&&void 0!==f?f:0)>25),t.R7$(),t.Y8G("ngIf",(null!==(_=null==r.classroomObj.name?null:r.classroomObj.name.length)&&void 0!==_?_:0)<=25),t.R7$(),t.Y8G("ngIf",!t.i5U(7,4,r.classroomObj,"classroom"))}}function p(l,V){if(1&l&&(t.j41(0,"div",58),t.DNE(1,v,6,6,"ng-container",15)(2,d,8,9,"ng-container",15),t.k0s()),2&l){const f=V.$implicit;t.Y8G("ngStyle",t.eq3(3,x,"group"==f.type?"span 12 / span 12":"")),t.R7$(),t.Y8G("ngIf","group"==f.type),t.R7$(),t.Y8G("ngIf","classroom"==f.type&&f.classroomObj)}}function G(l,V){if(1&l&&(t.qex(0),t.j41(1,"ng-scrollbar",54)(2,"cdk-virtual-scroll-viewport",55)(3,"div",56),t.DNE(4,p,3,5,"div",57),t.k0s()()(),t.bVm()),2&l){const f=t.XpG();t.R7$(),t.Y8G("visibility","hover"),t.R7$(3),t.Y8G("cdkVirtualForOf",f.mapClassroomGroupDataToVirtualScroll)}}function Q(l,V){1&l&&(t.j41(0,"div",66),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&l&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"lang_student_classroom_list_class_null")," "))}let H=(()=>{var l;class V extends W.H{searchByClassroomName(_){this.searchByClassroomContentObj=_,this.checkIsFilter(),this.calculateClassroomInfo()}searchByGroupName(_){this.searchByGroupContentObj=_,this.checkIsFilter(),this.calculateClassroomInfo()}changeFilter(){this.checkIsFilter(),this.calculateClassroomInfo()}clearFilter(){this.filterObj={isShowChecked:!1,isShowNotChecked:!1},this.checkIsFilter(),this.calculateClassroomInfo()}checkIsFilter(){return 0!=this.mapClassroomGroupDataToForm.groupIdSelected||this.filterObj.isShowChecked||this.filterObj.isShowNotChecked||""!=this.searchByClassroomContentObj.searchContent.trim()}selectByGroupId(_){this.mapClassroomGroupDataToForm.groupIdSelected=_?.id??0,this.calculateClassroomInfo(),this.scrollable?.scrollTo({top:0,duration:0}),this.isMobileDevice&&this.sAztMatDrawerService.closeDrawer()}selectClassroomEvent(_,r){this.sAztDialogService.open($,{data:{classroomId:r.id,classroomName:r.name,studentIdsSelected:this.studentsSelected.find(X=>X.classroomId==r.id)?.studentIdsSelected??[]},width:"1000px",autoFocus:!1}).afterClosed().subscribe(X=>{X&&this.chooseStudentsEvent.emit(X)})}calculateClassroomInfo(){this.doFilterData(),this.countFilterData(),this.calculateVirtualScrollData()}doFilterData(){const _=this.searchByClassroomContentObj.searchContent?this.commonService.convertVietnameseToEnglish(this.searchByClassroomContentObj.searchContent).toLowerCase().trim():"",r=this.searchByGroupContentObj.searchContent?this.commonService.convertVietnameseToEnglish(this.searchByGroupContentObj.searchContent).toLowerCase().trim():"";this.mapClassroomGroupDataToForm.groupObjs.forEach(A=>{const X=this.commonService.convertVietnameseToEnglish(A.groupObj.name??"");A.groupObj.isShowGroup=""==r||X.toLowerCase().trim().includes(r),A.classroomObjs.forEach(Z=>{if(Z.isShowClassroom=!0,!this.checkIsFilter())return;const st=this.commonService.convertVietnameseToEnglish(Z.name);let lt=0==this.mapClassroomGroupDataToForm.groupIdSelected||A.groupObj.id==this.mapClassroomGroupDataToForm.groupIdSelected,ct=""==_||st.toLowerCase().trim().includes(_);Z.isShowClassroom=lt&&ct&&(this.filterObj.isShowChecked&&Z.studentIdsSelected.length>0||this.filterObj.isShowNotChecked&&Z.studentIdsSelected.length<=0||!this.filterObj.isShowChecked&&!this.filterObj.isShowNotChecked)})})}countFilterData(){this.mapClassroomGroupDataToForm.groupObjs.forEach(_=>{_.groupObj.totalAllClassrooms=_.classroomObjs.length,_.groupObj.totalViewClassrooms=_.classroomObjs.filter(r=>r.isShowClassroom).length}),this.mapClassroomGroupDataToForm.totalAllClassrooms=this.mapClassroomGroupDataToForm.groupObjs.reduce((_,r)=>_+r.groupObj.totalAllClassrooms,0),this.mapClassroomGroupDataToForm.totalViewClassrooms=this.mapClassroomGroupDataToForm.groupObjs.reduce((_,r)=>_+r.groupObj.totalViewClassrooms,0)}calculateVirtualScrollData(){var _=[];this.mapClassroomGroupDataToForm.groupObjs.filter(r=>r.groupObj.totalViewClassrooms>0).forEach(r=>{_.push({type:"group",groupObj:r.groupObj,classroomObj:void 0}),r.classroomObjs.filter(A=>A.isShowClassroom).forEach(A=>{_.push({type:"classroom",groupObj:r.groupObj,classroomObj:A})})}),this.mapClassroomGroupDataToVirtualScroll=_}initClassroomData(){this.classroomGroupData=this.classroomGroupData.map(_=>({groupObj:_.groupObj,isOwned:_.isOwned,classroomObjs:_.classroomObjs.filter(r=>null!=r.permissionObj&&this.permissionService.hasCreatePermission(this.listPermissionTypes[this.permissionName],r))})),this.mapClassroomGroupDataToForm.groupObjs=this.classroomGroupData.map(_=>({groupObj:{..._.groupObj,isShowGroup:!0,totalAllClassrooms:0,totalViewClassrooms:0},isOwned:_.isOwned,classroomObjs:_.classroomObjs.map(r=>{let A=this.studentsSelected.find(X=>X.classroomId==r.id)?.studentIdsSelected??[];return{...r,studentIdsSelected:A,isShowClassroom:!0}})})),this.calculateClassroomInfo()}ngOnChanges(){this.initClassroomData()}ngOnInit(){super.ngOnInit(),this.classroomGroupData.forEach(_=>_.classroomObjs.map(r=>r.name=this.commonService.myTranslateInstant(r.name)??"")),this.initClassroomData()}constructor(_,r,A,X){super(),this.sAztMatDrawerService=_,this.permissionService=r,this.sAztClassroomCheckboxService=A,this.sAztDialogService=X,this.permissionName=i.t.exam,this.defaultCssClass="classroom-box-in-single-page",this.chooseStudentsEvent=new t.bkB,this.studentsSelected=[],this.mapClassroomGroupDataToForm={groupObjs:[],groupIdSelected:0,totalAllClassrooms:0,totalViewClassrooms:0},this.mapClassroomGroupDataToVirtualScroll=[],this.listPermissionTypes=i.t,this.searchByClassroomContentObj=new c.Z,this.searchByGroupContentObj=new c.Z,this.filterObj={isShowChecked:!1,isShowNotChecked:!1}}}return(l=V).\u0275fac=function(_){return new(_||l)(t.rXU(P.n),t.rXU(a.p),t.rXU(I.Q),t.rXU(U.i))},l.\u0275cmp=t.VBU({type:l,selectors:[["azt-list-classroom-view-tree"]],viewQuery:function(_,r){if(1&_&&t.GBs(o.Yh,7),2&_){let A;t.mGM(A=t.lsd())&&(r.scrollable=A.first)}},inputs:{classroomGroupData:"classroomGroupData",permissionName:"permissionName",defaultCssClass:"defaultCssClass",studentsSelected:"studentsSelected"},outputs:{chooseStudentsEvent:"chooseStudentsEvent"},features:[t.Jv_([P.n]),t.Vt3,t.OA$],decls:66,vars:55,consts:[["maximize","maximize"],["drawer",""],["menuFilter","matMenu"],["emptyClassroom",""],["maximize","",1,"azt-list-classroom-by-group"],[1,"azt-drawer-container",3,"ngClass","hasBackdrop"],[3,"openedChange","ngClass","mode","opened"],[1,"box","h-full","border","border-slate-200/60","dark:border-darkmode-400"],[1,"flex","rounded-md","border-b","border-slate-200","dark:border-darkmode-400","p-2","text-slate-500",2,"border-bottom-right-radius","0","border-bottom-left-radius","0"],[1,"search-box"],[3,"onSearch","isServerSearch","placeholder","searchContentObj","styleInput"],[2,"height","calc(100% - 50px)"],["track","vertical","pointerEventsMethod","scrollbar",1,"w-full",3,"visibility"],[1,"p-2"],["azt-track-service","azt-list-classroom-checkbox-TUrZzBy9T","class","flex items-center px-3 py-2 rounded-md w-full",3,"ngClass","click",4,"ngIf"],[4,"ngIf"],[1,"azt-drawer-content","h-full",3,"ngClass"],[1,"box","border","border-slate-200","dark:border-darkmode-400","h-full"],[1,"flex","items-center","rounded-md","border-b","border-slate-200","dark:border-darkmode-400","p-2","text-slate-500",2,"border-bottom-right-radius","0","border-bottom-left-radius","0"],["azt-track-service","azt-list-classroom-checkbox-WB1u8XZHUS","class","btn btn-sm mr-2",3,"matTooltip","click",4,"ngIf"],["azt-track-service","azt-list-classroom-checkbox-q2BPTM5lPo","class","btn btn-sm mr-2",3,"matTooltip","click",4,"ngIf"],[1,"flex","ml-auto"],[1,"mr-2"],[1,"filter","mr-2"],[1,"btn","btn-sm",3,"matMenuTriggerFor"],[1,"w-4","h-4","inline-block"],["name","filter","size","18"],[1,"azt-hidden","md:block","ml-2"],["class","p-1 ml-1 items-center justify-center rounded-full text-xs bg-primary text-white cursor-pointer font-medium","style","display: inline-flex; width: 15px; height: 15px; font-size: 10px",4,"ngIf"],[1,"flex","items-center"],[3,"maximize"],[1,"dropdown-menu","show","relative","w-56"],[1,"dropdown-content"],["azt-track-service","azt-list-classroom-checkbox-mJWF3uWTQJ","for","isShowChecked",1,"dropdown-item","cursor-pointer",3,"click"],[1,"form-check","form-switch","ml-auto"],["id","isShowChecked","type","checkbox",1,"show-code","form-check-input","ml-2",3,"change","checked"],["azt-track-service","azt-list-classroom-checkbox-pFWk_nWN9o","for","isShowNotChecked",1,"dropdown-item","cursor-pointer",3,"click"],["id","isShowNotChecked","type","checkbox",1,"show-code","form-check-input","ml-2",3,"change","checked"],[1,"dropdown-divider"],[1,"flex","p-1"],[1,"btn","btn-secondary","py-1","px-2","ml-auto","mr-2"],["azt-track-service","azt-list-classroom-checkbox-3OFGLRY5fa",3,"click"],["azt-track-service","azt-list-classroom-checkbox-iJlkvwO36n",1,"btn","btn-danger","py-1","px-2",3,"click"],[1,"w-full",2,"height","calc(100% - 50px)"],[4,"ngIf","ngIfElse"],["azt-track-service","azt-list-classroom-checkbox-TUrZzBy9T",1,"flex","items-center","px-3","py-2","rounded-md","w-full",3,"click","ngClass"],[4,"ngFor","ngForOf"],["azt-track-service","azt-list-classroom-checkbox-hUXQqnl7px","class","flex items-center px-3 py-2 rounded-md w-full text-left",3,"ngClass","click",4,"ngIf"],["azt-track-service","azt-list-classroom-checkbox-hUXQqnl7px",1,"flex","items-center","px-3","py-2","rounded-md","w-full","text-left",3,"click","ngClass"],["azt-track-service","azt-list-classroom-checkbox-WB1u8XZHUS",1,"btn","btn-sm","mr-2",3,"click","matTooltip"],["name","panel-left-open","size","16"],["azt-track-service","azt-list-classroom-checkbox-q2BPTM5lPo",1,"btn","btn-sm","mr-2",3,"click","matTooltip"],["name","panel-left-close","size","16"],[1,"p-1","ml-1","items-center","justify-center","rounded-full","text-xs","bg-primary","text-white","cursor-pointer","font-medium",2,"display","inline-flex","width","15px","height","15px","font-size","10px"],["track","vertical",1,"h-full",3,"visibility"],["scrollViewport","","itemSize","10"],[1,"grid","grid-cols-12","gap-3","p-3","pt-2"],["class","col-span-12 md:col-span-6",3,"ngStyle",4,"cdkVirtualFor","cdkVirtualForOf"],[1,"col-span-12","md:col-span-6",3,"ngStyle"],[1,"font-bold"],["azt-track-service","azt-list-classroom-view-tree-o6QRGuakJ",1,"flex","items-center","clickable","hover:text-primary",3,"click","ngClass"],["name","align-justify","size","16"],[3,"matTooltip",4,"ngIf"],["class","ml-2 py-0.5 px-2 rounded-full text-xs bg-primary text-white cursor-pointer font-medium",4,"ngIf"],[3,"matTooltip"],[1,"ml-2","py-0.5","px-2","rounded-full","text-xs","bg-primary","text-white","cursor-pointer","font-medium"],[1,"flex","items-center","justify-center",2,"height","200px"]],template:function(_,r){if(1&_){const A=t.RV6();t.j41(0,"div",4,0)(2,"mat-drawer-container",5)(3,"mat-drawer",6,1),t.bIt("openedChange",function(Z){return t.eBV(A),t.Njj(r.sAztMatDrawerService.openedChange(Z))}),t.j41(5,"div",7)(6,"div",8)(7,"div",9)(8,"azt-search-box",10),t.nI1(9,"mytranslate"),t.bIt("onSearch",function(Z){return t.eBV(A),t.Njj(r.searchByGroupName(Z.searchObj))}),t.k0s()()(),t.j41(10,"div",11)(11,"ng-scrollbar",12)(12,"div",13),t.DNE(13,k,3,8,"button",14)(14,b,2,1,"ng-container",15),t.k0s()()()()(),t.j41(15,"mat-drawer-content")(16,"div",16)(17,"div",17)(18,"div",18),t.DNE(19,j,3,3,"button",19)(20,u,3,3,"button",20),t.j41(21,"div",21)(22,"div",22)(23,"azt-search-box",10),t.nI1(24,"mytranslate"),t.bIt("onSearch",function(Z){return t.eBV(A),t.Njj(r.searchByClassroomName(Z.searchObj))}),t.k0s()(),t.j41(25,"div",23)(26,"button",24)(27,"span",25),t.nrm(28,"lucide-icon",26),t.k0s(),t.j41(29,"span",27),t.EFF(30),t.nI1(31,"mytranslate"),t.DNE(32,Y,2,1,"span",28),t.k0s()()(),t.j41(33,"div",29),t.nrm(34,"azt-maximize-box",30),t.k0s(),t.j41(35,"mat-menu",null,2)(37,"div",31)(38,"ul",32)(39,"li")(40,"label",33),t.bIt("click",function(Z){return t.eBV(A),t.Njj(Z.stopPropagation())}),t.EFF(41),t.nI1(42,"mytranslate"),t.j41(43,"div",34)(44,"input",35),t.bIt("change",function(){return t.eBV(A),r.filterObj.isShowChecked=!r.filterObj.isShowChecked,t.Njj(r.changeFilter())}),t.k0s()()()(),t.j41(45,"li")(46,"label",36),t.bIt("click",function(Z){return t.eBV(A),t.Njj(Z.stopPropagation())}),t.EFF(47),t.nI1(48,"mytranslate"),t.j41(49,"div",34)(50,"input",37),t.bIt("change",function(){return t.eBV(A),r.filterObj.isShowNotChecked=!r.filterObj.isShowNotChecked,t.Njj(r.changeFilter())}),t.k0s()()()(),t.j41(51,"li"),t.nrm(52,"hr",38),t.k0s(),t.j41(53,"li")(54,"div",39)(55,"button",40),t.EFF(56),t.nI1(57,"mytranslate"),t.k0s(),t.j41(58,"div",41),t.bIt("click",function(Z){return t.eBV(A),t.Njj(Z.stopPropagation())}),t.j41(59,"button",42),t.bIt("click",function(){return t.eBV(A),t.Njj(r.clearFilter())}),t.EFF(60),t.nI1(61,"mytranslate"),t.k0s()()()()()()()()(),t.j41(62,"div",43),t.DNE(63,G,5,2,"ng-container",44)(64,Q,3,3,"ng-template",null,3,t.C5r),t.k0s()()()()()()}if(2&_){const A=t.sdS(1),X=t.sdS(36),Z=t.sdS(65);t.R7$(2),t.HbH(r.defaultCssClass),t.Y8G("ngClass",t.l_i(47,tt,r.isMobileDevice,!r.isMobileDevice))("hasBackdrop",r.sAztMatDrawerService.hasBackdrop),t.R7$(),t.FS9("opened",r.sAztMatDrawerService.isOpenSideNav?"true":"false"),t.Y8G("ngClass",t.l_i(50,T,r.isMobileDevice,!r.isMobileDevice))("mode",r.sAztMatDrawerService.mode),t.R7$(5),t.Y8G("isServerSearch",!1)("placeholder",t.bMT(9,33,"lang_azt_search_class_group"))("searchContentObj",r.searchByGroupContentObj)("styleInput","pr-10 py-1"),t.R7$(3),t.Y8G("visibility","hover"),t.R7$(2),t.Y8G("ngIf",!r.searchByGroupContentObj.searchContent),t.R7$(),t.Y8G("ngIf",r.mapClassroomGroupDataToForm.groupObjs.length>1),t.R7$(2),t.Y8G("ngClass",t.eq3(53,J,!r.isMobileDevice&&r.sAztMatDrawerService.isOpenSideNav)),t.R7$(3),t.Y8G("ngIf",!r.sAztMatDrawerService.isOpenSideNav||r.isMobileDevice),t.R7$(),t.Y8G("ngIf",r.sAztMatDrawerService.isOpenSideNav&&!r.isMobileDevice),t.R7$(3),t.Y8G("isServerSearch",!1)("placeholder",t.bMT(24,35,"lang_azt_search_class"))("searchContentObj",r.searchByClassroomContentObj)("styleInput","py-1"),t.R7$(3),t.Y8G("matMenuTriggerFor",X),t.R7$(4),t.SpI(" ",t.bMT(31,37,"lang_testbank_tested_list_sort")," "),t.R7$(2),t.Y8G("ngIf",r.filterObj.isShowChecked||r.filterObj.isShowNotChecked),t.R7$(2),t.Y8G("maximize",A),t.R7$(7),t.SpI(" ",t.bMT(42,39,"lang_azt_selected_classes")," "),t.R7$(3),t.Y8G("checked",r.filterObj.isShowChecked),t.R7$(3),t.SpI(" ",t.bMT(48,41,"lang_azt_unselected_classes")," "),t.R7$(3),t.Y8G("checked",r.filterObj.isShowNotChecked),t.R7$(6),t.JRh(t.bMT(57,43,"lang_button_close")),t.R7$(4),t.JRh(t.bMT(61,45,"lang_button_delete")),t.R7$(3),t.Y8G("ngIf",r.mapClassroomGroupDataToForm.totalViewClassrooms>0)("ngIfElse",Z)}},dependencies:[S.YU,S.Sq,S.bT,S.B3,y.kk,y.Cp,L.qe,L.$C,L.$l,B.oV,E.yg,E.E$,E.d6,o.Yh,o.Gl,N.WGl,K.e,ot.W,nt.g,S.P9,et.wp,et.gC],encapsulation:2}),V})();function at(l,V){1&l&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&l&&(t.R7$(),t.JRh(t.bMT(2,1,"lang_testbank_test_config_you_not_yet_student")))}function it(l,V){if(1&l){const f=t.RV6();t.j41(0,"div")(1,"azt-list-classroom-view-tree",1),t.bIt("chooseStudentsEvent",function(r){t.eBV(f);const A=t.XpG();return t.Njj(A.chooseStudentsEvent(r))}),t.k0s(),t.j41(2,"div",2)(3,"div",3),t.DNE(4,at,3,3,"span",0),t.k0s()()()}if(2&l){const f=t.XpG();t.R7$(),t.Y8G("classroomGroupData",f.classroomGroupData)("studentsSelected",f.studentsSelected)("permissionName",f.permissionName),t.R7$(3),t.Y8G("ngIf",f.form.controls.studentIds.errors)}}let rt=(()=>{var l;class V extends W.H{chooseStudentsEvent(_){let r=this.form.controls.studentIds.controls.filter(A=>A.controls.classroomId.value!=_.classroomId);this.form.controls.studentIds.clear(),r.forEach(A=>{this.form.controls.studentIds.push(A)}),_.studentIdsSelected.forEach(A=>{this.form.controls.studentIds.push(new e.gE({classroomId:new e.MJ(_.classroomId,{nonNullable:!0}),studentId:new e.MJ(A,{nonNullable:!0})}))}),this.calculateStudentsSelected()}initStudentsControl(){this.form.controls.studentIds.clear(),this.examStudentObjs.forEach(_=>{this.form.controls.studentIds.push(new e.gE({classroomId:new e.MJ(_.classroomId,{nonNullable:!0}),studentId:new e.MJ(_.studentId,{nonNullable:!0})}))}),this.calculateStudentsSelected()}calculateStudentsSelected(){let _=[],r=this.commonService.arrayToDictionary(this.form.controls.studentIds.getRawValue(),A=>A.classroomId.toString());Object.entries(r).forEach(([A,X],Z)=>{let st=this.commonService.getFirstOfArray(X)?.classroomId;st&&_.push({classroomId:st,classroomName:"",studentIdsSelected:X.map(lt=>lt.studentId)})}),this.studentsSelected=_}ngOnInit(){super.ngOnInit(),this.initStudentsControl()}constructor(){super(),this.examStudentObjs=[],this.permissionName=i.t.exam,this.studentsSelected=[]}}return(l=V).\u0275fac=function(_){return new(_||l)},l.\u0275cmp=t.VBU({type:l,selectors:[["list-student-checkbox"]],inputs:{form:"form",classroomGroupData:"classroomGroupData",examStudentObjs:"examStudentObjs",permissionName:"permissionName"},features:[t.Vt3],decls:1,vars:1,consts:[[4,"ngIf"],[3,"chooseStudentsEvent","classroomGroupData","studentsSelected","permissionName"],[1,"mt-2"],[1,"text-xs","font-medium","text-danger"]],template:function(_,r){1&_&&t.DNE(0,it,5,4,"div",0),2&_&&t.Y8G("ngIf",r.form)},dependencies:[S.bT,H,et.wp],encapsulation:2}),V})()},92654:(q,F,n)=>{n.d(F,{x:()=>h});var e=n(51698),i=n(82716),W=n(33860),t=n(57003),S=n(92274),o=n(57226),P=n(48891),c=n(53793),g=n(46899);let h=(()=>{var z;class ${doExamAction(I,U){switch(U){case S.$.CONFIG_EXAM_CLASSROOM:return this.showConfigExamClassroomDialog(I);case S.$.SHOW_EXAM_DETAIL:this.openDialog(I);break;case S.$.SHARE_OFFLINE_RESULT:this.showOfflineShareDialog(I);break;case S.$.COPY_EXAM_LINK:this.copyExamLink()}return this.returnUndefinedOutput()}copyExamLink(){this.commonService.snackSuccess("lang_auto_sao_chep_thanh_cong")}showConfigExamClassroomDialog(I){return new e.c(U=>{this.sAztDialogService.open(t.Q,{width:"900px",data:{hashId:I.examObj.hashId,examStudents:I.examObj?.examStudents??[]},restoreFocus:!1}).afterClosed().subscribe(L=>{L?(U.next({reloadData:!0}),U.complete()):(U.next(void 0),U.complete())})})}openDialog(I){"CAPACITY"!==I.examObj?.objectType&&this.showExamDetailDialog(I),"CAPACITY"===I.examObj?.objectType&&this.openDialogAssessmentExamDetail(I)}openDialogAssessmentExamDetail(I){this.sAztDialogService.open(o.E,{width:"800px",maxWidth:"90vw",enterAnimationDuration:"0ms",exitAnimationDuration:"0ms",data:{id:I.examObj?.id??0},restoreFocus:!1}).afterClosed().subscribe(y=>{})}showExamDetailDialog(I){let U={obj:{...I.examObj,countQuestion:0,showFrontend:1,editable:!0,allowStudentView:!0},globalLadingPage:I.globalLadingPage,curCateId:I.categoryId,isOnLib:0,isShow:!0,showDelete:!0};this.sAztDialogService.open(W.c,{width:"800px",maxWidth:"90vw",enterAnimationDuration:"0ms",exitAnimationDuration:"0ms",data:U,restoreFocus:!1}).afterClosed().subscribe(L=>{})}showOfflineShareDialog(I){this.sAztDialogService.open(i.h,{width:"1000px",data:{examHashId:I.examObj.hashId,useDialog:!0},restoreFocus:!1})}returnUndefinedOutput(){return new e.c(I=>{I.next(void 0),I.complete()})}constructor(I,U){this.commonService=I,this.sAztDialogService=U}}return(z=$).\u0275fac=function(I){return new(I||z)(P.KVO(c.R),P.KVO(g.i))},z.\u0275prov=P.jDH({token:z,factory:z.\u0275fac,providedIn:"root"}),$})()},31291:(q,F,n)=>{n.d(F,{n:()=>t});var e=n(43362),i=n(48891),W=n(53793);let t=(()=>{var S;class o{sortExamByColumn(c,g,h){return g==e.N.BY_NAME?this.sortExamByName(c,h):g==e.N.BY_PUBLISH_STATUS?this.sortExamByPublishStatus(c,h):g==e.N.BY_UPDATED_DATE?this.sortExamByDateUpdated(c,h):g==e.N.BY_ATTENDED?this.sortExamByAttended(c,h):this.sortExamByName(c,h)}sortExamByName(c,g){var h=[...c.rootCategoryObjs??[]],z=[...c.rootDocumentObjs??[]];return 1==g?{categoryObjs:this._sortCateByName(h),documentObjs:this._sortDocumentByName(z)}:{categoryObjs:this._sortCateByName(h).reverse(),documentObjs:this._sortDocumentByName(z).reverse()}}sortExamByPublishStatus(c,g){var h=[...c.rootDocumentObjs??[]];return 1==g?{categoryObjs:c.currentCategoryObjs,documentObjs:this._sortDocumentByPublish(h,h?.length)}:{categoryObjs:c.currentCategoryObjs,documentObjs:this._sortDocumentByPublish(h,h?.length).reverse()}}sortExamByDateUpdated(c,g){var h=this.commonService.castObj(c.rootCategoryObjs),z=this.commonService.castObj(c.rootDocumentObjs);return 1==g?{categoryObjs:this._sortCateByDateUpdateExam(h??[]),documentObjs:this._sortDocumentByUpdateTime(z??[])}:{categoryObjs:this._sortCateByDateUpdateExam(h??[]).reverse(),documentObjs:this._sortDocumentByUpdateTime(z??[]).reverse()}}sortExamByAttended(c,g){var h=this.commonService.castObj(c.rootDocumentObjs);return 1==g?{categoryObjs:c.currentCategoryObjs,documentObjs:this._sortDocumentByAttended(h??[])}:{categoryObjs:c.currentCategoryObjs,documentObjs:this._sortDocumentByAttended(h??[]).reverse()}}_sortCateByName(c){return c?.sort((g,h)=>(g.name?.trim()??"").localeCompare(h.name?.trim()??""))??[]}_sortDocumentByName(c){return c?.sort((g,h)=>(g.name?.trim()??"").localeCompare(h.name?.trim()??""))??[]}_sortDocumentByPublish(c,g){let h=[],z=[];for(let $=0;$<(g??0);$++)0==c?.[$].isPublished&&h.push(c[$]),1==c?.[$].isPublished&&z.push(c[$]);return h.concat(z)}_sortCateByDateUpdateExam(c){return c.sort((g,h)=>Number(new Date(g.updatedAt??""))-Number(new Date(h.updatedAt??""))),c}_sortDocumentByUpdateTime(c){return c?.sort((g,h)=>Number(new Date(g.updatedAt??""))-Number(new Date(h.updatedAt??"")))}_sortDocumentByAttended(c){return c?.sort((g,h)=>Number(g.attended)-Number(h.attended))}constructor(c){this.commonService=c}}return(S=o).\u0275fac=function(c){return new(c||S)(i.KVO(W.R))},S.\u0275prov=i.jDH({token:S,factory:S.\u0275fac,providedIn:"root"}),o})()},92274:(q,F,n)=>{n.d(F,{$:()=>e});var e=function(i){return i[i.CONFIG_EXAM_CLASSROOM=0]="CONFIG_EXAM_CLASSROOM",i[i.SHOW_EXAM_DETAIL=1]="SHOW_EXAM_DETAIL",i[i.SHARE_OFFLINE_RESULT=2]="SHARE_OFFLINE_RESULT",i[i.COPY_EXAM_LINK=3]="COPY_EXAM_LINK",i}(e||{})},45306:(q,F,n)=>{n.d(F,{d:()=>e});var e=function(i){return i[i.OFFLINE_CONFIG=0]="OFFLINE_CONFIG",i[i.CONFIG_EXAM=1]="CONFIG_EXAM",i[i.EDIT_EXAM=2]="EDIT_EXAM",i[i.POWER_POINT=3]="POWER_POINT",i[i.STATISTIC=4]="STATISTIC",i[i.TESTED_LIST=5]="TESTED_LIST",i}(e||{})},43362:(q,F,n)=>{n.d(F,{N:()=>e});var e=function(i){return i[i.BY_NAME=0]="BY_NAME",i[i.BY_PUBLISH_STATUS=1]="BY_PUBLISH_STATUS",i[i.BY_UPDATED_DATE=2]="BY_UPDATED_DATE",i[i.BY_ATTENDED=3]="BY_ATTENDED",i}(e||{})},45168:(q,F,n)=>{n.d(F,{C:()=>e});var e=function(i){return i[i.multipleChoice=1]="multipleChoice",i[i.essay=3]="essay",i[i.trueFalse=5]="trueFalse",i[i.fill=4]="fill",i}(e||{})},51221:(q,F,n)=>{n.d(F,{$:()=>e});var e=function(i){return i.COPY="copy",i.CUT="cut",i.DELETE="delete",i.SELECTED="selected",i}(e||{})},86925:(q,F,n)=>{n.d(F,{Y:()=>e});var e=function(i){return i[i.EXAM_CATEGORY=0]="EXAM_CATEGORY",i[i.EXAM=1]="EXAM",i}(e||{})},30977:(q,F,n)=>{n.d(F,{g:()=>t});var e=n(51221),i=n(86925),W=n(48891);let t=(()=>{var S;class o{constructor(){this.clipboardObjs=[]}setActionToClipboard(c,g,h,z){var $={id:c,name:z,type:g,action:h};this.clipboardObjs.filter(I=>I.id==$.id&&I.type==$.type).length>0?this.clipboardObjs.forEach(I=>{I.id==$.id&&I.type==$.type&&(I.action=$.action)}):this.clipboardObjs.push($)}hasInClipboard(c,g){return this.clipboardObjs.filter(z=>z.id==c&&z.type==g).length>0}hasCopyFolderActionInClipboard(){var c=!1;return this.clipboardObjs.forEach(g=>{g.type==i.Y.EXAM_CATEGORY&&g.action==e.$.COPY&&(c=!0)}),c}getActionOfDocumentObj(c,g){var h=this.clipboardObjs.filter(z=>z.id==c&&z.type==g);if(h&&h.length>0)return h[0].action}removeDocumentInClipboard(c,g){for(var h=0;h<this.clipboardObjs.length;h++)this.clipboardObjs[h].id==c&&this.clipboardObjs[h].type==g&&this.clipboardObjs.splice(h,1)}isPasteToSelfFolder(c){var g=!1;return this.clipboardObjs.forEach(h=>{h.id==c&&h.type==i.Y.EXAM_CATEGORY&&h.action==e.$.COPY&&(g=!0)}),g}getCurrentClipBoard(){return this.clipboardObjs}resetClipBoardAfterPasteOrCancelAllActions(){this.clipboardObjs=[]}}return(S=o).\u0275fac=function(c){return new(c||S)},S.\u0275prov=W.jDH({token:S,factory:S.\u0275fac,providedIn:"root"}),o})()},48485:(q,F,n)=>{n.d(F,{H:()=>e});class e{static studentCheckBoxValidator(W){const S=W.controls.whoAllow,o=W.controls.studentIds;return S&&o?3!=S.value||e.countCheckBox(o)>=1?(o.setErrors(null),null):(o.setErrors({studentCheckBoxValidator:!0}),{identityRevealed:!0}):null}static countCheckBox(W){return W.getRawValue().length}}},62538:(q,F,n)=>{n.d(F,{O:()=>U});var e=n(48891),i=n(45168),W=n(59640),t=n(67638),S=n(54460),o=n(76975);const P=["table"],c=()=>[];function g(y,L){if(1&y&&(e.j41(0,"td",6),e.EFF(1),e.nI1(2,"formatOfflineExamHashIdToNumber"),e.k0s()),2&y){const B=L.$implicit,E=L.index;e.BMQ("excelRow",1)("excelColumn",E+1),e.R7$(),e.SpI(" ",e.bMT(2,3,null==B?null:B.offlineMixQuestionHashId)," ")}}function h(y,L){if(1&y&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&y){const B=e.XpG(2).$implicit,E=e.XpG().$implicit;e.R7$(),e.SpI(" ",e.bMT(2,1,B.offlineQuestionObjs[E].answer)," ")}}function z(y,L){1&y&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&y&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_core_essay_question")," "))}function $(y,L){if(1&y&&(e.j41(0,"span"),e.DNE(1,h,3,3,"span",7)(2,z,3,3,"span",7),e.k0s()),2&y){const B=e.XpG().$implicit,E=e.XpG().$implicit;e.R7$(),e.Y8G("ngIf",!(null!=B.offlineQuestionObjs&&null!=B.offlineQuestionObjs[E]&&B.offlineQuestionObjs[E].isEssay)),e.R7$(),e.Y8G("ngIf",null==B.offlineQuestionObjs||null==B.offlineQuestionObjs[E]?null:B.offlineQuestionObjs[E].isEssay)}}function a(y,L){if(1&y&&(e.j41(0,"td",6),e.DNE(1,$,3,2,"span",7),e.k0s()),2&y){let B;const E=L.$implicit,N=L.index,K=e.XpG().$implicit;e.BMQ("excelRow",K+2)("excelColumn",N+1),e.R7$(),e.Y8G("ngIf",(null!==(B=null==E.offlineQuestionObjs?null:E.offlineQuestionObjs.length)&&void 0!==B?B:0)>K)}}function I(y,L){if(1&y&&(e.j41(0,"tr")(1,"td",3),e.EFF(2),e.k0s(),e.DNE(3,a,2,3,"td",4),e.k0s()),2&y){let B;const E=L.$implicit,N=e.XpG();e.R7$(),e.BMQ("excelRow",E+2)("excelColumn",0),e.R7$(),e.SpI(" ",E+N.startQuestionIndex," "),e.R7$(),e.Y8G("ngForOf",null!==(B=null==N.obj?null:N.obj.offlineMixQuestionObjs)&&void 0!==B?B:e.lJ4(4,c))}}let U=(()=>{var y;class L extends W.H{calculateMaxQuestion(){let E=0;return this.obj.offlineMixQuestionObjs&&this.obj.offlineMixQuestionObjs.forEach(N=>{E<(N.offlineQuestionObjs?.length??0)&&(E=N.offlineQuestionObjs?.length??0)}),E}processData(){for(let E=0;E<this.obj.offlineMixQuestionObjs.length;E++)for(let N=0;N<this.obj.offlineMixQuestionObjs[E].offlineQuestionObjs.length;N++)this.obj.offlineMixQuestionObjs[E].offlineQuestionObjs[N].answerType===this.offlineAnswerType.trueFalse&&(this.obj.offlineMixQuestionObjs[E].offlineQuestionObjs[N].answer=this.convertAnswerTrueFalse(this.obj.offlineMixQuestionObjs[E].offlineQuestionObjs[N].answer))}convertAnswerTrueFalse(E){const N=E.split(","),K=this.commonService.myClone(this.answerChoiceMap),ot=this.commonService.myTranslateInstant("lang_testbank_correct_answer_to_offline_exam"),nt=this.commonService.myTranslateInstant("lang_testbank_wrong_answer_to_offline_exam");return K.map(tt=>N.includes(tt)?ot:nt).join("")}ngOnChanges(){this.processData(),this.isExported=!1,this.maxQuestionIndex=this.calculateMaxQuestion(),this.totalExamCode=this.obj.offlineMixQuestionObjs?.length??0}ngAfterViewChecked(){0==this.isExported&&(this.isExported=!0,setTimeout(()=>{this.exportDataDone.emit(this.exportExcelService.exportHtmlTableToExcelBlob(this.table,!0))},0))}constructor(E){super(),this.exportExcelService=E,this.startQuestionIndex=1,this.exportDataDone=new e.bkB,this.maxQuestionIndex=0,this.totalExamCode=0,this.isExported=!1,this.offlineAnswerType=i.C,this.answerChoiceMap=["A","B","C","D"]}}return(y=L).\u0275fac=function(E){return new(E||y)(e.rXU(t.x))},y.\u0275cmp=e.VBU({type:y,selectors:[["azt-export-excel-for-answersheet"]],viewQuery:function(E,N){if(1&E&&e.GBs(P,5),2&E){let K;e.mGM(K=e.lsd())&&(N.table=K.first)}},inputs:{obj:"obj",startQuestionIndex:"startQuestionIndex"},outputs:{exportDataDone:"exportDataDone"},features:[e.Vt3,e.OA$],decls:14,vars:16,consts:[["table",""],[1,"table","table-bordered",2,"display","none"],["rowspan","2","excelStyle",'{"alignment":{"vertical":"center","horizontal":"center","wrapText":true},"font":{"bold":true}}',1,"text-center","azt-excel-cell"],["excelStyle",'{"alignment":{"vertical":"center","horizontal":"center","wrapText":true},"font":{"bold":true}}',1,"text-center","azt-excel-cell"],["class","text-center azt-excel-cell","excelStyle",'{"alignment":{"vertical":"center","horizontal":"center","wrapText":true}}',4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["excelStyle",'{"alignment":{"vertical":"center","horizontal":"center","wrapText":true}}',1,"text-center","azt-excel-cell"],[4,"ngIf"]],template:function(E,N){if(1&E&&(e.j41(0,"table",1,0)(2,"tbody")(3,"tr")(4,"td",2),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s(),e.j41(7,"td",3),e.EFF(8),e.nI1(9,"mytranslate"),e.k0s()(),e.j41(10,"tr"),e.DNE(11,g,3,5,"td",4),e.k0s(),e.DNE(12,I,4,5,"tr",5),e.nI1(13,"createEmptyArray"),e.k0s()()),2&E){let K;e.R7$(4),e.BMQ("excelRow",0)("excelColumn",0),e.R7$(),e.SpI(" ",e.bMT(6,9,"lang_testbank_answersheet_question_title")," "),e.R7$(2),e.BMQ("colspan",N.totalExamCode)("excelRow",0)("excelColumn",1),e.R7$(),e.SpI(" ",e.bMT(9,11,"lang_auto_ma_de_thi")," "),e.R7$(3),e.Y8G("ngForOf",null!==(K=null==N.obj?null:N.obj.offlineMixQuestionObjs)&&void 0!==K?K:e.lJ4(15,c)),e.R7$(),e.Y8G("ngForOf",e.bMT(13,13,N.maxQuestionIndex))}},dependencies:[S.Sq,S.bT,o.wp,o.IX,o.c],encapsulation:2}),L})()},50334:(q,F,n)=>{n.d(F,{C:()=>i});var e=n(59640);class i extends e.H{constructor(){super(...arguments),this.nodeObjs=[]}searchByText(t){this.nodeObjs=(t=this.standardSearchText(t)).trim()?this.doSearchByText(t,this.nodeObjs,[]):this.showAndExpandAll(this.nodeObjs)}expand(t){t.isExpand=!0}collapse(t){t.isExpand=!1}doSearchByText(t,S,o){for(var P of S){P.isShow=!1;let c=this.standardSearchText(P.text);(t.includes(c)||c.includes(t))&&(P.isShow=!0,P.isExpand=!0,o.forEach(g=>{g.isShow=!0,g.isExpand=!0})),P.children.length&&(P.children=this.doSearchByText(t,P.children,o.concat(P)))}return S}showAndExpandAll(t){for(var S of t)S.isShow=!0,S.isExpand=!0,S.children=this.showAndExpandAll(S.children);return t}standardSearchText(t){return t=t.toLowerCase(),t=this.commonService.removeSpecialStringInSearch(t),this.commonService.convertVietnameseToEnglish(t)}}},82716:(q,F,n)=>{n.d(F,{h:()=>tt});var e=n(10936),i=n(89163),W=n(33887),t=n(38009),S=n(80037),o=n(48891),P=n(97885),c=n(3780),g=n(54460),h=n(64160),z=n(15343),$=n(81587),a=n(27985),I=n(52811),U=n(76975);function y(T,J){1&T&&(o.j41(0,"div",9)(1,"span",10),o.nrm(2,"azt-loading-ui"),o.k0s(),o.j41(3,"span",11),o.EFF(4,"Loading..."),o.k0s()())}function L(T,J){if(1&T){const O=o.RV6();o.j41(0,"div",26)(1,"azt-list-classroom-checkbox",27),o.bIt("changeCheckboxEvent",function(x){o.eBV(O);const R=o.XpG(3);return o.Njj(R.changeStatusOfflineShare(x))}),o.k0s()()}if(2&T){const O=o.XpG(3);o.R7$(),o.Y8G("form",O.form)("classroomGroupData",O.classroomWithGroup)("shareClassroomIds",O.shareClassroomIds)("permissionName",O.permissionTypes.exam)("defaultCssClass","classroom-box-in-dialog")}}function B(T,J){if(1&T){const O=o.RV6();o.j41(0,"div",28),o.nrm(1,"input",29),o.j41(2,"button",30),o.bIt("click",function(){o.eBV(O);const x=o.XpG(3);return o.Njj(x.showCopySuccess())}),o.j41(3,"span",31),o.nrm(4,"lucide-icon",32),o.k0s(),o.EFF(5),o.nI1(6,"mytranslate"),o.k0s()()}if(2&T){const O=o.XpG(3);o.R7$(),o.Y8G("value",O.linkCopy),o.R7$(),o.Y8G("cdkCopyToClipboard",O.copyLinkToClipboard()),o.R7$(3),o.SpI(" ",o.bMT(6,3,"lang_auto_sao_chep")," ")}}function E(T,J){1&T&&(o.j41(0,"div",33)(1,"p",34),o.EFF(2),o.nI1(3,"mytranslate"),o.k0s()()),2&T&&(o.R7$(2),o.JRh(o.bMT(3,1,"lang_auto_chua_duoc_cau_hinh_tra_de_thi")))}function N(T,J){if(1&T){const O=o.RV6();o.qex(0),o.j41(1,"div",14)(2,"div",15)(3,"input",16),o.bIt("change",function(){o.eBV(O);const x=o.XpG(2);return o.Njj(x.changeStatusOfflineShare(void 0))}),o.k0s(),o.j41(4,"label",17),o.EFF(5),o.nI1(6,"mytranslate"),o.k0s()(),o.j41(7,"div",18)(8,"input",19),o.bIt("change",function(){o.eBV(O);const x=o.XpG(2);return o.Njj(x.changeStatusOfflineShare(void 0))}),o.k0s(),o.j41(9,"label",20),o.EFF(10),o.nI1(11,"mytranslate"),o.k0s()(),o.j41(12,"div",18)(13,"input",21),o.bIt("change",function(){o.eBV(O);const x=o.XpG(2);return o.Njj(x.changeStatusOfflineShare(void 0))}),o.k0s(),o.j41(14,"label",22),o.EFF(15),o.nI1(16,"mytranslate"),o.k0s()()(),o.DNE(17,L,2,5,"div",23)(18,B,7,5,"div",24)(19,E,4,3,"div",25),o.nI1(20,"fullPermission"),o.bVm()}if(2&T){const O=o.XpG(2);o.R7$(3),o.Y8G("value",0),o.R7$(2),o.JRh(o.bMT(6,9,"lang_auto_khong")),o.R7$(3),o.Y8G("value",1),o.R7$(2),o.JRh(o.bMT(11,11,"lang_auto_tat_ca_cac_lop")),o.R7$(3),o.Y8G("value",2),o.R7$(2),o.JRh(o.bMT(16,13,"lang_auto_tuy_chon_theo_lop")),o.R7$(2),o.Y8G("ngIf",2===O.form.controls.chooseOption.value),o.R7$(),o.Y8G("ngIf",1===O.form.controls.chooseOption.value||2===O.form.controls.chooseOption.value&&!O.form.controls.classroomFormArray.errors),o.R7$(),o.Y8G("ngIf",!o.i5U(20,15,O.examWithPermissionObj,"exam"))}}function K(T,J){1&T&&(o.j41(0,"div",36)(1,"p",34),o.EFF(2),o.nI1(3,"mytranslate"),o.k0s()()),2&T&&(o.R7$(2),o.JRh(o.bMT(3,1,"lang_auto_chua_duoc_cau_hinh_tra_de_thi")))}function ot(T,J){if(1&T&&(o.DNE(0,K,4,3,"div",35),o.nI1(1,"fullPermission")),2&T){const O=o.XpG(2);o.Y8G("ngIf",!o.i5U(1,1,O.examWithPermissionObj,"exam"))}}function nt(T,J){if(1&T&&(o.j41(0,"form",12),o.DNE(1,N,21,18,"ng-container",13),o.nI1(2,"fullPermission"),o.DNE(3,ot,2,4,"ng-template",null,1,o.C5r),o.k0s()),2&T){const O=o.sdS(4),w=o.XpG();o.Y8G("formGroup",w.form),o.R7$(),o.Y8G("ngIf",o.i5U(2,3,w.examWithPermissionObj,"exam"))("ngIfElse",O)}}function et(T,J){if(1&T){const O=o.RV6();o.j41(0,"div",37)(1,"button",38),o.bIt("click",function(){o.eBV(O);const x=o.XpG();return o.Njj(x.btnCloseDialog(!1))}),o.EFF(2),o.nI1(3,"mytranslate"),o.k0s()()}2&T&&(o.R7$(2),o.SpI(" ",o.bMT(3,1,"lang_auto_dong")," "))}let tt=(()=>{var T;class J extends W._{btnCloseDialog(w){this.dialogRef.close(w)}copyLinkToClipboard(){let w=this.commonService.getCurrentDomain();return this.linkCopy=`${w}/de-thi/${this.examWithPermissionObj?.hashId}?offline=${this.offlineCode}`,this.linkCopy}showCopySuccess(){this.showSuccessSnack("lang_auto_sao_chep_thanh_cong")}getCodeOfflineShare(){this.initStatusObj(),this.waitDestroy(this.offlineShareService.apiOfflineShareGetObjGet(this.examHashId).subscribe(w=>{1==w.success?(this.offlineCode=w.data?.shareHashId??"",this.shareClassroomIds=w.data?.shareClassroomIds??[],this.examWithPermissionObj=w.data?.examObj,this.classroomWithGroup=[{groupObj:{id:-1,name:this.commonService.myTranslateInstant("lang_testbank_share_offline_default_group")},isOwned:!0,classroomObjs:w.data?.classroomObjs??[]}],this.form.controls.chooseOption.setValue(w.data?.showOfflineResult??0),this.successStatusObj()):this.errorStatusObj(w.message??"",!0)}))}changeStatusOfflineShare(w){if(2==this.form.getRawValue().chooseOption&&this.form.controls.classroomFormArray.errors?.classroomCheckBoxValidatorWithoutWhoAllow)return;let x=this.form.getRawValue().chooseOption;const R=2!=x?[]:this.sAztClassroomCheckboxService.getClassroomIdsCheckedInGroup(this.form.controls.classroomFormArray);this.waitDestroy(this.offlineShareService.apiOfflineShareChangeStatusPost({examHashId:this.examWithPermissionObj?.hashId??"",status:x,classroomIds:R}).subscribe(m=>{1==m.success?this.offlineCode=m.data?.shareHashId??"":this.errorStatusObj(m.message??"",!0)}))}ngAfterContentChecked(){this.changeDetector.detectChanges()}ngOnInit(){super.ngOnInit(),this.getCodeOfflineShare()}constructor(w,x,R,k,m){super(k,R),this.changeDetector=w,this.offlineShareService=x,this.dialogRef=R,this.sAztClassroomCheckboxService=m,this.examHashId="",this.useDialog=!1,this.permissionTypes=t.t,this.offlineCode="",this.linkCopy="",this.examWithPermissionObj=void 0,this.classroomWithGroup=[],this.shareClassroomIds=[],this.examHashId=k.examHashId?k.examHashId:this.examHashId,this.useDialog=k?k.useDialog:this.useDialog,this.form=new e.gE({chooseOption:new e.MJ(0,{nonNullable:!0}),whoAllow:new e.MJ(0,{nonNullable:!0}),classroomFormArray:new e.Yp([])},{validators:[S.j.classroomInGroupCheckBoxValidatorWithoutWhoAllow]})}}return(T=J).\u0275fac=function(w){return new(w||T)(o.rXU(o.gRc),o.rXU(P.i$),o.rXU(i.CP,8),o.rXU(i.Vh,8),o.rXU(c.Q))},T.\u0275cmp=o.VBU({type:T,selectors:[["azt-offline-share"]],inputs:{examHashId:"examHashId",useDialog:"useDialog"},features:[o.Vt3],decls:11,vars:6,consts:[["doneLoading",""],["noFullPermission",""],[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-3"],[1,"text-base","font-medium"],[1,"p-3","pt-0"],["class","flex justify-center items-center",4,"ngIf","ngIfElse"],["class","text-right mt-3",4,"ngIf"],[1,"flex","justify-center","items-center"],[1,"w-4","h-4","inline-block"],[1,"sr-only","ml-2"],[3,"formGroup"],[4,"ngIf","ngIfElse"],[1,"flex","flex-col","sm:flex-row","mb-3"],[1,"form-check","mr-8"],["formControlName","chooseOption","id","notAllow","type","radio",1,"form-check-input",3,"change","value"],["for","notAllow",1,"form-check-label"],[1,"form-check","mr-8","mt-2","sm:mt-0"],["formControlName","chooseOption","id","allAllow","type","radio",1,"form-check-input",3,"change","value"],["for","allAllow",1,"form-check-label"],["formControlName","chooseOption","id","customAllow","type","radio",1,"form-check-input",3,"change","value"],["for","customAllow",1,"form-check-label"],["class","azt-list-classroom",4,"ngIf"],["class","azt-copy relative",4,"ngIf"],["class","mt-0",4,"ngIf"],[1,"azt-list-classroom"],[3,"changeCheckboxEvent","form","classroomGroupData","shareClassroomIds","permissionName","defaultCssClass"],[1,"azt-copy","relative"],["type","text","readonly","",1,"form-control","py-3","px-4","border-transparent","bg-slate-100","pr-10","text-primary",2,"padding-right","120px","cursor","pointer",3,"value"],["azt-track-service","practice-detail-isTsISlyAY",1,"btn","btn-outline-primary","absolute","my-auto","inset-y-0","right-0",2,"border-top-left-radius","0","border-bottom-left-radius","0",3,"click","cdkCopyToClipboard"],[1,"w-4","h-4","inline-block","mr-2"],["name","copy","size","20"],[1,"mt-0"],[1,"note"],["class","text-center",4,"ngIf"],[1,"text-center"],[1,"text-right","mt-3"],["azt-track-service","azt-offline-share-hrBGx7oL2r",1,"btn","w-24","btn-secondary",3,"click"]],template:function(w,x){if(1&w&&(o.j41(0,"div",2)(1,"div",3)(2,"div",4)(3,"h3",5),o.EFF(4),o.nI1(5,"mytranslate"),o.k0s()(),o.j41(6,"div",6),o.DNE(7,y,5,0,"div",7)(8,nt,5,6,"ng-template",null,0,o.C5r)(10,et,4,3,"div",8),o.k0s()()()),2&w){const R=o.sdS(9);o.R7$(4),o.JRh(o.bMT(5,4,"lang_auto_tra_ket_qua_thi_offline")),o.R7$(3),o.Y8G("ngIf",x.statusObj.loading)("ngIfElse",R),o.R7$(3),o.Y8G("ngIf",x.useDialog)}},dependencies:[g.bT,h.dF,e.qT,e.me,e.Fm,e.BC,e.cb,e.j4,e.JD,z.WGl,$.t,a.D,I.R,U.wp,U.gC],encapsulation:2}),J})()},57226:(q,F,n)=>{n.d(F,{E:()=>D});var e=n(89163),i=n(33887),W=n(33860),t=n(48891),S=n(9280),o=n(46899),P=n(24506),c=n(54460),g=n(2915),h=n(52811),z=n(52909),$=n(50334),a=n(15343),I=n(76975);const U=s=>({nodeObjs:s}),y=s=>({"padding-left":s}),L=()=>({"ml-2":!0}),B=()=>({"rotate-90deg":!0}),E=()=>({"transition-3s":!0}),N=()=>({"ml-1":!0});function K(s,C){1&s&&t.eu8(0)}function ot(s,C){1&s&&t.eu8(0)}function nt(s,C){if(1&s&&(t.qex(0),t.DNE(1,ot,1,0,"ng-container",7),t.bVm()),2&s){const d=t.XpG(2),p=t.sdS(4);t.R7$(),t.Y8G("ngTemplateOutlet",p)("ngTemplateOutletContext",t.eq3(2,U,d.nodeObjs))}}function et(s,C){if(1&s&&(t.j41(0,"label",3)(1,"span",4),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s()(),t.j41(4,"div",5),t.DNE(5,nt,2,4,"ng-container",6),t.k0s()),2&s){const d=t.XpG();t.R7$(2),t.JRh(t.bMT(3,2,"lang_azt_structure_of_the_competency_assessment_exam")),t.R7$(3),t.Y8G("ngIf",d.nodeObjs.length)}}function tt(s,C){1&s&&t.nrm(0,"lucide-icon",19),2&s&&t.Y8G("ngClass",t.lJ4(1,B))}function T(s,C){1&s&&t.nrm(0,"lucide-icon",20),2&s&&t.Y8G("ngClass",t.lJ4(1,E))}function J(s,C){if(1&s&&(t.j41(0,"span",21),t.EFF(1),t.nI1(2,"mytranslate"),t.nI1(3,"mytranslate"),t.nI1(4,"mytranslate"),t.k0s()),2&s){const d=t.XpG(2).$implicit;t.R7$(),t.SpI(" ","("+t.bMT(2,1,"lang_auto_chon")+" "+d.data.folderData.totalPart+" "+t.bMT(3,3,"lang_azt_in")+" "+d.children.length+" "+t.bMT(4,5,"lang_azt_hereafter")+")"," ")}}function O(s,C){if(1&s){const d=t.RV6();t.qex(0),t.j41(1,"div",12),t.bIt("click",function(){t.eBV(d);const G=t.XpG().$implicit,Q=t.XpG(3);return t.Njj(Q.clickToNode(G))}),t.j41(2,"div",13),t.DNE(3,tt,1,2,"lucide-icon",14)(4,T,1,2,"lucide-icon",15),t.nrm(5,"lucide-icon",16),t.j41(6,"span",17),t.EFF(7),t.k0s(),t.DNE(8,J,5,7,"span",18),t.k0s()(),t.bVm()}if(2&s){const d=t.XpG().$implicit;t.R7$(3),t.Y8G("ngIf",!d.isExpand),t.R7$(),t.Y8G("ngIf",d.isExpand),t.R7$(),t.Y8G("ngClass",t.lJ4(5,L)),t.R7$(2),t.JRh(d.data.folderData.name),t.R7$(),t.Y8G("ngIf",d.children.length&&d.data.folderData.totalPart)}}function w(s,C){if(1&s&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&s){const d=t.XpG(2).$implicit;t.R7$(),t.Lme("\xa0-\xa0",d.data.examData.minutes," ",t.bMT(2,2,"lang_auto_minute"),"")}}function x(s,C){1&s&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&s&&(t.R7$(),t.SpI("\xa0-\xa0",t.bMT(2,1,"lang_auto_minute"),""))}function R(s,C){if(1&s){const d=t.RV6();t.qex(0),t.j41(1,"div",22),t.bIt("click",function(){let G;t.eBV(d);const Q=t.XpG().$implicit,H=t.XpG(3);return t.Njj(H.selectExam(null!==(G=Q.data.examData.hashId)&&void 0!==G?G:""))}),t.nrm(2,"lucide-icon",23),t.j41(3,"span",17),t.EFF(4),t.DNE(5,w,3,4,"span",6)(6,x,3,3,"span",6),t.k0s()(),t.bVm()}if(2&s){const d=t.XpG().$implicit;t.R7$(2),t.Y8G("name",d.data.examData.isPublished?"file-check":"file")("ngClass",t.lJ4(5,N)),t.R7$(2),t.SpI(" ",d.data.examData.name," "),t.R7$(),t.Y8G("ngIf",d.data.examData.minutes),t.R7$(),t.Y8G("ngIf",!d.data.examData.minutes)}}function k(s,C){1&s&&t.eu8(0)}function m(s,C){if(1&s&&(t.qex(0),t.j41(1,"div",24),t.DNE(2,k,1,0,"ng-container",7),t.k0s(),t.bVm()),2&s){const d=t.XpG().$implicit;t.XpG(3);const p=t.sdS(4);t.R7$(2),t.Y8G("ngTemplateOutlet",p)("ngTemplateOutletContext",t.eq3(2,U,d.children))}}function M(s,C){if(1&s&&(t.qex(0),t.j41(1,"div",9)(2,"div",10)(3,"div",11),t.DNE(4,O,9,6,"ng-container",6)(5,R,7,6,"ng-container",6),t.k0s(),t.DNE(6,m,3,4,"ng-container",6),t.k0s()(),t.bVm()),2&s){const d=C.$implicit;t.R7$(),t.Y8G("hidden",!d.isShow),t.R7$(),t.Y8G("ngStyle",t.eq3(9,y,12*d.level+"px")),t.R7$(),t.yjJ("id","node-",d.randomHashId,"-",d.level,"-",d.nodeIndex,""),t.R7$(),t.Y8G("ngIf",d.data.folderData),t.R7$(),t.Y8G("ngIf",d.data.examData),t.R7$(),t.Y8G("ngIf",d.isExpand)}}function b(s,C){if(1&s&&(t.qex(0),t.DNE(1,M,7,11,"ng-container",8),t.bVm()),2&s){const d=C.$implicit;t.R7$(),t.Y8G("ngForOf",d)}}function j(s,C){if(1&s&&t.DNE(0,b,2,1,"ng-container",6),2&s){const d=C.nodeObjs,p=t.XpG();t.Y8G("ngIf",p.asTemplateDataObj(d))}}let u=(()=>{var s;class C extends $.C{constructor(){super(...arguments),this.getExamData=new t.bkB,this.nodeObjs=[],this.uuidService=(0,t.WQX)(z.D)}selectExam(p){this.getExamData.emit(p)}clickToNode(p){p.isExpand?this.collapse(p):this.expand(p)}asTemplateDataObj(p){return p}standardTreeNodes(p,G){let Q=[];return p.forEach((H,at)=>{let it=H.exam?void 0:{name:H.objectName??"Empty"},rt=H.exam?{hashId:H.exam.hashId??"",name:H.exam.name,minutes:H.exam.minutes??0,totalQuestion:H.exam.countQuestion,isPublished:!!H.exam.isPublished}:void 0,l={level:G,isExpand:!0,isShow:!0,nodeIndex:at,selected:!1,randomHashId:this.uuidService.getUuid(),data:{id:H.objectId??0,isRequired:!!H.isRequired,folderData:it,examData:rt},children:[],text:"Not use"};l.children=this.standardTreeNodes(H.children,G+1),Q.push(l)}),Q}removeOneNodeById(p,G){return(p=p.filter(Q=>Q.randomHashId!=G.randomHashId)).forEach(Q=>Q.children=this.removeOneNodeById(Q.children,G)),p}ngOnChanges(p){p.rawNodes&&(this.nodeObjs=this.standardTreeNodes(this.rawNodes,0))}}return(s=C).\u0275fac=(()=>{let d;return function(G){return(d||(d=t.xGo(s)))(G||s)}})(),s.\u0275cmp=t.VBU({type:s,selectors:[["app-capacity-exam-tree-in-view-mode-component"]],inputs:{rawNodes:"rawNodes"},outputs:{getExamData:"getExamData"},features:[t.Vt3,t.OA$],decls:5,vars:1,consts:[["mainContent",""],["recursiveListTmpl",""],[4,"ngTemplateOutlet"],[1,"flex","items-center"],[1,"font-medium","text-lg"],["id","list-category-arr",1,"grid","grid-cols-12","gap-1"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngFor","ngForOf"],[1,"col-span-12",3,"hidden"],[3,"ngStyle"],[1,"flex","items-center","mb-1","w-full","hover:bg-slate-100","dark:hover:bg-darkmode-400","rounded",3,"id"],[1,"flex","items-center","clickable","w-full",3,"click"],[1,"pt-2","pb-2"],["name","chevron-right","size","18",3,"ngClass",4,"ngIf"],["name","chevron-down","size","18",3,"ngClass",4,"ngIf"],["name","folder","size","18",3,"ngClass"],[1,"ml-2"],["class","ml-1 text-slate-500 text-xs",4,"ngIf"],["name","chevron-right","size","18",3,"ngClass"],["name","chevron-down","size","18",3,"ngClass"],[1,"ml-1","text-slate-500","text-xs"],[1,"flex","items-center","pb-2","pt-2","clickable",3,"click"],["size","18",1,"text-pending",3,"name","ngClass"],[1,"grid","grid-cols-12","gap-1","w-full","children-tmp"]],template:function(p,G){if(1&p&&t.DNE(0,K,1,0,"ng-container",2)(1,et,6,4,"ng-template",null,0,t.C5r)(3,j,1,1,"ng-template",null,1,t.C5r),2&p){const Q=t.sdS(2);t.Y8G("ngTemplateOutlet",Q)}},dependencies:[c.YU,c.Sq,c.bT,c.T3,c.B3,a.WGl,I.wp],encapsulation:2}),C})();function Y(s,C){1&s&&(t.j41(0,"div",6),t.nrm(1,"azt-loading-ui"),t.k0s())}function v(s,C){if(1&s){const d=t.RV6();t.j41(0,"azt-mat-dialog-content",7)(1,"app-capacity-exam-tree-in-view-mode-component",8),t.bIt("getExamData",function(G){t.eBV(d);const Q=t.XpG();return t.Njj(Q.getExamData(G))}),t.k0s()()}if(2&s){const d=t.XpG();t.Y8G("defaultHeight",70),t.R7$(),t.Y8G("rawNodes",d.examComponents)}}let D=(()=>{var s;class C extends i._{getExamData(p){this.documentConfigService.apiDocumentConfigGetExamConfigDataV2Get(p).subscribe(G=>{if(!G.success||!G.data?.examObj)return this.errorStatusObj(G.message??"");this.showExamDetailDialog(G.data?.examObj)})}showExamDetailDialog(p){let G={obj:{...p},curCateId:p.categoryId??0,isOnLib:0,isShow:!0};this.sAztDialogService.open(W.c,{width:"800px",maxWidth:"90vw",enterAnimationDuration:"0ms",exitAnimationDuration:"0ms",data:G,restoreFocus:!1}).afterClosed().subscribe(H=>{})}getData(){this.initStatusObj(),this.waitDestroy(this.examService.apiExamListExamComponentsIdGet(this.data.id).subscribe(p=>{if(!p.success)return this.errorStatusObj(p.message??"");this.examComponents=p.data?.objs??[],this.stopStatusObj()}))}ngOnInit(){super.ngOnInit(),this.getData()}constructor(p,G,Q,H,at){super(at,H),this.documentConfigService=p,this.sAztDialogService=G,this.examService=Q,this.dialogRef=H,this.data=at,this.examComponents=[]}}return(s=C).\u0275fac=function(p){return new(p||s)(t.rXU(S.x_),t.rXU(o.i),t.rXU(P.R),t.rXU(e.CP,8),t.rXU(e.Vh,8))},s.\u0275cmp=t.VBU({type:s,selectors:[["azt-preview-assessment-exam"]],features:[t.Vt3],decls:8,vars:5,consts:[[1,"az-dialog-info"],[1,"box","p-3",2,"overflow-x","hidden"],["class","flex justify-between items-center p-5",4,"ngIf"],["class","mt-3",3,"defaultHeight",4,"ngIf"],[1,"text-right","pt-3"],[1,"btn","w-24","btn-outline-secondary",3,"click"],[1,"flex","justify-between","items-center","p-5"],[1,"mt-3",3,"defaultHeight"],[3,"getExamData","rawNodes"]],template:function(p,G){1&p&&(t.j41(0,"div",0)(1,"div",1),t.DNE(2,Y,2,0,"div",2)(3,v,2,2,"azt-mat-dialog-content",3),t.j41(4,"div",4)(5,"button",5),t.bIt("click",function(){return G.dialogRef.close()}),t.EFF(6),t.nI1(7,"mytranslate"),t.k0s()()()()),2&p&&(t.R7$(2),t.Y8G("ngIf",G.statusObj.loading),t.R7$(),t.Y8G("ngIf",!G.statusObj.loading),t.R7$(3),t.SpI(" ",t.bMT(7,3,"lang_auto_dong")," "))},dependencies:[c.bT,g.U,h.R,u,I.wp],encapsulation:2}),C})()},33860:(q,F,n)=>{n.d(F,{c:()=>j});var e=n(48891),i=n(89163),W=n(33887),t=n(25539),S=n(18148),o=n(30657),P=n(9280),c=n(10296),g=n(51913),h=n(91513),z=n(24506),$=n(97885),a=n(42032),I=n(54460),U=n(64160),y=n(17818),L=n(47712),B=n(15343),E=n(63958),N=n(52654),K=n(2915),ot=n(62538),nt=n(52811),et=n(22783),tt=n(76975);const T=()=>({"mr-1 flex-none":!0});function J(u,Y){if(1&u&&(e.j41(0,"a",33),e.nI1(1,"mytranslate"),e.j41(2,"span",23),e.nrm(3,"lucide-icon",34),e.k0s()()),2&u){e.XpG(2);const v=e.sdS(3);e.FS9("matTooltip",e.bMT(1,2,"lang_auto_tai_ve")),e.Y8G("matMenuTriggerFor",v)}}function O(u,Y){if(1&u){const v=e.RV6();e.j41(0,"a",35),e.nI1(1,"mytranslate"),e.bIt("click",function(){e.eBV(v);const s=e.XpG(2);return e.Njj(s.showCopySuccess())}),e.j41(2,"span",36),e.nrm(3,"lucide-icon",37),e.k0s(),e.j41(4,"span"),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s()()}if(2&u){const v=e.XpG(2);e.FS9("matTooltip",e.bMT(1,3,"lang_auto_copy_link_de_thi")),e.Y8G("cdkCopyToClipboard",v.copyLinkExam()),e.R7$(5),e.JRh(e.bMT(6,5,"lang_auto_copy_link"))}}function w(u,Y){1&u&&(e.j41(0,"div",38)(1,"span",39),e.nrm(2,"azt-loading-ui"),e.k0s(),e.j41(3,"span",40),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()()),2&u&&(e.R7$(4),e.JRh(e.bMT(5,1,"lang_auto_dang_chuan_bi_tai_lieu_doing")))}function x(u,Y){if(1&u&&(e.j41(0,"div",41),e.nrm(1,"div",42),e.nI1(2,"safeNormalHtmlContent"),e.k0s()),2&u){const v=e.XpG(2);e.R7$(),e.Y8G("innerHtml",e.bMT(2,1,v.data.headerContent),e.npT)}}function R(u,Y){if(1&u&&e.nrm(0,"azt-loaded-img",43),2&u){const v=e.XpG(2);e.Y8G("imgSrc",v.data.obj.examHeader)}}function k(u,Y){if(1&u&&e.nrm(0,"azt-question-standalone-for-preview",45),2&u){const v=e.XpG(),D=v.$implicit,s=v.index,C=e.XpG(2);e.Y8G("examObj",C.examObj)("questionObj",D)("follower",C.followerRenderQuest)("curQuestionIndex",s)("isShowExplain",C.showExplanation)}}function m(u,Y){if(1&u&&(e.qex(0),e.DNE(1,k,1,5,"azt-question-standalone-for-preview",44),e.bVm()),2&u){const v=e.XpG(2);e.R7$(),e.Y8G("ngIf",v.examObj)}}function M(u,Y){if(1&u){const v=e.RV6();e.qex(0),e.j41(1,"div",13)(2,"div",14)(3,"div",15)(4,"div",16)(5,"div",17),e.DNE(6,J,4,4,"a",18),e.nI1(7,"editPermission"),e.DNE(8,O,7,7,"a",19),e.j41(9,"button",20),e.bIt("click",function(){e.eBV(v);const s=e.XpG();return e.Njj(s.showAllExplanation())}),e.EFF(10),e.nI1(11,"mytranslate"),e.nI1(12,"mytranslate"),e.k0s()()(),e.j41(13,"div",21)(14,"a",22)(15,"span",23),e.nrm(16,"lucide-icon",24),e.k0s()()()(),e.j41(17,"azt-mat-dialog-content",25),e.DNE(18,w,6,3,"div",26),e.j41(19,"div",27),e.nrm(20,"div",28),e.DNE(21,x,3,3,"div",29)(22,R,1,1,"azt-loaded-img",30)(23,m,2,1,"ng-container",31),e.nrm(24,"div",32),e.k0s()()()(),e.bVm()}if(2&u){const v=e.XpG();e.R7$(6),e.Y8G("ngIf",!(null!=v.data&&v.data.globalLadingPage)&&!v.data.allowHeader&&e.i5U(7,8,null==v.data?null:v.data.obj,"exam")),e.R7$(2),e.Y8G("ngIf",0==(null==v.data?null:v.data.isOnLib)&&!(null!=v.data&&v.data.globalLadingPage)),e.R7$(2),e.SpI(" ",v.showExplanation?e.bMT(11,11,"lang_auto_an_giai_thich"):e.bMT(12,13,"lang_auto_xem_giai_thich")," "),e.R7$(7),e.Y8G("defaultHeight",70),e.R7$(),e.Y8G("ngIf",v.statusObj.loading),e.R7$(3),e.Y8G("ngIf",v.data.allowHeader&&!v.statusObj.loading),e.R7$(),e.Y8G("ngIf",null==v.data||null==v.data.obj?null:v.data.obj.examHeader),e.R7$(),e.Y8G("ngForOf",v.questionList)}}function b(u,Y){if(1&u){const v=e.RV6();e.j41(0,"azt-export-excel-for-answersheet",46),e.bIt("exportDataDone",function(s){e.eBV(v);const C=e.XpG();return e.Njj(C.exportDataDone(s))}),e.k0s()}if(2&u){let v;const D=e.XpG();e.Y8G("startQuestionIndex",null!==(v=null==D.examObj?null:D.examObj.startQuestionIndex)&&void 0!==v?v:1)("obj",D.exportExcelData)}}let j=(()=>{var u;class Y extends W._{handlerCloseDialog(D){D&&this.dialogRef.close()}copyLinkExam(){return`${this.commonService.getCurrentDomain()}/de-thi/${this.data?.obj?.hashId}`}showCopySuccess(){this.commonService.snackSuccess("lang_auto_sao_chep_thanh_cong")}showAllExplanation(){this.showExplanation=!this.showExplanation}downloadExam(D,s){if(!D||!this.data.obj)return;const C=this.commonService.myTranslateInstant("lang_auto_dang_khoi_tao_du_lieu")??"",d=this.printAddInfo.templateType??0,p={nameSchool:this.printAddInfo.nameSchool??"",nameSubject:this.printAddInfo.nameSubject??""};S.L.openLoadingEffect(`${C}...`),this.data.obj.hideGroupQuestion=0,this.exportSAztDocxService.downloadExam(s,{...this.data.obj,editable:!1,allowStudentView:!0},void 0,void 0,this.cloneQuestionList,p,d,void 0,void 0,void 0,!0).then(()=>{}).catch(G=>{this.showErrorSnack(G.message)})}downloadExamAnswer(){this.waitDestroy(this.offlineExamExportService.apiOfflineExamExportExportResultOfRawExamGet(this.examObj?.hashId??"").subscribe(D=>{if(!D.success)return this.errorStatusObj(D.message??"");let s=D.data?.obj;s?.offlineMixQuestionObjs&&s.offlineMixQuestionObjs.length>0&&(this.exportExcelData=this.commonService.myClone(s))}))}exportDataDone(D){const s=this.createNameExam("answerexcel",!1);this.shareFileFlutterService.shareFileWithBlob(D,s)}redirectToDownloadExamPdf(D){window.open(this.commonService.getLocalRouter(`/admin/testbank/export-exam-to-pdf/${this.examObj?.id}?isShowExplain=${D}`),"_blank")}getConfigExam(){const D=this.data?.globalLadingPage?this.documentConfigService.apiDocumentConfigGetGlobalExamConfigDataGet(this.examObj?.hashId??""):this.documentConfigService.apiDocumentConfigGetExamConfigDataV2Get(this.examObj?.hashId??"");this.waitDestroy(D.subscribe(s=>{if(!s.success)return this.errorStatusObj(s.message,!1);let C=0,d=0;this.questionList.forEach((p,G)=>{p.labelIndex=G,s.data?.resetQuestionIndex&&p.groupInfo&&p.groupInfo.groupId&&(C!=p.groupInfo.groupId&&(C=p.groupInfo.groupId,d=0),p.labelIndex=d,d++)}),this.successStatusObj()}))}getData(D){this.initStatusObj();const s=this.data?.globalLadingPage?this.examService.apiExamGetGlobalQuestionsIdGet(D?.id??0):this.permissionService.hasViewPermission("exam",D)?this.examService.apiExamGetQuestionsIdGet(D?.id??0):void 0;if(!s)return this.showErrorSnack("lang_auto_ban_khong_co_quyen_thuc_thi_chuc_nang_nay");s.subscribe(C=>{const d=this.commonService.castJsonToClassObjs(t.I,JSON.stringify(C.data?.questionObjs||[]))??[];this.followerRenderQuest.setNumQuest(d.length),d.forEach(p=>{p.isRoleTeacher=!0}),this.cloneQuestionList=this.commonService.myClone(d),this.questionList=d,this.examObj=C.data?.examObj,this.getConfigExam()})}createNameExam(D,s){const C=this.examObj?.name??"";let d;switch(D){case"answersheet":d=this.printAnswersheetService.exportFileNameOfAnswerSheet(0,C,"");break;case"answerexcel":d=this.printAnswersheetService.exportFileNameOfAnswerExcelOffline(0,C,"");break;default:d=this.printAnswersheetService.exportFileNameOfExamOffline(0,C,"",void 0)}return s&&(d=this.commonService.replaceAll(d,"_","-")??""),d+("answersheet"===D?".pdf":"answerexcel"===D?".xlsx":".docx")}ngOnChanges(){this.data?.obj&&this.getData(this.data.obj)}ngOnInit(){super.ngOnInit(),this.data?.obj&&this.getData(this.data.obj)}constructor(D,s,C,d,p,G,Q,H,at){super(at,H),this.documentConfigService=D,this.shareFileFlutterService=s,this.permissionService=C,this.exportSAztDocxService=d,this.examService=p,this.offlineExamExportService=G,this.printAnswersheetService=Q,this.dialogRef=H,this.data=at,this.closeDialog=new e.bkB,this.questionList=[],this.cloneQuestionList=[],this.followerRenderQuest=new o.e,this.printAddInfo={},this.showExplanation=!1}}return(u=Y).\u0275fac=function(D){return new(D||u)(e.rXU(P.x_),e.rXU(c.R),e.rXU(g.p),e.rXU(h.c),e.rXU(z.R),e.rXU($.qG),e.rXU(a.Q),e.rXU(i.CP,8),e.rXU(i.Vh,8))},u.\u0275cmp=e.VBU({type:u,selectors:[["azt-preview-exam"]],outputs:{closeDialog:"closeDialog"},features:[e.Vt3,e.OA$],decls:29,vars:35,consts:[["menuDownload","matMenu"],[4,"ngIf"],[1,"dropdown-menu","show","relative","w-72"],[1,"dropdown-content"],[3,"checkAction","closeDialog","vipPackageType","classCSSCustom","isShowBadgeVip","isAction","trackingKey"],["name","file-check","size","16",3,"ngClass"],[1,"mr-3"],["name","file-text","size","16",3,"ngClass"],["azt-track-service","azt-preview-exam-ef7yEq6a3",1,"dropdown-item",3,"click"],["name","file-down","size","16",3,"ngClass"],["azt-track-service","azt-preview-exam--mJB2JKFgNu",1,"dropdown-item",3,"click"],["name","file-spreadsheet","size","16",3,"ngClass"],[3,"startQuestionIndex","obj","exportDataDone",4,"ngIf"],[1,"az-dialog-info"],[1,"box",2,"overflow-x","hidden"],[1,"flex","items-center","p-2","bg-slate-100","dark:bg-darkmode-400"],[1,"mr-auto"],[1,"flex","items-center","mr-2"],["class","btn btn-sm btn-outline-secondary btn-transparent mr-2",3,"matTooltip","matMenuTriggerFor",4,"ngIf"],["azt-track-service","azt-preview-exam-dgdyLZO48Hq","class","btn btn-sm btn-outline-secondary btn-transparent mr-2",3,"matTooltip","cdkCopyToClipboard","click",4,"ngIf"],["azt-track-service","azt-preview-exam-WEwBr57UW",1,"btn","btn-sm","btn-outline-secondary","btn-transparent","mr-2",3,"click"],[1,"ml-auto"],["azt-track-service","azt-preview-exam-y2xqBN7DlGX",1,"btn","btn-transparent","btn-outline-danger","btn-sm",3,"mat-dialog-close"],[1,"w-4","h-4","flex-none"],["name","x","size","18"],[1,"mt-3",3,"defaultHeight"],["class","flex justify-center items-center h-40",4,"ngIf"],["id","boxContentQuestion",1,"p-2"],[1,"pt-3"],["class","box p-3 mb-3",4,"ngIf"],["style","display: block","class","mt-5",3,"imgSrc",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"py-5"],[1,"btn","btn-sm","btn-outline-secondary","btn-transparent","mr-2",3,"matTooltip","matMenuTriggerFor"],["name","download","size","18"],["azt-track-service","azt-preview-exam-dgdyLZO48Hq",1,"btn","btn-sm","btn-outline-secondary","btn-transparent","mr-2",3,"click","matTooltip","cdkCopyToClipboard"],[1,"w-4","h-4","mr-2","flex-none"],["name","copy","size","18"],[1,"flex","justify-center","items-center","h-40"],[1,"w-4","h-4","inline-block"],[1,"sr-only","ml-2"],[1,"box","p-3","mb-3"],[2,"line-height","1.5",3,"innerHtml"],[1,"mt-5",2,"display","block",3,"imgSrc"],[3,"examObj","questionObj","follower","curQuestionIndex","isShowExplain",4,"ngIf"],[3,"examObj","questionObj","follower","curQuestionIndex","isShowExplain"],[3,"exportDataDone","startQuestionIndex","obj"]],template:function(D,s){if(1&D){const C=e.RV6();e.DNE(0,M,25,15,"ng-container",1),e.nI1(1,"viewPermission"),e.j41(2,"mat-menu",null,0)(4,"div",2)(5,"ul",3)(6,"li")(7,"azt-check-vip-account",4),e.bIt("checkAction",function(p){return e.eBV(C),e.Njj(s.downloadExam(p,!1))})("closeDialog",function(p){return e.eBV(C),e.Njj(s.handlerCloseDialog(p))}),e.nrm(8,"lucide-icon",5),e.j41(9,"span",6),e.EFF(10),e.nI1(11,"mytranslate"),e.k0s()()(),e.j41(12,"li")(13,"azt-check-vip-account",4),e.bIt("checkAction",function(p){return e.eBV(C),e.Njj(s.downloadExam(p,!0))})("closeDialog",function(p){return e.eBV(C),e.Njj(s.handlerCloseDialog(p))}),e.nrm(14,"lucide-icon",7),e.j41(15,"span",6),e.EFF(16),e.nI1(17,"mytranslate"),e.k0s()()(),e.j41(18,"li")(19,"a",8),e.bIt("click",function(){return e.eBV(C),e.Njj(s.redirectToDownloadExamPdf(0))}),e.nrm(20,"lucide-icon",9),e.EFF(21),e.nI1(22,"mytranslate"),e.k0s()(),e.j41(23,"li")(24,"a",10),e.bIt("click",function(){return e.eBV(C),e.Njj(s.downloadExamAnswer())}),e.nrm(25,"lucide-icon",11),e.EFF(26),e.nI1(27,"mytranslate"),e.k0s()()()()(),e.DNE(28,b,1,2,"azt-export-excel-for-answersheet",12)}2&D&&(e.Y8G("ngIf",e.i5U(1,20,null==s.data?null:s.data.obj,"exam")||(null==s.data?null:s.data.globalLadingPage)),e.R7$(7),e.Y8G("vipPackageType","VIP_FOR_TEACHER")("classCSSCustom","dropdown-item cursor-pointer")("isShowBadgeVip",!s.isBusinessDomain)("isAction",!0)("trackingKey","DOWNLOAD_EXAM_DOCX_NO_ANSWER"),e.R7$(),e.Y8G("ngClass",e.lJ4(31,T)),e.R7$(2),e.SpI(" ",e.bMT(11,23,"lang_testbank_download_exam_in_docx")," "),e.R7$(3),e.Y8G("vipPackageType","VIP_FOR_TEACHER")("classCSSCustom","dropdown-item cursor-pointer")("isShowBadgeVip",!s.isBusinessDomain)("isAction",!0)("trackingKey","DOWNLOAD_EXAM_DOCX_WITH_ANSWER"),e.R7$(),e.Y8G("ngClass",e.lJ4(32,T)),e.R7$(2),e.SpI(" ",e.bMT(17,25,"lang_azt_download_exam_paper_with_detailed_answers_in_docx")," "),e.R7$(4),e.Y8G("ngClass",e.lJ4(33,T)),e.R7$(),e.SpI(" ",e.bMT(22,27,"lang_auto_tai_xuong_de_thi")+" PDF"," "),e.R7$(4),e.Y8G("ngClass",e.lJ4(34,T)),e.R7$(),e.SpI(" ",e.bMT(27,29,"lang_testbank_download_exam_answer_in_excel")," "),e.R7$(2),e.Y8G("ngIf",null!=s.exportExcelData))},dependencies:[I.YU,I.Sq,I.bT,U.dF,i.tx,y.kk,y.Cp,L.oV,B.WGl,E.H,N.a,K.U,ot.O,nt.R,et.F,tt.wp,tt._y,tt.FV,tt.eL],encapsulation:2}),Y})()},35048:(q,F,n)=>{n.d(F,{w:()=>k});var e=n(48891),i=n(10936),W=n(59640),t=n(27208),S=n(68774),o=n(31216),P=n(54460),c=n(47712),g=n(18718),h=n(2915),z=n(69135),$=n(32099),a=n(76975);const I=(m,M)=>({"dark:bg-darkmode-400 bg-slate-100":m,"border-b border-slate-200/60 dark:border-darkmode-400":M});function U(m,M){if(1&m&&e.nrm(0,"azt-loading-effect",10),2&m){const b=e.XpG();e.Y8G("currentStatusObj",b.statusObj)}}function y(m,M){if(1&m&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&m){const b=e.XpG(3);e.R7$(),e.JRh(e.bMT(2,1,"lang_auto_da_chon")+": "+b.totalStudentsSelected)}}function L(m,M){if(1&m&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&m){const b=e.XpG(3);e.R7$(),e.JRh(b.data.classroomName+(b.totalStudentsSelected?" ("+e.bMT(2,1,"lang_auto_da_chon")+": "+b.totalStudentsSelected+")":""))}}function B(m,M){}function E(m,M){if(1&m&&(e.j41(0,"div")(1,"azt-mat-dialog-content",24),e.DNE(2,B,0,0,"ng-template",25),e.k0s()()),2&m){e.XpG(3);const b=e.sdS(8);e.R7$(),e.Y8G("defaultHeight",40),e.R7$(),e.Y8G("ngTemplateOutlet",b)}}function N(m,M){}function K(m,M){if(1&m&&(e.j41(0,"div"),e.DNE(1,N,0,0,"ng-template",25),e.k0s()),2&m){e.XpG(3);const b=e.sdS(8);e.R7$(),e.Y8G("ngTemplateOutlet",b)}}function ot(m,M){if(1&m){const b=e.RV6();e.qex(0),e.j41(1,"div",12)(2,"div",13),e.DNE(3,y,3,3,"span",14)(4,L,3,3,"span",14),e.j41(5,"div",15)(6,"azt-search-box",16),e.nI1(7,"mytranslate"),e.bIt("onSearch",function(u){e.eBV(b);const Y=e.XpG(2);return e.Njj(Y.onSearchBox(u.searchObj))}),e.k0s()()(),e.j41(8,"div",17)(9,"div",18)(10,"input",19),e.bIt("change",function(){e.eBV(b);const u=e.XpG(2);return e.Njj(u.selectAllStudentOfClass())}),e.k0s(),e.j41(11,"label",20),e.EFF(12),e.nI1(13,"mytranslate"),e.k0s()(),e.j41(14,"div",21)(15,"input",22),e.bIt("change",function(){e.eBV(b);const u=e.XpG(2);return e.Njj(u.calculateFormData())}),e.k0s(),e.j41(16,"label",23),e.EFF(17),e.nI1(18,"mytranslate"),e.k0s()()()(),e.DNE(19,E,3,2,"div",14)(20,K,2,1,"div",14),e.bVm()}if(2&m){const b=e.XpG(2);e.R7$(),e.Y8G("ngClass",e.l_i(18,I,b.isDialog,!b.isDialog)),e.R7$(2),e.Y8G("ngIf",!b.isDialog),e.R7$(),e.Y8G("ngIf",b.isDialog),e.R7$(2),e.Y8G("isServerSearch",!1)("styleInput","form-control-sm ")("placeholder",e.bMT(7,12,"lang_student_classroom_list_detail_search_name_student")),e.R7$(4),e.Y8G("formControl",b.selectAllFormControl),e.R7$(2),e.SpI(" ",e.bMT(13,14,b.selectAllFormControl.value?"lang_remove_all":"lang_select_all")," "),e.R7$(3),e.Y8G("formControl",b.showCheckedFormControl),e.R7$(2),e.SpI(" ",e.bMT(18,16,"lang_testbank_selected_students")," "),e.R7$(2),e.Y8G("ngIf",b.isDialog),e.R7$(),e.Y8G("ngIf",!b.isDialog)}}function nt(m,M){1&m&&(e.j41(0,"div",26)(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()),2&m&&(e.R7$(2),e.JRh(e.bMT(3,1,"lang_core_class_has_no_student")))}function et(m,M){if(1&m&&e.DNE(0,ot,21,21,"ng-container",11)(1,nt,4,3,"ng-template",null,2,e.C5r),2&m){const b=e.sdS(2),j=e.XpG();e.Y8G("ngIf",j.studentObjs.length>0)("ngIfElse",b)}}function tt(m,M){if(1&m){const b=e.RV6();e.j41(0,"div",27)(1,"button",28),e.bIt("click",function(){e.eBV(b);const u=e.XpG();return e.Njj(u.btnCloseDialog())}),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()}2&m&&(e.R7$(2),e.SpI(" ",e.bMT(3,1,"lang_cms_common_ok")," "))}function T(m,M){1&m&&(e.qex(0),e.j41(1,"div",26)(2,"span",29),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()(),e.bVm()),2&m&&(e.R7$(3),e.JRh(e.bMT(4,1,"lang_testbank_no_students_selected")))}function J(m,M){if(1&m){const b=e.RV6();e.j41(0,"div",34)(1,"div",35)(2,"input",36),e.bIt("change",function(){e.eBV(b);const u=e.XpG(4);return e.Njj(u.calculateFormData())}),e.k0s(),e.j41(3,"label",37,4),e.nI1(5,"mytranslate"),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()()()}if(2&m){const b=e.sdS(4),j=e.XpG().$implicit;e.R7$(2),e.FS9("id","azt-checkbox-student-"+j.id),e.Y8G("formControl",j.isChecked),e.R7$(),e.FS9("for","azt-checkbox-student-"+j.id),e.Y8G("matTooltip",e.bMT(5,8,j.fullName))("isDisabledTooltip",!1)("matTooltipDisabled",b.isDisabled)("matTooltipShowDelay",500),e.R7$(3),e.SpI(" ",e.bMT(7,10,j.fullName)," ")}}function O(m,M){if(1&m&&(e.qex(0),e.DNE(1,J,8,12,"div",33),e.bVm()),2&m){const b=M.$implicit;e.R7$(),e.Y8G("ngIf",b.isShowStudent)}}function w(m,M){1&m&&(e.j41(0,"div",26),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&m&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_student_classroom_list_detail_not_student")," "))}function x(m,M){if(1&m&&(e.j41(0,"div",30),e.DNE(1,O,2,1,"ng-container",31),e.k0s(),e.DNE(2,w,3,3,"div",32)),2&m){const b=e.XpG(2);e.R7$(),e.Y8G("ngForOf",b.studentObjs),e.R7$(),e.Y8G("ngIf",0==b.totalStudentsShow)}}function R(m,M){if(1&m&&e.DNE(0,T,5,3,"ng-container",11)(1,x,3,2,"ng-template",null,3,e.C5r),2&m){const b=e.sdS(2),j=e.XpG();e.Y8G("ngIf",j.totalStudentsSelected<=0&&j.showCheckedFormControl.value)("ngIfElse",b)}}let k=(()=>{var m;class M extends W.H{resetAll(){this.selectAllFormControl.reset(),this.showCheckedFormControl.reset(),this.selectAllStudentOfClass()}btnCloseDialog(){if(this.studentObjs.length<=0)return this.closeBox.emit();let j={classroomId:this.data.classroomId,classroomName:this.data.classroomName,studentIdsSelected:this.studentObjs.filter(u=>u.isChecked.value).map(u=>u.id)};this.closeBox.emit(j)}onSearchBox(j){this.searchContentObj=j,this.calculateFormData()}selectAllStudentOfClass(){this.studentObjs.map(j=>j.isChecked.setValue(this.selectAllFormControl.value)),this.calculateFormData()}calculateFormData(){let j=this.commonService.convertVietnameseToEnglish(this.searchContentObj.searchContent).toLowerCase().trim();this.studentObjs.forEach(u=>{const Y=this.commonService.convertVietnameseToEnglish(u.fullName??"").toLowerCase().trim();let v=""==j||Y.includes(j);u.isShowStudent=(!this.showCheckedFormControl.value||u.isChecked.value)&&v}),this.totalStudentsSelected=this.studentObjs.filter(u=>u.isChecked.value).length,this.selectAllFormControl.setValue(this.totalStudentsSelected==this.studentObjs.length),this.totalStudentsShow=this.studentObjs.filter(u=>u.isShowStudent).length,this.isDialog||this.btnCloseDialog()}getData(){this.initStatusObj(),this.waitDestroy(this.studentProfileV2Service.apiStudentProfileV2GetObjsByClassroomIdGet(this.data.classroomId).subscribe(j=>{if(!j.success)return this.errorStatusObj(j.message,!0);let u=j.data?.studentObjs??[];u=0==j.data?.classroomObj.sortType?this.sortService.sortFirstNameStudents(this.commonService.myClone(u)??[]):this.sortService.sortArrayByMultipleObjectKeyAsc(this.commonService.myClone(u)??[],"pos","id"),this.initFormData(u),this.stopStatusObj()}))}initFormData(j){this.studentObjs=j.map(u=>({...u,isShowStudent:!0,isChecked:new i.MJ(this.data.studentIdsSelected.includes(u.id),{nonNullable:!0})})),this.calculateFormData()}ngOnInit(){this.getData()}constructor(j,u){super(),this.sortService=j,this.studentProfileV2Service=u,this.selectAllFormControl=new i.MJ(!1,{nonNullable:!0}),this.showCheckedFormControl=new i.MJ(!1,{nonNullable:!0}),this.studentObjs=[],this.totalStudentsSelected=0,this.totalStudentsShow=0,this.searchContentObj=new t.Z,this.isDialog=!0,this.closeBox=new e.bkB}}return(m=M).\u0275fac=function(j){return new(j||m)(e.rXU(S.g),e.rXU(o.m_))},m.\u0275cmp=e.VBU({type:m,selectors:[["azt-select-student"]],inputs:{isDialog:"isDialog",data:"data"},outputs:{closeBox:"closeBox"},features:[e.Vt3],decls:9,vars:3,consts:[["doneLoading",""],["templateSelectStudent",""],["emptyStudents",""],["checkedBox",""],["c","isDisabled"],["id","selectStudent",1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-0"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],["class","p-3 text-right",4,"ngIf"],[3,"currentStatusObj"],[4,"ngIf","ngIfElse"],[1,"p-3","flex","flex-col","sm:flex-row","sm:h-auto","sm:items-center",3,"ngClass"],[1,"font-medium","mr-auto"],[4,"ngIf"],[1,"w-full","relative","flex","items-center","mt-2"],[3,"onSearch","isServerSearch","styleInput","placeholder"],[1,"flex","items-center","mt-2","sm:mt-0"],[1,"form-check","mr-3"],["id","selected-all","type","checkbox",1,"form-check-input",3,"change","formControl"],["for","selected-all",1,"form-check-label"],[1,"form-check"],["id","show-student-checked","type","checkbox",1,"form-check-input",3,"change","formControl"],["for","show-student-checked",1,"form-check-label"],[3,"defaultHeight"],[3,"ngTemplateOutlet"],[1,"h-full","flex","items-center","justify-center","p-5"],[1,"p-3","text-right"],["azt-track-service","azt-dialog-warning-3FIn9IaXN",1,"btn","w-24","btn-primary",3,"click"],[1,"mx-auto"],[1,"p-3","grid","grid-cols-12","gap-3"],[4,"ngFor","ngForOf"],["class","h-full flex items-center justify-center p-5",4,"ngIf"],["class","col-span-12 md:col-span-4 mt-2",4,"ngIf"],[1,"col-span-12","md:col-span-4","mt-2"],[1,"azt-checkbox-item"],["type","checkbox",1,"form-check-input",3,"change","id","formControl"],[1,"form-check-label","truncate",2,"vertical-align","middle",3,"matTooltip","isDisabledTooltip","matTooltipDisabled","matTooltipShowDelay","for"]],template:function(j,u){if(1&j&&(e.j41(0,"div",5)(1,"div",6)(2,"div",7),e.DNE(3,U,1,1,"azt-loading-effect",8)(4,et,3,2,"ng-template",null,0,e.C5r),e.k0s()(),e.DNE(6,tt,4,3,"div",9),e.k0s(),e.DNE(7,R,3,2,"ng-template",null,1,e.C5r)),2&j){const Y=e.sdS(5);e.R7$(3),e.Y8G("ngIf",u.statusObj.loading)("ngIfElse",Y),e.R7$(3),e.Y8G("ngIf",u.isDialog)}},dependencies:[P.YU,P.Sq,P.bT,P.T3,c.oV,i.Zm,i.BC,i.l_,g.K,h.U,z.f,$.W,a.wp],encapsulation:2}),M})()}}]);