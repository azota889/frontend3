"use strict";(self.webpackChunkBalacoClient=self.webpackChunkBalacoClient||[]).push([[787],{4779:(S,f,h)=>{h.d(f,{K:()=>a});var m=h(65879),t=h(46558),d=h(88131),g=h(88489),e=h(27161);let a=(()=>{class n{_saveSortTypeOfSetting(r){this.browserStorageService.saveSimpleStorage(this.sortByStorageKey,r)}_removeSortTypeOfSetting(){this.browserStorageService.removeSimpleStorage(this.sortByStorageKey)}_getSortTypeOfSetting(r){return this.browserStorageService.getSimpleStorage(this.sortByStorageKey)==r}_getCurrentSortTypeOfSetting(){return this._getSortTypeOfSetting("isSortByNameAsc")?"isSortByNameAsc":this._getSortTypeOfSetting("isSortByMarkDesc")?"isSortByMarkDesc":this._getSortTypeOfSetting("isSortByTimeDesc")?"isSortByTimeDesc":void 0}_filterExamResultObjsByFilterSettingObjByClassroom(r,o){var s=[];return o.forEach(i=>{i.results=this._filterExamResultObjsByFilterSettingObjNotInClassroom(r,i.results??new Array),s.push(i)}),s}_filterExamResultObjsByFilterSettingObjNotInClassroom(r,o){var s=[];if(r.isMarked||r.isNotMarked||r.isOnTest||r.isNotSubmit||r.isNotTested)for(var i of o){let l=!1,u=r.isOnTest||r.isNotSubmit;r.isMarked&&1==i.isMarked&&(!u||!(1!=i.status&&(i.isMarked||i.isNotMarked)))&&(l=!0),r.isNotMarked&&1==i.isNotMarked&&(!u||!(1!=i.status&&(i.isMarked||i.isNotMarked)))&&(l=!0),r.isOnTest&&(1==i.isOnTest||0==i.status&&(i.isMarked||i.isNotMarked))&&(l=!0),r.isNotTested&&1==i.isNotTested&&(l=!0),r.isNotSubmit&&(1==i.isNotSubmit||-1==i.status&&(i.isMarked||i.isNotMarked))&&(l=!0),l&&s.push(i)}else s=o;return s}_searchExamResultObjsByFullNameInClassroom(r,o){var s=[];return this.commonService.myClone(r).forEach(l=>{var u=this._searchExamResultObjsByFullNameNotInClassroom(l.results??[],o);u.length>0&&(l.results=u,s.push(l))}),s}_searchExamResultObjsByFullNameNotInClassroom(r,o){o=this.commonService.convertVietnameseToEnglish(o).toLowerCase();var s=[];return r.forEach(i=>{-1!=this.commonService.convertVietnameseToEnglish(i.fullName??"").toLowerCase().indexOf(o)&&s.push(i)}),s}_sortExamResultObjsBySettingObjByClassroom(r,o,s){return"isSortByNameAsc"==s?this.sortService.sortFirstNameStudentsInClass(r):"isSortByTimeDesc"==s?this.sortService.sortTimeStudentsInClass(r,1):"isSortByMarkDesc"==s?this.sortService.sortMarkStudentsInClass(r,1,o):this._sortExamResultObjsBySortTypeOfClassroom(r)}_sortExamResultObjsBySettingObjNotInClassroom(r,o,s){return"isSortByNameAsc"==s?this.sortService.sortFirstNameStudents(r):"isSortByTimeDesc"==s?this.sortService.sortTimeDESC(r):"isSortByMarkDesc"==s?this.sortService.sortMarkDESC(r,o):r}_sortExamResultObjsBySortTypeOfClassroom(r){var o=this.commonService.myClone(r);return o.forEach((s,i)=>{s.results=0==s.classObj?.sortType?this.sortService.sortFirstNameStudents(s.results??[]):this.sortService.sortArrayByMultipleObjectKeyAsc(s.results??[],"pos","id"),o[i]=s}),o}_changeExamResultStatusForAllClassroom(r,o,s){var i=[];return r.forEach((l,u)=>{l.results=this._changeExamResultStatusForOneClassroom(l.results??new Array,o),l={indexCounter:u,...l,countSubmitted:s?l.classObj?.countSubmitted:this._countTotalSubmittedOfExamResultObjs(l.results??new Array)},i.push(l)}),i}_changeExamResultStatusForOneClassroom(r,o){var s=[...r];return s.forEach((i,l)=>{i.confirmedAt&&""!=i.confirmedAt&&i.resultId&&i.resultId>0?i.isMarked=!0:i.resultId&&i.resultId>0&&(!i.confirmedAt||""==i.confirmedAt)?i.isNotMarked=!0:i.resultId&&0!=i.resultId||!i.startedTest||""==i.startedTest||0!=i.status?i.resultId&&0!=i.resultId||!i.startedTest||""==i.startedTest||-1!=i.status?null==i.startedTest&&(i.isNotTested=!0):i.isNotSubmit=!0:i.isOnTest=!0,s[l]=i}),s.forEach((i,l)=>{i.files&&""!=i.files&&!Array.isArray(i.files)&&(i.filesParse=this.commonService.myParseJson(i.files)),s[l]=i}),s}_countTotalSubmittedOfExamResultObjs(r){var o=0;return r.forEach(s=>{(s.isMarked||s.isNotMarked)&&o++}),o}_counterTotalEssayOfQuestionObjs(r){let o=0;return r.forEach(s=>{this.answerTypeService.isEssayAnswer(s)&&o++}),o}_checkCounterEssayQuestionObjs(r){let o=0;return r.forEach(s=>{s.isEssay&&o++}),o}constructor(r,o,s,i){this.commonService=r,this.sortService=o,this.browserStorageService=s,this.answerTypeService=i,this.sortByStorageKey="exam_list_sort_by"}}return n.\u0275fac=function(r){return new(r||n)(m.LFG(t.z),m.LFG(d.V),m.LFG(g.n),m.LFG(e.i))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()},76024:(S,f,h)=>{h.d(f,{Y:()=>t});var m=h(65879);let t=(()=>{class d{constructor(e){this.el=e,this.hasDecimalPoint=!1,this.hasNegativeSign=!1,this.navigationKeys=["Backspace","Delete","Tab","Escape","Enter","Home","End","ArrowLeft","ArrowRight","Clear","Copy","Paste"],this.decimal=!1,this.decimalSeparator1=".",this.decimalSeparator2=",",this.allowNegatives=!1,this.allowPaste=!0,this.negativeSign="-",this.min=-1/0,this.max=1/0,this.regex=null,this.inputElement=e.nativeElement}ngOnChanges(e){if(e.pattern&&(this.regex=this.pattern?RegExp(this.pattern):null),e.min){const a=Number(this.min);this.min=isNaN(a)?-1/0:a}if(e.max){const a=Number(this.max);this.max=isNaN(a)?1/0:a}}onBeforeInput(e){if(isNaN(Number(e.data))){if(e.data===this.decimalSeparator1||e.data===this.decimalSeparator2||e.data===this.negativeSign&&this.allowNegatives)return;e.preventDefault(),e.stopPropagation()}}onKeyDown(e){if(this.navigationKeys.indexOf(e.key)>-1||("a"===e.key||"KeyA"===e.code)&&!0===e.ctrlKey||("c"===e.key||"KeyC"===e.code)&&!0===e.ctrlKey||("v"===e.key||"KeyV"===e.code)&&!0===e.ctrlKey||("x"===e.key||"KeyX"===e.code)&&!0===e.ctrlKey||("a"===e.key||"KeyA"===e.code)&&!0===e.metaKey||("c"===e.key||"KeyC"===e.code)&&!0===e.metaKey||("v"===e.key||"KeyV"===e.code)&&!0===e.metaKey||("x"===e.key||"KeyX"===e.code)&&!0===e.metaKey)return;let a="";var n=e.key;if(e.key===this.decimalSeparator2&&(n=this.decimalSeparator1),this.decimal&&n===this.decimalSeparator1)return a=this.forecastValue(n),a.split(this.decimalSeparator1).length>2||(this.hasDecimalPoint=a.indexOf(this.decimalSeparator1)>-1,this.setNewValue(n)),void e.preventDefault();if(n===this.negativeSign&&this.allowNegatives)return a=this.forecastValue(n),a.charAt(0)!==this.negativeSign||a.split(this.negativeSign).length>2?void e.preventDefault():void(this.hasNegativeSign=a.split(this.negativeSign).length>-1);if(" "===n||isNaN(Number(n)))return void e.preventDefault();if(a=a||this.forecastValue(n),this.regex&&!this.regex.test(a))return void e.preventDefault();const c=Number(a);(c>this.max||c<this.min)&&e.preventDefault()}onPaste(e){if(!0===this.allowPaste){let a="";window.clipboardData?a=window.clipboardData.getData("text"):e.clipboardData&&e.clipboardData.getData&&(a=e.clipboardData.getData("text/plain")),this.pasteData(a),e.preventDefault()}else e.preventDefault(),e.stopPropagation()}onDrop(e){const a=e.dataTransfer?.getData("text")??"";this.inputElement.focus(),this.pasteData(a),e.preventDefault()}pasteData(e){e=e.replace(",",".");const a=this.sanitizeInput(e);if(!a.includes(this.negativeSign)||!this.hasNegativeSign||this.getSelection().includes(this.negativeSign)){if(!document.execCommand("insertText",!1,a))if(this.inputElement.setRangeText){const{selectionStart:c,selectionEnd:r}=this.inputElement;this.inputElement.setRangeText(a,c??0,r??0,"end"),typeof window.InstallTrigger<"u"&&this.inputElement.dispatchEvent(new Event("input",{cancelable:!0}))}else this.insertAtCursor(this.inputElement,a);this.decimal&&(this.hasDecimalPoint=this.inputElement.value.indexOf(this.decimalSeparator1)>-1),this.hasNegativeSign=this.inputElement.value.indexOf(this.negativeSign)>-1}}setNewValue(e){e=e.replace(",","."),this.insertAtCursor(this.inputElement,e),this.decimal&&(this.hasDecimalPoint=this.inputElement.value.indexOf(this.decimalSeparator1)>-1),this.hasNegativeSign=this.inputElement.value.indexOf(this.negativeSign)>-1}insertAtCursor(e,a){const n=e.selectionStart??0,c=e.selectionEnd??0;e.value=e.value.substring(0,n)+a+e.value.substring(c,e.value.length);const r=n+a.length;e.focus(),e.setSelectionRange(r,r),this.triggerEvent(e,"input")}triggerEvent(e,a){if("createEvent"in document){const n=document.createEvent("HTMLEvents");n.initEvent(a,!1,!0),e.dispatchEvent(n)}}sanitizeInput(e){let n,a="";n=this.decimal&&this.isValidDecimal(e)?new RegExp(`${this.getNegativeSignRegExp()}[^0-9${this.decimalSeparator1}]`,"g"):new RegExp(`${this.getNegativeSignRegExp()}[^0-9]`,"g"),a=e.replace(n,"");const c=this.inputElement.maxLength;if(c>0){const r=c-this.inputElement.value.length+(a.includes(`${this.negativeSign}`)?1:0);a=r>0?a.substring(0,r):""}return a}getNegativeSignRegExp(){return!this.allowNegatives||this.hasNegativeSign&&!this.getSelection().includes(this.negativeSign)?"":`(?!^${this.negativeSign})`}isValidDecimal(e){if(this.hasDecimalPoint){const a=this.getSelection();return a&&a.indexOf(this.decimalSeparator1)>-1?e.split(this.decimalSeparator1).length<=2:e.indexOf(this.decimalSeparator1)<0}return e.split(this.decimalSeparator1).length<=2}getSelection(){return this.inputElement.value.substring(this.inputElement.selectionStart??0,this.inputElement.selectionEnd??0)}forecastValue(e){const n=this.inputElement.selectionEnd??0,c=this.inputElement.value;return c.substring(0,this.inputElement.selectionStart??0)+e+c.substring(n)}}return d.\u0275fac=function(e){return new(e||d)(m.Y36(m.SBq))},d.\u0275dir=m.lG2({type:d,selectors:[["","appOnlyNumber",""]],hostBindings:function(e,a){1&e&&m.NdJ("beforeinput",function(c){return a.onBeforeInput(c)})("keydown",function(c){return a.onKeyDown(c)})("paste",function(c){return a.onPaste(c)})("drop",function(c){return a.onDrop(c)})},inputs:{decimal:"decimal",decimalSeparator1:"decimalSeparator1",decimalSeparator2:"decimalSeparator2",allowNegatives:"allowNegatives",allowPaste:"allowPaste",negativeSign:"negativeSign",min:"min",max:"max",pattern:"pattern"},features:[m.TTD]}),d})()},37783:(S,f,h)=>{h.d(f,{W:()=>s});var m=h(47496),t=h(65879),d=h(96814),g=h(70342),e=h(77988),a=h(92596),n=h(67742),c=h(40750);function r(i,l){if(1&i){const u=t.EpF();t.O4$(),t.kcU(),t.ynx(0),t.TgZ(1,"div",24)(2,"p",25),t._uU(3),t.ALo(4,"mytranslate"),t.qZA(),t.TgZ(5,"p",25),t._uU(6),t.ALo(7,"mytranslate"),t.qZA(),t.TgZ(8,"div",26),t._UZ(9,"input",27),t.TgZ(10,"button",28),t.NdJ("click",function(){t.CHM(u);const _=t.oxw();return t.KtG(_.showCopySuccess())}),t.O4$(),t.TgZ(11,"svg",29),t._UZ(12,"rect",30)(13,"path",31),t.qZA(),t._uU(14),t.ALo(15,"mytranslate"),t.qZA()()(),t.BQk()}if(2&i){const u=t.oxw();t.xp6(3),t.Oqu(t.lcZ(4,5,"lang_auto_hoac")),t.xp6(3),t.Oqu(t.lcZ(7,7,"lang_classroom_QR_join_link_copy")),t.xp6(3),t.Q6J("value",u.linkUrl),t.xp6(1),t.Q6J("cdkCopyToClipboard",u.copyLinkToClipboard(u.linkUrl)),t.xp6(4),t.hij(" ",t.lcZ(15,9,"lang_auto_sao_chep")," ")}}const o=function(i){return{"w-80":i}};let s=(()=>{class i extends m.Q{constructor(){super(...arguments),this.linkUrl="",this.fileName="",this.showLink=!1,this.qrCodeDownloadLink=""}showCopySuccess(){this.showSuccessSnack("lang_auto_sao_chep_thanh_cong")}copyLinkToClipboard(u){return u}onChangeURL(u){this.qrCodeDownloadLink=u}downloadQrCode(){try{let u=""!=this.fileName?this.commonService.createFileNameExportFile([this.fileName])+".jpg":this.commonService.createFileNameExportFile(["azota-qr-code-"])+".jpg";this.commonService.downloadFileByUrl(this.qrCodeDownloadLink.changingThisBreaksApplicationSecurity,u)}catch{console.log("Download QrCode error")}}}return i.\u0275fac=function(){let l;return function(p){return(l||(l=t.n5z(i)))(p||i)}}(),i.\u0275cmp=t.Xpm({type:i,selectors:[["azt-download-qr-code"]],inputs:{linkUrl:"linkUrl",fileName:"fileName",showLink:"showLink"},features:[t.qOj],decls:28,vars:16,consts:[["azt-track-service","download-qr-code-hiQXy_iTc",1,"btn","btn-outline-primary","btn-transparent","p-1",3,"matMenuTriggerFor","matTooltip"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-6","h-6"],["x","3","y","3","width","5","height","5","rx","1"],["x","16","y","3","width","5","height","5","rx","1"],["x","3","y","16","width","5","height","5","rx","1"],["d","M21 16h-3a2 2 0 0 0-2 2v3"],["d","M21 21v.01"],["d","M12 7v3a2 2 0 0 1-2 2H7"],["d","M3 12h.01"],["d","M12 3h.01"],["d","M12 16v.01"],["d","M16 12h1"],["d","M21 12v.01"],["d","M12 21v-1"],["showQrCode","matMenu"],["azt-track-service","download-qr-code-9t-9Wiu2xv",1,"box","p-3","text-center",3,"ngClass","click"],[2,"background","#fff","padding","5px"],["colorDark","#2361ad","imageSrc","'images/Azota-For-QrCode-01.png' | convertCdnLinkOfGitHub",3,"allowEmptyString","qrdata","elementType","width","errorCorrectionLevel","qrCodeURL"],["azt-track-service","download-qr-code-RqVBz6g1z7",1,"btn","btn-outline-primary","btn-transparent","btn-sm","mx-auto","mt-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","mr-2"],["d","M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"],["points","7 10 12 15 17 10"],["x1","12","y1","15","x2","12","y2","3"],[4,"ngIf"],[1,"text-center"],[1,"h5","mt-2","font-medium"],[1,"azt-copy","relative","mt-2","intro-x"],["type","text","readonly","",1,"form-control","py-3","px-4","border-transparent","bg-slate-100","pr-10",2,"padding-right","120px",3,"value"],["azt-track-service","download-qr-code-yW-aFu0tO",1,"btn","btn-outline-primary","absolute","my-auto","inset-y-0","right-0",2,"border-top-left-radius","0","border-bottom-left-radius","0",3,"cdkCopyToClipboard","click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","mr-2"],["x","9","y","9","width","13","height","13","rx","2","ry","2"],["d","M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"]],template:function(u,p){if(1&u&&(t.TgZ(0,"button",0),t.ALo(1,"mytranslate"),t.O4$(),t.TgZ(2,"svg",1),t._UZ(3,"rect",2)(4,"rect",3)(5,"rect",4)(6,"path",5)(7,"path",6)(8,"path",7)(9,"path",8)(10,"path",9)(11,"path",10)(12,"path",11)(13,"path",12)(14,"path",13),t.qZA()(),t.kcU(),t.TgZ(15,"mat-menu",null,14)(17,"div",15),t.NdJ("click",function(v){return v.stopPropagation()}),t.TgZ(18,"div",16)(19,"qrcode",17),t.NdJ("qrCodeURL",function(v){return p.onChangeURL(v)}),t.qZA()(),t.TgZ(20,"a",18),t.NdJ("click",function(){return p.downloadQrCode()}),t.O4$(),t.TgZ(21,"svg",19),t._UZ(22,"path",20)(23,"polyline",21)(24,"line",22),t.qZA(),t._uU(25),t.ALo(26,"mytranslate"),t.qZA(),t.YNc(27,r,16,11,"ng-container",23),t.qZA()()),2&u){const _=t.MAs(16);t.s9C("matTooltip",t.lcZ(1,10,"lang_auto_quet_hoac_tai_ma_qr_code")),t.Q6J("matMenuTriggerFor",_),t.xp6(17),t.Q6J("ngClass",t.VKq(14,o,p.showLink)),t.xp6(2),t.Q6J("allowEmptyString",!0)("qrdata",p.linkUrl)("elementType","url")("width",128)("errorCorrectionLevel","M"),t.xp6(6),t.hij(" ",t.lcZ(26,12,"lang_auto_tai_ve_may")," "),t.xp6(2),t.Q6J("ngIf",p.showLink)}},dependencies:[d.mk,d.O5,g.i3,e.VK,e.p6,a.gM,n.V,c.JV],encapsulation:2}),i})()}}]);