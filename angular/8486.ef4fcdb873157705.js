(self.webpackChunkBalacoClient=self.webpackChunkBalacoClient||[]).push([[8486],{58343:(Ne,H)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.Utils=H.CONST=void 0;class I{static load(U){let E=JSON.parse(U);Object.assign(this,E)}}H.CONST=I,I.RENDER_SCALE=2,I.LINE_SMALL_HEIGHT=7*I.RENDER_SCALE,I.SPLIT_MARGIN=3*I.RENDER_SCALE,I.INTERSEC_MARGIN=20*I.RENDER_SCALE,I.LINE_MAGIN=2*I.RENDER_SCALE,I.MARGIN_LEFT=2*I.RENDER_SCALE,I.ENABLE_IMAGE_PROCESS=!0,I.STEP_SIZE=2,I.CROP_FULL_WIDTH=!0,I.OVERLAP=.5,I.QUESTION_PATTERN=[],I.QUESTION_PATTERN2=[],I.BREAK_LINE_PATTERN=[],I.SECTION_PATTERN_LOWER=[],I.SECTION_PATTERN_NORMAL=[],I.KICK_PATTERN=[],I.TVCN_CHAR=[],I.HET_PATTERN=[],I.DAPAN_PATTERN=[],I.HUONGDAN_PATTERN=[],I.MULTIPLE_ANS_PATTERN=[],I.DRAW_RESULT="",I.SKIP_CHAR=[],I.FOOTER_PATTERN=[],I.HELP_ANS_PATTERN=[],I.RES_ANS_PATTERN=[],I.GROUP_TF_PATTERN=[],I.GROUP_FI_PATTERN=[],I.FIX_NO_END_PATTERN=[],H.Utils=class F{static capitalizeFirstLetter(U){return U.charAt(0).toUpperCase()+U.slice(1)}static tagLang(U){let E=new Map([["EASY","NB"],["MEDIUM","TH"],["HARD","VD"],["HARDEST","VDC"],["MC","TN"],["FB","\u0110T"],["ES","TL"],["TF","\u0110S"],["GR","NH"]]);return E.has(U)?E.get(U):U}static parseInclude(U){let E=U.split("=>"),d=E.length>1?E[1]:-1,w=E[0];w=w.replaceAll(/\[@([CTQGK][-\d]+):(:(user[_0-9]*)-)?[^\]]*\]/g,"$1:$3").replaceAll(/\[@(F:[^\]]*)\]/g,"$1").replaceAll(/\[[^\]\d]+(\d+)[^\]\d]+\]/g,"$1").replaceAll(/\[[^\]]+\]/g,"");let ee,k=w.split("."),M=[],B=[],Q=[],D=[],Z=[],V=[],oe=[],K=[],ne=[],de=new Map([["EASY","NB"],["MEDIUM","TH"],["HARD","VD"],["HARDEST","VDC"],["MC","TN"],["FB","\u0110T"],["ES","TL"],["TF","\u0110S"],["GR","NH"]]),fe=[];for(let xe=k.length-1;xe>=0;xe--){let Ge=k[xe].trim();if(/^\d*$/.test(Ge)){ee=+Ge;continue}let nt=Ge.split(",");for(let ht of nt){let Ct=ht.split(":"),mt=Ct[0],e=Ct[1]??"";if(/^G[-\d]+$/.test(mt.trim()))M.push(+mt.trim().substring(1));else if(/^Q[-\d]+$/.test(mt.trim()))Q.push(+mt.trim().substring(1)),K.push(e),fe.push({type:"QUEST",id:+mt.trim().substring(1)});else if(/^C[-\d]+$/.test(mt.trim())){let Dt=+mt.trim().substring(1);D.push(Dt),V.push(e),fe.push({type:""!=e?"SHARE":"CATEGORY",id:Dt})}else if(/^K[-\d]+$/.test(mt.trim())){let Dt=+mt.trim().substring(1);D.push(Dt),V.push(e),fe.push({type:""!=e?"SHARE":"KNOWLEDGE",id:Dt})}else if(/^T[-\d]+$/.test(mt.trim()))B.push(+mt.trim().substring(1)),oe.push(e),fe.push({type:"EXAM",id:+mt.trim().substring(1),groupIds:M});else if(ht.trim().startsWith("F:")){let Dt=ht.trim().substring(2);ne.push(de.has(Dt)?de.get(Dt):Dt)}}if(fe.length>0){if(ne.length>0){let ht=["TL","TN","\u0110T","ES","MC","FB","TF","GR","\u0110S","NH"];for(let Ct of fe)Ct.tags=ne.filter(mt=>ht.indexOf(mt)<0),Ct.answerTypes=ne.filter(mt=>ht.indexOf(mt)>=0).map(mt=>"TL"==mt||"ES"==mt?3:"TN"==mt||"MC"==mt?1:"\u0110S"==mt?5:"NH"==mt?0:4)}break}}return Q.length>0&&(ee=Q.length),Z.push(...V),Z.push(...oe),Z.push(...K),{paths:fe,shareTypes:Z,catId:D,examId:B,tag:ne,groupId:M,questId:Q,getNum:ee,idx:d}}static getNumberFromStr(U){let E=U.match(/(\d+)/);return E?E[0]:""}static removeAccents(U){let E=["a\xe0\u1ea3\xe3\xe1\u1ea1\u0103\u1eb1\u1eb3\u1eb5\u1eaf\u1eb7\xe2\u1ea7\u1ea9\u1eab\u1ea5\u1ead","A\xc0\u1ea2\xc3\xc1\u1ea0\u0102\u1eb0\u1eb2\u1eb4\u1eae\u1eb6\xc2\u1ea6\u1ea8\u1eaa\u1ea4\u1eac","d\u0111","D\u0110","e\xe8\u1ebb\u1ebd\xe9\u1eb9\xea\u1ec1\u1ec3\u1ec5\u1ebf\u1ec7","E\xc8\u1eba\u1ebc\xc9\u1eb8\xca\u1ec0\u1ec2\u1ec4\u1ebe\u1ec6","i\xec\u1ec9\u0129\xed\u1ecb","I\xcc\u1ec8\u0128\xcd\u1eca","o\xf2\u1ecf\xf5\xf3\u1ecd\xf4\u1ed3\u1ed5\u1ed7\u1ed1\u1ed9\u01a1\u1edd\u1edf\u1ee1\u1edb\u1ee3","O\xd2\u1ece\xd5\xd3\u1ecc\xd4\u1ed2\u1ed4\u1ed6\u1ed0\u1ed8\u01a0\u1edc\u1ede\u1ee0\u1eda\u1ee2","u\xf9\u1ee7\u0169\xfa\u1ee5\u01b0\u1eeb\u1eed\u1eef\u1ee9\u1ef1","U\xd9\u1ee6\u0168\xda\u1ee4\u01af\u1eea\u1eec\u1eee\u1ee8\u1ef0","y\u1ef3\u1ef7\u1ef9\xfd\u1ef5","Y\u1ef2\u1ef6\u1ef8\xdd\u1ef4"];for(const d of E){let C=new RegExp("["+d.substring(1)+"]","g");U=U.replace(C,d[0])}return U}static zeroPad(U,E){return U=U||2,(new Array(U).join("0")+E).slice(-1*U)}static removeInvisibleChars(U){return U.replace(/[\u200B-\u200D\uFEFF]/g," ")}}},95970:(Ne,H,I)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.ExamParser=void 0;const F=I(58343),h=I(23790),U=I(36801),E=I(25873),d=I(64984),C=I(96570),g=I(89094),_=I(75271),x=I(52734),w=I(50023),k=I(65378),M=I(88178),B=I(92795),Q=I(8377),D=I(9165),Z=I(42637);H.ExamParser=class V{constructor(K){this.DEF_QUEST_NAME="c\xe2u ",this.lang="vi",F.CONST.load(K)}setLang(K){this.lang=K,this.DEF_QUEST_NAME="vi"==K?"c\xe2u ":"question "}fixItems(K){let ee=["(^b\xe0i\\s+\\d+)"],ne=[],de=0,fe=!1;for(let Le of K)Le.type==w.QuestionParser.TYPE_NAME&&Le.olabel&&(Le.olabel.trim().match(ee.join("|"))?ne.push(de):fe=!0),de++;if(fe)for(let Le of ne)Le+1<K.length&&K[Le+1].type==w.QuestionParser.TYPE_NAME&&(K[Le].type=k.SectionParser.TYPE_NAME,K[Le].pos=[0,0]);return K}parse(K,ee,ne){const de="__NO-SEC__";for(let at=0;at<K.length;at++)K[at]=F.Utils.removeInvisibleChars(K[at]);(new d.DapAnChiTietParser).fixNoEnd(K);let fe=this.findItems(K,ne);this.fixItems(fe);let Le=new Map,xe=new Map,Ge=[],nt=null,ht=0,Ct=de,mt="main",e=0,Dt=0,wt=new Map,Yt=new Map,sn=de;for(let at=0;at<fe.length;at++){let Lt=fe[at],Mn=at==fe.length-1?void 0:fe[at+1],$t=this.getPartInfo(K,Lt,Mn);if(this.loadText(K,$t),Lt.type==k.SectionParser.TYPE_NAME&&"main"==mt&&(ht++,Ct=Lt.extInfo??ht+"",Ge.push({label:ht,parts:$t,answers:[],isGroup:!0})),Lt.type==w.QuestionParser.TYPE_NAME){if(Mn&&Mn.type==E.AnswerParser.TYPE_NAME&&Mn.pos[2]>0){let Dn;for(let Ln=at+1;Ln<fe.length;Ln++)if(fe[Ln].type!=E.AnswerParser.TYPE_NAME){Dn=fe[Ln];break}$t=this.getPartInfo(K,Lt,Dn),this.loadText(K,$t)}let Zn=Lt.label?+Lt.label:0,on=Le.get(Ct+"--"+Zn);if(!on&&1==xe.get(Zn)?.length&&(on=xe.get(Zn)[0]),on&&"main"!=mt){let Dn=$t.map(Ln=>Ln.text).join("\n").trim();on.help&&1==Dn.split("\n").length&&0==on.answers.length?on.strAns=Dn.replaceAll(/\[![hcluib]+:\$([^\]]*)\$\]/g,"$1").trim():on.help=$t,nt=on}else if("main"==mt){on={label:Zn,olabel:Lt.olabel,answers:[],parts:$t},ht>0&&(on.group=ht,on.extInfo=Ct),Le.set(Ct+"--"+Zn,on);let Dn=xe.get(Zn);Dn?Dn.push(on):xe.set(Zn,[on]),Ge.push(on),nt=on}}if(Lt.type==E.AnswerParser.TYPE_NAME&&nt&&"main"==mt){let Zn=!1;if($t.length>0){let Nn=K[$t[0].lineIdx].replace(/\|/g,"").trim().match(F.CONST.MULTIPLE_ANS_PATTERN.join("|"));null!=Nn&&Nn.length>0&&(Zn=!0)}let on=""==Lt.olabel;Lt.pos[2]>0&&($t=[$t[0]],$t[0].e=Lt.pos[2],this.loadText(K,$t),on=!0),nt.answers.push({label:Lt.label??"",isCorrect:"*"==Lt.extInfo,parts:on?[$t[0]]:$t,isInline:on,olabel:Lt.olabel}),nt.isFixAns=on||Zn}if(Lt.type==x.IncludeParser.TYPE_NAME)if(Lt.label&&/\.\d*$/.test(Lt.label)){let Zn=Lt.label.split("."),on=+Zn[Zn.length-1],Dn=$t[0].text??"",Ln=Yt.get(Dn)??-1;if(Ln++,Yt.set(Dn,Ln),0==on){ht++,Ct=Lt.label??"";let jt=Dn+"=>"+Ln+"-0",gn=[];gn.push(...$t),gn[0]={lineIdx:$t[0].lineIdx,s:0,b:0,text:jt},Ge.push({label:ht,parts:gn,answers:[],isGroup:!0});continue}let Cn=nt?nt.label:0,Nn=0;for(let jt=0;jt<on;jt++){Nn++;let gn=Dn+"=>"+Ln+"-"+jt,Sn=[];Sn.push(...$t),Sn[0]={lineIdx:$t[0].lineIdx,s:0,b:0,text:gn};let ai={label:Cn+Nn,olabel:nt?nt.olabel?.replace(/\d+/,Cn+Nn+""):this.DEF_QUEST_NAME+(Cn+Nn)+".",answers:[],parts:Sn};ht>0&&(ai.group=ht,ai.extInfo=Ct),Le.set(Ct+"--"+ai.label,ai),Ge.push(ai),nt=ai}}else if(Lt.label&&/\.Q\d+(,Q\d+)*$/.test(Lt.label)){let Dn=Lt.label.split(".").pop()?.split(",").length??0;for(let Ln=0;Ln<Dn;Ln++){let Cn={lineIdx:$t[0].lineIdx,s:0,b:0,text:$t[0].text+"=>0-"+Ln},Nn=nt?nt.label:0,jt={label:Nn+1,olabel:nt?nt.olabel?.replace(/\d+/,Nn+1+""):this.DEF_QUEST_NAME+(Nn+1)+".",answers:[],parts:[Cn]};ht>0&&(jt.group=ht,jt.extInfo=Ct),Le.set(Ct+"--"+jt.label,jt),Ge.push(jt),nt=jt}}Lt.type==_.HuongDanParser.TYPE_NAME&&nt&&($t.splice(0,1),Mn&&Mn.type==w.QuestionParser.TYPE_NAME&&Mn.label&&!Le.has(Ct+"--"+Mn.label)||!Mn||Mn.type==k.SectionParser.TYPE_NAME||Mn.type==g.HetParser.TYPE_NAME?"main"==mt&&(nt.help=$t):"main"==mt&&(mt="info",e=Lt.lineIdx??0),e>0&&0==Dt&&(Dt=Lt.lineIdx??0)),(Lt.type==g.HetParser.TYPE_NAME||Lt.type==C.DapAnParser.TYPE_NAME)&&(mt="info",e=Lt.lineIdx??0,ht=0),Lt.type==k.SectionParser.TYPE_NAME&&"info"==mt&&Ct!=de&&(ht++,sn=Lt.extInfo??ht+"",Ct=sn),Lt.type==d.DapAnChiTietParser.TYPE_NAME&&(Lt.extInfo=sn,wt.has(sn)||wt.set(sn,[]),wt.get(sn)?.push(Lt))}let ii=new d.DapAnChiTietParser,oi=new Map;for(let at of wt){let Lt=ii.getAnsMC(K,at[1]),Mn=(0,U.toArabic)(at[0])??at[0];for(let $t of Lt)oi.set(Mn+"--"+$t[0],$t[1])}let Ut=new Map;if(e>0){let at=Dt>0?K.slice(e,Dt):K.slice(e),Lt=ii.getAnsStr(at);for(let Mn of Lt){let $t=!1,Zn=+Mn[0].split("-")[1],on=de,Dn=0;for(let Cn=0;Cn<fe.length;Cn++){let Nn=fe[Cn];Nn.type!=g.HetParser.TYPE_NAME&&Nn.type!=C.DapAnParser.TYPE_NAME?Nn.type==k.SectionParser.TYPE_NAME&&$t&&(Nn.lineIdx??0)<e+Zn&&(Dn++,on=Nn.extInfo??Dn+""):$t=!0}let Ln=(0,U.toArabic)(on);Ln&&(on=Ln+""),Ut.set(on+"--"+Mn[0].split("-")[0],Mn[1])}}let Hn=[];for(const at of Ge){if(at.isGroup){Hn.push(at);continue}let Lt=at.extInfo??de,$t=((0,U.toArabic)(Lt)??Lt)+"--"+at.label,Zn=de+"--"+at.label,on=oi.get($t)??oi.get(Zn)??"",Dn=Ut.get($t)??Ut.get(Zn)??"",Ln="";at.help&&(Ln=ii.getAnsFromHelp(at.help,K)??"");let Cn=on;if(""==Cn.trim()&&(Cn=Ln),""==Cn.trim()&&(Cn=Dn),Cn.startsWith("!")&&(at.answers.length>0&&Cn.length==2*at.answers.length+1?(Cn=Cn.replaceAll(/[a-dA-D][Ss]/g,"").replaceAll(/([a-dA-D])[\u0111\u0110Dd]/g,"$1").toUpperCase(),at.typeCode="TF"):Cn=Cn.substring(1)),at.answers.length>0){if(0==at.answers.filter(gn=>gn.isCorrect).length)for(const gn of at.answers)/^!?[A-H,.\s]+$/.test(Cn)&&Cn.indexOf(gn.label.toUpperCase())>=0&&(gn.isCorrect=!0);let jt=at.answers.filter(gn=>gn.isCorrect).length;if(at.typeCode||(at.typeCode=jt>1?"MC":"SC"),0==jt&&""!=Cn&&"!"!=Cn){at.typeCode="FI",at.strAns=Cn;for(let gn of at.answers)for(let Sn of gn.parts)Sn.s=Sn.b,this.loadText(K,[Sn]),at.parts.push(Sn);at.answers=[]}}else at.strAns=""==Cn&&at.strAns?at.strAns:Cn,!at.typeCode&&""!=at.strAns&&(at.typeCode="FI");if(at.typeCode||(at.typeCode="ES"),at.answers.length>0){if(")"==at.answers[0].olabel&&"a"==at.answers[0].label){if(at.typeCode="TF",4!=at.answers.length&&0==at.answers.filter(jt=>jt.isCorrect).length){at.typeCode="ES";for(let jt of at.answers)for(let gn of jt.parts)gn.s=gn.b,this.loadText(K,[gn]),at.parts.push(gn);at.answers=[]}}else if(at.group){let jt=Hn.filter(gn=>gn.label==at.group)[0];if(jt){let Sn=jt.parts.map(ai=>ai.text).join(" ").toLowerCase().match(F.CONST.GROUP_TF_PATTERN.join("|"));Sn&&Sn.length>0&&(at.typeCode="TF")}}if(0==at.answers.filter(jt=>jt.isCorrect).length&&4==at.answers.length&&"a"==at.answers[0].label){let jt=[];for(const Jo of at.answers){let Fo=Jo.parts.filter(No=>""!=(No.text??"").trim());jt.push(Fo.length>0?Fo[Fo.length-1]:void 0)}let gn=!0,Sn="",ai=ii.isDSPat(jt[3]?.text??"");if(""!=ai)Sn=ai.replaceAll(/[a-dA-D][Ss]/g,"").replaceAll(/([a-dA-D])[\u0111\u0110Dd]/g,"$1").toUpperCase(),jt[3].text="";else{let Jo=[],Fo=0;for(let ji of jt){let No=!1,xo=ji?.text?.match(/(\[![!buiclh]+:\$)?\s*[\u0110S][.\s]*(\$\])?\s*\.?\s*$/g);if(xo&&xo.length>0&&(No=!0,Jo.push(xo[0]),ii.cleanStyle(xo[0]).trim().startsWith("\u0110")&&(Sn+=at.answers[Fo].label.toUpperCase())),!No){gn=!1;break}Fo++}if(gn){let ji=0;for(let No of Jo){let xo=(jt[ji].text?.length??0)-No.length;jt[ji].text=jt[ji]?.text?.substring(0,xo),ji++}}}if(gn){for(const Jo of at.answers)/^!?[A-H,\s]+$/.test(Sn)&&Sn.indexOf(Jo.label.toUpperCase())>=0&&(Jo.isCorrect=!0);at.typeCode="TF"}}}if(at.group){let Nn=Hn.filter(jt=>jt.label==at.group)[0];if(Nn){let gn=Nn.parts.map(Sn=>Sn.text).join(" ").toLowerCase().match(F.CONST.GROUP_FI_PATTERN.join("|"));if(gn&&gn.length>0&&(at.typeCode="FI",at.answers.length>0)){for(let Sn of at.answers)for(let ai of Sn.parts)ai.s=ai.b,this.loadText(K,[ai]),at.parts.push(ai);at.answers=[]}}}}for(let at of Ge)if("TF"==at.typeCode)for(let Lt of at.answers){let Mn=Lt.parts[0].text??"",$t=Mn.match(/^[\s.,):]*\[\s*([0-4])\s*\]/);Lt.order=$t?+$t[1]:0,$t&&(Mn=Mn.replace($t[0],""),Lt.parts[0].text=Mn)}return this.metadata={res1:oi,res2:Ut},Ge}checkErr(K){(new h.Checker).run(K)}static fixNoEnd(K){(new d.DapAnChiTietParser).fixNoEnd(K)}getPartInfo(K,ee,ne){let de=ee.lineIdx??0,fe=ne?.lineIdx??K.length-1;if(de==fe)return ne?[{lineIdx:de,b:ee.pos[0],s:ee.pos[1],e:ne?.pos[0]}]:[{lineIdx:de,b:ee.pos[0],s:ee.pos[1]}];{let Le=[];Le.push({lineIdx:de,b:ee.pos[0],s:ee.pos[1]});for(let xe=de+1;xe<fe;xe++)Le.push({lineIdx:xe,b:0,s:0});if(ne){let xe=ne?.pos[0];""!=K[fe].substring(0,xe).replace(/\|/g,"").trim()&&Le.push({lineIdx:fe,b:0,s:0,e:xe})}else Le.push({lineIdx:fe,b:0,s:0});return Le}}loadText(K,ee){for(const ne of ee)ne.text=K[ne.lineIdx].substring(ne.s,ne.e)}findItems(K,ee){let ne=["remove:q-s-a => 1","remove:s-s => 0","remove:h-h => 0","remove:h-a => 0","rmdup:a-a => void","remove:q-a:\\d+\\-[^A] => 0","remove:s-a:.+\\-[^A] => 0","remove:a-a:A\\-[^BC] => 0","remove:a-a:B\\-[^CD] => 0","remove:a-a:C\\-[^DB] => 0","remove:a-a:D\\-[^E] => 0","remove:a-a:E\\-[^F] => 0","remove:a-a-a:A-B\\-[^C] => 0","remove:a-a-a:A-C\\-[^B] => 0","removea:a-a-a-a:[a-e]-A-B-C => 3","removea:a-a-a-a:a-C-b-c => 2","same:q:QUESTION_PATTERN,QUESTION_PATTERN2 => void"];ee&&(ne=["remove:q-s-a => 1","remove:s-s => 0","remove:h-h => 0","remove:h-a => 0","remove:q-a:\\d+\\-[^A] => 0","remove:s-a:.+\\-[^A] => 0","remove:a-a:A\\-[^ABC] => 0","remove:a-a:B\\-[^ABCD] => 0","remove:a-a:C\\-[^ABCDE] => 0","remove:a-a:D\\-[^ADEF] => 0","remove:a-a:E\\-[^AEF] => 0","removea:a-a-a-a:[a-e]-A-B-C => 3","removea:a-a-a-a:a-C-b-c => 2","same:q:QUESTION_PATTERN,QUESTION_PATTERN2 => void"]);let de=[new D.RemoveRule,new M.ModifyAnsRule,new Z.SameKindRule,new Q.RemoveDupRule],fe=[new B.RemoveARule],Le=[{parser:new d.DapAnChiTietParser,also:[2]},{parser:new k.SectionParser,from:[0],to:[1],also:[3]},{parser:new w.QuestionParser,from:[0],to:[1],also:[3]},{parser:new E.AnswerParser},{parser:new g.HetParser,to:[2]},{parser:new C.DapAnParser,to:[2],also:[6]},{parser:new _.HuongDanParser},{parser:new x.IncludeParser,from:[0],to:[1]}],xe=[{name:"start",expect:[1,2,7]},{name:"main",expect:[1,2,3,4,5,6,7]},{name:"info",expect:[0,1,2,6]}],Ge=xe[0],nt=[],ht=0;for(const Dt of K)if(""!=Dt){for(const wt of Ge.expect){let ye=Le[wt],Yt=ye.parser.parse(Dt);if(Yt.length>0){if(Yt.forEach(sn=>sn.lineIdx=ht),nt.push(...Yt),ye.parser.TYPE==_.HuongDanParser.TYPE_NAME){let sn=nt.filter(Ut=>Ut.type==w.QuestionParser.TYPE_NAME).length,ii=nt.filter(Ut=>Ut.type==_.HuongDanParser.TYPE_NAME).length,oi=nt.filter(Ut=>Ut.type==C.DapAnParser.TYPE_NAME).length;if(Ge.name==xe[1].name&&sn>1&&0==ii){Ge=xe[2];let Ut=xe[2].expect.indexOf(6);Ut>=0&&xe[2].expect.splice(Ut,1)}else if(Ge.name==xe[2].name){oi>0&&Le[0].parser.off();let Ut=xe[2].expect.indexOf(6);Ut>=0&&xe[2].expect.splice(Ut,1)}}if(ye.to){let sn=0;for(const ii of ye.to)(ye.from&&xe[ye.from[sn]]==Ge||!ye.from)&&(Ge=xe[ii]),sn++}if(ye.also)for(const sn of ye.also){let oi=nt[nt.length-1].pos[1],Ut=Le[sn].parser.parse(Dt.substring(oi));Ut.length>0&&(Ut.forEach(Hn=>{Hn.lineIdx=ht;for(let at=0;at<Hn.pos.length;at++)Hn.pos[at]=Hn.pos[at]+oi}),nt.push(...Ut))}break}}ht++}else ht++;let Ct=[],mt=[];for(const Dt of ne){for(const wt of de){let ye=wt.load(Dt);if(ye){Ct.push(ye);break}}for(const wt of fe){let ye=wt.load(Dt);if(ye){mt.push(ye);break}}}let e=0;for(;e<nt.length;){for(const Dt of mt){let wt=nt.length;if(Dt.run(nt,e)){let ye=wt-nt.length;ye>0&&(e-=ye+1);break}}e++}for(e=0;e<nt.length;){for(const Dt of Ct){let wt=nt.length;if(Dt.run(nt,e)){let ye=wt-nt.length;ye>0&&(e-=ye+1);break}}e++}return nt}}},37562:(Ne,H)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.EditorApiService=void 0,H.EditorApiService=class I{}},99230:(Ne,H,I)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.ExamIntellisense=void 0;const F=I(95970),h=I(38469),U=I(50437),E=I(97525),d=I(30091),C=I(42167),g=I(36801);H.ExamIntellisense=class _{constructor(w){this.conf=w,this._lstQuest=[],this._lines=[],this.singleMode=!1,this.exParser=new F.ExamParser(w),this.apiService=null}setSingleMode(w){this.singleMode=w}setLines(w){this._lines=w}setApiService(w){this.apiService=w}parse(w){return this._lstQuest=this.exParser.parse(this._lines,w,!1),this._lstQuest}getAutofillValue(w,k,M){if(0==this._lstQuest.length)return[];if(/^\[?\s*@/.test(this._lines[w].trim()))return[];let Q=[],D=this.getCurPos(w,k),Z=D[0],V=D[1],oe=D[2],K=this._lines[w>0?w-1:0];if(Z&&Z.parts.length>0&&Z.parts[0].text?.trim().startsWith("[@"),K.startsWith("[@")||""==K.trim())return[];if(V&&Z){let ee="ABCDEFGHIJKLMN";V.label==V.label.toLowerCase()&&(ee=ee.toLowerCase());let ne=ee.indexOf(V.label),de=ee[ne+1]+V.olabel+" ",fe=V.label+V.olabel+" ";if(!this.singleMode&&this._lines[V.parts[0].lineIdx].trim()==fe.trim()&&V.parts[0].lineIdx!=w){let Le=Z.parts[0],Ge=this._lines[Le.lineIdx].substring(Le.b,Le.s).replace(/\d+/,Z.label+1+"")+" ";return Q.push(`${V.parts[0].lineIdx}|0|${fe.length}|`),Q.push(`${w}|${k}|${k}|${Ge}`),Q}if(V.label.toUpperCase()<"D"&&("enter"!=M||w>0&&""!=this._lines[w-1].trim()&&V.parts[0].lineIdx!=w))return Q.push(`${w}|${k}|${k}|${de}`),Q;if(!this.singleMode&&V.label.toUpperCase()>="D"&&V.parts[0].lineIdx!=w&&"enter"==M&&w==this._lines.length-1){let Le=Z.parts[0],Ge=this._lines[Le.lineIdx].substring(Le.b,Le.s).replace(/\d+/,Z.label+1+"")+" ";return Q.push(`${w}|${k}|${k}|\n${Ge}`),Q}}if(!V&&!oe&&Z&&"enter"==M&&""==this._lines[w].trim()&&w>0&&""!=this._lines[w-1].trim()){let ee=Z.parts[0],ne=this._lines[ee.lineIdx].substring(ee.s).trim();if(this.singleMode||""!=ne)if(0==Z.answers.length)Q.push(`${w}|${k}|${k}|A. `);else if(!this.singleMode){let de=Z.parts[0],Le=this._lines[de.lineIdx].substring(de.b,de.s).replace(/\d+/,Z.label+1+"")+" ";Q.push(`${w}|${k}|${k}|${Le}`)}return Q}return Q}getSuggestions(w,k,M,B){return new Promise(Q=>{let D=B?.substring(0,k)??"",Z=this.singleMode?[new h.AnsSugg,new E.EndSugg,new U.ChooseSugg]:[new d.IncludeSugg(this.apiService,Q),new C.QuestSugg,new h.AnsSugg,new g.SectionSugg,new E.EndSugg,new U.ChooseSugg],V=[],oe=this.getCurPos(w,k),K=oe[0],ee=oe[1],fe=K?{type:oe[2]?"h":ee?"a":"q",quest:K,ansLabel:ee?ee.label:void 0,secLabel:K.group?this._lstQuest.filter(Le=>Le.isGroup).pop()?.parts[0].text:void 0,lineIdx:w,col:k}:void 0;for(let Le of Z){let xe=Le.run(D,M,fe);if(1==xe.length&&"-1"==xe[0])return;V.push(...xe)}Q(V)})}getEditHint(){let k=0,M=[],B=!1,Q=null;for(const D of this._lstQuest){if(D.isGroup){Q=D;continue}let Z="",V="A".charCodeAt(0)-1,oe=!1;for(const K of D.answers){if(""==K.olabel)break;if(Z+=K.label,!oe&&!"ABCDEFGHIJKLMN".startsWith(Z.toUpperCase())&&(oe=!0),V++,oe){let ee=K.parts[0],ne="*"==this._lines[ee.lineIdx].substring(ee.b,ee.b+1)?1:0;M.push(`${ee.lineIdx}|${ee.b+ne}|${ee.b+ne+1}|${String.fromCharCode(V)}`)}}if(!B&&D.label-k<=0&&k>0&&null!=Q&&!Q.isGroup&&(B=!0),B){let K=D.parts[0],ne=this._lines[K.lineIdx].substring(K.b,K.s).replace(/\d+/,k+1+"");M.push(`${K.lineIdx}|${K.b}|${K.s}|${ne}`),k++}else k=D.label;Q=D}return M}getCurPos(w,k){let M=!1,B=null,Q=null,D=!1,Z=!1;for(const V of this._lstQuest)if(!V.isGroup){for(const oe of V.parts)if(oe.lineIdx==w){M=!0,B=V,Q=null,V.parts.length>0&&V.parts[0].text?.trim().startsWith("[@")&&(Z=!0,M=!1);break}if(Z&&V.parts.length>0&&!V.parts[0].text?.trim().startsWith("[@"))break;for(const oe of V.answers)for(const K of oe.parts)if(K.lineIdx==w&&K.s<=k&&(!K.e||K.e>=k)){M=!0,B=V,Q=oe;break}if(M)break;if(V.help)for(const oe of V.help)if(oe.lineIdx==w&&oe.s<=k&&(!oe.e||oe.e>=k)){M=!0,B=V,Q=null,D=!0;break}if(M)break}return[B,Q,D]}}},23790:(Ne,H,I)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.Checker=void 0;const F=I(9264);H.Checker=class h{constructor(){this.lstChecker=[new F.NoAnsErr]}run(E){for(let d of E){d.error=[];for(let C of this.lstChecker){let g=C.check(d);d.error.push(...g)}}}}},82216:(Ne,H)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.ErrorChecker=void 0,H.ErrorChecker=class I{}},9264:(Ne,H,I)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.NoAnsErr=void 0;const F=I(82216);H.NoAnsErr=class h extends F.ErrorChecker{check(E){return"SC"!=E.typeCode&&"MC"!=E.typeCode||0!=E.answers.filter(C=>C.isCorrect).length?[]:[{type:"NO_ANS",msg:"ERR_NO_CORRECT_ANS",quickFix:["B\u1ea5m v\xe0o A, B, C ho\u1eb7c D \u0111\u1ec3 ch\u1ecdn l\xe0m \u0111\xe1p \xe1n \u0111\xfang"]}]}}},38469:(Ne,H,I)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.AnsSugg=void 0;const F=I(99934);H.AnsSugg=class h extends F.Sugg{run(E,d,C){if(!C||"h"==C.type||/^\[?\s*@/.test(E))return[];let g=C.ansLabel?String.fromCharCode(C.ansLabel.charCodeAt(0)+1)+".":"A.";return[g+"|"+g+" "]}}},50437:(Ne,H,I)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.ChooseSugg=void 0;const F=I(99934);H.ChooseSugg=class h extends F.Sugg{run(E,d,C){if(E!=d||!C)return[];let g=[];if("h"==C.type&&C.quest)for(let _ of C.quest.answers)g.push(`azt_lang_sugg_choose ${_.label}|azt_lang_sugg_choose ${_.label}`);return g}}},97525:(Ne,H,I)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.EndSugg=void 0;const F=I(99934);H.EndSugg=class h extends F.Sugg{run(E,d){return E!=d?[]:["azt_lang_sugg_help_unsign|azt_lang_sugg_help\n","azt_lang_sugg_help|azt_lang_sugg_help\n","azt_lang_sugg_ans_table_unsign|azt_lang_sugg_ans_table_upper\n","azt_lang_sugg_ans_table|azt_lang_sugg_ans_table_upper\n","azt_lang_sugg_the_end_short_unsign|azt_lang_sugg_the_end\n","azt_lang_sugg_the_end_short|azt_lang_sugg_the_end\n","azt_lang_sugg_instruction_unsign|azt_lang_sugg_instruction\n","azt_lang_sugg_instruction|azt_lang_sugg_instruction\n"]}}},30091:(Ne,H,I)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.IncludeSugg=void 0;const F=I(58343),h=I(99934);H.IncludeSugg=class U extends h.Sugg{constructor(d,C){super(),this.apiService=d,this.resolve=C}run(d){let C=d;if(C.startsWith("@[")&&(C=C.substring(1)),/^\[?\s*@/.test(C)&&null!=this.apiService){let g=C.replace("]..","].").split("].").map(oe=>oe.replace("]","").replace("[","").replace("@","").trim()),_=g[g.length-1],x=0,w=!0,k="azt_lang_sugg_random x azt_lang_sugg_question|[azt_lang_sugg_random ${1:2} azt_lang_sugg_question]|snippet",M="azt_lang_sugg_get_all|[ALL]|snippet",B=["azt_lang_sugg_filter: azt_lang_sugg_level azt_lang_sugg_level_easy|[@F:azt_lang_tag_NB].|snippet","azt_lang_sugg_filter: azt_lang_sugg_level azt_lang_sugg_level_medium|[@F:azt_lang_tag_TH].|snippet","azt_lang_sugg_filter: azt_lang_sugg_level azt_lang_sugg_level_hard|[@F:azt_lang_tag_VD].|snippet","azt_lang_sugg_filter: azt_lang_sugg_level azt_lang_sugg_level_hardest|[@F:azt_lang_tag_VDC].|snippet","azt_lang_sugg_filter: azt_lang_sugg_type azt_lang_sugg_type_multiple_choice|[@F:azt_lang_tag_TN].|snippet","azt_lang_sugg_filter: azt_lang_sugg_type azt_lang_sugg_type_fill_blank|[@F:azt_lang_tag_DT].|snippet","azt_lang_sugg_filter: azt_lang_sugg_type azt_lang_sugg_type_essay|[@F:azt_lang_tag_TL].|snippet"],Q="",D="",V=C.matchAll(/\[@C(\d+)::user\-[^\]]*\]/g);for(;;){let oe=V.next();if(oe.done)break;D="user_"+oe.value[1]}if(g.length>1){_.endsWith(",")&&/^([CTGQH][\-\d]+|F):/.test(_)&&(Q=_.substring(0,1),_="");let oe=g[g.length-2];if(oe.startsWith("F:"))return this.resolve([k]),["-1"];if(oe.indexOf(",")>=0){let K=[];return""==Q&&K.push(k),K.push(...B),this.resolve(K),["-1"]}if(_.trim().length>0&&!/^[CTGQH][\-\d]+:/.test(_))return this.resolve([]),["-1"];if(!/^[CTGQH][\-\d]+:/.test(oe))return this.resolve([]),["-1"];if(/^C[\-\d]+:/.test(oe)&&(x=+oe.split(":")[0].trim().substring(1),/^C[\-\d]+::user\-/.test(oe)&&(D="user")),/^T[\-\d]+:/.test(oe)&&(x=+oe.split(":")[0].trim().substring(1),w=!1),/^G[\-\d]+:/.test(oe)){let K=oe.split(":")[1].split("-")[0];return this.resolve(["azt_lang_sugg_get_group_title|[azt_lang_sugg_get_title]|snippet",`azt_lang_sugg_get_all|[azt_lang_sugg_get_title]\n${C}[azt_lang_sugg_get_all ${K} azt_lang_sugg_question]|snippet`,`azt_lang_sugg_random x azt_lang_sugg_question|${"[azt_lang_sugg_get_title]\n"+C+"[azt_lang_sugg_random ${1:2} azt_lang_sugg_question]"}|snippet`]),["-1"]}if(/^Q[\-\d]+:/.test(oe)||/^Q[\-\d]+:/.test(_))return this.resolve([]),["-1"];if(/^H[\-\d]+:/.test(oe)||/^Q[\-\d]+:/.test(_))return this.resolve([]),["-1"]}if(w)return"F"==Q?(this.resolve(B),["-1"]):(this.apiService.searchRes(D,x).then(oe=>{let K="";-1==x&&(K=":user-"),(0==x||-1==x)&&(k="");let ee=oe.map(ne=>{let de=ne.name;return de=de.replaceAll(/[\[\],\.\-]+/g,""),`${de}|[@${("cat"==ne.type?"C":"T")+ne.id}:${K}${de}].|${"cat"==ne.type?"folder":"file"}`});""!=k&&""==Q&&(ee.push(k),ee.push(...B)),this.resolve(ee)}),["-1"]);if(C.endsWith(".")||C.endsWith(",")){let oe=Math.abs(x);return this.apiService.getQuestion(oe).then(K=>{let ee=K.map(fe=>{let Le=("group"==fe.type?"azt_lang_sugg_group_cc ":"azt_lang_sugg_question_cc ")+fe.label,xe=("group"==fe.type?"G":"Q")+fe.id,Ge="group"==fe.type?".":"",nt=fe.content,ht="group"==fe.type?"class":"function",Ct="group"==fe.type?K.filter(wt=>wt.groupId==fe.id).length+"-":"",mt="group"!=fe.type&&fe.groupId?"G"+F.Utils.zeroPad(3,fe.groupId):"G000";return"group"==fe.type&&(mt="G"+F.Utils.zeroPad(3,fe.id)),{name:Le,code:xe,groupQnum:Ct,posfix:Ge,icon:ht,sort:`${mt}-${"group"==fe.type?"G"+F.Utils.zeroPad(3,fe.id):"Q"+F.Utils.zeroPad(10,fe.id)}`,doc:nt}});ee.sort((fe,Le)=>fe.sort>Le.sort?1:-1);let ne=ee.map(fe=>`${fe.name}|[@${fe.code}:${fe.groupQnum}${fe.name}]${fe.posfix}|${fe.icon}|${fe.sort}|${fe.doc}`),de=[];if(""!=k){""==Q&&(de.push(k),de.push(...B));let fe=M.split("|");fe[1]=ee.map((Le,xe)=>(0==xe?"":C)+`[@${Le.code}:${Le.groupQnum}${Le.name}]`+(Le.code.startsWith("G")?".[azt_lang_sugg_get_title]":"")).join("\n"),de.push(fe.join("|"))}de.push(...ne),"F"==Q&&(de=B),this.resolve(de)}),["-1"]}return this.resolve([]),["-1"]}return[]}}},42167:(Ne,H,I)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.QuestSugg=void 0;const F=I(58343),h=I(99934);H.QuestSugg=class U extends h.Sugg{run(d,C,g){if(d!=C)return[];if(!g)return["azt_lang_sugg_question_cc 1. |azt_lang_sugg_question_cc 1. ","azt_lang_sugg_question_cc_unsign 1. |azt_lang_sugg_question_cc 1. ","Question 1. |Question 1. "];let _=g.quest.olabel??"azt_lang_sugg_question_cc 1.",x=+F.Utils.getNumberFromStr(_),w=_.replace(/\d+/,x+1+"");return w=g.quest.olabel?F.Utils.capitalizeFirstLetter(w):w,[F.Utils.removeAccents(w)+"|"+w+" ",w+"|"+w+" "]}}},36801:(Ne,H,I)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.SectionSugg=H.toArabic=H.isRoman=H.toRoman=H.BaseNumbers=H.RomanNumber=void 0;const F=I(58343),h=I(99934);class U{constructor(x,w){this.baseUnits=0,this.thousands=0,this.num=x,this.str=w}}function E(_){let x,w;if(_<=0||_>3999)return"";{x=0;let k="";for(_=Math.floor(_);_>0;)w=H.BaseNumbers[x],0===Math.floor(_/w.num)?++x:(k+=w.str,_-=w.num);return k}}function d(_){return/^M{0,4}(CM|CD|D?C{0,3})(XC|XL|L?X{0,3})(IX|IV|V?I{0,3})$/.test(_)}function C(_){let x=_.toUpperCase();if(!d(x))return null;let w=0,k=0;for(;x.length>0&&k<H.BaseNumbers.length;){const M=H.BaseNumbers[k];x.startsWith(M.str)?(w+=M.num,x=x.substring(M.str.length)):k++}return x.length>0?null:w}H.RomanNumber=U,H.BaseNumbers=[new U(1e3,"M"),new U(900,"CM"),new U(500,"D"),new U(400,"CD"),new U(100,"C"),new U(90,"XC"),new U(50,"L"),new U(40,"XL"),new U(10,"X"),new U(9,"IX"),new U(5,"V"),new U(4,"IV"),new U(1,"I")],H.toRoman=E,H.isRoman=d,H.toArabic=C,H.SectionSugg=class g extends h.Sugg{run(x,w,k){if(x!=w)return[];if(!k)return["azt_lang_sugg_part_cc 1. |azt_lang_sugg_part_cc 1. ","azt_lang_sugg_part_cc_unsign 1. |azt_lang_sugg_part_cc 1. ","Part 1. |Part 1. "];if("h"==k.type||!k.secLabel)return[];let M="";if(/^(ph\u1ea7n|part)\s*\d+\./.test(k.secLabel.toLowerCase())){let B=k.secLabel.split("."),Q=+F.Utils.getNumberFromStr(B[0]);M=B[0].replace(/\d+/,Q+1+".")}else if(/^(ph\u1ea7n|part)\s+[ivx]+\./.test(k.secLabel.toLowerCase())){let Q=k.secLabel.split(".")[0].split(" "),Z=E((C(Q.pop())??0)+1);Q.push(Z),M=Q.join(" ")+"."}else/^[ivx]+\./.test(k.secLabel.toLowerCase())&&(M=E((C(k.secLabel.split(".")[0])??0)+1)+".");return[F.Utils.removeAccents(M)+"|"+M+" ",M+"|"+M+" "]}}},99934:(Ne,H)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.Sugg=void 0,H.Sugg=class I{constructor(){this.lang="vi"}setLang(h){this.lang=h}}},82474:(Ne,H,I)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.DocxReader=void 0;const F=I(73869),h=I(40373),U=I(15461),E=I(60921),d=I(49225);H.DocxReader=class C{constructor(_=!0){_&&(this.wmf=new WMFConverter)}readFileInputEventAsArrayBuffer(_,x){let w=new FileReader;w.onload=function(k){x(k.target.result)},w.readAsArrayBuffer(_)}readFile(_,x,w,k,M){let B=this,Q=(D,Z)=>{k&&k(D,Z,"lang_auto_cong_thuc")};this.readFileInputEventAsArrayBuffer(_,function(D){azotaDocx.readDocx(D,Q).then(function(Z){console.log(Z);for(let K of Z.data)"img"==K.type&&("image/x-wmf"==K.contentType||"image/x-emf"==K.contentType?B.convert(K):K.value="data:"+K.contentType+";base64, "+K.value,!K.cssStyle&&K.height&&K.width&&"EMU"==K.measureUnit)&&(K.cssStyle=`width:${+K.width/12700}pt;height:${+K.height/12700}pt;margin-top:0px;`);let V=new Map,oe=0;for(let K of Z.data)"img"==K.type&&K.cropInfo&&V.set(oe,1),oe++;if(w&&0==V.size)w(B.parse(Z,x));else{oe=0;for(let K of Z.data){if("img"==K.type&&K.cropInfo){const ee=oe,ne=document.createElement("img");ne.src=K.value,ne.onload=()=>{B.cropImage(K,ne),V.delete(ee),0==V.size&&w&&w(B.parse(Z,x))},ne.onerror=()=>{V.delete(ee),0==V.size&&w&&w(B.parse(Z,x))}}oe++}}}).catch(Z=>{M&&M(Z.message)})})}parseText(_,x=!1){let w=_.split("\n");(new U.SmartTestReader).process(w),w=this.processUnderlineAns(w);let M=w.join("\n").replaceAll(/\?\s*(\$\])?\s+(\[![!ubclih]+:\$A\.\s*\$\])/g,"?$1\n$2").replaceAll(/\?\s*(\$\])?\s+(\[![!ubclih]+:\$A\$\]\.)/g,"?$1\n$2").replaceAll(/\?\s*(\$\])?\s+(\[![!ubclih]+:\$A\$\]\s*\[![!ubclih]+:\$\s*\.)/g,"?$1\n$2"),B=M,Q=new E.StyleRender,D=[];if(x){let Z=Q.clean(M);M=Z.res,D=Z.styles}else M=Q.render(M);return{text:M,orgText:B,images:[],mathMap:new Map,tableMap:new Map,styles:D}}parse(_,x=!1){let w="",k=[],M=new Map,B=new Map,Q=[];for(let ne of _.data)if("img"==ne.type)k.push({id:ne.key,link:ne.value,cssStyle:ne.cssStyle}),ne.cssStyle&&ne.cssStyle.split(";").length>2&&Q.push([`^\\[img:\\$${ne.key}\\$\\]`,`[img:$${ne.key}$]\n`]);else if("mathml"==ne.type){let de=+ne.key.split("_")[1];M.set(ne.key,{id:de,str:ne.value,raw:ne.docx})}else"table"==ne.type&&B.set(ne.position,ne);let D=[],Z=-1;for(let ne of _.lines){if(Z++,0==ne.length)continue;let de="";if(Array.isArray(ne[0])&&Array.isArray(ne[ne.length-1])&&Array.isArray(ne[Math.floor(ne.length/2)])){let Le=_.data.filter(nt=>nt.position==Z&&"table"==nt.type)[0],xe=Le?`!!${Le.position}!!:`:"";de=Le&&+Le.borderBottomSize>0||D.length>0&&D[D.length-1].startsWith("[*")?`[*${xe} `+ne.map(nt=>nt.map(ht=>ht.join("").replaceAll("\n","\\n").replaceAll("|","\\|")).join("\\n")).join(" | ")+" *]":ne.map(nt=>nt.map(ht=>ht.join("")).join("\n")).join(" \t ")}else de=ne.join("");for(let Le of Q)de=de.replaceAll(new RegExp(Le[0],"g"),Le[1]);let fe=de.split("\n");for(let Le of fe)D.push(Le)}(new U.SmartTestReader).process(D),D=this.processUnderlineAns(D),w=D.join("\n").replaceAll(/\?\s*(\$\])?\s+(\[![!ubclih]+:\$A\.\s*\$\])/g,"?$1\n$2").replaceAll(/\?\s*(\$\])?\s+(\[![!ubclih]+:\$A\$\]\.)/g,"?$1\n$2").replaceAll(/\?\s*(\$\])?\s+(\[![!ubclih]+:\$A\$\]\s*\[![!ubclih]+:\$\s*\.)/g,"?$1\n$2");let oe=w,K=new E.StyleRender,ee=[];if(x){let ne=K.clean(w);w=ne.res,ee=ne.styles}else w=K.render(w),w=new F.ImageRender(k).render(w),w=new h.MathRender(M).render(w),w=new d.TableRender(B).render(w);return{text:w,orgText:oe,images:k,mathMap:M,tableMap:B,styles:ee}}processUnderlineAns(_){let x=/\[[!bichl]*[!u]+[!bichl]*:\$(([^$]|\$[^\]])+)\$\]/g,w=0,k=[];for(let M of _){let B=M;if(B=B.replaceAll(/\[[!uhl]+:\$([A-D\s.]+)\$\]/g,"*$1"),/^[ABCD.\s*]+$/.test(B)&&""!=B.trim()&&w>0){B=B.replaceAll(/[\s.]+/g,"");let Q=B.indexOf("*"),D=0;if(B=B.replaceAll(/[*]+/g,""),"ABCDEFGH".indexOf(B)>=0){let Z=_[w-1].match(x);if(Z&&B.length==Z.length){for(let oe of Z)_[w-1]=_[w-1].replace(oe,oe.replace(/\[[!bichl]*[!u]+[!bichl]*:\$/g,`[${Q==D?"*":""}${B.substring(0,1)}:`).replace("$]","]")),k[k.length-1]=_[w-1],B=B.substring(1),D++;w++;continue}}}k.push(M),w++}return k}convert(_){return new Promise(x=>{if("image/x-wmf"==_.contentType)_.value=this.wmf.toPNG("data:"+_.contentType+";base64, "+_.value),x();else{let M=new ToContext2D(0,1),B=this.decodeBase64(_.value);try{FromEMF.Parse(B,M)}catch{}let Q=this.scaleCanvas(M.canvas,200,200);_.value=Q.toDataURL(),x()}})}decodeBase64(_){return Uint8Array.from(atob(_),function(x){return x.charCodeAt(0)})}scaleCanvas(_,x,w){let k=document.createElement("canvas");return k.width=x,k.height=w,k.getContext("2d")?.drawImage(_,0,0,_.width,_.height,0,0,x,w),k}cropImage(_,x){if(!_.cropInfo)return;let w=_.cropInfo.left?+_.cropInfo.left:0,k=_.cropInfo.top?+_.cropInfo.top:0,M=_.cropInfo.right?+_.cropInfo.right:0,B=_.cropInfo.bottom?+_.cropInfo.bottom:0;if(w+k+M+B==0)return;let Q=x.width,D=x.height,Z=w*Q/1e5,V=k*D/1e5,ee=Q-M*Q/1e5-Z,ne=D-B*D/1e5-V;const de=document.createElement("canvas");de.width=ee,de.height=ne,de.getContext("2d")?.drawImage(x,Z,V,ee,ne,0,0,ee,ne),_.value=de.toDataURL()}}},97064:(Ne,H)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.DicReplaceRender=void 0,H.DicReplaceRender=class I{constructor(){this.chemBase=["H","He","Li","Be","B","C","N","O","F","Ne","Na","Mg","Al","Si","P","S","Cl","Ar","K","Ca","Sc","Ti","V","Cr","Mn","Fe","Co","Ni","Cu","Zn","Ga","Ge","As","Se","Br","Kr","Rb","Sr","Y","Zr","Nb","Mo","Tc","Ru","Rh","Pd","Ag","Cd","In","Sn","Sb","Te","I","Xe","Cs","Ba","La","Ce","Pr","Nd","Pm","Sm","Eu","Gd","Tb","Dy","Ho","Er","Tm","Yb","Lu","Hf","Ta","W","Re","Os","Ir","Pt","Au","Hg","Tl","Pb","Bi","Po","At","Rn","Fr","Ra","Ac","Th","Pa","U","Np","Pu","Am","Cm","Bk","Cf","Es","Fm","Md","No","Lr","Rf","Db","Sg","Bh","Hs","Mt","Ds","Rg","Cn","Nh","Fl","Mc","Lv","Ts","Og"]}makeid(h){let U="";let C=0;for(;C<h;)U+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random())),C+=1;return U}findAttributes(h){const U={content:"",attr:[]};return U.content=h.replace(/(\w+)=["']?((?:.(?!["']?\s+=|\s*\/?[>"']))+.)["']?/g,E=>{const d=this.makeid(25);return U.attr.push({key:d,value:E}),d}),U}processMapException(h,U){return U.forEach(E=>{h=h.replace(E.key,E.value)}),h}render(h){if(h.trim().startsWith("[@"))return h;const U=this.findAttributes(h);let E=h=U.content,d=this.chemBase.join("|"),C=new RegExp(`(?:[\\s,.:;"'=\u2013\\-\\/\\+\\?<>]|^)\\(?\\d*(${d})+\\d*(${d}|\\d+|\\(|\\))*(?:(?=[\\s,.:;"'=\u2013\\-\\/\\+\\?<>])|\\(\\w+\\)|$)`,"g"),g=E.matchAll(C),_=[];for(;;){let w=g.next();if(w.done)break;let k=0==w.value.index?w.value[0]:w.value[0].substring(1);k.replace("(","").replace(")","").length<=1||_.push({s:0==w.value.index?0:w.value.index+1,len:k.length,val:this.autoFormat(k)})}if(_.sort((w,k)=>w.s>k.s?-1:1),_.filter(w=>/\d+/.test(w.val)).length>0)for(let w of _)E=E.substring(0,w.s)+"\\("+w.val+"\\)"+E.substring(w.s+w.len);return this.processMapException(E,U.attr)}autoFormat(h){return h.replaceAll(/([^(])(\d+)/g,"$1_{$2}")}}},12630:(Ne,H,I)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.ExamReader=void 0;const F=I(82474),h=I(60921),U=I(40373),E=I(49225),d=I(73869),C=I(28443),g=I(1889),_=I(36679),x=I(97064),w=I(95970);H.ExamReader=class k{constructor(B){this.cfg=B}read(B,Q,D,Z){(new F.DocxReader).readFile(B,!0,oe=>{console.log(oe),this.parse(oe,Q)},D,Z)}readFromText(B,Q){let Z=new F.DocxReader(!1).parseText(B,!0);this.parse(Z,Q)}setAnsStyle(B,Q,D){let Z=new h.StyleRender,V=B.answers.length>0&&0==B.answers.filter(fe=>fe.isCorrect).length,oe=[],K=[],ee=!1,ne=!0,de=[];for(let fe of B.answers){let Le=Z.getAnsStyle(Q,fe.parts[0],D);Le.indexOf("!fl")>=0&&(V&&K.push(fe),Le.indexOf("!cl")<0&&(ne=!1)),V&&(Le.indexOf("!u")>=0&&(fe.isCorrect=!0,ee=!0),(Le.indexOf("!cl")>=0||Le.indexOf("!hl")>=0)&&oe.push(fe)),de.push(Le)}if(!ee&&K.length<B.answers.length&&K.length>0)for(let fe of K)fe.isCorrect=!0;else if(!ee&&oe.length<B.answers.length&&oe.length>0)for(let fe of oe)fe.isCorrect=!0;if(V=B.answers.length>0&&0==B.answers.filter(fe=>fe.isCorrect).length,V){let fe=0;for(let Le of de){let xe=Le.split("!");xe.length>fe&&(fe=xe.length)}if(fe>1){let Le=[];for(let xe=0;xe<de.length;xe++)de[xe].split("!").length==fe&&Le.push(B.answers[xe]);if(Le.length<B.answers.length)for(let xe of Le)xe.isCorrect=!0}}return ne}parse(B,Q){let D=new w.ExamParser(this.cfg),Z=new h.StyleRender,V=B.text.split("\n"),oe=D.parse(V);for(let ee of oe){this.renderPart(ee.parts,B);let ne=this.setAnsStyle(ee,V,B.styles);for(let fe of ee.answers)this.renderPart(fe.parts,B,ne);let de=ee.answers.length>0&&0==ee.answers.filter(fe=>fe.isCorrect).length;if(ee.help&&de){Z.applyStyle(ee.help,B.styles);let fe=ee.help?.map(Le=>Le.text).join("\n")??"";if(""!=fe.trim()){let Le=Z.clean(fe),xe=(`C\xe2u ${ee.label}. `+Le.res).split("\n"),Ge=D.parse(xe);if(1==Ge.length){this.setAnsStyle(Ge[0],xe,Le.styles);let nt=Ge[0].answers.filter(ht=>ht.isCorrect);for(let ht of nt)ee.answers.filter(Ct=>Ct.label==ht.label)[0].isCorrect=!0}}}ee.help&&this.renderPart(ee.help,B,!1)}D.checkErr(oe),Q(oe.map(ee=>({label:ee.olabel??ee.label+".",content:this.getText(ee.parts,B),isGroup:ee.isGroup,answers:ee.answers.map(ne=>({label:ne.label,olabel:ne.olabel,content:this.getText(ne.parts,B),isCorrect:ne.isCorrect,order:ne.order})),fillBlankAnswer:ee.strAns,typeCode:ee.typeCode,help:ee.help?this.getText(ee.help,B):void 0,group:ee.group,isFixAns:ee.isFixAns,error:ee.error})),B)}toText(B,Q=!1){let D=[];for(let V of B){if(D.push(`${V.label} ${V.content}`.trim()),V.isGroup)continue;let oe=[];for(let K of V.answers??[])D.push(`${K.label}${K.olabel??"."} ${K.content}`),oe.push("TF"==V.typeCode?`${K.label})${K.isCorrect?"\u0110":"S"}`:K.label);0==oe.length&&V.fillBlankAnswer&&oe.push(V.fillBlankAnswer),D.push("L\u1eddi gi\u1ea3i"),D.push("\u0110\xe1p \xe1n: "+oe.join(", ")),V.help&&D.push(V.help),D.push("")}let Z=D.join("\n");return Z=Z.replaceAll(/\[\*(!!\d+!!:)?/g,"|").replaceAll("*]","|"),Q||(Z=Z.replaceAll(/<img[^>]+>/g,"[image]")),Z}renderPart(B,Q,D=!0){let Z=new h.StyleRender;D&&Z.applyStyle(B,Q.styles);for(let V of B)V.text&&(V.text=Z.render(V.text),V.text=new d.ImageRender(Q.images).render(V.text),V.text=new U.MathRender(Q.mathMap).render(V.text),V.text=(new C.UnderlineAnsRender).render(V.text),V.text=(new g.SkipLatexBoundRender).render(V.text),V.text=(new _.SymbolRender).render(V.text),V.text=(new x.DicReplaceRender).render(V.text))}getText(B,Q){let D=B.map(Z=>Z.text).join("<br>").replace(/^(\s*<br>\s*)+/g,"").replace(/(\s*<br>\s*)+$/g,"");return D=new E.TableRender(Q.tableMap).render(D,"<br>"),D}}},73869:(Ne,H)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.ImageRender=void 0,H.ImageRender=class I{constructor(h){this.iamges=h}render(h){let U=h;for(let E of this.iamges){let d=E.cssStyle?E.cssStyle.replaceAll(/position:\s*[^;]+;?/g,""):"";U=U.replaceAll("[img:$"+E.id+"$]",`<img id="${E.id}" src="${E.link}" style="${d}">`)}return U}}},40373:(Ne,H)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.MathRender=void 0,H.MathRender=class I{constructor(h,U=!1){this.mathMap=h,this.raw=U}render(h){let U=h,d=U.matchAll(/\[!m:\$(([^\]]|[^$]\])+)\$\]/g);for(;;){let C=d.next();if(C.done)break;let g=C.value[0],_=C.value[1],x=this.mathMap.get(_),w="";if(x){let k=this.isPureTextMathML(x.str);if(""!=k)w=k;else{const M=document.createElement("span");M.id=_,M.innerHTML=this.cleanMathML(x.str),this.raw&&x.raw&&M.setAttribute("data-azt-math-raw",x.raw),w=M.outerHTML}}U=U.replace(g,w)}return U}cleanMathML(h){let U=h;return U=U.replaceAll('display="block"',""),U=U.replaceAll(/<\?xml[^>]+\?>/g,""),U=U.replaceAll(/\s*xmlns="[^"]+"/g,""),U=U.replaceAll("\n",""),U}isPureTextMathML(h){let E=(new DOMParser).parseFromString(h,"application/xml");if(E.querySelector("parsererror"))return console.error("isPureTextMathML: Invalid MathML"),"";let d=E.documentElement.children,C=["mi","mn","mo","ms","mspace","mtext"],g="";for(let x=0;x<d.length;x++){let w=d[x];if(C.indexOf(w.tagName.toLowerCase())<0)return"";g+=w.textContent?.trim()??""}return/^[0-9.,-]+$/.test(g.replaceAll("\u2212","-"))?g:""}}},1889:(Ne,H)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.SkipLatexBoundRender=void 0,H.SkipLatexBoundRender=class I{render(h){let U=this.bypassChild(h);return U=U.replaceAll(/\\\)\s*\\\(/g,""),U}bypassChild(h,U="\\(",E="\\)"){if(U.length!==E.length)return"";const d=[];let C=0;for(;;){let x=h.indexOf(U,C);if(-1===x)break;d.push("s_"+x),C=x+1}for(C=0;;){let x=h.indexOf(E,C);if(-1===x)break;d.push("e_"+x),C=x+1}d.sort(function(x,w){return parseInt(x.substring(2))-parseInt(w.substring(2))});let g=[];const _=[];return d.forEach(x=>{if(x.startsWith("s"))g.push(parseInt(x.substring(2)));else if(1==g.length)g=[];else{let w=g.pop();if(w){let k=parseInt(x.substring(2));_.push(w),_.push(k)}}}),_.sort(function(x,w){return x-w}).reverse().forEach(x=>{h=h.substring(0,x)+h.substring(x+U.length)}),h}}},15461:(Ne,H)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.SmartTestReader=void 0,H.SmartTestReader=class I{process(h){let U=/^\s*#(\d)\s*\[[A-Z0-9\-[\]$!:b]+\]/g,E=["NB","TH","VD","VDC"],d=0,C=!1,g=1;for(let _ of h){let w=_.matchAll(U).next();if(!w.done){let M=+w.value[1]-1;M<E.length&&(h[d]=_.replace(w.value[0],`C\xe2u ${g++}. (${E[M]})`)),C=!0}C&&"GY"==_.trim()&&(h[d]="L\u1eddi gi\u1ea3i"),d++}}}},60921:(Ne,H)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.StyleRender=void 0,H.StyleRender=class I{render(h){let U=h;U=U.replaceAll(/\[![!aibucsphl]+:\$\$\]/g,"");let d=U.matchAll(/\[![!aibucsphl]+:\$(([^$]|\$[^\]])+)\$\]/g);for(;;){let C=d.next();if(C.done)break;let g=C.value[0],_=C.value[1],x=g.split(":")[0].split("!");x.shift(),x.filter(w=>"a"==w).length>0&&(_=_.toUpperCase());for(let w=x.length-1;w>=0;w--){let k=x[w];_="hl"==k||"cl"==k?`<span class='cl'>${_}</span>`:`<${k}>${_}</${k}>`}U=U.replace(g,_)}return U}clean(h){let U=h.split("\n"),E=/\[![!aibuchl]+:\$(([^$]|\$[^\]])+)\$\]/g,d=/^\s*\[\*(!!\d+!!:)?\s*[AC]\.[^|]+\|\s*[BD]\..*\*\]\s*$/g,C=[],g=0;for(let x of U){let w=x;d.test(U[g].replaceAll(E,"$1"))&&(U[g]=U[g].replaceAll(/\[\*(!!\d+!!:)?/g,"").replaceAll("*]","").replaceAll("|"," ").trim(),w=U[g]);let B,k=w.matchAll(E),M=0;for(;;){let Q=k.next();if(Q.done)break;let D=Q.value[0],Z=D.indexOf(":"),V=D.substring(1,Z),K=(Q.value.index??0)-M,ee=K+Q.value[1].length;B&&K==B.e&&B.style==V?B.e=ee:(B={lineIdx:g,s:K,e:ee,style:V},C.push(B)),M+=Z+4}U[g]=w.replaceAll(E,"$1"),g++}return{res:U.join("\n"),styles:C}}applyStyle(h,U,E=!1){for(let d=h.length-1;d>=0;d--){let C=h[d],g=U.filter(x=>x.lineIdx==C.lineIdx&&this.isRangeIntersec(x.s,x.e,C.s,C.e??999999)),_=[];for(let x of g){let w=x.s>=C.s?x.s:C.s,k=x.e<=(C.e??9999999)?x.e:C.e??9999999;w-=C.s,k-=C.s;let M=E?x.style:x.style.replaceAll("!hl","").replaceAll("!cl","");w<k&&""!=M&&C.text&&""!=(C.text.substring(w,k)??"").trim()&&(_.push({idx:w,str:`[${M}:$`}),_.push({idx:k,str:"$]"}))}_.sort((x,w)=>{let k=w.idx-x.idx;return 0!=k?k:w.str.length-x.str.length});for(let x of _)C.text=C.text?.substring(0,x.idx)+x.str+C.text?.substring(x.idx)}}getAnsStyle(h,U,E){if(!U)return"";let d=[],C={...U};this.applyStyle([C],E,!0),C.text!=U.text&&""==C.text?.replaceAll(/\[[!a-z]+:\$[^\]]+\$\]/g,"").replaceAll(/\s*\.\s*$/g,"").trim()&&d.push("!fl");for(let x of E)x.lineIdx==U.lineIdx&&x.s<=U.b&&U.b<x.e&&d.push(x.style);let _=d&&d.length>0?d.join():"";return _.indexOf("!u")>=0||_.indexOf("!b")>=0||_.indexOf("!hl")>=0||_.indexOf("!cl")>=0||_.indexOf("!fl")>=0?_:""}isRangeIntersec(h,U,E,d){return h<=E&&E<=U||E<=h&&h<=d}getStyleScore(h){let U=0;return h.indexOf("!cl")>=0&&(U+=8),h.indexOf("!u")>=0&&(U+=4),h.indexOf("!i")>=0&&(U+=2),h.indexOf("!b")>=0&&(U+=1),U}}},36679:(Ne,H)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.SymbolRender=void 0,H.SymbolRender=class I{render(h){let U=h,E=[[/([^<])-+([^\-><]+)-+>/g,"$1\\( \\xrightarrow[]{$2} \\)"],[/<-+([^\-><]+)-+([^>])/g,"\\( \\xleftarrow[]{$1} \\)$2"],[/([^<])--+>/g,"$1\\( \\longrightarrow \\)"],[/<--+([^>])/g,"\\( \\longleftarrow \\)$1"],[/<-+>/g,"\\( \\longleftrightarrow \\)"],[/([^<])->/g,"$1\\( \\rightarrow \\)"],[/<-([^>])/g,"\\( \\leftarrow \\)$1"]];for(let d of E)U=U.replaceAll(d[0],d[1]);return U}}},49225:(Ne,H)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.TableRender=void 0,H.TableRender=class I{constructor(h){this.infos=h}render(h,U="\n"){let d=h.split(U),C=[],g=[],_="";for(let x of d){let w=x;if(w.trim().startsWith("[*")&&w.trim().endsWith("*]")){let k=w.matchAll(/^\s*\[\*!!(\d+)!!:/g).next();if(k.value){g.length>0&&(C.push(`<table class="q-table ${_}">${g.join("")}</table>`),g=[]);let B=this.infos.get(+k.value[1]);_=B&&B.borderTopSize>0?"border-1":"border-0",w=w.replace(k.value[0],"[*")}let M=w.replaceAll("\\n","<br>").replaceAll("[*","<tr><td>").replaceAll("*]","</td></tr>");M=M.replaceAll("|","</td><td>"),g.push(M)}else g.length>0&&(C.push(`<table class="q-table ${_}">${g.join("")}</table>`),g=[]),C.push(w)}return g.length>0&&C.push(`<table class="q-table ${_}">`+g.join("")+"</table>"),C.join(U)}}},28443:(Ne,H)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.UnderlineAnsRender=void 0,H.UnderlineAnsRender=class I{render(h){let U=h,d=U.matchAll(/\[\*?[A-H]:[^\]]+\]/g);for(;;){let _=d.next();if(_.done)break;let x=_.value[0],k=x.substring(1,x.length-1).split(":");2==k[0].length&&(k[0]=k[0].substring(1)),U=U.replace(x,`<span class="qv_string_eng_ans" style='cursor: pointer;padding: 0 5px;font-weight: bold;text-decoration: underline;position: relative;height: 40px;display: inline-block;'>${k[1]} <span style='position: absolute;top: 20px;left: 45%;'>${k[0]}</span></span>`)}return U}revert(h,U){let E=h;return E=E.replaceAll(/<span class="qv_string_eng_ans"[^>]+>([^><]+)<span[^>]+>([^><]+)<\/span><\/span>/g,"[$2:$1]"),E=E.replace("["+U+":","[*"+U+":"),E}}},80581:function(Ne,H,I){"use strict";var F=this&&this.__createBinding||(Object.create?function(U,E,d,C){void 0===C&&(C=d);var g=Object.getOwnPropertyDescriptor(E,d);(!g||("get"in g?!E.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return E[d]}}),Object.defineProperty(U,C,g)}:function(U,E,d,C){void 0===C&&(C=d),U[C]=E[d]}),h=this&&this.__exportStar||function(U,E){for(var d in U)"default"!==d&&!Object.prototype.hasOwnProperty.call(E,d)&&F(E,U,d)};Object.defineProperty(H,"__esModule",{value:!0}),h(I(99230),H),h(I(37562),H),h(I(95970),H),h(I(5181),H),h(I(58343),H),h(I(82474),H),h(I(12630),H),h(I(60921),H),h(I(49225),H)},44103:(Ne,H,I)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.CanvasUtil=void 0;const F=I(58343);class h{static drawPoint(E,d,C){null!=E&&(E.fillStyle=d,E.beginPath(),E.arc(C.left,C.top,5,0,2*Math.PI),E.fill())}static drawBox(E,d,C,g){null!=E&&(g?(E.fillStyle=d,E.beginPath(),E.rect(C.left,C.top,C.width,C.heigh),E.fill()):(E.strokeStyle=d,E.beginPath(),E.rect(C.left,C.top,C.width,C.heigh),E.stroke()))}static drawBox2(E,d,C,g,_){null!=E&&(E.strokeStyle=d,E.beginPath(),E.rect(_[4],_[5],C,g),E.stroke())}static drawLine(E,d,C,g){null!=E&&(E.strokeStyle=d,E.beginPath(),E.moveTo(C,g),E.lineTo(E.canvas.width-10,g),E.stroke())}static drawText(E,d,C,g){null!=E&&(E.font="11px Arial",E.fillStyle=d,E.fillText(g,C[4],C[5]))}static isLineIntersec(E,d){let C=E.transform[5]<=d.transform[5]&&d.transform[5]<=E.transform[5]+E.height,g=d.transform[5]<=E.transform[5]&&E.transform[5]<=d.transform[5]+d.height,_=E.transform[4]<=d.transform[4]&&d.transform[4]<=E.transform[4]+E.width+F.CONST.INTERSEC_MARGIN,x=d.transform[4]<=E.transform[4]&&E.transform[4]<=d.transform[4]+d.width+F.CONST.INTERSEC_MARGIN,w=this.isSameLine(E,d);return(C||g)&&(_||x)&&!w}static isLineVIntersec(E,d){return(E.transform[5]<=d.transform[5]&&d.transform[5]<=E.transform[5]+E.height||d.transform[5]<=E.transform[5]&&E.transform[5]<=d.transform[5]+d.height)&&(E.transform[4]<=d.transform[4]&&d.transform[4]<=E.transform[4]+E.width+F.CONST.INTERSEC_MARGIN||d.transform[4]<=E.transform[4]&&E.transform[4]<=d.transform[4]+d.width+F.CONST.INTERSEC_MARGIN)&&Math.abs(d.transform[4]-E.transform[4])>F.CONST.INTERSEC_MARGIN/2}static isSameLine(E,d){return Math.abs(E.transform[5]+E.height-(d.transform[5]+d.height))<=F.CONST.LINE_MAGIN}static isObjIntersec(E,d){return E.transform[5]<=d.transform[5]&&d.transform[5]<=E.transform[5]+E.height||d.transform[5]<=E.transform[5]&&E.transform[5]<=d.transform[5]+d.height}static isObjFullIntersec(E,d){return(E.transform[5]<=d.transform[5]&&d.transform[5]<=E.transform[5]+E.height||d.transform[5]<=E.transform[5]&&E.transform[5]<=d.transform[5]+d.height)&&(E.transform[4]<=d.transform[4]&&d.transform[4]<=E.transform[4]+E.width||d.transform[4]<=E.transform[4]&&E.transform[4]<=d.transform[4]+d.width)}static isFirstLineOfPage(E,d){return!(E<0||E>=d.length||0!=E&&d[E-1].pageIndex==d[E].pageIndex)}static isLastLineOfPage(E,d){return!(E<0||E>=d.length||E!=d.length-1&&d[E+1].pageIndex==d[E].pageIndex)}static getTopLine(E,d,C){let g=C[d],_=[[F.CONST.STEP_SIZE,F.CONST.OVERLAP],[1,F.CONST.OVERLAP],[1,.3]];for(const x of _){let w=x[0],k=x[1],M=g.transform[5],B=0,Q=3*w;if(!h.isFirstLineOfPage(d,C)){let Z=h.isSameLine(C[d-1],g);h.isLineIntersec(C[d-1],g)?(M=C[d-1].transform[5]+C[d-1].height,B=C[d-1].transform[5],C[d-1].transform[4]>C[d].transform[4]+2*F.CONST.MARGIN_LEFT?B-=2*F.CONST.MARGIN_LEFT:B+=C[d-1].height*k,w=1,Q=C[d].transform[5]+C[d].height/2-M):(B=Z&&d-2>=0?C[d-2].transform[5]+C[d-2].height*k:C[d-1].transform[5]+C[d-1].height*k,Z&&h.isFirstLineOfPage(d-1,C)&&(B=0))}if(!F.CONST.ENABLE_IMAGE_PROCESS)return[M,0];let D=!1;for(;M>B;){if(!h.hasColor(E,g.transform[4],M,g.width,w))return[M,0];D||(D=!0,M+=Q),M-=w}}return[g.transform[5],1]}static arrContains(E,d){for(const C of d)if(C==E)return!0;return!1}static getBottomLine(E,d,C){let g=C[d],_=[[F.CONST.STEP_SIZE,F.CONST.OVERLAP],[1,F.CONST.OVERLAP],[1,.3]];for(const x of _){let w=x[0],k=x[1],M=g.transform[5]+g.height,B=9999,Q=3*w;if(!h.isLastLineOfPage(d,C)){let Z=h.isSameLine(C[d+1],g);h.isLineIntersec(C[d+1],g)?(M=C[d+1].transform[5],B=C[d+1].transform[5]+C[d+1].height,C[d+1].transform[4]>C[d].transform[4]+2*F.CONST.MARGIN_LEFT?B+=2*F.CONST.MARGIN_LEFT:B-=C[d+1].height*k,Q=C[d].transform[5]+C[d].height/2-M):(B=Z&&d+2<C.length?C[d+2].transform[5]+C[d+2].height-C[d+2].height*k:C[d+1].transform[5]+C[d+1].height-C[d+1].height*k,Z&&h.isLastLineOfPage(d+1,C)&&(B=9999));let V=C[d+1].top;if(V&&M>=V&&!Z)return[V,0]}if(!F.CONST.ENABLE_IMAGE_PROCESS)return[M,0];let D=!1;for(;M<B;){if(!h.hasColor(E,g.transform[4],M,g.width,w))return[M,0];D||(D=!0,M-=Q),M+=w}}return[g.transform[5]+g.height,1]}static hasColor(E,d,C,g,_){let x=Math.round(d),w=Math.round(x+g),k=Math.round(C),M=Math.round(k+_);for(let V=k;V<M;V++)for(let oe=x;oe<w;oe++){let K=4*(V*E.width+oe);if((E.data[K]+E.data[K+1]+E.data[K+2])/3<150)return!0}return!1}static calIndexPos2(E,d,C,g,_){let x=[],w=0,k=0,M=0,B=0,Q=0,D=0,Z=!0,V=!0;for(const ne of E){V=this.isObjIntersec(E[0],ne),B=ne.transform[4],_||(w+=B-M>F.CONST.SPLIT_MARGIN&&""!=ne.str.trim()||Q!=ne.transform[5]?1:0),Z=B+2*F.CONST.MARGIN_LEFT>=M;let de=ne.transform[4]+ne.width;if(V&&(M=de),de>k&&V&&(k=de),w+=ne.str.length,w>g&&Z&&V){ne.transform.forEach(Ge=>{x.push(Ge)}),x[3]=ne.height,x[2]=D,x[1]=ne.str.length-w+g;let fe=ne.str.substr(0,ne.str.length-w+g+1);if(fe.length==ne.str.length){x[4]=x[4]+ne.width;break}var K=d[ne.fontName].fontFamily,ee=Math.hypot(ne.transform[2],ne.transform[3]);C.font=`${ee}px ${K}`;let Le=C.measureText(fe).width,xe=C.measureText(ne.str).width;x[4]=x[4]+ne.width*Le/xe;break}V&&(Q=ne.transform[5]),D++}return 0==x.length&&(x=[0,E[E.length-1].length-1,E.length-1,E[0].height,k,E[0].transform[5]]),x}static calIndexPos(E,d,C,g,_){let x=[],w=0,k=0,M=0,B=0,Q=0,D=0,Z=!0,V=!0,oe="";for(const de of E){V=this.isObjIntersec(E[0],de),B=de.transform[4],_||(w+=B-M>F.CONST.SPLIT_MARGIN&&""!=de.str.trim()||Q!=de.transform[5]?1:0,oe+=(B-M>F.CONST.SPLIT_MARGIN&&""!=de.str.trim()||Q!=de.transform[5]?"|":"")+de.str),Z=B+2*F.CONST.MARGIN_LEFT>=M;let fe=de.transform[4]+de.width;if(V&&(M=fe),fe>k&&V&&(k=fe),w+=de.str.length,w>g&&Z&&V){let Le=de.str.substr(0,de.str.length-w+g);var ee=d[de.fontName].fontFamily,ne=Math.hypot(de.transform[2],de.transform[3]);C.font=`${ne}px ${ee}`;let xe=C.measureText(Le).width,Ge=C.measureText(de.str).width;de.transform.forEach(nt=>{x.push(nt)}),x[4]=x[4]+de.width*xe/Ge,x[3]=de.height,x[2]=D,x[1]=de.str.length-w+g;break}V&&(Q=de.transform[5]),D++}return 0==x.length&&(x=[0,E[E.length-1].length-1,E.length-1,E[0].height,k,E[0].transform[5]]),x}static getTextBottom(E,d,C,g){let _=Math.atan2(E[1],E[0]);d.vertical&&(_+=Math.PI/2);const x=Math.hypot(E[2],E[3]),w=x*h.getAscent(d.fontFamily,C,g);let k=E[5],M=0;M=0===_?w:w*Math.cos(_);let B=0*M;return k=E[5]-M-B,[k,x+B]}static getAscent(E,d,C){const x=C.get(E);if(x)return x;d.save(),d.font=`30px ${E}`;const w=d.measureText("");let k=w.fontBoundingBoxAscent,M=Math.abs(w.fontBoundingBoxDescent);if(k){d.restore();const Q=k/(k+M);return C.set(E,Q),Q}d.strokeStyle="red",d.clearRect(0,0,30,30),d.strokeText("g",0,0);let B=d.getImageData(0,0,30,30).data;M=0;for(let Q=B.length-1-3;Q>=0;Q-=4)if(B[Q]>0){M=Math.ceil(Q/4/30);break}d.clearRect(0,0,30,30),d.strokeText("A",0,30),B=d.getImageData(0,0,30,30).data,k=0;for(let Q=0,D=B.length;Q<D;Q+=4)if(B[Q]>0){k=30-Math.floor(Q/4/30);break}if(d.restore(),k){const Q=k/(k+M);return C.set(E,Q),Q}return C.set(E,.8),.8}static getMaxLineRight(E,d){let C=0;for(const g of d)if(g.pageIndex==E||-1==E){let _=g.transform[4]+g.width;_>C&&(C=_)}return C}static getMinLineLeft(E,d){let C=99999;for(const g of d)if(g.pageIndex==E||-1==E){let _=g.transform[4];_<C&&(C=_)}return C}}H.CanvasUtil=h},85492:(Ne,H,I)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.PdfUtils=void 0;const F=I(58343),h=I(44103);class U{constructor(){let d=document.createElement("canvas");this.tempCanvas=d.getContext("2d"),this.ascentCache=new Map,this.imageCache=[]}loadPdf(d,C){let _={url:URL.createObjectURL(d),cMapPacked:!0,cMapUrl:"/assets/js/pdf-js-v2/cmaps/",disableAutoFetch:!1,disableFontFace:!1,disableRange:!1,disableStream:!1,docBaseUrl:"",enableXfa:!0,fontExtraProperties:!1,isEvalSupported:!0,maxImageSize:-1,pdfBug:!1,standardFontDataUrl:"/assets/js/pdf-js-v2/standard_fonts/",verbosity:1};const x=pdfjsLib.getDocument(_);let w=[],k=this;x.promise.then(function(M){k.optionalContentConfigPromise=M.getOptionalContentConfig();let B=M._pdfInfo.numPages;for(let Q=1;Q<=B;Q++)M.getPage(Q).then(D=>{w.push(D),w.length==B&&(w=w.sort((Z,V)=>Z._pageIndex>V._pageIndex?1:-1),C(w))})},function(M){console.error(M)})}getImages(d,C){let g=[];if("function"!=typeof d.objs.getAll)return g;let _=d.objs.getAll(),x=Object.keys(_);for(const w of x)_[w].data.pageIndex=C,g.push(_[w].data);return g}isImageObj(d){return-999==d.transform[0]&&"img"==d.str}getLines(d,C,g,_){let x=_.scale,w=d.items.length;for(let D=0;D<w;D++){let Z=d.items[D];this.isImageObj(Z)||(Z.transform=U.transform(_.transform,Z.transform),Z.width=Z.width*x),Z.transform[4]+Z.width>g.canvas.width&&(Z.width=g.canvas.width-Z.transform[4]-20);let V=this.isImageObj(Z)?[Z.transform[5],Z.height]:h.CanvasUtil.getTextBottom(Z.transform,d.styles[Z.fontName],this.tempCanvas,this.ascentCache);Z.height=V[1];let oe=Math.ceil(V[0]);Z.transform[5]=oe}d.items.sort((D,Z)=>1e6*Math.floor(D.transform[5])-D.transform[4]<1e6*Math.floor(Z.transform[5])-Z.transform[4]?-1:1);let B,k=[],M=0;this.imageCache[C]?B=this.imageCache[C]:(B=g.getImageData(0,0,g.canvas.width,g.canvas.height),this.imageCache[C]=B);let Q={strLine:"",transform:[],textObjs:[],pageIndex:C,width:0,height:0,txtLength:0};for(let D=0;D<w;D++){let Z=d.items[D];if(this.isImageObj(Z))for(let oe=0;oe<w;oe++){let K=d.items[oe];if(!this.isImageObj(K)&&D!=oe&&h.CanvasUtil.isObjIntersec(Z,K)&&""!=K.str.trim()&&!/^[\sA-K\.\|]+$/g.test(K.str)){Z.str="";break}}if(h.CanvasUtil.arrContains(Z.str.trim(),F.CONST.SKIP_CHAR))continue;let V=Math.floor(Z.transform[5]+Z.height);0!=M?M-V>=-F.CONST.LINE_MAGIN?this.addTxtToLine(Q,Z):0!=Q.textObjs.length&&(k.push(Q),Q=this.newLine(Z,C),M=Math.floor(Q.transform[5]+Q.height)):(Q=this.newLine(Z,C),M=Math.floor(Q.transform[5]+Q.height))}k.push(Q);for(const D of k)this.calculateSize(D);this.findAndMergeAnsQuestBlock(k,"ans"),this.findAndMergeAnsQuestBlock(k,"quest"),this.findAndMergeBlock(k),this.mergeIntersecLine(k),this.mergeSmallLine(k,B);for(const D of k)this.calculateSize(D);return k}mergeIntersecLine(d){let C=0;for(;C<d.length;){let g=d[C];C++,C<d.length&&h.CanvasUtil.isLineVIntersec(g,d[C])&&(this.mergeLine(g,d[C]),d.splice(C,1),C--)}}findAndSplitQuestAnsLine(d,C,g){let _=0,x=[],w=F.CONST.BREAK_LINE_PATTERN.join("|");for(const k of d){k.top=void 0,k.bottom=void 0;let M=k.strLine.replace(/\|/g,"").trim().match(w);if(null!=M&&M.length>0){let B=/[\s\|\.]+[B\u0412][\s\|]*\./g,Q=k.strLine.trim().toUpperCase().match(B);if(null!=Q&&Q.length>0){let D=M[0].toUpperCase().indexOf("A");x.push({lineIndex:_,strIndex:D})}}_++}for(let k=x.length-1;k>=0;k--){let M=x[k].lineIndex;this.splitLine(M,C[d[M].pageIndex],g[d[M].pageIndex],x[k].strIndex,d)}}mergeSmallLine(d,C){let g=0,_=1.2*F.CONST.LINE_SMALL_HEIGHT;for(;g<d.length;){let x=d[g];if(!x||!this.isSmallLine(x)){g++;continue}g-1>=0&&!d[g-1].bottom&&(d[g-1].bottom=h.CanvasUtil.getBottomLine(C,g-1,d)[0]),g+1<d.length&&!d[g+1].top&&(d[g+1].top=h.CanvasUtil.getTopLine(C,g+1,d)[0]);let w=g-1<0?-9999:this.getLineTop(x)-this.getLineBot(d[g-1]),k=g+1>=d.length?-9999:this.getLineTop(d[g+1])-this.getLineBot(x),M=g-1>=0&&d[g-1].transform[4]<=x.transform[4]&&x.transform[4]<=d[g-1].transform[4]+d[g-1].width,B=g+1<d.length&&d[g+1].transform[4]<=x.transform[4]&&x.transform[4]<=d[g+1].transform[4]+d[g+1].width;if(0==g&&k<=_&&B){this.mergeLine(d[g+1],x),d.splice(g,1),g--;continue}if(g==d.length-1&&w<=_&&M){this.mergeLine(d[g-1],x),d.splice(g,1),g--;continue}let Q=-1;w>k&&B&&k<=_?Q=g+1:w<=k&&M&&w<=_?Q=g-1:w<=k&&B&&k<=_?Q=g+1:w>k&&M&&w<=_&&(Q=g-1),Q>=0?(this.mergeLine(d[Q],x),d.splice(g,1),g--):g++}}isSmallLine(d){return d.height<F.CONST.LINE_SMALL_HEIGHT}mergeLine(d,C){for(const g of C.textObjs)this.addTxtToLine(d,g)}findAndMergeAnsQuestBlock(d,C){let _=0;for(;_<d.length;){if("ans"==C&&this.isAnsLine(d[_])||"quest"==C&&this.isQuestLine(d[_])){let w=_,k=-1,M=1,B=[];for(;M<=10;){if(w=_+k*M,w<0){k=1,M=1;continue}if(w>=d.length)break;let Q=this.isAnsLine(d[w]),D=Q||this.isQuestLine(d[w]),Z="ans"==C&&Q&&h.CanvasUtil.isSameLine(d[_],d[w]),V=!D&&h.CanvasUtil.isLineIntersec(d[_],d[w])&&d[w].transform[4]>d[_].transform[4];if((Z||V)&&B.push(w),M++,D&&1==k)break;(M>10||D)&&-1==k&&(k=1,M=1)}B.sort((Q,D)=>Q<D?1:-1);for(const Q of B)for(const D of d[Q].textObjs)this.addTxtToLine(d[_],D);for(const Q of B)d.splice(Q,1),Q<_&&_--}_++}}findAndMergeBlock(d){let C=0;for(;C<d.length;){if(this.isAnsLine(d[C])||this.isQuestLine(d[C])){C++;continue}let _=C+1;for(;_<d.length&&d[C].pageIndex==d[_].pageIndex;){let x=this.isAnsLine(d[_])||this.isQuestLine(d[_]);if(h.CanvasUtil.isLineIntersec(d[C],d[_])&&!x||h.CanvasUtil.isSameLine(d[C],d[_])){for(const w of d[_].textObjs)this.addTxtToLine(d[C],w);d.splice(_,1),_=C}_++}C++}}isAnsLine(d){let g=d.strLine.trim().match(/[\s\|\.]+[AB\u0412CDEFGHIJK]\s*\./g);return null!=g&&g.length>0}isQuestLine(d){let C=F.CONST.QUESTION_PATTERN.join("|"),g=d.strLine.replace(/\|/g,"").toLowerCase().trim().match(C);return null!=g&&g.length>0}encodeLines(d,C){let g="",_=0;for(const x of C){if(x.height<F.CONST.LINE_SMALL_HEIGHT){_-1>=0&&!C[_-1].bottom&&(C[_-1].bottom=h.CanvasUtil.getBottomLine(d,_-1,C)[0]),_+1<C.length&&!C[_+1].top&&(C[_+1].top=h.CanvasUtil.getTopLine(d,_+1,C)[0]);let w=_-1<0?-9999:this.getLineTop(x)-this.getLineBot(C[_-1]),k=_+1>=C.length?-9999:this.getLineTop(C[_+1])-this.getLineBot(x),M=_-1>=0&&C[_-1].transform[4]<=x.transform[4]&&x.transform[4]+x.width<=C[_-1].transform[4]+C[_-1].width,B=_+1<C.length&&C[_+1].transform[4]<=x.transform[4]&&x.transform[4]+x.width<=C[_+1].transform[4]+C[_+1].width,Q=1.2*F.CONST.LINE_SMALL_HEIGHT;Math.abs(w)>=Q&&Math.abs(k)>=Q?g+="L":g+=-9999==w?"3":-9999==k?"4":w>k&&B?"2":w<=k&&M?"1":w<=k&&B?"2":w>k&&M?"1":"L"}else g+="L";_++}return g}getLineTop(d){return d.top?d.top:d.transform[5]}getLineBot(d){return d.bottom?d.bottom:d.transform[5]+d.height}splitLine(d,C,g,_,x){let w=x[d],k=h.CanvasUtil.calIndexPos(w.textObjs,C,g,_,!0),M=this.newLine(w.textObjs[0],w.pageIndex),B=k[2],Q=k[1],D=w.textObjs[B],Z=D.transform,V={str:D.str.substr(0,Q),width:k[4]-Z[4],height:D.height,fontName:D.fontName,transform:[Z[0],Z[1],Z[2],Z[3],Z[4],Z[5]]},oe={str:D.str.substr(Q),width:D.width-V.width,height:D.height,fontName:D.fontName,transform:[Z[0],Z[1],Z[2],Z[3],k[4],Z[5]]},K=w.textObjs;w.textObjs=[],M.textObjs=[];for(let ee=0;ee<K.length;ee++)ee<B?this.addTxtToLine(w,K[ee]):ee>B?this.addTxtToLine(M,K[ee]):(this.addTxtToLine(w,V),this.addTxtToLine(M,oe));return this.calculateSize(w),this.calculateSize(M),d==x.length-1?x.push(M):x.splice(d+1,0,M),M}findAndMergeSmallLine(d,C,g){let _=0,x=d.matchAll(g),w=[];for(;;){let k=x.next();if(k.done)break;let M=k.value[0],B=k.value.index,Q=0,D=[];for(let Z=0;Z<M.length;Z++)"L"==M[Z]?Q=B+Z:D.push(B+Z);for(const Z of D){for(const V of C[Z].textObjs)this.addTxtToLine(C[Q],V);C[Q].top=void 0,C[Q].bottom=void 0,w.push(Z)}_++}w.sort((k,M)=>k<M?1:-1);for(const k of w)C.splice(k,1);return _}newLine(d,C){let g={strLine:"",transform:[],textObjs:[],pageIndex:C,width:0,height:0,txtLength:0};return g.transform[4]=d.transform[4],g.transform[5]=d.transform[5],g.height=d.height,g.width=d.width,g.txtLength=d.str.length,g.textObjs.push(d),g}addTxtToLine(d,C){C.transform[4]<d.transform[4]&&(d.transform[4]=C.transform[4]),C.transform[5]<d.transform[5]&&(d.transform[5]=C.transform[5]),C.transform[5]+C.height>d.transform[5]+d.height&&(d.height=C.transform[5]+C.height-d.transform[5]),C.transform[4]+C.width>d.transform[4]+d.width&&(d.width=C.transform[4]+C.width-d.transform[4]),d.txtLength+=C.str.length,d.textObjs.push(C);let g=d.transform[4]+d.width,_=d.height;for(const x of d.textObjs)x.transform[4]+x.width>g&&(g=x.transform[4]+x.width),x.transform[5]+x.height>d.transform[5]+_&&(_=x.transform[5]+x.height-d.transform[5]);d.width=g-d.transform[4],d.height=_}static transform(d,C){return pdfjsLib.Util.transform(d,C)}render(d,C,g,_){let x=this,w=d.length;for(let k=0;k<w;k++){let M=document.createElement("div");M.className="pdf-page",M.id="page-"+k,document.getElementById(C)?.appendChild(M),x.renderPage(d[k],g,_)}}calculateSize(d){if(0==d.textObjs.length)return;d.textObjs.sort((D,Z)=>1e6*Math.floor(D.transform[4])+D.transform[5]>1e6*Math.floor(Z.transform[4])+Z.transform[5]?1:-1),d.strLine="";let C=0,g=0,_=0,x=0,w=9999,k=0,M=9999;for(const D of d.textObjs){let Z=h.CanvasUtil.isObjIntersec(d.textObjs[0],D);_=D.transform[4];let V=_-g>F.CONST.SPLIT_MARGIN&&""!=D.str.trim()||x!=D.transform[5]?"|":"";d.strLine+=V+D.str,_<M&&(M=_);let oe=D.transform[4]+D.width;Z&&(g=oe),oe>C&&Z&&(C=oe),Z&&(x=D.transform[5]),D.transform[5]<w&&(w=D.transform[5]),D.transform[5]+D.height>k&&(k=D.transform[5]+D.height)}d.transform[4]=M,d.transform[5]=w,d.width=C-M,d.height=k-w,d.transform[0]=w,d.transform[1]=k;let B=F.CONST.TVCN_CHAR,Q=d.strLine;for(const D of B)Q=Q.replace(new RegExp(D[0],"g"),D[1]);d.strLine=Q}renderPage(d,C,g){let _=d._pageIndex,x=d.getViewport({scale:C}),w=.8*x.width,k=document.createElement("canvas"),M=document.getElementById("page-"+_);M?.appendChild(k),k.id="canvas"+_;let B=k.getContext("2d",{alpha:!1});k.height=x.height,k.width=x.width,k.style.height=x.height*w/x.width+"px",k.style.width=w+"px",M&&(M.style.width=k.style.width,M.style.height=k.style.height);const D={canvasContext:B,transform:[1,0,0,1,0,0],viewport:x,annotationMode:pdfjsLib.AnnotationMode.ENABLE_FORMS,optionalContentConfigPromise:this.optionalContentConfigPromise,annotationCanvasMap:new Map,pageColors:{background:"Canvas",foreground:"CanvasText"}};d.render(D).promise.then(function(){g&&g(B,d._pageIndex,x)})}}H.PdfUtils=U},5181:(Ne,H,I)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.Process=void 0;const F=I(58343),h=I(95970),U=I(31617),E=I(44103),d=I(85492);H.Process=class C{constructor(_){this.config=_,F.CONST.load(_);let x=JSON.parse(_);F.CONST.LINE_SMALL_HEIGHT=x.LINE_SMALL_HEIGHT*F.CONST.RENDER_SCALE,F.CONST.SPLIT_MARGIN=x.SPLIT_MARGIN*F.CONST.RENDER_SCALE,F.CONST.INTERSEC_MARGIN=x.INTERSEC_MARGIN*F.CONST.RENDER_SCALE,F.CONST.LINE_MAGIN=x.LINE_MAGIN*F.CONST.RENDER_SCALE,F.CONST.MARGIN_LEFT=x.MARGIN_LEFT*F.CONST.RENDER_SCALE,F.CONST.FOOTER_PATTERN=x.FOOTER_PATTERN??["(trang\\s*\\d+)","(Page\\s*\\d+)","(Trang\\s*\\d+)","(TRANG\\s*\\d+)","(^\\d{1,4}$)"],F.CONST.HELP_ANS_PATTERN=x.HELP_ANS_PATTERN??["([\\s\\.]*Ch\u1ecdn\\s*([ABCDEFGH]))"]}setUpdateStatusCallback(_){this.updateStatusCallback=_}setOncompleteCallback(_){this.onCompleteCallback=_}getOverview(_){let x=_.filter(Z=>Z.isGroup).length,w=_.filter(Z=>!Z.isGroup).length,k=_.filter(Z=>Z.answers.length>0).length,M=_.filter(Z=>!Z.isGroup&&0==Z.answers.length).length,B=_.filter(Z=>Z.answers.length>4),Q=B.length+"|"+B.map(Z=>Z.num).join(",");return B=_.filter(Z=>Z.answers.length<4&&Z.answers.length>0),{groupNum:x+"",questNum:w+"",tnNum:k+"",tlNum:M+"",tnGt4:Q,tnLt4:B.length+"|"+B.map(Z=>Z.num).join(",")}}parsePdf(_){let x=new d.PdfUtils;x.loadPdf(_,w=>{const k=w.length;let M=[],B=[],Q=document.createElement("div");Q.id="hiddenWrapper",Q.style.width="1px",Q.style.height="1px",Q.style.overflow="hidden",Q.style.opacity="0",Q.style.zIndex="-9999",Q.style.position="fixed",Q.style.top="0",Q.style.left="0",document.body.appendChild(Q);let D=document.createElement("div"),Z="canvasWrapper";D.id=Z,Q.appendChild(D);const V=(new Date).getTime();let oe=[];x.render(w,Z,F.CONST.RENDER_SCALE,(K,ee,ne)=>{if(null!=K&&(M[ee]=K,B[ee]=ne),oe.push(1),this.updateStatusCallback&&this.updateStatusCallback(`Rendering: ${oe.length}/${k}`),oe.length==k){const de=(new Date).getTime();this.updateStatusCallback&&this.updateStatusCallback("Render done: "+(de-V)/1e3+" secs"),this.startAnalyze(M,B,w)}})})}imgToTextObj(_,x){return{str:"img",fontName:x,width:_.paintWidth,height:_.paintHeight,transform:[-999,0,0,0,-_.left,-_.top-_.paintHeight]}}startAnalyze(_,x,w){const k=w.length;let M=[],B=[],Q=[],D=new d.PdfUtils;const Z=(new Date).getTime();for(let V=0;V<k;V++){const oe=V;let K=D.getImages(w[V],oe);w[V].getTextContent().then(ee=>{for(const de of K)ee.items.push(this.imgToTextObj(de,ee.items.length>0?ee.items[0].fontName:""));let ne=D.getLines(ee,oe,_[oe],x[oe]);if(B=B.concat(ne),Q[oe]=ee.styles,M.push(1),M.length==k){B.sort((Ct,mt)=>1e7*Ct.pageIndex+(Ct.transform.length>0?Ct.transform[5]:0)-(1e7*mt.pageIndex+(mt.transform.length>0?mt.transform[5]:0))),D.findAndSplitQuestAnsLine(B,Q,_);let de=new U.FooterParser,fe=0;for(const Ct of B){if((B.length-1==fe||fe+1<B.length-1&&Ct.pageIndex!=B[fe+1].pageIndex)&&(Ct.isLastLine=!0),Ct.isLastLine&&de.parse(Ct.strLine).length>0){Ct.isFooter=!0;let mt=E.CanvasUtil.getBottomLine(D.imageCache[B[fe-1].pageIndex],fe-1,B);Ct.top=mt[0]+F.CONST.MARGIN_LEFT}fe++}let Le=new h.ExamParser(this.config),xe=B.map(Ct=>Ct.strLine),Ge=Le.parse(xe),nt=this.getQuestionInfo(Ge,B,Q,_,D.imageCache);const ht=(new Date).getTime();this.updateStatusCallback&&this.updateStatusCallback("Analyze done: "+(ht-Z)/1e3+" secs"),this.showOnCanvas(nt,_,F.CONST.DRAW_RESULT),this.onCompleteCallback&&this.onCompleteCallback(nt,_)}})}}getPosInfo(_,x,w,k,M,B,Q,D,Z){if(!w.top){let K=E.CanvasUtil.getTopLine(M,B,k);w.top=K[0],w.isIntersec=K[1]}if(!w.bottom){let K=E.CanvasUtil.getBottomLine(M,B,k);w.bottom=K[0],w.isIntersec=K[1]}return{str:"",pageIndex:w.pageIndex,lineIndex:B,transform:"a"==_?E.CanvasUtil.calIndexPos2(w.textObjs,D,Q,Z?Z-1:0):w.transform,startLeft:x>=0?E.CanvasUtil.calIndexPos2(w.textObjs,D,Q,x-1):void 0,type:_}}getQuestionInfo(_,x,w,k,M){let B=[];for(const Q of _){let D=Q.parts[0].lineIdx,Z=x[D],V=this.getPosInfo("q",Q.parts[0].s,Z,x,M[Z.pageIndex],D,k[Z.pageIndex],w[Z.pageIndex]),oe=null;if(D=Q.parts[Q.parts.length-1].lineIdx,Q.answers.length>0){let K=Q.answers[Q.answers.length-1];K.parts.length>0&&(D=K.parts[K.parts.length-1].lineIdx)}if(D+=1,D<x.length&&(Z=x[D],oe=this.getPosInfo("q",-1,Z,x,M[Z.pageIndex],D,k[Z.pageIndex],w[Z.pageIndex])),Q.isGroup)B.push({num:Q.label,answers:[],remove:this.getQuestRemoveBox(V,x),positions:this.getQuestBoxes(V,x,oe,k[Z.pageIndex].canvas.height),isGroup:!0,text:Q.parts.map(K=>x[K.lineIdx])});else{let K={num:Q.label,answers:[],remove:this.getQuestRemoveBox(V,x),positions:this.getQuestBoxes(V,x,oe,k[Z.pageIndex].canvas.height),group:Q.group,strAns:Q.strAns,isFixAns:Q.isFixAns,text:Q.parts.map(ne=>x[ne.lineIdx])};B.push(K);let ee=0;for(const ne of Q.answers){let de={pageIndex:K.remove.pageIndex,top:K.remove.top-1,left:K.remove.left-1,width:1,heigh:1};if(ne.parts.length>0){if(D=ne.parts[0].lineIdx,Z=x[D],1==Z.isIntersec&&(K.isFixAns=!0),ne.parts.length>1&&(K.isFixAns=!0),V=this.getPosInfo("a",ne.parts[0].s,Z,x,M[Z.pageIndex],D,k[Z.pageIndex],w[Z.pageIndex],ne.parts[0].b),oe=null,ee<Q.answers.length-1){let xe=Q.answers[ee+1];D=xe.parts[0].lineIdx,Z=x[D],oe=this.getPosInfo("a",xe.parts[0].s,Z,x,M[Z.pageIndex],D,k[Z.pageIndex],w[Z.pageIndex],xe.parts[0].b)}else D=ne.parts[ne.parts.length-1].lineIdx+1,D<x.length-1&&(Z=x[D],oe=this.getPosInfo("q",-1,Z,x,M[Z.pageIndex],D,k[Z.pageIndex],w[Z.pageIndex]));let fe=this.getAnsRemoveBox(V,x),Le={label:ne.label,remove:fe,isCorrect:ne.isCorrect,positions:ne.isInline?[fe]:this.getAnsBoxes(V,x,oe,k[Z.pageIndex].canvas.height)};K.answers.push(Le)}else K.answers.push({label:ne.label,remove:de,isCorrect:ne.isCorrect,positions:[de]});ee++}Q.help&&Q.help.length>0&&(D=Q.help[0].lineIdx,Z=x[D],V=this.getPosInfo("q",Q.help[0].s,Z,x,M[Z.pageIndex],D,k[Z.pageIndex],w[Z.pageIndex]),oe=null,D=Q.help[Q.help.length-1].lineIdx+1,D<x.length&&(Z=x[D],oe=this.getPosInfo("q",-1,Z,x,M[Z.pageIndex],D,k[Z.pageIndex],w[Z.pageIndex])),K.help={num:Q.label,remove:this.getQuestRemoveBox(V,x),positions:this.getQuestBoxes(V,x,oe,k[Z.pageIndex].canvas.height),text:Q.help.map(ne=>x[ne.lineIdx])})}}return B}showHidden(){let _=document.getElementById("hiddenWrapper");_&&(_.style.opacity="1",_.style.width="",_.style.height="",_.style.overflow="",_.style.position="")}showOnCanvas(_,x,w){const k=(new Date).getTime(),M=new Map([["A","rgba(18, 0, 255, 0.4)"],["B","rgba(0, 158, 34, 0.4)"],["C","rgba(50, 50, 50, 0.4)"],["D","rgba(132, 0, 137, 0.4)"],["E","rgba(132, 0, 137, 0.4)"],["F","rgba(132, 0, 137, 0.4)"],["G","rgba(132, 0, 137, 0.4)"],["H","rgba(132, 0, 137, 0.4)"]]);if(w.indexOf("quest")>=0)for(const Q of _){for(const D of Q.positions)E.CanvasUtil.drawBox(x[D.pageIndex],Q.isGroup?"black":"red",D);E.CanvasUtil.drawBox(x[Q.remove.pageIndex],"yellow",Q.remove);for(const D of Q.answers){for(const Z of D.positions)E.CanvasUtil.drawBox(x[Z.pageIndex],M.get(D.label)+"",Z,!0);E.CanvasUtil.drawBox(x[D.remove.pageIndex],"yellow",D.remove),D.isCorrect&&E.CanvasUtil.drawPoint(x[D.positions[0].pageIndex],"green",D.positions[0])}if(Q.help){for(const D of Q.help.positions)E.CanvasUtil.drawBox(x[D.pageIndex],"orange",D);Q.help.remove&&E.CanvasUtil.drawBox(x[Q.help.remove.pageIndex],"yellow",Q.help.remove)}}const B=(new Date).getTime();this.updateStatusCallback&&this.updateStatusCallback("Draw done: "+(B-k)/1e3+" secs")}getAnsRemoveBox(_,x){let w=_.startLeft?_.startLeft[5]-2:x[_.lineIndex].top,k=_.transform[4]-F.CONST.MARGIN_LEFT,M=_.startLeft?_.startLeft[5]+_.startLeft[3]:x[_.lineIndex].bottom;return{pageIndex:_.pageIndex,top:w||20,left:k,heigh:M&&w?M-w:0,width:(_.startLeft?_.startLeft[4]:0)-k}}getAnsBoxes(_,x,w,k){const M=k,B=F.CONST.MARGIN_LEFT;let Q=[],D=x[_.lineIndex].top,Z=x[_.lineIndex].bottom;if(!D||!Z)return[];let oe=Z,K=_.transform[4]-B,ee=w&&_.lineIndex==w.lineIndex?w.transform[4]-B:x[_.lineIndex].transform[4]+x[_.lineIndex].width+B;if(Q.push({pageIndex:_.pageIndex,top:D,left:K,width:ee-K,heigh:Z-D}),w&&w.lineIndex==_.lineIndex)return Q;D=Z,Z=M,ee=0;let ne=_.pageIndex,de=0;for(de=_.lineIndex+1;de<x.length;de++){if(Z==M&&E.CanvasUtil.isLastLineOfPage(de,x)){let Le=x[de].isFooter?x[de-1]:x[de];Z=Le.transform[5]+Le.height+20}let fe=x[de].top;if(de>_.lineIndex+1&&!x[de-1].isFooter){let Le=x[de-1].transform[4]+x[de-1].width+B;Le>ee&&(ee=Le);let xe=x[de-1].transform[4]-B;xe<K&&(K=xe)}if(x[de].isFooter&&fe)de-_.lineIndex>1?(Z=x[de-1].transform[5]+x[de-1].height+F.CONST.LINE_MAGIN,K=x[_.lineIndex+1].transform[4]-B):Z=x[_.lineIndex].bottom;else if(x[de].pageIndex>ne&&(Z&&Z-D>F.CONST.LINE_SMALL_HEIGHT&&de-_.lineIndex>1&&Q.push({pageIndex:ne,top:D,left:K,width:ee-K,heigh:Z-D}),D=20,oe=D),ne=x[de].pageIndex,fe){Z=fe;break}}if(de>=x.length&&(de=x.length-1),de-_.lineIndex>1&&x[de-1].transform[5]>oe&&!E.CanvasUtil.isFirstLineOfPage(de,x)){let fe=20==D?x[de].transform[4]:x[_.lineIndex+1].transform[4];if(20!=D)for(let Le=_.lineIndex+2;Le<=de;Le++)x[Le].transform[4]<fe&&(fe=x[Le].transform[4]);Z&&Z-D>F.CONST.LINE_SMALL_HEIGHT&&Q.push({pageIndex:ne,top:D,left:fe,width:ee-fe,heigh:Z-D})}w&&"a"==w.type&&w.transform[4]>x[w.lineIndex].transform[4]+10*F.CONST.RENDER_SCALE&&(ee=w.transform[4]-B,D=x[w.lineIndex].top,K=x[w.lineIndex].transform[4]-B,Z=x[w.lineIndex].bottom,D&&Z&&Z-D>F.CONST.LINE_SMALL_HEIGHT&&Q.push({pageIndex:ne,top:D,left:K,width:ee-K,heigh:Z-D}));for(let fe=Q.length-1;fe>=1;fe--)Q[fe].left-(Q[fe-1].left+Q[fe-1].width)>=20*F.CONST.RENDER_SCALE&&Q.splice(fe,1);return Q}getQuestRemoveBox(_,x){let w=_.startLeft?_.startLeft[5]:x[_.lineIndex].top,k=_.transform[4]-F.CONST.MARGIN_LEFT,M=_.startLeft?_.startLeft[5]+_.startLeft[3]:x[_.lineIndex].bottom;return{pageIndex:_.pageIndex,top:w||20,left:k,heigh:M&&w?M-w:0,width:(_.startLeft?_.startLeft[4]:0)-k}}getQuestBoxes(_,x,w,k){let M=k;for(let de=_.lineIndex;de<x.length;de++)if(E.CanvasUtil.isLastLineOfPage(de,x)){let fe=x[de].isFooter?x[de-1]:x[de];M=fe.transform[5]+fe.height+20;break}let B=[],Q=_.pageIndex,D=w?w.lineIndex:x.length-1,Z=x[_.lineIndex].transform[4]-F.CONST.MARGIN_LEFT,V=x[_.lineIndex].top;if(!V)return[];let oe=F.CONST.CROP_FULL_WIDTH?E.CanvasUtil.getMaxLineRight(-1,x)+2*F.CONST.MARGIN_LEFT:x[_.lineIndex].transform[4]+x[_.lineIndex].width+2*F.CONST.MARGIN_LEFT,K=M,ee=Q,ne=_.lineIndex+1;for(;ne<=D;ne++){let de=x[ne].top;if(ne==x.length-1&&!w&&(de=x[ne].bottom),!F.CONST.CROP_FULL_WIDTH){let Le=x[ne-1].transform[4]+x[ne-1].width+2*F.CONST.MARGIN_LEFT;Le>oe&&(oe=Le)}let fe=x[ne-1].transform[4]-F.CONST.MARGIN_LEFT;fe<Z&&(Z=fe),x[ne].isFooter&&de?K=de:(x[ne].pageIndex>ee&&(x[ne-1].isFooter||(K=M),B.push({pageIndex:ee,top:V,left:Z,width:oe-Z,heigh:K-V}),V=20,Z=E.CanvasUtil.getMinLineLeft(x[ne].pageIndex,x)-F.CONST.MARGIN_LEFT),ee=x[ne].pageIndex,de&&(K=de))}if(ne-=1,!w&&E.CanvasUtil.isLastLineOfPage(ne,x)){let de=x[ne].isFooter?x[ne-1]:x[ne];K=de.transform[5]+de.height+20}return E.CanvasUtil.isFirstLineOfPage(ne,x)||B.push({pageIndex:ee,top:V,left:Z,width:oe-Z,heigh:K-V}),B}}},25873:(Ne,H,I)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.AnswerParser=void 0;const F=I(74047);class h extends F.Parser{constructor(E){super(),null!=E&&(this.isOn=E),this.TYPE=h.TYPE_NAME}do(E){let d=[],C="|"+E,g=/([\s|.\]]+\*?[A-Ha-h][\s|]*[.)])/g,_=this.matchPos(C,g,!1);0==_.length&&(_=this.matchPos(C,g,!0));let x=!1;0==_.length&&/^\|?\s*\*?[A-H\s|]+$/g.test(C)&&(x=!0,_=this.matchPos(C,/\*?[A-H]/g,!1));let w=!1;if(0==_.length&&(x=!0,w=!0,_=this.matchPos(C,/\[\*?[A-H]:[^\]]+\]/g,!1)),_.length>0)for(const k of _){let M=k.index+k.value.length-1,B=-9999,Q=k.value.replace(/\*?[\sA-Ha-h|]/g,"");w&&(B=k.index+k.value.length-2,k.index=k.index+1,M=k.index+1+(k.value.startsWith("[*")?1:0),Q=".");let D={type:this.TYPE,pos:[k.index-1,M,B]},Z=E.substring(D.pos[0]);if(!x&&!/^\|?\s*[*A-Himg\s|.]+$/g.test(C)&&Z.trim()==k.value.trim())continue;D.label=E.substring(D.pos[0],D.pos[0]+1),"*"==D.label&&(D.label=E.substring(D.pos[0]+1,D.pos[0]+2),D.extInfo="*"),D.olabel=Q,D.score=1,""==E.substring(0,D.pos[0]).replace(/[\s|]/g,"")&&(D.score=2);let oe=E.replace(/\[![a-z0-9_]+:[a-z0-9_]+\]/g,"").trim().toUpperCase().replace("*",""),K=new RegExp("^A\\s*"+D.olabel?.replace(/([.)])/,"\\$1"));!w&&"A"==D.label.toUpperCase()&&!K.test(oe)||d.push(D)}return d}matchPos(E,d,C){let g=C?E.toUpperCase():E,_=/[\s|.\]]/,x=g.matchAll(d),w=[];for(;;){let k=x.next();if(k.done)break;let M=0;for(let Z=k.value.index;Z<g.length&&_.test(g[Z]);Z++)M++;let B=k.value[0].substr(M,1),Q=/[[(]\s*(VD|TH|NB|VDC|EASY|MEDIUM|HARD|HARDEST)\s*[\d.]*\s*[)\]]\s*[:.]?/g,D=/\[![a-z]+:\$\s*\$\]/g;"A"==B&&!g.replace(/\|/g,"").replace(/\[!info:\d+\]/g,"").replace(Q,"").replace(D,"").trim().startsWith("A")||"*A"==B&&!g.replace(/\|/g,"").replace(/\[!info:\d+\]/g,"").replace(Q,"").replace(D,"").trim().startsWith("*A")||w.push({value:k.value[0].substr(M),index:k.value.index+M})}return w}}H.AnswerParser=h,h.TYPE_NAME="answer"},64984:(Ne,H,I)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.DapAnChiTietParser=void 0;const F=I(58343),h=I(96570),U=I(89094),E=I(74047);class d extends E.Parser{constructor(g){super(),this.TYPE=d.TYPE_NAME,null!=g&&(this.isOn=g)}do(g){let _=/^[0-9ABCDEFGH\u0110Sabcdefgh\u0111s]+$/i,x=this.cleanDS(g),w=this.cleanLine(x);if(_.test(w)&&w.length>=2)return[{type:d.TYPE_NAME,pos:[0,0]}];_=/^\[\*(!!\d+!!:)?(\s*\d+[^\]|]+\|?)+\*\]$/i;let k=this.cleanLineKeepTable(x.trim());return k=k.replaceAll("\\|",""),_.test(k)&&w.length>=2?[{type:d.TYPE_NAME,pos:[0,0]}]:[]}fixNoEnd(g){let _=[new U.HetParser,new h.DapAnParser],x=[],w=0,k=-1;for(let M of g){if(""==M.trim()){w++;continue}for(let D of _){let Z=D.parse(M);Z.length>0&&x.push(...Z)}let B=this.cleanDS(M);B=this.cleanLineKeepTable(B),B.trim().match(F.CONST.FIX_NO_END_PATTERN.join("|"))&&-1==k&&(k=w),w++}if(0==x.length&&k>=0)for(let M=k-1;M>=0;M--)if(!g[M].trim().startsWith("[*"))return g.splice(M+1,0,"H\u1ebft"),g}cleanLine(g,_=!1){if(!g)return"";let x=[/\|/g,_?/[\s:;![\]@*$()]+/g:/[\s.\-:,;![\]@*$()]+/g,/C\xe2u/g,/C\xc2U/g,/\u0110\xe1p\xe1n/g,/\u0110\xc1P\xc1N/g,/\u0110\/A/g,/Question/g,/Questions/g,/question/g,/questions/g,/ch\u1ecdn/g,/Ch\u1ecdn/g,"\u2013","\u2212"],w=g;w=this.cleanStyle(w);for(const k of x)w=w.replaceAll(k,"");return w=w.replaceAll("\\n",""),w}cleanLineKeepTable(g){let _=[/C\xe2u/g,/C\xc2U/g,/\u0110\xe1p\s*\xe1n/g,/\u0110\xc1P\s*\xc1N/g,/\u0110\/A/g,/Question/g,/Questions/g,/question/g,/questions/g,/ch\u1ecdn/g,/Ch\u1ecdn/g],x=["\u2013:-","\u2212:-"],w=g;w=w.replaceAll(/\[![!iucsbp]+:\$(([^$]|\$[^\]])+)\$\]/g,"$1"),w=w.replaceAll(/\[![!iucsbp]+:!!\]/g,"");for(const k of _)w=w.replaceAll(k,"");for(const k of x){let M=k.split(":");w=w.replaceAll(M[0],M[1])}return w=w.replaceAll("\\n","\n"),w}cleanDS(g){return g.replaceAll(/([a-d])[.),]\s*[\u0110\u0111]\xfang/g,"$1) \u0110").replaceAll(/([a-d])[.),]\s*[Ss]ai/g,"$1) S")}pivotTable(g){let _=g.length,x=g[0].length,w=[];for(let k=0;k<x;k++){let M=[];for(let B=0;B<_;B++)M.push(g[B][k]);w.push(M)}return w}isDSPat(g){let _=this.cleanDS(g),x=this.cleanLine(_);return/^([a-dA-D][D\u0110S\u0111sd])+$/.test(x)?x:""}getAnsMC(g,_){let x=[],w=[],k=[],M=new Map;for(const oe of _){let K=g[oe.lineIdx??0];K=this.cleanDS(K);let ee=this.cleanLine(K);if(/^\d+([a-dA-D][D\u0110S\u0111sd])+$/.test(ee)){let de=F.Utils.getNumberFromStr(ee),fe=ee.replace(de,"");M.set(+de,"!"+fe)}if(w.push(K),K.trim().startsWith("[*")){let de=K.replace(/\[\*(!!\d+!!:)?/g,"").replace("*]","").replace(/\s\|\s/g,"|").trim();de=de.replaceAll("\\|","__//__").replaceAll("|","_##_").replaceAll("__//__","|"),k.push(de.split("_##_"))}else x.push(K)}let B=new Map;if(k.length>0){let oe=0,K=0,ee=/^([a-dA-D][D\u0110S\u0111sd])*$/,ne=-1,de=!0,fe=0;for(let Le=0;Le<k.length;Le++){let xe=k[Le];for(let Ge=0;Ge<xe.length;Ge++){let ht=this.cleanLineKeepTable(xe[Ge].trim()).trim();if(""==ht||/^[\s.,:-]+$/.test(ht))continue;let Ct=ht.match(/^(\d+)\s*([.:,)-])/i);if(!Ct){de=!1,B.clear();break}fe=+Ct[1];let mt=ht.substring(ht.indexOf(Ct[2])+1).trim();ee.test(mt)&&""!=mt&&(mt="!"+mt),B.set(fe,mt)}if(!de)break}for(de&&B.size>0&&(oe=k.length+1);oe<k.length;){let Le=!0;for(let xe=0;xe<k[oe].length;xe++){let nt=+this.cleanLine(k[oe][xe]??"");if(0!=nt){if(nt-K!=1&&0!=K){Le=!1;break}K=nt}}if(Le){if(ne=oe,oe++,oe>=k.length)break;for(let xe=0;xe<k[ne].length;xe++){let Ge=+this.cleanLine(k[ne][xe]??""),nt=this.cleanLine(k[oe][xe]??"");ee.test(nt)&&""!=nt&&(nt="!"+nt),B.set(Ge,nt.startsWith("!")?nt:(k[oe][xe]??"").trim())}oe++}else{if(0==oe){let xe=!0;K=0;for(let Ge=0;Ge<k.length;Ge++){let ht=+this.cleanLine(k[Ge][0]??"");if(0!=ht){if(ht-K!=1&&0!=K){xe=!1;break}K=ht}}if(xe){k=this.pivotTable(k),oe=0,K=0,ne=-1;continue}break}{let xe=!0;for(let Ge=0;Ge<k[oe].length;Ge++){let nt=this.cleanLine(k[oe][Ge]??"");if(!ee.test(nt)){xe=!1;break}{let ht=+this.cleanLine(k[ne][Ge]??"");B.set(ht,B.get(ht)+nt)}}if(oe++,!xe){B.clear();break}}}}}0==B.size&&(x=w);for(let oe of B)M.set(oe[0],oe[1]);let Q=[];for(let oe of x){let K=this.cleanLine(oe).trim();/(\d+[A-H])+/i.test(K)&&Q.push(K)}let D=Q.join(""),Z=this.cleanLine(D),V=this.getResultMC(Z.toUpperCase());for(const oe of V)M.set(oe.num,oe.str);return M}cleanStyle(g){let _=g;return _=_.replaceAll(/\[![!iucsbp]+:\$(([^$]|\$[^\]])+)\$\]/g,"$1"),_=_.replaceAll(/\[![!iucsbp]+:!!\]/g,""),_=_.replaceAll(/\[\*(!!\d+!!:)?/g,"").replaceAll("*]",""),_}getAnsStr(g){let _=g.join("\n");_=this.cleanStyle(_),_=this.cleanDS(_);let x=this.getResultStr(_),w=new Map,k=/^([a-dA-D][\u0110S\u0111sDd])*$/;for(const M of x){let B=this.cleanLine(M.str);k.test(B)&&(M.str="!"+B),!(M.str.split("\n").length>1)&&w.set(M.num+"-"+M.lineIdx,M.str)}return w}getAnsFromHelp(g,_){let x=[],w=/^([a-dA-D][\u0110S\u0111sDd])*$/;for(const M of g){let B=_[M.lineIdx];B=this.cleanStyle(B),B=this.cleanDS(B).trim(),""!=B&&x.push(B)}x.length>1&&(x=[x[0],x[x.length-1]]);let k=0;for(const M of x){let B=M.trim().match(F.CONST.HELP_ANS_PATTERN.join("|")),Q=2*F.CONST.HELP_ANS_PATTERN.length+1;if(null!=B)for(let D=0;D<Q;D++){if(0==D||D%2>0)continue;let Z=B[D]?.trim();if(null!=Z){let V=0==k?0:g.length-1;g[V].text=g[V].text?.replace(B[0],"");let oe=this.cleanLine(Z);return w.test(oe)&&(Z="!"+oe),Z}}k++}return""}getResultStr(g){let _=[],x=g.replace(/\n/g,"\n"),w=F.CONST.QUESTION_PATTERN.join("|").replace(/\(\^/g,"("),k=x.matchAll(new RegExp(w,"ig"));for(;;){let Z=k.next();if(Z.done)break;let V=Z.value[0],oe=F.Utils.getNumberFromStr(V);x=x.replace(V,oe+".")}let D,M=F.CONST.RES_ANS_PATTERN.length>0?new RegExp(F.CONST.RES_ANS_PATTERN.join("|"),"g"):/\d+[.-][^|0-9]/g,B=x.matchAll(M),Q=-1;for(;;){let Z=B.next();if(Z.done)break;if(-1==Q)Q=Z.value.index,D=Z;else{let V=x.substr(Q,Z.value.index-Q);_.push(this.toAns(V,D,this.getLineIdx(x,Q))),Q=Z.value.index,D=Z}}if(Q>=0&&D){let Z=x.substr(Q);_.push(this.toAns(Z,D,this.getLineIdx(x,Q)))}return _}getLineIdx(g,_){return g.substring(0,_).split("\n").length-1}toAns(g,_,x){let w=_.value[0].length-1;return{num:+_.value[0].substr(0,w-1),str:g.substring(w).split("\n").map(B=>B.replace(/\s+/g," ")).join("\n").trim(),lineIdx:x}}getResultMC(g){let _=g.toUpperCase(),x=[],w="",k=[],M=!1;for(let B=0;B<_.length;B++){let Q=_.charCodeAt(B),D=Q>=65&&Q<=72;if(D&&""==w)return[];D!=M&&(k.push(w),w=""),M=D,w+=g[B]}if(""!=w&&k.push(w),k.length%2>0)return[];for(let B=1;B<k.length;B+=2){let Q=0,D=Math.floor(k[B-1].length/k[B].length),Z=+k[B-1].substring(Q,D),V=Z,oe=!1;for(let K=0;K<k[B].length;K++){if(K>=k[B-1].length){oe=!0;break}if(Z=+k[B-1].substring(Q,Q+D),Z!=V){oe=!0;break}x.push({num:Z,str:k[B][K]}),Q+=D,V=Z+1,D=V.toString().length}if(oe){x=[];break}}if(0==x.length)for(let B=1;B<k.length;B+=2){let Q=+k[B-1];if(B>1&&Q!=x[x.length-1].num+1)return[];x.push({num:Q,str:k[B]})}return x}}H.DapAnChiTietParser=d,d.TYPE_NAME="chitietdapan"},96570:(Ne,H,I)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.DapAnParser=void 0;const F=I(58343),h=I(74047);class U extends h.Parser{constructor(d){super(),null!=d&&(this.isOn=d),this.TYPE=U.TYPE_NAME}do(d){return this.match(d,F.CONST.DAPAN_PATTERN)}static getAnsFromHelp(d){for(const C of d){let g=C.replace(/\|/g,"").trim().match(F.CONST.HELP_ANS_PATTERN.join("|"));if(null!=g)for(const _ of g)if(null!=_&&1==_.length)return _}return""}}H.DapAnParser=U,U.TYPE_NAME="dapan"},31617:(Ne,H,I)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.FooterParser=void 0;const F=I(58343),h=I(74047);class U extends h.Parser{constructor(d){super(),null!=d&&(this.isOn=d),this.TYPE=U.TYPE_NAME}do(d){return this.match(d,F.CONST.FOOTER_PATTERN)}}H.FooterParser=U,U.TYPE_NAME="footer"},89094:(Ne,H,I)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.HetParser=void 0;const F=I(58343),h=I(74047);class U extends h.Parser{constructor(d){super(),null!=d&&(this.isOn=d),this.TYPE=U.TYPE_NAME}do(d){return this.match(d,F.CONST.HET_PATTERN)}}H.HetParser=U,U.TYPE_NAME="end"},75271:(Ne,H,I)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.HuongDanParser=void 0;const F=I(58343),h=I(74047);class U extends h.Parser{constructor(d){super(),null!=d&&(this.isOn=d),this.TYPE=U.TYPE_NAME}do(d){return this.match(d,F.CONST.HUONGDAN_PATTERN)}}H.HuongDanParser=U,U.TYPE_NAME="huongdan"},52734:(Ne,H,I)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.IncludeParser=void 0;const F=I(74047);class h extends F.Parser{constructor(E){super(),null!=E&&(this.isOn=E),this.TYPE=h.TYPE_NAME}do(E){let d=E.replace(/\|/g,"").trim(),g=/\[@([CTQG]\d+):[^\]]*\]/g,_=/\[@(F:[^\]]*)\]/g,x=/\[[^\]\d]+(\d+)[^\]\d]+\]/g,w=/\[[^\]]+\]/g;if(/^\[@[^!\]]+\]([\.,]\[[^\]!]+\])*$/.test(d)){let k=d;return k=k.replaceAll(g,"$1").replaceAll(_,"$1").replaceAll(x,"$1").replaceAll(w,""),[{type:this.TYPE,pos:[0,0],label:"@@."+k}]}return[]}}H.IncludeParser=h,h.TYPE_NAME="include"},74047:(Ne,H)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.Parser=void 0,H.Parser=class I{constructor(){this.isOn=!0,this.TYPE="default"}on(){this.isOn=!0}off(){this.isOn=!1}parse(h){return this.isOn?this.do(h):[]}match(h,U){let E=h.replace(/\|/g,"").trim().match(U.join("|"));return null!=E&&E.length>0?[{type:this.TYPE,pos:[0,0]}]:[]}}},50023:(Ne,H,I)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.QuestionParser=void 0;const F=I(58343),h=I(74047);class U extends h.Parser{constructor(d){super(),null!=d&&(this.isOn=d),this.TYPE=U.TYPE_NAME}do(d){let C=this.matchPos(d);if(C.value){let g=null;for(let B=C.value.length-1;B>=0;B--)if(C.value[B]){g=C.value[B];break}if(null==g)return[];let _=d.replace(/\|/g,"").toLowerCase().indexOf(g),x=_,w="",k=d.toLowerCase();for((g.endsWith("(")||g.endsWith("["))&&(g=g.substring(0,g.length-1));x<k.length&&("|"!=k[x]&&(w+=k[x]),x++,w!=g););let M={type:this.TYPE,pos:[_,x]};return M.label=this.getNumberFromStr(d.substring(M.pos[0],M.pos[1])),M.olabel=g,[M]}return[]}matchPos(d){let C=d.replace(/\|/g,"").toLowerCase().trim(),g=F.CONST.QUESTION_PATTERN.join("|"),_=C.matchAll(g).next();return _.value||(g=F.CONST.QUESTION_PATTERN2.join("|"),_=C.matchAll(g).next()),_}getNumberFromStr(d){let C=d.match(/(\d+)/);return C?C[0]:""}}H.QuestionParser=U,U.TYPE_NAME="question"},65378:(Ne,H,I)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.SectionParser=void 0;const F=I(58343),h=I(74047);class U extends h.Parser{constructor(d){super(),null!=d&&(this.isOn=d),this.TYPE=U.TYPE_NAME}do(d){let C=d.replace(/\|/g,"");C=C.replaceAll(/\[![!ibuchl]+:\$(([^$]|\$[^\]])+)\$\]/g,"$1");let g=C.toLowerCase().trim().match(F.CONST.SECTION_PATTERN_LOWER.join("|")),_=null!=g&&g.length>0;if(_||(g=C.trim().match(F.CONST.SECTION_PATTERN_NORMAL.join("|")),_=null!=g&&g.length>0),_&&g){let k,x=/\s+([0-9ABCDEFIVX]+)\s*[.:]/g,w=C.matchAll(x).next();return w.done&&(x=/\s+([0-9ABCDEFIVX]+)\s*$/g,w=C.matchAll(x).next()),w.done||(k=w.value[1]),[{type:this.TYPE,pos:[0,0],label:C,extInfo:k}]}return[]}}H.SectionParser=U,U.TYPE_NAME="section"},88178:(Ne,H,I)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.ModifyAnsRule=void 0;const F=I(24672);class h extends F.Rule{constructor(E){super(E??"","modify:")}load(E){let d=new h(E);return""!=d.pattern?d:null}run(E,d){if(""==this.pattern)return!1;if(this.getStack(E,d).endsWith(this.pattern)&&this.checkVal(E,d)){for(const g of this.data){let _=g.split(":"),x=d-+_[0],w=E[x].label;E[x].label=_[1],E[x].err=w+" -> "+_[1]}return!0}return!1}}H.ModifyAnsRule=h},92795:(Ne,H,I)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.RemoveARule=void 0;const F=I(24672);class h extends F.Rule{constructor(E){super(E??"","removea:")}load(E){let d=new h(E);return""!=d.pattern?d:null}run(E,d){if(""==this.pattern)return!1;if(this.getStack(E,d).endsWith(this.pattern)&&this.checkVal(E,d,!1)){for(const g of this.data)E.splice(d-+g,1);return!0}return!1}}H.RemoveARule=h},8377:(Ne,H,I)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.RemoveDupRule=void 0;const F=I(24672);class h extends F.Rule{constructor(E){super(E??"","rmdup:")}load(E){let d=new h(E);return""!=d.pattern?d:null}run(E,d){return""!=this.pattern&&(!(!this.getStack(E,d).endsWith(this.pattern)||E[d].label!=E[d-1].label)&&(E.splice((E[d].score??0)>(E[d-1].score??0)?d-1:d,1),!0))}}H.RemoveDupRule=h},9165:(Ne,H,I)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.RemoveRule=void 0;const F=I(24672);class h extends F.Rule{constructor(E){super(E??"","remove:")}load(E){let d=new h(E);return""!=d.pattern?d:null}run(E,d){if(""==this.pattern)return!1;if(this.getStack(E,d).endsWith(this.pattern)&&this.checkVal(E,d)){for(const g of this.data)E.splice(d-+g,1);return!0}return!1}}H.RemoveRule=h},24672:(Ne,H)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.Rule=void 0,H.Rule=class I{constructor(h,U){if(this.TYPE="",this.pattern="",this.valPattern="",this.data=[],this.TYPE=U,!h.startsWith(this.TYPE))return;let d=h.substring(this.TYPE.length).split("=>"),C=d[0].split(":");this.pattern=C[0].trim(),this.valPattern=C.length>1?C[1].trim():"",this.data=d[1].split(",").map(g=>g.trim())}checkVal(h,U,E=!0){if(""==this.valPattern)return!0;let C=[];for(let _=Math.ceil(this.pattern.length/2);_>0;_--)C.push(h[U-_+1].label?.trim());let g=C.join("-");return new RegExp(this.valPattern).test(E?g.toLocaleUpperCase():g)}getStack(h,U){let E="",d=U-10>=0?U-10:0;for(;d<=U;d++)E+="-"+h[d].type[0];return E}}},42637:(Ne,H,I)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.SameKindRule=void 0;const F=I(58343),h=I(25873),U=I(96570),E=I(89094),d=I(75271),C=I(65378),g=I(24672);class _ extends g.Rule{constructor(w){super(w??"","same:")}load(w){let k=new _(w);return""!=k.pattern?k:null}run(w,k){if(""==this.pattern)return!1;let M=w[k];if(!M?.type.startsWith(this.pattern))return!1;let B="",Q=0,D=w.length;for(let K=0;K<k;K++){let ee=w[K];(ee.type==E.HetParser.TYPE_NAME||ee.type==U.DapAnParser.TYPE_NAME)&&(B="da",K>k?D=K:Q=K),ee.type==d.HuongDanParser.TYPE_NAME&&"da"==B&&(B="hd",K<k&&(Q=K))}if("da"==B)return!1;let oe,Z=[],V=this.valPattern.split(",");for(const K of V){let ee=K.trim(),de=new RegExp(F.CONST[ee].join("|"));Z.push(de)}for(let K of Z){for(let ee=Q;ee<D;ee++)if(w[ee].type.startsWith(this.pattern)&&K.test(w[ee].olabel??"")){oe=K;break}if(oe)break}if(oe&&!oe.test(M.olabel??"")){let K=k>0?w[k-1].type==C.SectionParser.TYPE_NAME:null,ee=k>0&&!oe.test(w[k-1].olabel??"");if(!(K&&w[k+1]?.type==h.AnswerParser.TYPE_NAME&&w[k+2]?.type==h.AnswerParser.TYPE_NAME&&w[k+3]?.type==h.AnswerParser.TYPE_NAME||ee))return w.splice(k,1),!0}return!1}}H.SameKindRule=_},19167:(Ne,H,I)=>{"use strict";I.d(H,{t:()=>d});var F=I(65879),h=I(46558),U=I(85929),E=I(88489);let d=(()=>{class C{ExamExerciseOfProgramToSessionStorage(_,x,w){const k=this.commonService.getMyQueryParam("indexSession"),M=this.commonService.getMyQueryParam("programId");if(null!=k&&null!=M){const B=this.browserStorageService.getSessionStorage(`${this.key+M}`);if(B){const Q=this.zipDataService.decodeContentGzip(B),D=this.commonService.castJsonToObj(Q),Z={id:-1,refId:_,name:x,type:w,willRemove:!1};D?.sessionFormArray[k].documentObjs.push(Z);const V=this.zipDataService.convertContentGzip(this.commonService.serializeJson(D??{}));this.browserStorageService.saveSessionStorage(`${this.key+M}`,V)}}}removeProgramDataLocal(_){this.browserStorageService.removeSessionStorage(`${this.key+_}`)}constructor(_,x,w){this.commonService=_,this.zipDataService=x,this.browserStorageService=w,this.key="data_educational_program_"}}return C.\u0275fac=function(_){return new(_||C)(F.LFG(h.z),F.LFG(U.a),F.LFG(E.n))},C.\u0275prov=F.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})()},66623:(Ne,H,I)=>{"use strict";I.d(H,{R:()=>F});var F=function(h){return h.exam="exam",h.ref="ref",h.lecture="lecture",h.teaching_plan="teaching_plan",h.slide="slide",h.google_docs="google_docs",h.unknown="unknown",h}(F||{})},38486:(Ne,H,I)=>{"use strict";I.r(H),I.d(H,{TestbankModule:()=>tX});var F=I(96814),h=I(56223),U=I(19347),E=I(21266),d=I(42273),C=I(42753),g=I(66469),_=I(37722),x=I(21494),w=I(25391),k=I(95545),M=I(56731),B=I(84155),Q=I(78217),D=I(24090),Z=I(20553),V=I(69862),oe=I(22299),K=I(69623),ee=I(65592),ne=I(52572),de=I(66623);class fe extends K.EditorApiService{constructor(o,t,i,a,r){super(),this.questionHelper=o,this.apiUploadService=t,this.documentService=i,this.examService=a,this.questionService=r,this.treeData=[],this.treeQuestion=[],this.saveTreeData=[],this.saveTreeQuestion=[]}loadData(o,t){return new Promise(i=>{if(this.saveTreeData.includes(t))i();else{this.saveTreeData.push(t);let a={categoryId:t,documentType:void 0,shareType:""!=o?o:void 0,fileType:"exam_online",classroomId:void 0,name:void 0,suggestExamPurpose:void 0,lite:1,getGlobal:0,page:1,itemPerPage:-1};this.documentService.apiDocumentsGet(a.categoryId,a.documentType,a.shareType,a.fileType,a.classroomId,a.name,a.suggestExamPurpose,a.lite,a.getGlobal,a.page,a.itemPerPage).subscribe(r=>{1===r.success&&r.data&&((r.data.categoryObjs||[]).forEach(c=>{this.treeData.push({id:c.id||0,name:c.name||"",type:"cat",pr:t})}),(r.data.documentObjs||[]).forEach(c=>{c.exam&&this.treeData.push({id:c.exam.id||0,name:c.exam.name||"",type:"test",pr:t})})),i()})}})}loadQuestion(o){return new Promise(t=>{this.saveTreeQuestion.includes(o)?t():(this.saveTreeQuestion.push(o),this.examService.apiExamGetExamWithQuestionObjsIdGet(o).subscribe(i=>{if(1===i.success&&i.data){let r=[];(i.data.questionObjs||[]).forEach(s=>{this.treeQuestion.push({id:s.id||0,label:(s.rawIndex??0)+1,content:this.questionHelper.renderContent(s),groupId:s.groupId,type:"quest",pr:o}),r.includes(s.groupId||0)||r.push(s.groupId||0)}),r.length>1&&r.forEach(s=>{this.treeQuestion.push({id:s,label:s,content:"Nh\xf3m "+(s+1),type:"group",pr:o})}),t()}}))})}searchRes(o,t){return new Promise(i=>{this.loadData(o,t).then(()=>{i(this.treeData.filter(a=>a.pr===t))})})}getQuestion(o){return new Promise(t=>{this.loadQuestion(o).then(()=>{t(this.treeQuestion.filter(i=>i.pr===o))})})}}var Le=I(89745),xe=I(37734),Ge=I(70731);function nt(n,o,t=8,i=[]){if(o<=1)return i.push(n),i;let a=i.push(parseFloat((n/o).toPrecision(t)));return nt(n-i[a-1],o-1,t,i)}var ht=I(61713),Ct=I(81881),mt=I(72164),e=I(65879),Dt=I(76024),wt=I(67679),ye=I(36727);function Yt(n,o){1&n&&(e.TgZ(0,"div",16),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_testbank_please_enter_score_greater_than_0")," "))}function sn(n,o){if(1&n&&(e.TgZ(0,"div",10)(1,"div",11)(2,"label",12),e._uU(3),e.ALo(4,"mytranslate"),e.ALo(5,"mytranslate"),e.qZA(),e.TgZ(6,"div",13),e._UZ(7,"input",14),e.qZA()(),e.YNc(8,Yt,3,3,"div",15),e.qZA()),2&n){const t=e.oxw();e.xp6(3),e.hij(" ",e.lcZ(4,3,"lang_auto_tong_diem_trac_nghiem")+" ("+t.data.multipleQuestion+" "+e.lcZ(5,5,"lang_testbank_tested_list_question")+")"," "),e.xp6(4),e.Q6J("decimal",!0),e.xp6(1),e.Q6J("ngIf",t.form.controls.multiplePoint.errors&&(t.form.controls.multiplePoint.dirty||t.form.controls.multiplePoint.touched))}}function ii(n,o){1&n&&(e.TgZ(0,"div",16),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_testbank_please_enter_score_greater_than_0")," "))}function oi(n,o){if(1&n&&(e.TgZ(0,"div",17)(1,"div",11)(2,"label",18),e._uU(3),e.ALo(4,"mytranslate"),e.ALo(5,"mytranslate"),e.qZA(),e.TgZ(6,"div",13),e._UZ(7,"input",19),e.qZA()(),e.YNc(8,ii,3,3,"div",15),e.qZA()),2&n){const t=e.oxw();e.xp6(3),e.hij(" ",e.lcZ(4,3,"lang_testbank_total_true_false_questions")+" ("+t.data.trueFalseQuestion+" "+e.lcZ(5,5,"lang_testbank_tested_list_question")+")"," "),e.xp6(4),e.Q6J("decimal",!0),e.xp6(1),e.Q6J("ngIf",t.form.controls.trueFalsePoint.errors&&(t.form.controls.trueFalsePoint.dirty||t.form.controls.trueFalsePoint.touched))}}function Ut(n,o){1&n&&(e.TgZ(0,"div",16),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_testbank_please_enter_score_greater_than_0")," "))}function Hn(n,o){if(1&n&&(e.TgZ(0,"div",17)(1,"div",11)(2,"label",20),e._uU(3),e.ALo(4,"mytranslate"),e.ALo(5,"mytranslate"),e.qZA(),e.TgZ(6,"div",13),e._UZ(7,"input",21),e.qZA()(),e.YNc(8,Ut,3,3,"div",15),e.qZA()),2&n){const t=e.oxw();e.xp6(3),e.hij(" ",e.lcZ(4,3,"lang_auto_tong_diem_dien_tu")+" ("+t.data.fillQuestion+" "+e.lcZ(5,5,"lang_testbank_tested_list_question")+")"," "),e.xp6(4),e.Q6J("decimal",!0),e.xp6(1),e.Q6J("ngIf",t.form.controls.fillPoint.errors&&(t.form.controls.fillPoint.dirty||t.form.controls.fillPoint.touched))}}function at(n,o){1&n&&(e.TgZ(0,"div",16),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_testbank_please_enter_score_greater_than_0")," "))}function Lt(n,o){if(1&n&&(e.TgZ(0,"div",17)(1,"div",11)(2,"label",22),e._uU(3),e.ALo(4,"mytranslate"),e.ALo(5,"mytranslate"),e.qZA(),e.TgZ(6,"div",13),e._UZ(7,"input",23),e.qZA()(),e.YNc(8,at,3,3,"div",15),e.qZA()),2&n){const t=e.oxw();e.xp6(3),e.hij(" ",e.lcZ(4,3,"lang_auto_tong_diem_tu_luan")+" ("+t.data.essayQuestion+" "+e.lcZ(5,5,"lang_testbank_tested_list_question")+")"," "),e.xp6(4),e.Q6J("decimal",!0),e.xp6(1),e.Q6J("ngIf",t.form.controls.essayPoint.errors&&(t.form.controls.essayPoint.dirty||t.form.controls.essayPoint.touched))}}let Mn=(()=>{class n extends mt.e{handleCloseDialog(){this.dialogRef.close()}setPointData(){if(this.form.invalid)return this.form.markAllAsTouched();const t=this.form.getRawValue(),i=this.ensureNumber(t.multiplePoint),a=this.ensureNumber(t.essayPoint),r=this.ensureNumber(t.fillPoint),s=this.ensureNumber(t.trueFalsePoint),l={multiplePoint:i.toString(),essayPoint:a.toString(),fillPoint:r.toString(),trueFalsePoint:s.toString()};this.dialogRef.close(l)}ensureNumber(t){return isNaN(t)?0:Number(t)}addValidateForm(){if(!this.data)return;const t=1e-6;this.data.multipleQuestion&&this.form.controls.multiplePoint.addValidators([h.kI.required,h.kI.min(t)]),this.data.trueFalseQuestion&&this.form.controls.trueFalsePoint.addValidators([h.kI.required,h.kI.min(t)]),this.data.fillQuestion&&this.form.controls.fillPoint.addValidators([h.kI.required,h.kI.min(t)]),this.data.essayQuestion&&this.form.controls.essayPoint.addValidators([h.kI.required,h.kI.min(t)])}ngOnInit(){super.ngOnInit(),this.form.patchValue({multiplePoint:Number(this.data.multiplePoint),essayPoint:Number(this.data.essayPoint),fillPoint:Number(this.data.fillPoint),trueFalsePoint:Number(this.data.trueFalsePoint)}),this.addValidateForm()}constructor(t,i){super(i,t),this.dialogRef=t,this.data=i,this.form=new h.cw({multiplePoint:new h.NI(0,{nonNullable:!0}),trueFalsePoint:new h.NI(0,{nonNullable:!0}),fillPoint:new h.NI(0,{nonNullable:!0}),essayPoint:new h.NI(0,{nonNullable:!0})})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(U.so,8),e.Y36(U.WI,8))},n.\u0275cmp=e.Xpm({type:n,selectors:[["azt-split-point"]],features:[e.qOj],decls:18,vars:14,consts:[[1,"box"],[3,"formGroup"],[1,"border-b","border-slate-200","dark:border-darkmode-400","p-3"],[1,"font-medium","text-base"],[1,"p-3","border-b","border-slate-200","dark:border-darkmode-400"],["class","mt-0",4,"ngIf"],["class","mt-4",4,"ngIf"],[1,"p-3","text-right"],[1,"btn","w-24","btn-outline-secondary","mr-3",3,"click"],[1,"btn","w-24","btn-primary",3,"click"],[1,"mt-0"],[1,"flex","items-center"],["for","multiplePoint",1,"font-medium","mr-3"],[1,"ml-auto"],["type","text","formControlName","multiplePoint","id","multiplePoint","appOnlyNumber","",1,"form-control","text-center",2,"width","90px",3,"decimal"],["class","mt-2 text-danger font-medium text-xs",4,"ngIf"],[1,"mt-2","text-danger","font-medium","text-xs"],[1,"mt-4"],["for","scoreMultipleChoice",1,"font-medium","mr-3"],["type","text","formControlName","trueFalsePoint","id","trueFalsePoint","appOnlyNumber","",1,"form-control","text-center",2,"width","90px",3,"decimal"],["for","fillPoint",1,"font-medium","mr-3"],["type","text","formControlName","fillPoint","id","fillPoint","appOnlyNumber","",1,"form-control","text-center",2,"width","90px",3,"decimal"],["for","essayPoint",1,"font-medium","mr-3"],["type","text","formControlName","essayPoint","id","essayPoint","appOnlyNumber","",1,"form-control","text-center",2,"width","90px",3,"decimal"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"form",1)(2,"div",2)(3,"span",3),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()(),e.TgZ(6,"div",4),e.YNc(7,sn,9,7,"div",5),e.YNc(8,oi,9,7,"div",6),e.YNc(9,Hn,9,7,"div",6),e.YNc(10,Lt,9,7,"div",6),e.qZA(),e.TgZ(11,"div",7)(12,"button",8),e.NdJ("click",function(){return i.handleCloseDialog()}),e._uU(13),e.ALo(14,"mytranslate"),e.qZA(),e.TgZ(15,"button",9),e.NdJ("click",function(){return i.setPointData()}),e._uU(16),e.ALo(17,"mytranslate"),e.qZA()()()()),2&t&&(e.xp6(1),e.Q6J("formGroup",i.form),e.xp6(3),e.hij(" ",e.lcZ(5,8,"lang_testbank_quick_score_distribution")," "),e.xp6(3),e.Q6J("ngIf",i.data.multipleQuestion),e.xp6(1),e.Q6J("ngIf",i.data.trueFalseQuestion),e.xp6(1),e.Q6J("ngIf",i.data.fillQuestion),e.xp6(1),e.Q6J("ngIf",i.data.essayQuestion),e.xp6(3),e.hij(" ",e.lcZ(14,10,"lang_auto_dong")," "),e.xp6(3),e.hij(" ",e.lcZ(17,12,"lang_auto_chia")," "))},dependencies:[F.O5,h._Y,h.Fj,h.JJ,h.JL,h.sg,h.u,Dt.Y,wt.M,ye.JV],styles:[".school-info_bg[_ngcontent-%COMP%]{z-index:1000;width:100%;display:flex;left:0;top:0;position:fixed;height:100%;min-height:100vh;background-color:#3c3c3c80}.school-info[_ngcontent-%COMP%]{z-index:1001;top:50%;left:50%;transform:translate(-50%,-50%);position:fixed;max-width:800px;background:#fff;margin-left:auto;margin-right:auto;box-shadow:0 0 13px 3px #00000094}.block-title[_ngcontent-%COMP%]{text-align:center;font-weight:600}.block-body[_ngcontent-%COMP%]{text-align:left}.btn-close[_ngcontent-%COMP%]{transition:all .5s}.btn-close[_ngcontent-%COMP%]:hover{background:#dfe6e9}.input-point[_ngcontent-%COMP%]{margin-left:10px;max-width:100px;border:1px solid #000;border-radius:3px;text-align:center;color:#000;padding:0!important}.btn-config[_ngcontent-%COMP%]{transition:all .5s}.btn-config[_ngcontent-%COMP%]:hover{background:#133864}@media only screen and (max-width: 1024px){.school-info[_ngcontent-%COMP%]{width:95%;max-width:800px}}@media only screen and (max-width: 768px){.school-info[_ngcontent-%COMP%]{width:95%;max-width:700px}}@media only screen and (max-width: 576px){.school-info[_ngcontent-%COMP%]{width:95%;max-width:400px}}@media only screen and (max-width: 380px){.school-info[_ngcontent-%COMP%]{width:95%;max-width:300px}}@media only screen and (max-width: 290px){.school-info[_ngcontent-%COMP%]{width:95%;max-width:250px}}"]}),n})();class $t{countQuestionsByType(o,t){return o.filter(i=>i.type==t&&!i.quest?.isGroup).length}countQuestionPointsByType(o,t){return o.filter(a=>a.type===t&&!a.quest?.isGroup).reduce((a,r)=>a+(r.point??0),0).toString()}parseNumberFixed(o,t){let i=Number(parseFloat(o.toString()).toFixed(t));return isNaN(i)?"0":parseFloat(o.toString()).toFixed(t)}}class Zn{static loadImageToBase64(o,t){return new Promise((i,a)=>{const r=new Image;r.crossOrigin="anonymous",r.setAttribute("count","1"),r.onload=()=>{const s=document.createElement("canvas");s.width=r.width,s.height=r.height,s.getContext("2d")?.drawImage(r,0,0,r.width,r.height,0,0,s.width,s.height);let u=s.toDataURL();i(u)},r.onerror=()=>{const s=r.getAttribute("count");s&&1==Number(s)?(r.src=t.getMyCdn(o),r.setAttribute("count","2")):s&&Number(s)<5?(r.setAttribute("count",s+1),r.src=t.getMyCdn(o)+"?t="+(new Date).getTime()):a(new Error)},r.src=t.getMyCdn(o)})}static isPureTextMathML(o){let i=(new DOMParser).parseFromString(o,"application/xml");if(i.querySelector("parsererror"))return console.error("isPureTextMathML: Invalid MathML"),"";let a=i.documentElement.children,r=["mi","mn","mo","ms","mspace","mtext"],s="";for(let c=0;c<a.length;c++){let u=a[c];if(r.indexOf(u.tagName.toLowerCase())<0)return"";s+=u.textContent?.trim()??""}return/^[0-9.,-]+$/.test(s.replaceAll("\u2212","-"))?s:""}}var on=I(2016);class Dn{constructor(o,t){this.editorOutputDataService=o,this.commonService=t,this.typeMatrix="user",this.startIndex=0,this.backToLink="",this.title="",this.editor={show:!0},this.examSave={},this.homeworkSave={},this.mathEditor={},this.similarQuest={},this.showErrorsQuests={},this.showInfomationQuests={},this.imageEditor={},this.logConfig=new on.H,this.heightContent=600,this.inputMoveToQuestion=!1,this.inputMoveToQuestionValue="1",this.inputMoveToQuestionTooltip=!1}showEditor(){this.disAll(),this.reSetBackToLink(),this.editor.show=!0}showHomework(){this.disAll(),this.backToLink="",this.title=this.commonService.myTranslateInstant("lang_cms_config_homework_title")??"",this.homeworkSave.show=!0}showExam(){this.disAll(),this.title=this.commonService.myTranslateInstant("lang_auto_cau_hinh_de_thi")??"",this.backToLink="",this.examSave.show=!0}disAll(){this.title="",this.examSave.show=!1,this.homeworkSave.show=!1,this.editor.show=!1}reSetBackToLink(){this.title=this.commonService.myTranslateInstant("lang_auto_cong_cu_soan_thao_noi_dung")??"",this.backToLink=this.sourceBackToLink?this.sourceBackToLink:"/admin/testbank/create-new-document/"+(null!=this.cur_cateId?this.cur_cateId:0)}getBackLink(){return this.matrix&&this.matrix.matrix.length>0?(this.editorOutputDataService.setMatrixData(this.matrix,!0),`/admin/testbank/mix-bank-template/${null!=this.cur_cateId?this.cur_cateId:0}/${this.typeMatrix}/0`):this.backToLink}}class Ln{constructor(o){this.commonService=o,this.wmf=new WMFConverter}readFileInputEventAsArrayBuffer(o,t){var i=new FileReader;i.onload=function(a){t(a.target.result)},i.readAsArrayBuffer(o)}handleFileSelect(o,t,i,a){let r=this,s=(u,m)=>{if(i){let p=this.commonService.myTranslateInstant("lang_auto_cong_thuc");i(u,m,p)}},c=new Ge.Q(30,{function:i?(u,m)=>{if(i){let p=this.commonService.myTranslateInstant("lang_auto_image");i(u,m,p)}}:()=>{}});this.readFileInputEventAsArrayBuffer(o,function(u){azotaDocx.readDocx(u,s).then(function(m){for(let p of m.data)"img"==p.type&&("image/x-wmf"==p.contentType||"image/x-emf"==p.contentType?c.addTask(r,r.convert,[p]):p.value="data:"+p.contentType+";base64, "+p.value,!p.cssStyle&&p.height&&p.width&&"EMU"==p.measureUnit)&&(p.cssStyle=`width:${+p.width/12700}pt;height:${+p.height/12700}pt;margin-top:0px;`);c.start().then(()=>{let p=new Map,f=0;for(let b of m.data)"img"==b.type&&b.cropInfo&&p.set(f,1),f++;if(t&&0==p.size)t(m);else{f=0;for(let b of m.data){if("img"==b.type&&b.cropInfo){const L=f,N=document.createElement("img");N.src=b.value,N.onload=()=>{r.cropImage(b,N),p.delete(L),0==p.size&&t&&t(m)},N.onerror=()=>{p.delete(L),0==p.size&&t&&t(m)}}f++}}})}).catch(m=>{a&&a(m.message)})})}convert(o){return new Promise(t=>{if("image/x-wmf"==o.contentType)o.value=this.wmf.toPNG("data:"+o.contentType+";base64, "+o.value),t();else{let s=new ToContext2D(0,1),l=this.decodeBase64(o.value);try{FromEMF.Parse(l,s)}catch{}var i=this.scaleCanvas(s.canvas,200,200);o.value=i.toDataURL(),t()}})}decodeBase64(o){return Uint8Array.from(atob(o),function(t){return t.charCodeAt(0)})}scaleCanvas(o,t,i){let a=document.createElement("canvas");return a.width=t,a.height=i,a.getContext("2d")?.drawImage(o,0,0,o.width,o.height,0,0,t,i),a}cropImage(o,t){if(!o.cropInfo)return;let i=o.cropInfo.left?+o.cropInfo.left:0,a=o.cropInfo.top?+o.cropInfo.top:0,r=o.cropInfo.right?+o.cropInfo.right:0,s=o.cropInfo.bottom?+o.cropInfo.bottom:0;if(i+a+r+s==0)return;let l=t.width,c=t.height,u=i*l/1e5,m=a*c/1e5,b=l-r*l/1e5-u,L=c-s*c/1e5-m;const N=document.createElement("canvas");N.width=b,N.height=L,N.getContext("2d")?.drawImage(t,u,m,b,L,0,0,b,L),o.value=N.toDataURL()}}class Cn{parse(o){let t=["NB_SOCH","TH_SOCH","VD_SOCH","VDC_SOCH","DIEM"],i=[],a=[],r=[];for(let b of o){r=[];for(let L of b.content){if("POS"==L.indexName&&""!=L.value){let W=L.value.trim();W=W.replaceAll("C",""),r=W.split(",")}if(L.isMerge||""==L.value.trim()||t.indexOf(L.indexName)<0)continue;let N=o.filter(W=>W.obj.id==L.id).map(W=>({id:W.obj.id,type:W.obj.type[0].toUpperCase(),name:W.obj.item,shareType:this.getShareType(W.obj)})),R=L.value;R=R.replace(/\d+/g,"").trim();let j=[L.indexName.split("_")[0]];""!=R?j.push(...R.split(",").map(W=>W.trim())):j.push("TN","DT","DS");let G=K.Utils.getNumberFromStr(L.value),ae={value:G,tag:j,items:[...N],point:0,pos:r.splice(0,G)};for(let W of L.mergeId){let le=o.filter(ve=>ve.index==W).map(ve=>({id:ve.obj.id,type:ve.obj.type[0].toUpperCase(),name:ve.obj.item,shareType:this.getShareType(ve.obj)}));ae.items.push(...le)}"DIEM"==ae.tag[0]?a.push(ae):i.push(ae)}}for(let b of a){let L=0;for(let N of i)b.items.filter(j=>N.items.filter(G=>G.id==j.id).length>0).length>0&&(L+=+N.value);L>0&&(b.point=Math.round(+b.value/10*100/L)/100);for(let N of i)b.items.filter(j=>N.items.filter(G=>G.id==j.id).length>0).length>0&&(N.point=b.point)}let s=[],l=[],c=new Map,u=["NB","TH","VD","VDC"];i.sort((b,L)=>u.indexOf(b.tag[0])-u.indexOf(L.tag[0]));let m=1,p=0;for(let b of i)p+=+b.value;for(let b of i){let L=[],N=b.items.map(ae=>{let W="user"==ae.shareType?`:${ae.shareType}-`:"";return ae.name=ae.name.replace(/[\[\]]/g,""),`[@${ae.type}${ae.id}:${W}${ae.name}]`}).join(",")+".";L.push(N);let R=b.tag.map(ae=>`[@F:azt_lang_tag_${ae}]`).join(",");R.includes("[@F:azt_lang_tag_NH]")&&(R="[@F:azt_lang_tag_NH]"),L.push(`${R}.`),L.push("[azt_lang_sugg_random $__d_value__$ azt_lang_sugg_question]");let j=L.join(""),G=+b.value;for(let ae=0;ae<G;ae++)c.set(j+"=>"+ae,{d:b.point});for(let ae=0;ae<G;ae++){const W=b.tag.join().includes("NH")?"azt_lang_sugg_group_cc":"azt_lang_sugg_question";let le={txt:j.replace("$__d_value__$","1").replace("azt_lang_sugg_question",W),idx:b.pos[ae]?+b.pos[ae].trim():m};b.pos[ae]&&le.idx<=p?s.push(le):l.push(le),m++}}s=s.sort((b,L)=>b.idx-L.idx),l=l.sort((b,L)=>b.idx-L.idx);let f=[];for(let b=1;b<=p;b++)s.length>0&&s[0].idx==b?f.push(s.splice(0,1)[0]):l.length>0&&f.push(l.splice(0,1)[0]);return s.length>0&&f.push(...s),l.length>0&&f.push(...l),{text:f.map(b=>b.txt).join("\n"),extra:c}}getShareType(o){let t=o.prNode?.prNode,i="",a=[];for(o.prNode&&a.push(o.prNode.id);t;)i=`[@C${t.id}:-].`+i,a.push(t.id),t=t.prNode;let r="";return 1==a.length&&-1==a[0]&&(r="user"),a.length>1&&-1==a[a.length-1]&&(r="user_"+a[a.length-2]),r}}class Nn{process(o){let t=/^\s*#(\d)\s*\[[A-Z0-9\-\[\]\$!:b]+\]/g,i=["NB","TH","VD","VDC"],a=0,r=!1,s=1;for(let l of o){let u=l.matchAll(t).next();if(!u.done){let p=+u.value[1]-1;p<i.length&&(o[a]=l.replace(u.value[0],`C\xe2u ${s++}. (${i[p]})`)),r=!0}r&&"GY"==l.trim()&&(o[a]="L\u1eddi gi\u1ea3i"),a++}}}var jt=function(n){return n[n.multipleChoice=1]="multipleChoice",n[n.essay=3]="essay",n[n.trueFalse=5]="trueFalse",n[n.fill=4]="fill",n}(jt||{}),gn=I(8720),Sn=I(92381),ai=I(34004);class Jo extends Sn.N{constructor(){super(...arguments),this.chemBase=["H","He","Li","Be","B","C","N","O","F","Ne","Na","Mg","Al","Si","P","S","Cl","Ar","K","Ca","Sc","Ti","V","Cr","Mn","Fe","Co","Ni","Cu","Zn","Ga","Ge","As","Se","Br","Kr","Rb","Sr","Y","Zr","Nb","Mo","Tc","Ru","Rh","Pd","Ag","Cd","In","Sn","Sb","Te","I","Xe","Cs","Ba","La","Ce","Pr","Nd","Pm","Sm","Eu","Gd","Tb","Dy","Ho","Er","Tm","Yb","Lu","Hf","Ta","W","Re","Os","Ir","Pt","Au","Hg","Tl","Pb","Bi","Po","At","Rn","Fr","Ra","Ac","Th","Pa","U","Np","Pu","Am","Cm","Bk","Cf","Es","Fm","Md","No","Lr","Rf","Db","Sg","Bh","Hs","Mt","Ds","Rg","Cn","Nh","Fl","Mc","Lv","Ts","Og"]}findAttributes(o){const t={content:"",attr:[]};return t.content=o.replace(/(\w+)=["']?((?:.(?!["']?\s+=|\s*\/?[>"']))+.)["']?/g,i=>{const a=(0,ai.Z)();return t.attr.push({key:a,value:i}),a}),t}processMapException(o,t){return t.forEach(i=>{o=o.replace(i.key,i.value)}),o}render(o,t,i){if(o.trim().startsWith("[@"))return o;const a=this.findAttributes(o);let r=o=a.content,s=this.chemBase.join("|"),l=new RegExp(`(?:[\\s,.:;"'=\u2013\\-\\/\\+\\?<>]|^)\\(?\\d*(${s})+\\d*(${s}|\\d+|\\(|\\))*(?:(?=[\\s,.:;"'=\u2013\\-\\/\\+\\?<>])|\\(\\w+\\)|$)`,"g"),c=r.matchAll(l),u=[];for(;;){let p=c.next();if(p.done)break;let f=0==p.value.index?p.value[0]:p.value[0].substring(1);f.replace("(","").replace(")","").length<=1||u.push({s:0==p.value.index?0:p.value.index+1,len:f.length,val:this.autoFormat(f)})}if(u.sort((p,f)=>p.s>f.s?-1:1),u.filter(p=>/\d+/.test(p.val)).length>0)for(let p of u)r=r.substring(0,p.s)+"\\("+p.val+"\\)"+r.substring(p.s+p.len);return this.processMapException(r,a.attr)}autoFormat(o){return o.replaceAll(/([^\(])(\d+)/g,"$1_{$2}")}}class Fo extends Sn.N{render(o,t,i){return o}revert(o){let t=o;return[["sub",/<sub>([^><]+)<\/sub>/g],["sup",/<sup>([^><]+)<\/sup>/g]].forEach(a=>{t=t.replace(a[1],(r,s)=>`[!${a[0]}:$${s}$]`)}),t}}var ji=I(60723);class No extends Sn.N{constructor(o){super(),this.cdnService=o}render(o,t,i){if(o.indexOf("[img:")<0)return o;let r=o,s=r.matchAll(/\[img:\$[a-zA-Z0-9_]+\$\]/g);for(;;){let l=s.next();if(l.done)break;let c=l.value[0];const u=c.replace("[img:$","").replace("$]","");if(t){const m=t.find(p=>p.id===u);if(m){const p=document.createElement("img");p.id=u,p.classList.add(0===u.indexOf("af")?"qv_full_a_img":0===u.indexOf("f")?"qv_full_img":"qv_img"),p.crossOrigin="anonymous",p.style.cssText=(m.cssStyle??"").replace(/position:[^;]+;?/gi,"");let f=ji.G.generateIdRequired(10),b=this.cdnService.getMyCdn(m.link);this.loadingManager.set(f,b),p.onload=()=>{this.loadingManager.delete(f)},p.onerror=()=>{this.loadingManager.delete(f)},p.src=b,r=r.replace(c,p.outerHTML)}}}return r}}var xo=I(7468),$m=I(8897),Vm=I(23353);class Ts extends Sn.N{constructor(o,t,i,a,r,s,l,c,u,m){super(),this.cdnService=o,this.commonService=t,this.callBack=i,this.apiCallbackCache=a,this.editor=r,this.onError=s,this.loadedQuestIds=l,this.apiDataCache=c,this.matrixData=u,this.discoveryService=m,this.getOne=!1,this.trans={err_empty_quest:"",err_total_question_unequal:""},this.trans.err_empty_quest=this.commonService.myTranslateInstant("lang_auto_khong_tai_duoc_cau_hoi_tu_ngan_hang")??"",this.trans.err_total_question_unequal=this.commonService.myTranslateInstant("lang_core_so_luong_cau_hoi_trong_nhom_khong_bang_nhau")??""}getSimilar(o,t,i){let a={text:o,maxRate:.99},r=ji.G.generateIdRequired(10);return this.loadingManager.set(r,o),this.discoveryService?.apiDiscoveryQuestionsInfoPost(a).subscribe(s=>{let l=[];1===s.success&&s.data&&s.data.objs&&s.data.objs.length>0&&(l=s.data.objs),this.apiCallbackCache=new Map;let c=0;for(let u of l){let m={i:c,call:this.callBack,err:this.onError};c++;let p=this.apiCallbackCache.get(r);p?p.push(m):this.apiCallbackCache.set(r,[m])}0==l.length&&this.onError&&this.onError("NO_DATA"),setTimeout(()=>{this.processApiResponse(l,r,!1)},400),this.loadingManager.delete(r)}),"Loading...|0"}render(o,t,i){let a=o.split("<br>")[0].trim(),r=a.split("=>"),s=r.length>1?+r[1].split("-")[1]:0,l=r.length>1?+r[1].split("-")[0]:0;if(!this.callBack||!/^\[@[CTGK][\-\d]+:[^\]]+\]([\.,]\[[^\]]+\])+$/.test(r[0].trim())&&!/^\[@Q[\-\d]+:[^\]]+\](\s*,\s*\[@Q[\-\d]+:[^\]]+\])*$/.test(r[0].trim()))return o;let m=r[0]+"=>"+l,p=$m.Utils.parseInclude(a);if(this.apiDataCache){let j=this.apiDataCache.get(a);if(j&&this.callBack)return setTimeout(()=>{j&&this.callBack&&this.callBack(j)},50),"Loading...|"+p.questId.join(",")}if(this.apiCallbackCache){let R={i:s,call:this.callBack,err:this.onError},j=this.apiCallbackCache.get(m);if(j)return j.push(R),"Loading...|"+p.questId.join(",");this.apiCallbackCache.set(m,[R])}let f=this.loadedQuestIds&&0==p.questId.length?this.loadedQuestIds:[],b=!1;(0==p.getNum&&p.groupId.length>0||p.idx.toString().includes("[isGroupTitle]")&&p.tag.includes("NH"))&&(b=!0,p.getNum=1,f=p.questId.length>0?f:[]),this.getOne&&p.getNum&&p.getNum>1&&(p.getNum=1);let L=ji.G.generateIdRequired(10),N=this.matrixData?.filter(R=>R.key?.split("#")[0]==m)[0];if(p.idx.toString().includes("[isGroupTitle]")&&p.tag.includes("NH")){const R=r[0]+"=>"+p.idx.toString().split("-")[1];N=this.matrixData?.filter(j=>j.key?.split("#")[0]==R)[0]}if(N)setTimeout(()=>{this.processApiResponse(N?.questions??[],m,b)},400);else{this.loadingManager.set(L,a);let R={exceptQuestionIds:f,matrix:[]};R.matrix?.push({number:p.getNum,key:m,paths:p.paths.map(ae=>({type:ae.type,id:ae.id,groupIds:ae.groupIds,tags:ae.tags,answerTypes:ae.answerTypes}))});let G=R.matrix?.filter(ae=>ae.paths?.filter(W=>"KNOWLEDGE"==W.type).length??!1).length?i?.apiQuestionsMatrixGlobalPost(R):i?.apiQuestionsMatrixPost(R);G&&G.subscribe(ae=>{let W=[];1===ae.success&&ae.data&&ae.data[0]&&ae.data[0].questions&&ae.data[0].questions.length>0&&(W=ae.data[0].questions),setTimeout(()=>{this.processApiResponse(W,m,b)},400),this.loadingManager.delete(L)})}return"Loading...|"+p.questId}setGetOne(o){this.getOne=o}processApiResponse(o,t,i){let a=o??[],r=this.apiCallbackCache?.get(t);if(r)for(const s of r){let l=this.getOne?0:s.i;if(a.length<=l){s.err&&s.err(t.includes("[@F:NH]")?this.trans.err_total_question_unequal:this.trans.err_empty_quest);continue}let c=a[l];if(!c)return;const u=this.commonService.willDeleteParseJson(c.content??"[]"),m={type:"bank",sourceId:c.id};if(u&&u.length>0&&u[0].vMetaEditor&&(m.heightLabel=u[0].vMetaEditor.heightLabel),i){let b=this.commonService.willDeleteParseJson(c.content||"[]"),L="",N={renderedStr:L,label:"",quest:{label:0,isGroup:!0,parts:[],answers:[]},answers:[],isFixGroup:"1"===c.groupType,type:c.answerType,meta:m};if(1==c.isImage&&b[0].groupUrl){let R=ji.G.generateIdRequired(10);this.loadingManager.set(R,b[0].groupUrl),this.loadImage(b[0].groupUrl,this.cdnService).then(j=>{const G=document.createElement("canvas");G.width=j.width,G.height=j.height,G.getContext("2d")?.drawImage(j,0,0,j.width,j.height);const ae=document.createElement("img");ae.src=G.toDataURL(),ae.classList.add("qv_img-group-content"),N.renderedStr=ae.outerHTML,s.call(N),this.loadingManager.delete(R)}).catch(j=>{N.renderedStr="Load image error",s.call(N),this.loadingManager.delete(R)})}else L=b[0].groupContent??"",N.renderedStr=L,s.call(N);this.apiDataCache&&this.apiDataCache.set(t+"-"+s.i,N);continue}let p=4==c.answerType&&c.answerResult?this.commonService.willDeleteParseJson(c.answerResult):[],f="text";if(1===c.isImage&&(f=this.commonService.willDeleteParseJson(c.content||"")[0].url?"image":f),"image"===f){let b=this.commonService.willDeleteParseJson(c.content||""),L=b[0].metaData,N={renderedStr:"",label:"",attachments:c.attachments,quest:{isFixAns:1==c.isFixAns,label:0,parts:[],answers:L&&L.answers?L.answers.map(j=>({label:j.label,isCorrect:-1!==c.answerResult?.indexOf(j.label),parts:[]})):(this.commonService.willDeleteParseJson(c.answerConfig??"").answer??[]).map(j=>({label:j,isCorrect:-1!==c.answerResult?.indexOf(j),parts:[]}))},strAns:p.length>0?p:void 0,answers:[],type:c.answerType,v:L?"pdf-2-0":"pdf-1-0",id:c.id,meta:m};N.originCorrectAns=N.quest.answers.filter(j=>j.isCorrect).map(j=>j.label).join(),c.tags&&(N.tag=c.tags.map(j=>({id:j.id,code:j.code,viName:j.viName,enName:j.enName})));let R=ji.G.generateIdRequired(10);this.loadingManager.set(R,b[0].url),this.loadImage(b[0].url,this.cdnService).then(j=>{this.processImageQuestion(j,b,N),c.answerMedia?this.loadImageToBase64(c.answerMedia,this.cdnService).then(G=>{N.helpRenderedStr=G,s.call(N)}):s.call(N),this.apiDataCache&&this.apiDataCache.set(t+"-"+s.i,N),this.loadingManager.delete(R)}).catch(j=>{N.renderedStr="Load image error",s.call(N),this.loadingManager.delete(R)})}else{let b=this.commonService.willDeleteParseJson(c.content||"[]"),L=this.commonService.willDeleteParseJson(c.answerConfig||"[]"),N={renderedStr:"",label:"",attachments:c.attachments,quest:{isFixAns:1==c.isFixAns,label:0,parts:[],answers:L?L.map(R=>({label:R.key,isCorrect:-1!==c.answerResult?.indexOf(R.key),parts:[]})):[]},strAns:p.length>0?p:void 0,answers:[],type:c.answerType,v:"docx",id:c.id,meta:m};N.originCorrectAns=N.quest.answers.filter(R=>R.isCorrect).map(R=>R.label).join(),b.length>0&&(N.renderedStr=b[0].content),c.answerMedia&&(N.helpRenderedStr=c.answerMedia),c.tags&&(N.tag=c.tags.map(R=>({id:R.id,code:R.code,viName:R.viName,enName:R.enName}))),N.answers=N.quest.answers.map((R,j)=>({renderedStr:L[j].content,ans:R})),this.apiDataCache&&this.apiDataCache.set(t+"-"+s.i,N),s.call(N)}}this.apiCallbackCache?.delete(t)}processApiResponseReturnData(o,t,i,a){return new Promise((r,s)=>{let c=(o??[])[0];const u=this.commonService.willDeleteParseJson(c.content??"[]"),m={type:"bank",sourceId:c.id};if(u&&u.length>0&&u[0].vMetaEditor&&(m.heightLabel=u[0].vMetaEditor.heightLabel),i){let b=this.commonService.willDeleteParseJson(c.content||"[]"),L="",N={renderedStr:L,label:"",quest:{label:0,isGroup:!0,olabel:(this.commonService.myTranslateInstant("lang_auto_cau")??"C\xe2u")+" "+a+".",parts:[],answers:[]},answers:[],isFixGroup:"1"===c.groupType,knowledgeId:c.knowledgeId,meta:m};if(1==c.isImage&&b[0].groupUrl){let R=ji.G.generateIdRequired(10);this.loadingManager.set(R,b[0].groupUrl),this.loadImage(b[0].groupUrl,this.cdnService).then(j=>{const G=document.createElement("canvas");G.width=j.width,G.height=j.height,G.getContext("2d")?.drawImage(j,0,0,j.width,j.height);const ae=document.createElement("img");ae.src=G.toDataURL(),ae.classList.add("qv_img-group-content"),N.renderedStr=ae.outerHTML,r(N)}).catch(j=>{N.renderedStr="Load image error",r(N)})}else L=b[0].groupContent??"",N.renderedStr=L,r(N)}let p=4==c.answerType&&c.answerResult?this.commonService.willDeleteParseJson(c.answerResult):[],f="text";if(1===c.isImage&&(f=this.commonService.willDeleteParseJson(c.content||"")[0].url?"image":f),"image"===f){let b=this.commonService.willDeleteParseJson(c.content||""),L=b[0].metaData,N={renderedStr:"",label:"",knowledgeId:c.knowledgeId,attachments:c.attachments,quest:{isFixAns:1==c.isFixAns,label:0,olabel:(this.commonService.myTranslateInstant("lang_auto_cau")??"C\xe2u")+" "+a+".",parts:[],answers:L&&L.answers?L.answers.map(j=>({label:j.label,isCorrect:-1!==c.answerResult?.indexOf(j.label),parts:[]})):(this.commonService.willDeleteParseJson(c.answerConfig??"").answer??[]).map(j=>({label:j,isCorrect:-1!==c.answerResult?.indexOf(j),parts:[]}))},strAns:p.length>0?p:void 0,answers:[],v:L?"pdf-2-0":"pdf-1-0",id:c.id,meta:m};N.originCorrectAns=N.quest.answers.filter(j=>j.isCorrect).map(j=>j.label).join(),c.tags&&(N.tag=c.tags.map(j=>({id:j.id,code:j.code,viName:j.viName,enName:j.enName})));let R=ji.G.generateIdRequired(10);this.loadingManager.set(R,b[0].url),this.loadImage(b[0].url,this.cdnService).then(j=>{this.processImageQuestion(j,b,N),c.answerMedia?this.loadImageToBase64(c.answerMedia,this.cdnService).then(G=>{N.helpRenderedStr=G,r(N)}):r(N),this.loadingManager.delete(R)}).catch(j=>{N.renderedStr="Load image error",this.loadingManager.delete(R)})}else{let b=this.commonService.willDeleteParseJson(c.content||"[]"),L=this.commonService.willDeleteParseJson(c.answerConfig||"[]"),N={renderedStr:"",label:"",knowledgeId:c.knowledgeId,attachments:c.attachments,quest:{isFixAns:1==c.isFixAns,olabel:(this.commonService.myTranslateInstant("lang_auto_cau")??"C\xe2u")+" "+a+".",label:0,parts:[],answers:L?L.map(R=>({label:R.key,isCorrect:-1!==c.answerResult?.indexOf(R.key),parts:[]})):[]},strAns:p.length>0?p:void 0,answers:[],v:"docx",id:c.id,meta:m};N.originCorrectAns=N.quest.answers.filter(R=>R.isCorrect).map(R=>R.label).join(),b.length>0&&(N.renderedStr=b[0]),c.answerMedia&&(N.helpRenderedStr=c.answerMedia),c.tags&&(N.tag=c.tags.map(R=>({id:R.id,code:R.code,viName:R.viName,enName:R.enName}))),N.answers=N.quest.answers.map((R,j)=>({renderedStr:L[j].content,ans:R})),r(N)}})}setCallback(o){this.callBack=o}setApiCache(o){this.apiCallbackCache=o}processImageQuestion(o,t,i){const a=t[0].metaData;if(a){const r={x:0,y:0,w:a.question.width,h:a.question.height};let s=a.question.height;a.answers&&a.answers.forEach((c,u)=>{let m="";if(1!==c.width||1!==c.height){const p=this.cropImageWithPos({x:c.x,y:c.y,w:c.width,h:c.height},{x:c.remove.x,y:c.remove.y,w:c.remove.width,h:c.remove.height},o);p.classList.add("qv_ats_image"),s>c.y&&(r.h=c.y,s=c.y),m=p.outerHTML}i.answers.push({renderedStr:m,ans:i.quest.answers[u]})}),r.h<5&&(r.h=1,r.h=1);const l=this.cropImageWithPos(r,{x:a.question.remove.x,y:a.question.remove.y,w:a.question.remove.width,h:a.question.remove.height},o,!0);l.classList.add("qv_qts_image"),i.renderedStr=l.outerHTML,i.meta&&(i.meta.heightLabel=this.calculateHeightLabel(o,a.question.remove))}else i.renderedStr=o.outerHTML}cropImageWithPos(o,t,i,a,r){const s=document.createElement("canvas");s.width=o.w,s.height=o.h;const l=s.getContext("2d"),c=document.createElement("img");l?.drawImage(i,o.x,o.y,o.w,o.h,0,0,o.w,o.h),l&&(l.fillStyle="#fff"),l?.fillRect(t.x-o.x,t.y-o.y,t.w,t.h);const m=Vm.rj.cropCanvas(s,void 0);return r?m:(c.src=m.toDataURL(),c.style.width=m.width*this.ratioImage+"px",c)}calculateHeightLabel(o,t){return this.cropImageWithPos({x:t.x,y:t.y,w:t.width,h:t.height},{x:0,y:0,w:0,h:0},o,!1,!0).height}}class La extends Sn.N{constructor(o,t){super(),this.mathMap=o,this.commonService=t}render(o,t,i){let a=o,s=a.matchAll(/\[!m:\$(([^\]]|[^\$]\])+)\$\]/g);for(;;){let l=s.next();if(l.done)break;let c=l.value[0],u=l.value[1],m=this.mathMap.get(u),p="";const f=document.createElement("span");f.classList.add("tex2jax_process"),f.classList.add("azt-mathml"),f.id=u,m&&(f.innerHTML=m.str,m.raw&&f.setAttribute("data-azt-math-raw",m.raw)),p=f.outerHTML,a=a.replace(c,p)}return a}}class za extends Sn.N{render(o,t,i){let a=this.bypassChild(o);return a=a.replaceAll(/\\\)\s*\\\(/g,""),a}bypassChild(o,t="\\(",i="\\)"){if(t.length!==i.length)return"";const a=[];let r=0;for(;;){let c=o.indexOf(t,r);if(-1===c)break;a.push("s_"+c),r=c+1}for(r=0;;){let c=o.indexOf(i,r);if(-1===c)break;a.push("e_"+c),r=c+1}a.sort(function(c,u){return parseInt(c.substr(2))-parseInt(u.substring(2))});let s=[];const l=[];return a.forEach(c=>{if("s"===c.substring(0,1))s.push(parseInt(c.substring(2)));else if(1==s.length)s=[];else{let u=s.pop();if(u){let m=parseInt(c.substring(2));l.push(u),l.push(m)}}}),l.sort(function(c,u){return c-u}).reverse().forEach(c=>{o=o.substring(0,c)+o.substring(c+t.length)}),o}}class Ba extends Sn.N{trimWithBr(o){for(o=o.trim();/^<br>|<br>$/.test(o);)o=o.replace(/^<br>|<br>$/,"").trim();return o}render(o){let t=o,i=t.split("<br>"),a=0,r=/\[![!aibucsbphl]+:!!\]/;for(let c of i){if(r.test(c)){let m=c.split(":!!]")[0].split("["),p=m[m.length-1].split(":")[0];i[a]=c.startsWith("[*")?"[* ["+p+":$"+c.replace(r,"$]").substring(2):"["+p+":$"+c.replace(r,"$]")}a++}t=i.join("<br>"),t=t.replaceAll(/\[![!aibucsbphl]+:\$\$\]/g,"");let l=t.matchAll(/\[![!aibucsbphl]+:\$(([^\$]|\$[^\]])+)\$\]/g);for(;;){let c=l.next();if(c.done)break;let u=c.value[0],m=c.value[1],p=u.split(":")[0].split("!");p.shift(),p.filter(f=>"a"==f).length>0&&(m=m.toUpperCase());for(let f=p.length-1;f>=0;f--){let b=p[f];m="hl"==b||"cl"==b?m:`<${b}>${m}</${b}>`}t=t.replace(u,m)}return this.trimWithBr(t)}}class ia extends Sn.N{render(o,t,i){let a=o,r=[[/([^<])-+([^\-><]+)-+>/g,"$1\\( \\xrightarrow[]{$2} \\)"],[/<-+([^\-><]+)-+([^>])/g,"\\( \\xleftarrow[]{$1} \\)$2"],[/([^<])--+>/g,"$1\\( \\longrightarrow \\)"],[/<--+([^>])/g,"\\( \\longleftarrow \\)$1"],[/<-+>/g,"\\( \\longleftrightarrow \\)"],[/([^<])->/g,"$1\\( \\rightarrow \\)"],[/<-([^>])/g,"\\( \\leftarrow \\)$1"]];for(let s of r)a=a.replaceAll(s[0],s[1]);return a}}class Vr extends Sn.N{render(o,t,i){let r=o.split("<br>"),s=[],l=[];for(let u of r){let m=u.replaceAll("\\|","__//__");if(m.trim().startsWith("[*")&&m.trim().endsWith("*]")){let p=m.replaceAll("\\n","<br>").replaceAll("[*","<tr><td>").replaceAll("*]","</td></tr>");p=p.replaceAll("|","</td><td>"),l.push(p)}else l.length>0&&(s.push('<table class="q-table">'+l.join("")+"</table>"),l=[]),s.push(m)}l.length>0&&s.push('<table class="q-table">'+l.join("")+"</table>");let c=s.join("<br>");return c=c.replaceAll("__//__","|"),c}static revert(o){let a=(new DOMParser).parseFromString(o,"text/html").documentElement.querySelectorAll(".q-table"),r=o;for(let s=0;s<a.length;s++){let l=a[s],c=l.outerHTML,u=l.querySelectorAll("tr"),m=[];for(let b=0;b<u.length;b++){let N=[],R=u[b].querySelectorAll("td");for(let j=0;j<R.length;j++)N.push(R[j].innerHTML.trim());m.push(N)}let p=[];for(let b of m)p.push("[* "+b.join(" | ")+" *]");let f=p.join("\n");r=r.replace(c,f)}return r}}class wa extends Sn.N{render(o,t,i){let a=o,s=a.matchAll(/\[\*?[A-H]:[^\]]+\]/g);for(;;){let u=s.next();if(u.done)break;let m=u.value[0],f=m.substring(1,m.length-1).split(":");2==f[0].length&&(f[0]=f[0].substring(1)),a=a.replace(m,`<span class="qv_string_eng_ans" style='cursor: pointer;padding: 0 5px;font-weight: bold;text-decoration: underline;position: relative;height: 40px;display: inline-block;'>${f[1]} <span style='position: absolute;top: 20px;left: 45%;'>${f[0]}</span></span>`)}return a}revert(o,t){let i=o;return i=i.replaceAll(/<span class="qv_string_eng_ans"[^>]+>([^><]+)<span[^>]+>([^><]+)<\/span><\/span>/g,"[$2:$1]"),i=i.replace("["+t+":","[*"+t+":"),i}}let Ko=(()=>{class n{}return n.EXAM_FULL=["Ph\u1ea7n 1. TR\u1eaeC NGHI\u1ec6M\nC\xe2u 1. Trong cu\u1ed9c khai th\xe1c thu\u1ed9c \u0111\u1ecba l\u1ea7n th\u1ee9 hai \u1edf \u0110\xf4ng D\u01b0\u01a1ng 1919.1929, th\u1ef1c d\xe2n Ph\xe1p t\u1eadp trung \u0111\u1ea7u t\u01b0 v\xe0o\nA. Ng\xe0nh ch\u1ebf t\u1ea1o m\xe1y.      B. C\xf4ng nghi\u1ec7p luy\u1ec7n kim.\nC. \u0110\u1ed3n \u0111i\u1ec1n cao su.        D. C\xf4ng nghi\u1ec7p h\xf3a ch\u1ea5t.\n\nC\xe2u 2. N\u1ed9i dung n\xe0o sau \u0111\xe2y ph\u1ea3n \xe1nh \u0111\xfang t\xecnh h\xecnh Vi\u1ec7t Nam sau Hi\u1ec7p \u0111\u1ecbnh Gi\u01a1nev\u01a1 n\u0103m 1954 v\u1ec1 \u0110\xf4ng D\u01b0\u01a1ng?\nA. \u0110\u1ea5t n\u01b0\u1edbc t\u1ea1m th\u1eddi b\u1ecb chia c\u1eaft l\xe0m hai mi\u1ec1n Nam, B\u1eafc. \nB. Mi\u1ec1n B\u1eafc ch\u01b0a \u0111\u01b0\u1ee3c gi\u1ea3i ph\xf3ng. \nC. Mi\u1ec1n Nam \u0111\xe3 \u0111\u01b0\u1ee3c gi\u1ea3i ph\xf3ng.\nD. C\u1ea3 n\u01b0\u1edbc \u0111\u01b0\u1ee3c gi\u1ea3i ph\xf3ng v\xe0 ti\u1ebfn l\xean x\xe2y d\u1ef1ng ch\u1ee7 ngh\u0129a x\xe3 h\u1ed9i. \n\nC\xe2u 3. Trong \u0110\xf4ng . Xu\xe2n 1953.1954, b\u1ed9 \u0111\u1ed9i ch\u1ee7 l\u1ef1c Vi\u1ec7t Nam m\u1edf chi\u1ebfn d\u1ecbch ti\u1ebfn c\xf4ng qu\xe2n Ph\xe1p \u1edf\xa0\nA. \u0110\xf4ng Kh\xea.    B. Th\xe1i Nguy\xean.     C. Th\u1ecb x\xe3 Lai Ch\xe2u.     D. Qu\u1ea3ng Tr\u1ecb. \n\nPh\u1ea7n 2. T\u1ef0 LU\u1eacN\nC\xe2u 4. (VDC) T\u1eeb n\u0103m 1952 \u0111\u1ebfn n\u0103m 1973, khoa h\u1ecdc . k\u0129 thu\u1eadt v\xe0 c\xf4ng ngh\u1ec7 c\u1ee7a Nh\u1eadt B\u1ea3n ch\u1ee7 y\u1ebfu t\u1eadp trung v\xe0o l\u0129nh v\u1ef1c.\n\n------H\u1ebeT------\nB\u1ea2NG \u0110\xc1P \xc1N\n1A 2B 3C\nH\u01b0\u1edbng d\u1eabn gi\u1ea3i\nC\xe2u 1 (NB): \nPh\u01b0\u01a1ng ph\xe1p: SGK L\u1ecbch s\u1eed 12, trang 76 \u2013 77. \nC\xe1ch gi\u1ea3i: Trong cu\u1ed9c khai th\xe1c thu\u1ed9c \u0111\u1ecba l\u1ea7n th\u1ee9 hai \u1edf \u0110\xf4ng D\u01b0\u01a1ng (1919-1929), th\u1ef1c d\xe2n Ph\xe1p t\u1eadp trung \u0111\u1ea7u t\u01b0 v\xe0o \u0111\u1ed3n \u0111i\u1ec1n cao su. \nC\xe2u 2 (NB): \nPh\u01b0\u01a1ng ph\xe1p: SGK L\u1ecbch s\u1eed 12, trang 157 - 158. \nC\xe1ch gi\u1ea3i: \u0110\u1ea5t n\u01b0\u1edbc t\u1ea1m th\u1eddi b\u1ecb chia c\u1eaft l\xe0m hai mi\u1ec1n Nam, B\u1eafc l\xe0 n\u1ed9i dung ph\u1ea3n \xe1nh \u0111\xfang t\xecnh h\xecnh Vi\u1ec7t Nam sau Hi\u1ec7p \u0111\u1ecbnh Gi\u01a1nev\u01a1 n\u0103m 1954 v\u1ec1 \u0110\xf4ng D\u01b0\u01a1ng. \nC\xe2u 3 (NB): \nPh\u01b0\u01a1ng ph\xe1p: SGK L\u1ecbch s\u1eed 12, trang 147. \nC\xe1ch gi\u1ea3i: Trong \u0110\xf4ng - Xu\xe2n 1953-1954, b\u1ed9 \u0111\u1ed9i ch\u1ee7 l\u1ef1c Vi\u1ec7t Nam m\u1edf chi\u1ebfn d\u1ecbch ti\u1ebfn c\xf4ng qu\xe2n Ph\xe1p \u1edf th\u1ecb x\xe3 Lai Ch\xe2u. \nC\xe2u 4 (NB): \nPh\u01b0\u01a1ng ph\xe1p: SGK L\u1ecbch s\u1eed 12, trang 54. \nC\xe1ch gi\u1ea3i: T\u1eeb n\u0103m 1952 \u0111\u1ebfn n\u0103m 1973, khoa h\u1ecdc - k\u0129 thu\u1eadt v\xe0 c\xf4ng ngh\u1ec7 c\u1ee7a Nh\u1eadt B\u1ea3n ch\u1ee7 y\u1ebfu t\u1eadp trung v\xe0o l\u0129nh v\u1ef1c s\u1ea3n xu\u1ea5t \u1ee9ng d\u1ee5ng d\xe2n d\u1ee5ng.","Ph\u1ea7n 1. TR\u1eaeC NGHI\u1ec6M\nC\xe2u 1.(VD) Trong cu\u1ed9c khai th\xe1c thu\u1ed9c \u0111\u1ecba l\u1ea7n th\u1ee9 hai \u1edf \u0110\xf4ng D\u01b0\u01a1ng 1919.1929, th\u1ef1c d\xe2n Ph\xe1p t\u1eadp trung \u0111\u1ea7u t\u01b0 v\xe0o\nA. Ng\xe0nh ch\u1ebf t\u1ea1o m\xe1y.      B. C\xf4ng nghi\u1ec7p luy\u1ec7n kim.\nC. \u0110\u1ed3n \u0111i\u1ec1n cao su.        D. C\xf4ng nghi\u1ec7p h\xf3a ch\u1ea5t.\n\nL\u1eddi gi\u1ea3i\nPh\u01b0\u01a1ng ph\xe1p: SGK L\u1ecbch s\u1eed 12, trang 76 \u2013 77. \nC\xe1ch gi\u1ea3i: Trong cu\u1ed9c khai th\xe1c thu\u1ed9c \u0111\u1ecba l\u1ea7n th\u1ee9 hai \u1edf \u0110\xf4ng D\u01b0\u01a1ng (1919-1929), th\u1ef1c d\xe2n Ph\xe1p t\u1eadp trung \u0111\u1ea7u t\u01b0 v\xe0o \u0111\u1ed3n \u0111i\u1ec1n cao su. \nCh\u1ecdn C\n\nC\xe2u 2.(NB) N\u1ed9i dung n\xe0o sau \u0111\xe2y ph\u1ea3n \xe1nh \u0111\xfang t\xecnh h\xecnh Vi\u1ec7t Nam sau Hi\u1ec7p \u0111\u1ecbnh Gi\u01a1nev\u01a1 n\u0103m 1954 v\u1ec1 \u0110\xf4ng D\u01b0\u01a1ng?\nA. \u0110\u1ea5t n\u01b0\u1edbc t\u1ea1m th\u1eddi b\u1ecb chia c\u1eaft l\xe0m hai mi\u1ec1n Nam, B\u1eafc. \nB. Mi\u1ec1n B\u1eafc ch\u01b0a \u0111\u01b0\u1ee3c gi\u1ea3i ph\xf3ng. \nC. Mi\u1ec1n Nam \u0111\xe3 \u0111\u01b0\u1ee3c gi\u1ea3i ph\xf3ng.\nD. C\u1ea3 n\u01b0\u1edbc \u0111\u01b0\u1ee3c gi\u1ea3i ph\xf3ng v\xe0 ti\u1ebfn l\xean x\xe2y d\u1ef1ng ch\u1ee7 ngh\u0129a x\xe3 h\u1ed9i. \n\nL\u1eddi gi\u1ea3i\nPh\u01b0\u01a1ng ph\xe1p: SGK L\u1ecbch s\u1eed 12, trang 157 - 158. \nC\xe1ch gi\u1ea3i: \u0110\u1ea5t n\u01b0\u1edbc t\u1ea1m th\u1eddi b\u1ecb chia c\u1eaft l\xe0m hai mi\u1ec1n Nam, B\u1eafc l\xe0 n\u1ed9i dung ph\u1ea3n \xe1nh \u0111\xfang t\xecnh h\xecnh Vi\u1ec7t Nam sau Hi\u1ec7p \u0111\u1ecbnh Gi\u01a1nev\u01a1 n\u0103m 1954 v\u1ec1 \u0110\xf4ng D\u01b0\u01a1ng. \nCh\u1ecdn A\n\nC\xe2u 3. Trong \u0110\xf4ng . Xu\xe2n 1953.1954, b\u1ed9 \u0111\u1ed9i ch\u1ee7 l\u1ef1c Vi\u1ec7t Nam m\u1edf chi\u1ebfn d\u1ecbch ti\u1ebfn c\xf4ng qu\xe2n Ph\xe1p \u1edf\xa0\nA. \u0110\xf4ng Kh\xea.    B. Th\xe1i Nguy\xean.     C. Th\u1ecb x\xe3 Lai Ch\xe2u.     D. Qu\u1ea3ng Tr\u1ecb.\n\nL\u1eddi gi\u1ea3i\nPh\u01b0\u01a1ng ph\xe1p: SGK L\u1ecbch s\u1eed 12, trang 147. \nC\xe1ch gi\u1ea3i: Trong \u0110\xf4ng - Xu\xe2n 1953-1954, b\u1ed9 \u0111\u1ed9i ch\u1ee7 l\u1ef1c Vi\u1ec7t Nam m\u1edf chi\u1ebfn d\u1ecbch ti\u1ebfn c\xf4ng qu\xe2n Ph\xe1p \u1edf th\u1ecb x\xe3 Lai Ch\xe2u. \nCh\u1ecdn C\n\nPh\u1ea7n 2. T\u1ef0 LU\u1eacN\nC\xe2u 4. T\u1eeb n\u0103m 1952 \u0111\u1ebfn n\u0103m 1973, khoa h\u1ecdc . k\u0129 thu\u1eadt v\xe0 c\xf4ng ngh\u1ec7 c\u1ee7a Nh\u1eadt B\u1ea3n ch\u1ee7 y\u1ebfu t\u1eadp trung v\xe0o l\u0129nh v\u1ef1c.\n\nL\u1eddi gi\u1ea3i\nPh\u01b0\u01a1ng ph\xe1p: SGK L\u1ecbch s\u1eed 12, trang 54. \nC\xe1ch gi\u1ea3i: T\u1eeb n\u0103m 1952 \u0111\u1ebfn n\u0103m 1973, khoa h\u1ecdc - k\u0129 thu\u1eadt v\xe0 c\xf4ng ngh\u1ec7 c\u1ee7a Nh\u1eadt B\u1ea3n ch\u1ee7 y\u1ebfu t\u1eadp trung v\xe0o l\u0129nh v\u1ef1c s\u1ea3n xu\u1ea5t \u1ee9ng d\u1ee5ng d\xe2n d\u1ee5ng.","Mark the letter A, B, C, or D on your answer sheet to indicate the underlined part that needs correction in each of the following questions\n\nQuestion 1.(VD) Every [A:member] of the class [B:were] invited [C:to] the party by [D:the form teacher].\n\nQuestion 2.(NB) For [A:such] a demanding job, you [B:will need] [C:qualifications], soft skills and [D:having full commitment].\n\nQuestion 3. In a restaurant, [A:if we] want to call the water, we can raise our hand and [B:wave it] [C:slight to signal] that we need [D:assistance].\n\nQuestion 4. Manufacturers [A:may use] food additives [B:for preserving], to color, to flavor, or to [C:fortify] [D:foods].\n\n\nQuestion 5. The apple ___ the table.\n\nANSWER KEYS\n1b 2d 3a 4b\n5. on | On | ON","Ph\u1ea7n 1. TR\u1eaeC NGHI\u1ec6M\nC\xe2u 1. Trong cu\u1ed9c khai th\xe1c thu\u1ed9c \u0111\u1ecba l\u1ea7n th\u1ee9 hai \u1edf \u0110\xf4ng D\u01b0\u01a1ng 1919.1929, th\u1ef1c d\xe2n Ph\xe1p t\u1eadp trung \u0111\u1ea7u t\u01b0 v\xe0o\n*A. Ng\xe0nh ch\u1ebf t\u1ea1o m\xe1y.      B. C\xf4ng nghi\u1ec7p luy\u1ec7n kim.\nC. \u0110\u1ed3n \u0111i\u1ec1n cao su.        D. C\xf4ng nghi\u1ec7p h\xf3a ch\u1ea5t.\n\nC\xe2u 2. N\u1ed9i dung n\xe0o sau \u0111\xe2y ph\u1ea3n \xe1nh \u0111\xfang t\xecnh h\xecnh Vi\u1ec7t Nam sau Hi\u1ec7p \u0111\u1ecbnh Gi\u01a1nev\u01a1 n\u0103m 1954 v\u1ec1 \u0110\xf4ng D\u01b0\u01a1ng?\nA. \u0110\u1ea5t n\u01b0\u1edbc t\u1ea1m th\u1eddi b\u1ecb chia c\u1eaft l\xe0m hai mi\u1ec1n Nam, B\u1eafc. \n*B. Mi\u1ec1n B\u1eafc ch\u01b0a \u0111\u01b0\u1ee3c gi\u1ea3i ph\xf3ng. \nC. Mi\u1ec1n Nam \u0111\xe3 \u0111\u01b0\u1ee3c gi\u1ea3i ph\xf3ng.\nD. C\u1ea3 n\u01b0\u1edbc \u0111\u01b0\u1ee3c gi\u1ea3i ph\xf3ng v\xe0 ti\u1ebfn l\xean x\xe2y d\u1ef1ng ch\u1ee7 ngh\u0129a x\xe3 h\u1ed9i. \n\nC\xe2u 3. Trong \u0110\xf4ng . Xu\xe2n 1953.1954, b\u1ed9 \u0111\u1ed9i ch\u1ee7 l\u1ef1c Vi\u1ec7t Nam m\u1edf chi\u1ebfn d\u1ecbch ti\u1ebfn c\xf4ng qu\xe2n\nPh\xe1p \u1edf\xa0\nA. \u0110\xf4ng Kh\xea.    B. Th\xe1i Nguy\xean.     *C. Th\u1ecb x\xe3 Lai Ch\xe2u.     D. Qu\u1ea3ng Tr\u1ecb. \n\nPh\u1ea7n 2. T\u1ef0 LU\u1eacN\nC\xe2u 4. T\u1eeb n\u0103m 1952 \u0111\u1ebfn n\u0103m 1973, khoa h\u1ecdc . k\u0129 thu\u1eadt v\xe0 c\xf4ng ngh\u1ec7 c\u1ee7a Nh\u1eadt B\u1ea3n ch\u1ee7 y\u1ebfu t\u1eadp trung v\xe0o l\u0129nh v\u1ef1c.","Ph\u1ea7n 1. TR\u1eaeC NGHI\u1ec6M\nC\xe2u 1. Trong cu\u1ed9c khai th\xe1c thu\u1ed9c \u0111\u1ecba l\u1ea7n th\u1ee9 hai \u1edf \u0110\xf4ng D\u01b0\u01a1ng 1919.1929, th\u1ef1c d\xe2n Ph\xe1p t\u1eadp trung \u0111\u1ea7u t\u01b0 v\xe0o\n*A. Ng\xe0nh ch\u1ebf t\u1ea1o m\xe1y.      B. C\xf4ng nghi\u1ec7p luy\u1ec7n kim.\nC. \u0110\u1ed3n \u0111i\u1ec1n cao su.        D. C\xf4ng nghi\u1ec7p h\xf3a ch\u1ea5t.\n\nC\xe2u 2. N\u1ed9i dung n\xe0o sau \u0111\xe2y ph\u1ea3n \xe1nh \u0111\xfang t\xecnh h\xecnh Vi\u1ec7t Nam sau Hi\u1ec7p \u0111\u1ecbnh Gi\u01a1nev\u01a1 n\u0103m 1954 v\u1ec1 \u0110\xf4ng D\u01b0\u01a1ng?\nA. \u0110\u1ea5t n\u01b0\u1edbc t\u1ea1m th\u1eddi b\u1ecb chia c\u1eaft l\xe0m hai mi\u1ec1n Nam, B\u1eafc. \n*B. Mi\u1ec1n B\u1eafc ch\u01b0a \u0111\u01b0\u1ee3c gi\u1ea3i ph\xf3ng. \nC. Mi\u1ec1n Nam \u0111\xe3 \u0111\u01b0\u1ee3c gi\u1ea3i ph\xf3ng.\nD. C\u1ea3 n\u01b0\u1edbc \u0111\u01b0\u1ee3c gi\u1ea3i ph\xf3ng v\xe0 ti\u1ebfn l\xean x\xe2y d\u1ef1ng ch\u1ee7 ngh\u0129a x\xe3 h\u1ed9i. \n\nC\xe2u 3. Trong \u0110\xf4ng . Xu\xe2n 1953.1954, b\u1ed9 \u0111\u1ed9i ch\u1ee7 l\u1ef1c Vi\u1ec7t Nam m\u1edf chi\u1ebfn d\u1ecbch ti\u1ebfn c\xf4ng qu\xe2n\nPh\xe1p \u1edf\xa0\nA. \u0110\xf4ng Kh\xea.    B. Th\xe1i Nguy\xean.     *C. Th\u1ecb x\xe3 Lai Ch\xe2u.     D. Qu\u1ea3ng Tr\u1ecb. \n\nPH\u1ea6N II. C\xe2u tr\u1eafc nghi\u1ec7m \u0111\xfang sai. Trong m\u1ed7i \xfd a), b), c), d) \u1edf m\u1ed7i c\xe2u, th\xed sinh ch\u1ecdn \u0111\xfang ho\u1eb7c sai.\nC\xe2u 4. M\u1ed9t cu\u1ed9c thi b\u1eafn cung c\xf3 20 ng\u01b0\u1eddi tham gia. Trong l\u1ea7n b\u1eafn \u0111\u1ea7u ti\xean c\xf3 18 ng\u01b0\u1eddi b\u1eafn tr\xfang m\u1ee5c ti\xeau. Trong l\u1ea7n b\u1eafn th\u1ee9 hai c\xf3 15 ng\u01b0\u1eddi b\u1eafn tr\xfang m\u1ee5c ti\xeau. Trong l\u1ea7n b\u1eafn th\u1ee9 ba ch\u1ec9 c\xf2n 10 ng\u01b0\u1eddi b\u1eafn tr\xfang m\u1ee5c ti\xeau.\n*a) S\u1ed1 ng\u01b0\u1eddi b\u1eafn tr\u01b0\u1ee3t m\u1ee5c ti\xeau trong l\u1ea7n \u0111\u1ea7u ti\xean l\xe0 2.\nb) S\u1ed1 ng\u01b0\u1eddi b\u1eafn tr\u01b0\u1ee3t m\u1ee5c ti\xeau trong l\u1ea7n b\u1eafn th\u1ee9 hai l\xe0 6.\nc) S\u1ed1 ng\u01b0\u1eddi b\u1eafn tr\u01b0\u1ee3t m\u1ee5c ti\xeau trong l\u1ea7n b\u1eafn th\u1ee9 nh\u1ea5t v\xe0 th\u1ee9 hai nhi\u1ec1u nh\u1ea5t l\xe0 8.\n*d) S\u1ed1 ng\u01b0\u1eddi b\u1eafn tr\xfang m\u1ee5c ti\xeau trong c\u1ea3 ba l\u1ea7n b\u1eafn \xedt nh\u1ea5t l\xe0 3.\nC\xe2u 5. L\u1edbp   c\xf3 40 h\u1ecdc sinh, trong \u0111\xf3 c\xf3 27 h\u1ecdc sinh tham gia c\xe2u l\u1ea1c b\u1ed9 b\xf3ng r\u1ed5 v\xe0 25 h\u1ecdc sinh tham gia c\xe2u l\u1ea1c b\u1ed9 b\xf3ng \u0111\xe1.\n*a) S\u1ed1 h\u1ecdc sinh tham gia c\xe2u l\u1ea1c b\u1ed9 b\xf3ng r\u1ed5 ho\u1eb7c tham gia c\xe2u l\u1ea1c b\u1ed9 b\xf3ng \u0111\xe1 nhi\u1ec1u nh\u1ea5t l\xe0 40.\nb) S\u1ed1 h\u1ecdc sinh tham gia c\u1ea3 hai c\xe2u l\u1ea1c b\u1ed9 b\xf3ng r\u1ed5 v\xe0 b\xf3ng \u0111\xe1 \xedt nh\u1ea5t l\xe0 10.\nc) S\u1ed1 h\u1ecdc sinh kh\xf4ng tham gia c\u1ea3 hai c\xe2u l\u1ea1c b\u1ed9 b\xf3ng r\u1ed5 v\xe0 b\xf3ng \u0111\xe1 \xedt nh\u1ea5t l\xe0 1.\nd) S\u1ed1 h\u1ecdc sinh kh\xf4ng tham gia c\u1ea3 hai c\xe2u l\u1ea1c b\u1ed9 b\xf3ng r\u1ed5 v\xe0 b\xf3ng \u0111\xe1 nhi\u1ec1u nh\u1ea5t l\xe0 10.\n\n---------------------------H\u1ebeT------------------------\nB\u1ea3ng \u0111\xe1p \xe1n\n1A 2B 3C\nC\xe2u 4: a)\u0110 b)S c)S d)\u0110\nC\xe2u 5: a)\u0110 b)S c)S d)S"],n.EXAM_FULL_EN=["Question 1.I used to __________ in Germany when I was 7.\nA. to live \nB. live \nC. living \nD. lived\nQuestion 2.She\u2019s used to ____________ late at night.\nA. working \nB. work \nC. to work \nD. worked\nQuestion 3.Mr. Bean has lived in Vietnam for 4 years. He _____________ the hot climate here.\nA. are used to \nB. gets used to \nC. used to \nD. uses to\nQuestion 4.Mai is used to ___________ her house by herself.\nA. clean \nB. cleaning \nC. cleaned \nD. to clean\n------THE END------\nANSWER KEYS\n1B 2A 3B 4B\nInstructions\nQuestion 1. explain for q1\nQuestion 2. explain for q2\nQuestion 3. explain for q3\nQuestion 4. explain for q4","Part 1. Answer from 1 - 2\nQuestion 1.I used to __________ in Germany when I was 7.\nA. to live \nB. live \nC. living \nD. lived\nQuestion 2.She\u2019s used to ____________ late at night.\nA. working \nB. work \nC. to work \nD. worked\nPart 2. Answer from 2 - 4\nQuestion 3.Mr. Bean has lived in Vietnam for 4 years. He _____________ the hot climate here.\nA. are used to \nB. gets used to \nC. used to \nD. uses to\nQuestion 4.Mai is used to ___________ her house by herself.\nA. clean \nB. cleaning \nC. cleaned \nD. to clean\n------THE END------\nANSWER KEYS\n1B 2A 3B 4B\nInstructions\nQuestion 1. explain for q1\nQuestion 2. explain for q2\nQuestion 3. explain for q3\nQuestion 4. explain for q4","Mark the letter A, B, C, or D on your answer sheet to indicate the underlined part that needs correction in each of the following questions\n\nQuestion 1.(VD) Every [A:member] of the class [B:were] invited [C:to] the party by [D:the form teacher].\n\nQuestion 2.(NB) For [A:such] a demanding job, you [B:will need] [C:qualifications], soft skills and [D:having full commitment].\n\nQuestion 3. In a restaurant, [A:if we] want to call the water, we can raise our hand and [B:wave it] [C:slight to signal] that we need [D:assistance].\n\nQuestion 4. Manufacturers [A:may use] food additives [B:for preserving], to color, to flavor, or to [C:fortify] [D:foods].\n\nANSWER KEYS\n1b 2d 3a 4b","Question 1.I used to __________ in Germany when I was 7.\n*A. to live \nB. live \nC. living \nD. lived\nQuestion 2.She\u2019s used to ____________ late at night.\nA. working \n*B. work \nC. to work \nD. worked\nQuestion 3.Mr. Bean has lived in Vietnam for 4 years. He _____________ the hot climate here.\nA. are used to \nB. gets used to \n*C. used to \nD. uses to\nQuestion 4.Mai is used to ___________ her house by herself.\nA. clean \nB. cleaning \nC. cleaned \n*D. to clean\n------THE END------\nInstructions\nQuestion 1. explain for q1\nQuestion 2. explain for q2\nQuestion 3. explain for q3\nQuestion 4. explain for q4","Ph\u1ea7n 1. TR\u1eaeC NGHI\u1ec6M\nC\xe2u 1. Trong cu\u1ed9c khai th\xe1c thu\u1ed9c \u0111\u1ecba l\u1ea7n th\u1ee9 hai \u1edf \u0110\xf4ng D\u01b0\u01a1ng 1919.1929, th\u1ef1c d\xe2n Ph\xe1p t\u1eadp trung \u0111\u1ea7u t\u01b0 v\xe0o\n*A. Ng\xe0nh ch\u1ebf t\u1ea1o m\xe1y.      B. C\xf4ng nghi\u1ec7p luy\u1ec7n kim.\nC. \u0110\u1ed3n \u0111i\u1ec1n cao su.        D. C\xf4ng nghi\u1ec7p h\xf3a ch\u1ea5t.\n\nC\xe2u 2. N\u1ed9i dung n\xe0o sau \u0111\xe2y ph\u1ea3n \xe1nh \u0111\xfang t\xecnh h\xecnh Vi\u1ec7t Nam sau Hi\u1ec7p \u0111\u1ecbnh Gi\u01a1nev\u01a1 n\u0103m 1954 v\u1ec1 \u0110\xf4ng D\u01b0\u01a1ng?\nA. \u0110\u1ea5t n\u01b0\u1edbc t\u1ea1m th\u1eddi b\u1ecb chia c\u1eaft l\xe0m hai mi\u1ec1n Nam, B\u1eafc. \n*B. Mi\u1ec1n B\u1eafc ch\u01b0a \u0111\u01b0\u1ee3c gi\u1ea3i ph\xf3ng. \nC. Mi\u1ec1n Nam \u0111\xe3 \u0111\u01b0\u1ee3c gi\u1ea3i ph\xf3ng.\nD. C\u1ea3 n\u01b0\u1edbc \u0111\u01b0\u1ee3c gi\u1ea3i ph\xf3ng v\xe0 ti\u1ebfn l\xean x\xe2y d\u1ef1ng ch\u1ee7 ngh\u0129a x\xe3 h\u1ed9i. \n\nC\xe2u 3. Trong \u0110\xf4ng . Xu\xe2n 1953.1954, b\u1ed9 \u0111\u1ed9i ch\u1ee7 l\u1ef1c Vi\u1ec7t Nam m\u1edf chi\u1ebfn d\u1ecbch ti\u1ebfn c\xf4ng qu\xe2n\nPh\xe1p \u1edf\xa0\nA. \u0110\xf4ng Kh\xea.    B. Th\xe1i Nguy\xean.     *C. Th\u1ecb x\xe3 Lai Ch\xe2u.     D. Qu\u1ea3ng Tr\u1ecb. \n\nPH\u1ea6N II. C\xe2u tr\u1eafc nghi\u1ec7m \u0111\xfang sai. Trong m\u1ed7i \xfd a), b), c), d) \u1edf m\u1ed7i c\xe2u, th\xed sinh ch\u1ecdn \u0111\xfang ho\u1eb7c sai.\nC\xe2u 4. M\u1ed9t cu\u1ed9c thi b\u1eafn cung c\xf3 20 ng\u01b0\u1eddi tham gia. Trong l\u1ea7n b\u1eafn \u0111\u1ea7u ti\xean c\xf3 18 ng\u01b0\u1eddi b\u1eafn tr\xfang m\u1ee5c ti\xeau. Trong l\u1ea7n b\u1eafn th\u1ee9 hai c\xf3 15 ng\u01b0\u1eddi b\u1eafn tr\xfang m\u1ee5c ti\xeau. Trong l\u1ea7n b\u1eafn th\u1ee9 ba ch\u1ec9 c\xf2n 10 ng\u01b0\u1eddi b\u1eafn tr\xfang m\u1ee5c ti\xeau.\n*a) S\u1ed1 ng\u01b0\u1eddi b\u1eafn tr\u01b0\u1ee3t m\u1ee5c ti\xeau trong l\u1ea7n \u0111\u1ea7u ti\xean l\xe0 2.\nb) S\u1ed1 ng\u01b0\u1eddi b\u1eafn tr\u01b0\u1ee3t m\u1ee5c ti\xeau trong l\u1ea7n b\u1eafn th\u1ee9 hai l\xe0 6.\nc) S\u1ed1 ng\u01b0\u1eddi b\u1eafn tr\u01b0\u1ee3t m\u1ee5c ti\xeau trong l\u1ea7n b\u1eafn th\u1ee9 nh\u1ea5t v\xe0 th\u1ee9 hai nhi\u1ec1u nh\u1ea5t l\xe0 8.\n*d) S\u1ed1 ng\u01b0\u1eddi b\u1eafn tr\xfang m\u1ee5c ti\xeau trong c\u1ea3 ba l\u1ea7n b\u1eafn \xedt nh\u1ea5t l\xe0 3.\nC\xe2u 5. L\u1edbp   c\xf3 40 h\u1ecdc sinh, trong \u0111\xf3 c\xf3 27 h\u1ecdc sinh tham gia c\xe2u l\u1ea1c b\u1ed9 b\xf3ng r\u1ed5 v\xe0 25 h\u1ecdc sinh tham gia c\xe2u l\u1ea1c b\u1ed9 b\xf3ng \u0111\xe1.\n*a) S\u1ed1 h\u1ecdc sinh tham gia c\xe2u l\u1ea1c b\u1ed9 b\xf3ng r\u1ed5 ho\u1eb7c tham gia c\xe2u l\u1ea1c b\u1ed9 b\xf3ng \u0111\xe1 nhi\u1ec1u nh\u1ea5t l\xe0 40.\nb) S\u1ed1 h\u1ecdc sinh tham gia c\u1ea3 hai c\xe2u l\u1ea1c b\u1ed9 b\xf3ng r\u1ed5 v\xe0 b\xf3ng \u0111\xe1 \xedt nh\u1ea5t l\xe0 10.\nc) S\u1ed1 h\u1ecdc sinh kh\xf4ng tham gia c\u1ea3 hai c\xe2u l\u1ea1c b\u1ed9 b\xf3ng r\u1ed5 v\xe0 b\xf3ng \u0111\xe1 \xedt nh\u1ea5t l\xe0 1.\nd) S\u1ed1 h\u1ecdc sinh kh\xf4ng tham gia c\u1ea3 hai c\xe2u l\u1ea1c b\u1ed9 b\xf3ng r\u1ed5 v\xe0 b\xf3ng \u0111\xe1 nhi\u1ec1u nh\u1ea5t l\xe0 10.\n\n---------------------------H\u1ebeT------------------------\nB\u1ea3ng \u0111\xe1p \xe1n\n1A 2B 3C\nC\xe2u 4: a)\u0110 b)S c)S d)\u0110\nC\xe2u 5: a)\u0110 b)S c)S d)S"],n})();var tr=I(32965);let ks=(()=>{class n{constructor(t){this.cdnService=t}renderContent(t){const i=JSON.parse(t.questionContent||"{}");if("image"==(t.isImage&&i[0].url?"image":"text"))return`<img width="700" src="${this.cdnService.getMyCdn(i[0].url)}">`;{const r=/@\[\][^@\[\]]+@\[\]/g;let s=`<p>${i[0].content.replace(r,"[h\xecnh]")}</p>`;return JSON.parse(t.answerConfig||"[]").forEach(c=>{s+=`<p><b>${c.key}.</b>${c.content.replace(r,"[h\xecnh]")}</p>`}),s}}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(tr.E))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Wr=I(82228),Ss=I(50749),un=I(71518),Zc=I(19662),Ar=I(59694),ya=I(78953),Yn=I(46558);let Ha=(()=>{class n{convertQuestions(t,i,a){return new Promise(r=>{this.reset(),t.forEach(s=>{const l=this.commonService.willDeleteParseJson(s.answerConfig||"[]");s.questionContent?.includes("<img ")&&this.replaceImageCdnInContent(s,"questionContent"),s.questionText?.includes("<img ")&&this.replaceImageCdnInContent(s,"questionText"),s.answerMedia?.includes("<img ")&&this.replaceImageCdnInContent(s,"answerMedia"),s.mediaMeta?.includes("<img ")&&this.replaceImageCdnInContent(s,"mediaMeta"),l.forEach(c=>{c.content.includes("<img ")&&this.replaceImageCdnInContent(c,"content")}),this.actionRunAfterConvert.push(()=>{s.answerConfig=JSON.stringify(l)})}),this.imageMaps.forEach(s=>{this.taskConvertBase64ToCanvas.addTask(this,this.startConvertCanvas,[s])}),this.taskConvertBase64ToCanvas.start().then(s=>{if(s.errs.length>0)a(s.errs,void 0);else{let c=0;const u=[],m=/width:\s*([\d.]+)\s*(pt)/,p=/height:\s*([\d.]+)\s*(pt)/,f=8/3,b=70,L=170,N=()=>{const R=document.createElement("canvas");R.width=this.sizeDefaultCanvas,R.height=this.sizeDefaultCanvas;const j=R.getContext("2d");j&&(j.fillStyle="white",j.fillRect(0,0,this.sizeDefaultCanvas,this.sizeDefaultCanvas)),u.push({cdn:"",cX:0,cY:0,canvas:R,imgs:[]})};N(),s.datas.forEach((R,j)=>{var G=u[u.length-1];let ae=R.canvas.width,W=R.canvas.height;const le=R.base.match(m),ve=R.base.match(p);let ce=Number(le?le[1]??"0":"0"),te=Number(ve?ve[1]??"0":"0");const Se=R.canvas.width/ce*100;Se>b&&Se<=L&&R.canvas.height/te*100>b&&Se<=L||!ce||!te?(ce=0,te=0):(ae=ce*f,W=te*f),G.cX+4+ae>this.sizeDefaultCanvas?(G.cX=4,G.cY+=c+4,c=0):G.cX+=4,G.cY+4+W>this.sizeDefaultCanvas&&(N(),G=u[u.length-1]);var se=G.canvas.getContext("2d");G.imgs.push({x:G.cX,y:G.cY,width:ae,height:W,index:j,widthPt:ce,heightPt:te}),se?.drawImage(R.canvas,0,0,R.canvas.width,R.canvas.height,G.cX,G.cY,ae,W),G.cX+=ae,c=c<W?W:c}),u[0].imgs.length>0&&u.forEach(R=>{this.taskUploadImage.addTask(this,this.startUploadFile,[R])}),this.taskUploadImage.start().then(R=>{if(R.errs.length>0)a(s.errs,void 0);else{let j=!0;R.datas.forEach(G=>{G.imgs.forEach(ae=>{const W=s.datas[ae.index];if(W){const le={link:G.cdn,data:{x:ae.x,y:ae.y,width:ae.width,height:ae.height,widthPt:ae?.widthPt,heightPt:ae?.heightPt}};W.objs.forEach(ve=>{if(ve[W.path])if(this.commonService.isJson(ve[W.path])){const te=this.commonService.willDeleteParseJson(ve[W.path]);Object.prototype.hasOwnProperty.call(te,"renderedStr")?(te.renderedStr=te.renderedStr.replace(W.base,`@[]${JSON.stringify(le)}@[]`),ve[W.path]=JSON.stringify(te)):ve[W.path]=ve[W.path].replace(W.base,`@[]${JSON.stringify(le)}@[]`)}else ve[W.path]=ve[W.path].replace(W.base,`@[]${JSON.stringify(le)}@[]`);else j=!1})}})}),j?(this.actionRunAfterConvert.forEach(G=>{G()}),t.forEach((G,ae)=>{let W=this.commonService.willDeleteParseJson(G.mediaMeta||"{}"),le=i[ae];const ve={id:0,name:G.name,extension:"text",content:G.questionContent,groupContent:W.renderedStr,metaData:{isFixAns:Number(G.isFixAns),forcedFixAns:!1,groupType:G.groupType?Number(G.groupType):void 0}};le&&(ve.vMetaEditor=le.meta),G.questionContent=JSON.stringify([ve])}),r()):a(s.errs,void 0,!0)}})}})})}reset(){this.imageMaps=[],this.actionRunAfterConvert=[]}replaceImageCdnInContent(t,i){var a=t[i];if(this.commonService.isJson(t[i])){const l=this.commonService.willDeleteParseJson(t[i]);Object.prototype.hasOwnProperty.call(l,"renderedStr")&&(a=l.renderedStr)}let r=a.matchAll(this.pattern_image);for(;;){let l=r.next();if(l.done)break;let c=l.value[0];var s=this.imageMaps.findIndex(u=>u.base===c&&u.path===i);-1===s?this.imageMaps.push({base:c,cdn:"",data:null,objs:[t],path:i,canvas:document.createElement("canvas")}):this.imageMaps[s].objs.push(t)}}startConvertCanvas(t){return new Promise((i,a)=>{const r=new Image;r.crossOrigin="anonymous",r.onload=()=>{let l=1;if(r.width>this.sizeDefaultCanvas&&(l=this.sizeDefaultCanvas/r.width),r.height>this.sizeDefaultCanvas){let u=this.sizeDefaultCanvas/r.height;u<l&&(l=u)}t.canvas.width=r.width*l,t.canvas.height=r.height*l,t.canvas.getContext("2d")?.drawImage(r,0,0,r.width,r.height,0,0,t.canvas.width,t.canvas.height),i(t)},r.onerror=()=>{t.canvas.width=1,t.canvas.height=1;const l=t.canvas.getContext("2d");l&&(l.fillStyle="white",l.fillRect(0,0,1,1)),i(t)};let s=this.pattern_base64.exec(t.base);null!=s?r.src=s[0]:a(new Error("l\u1ed7i regex"))})}startUploadFile(t){return new Promise((i,a)=>{const r=this.dataURLtoFile(t.canvas.toDataURL("image/png",1));(0,ht.hv)(r).then(s=>{this.apiUploadService.uploadToCdnProgressForExamQuestionContent(s).subscribe(l=>{l.type!=V.dt.UploadProgress&&(1==l.success&&l.data?i({...t,cdn:l.data.url||""}):a(new Error(this.commonService.translateToKeyParam("lang_auto_khong_upload_duoc_anh_vui_long_thu_lai_sau_loi",l.message??"none"))))})})})}dataURLtoFile(t){let i=this.getFileName(t);for(var a=t.split(","),r=a[0].match(/:(.*?);/),s=atob(a[1]),l=s.length,c=new Uint8Array(l);l--;)c[l]=s.charCodeAt(l);return new File([c],i,{type:r&&r.length>0?r[1]:"png"})}getFileName(t){var i=t.split("").reverse().join(""),a=i.indexOf(";"),r=i.indexOf("/",a);return i.substring(a,r).split("").reverse().join("")}constructor(t,i){this.commonService=t,this.apiUploadService=i,this.sizeDefaultCanvas=1100,this.actionRunAfterConvert=[],this.imageMaps=[],this.pattern_base64=/data:image[^"'\\]+/i,this.pattern_image=/<img[^>]+data:image[^>]+>/g,this.taskConvertBase64ToCanvas=new Ge.Q(50,{function:(a,r)=>{this.callbackBase64ToCanvas&&this.callbackBase64ToCanvas(a,r)}},0),this.taskUploadImage=new Ge.Q(10,{function:(a,r)=>{this.callbackUploadImage&&this.callbackUploadImage(a,r)}},0)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(Yn.z),e.LFG(Wr.W))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var nr=I(16287),oa=I(88489),qi=I(2783),Ud=I(94126),_r=I(19402);let Xr=(()=>{class n{constructor(t,i){this.commonService=t,this.classroomService=i}redirectUrlAddParamClassroom(t,i="",a=[]){const r=this.commonService.getMyQueryParam("classroomId"),s=this.commonService.getMyQueryParam("indexSession");r||s?this.commonService.myNavigationWithQueryString(t,i+this.commonService.getCurrentQueryString(i?"&":"?",a)):this.commonService.myNavigation(t)}redirectUrlAddParamClassroomReload(t){const i=this.commonService.getMyQueryParam("classroomId"),a=this.commonService.getMyQueryParam("indexSession");let r=-1===t.indexOf("?")?"?":"";t=i||a?t+this.commonService.getCurrentQueryString(r):t,window.location.href=this.commonService.getLocalRouter(t)}getBackLinkUrlParamClassroom(t){const i=this.commonService.getMyQueryParam("classroomId");return i?`/admin/student/classroom-details/${i}/3`+this.commonService.getCurrentQueryString("?"):t}getProgramTraining(){const t=Number(this.commonService.getMyQueryParam("classroomId")??"0");return new ee.y(i=>{this.classroomService.apiClassroomsClassroomIdProgramsProgramIdGet(t,0).subscribe(a=>{a&&i.next(a)})})}findCurrentAndNextSession(t,i){return t.reduce((r,s,l)=>(r.found&&(r.nextIndex=l,r.nextObj=s,r.found=!1),s.id===i&&(r.currentIndex=l,r.currentObj=s,r.found=l<t.length-1),r),{currentIndex:void 0,currentObj:void 0,nextIndex:void 0,nextObj:void 0,found:!1})}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(Yn.z),e.LFG(_r.um))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var fr=I(27161),qn=I(56307),Pu=I(3309);let Ul=(()=>{class n{constructor(t,i){this.aiElearningService=t,this.questionService=i,this.isShowKnowledgeUnit=!1,this.knowledgeUnitObjs=[]}getListKnowledgeUnit(t,i){return new ee.y(a=>Z.N.whiteListLevelToShowKnowledge.includes(t)&&Z.N.whiteListSubjectToShowKnowledge.includes(i)?(this.isShowKnowledgeUnit=!0,this.knowledgeUnitObjs.length?(a.next(!0),void a.complete()):void this.aiElearningService.aiApiV1ElearningGetKnowledgeTreeGet(t,i).subscribe({next:r=>{(r.nodes??[]).forEach(l=>{let c=new qn.cA({text:l.title,value:l.knowledgeId,collapsed:!1,children:l.children.length?this.makeTreeViewChildData(l.children):[]});(c.children&&c.children.length&&!c.value||c.value)&&this.knowledgeUnitObjs.push(c)}),setTimeout(()=>{a.next(!0),a.complete()},0)},error:r=>{a.next(!1),a.complete()}})):(a.next(!0),void a.complete()))}updateKnowledge(t,i){return new ee.y(a=>{this.questionService.apiQuestionUpdateQuestionKnowledgePost({questionId:t,knowledgeId:i}).subscribe(r=>{r.success?(a.next(!0),a.complete()):(a.next(!1),a.complete())})})}makeTreeViewChildData(t){let i=[];return t.forEach(a=>{let r=new qn.cA({text:a.title,value:a.knowledgeId,collapsed:!1,children:a.children.length?this.makeTreeViewChildData(a.children):[]});(r.children&&r.children.length&&!r.value||r.value)&&i.push(r)}),i}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(Pu.Mq),e.LFG(un.aE))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const es=["popupConfirm"],Qu=["mobileEditor"],jl=["popupOnlyImageEditor"];function Wm(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",30)(1,"button",31),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.openDialogSpitPoint())}),e.O4$(),e.TgZ(2,"svg",32),e._UZ(3,"rect",33)(4,"line",34)(5,"line",35)(6,"line",36),e.qZA(),e._uU(7),e.ALo(8,"mytranslate"),e.qZA()()}2&n&&(e.xp6(7),e.hij(" ",e.lcZ(8,1,"lang_testbank_update_exam_split_points")," "))}function Xm(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",37),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.conf.showInfomationQuests.show=!0)}),e.O4$(),e.TgZ(1,"svg",38),e._UZ(2,"circle",39)(3,"line",40)(4,"line",41),e.qZA(),e.kcU(),e.TgZ(5,"span",42),e._uU(6),e.ALo(7,"mytranslate"),e.qZA()()}2&n&&(e.xp6(6),e.Oqu(e.lcZ(7,1,"lang_auto_thong_tin_de_thi")))}function ql(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",43),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.conf.showErrorsQuests.show=!0)}),e.O4$(),e.TgZ(1,"svg",38),e._UZ(2,"path",44)(3,"path",45)(4,"path",46)(5,"path",47),e.qZA(),e.kcU(),e.TgZ(6,"span",42),e._uU(7),e.ALo(8,"replace"),e.ALo(9,"mytranslate"),e.qZA()()}if(2&n){const t=e.oxw(3);e.xp6(7),e.Oqu(e.Dn7(8,1,e.lcZ(9,5,"lang_auto_co_n_loi_khong_the_luu"),"_n_",t.errs.length.toString()))}}const Vh=function(n){return{height40:n}};function ep(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",48)(1,"div",49)(2,"span",50),e._UZ(3,"lucide-icon",51),e.qZA(),e.TgZ(4,"span",42),e._uU(5),e.ALo(6,"mytranslate"),e.qZA(),e.TgZ(7,"input",52),e.NdJ("ngModelChange",function(a){e.CHM(t);const r=e.oxw(3);return e.KtG(r.conf.inputMoveToQuestionValue=a)})("keyup.enter",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.handleGotoQuestionView())})("focus",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.handleSetStatusTooltipQuestionView(!0))})("focusout",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.handleSetStatusTooltipQuestionView(!1))}),e.qZA(),e.TgZ(8,"button",53),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.handleGotoQuestionView())}),e._uU(9),e.ALo(10,"mytranslate"),e.qZA()()()}if(2&n){const t=e.oxw(3);e.Q6J("ngClass",e.VKq(9,Vh,!t.conf.inputMoveToQuestion)),e.xp6(5),e.Oqu(e.lcZ(6,5,"lang_azt_go_to_question_number")),e.xp6(2),e.Q6J("ngModel",t.conf.inputMoveToQuestionValue)("min",1),e.xp6(2),e.hij(" ",e.lcZ(10,7,"lang_auto_den")," ")}}function jd(n,o){if(1&n&&(e.TgZ(0,"div",23),e._UZ(1,"div",24),e.TgZ(2,"div",25),e.YNc(3,Wm,9,3,"div",26),e.YNc(4,Xm,8,3,"div",27),e.YNc(5,ql,10,7,"div",28),e.YNc(6,ep,11,11,"div",29),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(3),e.Q6J("ngIf",!t.editQuestId),e.xp6(1),e.Q6J("ngIf",t.lstQuest.length>0&&0==t.editQuestId),e.xp6(1),e.Q6J("ngIf",t.errs.length>0),e.xp6(1),e.Q6J("ngIf",0==t.editQuestId)}}function tp(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div",64)(2,"button",65),e.NdJ("click",function(){const r=e.CHM(t).index,s=e.oxw(4);return e.KtG(!!s.attachFiles&&s.attachFiles.splice(r,1))}),e.TgZ(3,"mat-icon",66),e._uU(4,"close"),e.qZA()(),e.TgZ(5,"span",67),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw(4);return e.KtG(s.onShowFile(r,-1))}),e.TgZ(6,"span",68),e._uU(7),e.qZA()()()()}if(2&n){const t=o.$implicit;e.xp6(6),e.Q6J("title",t.name),e.xp6(1),e.Oqu(t.name)}}function Wh(n,o){if(1&n&&(e.TgZ(0,"div",61)(1,"div",62),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.YNc(4,tp,8,2,"div",63),e.qZA()),2&n){const t=e.oxw(3);e.xp6(2),e.hij(" ",e.lcZ(3,2,"lang_auto_danh_sach_file_dinh_kem")+":"," "),e.xp6(2),e.Q6J("ngForOf",t.attachFiles)}}function Xh(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",69)(1,"question-dropper",70),e.NdJ("onDropFile",function(a){e.CHM(t);const r=e.oxw(3);return e.KtG(r.onDropFile(a))}),e.qZA()()}}function eA(n,o){if(1&n&&(e.TgZ(0,"div",54)(1,"div",55)(2,"div",56)(3,"div",57),e._UZ(4,"azt-dynamic-hook",58),e.qZA(),e.YNc(5,Wh,5,4,"div",59),e.YNc(6,Xh,2,0,"div",60),e.qZA()()()),2&n){const t=e.oxw(2);e.xp6(4),e.Q6J("content",t.text),e.xp6(1),e.Q6J("ngIf",t.attachFiles.length>0),e.xp6(1),e.Q6J("ngIf",0==t.editQuestId)}}function tA(n,o){if(1&n&&(e.TgZ(0,"mat-icon",80),e.ALo(1,"mytranslate"),e.ALo(2,"mytranslate"),e._uU(3," push_pin "),e.qZA()),2&n){const t=e.oxw(2).$implicit;e.s9C("matTooltip",t.isFixGroup?e.lcZ(1,1,"lang_auto_cau_hoi_trong_nhom_dang_duoc_co_dinh"):e.lcZ(2,3,"lang_auto_dap_an_trong_cau_hoi_dang_duoc_co_dinh"))}}function nA(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",81)(1,"span",82),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.TgZ(4,"span",83),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2).$implicit,r=e.oxw(2);return e.KtG(r.setFixGroup(a))}),e._uU(5),e.ALo(6,"mytranslate"),e.ALo(7,"mytranslate"),e.ALo(8,"mytranslate"),e.qZA()()}if(2&n){const t=e.oxw(2).$implicit;e.xp6(2),e.Oqu(e.lcZ(3,3,"tieu_de_nhom")),e.xp6(3),e.AsE(" ",t.isFixGroup?e.lcZ(6,5,"lang_auto_bo_co_dinh"):e.lcZ(7,7,"lang_auto_co_dinh")," ",e.lcZ(8,9,"lang_auto_cau_trong_nhom")," ")}}function iA(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",86)(1,"div",87),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3).$implicit,r=e.oxw(2);return e.KtG(r.editorFocus(a.quest.parts))}),e._UZ(2,"azt-dynamic-hook",58),e.qZA()()}if(2&n){const t=e.oxw(3).$implicit;e.xp6(1),e.Gre("tex2jax_process box-content quest-ver-",t.v,""),e.xp6(1),e.Q6J("content",t.renderedStr)}}function Dc(n,o){if(1&n&&(e.TgZ(0,"div",84)(1,"div"),e.YNc(2,iA,3,4,"div",85),e.qZA()()),2&n){const t=e.oxw(2).$implicit;e.xp6(2),e.Q6J("ngIf",!t.err)}}function np(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",88)(1,"app-quest-header",89),e.NdJ("onChangeQuest",function(a){e.CHM(t);const r=e.oxw(2).index,s=e.oxw(2);return e.KtG(s.onChangeQuest(a,r))})("onRandomQuest",function(){e.CHM(t);const a=e.oxw(2).index,r=e.oxw(2);return e.KtG(r.onRandomOne(a))})("onApplyAllTag",function(a){e.CHM(t);const r=e.oxw(2).index,s=e.oxw(2);return e.KtG(s.onApplyAllTag(a,r))})("onError",function(a){e.CHM(t);const r=e.oxw(4);return e.KtG(r.commonService.snackError(a))})("onLabelClick",function(a){e.CHM(t);const r=e.oxw(4);return e.KtG(r.editorFocus(a))})("onHotKeyPointSync",function(a){e.CHM(t);const r=e.oxw(2).index,s=e.oxw(2);return e.KtG(s.setPointBelow(a,r))})("onExtraInfo",function(a){e.CHM(t);const r=e.oxw(4);return e.KtG(r.setExtra(a))})("onCut",function(){e.CHM(t);const a=e.oxw(2).$implicit,r=e.oxw(2);return e.KtG(r.onCut(a))})("onDel",function(){e.CHM(t);const a=e.oxw(2).$implicit,r=e.oxw(2);return e.KtG(r.onDel(a))})("onCopy",function(){e.CHM(t);const a=e.oxw(2).$implicit,r=e.oxw(2);return e.KtG(r.onCopy(a))}),e.qZA()()}if(2&n){const t=e.oxw(2),i=t.$implicit,a=t.index,r=e.oxw(2);e.xp6(1),e.Q6J("q",i)("notOnlyQuestEdit",!r.editQuestId)("index",a)("questionTags",r.questionTags)}}function Fu(n,o){if(1&n&&e._UZ(0,"azt-question-knowledge-unit",92),2&n){const t=e.oxw(3).$implicit,i=e.oxw(2);let a,r,s;e.Q6J("knowledgeId",null!==(a=t.knowledgeId)&&void 0!==a?a:0)("questionContent",t.renderedStr)("questionId",i.editQuestId)("levelId",null!==(r=i.levelId)&&void 0!==r?r:0)("subjectId",null!==(s=i.subjectId)&&void 0!==s?s:0)}}function ip(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.label)}}function Uc(n,o){if(1&n&&(e.TgZ(0,"span"),e.YNc(1,ip,2,1,"span",94),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",t.isCorrect)}}function Ja(n,o){if(1&n&&(e.TgZ(0,"div")(1,"span"),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.YNc(4,Uc,2,1,"span",63),e.qZA()),2&n){const t=e.oxw(5).$implicit;e.xp6(2),e.Oqu(e.lcZ(3,2,"lang_auto_dap_an_dung")+":"),e.xp6(2),e.Q6J("ngForOf",t.quest.answers)}}function oA(n,o){if(1&n&&(e.TgZ(0,"span",100),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.Oqu(t)}}function jc(n,o){if(1&n&&(e.TgZ(0,"div",97)(1,"span",98),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.YNc(4,oA,2,1,"span",99),e.qZA()),2&n){const t=e.oxw(5).$implicit;e.xp6(2),e.Oqu(e.lcZ(3,2,"lang_auto_dap_an")+":"),e.xp6(2),e.Q6J("ngForOf",t.strAns)}}function Rl(n,o){1&n&&(e.TgZ(0,"span",105),e._UZ(1,"div",106)(2,"div",107),e.qZA())}function qc(n,o){1&n&&(e.TgZ(0,"span",105),e._UZ(1,"div",108)(2,"div",109),e.qZA())}const Nu=function(n){return{answerType:n}},Ir=function(n){return{"an-true":n}};function Zu(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",101),e.YNc(1,Rl,3,0,"span",102),e.YNc(2,qc,3,0,"span",102),e.ALo(3,"isTrueFalseAnswer"),e.TgZ(4,"div",103),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw(5).$implicit,l=e.oxw(2);return e.KtG(l.setCorrectAns(s,r.ans))}),e.ALo(5,"mytranslate"),e._uU(6),e.ALo(7,"isTrueFalseAnswer"),e.qZA(),e.TgZ(8,"div",104),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw(7);return e.KtG(s.editorFocus(r.ans.parts))}),e._UZ(9,"azt-dynamic-hook",58),e.qZA()()}if(2&n){const t=o.$implicit,i=e.oxw(5).$implicit,a=e.oxw(2);let r;e.xp6(1),e.Q6J("ngIf",t.ans.isCorrect),e.xp6(1),e.Q6J("ngIf",!t.ans.isCorrect&&e.lcZ(3,8,e.VKq(14,Nu,i.type))),e.xp6(2),e.s9C("matTooltip",a.showTooltip?e.lcZ(5,10,"lang_auto_cick_de_chon_lam_dap_an_dung"):void 0),e.Q6J("matTooltipPosition","right")("ngClass",e.VKq(16,Ir,t.ans.isCorrect)),e.xp6(2),e.hij(" ",e.lcZ(7,12,e.VKq(18,Nu,i.type))?(t.ans.label+(null!==(r=t.ans.olabel)&&void 0!==r?r:"")).toLowerCase():t.ans.label," "),e.xp6(2),e.Q6J("ngClass",e.VKq(20,Ir,t.ans.isCorrect)),e.xp6(1),e.Q6J("content",t.renderedStr)}}function ts(n,o){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,Ja,5,4,"div",94),e.YNc(2,jc,5,4,"div",95),e.YNc(3,Zu,10,22,"div",96),e.qZA()),2&n){const t=e.oxw(4).$implicit;e.Gre("box-ans quest-ans-ver-",t.v,""),e.xp6(1),e.Q6J("ngIf","pdf-1-0"==t.v),e.xp6(1),e.Q6J("ngIf",4==t.type&&t.strAns),e.xp6(1),e.Q6J("ngForOf",t.answers)}}const Ca=function(n){return{"padding-mobile":n}};function ir(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",110)(1,"div",111)(2,"span"),e._uU(3),e.ALo(4,"mytranslate"),e.qZA()(),e.TgZ(5,"div",112),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(4).$implicit,r=e.oxw(2);return e.KtG(r.editorFocus(a.quest.help))}),e._UZ(6,"azt-dynamic-hook",58),e.qZA()()}if(2&n){const t=e.oxw(4).$implicit,i=e.oxw(2);e.Gre("box-help quest-help-ver-",t.v,""),e.Q6J("ngClass",e.VKq(8,Ca,i.isMobile)),e.xp6(3),e.Oqu(e.lcZ(4,6,"lang_auto_huong_dan_giai_upper")),e.xp6(3),e.Q6J("content",t.helpRenderedStr)}}function Pa(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",86)(1,"div",87),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3).$implicit,r=e.oxw(2);return e.KtG(r.editorFocus(a.quest.parts))}),e._UZ(2,"azt-dynamic-hook",58),e.qZA(),e.YNc(3,ts,4,6,"div",22),e.YNc(4,ir,7,10,"div",93),e.qZA()}if(2&n){const t=e.oxw(3).$implicit;e.xp6(1),e.Gre("tex2jax_process box-content quest-ver-",t.v,""),e.xp6(1),e.Q6J("content",t.renderedStr),e.xp6(1),e.Q6J("ngIf",!t.quest.isGroup),e.xp6(1),e.Q6J("ngIf",t.helpRenderedStr)}}function Mr(n,o){if(1&n&&(e._UZ(0,"div",113),e.ALo(1,"safeContentQuestion")),2&n){const t=e.oxw(3).$implicit;e.Q6J("innerHTML",e.lcZ(1,1,t.err),e.oJD)}}function op(n,o){if(1&n&&(e.TgZ(0,"div",84)(1,"div"),e.YNc(2,Fu,1,5,"azt-question-knowledge-unit",90),e.YNc(3,Pa,5,6,"div",85),e.YNc(4,Mr,2,3,"div",91),e.qZA()()),2&n){const t=e.oxw(2).$implicit,i=e.oxw(2);e.xp6(2),e.Q6J("ngIf",i.editQuestId),e.xp6(1),e.Q6J("ngIf",!t.err),e.xp6(1),e.Q6J("ngIf",t.err)}}function ap(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",114)(1,"button",115),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2).$implicit,r=e.oxw(2);return e.KtG(r.showFeedbackQuestionDialog(a))}),e.ALo(2,"mytranslate"),e._UZ(3,"lucide-icon",116),e.qZA()()}2&n&&(e.xp6(1),e.s9C("matTooltip",e.lcZ(2,1,"lang_auto_bao_loi")))}function Du(n,o){if(1&n&&(e.TgZ(0,"div",55),e.YNc(1,tA,4,5,"mat-icon",74),e._UZ(2,"div",75),e.ALo(3,"safeContentQuestion"),e.YNc(4,nA,9,11,"div",76),e.YNc(5,Dc,3,1,"div",77),e.YNc(6,np,2,4,"div",78),e.YNc(7,op,5,3,"div",77),e.YNc(8,ap,4,3,"div",79),e.qZA()),2&n){const t=e.oxw().$implicit,i=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.isFixGroup||t.quest.isFixAns),e.xp6(1),e.Q6J("innerHTML",e.lcZ(3,7,i.errorQuestionView.makeErr(t,i.lstQuest)),e.oJD),e.xp6(2),e.Q6J("ngIf",t.quest.isGroup),e.xp6(1),e.Q6J("ngIf",t.quest.isGroup),e.xp6(1),e.Q6J("ngIf",!t.quest.isGroup),e.xp6(1),e.Q6J("ngIf",!t.quest.isGroup),e.xp6(1),e.Q6J("ngIf",t.id&&"azota"==i.type)}}function aA(n,o){1&n&&e._UZ(0,"div",117)}const Rc=function(n){return{height:n}};function Vi(n,o){if(1&n&&(e.TgZ(0,"div",71),e.YNc(1,Du,9,9,"div",72),e.YNc(2,aA,1,0,"div",73),e.qZA()),2&n){const t=o.$implicit,i=o.index,a=e.oxw(2);e.hYB("id","quest",t.quest.isGroup?"-g":"","-",t.rawIndexQuestion,""),e.Q6J("ngStyle",e.VKq(6,Rc,a.lstQuest.length<a.maxQuestEnableLazy?"auto":t.lazyQuestView&&t.lazyQuestView.curHeight?t.lazyQuestView.curHeight:"200px")),e.uIk("data-idx-quest",i),e.xp6(1),e.Q6J("ngIf",a.lstQuest.length<a.maxQuestEnableLazy||(null==t.lazyQuestView?null:t.lazyQuestView.show)),e.xp6(1),e.Q6J("ngIf",!(a.lstQuest.length<a.maxQuestEnableLazy||null!=t.lazyQuestView&&t.lazyQuestView.show))}}function rp(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",126),e.NdJ("click",function(){e.CHM(t),e.oxw(3);const a=e.MAs(5);return e.KtG(a.click())}),e.O4$(),e.TgZ(1,"svg",38),e._UZ(2,"path",127)(3,"polyline",128)(4,"line",129),e.qZA(),e.kcU(),e.TgZ(5,"span",42),e._uU(6,"Upload File"),e.qZA()()}}function Uu(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",130),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.openLibrary())}),e.O4$(),e.TgZ(1,"svg",38),e._UZ(2,"line",131)(3,"line",132),e.qZA(),e.kcU(),e.TgZ(4,"span",42),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()()}2&n&&(e.xp6(5),e.hij(" ",e.lcZ(6,1,"lang_auto_chon_tu_ngan_hang")," "))}function zl(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",133),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.openMathEditor())}),e.O4$(),e.TgZ(1,"svg",38),e._UZ(2,"path",134),e.qZA(),e.kcU(),e.TgZ(3,"span",42),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()()}2&n&&(e.xp6(4),e.hij(" ",e.lcZ(5,1,"lang_auto_chen_cong_thuc")," "))}function Hl(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",135),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.togglePromptCreateExam())}),e.TgZ(1,"span",136),e._UZ(2,"img",137),e.ALo(3,"convertCdnLinkOfGitHub"),e.qZA(),e.TgZ(4,"span"),e._uU(5,"AzotaAI"),e.qZA()()}2&n&&(e.xp6(2),e.Q6J("src",e.lcZ(3,1,"images/azotaAI.png"),e.LSH))}function zc(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"a",155),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(4);return e.KtG(a.format())}),e.O4$(),e.TgZ(2,"svg",147),e._UZ(3,"rect",156)(4,"rect",157)(5,"path",158),e.qZA(),e.kcU(),e.TgZ(6,"span"),e._uU(7),e.ALo(8,"mytranslate"),e.qZA()()()}2&n&&(e.xp6(7),e.hij(" ",e.lcZ(8,1,"lang_auto_format")," "))}function sp(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"a",146),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(4);return e.KtG(a.saveLocal())}),e.O4$(),e.TgZ(2,"svg",38),e._UZ(3,"path",127)(4,"polyline",159)(5,"line",160),e.qZA(),e.kcU(),e.TgZ(6,"span"),e._uU(7),e.ALo(8,"mytranslate"),e.qZA()()()}2&n&&(e.xp6(7),e.hij(" ",e.lcZ(8,1,"lang_auto_luu_ve_may")," "))}function lp(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",30)(1,"button",138),e.O4$(),e.TgZ(2,"svg",139),e._UZ(3,"circle",140)(4,"circle",141)(5,"circle",142),e.qZA()(),e.kcU(),e.TgZ(6,"mat-menu",null,143)(8,"div",144)(9,"ul",145)(10,"li")(11,"a",146),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.randomAllAgain())}),e.O4$(),e.TgZ(12,"svg",147),e._UZ(13,"path",148)(14,"path",149)(15,"path",150)(16,"path",151),e.qZA(),e.kcU(),e.TgZ(17,"span"),e._uU(18),e.ALo(19,"mytranslate"),e.qZA()()(),e.YNc(20,zc,9,3,"li",94),e.YNc(21,sp,9,3,"li",94),e.TgZ(22,"li")(23,"label",152),e.NdJ("click",function(a){return a.stopPropagation()}),e.O4$(),e.TgZ(24,"svg",38),e._UZ(25,"path",134),e.qZA(),e.kcU(),e.TgZ(26,"span"),e._uU(27),e.ALo(28,"mytranslate"),e.qZA(),e.TgZ(29,"div",153)(30,"input",154),e.NdJ("change",function(a){return e.CHM(t),e.oxw(3).onOffChemistry(),e.KtG(a.stopPropagation())}),e.qZA()()()()()()()()}if(2&n){const t=e.MAs(7),i=e.oxw(3);e.xp6(1),e.Q6J("matMenuTriggerFor",t),e.xp6(17),e.hij(" ",e.lcZ(19,6,"lang_auto_lay_ngau_nhien_lai_toan_bo")," "),e.xp6(2),e.Q6J("ngIf","user"==i.type),e.xp6(1),e.Q6J("ngIf",0==i.editQuestId),e.xp6(6),e.hij(" ",e.lcZ(28,8,"lang_core_bat_cong_thuc_hoa_hoc")," "),e.xp6(3),e.Q6J("checked",i.isChemistry)}}function Hc(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",161)(1,"div",162),e._uU(2),e.ALo(3,"mytranslate"),e.TgZ(4,"a",163),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.loadExample(1,a.commonService.getCurrentLang()))}),e._uU(5),e.ALo(6,"mytranslate"),e.qZA(),e._uU(7," | "),e.TgZ(8,"a",164),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.loadExample(2,a.commonService.getCurrentLang()))}),e._uU(9),e.ALo(10,"mytranslate"),e.qZA(),e._uU(11," | "),e.TgZ(12,"a",165),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.loadExample(3,a.commonService.getCurrentLang()))}),e._uU(13),e.ALo(14,"mytranslate"),e.ALo(15,"mytranslate"),e.qZA(),e._uU(16," | "),e.TgZ(17,"a",166),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.loadExample(4,a.commonService.getCurrentLang()))}),e._uU(18),e.ALo(19,"mytranslate"),e.qZA(),e._uU(20," | "),e.TgZ(21,"a",167),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.loadExample(5,a.commonService.getCurrentLang()))}),e._uU(22),e.ALo(23,"mytranslate"),e.ALo(24,"mytranslate"),e.qZA()()()}2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,6,"lang_auto_noi_dung_mau")+": "," "),e.xp6(3),e.Oqu(e.lcZ(6,8,"lang_auto_mau")+" 1"),e.xp6(4),e.Oqu(e.lcZ(10,10,"lang_auto_mau")+" 2"),e.xp6(4),e.hij(" ",e.lcZ(14,12,"lang_auto_mau")+" 3 ("+e.lcZ(15,14,"lang_core_there_is_fill_in_the_blank")+")"," "),e.xp6(5),e.Oqu(e.lcZ(19,16,"lang_auto_mau")+" 4"),e.xp6(4),e.hij(" ",e.lcZ(23,18,"lang_auto_mau")+" 5 ("+e.lcZ(24,20,"lang_exam_template_has_true_false")+")"," "))}function gr(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",168)(1,"azt-ai-chat-box",169),e.NdJ("close",function(a){e.CHM(t);const r=e.oxw(3);return e.KtG(r.closeDialogPromptCreateExam(a))})("createQuestion",function(a){e.CHM(t);const r=e.oxw(3);return e.KtG(r.aiCreateQuestion(a))}),e.qZA()()}if(2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("questList",t.lstQuest)}}function Jl(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div",118)(2,"div",24),e.YNc(3,rp,7,0,"div",119),e.YNc(4,Uu,7,3,"div",120),e.YNc(5,zl,6,3,"div",121),e.YNc(6,Hl,6,3,"div",122),e.YNc(7,lp,31,10,"div",26),e.qZA()(),e.TgZ(8,"azt-monaco-editor",123),e.NdJ("onStartProcessFile",function(a){e.CHM(t);const r=e.oxw(2);return e.KtG(r.processFile(a))})("onInit",function(a){e.CHM(t);const r=e.oxw(2);return e.KtG(r.onEditorInitComplete(a))}),e.qZA(),e.YNc(9,Hc,25,22,"div",124),e.YNc(10,gr,2,1,"div",125),e.qZA()}if(2&n){const t=e.oxw(2);e.Gre("relative col-editor tex2jax_ignore ",t.isMobile?"azt-order-1":"",""),e.xp6(3),e.Q6J("ngIf","user"==t.type),e.xp6(1),e.Q6J("ngIf",0==t.editQuestId&&"user"==t.type),e.xp6(1),e.Q6J("ngIf","user"==t.type),e.xp6(1),e.Q6J("ngIf",0==t.editQuestId&&"user"==t.type&&t.willShowAIBox),e.xp6(1),e.Q6J("ngIf",0==t.editQuestId),e.xp6(1),e.Akn(e.VKq(15,Rc,t.conf.heightContent+"px")),e.Q6J("config",t.aztLangConfig)("readOnly","azota"==t.type)("editorApiService",t.editorApiService),e.xp6(1),e.Q6J("ngIf",0==t.editQuestId),e.xp6(1),e.Q6J("ngIf",t.showPromptCreateExam)}}function ju(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",15)(1,"div",16),e.YNc(2,jd,7,4,"div",17),e.TgZ(3,"div",18),e.NdJ("scroll",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onScrollQuest())})("mousedown",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onMouseDown())})("mouseup",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onMouseUp())}),e.YNc(4,eA,7,3,"div",19),e.YNc(5,Vi,3,8,"div",20),e._UZ(6,"div",21),e.qZA()(),e.YNc(7,Jl,11,17,"div",22),e.qZA()}if(2&n){const t=e.oxw();e.xp6(1),e.Gre("col-questions box bg-slate-100 dark:bg-darkmode-400 rounded-none ",t.isMobile?"azt-order-2":"",""),e.xp6(1),e.Q6J("ngIf",t.lstQuest.length>0),e.xp6(2),e.Q6J("ngIf",""!=t.text||t.attachFiles.length>0),e.xp6(1),e.Q6J("ngForOf",t.lstQuest),e.xp6(2),e.Q6J("ngIf",""!=t.aztLangConfig)}}function cp(n,o){if(1&n&&(e.TgZ(0,"div",170)(1,"div",171)(2,"div",172)(3,"span",173),e._UZ(4,"azt-loading-ui"),e.qZA()(),e.TgZ(5,"div",174),e._uU(6),e.ALo(7,"mytranslate"),e.qZA()()()),2&n){const t=e.oxw();e.xp6(6),e.Oqu(e.lcZ(7,1,t.conf.logConfig.msg))}}function Jc(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"similar-quest",175),e.NdJ("onClose",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.conf.similarQuest.show=!1)})("onInsert",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.replaceQuest(a))}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("inp",t.lstQuestSimilar)}}function qd(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"show-errors-quests",176),e.NdJ("onClose",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.conf.showErrorsQuests.show=!1)}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("lstErrors",t.errs)}}function rA(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"show-info-quests",177),e.NdJ("onClose",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.conf.showInfomationQuests.show=!1)})("onNextQuestion",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.onInfoQuestionNexQuestion(a))}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("lstQuest",t.lstQuest)}}function Rd(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"only-image-editor",178),e.NdJ("onClose",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.conf.imageEditor.show=!1)})("onPushImage",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.onPushImageAction(a))}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("el_target",t.conf.imageEditor.el)}}function zd(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",179)(1,"main-config-homework",180),e.NdJ("onBack",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.conf.showEditor())}),e.qZA()()}}function qu(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",181)(1,"app-info-general",182),e.NdJ("onBack",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.conf.showEditor())}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("listQuestionIdCreateByAI",t.listQuestionIdCreateByAI)}}function up(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",181)(1,"azt-config-share-document",183),e.NdJ("onBack",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.conf.showEditor())}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("type",t.shareTypeDocument.exam)("isCreateQuestionToEditor",!0)}}function Lr(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",184)(1,"app-test-finder",185),e.NdJ("closeTestFinder",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.closeLibrary(a))}),e.qZA()()}}const Kc=function(n){return{hiddenIpt:n}};class ns{constructor(o){this.commonService=o,this.check=!1}makeErr(o,t,i){const a=this.isFullNoPoint(t);if(!this.check)return;if(!o.quest.isGroup&&(!o.point||o.point<=0)&&!a){let s=this.commonService.myTranslateInstant("lang_auto_vui_long_nhap_diem_cho_cau_hoi"),l=this.commonService.myTranslateInstant("lang_auto_nay");return i?s:`<span class="question-standalone-is-invalid-validation">${s} ${l}</span>`}let r=o.answers.filter(s=>s.ans.isCorrect).length>0;if(!o.quest.isGroup&&1==o.type&&!r){let s=this.commonService.myTranslateInstant("lang_auto_vui_long_nhap_dap_an_cho_cau_hoi"),l=this.commonService.myTranslateInstant("lang_auto_nay");return i?s:`<span class="question-standalone-is-invalid-validation">${s} ${l}</span>`}}makeFirstErr(o){this.check=!0;for(const t of o)if(void 0!==this.makeErr(t,o,void 0))return t}isFullNoPoint(o){return o.filter(t=>!t.point).length===o.length}}let Br=(()=>{class n extends xe.Q{openDialogSpitPoint(){const t=this.splitPointService.countQuestionsByType(this.lstQuest,jt.multipleChoice),i=this.splitPointService.countQuestionsByType(this.lstQuest,jt.trueFalse),a=this.splitPointService.countQuestionsByType(this.lstQuest,jt.fill),r=this.splitPointService.countQuestionsByType(this.lstQuest,jt.essay),s={multipleQuestion:t,multiplePoint:parseFloat(this.splitPointService.countQuestionPointsByType(this.lstQuest,jt.multipleChoice)).toFixed(4),trueFalseQuestion:i,trueFalsePoint:parseFloat(this.splitPointService.countQuestionPointsByType(this.lstQuest,jt.trueFalse)).toFixed(4),fillQuestion:a,fillPoint:parseFloat(this.splitPointService.countQuestionPointsByType(this.lstQuest,jt.fill)).toFixed(4),essayQuestion:r,essayPoint:parseFloat(this.splitPointService.countQuestionPointsByType(this.lstQuest,jt.essay)).toFixed(4)};this.sAztDialogService.open(Mn,{data:s,width:"500px",restoreFocus:!1}).afterClosed().subscribe(c=>{if(c){const u=Number(c.multiplePoint??0)/t,m=Number(c.trueFalsePoint??0)/i,p=Number(c.fillPoint??0)/a,f=Number(c.essayPoint??0)/r;this.lstQuest.forEach(b=>{switch(b.type){case jt.multipleChoice:b.point=u;break;case jt.trueFalse:b.point=m;break;case jt.fill:b.point=p;break;case jt.essay:b.point=f}})}})}handleGotoQuestionView(){if(!document.getElementById("quest-"+this.conf.inputMoveToQuestionValue))return this.showErrorSnack(this.commonService.myTranslateInstant("lang_auto_khong_tim_thay_cau_can_di_chuyen_den")??"");this.revealQuest(this.conf.inputMoveToQuestionValue)}onInfoQuestionNexQuestion(t){this.conf.showInfomationQuests.show=!1,this.conf.inputMoveToQuestionValue=t,this.handleGotoQuestionView()}handleSetStatusTooltipQuestionView(t){this.conf.inputMoveToQuestionTooltip=t}handleFileDrop(t){""!==this.text?this.onDropFile(t[0]):this.processFile(t[0])}convertPartItem(t){return 0===t.length?"":/^\[@((.)+)\]/g.test(t[0].text??"")?t[0].lineIdx+"_____"+t[0].text?.split("]=>")[0]+"]":""}convertQuestion(t,i,a,r,s){return new Promise(l=>{const c=[];a.answers.forEach(L=>{c.push({key:L.ans.label.includes(")")?L.ans.label.replace(")",""):L.ans.label,content:L.renderedStr})});let m=this.sAztAnswerTypeService.isTrueFalseAnswer({answerType:a.type})?a.answers.filter(L=>!0===L.ans.isCorrect):a.answers.find(L=>!0===L.ans.isCorrect),p="";p=Array.isArray(m)?JSON.stringify(m.map(L=>L.ans.label)):m?JSON.stringify([m.ans.label]):a.strAns&&a.strAns?.length>0?JSON.stringify(a.strAns):void 0;const b={name:this.commonService.myTranslateInstant("lang_auto_cau_hoi_tu_editor")+" "+(r+1),answerType:a.type,categoryId:0,questionContent:a.renderedStr,questionText:a.renderedStr,answerConfig:JSON.stringify(c),groupId:s,answerResult:p,totalQuestion:this.lstQuest.length,version:"4",isFixAns:a.quest.isFixAns?1:0,isImage:1,answerMedia:a.helpRenderedStr,mediaMeta:JSON.stringify(t),metadata:JSON.stringify(a?.meta),groupType:t?.isFixGroup?"1":void 0,tags:a.tag&&a.tag.length?a.tag.map(L=>L.code??""):[],__path:this.convertPartItem(a.quest.parts)};i.exam?.questionObj.listQuestions?.push(b),i.exam?.rootQuests.push(a),a.audio&&(0,ht.F0)(a.audio.type)?a.attachments&&"[]"!==a.attachments?(b.attachments=a.attachments,l()):this.apiUploadService.uploadToCdnProgressForTestbankQuestionAttachment(a.audio).subscribe(L=>{L.type!=V.dt.UploadProgress&&(1==L.success?b.attachments=JSON.stringify([L.data]):this.showErrorSnack("lang_auto_upload_file_audio_that_bai"),l())}):l()})}uploadAttHomeworkFile(t,i,a){return new Promise(r=>{this.apiUploadService.uploadToCdnForHomework(a).subscribe(s=>{1==s.success&&s.data&&(i.push(s.data),i.length===this.attachFiles.length&&t.homework&&(t.homework.files=JSON.stringify(i)),r())})})}uploadFileProcess(t){return new Promise(i=>{this.apiUploadService.uploadToCdnProgressForTestbankDocx(t).subscribe(a=>{a.type!=V.dt.UploadProgress&&(a.success&&a.data?.url?(this.cdnExamFile=a.data?.url??"",this.sendTrackUploadFileToApi(this.cdnExamFile).subscribe(()=>{i()})):i())})})}sendTrackUploadFileToApi(t){return new ee.y(i=>{let a={categoryId:this.conf.cur_cateId?Number(this.conf.cur_cateId):void 0,cdnExamFile:t,turnUuid:this.uploadTurnUuid??""};this.examFileService.apiExamFileSaveObjPost(a).subscribe(r=>{i.next(!0),i.complete()})})}saveAction(){let t=this.lstQuest.filter(a=>this.sAztAnswerTypeService.isTrueFalseAnswer({answerType:a.type})&&!a.quest.isGroup),i=t.find(a=>!a.answers.length||4!=a.answers.length);if(t&&i)return i.answers.length&&(this.editorFocus(i.answers[0].ans.parts),this.revealCurrentQuest()),void this.showErrorSnack("lang_true_false_exam_not_enough_answer");if(this.lstQuest.length>0){const a=this.errorQuestionView.makeFirstErr(this.lstQuest);if(null!=a)return this.commonService.snackError(this.errorQuestionView.makeErr(a,this.lstQuest,!0)||""),void this.revealQuest(a.quest.label+"")}this.loadingManager.size>0?this.popupConfirm?.startConfirm("lang_auto_msg_confirm_watting_loading").then(a=>{a&&(this.stopAudio(),this.save())}):(this.stopAudio(),this.save())}parseAzt(t){let i=this;var a=new FileReader;a.readAsText(t,"UTF-8"),a.onload=r=>{let l=JSON.parse(a.result??"");if(!l.text)return i.showErrorSnack("lang_auto_file_khong_dung_dinh_dang"),void this.conf.logConfig.stopStatus();i.images=l.imgs,i.mathMap=new Map;for(let c of l.maths)i.mathMap.set(c[0],c[1]);i.extraMap=new Map;for(let c of l.infos)i.extraMap.set(c[0],c[1]);i.aztEditor?._editor.setValue(l.text),this.conf.logConfig.stopStatus()},a.onerror=r=>{i.showErrorSnack("lang_auto_file_khong_dung_dinh_dang"),this.conf.logConfig.stopStatus()}}saveCdn(t){return new Promise(i=>{if(t.exam?.examObj){let a=new Date,r=`user-${this.userService.getUserObj().id}-de-azota-${a.getDate()}${a.getMonth()+1}${a.getFullYear()}-${a.getTime()}.azt`;const s=this.generateFileAzt();if(s){const l=new File([s],r,{type:"text/plain"});this.apiUploadService.uploadToCdnForExamEditor(l).subscribe(c=>{c.type!=V.dt.UploadProgress&&(1==c.success&&c.data&&t.exam?.examObj&&(t.exam.examObj.cdnEditorFile=c.data.url??""),i())})}else i()}else i()})}saveLocal(){let t=new Date,i=`de-azota-${t.getDate()}${t.getMonth()+1}${t.getFullYear()}-${t.getTime()}.azt`;const a=this.generateFileAzt();a&&(window.navigator.msSaveOrOpenBlob?window.navigator.msSaveBlob(a,i):this.commonService.downloadFileByUrl(window.URL.createObjectURL(a),i))}generateFileAzt(){let t=this.aztEditor?._editor.getValue().trim()??"";if(""!=t){let i=[],a=[];for(let l of this.mathMap)i.push(l);for(let l of this.extraMap)a.push(l);let s=JSON.stringify({text:t,imgs:this.images,maths:i,infos:a});return new Blob([s],{type:"text/plain"})}return null}makeExpandInfoObj(){const i=this.lstQuest.map(a=>a.quest.olabel?.replace(/[`~!@#$%^&*()_|+\-=?;:'",.<>\{\}\[\]\\\/]/gi,"").replace(/[0-9 ]/g,"")).filter(a=>a&&a.length>0);return i.length>0?{label:(a=i[0]??this.commonService.myTranslateInstant("lang_auto_cau")??"",a.charAt(0).toUpperCase()+a.slice(1))}:{};var a}save(){if(this.lstQuest.length>0||""!==this.text){let t=this.commonService.myTranslateInstant("lang_auto_dang_xu_ly_du_lieu");if(this.conf.logConfig.setStatus(t),this.isEditGroup&&this.lstQuest.length)this.waitDestroy(this.questionService.apiQuestionsIdGroupPut(this.editQuestId,{groupContent:this.lstQuest[0].renderedStr,isFixGroup:!!this.lstQuest[0].isFixGroup}).subscribe(a=>{if(this.conf.logConfig.stopStatus(),1==a.success){let r=this.conf.getBackLink();this.commonService.myNavigationBySpecialQueryString(r),this.successStatusObj("lang_core_sua_nhom_cau_hoi_thanh_cong",!0)}else this.errorStatusObj("lang_core_sua_nhom_cau_hoi_khong_thanh_cong",!0)}));else{const i=new Ge.Q(10,{function:(r,s)=>{this.conf.logConfig.setStatus(`${t} ${Math.floor(r/s*100)}%`)}},0),a={};if(this.lstQuest.length>0){this.conf.logConfig.setStatus("lang_auto_dang_chuan_bi_du_lieu_de_thi");const s=(this.lstQuest[0]?.quest?.isGroup?this.lstQuest[1]:this.lstQuest[0])?.quest?.label??1;let l,c=[],u=!0;a.exam={examObj:{categoryId:Number(this.conf.cur_cateId),name:this.title.value,startQuestionIndex:s,cdnExamFile:this.cdnExamFile},questionObj:{listQuestions:[]},examConfig:[],rootQuests:[]};const m=this.errorQuestionView.isFullNoPoint(this.lstQuest);let f=nt(10,this.lstQuest.filter(L=>!L?.quest?.isGroup).length),b=!1;this.lstQuest.forEach((L,N)=>{if(this.sAztAnswerTypeService.isTrueFalseAnswer({answerType:L.type})&&L.answers.forEach(R=>R.ans.label=R.ans.label.toUpperCase().replace(/\(|\)/g,"")),b||(b=!(!(L?.quest?.group&&L?.quest?.group>1)||L?.quest?.isGroup||1!=L?.quest?.label)),L?.quest?.isGroup)l=L,u=!1;else{u||(u=!0,c.push(N-(c.length+1)));let R=this.commonService.myTranslateInstant("lang_auto_cau_hoi_tu_editor"),j=this.parseExtra(L?.quest?.parts[0].text??""),G=this.extraMap.get(j.id);const ae={name:R+" "+(N-c.length+1),point:m?f[N-c.length]??1:L.point??1,oldId:G?.oldId};a.exam?.examConfig.push(ae),i.addTask(this,this.convertQuestion,[l,a,L,N-c.length,c.length])}}),0==this.editQuestId&&i.addTask(this,this.saveCdn,[a]),a.exam.examObj.firstInGroupIndexes=JSON.stringify(c),a.exam.examObj.expandInfoObj=this.makeExpandInfoObj(),a.exam.examObj.resetQuestionIndex=b}else if(a.homework={name:this.title.value,content:this.text,deadline:void 0,files:void 0,mustVerified:void 0,whenShowAnswer:void 0,categoryId:void 0,classroomIds:void 0},this.attachFiles.length>0){const r=[];this.attachFiles.forEach(s=>{i.addTask(this,this.uploadAttHomeworkFile,[a,r,s])})}i.start().then(()=>{if(this.editQuestId){let r={exceptQuestionIds:[],matrix:[]};r.matrix?.push({paths:[{type:"QUEST",id:this.editQuestId}],number:1,key:`[@${this.editQuestId}:Question]=>0`}),this.questionService.apiQuestionsMatrixPost(r).subscribe(s=>{if(1==s.success&&s.data&&s.data.length>0&&s.data[0].questions&&1===s.data[0].questions.length){const l=s.data[0].questions[0];if(a.exam?.questionObj.listQuestions&&1==a.exam.questionObj.listQuestions.length){let c=this.commonService.myTranslateInstant("lang_auto_xay_ra_loi_trong_qua_trinh_xu_ly_hinh_anh_cua_de")??"";this.questionSaveService.convertQuestions(a.exam.questionObj.listQuestions,a.exam.rootQuests,(u,m=c)=>{this.conf.logConfig.stopStatus(),this.showErrorSnack(m)}).then(()=>{if(a.exam?.questionObj.listQuestions&&1==a.exam.questionObj.listQuestions.length){const m=a.exam.questionObj.listQuestions[0],p=this.commonService.myParseJson(m.questionContent??""),f=this.commonService.myParseJson(l.content??"");if(!(p&&p[0]&&f&&f[0]))return this.conf.logConfig.stopStatus(),void this.showErrorSnack(s.message??"");Object.prototype.hasOwnProperty.call(f[0],"groupContent")&&(p[0].groupContent=f[0].groupContent),Object.prototype.hasOwnProperty.call(f[0],"groupUrl")&&(p[0].groupContent=`@[]{"link":"${f[0].groupUrl}","data":${JSON.stringify({x:0,y:0,width:-1,height:-1})}}@[]`),Object.prototype.hasOwnProperty.call(f[0],"name")&&(p[0].name=f[0].name),Object.prototype.hasOwnProperty.call(f[0],"id")&&(p[0].id=f[0].id),Object.prototype.hasOwnProperty.call(f[0],"metaData")&&(p[0].metaData=f[0].metaData),Object.prototype.hasOwnProperty.call(l,"groupId")&&(m.groupId=l.groupId),Object.prototype.hasOwnProperty.call(l,"groupType")&&(m.groupType=l.groupType),m.questionContent=JSON.stringify(p),delete m.__path,this.questionService.apiQuestionsIdPut(this.editQuestId,{id:m.id??0,groupId:m.groupId??0,name:m.name,metadata:m.metadata,isImage:m.isImage,questionContent:m.questionContent,answerMedia:m.answerMedia,questionText:m.questionText,answerType:m.answerType??1,answerConfig:m.answerConfig,coordinates:m.coordinates,answerResult:m.answerResult,tags:m.tags,mediaId:m.mediaId??0,mediaMeta:m.mediaMeta,attachments:m.attachments,version:m.version,isFixAns:m.isFixAns??0,groupType:m.groupType}).subscribe(b=>{if(this.conf.logConfig.stopStatus(),1==b.success){this.showSuccessSnack("lang_auto_chinh_sua_cau_hoi_thanh_cong");let L=this.conf.getBackLink();this.commonService.myNavigationBySpecialQueryString(L)}else this.showErrorSnack(b.message??"")})}})}}else this.showErrorSnack(s.message??"")})}else this.conf.logConfig.stopStatus(),this.editorOutputDataService.setOutputData(a),this.editorOutputDataService.redirectToConfig(this.conf)})}}else this.showErrorSnack("lang_auto_khong_tim_thay_noi_dung_can_luu")}cancelAction(){this.popupConfirm?.startConfirm("lang_auto_confirm_destroy_content").then(t=>{t&&location.reload()})}openLibrary(){this.conf.startLibrary=!0}switchFilePdfProcess(t){this.editorOutputDataService.setFileProcess(t);const a="/admin/testbank/create-file-pdf-ver2/"+(null!=this.conf.cur_cateId?this.conf.cur_cateId:0),r=`?backto=${encodeURIComponent("/admin/testbank/azota-editor/"+(null!=this.conf.cur_cateId?this.conf.cur_cateId:0))}`;this.paramClassroomService.redirectUrlAddParamClassroom(a,r,["backto"])}switchFileXlsxProcess(t){this.editorOutputDataService.setFileProcess(t);const a="/admin/testbank/create-exam-by-excel/"+(null!=this.conf.cur_cateId?this.conf.cur_cateId:0),r=`?backto=${encodeURIComponent("/admin/testbank/azota-editor/"+(null!=this.conf.cur_cateId?this.conf.cur_cateId:0))}`;this.paramClassroomService.redirectUrlAddParamClassroom(a,r,["backto"])}clearData(){this.images=[],this.editedImages=new Map,this.lstQuest=[],this.text="",this.attachFiles=[],this.renderCache=new Map,this.apiCallbackCache=new Map,this.apiDataCache=new Map,this.fillQuestCache=new Map,this.loadingManager=new Map,this.editorParsedData=void 0,this.curQuest=void 0,this.errs=[],this.curMathId=1,this.curExtraId=1,this.mathMap=new Map,this.extraMap=new Map,this.matrixLoadedData=void 0}processFile(t){if(this.editQuestId>0&&!(0,ht.Or)(t.type))return void this.showErrorSnack("lang_chi_co_the_tai_file_anh_vui_long_dam_bao_tai_dung_dinh_dang_anh");this.conf.logConfig.setStatus("lang_auto_dang_cho_xu_ly_file");let i=t.name.split(".").pop();return"docx"==i?.trim().toLowerCase()?(this.clearData(),this.title=new h.NI(t.name,{nonNullable:!0}),void this.parseDocx(t)):"azt"==i?.trim().toLowerCase()?(this.clearData(),this.title=new h.NI(t.name,{nonNullable:!0}),void this.parseAzt(t)):(0,ht.Or)(t.type)?(this.insertImgFromFile(t),void this.conf.logConfig.stopStatus()):void this.fileParser.start(t).then(a=>{"pdf"===a.type?this.switchFilePdfProcess(t):"docx"===a.type?(this.title=new h.NI(t.name,{nonNullable:!0}),this.images=[],a.data.maps.forEach(r=>{this.images.push(r)}),this.aztEditor&&this.aztEditor._editor.setValue(a.data.str.join("\n"))):"xlsx"===a.type?this.switchFileXlsxProcess(t):(this.showErrorSnack("lang_auto_dinh_dang_file_khong_ho_tro_vui_long_tai_file_dot"),this.conf.logConfig.stopStatus())}).catch(()=>{this.showErrorSnack("lang_auto_dinh_dang_file_khong_ho_tro_vui_long_tai_file_dot"),this.conf.logConfig.stopStatus()})}attachImg(t){let i=this.commonService.myTranslateInstant("lang_auto_nhap_noi_dung");this.aztEditor?._editor.setValue(i),this.onDropFile(t),this.conf.logConfig.stopStatus()}openFile(t){this.isFirstScroll=!1,this.processFile(t.target.files[0]),t.target.value=null}parseDocx(t){let i=new Ln(this.commonService);this.uploadFileProcess(t).then(()=>{this.isUploadFileDocx=!0}),i.handleFileSelect(t,a=>{this.images=[],this.mathMap.clear();let r=[],s=new Map;for(let f of a.data)if("img"==f.type)this.images.push({id:f.key,link:f.value,cssStyle:f.cssStyle}),f.cssStyle&&f.cssStyle.split(";").length>2&&r.push([`^\\[img:\\$${f.key}\\$\\]`,`[img:$${f.key}$]\n`]);else if("mathml"==f.type){let b=+f.key.split("_")[1];this.mathMap.set(f.key,{id:b,str:f.value,raw:f.docx,lineIdx:0,startCol:0,endCol:0});let L=Zn.isPureTextMathML(f.value);""!=L&&s.set(f.key,L),b>this.curMathId&&(this.curMathId=b)}this.curMathId++;let l=[],c=-1;for(let f of a.lines){if(c++,0==f.length)continue;let b="";if(Array.isArray(f[0])&&Array.isArray(f[f.length-1])&&Array.isArray(f[Math.floor(f.length/2)])){let N=a.data.filter(j=>j.position==c&&"table"==j.type)[0];b=N&&+N.borderBottomSize>0||l.length>0&&l[l.length-1].startsWith("[*")?"[* "+f.map(j=>j.map(G=>G.join("").replaceAll("\n","\\n").replaceAll("|","\\|")).join("\\n")).join(" | ")+" *]":f.map(j=>j.map(G=>G.join("")).join("\n")).join(" \t ")}else b=f.join("");for(let N of r)b=b.replaceAll(new RegExp(N[0],"g"),N[1]);for(let N of s)b=b.replaceAll("[!m:$"+N[0]+"$]",N[1]);let L=b.split("\n");for(let N of L)l.push(N)}(new Nn).process(l),K.ExamParser.fixNoEnd(l);let m=this.processStyle(l);this.processMath(m),this.lstQuest=[],this.curQuest=void 0,this.aztEditor?.setPosition(1,0);let p=m.join("\n");this.aztEditor?._editor.setValue(p),this.conf.logConfig.stopStatus()},(a,r,s)=>{let l=this.commonService.myTranslateInstant("lang_auto_dang_xu_ly");this.conf.logConfig.setStatus(`${l} ${s}...(${a}/${r})`)},a=>{this.showErrorSnack("lang_auto_dinh_dang_file_khong_ho_tro_vui_long_tai_file_dot"),this.conf.logConfig.stopStatus()})}format(){let i=(this.aztEditor?._editor.getValue()??"").split("\n"),a=i.length,r=i.length>0?i[i.length-1].length:0,s=this.aztEditor?.azotaIntel?.examIntel;s?.setLines(i);let l=s?.parse()??[],c=[],u=[],m=[],p=-999;for(let f of l){if(f.isGroup){let G=f.parts.map(ae=>ae.text??"").join("\n");c.push(G);continue}-999==p&&(p=f.label-1),f.label-p>1&&(f.olabel=f.olabel?.replace(f.label+"",p+1+""),f.label=p+1);let b=K.Utils.capitalizeFirstLetter(f.olabel??f.label+"")+" ",L=b+f.parts.map(G=>G.text??"").join("\n"),N=0==f.answers.length||f.answers[0].isInline?void 0:f.answers.map(G=>(G.isCorrect?"   *":"    ")+G.label+". "+G.parts.map(ae=>ae.text??"").join("\n").trim()).join("\n"),R=f.help?b+f.help.map(G=>G.text??"").join("\n"):void 0,j=f.strAns?b+f.strAns:void 0;c.push(L),N&&c.push(N),R&&u.push(R),j&&m.push(j),p++}if(c.length>0){(m.length>0||u.length>0)&&c.push("----------------------"+this.commonService.myTranslateInstant("azt_lang_sugg_the_end")+"----------------------"),m.length>0&&(c.push(this.commonService.myTranslateInstant("azt_lang_sugg_ans_table")),c.push(...m)),u.length>0&&(c.push(this.commonService.myTranslateInstant("azt_lang_sugg_instruction")),c.push(...u));let f=c.join("\n"),b={startLineNumber:0,endLineNumber:a+100,startColumn:0,endColumn:r+100};this.aztEditor?._editor.executeEdits("",[{range:b,text:f}])}}processMath(t){let i=0;for(let a of t){let r=a.matchAll(this.MATH_PAT);for(;;){let s=r.next();if(s.done)break;let l=s.value[0],u=this.mathMap.get(s.value[1]);u&&(u.lineIdx=i+1,u.startCol=s.value.index+1,u.endCol=u.startCol+l.length)}i++}}processStyle(t){let i=/\[![!aibuchl]+:\$(([^\$]|\$[^\]])+)\$\]/g,a=/^\s*\[\*\s*[AC]\.[^\|]+\|\s*[BD]\..*\*\]\s*$/g,r=[],s=0;for(let L of t){a.test(t[s].replaceAll(i,"$1"))&&(t[s]=t[s].replaceAll("[*","").replaceAll("*]","").replaceAll("|"," ").trim(),L=t[s]);let j,N=L.matchAll(i),R=0;for(;;){let G=N.next();if(G.done)break;let ae=G.value[0],W=ae.indexOf(":"),le=ae.substring(1,W),ce=G.value.index-R,te=ce+G.value[1].length;j&&ce==j.e&&j.style==le?j.e=te:(j={lineIdx:s,s:ce,e:te,style:le},r.push(j)),R+=W+4}t[s]=L.replaceAll(i,"$1"),s++}let l=this.aztEditor?.azotaIntel?.examIntel;l?.setLines(t);let c=l?.parse()??[],u=[],m=new Map,p=0;for(let L of c){p++;for(let N of L.parts)u.push(N);for(let N of L.answers){let R=this.hasStyleAns(t,N.parts[0],r);if(""!=R&&m.set(`${L.label}-${L.group}-${N.label}-${p}`,R),R.indexOf("!fl")<0||R.indexOf("!cl")>=0)for(let j of N.parts)u.push(j)}}for(let L of c)if(L.help)for(let N of L.help)u.push(N);this.applyStyle(t,u,r),l?.setLines(t),c=l?.parse()??[];let f=[];p=0;for(let L of c){if(p++,L.answers.filter(W=>W.isCorrect).length>0)continue;let N=[],R=[],j=[],G=[];for(let W of L.answers){let le=m.get(`${L.label}-${L.group}-${W.label}-${p}`);G.push(le??""),le&&""!=le&&(le.indexOf("!u")>=0&&j.push(W.parts[0]),(le.indexOf("!cl")>=0||le.indexOf("!hl")>=0)&&R.push(W.parts[0]),le.indexOf("!fl")>=0&&N.push(W.parts[0]))}let ae=L.answers.length;if(0==j.length&&N.length<ae&&N.length>0)f.push(...N);else if(j.length<ae&&j.length>0)f.push(...j);else if(R.length<ae&&R.length>0)f.push(...R);else{let W=0;for(let le of G){let ve=le.split("!");ve.length>W&&(W=ve.length)}if(W>1){let le=[];for(let ve=0;ve<G.length;ve++)G[ve].split("!").length==W&&le.push(L.answers[ve]);if(le.length<L.answers.length)for(let ve of le)f.push(ve.parts[0])}}}for(let L=f.length-1;L>=0;L--){let N=f[L];t[N.lineIdx]=t[N.lineIdx].substring(0,N.b)+"*"+t[N.lineIdx].substring(N.b)}return t=this.processUnderlineAns(t),c.length>0?t.slice(c[0].parts[0].lineIdx):t}getStyleScore(t){let i=0;return t.indexOf("!cl")>=0&&(i+=8),t.indexOf("!u")>=0&&(i+=4),t.indexOf("!i")>=0&&(i+=2),t.indexOf("!b")>=0&&(i+=1),i}processUnderlineAns(t){let i=/\[[!bichl]*[!u]+[!bichl]*:\$(([^\$]|\$[^\]])+)\$\]/g,a=0,r=[];for(let s of t){if(/^[ABCD\.\s\t\*]+$/.test(s)&&""!=s.trim()&&a>0){let l=s;l=l.replaceAll(/[\s\t\.]+/g,"");let c=l.indexOf("*"),u=0;if(l=l.replaceAll(/[\*]+/g,""),"ABCDEFGH".indexOf(l)>=0){let m=t[a-1].match(i);if(m&&l.length==m.length){for(let f of m)t[a-1]=t[a-1].replace(f,f.replace(/\[[!bichl]*[!u]+[!bichl]*:\$/g,`[${c==u?"*":""}${l.substring(0,1)}:`).replace("$]","]")),r[r.length-1]=t[a-1],l=l.substring(1),u++;a++;continue}}}r.push(s),a++}return r}isRangeIntersec(t,i,a,r){return t<=a&&a<=i||a<=t&&t<=r}hasStyleAns(t,i,a){if(!i)return"";let r=[],s={...i};this.applyStylePart([s],a,!0),s.text!=i.text&&""==s.text?.replace(/\[[!a-z]+:\$[^\]]+\$\]/g,"").replace(/\s*\.\s*$/g,"").trim()&&r.push("!fl");for(let u of a)u.lineIdx==i.lineIdx&&u.s<=i.b&&i.b<u.e&&r.push(u.style);let c=r&&r.length>0?r.join():"";return c.indexOf("!u")>=0||c.indexOf("!b")>=0||c.indexOf("!hl")>=0||c.indexOf("!cl")>=0||c.indexOf("!fl")>=0?c:""}applyStylePart(t,i,a=!1){for(let r=t.length-1;r>=0;r--){let s=t[r],l=i.filter(u=>u.lineIdx==s.lineIdx&&this.isRangeIntersec(u.s,u.e,s.s,s.e??999999)),c=[];for(let u of l){let m=u.s>=s.s?u.s:s.s,p=u.e<=(s.e??9999999)?u.e:s.e??9999999;m-=s.s,p-=s.s;let f=a?u.style:u.style.replaceAll("!hl","").replaceAll("!cl","");m<p&&""!=f&&s.text&&""!=(s.text.substring(m,p)??"").trim()&&(c.push({idx:m,str:`[${f}:$`}),c.push({idx:p,str:"$]"}))}c.sort((u,m)=>{let p=m.idx-u.idx;return 0!=p?p:m.str.length-u.str.length});for(let u of c)s.text=s.text?.substring(0,u.idx)+u.str+s.text?.substring(u.idx)}}applyStyle(t,i,a){for(let r=i.length-1;r>=0;r--){let s=i[r],l=a.filter(c=>c.lineIdx==s.lineIdx&&c.e>=s.s);for(let c=l.length-1;c>=0;c--){let u=l[c].s>=s.s?l[c].s:s.s,m=l[c].e<=(s.e??9999999)?l[c].e:s.e,p=l[c].style.replaceAll("!hl","").replaceAll("!cl","");if(u<m&&""!=p){let f=t[s.lineIdx],b=f.substring(u,m);""!=b.trim()&&(t[s.lineIdx]=f.substring(0,u)+"["+p+":$"+b+"$]"+f.substring(m))}}}}setCorrectAns(t,i){let a=[],r=0,s=0;this.editorFocus(i.parts);for(let l of t.answers){let c=l.ans.parts[0];if(!c)continue;let u=this.aztEditor?.getLineText(c.lineIdx+1);c.lineIdx!=s&&(r=0,s=c.lineIdx);let m=u.substring(c.b,c.b+1);this.sAztAnswerTypeService.isTrueFalseAnswer({answerType:t.type})?l.ans.label==i.label&&("*"!=m?(a.push(`${c.lineIdx}|${c.b+r}|${c.b+r}|*`),r++):(a.push(`${c.lineIdx}|${c.b+r}|${c.b+r+1}|`),r--)):("*"==m&&(a.push(`${c.lineIdx}|${c.b+r}|${c.b+r+1}|`),r--),l.ans.label==i.label&&"*"!=m&&(a.push(`${c.lineIdx}|${c.b+r}|${c.b+r}|*`),r++))}this.aztEditor?.runEditAction(a,this.aztEditor._editor,!0),this.showTooltip=!1}closeLibrary(t){this.conf.startLibrary=!1,this.conf.isFirstTime||(this.conf.isFirstTime=!0),t&&this.aztEditor&&this.aztEditor.insertLine(t.join("\n"))}parseTag(t){let a=t.trim(),s=a.matchAll(/^(\[!info:\d+\]\s*)?(\[[iubchl!]+:\$\s*)?[\[\(]\s*(VD|TH|NB|VDC|EASY|MEDIUM|HARD|HARDEST)\s*[\d\.]*\s*[\)\]]/g).next();return s.done?["",a]:(a=a.replace(/[\[\(]\s*(VD|TH|NB|VDC|EASY|MEDIUM|HARD|HARDEST)\s*[\d\.]*\s*[\)\]]\s*[:.]?/g," "),[s.value[3],a])}trimBr(t){return t.replaceAll("<br>","").trim()}parseExtra(t){if(t.startsWith("[@"))return{val:"",idx:0,id:this.trimBr(t)};let r=t.matchAll(/\[!info:\d+\]/g),s="",l=0;for(;;){let u=r.next();if(u.done)break;s=u.value[0],l=u.value.index;break}if(""==s)return{val:"",idx:0,id:"0"};let c=s.replace("[!info:","").replace("]","").trim();return{val:s,idx:l,id:c}}setExtra(t,i=!0){let a=t.q.quest.parts[0],r=this.parseExtra(a.text??"");"0"==r.id&&(r.id=this.curExtraId+"",this.curExtraId++);let s=this.extraMap.get(r.id);if(s||(s={d:t.q.point,audio:t.q.audio,file:void 0,fix:t.q.quest.isFixAns,tag:t.q.tag,replaceIdx:-1},this.extraMap.set(r.id,s)),"point"==t.type&&(s.d=t.data&&t.data>0?t.data:void 0),"audio"==t.type&&(s.audio=t.q.audio?t.q.audio:void 0,s.file=void 0),"fix"==t.type&&(s.fix=t.data?"fix":void 0),"tag"==t.type&&(s.tag=t.data),"replace"==t.type&&(s.replaceIdx=t.data),+r.id>0){let l=`[!info:${r.id}]`,c=a.s+r.idx,u=a.s+r.idx+r.val.length;t.q.quest.isGroup&&""==r.val&&(c=a.s+(a.text?.length??0)+10,u=c),this.aztEditor?.runEditAction([`${a.lineIdx}|${c}|${u}|${l}`],this.aztEditor._editor,i)}return i&&this.aztEditor?.setPosition(a.lineIdx+1,0),r.id}setFixGroup(t){this.questionInfo=void 0,t.isFixGroup=!t.isFixGroup,this.setExtra({q:t,type:"fix",data:t.isFixGroup})}randomAllAgain(){this.apiDataCache.clear(),this.fillQuestCache.clear(),this.apiCallbackCache.clear(),this.renderCache.clear(),this.lastMatrixHash="";let t=this.aztEditor?._editor.getValue().split("\n");this.onEditorChangeValue(t,this.editorParsedData??[])}reRender(){this.editorParsedData&&(this.lstQuest=this.editorParsedData.map((t,i)=>this.renderQuest(t,i)),this.text="")}onApplyAllTag(t,i){this.lstQuest.forEach((a,r)=>{r<=i||a.quest.isGroup||(a.tag=t,this.setExtra({type:"tag",data:t,q:this.lstQuest[r]},r==this.lstQuest.length-1))})}showHover(t,i,a){if(this.lstQuest)for(let r of this.lstQuest){let s=a;if(r.quest.parts[0].lineIdx==t-1&&/\[!info:\d+\]/.test(a)){let l=this.parseExtra(a),c="";if("0"!=l.id){let p=this.extraMap.get(l.id);p&&p.replaceIdx>=0&&(c=this.commonService.myTranslateInstant("lang_core_replace")+": "+p.replaceIdx)}let u=s.indexOf("[")+1,m=s.indexOf("]")+1;if(u<=i&&i<=m){let p=[],f=this.commonService.myTranslateInstant("lang_auto_diem"),b=this.commonService.myTranslateInstant("lang_auto_audio_file"),L=this.commonService.myTranslateInstant("lang_auto_file_dinh_kem"),N=this.commonService.myTranslateInstant("lang_auto_nhan"),R=this.commonService.myTranslateInstant("lang_auto_co_dinh");return r.point&&p.push(`${r.point} ${f}`),r.audio&&p.push(b+": "+r.audio.name),r.attachments&&p.push(L+": "+r.attachments),r.tag&&r.tag.length>0&&p.push(N+": "+r.tag.map(j=>j[this.commonService.getCurrentLang()+"Name"]).join(",")),(r.isFixGroup||r.quest.isFixAns)&&p.push(R),""!=c&&p.push(c),{lineIdx:t,s:u,e:m,text:p.join(", ")}}}}}onEditorChangeValue(t,i){clearTimeout(this.waitId),this.waitId=setTimeout(()=>{this.onEditorChangeValueExec(t,i)},0)}onEditorChangeValueExec(t,i){if(i&&i.length>0){this.errs=[],this.aztEditor?.setError([]);let a=this.lstQuest.map((s,l)=>s.lazyQuestView&&s.lazyQuestView.show?{i:l,v:s.lazyQuestView}:{i:-1,v:void 0}).filter(s=>s.i>=0),r=this.commonService.myClone(this.lstQuest);this.lstQuest=[],this.matrixLoadedData=[],this.loadMatrixQuest(i).then(s=>{if(this.matrixLoadedData=s,i=this.convertSyntaxMatrixInGroup(i,s),this.editQuestId&&(s.length&&s[0].questions?.length?(i[0].knowledgeId=s[0].questions[0].knowledgeId,this.isEditGroup&&!this.questionInfo&&(this.questionInfo=s[0].questions[0],this.aztEditor?._editor.setValue(this.convertHtmlToDocxFormat(this.questionInfo.groupContent??"")))):(this.isEditGroup&&(this.text=""),i[0].knowledgeId=r[0]?.knowledgeId)),this.editorParsedData=i,this.lstQuest=i.map((u,m)=>this.renderQuest(u,m)),this.questionInfo)return void(this.lstQuest[0].isFixGroup=this.questionInfo.isFixGroup);for(let u of a){if(u.i>=this.lstQuest.length)break;this.lstQuest[u.i].lazyQuestView=u.v}i.forEach((u,m)=>{let p=u.answers.filter(f=>f.isCorrect).map(f=>f.label).join();if(p||(p=this.lstQuest[m].originCorrectAns),p||(p=""),"similar"!=this.lstQuest[m].v)for(let f of this.lstQuest[m].answers)f.ans.isCorrect=p.indexOf(f.ans.label)>=0}),this.text="",setTimeout(()=>{this.revealCurrentQuest()},200),this.validate();let l=this.aztEditor?._editor.getValue().split("\n");this.processMath(l);let c=1;for(const u of this.lstQuest)u.rawIndexQuestion=c,u.quest.isGroup||c++})}else this.lstQuest=[],t&&(this.text=this.renderText(t.join("<br>")))}convertHtmlToDocxFormat(t){let i=t.split("<br>");const a=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi;let r="";for(let l=0;l<i.length;l++){let c=[];r=r+i[l].replace(a,(u,m)=>u.startsWith("</")?c.length>0&&c[c.length-1]===m?(c.pop(),"$]"):"":(c.push(m),`[!${m}:$`))+"\n"}return r.replace(/(\$\])+/g,"$]").replace(/:\$\[/g,"")}loadMatrixQuest(t){return new Promise((i,a)=>{let r={exceptQuestionIds:[],matrix:[],getGroup:this.isEditGroup},s=new Map;for(let c of t)if(c.parts[0].text?.startsWith("[@")){let u=c.parts[0].text.split("=>"),m=u[0]+"=>"+u[1]?.split("-")[0];if(s.has(m))continue;s.set(m,!0);let p=K.Utils.parseInclude(c.parts[0].text);r.matrix?.push({number:p.getNum,key:m+"#"+c.parts[0].lineIdx,paths:p.paths.map(f=>({type:f.type,id:f.id,groupIds:f.groupIds,tags:f?.answerTypes?.includes(0)?[]:f.tags,answerTypes:f.answerTypes}))})}let l=r.matrix?.map(c=>c.key).join(":")??"";if(l!=this.lastMatrixHash){this.lastMatrixHash=l,this.apiDataCache.clear(),this.fillQuestCache.clear(),this.apiCallbackCache.clear();let u=r.matrix?.filter(m=>m.paths?.filter(p=>"KNOWLEDGE"==p.type).length??!1).length?this.questionService.apiQuestionsMatrixGlobalPost(r):this.questionService.apiQuestionsMatrixPost(r);this.isMatrixGetGroup=!1,this.isMatrixGetGroup=(r.matrix||[]).some(m=>(m.paths||[]).some(p=>p.answerTypes?.includes(0))),u.subscribe(m=>{if(1===m.success&&m.data)return m.data.length&&m.data.forEach(p=>{p.questions?.forEach(f=>{if(this.sAztAnswerTypeService.isTrueFalseAnswer(f)){f.answerConfig=this.convertAnswerConfigTrueFalse(f.answerConfig??"");let b=this.commonService.myParseJson(f.answerResult??"");f.answerResult=b?this.commonService.serializeJson(b.map(L=>L.toLowerCase()+")")):f.answerResult}})}),void i(m.data);i([])})}else i(this.matrixLoadedData?this.matrixLoadedData:[])})}convertAnswerConfigTrueFalse(t){let i=this.commonService.myParseJson(t);return i?(i.forEach(a=>a.key=a.key?.toLowerCase()+")"),this.commonService.serializeJson(i)):t}onMobileEditorChange(t){this.mobileEditorContent=t.lines.join("\n"),this.onEditorChangeValue(t.lines,t.data)}onEditorInitComplete(t){if(setTimeout(()=>{const r=!!this.commonService.getMyQueryParam("showAI");this.showPromptCreateExam=r},500),this.aztEditor=t.azotaEditor,this.aztEditor.setLang(this.commonService),this.aztEditor.setHoverCalback((r,s,l)=>this.showHover(r,s,l)),this.aztEditor.onChange((r,s)=>{if(this.editQuestId>0&&s.length>0){this.enableEdit=s.length>1,this.enableEdit&&this.showErrorSnack("lang_auto_khong_the_them_cau_hoi_moi");let l=this.conf.startIndex+1;(s=[s[0]])[0].olabel=s[0].olabel?.replace(s[0].label+"",l+""),s[0].label=l}this.onEditorChangeValue(r,s)}),this.aztEditor.onRefreshInclude((r,s)=>{if(this.timeOutDelayStatus.refresh){let l=Math.floor(((new Date).getTime()-this.timeOutDelayStatus.timeRefresh)/1e3);const c=this.timeOutDelayStatus.limitRefresh-(l>=5?0:l);this.showErrorSnack((this.commonService.myTranslateInstant("lang_auto_limit_time_refresh_question")??"").replace("@",c.toString()))}else{this.timeOutDelayStatus.refresh=!0,this.timeOutDelayStatus.timeRefresh=(new Date).getTime();let l=0;this.matrixLoadedData=[];let c=this.lstQuest.filter(u=>u.quest.parts[0].text?.startsWith(r)&&u.quest.parts[0].lineIdx==s-1).map(u=>u.id??0);for(let u of this.lstQuest){if(u.quest.parts[0].lineIdx==s-1){const m=u.quest.isGroup&&!u.quest.parts[0].text?.includes("[")?"":u.quest.parts[0].text??"",p=l;let f=N=>{this.fillQuest(p,N)},b=N=>{this.fillError(p,N)};this.setExtra({q:this.lstQuest[p],type:"replace",data:-1});let L=new Ts(this.cdnService,this.commonService,f,this.apiCallbackCache,this.aztEditor,b,this.getIncludeIds(c),this.apiDataCache,this.matrixLoadedData);this.apiDataCache.delete(m),L.render(m,this.images,this.questionService)}l++}setTimeout(()=>{this.timeOutDelayStatus.refresh=!1},1e3*this.timeOutDelayStatus.limitRefresh)}}),this.aztEditor.onInsertQuestText((r,s)=>{let l=this.lstQuest.filter(c=>c.quest.parts[0].lineIdx==s-1)[0];if(l){let c=this.getQuestText(l);this.aztEditor?.setPosition(s,0),this.aztEditor?.removeText(s,0,999999,!1),this.aztEditor?.insertAtCurPos(c)}}),this.aztEditor.onInsertDetails((r,s)=>{let l=this.lstQuest.filter(L=>L.quest.parts[0].lineIdx==s-1);if(0==l.length)return;for(let L=0;L<l.length;L++)this.apiDataCache.delete(r+"=>"+L);let c=this.commonService.myTranslateInstant("lang_auto_cau"),u=l.map(L=>L.quest.isGroup?`${L.quest.parts[0].text}`:`${L.id}: ${c} ${L.quest.label}`),p=(l[0].quest.parts[0].text??"").split("=>")[0],f=l[0].quest.parts[0].text?.split("=>")[1],b=l[l.length-1].quest.parts[0].text?.split("=>")[1];if(f&&b){let L=+f,N=+b,R=p.split("].["),j=R[R.length-1],G=+K.Utils.getNumberFromStr(j),ae=N-L+1;R[R.length-1]=j.replace(" "+G+" "," "+(G-ae)+" ");let le=R.join("].[");for(let ve=N+1;ve<G;ve++){let ce=this.apiDataCache.get(p+"=>"+ve);ce&&this.apiDataCache.set(le+"=>"+(ve-ae),ce)}for(let ve=0;ve<L;ve++){let ce=this.apiDataCache.get(p+"=>"+ve);ce&&this.apiDataCache.set(le+"=>"+ve,ce)}}this.aztEditor?.insertDetails(s,u)}),this.aztEditor.onChangePosition((r,s)=>{this.revealCurrentQuest();let l=this.aztEditor?.getCurLineText(),u=l.matchAll(/\[(!m|img):\$([^\$\]]+)\$\]/g);for(;;){let m=u.next();if(m.done)break;let p=m.value[2];if(m.value.index+1<s&&s<m.value.index+m.value[0].length)if(m.value[0].startsWith("[!m:")){let b=this.mathMap.get(p);if(b){this.openMathEditor(b);break}}else this.actionEditImage(document.getElementById(p))}}),window.addEventListener("paste",r=>{if((this.aztEditor?._editor).hasTextFocus()){let l=r.clipboardData.getData("text/html")+"",c=r.clipboardData.files[0],m=l.matchAll(/<img [^>]*src="([^"]+)"/g);if(c&&c.type.startsWith("image"))return void this.insertImgFromFile(c);for(;;){let p=m.next();if(p.done)break;this.insertImgFromLink(p.value[1])}}}),this.editQuestId>0){this.aztEditor.setSingleMode(!0);let r=this.commonService.myTranslateInstant("lang_auto_cau_hoi");this.aztEditor._editor.setValue(`[@Q${this.editQuestId}:${r}]`)}const i=this.editorOutputDataService.getFirstFile(),a=this.editorOutputDataService.getMatrixData();i?this.processFile(i):a&&this.processMatrixData(a)}insertImgFromBase64(t){let i=0;for(let a of this.images){let r=+a.id.split("_")[1];r>i&&(i=r)}i++,this.images.push({id:"img_"+i,link:t}),this.aztEditor?.insertAtCurPos(`[img:$img_${i}$]`)}insertImgFromLink(t){Zn.loadImageToBase64(t,this.cdnService).then(i=>{this.insertImgFromBase64(i)})}insertImgFromFile(t){let i=new FileReader;i.onload=()=>{this.insertImgFromBase64(i.result+"")},i.readAsDataURL(t)}processMatrixData(t){let i=new Cn;this.conf.matrix=t;let a=i.parse(t.matrix);this.extraMap=a.extra,this.aztEditor?._editor.setValue(this.commonService.translateString(a.text))}revealCurrentQuest(){if(this.isMobile)return;this.isFirstScroll||(document.querySelector(".main-content")?.scroll(1,10),this.isFirstScroll=!0);const t=this.aztEditor?.getCurQuest();if(t){const a=this.lstQuest.find(r=>r.quest.parts?.[0]?.lineIdx===t.parts?.[0]?.lineIdx)?.rawIndexQuestion;this.revealQuest(`${t.isGroup?"g-":""}${a}`,t.isGroup?"end":"start"),this.curQuest=t}}revealQuest(t,i){const a=document.getElementById("quest-"+t);this.scrollQuestion(a,i)||setTimeout(()=>{this.scrollQuestion(a,i)},0)}scrollQuestion(t,i){return!!t&&(t.setAttribute("start_loading","true"),t.scrollIntoView({behavior:"auto",block:i??"start"}),this.onScrollQuest(),!!t.getAttribute("data-current-height"))}onScrollQuest(){this.isMouseDown||this.checkElementQuestionLazy()}onMouseDown(){this.isMouseDown=!0}onMouseUp(){this.isMouseDown=!1,this.checkElementQuestionLazy()}onRandomOne(t){if(this.timeOutDelayStatus.refresh){let i=Math.floor(((new Date).getTime()-this.timeOutDelayStatus.timeRefresh)/1e3);const a=this.timeOutDelayStatus.limitRefresh-(i>=5?0:i);this.showErrorSnack((this.commonService.myTranslateInstant("lang_auto_limit_time_refresh_question")??"").replace("@",a.toString()))}else{this.timeOutDelayStatus.refresh=!0,this.timeOutDelayStatus.timeRefresh=(new Date).getTime(),this.matrixLoadedData=[];let i=this.lstQuest.map(m=>m.id??0),a=this.lstQuest[t];const r=a.quest.parts[0].text??"",s=this.apiDataCache.get(r);let u=new Ts(this.cdnService,this.commonService,m=>{this.fillQuest(t,m)},this.apiCallbackCache,this.aztEditor,m=>{this.showErrorSnack(m),s&&this.apiDataCache.set(r,s)},i,this.apiDataCache,this.matrixLoadedData);this.apiDataCache.delete(r),this.setExtra({q:a,type:"replace",data:-1}),u.setGetOne(!0),u.render(r,this.images,this.questionService),setTimeout(()=>{this.timeOutDelayStatus.refresh=!1},1e3*this.timeOutDelayStatus.limitRefresh)}}onChangeQuest(t,i){if(this.timeOutDelayStatus.refresh){let a=Math.floor(((new Date).getTime()-this.timeOutDelayStatus.timeRefresh)/1e3);const r=this.timeOutDelayStatus.limitRefresh-(a>=5?0:a);this.showErrorSnack((this.commonService.myTranslateInstant("lang_auto_limit_time_refresh_question")??"").replace("@",r.toString()))}else{this.timeOutDelayStatus.refresh=!0,this.timeOutDelayStatus.timeRefresh=(new Date).getTime();let a=this.lstQuest[i],r=a.renderedStr,s=a.answers.findIndex(l=>l.ans.isCorrect);if(-1!=s){let l=a.answers.map(c=>c.renderedStr);r+="\n"+this.commonService.getCorrectAnsTxt(l,s)}r=this.commonService.parseQuestionContent(r),this.openSimilarSearch(r,i),setTimeout(()=>{this.timeOutDelayStatus.refresh=!1},1e3*this.timeOutDelayStatus.limitRefresh)}}setPointBelow(t,i){for(let a=i;a<this.lstQuest.length;a++)this.lstQuest[a].quest.isGroup||(this.lstQuest[a].point=t,this.setExtra({type:"point",data:t,q:this.lstQuest[a]},a==this.lstQuest.length-1))}editorFocus(t){t&&t.length>0&&this.aztEditor?.goToLine(t[0].lineIdx+1)}onCopy(t,i){let a=this;i||(i="Copy");let r=s=>{let l=K.Utils.capitalizeFirstLetter(t.quest.olabel??"");navigator.clipboard.writeText(a.getQuestText(t));let c=this.commonService.myTranslateInstant("lang_auto_noi_dung"),u=this.commonService.myTranslateInstant("lang_auto_thanh_cong");a.showSuccessSnack(`${i} ${c} ${l} ${u}`)};document.addEventListener("copy",r),document.execCommand("copy"),document.removeEventListener("copy",r)}onCut(t){let i=this.commonService.myTranslateInstant("lang_auto_cat");this.onCopy(t,i),this.onDel(t,i)}onDel(t,i){let a=[],r=K.Utils.capitalizeFirstLetter(t.quest.olabel??""),s=this.commonService.myTranslateInstant("lang_auto_xoa");if(i||(i=s),(t.quest.parts[0].text?.indexOf(".[L\u1ea5y ng\u1eabu nhi\xean")??-1)>0||(t.quest.parts[0].text?.indexOf(".[Random")??-1)>0){let l=this.commonService.myTranslateInstant("lang_auto_nam_trong_nhom_lay_ngau_nhien"),c=this.commonService.myTranslateInstant("lang_auto_khong_thanh_cong");return this.showErrorSnack(`${r} ${l}, ${i} ${c}`),-1}a.push(...t.quest.parts.map(l=>l.lineIdx));for(let l of t.quest.answers)a.push(...l.parts.map(c=>c.lineIdx));return t.quest.help&&a.push(...t.quest.help.map(l=>l.lineIdx)),a=a.filter((l,c,u)=>u.indexOf(l)===c),this.aztEditor?.removeLines(a,!0),a[0]}getQuestText(t,i=!0){let a=K.Utils.capitalizeFirstLetter(t.quest.olabel??"");this.defaultQuestionLabel&&(a=K.Utils.capitalizeFirstLetter(this.defaultQuestionLabel).trim()+" "+t.quest.label+".");let r=this.curExtraId;i&&(this.curExtraId++,this.extraMap.set(r+"",{oldId:t.id,d:t.point,audio:t.audio,file:t.attachments,fix:t.quest.isFixAns,tag:t.tag}));let l=[`${a}${i?`[!info:${r}]`:""} ${this.formatContent(t.renderedStr)}`],c="";if(t.renderedStr.indexOf('class="qv_string_eng_ans"')<0)for(let f of t.answers)l.push((f?.ans?.isCorrect?"*":"")+f?.ans?.label+(f?.ans?.label.includes(")")?" ":". ")+this.formatContent(f.renderedStr));else c=t.answers.filter(f=>f?.ans?.isCorrect)[0].ans.label;if(t.quest.strAns){let f=this.commonService.myTranslateInstant("azt_lang_sugg_ans_table_upper")??"";l.push(`${f}\n${t.quest.label}. ${t.quest.strAns}`)}if(t.helpRenderedStr){let f=this.commonService.myTranslateInstant("lang_auto_loi_giai")??"";l.push(f),l.push(this.formatContent(t.helpRenderedStr))}let m=(new wa).revert(l.join("\n"),c);return m=(new Fo).revert(m),m}formatContent(t){let i=document.createElement("div");i.innerHTML=t;let a=i.getElementsByClassName("azt-mathml"),r=i.getElementsByTagName("img");for(let l=a.length-1;l>=0;l--){let c=a[l];if(!c)continue;let u=this.curMathId;this.mathMap.set("mathtype_"+this.curMathId,{id:u,str:c.innerHTML,lineIdx:0,startCol:0,endCol:0}),this.curMathId++;let p=document.createTextNode(`[!m:$mathtype_${u}$]`);i.replaceChild(p,c)}for(let l=r.length-1;l>=0;l--){let c=r[l];if(!c)continue;let u=this.images.length>0?Math.max(...this.images.map(p=>+p.id.split("_")[1]))+1:1;this.images.push({id:"img_"+u,link:c.src,cssStyle:c.style.cssText});let m=document.createTextNode(`[img:$img_${u}$]`);i.replaceChild(m,c)}return i.innerHTML.replaceAll("<br>","\n")}upperFirst(t){return t?t.charAt(0).toUpperCase()+t.slice(1):""}validate(){let t=new Map,i=0;this.errs=this.errs.filter(a=>a.indexOf("Tr\xf9ng c\xe2u h\u1ecfi")<0),this.aztEditor?.setError(this.errs);for(let a of this.lstQuest)"Tr\xf9ng c\xe2u h\u1ecfi"==a.err&&(a.err=void 0),a.id&&(t.has(a.id)&&this.fillError(i,"Tr\xf9ng c\xe2u h\u1ecfi"),t.set(a.id,1),i++)}fillError(t,i){this.lstQuest[t].err=`<span style='color:red'>${i}</span>`;let r=this.lstQuest[t].quest.parts[0].lineIdx+1+"|"+i;-1==this.errs.indexOf(r)&&this.errs.push(r),this.aztEditor?.setError(this.errs)}fillImg(t,i,a,r,s=!1){let l=new RegExp("<div id='"+i+"'[^>]+></div>","g"),c=s&&this.lstQuestSimilar?this.lstQuestSimilar[t]:this.lstQuest[t];c.renderedStr=c.renderedStr.replace(l,a??"");for(let u of c.answers)u.renderedStr=u.renderedStr.replace(l,a??"");if(c.helpRenderedStr&&(c.helpRenderedStr=c.helpRenderedStr.replace(l,a??"")),r)for(let u of r){let m=this.renderCache.get(u);m&&this.renderCache.set(u,m.replace(l,a??""))}if(this.editQuestId>0){let u=this.getQuestText(c);u=Vr.revert(u),u.indexOf("img-docx")<0&&this.aztEditor?._editor.setValue(u)}}loadSimilar(t,i){if(t){let a=l=>{this.fillQuest(i,l,!0)},r=l=>{"NO_DATA"==l?this.lstQuestSimilar=[]:this.showErrorSnack(l)};this.lstQuestSimilar=void 0,new Ts(this.cdnService,this.commonService,a,void 0,void 0,r,[],void 0,void 0,this.discoveryService).getSimilar(t,this.images,this.questionService)}}fillQuest(t,i,a=!1){let r=this.commonService.myClone(i),s=this.lstQuest[t],l=0;if(a&&(this.lstQuestSimilar||(this.lstQuestSimilar=[]),this.lstQuestSimilar.push(r),l=this.lstQuestSimilar.length-1),s){r.label=s.label,r.point=s.point,r.lazyQuestView=s.lazyQuestView,r.isFixGroup=s.isFixGroup;let c=s.quest.isFixAns||r.quest.isFixAns;if(this.editorParsedData){let p=r.quest.strAns;if(r.quest=this.editorParsedData[t],r.quest.strAns=p,r.knowledgeId=this.editorParsedData[t].knowledgeId??0,!a){let f=r.quest.answers.filter(b=>b.isCorrect).map(b=>b.label).join();(!f||""==f)&&(f=r.originCorrectAns??"");for(let b of r.answers)b.ans.isCorrect=f.indexOf(b.ans.label)>=0}}if(r.quest.strAns){let p=this.findAnsSplit(r.quest.strAns,this.aztLangConfigObj.STRANS_SPLIT);r.strAns=r.quest.strAns.split(p).map(f=>f.trim())}else r.strAns&&(r.quest.strAns=r.strAns.join("|"));let u=[];u.push(r.renderedStr),u.push(...r.answers.map(p=>p.renderedStr)),u.push(r.helpRenderedStr);let m=(p,f)=>{this.fillImg(a?l:t,p,f,u,a)};r.renderedStr=this.renderStr(r.renderedStr,"link",m,void 0,void 0,!1);for(const p of r.answers)p.renderedStr=this.renderStr(p.renderedStr,"link",m,void 0,void 0,!1);if(r.helpRenderedStr&&(r.helpRenderedStr=this.renderStr(r.helpRenderedStr,"link",m,void 0,void 0,!1)),!r.type){let p=3;r.answers.length>0&&(p=1),0==r.answers.length&&r.quest.strAns&&(p=4),r.type=p}if(c&&(r.quest.isFixAns=c),r.changeable=/^\[@[CTGK][\-\d]+:[^\]]+\]([\.,]\[[^\]]+\])*\.\[[^@:\]]+\d+[^@:\]]+\]$/.test(r.quest.parts[0].text?.split("=>")[0]??""),a||(this.lstQuest[t]=r),this.editQuestId>0){let p=this.getQuestText(r);p=Vr.revert(p),p.indexOf("img-docx")<0&&this.aztEditor?._editor.setValue(p)}this.fillQuestCache.set(t+"-"+r.quest.parts[0].text,r),a||this.validate()}}findAnsSplit(t,i){if(!i)return"|";for(let a=0;a<i.length;a++)if(t.indexOf(i[a])>=0)return i[a];return"|"}renderText(t){let i=t;return i=this.renderStr(i,"help",(r,s)=>{let l=new RegExp("<div id='"+r+"'[^>]+></div>","g");i=i.replace(l,s??"")}),i}getLoadedIds(){return this.lstQuest.filter(t=>t.id&&t.id>0).map(t=>t.id??0)}getIncludeIds(t){let a=this.aztEditor?._editor.getValue(),s=a.matchAll(/\[@Q(\d+):[^\]]*\]/g),l=[];for(;;){let u=s.next();if(u.done)break;l.push(+u.value[1])}let c=this.getLoadedIds();return l.push(-1),l.push(...c),l.filter(u=>(t??[]).indexOf(u)<0)}renderStr(t,i,a,r,s,l=!0){let c=this.renderCache.get(t);if(c&&!c.startsWith("Loading...|"))return c;let u=l?t.replaceAll(/<([\/!a-zA-Z])/g,"&lt;$1").replaceAll(/&lt;([ubi])>/g,"<$1>").replaceAll(/&lt;[\/]([ubi])>/g,"</$1>").replaceAll("&lt;br>","<br>").replaceAll("&lt;code>","<code>").replaceAll("&lt;/code>","</code>").replaceAll("<&lt;","&lt;&lt;").replaceAll("<&lt;","&lt;&lt;").replaceAll("<&lt;","&lt;&lt;"):t,m=[new No(this.cdnService),new wa,new Ba,new ia,new Vr,new La(this.mathMap,this.commonService),new za,new xo.$(this.cdnService,this.commonService,this.configRenderService,a),new Ts(this.cdnService,this.commonService,r,this.apiCallbackCache,this.aztEditor,s,this.getIncludeIds(),this.apiDataCache,this.matrixLoadedData)];"link"==i&&(m=[new xo.$(this.cdnService,this.commonService,this.configRenderService,a)]),"help"==i&&m.pop(),this.isChemistry&&m.push(new Jo);for(const p of m)p.setLoadingManager(this.loadingManager),u=p.render(u,this.images,this.questionService);return this.renderCache.set(t,u),u}renderQuest(t,i){let a=3;t.answers.length>0&&(a=1),0==t.answers.length&&t.strAns&&(a=4),"TF"==t.typeCode&&(a=5,t.answers.forEach(N=>{N.label=N.label.toLowerCase(),N.olabel=")"}));let r=(N,R)=>{this.fillImg(i,N,R)},s=N=>{this.fillQuest(i,N)},l=N=>{this.fillError(i,N)},c=t.parts.map(N=>N.text??"").join("<br>").trim(),u=this.parseTag(c);""!=u[0]?c=u[1]:t.help&&t.help.length>0&&(u=this.parseTag(t.help[0].text??""));let m=this.parseExtra(c);if("0"!=m.id){let N=this.extraMap.get(m.id);if(N&&N.replaceIdx>=0)return this.lstQuestReplace[N.replaceIdx]}""!=m.val&&(c=c.substring(0,m.idx)+c.substring(m.idx+m.val.length));let p=t.help?t.help.map(N=>N.text??"").join("<br>").trim():void 0,f=this.lstQuest[i],b=this.findAnsSplit(t.strAns??"",this.aztLangConfigObj.STRANS_SPLIT),L={renderedStr:this.renderStr(c,"full",r,s,l),quest:t,type:a,tag:""==u[0]?void 0:[{id:0,code:K.Utils.tagLang(u[0])}],lazyQuestView:f?f.lazyQuestView:void 0,strAns:t.strAns?t.strAns.split(b).map(N=>N.trim()):void 0,label:this.upperFirst(t.olabel??""),knowledgeId:t.knowledgeId,helpRenderedStr:p?this.renderStr(p,"full",r,s,l):void 0,answers:t.answers.map(N=>{let R=N.parts.map(j=>j.text??"").join("<br>").trim();return{renderedStr:this.renderStr(R,"full",r,s,l),ans:N}})};if(L.renderedStr.startsWith("Loading...|")){let N=L.renderedStr.split("|");if(N[1].indexOf(",")<0){let j=+N[1];j>0&&(L.id=j)}L.renderedStr=N[0];let R=this.fillQuestCache.get(i+"-"+t.parts[0].text);R&&(L=R)}if("0"!=m.id){let N=this.extraMap.get(m.id);N&&(L.point=N.d,L.audio=N.audio,L.attachments=N.file,L.isFixGroup=L.quest.isGroup&&N.fix,L.tag=N.tag,L.quest.isFixAns||(L.quest.isFixAns=!L.quest.isGroup&&N.fix))}return this.editableEventObj.addCount(),L}openSimilarSearch(t,i){this.conf.similarQuest.show=!0,this.conf.similarQuest.txt=t,this.conf.similarQuest.idx=i,this.loadSimilar(t,i)}openMathEditor(t){if(!t){let i=this.aztEditor?.getCurPos();t={id:this.curMathId,str:'<math xmlns="http://www.w3.org/1998/Math/MathML"/>',lineIdx:i.lineNumber,startCol:i.column,endCol:i.column}}this.conf.mathEditor.show=!0,this.conf.mathEditor.latex=t}onInsertLatex(t){if(this.conf.mathEditor.show=!1,this.aztEditor&&""!=t.str.trim()){let i="mathtype_"+this.curMathId,a=`[!m:$${i}$]`;this.mathMap.set(i,{id:this.curMathId,str:"\\("+t.str+"\\)",lineIdx:t.lineIdx,startCol:t.startCol,endCol:t.startCol+a.length}),this.aztEditor.removeText(t.lineIdx,t.startCol,t.endCol,!1),this.aztEditor.insertAtCurPos(a),this.curMathId++}}replaceQuest(t){let i=this.conf.similarQuest.idx??0;this.conf.similarQuest.show=!1;let a=this.setExtra({q:this.lstQuest[i],type:"replace",data:this.lstQuestReplace.length});this.lstQuest[i]=t,t.quest.parts[0].text=(+a>0&&!t.quest.parts[0].text?.startsWith("[!info:")?`[!info:${a}] `:"")+t.quest.parts[0].text,this.lstQuestReplace.push(t)}loadExample(t,i){let a="vi"==i?Ko.EXAM_FULL:Ko.EXAM_FULL_EN;this.aztEditor&&""!=this.aztEditor._editor.getValue().trim()?this.popupConfirm?.startConfirm("lang_auto_azt_edtor_confirm_chang_content").then(r=>{r&&this.aztEditor?._editor.setValue(a[t-1])}):this.aztEditor&&this.aztEditor?._editor.setValue(a[t-1])}onShowFile(t,i){}onDropFile(t){if(t){if(!(0,ht.C0)(t.type))return this.showErrorSnack("lang_auto_pleas_upload_file_support");if((0,ht.ml)(t.type))return this.showErrorSnack("lang_auto_chua_ho_tro_dinh_dang_video_vui_long_thu_lai");(0,ht.hv)(t).then(i=>{this.attachFiles.push(i)})}}setupEvent(){this.mapEventElement.push({eventName:"click",className:"img-docx",action:this.actionEditImage,caller:this}),this.mapEventElement.push({eventName:"click",className:"qv_qts_image",action:this.actionEditImage,caller:this}),this.mapEventElement.push({eventName:"click",className:"qv_img-group-content",action:this.actionEditImage,caller:this}),this.mapEventElement.push({eventName:"click",className:"qv_ats_image",action:this.actionEditImage,caller:this}),this.mapEventElement.push({eventName:"click",className:"qv_img",action:this.actionEditImage,caller:this}),this.mapEventElement.push({eventName:"click",className:"azt-mathml",action:this.actionEditMathMl,caller:this})}actionEditImage(t){if(t&&this.images.filter(i=>i.id==t.id).length>0){this.conf.imageEditor.show=!0,this.conf.imageEditor.el=t;let i=this.aztEditor?._editor.getValue().split("\n"),a=0,r=0;for(let s of i)if(a++,r=s.indexOf(`[img:$${t.id}$]`),r>=0)break;setTimeout(()=>{this.aztEditor?.setPosition(a,r+1)},100)}}actionEditMathMl(t){let i=t.id;const a=this.mathMap.get(i);a&&this.aztEditor?._editor.getValue().indexOf(`[!m:$${i}$]`)>=0&&setTimeout(()=>{this.aztEditor?.setPosition(a.lineIdx,a.startCol+1),this.openMathEditor(a)},100)}onPushImageAction(t){if(this.conf.imageEditor.show=!1,t.element&&t.element.id&&this.aztEditor){let i=this.images.filter(c=>c.id==t.element?.id)[0];if(!i)return;let r="img_"+(this.images.length>0?Math.max(...this.images.map(c=>+c.id.split("_")[1]))+1:1),s=`[img:$${r}$]`;this.images.push({id:r,link:t.output,cssStyle:i?.cssStyle});let l=this.aztEditor?.getCurPos();this.aztEditor.removeText(l.lineNumber,l.column,l.column+i.id.length+8,!1),this.aztEditor.insertAtCurPos(s)}}checkElementQuestionLazy(){if(this.lstQuest.length>=this.maxQuestEnableLazy){let t=document.getElementsByClassName("question-standalone-content-box"),i=[];for(let a=0;a<t.length;a++){const r=t[a],s=null!==r.getAttribute("start_loading")&&"true"===r.getAttribute("start_loading"),l=r.getAttribute("data-idx-quest"),c=this.lstQuest[Number(l)];c&&(c.lazyQuestView||(c.lazyQuestView={show:!1}),s&&null!==l?(c.lazyQuestView.show||(c.lazyQuestView.show=!0,c.lazyQuestView.curHeight="auto"),i.push(a)):(c.lazyQuestView.curHeight=r.getBoundingClientRect().height+"px",c.lazyQuestView.show=!1))}0==i.length&&t.length>0&&i.push(t.length-1);for(let a of i)for(let r=a-5>=0?a-5:0;r<=a+5&&r<t.length;r++){const l=t[r].getAttribute("data-idx-quest"),c=this.lstQuest[Number(l)];c&&(c.lazyQuestView||(c.lazyQuestView={show:!1}),null!==l&&(c.lazyQuestView.show||(c.lazyQuestView.show=!0,c.lazyQuestView.curHeight="auto")))}}}checkTypeActionService(){const t=document.getElementById("list-quest-panel");t&&this.mapEventElement.forEach(i=>{const a=t.getElementsByClassName(i.className);for(let r=0;r<a.length;r++){const s=a[r];s.getAttribute("event_"+i.eventName+"_target")||(s.setAttribute("event_"+i.eventName+"_target","true"),s.addEventListener(i.eventName,()=>{i.action.call(i.caller,s)}))}})}showFeedbackQuestionDialog(t){this.sAztDialogService.open(Ct.V,{width:"750px",data:{questionObj:{...t,id:t.id??0,answerType:1,answerResult:[],isFixAns:!1,rawIndex:0,statistic:[],powerpointLinks:[],tags:[],examId:0,answers:[],attachments:[]},role:"TEACHER",applyType:"MATRIX_QUESTION"},restoreFocus:!1,autoFocus:!1}).afterClosed().subscribe(a=>{})}onResize(t){this.conf.isCalculatorHeight=!1,this.actionResize()}actionResize(){const t=document.getElementById("toolbar__editor");t&&(this.conf.heightContent=window.innerHeight-t.getBoundingClientRect().height-104,this.isMobile&&(this.conf.heightContent=this.conf.heightContent/2),this.conf.isCalculatorHeight=!0)}onOffChemistry(){this.isChemistry?(this.changeIsChemistry(!1),this.browserStorageService.saveSimpleCloudStorage("IS_CHEMICAL_FORMULA","OFF_CHEMICAL_FORMULA")):(this.changeIsChemistry(!0),this.browserStorageService.saveSimpleCloudStorage("IS_CHEMICAL_FORMULA","ON_CHEMICAL_FORMULA"))}changeIsChemistry(t){this.isChemistry!==t&&(this.isChemistry=t,this.randomAllAgain())}checkChemistry(){"ON_CHEMICAL_FORMULA"==this.browserStorageService.getSimpleStorage("IS_CHEMICAL_FORMULA")&&this.changeIsChemistry(!0)}stopAudio(){window.playMedia&&(window.playMedia.pause(),window.playMedia=void 0)}setupDropFile(){const t=window.jQuery("#list-quest-panel");t&&t.on("drag dragstart dragend dragover dragenter dragleave drop",function(i){i.preventDefault(),i.stopPropagation()}).on("dragover dragenter",function(){t.addClass("is-dragover")}).on("dragleave dragend drop",function(){t.removeClass("is-dragover")}).on("drop",i=>{this.handleFileDrop(i.originalEvent.dataTransfer.files)})}togglePromptCreateExam(){this.showPromptCreateExam=!this.showPromptCreateExam}closeDialogPromptCreateExam(t){this.showPromptCreateExam=!t}aiCreateQuestion(t){this.listQuestionIdCreateByAI=t.map(a=>a.id);const i=this.commonService.castJsonToClassObjs(Le.v,JSON.stringify(t));this.questionRenderService.parseRenderQuestions(i??[],a=>{},this.configRenderService).then(a=>{let r=[];a.forEach((l,c)=>{var u=[];l.tags.forEach(b=>{u.push({id:b.id,questionId:0,code:b.code??"",viName:b.viName??"",enName:b.enName??""})});let m=[{id:l.id,tenantId:l.tenantId,examId:l.examId,categoryId:l.categoryId,metadata:l.metadata,label:(this.lstQuest.length+c).toString(),content:JSON.stringify([l.content]),answerResult:JSON.stringify(l.answerResult),groupId:l.groupId,isImage:l.isImage,answerType:l.answerType,answerConfig:JSON.stringify(l.answers),answerMedia:l.help,isFixAns:l.isFixAns?1:0,groupType:l.groupType,tags:u,attachments:JSON.stringify(l.attachments),version:l.version,knowledgeId:l.knowledgeId}];r.push({key:`[@${l.id}:C\xe2u h\u1ecfi]=>0`,questions:m})}),this.timeOutDelayStatus.refresh=!0,this.timeOutDelayStatus.timeRefresh=(new Date).getTime(),this.matrixLoadedData=[],this.matrixLoadedData=r;let s=this.aztEditor?._editor.getValue().trim()+"\n";this.matrixLoadedData.forEach((l,c)=>{let u=this.lstQuest.map(N=>N.id??0);const m=l.key??"",p=this.apiDataCache.get(m);let L=new Ts(this.cdnService,this.commonService,N=>{this.fillQuest(c,N)},this.apiCallbackCache,this.aztEditor,N=>{this.showErrorSnack(N),p&&this.apiDataCache.set(m,p)},u,this.apiDataCache,this.matrixLoadedData);this.apiDataCache.delete(m),L.render(m,this.images,this.questionService),l.questions&&L.processApiResponseReturnData(l.questions,l.key??"",!1,this.lstQuest.filter(N=>!N.quest.isGroup).length+c+1).then(N=>{s+="\n"+this.getQuestText(N)+"\n",this.aztEditor?._editor.setValue(s)})})}).catch(()=>{this.showErrorSnack("lang_auto_de_thi_tai_khong_thanh_cong")})}ngOnInit(){super.ngOnInit(),this.uploadTurnUuid=this.sAztUuidService.getUuid(),this.conf.logConfig.setStatus("lang_auto_dang_tai_thu_vien"),this.isMobile=this.commonService.isMobileOrTable(),this.maxQuestEnableLazy=this.isMobile?1e4:this.maxQuestEnableLazy,this.checkChemistry(),this.waitDestroy((0,ne.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.conf.cur_cateId=this.commonService.getMyParam(this.activeRoute,"cat_id"),this.editQuestId=+(this.commonService.getMyParam(this.activeRoute,"quest_id")??"0"),this.type=this.commonService.getMyQueryParamOrDefault("self","user"),this.defaultQuestionLabel=this.commonService.getMyQueryParam("defaultQuestLabel"),this.levelId=Number(this.commonService.getMyQueryParam("levelId")??"0"),this.subjectId=Number(this.commonService.getMyQueryParam("subjectId")??"0"),this.isEditGroup=Number(this.commonService.getMyQueryParam("isEditGroup")??"0"),this.conf.typeMatrix=this.type,this.conf.sourceBackToLink=this.commonService.getMyQueryParam("backto"),this.conf.startIndex=Number(this.commonService.getMyQueryParam("r")??"0"),this.isShareDocument=!!this.getMyQueryParam("isShareDocument"),this.conf.reSetBackToLink(),this.sAztQuestionKnowledgeUnitService.getListKnowledgeUnit(this.levelId??0,this.subjectId??0).subscribe(i=>{})})),this.infoService.apiInfoGetConfigObjsGet("CROPPDF_PARAMS,EDITOR_TEMPLATE").subscribe(i=>{this.aztLangConfig=i.CROPPDF_PARAMS,this.aztLangConfigObj=JSON.parse(this.aztLangConfig),this.commonService.loadScriptPromises([{source:this.cdnService.convertCdnLinkOfGitHub("js/mnpaint_bundle.js?v=0.3"),name:"mnpaint_bundle.js"},{source:this.cdnService.registerJsCdn("min.azota_docx_script"),name:"min.azota_docx_script"},{source:this.cdnService.convertCdnLinkOfGitHub("js/SaxonJS2_v2.js"),name:"SaxonJS2_v2.js"},{source:this.cdnService.convertCdnLinkOfGitHub("sprintf.min.js"),name:"sprintf.min.js"},{source:this.cdnService.convertCdnLinkOfGitHub("bundle.js"),name:"bundle.js"},{source:this.cdnService.convertCdnLinkOfGitHub("wmf.v1.js"),name:"wmf.v1.js"},{source:this.cdnService.convertCdnLinkOfGitHub("pdf-js-v3/pdf.js"),name:"pdf-js-v2-pdf.js"},{source:this.cdnService.convertCdnLinkOfGitHub("js/pdf-js-v3/pdf.worker.js"),name:"pdf-js-v2-pdf.worker.js"},{source:this.cdnService.convertCdnLinkOfGitHub("math-editor/mathquill.min.js"),name:"mathquill.min.js"},{source:"https://cdnjs.cloudflare.com/ajax/libs/interact.js/1.10.11/interact.min.js",name:"interact.min.js"},{source:this.cdnService.convertCdnLinkOfGitHub("js/FromEMF.f1.js"),name:"FromEMF.js"},{source:this.cdnService.convertCdnLinkOfGitHub("js/ToContext2D.f1.js"),name:"ToContext2D.js"},{source:this.cdnService.convertCdnLinkOfGitHub("js/UDOC.f1.js"),name:"UDOC.js"}]).then(()=>{this.questionService.apiQuestionGetTagsGet().subscribe(a=>{a.success&&a.data?this.questionTags=a.data.objs??[]:this.showErrorSnack("lang_auto_tai_thu_vien_that_bao_vui_long_load_lai_trang_de_thu_lai"),this.conf.logConfig.stopStatus(),this.fileParser.loadConf(this.aztLangConfig),this.fileParser.init(),this.conf.isConfigInit=!0,"bank"==this.editorOutputDataService.getMode()&&this.openLibrary(),setTimeout(()=>{this.actionResize(),this.setupDropFile()},100)})}).catch(()=>{this.showErrorSnack("lang_auto_tai_thu_vien_that_bao_vui_long_load_lai_trang_de_thu_lai")})});const t=this.getMyQueryParam("sessionId");this.checkExamToProgram=!!t}convertSyntaxMatrixInGroup(t,i){if(!this.isMatrixGetGroup||!i)return t;const a=t[0],r=this.commonService.myTranslateInstant("azt_lang_sugg_question"),s=[];let l=0,c=0,u=0;for(const m of i)if(m.key?.includes("[@F:NH]"))for(const p of m.questions??[]){const f=m.key?.split("=>")[0];if(c!==p.groupId&&void 0!==p.groupId){const b={...a,label:l+1,olabel:`${r} ${l+1}.`,isGroup:!0,questId:p.id,knowledgeId:p.knowledgeId,parts:[{b:0,lineIdx:Number(m.key?.split("#")[1]??"0"),s:0,text:`${f}=>[isGroupTitle]-0`}]};s.push(b),c=p.groupId,u=0}if(c===p.groupId){const b={...a,label:l+1,olabel:`${r} ${l+1}.`,questId:p.id,isGroup:!1,knowledgeId:p.knowledgeId,parts:[{b:0,lineIdx:Number(m.key?.split("#")[1]??"0"),s:0,text:`${f}=>0-${u}`}]};s.push(b),u++}l++}else for(const p of t){const f=p.parts[0].text?.split("=>");if(!f)continue;const b=f[1]?.split("-")[0];if(`${f[0]}=>${b}`===m.key?.split("#")[0]){const N=s.filter(R=>!R.isGroup).length??0;p.label=N+1,p.olabel=`${r} ${N+1}.`,s.push(p)}}return s.length?s:t}convertMatrixLoadedDataInGroup(t,i){if(!this.isMatrixGetGroup||!i)return i;const a=[];for(const r of t){const s={key:r.parts?.[0].text??"",questions:[]};for(const l of i)for(const c of l.questions??[])c.id===r.questId&&s.questions?.push(c);a.push(s)}return a}getExamNameByExamId(t){const i=t.paths?.find(a=>a.id===t.examId);return i?i.name:""}ngDoCheck(){this.checkTypeActionService()}ngOnDestroy(){super.ngOnDestroy(),this.stopAudio()}constructor(t,i,a,r,s,l,c,u,m,p,f,b,L,N,R,j,G,ae,W,le){super(),this.questionHelper=t,this.apiUploadService=i,this.infoService=a,this.documentService=r,this.examService=s,this.cdnService=l,this.activeRoute=c,this.questionRenderService=u,this.editorOutputDataService=m,this.userService=p,this.questionSaveService=f,this.questionService=b,this.discoveryService=L,this.browserStorageService=N,this.sAztDialogService=R,this.examFileService=j,this.sAztUuidService=G,this.paramClassroomService=ae,this.sAztAnswerTypeService=W,this.sAztQuestionKnowledgeUnitService=le,this.images=[],this.editedImages=new Map,this.errorQuestionView=new ns(this.commonService),this.MATH_PAT=/\[!m:\$([^\$\]]+)\$\]/g,this.title=new h.NI("",{nonNullable:!0}),this.lstQuest=[],this.lstQuestReplace=[],this.text="",this.attachFiles=[],this.aztLangConfig="",this.renderCache=new Map,this.apiCallbackCache=new Map,this.apiDataCache=new Map,this.fillQuestCache=new Map,this.loadingManager=new Map,this.errs=[],this.curMathId=1,this.curExtraId=1,this.mathMap=new Map,this.extraMap=new Map,this.showTooltip=!0,this.questionTags=[],this.mapEventElement=[],this.configRenderService=new gn.v,this.maxQuestEnableLazy=20,this.isMobile=!1,this.lastMatrixHash="",this.editQuestId=0,this.editableEventObj={isChange:!1,count:0,addCount:function(){this.count++,this.count>2&&(this.isChange=!0)}},this.type="user",this.timeOutDelayStatus={refresh:!1,timeRefresh:0,limitRefresh:5},this.lstSimilar=[],this.enableEdit=!1,this.showPromptCreateExam=!1,this.willShowAIBox=!Z.N.production||Z.N.isProdAzotaVn,this.isChemistry=!1,this.listQuestionIdCreateByAI=[],this.uploadTurnUuid=void 0,this.shareTypeDocument=de.R,this.isShareDocument=!1,this.isUploadFileDocx=!1,this.checkExamToProgram=!1,this.splitPointService=new $t,this.isFirstScroll=!1,this.isMatrixGetGroup=!1,this.isMouseDown=!1,this.conf=new Dn(this.editorOutputDataService,this.commonService),this.editorApiService=new fe(t,i,r,s,b),this.fileParser=new oe.uD,this.setupEvent();let ve=this.commonService.myTranslateInstant("lang_auto_dang_xu_ly_hinh_anh_cho_de_thi");this.questionSaveService.callbackBase64ToCanvas=(ce,te)=>{this.conf.logConfig.setStatus(`${ve} ${Math.floor(ce/te*100*.7)}%`)},this.questionSaveService.callbackUploadImage=(ce,te)=>{this.conf.logConfig.setStatus(`${ve} ${Math.floor(ce/te*100*.3)+70}%`)}}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(ks),e.Y36(Wr.W),e.Y36(Ss.CM),e.Y36(un.Zg),e.Y36(un.Oe),e.Y36(tr.E),e.Y36(E.gz),e.Y36(Zc.h),e.Y36(Ar.O),e.Y36(ya.U),e.Y36(Ha),e.Y36(un.aE),e.Y36(nr.F),e.Y36(oa.n),e.Y36(qi.C),e.Y36(un._0),e.Y36(Ud.E),e.Y36(Xr),e.Y36(fr.i),e.Y36(Ul))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-azota-editor"]],viewQuery:function(t,i){if(1&t&&(e.Gf(es,5),e.Gf(Qu,5),e.Gf(jl,5)),2&t){let a;e.iGM(a=e.CRH())&&(i.popupConfirm=a.first),e.iGM(a=e.CRH())&&(i.mobileEditor=a.first),e.iGM(a=e.CRH())&&(i.popupOnlyImageEditor=a.first)}},hostBindings:function(t,i){1&t&&e.NdJ("resize",function(r){return i.onResize(r)},!1,e.Jf7)},features:[e.qOj],decls:17,vars:24,consts:[[3,"headerBackToLink","reloadBacktoLink","checkBackDialog","disableConfirmBtn","confirmTitle","showInput","examName","showConfirmButton","handleBackDialog","handleCancel","handleConfirm"],[1,"main__editor",3,"ngClass"],["class","app-editor",4,"ngIf"],["class","loading-mess",4,"ngIf"],["type","file",1,"hiddenIpt",3,"change"],["fileOpenProcess",""],["popupConfirm",""],[3,"inp","isShow","hidden","onClose","onInsertLatex"],[3,"inp","onClose","onInsert",4,"ngIf"],[3,"lstErrors","onClose",4,"ngIf"],[3,"lstQuest","onClose","onNextQuestion",4,"ngIf"],[3,"el_target","onClose","onPushImage",4,"ngIf"],["class","main__homework-save",4,"ngIf"],["class","main__exam-save",4,"ngIf"],["id","testFinderMask",4,"ngIf"],[1,"app-editor"],["id","list-quest-panel"],["class","toolbar-editor box rounded-none","id","toolbar__question",4,"ngIf"],[1,"main-content",3,"scroll","mousedown","mouseup"],["class","question-standalone-content-box",4,"ngIf"],["class","question-standalone-content-box","load_effect_lazy","",3,"id","ngStyle",4,"ngFor","ngForOf"],[2,"height","250px"],[3,"class",4,"ngIf"],["id","toolbar__question",1,"toolbar-editor","box","rounded-none"],[1,"toolbar-left"],[1,"toolbar-right"],["class","toolbar-btn",4,"ngIf"],["azt-track-service","azota-editor-CH8a9F4wc","class","toolbar-btn",3,"click",4,"ngIf"],["azt-track-service","azota-editor-UuiDzppsVL","class","toolbar-btn color-danger",3,"click",4,"ngIf"],["class","toolbar-btn",3,"ngClass",4,"ngIf"],[1,"toolbar-btn"],["azt-track-service","azota-editor-dQFq4Q8eU",1,"btn","btn-sm","btn-primary",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","mr-2","lucide-square-divide"],["width","18","height","18","x","3","y","3","rx","2","ry","2"],["x1","8","x2","16","y1","12","y2","12"],["x1","12","x2","12","y1","16","y2","16"],["x1","12","x2","12","y1","8","y2","8"],["azt-track-service","azota-editor-CH8a9F4wc",1,"toolbar-btn",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-5","h-5","lucide","mr-2"],["cx","12","cy","12","r","10"],["x1","12","x2","12","y1","16","y2","12"],["x1","12","x2","12.01","y1","8","y2","8"],[1,"azt-hidden","md:block"],["azt-track-service","azota-editor-UuiDzppsVL",1,"toolbar-btn","color-danger",3,"click"],["d","M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4"],["d","M14 2v6h6"],["d","m3 12.5 5 5"],["d","m8 12.5-5 5"],[1,"toolbar-btn",3,"ngClass"],[1,"toolbar-btn-input-mode"],[1,"w-5","h-5","inline-block","mr-2"],["name","arrow-up-down"],["type","number","appOnlyNumber","",3,"ngModel","min","ngModelChange","keyup.enter","focus","focusout"],["azt-track-service","azota-editor-EMOtdhqulZ",1,"btn","btn-goto","btn-primary",3,"click"],[1,"question-standalone-content-box"],[1,"box-service","box","border","border-slate-400","dark:border-darkmode-400"],[1,"box-service-content"],[1,"mb-5","tex2jax_process","homework-content"],[3,"content"],["class","box-show-files",4,"ngIf"],["class","box-input-file",4,"ngIf"],[1,"box-show-files"],[1,"box-line"],[4,"ngFor","ngForOf"],[1,"box-file"],["azt-track-service","azota-editor-VmAdzC0JVjO",1,"btn","btn-sm",3,"click"],[2,"font-size","15px","padding-top","5px"],["azt-track-service","azota-editor-YPQZFq3W5pa",3,"click"],[1,"line-file",3,"title"],[1,"box-input-file"],[3,"onDropFile"],["load_effect_lazy","",1,"question-standalone-content-box",3,"id","ngStyle"],["class","box-service box border border-slate-400 dark:border-darkmode-400",4,"ngIf"],["class","skeleton-box-loading h-100 w-100",4,"ngIf"],["class","fix-content",3,"matTooltip",4,"ngIf"],[1,"box-metadata",3,"innerHTML"],["class","group-box-header",4,"ngIf"],["class","box-service-content relative",4,"ngIf"],["class","box-service-header w-full",4,"ngIf"],["reportQTakeTest","","class","feedback-btn",4,"ngIf"],[1,"fix-content",3,"matTooltip"],[1,"group-box-header"],[1,"title"],["azt-track-service","azota-editor-t2MSjyyGi8_",1,"link-option",3,"click"],[1,"box-service-content","relative"],["class","exam-box mt-1",4,"ngIf"],[1,"exam-box","mt-1"],["azt-track-service","azota-editor-sBE9TpjyDRX",3,"click"],[1,"box-service-header","w-full"],[3,"q","notOnlyQuestEdit","index","questionTags","onChangeQuest","onRandomQuest","onApplyAllTag","onError","onLabelClick","onHotKeyPointSync","onExtraInfo","onCut","onDel","onCopy"],[3,"knowledgeId","questionContent","questionId","levelId","subjectId",4,"ngIf"],["class","exam-box",3,"innerHTML",4,"ngIf"],[3,"knowledgeId","questionContent","questionId","levelId","subjectId"],[3,"class","ngClass",4,"ngIf"],[4,"ngIf"],["class","mt-4",4,"ngIf"],["class","box-an",4,"ngFor","ngForOf"],[1,"mt-4"],[1,"font-bold"],["class","bag-label",4,"ngFor","ngForOf"],[1,"bag-label"],[1,"box-an"],["class","checkmark",4,"ngIf"],["azt-track-service","azota-editor-KqGja32WPDY",1,"box-an-label",3,"matTooltipPosition","matTooltip","ngClass","click"],["azt-track-service","azota-editor-cZIOwUqdMq6",1,"tex2jax_process","box-an-content",3,"ngClass","click"],[1,"checkmark"],[1,"checkmark_stem"],[1,"checkmark_kick"],[1,"checkmark_stem_red"],[1,"checkmark_kick_red"],[3,"ngClass"],[1,"help-title"],["azt-track-service","azota-editor-K029PsYFgYK",1,"tex2jax_process","help-content","text-slate-500",3,"click"],[1,"exam-box",3,"innerHTML"],["reportQTakeTest","",1,"feedback-btn"],["azt-track-service","azota-editor-QmBorNGdB","matTooltipShowDelay","200",1,"btn","btn-sm","p-1","w-6","h-6",3,"matTooltip","click"],["name","alert-octagon"],[1,"skeleton-box-loading","h-100","w-100"],["id","toolbar__editor",1,"toolbar-editor","box","rounded-none"],["azt-track-service","azota-editor-PYOwtUkbiHX","class","toolbar-btn",3,"click",4,"ngIf"],["azt-track-service","azota-editor-RriKBPZhZhL","class","toolbar-btn",3,"click",4,"ngIf"],["azt-track-service","azota-editor-SevIBYRKYxI","class","toolbar-btn",3,"click",4,"ngIf"],["azt-track-service","azota-editor-Tse343hGe","class","toolbar-btn",3,"click",4,"ngIf"],[3,"config","readOnly","editorApiService","onStartProcessFile","onInit"],["class","footer-editor",4,"ngIf"],["class","ai-chat-box",4,"ngIf"],["azt-track-service","azota-editor-PYOwtUkbiHX",1,"toolbar-btn",3,"click"],["d","M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"],["points","17 8 12 3 7 8"],["x1","12","y1","3","x2","12","y2","15"],["azt-track-service","azota-editor-RriKBPZhZhL",1,"toolbar-btn",3,"click"],["x1","12","y1","5","x2","12","y2","19"],["x1","5","y1","12","x2","19","y2","12"],["azt-track-service","azota-editor-SevIBYRKYxI",1,"toolbar-btn",3,"click"],["d","M18 7V4H6l6 8-6 8h12v-3"],["azt-track-service","azota-editor-Tse343hGe",1,"toolbar-btn",3,"click"],[1,"w-6","h-5","inline-block","mr-1"],[1,"w-full","h-full","inline-block",3,"src"],[1,"btn-transpanrent",3,"matMenuTriggerFor"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-5","h-5","lucide"],["cx","12","cy","12","r","1"],["cx","12","cy","5","r","1"],["cx","12","cy","19","r","1"],["menu","matMenu"],[1,"dropdown-menu","show","w-64","relative"],[1,"dropdown-content"],["azt-track-service","azota-editor-a3UJXgWi4cK",1,"dropdown-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide","mr-2"],["d","M21 2v6h-6"],["d","M3 12a9 9 0 0 1 15-6.7L21 8"],["d","M3 22v-6h6"],["d","M21 12a9 9 0 0 1-15 6.7L3 16"],["azt-track-service","azota-editor-qiMlRVgbu","for","chemistry-switch",1,"dropdown-item","cursor-pointer",3,"click"],[1,"form-check","form-switch","ml-auto"],["id","chemistry-switch","type","checkbox",1,"show-code","form-check-input","ml-2",3,"checked","change"],["azt-track-service","azota-editor-55CS__ezSf3",1,"dropdown-item",3,"click"],["x","6","y","14","width","9","height","6","rx","2"],["x","6","y","4","width","16","height","6","rx","2"],["d","M2 2v20"],["points","7 10 12 15 17 10"],["x1","12","y1","15","x2","12","y2","3"],[1,"footer-editor"],[1,"footer-item"],["azt-track-service","azota-editor-bC2YM9_C3mx",1,"text-primary",3,"click"],["azt-track-service","azota-editor-ENvq0_KzaKp",1,"text-primary",3,"click"],["azt-track-service","azota-editor-lHk43akYxBc",1,"text-primary",3,"click"],["azt-track-service","azota-editor-zb38B_roeqf",1,"text-primary",3,"click"],["azt-track-service","azota-editor-33xcpGogy",1,"text-primary",3,"click"],[1,"ai-chat-box"],[3,"questList","close","createQuestion"],[1,"loading-mess"],[1,"loading-content"],[1,"icon-msg"],[1,"w-4","h-4","inline-block","mr-2"],[1,"text-msg"],[3,"inp","onClose","onInsert"],[3,"lstErrors","onClose"],[3,"lstQuest","onClose","onNextQuestion"],[3,"el_target","onClose","onPushImage"],[1,"main__homework-save"],[3,"onBack"],[1,"main__exam-save"],[3,"listQuestionIdCreateByAI","onBack"],[3,"type","isCreateQuestionToEditor","onBack"],["id","testFinderMask"],[1,"box","border","border-slate-400","dark:border-darkmode-400",3,"closeTestFinder"]],template:function(t,i){if(1&t&&(e.TgZ(0,"editor-layout",0),e.NdJ("handleBackDialog",function(){return i.conf.showEditor()})("handleCancel",function(){return i.cancelAction()})("handleConfirm",function(){return i.saveAction()}),e.TgZ(1,"div",1),e.YNc(2,ju,8,7,"div",2),e.qZA(),e.YNc(3,cp,8,3,"div",3),e.TgZ(4,"input",4,5),e.NdJ("change",function(r){return i.openFile(r)}),e.qZA(),e._UZ(6,"editor-confirm",null,6),e.TgZ(8,"mathtype-editor",7),e.NdJ("onClose",function(){return i.conf.mathEditor.show=!1})("onInsertLatex",function(r){return i.onInsertLatex(r)}),e.qZA(),e.YNc(9,Jc,1,1,"similar-quest",8),e.YNc(10,qd,1,1,"show-errors-quests",9),e.YNc(11,rA,1,1,"show-info-quests",10),e.YNc(12,Rd,1,1,"only-image-editor",11),e.YNc(13,zd,2,0,"div",12),e.YNc(14,qu,2,1,"div",13),e.YNc(15,up,2,2,"div",13),e.YNc(16,Lr,2,0,"div",14),e.qZA()),2&t){let a;e.Q6J("headerBackToLink",i.conf.getBackLink())("reloadBacktoLink",i.conf.editor.show)("checkBackDialog",!i.conf.editor.show)("disableConfirmBtn",i.editQuestId>0&&!i.editableEventObj.isChange||i.enableEdit||i.loadingManager.size>0)("confirmTitle",0==i.editQuestId?"lang_auto_tiep_tuc":"lang_button_save")("showInput",i.conf.editor.show&&!i.editQuestId&&!i.checkExamToProgram)("examName",i.title)("showConfirmButton",i.conf.editor.show),e.xp6(1),e.Q6J("ngClass",e.VKq(22,Kc,!i.conf.editor.show)),e.xp6(1),e.Q6J("ngIf",i.conf.isConfigInit),e.xp6(1),e.Q6J("ngIf",i.conf.logConfig.status),e.xp6(5),e.Q6J("inp",i.conf.mathEditor.latex)("isShow",null!==(a=i.conf.mathEditor.show)&&void 0!==a&&a)("hidden",!i.conf.mathEditor.show),e.xp6(1),e.Q6J("ngIf",i.conf.similarQuest.show),e.xp6(1),e.Q6J("ngIf",i.conf.showErrorsQuests.show),e.xp6(1),e.Q6J("ngIf",i.conf.showInfomationQuests.show),e.xp6(1),e.Q6J("ngIf",i.conf.imageEditor.show),e.xp6(1),e.Q6J("ngIf",i.conf.homeworkSave.show),e.xp6(1),e.Q6J("ngIf",i.conf.examSave.show&&!i.isShareDocument),e.xp6(1),e.Q6J("ngIf",i.conf.examSave.show&&i.isShareDocument),e.xp6(1),e.Q6J("ngIf",i.conf.startLibrary)}},styles:['#testFinderMask[_ngcontent-%COMP%]{padding:15px;background-color:#00000085;position:fixed;inset:0;z-index:999}#testFinderMask[_ngcontent-%COMP%]   app-test-finder[_ngcontent-%COMP%]{display:block;position:fixed;inset:15px;display:flex;flex-direction:column}.app-editor[_ngcontent-%COMP%]{display:flex;width:100%;height:calc(100vh - 55px);overflow:hidden}.col-questions[_ngcontent-%COMP%], .col-editor[_ngcontent-%COMP%]{width:50%}.col-editor[_ngcontent-%COMP%]{border-left:1px solid #e0e0e0}.toolbar-editor[_ngcontent-%COMP%]{display:flex;--tw-border-opacity: 1;border-bottom:1px solid rgb(var(--color-slate-200)/var(--tw-border-opacity));box-shadow:none;justify-content:space-between}.toolbar-btn[_ngcontent-%COMP%]{position:relative;padding:10px;font-size:13px;border-right:1px solid #e0e0e0;cursor:pointer;display:flex;align-items:center;-webkit-user-select:none;user-select:none;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.2s}.toolbar-btn[_ngcontent-%COMP%]:hover{background-color:#ededed90}.toolbar-btn[_ngcontent-%COMP%]   .toolbar-btn-mode-normal[_ngcontent-%COMP%], .toolbar-btn[_ngcontent-%COMP%]   .toolbar-btn-input-mode[_ngcontent-%COMP%]{display:flex;align-items:center}.toolbar-btn[_ngcontent-%COMP%]   .toolbar-btn-input-mode[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:30px;width:60px;margin-left:10px;font-size:smaller;border-radius:5px}.toolbar-btn[_ngcontent-%COMP%]   .toolbar-btn-input-mode[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none}.toolbar-btn[_ngcontent-%COMP%]   .btn-goto[_ngcontent-%COMP%], .toolbar-btn[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]{height:30px;margin-left:5px}.toolbar-right[_ngcontent-%COMP%]   .toolbar-btn[_ngcontent-%COMP%]{border-right:none;border-left:1px solid #e0e0e0;padding:5px 20px}.toolbar-right[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:0;margin-left:5px}.toolbar-left[_ngcontent-%COMP%], .toolbar-right[_ngcontent-%COMP%]{display:flex}.col-questions[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column}.col-questions[_ngcontent-%COMP%]   .toolbar-editor[_ngcontent-%COMP%]{margin-bottom:10px;box-shadow:#1b1f230a 0 1px,#ffffff40 0 1px inset}.col-questions[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]{height:100%;overflow:auto}.question-standalone-content-box[_ngcontent-%COMP%]{margin:10px}.loading-mess[_ngcontent-%COMP%]{width:100vw;height:100vh;position:fixed;z-index:9;top:0;left:0;display:flex;justify-content:center;align-items:center;background-color:#0006}.loading-content[_ngcontent-%COMP%]{text-align:center;color:#000}.loading-content[_ngcontent-%COMP%]   .text-msg[_ngcontent-%COMP%]{font-size:20px;margin-top:10px;background-color:#f0f8ffa3;padding:10px;border-radius:5px}.icon-msg[_ngcontent-%COMP%]{margin-bottom:10px}.text-msg[_ngcontent-%COMP%]{font-size:20px}.footer-editor[_ngcontent-%COMP%]{border-top:1px solid #e0e0e0;display:flex;align-items:center}.footer-editor[_ngcontent-%COMP%]   .footer-item[_ngcontent-%COMP%]{padding:5px}.footer-editor[_ngcontent-%COMP%]   .footer-link[_ngcontent-%COMP%]{color:#2361ae;cursor:pointer}.footer-editor[_ngcontent-%COMP%]   .footer-sp[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:center;align-items:center}.footer-editor[_ngcontent-%COMP%]   .footer-sp[_ngcontent-%COMP%]:hover   .footer-link-hover[_ngcontent-%COMP%]{display:block}.footer-editor[_ngcontent-%COMP%]   .footer-sp[_ngcontent-%COMP%]   .footer-link-hover[_ngcontent-%COMP%]{cursor:pointer;display:none;position:absolute;width:300px;left:0;top:calc(-25px - 100%);background:antiquewhite;padding:10px;border-radius:5px;box-shadow:#091e4240 0 4px 8px -2px,#091e4214 0 0 0 1px}.footer-editor[_ngcontent-%COMP%]   .footer-sp[_ngcontent-%COMP%]   .footer-link-hover[_ngcontent-%COMP%]:before{content:"";position:absolute;bottom:-6px;left:20px;border-left:10px solid transparent;border-right:10px solid transparent;border-top:10px solid #faebd7}.box-an[_ngcontent-%COMP%]{display:flex;align-items:center;position:relative;cursor:pointer}.box-an[_ngcontent-%COMP%]:hover   .box-an-content[_ngcontent-%COMP%], .box-an[_ngcontent-%COMP%]:hover   .box-an-label[_ngcontent-%COMP%]{outline:1px solid #2462ae}.box-an-label[_ngcontent-%COMP%]{font-weight:700;margin-right:5px;min-width:25px;justify-content:center}.box-an-content[_ngcontent-%COMP%], .box-content[_ngcontent-%COMP%]{padding:5px;outline:1px solid #ccc;border-radius:3px;margin-bottom:5px;align-items:center;overflow-wrap:anywhere;overflow-x:auto;overflow-y:hidden}.box-an-content[_ngcontent-%COMP%]{padding-right:20px}.box-an-label[_ngcontent-%COMP%]{padding:5px;outline:1px solid #ccc;border-radius:3px;margin-bottom:5px;display:flex;align-items:center;overflow-wrap:anywhere}.an-true[_ngcontent-%COMP%]{outline:1px solid #2462ae;color:#2462ae;position:relative}.checkmark[_ngcontent-%COMP%]{position:absolute;left:-25px;display:inline-block;width:22px;height:22px;transform:rotate(45deg)}.checkmark_stem[_ngcontent-%COMP%]{position:absolute;width:3px;height:9px;background-color:#2462ae;left:11px;top:6px}.checkmark_kick[_ngcontent-%COMP%]{position:absolute;width:3px;height:3px;background-color:#2462ae;left:8px;top:12px}.checkmark_stem_red[_ngcontent-%COMP%]{position:absolute;width:3px;height:9px;background-color:#ae2424;left:11px;top:6px}.checkmark_kick_red[_ngcontent-%COMP%]{position:absolute;width:9px;height:3px;background-color:#ae2424;left:8px;top:9px}.link-tooltip[_ngcontent-%COMP%]{color:#2462ae;cursor:pointer}.box-service-name[_ngcontent-%COMP%], .box-service-question-name[_ngcontent-%COMP%]{outline:1px solid #ccc;padding:3px 10px!important;border-radius:3px;font-weight:500}.box-service-question-name[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content}.box-service-question[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap}.box-service-question[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child{border-right:none}.box-service-question[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:last-child{border-right:none}.box-service-question[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding:0 10px;cursor:pointer;color:#2462ae;border-right:1px solid #ccc}.first-text[_ngcontent-%COMP%]{display:flex;align-items:center}.first-text[_ngcontent-%COMP%]   marquee[_ngcontent-%COMP%]{width:100px}.first-text[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;margin-right:5px;display:flex;justify-content:center;align-items:center}.selection[_ngcontent-%COMP%]{border:1.5px solid #2462ae;box-shadow:#00000073 0 25px 20px -20px}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.inp-point[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:space-between;align-items:center}.inp-point[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:40px;text-align:center;padding:5px;border-radius:5px;outline:1px solid #ccc;border:none}.inp-point[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:1px solid #2262ae;box-shadow:#11111a0d 0 1px,#11111a1a 0 0 8px}.inp-point[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-outer-spin-button, .inp-point[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.inp-point[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}.inp-point[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{border-right:none;text-align:left;padding:0 0 0 10px}.hide[_ngcontent-%COMP%]{display:none!important}  .mat-form-field-underline{display:none}  .question-standalone-is-invalid-validation{color:#f44336;position:relative;padding-left:20px;display:flex;align-items:center;margin-bottom:10px}  .question-standalone-is-invalid-validation:before{content:"!";position:absolute;left:0;color:#fff;background:#f44336;width:15px;height:15px;text-align:center;border-radius:50%;font-size:smaller;display:flex;justify-content:center;align-items:center}.box-service[_ngcontent-%COMP%]{position:relative;margin:10px 0;padding:20px 30px;border-radius:5px;box-shadow:none}.box-service[_ngcontent-%COMP%]:first-child{margin:0 0 10px}.box-service-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:5px}  .img-docx,   .qv_qts_image,   .qv_img-group-content,   .qv_ats_image{cursor:pointer;max-width:100%}  .qv_img-group-content{width:100%}  .qv_full_a_img{cursor:pointer;width:60%}  .qv_full_img{cursor:pointer;width:100%}  .qv_img{cursor:pointer;margin-top:-1px}  .qv_none_image{display:inline-block;color:#2262ae;cursor:pointer}.box-help[_ngcontent-%COMP%]{border-top:1px solid #d7d7d7;margin:15px -30px 0;padding:10px 30px 0}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]{text-align:center;font-size:11px;margin-top:-20px}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#fff;padding:0 10px;color:#d58e0b}.box-help[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]{font-size:13px;overflow-x:auto;overflow-y:hidden}.font-bold[_ngcontent-%COMP%]{font-weight:700}.bag-label[_ngcontent-%COMP%]{border-radius:5px;background:#c0c0c0;padding:4px;font-size:13px;margin-right:5px}.bag-label[_ngcontent-%COMP%]:last-child{margin-right:0}.mt-4[_ngcontent-%COMP%]{margin-top:4px}.mb-5[_ngcontent-%COMP%]{margin-bottom:5px}.box-show-files[_ngcontent-%COMP%]{background:#f0f0f0;border-radius:5px;padding:10px;margin-bottom:3px}.padding-mobile[_ngcontent-%COMP%]{padding-left:5px;padding-right:5px}@media screen and (max-width: 580px){.app-editor[_ngcontent-%COMP%]{flex-direction:column;height:auto;overflow:auto}.col-questions[_ngcontent-%COMP%], .col-editor[_ngcontent-%COMP%]{width:100%}.main__editor[_ngcontent-%COMP%]{overflow-x:hidden}}  .q-table td{border:1px solid #c0c0c0;padding:3px 10px}  .box-content img,   .box-an-content img{max-width:100%}.group-box-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;position:relative;cursor:pointer}.group-box-header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{outline:1px solid #ccc;padding:3px 10px!important;border-radius:3px;font-weight:500}.group-box-header[_ngcontent-%COMP%]   .link-option[_ngcontent-%COMP%]{cursor:pointer;color:#2462ae;margin-left:10px}.fix-content[_ngcontent-%COMP%]{position:absolute;font-size:15px;color:#2361ae;top:0;left:5px;transform:rotate(-45deg)}.lazy_quest[_ngcontent-%COMP%]{width:100%;height:200px}  .skeleton-box-loading{display:inline-block;position:relative;overflow:hidden}  .skeleton-box-loading:after{position:absolute;inset:0;transform:translate(-100%);animation:_ngcontent-%COMP%_shimmer 2s infinite;content:""}@keyframes _ngcontent-%COMP%_shimmer{to{transform:translate(100%)}}  .box-service-content .homework-content{overflow-y:auto}  .box-service-content .azt-mathml{cursor:pointer}  .box-service-content .azt-mathml:hover{background-color:#ebebeb}button.menu[_ngcontent-%COMP%]{text-transform:none!important}.header-file-name[_ngcontent-%COMP%]{width:100%;text-align:center;border:0}.w-100[_ngcontent-%COMP%]{width:100%}.h-100[_ngcontent-%COMP%]{height:100%}.azt-order-1[_ngcontent-%COMP%]{order:1}.azt-order-2[_ngcontent-%COMP%]{order:2}@media screen and (max-width: 768px){.box-an-content[_ngcontent-%COMP%], .box-content[_ngcontent-%COMP%], .box-help[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]{overflow-y:auto}}.toolbar-btn-input-mode[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-outer-spin-button, .toolbar-btn-input-mode[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.toolbar-btn-input-mode[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}  .height40{height:40px!important}.hover-none[_ngcontent-%COMP%]:hover{background-color:transparent!important}.ai-chat-box[_ngcontent-%COMP%]{position:absolute;top:50px;left:50%;transform:translate(-50%);width:85%}']}),n})(),ol=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[{provide:C.f8,useValue:Z.N.azt_tiny_mce_script_src}],imports:[F.ez,M.j,h.u5,h.UX,B.Z,C.Z_,k.kb,_.qyJ.pick(_.ciZ),D.W]}),n})();var Ni=I(69530),Ki=I(76094),al=I(15828),yi=I(71002),Ri=Uint8Array,ti=Uint16Array,ma=Uint32Array,xr=new Ri([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Kl=new Ri([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Gc=new Ri([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Hd=function(n,o){for(var t=new ti(31),i=0;i<31;++i)t[i]=o+=1<<n[i-1];var a=new ma(t[30]);for(i=1;i<30;++i)for(var r=t[i];r<t[i+1];++r)a[r]=r-t[i]<<5|i;return[t,a]},Jd=Hd(xr,2),rl=Jd[0],sl=Jd[1];rl[28]=258,sl[258]=28;for(var Kd=Hd(Kl,0),dp=Kd[0],Qr=Kd[1],Os=new ti(32768),Gi=0;Gi<32768;++Gi){var Is=(43690&Gi)>>>1|(21845&Gi)<<1;Os[Gi]=((65280&(Is=(61680&(Is=(52428&Is)>>>2|(13107&Is)<<2))>>>4|(3855&Is)<<4))>>>8|(255&Is)<<8)>>>1}var or=function(n,o,t){for(var i=n.length,a=0,r=new ti(o);a<i;++a)++r[n[a]-1];var l,s=new ti(o);for(a=0;a<o;++a)s[a]=s[a-1]+r[a-1]<<1;if(t){l=new ti(1<<o);var c=15-o;for(a=0;a<i;++a)if(n[a])for(var u=a<<4|n[a],m=o-n[a],p=s[n[a]-1]++<<m,f=p|(1<<m)-1;p<=f;++p)l[Os[p]>>>c]=u}else for(l=new ti(i),a=0;a<i;++a)l[a]=Os[s[n[a]-1]++]>>>15-n[a];return l},is=new Ri(288);for(Gi=0;Gi<144;++Gi)is[Gi]=8;for(Gi=144;Gi<256;++Gi)is[Gi]=9;for(Gi=256;Gi<280;++Gi)is[Gi]=7;for(Gi=280;Gi<288;++Gi)is[Gi]=8;var ll=new Ri(32);for(Gi=0;Gi<32;++Gi)ll[Gi]=5;var Gd=or(is,9,0),mp=or(is,9,1),pp=or(ll,5,0),hp=or(ll,5,1),Ru=function(n){for(var o=n[0],t=1;t<n.length;++t)n[t]>o&&(o=n[t]);return o},ar=function(n,o,t){var i=o/8>>0;return(n[i]|n[i+1]<<8)>>>(7&o)&t},zu=function(n,o){var t=o/8>>0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>>(7&o)},Gl=function(n){return(n/8>>0)+(7&n&&1)},br=function(n,o,t){(null==o||o<0)&&(o=0),(null==t||t>n.length)&&(t=n.length);var i=new(n instanceof ti?ti:n instanceof ma?ma:Ri)(t-o);return i.set(n.subarray(o,t)),i},Fr=function(n,o,t){var i=o/8>>0;n[i]|=t<<=7&o,n[i+1]|=t>>>8},Yl=function(n,o,t){var i=o/8>>0;n[i]|=t<<=7&o,n[i+1]|=t>>>8,n[i+2]|=t>>>16},Hu=function(n,o){for(var t=[],i=0;i<n.length;++i)n[i]&&t.push({s:i,f:n[i]});var a=t.length,r=t.slice();if(!a)return[new Ri(0),0];if(1==a){var s=new Ri(t[0].s+1);return s[t[0].s]=1,[s,1]}t.sort(function(le,ve){return le.f-ve.f}),t.push({s:-1,f:25001});var l=t[0],c=t[1],u=0,m=1,p=2;for(t[0]={s:-1,f:l.f+c.f,l,r:c};m!=a-1;)l=t[t[u].f<t[p].f?u++:p++],c=t[u!=m&&t[u].f<t[p].f?u++:p++],t[m++]={s:-1,f:l.f+c.f,l,r:c};var f=r[0].s;for(i=1;i<a;++i)r[i].s>f&&(f=r[i].s);var b=new ti(f+1),L=$c(t[m-1],b,0);if(L>o){i=0;var N=0,R=L-o,j=1<<R;for(r.sort(function(ve,ce){return b[ce.s]-b[ve.s]||ve.f-ce.f});i<a;++i){var G=r[i].s;if(!(b[G]>o))break;N+=j-(1<<L-b[G]),b[G]=o}for(N>>>=R;N>0;){var ae=r[i].s;b[ae]<o?N-=1<<o-b[ae]++-1:++i}for(;i>=0&&N;--i){var W=r[i].s;b[W]==o&&(--b[W],++N)}L=o}return[new Ri(b),L]},$c=function(n,o,t){return-1==n.s?Math.max($c(n.l,o,t+1),$c(n.r,o,t+1)):o[n.s]=t},Yd=function(n){for(var o=n.length;o&&!n[--o];);for(var t=new ti(++o),i=0,a=n[0],r=1,s=function(c){t[i++]=c},l=1;l<=o;++l)if(n[l]==a&&l!=o)++r;else{if(!a&&r>2){for(;r>138;r-=138)s(32754);r>2&&(s(r>10?r-11<<5|28690:r-3<<5|12305),r=0)}else if(r>3){for(s(a),--r;r>6;r-=6)s(8304);r>2&&(s(r-3<<5|8208),r=0)}for(;r--;)s(a);r=1,a=n[l]}return[t.subarray(0,i),o]},$l=function(n,o){for(var t=0,i=0;i<o.length;++i)t+=n[i]*o[i];return t},Vc=function(n,o,t){var i=t.length,a=Gl(o+2);n[a]=255&i,n[a+1]=i>>>8,n[a+2]=255^n[a],n[a+3]=255^n[a+1];for(var r=0;r<i;++r)n[a+r+4]=t[r];return 8*(a+4+i)},Wc=function(n,o,t,i,a,r,s,l,c,u,m){Fr(o,m++,t),++a[256];for(var p=Hu(a,15),f=p[0],b=p[1],L=Hu(r,15),N=L[0],R=L[1],j=Yd(f),G=j[0],ae=j[1],W=Yd(N),le=W[0],ve=W[1],ce=new ti(19),te=0;te<G.length;++te)ce[31&G[te]]++;for(te=0;te<le.length;++te)ce[31&le[te]]++;for(var Se=Hu(ce,7),Ze=Se[0],se=Se[1],pe=19;pe>4&&!Ze[Gc[pe-1]];--pe);var Fe,Re,Je,Ke,Be=u+5<<3,Pe=$l(a,is)+$l(r,ll)+s,Oe=$l(a,f)+$l(r,N)+s+14+3*pe+$l(ce,Ze)+(2*ce[16]+3*ce[17]+7*ce[18]);if(Be<=Pe&&Be<=Oe)return Vc(o,m,n.subarray(c,c+u));if(Fr(o,m,1+(Oe<Pe)),m+=2,Oe<Pe){Fe=or(f,b,0),Re=f,Je=or(N,R,0),Ke=N;var et=or(Ze,se,0);for(Fr(o,m,ae-257),Fr(o,m+5,ve-1),Fr(o,m+10,pe-4),m+=14,te=0;te<pe;++te)Fr(o,m+3*te,Ze[Gc[te]]);m+=3*pe;for(var gt=[G,le],ue=0;ue<2;++ue){var Te=gt[ue];for(te=0;te<Te.length;++te)Fr(o,m,et[Ee=31&Te[te]]),m+=Ze[Ee],Ee>15&&(Fr(o,m,Te[te]>>>5&127),m+=Te[te]>>>12)}}else Fe=Gd,Re=is,Je=pp,Ke=ll;for(te=0;te<l;++te)if(i[te]>255){var Ee;Yl(o,m,Fe[257+(Ee=i[te]>>>18&31)]),m+=Re[Ee+257],Ee>7&&(Fr(o,m,i[te]>>>23&31),m+=xr[Ee]);var Ue=31&i[te];Yl(o,m,Je[Ue]),m+=Ke[Ue],Ue>3&&(Yl(o,m,i[te]>>>5&8191),m+=Kl[Ue])}else Yl(o,m,Fe[i[te]]),m+=Re[i[te]];return Yl(o,m,Fe[256]),m+Re[256]},$d=new ma([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Ju=new Ri(0),Wl=function(n,o,t,i,a){return function(n,o,t,i,a,r){var s=n.length,l=new Ri(i+s+5*(1+Math.floor(s/7e3))+a),c=l.subarray(i,l.length-a),u=0;if(!o||s<8)for(var m=0;m<=s;m+=65535){var p=m+65535;p<s?u=Vc(c,u,n.subarray(m,p)):(c[m]=r,u=Vc(c,u,n.subarray(m,s)))}else{for(var f=$d[o-1],b=f>>>13,L=8191&f,N=(1<<t)-1,R=new ti(32768),j=new ti(N+1),G=Math.ceil(t/3),ae=2*G,W=function(dn){return(n[dn]^n[dn+1]<<G^n[dn+2]<<ae)&N},le=new ma(25e3),ve=new ti(288),ce=new ti(32),te=0,Se=0,Ze=(m=0,0),se=0,pe=0;m<s;++m){var Be=W(m),Pe=32767&m,Oe=j[Be];if(R[Pe]=Oe,j[Be]=Pe,se<=m){var Fe=s-m;if((te>7e3||Ze>24576)&&Fe>423){u=Wc(n,c,0,le,ve,ce,Se,Ze,pe,m-pe,u),Ze=te=Se=0,pe=m;for(var Re=0;Re<286;++Re)ve[Re]=0;for(Re=0;Re<30;++Re)ce[Re]=0}var Je=2,Ke=0,et=L,gt=Pe-Oe&32767;if(Fe>2&&Be==W(m-gt))for(var ue=Math.min(b,Fe)-1,Te=Math.min(32767,m),Ee=Math.min(258,Fe);gt<=Te&&--et&&Pe!=Oe;){if(n[m+Je]==n[m+Je-gt]){for(var Ue=0;Ue<Ee&&n[m+Ue]==n[m+Ue-gt];++Ue);if(Ue>Je){if(Je=Ue,Ke=gt,Ue>ue)break;var $e=Math.min(gt,Ue-2),ut=0;for(Re=0;Re<$e;++Re){var st=m-gt+Re+32768&32767,Rt=st-R[st]+32768&32767;Rt>ut&&(ut=Rt,Oe=st)}}}gt+=(Pe=Oe)-(Oe=R[Pe])+32768&32767}if(Ke){le[Ze++]=268435456|sl[Je]<<18|Qr[Ke];var Qt=31&sl[Je],nn=31&Qr[Ke];Se+=xr[Qt]+Kl[nn],++ve[257+Qt],++ce[nn],se=m+Je,++te}else le[Ze++]=n[m],++ve[n[m]]}}u=Wc(n,c,r,le,ve,ce,Se,Ze,pe,m-pe,u),r||(u=Vc(c,u,Ju))}return br(l,0,i+Gl(u)+a)}(n,null==o.level?6:o.level,null==o.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(n.length)))):12+o.mem,t,i,!a)};function Yu(n,o){void 0===o&&(o={});var t=function(){var n=1,o=0;return{p:function(t){for(var i=n,a=o,r=t.length,s=0;s!=r;){for(var l=Math.min(s+5552,r);s<l;++s)a+=i+=t[s];i%=65521,a%=65521}n=i,o=a},d:function(){return(n>>>8<<16|(255&o)<<8|o>>>8)+2*((255&n)<<23)}}}();t.p(n);var i=Wl(n,o,2,4);return function(n,o){var t=o.level,i=0==t?0:t<6?1:9==t?3:2;n[0]=120,n[1]=i<<6|(i?32-2*i:1)}(i,o),function(n,o,t){for(;t;++o)n[o]=t,t>>>=8}(i,i.length-4,t.d()),i}function Xd(n,o){return function(n,o,t){var i=n.length,a=!o||t,r=!t||t.i;t||(t={}),o||(o=new Ri(3*i));var s=function($e){var ut=o.length;if($e>ut){var st=new Ri(Math.max(2*ut,$e));st.set(o),o=st}},l=t.f||0,c=t.p||0,u=t.b||0,m=t.l,p=t.d,f=t.m,b=t.n,L=8*i;do{if(!m){t.f=l=ar(n,c,1);var N=ar(n,c+1,3);if(c+=3,!N){var j=n[(R=Gl(c)+4)-4]|n[R-3]<<8,G=R+j;if(G>i){if(r)throw"unexpected EOF";break}a&&s(u+j),o.set(n.subarray(R,G),u),t.b=u+=j,t.p=c=8*G;continue}if(1==N)m=mp,p=hp,f=9,b=5;else{if(2!=N)throw"invalid block type";var ae=ar(n,c,31)+257,W=ar(n,c+10,15)+4,le=ae+ar(n,c+5,31)+1;c+=14;for(var ve=new Ri(le),ce=new Ri(19),te=0;te<W;++te)ce[Gc[te]]=ar(n,c+3*te,7);c+=3*W;var Se=Ru(ce),Ze=(1<<Se)-1;if(!r&&c+le*(Se+7)>L)break;var se=or(ce,Se,1);for(te=0;te<le;){var R,pe=se[ar(n,c,Ze)];if(c+=15&pe,(R=pe>>>4)<16)ve[te++]=R;else{var Be=0,Pe=0;for(16==R?(Pe=3+ar(n,c,3),c+=2,Be=ve[te-1]):17==R?(Pe=3+ar(n,c,7),c+=3):18==R&&(Pe=11+ar(n,c,127),c+=7);Pe--;)ve[te++]=Be}}var Oe=ve.subarray(0,ae),Fe=ve.subarray(ae);f=Ru(Oe),b=Ru(Fe),m=or(Oe,f,1),p=or(Fe,b,1)}if(c>L)throw"unexpected EOF"}a&&s(u+131072);for(var Re=(1<<f)-1,Je=(1<<b)-1,Ke=f+b+18;r||c+Ke<L;){var et=(Be=m[zu(n,c)&Re])>>>4;if((c+=15&Be)>L)throw"unexpected EOF";if(!Be)throw"invalid length/literal";if(et<256)o[u++]=et;else{if(256==et){m=null;break}var gt=et-254;et>264&&(gt=ar(n,c,(1<<(ue=xr[te=et-257]))-1)+rl[te],c+=ue);var Te=p[zu(n,c)&Je],Ee=Te>>>4;if(!Te)throw"invalid distance";if(c+=15&Te,Fe=dp[Ee],Ee>3){var ue=Kl[Ee];Fe+=zu(n,c)&(1<<ue)-1,c+=ue}if(c>L)throw"unexpected EOF";a&&s(u+131072);for(var Ue=u+gt;u<Ue;u+=4)o[u]=o[u-Fe],o[u+1]=o[u+1-Fe],o[u+2]=o[u+2-Fe],o[u+3]=o[u+3-Fe];u=Ue}}t.l=m,t.p=c,t.b=u,m&&(l=1,t.m=f,t.d=p,t.n=b)}while(!l);return u==o.length?o:br(o,0,u)}((function(n){if(8!=(15&n[0])||n[0]>>>4>7||(n[0]<<8|n[1])%31)throw"invalid zlib data";if(32&n[1])throw"invalid zlib data: preset dictionaries not supported"}(n),n.subarray(2,-4)),o)}var Qn=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function mA(){Qn.console&&"function"==typeof Qn.console.log&&Qn.console.log.apply(Qn.console,arguments)}var io={log:mA,warn:function(n){Qn.console&&("function"==typeof Qn.console.warn?Qn.console.warn.apply(Qn.console,arguments):mA.call(null,arguments))},error:function(n){Qn.console&&("function"==typeof Qn.console.error?Qn.console.error.apply(Qn.console,arguments):mA(n))}};function pA(n,o,t){var i=new XMLHttpRequest;i.open("GET",n),i.responseType="blob",i.onload=function(){nu(i.response,o,t)},i.onerror=function(){io.error("could not download file")},i.send()}function ff(n){var o=new XMLHttpRequest;o.open("HEAD",n,!1);try{o.send()}catch{}return o.status>=200&&o.status<=299}function tu(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var o=document.createEvent("MouseEvents");o.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(o)}}var em,hA,nu=Qn.saveAs||("object"!==(typeof window>"u"?"undefined":(0,yi.Z)(window))||window!==Qn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,o,t){var i=Qn.URL||Qn.webkitURL,a=document.createElement("a");a.download=o=o||n.name||"download",a.rel="noopener","string"==typeof n?(a.href=n,a.origin!==location.origin?ff(a.href)?pA(n,o,t):tu(a,a.target="_blank"):tu(a)):(a.href=i.createObjectURL(n),setTimeout(function(){i.revokeObjectURL(a.href)},4e4),setTimeout(function(){tu(a)},0))}:"msSaveOrOpenBlob"in navigator?function(n,o,t){if(o=o||n.name||"download","string"==typeof n)if(ff(n))pA(n,o,t);else{var i=document.createElement("a");i.href=n,i.target="_blank",setTimeout(function(){tu(i)})}else navigator.msSaveOrOpenBlob((a=n,void 0===(r=t)?r={autoBom:!1}:"object"!==(0,yi.Z)(r)&&(io.warn("Deprecated: Expected third argument to be a object"),r={autoBom:!r}),r.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob([String.fromCharCode(65279),a],{type:a.type}):a),o);var a,r}:function(n,o,t,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),"string"==typeof n)return pA(n,o,t);var a="application/octet-stream"===n.type,r=/constructor/i.test(Qn.HTMLElement)||Qn.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||a&&r)&&"object"===(typeof FileReader>"u"?"undefined":(0,yi.Z)(FileReader))){var l=new FileReader;l.onloadend=function(){var m=l.result;m=s?m:m.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=m:location=m,i=null},l.readAsDataURL(n)}else{var c=Qn.URL||Qn.webkitURL,u=c.createObjectURL(n);i?i.location=u:location.href=u,i=null,setTimeout(function(){c.revokeObjectURL(u)},4e4)}});function gf(n){var o;n=n||"",this.ok=!1,"#"==n.charAt(0)&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],i=0;i<t.length;i++){var r=t[i].process,s=t[i].re.exec(n);s&&(o=r(s),this.r=o[0],this.g=o[1],this.b=o[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),u=this.b.toString(16);return 1==l.length&&(l="0"+l),1==c.length&&(c="0"+c),1==u.length&&(u="0"+u),"#"+l+c+u}}function $u(n,o){var t=n[0],i=n[1],a=n[2],r=n[3];t=Qa(t,i,a,r,o[0],7,-680876936),r=Qa(r,t,i,a,o[1],12,-389564586),a=Qa(a,r,t,i,o[2],17,606105819),i=Qa(i,a,r,t,o[3],22,-1044525330),t=Qa(t,i,a,r,o[4],7,-176418897),r=Qa(r,t,i,a,o[5],12,1200080426),a=Qa(a,r,t,i,o[6],17,-1473231341),i=Qa(i,a,r,t,o[7],22,-45705983),t=Qa(t,i,a,r,o[8],7,1770035416),r=Qa(r,t,i,a,o[9],12,-1958414417),a=Qa(a,r,t,i,o[10],17,-42063),i=Qa(i,a,r,t,o[11],22,-1990404162),t=Qa(t,i,a,r,o[12],7,1804603682),r=Qa(r,t,i,a,o[13],12,-40341101),a=Qa(a,r,t,i,o[14],17,-1502002290),t=Fa(t,i=Qa(i,a,r,t,o[15],22,1236535329),a,r,o[1],5,-165796510),r=Fa(r,t,i,a,o[6],9,-1069501632),a=Fa(a,r,t,i,o[11],14,643717713),i=Fa(i,a,r,t,o[0],20,-373897302),t=Fa(t,i,a,r,o[5],5,-701558691),r=Fa(r,t,i,a,o[10],9,38016083),a=Fa(a,r,t,i,o[15],14,-660478335),i=Fa(i,a,r,t,o[4],20,-405537848),t=Fa(t,i,a,r,o[9],5,568446438),r=Fa(r,t,i,a,o[14],9,-1019803690),a=Fa(a,r,t,i,o[3],14,-187363961),i=Fa(i,a,r,t,o[8],20,1163531501),t=Fa(t,i,a,r,o[13],5,-1444681467),r=Fa(r,t,i,a,o[2],9,-51403784),a=Fa(a,r,t,i,o[7],14,1735328473),t=Na(t,i=Fa(i,a,r,t,o[12],20,-1926607734),a,r,o[5],4,-378558),r=Na(r,t,i,a,o[8],11,-2022574463),a=Na(a,r,t,i,o[11],16,1839030562),i=Na(i,a,r,t,o[14],23,-35309556),t=Na(t,i,a,r,o[1],4,-1530992060),r=Na(r,t,i,a,o[4],11,1272893353),a=Na(a,r,t,i,o[7],16,-155497632),i=Na(i,a,r,t,o[10],23,-1094730640),t=Na(t,i,a,r,o[13],4,681279174),r=Na(r,t,i,a,o[0],11,-358537222),a=Na(a,r,t,i,o[3],16,-722521979),i=Na(i,a,r,t,o[6],23,76029189),t=Na(t,i,a,r,o[9],4,-640364487),r=Na(r,t,i,a,o[12],11,-421815835),a=Na(a,r,t,i,o[15],16,530742520),t=ra(t,i=Na(i,a,r,t,o[2],23,-995338651),a,r,o[0],6,-198630844),r=ra(r,t,i,a,o[7],10,1126891415),a=ra(a,r,t,i,o[14],15,-1416354905),i=ra(i,a,r,t,o[5],21,-57434055),t=ra(t,i,a,r,o[12],6,1700485571),r=ra(r,t,i,a,o[3],10,-1894986606),a=ra(a,r,t,i,o[10],15,-1051523),i=ra(i,a,r,t,o[1],21,-2054922799),t=ra(t,i,a,r,o[8],6,1873313359),r=ra(r,t,i,a,o[15],10,-30611744),a=ra(a,r,t,i,o[6],15,-1560198380),i=ra(i,a,r,t,o[13],21,1309151649),t=ra(t,i,a,r,o[4],6,-145523070),r=ra(r,t,i,a,o[11],10,-1120210379),a=ra(a,r,t,i,o[2],15,718787259),i=ra(i,a,r,t,o[9],21,-343485551),n[0]=ec(t,n[0]),n[1]=ec(i,n[1]),n[2]=ec(a,n[2]),n[3]=ec(r,n[3])}function xp(n,o,t,i,a,r){return o=ec(ec(o,n),ec(i,r)),ec(o<<a|o>>>32-a,t)}function Qa(n,o,t,i,a,r,s){return xp(o&t|~o&i,n,o,a,r,s)}function Fa(n,o,t,i,a,r,s){return xp(o&i|t&~i,n,o,a,r,s)}function Na(n,o,t,i,a,r,s){return xp(o^t^i,n,o,a,r,s)}function ra(n,o,t,i,a,r,s){return xp(t^(o|~i),n,o,a,r,s)}function xf(n){var o,t=n.length,i=[1732584193,-271733879,-1732584194,271733878];for(o=64;o<=n.length;o+=64)$u(i,Z0(n.substring(o-64,o)));n=n.substring(o-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(o=0;o<n.length;o++)a[o>>2]|=n.charCodeAt(o)<<(o%4<<3);if(a[o>>2]|=128<<(o%4<<3),o>55)for($u(i,a),o=0;o<16;o++)a[o]=0;return a[14]=8*t,$u(i,a),i}function Z0(n){var o,t=[];for(o=0;o<64;o+=4)t[o>>2]=n.charCodeAt(o)+(n.charCodeAt(o+1)<<8)+(n.charCodeAt(o+2)<<16)+(n.charCodeAt(o+3)<<24);return t}em=Qn.atob.bind(Qn),hA=Qn.btoa.bind(Qn);var bf="0123456789abcdef".split("");function D0(n){for(var o="",t=0;t<4;t++)o+=bf[n>>8*t+4&15]+bf[n>>8*t&15];return o}function U0(n){return String.fromCharCode((255&n)>>0,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function AA(n){return xf(n).map(U0).join("")}var j0="5d41402abc4b2a76b9719d911017c592"!=function(n){for(var o=0;o<n.length;o++)n[o]=D0(n[o]);return n.join("")}(xf("hello"));function ec(n,o){if(j0){var t=(65535&n)+(65535&o);return(n>>16)+(o>>16)+(t>>16)<<16|65535&t}return n+o&4294967295}function _A(n,o){var t,i,a;if(n!==t){for(var s=(a=n,new Array(1+(256/n.length>>0)+1).join(a)),l=[],c=0;c<256;c++)l[c]=c;var u=0;for(c=0;c<256;c++){var m=l[c];u=(u+m+s.charCodeAt(c))%256,l[c]=l[u],l[u]=m}t=n,i=l}else l=i;var p=o.length,f=0,b=0,L="";for(c=0;c<p;c++)b=(b+(m=l[f=(f+1)%256]))%256,l[f]=l[b],l[b]=m,s=l[(l[f]+l[b])%256],L+=String.fromCharCode(o.charCodeAt(c)^s);return L}var vf={print:4,modify:8,copy:16,"annot-forms":32};function tc(n,o,t,i){this.v=1,this.r=2;var a=192;n.forEach(function(l){if(void 0!==vf.perm)throw new Error("Invalid permission: "+l);a+=vf[l]}),this.padding="(\xbfN^Nu\x8aAd\0NV\xff\xfa\x01\b..\0\xb6\xd0h>\x80/\f\xa9\xfedSiz";var r=(o+this.padding).substr(0,32),s=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(r,s),this.P=-(1+(255^a)),this.encryptionKey=AA(r+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(i)).substr(0,5),this.U=_A(this.encryptionKey,this.padding)}function Vu(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var o="",t=n.length,i=0;i<t;i++){var a=n.charCodeAt(i);o+=a<33||35===a||37===a||40===a||41===a||47===a||60===a||62===a||91===a||93===a||123===a||125===a||a>126?"#"+("0"+a.toString(16)).slice(-2):n[i]}return o}function wf(n){if("object"!==(0,yi.Z)(n))throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var o={};this.subscribe=function(t,i,a){if(a=a||!1,"string"!=typeof t||"function"!=typeof i||"boolean"!=typeof a)throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");o.hasOwnProperty(t)||(o[t]={});var r=Math.random().toString(35);return o[t][r]=[i,!!a],r},this.unsubscribe=function(t){for(var i in o)if(o[i][t])return delete o[i][t],0===Object.keys(o[i]).length&&delete o[i],!0;return!1},this.publish=function(t){if(o.hasOwnProperty(t)){var i=Array.prototype.slice.call(arguments,1),a=[];for(var r in o[t]){var s=o[t][r];try{s[0].apply(n,i)}catch(l){Qn.console&&io.error("jsPDF PubSub Error",l.message,l)}s[1]&&a.push(r)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return o}}function nc(n){if(!(this instanceof nc))return new nc(n);var o="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&o.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function yf(n,o){this.gState=n,this.matrix=o,this.id="",this.objectNumber=-1}function ic(n,o,t,i,a){if(!(this instanceof ic))return new ic(n,o,t,i,a);this.type="axial"===n?2:3,this.coords=o,this.colors=t,yf.call(this,i,a)}function dl(n,o,t,i,a){if(!(this instanceof dl))return new dl(n,o,t,i,a);this.boundingBox=n,this.xStep=o,this.yStep=t,this.stream="",this.cloneIndex=0,yf.call(this,i,a)}function In(n){var o,t="string"==typeof arguments[0]?arguments[0]:"p",i=arguments[1],a=arguments[2],r=arguments[3],s=[],l=1,c=16,u="S",m=null;"object"===(0,yi.Z)(n=n||{})&&(t=n.orientation,i=n.unit||i,a=n.format||a,r=n.compress||n.compressPdf||r,null!==(m=n.encryption||null)&&(m.userPassword=m.userPassword||"",m.ownerPassword=m.ownerPassword||"",m.userPermissions=m.userPermissions||[]),l="number"==typeof n.userUnit?Math.abs(n.userUnit):1,void 0!==n.precision&&(o=n.precision),void 0!==n.floatPrecision&&(c=n.floatPrecision),u=n.defaultPathOperation||"S"),s=n.filters||(!0===r?["FlateEncode"]:s),i=i||"mm",t=(""+(t||"P")).toLowerCase();var p=n.putOnlyUsedFonts||!1,f={},b={internal:{},__private__:{}};b.__private__.PubSub=wf;var L="1.3",N=b.__private__.getPdfVersion=function(){return L};b.__private__.setPdfVersion=function(q){L=q};var R={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};b.__private__.getPageFormats=function(){return R};var j=b.__private__.getPageFormat=function(q){return R[q]};a=a||"a4";var ae="compat";function W(){this.saveGraphicsState(),je(new zn(An,0,0,-An,0,Sd()*An).toString()+" cm"),this.setFontSize(this.getFontSize()/An),u="n",ae="advanced"}function le(){this.restoreGraphicsState(),u="S",ae="compat"}var ve=b.__private__.combineFontStyleAndFontWeight=function(q,he){if("bold"==q&&"normal"==he||"bold"==q&&400==he||"normal"==q&&"italic"==he||"bold"==q&&"italic"==he)throw new Error("Invalid Combination of fontweight and fontstyle");return he&&(q=400==he||"normal"===he?"italic"===q?"italic":"normal":700!=he&&"bold"!==he||"normal"!==q?(700==he?"bold":he)+""+q:"bold"),q};b.advancedAPI=function(q){var he="compat"===ae;return he&&W.call(this),"function"!=typeof q||(q(this),he&&le.call(this)),this},b.compatAPI=function(q){var he="advanced"===ae;return he&&le.call(this),"function"!=typeof q||(q(this),he&&W.call(this)),this},b.isAdvancedAPI=function(){return"advanced"===ae};var ce,te=function(q){if("advanced"!==ae)throw new Error(q+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},Se=b.roundToPrecision=b.__private__.roundToPrecision=function(q,he){var De=o||he;if(isNaN(q)||isNaN(De))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return q.toFixed(De).replace(/0+$/,"")};ce=b.hpf=b.__private__.hpf="number"==typeof c?function(q){if(isNaN(q))throw new Error("Invalid argument passed to jsPDF.hpf");return Se(q,c)}:"smart"===c?function(q){if(isNaN(q))throw new Error("Invalid argument passed to jsPDF.hpf");return Se(q,q>-1&&q<1?16:5)}:function(q){if(isNaN(q))throw new Error("Invalid argument passed to jsPDF.hpf");return Se(q,16)};var Ze=b.f2=b.__private__.f2=function(q){if(isNaN(q))throw new Error("Invalid argument passed to jsPDF.f2");return Se(q,2)},se=b.__private__.f3=function(q){if(isNaN(q))throw new Error("Invalid argument passed to jsPDF.f3");return Se(q,3)},pe=b.scale=b.__private__.scale=function(q){if(isNaN(q))throw new Error("Invalid argument passed to jsPDF.scale");return"compat"===ae?q*An:"advanced"===ae?q:void 0},Pe=function(q){return pe(function(q){return"compat"===ae?Sd()-q:"advanced"===ae?q:void 0}(q))};b.__private__.setPrecision=b.setPrecision=function(q){"number"==typeof parseInt(q,10)&&(o=parseInt(q,10))};var Oe,Fe="00000000000000000000000000000000",Re=b.__private__.getFileId=function(){return Fe},Je=b.__private__.setFileId=function(q){return Fe=void 0!==q&&/^[a-fA-F0-9]{32}$/.test(q)?q.toUpperCase():Fe.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),null!==m&&(pr=new tc(m.userPermissions,m.userPassword,m.ownerPassword,Fe)),Fe};b.setFileId=function(q){return Je(q),this},b.getFileId=function(){return Re()};var Ke=b.__private__.convertDateToPDFDate=function(q){var he=q.getTimezoneOffset(),De=he<0?"+":"-",Ye=Math.floor(Math.abs(he/60)),lt=Math.abs(he%60),yt=[De,Ee(Ye),"'",Ee(lt),"'"].join("");return["D:",q.getFullYear(),Ee(q.getMonth()+1),Ee(q.getDate()),Ee(q.getHours()),Ee(q.getMinutes()),Ee(q.getSeconds()),yt].join("")},et=b.__private__.convertPDFDateToDate=function(q){var he=parseInt(q.substr(2,4),10),De=parseInt(q.substr(6,2),10)-1,Ye=parseInt(q.substr(8,2),10),lt=parseInt(q.substr(10,2),10),yt=parseInt(q.substr(12,2),10),zt=parseInt(q.substr(14,2),10);return new Date(he,De,Ye,lt,yt,zt,0)},gt=b.__private__.setCreationDate=function(q){var he;if(void 0===q&&(q=new Date),q instanceof Date)he=Ke(q);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(q))throw new Error("Invalid argument passed to jsPDF.setCreationDate");he=q}return Oe=he},ue=b.__private__.getCreationDate=function(q){var he=Oe;return"jsDate"===q&&(he=et(Oe)),he};b.setCreationDate=function(q){return gt(q),this},b.getCreationDate=function(q){return ue(q)};var Te,Ee=b.__private__.padd2=function(q){return("0"+parseInt(q)).slice(-2)},Ue=b.__private__.padd2Hex=function(q){return("00"+(q=q.toString())).substr(q.length)},$e=0,ut=[],st=[],dt=0,Rt=[],Qt=[],nn=!1,tn=st;b.__private__.setCustomOutputDestination=function(q){nn=!0,tn=q};var ft=function(q){nn||(tn=q)};b.__private__.resetCustomOutputDestination=function(){nn=!1,tn=st};var je=b.__private__.out=function(q){return q=q.toString(),dt+=q.length+1,tn.push(q),tn},En=b.__private__.write=function(q){return je(1===arguments.length?q.toString():Array.prototype.join.call(arguments," "))},wn=b.__private__.getArrayBuffer=function(q){for(var he=q.length,De=new ArrayBuffer(he),Ye=new Uint8Array(De);he--;)Ye[he]=q.charCodeAt(he);return De},Zt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];b.__private__.getStandardFonts=function(){return Zt};var Vt=n.fontSize||16;b.__private__.setFontSize=b.setFontSize=function(q){return Vt="advanced"===ae?q/An:q,this};var an,Wt=b.__private__.getFontSize=b.getFontSize=function(){return"compat"===ae?Vt:Vt*An},On=n.R2L||!1;b.__private__.setR2L=b.setR2L=function(q){return On=q,this},b.__private__.getR2L=b.getR2L=function(){return On};var Gn,ei=b.__private__.setZoomMode=function(q){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(q))an=q;else if(isNaN(q)){if(-1===[void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(q))throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+q+'" is not recognized.');an=q}else an=parseInt(q,10)};b.__private__.getZoomMode=function(){return an};var gi,Mi=b.__private__.setPageMode=function(q){if(-1==[void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(q))throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+q+'" is not recognized.');Gn=q};b.__private__.getPageMode=function(){return Gn};var po=b.__private__.setLayoutMode=function(q){if(-1==[void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(q))throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+q+'" is not recognized.');gi=q};b.__private__.getLayoutMode=function(){return gi},b.__private__.setDisplayMode=b.setDisplayMode=function(q,he,De){return ei(q),po(he),Mi(De),this};var Vn={title:"",subject:"",author:"",keywords:"",creator:""};b.__private__.getDocumentProperty=function(q){if(-1===Object.keys(Vn).indexOf(q))throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Vn[q]},b.__private__.getDocumentProperties=function(){return Vn},b.__private__.setDocumentProperties=b.setProperties=b.setDocumentProperties=function(q){for(var he in Vn)Vn.hasOwnProperty(he)&&q[he]&&(Vn[he]=q[he]);return this},b.__private__.setDocumentProperty=function(q,he){if(-1===Object.keys(Vn).indexOf(q))throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Vn[q]=he};var Si,An,mr,Ji,Tl,fo={},Qo={},Oc=[],to={},Um={},Xo={},kl={},wu=null,ea=0,ri=[],no=new wf(b),jm=n.hotfixes||[],Xa={},Ic={},Mc=[],zn=function q(he,De,Ye,lt,yt,zt){if(!(this instanceof q))return new q(he,De,Ye,lt,yt,zt);isNaN(he)&&(he=1),isNaN(De)&&(De=0),isNaN(Ye)&&(Ye=0),isNaN(lt)&&(lt=1),isNaN(yt)&&(yt=0),isNaN(zt)&&(zt=0),this._matrix=[he,De,Ye,lt,yt,zt]};Object.defineProperty(zn.prototype,"sx",{get:function(){return this._matrix[0]},set:function(q){this._matrix[0]=q}}),Object.defineProperty(zn.prototype,"shy",{get:function(){return this._matrix[1]},set:function(q){this._matrix[1]=q}}),Object.defineProperty(zn.prototype,"shx",{get:function(){return this._matrix[2]},set:function(q){this._matrix[2]=q}}),Object.defineProperty(zn.prototype,"sy",{get:function(){return this._matrix[3]},set:function(q){this._matrix[3]=q}}),Object.defineProperty(zn.prototype,"tx",{get:function(){return this._matrix[4]},set:function(q){this._matrix[4]=q}}),Object.defineProperty(zn.prototype,"ty",{get:function(){return this._matrix[5]},set:function(q){this._matrix[5]=q}}),Object.defineProperty(zn.prototype,"a",{get:function(){return this._matrix[0]},set:function(q){this._matrix[0]=q}}),Object.defineProperty(zn.prototype,"b",{get:function(){return this._matrix[1]},set:function(q){this._matrix[1]=q}}),Object.defineProperty(zn.prototype,"c",{get:function(){return this._matrix[2]},set:function(q){this._matrix[2]=q}}),Object.defineProperty(zn.prototype,"d",{get:function(){return this._matrix[3]},set:function(q){this._matrix[3]=q}}),Object.defineProperty(zn.prototype,"e",{get:function(){return this._matrix[4]},set:function(q){this._matrix[4]=q}}),Object.defineProperty(zn.prototype,"f",{get:function(){return this._matrix[5]},set:function(q){this._matrix[5]=q}}),Object.defineProperty(zn.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(zn.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(zn.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(zn.prototype,"isIdentity",{get:function(){return 1===this.sx&&0===this.shy&&0===this.shx&&1===this.sy&&0===this.tx&&0===this.ty}}),zn.prototype.join=function(q){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(ce).join(q)},zn.prototype.multiply=function(q){return new zn(q.sx*this.sx+q.shy*this.shx,q.sx*this.shy+q.shy*this.sy,q.shx*this.sx+q.sy*this.shx,q.shx*this.shy+q.sy*this.sy,q.tx*this.sx+q.ty*this.shx+this.tx,q.tx*this.shy+q.ty*this.sy+this.ty)},zn.prototype.decompose=function(){var q=this.sx,he=this.shy,De=this.shx,Ye=this.sy,lt=this.tx,yt=this.ty,zt=Math.sqrt(q*q+he*he),_n=(q/=zt)*De+(he/=zt)*Ye;De-=q*_n,Ye-=he*_n;var Fn=Math.sqrt(De*De+Ye*Ye);return _n/=Fn,q*(Ye/=Fn)<he*(De/=Fn)&&(q=-q,he=-he,_n=-_n,zt=-zt),{scale:new zn(zt,0,0,Fn,0,0),translate:new zn(1,0,0,1,lt,yt),rotate:new zn(q,he,-he,q,0,0),skew:new zn(1,0,_n,1,0,0)}},zn.prototype.toString=function(q){return this.join(" ")},zn.prototype.inversed=function(){var q=this.sx,he=this.shy,De=this.shx,Ye=this.sy,lt=this.tx,yt=this.ty,zt=1/(q*Ye-he*De),_n=Ye*zt,Fn=-he*zt,ci=-De*zt,xi=q*zt;return new zn(_n,Fn,ci,xi,-_n*lt-ci*yt,-Fn*lt-xi*yt)},zn.prototype.applyToPoint=function(q){return new Fh(q.x*this.sx+q.y*this.shx+this.tx,q.x*this.shy+q.y*this.sy+this.ty)},zn.prototype.applyToRectangle=function(q){var he=this.applyToPoint(q),De=this.applyToPoint(new Fh(q.x+q.w,q.y+q.h));return new G_(he.x,he.y,De.x-he.x,De.y-he.y)},zn.prototype.clone=function(){return new zn(this.sx,this.shy,this.shx,this.sy,this.tx,this.ty)},b.Matrix=zn;var Sl=b.matrixMult=function(q,he){return he.multiply(q)},Lc=new zn(1,0,0,1,0,0);b.unitMatrix=b.identityMatrix=Lc;var Hr=function(q,he){if(!Um[q]){var De=(he instanceof ic?"Sh":"P")+(Object.keys(to).length+1).toString(10);he.id=De,Um[q]=De,to[De]=he,no.publish("addPattern",he)}};b.ShadingPattern=ic,b.TilingPattern=dl,b.addShadingPattern=function(q,he){return te("addShadingPattern()"),Hr(q,he),this},b.beginTilingPattern=function(q){te("beginTilingPattern()"),u0(q.boundingBox[0],q.boundingBox[1],q.boundingBox[2]-q.boundingBox[0],q.boundingBox[3]-q.boundingBox[1],q.matrix)},b.endTilingPattern=function(q,he){te("endTilingPattern()"),he.stream=Qt[Te].join("\n"),Hr(q,he),no.publish("endTilingPattern",he),Mc.pop().restore()};var q,Ia=b.__private__.newObject=function(){var q=ga();return bs(q,!0),q},ga=b.__private__.newObjectDeferred=function(){return $e++,ut[$e]=function(){return dt},$e},bs=function(q,he){return he="boolean"==typeof he&&he,ut[q]=dt,he&&je(q+" 0 obj"),q},yh=b.__private__.newAdditionalObject=function(){var q={objId:ga(),content:""};return Rt.push(q),q},yu=ga(),El=ga(),Ol=b.__private__.decodeColorString=function(q){var he=q.split(" ");if(2!==he.length||"g"!==he[1]&&"G"!==he[1])5===he.length&&("k"===he[4]||"K"===he[4])&&(he=[(1-he[0])*(1-he[3]),(1-he[1])*(1-he[3]),(1-he[2])*(1-he[3]),"r"]);else{var De=parseFloat(he[0]);he=[De,De,De,"r"]}for(var Ye="#",lt=0;lt<3;lt++)Ye+=("0"+Math.floor(255*parseFloat(he[lt])).toString(16)).slice(-2);return Ye},Il=b.__private__.encodeColorString=function(q){var he;"string"==typeof q&&(q={ch1:q});var De=q.ch1,Ye=q.ch2,lt=q.ch3,yt=q.ch4,zt="draw"===q.pdfColorType?["G","RG","K"]:["g","rg","k"];if("string"==typeof De&&"#"!==De.charAt(0)){var _n=new gf(De);if(_n.ok)De=_n.toHex();else if(!/^\d*\.?\d*$/.test(De))throw new Error('Invalid color "'+De+'" passed to jsPDF.encodeColorString.')}if("string"==typeof De&&/^#[0-9A-Fa-f]{3}$/.test(De)&&(De="#"+De[1]+De[1]+De[2]+De[2]+De[3]+De[3]),"string"==typeof De&&/^#[0-9A-Fa-f]{6}$/.test(De)){var Fn=parseInt(De.substr(1),16);De=Fn>>16&255,Ye=Fn>>8&255,lt=255&Fn}if(void 0===Ye||void 0===yt&&De===Ye&&Ye===lt)he="string"==typeof De?De+" "+zt[0]:2===q.precision?Ze(De/255)+" "+zt[0]:se(De/255)+" "+zt[0];else if(void 0===yt||"object"===(0,yi.Z)(yt)){if(yt&&!isNaN(yt.a)&&0===yt.a)return["1.","1.","1.",zt[1]].join(" ");he="string"==typeof De?[De,Ye,lt,zt[1]].join(" "):2===q.precision?[Ze(De/255),Ze(Ye/255),Ze(lt/255),zt[1]].join(" "):[se(De/255),se(Ye/255),se(lt/255),zt[1]].join(" ")}else he="string"==typeof De?[De,Ye,lt,yt,zt[2]].join(" "):2===q.precision?[Ze(De),Ze(Ye),Ze(lt),Ze(yt),zt[2]].join(" "):[se(De),se(Ye),se(lt),se(yt),zt[2]].join(" ");return he},Bc=b.__private__.getFilters=function(){return s},Ws=b.__private__.putStream=function(q){var he=(q=q||{}).data||"",De=q.filters||Bc(),Ye=q.alreadyAppliedFilters||[],lt=q.addLength1||!1,yt=he.length,zt=q.objectId,_n=function(hr){return hr};if(null!==m&&void 0===zt)throw new Error("ObjectId must be passed to putStream for file encryption");null!==m&&(_n=pr.encryptor(zt,0));var Fn={};!0===De&&(De=["FlateEncode"]);var ci=q.additionalKeyValues||[],xi=(Fn=void 0!==In.API.processDataByFilters?In.API.processDataByFilters(he,De):{data:he,reverseChain:[]}).reverseChain+(Array.isArray(Ye)?Ye.join(" "):Ye.toString());if(0!==Fn.data.length&&(ci.push({key:"Length",value:Fn.data.length}),!0===lt&&ci.push({key:"Length1",value:yt})),0!=xi.length)if(xi.split("/").length-1==1)ci.push({key:"Filter",value:xi});else{ci.push({key:"Filter",value:"["+xi+"]"});for(var Fi=0;Fi<ci.length;Fi+=1)if("DecodeParms"===ci[Fi].key){for(var Ho=[],ta=0;ta<Fn.reverseChain.split("/").length-1;ta+=1)Ho.push("null");Ho.push(ci[Fi].value),ci[Fi].value="["+Ho.join(" ")+"]"}}je("<<");for(var xa=0;xa<ci.length;xa++)je("/"+ci[xa].key+" "+ci[xa].value);je(">>"),0!==Fn.data.length&&(je("stream"),je(_n(Fn.data)),je("endstream"))},Pc=b.__private__.putPage=function(q){var he=q.number,De=q.data,Ye=q.objId,lt=q.contentsObjId;bs(Ye,!0),je("<</Type /Page"),je("/Parent "+q.rootDictionaryObjId+" 0 R"),je("/Resources "+q.resourceDictionaryObjId+" 0 R"),je("/MediaBox ["+parseFloat(ce(q.mediaBox.bottomLeftX))+" "+parseFloat(ce(q.mediaBox.bottomLeftY))+" "+ce(q.mediaBox.topRightX)+" "+ce(q.mediaBox.topRightY)+"]"),null!==q.cropBox&&je("/CropBox ["+ce(q.cropBox.bottomLeftX)+" "+ce(q.cropBox.bottomLeftY)+" "+ce(q.cropBox.topRightX)+" "+ce(q.cropBox.topRightY)+"]"),null!==q.bleedBox&&je("/BleedBox ["+ce(q.bleedBox.bottomLeftX)+" "+ce(q.bleedBox.bottomLeftY)+" "+ce(q.bleedBox.topRightX)+" "+ce(q.bleedBox.topRightY)+"]"),null!==q.trimBox&&je("/TrimBox ["+ce(q.trimBox.bottomLeftX)+" "+ce(q.trimBox.bottomLeftY)+" "+ce(q.trimBox.topRightX)+" "+ce(q.trimBox.topRightY)+"]"),null!==q.artBox&&je("/ArtBox ["+ce(q.artBox.bottomLeftX)+" "+ce(q.artBox.bottomLeftY)+" "+ce(q.artBox.topRightX)+" "+ce(q.artBox.topRightY)+"]"),"number"==typeof q.userUnit&&1!==q.userUnit&&je("/UserUnit "+q.userUnit),no.publish("putPage",{objId:Ye,pageContext:ri[he],pageNumber:he,page:De}),je("/Contents "+lt+" 0 R"),je(">>"),je("endobj");var yt=De.join("\n");return"advanced"===ae&&(yt+="\nQ"),bs(lt,!0),Ws({data:yt,filters:Bc(),objectId:lt}),je("endobj"),Ye},qm=b.__private__.putPages=function(){var q,he,De=[];for(q=1;q<=ea;q++)ri[q].objId=ga(),ri[q].contentsObjId=ga();for(q=1;q<=ea;q++)De.push(Pc({number:q,data:Qt[q],objId:ri[q].objId,contentsObjId:ri[q].contentsObjId,mediaBox:ri[q].mediaBox,cropBox:ri[q].cropBox,bleedBox:ri[q].bleedBox,trimBox:ri[q].trimBox,artBox:ri[q].artBox,userUnit:ri[q].userUnit,rootDictionaryObjId:yu,resourceDictionaryObjId:El}));bs(yu,!0),je("<</Type /Pages");var Ye="/Kids [";for(he=0;he<ea;he++)Ye+=De[he]+" 0 R ";je(Ye+"]"),je("/Count "+ea),je(">>"),je("endobj"),no.publish("postPutPages")},Ch=function(q){no.publish("putFont",{font:q,out:je,newObject:Ia,putStream:Ws}),!0!==q.isAlreadyPutted&&(q.objectNumber=Ia(),je("<<"),je("/Type /Font"),je("/BaseFont /"+Vu(q.postScriptName)),je("/Subtype /Type1"),"string"==typeof q.encoding&&je("/Encoding /"+q.encoding),je("/FirstChar 32"),je("/LastChar 255"),je(">>"),je("endobj"))},kh=function(q){q.objectNumber=Ia();var he=[];he.push({key:"Type",value:"/XObject"}),he.push({key:"Subtype",value:"/Form"}),he.push({key:"BBox",value:"["+[ce(q.x),ce(q.y),ce(q.x+q.width),ce(q.y+q.height)].join(" ")+"]"}),he.push({key:"Matrix",value:"["+q.matrix.toString()+"]"});var De=q.pages[1].join("\n");Ws({data:De,additionalKeyValues:he,objectId:q.objectNumber}),je("endobj")},Sb=function(q,he){he||(he=21);var De=Ia(),Ye=function(q,he){var De,Ye=[],lt=1/(he-1);for(De=0;De<1;De+=lt)Ye.push(De);Ye.push(1),0!=q[0].offset&&q.unshift({offset:0,color:q[0].color}),1!=q[q.length-1].offset&&q.push({offset:1,color:q[q.length-1].color});for(var _n="",Fn=0,ci=0;ci<Ye.length;ci++){for(De=Ye[ci];De>q[Fn+1].offset;)Fn++;var xi=q[Fn].offset,Fi=(De-xi)/(q[Fn+1].offset-xi),Ho=q[Fn].color,ta=q[Fn+1].color;_n+=Ue(Math.round((1-Fi)*Ho[0]+Fi*ta[0]).toString(16))+Ue(Math.round((1-Fi)*Ho[1]+Fi*ta[1]).toString(16))+Ue(Math.round((1-Fi)*Ho[2]+Fi*ta[2]).toString(16))}return _n.trim()}(q.colors,he),lt=[];lt.push({key:"FunctionType",value:"0"}),lt.push({key:"Domain",value:"[0.0 1.0]"}),lt.push({key:"Size",value:"["+he+"]"}),lt.push({key:"BitsPerSample",value:"8"}),lt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),lt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ws({data:Ye,additionalKeyValues:lt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:De}),je("endobj"),q.objectNumber=Ia(),je("<< /ShadingType "+q.type),je("/ColorSpace /DeviceRGB");var yt="/Coords ["+ce(parseFloat(q.coords[0]))+" "+ce(parseFloat(q.coords[1]))+" ";yt+=2===q.type?ce(parseFloat(q.coords[2]))+" "+ce(parseFloat(q.coords[3])):ce(parseFloat(q.coords[2]))+" "+ce(parseFloat(q.coords[3]))+" "+ce(parseFloat(q.coords[4]))+" "+ce(parseFloat(q.coords[5])),je(yt+="]"),q.matrix&&je("/Matrix ["+q.matrix.toString()+"]"),je("/Function "+De+" 0 R"),je("/Extend [true true]"),je(">>"),je("endobj")},Eb=function(q,he){var De=ga(),Ye=Ia();he.push({resourcesOid:De,objectOid:Ye}),q.objectNumber=Ye;var lt=[];lt.push({key:"Type",value:"/Pattern"}),lt.push({key:"PatternType",value:"1"}),lt.push({key:"PaintType",value:"1"}),lt.push({key:"TilingType",value:"1"}),lt.push({key:"BBox",value:"["+q.boundingBox.map(ce).join(" ")+"]"}),lt.push({key:"XStep",value:ce(q.xStep)}),lt.push({key:"YStep",value:ce(q.yStep)}),lt.push({key:"Resources",value:De+" 0 R"}),q.matrix&&lt.push({key:"Matrix",value:"["+q.matrix.toString()+"]"}),Ws({data:q.stream,additionalKeyValues:lt,objectId:q.objectNumber}),je("endobj")},J1=function(q){for(var he in q.objectNumber=Ia(),je("<<"),q)switch(he){case"opacity":je("/ca "+Ze(q[he]));break;case"stroke-opacity":je("/CA "+Ze(q[he]))}je(">>"),je("endobj")},ua=function(q){bs(q.resourcesOid,!0),je("<<"),je("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var q in je("/Font <<"),fo)fo.hasOwnProperty(q)&&(!1===p||!0===p&&f.hasOwnProperty(q))&&je("/"+q+" "+fo[q].objectNumber+" 0 R");je(">>")}(),function(){if(Object.keys(to).length>0){for(var q in je("/Shading <<"),to)to.hasOwnProperty(q)&&to[q]instanceof ic&&to[q].objectNumber>=0&&je("/"+q+" "+to[q].objectNumber+" 0 R");no.publish("putShadingPatternDict"),je(">>")}}(),function(q){if(Object.keys(to).length>0){for(var he in je("/Pattern <<"),to)to.hasOwnProperty(he)&&to[he]instanceof b.TilingPattern&&to[he].objectNumber>=0&&to[he].objectNumber<q&&je("/"+he+" "+to[he].objectNumber+" 0 R");no.publish("putTilingPatternDict"),je(">>")}}(q.objectOid),function(){if(Object.keys(Xo).length>0){var q;for(q in je("/ExtGState <<"),Xo)Xo.hasOwnProperty(q)&&Xo[q].objectNumber>=0&&je("/"+q+" "+Xo[q].objectNumber+" 0 R");no.publish("putGStateDict"),je(">>")}}(),function(){for(var q in je("/XObject <<"),Xa)Xa.hasOwnProperty(q)&&Xa[q].objectNumber>=0&&je("/"+q+" "+Xa[q].objectNumber+" 0 R");no.publish("putXobjectDict"),je(">>")}(),je(">>"),je("endobj")},$1=function(q){Qo[q.fontName]=Qo[q.fontName]||{},Qo[q.fontName][q.fontStyle]=q.id},D_=function(q,he,De,Ye,lt){var yt={id:"F"+(Object.keys(fo).length+1).toString(10),postScriptName:q,fontName:he,fontStyle:De,encoding:Ye,isStandardFont:lt||!1,metadata:{}};return no.publish("addFont",{font:yt,instance:this}),fo[yt.id]=yt,$1(yt),yt.id},Jr=b.__private__.pdfEscape=b.pdfEscape=function(q,he){return function(q,he){var De,Ye,lt,yt,zt,_n,Fn,ci,xi;if(lt=(he=he||{}).sourceEncoding||"Unicode",zt=he.outputEncoding,(he.autoencode||zt)&&fo[Si].metadata&&fo[Si].metadata[lt]&&fo[Si].metadata[lt].encoding&&(yt=fo[Si].metadata[lt].encoding,!zt&&fo[Si].encoding&&(zt=fo[Si].encoding),!zt&&yt.codePages&&(zt=yt.codePages[0]),"string"==typeof zt&&(zt=yt[zt]),zt)){for(Fn=!1,_n=[],De=0,Ye=q.length;De<Ye;De++)(ci=zt[q.charCodeAt(De)])?_n.push(String.fromCharCode(ci)):_n.push(q[De]),_n[De].charCodeAt(0)>>8&&(Fn=!0);q=_n.join("")}for(De=q.length;void 0===Fn&&0!==De;)q.charCodeAt(De-1)>>8&&(Fn=!0),De--;if(!Fn)return q;for(_n=he.noBOM?[]:[254,255],De=0,Ye=q.length;De<Ye;De++){if((xi=(ci=q.charCodeAt(De))>>8)>>8)throw new Error("Character at position "+De+" of string '"+q+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");_n.push(xi),_n.push(ci-(xi<<8))}return String.fromCharCode.apply(void 0,_n)}(q,he).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},U_=b.__private__.beginPage=function(q){Qt[++ea]=[],ri[ea]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(q[0]),topRightY:Number(q[1])}},W1(ea),ft(Qt[Te])},V1=function(q,he){var De,Ye,lt;switch(t=he||t,"string"==typeof q&&(De=j(q.toLowerCase()),Array.isArray(De)&&(Ye=De[0],lt=De[1])),Array.isArray(q)&&(Ye=q[0]*An,lt=q[1]*An),isNaN(Ye)&&(Ye=a[0],lt=a[1]),(Ye>14400||lt>14400)&&(io.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Ye=Math.min(14400,Ye),lt=Math.min(14400,lt)),a=[Ye,lt],t.substr(0,1)){case"l":lt>Ye&&(a=[lt,Ye]);break;case"p":Ye>lt&&(a=[lt,Ye])}U_(a),a0(z_),je(Ll),0!==J_&&je(J_+" J"),0!==K_&&je(K_+" j"),no.publish("addPage",{pageNumber:ea})},Pb=function(q){q>0&&q<=ea&&(Qt.splice(q,1),ri.splice(q,1),ea--,Te>ea&&(Te=ea),this.setPage(Te))},W1=function(q){q>0&&q<=ea&&(Te=q)},Qb=b.__private__.getNumberOfPages=b.getNumberOfPages=function(){return Qt.length-1},X1=function(q,he,De){var Ye,lt=void 0;return De=De||{},he=void 0!==he?he:fo[Si].fontStyle,Ye=(q=void 0!==q?q:fo[Si].fontName).toLowerCase(),void 0!==Qo[Ye]&&void 0!==Qo[Ye][he]?lt=Qo[Ye][he]:void 0!==Qo[q]&&void 0!==Qo[q][he]?lt=Qo[q][he]:!1===De.disableWarning&&io.warn("Unable to look up font label for font '"+q+"', '"+he+"'. Refer to getFontList() for available fonts."),lt||De.noFallback||null==(lt=Qo.times[he])&&(lt=Qo.times.normal),lt},Fb=b.__private__.putInfo=function(){var q=Ia(),he=function(Ye){return Ye};for(var De in null!==m&&(he=pr.encryptor(q,0)),je("<<"),je("/Producer ("+Jr(he("jsPDF "+In.version))+")"),Vn)Vn.hasOwnProperty(De)&&Vn[De]&&je("/"+De.substr(0,1).toUpperCase()+De.substr(1)+" ("+Jr(he(Vn[De]))+")");je("/CreationDate ("+Jr(he(Oe))+")"),je(">>"),je("endobj")},j_=b.__private__.putCatalog=function(q){var he=(q=q||{}).rootDictionaryObjId||yu;switch(Ia(),je("<<"),je("/Type /Catalog"),je("/Pages "+he+" 0 R"),an||(an="fullwidth"),an){case"fullwidth":je("/OpenAction [3 0 R /FitH null]");break;case"fullheight":je("/OpenAction [3 0 R /FitV null]");break;case"fullpage":je("/OpenAction [3 0 R /Fit]");break;case"original":je("/OpenAction [3 0 R /XYZ null null 1]");break;default:var De=""+an;"%"===De.substr(De.length-1)&&(an=parseInt(an)/100),"number"==typeof an&&je("/OpenAction [3 0 R /XYZ null null "+Ze(an)+"]")}switch(gi||(gi="continuous"),gi){case"continuous":je("/PageLayout /OneColumn");break;case"single":je("/PageLayout /SinglePage");break;case"two":case"twoleft":je("/PageLayout /TwoColumnLeft");break;case"tworight":je("/PageLayout /TwoColumnRight")}Gn&&je("/PageMode /"+Gn),no.publish("putCatalog"),je(">>"),je("endobj")},Nb=b.__private__.putTrailer=function(){je("trailer"),je("<<"),je("/Size "+($e+1)),je("/Root "+$e+" 0 R"),je("/Info "+($e-1)+" 0 R"),null!==m&&je("/Encrypt "+pr.oid+" 0 R"),je("/ID [ <"+Fe+"> <"+Fe+"> ]"),je(">>")},Zb=b.__private__.putHeader=function(){je("%PDF-"+L),je("%\xba\xdf\xac\xe0")},Db=b.__private__.putXRef=function(){var q="0000000000";je("xref"),je("0 "+($e+1)),je("0000000000 65535 f ");for(var he=1;he<=$e;he++)je("function"==typeof ut[he]?(q+ut[he]()).slice(-10)+" 00000 n ":void 0!==ut[he]?(q+ut[he]).slice(-10)+" 00000 n ":"0000000000 00000 n ")},Cu=b.__private__.buildDocument=function(){$e=0,dt=0,st=[],ut=[],Rt=[],yu=ga(),El=ga(),ft(st),no.publish("buildDocument"),Zb(),qm(),function(){no.publish("putAdditionalObjects");for(var q=0;q<Rt.length;q++){var he=Rt[q];bs(he.objId,!0),je(he.content),je("endobj")}no.publish("postPutAdditionalObjects")}(),function(){var q=[];(function(){for(var q in fo)fo.hasOwnProperty(q)&&(!1===p||!0===p&&f.hasOwnProperty(q))&&Ch(fo[q])})(),function(){var q;for(q in Xo)Xo.hasOwnProperty(q)&&J1(Xo[q])}(),function(){for(var q in Xa)Xa.hasOwnProperty(q)&&kh(Xa[q])}(),function(q){var he;for(he in to)to.hasOwnProperty(he)&&(to[he]instanceof ic?Sb(to[he]):to[he]instanceof dl&&Eb(to[he],q))}(q),no.publish("putResources"),q.forEach(ua),ua({resourcesOid:El,objectOid:Number.MAX_SAFE_INTEGER}),no.publish("postPutResources")}(),null!==m&&(pr.oid=Ia(),je("<<"),je("/Filter /Standard"),je("/V "+pr.v),je("/R "+pr.r),je("/U <"+pr.toHexString(pr.U)+">"),je("/O <"+pr.toHexString(pr.O)+">"),je("/P "+pr.P),je(">>"),je("endobj")),Fb(),j_();var q=dt;return Db(),Nb(),je("startxref"),je(""+q),je("%%EOF"),ft(Qt[Te]),st.join("\n")},Mh=b.__private__.getBlob=function(q){return new Blob([wn(q)],{type:"application/pdf"})},Lh=b.output=b.__private__.output=((q=function(q,he){switch("string"==typeof(he=he||{})?he={filename:he}:he.filename=he.filename||"generated.pdf",q){case void 0:return Cu();case"save":b.save(he.filename);break;case"arraybuffer":return wn(Cu());case"blob":return Mh(Cu());case"bloburi":case"bloburl":if(void 0!==Qn.URL&&"function"==typeof Qn.URL.createObjectURL)return Qn.URL&&Qn.URL.createObjectURL(Mh(Cu()))||void 0;io.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var De="",Ye=Cu();try{De=hA(Ye)}catch{De=hA(unescape(encodeURIComponent(Ye)))}return"data:application/pdf;filename="+he.filename+";base64,"+De;case"pdfobjectnewwindow":if("[object Window]"===Object.prototype.toString.call(Qn)){var lt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",yt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';he.pdfObjectUrl&&(lt=he.pdfObjectUrl,yt="");var zt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+lt+'"'+yt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(he)+");<\/script></body></html>",_n=Qn.open();return null!==_n&&_n.document.write(zt),_n}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if("[object Window]"===Object.prototype.toString.call(Qn)){var Fn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(he.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+he.filename+'" width="500px" height="400px" /></body></html>',ci=Qn.open();if(null!==ci){ci.document.write(Fn);var xi=this;ci.document.documentElement.querySelector("#pdfViewer").onload=function(){ci.document.title=he.filename,ci.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(xi.output("bloburl"))}}return ci}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if("[object Window]"!==Object.prototype.toString.call(Qn))throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Fi='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",he)+'"></iframe></body></html>',Ho=Qn.open();if(null!==Ho&&(Ho.document.write(Fi),Ho.document.title=he.filename),Ho||typeof safari>"u")return Ho;break;case"datauri":case"dataurl":return Qn.document.location.href=this.output("datauristring",he);default:return null}}).foo=function(){try{return q.apply(this,arguments)}catch(Ye){var he=Ye.stack||"";~he.indexOf(" at ")&&(he=he.split(" at ")[1]);var De="Error in function "+he.split("\n")[0].split("<")[0]+": "+Ye.message;if(!Qn.console)throw new Error(De);Qn.console.error(De,Ye),Qn.alert&&alert(De)}},q.foo.bar=q,q.foo),e0=function(q){return!0===Array.isArray(jm)&&jm.indexOf(q)>-1};switch(i){case"pt":An=1;break;case"mm":An=72/25.4;break;case"cm":An=72/2.54;break;case"in":An=72;break;case"px":An=1==e0("px_scaling")?.75:96/72;break;case"pc":case"em":An=12;break;case"ex":An=6;break;default:if("number"!=typeof i)throw new Error("Invalid unit: "+i);An=i}var pr=null;gt(),Je();var t0=b.__private__.getPageInfo=b.getPageInfo=function(q){if(isNaN(q)||q%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:ri[q].objId,pageNumber:q,pageContext:ri[q]}},ni=b.__private__.getPageInfoByObjId=function(q){if(isNaN(q)||q%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var he in ri)if(ri[he].objId===q)break;return t0(he)},jb=b.__private__.getCurrentPageInfo=b.getCurrentPageInfo=function(){return{objId:ri[Te].objId,pageNumber:Te,pageContext:ri[Te]}};b.addPage=function(){return V1.apply(this,arguments),this},b.setPage=function(){return W1.apply(this,arguments),ft.call(this,Qt[Te]),this},b.insertPage=function(q){return this.addPage(),this.movePage(Te,q),this},b.movePage=function(q,he){var De,Ye;if(q>he){De=Qt[q],Ye=ri[q];for(var lt=q;lt>he;lt--)Qt[lt]=Qt[lt-1],ri[lt]=ri[lt-1];Qt[he]=De,ri[he]=Ye,this.setPage(he)}else if(q<he){De=Qt[q],Ye=ri[q];for(var yt=q;yt<he;yt++)Qt[yt]=Qt[yt+1],ri[yt]=ri[yt+1];Qt[he]=De,ri[he]=Ye,this.setPage(he)}return this},b.deletePage=function(){return Pb.apply(this,arguments),this},b.__private__.text=b.text=function(q,he,De,Ye,lt){var yt,zt,_n,Fn,ci,xi,Fi,Ho,ta,xa=(Ye=Ye||{}).scope||this;if("number"==typeof q&&"number"==typeof he&&("string"==typeof De||Array.isArray(De))){var hr=De;De=he,he=q,q=hr}if(arguments[3]instanceof zn?(te("The transform parameter of text() with a Matrix value"),ta=lt):(_n=arguments[4],Fn=arguments[5],"object"===(0,yi.Z)(Fi=arguments[3])&&null!==Fi||("string"==typeof _n&&(Fn=_n,_n=null),"string"==typeof Fi&&(Fn=Fi,Fi=null),"number"==typeof Fi&&(_n=Fi,Fi=null),Ye={flags:Fi,angle:_n,align:Fn})),isNaN(he)||isNaN(De)||null==q)throw new Error("Invalid arguments passed to jsPDF.text");if(0===q.length)return xa;var Bl,ja="",vs="number"==typeof Ye.lineHeightFactor?Ye.lineHeightFactor:zm,ku=xa.internal.scaleFactor;function d0(To){return To=To.split("\t").join(Array(Ye.TabLen||9).join(" ")),Jr(To,Fi)}function W_(To){for(var ko,da=To.concat(),Ma=[],Iu=da.length;Iu--;)"string"==typeof(ko=da.shift())?Ma.push(ko):Array.isArray(To)&&(1===ko.length||void 0===ko[1]&&void 0===ko[2])?Ma.push(ko[0]):Ma.push([ko[0],ko[1],ko[2]]);return Ma}function X_(To,ko){var da;if("string"==typeof To)da=ko(To)[0];else if(Array.isArray(To)){for(var Ma,Iu,Ld=To.concat(),Jh=[],p0=Ld.length;p0--;)"string"==typeof(Ma=Ld.shift())?Jh.push(ko(Ma)[0]):Array.isArray(Ma)&&"string"==typeof Ma[0]&&(Iu=ko(Ma[0],Ma[1],Ma[2]),Jh.push([Iu[0],Iu[1],Iu[2]]));da=Jh}return da}var Zh=!1,ef=!0;if("string"==typeof q)Zh=!0;else if(Array.isArray(q)){var tf=q.concat();zt=[];for(var Dh,Kr=tf.length;Kr--;)("string"!=typeof(Dh=tf.shift())||Array.isArray(Dh)&&"string"!=typeof Dh[0])&&(ef=!1);Zh=ef}if(!1===Zh)throw new Error('Type of text must be string or Array. "'+q+'" is not recognized.');"string"==typeof q&&(q=q.match(/[\r?\n]/)?q.split(/\r\n|\r|\n/g):[q]);var Uh=Vt/xa.internal.scaleFactor,jh=Uh*(vs-1);switch(Ye.baseline){case"bottom":De-=jh;break;case"top":De+=Uh-jh;break;case"hanging":De+=Uh-2*jh;break;case"middle":De+=Uh/2-jh}if((xi=Ye.maxWidth||0)>0&&("string"==typeof q?q=xa.splitTextToSize(q,xi):"[object Array]"===Object.prototype.toString.call(q)&&(q=q.reduce(function(To,ko){return To.concat(xa.splitTextToSize(ko,xi))},[]))),no.publish("preProcessText",yt={text:q,x:he,y:De,options:Ye,mutex:{pdfEscape:Jr,activeFontKey:Si,fonts:fo,activeFontSize:Vt}}),q=yt.text,_n=(Ye=yt.options).angle,ta instanceof zn||!_n||"number"!=typeof _n)_n&&_n instanceof zn&&(ta=_n);else{_n*=Math.PI/180,0===Ye.rotationDirection&&(_n=-_n),"advanced"===ae&&(_n=-_n);var qh=Math.cos(_n),nf=Math.sin(_n);ta=new zn(qh,nf,-nf,qh,0,0)}"advanced"!==ae||ta||(ta=Lc),void 0!==(ci=Ye.charSpace||Qh)&&(ja+=ce(pe(ci))+" Tc\n",this.setCharSpace(this.getCharSpace()||0)),void 0!==(Ho=Ye.horizontalScale)&&(ja+=ce(100*Ho)+" Tz\n");var Gr=-1,Vb=void 0!==Ye.renderingMode?Ye.renderingMode:Ye.stroke,of=xa.internal.getCurrentPageInfo().pageContext;switch(Vb){case 0:case!1:case"fill":Gr=0;break;case 1:case!0:case"stroke":Gr=1;break;case 2:case"fillThenStroke":Gr=2;break;case 3:case"invisible":Gr=3;break;case 4:case"fillAndAddForClipping":Gr=4;break;case 5:case"strokeAndAddPathForClipping":Gr=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Gr=6;break;case 7:case"addToPathForClipping":Gr=7}-1!==Gr?ja+=Gr+" Tr\n":-1!==(void 0!==of.usedRenderingMode?of.usedRenderingMode:-1)&&(ja+="0 Tr\n"),-1!==Gr&&(of.usedRenderingMode=Gr),Fn=Ye.align||"left";var Pl,af=Vt*vs,Wb=xa.internal.pageSize.getWidth(),Xb=fo[Si];ci=Ye.charSpace||Qh,xi=Ye.maxWidth||0,Fi=Object.assign({autoencode:!0,noBOM:!0},Ye.flags);var Ed=[];if("[object Array]"===Object.prototype.toString.call(q)){var Xs;zt=W_(q),"left"!==Fn&&(Pl=zt.map(function(To){return xa.getStringUnitWidth(To,{font:Xb,charSpace:ci,fontSize:Vt,doKerning:!1})*Vt/ku}));var Ql,Od=0;if("right"===Fn){he-=Pl[0],q=[],Kr=zt.length;for(var Fc=0;Fc<Kr;Fc++)0===Fc?(Ql=Tu(he),Xs=Td(De)):(Ql=pe(Od-Pl[Fc]),Xs=-af),q.push([zt[Fc],Ql,Xs]),Od=Pl[Fc]}else if("center"===Fn){he-=Pl[0]/2,q=[],Kr=zt.length;for(var Su=0;Su<Kr;Su++)0===Su?(Ql=Tu(he),Xs=Td(De)):(Ql=pe((Od-Pl[Su])/2),Xs=-af),q.push([zt[Su],Ql,Xs]),Od=Pl[Su]}else if("left"===Fn){q=[],Kr=zt.length;for(var Rh=0;Rh<Kr;Rh++)q.push(zt[Rh])}else{if("justify"!==Fn)throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');q=[],Kr=zt.length,xi=0!==xi?xi:Wb;for(var Fl=0;Fl<Kr;Fl++)Xs=0===Fl?Td(De):-af,Ql=0===Fl?Tu(he):0,Ed.push(Fl<Kr-1?ce(pe((xi-Pl[Fl])/(zt[Fl].split(" ").length-1))):0),q.push([zt[Fl],Ql,Xs])}}!0===("boolean"==typeof Ye.R2L?Ye.R2L:On)&&(q=X_(q,function(To,ko,da){return[To.split("").reverse().join(""),ko,da]})),no.publish("postProcessText",yt={text:q,x:he,y:De,options:Ye,mutex:{pdfEscape:Jr,activeFontKey:Si,fonts:fo,activeFontSize:Vt}}),q=yt.text,Bl=yt.mutex.isHex||!1;var rf=fo[Si].encoding;"WinAnsiEncoding"!==rf&&"StandardEncoding"!==rf||(q=X_(q,function(To,ko,da){return[d0(To),ko,da]})),zt=W_(q),q=[];for(var Id,Nl,Eu,Gm=Array.isArray(zt[0])?1:0,Md="",sf=function(To,ko,da){var Ma="";return da instanceof zn?(da="number"==typeof Ye.angle?Sl(da,new zn(1,0,0,1,To,ko)):Sl(new zn(1,0,0,1,To,ko),da),"advanced"===ae&&(da=Sl(new zn(1,0,0,-1,0,0),da)),Ma=da.join(" ")+" Tm\n"):Ma=ce(To)+" "+ce(ko)+" Td\n",Ma},el=0;el<zt.length;el++){switch(Md="",Gm){case 1:Eu=(Bl?"<":"(")+zt[el][0]+(Bl?">":")"),Id=parseFloat(zt[el][1]),Nl=parseFloat(zt[el][2]);break;case 0:Eu=(Bl?"<":"(")+zt[el]+(Bl?">":")"),Id=Tu(he),Nl=Td(De)}void 0!==Ed&&void 0!==Ed[el]&&(Md=Ed[el]+" Tw\n"),0===el?q.push(Md+sf(Id,Nl,ta)+Eu):0===Gm?q.push(Md+Eu):1===Gm&&q.push(Md+sf(Id,Nl,ta)+Eu)}q=q.join(0===Gm?" Tj\nT* ":" Tj\n"),q+=" Tj\n";var Ou="BT\n/";return Ou+=Si+" "+Vt+" Tf\n",Ou+=ce(Vt*vs)+" TL\n",Ou+=Hm+"\n",Ou+=ja,Ou+=q,je(Ou+="ET"),f[Si]=!0,xa};var qb=b.__private__.clip=b.clip=function(q){return je("evenodd"===q?"W*":"W"),this};b.clipEvenOdd=function(){return qb("evenodd")},b.__private__.discardPath=b.discardPath=function(){return je("n"),this};var Qc=b.__private__.isValidStyle=function(q){var he=!1;return-1!==[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(q)&&(he=!0),he};b.__private__.setDefaultPathOperation=b.setDefaultPathOperation=function(q){return Qc(q)&&(u=q),this};var n0=b.__private__.getStyle=b.getStyle=function(q){var he=u;switch(q){case"D":case"S":he="S";break;case"F":he="f";break;case"FD":case"DF":he="B";break;case"f":case"f*":case"B":case"B*":he=q}return he},o0=b.close=function(){return je("h"),this};b.stroke=function(){return je("S"),this},b.fill=function(q){return Bh("f",q),this},b.fillEvenOdd=function(q){return Bh("f*",q),this},b.fillStroke=function(q){return Bh("B",q),this},b.fillStrokeEvenOdd=function(q){return Bh("B*",q),this};var Bh=function(q,he){"object"===(0,yi.Z)(he)?zb(he,q):je(q)},q_=function(q){null===q||"advanced"===ae&&void 0===q||(q=n0(q),je(q))};function Rb(q,he,De,Ye,lt){var yt=new dl(he||this.boundingBox,De||this.xStep,Ye||this.yStep,this.gState,lt||this.matrix);yt.stream=this.stream;var zt=q+"$$"+this.cloneIndex+++"$$";return Hr(zt,yt),yt}var zb=function(q,he){var De=Um[q.key],Ye=to[De];if(Ye instanceof ic)je("q"),je(Hb(he)),Ye.gState&&b.setGState(Ye.gState),je(q.matrix.toString()+" cm"),je("/"+De+" sh"),je("Q");else if(Ye instanceof dl){var lt=new zn(1,0,0,-1,0,Sd());q.matrix&&(lt=lt.multiply(q.matrix||Lc),De=Rb.call(Ye,q.key,q.boundingBox,q.xStep,q.yStep,lt).id),je("q"),je("/Pattern cs"),je("/"+De+" scn"),Ye.gState&&b.setGState(Ye.gState),je(he),je("Q")}},Hb=function(q){switch(q){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},R_=b.moveTo=function(q,he){return je(ce(pe(q))+" "+ce(Pe(he))+" m"),this},Rm=b.lineTo=function(q,he){return je(ce(pe(q))+" "+ce(Pe(he))+" l"),this},Cd=b.curveTo=function(q,he,De,Ye,lt,yt){return je([ce(pe(q)),ce(Pe(he)),ce(pe(De)),ce(Pe(Ye)),ce(pe(lt)),ce(Pe(yt)),"c"].join(" ")),this};b.__private__.line=b.line=function(q,he,De,Ye,lt){if(isNaN(q)||isNaN(he)||isNaN(De)||isNaN(Ye)||!Qc(lt))throw new Error("Invalid arguments passed to jsPDF.line");return"compat"===ae?this.lines([[De-q,Ye-he]],q,he,[1,1],lt||"S"):this.lines([[De-q,Ye-he]],q,he,[1,1]).stroke()},b.__private__.lines=b.lines=function(q,he,De,Ye,lt,yt){var zt,_n,Fn,ci,xi,hr,ja,Bl;if("number"==typeof q&&(Bl=De,De=he,he=q,q=Bl),Ye=Ye||[1,1],yt=yt||!1,isNaN(he)||isNaN(De)||!Array.isArray(q)||!Array.isArray(Ye)||!Qc(lt)||"boolean"!=typeof yt)throw new Error("Invalid arguments passed to jsPDF.lines");for(R_(he,De),zt=Ye[0],_n=Ye[1],ci=q.length,hr=he,ja=De,Fn=0;Fn<ci;Fn++)2===(xi=q[Fn]).length?Rm(hr=xi[0]*zt+hr,ja=xi[1]*_n+ja):Cd(xi[0]*zt+hr,xi[1]*_n+ja,xi[2]*zt+hr,xi[3]*_n+ja,hr=xi[4]*zt+hr,ja=xi[5]*_n+ja);return yt&&o0(),q_(lt),this},b.path=function(q){for(var he=0;he<q.length;he++){var De=q[he],Ye=De.c;switch(De.op){case"m":R_(Ye[0],Ye[1]);break;case"l":Rm(Ye[0],Ye[1]);break;case"c":Cd.apply(this,Ye);break;case"h":o0()}}return this},b.__private__.rect=b.rect=function(q,he,De,Ye,lt){if(isNaN(q)||isNaN(he)||isNaN(De)||isNaN(Ye)||!Qc(lt))throw new Error("Invalid arguments passed to jsPDF.rect");return"compat"===ae&&(Ye=-Ye),je([ce(pe(q)),ce(Pe(he)),ce(pe(De)),ce(pe(Ye)),"re"].join(" ")),q_(lt),this},b.__private__.triangle=b.triangle=function(q,he,De,Ye,lt,yt,zt){if(isNaN(q)||isNaN(he)||isNaN(De)||isNaN(Ye)||isNaN(lt)||isNaN(yt)||!Qc(zt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[De-q,Ye-he],[lt-De,yt-Ye],[q-lt,he-yt]],q,he,[1,1],zt,!0),this},b.__private__.roundedRect=b.roundedRect=function(q,he,De,Ye,lt,yt,zt){if(isNaN(q)||isNaN(he)||isNaN(De)||isNaN(Ye)||isNaN(lt)||isNaN(yt)||!Qc(zt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var _n=4/3*(Math.SQRT2-1);return lt=Math.min(lt,.5*De),yt=Math.min(yt,.5*Ye),this.lines([[De-2*lt,0],[lt*_n,0,lt,yt-yt*_n,lt,yt],[0,Ye-2*yt],[0,yt*_n,-lt*_n,yt,-lt,yt],[2*lt-De,0],[-lt*_n,0,-lt,-yt*_n,-lt,-yt],[0,2*yt-Ye],[0,-yt*_n,lt*_n,-yt,lt,-yt]],q+lt,he,[1,1],zt,!0),this},b.__private__.ellipse=b.ellipse=function(q,he,De,Ye,lt){if(isNaN(q)||isNaN(he)||isNaN(De)||isNaN(Ye)||!Qc(lt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var yt=4/3*(Math.SQRT2-1)*De,zt=4/3*(Math.SQRT2-1)*Ye;return R_(q+De,he),Cd(q+De,he-zt,q+yt,he-Ye,q,he-Ye),Cd(q-yt,he-Ye,q-De,he-zt,q-De,he),Cd(q-De,he+zt,q-yt,he+Ye,q,he+Ye),Cd(q+yt,he+Ye,q+De,he+zt,q+De,he),q_(lt),this},b.__private__.circle=b.circle=function(q,he,De,Ye){if(isNaN(q)||isNaN(he)||isNaN(De)||!Qc(Ye))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(q,he,De,De,Ye)},b.setFont=function(q,he,De){return De&&(he=ve(he,De)),Si=X1(q,he,{disableWarning:!1}),this};var Jb=b.__private__.getFont=b.getFont=function(){return fo[X1.apply(b,arguments)]};b.__private__.getFontList=b.getFontList=function(){var q,he,De={};for(q in Qo)if(Qo.hasOwnProperty(q))for(he in De[q]=[],Qo[q])Qo[q].hasOwnProperty(he)&&De[q].push(he);return De},b.addFont=function(q,he,De,Ye,lt){var yt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&-1!==yt.indexOf(arguments[3])?lt=arguments[3]:arguments[3]&&-1==yt.indexOf(arguments[3])&&(De=ve(De,Ye)),D_.call(this,q,he,De,lt=lt||"Identity-H")};var zm,z_=n.lineWidth||.200025,Ph=b.__private__.getLineWidth=b.getLineWidth=function(){return z_},a0=b.__private__.setLineWidth=b.setLineWidth=function(q){return z_=q,je(ce(pe(q))+" w"),this};b.__private__.setLineDash=In.API.setLineDash=In.API.setLineDashPattern=function(q,he){if(q=q||[],he=he||0,isNaN(he)||!Array.isArray(q))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return q=q.map(function(De){return ce(pe(De))}).join(" "),he=ce(pe(he)),je("["+q+"] "+he+" d"),this};var r0=b.__private__.getLineHeight=b.getLineHeight=function(){return Vt*zm};b.__private__.getLineHeight=b.getLineHeight=function(){return Vt*zm};var s0=b.__private__.setLineHeightFactor=b.setLineHeightFactor=function(q){return"number"==typeof(q=q||1.15)&&(zm=q),this},l0=b.__private__.getLineHeightFactor=b.getLineHeightFactor=function(){return zm};s0(n.lineHeight);var Tu=b.__private__.getHorizontalCoordinate=function(q){return pe(q)},Td=b.__private__.getVerticalCoordinate=function(q){return"advanced"===ae?q:ri[Te].mediaBox.topRightY-ri[Te].mediaBox.bottomLeftY-pe(q)},Kb=b.__private__.getHorizontalCoordinateString=b.getHorizontalCoordinateString=function(q){return ce(Tu(q))},kd=b.__private__.getVerticalCoordinateString=b.getVerticalCoordinateString=function(q){return ce(Td(q))},Ll=n.strokeColor||"0 G";b.__private__.getStrokeColor=b.getDrawColor=function(){return Ol(Ll)},b.__private__.setStrokeColor=b.setDrawColor=function(q,he,De,Ye){return Ll=Il({ch1:q,ch2:he,ch3:De,ch4:Ye,pdfColorType:"draw",precision:2}),je(Ll),this};var H_=n.fillColor||"0 g";b.__private__.getFillColor=b.getFillColor=function(){return Ol(H_)},b.__private__.setFillColor=b.setFillColor=function(q,he,De,Ye){return H_=Il({ch1:q,ch2:he,ch3:De,ch4:Ye,pdfColorType:"fill",precision:2}),je(H_),this};var Hm=n.textColor||"0 g",Gb=b.__private__.getTextColor=b.getTextColor=function(){return Ol(Hm)};b.__private__.setTextColor=b.setTextColor=function(q,he,De,Ye){return Hm=Il({ch1:q,ch2:he,ch3:De,ch4:Ye,pdfColorType:"text",precision:3}),this};var Qh=n.charSpace,Yb=b.__private__.getCharSpace=b.getCharSpace=function(){return parseFloat(Qh||0)};b.__private__.setCharSpace=b.setCharSpace=function(q){if(isNaN(q))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Qh=q,this};var J_=0;b.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},b.__private__.setLineCap=b.setLineCap=function(q){var he=b.CapJoinStyles[q];if(void 0===he)throw new Error("Line cap style of '"+q+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return J_=he,je(he+" J"),this};var K_=0;b.__private__.setLineJoin=b.setLineJoin=function(q){var he=b.CapJoinStyles[q];if(void 0===he)throw new Error("Line join style of '"+q+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return K_=he,je(he+" j"),this},b.__private__.setLineMiterLimit=b.__private__.setMiterLimit=b.setLineMiterLimit=b.setMiterLimit=function(q){if(q=q||0,isNaN(q))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return je(ce(pe(q))+" M"),this},b.GState=nc,b.setGState=function(q){(q="string"==typeof q?Xo[kl[q]]:c0(null,q)).equals(wu)||(je("/"+q.id+" gs"),wu=q)};var c0=function(q,he){if(!q||!kl[q]){var De=!1;for(var Ye in Xo)if(Xo.hasOwnProperty(Ye)&&Xo[Ye].equals(he)){De=!0;break}if(De)he=Xo[Ye];else{var lt="GS"+(Object.keys(Xo).length+1).toString(10);Xo[lt]=he,he.id=lt}return q&&(kl[q]=he.id),no.publish("addGState",he),he}};b.addGState=function(q,he){return c0(q,he),this},b.saveGraphicsState=function(){return je("q"),Oc.push({key:Si,size:Vt,color:Hm}),this},b.restoreGraphicsState=function(){je("Q");var q=Oc.pop();return Si=q.key,Vt=q.size,Hm=q.color,wu=null,this},b.setCurrentTransformationMatrix=function(q){return je(q.toString()+" cm"),this},b.comment=function(q){return je("#"+q),this};var Fh=function(q,he){var De=q||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return De},set:function(yt){isNaN(yt)||(De=parseFloat(yt))}});var Ye=he||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Ye},set:function(yt){isNaN(yt)||(Ye=parseFloat(yt))}});var lt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return lt},set:function(yt){lt=yt.toString()}}),this},G_=function(q,he,De,Ye){Fh.call(this,q,he),this.type="rect";var lt=De||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return lt},set:function(zt){isNaN(zt)||(lt=parseFloat(zt))}});var yt=Ye||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return yt},set:function(zt){isNaN(zt)||(yt=parseFloat(zt))}}),this},Y_=function(){this.page=ea,this.currentPage=Te,this.pages=Qt.slice(0),this.pagesContext=ri.slice(0),this.x=mr,this.y=Ji,this.matrix=Tl,this.width=Jm(Te),this.height=Sd(Te),this.outputDestination=tn,this.id="",this.objectNumber=-1};Y_.prototype.restore=function(){ea=this.page,ri=this.pagesContext,Qt=this.pages,mr=this.x,Ji=this.y,Tl=this.matrix,$_(Te=this.currentPage,this.width),V_(Te,this.height),tn=this.outputDestination};var u0=function(q,he,De,Ye,lt){Mc.push(new Y_),ea=Te=0,Qt=[],mr=q,Ji=he,Tl=lt,U_([De,Ye])};for(var Nh in b.beginFormObject=function(q,he,De,Ye,lt){return u0(q,he,De,Ye,lt),this},b.endFormObject=function(q){return function(q){if(Ic[q])Mc.pop().restore();else{var he=new Y_,De="Xo"+(Object.keys(Xa).length+1).toString(10);he.id=De,Ic[q]=De,Xa[De]=he,no.publish("addFormObject",he),Mc.pop().restore()}}(q),this},b.doFormObject=function(q,he){var De=Xa[Ic[q]];return je("q"),je(he.toString()+" cm"),je("/"+De.id+" Do"),je("Q"),this},b.getFormObject=function(q){var he=Xa[Ic[q]];return{x:he.x,y:he.y,width:he.width,height:he.height,matrix:he.matrix}},b.save=function(q,he){return q=q||"generated.pdf",(he=he||{}).returnPromise=he.returnPromise||!1,!1===he.returnPromise?(nu(Mh(Cu()),q),"function"==typeof nu.unload&&Qn.setTimeout&&setTimeout(nu.unload,911),this):new Promise(function(De,Ye){try{var lt=nu(Mh(Cu()),q);"function"==typeof nu.unload&&Qn.setTimeout&&setTimeout(nu.unload,911),De(lt)}catch(yt){Ye(yt.message)}})},In.API)In.API.hasOwnProperty(Nh)&&("events"===Nh&&In.API.events.length?function(q,he){var Ye,lt;for(lt=he.length-1;-1!==lt;lt--)q.subscribe.apply(q,[he[lt][0]].concat("function"==typeof(Ye=he[lt][1])?[Ye]:Ye))}(no,In.API.events):b[Nh]=In.API[Nh]);var Jm=b.getPageWidth=function(q){return(ri[q=q||Te].mediaBox.topRightX-ri[q].mediaBox.bottomLeftX)/An},$_=b.setPageWidth=function(q,he){ri[q].mediaBox.topRightX=he*An+ri[q].mediaBox.bottomLeftX},Sd=b.getPageHeight=function(q){return(ri[q=q||Te].mediaBox.topRightY-ri[q].mediaBox.bottomLeftY)/An},V_=b.setPageHeight=function(q,he){ri[q].mediaBox.topRightY=he*An+ri[q].mediaBox.bottomLeftY};return b.internal={pdfEscape:Jr,getStyle:n0,getFont:Jb,getFontSize:Wt,getCharSpace:Yb,getTextColor:Gb,getLineHeight:r0,getLineHeightFactor:l0,getLineWidth:Ph,write:En,getHorizontalCoordinate:Tu,getVerticalCoordinate:Td,getCoordinateString:Kb,getVerticalCoordinateString:kd,collections:{},newObject:Ia,newAdditionalObject:yh,newObjectDeferred:ga,newObjectDeferredBegin:bs,getFilters:Bc,putStream:Ws,events:no,scaleFactor:An,pageSize:{getWidth:function(){return Jm(Te)},setWidth:function(q){$_(Te,q)},getHeight:function(){return Sd(Te)},setHeight:function(q){V_(Te,q)}},encryptionOptions:m,encryption:pr,getEncryptor:function(q){return null!==m?pr.encryptor(q,0):function(he){return he}},output:Lh,getNumberOfPages:Qb,pages:Qt,out:je,f2:Ze,f3:se,getPageInfo:t0,getPageInfoByObjId:ni,getCurrentPageInfo:jb,getPDFVersion:N,Point:Fh,Rectangle:G_,Matrix:zn,hasHotfix:e0},Object.defineProperty(b.internal.pageSize,"width",{get:function(){return Jm(Te)},set:function(q){$_(Te,q)},enumerable:!0,configurable:!0}),Object.defineProperty(b.internal.pageSize,"height",{get:function(){return Sd(Te)},set:function(q){V_(Te,q)},enumerable:!0,configurable:!0}),function(q){for(var he=0,De=Zt.length;he<De;he++){var Ye=D_.call(this,q[he][0],q[he][1],q[he][2],Zt[he][3],!0);!1===p&&(f[Ye]=!0);var lt=q[he][0].split("-");$1({id:Ye,fontName:lt[0],fontStyle:lt[1]||""})}no.publish("addFonts",{fonts:fo,dictionary:Qo})}.call(b,Zt),Si="F1",V1(a,t),no.publish("initialized"),b}tc.prototype.lsbFirstWord=function(n){return String.fromCharCode(n>>0&255,n>>8&255,n>>16&255,n>>24&255)},tc.prototype.toHexString=function(n){return n.split("").map(function(o){return("0"+(255&o.charCodeAt(0)).toString(16)).slice(-2)}).join("")},tc.prototype.hexToBytes=function(n){for(var o=[],t=0;t<n.length;t+=2)o.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return o.join("")},tc.prototype.processOwnerPassword=function(n,o){return _A(AA(o).substr(0,5),n)},tc.prototype.encryptor=function(n,o){var t=AA(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&o,o>>8&255)).substr(0,10);return function(i){return _A(t,i)}},nc.prototype.equals=function(n){var o,t="id,objectNumber,equals";if(!n||(0,yi.Z)(n)!==(0,yi.Z)(this))return!1;var i=0;for(o in this)if(!(t.indexOf(o)>=0)){if(this.hasOwnProperty(o)&&!n.hasOwnProperty(o)||this[o]!==n[o])return!1;i++}for(o in n)n.hasOwnProperty(o)&&t.indexOf(o)<0&&i--;return 0===i},In.API={events:[]},In.version="2.5.1";var Oo=In.API,fA=1,iu=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Wu=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Wn=function(n){return n.toFixed(2)},oc=function(n){return n.toFixed(5)};Oo.__acroform__={};var Ta=function(n,o){n.prototype=Object.create(o.prototype),n.prototype.constructor=n},Cf=function(n){return n*fA},Ps=function(n){var o=new bA,t=bn.internal.getHeight(n)||0,i=bn.internal.getWidth(n)||0;return o.BBox=[0,0,Number(Wn(i)),Number(Wn(t))],o},q0=Oo.__acroform__.setBit=function(n,o){if(n=n||0,o=o||0,isNaN(n)||isNaN(o))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|1<<o},R0=Oo.__acroform__.clearBit=function(n,o){if(n=n||0,o=o||0,isNaN(n)||isNaN(o))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&~(1<<o)},z0=Oo.__acroform__.getBit=function(n,o){if(isNaN(n)||isNaN(o))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<o?1:0},Do=Oo.__acroform__.getBitForPdf=function(n,o){if(isNaN(n)||isNaN(o))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return z0(n,o-1)},Uo=Oo.__acroform__.setBitForPdf=function(n,o){if(isNaN(n)||isNaN(o))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return q0(n,o-1)},jo=Oo.__acroform__.clearBitForPdf=function(n,o){if(isNaN(n)||isNaN(o))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return R0(n,o-1)},H0=Oo.__acroform__.calculateCoordinates=function(n,o){var t=o.internal.getHorizontalCoordinate,i=o.internal.getVerticalCoordinate,a=n[0],r=n[1],s=n[2],l=n[3],c={};return c.lowerLeft_X=t(a)||0,c.lowerLeft_Y=i(r+l)||0,c.upperRight_X=t(a+s)||0,c.upperRight_Y=i(r)||0,[Number(Wn(c.lowerLeft_X)),Number(Wn(c.lowerLeft_Y)),Number(Wn(c.upperRight_X)),Number(Wn(c.upperRight_Y))]},J0=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var o=[],i=gA(n,n._V||n.DV),a=n.scope.internal.getFont(n.fontName,n.fontStyle).id;o.push("/Tx BMC"),o.push("q"),o.push("BT"),o.push(n.scope.__private__.encodeColorString(n.color)),o.push("/"+a+" "+Wn(i.fontSize)+" Tf"),o.push("1 0 0 1 0 0 Tm"),o.push(i.text),o.push("ET"),o.push("Q"),o.push("EMC");var r=Ps(n);return r.scope=n.scope,r.stream=o.join("\n"),r}},gA=function(n,o){var t=0===n.fontSize?n.maxFontSize:n.fontSize,i={text:"",fontSize:""},a=(o=")"==(o="("==o.substr(0,1)?o.substr(1):o).substr(o.length-1)?o.substr(0,o.length-1):o).split(" ");a=a.map(n.multiline?function(se){return se.split("\n")}:function(se){return[se]});var r=t,s=bn.internal.getHeight(n)||0;s=s<0?-s:s;var se,l=bn.internal.getWidth(n)||0;l=l<0?-l:l,r++;e:for(;r>0;){o="",r--;var u,m,p=bp("3",n,r).height,f=n.multiline?s-r:(s-p)/2,b=f+=2,L=0,N=0,R=0;if(r<=0){o="(...) Tj\n",o+="% Width of Text: "+bp(o,n,r=12).width+", FieldWidth:"+l+"\n";break}for(var j="",G=0,ae=0;ae<a.length;ae++)if(a.hasOwnProperty(ae)){var W=!1;if(1!==a[ae].length&&R!==a[ae].length-1){if((p+2)*(G+2)+2>s)continue e;j+=a[ae][R],W=!0,N=ae,ae--}else{j=" "==(j+=a[ae][R]+" ").substr(j.length-1)?j.substr(0,j.length-1):j;var le=parseInt(ae),ve=(se=le)+1<a.length&&bp(j+" "+a[se+1][0],n,r).width<=l-4,ce=ae>=a.length-1;if(ve&&!ce){j+=" ",R=0;continue}if(ve||ce){if(ce)N=le;else if(n.multiline&&(p+2)*(G+2)+2>s)continue e}else{if(!n.multiline||(p+2)*(G+2)+2>s)continue e;N=le}}for(var te="",Se=L;Se<=N;Se++){var Ze=a[Se];if(n.multiline){if(Se===N){te+=Ze[R]+" ",R=(R+1)%Ze.length;continue}if(Se===L){te+=Ze[Ze.length-1]+" ";continue}}te+=Ze[0]+" "}switch(te=" "==te.substr(te.length-1)?te.substr(0,te.length-1):te,m=bp(te,n,r).width,n.textAlign){case"right":u=l-m-2;break;case"center":u=(l-m)/2;break;default:u=2}o+=Wn(u)+" "+Wn(b)+" Td\n",o+="("+iu(te)+") Tj\n",o+=-Wn(u)+" 0 Td\n",b=-(r+2),m=0,L=W?N:N+1,G++,j=""}break}return i.text=o,i.fontSize=r,i},bp=function(n,o,t){var i=o.scope.internal.getFont(o.fontName,o.fontStyle),a=o.scope.getStringUnitWidth(n,{font:i,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:o.scope.getStringUnitWidth("3",{font:i,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:a}},Tf={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},K0=function(n,o){var t={type:"reference",object:n};void 0===o.internal.getPageInfo(n.page).pageContext.annotations.find(function(i){return i.type===t.type&&i.object===t.object})&&o.internal.getPageInfo(n.page).pageContext.annotations.push(t)},tm=Oo.__acroform__.arrayToPdfArray=function(n,o,t){var i=function(s){return s};if(Array.isArray(n)){for(var a="[",r=0;r<n.length;r++)switch(0!==r&&(a+=" "),(0,yi.Z)(n[r])){case"boolean":case"number":case"object":a+=n[r].toString();break;case"string":"/"!==n[r].substr(0,1)?(void 0!==o&&t&&(i=t.internal.getEncryptor(o)),a+="("+iu(i(n[r].toString()))+")"):a+=n[r].toString()}return a+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},xA=function(n,o,t){var i=function(a){return a};return void 0!==o&&t&&(i=t.internal.getEncryptor(o)),(n=n||"").toString(),"("+iu(i(n))+")"},Qs=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(void 0===this._objId){if(void 0===this.scope)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Qs.prototype.toString=function(){return this.objId+" 0 R"},Qs.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},Qs.prototype.getKeyValueListForStream=function(){var n=[],o=Object.getOwnPropertyNames(this).filter(function(r){return"content"!=r&&"appearanceStreamContent"!=r&&"scope"!=r&&"objId"!=r&&"_"!=r.substring(0,1)});for(var t in o)if(!1===Object.getOwnPropertyDescriptor(this,o[t]).configurable){var i=o[t],a=this[i];a&&(Array.isArray(a)?n.push({key:i,value:tm(a,this.objId,this.scope)}):a instanceof Qs?(a.scope=this.scope,n.push({key:i,value:a.objId+" 0 R"})):"function"!=typeof a&&n.push({key:i,value:a}))}return n};var bA=function(){Qs.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,o=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return o},set:function(t){o=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};Ta(bA,Qs);var kf=function(){Qs.call(this);var n,o=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return o.length>0?o:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return o}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(i){return i};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+iu(t(n))+")"}},set:function(t){n=t}})};Ta(kf,Qs);var rs=function n(){Qs.call(this);var o=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return o},set:function(j){if(isNaN(j))throw new Error('Invalid value "'+j+'" for attribute F supplied.');o=j}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Do(o,3)},set:function(j){this.F=j?Uo(o,3):jo(o,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(j){if(isNaN(j))throw new Error('Invalid value "'+j+'" for attribute Ff supplied.');t=j}});var i=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(0!==i.length)return i},set:function(j){i=void 0!==j?j:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[0])?0:i[0]},set:function(j){i[0]=j}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[1])?0:i[1]},set:function(j){i[1]=j}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[2])?0:i[2]},set:function(j){i[2]=j}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[3])?0:i[3]},set:function(j){i[3]=j}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(j){switch(j){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=j;break;default:throw new Error('Invalid value "'+j+'" for attribute FT supplied.')}}});var r=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!r||r.length<1){if(this instanceof yp)return;r="FieldObject"+n.FieldNum++}var j=function(G){return G};return this.scope&&(j=this.scope.internal.getEncryptor(this.objId)),"("+iu(j(r))+")"},set:function(j){r=j.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return r},set:function(j){r=j}});var s="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return s},set:function(j){s=j}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(j){l=j}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(j){c=j}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return void 0===u?50/fA:u},set:function(j){u=j}});var m="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return m},set:function(j){m=j}});var p="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!p||this instanceof yp||this instanceof ou))return xA(p,this.objId,this.scope)},set:function(j){j=j.toString(),p=j}});var f=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof pa?f:xA(f,this.objId,this.scope)},set:function(j){j=j.toString(),f=this instanceof pa?j:"("===j.substr(0,1)?Wu(j.substr(1,j.length-2)):Wu(j)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof pa?Wu(f.substr(1,f.length-1)):f},set:function(j){j=j.toString(),f=this instanceof pa?"/"+j:j}});var b=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(b)return b},set:function(j){this.V=j}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(b)return this instanceof pa?b:xA(b,this.objId,this.scope)},set:function(j){j=j.toString(),b=this instanceof pa?j:"("===j.substr(0,1)?Wu(j.substr(1,j.length-2)):Wu(j)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof pa?Wu(b.substr(1,b.length-1)):b},set:function(j){j=j.toString(),b=this instanceof pa?"/"+j:j}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var L,N=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return N},set:function(j){N=j=!!j}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(L)return L},set:function(j){L=j}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Do(this.Ff,1)},set:function(j){this.Ff=j?Uo(this.Ff,1):jo(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Do(this.Ff,2)},set:function(j){this.Ff=j?Uo(this.Ff,2):jo(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Do(this.Ff,3)},set:function(j){this.Ff=j?Uo(this.Ff,3):jo(this.Ff,3)}});var R=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(null!==R)return R},set:function(j){if(-1===[0,1,2].indexOf(j))throw new Error('Invalid value "'+j+'" for attribute Q supplied.');R=j}}),Object.defineProperty(this,"textAlign",{get:function(){var j;switch(R){case 0:default:j="left";break;case 1:j="center";break;case 2:j="right"}return j},configurable:!0,enumerable:!0,set:function(j){switch(j){case"right":case 2:R=2;break;case"center":case 1:R=1;break;default:R=0}}})};Ta(rs,Qs);var Xu=function(){rs.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var o=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return tm(o,this.objId,this.scope)},set:function(t){var i,a;a=[],"string"==typeof(i=t)&&(a=function(r,s,l){l||(l=1);for(var c,u=[];c=s.exec(r);)u.push(c[l]);return u}(i,/\((.*?)\)/g)),o=a}}),this.getOptions=function(){return o},this.setOptions=function(t){o=t,this.sort&&o.sort()},this.addOption=function(t){t=(t=t||"").toString(),o.push(t),this.sort&&o.sort()},this.removeOption=function(t,i){for(i=i||!1,t=(t=t||"").toString();-1!==o.indexOf(t)&&(o.splice(o.indexOf(t),1),!1!==i););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Do(this.Ff,18)},set:function(t){this.Ff=t?Uo(this.Ff,18):jo(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Do(this.Ff,19)},set:function(t){!0===this.combo&&(this.Ff=t?Uo(this.Ff,19):jo(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Do(this.Ff,20)},set:function(t){t?(this.Ff=Uo(this.Ff,20),o.sort()):this.Ff=jo(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Do(this.Ff,22)},set:function(t){this.Ff=t?Uo(this.Ff,22):jo(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Do(this.Ff,23)},set:function(t){this.Ff=t?Uo(this.Ff,23):jo(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Do(this.Ff,27)},set:function(t){this.Ff=t?Uo(this.Ff,27):jo(this.Ff,27)}}),this.hasAppearanceStream=!1};Ta(Xu,rs);var ed=function(){Xu.call(this),this.fontName="helvetica",this.combo=!1};Ta(ed,Xu);var td=function(){ed.call(this),this.combo=!0};Ta(td,ed);var vp=function(){td.call(this),this.edit=!0};Ta(vp,td);var pa=function(){rs.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Do(this.Ff,15)},set:function(t){this.Ff=t?Uo(this.Ff,15):jo(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Do(this.Ff,16)},set:function(t){this.Ff=t?Uo(this.Ff,16):jo(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Do(this.Ff,17)},set:function(t){this.Ff=t?Uo(this.Ff,17):jo(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Do(this.Ff,26)},set:function(t){this.Ff=t?Uo(this.Ff,26):jo(this.Ff,26)}});var n,o={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(r){return r};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),0!==Object.keys(o).length){var i,a=[];for(i in a.push("<<"),o)a.push("/"+i+" ("+iu(t(o[i]))+")");return a.push(">>"),a.join("\n")}},set:function(t){"object"===(0,yi.Z)(t)&&(o=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return o.CA||""},set:function(t){"string"==typeof t&&(o.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};Ta(pa,rs);var wp=function(){pa.call(this),this.pushButton=!0};Ta(wp,pa);var vo=function(){pa.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(o){n=void 0!==o?o:[]}})};Ta(vo,pa);var yp=function(){var n,o;rs.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(a){n=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return o},set:function(a){o=a}});var t,i={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(l){return l};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var r,s=[];for(r in s.push("<<"),i)s.push("/"+r+" ("+iu(a(i[r]))+")");return s.push(">>"),s.join("\n")},set:function(a){"object"===(0,yi.Z)(a)&&(i=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return i.CA||""},set:function(a){"string"==typeof a&&(i.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(a){t=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(a){t="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=bn.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Ta(yp,rs),vo.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var o in this.Kids)if(this.Kids.hasOwnProperty(o)){var t=this.Kids[o];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},vo.prototype.createOption=function(n){var o=new yp;return o.Parent=this,o.optionName=n,this.Kids.push(o),Sf.call(this.scope,o),o};var Cp=function(){pa.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=bn.CheckBox.createAppearanceStream()};Ta(Cp,pa);var ou=function(){rs.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Do(this.Ff,13)},set:function(o){this.Ff=o?Uo(this.Ff,13):jo(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Do(this.Ff,21)},set:function(o){this.Ff=o?Uo(this.Ff,21):jo(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Do(this.Ff,23)},set:function(o){this.Ff=o?Uo(this.Ff,23):jo(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Do(this.Ff,24)},set:function(o){this.Ff=o?Uo(this.Ff,24):jo(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Do(this.Ff,25)},set:function(o){this.Ff=o?Uo(this.Ff,25):jo(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Do(this.Ff,26)},set:function(o){this.Ff=o?Uo(this.Ff,26):jo(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(o){n=o}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(o){Number.isInteger(o)&&(n=o)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Ta(ou,rs);var Tp=function(){ou.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Do(this.Ff,14)},set:function(n){this.Ff=n?Uo(this.Ff,14):jo(this.Ff,14)}}),this.password=!0};Ta(Tp,ou);var bn={CheckBox:{createAppearanceStream:function(){return{N:{On:bn.CheckBox.YesNormal},D:{On:bn.CheckBox.YesPushDown,Off:bn.CheckBox.OffPushDown}}},YesPushDown:function(n){var o=Ps(n);o.scope=n.scope;var t=[],i=n.scope.internal.getFont(n.fontName,n.fontStyle).id,a=n.scope.__private__.encodeColorString(n.color),r=gA(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+Wn(bn.internal.getWidth(n))+" "+Wn(bn.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+i+" "+Wn(r.fontSize)+" Tf "+a),t.push("BT"),t.push(r.text),t.push("ET"),t.push("Q"),t.push("EMC"),o.stream=t.join("\n"),o},YesNormal:function(n){var o=Ps(n);o.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,i=n.scope.__private__.encodeColorString(n.color),a=[],r=bn.internal.getHeight(n),s=bn.internal.getWidth(n),l=gA(n,n.caption);return a.push("1 g"),a.push("0 0 "+Wn(s)+" "+Wn(r)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+Wn(s-1)+" "+Wn(r-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+t+" "+Wn(l.fontSize)+" Tf "+i),a.push(l.text),a.push("ET"),a.push("Q"),o.stream=a.join("\n"),o},OffPushDown:function(n){var o=Ps(n);o.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Wn(bn.internal.getWidth(n))+" "+Wn(bn.internal.getHeight(n))+" re"),t.push("f"),o.stream=t.join("\n"),o}},RadioButton:{Circle:{createAppearanceStream:function(n){var o={D:{Off:bn.RadioButton.Circle.OffPushDown},N:{}};return o.N[n]=bn.RadioButton.Circle.YesNormal,o.D[n]=bn.RadioButton.Circle.YesPushDown,o},getCA:function(){return"l"},YesNormal:function(n){var o=Ps(n);o.scope=n.scope;var t=[],i=bn.internal.getWidth(n)<=bn.internal.getHeight(n)?bn.internal.getWidth(n)/4:bn.internal.getHeight(n)/4;i=Number((.9*i).toFixed(5));var r=Number((i*bn.internal.Bezier_C).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+oc(bn.internal.getWidth(n)/2)+" "+oc(bn.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+r+" "+r+" "+i+" 0 "+i+" c"),t.push("-"+r+" "+i+" -"+i+" "+r+" -"+i+" 0 c"),t.push("-"+i+" -"+r+" -"+r+" -"+i+" 0 -"+i+" c"),t.push(r+" -"+i+" "+i+" -"+r+" "+i+" 0 c"),t.push("f"),t.push("Q"),o.stream=t.join("\n"),o},YesPushDown:function(n){var o=Ps(n);o.scope=n.scope;var t=[],i=bn.internal.getWidth(n)<=bn.internal.getHeight(n)?bn.internal.getWidth(n)/4:bn.internal.getHeight(n)/4;i=Number((.9*i).toFixed(5));var a=Number((2*i).toFixed(5)),r=Number((a*bn.internal.Bezier_C).toFixed(5)),s=Number((i*bn.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+oc(bn.internal.getWidth(n)/2)+" "+oc(bn.internal.getHeight(n)/2)+" cm"),t.push(a+" 0 m"),t.push(a+" "+r+" "+r+" "+a+" 0 "+a+" c"),t.push("-"+r+" "+a+" -"+a+" "+r+" -"+a+" 0 c"),t.push("-"+a+" -"+r+" -"+r+" -"+a+" 0 -"+a+" c"),t.push(r+" -"+a+" "+a+" -"+r+" "+a+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+oc(bn.internal.getWidth(n)/2)+" "+oc(bn.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),t.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),t.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),t.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),t.push("f"),t.push("Q"),o.stream=t.join("\n"),o},OffPushDown:function(n){var o=Ps(n);o.scope=n.scope;var t=[],i=bn.internal.getWidth(n)<=bn.internal.getHeight(n)?bn.internal.getWidth(n)/4:bn.internal.getHeight(n)/4;i=Number((.9*i).toFixed(5));var a=Number((2*i).toFixed(5)),r=Number((a*bn.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+oc(bn.internal.getWidth(n)/2)+" "+oc(bn.internal.getHeight(n)/2)+" cm"),t.push(a+" 0 m"),t.push(a+" "+r+" "+r+" "+a+" 0 "+a+" c"),t.push("-"+r+" "+a+" -"+a+" "+r+" -"+a+" 0 c"),t.push("-"+a+" -"+r+" -"+r+" -"+a+" 0 -"+a+" c"),t.push(r+" -"+a+" "+a+" -"+r+" "+a+" 0 c"),t.push("f"),t.push("Q"),o.stream=t.join("\n"),o}},Cross:{createAppearanceStream:function(n){var o={D:{Off:bn.RadioButton.Cross.OffPushDown},N:{}};return o.N[n]=bn.RadioButton.Cross.YesNormal,o.D[n]=bn.RadioButton.Cross.YesPushDown,o},getCA:function(){return"8"},YesNormal:function(n){var o=Ps(n);o.scope=n.scope;var t=[],i=bn.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+Wn(bn.internal.getWidth(n)-2)+" "+Wn(bn.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push(Wn(i.x1.x)+" "+Wn(i.x1.y)+" m"),t.push(Wn(i.x2.x)+" "+Wn(i.x2.y)+" l"),t.push(Wn(i.x4.x)+" "+Wn(i.x4.y)+" m"),t.push(Wn(i.x3.x)+" "+Wn(i.x3.y)+" l"),t.push("s"),t.push("Q"),o.stream=t.join("\n"),o},YesPushDown:function(n){var o=Ps(n);o.scope=n.scope;var t=bn.internal.calculateCross(n),i=[];return i.push("0.749023 g"),i.push("0 0 "+Wn(bn.internal.getWidth(n))+" "+Wn(bn.internal.getHeight(n))+" re"),i.push("f"),i.push("q"),i.push("1 1 "+Wn(bn.internal.getWidth(n)-2)+" "+Wn(bn.internal.getHeight(n)-2)+" re"),i.push("W"),i.push("n"),i.push(Wn(t.x1.x)+" "+Wn(t.x1.y)+" m"),i.push(Wn(t.x2.x)+" "+Wn(t.x2.y)+" l"),i.push(Wn(t.x4.x)+" "+Wn(t.x4.y)+" m"),i.push(Wn(t.x3.x)+" "+Wn(t.x3.y)+" l"),i.push("s"),i.push("Q"),o.stream=i.join("\n"),o},OffPushDown:function(n){var o=Ps(n);o.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Wn(bn.internal.getWidth(n))+" "+Wn(bn.internal.getHeight(n))+" re"),t.push("f"),o.stream=t.join("\n"),o}}},createDefaultAppearanceStream:function(n){var o=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+o+" "+n.fontSize+" Tf "+t}};bn.internal={Bezier_C:.551915024494,calculateCross:function(n){var o=bn.internal.getWidth(n),t=bn.internal.getHeight(n),i=Math.min(o,t);return{x1:{x:(o-i)/2,y:(t-i)/2+i},x2:{x:(o-i)/2+i,y:(t-i)/2},x3:{x:(o-i)/2,y:(t-i)/2},x4:{x:(o-i)/2+i,y:(t-i)/2+i}}}},bn.internal.getWidth=function(n){var o=0;return"object"===(0,yi.Z)(n)&&(o=Cf(n.Rect[2])),o},bn.internal.getHeight=function(n){var o=0;return"object"===(0,yi.Z)(n)&&(o=Cf(n.Rect[3])),o};var n,o,Sf=Oo.addField=function(n){if(function(n,o){if(o.scope=n,void 0!==n.internal&&(void 0===n.internal.acroformPlugin||!1===n.internal.acroformPlugin.isInitialized)){if(rs.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(Tf)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");fA=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new kf,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){var t;(t=n).internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0}),n.internal.events.subscribe("buildDocument",function(){!function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var i=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in i)if(i.hasOwnProperty(a)){var r=i[a];r.objId=void 0,r.hasAnnotation&&K0(r,t)}}(n)}),n.internal.events.subscribe("putCatalog",function(){!function(t){if(void 0===t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")}(n)}),n.internal.events.subscribe("postPutPages",function(t){!function(i,a){var r=!i;for(var s in i||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),i=i||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(i.hasOwnProperty(s)){var l=i[s],c=[],u=l.Rect;if(l.Rect&&(l.Rect=H0(l.Rect,a)),a.internal.newObjectDeferredBegin(l.objId,!0),l.DA=bn.createDefaultAppearanceStream(l),"object"===(0,yi.Z)(l)&&"function"==typeof l.getKeyValueListForStream&&(c=l.getKeyValueListForStream()),l.Rect=u,l.hasAppearanceStream&&!l.appearanceStreamContent){var m=J0(l);c.push({key:"AP",value:"<</N "+m+">>"}),a.internal.acroformPlugin.xForms.push(m)}if(l.appearanceStreamContent){var p="";for(var f in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(f)){var b=l.appearanceStreamContent[f];if(p+="/"+f+" ",p+="<<",Object.keys(b).length>=1||Array.isArray(b)){for(var s in b)if(b.hasOwnProperty(s)){var L=b[s];"function"==typeof L&&(L=L.call(a,l)),p+="/"+s+" "+L+" ",a.internal.acroformPlugin.xForms.indexOf(L)>=0||a.internal.acroformPlugin.xForms.push(L)}}else"function"==typeof(L=b)&&(L=L.call(a,l)),p+="/"+s+" "+L,a.internal.acroformPlugin.xForms.indexOf(L)>=0||a.internal.acroformPlugin.xForms.push(L);p+=">>"}c.push({key:"AP",value:"<<\n"+p+">>"})}a.internal.putStream({additionalKeyValues:c,objectId:l.objId}),a.internal.out("endobj")}r&&function(n,o){for(var t in n)if(n.hasOwnProperty(t)){var i=t,a=n[t];o.internal.newObjectDeferredBegin(a.objId,!0),"object"===(0,yi.Z)(a)&&"function"==typeof a.putStream&&a.putStream(),delete n[i]}}(a.internal.acroformPlugin.xForms,a)}(t,n)}),n.internal.acroformPlugin.isInitialized=!0}}(this,n),!(n instanceof rs))throw new Error("Invalid argument passed to jsPDF.addField.");var o;return(o=n).scope.internal.acroformPlugin.printedOut&&(o.scope.internal.acroformPlugin.printedOut=!1,o.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),o.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(o),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};function Ef(n){return n.reduce(function(o,t,i){return o[t]=i,o},{})}Oo.AcroFormChoiceField=Xu,Oo.AcroFormListBox=ed,Oo.AcroFormComboBox=td,Oo.AcroFormEditBox=vp,Oo.AcroFormButton=pa,Oo.AcroFormPushButton=wp,Oo.AcroFormRadioButton=vo,Oo.AcroFormCheckBox=Cp,Oo.AcroFormTextField=ou,Oo.AcroFormPasswordField=Tp,Oo.AcroFormAppearance=bn,Oo.AcroForm={ChoiceField:Xu,ListBox:ed,ComboBox:td,EditBox:vp,Button:pa,PushButton:wp,RadioButton:vo,CheckBox:Cp,TextField:ou,PasswordField:Tp,Appearance:bn},In.AcroForm={ChoiceField:Xu,ListBox:ed,ComboBox:td,EditBox:vp,Button:pa,PushButton:wp,RadioButton:vo,CheckBox:Cp,TextField:ou,PasswordField:Tp,Appearance:bn},function(n){n.__addimage__={};var o="UNKNOWN",t={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=n.__addimage__.getImageFileTypeByImageData=function(se,pe){var Be,Pe,Oe,Fe,Re,Je=o;if("RGBA"===(pe=pe||o)||void 0!==se.data&&se.data instanceof Uint8ClampedArray&&"height"in se&&"width"in se)return"RGBA";if(ve(se))for(Re in t)for(Oe=t[Re],Be=0;Be<Oe.length;Be+=1){for(Fe=!0,Pe=0;Pe<Oe[Be].length;Pe+=1)if(void 0!==Oe[Be][Pe]&&Oe[Be][Pe]!==se[Pe]){Fe=!1;break}if(!0===Fe){Je=Re;break}}else for(Re in t)for(Oe=t[Re],Be=0;Be<Oe.length;Be+=1){for(Fe=!0,Pe=0;Pe<Oe[Be].length;Pe+=1)if(void 0!==Oe[Be][Pe]&&Oe[Be][Pe]!==se.charCodeAt(Pe)){Fe=!1;break}if(!0===Fe){Je=Re;break}}return Je===o&&pe!==o&&(Je=pe),Je},a=function se(pe){for(var Be=this.internal.write,Pe=this.internal.putStream,Oe=(0,this.internal.getFilters)();-1!==Oe.indexOf("FlateEncode");)Oe.splice(Oe.indexOf("FlateEncode"),1);pe.objectId=this.internal.newObject();var Fe=[];if(Fe.push({key:"Type",value:"/XObject"}),Fe.push({key:"Subtype",value:"/Image"}),Fe.push({key:"Width",value:pe.width}),Fe.push({key:"Height",value:pe.height}),pe.colorSpace===R.INDEXED?Fe.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(pe.palette.length/3-1)+" "+("sMask"in pe&&void 0!==pe.sMask?pe.objectId+2:pe.objectId+1)+" 0 R]"}):(Fe.push({key:"ColorSpace",value:"/"+pe.colorSpace}),pe.colorSpace===R.DEVICE_CMYK&&Fe.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Fe.push({key:"BitsPerComponent",value:pe.bitsPerComponent}),"decodeParameters"in pe&&void 0!==pe.decodeParameters&&Fe.push({key:"DecodeParms",value:"<<"+pe.decodeParameters+">>"}),"transparency"in pe&&Array.isArray(pe.transparency)){for(var Re="",Je=0,Ke=pe.transparency.length;Je<Ke;Je++)Re+=pe.transparency[Je]+" "+pe.transparency[Je]+" ";Fe.push({key:"Mask",value:"["+Re+"]"})}if(void 0!==pe.sMask&&Fe.push({key:"SMask",value:pe.objectId+1+" 0 R"}),Pe({data:pe.data,additionalKeyValues:Fe,alreadyAppliedFilters:void 0!==pe.filter?["/"+pe.filter]:void 0,objectId:pe.objectId}),Be("endobj"),"sMask"in pe&&void 0!==pe.sMask){var ue={width:pe.width,height:pe.height,colorSpace:"DeviceGray",bitsPerComponent:pe.bitsPerComponent,decodeParameters:"/Predictor "+pe.predictor+" /Colors 1 /BitsPerComponent "+pe.bitsPerComponent+" /Columns "+pe.width,data:pe.sMask};"filter"in pe&&(ue.filter=pe.filter),se.call(this,ue)}if(pe.colorSpace===R.INDEXED){var Te=this.internal.newObject();Pe({data:te(new Uint8Array(pe.palette)),objectId:Te}),Be("endobj")}},r=function(){var se=this.internal.collections.addImage_images;for(var pe in se)a.call(this,se[pe])},s=function(){var se,pe=this.internal.collections.addImage_images,Be=this.internal.write;for(var Pe in pe)Be("/I"+(se=pe[Pe]).index,se.objectId,"0","R")},l=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",r),this.internal.events.subscribe("putXobjectDict",s))},c=function(){var se=this.internal.collections.addImage_images;return l.call(this),se},u=function(){return Object.keys(this.internal.collections.addImage_images).length},m=function(se){return"function"==typeof n["process"+se.toUpperCase()]},p=function(se){return"object"===(0,yi.Z)(se)&&1===se.nodeType},f=function(se,pe){if("IMG"===se.nodeName&&se.hasAttribute("src")){var Be=""+se.getAttribute("src");if(0===Be.indexOf("data:image/"))return em(unescape(Be).split("base64,").pop());var Pe=n.loadFile(Be,!0);if(void 0!==Pe)return Pe}if("CANVAS"===se.nodeName){if(0===se.width||0===se.height)throw new Error("Given canvas must have data. Canvas width: "+se.width+", height: "+se.height);var Oe;switch(pe){case"PNG":Oe="image/png";break;case"WEBP":Oe="image/webp";break;default:Oe="image/jpeg"}return em(se.toDataURL(Oe,1).split("base64,").pop())}},b=function(se){var pe=this.internal.collections.addImage_images;if(pe)for(var Be in pe)if(se===pe[Be].alias)return pe[Be]},L=function(se,pe,Be){return se||pe||(se=-96,pe=-96),se<0&&(se=-1*Be.width*72/se/this.internal.scaleFactor),pe<0&&(pe=-1*Be.height*72/pe/this.internal.scaleFactor),0===se&&(se=pe*Be.width/Be.height),0===pe&&(pe=se*Be.height/Be.width),[se,pe]},N=function(se,pe,Be,Pe,Oe,Fe){var Re=L.call(this,Be,Pe,Oe),Je=this.internal.getCoordinateString,Ke=this.internal.getVerticalCoordinateString,et=c.call(this);if(Be=Re[0],Pe=Re[1],et[Oe.index]=Oe,Fe){Fe*=Math.PI/180;var gt=Math.cos(Fe),ue=Math.sin(Fe),Te=function(Ue){return Ue.toFixed(4)},Ee=[Te(gt),Te(ue),Te(-1*ue),Te(gt),0,0,"cm"]}this.internal.write("q"),Fe?(this.internal.write([1,"0","0",1,Je(se),Ke(pe+Pe),"cm"].join(" ")),this.internal.write(Ee.join(" ")),this.internal.write([Je(Be),"0","0",Je(Pe),"0","0","cm"].join(" "))):this.internal.write([Je(Be),"0","0",Je(Pe),Je(se),Ke(pe+Pe),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Oe.index+" Do"),this.internal.write("Q")},R=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var j=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},G=n.__addimage__.sHashCode=function(se){var pe,Be,Pe=0;if("string"==typeof se)for(Be=se.length,pe=0;pe<Be;pe++)Pe=(Pe<<5)-Pe+se.charCodeAt(pe),Pe|=0;else if(ve(se))for(Be=se.byteLength/2,pe=0;pe<Be;pe++)Pe=(Pe<<5)-Pe+se[pe],Pe|=0;return Pe},ae=n.__addimage__.validateStringAsBase64=function(se){(se=se||"").toString().trim();var pe=!0;return 0===se.length&&(pe=!1),se.length%4!=0&&(pe=!1),!1===/^[A-Za-z0-9+/]+$/.test(se.substr(0,se.length-2))&&(pe=!1),!1===/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(se.substr(-2))&&(pe=!1),pe},W=n.__addimage__.extractImageFromDataUrl=function(se){var pe=(se=se||"").split("base64,"),Be=null;if(2===pe.length){var Pe=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(pe[0]);Array.isArray(Pe)&&(Be={mimeType:Pe[1],charset:Pe[2],data:pe[1]})}return Be},le=n.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};n.__addimage__.isArrayBuffer=function(se){return le()&&se instanceof ArrayBuffer};var ve=n.__addimage__.isArrayBufferView=function(se){return le()&&typeof Uint32Array<"u"&&(se instanceof Int8Array||se instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&se instanceof Uint8ClampedArray||se instanceof Int16Array||se instanceof Uint16Array||se instanceof Int32Array||se instanceof Uint32Array||se instanceof Float32Array||se instanceof Float64Array)},ce=n.__addimage__.binaryStringToUint8Array=function(se){for(var pe=se.length,Be=new Uint8Array(pe),Pe=0;Pe<pe;Pe++)Be[Pe]=se.charCodeAt(Pe);return Be},te=n.__addimage__.arrayBufferToBinaryString=function(se){for(var pe="",Be=ve(se)?se:new Uint8Array(se),Pe=0;Pe<Be.length;Pe+=8192)pe+=String.fromCharCode.apply(null,Be.subarray(Pe,Pe+8192));return pe};n.addImage=function(){var se,pe,Be,Pe,Oe,Fe,Re,Je,Ke;if("number"==typeof arguments[1]?(pe=o,Be=arguments[1],Pe=arguments[2],Oe=arguments[3],Fe=arguments[4],Re=arguments[5],Je=arguments[6],Ke=arguments[7]):(pe=arguments[1],Be=arguments[2],Pe=arguments[3],Oe=arguments[4],Fe=arguments[5],Re=arguments[6],Je=arguments[7],Ke=arguments[8]),"object"===(0,yi.Z)(se=arguments[0])&&!p(se)&&"imageData"in se){var et=se;se=et.imageData,pe=et.format||pe||o,Be=et.x||Be||0,Pe=et.y||Pe||0,Oe=et.w||et.width||Oe,Fe=et.h||et.height||Fe,Re=et.alias||Re,Je=et.compression||Je,Ke=et.rotation||et.angle||Ke}var gt=this.internal.getFilters();if(void 0===Je&&-1!==gt.indexOf("FlateEncode")&&(Je="SLOW"),isNaN(Be)||isNaN(Pe))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var ue=Se.call(this,se,pe,Re,Je);return N.call(this,Be,Pe,Oe,Fe,ue,Ke),this};var Se=function(se,pe,Be,Pe){var Oe,Fe,Re,Ke;if("string"==typeof se&&i(se)===o){se=unescape(se);var Je=Ze(se,!1);(""!==Je||void 0!==(Je=n.loadFile(se,!0)))&&(se=Je)}if(p(se)&&(se=f(se,pe)),pe=i(se,pe),!m(pe))throw new Error("addImage does not support files of type '"+pe+"', please ensure that a plugin for '"+pe+"' support is added.");if((null==(Re=Be)||0===Re.length)&&(Be="string"==typeof(Ke=se)||ve(Ke)?G(Ke):ve(Ke.data)?G(Ke.data):null),(Oe=b.call(this,Be))||(le()&&(se instanceof Uint8Array||"RGBA"===pe||(Fe=se,se=ce(se))),Oe=this["process"+pe.toUpperCase()](se,u.call(this),Be,function(Ke){return Ke&&"string"==typeof Ke&&(Ke=Ke.toUpperCase()),Ke in n.image_compression?Ke:j.NONE}(Pe),Fe)),!Oe)throw new Error("An unknown error occurred whilst processing the image.");return Oe},Ze=n.__addimage__.convertBase64ToBinaryString=function(se,pe){var Be;pe="boolean"!=typeof pe||pe;var Pe,Oe="";if("string"==typeof se){Pe=null!==(Be=W(se))?Be.data:se;try{Oe=em(Pe)}catch(Fe){if(pe)throw ae(Pe)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Fe.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return Oe};n.getImageProperties=function(se){var pe,Be,Pe="";if(p(se)&&(se=f(se)),"string"==typeof se&&i(se)===o&&(""===(Pe=Ze(se,!1))&&(Pe=n.loadFile(se)||""),se=Pe),Be=i(se),!m(Be))throw new Error("addImage does not support files of type '"+Be+"', please ensure that a plugin for '"+Be+"' support is added.");if(!le()||se instanceof Uint8Array||(se=ce(se)),!(pe=this["process"+Be.toUpperCase()](se)))throw new Error("An unknown error occurred whilst processing the image");return pe.fileType=Be,pe}}(In.API),
/**
       * @license
       * Copyright (c) 2014 Steven Spungin (TwelveTone LLC)  steven@twelvetone.tv
       *
       * Licensed under the MIT License.
       * http://opensource.org/licenses/mit-license
       */
n=In.API,o=function(t){if(void 0!==t&&""!=t)return!0},In.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var i,a,r,s=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(t.objId),u=t.pageContext.annotations,m=!1,p=0;p<u.length&&!m;p++)switch((i=u[p]).type){case"link":(o(i.options.url)||o(i.options.pageNumber))&&(m=!0);break;case"reference":case"text":case"freetext":m=!0}if(0!=m){this.internal.write("/Annots [");for(var f=0;f<u.length;f++){i=u[f];var b=this.internal.pdfEscape,L=this.internal.getEncryptor(t.objId);switch(i.type){case"reference":this.internal.write(" "+i.object.objId+" 0 R ");break;case"text":var N=this.internal.newAdditionalObject(),R=this.internal.newAdditionalObject(),j=this.internal.getEncryptor(N.objId),G=i.title||"Note";r="<</Type /Annot /Subtype /Text "+(a="/Rect ["+s(i.bounds.x)+" "+l(i.bounds.y+i.bounds.h)+" "+s(i.bounds.x+i.bounds.w)+" "+l(i.bounds.y)+"] ")+"/Contents ("+b(j(i.contents))+")",r+=" /Popup "+R.objId+" 0 R",r+=" /P "+c.objId+" 0 R",r+=" /T ("+b(j(G))+") >>",N.content=r;var ae=N.objId+" 0 R";r="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+s(i.bounds.x+30)+" "+l(i.bounds.y+i.bounds.h)+" "+s(i.bounds.x+i.bounds.w+30)+" "+l(i.bounds.y)+"] ")+" /Parent "+ae,i.open&&(r+=" /Open true"),R.content=r+=" >>",this.internal.write(N.objId,"0 R",R.objId,"0 R");break;case"freetext":a="/Rect ["+s(i.bounds.x)+" "+l(i.bounds.y)+" "+s(i.bounds.x+i.bounds.w)+" "+l(i.bounds.y+i.bounds.h)+"] ";var W=i.color||"#000000";r="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+b(L(i.contents))+")",r+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+W+")",r+=" /Border [0 0 0]",this.internal.write(r+=" >>");break;case"link":if(i.options.name){var le=this.annotations._nameMap[i.options.name];i.options.pageNumber=le.page,i.options.top=le.y}else i.options.top||(i.options.top=0);if(a="/Rect ["+i.finalBounds.x+" "+i.finalBounds.y+" "+i.finalBounds.w+" "+i.finalBounds.h+"] ",r="",i.options.url)r="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+b(L(i.options.url))+") >>";else if(i.options.pageNumber)switch(r="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(i.options.pageNumber).objId+" 0 R",i.options.magFactor=i.options.magFactor||"XYZ",i.options.magFactor){case"Fit":r+=" /Fit]";break;case"FitH":r+=" /FitH "+i.options.top+"]";break;case"FitV":i.options.left=i.options.left||0,r+=" /FitV "+i.options.left+"]";break;default:var ve=l(i.options.top);i.options.left=i.options.left||0,void 0===i.options.zoom&&(i.options.zoom=0),r+=" /XYZ "+i.options.left+" "+ve+" "+i.options.zoom+"]"}""!=r&&this.internal.write(r+=" >>")}}this.internal.write("]")}}]),n.createAnnotation=function(t){var i=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":i.pageContext.annotations.push(t)}},n.link=function(t,i,a,r,s){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(t),y:u(i),w:c(t+a),h:u(i+r)},options:s,type:"link"})},n.textWithLink=function(t,i,a,r){var s,l,c=this.getTextWidth(t),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(void 0!==r.maxWidth){var m=this.splitTextToSize(t,l=r.maxWidth).length;s=Math.ceil(u*m)}else l=c,s=u;return this.text(t,i,a,r),"center"===r.align&&(i-=c/2),"right"===r.align&&(i-=c),this.link(i,(a+=.2*u)-u,l,s,r),c},n.getTextWidth=function(t){var i=this.internal.getFontSize();return this.getStringUnitWidth(t)*i/this.internal.scaleFactor},
/**
       * @license
       * Copyright (c) 2017 Aras Abbasi
       *
       * Licensed under the MIT License.
       * http://opensource.org/licenses/mit-license
       */
function(n){var o={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},i={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];n.__arabicParser__={};var r=n.__arabicParser__.isInArabicSubstitutionA=function(N){return void 0!==o[N.charCodeAt(0)]},s=n.__arabicParser__.isArabicLetter=function(N){return"string"==typeof N&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(N)},l=n.__arabicParser__.isArabicEndLetter=function(N){return s(N)&&r(N)&&o[N.charCodeAt(0)].length<=2},c=n.__arabicParser__.isArabicAlfLetter=function(N){return s(N)&&a.indexOf(N.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(N){return s(N)&&r(N)&&o[N.charCodeAt(0)].length>=1};var u=n.__arabicParser__.arabicLetterHasFinalForm=function(N){return s(N)&&r(N)&&o[N.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(N){return s(N)&&r(N)&&o[N.charCodeAt(0)].length>=3};var m=n.__arabicParser__.arabicLetterHasMedialForm=function(N){return s(N)&&r(N)&&4==o[N.charCodeAt(0)].length},p=n.__arabicParser__.resolveLigatures=function(N){var R=0,j=t,G="",ae=0;for(R=0;R<N.length;R+=1)void 0!==j[N.charCodeAt(R)]?(ae++,"number"==typeof(j=j[N.charCodeAt(R)])&&(G+=String.fromCharCode(j),j=t,ae=0),R===N.length-1&&(j=t,G+=N.charAt(R-(ae-1)),R-=ae-1,ae=0)):(j=t,G+=N.charAt(R-ae),R-=ae,ae=0);return G};n.__arabicParser__.isArabicDiacritic=function(N){return void 0!==N&&void 0!==i[N.charCodeAt(0)]};var f=n.__arabicParser__.getCorrectForm=function(N,R,j){return s(N)?!1===r(N)?-1:!u(N)||!s(R)&&!s(j)||!s(j)&&l(R)||l(N)&&!s(R)||l(N)&&c(R)||l(N)&&l(R)?0:m(N)&&s(R)&&!l(R)&&s(j)&&u(j)?3:l(N)||!s(j)?1:2:-1},b=function(N){var R=0,j=0,G=0,ae="",W="",le="",ve=(N=N||"").split("\\s+"),ce=[];for(R=0;R<ve.length;R+=1){for(ce.push(""),j=0;j<ve[R].length;j+=1)W=ve[R][j-1],le=ve[R][j+1],s(ae=ve[R][j])?(G=f(ae,W,le),ce[R]+=-1!==G?String.fromCharCode(o[ae.charCodeAt(0)][G]):ae):ce[R]+=ae;ce[R]=p(ce[R])}return ce.join(" ")},L=n.__arabicParser__.processArabic=n.processArabic=function(){var N,R="string"==typeof arguments[0]?arguments[0]:arguments[0].text,j=[];if(Array.isArray(R)){var G=0;for(j=[],G=0;G<R.length;G+=1)Array.isArray(R[G])?j.push([b(R[G][0]),R[G][1],R[G][2]]):j.push([b(R[G])]);N=j}else N=b(R);return"string"==typeof arguments[0]?N:(arguments[0].text=N,arguments[0])};n.events.push(["preProcessText",L])}(In.API),In.API.autoPrint=function(n){var o;return"javascript"===((n=n||{}).variant=n.variant||"non-conform",n.variant)?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){o=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+o+" 0 R")})),this},
/**
       * @license
       * Copyright (c) 2014 Steven Spungin (TwelveTone LLC)  steven@twelvetone.tv
       *
       * Licensed under the MIT License.
       * http://opensource.org/licenses/mit-license
       */
function(n){var o=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(l){t=l}});var i=150;Object.defineProperty(this,"width",{get:function(){return i},set:function(l){i=isNaN(l)||!1===Number.isInteger(l)||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=i+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(l){a=isNaN(l)||!1===Number.isInteger(l)||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var r=[];Object.defineProperty(this,"childNodes",{get:function(){return r},set:function(l){r=l}});var s={};Object.defineProperty(this,"style",{get:function(){return s},set:function(l){s=l}}),Object.defineProperty(this,"parentNode",{})};o.prototype.getContext=function(t,i){var a;if("2d"!==(t=t||"2d"))return null;for(a in i)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=i[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},o.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new o,this.canvas.pdf=this}])}(In.API),function(n){var o={left:0,top:0,bottom:0,right:0},t=!1,i=function(){void 0===this.internal.__cell__&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},o),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new r,this.internal.__cell__.pages=1},r=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(N){c=N}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(N){u=N}});var m=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return m},set:function(N){m=N}});var p=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return p},set:function(N){p=N}});var f=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return f},set:function(N){f=N}});var b=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return b},set:function(N){b=N}});var L=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return L},set:function(N){L=N}}),this};r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},r.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(c){return i.call(this),this.internal.__cell__.headerFunction="function"==typeof c?c:void 0,this},n.getTextDimensions=function(c,u){i.call(this);var m=(u=u||{}).fontSize||this.getFontSize(),p=u.font||this.getFont(),f=u.scaleFactor||this.internal.scaleFactor,b=0,L=0,N=0,R=this;if(!Array.isArray(c)&&"string"!=typeof c){if("number"!=typeof c)throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var j=u.maxWidth;j>0?"string"==typeof c?c=this.splitTextToSize(c,j):"[object Array]"===Object.prototype.toString.call(c)&&(c=c.reduce(function(ae,W){return ae.concat(R.splitTextToSize(W,j))},[])):c=Array.isArray(c)?c:[c];for(var G=0;G<c.length;G++)b<(N=this.getStringUnitWidth(c[G],{font:p})*m)&&(b=N);return 0!==b&&(L=c.length),{w:b/=f,h:Math.max((L*m*this.getLineHeightFactor()-m*(this.getLineHeightFactor()-1))/f,0)}},n.cellAddPage=function(){i.call(this),this.addPage();var c=this.internal.__cell__.margins||o;return this.internal.__cell__.lastCell=new r(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var s=n.cell=function(){var c;c=arguments[0]instanceof r?arguments[0]:new r(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),i.call(this);var u=this.internal.__cell__.lastCell,m=this.internal.__cell__.padding,p=this.internal.__cell__.margins||o,f=this.internal.__cell__.tableHeaderRow,b=this.internal.__cell__.printHeaders;return void 0!==u.lineNumber&&(u.lineNumber===c.lineNumber?(c.x=(u.x||0)+(u.width||0),c.y=u.y||0):u.y+u.height+c.height+p.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=p.top,b&&f&&(this.printHeaderRow(c.lineNumber,!0),c.y+=f[0].height)):c.y=u.y+u.height||c.y),void 0!==c.text[0]&&(this.rect(c.x,c.y,c.width,c.height,!0===t?"FD":void 0),"right"===c.align?this.text(c.text,c.x+c.width-m,c.y+m,{align:"right",baseline:"top"}):"center"===c.align?this.text(c.text,c.x+c.width/2,c.y+m,{align:"center",baseline:"top",maxWidth:c.width-m-m}):this.text(c.text,c.x+m,c.y+m,{align:"left",baseline:"top",maxWidth:c.width-m-m})),this.internal.__cell__.lastCell=c,this};n.table=function(c,u,m,p,f){if(i.call(this),!m)throw new Error("No data for PDF table.");var b,L,N,R,j=[],G=[],ae=[],W={},le={},ve=[],ce=[],te=(f=f||{}).autoSize||!1,Se=!1!==f.printHeaders,Ze=f.css&&void 0!==f.css["font-size"]?16*f.css["font-size"]:f.fontSize||12,se=f.margins||Object.assign({width:this.getPageWidth()},o),pe="number"==typeof f.padding?f.padding:3,Be=f.headerBackgroundColor||"#c8c8c8",Pe=f.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=Se,this.internal.__cell__.margins=se,this.internal.__cell__.table_font_size=Ze,this.internal.__cell__.padding=pe,this.internal.__cell__.headerBackgroundColor=Be,this.internal.__cell__.headerTextColor=Pe,this.setFontSize(Ze),null==p)G=j=Object.keys(m[0]),ae=j.map(function(){return"left"});else if(Array.isArray(p)&&"object"===(0,yi.Z)(p[0]))for(j=p.map(function(et){return et.name}),G=p.map(function(et){return et.prompt||et.name||""}),ae=p.map(function(et){return et.align||"left"}),b=0;b<p.length;b+=1)le[p[b].name]=p[b].width*(19.049976/25.4);else Array.isArray(p)&&"string"==typeof p[0]&&(G=j=p,ae=j.map(function(){return"left"}));if(te||Array.isArray(p)&&"string"==typeof p[0])for(b=0;b<j.length;b+=1){for(W[R=j[b]]=m.map(function(et){return et[R]}),this.setFont(void 0,"bold"),ve.push(this.getTextDimensions(G[b],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),L=W[R],this.setFont(void 0,"normal"),N=0;N<L.length;N+=1)ve.push(this.getTextDimensions(L[N],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);le[R]=Math.max.apply(null,ve)+pe+pe,ve=[]}if(Se){var Oe={};for(b=0;b<j.length;b+=1)Oe[j[b]]={},Oe[j[b]].text=G[b],Oe[j[b]].align=ae[b];var Fe=l.call(this,Oe,le);ce=j.map(function(et){return new r(c,u,le[et],Fe,Oe[et].text,void 0,Oe[et].align)}),this.setTableHeaderRow(ce),this.printHeaderRow(1,!1)}var Re=p.reduce(function(et,gt){return et[gt.name]=gt.align,et},{});for(b=0;b<m.length;b+=1){"rowStart"in f&&f.rowStart instanceof Function&&f.rowStart({row:b,data:m[b]},this);var Je=l.call(this,m[b],le);for(N=0;N<j.length;N+=1){var Ke=m[b][j[N]];"cellStart"in f&&f.cellStart instanceof Function&&f.cellStart({row:b,col:N,data:Ke},this),s.call(this,new r(c,u,le[j[N]],Je,Ke,b+2,Re[j[N]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=u,this};var l=function(c,u){var m=this.internal.__cell__.padding,p=this.internal.__cell__.table_font_size,f=this.internal.scaleFactor;return Object.keys(c).map(function(b){var L=c[b];return this.splitTextToSize(L.hasOwnProperty("text")?L.text:L,u[b]-m-m)},this).map(function(b){return this.getLineHeightFactor()*b.length*p/f+m+m},this).reduce(function(b,L){return Math.max(b,L)},0)};n.setTableHeaderRow=function(c){i.call(this),this.internal.__cell__.tableHeaderRow=c},n.printHeaderRow=function(c,u){if(i.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var m;if(t=!0,"function"==typeof this.internal.__cell__.headerFunction){var p=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new r(p[0],p[1],p[2],p[3],void 0,-1)}this.setFont(void 0,"bold");for(var f=[],b=0;b<this.internal.__cell__.tableHeaderRow.length;b+=1){m=this.internal.__cell__.tableHeaderRow[b].clone(),u&&(m.y=this.internal.__cell__.margins.top||0,f.push(m)),m.lineNumber=c;var L=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),s.call(this,m),this.setTextColor(L)}f.length>0&&this.setTableHeaderRow(f),this.setFont(void 0,"normal"),t=!1}}(In.API);var Of={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},If=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],vA=Ef(If),Mf=[100,200,300,400,500,600,700,800,900],Lf=Ef(Mf);function mn(n){var r,o=n.family.replace(/"|'/g,"").toLowerCase(),t=Of[r=(r=n.style)||"normal"]?r:"normal",i=function(r){return r?"number"==typeof r?r>=100&&r<=900&&r%100==0?r:400:/^\d00$/.test(r)?parseInt(r):"bold"===r?700:400:400}(n.weight),a=function(r){return"number"==typeof vA[r=r||"normal"]?r:"normal"}(n.stretch);return{family:o,style:t,weight:i,stretch:a,src:n.src||[],ref:n.ref||{name:o,style:[a,t,i].join(" ")}}}function Bf(n,o,t,i){var a;for(a=t;a>=0&&a<o.length;a+=i)if(n[o[a]])return n[o[a]];for(a=t;a>=0&&a<o.length;a-=i)if(n[o[a]])return n[o[a]]}var $0={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},kp={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function ss(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function wA(n){return n.trimLeft()}function nm(n,o){for(var t=0;t<n.length;){if(n.charAt(t)===o)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function Sp(n){var o=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return null===o?null:[o[0],n.substring(o[0].length)]}var Ep,Pf,Qf,ml=["times"];(function(n){var o,t,i,a,r,s,l,c,u,m=function(ue){return this.isStrokeTransparent=(ue=ue||{}).isStrokeTransparent||!1,this.strokeOpacity=ue.strokeOpacity||1,this.strokeStyle=ue.strokeStyle||"#000000",this.fillStyle=ue.fillStyle||"#000000",this.isFillTransparent=ue.isFillTransparent||!1,this.fillOpacity=ue.fillOpacity||1,this.font=ue.font||"10px sans-serif",this.textBaseline=ue.textBaseline||"alphabetic",this.textAlign=ue.textAlign||"left",this.lineWidth=ue.lineWidth||1,this.lineJoin=ue.lineJoin||"miter",this.lineCap=ue.lineCap||"butt",this.path=ue.path||[],this.transform=void 0!==ue.transform?ue.transform.clone():new c,this.globalCompositeOperation=ue.globalCompositeOperation||"normal",this.globalAlpha=ue.globalAlpha||1,this.clip_path=ue.clip_path||[],this.currentPoint=ue.currentPoint||new s,this.miterLimit=ue.miterLimit||10,this.lastPoint=ue.lastPoint||new s,this.lineDashOffset=ue.lineDashOffset||0,this.lineDash=ue.lineDash||[],this.margin=ue.margin||[0,0,0,0],this.prevPageLastElemOffset=ue.prevPageLastElemOffset||0,this.ignoreClearRect="boolean"!=typeof ue.ignoreClearRect||ue.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new p(this),o=this.internal.f2,t=this.internal.getCoordinateString,i=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,r=this.internal.getVerticalCoordinate,s=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,u=new m}]);var p=function(ue){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Te=ue;Object.defineProperty(this,"pdf",{get:function(){return Te}});var Ee=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Ee},set:function(ft){Ee=!!ft}});var Ue=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Ue},set:function(ft){Ue=!!ft}});var $e=0;Object.defineProperty(this,"posX",{get:function(){return $e},set:function(ft){isNaN(ft)||($e=ft)}});var ut=0;Object.defineProperty(this,"posY",{get:function(){return ut},set:function(ft){isNaN(ft)||(ut=ft)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(ft){var je;"number"==typeof ft?je=[ft,ft,ft,ft]:((je=new Array(4))[0]=ft[0],je[1]=ft.length>=2?ft[1]:je[0],je[2]=ft.length>=3?ft[2]:je[0],je[3]=ft.length>=4?ft[3]:je[1]),u.margin=je}});var st=!1;Object.defineProperty(this,"autoPaging",{get:function(){return st},set:function(ft){st=ft}});var dt=0;Object.defineProperty(this,"lastBreak",{get:function(){return dt},set:function(ft){dt=ft}});var Rt=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Rt},set:function(ft){Rt=ft}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(ft){ft instanceof m&&(u=ft)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(ft){u.path=ft}});var Qt=[];Object.defineProperty(this,"ctxStack",{get:function(){return Qt},set:function(ft){Qt=ft}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ft){var je;je=f(ft),this.ctx.fillStyle=je.style,this.ctx.isFillTransparent=0===je.a,this.ctx.fillOpacity=je.a,this.pdf.setFillColor(je.r,je.g,je.b,{a:je.a}),this.pdf.setTextColor(je.r,je.g,je.b,{a:je.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ft){var je=f(ft);this.ctx.strokeStyle=je.style,this.ctx.isStrokeTransparent=0===je.a,this.ctx.strokeOpacity=je.a,0===je.a?this.pdf.setDrawColor(255,255,255):this.pdf.setDrawColor(je.r,je.g,je.b)}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ft){-1!==["butt","round","square"].indexOf(ft)&&(this.ctx.lineCap=ft,this.pdf.setLineCap(ft))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ft){isNaN(ft)||(this.ctx.lineWidth=ft,this.pdf.setLineWidth(ft))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ft){-1!==["bevel","round","miter"].indexOf(ft)&&(this.ctx.lineJoin=ft,this.pdf.setLineJoin(ft))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ft){isNaN(ft)||(this.ctx.miterLimit=ft,this.pdf.setMiterLimit(ft))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ft){this.ctx.textBaseline=ft}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ft){-1!==["right","end","center","left","start"].indexOf(ft)&&(this.ctx.textAlign=ft)}});var nn=null,dn=null;Object.defineProperty(this,"fontFaces",{get:function(){return dn},set:function(ft){nn=null,dn=ft}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ft){var je;if(this.ctx.font=ft,null!==(je=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ft))){var En=je[1],wn=je[3],Zt=je[4],Vt=je[6],an=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Zt)[2];Zt=Math.floor("px"===an?parseFloat(Zt)*this.pdf.internal.scaleFactor:"em"===an?parseFloat(Zt)*this.pdf.getFontSize():parseFloat(Zt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Zt);var Wt=function(Vn){var Si,An,mr=[],Ji=Vn.trim();if(""===Ji)return ml;if(Ji in kp)return[kp[Ji]];for(;""!==Ji;){switch(An=null,Si=(Ji=wA(Ji)).charAt(0)){case'"':case"'":An=nm(Ji.substring(1),Si);break;default:An=Sp(Ji)}if(null===An||(mr.push(An[0]),""!==(Ji=wA(An[1]))&&","!==Ji.charAt(0)))return ml;Ji=Ji.replace(/^,/,"")}return mr}(Vt);if(this.fontFaces){var On=function V0(n,o,t){for(var i=(t=t||{}).defaultFontFamily||"times",a=Object.assign({},$0,t.genericFontFamilies||{}),r=null,s=null,l=0;l<o.length;++l)if(a[(r=mn(o[l])).family]&&(r.family=a[r.family]),n.hasOwnProperty(r.family)){s=n[r.family];break}if(!(s=s||n[i]))throw new Error("Could not find a font-family for the rule '"+ss(r)+"' and default family '"+i+"'.");if(s=function(c,u){if(u[c])return u[c];var m=vA[c],f=Bf(u,If,m,m<=vA.normal?-1:1);if(!f)throw new Error("Could not find a matching font-stretch value for "+c);return f}(r.stretch,s),s=function(c,u){if(u[c])return u[c];for(var m=Of[c],p=0;p<m.length;++p)if(u[m[p]])return u[m[p]];throw new Error("Could not find a matching font-style for "+c)}(r.style,s),!(s=function(c,u){if(u[c])return u[c];if(400===c&&u[500])return u[500];if(500===c&&u[400])return u[400];var p=Bf(u,Mf,Lf[c],c<400?-1:1);if(!p)throw new Error("Could not find a matching font-weight for value "+c);return p}(r.weight,s)))throw new Error("Failed to resolve a font for the rule '"+ss(r)+"'.");return s}(function tn(ft,je){if(null===nn){var En=(wn=ft.getFontList(),Zt=[],Object.keys(wn).forEach(function(Vt){wn[Vt].forEach(function(an){var Wt=null;switch(an){case"bold":Wt={family:Vt,weight:"bold"};break;case"italic":Wt={family:Vt,style:"italic"};break;case"bolditalic":Wt={family:Vt,weight:"bold",style:"italic"};break;case"":case"normal":Wt={family:Vt}}null!==Wt&&(Wt.ref={name:Vt,style:an},Zt.push(Wt))})}),Zt);nn=function(wn){for(var Zt={},Vt=0;Vt<wn.length;++Vt){var an=mn(wn[Vt]),Wt=an.family,On=an.stretch,Gn=an.style,ei=an.weight;Zt[Wt]=Zt[Wt]||{},Zt[Wt][On]=Zt[Wt][On]||{},Zt[Wt][On][Gn]=Zt[Wt][On][Gn]||{},Zt[Wt][On][Gn][ei]=an}return Zt}(En.concat(je))}var wn,Zt;return nn}(this.pdf,this.fontFaces),Wt.map(function(Vn){return{family:Vn,stretch:"normal",weight:wn,style:En}}));this.pdf.setFont(On.ref.name,On.ref.style)}else{var Gn="";("bold"===wn||parseInt(wn,10)>=700||"bold"===En)&&(Gn="bold"),"italic"===En&&(Gn+="italic"),0===Gn.length&&(Gn="normal");for(var ei="",gi={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Mi=0;Mi<Wt.length;Mi++){if(void 0!==this.pdf.internal.getFont(Wt[Mi],Gn,{noFallback:!0,disableWarning:!0})){ei=Wt[Mi];break}if("bolditalic"===Gn&&void 0!==this.pdf.internal.getFont(Wt[Mi],"bold",{noFallback:!0,disableWarning:!0}))ei=Wt[Mi],Gn="bold";else if(void 0!==this.pdf.internal.getFont(Wt[Mi],"normal",{noFallback:!0,disableWarning:!0})){ei=Wt[Mi],Gn="normal";break}}if(""===ei)for(var po=0;po<Wt.length;po++)if(gi[Wt[po]]){ei=gi[Wt[po]];break}this.pdf.setFont(ei=""===ei?"Times":ei,Gn)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ft){this.ctx.globalCompositeOperation=ft}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ft){this.ctx.globalAlpha=ft}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ft){this.ctx.lineDashOffset=ft,gt.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ft){this.ctx.lineDash=ft,gt.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ft){this.ctx.ignoreClearRect=!!ft}})};p.prototype.setLineDash=function(ue){this.lineDash=ue},p.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},p.prototype.fill=function(){W.call(this,"fill",!1)},p.prototype.stroke=function(){W.call(this,"stroke",!1)},p.prototype.beginPath=function(){this.path=[{type:"begin"}]},p.prototype.moveTo=function(ue,Te){if(isNaN(ue)||isNaN(Te))throw io.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Ee=this.ctx.transform.applyToPoint(new s(ue,Te));this.path.push({type:"mt",x:Ee.x,y:Ee.y}),this.ctx.lastPoint=new s(ue,Te)},p.prototype.closePath=function(){var ue=new s(0,0),Te=0;for(Te=this.path.length-1;-1!==Te;Te--)if("begin"===this.path[Te].type&&"object"===(0,yi.Z)(this.path[Te+1])&&"number"==typeof this.path[Te+1].x){ue=new s(this.path[Te+1].x,this.path[Te+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new s(ue.x,ue.y)},p.prototype.lineTo=function(ue,Te){if(isNaN(ue)||isNaN(Te))throw io.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Ee=this.ctx.transform.applyToPoint(new s(ue,Te));this.path.push({type:"lt",x:Ee.x,y:Ee.y}),this.ctx.lastPoint=new s(Ee.x,Ee.y)},p.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),W.call(this,null,!0)},p.prototype.quadraticCurveTo=function(ue,Te,Ee,Ue){if(isNaN(Ee)||isNaN(Ue)||isNaN(ue)||isNaN(Te))throw io.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var $e=this.ctx.transform.applyToPoint(new s(Ee,Ue)),ut=this.ctx.transform.applyToPoint(new s(ue,Te));this.path.push({type:"qct",x1:ut.x,y1:ut.y,x:$e.x,y:$e.y}),this.ctx.lastPoint=new s($e.x,$e.y)},p.prototype.bezierCurveTo=function(ue,Te,Ee,Ue,$e,ut){if(isNaN($e)||isNaN(ut)||isNaN(ue)||isNaN(Te)||isNaN(Ee)||isNaN(Ue))throw io.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var st=this.ctx.transform.applyToPoint(new s($e,ut)),dt=this.ctx.transform.applyToPoint(new s(ue,Te)),Rt=this.ctx.transform.applyToPoint(new s(Ee,Ue));this.path.push({type:"bct",x1:dt.x,y1:dt.y,x2:Rt.x,y2:Rt.y,x:st.x,y:st.y}),this.ctx.lastPoint=new s(st.x,st.y)},p.prototype.arc=function(ue,Te,Ee,Ue,$e,ut){if(isNaN(ue)||isNaN(Te)||isNaN(Ee)||isNaN(Ue)||isNaN($e))throw io.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ut=!!ut,!this.ctx.transform.isIdentity){var st=this.ctx.transform.applyToPoint(new s(ue,Te));ue=st.x,Te=st.y;var dt=this.ctx.transform.applyToPoint(new s(0,Ee)),Rt=this.ctx.transform.applyToPoint(new s(0,0));Ee=Math.sqrt(Math.pow(dt.x-Rt.x,2)+Math.pow(dt.y-Rt.y,2))}Math.abs($e-Ue)>=2*Math.PI&&(Ue=0,$e=2*Math.PI),this.path.push({type:"arc",x:ue,y:Te,radius:Ee,startAngle:Ue,endAngle:$e,counterclockwise:ut})},p.prototype.arcTo=function(ue,Te,Ee,Ue,$e){throw new Error("arcTo not implemented.")},p.prototype.rect=function(ue,Te,Ee,Ue){if(isNaN(ue)||isNaN(Te)||isNaN(Ee)||isNaN(Ue))throw io.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(ue,Te),this.lineTo(ue+Ee,Te),this.lineTo(ue+Ee,Te+Ue),this.lineTo(ue,Te+Ue),this.lineTo(ue,Te),this.lineTo(ue+Ee,Te),this.lineTo(ue,Te)},p.prototype.fillRect=function(ue,Te,Ee,Ue){if(isNaN(ue)||isNaN(Te)||isNaN(Ee)||isNaN(Ue))throw io.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!b.call(this)){var $e={};"butt"!==this.lineCap&&($e.lineCap=this.lineCap,this.lineCap="butt"),"miter"!==this.lineJoin&&($e.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(ue,Te,Ee,Ue),this.fill(),$e.hasOwnProperty("lineCap")&&(this.lineCap=$e.lineCap),$e.hasOwnProperty("lineJoin")&&(this.lineJoin=$e.lineJoin)}},p.prototype.strokeRect=function(ue,Te,Ee,Ue){if(isNaN(ue)||isNaN(Te)||isNaN(Ee)||isNaN(Ue))throw io.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");L.call(this)||(this.beginPath(),this.rect(ue,Te,Ee,Ue),this.stroke())},p.prototype.clearRect=function(ue,Te,Ee,Ue){if(isNaN(ue)||isNaN(Te)||isNaN(Ee)||isNaN(Ue))throw io.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(ue,Te,Ee,Ue))},p.prototype.save=function(ue){ue="boolean"!=typeof ue||ue;for(var Te=this.pdf.internal.getCurrentPageInfo().pageNumber,Ee=0;Ee<this.pdf.internal.getNumberOfPages();Ee++)this.pdf.setPage(Ee+1),this.pdf.internal.out("q");if(this.pdf.setPage(Te),ue){this.ctx.fontSize=this.pdf.internal.getFontSize();var Ue=new m(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Ue}},p.prototype.restore=function(ue){ue="boolean"!=typeof ue||ue;for(var Te=this.pdf.internal.getCurrentPageInfo().pageNumber,Ee=0;Ee<this.pdf.internal.getNumberOfPages();Ee++)this.pdf.setPage(Ee+1),this.pdf.internal.out("Q");this.pdf.setPage(Te),ue&&0!==this.ctxStack.length&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},p.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var f=function(ue){var Te,Ee,Ue,$e;if(!0===ue.isCanvasGradient&&(ue=ue.getColor()),!ue)return{r:0,g:0,b:0,a:0,style:ue};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(ue))Te=0,Ee=0,Ue=0,$e=0;else{var ut=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(ue);if(null!==ut)Te=parseInt(ut[1]),Ee=parseInt(ut[2]),Ue=parseInt(ut[3]),$e=1;else if(null!==(ut=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(ue)))Te=parseInt(ut[1]),Ee=parseInt(ut[2]),Ue=parseInt(ut[3]),$e=parseFloat(ut[4]);else{if($e=1,"string"==typeof ue&&"#"!==ue.charAt(0)){var st=new gf(ue);ue=st.ok?st.toHex():"#000000"}4===ue.length?(Te=ue.substring(1,2),Te+=Te,Ee=ue.substring(2,3),Ee+=Ee,Ue=ue.substring(3,4),Ue+=Ue):(Te=ue.substring(1,3),Ee=ue.substring(3,5),Ue=ue.substring(5,7)),Te=parseInt(Te,16),Ee=parseInt(Ee,16),Ue=parseInt(Ue,16)}}return{r:Te,g:Ee,b:Ue,a:$e,style:ue}},b=function(){return this.ctx.isFillTransparent||0==this.globalAlpha},L=function(){return!(!this.ctx.isStrokeTransparent&&0!=this.globalAlpha)};p.prototype.fillText=function(ue,Te,Ee,Ue){if(isNaN(Te)||isNaN(Ee)||"string"!=typeof ue)throw io.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Ue=isNaN(Ue)?void 0:Ue,!b.call(this)){var $e=Je(this.ctx.transform.rotation);pe.call(this,{text:ue,x:Te,y:Ee,scale:this.ctx.transform.scaleX,angle:$e,align:this.textAlign,maxWidth:Ue})}},p.prototype.strokeText=function(ue,Te,Ee,Ue){if(isNaN(Te)||isNaN(Ee)||"string"!=typeof ue)throw io.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!L.call(this)){Ue=isNaN(Ue)?void 0:Ue;var $e=Je(this.ctx.transform.rotation);pe.call(this,{text:ue,x:Te,y:Ee,scale:this.ctx.transform.scaleX,renderingMode:"stroke",angle:$e,align:this.textAlign,maxWidth:Ue})}},p.prototype.measureText=function(ue){if("string"!=typeof ue)throw io.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Te=this.pdf,Ee=this.pdf.internal.scaleFactor,Ue=Te.internal.getFontSize(),$e=Te.getStringUnitWidth(ue)*Ue/Te.internal.scaleFactor;return new function(st){var dt=(st=st||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return dt}}),this}({width:$e*=Math.round(96*Ee/72*1e4)/1e4})},p.prototype.scale=function(ue,Te){if(isNaN(ue)||isNaN(Te))throw io.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Ee=new c(ue,0,0,Te,0,0);this.ctx.transform=this.ctx.transform.multiply(Ee)},p.prototype.rotate=function(ue){if(isNaN(ue))throw io.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Te=new c(Math.cos(ue),Math.sin(ue),-Math.sin(ue),Math.cos(ue),0,0);this.ctx.transform=this.ctx.transform.multiply(Te)},p.prototype.translate=function(ue,Te){if(isNaN(ue)||isNaN(Te))throw io.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Ee=new c(1,0,0,1,ue,Te);this.ctx.transform=this.ctx.transform.multiply(Ee)},p.prototype.transform=function(ue,Te,Ee,Ue,$e,ut){if(isNaN(ue)||isNaN(Te)||isNaN(Ee)||isNaN(Ue)||isNaN($e)||isNaN(ut))throw io.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var st=new c(ue,Te,Ee,Ue,$e,ut);this.ctx.transform=this.ctx.transform.multiply(st)},p.prototype.setTransform=function(ue,Te,Ee,Ue,$e,ut){ue=isNaN(ue)?1:ue,Te=isNaN(Te)?0:Te,Ee=isNaN(Ee)?0:Ee,Ue=isNaN(Ue)?1:Ue,$e=isNaN($e)?0:$e,ut=isNaN(ut)?0:ut,this.ctx.transform=new c(ue,Te,Ee,Ue,$e,ut)};var N=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};p.prototype.drawImage=function(ue,Te,Ee,Ue,$e,ut,st,dt,Rt){var Qt=this.pdf.getImageProperties(ue),nn=1,tn=1,dn=1,ft=1;void 0!==Ue&&void 0!==dt&&(dn=dt/Ue,ft=Rt/$e,nn=Qt.width/Ue*dt/Ue,tn=Qt.height/$e*Rt/$e),void 0===ut&&(ut=Te,st=Ee,Te=0,Ee=0),void 0!==Ue&&void 0===dt&&(dt=Ue,Rt=$e),void 0===Ue&&void 0===dt&&(dt=Qt.width,Rt=Qt.height);for(var je,En=this.ctx.transform.decompose(),wn=Je(En.rotate.shx),Zt=new c,Vt=(Zt=(Zt=(Zt=Zt.multiply(En.translate)).multiply(En.skew)).multiply(En.scale)).applyToRectangle(new l(ut-Te*dn,st-Ee*ft,Ue*nn,$e*tn)),an=R.call(this,Vt),Wt=[],On=0;On<an.length;On+=1)-1===Wt.indexOf(an[On])&&Wt.push(an[On]);if(ae(Wt),this.autoPaging)for(var Gn=Wt[0],ei=Wt[Wt.length-1],gi=Gn;gi<ei+1;gi++){this.pdf.setPage(gi);var Mi=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],po=1===gi?this.posY+this.margin[0]:this.margin[0],Si=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],An=1===gi?0:this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2]+(gi-2)*Si;if(0!==this.ctx.clip_path.length){var mr=this.path;je=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=G(je,this.posX+this.margin[3],-An+po+this.ctx.prevPageLastElemOffset),le.call(this,"fill",!0),this.path=mr}var Ji=JSON.parse(JSON.stringify(Vt));Ji=G([Ji],this.posX+this.margin[3],-An+po+this.ctx.prevPageLastElemOffset)[0];var Tl=(gi>Gn||gi<ei)&&N.call(this);Tl&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Mi,Si,null).clip().discardPath()),this.pdf.addImage(ue,"JPEG",Ji.x,Ji.y,Ji.w,Ji.h,null,null,wn),Tl&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(ue,"JPEG",Vt.x,Vt.y,Vt.w,Vt.h,null,null,wn)};var R=function(ue,Te,Ee){var Ue=[];Te=Te||this.pdf.internal.pageSize.width,Ee=Ee||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var $e=this.posY+this.ctx.prevPageLastElemOffset;switch(ue.type){default:case"mt":case"lt":Ue.push(Math.floor((ue.y+$e)/Ee)+1);break;case"arc":Ue.push(Math.floor((ue.y+$e-ue.radius)/Ee)+1),Ue.push(Math.floor((ue.y+$e+ue.radius)/Ee)+1);break;case"qct":var ut=Ke(this.ctx.lastPoint.x,this.ctx.lastPoint.y,ue.x1,ue.y1,ue.x,ue.y);Ue.push(Math.floor((ut.y+$e)/Ee)+1),Ue.push(Math.floor((ut.y+ut.h+$e)/Ee)+1);break;case"bct":var st=et(this.ctx.lastPoint.x,this.ctx.lastPoint.y,ue.x1,ue.y1,ue.x2,ue.y2,ue.x,ue.y);Ue.push(Math.floor((st.y+$e)/Ee)+1),Ue.push(Math.floor((st.y+st.h+$e)/Ee)+1);break;case"rect":Ue.push(Math.floor((ue.y+$e)/Ee)+1),Ue.push(Math.floor((ue.y+ue.h+$e)/Ee)+1)}for(var dt=0;dt<Ue.length;dt+=1)for(;this.pdf.internal.getNumberOfPages()<Ue[dt];)j.call(this);return Ue},j=function(){var ue=this.fillStyle,Te=this.strokeStyle,Ee=this.font,Ue=this.lineCap,$e=this.lineWidth,ut=this.lineJoin;this.pdf.addPage(),this.fillStyle=ue,this.strokeStyle=Te,this.font=Ee,this.lineCap=Ue,this.lineWidth=$e,this.lineJoin=ut},G=function(ue,Te,Ee){for(var Ue=0;Ue<ue.length;Ue++)switch(ue[Ue].type){case"bct":ue[Ue].x2+=Te,ue[Ue].y2+=Ee;case"qct":ue[Ue].x1+=Te,ue[Ue].y1+=Ee;default:ue[Ue].x+=Te,ue[Ue].y+=Ee}return ue},ae=function(ue){return ue.sort(function(Te,Ee){return Te-Ee})},W=function(ue,Te){for(var Ee,Ue,$e=this.fillStyle,ut=this.strokeStyle,st=this.lineCap,dt=this.lineWidth,Rt=Math.abs(dt*this.ctx.transform.scaleX),Qt=this.lineJoin,nn=JSON.parse(JSON.stringify(this.path)),tn=JSON.parse(JSON.stringify(this.path)),dn=[],ft=0;ft<tn.length;ft++)if(void 0!==tn[ft].x)for(var je=R.call(this,tn[ft]),En=0;En<je.length;En+=1)-1===dn.indexOf(je[En])&&dn.push(je[En]);for(var wn=0;wn<dn.length;wn++)for(;this.pdf.internal.getNumberOfPages()<dn[wn];)j.call(this);if(ae(dn),this.autoPaging)for(var Zt=dn[0],Vt=dn[dn.length-1],an=Zt;an<Vt+1;an++){this.pdf.setPage(an),this.fillStyle=$e,this.strokeStyle=ut,this.lineCap=st,this.lineWidth=Rt,this.lineJoin=Qt;var Wt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],On=1===an?this.posY+this.margin[0]:this.margin[0],ei=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],gi=1===an?0:this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2]+(an-2)*ei;if(0!==this.ctx.clip_path.length){var Mi=this.path;Ee=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=G(Ee,this.posX+this.margin[3],-gi+On+this.ctx.prevPageLastElemOffset),le.call(this,ue,!0),this.path=Mi}if(Ue=JSON.parse(JSON.stringify(nn)),this.path=G(Ue,this.posX+this.margin[3],-gi+On+this.ctx.prevPageLastElemOffset),!1===Te||0===an){var po=(an>Zt||an<Vt)&&N.call(this);po&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Wt,ei,null).clip().discardPath()),le.call(this,ue,Te),po&&this.pdf.restoreGraphicsState()}this.lineWidth=dt}else this.lineWidth=Rt,le.call(this,ue,Te),this.lineWidth=dt;this.path=nn},le=function(ue,Te){if(("stroke"!==ue||Te||!L.call(this))&&("stroke"===ue||Te||!b.call(this))){for(var Ee,Ue,$e=[],ut=this.path,st=0;st<ut.length;st++){var dt=ut[st];switch(dt.type){case"begin":$e.push({begin:!0});break;case"close":$e.push({close:!0});break;case"mt":$e.push({start:dt,deltas:[],abs:[]});break;case"lt":var Rt=$e.length;if(ut[st-1]&&!isNaN(ut[st-1].x)&&(Ee=[dt.x-ut[st-1].x,dt.y-ut[st-1].y],Rt>0))for(;Rt>=0;Rt--)if(!0!==$e[Rt-1].close&&!0!==$e[Rt-1].begin){$e[Rt-1].deltas.push(Ee),$e[Rt-1].abs.push(dt);break}break;case"bct":$e[$e.length-1].deltas.push(Ee=[dt.x1-ut[st-1].x,dt.y1-ut[st-1].y,dt.x2-ut[st-1].x,dt.y2-ut[st-1].y,dt.x-ut[st-1].x,dt.y-ut[st-1].y]);break;case"qct":$e[$e.length-1].deltas.push(Ee=[ut[st-1].x+2/3*(dt.x1-ut[st-1].x)-ut[st-1].x,ut[st-1].y+2/3*(dt.y1-ut[st-1].y)-ut[st-1].y,dt.x+2/3*(dt.x1-dt.x)-ut[st-1].x,dt.y+2/3*(dt.y1-dt.y)-ut[st-1].y,dt.x-ut[st-1].x,dt.y-ut[st-1].y]);break;case"arc":$e.push({deltas:[],abs:[],arc:!0}),Array.isArray($e[$e.length-1].abs)&&$e[$e.length-1].abs.push(dt)}}Ue=Te?null:"stroke"===ue?"stroke":"fill";for(var En=!1,wn=0;wn<$e.length;wn++)if($e[wn].arc)for(var Zt=$e[wn].abs,Vt=0;Vt<Zt.length;Vt++){var an=Zt[Vt];"arc"===an.type?te.call(this,an.x,an.y,an.radius,an.startAngle,an.endAngle,an.counterclockwise,void 0,Te,!En):Be.call(this,an.x,an.y),En=!0}else!0===$e[wn].close?(this.pdf.internal.out("h"),En=!1):!0!==$e[wn].begin&&(Pe.call(this,$e[wn].deltas,$e[wn].start.x,$e[wn].start.y),En=!0);Ue&&Se.call(this,Ue),Te&&Ze.call(this)}},ve=function(ue){var Te=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Ee=Te*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return ue-Ee;case"top":return ue+Te-Ee;case"hanging":return ue+Te-2*Ee;case"middle":return ue+Te/2-Ee;default:return ue}},ce=function(ue){return ue+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};p.prototype.createLinearGradient=function(){var ue=function(){};return ue.colorStops=[],ue.addColorStop=function(Te,Ee){this.colorStops.push([Te,Ee])},ue.getColor=function(){return 0===this.colorStops.length?"#000000":this.colorStops[0][1]},ue.isCanvasGradient=!0,ue},p.prototype.createPattern=function(){return this.createLinearGradient()},p.prototype.createRadialGradient=function(){return this.createLinearGradient()};var te=function(ue,Te,Ee,Ue,$e,ut,st,dt,Rt){for(var Qt=Fe.call(this,Ee,Ue,$e,ut),nn=0;nn<Qt.length;nn++){var tn=Qt[nn];0===nn&&(Rt?se.call(this,tn.x1+ue,tn.y1+Te):Be.call(this,tn.x1+ue,tn.y1+Te)),Oe.call(this,ue,Te,tn.x2,tn.y2,tn.x3,tn.y3,tn.x4,tn.y4)}dt?Ze.call(this):Se.call(this,st)},Se=function(ue){switch(ue){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},Ze=function(){this.pdf.clip(),this.pdf.discardPath()},se=function(ue,Te){this.pdf.internal.out(t(ue)+" "+i(Te)+" m")},pe=function(ue){var Te;switch(ue.align){case"right":case"end":Te="right";break;case"center":Te="center";break;default:Te="left"}var Ee=this.pdf.getTextDimensions(ue.text),Ue=ve.call(this,ue.y),$e=ce.call(this,Ue)-Ee.h,ut=this.ctx.transform.applyToPoint(new s(ue.x,Ue)),st=this.ctx.transform.decompose(),dt=new c;dt=(dt=(dt=dt.multiply(st.translate)).multiply(st.skew)).multiply(st.scale);for(var Rt,Qt,nn,tn=this.ctx.transform.applyToRectangle(new l(ue.x,Ue,Ee.w,Ee.h)),dn=dt.applyToRectangle(new l(ue.x,$e,Ee.w,Ee.h)),ft=R.call(this,dn),je=[],En=0;En<ft.length;En+=1)-1===je.indexOf(ft[En])&&je.push(ft[En]);if(ae(je),this.autoPaging)for(var wn=je[0],Zt=je[je.length-1],Vt=wn;Vt<Zt+1;Vt++){this.pdf.setPage(Vt);var an=1===Vt?this.posY+this.margin[0]:this.margin[0],On=this.pdf.internal.pageSize.height-this.margin[2],Gn=On-this.margin[0],ei=this.pdf.internal.pageSize.width-this.margin[1],gi=ei-this.margin[3],Mi=1===Vt?0:this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2]+(Vt-2)*Gn;if(0!==this.ctx.clip_path.length){var po=this.path;Rt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=G(Rt,this.posX+this.margin[3],-1*Mi+an),le.call(this,"fill",!0),this.path=po}var Vn=G([JSON.parse(JSON.stringify(dn))],this.posX+this.margin[3],-Mi+an+this.ctx.prevPageLastElemOffset)[0];ue.scale>=.01&&(Qt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Qt*ue.scale),this.lineWidth=(nn=this.lineWidth)*ue.scale);var Si="text"!==this.autoPaging;if(Si||Vn.y+Vn.h<=On){if(Si||Vn.y>=an&&Vn.x<=ei){var An=Si?ue.text:this.pdf.splitTextToSize(ue.text,ue.maxWidth||ei-Vn.x)[0],mr=G([JSON.parse(JSON.stringify(tn))],this.posX+this.margin[3],-Mi+an+this.ctx.prevPageLastElemOffset)[0],Ji=Si&&(Vt>wn||Vt<Zt)&&N.call(this);Ji&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],gi,Gn,null).clip().discardPath()),this.pdf.text(An,mr.x,mr.y,{angle:ue.angle,align:Te,renderingMode:ue.renderingMode}),Ji&&this.pdf.restoreGraphicsState()}}else Vn.y<On&&(this.ctx.prevPageLastElemOffset+=On-Vn.y);ue.scale>=.01&&(this.pdf.setFontSize(Qt),this.lineWidth=nn)}else ue.scale>=.01&&(Qt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Qt*ue.scale),this.lineWidth=(nn=this.lineWidth)*ue.scale),this.pdf.text(ue.text,ut.x+this.posX,ut.y+this.posY,{angle:ue.angle,align:Te,renderingMode:ue.renderingMode,maxWidth:ue.maxWidth}),ue.scale>=.01&&(this.pdf.setFontSize(Qt),this.lineWidth=nn)},Be=function(ue,Te,Ee,Ue){Ue=Ue||0,this.pdf.internal.out(t(ue+(Ee=Ee||0))+" "+i(Te+Ue)+" l")},Pe=function(ue,Te,Ee){return this.pdf.lines(ue,Te,Ee,null,null)},Oe=function(ue,Te,Ee,Ue,$e,ut,st,dt){this.pdf.internal.out([o(a(Ee+ue)),o(r(Ue+Te)),o(a($e+ue)),o(r(ut+Te)),o(a(st+ue)),o(r(dt+Te)),"c"].join(" "))},Fe=function(ue,Te,Ee,Ue){for(var $e=2*Math.PI,ut=Math.PI/2;Te>Ee;)Te-=$e;var st=Math.abs(Ee-Te);st<$e&&Ue&&(st=$e-st);for(var dt=[],Rt=Ue?-1:1,Qt=Te;st>1e-5;){var nn=Qt+Rt*Math.min(st,ut);dt.push(Re.call(this,ue,Qt,nn)),st-=Math.abs(nn-Qt),Qt=nn}return dt},Re=function(ue,Te,Ee){var Ue=(Ee-Te)/2,$e=ue*Math.cos(Ue),ut=ue*Math.sin(Ue),st=$e,dt=-ut,Rt=st*st+dt*dt,Qt=Rt+st*$e+dt*ut,nn=4/3*(Math.sqrt(2*Rt*Qt)-Qt)/(st*ut-dt*$e),tn=st-nn*dt,dn=dt+nn*st,ft=tn,je=-dn,En=Ue+Te,wn=Math.cos(En),Zt=Math.sin(En);return{x1:ue*Math.cos(Te),y1:ue*Math.sin(Te),x2:tn*wn-dn*Zt,y2:tn*Zt+dn*wn,x3:ft*wn-je*Zt,y3:ft*Zt+je*wn,x4:ue*Math.cos(Ee),y4:ue*Math.sin(Ee)}},Je=function(ue){return 180*ue/Math.PI},Ke=function(ue,Te,Ee,Ue,$e,ut){var st=ue+.5*(Ee-ue),dt=Te+.5*(Ue-Te),Rt=$e+.5*(Ee-$e),Qt=ut+.5*(Ue-ut),nn=Math.min(ue,$e,st,Rt),tn=Math.max(ue,$e,st,Rt),dn=Math.min(Te,ut,dt,Qt),ft=Math.max(Te,ut,dt,Qt);return new l(nn,dn,tn-nn,ft-dn)},et=function(ue,Te,Ee,Ue,$e,ut,st,dt){var Rt,Qt,nn,tn,dn,ft,je,En,wn,Zt,Vt,an,Wt,On,Gn=Ee-ue,ei=Ue-Te,gi=$e-Ee,Mi=ut-Ue,po=st-$e,Vn=dt-ut;for(Qt=0;Qt<41;Qt++)wn=(je=(nn=ue+(Rt=Qt/40)*Gn)+Rt*((dn=Ee+Rt*gi)-nn))+Rt*(dn+Rt*($e+Rt*po-dn)-je),Zt=(En=(tn=Te+Rt*ei)+Rt*((ft=Ue+Rt*Mi)-tn))+Rt*(ft+Rt*(ut+Rt*Vn-ft)-En),0==Qt?(Vt=wn,an=Zt,Wt=wn,On=Zt):(Vt=Math.min(Vt,wn),an=Math.min(an,Zt),Wt=Math.max(Wt,wn),On=Math.max(On,Zt));return new l(Math.round(Vt),Math.round(an),Math.round(Wt-Vt),Math.round(On-an))},gt=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var Ee=JSON.stringify({lineDash:this.ctx.lineDash,lineDashOffset:this.ctx.lineDashOffset});this.prevLineDash!==Ee&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Ee)}}})(In.API),
/**
       * @license
       * jsPDF filters PlugIn
       * Copyright (c) 2014 Aras Abbasi
       *
       * Licensed under the MIT License.
       * http://opensource.org/licenses/mit-license
       */
function(n){var o=function(r){var s,l,c,u,m,p,f,b,L,N;for(/[^\x00-\xFF]/.test(r),l=[],c=0,u=(r+=s="\0\0\0\0".slice(r.length%4||4)).length;u>c;c+=4)0!==(m=(r.charCodeAt(c)<<24)+(r.charCodeAt(c+1)<<16)+(r.charCodeAt(c+2)<<8)+r.charCodeAt(c+3))?(p=(m=((m=((m=((m=(m-(N=m%85))/85)-(L=m%85))/85)-(b=m%85))/85)-(f=m%85))/85)%85,l.push(p+33,f+33,b+33,L+33,N+33)):l.push(122);return function(R,j){for(var G=j;G>0;G--)R.pop()}(l,s.length),String.fromCharCode.apply(String,l)+"~>"},t=function(r){var s,l,c,u,m,p=String,f="length",b=255,L="charCodeAt",N="slice",R="replace";for(r[N](-2),r=r[N](0,-2)[R](/\s/g,"")[R]("z","!!!!!"),c=[],u=0,m=(r+=s="uuuuu"[N](r[f]%5||5))[f];m>u;u+=5)l=52200625*(r[L](u)-33)+614125*(r[L](u+1)-33)+7225*(r[L](u+2)-33)+85*(r[L](u+3)-33)+(r[L](u+4)-33),c.push(b&l>>24,b&l>>16,b&l>>8,b&l);return function(j,G){for(var ae=G;ae>0;ae--)j.pop()}(c,s[f]),p.fromCharCode.apply(p,c)},i=function(r){var s=new RegExp(/^([0-9A-Fa-f]{2})+$/);if(-1!==(r=r.replace(/\s/g,"")).indexOf(">")&&(r=r.substr(0,r.indexOf(">"))),r.length%2&&(r+="0"),!1===s.test(r))return"";for(var l="",c=0;c<r.length;c+=2)l+=String.fromCharCode("0x"+(r[c]+r[c+1]));return l},a=function(r){for(var s=new Uint8Array(r.length),l=r.length;l--;)s[l]=r.charCodeAt(l);return(s=Yu(s)).reduce(function(c,u){return c+String.fromCharCode(u)},"")};n.processDataByFilters=function(r,s){var l=0,c=r||"",u=[];for("string"==typeof(s=s||[])&&(s=[s]),l=0;l<s.length;l+=1)switch(s[l]){case"ASCII85Decode":case"/ASCII85Decode":c=t(c),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=o(c),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=i(c),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map(function(m){return("0"+m.charCodeAt().toString(16)).slice(-2)}).join("")+">",u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=a(c),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+s[l]+'" is not implemented')}return{data:c,reverseChain:u.reverse().join(" ")}}}(In.API),
/**
       * @license
       * jsPDF fileloading PlugIn
       * Copyright (c) 2018 Aras Abbasi (aras.abbasi@gmail.com)
       *
       * Licensed under the MIT License.
       * http://opensource.org/licenses/mit-license
       */
function(n){n.loadFile=function(o,t,i){return function(a,r,s){r=!1!==r,s="function"==typeof s?s:function(){};var l=void 0;try{l=function(c,u,m){var p=new XMLHttpRequest,f=0,b=function(L){var N=L.length,R=[],j=String.fromCharCode;for(f=0;f<N;f+=1)R.push(j(255&L.charCodeAt(f)));return R.join("")};if(p.open("GET",c,!u),p.overrideMimeType("text/plain; charset=x-user-defined"),!1===u&&(p.onload=function(){m(200===p.status?b(this.responseText):void 0)}),p.send(null),u&&200===p.status)return b(p.responseText)}(a,r,s)}catch{}return l}(o,t,i)},n.loadImageFile=n.loadFile}(In.API),function(n){function o(){return(Qn.html2canvas?Promise.resolve(Qn.html2canvas):Promise.resolve().then(I.t.bind(I,74456,23))).catch(function(s){return Promise.reject(new Error("Could not load html2canvas: "+s))}).then(function(s){return s.default?s.default:s})}function t(){return(Qn.DOMPurify?Promise.resolve(Qn.DOMPurify):I.e(695).then(I.t.bind(I,60695,23))).catch(function(s){return Promise.reject(new Error("Could not load dompurify: "+s))}).then(function(s){return s.default?s.default:s})}var i=function(s){var l=(0,yi.Z)(s);return"undefined"===l?"undefined":"string"===l||s instanceof String?"string":"number"===l||s instanceof Number?"number":"function"===l||s instanceof Function?"function":s&&s.constructor===Array?"array":s&&1===s.nodeType?"element":"object"===l?"object":"unknown"},a=function(s,l){var c=document.createElement(s);for(var u in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[u]=l.style[u];return c},r=function s(l){var c=Object.assign(s.convert(Promise.resolve()),JSON.parse(JSON.stringify(s.template))),u=s.convert(Promise.resolve(),c);return(u=u.setProgress(1,s,1,[s])).set(l)};(r.prototype=Object.create(Promise.prototype)).constructor=r,r.convert=function(s,l){return s.__proto__=l||r.prototype,s},r.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},r.prototype.from=function(s,l){return this.then(function(){switch(l=l||function(c){switch(i(c)){case"string":return"string";case"element":return"canvas"===c.nodeName.toLowerCase()?"canvas":"element";default:return"unknown"}}(s)){case"string":return this.then(t).then(function(c){return this.set({src:a("div",{innerHTML:s,dompurify:c})})});case"element":return this.set({src:s});case"canvas":return this.set({canvas:s});case"img":return this.set({img:s});default:return this.error("Unknown source type.")}})},r.prototype.to=function(s){switch(s){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},r.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var s={position:"relative",display:"inline-block",width:("number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=function c(u,m){for(var p=3===u.nodeType?document.createTextNode(u.nodeValue):u.cloneNode(!1),f=u.firstChild;f;f=f.nextSibling)!0!==m&&1===f.nodeType&&"SCRIPT"===f.nodeName||p.appendChild(c(f,m));return 1===u.nodeType&&("CANVAS"===u.nodeName?(p.width=u.width,p.height=u.height,p.getContext("2d").drawImage(u,0,0)):"TEXTAREA"!==u.nodeName&&"SELECT"!==u.nodeName||(p.value=u.value),p.addEventListener("load",function(){p.scrollTop=u.scrollTop,p.scrollLeft=u.scrollLeft},!0)),p}(this.prop.src,this.opt.html2canvas.javascriptEnabled);"BODY"===l.tagName&&(s.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:s}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},r.prototype.toCanvas=function(){return this.thenList([function(){return document.body.contains(this.prop.container)||this.toContainer()}]).then(o).then(function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},r.prototype.toContext2d=function(){return this.thenList([function(){return document.body.contains(this.prop.container)||this.toContainer()}]).then(o).then(function(l){var c=this.opt.jsPDF,u=this.opt.fontFaces,m="number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,p=Object.assign({async:!0,allowTaint:!0,scale:m,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete p.onrendered,c.context2d.autoPaging=void 0===this.opt.autoPaging||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=u,u)for(var f=0;f<u.length;++f){var b=u[f],L=b.src.find(function(N){return"truetype"===N.format});L&&c.addFont(L.url,b.ref.name,b.ref.style)}return p.windowHeight=p.windowHeight||0,p.windowHeight=0==p.windowHeight?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):p.windowHeight,c.context2d.save(!0),l(this.prop.container,p)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},r.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var s=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=s})},r.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},r.prototype.output=function(s,l,c){return"img"===(c=c||"pdf").toLowerCase()||"image"===c.toLowerCase()?this.outputImg(s,l):this.outputPdf(s,l)},r.prototype.outputPdf=function(s,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(s,l)})},r.prototype.outputImg=function(s){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(s){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+s+'" is not supported.'}})},r.prototype.save=function(s){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(s?{filename:s}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},r.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},r.prototype.set=function(s){if("object"!==i(s))return this;var l=Object.keys(s||{}).map(function(c){if(c in r.template.prop)return function(){this.prop[c]=s[c]};switch(c){case"margin":return this.setMargin.bind(this,s.margin);case"jsPDF":return function(){return this.opt.jsPDF=s.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,s.pageSize);default:return function(){this.opt[c]=s[c]}}},this);return this.then(function(){return this.thenList(l)})},r.prototype.get=function(s,l){return this.then(function(){var c=s in r.template.prop?this.prop[s]:this.opt[s];return l?l(c):c})},r.prototype.setMargin=function(s){return this.then(function(){switch(i(s)){case"number":s=[s,s,s,s];case"array":if(2===s.length&&(s=[s[0],s[1],s[0],s[1]]),4===s.length)break;default:return this.error("Invalid margin array.")}this.opt.margin=s}).then(this.setPageSize)},r.prototype.setPageSize=function(s){function l(c,u){return Math.floor(c*u/72*96)}return this.then(function(){(s=s||In.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(s.inner={width:s.width-this.opt.margin[1]-this.opt.margin[3],height:s.height-this.opt.margin[0]-this.opt.margin[2]},s.inner.px={width:l(s.inner.width,s.k),height:l(s.inner.height,s.k)},s.inner.ratio=s.inner.height/s.inner.width),this.prop.pageSize=s})},r.prototype.setProgress=function(s,l,c,u){return null!=s&&(this.progress.val=s),null!=l&&(this.progress.state=l),null!=c&&(this.progress.n=c),null!=u&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},r.prototype.updateProgress=function(s,l,c,u){return this.setProgress(s?this.progress.val+s:null,l||null,c?this.progress.n+c:null,u?this.progress.stack.concat(u):null)},r.prototype.then=function(s,l){var c=this;return this.thenCore(s,l,function(u,m){return c.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(p){return c.updateProgress(null,u),p}).then(u,m).then(function(p){return c.updateProgress(1),p})})},r.prototype.thenCore=function(s,l,c){c=c||Promise.prototype.then,s&&(s=s.bind(this)),l&&(l=l.bind(this));var u=-1!==Promise.toString().indexOf("[native code]")&&"Promise"===Promise.name?this:r.convert(Object.assign({},this),Promise.prototype),m=c.call(u,s,l);return r.convert(m,this.__proto__)},r.prototype.thenExternal=function(s,l){return Promise.prototype.then.call(this,s,l)},r.prototype.thenList=function(s){var l=this;return s.forEach(function(c){l=l.thenCore(c)}),l},r.prototype.catch=function(s){s&&(s=s.bind(this));var l=Promise.prototype.catch.call(this,s);return r.convert(l,this)},r.prototype.catchExternal=function(s){return Promise.prototype.catch.call(this,s)},r.prototype.error=function(s){return this.then(function(){throw new Error(s)})},r.prototype.using=r.prototype.set,r.prototype.saveAs=r.prototype.save,r.prototype.export=r.prototype.output,r.prototype.run=r.prototype.then,In.getPageSize=function(s,l,c){if("object"===(0,yi.Z)(s)){var u=s;s=u.orientation,l=u.unit||l,c=u.format||c}l=l||"mm",c=c||"a4",s=(""+(s||"P")).toLowerCase();var m,p=(""+c).toLowerCase(),f={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":m=1;break;case"mm":m=72/25.4;break;case"cm":m=72/2.54;break;case"in":m=72;break;case"px":m=.75;break;case"pc":case"em":m=12;break;case"ex":m=6;break;default:throw"Invalid unit: "+l}var b,L=0,N=0;if(f.hasOwnProperty(p))L=f[p][1]/m,N=f[p][0]/m;else try{L=c[1],N=c[0]}catch{throw new Error("Invalid format: "+c)}if("p"===s||"portrait"===s)s="p",N>L&&(b=N,N=L,L=b);else{if("l"!==s&&"landscape"!==s)throw"Invalid orientation: "+s;s="l",L>N&&(b=N,N=L,L=b)}return{width:N,height:L,unit:l,k:m,orientation:s}},n.html=function(s,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(mn):null;var c=new r(l);return l.worker?c:c.from(s).doCallback()}}(In.API),In.API.addJS=function(n){return Qf=n,this.internal.events.subscribe("postPutResources",function(){Ep=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Ep+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Pf=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Qf+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){void 0!==Ep&&void 0!==Pf&&this.internal.out("/Names <</JavaScript "+Ep+" 0 R>>")}),this},
/**
       * @license
       * Copyright (c) 2014 Steven Spungin (TwelveTone LLC)  steven@twelvetone.tv
       *
       * Licensed under the MIT License.
       * http://opensource.org/licenses/mit-license
       */
function(n){var o;n.events.push(["postPutResources",function(){var t=this,i=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=t.outline.render().split(/\r\n/),r=0;r<a.length;r++){var s=a[r],l=i.exec(s);null!=l&&t.internal.newObjectDeferredBegin(l[1],!1),t.internal.write(s)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,m=[];for(r=0;r<u;r++){var p=t.internal.newObject();m.push(p);var f=t.internal.getPageInfo(r+1);t.internal.write("<< /D["+f.objId+" 0 R /XYZ null null null]>> endobj")}var b=t.internal.newObject();for(t.internal.write("<< /Names [ "),r=0;r<m.length;r++)t.internal.write("(page_"+(r+1)+")"+m[r]+" 0 R");t.internal.write(" ] >>","endobj"),o=t.internal.newObject(),t.internal.write("<< /Dests "+b+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+o+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(i,a,r){var s={title:a,options:r,children:[]};return null==i&&(i=this.root),i.children.push(s),s},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(i){i.id=t.internal.newObjectDeferred();for(var a=0;a<i.children.length;a++)this.genIds_r(i.children[a])},t.outline.renderRoot=function(i){this.objStart(i),this.line("/Type /Outlines"),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1]))),this.line("/Count "+this.count_r({count:0},i)),this.objEnd()},t.outline.renderItems=function(i){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,r=0;r<i.children.length;r++){var s=i.children[r];this.objStart(s),this.line("/Title "+this.makeString(s.title)),this.line("/Parent "+this.makeRef(i)),r>0&&this.line("/Prev "+this.makeRef(i.children[r-1])),r<i.children.length-1&&this.line("/Next "+this.makeRef(i.children[r+1])),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1])));var l=this.count=this.count_r({count:0},s);if(l>0&&this.line("/Count "+l),s.options&&s.options.pageNumber){var c=t.internal.getPageInfo(s.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var u=0;u<i.children.length;u++)this.renderItems(i.children[u])},t.outline.line=function(i){this.ctx.val+=i+"\r\n"},t.outline.makeRef=function(i){return i.id+" 0 R"},t.outline.makeString=function(i){return"("+t.internal.pdfEscape(i)+")"},t.outline.objStart=function(i){this.ctx.val+="\r\n"+i.id+" 0 obj\r\n<<\r\n"},t.outline.objEnd=function(){this.ctx.val+=">> \r\nendobj\r\n"},t.outline.count_r=function(i,a){for(var r=0;r<a.children.length;r++)i.count++,this.count_r(i,a.children[r]);return i.count}}])}(In.API),
/**
       * @license
       *
       * Licensed under the MIT License.
       * http://opensource.org/licenses/mit-license
       */
function(n){var o=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,i,a,r,s,l){var c,u=this.decode.DCT_DECODE,m=null;if("string"==typeof t||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=this.__addimage__.isArrayBuffer(t=s||t)?new Uint8Array(t):t,(c=function(p){for(var f,b=256*p.charCodeAt(4)+p.charCodeAt(5),L=p.length,N={width:0,height:0,numcomponents:1},R=4;R<L;R+=2){if(-1!==o.indexOf(p.charCodeAt((R+=b)+1))){f=256*p.charCodeAt(R+5)+p.charCodeAt(R+6),N={width:256*p.charCodeAt(R+7)+p.charCodeAt(R+8),height:f,numcomponents:p.charCodeAt(R+9)};break}b=256*p.charCodeAt(R+2)+p.charCodeAt(R+3)}return N}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}m={data:t,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:u,index:i,alias:a}}return m}}(In.API);var ac,nd,Ff,yA,Nf,CA=function(){var n,o,t;function i(r){var s,c,u,m,p,f,b,L,N,R,j,G,ae;for(this.data=r,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},p=null;;){switch(s=this.readUInt32(),L=function(){var W,le;for(le=[],W=0;W<4;++W)le.push(String.fromCharCode(this.data[this.pos++]));return le}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(s);break;case"fcTL":p&&this.animation.frames.push(p),this.pos+=4,p={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},m=this.readUInt16(),u=this.readUInt16()||100,p.delay=1e3*m/u,p.disposeOp=this.data[this.pos++],p.blendOp=this.data[this.pos++],p.data=[];break;case"IDAT":case"fdAT":for("fdAT"===L&&(this.pos+=4,s-=4),r=p?.data||this.imgData,j=0;0<=s?j<s:j>s;0<=s?++j:--j)r.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(s),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((N=c-this.transparency.indexed.length)>0)for(G=0;0<=N?G<N:G>N;0<=N?++G:--G)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(s)[0];break;case 2:this.transparency.rgb=this.read(s)}break;case"tEXt":f=(R=this.read(s)).indexOf(0),b=String.fromCharCode.apply(String,R.slice(0,f)),this.text[b]=String.fromCharCode.apply(String,R.slice(f+1));break;case"IEND":return p&&this.animation.frames.push(p),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=4===(ae=this.colorType)||6===ae,this.pixelBitlength=this.bits*(this.colors+(this.hasAlphaChannel?1:0)),this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=s}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}i.prototype.read=function(r){var s,l;for(l=[],s=0;0<=r?s<r:s>r;0<=r?++s:--s)l.push(this.data[this.pos++]);return l},i.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.decodePixels=function(r){var s=this.pixelBitlength/8,l=new Uint8Array(this.width*this.height*s),c=0,u=this;if(null==r&&(r=this.imgData),0===r.length)return new Uint8Array(0);function m(p,f,b,L){var N,R,j,G,ae,W,le,ve,te,Se,Ze,se,pe,Be,Pe,Oe,Fe,Re,Je,Ke,et=Math.ceil((u.width-p)/b),gt=Math.ceil((u.height-f)/L),ue=u.width==et&&u.height==gt;for(pe=s*et,Ze=ue?l:new Uint8Array(pe*gt),W=r.length,se=0,R=0;se<gt&&c<W;){switch(r[c++]){case 0:for(G=Oe=0;Oe<pe;G=Oe+=1)Ze[R++]=r[c++];break;case 1:for(G=Fe=0;Fe<pe;G=Fe+=1)N=r[c++],ae=G<s?0:Ze[R-s],Ze[R++]=(N+ae)%256;break;case 2:for(G=Re=0;Re<pe;G=Re+=1)N=r[c++],j=(G-G%s)/s,Ze[R++]=((Be=se&&Ze[(se-1)*pe+j*s+G%s])+N)%256;break;case 3:for(G=Je=0;Je<pe;G=Je+=1)N=r[c++],j=(G-G%s)/s,ae=G<s?0:Ze[R-s],Be=se&&Ze[(se-1)*pe+j*s+G%s],Ze[R++]=(N+Math.floor((ae+Be)/2))%256;break;case 4:for(G=Ke=0;Ke<pe;G=Ke+=1)N=r[c++],j=(G-G%s)/s,0===se?Be=Pe=0:(Be=Ze[(se-1)*pe+j*s+G%s],Pe=j&&Ze[(se-1)*pe+(j-1)*s+G%s]),le=(ae=G<s?0:Ze[R-s])+Be-Pe,ve=Math.abs(le-ae),te=Math.abs(le-Be),Se=Math.abs(le-Pe),Ze[R++]=(N+(ve<=te&&ve<=Se?ae:te<=Se?Be:Pe))%256;break;default:throw new Error("Invalid filter algorithm: "+r[c-1])}if(!ue){var Te=((f+se*L)*u.width+p)*s,Ee=se*pe;for(G=0;G<et;G+=1){for(var Ue=0;Ue<s;Ue+=1)l[Te++]=Ze[Ee++];Te+=(b-1)*s}}se++}}return r=Xd(r),1==u.interlaceMethod?(m(0,0,8,8),m(4,0,8,8),m(0,4,4,8),m(2,0,4,4),m(0,2,2,4),m(1,0,2,2),m(0,1,1,2)):m(0,0,1,1),l},i.prototype.decodePalette=function(){var r,s,l,c,u,m,p,f,b;for(l=this.palette,m=this.transparency.indexed||[],u=new Uint8Array((m.length||0)+l.length),c=0,r=0,s=p=0,f=l.length;p<f;s=p+=3)u[c++]=l[s],u[c++]=l[s+1],u[c++]=l[s+2],u[c++]=null!=(b=m[r++])?b:255;return u},i.prototype.copyToImageData=function(r,s){var l,c,u,m,p,f,b,L,N,R,j;if(c=this.colors,N=null,l=this.hasAlphaChannel,this.palette.length&&(N=null!=(j=this._decodedPalette)?j:this._decodedPalette=this.decodePalette(),c=4,l=!0),L=(u=r.data||r).length,p=N||s,m=f=0,1===c)for(;m<L;)b=N?4*s[m/4]:f,R=p[b++],u[m++]=R,u[m++]=R,u[m++]=R,u[m++]=l?p[b++]:255,f=b;else for(;m<L;)b=N?4*s[m/4]:f,u[m++]=p[b++],u[m++]=p[b++],u[m++]=p[b++],u[m++]=l?p[b++]:255,f=b},i.prototype.decode=function(){var r;return r=new Uint8Array(this.width*this.height*4),this.copyToImageData(r,this.decodePixels()),r};var a=function(){if("[object Window]"===Object.prototype.toString.call(Qn)){try{o=Qn.document.createElement("canvas"),t=o.getContext("2d")}catch{return!1}return!0}return!1};return a(),n=function(r){var s;if(!0===a())return t.width=r.width,t.height=r.height,t.clearRect(0,0,r.width,r.height),t.putImageData(r,0,0),(s=new Image).src=o.toDataURL(),s;throw new Error("This method requires a Browser with Canvas-capability.")},i.prototype.decodeFrames=function(r){var s,l,c,u,m,p,f,b;if(this.animation){for(b=[],l=m=0,p=(f=this.animation.frames).length;m<p;l=++m)c=r.createImageData((s=f[l]).width,s.height),u=this.decodePixels(new Uint8Array(s.data)),this.copyToImageData(c,u),s.imageData=c,b.push(s.image=n(c));return b}},i.prototype.renderFrame=function(r,s){var l,c,u;return l=(c=this.animation.frames)[s],u=c[s-1],0===s&&r.clearRect(0,0,this.width,this.height),1===u?.disposeOp?r.clearRect(u.xOffset,u.yOffset,u.width,u.height):2===u?.disposeOp&&r.putImageData(u.imageData,u.xOffset,u.yOffset),0===l.blendOp&&r.clearRect(l.xOffset,l.yOffset,l.width,l.height),r.drawImage(l.image,l.xOffset,l.yOffset)},i.prototype.animate=function(r){var s,l,c,u,m,p,f=this;return l=0,u=(p=this.animation).numFrames,c=p.frames,m=p.numPlays,(s=function(){var b,L;if(b=l++%u,L=c[b],f.renderFrame(r,b),u>1&&l/u<m)return f.animation._timeout=setTimeout(s,L.delay)})()},i.prototype.stopAnimation=function(){var r;return clearTimeout(null!=(r=this.animation)?r._timeout:void 0)},i.prototype.render=function(r){var s,l;return r._png&&r._png.stopAnimation(),r._png=this,r.width=this.width,r.height=this.height,s=r.getContext("2d"),this.animation?(this.decodeFrames(s),this.animate(s)):(l=s.createImageData(this.width,this.height),this.copyToImageData(l,this.decodePixels()),s.putImageData(l,0,0))},i}();function W0(n){var o=0;if(71!==n[o++]||73!==n[o++]||70!==n[o++]||56!==n[o++]||56!=(n[o++]+1&253)||97!==n[o++])throw new Error("Invalid GIF 87a/89a header.");var t=n[o++]|n[o++]<<8,i=n[o++]|n[o++]<<8,a=n[o++],s=1<<1+(7&a);o++,o++;var l=null,c=null;a>>7&&(l=o,c=s,o+=3*s);var u=!0,m=[],p=0,f=null,b=0,L=null;for(this.width=t,this.height=i;u&&o<n.length;)switch(n[o++]){case 33:switch(n[o++]){case 255:if(11!==n[o]||78==n[o+1]&&69==n[o+2]&&84==n[o+3]&&83==n[o+4]&&67==n[o+5]&&65==n[o+6]&&80==n[o+7]&&69==n[o+8]&&50==n[o+9]&&46==n[o+10]&&48==n[o+11]&&3==n[o+12]&&1==n[o+13]&&0==n[o+16])o+=14,L=n[o++]|n[o++]<<8,o++;else for(o+=12;;){if(!((se=n[o++])>=0))throw Error("Invalid block size");if(0===se)break;o+=se}break;case 249:if(4!==n[o++]||0!==n[o+4])throw new Error("Invalid graphics extension block.");var N=n[o++];p=n[o++]|n[o++]<<8,f=n[o++],!(1&N)&&(f=null),b=N>>2&7,o++;break;case 254:for(;;){if(!((se=n[o++])>=0))throw Error("Invalid block size");if(0===se)break;o+=se}break;default:throw new Error("Unknown graphic control label: 0x"+n[o-1].toString(16))}break;case 44:var R=n[o++]|n[o++]<<8,j=n[o++]|n[o++]<<8,G=n[o++]|n[o++]<<8,ae=n[o++]|n[o++]<<8,W=n[o++],le=W>>6&1,ve=1<<1+(7&W),ce=l,te=c,Se=!1;W>>7&&(Se=!0,ce=o,te=ve,o+=3*ve);var Ze=o;for(o++;;){var se;if(!((se=n[o++])>=0))throw Error("Invalid block size");if(0===se)break;o+=se}m.push({x:R,y:j,width:G,height:ae,has_local_palette:Se,palette_offset:ce,palette_size:te,data_offset:Ze,data_length:o-Ze,transparent_index:f,interlaced:!!le,delay:p,disposal:b});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+n[o-1].toString(16))}this.numFrames=function(){return m.length},this.loopCount=function(){return L},this.frameInfo=function(pe){if(pe<0||pe>=m.length)throw new Error("Frame index out of range.");return m[pe]},this.decodeAndBlitFrameBGRA=function(pe,Be){var Pe=this.frameInfo(pe),Oe=Pe.width*Pe.height,Fe=new Uint8Array(Oe);Zf(n,Pe.data_offset,Fe,Oe);var Re=Pe.palette_offset,Je=Pe.transparent_index;null===Je&&(Je=256);var Ke=Pe.width,et=t-Ke,gt=Ke,ue=4*(Pe.y*t+Pe.x),Te=4*((Pe.y+Pe.height)*t+Pe.x),Ee=ue,Ue=4*et;!0===Pe.interlaced&&(Ue+=4*t*7);for(var $e=8,ut=0,st=Fe.length;ut<st;++ut){var dt=Fe[ut];if(0===gt&&(gt=Ke,(Ee+=Ue)>=Te&&(Ue=4*et+4*t*($e-1),Ee=ue+(Ke+et)*($e<<1),$e>>=1)),dt===Je)Ee+=4;else{var Rt=n[Re+3*dt],Qt=n[Re+3*dt+1];Be[Ee++]=n[Re+3*dt+2],Be[Ee++]=Qt,Be[Ee++]=Rt,Be[Ee++]=255}--gt}},this.decodeAndBlitFrameRGBA=function(pe,Be){var Pe=this.frameInfo(pe),Oe=Pe.width*Pe.height,Fe=new Uint8Array(Oe);Zf(n,Pe.data_offset,Fe,Oe);var Re=Pe.palette_offset,Je=Pe.transparent_index;null===Je&&(Je=256);var Ke=Pe.width,et=t-Ke,gt=Ke,ue=4*(Pe.y*t+Pe.x),Te=4*((Pe.y+Pe.height)*t+Pe.x),Ee=ue,Ue=4*et;!0===Pe.interlaced&&(Ue+=4*t*7);for(var $e=8,ut=0,st=Fe.length;ut<st;++ut){var dt=Fe[ut];if(0===gt&&(gt=Ke,(Ee+=Ue)>=Te&&(Ue=4*et+4*t*($e-1),Ee=ue+(Ke+et)*($e<<1),$e>>=1)),dt===Je)Ee+=4;else{var Qt=n[Re+3*dt+1],nn=n[Re+3*dt+2];Be[Ee++]=n[Re+3*dt],Be[Ee++]=Qt,Be[Ee++]=nn,Be[Ee++]=255}--gt}}}function Zf(n,o,t,i){for(var a=n[o++],r=1<<a,s=r+1,l=s+1,c=a+1,u=(1<<c)-1,m=0,p=0,f=0,b=n[o++],L=new Int32Array(4096),N=null;;){for(;m<16&&0!==b;)p|=n[o++]<<m,m+=8,1===b?b=n[o++]:--b;if(m<c)break;var R=p&u;if(p>>=c,m-=c,R!==r){if(R===s)break;for(var j=R<l?R:N,G=0,ae=j;ae>r;)ae=L[ae]>>8,++G;var W=ae;if(f+G+(j!==R?1:0)>i)return void io.log("Warning, gif stream longer than expected.");t[f++]=W;var le=f+=G;for(j!==R&&(t[f++]=W),ae=j;G--;)t[--le]=255&(ae=L[ae]),ae>>=8;null!==N&&l<4096&&(L[l++]=N<<8|W,l>=u+1&&c<12&&(++c,u=u<<1|1)),N=R}else l=s+1,u=(1<<(c=a+1))-1,N=null}return f!==i&&io.log("Warning, gif stream shorter than expected."),t}function TA(n){var o,t,i,a,r,s=Math.floor,l=new Array(64),c=new Array(64),u=new Array(64),m=new Array(64),p=new Array(65535),f=new Array(65535),b=new Array(64),L=new Array(64),N=[],R=0,j=7,G=new Array(64),ae=new Array(64),W=new Array(64),le=new Array(256),ve=new Array(2048),ce=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],te=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],Se=[0,1,2,3,4,5,6,7,8,9,10,11],Ze=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],se=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],pe=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Be=[0,1,2,3,4,5,6,7,8,9,10,11],Pe=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Oe=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Fe(ue,Te){for(var Ee=0,Ue=0,$e=new Array,ut=1;ut<=16;ut++){for(var st=1;st<=ue[ut];st++)$e[Te[Ue]]=[],$e[Te[Ue]][0]=Ee,$e[Te[Ue]][1]=ut,Ue++,Ee++;Ee*=2}return $e}function Re(ue){for(var Te=ue[0],Ee=ue[1]-1;Ee>=0;)Te&1<<Ee&&(R|=1<<j),Ee--,--j<0&&(255==R?(Je(255),Je(0)):Je(R),j=7,R=0)}function Je(ue){N.push(ue)}function Ke(ue){Je(ue>>8&255),Je(255&ue)}function et(ue,Te,Ee,Ue,$e){for(var ut,st=$e[0],dt=$e[240],Rt=function(Zt,Vt){var an,Wt,On,Gn,ei,gi,Mi,po,Vn,Si,An=0;for(Vn=0;Vn<8;++Vn){var mr=(an=Zt[An])+(po=Zt[An+7]),Ji=an-po,Tl=(Wt=Zt[An+1])+(Mi=Zt[An+6]),fo=Wt-Mi,Qo=(On=Zt[An+2])+(gi=Zt[An+5]),Oc=On-gi,to=(Gn=Zt[An+3])+(ei=Zt[An+4]),Um=Gn-ei,Xo=mr+to,kl=mr-to,wu=Tl+Qo,ea=Tl-Qo;Zt[An]=Xo+wu,Zt[An+4]=Xo-wu;var ri=.707106781*(ea+kl);Zt[An+2]=kl+ri,Zt[An+6]=kl-ri;var no=.382683433*((Xo=Um+Oc)-(ea=fo+Ji)),jm=.5411961*Xo+no,Xa=1.306562965*ea+no,Ic=.707106781*(wu=Oc+fo),Mc=Ji+Ic,zn=Ji-Ic;Zt[An+5]=zn+jm,Zt[An+3]=zn-jm,Zt[An+1]=Mc+Xa,Zt[An+7]=Mc-Xa,An+=8}for(An=0,Vn=0;Vn<8;++Vn){var Sl=(an=Zt[An])+(po=Zt[An+56]),Lc=an-po,Hr=(Wt=Zt[An+8])+(Mi=Zt[An+48]),Ia=Wt-Mi,ga=(On=Zt[An+16])+(gi=Zt[An+40]),bs=On-gi,yh=(Gn=Zt[An+24])+(ei=Zt[An+32]),yu=Gn-ei,El=Sl+yh,Ol=Sl-yh,Il=Hr+ga,Bc=Hr-ga;Zt[An]=El+Il,Zt[An+32]=El-Il;var Ws=.707106781*(Bc+Ol);Zt[An+16]=Ol+Ws,Zt[An+48]=Ol-Ws;var Pc=.382683433*((El=yu+bs)-(Bc=Ia+Lc)),qm=.5411961*El+Pc,Ch=1.306562965*Bc+Pc,Th=.707106781*(Il=bs+Ia),kh=Lc+Th,Sh=Lc-Th;Zt[An+40]=Sh+qm,Zt[An+24]=Sh-qm,Zt[An+8]=kh+Ch,Zt[An+56]=kh-Ch,An++}for(Vn=0;Vn<64;++Vn)b[Vn]=(Si=Zt[Vn]*Vt[Vn])>0?Si+.5|0:Si-.5|0;return b}(ue,Te),Qt=0;Qt<64;++Qt)L[ce[Qt]]=Rt[Qt];var nn=L[0]-Ee;Ee=L[0],0==nn?Re(Ue[0]):(Re(Ue[f[ut=32767+nn]]),Re(p[ut]));for(var tn=63;tn>0&&0==L[tn];)tn--;if(0==tn)return Re(st),Ee;for(var dn,ft=1;ft<=tn;){for(var je=ft;0==L[ft]&&ft<=tn;)++ft;var En=ft-je;if(En>=16){dn=En>>4;for(var wn=1;wn<=dn;++wn)Re(dt);En&=15}Re($e[(En<<4)+f[ut=32767+L[ft]]]),Re(p[ut]),ft++}return 63!=tn&&Re(st),Ee}function gt(ue){ue=Math.min(Math.max(ue,1),100),r!=ue&&(function(Te){for(var Ee=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Ue=0;Ue<64;Ue++){var $e=s((Ee[Ue]*Te+50)/100);$e=Math.min(Math.max($e,1),255),l[ce[Ue]]=$e}for(var ut=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],st=0;st<64;st++){var dt=s((ut[st]*Te+50)/100);dt=Math.min(Math.max(dt,1),255),c[ce[st]]=dt}for(var Rt=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Qt=0,nn=0;nn<8;nn++)for(var tn=0;tn<8;tn++)u[Qt]=1/(l[ce[Qt]]*Rt[nn]*Rt[tn]*8),m[Qt]=1/(c[ce[Qt]]*Rt[nn]*Rt[tn]*8),Qt++}(ue<50?Math.floor(5e3/ue):Math.floor(200-2*ue)),r=ue)}this.encode=function(ue,Te){var Wt,On;Te&&gt(Te),N=new Array,R=0,j=7,Ke(65496),Ke(65504),Ke(16),Je(74),Je(70),Je(73),Je(70),Je(0),Je(1),Je(1),Je(0),Ke(1),Ke(1),Je(0),Je(0),function(){Ke(65499),Ke(132),Je(0);for(var Wt=0;Wt<64;Wt++)Je(l[Wt]);Je(1);for(var On=0;On<64;On++)Je(c[On])}(),Wt=ue.width,On=ue.height,Ke(65472),Ke(17),Je(8),Ke(On),Ke(Wt),Je(3),Je(1),Je(17),Je(0),Je(2),Je(17),Je(1),Je(3),Je(17),Je(1),function(){Ke(65476),Ke(418),Je(0);for(var Wt=0;Wt<16;Wt++)Je(te[Wt+1]);for(var On=0;On<=11;On++)Je(Se[On]);Je(16);for(var Gn=0;Gn<16;Gn++)Je(Ze[Gn+1]);for(var ei=0;ei<=161;ei++)Je(se[ei]);Je(1);for(var gi=0;gi<16;gi++)Je(pe[gi+1]);for(var Mi=0;Mi<=11;Mi++)Je(Be[Mi]);Je(17);for(var po=0;po<16;po++)Je(Pe[po+1]);for(var Vn=0;Vn<=161;Vn++)Je(Oe[Vn])}(),Ke(65498),Ke(12),Je(3),Je(1),Je(0),Je(2),Je(17),Je(3),Je(17),Je(0),Je(63),Je(0);var Ee=0,Ue=0,$e=0;R=0,j=7,this.encode.displayName="_encode_";for(var ut,st,dt,Rt,Qt,nn,tn,dn,ft,je=ue.data,wn=ue.height,Zt=4*ue.width,Vt=0;Vt<wn;){for(ut=0;ut<Zt;){for(Qt=Zt*Vt+ut,tn=-1,dn=0,ft=0;ft<64;ft++)nn=Qt+(dn=ft>>3)*Zt+(tn=4*(7&ft)),Vt+dn>=wn&&(nn-=Zt*(Vt+1+dn-wn)),ut+tn>=Zt&&(nn-=ut+tn-Zt+4),st=je[nn++],dt=je[nn++],Rt=je[nn++],G[ft]=(ve[st]+ve[dt+256>>0]+ve[Rt+512>>0]>>16)-128,ae[ft]=(ve[st+768>>0]+ve[dt+1024>>0]+ve[Rt+1280>>0]>>16)-128,W[ft]=(ve[st+1280>>0]+ve[dt+1536>>0]+ve[Rt+1792>>0]>>16)-128;Ee=et(G,u,Ee,o,i),Ue=et(ae,m,Ue,t,a),$e=et(W,m,$e,t,a),ut+=32}Vt+=8}if(j>=0){var an=[];an[1]=j+1,an[0]=(1<<j+1)-1,Re(an)}return Ke(65497),new Uint8Array(N)},n=n||50,function(){for(var ue=String.fromCharCode,Te=0;Te<256;Te++)le[Te]=ue(Te)}(),o=Fe(te,Se),t=Fe(pe,Be),i=Fe(Ze,se),a=Fe(Pe,Oe),function(){for(var ue=1,Te=2,Ee=1;Ee<=15;Ee++){for(var Ue=ue;Ue<Te;Ue++)f[32767+Ue]=Ee,p[32767+Ue]=[],p[32767+Ue][1]=Ee,p[32767+Ue][0]=Ue;for(var $e=-(Te-1);$e<=-ue;$e++)f[32767+$e]=Ee,p[32767+$e]=[],p[32767+$e][1]=Ee,p[32767+$e][0]=Te-1+$e;ue<<=1,Te<<=1}}(),function(){for(var ue=0;ue<256;ue++)ve[ue]=19595*ue,ve[ue+256>>0]=38470*ue,ve[ue+512>>0]=7471*ue+32768,ve[ue+768>>0]=-11059*ue,ve[ue+1024>>0]=-21709*ue,ve[ue+1280>>0]=32768*ue+8421375,ve[ue+1536>>0]=-27439*ue,ve[ue+1792>>0]=-5329*ue}(),gt(n)}function ls(n,o){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!o,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,-1===["BM","BA","CI","CP","IC","PT"].indexOf(this.flag))throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Df(n){function o(te){if(!te)throw Error("assert :P")}function t(te,Se,Ze){for(var se=0;4>se;se++)if(te[Se+se]!=Ze.charCodeAt(se))return!0;return!1}function i(te,Se,Ze,se,pe){for(var Be=0;Be<pe;Be++)te[Se+Be]=Ze[se+Be]}function a(te,Se,Ze,se){for(var pe=0;pe<se;pe++)te[Se+pe]=Ze}function r(te){return new Int32Array(te)}function s(te,Se){for(var Ze=[],se=0;se<te;se++)Ze.push(new Se);return Ze}function l(te,Se){var Ze=[];return function se(pe,Be,Pe){for(var Oe=Pe[Be],Fe=0;Fe<Oe&&(pe.push(Pe.length>Be+1?[]:new Se),!(Pe.length<Be+1));Fe++)se(pe[Fe],Be+1,Pe)}(Ze,0,te),Ze}var c=function(){var te=this;function Se(A,P){for(var z=1<<P-1>>>0;A&z;)z>>>=1;return z?(A&z-1)+z:A}function Ze(A,P,z,X,me){o(!(X%z));do{A[P+(X-=z)]=me}while(0<X)}function se(A,P,z,X,me){if(o(2328>=me),512>=me)var ge=r(512);else if(null==(ge=r(me)))return 0;return function(be,Ce,ke,Qe,We,At){var _t,rt,It=Ce,bt=1<<ke,Xe=r(16),it=r(16);for(o(0!=We),o(null!=Qe),o(null!=be),o(0<ke),rt=0;rt<We;++rt){if(15<Qe[rt])return 0;++Xe[Qe[rt]]}if(Xe[0]==We)return 0;for(it[1]=0,_t=1;15>_t;++_t){if(Xe[_t]>1<<_t)return 0;it[_t+1]=it[_t]+Xe[_t]}for(rt=0;rt<We;++rt)_t=Qe[rt],0<Qe[rt]&&(At[it[_t]++]=rt);if(1==it[15])return(Qe=new pe).g=0,Qe.value=At[0],Ze(be,It,1,bt,Qe),bt;var St,Ft=-1,Ot=bt-1,fn=0,Xt=1,jn=1,rn=1<<ke;for(rt=0,_t=1,We=2;_t<=ke;++_t,We<<=1){if(Xt+=jn<<=1,0>(jn-=Xe[_t]))return 0;for(;0<Xe[_t];--Xe[_t])(Qe=new pe).g=_t,Qe.value=At[rt++],Ze(be,It+fn,We,rn,Qe),fn=Se(fn,_t)}for(_t=ke+1,We=2;15>=_t;++_t,We<<=1){if(Xt+=jn<<=1,0>(jn-=Xe[_t]))return 0;for(;0<Xe[_t];--Xe[_t]){if(Qe=new pe,(fn&Ot)!=Ft){for(It+=rn,St=1<<(Ft=_t)-ke;15>Ft&&!(0>=(St-=Xe[Ft]));)++Ft,St<<=1;bt+=rn=1<<(St=Ft-ke),be[Ce+(Ft=fn&Ot)].g=St+ke,be[Ce+Ft].value=It-Ce-Ft}Qe.g=_t-ke,Qe.value=At[rt++],Ze(be,It+(fn>>ke),We,rn,Qe),fn=Se(fn,_t)}}return Xt!=2*it[15]-1?0:bt}(A,P,z,X,me,ge)}function pe(){this.value=this.g=0}function Be(){this.value=this.g=0}function Pe(){this.G=s(5,pe),this.H=r(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=s(Kr,Be)}function Oe(A,P,z,X){o(null!=A),o(null!=P),o(2147483648>X),A.Ca=254,A.I=0,A.b=-8,A.Ka=0,A.oa=P,A.pa=z,A.Jd=P,A.Yc=z+X,A.Zc=4<=X?z+X-4+1:z,ut(A)}function Fe(A,P){for(var z=0;0<P--;)z|=dt(A,128)<<P;return z}function Re(A,P){var z=Fe(A,P);return st(A)?-z:z}function Je(A,P,z,X){var me,ge=0;for(o(null!=A),o(null!=P),o(4294967288>X),A.Sb=X,A.Ra=0,A.u=0,A.h=0,4<X&&(X=4),me=0;me<X;++me)ge+=P[z+me]<<8*me;A.Ra=ge,A.bb=X,A.oa=P,A.pa=z}function Ke(A){for(;8<=A.u&&A.bb<A.Sb;)A.Ra>>>=8,A.Ra+=A.oa[A.pa+A.bb]<<qh-8>>>0,++A.bb,A.u-=8;Ee(A)&&(A.h=1,A.u=0)}function et(A,P){if(o(0<=P),!A.h&&P<=jh){var z=Te(A)&Uh[P];return A.u+=P,Ke(A),z}return A.h=1,A.u=0}function gt(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function ue(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Te(A){return A.Ra>>>(A.u&qh-1)>>>0}function Ee(A){return o(A.bb<=A.Sb),A.h||A.bb==A.Sb&&A.u>qh}function Ue(A,P){A.u=P,A.h=Ee(A)}function $e(A){A.u>=nf&&(o(A.u>=nf),Ke(A))}function ut(A){o(null!=A&&null!=A.oa),A.pa<A.Zc?(A.I=(A.oa[A.pa++]|A.I<<8)>>>0,A.b+=8):(o(null!=A&&null!=A.oa),A.pa<A.Yc?(A.b+=8,A.I=A.oa[A.pa++]|A.I<<8):A.Ka?A.b=0:(A.I<<=8,A.b+=8,A.Ka=1))}function st(A){return Fe(A,1)}function dt(A,P){var z=A.Ca;0>A.b&&ut(A);var X=A.b,me=z*P>>>8,ge=(A.I>>>X>me)+0;for(ge?(z-=me,A.I-=me+1<<X>>>0):z=me+1,X=z,me=0;256<=X;)me+=8,X>>=8;return A.b-=X=7^me+Gr[X],A.Ca=(z<<X)-1,ge}function Rt(A,P,z){A[P+0]=z>>24&255,A[P+1]=z>>16&255,A[P+2]=z>>8&255,A[P+3]=z>>0&255}function Qt(A,P){return A[P+0]<<0|A[P+1]<<8}function nn(A,P){return Qt(A,P)|A[P+2]<<16}function tn(A,P){return Qt(A,P)|Qt(A,P+2)<<16}function dn(A,P){var z=1<<P;return o(null!=A),o(0<P),A.X=r(z),null==A.X?0:(A.Mb=32-P,A.Xa=P,1)}function ft(A,P){o(null!=A),o(null!=P),o(A.Xa==P.Xa),i(P.X,0,A.X,0,1<<P.Xa)}function je(){this.X=[],this.Xa=this.Mb=0}function En(A,P,z,X){o(null!=z),o(null!=X);var me=z[0],ge=X[0];return 0==me&&(me=(A*ge+P/2)/P),0==ge&&(ge=(P*me+A/2)/A),0>=me||0>=ge?0:(z[0]=me,X[0]=ge,1)}function wn(A,P){return A+(1<<P)-1>>>P}function Zt(A,P){return((4278255360&A)+(4278255360&P)>>>0&4278255360)+((16711935&A)+(16711935&P)>>>0&16711935)>>>0}function Vt(A,P){te[P]=function(z,X,me,ge,be,Ce,ke){var Qe;for(Qe=0;Qe<be;++Qe){var We=te[A](Ce[ke+Qe-1],me,ge+Qe);Ce[ke+Qe]=Zt(z[X+Qe],We)}}}function an(){this.ud=this.hd=this.jd=0}function Wt(A,P){return((4278124286&(A^P))>>>1)+(A&P)>>>0}function On(A){return 0<=A&&256>A?A:0>A?0:255<A?255:void 0}function Gn(A,P){return On(A+(A-P+.5>>1))}function ei(A,P,z){return Math.abs(P-z)-Math.abs(A-z)}function gi(A,P,z,X,me,ge,be){for(X=ge[be-1],z=0;z<me;++z)ge[be+z]=X=Zt(A[P+z],X)}function Mi(A,P,z,X,me){var ge;for(ge=0;ge<z;++ge){var be=A[P+ge],Ce=be>>8&255,ke=16711935&(ke=(ke=16711935&be)+((Ce<<16)+Ce));X[me+ge]=(4278255360&be)+ke>>>0}}function po(A,P){P.jd=A>>0&255,P.hd=A>>8&255,P.ud=A>>16&255}function Vn(A,P,z,X,me,ge){var be;for(be=0;be<X;++be){var Ce=P[z+be],ke=Ce>>>8,Qe=Ce,We=255&(We=(We=Ce>>>16)+((A.jd<<24>>24)*(ke<<24>>24)>>>5));Qe=255&(Qe=(Qe+=(A.hd<<24>>24)*(ke<<24>>24)>>>5)+((A.ud<<24>>24)*(We<<24>>24)>>>5)),me[ge+be]=(4278255360&Ce)+(We<<16)+Qe}}function Si(A,P,z,X,me){te[P]=function(ge,be,Ce,ke,Qe,We,At,_t,rt){for(ke=At;ke<_t;++ke)for(At=0;At<rt;++At)Qe[We++]=me(Ce[X(ge[be++])])},te[A]=function(ge,be,Ce,ke,Qe,We,At){var _t=8>>ge.b,rt=ge.Ea,It=ge.K[0],bt=ge.w;if(8>_t)for(ge=(1<<ge.b)-1,bt=(1<<_t)-1;be<Ce;++be){var Xe,it=0;for(Xe=0;Xe<rt;++Xe)Xe&ge||(it=X(ke[Qe++])),We[At++]=me(It[it&bt]),it>>=_t}else te["VP8LMapColor"+z](ke,Qe,It,bt,We,At,be,Ce,rt)}}function An(A,P,z,X,me){for(z=P+z;P<z;){var ge=A[P++];X[me++]=ge>>16&255,X[me++]=ge>>8&255,X[me++]=ge>>0&255}}function mr(A,P,z,X,me){for(z=P+z;P<z;){var ge=A[P++];X[me++]=ge>>16&255,X[me++]=ge>>8&255,X[me++]=ge>>0&255,X[me++]=ge>>24&255}}function Ji(A,P,z,X,me){for(z=P+z;P<z;){var ge=(be=A[P++])>>16&240|be>>12&15,be=be>>0&240|be>>28&15;X[me++]=ge,X[me++]=be}}function Tl(A,P,z,X,me){for(z=P+z;P<z;){var ge=(be=A[P++])>>16&248|be>>13&7,be=be>>5&224|be>>3&31;X[me++]=ge,X[me++]=be}}function fo(A,P,z,X,me){for(z=P+z;P<z;){var ge=A[P++];X[me++]=ge>>0&255,X[me++]=ge>>8&255,X[me++]=ge>>16&255}}function Qo(A,P,z,X,me,ge){if(0==ge)for(z=P+z;P<z;)Rt(X,((ge=A[P++])[0]>>24|ge[1]>>8&65280|ge[2]<<8&16711680|ge[3]<<24)>>>0),me+=32;else i(X,me,A,P,z)}function Oc(A,P){te[P][0]=te[A+"0"],te[P][1]=te[A+"1"],te[P][2]=te[A+"2"],te[P][3]=te[A+"3"],te[P][4]=te[A+"4"],te[P][5]=te[A+"5"],te[P][6]=te[A+"6"],te[P][7]=te[A+"7"],te[P][8]=te[A+"8"],te[P][9]=te[A+"9"],te[P][10]=te[A+"10"],te[P][11]=te[A+"11"],te[P][12]=te[A+"12"],te[P][13]=te[A+"13"],te[P][14]=te[A+"0"],te[P][15]=te[A+"0"]}function to(A){return A==iv||A==ov||A==x0||A==av}function Um(){this.eb=[],this.size=this.A=this.fb=0}function Xo(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function kl(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Um,this.f.kb=new Xo,this.sd=null}function wu(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function ea(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ri(A){return alert("todo:WebPSamplerProcessPlane"),A.T}function no(A,P){var z=A.T,X=P.ba.f.RGBA,me=X.eb,ge=X.fb+A.ka*X.A,be=nl[P.ba.S],Ce=A.y,ke=A.O,Qe=A.f,We=A.N,At=A.ea,_t=A.W,rt=P.cc,It=P.dc,bt=P.Mc,Xe=P.Nc,it=A.ka,St=A.ka+A.T,Ft=A.U,Ot=Ft+1>>1;for(0==it?be(Ce,ke,null,null,Qe,We,At,_t,Qe,We,At,_t,me,ge,null,null,Ft):(be(P.ec,P.fc,Ce,ke,rt,It,bt,Xe,Qe,We,At,_t,me,ge-X.A,me,ge,Ft),++z);it+2<St;it+=2)be(Ce,(ke+=2*A.fa)-A.fa,Ce,ke,rt=Qe,It=We,bt=At,Xe=_t,Qe,We+=A.Rc,At,_t+=A.Rc,me,(ge+=2*X.A)-X.A,me,ge,Ft);return ke+=A.fa,A.j+St<A.o?(i(P.ec,P.fc,Ce,ke,Ft),i(P.cc,P.dc,Qe,We,Ot),i(P.Mc,P.Nc,At,_t,Ot),z--):1&St||be(Ce,ke,null,null,Qe,We,At,_t,Qe,We,At,_t,me,ge+X.A,null,null,Ft),z}function jm(A,P,z){var X=A.F,me=[A.J];if(null!=X){var ge=A.U,be=P.ba.S,Ce=be==g0||be==x0;P=P.ba.f.RGBA;var ke=[0],Qe=A.ka;ke[0]=A.T,A.Kb&&(0==Qe?--ke[0]:(--Qe,me[0]-=A.width),A.j+A.ka+A.T==A.o&&(ke[0]=A.o-A.j-Qe));var We=P.eb;A=p0(X,me[0],A.width,ge,ke,We,(Qe=P.fb+Qe*P.A)+(Ce?0:3),P.A),o(z==ke),A&&to(be)&&Ld(We,Qe,Ce,ge,ke,P.A)}return 0}function Xa(A){var P=A.ma,z=P.ba.S,X=11>z,me=z==_0||z==f0||z==g0||z==nv||12==z||to(z);if(P.memory=null,P.Ib=null,P.Jb=null,P.Nd=null,!ef(P.Oa,A,me?11:12))return 0;if(me&&to(z)&&zt(),A.da)alert("todo:use_scaling");else{if(X){if(P.Ib=ri,A.Kb){if(P.memory=r(A.U+2*(z=A.U+1>>1)),null==P.memory)return 0;P.ec=P.memory,P.fc=0,P.cc=P.ec,P.dc=P.fc+A.U,P.Mc=P.cc,P.Nc=P.dc+z,P.Ib=no,zt()}}else alert("todo:EmitYUV");me&&(P.Jb=jm,X&&lt())}if(X&&!g4){for(A=0;256>A;++A)bX[A]=89858*(A-128)+v0>>b0,yX[A]=-22014*(A-128)+v0,wX[A]=-45773*(A-128),vX[A]=113618*(A-128)+v0>>b0;for(A=cf;A<lv;++A)CX[A-cf]=vs(P=76283*(A-16)+v0>>b0,255),TX[A-cf]=vs(P+8>>4,15);g4=1}return 1}function Ic(A){var P=A.ma,z=A.U,X=A.T;return o(!(1&A.ka)),0>=z||0>=X?0:(z=P.Ib(A,P),null!=P.Jb&&P.Jb(A,P,z),P.Dc+=z,1)}function Mc(A){A.ma.memory=null}function zn(A,P,z,X){return 47!=et(A,8)?0:(P[0]=et(A,14)+1,z[0]=et(A,14)+1,X[0]=et(A,1),0!=et(A,3)?0:!A.h)}function Sl(A,P){if(4>A)return A+1;var z=A-2>>1;return(2+(1&A)<<z)+et(P,z)+1}function Lc(A,P){return 120<P?P-120:1<=(z=((z=rX[P-1])>>4)*A+(8-(15&z)))?z:1;var z}function Hr(A,P,z){var X=Te(z),me=A[P+=255&X].g-8;return 0<me&&(Ue(z,z.u+8),X=Te(z),P+=A[P].value,P+=X&(1<<me)-1),Ue(z,z.u+A[P].g),A[P].value}function Ia(A,P,z){return z.g+=A.g,z.value+=A.value<<P>>>0,o(8>=z.g),A.g}function ga(A,P,z){var X=A.xc;return o((P=0==X?0:A.vc[A.md*(z>>X)+(P>>X)])<A.Wb),A.Ya[P]}function bs(A,P,z,X){var me=A.ab,ge=A.c*P,be=A.C;P=be+P;var Ce=z,ke=X;for(X=A.Ta,z=A.Ua;0<me--;){var Qe=A.gc[me],We=be,At=P,_t=Ce,rt=ke,It=(ke=X,Ce=z,Qe.Ea);switch(o(We<At),o(At<=Qe.nc),Qe.hc){case 2:m0(_t,rt,(At-We)*It,ke,Ce);break;case 0:var bt=We,Xe=At,it=ke,St=Ce,Ft=(rn=Qe).Ea;0==bt&&(Vb(_t,rt,null,null,1,it,St),gi(_t,rt+1,0,0,Ft-1,it,St+1),rt+=Ft,St+=Ft,++bt);for(var Ot=1<<rn.b,fn=Ot-1,Xt=wn(Ft,rn.b),jn=rn.K,rn=rn.w+(bt>>rn.b)*Xt;bt<Xe;){var $i=jn,ao=rn,Ui=1;for(of(_t,rt,it,St-Ft,1,it,St);Ui<Ft;){var Li=(Ui&~fn)+Ot;Li>Ft&&(Li=Ft),(0,Ed[$i[ao++]>>8&15])(_t,rt+ +Ui,it,St+Ui-Ft,Li-Ui,it,St+Ui),Ui=Li}rt+=Ft,St+=Ft,++bt&fn||(rn+=Xt)}At!=Qe.nc&&i(ke,Ce-It,ke,Ce+(At-We-1)*It,It);break;case 1:for(It=_t,Xe=rt,Ft=(_t=Qe.Ea)-(St=_t&~(it=(rt=1<<Qe.b)-1)),bt=wn(_t,Qe.b),Ot=Qe.K,Qe=Qe.w+(We>>Qe.b)*bt;We<At;){for(fn=Ot,Xt=Qe,jn=new an,rn=Xe+St,$i=Xe+_t;Xe<rn;)po(fn[Xt++],jn),Xs(jn,It,Xe,rt,ke,Ce),Xe+=rt,Ce+=rt;Xe<$i&&(po(fn[Xt++],jn),Xs(jn,It,Xe,Ft,ke,Ce),Xe+=Ft,Ce+=Ft),++We&it||(Qe+=bt)}break;case 3:if(_t==ke&&rt==Ce&&0<Qe.b){for(Xe=ke,_t=It=Ce+(At-We)*It-(St=(At-We)*wn(Qe.Ea,Qe.b)),rt=ke,it=Ce,bt=[],St=(Ft=St)-1;0<=St;--St)bt[St]=rt[it+St];for(St=Ft-1;0<=St;--St)Xe[_t+St]=bt[St];Pl(Qe,We,At,ke,It,ke,Ce)}else Pl(Qe,We,At,_t,rt,ke,Ce)}Ce=X,ke=z}ke!=z&&i(X,z,Ce,ke,ge)}function yh(A,P){var z=A.V,X=A.Ba+A.c*A.C,me=P-A.C;if(o(P<=A.l.o),o(16>=me),0<me){var ge=A.l,be=A.Ta,Ce=A.Ua,ke=ge.width;if(bs(A,me,z,X),me=Ce=[Ce],o((z=A.C)<(X=P)),o(ge.v<ge.va),X>ge.o&&(X=ge.o),z<ge.j){var Qe=ge.j-z;z=ge.j,me[0]+=Qe*ke}if(z>=X?z=0:(me[0]+=4*ge.v,ge.ka=z-ge.j,ge.U=ge.va-ge.v,ge.T=X-z,z=1),z){if(Ce=Ce[0],11>(z=A.ca).S){var We=z.f.RGBA,At=(X=z.S,me=ge.U,ge=ge.T,Qe=We.eb,We.A),_t=ge;for(We=We.fb+A.Ma*We.A;0<_t--;){var rt=be,It=Ce,bt=me,Xe=Qe,it=We;switch(X){case A0:Ql(rt,It,bt,Xe,it);break;case _0:Od(rt,It,bt,Xe,it);break;case iv:Od(rt,It,bt,Xe,it),Ld(Xe,it,0,bt,1,0);break;case l4:Rh(rt,It,bt,Xe,it);break;case f0:Qo(rt,It,bt,Xe,it,1);break;case ov:Qo(rt,It,bt,Xe,it,1),Ld(Xe,it,0,bt,1,0);break;case g0:Qo(rt,It,bt,Xe,it,0);break;case x0:Qo(rt,It,bt,Xe,it,0),Ld(Xe,it,1,bt,1,0);break;case nv:Fc(rt,It,bt,Xe,it);break;case av:Fc(rt,It,bt,Xe,it),Jh(Xe,it,bt,1,0);break;case c4:Su(rt,It,bt,Xe,it);break;default:o(0)}Ce+=ke,We+=At}A.Ma+=ge}else alert("todo:EmitRescaledRowsYUVA");o(A.Ma<=z.height)}}A.C=P,o(A.C<=A.i)}function yu(A){var P;if(0<A.ua)return 0;for(P=0;P<A.Wb;++P){var z=A.Ya[P].G,X=A.Ya[P].H;if(0<z[1][X[1]+0].g||0<z[2][X[2]+0].g||0<z[3][X[3]+0].g)return 0}return 1}function El(A,P,z,X,me,ge){if(0!=A.Z){var be=A.qd,Ce=A.rd;for(o(null!=Pd[A.Z]);P<z;++P)Pd[A.Z](be,Ce,X,me,X,me,ge),be=X,Ce=me,me+=ge;A.qd=be,A.rd=Ce}}function Ol(A,P){var z=A.l.ma,X=0==z.Z||1==z.Z?A.l.j:A.C;if(X=A.C<X?X:A.C,o(P<=A.l.o),P>X){var me=A.l.width,ge=z.ca,be=z.tb+me*X,Ce=A.V,ke=A.Ba+A.c*X,Qe=A.gc;o(1==A.ab),o(3==Qe[0].hc),Wb(Qe[0],X,P,Ce,ke,ge,be),El(z,X,P,ge,be,me)}A.C=A.Ma=P}function Il(A,P,z,X,me,ge,be){var Ce=A.$/X,ke=A.$%X,Qe=A.m,We=A.s,At=z+A.$,_t=At;me=z+X*me;var rt=z+X*ge,It=280+We.ua,bt=A.Pb?Ce:16777216,Xe=0<We.ua?We.Wa:null,it=We.wc,St=At<rt?ga(We,ke,Ce):null;o(A.C<ge),o(rt<=me);var Ft=!1;e:for(;;){for(;Ft||At<rt;){var Ot=0;if(Ce>=bt){var fn=At-z;o((bt=A).Pb),bt.wd=bt.m,bt.xd=fn,0<bt.s.ua&&ft(bt.s.Wa,bt.s.vb),bt=Ce+lX}if(ke&it||(St=ga(We,ke,Ce)),o(null!=St),St.Qb&&(P[At]=St.qb,Ft=!0),!Ft)if($e(Qe),St.jc){fn=P;var Xt=At,jn=St.pd[Te(Ot=Qe)&Kr-1];o(St.jc),256>jn.g?(Ue(Ot,Ot.u+jn.g),fn[Xt]=jn.value,Ot=0):(Ue(Ot,Ot.u+jn.g-256),o(256<=jn.value),Ot=jn.value),0==Ot&&(Ft=!0)}else Ot=Hr(St.G[0],St.H[0],Qe);if(Qe.h)break;if(Ft||256>Ot){if(!Ft)if(St.nd)P[At]=(St.qb|Ot<<8)>>>0;else{if($e(Qe),Ft=Hr(St.G[1],St.H[1],Qe),$e(Qe),fn=Hr(St.G[2],St.H[2],Qe),Xt=Hr(St.G[3],St.H[3],Qe),Qe.h)break;P[At]=(Xt<<24|Ft<<16|Ot<<8|fn)>>>0}if(Ft=!1,++At,++ke>=X&&(ke=0,++Ce,null!=be&&Ce<=ge&&!(Ce%16)&&be(A,Ce),null!=Xe))for(;_t<At;)Ot=P[_t++],Xe.X[(506832829*Ot&4294967295)>>>Xe.Mb]=Ot}else if(280>Ot){if(Ot=Sl(Ot-256,Qe),fn=Hr(St.G[4],St.H[4],Qe),$e(Qe),fn=Lc(X,fn=Sl(fn,Qe)),Qe.h)break;if(At-z<fn||me-At<Ot)break e;for(Xt=0;Xt<Ot;++Xt)P[At+Xt]=P[At+Xt-fn];for(At+=Ot,ke+=Ot;ke>=X;)ke-=X,++Ce,null!=be&&Ce<=ge&&!(Ce%16)&&be(A,Ce);if(o(At<=me),ke&it&&(St=ga(We,ke,Ce)),null!=Xe)for(;_t<At;)Ot=P[_t++],Xe.X[(506832829*Ot&4294967295)>>>Xe.Mb]=Ot}else{if(!(Ot<It))break e;for(Ft=Ot-280,o(null!=Xe);_t<At;)Ot=P[_t++],Xe.X[(506832829*Ot&4294967295)>>>Xe.Mb]=Ot;Ot=At,o(!(Ft>>>(fn=Xe).Xa)),P[Ot]=fn.X[Ft],Ft=!0}Ft||o(Qe.h==Ee(Qe))}if(A.Pb&&Qe.h&&At<me)o(A.m.h),A.a=5,A.m=A.wd,A.$=A.xd,0<A.s.ua&&ft(A.s.vb,A.s.Wa);else{if(Qe.h)break e;be?.(A,Ce>ge?ge:Ce),A.a=0,A.$=At-z}return 1}return A.a=3,0}function Bc(A){o(null!=A),A.vc=null,A.yc=null,A.Ya=null;var P=A.Wa;null!=P&&(P.X=null),A.vb=null,o(null!=A)}function Ws(){var A=new $b;return null==A?null:(A.a=0,A.xb=m4,Oc("Predictor","VP8LPredictors"),Oc("Predictor","VP8LPredictors_C"),Oc("PredictorAdd","VP8LPredictorsAdd"),Oc("PredictorAdd","VP8LPredictorsAdd_C"),m0=Mi,Xs=Vn,Ql=An,Od=mr,Fc=Ji,Su=Tl,Rh=fo,te.VP8LMapColor32b=af,te.VP8LMapColor8b=Xb,A)}function Pc(A,P,z,X,me){var ge=1,be=[A],Ce=[P],ke=X.m,Qe=X.s,We=null,At=0;e:for(;;){if(z)for(;ge&&et(ke,1);){var _t=be,rt=Ce,It=X,bt=1,Xe=It.m,it=It.gc[It.ab],St=et(Xe,2);if(It.Oc&1<<St)ge=0;else{switch(It.Oc|=1<<St,it.hc=St,it.Ea=_t[0],it.nc=rt[0],it.K=[null],++It.ab,o(4>=It.ab),St){case 0:case 1:it.b=et(Xe,3)+2,bt=Pc(wn(it.Ea,it.b),wn(it.nc,it.b),0,It,it.K),it.K=it.K[0];break;case 3:var Ft,Ot=et(Xe,8)+1,fn=16<Ot?0:4<Ot?1:2<Ot?2:3;if(_t[0]=wn(it.Ea,fn),it.b=fn,Ft=bt=Pc(Ot,1,0,It,it.K)){var Xt,jn=Ot,rn=it,$i=1<<(8>>rn.b),ao=r($i);if(null==ao)Ft=0;else{var Ui=rn.K[0],Li=rn.w;for(ao[0]=rn.K[0][0],Xt=1;Xt<1*jn;++Xt)ao[Xt]=Zt(Ui[Li+Xt],ao[Xt-1]);for(;Xt<4*$i;++Xt)ao[Xt]=0;rn.K[0]=null,rn.K[0]=ao,Ft=1}}bt=Ft;break;case 2:break;default:o(0)}ge=bt}}if(be=be[0],Ce=Ce[0],ge&&et(ke,1)&&!(ge=1<=(At=et(ke,4))&&11>=At)){X.a=3;break e}var go;if(go=ge)t:{var ho,hi,ba,Yr=X,va=be,$r=Ce,ro=At,ys=z,Cs=Yr.m,qa=Yr.s,er=[null],Or=1,il=0,Nc=sX[ro];n:for(;;){if(ys&&et(Cs,1)){var Ra=et(Cs,3)+2,Lu=wn(va,Ra),Ym=wn($r,Ra),Kh=Lu*Ym;if(!Pc(Lu,Ym,0,Yr,er))break n;for(er=er[0],qa.xc=Ra,ho=0;ho<Kh;++ho){var Qd=er[ho]>>8&65535;er[ho]=Qd,Qd>=Or&&(Or=Qd+1)}}if(Cs.h)break n;for(hi=0;5>hi;++hi){var na=u4[hi];!hi&&0<ro&&(na+=1<<ro),il<na&&(il=na)}var cv=s(Or*Nc,pe),v4=Or,w4=s(v4,Pe);if(null==w4)var y0=null;else o(65536>=v4),y0=w4;var uf=r(il);if(null==y0||null==uf||null==cv){Yr.a=1;break n}var C0=cv;for(ho=ba=0;ho<Or;++ho){var Dl=y0[ho],Gh=Dl.G,Yh=Dl.H,y4=0,T0=1,C4=0;for(hi=0;5>hi;++hi){na=u4[hi],Gh[hi]=C0,Yh[hi]=ba,!hi&&0<ro&&(na+=1<<ro);o:{var k0,uv=na,S0=Yr,df=uf,EX=C0,OX=ba,dv=0,Fd=S0.m,IX=et(Fd,1);if(a(df,0,0,uv),IX){var MX=et(Fd,1)+1,LX=et(Fd,1),T4=et(Fd,0==LX?1:8);df[T4]=1,2==MX&&(df[T4=et(Fd,8)]=1);var E0=1}else{var k4=r(19),S4=et(Fd,4)+4;if(19<S4){S0.a=3;var O0=0;break o}for(k0=0;k0<S4;++k0)k4[aX[k0]]=et(Fd,3);var mv=void 0,mf=void 0,E4=S0,BX=k4,I0=uv,O4=df,pv=0,Nd=E4.m,I4=8,M4=s(128,pe);i:for(;se(M4,0,7,BX,19);){if(et(Nd,1)){var PX=2+2*et(Nd,3);if((mv=2+et(Nd,PX))>I0)break i}else mv=I0;for(mf=0;mf<I0&&mv--;){$e(Nd);var L4=M4[0+(127&Te(Nd))];Ue(Nd,Nd.u+L4.g);var $h=L4.value;if(16>$h)O4[mf++]=$h,0!=$h&&(I4=$h);else{var QX=16==$h,B4=$h-16,FX=iX[B4],P4=et(Nd,nX[B4])+FX;if(mf+P4>I0)break i;for(var NX=QX?I4:0;0<P4--;)O4[mf++]=NX}}pv=1;break i}pv||(E4.a=3),E0=pv}(E0=E0&&!Fd.h)&&(dv=se(EX,OX,8,df,uv)),E0&&0!=dv?O0=dv:(S0.a=3,O0=0)}if(0==O0)break n;if(T0&&1==oX[hi]&&(T0=0==C0[ba].g),y4+=C0[ba].g,ba+=O0,3>=hi){var pf,hv=uf[0];for(pf=1;pf<na;++pf)uf[pf]>hv&&(hv=uf[pf]);C4+=hv}}if(Dl.nd=T0,Dl.Qb=0,T0&&(Dl.qb=(Gh[3][Yh[3]+0].value<<24|Gh[1][Yh[1]+0].value<<16|Gh[2][Yh[2]+0].value)>>>0,0==y4&&256>Gh[0][Yh[0]+0].value&&(Dl.Qb=1,Dl.qb+=Gh[0][Yh[0]+0].value<<8)),Dl.jc=!Dl.Qb&&6>C4,Dl.jc){var M0,Bu=Dl;for(M0=0;M0<Kr;++M0){var Zd=M0,Dd=Bu.pd[Zd],L0=Bu.G[0][Bu.H[0]+Zd];256<=L0.value?(Dd.g=L0.g+256,Dd.value=L0.value):(Dd.g=0,Dd.value=0,Zd>>=Ia(L0,8,Dd),Zd>>=Ia(Bu.G[1][Bu.H[1]+Zd],16,Dd),Zd>>=Ia(Bu.G[2][Bu.H[2]+Zd],0,Dd),Ia(Bu.G[3][Bu.H[3]+Zd],24,Dd))}}}qa.vc=er,qa.Wb=Or,qa.Ya=y0,qa.yc=cv,go=1;break t}go=0}if(!(ge=go)){X.a=3;break e}if(0<At){if(Qe.ua=1<<At,!dn(Qe.Wa,At)){X.a=1,ge=0;break e}}else Qe.ua=0;var Av=X,Q4=be,ZX=Ce,_v=Av.s,fv=_v.xc;if(Av.c=Q4,Av.i=ZX,_v.md=wn(Q4,fv),_v.wc=0==fv?-1:(1<<fv)-1,z){X.xb=AX;break e}if(null==(We=r(be*Ce))){X.a=1,ge=0;break e}ge=(ge=Il(X,We,0,be,Ce,Ce,null))&&!ke.h;break e}return ge?(null!=me?me[0]=We:(o(null==We),o(z)),X.$=0,z||Bc(Qe)):Bc(Qe),ge}function qm(A,P){var z=A.c*A.i,X=z+P+16*P;return o(A.c<=P),A.V=r(X),null==A.V?(A.Ta=null,A.Ua=0,A.a=1,0):(A.Ta=A.V,A.Ua=A.Ba+z+P,1)}function Ch(A,P){var z=A.C,X=P-z,me=A.V,ge=A.Ba+A.c*z;for(o(P<=A.l.o);0<X;){var be=16<X?16:X,Ce=A.l.ma,ke=A.l.width,Qe=ke*be,We=Ce.ca,At=Ce.tb+ke*z,_t=A.Ta,rt=A.Ua;bs(A,be,me,ge),n4(_t,rt,We,At,Qe),El(Ce,z,z+be,We,At,ke),X-=be,me+=be*A.c,z+=be}o(z==P),A.C=A.Ma=P}function Th(){this.ub=this.yd=this.td=this.Rb=0}function kh(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Sh(){this.Fb=this.Bb=this.Cb=0,this.Zb=r(4),this.Lb=r(4)}function H1(){var A;this.Yb=(function P(z,X,me){for(var ge=me[X],be=0;be<ge&&(z.push(me.length>X+1?[]:0),!(me.length<X+1));be++)P(z[be],X+1,me)}(A=[],0,[3,11]),A)}function Sb(){this.jb=r(3),this.Wc=l([4,8],H1),this.Xc=l([4,17],H1)}function Eb(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new r(4),this.od=new r(4)}function Eh(){this.ld=this.La=this.dd=this.tc=0}function J1(){this.Na=this.la=0}function Ob(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Z_(){this.ad=r(384),this.Za=0,this.Ob=r(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Ib(){this.uc=this.M=this.Nb=0,this.wa=Array(new Eh),this.Y=0,this.ya=Array(new Z_),this.aa=0,this.l=new Oh}function K1(){this.y=r(16),this.f=r(8),this.ea=r(8)}function Mb(){this.cb=this.a=0,this.sc="",this.m=new gt,this.Od=new Th,this.Kc=new kh,this.ed=new Eb,this.Qa=new Sh,this.Ic=this.$c=this.Aa=0,this.D=new Ib,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=s(8,gt),this.ia=0,this.pb=s(4,Ob),this.Pa=new Sb,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new K1),this.Hd=0,this.rb=Array(new J1),this.sb=0,this.wa=Array(new Eh),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Z_),this.L=this.aa=0,this.gd=l([4,2],Eh),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Oh(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Lb(){var A=new Mb;return null!=A&&(A.a=0,A.sc="OK",A.cb=0,A.Xb=0,lf||(lf=$1)),A}function ua(A,P,z){return 0==A.a&&(A.a=P,A.sc=z,A.cb=0),0}function G1(A,P,z){return 3<=z&&157==A[P+0]&&1==A[P+1]&&42==A[P+2]}function Y1(A,P){if(null==A)return 0;if(A.a=0,A.sc="OK",null==P)return ua(A,2,"null VP8Io passed to VP8GetHeaders()");var z=P.data,X=P.w,me=P.ha;if(4>me)return ua(A,7,"Truncated header.");var ge=z[X+0]|z[X+1]<<8|z[X+2]<<16,be=A.Od;if(be.Rb=!(1&ge),be.td=ge>>1&7,be.yd=ge>>4&1,be.ub=ge>>5,3<be.td)return ua(A,3,"Incorrect keyframe parameters.");if(!be.yd)return ua(A,4,"Frame not displayable.");X+=3,me-=3;var Ce=A.Kc;if(be.Rb){if(7>me)return ua(A,7,"cannot parse picture header");if(!G1(z,X,me))return ua(A,3,"Bad code word");Ce.c=16383&(z[X+4]<<8|z[X+3]),Ce.Td=z[X+4]>>6,Ce.i=16383&(z[X+6]<<8|z[X+5]),Ce.Ud=z[X+6]>>6,X+=7,me-=7,A.za=Ce.c+15>>4,A.Ub=Ce.i+15>>4,P.width=Ce.c,P.height=Ce.i,P.Da=0,P.j=0,P.v=0,P.va=P.width,P.o=P.height,P.da=0,P.ib=P.width,P.hb=P.height,P.U=P.width,P.T=P.height,a((ge=A.Pa).jb,0,255,ge.jb.length),o(null!=(ge=A.Qa)),ge.Cb=0,ge.Bb=0,ge.Fb=1,a(ge.Zb,0,0,ge.Zb.length),a(ge.Lb,0,0,ge.Lb)}if(be.ub>me)return ua(A,7,"bad partition length");Oe(ge=A.m,z,X,be.ub),X+=be.ub,me-=be.ub,be.Rb&&(Ce.Ld=st(ge),Ce.Kd=st(ge)),Ce=A.Qa;var ke,Qe=A.Pa;if(o(null!=ge),o(null!=Ce),Ce.Cb=st(ge),Ce.Cb){if(Ce.Bb=st(ge),st(ge)){for(Ce.Fb=st(ge),ke=0;4>ke;++ke)Ce.Zb[ke]=st(ge)?Re(ge,7):0;for(ke=0;4>ke;++ke)Ce.Lb[ke]=st(ge)?Re(ge,6):0}if(Ce.Bb)for(ke=0;3>ke;++ke)Qe.jb[ke]=st(ge)?Fe(ge,8):255}else Ce.Bb=0;if(ge.Ka)return ua(A,3,"cannot parse segment header");if((Ce=A.ed).zd=st(ge),Ce.Tb=Fe(ge,6),Ce.wb=Fe(ge,3),Ce.Pc=st(ge),Ce.Pc&&st(ge)){for(Qe=0;4>Qe;++Qe)st(ge)&&(Ce.vd[Qe]=Re(ge,6));for(Qe=0;4>Qe;++Qe)st(ge)&&(Ce.od[Qe]=Re(ge,6))}if(A.L=0==Ce.Tb?0:Ce.zd?1:2,ge.Ka)return ua(A,3,"cannot parse filter header");var We=me;if(me=ke=X,X=ke+We,Ce=We,A.Xb=(1<<Fe(A.m,2))-1,We<3*(Qe=A.Xb))z=7;else{for(ke+=3*Qe,Ce-=3*Qe,We=0;We<Qe;++We){var At=z[me+0]|z[me+1]<<8|z[me+2]<<16;At>Ce&&(At=Ce),Oe(A.Jc[+We],z,ke,At),ke+=At,Ce-=At,me+=3}Oe(A.Jc[+Qe],z,ke,Ce),z=ke<X?0:5}if(0!=z)return ua(A,z,"cannot parse partitions");for(z=Fe(ke=A.m,7),me=st(ke)?Re(ke,4):0,X=st(ke)?Re(ke,4):0,Ce=st(ke)?Re(ke,4):0,Qe=st(ke)?Re(ke,4):0,ke=st(ke)?Re(ke,4):0,We=A.Qa,At=0;4>At;++At){if(We.Cb){var _t=We.Zb[At];We.Fb||(_t+=z)}else{if(0<At){A.pb[At]=A.pb[0];continue}_t=z}var rt=A.pb[At];rt.Sc[0]=rv[vs(_t+me,127)],rt.Sc[1]=sv[vs(_t+0,127)],rt.Eb[0]=2*rv[vs(_t+X,127)],rt.Eb[1]=101581*sv[vs(_t+Ce,127)]>>16,8>rt.Eb[1]&&(rt.Eb[1]=8),rt.Qc[0]=rv[vs(_t+Qe,117)],rt.Qc[1]=sv[vs(_t+ke,127)],rt.lc=_t+ke}if(!be.Rb)return ua(A,4,"Not a key frame.");for(st(ge),be=A.Pa,z=0;4>z;++z){for(me=0;8>me;++me)for(X=0;3>X;++X)for(Ce=0;11>Ce;++Ce)Qe=dt(ge,pX[z][me][X][Ce])?Fe(ge,8):dX[z][me][X][Ce],be.Wc[z][me].Yb[X][Ce]=Qe;for(me=0;17>me;++me)be.Xc[z][me]=be.Wc[z][hX[me]]}return A.kc=st(ge),A.kc&&(A.Bd=Fe(ge,8)),A.cb=1}function $1(A,P,z,X,me,ge,be){var Ce=P[me].Yb[z];for(z=0;16>me;++me){if(!dt(A,Ce[z+0]))return me;for(;!dt(A,Ce[z+1]);)if(Ce=P[++me].Yb[0],z=0,16==me)return 16;var ke=P[me+1].Yb;if(dt(A,Ce[z+2])){var Qe=A,We=0;if(dt(Qe,(_t=Ce)[(At=z)+3]))if(dt(Qe,_t[At+6])){for(Ce=0,At=2*(We=dt(Qe,_t[At+8]))+(_t=dt(Qe,_t[At+9+We])),We=0,_t=cX[At];_t[Ce];++Ce)We+=We+dt(Qe,_t[Ce]);We+=3+(8<<At)}else dt(Qe,_t[At+7])?(We=7+2*dt(Qe,165),We+=dt(Qe,145)):We=5+dt(Qe,159);else We=dt(Qe,_t[At+4])?3+dt(Qe,_t[At+5]):2;Ce=ke[2]}else We=1,Ce=ke[1];ke=be+uX[me],0>(Qe=A).b&&ut(Qe);var At,_t=Qe.b,rt=(At=Qe.Ca>>1)-(Qe.I>>_t)>>31;--Qe.b,Qe.Ca+=rt,Qe.Ca|=1,Qe.I-=(At+1&rt)<<_t,ge[ke]=((We^rt)-rt)*X[(0<me)+0]}return 16}function D_(A){var P=A.rb[A.sb-1];P.la=0,P.Na=0,a(A.zc,0,0,A.zc.length),A.ja=0}function Ml(A,P,z,X,me){A[P+z+32*X]=-256&(me=A[P+z+32*X]+(me>>3))?0>me?0:255:me}function Ih(A,P,z,X,me,ge){Ml(A,P,0,z,X+me),Ml(A,P,1,z,X+ge),Ml(A,P,2,z,X-ge),Ml(A,P,3,z,X-me)}function Jr(A){return(20091*A>>16)+A}function U_(A,P,z,X){var me,ge=0,be=r(16);for(me=0;4>me;++me){var Ce=A[P+0]+A[P+8],ke=A[P+0]-A[P+8],Qe=(35468*A[P+4]>>16)-Jr(A[P+12]),We=Jr(A[P+4])+(35468*A[P+12]>>16);be[ge+0]=Ce+We,be[ge+1]=ke+Qe,be[ge+2]=ke-Qe,be[ge+3]=Ce-We,ge+=4,P++}for(me=ge=0;4>me;++me)Ce=(A=be[ge+0]+4)+be[ge+8],ke=A-be[ge+8],Qe=(35468*be[ge+4]>>16)-Jr(be[ge+12]),Ml(z,X,0,0,Ce+(We=Jr(be[ge+4])+(35468*be[ge+12]>>16))),Ml(z,X,1,0,ke+Qe),Ml(z,X,2,0,ke-Qe),Ml(z,X,3,0,Ce-We),ge++,X+=32}function V1(A,P,z,X){var me=A[P+0]+4,ge=35468*A[P+4]>>16,be=Jr(A[P+4]),Ce=35468*A[P+1]>>16;Ih(z,X,0,me+be,A=Jr(A[P+1]),Ce),Ih(z,X,1,me+ge,A,Ce),Ih(z,X,2,me-ge,A,Ce),Ih(z,X,3,me-be,A,Ce)}function Pb(A,P,z,X,me){U_(A,P,z,X),me&&U_(A,P+16,z,X+4)}function W1(A,P,z,X){zh(A,P+0,z,X,1),zh(A,P+32,z,X+128,1)}function Qb(A,P,z,X){var me;for(A=A[P+0]+4,me=0;4>me;++me)for(P=0;4>P;++P)Ml(z,X,P,me,A)}function X1(A,P,z,X){A[P+0]&&Nl(A,P+0,z,X),A[P+16]&&Nl(A,P+16,z,X+4),A[P+32]&&Nl(A,P+32,z,X+128),A[P+48]&&Nl(A,P+48,z,X+128+4)}function Fb(A,P,z,X){var me,ge=r(16);for(me=0;4>me;++me){var be=A[P+0+me]+A[P+12+me],Ce=A[P+4+me]+A[P+8+me],ke=A[P+4+me]-A[P+8+me],Qe=A[P+0+me]-A[P+12+me];ge[0+me]=be+Ce,ge[8+me]=be-Ce,ge[4+me]=Qe+ke,ge[12+me]=Qe-ke}for(me=0;4>me;++me)be=(A=ge[0+4*me]+3)+ge[3+4*me],ke=ge[1+4*me]-ge[2+4*me],Qe=A-ge[3+4*me],z[X+0]=be+(Ce=ge[1+4*me]+ge[2+4*me])>>3,z[X+16]=Qe+ke>>3,z[X+32]=be-Ce>>3,z[X+48]=Qe-ke>>3,X+=64}function j_(A,P,z){var X,me=P-32,ge=ws,be=255-A[me-1];for(X=0;X<z;++X){var Ce,ke=ge,Qe=be+A[P-1];for(Ce=0;Ce<z;++Ce)A[P+Ce]=ke[Qe+A[me+Ce]];P+=32}}function Nb(A,P){j_(A,P,4)}function Zb(A,P){j_(A,P,8)}function Db(A,P){j_(A,P,16)}function Cu(A,P){var z;for(z=0;16>z;++z)i(A,P+32*z,A,P-32,16)}function Mh(A,P){var z;for(z=16;0<z;--z)a(A,P,A[P-1],16),P+=32}function Lh(A,P,z){var X;for(X=0;16>X;++X)a(P,z+32*X,A,16)}function e0(A,P){var z,X=16;for(z=0;16>z;++z)X+=A[P-1+32*z]+A[P+z-32];Lh(X>>5,A,P)}function pr(A,P){var z,X=8;for(z=0;16>z;++z)X+=A[P-1+32*z];Lh(X>>4,A,P)}function Ub(A,P){var z,X=8;for(z=0;16>z;++z)X+=A[P+z-32];Lh(X>>4,A,P)}function t0(A,P){Lh(128,A,P)}function ni(A,P,z){return A+2*P+z+2>>2}function jb(A,P){var z,X=P-32;for(X=new Uint8Array([ni(A[X-1],A[X+0],A[X+1]),ni(A[X+0],A[X+1],A[X+2]),ni(A[X+1],A[X+2],A[X+3]),ni(A[X+2],A[X+3],A[X+4])]),z=0;4>z;++z)i(A,P+32*z,X,0,X.length)}function qb(A,P){var z=A[P-1],X=A[P-1+32],me=A[P-1+64],ge=A[P-1+96];Rt(A,P+0,16843009*ni(A[P-1-32],z,X)),Rt(A,P+32,16843009*ni(z,X,me)),Rt(A,P+64,16843009*ni(X,me,ge)),Rt(A,P+96,16843009*ni(me,ge,ge))}function Qc(A,P){var z,X=4;for(z=0;4>z;++z)X+=A[P+z-32]+A[P-1+32*z];for(X>>=3,z=0;4>z;++z)a(A,P+32*z,X,4)}function n0(A,P){var z=A[P-1+0],X=A[P-1+32],me=A[P-1+64],ge=A[P-1-32],be=A[P+0-32],Ce=A[P+1-32],ke=A[P+2-32],Qe=A[P+3-32];A[P+0+96]=ni(X,me,A[P-1+96]),A[P+1+96]=A[P+0+64]=ni(z,X,me),A[P+2+96]=A[P+1+64]=A[P+0+32]=ni(ge,z,X),A[P+3+96]=A[P+2+64]=A[P+1+32]=A[P+0+0]=ni(be,ge,z),A[P+3+64]=A[P+2+32]=A[P+1+0]=ni(Ce,be,ge),A[P+3+32]=A[P+2+0]=ni(ke,Ce,be),A[P+3+0]=ni(Qe,ke,Ce)}function o0(A,P){var z=A[P+1-32],X=A[P+2-32],me=A[P+3-32],ge=A[P+4-32],be=A[P+5-32],Ce=A[P+6-32],ke=A[P+7-32];A[P+0+0]=ni(A[P+0-32],z,X),A[P+1+0]=A[P+0+32]=ni(z,X,me),A[P+2+0]=A[P+1+32]=A[P+0+64]=ni(X,me,ge),A[P+3+0]=A[P+2+32]=A[P+1+64]=A[P+0+96]=ni(me,ge,be),A[P+3+32]=A[P+2+64]=A[P+1+96]=ni(ge,be,Ce),A[P+3+64]=A[P+2+96]=ni(be,Ce,ke),A[P+3+96]=ni(Ce,ke,ke)}function Bh(A,P){var z=A[P-1+0],X=A[P-1+32],me=A[P-1+64],ge=A[P-1-32],be=A[P+0-32],Ce=A[P+1-32],ke=A[P+2-32],Qe=A[P+3-32];A[P+0+0]=A[P+1+64]=ge+be+1>>1,A[P+1+0]=A[P+2+64]=be+Ce+1>>1,A[P+2+0]=A[P+3+64]=Ce+ke+1>>1,A[P+3+0]=ke+Qe+1>>1,A[P+0+96]=ni(me,X,z),A[P+0+64]=ni(X,z,ge),A[P+0+32]=A[P+1+96]=ni(z,ge,be),A[P+1+32]=A[P+2+96]=ni(ge,be,Ce),A[P+2+32]=A[P+3+96]=ni(be,Ce,ke),A[P+3+32]=ni(Ce,ke,Qe)}function q_(A,P){var z=A[P+0-32],X=A[P+1-32],me=A[P+2-32],ge=A[P+3-32],be=A[P+4-32],Ce=A[P+5-32],ke=A[P+6-32],Qe=A[P+7-32];A[P+0+0]=z+X+1>>1,A[P+1+0]=A[P+0+64]=X+me+1>>1,A[P+2+0]=A[P+1+64]=me+ge+1>>1,A[P+3+0]=A[P+2+64]=ge+be+1>>1,A[P+0+32]=ni(z,X,me),A[P+1+32]=A[P+0+96]=ni(X,me,ge),A[P+2+32]=A[P+1+96]=ni(me,ge,be),A[P+3+32]=A[P+2+96]=ni(ge,be,Ce),A[P+3+64]=ni(be,Ce,ke),A[P+3+96]=ni(Ce,ke,Qe)}function Rb(A,P){var z=A[P-1+0],X=A[P-1+32],me=A[P-1+64],ge=A[P-1+96];A[P+0+0]=z+X+1>>1,A[P+2+0]=A[P+0+32]=X+me+1>>1,A[P+2+32]=A[P+0+64]=me+ge+1>>1,A[P+1+0]=ni(z,X,me),A[P+3+0]=A[P+1+32]=ni(X,me,ge),A[P+3+32]=A[P+1+64]=ni(me,ge,ge),A[P+3+64]=A[P+2+64]=A[P+0+96]=A[P+1+96]=A[P+2+96]=A[P+3+96]=ge}function zb(A,P){var z=A[P-1+0],X=A[P-1+32],me=A[P-1+64],ge=A[P-1+96],be=A[P-1-32],Ce=A[P+0-32],ke=A[P+1-32],Qe=A[P+2-32];A[P+0+0]=A[P+2+32]=z+be+1>>1,A[P+0+32]=A[P+2+64]=X+z+1>>1,A[P+0+64]=A[P+2+96]=me+X+1>>1,A[P+0+96]=ge+me+1>>1,A[P+3+0]=ni(Ce,ke,Qe),A[P+2+0]=ni(be,Ce,ke),A[P+1+0]=A[P+3+32]=ni(z,be,Ce),A[P+1+32]=A[P+3+64]=ni(X,z,be),A[P+1+64]=A[P+3+96]=ni(me,X,z),A[P+1+96]=ni(ge,me,X)}function Hb(A,P){var z;for(z=0;8>z;++z)i(A,P+32*z,A,P-32,8)}function R_(A,P){var z;for(z=0;8>z;++z)a(A,P,A[P-1],8),P+=32}function Rm(A,P,z){var X;for(X=0;8>X;++X)a(P,z+32*X,A,8)}function Cd(A,P){var z,X=8;for(z=0;8>z;++z)X+=A[P+z-32]+A[P-1+32*z];Rm(X>>4,A,P)}function Jb(A,P){var z,X=4;for(z=0;8>z;++z)X+=A[P+z-32];Rm(X>>3,A,P)}function zm(A,P){var z,X=4;for(z=0;8>z;++z)X+=A[P-1+32*z];Rm(X>>3,A,P)}function z_(A,P){Rm(128,A,P)}function Ph(A,P,z){var X=A[P-z],me=A[P+0],ge=3*(me-X)+tv[1020+A[P-2*z]-A[P+z]],be=h0[112+(ge+4>>3)];A[P-z]=ws[255+X+h0[112+(ge+3>>3)]],A[P+0]=ws[255+me-be]}function a0(A,P,z,X){return tl[255+A[P-2*z]-A[P-z]]>X||tl[255+A[P+z]-A[P+0]]>X}function r0(A,P,z,X){return 4*tl[255+A[P-z]-A[P+0]]+tl[255+A[P-2*z]-A[P+z]]<=X}function s0(A,P,z,X,me){var ge=A[P-3*z],be=A[P-2*z],Ce=A[P-z],ke=A[P+0],Qe=A[P+z],We=A[P+2*z];return 4*tl[255+Ce-ke]+tl[255+be-Qe]>X?0:tl[255+A[P-4*z]-ge]<=me&&tl[255+ge-be]<=me&&tl[255+be-Ce]<=me&&tl[255+A[P+3*z]-We]<=me&&tl[255+We-Qe]<=me&&tl[255+Qe-ke]<=me}function l0(A,P,z,X){var me=2*X+1;for(X=0;16>X;++X)r0(A,P+X,z,me)&&Ph(A,P+X,z)}function Tu(A,P,z,X){var me=2*X+1;for(X=0;16>X;++X)r0(A,P+X*z,1,me)&&Ph(A,P+X*z,1)}function Td(A,P,z,X){var me;for(me=3;0<me;--me)l0(A,P+=4*z,z,X)}function Kb(A,P,z,X){var me;for(me=3;0<me;--me)Tu(A,P+=4,z,X)}function kd(A,P,z,X,me,ge,be,Ce){for(ge=2*ge+1;0<me--;){if(s0(A,P,z,ge,be))if(a0(A,P,z,Ce))Ph(A,P,z);else{var ke=A,Qe=P,We=z,At=ke[Qe-2*We],_t=ke[Qe-We],rt=ke[Qe+0],It=ke[Qe+We],bt=ke[Qe+2*We],Xe=27*(St=tv[1020+3*(rt-_t)+tv[1020+At-It]])+63>>7,it=18*St+63>>7,St=9*St+63>>7;ke[Qe-3*We]=ws[255+ke[Qe-3*We]+St],ke[Qe-2*We]=ws[255+At+it],ke[Qe-We]=ws[255+_t+Xe],ke[Qe+0]=ws[255+rt-Xe],ke[Qe+We]=ws[255+It-it],ke[Qe+2*We]=ws[255+bt-St]}P+=X}}function Ll(A,P,z,X,me,ge,be,Ce){for(ge=2*ge+1;0<me--;){if(s0(A,P,z,ge,be))if(a0(A,P,z,Ce))Ph(A,P,z);else{var ke=A,Qe=P,We=z,At=ke[Qe-We],_t=ke[Qe+0],rt=ke[Qe+We],It=h0[112+(4+(bt=3*(_t-At))>>3)],bt=h0[112+(bt+3>>3)],Xe=It+1>>1;ke[Qe-2*We]=ws[255+ke[Qe-2*We]+Xe],ke[Qe-We]=ws[255+At+bt],ke[Qe+0]=ws[255+_t-It],ke[Qe+We]=ws[255+rt-Xe]}P+=X}}function H_(A,P,z,X,me,ge){kd(A,P,z,1,16,X,me,ge)}function Hm(A,P,z,X,me,ge){kd(A,P,1,z,16,X,me,ge)}function Gb(A,P,z,X,me,ge){var be;for(be=3;0<be;--be)Ll(A,P+=4*z,z,1,16,X,me,ge)}function Qh(A,P,z,X,me,ge){var be;for(be=3;0<be;--be)Ll(A,P+=4,1,z,16,X,me,ge)}function Yb(A,P,z,X,me,ge,be,Ce){kd(A,P,me,1,8,ge,be,Ce),kd(z,X,me,1,8,ge,be,Ce)}function J_(A,P,z,X,me,ge,be,Ce){kd(A,P,1,me,8,ge,be,Ce),kd(z,X,1,me,8,ge,be,Ce)}function K_(A,P,z,X,me,ge,be,Ce){Ll(A,P+4*me,me,1,8,ge,be,Ce),Ll(z,X+4*me,me,1,8,ge,be,Ce)}function c0(A,P,z,X,me,ge,be,Ce){Ll(A,P+4,1,me,8,ge,be,Ce),Ll(z,X+4,1,me,8,ge,be,Ce)}function Fh(){this.ba=new kl,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new ea,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function G_(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Y_(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function u0(){this.ua=0,this.Wa=new je,this.vb=new je,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Pe,this.yc=new pe}function $b(){this.xb=this.a=0,this.l=new Oh,this.ca=new kl,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new ue,this.Pb=0,this.wd=new ue,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new u0,this.ab=0,this.gc=s(4,Y_),this.Oc=0}function Nh(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Oh,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Jm(A,P,z,X,me,ge,be){for(A=null==A?0:A[P+0],P=0;P<be;++P)me[ge+P]=A+z[X+P]&255,A=me[ge+P]}function $_(A,P,z,X,me,ge,be){var Ce;if(null==A)Jm(null,null,z,X,me,ge,be);else for(Ce=0;Ce<be;++Ce)me[ge+Ce]=A[P+Ce]+z[X+Ce]&255}function Sd(A,P,z,X,me,ge,be){if(null==A)Jm(null,null,z,X,me,ge,be);else{var Ce,ke=A[P+0],Qe=ke,We=ke;for(Ce=0;Ce<be;++Ce)Qe=We+(ke=A[P+Ce])-Qe,We=z[X+Ce]+(-256&Qe?0>Qe?0:255:Qe)&255,Qe=ke,me[ge+Ce]=We}}function V_(A,P,z,X){var me=P.width,ge=P.o;if(o(null!=A&&null!=P),0>z||0>=X||z+X>ge)return null;if(!A.Cc){if(null==A.ga){var be;if(A.ga=new Nh,(be=null==A.ga)||(be=P.width*P.o,o(0==A.Gb.length),A.Gb=r(be),A.Uc=0,null==A.Gb?be=0:(A.mb=A.Gb,A.nb=A.Uc,A.rc=null,be=1),be=!be),!be){var Ce=A.Fa,ke=A.P,Qe=A.qc,We=A.mb,At=A.nb,_t=ke+1,rt=Qe-1,It=(be=A.ga).l;if(o(null!=Ce&&null!=We&&null!=P),Pd[0]=null,Pd[1]=Jm,Pd[2]=$_,Pd[3]=Sd,be.ca=We,be.tb=At,be.c=P.width,be.i=P.height,o(0<be.c&&0<be.i),1>=Qe)P=0;else if(be.$a=Ce[ke+0]>>0&3,be.Z=Ce[ke+0]>>2&3,be.Lc=Ce[ke+0]>>4&3,ke=Ce[ke+0]>>6&3,0>be.$a||1<be.$a||4<=be.Z||1<be.Lc||ke)P=0;else if(It.put=Ic,It.ac=Xa,It.bc=Mc,It.ma=be,It.width=P.width,It.height=P.height,It.Da=P.Da,It.v=P.v,It.va=P.va,It.j=P.j,It.o=P.o,be.$a)e:{o(1==be.$a),P=Ws();t:for(;;){if(null==P){P=0;break e}if(o(null!=be),be.mc=P,P.c=be.c,P.i=be.i,P.l=be.l,P.l.ma=be,P.l.width=be.c,P.l.height=be.i,P.a=0,Je(P.m,Ce,_t,rt),!Pc(be.c,be.i,1,P,null)||(1==P.ab&&3==P.gc[0].hc&&yu(P.s)?(be.ic=1,Ce=P.c*P.i,P.Ta=null,P.Ua=0,P.V=r(Ce),P.Ba=0,null==P.V?(P.a=1,P=0):P=1):(be.ic=0,P=qm(P,be.c)),!P))break t;P=1;break e}be.mc=null,P=0}else P=rt>=be.c*be.i;be=!P}if(be)return null;1!=A.ga.Lc?A.Ga=0:X=ge-z}o(null!=A.ga),o(z+X<=ge);e:{if(P=(Ce=A.ga).c,ge=Ce.l.o,0==Ce.$a){if(_t=A.rc,rt=A.Vc,It=A.Fa,Qe=A.mb,We=A.nb+z*P,o((ke=A.P+1+z*P)<=A.P+A.qc),0!=Ce.Z)for(o(null!=Pd[Ce.Z]),be=0;be<X;++be)Pd[Ce.Z](_t,rt,It,ke,Qe,We,P),_t=Qe,rt=We,We+=P,ke+=P;else for(be=0;be<X;++be)i(Qe,We,It,ke,P),_t=Qe,rt=We,We+=P,ke+=P;A.rc=_t,A.Vc=rt}else{if(o(null!=Ce.mc),P=z+X,o(null!=(be=Ce.mc)),o(P<=be.i),be.C>=P)P=1;else if(Ce.ic||lt(),Ce.ic){Ce=be.V,_t=be.Ba;var bt=be.i,Xe=(It=1,ke=be.$/(rt=be.c),Qe=be.$%rt,We=be.m,At=be.s,be.$),it=rt*bt,St=rt*P,Ft=At.wc,Ot=Xe<St?ga(At,Qe,ke):null;o(Xe<=it),o(P<=bt),o(yu(At));t:for(;;){for(;!We.h&&Xe<St;){if(Qe&Ft||(Ot=ga(At,Qe,ke)),o(null!=Ot),$e(We),256>(bt=Hr(Ot.G[0],Ot.H[0],We)))Ce[_t+Xe]=bt,++Xe,++Qe>=rt&&(Qe=0,++ke<=P&&!(ke%16)&&Ol(be,ke));else{if(!(280>bt)){It=0;break t}bt=Sl(bt-256,We);var fn,Xt=Hr(Ot.G[4],Ot.H[4],We);if($e(We),!(Xe>=(Xt=Lc(rt,Xt=Sl(Xt,We)))&&it-Xe>=bt)){It=0;break t}for(fn=0;fn<bt;++fn)Ce[_t+Xe+fn]=Ce[_t+Xe+fn-Xt];for(Xe+=bt,Qe+=bt;Qe>=rt;)Qe-=rt,++ke<=P&&!(ke%16)&&Ol(be,ke);Xe<St&&Qe&Ft&&(Ot=ga(At,Qe,ke))}o(We.h==Ee(We))}Ol(be,ke>P?P:ke);break t}!It||We.h&&Xe<it?(It=0,be.a=We.h?5:3):be.$=Xe,P=It}else P=Il(be,be.V,be.Ba,be.c,be.i,P,Ch);if(!P){X=0;break e}}z+X>=ge&&(A.Cc=1),X=1}if(!X)return null;if(A.Cc&&(null!=(X=A.ga)&&(X.mc=null),A.ga=null,0<A.Ga))return alert("todo:WebPDequantizeLevels"),null}return A.nb+z*me}function q(A,P,z,X,me,ge){for(;0<me--;){var be,Ce=A,ke=P+(z?1:0),Qe=A,We=P+(z?0:3);for(be=0;be<X;++be){var At=Qe[We+4*be];255!=At&&(Ce[ke+4*be+0]=Ce[ke+4*be+0]*(At*=32897)>>23,Ce[ke+4*be+1]=Ce[ke+4*be+1]*At>>23,Ce[ke+4*be+2]=Ce[ke+4*be+2]*At>>23)}P+=ge}}function he(A,P,z,X,me){for(;0<X--;){var ge;for(ge=0;ge<z;++ge){var be=A[P+2*ge+0],Ce=15&(Qe=A[P+2*ge+1]),ke=4369*Ce,Qe=(240&Qe|Qe>>4)*ke>>16;A[P+2*ge+0]=(240&be|be>>4)*ke>>16&240|(15&be|be<<4)*ke>>16>>4&15,A[P+2*ge+1]=240&Qe|Ce}P+=me}}function De(A,P,z,X,me,ge,be,Ce){var ke,Qe,We=255;for(Qe=0;Qe<me;++Qe){for(ke=0;ke<X;++ke){var At=A[P+ke];ge[be+4*ke]=At,We&=At}P+=z,be+=Ce}return 255!=We}function Ye(A,P,z,X,me){var ge;for(ge=0;ge<me;++ge)z[X+ge]=A[P+ge]>>8}function lt(){Ld=q,Jh=he,p0=De,n4=Ye}function yt(A,P,z){te[A]=function(X,me,ge,be,Ce,ke,Qe,We,At,_t,rt,It,bt,Xe,it,St,Ft){var Ot,fn=Ft-1>>1,Xt=Ce[ke+0]|Qe[We+0]<<16,jn=At[_t+0]|rt[It+0]<<16;o(null!=X);var rn=3*Xt+jn+131074>>2;for(P(X[me+0],255&rn,rn>>16,bt,Xe),null!=ge&&P(ge[be+0],255&(rn=3*jn+Xt+131074>>2),rn>>16,it,St),Ot=1;Ot<=fn;++Ot){var $i=Ce[ke+Ot]|Qe[We+Ot]<<16,ao=At[_t+Ot]|rt[It+Ot]<<16,Ui=Xt+$i+jn+ao+524296,Li=Ui+2*($i+jn)>>3;rn=Li+Xt>>1,Xt=(Ui=Ui+2*(Xt+ao)>>3)+$i>>1,P(X[me+2*Ot-1],255&rn,rn>>16,bt,Xe+(2*Ot-1)*z),P(X[me+2*Ot-0],255&Xt,Xt>>16,bt,Xe+(2*Ot-0)*z),null!=ge&&(Xt=Li+ao>>1,P(ge[be+2*Ot-1],255&(rn=Ui+jn>>1),rn>>16,it,St+(2*Ot-1)*z),P(ge[be+2*Ot+0],255&Xt,Xt>>16,it,St+(2*Ot+0)*z)),Xt=$i,jn=ao}1&Ft||(P(X[me+Ft-1],255&(rn=3*Xt+jn+131074>>2),rn>>16,bt,Xe+(Ft-1)*z),null!=ge&&P(ge[be+Ft-1],255&(rn=3*jn+Xt+131074>>2),rn>>16,it,St+(Ft-1)*z))}}function zt(){nl[A0]=_X,nl[_0]=p4,nl[l4]=fX,nl[f0]=h4,nl[g0]=A4,nl[nv]=_4,nl[c4]=gX,nl[iv]=p4,nl[ov]=h4,nl[x0]=A4,nl[av]=_4}function _n(A){return A&~xX?0>A?0:255:A>>f4}function Fn(A,P){return _n((19077*A>>8)+(26149*P>>8)-14234)}function ci(A,P,z){return _n((19077*A>>8)-(6419*P>>8)-(13320*z>>8)+8708)}function xi(A,P){return _n((19077*A>>8)+(33050*P>>8)-17685)}function Fi(A,P,z,X,me){X[me+0]=Fn(A,z),X[me+1]=ci(A,P,z),X[me+2]=xi(A,P)}function Ho(A,P,z,X,me){X[me+0]=xi(A,P),X[me+1]=ci(A,P,z),X[me+2]=Fn(A,z)}function ta(A,P,z,X,me){var ge=ci(A,P,z);P=ge<<3&224|xi(A,P)>>3,X[me+0]=248&Fn(A,z)|ge>>5,X[me+1]=P}function xa(A,P,z,X,me){var ge=240&xi(A,P)|15;X[me+0]=240&Fn(A,z)|ci(A,P,z)>>4,X[me+1]=ge}function hr(A,P,z,X,me){X[me+0]=255,Fi(A,P,z,X,me+1)}function ja(A,P,z,X,me){Ho(A,P,z,X,me),X[me+3]=255}function Bl(A,P,z,X,me){Fi(A,P,z,X,me),X[me+3]=255}function vs(A,P){return 0>A?0:A>P?P:A}function ku(A,P,z){te[A]=function(X,me,ge,be,Ce,ke,Qe,We,At){for(var _t=We+(-2&At)*z;We!=_t;)P(X[me+0],ge[be+0],Ce[ke+0],Qe,We),P(X[me+1],ge[be+0],Ce[ke+0],Qe,We+z),me+=2,++be,++ke,We+=2*z;1&At&&P(X[me+0],ge[be+0],Ce[ke+0],Qe,We)}}function d0(A,P,z){return 0==z?0==A?0==P?6:5:0==P?4:0:z}function W_(A,P,z,X,me){switch(A>>>30){case 3:zh(P,z,X,me,0);break;case 2:rf(P,z,X,me);break;case 1:Nl(P,z,X,me)}}function X_(A,P){var z,X,me=P.M,ge=P.Nb,be=A.oc,Ce=A.pc+40,ke=A.oc,Qe=A.pc+584,We=A.oc,At=A.pc+600;for(z=0;16>z;++z)be[Ce+32*z-1]=129;for(z=0;8>z;++z)ke[Qe+32*z-1]=129,We[At+32*z-1]=129;for(0<me?be[Ce-1-32]=ke[Qe-1-32]=We[At-1-32]=129:(a(be,Ce-32-1,127,21),a(ke,Qe-32-1,127,9),a(We,At-32-1,127,9)),X=0;X<A.za;++X){var _t=P.ya[P.aa+X];if(0<X){for(z=-1;16>z;++z)i(be,Ce+32*z-4,be,Ce+32*z+12,4);for(z=-1;8>z;++z)i(ke,Qe+32*z-4,ke,Qe+32*z+4,4),i(We,At+32*z-4,We,At+32*z+4,4)}var rt=A.Gd,It=A.Hd+X,bt=_t.ad,Xe=_t.Hc;if(0<me&&(i(be,Ce-32,rt[It].y,0,16),i(ke,Qe-32,rt[It].f,0,8),i(We,At-32,rt[It].ea,0,8)),_t.Za){var it=be,St=Ce-32+16;for(0<me&&(X>=A.za-1?a(it,St,rt[It].y[15],4):i(it,St,rt[It+1].y,0,4)),z=0;4>z;z++)it[St+128+z]=it[St+256+z]=it[St+384+z]=it[St+0+z];for(z=0;16>z;++z,Xe<<=2)Zl[_t.Ob[z]](it=be,St=Ce+x4[z]),W_(Xe,bt,16*+z,it,St)}else if(it=d0(X,me,_t.Ob[0]),Bd[it](be,Ce),0!=Xe)for(z=0;16>z;++z,Xe<<=2)W_(Xe,bt,16*+z,be,Ce+x4[z]);for(z=_t.Gc,it=d0(X,me,_t.Dd),Mu[it](ke,Qe),Mu[it](We,At),Xe=bt,it=ke,St=Qe,255&(_t=z>>0)&&(170&_t?Id(Xe,256,it,St):Eu(Xe,256,it,St)),_t=We,Xe=At,255&(z>>=8)&&(170&z?Id(bt,320,_t,Xe):Eu(bt,320,_t,Xe)),me<A.Ub-1&&(i(rt[It].y,0,be,Ce+480,16),i(rt[It].f,0,ke,Qe+224,8),i(rt[It].ea,0,We,At+224,8)),rt=A.sa,It=A.ta+16*X+16*ge*A.R,bt=A.qa,_t=A.ra+8*X+(z=8*ge*A.B),Xe=A.Ha,it=A.Ia+8*X+z,z=0;16>z;++z)i(rt,It+z*A.R,be,Ce+32*z,16);for(z=0;8>z;++z)i(bt,_t+z*A.B,ke,Qe+32*z,8),i(Xe,it+z*A.B,We,At+32*z,8)}}function Zh(A,P,z,X,me,ge,be,Ce,ke){var Qe=[0],We=[0],At=0,_t=null!=ke?ke.kd:0,rt=ke??new G_;if(null==A||12>z)return 7;rt.data=A,rt.w=P,rt.ha=z,P=[P],z=[z],rt.gb=[rt.gb];e:{var It=P,bt=z,Xe=rt.gb;if(o(null!=A),o(null!=bt),o(null!=Xe),Xe[0]=0,12<=bt[0]&&!t(A,It[0],"RIFF")){if(t(A,It[0]+8,"WEBP")){Xe=3;break e}var it=tn(A,It[0]+4);if(12>it||4294967286<it){Xe=3;break e}if(_t&&it>bt[0]-8){Xe=7;break e}Xe[0]=it,It[0]+=12,bt[0]-=12}Xe=0}if(0!=Xe)return Xe;for(it=0<rt.gb[0],z=z[0];;){e:{var St=A;bt=P,Xe=z;var Ft=Qe,Ot=We,fn=It=[0];if((rn=At=[At])[0]=0,8>Xe[0])Xe=7;else{if(!t(St,bt[0],"VP8X")){if(10!=tn(St,bt[0]+4)){Xe=3;break e}if(18>Xe[0]){Xe=7;break e}var Xt=tn(St,bt[0]+8),jn=1+nn(St,bt[0]+12);if(2147483648<=jn*(St=1+nn(St,bt[0]+15))){Xe=3;break e}null!=fn&&(fn[0]=Xt),null!=Ft&&(Ft[0]=jn),null!=Ot&&(Ot[0]=St),bt[0]+=18,Xe[0]-=18,rn[0]=1}Xe=0}}if(At=At[0],0!=Xe)return Xe;if(bt=!!(2&(It=It[0])),!it&&At)return 3;if(null!=ge&&(ge[0]=!!(16&It)),null!=be&&(be[0]=bt),null!=Ce&&(Ce[0]=0),be=Qe[0],It=We[0],At&&bt&&null==ke){Xe=0;break}if(4>z){Xe=7;break}if(it&&At||!it&&!At&&!t(A,P[0],"ALPH")){z=[z],rt.na=[rt.na],rt.P=[rt.P],rt.Sa=[rt.Sa];e:{Xe=P,it=z;var rn=rt.gb;Ft=rt.na,Ot=rt.P,fn=rt.Sa,jn=22,o(null!=(Xt=A)),o(null!=it),St=Xe[0];var $i=it[0];for(o(null!=Ft),o(null!=fn),Ft[0]=null,Ot[0]=null,fn[0]=0;;){if(Xe[0]=St,it[0]=$i,8>$i){Xe=7;break e}var ao=tn(Xt,St+4);if(4294967286<ao){Xe=3;break e}var Ui=8+ao+1&-2;if(jn+=Ui,0<rn&&jn>rn){Xe=3;break e}if(!t(Xt,St,"VP8 ")||!t(Xt,St,"VP8L")){Xe=0;break e}if($i[0]<Ui){Xe=7;break e}t(Xt,St,"ALPH")||(Ft[0]=Xt,Ot[0]=St+8,fn[0]=ao),St+=Ui,$i-=Ui}}if(z=z[0],rt.na=rt.na[0],rt.P=rt.P[0],rt.Sa=rt.Sa[0],0!=Xe)break}z=[z],rt.Ja=[rt.Ja],rt.xa=[rt.xa];e:if(rn=A,Xe=P,it=z,Ft=rt.gb[0],Ot=rt.Ja,fn=rt.xa,Xt=Xe[0],St=!t(rn,Xt,"VP8 "),jn=!t(rn,Xt,"VP8L"),o(null!=rn),o(null!=it),o(null!=Ot),o(null!=fn),8>it[0])Xe=7;else{if(St||jn){if(rn=tn(rn,Xt+4),12<=Ft&&rn>Ft-12){Xe=3;break e}if(_t&&rn>it[0]-8){Xe=7;break e}Ot[0]=rn,Xe[0]+=8,it[0]-=8,fn[0]=jn}else fn[0]=5<=it[0]&&47==rn[Xt+0]&&!(rn[Xt+4]>>5),Ot[0]=it[0];Xe=0}if(z=z[0],rt.Ja=rt.Ja[0],rt.xa=rt.xa[0],P=P[0],0!=Xe)break;if(4294967286<rt.Ja)return 3;if(null==Ce||bt||(Ce[0]=rt.xa?2:1),be=[be],It=[It],rt.xa){if(5>z){Xe=7;break}Ce=be,_t=It,bt=ge,null==A||5>z?A=0:5<=z&&47==A[P+0]&&!(A[P+4]>>5)?(it=[0],rn=[0],Ft=[0],Je(Ot=new ue,A,P,z),zn(Ot,it,rn,Ft)?(null!=Ce&&(Ce[0]=it[0]),null!=_t&&(_t[0]=rn[0]),null!=bt&&(bt[0]=Ft[0]),A=1):A=0):A=0}else{if(10>z){Xe=7;break}Ce=It,null==A||10>z||!G1(A,P+3,z-3)?A=0:(_t=A[P+0]|A[P+1]<<8|A[P+2]<<16,bt=16383&(A[P+7]<<8|A[P+6]),A=16383&(A[P+9]<<8|A[P+8]),1&_t||3<(_t>>1&7)||!(_t>>4&1)||_t>>5>=rt.Ja||!bt||!A?A=0:(be&&(be[0]=bt),Ce&&(Ce[0]=A),A=1))}if(!A||(be=be[0],It=It[0],At&&(Qe[0]!=be||We[0]!=It)))return 3;null!=ke&&(ke[0]=rt,ke.offset=P-ke.w,o(4294967286>P-ke.w),o(ke.offset==ke.ha-z));break}return 0==Xe||7==Xe&&At&&null==ke?(null!=ge&&(ge[0]|=null!=rt.na&&0<rt.na.length),null!=X&&(X[0]=be),null!=me&&(me[0]=It),0):Xe}function ef(A,P,z){var X=P.width,me=P.height,ge=0,be=0,Ce=X,ke=me;if(P.Da=null!=A&&0<A.Da,P.Da&&(Ce=A.cd,ke=A.bd,ge=A.v,be=A.j,11>z||(ge&=-2,be&=-2),0>ge||0>be||0>=Ce||0>=ke||ge+Ce>X||be+ke>me))return 0;if(P.v=ge,P.j=be,P.va=ge+Ce,P.o=be+ke,P.U=Ce,P.T=ke,P.da=null!=A&&0<A.da,P.da){if(!En(Ce,ke,z=[A.ib],ge=[A.hb]))return 0;P.ib=z[0],P.hb=ge[0]}return P.ob=null!=A&&A.ob,P.Kb=null==A||!A.Sd,P.da&&(P.ob=P.ib<3*X/4&&P.hb<3*me/4,P.Kb=0),1}function tf(A){if(null==A)return 2;if(11>A.S){var P=A.f.RGBA;P.fb+=(A.height-1)*P.A,P.A=-P.A}else(P=A.f.kb).O+=((A=A.height)-1)*P.fa,P.fa=-P.fa,P.N+=(A-1>>1)*P.Ab,P.Ab=-P.Ab,P.W+=(A-1>>1)*P.Db,P.Db=-P.Db,null!=P.F&&(P.J+=(A-1)*P.lb,P.lb=-P.lb);return 0}function Dh(A,P,z,X){if(null==X||0>=A||0>=P)return 2;if(null!=z){if(z.Da){var me=z.cd,ge=z.bd,be=-2&z.v,Ce=-2&z.j;if(0>be||0>Ce||0>=me||0>=ge||be+me>A||Ce+ge>P)return 2;A=me,P=ge}if(z.da){if(!En(A,P,me=[z.ib],ge=[z.hb]))return 2;A=me[0],P=ge[0]}}X.width=A,X.height=P;e:{var ke=X.width,Qe=X.height;if(A=X.S,0>=ke||0>=Qe||!(A>=A0&&13>A))A=2;else{if(0>=X.Rd&&null==X.sd){be=ge=me=P=0;var We=(Ce=ke*b4[A])*Qe;if(11>A||(ge=(Qe+1)/2*(P=(ke+1)/2),12==A&&(be=(me=ke)*Qe)),null==(Qe=r(We+2*ge+be))){A=1;break e}X.sd=Qe,11>A?((ke=X.f.RGBA).eb=Qe,ke.fb=0,ke.A=Ce,ke.size=We):((ke=X.f.kb).y=Qe,ke.O=0,ke.fa=Ce,ke.Fd=We,ke.f=Qe,ke.N=0+We,ke.Ab=P,ke.Cd=ge,ke.ea=Qe,ke.W=0+We+ge,ke.Db=P,ke.Ed=ge,12==A&&(ke.F=Qe,ke.J=0+We+2*ge),ke.Tc=be,ke.lb=me)}if(P=1,ge=X.width,be=X.height,(me=X.S)>=A0&&13>me)if(11>me)A=X.f.RGBA,P&=(Ce=Math.abs(A.A))*(be-1)+ge<=A.size,P&=Ce>=ge*b4[me],P&=null!=A.eb;else{A=X.f.kb,Ce=(ge+1)/2,We=(be+1)/2,ke=Math.abs(A.fa),Qe=Math.abs(A.Ab);var At=Math.abs(A.Db),_t=Math.abs(A.lb);P&=ke*(be-1)+ge<=A.Fd,P&=Qe*(We-1)+Ce<=A.Cd,P=(P&=At*(We-1)+Ce<=A.Ed)&ke>=ge&Qe>=Ce&At>=Ce,P&=null!=A.y,P&=null!=A.f,P&=null!=A.ea,12==me&&(P&=_t>=ge,P&=_t*(be-1)+ge<=A.Tc,P&=null!=A.F)}else P=0;A=P?0:2}}return 0!=A||null!=z&&z.fd&&(A=tf(X)),A}var Kr=64,Uh=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],jh=24,qh=32,nf=8,Gr=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Vt("Predictor0","PredictorAdd0"),te.Predictor0=function(){return 4278190080},te.Predictor1=function(A){return A},te.Predictor2=function(A,P,z){return P[z+0]},te.Predictor3=function(A,P,z){return P[z+1]},te.Predictor4=function(A,P,z){return P[z-1]},te.Predictor5=function(A,P,z){return Wt(Wt(A,P[z+1]),P[z+0])},te.Predictor6=function(A,P,z){return Wt(A,P[z-1])},te.Predictor7=function(A,P,z){return Wt(A,P[z+0])},te.Predictor8=function(A,P,z){return Wt(P[z-1],P[z+0])},te.Predictor9=function(A,P,z){return Wt(P[z+0],P[z+1])},te.Predictor10=function(A,P,z){return Wt(Wt(A,P[z-1]),Wt(P[z+0],P[z+1]))},te.Predictor11=function(A,P,z){var X=P[z+0];return 0>=ei(X>>24&255,A>>24&255,(P=P[z-1])>>24&255)+ei(X>>16&255,A>>16&255,P>>16&255)+ei(X>>8&255,A>>8&255,P>>8&255)+ei(255&X,255&A,255&P)?X:A},te.Predictor12=function(A,P,z){var X=P[z+0];return(On((A>>24&255)+(X>>24&255)-((P=P[z-1])>>24&255))<<24|On((A>>16&255)+(X>>16&255)-(P>>16&255))<<16|On((A>>8&255)+(X>>8&255)-(P>>8&255))<<8|On((255&A)+(255&X)-(255&P)))>>>0},te.Predictor13=function(A,P,z){var X=P[z-1];return(Gn((A=Wt(A,P[z+0]))>>24&255,X>>24&255)<<24|Gn(A>>16&255,X>>16&255)<<16|Gn(A>>8&255,X>>8&255)<<8|Gn(A>>0&255,X>>0&255))>>>0};var Vb=te.PredictorAdd0;te.PredictorAdd1=gi,Vt("Predictor2","PredictorAdd2"),Vt("Predictor3","PredictorAdd3"),Vt("Predictor4","PredictorAdd4"),Vt("Predictor5","PredictorAdd5"),Vt("Predictor6","PredictorAdd6"),Vt("Predictor7","PredictorAdd7"),Vt("Predictor8","PredictorAdd8"),Vt("Predictor9","PredictorAdd9"),Vt("Predictor10","PredictorAdd10"),Vt("Predictor11","PredictorAdd11"),Vt("Predictor12","PredictorAdd12"),Vt("Predictor13","PredictorAdd13");var of=te.PredictorAdd2;Si("ColorIndexInverseTransform","MapARGB","32b",function(A){return A>>8&255},function(A){return A}),Si("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(A){return A},function(A){return A>>8&255});var m0,Pl=te.ColorIndexInverseTransform,af=te.MapARGB,Wb=te.VP8LColorIndexInverseTransformAlpha,Xb=te.MapAlpha,Ed=te.VP8LPredictorsAdd=[];Ed.length=16,(te.VP8LPredictors=[]).length=16,(te.VP8LPredictorsAdd_C=[]).length=16,(te.VP8LPredictors_C=[]).length=16;var Xs,Ql,Od,Fc,Su,Rh,Fl,zh,rf,Id,Nl,Eu,Km,Hh,Gm,Md,sf,el,Ou,To,ko,da,Ma,Iu,Ld,Jh,p0,n4,i4=r(511),o4=r(2041),a4=r(225),r4=r(767),s4=0,tv=o4,h0=a4,ws=r4,tl=i4,A0=0,_0=1,l4=2,f0=3,g0=4,nv=5,c4=6,iv=7,ov=8,x0=9,av=10,nX=[2,3,7],iX=[3,3,11],u4=[280,256,256,256,40],oX=[0,1,1,1,0],aX=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],rX=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],sX=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],lX=8,rv=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],sv=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],lf=null,cX=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],uX=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],d4=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],dX=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],mX=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],pX=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],hX=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Bd=[],Zl=[],Mu=[],AX=1,m4=2,Pd=[],nl=[];yt("UpsampleRgbLinePair",Fi,3),yt("UpsampleBgrLinePair",Ho,3),yt("UpsampleRgbaLinePair",Bl,4),yt("UpsampleBgraLinePair",ja,4),yt("UpsampleArgbLinePair",hr,4),yt("UpsampleRgba4444LinePair",xa,2),yt("UpsampleRgb565LinePair",ta,2);var _X=te.UpsampleRgbLinePair,fX=te.UpsampleBgrLinePair,p4=te.UpsampleRgbaLinePair,h4=te.UpsampleBgraLinePair,A4=te.UpsampleArgbLinePair,_4=te.UpsampleRgba4444LinePair,gX=te.UpsampleRgb565LinePair,b0=16,v0=1<<b0-1,cf=-227,lv=482,f4=6,xX=(256<<f4)-1,g4=0,bX=r(256),vX=r(256),wX=r(256),yX=r(256),CX=r(lv-cf),TX=r(lv-cf);ku("YuvToRgbRow",Fi,3),ku("YuvToBgrRow",Ho,3),ku("YuvToRgbaRow",Bl,4),ku("YuvToBgraRow",ja,4),ku("YuvToArgbRow",hr,4),ku("YuvToRgba4444Row",xa,2),ku("YuvToRgb565Row",ta,2);var x4=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],w0=[0,2,8],kX=[8,7,6,4,4,2,2,2,1,1,1,1];this.WebPDecodeRGBA=function(A,P,z,X,me){var ge=_0,be=new Fh,Ce=new kl;be.ba=Ce,Ce.S=ge,Ce.width=[Ce.width],Ce.height=[Ce.height];var ke=Ce.width,Qe=Ce.height,We=new wu;if(null==We||null==A)var At=2;else o(null!=We),At=Zh(A,P,z,We.width,We.height,We.Pd,We.Qd,We.format,null);if(0!=At?ke=0:(null!=ke&&(ke[0]=We.width[0]),null!=Qe&&(Qe[0]=We.height[0]),ke=1),ke){Ce.width=Ce.width[0],Ce.height=Ce.height[0],null!=X&&(X[0]=Ce.width),null!=me&&(me[0]=Ce.height);e:{if(X=new Oh,(me=new G_).data=A,me.w=P,me.ha=z,me.kd=1,P=[0],o(null!=me),(0==(A=Zh(me.data,me.w,me.ha,null,null,null,P,null,me))||7==A)&&P[0]&&(A=4),0==(P=A)){if(o(null!=be),X.data=me.data,X.w=me.w+me.offset,X.ha=me.ha-me.offset,X.put=Ic,X.ac=Xa,X.bc=Mc,X.ma=be,me.xa){if(null==(A=Ws())){be=1;break e}if(function(_t,rt){var It=[0],bt=[0],Xe=[0];t:for(;;){if(null==_t)return 0;if(null==rt)return _t.a=2,0;if(_t.l=rt,_t.a=0,Je(_t.m,rt.data,rt.w,rt.ha),!zn(_t.m,It,bt,Xe)){_t.a=3;break t}if(_t.xb=m4,rt.width=It[0],rt.height=bt[0],!Pc(It[0],bt[0],1,_t,null))break t;return 1}return o(0!=_t.a),0}(A,X)){if(X=0==(P=Dh(X.width,X.height,be.Oa,be.ba))){t:{X=A;n:for(;;){if(null==X){X=0;break t}if(o(null!=X.s.yc),o(null!=X.s.Ya),o(0<X.s.Wb),o(null!=(z=X.l)),o(null!=(me=z.ma)),0!=X.xb){if(X.ca=me.ba,X.tb=me.tb,o(null!=X.ca),!ef(me.Oa,z,f0)){X.a=2;break n}if(!qm(X,z.width)||z.da)break n;if((z.da||to(X.ca.S))&&lt(),11>X.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),null!=X.ca.f.kb.F&&lt()),X.Pb&&0<X.s.ua&&null==X.s.vb.X&&!dn(X.s.vb,X.s.Wa.Xa)){X.a=1;break n}X.xb=0}if(!Il(X,X.V,X.Ba,X.c,X.i,z.o,yh))break n;me.Dc=X.Ma,X=1;break t}o(0!=X.a),X=0}X=!X}X&&(P=A.a)}else P=A.a}else{if(null==(A=new Lb)){be=1;break e}if(A.Fa=me.na,A.P=me.P,A.qc=me.Sa,Y1(A,X)){if(0==(P=Dh(X.width,X.height,be.Oa,be.ba))){if(A.Aa=0,z=be.Oa,o(null!=(me=A)),null!=z){if(0<(ke=0>(ke=z.Md)?0:100<ke?255:255*ke/100)){for(Qe=We=0;4>Qe;++Qe)12>(At=me.pb[Qe]).lc&&(At.ia=ke*kX[0>At.lc?0:At.lc]>>3),We|=At.ia;We&&(alert("todo:VP8InitRandom"),me.ia=1)}me.Ga=z.Id,100<me.Ga?me.Ga=100:0>me.Ga&&(me.Ga=0)}(function Bb(A,P){if(null==A)return 0;if(null==P)return ua(A,2,"NULL VP8Io parameter in VP8Decode().");if(!A.cb&&!Y1(A,P))return 0;if(o(A.cb),null==P.ac||P.ac(P)){P.ob&&(A.L=0);var z=w0[A.L];if(2==A.L?(A.yb=0,A.zb=0):(A.yb=P.v-z>>4,A.zb=P.j-z>>4,0>A.yb&&(A.yb=0),0>A.zb&&(A.zb=0)),A.Va=P.o+15+z>>4,A.Hb=P.va+15+z>>4,A.Hb>A.za&&(A.Hb=A.za),A.Va>A.Ub&&(A.Va=A.Ub),0<A.L){var X=A.ed;for(z=0;4>z;++z){var me;if(A.Qa.Cb){var ge=A.Qa.Lb[z];A.Qa.Fb||(ge+=X.Tb)}else ge=X.Tb;for(me=0;1>=me;++me){var be=A.gd[z][me],Ce=ge;if(X.Pc&&(Ce+=X.vd[0],me&&(Ce+=X.od[0])),0<(Ce=0>Ce?0:63<Ce?63:Ce)){var ke=Ce;0<X.wb&&(ke=4<X.wb?ke>>2:ke>>1)>9-X.wb&&(ke=9-X.wb),1>ke&&(ke=1),be.dd=ke,be.tc=2*Ce+ke,be.ld=40<=Ce?2:15<=Ce?1:0}else be.tc=0;be.La=me}}}z=0}else ua(A,6,"Frame setup failed"),z=A.a;if(z=0==z){if(z){A.$c=0,0<A.Aa||(A.Ic=1);e:{X=4*(ke=A.za);var Qe=32*ke,We=ke+1,At=0<A.L?ke*(0<A.Aa?2:1):0,_t=(2==A.Aa?2:1)*ke;if((be=X+832+(me=3*(16*(z=A.Ic)+w0[A.L])/2*Qe)+(ge=null!=A.Fa&&0<A.Fa.length?A.Kc.c*A.Kc.i:0))!=be)z=0;else{if(be>A.Vb){if(A.Vb=0,A.Ec=r(be),A.Fc=0,null==A.Ec){z=ua(A,1,"no memory during frame initialization.");break e}A.Vb=be}Ce=A.Fc,A.Ac=be=A.Ec,A.Bc=Ce,Ce+=X,A.Gd=s(Qe,K1),A.Hd=0,A.rb=s(We+1,J1),A.sb=1,A.wa=At?s(At,Eh):null,A.Y=0,A.D.Nb=0,A.D.wa=A.wa,A.D.Y=A.Y,0<A.Aa&&(A.D.Y+=ke),o(!0),A.oc=be,A.pc=Ce,Ce+=832,A.ya=s(_t,Z_),A.aa=0,A.D.ya=A.ya,A.D.aa=A.aa,2==A.Aa&&(A.D.aa+=ke),A.R=16*ke,A.B=8*ke,ke=(Qe=w0[A.L])*A.R,Qe=Qe/2*A.B,A.sa=be,A.ta=Ce+ke,A.qa=A.sa,A.ra=A.ta+16*z*A.R+Qe,A.Ha=A.qa,A.Ia=A.ra+8*z*A.B+Qe,A.$c=0,Ce+=me,A.mb=ge?be:null,A.nb=ge?Ce:null,o(Ce+ge<=A.Fc+A.Vb),D_(A),a(A.Ac,A.Bc,0,X),z=1}}if(z){if(P.ka=0,P.y=A.sa,P.O=A.ta,P.f=A.qa,P.N=A.ra,P.ea=A.Ha,P.Vd=A.Ia,P.fa=A.R,P.Rc=A.B,P.F=null,P.J=0,!s4){for(z=-255;255>=z;++z)i4[255+z]=0>z?-z:z;for(z=-1020;1020>=z;++z)o4[1020+z]=-128>z?-128:127<z?127:z;for(z=-112;112>=z;++z)a4[112+z]=-16>z?-16:15<z?15:z;for(z=-255;510>=z;++z)r4[255+z]=0>z?0:255<z?255:z;s4=1}Fl=Fb,zh=Pb,Id=W1,Nl=Qb,Eu=X1,rf=V1,Km=H_,Hh=Hm,Gm=Yb,Md=J_,sf=Gb,el=Qh,Ou=K_,To=c0,ko=l0,da=Tu,Ma=Td,Iu=Kb,Zl[0]=Qc,Zl[1]=Nb,Zl[2]=jb,Zl[3]=qb,Zl[4]=n0,Zl[5]=Bh,Zl[6]=o0,Zl[7]=q_,Zl[8]=zb,Zl[9]=Rb,Bd[0]=e0,Bd[1]=Db,Bd[2]=Cu,Bd[3]=Mh,Bd[4]=pr,Bd[5]=Ub,Bd[6]=t0,Mu[0]=Cd,Mu[1]=Zb,Mu[2]=Hb,Mu[3]=R_,Mu[4]=zm,Mu[5]=Jb,Mu[6]=z_,z=1}else z=0}z&&(z=function(rt,It){for(rt.M=0;rt.M<rt.Va;++rt.M){var bt,Xe=rt.Jc[rt.M&rt.Xb],it=rt.m,St=rt;for(bt=0;bt<St.za;++bt){var Ft=it,Ot=St,fn=Ot.Ac,Xt=Ot.Bc+4*bt,jn=Ot.zc,rn=Ot.ya[Ot.aa+bt];if(rn.$b=Ot.Qa.Bb?dt(Ft,Ot.Pa.jb[0])?2+dt(Ft,Ot.Pa.jb[2]):dt(Ft,Ot.Pa.jb[1]):0,Ot.kc&&(rn.Ad=dt(Ft,Ot.Bd)),rn.Za=!dt(Ft,145)+0,rn.Za){var $i=rn.Ob,ao=0;for(Ot=0;4>Ot;++Ot){var Ui,Li=jn[0+Ot];for(Ui=0;4>Ui;++Ui){for(var go=d4[dt(Ft,(Li=mX[fn[Xt+Ui]][Li])[0])];0<go;)go=d4[2*go+dt(Ft,Li[go])];fn[Xt+Ui]=Li=-go}i($i,ao,fn,Xt,4),ao+=4,jn[0+Ot]=Li}}else Li=dt(Ft,156)?dt(Ft,128)?1:3:dt(Ft,163)?2:0,rn.Ob[0]=Li,a(fn,Xt,Li,4),a(jn,0,Li,4);rn.Dd=dt(Ft,142)?dt(Ft,114)?dt(Ft,183)?1:3:2:0}if(St.m.Ka)return ua(rt,7,"Premature end-of-partition0 encountered.");for(;rt.ja<rt.za;++rt.ja){if(St=Xe,Ft=(it=rt).rb[it.sb-1],fn=it.rb[it.sb+it.ja],bt=it.ya[it.aa+it.ja],Xt=it.kc?bt.Ad:0)Ft.la=fn.la=0,bt.Za||(Ft.Na=fn.Na=0),bt.Hc=0,bt.Gc=0,bt.ia=0;else{var ho,hi;if(Ft=fn,fn=St,Xt=it.Pa.Xc,rn=it.pb[(jn=it.ya[it.aa+it.ja]).$b],ao=it.rb[it.sb-1],Li=Ui=0,a(Ot=jn.ad,$i=0,0,384),jn.Za)var ba=0,Yr=Xt[3];else{go=r(16);var va=Ft.Na+ao.Na;if(va=lf(fn,Xt[1],va,rn.Eb,0,go,0),Ft.Na=ao.Na=(0<va)+0,1<va)Fl(go,0,Ot,$i);else{var $r=go[0]+3>>3;for(go=0;256>go;go+=16)Ot[$i+go]=$r}ba=1,Yr=Xt[0]}var ro=15&Ft.la,ys=15&ao.la;for(go=0;4>go;++go){var Cs=1&ys;for($r=hi=0;4>$r;++$r)ro=ro>>1|(Cs=(va=lf(fn,Yr,va=Cs+(1&ro),rn.Sc,ba,Ot,$i))>ba)<<7,hi=hi<<2|(3<va?3:1<va?2:0!=Ot[$i+0]),$i+=16;ro>>=4,ys=ys>>1|Cs<<7,Ui=(Ui<<8|hi)>>>0}for(Yr=ro,ba=ys>>4,ho=0;4>ho;ho+=2){for(hi=0,ro=Ft.la>>4+ho,ys=ao.la>>4+ho,go=0;2>go;++go){for(Cs=1&ys,$r=0;2>$r;++$r)ro=ro>>1|(Cs=0<(va=lf(fn,Xt[2],va=Cs+(1&ro),rn.Qc,0,Ot,$i)))<<3,hi=hi<<2|(3<va?3:1<va?2:0!=Ot[$i+0]),$i+=16;ro>>=2,ys=ys>>1|Cs<<5}Li|=hi<<4*ho,Yr|=ro<<4<<ho,ba|=(240&ys)<<ho}Ft.la=Yr,ao.la=ba,jn.Hc=Ui,jn.Gc=Li,jn.ia=43690&Li?0:rn.ia,Xt=!(Ui|Li)}if(0<it.L&&(it.wa[it.Y+it.ja]=it.gd[bt.$b][bt.Za],it.wa[it.Y+it.ja].La|=!Xt),St.Ka)return ua(rt,7,"Premature end-of-file encountered.")}if(D_(rt),it=It,St=1,bt=(Xe=rt).D,Ft=0<Xe.L&&Xe.M>=Xe.zb&&Xe.M<=Xe.Va,0==Xe.Aa)e:{if(bt.M=Xe.M,bt.uc=Ft,X_(Xe,bt),St=1,bt=(hi=Xe.D).Nb,Ft=(Li=w0[Xe.L])*Xe.R,Xt=Xe.sa,jn=Xe.ta-Ft+(go=16*bt*Xe.R),rn=Xe.qa,Ot=Xe.ra-(fn=Li/2*Xe.B)+($r=8*bt*Xe.B),$i=Xe.Ha,ao=Xe.Ia-fn+$r,ys=0==(ro=hi.M),Ui=ro>=Xe.Va-1,2==Xe.Aa&&X_(Xe,hi),hi.uc)for(Cs=(va=Xe).D.M,o(va.D.uc),hi=va.yb;hi<va.Hb;++hi){Yr=Cs;var qa=(er=(na=va).D).Nb,er=er.wa[er.Y+(ba=hi)],Or=na.sa,il=na.ta+16*qa*(ho=na.R)+16*ba,Nc=er.dd,Ra=er.tc;if(0!=Ra)if(o(3<=Ra),1==na.L)0<ba&&da(Or,il,ho,Ra+4),er.La&&Iu(Or,il,ho,Ra),0<Yr&&ko(Or,il,ho,Ra+4),er.La&&Ma(Or,il,ho,Ra);else{var Lu=na.B,Ym=na.qa,Kh=na.ra+8*qa*Lu+8*ba,Qd=na.Ha,na=na.Ia+8*qa*Lu+8*ba;qa=er.ld,0<ba&&(Hh(Or,il,ho,Ra+4,Nc,qa),Md(Ym,Kh,Qd,na,Lu,Ra+4,Nc,qa)),er.La&&(el(Or,il,ho,Ra,Nc,qa),To(Ym,Kh,Qd,na,Lu,Ra,Nc,qa)),0<Yr&&(Km(Or,il,ho,Ra+4,Nc,qa),Gm(Ym,Kh,Qd,na,Lu,Ra+4,Nc,qa)),er.La&&(sf(Or,il,ho,Ra,Nc,qa),Ou(Ym,Kh,Qd,na,Lu,Ra,Nc,qa))}}if(Xe.ia&&alert("todo:DitherRow"),null!=it.put){if(hi=16*ro,ro=16*(ro+1),ys?(it.y=Xe.sa,it.O=Xe.ta+go,it.f=Xe.qa,it.N=Xe.ra+$r,it.ea=Xe.Ha,it.W=Xe.Ia+$r):(hi-=Li,it.y=Xt,it.O=jn,it.f=rn,it.N=Ot,it.ea=$i,it.W=ao),Ui||(ro-=Li),ro>it.o&&(ro=it.o),it.F=null,it.J=null,null!=Xe.Fa&&0<Xe.Fa.length&&hi<ro&&(it.J=V_(Xe,it,hi,ro-hi),it.F=Xe.mb,null==it.F&&0==it.F.length)){St=ua(Xe,3,"Could not decode alpha data.");break e}hi<it.j&&(Li=it.j-hi,hi=it.j,o(!(1&Li)),it.O+=Xe.R*Li,it.N+=Xe.B*(Li>>1),it.W+=Xe.B*(Li>>1),null!=it.F&&(it.J+=it.width*Li)),hi<ro&&(it.O+=it.v,it.N+=it.v>>1,it.W+=it.v>>1,null!=it.F&&(it.J+=it.v),it.ka=hi-it.j,it.U=it.va-it.v,it.T=ro-hi,St=it.put(it))}bt+1!=Xe.Ic||Ui||(i(Xe.sa,Xe.ta-Ft,Xt,jn+16*Xe.R,Ft),i(Xe.qa,Xe.ra-fn,rn,Ot+8*Xe.B,fn),i(Xe.Ha,Xe.Ia-fn,$i,ao+8*Xe.B,fn))}if(!St)return ua(rt,6,"Output aborted.")}return 1}(A,P)),null!=P.bc&&P.bc(P),z&=1}return z?(A.cb=0,z):0})(A,X)||(P=A.a)}}else P=A.a}0==P&&null!=be.Oa&&be.Oa.fd&&(P=tf(be.ba))}be=P}ge=0!=be?null:11>ge?Ce.f.RGBA.eb:Ce.f.kb.y}else ge=null;return ge};var b4=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(te,Se){for(var Ze="",se=0;se<4;se++)Ze+=String.fromCharCode(te[Se++]);return Ze}function m(te,Se){return(te[Se+0]<<0|te[Se+1]<<8|te[Se+2]<<16)>>>0}function p(te,Se){return(te[Se+0]<<0|te[Se+1]<<8|te[Se+2]<<16|te[Se+3]<<24)>>>0}new c;var f=[0],b=[0],L=[],N=new c,R=n,j=function(te,Se){var Ze={},se=0,pe=!1,Be=0,Pe=0;if(Ze.frames=[],!
/** @license
             * Copyright (c) 2017 Dominik Homberger
            Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:
            The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
            THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
            https://webpjs.appspot.com
            WebPRiffParser dominikhlbg@gmail.com
            */
function(Te,Ee,Ue,$e){for(var ut=0;ut<4;ut++)if(Te[Ee+ut]!="RIFF".charCodeAt(ut))return!0;return!1}(te,Se)){var Oe,Fe;for(p(te,Se+=4),Se+=8;Se<te.length;){var Re=u(te,Se),Je=p(te,Se+=4);Se+=4;var Ke=Je+(1&Je);switch(Re){case"VP8 ":case"VP8L":void 0===Ze.frames[se]&&(Ze.frames[se]={}),(ue=Ze.frames[se]).src_off=pe?Pe:Se-8,ue.src_size=Be+Je+8,se++,pe&&(pe=!1,Be=0,Pe=0);break;case"VP8X":(ue=Ze.header={}).feature_flags=te[Se];var et=Se+4;ue.canvas_width=1+m(te,et),ue.canvas_height=1+m(te,et+=3),et+=3;break;case"ALPH":pe=!0,Be=Ke+8,Pe=Se-8;break;case"ANIM":(ue=Ze.header).bgcolor=p(te,Se),ue.loop_count=(Oe=te)[(Fe=et=Se+4)+0]<<0|Oe[Fe+1]<<8,et+=2;break;case"ANMF":var gt,ue;(ue=Ze.frames[se]={}).offset_x=2*m(te,Se),ue.offset_y=2*m(te,Se+=3),ue.width=1+m(te,Se+=3),ue.height=1+m(te,Se+=3),ue.duration=m(te,Se+=3),Se+=3,gt=te[Se++],ue.dispose=1&gt,ue.blend=gt>>1&1}"ANMF"!=Re&&(Se+=Ke)}return Ze}}(R,0);j.response=R,j.rgbaoutput=!0,j.dataurl=!1;var G=j.header?j.header:null,ae=j.frames?j.frames:null;if(G){G.loop_counter=G.loop_count,f=[G.canvas_height],b=[G.canvas_width];for(var W=0;W<ae.length&&0!=ae[W].blend;W++);}var le=ae[0],ve=N.WebPDecodeRGBA(R,le.src_off,le.src_size,b,f);le.rgba=ve,le.imgwidth=b[0],le.imgheight=f[0];for(var ce=0;ce<b[0]*f[0]*4;ce++)L[ce]=ve[ce];return this.width=b,this.height=f,this.data=L,this}(function(n){var t=function(f,b,L,N){var R=4,j=s;switch(N){case n.image_compression.FAST:R=1,j=r;break;case n.image_compression.MEDIUM:R=6,j=l;break;case n.image_compression.SLOW:R=9,j=c}var G=Yu(f=i(f,b,L,j),{level:R});return n.__addimage__.arrayBufferToBinaryString(G)},i=function(f,b,L,N){for(var R,j,G,ae=f.length/b,W=new Uint8Array(f.length+ae),le=m(),ve=0;ve<ae;ve+=1){if(R=f.subarray(G=ve*b,G+b),N)W.set(N(R,L,j),G+ve);else{for(var ce,te=le.length,Se=[];ce<te;ce+=1)Se[ce]=le[ce](R,L,j);var Ze=p(Se.concat());W.set(Se[Ze],G+ve)}j=R}return W},a=function(f){var b=Array.apply([],f);return b.unshift(0),b},r=function(f,b){var N=[],R=f.length;N[0]=1;for(var j=0;j<R;j+=1)N[j+1]=f[j]-(f[j-b]||0)+256&255;return N},s=function(f,b,L){var R=[],j=f.length;R[0]=2;for(var G=0;G<j;G+=1)R[G+1]=f[G]-(L&&L[G]||0)+256&255;return R},l=function(f,b,L){var j=[],G=f.length;j[0]=3;for(var ae=0;ae<G;ae+=1)j[ae+1]=f[ae]+256-((f[ae-b]||0)+(L&&L[ae]||0)>>>1)&255;return j},c=function(f,b,L){var G,ae=[],W=f.length;ae[0]=4;for(var le=0;le<W;le+=1)G=u(f[le-b]||0,L&&L[le]||0,L&&L[le-b]||0),ae[le+1]=f[le]-G+256&255;return ae},u=function(f,b,L){if(f===b&&b===L)return f;var N=Math.abs(b-L),R=Math.abs(f-L),j=Math.abs(f+b-L-L);return N<=R&&N<=j?f:R<=j?b:L},m=function(){return[a,r,s,l,c]},p=function(f){var b=f.map(function(L){return L.reduce(function(N,R){return N+Math.abs(R)},0)});return b.indexOf(Math.min.apply(null,b))};n.processPNG=function(f,b,L,N){var R,j,G,ae,W,le,ve,ce,te,Se,Ze,se,pe,Be,Pe,Oe=this.decode.FLATE_DECODE,Fe="";if(this.__addimage__.isArrayBuffer(f)&&(f=new Uint8Array(f)),this.__addimage__.isArrayBufferView(f)){if(f=(G=new CA(f)).imgData,j=G.bits,R=G.colorSpace,W=G.colors,-1!==[4,6].indexOf(G.colorType)){if(8===G.bits){te=(ce=32==G.pixelBitlength?new Uint32Array(G.decodePixels().buffer):16==G.pixelBitlength?new Uint16Array(G.decodePixels().buffer):new Uint8Array(G.decodePixels().buffer)).length,Ze=new Uint8Array(te*G.colors),Se=new Uint8Array(te);var Re,Je=G.pixelBitlength-G.bits;for(Be=0,Pe=0;Be<te;Be++){for(pe=ce[Be],Re=0;Re<Je;)Ze[Pe++]=pe>>>Re&255,Re+=G.bits;Se[Be]=pe>>>Re&255}}if(16===G.bits){te=(ce=new Uint32Array(G.decodePixels().buffer)).length,Ze=new Uint8Array(te*(32/G.pixelBitlength)*G.colors),Se=new Uint8Array(te*(32/G.pixelBitlength)),se=G.colors>1,Be=0,Pe=0;for(var Ke=0;Be<te;)pe=ce[Be++],Ze[Pe++]=pe>>>0&255,se&&(Ze[Pe++]=pe>>>16&255,pe=ce[Be++],Ze[Pe++]=pe>>>0&255),Se[Ke++]=pe>>>16&255;j=8}N!==n.image_compression.NONE?(f=t(Ze,G.width*G.colors,G.colors,N),ve=t(Se,G.width,1,N)):(f=Ze,ve=Se,Oe=void 0)}if(3===G.colorType&&(R=this.color_spaces.INDEXED,le=G.palette,G.transparency.indexed)){var et=G.transparency.indexed,gt=0;for(Be=0,te=et.length;Be<te;++Be)gt+=et[Be];if((gt/=255)==te-1&&-1!==et.indexOf(0))ae=[et.indexOf(0)];else if(gt!==te){for(ce=G.decodePixels(),Se=new Uint8Array(ce.length),Be=0,te=ce.length;Be<te;Be++)Se[Be]=et[ce[Be]];ve=t(Se,G.width,1)}}var ue=function(Te){var Ee;switch(Te){case n.image_compression.FAST:Ee=11;break;case n.image_compression.MEDIUM:Ee=13;break;case n.image_compression.SLOW:Ee=14;break;default:Ee=12}return Ee}(N);return Oe===this.decode.FLATE_DECODE&&(Fe="/Predictor "+ue+" "),Fe+="/Colors "+W+" /BitsPerComponent "+j+" /Columns "+G.width,(this.__addimage__.isArrayBuffer(f)||this.__addimage__.isArrayBufferView(f))&&(f=this.__addimage__.arrayBufferToBinaryString(f)),(ve&&this.__addimage__.isArrayBuffer(ve)||this.__addimage__.isArrayBufferView(ve))&&(ve=this.__addimage__.arrayBufferToBinaryString(ve)),{alias:L,data:f,index:b,filter:Oe,decodeParameters:Fe,transparency:ae,palette:le,sMask:ve,predictor:ue,width:G.width,height:G.height,bitsPerComponent:j,colorSpace:R}}}})(In.API),function(n){n.processGIF89A=function(o,t,i,a){var r=new W0(o),s=r.width,l=r.height,c=[];r.decodeAndBlitFrameRGBA(0,c);var u={data:c,width:s,height:l},m=new TA(100).encode(u,100);return n.processJPEG.call(this,m,t,i,a)},n.processGIF87A=n.processGIF89A}(In.API),ls.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,16===this.bitPP&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=0===this.colors?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var o=0;o<n;o++){var t=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0);this.palette[o]={red:a,green:i,blue:t,quad:r}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},ls.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP;this.data=new Uint8Array(this.width*this.height*4),this[n]()}catch(t){io.log("bit decode error:"+t)}},ls.prototype.bit1=function(){var n,o=Math.ceil(this.width/8),t=o%4;for(n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,a=0;a<o;a++)for(var r=this.datav.getUint8(this.pos++,!0),s=i*this.width*4+8*a*4,l=0;l<8&&8*a+l<this.width;l++){var c=this.palette[r>>7-l&1];this.data[s+4*l]=c.blue,this.data[s+4*l+1]=c.green,this.data[s+4*l+2]=c.red,this.data[s+4*l+3]=255}0!==t&&(this.pos+=4-t)}},ls.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),o=n%4,t=this.height-1;t>=0;t--){for(var i=this.bottom_up?t:this.height-1-t,a=0;a<n;a++){var r=this.datav.getUint8(this.pos++,!0),s=i*this.width*4+2*a*4,c=15&r,u=this.palette[r>>4];if(this.data[s]=u.blue,this.data[s+1]=u.green,this.data[s+2]=u.red,this.data[s+3]=255,2*a+1>=this.width)break;this.data[s+4]=(u=this.palette[c]).blue,this.data[s+4+1]=u.green,this.data[s+4+2]=u.red,this.data[s+4+3]=255}0!==o&&(this.pos+=4-o)}},ls.prototype.bit8=function(){for(var n=this.width%4,o=this.height-1;o>=0;o--){for(var t=this.bottom_up?o:this.height-1-o,i=0;i<this.width;i++){var a=this.datav.getUint8(this.pos++,!0),r=t*this.width*4+4*i;if(a<this.palette.length){var s=this.palette[a];this.data[r]=s.red,this.data[r+1]=s.green,this.data[r+2]=s.blue,this.data[r+3]=255}else this.data[r]=255,this.data[r+1]=255,this.data[r+2]=255,this.data[r+3]=255}0!==n&&(this.pos+=4-n)}},ls.prototype.bit15=function(){for(var n=this.width%3,o=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var i=this.bottom_up?t:this.height-1-t,a=0;a<this.width;a++){var r=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(r&o)/o*255|0,l=(r>>5&o)/o*255|0,u=r>>15?255:0,m=i*this.width*4+4*a;this.data[m]=(r>>10&o)/o*255|0,this.data[m+1]=l,this.data[m+2]=s,this.data[m+3]=u}this.pos+=n}},ls.prototype.bit16=function(){for(var n=this.width%3,o=parseInt("11111",2),t=parseInt("111111",2),i=this.height-1;i>=0;i--){for(var a=this.bottom_up?i:this.height-1-i,r=0;r<this.width;r++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(s&o)/o*255|0,c=(s>>5&t)/t*255|0,m=a*this.width*4+4*r;this.data[m]=(s>>11)/o*255|0,this.data[m+1]=c,this.data[m+2]=l,this.data[m+3]=255}this.pos+=n}},ls.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var o=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),s=o*this.width*4+4*t;this.data[s]=r,this.data[s+1]=a,this.data[s+2]=i,this.data[s+3]=255}this.pos+=this.width%4}},ls.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var o=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),l=o*this.width*4+4*t;this.data[l]=r,this.data[l+1]=a,this.data[l+2]=i,this.data[l+3]=s}},ls.prototype.getData=function(){return this.data},
/**
       * @license
       * Copyright (c) 2018 Aras Abbasi
       *
       * Licensed under the MIT License.
       * http://opensource.org/licenses/mit-license
       */
function(n){n.processBMP=function(o,t,i,a){var r=new ls(o,!1),s=r.width,l=r.height,c={data:r.getData(),width:s,height:l},u=new TA(100).encode(c,100);return n.processJPEG.call(this,u,t,i,a)}}(In.API),Df.prototype.getData=function(){return this.data},
/**
       * @license
       * Copyright (c) 2019 Aras Abbasi
       *
       * Licensed under the MIT License.
       * http://opensource.org/licenses/mit-license
       */
function(n){n.processWEBP=function(o,t,i,a){var r=new Df(o,!1),s=r.width,l=r.height,c={data:r.getData(),width:s,height:l},u=new TA(100).encode(c,100);return n.processJPEG.call(this,u,t,i,a)}}(In.API),In.API.processRGBA=function(n,o,t){for(var i=n.data,a=i.length,r=new Uint8Array(a/4*3),s=new Uint8Array(a/4),l=0,c=0,u=0;u<a;u+=4){var p=i[u+1],f=i[u+2],b=i[u+3];r[l++]=i[u],r[l++]=p,r[l++]=f,s[c++]=b}var L=this.__addimage__.arrayBufferToBinaryString(r);return{alpha:this.__addimage__.arrayBufferToBinaryString(s),data:L,index:o,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},In.API.setLanguage=function(n){return void 0===this.internal.languageSettings&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),void 0!=={af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]&&(this.internal.languageSettings.languageCode=n,!1===this.internal.languageSettings.isSubscribed&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},nd=(ac=In.API).getCharWidthsArray=function(n,o){var t,i,a=(o=o||{}).font||this.internal.getFont(),r=o.fontSize||this.internal.getFontSize(),s=o.charSpace||this.internal.getCharSpace(),l=o.widths?o.widths:a.metadata.Unicode.widths,c=l.fof?l.fof:1,u=o.kerning?o.kerning:a.metadata.Unicode.kerning,m=u.fof?u.fof:1,p=!1!==o.doKerning,f=0,b=n.length,L=0,N=l[0]||c,R=[];for(t=0;t<b;t++)i=n.charCodeAt(t),"function"==typeof a.metadata.widthOfString?R.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(i))+s*(1e3/r)||0)/1e3):(f=p&&"object"===(0,yi.Z)(u[i])&&!isNaN(parseInt(u[i][L],10))?u[i][L]/m:0,R.push((l[i]||N)/c+f)),L=i;return R},Ff=ac.getStringUnitWidth=function(n,o){var t=(o=o||{}).fontSize||this.internal.getFontSize(),i=o.font||this.internal.getFont(),a=o.charSpace||this.internal.getCharSpace();return ac.processArabic&&(n=ac.processArabic(n)),"function"==typeof i.metadata.widthOfString?i.metadata.widthOfString(n,t,a)/t:nd.apply(this,arguments).reduce(function(r,s){return r+s},0)},yA=function(n,o,t,i){for(var a=[],r=0,s=n.length,l=0;r!==s&&l+o[r]<t;)l+=o[r],r++;a.push(n.slice(0,r));var c=r;for(l=0;r!==s;)l+o[r]>i&&(a.push(n.slice(c,r)),l=0,c=r),l+=o[r],r++;return c!==r&&a.push(n.slice(c,r)),a},Nf=function(n,o,t){t||(t={});var i,a,r,s,l,c,m=[],p=[m],f=t.textIndent||0,b=0,L=0,N=n.split(" "),R=nd.apply(this,[" ",t])[0];if(c=-1===t.lineIndent?N[0].length+2:t.lineIndent||0){var j=Array(c).join(" "),G=[];N.map(function(W){(W=W.split(/\s*\n/)).length>1?G=G.concat(W.map(function(le,ve){return(ve&&le.length?"\n":"")+le})):G.push(W[0])}),N=G,c=Ff.apply(this,[j,t])}for(r=0,s=N.length;r<s;r++){var ae=0;if(i=N[r],c&&"\n"==i[0]&&(i=i.substr(1),ae=1),f+b+(L=(a=nd.apply(this,[i,t])).reduce(function(W,le){return W+le},0))>o||ae){if(L>o){for(l=yA.apply(this,[i,a,o-(f+b),o]),m.push(l.shift()),m=[l.pop()];l.length;)p.push([l.shift()]);L=a.slice(i.length-(m[0]?m[0].length:0)).reduce(function(W,le){return W+le},0)}else m=[i];p.push(m),f=L+c,b=R}else m.push(i),f+=b+L,b=R}return p.map(c?function(W,le){return(le?j:"")+W.join(" ")}:function(W){return W.join(" ")})},ac.splitTextToSize=function(n,o,t){var i,a=(t=t||{}).fontSize||this.internal.getFontSize(),r=function(m){if(m.widths&&m.kerning)return{widths:m.widths,kerning:m.kerning};var p=this.internal.getFont(m.fontName,m.fontStyle);return p.metadata.Unicode?{widths:p.metadata.Unicode.widths||{0:1},kerning:p.metadata.Unicode.kerning||{}}:{font:p.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,t);i=Array.isArray(n)?n:String(n).split(/\r?\n/);var s=1*this.internal.scaleFactor*o/a;r.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/a:0,r.lineIndent=t.lineIndent;var l,c,u=[];for(l=0,c=i.length;l<c;l++)u=u.concat(Nf.apply(this,[i[l],s,r]));return u},function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var o="klmnopqrstuvwxyz",t={},i={},a=0;a<16;a++)t[o[a]]="0123456789abcdef"[a],i["0123456789abcdef"[a]]=o[a];var r=function(p){return"0x"+parseInt(p,10).toString(16)},s=n.__fontmetrics__.compress=function(p){var f,b,L,N,R=["{"];for(var j in p){if(f=p[j],isNaN(parseInt(j,10))?b="'"+j+"'":(j=parseInt(j,10),b=(b=r(j).slice(2)).slice(0,-1)+i[b.slice(-1)]),"number"==typeof f)f<0?(L=r(f).slice(3),N="-"):(L=r(f).slice(2),N=""),L=N+L.slice(0,-1)+i[L.slice(-1)];else{if("object"!==(0,yi.Z)(f))throw new Error("Don't know what to do with value type "+(0,yi.Z)(f)+".");L=s(f)}R.push(b+L)}return R.push("}"),R.join("")},l=n.__fontmetrics__.uncompress=function(p){if("string"!=typeof p)throw new Error("Invalid argument passed to uncompress.");for(var f,b,L,N,R={},j=1,G=R,ae=[],W="",le="",ve=p.length-1,ce=1;ce<ve;ce+=1)"'"==(N=p[ce])?f?(L=f.join(""),f=void 0):f=[]:f?f.push(N):"{"==N?(ae.push([G,L]),G={},L=void 0):"}"==N?((b=ae.pop())[0][b[1]]=G,L=void 0,G=b[0]):"-"==N?j=-1:void 0===L?t.hasOwnProperty(N)?(W+=t[N],L=parseInt(W,16)*j,j=1,W=""):W+=N:t.hasOwnProperty(N)?(le+=t[N],G[L]=parseInt(le,16)*j,j=1,L=void 0,le=""):le+=N;return R},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},m={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(p){var f=p.font,b=m.Unicode[f.postScriptName];b&&(f.metadata.Unicode={},f.metadata.Unicode.widths=b.widths,f.metadata.Unicode.kerning=b.kerning);var L=u.Unicode[f.postScriptName];L&&(f.metadata.Unicode.encoding=L,f.encoding=L.codePages[0])}])}(In.API),
/**
       * @license
       * Licensed under the MIT License.
       * http://opensource.org/licenses/mit-license
       */
function(n){var o=function(t){for(var i=t.length,a=new Uint8Array(i),r=0;r<i;r++)a[r]=t.charCodeAt(r);return a};n.API.events.push(["addFont",function(t){var s,l,i=void 0,a=t.font,r=t.instance;if(!a.isStandardFont){if(void 0===r)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if("string"!=typeof(i=!1===r.existsFileInVFS(a.postScriptName)?r.loadFile(a.postScriptName):r.getFileFromVFS(a.postScriptName)))throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");s=a,l=/^\x00\x01\x00\x00/.test(l=i)?o(l):o(em(l)),s.metadata=n.API.TTFFont.open(l),s.metadata.Unicode=s.metadata.Unicode||{encoding:{},kerning:{},widths:[]},s.metadata.glyIdsUsed=[0]}}])}(In),In.API.addSvgAsImage=function(t,i,a,r,s,l,c,u){if(isNaN(i)||isNaN(a))throw io.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(s))throw io.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var m=document.createElement("canvas");m.width=r,m.height=s;var p=m.getContext("2d");p.fillStyle="#fff",p.fillRect(0,0,m.width,m.height);var f={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},b=this;return function o(){return(Qn.canvg?Promise.resolve(Qn.canvg):I.e(4153).then(I.bind(I,64153))).catch(function(t){return Promise.reject(new Error("Could not load canvg: "+t))}).then(function(t){return t.default?t.default:t})}().then(function(L){return L.fromString(p,t,f)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(L){return L.render(f)}).then(function(){b.addImage(m.toDataURL("image/jpeg",1),i,a,r,s,c,u)})},In.API.putTotalPages=function(n){var o,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(o=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(o=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var i=1;i<=this.internal.getNumberOfPages();i++)for(var a=0;a<this.internal.pages[i].length;a++)this.internal.pages[i][a]=this.internal.pages[i][a].replace(o,t);return this},In.API.viewerPreferences=function(n,o){var t;n=n||{},o=o||!1;var i,a,r,s={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(s),c=[],u=0,m=0,p=0;function f(L,N){var R,j=!1;for(R=0;R<L.length;R+=1)L[R]===N&&(j=!0);return j}if(void 0===this.internal.viewerpreferences&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(s)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,"reset"===n||!0===o){var b=l.length;for(p=0;p<b;p+=1)t[l[p]].value=t[l[p]].defaultValue,t[l[p]].explicitSet=!1}if("object"===(0,yi.Z)(n))for(a in n)if(r=n[a],f(l,a)&&void 0!==r){if("boolean"===t[a].type&&"boolean"==typeof r)t[a].value=r;else if("name"===t[a].type&&f(t[a].valueSet,r))t[a].value=r;else if("integer"===t[a].type&&Number.isInteger(r))t[a].value=r;else if("array"===t[a].type){for(u=0;u<r.length;u+=1)if(i=!0,1===r[u].length&&"number"==typeof r[u][0])c.push(String(r[u]-1));else if(r[u].length>1){for(m=0;m<r[u].length;m+=1)"number"!=typeof r[u][m]&&(i=!1);!0===i&&c.push([r[u][0]-1,r[u][1]-1].join(" "))}t[a].value="["+c.join(" ")+"]"}else t[a].value=t[a].defaultValue;t[a].explicitSet=!0}return!1===this.internal.viewerpreferences.isSubscribed&&(this.internal.events.subscribe("putCatalog",function(){var L,N=[];for(L in t)!0===t[L].explicitSet&&N.push("name"===t[L].type?"/"+L+" /"+t[L].value:"/"+L+" "+t[L].value);0!==N.length&&this.internal.write("/ViewerPreferences\n<<\n"+N.join("\n")+"\n>>")}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},
/** ====================================================================
       * @license
       * jsPDF XMP metadata plugin
       * Copyright (c) 2016 Jussi Utunen, u-jussi@suomi24.fi
       *
       * Permission is hereby granted, free of charge, to any person obtaining
       * a copy of this software and associated documentation files (the
       * "Software"), to deal in the Software without restriction, including
       * without limitation the rights to use, copy, modify, merge, publish,
       * distribute, sublicense, and/or sell copies of the Software, and to
       * permit persons to whom the Software is furnished to do so, subject to
       * the following conditions:
       *
       * The above copyright notice and this permission notice shall be
       * included in all copies or substantial portions of the Software.
       *
       * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
       * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
       * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
       * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
       * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
       * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
       * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
       * ====================================================================
       */
function(n){var o=function(){var i='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),r=unescape(encodeURIComponent(i)),s=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),u=r.length+s.length+l.length+a.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(a+r+s+l+c),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(i,a){return void 0===this.internal.__metadata__&&(this.internal.__metadata__={metadata:i,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",o)),this}}(In.API),function(n){var o=n.API,t=o.pdfEscape16=function(r,s){for(var l,c=s.metadata.Unicode.widths,u=["","0","00","000","0000"],m=[""],p=0,f=r.length;p<f;++p){if(l=s.metadata.characterToGlyph(r.charCodeAt(p)),s.metadata.glyIdsUsed.push(l),s.metadata.toUnicode[l]=r.charCodeAt(p),-1==c.indexOf(l)&&(c.push(l),c.push([parseInt(s.metadata.widthOfGlyph(l),10)])),"0"==l)return m.join("");l=l.toString(16),m.push(u[4-l.length],l)}return m.join("")},i=function(r){var s,l,c,u,m,p,f;for(m="/CIDInit /ProcSet findresource begin\n12 dict begin\nbegincmap\n/CIDSystemInfo <<\n  /Registry (Adobe)\n  /Ordering (UCS)\n  /Supplement 0\n>> def\n/CMapName /Adobe-Identity-UCS def\n/CMapType 2 def\n1 begincodespacerange\n<0000><ffff>\nendcodespacerange",c=[],p=0,f=(l=Object.keys(r).sort(function(b,L){return b-L})).length;p<f;p++)s=l[p],c.length>=100&&(m+="\n"+c.length+" beginbfchar\n"+c.join("\n")+"\nendbfchar",c=[]),null!=r[s]&&"function"==typeof r[s].toString&&(u=("0000"+r[s].toString(16)).slice(-4),s=("0000"+(+s).toString(16)).slice(-4),c.push("<"+s+"><"+u+">"));return c.length&&(m+="\n"+c.length+" beginbfchar\n"+c.join("\n")+"\nendbfchar\n"),m+"endcmap\nCMapName currentdict /CMap defineresource pop\nend\nend"};o.events.push(["putFont",function(r){!function(s){var l=s.font,c=s.out,u=s.newObject,m=s.putStream;if(l.metadata instanceof n.API.TTFFont&&"Identity-H"===l.encoding){for(var p=l.metadata.Unicode.widths,f=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),b="",L=0;L<f.length;L++)b+=String.fromCharCode(f[L]);var N=u();m({data:b,addLength1:!0,objectId:N}),c("endobj");var R=u();m({data:i(l.metadata.toUnicode),addLength1:!0,objectId:R}),c("endobj");var j=u();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+Vu(l.fontName)),c("/FontFile2 "+N+" 0 R"),c("/FontBBox "+n.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var G=u();c("<<"),c("/Type /Font"),c("/BaseFont /"+Vu(l.fontName)),c("/FontDescriptor "+j+" 0 R"),c("/W "+n.API.PDFObject.convert(p)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=u(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+R+" 0 R"),c("/BaseFont /"+Vu(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+G+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}}(r)}]),o.events.push(["putFont",function(r){!function(s){var l=s.font,c=s.out,u=s.newObject,m=s.putStream;if(l.metadata instanceof n.API.TTFFont&&"WinAnsiEncoding"===l.encoding){for(var p=l.metadata.rawData,f="",b=0;b<p.length;b++)f+=String.fromCharCode(p[b]);var L=u();m({data:f,addLength1:!0,objectId:L}),c("endobj");var N=u();m({data:i(l.metadata.toUnicode),addLength1:!0,objectId:N}),c("endobj");var R=u();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+L+" 0 R"),c("/Flags 96"),c("/FontBBox "+n.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+Vu(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=u();for(var j=0;j<l.metadata.hmtx.widths.length;j++)l.metadata.hmtx.widths[j]=parseInt(l.metadata.hmtx.widths[j]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+N+" 0 R/BaseFont/"+Vu(l.fontName)+"/FontDescriptor "+R+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}}(r)}]);var a=function(r){var s,l=r.text||"",c=r.x,u=r.y,m=r.options||{},p=r.mutex||{},f=p.pdfEscape,b=p.activeFontKey,L=p.fonts,N=b,R="",j=0,G="",ae=L[N].encoding;if("Identity-H"!==L[N].encoding)return{text:l,x:c,y:u,options:m,mutex:p};for(G=l,N=b,Array.isArray(l)&&(G=l[0]),j=0;j<G.length;j+=1)L[N].metadata.hasOwnProperty("cmap")&&(s=L[N].metadata.cmap.unicode.codeMap[G[j].charCodeAt(0)]),s||G[j].charCodeAt(0)<256&&L[N].metadata.hasOwnProperty("Unicode")?R+=G[j]:R+="";var W="";return parseInt(N.slice(1))<14||"WinAnsiEncoding"===ae?W=f(R,N).split("").map(function(le){return le.charCodeAt(0).toString(16)}).join(""):"Identity-H"===ae&&(W=t(R,L[N])),p.isHex=!0,{text:W,x:c,y:u,options:m,mutex:p}};o.events.push(["postProcessText",function(r){var s=r.text||"",l=[],c={text:s,x:r.x,y:r.y,options:r.options,mutex:r.mutex};if(Array.isArray(s)){var u=0;for(u=0;u<s.length;u+=1)Array.isArray(s[u])&&3===s[u].length?l.push([a(Object.assign({},c,{text:s[u][0]})).text,s[u][1],s[u][2]]):l.push(a(Object.assign({},c,{text:s[u]})).text);r.text=l}else r.text=a(Object.assign({},c,{text:s})).text}])}(In),
/**
       * @license
       * jsPDF virtual FileSystem functionality
       *
       * Licensed under the MIT License.
       * http://opensource.org/licenses/mit-license
       */
function(n){var o=function(){return void 0===this.internal.vFS&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return o.call(this),void 0!==this.internal.vFS[t]},n.addFileToVFS=function(t,i){return o.call(this),this.internal.vFS[t]=i,this},n.getFileFromVFS=function(t){return o.call(this),void 0!==this.internal.vFS[t]?this.internal.vFS[t]:null}}(In.API),
/**
       * @license
       * Unicode Bidi Engine based on the work of Alex Shensis (@asthensis)
       * MIT License
       */
function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(i){var a,r,s,l,c,u,m,p=o,f=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],b=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],L={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},N={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},R=["(",")","(","<",">","<","[","]","[","{","}","{","\xab","\xbb","\xab","\u2039","\u203a","\u2039","\u2045","\u2046","\u2045","\u207d","\u207e","\u207d","\u208d","\u208e","\u208d","\u2264","\u2265","\u2264","\u2329","\u232a","\u2329","\ufe59","\ufe5a","\ufe59","\ufe5b","\ufe5c","\ufe5b","\ufe5d","\ufe5e","\ufe5d","\ufe64","\ufe65","\ufe64"],j=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),G=!1,ae=0;this.__bidiEngine__={};var W=function(se){var pe=se.charCodeAt(),Be=pe>>8,Pe=N[Be];return void 0!==Pe?p[256*Pe+(255&pe)]:252===Be||253===Be?"AL":j.test(Be)?"L":8===Be?"R":"N"},le=function(se){for(var pe,Be=0;Be<se.length;Be++){if("L"===(pe=W(se.charAt(Be))))return!1;if("R"===pe)return!0}return!1},ve=function(se,pe,Be,Pe){var Oe,Fe,Re,Je,Ke=pe[Pe];switch(Ke){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":G=!1;break;case"N":case"AN":break;case"EN":G&&(Ke="AN");break;case"AL":G=!0,Ke="R";break;case"WS":case"BN":Ke="N";break;case"CS":Pe<1||Pe+1>=pe.length||"EN"!==(Oe=Be[Pe-1])&&"AN"!==Oe||"EN"!==(Fe=pe[Pe+1])&&"AN"!==Fe?Ke="N":G&&(Fe="AN"),Ke=Fe===Oe?Fe:"N";break;case"ES":Ke="EN"===(Oe=Pe>0?Be[Pe-1]:"B")&&Pe+1<pe.length&&"EN"===pe[Pe+1]?"EN":"N";break;case"ET":if(Pe>0&&"EN"===Be[Pe-1]){Ke="EN";break}if(G){Ke="N";break}for(Re=Pe+1,Je=pe.length;Re<Je&&"ET"===pe[Re];)Re++;Ke=Re<Je&&"EN"===pe[Re]?"EN":"N";break;case"NSM":if(s&&!l){for(Je=pe.length,Re=Pe+1;Re<Je&&"NSM"===pe[Re];)Re++;if(Re<Je){var et=se[Pe];if(Oe=pe[Re],(et>=1425&&et<=2303||64286===et)&&("R"===Oe||"AL"===Oe)){Ke="R";break}}}Ke=Pe<1||"B"===(Oe=pe[Pe-1])?"N":Be[Pe-1];break;case"B":G=!1,a=!0,Ke=ae;break;case"S":r=!0,Ke="N"}return Ke},ce=function(se,pe,Be){var Pe=se.split("");return Be&&te(Pe,Be,{hiLevel:ae}),Pe.reverse(),pe&&pe.reverse(),Pe.join("")},te=function(se,pe,Be){var Pe,Oe,Fe,Re,Je,Ke=-1,et=se.length,gt=0,ue=[],Te=ae?b:f,Ee=[];for(G=!1,a=!1,r=!1,Oe=0;Oe<et;Oe++)Ee[Oe]=W(se[Oe]);for(Fe=0;Fe<et;Fe++){if(Je=gt,ue[Fe]=ve(se,Ee,ue,Fe),Pe=240&(gt=Te[Je][L[ue[Fe]]]),pe[Fe]=Re=Te[gt&=15][5],Pe>0)if(16===Pe){for(Oe=Ke;Oe<Fe;Oe++)pe[Oe]=1;Ke=-1}else Ke=-1;if(Te[gt][6])-1===Ke&&(Ke=Fe);else if(Ke>-1){for(Oe=Ke;Oe<Fe;Oe++)pe[Oe]=Re;Ke=-1}"B"===Ee[Fe]&&(pe[Fe]=0),Be.hiLevel|=Re}r&&function(Ue,$e,ut){for(var st=0;st<ut;st++)if("S"===Ue[st]){$e[st]=ae;for(var dt=st-1;dt>=0&&"WS"===Ue[dt];dt--)$e[dt]=ae}}(Ee,pe,et)},Se=function(se,pe,Be,Pe,Oe){if(!(Oe.hiLevel<se)){if(1===se&&1===ae&&!a)return pe.reverse(),void(Be&&Be.reverse());for(var Fe,Re,Je,Ke,et=pe.length,gt=0;gt<et;){if(Pe[gt]>=se){for(Je=gt+1;Je<et&&Pe[Je]>=se;)Je++;for(Ke=gt,Re=Je-1;Ke<Re;Ke++,Re--)Fe=pe[Ke],pe[Ke]=pe[Re],pe[Re]=Fe,Be&&(Fe=Be[Ke],Be[Ke]=Be[Re],Be[Re]=Fe);gt=Je}gt++}}},Ze=function(se,pe,Be){var Pe=se.split(""),Oe={hiLevel:ae};return Be||(Be=[]),te(Pe,Be,Oe),function(Fe,Re,Je){if(0!==Je.hiLevel&&m)for(var Ke,et=0;et<Fe.length;et++)1===Re[et]&&(Ke=R.indexOf(Fe[et]))>=0&&(Fe[et]=R[Ke+1])}(Pe,Be,Oe),Se(2,Pe,pe,Be,Oe),Se(1,Pe,pe,Be,Oe),Pe.join("")};return this.__bidiEngine__.doBidiReorder=function(se,pe,Be){if(function(Oe,Fe){if(Fe)for(var Re=0;Re<Oe.length;Re++)Fe[Re]=Re;void 0===l&&(l=le(Oe)),void 0===u&&(u=le(Oe))}(se,pe),s||!c||u)if(s&&c&&l^u)ae=l?1:0,se=ce(se,pe,Be);else if(!s&&c&&u)ae=l?1:0,se=Ze(se,pe,Be),se=ce(se,pe);else if(!s||l||c||u){if(s&&!c&&l^u)se=ce(se,pe),l?(ae=0,se=Ze(se,pe,Be)):(ae=1,se=Ze(se,pe,Be),se=ce(se,pe));else if(s&&l&&!c&&u)ae=1,se=Ze(se,pe,Be),se=ce(se,pe);else if(!s&&!c&&l^u){var Pe=m;l?(ae=1,se=Ze(se,pe,Be),ae=0,m=!1,se=Ze(se,pe,Be),m=Pe):(ae=0,se=Ze(se,pe,Be),se=ce(se,pe),ae=1,m=!1,se=Ze(se,pe,Be),m=Pe,se=ce(se,pe))}}else ae=0,se=Ze(se,pe,Be);else ae=l?1:0,se=Ze(se,pe,Be);return se},this.__bidiEngine__.setOptions=function(se){se&&(s=se.isInputVisual,c=se.isOutputVisual,l=se.isInputRtl,u=se.isOutputRtl,m=se.isSymmetricSwapping)},this.__bidiEngine__.setOptions(i),this.__bidiEngine__};var o=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(i){var a=i.text,r=i.options||{},s=[];if(r.isInputVisual="boolean"!=typeof r.isInputVisual||r.isInputVisual,t.setOptions(r),"[object Array]"===Object.prototype.toString.call(a)){var l=0;for(s=[],l=0;l<a.length;l+=1)"[object Array]"===Object.prototype.toString.call(a[l])?s.push([t.doBidiReorder(a[l][0]),a[l][1],a[l][2]]):s.push([t.doBidiReorder(a[l])]);i.text=s}else i.text=t.doBidiReorder(a);t.setOptions({isInputVisual:!0})}])}(In),In.API.TTFFont=function(){function n(o){var t;if(this.rawData=o,t=this.contents=new rc(o),this.contents.pos=4,"ttcf"===t.readString(4))throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new Kf(this),this.registerTTF()}return n.open=function(o){return new n(o)},n.prototype.parse=function(){return this.directory=new X0(this.contents),this.head=new ex(this),this.name=new EA(this),this.cmap=new kA(this),this.toUnicode={},this.hhea=new tx(this),this.maxp=new qf(this),this.hmtx=new Rf(this),this.post=new nx(this),this.os2=new Op(this),this.loca=new Jf(this),this.glyf=new Hf(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var t,i,a,r;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var s,l,c,u;for(u=[],s=0,l=(c=this.bbox).length;s<l;s++)u.push(Math.round(c[s]*this.scaleFactor));return u}.call(this),this.stemV=0,this.post.exists?(i=255&(a=this.post.italic_angle),32768&(t=a>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+i)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=1===(r=this.familyClass)||2===r||3===r||4===r||5===r||7===r,this.isScript=10===this.familyClass,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),0!==this.italicAngle&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(o){var t;return(null!=(t=this.cmap.unicode)?t.codeMap[o]:void 0)||0},n.prototype.widthOfGlyph=function(o){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(o).advance*t},n.prototype.widthOfString=function(o,t,i){var a,r,s,l;for(s=0,r=0,l=(o=""+o).length;0<=l?r<l:r>l;r=0<=l?++r:--r)a=o.charCodeAt(r),s+=this.widthOfGlyph(this.characterToGlyph(a))+i*(1e3/t)||0;return s*(t/1e3)},n.prototype.lineHeight=function(o,t){return null==t&&(t=!1),(this.ascender+(t?this.lineGap:0)-this.decender)/1e3*o},n}();var cs,rc=function(){function n(o){this.data=o??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(o){return this.data[this.pos++]=o},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(o){return this.writeByte(o>>>24&255),this.writeByte(o>>16&255),this.writeByte(o>>8&255),this.writeByte(255&o)},n.prototype.readInt32=function(){var o;return(o=this.readUInt32())>=2147483648?o-4294967296:o},n.prototype.writeInt32=function(o){return o<0&&(o+=4294967296),this.writeUInt32(o)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(o){return this.writeByte(o>>8&255),this.writeByte(255&o)},n.prototype.readInt16=function(){var o;return(o=this.readUInt16())>=32768?o-65536:o},n.prototype.writeInt16=function(o){return o<0&&(o+=65536),this.writeUInt16(o)},n.prototype.readString=function(o){var t,i;for(i=[],t=0;0<=o?t<o:t>o;t=0<=o?++t:--t)i[t]=String.fromCharCode(this.readByte());return i.join("")},n.prototype.writeString=function(o){var t,i,a;for(a=[],t=0,i=o.length;0<=i?t<i:t>i;t=0<=i?++t:--t)a.push(this.writeByte(o.charCodeAt(t)));return a},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(o){return this.writeInt16(o)},n.prototype.readLongLong=function(){var o,t,i,a,r,s,l,c;return o=this.readByte(),t=this.readByte(),i=this.readByte(),a=this.readByte(),r=this.readByte(),s=this.readByte(),l=this.readByte(),c=this.readByte(),128&o?-1*(72057594037927940*(255^o)+281474976710656*(255^t)+1099511627776*(255^i)+4294967296*(255^a)+16777216*(255^r)+65536*(255^s)+256*(255^l)+(255^c)+1):72057594037927940*o+281474976710656*t+1099511627776*i+4294967296*a+16777216*r+65536*s+256*l+c},n.prototype.writeLongLong=function(o){var t,i;return t=Math.floor(o/4294967296),i=4294967295&o,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(i>>24&255),this.writeByte(i>>16&255),this.writeByte(i>>8&255),this.writeByte(255&i)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(o){return this.writeInt32(o)},n.prototype.read=function(o){var t,i;for(t=[],i=0;0<=o?i<o:i>o;i=0<=o?++i:--i)t.push(this.readByte());return t},n.prototype.write=function(o){var i,a,r;for(r=[],i=0,a=o.length;i<a;i++)r.push(this.writeByte(o[i]));return r},n}(),X0=function(){var n;function o(t){var i,a,r;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},a=0,r=this.tableCount;0<=r?a<r:a>r;a=0<=r?++a:--a)i={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[i.tag]=i}return o.prototype.encode=function(t){var i,a,s,l,c,u,m,p,f,b,L,N;for(N in b=Object.keys(t).length,c=Math.log(2),p=16*Math.floor(Math.log(b)/c),s=Math.floor(p/c),m=16*b-p,(a=new rc).writeInt(this.scalarType),a.writeShort(b),a.writeShort(p),a.writeShort(s),a.writeShort(m),u=a.pos+16*b,l=null,L=[],t)for(f=t[N],a.writeString(N),a.writeInt(n(f)),a.writeInt(u),a.writeInt(f.length),L=L.concat(f),"head"===N&&(l=u),u+=f.length;u%4;)L.push(0),u++;return a.write(L),i=2981146554-n(a.data),a.pos=l+8,a.writeUInt32(i),a.data},n=function(t){var i,a,r,s;for(t=zf.call(t);t.length%4;)t.push(0);for(r=new rc(t),a=0,i=0,s=t.length;i<s;i=i+=4)a+=r.readUInt32();return 4294967295&a},o}(),Uf={}.hasOwnProperty,Fs=function(n,o){for(var t in o)Uf.call(o,t)&&(n[t]=o[t]);function i(){this.constructor=n}return i.prototype=o.prototype,n.prototype=new i,n.__super__=o.prototype,n};cs=function(){function n(o){var t;this.file=o,this.exists=!!(t=this.file.directory.tables[this.tag]),t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n}();var ex=function(n){function o(){return o.__super__.constructor.apply(this,arguments)}return Fs(o,cs),o.prototype.tag="head",o.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},o.prototype.encode=function(t){var i;return(i=new rc).writeInt(this.version),i.writeInt(this.revision),i.writeInt(this.checkSumAdjustment),i.writeInt(this.magicNumber),i.writeShort(this.flags),i.writeShort(this.unitsPerEm),i.writeLongLong(this.created),i.writeLongLong(this.modified),i.writeShort(this.xMin),i.writeShort(this.yMin),i.writeShort(this.xMax),i.writeShort(this.yMax),i.writeShort(this.macStyle),i.writeShort(this.lowestRecPPEM),i.writeShort(this.fontDirectionHint),i.writeShort(t),i.writeShort(this.glyphDataFormat),i.data},o}(),jf=function(){function n(o,t){var i,a,r,s,l,c,u,m,p,f,b,L,N,R,j,G,ae;switch(this.platformID=o.readUInt16(),this.encodingID=o.readShort(),this.offset=t+o.readInt(),p=o.pos,o.pos=this.offset,this.format=o.readUInt16(),this.length=o.readUInt16(),this.language=o.readUInt16(),this.isUnicode=3===this.platformID&&1===this.encodingID&&4===this.format||0===this.platformID&&4===this.format,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=o.readByte();break;case 4:for(b=o.readUInt16(),f=b/2,o.pos+=6,r=function(){var W,le;for(le=[],c=W=0;0<=f?W<f:W>f;c=0<=f?++W:--W)le.push(o.readUInt16());return le}(),o.pos+=2,N=function(){var W,le;for(le=[],c=W=0;0<=f?W<f:W>f;c=0<=f?++W:--W)le.push(o.readUInt16());return le}(),u=function(){var W,le;for(le=[],c=W=0;0<=f?W<f:W>f;c=0<=f?++W:--W)le.push(o.readUInt16());return le}(),m=function(){var W,le;for(le=[],c=W=0;0<=f?W<f:W>f;c=0<=f?++W:--W)le.push(o.readUInt16());return le}(),a=(this.length-o.pos+this.offset)/2,l=function(){var W,le;for(le=[],c=W=0;0<=a?W<a:W>a;c=0<=a?++W:--W)le.push(o.readUInt16());return le}(),c=j=0,ae=r.length;j<ae;c=++j)for(R=r[c],i=G=L=N[c];L<=R?G<=R:G>=R;i=L<=R?++G:--G)0===m[c]?s=i+u[c]:0!==(s=l[m[c]/2+(i-L)-(f-c)]||0)&&(s+=u[c]),this.codeMap[i]=65535&s}o.pos=p}return n.encode=function(o,t){var i,a,r,s,l,c,u,m,p,f,b,L,N,R,j,G,ae,le,ve,ce,te,Se,Ze,se,pe,Be,Pe,Oe,Fe,Re,Je,Ke,et,gt,ue,Te,Ee,Ue,$e,ut,st,dt,Rt,Qt,nn;switch(Pe=new rc,s=Object.keys(o).sort(function(tn,dn){return tn-dn}),t){case"macroman":for(N=0,R=function(){var tn=[];for(L=0;L<256;++L)tn.push(0);return tn}(),G={0:0},r={},Oe=0,Ke=s.length;Oe<Ke;Oe++)null==G[dt=o[a=s[Oe]]]&&(G[dt]=++N),r[a]={old:o[a],new:G[o[a]]},R[a]=G[o[a]];return Pe.writeUInt16(1),Pe.writeUInt16(0),Pe.writeUInt32(12),Pe.writeUInt16(0),Pe.writeUInt16(262),Pe.writeUInt16(0),Pe.write(R),{charMap:r,subtable:Pe.data,maxGlyphID:N+1};case"unicode":for(pe=[],p=[],ae=0,G={},i={},j=u=null,Fe=0,et=s.length;Fe<et;Fe++)null==G[le=o[a=s[Fe]]]&&(G[le]=++ae),i[a]={old:le,new:G[le]},l=G[le]-a,null!=j&&l===u||(j&&p.push(j),pe.push(a),u=l),j=a;for(j&&p.push(j),p.push(65535),pe.push(65535),Ze=2*(Se=pe.length),te=2*Math.pow(Math.log(Se)/Math.LN2,2),f=Math.log(te/2)/Math.LN2,ce=2*Se-te,c=[],ve=[],b=[],L=Re=0,gt=pe.length;Re<gt;L=++Re){if(m=p[L],65535===(se=pe[L])){c.push(0),ve.push(0);break}if(se-(Be=i[se].new)>=32768)for(c.push(0),ve.push(2*(b.length+Se-L)),a=Je=se;se<=m?Je<=m:Je>=m;a=se<=m?++Je:--Je)b.push(i[a].new);else c.push(Be-se),ve.push(0)}for(Pe.writeUInt16(3),Pe.writeUInt16(1),Pe.writeUInt32(12),Pe.writeUInt16(4),Pe.writeUInt16(16+8*Se+2*b.length),Pe.writeUInt16(0),Pe.writeUInt16(Ze),Pe.writeUInt16(te),Pe.writeUInt16(f),Pe.writeUInt16(ce),ut=0,ue=p.length;ut<ue;ut++)Pe.writeUInt16(a=p[ut]);for(Pe.writeUInt16(0),st=0,Te=pe.length;st<Te;st++)Pe.writeUInt16(a=pe[st]);for(Rt=0,Ee=c.length;Rt<Ee;Rt++)Pe.writeUInt16(l=c[Rt]);for(Qt=0,Ue=ve.length;Qt<Ue;Qt++)Pe.writeUInt16(ve[Qt]);for(nn=0,$e=b.length;nn<$e;nn++)Pe.writeUInt16(N=b[nn]);return{charMap:i,subtable:Pe.data,maxGlyphID:ae+1}}},n}(),kA=function(n){function o(){return o.__super__.constructor.apply(this,arguments)}return Fs(o,cs),o.prototype.tag="cmap",o.prototype.parse=function(t){var i,a,r;for(t.pos=this.offset,this.version=t.readUInt16(),r=t.readUInt16(),this.tables=[],this.unicode=null,a=0;0<=r?a<r:a>r;a=0<=r?++a:--a)i=new jf(t,this.offset),this.tables.push(i),i.isUnicode&&null==this.unicode&&(this.unicode=i);return!0},o.encode=function(t,i){var a,r;return null==i&&(i="macroman"),a=jf.encode(t,i),(r=new rc).writeUInt16(0),r.writeUInt16(1),a.table=r.data.concat(a.subtable),a},o}(),tx=function(n){function o(){return o.__super__.constructor.apply(this,arguments)}return Fs(o,cs),o.prototype.tag="hhea",o.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},o}(),Op=function(n){function o(){return o.__super__.constructor.apply(this,arguments)}return Fs(o,cs),o.prototype.tag="OS/2",o.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var i,a;for(a=[],i=0;i<10;++i)a.push(t.readByte());return a}(),this.charRange=function(){var i,a;for(a=[],i=0;i<4;++i)a.push(t.readInt());return a}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var i,a;for(a=[],i=0;i<2;i=++i)a.push(t.readInt());return a}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},o}(),nx=function(n){function o(){return o.__super__.constructor.apply(this,arguments)}return Fs(o,cs),o.prototype.tag="post",o.prototype.parse=function(t){var i,a,r;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:case 196608:break;case 131072:var s;for(a=t.readUInt16(),this.glyphNameIndex=[],s=0;0<=a?s<a:s>a;s=0<=a?++s:--s)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],r=[];t.pos<this.offset+this.length;)i=t.readByte(),r.push(this.names.push(t.readString(i)));return r;case 151552:return a=t.readUInt16(),this.offsets=t.read(a);case 262144:return this.map=function(){var l,c,u;for(u=[],s=l=0,c=this.file.maxp.numGlyphs;0<=c?l<c:l>c;s=0<=c?++l:--l)u.push(t.readUInt32());return u}.call(this)}},o}(),SA=function(n,o){this.raw=n,this.length=n.length,this.platformID=o.platformID,this.encodingID=o.encodingID,this.languageID=o.languageID},EA=function(n){function o(){return o.__super__.constructor.apply(this,arguments)}return Fs(o,cs),o.prototype.tag="name",o.prototype.parse=function(t){var i,a,r,s,l,c,u,m,p,f,b;for(t.pos=this.offset,t.readShort(),i=t.readShort(),c=t.readShort(),a=[],s=0;0<=i?s<i:s>i;s=0<=i?++s:--s)a.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+c+t.readShort()});for(u={},s=p=0,f=a.length;p<f;s=++p)t.pos=(r=a[s]).offset,m=t.readString(r.length),l=new SA(m,r),null==u[b=r.nameID]&&(u[b]=[]),u[r.nameID].push(l);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},o}(),qf=function(n){function o(){return o.__super__.constructor.apply(this,arguments)}return Fs(o,cs),o.prototype.tag="maxp",o.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},o}(),Rf=function(n){function o(){return o.__super__.constructor.apply(this,arguments)}return Fs(o,cs),o.prototype.tag="hmtx",o.prototype.parse=function(t){var i,a,r,l,c,u;for(t.pos=this.offset,this.metrics=[],i=0,c=this.file.hhea.numberOfMetrics;0<=c?i<c:i>c;i=0<=c?++i:--i)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(r=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var m,p;for(p=[],i=m=0;0<=r?m<r:m>r;i=0<=r?++m:--m)p.push(t.readInt16());return p}(),this.widths=function(){var m,p,f,b;for(b=[],m=0,p=(f=this.metrics).length;m<p;m++)b.push(f[m].advance);return b}.call(this),a=this.widths[this.widths.length-1],u=[],i=l=0;0<=r?l<r:l>r;i=0<=r?++l:--l)u.push(this.widths.push(a));return u},o.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},o}(),zf=[].slice,Hf=function(n){function o(){return o.__super__.constructor.apply(this,arguments)}return Fs(o,cs),o.prototype.tag="glyf",o.prototype.parse=function(){return this.cache={}},o.prototype.glyphFor=function(t){var i,a,r,s,l,c,u,m,p,f;return t in this.cache?this.cache[t]:(i=this.file.contents,a=(s=this.file.loca).indexOf(t),0===(r=s.lengthOf(t))?this.cache[t]=null:(i.pos=this.offset+a,l=(c=new rc(i.read(r))).readShort(),m=c.readShort(),f=c.readShort(),u=c.readShort(),p=c.readShort(),this.cache[t]=-1===l?new IA(c,m,f,u,p):new OA(c,l,m,f,u,p),this.cache[t]))},o.prototype.encode=function(t,i,a){var r,s,l,c,u;for(l=[],s=[],c=0,u=i.length;c<u;c++)r=t[i[c]],s.push(l.length),r&&(l=l.concat(r.encode(a)));return s.push(l.length),{table:l,offsets:s}},o}(),OA=function(){function n(o,t,i,a,r,s){this.raw=o,this.numberOfContours=t,this.xMin=i,this.yMin=a,this.xMax=r,this.yMax=s,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n}(),IA=function(){function n(o,t,i,a,r){var s,l;for(this.raw=o,this.xMin=t,this.yMin=i,this.xMax=a,this.yMax=r,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],s=this.raw;l=s.readShort(),this.glyphOffsets.push(s.pos),this.glyphIDs.push(s.readUInt16()),32&l;)s.pos+=1&l?4:2,128&l?s.pos+=8:64&l?s.pos+=4:8&l&&(s.pos+=2)}return n.prototype.encode=function(){var o,t,i;for(t=new rc(zf.call(this.raw.data)),o=0,i=this.glyphIDs.length;o<i;++o)t.pos=this.glyphOffsets[o];return t.data},n}(),Jf=function(n){function o(){return o.__super__.constructor.apply(this,arguments)}return Fs(o,cs),o.prototype.tag="loca",o.prototype.parse=function(t){var a;return t.pos=this.offset,this.offsets=0===this.file.head.indexToLocFormat?function(){var r,s;for(s=[],a=0,r=this.length;a<r;a+=2)s.push(2*t.readUInt16());return s}.call(this):function(){var r,s;for(s=[],a=0,r=this.length;a<r;a+=4)s.push(t.readUInt32());return s}.call(this)},o.prototype.indexOf=function(t){return this.offsets[t]},o.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},o.prototype.encode=function(t,i){for(var a=new Uint32Array(this.offsets.length),r=0,s=0,l=0;l<a.length;++l)if(a[l]=r,s<i.length&&i[s]==l){++s,a[l]=r;var u=this.offsets[l+1]-this.offsets[l];u>0&&(r+=u)}for(var m=new Array(4*a.length),p=0;p<a.length;++p)m[4*p+3]=255&a[p],m[4*p+2]=(65280&a[p])>>8,m[4*p+1]=(16711680&a[p])>>16,m[4*p]=(4278190080&a[p])>>24;return m},o}(),Kf=function(){function n(o){this.font=o,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var o,t,a,r;for(t in a=this.font.cmap.tables[0].codeMap,o={},r=this.subset)o[t]=a[r[t]];return o},n.prototype.glyphsFor=function(o){var t,i,a,r,s,l,c;for(a={},s=0,l=o.length;s<l;s++)a[r=o[s]]=this.font.glyf.glyphFor(r);for(r in t=[],a)null!=(i=a[r])&&i.compound&&t.push.apply(t,i.glyphIDs);if(t.length>0)for(r in c=this.glyphsFor(t))a[r]=i=c[r];return a},n.prototype.encode=function(o,t){var i,a,r,s,c,u,m,p,f,b,L,N,R,j;for(a in i=kA.encode(this.generateCmap(),"unicode"),s=this.glyphsFor(o),b={0:0},j=i.charMap)b[(c=j[a]).old]=c.new;for(L in f=i.maxGlyphID,s)L in b||(b[L]=f++);return m=function(G){var ae,W;for(ae in W={},G)W[G[ae]]=ae;return W}(b),p=Object.keys(m).sort(function(G,ae){return G-ae}),N=function(){var G,ae,W;for(W=[],G=0,ae=p.length;G<ae;G++)W.push(m[p[G]]);return W}(),r=this.font.glyf.encode(s,N,b),u=this.font.loca.encode(r.offsets,N),R={cmap:this.font.cmap.raw(),glyf:r.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(R["OS/2"]=this.font.os2.raw()),this.font.directory.encode(R)},n}();In.API.PDFObject=function(){var n;function o(){}return n=function(t,i){return(Array(i+1).join("0")+t).slice(-i)},o.convert=function(t){var a,r;if(Array.isArray(t))return"["+function(){var l,c,u;for(u=[],l=0,c=t.length;l<c;l++)u.push(o.convert(t[l]));return u}().join(" ")+"]";if("string"==typeof t)return"/"+t;if(t?.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if("[object Object]"==={}.toString.call(t)){for(a in r=["<<"],t)r.push("/"+a+" "+o.convert(t[a]));return r.push(">>"),r.join("\n")}return""+t},o}();const Gf=In;var Yf=I(28485),Ip=I.n(Yf),ix=I(16930),ox=I.n(ix),ax=I(47e3),Nr=I.n(ax),MA=function(n){var t,f,o=n,i={a:0,b:0,c:0},a=[];return t=function(f,b){var L,N,R,j,G,ae;if(f.test(o))for(N=0,R=(L=o.match(f)).length;N<R;N+=1)i[b]+=1,G=o.indexOf(j=L[N]),a.push({selector:n.substr(G,ae=j.length),type:b,index:G,length:ae}),o=o.replace(j,Array(ae+1).join(" "))},(f=function(R){var j,G,ae,W;if(R.test(o))for(G=0,ae=(j=o.match(R)).length;G<ae;G+=1)o=o.replace(W=j[G],Array(W.length+1).join("A"))})(/\\[0-9A-Fa-f]{6}\s?/g),f(/\\[0-9A-Fa-f]{1,5}\s/g),f(/\\./g),function(){var b,L,N,R,f=/{[^]*/gm;if(f.test(o))for(L=0,N=(b=o.match(f)).length;L<N;L+=1)o=o.replace(R=b[L],Array(R.length+1).join(" "))}(),t(/(\[[^\]]+\])/g,"b"),t(/(#[^\#\s\+>~\.\[:\)]+)/g,"a"),t(/(\.[^\s\+>~\.\[:\)]+)/g,"b"),t(/(::[^\s\+>~\.\[:]+|:first-line|:first-letter|:before|:after)/gi,"c"),t(/(:(?!not|global|local)[\w-]+\([^\)]*\))/gi,"b"),t(/(:(?!not|global|local)[^\s\+>~\.\[:]+)/g,"b"),o=(o=(o=(o=(o=(o=o.replace(/[\*\s\+>~]/g," ")).replace(/[#\.]/g," ")).replace(/:not/g,"    ")).replace(/:local/g,"      ")).replace(/:global/g,"       ")).replace(/[\(\)]/g," "),t(/([^\s\+>~\.\[:]+)/g,"c"),a.sort(function(f,b){return f.index-b.index}),{selector:n,specificity:"0,"+i.a.toString()+","+i.b.toString()+","+i.c.toString(),specificityArray:[0,i.a,i.b,i.c],parts:a}},Vf=function(n,o){return(Vf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var a in i)i.hasOwnProperty(a)&&(t[a]=i[a])})(n,o)};function oo(n,o){function t(){this.constructor=n}Vf(n,o),n.prototype=null===o?Object.create(o):(t.prototype=o.prototype,new t)}var LA=function(){return(LA=Object.assign||function(n){for(var o,t=1,i=arguments.length;t<i;t++)for(var a in o=arguments[t])Object.prototype.hasOwnProperty.call(o,a)&&(n[a]=o[a]);return n}).apply(this,arguments)};function lo(n,o,t,i){return new(t||(t=Promise))(function(a,r){function s(u){try{c(i.next(u))}catch(m){r(m)}}function l(u){try{c(i.throw(u))}catch(m){r(m)}}function c(u){var m;u.done?a(u.value):(m=u.value,m instanceof t?m:new t(function(p){p(m)})).then(s,l)}c((i=i.apply(n,o||[])).next())})}function co(n,o){var t,i,a,r,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(c){return function(u){return function(m){if(t)throw new TypeError("Generator is already executing.");for(;s;)try{if(t=1,i&&(a=2&m[0]?i.return:m[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,m[1])).done)return a;switch(i=0,a&&(m=[2&m[0],a.value]),m[0]){case 0:case 1:a=m;break;case 4:return s.label++,{value:m[1],done:!1};case 5:s.label++,i=m[1],m=[0];continue;case 7:m=s.ops.pop(),s.trys.pop();continue;default:if(!((a=(a=s.trys).length>0&&a[a.length-1])||6!==m[0]&&2!==m[0])){s=0;continue}if(3===m[0]&&(!a||m[1]>a[0]&&m[1]<a[3])){s.label=m[1];break}if(6===m[0]&&s.label<a[1]){s.label=a[1],a=m;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(m);break}a[2]&&s.ops.pop(),s.trys.pop();continue}m=o.call(n,s)}catch(p){m=[6,p],i=0}finally{t=a=0}if(5&m[0])throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}([c,u])}}}var Ns=function(){function n(o){if(this.a=void 0,this.r=0,this.g=0,this.b=0,this.simpleColors={},this.colorDefs=[],this.ok=!1,o){for(var t in"#"==o.charAt(0)&&(o=o.substr(1,6)),o=(o=o.replace(/ /g,"")).toLowerCase(),this.simpleColors={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgrey:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",grey:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightslategrey:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"},this.simpleColors)o==t&&(o=this.simpleColors[t]);this.colorDefs=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(c){return[parseInt(c[1]),parseInt(c[2]),parseInt(c[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(c){return[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(c){return[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)]}}];for(var i=0;i<this.colorDefs.length;i++){var r=this.colorDefs[i].process,s=this.colorDefs[i].re.exec(o);if(s){var l=r(s);this.r=l[0],this.g=l[1],this.b=l[2],this.ok=!0}}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b}}return n.prototype.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},n.prototype.toRGBA=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+(this.a||"1")+")"},n.prototype.toHex=function(){var o=this.r.toString(16),t=this.g.toString(16),i=this.b.toString(16);return 1==o.length&&(o="0"+o),1==t.length&&(t="0"+t),1==i.length&&(i="0"+i),"#"+o+t+i},n.prototype.getHelpXML=function(){for(var o=[],t=0;t<this.colorDefs.length;t++)for(var i=this.colorDefs[t].example,a=0;a<i.length;a++)o[o.length]=i[a];for(var r in this.simpleColors)o[o.length]=r;var s=document.createElement("ul");for(s.setAttribute("id","rgbcolor-examples"),t=0;t<o.length;t++)try{var l=document.createElement("li"),c=new n(o[t]),u=document.createElement("div");u.style.cssText="margin: 3px; border: 1px solid black; background:"+c.toHex()+"; color:"+c.toHex(),u.appendChild(document.createTextNode("test"));var m=document.createTextNode(" "+o[t]+" -> "+c.toRGB()+" -> "+c.toHex());l.appendChild(u),l.appendChild(m),s.appendChild(l)}catch{}return s},n}(),Ga=function(){function n(o){this.color=o}return n.prototype.getFillData=function(o,t){return lo(this,void 0,void 0,function(){return co(this,function(i){return[2,void 0]})})},n}(),Wf=function(){function n(){this.xmlSpace="",this.fill=null,this.fillOpacity=1,this.fontFamily="",this.fontSize=16,this.fontStyle="",this.fontWeight="",this.opacity=1,this.stroke=null,this.strokeDasharray=null,this.strokeDashoffset=0,this.strokeLinecap="",this.strokeLinejoin="",this.strokeMiterlimit=4,this.strokeOpacity=1,this.strokeWidth=1,this.alignmentBaseline="",this.textAnchor="",this.visibility="",this.color=null}return n.prototype.clone=function(){var o=new n;return o.xmlSpace=this.xmlSpace,o.fill=this.fill,o.fillOpacity=this.fillOpacity,o.fontFamily=this.fontFamily,o.fontSize=this.fontSize,o.fontStyle=this.fontStyle,o.fontWeight=this.fontWeight,o.opacity=this.opacity,o.stroke=this.stroke,o.strokeDasharray=this.strokeDasharray,o.strokeDashoffset=this.strokeDashoffset,o.strokeLinecap=this.strokeLinecap,o.strokeLinejoin=this.strokeLinejoin,o.strokeMiterlimit=this.strokeMiterlimit,o.strokeOpacity=this.strokeOpacity,o.strokeWidth=this.strokeWidth,o.textAnchor=this.textAnchor,o.alignmentBaseline=this.alignmentBaseline,o.visibility=this.visibility,o.color=this.color,o},n.default=function(){var o=new n;return o.xmlSpace="default",o.fill=new Ga(new Ns("rgb(0, 0, 0)")),o.fillOpacity=1,o.fontFamily="times",o.fontSize=16,o.fontStyle="normal",o.fontWeight="normal",o.opacity=1,o.stroke=null,o.strokeDasharray=null,o.strokeDashoffset=0,o.strokeLinecap="butt",o.strokeLinejoin="miter",o.strokeMiterlimit=4,o.strokeOpacity=1,o.strokeWidth=1,o.alignmentBaseline="baseline",o.textAnchor="start",o.visibility="visible",o.color=new Ns("rgb(0, 0, 0)"),o},n}(),sc=function(){function n(o,t){var i,a,r;this.pdf=o,this.svg2pdfParameters=t.svg2pdfParameters,this.attributeState=t.attributeState?t.attributeState.clone():Wf.default(),this.viewport=t.viewport,this.refsHandler=t.refsHandler,this.styleSheets=t.styleSheets,this.textMeasure=t.textMeasure,this.transform=null!==(i=t.transform)&&void 0!==i?i:this.pdf.unitMatrix,this.withinClipPath=null!==(a=t.withinClipPath)&&void 0!==a&&a,this.withinUse=null!==(r=t.withinUse)&&void 0!==r&&r}return n.prototype.clone=function(o){var t,i,a,r;return void 0===o&&(o={}),new n(this.pdf,{svg2pdfParameters:this.svg2pdfParameters,attributeState:o.attributeState?o.attributeState.clone():this.attributeState.clone(),viewport:null!==(t=o.viewport)&&void 0!==t?t:this.viewport,refsHandler:this.refsHandler,styleSheets:this.styleSheets,textMeasure:this.textMeasure,transform:null!==(i=o.transform)&&void 0!==i?i:this.transform,withinClipPath:null!==(a=o.withinClipPath)&&void 0!==a?a:this.withinClipPath,withinUse:null!==(r=o.withinUse)&&void 0!==r?r:this.withinUse})},n}(),Mp=function(){function n(o){this.renderedElements={},this.idMap=o,this.idPrefix=String(n.instanceCounter++)}return n.prototype.getRendered=function(o,t,i){return lo(this,void 0,void 0,function(){var a,r;return co(this,function(s){switch(s.label){case 0:return a=this.generateKey(o,t),this.renderedElements.hasOwnProperty(a)?[2,this.renderedElements[o]]:(r=this.get(o),this.renderedElements[a]=r,[4,i(r)]);case 1:return s.sent(),[2,r]}})})},n.prototype.get=function(o){return this.idMap[Ip()(o,{isIdentifier:!0})]},n.prototype.generateKey=function(o,t){return this.idPrefix+"|"+o+"|"+(t||new Ns("rgb(0,0,0)")).toRGBA()},n.instanceCounter=0,n}();function BA(n,o){return Math.atan2(o[1]-n[1],o[0]-n[0])}function ha(n,o){return[2/3*(o[0]-n[0])+n[0],2/3*(o[1]-n[1])+n[1]]}function pl(n){var o=Math.sqrt(n[0]*n[0]+n[1]*n[1]);return[n[0]/o,n[1]/o]}function id(n,o){return pl([o[0]-n[0],o[1]-n[1]])}function Lp(n,o){return[n[0]+o[0],n[1]+o[1]]}function Bp(n,o){var t=n[0],i=n[1];return[o.a*t+o.c*i+o.e,o.b*t+o.d*i+o.f]}var lc=function(){function n(){this.segments=[]}return n.prototype.moveTo=function(o,t){return this.segments.push(new Aa(o,t)),this},n.prototype.lineTo=function(o,t){return this.segments.push(new cc(o,t)),this},n.prototype.curveTo=function(o,t,i,a,r,s){return this.segments.push(new Zs(o,t,i,a,r,s)),this},n.prototype.close=function(){return this.segments.push(new PA),this},n.prototype.transform=function(o){this.segments.forEach(function(t){if(t instanceof Aa||t instanceof cc||t instanceof Zs){var i=Bp([t.x,t.y],o);t.x=i[0],t.y=i[1]}if(t instanceof Zs){var a=Bp([t.x1,t.y1],o),r=Bp([t.x2,t.y2],o);t.x1=a[0],t.y1=a[1],t.x2=r[0],t.y2=r[1]}})},n.prototype.draw=function(o){var t=o.pdf;this.segments.forEach(function(i){i instanceof Aa?t.moveTo(i.x,i.y):i instanceof cc?t.lineTo(i.x,i.y):i instanceof Zs?t.curveTo(i.x1,i.y1,i.x2,i.y2,i.x,i.y):t.close()})},n}(),Aa=function(n,o){this.x=n,this.y=o},cc=function(n,o){this.x=n,this.y=o},Zs=function(n,o,t,i,a,r){this.x1=n,this.y1=o,this.x2=t,this.y2=i,this.x=a,this.y=r},PA=function(){};function uc(n,o){return o.split(",").indexOf((n.nodeName||n.tagName).toLowerCase())>=0}function Jt(n,o,t,i){var a;return void 0===i&&(i=t),(null===(a=n.style)||void 0===a?void 0:a.getPropertyValue(i))||o.getPropertyValue(n,i)||n.hasAttribute(t)&&n.getAttribute(t)||void 0}function hl(n,o,t){if("none"===Jt(n.element,t.styleSheets,"display"))return!1;var i=o,a=Jt(n.element,t.styleSheets,"visibility");return a&&(i="hidden"!==a),i}function dc(n,o,t){var i=hl(n,o,t);return 0!==n.element.childNodes.length&&(n.children.forEach(function(a){a.isVisible(i,t)&&(i=!0)}),i)}var Xf=function(){function n(){this.markers=[]}return n.prototype.addMarker=function(o){this.markers.push(o)},n.prototype.draw=function(o){return lo(this,void 0,void 0,function(){var t,i,a,r,s,l,c;return co(this,function(u){switch(u.label){case 0:t=0,u.label=1;case 1:return t<this.markers.length?(a=void 0,r=(i=this.markers[t]).angle,s=i.anchor,l=Math.cos(r),c=Math.sin(r),a=o.pdf.Matrix(l,c,-c,l,s[0],s[1]),a=o.pdf.matrixMult(o.pdf.Matrix(o.attributeState.strokeWidth,0,0,o.attributeState.strokeWidth,0,0),a),a=o.pdf.matrixMult(a,o.transform),o.pdf.saveGraphicsState(),[4,o.refsHandler.getRendered(i.id,null,function(m){return m.apply(o)})]):[3,4];case 2:u.sent(),o.pdf.doFormObject(i.id,a),o.pdf.restoreGraphicsState(),u.label=3;case 3:return t++,[3,1];case 4:return[2]}})})},n}(),Al=function(n,o,t){this.id=n,this.anchor=o,this.angle=t},Pp=/url\(["']?#([^"']+)["']?\)/,eg={bottom:"bottom","text-bottom":"bottom",top:"top","text-top":"top",hanging:"hanging",middle:"middle",central:"middle",center:"middle",mathematical:"middle",ideographic:"ideographic",alphabetic:"alphabetic",baseline:"alphabetic"};function us(n,o){var t;return(t=n&&n.toString().match(/^([\-0-9.]+)em$/))?parseFloat(t[1])*o:(t=n&&n.toString().match(/^([\-0-9.]+)(px|)$/))?parseFloat(t[1]):0}function tg(n){return eg[n]||"alphabetic"}function Zr(n){for(var o,t=[],i=/[+-]?(?:(?:\d+\.?\d*)|(?:\d*\.?\d+))(?:[eE][+-]?\d+)?/g;o=i.exec(n);)t.push(parseFloat(o[0]));return t}function od(n,o){if("transparent"===n){var t=new Ns("rgb(0,0,0)");return t.a=0,t}if("currentcolor"===n.toLowerCase())return o||new Ns("rgb(0,0,0)");var i=/\s*rgba\(((?:[^,\)]*,){3}[^,\)]*)\)\s*/.exec(n);if(i){var a=Zr(i[1]),r=new Ns("rgb("+a.slice(0,3).join(",")+")");return r.a=a[3],r}return new Ns(n)}var ad,_l={"sans-serif":"helvetica",verdana:"helvetica",arial:"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",serif:"times",cursive:"times",fantasy:"times"},Qp=(ad=Gf.version.split("."),2===parseFloat(ad[0])&&3===parseFloat(ad[1]));function ng(n,o){return Qp?400==o?"italic"==n?"italic":"normal":700==o&&"italic"!==n?"bold":n+""+o:400==o||"normal"===o?"italic"===n?"italic":"normal":700!=o&&"bold"!==o||"normal"!==n?(700==o?"bold":o)+""+n:"bold"}function Fp(n,o){if("none"===Jt(o.element,n.styleSheets,"display"))return[0,0,0,0];var t=[0,0,0,0];return o.children.forEach(function(i){var a=i.getBoundingBox(n);t=[Math.min(t[0],a[0]),Math.min(t[1],a[1]),Math.max(t[0]+t[2],a[0]+a[2])-Math.min(t[0],a[0]),Math.max(t[1]+t[3],a[1]+a[3])-Math.min(t[1],a[1])]}),t}function au(n,o){var t=parseFloat,i=t(n.getAttribute("x1"))||t(Jt(n,o.styleSheets,"x"))||t(Jt(n,o.styleSheets,"cx"))-t(Jt(n,o.styleSheets,"r"))||0,a=t(n.getAttribute("x2"))||i+t(Jt(n,o.styleSheets,"width"))||t(Jt(n,o.styleSheets,"cx"))+t(Jt(n,o.styleSheets,"r"))||0,r=t(n.getAttribute("y1"))||t(Jt(n,o.styleSheets,"y"))||t(Jt(n,o.styleSheets,"cy"))-t(Jt(n,o.styleSheets,"r"))||0,s=t(n.getAttribute("y2"))||r+t(Jt(n,o.styleSheets,"height"))||t(Jt(n,o.styleSheets,"cy"))+t(Jt(n,o.styleSheets,"r"))||0;return[Math.min(i,a),Math.min(r,s),Math.max(i,a)-Math.min(i,a),Math.max(r,s)-Math.min(r,s)]}function im(n,o,t,i,a,r,s,l){void 0===l&&(l=!1);var c,u,m=o[0],p=o[1],f=o[2],b=o[3],L=a/f,N=r/b,R=n.getAttribute("preserveAspectRatio");if(R){var j=R.split(" ");"defer"===j[0]&&(j=j.slice(1)),c=j[0],u=j[1]||"meet"}else c="xMidYMid",u="meet";if("none"!==c&&("meet"===u?L=N=Math.min(L,N):"slice"===u&&(L=N=Math.max(L,N))),l)return s.pdf.Matrix(L,0,0,N,0,0);var G=t-m*L,ae=i-p*N;c.indexOf("xMid")>=0?G+=(a-f*L)/2:c.indexOf("xMax")>=0&&(G+=a-f*L),c.indexOf("YMid")>=0?ae+=(r-b*N)/2:c.indexOf("YMax")>=0&&(ae+=r-b*N);var W=s.pdf.Matrix(1,0,0,1,G,ae),le=s.pdf.Matrix(L,0,0,N,0,0);return s.pdf.matrixMult(le,W)}function om(n,o){if(!n||"none"===n)return o.pdf.unitMatrix;for(var t,i,a=/^[\s,]*matrix\(([^)]+)\)\s*/,r=/^[\s,]*translate\(([^)]+)\)\s*/,s=/^[\s,]*rotate\(([^)]+)\)\s*/,l=/^[\s,]*scale\(([^)]+)\)\s*/,c=/^[\s,]*skewX\(([^)]+)\)\s*/,u=/^[\s,]*skewY\(([^)]+)\)\s*/,m=o.pdf.unitMatrix;n.length>0&&n.length!==i;){i=n.length;var p=a.exec(n);if(p&&(t=Zr(p[1]),m=o.pdf.matrixMult(o.pdf.Matrix(t[0],t[1],t[2],t[3],t[4],t[5]),m),n=n.substr(p[0].length)),p=s.exec(n)){t=Zr(p[1]);var f=Math.PI*t[0]/180;if(m=o.pdf.matrixMult(o.pdf.Matrix(Math.cos(f),Math.sin(f),-Math.sin(f),Math.cos(f),0,0),m),t[1]||t[2]){var b=o.pdf.Matrix(1,0,0,1,t[1],t[2]),L=o.pdf.Matrix(1,0,0,1,-t[1],-t[2]);m=o.pdf.matrixMult(L,o.pdf.matrixMult(m,b))}n=n.substr(p[0].length)}(p=r.exec(n))&&(t=Zr(p[1]),m=o.pdf.matrixMult(o.pdf.Matrix(1,0,0,1,t[0],t[1]||0),m),n=n.substr(p[0].length)),(p=l.exec(n))&&((t=Zr(p[1]))[1]||(t[1]=t[0]),m=o.pdf.matrixMult(o.pdf.Matrix(t[0],0,0,t[1],0,0),m),n=n.substr(p[0].length)),(p=c.exec(n))&&(t=parseFloat(p[1]),t*=Math.PI/180,m=o.pdf.matrixMult(o.pdf.Matrix(1,0,Math.tan(t),1,0,0),m),n=n.substr(p[0].length)),(p=u.exec(n))&&(t=parseFloat(p[1]),t*=Math.PI/180,m=o.pdf.matrixMult(o.pdf.Matrix(1,Math.tan(t),0,1,0,0),m),n=n.substr(p[0].length))}return m}var Np=function(){function n(o,t){this.element=o,this.children=t,this.parent=null}return n.prototype.setParent=function(o){this.parent=o},n.prototype.getParent=function(){return this.parent},n.prototype.getBoundingBox=function(o){return"none"===Jt(this.element,o.styleSheets,"display")?[0,0,0,0]:this.getBoundingBoxCore(o)},n.prototype.computeNodeTransform=function(o){var t=this.computeNodeTransformCore(o),i=Jt(this.element,o.styleSheets,"transform");return i?o.pdf.matrixMult(t,om(i,o)):t},n}(),am=function(n){function o(){return null!==n&&n.apply(this,arguments)||this}return oo(o,n),o.prototype.render=function(t){return Promise.resolve()},o.prototype.getBoundingBoxCore=function(t){return[]},o.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},o}(Np),rm=function(n){function o(t,i,a){var r=n.call(this,i,a)||this;return r.pdfGradientType=t,r.contextColor=void 0,r}return oo(o,n),o.prototype.apply=function(t){return lo(this,void 0,void 0,function(){var i,a,r,s,l,c;return co(this,function(u){return(i=this.element.getAttribute("id"))?(a=this.getStops(t.styleSheets),r=0,s=!1,a.forEach(function(m){var p=m.opacity;p&&1!==p&&(r+=p,s=!0)}),s&&(l=new nc({opacity:r/a.length})),c=new ic(this.pdfGradientType,this.getCoordinates(),a,l),t.pdf.addShadingPattern(i,c),[2]):[2]})})},o.prototype.getStops=function(t){var i=this;if(this.stops)return this.stops;if(void 0===this.contextColor){this.contextColor=null;for(var a=this;a;){var r=Jt(a.element,t,"color");if(r){this.contextColor=od(r,null);break}a=a.getParent()}}var s=[];return this.children.forEach(function(l){if("stop"===l.element.tagName.toLowerCase()){var c=Jt(l.element,t,"color"),u=od(Jt(l.element,t,"stop-color")||"",c?od(c,null):i.contextColor),m=parseFloat(Jt(l.element,t,"stop-opacity")||"1");s.push({offset:o.parseGradientOffset(l.element.getAttribute("offset")||"0"),color:[u.r,u.g,u.b],opacity:m})}}),this.stops=s},o.prototype.getBoundingBoxCore=function(t){return au(this.element,t)},o.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},o.prototype.isVisible=function(t,i){return dc(this,t,i)},o.parseGradientOffset=function(t){var i=parseFloat(t);return!isNaN(i)&&t.indexOf("%")>=0?i/100:i},o}(am),QA=function(n){function o(t,i){return n.call(this,"axial",t,i)||this}return oo(o,n),o.prototype.getCoordinates=function(){return[parseFloat(this.element.getAttribute("x1")||"0"),parseFloat(this.element.getAttribute("y1")||"0"),parseFloat(this.element.getAttribute("x2")||"1"),parseFloat(this.element.getAttribute("y2")||"0")]},o}(rm),FA=function(n){function o(t,i){return n.call(this,"radial",t,i)||this}return oo(o,n),o.prototype.getCoordinates=function(){var t=this.element.getAttribute("cx"),i=this.element.getAttribute("cy"),a=this.element.getAttribute("fx"),r=this.element.getAttribute("fy");return[parseFloat(a||t||"0.5"),parseFloat(r||i||"0.5"),0,parseFloat(t||"0.5"),parseFloat(i||"0.5"),parseFloat(this.element.getAttribute("r")||"0.5")]},o}(rm),sx=function(){function n(o,t){this.key=o,this.gradient=t}return n.prototype.getFillData=function(o,t){return lo(this,void 0,void 0,function(){var i,a,r;return co(this,function(s){switch(s.label){case 0:return[4,t.refsHandler.getRendered(this.key,null,function(l){return l.apply(new sc(t.pdf,{refsHandler:t.refsHandler,textMeasure:t.textMeasure,styleSheets:t.styleSheets,viewport:t.viewport,svg2pdfParameters:t.svg2pdfParameters}))})];case 1:return s.sent(),this.gradient.element.hasAttribute("gradientUnits")&&"objectboundingbox"!==this.gradient.element.getAttribute("gradientUnits").toLowerCase()?i=t.pdf.unitMatrix:(a=o.getBoundingBox(t),i=t.pdf.Matrix(a[2],0,0,a[3],a[0],a[1])),r=om(Jt(this.gradient.element,t.styleSheets,"gradientTransform","transform"),t),[2,{key:this.key,matrix:t.pdf.matrixMult(r,i)}]}})})},n}(),ig=function(n){function o(){return null!==n&&n.apply(this,arguments)||this}return oo(o,n),o.prototype.apply=function(t){return lo(this,void 0,void 0,function(){var i,a,r,s,l;return co(this,function(c){switch(c.label){case 0:if(!(i=this.element.getAttribute("id")))return[2];a=this.getBoundingBox(t),r=new dl([a[0],a[1],a[0]+a[2],a[1]+a[3]],a[2],a[3]),t.pdf.beginTilingPattern(r),s=0,l=this.children,c.label=1;case 1:return s<l.length?[4,l[s].render(new sc(t.pdf,{attributeState:t.attributeState,refsHandler:t.refsHandler,styleSheets:t.styleSheets,viewport:t.viewport,svg2pdfParameters:t.svg2pdfParameters,textMeasure:t.textMeasure}))]:[3,4];case 2:c.sent(),c.label=3;case 3:return s++,[3,1];case 4:return t.pdf.endTilingPattern(i,r),[2]}})})},o.prototype.getBoundingBoxCore=function(t){return au(this.element,t)},o.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},o.prototype.isVisible=function(t,i){return dc(this,t,i)},o}(am),og=function(){function n(o,t){this.key=o,this.pattern=t}return n.prototype.getFillData=function(o,t){return lo(this,void 0,void 0,function(){var i,a,r,s,l,c,u,m,p,f,b,L;return co(this,function(N){switch(N.label){case 0:return[4,t.refsHandler.getRendered(this.key,null,function(R){return R.apply(new sc(t.pdf,{refsHandler:t.refsHandler,textMeasure:t.textMeasure,styleSheets:t.styleSheets,viewport:t.viewport,svg2pdfParameters:t.svg2pdfParameters}))})];case 1:return N.sent(),i={key:this.key,boundingBox:void 0,xStep:0,yStep:0,matrix:void 0},r=t.pdf.unitMatrix,this.pattern.element.hasAttribute("patternUnits")&&"objectboundingbox"!==this.pattern.element.getAttribute("patternUnits").toLowerCase()||(a=o.getBoundingBox(t),r=t.pdf.Matrix(1,0,0,1,a[0],a[1]),l=this.pattern.getBoundingBox(t),i.boundingBox=[c=l[0]*a[0]||0,u=l[1]*a[1]||0,c+(m=l[2]*a[2]||0),u+(p=l[3]*a[3]||0)],i.xStep=m,i.yStep=p),s=t.pdf.unitMatrix,this.pattern.element.hasAttribute("patternContentUnits")&&"objectboundingbox"===this.pattern.element.getAttribute("patternContentUnits").toLowerCase()&&(a||(a=o.getBoundingBox(t)),s=t.pdf.Matrix(a[2],0,0,a[3],0,0),l=i.boundingBox||this.pattern.getBoundingBox(t),i.boundingBox=[c=l[0]/a[0]||0,u=l[1]/a[1]||0,c+(m=l[2]/a[2]||0),u+(p=l[3]/a[3]||0)],i.xStep=m,i.yStep=p),f=t.pdf.unitMatrix,(b=Jt(this.pattern.element,t.styleSheets,"patternTransform","transform"))&&(f=om(b,t)),L=t.pdf.matrixMult(L=s,r),L=t.pdf.matrixMult(L,f),L=t.pdf.matrixMult(L,t.transform),i.matrix=L,[2,i]}})})},n}();function sm(n,o,t){var i=t||o.element,a=Jt(i,n.styleSheets,"color");if(a){var r=od(a,n.attributeState.color);n.attributeState.color=r.ok?r:new Ns("rgb(0,0,0)")}var s=Jt(i,n.styleSheets,"visibility");s&&(n.attributeState.visibility=s);var l=Jt(i,n.styleSheets,"fill");l&&(n.attributeState.fill=function rd(n,o){var t=Pp.exec(n);if(t){var i=t[1],a=o.refsHandler.get(i);return a&&(a instanceof QA||a instanceof FA)?function(s,l,c){var u=l.getStops(c.styleSheets);if(0===u.length)return null;if(1===u.length){var m=u[0].color,p=new Ns;return p.ok=!0,p.r=m[0],p.g=m[1],p.b=m[2],p.a=u[0].opacity,new Ga(p)}return new sx(s,l)}(i,a,o):a&&a instanceof ig?new og(i,a):new Ga(new Ns("rgb(0, 0, 0)"))}var r=od(n,o.attributeState.color);return r.ok?new Ga(r):null}(l,n));var c=Jt(i,n.styleSheets,"fill-opacity");c&&(n.attributeState.fillOpacity=parseFloat(c));var u=Jt(i,n.styleSheets,"stroke-opacity");u&&(n.attributeState.strokeOpacity=parseFloat(u));var m=Jt(i,n.styleSheets,"opacity");m&&(n.attributeState.opacity=parseFloat(m));var p=Jt(i,n.styleSheets,"stroke-width");void 0!==p&&""!==p&&(n.attributeState.strokeWidth=Math.abs(parseFloat(p)));var f=Jt(i,n.styleSheets,"stroke");if(f)if("none"===f)n.attributeState.stroke=null;else{var b=od(f,n.attributeState.color);b.ok&&(n.attributeState.stroke=new Ga(b))}var L=Jt(i,n.styleSheets,"stroke-linecap");L&&(n.attributeState.strokeLinecap=L);var N=Jt(i,n.styleSheets,"stroke-linejoin");N&&(n.attributeState.strokeLinejoin=N);var R=Jt(i,n.styleSheets,"stroke-dasharray");if(R){var j=parseInt(Jt(i,n.styleSheets,"stroke-dashoffset")||"0");n.attributeState.strokeDasharray=Zr(R),n.attributeState.strokeDashoffset=j}var G=Jt(i,n.styleSheets,"stroke-miterlimit");void 0!==G&&""!==G&&(n.attributeState.strokeMiterlimit=parseFloat(G));var ae=i.getAttribute("xml:space");ae&&(n.attributeState.xmlSpace=ae);var W=Jt(i,n.styleSheets,"font-weight");W&&(n.attributeState.fontWeight=W);var le=Jt(i,n.styleSheets,"font-style");le&&(n.attributeState.fontStyle=le);var Be,Pe,Oe,Fe,Re,Je,ve=Jt(i,n.styleSheets,"font-family");if(ve){var ce=ox().parse(ve);n.attributeState.fontFamily=(Pe=ce,Oe=n,Fe=ng((Be=n.attributeState).fontStyle,Be.fontWeight),Re=Oe.pdf.getFontList(),Je="",Pe.some(function(Ke){var et=Re[Ke];return et&&et.indexOf(Fe)>=0?(Je=Ke,!0):(Ke=Ke.toLowerCase(),!!_l.hasOwnProperty(Ke)&&(Je=Ke,!0))})||(Je="times"),Je)}var te=Jt(i,n.styleSheets,"font-size");if(te){var Se=n.pdf.getFontSize();n.attributeState.fontSize=us(te,Se)}var Ze=Jt(i,n.styleSheets,"vertical-align")||Jt(i,n.styleSheets,"alignment-baseline");if(Ze){var se=Ze.match(/(baseline|text-bottom|alphabetic|ideographic|middle|central|mathematical|text-top|bottom|center|top|hanging)/);se&&(n.attributeState.alignmentBaseline=se[0])}var pe=Jt(i,n.styleSheets,"text-anchor");pe&&(n.attributeState.textAnchor=pe)}function sd(n,o,t){var i=1,a=1;i*=n.attributeState.fillOpacity,i*=n.attributeState.opacity,n.attributeState.fill instanceof Ga&&void 0!==n.attributeState.fill.color.a&&(i*=n.attributeState.fill.color.a),a*=n.attributeState.strokeOpacity,a*=n.attributeState.opacity,n.attributeState.stroke instanceof Ga&&void 0!==n.attributeState.stroke.color.a&&(a*=n.attributeState.stroke.color.a);var r,s,l=i<1,c=a<1;if(uc(t,"use")?(l=!0,c=!0,i*=n.attributeState.fill?1:0,a*=n.attributeState.stroke?1:0):n.withinUse&&(n.attributeState.fill!==o.attributeState.fill?(l=!0,i*=n.attributeState.fill?1:0):l&&!n.attributeState.fill&&(i=0),n.attributeState.stroke!==o.attributeState.stroke?(c=!0,a*=n.attributeState.stroke?1:0):c&&!n.attributeState.stroke&&(a=0)),l||c){var u={};l&&(u.opacity=i),c&&(u["stroke-opacity"]=a),n.pdf.setGState(new nc(u))}if(n.attributeState.fill&&n.attributeState.fill!==o.attributeState.fill&&n.attributeState.fill instanceof Ga&&n.attributeState.fill.color.ok&&!uc(t,"text")&&n.pdf.setFillColor(n.attributeState.fill.color.r,n.attributeState.fill.color.g,n.attributeState.fill.color.b),n.attributeState.strokeWidth!==o.attributeState.strokeWidth&&n.pdf.setLineWidth(n.attributeState.strokeWidth),n.attributeState.stroke!==o.attributeState.stroke&&n.attributeState.stroke instanceof Ga&&n.pdf.setDrawColor(n.attributeState.stroke.color.r,n.attributeState.stroke.color.g,n.attributeState.stroke.color.b),n.attributeState.strokeLinecap!==o.attributeState.strokeLinecap&&n.pdf.setLineCap(n.attributeState.strokeLinecap),n.attributeState.strokeLinejoin!==o.attributeState.strokeLinejoin&&n.pdf.setLineJoin(n.attributeState.strokeLinejoin),n.attributeState.strokeDasharray===o.attributeState.strokeDasharray&&n.attributeState.strokeDashoffset===o.attributeState.strokeDashoffset||!n.attributeState.strokeDasharray||n.pdf.setLineDashPattern(n.attributeState.strokeDasharray,n.attributeState.strokeDashoffset),n.attributeState.strokeMiterlimit!==o.attributeState.strokeMiterlimit&&n.pdf.setLineMiterLimit(n.attributeState.strokeMiterlimit),n.attributeState.fontFamily!==o.attributeState.fontFamily&&(r=_l.hasOwnProperty(n.attributeState.fontFamily)?_l[n.attributeState.fontFamily]:n.attributeState.fontFamily),n.attributeState.fill&&n.attributeState.fill!==o.attributeState.fill&&n.attributeState.fill instanceof Ga&&n.attributeState.fill.color.ok){var m=n.attributeState.fill.color;n.pdf.setTextColor(m.r,m.g,m.b)}n.attributeState.fontWeight===o.attributeState.fontWeight&&n.attributeState.fontStyle===o.attributeState.fontStyle||(s=ng(n.attributeState.fontStyle,n.attributeState.fontWeight)),void 0===r&&void 0===s||(void 0===r&&(r=_l.hasOwnProperty(n.attributeState.fontFamily)?_l[n.attributeState.fontFamily]:n.attributeState.fontFamily),n.pdf.setFont(r,s)),n.attributeState.fontSize!==o.attributeState.fontSize&&n.pdf.setFontSize(n.attributeState.fontSize*n.pdf.internal.scaleFactor)}function ag(n,o,t){var i=Pp.exec(n);if(i)return t.refsHandler.get(i[1])||void 0}function rg(n,o,t){return lo(this,void 0,void 0,function(){var i,a;return co(this,function(r){switch(r.label){case 0:return i=t.clone(),o.element.hasAttribute("clipPathUnits")&&"objectboundingbox"===o.element.getAttribute("clipPathUnits").toLowerCase()&&(a=n.getBoundingBox(t),i.transform=t.pdf.matrixMult(t.pdf.Matrix(a[2],0,0,a[3],a[0],a[1]),t.transform)),[4,o.apply(i)];case 1:return r.sent(),[2]}})})}var sg=function(n){function o(){return null!==n&&n.apply(this,arguments)||this}return oo(o,n),o.prototype.render=function(t){return lo(this,void 0,void 0,function(){var i,a,r,s;return co(this,function(l){switch(l.label){case 0:return this.isVisible("hidden"!==t.attributeState.visibility,t)?((i=t.clone()).transform=i.pdf.matrixMult(this.computeNodeTransform(i),t.transform),sm(i,this),a=Jt(this.element,i.styleSheets,"clip-path"),(r=a&&"none"!==a)?(s=ag(a,0,i))?s.isVisible(!0,i)?(i.pdf.saveGraphicsState(),[4,rg(this,s,i)]):[3,2]:[3,4]:[3,5]):[2];case 1:return l.sent(),[3,3];case 2:return[2];case 3:return[3,5];case 4:r=!1,l.label=5;case 5:return i.withinClipPath||i.pdf.saveGraphicsState(),sd(i,t,this.element),[4,this.renderCore(i)];case 6:return l.sent(),i.withinClipPath||i.pdf.restoreGraphicsState(),r&&i.pdf.restoreGraphicsState(),[2]}})})},o}(Np),Zp=function(n){function o(){return null!==n&&n.apply(this,arguments)||this}return oo(o,n),o}(sg),ld=function(n){function o(t,i,a){var r=n.call(this,i,a)||this;return r.cachedPath=null,r.hasMarkers=t,r}return oo(o,n),o.prototype.renderCore=function(t){return lo(this,void 0,void 0,function(){var i;return co(this,function(a){switch(a.label){case 0:return null===(i=this.getCachedPath(t))||0===i.segments.length?[2]:(t.withinClipPath?i.transform(t.transform):t.pdf.setCurrentTransformationMatrix(t.transform),i.draw(t),[4,this.fillOrStroke(t)]);case 1:return a.sent(),this.hasMarkers?[4,this.drawMarkers(t,i)]:[3,3];case 2:a.sent(),a.label=3;case 3:return[2]}})})},o.prototype.getCachedPath=function(t){return this.cachedPath||(this.cachedPath=this.getPath(t))},o.prototype.drawMarkers=function(t,i){return lo(this,void 0,void 0,function(){return co(this,function(a){switch(a.label){case 0:return[4,this.getMarkers(i,t).draw(t.clone({transform:t.pdf.unitMatrix}))];case 1:return a.sent(),[2]}})})},o.prototype.fillOrStroke=function(t){return lo(this,void 0,void 0,function(){var i,a,r,s,l;return co(this,function(c){switch(c.label){case 0:return t.withinClipPath?[2]:(a=t.attributeState.stroke&&0!==t.attributeState.strokeWidth,(i=t.attributeState.fill)?[4,i.getFillData(this,t)]:[3,2]);case 1:return s=c.sent(),[3,3];case 2:s=void 0,c.label=3;case 3:return r=s,l="evenodd"===Jt(this.element,t.styleSheets,"fill-rule"),i&&a||t.withinUse?l?t.pdf.fillStrokeEvenOdd(r):t.pdf.fillStroke(r):i?l?t.pdf.fillEvenOdd(r):t.pdf.fill(r):a?t.pdf.stroke():t.pdf.discardPath(),[2]}})})},o.prototype.getBoundingBoxCore=function(t){var i=this.getCachedPath(t);if(!i||!i.segments.length)return[0,0,0,0];for(var a=Number.POSITIVE_INFINITY,r=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,l=Number.NEGATIVE_INFINITY,c=0,u=0,m=0;m<i.segments.length;m++){var p=i.segments[m];(p instanceof Aa||p instanceof cc||p instanceof Zs)&&(c=p.x,u=p.y),p instanceof Zs?(a=Math.min(a,c,p.x1,p.x2,p.x),s=Math.max(s,c,p.x1,p.x2,p.x),r=Math.min(r,u,p.y1,p.y2,p.y),l=Math.max(l,u,p.y1,p.y2,p.y)):(a=Math.min(a,c),s=Math.max(s,c),r=Math.min(r,u),l=Math.max(l,u))}return[a,r,s-a,l-r]},o.prototype.getMarkers=function(t,i){var a=Jt(this.element,i.styleSheets,"marker-start"),r=Jt(this.element,i.styleSheets,"marker-mid"),s=Jt(this.element,i.styleSheets,"marker-end"),l=new Xf;if(a||r||s){s&&(s=lm(s)),a&&(a=lm(a)),r&&(r=lm(r));for(var c=t.segments,u=[1,0],m=void 0,p=!1,f=[1,0],b=!1,L=function(R){var j=c[R],G=a&&(1===R||!(c[R]instanceof Aa)&&c[R-1]instanceof Aa);G&&c.forEach(function(te,Se){if(!b&&te instanceof PA&&Se>R){var Ze=c[Se-1];b=(Ze instanceof Aa||Ze instanceof cc||Ze instanceof Zs)&&Ze}});var ae=s&&(R===c.length-1||!(c[R]instanceof Aa)&&c[R+1]instanceof Aa),W=r&&R>0&&!(1===R&&c[R-1]instanceof Aa),le=c[R-1]||null;if(le instanceof Aa||le instanceof cc||le instanceof Zs)if(j instanceof Zs)G&&l.addMarker(new Al(a,[le.x,le.y],BA(b?[b.x,b.y]:[le.x,le.y],[j.x1,j.y1]))),ae&&l.addMarker(new Al(s,[j.x,j.y],BA([j.x2,j.y2],[j.x,j.y]))),W&&(m=id([le.x,le.y],[j.x1,j.y1]),m=le instanceof Aa?m:pl(Lp(u,m)),l.addMarker(new Al(r,[le.x,le.y],Math.atan2(m[1],m[0])))),u=id([j.x2,j.y2],[j.x,j.y]);else if(j instanceof Aa||j instanceof cc){if(m=id([le.x,le.y],[j.x,j.y]),G){var ve=b?id([b.x,b.y],[j.x,j.y]):m;l.addMarker(new Al(a,[le.x,le.y],Math.atan2(ve[1],ve[0])))}ae&&l.addMarker(new Al(s,[j.x,j.y],Math.atan2(m[1],m[0]))),W&&(ve=j instanceof Aa?u:le instanceof Aa?m:pl(Lp(u,m)),l.addMarker(new Al(r,[le.x,le.y],Math.atan2(ve[1],ve[0])))),u=m}else j instanceof PA&&(m=id([le.x,le.y],[p.x,p.y]),W&&(ve=le instanceof Aa?m:pl(Lp(u,m)),l.addMarker(new Al(r,[le.x,le.y],Math.atan2(ve[1],ve[0])))),ae&&(ve=pl(Lp(m,f)),l.addMarker(new Al(s,[p.x,p.y],Math.atan2(ve[1],ve[0])))),u=m);else{p=j instanceof Aa&&j;var ce=c[R+1];(ce instanceof Aa||ce instanceof cc||ce instanceof Zs)&&(f=id([p.x,p.y],[ce.x,ce.y]))}},N=0;N<c.length;N++)L(N)}return l},o}(Zp);function lm(n){var o=Pp.exec(n);return o&&o[1]||void 0}var lg=function(n){function o(t,i){return n.call(this,!0,t,i)||this}return oo(o,n),o.prototype.getPath=function(t){if(t.withinClipPath||null===t.attributeState.stroke)return null;var i=parseFloat(this.element.getAttribute("x1")||"0"),a=parseFloat(this.element.getAttribute("y1")||"0"),r=parseFloat(this.element.getAttribute("x2")||"0"),s=parseFloat(this.element.getAttribute("y2")||"0");return i||r||a||s?(new lc).moveTo(i,a).lineTo(r,s):null},o.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},o.prototype.isVisible=function(t,i){return hl(this,t,i)},o.prototype.fillOrStroke=function(t){return lo(this,void 0,void 0,function(){return co(this,function(i){switch(i.label){case 0:return t.attributeState.fill=null,[4,n.prototype.fillOrStroke.call(this,t)];case 1:return i.sent(),[2]}})})},o}(ld),NA=function(n){function o(){return null!==n&&n.apply(this,arguments)||this}return oo(o,n),o.prototype.apply=function(t){return lo(this,void 0,void 0,function(){var i,a,r,s,l;return co(this,function(c){switch(c.label){case 0:return this.isVisible("hidden"!==t.attributeState.visibility,t)?((i=t.clone()).transform=i.pdf.unitMatrix,sm(i,this),(a=Jt(this.element,i.styleSheets,"clip-path"))&&"none"!==a&&(r=ag(a,0,i))?r.isVisible(!0,i)?[4,rg(this,r,i)]:[3,2]:[3,3]):[2];case 1:return c.sent(),[3,3];case 2:return[2];case 3:sd(i,t,this.element),s=0,l=this.children,c.label=4;case 4:return s<l.length?[4,l[s].render(i)]:[3,7];case 5:c.sent(),c.label=6;case 6:return s++,[3,4];case 7:return[2]}})})},o.prototype.getBoundingBoxCore=function(t){return Fp(t,this)},o.prototype.isVisible=function(t,i){return dc(this,t,i)},o.prototype.computeNodeTransformCore=function(t){var i=parseFloat(Jt(this.element,t.styleSheets,"x")||"0"),a=parseFloat(Jt(this.element,t.styleSheets,"y")||"0"),r=this.element.getAttribute("viewBox");if(r){var s=Zr(r),l=parseFloat(Jt(this.element,t.styleSheets,"width")||Jt(this.element.ownerSVGElement,t.styleSheets,"width")||r[2]),c=parseFloat(Jt(this.element,t.styleSheets,"height")||Jt(this.element.ownerSVGElement,t.styleSheets,"height")||r[3]);return im(this.element,s,i,a,l,c,t)}return t.pdf.Matrix(1,0,0,1,i,a)},o}(am),cd=function(n,o){this.width=n,this.height=o},cg=function(n){function o(){return null!==n&&n.apply(this,arguments)||this}return oo(o,n),o.prototype.renderCore=function(t){return lo(this,void 0,void 0,function(){var i,a,r,s,l,c,u,m,p,f,b,L,N;return co(this,function(R){switch(R.label){case 0:return i=parseFloat,(a=this.element.getAttribute("href")||this.element.getAttribute("xlink:href"))?(r=a.substring(1),s=t.refsHandler.get(r),l=uc(s.element,"symbol,svg")&&s.element.hasAttribute("viewBox"),c=i(Jt(this.element,t.styleSheets,"x")||"0"),u=i(Jt(this.element,t.styleSheets,"y")||"0"),m=void 0,p=void 0,l?(m=i(Jt(this.element,t.styleSheets,"width")||Jt(s.element,t.styleSheets,"width")||"0"),p=i(Jt(this.element,t.styleSheets,"height")||Jt(s.element,t.styleSheets,"height")||"0"),c+=i(Jt(s.element,t.styleSheets,"x")||"0"),u+=i(Jt(s.element,t.styleSheets,"y")||"0"),b=Zr(s.element.getAttribute("viewBox")),f=im(s.element,b,c,u,m,p,t)):f=t.pdf.Matrix(1,0,0,1,c,u),L=new sc(t.pdf,{refsHandler:t.refsHandler,styleSheets:t.styleSheets,withinUse:!0,viewport:l?new cd(m,p):t.viewport,svg2pdfParameters:t.svg2pdfParameters,textMeasure:t.textMeasure}),[4,t.refsHandler.getRendered(r,N=t.attributeState.color,function(j){return o.renderReferencedNode(j,r,N,L)})]):[2];case 1:return R.sent(),t.pdf.saveGraphicsState(),t.pdf.setCurrentTransformationMatrix(t.transform),l&&"visible"!==Jt(s.element,t.styleSheets,"overflow")&&(t.pdf.rect(c,u,m,p),t.pdf.clip().discardPath()),t.pdf.doFormObject(t.refsHandler.generateKey(r,N),f),t.pdf.restoreGraphicsState(),[2]}})})},o.renderReferencedNode=function(t,i,a,r){return lo(this,void 0,void 0,function(){var s;return co(this,function(l){switch(l.label){case 0:return s=[(s=t.getBoundingBox(r))[0]-.5*s[2],s[1]-.5*s[3],2*s[2],2*s[3]],r.attributeState.color=a,r.pdf.beginFormObject(s[0],s[1],s[2],s[3],r.pdf.unitMatrix),t instanceof NA?[4,t.apply(r)]:[3,2];case 1:return l.sent(),[3,4];case 2:return[4,t.render(r)];case 3:l.sent(),l.label=4;case 4:return r.pdf.endFormObject(r.refsHandler.generateKey(i,a)),[2]}})})},o.prototype.getBoundingBoxCore=function(t){return au(this.element,t)},o.prototype.isVisible=function(t,i){return hl(this,t,i)},o.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},o}(Zp),ug=function(n){function o(t,i){return n.call(this,!1,t,i)||this}return oo(o,n),o.prototype.getPath=function(t){var i=parseFloat(Jt(this.element,t.styleSheets,"width")||"0"),a=parseFloat(Jt(this.element,t.styleSheets,"height")||"0");if(!isFinite(i)||i<=0||!isFinite(a)||a<=0)return null;var r=Jt(this.element,t.styleSheets,"rx"),s=Jt(this.element,t.styleSheets,"ry"),l=Math.min(parseFloat(r||s||"0"),.5*i),c=Math.min(parseFloat(s||r||"0"),.5*a),u=parseFloat(Jt(this.element,t.styleSheets,"x")||"0"),m=parseFloat(Jt(this.element,t.styleSheets,"y")||"0"),p=4/3*(Math.SQRT2-1);return 0===l&&0===c?(new lc).moveTo(u,m).lineTo(u+i,m).lineTo(u+i,m+a).lineTo(u,m+a).close():(new lc).moveTo(u+=l,m).lineTo(u+=i-2*l,m).curveTo(u+l*p,m,u+l,m+(c-c*p),u+=l,m+=c).lineTo(u,m+=a-2*c).curveTo(u,m+c*p,u-l*p,m+c,u-=l,m+=c).lineTo(u+=2*l-i,m).curveTo(u-l*p,m,u-l,m-c*p,u-=l,m-=c).lineTo(u,m+=2*c-a).curveTo(u,m-c*p,u+l*p,m-c,u+=l,m-=c).close()},o.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},o.prototype.isVisible=function(t,i){return hl(this,t,i)},o}(ld),dg=function(n){function o(t,i){return n.call(this,!1,t,i)||this}return oo(o,n),o.prototype.getPath=function(t){var i=this.getRx(t),a=this.getRy(t);if(!isFinite(i)||a<=0||!isFinite(a)||a<=0)return null;var r=parseFloat(Jt(this.element,t.styleSheets,"cx")||"0"),s=parseFloat(Jt(this.element,t.styleSheets,"cy")||"0"),l=4/3*(Math.SQRT2-1)*i,c=4/3*(Math.SQRT2-1)*a;return(new lc).moveTo(r+i,s).curveTo(r+i,s-c,r+l,s-a,r,s-a).curveTo(r-l,s-a,r-i,s-c,r-i,s).curveTo(r-i,s+c,r-l,s+a,r,s+a).curveTo(r+l,s+a,r+i,s+c,r+i,s)},o.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},o.prototype.isVisible=function(t,i){return hl(this,t,i)},o}(ld),Dp=function(n){function o(t,i){return n.call(this,t,i)||this}return oo(o,n),o.prototype.getRx=function(t){return parseFloat(Jt(this.element,t.styleSheets,"rx")||"0")},o.prototype.getRy=function(t){return parseFloat(Jt(this.element,t.styleSheets,"ry")||"0")},o}(dg);function cm(n){var o="invisible",t=n.stroke&&0!==n.strokeWidth,i=n.fill;return i&&t?o="fillThenStroke":i?o="fill":t&&(o="stroke"),o}function ZA(n){return n.replace(/[\n\r]/g,"")}function DA(n){return n.replace(/[\t]/g," ")}function mg(n){return n.replace(/ +/g," ")}function UA(n,o,t){switch(Jt(n,t.styleSheets,"text-transform")){case"uppercase":return o.toUpperCase();case"lowercase":return o.toLowerCase();default:return o}}var Up=function(){function n(o,t,i,a){this.textNode=o,this.texts=[],this.textNodes=[],this.contexts=[],this.textAnchor=t,this.originX=i,this.originY=a,this.textMeasures=[]}return n.prototype.setX=function(o){this.originX=o},n.prototype.setY=function(o){this.originY=o},n.prototype.add=function(o,t,i){this.texts.push(t),this.textNodes.push(o),this.contexts.push(i)},n.prototype.rightTrimText=function(){for(var o=this.texts.length-1;o>=0;o--)if("default"===this.contexts[o].attributeState.xmlSpace&&(this.texts[o]=this.texts[o].replace(/\s+$/,"")),this.texts[o].match(/[^\s]/))return!1;return!0},n.prototype.measureText=function(o){for(var t=0;t<this.texts.length;t++)this.textMeasures.push({width:o.textMeasure.measureTextWidth(this.texts[t],this.contexts[t].attributeState),length:this.texts[t].length})},n.prototype.put=function(o,t){var i,a,r,s,l=[],c=[],u=[],m=this.originX,p=this.originY,f=m,b=m;for(i=0;i<this.textNodes.length;i++){a=this.textNodes[i],r=this.contexts[i],s=this.textMeasures[i]||{width:o.textMeasure.measureTextWidth(this.texts[i],this.contexts[i].attributeState),length:this.texts[i].length};var L=m,N=p;if("#text"!==a.nodeName&&!l.includes(a)){l.push(a);var R=n.resolveRelativePositionAttribute(a,"dx");null!==R&&(L+=us(R,r.attributeState.fontSize));var j=n.resolveRelativePositionAttribute(a,"dy");null!==j&&(N+=us(j,r.attributeState.fontSize))}c[i]=L,u[i]=N,m=L+s.width+s.length*t,p=N,f=Math.min(f,L),b=Math.max(b,m)}var G=0;switch(this.textAnchor){case"start":G=0;break;case"middle":G=(b-f)/2;break;case"end":G=b-f}for(i=0;i<this.textNodes.length;i++)if(r=this.contexts[i],"#text"===(a=this.textNodes[i]).nodeName||"hidden"!==r.attributeState.visibility){o.pdf.saveGraphicsState(),sd(r,o,a);var ae=r.attributeState.alignmentBaseline,W=cm(r.attributeState);o.pdf.text(this.texts[i],c[i]-G,u[i],{baseline:tg(ae),angle:o.transform,renderingMode:"fill"===W?void 0:W,charSpace:0===t?void 0:t}),o.pdf.restoreGraphicsState()}return[m,p]},n.resolveRelativePositionAttribute=function(o,t){for(var i,a=o;a&&uc(a,"tspan");){if(a.hasAttribute(t))return a.getAttribute(t);if((null===(i=o.parentElement)||void 0===i?void 0:i.firstChild)!==o)break;a=a.parentElement}return null},n}(),lx=function(n){function o(){return null!==n&&n.apply(this,arguments)||this}return oo(o,n),o.prototype.processTSpans=function(t,i,a,r,s,l){for(var c=a.pdf.getFontSize(),u=a.attributeState.xmlSpace,m=!0,p=!1,f=0;f<i.childNodes.length;f++){var b=i.childNodes[f];if(b.textContent){var L=b.textContent;if("#text"===b.nodeName){var N=ZA(L);N=DA(N),"default"===u&&(N=mg(N),m&&N.match(/^\s/)&&(p=!0),N.match(/[^\s]/)&&(m=!1),l.prevText.match(/\s$/)&&(N=N.replace(/^\s+/,"")));var R=UA(i,N,a);s.add(i,R,a),l.prevText=L,l.prevContext=a}else if(!uc(b,"title")&&uc(b,"tspan")){var j=b,G=j.getAttribute("x");if(null!==G){var ae=us(G,c);s=new Up(this,Jt(j,a.styleSheets,"text-anchor")||a.attributeState.textAnchor,ae,0),r.push({type:"y",chunk:s})}var W=j.getAttribute("y");if(null!==W){var le=us(W,c);s=new Up(this,Jt(j,a.styleSheets,"text-anchor")||a.attributeState.textAnchor,0,le),r.push({type:"x",chunk:s})}var ve=a.clone();sm(ve,t,j),this.processTSpans(t,j,ve,r,s,l)}}}return p},o.prototype.renderCore=function(t){return lo(this,void 0,void 0,function(){var i,a,r,s,l,c,u,m,p,f,b,N,R,j,G,ae,W,le,ve,ce,te,Se;return co(this,function(Ze){if(t.pdf.saveGraphicsState(),i=0,a=0,r=1,s=t.pdf.getFontSize(),l=us(this.element.getAttribute("x"),s),c=us(this.element.getAttribute("y"),s),u=us(this.element.getAttribute("dx"),s),m=us(this.element.getAttribute("dy"),s),p=parseFloat(this.element.getAttribute("textLength")||"0"),f=t.attributeState.visibility,0===this.element.childElementCount)pe=t.attributeState,se=DA(se=ZA(se=b=this.element.textContent||"")),"default"===pe.xmlSpace&&(se=mg(se=se.trim())),N=UA(this.element,se,t),i=t.textMeasure.getTextOffset(N,t.attributeState),p>0&&(R=t.textMeasure.measureTextWidth(N,t.attributeState),"default"===t.attributeState.xmlSpace&&b.match(/^\s/)&&(r=0),a=(p-R)/(N.length-r)||0),"visible"===f&&(j=t.attributeState.alignmentBaseline,G=cm(t.attributeState),t.pdf.text(N,l+u-i,c+m,{baseline:tg(j),angle:t.transform,renderingMode:"fill"===G?void 0:G,charSpace:0===a?void 0:a}));else{for(ae=[],W=new Up(this,t.attributeState.textAnchor,l+u,c+m),ae.push({type:"",chunk:W}),le=this.processTSpans(this,this.element,t,ae,W,{prevText:" ",prevContext:t}),r=le?0:1,ve=!0,ce=ae.length-1;ce>=0;ce--)ve&&(ve=ae[ce].chunk.rightTrimText());p>0&&(te=0,Se=0,ae.forEach(function(se){var pe=se.chunk;pe.measureText(t),pe.textMeasures.forEach(function(Be){te+=Be.width,Se+=Be.length})}),a=(p-te)/(Se-r)),ae.reduce(function(se,pe){var Be=pe.type,Pe=pe.chunk;return"x"===Be?Pe.setX(se[0]):"y"===Be&&Pe.setY(se[1]),Pe.put(t,a)},[0,0])}var se,pe;return t.pdf.restoreGraphicsState(),[2]})})},o.prototype.isVisible=function(t,i){return dc(this,t,i)},o.prototype.getBoundingBoxCore=function(t){return au(this.element,t)},o.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},o}(Zp),cx=function(n){function o(t,i){return n.call(this,!0,t,i)||this}return oo(o,n),o.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},o.prototype.isVisible=function(t,i){return hl(this,t,i)},o.prototype.getPath=function(t){var i,a,r=new(Nr())(Jt(this.element,t.styleSheets,"d")||"").unshort().unarc().abs(),s=new lc;return r.iterate(function(l){switch(l[0]){case"M":s.moveTo(l[1],l[2]);break;case"L":s.lineTo(l[1],l[2]);break;case"H":s.lineTo(l[1],a);break;case"V":s.lineTo(i,l[1]);break;case"C":s.curveTo(l[1],l[2],l[3],l[4],l[5],l[6]);break;case"Q":var c=ha([i,a],[l[1],l[2]]),u=ha([l[3],l[4]],[l[1],l[2]]);s.curveTo(c[0],c[1],u[0],u[1],l[3],l[4]);break;case"Z":s.close()}switch(l[0]){case"M":case"L":i=l[1],a=l[2];break;case"H":i=l[1];break;case"V":a=l[1];break;case"C":i=l[5],a=l[6];break;case"Q":i=l[3],a=l[4]}}),s},o}(ld),ud=/^\s*data:(([^/,;]+\/[^/,;]+)(?:;([^,;=]+=[^,;=]+))?)?(?:;(base64))?,((?:.|\s)*)$/i,pg=function(n){function o(t,i){var a=n.call(this,t,i)||this;return a.imageLoadingPromise=null,a.imageUrl=a.element.getAttribute("xlink:href")||a.element.getAttribute("href"),a.imageUrl&&(a.imageLoadingPromise=o.fetchImageData(a.imageUrl)),a}return oo(o,n),o.prototype.renderCore=function(t){return lo(this,void 0,void 0,function(){var i,a,r,s,l,c,u,m,p,f,b,L;return co(this,function(N){switch(N.label){case 0:return this.imageLoadingPromise?(t.pdf.setCurrentTransformationMatrix(t.transform),i=parseFloat(Jt(this.element,t.styleSheets,"width")||"0"),a=parseFloat(Jt(this.element,t.styleSheets,"height")||"0"),r=parseFloat(Jt(this.element,t.styleSheets,"x")||"0"),s=parseFloat(Jt(this.element,t.styleSheets,"y")||"0"),!isFinite(i)||i<=0||!isFinite(a)||a<=0?[2]:[4,this.imageLoadingPromise]):[2];case 1:return l=N.sent(),c=l.data,0!==(u=l.format).indexOf("svg")?[3,3]:(m=new DOMParser,p=m.parseFromString(c,"image/svg+xml").firstElementChild,(!(f=this.element.getAttribute("preserveAspectRatio"))||f.indexOf("defer")<0||!p.getAttribute("preserveAspectRatio"))&&p.setAttribute("preserveAspectRatio",f||""),p.setAttribute("x",String(r)),p.setAttribute("y",String(s)),p.setAttribute("width",String(i)),p.setAttribute("height",String(a)),[4,dm(p,b={}).render(new sc(t.pdf,{refsHandler:new Mp(b),styleSheets:t.styleSheets,viewport:new cd(i,a),svg2pdfParameters:t.svg2pdfParameters,textMeasure:t.textMeasure}))]);case 2:return N.sent(),[2];case 3:L="data:image/"+u+";base64,"+btoa(c);try{t.pdf.addImage(L,"",r,s,i,a)}catch(R){"object"==typeof console&&console.warn&&console.warn("Could not load image "+this.imageUrl+". \n"+R)}N.label=4;case 4:return[2]}})})},o.prototype.getBoundingBoxCore=function(t){return au(this.element,t)},o.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},o.prototype.isVisible=function(t,i){return hl(this,t,i)},o.fetchImageData=function(t){return lo(this,void 0,void 0,function(){var i,a,r,l;return co(this,function(c){switch(c.label){case 0:if(!(r=t.match(ud)))return[3,1];if("image"!==(l=r[2].split("/"))[0])throw new Error("Unsupported image URL: "+t);return a=l[1],i=r[5],"base64"===r[4]?(i=i.replace(/\s/g,""),i=atob(i)):i=decodeURIComponent(i),[3,3];case 1:return[4,o.fetchImage(t)];case 2:i=c.sent(),a=t.substring(t.lastIndexOf(".")+1),c.label=3;case 3:return[2,{data:i,format:a}]}})})},o.fetchImage=function(t){return new Promise(function(i,a){var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=function(){if(200!==r.status)throw new Error("Error "+r.status+": Failed to load image '"+t+"'");for(var s=new Uint8Array(r.response),l="",c=0;c<s.length;c++)l+=String.fromCharCode(s[c]);i(l)},r.onerror=a,r.onabort=a,r.send(null)})},o.getMimeType=function(t){switch(t=t.toLowerCase()){case"jpg":case"jpeg":return"image/jpeg";default:return"image/"+t}},o}(Zp),Io=function(n){function o(t,i,a){var r=n.call(this,!0,i,a)||this;return r.closed=t,r}return oo(o,n),o.prototype.getPath=function(t){if(!this.element.hasAttribute("points")||""===this.element.getAttribute("points"))return null;var i=o.parsePointsString(this.element.getAttribute("points")),a=new lc;if(i.length<1)return a;a.moveTo(i[0][0],i[0][1]);for(var r=1;r<i.length;r++)a.lineTo(i[r][0],i[r][1]);return this.closed&&a.close(),a},o.prototype.isVisible=function(t,i){return hl(this,t,i)},o.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},o.parsePointsString=function(t){for(var i=Zr(t),a=[],r=0;r<i.length-1;r+=2)a.push([i[r],i[r+1]]);return a},o}(ld),ru=function(n){function o(t,i){return n.call(this,!0,t,i)||this}return oo(o,n),o}(Io),dd=function(n){function o(){return null!==n&&n.apply(this,arguments)||this}return oo(o,n),o.prototype.render=function(t){return Promise.resolve()},o.prototype.getBoundingBoxCore=function(t){return[0,0,0,0]},o.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},o.prototype.isVisible=function(t,i){return hl(this,t,i)},o}(Np),mc=function(n){function o(){return null!==n&&n.apply(this,arguments)||this}return oo(o,n),o.prototype.apply=function(t){return lo(this,void 0,void 0,function(){var i,a,r,s,l;return co(this,function(c){switch(c.label){case 0:i=this.computeNodeTransform(t),a=this.getBoundingBox(t),t.pdf.beginFormObject(a[0],a[1],a[2],a[3],i),function(u){var m=u.attributeState,p=u.pdf,f=1,b=1;f*=m.fillOpacity,f*=m.opacity,m.fill instanceof Ga&&void 0!==m.fill.color.a&&(f*=m.fill.color.a),b*=m.strokeOpacity,b*=m.opacity,m.stroke instanceof Ga&&void 0!==m.stroke.color.a&&(b*=m.stroke.color.a);var L,N={};if(N.opacity=f,N["stroke-opacity"]=b,p.setGState(new nc(N)),m.fill&&m.fill instanceof Ga&&m.fill.color.ok?p.setFillColor(m.fill.color.r,m.fill.color.g,m.fill.color.b):p.setFillColor(0,0,0),p.setLineWidth(m.strokeWidth),m.stroke instanceof Ga?p.setDrawColor(m.stroke.color.r,m.stroke.color.g,m.stroke.color.b):p.setDrawColor(0,0,0),p.setLineCap(m.strokeLinecap),p.setLineJoin(m.strokeLinejoin),m.strokeDasharray?p.setLineDashPattern(m.strokeDasharray,m.strokeDashoffset):p.setLineDashPattern([],0),p.setLineMiterLimit(m.strokeMiterlimit),L=_l.hasOwnProperty(m.fontFamily)?_l[m.fontFamily]:m.fontFamily,m.fill&&m.fill instanceof Ga&&m.fill.color.ok){var R=m.fill.color;p.setTextColor(R.r,R.g,R.b)}else p.setTextColor(0,0,0);var j="";"bold"===m.fontWeight&&(j="bold"),"italic"===m.fontStyle&&(j+="italic"),""===j&&(j="normal"),void 0!==L||void 0!==j?(void 0===L&&(L=_l.hasOwnProperty(m.fontFamily)?_l[m.fontFamily]:m.fontFamily),p.setFont(L,j)):p.setFont("helvetica",j),p.setFontSize(m.fontSize*p.internal.scaleFactor)}(r=new sc(t.pdf,{refsHandler:t.refsHandler,styleSheets:t.styleSheets,viewport:t.viewport,svg2pdfParameters:t.svg2pdfParameters,textMeasure:t.textMeasure})),s=0,l=this.children,c.label=1;case 1:return s<l.length?[4,l[s].render(r)]:[3,4];case 2:c.sent(),c.label=3;case 3:return s++,[3,1];case 4:return t.pdf.endFormObject(this.element.getAttribute("id")),[2]}})})},o.prototype.getBoundingBoxCore=function(t){var i,a=this.element.getAttribute("viewBox");return a&&(i=Zr(a)),[i&&i[0]||0,i&&i[1]||0,i&&i[2]||parseFloat(this.element.getAttribute("markerWidth")||"3"),i&&i[3]||parseFloat(this.element.getAttribute("markerHeight")||"3")]},o.prototype.computeNodeTransformCore=function(t){var i,a=parseFloat(this.element.getAttribute("refX")||"0"),r=parseFloat(this.element.getAttribute("refY")||"0"),s=this.element.getAttribute("viewBox");if(s){var l=Zr(s);i=im(this.element,l,0,0,parseFloat(this.element.getAttribute("markerWidth")||"3"),parseFloat(this.element.getAttribute("markerHeight")||"3"),t,!0),i=t.pdf.matrixMult(t.pdf.Matrix(1,0,0,1,-a,-r),i)}else i=t.pdf.Matrix(1,0,0,1,-a,-r);return i},o.prototype.isVisible=function(t,i){return dc(this,t,i)},o}(am),pc=function(n){function o(t,i){return n.call(this,t,i)||this}return oo(o,n),o.prototype.getR=function(t){var i;return null!==(i=this.r)&&void 0!==i?i:this.r=parseFloat(Jt(this.element,t.styleSheets,"r")||"0")},o.prototype.getRx=function(t){return this.getR(t)},o.prototype.getRy=function(t){return this.getR(t)},o}(dg),um=function(n){function o(t,i){return n.call(this,!1,t,i)||this}return oo(o,n),o}(Io),Ds=function(n){function o(){return null!==n&&n.apply(this,arguments)||this}return oo(o,n),o.prototype.renderCore=function(t){return lo(this,void 0,void 0,function(){var i,a;return co(this,function(r){switch(r.label){case 0:i=0,a=this.children,r.label=1;case 1:return i<a.length?[4,a[i].render(t)]:[3,4];case 2:r.sent(),r.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},o.prototype.getBoundingBoxCore=function(t){return Fp(t,this)},o}(sg),hg=function(n){function o(){return null!==n&&n.apply(this,arguments)||this}return oo(o,n),o.prototype.isVisible=function(t,i){return dc(this,t,i)},o.prototype.render=function(t){return lo(this,void 0,void 0,function(){var i,a,r,s,l;return co(this,function(c){switch(c.label){case 0:return this.isVisible("hidden"!==t.attributeState.visibility,t)?(i=this.getX(t),a=this.getY(t),r=this.getWidth(t),s=this.getHeight(t),t.pdf.saveGraphicsState(),l=t.transform,this.element.hasAttribute("transform")&&(l=t.pdf.matrixMult(om(this.element.getAttribute("transform"),t),l)),t.pdf.setCurrentTransformationMatrix(l),t.withinUse||"visible"===Jt(this.element,t.styleSheets,"overflow")||t.pdf.rect(i,a,r,s).clip().discardPath(),[4,n.prototype.render.call(this,t.clone({transform:t.pdf.unitMatrix,viewport:t.withinUse?t.viewport:new cd(r,s)}))]):[2];case 1:return c.sent(),t.pdf.restoreGraphicsState(),[2]}})})},o.prototype.computeNodeTransform=function(t){return this.computeNodeTransformCore(t)},o.prototype.computeNodeTransformCore=function(t){if(t.withinUse)return t.pdf.unitMatrix;var i,a=this.getX(t),r=this.getY(t),s=this.getViewBox();if(s){var l=this.getWidth(t),c=this.getHeight(t);i=im(this.element,s,a,r,l,c,t)}else i=t.pdf.Matrix(1,0,0,1,a,r);return i},o.prototype.getWidth=function(t){if(void 0!==this.width)return this.width;var i,a,r=t.svg2pdfParameters;if(this.isOutermostSvg(t))if(null!=r.width)i=r.width;else if(a=Jt(this.element,t.styleSheets,"width"))i=parseFloat(a);else{var s=this.getViewBox();if(s&&(null!=r.height||Jt(this.element,t.styleSheets,"height"))){var l=s[2]/s[3];i=this.getHeight(t)*l}else i=Math.min(300,t.viewport.width,2*t.viewport.height)}else i=(a=Jt(this.element,t.styleSheets,"width"))?parseFloat(a):t.viewport.width;return this.width=i},o.prototype.getHeight=function(t){if(void 0!==this.height)return this.height;var i,a,r=t.svg2pdfParameters;if(this.isOutermostSvg(t))if(null!=r.height)i=r.height;else if(a=Jt(this.element,t.styleSheets,"height"))i=parseFloat(a);else{var s=this.getViewBox();if(s){var l=s[2]/s[3];i=this.getWidth(t)/l}else i=Math.min(150,t.viewport.width/2,t.viewport.height)}else i=(a=Jt(this.element,t.styleSheets,"height"))?parseFloat(a):t.viewport.height;return this.height=i},o.prototype.getX=function(t){if(void 0!==this.x)return this.x;if(this.isOutermostSvg(t))return this.x=0;var i=Jt(this.element,t.styleSheets,"x");return this.x=i?parseFloat(i):0},o.prototype.getY=function(t){if(void 0!==this.y)return this.y;if(this.isOutermostSvg(t))return this.y=0;var i=Jt(this.element,t.styleSheets,"y");return this.y=i?parseFloat(i):0},o.prototype.getViewBox=function(){if(void 0!==this.viewBox)return this.viewBox;var t=this.element.getAttribute("viewBox");return this.viewBox=t?Zr(t):void 0},o.prototype.isOutermostSvg=function(t){return t.svg2pdfParameters.element===this.element},o}(Ds),Ag=function(n){function o(){return null!==n&&n.apply(this,arguments)||this}return oo(o,n),o.prototype.isVisible=function(t,i){return dc(this,t,i)},o.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},o}(Ds),_g=function(n){function o(){return null!==n&&n.apply(this,arguments)||this}return oo(o,n),o.prototype.apply=function(t){return lo(this,void 0,void 0,function(){var i,a,r;return co(this,function(s){switch(s.label){case 0:if(!this.isVisible(!0,t))return[2];i=t.pdf.matrixMult(this.computeNodeTransform(t),t.transform),t.pdf.setCurrentTransformationMatrix(i),a=0,r=this.children,s.label=1;case 1:return a<r.length?[4,r[a].render(new sc(t.pdf,{refsHandler:t.refsHandler,styleSheets:t.styleSheets,viewport:t.viewport,withinClipPath:!0,svg2pdfParameters:t.svg2pdfParameters,textMeasure:t.textMeasure}))]:[3,4];case 2:s.sent(),s.label=3;case 3:return a++,[3,1];case 4:return t.pdf.clip().discardPath(),t.pdf.setCurrentTransformationMatrix(i.inversed()),[2]}})})},o.prototype.getBoundingBoxCore=function(t){return Fp(t,this)},o.prototype.isVisible=function(t,i){return dc(this,t,i)},o}(am);function dm(n,o){var t,i=[];switch(function(r,s){for(var l=[],c=0;c<r.childNodes.length;c++){var u=r.childNodes[c];"#"!==u.nodeName.charAt(0)&&l.push(u)}for(c=0;c<l.length;c++)s(0,l[c])}(n,function(r,s){return i.push(dm(s,o))}),n.tagName.toLowerCase()){case"a":case"g":t=new Ag(n,i);break;case"circle":t=new pc(n,i);break;case"clippath":t=new _g(n,i);break;case"ellipse":t=new Dp(n,i);break;case"lineargradient":t=new QA(n,i);break;case"image":t=new pg(n,i);break;case"line":t=new lg(n,i);break;case"marker":t=new mc(n,i);break;case"path":t=new cx(n,i);break;case"pattern":t=new ig(n,i);break;case"polygon":t=new ru(n,i);break;case"polyline":t=new um(n,i);break;case"radialgradient":t=new FA(n,i);break;case"rect":t=new ug(n,i);break;case"svg":t=new hg(n,i);break;case"symbol":t=new NA(n,i);break;case"text":t=new lx(n,i);break;case"use":t=new cg(n,i);break;default:t=new dd(n,i)}if(null!=o&&t.element.hasAttribute("id")){var a=Ip()(t.element.id,{isIdentifier:!0});o[a]=o[a]||t}return t.children.forEach(function(r){return r.setParent(t)}),t}var mm=function(){function n(o,t){this.rootSvg=o,this.loadExternalSheets=t,this.styleSheets=[]}return n.prototype.load=function(){return lo(this,void 0,void 0,function(){var o;return co(this,function(t){switch(t.label){case 0:return[4,this.collectStyleSheetTexts()];case 1:return o=t.sent(),this.parseCssSheets(o),[2]}})})},n.prototype.collectStyleSheetTexts=function(){return lo(this,void 0,void 0,function(){var o,t,i,a,r;return co(this,function(s){switch(s.label){case 0:if(o=[],this.loadExternalSheets&&this.rootSvg.ownerDocument)for(a=0;a<this.rootSvg.ownerDocument.childNodes.length;a++)"xml-stylesheet"===(t=this.rootSvg.ownerDocument.childNodes[a]).nodeName&&"string"==typeof t.data&&o.push(n.loadSheet(t.data.match(/href=["'].*?["']/)[0].split("=")[1].slice(1,-1)));for(i=this.rootSvg.querySelectorAll("style,link"),a=0;a<i.length;a++)uc(r=i[a],"style")?o.push(r.textContent):this.loadExternalSheets&&uc(r,"link")&&"stylesheet"===r.getAttribute("rel")&&r.hasAttribute("href")&&o.push(n.loadSheet(r.getAttribute("href")));return[4,Promise.all(o)];case 1:return[2,s.sent().filter(function(l){return null!==l})]}})})},n.prototype.parseCssSheets=function(o){for(var t=document.implementation.createHTMLDocument(""),i=0,a=o;i<a.length;i++){var r=a[i],s=t.createElement("style");s.textContent=r,t.body.appendChild(s);var l=s.sheet;if(l instanceof CSSStyleSheet){for(var c=l.cssRules.length-1;c>=0;c--){var u=l.cssRules[c];if(u instanceof CSSStyleRule){var m=u;if(m.selectorText.indexOf(",")>=0){l.deleteRule(c);for(var p=m.cssText.substring(m.selectorText.length),f=n.splitSelectorAtCommas(m.selectorText),b=0;b<f.length;b++)l.insertRule(f[b]+p,c+b)}}else l.deleteRule(c)}this.styleSheets.push(l)}}},n.splitSelectorAtCommas=function(o){for(var t,i=/,|["']/g,a=/[^\\]["]/g,r=/[^\\][']/g,s=[],l="initial",c=-1,u=a,m=0;m<o.length;)switch(l){case"initial":i.lastIndex=m,(t=i.exec(o))?(","===t[0]?(s.push(o.substring(c+1,i.lastIndex-1).trim()),c=i.lastIndex-1):(l="withinQuotes",u='"'===t[0]?a:r),m=i.lastIndex):(s.push(o.substring(c+1).trim()),m=o.length);break;case"withinQuotes":u.lastIndex=m,(t=u.exec(o))&&(m=u.lastIndex,l="initial")}return s},n.loadSheet=function(o){return new Promise(function(t,i){var a=new XMLHttpRequest;a.open("GET",o,!0),a.responseType="text",a.onload=function(){200!==a.status&&i(new Error("Error "+a.status+": Failed to load '"+o+"'")),t(a.responseText)},a.onerror=i,a.onabort=i,a.send(null)}).catch(function(){return null})},n.prototype.getPropertyValue=function(o,t){for(var i=[],a=0,r=this.styleSheets;a<r.length;a++)for(var s=r[a],l=0;l<s.cssRules.length;l++){var c=s.cssRules[l];c.style.getPropertyValue(t)&&o.matches(c.selectorText)&&i.push(c)}if(0!==i.length)return i.reduce(function(u,m){return f=m,1===((b=(p=u).style.getPropertyPriority(t))!==f.style.getPropertyPriority(t)?"important"===b?1:-1:function(n,o){var t,i,a;if("string"==typeof n){if(-1!==n.indexOf(","))throw"Invalid CSS selector";t=MA(n).specificityArray}else{if(!Array.isArray(n))throw"Invalid CSS selector or specificity array";if(4!==n.filter(function(r){return"number"==typeof r}).length)throw"Invalid specificity array";t=n}if("string"==typeof o){if(-1!==o.indexOf(","))throw"Invalid CSS selector";i=MA(o).specificityArray}else{if(!Array.isArray(o))throw"Invalid CSS selector or specificity array";if(4!==o.filter(function(r){return"number"==typeof r}).length)throw"Invalid specificity array";i=o}for(a=0;a<4;a+=1){if(t[a]<i[a])return-1;if(t[a]>i[a])return 1}return 0}(p.selectorText,f.selectorText))?u:m;var p,f,b}).style.getPropertyValue(t)||void 0},n}(),fg=function(){function n(){this.measureMethods={}}return n.prototype.getTextOffset=function(o,t){var i=t.textAnchor;if("start"===i)return 0;var a=this.measureTextWidth(o,t),r=0;switch(i){case"end":r=a;break;case"middle":r=a/2}return r},n.prototype.measureTextWidth=function(o,t){return 0===o.length?0:this.getMeasureFunction(t.fontFamily).call(this,o,t.fontFamily,t.fontSize+"px",t.fontStyle,t.fontWeight)},n.prototype.getMeasurementTextNode=function(){if(!this.textMeasuringTextElement){this.textMeasuringTextElement=document.createElementNS("http://www.w3.org/2000/svg","text");var o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.appendChild(this.textMeasuringTextElement),o.style.setProperty("position","absolute"),o.style.setProperty("visibility","hidden"),document.body.appendChild(o)}return this.textMeasuringTextElement},n.prototype.canvasTextMeasure=function(o,t,i,a,r){var s=document.createElement("canvas").getContext("2d");return null!=s?(s.font=[a,r,i,t].join(" "),s.measureText(o).width):0},n.prototype.svgTextMeasure=function(o,t,i,a,r,s){void 0===s&&(s=this.getMeasurementTextNode());var l=s;return l.setAttribute("font-family",t),l.setAttribute("font-size",i),l.setAttribute("font-style",a),l.setAttribute("font-weight",r),l.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),l.textContent=o,l.getBBox().width},n.prototype.getMeasureFunction=function(o){var t=this.measureMethods[o];if(!t){var i=this.canvasTextMeasure(n.testString,o,"16px","normal","normal"),a=this.svgTextMeasure(n.testString,o,"16px","normal","normal");t=Math.abs(i-a)<n.epsilon?this.canvasTextMeasure:this.svgTextMeasure,this.measureMethods[o]=t}return t},n.prototype.cleanupTextMeasuring=function(){if(this.textMeasuringTextElement){var o=this.textMeasuringTextElement.parentNode;o&&document.body.removeChild(o),this.textMeasuringTextElement=void 0}},n.testString="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789!\"$%&/()=?'\\+*-_.:,;^}][{#~|<>",n.epsilon=.1,n}();In.API.svg=function(n,o){return void 0===o&&(o={}),function gg(n,o,t){var i,a,r;return void 0===t&&(t={}),lo(this,void 0,void 0,function(){var s,l,c,u,m,p,f,b,L,N,R;return co(this,function(j){switch(j.label){case 0:return s=null!==(i=t.x)&&void 0!==i?i:0,l=null!==(a=t.y)&&void 0!==a?a:0,c=null!==(r=t.loadExternalStyleSheets)&&void 0!==r&&r,m=new Mp(u={}),[4,(p=new mm(n,c)).load()];case 1:return j.sent(),f=new cd(o.internal.pageSize.getWidth(),o.internal.pageSize.getHeight()),b=LA(LA({},t),{element:n}),L=new fg,N=new sc(o,{refsHandler:m,styleSheets:p,viewport:f,svg2pdfParameters:b,textMeasure:L}),o.advancedAPI(),o.saveGraphicsState(),o.setCurrentTransformationMatrix(o.Matrix(1,0,0,1,s,l)),o.setLineWidth(N.attributeState.strokeWidth),o.setFillColor((R=N.attributeState.fill.color).r,R.g,R.b),o.setFont(N.attributeState.fontFamily),o.setFontSize(N.attributeState.fontSize*o.internal.scaleFactor),[4,dm(n,u).render(N)];case 2:return j.sent(),o.restoreGraphicsState(),o.compatAPI(),N.textMeasure.cleanupTextMeasuring(),[2,o]}})})}(n,this,o)};var hc=I(37398);class jp{constructor(o,t){this.shareFileFlutterService=o,this.http=t,this.linkDataFile=""}initPdfData(o){return this.linkDataFile=o,this}createAnswerSheet(){return new ee.y(o=>{o.next({success:1,message:"success"}),o.complete()})}exportPdf(o){this.linkDataFile.includes("https:")?this.downloadFile().subscribe(t=>{this.shareFileFlutterService.shareFileWithBlob(t,o)}):this.shareFileFlutterService.shareFileWithBase64(this.linkDataFile,o)}downloadFile(){return this.http.get(this.linkDataFile,{responseType:"blob"}).pipe((0,hc.U)(o=>o))}}var Ac=I(97151);let jA=(()=>{class n{constructor(t,i,a,r){this.cdnService=t,this.shareFileFlutterService=i,this.http=a,this.commonService=r}createAnswerSheet(){return new ee.y(t=>{this.creator?this.creator.createAnswerSheet().subscribe(i=>{i.success?(t.next({success:1,message:"successful"}),t.complete()):(t.next({success:0,message:i.message}),t.complete())}):(t.next({success:0,message:"Not find creator"}),t.complete())})}createAzotaAnswerSheet_A4(t){const i=new jp(this.shareFileFlutterService,this.http);return this.creator=i.initPdfData(this.cdnService.convertCdnLinkOfGitHubWithCurrentLocale(`medias_[LANG]/answer_sheet_pdf_v4/answer_sheet_a4_pdf_v3/answer_sheet_a4_v2_${t&&t<=120?parseInt(t.toString(),10):120}.pdf`)),this}createA4AnswerSheet_35hh(t){const i=new jp(this.shareFileFlutterService,this.http);return this.creator=i.initPdfData(this.cdnService.convertCdnLinkOfGitHubWithCurrentLocale(`medias_[LANG]/answer_sheet_pdf_v4/answer_sheet_a4_hh_1/answer_sheet_a4_50hh_${t&&t<=50?parseInt(t.toString(),10):50}.pdf`)),this}createA5AnswerSheetFullA4_50(t){const i=new jp(this.shareFileFlutterService,this.http);return this.creator=i.initPdfData(this.cdnService.convertCdnLinkOfGitHubWithCurrentLocale(`medias_[LANG]/answer_sheet_pdf_v4/answer_sheet_a5/answer_sheet_a5_${t&&t<=50?parseInt(t.toString(),10):50}_full.pdf`)),this}createA6AnswerSheetFullA4_20(t){const i=new jp(this.shareFileFlutterService,this.http);return this.creator=i.initPdfData(this.cdnService.convertCdnLinkOfGitHubWithCurrentLocale(`medias_[LANG]/answer_sheet_pdf_v4/answer_sheet_a6_20/answer_sheet_a6_20_${t&&t<=20?parseInt(t.toString(),10):20}_full_a4.pdf`)),this}createTrueFalseAnswerSheet(){return this}readTTFFile(t){return new ee.y(i=>{this.http.get(t,{responseType:"text"}).subscribe(a=>{i.next(a),i.complete()},a=>{console.error("Error reading file:",a),i.next(""),i.complete()})})}addFontToJsPDF(t,i){return new ee.y(a=>{let r=0;i.forEach(s=>{this.readTTFFile(s).subscribe(l=>{if(l){let c=s.includes("-italic")?"italic":s.includes("-bolditalic")?"bolditalic":s.includes("-bold.")?"bold":"normal";t.addFileToVFS("Times New Roman "+c+".ttf",l??""),t.addFont("Times New Roman "+c+".ttf","Times New Roman",c)}r++,r==i.length&&(a.next(t),a.complete())})})})}checkAndLoadLibLibAnswersheet(){return new Promise((t,i)=>{Object.prototype.hasOwnProperty.call(window,"azotaAnswerSheet")?t():this.commonService.loadScriptPromises([{source:this.cdnService.registerJsCdn("azota_answer_sheet_script"),name:"azota_answer_sheet_script"}]).then(()=>{t()}).catch(a=>{i(a)})})}downloadTrueFalseAnswerSheet(t,i){return new ee.y(a=>{this.checkAndLoadLibLibAnswersheet().then(()=>{let r=Ki.x,s=window.azotaAnswerSheet.generateAnswerSheet(i.answerSheetTemplate,Number(i.amountTemplateMultipleChoiceA4),Number(i.amountTemplateStartMultipleChoiceA4)??1,Number(i.amountTemplateTrueFalseA4),Number(i.amountTemplateStartTrueFalseA4)??1,Number(i.amountTemplateFillA4),Number(i.amountTemplateStartFillA4)??1);s=s.replace("<svg",'<svg xmlns="http://www.w3.org/2000/svg"');let l=s.indexOf('width="'),c=s.indexOf('height="'),u=s.substring(l+7,s.indexOf('"',l+7)),m=s.substring(c+8,s.indexOf('"',c+8)),p=document.createElement("div");p.innerHTML=s;try{const f=p.firstElementChild;let b=new In(i.answerSheetTemplate==r.templateTrueFalseA5||i.answerSheetTemplate==r.templateA5Full50?"l":"p","pt",[Number(u),Number(m)]),L=[this.cdnService.convertCdnLinkOfGitHub("fonts/font-times-new-roman-normal.txt"),this.cdnService.convertCdnLinkOfGitHub("fonts/font-times-new-roman-bold.txt"),this.cdnService.convertCdnLinkOfGitHub("fonts/font-times-new-roman-italic.txt"),this.cdnService.convertCdnLinkOfGitHub("fonts/font-times-new-roman-bolditalic.txt")];this.addFontToJsPDF(b,L).subscribe(N=>{N.svg(f,{width:Number(u),height:Number(m)}).then(()=>{b.save(t+".pdf"),a.next({success:1,message:"successful"}),a.complete()})})}catch{a.next({success:0,message:"lang_core_invalid_data"}),a.complete()}}).catch(()=>{a.next({success:0,message:"lang_core_invalid_data"}),a.complete()})})}exportPdf(t){this.creator&&this.creator.exportPdf(t+".pdf")}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(tr.E),e.LFG(Ac.g),e.LFG(V.eN),e.LFG(Yn.z))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var vi=I(43389);function ux(n,o){if(1&n&&e._UZ(0,"azt-loading-effect",4),2&n){const t=e.oxw();e.Q6J("currentStatusObj",t.statusObj)}}function qA(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"img",5),e.NdJ("load",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.answersheetImageLoaded())}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("src",t.curAnswersheetImage,e.LSH)}}let xg=(()=>{class n extends xe.Q{getAnswersheetImageUrl(t){return new ee.y(i=>{switch(t){case this.allAnswerSheet.templateOriginalA4:case this.allAnswerSheet.templateA4WithColorNew:this.generateTrueFalseTemplate({answerSheetTemplate:t,amountTemplateTrueFalseA4:0,amountTemplateStartTrueFalseA4:1,amountTemplateMultipleChoiceA4:this.amountTemplateOriginalA4??120,amountTemplateStartMultipleChoiceA4:1,amountTemplateFillA4:0,amountTemplateStartFillA4:1}).subscribe(u=>{i.next(u),i.complete()});break;case this.allAnswerSheet.templateA5Full50:this.generateTrueFalseTemplate({answerSheetTemplate:t,amountTemplateTrueFalseA4:0,amountTemplateStartTrueFalseA4:1,amountTemplateMultipleChoiceA4:this.amountTemplateA5??60,amountTemplateStartMultipleChoiceA4:1,amountTemplateFillA4:0,amountTemplateStartFillA4:1}).subscribe(u=>{i.next(u),i.complete()});break;case this.allAnswerSheet.templateA4Essay:this.generateTrueFalseTemplate({answerSheetTemplate:t,amountTemplateTrueFalseA4:0,amountTemplateStartTrueFalseA4:1,amountTemplateMultipleChoiceA4:this.amountTemplateEssayA4??36,amountTemplateStartMultipleChoiceA4:1,amountTemplateFillA4:0,amountTemplateStartFillA4:1}).subscribe(u=>{i.next(u),i.complete()});break;case this.allAnswerSheet.templateA6Full20:this.generateTrueFalseTemplate({answerSheetTemplate:t,amountTemplateTrueFalseA4:0,amountTemplateStartTrueFalseA4:1,amountTemplateMultipleChoiceA4:this.amountTemplateA6??32,amountTemplateStartMultipleChoiceA4:1,amountTemplateFillA4:0,amountTemplateStartFillA4:1}).subscribe(u=>{i.next(u),i.complete()});break;case this.allAnswerSheet.templateTrueFalseA4:case this.allAnswerSheet.templateTrueFalseA4WithColor:case this.allAnswerSheet.templateTrueFalseEssayA4:case this.allAnswerSheet.templateTrueFalseA5:case this.allAnswerSheet.templateTrueFalseA6:case this.allAnswerSheet.templateA4WithFax:case this.allAnswerSheet.templateA4WithFaxV2:this.generateTrueFalseTemplate({answerSheetTemplate:t,amountTemplateTrueFalseA4:this.amountTemplateTrueFalseA4??8,amountTemplateStartTrueFalseA4:this.amountTemplateStartTrueFalseA4??1,amountTemplateMultipleChoiceA4:this.amountTemplateMultipleChoiceA4??40,amountTemplateStartMultipleChoiceA4:this.amountTemplateStartMultipleChoiceA4??1,amountTemplateFillA4:this.amountTemplateFillA4??6,amountTemplateStartFillA4:this.amountTemplateStartFillA4??1}).subscribe(u=>{i.next(u),i.complete()});break;default:i.next(""),i.complete()}})}previewAnswersheetImage(){this.getAnswersheetImageUrl(this.answersheetTemplate).subscribe(t=>{this.sAztDialogService.open(al.q,{maxWidth:"100vw",maxHeight:"100vh",height:"100%",width:"100%",data:{fileOption:{name:"",mimes:"image/jpeg",url:t,index:0},viewFullImageWithScroll:!0,showDownloadIcon:!1},restoreFocus:!1})})}generateTrueFalseTemplate(t){return new ee.y(i=>{this.answerSheetHelper.checkAndLoadLibLibAnswersheet().then(()=>{try{let a=window.azotaAnswerSheet.generateAnswerSheet(t.answerSheetTemplate,Number(t.amountTemplateMultipleChoiceA4),Number(t.amountTemplateStartMultipleChoiceA4),Number(t.amountTemplateTrueFalseA4),Number(t.amountTemplateStartTrueFalseA4),Number(t.amountTemplateFillA4),Number(t.amountTemplateStartFillA4));a=a.replace("<svg",'<svg xmlns="http://www.w3.org/2000/svg"');let r=new Blob([a],{type:"image/svg+xml"});i.next(URL.createObjectURL(r)),i.complete()}catch{}})})}answersheetImageLoaded(){this.previewAnswersheetImageLoading=!1,URL.revokeObjectURL(this.curAnswersheetImage)}initImageUrls(){this.previewAnswersheetImageLoading=!0,this.initStatusObj(),this.getAnswersheetImageUrl(this.answersheetTemplate).subscribe(t=>{this.curAnswersheetImage=t,this.stopStatusObj()})}ngOnChanges(){this.initImageUrls()}ngOnInit(){this.initImageUrls(),super.ngOnInit()}constructor(t,i,a){super(),this.answerSheetHelper=t,this.sAztDialogService=i,this.cdnService=a,this.answersheetTemplate=11,this.amountTemplateOriginalA4=120,this.amountTemplateA5=50,this.amountTemplateA6=20,this.amountTemplateEssayA4=50,this.amountTemplateTrueFalseA4=120,this.amountTemplateStartTrueFalseA4=120,this.amountTemplateMultipleChoiceA4=120,this.amountTemplateStartMultipleChoiceA4=120,this.amountTemplateFillA4=120,this.amountTemplateStartFillA4=120,this.curAnswersheetImage="",this.previewAnswersheetImageLoading=!0,this.allAnswerSheet=Ki.x}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(jA),e.Y36(qi.C),e.Y36(tr.E))},n.\u0275cmp=e.Xpm({type:n,selectors:[["preview-answer-sheet-dialog"]],inputs:{answersheetTemplate:"answersheetTemplate",amountTemplateOriginalA4:"amountTemplateOriginalA4",amountTemplateA5:"amountTemplateA5",amountTemplateA6:"amountTemplateA6",amountTemplateEssayA4:"amountTemplateEssayA4",amountTemplateTrueFalseA4:"amountTemplateTrueFalseA4",amountTemplateStartTrueFalseA4:"amountTemplateStartTrueFalseA4",amountTemplateMultipleChoiceA4:"amountTemplateMultipleChoiceA4",amountTemplateStartMultipleChoiceA4:"amountTemplateStartMultipleChoiceA4",amountTemplateFillA4:"amountTemplateFillA4",amountTemplateStartFillA4:"amountTemplateStartFillA4"},features:[e.qOj,e.TTD],decls:5,vars:2,consts:[[1,"flex","mx-auto","w-full","sm:w-3/4",2,"max-height","100%"],["azt-track-service","preivew-answersheet-dialog--hf6Yx84YB",1,"w-full","flex-none","rounded-md","overflow-hidden","clickable","p-2","border","border-slate-200","dark:border-darkmode-400",2,"height","100%",3,"click"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],["doneLoading",""],[3,"currentStatusObj"],[2,"height","auto",3,"src","load"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1),e.NdJ("click",function(){return i.previewAnswersheetImage()}),e.YNc(2,ux,1,1,"azt-loading-effect",2),e.YNc(3,qA,1,1,"ng-template",null,3,e.W1O),e.qZA()()),2&t){const a=e.MAs(4);e.xp6(2),e.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a)}},dependencies:[F.O5,vi.l],encapsulation:2}),n})();var Za=I(49870),Us=I(85929),qp=I(17997);let bg=(()=>{class n{constructor(t){this.answerTypeService=t,this.allAnswerSheet=Ki.x}calcExamPart(t,i,a){let r=0,s=0,l=i.find(m=>this.answerTypeService.isOneChoiceAnswer({answerType:m.answerType}));t.controls.amountTemplateMultipleChoiceA4.setValue(l?.totalQuestion??0),r=l?.totalQuestion??0;let c=i.find(m=>this.answerTypeService.isTrueFalseAnswer({answerType:m.answerType}));t.controls.amountTemplateTrueFalseA4.setValue(c?.totalQuestion??0),s=c?.totalQuestion??0,c&&t.controls.answersheetTemplate.setValue(i.find(m=>this.answerTypeService.isEssayAnswer({answerType:m.answerType}))?this.allAnswerSheet.templateTrueFalseEssayA4:this.allAnswerSheet.templateTrueFalseA4);let u=i.find(m=>this.answerTypeService.isFillAnswer({answerType:m.answerType}));return t.controls.amountTemplateFillA4.setValue(u?.totalQuestion??0),u&&t.controls.answersheetTemplate.setValue(i.find(m=>this.answerTypeService.isEssayAnswer({answerType:m.answerType}))?this.allAnswerSheet.templateTrueFalseEssayA4:this.allAnswerSheet.templateTrueFalseA4),a||(t.controls.amountTemplateStartTrueFalseA4.setValue(r+1),t.controls.amountTemplateStartFillA4.setValue(r+s+1)),t.updateValueAndValidity(),t}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(fr.i))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function RA(n,o){if(1&n&&e._UZ(0,"azt-loading-effect",4),2&n){const t=e.oxw();e.Q6J("currentStatusObj",t.statusObj)}}function zA(n,o){1&n&&(e.TgZ(0,"span",55),e._UZ(1,"azt-loading-ui"),e.qZA())}function vg(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"input",56),e.NdJ("change",function(a){e.CHM(t);const r=e.oxw(3);return e.KtG(r.changeConfigSubjectMark(a))}),e.qZA()}}function dx(n,o){if(1&n&&(e.TgZ(0,"div",45)(1,"div",46)(2,"div",47)(3,"label",48),e._uU(4),e.ALo(5,"mytranslate"),e.qZA(),e.TgZ(6,"div",49)(7,"div"),e._uU(8),e.ALo(9,"mytranslate"),e.qZA(),e.TgZ(10,"div",50),e._uU(11),e.ALo(12,"mytranslate"),e.qZA()()(),e.TgZ(13,"div",51)(14,"div",52),e.YNc(15,zA,2,0,"span",53),e.YNc(16,vg,1,0,"input",54),e.qZA()()()()),2&n){const t=e.oxw(2);e.xp6(4),e.hij(" ",e.lcZ(5,5,"lang_config_create_exam_multiple_component")," "),e.xp6(4),e.Oqu(e.lcZ(9,7,"lang_config_create_exam_multiple_component_description_120")),e.xp6(3),e.Oqu(e.lcZ(12,9,"lang_config_create_exam_multiple_component_description_80")),e.xp6(4),e.Q6J("ngIf",t.loadingSaveConfigMultiple),e.xp6(1),e.Q6J("ngIf",!t.loadingSaveConfigMultiple)}}function mx(n,o){1&n&&(e.TgZ(0,"div",64)(1,"div",65)(2,"a",66),e._UZ(3,"img",67),e.ALo(4,"convertCdnLinkOfGitHub"),e.qZA(),e.TgZ(5,"a",68),e._UZ(6,"img",69),e.ALo(7,"convertCdnLinkOfGitHub"),e.qZA()()()),2&n&&(e.xp6(3),e.Q6J("src",e.lcZ(4,2,"images/google-play-badge.svg"),e.LSH),e.xp6(3),e.Q6J("src",e.lcZ(7,4,"images/2928664.svg"),e.LSH))}function wg(n,o){1&n&&(e.TgZ(0,"p",60),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_su_dung_ma_qr_de_tai_app_azota")," "))}function px(n,o){1&n&&(e.TgZ(0,"div",64)(1,"div",70)(2,"p",71)(3,"span",72),e._uU(4,"Google Play"),e.qZA(),e._UZ(5,"azt-download-qr-code",73),e.qZA(),e.TgZ(6,"p",74)(7,"span",72),e._uU(8,"App Store"),e.qZA(),e._UZ(9,"azt-download-qr-code",73),e.qZA()()()),2&n&&(e.xp6(5),e.Q6J("fileName","azota_exam_qr_code_google_app")("linkUrl","https://play.google.com/store/apps/details?id=azt.teacher"),e.xp6(4),e.Q6J("fileName","azota_exam_qr_code_app_store")("linkUrl","https://apps.apple.com/vn/app/azota-teacher/id1658231068"))}function hx(n,o){if(1&n&&(e.TgZ(0,"div",57)(1,"div",58)(2,"div",59)(3,"p",60),e._uU(4),e.ALo(5,"mytranslate"),e.qZA(),e.YNc(6,mx,8,6,"div",61),e.qZA(),e.TgZ(7,"div",62),e.YNc(8,wg,3,3,"p",63),e.YNc(9,px,10,4,"div",61),e.qZA()()()),2&n){const t=e.oxw(2);e.xp6(4),e.hij(" ",e.lcZ(5,4,"lang_core_tai_app_tai_day")," "),e.xp6(2),e.Q6J("ngIf",!t.isMobileWebView),e.xp6(2),e.Q6J("ngIf",!t.isMobileWebView),e.xp6(1),e.Q6J("ngIf",!t.isMobileWebView)}}function Ax(n,o){1&n&&(e.TgZ(0,"span"),e.O4$(),e.TgZ(1,"svg",75),e._UZ(2,"path",76)(3,"polyline",77)(4,"line",78),e.qZA()())}function _x(n,o){1&n&&(e.TgZ(0,"span",79),e._UZ(1,"azt-loading-ui"),e.qZA())}function fx(n,o){1&n&&(e.TgZ(0,"span",80),e._UZ(1,"azt-loading-ui"),e.qZA())}function HA(n,o){1&n&&(e.TgZ(0,"span",81),e._UZ(1,"lucide-icon",82),e.qZA())}const yg=function(n){return[n]};function JA(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",5)(1,"div",6),e._uU(2),e.qZA(),e.TgZ(3,"div",7)(4,"h3",8),e._uU(5),e.ALo(6,"mytranslate"),e._UZ(7,"notice-print-a4-paper-box"),e.qZA(),e.TgZ(8,"div",9)(9,"form",10)(10,"div",11)(11,"div",12)(12,"div",13)(13,"div",14)(14,"div",15),e._UZ(15,"app-testbank-choose-answer-sheet",16),e.qZA(),e.YNc(16,dx,17,11,"div",17),e.qZA(),e.TgZ(17,"div",14),e._UZ(18,"preview-answer-sheet-dialog",18),e.qZA()()(),e.YNc(19,hx,10,6,"div",19),e.qZA(),e.TgZ(20,"div",20)(21,"button",21),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.printExamAnswersheet(null==a.dataConfigDocument||null==a.dataConfigDocument.offlineExamObj?null:a.dataConfigDocument.offlineExamObj.hashId))}),e.YNc(22,Ax,5,0,"span",22),e.YNc(23,_x,2,0,"span",23),e.TgZ(24,"span"),e._uU(25),e.ALo(26,"mytranslate"),e.qZA()()()()()(),e.TgZ(27,"div",24)(28,"h3",8),e._uU(29),e.ALo(30,"mytranslate"),e.qZA(),e.TgZ(31,"div",25)(32,"div",26)(33,"div",27)(34,"p",28)(35,"span",29),e._UZ(36,"lucide-icon",30),e.qZA(),e._uU(37),e.ALo(38,"mytranslate"),e.qZA(),e.TgZ(39,"div",31),e._UZ(40,"input",32),e.TgZ(41,"button",33),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.exportExcelForAnswerSheet())}),e.YNc(42,fx,2,0,"span",34),e.YNc(43,HA,2,0,"ng-template",null,35,e.W1O),e._uU(45),e.ALo(46,"mytranslate"),e.qZA()()()()()(),e.TgZ(47,"div",24)(48,"h3",8),e._uU(49),e.ALo(50,"mytranslate"),e.qZA(),e.TgZ(51,"div",25)(52,"div",26),e._UZ(53,"numbering-identification",36),e.ALo(54,"mustInClassroom"),e.qZA()()(),e.TgZ(55,"div",37)(56,"div",38)(57,"a",39),e.ALo(58,"navigationLocalize"),e.TgZ(59,"span",40),e._UZ(60,"lucide-icon",41),e.qZA(),e._uU(61),e.ALo(62,"mytranslate"),e.qZA()(),e.TgZ(63,"div",42)(64,"a",43),e.ALo(65,"navigationLocalize"),e.TgZ(66,"span",40),e._UZ(67,"lucide-icon",44),e.qZA(),e._uU(68),e.ALo(69,"mytranslate"),e.qZA()()()()}if(2&n){const t=e.MAs(44),i=e.oxw();let a,r;e.xp6(2),e.hij(" ",i.titleExam," "),e.xp6(3),e.hij(" ",e.lcZ(6,38,"lang_auto_in_phieu_tra_loi")," "),e.xp6(4),e.Q6J("formGroup",i.form),e.xp6(6),e.Q6J("form",i.form)("resetQuestionIndex",i.resetQuestionIndex)("formArrayName","answersheetTemplate"),e.xp6(1),e.Q6J("ngIf",i.canUseSubjectMark),e.xp6(2),e.Q6J("answersheetTemplate",i.form.controls.answersheetTemplate.value)("amountTemplateOriginalA4",i.form.controls.amountTemplateOriginalA4.value)("amountTemplateA5",i.form.controls.amountTemplateA5.value)("amountTemplateA6",i.form.controls.amountTemplateA6.value)("amountTemplateEssayA4",i.form.controls.amountTemplateEssayA4.value)("amountTemplateTrueFalseA4",i.form.controls.amountTemplateTrueFalseA4.value)("amountTemplateStartTrueFalseA4",i.form.controls.amountTemplateStartTrueFalseA4.value)("amountTemplateMultipleChoiceA4",i.form.controls.amountTemplateMultipleChoiceA4.value)("amountTemplateStartMultipleChoiceA4",i.form.controls.amountTemplateStartMultipleChoiceA4.value)("amountTemplateFillA4",i.form.controls.amountTemplateFillA4.value)("amountTemplateStartFillA4",i.form.controls.amountTemplateStartFillA4.value),e.xp6(1),e.Q6J("ngIf",!i.isMobileWebView),e.xp6(2),e.Q6J("disabled",(i.form.controls.answersheetTemplate.value==i.allAnswerSheet.templateOriginalA4||i.form.controls.answersheetTemplate.value==i.allAnswerSheet.templateA4WithColorNew)&&i.form.controls.amountTemplateOriginalA4.errors||i.form.controls.answersheetTemplate.value==i.allAnswerSheet.templateA5Full50&&i.form.controls.amountTemplateA5.errors||i.form.controls.answersheetTemplate.value==i.allAnswerSheet.templateA4Essay&&i.form.controls.amountTemplateEssayA4.errors||i.form.controls.answersheetTemplate.value==i.allAnswerSheet.templateA6Full20&&i.form.controls.amountTemplateA6.errors||(i.form.controls.answersheetTemplate.value==i.allAnswerSheet.templateTrueFalseA4||i.form.controls.answersheetTemplate.value==i.allAnswerSheet.templateTrueFalseA4WithColor||i.form.controls.answersheetTemplate.value==i.allAnswerSheet.templateTrueFalseEssayA4||i.form.controls.answersheetTemplate.value==i.allAnswerSheet.templateTrueFalseA5||i.form.controls.answersheetTemplate.value==i.allAnswerSheet.templateTrueFalseA6||i.form.controls.answersheetTemplate.value==i.allAnswerSheet.templateA4WithFax||i.form.controls.answersheetTemplate.value==i.allAnswerSheet.templateA4WithFaxV2)&&i.form.controls.amountTemplateTrueFalseA4.errors||(i.form.controls.answersheetTemplate.value==i.allAnswerSheet.templateTrueFalseA4||i.form.controls.answersheetTemplate.value==i.allAnswerSheet.templateTrueFalseA4WithColor||i.form.controls.answersheetTemplate.value==i.allAnswerSheet.templateTrueFalseEssayA4||i.form.controls.answersheetTemplate.value==i.allAnswerSheet.templateTrueFalseA5||i.form.controls.answersheetTemplate.value==i.allAnswerSheet.templateTrueFalseA6||i.form.controls.answersheetTemplate.value==i.allAnswerSheet.templateA4WithFax||i.form.controls.answersheetTemplate.value==i.allAnswerSheet.templateA4WithFaxV2)&&i.form.controls.amountTemplateMultipleChoiceA4.errors||(i.form.controls.answersheetTemplate.value==i.allAnswerSheet.templateTrueFalseA4||i.form.controls.answersheetTemplate.value==i.allAnswerSheet.templateTrueFalseA4WithColor||i.form.controls.answersheetTemplate.value==i.allAnswerSheet.templateTrueFalseEssayA4||i.form.controls.answersheetTemplate.value==i.allAnswerSheet.templateTrueFalseA5||i.form.controls.answersheetTemplate.value==i.allAnswerSheet.templateTrueFalseA6||i.form.controls.answersheetTemplate.value==i.allAnswerSheet.templateA4WithFax||i.form.controls.answersheetTemplate.value==i.allAnswerSheet.templateA4WithFaxV2)&&i.form.controls.amountTemplateFillA4.errors),e.xp6(1),e.Q6J("ngIf",!i.isLoadingPrintTicket),e.xp6(1),e.Q6J("ngIf",i.isLoadingPrintTicket),e.xp6(2),e.Oqu(e.lcZ(26,40,"lang_auto_tai_phieu_tra_loi")),e.xp6(4),e.hij(" ",e.lcZ(30,42,"lang_auto_dap_an_de_thi_offline")," "),e.xp6(8),e.hij(" ",e.lcZ(38,44,"lang_auto_file_answer_list")," "),e.xp6(3),e.s9C("value",i.createNameExam("answerexcel",!0)),e.xp6(2),e.Q6J("ngIf",i.isLoadingPrintAnswer)("ngIfElse",t),e.xp6(3),e.hij(" ",e.lcZ(46,46,"lang_auto_tai_ve")," "),e.xp6(4),e.hij(" ",e.lcZ(50,48,"lang_auto_danh_so_bao_danh")," "),e.xp6(4),e.Q6J("hashId",null==i.dataConfigDocument||null==i.dataConfigDocument.examObj?null:i.dataConfigDocument.examObj.hashId)("checkStudentCode",e.lcZ(54,50,null==i.dataConfigDocument?null:i.dataConfigDocument.examObj))("styleView",1)("startStudentCode",i.startStudentCode),e.xp6(4),e.Q6J("routerLink",e.VKq(60,yg,e.lcZ(58,52,"/admin/testbank/exam-results-list/"+(null!==(a=null==i.examObj?null:i.examObj.categoryId)&&void 0!==a?a:0)+"/"+(null==i.examObj?null:i.examObj.id)+"/0"))),e.xp6(4),e.hij(" ",e.lcZ(62,54,"lang_auto_quan_ly_danh_sach_da_thi")," "),e.xp6(3),e.Q6J("routerLink",e.VKq(62,yg,e.lcZ(65,56,"/admin/testbank/document-management/0/"+(null!==(r=null==i.examObj?null:i.examObj.categoryId)&&void 0!==r?r:0)+"/1"))),e.xp6(4),e.hij(" ",e.lcZ(69,58,"lang_auto_ve_trang_quan_ly_file")," ")}}function gx(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"azt-export-excel-for-answersheet",83),e.NdJ("exportDataDone",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.exportDataDone(a))}),e.qZA()}if(2&n){const t=e.oxw();let i;e.Q6J("startQuestionIndex",null!==(i=null==t.examObj?null:t.examObj.startQuestionIndex)&&void 0!==i?i:1)("obj",t.exportExcelData)}}let ln=(()=>{class n extends xe.Q{saveConfig(){return new Promise(t=>{let a={subjectMarks:this.form.getRawValue().subjectMarks?1:0,isSaveConfig:0};this.waitDestroy(this.documentConfigService.apiDocumentConfigSaveExamConfigPost(this.examHashId,a).subscribe(r=>{t(1==r.success)}))})}printExamAnswersheet(t){this.isLoadingPrintTicket=!0,this.waitDestroy(this.offlineMixQuestionService.apiOfflineMixQuestionGetObjsGet(this.dataConfigDocument?.examObj?.hashId??"",t??"","").subscribe(i=>{if(i.success){let a=this.getTotalQuestionInMixQuestionObjs(i.data?.mixQuestionObjs??[],i.data?.questionObjs??[]);if(a){const r=a;let s=Number(this.form.controls.answersheetTemplate.value)??this.allAnswerSheet.templateOriginalA4,l=this.getAmountAnswerSheetByTemplate(s),c=this.printAnswersheetService.exportFileNameOfAnswerSheet(0,this.dataConfigDocument?.examObj?.name??"",i.data?.offlineExamObj?.hashId??"");if(s==this.allAnswerSheet.templateTrueFalseA4||s==this.allAnswerSheet.templateTrueFalseA4WithColor||s==this.allAnswerSheet.templateTrueFalseEssayA4||s==this.allAnswerSheet.templateTrueFalseA5||s==this.allAnswerSheet.templateTrueFalseA6||s==this.allAnswerSheet.templateA4WithFax||s==this.allAnswerSheet.templateA4WithFaxV2){let u={answerSheetTemplate:s,amountTemplateTrueFalseA4:this.form.controls.amountTemplateTrueFalseA4.value??8,amountTemplateStartTrueFalseA4:this.form.controls.amountTemplateStartTrueFalseA4.value??1,amountTemplateMultipleChoiceA4:this.form.controls.amountTemplateMultipleChoiceA4.value??40,amountTemplateStartMultipleChoiceA4:this.form.controls.amountTemplateStartMultipleChoiceA4.value??1,amountTemplateFillA4:this.form.controls.amountTemplateFillA4.value??6,amountTemplateStartFillA4:this.form.controls.amountTemplateStartFillA4.value??1};this.answerSheetHelper=this.printAnswersheetService.chooseAnswerSheetTemplate(this.answerSheetHelper,s,r,0,i.data?.maxOfflineMixQuestionHashId,l),this.saveConfig().then(m=>{m?this.answerSheetHelper.downloadTrueFalseAnswerSheet(c,u).subscribe(p=>{p.success||this.errorStatusObj(this.commonService.translateToKeyParam("lang_auto_tao_phieu_loi_vui_long_thu_lai",p.message??"none"),!0)}):this.errorStatusObj(this.commonService.translateToKeyParam("lang_auto_tao_phieu_loi_vui_long_thu_lai",i.message??"none"),!0)}),this.isLoadingPrintTicket=!1}else{this.answerSheetHelper=this.printAnswersheetService.chooseAnswerSheetTemplate(this.answerSheetHelper,s,r,0,i.data?.maxOfflineMixQuestionHashId,l);let u=0;u=s==this.allAnswerSheet.templateOriginalA4||s==this.allAnswerSheet.templateA4WithColorNew?l??120:s==this.allAnswerSheet.templateA5Full50?l??60:s==this.allAnswerSheet.templateA4Essay?l??36:l??32;let m={answerSheetTemplate:s,amountTemplateTrueFalseA4:0,amountTemplateStartTrueFalseA4:0,amountTemplateMultipleChoiceA4:u,amountTemplateStartMultipleChoiceA4:1,amountTemplateFillA4:0,amountTemplateStartFillA4:0};this.saveConfig().then(p=>{p?this.answerSheetHelper.downloadTrueFalseAnswerSheet(c,m).subscribe(f=>{f.success||this.errorStatusObj(this.commonService.translateToKeyParam("lang_auto_tao_phieu_loi_vui_long_thu_lai",f.message??"none"),!0)}):this.errorStatusObj(this.commonService.translateToKeyParam("lang_auto_tao_phieu_loi_vui_long_thu_lai",i.message??"none"),!0)})}}else this.errorStatusObj(i.message??"",!0),this.isLoadingPrintTicket=!1}else this.errorStatusObj(i.message??"",!0),this.isLoadingPrintTicket=!1}))}getAmountAnswerSheetByTemplate(t){switch(Number(t)){case this.allAnswerSheet.templateOriginalA4:return this.form.controls.amountTemplateOriginalA4.value;case this.allAnswerSheet.templateA5Full50:return this.form.controls.amountTemplateA5.value;case this.allAnswerSheet.templateA6Full20:return this.form.controls.amountTemplateA6.value;case this.allAnswerSheet.templateA4Essay:return this.form.controls.amountTemplateEssayA4.value;case this.allAnswerSheet.templateTrueFalseA4:case this.allAnswerSheet.templateTrueFalseA5:case this.allAnswerSheet.templateTrueFalseA6:case this.allAnswerSheet.templateTrueFalseEssayA4:return this.form.controls.amountTemplateTrueFalseA4.value+this.form.controls.amountTemplateFillA4.value+this.form.controls.amountTemplateStartMultipleChoiceA4.value;default:return this.form.controls.amountTemplateOriginalA4.value}}getTotalQuestionInMixQuestionObjs(t,i){if(t.length>0){let a=0;return t.forEach(r=>{let s=this.zipDataService.decodeContentGzip(r?.mixDatas??""),l=this.castJsonToObj(s);a<(l?.length??0)&&(a=l?.length??0)}),a}return i.length>0?i.length:void 0}getExamInfoByHashId(t){this.initStatusObj(),this.waitDestroy(this.documentConfigService.apiDocumentConfigGetExamConfigDataV2Get(t).subscribe(i=>{if(1==i.success){this.dataConfigDocument=i.data,this.canUseSubjectMark=i.data?.canUseSubjectMark??!1,this.examObj=this.dataConfigDocument?.examObj;let a=this.commonService.myTranslateInstant("lang_auto_ten_de_thi"),r=this.commonService.myTranslateInstant("lang_auto_ma_de");this.titleExam=a+": "+this.examObj?.name+" - "+r+": "+this.examObj?.hashId,this.resetQuestionIndex=i.data?.resetQuestionIndex??!0,this.resetQuestionIndex&&(this.form.controls.amountTemplateStartTrueFalseA4=new h.NI(1,{nonNullable:!0,validators:[h.kI.required,h.kI.min(1),h.kI.max(120)]}),this.form.controls.amountTemplateStartFillA4=new h.NI(1,{nonNullable:!0,validators:[h.kI.required,h.kI.min(1),h.kI.max(120)]})),this.dataConfigDocument?.examParts.length&&this.dataConfigDocument?.examParts.length&&(this.form=this.aztCalcExamPartService.calcExamPart(this.form,this.dataConfigDocument?.examParts,this.resetQuestionIndex)),this.form.controls.subjectMarks.setValue(!!this.dataConfigDocument?.examObj?.subjectMarks),this.canUseSubjectMark||this.form.controls.subjectMarks.disable(),this.successStatusObj()}else this.errorStatusObj(i.message??"",!0)})),this.examHashId=this.commonService.getMyParam(this.activeRoute,"hash_id")??""}createNameExam(t,i){var a="";a="answersheet"==t?this.printAnswersheetService.exportFileNameOfAnswerSheet(0,this.examObj?.name??"",this.examHashId??""):"answerexcel"==t||"answerdocx"==t?this.printAnswersheetService.exportFileNameOfAnswerExcelOffline(0,this.examObj?.name??"",this.examHashId??""):this.printAnswersheetService.exportFileNameOfExamOffline(0,this.examObj?.name??"",this.examHashId??"",void 0),i&&(a=this.commonService.replaceAll(a,"_","-")??"");var r=".docx";return r="answersheet"==t&&7!=Number(this.form.getRawValue().answersheetTemplate)?".pdf":r,a+("answerexcel"==t?".xlsx":r)}exportExcelForAnswerSheet(){this.isLoadingPrintAnswer=!0;let t=this.commonService.getMyParam(this.activeRoute,"hash_id")??"";this.waitDestroy(this.offlineExamExportService.apiOfflineExamExportExportResultOfAllOfflineMixQuestionHashIdGet(t).subscribe(i=>{if(1==i.success){let a=i.data?.obj;a?.offlineMixQuestionObjs&&a.offlineMixQuestionObjs.length>0?this.exportExcelData=this.commonService.myClone(a):(this.showErrorSnack("lang_auto_chua_co_du_lieu_dap_an_de_offline"),this.isLoadingPrintAnswer=!1)}else this.showErrorSnack(i.message??""),this.isLoadingPrintAnswer=!1}))}exportDataDone(t){let i=this.createNameExam("answerexcel",!1);this.shareFileFlutterService.shareFileWithBlob(t,i),this.isLoadingPrintAnswer=!1}changeConfigSubjectMark(t){if(t.target instanceof HTMLInputElement){this.loadingSaveConfigMultiple=!0;let i=this.form.getRawValue(),a={subjectMarks:i.subjectMarks?1:0,isSaveConfig:0};this.waitDestroy(this.documentConfigService.apiDocumentConfigSaveExamConfigPost(this.examHashId,a).subscribe(r=>{1==r.success?(this.loadingSaveConfigMultiple=!1,this.successStatusObj(i.subjectMarks?"lang_config_create_exam_multiple_component_enable_successfully":"lang_config_create_exam_multiple_component_disable_successfully",!0)):(this.loadingSaveConfigMultiple=!1,this.errorStatusObj(r.message??"",!0),this.form.controls.subjectMarks.setValue(!a.subjectMarks))}))}}ngOnInit(){this.examHashId=this.commonService.getMyParam(this.activeRoute,"hash_id")??"";let t=Number(this.activeRoute.snapshot.paramMap.get("cat_id"))??0,i=this.commonService.getMyQueryParam("backto")??"/admin/testbank/document-management/0/"+(t??0)+"/1";this.backLink=this.paramClassroomService.getBackLinkUrlParamClassroom(i),this.examHashId&&this.getExamInfoByHashId(this.examHashId)}constructor(t,i,a,r,s,l,c,u,m,p){super(),this.offlineMixQuestionService=t,this.shareFileFlutterService=i,this.zipDataService=a,this.answerSheetHelper=r,this.printAnswersheetService=s,this.documentConfigService=l,this.activeRoute=c,this.offlineExamExportService=u,this.paramClassroomService=m,this.aztCalcExamPartService=p,this.backLink="",this.isLoadingPrintTicket=!1,this.examHashId="",this.startStudentCode=1,this.canUseSubjectMark=!1,this.isLoadingPrintAnswer=!1,this.loadingSaveConfigMultiple=!1,this.resetQuestionIndex=!0,this.allAnswerSheet=Ki.x,this.titleExam="",this.form=new h.cw({answersheetTemplate:new h.NI(this.allAnswerSheet.templateOriginalA4,{nonNullable:!0,validators:[h.kI.required]}),amountTemplateOriginalA4:new h.NI(120,{nonNullable:!0,validators:[h.kI.required,h.kI.min(1),h.kI.max(120)]}),amountTemplateA5:new h.NI(60,{nonNullable:!0,validators:[h.kI.required,h.kI.min(1),h.kI.max(60)]}),amountTemplateA6:new h.NI(32,{nonNullable:!0,validators:[h.kI.required,h.kI.min(1),h.kI.max(32)]}),amountTemplateEssayA4:new h.NI(36,{nonNullable:!0,validators:[h.kI.required,h.kI.min(1),h.kI.max(36)]}),amountTemplateTrueFalseA4:new h.NI(8,{nonNullable:!0,validators:[h.kI.required,h.kI.min(0),h.kI.max(8)]}),amountTemplateStartTrueFalseA4:new h.NI(1,{nonNullable:!0,validators:[h.kI.required,h.kI.min(1),h.kI.max(120)]}),amountTemplateMultipleChoiceA4:new h.NI(40,{nonNullable:!0,validators:[h.kI.required,h.kI.min(0),h.kI.max(40)]}),amountTemplateStartMultipleChoiceA4:new h.NI(1,{nonNullable:!0,validators:[h.kI.required,h.kI.min(1),h.kI.max(120)]}),amountTemplateFillA4:new h.NI(6,{nonNullable:!0,validators:[h.kI.required,h.kI.min(0),h.kI.max(6)]}),amountTemplateStartFillA4:new h.NI(1,{nonNullable:!0,validators:[h.kI.required,h.kI.min(1),h.kI.max(120)]}),subjectMarks:new h.NI({value:!1,disabled:!1},{nonNullable:!0})})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Za.fs),e.Y36(Ac.g),e.Y36(Us.a),e.Y36(jA),e.Y36(qp.H),e.Y36(un.Cq),e.Y36(E.gz),e.Y36(Za.qr),e.Y36(Xr),e.Y36(bg))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-config-exam-offline"]],features:[e.qOj],decls:5,vars:4,consts:[[3,"headerBackToLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],["doneLoading",""],[3,"startQuestionIndex","obj","exportDataDone",4,"ngIf"],[3,"currentStatusObj"],["id","azt-config-document",1,"azt-config-document","mx-auto","mt-5",2,"max-width","1000px"],[1,"text-center","mt-5","font-bold"],[1,"setting-block"],[1,"text-md","uppercase","font-medium"],[1,"box","mt-3"],[3,"formGroup"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5"],[1,"grid","grid-cols-12","gap-5"],[1,"col-span-12","md:col-span-6"],[1,"mt-0"],[3,"form","resetQuestionIndex","formArrayName"],["class","mt-3",4,"ngIf"],[3,"answersheetTemplate","amountTemplateOriginalA4","amountTemplateA5","amountTemplateA6","amountTemplateEssayA4","amountTemplateTrueFalseA4","amountTemplateStartTrueFalseA4","amountTemplateMultipleChoiceA4","amountTemplateStartMultipleChoiceA4","amountTemplateFillA4","amountTemplateStartFillA4"],["class","block-warning p-5",4,"ngIf"],[1,"p-3","text-right"],["azt-track-service","config-exam-offline--sdRHbNg8Am",1,"btn","btn-primary",3,"disabled","click"],[4,"ngIf"],["class","w-4 h-4 inline-block mr-2",4,"ngIf"],[1,"setting-block","mt-5"],[1,"box","mt-2","p-5"],[1,"mt-2","intro-y"],[1,"action-file","mt-3"],[1,"font-medium","flex","items-center"],[1,"inline-block","w-4","h-4","mr-2","text-success"],["name","file-text"],[1,"relative","mt-2"],["type","text","readonly","",1,"form-control","py-3","px-4","border-transparent","bg-slate-100","pr-10",2,"padding-right","120px",3,"value"],["azt-track-service","config-exam-offline-O6CEF-iZ3",1,"btn","btn-primary","absolute","my-auto","inset-y-0","right-0",2,"border-top-left-radius","0","border-bottom-left-radius","0",3,"click"],["class","w-4 h-4 mr-2 text-white",4,"ngIf","ngIfElse"],["doneLoadingPrintAnswer",""],[3,"hashId","checkStudentCode","styleView","startStudentCode"],[1,"mt-5","flex","flex-col","sm:flex-row","justify-center","items-center"],[1,"mr-2"],["azt-track-service","config-exam-offline-XpfN8mirJ",1,"btn","btn-outline-primary","btn-transparent",3,"routerLink"],[1,"w-4","h-4","mr-2"],["name","file-spreadsheet"],[1,"w-30"],["azt-track-service","config-exam-offline-o5dAdXmYKG",1,"btn","btn-outline-primary","btn-transparent",3,"routerLink"],["name","folder"],[1,"mt-3"],[1,"grid","grid-cols-12"],[1,"col-span-10","lg:col-span-10"],["for","subject-marks-question",1,"form-label","font-medium"],[1,"leading-relaxed","text-slate-500","text-xs","pr-5"],[1,"mt-0.5"],[1,"col-span-2","lg:col-span-2"],[1,"form-check","form-switch","ml-auto"],["class","show-code ml-auto form-check-input w-5 h-5",4,"ngIf"],["id","subject-marks-question","formControlName","subjectMarks","class","show-code ml-auto form-check-input mr-0 ml-3","type","checkbox",3,"change",4,"ngIf"],[1,"show-code","ml-auto","form-check-input","w-5","h-5"],["id","subject-marks-question","formControlName","subjectMarks","type","checkbox",1,"show-code","ml-auto","form-check-input","mr-0","ml-3",3,"change"],[1,"block-warning","p-5"],[1,"mt-5","flex","flex-col","md:flex-row"],[1,"block","md:mr-10"],[1,"mt-2","font-medium"],["class","grid grid-cols-12 mt-2 ml-auto mr-auto justify-center",4,"ngIf"],[1,"block"],["class","mt-2 font-medium",4,"ngIf"],[1,"grid","grid-cols-12","mt-2","ml-auto","mr-auto","justify-center"],[1,"col-span-12","w-full","self-center","mb-2"],["azt-track-service","config-exam-offline-hLHiZDnMwY","href","https://play.google.com/store/apps/details?id=azt.teacher","target","_blank","rel","noopener",1,"pl-1","pr-1","mb-2","display-inline-block"],["alt","Get it on Google Play","width","150px",1,"play-store-badge",3,"src"],["azt-track-service","config-exam-offline-hD7OkoGz62","href","https://apps.apple.com/vn/app/azota-teacher/id1658231068","target","_blank","rel","noopener",1,"pl-1","pl-1","mb-2","display-inline-block"],["alt","Download on the App Store","width","135px",1,"app-store-badge",3,"src"],[1,"col-span-12","items-center","mb-2"],[1,"px-1","mb-1","py-1","inline-flex","border","border-slate-200","rounded"],[1,"my-auto","font-medium"],[1,"ml-1",3,"fileName","linkUrl"],[1,"ml-2","px-1","py-1","mb-1","inline-flex","border","border-slate-200","rounded"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide","mr-2"],["d","M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"],["points","7 10 12 15 17 10"],["x1","12","y1","15","x2","12","y2","3"],[1,"w-4","h-4","inline-block","mr-2"],[1,"w-4","h-4","mr-2","text-white"],[1,"inline-block","w-4","h-4","mr-2"],["name","download"],[3,"startQuestionIndex","obj","exportDataDone"]],template:function(t,i){if(1&t&&(e.TgZ(0,"teacher-layout",0),e.YNc(1,RA,1,1,"azt-loading-effect",1),e.YNc(2,JA,70,64,"ng-template",null,2,e.W1O),e.YNc(4,gx,1,2,"azt-export-excel-for-answersheet",3),e.qZA()),2&t){const a=e.MAs(3);e.Q6J("headerBackToLink",i.backLink),e.xp6(1),e.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a),e.xp6(3),e.Q6J("ngIf",null!=i.exportExcelData)}},encapsulation:2}),n})();var Dr=I(78497),wi=I(71646);let Ur=(()=>{class n extends mt.e{btnCloseDialog(){this.dialogRef.close()}loadImage(){this.loading=!1}ngOnInit(){super.ngOnInit()}constructor(t,i){super(i,t),this.dialogRef=t,this.data=i,this.loading=!0}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(U.so,8),e.Y36(U.WI))},n.\u0275cmp=e.Xpm({type:n,selectors:[["notice-print-a4-paper-dialog"]],features:[e.qOj],decls:25,vars:14,consts:[[1,"box",2,"max-width","650px"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-3","border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"text-md","font-medium","flex"],[1,"inline-block","w-6","h-6","mr-2","text-pending","flex-none",2,"margin-top","4px"],["name","alert-octagon"],[1,"mb-0","h5"],[1,"p-3"],[1,"font-medium","mb-2"],[1,"text-center","mt-3"],[1,"flex","items-center",2,"max-height","50vh",3,"hidden"],[1,"w-10","h-10","mx-auto"],[2,"max-height","50vh",3,"hidden"],["alt","",1,"h-auto","mx-auto",3,"src","load"],[1,"p-3","text-right"],["azt-track-service","notice-a4-dialog-ObwBAVC1Evd",1,"btn","w-24","btn-primary",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3)(4,"span",4),e._UZ(5,"lucide-icon",5),e.qZA(),e.TgZ(6,"p",6),e._uU(7),e.ALo(8,"mytranslate"),e.qZA()()(),e.TgZ(9,"azt-mat-dialog-content")(10,"div",7)(11,"p",8),e._uU(12),e.ALo(13,"mytranslate"),e.qZA(),e.TgZ(14,"div",9)(15,"div",10)(16,"div",11),e._UZ(17,"azt-loading-ui"),e.qZA()(),e.TgZ(18,"div",12)(19,"img",13),e.NdJ("load",function(){return i.loadImage()}),e.ALo(20,"convertCdnLinkOfGitHubWithLocale"),e.qZA()()()()()(),e.TgZ(21,"div",14)(22,"button",15),e.NdJ("click",function(){return i.btnCloseDialog()}),e._uU(23),e.ALo(24,"mytranslate"),e.qZA()()()),2&t&&(e.xp6(7),e.Oqu(e.lcZ(8,6,"lang_auto_vui_long_cau_hinh_in_theo_mau_A4_nhu_huong_dan_duoi_day")),e.xp6(5),e.hij(" ",e.lcZ(13,8,"lang_core_after_printing_the_answer_sheet_please_check_that")," "),e.xp6(3),e.Q6J("hidden",!i.loading),e.xp6(3),e.Q6J("hidden",i.loading),e.xp6(1),e.Q6J("src",e.lcZ(20,10,"medias_[LANG]/a4_template_answer_sheet.png"),e.LSH),e.xp6(4),e.hij(" ",e.lcZ(24,12,"lang_auto_dong")," "))},dependencies:[Dr.R,wi.n,_.Nh5,ye.JV,ye.Ju],encapsulation:2}),n})(),Cg=(()=>{class n extends xe.Q{showDialog(){this.sAztDialogService.open(Ur,{data:{},restoreFocus:!1})}ngOnInit(){super.ngOnInit()}constructor(t,i){super(),this.sAztDialogService=t,this.commonService=i}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(qi.C),e.Y36(Yn.z))},n.\u0275cmp=e.Xpm({type:n,selectors:[["notice-print-a4-paper-box"]],features:[e.qOj],decls:3,vars:3,consts:[["azt-track-service","notice-a4-box-8TXulZreMgV",1,"btn-text-primary","ml-2","font-medium",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"button",0),e.NdJ("click",function(){return i.showDialog()}),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&t&&(e.xp6(1),e.hij("(",e.lcZ(2,1,"lang_testbank_print_a4_notice"),")"))},dependencies:[ye.JV],encapsulation:2}),n})();var Xn=I(29023),uo=I(73445),js=I(23680),KA=I(44683),md=I(13217),pm=I(76359),Mo=I(84003),Rp=I(47180),Da=I(91765),zp=I(78820),Hp=I(13978),GA=I(71069),ds=I(32296),YA=I(2032),ms=I(64170),Ai=I(92596),hm=I(68547);const xx=["startTime"],Tg=["endTime"];function bx(n,o){if(1&n&&e._UZ(0,"azt-loading-effect",2),2&n){const t=e.oxw();e.Q6J("currentStatusObj",t.statusObj)}}function vx(n,o){1&n&&(e.TgZ(0,"div",76),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_vui_long_nhap_ten_bai_tap")," "))}function wx(n,o){1&n&&(e.TgZ(0,"div",77),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_testbank_test_config_end_time_bigger_time_star"),". "))}function Jp(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"div",78)(2,"div",79),e._UZ(3,"azt-list-classroom-checkbox",80),e.qZA()(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(3),e.Q6J("form",t.form)("classroomGroupData",t.classroomWithGroup)("homeworkObj",t.homeworkObj)("permissionName",t.permissionTypes.homework)}}function jr(n,o){if(1&n&&(e.TgZ(0,"div",78)(1,"div",81)(2,"span",82),e._uU(3),e.ALo(4,"mytranslate"),e.qZA(),e.TgZ(5,"span",83),e._uU(6),e.qZA()()()),2&n){const t=e.oxw(2);e.xp6(3),e.hij(" ",e.lcZ(4,2,"lang_auto_da_giao_bai_tap_cho_lop")+": "," "),e.xp6(3),e.hij(" ",null==t.classroomObj?null:t.classroomObj.name," ")}}function kg(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",84),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.saveNewOrConfigHomework(0))}),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("disabled",t.form.invalid||t.checkDeadLineValid(t.form.controls.homeworkStartDate.value,t.form.controls.homeworkDeadline.value)<=0),e.xp6(1),e.hij(" ",e.lcZ(2,2,"lang_auto_luu_nhap")," ")}}function Kp(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",3)(1,"form",4)(2,"div",5)(3,"div",6)(4,"h3",7),e._uU(5),e.ALo(6,"mytranslate"),e.qZA(),e.TgZ(7,"div",8)(8,"div",9)(9,"div",10)(10,"label",11),e._uU(11),e.ALo(12,"mytranslate"),e.qZA()(),e.TgZ(13,"div",10)(14,"div",12),e._UZ(15,"input",13),e.ALo(16,"mytranslate"),e.qZA(),e.YNc(17,vx,3,3,"div",14),e.qZA()(),e.TgZ(18,"div",15)(19,"div",16)(20,"label",17),e._uU(21),e.ALo(22,"mytranslate"),e.O4$(),e.TgZ(23,"svg",18),e.ALo(24,"mytranslate"),e._UZ(25,"circle",19)(26,"line",20)(27,"line",21),e.qZA()()(),e.kcU(),e.TgZ(28,"div",16)(29,"div",22)(30,"div",23)(31,"mat-form-field",24)(32,"input",25),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.openDateTimePicker(1))}),e.ALo(33,"mytranslate"),e.qZA(),e.TgZ(34,"button",26),e.NdJ("click",function(a){return e.CHM(t),e.oxw().openDateTimePicker(1),e.KtG(a.stopPropagation())}),e.O4$(),e.TgZ(35,"svg",27),e._UZ(36,"path",28)(37,"path",29)(38,"path",30)(39,"path",31)(40,"path",32)(41,"path",33),e.qZA()(),e.kcU(),e.TgZ(42,"ngx-mat-datetime-picker",34,35)(44,"ngx-mat-datepicker-actions")(45,"button",36),e._uU(46),e.ALo(47,"mytranslate"),e.qZA(),e.TgZ(48,"button",37),e._uU(49,"OK"),e.qZA()()()()(),e.TgZ(50,"div",23)(51,"mat-form-field",24)(52,"input",38),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.openDateTimePicker(0))}),e.ALo(53,"mytranslate"),e.qZA(),e.TgZ(54,"button",39),e.NdJ("click",function(a){return e.CHM(t),e.oxw().openDateTimePicker(0),e.KtG(a.stopPropagation())}),e.O4$(),e.TgZ(55,"svg",27),e._UZ(56,"path",28)(57,"path",29)(58,"path",30)(59,"path",31)(60,"path",32)(61,"path",33),e.qZA()(),e.kcU(),e.TgZ(62,"ngx-mat-datetime-picker",34,40)(64,"ngx-mat-datepicker-actions")(65,"button",36),e._uU(66),e.ALo(67,"mytranslate"),e.qZA(),e.TgZ(68,"button",37),e._uU(69,"OK"),e.qZA()()()()(),e.TgZ(70,"div",41)(71,"button",42),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.clearTime())}),e.O4$(),e.TgZ(72,"svg",43),e._UZ(73,"path",44)(74,"path",45)(75,"path",46)(76,"path",47),e.qZA(),e._uU(77),e.ALo(78,"mytranslate"),e.qZA()()(),e.kcU(),e.TgZ(79,"div",48)(80,"div",49),e._uU(81),e.ALo(82,"mytranslate"),e.qZA(),e.YNc(83,wx,3,3,"div",50),e.qZA()()(),e.TgZ(84,"div",51)(85,"div",52)(86,"label",53),e._uU(87),e.ALo(88,"mytranslate"),e.qZA()(),e.TgZ(89,"div",54)(90,"div",55)(91,"div",56),e._UZ(92,"input",57),e.TgZ(93,"label",58),e._uU(94),e.ALo(95,"mytranslate"),e.qZA()(),e.TgZ(96,"div",59),e._UZ(97,"input",60),e.TgZ(98,"label",61),e._uU(99),e.ALo(100,"mytranslate"),e.qZA()()()()(),e.TgZ(101,"div",62)(102,"div",52)(103,"label",53),e._uU(104),e.ALo(105,"mytranslate"),e.qZA()(),e.TgZ(106,"div",54)(107,"div",55)(108,"div",56),e._UZ(109,"input",63),e.TgZ(110,"label",64),e._uU(111),e.ALo(112,"mytranslate"),e.qZA()(),e.TgZ(113,"div",59),e._UZ(114,"input",65),e.TgZ(115,"label",66),e._uU(116),e.ALo(117,"mytranslate"),e.qZA()()()()(),e.TgZ(118,"div",67)(119,"div",68)(120,"div",69),e._uU(121),e.ALo(122,"mytranslate"),e.qZA()(),e.YNc(123,Jp,4,4,"ng-container",70),e.YNc(124,jr,7,4,"ng-template",null,71,e.W1O),e.qZA()(),e.TgZ(126,"div",72)(127,"div",73),e.YNc(128,kg,3,4,"button",74),e.TgZ(129,"button",75),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.saveNewOrConfigHomework(1))}),e._uU(130),e.ALo(131,"mytranslate"),e.qZA()()()()()()()}if(2&n){const t=e.MAs(43),i=e.MAs(63),a=e.MAs(125),r=e.oxw();let s;e.xp6(1),e.Q6J("formGroup",r.form),e.xp6(4),e.hij(" ",e.lcZ(6,36,"lang_auto_cau_hinh_chung")," "),e.xp6(6),e.hij(" ",e.lcZ(12,38,"lang_auto_ten")," "),e.xp6(4),e.s9C("placeholder",e.lcZ(16,40,"lang_auto_nhap_ten")+" ..."),e.xp6(2),e.Q6J("ngIf",r.form.controls.homeworkName.errors),e.xp6(4),e.hij(" ",e.lcZ(22,42,"lang_testbank_test_config_time_assigne_homework")," "),e.xp6(2),e.s9C("matTooltip",e.lcZ(24,44,"lang_homework_add_home_work_startDate_introduce")),e.xp6(9),e.s9C("placeholder",e.lcZ(33,46,"lang_auto_tu")),e.Q6J("max",r.maxDate)("ngxMatDatetimePicker",t),e.xp6(10),e.Q6J("touchUi",!0),e.xp6(4),e.Oqu(e.lcZ(47,48,"lang_auto_dong")),e.xp6(6),e.s9C("placeholder",e.lcZ(53,50,"lang_auto_den")),e.Q6J("max",r.maxDate)("ngxMatDatetimePicker",i),e.xp6(10),e.Q6J("touchUi",!0),e.xp6(4),e.Oqu(e.lcZ(67,52,"lang_auto_dong")),e.xp6(11),e.hij(" ",e.lcZ(78,54,"lang_auto_dat_lai")," "),e.xp6(4),e.hij("",e.lcZ(82,56,"lang_auto_bo_trong_neu_khong_muon_gioi_han_thoi_gian"),"."),e.xp6(2),e.Q6J("ngIf",r.calculatorTimeValidate(null!==(s=r.form.controls.homeworkDeadline.value)&&void 0!==s?s:"",null!==(s=r.form.controls.homeworkStartDate.value)&&void 0!==s?s:"")<=0),e.xp6(4),e.hij(" ",e.lcZ(88,58,"lang_auto_cho_xem_ket_qua")," "),e.xp6(5),e.Q6J("value",1),e.xp6(2),e.hij(" ",e.lcZ(95,60,"lang_auto_khong")," "),e.xp6(3),e.Q6J("value",0),e.xp6(2),e.hij(" ",e.lcZ(100,62,"lang_auto_co")," "),e.xp6(5),e.hij(" ",e.lcZ(105,64,"lang_auto_dang_nhap_de_nop_bai")," "),e.xp6(5),e.Q6J("value",0),e.xp6(2),e.hij(" ",e.lcZ(112,66,"lang_auto_khong")," "),e.xp6(3),e.Q6J("value",1),e.xp6(2),e.hij(" ",e.lcZ(117,68,"lang_auto_co")," "),e.xp6(5),e.hij(" ",e.lcZ(122,70,"lang_auto_giao_cho_lop")," "),e.xp6(2),e.Q6J("ngIf",2===r.form.controls.whoAllow.value)("ngIfElse",a),e.xp6(5),e.Q6J("ngIf",1!=(null==r.homeworkObj?null:r.homeworkObj.isPublished)),e.xp6(1),e.Q6J("disabled",r.form.invalid||r.checkDeadLineValid(r.form.controls.homeworkStartDate.value,r.form.controls.homeworkDeadline.value)<=0),e.xp6(1),e.hij(" ",e.lcZ(131,72,"lang_auto_xuat_ban")," ")}}let Sg=(()=>{class n extends xe.Q{redirectBackTo(){this.onBack.emit()}openDateTimePicker(t){1==t?this.startTime&&this.startTime.open():this.endTime&&this.endTime.open()}clearTime(){this.form.controls.homeworkDeadline.setValue(""),this.form.controls.homeworkStartDate.setValue("")}clearTimeStart(){this.form.controls.homeworkStartDate.setValue("")}calculatorTimeValidate(t,i){return""!=t&&""!=i?this.timeService.calculationHomeworkTimeWithZeroSecond(t,i):1}checkDeadLineValid(t,i){return""!=t&&""!=i?this.timeService.getDiffFromTwoDateWithZeroSecond(i,t):1}saveNewOrConfigHomework(t){this.isUpdate?this.updateHomework(t):(this.initStatusObj(),this.homeWorkContent=this.createHomeworkEditorData.homework?.content??"",this.uploadImageOfHomeworkService.replaceImageInContent(this.homeWorkContent).subscribe(i=>{null==i.errorMessage?(this.homeWorkContent=i.content,this.createHomework(t)):(this.showErrorSnack(i.errorMessage),this.stopStatusObj())}))}updateHomework(t){let i=this.form.getRawValue(),a=i.homeworkStartDate?this.timeService.formatDateTimeToPostToServer(i.homeworkStartDate):void 0,r=i.homeworkDeadline?this.timeService.formatDateTimeToPostToServer(i.homeworkDeadline):void 0;const s=this.sAztClassroomCheckboxService.getClassroomIdsCheckedInGroup(this.form.controls.classroomFormArray);this.initStatusObj();let l={name:i.homeworkName,startDate:a,deadline:r,mustVerified:i.mustVerified,whenShowAnswer:i.whenShowAnswer,enableUpdateDeadLine:1,classroomIds:2==i.whoAllow?s:void 0,isPublished:t||(null!=this.homeworkObj?this.homeworkObj.isPublished:0)};this.waitDestroy(this.documentConfigService.apiDocumentConfigSaveHomeworkConfigPost(this.homeworkHashId,l).subscribe(c=>{if(1==c.success){let p=this.commonService.getMyParam(this.activeRoute,"cat_id")??"";var u=[];if(c.data?.objs)for(var m=0;m<c.data.objs.length;m++)u.push(c.data?.objs[m].hashId);let f=`/admin/testbank/config-homework/${p??0}/${this.homeworkHashId}`;this.myNavigationWithQueryString(`/admin/testbank/publish-document/1/${p??0}/${JSON.stringify(u)}`,`?backto=${f}`),this.successStatusObj(l.isPublished?"lang_auto_xuat_ban_thanh_cong":"lang_auto_luu_thanh_cong_chua_xuat_ban",!0)}else this.errorStatusObj(c.message??"",!0)}))}createHomework(t){let i=this.form.getRawValue(),a=i.homeworkStartDate?this.timeService.formatDateTimeToPostToServer(i.homeworkStartDate):void 0,r=i.homeworkDeadline?this.timeService.formatDateTimeToPostToServer(i.homeworkDeadline):void 0;this.homeWorkContent=this.zipDataService.convertContentGzip(this.homeWorkContent);const s=this.sAztClassroomCheckboxService.getClassroomIdsCheckedInGroup(this.form.controls.classroomFormArray);if(this.form.invalid)this.showErrorSnack(s.length<=0?"lang_auto_please_select_classroom":"lang_auto_vui_long_nhap_day_du_thong_tin");else{this.initStatusObj();let l=this.userService.getUserObj(),c=JSON.stringify({type:"homework",id:this.homeworkId,user:l.id}),u={name:i.homeworkName,content:this.homeWorkContent,files:this.createHomeworkEditorData.homework?.files??"",startDate:a,deadline:r,mustVerified:i.mustVerified,whenShowAnswer:i.whenShowAnswer,classroomIds:s,isPublished:t,categoryId:this.commonService.getMyParam(this.activeRoute,"cat_id")?Number(this.commonService.getMyParam(this.activeRoute,"cat_id")):0};this.waitDestroy(this.homeworkService.apiHomeworkSaveObjPost(c,u).subscribe(m=>{if(1==m.success){let b=this.commonService.getMyParam(this.activeRoute,"cat_id")??"";const L=this.getMyQueryParam("classroomId"),N=this.getMyQueryParam("programId"),R=this.getMyQueryParam("sessionId");if(L)if(N&&R){const j=m.data?.objs??[];let G;for(let ae=0;ae<j.length;ae++)j[ae].classroomId===Number(L)&&(G=j[ae]);this.saveDocumentTrainingCenter(Number(L),Number(N),Number(R),G)}else this.commonService.myNavigation(`/admin/student/classroom-details/${L}/1`);else if(u.isPublished){this.successStatusObj("lang_auto_xuat_ban_thanh_cong",!0);var p=[];if(m.data?.objs)for(var f=0;f<m.data.objs.length;f++)p.push(m.data?.objs[f].hashId);let j=`/admin/testbank/config-homework/${b??0}/${this.homeworkHashId}`;this.myNavigationWithQueryString(`/admin/testbank/publish-document/1/${b??0}/${JSON.stringify(p)}`,`?backto=${j}`)}else this.myNavigationWithQueryString("/admin/testbank/document-management/1/0/1",`?backto=/admin/testbank/config-homework/${b??0}/${this.homeworkHashId}`),this.successStatusObj("lang_auto_luu_thanh_cong_chua_xuat_ban",!0);this.successStatusObj()}else this.errorStatusObj(m.message??"",!0)}))}}getHomework(t){this.initStatusObj(),this.waitDestroy(this.documentConfigService.apiDocumentConfigGetHomeworkConfigDataV2Post(t,[]).subscribe(i=>{if(1==i.success){this.classroomWithGroup=i.data?.classroomGroupObjs??[],this.homeworkObj=i.data?.homeworkObj;let a=this.homeworkObj?.classroomId??0;this.classroomObj=a?this.classroomWithGroup.find(s=>s.classroomObjs.some(l=>l.id===a))?.classroomObjs.find(s=>s.id===a):this.classroomWithGroup.length>0&&this.classroomWithGroup[0].classroomObjs.length>0?this.classroomWithGroup[0].classroomObjs[0]:void 0,this.createHomeworkEditorData=this.isUpdate?this.createHomeworkEditorData:this.editorOutputDataService.getOutputData();let r=this.createHomeworkEditorData.homework?.name??this.homeworkObj?.name??"";setTimeout(()=>{this.form.patchValue({homeworkName:r,homeworkStartDate:null!=this.homeworkObj?.startDate?this.homeworkObj?.startDate.toString():"",homeworkDeadline:null!=this.homeworkObj?.deadline?this.homeworkObj?.deadline.toString():"",mustVerified:1==this.homeworkObj?.mustVerified?1:0,whenShowAnswer:1==this.homeworkObj?.whenShowAnswer?1:0,whoAllow:i.data?.hasStudentAnswers&&this.isUpdate?1:2})},0),this.successStatusObj()}else this.errorStatusObj(i.message??"",!0)}))}saveDocumentTrainingCenter(t,i,a,r){this.classroomService.apiClassroomsClassroomIdSessionsSessionIdDocumentsPost(t,a,{name:r?.name,refId:r?.id,type:"homework"}).subscribe(l=>{l?this.commonService.myNavigationWithQueryString(`/admin/student/classroom-details/${t}/3`,`?sessionId=${a}`):this.stopStatusObj()})}fillDataFormToProgram(){const t=this.getMyQueryParam("sessionId");this.checkExamToProgram=!!t,this.checkExamToProgram&&this.paramClassroomService.getProgramTraining().subscribe(i=>{this.programDetailResponse=i;const a=this.programDetailResponse?.sessions??[],r=a.findIndex(b=>b.id===Number(t)),s=this.commonService.myTranslateInstant("lang_business_homework_session"),l=a[r].fromTime,u=new Date(a[r].fromTime??"").getTime()+432e6,m=r===a.length-1?this.timeService.formatDateTimeFillData(new Date(u).toLocaleString("en-GB")):a[r+1].fromTime,f=(a[r].documents?.filter(b=>"homework"===b.type)).length??1;this.form.controls.homeworkName.setValue(`${s} ${r+1}-${f+1}`),l&&this.form.controls.homeworkStartDate.setValue(l),m&&this.form.controls.homeworkDeadline.setValue(m)})}ngOnInit(){super.ngOnInit(),this.waitDestroy((0,ne.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.homeworkHashId=this.commonService.getMyParam(this.activeRoute,"hash_id")??"",this.homeworkHashId?(this.isUpdate=!0,this.getHomework(this.homeworkHashId)):(this.isUpdate=!1,this.getHomework("add_new"))})),this.fillDataFormToProgram(),this.commonService.translateMetaData({title:"lang_cms__config_title",description:"lang_cms_config_homework_description",image:""})}constructor(t,i,a,r,s,l,c,u,m,p,f){super(),this.activeRoute=t,this.timeService=i,this.documentConfigService=a,this.editorOutputDataService=r,this.homeworkService=s,this.userService=l,this.sAztClassroomCheckboxService=c,this.uploadImageOfHomeworkService=u,this.zipDataService=m,this.classroomService=p,this.paramClassroomService=f,this.onBack=new e.vpe,this.permissionTypes=pm.y,this.homeworkId=0,this.homeworkHashId="",this.isUpdate=!1,this.homeWorkContent="",this.createHomeworkEditorData={},this.maxDate=Z.N.maxDateTimePicker,this.checkExamToProgram=!1,this.classroomWithGroup=[],this.form=new h.cw({homeworkName:new h.NI("",{nonNullable:!0,validators:[h.kI.required,Da._.noWhiteSpace]}),homeworkStartDate:new h.NI("",{nonNullable:!0}),homeworkDeadline:new h.NI("",{nonNullable:!0}),mustVerified:new h.NI(0,{nonNullable:!0}),whoAllow:new h.NI(this.isUpdate?1:2,{nonNullable:!0}),whenShowAnswer:new h.NI(0,{nonNullable:!0}),classroomFormArray:new h.Oe([])},{validators:[Rp.h.classroomInGroupCheckBoxValidator]})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(E.gz),e.Y36(Mo.D),e.Y36(un.Cq),e.Y36(Ar.O),e.Y36(zp.Lk),e.Y36(ya.U),e.Y36(Hp.f),e.Y36(GA.Z),e.Y36(Us.a),e.Y36(_r.um),e.Y36(Xr))},n.\u0275cmp=e.Xpm({type:n,selectors:[["main-config-homework"]],viewQuery:function(t,i){if(1&t&&(e.Gf(xx,5),e.Gf(Tg,5)),2&t){let a;e.iGM(a=e.CRH())&&(i.startTime=a.first),e.iGM(a=e.CRH())&&(i.endTime=a.first)}},outputs:{onBack:"onBack"},features:[e._Bn([{provide:Xn.fM,useClass:KA.WG,deps:[js.Ad,uo.o8]},{provide:Xn.ab,useFactory:md.hx,deps:[Mo.D]}]),e.qOj],decls:3,vars:2,consts:[[3,"currentStatusObj",4,"ngIf","ngIfElse"],["doneLoading",""],[3,"currentStatusObj"],[1,"mt-5"],[3,"formGroup"],[1,"azt-config-document","mx-auto","px-3",2,"max-width","1100px"],[1,"setting-basic"],[1,"text-md","uppercase","font-medium"],[1,"box","mt-2","p-5"],["id","azt-config-name",1,"grid","grid-cols-12"],[1,"col-span-12","lg:col-span-12"],["for","homework-name",1,"form-label","mb-0","font-medium","flex","items-center"],[1,"setting-input"],["id","homework-name","formControlName","homeworkName","type","text",1,"form-control",3,"placeholder"],["class","text-xs text-danger mt-2",4,"ngIf"],["id","azt-config-time-assignment",1,"grid","grid-cols-12","mt-4"],[1,"col-span-12"],["for","regular-form-1",1,"form-label","mb-0","font-medium","flex","items-center"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","ml-2",3,"matTooltip"],["cx","12","cy","12","r","10"],["x1","12","y1","16","x2","12","y2","12"],["x1","12","y1","8","x2","12.01","y2","8"],[1,"grid","grid-cols-12","gap-3"],[1,"col-span-12","md:col-span-5"],["appearance","outline"],["azt-track-service","main-config-7OYF4TAsq1","matInput","","formControlName","homeworkStartDate","readonly","",3,"placeholder","max","ngxMatDatetimePicker","click"],["azt-track-service","main-config-wVzabbXyPl2","matSuffix","",2,"font-size","18px",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide"],["d","M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5"],["d","M16 2v4"],["d","M8 2v4"],["d","M3 10h5"],["d","M17.5 17.5 16 16.25V14"],["d","M22 16a6 6 0 1 1-12 0 6 6 0 0 1 12 0Z"],[3,"touchUi"],["startTime",""],["mat-raised-button","","color","secondary","ngxMatDatepickerCancel",""],["mat-raised-button","","color","primary","ngxMatDatepickerApply",""],["azt-track-service","main-config-mBwAoax2xyu","matInput","","formControlName","homeworkDeadline","readonly","",3,"placeholder","max","ngxMatDatetimePicker","click"],["azt-track-service","main-config-L6psEhMGCUO","matSuffix","",2,"font-size","18px",3,"click"],["endTime",""],[1,"col-span-6","md:col-span-2"],["azt-track-service","main-config-_41QHswfgPw",1,"btn","btn-outline-secondary","w-full",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","mr-2"],["d","M10 2h4"],["d","M12 14v-4"],["d","M4 13a8 8 0 0 1 8-7 8 8 0 1 1-5.3 14L4 17.6"],["d","M9 17H4v5"],[1,"text-xs","mt-2"],[1,"text-slate-500","mt-1"],["class","text-danger mt-1",4,"ngIf"],["id","azt-config-when-result",1,"grid","grid-cols-12","mt-4"],[1,"col-span-12","lg:col-span-5"],[1,"form-label","mb-0","font-medium","flex","items-center"],[1,"col-span-12","lg:col-span-7"],[1,"flex","flex-col","sm:flex-row"],[1,"form-check","mr-8"],["id","whenShowAnswer-off","type","radio","formControlName","whenShowAnswer",1,"form-check-input",3,"value"],["for","whenShowAnswer-off",1,"form-check-label"],[1,"form-check","mr-8","mt-2","sm:mt-0"],["id","whenShowAnswer-tested","type","radio","formControlName","whenShowAnswer",1,"form-check-input",3,"value"],["for","whenShowAnswer-tested",1,"form-check-label","flex","items-center"],["id","azt-config-login-require",1,"grid","grid-cols-12","mt-4"],["id","mustVerified-off","type","radio","formControlName","mustVerified",1,"form-check-input",3,"value"],["for","mustVerified-off",1,"form-check-label"],["id","mustVerified-tested","type","radio","formControlName","mustVerified",1,"form-check-input",3,"value"],["for","mustVerified-tested",1,"form-check-label","flex","items-center"],["id","azt-config-who-allow",1,"grid","grid-cols-12","mt-4"],[1,"col-span-12","lg:col-span-5","pr-5"],[1,"mb-0","font-medium","flex","items-center"],[4,"ngIf","ngIfElse"],["elseAllowed",""],[1,"my-5"],[1,"text-right"],["azt-track-service","main-config-xaAyYXPj2ZT","class","btn btn-pending w-24 mr-2",3,"disabled","click",4,"ngIf"],["azt-track-service","main-config-3CEX8CXtLDk",1,"btn","w-24","btn-primary",3,"disabled","click"],[1,"text-xs","text-danger","mt-2"],[1,"text-danger","mt-1"],[1,"col-span-12","mt-4"],[1,"azt-list-classroom"],[3,"form","classroomGroupData","homeworkObj","permissionName"],[1,"bg-slate-100","dark:bg-darkmode-600","rounded-md","p-3"],[1,"text-md"],[1,"text-md","font-medium"],["azt-track-service","main-config-xaAyYXPj2ZT",1,"btn","btn-pending","w-24","mr-2",3,"disabled","click"]],template:function(t,i){if(1&t&&(e.YNc(0,bx,1,1,"azt-loading-effect",0),e.YNc(1,Kp,132,74,"ng-template",null,1,e.W1O)),2&t){const a=e.MAs(2);e.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a)}},dependencies:[F.O5,ds.lW,YA.Nt,ms.KE,ms.R9,Ai.gM,Xn.rZ,Xn.T$,Xn.c_,Xn.dW,Xn.cL,h._Y,h.Fj,h._,h.JJ,h.JL,h.sg,h.u,vi.l,wt.M,hm.B,ye.JV],encapsulation:2}),n})();var Yi=I(49671);class Gp{static priceValidator(o){const a=o.controls.examComboSetting;if("NONE"==a.controls.priceForAction.value)return a.controls.price.setErrors(null),null;let r=parseInt(a.controls.price.value.replace(/\./g,""),10);return r=isNaN(r)?0:r,r>=1e4?(a.controls.price.setErrors(null),null):(a.controls.price.setErrors({priceValidator:!0}),{identityRevealed:!0})}}var ps=I(87325),Yp=I(11460),yx=I(40687),qs=I(19167),$p=I(26425),Eg=I(18727),$A=I(41894),Og=I(4565),Ig=I(81899),Yo=I(30617),_c=I(98445);function Cx(n,o){if(1&n&&e._UZ(0,"azt-loading-effect",8),2&n){const t=e.oxw();e.Q6J("currentStatusObj",t.statusObj)}}function Tx(n,o){1&n&&(e.TgZ(0,"span"),e.O4$(),e.TgZ(1,"svg",19),e._UZ(2,"path",20),e.qZA()())}function kx(n,o){1&n&&(e.TgZ(0,"span"),e.O4$(),e.TgZ(1,"svg",21),e._UZ(2,"path",22)(3,"polyline",23)(4,"path",24),e.qZA()())}function Sx(n,o){1&n&&(e.TgZ(0,"span"),e.O4$(),e.TgZ(1,"svg",25),e._UZ(2,"path",22)(3,"polyline",23)(4,"line",26)(5,"line",27)(6,"line",28),e.qZA()())}const Mg=function(n){return{paddingLeft:n}},Ex=function(n){return{"font-medium text-primary":n}};function Ox(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"mat-tree-node",14),e._UZ(1,"button",15),e.TgZ(2,"div",16),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw(2);return e.KtG("category"!=r.type&&s.clickToDocumentObj(r))}),e.YNc(3,Tx,3,0,"span",17),e.YNc(4,kx,5,0,"span",17),e.YNc(5,Sx,7,0,"span",17),e.TgZ(6,"span",18),e._uU(7),e.ALo(8,"mytranslate"),e.qZA()()()}if(2&n){const t=o.$implicit,i=e.oxw(2);e.Q6J("ngStyle",e.VKq(8,Mg,15*t.level+"px")),e.xp6(2),e.Q6J("ngClass",e.VKq(10,Ex,i.examIdsSelected.includes(t.id))),e.xp6(1),e.Q6J("ngIf","cate"===t.type&&"knowledge"!==t.type||"knowledge"===t.type&&!t.isLeaf),e.xp6(1),e.Q6J("ngIf","cate"!==t.type&&"knowledge"!==t.type),e.xp6(1),e.Q6J("ngIf","knowledge"===t.type&&t.isLeaf),e.xp6(2),e.hij(" ",e.lcZ(8,6,t.item)," ")}}function Ix(n,o){1&n&&(e.TgZ(0,"span"),e.O4$(),e.TgZ(1,"svg",19),e._UZ(2,"path",20),e.qZA()())}function Mx(n,o){1&n&&(e.TgZ(0,"span"),e.O4$(),e.TgZ(1,"svg",35),e._UZ(2,"path",22)(3,"polyline",23)(4,"path",24),e.qZA()())}function Lx(n,o){1&n&&(e.TgZ(0,"span",36),e._UZ(1,"azt-loading-ui"),e.qZA())}function Bx(n,o){if(1&n&&(e.TgZ(0,"mat-tree-node",29)(1,"button",30)(2,"mat-icon",31),e._uU(3),e.qZA()(),e.TgZ(4,"div",32),e.YNc(5,Ix,3,0,"span",17),e.YNc(6,Mx,5,0,"span",17),e.TgZ(7,"span",33),e._uU(8),e.ALo(9,"mytranslate"),e.qZA(),e.YNc(10,Lx,2,0,"span",34),e.qZA()()),2&n){const t=o.$implicit,i=e.oxw(2);e.Q6J("ngStyle",e.VKq(10,Mg,15*t.level+"px")),e.xp6(1),e.Q6J("disabled",t.isLoading),e.uIk("aria-label","Toggle "+t.item),e.xp6(2),e.hij(" ",i.treeControl.isExpanded(t)?"expand_more":"chevron_right"," "),e.xp6(2),e.Q6J("ngIf","cate"===t.type&&"knowledge"!==t.type||"knowledge"===t.type&&!t.isLeaf),e.xp6(1),e.Q6J("ngIf","cate"!==t.type&&"knowledge"!==t.type||"knowledge"===t.type&&t.isLeaf),e.xp6(2),e.hij(" ",e.lcZ(9,8,t.item)," "),e.xp6(2),e.Q6J("ngIf",t.isLoading)}}function Px(n,o){if(1&n&&(e.TgZ(0,"ng-scrollbar",9)(1,"div",10)(2,"mat-tree",11),e.YNc(3,Ox,9,12,"mat-tree-node",12),e.YNc(4,Bx,11,12,"mat-tree-node",13),e.qZA()()()),2&n){const t=e.oxw();e.Q6J("visibility","hover"),e.xp6(2),e.Q6J("dataSource",t.commonDataSourceProcess)("treeControl",t.treeControl),e.xp6(2),e.Q6J("matTreeNodeDefWhen",t.hasChild)}}function T(n,o){if(1&n&&(e.TgZ(0,"span",37),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(t.examIdsSelected.length)}}let y=(()=>{class n extends mt.e{calculateExamIdsSelected(){this.examIdsSelected=this.examsSelected.map(t=>t.examId)}setLastSelected(t){this.commonDataSourceProcess._database.lastNodeSelected=this.commonDataSourceProcess.findLastTreeNodeSelected(t,[])}clickToDocumentObj(t){this.setLastSelected(t),this.examsSelected.map(i=>i.examId).includes(t.id)?this.examsSelected=this.examsSelected.filter(i=>i.examId!=t.id):this.examsSelected.push({examId:t.id,examName:t.item,examHashId:t.examHashId,examCategoryId:t.examCategoryId}),this.calculateExamIdsSelected()}confirmChooseExam(){this.dialogRef.close(this.examsSelected)}btnCloseDialog(){this.dialogRef.close(void 0)}get commonDataSourceProcess(){return this.userCategoriesDataSource}initData(){this.initStatusObj(),this.commonDataSourceProcess._database.initialData().then(t=>{this.commonDataSourceProcess.data=t,this.commonDataSourceProcess.toggleLastNode(this.commonDataSourceProcess._database.lastNodeSelected,0,void 0,i=>{i&&this.setLastSelected(i),this.stopStatusObj()})})}ngOnInit(){super.ngOnInit(),this.initData()}constructor(t,i,a,r){super(r,a),this.userCategoriesDatabase=t,this.azotaKnowledgeDatabaseService=i,this.dialogRef=a,this.data=r,this.getLevel=s=>s.level,this.isExpandable=s=>s.expandable,this.hasChild=(s,l)=>l.expandable,this.examsSelected=[],this.examIdsSelected=[],this.examsSelected=[...r.examsSelected],this.calculateExamIdsSelected(),this.treeControl=new $A.C2(this.getLevel,this.isExpandable),this.userCategoriesDataSource=new Og.n(this.treeControl,t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Og.$),e.Y36(Ig.J),e.Y36(U.so,8),e.Y36(U.WI,8))},n.\u0275cmp=e.Xpm({type:n,selectors:[["choose-exam-combo-dialog"]],features:[e.qOj],decls:13,vars:9,consts:[[1,"p-2","bg-white",2,"min-width","min(1000px, 100vw)"],[1,"box","p-2","border","border-slate-200","dark:border-darkmode-400","mb-2",2,"height","350px"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],["doneLoading",""],[1,"text-right"],["azt-track-service","choose-exam-combo-dialog-lKfOGyXb-g",1,"btn","btn-secondary","w-24","mr-2",3,"click"],["azt-track-service","choose-exam-combo-dialog-EeyuZL3sMa",1,"btn","btn-success","text-white","shadow-md",3,"click"],["class","ml-2 py-0.5 px-2 rounded-full text-xs bg-primary text-white font-medium ng-star-inserted",4,"ngIf"],[3,"currentStatusObj"],["track","vertical","pointerEventsMethod","scrollbar",1,"w-full",3,"visibility"],[1,"pr-2"],[3,"dataSource","treeControl"],["class","py-1",3,"ngStyle",4,"matTreeNodeDef"],[3,"ngStyle",4,"matTreeNodeDef","matTreeNodeDefWhen"],[1,"py-1",3,"ngStyle"],["mat-icon-button","","disabled",""],["azt-track-service","choose-exam-combo-dialog-MB422dBbk",1,"title-box","flex","mr-3;","clickable",2,"align-items","center",3,"ngClass","click"],[4,"ngIf"],[1,"text-matrix-title","ml-3",2,"word-break","break-word"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"w-6","h-6","mr-2","text-slate-600","dark:text-slate-500"],["d","M9.828 3h3.982a2 2 0 0 1 1.992 2.181l-.637 7A2 2 0 0 1 13.174 14H2.825a2 2 0 0 1-1.991-1.819l-.637-7a1.99 1.99 0 0 1 .342-1.31L.5 3a2 2 0 0 1 2-2h3.672a2 2 0 0 1 1.414.586l.828.828A2 2 0 0 0 9.828 3zm-8.322.12C1.72 3.042 1.95 3 2.19 3h5.396l-.707-.707A1 1 0 0 0 6.172 2H2.5a1 1 0 0 0-1 .981l.006.139z"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","aria-describedby","cdk-describedby-message-serverApp-1-31","cdk-describedby-host","serverApp-1",1,"mr-0","w-6","h-6","text-pending","mr-2"],["d","M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],["points","14 2 14 8 20 8"],["d","m9 15 2 2 4-4"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["x1","16","y1","13","x2","8","y2","13"],["x1","16","y1","17","x2","8","y2","17"],["x1","10","y1","9","x2","8","y2","9"],[3,"ngStyle"],["mat-icon-button","","matTreeNodeToggle","",3,"disabled"],[1,"mat-icon-rtl-mirror"],["azt-track-service","share-exam-document-RMj9n35_Y_","matTreeNodeToggle","",1,"title-box",2,"cursor","pointer"],[1,"text-matrix-title"],["class","w-4 h-4 inline-block ml-2",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","aria-describedby","cdk-describedby-message-serverApp-1-31","cdk-describedby-host","serverApp-1",1,"mat-tooltip-trigger","w-6","h-6","text-pending","ng-star-inserted"],[1,"w-4","h-4","inline-block","ml-2"],[1,"ml-2","py-0.5","px-2","rounded-full","text-xs","bg-primary","text-white","font-medium","ng-star-inserted"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,Cx,1,1,"azt-loading-effect",2),e.YNc(3,Px,5,4,"ng-template",null,3,e.W1O),e.qZA(),e.TgZ(5,"div",4)(6,"button",5),e.NdJ("click",function(){return i.btnCloseDialog()}),e._uU(7),e.ALo(8,"mytranslate"),e.qZA(),e.TgZ(9,"button",6),e.NdJ("click",function(){return i.confirmChooseExam()}),e._uU(10),e.ALo(11,"mytranslate"),e.YNc(12,T,2,1,"span",7),e.qZA()()()),2&t){const a=e.MAs(4);e.xp6(2),e.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a),e.xp6(5),e.hij(" ",e.lcZ(8,5,"lang_cms_common_close_btn")," "),e.xp6(3),e.hij(" ",e.lcZ(11,7,"lang_cms_common_ok")," "),e.xp6(2),e.Q6J("ngIf",i.examIdsSelected.length)}},dependencies:[F.mk,F.O5,F.PC,ds.RK,Yo.Hw,_c.fQ,_c.eu,_c.gi,_c.uo,k.KC,vi.l,wi.n,ye.JV],encapsulation:2}),n})(),O=(()=>{class n{constructor(t,i,a,r){this.el=t,this.renderer=i,this.decimalPipe=a,this.commonService=r,this.currencyChars=new RegExp("[.,]","g")}ngOnInit(){this.format(this.el.nativeElement.value)}onInput(t){this.format(t)}onPaste(t){t.preventDefault(),this.format(t.clipboardData?.getData("text/plain")??"")}format(t){const i=parseInt(String(t).replace(this.currencyChars,"")),a=this.commonService.formatMoney(i.toString());this.renderer.setProperty(this.el.nativeElement,"value",a)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.SBq),e.Y36(e.Qsj),e.Y36(F.JJ),e.Y36(Yn.z))},n.\u0275dir=e.lG2({type:n,selectors:[["","currencyFormat",""]],hostBindings:function(t,i){1&t&&e.NdJ("input",function(r){return i.onInput(r.target.value)})("paste",function(r){return i.onPaste(r)})}}),n})();function S(n,o){1&n&&(e.TgZ(0,"div",33),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_config_enter_price_greater_than_10000_VND")," "))}function J(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"span",34)(1,"span",35),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.TgZ(4,"a",36),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw(2);return e.KtG(s.removeExamById(r.controls.examId.value))}),e.TgZ(5,"span",37),e.ALo(6,"mytranslate"),e._UZ(7,"lucide-icon",38),e.qZA()()()}if(2&n){const t=o.$implicit;e.xp6(2),e.Oqu(e.lcZ(3,2,t.controls.examName.value)),e.xp6(3),e.Q6J("matTooltip",e.lcZ(6,4,"lang_exam_remove_exam_in_combo"))}}function ie(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",20)(1,"div",21)(2,"label",22),e._uU(3),e.ALo(4,"mytranslate"),e.qZA()(),e.TgZ(5,"div",23),e._UZ(6,"input",24),e.YNc(7,S,3,3,"div",25),e.qZA(),e.TgZ(8,"div",26)(9,"div",27),e._uU(10),e.ALo(11,"mytranslate"),e.TgZ(12,"span",28),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.addMoreExamId())}),e.O4$(),e.TgZ(13,"svg",29),e._UZ(14,"line",30)(15,"line",31),e.qZA(),e._uU(16),e.ALo(17,"mytranslate"),e.qZA()()(),e.kcU(),e.TgZ(18,"div"),e.YNc(19,J,8,6,"span",32),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(3),e.hij(" ",e.lcZ(4,6,"lang_config_enter_price_vnd")," "),e.xp6(3),e.Q6J("formControl",t.form.controls.examComboSetting.controls.price),e.xp6(1),e.Q6J("ngIf",t.form.controls.examComboSetting.controls.price.errors),e.xp6(3),e.hij(" ",e.lcZ(11,8,"lang_exam_list_exam_in_combo")," "),e.xp6(6),e.hij(" ",e.lcZ(17,10,"lang_exam_add_more_exam_to_combo")," "),e.xp6(3),e.Q6J("ngForOf",t.form.controls.examComboSetting.controls.examInfoFormArray.controls)}}let _e=(()=>{class n extends xe.Q{removeExamById(t){this.form.controls.examComboSetting.controls.examInfoFormArray=new h.Oe(this.form.controls.examComboSetting.controls.examInfoFormArray.controls.filter(i=>i.controls.examId.value!=t))}addMoreExamId(){let t=this.form.controls.examComboSetting.controls.examInfoFormArray.getRawValue().map(a=>({examId:a.examId,examName:a.examName,examHashId:a.examHashId,examCategoryId:""}));this.sAztDialogService.open(y,{data:{examsSelected:t},restoreFocus:!1}).afterClosed().subscribe(a=>{if(null==a)return;let r=[];a.forEach(s=>{r.push(new h.cw({examId:new h.NI(s.examId,{nonNullable:!0}),examName:new h.NI(s.examName,{nonNullable:!0}),examHashId:new h.NI(s.examHashId,{nonNullable:!0})}))}),this.form.controls.examComboSetting.controls.examInfoFormArray.clear(),r.forEach(s=>{this.form.controls.examComboSetting.controls.examInfoFormArray.push(s)})})}initFormControl(){if(this.form.controls.examComboSetting.controls.haveInit.value)return;this.form.controls.examComboSetting.controls.haveInit.setValue(!0);let t=this.examCombos.find(a=>null!=a.items.find(r=>r.objectId==this.currentExamId&&r.isMain));this.form.controls.examComboSetting.controls.comboId.setValue(t?.id??null),this.form.controls.examComboSetting.controls.price.setValue(t?.price?.toString()??"10000"),this.form.controls.examComboSetting.controls.priceForAction.setValue(t?.items?.find(a=>a.isMain)?.priceForAction?.toString()??"NONE");let i=[];t?.items?.forEach(a=>{this.currentExamId!=a?.objectId&&i.push(new h.cw({examId:new h.NI(a?.objectId,{nonNullable:!0}),examName:new h.NI(a?.name??"",{nonNullable:!0}),examHashId:new h.NI(a?.hashId??"",{nonNullable:!0})}))}),this.form.controls.examComboSetting.controls.examInfoFormArray.clear(),i.forEach(a=>{this.form.controls.examComboSetting.controls.examInfoFormArray.push(a)})}ngOnInit(){super.ngOnInit(),this.initFormControl()}constructor(t){super(),this.sAztDialogService=t}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(qi.C))},n.\u0275cmp=e.Xpm({type:n,selectors:[["config-document-price"]],inputs:{form:"form",examCombos:"examCombos",currentExamId:"currentExamId"},features:[e.qOj],decls:34,vars:29,consts:[[1,"config-document-price"],[3,"formGroup"],[1,"grid","grid-cols-12","gap-4"],[1,"col-span-12","lg:col-span-5"],[1,"font-medium","flex","items-center"],[1,"leading-relaxed","text-slate-500","text-xs","mt-1","pr-5"],[1,"text-danger"],["azt-track-service","config-price-document-IluAG2tC7","href","https://docs.azota.vn/docs/huong-dan-su-dung/thi-online/cai-dat-gia-khi-hoc-sinh-vao-thi-lam-de/","target","_blank",1,"font-medium","btn-text-primary"],[1,"col-span-12","lg:col-span-7"],[1,"flex","flex-col","sm:flex-row"],["azt-track-service","config-price-document-yYE5nRDsor",1,"form-check","mr-8"],["id","price-free","type","radio",1,"form-check-input",3,"formControl","value"],["for","price-free",1,"form-check-label"],["azt-track-service","config-price-document-xIII6tTWbN",1,"form-check","mr-8"],["id","price-exam-participation","type","radio",1,"form-check-input",3,"formControl","value"],["for","price-exam-participation",1,"form-check-label"],["azt-track-service","config-price-document-mb8XstgW3U",1,"form-check","mr-8"],["id","price-answer-viewing","type","radio",1,"form-check-input",3,"formControl","value"],["for","price-answer-viewing",1,"form-check-label"],["class","col-span-12",4,"ngIf"],[1,"col-span-12"],[1,"font-medium"],["for","enter-price",1,"form-label","flex","items-center"],[1,"setting-input"],["type","text","id","enter-price","appOnlyNumber","","currencyFormat","",1,"form-control",3,"formControl"],["class","text-xs text-danger mt-1",4,"ngIf"],[1,"pt-3","font-medium"],[1,"flex"],["azt-track-service","config-price-document-ktu3GfIZ6e",1,"pl-2","clickable","link__color","flex","items-center",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-activity","w-4","h-4","mr-1"],["x1","12","y1","5","x2","12","y2","19"],["x1","5","y1","12","x2","19","y2","12"],["class","pr-10 flex items-center pt-2",4,"ngFor","ngForOf"],[1,"text-xs","text-danger","mt-1"],[1,"pr-10","flex","items-center","pt-2"],[1,"link__color"],["azt-track-service","config-price-document-QnRPszWXs-",1,"btn","btn-transparent","btn-outline-danger","btn-sm","p-1","ml-1",3,"click"],[1,"w-4","h-4","inline-block",3,"matTooltip"],["name","x"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"form",1)(2,"div",2)(3,"div",3)(4,"label",4),e._uU(5),e.ALo(6,"mytranslate"),e.qZA(),e.TgZ(7,"div",5),e._uU(8),e.ALo(9,"mytranslate"),e.TgZ(10,"span",6),e._uU(11),e.ALo(12,"mytranslate"),e.qZA(),e.TgZ(13,"a",7),e._uU(14),e.ALo(15,"mytranslate"),e.qZA()()(),e.TgZ(16,"div",8)(17,"div",9)(18,"div",10),e._UZ(19,"input",11),e.TgZ(20,"label",12),e._uU(21),e.ALo(22,"mytranslate"),e.qZA()(),e.TgZ(23,"div",13),e._UZ(24,"input",14),e.TgZ(25,"label",15),e._uU(26),e.ALo(27,"mytranslate"),e.qZA()(),e.TgZ(28,"div",16),e._UZ(29,"input",17),e.TgZ(30,"label",18),e._uU(31),e.ALo(32,"mytranslate"),e.qZA()()()(),e.YNc(33,ie,20,12,"div",19),e.qZA()()()),2&t&&(e.xp6(1),e.Q6J("formGroup",i.form),e.xp6(4),e.hij(" ",e.lcZ(6,15,"lang_config_price_configuration")," "),e.xp6(3),e.hij(" ",e.lcZ(9,17,"lang_config_price_configuration_description")," "),e.xp6(3),e.Oqu(e.lcZ(12,19,"lang_config_price_configuration_description_note")),e.xp6(3),e.hij(" ",e.lcZ(15,21,"lang_auto_tim_hieu_them")," "),e.xp6(5),e.Q6J("formControl",i.form.controls.examComboSetting.controls.priceForAction)("value","NONE"),e.xp6(2),e.Oqu(e.lcZ(22,23,"lang_config_free")),e.xp6(3),e.Q6J("formControl",i.form.controls.examComboSetting.controls.priceForAction)("value","TAKE_TEST"),e.xp6(2),e.Oqu(e.lcZ(27,25,"lang_config_fee_for_exam_participation")),e.xp6(3),e.Q6J("formControl",i.form.controls.examComboSetting.controls.priceForAction)("value","SHOW_EXPLAIN"),e.xp6(2),e.Oqu(e.lcZ(32,27,"lang_config_fee_for_answer_viewing")),e.xp6(2),e.Q6J("ngIf","NONE"!==i.form.controls.examComboSetting.controls.priceForAction.value))},dependencies:[F.sg,F.O5,Ai.gM,h._Y,h.Fj,h._,h.JJ,h.JL,h.oH,h.sg,_.Nh5,Dt.Y,O,ye.JV],encapsulation:2}),n})();function Me(n,o){if(1&n&&e._UZ(0,"azt-loading-effect",3),2&n){const t=e.oxw();e.Q6J("currentStatusObj",t.statusObj)}}function Ie(n,o){1&n&&(e.TgZ(0,"div",25),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_vui_long_nhap_ten_de_thi")," "))}function Ve(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",26)(1,"config-level-subject",27),e.NdJ("sendLogPredictSubject",function(a){e.CHM(t);const r=e.oxw(2);return e.KtG(r.getLogPredictSubject(a))}),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("form",t.form)("questionContents",t.questionContent)("schoolLevelObjs",t.schoolLevelObjs)("examSchoolLogObj",t.examSchoolLogObj)}}function ot(n,o){if(1&n&&(e.TgZ(0,"div",28),e._UZ(1,"config-purpose-exam",29),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("purposeList",t.listPurposeObjs)("form",t.form)}}const ct=function(){return[]};function vt(n,o){if(1&n&&(e.TgZ(0,"div",26),e._UZ(1,"config-document-price",30),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("form",t.form)("examCombos",e.DdM(3,ct))("currentExamId",0)}}function hn(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",4)(1,"form",5)(2,"div",6)(3,"div",7)(4,"h3",8),e._uU(5),e.ALo(6,"mytranslate"),e.qZA(),e.TgZ(7,"div",9)(8,"div",10)(9,"div",11)(10,"label",12),e._uU(11),e.ALo(12,"mytranslate"),e.qZA()(),e.TgZ(13,"div",11)(14,"div",13),e._UZ(15,"input",14),e.ALo(16,"mytranslate"),e.qZA(),e.YNc(17,Ie,3,3,"div",15),e.qZA()(),e.YNc(18,Ve,2,4,"div",16),e.YNc(19,ot,2,2,"div",17),e.YNc(20,vt,2,4,"div",16),e.TgZ(21,"div",18)(22,"div",11)(23,"label",19),e._uU(24),e.ALo(25,"mytranslate"),e.qZA()(),e.TgZ(26,"div",11)(27,"div",13),e._UZ(28,"textarea",20),e.ALo(29,"mytranslate"),e.qZA()()()(),e.TgZ(30,"div",21)(31,"div",22)(32,"button",23),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.handleDestroy())}),e._uU(33),e.ALo(34,"mytranslate"),e.qZA(),e.TgZ(35,"button",24),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.handleSubmitData())}),e._uU(36),e.ALo(37,"mytranslate"),e.qZA()()()()()()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.form),e.xp6(4),e.hij(" ",e.lcZ(6,13,"lang_auto_cau_hinh_chung")," "),e.xp6(6),e.hij(" ",e.lcZ(12,15,"lang_auto_ten")," "),e.xp6(4),e.s9C("placeholder",e.lcZ(16,17,"lang_auto_nhap_ten")+" ..."),e.xp6(2),e.Q6J("ngIf",t.form.controls.generalTitle.errors),e.xp6(1),e.Q6J("ngIf",!t.checkExamToProgram),e.xp6(1),e.Q6J("ngIf",!t.checkExamToProgram),e.xp6(1),e.Q6J("ngIf",!t.isBusinessDomain),e.xp6(4),e.hij(" ",e.lcZ(25,19,"lang_auto_mo_ta")," "),e.xp6(4),e.s9C("placeholder",e.lcZ(29,21,"lang_core_nhap_mo_ta")+" ..."),e.xp6(5),e.hij(" ",e.lcZ(34,23,"lang_auto_huy")," "),e.xp6(2),e.Q6J("disabled",t.form.invalid||(4==t.form.controls.purposeExam.value||8==t.form.controls.purposeExam.value||12==t.form.controls.purposeExam.value)&&""===t.form.controls.purposeNote.value.trim()),e.xp6(1),e.hij(" ",e.lcZ(37,25,"lang_auto_luu")," ")}}function Kt(n,o){if(1&n&&(e.TgZ(0,"div",31)(1,"div",32)(2,"div",33)(3,"span",34),e._UZ(4,"azt-loading-ui"),e.qZA(),e.TgZ(5,"div",35),e._uU(6),e.qZA()()()()),2&n){const t=e.oxw();e.xp6(6),e.Oqu(t.logConfig.msg)}}let si=(()=>{class n extends xe.Q{processConvertBase64OfMathJaxToCdnUrl(){var t=this;return(0,Yi.Z)(function*(){if(t.dataSave.exam&&t.dataSave.exam.questionObj.listQuestions){let i=[];for(const s of t.dataSave.exam?.questionObj.listQuestions)i.push({categoryId:s.categoryId,groupId:s.groupId,name:s.name??"none",metadata:s.metadata,isImage:s.isImage,questionContent:s.questionContent,answerMedia:s.answerMedia,questionText:s.questionText,answerType:s.answerType,answerConfig:s.answerConfig,coordinates:s.coordinates,answerResult:s.answerResult,totalQuestion:s.totalQuestion,tags:s.tags??[],mediaId:s.mediaId,mediaMeta:s.mediaMeta,attachments:s.attachments,version:s.version,isFixAns:s.isFixAns,groupType:s.groupType,__path:s.__path});let a=(s,l)=>{let c=t.commonService.myTranslateInstant("lang_auto_dang_xu_ly_tep_tin");t.logConfig.setStatus(`${c} ${Math.floor(s/l*20)+80-1}%`)};const r=yield t.sAztSaveProcessService.convertBase64OfMathJaxToCdnUrlInQuestions(i,a);t.lstEncodeQuestions=r}})()}processSaveQuestions(t,i,a){var r=this.lstEncodeQuestions.length;let s=t+100>r?r:t+100,l=this.lstEncodeQuestions.slice(t,s)??[];l.length>0?this.saveQuestionObjs(l,i).then(c=>{if(c.examConfigs&&c.examConfigs.length>0){let u=a.concat(c.examConfigs);this.processSaveQuestions(s,c.indexSaved,u)}else this.logConfig.stopStatus(),this.showErrorSnack("lang_auto_khong_luu_duoc_noi_dung_cau_hoi_trong_de_vui_long_kiem_tra_lai")}):this.saveExamObj(a)}saveExamObj(t){var i=this;if(!this.dataSave.exam)return;let a=this.form.getRawValue();if(0==a.purposeExam)return this.showErrorSnack("lang_testbank_please_choose_purpose_exam");let r=!1;this.saveParts=this.saveParts.map(R=>{const j=R.split("_____");return-1!==R.toLocaleLowerCase().indexOf(this.commonService.myTranslateInstant("lang_auto_ngau_nhien")??"ng\u1eabu nhi\xean")&&(r=!0),1===j.length?j[0]:j[1]});let s=this.userService.getUserObj(),l=JSON.stringify({type:"exam",id:0,user:s.id});this.dataSave.exam.examObj.scoringMethod="1",this.dataSave.exam.examObj.name=a.generalTitle,this.dataSave.exam.examObj.examConfigs=JSON.stringify(t),this.dataSave.exam.examObj.description=a.generalDescription,this.dataSave.exam.examObj.editorStatus=2,this.dataSave.exam.examObj.metadata=JSON.stringify(this.saveParts),this.dataSave.exam.examObj.isRandomExam=r,this.dataSave.exam.examObj.schoolLevelId=a.schoolLevel,this.dataSave.exam.examObj.schoolSubjectId=a.schoolSubject,this.dataSave.exam.examObj.purposeId=a.purposeExam,this.dataSave.exam.examObj.purposeNote=a.purposeNote;const c=this.getMyQueryParam("classroomId"),u=this.getMyQueryParam("programId"),m=this.getMyQueryParam("sessionId"),p=this.getMyQueryParam("indexSession"),f=this.programDetailResponse?.sessions??[];let b,L;if(this.checkExamToProgram&&f.length){const{currentObj:R,nextIndex:j,nextObj:G}=this.paramClassroomService.findCurrentAndNextSession(f,Number(m)),ae=432e6,W=new Date(R?.fromTime??"").getTime()+ae;b=R?.fromTime,L=j?G?.fromTime:this.timeService.formatDateTimeFillData(new Date(W).toLocaleString("en-GB"))}var N={id:this.dataSave.exam.examObj.id??0,categoryId:this.dataSave.exam.examObj.categoryId??0,scoringMethod:this.dataSave.exam.examObj.scoringMethod,name:this.dataSave.exam.examObj.name??"",description:this.dataSave.exam.examObj.description,examConfigs:this.dataSave.exam.examObj.examConfigs,suggestions:this.dataSave.exam.examObj.suggestions,labelsUrl:this.dataSave.exam.examObj.labelsUrl,abcdLabelPos:this.dataSave.exam.examObj.abcdLabelPos,questionLabelMap:this.dataSave.exam.examObj.questionLabelMap,firstInGroupIndexes:this.dataSave.exam.examObj.firstInGroupIndexes,totalExam:this.dataSave.exam.examObj.totalExam??0,cdnExamFile:this.dataSave.exam.examObj.cdnExamFile,cdnEditorFile:this.dataSave.exam.examObj.cdnEditorFile,trackEdit:this.dataSave.exam.examObj.trackEdit,examHeader:this.dataSave.exam.examObj.examHeader,expandInfoObj:this.dataSave.exam.examObj.expandInfoObj,cutData:void 0,editorStatus:this.dataSave.exam.examObj.editorStatus,startQuestionIndex:this.dataSave.exam.examObj.startQuestionIndex,metadata:this.dataSave.exam.examObj.metadata,isRandomExam:this.dataSave.exam.examObj.isRandomExam,schoolLevelId:this.dataSave.exam.examObj.schoolLevelId,schoolSubjectId:this.dataSave.exam.examObj.schoolSubjectId,purposeId:this.dataSave.exam.examObj.purposeId,purposeNote:this.dataSave.exam.examObj.purposeNote,predictLogRequestObj:this.predictLogRequestObj,classroomIds:c?[Number(c)]:void 0,startTime:this.checkExamToProgram?b:void 0,endTime:this.checkExamToProgram?L:void 0,isPublished:this.checkExamToProgram?1:void 0,minutes:this.checkExamToProgram?60:void 0,resetQuestionIndex:this.dataSave.exam.examObj.resetQuestionIndex};this.examService.apiExamSaveObjPost(N,l).subscribe(function(){var R=(0,Yi.Z)(function*(j){if(!j.success)return i.logConfig.stopStatus(),i.errorStatusObj(j.message);if(!j.data?.obj)return i.logConfig.stopStatus(),i.errorStatusObj("lang_common_not_found_exam_obj",!0);const G=j.data.obj;i.saveExamComboSetting(G,i.form.controls.examComboSetting,function(){var ae=(0,Yi.Z)(function*(W){if(W)return i.logConfig.stopStatus(),i.errorStatusObj(W,!0);let le=[];if(i.dataSave.exam?.examConfig.forEach(ve=>{ve.oldId&&le.push(ve.oldId)}),le.length&&i.listQuestionIdCreateByAI.length){let ve={selectQuestionIds:le,suggestQuestionIds:i.listQuestionIdCreateByAI};yield i.saveLogQuestionsCreateByAI(ve)}if(i.backToLink=`/admin/testbank/azota-editor/${null!=i.cur_cateId?i.cur_cateId:0}`,!i.commonService.isNullUndefinedOrEmpty(p)&&!c)return i.programFormService.ExamExerciseOfProgramToSessionStorage(G.id??0,G.name,"exam"),void(window.location.href=i.commonService.getLocalRouter(`/business/edit-educational-program/${u}?indexSession=${p}`));c?u&&m?i.saveDocumentTrainingCenter(Number(c),Number(u),Number(m),G,ve=>{if(ve)return i.errorStatusObj(ve);window.location.href=i.commonService.getLocalRouter(`/admin/student/classroom-details/${c}/3?sessionId=${m}`)}):window.location.href=i.commonService.getLocalRouter(`/admin/testbank/action-online-offline/${null!=i.cur_cateId?i.cur_cateId:0}/${G.hashId}?backto=${i.backToLink}&isNewDocument=1&classroomId=${c}`):window.location.href=i.commonService.getLocalRouter(`/admin/testbank/action-online-offline/${null!=i.cur_cateId?i.cur_cateId:0}/${G.hashId}?backto=${i.backToLink}&isNewDocument=1`)});return function(W){return ae.apply(this,arguments)}}())});return function(j){return R.apply(this,arguments)}}())}saveQuestionObjs(t,i){return new Promise(a=>{this.questionService.apiQuestionSaveObjsV2Post({listQuestions:t}).subscribe(r=>{if(this.dataSave.exam&&1===r.success&&r.data?.objs){const s=[];r.data.objs.forEach((l,c)=>{const u=this.dataSave.exam?.examConfig.find(p=>p.name==l.name);if(s.push({id:l.id,name:l.name,groupId:l.groupId,scorePerQuestion:u?.point||1,totalQuestion:1,sort:c+i}),t[c]){const p=t[c];if(p.__path&&p.__path.length>0){const f=p.__path.split("=>")[0].trim();this.saveParts.includes(f)||this.saveParts.push(f)}else this.saveParts.push(`[@Q${l.id}: C\xe2u ${c+i+1}]`)}}),a({indexSaved:r.data?.objs?.length+i,examConfigs:s})}else a({indexSaved:i,examConfigs:[]})})})}saveLogQuestionsCreateByAI(t){return new Promise(i=>{this.waitDestroy(this.aiService.apiAiLogQuestionsPost(t).subscribe(a=>{i()}))})}saveDocumentTrainingCenter(t,i,a,r,s){this.waitDestroy(this.classroomService.apiClassroomsClassroomIdSessionsSessionIdDocumentsPost(t,a,{name:r.name,refId:r.id,type:"exam"}).subscribe({next:c=>{s(void 0)},error:c=>{s(c.error.message)}}))}saveExamComboSetting(t,i,a){let r=i.controls.examInfoFormArray.getRawValue().map(c=>c.examId);r.includes(t.id)||r.push(t.id);let s=r.map(c=>({objectId:c,priceForAction:i.controls.priceForAction.value,isMain:t.id==c?1:0,objectType:"EXAM"})).filter(c=>"NONE"!=c.priceForAction);if(s.length<=0)return a(void 0);let l={id:void 0,name:t.name,price:this.commonService.formatMoneyToNumber(i.controls.price.value),items:s};this.waitDestroy(this.comboPackageService.apiComboPackageUpsertComboPackagePost(l).subscribe(c=>{if(!c.success)return a(c.message);a(void 0)}))}startMainProcessSave(){this.processConvertBase64OfMathJaxToCdnUrl().then(()=>{this.dataSave.exam&&this.dataSave.exam.questionObj&&this.processSaveQuestions(0,0,[])}).catch(t=>{this.logConfig.stopStatus(),this.errorStatusObj(this.commonService.myTranslateInstant("lang_auto_xay_ra_loi_trong_qua_trinh_xu_ly_hinh_anh_cua_de_thi")??"")})}handleSubmitData(){if(!this.dataSave.exam||!this.dataSave.exam.questionObj.listQuestions)return;if(this.logConfig.status)return this.showErrorSnack("lang_core_qua_trinh_luu_de_dang_dien_ra");this.logConfig.setStatus(this.commonService.myTranslateInstant("lang_auto_dang_luu_du_lieu_de_thi"));const t=this.dataSave.exam.questionObj.listQuestions;let i=this.commonService.myTranslateInstant("lang_auto_xay_ra_loi_trong_qua_trinh_xu_ly_hinh_anh_cua_de_thi")??"";this.questionSaveService.convertQuestions(t,this.dataSave.exam.rootQuests,(a,r=i,s)=>{this.logConfig.stopStatus(),this.showErrorSnack(r),s&&this.stopStatusObj()}).then(()=>{this.startMainProcessSave()})}handleDestroy(){this.onBack.emit()}getLogPredictSubject(t){this.predictLogRequestObj=t}getSubjectAndLevel(){this.initStatusObj(),this.waitDestroy(this.commonListService.apiCommonListSubjectAndLevelsGet(this.commonService.getBusinessDomainUrl()).subscribe(t=>{if(!t.success)return this.errorStatusObj(t.message);this.examSchoolLogObj=t.data?.examSchoolLogObj,this.schoolLevelObjs=t.data?.schoolLevelSubjectObjs??[],this.getListPurposeExam(i=>{if(i)return this.errorStatusObj(i);this.stopStatusObj()})}))}getListPurposeExam(t){this.waitDestroy(this.commonListService.apiCommonListExamPurposesGet().subscribe(i=>{i.success?(this.listPurposeObjs=i.data?.objs??[],t(void 0)):t(i.message)}))}fillDataFormToProgram(){const t=this.getMyQueryParam("sessionId"),i=this.getMyQueryParam("indexSession"),a=this.getMyQueryParam("programId");if(i){const r=this.browserStorageService.getSessionStorage(`${this.programFormService.key+a}`);if(r){const s=this.zipDataService.decodeContentGzip(r),l=this.castJsonToObj(s),c=this.commonService.myTranslateInstant("lang_business_exam_session");this.form.controls.generalTitle.setValue(`${c} ${(Number(i)??0)+1}-${l?.sessionFormArray[i].documentObjs.length+1}`),this.form.controls.schoolLevel.setValue(l?.generalFormGroup.schoolLevelId??0),this.form.controls.schoolSubject.setValue(l?.generalFormGroup.schoolSubjectId??0),this.form.controls.purposeExam.setValue(12);const u=this.commonService.myTranslateInstant("lang_business_exam_by_curriculum")??"";this.form.controls.purposeNote.setValue(u)}}else{if(this.checkExamToProgram=!!t,!this.checkExamToProgram)return;this.paramClassroomService.getProgramTraining().subscribe(r=>{this.programDetailResponse=r;const s=this.programDetailResponse?.sessions??[],{currentObj:c}=this.paramClassroomService.findCurrentAndNextSession(s,Number(t)),u=this.commonService.myTranslateInstant("lang_business_exam_session"),p=c?.documents?.filter(b=>"exam"===b.type)?.length??1;this.form.controls.generalTitle.setValue(`${u} ${c?.sort??1}-${p+1}`),this.form.controls.schoolLevel.setValue(this.programDetailResponse?.program?.schoolLevelId??0),this.form.controls.schoolSubject.setValue(this.programDetailResponse?.program?.schoolSubjectId??0),this.form.controls.purposeExam.setValue(12);const f=this.commonService.myTranslateInstant("lang_business_exam_by_curriculum")??"";this.form.controls.purposeNote.setValue(f)})}}ngOnInit(){super.ngOnInit(),this.cur_cateId=this.commonService.getMyParam(this.activeRoute,"cat_id"),this.dataSave=this.editorOutputDataService.getOutputData(),this.fillDataFormToProgram(),this.questionContent=[],this.dataSave.exam?.questionObj.listQuestions?.forEach((a,r)=>{r<25&&this.questionContent.push(this.partQuestionSearchTextService.partQuestionSearchTextByQuestionForm(a))}),this.getSubjectAndLevel();let i=this.dataSave.exam?.examObj.name??this.dataSave.homework?.name??"";i&&this.form.controls.generalTitle.setValue(i)}constructor(t,i,a,r,s,l,c,u,m,p,f,b,L,N,R,j,G){super(),this.aiService=t,this.editorOutputDataService=i,this.activeRoute=a,this.questionService=r,this.examService=s,this.userService=l,this.questionSaveService=c,this.commonListService=u,this.partQuestionSearchTextService=m,this.sAztSaveProcessService=p,this.classroomService=f,this.paramClassroomService=b,this.timeService=L,this.browserStorageService=N,this.zipDataService=R,this.programFormService=j,this.comboPackageService=G,this.listQuestionIdCreateByAI=[],this.onBack=new e.vpe,this.logConfig=new on.H,this.cur_cateId=0,this.backToLink="",this.dataSave={},this.saveParts=[],this.schoolLevelObjs=[],this.questionContent=[],this.listPurposeObjs=[],this.predictLogRequestObj={predictSchoolSubjectId:0,acceptPredictStatus:0,predictByTotalQuestion:0},this.lstEncodeQuestions=[],this.checkExamToProgram=!1,this.questionSaveService.callbackBase64ToCanvas=(ae,W)=>{let le=this.commonService.myTranslateInstant("lang_auto_dang_xu_ly_hinh_anh_cho_de_thi");this.logConfig.setStatus(`${le} ${Math.floor(ae/W*50)}%`)},this.questionSaveService.callbackUploadImage=(ae,W)=>{let le=this.commonService.myTranslateInstant("lang_auto_dang_xu_ly_hinh_anh_cho_de_thi");this.logConfig.setStatus(`${le} ${Math.floor(ae/W*30)+50}%`)},this.form=new h.cw({generalTitle:new h.NI("",{nonNullable:!0,validators:[h.kI.required,Da._.noWhiteSpace]}),generalDescription:new h.NI("",{nonNullable:!0}),schoolLevel:new h.NI(0,{nonNullable:!0,validators:[h.kI.required,h.kI.min(1)]}),schoolSubject:new h.NI(0,{nonNullable:!0,validators:[h.kI.required,h.kI.min(1)]}),purposeExam:new h.NI(0,{nonNullable:!0,validators:[h.kI.required,h.kI.min(1)]}),purposeNote:new h.NI("",{nonNullable:!0}),examComboSetting:new h.cw({comboId:new h.NI(null,{nonNullable:!1}),price:new h.NI("10000",{nonNullable:!0}),priceForAction:new h.NI("NONE",{nonNullable:!0}),examInfoFormArray:new h.Oe([]),haveInit:new h.NI(!1,{nonNullable:!0})})},{validators:[Gp.priceValidator]})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(nr.pT),e.Y36(Ar.O),e.Y36(E.gz),e.Y36(un.aE),e.Y36(un.Oe),e.Y36(ya.U),e.Y36(Ha),e.Y36(ps.o7),e.Y36(Yp.r),e.Y36(yx.a),e.Y36(_r.um),e.Y36(Xr),e.Y36(Mo.D),e.Y36(oa.n),e.Y36(Us.a),e.Y36(qs.t),e.Y36(un.FK))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-info-general"]],inputs:{listQuestionIdCreateByAI:"listQuestionIdCreateByAI"},outputs:{onBack:"onBack"},features:[e.qOj],decls:4,vars:3,consts:[[3,"currentStatusObj",4,"ngIf","ngIfElse"],["doneLoading",""],["style","width: 100vw; height: 100vh; position: fixed; z-index: 9999; top: 0; left: 0; display: flex; justify-content: center; align-items: center; background-color: rgba(0, 0, 0, 0.4)",4,"ngIf"],[3,"currentStatusObj"],[1,"intro-y","mt-8","p-3"],[3,"formGroup"],[1,"mx-auto",2,"max-width","1000px"],[1,"setting-block"],[1,"text-md","uppercase","font-medium"],[1,"box","mt-2","p-5"],["id","azt-config-name",1,"grid","grid-cols-12"],[1,"col-span-12","lg:col-span-12"],["for","general-name",1,"form-label","mb-0","font-medium","flex","items-center"],[1,"setting-input"],["id","general-name","formControlName","generalTitle","type","text",1,"form-control",3,"placeholder"],["class","mt-2 text-danger text-xs fade",4,"ngIf"],["class","mt-4",4,"ngIf"],["class","mt-2",4,"ngIf"],["id","azt-config-desc",1,"grid","grid-cols-12","mt-4"],["for","general-desc",1,"form-label","mb-0","font-medium","flex","items-center"],["id","general-desc","formControlName","generalDescription",1,"form-control","w-full",2,"height","150px",3,"placeholder"],[1,"mt-5"],[1,"text-right"],["azt-track-service","info-general-j9RyDEucWp",1,"btn","btn-secondary","w-24","mr-2",3,"click"],["azt-track-service","info-general-ZAzZ6aTX1b",1,"btn","w-24","btn-primary",3,"disabled","click"],[1,"mt-2","text-danger","text-xs","fade"],[1,"mt-4"],[3,"form","questionContents","schoolLevelObjs","examSchoolLogObj","sendLogPredictSubject"],[1,"mt-2"],[3,"purposeList","form"],[3,"form","examCombos","currentExamId"],[2,"width","100vw","height","100vh","position","fixed","z-index","9999","top","0","left","0","display","flex","justify-content","center","align-items","center","background-color","rgba(0, 0, 0, 0.4)"],[2,"text-align","center","color","#000000"],[2,"margin-bottom","10px"],[1,"w-4","h-4","inline-block","mr-2"],[2,"font-size","20px","margin-top","10px","background-color","#f0f8ffa3","padding","10px","border-radius","5px"]],template:function(t,i){if(1&t&&(e.YNc(0,Me,1,1,"azt-loading-effect",0),e.YNc(1,hn,38,27,"ng-template",null,1,e.W1O),e.YNc(3,Kt,7,1,"div",2)),2&t){const a=e.MAs(2);e.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a),e.xp6(3),e.Q6J("ngIf",i.logConfig.status)}},dependencies:[F.O5,h._Y,h.Fj,h.JJ,h.JL,h.sg,h.u,vi.l,wt.M,wi.n,$p.Z,Eg.u,_e,ye.JV],encapsulation:2}),n})();function Tn(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_vui_long_nhap_so_cau")," "))}function vn(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_vui_long_nhap_so_cau_lon_hon_0")," "))}function Pi(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_testbank_please_enter_a_number_less_than_or_equal_to")+" 120"," "))}function di(n,o){if(1&n&&(e.TgZ(0,"div",36),e.YNc(1,Tn,3,3,"span",0),e.YNc(2,vn,3,3,"span",0),e.YNc(3,Pi,3,3,"span",0),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.form.controls.amountTemplateOriginalA4.errors.required),e.xp6(1),e.Q6J("ngIf",t.form.controls.amountTemplateOriginalA4.errors.min),e.xp6(1),e.Q6J("ngIf",t.form.controls.amountTemplateOriginalA4.errors.max)}}function Jn(n,o){if(1&n&&(e.TgZ(0,"div",32)(1,"label",33),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e._UZ(4,"input",34),e.YNc(5,di,4,3,"div",35),e.qZA()),2&n){const t=e.oxw(2);e.xp6(2),e.hij(" ",e.lcZ(3,3,"lang_auto_nhap_so_cau")," "),e.xp6(2),e.Q6J("value",1),e.xp6(1),e.Q6J("ngIf",t.form.controls.amountTemplateOriginalA4.errors)}}function pn(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_vui_long_nhap_so_cau")," "))}function Ei(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_vui_long_nhap_so_cau_lon_hon_0")," "))}function Oi(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_testbank_please_enter_a_number_less_than_or_equal_to")+" 40"," "))}function Kn(n,o){if(1&n&&(e.TgZ(0,"div",36),e.YNc(1,pn,3,3,"span",0),e.YNc(2,Ei,3,3,"span",0),e.YNc(3,Oi,3,3,"span",0),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.form.controls.amountTemplateMultipleChoiceA4.errors.required),e.xp6(1),e.Q6J("ngIf",t.form.controls.amountTemplateMultipleChoiceA4.errors.min),e.xp6(1),e.Q6J("ngIf",t.form.controls.amountTemplateMultipleChoiceA4.errors.max)}}function $o(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_vui_long_nhap_so_cau")," "))}function rr(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_vui_long_nhap_so_cau_lon_hon_0")," "))}function vr(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_testbank_please_enter_a_number_less_than_or_equal_to")+" 8"," "))}function Xi(n,o){if(1&n&&(e.TgZ(0,"div",36),e.YNc(1,$o,3,3,"span",0),e.YNc(2,rr,3,3,"span",0),e.YNc(3,vr,3,3,"span",0),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.form.controls.amountTemplateTrueFalseA4.errors.required),e.xp6(1),e.Q6J("ngIf",t.form.controls.amountTemplateTrueFalseA4.errors.min),e.xp6(1),e.Q6J("ngIf",t.form.controls.amountTemplateTrueFalseA4.errors.max)}}function ka(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_vui_long_nhap_so_cau")," "))}function fc(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_vui_long_nhap_so_cau_lon_hon_0")," "))}function sr(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_testbank_please_enter_a_number_less_than_or_equal_to")+" 6"," "))}function lr(n,o){if(1&n&&(e.TgZ(0,"div",36),e.YNc(1,ka,3,3,"span",0),e.YNc(2,fc,3,3,"span",0),e.YNc(3,sr,3,3,"span",0),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.form.controls.amountTemplateFillA4.errors.required),e.xp6(1),e.Q6J("ngIf",t.form.controls.amountTemplateFillA4.errors.min),e.xp6(1),e.Q6J("ngIf",t.form.controls.amountTemplateFillA4.errors.max)}}function su(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",3)(2,"label",37),e._uU(3),e.ALo(4,"mytranslate"),e.qZA(),e.TgZ(5,"input",38),e.NdJ("input",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.changeStartNumberForAnotherTypeQuestion())}),e.qZA(),e.YNc(6,Kn,4,3,"div",35),e.qZA(),e.TgZ(7,"div",3)(8,"label",39),e._uU(9),e.ALo(10,"mytranslate"),e.qZA(),e.TgZ(11,"input",40),e.NdJ("input",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.changeStartNumberForAnotherTypeQuestion())}),e.qZA(),e.YNc(12,Xi,4,3,"div",35),e.qZA(),e.TgZ(13,"div",3)(14,"label",41),e._uU(15),e.ALo(16,"mytranslate"),e.qZA(),e._UZ(17,"input",42),e.YNc(18,lr,4,3,"div",35),e.qZA(),e.BQk()}if(2&n){const t=e.oxw(2);e.xp6(3),e.hij(" ",e.lcZ(4,9,"lang_answer_sheet_create_total_multiple_choice_question")," "),e.xp6(2),e.Q6J("value",1),e.xp6(1),e.Q6J("ngIf",t.form.controls.amountTemplateMultipleChoiceA4.errors),e.xp6(3),e.hij(" ",e.lcZ(10,11,"lang_answer_sheet_create_total_true_false_question")," "),e.xp6(2),e.Q6J("value",1),e.xp6(1),e.Q6J("ngIf",t.form.controls.amountTemplateTrueFalseA4.errors),e.xp6(3),e.hij(" ",e.lcZ(16,13,"lang_answer_sheet_create_total_fill_answer_question")," "),e.xp6(2),e.Q6J("value",1),e.xp6(1),e.Q6J("ngIf",t.form.controls.amountTemplateFillA4.errors)}}function Rs(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_vui_long_nhap_so_cau")," "))}function gc(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_vui_long_nhap_so_cau_lon_hon_0")," "))}function lu(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_testbank_please_enter_a_number_less_than_or_equal_to")+" 60"," "))}function cu(n,o){if(1&n&&(e.TgZ(0,"div",36),e.YNc(1,Rs,3,3,"span",0),e.YNc(2,gc,3,3,"span",0),e.YNc(3,lu,3,3,"span",0),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.form.controls.amountTemplateA5.errors.required),e.xp6(1),e.Q6J("ngIf",t.form.controls.amountTemplateA5.errors.min),e.xp6(1),e.Q6J("ngIf",t.form.controls.amountTemplateA5.errors.max)}}function fl(n,o){if(1&n&&(e.TgZ(0,"div",32)(1,"label",33),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e._UZ(4,"input",43),e.YNc(5,cu,4,3,"div",35),e.qZA()),2&n){const t=e.oxw(2);e.xp6(2),e.hij(" ",e.lcZ(3,3,"lang_auto_nhap_so_cau")," "),e.xp6(2),e.Q6J("value",1),e.xp6(1),e.Q6J("ngIf",t.form.controls.amountTemplateA5.errors)}}function uu(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_vui_long_nhap_so_cau")," "))}function gl(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_vui_long_nhap_so_cau_lon_hon_0")," "))}function pd(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_testbank_please_enter_a_number_less_than_or_equal_to")+" 32"," "))}function Am(n,o){if(1&n&&(e.TgZ(0,"div",36),e.YNc(1,uu,3,3,"span",0),e.YNc(2,gl,3,3,"span",0),e.YNc(3,pd,3,3,"span",0),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.form.controls.amountTemplateA6.errors.required),e.xp6(1),e.Q6J("ngIf",t.form.controls.amountTemplateA6.errors.min),e.xp6(1),e.Q6J("ngIf",t.form.controls.amountTemplateA6.errors.max)}}function F4(n,o){if(1&n&&(e.TgZ(0,"div",32)(1,"label",33),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e._UZ(4,"input",44),e.YNc(5,Am,4,3,"div",35),e.qZA()),2&n){const t=e.oxw(2);e.xp6(2),e.hij(" ",e.lcZ(3,3,"lang_auto_nhap_so_cau")," "),e.xp6(2),e.Q6J("value",1),e.xp6(1),e.Q6J("ngIf",t.form.controls.amountTemplateA6.errors)}}function N4(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_vui_long_nhap_so_cau")," "))}function Z4(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_vui_long_nhap_so_cau_lon_hon_0")," "))}function D4(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_testbank_please_enter_a_number_less_than_or_equal_to")+" 36"," "))}function U4(n,o){if(1&n&&(e.TgZ(0,"div",36),e.YNc(1,N4,3,3,"span",0),e.YNc(2,Z4,3,3,"span",0),e.YNc(3,D4,3,3,"span",0),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.form.controls.amountTemplateEssayA4.errors.required),e.xp6(1),e.Q6J("ngIf",t.form.controls.amountTemplateEssayA4.errors.min),e.xp6(1),e.Q6J("ngIf",t.form.controls.amountTemplateEssayA4.errors.max)}}function j4(n,o){if(1&n&&(e.TgZ(0,"div",32)(1,"label",33),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e._UZ(4,"input",45),e.YNc(5,U4,4,3,"div",35),e.qZA()),2&n){const t=e.oxw(2);e.xp6(2),e.hij(" ",e.lcZ(3,3,"lang_auto_nhap_so_cau")," "),e.xp6(2),e.Q6J("value",1),e.xp6(1),e.Q6J("ngIf",t.form.controls.amountTemplateEssayA4.errors)}}function q4(n,o){if(1&n&&(e.TgZ(0,"div")(1,"form",1)(2,"div",2),e._uU(3),e.ALo(4,"mytranslate"),e.qZA(),e.TgZ(5,"div",3)(6,"div",4),e._uU(7),e.ALo(8,"mytranslate"),e.qZA(),e.TgZ(9,"div",5)(10,"div",6),e._UZ(11,"input",7),e.TgZ(12,"label",8),e._uU(13),e.ALo(14,"mytranslate"),e.qZA()(),e.TgZ(15,"div",6),e._UZ(16,"input",9),e.TgZ(17,"label",10),e._uU(18),e.ALo(19,"mytranslate"),e.qZA()(),e.YNc(20,Jn,6,5,"div",11),e.TgZ(21,"div",6),e._UZ(22,"input",12),e.TgZ(23,"label",13),e._uU(24),e.ALo(25,"mytranslate"),e.qZA()(),e.TgZ(26,"div",6),e._UZ(27,"input",14),e.TgZ(28,"label",15),e._uU(29),e.ALo(30,"mytranslate"),e.qZA()(),e.TgZ(31,"div",6),e._UZ(32,"input",16),e.TgZ(33,"label",17),e._uU(34),e.ALo(35,"mytranslate"),e.qZA()(),e.TgZ(36,"div",6),e._UZ(37,"input",18),e.TgZ(38,"label",19),e._uU(39),e.ALo(40,"mytranslate"),e.qZA()(),e.TgZ(41,"div",6),e._UZ(42,"input",20),e.TgZ(43,"label",21),e._uU(44),e.ALo(45,"mytranslate"),e.qZA()(),e.TgZ(46,"div",6),e._UZ(47,"input",22),e.TgZ(48,"label",23),e._uU(49),e.ALo(50,"mytranslate"),e.qZA()(),e.TgZ(51,"div",6),e._UZ(52,"input",24),e.TgZ(53,"label",25),e._uU(54),e.ALo(55,"mytranslate"),e.qZA()(),e.YNc(56,su,19,15,"ng-container",0),e.TgZ(57,"div",6),e._UZ(58,"input",26),e.TgZ(59,"label",27),e._uU(60),e.ALo(61,"mytranslate"),e.qZA()(),e.YNc(62,fl,6,5,"div",11),e.TgZ(63,"div",6),e._UZ(64,"input",28),e.TgZ(65,"label",29),e._uU(66),e.ALo(67,"mytranslate"),e.qZA()(),e.YNc(68,F4,6,5,"div",11),e.TgZ(69,"div",6),e._UZ(70,"input",30),e.TgZ(71,"label",31),e._uU(72),e.ALo(73,"mytranslate"),e.qZA()(),e.YNc(74,j4,6,5,"div",11),e.qZA()()()()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.form),e.xp6(2),e.hij(" ",e.lcZ(4,32,"lang_auto_chon_mau_phieu_tra_loi")," "),e.xp6(4),e.hij(" ",e.lcZ(8,34,"lang_auto_mau_co_sbd_ma_de")," "),e.xp6(4),e.Q6J("value",t.allAnswerSheet.templateOriginalA4),e.xp6(2),e.hij(" ",e.lcZ(14,36,"lang_auto_answersheet_mau_a4_azota")," "),e.xp6(3),e.Q6J("value",t.allAnswerSheet.templateA4WithColorNew),e.xp6(2),e.hij(" ",e.lcZ(19,38,"lang_auto_answersheet_mau_a4_azota_color_new")," "),e.xp6(2),e.Q6J("ngIf",t.form.controls.answersheetTemplate.value==t.allAnswerSheet.templateOriginalA4||t.form.controls.answersheetTemplate.value==t.allAnswerSheet.templateA4WithColorNew),e.xp6(2),e.Q6J("value",t.allAnswerSheet.templateTrueFalseA4),e.xp6(2),e.hij(" ",e.lcZ(25,40,"lang_auto_answersheet_mau_a4_true_false")," "),e.xp6(3),e.Q6J("value",t.allAnswerSheet.templateTrueFalseA4WithColor),e.xp6(2),e.hij(" ",e.lcZ(30,42,"lang_auto_answersheet_mau_a4_true_false_color")," "),e.xp6(3),e.Q6J("value",t.allAnswerSheet.templateTrueFalseEssayA4),e.xp6(2),e.hij(" ",e.lcZ(35,44,"lang_auto_answersheet_mau_essay_true_false")," "),e.xp6(3),e.Q6J("value",t.allAnswerSheet.templateTrueFalseA5),e.xp6(2),e.hij(" ",e.lcZ(40,46,"lang_auto_answersheet_mau_a5_true_false")," "),e.xp6(3),e.Q6J("value",t.allAnswerSheet.templateTrueFalseA6),e.xp6(2),e.hij(" ",e.lcZ(45,48,"lang_auto_answersheet_mau_a6_true_false")," "),e.xp6(3),e.Q6J("value",t.allAnswerSheet.templateA4WithFax),e.xp6(2),e.hij(" ",e.lcZ(50,50,"lang_auto_answersheet_mau_a4_fax")," "),e.xp6(3),e.Q6J("value",t.allAnswerSheet.templateA4WithFaxV2),e.xp6(2),e.hij(" ",e.lcZ(55,52,"lang_auto_answersheet_mau_a4_fax_v2")," "),e.xp6(2),e.Q6J("ngIf",t.form.controls.answersheetTemplate.value==t.allAnswerSheet.templateTrueFalseA4||t.form.controls.answersheetTemplate.value==t.allAnswerSheet.templateTrueFalseA4WithColor||t.form.controls.answersheetTemplate.value==t.allAnswerSheet.templateTrueFalseEssayA4||t.form.controls.answersheetTemplate.value==t.allAnswerSheet.templateTrueFalseA5||t.form.controls.answersheetTemplate.value==t.allAnswerSheet.templateTrueFalseA6||t.form.controls.answersheetTemplate.value==t.allAnswerSheet.templateA4WithFax||t.form.controls.answersheetTemplate.value==t.allAnswerSheet.templateA4WithFaxV2),e.xp6(2),e.Q6J("value",t.allAnswerSheet.templateA5Full50),e.xp6(2),e.hij(" ",e.lcZ(61,54,"lang_auto_answersheet_mau_a5_full_a4_50")," "),e.xp6(2),e.Q6J("ngIf",t.form.controls.answersheetTemplate.value==t.allAnswerSheet.templateA5Full50),e.xp6(2),e.Q6J("value",t.allAnswerSheet.templateA6Full20),e.xp6(2),e.hij(" ",e.lcZ(67,56,"lang_auto_answersheet_mau_a6_full_a4_20")," "),e.xp6(2),e.Q6J("ngIf",t.form.controls.answersheetTemplate.value==t.allAnswerSheet.templateA6Full20),e.xp6(2),e.Q6J("value",t.allAnswerSheet.templateA4Essay),e.xp6(2),e.hij(" ",e.lcZ(73,58,"lang_auto_answersheet_mau_a4_35hh")," "),e.xp6(2),e.Q6J("ngIf",t.form.controls.answersheetTemplate.value==t.allAnswerSheet.templateA4Essay)}}let Cv=(()=>{class n extends xe.Q{constructor(){super(...arguments),this.formControlName="",this.resetQuestionIndex=!0,this.allAnswerSheet=Ki.x}changeStartNumberForAnotherTypeQuestion(){if(!this.resetQuestionIndex){let t=this.form?.controls.amountTemplateMultipleChoiceA4.value??40,i=this.form?.controls.amountTemplateTrueFalseA4.value??8;this.form?.controls.amountTemplateStartTrueFalseA4.setValue(Number(t)+1),this.form?.controls.amountTemplateStartFillA4.setValue(Number(t)+Number(i)+1),this.form?.updateValueAndValidity()}}}return n.\u0275fac=function(){let o;return function(i){return(o||(o=e.n5z(n)))(i||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["app-testbank-choose-answer-sheet"]],inputs:{form:"form",formControlName:"formControlName",resetQuestionIndex:"resetQuestionIndex"},features:[e.qOj],decls:1,vars:1,consts:[[4,"ngIf"],[3,"formGroup"],[1,"form-label","font-medium"],[1,"mt-2"],[1,"text-md"],[1,"border","p-2","border-slate-200","dark:border-darkmode-400","rounded","mt-2"],[1,"form-check","mt-2"],["id","sample-1","type","radio","formControlName","answersheetTemplate",1,"form-check-input",3,"value"],["for","sample-1",1,"form-check-label"],["id","sample-200","type","radio","formControlName","answersheetTemplate",1,"form-check-input",3,"value"],["for","sample-200",1,"form-check-label"],["class","mt-2 mb-4",4,"ngIf"],["id","sample-15","type","radio","formControlName","answersheetTemplate",1,"form-check-input",3,"value"],["for","sample-15",1,"form-check-label"],["id","sample-150","type","radio","formControlName","answersheetTemplate",1,"form-check-input",3,"value"],["for","sample-150",1,"form-check-label"],["id","sample-16","type","radio","formControlName","answersheetTemplate",1,"form-check-input",3,"value"],["for","sample-16",1,"form-check-label"],["id","sample-17","type","radio","formControlName","answersheetTemplate",1,"form-check-input",3,"value"],["for","sample-17",1,"form-check-label"],["id","sample-18","type","radio","formControlName","answersheetTemplate",1,"form-check-input",3,"value"],["for","sample-18",1,"form-check-label"],["id","sample-19","type","radio","formControlName","answersheetTemplate",1,"form-check-input",3,"value"],["for","sample-19",1,"form-check-label"],["id","sample-190","type","radio","formControlName","answersheetTemplate",1,"form-check-input",3,"value"],["for","sample-190",1,"form-check-label"],["id","sample-5","type","radio","formControlName","answersheetTemplate",1,"form-check-input",3,"value"],["for","sample-5",1,"form-check-label"],["id","sample-4","type","radio","formControlName","answersheetTemplate",1,"form-check-input",3,"value"],["for","sample-4",1,"form-check-label"],["id","sample-write","type","radio","formControlName","answersheetTemplate",1,"form-check-input",3,"value"],["for","sample-write",1,"form-check-label"],[1,"mt-2","mb-4"],["for","input-sample-0",1,"form-label","font-medium"],["id","input-sample-0","appOnlyNumber","","type","text","formControlName","amountTemplateOriginalA4",1,"form-control",3,"value"],["class","mt-2 text-danger text-xs font-medium",4,"ngIf"],[1,"mt-2","text-danger","text-xs","font-medium"],["for","input-sample-15",1,"form-label","font-medium"],["id","input-sample-15","appOnlyNumber","","type","text","formControlName","amountTemplateMultipleChoiceA4",1,"form-control",3,"value","input"],["for","input-sample-17",1,"form-label","font-medium"],["id","input-sample-17","appOnlyNumber","","type","text","formControlName","amountTemplateTrueFalseA4",1,"form-control",3,"value","input"],["for","input-sample-19",1,"form-label","font-medium"],["id","input-sample-19","appOnlyNumber","","type","text","formControlName","amountTemplateFillA4",1,"form-control",3,"value"],["id","input-sample-0","appOnlyNumber","","type","text","formControlName","amountTemplateA5",1,"form-control",3,"value"],["id","input-sample-0","appOnlyNumber","","type","text","formControlName","amountTemplateA6",1,"form-control",3,"value"],["id","input-sample-0","appOnlyNumber","","type","text","formControlName","amountTemplateEssayA4",1,"form-control",3,"value"]],template:function(t,i){1&t&&e.YNc(0,q4,75,60,"div",0),2&t&&e.Q6J("ngIf",i.form)},dependencies:[F.O5,h._Y,h.Fj,h._,h.JJ,h.JL,h.sg,h.u,Dt.Y,wt.M,ye.JV],encapsulation:2}),n})();var R4=I(82481),du=I(6990),z4=I(62180),Tv=I(9315),H4=I(58504),J4=I(22096),K4=I(94664),G4=I(27921);let Lg=(()=>{class n extends mt.e{constructor(t,i){super(i,t),this.dialogRef=t,this.data=i}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(U.so,8),e.Y36(U.WI,8))},n.\u0275cmp=e.Xpm({type:n,selectors:[["dialog-content-example-dialog"]],features:[e.qOj],decls:21,vars:13,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5"],[1,"text-md","font-medium","flex","items-center"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-6","h-6","mr-2","text-pending"],["points","7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2"],["x1","12","y1","8","x2","12","y2","12"],["x1","12","y1","16","x2","12.01","y2","16"],[1,"mt-2"],[1,"text-xs","text-slate-500","dark:text-slate-400"],[1,"p-3","text-right"],["mat-dialog-close","",1,"btn","w-24","btn-outline-secondary","mr-2"],["azt-track-service","confirm-dialog-PXYIKWeh7vE","cdkFocusInitial","",1,"btn","w-24","btn-primary",3,"mat-dialog-close"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),e.O4$(),e.TgZ(4,"svg",4),e._UZ(5,"polygon",5)(6,"line",6)(7,"line",7),e.qZA(),e._uU(8),e.ALo(9,"mytranslate"),e.qZA(),e.kcU(),e.TgZ(10,"div",8)(11,"p",9),e._uU(12),e.ALo(13,"mytranslate"),e.qZA()()()(),e.TgZ(14,"div",10)(15,"button",11),e._uU(16),e.ALo(17,"mytranslate"),e.qZA(),e.TgZ(18,"button",12),e._uU(19),e.ALo(20,"mytranslate"),e.qZA()()()),2&t&&(e.xp6(8),e.hij(" ",e.lcZ(9,5,i.data.title)," "),e.xp6(4),e.hij(" ",e.lcZ(13,7,i.data.msg)," "),e.xp6(4),e.hij(" ",e.lcZ(17,9,"lang_auto_dong")," "),e.xp6(2),e.Q6J("mat-dialog-close",!0),e.xp6(1),e.hij(" ",e.lcZ(20,11,"lang_auto_xac_nhan")," "))},dependencies:[U.ZT,ye.JV],encapsulation:2}),n})();var Bg=I(36028),qr=I(22557);function Y4(n,o){1&n&&(e.TgZ(0,"mat-icon",15),e._uU(1,"cancel"),e.qZA())}function $4(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"mat-chip-row",13),e.NdJ("removed",function(){const r=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.remove(r))}),e._uU(1),e.YNc(2,Y4,2,0,"mat-icon",14),e.qZA()}if(2&n){const t=o.$implicit,i=e.oxw();e.Q6J("removable",i.removable),e.xp6(1),e.hij(" ",t," "),e.xp6(1),e.Q6J("ngIf",i.removable)}}let kv=(()=>{class n extends mt.e{add(t){const i=(t.value||"").trim();i&&i.split("|").forEach(r=>{this.data.answers.push(r.trim())}),t.input.value=""}remove(t){const i=this.data.answers.indexOf(t);i>=0&&this.data.answers.splice(i,1)}notification(){this.showSuccessSnack("lang_auto_cap_nhap_dap_an_thanh_cong")}constructor(t,i,a){super(i,t),this.dialogRef=t,this.data=i,this.commonService=a,this.separatorKeysCodes=[Bg.K5],this.selectable=!0,this.removable=!0,this.addOnBlur=!0}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(U.so,8),e.Y36(U.WI),e.Y36(Yn.z))},n.\u0275cmp=e.Xpm({type:n,selectors:[["dialog-answer-question"]],features:[e.qOj],decls:25,vars:24,consts:[[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-body"],[1,"intro"],[1,"text-base","font-medium","mr-auto"],[1,"info"],["appearance","outline",1,"example-chip-list",2,"margin-top","10px"],["chipList",""],[3,"removable","removed",4,"ngFor","ngForOf"],[3,"placeholder","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur","matChipInputTokenEnd"],[1,"text-right","mt-3"],["azt-track-service","dialog-answer-question-SsxKRDN6kND",1,"btn","w-24","btn-secondary","mr-3",3,"mat-dialog-close"],["azt-track-service","dialog-answer-question-1MY4eREqFzD","cdkFocusInitial","","color","warn",1,"btn","w-24","btn-primary",3,"mat-dialog-close","click"],[3,"removable","removed"],["matChipRemove","",4,"ngIf"],["matChipRemove",""]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()(),e.TgZ(7,"div",3)(8,"span",5),e._uU(9),e.ALo(10,"mytranslate"),e.qZA(),e.TgZ(11,"mat-form-field",6)(12,"mat-chip-grid",null,7),e.ALo(14,"mytranslate"),e.YNc(15,$4,3,3,"mat-chip-row",8),e.TgZ(16,"input",9),e.NdJ("matChipInputTokenEnd",function(r){return i.add(r)}),e.ALo(17,"mytranslate"),e.qZA()()()(),e.TgZ(18,"div",10)(19,"button",11),e._uU(20),e.ALo(21,"mytranslate"),e.qZA(),e.TgZ(22,"button",12),e.NdJ("click",function(){return i.notification()}),e._uU(23),e.ALo(24,"mytranslate"),e.qZA()()()()()),2&t){const a=e.MAs(13);e.xp6(5),e.hij(" ",e.lcZ(6,12,"lang_auto_cai_dat_cau_tra_loi_cho_cau_hoi_dien_tu")," "),e.xp6(4),e.hij(" ",e.lcZ(10,14,"lang_auto_answer_question_desc_dot")," "),e.xp6(3),e.uIk("aria-label",e.lcZ(14,16,"lang_auto_dap_an_duoc_cong_nhan")),e.xp6(3),e.Q6J("ngForOf",i.data.answers),e.xp6(1),e.s9C("placeholder",e.lcZ(17,18,"lang_auto_them_dap_an_duoc_cong_nhan")+" ..."),e.Q6J("matChipInputFor",a)("matChipInputSeparatorKeyCodes",i.separatorKeysCodes)("matChipInputAddOnBlur",i.addOnBlur),e.xp6(3),e.Q6J("mat-dialog-close",!1),e.xp6(1),e.hij(" ",e.lcZ(21,20,"lang_auto_huy")," "),e.xp6(2),e.Q6J("mat-dialog-close",!0),e.xp6(1),e.hij(" ",e.lcZ(24,22,"lang_auto_luu")," ")}},dependencies:[F.sg,F.O5,qr.RA,qr.oH,qr.qH,qr.z3,U.ZT,Yo.Hw,ms.KE,ye.JV],encapsulation:2}),n})(),Vp=(()=>{class n{static openLoadingEffect(t){var i=document.getElementById(this.idComponent),a=document.getElementById(this.idStatusContent);null!==i&&null!==a&&(a.innerText=t,i.style.display="flex")}static closeLoadingEffect(t){return new Promise(i=>{setTimeout(()=>{var a=document.getElementById(this.idComponent),r=document.getElementById(this.idStatusContent);null!==a&&null!==r&&(a.style.display="none",r.innerText=""),i(!0)},t)})}static changeMsgLoadingEffect(t){var i=document.getElementById(this.idComponent),a=document.getElementById(this.idStatusContent);null!==i&&null!==a&&(a.innerText=t)}ngOnInit(){}constructor(){this.idComponent="status-loading-effect-component",this.idStatusContent="status-loading-effect-component-content"}}return n.idComponent="status-loading-effect-component",n.idStatusContent="status-loading-effect-component-content",n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["status-loading-effect-component"]],decls:7,vars:3,consts:[[1,"loading-effect",2,"display","none","position","fixed","display","flex","width","100vw","height","100%","background","#000000c7","color","#ffffff","font-size","20px","font-weight","lighter","justify-content","center","align-items","center","cursor","progress","z-index","1001","top","0","left","0",3,"id"],[1,"text-center","loading-effect-frame",2,"height","85%","overflow-x","auto"],[1,"flex","justify-center","mt-5"],[1,"w-6","h-6"],[3,"type"],[1,"span-status",2,"margin-top","10px","position","relative","animation","animatefadeIn 0.3s"],[3,"id"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e._UZ(4,"azt-loading-ui",4),e.qZA()(),e.TgZ(5,"div",5),e._UZ(6,"span",6),e.qZA()()()),2&t&&(e.Q6J("id",i.idComponent),e.xp6(4),e.Q6J("type","bootstrap-spinner"),e.xp6(2),e.Q6J("id",i.idStatusContent))},dependencies:[wi.n],encapsulation:2}),n})();I(77424);const Ev={a:"rgb(0, 0, 255, 0.2)",b:"rgb(255, 165, 0, 0.2)",c:"rgb(0, 128, 0, 0.2)",d:"rgb(128, 0, 128, 0.2)",e:"rgb(255, 255, 0, 0.2)",f:"rgb(0, 0, 255, 0.2)",g:"rgb(0, 128, 0, 0.2)",h:"rgb(128, 0, 128, 0.2)"},Ov={A:"B",B:"C",C:"D",D:"E",E:"F",F:"G",G:"H"},hs=100;let bC=(()=>{class n{getErrorQtns(t){var i=[];for(let a=0;a<t.length;a++)!t[a].isGroup&&0==t[a].answers.length&&(t[a].strAns&&void 0!==t[a].strAns||i.push(t[a].num));return i}sumHighTo(t,i){let a=0,r=i.filter(s=>!s.inactive);for(let s=0;s<t;s++)a+=Math.round(r[s].heigh);return a}maxWidthTo(t,i){let a=[],r=i.filter(s=>!s.inactive);for(let s=0;s<t;s++)a.push(r[s].width);return Math.round(Math.max(...a))}constructor(t){this.commonService=t,this.fillColor=(i,a,r,s,l,c)=>{a.fillStyle=i,a.fillRect(Math.round(r),Math.round(s),Math.round(l),Math.round(c))},this.drawRect=(i,a,r,s,l,c)=>{a.beginPath(),a.lineWidth=1,a.strokeStyle=i,a.rect(Math.round(r),Math.round(s),Math.round(l),Math.round(c)),a.stroke()},this.getSingleImgData=(i,a)=>{if(i.inactive){let r=this.commonService.myTranslateInstant("lang_auto_khong_xac_dinh_duoc_vung_thong_tin")??"";throw this.commonService.snackError(r),new Error(r)}try{let r=document.createElement("canvas");return r.width=0==i.width?2:Math.round(i.width),r.height=0==i.heigh?2:Math.round(i.heigh),r.getContext("2d")?.drawImage(a[i.pageIndex].canvas,Math.round(i.left),Math.round(i.top),r.width,r.height,0,0,r.width,r.height),r.toDataURL("image/png")}catch(r){return console.log(r),"https://via.placeholder.com/300"}},this.getScatteredImgData=(i,a)=>{const r=i.filter(l=>!l.inactive);if(i.filter(l=>l.inactive).length==i.length){let l=this.commonService.myTranslateInstant("lang_auto_khong_xac_dinh_duoc_vung_thong_tin")??"";throw this.commonService.snackError(l),new Error(l)}try{let l=document.createElement("canvas"),c=r.map(p=>p.width);l.width=Math.round(Math.max(...c));let u=0;for(let p=0;p<r.length;p++)u+=r[p].heigh;l.height=Math.round(u);let m=l.getContext("2d");for(let p=0;p<r.length;p++)m?.drawImage(a[r[p].pageIndex].canvas,Math.round(r[p].left),Math.round(r[p].top),Math.round(r[p].width),Math.round(r[p].heigh),0,0==p?0:this.sumHighTo(p,r),Math.round(r[p].width),Math.round(r[p].heigh));return l.toDataURL("image/png")}catch(l){return console.log(l),"https://via.placeholder.com/300"}}}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(Yn.z))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Mv=I(7444),Lv=I(79998),vC=I(18750),Bv=I(24630),wC=I(75986),Pv=I(55940);let yC=(()=>{class n{constructor(t){this.ref=t}onInput(t){if(""!=t.target.value){let i=t.target.selectionStart,a=t.target.selectionEnd;if(t.target.value=t.target.value.replace(/[^\d.,]/g,""),""==t.target.value&&(t.target.value="0"),t.target.value.includes(",")&&(t.target.value=t.target.value.replace(",",".")),t.target.setSelectionRange(i,a),t.preventDefault(),!this.lastValue||this.lastValue&&t.target.value.length>0&&this.lastValue!==t.target.value){this.lastValue=this.ref.nativeElement.value=t.target.value;const r=document.createEvent("HTMLEvents");r.initEvent("input",!1,!0),t.target.dispatchEvent(r)}}else t.target.value=""}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.SBq))},n.\u0275dir=e.lG2({type:n,selectors:[["","appReplaceCommas",""]],hostBindings:function(t,i){1&t&&e.NdJ("input",function(r){return i.onInput(r)})}}),n})();var hd=I(34423);const CC=["myDialogExamInfo"];function TC(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",19),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw(2);let l;return e.KtG(s.onHandleGoToQuestion(null!==(l=r.rawIndex)&&void 0!==l?l:0))}),e.TgZ(1,"span"),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()}if(2&n){const t=o.$implicit;e.xp6(2),e.Oqu(e.lcZ(3,1,"lang_auto_cau")+" "+t.labelIndex)}}function kC(n,o){if(1&n&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.TgZ(4,"td",16),e._uU(5),e.qZA(),e.TgZ(6,"td",17),e.YNc(7,TC,4,3,"button",18),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,3,"lang_auto_tong_so_cau_trac_nghiem")),e.xp6(3),e.Oqu(null==t.examInfo.listMultiple?null:t.examInfo.listMultiple.length),e.xp6(2),e.Q6J("ngForOf",t.examInfo.listMultiple)}}function SC(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",19),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw(2);let l;return e.KtG(s.onHandleGoToQuestion(null!==(l=r.rawIndex)&&void 0!==l?l:0))}),e.TgZ(1,"span"),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()}if(2&n){const t=o.$implicit;e.xp6(2),e.Oqu(e.lcZ(3,1,"lang_auto_cau")+" "+t.labelIndex)}}function EC(n,o){if(1&n&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.TgZ(4,"td",16),e._uU(5),e.qZA(),e.TgZ(6,"td",17),e.YNc(7,SC,4,3,"button",18),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,3,"lang_auto_tong_so_cau_tu_luan")),e.xp6(3),e.Oqu(null==t.examInfo.listEssay?null:t.examInfo.listEssay.length),e.xp6(2),e.Q6J("ngForOf",t.examInfo.listEssay)}}function OC(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",19),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw(2);let l;return e.KtG(s.onHandleGoToQuestion(null!==(l=r.rawIndex)&&void 0!==l?l:0))}),e.TgZ(1,"span"),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()}if(2&n){const t=o.$implicit;e.xp6(2),e.Oqu(e.lcZ(3,1,"lang_auto_cau")+" "+t.labelIndex)}}function IC(n,o){if(1&n&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.TgZ(4,"td",16),e._uU(5),e.qZA(),e.TgZ(6,"td",17),e.YNc(7,OC,4,3,"button",18),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,3,"lang_auto_cau_trac_nghiem_dien_tu")),e.xp6(3),e.Oqu(null==t.examInfo.listFill?null:t.examInfo.listFill.length),e.xp6(2),e.Q6J("ngForOf",t.examInfo.listFill)}}function MC(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",19),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw(2);let l;return e.KtG(s.onHandleGoToQuestion(null!==(l=r.rawIndex)&&void 0!==l?l:0))}),e.TgZ(1,"span"),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()}if(2&n){const t=o.$implicit;e.xp6(2),e.Oqu(e.lcZ(3,1,"lang_auto_cau")+" "+t.labelIndex)}}function LC(n,o){if(1&n&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.TgZ(4,"td",16),e._uU(5),e.qZA(),e.TgZ(6,"td",17),e.YNc(7,MC,4,3,"button",18),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,3,"lang_auto_tong_so_cau_dung_sai")),e.xp6(3),e.Oqu(null==t.examInfo.listTrueFalse?null:t.examInfo.listTrueFalse.length),e.xp6(2),e.Q6J("ngForOf",t.examInfo.listTrueFalse)}}function BC(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",19),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw(2);let l;return e.KtG(s.onHandleGoToQuestion(null!==(l=r.rawIndex)&&void 0!==l?l:0))}),e.TgZ(1,"span"),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()}if(2&n){const t=o.$implicit;e.xp6(2),e.Oqu(e.lcZ(3,1,"lang_auto_cau")+" "+t.labelIndex)}}function PC(n,o){if(1&n&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.TgZ(4,"td",16),e._uU(5),e.qZA(),e.TgZ(6,"td",17),e.YNc(7,BC,4,3,"button",18),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,3,"lang_testbank_number_of_unanswered_questions")),e.xp6(3),e.Oqu(null==t.examInfo.listUnanswered?null:t.examInfo.listUnanswered.length),e.xp6(2),e.Q6J("ngForOf",t.examInfo.listUnanswered)}}function QC(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",19),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw(3);return e.KtG(s.onHandleGoToQuestion(r))}),e.TgZ(1,"span"),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()}if(2&n){const t=o.$implicit;e.xp6(2),e.Oqu(e.lcZ(3,1,"lang_auto_cau")+" "+t)}}function FC(n,o){if(1&n&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.TgZ(4,"td",16),e._uU(5),e.qZA(),e.TgZ(6,"td",17),e.YNc(7,QC,4,3,"button",18),e.qZA()()),2&n){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(e.lcZ(3,3,"lang_auto_cau_trac_nghiem_co_"+t.key+"_dap_an")),e.xp6(3),e.Oqu(t.value.length),e.xp6(2),e.Q6J("ngForOf",t.value)}}function NC(n,o){if(1&n&&(e.ynx(0),e.YNc(1,FC,8,5,"tr",14),e.BQk()),2&n){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",null==t.value?null:t.value.length)}}let Fx=(()=>{class n extends xe.Q{constructor(t){super(),this.answerTypeService=t,this.startIndexQuestion=1,this.data={},this.type="edit",this.closeDialog=new e.vpe,this.goToQuestion=new e.vpe,this.questionObjs=[],this.examInfo={},this.isMobile=!1}onKeydownHandler(t){this.closeDialog.emit()}onGlobalClick(t){this.myDialog?.nativeElement.contains(t.target)||this.closeDialog.emit()}btnCloseDialog(t){this.closeDialog.emit(t)}initData(){this.questionObjs=this.data.obj??[],this.filterQuestion()}calculateQuestion(t){let i=0;this.questionObjs.forEach(a=>{i++;let r="createPDF"==t?a.index:"createDocx"==t?a.numberQuestion:a.rawIndex,s="createPDF"==t?a.tempData:"createDocx"==t?a.typeQuestion:a,l=("createDocx"==t?r:null!=a.labelIndex?a.labelIndex:r)+("createDocx"==t?0:this.startIndexQuestion),c={rawIndex:r+this.startIndexQuestion,labelIndex:l};this.answerTypeService.isEssayAnswer(s)?null!=r&&this.examInfo.listEssay?.push(c):null!=r&&!this.answerTypeService.isFillAnswer(s)&&!this.answerTypeService.isTrueFalseAnswer(s)&&this.examInfo.listMultiple?.push(c),this.answerTypeService.isTrueFalseAnswer(s)&&null!=r&&this.examInfo.listTrueFalse?.push(c),this.answerTypeService.isFillAnswer(s)&&null!=r&&this.examInfo.listFill?.push(c),(this.answerTypeService.isOneChoiceAnswer(s)||this.answerTypeService.isMultipleChoiceAnswer(s))&&a.answers&&null!=r&&this.countTotalAnswerOfQuestion(a.answers.length,l),!this.answerTypeService.isEssayAnswer(s)&&!this.answerTypeService.isTrueFalseAnswer(s)&&(!a.answerResult||!a.answerResult.length)&&null!=r&&this.examInfo.listUnanswered?.push(c)}),this.examInfo.totalQuestion=i}filterQuestion(){this.examInfo.listEssay=[],this.examInfo.listMultiple=[],this.examInfo.listFill=[],this.examInfo.listTrueFalse=[],this.examInfo.listUnanswered=[],this.examInfo.listQuestionWithTotalAnswer={},this.calculateQuestion(this.type)}countTotalAnswerOfQuestion(t,i){this.examInfo.listQuestionWithTotalAnswer&&(this.examInfo.listQuestionWithTotalAnswer?.hasOwnProperty(t)||(this.examInfo.listQuestionWithTotalAnswer[t]=[]),this.examInfo.listQuestionWithTotalAnswer[t].push(i))}onHandleGoToQuestion(t){this.goToQuestion.emit(t),this.btnCloseDialog(!1)}ngOnInit(){super.ngOnInit(),this.isMobile=this.commonService.isMobileOrTable(),this.initData()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(fr.i))},n.\u0275cmp=e.Xpm({type:n,selectors:[["azt-exam-info"]],viewQuery:function(t,i){if(1&t&&e.Gf(CC,5),2&t){let a;e.iGM(a=e.CRH())&&(i.myDialog=a.first)}},hostBindings:function(t,i){1&t&&e.NdJ("keydown.escape",function(r){return i.onKeydownHandler(r)},!1,e.evT)},inputs:{startIndexQuestion:"startIndexQuestion",data:"data",type:"type"},outputs:{closeDialog:"closeDialog",goToQuestion:"goToQuestion"},features:[e.qOj],decls:38,vars:32,consts:[[1,"box-dialog"],[1,"dialog-overlay",3,"click"],["cdkDrag","","cdkDragRootElement",".dialog-drag","cdkDragHandle","",1,"dialog-header",2,"cursor","move"],[1,"dialog-title"],[1,"dialog-close",3,"click"],[2,"overflow","auto","height","65vh"],[1,"px-4"],[1,"quest-info-number"],[1,"quest-info-item"],[1,"table","table-bordered"],[1,"table-header"],[2,"width","35%"],[2,"width","15%"],[2,"width","50%"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"text-center"],[2,"padding-top","0px","padding-bottom","0px"],["class","label-quest-item",3,"click",4,"ngFor","ngForOf"],[1,"label-quest-item",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e.NdJ("click",function(){return i.btnCloseDialog(!1)}),e.qZA(),e.TgZ(2,"div")(3,"div",2)(4,"div",3),e._uU(5),e.ALo(6,"mytranslate"),e.qZA(),e.TgZ(7,"div",4),e.NdJ("click",function(){return i.btnCloseDialog(!1)}),e.TgZ(8,"mat-icon"),e._uU(9,"close"),e.qZA()()(),e.TgZ(10,"div",5)(11,"div",6)(12,"div",7)(13,"p",8),e._uU(14),e.ALo(15,"mytranslate"),e.ALo(16,"lowercase"),e.ALo(17,"mytranslate"),e.qZA()(),e.TgZ(18,"table",9)(19,"thead")(20,"tr",10)(21,"td",11),e._uU(22),e.ALo(23,"mytranslate"),e.qZA(),e.TgZ(24,"td",12),e._uU(25),e.ALo(26,"mytranslate"),e.qZA(),e.TgZ(27,"td",13),e._uU(28),e.ALo(29,"mytranslate"),e.qZA()()(),e.TgZ(30,"tbody"),e.YNc(31,kC,8,5,"tr",14),e.YNc(32,EC,8,5,"tr",14),e.YNc(33,IC,8,5,"tr",14),e.YNc(34,LC,8,5,"tr",14),e.YNc(35,PC,8,5,"tr",14),e.YNc(36,NC,2,1,"ng-container",15),e.ALo(37,"keyvalue"),e.qZA()()()()()()),2&t&&(e.xp6(2),e.Gre("box dialog-drag dialog",i.isMobile?"-mobile":"",""),e.xp6(3),e.hij(" ",e.lcZ(6,16,"lang_auto_thong_tin_de_thi")," "),e.xp6(9),e.lnq("",e.lcZ(15,18,"lang_auto_tong_so_cau_trong_de_thi"),": ",i.examInfo.totalQuestion," ",e.lcZ(16,20,e.lcZ(17,22,"lang_auto_cau")),""),e.xp6(8),e.Oqu(e.lcZ(23,24,"lang_auto_thong_tin")),e.xp6(3),e.Oqu(e.lcZ(26,26,"lang_auto_so_luong")),e.xp6(3),e.Oqu(e.lcZ(29,28,"lang_auto_danh_sach_cac_cau")),e.xp6(3),e.Q6J("ngIf",null==i.examInfo.listMultiple?null:i.examInfo.listMultiple.length),e.xp6(1),e.Q6J("ngIf",null==i.examInfo.listEssay?null:i.examInfo.listEssay.length),e.xp6(1),e.Q6J("ngIf",null==i.examInfo.listFill?null:i.examInfo.listFill.length),e.xp6(1),e.Q6J("ngIf",null==i.examInfo.listTrueFalse?null:i.examInfo.listTrueFalse.length),e.xp6(1),e.Q6J("ngIf",null==i.examInfo.listUnanswered?null:i.examInfo.listUnanswered.length),e.xp6(1),e.Q6J("ngForOf",e.lcZ(37,30,i.examInfo.listQuestionWithTotalAnswer)))},dependencies:[F.sg,F.O5,hd.Zt,hd.Bh,Yo.Hw,F.i8,F.Nd,ye.JV],styles:[".box-dialog[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:flex-start;top:0;left:0;width:100vw;height:100vh;position:fixed;z-index:9999}.box-dialog[_ngcontent-%COMP%]   .dialog-overlay[_ngcontent-%COMP%]{top:0;left:0;width:100vw;height:100vh;position:fixed;background-color:#0000004d}.dialog[_ngcontent-%COMP%]{position:absolute;margin-top:10vh;width:800px;box-shadow:#0000003d 0 3px 8px}.dialog[_ngcontent-%COMP%]   .text-center[_ngcontent-%COMP%]{text-align:center!important}@media screen and (max-width: 800px){.dialog[_ngcontent-%COMP%]{width:90vw!important}}.dialog-body[_ngcontent-%COMP%]{padding:10px}.dialog-body[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:top}.dialog-mobile[_ngcontent-%COMP%]{position:absolute;margin-top:7vh;width:95%;box-shadow:#0000003d 0 3px 8px}.dialog-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #d0d0d0;padding:10px}.dialog-title[_ngcontent-%COMP%]{font-weight:700}.dialog-close[_ngcontent-%COMP%]{display:flex;align-items:center;border-radius:50%}.dialog-close[_ngcontent-%COMP%]:hover{background-color:#d0d0d04a;cursor:pointer}.dialog-footer[_ngcontent-%COMP%]{display:flex;padding:10px;border-top:1px solid #d0d0d0;justify-content:space-between;align-items:center}.lst-errs[_ngcontent-%COMP%]   .lst-err-item[_ngcontent-%COMP%]{padding:15px 10px;border-bottom:1px dotted #e0e0e0}.lst-errs[_ngcontent-%COMP%]   .lst-err-item[_ngcontent-%COMP%]:last-child{border-bottom:none!important}.quest-info-item[_ngcontent-%COMP%]{padding:5px 0;text-align:right}.label-quest-item[_ngcontent-%COMP%]{padding:5px;border:1px solid #e0e0e0;border-radius:5px;cursor:pointer;display:block;width:-moz-fit-content;width:fit-content;float:left;margin:5px}.label-quest-item[_ngcontent-%COMP%]:hover{background-color:#eceff1}.table-header[_ngcontent-%COMP%]{text-align:center;font-weight:500}"]}),n})();var Qv=I(89310),Qg=I(1763);function ZC(n,o){1&n&&(e.TgZ(0,"div",10),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_testbank_create_exam_width_file_pdf_cropper_edit_explain_error"),"\n"))}const DC=function(n){return{loading:n,errorMessage:"",mustShowErrorBox:!1}};function UC(n,o){if(1&n&&e._UZ(0,"azt-loading-effect",11),2&n){const t=e.oxw();e.Q6J("currentStatusObj",e.VKq(1,DC,t.loadingAssets))}}let jC=(()=>{class n{constructor(t){this.commonService=t,this.headerPosition={},this.listQuestion=[],this.listCanvas=[],this.applyEdit=new e.vpe,this.listOriginalQuestion=[],this.originalHeaderPostion={},this.loadingAssets=!0,this.isApplying=!1}addHeaderPiece(){let t=document.createElement("div");t.setAttribute("class","box-crop-info header-piece"),t.dataInfo=this.headerPosition,t.style.width=this.headerPosition.width+"px",t.style.height=this.headerPosition.heigh+"px",t.style.left=this.headerPosition.left+"px",t.style.top=this.headerPosition.top+"px";let i=this.headerPosition.pageIndex;document.getElementById("canvas_edit_page_"+i)?.appendChild(t),this.addInteractiveElement(t)}processInfo(){this.addHeaderPiece();for(let t=0;t<this.listQuestion.length;t++){for(let s=0;s<this.listQuestion[t].positions.length;s++){const l=this.listQuestion[t].positions[s];let c=document.createElement("div");if(c.setAttribute("class",`box-crop-info question-piece question-piece-of-${t}`),l.inactive&&c.classList.add("inactive"),c.dataInfo=l,c.style.width=l.width+"px",c.style.height=l.heigh+"px",c.style.left=l.left+"px",c.style.top=l.top+"px",0==s){let p=document.createElement("div");if(p.setAttribute("class",`question-stt question-stt-${t} clickable`),p.textContent=`#${t+1}`,c.appendChild(p),!this.listQuestion[t].isGroup){let f=document.createElement("div");f.setAttribute("class",`question-ans-add question-ans-add-${t} clickable`),f.textContent="+",f.addEventListener("click",()=>{const b=this.listQuestion[t].answers[this.listQuestion[t].answers.length-1].label;let L=document.createElement("div");L.setAttribute("class",`answer-append box-crop-info answer-piece answer-piece-${Ov[b].toLowerCase()}`);let N=this.commonService.myTranslateInstant("lang_auto_nhap_dup_chuot_de_an_hien_vung_thong_tin_nay");L.setAttribute("tittle",N);let R={...this.listQuestion[t].answers[this.listQuestion[t].answers.length-1].positions[0],left:this.listQuestion[t].answers[this.listQuestion[t].answers.length-1].positions[0].left+this.listQuestion[t].answers[this.listQuestion[t].answers.length-1].positions[0].width};L.style.width=R.width+"px",L.style.height=R.heigh+"px",L.style.top=R.top+"px",L.style.left=R.left+"px",L.style.backgroundColor=Ev[Ov[b].toLowerCase()],L.dataInfo=R;let j=document.getElementById("canvas_edit_page_"+R.pageIndex);j?.appendChild(L),this.addInteractiveElement(L);let G=document.createElement("div");G.setAttribute("class","box-crop-info answer-label"),G.setAttribute("tittle",N);let ae={...this.listQuestion[t].answers[this.listQuestion[t].answers.length-1].remove,left:R.left,top:R.top};G.style.width=ae.width+"px",G.style.height=ae.heigh+"px",G.style.top=ae.top+"px",G.style.left=ae.left+"px",G.dataInfo=ae,j?.appendChild(G),this.addInteractiveElement(G)}),c.appendChild(f)}}let u=l.pageIndex;document.getElementById("canvas_edit_page_"+u)?.appendChild(c),this.addInteractiveElement(c)}let i=document.createElement("div");i.setAttribute("class","box-crop-info question-label"),i.dataInfo=this.listQuestion[t].remove,i.style.width=this.listQuestion[t].remove.width+"px",i.style.height=this.listQuestion[t].remove.heigh+"px",i.style.left=this.listQuestion[t].remove.left+"px",i.style.top=this.listQuestion[t].remove.top+"px",this.listQuestion[t].answers.forEach(s=>{s.positions.forEach(m=>{let p=document.createElement("div");p.setAttribute("class",`box-crop-info ${!0===m.inactive?"inactive":""} answer-piece answer-piece-${s.label.toLowerCase()}`);let f=this.commonService.myTranslateInstant("lang_auto_nhap_dup_chuot_de_an_hien_vung_thong_tin_nay");p.setAttribute("tittle",f),p.inactive&&p.classList.add("inactive"),p.dataInfo=m,p.style.width=m.width+"px",p.style.height=m.heigh+"px",p.style.left=m.left+"px",p.style.top=m.top+"px",p.style.backgroundColor=Ev[s.label.toLowerCase()];let b=m.pageIndex;document.getElementById("canvas_edit_page_"+b)?.appendChild(p),this.addInteractiveElement(p)});let l=document.createElement("div");l.setAttribute("class","box-crop-info answer-label"),l.dataInfo=s.remove,l.style.width=s.remove.width+"px",l.style.height=s.remove.heigh+"px",l.style.left=s.remove.left+"px",l.style.top=s.remove.top+"px";let c=s.remove.pageIndex;document.getElementById("canvas_edit_page_"+c)?.appendChild(l),this.addInteractiveElement(l)});let a=this.listQuestion[t].remove.pageIndex;document.getElementById("canvas_edit_page_"+a)?.appendChild(i),this.addInteractiveElement(i)}}processRender(){for(let t=0;t<this.listCanvas.length;t++){const i=this.listCanvas[t];let a=document.createElement("div");a.setAttribute("id","canvas_edit_page_"+t),a.classList.add("mb-3"),a.style.width=i.width+"px",a.style.height=i.height+"px",a.style.position="relative",a.style.margin="0 auto",a.style.boxShadow="3px 2px 3px 2px #ccc";let r=document.createElement("canvas"),s=document.createElement("span");s.textContent=`Page ${t+1} of ${this.listCanvas.length}`,s.style.position="absolute",s.style.bottom="10px",s.style.right="10px",s.style.fontSize="12px",s.style.color="#ccc",r.width=i.width,r.height=i.height,a.appendChild(r),a.appendChild(s),r.getContext("2d")?.drawImage(i,0,0,i.width,i.height,0,0,i.width,i.height),document.getElementById("boxEdit")?.appendChild(a);let c=document.getElementById("tipsTrick");c&&(c.style.width=i.width+"px")}}dragMoveListener(t){let i=t.target,a=(parseFloat(i.getAttribute("data-x"))||0)+t.dx,r=(parseFloat(i.getAttribute("data-y"))||0)+t.dy;i.style.top=r+"px",i.style.left=a+"px",i.setAttribute("data-x",a),i.setAttribute("data-y",r),i.dataInfo.left=parseInt(i.style.left),i.dataInfo.top=parseInt(i.style.top)}get invalidPositionsData(){let t=!1;for(let i=0;i<this.listQuestion.length;i++){if(this.listQuestion[i].remove.inactive){t=!0;break}if(this.listQuestion[i].positions.length==this.listQuestion[i].positions.filter(l=>l.inactive).length){t=!0;break}for(let l=0;l<this.listQuestion[i].answers.length;l++)if(this.listQuestion[i].answers[l].positions.length==this.listQuestion[i].answers[l].positions.filter(m=>m.inactive).length){t=!0;break}}return t}addInteractiveElement(t){t.setAttribute("data-x",parseInt(t.style.left)),t.setAttribute("data-y",parseInt(t.style.top)),interact(t).resizable({edges:{left:!0,right:!0,bottom:!0,top:!0},listeners:{move(i){var a=i.target,r=parseFloat(a.getAttribute("data-x"))||0,s=parseFloat(a.getAttribute("data-y"))||0;a.style.width=i.rect.width+"px",a.style.height=i.rect.height+"px",r+=i.deltaRect.left,a.style.top=(s+=i.deltaRect.top)+"px",a.style.left=r+"px",a.setAttribute("data-x",r),a.setAttribute("data-y",s),a.dataInfo.width=parseInt(a.style.width),a.dataInfo.heigh=parseInt(a.style.height),a.dataInfo.left=parseInt(a.style.left),a.dataInfo.top=parseInt(a.style.top)}},modifiers:[interact.modifiers.restrictEdges({outer:"parent"}),interact.modifiers.restrictSize({min:{width:10,height:10}})],inertia:!0}).draggable({listeners:{move:window.dragMoveListener},inertia:!0,modifiers:[interact.modifiers.restrictRect({restriction:"parent",endOnly:!0})]}).on("doubletap",function(i){i.currentTarget.dataInfo.inactive?(i.currentTarget.dataInfo.inactive=!1,i.currentTarget.classList.remove("inactive")):(i.currentTarget.dataInfo.inactive=!0,i.currentTarget.classList.add("inactive")),console.log(i.currentTarget.dataInfo),i.preventDefault()})}handleApply(){this.isApplying=!0,setTimeout(()=>{this.applyEdit.emit({headerPos:this.headerPosition,listQuestion:this.listQuestion})},2e3)}handleCancel(){confirm("Nh\u1eefng \u0111i\u1ec1u ch\u1ec9nh c\u1ee7a b\u1ea1n s\u1ebd b\u1ecb m\u1ea5t, b\u1ea1n c\xf3 ch\u1eafc ch\u1eafn?")&&this.applyEdit.emit()}ngOnInit(){this.listQuestion.length>0&&(this.listOriginalQuestion=du.cloneDeep(this.listQuestion),this.originalHeaderPostion=du.cloneDeep(this.headerPosition)),this.processRender(),this.processInfo(),this.loadingAssets=!1}ngAfterViewInit(){window.dragMoveListener=this.dragMoveListener}ngOnDestroy(){}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Yn.z))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-cropper-edit"]],inputs:{headerPosition:"headerPosition",listQuestion:"listQuestion",listCanvas:"listCanvas",examHeader:"examHeader"},outputs:{applyEdit:"applyEdit"},decls:19,vars:18,consts:[["style","position: fixed; top: 5px; left: 5px; right: 5px; font-size: 20px; z-index: 9999","class","alert alert-danger p-2 text-center",4,"ngIf"],["id","mainEditArea",3,"hidden"],["id","buttonArea"],[1,"bb-holder","p-3"],["azt-track-service","cropper-edit-eys6rwcK5W","id","buttonApplys",1,"btn","btn-primary","mr-2",3,"disabled","click"],["azt-track-service","cropper-edit-zfl8meDVvX","id","buttonCancels",1,"btn","btn-secondary",3,"click"],["id","tipsTrick",1,"alert","box","p-2","mt-2","text-center",2,"margin-left","auto","margin-right","auto"],[2,"font-weight","500"],["id","boxEdit"],[3,"currentStatusObj",4,"ngIf"],[1,"alert","alert-danger","p-2","text-center",2,"position","fixed","top","5px","left","5px","right","5px","font-size","20px","z-index","9999"],[3,"currentStatusObj"]],template:function(t,i){1&t&&(e.YNc(0,ZC,3,3,"div",0),e.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"button",4),e.NdJ("click",function(){return i.handleApply()}),e._uU(5),e.ALo(6,"mytranslate"),e.ALo(7,"mytranslate"),e.qZA(),e.TgZ(8,"button",5),e.NdJ("click",function(){return i.handleCancel()}),e._uU(9),e.ALo(10,"mytranslate"),e.qZA()()(),e.TgZ(11,"div",6)(12,"b",7),e._uU(13),e.ALo(14,"mytranslate"),e.qZA(),e._uU(15),e.ALo(16,"mytranslate"),e.qZA(),e._UZ(17,"div",8),e.qZA(),e.YNc(18,UC,1,3,"azt-loading-effect",9)),2&t&&(e.Q6J("ngIf",i.invalidPositionsData),e.xp6(1),e.Q6J("hidden",i.loadingAssets),e.xp6(3),e.Q6J("disabled",i.isApplying),e.xp6(1),e.hij(" ",i.isApplying?e.lcZ(6,8,"lang_testbank_create_exam_width_file_pdf_cropper_edit_loading_apply"):e.lcZ(7,10,"lang_testbank_create_exam_width_file_pdf_cropper_edit_apply")," "),e.xp6(4),e.Oqu(e.lcZ(10,12,"lang_button_cancel")),e.xp6(4),e.hij("",e.lcZ(14,14,"lang_testbank_create_exam_width_file_pdf_cropper_edit_tips"),":"),e.xp6(2),e.hij(" ",e.lcZ(16,16,"lang_testbank_create_exam_width_file_pdf_cropper_edit_note_tip")," "),e.xp6(3),e.Q6J("ngIf",i.loadingAssets))},dependencies:[F.O5,vi.l,ye.JV],styles:["#mainEditArea[_ngcontent-%COMP%]{width:1200px;margin:0 auto}#mainEditArea[_ngcontent-%COMP%]   #buttonArea[_ngcontent-%COMP%]{width:100%;text-align:center}"]}),n})();const qC=["hiddenInput"],RC=["iframePdf"],zC=["resizeBar"],HC=["boxLeftFile"],JC=["parentResize"],KC=["maskLayer"],Fg=function(n){return{color:n}};function GC(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",48)(1,"div"),e._uU(2," Trang "),e.TgZ(3,"input",49),e.NdJ("keyup.enter",function(a){e.CHM(t);const r=e.oxw(3);return e.KtG(r.handleEnterPage(a))})("ngModelChange",function(a){e.CHM(t);const r=e.oxw(3);return e.KtG(r.currentPage=a)}),e.qZA(),e._uU(4),e.qZA(),e.TgZ(5,"mat-icon",50),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.changePage("prev"))}),e.ALo(6,"mytranslate"),e._uU(7," chevron_left "),e.qZA(),e.TgZ(8,"span"),e._uU(9),e.qZA(),e.TgZ(10,"mat-icon",51),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.changePage("next"))}),e.ALo(11,"mytranslate"),e._uU(12," chevron_right "),e.qZA()()}if(2&n){const t=e.oxw(3);e.xp6(3),e.Q6J("ngModel",t.currentPage),e.xp6(1),e.hij(" / ",t.totalPage," "),e.xp6(1),e.s9C("matTooltip",e.lcZ(6,8,"lang_auto_trang_truoc")),e.Q6J("ngStyle",e.VKq(12,Fg,t.topLazyLoad?"inherit":"#595959")),e.xp6(4),e.AsE("",t.startChunkIndex+1,"-",t.startChunkIndex+t.lazyLoadSize>t.questionList.length-1?t.questionList.length:t.startChunkIndex+t.lazyLoadSize,""),e.xp6(1),e.s9C("matTooltip",e.lcZ(11,10,"lang_auto_trang_sau")),e.Q6J("ngStyle",e.VKq(14,Fg,t.bottomLazyLoad?"inherit":"#595959"))}}function YC(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"mat-icon",52),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.showAllHelp())}),e.ALo(1,"mytranslate"),e._uU(2," help "),e.qZA()}2&n&&e.s9C("matTooltip",e.lcZ(1,1,"lang_testbank_create_exam_width_file_pdf_show_view_all_explain"))}function $C(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"mat-icon",53),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.showAllHelp())}),e.ALo(1,"mytranslate"),e._uU(2," help_outlined "),e.qZA()}2&n&&e.s9C("matTooltip",e.lcZ(1,1,"lang_testbank_create_exam_width_file_pdf_hide_view_all_explain"))}function VC(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"mat-option",54),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw(3);return e.KtG(s.handleClickOption(r.index))}),e._uU(1),e.qZA()}if(2&n){const t=o.$implicit,i=e.oxw(3);e.Q6J("value",t.index+i.startQuestion),e.xp6(1),e.hij(" ",t.index+i.startQuestion," ")}}function WC(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",30)(1,"div",31)(2,"mat-checkbox",32),e.ALo(3,"mytranslate"),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()(),e.YNc(6,GC,13,16,"div",33),e.TgZ(7,"div")(8,"button",34),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.openDialogSpitPoint())}),e._uU(9),e.ALo(10,"mytranslate"),e.qZA()(),e.TgZ(11,"div",35),e.YNc(12,YC,3,3,"mat-icon",36),e.YNc(13,$C,3,3,"mat-icon",37),e.TgZ(14,"mat-icon",38),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.openExamInfoDialog())}),e.ALo(15,"mytranslate"),e._uU(16,"info_outline"),e.qZA()(),e.TgZ(17,"div",39)(18,"span"),e._uU(19),e.ALo(20,"mytranslate"),e.qZA(),e.TgZ(21,"form",40)(22,"input",41),e.NdJ("keyup.enter",function(a){e.CHM(t);const r=e.oxw(2);return e.KtG(r.handleEnterQuestion(a))}),e.qZA(),e.TgZ(23,"mat-autocomplete",42,43),e.YNc(25,VC,2,2,"mat-option",44),e.ALo(26,"async"),e.qZA()()(),e._UZ(27,"input",45,46),e.TgZ(29,"button",47),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.editing=!0)}),e._uU(30),e.ALo(31,"mytranslate"),e.qZA()()}if(2&n){const t=e.MAs(24),i=e.oxw(2);e.xp6(2),e.MGl("matTooltip","",e.lcZ(3,13,"lang_testbank_create_exam_width_file_pdf_note_tutorial_Proofreading"),"."),e.Q6J("formControl",i.debuggingMode),e.xp6(2),e.hij(" ",e.lcZ(5,15,"lang_testbank_create_exam_width_file_pdf_Proofreading")," "),e.xp6(2),e.Q6J("ngIf",i.questionList.length>i.limitLazyLoad),e.xp6(3),e.Oqu(e.lcZ(10,17,"lang_split_points")),e.xp6(3),e.Q6J("ngIf",!i.isShowAllHelp),e.xp6(1),e.Q6J("ngIf",i.isShowAllHelp),e.xp6(1),e.s9C("matTooltip",e.lcZ(15,19,"lang_auto_chi_tiet_de_thi")),e.xp6(5),e.hij("",e.lcZ(20,21,"lang_testbank_create_exam_width_file_pdf_go_to"),":"),e.xp6(3),e.Q6J("formControl",i.myControl)("matAutocomplete",t),e.xp6(3),e.Q6J("ngForOf",e.lcZ(26,23,i.filteredOptions)),e.xp6(5),e.Oqu(e.lcZ(31,25,"lang_button_edit"))}}function XC(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"b"),e._uU(2),e.qZA(),e.BQk()),2&n){const t=o.$implicit;e.xp6(2),e.hij("",t,"\xa0")}}function e6(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",55)(1,"mat-icon",56),e._uU(2,"info_outlined"),e.qZA(),e._uU(3),e.ALo(4,"mytranslate"),e.TgZ(5,"div",57),e.YNc(6,XC,3,1,"ng-container",58),e.qZA(),e._uU(7),e.ALo(8,"mytranslate"),e.TgZ(9,"div",59)(10,"button",60),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.showNote=!1)}),e._uU(11),e.ALo(12,"mytranslate"),e.qZA()()()}if(2&n){const t=e.oxw(2);e.xp6(3),e.hij(" ",e.lcZ(4,4,"lang_testbank_create_exam_width_file_pdf_unrecognizable_one")," "),e.xp6(3),e.Q6J("ngForOf",t.errorQuestions),e.xp6(1),e.hij(" ",e.lcZ(8,6,"lang_testbank_create_exam_width_file_pdf_unrecognizable_twe"),". "),e.xp6(4),e.Oqu(e.lcZ(12,8,"lang_testbank_create_exam_width_file_pdf_understood"))}}function t6(n,o){1&n&&(e.TgZ(0,"span",64),e._uU(1,",\xa0"),e.qZA())}function n6(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"b",62),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw(4);let l;return e.KtG(s.goToQuestionAll(null!==(l=r.index)&&void 0!==l?l:0))}),e.ALo(2,"mytranslate"),e._uU(3),e.ALo(4,"mytranslate"),e.qZA(),e.YNc(5,t6,2,0,"span",63),e.BQk()}if(2&n){const t=o.$implicit,i=o.index,a=e.oxw(4);e.xp6(1),e.s9C("matTooltip",e.lcZ(2,4,"lang_testbank_create_exam_width_file_pdf_click_roll")),e.xp6(2),e.AsE(" ",e.lcZ(4,6,"lang_testbank_create_exam_width_file_pdf_question")," ",t.question.label," "),e.xp6(2),e.Q6J("ngIf",i<a.invalidTypeQuestionConfig.length-1)}}function i6(n,o){if(1&n&&(e.ynx(0),e._uU(1),e.ALo(2,"mytranslate"),e.TgZ(3,"div",57),e.YNc(4,n6,6,8,"ng-container",58),e.qZA(),e.BQk()),2&n){const t=e.oxw(3);e.xp6(1),e.hij(" ",e.lcZ(2,2,"lang_testbank_create_exam_width_file_pdf_check_configuration")," "),e.xp6(3),e.Q6J("ngForOf",t.invalidTypeQuestionConfig)}}function o6(n,o){if(1&n&&(e.TgZ(0,"div",61)(1,"mat-icon",56),e._uU(2,"info_outlined"),e.qZA(),e._uU(3),e.ALo(4,"mytranslate"),e.YNc(5,i6,5,4,"ng-container",2),e.qZA()),2&n){const t=e.oxw(2);e.xp6(3),e.hij(" ",e.lcZ(4,2,"lang_testbank_create_exam_width_file_pdf_cant_save")," "),e.xp6(2),e.Q6J("ngIf",t.invalidTypeQuestionConfig.length>0)}}function a6(n,o){1&n&&(e.ynx(0),e._uU(1),e.ALo(2,"mytranslate"),e.BQk()),2&n&&(e.xp6(1),e.hij("",e.lcZ(2,1,"lang_testbank_create_exam_width_file_pdf_cont_save"),"."))}function r6(n,o){if(1&n&&(e.TgZ(0,"div",61)(1,"mat-icon",56),e._uU(2,"info_outlined"),e.qZA(),e.YNc(3,a6,3,3,"ng-container",2),e.qZA()),2&n){const t=e.oxw(2);e.xp6(3),e.Q6J("ngIf",!t.nameExamInp.value||""==t.nameExamInp.value.trim())}}function s6(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",65)(1,"div",66)(2,"div")(3,"mat-icon",67),e._uU(4,"cloud_upload"),e.qZA()(),e.TgZ(5,"div"),e._uU(6),e.ALo(7,"mytranslate"),e.qZA(),e.TgZ(8,"div")(9,"azt-download-link-item",68),e.NdJ("click",function(a){e.CHM(t);const r=e.oxw(2);return e.KtG(r.isMobileWebView?"":a.stopPropagation())}),e.ALo(10,"convertCdnLinkOfGitHubWithLocale"),e.ALo(11,"mytranslate"),e.qZA()(),e.TgZ(12,"div")(13,"azt-download-link-item",68),e.NdJ("click",function(a){e.CHM(t);const r=e.oxw(2);return e.KtG(r.isMobileWebView?"":a.stopPropagation())}),e.ALo(14,"convertCdnLinkOfGitHubWithLocale"),e.ALo(15,"mytranslate"),e.qZA()()()()}2&n&&(e.xp6(6),e.Oqu(e.lcZ(7,11,"lang_tutorial_upload_file_exam")),e.xp6(3),e.Akn("color: #5c5c5c"),e.Q6J("dataUrl",e.lcZ(10,13,"medias_[LANG]/de_mau_azota.zip"))("target","_self")("fileName",e.lcZ(11,15,"lang_auto_de_mau_azota_pdf"))("fileDescription","lang_auto_click_vao_day_de_download_de_mau"),e.xp6(4),e.Q6J("dataUrl",e.lcZ(14,17,"medias_[LANG]/de_mau_azota.zip"))("target","_self")("fileName",e.lcZ(15,19,"lang_auto_de_mau_azota_pdf"))("fileDescription","lang_auto_de_mau_azota_pdf"))}function l6(n,o){1&n&&(e.TgZ(0,"div",77),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_testbank_create_exam_width_file_pdf_exam_header_not_select")))}function c6(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",73),e.YNc(1,l6,3,3,"div",74),e.TgZ(2,"mat-icon",75),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.useHeader=!a.useHeader)}),e.ALo(3,"mytranslate"),e.ALo(4,"mytranslate"),e._uU(5," clear "),e.qZA(),e._UZ(6,"img",76),e.qZA()}if(2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",!t.useHeader),e.xp6(1),e.Q6J("matTooltip",t.useHeader?e.lcZ(3,3,"lang_auto_xoa"):e.lcZ(4,5,"lang_auto_bo_xoa")),e.xp6(4),e.Q6J("src",t.examHeader,e.LSH)}}function u6(n,o){1&n&&(e.TgZ(0,"div",102)(1,"mat-icon",56),e._uU(2,"error"),e.qZA(),e._uU(3),e.ALo(4,"mytranslate"),e.qZA()),2&n&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"lang_auto_cau_hoi_nay_khong_co_noi_dung_cac_dap_an_abcd_nen_dot")+"!"," "))}function d6(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"mat-icon",110),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3).$implicit,r=e.oxw(3);return e.KtG(r.toggleRemoveAllGroup(a.group))}),e.ALo(1,"mytranslate"),e._uU(2," clear "),e.qZA()}2&n&&e.Q6J("matTooltip",e.lcZ(1,1,"lang_auto_xoa_toan_bo_cau_hoi_trong_nhom"))}function m6(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"mat-icon",111),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3).$implicit,r=e.oxw(3);return e.KtG(r.toggleRemoveAllGroup(a.group))}),e.ALo(1,"mytranslate"),e._uU(2," clear "),e.qZA()}2&n&&e.Q6J("matTooltip",e.lcZ(1,1,"lang_auto_bo_xoa_toan_bo_cau_hoi_trong_nhom"))}function p6(n,o){1&n&&e._UZ(0,"div",77)}function h6(n,o){1&n&&(e.TgZ(0,"div",112),e.ALo(1,"mytranslate"),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()),2&n&&(e.s9C("matTooltip",e.lcZ(1,2,"lang_testbank_create_exam_width_file_pdf_question_not_mix")),e.xp6(2),e.hij(" ",e.lcZ(3,4,"lang_testbank_create_exam_width_file_pdf_not_mix")," "))}function A6(n,o){1&n&&(e.TgZ(0,"div",113),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij("",e.lcZ(2,1,"lang_testbank_create_exam_width_file_pdf_not_mix"),"?"))}function _6(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",103),e.YNc(1,d6,3,3,"mat-icon",104),e.YNc(2,m6,3,3,"mat-icon",105),e.YNc(3,p6,1,0,"div",74),e.TgZ(4,"div",106),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2).$implicit,r=e.oxw(3);return e.KtG(r.toggleMixInGroup(a.group))}),e.YNc(5,h6,4,6,"div",107),e.YNc(6,A6,3,3,"div",108),e._UZ(7,"img",109),e.ALo(8,"mytranslate"),e.ALo(9,"mytranslate"),e.qZA()()}if(2&n){const t=e.oxw(2),i=t.index,a=t.$implicit,r=e.oxw(3);e.Q6J("hidden",!r.firstInGroupIndexes.includes(i)),e.xp6(1),e.Q6J("ngIf",r.atLeastOneUse(a.group)),e.xp6(1),e.Q6J("ngIf",!r.atLeastOneUse(a.group)),e.xp6(1),e.Q6J("ngIf",!r.atLeastOneUse(a.group)),e.xp6(1),e.Gre("mb-2 img-group image_group_",a.group,""),e.xp6(1),e.Q6J("ngIf",a.groupType),e.xp6(1),e.Q6J("ngIf",!a.groupType),e.xp6(1),e.s9C("matTooltip",a.groupType?e.lcZ(8,11,"lang_testbank_create_exam_width_file_pdf_click_mix_question"):e.lcZ(9,13,"lang_testbank_create_exam_width_file_pdf_click_pin_question")),e.s9C("src",a.groupUrl,e.LSH)}}function f6(n,o){1&n&&(e.TgZ(0,"div",77),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_testbank_create_exam_width_file_pdf_question_not_select")))}const Nx=function(n,o){return{"width.%":n,"height.%":o}};function g6(n,o){if(1&n&&(e.TgZ(0,"div",121)(1,"div",122),e._UZ(2,"img",123)(3,"img",116),e.qZA()()),2&n){const t=o.$implicit,i=e.oxw(3).$implicit;e.xp6(2),e.Q6J("ngStyle",e.WLB(4,Nx,t.remove.width/i.question.width*100,t.remove.height/i.question.height*100))("src",t.remove.url,e.LSH),e.xp6(1),e.Q6J("ngStyle",e.WLB(7,Nx,t.width/i.question.width*100,t.height/i.question.height*100))("src",t.url,e.LSH)}}function x6(n,o){if(1&n&&(e.TgZ(0,"div",114)(1,"div",115),e._UZ(2,"img",116),e.qZA(),e.TgZ(3,"div",117),e._UZ(4,"img",118),e.qZA(),e.TgZ(5,"div",119),e.YNc(6,g6,4,10,"div",120),e.qZA()()),2&n){const t=e.oxw(2).$implicit;e.xp6(2),e.Q6J("ngStyle",e.WLB(6,Nx,t.question.remove.width/t.question.width*100,t.question.remove.height/t.question.height*100))("src",t.question.remove.url,e.LSH),e.xp6(2),e.Q6J("width",t.question.width)("height",t.question.height)("src",t.question.url,e.LSH),e.xp6(2),e.Q6J("ngForOf",t.answers)}}function b6(n,o){1&n&&e._UZ(0,"div",77)}function v6(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"span",126),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw(3).$implicit,l=e.oxw(3);return e.KtG(l.changeAnswerResult(s,r.label))}),e._uU(1),e.qZA()}if(2&n){const t=o.$implicit,i=e.oxw(3).$implicit;e.Q6J("ngClass",i.tempData.answerResult.includes(t.label)?"btn-ans-result":""),e.xp6(1),e.hij(" ",t.label," ")}}function w6(n,o){if(1&n&&(e.TgZ(0,"div",124)(1,"span",94),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.YNc(4,v6,2,2,"span",125),e.qZA()),2&n){const t=e.oxw(2).$implicit;e.xp6(2),e.hij("",e.lcZ(3,2,"lang_testbank_create_exam_width_file_pdf_answer"),":"),e.xp6(2),e.Q6J("ngForOf",t.answers)}}function y6(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",127)(1,"span",128),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2).index,r=e.oxw(3);return e.KtG(r.setupFillAnswersQuestion(a))}),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()}2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"lang_testbank_create_exam_width_file_pdf_enter_add_answer")," "))}function C6(n,o){1&n&&(e.TgZ(0,"b"),e._uU(1,"\u25b2"),e.qZA())}function T6(n,o){1&n&&(e.TgZ(0,"mat-icon",98),e.ALo(1,"mytranslate"),e._uU(2," shuffle "),e.qZA()),2&n&&e.s9C("matTooltip",e.lcZ(1,1,"lang_testbank_create_exam_width_file_pdf_keep_stable_answer"))}function k6(n,o){1&n&&(e.TgZ(0,"mat-icon",98),e.ALo(1,"mytranslate"),e._uU(2," shuffle_on "),e.qZA()),2&n&&e.s9C("matTooltip",e.lcZ(1,1,"lang_testbank_create_exam_width_file_pdf_tutorial_click_mix_question"))}function S6(n,o){1&n&&(e.ynx(0),e._uU(1,"\xa0|\xa0"),e.BQk())}function E6(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"b"),e._uU(2),e.qZA(),e.YNc(3,S6,2,0,"ng-container",2),e.BQk()),2&n){const t=o.$implicit,i=o.index,a=e.oxw(4).$implicit;e.xp6(2),e.Oqu(t),e.xp6(1),e.Q6J("ngIf",i<a.tempData.answerResult.length-1)}}function O6(n,o){if(1&n&&(e.TgZ(0,"div",131),e._uU(1),e.ALo(2,"mytranslate"),e.YNc(3,E6,4,2,"ng-container",58),e.qZA()),2&n){const t=e.oxw(3).$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,2,"lang_testbank_create_exam_width_file_pdf_list_answer"),": "),e.xp6(2),e.Q6J("ngForOf",t.tempData.answerResult)}}function I6(n,o){1&n&&(e.TgZ(0,"div",132)(1,"mat-icon",56),e._uU(2,"info_outlined"),e.qZA(),e._uU(3),e.ALo(4,"mytranslate"),e.qZA()),2&n&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"lang_testbank_create_exam_width_file_pdf_please_enter_answer")," "))}function M6(n,o){1&n&&(e.TgZ(0,"div",132)(1,"mat-icon",56),e._uU(2,"info_outlined"),e.qZA(),e._uU(3),e.ALo(4,"mytranslate"),e.qZA()),2&n&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"lang_testbank_create_exam_width_file_pdf_please_enter_point")," "))}function L6(n,o){1&n&&(e.TgZ(0,"div",131)(1,"mat-icon",56),e._uU(2,"info_outlined"),e.qZA(),e._uU(3),e.ALo(4,"mytranslate"),e.TgZ(5,"a",133),e._uU(6),e.ALo(7,"mytranslate"),e.qZA()()),2&n&&(e.xp6(3),e.hij(" ",e.lcZ(4,2,"lang_testbank_create_exam_width_file_pdf_not_identification_answer"),". "),e.xp6(3),e.hij(" ",e.lcZ(7,4,"lang_auto_xem_huong_dan")," "))}function B6(n,o){1&n&&(e.TgZ(0,"div",132)(1,"mat-icon",56),e._uU(2,"info_outlined"),e.qZA(),e._uU(3),e.ALo(4,"mytranslate"),e.qZA()),2&n&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"lang_testbank_create_exam_width_file_pdf_note_quizzes")," "))}function P6(n,o){1&n&&(e.TgZ(0,"div",132)(1,"mat-icon",56),e._uU(2,"info_outlined"),e.qZA(),e._uU(3),e.ALo(4,"mytranslate"),e.qZA()),2&n&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"lang_testbank_create_exam_width_file_pdf_enter_max_point")," "))}function Q6(n,o){1&n&&(e.TgZ(0,"div",132)(1,"mat-icon",56),e._uU(2,"info_outlined"),e.qZA(),e._uU(3),e.ALo(4,"mytranslate"),e.qZA()),2&n&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"lang_testbank_create_exam_width_file_pdf_please_select_answer")," "))}function F6(n,o){if(1&n&&(e.TgZ(0,"div",136),e._UZ(1,"img",137),e.qZA()),2&n){const t=e.oxw(4).$implicit;e.xp6(1),e.Q6J("src",t.help.url,e.LSH)}}function N6(n,o){1&n&&(e.TgZ(0,"div",138),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_testbank_create_exam_width_file_pdf_not_data_explain")))}function Z6(n,o){if(1&n&&(e.ynx(0),e.YNc(1,F6,2,1,"div",134),e.YNc(2,N6,3,3,"ng-template",null,135,e.W1O),e.BQk()),2&n){const t=e.MAs(3),i=e.oxw(3).$implicit;e.xp6(1),e.Q6J("ngIf",i.help.url)("ngIfElse",t)}}function D6(n,o){if(1&n&&(e.ynx(0),e.YNc(1,O6,4,4,"div",129),e.ALo(2,"isFillAnswerByType"),e.YNc(3,I6,5,3,"div",130),e.ALo(4,"isFillAnswerByType"),e.YNc(5,M6,5,3,"div",130),e.YNc(6,L6,8,6,"div",129),e.YNc(7,B6,5,3,"div",130),e.ALo(8,"isOneChoiceAnswerByType"),e.YNc(9,P6,5,3,"div",130),e.YNc(10,Q6,5,3,"div",130),e.ALo(11,"isOneChoiceAnswerByType"),e.YNc(12,Z6,4,2,"ng-container",2),e.BQk()),2&n){const t=e.oxw(2).$implicit,i=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.tempData.answerResult.length>0&&e.lcZ(2,8,t.tempData.answerType)),e.xp6(2),e.Q6J("ngIf",0==t.tempData.answerResult.length&&e.lcZ(4,10,t.tempData.answerType)),e.xp6(2),e.Q6J("ngIf",!t.tempData.point&&!i.isFullNoPoint),e.xp6(1),e.Q6J("ngIf",t.answers.length>0&&1==t.answers[0].width&&1==t.answers[0].height),e.xp6(1),e.Q6J("ngIf",t.answers.length<2&&e.lcZ(8,12,t.tempData.answerType)),e.xp6(2),e.Q6J("ngIf",t.tempData.point<0),e.xp6(1),e.Q6J("ngIf",0==t.tempData.answerResult.length&&e.lcZ(11,14,t.tempData.answerType)),e.xp6(2),e.Q6J("ngIf",t.tempData.isShowHelp)}}function U6(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",143),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3).index,r=e.oxw(3);return e.KtG(r.clickUploadFile(a))}),e.TgZ(1,"div",127)(2,"mat-icon",67),e._uU(3,"cloud_upload"),e.qZA(),e.TgZ(4,"p"),e._uU(5),e.ALo(6,"mytranslate"),e.qZA(),e.TgZ(7,"p"),e._uU(8),e.ALo(9,"mytranslate"),e.qZA()()()}2&n&&(e.xp6(5),e.Oqu(e.lcZ(6,2,"lang_testbank_create_exam_width_file_pdf_attach_file_audio")),e.xp6(3),e.hij("",e.lcZ(9,4,"lang_testbank_create_exam_width_file_docx_click_choose_audio"),"."))}function j6(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",146)(1,"audio",147),e._UZ(2,"source",148),e.ALo(3,"mycdn"),e._uU(4," Your browser does not support the audio element. "),e.qZA(),e.TgZ(5,"span",149),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(4).$implicit;return e.KtG(a.tempData.questionMedia=[])}),e._uU(6),e.ALo(7,"mytranslate"),e.qZA()()}if(2&n){const t=o.$implicit;e.xp6(2),e.Q6J("src",e.lcZ(3,2,t.url),e.LSH),e.xp6(4),e.hij(" ",e.lcZ(7,4,"lang_auto_xoa")," ")}}function q6(n,o){if(1&n&&(e.TgZ(0,"div",144),e.YNc(1,j6,8,6,"div",145),e.qZA()),2&n){const t=e.oxw(3).$implicit;e.xp6(1),e.Q6J("ngForOf",t.tempData.questionMedia)}}function R6(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",139)(1,"input",140),e.NdJ("change",function(a){e.CHM(t);const r=e.oxw(2).$implicit,s=e.oxw(3);return e.KtG(s.uploadFileQuestion(r,a))}),e.qZA(),e.YNc(2,U6,10,6,"div",141),e.YNc(3,q6,2,1,"div",142),e.qZA()}if(2&n){const t=e.oxw(2),i=t.index,a=t.$implicit;e.xp6(1),e.Q6J("id","inputFileQuestion_"+i),e.xp6(1),e.Q6J("ngIf",0===a.tempData.questionMedia.length),e.xp6(1),e.Q6J("ngIf",a.tempData.questionMedia.length>0)}}function z6(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",80),e.YNc(1,u6,5,3,"div",81),e.ALo(2,"isOneChoiceAnswerByType"),e.YNc(3,_6,10,15,"div",82),e.TgZ(4,"div",83)(5,"mat-icon",84),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().index,r=e.oxw(3);return e.KtG(r.changeSelectTempData(a))}),e.ALo(6,"mytranslate"),e.ALo(7,"mytranslate"),e._uU(8," clear "),e.qZA(),e.YNc(9,f6,3,3,"div",74),e.YNc(10,x6,7,9,"div",85),e.qZA(),e.TgZ(11,"div",86)(12,"div",87),e.YNc(13,b6,1,0,"div",74),e.TgZ(14,"div",88)(15,"span",89),e._uU(16),e.ALo(17,"mytranslate"),e.qZA(),e.TgZ(18,"select",90),e.NdJ("change",function(a){e.CHM(t);const r=e.oxw().$implicit,s=e.oxw(3);return e.KtG(s.changeTypeQuestion(r,a))}),e.TgZ(19,"option",91),e.ALo(20,"isOneChoiceAnswerByType"),e._uU(21),e.ALo(22,"mytranslate"),e.qZA(),e.TgZ(23,"option",91),e.ALo(24,"isFillAnswerByType"),e._uU(25),e.ALo(26,"mytranslate"),e.qZA(),e.TgZ(27,"option",91),e.ALo(28,"isEssayAnswerByType"),e._uU(29),e.ALo(30,"mytranslate"),e.qZA()()(),e.YNc(31,w6,5,4,"div",92),e.ALo(32,"isOneChoiceAnswerByType"),e.YNc(33,y6,4,3,"div",93),e.ALo(34,"isFillAnswerByType"),e.TgZ(35,"div",88)(36,"span",94),e._uU(37),e.ALo(38,"mytranslate"),e.qZA(),e.TgZ(39,"input",95),e.NdJ("input",function(a){e.CHM(t);const r=e.oxw().$implicit,s=e.oxw(3);return e.KtG(s.changeQuestionPoint(r,a))}),e.qZA()(),e.TgZ(40,"mat-icon",96),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,r=e.oxw(3);return e.KtG(r.toggleViewHelp(a))}),e.ALo(41,"mytranslate"),e.ALo(42,"mytranslate"),e._uU(43),e.qZA(),e.TgZ(44,"span",97),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit;return e.KtG(a.tempData.isShowAttach=!a.tempData.isShowAttach)}),e.TgZ(45,"mat-icon",98),e.ALo(46,"mytranslate"),e._uU(47,"attachment"),e.qZA(),e.YNc(48,C6,2,0,"b",2),e.qZA(),e.TgZ(49,"span",99),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,r=e.oxw(3);return e.KtG(r.toogleMixAns(a))}),e.YNc(50,T6,3,3,"mat-icon",100),e.YNc(51,k6,3,3,"mat-icon",100),e.qZA()()(),e.YNc(52,D6,13,16,"ng-container",2),e.YNc(53,R6,4,3,"div",101),e.qZA()}if(2&n){const t=e.oxw(),i=t.index,a=t.$implicit,r=e.oxw(3);e.uIk("id","list-question-box-item-"+i),e.xp6(1),e.Q6J("ngIf",0==a.answers.length&&e.lcZ(2,31,a.tempData.answerType)),e.xp6(2),e.Q6J("ngIf",a.groupUrl),e.xp6(2),e.Q6J("matTooltip",a.tempData.isSelect?e.lcZ(6,33,"lang_auto_xoa"):e.lcZ(7,35,"lang_auto_bo_xoa")),e.xp6(4),e.Q6J("ngIf",!a.tempData.isSelect),e.xp6(1),e.Q6J("ngIf",r.debuggingMode.value),e.xp6(2),e.Q6J("ngClass","")("ngClass","border-result"),e.xp6(1),e.Q6J("ngIf",!a.tempData.isSelect),e.xp6(3),e.Oqu(e.lcZ(17,37,"lang_testbank_create_exam_width_file_pdf_question")+" "+a.question.label),e.xp6(3),e.Q6J("value",1)("selected",e.lcZ(20,39,a.tempData.answerType)),e.xp6(2),e.Oqu(e.lcZ(22,41,"lang_testbank_create_exam_width_file_pdf_select_answer")),e.xp6(2),e.Q6J("value",4)("selected",e.lcZ(24,43,a.tempData.answerType)),e.xp6(2),e.Oqu(e.lcZ(26,45,"lang_testbank_create_exam_width_file_pdf_enter_blank")),e.xp6(2),e.Q6J("value",3)("selected",e.lcZ(28,47,a.tempData.answerType)),e.xp6(2),e.Oqu(e.lcZ(30,49,"lang_testbank_create_exam_width_file_docx_essay")),e.xp6(2),e.Q6J("ngIf",e.lcZ(32,51,a.tempData.answerType)),e.xp6(2),e.Q6J("ngIf",e.lcZ(34,53,a.tempData.answerType)),e.xp6(4),e.hij("",e.lcZ(38,55,"lang_point"),":"),e.xp6(2),e.Q6J("value",a.tempData.point.toString().length>8?a.tempData.point.toFixed(8):a.tempData.point),e.xp6(1),e.s9C("matTooltip",a.tempData.isShowHelp?e.lcZ(41,57,"lang_testbank_create_exam_width_file_pdf_hide_view_explain"):e.lcZ(42,59,"lang_testbank_create_exam_width_file_pdf_show_view_explain")),e.xp6(3),e.hij(" ",a.tempData.isShowHelp?"help":"help_outlined"," "),e.xp6(2),e.s9C("matTooltip",e.lcZ(46,61,"lang_testbank_create_exam_width_file_pdf_attach_file_question")),e.xp6(3),e.Q6J("ngIf",a.tempData.isShowAttach),e.xp6(2),e.Q6J("ngIf",1==a.isFixAns),e.xp6(1),e.Q6J("ngIf",0==a.isFixAns),e.xp6(1),e.Q6J("ngIf",a.tempData.isSelect),e.xp6(1),e.Q6J("ngIf",!0===a.tempData.isShowAttach)}}function H6(n,o){if(1&n&&(e.TgZ(0,"div",78),e.YNc(1,z6,54,63,"div",79),e.qZA()),2&n){const t=o.index,i=e.oxw(3);e.xp6(1),e.Q6J("ngIf",i.questionList.length<=i.limitLazyLoad||t>=i.startChunkIndex&&t<i.startChunkIndex+i.lazyLoadSize)}}function J6(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",150)(1,"div"),e._uU(2," Trang "),e.TgZ(3,"input",49),e.NdJ("keyup.enter",function(a){e.CHM(t);const r=e.oxw(3);return e.KtG(r.handleEnterPage(a))})("ngModelChange",function(a){e.CHM(t);const r=e.oxw(3);return e.KtG(r.currentPage=a)}),e.qZA(),e._uU(4),e.qZA(),e.TgZ(5,"mat-icon",151),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.changePage("prev"))}),e.ALo(6,"mytranslate"),e._uU(7," chevron_left "),e.qZA(),e.TgZ(8,"span"),e._uU(9),e.qZA(),e.TgZ(10,"mat-icon",152),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.changePage("next"))}),e.ALo(11,"mytranslate"),e._uU(12," chevron_right "),e.qZA()()}if(2&n){const t=e.oxw(3);e.xp6(3),e.Q6J("ngModel",t.currentPage),e.xp6(1),e.hij(" / ",t.totalPage," "),e.xp6(1),e.s9C("matTooltip",e.lcZ(6,8,"lang_auto_trang_truoc")),e.Q6J("ngStyle",e.VKq(12,Fg,t.topLazyLoad?"inherit":"#595959")),e.xp6(4),e.AsE("",t.startChunkIndex+1,"-",t.startChunkIndex+t.lazyLoadSize>t.questionList.length-1?t.questionList.length:t.startChunkIndex+t.lazyLoadSize,""),e.xp6(1),e.s9C("matTooltip",e.lcZ(11,10,"lang_auto_trang_sau")),e.Q6J("ngStyle",e.VKq(14,Fg,t.bottomLazyLoad?"inherit":"#595959"))}}function K6(n,o){if(1&n&&(e.TgZ(0,"div",69),e.YNc(1,c6,7,7,"div",70),e.YNc(2,H6,2,1,"div",71),e.YNc(3,J6,13,16,"div",72),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.examHeader),e.xp6(1),e.Q6J("ngForOf",t.questionList),e.xp6(1),e.Q6J("ngIf",t.questionList.length>t.limitLazyLoad)}}function G6(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",153),e._uU(1),e.ALo(2,"mytranslate"),e._UZ(3,"br"),e._uU(4),e.ALo(5,"mytranslate"),e._UZ(6,"br"),e.TgZ(7,"mat-icon",154),e._uU(8,"report"),e.qZA(),e._UZ(9,"br"),e.TgZ(10,"span",155),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.resetBoxExamQuestions("tryOther"))}),e._uU(11),e.ALo(12,"mytranslate"),e.qZA()()}2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,3,"lang_testbank_create_exam_width_file_pdf_not_analysis_exam"),". "),e.xp6(3),e.hij(" ",e.lcZ(5,5,"lang_testbank_create_exam_width_file_pdf_contact_admin"),". "),e.xp6(7),e.Oqu(e.lcZ(12,7,"lang_testbank_create_exam_width_file_pdf_create_exam")))}function Y6(n,o){if(1&n&&(e.TgZ(0,"div",161)(1,"span",162),e._uU(2),e.qZA()()),2&n){const t=o.$implicit;e.xp6(2),e.Oqu(t)}}function $6(n,o){if(1&n&&(e.TgZ(0,"div",156)(1,"div",157)(2,"div",158),e._UZ(3,"mat-spinner",159),e.qZA(),e.YNc(4,Y6,3,1,"div",160),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(3),e.Q6J("strokeWidth",2)("diameter",30),e.xp6(1),e.Q6J("ngForOf",t.arrStatusFileExam)}}function V6(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",163)(1,"app-cropper-edit",164),e.NdJ("applyEdit",function(a){e.CHM(t);const r=e.oxw(2);return e.KtG(r.applyEditEvent(a))}),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("listQuestion",t.rootQuestionInfo)("headerPosition",t.rootHeaderPosition)("listCanvas",t.rootCanvases)}}const W6=function(n){return{width:n}};function X6(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",3)(1,"editor-layout",4),e.NdJ("handleConfirm",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.rxjsHandleSaveExam())})("handleCancel",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.resetBoxExamQuestions())}),e.TgZ(2,"div",5)(3,"div",6)(4,"div",7,8)(6,"div",9,10),e._UZ(8,"input",11),e.YNc(9,WC,32,27,"div",12),e.YNc(10,e6,13,10,"div",13),e.YNc(11,o6,6,4,"div",14),e.YNc(12,r6,4,1,"div",14),e.TgZ(13,"div",15),e.YNc(14,s6,16,21,"div",16),e._UZ(15,"div",17)(16,"div",18),e.YNc(17,K6,4,3,"div",19),e.YNc(18,G6,13,9,"div",20),e.qZA()(),e.TgZ(19,"div",21,22),e.NdJ("mousedown",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.handleMouseDown(a))}),e.qZA(),e.TgZ(21,"div",23,24),e._UZ(23,"div",25,26)(25,"iframe",27),e.ALo(26,"safe"),e.qZA()()(),e.YNc(27,$6,5,3,"div",28),e.qZA()()(),e.YNc(28,V6,2,3,"ng-template",29)}if(2&n){const t=e.oxw();e.Q6J("hidden",t.editing),e.xp6(1),e.Q6J("headerBackToLink",t.backToLink)("showInput",!0)("showConfirmButton",!0)("examName",t.nameExamInp),e.xp6(5),e.Q6J("ngStyle",e.VKq(19,W6,t.notShowSourceFile?"100%":"calc(60% - 5px)")),e.xp6(3),e.Q6J("ngIf",t.questionList.length>0),e.xp6(1),e.Q6J("ngIf",t.errorQuestions.length>0&&t.showNote),e.xp6(1),e.Q6J("ngIf",t.invalidTypeQuestionConfig.length>0),e.xp6(1),e.Q6J("ngIf",!t.nameExamInp.value||""==t.nameExamInp.value.trim()),e.xp6(2),e.Q6J("ngIf",!t.doneAllProcessTasks),e.xp6(3),e.Q6J("ngIf",t.questionList.length>0&&t.cropperDone),e.xp6(1),e.Q6J("ngIf",t.errAnalyzingPdf),e.xp6(3),e.Q6J("hidden",t.notShowSourceFile),e.xp6(4),e.Q6J("src",e.lcZ(26,17,t.whiteListCurrentExamFileUploadedUrl),e.uOi),e.xp6(2),e.Q6J("ngIf",t.isShowLoadingFileExam),e.xp6(1),e.Q6J("ngIf",t.editing)}}function e5(n,o){if(1&n&&(e.TgZ(0,"div",165),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.AsE("",e.lcZ(2,2,"lang_auto_your_current_browser")," ",t.currentBrowserInUsed,"")}}function t5(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"azt-exam-info",166),e.NdJ("closeDialog",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.closeDialogExamInfo())})("goToQuestion",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.onHandleGoToQuestion(a))}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("startIndexQuestion",t.startQuestion)("data",t.dataExamInfo)("type","createPDF")}}const Wp="exam_questions";let n5=(()=>{class n extends xe.Q{get isSupportedBrowser(){let t=this.deviceDetectorService.browser.toLowerCase().trim();return null!=["chrome","firefox","coc coc","edge","chromium"].find(r=>-1!==t.indexOf(r.toLocaleLowerCase()))}get currentBrowserInUsed(){return this.deviceDetectorService.browser+" - "+this.deviceDetectorService.browser_version}atLeastOneUse(t){return this.questionList.filter(i=>i.group===t&&i.tempData.isSelect).length>0}changePage(t){"prev"==t&&(this.topLazyLoad?(this.startChunkIndex-=hs,this.currentPage--):(this.startChunkIndex=0,this.currentPage=1)),"next"==t&&this.bottomLazyLoad&&(this.startChunkIndex+=hs,this.currentPage++)}handleMouseDown(t){this.boxLeftFile&&(this.x=t.clientX,this.y=t.clientY,this.leftWidth=this.boxLeftFile.nativeElement.getBoundingClientRect().width,this.maskLayer&&(this.maskLayer.nativeElement.style.width="100%"),this.resizeBar&&this.resizeBar.nativeElement.classList.add("hover"),document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseUp))}_filter(t){return this.questionList}handleEnterQuestion(t){let i=t.target,a=parseInt(i.value);(a<1||a>this.questionList.length)&&(a=1,this.myControl.setValue(this.startQuestion)),this.questionList.length<=500?this.goToQuestionAll(a-1):1==a?(this.startChunkIndex=0,this.currentPage=1,setTimeout(()=>{this.goToQuestionAll(a-1)},1e3)):(this.currentPage=Math.ceil(a/hs),this.startChunkIndex=(this.currentPage-1)*hs,setTimeout(()=>{this.goToQuestionAll(a-1)},1e3)),i.blur(),this.hiddenInput&&this.hiddenInput.nativeElement.click()}handleEnterPage(t){let i=t.target,a=parseInt(i.value);a<1||a>this.totalPage?(this.startChunkIndex=0,this.currentPage=1):(this.startChunkIndex=(a-1)*hs,this.currentPage=a),i.blur()}handleClickOption(t){if(t>=this.startChunkIndex&&t<this.startChunkIndex+hs)this.goToQuestionAll(t);else{let i=t+1;1==i?(this.startChunkIndex=0,this.currentPage=1,setTimeout(()=>{this.goToQuestionAll(i-1)},1e3)):(this.currentPage=Math.ceil(i/hs),this.startChunkIndex=(this.currentPage-1)*hs,setTimeout(()=>{this.goToQuestionAll(i-1)},1e3))}}get totalPage(){return Math.ceil(this.questionList.length/this.lazyLoadSize)}get topLazyLoad(){return this.questionList.length>500&&this.startChunkIndex-hs>=0}get bottomLazyLoad(){return this.questionList.length>500&&this.startChunkIndex+hs<=this.questionList.length-1}get placeholderLink(){return this.cdnService.convertCdnLinkOfGitHub("svgs/Img2_dat-01.svg")}get lazyLoadSize(){return hs}get limitLazyLoad(){return 500}openManualDialog(t){this.sAztDialogService.open(i5,{width:"1000px",data:{fromButton:t},restoreFocus:!1}).afterClosed().subscribe(a=>{a&&this.browserStorageService.saveStorage("_DONT_SHOW_MANUAL","OK")})}startProcessFile(t){this.nameExamInp.setValue(t.name),this.uploadFilePdf(t),this.processPdf(t)}get totalNumberQuestion(){return this.questionList.filter(t=>t.tempData.isSelect&&!this.answerTypeService.isEssayAnswer(t.tempData)).length}get totalTrueFalseQuestion(){return this.questionList.filter(t=>t.tempData.isSelect&&this.answerTypeService.isOneChoiceAnswer(t.tempData)).length}get totalFillQuestion(){return this.questionList.filter(t=>t.tempData.isSelect&&this.answerTypeService.isFillAnswer(t.tempData)).length}get invalidTypeQuestionConfig(){return this.questionList.filter(t=>t.tempData.isSelect&&(t.tempData.point<0||!isFinite(t.tempData.point)||0==t.tempData.answerResult.length&&this.answerTypeService.isFillAnswer(t.tempData)||0==t.tempData.answerResult.length&&this.answerTypeService.isOneChoiceAnswer(t.tempData)||t.answers.length<2&&this.answerTypeService.isOneChoiceAnswer(t.tempData))||!t.tempData.point&&!this.isFullNoPoint)}get isFullNoPoint(){return this.questionList.filter(t=>!t.tempData.point).length===this.questionList.length}changeQuestionPoint(t,i){for(let a=0;a<this.questionList.length;a++)this.questionList[a].question.label===t.question.label&&(this.questionList[a].tempData.point=Number(i.target.value))}changeAnswerResult(t,i){t.tempData.answerResult=[i]}changeTypeQuestion(t,i){t.tempData.answerType=Number(i.target.value),4==Number(i.target.value)&&(t.tempData.answerResult=[])}uploadFileQuestion(t,i){var a=i.target.files[0];let r=this.commonService.myTranslateInstant("lang_auto_dang_tai_len_tep_tin_dinh_kem_cho_cau_hoi");if(!0===(0,ht.Wg)(a.type))this.arrStatusFileExam=[`${r}  (0%)`],this.isShowLoadingFileExam=!0,this.apiUploadService.uploadToCdnProgressForExamQuestionContent(a).subscribe(s=>{if(s.type!=V.dt.UploadProgress)if(1==s.success){t.tempData.questionMedia.push(s.data);let l=this.commonService.myTranslateInstant("lang_auto_tai_len_thanh_cong")??"";this.arrStatusFileExam=[l],this.isShowLoadingFileExam=!1}else this.showErrorSnack("lang_auto_upload_that_bai");else if(s.loaded&&s.total){let l=Math.round(s.loaded/s.total*100);this.arrStatusFileExam=[`${r} (${l}%)`]}});else{let s=this.commonService.myTranslateInstant("lang_auto_chi_duoc_dinh_kem_tep_tin_mp_3_hoac_wav")??"";this.showErrorSnack(s)}}uploadFilePdf(t){this.apiUploadService.uploadToCdnProgressForTestbankPdf(t).subscribe(i=>{i.type!=V.dt.UploadProgress&&(1==i.success&&i.data?.url?(this.whiteListCurrentExamFileUploadedUrl=i.data?.url??"",this.sendTrackUploadFileToApi(this.whiteListCurrentExamFileUploadedUrl).subscribe(()=>{this.notShowSourceFile=!1})):this.showErrorSnack("lang_auto_upload_that_bai"))})}sendTrackUploadFileToApi(t){return new ee.y(i=>{let a={categoryId:this.cur_cateId?Number(this.cur_cateId):void 0,cdnExamFile:t,turnUuid:this.uploadTurnUuid??""};this.examFileService.apiExamFileSaveObjPost(a).subscribe(r=>{i.next(!0),i.complete()})})}clickUploadFile(t){jQuery(`#inputFileQuestion_${t}`).trigger("click")}changeIsSelect(t,i){t.tempData.isSelect=i}setupFillAnswersQuestion(t){var i=this.questionList[t];const a=[...i.tempData.answerResult];this.sAztDialogService.open(kv,{width:"50%",data:{answers:i.tempData.answerResult},restoreFocus:!1}).afterClosed().subscribe(s=>{!1===s&&(i.tempData.answerResult=a)})}listeningDropFileExam(){var t=this,i=jQuery("#box-left-file-drop");i.on("drag dragstart dragend dragover dragenter dragleave drop",function(a){a.preventDefault(),a.stopPropagation()}).on("dragover dragenter",function(){i.addClass("is-dragover")}).on("dragleave dragend drop",function(){i.removeClass("is-dragover")}).on("drop",function(a){t.nameExamInp.setValue(a.originalEvent.dataTransfer.files[0].name),t.uploadFilePdf(a.originalEvent.dataTransfer.files[0]),t.processPdf(a.originalEvent.dataTransfer.files[0])}),jQuery("#box-left-file-input").change(()=>{t.nameExamInp.setValue(jQuery("#box-left-file-input").get(0).files[0].name),t.uploadFilePdf(jQuery("#box-left-file-input").get(0).files[0]),t.processPdf(jQuery("#box-left-file-input").get(0).files[0])}),jQuery(i).click(()=>{jQuery("#box-left-file-input").trigger("click")})}processPdf(t){let i=this.commonService.myTranslateInstant("lang_auto_dang_tien_hanh_phan_tich");window.startLoading=()=>{this.arrStatusFileExam=[`${i} ...`],this.isShowLoadingFileExam=!0},this.arrStatusFileExam=[`${i} ...`],this.isShowLoadingFileExam=!0,jQuery("#box-left-file-drop").hide();var r=new z4.Process(this.cropPdfConfigParam);r.setUpdateStatusCallback(c=>{c.startsWith("Rendering")?0==this.message.length?this.message.push(c):this.message[this.message.length-1]=c:this.message.push(c)}),r.setOncompleteCallback((c,u)=>{c.length>0?(this.startQuestion=c[0].num,this.myControl.setValue(this.startQuestion),this.labelHolderSize.width=2*u[0].canvas.width,this.rootQuestionInfo=c,this.rootCanvases=u.map(m=>m.canvas),this.rootHeaderPosition={pageIndex:0,top:1,left:c[0].positions[0].left,width:c[0].positions[0].left+c[0].positions[0].width<u[0].canvas.width?c[0].positions[0].width:u[0].canvas.width-c[0].positions[0].left,heigh:c[0].positions[0].top-1},r.showHidden(),this.errorQuestions=this.cropperService.getErrorQtns(c),this.processData()):(this.errAnalyzingPdf=!0,this.isShowLoadingFileExam=!1)}),r.parsePdf(t)}applyEditEvent(t){if(this.questionConfigList=du.cloneDeep(this.questionList),t){this.countClickApplyEdit++,this.rootQuestionInfo=t.listQuestion,this.rootHeaderPosition=t.headerPos,this.processData();for(let i=0;i<this.questionList.length;i++)this.questionList[i].isFixAns=this.questionConfigList[i]?.isFixAns,this.questionList[i].groupType=this.questionConfigList[i].groupType,this.questionList[i].tempData.point=this.questionConfigList[i].tempData.point,this.questionList[i].tempData.answerType=this.questionConfigList[i].tempData.answerType,this.questionList[i].tempData.answerResult=this.questionConfigList[i].tempData.answerResult,this.questionList[i].tempData.isSelect=this.questionConfigList[i].tempData.isSelect,this.questionList[i].tempData.isShowHelp=this.questionConfigList[i].tempData.isShowHelp,this.questionList[i].tempData.isShowAttach=this.questionConfigList[i].tempData.isShowAttach,this.questionList[i].tempData.questionMedia=this.questionConfigList[i].tempData.questionMedia;this.editing=!1,this.showSuccessSnack("lang_auto_chinh_sua_thanh_cong")}else this.editing=!1}cloneCanvas(){let t=this.rootCanvases;for(let i=0;i<t.length;i++){const a=t[i];let r=document.createElement("canvas");r.width=a.width,r.height=a.height;let s=document.createElement("canvas");s.width=a.width,s.height=a.height;let l=r.getContext("2d");l?.drawImage(a,0,0,a.width,a.height,0,0,a.width,a.height);let c=s.getContext("2d");c?.drawImage(a,0,0,a.width,a.height,0,0,a.width,a.height),l&&c&&this.clonedCtxForCreate.push(c)}}processData(){this.questionList=[],this.abcdLabelPos={},this.groupImages={},this.totalInGroupTracking=0,this.questionLabelMap=[],this.groupLengths=[],this.countGroup=0,this.labelsUrls=[],this.labelsBase64s=[],this.firstInGroupIndexes=[],this.clonedCtxForCreate=[],this.cloneCanvas();const t=this.clonedCtxForCreate[0].canvas.width;this.rootQuestionInfo.forEach(ce=>{ce.positions.forEach(te=>{te.width+te.left>t&&(te.width=t-te.left)})});let i=this.rootQuestionInfo,a=this.clonedCtxForCreate;i.forEach(ce=>{ce.remove.heigh=Math.round(ce.remove.heigh),ce.remove.width=Math.round(ce.remove.width),ce.remove.top=Math.round(ce.remove.top),ce.remove.left=Math.round(ce.remove.left),ce.positions.forEach(te=>{te.heigh=Math.round(te.heigh),te.width=Math.round(te.width),te.top=Math.round(te.top),te.left=Math.round(te.left)}),ce.help&&(ce.help.remove&&(ce.help.remove.heigh=Math.round(ce.help.remove.heigh),ce.help.remove.width=Math.round(ce.help.remove.width),ce.help.remove.left=Math.round(ce.help.remove.left),ce.help.remove.top=Math.round(ce.help.remove.top)),ce.help.positions.forEach(te=>{te.heigh=Math.round(te.heigh),te.width=Math.round(te.width),te.top=Math.round(te.top),te.left=Math.round(te.left)})),ce.answers.length>0&&ce.answers.forEach(te=>{te.remove.heigh=Math.round(te.remove.heigh),te.remove.width=Math.round(te.remove.width),te.remove.top=Math.round(te.remove.top),te.remove.left=Math.round(te.remove.left),te.positions.forEach(Se=>{Se.heigh=Math.round(Se.heigh),Se.width=Math.round(Se.width),Se.top=Math.round(Se.top),Se.left=Math.round(Se.left)})})});let r=document.createElement("canvas");r.width=this.labelHolderSize.width,r.height=this.labelHolderSize.height;let s=r.getContext("2d"),l=0,c=s;const u=()=>{s&&(this.labelsBase64s[l]=s.canvas.toDataURL("image/png"),l++,s.clearRect(0,0,s.canvas.width,s.canvas.height)),p.left=0,p.top=0};let m=0,p={left:0,top:0,locate:0};const f=ce=>{p.left=0,p.top+=ce};let b=[];const L=ce=>{let te=!0;for(let Se=0;Se<ce.length;Se++)if(1==ce[Se].remove.width||1==ce[Se].remove.heigh){te=!1;break}return te};i.forEach(ce=>{b.push(ce.answers.length)});for(let ce=0;ce<i.length;ce++)if(L(i[ce].answers)&&i[ce].answers.length==Math.max(...b)){i[ce].answers.forEach(te=>{c?.drawImage(a[te.remove.pageIndex].canvas,te.remove.left,te.remove.top,te.remove.width,te.remove.heigh,p.left,p.top,te.remove.width,te.remove.heigh),this.abcdLabelPos[te.label]={left:p.left,top:p.top},p.left=p.left+te.remove.width+5});break}this.examHeader=this.cropperService.getSingleImgData(this.rootHeaderPosition,a);for(let ce=0;ce<i.length;ce++){let te={isFixAns:i[ce].isFixAns?1:0,forcedFixAns:!!i[ce].isFixAns,groupType:0,original:"",debugView:"",group:i[ce].group,groupUrl:this.groupImages[`image_group_${i[ce].group}`]?this.groupImages[`image_group_${i[ce].group}`]:"",question:{label:i[ce].num,posit:{top:0,left:0,locate:0},url:"",urlExcludeLabelOnly:"",width:1,height:1,remove:{x:1,y:1,width:1,height:1,url:this.cropperService.getSingleImgData(i[ce].remove,a),left:0,top:0}},answers:[],help:{num:i[ce].num,url:""},tempData:{sort:ce,point:0,answerType:1,answerConfig:{},answerResult:[],isShowAttach:!1,questionMedia:[],isSelect:!0,isShowHelp:!1},rootIndex:ce},Se=i[ce].positions;if(te.original=this.cropperService.getScatteredImgData(Se,a),i[ce].isGroup){this.groupLengths.push(this.totalInGroupTracking),this.totalInGroupTracking=0,this.countGroup++,te.isGroup=!0;var N=this.cropperService.getScatteredImgData(i[ce].positions,a);this.groupImages[`image_group_${i[ce].num}`]=N}else{m++,this.totalInGroupTracking++,c&&0!=m&&p.left+i[ce].remove.width>c.canvas.width?(p.left=0,p.top=p.top+this.maxQuestionLabelHeight+5,this.maxQuestionLabelHeight=0,c&&p.top+i[ce].remove.heigh>c.canvas.height&&u(),c?.drawImage(a[i[ce].remove.pageIndex].canvas,i[ce].remove.left,i[ce].remove.top,i[ce].remove.width,i[ce].remove.heigh,p.left,p.top,i[ce].remove.width,i[ce].remove.heigh),te.question.remove.left=p.left,te.question.remove.top=p.top,this.questionLabelMap.push({locate:l,left:p.left,top:p.top,width:i[ce].remove.width,height:i[ce].remove.heigh}),p.left=p.left+i[ce].remove.width+5):(c&&p.top+i[ce].remove.heigh>c.canvas.height&&u(),c?.drawImage(a[i[ce].remove.pageIndex].canvas,i[ce].remove.left,i[ce].remove.top,i[ce].remove.width,i[ce].remove.heigh,p.left,p.top,i[ce].remove.width,i[ce].remove.heigh),te.question.remove.left=p.left,te.question.remove.top=p.top,this.questionLabelMap.push({locate:l,left:p.left,top:p.top,width:i[ce].remove.width,height:i[ce].remove.heigh}),p.left=p.left+i[ce].remove.width+5,i[ce].remove.heigh>this.maxQuestionLabelHeight&&(this.maxQuestionLabelHeight=i[ce].remove.heigh)),this.cropperService.fillColor("#ffffff",a[i[ce].remove.pageIndex],i[ce].remove.left,i[ce].remove.top,i[ce].remove.width,i[ce].remove.heigh),te.question.urlExcludeLabelOnly=1==Se.length?this.cropperService.getSingleImgData(Se[0],a):this.cropperService.getScatteredImgData(Se,a),te.question.remove.x=i[ce].remove.left-Se[0].left,te.question.remove.y=i[ce].remove.top-Se[0].top,te.question.remove.width=i[ce].remove.width,te.question.remove.height=i[ce].remove.heigh,i[ce].answers.length>0?i[ce].answers.forEach(se=>{let pe={label:se.label,posit:{left:0,top:0,locate:0},url:"",x:se.positions[0].left-Se[0].left,y:se.positions[0].top-Se[0].top,width:1,height:1,remove:{x:se.remove.left-Se[0].left,y:se.remove.top-Se[0].top,xAns:se.remove.left-se.positions[0].left,yAns:se.remove.top-se.positions[0].top,width:se.remove.width,height:se.remove.heigh,url:this.cropperService.getSingleImgData(se.remove,a),left:0,top:0}};if(Se.length>1&&Se[0].pageIndex!==se.remove.pageIndex&&(pe.remove.y=se.remove.top-Se[1].top+Se[0].heigh),this.cropperService.fillColor("#ffffff",a[se.remove.pageIndex],se.remove.left,se.remove.top,se.remove.width,se.remove.heigh),Se.length>1)for(let Be=0;Be<Se.length;Be++)if(Se[Be].pageIndex==se.positions[0].pageIndex){pe.y=0==Be?se.positions[0].top-Se[Be].top:se.positions[0].top-Se[Be].top+Se[0].heigh;break}if(se.isCorrect&&(te.tempData.answerResult=[se.label]),1==se.positions.length)pe.url=this.cropperService.getSingleImgData(se.positions[0],a),pe.width=se.positions[0].width,pe.height=se.positions[0].heigh;else{pe.url=this.cropperService.getScatteredImgData(se.positions,a);let Be=se.positions.filter(Pe=>!Pe.inactive);pe.width=this.cropperService.maxWidthTo(Be.length,se.positions),pe.height=this.cropperService.sumHighTo(Be.length,se.positions)}te.answers.push(pe),se.positions.forEach(Be=>{this.cropperService.fillColor("#ffffff",a[Be.pageIndex],Be.left,Be.top,Be.width,Be.heigh)})}):i[ce].strAns&&void 0!==i[ce].strAns?(te.tempData.answerType=4,te.tempData.answerResult.push(i[ce].strAns||"")):te.tempData.answerType=3;let Ze=i[ce].help;if(Ze&&(Ze.remove&&this.cropperService.fillColor("#ffffff",a[Ze.remove.pageIndex],Ze.remove.left,Ze.remove.top,Ze.remove.width,Ze.remove.heigh),Ze.positions&&Ze.positions.length>0&&(te.help.url=this.cropperService.getScatteredImgData(Ze.positions,a))),1==Se.length)te.question.url=this.cropperService.getSingleImgData(Se[0],a),te.question.width=Se[0].width,te.question.height=Se[0].heigh;else{te.question.url=this.cropperService.getScatteredImgData(Se,a);let se=Se.filter(pe=>!pe.inactive);te.question.width=this.cropperService.maxWidthTo(se.length,Se),te.question.height=this.cropperService.sumHighTo(se.length,Se)}this.questionList.push(te)}}for(let ce=0;ce<this.questionList.length;ce++)this.questionList[ce].tempData.point=Number((this.totalPoint.value??0)/this.questionList.length),this.questionList[ce].index=ce;let R=0;for(let ce=0;ce<this.groupLengths.length;ce++)this.firstInGroupIndexes.push(R+this.groupLengths[ce]),R+=this.groupLengths[ce];const j=()=>{let ce=0,te=[];for(let Se=0;Se<this.questionList.length;Se++)if(this.questionList[Se].answers.length>0)for(let Ze=0;Ze<this.questionList[Se].answers.length;Ze++){let se=new Image;se.crossOrigin="anonymous",se.setAttribute("indexMap",Se.toString()),se.setAttribute("ansIndexMap",Ze.toString()),te.push(se),se.onload=()=>{if(ce++,ce==te.length){let pe=[],Be=[],Pe=0;for(let Oe=0;Oe<te.length;Oe++){const Fe=te[Oe];Pe+=Fe.width+5,Pe<=this.labelHolderSize.width?Be.push(Fe):(pe.push(Be),Be=[],Be.push(Fe),Pe=Fe.width),Oe==te.length-1&&pe.push(Be)}for(let Oe=0;Oe<pe.length;Oe++){const Fe=pe[Oe];let Re=Fe.map(Ke=>Ke.height),Je=Math.max(...Re);for(let Ke=0;Ke<Fe.length;Ke++){const et=Fe[Ke];c&&p.top+et.height>c?.canvas.height&&u(),c?.drawImage(et,p.left,p.top);let gt=parseInt(et?.getAttribute("indexMap")),ue=parseInt(et?.getAttribute("ansIndexMap"));this.questionList[gt].answers[ue].posit.left=p.left,this.questionList[gt].answers[ue].posit.top=p.top,this.questionList[gt].answers[ue].posit.locate=l,p.left+=et.width+5,Ke==Fe.length-1&&Oe==pe.length-1&&(this.labelsBase64s[l]=s?.canvas.toDataURL("image/png"))}f(Je+5)}}},se.src=this.questionList[Se].answers[Ze].url}};let G=this.questionList.filter(ce=>!this.answerTypeService.isOneChoiceAnswer(ce.tempData)).length;p.left=0,p.top+=this.questionList[this.questionList.length-1].question.remove.height+5;let ae=[];for(let ce=0;ce<this.questionList.length;ce++)ae.push(ce);let W=[];W=du.shuffle(ae);let le=0,ve=[];W.forEach(ce=>{let te=new Image;te.crossOrigin="anonymous",te.setAttribute("indexMap",ce.toString()),ve.push(te),te.onload=()=>{if(le++,le==W.length){let Se=du.chunk(ve,2);for(let Ze=0;Ze<Se.length;Ze++){const se=Se[Ze];let pe=se.map(Pe=>Pe.height),Be=Math.max(...pe);for(let Pe=0;Pe<se.length;Pe++){const Oe=se[Pe];c&&p.top+Oe.height>c?.canvas.height&&u(),c?.drawImage(Oe,p.left,p.top);let Fe=parseInt(Oe?.getAttribute("indexMap"));this.questionList[Fe].question.posit.left=p.left,this.questionList[Fe].question.posit.top=p.top,this.questionList[Fe].question.posit.locate=l,p.left+=Oe.width+5}f(Be+5)}G==this.questionList.length?this.labelsBase64s[l]=s?.canvas.toDataURL("image/png"):j()}},te.src=this.questionList[ce].question.url}),this.completeCropper()}completeCropper(){this.isShowLoadingFileExam=!1,this.cropperDone=!0,jQuery("#hiddenWrapper").remove();try{this.browserStorageService.getStorage("_DONT_SHOW_MANUAL")||setTimeout(()=>{this.openManualDialog(!1)},2e3)}catch(t){console.log(t)}}toggleViewHelp(t){t.tempData.isShowHelp=!t.tempData.isShowHelp}toogleMixAns(t){t.forcedFixAns?this.commonService.snackError("lang_auto_cau_hoi_nay_phai_co_dinh_dap_an_ban_khong_the_thay_doi"):t.isFixAns=0==t.isFixAns?1:0}toggleMixInGroup(t){for(let i=0;i<this.questionList.length;i++)this.questionList[i].group&&this.questionList[i].group==t&&(1==this.questionList[i].groupType?(this.questionList[i].groupType=0,this.showErrorSnack("lang_auto_nhung_cau_trong_nhom_nay_se_bi_dao_thu_tu_khi_de_thi_bi_dao")):(this.questionList[i].groupType=1,this.showErrorSnack("lang_auto_nhung_cau_trong_nhom_nay_van_giu_nguyen_thu_tukhi_de_thi_bi_dao")))}toggleRemoveAllGroup(t){let i=this.questionList.filter(a=>a.group&&a.group==t);i.filter(a=>a.tempData.isSelect).length>0?i.forEach(a=>{a.tempData.isSelect=!1,this.changePointWhenDeleteQuestion(a.index??0)}):i.forEach(a=>{a.tempData.isSelect=!0,this.changePointWhenDeleteQuestion(a.index??0)})}loadingFileJs(){let t=this.commonService.myTranslateInstant("lang_auto_dang_khoi_tao_cong_cu");this.arrStatusFileExam=[`${t} ...`],this.isShowLoadingFileExam=!0;let i=this.configService.getConfig("dynamicJsVersion");return new Promise(a=>{var r=[{source:this.cdnService.convertCdnLinkOfGitHub(`js/pdf-js-v3/pdf.js?ver=${i}`),name:"pdf-js-v2-pdf.js"},{source:this.cdnService.convertCdnLinkOfGitHub(`js/pdf-js-v3/pdf.worker.js?ver=${i}`),name:"pdf-js-v2-pdf.worker.js"},{source:"https://cdnjs.cloudflare.com/ajax/libs/interact.js/1.10.11/interact.min.js",name:"interact.min.js"}];this.commonService.loadScriptPromises(r).then(s=>{s?(a(!0),this.isShowLoadingFileExam=!1):a(!1)})})}setHeightFullScreen(){var r=jQuery(window).height()-(jQuery("#bxControl").height()+jQuery("#header-app-component").height()+10);jQuery(".box-file-content").height(r)}resetBoxExamQuestions(t){let i=this.commonService.myTranslateInstant("lang_auto_xac_nhan_tao_lai_de_thi")??"",a=this.commonService.myTranslateInstant("lang_auto_hanh_dong_khong_the_hoan_tac")??"";this.confirmDialog(i,a,"400px",()=>{this.commonService.myNavigation("/admin/testbank/create-new-document/"+this.cur_cateId)})}confirmDialog(t,i,a,r){this.sAztDialogService.open(Lg,{width:a,data:{title:t,msg:i},restoreFocus:!1}).afterClosed().subscribe(l=>{!0===l&&r()})}handleSaveQuestionError(t){console.log(t),this.isShowLoadingFileExam=!1,this.showErrorSnack("lang_auto_tao_de_khong_thanh_cong_vui_long_thu_lai")}showAllHelp(){this.isShowAllHelp=!this.isShowAllHelp,this.questionList.forEach(t=>{t.tempData.isShowHelp=this.isShowAllHelp})}goToQuestionAll(t,i=150){var a=document.getElementById("list-question-box-item-"+t),r=document.getElementById("list-question-box-viewer");r&&a&&r.scrollTo({top:Number(a.offsetTop-i)})}rxjsHandleSaveExam(){if(this.isShowLoadingFileExam)this.commonService.snackError("lang_core_qua_trinh_luu_de_dang_dien_ra");else if(this.invalidTypeQuestionConfig.length>0||!this.nameExamInp.value||""==this.nameExamInp.value.trim())this.commonService.snackError("lang_testbank_create_exam_width_file_pdf_cant_save_check_err");else{if(this.isFullNoPoint){const s=nt(10,this.questionList.length);this.questionList.forEach((l,c)=>{l.tempData.point=s[c]})}this.isShowLoadingFileExam=!0;let i,t=this.commonService.myTranslateInstant("lang_auto_dang_luu_cau_hoi_vao_he_thong");if(this.selects=this.questionList.filter(s=>s.tempData.isSelect),this.arrStatusFileExam=[`${t}: 0/${this.selects.length}`],!du.isEmpty(this.groupImages)){let s={};for(const l in this.groupImages)s[l]=this.apiUploadService.reactiveUploadBase64ToCdnWithRetry(Wp,this.groupImages[l]);i=(0,Tv.D)(s)}const a=()=>{this.rxjsConstructQuestionInfo()},r=()=>{this.uploadParallelLabelsImage(0,5,s=>{s.success?(this.labelsUrls=s.urls,i?i.subscribe(l=>{var c="",u={};for(var m in l){var p=l[m];1==p.success?u[m]=p.data??"":c=p.message??"Unkown error"}""==c?(this.groupImages=u,a()):this.handleSaveQuestionError(c)}):a()):this.handleSaveQuestionError(s.message)})};this.useHeader&&this.examHeader?this.apiUploadService.reactiveUploadBase64ToCdnWithRetry(Wp,this.examHeader).subscribe(s=>{1==s.success?(this.examHeader=s.data??"",r()):this.handleSaveQuestionError(s.message)}):(this.examHeader="",r())}}rxjsConstructQuestionInfo(){this.rxJsCallSaveParallelQuestion(0,5,this.selects,t=>{t&&this.rxJsCallApiSaveQuestions(i=>{i&&this.handleSaveAllExam()})})}rxJsCallApiSaveQuestions(t){if(this.newQuestionArrSave.length<=this.limitLazyLoad){var i={listQuestions:this.newQuestionArrSave.sort((a,r)=>a.sortByIndex-r.sortByIndex)};this.questionService.apiQuestionSaveObjsV2Post(i).subscribe(a=>{1==a.success&&(a.data?.objs?.length??0)>0?(a.data?.objs?.forEach((r,s)=>{this.examConfigs.push({id:r.id,name:r.name,groupId:r.groupId,scorePerQuestion:this.selects[s].tempData.point,totalQuestion:1,sort:s})}),t(!0)):(this.handleSaveQuestionError(a.message),t(!1))})}else this.saveVeryLongListQuestions(this.newQuestionArrSave,t)}saveVeryLongListQuestions(t,i){var a=this;return(0,Yi.Z)(function*(){a.newQuestionArrSave.sort((l,c)=>l.sortByIndex-c.sortByIndex);var r=du.chunk(a.newQuestionArrSave,hs);let s=0;try{for(const l of r){let c=yield a.questionService.apiQuestionSaveObjsV2Post({listQuestions:l}).toPromise();if(!(1==c?.success&&(c?.data?.objs?.length??0)>0))throw c?.message;c.data?.objs?.forEach((u,m)=>{let p=hs*s+m;a.examConfigs.push({id:u.id,name:u.name,groupId:u.groupId,scorePerQuestion:a.selects[p].tempData.point,totalQuestion:1,sort:p})}),s++}i(!0)}catch(l){a.handleSaveQuestionError(l),i(!1)}})()}rxJsCallSaveParallelQuestion(t,i,a,r){for(var s=[],l=0;l<i;l++)(c=t+l)<this.selects.length&&s.push(this.selects[c]);for(var u=0,m=s.length,p=0;p<s.length;p++){var c;this.rxjsProcessSaveOneQuestion(s[p],c=t+p,L=>{L?(u+=1)===m&&this.rxJsCallSaveParallelQuestion(t+m,i,a,r):r(!1)})}m<=0&&r(!0)}uploadParallelLabelsImage(t,i,a){for(var r=[],s=0;s<i;s++)(l=t+s)<this.labelsBase64s.length&&r.push(this.labelsBase64s[l]);for(var c=r.length,u=0,m=0;m<r.length;m++){var l;this.uploadOneLabelsImage(r[m],l=t+m,b=>{b.success?(this.resultUploadBase64Labels.push({index:b.index,url:b.url}),(u+=1)===c&&this.uploadParallelLabelsImage(t+c,i,a)):a({success:!1,message:"Fail to upload labels image to cdn"})})}c<=0&&(this.resultUploadBase64Labels.sort((f,b)=>f.index-b.index),a({success:!0,urls:this.resultUploadBase64Labels.map(f=>f.url)}))}uploadOneLabelsImage(t,i,a){this.apiUploadService.reactiveUploadBase64ToCdnWithRetry(Wp,t??"").subscribe(r=>{a(r.success?{success:!0,index:i,url:r.data??""}:{success:!1})})}rxjsProcessSaveOneQuestion(t,i,a){let r=t;(0,Tv.D)([this.apiUploadService.reactiveUploadBase64ToCdnWithRetry(Wp,r.original),this.apiUploadService.reactiveUploadBase64ToCdnWithRetry(Wp,r.help.url),this.apiUploadService.reactiveUploadBase64ToCdnWithRetry(Wp,r.question.urlExcludeLabelOnly)]).pipe((0,K4.w)(([s,l,c])=>{if(1!==s.success||1!==l.success){const b=1!==s.success?s.message:l.message;return this.handleSaveQuestionError(b),a(!1),(0,H4._)(b)}r.original=s.data??"",r.help.url=l.data??"",r.question.urlExcludeLabelOnly=c.data??"";let u=this.answerTypeService.isOneChoiceAnswer(t.tempData)?t.answers.map(b=>({key:b.label,content:JSON.stringify({...b,label:null,url:null,x:null,y:null,isCorrect:null,remove:null})})):t.tempData.answerConfig,m="";t.answers.length>0&&(m=t.answers.map(b=>({...b,url:null,remove:{...b.remove,url:null}})));let p={name:`[PDFv2] C\xe2u h\u1ecfi t\u1ea1o t\u1ef1 \u0111\u1ed9ng ${t.question.label}`,version:"2",isFixAns:t.isFixAns,groupType:t.groupType.toString(),answerConfig:JSON.stringify(u),answerResult:JSON.stringify(t.tempData.answerResult),answerType:t.tempData.answerType,questionText:"",metaData:"",answerMedia:t.help.url,questionMedia:"",attachments:JSON.stringify(t.tempData.questionMedia),questionContent:JSON.stringify([{$id:0,id:0,name:`[PDFv2] C\xe2u h\u1ecfi t\u1ea1o t\u1ef1 \u0111\u1ed9ng ${t.question.label}`,path:t.original,extension:"png",pimes:null,url:t.original,groupUrl:t.group?this.groupImages[`image_group_${t.group}`]:"",firstInGroupIndexes:null,abcdLabelPos:null,questionLabelMap:null,metaData:{...t,question:{...t.question,url:null,urlExcludeLabelOnly:this.answerTypeService.isOneChoiceAnswer(t.tempData)?null:t.question.urlExcludeLabelOnly,remove:{...t.question.remove,url:null}},answers:m,tempData:null,original:null,debugView:null,isGroup:null,help:null,group:null,groupUrl:null,groupType:null}}]),questionTags:JSON.stringify([]),tags:[],categoryId:0,groupId:t.group,coordinates:"{}",totalQuestion:1,sortByIndex:i};var f=this.newQuestionArrSave.filter(b=>b.name==p.name);if(!f||0==f.length){this.newQuestionArrSave.push(p),this.countSaveQuestion++;let b=this.commonService.myTranslateInstant("lang_auto_dang_luu_cau_hoi_vao_he_thong");this.arrStatusFileExam=[`${b}: ${this.countSaveQuestion}/${this.selects.length}`]}return a(!0),(0,J4.of)(null)})).subscribe()}openDialogSpitPoint(){let t=0,i=0,a=0,r=0,s=0,l=0;for(let c=0;c<this.questionList.length;c++)this.questionList[c].tempData.isSelect&&(this.answerTypeService.isOneChoiceAnswer(this.questionList[c].tempData)?(t++,i+=this.questionList[c].tempData.point):this.answerTypeService.isFillAnswer(this.questionList[c].tempData)?(s++,l+=this.questionList[c].tempData.point):(a++,r+=this.questionList[c].tempData.point));if(this.countTrueFalseQuestion=t,this.countFillAnswerQuestion=s,this.dataSpitPoint){let c={multipleQuestion:t,multiplePoint:i.toFixed(4),essayQuestion:a,essayPoint:r.toFixed(4),fillQuestion:s,fillPoint:l.toFixed(4)};this.dataSpitPoint=c,this.sAztDialogService.open(Mn,{data:this.dataSpitPoint,width:"500px",restoreFocus:!1}).afterClosed().subscribe(m=>{m&&this.setPointTest(m)})}}setPointTest(t){this.multiplePoint=t.multiplePoint??0,this.essayPoint=t.essayPoint??0,this.fillPoint=t.fillPoint??0;let i=Number(this.parseNumberFixed(Number(t.multiplePoint)/this.totalTrueFalseQuestion,8)),a=Number(this.parseNumberFixed(Number(t.fillPoint)/this.totalFillQuestion,8)),r=0,s=this.questionList.filter(l=>l.tempData.isSelect).length;s-this.totalTrueFalseQuestion-this.totalFillQuestion>0&&(r=Number(t.essayPoint)/(s-this.totalTrueFalseQuestion-this.totalFillQuestion));for(let l=0;l<this.questionList.length;l++)this.questionList[l].tempData.isSelect&&(this.questionList[l].tempData.point=this.answerTypeService.isOneChoiceAnswer(this.questionList[l].tempData)?i.toString().length>8?Number(this.parseNumberFixed(i,8)):i:this.answerTypeService.isFillAnswer(this.questionList[l].tempData)?a.toString().length>8?Number(this.parseNumberFixed(a,8)):a:r.toString().length>8?Number(this.parseNumberFixed(r,8)):r);this.showSuccessSnack("lang_auto_chia_diem_thanh_cong")}parseNumberFixed(t,i){let a=Number(parseFloat(t.toString()).toFixed(i));return isNaN(a)?"0":parseFloat(t.toString()).toFixed(i)}changeSelectTempData(t){this.questionList[t].tempData.isSelect=!this.questionList[t].tempData.isSelect,this.changePointWhenDeleteQuestion(t)}changePointWhenDeleteQuestion(t){let i=Number(this.multiplePoint)/this.totalTrueFalseQuestion,a=Number(this.fillPoint)/this.totalFillQuestion,r=0,s=this.questionList.filter(l=>l.tempData.isSelect).length;0==this.essayPoint&&(this.essayPoint=(s-this.totalTrueFalseQuestion-this.totalFillQuestion)*this.questionList[t].tempData.point),s-this.totalTrueFalseQuestion-this.totalFillQuestion>0&&(r=Number(this.essayPoint)/(s-this.totalTrueFalseQuestion-this.totalFillQuestion));for(let l=0;l<this.questionList.length;l++)this.questionList[l].tempData.isSelect&&(this.questionList[l].tempData.point=this.answerTypeService.isOneChoiceAnswer(this.questionList[l].tempData)?i.toString().length>8?Number(this.parseNumberFixed(i,8)):i:this.answerTypeService.isFillAnswer(this.questionList[l].tempData)?a.toString().length>8?Number(this.parseNumberFixed(a,8)):a:r.toString().length>8?Number(this.parseNumberFixed(r,8)):r)}openExamInfoDialog(){this.dataExamInfo={isShow:!0,obj:this.questionList}}closeDialogExamInfo(){this.dataExamInfo.isShow=!1}onHandleGoToQuestion(t){const i=document.getElementById("list-question-box-item-"+(t-1));i&&i.scrollIntoView()}ngOnInit(){this.uploadTurnUuid=this.sAztUuidService.getUuid(),this.isSupportedBrowser&&(this.waitDestroy((0,ne.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.cur_cateId=this.commonService.getMyParam(this.activeRoute,"cat_id");var t=this.commonService.getMyQueryParam("backto");this.backToLink=t??"/admin/testbank/create-new-document/"+(null!=this.cur_cateId?this.cur_cateId:0),this.infoService.apiInfoGetConfigObjsGet("CROPPDF_PARAMS").subscribe(i=>{this.cropPdfConfigParam=i.CROPPDF_PARAMS,this.loadingFileJs().then(a=>{if(a){const r=this.editorOutputDataService.getFirstFile();r?this.startProcessFile(r):this.redirectService.redirectByUrl(this.commonService.getLocalRouter(this.backToLink)),this.listeningDropFileExam()}})})})),this.filteredOptions=this.myControl.valueChanges.pipe((0,G4.O)(""),(0,hc.U)(t=>this._filter(t?.toString()||""))),setTimeout(()=>{this.fillDataFormToProgram()},1e3))}saveDocumentTrainingCenter(t,i,a,r){const l=`/admin/testbank/document-management/0/${this.categoriesIdParam}/1`;this.classroomService.apiClassroomsClassroomIdSessionsSessionIdDocumentsPost(t,a,{name:r?.name,refId:r?.id,type:"exam"}).subscribe(c=>{c?this.commonService.myNavigationWithQueryString(`/admin/student/classroom-details/${t}/3`,`?sessionId=${a}`):(this.commonService.myNavigationWithQueryString("/admin/testbank/action-online-offline/"+this.categoriesIdParam+"/"+r?.hashId,`?backto=${encodeURIComponent(l)}`),this.stopStatusObj())})}fillDataFormToProgram(){const t=this.getMyQueryParam("sessionId"),i=this.getMyQueryParam("indexSession"),a=this.getMyQueryParam("programId");if(i){const r=this.browserStorageService.getSessionStorage(`${this.programFormService.key+a}`);if(r){const s=this.zipDataService.decodeContentGzip(r),l=this.castJsonToObj(s),c=this.commonService.myTranslateInstant("lang_business_exam_session");this.nameExamInp.setValue(`${c} ${(Number(i)??0)+1}-${l?.sessionFormArray[i].documentObjs.length+1}`)}}else{if(this.checkExamToProgram=!!t,!this.checkExamToProgram)return;this.paramClassroomService.getProgramTraining().subscribe(r=>{this.programDetailResponse=r;const s=this.programDetailResponse?.sessions??[],{currentObj:c}=this.paramClassroomService.findCurrentAndNextSession(s,Number(t)),u=this.commonService.myTranslateInstant("lang_business_exam_session"),p=c?.documents?.filter(f=>"exam"===f.type)?.length??1;this.nameExamInp.setValue(`${u} ${c?.sort??0}-${p+1}`)})}}ngOnDestroy(){jQuery("#hiddenWrapper").remove()}constructor(t,i,a,r,s,l,c,u,m,p,f,b,L,N,R,j,G,ae,W,le,ve,ce){super(),this.cropperService=t,this.activeRoute=i,this.sAztDialogService=a,this.questionService=r,this.apiUploadService=s,this.userService=l,this.infoService=c,this.examService=u,this.configService=m,this.cdnService=p,this.answerTypeService=f,this.redirectService=b,this.editorOutputDataService=L,this.browserStorageService=N,this.deviceDetectorService=R,this.examFileService=j,this.sAztUuidService=G,this.classroomService=ae,this.paramClassroomService=W,this.timeService=le,this.programFormService=ve,this.zipDataService=ce,this.x=0,this.y=0,this.leftWidth=0,this.cropperDone=!1,this.startChunkIndex=0,this.currentPage=1,this.editing=!1,this.errAnalyzingPdf=!1,this.categoriesIdParam=+this.commonService.getMyParam(this.activeRoute,"cat_id"),this.whiteListCurrentExamFileUploadedUrl=this.cdnService.convertCdnLinkOfGitHub("images/file_placeholder.jpg"),this.version="v2.0",this.cur_cateId=0,this.backToLink="",this.nameExamInp=new h.NI(""+Date.now(),{nonNullable:!0}),this.totalPoint=new h.NI(10),this.isChangePoint=!1,this.isMixture=!1,this.confirmTotalQuestionChange=!1,this.examConfigs=[],this.newQuestionArrSave=[],this.isChangeQuestionPoint=!1,this.isShowLoadingFileExam=!1,this.arrStatusFileExam=[],this.isShowAllHelp=!1,this.curGotoIndex=new h.NI(0),this.showNote=!0,this.debuggingMode=new h.NI(!0),this.message=[],this.errorQuestions=[],this.doneAllProcessTasks=!1,this.notShowSourceFile=!0,this.questionList=[],this.questionConfigList=[],this.rootQuestionInfo=[],this.rootCanvases=[],this.clonedCtxForCreate=[],this.labelHolderSize={width:3500,height:3500},this.labelsBase64s=[],this.labelsUrls=[],this.resultUploadBase64Labels=[],this.abcdLabelPos={},this.questionLabelMap=[],this.maxQuestionLabelHeight=0,this.examHeader="",this.useHeader=!0,this.selects=[],this.nextIndex=0,this.countGroup=0,this.groupImages={},this.groupLengths=[],this.firstInGroupIndexes=[],this.totalInGroupTracking=0,this.countSaveQuestion=0,this.cropPdfConfigParam="",this.countClickApplyEdit=0,this.dataSpitPoint={},this.countTrueFalseQuestion=0,this.countFillAnswerQuestion=0,this.multiplePoint=10,this.essayPoint=0,this.fillPoint=0,this.dataExamInfo={isShow:!1},this.startQuestion=1,this.uploadTurnUuid=void 0,this.checkExamToProgram=!1,this.handleMouseUp=te=>{this.maskLayer&&(this.maskLayer.nativeElement.style.width="0px"),this.resizeBar&&this.resizeBar.nativeElement.classList.remove("hover"),this.resizeBar?.nativeElement.style.removeProperty("cursor"),document.body.style.removeProperty("cursor"),this.iframePdf?.nativeElement.style.removeProperty("user-select"),this.iframePdf?.nativeElement.style.removeProperty("pointer-events"),this.boxLeftFile?.nativeElement.style.removeProperty("user-select"),this.boxLeftFile?.nativeElement.style.removeProperty("pointer-events"),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp)},this.handleMouseMove=te=>{if(this.parentResize&&this.iframePdf&&this.boxLeftFile){let Se=this.iframePdf.nativeElement,Ze=this.boxLeftFile.nativeElement;const pe=100*(this.leftWidth+(te.clientX-this.x))/this.parentResize.nativeElement.getBoundingClientRect().width;Ze.style.width=`${pe}%`,document.body.style.cursor="col-resize",Se.style.userSelect="none",Se.style.pointerEvents="none",Ze.style.userSelect="none",Ze.style.pointerEvents="none"}},this.myControl=new h.NI(this.startQuestion),this.handleSaveAllExam=()=>{let te=this.commonService.myTranslateInstant("lang_auto_luu_xong_tat_ca_cau_hoi_vao_he_thong")??"",Se=this.commonService.myTranslateInstant("lang_auto_dang_luu_thong_tin_de_thi")??"";this.arrStatusFileExam=[te,`${Se} ...`];let Ze=this.userService.getUserObj(),se=JSON.stringify({type:"exam",id:0,user:Ze.id});const pe=this.getMyQueryParam("classroomId"),Be=this.getMyQueryParam("programId"),Pe=this.getMyQueryParam("sessionId"),Oe=this.getMyQueryParam("indexSession"),Fe=Pe?.includes("?")?Pe.slice(0,Pe.indexOf("?")):Pe,Re=this.programDetailResponse?.sessions??[],Je=this.commonService.myTranslateInstant("lang_business_exam_by_curriculum")??"";let Ke,et;if(this.checkExamToProgram&&Re.length){const{currentObj:ue,nextIndex:Te,nextObj:Ee}=this.paramClassroomService.findCurrentAndNextSession(Re,Number(Fe)),Ue=432e6,$e=new Date(ue?.fromTime??"").getTime()+Ue;Ke=ue?.fromTime,et=Te?Ee?.fromTime:this.timeService.formatDateTimeFillData(new Date($e).toLocaleString("en-GB"))}var gt={id:0,categoryId:this.categoriesIdParam,scoringMethod:"1",name:this.nameExamInp.value??"",examConfigs:JSON.stringify(this.examConfigs),suggestions:JSON.stringify([]),labelsUrl:JSON.stringify(this.labelsUrls),abcdLabelPos:JSON.stringify(this.abcdLabelPos),questionLabelMap:JSON.stringify(this.questionLabelMap),firstInGroupIndexes:JSON.stringify(this.firstInGroupIndexes),totalExam:1,cdnExamFile:this.whiteListCurrentExamFileUploadedUrl,trackEdit:this.countClickApplyEdit>0?JSON.stringify({countClickApplyEdit:this.countClickApplyEdit}):"",examHeader:this.examHeader,cutData:this.rootQuestionInfo,editorStatus:4,startQuestionIndex:this.questionList.length>0&&this.questionList[0].question.label>0?this.questionList[0].question.label:1,classroomIds:pe?[Number(pe)]:void 0,startTime:this.checkExamToProgram?Ke:void 0,endTime:this.checkExamToProgram?et:void 0,isPublished:this.checkExamToProgram?1:void 0,minutes:this.checkExamToProgram?60:void 0,purposeId:this.checkExamToProgram?12:void 0,purposeNote:this.checkExamToProgram?Je:void 0};this.examService.apiExamSaveObjPost(gt,se).subscribe(ue=>{if(1==ue.success){let Te=this.commonService.myTranslateInstant("lang_auto_luu_de_thi_thanh_cong_dang_chuyen_huong")??"";this.arrStatusFileExam=[`${Te} ...`],setTimeout(()=>{jQuery("html").css("overflow","auto");const Ee=this.getMyQueryParam("sessionId"),Ue=`/admin/testbank/document-management/0/${this.categoriesIdParam}/1`;if(!this.commonService.isNullUndefinedOrEmpty(Oe)&&!pe)return this.programFormService.ExamExerciseOfProgramToSessionStorage(ue.data?.obj?.id??0,ue.data?.obj?.name??"","exam"),void(window.location.href=this.commonService.getLocalRouter(`/business/edit-educational-program/${Be}?indexSession=${Oe}`));pe?Be&&Ee?this.saveDocumentTrainingCenter(Number(pe),Number(Be),Number(Fe),ue.data?.obj):this.commonService.myNavigationWithQueryString("/admin/testbank/action-online-offline/"+this.categoriesIdParam+"/"+ue.data?.obj?.hashId,`?backto=${encodeURIComponent(Ue)}&classroomId=${pe}`):this.commonService.myNavigationWithQueryString("/admin/testbank/action-online-offline/"+this.categoriesIdParam+"/"+ue.data?.obj?.hashId,`?backto=${encodeURIComponent(Ue)}`)},1500)}else this.showErrorSnack("lang_auto_tao_de_thi_khong_thanh_cong_vui_long_thu_lai"),this.isShowLoadingFileExam=!1})}}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(bC),e.Y36(E.gz),e.Y36(qi.C),e.Y36(un.aE),e.Y36(Wr.W),e.Y36(ya.U),e.Y36(Ss.CM),e.Y36(un.Oe),e.Y36(Mv.V),e.Y36(tr.E),e.Y36(fr.i),e.Y36(Lv.z),e.Y36(Ar.O),e.Y36(oa.n),e.Y36(vC.x0),e.Y36(un._0),e.Y36(Ud.E),e.Y36(_r.um),e.Y36(Xr),e.Y36(Mo.D),e.Y36(qs.t),e.Y36(Us.a))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-cropper"]],viewQuery:function(t,i){if(1&t&&(e.Gf(qC,5),e.Gf(RC,5),e.Gf(zC,5),e.Gf(HC,5),e.Gf(JC,5),e.Gf(KC,5)),2&t){let a;e.iGM(a=e.CRH())&&(i.hiddenInput=a.first),e.iGM(a=e.CRH())&&(i.iframePdf=a.first),e.iGM(a=e.CRH())&&(i.resizeBar=a.first),e.iGM(a=e.CRH())&&(i.boxLeftFile=a.first),e.iGM(a=e.CRH())&&(i.parentResize=a.first),e.iGM(a=e.CRH())&&(i.maskLayer=a.first)}},features:[e.qOj],decls:4,vars:3,consts:[["browserSupported",""],["class","alert alert-danger alert-danger-note p-5","style","font-size: 18px",4,"ngIf","ngIfElse"],[4,"ngIf"],[3,"hidden"],[3,"headerBackToLink","showInput","showConfirmButton","examName","handleConfirm","handleCancel"],["id","box-create-action"],[1,"container-fluid","mt-3"],[1,"flex","w-full"],["parentResize",""],["id","box-left-file",3,"ngStyle"],["boxLeftFile",""],["id","box-left-file-input","type","file","accept","application/pdf",1,"hiddenIpt"],["class","flex justify-between items-center dt-header",4,"ngIf"],["class","p-2 mt-2 mb-2 text-center alert alert-info",4,"ngIf"],["class","p-2 mt-2 mb-2 alert alert-danger text-center alert-danger-note",4,"ngIf"],[1,"box-file-content"],["id","box-left-file-drop","class","box-file-content-file_drop",4,"ngIf"],["id","box-left-file-pdf",1,"box-file-content--viewer",2,"display","none"],["id","box-left-file-canvas",1,"box-file-content--viewer",2,"display","none"],["class","list-question-box","id","list-question-box-viewer","style","width: 100%",4,"ngIf"],["style","width: 100%","class","m-3 pt-5 p-3 alert text-center text-danger",4,"ngIf"],["id","resizeBar",3,"mousedown"],["resizeBar",""],["id","iframePdf",3,"hidden"],["iframePdf",""],[1,"maskLayer"],["maskLayer",""],["frameBorder","0","scrolling","auto","height","100%","width","100%",3,"src"],["class","box-file-content-file_preview--blur_status","style","position: fixed; top: 0; left: 0; width: 100%; height: 100vh; background: #2632386b; color: white; z-index: 999",4,"ngIf"],[3,"ngIf"],[1,"flex","justify-between","items-center","dt-header"],[1,"box-control"],["color","primary",1,"example-margin",3,"matTooltip","color","formControl"],["class","pagination",4,"ngIf"],["azt-track-service","create-exam-with-file-pdf-yF9GeAl2MK",1,"btnTotal",3,"click"],[1,"flex"],["azt-track-service","create-exam-with-file-pdf-3v8Xi_AQgI","class","clickable",3,"matTooltip","click",4,"ngIf"],["azt-track-service","create-exam-with-file-pdf-CHv67fED6q","class","clickable",3,"matTooltip","click",4,"ngIf"],["azt-track-service","create-exam-with-file-pdf-8xKwGSyZ8J",1,"clickable","ml-3",3,"matTooltip","click"],[1,"flex","justify-between","items-center"],[1,"form-enter-question","ml-1"],["id","inputQuestionNum","type","number",2,"padding","0",3,"formControl","matAutocomplete","keyup.enter"],["id","cropperFilterQuestion"],["auto","matAutocomplete"],["azt-track-service","create-exam-with-file-pdf-RVT14CTXbp",3,"value","click",4,"ngFor","ngForOf"],["type","hidden"],["hiddenInput",""],["azt-track-service","create-exam-with-file-pdf-E8H8iTfHP6","id","btnEdits","mat-raised-button","",3,"click"],[1,"pagination"],["type","number","name","inputPage","id","",3,"ngModel","keyup.enter","ngModelChange"],["azt-track-service","create-exam-with-file-pdf-j3HtJoLN74",1,"clickable",3,"ngStyle","matTooltip","click"],["azt-track-service","create-exam-with-file-pdf-i02GVPZfkg",1,"clickable",3,"ngStyle","matTooltip","click"],["azt-track-service","create-exam-with-file-pdf-3v8Xi_AQgI",1,"clickable",3,"matTooltip","click"],["azt-track-service","create-exam-with-file-pdf-CHv67fED6q",1,"clickable",3,"matTooltip","click"],["azt-track-service","create-exam-with-file-pdf-RVT14CTXbp",3,"value","click"],[1,"p-2","mt-2","mb-2","text-center","alert","alert-info"],[2,"vertical-align","bottom"],[1,"error-block"],[4,"ngFor","ngForOf"],[1,"text-right","mt-1"],["azt-track-service","create-exam-with-file-pdf-8zeZ9XDtb_",1,"btn","btn-primary","btn-sm",3,"click"],[1,"p-2","mt-2","mb-2","alert","alert-danger","text-center","alert-danger-note"],["azt-track-service","create-exam-with-file-pdf-iQvwZJTrjj",1,"clickable","mt-1",3,"matTooltip","click"],["class","mt-1",4,"ngIf"],[1,"mt-1"],["id","box-left-file-drop",1,"box-file-content-file_drop"],[1,"box-file-content-file_drop--input"],[1,"box-file-content-file_drop--input-icon"],["id","download-link-item",3,"dataUrl","target","fileName","fileDescription","click"],["id","list-question-box-viewer",1,"list-question-box",2,"width","100%"],["id","examHeader","class","mb-4","style","padding: 15px; padding-top: 0",4,"ngIf"],["class","list-question-box-item",4,"ngFor","ngForOf"],["class","pagination mb-5",4,"ngIf"],["id","examHeader",1,"mb-4",2,"padding","15px","padding-top","0"],["class","remove-layer",4,"ngIf"],["azt-track-service","create-exam-with-file-pdf--HD0um3BB54",1,"clear-icon",3,"matTooltip","click"],["alt","",2,"width","100%",3,"src"],[1,"remove-layer"],[1,"list-question-box-item"],["class","w-100 question-wrapper",4,"ngIf"],[1,"w-100","question-wrapper"],["class","alert alert-danger alert-danger-note","style","margin-bottom: -2px",4,"ngIf"],["class","list-question-box-item__img group pt-4 mb-2",3,"hidden",4,"ngIf"],[1,"list-question-box-item__img"],["azt-track-service","create-exam-with-file-pdf-n9OHfjQzIw6",1,"clear-icon",3,"matTooltip","click"],["class","cr-question-pieces",4,"ngIf"],[1,"list-question-box-item__control"],[1,"list-question-box-item__control_flex","position-relative","bg-slate-300","dark:bg-darkmode-400",3,"ngClass"],[1,"flex","items-center"],[2,"font-size","16px","margin-right","10px"],[1,"form-select","form-select-sm",2,"width","110px",3,"change"],[3,"value","selected"],["class","text-center flex items-center",4,"ngIf"],["class","text-center",4,"ngIf"],[2,"font-size","16px"],["appReplaceCommas","","type","text",1,"form-control","inp",3,"value","input"],["azt-track-service","create-exam-with-file-pdf-6YL1FMa2jmG",1,"clickable",3,"matTooltip","click"],["azt-track-service","create-exam-with-file-pdf-bnQZ8KjeH-4",1,"attch-icon","clickable","flex",3,"click"],[1,"box-file-content-file_drop--input-icon",3,"matTooltip"],["azt-track-service","create-exam-with-file-pdf-4SNs7lyxp-f",1,"clickable","flex",3,"click"],["class","box-file-content-file_drop--input-icon",3,"matTooltip",4,"ngIf"],["style","margin-top: -5px; margin-bottom: 5px; border-radius: 5px",4,"ngIf"],[1,"alert","alert-danger","alert-danger-note",2,"margin-bottom","-2px"],[1,"list-question-box-item__img","group","pt-4","mb-2",3,"hidden"],["azt-track-service","create-exam-with-file-pdf-M_eEZPuQIDb","class","clear-icon",3,"matTooltip","click",4,"ngIf"],["azt-track-service","create-exam-with-file-pdf-8l5PAIjnvxI","class","clear-icon",3,"matTooltip","click",4,"ngIf"],["azt-track-service","create-exam-with-file-pdf-9FChZOhg2jy",3,"click"],["class","mixInGroup",3,"matTooltip",4,"ngIf"],["class","mixInGroupNotif",4,"ngIf"],["loading","lazy","clickable","","alt","",3,"matTooltip","src"],["azt-track-service","create-exam-with-file-pdf-M_eEZPuQIDb",1,"clear-icon",3,"matTooltip","click"],["azt-track-service","create-exam-with-file-pdf-8l5PAIjnvxI",1,"clear-icon",3,"matTooltip","click"],[1,"mixInGroup",3,"matTooltip"],[1,"mixInGroupNotif"],[1,"cr-question-pieces"],[1,"cr-question-label","mb-2"],["loading","lazy","alt","",3,"ngStyle","src"],[1,"cr-question","mb-2"],["loading","lazy","alt","",2,"width","100%","height","auto",3,"width","height","src"],[1,"cr-answers"],["class","cr-aswr",4,"ngFor","ngForOf"],[1,"cr-aswr"],[1,"mb-2"],["loading","lazy","alt","",2,"margin-right","10px","margin-bottom","5px",3,"ngStyle","src"],[1,"text-center","flex","items-center"],["azt-track-service","create-exam-with-file-pdf-uE33psGY4hd","class","btn btn-ans",3,"ngClass","click",4,"ngFor","ngForOf"],["azt-track-service","create-exam-with-file-pdf-uE33psGY4hd",1,"btn","btn-ans",3,"ngClass","click"],[1,"text-center"],["azt-track-service","create-exam-with-file-pdf-KOgDIAa3KdB",1,"btnAttQuestion",3,"click"],["class","box p-2 mt-2",4,"ngIf"],["class","alert alert-danger alert-danger-note",4,"ngIf"],[1,"box","p-2","mt-2"],[1,"alert","alert-danger","alert-danger-note"],["azt-track-service","create-exam-with-file-pdf-AlAR7KqulJm","href","https://docs.azota.vn/docs/trung-tam-tro-giup/tao-de-thi/tao-de-thi-khi-cau-hoi-khong-co-dap-an-de-chon/","target","_blank"],["style","margin-bottom: 50px; opacity: 0.8","class","list-question-box-item__img_result",4,"ngIf","ngIfElse"],["noHelp",""],[1,"list-question-box-item__img_result",2,"margin-bottom","50px","opacity","0.8"],[3,"src"],[2,"color","rgb(219, 219, 219)","padding","8px 20px"],[2,"margin-top","-5px","margin-bottom","5px","border-radius","5px"],["type","file","name","",1,"hiddenIpt",3,"id","change"],["azt-track-service","create-exam-with-file-pdf-k47eFWP9HE4","class","dropFileAttachQuestion",3,"click",4,"ngIf"],["class","dropFileAttachQuestion bg-white",4,"ngIf"],["azt-track-service","create-exam-with-file-pdf-k47eFWP9HE4",1,"dropFileAttachQuestion",3,"click"],[1,"dropFileAttachQuestion","bg-white"],["class","preview",4,"ngFor","ngForOf"],[1,"preview"],["controls",""],["type","audio/mpeg",3,"src"],["azt-track-service","create-exam-with-file-pdf-IopYkUBesXC",2,"margin-left","10px","background","#f06292","color","white","padding","0 10px","border-radius","5px","font-size","10px",3,"click"],[1,"pagination","mb-5"],["azt-track-service","create-exam-with-file-pdf-g_6T5-6RWqm",1,"clickable",3,"ngStyle","matTooltip","click"],["azt-track-service","create-exam-with-file-pdf-lPIlOAl7wnQ",1,"clickable",3,"ngStyle","matTooltip","click"],[1,"m-3","pt-5","p-3","alert","text-center","text-danger",2,"width","100%"],[2,"font-size","50px","width","50px","height","50px"],["azt-track-service","create-exam-with-file-pdf-RPU348FbyDo",1,"btn","btn-primary",3,"click"],[1,"box-file-content-file_preview--blur_status",2,"position","fixed","top","0","left","0","width","100%","height","100vh","background","#2632386b","color","white","z-index","999"],[1,"text-center","box-file-content-file_preview--blur_status-frame"],[2,"display","flex","justify-content","center","margin-top","5rem"],["color","accent",3,"strokeWidth","diameter"],["class","span-status","style","font-size: 20px; margin-top: 30px",4,"ngFor","ngForOf"],[1,"span-status",2,"font-size","20px","margin-top","30px"],[2,"background","#607d8b","padding","10px","border-radius","5px"],[1,"content","relative",2,"border-radius","0"],[3,"listQuestion","headerPosition","listCanvas","applyEdit"],[1,"alert","alert-danger","alert-danger-note","p-5",2,"font-size","18px"],[3,"startIndexQuestion","data","type","closeDialog","goToQuestion"]],template:function(t,i){if(1&t&&(e.YNc(0,X6,29,21,"ng-template",null,0,e.W1O),e.YNc(2,e5,3,4,"div",1),e.YNc(3,t5,2,3,"div",2)),2&t){const a=e.MAs(1);e.xp6(2),e.Q6J("ngIf",!i.isSupportedBrowser)("ngIfElse",a),e.xp6(1),e.Q6J("ngIf",i.dataExamInfo.isShow)}},dependencies:[F.mk,F.sg,F.O5,F.PC,Bv.XC,js.ey,Bv.ZL,ds.lW,wC.oG,Yo.Hw,Pv.Ou,Ai.gM,h._Y,h.YN,h.Kr,h.Fj,h.wV,h.JJ,h.JL,h.On,h.F,h.oH,yC,Fx,Qv.P,Qg.Z,jC,F.Ov,ye.JV,ye.QN,ye.CR,ye.Ju,ye.XA,ye.MZ,ye.Nk],styles:[".span-status[_ngcontent-%COMP%]{font-size:18px;color:#fff}.box-file-content-file_preview--blur_status[_ngcontent-%COMP%]{left:0;position:absolute;top:0;width:100%;background:rgba(0,0,0,.5882352941);height:100%;padding-top:20%}mat-icon.clear-icon[_ngcontent-%COMP%]{font-size:15px;color:#999;position:absolute;right:5px;z-index:10;top:5px;height:unset;width:unset}mat-icon.clear-icon[_ngcontent-%COMP%]:hover{cursor:pointer}.remove-layer[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;top:0;left:0;z-index:8;background-color:#000000d1;display:flex;justify-content:center;align-items:center;color:#fff;font-size:1em}@keyframes _ngcontent-%COMP%_animatefadeIn{0%{top:0;opacity:0}to{top:0;opacity:1}}#examHeader[_ngcontent-%COMP%]{background:#fff;border-radius:7px;overflow:hidden;position:relative}#box-create-action[_ngcontent-%COMP%]   .box-file[_ngcontent-%COMP%]   .box-control[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:45px;margin-top:-15px}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]{background:inherit;box-shadow:none;height:calc(100vh - 110px);display:flex}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_drop[_ngcontent-%COMP%]{cursor:pointer;width:100%;display:flex;justify-content:center;align-items:center;color:#5c5c5c}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_drop--input[_ngcontent-%COMP%]{text-align:center}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .is-dragover[_ngcontent-%COMP%]{background:#e4e4e4!important}#box-create-action[_ngcontent-%COMP%]   .box-file-content--viewer[_ngcontent-%COMP%]{overflow:auto;position:relative;width:100%}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box[_ngcontent-%COMP%]{overflow-y:scroll;scroll-behavior:smooth;overflow-x:hidden;background:#323639;padding:4px}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item[_ngcontent-%COMP%]{margin-bottom:20px}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item__img[_ngcontent-%COMP%]{position:relative;padding:10px;border-radius:5px 5px 0 0;overflow:hidden;background-color:#fff}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item__img.group[_ngcontent-%COMP%]{border-radius:5px}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item__img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;cursor:default;border:1px solid #c0c0c0}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item__img_result[_ngcontent-%COMP%]{padding:5px 0;background:white;border-radius:0 0 5px 5px;border:1px solid #414548}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item__img_result[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;cursor:default}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item__control_flex[_ngcontent-%COMP%]{display:flex;align-items:center;border-radius:0 0 5px 5px;padding:8px 20px;justify-content:space-between}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item__control_flex[_ngcontent-%COMP%]   .btn-ans[_ngcontent-%COMP%]{background:white;height:30px;width:30px;border-radius:50%;margin-left:5px;color:rgb(var(--color-slate-800)/var(--tw-text-opacity))}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item__control_flex[_ngcontent-%COMP%]   .btn-ans-result[_ngcontent-%COMP%]{display:inline-flex!important;color:#fff;background-color:#f39c12;padding:15px}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item__control_flex[_ngcontent-%COMP%]   .btn-remove[_ngcontent-%COMP%]{background:red;color:#fff;box-shadow:inset 0 0 58px 8px #00000012}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item__control_flex[_ngcontent-%COMP%]   .btn-edit[_ngcontent-%COMP%]{background:#f59c12;color:#fff}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item__control_flex[_ngcontent-%COMP%]   .inp[_ngcontent-%COMP%]{margin-left:10px;width:70px;text-align:center;border:none;height:25px}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item__control_flex[_ngcontent-%COMP%]   .select[_ngcontent-%COMP%]{border:none;height:25px;background-color:#e0e0e0;border-radius:5px;background-position:right 0rem center!important;color:#000;padding:0 5px;padding-right:20px!important;font-size:revert!important}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item__control_flex[_ngcontent-%COMP%]   .select[_ngcontent-%COMP%]:focus-visible{outline:none}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item__control_flex[_ngcontent-%COMP%]   .inp-result[_ngcontent-%COMP%]{margin-left:10px;width:-moz-fit-content;width:fit-content;height:25px;padding:3px 10px;color:#949494;font-size:small}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item[_ngcontent-%COMP%]   .link-merge-image-control[_ngcontent-%COMP%]{margin-bottom:10px;text-align:center;margin-top:-10px}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item[_ngcontent-%COMP%]   .link-merge-image-control[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{cursor:pointer}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item[_ngcontent-%COMP%]   .link-merge-image-control[_ngcontent-%COMP%]:hover{color:#f06292}#box-create-action[_ngcontent-%COMP%]   .inp-name-root[_ngcontent-%COMP%]{position:fixed;top:0;width:55%;left:170px;display:flex;justify-content:center;align-items:center;height:45px}#box-create-action[_ngcontent-%COMP%]   .inp-name-root[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-width:1px;border-style:solid;border-radius:5px;border-color:#d6d6d6;font-weight:500;font-size:13px;text-align:center;width:85%;padding:4px}#box-create-action[_ngcontent-%COMP%]   .inp-name-root[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus-visible{outline:none}#box-create-action[_ngcontent-%COMP%]   .btnAttQuestion[_ngcontent-%COMP%]{background:#f59c12;height:25px;display:flex;align-items:center;padding:0 10px;border-radius:3px;cursor:pointer}#box-create-action[_ngcontent-%COMP%]   .dropFileAttachQuestion[_ngcontent-%COMP%]{display:flex;height:88px;background:#ececec;justify-content:center;align-items:center;border-bottom:1px solid #44beb5;cursor:pointer;border-radius:5px 5px 0 0}#box-create-action[_ngcontent-%COMP%]   .dropFileAttachQuestion[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}#box-create-action[_ngcontent-%COMP%]   .dropFileAttachQuestion[_ngcontent-%COMP%]   audio[_ngcontent-%COMP%]{height:40px}#box-create-action[_ngcontent-%COMP%]   .dropFileAttachQuestion[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{height:80px;background:white;padding:5px;display:flex;justify-content:center;align-items:center;border-radius:3px;margin-left:5px}#box-create-action[_ngcontent-%COMP%]   .dropFileAttachQuestion[_ngcontent-%COMP%]   .preview-box[_ngcontent-%COMP%]{text-align:center}.isShowHelp[_ngcontent-%COMP%]{display:block!important}.question-wrapper[_ngcontent-%COMP%]{position:relative}.question-wrapper[_ngcontent-%COMP%]   .ox-questions-item__control-sub[_ngcontent-%COMP%]{position:absolute;top:2px;right:2px;z-index:10;color:#fff!important;border-radius:50%;width:20px;height:20px;display:flex;align-items:center;justify-content:center}.question-wrapper[_ngcontent-%COMP%]   .ox-questions-item__control-sub[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff;font-size:15px}.img-group[_ngcontent-%COMP%]{position:relative}.img-group[_ngcontent-%COMP%]   .mixInGroupNotif[_ngcontent-%COMP%]{display:none}.img-group[_ngcontent-%COMP%]:hover   .mixInGroupNotif[_ngcontent-%COMP%]{display:block;background-color:#d63031}.mixInGroup[_ngcontent-%COMP%], .mixInGroupNotif[_ngcontent-%COMP%]{position:absolute;width:80px;height:50px;top:-30px;left:-46px;background-color:#d63031d4;transform:rotate(-45deg);color:#fff;font-size:9px;text-align:center;padding-top:30px}.dt-header[_ngcontent-%COMP%]{background:#323639;color:#fff;padding:12px}#examNameInput[_ngcontent-%COMP%]{position:absolute;width:110%;left:-10%;top:-18px;border:1px solid #e0e0e0;border-radius:3px;padding:0 5px;height:36px}#examSaveBtns[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center;position:absolute;z-index:9;width:50%;right:-50%;top:-18px}#examSaveBtns[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]{padding-left:50px;padding-right:50px;background-color:#2361ae}#examSaveBtns[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]:hover{background-color:#1e5395}#examSaveBtns[_ngcontent-%COMP%]   .btn-save.mat-button-disabled[_ngcontent-%COMP%]{background-color:#0000001f}#examSaveBtns[_ngcontent-%COMP%]   .btn-reload[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px}#box-manual[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;align-items:center;position:absolute;z-index:9;width:50%;right:100%;top:-16px}#box-manual[_ngcontent-%COMP%]   #buttonHD[_ngcontent-%COMP%]{color:#2361ae;border:none}.error-block[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center}#btnEdits[_ngcontent-%COMP%]:hover{background-color:#e7e7e7}.pagination[_ngcontent-%COMP%]{min-width:130px;display:flex;align-items:center;justify-content:space-between;max-width:230px;color:#fff}.pagination[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:25px;text-align:center;border:none;background-color:#414548;color:#fff}.pagination.mb-5[_ngcontent-%COMP%]{margin:0 auto}.alert-danger-note[_ngcontent-%COMP%]{display:revert!important;border:1px solid transparent!important;border-radius:.25rem!important;color:#721c24!important;background-color:#f8d7da!important;border-color:#f5c6cb!important}#inputQuestionNum[_ngcontent-%COMP%]{height:22px;width:100%;text-align:center;border:none;margin-left:5px;min-width:30px;max-width:50px;border-radius:3px;color:rgb(var(--color-slate-800)/var(--tw-text-opacity))}#resizeBar[_ngcontent-%COMP%]{width:5px;transition:background-color .5s}#resizeBar[_ngcontent-%COMP%]:hover{background-color:#2262ae;cursor:col-resize}#resizeBar.hover[_ngcontent-%COMP%]{background-color:#2262ae}#iframePdf[_ngcontent-%COMP%]{position:relative;flex:auto}#iframePdf[_ngcontent-%COMP%]   .maskLayer[_ngcontent-%COMP%]{position:absolute;width:0;height:100%;left:0}span.attch-icon[_ngcontent-%COMP%]{position:relative}span.attch-icon[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]{position:absolute;bottom:-12px;left:50%;margin-left:-7px;color:#ececec}"]}),n})(),i5=(()=>{class n extends mt.e{ngOnInit(){}constructor(t,i){super(i,t),this.dialogRef=t,this.data=i,this.isNotShowAgain=new h.NI(!1)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(U.so,8),e.Y36(U.WI,8))},n.\u0275cmp=e.Xpm({type:n,selectors:[["user-manual"]],features:[e.qOj],decls:41,vars:32,consts:[[1,"box","p-5"],[2,"min-height","55vh"],[1,"text-center","mb-2"],[1,"font-medium","text-lg"],[1,"mt-2"],[2,"list-style","inherit","margin","inherit","padding","auto"],["src","assets/images/pdf-debug-v2.png","alt","",1,"mb-2",2,"max-width","100%"],[1,"mb-0"],["align","end"],[1,"flex","items-center","w-full",2,"justify-content","space-between"],[1,"form-check"],["id","is-not-show-again","type","checkbox",1,"form-check-input",3,"formControl"],["for","is-not-show-again",1,"form-check-label"],["azt-track-service","create-exam-with-file-pdf-WfkRk3L46OB",1,"btn","btn-primary","w-24",3,"mat-dialog-close"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"azt-mat-dialog-content")(2,"div",1)(3,"div",2)(4,"span",3),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()(),e.TgZ(7,"div",4)(8,"p"),e._uU(9),e.ALo(10,"mytranslate"),e.qZA(),e.TgZ(11,"p"),e._uU(12),e.ALo(13,"mytranslate"),e.qZA(),e.TgZ(14,"ul",5)(15,"li"),e._uU(16),e.ALo(17,"mytranslate"),e.qZA(),e.TgZ(18,"li"),e._uU(19),e.ALo(20,"mytranslate"),e.qZA(),e.TgZ(21,"li"),e._uU(22),e.ALo(23,"mytranslate"),e.qZA()(),e._UZ(24,"img",6),e.TgZ(25,"p"),e._uU(26),e.ALo(27,"mytranslate"),e.qZA(),e.TgZ(28,"p",7),e._uU(29),e.ALo(30,"mytranslate"),e.qZA()()()(),e.TgZ(31,"mat-dialog-actions",8)(32,"div",9)(33,"div",10),e._UZ(34,"input",11),e.TgZ(35,"label",12),e._uU(36),e.ALo(37,"mytranslate"),e.qZA()(),e.TgZ(38,"button",13),e._uU(39),e.ALo(40,"mytranslate"),e.qZA()()()()),2&t&&(e.xp6(5),e.hij(" ",e.lcZ(6,12,"lang_testbank_create_exam_width_file_pdf_tutorial_pdf")," "),e.xp6(4),e.hij("",e.lcZ(10,14,"lang_testbank_create_exam_width_file_pdf_note_one"),"."),e.xp6(3),e.hij("",e.lcZ(13,16,"lang_testbank_create_exam_width_file_pdf_note_two"),":"),e.xp6(4),e.Oqu(e.lcZ(17,18,"lang_testbank_create_exam_width_file_pdf_label_question")),e.xp6(3),e.Oqu(e.lcZ(20,20,"lang_testbank_create_exam_width_file_pdf_lable_answer")),e.xp6(3),e.Oqu(e.lcZ(23,22,"lang_testbank_create_exam_width_file_pdf_content_area")),e.xp6(4),e.hij("",e.lcZ(27,24,"lang_testbank_create_exam_width_file_pdf_note_three")," "),e.xp6(3),e.hij("",e.lcZ(30,26,"lang_testbank_create_exam_width_file_pdf_note_four"),"."),e.xp6(5),e.Q6J("formControl",i.isNotShowAgain),e.xp6(2),e.hij(" ",e.lcZ(37,28,"lang_testbank_create_exam_width_file_pdf_not_view")," "),e.xp6(2),e.Q6J("mat-dialog-close",i.isNotShowAgain.value),e.xp6(1),e.Oqu(e.lcZ(40,30,"lang_button_close")))},dependencies:[U.ZT,U.H8,h.Wl,h.JJ,h.oH,Dr.R,ye.JV],encapsulation:2}),n})();var o5=I(71026),wo=I(98129),cr=I(89156),a5=I(56260),Fv=I(52467),r5=I(97694),Nv=I(4021),s5=I(28079);function l5(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1," , "),e.qZA())}function c5(n,o){if(1&n&&(e.O4$(),e.kcU(),e.TgZ(0,"span")(1,"span",13),e._uU(2),e.qZA(),e.YNc(3,l5,2,0,"span",10),e.qZA()),2&n){const t=o.$implicit,i=o.index,a=e.oxw();e.xp6(2),e.hij(' "',t.classroom.name,'" '),e.xp6(1),e.Q6J("ngIf",a.classroomErrorObjs.length>1&&i!==a.classroomErrorObjs.length-1)}}function u5(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.O4$(),e.TgZ(3,"svg",14),e._UZ(4,"polyline",15),e.qZA()()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_xem_chi_tiet_loi")," "))}function d5(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.O4$(),e.TgZ(3,"svg",14),e._UZ(4,"polyline",16),e.qZA()()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_an_xem_chi_tiet_loi")," "))}function m5(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1," , "),e.qZA())}function p5(n,o){if(1&n&&(e.TgZ(0,"span",29)(1,"span",13),e._uU(2),e.qZA(),e.YNc(3,m5,2,0,"span",10),e.qZA()),2&n){const t=o.$implicit,i=o.index,a=e.oxw(2).$implicit;e.xp6(2),e.hij(' "',t,'" '),e.xp6(1),e.Q6J("ngIf",a.duplicatedStudentCodes&&a.duplicatedStudentCodes.length>1&&i!==a.duplicatedStudentCodes.length-1)}}function h5(n,o){if(1&n&&(e.TgZ(0,"div",27)(1,"span"),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.YNc(4,p5,4,2,"span",28),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(2),e.hij(" ","- "+e.lcZ(3,2,"lang_auto_so_bao_danh_bi_trung")+": ",""),e.xp6(2),e.Q6J("ngForOf",t.duplicatedStudentCodes)}}function A5(n,o){1&n&&(e.TgZ(0,"div",27),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ","- "+e.lcZ(2,1,"lang_auto_hoc_sinh_khong_co_so_bao_danh")," "))}function _5(n,o){if(1&n&&(e.TgZ(0,"div",24)(1,"div",17)(2,"div",25)(3,"span"),e._uU(4),e.ALo(5,"mytranslate"),e.qZA(),e.TgZ(6,"span",13),e._uU(7),e.qZA()(),e.YNc(8,h5,5,4,"div",26),e.YNc(9,A5,3,3,"div",26),e.qZA()()),2&n){const t=o.$implicit;e.xp6(4),e.hij(" ",e.lcZ(5,4,"lang_auto_cac_loi_so_bao_danh_trong_lop")+" "," "),e.xp6(3),e.hij(" ",'"'+t.classroom.name+'": '," "),e.xp6(1),e.Q6J("ngIf",t.isDuplicatedStudentCode),e.xp6(1),e.Q6J("ngIf",t.isMissingStudentCode)}}function f5(n,o){1&n&&(e.TgZ(0,"span"),e.O4$(),e.TgZ(1,"svg",30),e._UZ(2,"path",31)(3,"path",32)(4,"path",33),e.qZA()())}function g5(n,o){1&n&&(e.TgZ(0,"span",34),e._UZ(1,"azt-loading-ui"),e.qZA())}function x5(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",17)(1,"div",18),e.YNc(2,_5,10,6,"div",19),e.qZA(),e.TgZ(3,"div",20)(4,"button",21),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.getStudentListByClassroomIds(a.classroomIds))}),e.YNc(5,f5,5,0,"span",10),e.YNc(6,g5,2,0,"span",22),e.TgZ(7,"span",23),e._uU(8),e.ALo(9,"mytranslate"),e.qZA()()()()}if(2&n){const t=e.oxw();e.xp6(2),e.Q6J("ngForOf",t.classroomErrorObjs),e.xp6(3),e.Q6J("ngIf",!t.loadingExport),e.xp6(1),e.Q6J("ngIf",t.loadingExport),e.xp6(2),e.hij(" ",e.lcZ(9,4,"lang_auto_tai_danh_sach_hoc_sinh_loi")," ")}}function b5(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"azt-export-excel-for-student-list",35),e.NdJ("exportDataDone",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.exportStudentListDone(a))}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("objs",t.exportStudentObjs)("type",1)}}let v5=(()=>{class n extends xe.Q{constructor(t,i){super(),this.shareFileFlutterService=t,this.studentProfileV2Service=i,this.classroomErrorObjs=[],this.classroomIds="",this.examId=0,this.checkPostParam=!1,this.showExpandError=!1,this.loadingExport=!1}getStudentListByClassroomIds(t){this.loadingExport=!0,this.waitDestroy(this.studentProfileV2Service.apiStudentProfileV2GetStudentsGet(t,this.checkPostParam?void 0:this.examId).subscribe(i=>{if(i.success){this.exportStudentObjs=i.data;let a=this.exportStudentObjs?.length??0;if(this.exportStudentObjs){let r=[],s=[];this.exportStudentObjs.forEach((l,c,u)=>{r.find(m=>m.identificationNumber===l.identificationNumber)?s.push(l):r.push(l)});for(let l=0;l<a;l++)if(this.exportStudentObjs[l].identificationNumber)for(let c=0;c<s.length;c++)this.exportStudentObjs&&this.exportStudentObjs[l].identificationNumber===s[c].identificationNumber&&(this.exportStudentObjs[l].errorImportIdentification="lang_auto_trung_so_bao_danh");else this.exportStudentObjs[l].errorImportIdentification="lang_auto_khong_co_so_bao_danh"}if(this.exportStudentObjs)for(let r=0;r<a;r++)if(this.exportStudentObjs[r].identificationNumber)for(let s=r+1;s<a;s++)this.exportStudentObjs&&this.exportStudentObjs[r].identificationNumber===this.exportStudentObjs[s].identificationNumber&&(this.exportStudentObjs[r].errorImportIdentification="lang_auto_trung_so_bao_danh");else this.exportStudentObjs[r].errorImportIdentification="lang_auto_khong_co_so_bao_danh"}else this.showErrorSnack(i.message??"");this.loadingExport=!1}))}exportStudentListDone(t){let i=this.commonService.createFileNameExportFile(["list-student","danh-sach-hoc-sinh"])+".xlsx";this.shareFileFlutterService.shareFileWithBlob(t,i)}toggleExpandErrors(){this.showExpandError=!this.showExpandError}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Ac.g),e.Y36(Nv.LU))},n.\u0275cmp=e.Xpm({type:n,selectors:[["azt-errors-identification"]],inputs:{classroomErrorObjs:"classroomErrorObjs",classroomIds:"classroomIds",examId:"examId",checkPostParam:"checkPostParam"},features:[e.qOj],decls:18,vars:11,consts:[[1,"azt-error-block"],[1,"flex","text-pending"],[1,"text-lg"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","icon-name","alert-triangle","data-lucide","alert-triangle",1,"lucide","lucide-alert-triangle","w-6","h-6","mr-2","flex-none"],["d","M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z"],["x1","12","y1","9","x2","12","y2","13"],["x1","12","y1","17","x2","12.01","y2","17"],[4,"ngFor","ngForOf"],[1,"mt-2","error-detail"],["azt-track-service","azt-errors-identification-ZElYECOq3mc",1,"btn-text-primary","font-medium",3,"click"],[4,"ngIf"],["class","mt-2",4,"ngIf"],[3,"objs","type","exportDataDone",4,"ngIf"],[1,"font-medium"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide"],["points","6 9 12 15 18 9"],["points","18 15 12 9 6 15"],[1,"mt-2"],[1,"alert","alert-outline-danger","show"],["class","text-md",4,"ngFor","ngForOf"],[1,"mt-3"],["azt-track-service","azt-errors-identification-85xomF_be8D",1,"btn-text-primary","font-medium",3,"click"],["class","w-5 h-5 inline-block mr-2",4,"ngIf"],[1,"text-primary"],[1,"text-md"],[1,"az-error-title"],["class","mt-1 text-xs",4,"ngIf"],[1,"mt-1","text-xs"],["class","text-danger",4,"ngFor","ngForOf"],[1,"text-danger"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-5","h-5","lucide","mr-2"],["d","M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"],["d","M12 12v9"],["d","m8 17 4 4 4-4"],[1,"w-5","h-5","inline-block","mr-2"],[3,"objs","type","exportDataDone"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e.O4$(),e.TgZ(3,"svg",3),e._UZ(4,"path",4)(5,"line",5)(6,"line",6),e.qZA(),e._uU(7),e.ALo(8,"mytranslate"),e.YNc(9,c5,4,2,"span",7),e._uU(10),e.ALo(11,"mytranslate"),e.qZA()(),e.kcU(),e.TgZ(12,"div",8)(13,"button",9),e.NdJ("click",function(){return i.toggleExpandErrors()}),e.YNc(14,u5,5,3,"span",10),e.YNc(15,d5,5,3,"span",10),e.qZA(),e.YNc(16,x5,10,6,"div",11),e.qZA()(),e.YNc(17,b5,1,2,"azt-export-excel-for-student-list",12)),2&t&&(e.xp6(7),e.hij(" ",e.lcZ(8,7,"lang_auto_so_bao_danh_cua_hoc_sinh_trong_lop")," "),e.xp6(2),e.Q6J("ngForOf",i.classroomErrorObjs),e.xp6(1),e.hij(" ",e.lcZ(11,9,"lang_auto_dang_bi_trung_hoac_bi_thieu")," "),e.xp6(4),e.Q6J("ngIf",!i.showExpandError),e.xp6(1),e.Q6J("ngIf",i.showExpandError),e.xp6(1),e.Q6J("ngIf",i.showExpandError),e.xp6(1),e.Q6J("ngIf",i.exportStudentObjs))},dependencies:[F.sg,F.O5,s5.S,wi.n,ye.JV],encapsulation:2}),n})();function w5(n,o){1&n&&(e.TgZ(0,"div",2)(1,"span",3),e._UZ(2,"azt-loading-ui"),e.qZA()())}function y5(n,o){1&n&&(e.TgZ(0,"p",11),e.O4$(),e.TgZ(1,"svg",12),e._UZ(2,"path",13)(3,"polyline",14)(4,"path",15)(5,"rect",16)(6,"path",17),e.qZA(),e._uU(7),e.ALo(8,"mytranslate"),e.qZA()),2&n&&(e.xp6(7),e.hij(" ",e.lcZ(8,1,"lang_auto_file_danh_sach_so_bao_danh")," "))}function C5(n,o){1&n&&(e.TgZ(0,"span",23),e._UZ(1,"azt-loading-ui"),e.qZA())}function T5(n,o){1&n&&(e.O4$(),e.TgZ(0,"svg",24),e._UZ(1,"path",25)(2,"polyline",26)(3,"line",27),e.qZA())}function k5(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",18),e._UZ(1,"input",19),e.TgZ(2,"button",20),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.printStudentCode())}),e.YNc(3,C5,2,0,"span",21),e.YNc(4,T5,4,0,"ng-template",null,22,e.W1O),e._uU(6),e.ALo(7,"mytranslate"),e.qZA()()}if(2&n){const t=e.MAs(5),i=e.oxw(3);e.xp6(1),e.s9C("value",i.createExportStudentCodeName(!1)),e.xp6(2),e.Q6J("ngIf",i.isLoadingPrintCodeStudent)("ngIfElse",t),e.xp6(3),e.hij(" ",e.lcZ(7,4,"lang_auto_tai_ve")," ")}}const S5=function(n){return{"text-left":n}};function E5(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",28)(1,"button",29),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.clickNumbering())}),e.O4$(),e.TgZ(2,"svg",24),e._UZ(3,"path",30)(4,"path",31)(5,"path",32)(6,"path",33),e.qZA(),e._uU(7),e.ALo(8,"mytranslate"),e.qZA()()}if(2&n){const t=e.oxw(3);e.Q6J("ngClass",e.VKq(4,S5,1==t.styleView)),e.xp6(7),e.hij(" ",e.lcZ(8,2,"lang_auto_danh_lai_sbd")," ")}}function O5(n,o){if(1&n&&(e.TgZ(0,"div",5),e.YNc(1,y5,9,3,"p",8),e.YNc(2,k5,8,6,"div",9),e.YNc(3,E5,9,6,"div",10),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",!t.checkNumbering),e.xp6(1),e.Q6J("ngIf",!t.checkNumbering),e.xp6(1),e.Q6J("ngIf",!t.checkNumbering)}}function I5(n,o){1&n&&(e.TgZ(0,"div",40),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_ban_chua_chon_lop_vui_long_chon_lop_de_in_so_bao_danh")," "))}function M5(n,o){1&n&&(e.TgZ(0,"span",23),e._UZ(1,"azt-loading-ui"),e.qZA())}function L5(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",41)(1,"button",42),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.destroyConfig())}),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.TgZ(4,"button",43),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.savePrintExam())}),e.YNc(5,M5,2,0,"span",44),e._uU(6),e.ALo(7,"mytranslate"),e.qZA()()}if(2&n){const t=e.oxw(3);e.xp6(2),e.hij(" ",e.lcZ(3,4,"lang_auto_huy")," "),e.xp6(2),e.Q6J("disabled",t.form.invalid||!t.validFormIdentify),e.xp6(1),e.Q6J("ngIf",t.loadingConfig),e.xp6(1),e.hij(" ",e.lcZ(7,6,"lang_auto_tiep_tuc")," ")}}function B5(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",45),e._UZ(1,"azt-errors-identification",46),e.TgZ(2,"div",47),e._uU(3),e.ALo(4,"mytranslate"),e.qZA(),e.TgZ(5,"div",48)(6,"button",49),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.backToChooseClassroom())}),e._uU(7),e.ALo(8,"mytranslate"),e.qZA(),e.TgZ(9,"button",50),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.openAutomaticIdentification())}),e._uU(10),e.ALo(11,"mytranslate"),e.qZA()()()}if(2&n){const t=e.oxw(3);let i;e.xp6(1),e.Q6J("classroomErrorObjs",t.classroomErrorObjs)("classroomIds",t.classroomIds)("examId",null!==(i=null==t.examObj?null:t.examObj.id)&&void 0!==i?i:0)("checkPostParam",t.checkPostParam),e.xp6(2),e.hij(" ",e.lcZ(4,7,"lang_auto_vui_long_click_vao_sua_sbd_dot")," "),e.xp6(4),e.hij(" ",e.lcZ(8,9,"lang_auto_huy")," "),e.xp6(3),e.hij(" ",e.lcZ(11,11,"lang_auto_sua_sbd")," ")}}function P5(n,o){if(1&n&&(e.YNc(0,I5,3,3,"div",34),e.TgZ(1,"div",35),e._UZ(2,"azt-list-classroom-checkbox",36),e.qZA(),e.TgZ(3,"div",37),e.YNc(4,L5,8,8,"div",38),e.YNc(5,B5,12,13,"div",39),e.qZA()),2&n){const t=e.oxw(2);e.Q6J("ngIf",""!==t.msgError&&(null==t.form.controls.classroomFormArray.errors?null:t.form.controls.classroomFormArray.errors.classroomCheckBoxValidator)&&0===t.classroomErrorObjs.length),e.xp6(2),e.Q6J("form",t.form)("classroomGroupData",t.classroomWithGroup)("examClassroomObjs",t.examClassroomObjs)("permissionName",t.permissionTypes.exam),e.xp6(2),e.Q6J("ngIf",0===t.classroomErrorObjs.length),e.xp6(1),e.Q6J("ngIf",t.classroomErrorObjs.length>0)}}function Q5(n,o){if(1&n&&(e.TgZ(0,"form",4)(1,"div",5),e.YNc(2,O5,4,3,"div",6),e.YNc(3,P5,6,7,"ng-template",null,7,e.W1O),e.qZA()()),2&n){const t=e.MAs(4),i=e.oxw();e.Q6J("formGroup",i.form),e.xp6(2),e.Q6J("ngIf",!i.checkNumbering)("ngIfElse",t)}}let Zv=(()=>{class n extends xe.Q{createExportStudentCodeName(t){var i=this.printAnswersheetService.exportFileNameOfStudentCode(1,this.examObj?.name??"",this.examObj?.hashId??"");return t&&(i=this.commonService.replaceAll(i,"_","-")??""),i}clickNumbering(){this.checkNumbering=!0}showInputAdvanceSetting(){this.showAdvanceSetting=!this.showAdvanceSetting}backToChooseClassroom(){this.classroomErrorObjs=[],this.msgError="",this.msgErrorTwo=""}destroyConfig(){this.checkNumbering=!1,this.classroomErrorObjs=[],this.msgError="",this.msgErrorTwo=""}savePrintExam(){this.loadingConfig=!0,this.classroomErrorObjs=[];const t=this.sAztClassroomCheckboxService.getClassroomIdsCheckedInGroup(this.form.controls.classroomFormArray);0===t.length&&this.examClassroomObjs.forEach(a=>{a.classroomId&&t.push(a.classroomId)}),this.classroomIds=t.toString(),this.offlineStudentCodeService.apiOfflineStudentCodeSetStudentCodesPost({classroomIds:t,examHashId:this.hashId??""}).subscribe(a=>{if(1==a.success)this.stopStatusObj(),this.checkDownloadSBD=!0,this.checkNumbering=!1,this.loadingConfig=!1,this.getExamDataByHashId(this.hashId??""),this.msgErrorTwo="";else{let r=a?.data?.classrooms??[];for(let s=0;s<r.length;s++){const l=r[s];(l.isDuplicatedStudentCode||l.isMissingStudentCode)&&this.classroomErrorObjs.push(l)}this.loadingConfig=!1,this.msgErrorTwo=a.message??""}this.checkPostParam=!0})}printStudentCode(){this.isLoadingPrintCodeStudent=!0,this.waitDestroy(this.offlineStudentCodeService.apiOfflineStudentCodeCreateStudentCodesGet(this.hashId).subscribe(t=>{if(1==t.success)this.printAnswersheetService.printStudentCode(this.examObj,t?.data?.objs??[]),this.isLoadingPrintCodeStudent=!1,this.checkNumbering=!1,this.msgError="",this.classroomErrorObjs=[];else{let i=t?.data?.examClassroomConfig?.classrooms??[],a=[];for(let r=0;r<i.length;r++){const s=i[r];(s.isDuplicatedStudentCode||s.isMissingStudentCode)&&this.classroomErrorObjs.push(s),a.push(s.classroom?.id)}this.classroomIds=a.toString(),this.isLoadingPrintCodeStudent=!1,this.checkNumbering=!0,this.msgError=t.message??""}this.checkPostParam=!1}))}calcMaxIndexInput(){const t=this.sAztClassroomCheckboxService.getClassroomIdsCheckedInGroup(this.form.controls.classroomFormArray);let i=999999;return this.classroomWithGroup.forEach(a=>{a.classroomObjs.forEach(r=>{this.commonService.isExistInArray(t,r.id)&&(i-=r.countStudents??0)})}),i}checkValidFormIdentify(t){this.validFormIdentify=t.target instanceof HTMLInputElement&&Number(t.target.value)<=this.calcMaxIndexInput()}getExamDataByHashId(t){this.initStatusObj(),this.waitDestroy(this.documentConfigService.apiDocumentConfigGetExamConfigDataV2Get(t).subscribe(i=>{1==i.success?null!=i.data&&(this.examObj=i.data.examObj,this.classroomWithGroup=i.data.classroomGroupObjs??new Array,this.examClassroomObjs=i.data.examClassroomObjs??[],this.successStatusObj()):this.errorStatusObj(i.message??"",!0)}))}openAutomaticIdentification(){const t=this.sAztClassroomCheckboxService.getClassroomIdsCheckedInGroup(this.form.controls.classroomFormArray);0===t.length&&this.examClassroomObjs.forEach(a=>{a.classroomId&&t.push(a.classroomId)});const i=this.getMyQueryParam("classroomId");!t.length&&i&&t.push(Number(i)),this.waitDestroy(this.studentProfileV2Service.apiStudentProfileV2GetStudentsGet(t.toString()).subscribe(a=>{a.success&&(this.totalStudent=a.data?.length??0,this.sAztDialogService.open(r5.G,{data:{needGetClassroomGroups:!1,type:2,listCheckBox:t,totalStudent:this.totalStudent},restoreFocus:!1,width:"800px"}).afterClosed().subscribe(s=>{s&&this.savePrintExam()}))}))}automaticNumberingCodeByClassroomId(t){this.loadingConfig=!0,this.offlineStudentCodeService.apiOfflineStudentCodeSetStudentCodesPost({classroomIds:[t],examHashId:this.hashId??""}).subscribe(a=>{if(1==a.success)this.stopStatusObj(),this.checkDownloadSBD=!0,this.checkNumbering=!1,this.loadingConfig=!1,this.getExamDataByHashId(this.hashId??""),this.msgErrorTwo="";else{let r=a?.data?.classrooms??[];for(let s=0;s<r.length;s++){const l=r[s];(l.isDuplicatedStudentCode||l.isMissingStudentCode)&&this.classroomErrorObjs.push(l)}this.loadingConfig=!1,this.msgErrorTwo=a.message??""}this.checkPostParam=!0})}ngOnInit(){super.ngOnInit();const t=this.getMyQueryParam("classroomId");this.hashId&&this.getExamDataByHashId(this.hashId),t&&this.automaticNumberingCodeByClassroomId(Number(t)),super.ngOnInit()}constructor(t,i,a,r,s,l){super(),this.documentConfigService=t,this.sAztDialogService=i,this.offlineStudentCodeService=a,this.printAnswersheetService=r,this.sAztClassroomCheckboxService=s,this.studentProfileV2Service=l,this.hashId="",this.styleView=0,this.checkStudentCode=!1,this.startStudentCode=1,this.examObj=void 0,this.permissionTypes=pm.y,this.checkNumbering=!1,this.checkDownloadSBD=!1,this.examClassroomObjs=[],this.isLoadingPrintCodeStudent=!1,this.loadingConfig=!1,this.showAdvanceSetting=!1,this.validFormIdentify=!0,this.classroomErrorObjs=[],this.classroomIds="",this.msgError="",this.msgErrorTwo="",this.totalStudent=0,this.checkPostParam=!1,this.classroomWithGroup=[],this.form=new h.cw({classroomFormArray:new h.Oe([]),startIdentifyIndex:new h.NI(this.startStudentCode,{nonNullable:!0,validators:[h.kI.min(1),h.kI.max(999999),h.kI.pattern(/^[0-9]*$/)]}),whoAllow:new h.NI(2,{nonNullable:!0})},{validators:[Rp.h.classroomInGroupCheckBoxValidator]})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(un.Cq),e.Y36(qi.C),e.Y36(Za.MH),e.Y36(qp.H),e.Y36(Hp.f),e.Y36(Nv.LU))},n.\u0275cmp=e.Xpm({type:n,selectors:[["numbering-identification"]],inputs:{hashId:"hashId",styleView:"styleView",checkStudentCode:"checkStudentCode",startStudentCode:"startStudentCode"},features:[e.qOj],decls:3,vars:2,consts:[["class","w-full flex",4,"ngIf","ngIfElse"],["doneLoading",""],[1,"w-full","flex"],[1,"w-4","h-4","inline-block"],[3,"formGroup"],[1,"app"],["class","app",4,"ngIf","ngIfElse"],["numbering",""],["class","font-medium flex items-center",4,"ngIf"],["class","relative mt-2",4,"ngIf"],["class","mt-3",3,"ngClass",4,"ngIf"],[1,"font-medium","flex","items-center"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","mr-2","text-success"],["d","M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4"],["points","14 2 14 8 20 8"],["d","M10 12h2v6"],["x","2","y","12","width","4","height","6"],["d","M10 18h4"],[1,"relative","mt-2"],["type","text","readonly","",1,"form-control","py-3","px-4","border-transparent","bg-slate-100","pr-10",2,"padding-right","120px",3,"value"],["azt-track-service","numbering-identification-mO_7BlXNpZ8",1,"btn","btn-primary","absolute","my-auto","inset-y-0","right-0",2,"border-top-left-radius","0","border-bottom-left-radius","0",3,"click"],["class","w-4 h-4 inline-block mr-2",4,"ngIf","ngIfElse"],["donePrintCodeLoading",""],[1,"w-4","h-4","inline-block","mr-2"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","mr-2"],["d","M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"],["points","7 10 12 15 17 10"],["x1","12","y1","15","x2","12","y2","3"],[1,"mt-3",3,"ngClass"],["azt-track-service","numbering-identification-GfouPhXkxs2",1,"btn","btn-outline-secondary",3,"click"],["d","M21 2v6h-6"],["d","M3 12a9 9 0 0 1 15-6.7L21 8"],["d","M3 22v-6h6"],["d","M21 12a9 9 0 0 1-15 6.7L3 16"],["class","text-danger font-medium mb-4",4,"ngIf"],[1,"azt-list-classroom"],[3,"form","classroomGroupData","examClassroomObjs","permissionName"],[1,"grid","grid-cols-12","gap-2","justify-between","numbering-identification"],["class","col-span-12 items-center text-right mt-3",4,"ngIf"],["class","col-span-12 mt-3",4,"ngIf"],[1,"text-danger","font-medium","mb-4"],[1,"col-span-12","items-center","text-right","mt-3"],["azt-track-service","numbering-identification-EaHzWOF-ZYD",1,"btn","btn-secondary","mr-2",3,"click"],["azt-track-service","numbering-identification-422NanET_rP",1,"btn","btn-primary-soft",3,"disabled","click"],["class","w-4 h-4 inline-block mr-2",4,"ngIf"],[1,"col-span-12","mt-3"],[3,"classroomErrorObjs","classroomIds","examId","checkPostParam"],[1,"mt-3","font-medium"],[1,"mt-3"],["azt-track-service","numbering-identification-yx-KGOCvWTN",1,"btn","btn-secondary","mr-2",3,"click"],["azt-track-service","numbering-identification-_Mu1PflxZjE",1,"btn","btn-primary",3,"click"]],template:function(t,i){if(1&t&&(e.YNc(0,w5,3,0,"div",0),e.YNc(1,Q5,5,3,"ng-template",null,1,e.W1O)),2&t){const a=e.MAs(2);e.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a)}},dependencies:[F.mk,F.O5,h._Y,h.JL,h.sg,hm.B,v5,wi.n,ye.JV],encapsulation:2}),n})();function F5(n,o){if(1&n&&e._UZ(0,"azt-loading-effect",2),2&n){const t=e.oxw();e.Q6J("currentStatusObj",t.statusObj)}}function N5(n,o){1&n&&(e.TgZ(0,"span",30),e._UZ(1,"azt-loading-ui"),e.qZA())}function Z5(n,o){1&n&&(e.TgZ(0,"span",31),e._UZ(1,"lucide-icon",32),e.qZA())}function D5(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",27),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.printPdfExam(!1,a.offlineExamObj.hashId,""))}),e.YNc(1,N5,2,0,"span",28),e.YNc(2,Z5,2,0,"ng-template",null,29,e.W1O),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()}if(2&n){const t=e.MAs(3),i=e.oxw(2);e.xp6(1),e.Q6J("ngIf",i.loadingObj.downloadExam)("ngIfElse",t),e.xp6(3),e.hij(" ",e.lcZ(5,3,"lang_auto_tai_ve")," ")}}function U5(n,o){1&n&&(e.TgZ(0,"span",33),e._UZ(1,"azt-loading-ui"),e.qZA())}function j5(n,o){1&n&&(e.TgZ(0,"span",31),e._UZ(1,"lucide-icon",32),e.qZA())}function q5(n,o){1&n&&(e.TgZ(0,"span",33),e._UZ(1,"azt-loading-ui"),e.qZA())}function R5(n,o){1&n&&(e.TgZ(0,"span",31),e._UZ(1,"lucide-icon",32),e.qZA())}function z5(n,o){1&n&&(e.TgZ(0,"span",30),e._UZ(1,"azt-loading-ui"),e.qZA())}function H5(n,o){1&n&&(e.TgZ(0,"span",31),e._UZ(1,"lucide-icon",32),e.qZA())}function J5(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",34),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.printPdfExam(!0,a.offlineExamObj.hashId,""))}),e.YNc(1,z5,2,0,"span",28),e.YNc(2,H5,2,0,"ng-template",null,29,e.W1O),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()}if(2&n){const t=e.MAs(3),i=e.oxw(2);e.xp6(1),e.Q6J("ngIf",i.loadingObj.downloadExam)("ngIfElse",t),e.xp6(3),e.hij(" ",e.lcZ(5,3,"lang_auto_tai_ve")," ")}}function K5(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"azt-export-excel-for-answersheet",35),e.NdJ("exportDataDone",function(a){e.CHM(t);const r=e.oxw(2);return e.KtG(r.exportDataDone(a))}),e.qZA()}if(2&n){const t=e.oxw(2);let i;e.Q6J("startQuestionIndex",null!==(i=t.examObj.startQuestionIndex)&&void 0!==i?i:1)("obj",t.exportExcelData)}}function G5(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6)(4,"span",7),e._UZ(5,"lucide-icon",8),e.qZA(),e._uU(6),e.ALo(7,"mytranslate"),e.qZA(),e._UZ(8,"div",9),e.qZA(),e.TgZ(9,"div",10),e._UZ(10,"input",11),e.YNc(11,D5,6,5,"button",12),e.qZA()(),e.TgZ(12,"div",13)(13,"p",14)(14,"span",15),e._UZ(15,"lucide-icon",16),e.qZA(),e._uU(16),e.ALo(17,"mytranslate"),e._UZ(18,"notice-print-a4-paper-box"),e.qZA(),e.TgZ(19,"div",10),e._UZ(20,"input",11),e.TgZ(21,"button",17),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.printExamAnswersheet(a.offlineExamObj.hashId))}),e.YNc(22,U5,2,0,"span",18),e.YNc(23,j5,2,0,"ng-template",null,19,e.W1O),e._uU(25),e.ALo(26,"mytranslate"),e.qZA()()(),e.TgZ(27,"div",13)(28,"p",14)(29,"span",20),e._UZ(30,"lucide-icon",21),e.qZA(),e._uU(31),e.ALo(32,"mytranslate"),e.qZA(),e.TgZ(33,"div",10),e._UZ(34,"input",11),e.TgZ(35,"button",22),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.exportExcelForAnswerSheet())}),e.YNc(36,q5,2,0,"span",18),e.YNc(37,R5,2,0,"ng-template",null,23,e.W1O),e._uU(39),e.ALo(40,"mytranslate"),e.qZA()()(),e.TgZ(41,"div",4)(42,"div",5)(43,"div",6)(44,"span",7),e._UZ(45,"lucide-icon",8),e.qZA(),e._uU(46),e.ALo(47,"mytranslate"),e.qZA()(),e.TgZ(48,"div",10),e._UZ(49,"input",11),e.YNc(50,J5,6,5,"button",24),e.qZA()(),e.TgZ(51,"div",13)(52,"div"),e._UZ(53,"numbering-identification",25),e.ALo(54,"mustInClassroom"),e.qZA()()(),e.YNc(55,K5,1,2,"azt-export-excel-for-answersheet",26)}if(2&n){const t=e.MAs(24),i=e.MAs(38),a=e.oxw();e.xp6(6),e.hij(" ",e.lcZ(7,20,"lang_auto_file_de_thi")," "),e.xp6(4),e.s9C("value",a.createNameExam("exam",!0)),e.xp6(1),e.Q6J("ngIf",0==a.showFormAddInformation),e.xp6(5),e.hij(" ",e.lcZ(17,22,"lang_auto_file_phieu_tra_loi")," "),e.xp6(4),e.s9C("value",a.createNameExam("answersheet",!0)),e.xp6(2),e.Q6J("ngIf",a.loadingObj.downloadAnswerSheet)("ngIfElse",t),e.xp6(3),e.hij(" ",e.lcZ(26,24,"lang_auto_tai_ve")," "),e.xp6(6),e.hij(" ",e.lcZ(32,26,"lang_auto_file_answer_list")," "),e.xp6(3),e.s9C("value",a.createNameExam("answerexcel",!0)),e.xp6(2),e.Q6J("ngIf",a.isLoadingPrintAnswer)("ngIfElse",i),e.xp6(3),e.hij(" ",e.lcZ(40,28,"lang_auto_tai_ve")," "),e.xp6(7),e.hij(" ",e.lcZ(47,30,"lang_auto_file_de_thi_kem_dap_an")," "),e.xp6(3),e.s9C("value",a.createNameExam("answerdocx",!0)),e.xp6(1),e.Q6J("ngIf",0==a.showFormAddInformation),e.xp6(3),e.Q6J("hashId",a.examObj.hashId)("checkStudentCode",e.lcZ(54,32,a.examObj))("startStudentCode",a.startStudentCode),e.xp6(2),e.Q6J("ngIf",null!=a.exportExcelData)}}let Dv=(()=>{class n extends xe.Q{closeChangeInformation(t){this.showFormAddInformation=!1,t&&this.printPdfExam(!1,this.offlineExamObj.hashId,"")}createNameExam(t,i){var a="";a="answersheet"==t?this.printAnswersheetService.exportFileNameOfAnswerSheet(0,this.examObj.name??"",this.offlineExamObj?.hashId??""):"answerexcel"==t||"answerdocx"==t?this.printAnswersheetService.exportFileNameOfAnswerExcelOffline(0,this.examObj.name??"",this.offlineExamObj?.hashId??""):this.printAnswersheetService.exportFileNameOfExamOffline(0,this.examObj.name??"",this.offlineExamObj?.hashId??"",void 0),i&&(a=this.commonService.replaceAll(a,"_","-")??"");var r=".docx";return r="answersheet"==t&&7!=this.offlineExamObj.answersheetTemplate?".pdf":r,a+("answerexcel"==t?".xlsx":r)}getAmountQuestionPartByType(t,i){return t.find(a=>a.answerType==i)?.totalQuestion??0}printExamAnswersheet(t){this.loadingObj.downloadAnswerSheet=!0,this.waitDestroy(this.offlineMixQuestionService.apiOfflineMixQuestionGetObjsGet(this?.examObj?.hashId??"",t??"","").subscribe(i=>{if(i.success){let a=this.getTotalQuestionInMixQuestionObjs(i.data?.mixQuestionObjs??[],i.data?.questionObjs??[]);if(a){const r=a;let s=i.data?.offlineExamObj?.answersheetTemplate??0,l=i?.data?.offlineExamObj?.totalQuestionOfAnswersheet??void 0,c=this.createNameExam("answersheet",!1);if(s==this.allAnswerSheet.templateTrueFalseA4||s==this.allAnswerSheet.templateTrueFalseA4WithColor||s==this.allAnswerSheet.templateTrueFalseEssayA4||s==this.allAnswerSheet.templateTrueFalseA5||s==this.allAnswerSheet.templateTrueFalseA6||s==this.allAnswerSheet.templateA4WithFax||s==this.allAnswerSheet.templateA4WithFaxV2){let u=this.getAmountQuestionPartByType(i.data?.offlineExamPartObjs??[],1),m=this.getAmountQuestionPartByType(i.data?.offlineExamPartObjs??[],5),p=1;u&&(p+=u),m&&(p+=m);let f={answerSheetTemplate:s,amountTemplateTrueFalseA4:m??8,amountTemplateStartTrueFalseA4:i?.data?.resetQuestionIndex?1:u+1,amountTemplateMultipleChoiceA4:u??40,amountTemplateStartMultipleChoiceA4:1,amountTemplateFillA4:this.getAmountQuestionPartByType(i.data?.offlineExamPartObjs??[],4)??6,amountTemplateStartFillA4:i?.data?.resetQuestionIndex?1:p};this.answerSheetHelper=this.printAnswersheetService.chooseAnswerSheetTemplate(this.answerSheetHelper,s,r,0,i.data?.maxOfflineMixQuestionHashId,l),this.answerSheetHelper.downloadTrueFalseAnswerSheet(c,f).subscribe(b=>{b.success||this.errorStatusObj(this.commonService.translateToKeyParam("lang_auto_tao_phieu_loi_vui_long_thu_lai",b.message??"none"),!0)}),this.loadingObj.downloadAnswerSheet=!1}else{this.answerSheetHelper=this.printAnswersheetService.chooseAnswerSheetTemplate(this.answerSheetHelper,s,r,0,i.data?.maxOfflineMixQuestionHashId,l);let u=0;u=s==this.allAnswerSheet.templateOriginalA4||s==this.allAnswerSheet.templateA4WithColorNew?l??120:s==this.allAnswerSheet.templateA5Full50?l??60:s==this.allAnswerSheet.templateA4Essay?l??36:l??32,this.answerSheetHelper.downloadTrueFalseAnswerSheet(c,{answerSheetTemplate:s,amountTemplateTrueFalseA4:0,amountTemplateStartTrueFalseA4:0,amountTemplateMultipleChoiceA4:u,amountTemplateStartMultipleChoiceA4:1,amountTemplateFillA4:0,amountTemplateStartFillA4:0}).subscribe(p=>{p.success||this.errorStatusObj(this.commonService.translateToKeyParam("lang_auto_tao_phieu_loi_vui_long_thu_lai",p.message??"none"),!0),this.loadingObj.downloadAnswerSheet=!1})}}else this.errorStatusObj("lang_testbank_update_exam_with_empty_question",!0),this.loadingObj.downloadAnswerSheet=!1}else this.errorStatusObj(i.message??"",!0),this.loadingObj.downloadAnswerSheet=!1}))}getTotalQuestionInMixQuestionObjs(t,i){if(t.length>0){let a=0;return t.forEach(r=>{let s=this.zipDataService.decodeContentGzip(r?.mixDatas??""),l=this.castJsonToObj(s);a<(l?.length??0)&&(a=l?.length??0)}),a}return i.length>0?i.length:void 0}printPdfExam(t,i,a){cr.G.openLoadingEffect(this.commonService.myTranslateInstant("lang_auto_dang_lay_du_lieu_tu_he_thong")??""),this.waitDestroy(this.offlineMixQuestionService.apiOfflineMixQuestionListMixExamQuestionsGet(this.examObj.hashId,i).subscribe(r=>{if(r.success)if(cr.G.changeMsgLoadingEffect(this.commonService.myTranslateInstant("lang_auto_dang_xu_ly_du_lieu")??""),r.data?.offlineExamMixQuestions){let s={nameSchool:"",nameSubject:""};this.examPrintInfoObj?.status&&(s={nameSchool:this.examPrintInfoObj?.schoolName??"",nameSubject:this.examPrintInfoObj?.subject??""});let l=this.tableAnswerDownload.value?2:0;if(1==r.data?.offlineExamMixQuestions.length){let c=this.commonService.castJsonToClassObjs(Le.v,JSON.stringify(r.data?.offlineExamMixQuestions[0].mixQuestions??[]))??[];this.exportSAztDocxService.downloadExam(t,r.data.exam??{},r.data?.offlineExam,r.data?.offlineExamMixQuestions[0],c,s,l,u=>cr.G.closeLoadingEffect(u),u=>{cr.G.changeMsgLoadingEffect(u)},void 0,!0).then().catch(u=>{this.showErrorSnack(u.message)})}else this.exportSAztDocxService.downloadExamObjs(t,r.data.exam??{},r.data?.offlineExam,r.data?.offlineExamMixQuestions,s,l,c=>cr.G.closeLoadingEffect(c),c=>{cr.G.changeMsgLoadingEffect(c)},void 0,!0).then().catch(c=>{this.showErrorSnack(c.message)})}else cr.G.closeLoadingEffect(10),this.showErrorSnack("lang_auto_khong_co_du_lieu_dao_de");else this.errorStatusObj(r.message??"",!0),cr.G.closeLoadingEffect(10)}))}exportExcelForAnswerSheet(){this.isLoadingPrintAnswer=!0;let t=this.commonService.getMyParam(this.activeRoute,"hash_id")??"";this.waitDestroy(this.offlineExamExportService.apiOfflineExamExportExportResultOfAllOfflineMixQuestionHashIdGet(t).subscribe(i=>{if(1==i.success){let a=i.data?.obj;a?.offlineMixQuestionObjs&&a.offlineMixQuestionObjs.length>0?this.exportExcelData=this.commonService.myClone(a):(this.showErrorSnack("lang_auto_chua_co_du_lieu_dap_an_de_offline"),this.isLoadingPrintAnswer=!1)}else this.showErrorSnack(i.message??""),this.isLoadingPrintAnswer=!1}))}exportDataDone(t){let i=this.createNameExam("answerexcel",!1);this.shareFileFlutterService.shareFileWithBlob(t,i),this.isLoadingPrintAnswer=!1}ngOnInit(){var t=[{source:this.cdnService.convertCdnLinkOfGitHub("almo/opencv.js"),name:"opencv_crop_white.js"}];this.commonService.loadScriptPromises(t).then(()=>{this.isLoadingLib=!1}),super.ngOnInit()}constructor(t,i,a,r,s,l,c,u,m){super(),this.shareFileFlutterService=t,this.activeRoute=i,this.printAnswersheetService=a,this.offlineMixQuestionService=r,this.answerSheetHelper=s,this.zipDataService=l,this.cdnService=c,this.exportSAztDocxService=u,this.offlineExamExportService=m,this.startStudentCode=1,this.loadingObj={},this.isLoadingLib=!0,this.isLoadingPrintAnswer=!1,this.showFormAddInformation=!1,this.tableAnswerDownload=new h.NI(!1),this.allAnswerSheet=Ki.x}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Ac.g),e.Y36(E.gz),e.Y36(qp.H),e.Y36(Za.fs),e.Y36(jA),e.Y36(Us.a),e.Y36(tr.E),e.Y36(a5.F),e.Y36(Za.qr))},n.\u0275cmp=e.Xpm({type:n,selectors:[["print-history-box"]],inputs:{examObj:"examObj",offlineExamObj:"offlineExamObj",startStudentCode:"startStudentCode",examPrintInfoObj:"examPrintInfoObj"},features:[e.qOj],decls:3,vars:2,consts:[[3,"currentStatusObj",4,"ngIf","ngIfElse"],["doneLoading",""],[3,"currentStatusObj"],[1,"action-history"],[1,"action-file","mt-4"],[1,"font-medium","flex","flex-col","md:flex-row","md:items-center"],[1,"mr-auto","flex","items-center"],[1,"inline-block","w-4","h-4","text-pending","mr-2"],["name","file-check"],[1,"form-check","mt-1","md:mt-0"],[1,"relative","mt-2"],["type","text","readonly","",1,"form-control","py-3","px-4","border-transparent","bg-slate-100","pr-10",2,"padding-right","120px",3,"value"],["azt-track-service","print_history-031D9RFdQh","class","btn btn-primary absolute my-auto inset-y-0 right-0","style","border-top-left-radius: 0; border-bottom-left-radius: 0",3,"click",4,"ngIf"],[1,"action-file","mt-3"],[1,"font-medium","flex","items-center"],[1,"inline-block","w-4","h-4","mr-2","text-danger"],["name","file-spreadsheet"],["azt-track-service","print_history-XPpw6jKuAiS",1,"btn","btn-primary","absolute","my-auto","inset-y-0","right-0",2,"border-top-left-radius","0","border-bottom-left-radius","0",3,"click"],["class","w-4 h-4 mr-2 text-white",4,"ngIf","ngIfElse"],["doneAnswerSheetLoading",""],[1,"inline-block","w-4","h-4","mr-2","text-success"],["name","file-text"],["azt-track-service","print_history-2VQtAklEkvH",1,"btn","btn-primary","absolute","my-auto","inset-y-0","right-0",2,"border-top-left-radius","0","border-bottom-left-radius","0",3,"click"],["doneLoadingPrintAnswer",""],["azt-track-service","print_history-yYG9YXhT8","class","btn btn-primary absolute my-auto inset-y-0 right-0","style","border-top-left-radius: 0; border-bottom-left-radius: 0",3,"click",4,"ngIf"],[3,"hashId","checkStudentCode","startStudentCode"],[3,"startQuestionIndex","obj","exportDataDone",4,"ngIf"],["azt-track-service","print_history-031D9RFdQh",1,"btn","btn-primary","absolute","my-auto","inset-y-0","right-0",2,"border-top-left-radius","0","border-bottom-left-radius","0",3,"click"],["class","w-4 h-4 text-white mr-2",4,"ngIf","ngIfElse"],["doneExamLoading",""],[1,"w-4","h-4","text-white","mr-2"],[1,"inline-block","w-4","h-4","mr-2"],["name","download"],[1,"w-4","h-4","mr-2","text-white"],["azt-track-service","print_history-yYG9YXhT8",1,"btn","btn-primary","absolute","my-auto","inset-y-0","right-0",2,"border-top-left-radius","0","border-bottom-left-radius","0",3,"click"],[3,"startQuestionIndex","obj","exportDataDone"]],template:function(t,i){if(1&t&&(e.YNc(0,F5,1,1,"azt-loading-effect",0),e.YNc(1,G5,56,34,"ng-template",null,1,e.W1O)),2&t){const a=e.MAs(2);e.Q6J("ngIf",i.isLoadingLib&&null!=i.examObj&&null!=i.offlineExamObj)("ngIfElse",a)}},dependencies:[F.O5,vi.l,Fv.S,wi.n,_.Nh5,Zv,Cg,ye.JV,ye.EZ],encapsulation:2}),n})();function Y5(n,o){if(1&n&&e._UZ(0,"azt-loading-effect",3),2&n){const t=e.oxw();e.Q6J("currentStatusObj",t.statusObj)}}function $5(n,o){1&n&&(e.TgZ(0,"div",34)(1,"h3",35),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.TgZ(4,"span",36),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()()),2&n&&(e.xp6(2),e.hij("",e.lcZ(3,2,"lang_auto_tao_de_thanh_cong")," \u{1f44f}"),e.xp6(3),e.hij(" ",e.lcZ(6,4,"lang_auto_vui_long_chon_cac_hinh_thuc_ben_duoi")," "))}function V5(n,o){if(1&n&&e._UZ(0,"print-history-box",39),2&n){const t=e.oxw(3);e.Q6J("examObj",t.examObj)("offlineExamObj",t.offlineExamObj)("examPrintInfoObj",t.examPrintInfoObj)("startStudentCode",t.startStudentCode)}}function W5(n,o){if(1&n&&(e.TgZ(0,"div",12)(1,"h3",37),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.YNc(4,V5,1,4,"print-history-box",38),e.qZA()),2&n){const t=e.oxw(2);e.xp6(2),e.hij(" ",e.lcZ(3,2,"lang_auto_du_lieu_gan_nhat")," "),e.xp6(2),e.Q6J("ngIf",t.examObj&&t.offlineExamObj)}}function X5(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",40)(1,"h3",7),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.TgZ(4,"div",8)(5,"span",9),e._UZ(6,"lucide-icon",10),e.qZA(),e._uU(7),e.ALo(8,"mytranslate"),e.TgZ(9,"a",41),e._uU(10),e.ALo(11,"mytranslate"),e.qZA()(),e.TgZ(12,"div",12)(13,"button",42),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.redirectPowerpoint())}),e.TgZ(14,"span",14),e._UZ(15,"lucide-icon",43),e.qZA(),e._uU(16),e.ALo(17,"mytranslate"),e.qZA(),e.TgZ(18,"p",16),e._uU(19),e.ALo(20,"mytranslate"),e.qZA()()()}2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,5,"lang_auto_chen_vao_powerpoint")," "),e.xp6(5),e.hij(" ",e.lcZ(8,7,"lang_auto_chen_noi_dung_cau_hoi_vao_slide_powerpoint_hoc_sinh_co_the_tuong_tac_dot")," "),e.xp6(3),e.hij(" ",e.lcZ(11,9,"lang_auto_xem_huong_dan_tai_day")," "),e.xp6(6),e.hij(" ",e.lcZ(17,11,"lang_auto_chen_vao_powerpoint")," "),e.xp6(3),e.hij(" ",e.lcZ(20,13,"lang_auto_comment_powerpoint_guild")," "))}function eT(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",4),e.YNc(1,$5,7,6,"div",5),e.TgZ(2,"div",6)(3,"h3",7),e._uU(4),e.ALo(5,"mytranslate"),e.qZA(),e.TgZ(6,"div",8)(7,"span",9),e._UZ(8,"lucide-icon",10),e.qZA(),e._uU(9),e.ALo(10,"mytranslate"),e.TgZ(11,"a",11),e._uU(12),e.ALo(13,"mytranslate"),e.qZA()(),e.TgZ(14,"div",12)(15,"button",13),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.redirectConfigTestOnline())}),e.TgZ(16,"span",14),e._UZ(17,"lucide-icon",15),e.qZA(),e._uU(18),e.ALo(19,"mytranslate"),e.qZA(),e.TgZ(20,"p",16),e._uU(21),e.ALo(22,"mytranslate"),e.TgZ(23,"a",17),e._uU(24),e.ALo(25,"mytranslate"),e.qZA()()()(),e.TgZ(26,"div",18)(27,"h3",7),e._uU(28),e.ALo(29,"mytranslate"),e.qZA(),e.TgZ(30,"div",8)(31,"span",9),e._UZ(32,"lucide-icon",10),e.qZA(),e._uU(33),e.ALo(34,"mytranslate"),e.TgZ(35,"a",19),e._uU(36),e.ALo(37,"mytranslate"),e.qZA()(),e.TgZ(38,"div",12)(39,"div",20)(40,"button",21),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.openDialogExamPrintTicket())}),e.TgZ(41,"span",14),e._UZ(42,"lucide-icon",22),e.qZA(),e.TgZ(43,"span",23),e._uU(44),e.ALo(45,"mytranslate"),e.ALo(46,"mytranslate"),e.qZA()(),e.TgZ(47,"p",16),e._uU(48),e.ALo(49,"mytranslate"),e.qZA()()(),e.YNc(50,W5,5,4,"div",24),e.qZA(),e.YNc(51,X5,21,15,"div",25),e.ALo(52,"fullPermission"),e.TgZ(53,"div",26)(54,"div",27)(55,"a",28),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.getRouterLinkToExamResult())}),e.TgZ(56,"span",29),e._UZ(57,"lucide-icon",30),e.qZA(),e._uU(58),e.ALo(59,"mytranslate"),e.qZA()(),e.TgZ(60,"div",31)(61,"a",32),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.backToDocumentManager())}),e.TgZ(62,"span",29),e._UZ(63,"lucide-icon",33),e.qZA(),e._uU(64),e.ALo(65,"mytranslate"),e.qZA()()()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.isNewDocument),e.xp6(3),e.hij(" ",e.lcZ(5,17,"lang_auto_online")," "),e.xp6(5),e.hij(" ",e.lcZ(10,19,"lang_auto_copy_link_gui_cho_hoc_sinh_hoc_sinh_truy_cap_link_de_lam_bai_va_nop_bai_online_ho_tro_ca_trac_nghiem_va_tu_luan")," "),e.xp6(3),e.hij(" ",e.lcZ(13,21,"lang_auto_tim_hieu_them")," "),e.xp6(6),e.hij(" ",e.lcZ(19,23,"lang_auto_cai_dat_lam_bai_online")," "),e.xp6(3),e.hij(" ",e.lcZ(22,25,"lang_auto_thiet_lap_thoi_gian_lam_bai_giam_sat_tu_dong_tao_de_con_cho_phep_xem_diem_doing_xuat_ban_de_tao_link_gui_cho_hoc_sinh_lam_bai_va_nop_bai")," "),e.xp6(3),e.hij(" ",e.lcZ(25,27,"lang_auto_tim_hieu_them")," "),e.xp6(4),e.hij(" ",e.lcZ(29,29,"lang_auto_offline")," "),e.xp6(5),e.hij(" ",e.lcZ(34,31,"lang_auto_in_de_cho_hoc_sinh_lam_tren_giay_scan_hoac_chup_anh_bai_lam_cua_hoc_sinh_va_upload_len_azota_de_cham_tu_dong_hoc_sinh_cung_co_the_tu_chup_lai_bai_lam_cua_minh_va_nop_tren_azota")," "),e.xp6(3),e.hij(" ",e.lcZ(37,33,"lang_auto_tim_hieu_them")," "),e.xp6(8),e.AsE("",e.lcZ(45,35,"lang_auto_in_de_upper")," ",e.lcZ(46,37,"lang_auto_-_co_phieu_tra_loi_trac_nghiem_rieng"),""),e.xp6(4),e.hij(" ",e.lcZ(49,39,"lang_auto_xuat_file_pdf_chua_cac_de_thi_da_duoc_dao_thu_tu_cau_hoi_va_dap_an_tu_de_goc_kem_theo_mot_file_pdf_chua_mau_phieu_tra_loi_trac_nghiem_theo_mau_tuy_chon")," "),e.xp6(2),e.Q6J("ngIf",null==t.offlineExamObj?null:t.offlineExamObj.hashId),e.xp6(1),e.Q6J("ngIf",e.xi3(52,41,t.examObj,"exam")),e.xp6(7),e.hij(" ",e.lcZ(59,44,"lang_auto_quan_ly_danh_sach_da_thi")," "),e.xp6(6),e.hij(" ",e.lcZ(65,46,"lang_auto_ve_trang_quan_ly_file")," ")}}let tT=(()=>{class n extends xe.Q{redirectConfigTestOnline(){const t=`/admin/testbank/config-exam-online/${this.examObj?.categoryId??0}/${this.examObj?.hashId}`,i=`/admin/testbank/action-online-offline/${this.examObj?.categoryId??0}/${this.examObj?.hashId}?backto=${this.paramBackToLink}`,a=this.commonService.getMyQueryParam("classroomId"),r=this.commonService.getMyQueryParam("indexSession");a||r?this.paramClassroomService.redirectUrlAddParamClassroom(t,`?backto=${encodeURIComponent(i)}`,["backto"]):this.myNavigationWithQueryString(t,`?backto=${i}`)}openDialogExamPrintTicket(){let t=`/admin/testbank/action-online-offline/${this.examObj?.categoryId??0}/${this.examObj?.hashId}?backto=`+this.paramBackToLink;this.myNavigationWithQueryString(`/admin/testbank/print-exam-and-ticket/${this.examObj?.categoryId??0}/${this.examObj?.hashId}`,`?backto=${t}`)}redirectPowerpoint(){let t=`/admin/testbank/action-online-offline/${this.examObj?.categoryId??0}/${this.examObj?.hashId}?backto=`+this.paramBackToLink;this.myNavigationWithQueryString(`/admin/testbank/powerpoint/${this.examObj?.categoryId??0}/${this.examObj?.id}`,`?backto=${t}`)}getRouterLinkToExamResult(){let t=this.getBackData(this.backToLink,!1);this.myNavigationWithQueryString("/admin/testbank/exam-results-list/"+(this.examObj?.categoryId??0)+"/"+this.examObj?.id+"/0",t?"?"+t:"")}getBackData(t,i){let a="";if(t.includes("backto")){let r=t.substring(t.lastIndexOf("backto"));a=r.includes("shareType")&&i?r.substring(r.lastIndexOf("data")):r}else a=t.includes("shareType")&&i?t.substring(t.lastIndexOf("data")):"backto="+t;return a}backToDocumentManager(){let t=this.getBackData(this.backToLink,!0);var i=this.commonService.getMyParam(this.activeRoute,"cat_id")??"";this.myNavigationWithQueryString(`/admin/testbank/document-management/0/${i}/1`,t?"?"+decodeURIComponent(t):"")}getExamInfoByHashId(t){this.initStatusObj(),this.waitDestroy(this.documentConfigService.apiDocumentConfigGetExamConfigDataV2Get(t).subscribe(i=>{1==i.success?(this.dataConfigDocument=i.data,i.data&&i.data?.examObj&&(this.examObj=i.data.examObj,this.offlineExamObj=i.data.offlineExamObj,this.examPrintInfoObj=i.data.examPrintInfoObj),this.successStatusObj()):this.errorStatusObj(i.message??"",!0)}))}constructor(t,i,a){super(),this.activeRoute=t,this.documentConfigService=i,this.paramClassroomService=a,this.backToLink="",this.paramBackToLink="",this.returnToLink="",this.examHashId="",this.isNewDocument=!1,this.startStudentCode=1}ngOnInit(){let t=this.commonService.getMyQueryParam("isNewDocument")??"";this.isNewDocument="1"==t.toString();var i=this.commonService.getMyParam(this.activeRoute,"cat_id")??"";this.paramBackToLink=this.commonService.getMyQueryParam("backto")??"",this.examHashId=this.commonService.getMyParam(this.activeRoute,"hash_id")??"",this.backToLink=this.paramBackToLink?this.paramBackToLink:`/admin/testbank/document-management/0/${i??0}/1`,this.returnToLink=`/admin/testbank/action-online-offline/${i??0}/${this.examHashId}?backto=`+this.paramBackToLink,this.getExamInfoByHashId(this.examHashId),this.commonService.translateMetaData({title:"lang_cms_action_online_offline_title",description:"lang_cms_action_online_offline_description",image:""}),super.ngOnInit()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(E.gz),e.Y36(un.Cq),e.Y36(Xr))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-action-online-offline"]],features:[e.qOj],decls:4,vars:3,consts:[[3,"headerBackToLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],["doneLoading",""],[3,"currentStatusObj"],[1,"action-document","mx-auto","mt-8",2,"max-width","1000px"],["class","action-heading mb-4",4,"ngIf"],[1,"action-online"],[1,"text-md","uppercase","font-medium"],[1,"text-md","mt-1"],[1,"w-4","h-4","mr-1","inline-block",2,"vertical-align","sub"],["name","info"],["azt-track-service","action-online-offline-9sByNv80IwU","href","https://docs.azota.vn/docs/huong-dan-su-dung/thi-online/cau-hinh-thi-online/","target","_blank","rel","noopener noreferrer",1,"text-primary","font-medium"],[1,"box","mt-3","p-5"],["azt-track-service","action-online-offline-Ow1f0tm7-at",1,"btn","btn-outline-primary",3,"click"],[1,"w-5","h-5","mr-2"],["name","cog"],[1,"text-xs","mt-2","text-slate-500"],["azt-track-service","action-online-offline-McQDzOjO9G-","href","https://docs.azota.vn/docs/huong-dan-su-dung/thi-online/cau-hinh-thi-online/","target","_blank","rel","noopener noreferrer",1,"text-primary","font-medium"],[1,"action-offline","mt-8"],["azt-track-service","action-online-offline-yRjklKAot9b","href","https://docs.azota.vn/docs/huong-dan-su-dung/thi-offline/gioi-thieu-tinh-nang-thi-offline/","target","_blank","rel","noopener noreferrer",1,"text-primary","font-medium"],[1,"azt-offline-print"],["azt-track-service","action-online-offline-IIO1TsHmgjr",1,"btn","btn-outline-primary",3,"click"],["name","printer"],[1,"mr-1"],["class","box mt-3 p-5",4,"ngIf"],["class","action-online mt-8",4,"ngIf"],[1,"mt-5","flex","flex-col","sm:flex-row","justify-center","items-center"],[1,"mr-2"],["azt-track-service","action-online-offline-ftSDs5DiFWa",1,"btn","btn-outline-primary","btn-transparent",3,"click"],[1,"w-4","h-4","mr-2"],["name","file-spreadsheet"],[1,"w-30"],["azt-track-service","action-online-offline-A6xAK9qc23J",1,"btn","btn-outline-primary","btn-transparent",3,"click"],["name","folder"],[1,"action-heading","mb-4"],[1,"text-md","font-medium","mb-1"],[1,"text-md"],[1,"text-md","font-medium","flex","items-center"],[3,"examObj","offlineExamObj","examPrintInfoObj","startStudentCode",4,"ngIf"],[3,"examObj","offlineExamObj","examPrintInfoObj","startStudentCode"],[1,"action-online","mt-8"],["azt-track-service","action-online-offline-gcTAKBJcf3U","href","https://www.youtube.com/watch?v=FpcOtHNGMCQ&ab_channel=Azota","target","_blank","rel","noopener noreferrer",1,"text-primary","font-medium"],["azt-track-service","action-online-offline-sbrNKGia_Tt",1,"btn","btn-outline-primary",3,"click"],["name","sidebar"]],template:function(t,i){if(1&t&&(e.TgZ(0,"teacher-layout",0),e.YNc(1,Y5,1,1,"azt-loading-effect",1),e.YNc(2,eT,66,48,"ng-template",null,2,e.W1O),e.qZA()),2&t){const a=e.MAs(3);e.Q6J("headerBackToLink",i.backToLink),e.xp6(1),e.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a)}},dependencies:[F.O5,vi.l,wo._,_.Nh5,Dv,ye.JV,ye.NK],encapsulation:2}),n})();var nT=I(26306),Ng=I(28861);class VA{static customDateTimeValidator(o){const a=o.controls.endTime;let r=o.controls.startTime.value,s=a.value;return r&&s?VA.calculationHomeworkTimeWithZeroSecond(r,s)>0?(a?.setErrors(null),null):(a?.setErrors({customDateTimeValidator:!0}),{identityRevealed:!0}):(a?.setErrors(null),null)}static calculationHomeworkTimeWithZeroSecond(o,t){let i=new Date(o),a=new Date(1e3*VA.getSecondOfDateWithZeroSecond(i)),r=t?new Date(t):new Date,s=new Date(1e3*VA.getSecondOfDateWithZeroSecond(r));return a.getTime()-s.getTime()>0?Math.floor((a.getTime()-s.getTime())/1e3):-1}static getSecondOfDateWithZeroSecond(o){var t=o.getSeconds();return Math.floor(o.getTime()/1e3)-t}}var iT=I(19743),_m=I(63120);let oT=(()=>{class n extends mt.e{constructor(t,i){super(i,t),this.dialogRef=t,this.data=i}btnCloseDialog(t){this.dialogRef.close(t)}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(U.so,8),e.Y36(U.WI,8))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-confirm-change-mode"]],features:[e.qOj],decls:22,vars:13,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-0"],[1,"text-md","font-medium","flex","items-center","p-3","pb-0"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-6","h-6","mr-2","text-pending"],["points","7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2"],["x1","12","y1","8","x2","12","y2","12"],["x1","12","y1","16","x2","12.01","y2","16"],[1,"mt-1"],[3,"defaultHeight"],[1,"text-xs","text-slate-500","dark:text-slate-400","p-3","pt-0"],[1,"p-3","text-right"],["azt-track-service","confirm-change-mode-GE57Kezd_",1,"btn","w-24","mr-2","btn-secondary",3,"click"],["azt-track-service","confirm-change-mode-n7HOfipb2c",1,"btn","w-24","btn-primary",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),e.O4$(),e.TgZ(4,"svg",4),e._UZ(5,"polygon",5)(6,"line",6)(7,"line",7),e.qZA(),e._uU(8),e.ALo(9,"mytranslate"),e.qZA(),e.kcU(),e.TgZ(10,"div",8)(11,"azt-mat-dialog-content",9)(12,"div",10),e._uU(13),e.ALo(14,"mytranslate"),e.qZA()()()()(),e.TgZ(15,"div",11)(16,"button",12),e.NdJ("click",function(){return i.btnCloseDialog(!1)}),e._uU(17),e.ALo(18,"mytranslate"),e.qZA(),e.TgZ(19,"button",13),e.NdJ("click",function(){return i.btnCloseDialog(!0)}),e._uU(20),e.ALo(21,"mytranslate"),e.qZA()()()),2&t&&(e.xp6(8),e.hij(" ",e.lcZ(9,5,"lang_auto_canh_bao")," "),e.xp6(3),e.Q6J("defaultHeight",60),e.xp6(2),e.hij(" ",e.lcZ(14,7,"lang_testbank_warning_change_mode_config")+"?"," "),e.xp6(4),e.hij(" ",e.lcZ(18,9,"lang_auto_dong")," "),e.xp6(3),e.hij(" ",e.lcZ(21,11,"lang_auto_xac_nhan")," "))},dependencies:[Dr.R,ye.JV],encapsulation:2}),n})();var Uv=I(28368),jv=I(59467),aT=I(61325);function rT(n){return o=>!o.value||isNaN(o.value)?null:Number(o.value)<=n?{smallerThan:!0,requiredValue:n}:null}function sT(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_azt_please_enter_percentage_score")))}function lT(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_azt_please_enter_percentage_score_greater_than_zero")))}function cT(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_azt_please_enter_percentage_score_less_than_100_percent")))}function uT(n,o){if(1&n&&(e.TgZ(0,"div",15),e.YNc(1,sT,3,3,"span",16),e.YNc(2,lT,3,3,"span",16),e.YNc(3,cT,3,3,"span",16),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",t.controls.markPercent.errors.required),e.xp6(1),e.Q6J("ngIf",t.controls.markPercent.errors.smallerThan),e.xp6(1),e.Q6J("ngIf",t.controls.markPercent.errors.max)}}function dT(n,o){if(1&n&&(e.TgZ(0,"div",15)(1,"span"),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&n){const t=e.oxw().index,i=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,1,"lang_azt_please_enter_percentage_score_greater_than")+" "+(t>0?i.form.controls.trueFalseQuestionMarkConfig.controls[t-1].controls.markPercent.value:0))}}function mT(n,o){if(1&n&&(e.TgZ(0,"div",8)(1,"div",9)(2,"span",10),e._uU(3),e.ALo(4,"mytranslate"),e.ALo(5,"mytranslate"),e.qZA(),e.TgZ(6,"div",11),e._UZ(7,"input",12),e.TgZ(8,"div",13),e._uU(9,"%"),e.qZA()()(),e.YNc(10,uT,4,3,"div",14),e.YNc(11,dT,4,3,"div",14),e.qZA()),2&n){const t=o.$implicit,i=o.index,a=e.oxw();e.Q6J("formGroup",t),e.xp6(3),e.Oqu(e.lcZ(4,6,"lang_azt_correct_answer")+" "+t.controls.totalCorrect.value+" "+e.lcZ(5,8,"lang_azt_reference")),e.xp6(4),e.Q6J("decimal",!0)("maxLength",6),e.xp6(3),e.Q6J("ngIf",t.controls.markPercent.errors),e.xp6(1),e.Q6J("ngIf",!t.controls.markPercent.errors&&a.checkErrorValueMarkPercent(i))}}let qv=(()=>{class n extends xe.Q{constructor(){super(...arguments),this.errorConfigScoreScaleTrueFalse=new e.vpe}checkErrorValueMarkPercent(t){return!(t<1)&&Number(this.form.controls.trueFalseQuestionMarkConfig.controls[t].controls.markPercent.value)<=Number(this.form.controls.trueFalseQuestionMarkConfig.controls[t-1].controls.markPercent.value)}initFormArray(){this.form.controls.trueFalseQuestionMarkConfig.clear(),this.markDetails.forEach(t=>{const i=new h.cw({totalCorrect:new h.NI(t.totalCorrect,{nonNullable:!0}),markPercent:new h.NI(t.markPercent,{nonNullable:!0,validators:[h.kI.required,h.kI.max(100),rT(0)]})});this.form.controls.trueFalseQuestionMarkConfig.push(i)})}ngOnInit(){super.ngOnInit(),this.initFormArray(),this.form.controls.trueFalseQuestionMarkConfig.valueChanges.subscribe(()=>{const t=this.form.controls.trueFalseQuestionMarkConfig.controls.some((i,a)=>i.controls.markPercent.errors||this.checkErrorValueMarkPercent(a));this.errorConfigScoreScaleTrueFalse.emit(t)})}}return n.\u0275fac=function(){let o;return function(i){return(o||(o=e.n5z(n)))(i||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["config-score-scale-true-false-question"]],inputs:{form:"form",markDetails:"markDetails"},outputs:{errorConfigScoreScaleTrueFalse:"errorConfigScoreScaleTrueFalse"},features:[e.qOj],decls:12,vars:8,consts:[[1,"config-score-scale-true-false-question"],[3,"formGroup"],[1,"grid","grid-cols-12","gap-4"],[1,"col-span-12"],[1,"font-medium","flex","items-center"],[1,"leading-relaxed","text-slate-500","text-xs","mt-1","pr-5"],[1,"col-span-12","lg:col-span-10","grid","grid-cols-12","gap-4"],["class","col-span-12 md:col-span-6",3,"formGroup",4,"ngFor","ngForOf"],[1,"col-span-12","md:col-span-6",3,"formGroup"],[1,"flex","items-center"],[1,"mr-2"],[1,"flex","items-center","ml-2"],["type","text","appOnlyNumber","","formControlName","markPercent","id","total_group_score_2",1,"form-control","border-right-radius-0",2,"border-right","none",3,"decimal","maxLength"],[1,"border-left-radius-0","bg-slate-100","dark:bg-darkmode-400","border","border-slate-200","dark:border-darkmode-400","rounded-md","px-3","py-2"],["class","mt-2 text-xs text-danger font-medium",4,"ngIf"],[1,"mt-2","text-xs","text-danger","font-medium"],[4,"ngIf"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"form",1)(2,"div",2)(3,"div",3)(4,"label",4),e._uU(5),e.ALo(6,"mytranslate"),e.qZA(),e.TgZ(7,"div",5),e._uU(8),e.ALo(9,"mytranslate"),e.qZA()(),e.TgZ(10,"div",6),e.YNc(11,mT,12,10,"div",7),e.qZA()()()()),2&t&&(e.xp6(1),e.Q6J("formGroup",i.form),e.xp6(4),e.hij(" ",e.lcZ(6,4,"lang_azt_configure_scoring_scale_for_true_false_questions")," "),e.xp6(3),e.hij(" ",e.lcZ(9,6,"lang_azt_configure_scoring_scale_for_true_false_questions_desc")+"."," "),e.xp6(3),e.Q6J("ngForOf",i.form.controls.trueFalseQuestionMarkConfig.controls))},dependencies:[F.sg,F.O5,h._Y,h.Fj,h.JJ,h.JL,h.sg,h.u,Dt.Y,wt.M,ye.JV],encapsulation:2}),n})();var Zg=I(98525);function pT(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw().index;e.xp6(1),e.hij("",t+1,".")}}function hT(n,o){1&n&&(e.TgZ(0,"span"),e._UZ(1,"input",60),e.qZA())}function AT(n,o){1&n&&(e.TgZ(0,"span"),e._UZ(1,"input",61),e.qZA())}function _T(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",52)(1,"div",53),e.YNc(2,pT,2,1,"span",41),e.YNc(3,hT,2,0,"span",41),e.YNc(4,AT,2,0,"span",41),e.TgZ(5,"span",54)(6,"input",55),e.NdJ("change",function(a){const s=e.CHM(t).index,l=e.oxw(2).index,c=e.oxw();return e.KtG(c.changeInfoContent(a,l,s))}),e.ALo(7,"mytranslate"),e.qZA()(),e.TgZ(8,"a",56),e.NdJ("click",function(){const r=e.CHM(t).index,s=e.oxw(2).index,l=e.oxw();return e.KtG(l.removeContent(s,r))}),e.O4$(),e.TgZ(9,"svg",57),e._UZ(10,"line",58)(11,"line",59),e.qZA()()()()}if(2&n){const t=o.$implicit,i=e.oxw(2).$implicit;e.xp6(2),e.Q6J("ngIf",3==i.type),e.xp6(1),e.Q6J("ngIf",2==i.type),e.xp6(1),e.Q6J("ngIf",1==i.type),e.xp6(2),e.s9C("placeholder",""==t?e.lcZ(7,5,"lang_testbank_test_config_request_enter_name"):""),e.s9C("value",""!=t&&null!=t?t:"")}}function fT(n,o){1&n&&(e.TgZ(0,"span"),e.O4$(),e.TgZ(1,"svg",43),e._UZ(2,"rect",62)(3,"line",63)(4,"line",64),e.qZA()())}function gT(n,o){1&n&&(e.TgZ(0,"span"),e.O4$(),e.TgZ(1,"svg",43),e._UZ(2,"circle",65)(3,"line",63)(4,"line",64),e.qZA()())}function xT(n,o){1&n&&(e.TgZ(0,"span"),e.O4$(),e.TgZ(1,"svg",43),e._UZ(2,"circle",65)(3,"line",63)(4,"line",64),e.qZA()())}function bT(n,o){if(1&n){const t=e.EpF();e.O4$(),e.kcU(),e.TgZ(0,"div",37),e.YNc(1,_T,12,7,"div",38),e.TgZ(2,"div",39)(3,"button",40),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().index,r=e.oxw();return e.KtG(r.addMoreContent(a))}),e.YNc(4,fT,5,0,"span",41),e.YNc(5,gT,5,0,"span",41),e.YNc(6,xT,5,0,"span",41),e._uU(7),e.ALo(8,"mytranslate"),e.qZA(),e.TgZ(9,"button",42),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().index,r=e.oxw();return e.KtG(r.addFastContent(a))}),e.O4$(),e.TgZ(10,"svg",43),e._UZ(11,"line",9)(12,"line",10),e.qZA(),e._uU(13),e.ALo(14,"mytranslate"),e.qZA()(),e.kcU(),e.TgZ(15,"div",44)(16,"div",45)(17,"div",46)(18,"textarea",47),e.NdJ("change",function(a){e.CHM(t);const r=e.oxw().index,s=e.oxw();return e.KtG(s.changeDataFastContent(a,r))}),e.qZA()(),e.TgZ(19,"div",48),e._uU(20),e.ALo(21,"mytranslate"),e.qZA(),e.TgZ(22,"div",49)(23,"button",50),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.closeDialogFastContent())}),e._uU(24),e.ALo(25,"mytranslate"),e.qZA(),e.TgZ(26,"button",51),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().index,r=e.oxw();return e.KtG(r.changeInfoFastContent(r.infoContentFast[a],a))}),e._uU(27),e.ALo(28,"mytranslate"),e.qZA()()()()()}if(2&n){const t=e.oxw(),i=t.$implicit,a=t.index,r=e.oxw();e.xp6(1),e.Q6J("ngForOf",i.contents),e.xp6(3),e.Q6J("ngIf",1==i.type),e.xp6(1),e.Q6J("ngIf",2==i.type),e.xp6(1),e.Q6J("ngIf",3==i.type),e.xp6(1),e.hij(" ",e.lcZ(8,10,"lang_testbank_test_config_more_options")," "),e.xp6(6),e.hij(" ",e.lcZ(14,12,"lang_testbank_test_config_quick_add")," "),e.xp6(2),e.Q6J("ngClass",r.checkDialogFastContent[a]?"":"hiddenIpt"),e.xp6(5),e.hij("* ",e.lcZ(21,14,"lang_testbank_test_config_note"),""),e.xp6(4),e.hij(" ",e.lcZ(25,16,"lang_button_cancel")," "),e.xp6(3),e.hij(" ",e.lcZ(28,18,"lang_button_confirm")," ")}}const vT=function(n){return{"mb-5":n}},wT=function(n){return{"border-danger":n}};function yT(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",12)(1,"div",13)(2,"div",14)(3,"div",15)(4,"div",16),e._uU(5),e.ALo(6,"mytranslate"),e.qZA(),e.TgZ(7,"input",17),e.NdJ("change",function(a){const s=e.CHM(t).index,l=e.oxw();return e.KtG(l.changeInfoTitle(a,s))}),e.ALo(8,"mytranslate"),e.ALo(9,"mytranslate"),e.qZA()()(),e.TgZ(10,"div",18)(11,"mat-form-field",19)(12,"mat-select",20),e.NdJ("selectionChange",function(a){const s=e.CHM(t).index,l=e.oxw();return e.KtG(l.changeTypeField(a,s))}),e.TgZ(13,"mat-option",21),e._uU(14),e.ALo(15,"mytranslate"),e.qZA(),e.TgZ(16,"mat-option",22),e._uU(17),e.ALo(18,"mytranslate"),e.qZA(),e.TgZ(19,"mat-option",23),e._uU(20),e.ALo(21,"mytranslate"),e.qZA(),e.TgZ(22,"mat-option",24),e._uU(23),e.ALo(24,"mytranslate"),e.qZA()()()(),e.TgZ(25,"div",25)(26,"div",26)(27,"div",27)(28,"input",28),e.NdJ("click",function(a){const s=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.setIsFullNameField(a,s))}),e.ALo(29,"mytranslate"),e.qZA()(),e.TgZ(30,"button",29),e.NdJ("click",function(){const r=e.CHM(t).index,s=e.oxw();return e.KtG(s.removeFields(r))}),e.ALo(31,"mytranslate"),e.O4$(),e.TgZ(32,"svg",30),e._UZ(33,"path",31)(34,"path",32)(35,"path",33)(36,"line",34)(37,"line",35),e.qZA()()()()(),e.YNc(38,bT,29,20,"div",36),e.qZA()}if(2&n){const t=o.$implicit,i=o.index,a=e.oxw();e.xp6(1),e.Q6J("ngClass",e.VKq(33,vT,i!==a.infoFields.length-1)),e.xp6(4),e.AsE("",e.lcZ(6,15,"lang_testbank_test_config_information")," ",i+1,""),e.xp6(2),e.s9C("placeholder",t.error?e.lcZ(8,17,"lang_testbank_test_config_request_enter_name"):e.lcZ(9,19,"lang_testbank_test_config_enter_Information_you_want_student_enter")),e.Q6J("ngClass",e.VKq(35,wT,t.error))("value",t.title),e.xp6(5),e.s9C("value",t.type),e.xp6(2),e.hij(" ",e.lcZ(15,21,"lang_testbank_test_config_reply_short")," "),e.xp6(3),e.Oqu(e.lcZ(18,23,"lang_testbank_test_config_checkbox")),e.xp6(3),e.Oqu(e.lcZ(21,25,"lang_testbank_test_config_quiz")),e.xp6(3),e.hij(" ",e.lcZ(24,27,"lang_testbank_test_config_drop_down_menu")," "),e.xp6(5),e.s9C("matTooltip",e.lcZ(29,29,"lang_testbank_test_config_is_full_name_info_field")),e.Q6J("checked",t.isFullName),e.xp6(2),e.s9C("matTooltip",e.lcZ(31,31,"lang_testbank_test_config_delete_information")),e.xp6(8),e.Q6J("ngIf",0!=t.type)}}function CT(n,o){1&n&&(e.TgZ(0,"div",66),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_config_exam_info_student_error")," "))}let TT=(()=>{class n extends xe.Q{removeFields(t){this.infoFields.splice(t,1),this.checkValidInfo.emit()}addNewFields(t){let i="";this.commonService.myTranslate(["lang_auto_thong_tin"]).subscribe(r=>{i=r.lang_auto_thong_tin}),this.infoFields.push({type:0,title:i+" "+((this.infoFields?this.infoFields.length:0)+1),contents:[]}),this.checkValidInfo.emit()}changeTypeField(t,i){this.infoFields[i].type!=t.value&&(this.infoFields[i].type=Number(t.value),this.infoFields[i].error=!1,this.checkValidInfo.emit())}setIsFullNameField(t,i){this.infoFields.forEach(a=>{a.title!=i.title&&(a.isFullName=!1)}),i.isFullName=!i.isFullName}changeInfoTitle(t,i){t.target.value&&""==t.target.value?(this.formInfoInvalid=!0,this.infoFields[i].error=!0,this.infoFields[i].title=t.target.value):(this.formInfoInvalid=!1,this.infoFields[i].error=!1,this.infoFields[i].title=t.target.value)}changeInfoContent(t,i,a){t.target.value&&""!=t.target.value?(this.infoFields[i].contents[a]=t.target.value,this.formInfoInvalid=!1):(this.infoFields[i].contents[a]=t.target.value,this.formInfoInvalid=!0)}removeContent(t,i){this.infoFields[t].contents?.splice(i,1),this.checkValidInfo.emit()}addMoreContent(t,i){let a="";this.commonService.myTranslate(["lang_auto_tuy_chon"]).subscribe(s=>{a=s.lang_auto_tuy_chon});let r=this.infoFields[t].contents?this.infoFields[t].contents.length:0;this.infoFields[t].contents&&Array.isArray(this.infoFields[t].contents)||(this.infoFields[t].contents=new Array),this.infoFields[t].contents.push(a+" "+(r+1)),this.checkValidInfo.emit()}addFastContent(t){this.indexContent=t,this.checkDialogFastContent[this.indexContent]=!0}changeDataFastContent(t,i){t.target.value&&(this.infoContentFast[i]=t.target.value)}closeDialogFastContent(){this.checkDialogFastContent[this.indexContent]=!1}changeInfoFastContent(t,i){if(""!=t){let a=t.split("\n");a=a.map(r=>r.trim()),a=a.filter(r=>""!=r),this.infoFields[i].contents||(this.infoFields[i].contents=new Array),this.infoFields[i].contents=this.infoFields[i].contents.concat(a)}this.checkDialogFastContent[i]=!1,this.checkValidInfo.emit()}ngOnInit(){super.ngOnInit()}constructor(t){super(),this.commonService=t,this.infoFields=[],this.formInfoInvalid=!1,this.infoFieldsChange=new e.vpe,this.formInfoInvalidChange=new e.vpe,this.checkValidInfo=new e.vpe,this.infoContentFast=[],this.indexContent=0,this.checkDialogFastContent=[]}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Yn.z))},n.\u0275cmp=e.Xpm({type:n,selectors:[["test-config-online-student-info"]],inputs:{infoFields:"infoFields",formInfoInvalid:"formInfoInvalid"},outputs:{infoFieldsChange:"infoFieldsChange",formInfoInvalidChange:"formInfoInvalidChange",checkValidInfo:"checkValidInfo"},features:[e.qOj],decls:18,vars:11,consts:[[1,"border","border-slate-200/60","dark:border-darkmode-400","rounded-md","pb-1"],[1,"p-3","bg-slate-100","dark:bg-darkmode-400","flex","items-center"],[1,"mr-auto"],[1,"p-5"],["class","info-field",4,"ngFor","ngForOf"],["class","text-xs text-danger mt-1",4,"ngIf"],[1,"mt-3"],["azt-track-service","config-student-info-FlktZt6AJN",1,"btn","btn-primary","mr-3",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","mr-2","lucide"],["x1","12","y1","5","x2","12","y2","19"],["x1","5","y1","12","x2","19","y2","12"],[1,"inline-block","ml-3","leading-relaxed","text-slate-500","text-xs"],[1,"info-field"],[1,"grid","grid-cols-12","gap-5",3,"ngClass"],[1,"col-span-12","md:col-span-6"],[1,"input-group"],[1,"input-group-text","whitespace-nowrap"],["type","text",1,"form-control",3,"ngClass","placeholder","value","change"],[1,"col-span-8","md:col-span-3"],["appearance","outline"],[3,"value","selectionChange"],["value","0"],["value","1"],["value","2"],["value","3"],[1,"col-span-4","md:col-span-3","text-right"],[1,"flex","float-right"],[1,"setting-input","form-switch","mr-3",2,"align-content","center"],["azt-track-service","config-student-info-DdCXuz7zD","id","switch-full-name-field","type","checkbox",1,"show-code","form-check-input",3,"checked","matTooltip","click"],["azt-track-service","config-student-info-DEsxAq2B3",1,"btn","btn-secondary",3,"matTooltip","click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide"],["d","M3 6h18"],["d","M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"],["d","M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"],["x1","10","y1","11","x2","10","y2","17"],["x1","14","y1","11","x2","14","y2","17"],["class","info-content",4,"ngIf"],[1,"info-content"],["class","py-2",4,"ngFor","ngForOf"],[1,"py-2","flex","mb-3"],["azt-track-service","config-student-info-NVQjKt97Fu",1,"btn","btn-secondary","btn-sm","mr-2",3,"click"],[4,"ngIf"],["azt-track-service","config-student-info-OcHEB-Morx",1,"btn","btn-secondary","btn-sm",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","mr-2"],[1,"azt-fast-content",3,"ngClass"],[1,"azt-fast","p-4"],[1,"dialog-content"],["rows","4",1,"form-control",3,"change"],[1,"leading-relaxed","text-slate-500","text-xs","mt-2"],[1,"text-right","my-4"],["azt-track-service","config-student-info-8-eIbBQm3W",1,"btn","btn-outline-secondary","btn-sm","mr-2",3,"click"],["azt-track-service","config-student-info-2A5hJbaAWL",1,"btn","btn-primary","btn-sm",3,"click"],[1,"py-2"],[1,"flex","items-center"],[1,"w-full","mx-2"],["type","text",1,"form-control",2,"border","none","box-shadow","none",3,"placeholder","value","change"],["azt-track-service","config-student-info-QGYSvwSMLT",1,"btn","btn-primary","rounded-full",2,"padding","2px",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4"],["x1","18","y1","6","x2","6","y2","18"],["x1","6","y1","6","x2","18","y2","18"],["type","radio","disabled","",1,"form-check-input","cursor-default"],["type","checkbox","disabled","",1,"form-check-input","cursor-default"],["x","3","y","3","width","18","height","18","rx","2","ry","2"],["x1","12","y1","8","x2","12","y2","16"],["x1","8","y1","12","x2","16","y2","12"],["cx","12","cy","12","r","10"],[1,"text-xs","text-danger","mt-1"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h3",2),e._uU(3),e.ALo(4,"mytranslate"),e.qZA()(),e.TgZ(5,"div",3),e.YNc(6,yT,39,37,"div",4),e.YNc(7,CT,3,3,"div",5),e.qZA()(),e.TgZ(8,"div",6)(9,"button",7),e.NdJ("click",function(){return i.addNewFields("")}),e.O4$(),e.TgZ(10,"svg",8),e._UZ(11,"line",9)(12,"line",10),e.qZA(),e._uU(13),e.ALo(14,"mytranslate"),e.qZA(),e.kcU(),e.TgZ(15,"span",11),e._uU(16),e.ALo(17,"mytranslate"),e.qZA()()),2&t&&(e.xp6(3),e.Oqu(e.lcZ(4,5,"lang_testbank_test_config_configuration")),e.xp6(3),e.Q6J("ngForOf",i.infoFields),e.xp6(1),e.Q6J("ngIf",i.formInfoInvalid),e.xp6(6),e.hij(" ",e.lcZ(14,7,"lang_testbank_test_config_add_information")," "),e.xp6(3),e.hij("*",e.lcZ(17,9,"lang_testbank_test_config_click_add_information"),"."))},dependencies:[F.mk,F.sg,F.O5,js.ey,ms.KE,Zg.gD,Ai.gM,ye.JV],encapsulation:2}),n})();var mu=I(10504),Rv=I(92296),pu=I(94690),zv=I(3849),Zx=I(34340);function kT(n,o){1&n&&(e.TgZ(0,"div",16)(1,"span",17),e._UZ(2,"azt-loading-ui"),e.qZA(),e.TgZ(3,"span",18),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()()),2&n&&(e.xp6(4),e.Oqu(e.lcZ(5,1,"lang_auto_dang_chuan_bi_tai_lieu_doing")))}function ST(n,o){if(1&n&&e._UZ(0,"azt-question-standalone-for-preview",20),2&n){const t=e.oxw(2),i=t.$implicit,a=t.index,r=e.oxw(2);e.Q6J("examObj",r.examObj)("questionObj",i)("follower",r.followerRenderQuest)("curQuestionIndex",a)}}function ET(n,o){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,ST,1,4,"azt-question-standalone-for-preview",19),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.examObj)}}function OT(n,o){if(1&n&&(e.ynx(0),e.YNc(1,ET,2,1,"div",0),e.BQk()),2&n){const t=o.$implicit,i=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.groupId===i.data.groupId||(null==t.groupInfo?null:t.groupInfo.groupId)===i.data.groupId)}}function IT(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),e._UZ(5,"div",5),e.qZA(),e.TgZ(6,"div",6)(7,"a",7)(8,"span",8),e._UZ(9,"lucide-icon",9),e.qZA()()()(),e.TgZ(10,"azt-mat-dialog-content",10),e.YNc(11,kT,6,3,"div",11),e.TgZ(12,"div",12),e._UZ(13,"div",13),e.YNc(14,OT,2,1,"ng-container",14),e._UZ(15,"div",15),e.qZA()()()(),e.BQk()),2&n){const t=e.oxw();e.xp6(11),e.Q6J("ngIf",t.statusObj.loading),e.xp6(3),e.Q6J("ngForOf",t.questionList)}}let MT=(()=>{class n extends mt.e{getData(t){this.initStatusObj(),this.permissionService.hasViewPermission("exam",t)?this.examService.apiExamGetQuestionsIdGet(t?.id??0).subscribe(i=>{const a=this.commonService.castJsonToClassObjs(Le.v,JSON.stringify(i.data?.questionObjs||[]))??[];this.followerRenderQuest.setNumQuest(a.length),this.addRoleQuestion(a),this.questionList=a,this.examObj=i.data?.examObj,this.successStatusObj()}):this.showErrorSnack("lang_auto_ban_khong_co_quyen_thuc_thi_chuc_nang_nay")}addRoleQuestion(t){for(let i=0;i<t.length;i++)t[i].isRoleTeacher=!0}ngOnInit(){this.data?.obj&&this.getData(this.data.obj),super.ngOnInit()}constructor(t,i,a,r,s){super(s,r),this.baseApiService=t,this.permissionService=i,this.examService=a,this.dialogRef=r,this.data=s,this.questionList=[],this.followerRenderQuest=new mu.p}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Rv.V),e.Y36(pu.j),e.Y36(zv.O),e.Y36(U.so,8),e.Y36(U.WI,8))},n.\u0275cmp=e.Xpm({type:n,selectors:[["azt-preview-group-of-exam"]],features:[e.qOj],decls:2,vars:4,consts:[[4,"ngIf"],[1,"az-dialog-info"],[1,"box",2,"overflow-x","hidden"],[1,"flex","items-center","p-2","bg-slate-100","dark:bg-darkmode-400"],[1,"mr-auto"],[1,"flex","items-center","mr-2"],[1,"ml-auto"],["azt-track-service","azt-preview-exam-y2xqBN7DlGX",1,"btn","btn-transparent","btn-outline-danger","btn-sm",3,"mat-dialog-close"],[1,"w-4","h-4","flex-none"],["name","x"],[1,"mt-3"],["class","flex justify-center items-center h-40",4,"ngIf"],["id","boxContentQuestion",1,"p-2"],[1,"pt-3"],[4,"ngFor","ngForOf"],[1,"py-5"],[1,"flex","justify-center","items-center","h-40"],[1,"w-4","h-4","inline-block"],[1,"sr-only","ml-2"],[3,"examObj","questionObj","follower","curQuestionIndex",4,"ngIf"],[3,"examObj","questionObj","follower","curQuestionIndex"]],template:function(t,i){1&t&&(e.YNc(0,IT,16,2,"ng-container",0),e.ALo(1,"viewPermission")),2&t&&e.Q6J("ngIf",e.xi3(1,1,null==i.data?null:i.data.obj,"exam"))},dependencies:[F.sg,F.O5,U.ZT,_.Nh5,Zx.A,Dr.R,wi.n,ye.JV,ye.J7],encapsulation:2}),n})();const Hv=function(n){return{paddingCustomQuestion:n}};function LT(n,o){if(1&n&&(e.TgZ(0,"div",12)(1,"p",13),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&n){const t=e.oxw(2);e.Q6J("ngClass",e.VKq(4,Hv,1==(null==t.form.controls.isCreateSubTest?null:t.form.controls.isCreateSubTest.value)&&t.isGroupMixQuestion&&t.examGroupInfos.length>1)),e.xp6(2),e.hij(" ",e.lcZ(3,2,"lang_auto_nhap_so_luong_cau")," ")}}const BT=function(n){return{"is-invalid":n}};function PT(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",14)(1,"div",15)(2,"div",16)(3,"div",17)(4,"input",18),e.NdJ("input",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.validWhenChangeLimitMixQuestionValue())}),e.qZA()(),e.TgZ(5,"div",19)(6,"button",20),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.changesMixQuestionGroupType())}),e._uU(7),e.ALo(8,"mytranslate"),e.qZA()()()()()}if(2&n){const t=e.oxw(2);e.xp6(4),e.Q6J("ngClass",e.VKq(5,BT,t.formControlLimitMixQuestion.invalid||t.checkValidateCountQuestion)),e.xp6(2),e.Q6J("disabled",t.examGroupInfos.length<=1),e.xp6(1),e.hij(" ",e.lcZ(8,3,"lang_testbank_test_config_get_with_group")," ")}}function QT(n,o){1&n&&(e.TgZ(0,"div",49),e.ALo(1,"mytranslate"),e.O4$(),e.TgZ(2,"svg",50),e._UZ(3,"line",51)(4,"path",52),e.qZA()()),2&n&&e.s9C("matTooltip",e.lcZ(1,1,"lang_auto_nhom_cau_hoi_duoc_co_dinh"))}const Jv=function(n){return{"border-danger":n}};function FT(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"input",53),e.NdJ("input",function(){e.CHM(t);const a=e.oxw().$implicit,r=e.oxw(3);return e.KtG(r.validateWhenChangeGroupValue(a.controls.groupId))})("keydown",function(a){e.CHM(t);const r=e.oxw().$implicit,s=e.oxw(3);return e.KtG(s.triggerCtrlEnter(a,r.controls.groupId))}),e.qZA()}if(2&n){const t=e.oxw().$implicit,i=e.oxw(3);e.Q6J("ngClass",e.VKq(1,Jv,!t.valid||!i.totalTakeQuestion))}}function NT(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"input",54),e.NdJ("input",function(){e.CHM(t);const a=e.oxw().$implicit,r=e.oxw(3);return e.KtG(r.validateWhenChangeGroupValue(a.controls.groupId))}),e.qZA()}if(2&n){const t=e.oxw().$implicit,i=e.oxw(3);e.Q6J("ngClass",e.VKq(1,Jv,!t.valid||!i.totalTakeQuestion))}}function ZT(n,o){1&n&&e._UZ(0,"input",55)}function DT(n,o){1&n&&(e.TgZ(0,"div",56),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_testbank_please_enter_score")," "))}function UT(n,o){1&n&&(e.TgZ(0,"div",56),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_testbank_please_enter_score_greater_than_0")," "))}function jT(n,o){1&n&&(e.TgZ(0,"div",57),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_testbank_the_number_of_sentences_in_the_group_equal_to_0_points_will_not_be_counted")," "))}function qT(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",32),e.ynx(1,1),e.TgZ(2,"div",33),e.YNc(3,QT,5,3,"div",34),e.TgZ(4,"p",35),e._uU(5),e.ALo(6,"mytranslate"),e.ALo(7,"mytranslate"),e.qZA(),e.TgZ(8,"button",36),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw(3);return e.KtG(s.previewGroupExam(r.controls.groupId.value))}),e.TgZ(9,"span",37),e.ALo(10,"mytranslate"),e._UZ(11,"lucide-icon",38),e.qZA()()(),e.TgZ(12,"div",39),e.YNc(13,FT,1,3,"input",40),e.YNc(14,NT,1,3,"input",41),e.YNc(15,ZT,1,0,"input",42),e.TgZ(16,"div",43)(17,"div",44),e.ALo(18,"mytranslate"),e._UZ(19,"label",45),e._uU(20),e.ALo(21,"mytranslate"),e.qZA(),e.TgZ(22,"input",46),e.NdJ("input",function(){const r=e.CHM(t).$implicit,s=e.oxw(3);return e.KtG(s.validateWhenChangeGroupValue(r.controls.groupId))}),e.qZA()()(),e.YNc(23,DT,3,3,"div",47),e.YNc(24,UT,3,3,"div",47),e.YNc(25,jT,3,3,"div",48),e.BQk(),e.qZA()}if(2&n){const t=o.$implicit,i=o.index;let a,r,s;e.xp6(1),e.Q6J("formGroup",t),e.xp6(2),e.Q6J("ngIf",t.controls.isFixed.value),e.xp6(2),e.HOy(" ",e.lcZ(6,21,"lang_testbank_test_config_group")," ",i+1," (",t.controls.maxQuestion.value," ",e.lcZ(7,23,"lang_testbank_test_config_question"),") "),e.xp6(4),e.s9C("matTooltip",e.lcZ(10,25,"lang_auto_xem_chi_tiet")),e.Q6J("matTooltipShowDelay",1e3),e.xp6(4),e.Q6J("ngIf",1!=t.controls.isFixed.value),e.xp6(1),e.Q6J("ngIf",1!=t.controls.isFixed.value),e.xp6(1),e.Q6J("ngIf",1==t.controls.isFixed.value),e.xp6(2),e.s9C("matTooltip",e.lcZ(18,27,"lang_core_enter_total_group_score")),e.Q6J("matTooltipShowDelay",1e3)("matTooltipDisabled",0!==i),e.xp6(2),e.s9C("for","total_group_score_"+(i+1)),e.xp6(1),e.hij(" ",e.lcZ(21,29,"lang_auto_Diem")," "),e.xp6(2),e.s9C("id","total_group_score_"+(i+1)),e.Q6J("decimal",!0),e.xp6(1),e.Q6J("ngIf",(null!==(a=t.controls.totalQuestion.value)&&void 0!==a?a:0)>0&&!t.controls.totalGroupScore.value&&"0"!==(null==t.controls.totalGroupScore.value?null:t.controls.totalGroupScore.value.toString())),e.xp6(1),e.Q6J("ngIf",(null!==(r=t.controls.totalQuestion.value)&&void 0!==r?r:0)>0&&"0"===(null==t.controls.totalGroupScore.value?null:t.controls.totalGroupScore.value.toString())),e.xp6(1),e.Q6J("ngIf",0==t.controls.totalQuestion.value&&"0"!==(null!==(s=t.controls.totalGroupScore.value)&&void 0!==s?s:0).toString())}}function RT(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",21)(1,"div",22)(2,"div",23),e._uU(3),e.ALo(4,"mytranslate"),e.TgZ(5,"span"),e._uU(6),e.ALo(7,"mytranslate"),e.qZA(),e.TgZ(8,"div",24),e._uU(9),e.ALo(10,"mytranslate"),e.qZA()(),e.TgZ(11,"div",25)(12,"a",26),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.changesMixQuestionGroupType())}),e._uU(13),e.ALo(14,"mytranslate"),e.qZA()()(),e.TgZ(15,"div",27)(16,"ng-scrollbar",28)(17,"div",29),e.ynx(18,30),e.YNc(19,qT,26,31,"div",31),e.BQk(),e.qZA()()()()}if(2&n){const t=e.oxw(2);e.xp6(3),e.hij(" ",e.lcZ(4,9,"lang_auto_so_luong_cau_hoi_can_lay")," "),e.xp6(3),e.lnq("(",t.totalTakeQuestion,"/",t.obj.countQuestion," ",e.lcZ(7,11,"lang_auto_cau_brackets"),""),e.xp6(3),e.hij(" ",e.lcZ(10,13,"lang_testbank_total_score_entered")+": "+t.totalPoint," "),e.xp6(4),e.hij(" ",e.lcZ(14,15,"lang_testbank_test_config_cancel_get_with_group")," "),e.xp6(3),e.Q6J("visibility","hover")("autoHeightDisabled",!1),e.xp6(3),e.Q6J("ngForOf",t.formArrayGroupInfos.controls)}}function zT(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e._UZ(3,"br"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_vui_long_khong_bo_trong")," "))}function HT(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e._UZ(3,"br"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_vui_long_nhap_lon_hon_0")," "))}function JT(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.ALo(3,"mytranslate"),e._UZ(4,"br"),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.lnq(" ",e.lcZ(2,3,"lang_auto_vui_long_nhap_nho_hon_tong_so_cau")," (",t.obj.countQuestion," ",e.lcZ(3,5,"lang_auto_cau_brackets")," ")}}function KT(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e._UZ(3,"br"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_vui_long_nhap_nho_hon_hoac_bang_120")," "))}function GT(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.ALo(3,"mytranslate"),e._UZ(4,"br"),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.lnq(" ",e.lcZ(2,3,"lang_azt_vui_long_nhap_lon_hon_hoac_bang_tong_so_cau_da_co_dinh")," (",t.minLimitMixQuestion," ",e.lcZ(3,5,"lang_testbank_offline_test_question"),") ")}}function YT(n,o){if(1&n&&(e.TgZ(0,"div",58),e.YNc(1,zT,4,3,"span",59),e.YNc(2,HT,4,3,"span",59),e.YNc(3,JT,5,7,"span",59),e.YNc(4,KT,4,3,"span",59),e.YNc(5,GT,5,7,"span",59),e.qZA()),2&n){const t=e.oxw(2);let i,a;e.xp6(1),e.Q6J("ngIf",!t.form.controls.limitMixQuestion.value),e.xp6(1),e.Q6J("ngIf",t.form.controls.limitMixQuestion.value&&t.form.controls.limitMixQuestion.value<=0),e.xp6(1),e.Q6J("ngIf",(null!==(i=t.form.controls.limitMixQuestion.value)&&void 0!==i?i:0)>(null!==(i=t.obj.countQuestion)&&void 0!==i?i:0)),e.xp6(1),e.Q6J("ngIf",t.fromPrintOffline&&(null!==(a=t.form.controls.limitMixQuestion.value)&&void 0!==a?a:0)<t.totalTakeQuestion&&(null!==(a=t.form.controls.limitMixQuestion.value)&&void 0!==a?a:0)>120),e.xp6(1),e.Q6J("ngIf",t.form.controls.limitMixQuestion.value&&t.form.controls.limitMixQuestion.value>0&&t.form.controls.limitMixQuestion.value<t.minLimitMixQuestion)}}function $T(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e._UZ(3,"br"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_vui_long_khong_nhap_qua_so_cau_toi_da_trong_nhom")," "))}function VT(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e._UZ(3,"br"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_vui_long_nhap_tong_so_cau_cua_cac_nhom_lon_hon_0")," "))}function WT(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e._UZ(3,"br"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_vui_long_nhap_tong_so_cac_cau_cua_cac_nhom_lon_hon_tong_so_cau")," "))}function XT(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_vui_long_nhap_tong_so_cau_cua_cac_nhom_nho_nhon_hoac_bang_120")," "))}function ek(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e._UZ(3,"br"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_vui_long_khong_bo_trong")," "))}function tk(n,o){if(1&n&&(e.TgZ(0,"div",58),e.YNc(1,$T,4,3,"span",59),e.YNc(2,VT,4,3,"span",59),e.YNc(3,WT,4,3,"span",59),e.YNc(4,XT,3,3,"span",59),e.YNc(5,ek,4,3,"span",59),e.qZA()),2&n){const t=e.oxw(2);let i,a,r;e.xp6(1),e.Q6J("ngIf",t.totalTakeQuestion&&!(t.totalTakeQuestion>(null!==(i=t.obj.countQuestion)&&void 0!==i?i:0))),e.xp6(1),e.Q6J("ngIf",!t.totalTakeQuestion),e.xp6(1),e.Q6J("ngIf",t.totalTakeQuestion>(null!==(a=t.obj.countQuestion)&&void 0!==a?a:0)),e.xp6(1),e.Q6J("ngIf",t.fromPrintOffline&&t.totalTakeQuestion<(null!==(r=t.obj.countQuestion)&&void 0!==r?r:0)&&(null!==(r=t.obj.countQuestion)&&void 0!==r?r:0)>120),e.xp6(1),e.Q6J("ngIf",t.checkEmpty)}}function nk(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.ALo(3,"mytranslate"),e.ALo(4,"mytranslate"),e.ALo(5,"mytranslate"),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.gL8(" ",e.lcZ(2,6,"lang_testbank_test_config_enter_bigger_number_question_permanent")," (",t.minLimitMixQuestion," ",e.lcZ(3,8,"lang_testbank_test_config_question"),"), ",e.lcZ(4,10,"lang_testbank_test_config_less_number_question_upload")," (",t.obj.countQuestion," ",e.lcZ(5,12,"lang_testbank_test_config_question"),"). ")}}function ik(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.ALo(3,"mytranslate"),e.ALo(4,"mytranslate"),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.HOy(" ",e.lcZ(2,4,"lang_testbank_test_config_enter_repuest_bigger_0"),", ",e.lcZ(3,6,"lang_testbank_test_config_less_number_question_upload")," (",t.obj.countQuestion," ",e.lcZ(4,8,"lang_testbank_test_config_question"),"). ")}}function ok(n,o){if(1&n&&(e.TgZ(0,"span",63),e._uU(1),e.ALo(2,"mytranslate"),e.ALo(3,"mytranslate"),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.lnq(" ",e.lcZ(2,3,"lang_testbank_test_config_validate_number_question_enter")," (",t.obj.countQuestion," ",e.lcZ(3,5,"lang_testbank_test_config_question"),"). ")}}function ak(n,o){if(1&n&&(e.TgZ(0,"div",60),e.YNc(1,nk,6,14,"span",59),e.YNc(2,ik,5,10,"span",59),e.YNc(3,ok,4,7,"span",61),e.TgZ(4,"a",62),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",1==(null==t.form.controls.mixQuestion?null:t.form.controls.mixQuestion.value)&&t.minLimitMixQuestion>1&&!t.isGroupMixQuestion),e.xp6(1),e.Q6J("ngIf",1==(null==t.form.controls.mixQuestion?null:t.form.controls.mixQuestion.value)&&1==t.minLimitMixQuestion&&!t.isGroupMixQuestion),e.xp6(1),e.Q6J("ngIf",1==(null==t.form.controls.mixQuestion?null:t.form.controls.mixQuestion.value)&&t.isGroupMixQuestion),e.xp6(2),e.hij(" ",e.lcZ(6,4,"lang_auto_tim_hieu_them")," ")}}function rk(n,o){1&n&&(e.TgZ(0,"div",64)(1,"p",65),e._uU(2),e.ALo(3,"mytranslate"),e.ALo(4,"mytranslate"),e.TgZ(5,"a",66),e._uU(6),e.ALo(7,"mytranslate"),e.qZA()()()),2&n&&(e.xp6(2),e.AsE(" ",e.lcZ(3,3,"lang_auto_de_con_duoc_tao_tu_mot_luong_cau_hoi_duoc_lay_ngau_nhien_trong_de_goc_vi_du_de_goc_co_1000_cau_hoi")," ",e.lcZ(4,5,"lang_auto_ban_co_the_chi_in_40_cau_ngau_nhien_trong_1000_cau_hoi_do")," "),e.xp6(4),e.hij(" ",e.lcZ(7,7,"lang_auto_tim_hieu_them")," "))}function sk(n,o){if(1&n&&(e.TgZ(0,"div",12)(1,"p",13),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&n){const t=e.oxw(2);e.Q6J("ngClass",e.VKq(4,Hv,1==(null==t.form.controls.isCreateSubTest?null:t.form.controls.isCreateSubTest.value)&&t.isGroupMixQuestion&&t.examGroupInfos.length>1)),e.xp6(2),e.hij(" ",e.lcZ(3,2,"lang_testbank_enter_the_total_score_for_subtopics")," ")}}function lk(n,o){1&n&&(e.TgZ(0,"div",56),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_testbank_please_enter_total_score")," "))}function ck(n,o){1&n&&(e.TgZ(0,"div",56),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_testbank_please_enter_a_total_score_greater_than_0")," "))}function uk(n,o){if(1&n&&(e.TgZ(0,"div",14)(1,"div",15)(2,"div",16)(3,"div",67),e._UZ(4,"input",68),e.YNc(5,lk,3,3,"div",47),e.YNc(6,ck,3,3,"div",47),e.qZA()()()()),2&n){const t=e.oxw(2);e.xp6(4),e.Q6J("decimal",!0),e.xp6(1),e.Q6J("ngIf",!(null!=t.form.controls.totalPointQuestionNoGroup&&t.form.controls.totalPointQuestionNoGroup.value)&&"0"!==(null==t.form.controls.totalPointQuestionNoGroup||null==t.form.controls.totalPointQuestionNoGroup.value?null:t.form.controls.totalPointQuestionNoGroup.value.toString())),e.xp6(1),e.Q6J("ngIf","0"===(null==t.form.controls.totalPointQuestionNoGroup||null==t.form.controls.totalPointQuestionNoGroup.value?null:t.form.controls.totalPointQuestionNoGroup.value.toString())||0===(null==t.form.controls.totalPointQuestionNoGroup?null:t.form.controls.totalPointQuestionNoGroup.value))}}const dk=function(n,o){return{"md:col-span-9 setting-form-input-default-style":n,"col-md-12 setting-form-input-with-no-left-column":o}},mk=function(n,o){return{"md:col-span-9 setting-form-input-default-style mt-4":n,"col-span-12 mt-2 setting-form-input-with-no-left-column":o}};function pk(n,o){if(1&n&&(e.ynx(0,1),e.TgZ(1,"div",2),e.YNc(2,LT,4,6,"div",3),e.TgZ(3,"div",4)(4,"div",5),e.YNc(5,PT,9,7,"div",6),e.YNc(6,RT,20,17,"div",7),e.YNc(7,YT,6,5,"div",8),e.YNc(8,tk,6,5,"div",8),e.YNc(9,ak,7,6,"div",9),e.YNc(10,rk,8,9,"div",10),e.qZA()(),e.YNc(11,sk,4,6,"div",3),e.TgZ(12,"div",11),e.YNc(13,uk,7,3,"div",6),e.qZA()(),e.BQk()),2&n){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(2),e.Q6J("ngIf",!t.fromPrintOffline),e.xp6(1),e.Q6J("ngClass",e.WLB(12,dk,!t.fromPrintOffline,t.fromPrintOffline)),e.xp6(2),e.Q6J("ngIf",!t.isGroupMixQuestion),e.xp6(1),e.Q6J("ngIf",t.isGroupMixQuestion&&t.examGroupInfos.length>1),e.xp6(1),e.Q6J("ngIf",t.checkValidateCountQuestion&&!t.isGroupMixQuestion&&t.form.controls.limitMixQuestion),e.xp6(1),e.Q6J("ngIf",t.checkValidateCountQuestion&&t.isGroupMixQuestion),e.xp6(1),e.Q6J("ngIf",!t.fromPrintOffline),e.xp6(1),e.Q6J("ngIf",t.fromPrintOffline),e.xp6(1),e.Q6J("ngIf",!t.isGroupMixQuestion),e.xp6(1),e.Q6J("ngClass",e.WLB(15,mk,!t.fromPrintOffline,t.fromPrintOffline)),e.xp6(1),e.Q6J("ngIf",!t.isGroupMixQuestion)}}let Kv=(()=>{class n extends xe.Q{emitDataToParent(){this.isGroupMixQuestionChange.emit(this.isGroupMixQuestion),this.checkValidateCountQuestionChange.emit(this.checkValidateCountQuestion),this.totalTakeQuestionChange.emit(this.totalTakeQuestion)}changeIsGroupMixQuestion(t){this.isGroupMixQuestion=t,this.emitDataToParent()}changeCheckValidateCountQuestion(t){this.checkValidateCountQuestion=t,this.emitDataToParent()}changeTotalTakeQuestion(t){this.totalTakeQuestion=t}changesMixQuestionGroupType(){this.changeIsGroupMixQuestion(!this.isGroupMixQuestion),this.isGroupMixQuestion?this._validGroupMixQuestionValue():this.validWhenChangeLimitMixQuestionValue()}setFormQuestion(t,i){let a=this.formArrayGroupInfos.getRawValue(),r=this._getGroupMixQuestionValue(t),s=this._countNullMixQuestionValue();if(null!=r){if(this.commonService.isMobileOrTable())for(let l=0;l<a.length;l++)0==a[l].isFixed&&a[l].groupId!=t&&s>0&&(a[l].totalQuestion=Number(r>a[l].maxQuestion?a[l].maxQuestion:r));else for(let l=0;l<a.length;l++)0==a[l].isFixed&&a[l].groupId!=t&&i&&(a[l].totalQuestion=Number(r>a[l].maxQuestion?a[l].maxQuestion:r));this.formArrayGroupInfos.setValue(a),this.changeTotalTakeQuestion(this._countTotalQuestionInMixGroup()),this.totalPoint=this._countTotalPointInMixGroup()}this.isGroupMixQuestion&&this._validGroupMixQuestionValue()}validateWhenChangeGroupValue(t){setTimeout(()=>{this.setFormQuestion(t.value,!1)},1500),this.isGroupMixQuestion&&this._validGroupMixQuestionValue()}_validGroupMixQuestionValue(){let t=this._countNullMixQuestionValue();if(this.changeTotalTakeQuestion(this._countTotalQuestionInMixGroup()),this.totalPoint=this._countTotalPointInMixGroup(),this.checkEmpty=!1,t)return this.changeCheckValidateCountQuestion(!0),this.checkEmpty=!0,!1;if(this.isGroupMixQuestion){let i=this.formArrayGroupInfos.getRawValue();for(let a=0;a<i.length;a++){let r=i[a].totalQuestion;if(r&&r>i[a].maxQuestion)return this.changeCheckValidateCountQuestion(!0),!1}}return this.totalTakeQuestion>(this.obj.countQuestion??0)||this.fromPrintOffline&&this.totalTakeQuestion>120||this.totalTakeQuestion<1||this.totalTakeQuestion<this.minLimitMixQuestion?(this.changeCheckValidateCountQuestion(!0),!1):!(this.totalTakeQuestion>=this.minLimitMixQuestion&&this.totalTakeQuestion<=(this.obj.countQuestion??0)&&(this.changeCheckValidateCountQuestion(!1),1))}validWhenChangeLimitMixQuestionValue(){var t=this.form.controls.limitMixQuestion?.value??null;return null!=t?(this.hasChangeValueLimitQuestion.emit(t),Number.isInteger(Number(t))?t>(this.obj.countQuestion??0)||this.fromPrintOffline&&t>120||t<1||t<this.minLimitMixQuestion?(this.changeCheckValidateCountQuestion(!0),!1):(t>=this.minLimitMixQuestion&&t<=(this.obj.countQuestion??0)&&this.changeCheckValidateCountQuestion(!1),!0):(this.changeCheckValidateCountQuestion(!0),!1)):(this.changeCheckValidateCountQuestion(!0),!1)}resetFormQuestionGroup(){let t=this.formArrayGroupInfos.getRawValue();for(let i=0;i<t.length;i++)0===t[i].isFixed&&(t[i].totalQuestion=void 0);this.changeCheckValidateCountQuestion(!0),this.formArrayGroupInfos.setValue(t)}triggerCtrlEnter(t,i){t.ctrlKey&&"Enter"===t.code&&(this.setFormQuestion(i.value,!0),t.preventDefault())}enableTooltip(){this.isTooltipPoint=!0}disableTooltip(){this.isTooltipPoint=!1}_createMixGroupFormArray(t){this.formArrayGroupInfos.clear(),t.forEach(i=>{let a=new h.cw({groupId:new h.NI(i.groupId,{nonNullable:!0}),isFixed:new h.NI(i.isFixed,{nonNullable:!0}),totalQuestion:new h.NI(i.limitQuestion??0,{nonNullable:!0,validators:[h.kI.min(0),h.kI.max(i.totalQuestion??0)]}),maxQuestion:new h.NI(i.totalQuestion,{nonNullable:!0}),totalGroupScore:new h.NI(i.totalGroupScore,{nonNullable:!0,validators:[h.kI.min(0)]}),error:new h.NI(!1,{nonNullable:!0})});this.formArrayGroupInfos?.push(a),this.totalTakeQuestion+=Number(i.limitQuestion)??0})}_convertExamGroupInfos(t,i,a,r){let s=[],l=0,c=[];return r?.objs&&(c=Object.keys(r?.objs).map(function(u){return r?.objs[u]})),t.forEach((u,m)=>{let p=0;for(let f=l;f<l+c?.[m];f++)p+=r?.marks[f]??0;l+=c?.[m]??0,p=Math.round(100*p)/100,a?s.push({...u,limitQuestion:u.totalQuestion,totalGroupScore:p}):i&&i.hasOwnProperty(u.groupId??-1)&&s.push({...u,limitQuestion:i[u.groupId??-1],totalGroupScore:p})}),s}_getGroupMixQuestionValue(t){let a,i=this.formArrayGroupInfos.getRawValue();for(let r=0;r<i.length;r++)i[r].groupId==t&&(a=i[r].totalQuestion);return a}_countNullMixQuestionValue(){let t=this.formArrayGroupInfos.getRawValue(),i=0;for(let a=0;a<t.length;a++)null==t[a].totalQuestion&&i++;return i}_countTotalQuestionInMixGroup(){let t=this.formArrayGroupInfos.getRawValue();var i=0;for(let a=0;a<t.length;a++){let r=t[a].totalQuestion;r&&r>0&&(i+=Number(r))}return i}_countTotalPointInMixGroup(){let t=this.formArrayGroupInfos.getRawValue();var i=0;for(let a=0;a<t.length;a++){let r=t[a].totalGroupScore;r&&r>0&&(i+=Number(r))}return this.commonService.parseNumberFixed(i,2)}_checkNullData(){return this.form&&this.form?.controls.groupInfos&&this.form.controls.limitMixQuestion&&(this.formArrayGroupInfos=this.form.controls.groupInfos,this.formControlLimitMixQuestion=this.form.controls.limitMixQuestion),!!(this.form&&this.formArrayGroupInfos&&this.formControlLimitMixQuestion&&null!=this.obj&&null!=this.minLimitMixQuestion&&null!=this.examGroupInfos&&null!=this.isGroupMixQuestion&&null!=this.checkValidateCountQuestion)}_initGroupData(){this.examGroupInfos.length>0&&(1==this.obj.mixQuestionGroupInfoWithMarkObj?.status?(this.changeIsGroupMixQuestion(!0),this._createMixGroupFormArray(this._convertExamGroupInfos(this.examGroupInfos,this.obj.mixQuestionGroupInfoWithMarkObj.objs,!1,this.obj.mixQuestionGroupInfoWithMarkObj))):null!=this.obj.limitQuestionGroups&&0==this.obj.mixQuestionGroupInfoWithMarkObj?.status?(this.changeIsGroupMixQuestion(!1),this._createMixGroupFormArray(this._convertExamGroupInfos(this.examGroupInfos,this.obj.mixQuestionGroupInfoWithMarkObj.objs,!1,void 0))):this._createMixGroupFormArray(this._convertExamGroupInfos(this.examGroupInfos,{},!0,void 0)),this.isGroupMixQuestion?this._validGroupMixQuestionValue():this.validWhenChangeLimitMixQuestionValue())}previewGroupExam(t){let i={obj:{...this.obj,attended:0},curCateId:this.obj.categoryId??0,isOnLib:0,isShow:!0,showDelete:!1,groupId:t};this.sAztDialogService.open(MT,{width:"800px",maxWidth:"90vw",enterAnimationDuration:"0ms",exitAnimationDuration:"0ms",data:i,restoreFocus:!1})}ngOnInit(){super.ngOnInit(),this.isNotNullData=this._checkNullData(),this.isNotNullData&&this._initGroupData()}constructor(t){super(),this.sAztDialogService=t,this.fromPrintOffline=!1,this.isGroupMixQuestion=!1,this.isGroupMixQuestionChange=new e.vpe,this.checkValidateCountQuestion=!1,this.checkValidateCountQuestionChange=new e.vpe,this.totalTakeQuestion=0,this.totalTakeQuestionChange=new e.vpe,this.hasChangeValueLimitQuestion=new e.vpe,this.isNotNullData=!1,this.isTooltipPoint=!1,this.totalPoint=0,this.checkEmpty=!1}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(qi.C))},n.\u0275cmp=e.Xpm({type:n,selectors:[["test-config-online-mix-question"]],inputs:{fromPrintOffline:"fromPrintOffline",form:"form",obj:"obj",minLimitMixQuestion:"minLimitMixQuestion",examGroupInfos:"examGroupInfos"},outputs:{isGroupMixQuestionChange:"isGroupMixQuestionChange",checkValidateCountQuestionChange:"checkValidateCountQuestionChange",totalTakeQuestionChange:"totalTakeQuestionChange",hasChangeValueLimitQuestion:"hasChangeValueLimitQuestion"},features:[e.qOj],decls:1,vars:1,consts:[[3,"formGroup",4,"ngIf"],[3,"formGroup"],["id","exam-get-mix-question",1,"grid","grid-cols-12","grap-5"],["class","col-span-12 md:col-span-3",3,"ngClass",4,"ngIf"],[1,"col-span-12","mt-2",3,"ngClass"],[1,"setting-block-create-sub","w-100"],["class","setting-block-mix-v1",4,"ngIf"],["class","border border-slate-200/60 dark:border-darkmode-400 rounded-md pb-1",4,"ngIf"],["class","col-span-12 mt-2 text-xs text-danger fade",4,"ngIf"],["class","col-span-12 leading-relaxed text-slate-500 text-xs px-0 mt-1",4,"ngIf"],["class","col-span-12 px-0 mt-2",4,"ngIf"],[3,"ngClass"],[1,"col-span-12","md:col-span-3",3,"ngClass"],[1,"font-medium","mt-5"],[1,"setting-block-mix-v1"],[1,"not-group"],[1,"grid","grid-cols-12","gap-3"],[1,"col-span-6","md:col-span-8","lg:col-span-9"],["type","text","appOnlyNumber","","formControlName","limitMixQuestion",1,"form-control",3,"ngClass","input"],[1,"col-span-6","md:col-span-4","lg:col-span-3"],["azt-track-service","config-mix-question-__RjMpaOvxg",1,"btn","btn-secondary","px-1","w-full",3,"disabled","click"],[1,"border","border-slate-200/60","dark:border-darkmode-400","rounded-md","pb-1"],[1,"p-3","bg-slate-100","dark:bg-darkmode-400","flex","flex-col","md:flex-row","md:items-center"],[1,"mr-auto"],[1,"mt-1"],[1,"flex"],["azt-track-service","config-mix-question-Bo6mIaGCJ9M",1,"btn","btn-sm","btn-outline-danger","mt-2","md:mt-0",3,"click"],[1,"mix_question_list"],["pointerEventsMethod","scrollbar",3,"visibility","autoHeightDisabled"],[1,"grid","grid-cols-12","gap-5","mb-5","p-3"],["formArrayName","groupInfos"],["class","col-span-12 md:col-span-6 lg:col-span-4 mt-1 shadow rounded-md p-1",4,"ngFor","ngForOf"],[1,"col-span-12","md:col-span-6","lg:col-span-4","mt-1","shadow","rounded-md","p-1"],[1,"flex","items-center","mb-1"],["class","mr-1",3,"matTooltip",4,"ngIf"],[1,"pb-0","text-left",2,"font-size","13.5px"],["azt-track-service","config-mix-question-U3gSLl4wP",1,"btn","btn-outline-secondary","btn-sm","btn-transparent","ml-2","p-0",3,"click"],[1,"w-5","h-5","inline-block",3,"matTooltip","matTooltipShowDelay"],["name","eye"],[1,"flex","items-center"],["class","azt-hidden md:block form-control","type","text","appOnlyNumber","","onwheel","return false;","formControlName","totalQuestion","style"," width: 50%;",3,"ngClass","input","keydown",4,"ngIf"],["class","block md:hidden form-control","type","text","appOnlyNumber","","onwheel","return false;","formControlName","totalQuestion","style"," width: 50%;",3,"ngClass","input",4,"ngIf"],["style"," width: 50%;","type","text","class","form-control","readonly","","formControlName","totalQuestion",4,"ngIf"],[1,"input-group","ml-2"],[1,"input-group-text",3,"matTooltip","matTooltipShowDelay","matTooltipDisabled"],[3,"for"],["type","text","appOnlyNumber","","formControlName","totalGroupScore",1,"form-control",3,"id","decimal","input"],["class","mt-2 text-danger text-xs",4,"ngIf"],["class","mt-2 text-pending text-xs",4,"ngIf"],[1,"mr-1",3,"matTooltip"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide"],["x1","12","y1","17","x2","12","y2","22"],["d","M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z"],["type","text","appOnlyNumber","","onwheel","return false;","formControlName","totalQuestion",1,"azt-hidden","md:block","form-control",2,"width","50%",3,"ngClass","input","keydown"],["type","text","appOnlyNumber","","onwheel","return false;","formControlName","totalQuestion",1,"block","md:hidden","form-control",2,"width","50%",3,"ngClass","input"],["type","text","readonly","","formControlName","totalQuestion",1,"form-control",2,"width","50%"],[1,"mt-2","text-danger","text-xs"],[1,"mt-2","text-pending","text-xs"],[1,"col-span-12","mt-2","text-xs","text-danger","fade"],[4,"ngIf"],[1,"col-span-12","leading-relaxed","text-slate-500","text-xs","px-0","mt-1"],["class","clearfix pt-1 text-left",4,"ngIf"],["azt-track-service","config-mix-question-VQJ0YT16Yb","href","https://docs.azota.vn/docs/huong-dan-su-dung/de-thi/tao-de-con/","target","_blank",1,"text-primary","font-medium"],[1,"clearfix","pt-1","text-left"],[1,"col-span-12","px-0","mt-2"],[1,"text-slate-500","text-xs"],["azt-track-service","config-mix-question-bbIjXerrNkY","href","https://docs.azota.vn/docs/huong-dan-su-dung/de-thi/tao-de-con/","target","_blank",1,"text-primary","font-medium"],[1,"col-span-12"],["type","text","appOnlyNumber","","formControlName","totalPointQuestionNoGroup",1,"form-control",3,"decimal"]],template:function(t,i){1&t&&e.YNc(0,pk,14,18,"ng-container",0),2&t&&e.Q6J("ngIf",i.isNotNullData)},dependencies:[F.mk,F.sg,F.O5,Ai.gM,k.KC,h.Fj,h.JJ,h.JL,h.sg,h.u,h.CE,Dt.Y,wt.M,_.Nh5,ye.JV],encapsulation:2}),n})();var hk=I(13371);const Ak=["startTime"],_k=["endTime"];function fk(n,o){if(1&n&&e._UZ(0,"azt-loading-effect",4),2&n){const t=e.oxw();e.Q6J("currentStatusObj",t.statusObj)}}function gk(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_testbank_configuration_type_exam_description")," "))}function xk(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.TgZ(3,"span",72),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,2,"lang_testbank_configuration_type_practice_description")," "),e.xp6(3),e.hij("\xa0",e.lcZ(5,4,"lang_testbank_configuration_type_practice_note"),""))}function bk(n,o){1&n&&(e.TgZ(0,"div",73),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_vui_long_nhap_ten_de_thi")," "))}function vk(n,o){1&n&&(e.TgZ(0,"div",73),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_vui_long_nhap_thoi_gian")," "))}function wk(n,o){1&n&&(e.TgZ(0,"div",98),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_testbank_test_config_end_time_bigger_time_star"),". "))}function yk(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",74)(1,"div",8)(2,"label",75),e._uU(3),e.ALo(4,"mytranslate"),e.TgZ(5,"span",36),e.ALo(6,"mytranslate"),e._UZ(7,"lucide-icon",37),e.qZA()()(),e.TgZ(8,"div",8)(9,"div",76)(10,"div",77)(11,"mat-form-field",78)(12,"input",79),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.openDateTimePicker(1))}),e.ALo(13,"mytranslate"),e.qZA(),e.TgZ(14,"button",80),e.NdJ("click",function(a){return e.CHM(t),e.oxw(2).openDateTimePicker(1),e.KtG(a.stopPropagation())}),e.TgZ(15,"span",81),e._UZ(16,"lucide-icon",82),e.qZA()(),e.TgZ(17,"ngx-mat-datetime-picker",83,84)(19,"ngx-mat-datepicker-actions")(20,"button",85),e._uU(21),e.ALo(22,"mytranslate"),e.qZA(),e.TgZ(23,"button",86),e._uU(24,"OK"),e.qZA()()()()(),e.TgZ(25,"div",77)(26,"mat-form-field",78)(27,"input",87),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.openDateTimePicker(0))}),e.ALo(28,"mytranslate"),e.qZA(),e.TgZ(29,"button",88),e.NdJ("click",function(a){return e.CHM(t),e.oxw(2).openDateTimePicker(0),e.KtG(a.stopPropagation())}),e.TgZ(30,"span",81),e._UZ(31,"lucide-icon",82),e.qZA()(),e.TgZ(32,"ngx-mat-datetime-picker",83,89)(34,"ngx-mat-datepicker-actions")(35,"button",85),e._uU(36),e.ALo(37,"mytranslate"),e.qZA(),e.TgZ(38,"button",86),e._uU(39,"OK"),e.qZA()()()()(),e.TgZ(40,"div",90)(41,"button",91),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.clearTime())}),e.TgZ(42,"span",92),e._UZ(43,"lucide-icon",93),e.qZA(),e._uU(44),e.ALo(45,"mytranslate"),e.qZA()()(),e.TgZ(46,"div",94)(47,"div",95),e._uU(48),e.ALo(49,"mytranslate"),e.qZA(),e.TgZ(50,"div",96),e._uU(51),e.ALo(52,"mytranslate"),e.qZA(),e.YNc(53,wk,3,3,"div",97),e.qZA()()()}if(2&n){const t=e.MAs(18),i=e.MAs(33),a=e.oxw(2);let r;e.xp6(3),e.hij(" ",e.lcZ(4,16,"lang_testbank_test_config_time_assign_exam")," "),e.xp6(2),e.s9C("matTooltip",e.lcZ(6,18,"lang_auto_hoc_sinh_lam_bai_online_chi_duoc_lam_bai_vao_thoi_gian_giao_de")),e.xp6(7),e.s9C("placeholder",e.lcZ(13,20,"lang_auto_tu")),e.Q6J("max",a.maxDate)("ngxMatDatetimePicker",t),e.xp6(5),e.Q6J("touchUi",!0),e.xp6(4),e.Oqu(e.lcZ(22,22,"lang_auto_dong")),e.xp6(6),e.s9C("placeholder",e.lcZ(28,24,"lang_auto_den")),e.Q6J("max",a.maxDate)("ngxMatDatetimePicker",i),e.xp6(5),e.Q6J("touchUi",!0),e.xp6(4),e.Oqu(e.lcZ(37,26,"lang_auto_dong")),e.xp6(8),e.hij(" ",e.lcZ(45,28,"lang_auto_dat_lai")," "),e.xp6(4),e.hij("",e.lcZ(49,30,"lang_testbank_test_config_tutorial_time_assigne_exam"),"."),e.xp6(3),e.hij("",e.lcZ(52,32,"lang_auto_bo_trong_neu_khong_muon_gioi_han_thoi_gian"),"."),e.xp6(2),e.Q6J("ngIf",a.calculatorTimeValidate(null!==(r=a.form.controls.endTime.value)&&void 0!==r?r:"",null!==(r=a.form.controls.startTime.value)&&void 0!==r?r:"")<=0)}}function Ck(n,o){1&n&&(e.TgZ(0,"div",99),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_lua_chon_nay_cho_phep_nhung_hoc_sinh_khong_dang_ky_dang_nhap_tai_khoang_van_co_the_tham_gia_thi")," "))}function Tk(n,o){if(1&n&&(e.TgZ(0,"div",100)(1,"div",101),e._UZ(2,"azt-list-classroom-checkbox",102),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(2),e.Q6J("form",t.form)("classroomGroupData",t.classroomWithGroup)("examClassroomObjs",t.examClassroomObjs)("permissionName",t.permissionTypes.exam)}}function kk(n,o){if(1&n&&(e.TgZ(0,"div",100)(1,"div",103)(2,"div",104)(3,"h3",105),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()(),e._UZ(6,"list-student-checkbox",106),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(4),e.hij(" ",e.lcZ(5,5,"lang_testbank_click_on_the_class_to_select_students")," "),e.xp6(2),e.Q6J("form",t.form)("classroomGroupData",t.classroomWithGroup)("examStudentObjs",t.examStudents)("permissionName",t.permissionTypes.exam)}}function Sk(n,o){1&n&&(e.TgZ(0,"div",107)(1,"div",44)(2,"label",108),e._uU(3),e.ALo(4,"mytranslate"),e.qZA(),e.TgZ(5,"div",65)(6,"span"),e._uU(7),e.ALo(8,"mytranslate"),e.qZA()()(),e.TgZ(9,"div",109)(10,"div",27),e._UZ(11,"input",110),e.ALo(12,"mytranslate"),e.qZA()()()),2&n&&(e.xp6(3),e.hij(" ",e.lcZ(4,3,"lang_testbank_test_config_limit_listing_audio")," "),e.xp6(4),e.Oqu(e.lcZ(8,5,"lang_testbank_test_config_empty_if_not_limit_listen")),e.xp6(4),e.MGl("placeholder"," ",e.lcZ(12,7,"lang_auto_nhap_so_luot_nghe")+" ...",""))}function Ek(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",128)(1,"test-config-online-student-info",129),e.NdJ("infoFieldsChange",function(a){e.CHM(t);const r=e.oxw(3);return e.KtG(r.infoFields=a)})("formInfoInvalidChange",function(a){e.CHM(t);const r=e.oxw(3);return e.KtG(r.formInfoInvalid=a)})("checkValidInfo",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.checkValidInfoField())}),e.qZA()()}if(2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("infoFields",t.infoFields)("formInfoInvalid",t.formInfoInvalid)}}function Ok(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",58)(1,"div",59)(2,"div",24)(3,"span"),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()(),e.TgZ(6,"div",10)(7,"div",25)(8,"div",44)(9,"label",111),e._uU(10),e.ALo(11,"mytranslate"),e.qZA()(),e.TgZ(12,"div",44)(13,"div",27),e._UZ(14,"input",112),e.TgZ(15,"div",39),e._uU(16),e.ALo(17,"mytranslate"),e.qZA()()()(),e.TgZ(18,"div",62)(19,"div",44)(20,"label",113),e._uU(21),e.ALo(22,"mytranslate"),e.qZA()(),e.TgZ(23,"div",109)(24,"div",27),e._UZ(25,"input",114),e.ALo(26,"mytranslate"),e.qZA()()(),e.TgZ(27,"div",115)(28,"div",44)(29,"label",26),e._uU(30),e.ALo(31,"mytranslate"),e.qZA()(),e.TgZ(32,"div",109)(33,"div",45)(34,"div",116),e._UZ(35,"input",117),e.TgZ(36,"label",118),e._uU(37),e.ALo(38,"mytranslate"),e.qZA()(),e.TgZ(39,"div",119),e._UZ(40,"input",120),e.TgZ(41,"label",121),e._uU(42),e.ALo(43,"mytranslate"),e.TgZ(44,"span",36),e.ALo(45,"mytranslate"),e._UZ(46,"lucide-icon",37),e.qZA()()(),e.TgZ(47,"div",52),e._UZ(48,"input",122),e.TgZ(49,"label",123),e._uU(50),e.ALo(51,"mytranslate"),e.TgZ(52,"span",36),e.ALo(53,"mytranslate"),e._UZ(54,"lucide-icon",37),e.qZA()()()()()(),e.TgZ(55,"div",62)(56,"div",63)(57,"label",124),e._uU(58),e.ALo(59,"mytranslate"),e.qZA(),e.TgZ(60,"div",65),e._uU(61),e.ALo(62,"mytranslate"),e.qZA()(),e.TgZ(63,"div",14)(64,"div",125)(65,"input",126),e.NdJ("change",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.changeEnterInfoControl())}),e.qZA()()(),e.YNc(66,Ek,2,2,"div",127),e.qZA()()()()}if(2&n){const t=e.oxw(2);e.xp6(4),e.Oqu(e.lcZ(5,14,"lang_testbank_config_security_setting")),e.xp6(6),e.hij(" ",e.lcZ(11,16,"lang_testbank_tested_list_number_quizzes")," "),e.xp6(6),e.hij("*",e.lcZ(17,18,"lang_testbank_config_take_test_count_des"),""),e.xp6(5),e.hij(" ",e.lcZ(22,20,"lang_testbank_test_config_password_exam")," "),e.xp6(4),e.s9C("placeholder",e.lcZ(26,22,"lang_auto_nhap_mat_khau")+" ..."),e.xp6(5),e.hij(" ",e.lcZ(31,24,"lang_testbank_test_config_automatic_monitoring")," "),e.xp6(7),e.hij(" ",e.lcZ(38,26,"lang_testbank_test_config_off")," "),e.xp6(5),e.hij(" ",e.lcZ(43,28,"lang_auto_giam_sat_thoat_man_hinh")," "),e.xp6(2),e.s9C("matTooltip",e.lcZ(45,30,"lang_auto_azota_se_ghi_lai_cac_lan_hoc_sinh_thoat_dot")),e.xp6(6),e.hij(" ",e.lcZ(51,32,"lang_auto_giam_sat_nang_cao")," "),e.xp6(2),e.s9C("matTooltip",e.lcZ(53,34,"lang_auto_thuong_su_dung_cho_cac_ky_thi_doi_hoi_bao_mat_cao_hoc_sinh_can_dot")),e.xp6(6),e.hij(" ",e.lcZ(59,36,"lang_testbank_test_config_verify_profile_student")," "),e.xp6(3),e.hij(" ",e.lcZ(62,38,"lang_auto_khi_hoc_sinh_vao_lam_bai_se_phai_khai_bao_them_cac_thong_tin_dot")," "),e.xp6(5),e.Q6J("ngIf",1==t.form.controls.enterInfo.value)}}function Ik(n,o){1&n&&(e.TgZ(0,"div",62)(1,"div",63)(2,"label",130),e._uU(3),e.ALo(4,"mytranslate"),e.qZA(),e.TgZ(5,"div",65),e._uU(6),e.ALo(7,"mytranslate"),e.qZA()(),e.TgZ(8,"div",14)(9,"div",66),e._UZ(10,"input",131),e.qZA()()()),2&n&&(e.xp6(3),e.hij(" ",e.lcZ(4,2,"lang_auto_lay_ngau_nhien_theo_ma_tran_de")," "),e.xp6(3),e.hij(" ",e.lcZ(7,4,"lang_auto_de_thi_duoc_tao_tu_ma_tran_de_khi_bat_tinh_nang_nay_dot")," "))}function Mk(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",62)(1,"div",63)(2,"label",132),e._uU(3),e.ALo(4,"mytranslate"),e.qZA(),e.TgZ(5,"div",65),e._uU(6),e.ALo(7,"mytranslate"),e.TgZ(8,"a",133),e._uU(9),e.ALo(10,"mytranslate"),e.qZA()()(),e.TgZ(11,"div",14)(12,"div",45)(13,"div",66)(14,"input",134),e.NdJ("change",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.disableCheckValidateCountQuestion())}),e.qZA()()()()()}2&n&&(e.xp6(3),e.hij(" ",e.lcZ(4,3,"lang_auto_dao_cau_hoi_va_dap_an")," "),e.xp6(3),e.hij(" ",e.lcZ(7,5,"lang_auto_system_auto_mix_question_by_group")," "),e.xp6(3),e.hij(" ",e.lcZ(10,7,"lang_auto_tim_hieu_them")," "))}function Lk(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"test-config-online-mix-question",138),e.NdJ("isGroupMixQuestionChange",function(a){e.CHM(t);const r=e.oxw(4);return e.KtG(r.isGroupMixQuestion=a)})("checkValidateCountQuestionChange",function(a){e.CHM(t);const r=e.oxw(4);return e.KtG(r.checkValidateCountQuestion=a)}),e.qZA()}if(2&n){const t=e.oxw(4);e.Q6J("form",t.form)("obj",t.obj)("minLimitMixQuestion",t.minLimitMixQuestion)("examGroupInfos",t.examGroupInfos)}}function Bk(n,o){if(1&n&&(e.TgZ(0,"div",100),e.YNc(1,Lk,1,4,"test-config-online-mix-question",137),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.obj)}}function Pk(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",62)(1,"div",63)(2,"label",135),e._uU(3),e.ALo(4,"mytranslate"),e.qZA(),e.TgZ(5,"div",65),e._uU(6),e.ALo(7,"mytranslate"),e.qZA()(),e.TgZ(8,"div",14)(9,"div",66)(10,"input",136),e.NdJ("change",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.disableCheckValidateCountQuestion())}),e.qZA()()(),e.YNc(11,Bk,2,1,"div",55),e.qZA()}if(2&n){const t=e.oxw(2);e.xp6(3),e.hij(" ",e.lcZ(4,3,"lang_auto_tao_de_con")," "),e.xp6(3),e.hij(" ",e.lcZ(7,5,"lang_auto_tao_de_con_tu_mot_luong_cau_hoi_ngau_nhien_trong_de_goc_dot")," "),e.xp6(5),e.Q6J("ngIf",1==t.form.controls.isCreateSubTest.value&&1==t.form.controls.mixQuestion.value)}}function Qk(n,o){1&n&&(e.TgZ(0,"div",115)(1,"div",63)(2,"label",139),e._uU(3),e.ALo(4,"mytranslate"),e.qZA(),e.TgZ(5,"div",65),e._uU(6),e.ALo(7,"mytranslate"),e.qZA()(),e.TgZ(8,"div",14)(9,"div",66),e._UZ(10,"input",140),e.qZA()()()),2&n&&(e.xp6(3),e.hij(" ",e.lcZ(4,2,"lang_auto_co_dinh_cau_hoi_trong_de_con")," "),e.xp6(3),e.hij(" ",e.lcZ(7,4,"lang_auto_khi_bat_chuc_nang_nay_he_thong_se_tu_dong_dao_cac_cau_hoi_dot")," "))}function Fk(n,o){1&n&&(e.TgZ(0,"div",62)(1,"div",63)(2,"label",141),e._uU(3),e.ALo(4,"mytranslate"),e.qZA()(),e.TgZ(5,"div",14)(6,"div",66),e._UZ(7,"input",142),e.qZA()()()),2&n&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"lang_testbank_sections_starting_from_question_1")," "))}function Nk(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",58)(1,"div",59)(2,"div",24)(3,"span"),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()(),e.TgZ(6,"div",10)(7,"div",143)(8,"config-score-scale-true-false-question",144),e.NdJ("errorConfigScoreScaleTrueFalse",function(a){e.CHM(t);const r=e.oxw(2);return e.KtG(r.setErrorConfigScoreScaleTrueFalse(a))}),e.qZA()()()()()}if(2&n){const t=e.oxw(2);e.xp6(4),e.Oqu(e.lcZ(5,3,"lang_azt_configure_scoring_scale")),e.xp6(4),e.Q6J("form",t.form)("markDetails",t.markDetails)}}function Zk(n,o){1&n&&(e.TgZ(0,"span",162),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_testbank_test_config_note_validate_show_point")," "))}function Dk(n,o){if(1&n&&(e.TgZ(0,"span",162),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.AsE(" ",e.lcZ(2,2,"lang_testbank_test_config_all_done"),": ",t.calculateTime(t.form.controls.endTime.value,t.form.controls.minutes.value)," ")}}function Uk(n,o){1&n&&(e.TgZ(0,"span",162),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_testbank_test_config_note_validate_show_point")," "))}function jk(n,o){if(1&n&&(e.TgZ(0,"span",162),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.AsE(" ",e.lcZ(2,2,"lang_testbank_test_config_all_done"),": ",t.calculateTime(t.form.controls.endTime.value,t.form.controls.minutes.value)," ")}}function qk(n,o){1&n&&(e.TgZ(0,"div",166),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_test_config_please_enter_score_greater_than_0")," "))}function Rk(n,o){if(1&n&&(e.TgZ(0,"div",62)(1,"div",44)(2,"label",163),e._uU(3),e.ALo(4,"mytranslate"),e.qZA()(),e.TgZ(5,"div",109)(6,"div",27),e._UZ(7,"input",164),e.ALo(8,"mytranslate"),e.qZA(),e.YNc(9,qk,3,3,"div",165),e.qZA()()),2&n){const t=e.oxw(3);e.xp6(3),e.hij(" ",e.lcZ(4,4,"lang_testbank_config_point_reached_to_show_answer")," "),e.xp6(4),e.s9C("placeholder",e.lcZ(8,6,"lang_auto_nhap_so_diem")),e.Q6J("decimal",!0),e.xp6(2),e.Q6J("ngIf","3"==t.form.controls.whenShowAnswer.value&&!t.numberParse(t.form.controls.viewAnswerResultMinMark.value))}}function zk(n,o){if(1&n&&(e.TgZ(0,"div",58)(1,"div",59)(2,"div",24)(3,"span"),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()(),e.TgZ(6,"div",10)(7,"div",145)(8,"div",44)(9,"label",26),e._uU(10),e.ALo(11,"mytranslate"),e.qZA(),e.TgZ(12,"div",65),e.YNc(13,Zk,3,3,"span",146),e.YNc(14,Dk,3,4,"span",146),e.qZA()(),e.TgZ(15,"div",109)(16,"div",45)(17,"div",116),e._UZ(18,"input",147),e.TgZ(19,"label",148),e._uU(20),e.ALo(21,"mytranslate"),e.qZA()(),e.TgZ(22,"div",119),e._UZ(23,"input",149),e.TgZ(24,"label",150),e._uU(25),e.ALo(26,"mytranslate"),e.qZA()(),e.TgZ(27,"div",52),e._UZ(28,"input",151),e.TgZ(29,"label",152),e._uU(30),e.ALo(31,"mytranslate"),e.qZA()()()()(),e.TgZ(32,"div",153)(33,"div",44)(34,"label",26),e._uU(35),e.ALo(36,"mytranslate"),e.qZA(),e.TgZ(37,"div",65),e.YNc(38,Uk,3,3,"span",146),e.YNc(39,jk,3,4,"span",146),e.qZA()(),e.TgZ(40,"div",109)(41,"div",45)(42,"div",116),e._UZ(43,"input",154),e.TgZ(44,"label",155),e._uU(45),e.ALo(46,"mytranslate"),e.qZA()(),e.TgZ(47,"div",119),e._UZ(48,"input",156),e.TgZ(49,"label",157),e._uU(50),e.ALo(51,"mytranslate"),e.qZA()(),e.TgZ(52,"div",119),e._UZ(53,"input",158),e.TgZ(54,"label",159),e._uU(55),e.ALo(56,"mytranslate"),e.qZA()(),e.TgZ(57,"div",52),e._UZ(58,"input",160),e.TgZ(59,"label",161),e._uU(60),e.ALo(61,"mytranslate"),e.qZA()()()()(),e.YNc(62,Rk,10,8,"div",60),e.qZA()()()),2&n){const t=e.oxw(2);e.xp6(4),e.Oqu(e.lcZ(5,15,"lang_testbank_config_show_point_and_answer_setting")),e.xp6(6),e.hij(" ",e.lcZ(11,17,"lang_auto_cho_xem_diem")," "),e.xp6(3),e.Q6J("ngIf","1"==t.form.controls.whenShowResult.value&&(!t.form.controls.endTime.value||t.form.controls.minutes.value<=0)),e.xp6(1),e.Q6J("ngIf","1"==t.form.controls.whenShowResult.value&&t.form.controls.endTime.value&&t.form.controls.minutes.value>0),e.xp6(6),e.hij(" ",e.lcZ(21,19,"lang_auto_khong")," "),e.xp6(5),e.hij(" ",e.lcZ(26,21,"lang_auto_khi_lam_bai_xong")," "),e.xp6(5),e.hij(" ",e.lcZ(31,23,"lang_auto_khi_tat_ca_thi_xong")," "),e.xp6(5),e.hij(" ",e.lcZ(36,25,"lang_auto_cho_xem_dap_an")," "),e.xp6(3),e.Q6J("ngIf","1"==t.form.controls.whenShowAnswer.value&&(!t.form.controls.endTime.value||t.form.controls.minutes.value<=0)),e.xp6(1),e.Q6J("ngIf","1"==t.form.controls.whenShowAnswer.value&&t.form.controls.endTime.value&&t.form.controls.minutes.value>0),e.xp6(6),e.hij(" ",e.lcZ(46,27,"lang_auto_khong")," "),e.xp6(5),e.hij(" ",e.lcZ(51,29,"lang_auto_khi_lam_bai_xong")," "),e.xp6(5),e.hij(" ",e.lcZ(56,31,"lang_auto_khi_tat_ca_thi_xong")," "),e.xp6(5),e.hij(" ",e.lcZ(61,33,"lang_testbank_config_show_exam_when_reach_custom_point")," "),e.xp6(2),e.Q6J("ngIf","3"==t.form.controls.whenShowAnswer.value)}}function Hk(n,o){if(1&n&&(e.TgZ(0,"div",58)(1,"div",59)(2,"div",10)(3,"div",143),e._UZ(4,"config-document-price",167),e.qZA()()()()),2&n){const t=e.oxw(2);e.xp6(4),e.Q6J("form",t.form)("examCombos",t.examCombos)("currentExamId",t.obj.id)}}const Jk=function(){return{standalone:!0}};function Kk(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",62)(1,"div",8)(2,"editor",170,171),e.NdJ("ngModelChange",function(a){e.CHM(t);const r=e.oxw(3);return e.KtG(r.contentHeader=a)}),e.qZA()()()}if(2&n){const t=e.oxw(3);e.xp6(2),e.s9C("apiKey",t.tinyEditorKey),e.Q6J("ngModel",t.contentHeader)("ngModelOptions",e.DdM(4,Jk))("init",t.initDataEditor)}}function Gk(n,o){if(1&n&&(e.TgZ(0,"div",58)(1,"div",168)(2,"div",24)(3,"span"),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()(),e.TgZ(6,"div",10)(7,"div",25)(8,"div",63)(9,"label",13),e._uU(10),e.ALo(11,"mytranslate"),e.qZA(),e.TgZ(12,"div",65),e._uU(13),e.ALo(14,"mytranslate"),e.qZA()(),e.TgZ(15,"div",14)(16,"div",66),e._UZ(17,"input",169),e.qZA()()(),e.YNc(18,Kk,4,5,"div",60),e.qZA()()()),2&n){const t=e.oxw(2);e.xp6(4),e.Oqu(e.lcZ(5,4,"lang_student_classroom_list_other")),e.xp6(6),e.hij(" ",e.lcZ(11,6,"lang_testbank_configuration_add_header_title")," "),e.xp6(3),e.hij(" ",e.lcZ(14,8,"lang_testbank_configuration_add_header_description")," "),e.xp6(5),e.Q6J("ngIf",t.form.controls.allowHeader.value)}}function Yk(n,o){1&n&&(e.TgZ(0,"span",81),e._UZ(1,"azt-loading-ui"),e.qZA())}function $k(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",172),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.savePublishExam(0))}),e.YNc(1,Yk,2,0,"span",71),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("disabled",t.checkDisableBtnSaveOrPublish()),e.xp6(1),e.Q6J("ngIf",t.statusObj.loading),e.xp6(1),e.hij(" ",e.lcZ(3,3,"lang_auto_luu_nhap")," ")}}function Vk(n,o){1&n&&(e.TgZ(0,"span",81),e._UZ(1,"azt-loading-ui"),e.qZA())}const Gv=function(n){return{"text-white font-medium":n}},Wk=function(n){return{transform:n}};function Xk(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",5)(1,"div",6),e._uU(2),e.qZA(),e.TgZ(3,"div",7)(4,"div",8)(5,"div",9)(6,"div",10)(7,"div",11)(8,"div",12)(9,"label",13),e._uU(10),e.ALo(11,"mytranslate"),e.qZA()(),e.TgZ(12,"div",14)(13,"div",15)(14,"label",16),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.confirmChangeMode())}),e._uU(15),e.ALo(16,"mytranslate"),e.qZA(),e.TgZ(17,"label",17),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.confirmChangeMode())}),e._uU(18),e.ALo(19,"mytranslate"),e.qZA(),e._UZ(20,"span",18),e.qZA()(),e.TgZ(21,"div",19)(22,"div",20),e.YNc(23,gk,3,3,"span",21),e.YNc(24,xk,6,6,"span",21),e.qZA()()()()(),e.TgZ(25,"div",22)(26,"div",23)(27,"div",24)(28,"span"),e._uU(29),e.ALo(30,"mytranslate"),e.qZA()(),e.TgZ(31,"div",10)(32,"div",25)(33,"div",8)(34,"label",26),e._uU(35),e.ALo(36,"mytranslate"),e.qZA()(),e.TgZ(37,"div",8)(38,"div",27),e._UZ(39,"input",28),e.ALo(40,"mytranslate"),e.YNc(41,bk,3,3,"div",29),e.qZA()()(),e.TgZ(42,"div",30),e._UZ(43,"config-level-subject",31),e.qZA(),e.TgZ(44,"div",32),e._UZ(45,"config-purpose-exam",33),e.qZA(),e.TgZ(46,"div",34)(47,"div",8)(48,"label",35),e._uU(49),e.ALo(50,"mytranslate"),e.TgZ(51,"span",36),e.ALo(52,"mytranslate"),e._UZ(53,"lucide-icon",37),e.qZA()()(),e.TgZ(54,"div",8)(55,"div",27),e._UZ(56,"input",38),e.ALo(57,"mytranslate"),e.TgZ(58,"div",39),e._uU(59),e.ALo(60,"mytranslate"),e.qZA(),e.YNc(61,vk,3,3,"div",29),e.qZA()()(),e.YNc(62,yk,54,34,"div",40),e.TgZ(63,"div",41)(64,"div",42)(65,"label",26),e._uU(66),e.ALo(67,"mytranslate"),e.qZA(),e.YNc(68,Ck,3,3,"div",43),e.qZA(),e.TgZ(69,"div",44)(70,"div",45)(71,"div",46),e._UZ(72,"input",47),e.TgZ(73,"label",48),e._uU(74),e.ALo(75,"mytranslate"),e.qZA()(),e.TgZ(76,"div",49),e._UZ(77,"input",50),e.TgZ(78,"label",51),e._uU(79),e.ALo(80,"mytranslate"),e.qZA()(),e.TgZ(81,"div",52),e._UZ(82,"input",53),e.TgZ(83,"label",54),e._uU(84),e.ALo(85,"mytranslate"),e.qZA()()()(),e.YNc(86,Tk,3,4,"div",55),e.YNc(87,kk,7,7,"div",55),e.qZA(),e.YNc(88,Sk,13,9,"div",56),e.qZA()()(),e.YNc(89,Ok,67,40,"div",57),e.TgZ(90,"div",58)(91,"div",59)(92,"div",24)(93,"span"),e._uU(94),e.ALo(95,"mytranslate"),e.qZA()(),e.TgZ(96,"div",10),e.YNc(97,Ik,11,6,"div",60),e.YNc(98,Mk,15,9,"div",60),e.YNc(99,Pk,12,7,"div",60),e.YNc(100,Qk,11,6,"div",61),e.TgZ(101,"div",62)(102,"div",63)(103,"label",64),e._uU(104),e.ALo(105,"mytranslate"),e.qZA(),e.TgZ(106,"div",65),e._uU(107),e.ALo(108,"mytranslate"),e.qZA()(),e.TgZ(109,"div",14)(110,"div",66),e._UZ(111,"input",67),e.qZA()()(),e.YNc(112,Fk,8,3,"div",60),e.qZA()()(),e.YNc(113,Nk,9,5,"div",57),e.YNc(114,zk,63,35,"div",57),e.YNc(115,Hk,5,3,"div",57),e.YNc(116,Gk,19,10,"div",57),e.TgZ(117,"div",68),e.YNc(118,$k,4,5,"button",69),e.TgZ(119,"button",70),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.savePublishExam(1))}),e.YNc(120,Vk,2,0,"span",71),e._uU(121),e.ALo(122,"mytranslate"),e.qZA()()()()()}if(2&n){const t=e.oxw();e.xp6(2),e.hij(" ",t.titleExam," "),e.xp6(8),e.hij(" ",e.lcZ(11,51,"lang_testbank_configuration_type")," "),e.xp6(4),e.Q6J("ngClass",e.VKq(87,Gv,!t.form.controls.allowTestingEachQuestion.value)),e.xp6(1),e.hij(" ",e.lcZ(16,53,"lang_testbank_exam")," "),e.xp6(2),e.Q6J("ngClass",e.VKq(89,Gv,t.form.controls.allowTestingEachQuestion.value)),e.xp6(1),e.hij(" ",e.lcZ(19,55,"lang_testbank_practice")," "),e.xp6(2),e.Q6J("ngStyle",e.VKq(91,Wk,t.form.controls.allowTestingEachQuestion.value?"translateX(100%)":"none")),e.xp6(3),e.Q6J("ngIf",!t.form.controls.allowTestingEachQuestion.value),e.xp6(1),e.Q6J("ngIf",t.form.controls.allowTestingEachQuestion.value),e.xp6(5),e.Oqu(e.lcZ(30,57,"lang_auto_cau_hinh_chung")),e.xp6(6),e.hij(" ",e.lcZ(36,59,"lang_auto_ten_de_thi")," "),e.xp6(4),e.s9C("placeholder",e.lcZ(40,61,"lang_testbank_create_exam_width_file_pdf_enter_name_exam")+" ..."),e.xp6(2),e.Q6J("ngIf",t.form.controls.examName.errors),e.xp6(2),e.Q6J("form",t.form)("schoolLevelObjs",t.schoolLevelObjs),e.xp6(2),e.Q6J("form",t.form)("purposeList",t.listPurposeObjs),e.xp6(4),e.hij(" ",e.lcZ(50,63,"lang_testbank_test_config_time_test_minutes")," "),e.xp6(2),e.s9C("matTooltip",e.lcZ(52,65,"lang_auto_thoi_gian_lam_bai_cua_hoc_sinh")),e.xp6(5),e.s9C("placeholder",e.lcZ(57,67,"lang_auto_nhap_thoi_gian")+" ..."),e.xp6(3),e.hij(" ",e.lcZ(60,69,"lang_testbank_test_config_enter_0_unlimited_time")," "),e.xp6(2),e.Q6J("ngIf",t.form.controls.minutes.errors),e.xp6(1),e.Q6J("ngIf",!t.form.controls.allowTestingEachQuestion.value),e.xp6(4),e.hij(" ",e.lcZ(67,71,"lang_testbank_test_config_who_tested")," "),e.xp6(2),e.Q6J("ngIf",0===t.form.controls.whoAllow.value),e.xp6(4),e.Q6J("value",0),e.xp6(2),e.hij(" ",e.lcZ(75,73,"lang_testbank_test_config_all_people")," "),e.xp6(3),e.Q6J("value",2),e.xp6(2),e.hij(" ",e.lcZ(80,75,"lang_testbank_test_config_assigne_class")," "),e.xp6(3),e.Q6J("value",3),e.xp6(2),e.hij(" ",e.lcZ(85,77,"lang_testbank_test_config_assigne_student")," "),e.xp6(2),e.Q6J("ngIf",2===t.form.controls.whoAllow.value),e.xp6(1),e.Q6J("ngIf",3===t.form.controls.whoAllow.value),e.xp6(1),e.Q6J("ngIf",t.isHasAudio),e.xp6(1),e.Q6J("ngIf",!t.form.controls.allowTestingEachQuestion.value),e.xp6(5),e.Oqu(e.lcZ(95,79,"lang_testbank_test_config_mix_question_and_answer")),e.xp6(3),e.Q6J("ngIf",t.enableRandomQuestion),e.xp6(1),e.Q6J("ngIf",!t.form.controls.isRandomQuestion.value&&t.enableRandomQuestion||!t.enableRandomQuestion),e.xp6(1),e.Q6J("ngIf",!t.form.controls.isRandomQuestion.value&&0!=t.form.controls.mixQuestion.value),e.xp6(1),e.Q6J("ngIf",!t.form.controls.isRandomQuestion.value&&0!=t.form.controls.mixQuestion.value&&t.form.controls.isCreateSubTest.value),e.xp6(4),e.hij(" ",e.lcZ(105,81,"lang_auto_an_cau_hoi_nhom")," "),e.xp6(3),e.hij(" ",e.lcZ(108,83,"lang_auto_he_thong_se_an_di_phan_tieu_de_cua_moi_nhom_cau_hoi_co_trong_de_thi")," "),e.xp6(5),e.Q6J("ngIf",t.examGroupInfos.length>1),e.xp6(1),e.Q6J("ngIf",t.markDetails.length),e.xp6(1),e.Q6J("ngIf",!t.form.controls.allowTestingEachQuestion.value),e.xp6(1),e.Q6J("ngIf",!t.isBusinessDomain&&t.examCombos&&t.obj),e.xp6(1),e.Q6J("ngIf",!t.form.controls.allowTestingEachQuestion.value),e.xp6(2),e.Q6J("ngIf",0==(null==t.obj?null:t.obj.isPublished)),e.xp6(1),e.Q6J("disabled",t.checkDisableBtnSaveOrPublish()),e.xp6(1),e.Q6J("ngIf",t.statusObj.loading),e.xp6(1),e.hij(" ",e.lcZ(122,85,"lang_auto_xuat_ban")," ")}}let eS=(()=>{class n extends xe.Q{getGroupMixInfosSubmit(t){let i={},a=[];return t.forEach(s=>{if(!i.hasOwnProperty(s.groupId)){i[s.groupId]=s.totalQuestion??0;let l=[],c=Number(s.totalGroupScore)/Number(s.totalQuestion);for(let u=0;u<(s.totalQuestion??0);u++)l.push(c);a=a.concat(l)}}),{status:this.isGroupMixQuestion?1:0,objs:i,marks:a}}getMixInfoSubmit(t,i){let a=Number(i)/Number(t),r=new Array(Number(t)).fill(a);return{limitMixQuestion:Number(t),marks:r}}clearTime(){this.form.controls.startTime.setValue(""),this.form.controls.endTime.setValue("")}calculateTime(t,i){let a=new Date(t).getTime()+60*i*1e3;return this.timeService.formatFullDateTimeByUserUnit(a)}calculatorTimeValidate(t,i){return""!=t&&""!=i?this.timeService.calculationHomeworkTimeWithZeroSecond(t,i):1}checkInfosField(t){let i="",a="",r="";if(this.commonService.myTranslate(["lang_auto_ho_va_ten"]).subscribe(s=>{i=s.lang_auto_ho_va_ten}),this.commonService.myTranslate(["lang_auto_lop"]).subscribe(s=>{a=s.lang_auto_lop}),this.commonService.myTranslate(["lang_auto_truong"]).subscribe(s=>{r=s.lang_auto_truong}),null==t||""==t)this.infoFields.push({type:0,title:i,contents:[],isFullName:!0}),this.infoFields.push({type:0,title:a,contents:[]}),this.infoFields.push({type:0,title:r,contents:[]});else{let s=this.commonService.myParseJson(t);this.infoFields=s??[]}}checkValidInfoField(){for(let t=0;t<this.infoFields.length;t++)if(0!=this.infoFields[t].type){if(!(this.infoFields[t].contents&&this.infoFields[t].contents.length>0)){this.formInfoInvalid=!0,this.infoFields[t].error=!0;break}{let i=this.infoFields[t].contents.filter(a=>""==a);if(i&&i.length>0){this.formInfoInvalid=!0,this.infoFields[t].error=!0;break}this.formInfoInvalid=!1,this.infoFields[t].error=!1}}else this.formInfoInvalid=!1,this.infoFields[t].error=!1}changeEnterInfoControl(){this.form.controls.enterInfo.value?this.checkValidInfoField():this.formInfoInvalid=!1}numberParse(t){return Number(t)}checkDisableBtnSaveOrPublish(){return!!(this.checkValidateCountQuestion||this.formInfoInvalid||2===this.form.controls.whoAllow.value&&this.form.controls.classroomFormArray.errors||3===this.form.controls.whoAllow.value&&this.form.controls.studentIds.errors||0==this.form.controls.schoolLevel.value||0==this.form.controls.schoolSubject.value||"3"==this.form.controls.whenShowAnswer.value&&!this.numberParse(this.form.controls.viewAnswerResultMinMark.value)&&!this.form.controls.allowTestingEachQuestion.value)}disableCheckValidateCountQuestion(){this.form.controls.mixQuestion.value?this.form.controls.isCreateSubTest.enable():(this.form.controls.isCreateSubTest.disable(),this.form.controls.isCreateSubTest.setValue(!1),this.checkValidateCountQuestion=!1),this.form.controls.isCreateSubTest.value?this.form.controls.fixMixQuestion.enable():this.form.controls.fixMixQuestion.disable()}callApiToSaveExam(t){if(!this.obj)return;let i=Number(this.commonService.getMyParam(this.activeRoute,"cat_id"))??0;this.form.controls.isRandomQuestion.value&&(this.form.controls.mixQuestion.setValue(0),this.form.controls.isCreateSubTest.setValue(!1));let a=this.form.getRawValue();const r=this.tagNameCtrl.value;if(r?.trim()&&this.tagNames.push(r.trim()),this.form.controls.examComboSetting.controls.price.errors)return void this.showErrorSnack("lang_config_enter_price_greater_than_10000_VND");if(this.calculatorTimeValidate(a.endTime??"",a.startTime??"")<0&&!a.allowTestingEachQuestion)return void this.showErrorSnack("lang_testbank_test_config_end_time_bigger_time_star");if(("1"==a.whenShowAnswer||"1"==a.whenShowResult)&&(!a.endTime||a.minutes<=0)&&!a.allowTestingEachQuestion)return void this.showErrorSnack("lang_auto_vui_long_nhap_thoi_gian_giao_de_va_thoi_gian_lam_bai_khi_chon_khi_tat_ca_thi_xong");if(isNaN(Number(a.minutes))||null==a.minutes)return void this.showErrorSnack("lang_auto_vui_long_nhap_thoi_gian");if(0==a.purposeExam)return void this.showErrorSnack("lang_testbank_please_choose_purpose_exam");if((4==a.purposeExam||8==a.purposeExam||12==a.purposeExam)&&""===a.purposeNote?.trim())return void this.showErrorSnack("lang_testbank_please_enter_purpose_create_exam");let s=a.startTime?this.timeService.formatDateTimeWithTimezoneAndZeroSecondToPostToServer(a.startTime):void 0,l=a.endTime?this.timeService.formatDateTimeWithTimezoneAndZeroSecondToPostToServer(a.endTime):void 0;a.isTakeTestOnce=a.isTakeTestOnce,a.limitAudio=a.limitAudio>0?a.limitAudio:0,a.mixQuestion=a.mixQuestion?1:0,a.limitMixQuestion=a.limitMixQuestion&&a.limitMixQuestion>0?a.limitMixQuestion:0;let c=this.getGroupMixInfosSubmit(a.groupInfos),u=this.getMixInfoSubmit(a.limitMixQuestion??0,a.totalPointQuestionNoGroup),m=a.isCreateSubTest&&1==a.mixQuestion?2:a.mixQuestion;if(a.enterInfo?this.checkValidInfoField():this.formInfoInvalid=!1,a.isCreateSubTest||(this.checkValidateCountQuestion=!1),(this.formInfoInvalid||this.checkValidateCountQuestion)&&!a.allowTestingEachQuestion)return void this.showErrorSnack("lang_auto_loi_hay_chac_chan_ban_da_dien_du_thong_tin");if(2==a.whoAllow&&this.form.controls.classroomFormArray.errors)return void this.showErrorSnack("lang_auto_please_select_classroom");const p=this.sAztClassroomCheckboxService.getClassroomIdsCheckedInGroup(this.form.controls.classroomFormArray);if(a.isCreateSubTest&&this.isGroupMixQuestion){let R=!1;if(this.form.controls.groupInfos.controls.forEach(j=>null==j.controls.totalQuestion.value?(this.showErrorSnack("lang_core_not_valid_mix_group_question"),void(R=!0)):null==j.controls.totalGroupScore.value||0==Number(j.controls.totalGroupScore.value)&&Number(j.controls.totalQuestion.value)>0?(this.showErrorSnack("lang_testbank_please_enter_all_correct_information"),void(R=!0)):void 0),R)return}if(a.isCreateSubTest&&!this.isGroupMixQuestion&&0==a.totalPointQuestionNoGroup)return void this.showErrorSnack("lang_testbank_please_enter_all_correct_information");let f=[];if(3==a.whoAllow&&a.studentIds&&a.studentIds.length){let N=this.commonService.arrayToDictionary(a.studentIds,R=>R.classroomId.toString());Object.entries(N).forEach(([R,j],G)=>{let ae=this.commonService.getFirstOfArray(j)?.classroomId;ae&&f?.push({classroomId:ae,assignStudentIds:j.map(W=>W.studentId)})})}else f=void 0;if(this.errorConfigScoreScaleTrueFalse)return this.showErrorSnack("lang_azt_please_enter_correct_data_for_true_false_scoring_scale_configuration");const b=this.convertTrueFalseForm();this.initStatusObj();let L={name:a.examName??this.obj.name,minutes:Number(a.minutes),password:a.password,startTime:s,endTime:l,whenShowAnswer:Number(a.whenShowAnswer),whenShowResult:Number(a.whenShowResult),onlyDisplayCorrectOrWrongQuestion:a.onlyTrueWrong?1:0,viewAnswerResultMinMark:a.viewAnswerResultMinMark?Number(a.viewAnswerResultMinMark):0,whoAllow:a.whoAllow,isPublished:t??void 0,autoMonitor:Number(a.autoMonitor),limitAudio:a.limitAudio,tags:this.tagNames,isTakeTestOnce:a.isTakeTestOnce?a.isTakeTestOnce:0,mixQuestion:m,fixMixQuestion:a.fixMixQuestion?1:0,mixQuestionNotInGroupInfoWithMarkObj:u,isRandomQuestion:this.enableRandomQuestion?a.isRandomQuestion?1:0:void 0,enterInfo:a.enterInfo?1:0,classroomIds:p,infoFieldsV2:JSON.stringify(this.infoFields),isSaveConfig:1,hideGroupQuestion:a.hideGroupQuestion?1:0,mixQuestionGroupInfoWithMarkObj:c,schoolLevelId:Number(a.schoolLevel),schoolSubjectId:Number(a.schoolSubject),purposeId:Number(a.purposeExam),purposeNote:a.purposeNote,allowTestingEachQuestion:a.allowTestingEachQuestion?1:0,mustCorrectToMoveOn:a.mustCorrectToMoveOn?1:0,showQuestionHelp:a.allowTestingEachQuestion?1:0,assignStudents:f,header:a.allowHeader?this.contentHeader:void 0,allowHeader:a.allowHeader?1:0,resetQuestionIndex:a.resetQuestionIndex??!1,examTrueFalseQuestionMarkConfigObj:b};this.waitDestroy(this.documentConfigService.apiDocumentConfigSaveExamConfigPost(this.hashId,L).subscribe(N=>{1==N.success?this.saveExamComboSetting(this.obj,this.form.controls.examComboSetting,R=>{if(R)return this.errorStatusObj(R,!0);const j=this.getMyQueryParam("classroomId"),G=this.getMyQueryParam("programId"),ae=this.getMyQueryParam("sessionId");if(j){const W=G?3:1;this.commonService.myNavigationWithQueryString(`/admin/student/classroom-details/${j}/${W}`,1===W?"":"?sessionId="+ae)}else if(t){let W=`/admin/testbank/config-exam-online/${i??0}/${this.obj?.hashId}?backto=`+encodeURIComponent(this.backToLink);this.commonService.myNavigationWithQueryString(`/admin/testbank/publish-document/0/${i??0}/${this.obj?.hashId}`,"?backto="+encodeURIComponent(W))}else{let W=this.backToLink.includes("shareType");this.commonService.myNavigation(`/admin/testbank/document-management/0/${W?0:i??0}/1`)}this.successStatusObj()}):this.errorStatusObj(N.message??"",!0)}))}saveExamComboSetting(t,i,a){if(!t)return a("lang_common_not_found_exam_obj");let r=i.controls.examInfoFormArray.getRawValue().map(c=>c.examId);r.includes(t.id)||r.push(t.id);let s=r.map(c=>({objectId:c,priceForAction:i.controls.priceForAction.value,isMain:t.id==c?1:0,objectType:"EXAM"})).filter(c=>"NONE"!=c.priceForAction);if(s.length<=0&&null==i.controls.comboId.value)return a(void 0);let l={id:i.controls.comboId.value??void 0,name:t.name,price:this.commonService.formatMoneyToNumber(i.controls.price.value),items:s};this.waitDestroy(this.comboPackageService.apiComboPackageUpsertComboPackagePost(l).subscribe(c=>{if(!c.success)return a(c.message);a(void 0)}))}savePublishExam(t){this.form.controls.allowHeader.value?this.uploadImageOfExamService.replaceImageInContent(_m.j6.EXAM_EDITOR,this.contentHeader).subscribe(i=>{null==i.errorMessage?(this.contentHeader=i.content,this.callApiToSaveExam(t)):(this.showErrorSnack(i.errorMessage),this.stopStatusObj())}):this.callApiToSaveExam(t)}openDateTimePicker(t){1==t?this.startTime&&this.startTime.open():this.endTime&&this.endTime.open()}confirmChangeMode(){this.hasTestingExamResult?this.sAztDialogService.open(oT,{width:"500px"}).afterClosed().subscribe(i=>{i&&this.form.controls.allowTestingEachQuestion.setValue(0==this.form.controls.allowTestingEachQuestion.value?1:0)}):this.form.controls.allowTestingEachQuestion.setValue(0==this.form.controls.allowTestingEachQuestion.value?1:0)}callMultipleApi(t){const i=this.documentConfigService.apiDocumentConfigGetExamConfigDataV2Get(t),a=this.commonListService.apiCommonListSubjectAndLevelsGet(this.commonService.getBusinessDomainUrl()),r=this.commonListService.apiCommonListExamPurposesGet(),s=this.comboPackageService.apiComboPackageListComboPackagesPost({examHashId:t,objectType:"EXAM"});return(0,ne.a)([i,a,r,s]).pipe((0,hc.U)(([l,c,u,m])=>{if(!l.success)throw(new Ng.g).getSimpleErrorMessage(l.code,l.message).toError();if(!c.success)throw(new Ng.g).getSimpleErrorMessage(c.code,c.message).toError();if(!u.success)throw(new Ng.g).getSimpleErrorMessage(u.code,u.message).toError();if(!m.success)throw(new Ng.g).getSimpleErrorMessage(m.code,m.message).toError();return{examResponse:l.data,schoolLevelAndSubjectResponse:c.data,examPurposeResponse:u.data?.objs??[],examComboResponse:m.data?.objs??[]}}),(0,nT.K)(l=>{throw l}))}getExamDataByHashId(t,i){this.initStatusObj(),this.waitDestroy(this.callMultipleApi(t).subscribe({next:a=>{if(null==a.examResponse?.examObj)return this.stopStatusObj();this.examCombos=a.examComboResponse;let r=a.examResponse.examObj,s=this.castObj(r);s&&(s.limitQuestionGroupsParse=this.commonService.myParseJson(r.limitQuestionGroups??""),this.obj=s);let l=this.commonService.myTranslateInstant("lang_auto_ten_de_thi"),c=this.commonService.myTranslateInstant("lang_auto_ma_de");this.titleExam=l+": "+r.name+" - "+c+": "+r.hashId,this.minLimitMixQuestion=a.examResponse.minLimitMixQuestion??0,this.examGroupInfos=a.examResponse.examGroupInfos&&a.examResponse.examGroupInfos.length>0?a.examResponse.examGroupInfos:this.examGroupInfos,this.enableRandomQuestion=a.examResponse.enableRandomQuestion??!1;let u=a.examResponse.examObj.mixQuestionNotInGroupInfoWithMarkObj?.marks?.reduce((R,j)=>R+j,0);u=Math.round(100*(u??1))/100,this.classroomWithGroup=a.examResponse.classroomGroupObjs??new Array,this.examStudents=a.examResponse.examStudents??new Array,this.examClassroomObjs=a.examResponse.examClassroomObjs??[],this.listPurposeObjs=a.examPurposeResponse,this.tagNames=a.examResponse.examTagObjs.map(R=>R.name),this.schoolLevelObjs=a.schoolLevelAndSubjectResponse?.schoolLevelSubjectObjs??[];let m=this.obj?.schoolLevelId?this.obj?.schoolLevelId:a.examResponse.examSchoolLogObj?.lastSchoolLevelId??0,p=this.obj?.schoolSubjectId?this.obj?.schoolSubjectId:a.examResponse.examSchoolLogObj?.lastSchoolSubjectId??0;this.hashId=this.obj?.hashId??"",this.isHasAudio=a.examResponse.isHasAudio??0;let f=2==this.obj?.mixQuestion,b=1==this.obj?.mixQuestion||2==this.obj?.mixQuestion?1:this.obj?.mixQuestion;this.hasTestingExamResult=a.examResponse.hasTestingExamResult;let L=a.examResponse.purposeId??0,N=a.examResponse.purposeNote??"";this.markDetails=a.examResponse?.examTrueFalseQuestionMarkConfigObj?.markDetails??[],this.form.patchValue({examName:this.obj?.name,schoolLevel:m,schoolSubject:p,purposeExam:L,purposeNote:N,isTakeTestOnce:this.obj?.isTakeTestOnce,password:this.obj?.password,autoMonitor:this.obj?.autoMonitor?.toString()??"0",minutes:Number(this.obj?.minutes??0),startTime:this.obj?.startTime?this.obj.startTime.toString():"",endTime:this.obj?.endTime?this.obj.endTime.toString():"",whenShowAnswer:this.obj?.whenShowAnswer?.toString(),whenShowResult:this.obj?.whenShowResult?.toString(),onlyTrueWrong:!!a.examResponse.onlyDisplayCorrectOrWrongQuestion,viewAnswerResultMinMark:Number(a.examResponse.viewAnswerResultMinMark)??0,whoAllow:i||(this.obj?.whoAllow??0),mixQuestion:b,isRandomQuestion:1===this.obj?.isRandomQuestion,isCreateSubTest:f,limitMixQuestion:this.obj?.limitMixQuestion,totalPointQuestionNoGroup:u,fixMixQuestion:1==this.obj?.fixMixQuestion,hideGroupQuestion:1==this.obj?.hideGroupQuestion,limitAudio:null!=this.obj?.limitAudio?Number(this.obj?.limitAudio):0,enterInfo:0!=this.obj?.enterInfo,allowTestingEachQuestion:a.examResponse.allowTestingEachQuestion,mustCorrectToMoveOn:a.examResponse.mustCorrectToMoveOn,showQuestionHelp:a.examResponse.showQuestionHelp,allowHeader:!!a.examResponse.allowHeader,resetQuestionIndex:a.examResponse.resetQuestionIndex??!1}),this.contentHeader=a.examResponse.header??"",this.checkInfosField(this.obj?.infoFieldsV2??""),this.successStatusObj()},error:a=>{this.forceShowErrorBox(a.error.message,!0)}}))}convertTrueFalseForm(){return{markDetails:this.form.controls.trueFalseQuestionMarkConfig.controls.map(t=>({totalCorrect:t.controls.totalCorrect.value,markPercent:t.controls.markPercent.value}))}}setErrorConfigScoreScaleTrueFalse(t){this.errorConfigScoreScaleTrueFalse=t}ngOnInit(){super.ngOnInit(),this.commonService.translateMetaData({title:"lang_cms__config_title",description:"lang_cms_test_config_online_description",image:""});let t=Number(this.commonService.getMyParam(this.activeRoute,"cat_id"))??0,i=this.commonService.getMyParam(this.activeRoute,"hash_id")??"",a=this.commonService.getMyQueryParam("backto")??"";this.backToLink=a||`/admin/testbank/document-management/0/${t}/1`,this.initDataEditor=this.sAztTinyMceService.initConfigForTeacherWithUploadImageBox(_m.j6.EXAM_EDITOR);const r=this.getMyQueryParam("classroomId");this.getExamDataByHashId(i,r?2:void 0)}constructor(t,i,a,r,s,l,c,u,m,p){super(),this.sAztTinyMceService=t,this.activeRoute=i,this.timeService=a,this.documentConfigService=r,this.sAztClassroomCheckboxService=s,this.browserStorageService=l,this.sAztDialogService=c,this.uploadImageOfExamService=u,this.commonListService=m,this.comboPackageService=p,this.tinyEditorKey=Z.N.tinyEditorKey,this.permissionTypes=pm.y,this.backToLink="",this.hashId="",this.tagNameCtrl=new h.NI("",{nonNullable:!0}),this.tagNames=[],this.examClassroomObjs=[],this.examStudents=[],this.isGroupMixQuestion=!1,this.checkValidateCountQuestion=!1,this.minLimitMixQuestion=0,this.examGroupInfos=[],this.enableRandomQuestion=!1,this.schoolLevelObjs=[],this.infoFields=[],this.formInfoInvalid=!1,this.isHasAudio=0,this.listPurposeObjs=[],this.hasTestingExamResult=!1,this.contentHeader="",this.maxDate=Z.N.maxDateTimePicker,this.classroomWithGroup=[],this.markDetails=[],this.errorConfigScoreScaleTrueFalse=!1,this.titleExam="",this.form=new h.cw({examName:new h.NI("",{nonNullable:!0,validators:[h.kI.required]}),schoolLevel:new h.NI(0,{nonNullable:!0,validators:[h.kI.required,h.kI.min(1)]}),schoolSubject:new h.NI(0,{nonNullable:!0,validators:[h.kI.required,h.kI.min(1)]}),purposeExam:new h.NI(0,{nonNullable:!0,validators:[h.kI.required]}),purposeNote:new h.NI("",{nonNullable:!0}),minutes:new h.NI(60,{nonNullable:!0,validators:[h.kI.required,h.kI.min(0)]}),isTakeTestOnce:new h.NI(0,{nonNullable:!0,validators:[h.kI.min(0)]}),autoMonitor:new h.NI("0",{nonNullable:!0}),password:new h.NI("",{nonNullable:!0}),startTime:new h.NI(Date(),{nonNullable:!0}),endTime:new h.NI(Date(),{nonNullable:!0,validators:[h.kI.required]}),whenShowAnswer:new h.NI("0",{nonNullable:!0}),whenShowResult:new h.NI("0",{nonNullable:!0}),onlyTrueWrong:new h.NI(!1,{nonNullable:!0}),viewAnswerResultMinMark:new h.NI(0,{nonNullable:!0}),whoAllow:new h.NI(0,{nonNullable:!0}),classroomFormArray:new h.Oe([]),studentIds:new h.Oe([]),mixQuestion:new h.NI(0,{nonNullable:!0}),isCreateSubTest:new h.NI(!1,{nonNullable:!0}),limitMixQuestion:new h.NI(void 0,{nonNullable:!0,validators:[h.kI.required]}),totalPointQuestionNoGroup:new h.NI(10,{nonNullable:!0,validators:[h.kI.required]}),groupInfos:new h.Oe([]),fixMixQuestion:new h.NI(!1,{nonNullable:!0}),isRandomQuestion:new h.NI(!1,{nonNullable:!0}),enterInfo:new h.NI(!1,{nonNullable:!0}),limitAudio:new h.NI(0,{nonNullable:!0,validators:[h.kI.min(0)]}),hideGroupQuestion:new h.NI(1===this.obj?.isRandomQuestion,{nonNullable:!0}),allowTestingEachQuestion:new h.NI(0,{nonNullable:!0}),mustCorrectToMoveOn:new h.NI(0,{nonNullable:!0}),showQuestionHelp:new h.NI(1,{nonNullable:!0}),allowHeader:new h.NI(!1,{nonNullable:!0}),contentHeader:new h.NI("",{nonNullable:!0}),resetQuestionIndex:new h.NI(!1,{nonNullable:!0}),trueFalseQuestionMarkConfig:new h.Oe([]),examComboSetting:new h.cw({comboId:new h.NI(null,{nonNullable:!1}),price:new h.NI("10000",{nonNullable:!0}),priceForAction:new h.NI("NONE",{nonNullable:!0}),examInfoFormArray:new h.Oe([]),haveInit:new h.NI(!1,{nonNullable:!0})})},{validators:[VA.customDateTimeValidator,Rp.h.classroomInGroupCheckBoxValidator,iT.M.studentCheckBoxValidator,Gp.priceValidator]})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Uv.y),e.Y36(E.gz),e.Y36(Mo.D),e.Y36(jv.C),e.Y36(Hp.f),e.Y36(oa.n),e.Y36(qi.C),e.Y36(aT.$),e.Y36(ps.o7),e.Y36(un.FK))},n.\u0275cmp=e.Xpm({type:n,selectors:[["test-config-online"]],viewQuery:function(t,i){if(1&t&&(e.Gf(Ak,5),e.Gf(_k,5)),2&t){let a;e.iGM(a=e.CRH())&&(i.startTime=a.first),e.iGM(a=e.CRH())&&(i.endTime=a.first)}},features:[e._Bn([{provide:Xn.fM,useClass:KA.WG,deps:[js.Ad,uo.o8]},{provide:Xn.ab,useFactory:md.hx,deps:[Mo.D]}]),e.qOj],decls:5,vars:4,consts:[[3,"headerBackToLink"],[3,"formGroup"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],["doneLoading",""],[3,"currentStatusObj"],["id","azt-config-document",1,"azt-config-document","mx-auto","mt-5",2,"max-width","1150px"],[1,"text-center","mt-5","font-bold"],[1,"grid","grid-cols-12","gap-5"],[1,"col-span-12"],["id","mode",1,"box","p-5","mt-5"],[1,"p-0"],[1,"grid","grid-cols-12","items-center"],[1,"col-span-5","lg:col-span-5"],["for","mode-configuration",1,"form-label","font-medium","flex","items-center"],[1,"col-span-2","lg:col-span-7"],[1,"switch-wrapper"],["for","test",3,"ngClass","click"],["for","train",3,"ngClass","click"],[1,"highlighter",3,"ngStyle"],[1,"col-span-12","lg:col-span-12"],[1,"leading-relaxed","text-slate-500","mt-2","pr-5"],[4,"ngIf"],[1,"setting-basic"],["id","general",1,"box","p-5","mt-5"],[1,"flex","items-center","border-b","border-slate-200/60","pb-5","mb-5","text-base","font-medium","dark:border-darkmode-400"],[1,"grid","grid-cols-12"],[1,"form-label","font-medium","flex","items-center"],[1,"setting-input"],["id","document-exam-name","formControlName","examName","type","text",1,"form-control",3,"placeholder"],["class","text-xs text-danger mt-1",4,"ngIf"],[1,"config-level-subject","mt-3"],[3,"form","schoolLevelObjs"],[1,"config-purpose-exam","mt-3"],[3,"form","purposeList"],["id","azt-config-time-minutes",1,"grid","grid-cols-12","mt-4"],["for","document-time-minutes",1,"form-label","font-medium","flex","items-center"],[1,"w-4","h-4","inline-block","ml-2",3,"matTooltip"],["name","info"],["id","document-time-minutes","appOnlyNumber","","formControlName","minutes","type","text",1,"form-control",3,"placeholder"],[1,"text-xs","text-slate-500","mt-1"],["class","grid grid-cols-12 mt-4","id","azt-config-time-assignment",4,"ngIf"],["id","azt-config-who-allow",1,"grid","grid-cols-12","mt-4"],[1,"col-span-12","lg:col-span-5","pr-5"],["class","leading-relaxed text-slate-500 text-xs mt-2",4,"ngIf"],[1,"col-span-12","lg:col-span-5"],[1,"flex","flex-col","sm:flex-row"],[1,"form-check","mr-10"],["id","config-who-all","formControlName","whoAllow","type","radio",1,"form-check-input",3,"value"],["for","config-who-all",1,"form-check-label"],[1,"form-check","mr-10","mt-2","sm:mt-0"],["id","config-who-class","formControlName","whoAllow","type","radio",1,"form-check-input",3,"value"],["for","config-who-class",1,"form-check-label"],[1,"form-check","mt-2","sm:mt-0"],["id","config-who-student","formControlName","whoAllow","type","radio",1,"form-check-input",3,"value"],["for","config-who-student",1,"form-check-label"],["class","col-span-12 mt-4",4,"ngIf"],["class","grid grid-cols-12 mt-4","id","exam-audio",4,"ngIf"],["class","setting-advanced mt-5",4,"ngIf"],[1,"setting-advanced","mt-5"],[1,"box","p-5","mt-3"],["class","grid grid-cols-12 mt-4",4,"ngIf"],["class","grid grid-cols-12 mt-5",4,"ngIf"],[1,"grid","grid-cols-12","mt-4"],[1,"col-span-10","lg:col-span-5"],["for","config-hide-group-header",1,"form-label","font-medium","flex","items-center"],[1,"leading-relaxed","text-slate-500","text-xs","mt-2","pr-5"],[1,"setting-input","form-switch"],["id","config-hide-group-header","formControlName","hideGroupQuestion","type","checkbox",1,"show-code","form-check-input"],[1,"flex","justify-end","mt-5"],["azt-track-service","config-exam-online-w_k87Co86T","class","btn w-24 btn-pending mr-2",3,"disabled","click",4,"ngIf"],["azt-track-service","config-exam-online-IJPSsthNNv",1,"btn","w-24","btn-primary",3,"disabled","click"],["class","w-4 h-4 inline-block",4,"ngIf"],[1,"leading-relaxed","text-pending"],[1,"text-xs","text-danger","mt-1"],["id","azt-config-time-assignment",1,"grid","grid-cols-12","mt-4"],["for","regular-form-1",1,"form-label","font-medium","flex","items-center"],[1,"grid","grid-cols-12","gap-3"],[1,"col-span-12","md:col-span-5"],["appearance","outline"],["azt-track-service","config-exam-online-zpjNTbf42S","matInput","","formControlName","startTime","readonly","",3,"placeholder","max","ngxMatDatetimePicker","click"],["azt-track-service","config-exam-online-WIIkPQrzu5","matSuffix","",2,"font-size","18px",3,"click"],[1,"w-4","h-4","inline-block"],["name","calendar-clock"],[3,"touchUi"],["startTime",""],["mat-raised-button","","color","secondary","ngxMatDatepickerCancel",""],["mat-raised-button","","color","primary","ngxMatDatepickerApply",""],["azt-track-service","config-exam-online-NFd3Eq4Vq9","matInput","","formControlName","endTime","readonly","",3,"placeholder","max","ngxMatDatetimePicker","click"],["azt-track-service","config-exam-online-2LQ7XbEP9P","matSuffix","",2,"font-size","18px",3,"click"],["endTime",""],[1,"col-span-6","md:col-span-2"],["azt-track-service","config-exam-online-ceMErvp9Ni",1,"btn","btn-outline-secondary","w-full",3,"click"],[1,"w-4","h-4","inline-block","mr-2"],["name","timer-reset"],[1,"text-xs","mt-2"],[1,"text-slate-500"],[1,"text-slate-500","mt-1"],["class","text-danger mt-1",4,"ngIf"],[1,"text-danger","mt-1"],[1,"leading-relaxed","text-slate-500","text-xs","mt-2"],[1,"col-span-12","mt-4"],[1,"azt-list-classroom"],[3,"form","classroomGroupData","examClassroomObjs","permissionName"],[1,"border","border-slate-200/60","dark:border-darkmode-400","rounded-md","pb-1"],[1,"p-3","bg-slate-100","dark:bg-darkmode-400","flex","items-center"],[1,"mr-auto"],[3,"form","classroomGroupData","examStudentObjs","permissionName"],["id","exam-audio",1,"grid","grid-cols-12","mt-4"],["for","config-audio",1,"form-label","mt-2","mb-0","font-medium","flex","items-center"],[1,"col-span-12","lg:col-span-7"],["type","text","id","config-audio","appOnlyNumber","","formControlName","limitAudio",1,"form-control",3,"placeholder"],["for","config-once-test",1,"form-label","mt-2","font-medium","flex","items-center"],["id","config-once-test","appOnlyNumber","","formControlName","isTakeTestOnce","type","text",1,"form-control"],["for","config-password",1,"form-label","mt-2","font-medium","flex","items-center"],["type","text","id","config-password","formControlName","password","type","text","autocapitalize","none",1,"form-control",3,"placeholder"],[1,"grid","grid-cols-12","mt-5"],[1,"form-check","mr-8"],["id","automatic-off","type","radio","formControlName","autoMonitor","value","0",1,"form-check-input"],["for","automatic-off",1,"form-check-label"],[1,"form-check","mr-8","mt-2","sm:mt-0"],["id","automatic-exit-monitor","type","radio","formControlName","autoMonitor","value","1",1,"form-check-input"],["for","automatic-exit-monitor",1,"form-check-label","flex","items-center"],["id","automatic-advanced","type","radio","formControlName","autoMonitor","value","3",1,"form-check-input"],["for","automatic-advanced",1,"form-check-label","flex","items-center"],["for","config-verify-student",1,"form-label","font-medium","flex","items-center"],[1,"setting-input","form-switch","ml-"],["id","config-verify-student","formControlName","enterInfo","type","checkbox",1,"show-code","form-check-input",3,"change"],["class","col-span-12 mt-5",4,"ngIf"],[1,"col-span-12","mt-5"],[3,"infoFields","formInfoInvalid","infoFieldsChange","formInfoInvalidChange","checkValidInfo"],["for","config-random-matrix-question",1,"form-label","font-medium","flex","items-center"],["id","config-random-matrix-question","formControlName","isRandomQuestion","type","checkbox",1,"show-code","form-check-input"],["for","config-mix-question",1,"form-label","mb-0","font-medium","flex","items-center"],["azt-track-service","config-exam-online-vrhIU4hchP","href","https://docs.azota.vn/docs/huong-dan-su-dung/thi-online/dao-cau-hoi-va-dap-an/","target","_blank",1,"text-primary","font-medium"],["id","config-mix-question","formControlName","mixQuestion","type","checkbox",1,"show-code","form-check-input",3,"change"],["for","config-create-sub",1,"form-label","font-medium","flex","items-center"],["id","config-create-sub","formControlName","isCreateSubTest","type","checkbox",1,"show-code","form-check-input",3,"change"],["formArrayGroupInfosName","groupInfos","formControlLimitMixQuestionName","limitMixQuestion",3,"form","obj","minLimitMixQuestion","examGroupInfos","isGroupMixQuestionChange","checkValidateCountQuestionChange",4,"ngIf"],["formArrayGroupInfosName","groupInfos","formControlLimitMixQuestionName","limitMixQuestion",3,"form","obj","minLimitMixQuestion","examGroupInfos","isGroupMixQuestionChange","checkValidateCountQuestionChange"],["for","config-fix-mix",1,"form-label","font-medium","flex","items-center"],["id","config-fix-mix","formControlName","fixMixQuestion","type","checkbox",1,"show-code","form-check-input"],["for","resetQuestionIndex",1,"form-label","font-medium","flex","items-center"],["id","resetQuestionIndex","formControlName","resetQuestionIndex","type","checkbox",1,"show-code","form-check-input"],[1,"mt-4"],[3,"form","markDetails","errorConfigScoreScaleTrueFalse"],["id","whenShowResult-block",1,"grid","grid-cols-12","mt-4"],["class","clearfix pt-1",4,"ngIf"],["id","whenShowResult-off","type","radio","formControlName","whenShowResult","value","2",1,"form-check-input"],["for","whenShowResult-off",1,"form-check-label"],["id","whenShowResult-tested","type","radio","formControlName","whenShowResult","value","0",1,"form-check-input"],["for","whenShowResult-tested",1,"form-check-label","flex","items-center"],["id","whenShowResult-advanced","type","radio","formControlName","whenShowResult","value","1",1,"form-check-input"],["for","whenShowResult-advanced",1,"form-check-label","flex","items-center"],["id","whenShowAnswer-block",1,"grid","grid-cols-12","mt-4"],["id","whenShowAnswer-off","type","radio","formControlName","whenShowAnswer","value","2",1,"form-check-input"],["for","whenShowAnswer-off",1,"form-check-label"],["id","whenShowAnswer-tested","type","radio","formControlName","whenShowAnswer","value","0",1,"form-check-input"],["for","whenShowAnswer-tested",1,"form-check-label","flex","items-center"],["id","whenShowAnswer-advanced","type","radio","formControlName","whenShowAnswer","value","1",1,"form-check-input"],["for","whenShowAnswer-advanced",1,"form-check-label","flex","items-center"],["id","whenShowAnswer-advanced-2","type","radio","formControlName","whenShowAnswer","value","3",1,"form-check-input"],["for","whenShowAnswer-advanced-2",1,"form-check-label","flex","items-center"],[1,"clearfix","pt-1"],["for","show-answer-reached-point",1,"form-label","mt-2","font-medium","flex","items-center"],["type","text","id","show-answer-reached-point","appOnlyNumber","","formControlName","viewAnswerResultMinMark","type","text",1,"form-control",3,"decimal","placeholder"],["class","text-xs text-danger mt-2",4,"ngIf"],[1,"text-xs","text-danger","mt-2"],[3,"form","examCombos","currentExamId"],[1,"box","p-5","mt-5"],["type","checkbox","formControlName","allowHeader",1,"show-code","form-check-input"],[3,"ngModel","ngModelOptions","apiKey","init","ngModelChange"],["tinyEditor",""],["azt-track-service","config-exam-online-w_k87Co86T",1,"btn","w-24","btn-pending","mr-2",3,"disabled","click"]],template:function(t,i){if(1&t&&(e.TgZ(0,"teacher-layout",0)(1,"form",1),e.YNc(2,fk,1,1,"azt-loading-effect",2),e.YNc(3,Xk,123,93,"ng-template",null,3,e.W1O),e.qZA()()),2&t){const a=e.MAs(4);e.Q6J("headerBackToLink",i.backToLink),e.xp6(1),e.Q6J("formGroup",i.form),e.xp6(1),e.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a)}},dependencies:[F.mk,F.O5,F.PC,ds.lW,YA.Nt,ms.KE,ms.R9,Ai.gM,Xn.rZ,Xn.T$,Xn.c_,Xn.dW,Xn.cL,C.PG,h._Y,h.Fj,h.Wl,h._,h.JJ,h.JL,h.On,h.sg,h.u,vi.l,Dt.Y,wt.M,hm.B,wi.n,$p.Z,Eg.u,_e,qv,wo._,_.Nh5,TT,Kv,hk.V,ye.JV],styles:[".header-list-class[_ngcontent-%COMP%]{display:flex}@media screen and (max-width: 550px){.header-list-class[_ngcontent-%COMP%]{display:block}.toggle-select-class[_ngcontent-%COMP%]{margin-top:10px;justify-content:space-between}}"]}),n})(),Yv=(()=>{class n extends xe.Q{redirectBackTo(){this.myNavigationBySpecialQueryString(this.backToLink)}ngOnInit(){this.waitDestroy((0,ne.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{let t=this.commonService.getMyParam(this.activeRoute,"cat_id")??"";this.homeworkHashId=this.commonService.getMyParam(this.activeRoute,"hash_id")??"",this.backToLink=this.commonService.getMyQueryParam("backto")??"";let i=this.commonService.getMyQueryParam("backto");this.backToLink=i??`/admin/testbank/document-management/1/${t??0}/1`})),this.commonService.translateMetaData({title:"lang_cms__config_title",description:"lang_cms_config_homework_description",image:""}),super.ngOnInit()}constructor(t){super(),this.activeRoute=t,this.backToLink="",this.homeworkHashId=""}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(E.gz))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-config-homework"]],features:[e.qOj],decls:2,vars:1,consts:[[3,"headerBackToLink"],[3,"onBack"]],template:function(t,i){1&t&&(e.TgZ(0,"teacher-layout",0)(1,"main-config-homework",1),e.NdJ("onBack",function(){return i.redirectBackTo()}),e.qZA()()),2&t&&e.Q6J("headerBackToLink",i.backToLink)},dependencies:[wo._,Sg]}),n})();var Dx=I(36435);let tS=(()=>{class n extends xe.Q{constructor(t){super(),this.activeRoute=t,this.linkCopy="",this.offlineCode="",this.hasOfflineExam=!1,this.checkValueInput=!1,this.classroomObjs=[],this.isCheckAll=!1,this.shareClassroomIds=[],this.classIdsNotPermission=[],this.hashId="",this.cateId=""}ngOnInit(){this.hashId=this.commonService.getMyParam(this.activeRoute,"hash_id")??"0",super.ngOnInit()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(E.gz))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-config-share-offline-result"]],features:[e.qOj],decls:1,vars:2,consts:[[3,"examHashId","useDialog"]],template:function(t,i){1&t&&e._UZ(0,"azt-offline-share",0),2&t&&e.Q6J("examHashId",i.hashId)("useDialog",!1)},dependencies:[Dx.h],styles:[".school-info_bg[_ngcontent-%COMP%]{background:#fff;height:100vh}.block-note[_ngcontent-%COMP%]{padding:5px}.note[_ngcontent-%COMP%]{color:#acacac}.btn-close[_ngcontent-%COMP%]{transition:all .5s}.btn-close[_ngcontent-%COMP%]:hover{background:#dfe6e9}mat-radio-group[_ngcontent-%COMP%]{margin:10px 5px;width:90%;display:flex;justify-content:space-between}.block-title[_ngcontent-%COMP%]{text-align:center;font-size:18px;font-weight:500}.block-main-classroom[_ngcontent-%COMP%]{padding:10px;border:1px solid #908e8e;border-radius:5px;height:200px;overflow:hidden}.classroom-header[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:15px}.btn-copy[_ngcontent-%COMP%]{border-radius:5px;transition:all .5s;text-transform:inherit}.btn-copy[_ngcontent-%COMP%]:hover:not([disabled]){background:#16236c}"]}),n})();var Sa=function(n){return n[n.create=0]="create",n[n.excel=1]="excel",n[n.updateExam=2]="updateExam",n[n.updateExamCode=3]="updateExamCode",n[n.text=4]="text",n}(Sa||{});let WA=(()=>{class n{constructor(){}convertTrueFalseForm(t){return{markDetails:t.controls.trueFalseQuestionMarkConfig.controls.map(i=>({totalCorrect:i.controls.totalCorrect.value,markPercent:i.controls.markPercent.value}))}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var nS=I(93283),XA=I(1028);function iS(n,o){1&n&&(e.TgZ(0,"div",20),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_testbank_please_enter_score_greater_than_0")," "))}function oS(n,o){if(1&n&&(e.TgZ(0,"div",14)(1,"div",15)(2,"label",16),e._uU(3),e.ALo(4,"mytranslate"),e.ALo(5,"mytranslate"),e.ALo(6,"mytranslate"),e.qZA(),e.TgZ(7,"div",17),e._UZ(8,"input",18),e.qZA()(),e.YNc(9,iS,3,3,"div",19),e.qZA()),2&n){const t=e.oxw(2);e.xp6(3),e.hij(" ",e.lcZ(4,3,"azt_lang_sugg_part_cc")+" "+e.lcZ(5,5,"azt_lang_sugg_type_multiple_choice")+" ("+t.data.totalMultipleChoice+" "+e.lcZ(6,7,"lang_testbank_tested_list_question")+")"," "),e.xp6(5),e.Q6J("decimal",!0),e.xp6(1),e.Q6J("ngIf",t.form.controls.scoreMultipleChoice.errors&&(t.form.controls.scoreMultipleChoice.dirty||t.form.controls.scoreMultipleChoice.touched))}}function aS(n,o){1&n&&(e.TgZ(0,"div",20),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_testbank_please_enter_score_greater_than_0")," "))}function rS(n,o){if(1&n&&(e.TgZ(0,"div",8)(1,"div",15)(2,"label",21),e._uU(3),e.ALo(4,"mytranslate"),e.ALo(5,"mytranslate"),e.ALo(6,"mytranslate"),e.qZA(),e.TgZ(7,"div",17),e._UZ(8,"input",22),e.qZA()(),e.YNc(9,aS,3,3,"div",19),e.qZA()),2&n){const t=e.oxw(2);e.xp6(3),e.hij(" ",e.lcZ(4,3,"azt_lang_sugg_part_cc")+" "+e.lcZ(5,5,"lang_testbank_true_false_quiz")+" ("+t.data.totalTrueFalse+" "+e.lcZ(6,7,"lang_testbank_tested_list_question")+")"," "),e.xp6(5),e.Q6J("decimal",!0),e.xp6(1),e.Q6J("ngIf",t.form.controls.scoreTrueFalse.errors&&(t.form.controls.scoreTrueFalse.dirty||t.form.controls.scoreTrueFalse.touched))}}function sS(n,o){1&n&&(e.TgZ(0,"div",20),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_testbank_please_enter_score_greater_than_0")," "))}function lS(n,o){if(1&n&&(e.TgZ(0,"div",8)(1,"div",15)(2,"label",23),e._uU(3),e.ALo(4,"mytranslate"),e.ALo(5,"mytranslate"),e.ALo(6,"mytranslate"),e.qZA(),e.TgZ(7,"div",17),e._UZ(8,"input",24),e.qZA()(),e.YNc(9,sS,3,3,"div",19),e.qZA()),2&n){const t=e.oxw(2);e.xp6(3),e.hij(" ",e.lcZ(4,3,"azt_lang_sugg_part_cc")+" "+e.lcZ(5,5,"lang_testbank_fill_number")+" ("+t.data.totalFill+" "+e.lcZ(6,7,"lang_testbank_tested_list_question")+")"," "),e.xp6(5),e.Q6J("decimal",!0),e.xp6(1),e.Q6J("ngIf",t.form.controls.scoreFill.errors&&(t.form.controls.scoreFill.dirty||t.form.controls.scoreFill.touched))}}function cS(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_testbank_please_enter_score_greater_than_0")))}function uS(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_core_vui_long_nhap_diem_tu_luan_nho_hon_10")))}function dS(n,o){if(1&n&&(e.TgZ(0,"div",20),e.YNc(1,cS,3,3,"span",27),e.YNc(2,uS,3,3,"span",27),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.form.controls.scoreEssay.errors.required||t.form.controls.scoreEssay.errors.min),e.xp6(1),e.Q6J("ngIf",t.form.controls.scoreEssay.errors.max)}}function mS(n,o){if(1&n&&(e.TgZ(0,"div",8)(1,"div",15)(2,"label",25),e._uU(3),e.ALo(4,"mytranslate"),e.ALo(5,"mytranslate"),e.ALo(6,"mytranslate"),e.qZA(),e.TgZ(7,"div",17),e._UZ(8,"input",26),e.qZA()(),e.YNc(9,dS,3,2,"div",19),e.qZA()),2&n){const t=e.oxw(2);e.xp6(3),e.hij(" ",e.lcZ(4,3,"azt_lang_sugg_part_cc")+" "+e.lcZ(5,5,"azt_lang_sugg_type_essay")+" ("+t.data.totalEssay+" "+e.lcZ(6,7,"lang_testbank_tested_list_question")+")"," "),e.xp6(5),e.Q6J("decimal",!0),e.xp6(1),e.Q6J("ngIf",t.form.controls.scoreEssay.errors&&(t.form.controls.scoreEssay.dirty||t.form.controls.scoreEssay.touched))}}function pS(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",1)(1,"form",2)(2,"div",3)(3,"span",4),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()(),e.TgZ(6,"div",5),e.YNc(7,oS,10,9,"div",6),e.YNc(8,rS,10,9,"div",7),e.YNc(9,lS,10,9,"div",7),e.YNc(10,mS,10,9,"div",7),e.TgZ(11,"div",8)(12,"span",9),e._uU(13),e.ALo(14,"mytranslate"),e.qZA(),e.TgZ(15,"span",10),e._uU(16),e.ALo(17,"mytranslate"),e.qZA()()(),e.TgZ(18,"div",11)(19,"button",12),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.handleCloseDialog())}),e._uU(20),e.ALo(21,"mytranslate"),e.qZA(),e.TgZ(22,"button",13),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.handelScoreDistribution())}),e._uU(23),e.ALo(24,"mytranslate"),e.qZA()()()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.form),e.xp6(3),e.hij(" ",e.lcZ(5,10,"lang_testbank_quick_score_distribution")," "),e.xp6(3),e.Q6J("ngIf",t.data.totalMultipleChoice),e.xp6(1),e.Q6J("ngIf",t.data.totalTrueFalse),e.xp6(1),e.Q6J("ngIf",t.data.totalFill),e.xp6(1),e.Q6J("ngIf",t.data.totalEssay),e.xp6(3),e.hij(" ",e.lcZ(14,12,"lang_homework_mark_exercise_utils_note")+": "," "),e.xp6(3),e.hij(" ",e.lcZ(17,14,"lang_testbank_reallocate_scores_when_adding_a_new_section")," "),e.xp6(4),e.hij(" ",e.lcZ(21,16,"lang_auto_dong")," "),e.xp6(3),e.hij(" ",e.lcZ(24,18,"lang_cms_common_confirm_btn")," ")}}let hS=(()=>{class n extends mt.e{handleCloseDialog(){this.dialogRef.close()}handelScoreDistribution(){if(this.form.invalid)return this.form.markAllAsTouched();this.dialogRef.close({scoreMultipleChoice:this.form.controls.scoreMultipleChoice.value,totalMultipleChoice:this.data?.totalMultipleChoice??0,scoreTrueFalse:this.form.controls.scoreTrueFalse.value,totalTrueFalse:this.data?.totalTrueFalse??0,scoreFill:this.form.controls.scoreFill.value,totalFill:this.data?.totalFill??0,scoreEssay:this.form.controls.scoreEssay.value,totalEssay:this.data?.totalEssay??0})}addValidateForm(){if(!this.data)return;const t=1e-6;this.data.totalMultipleChoice&&this.form.controls.scoreMultipleChoice.addValidators([h.kI.required,h.kI.min(t)]),this.data.totalTrueFalse&&this.form.controls.scoreTrueFalse.addValidators([h.kI.required,h.kI.min(t)]),this.data.totalFill&&this.form.controls.scoreFill.addValidators([h.kI.required,h.kI.min(t)]),this.data.totalEssay&&this.form.controls.scoreEssay.addValidators([h.kI.required,h.kI.min(t),h.kI.max(9.99)])}ngOnInit(){super.ngOnInit(),this.addValidateForm()}constructor(t,i){super(i,t),this.dialogRef=t,this.data=i,this.form=new h.cw({scoreMultipleChoice:new h.NI(i?.scoreMultipleChoice??0,{nonNullable:!0}),scoreTrueFalse:new h.NI(i?.scoreTrueFalse??0,{nonNullable:!0}),scoreFill:new h.NI(i?.scoreFill??0,{nonNullable:!0}),scoreEssay:new h.NI(i?.scoreEssay??0,{nonNullable:!0})})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(U.so,8),e.Y36(U.WI,8))},n.\u0275cmp=e.Xpm({type:n,selectors:[["quick-score-distribution"]],features:[e.qOj],decls:1,vars:1,consts:[["class","box",4,"ngIf"],[1,"box"],[3,"formGroup"],[1,"border-b","border-slate-200","dark:border-darkmode-400","p-3"],[1,"font-medium","text-base"],[1,"p-3","border-b","border-slate-200","dark:border-darkmode-400"],["class","mt-0",4,"ngIf"],["class","mt-4",4,"ngIf"],[1,"mt-4"],[1,"text-pending","font-medium","text-xs"],[1,"font-medium","text-xs"],[1,"p-3","text-right"],[1,"btn","btn-outline-secondary","mr-3","w-24",3,"click"],[1,"btn","btn-primary","w-24",3,"click"],[1,"mt-0"],[1,"flex","items-center"],["for","scoreMultipleChoice",1,"font-medium","mr-3"],[1,"ml-auto"],["type","text","formControlName","scoreMultipleChoice","id","scoreMultipleChoice","appOnlyNumber","",1,"form-control","text-center",2,"width","90px",3,"decimal"],["class","mt-2 text-danger font-medium text-xs",4,"ngIf"],[1,"mt-2","text-danger","font-medium","text-xs"],["for","scoreTrueFalse",1,"font-medium","mr-3"],["type","text","formControlName","scoreTrueFalse","id","scoreTrueFalse","appOnlyNumber","",1,"form-control","text-center",2,"width","90px",3,"decimal"],["for","scoreFill",1,"font-medium","mr-3"],["type","text","formControlName","scoreFill","id","scoreFill","appOnlyNumber","",1,"form-control","text-center",2,"width","90px",3,"decimal"],["for","azt_lang_sugg_type_essay",1,"font-medium","mr-3"],["type","text","formControlName","scoreEssay","id","azt_lang_sugg_type_essay","appOnlyNumber","",1,"form-control","text-center",2,"width","90px",3,"decimal"],[4,"ngIf"]],template:function(t,i){1&t&&e.YNc(0,pS,25,20,"div",0),2&t&&e.Q6J("ngIf",i.data)},dependencies:[F.O5,h._Y,h.Fj,h.JJ,h.JL,h.sg,h.u,Dt.Y,wt.M,ye.JV],encapsulation:2}),n})();var Dg=function(n){return n.init="init",n.emptyAll="emptyAll",n.success="success",n}(Dg||{});let fm=(()=>{class n{createItemAnswer(t,i,a){return new h.cw({answerType:new h.NI(i??1,{nonNullable:!0,validators:[h.kI.required]}),answer:new h.NI(this.getDefaultValueAnswerByPartType(i??1),{nonNullable:!0,validators:[h.kI.required]}),point:new h.NI(a,{nonNullable:!0,validators:[h.kI.required]}),isEssay:new h.NI(t,{nonNullable:!0})})}createItemAnswerWithValue(t,i,a,r,s){return new h.cw({answerType:new h.NI(i??1,{nonNullable:!0,validators:[h.kI.required]}),answer:new h.NI(r??"",{nonNullable:!0,validators:[h.kI.required,Da._.noWhiteSpace,h.kI.maxLength(4)]}),point:new h.NI(a,{nonNullable:!0,validators:[h.kI.required]}),isEssay:new h.NI(t,{nonNullable:!0}),questionId:new h.NI(s,{nonNullable:!0})})}createExamPart(t,i,a,r){return new h.cw({examPartType:new h.NI(t,{nonNullable:!0,validators:[h.kI.required]}),scoreQuestion:new h.NI(a,{nonNullable:!0,validators:[h.kI.required,h.kI.min(1e-7)]}),totalQuestion:new h.NI(i,{nonNullable:!0,validators:[h.kI.required,h.kI.max(this.maxQuestion)]}),colTotalItem:new h.NI(Math.ceil(i/this.colAnswerList),{nonNullable:!0}),startLabelIndex:new h.NI(r,{nonNullable:!0,validators:[h.kI.required]}),emptyAnswer:new h.NI(this.typeEmptyAnswer.init,{nonNullable:!0}),answerList:this.createAnswerListByType(t,i,a)})}createAnswerListByType(t,i,a){const r=new h.Oe([]);let s=a/i;s=this.commonService.parseNumberFixed(s,this.toFixTotalPoint);for(let l=0;l<i;l++)r.push(this.createItemAnswer(!1,t,s));return r}getDefaultValueAnswerByPartType(t){return{[this.offlineAnswerType.fill]:"",[this.offlineAnswerType.multipleChoice]:"",[this.offlineAnswerType.essay]:this.essayAnswer,[this.offlineAnswerType.trueFalse]:this.defaultTrueFalse}[t]||""}convertAnswerByType(t,i){return t===this.offlineAnswerType.trueFalse?i.split("").map((a,r)=>"F"===a?"":this.answerChoiceMap[r]).join(""):i}convertAnswerTrueFalse(t){const i=t.split(",");return this.commonService.myClone(this.answerChoiceMap).map(s=>i.includes(s)?"T":"F").join("")}getAllExamPartTypeInExamCode(t){return t.value.map(a=>a.examPartType).join("")}initExamPartType(){this.examPartTypeList=[{id:1,index:0,key:"azt_lang_sugg_type_multiple_choice",desc:"Multiple-choice"},{id:5,index:1,key:"lang_testbank_true_false_quiz",desc:"True/false quiz"},{id:4,index:2,key:"lang_testbank_fill_number",desc:"Fill number"},{id:3,index:3,key:"azt_lang_sugg_type_essay",desc:"Essay"}]}constructor(t){this.commonService=t,this.colAnswerList=4,this.toFixTotalPoint=8,this.offlineAnswerType=XA.X,this.essayAnswer="TL",this.defaultTrueFalse="UUUU",this.maxQuestion=120,this.typeEmptyAnswer=Dg,this.answerChoiceMap=["A","B","C","D"],this.answerTrueFalseMap=[{labelSubQuestion:"a",labelTrue:"T",labelFalse:"F"},{labelSubQuestion:"b",labelTrue:"T",labelFalse:"F"},{labelSubQuestion:"c",labelTrue:"T",labelFalse:"F"},{labelSubQuestion:"d",labelTrue:"T",labelFalse:"F"}],this.examPartTypeList=[],this.initExamPartType()}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(Yn.z))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})();var hu=I(74104),Qi=I(77988);let _S=(()=>{class n{constructor(t){this.commonService=t}transform(t){return this.commonService.parseNumberFixed(t,8)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Yn.z,16))},n.\u0275pipe=e.Yjl({name:"roundScoreQuestion",type:n,pure:!0}),n})(),fS=(()=>{class n{constructor(t){this.offlineExamPartService=t}transform(t){return this.offlineExamPartService.examPartTypeList.find(a=>a.id===t)?.key??""}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(fm,16))},n.\u0275pipe=e.Yjl({name:"getExamPartTypeById",type:n,pure:!0}),n})();function gS(n,o){1&n&&(e.TgZ(0,"div",25),e._UZ(1,"azt-loading-ui"),e.qZA())}function xS(n,o){if(1&n&&(e.TgZ(0,"div",9),e._uU(1),e.ALo(2,"roundScoreQuestion"),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.controls.scoreQuestion.value/t.controls.totalQuestion.value),"")}}function bS(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",26)(1,"button",27),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().index,r=e.oxw(2);return e.KtG(r.removeOfflineExamPart(a))}),e.TgZ(2,"div",25),e._UZ(3,"lucide-icon",28),e.qZA()()()}if(2&n){const t=e.oxw().index,i=e.oxw(2);e.xp6(1),e.Q6J("disabled",0===t&&1===i.examCodeGroup.controls.offlineExamPart.controls.length)}}function vS(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",38),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw().index,l=e.oxw().index,c=e.oxw(2).$implicit,u=e.oxw(2);return e.KtG(u.chooseAnswerQuestion(c,s+l*c.controls.colTotalItem.value,r))}),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.BQk()}if(2&n){const t=o.$implicit,i=e.oxw().$implicit;e.xp6(1),e.Q6J("ngClass",i.value.answer==t?"btn-primary":""),e.xp6(1),e.hij(" ",e.lcZ(3,2,t)," ")}}function wS(n,o){if(1&n&&(e.TgZ(0,"div",33)(1,"div",34)(2,"div",35)(3,"div",36),e._uU(4),e.qZA()(),e.YNc(5,vS,4,4,"ng-container",37),e.qZA()()),2&n){const t=o.$implicit,i=o.index,a=e.oxw().index,r=e.oxw(2).$implicit,s=e.oxw(2);e.xp6(1),e.Q6J("formGroup",t),e.xp6(3),e.hij(" ",i+1+a*r.controls.colTotalItem.value+(s.form.controls.isResetLabelQuestionPart.value?0:r.controls.startLabelIndex.value)+" "," "),e.xp6(1),e.Q6J("ngForOf",s.offlineExamPartService.answerChoiceMap)}}function yS(n,o){if(1&n&&(e.TgZ(0,"div",31),e.YNc(1,wS,6,3,"div",32),e.qZA()),2&n){const t=o.index,i=e.oxw(2).$implicit;e.xp6(1),e.Q6J("ngForOf",i.controls.answerList.controls.slice(t*i.controls.colTotalItem.value,t*i.controls.colTotalItem.value+i.controls.colTotalItem.value))}}function CS(n,o){if(1&n&&(e.TgZ(0,"div",29),e.YNc(1,yS,2,1,"div",30),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.controls.answerList.controls.slice(0,t.controls.answerList.controls.length/t.controls.colTotalItem.value%1==0?t.controls.answerList.controls.length/t.controls.colTotalItem.value:t.controls.answerList.controls.length/t.controls.colTotalItem.value+1))}}function TS(n,o){if(1&n&&(e.TgZ(0,"div",41)(1,"div",42)(2,"div",43)(3,"div",44),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()(),e.TgZ(6,"button",45),e._uU(7),e.ALo(8,"mytranslate"),e.qZA()()()),2&n){const t=o.$implicit,i=o.index,a=e.oxw(2).$implicit,r=e.oxw(2);e.xp6(1),e.Q6J("formGroup",t),e.xp6(3),e.hij(" ",e.lcZ(5,3,"lang_auto_cau")+" "+(i+1+(r.form.controls.isResetLabelQuestionPart.value?0:a.controls.startLabelIndex.value))+" "," "),e.xp6(3),e.hij(" ",e.lcZ(8,5,"lang_offline_question_type_essay")," ")}}function kS(n,o){if(1&n&&(e.TgZ(0,"div",39),e.YNc(1,TS,9,7,"div",40),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.controls.answerList.controls)}}const Ux=function(n){return{"border-danger":n}};function SS(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",41)(1,"div",42)(2,"div",43)(3,"div",44),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()(),e.TgZ(6,"input",46),e.NdJ("input",function(){e.CHM(t);const a=e.oxw(2),r=a.$implicit,s=a.index,l=e.oxw(2);return e.KtG(l.changeAnswerFill(r,s))}),e.qZA()()()}if(2&n){const t=o.$implicit,i=o.index,a=e.oxw(2).$implicit,r=e.oxw(2);e.xp6(1),e.Q6J("formGroup",t),e.xp6(3),e.hij(" ",e.lcZ(5,7,"lang_auto_cau")+" "+(i+1+(r.form.controls.isResetLabelQuestionPart.value?0:a.controls.startLabelIndex.value))+" "," "),e.xp6(2),e.Q6J("decimal",!0)("decimalSeparator",",")("maxLength",4)("allowNegatives",!0)("ngClass",e.VKq(9,Ux,t.controls.answer.errors))}}function ES(n,o){if(1&n&&(e.TgZ(0,"div",39),e.YNc(1,SS,7,11,"div",40),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.controls.answerList.controls)}}const $v=function(n){return{"btn-primary":n}};function OS(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",52)(1,"span",53),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.TgZ(4,"button",54),e.NdJ("click",function(){const a=e.CHM(t),r=a.index,s=a.$implicit,l=e.oxw().index,c=e.oxw(2).$implicit,u=e.oxw(2);return e.KtG(u.chooseAnswerTrueFalse(c,l,r,s.labelTrue))}),e._uU(5),e.ALo(6,"mytranslate"),e.qZA(),e.TgZ(7,"button",55),e.NdJ("click",function(){const a=e.CHM(t),r=a.index,s=a.$implicit,l=e.oxw().index,c=e.oxw(2).$implicit,u=e.oxw(2);return e.KtG(u.chooseAnswerTrueFalse(c,l,r,s.labelFalse))}),e._uU(8),e.ALo(9,"mytranslate"),e.qZA()()}if(2&n){const t=o.$implicit,i=o.index,a=e.oxw().$implicit;e.xp6(2),e.Oqu(e.lcZ(3,5,t.labelSubQuestion)+")"),e.xp6(2),e.Q6J("ngClass",e.VKq(11,$v,a.controls.answer.value.split("")[i]===t.labelTrue)),e.xp6(1),e.hij(" ",e.lcZ(6,7,"lang_auto_dung")," "),e.xp6(2),e.Q6J("ngClass",e.VKq(13,$v,a.controls.answer.value.split("")[i]===t.labelFalse)),e.xp6(1),e.hij(" ",e.lcZ(9,9,"lang_auto_sai")," ")}}function IS(n,o){if(1&n&&(e.TgZ(0,"div",49)(1,"div",42)(2,"div",43)(3,"div",44),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()(),e.TgZ(6,"div",50),e.YNc(7,OS,10,15,"div",51),e.qZA()()()),2&n){const t=o.$implicit,i=o.index,a=e.oxw(2).$implicit,r=e.oxw(2);e.xp6(1),e.Q6J("formGroup",t),e.xp6(3),e.hij(" ",e.lcZ(5,3,"lang_auto_cau")+" "+(i+1+(r.form.controls.isResetLabelQuestionPart.value?0:a.controls.startLabelIndex.value))+" "," "),e.xp6(3),e.Q6J("ngForOf",r.offlineExamPartService.answerTrueFalseMap)}}function MS(n,o){if(1&n&&(e.TgZ(0,"div",47),e.YNc(1,IS,8,5,"div",48),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.controls.answerList.controls)}}function LS(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",6)(1,"form",1)(2,"div",7)(3,"div",8)(4,"div",9),e._uU(5),e.ALo(6,"mytranslate"),e.qZA(),e.TgZ(7,"div",10)(8,"span",11),e._uU(9),e.ALo(10,"mytranslate"),e.ALo(11,"getExamPartTypeById"),e.qZA()()(),e.TgZ(12,"div",12)(13,"div",9),e._uU(14),e.ALo(15,"mytranslate"),e.qZA(),e.TgZ(16,"div",13)(17,"input",14),e.NdJ("selectionChange",function(){const r=e.CHM(t).$implicit,s=e.oxw(2);return e.KtG(s.changeExamPartType(r,r.controls.examPartType.value))})("input",function(){const a=e.CHM(t),r=a.$implicit,s=a.index,l=e.oxw(2);return e.KtG(l.changeTotalQuestionInExamPart(r,s))}),e.qZA()()(),e.TgZ(18,"div",12)(19,"div",9),e._uU(20),e.ALo(21,"mytranslate"),e.qZA(),e.TgZ(22,"div",13)(23,"input",15),e.NdJ("input",function(){const r=e.CHM(t).$implicit,s=e.oxw(2);return e.KtG(s.changeScoreQuestionInExamPart(r))}),e.qZA()()(),e.TgZ(24,"div",16)(25,"div",17),e._uU(26),e.ALo(27,"mytranslate"),e.qZA(),e.YNc(28,gS,2,0,"div",18),e.YNc(29,xS,3,3,"ng-template",null,19,e.W1O),e.qZA(),e.YNc(31,bS,4,1,"div",20),e.qZA(),e.TgZ(32,"div",21),e.YNc(33,CS,2,1,"div",22),e.YNc(34,kS,2,1,"div",23),e.YNc(35,ES,2,1,"div",23),e.YNc(36,MS,2,1,"div",24),e.qZA()()()}if(2&n){const t=o.$implicit,i=e.MAs(30),a=e.oxw(2);e.xp6(1),e.Q6J("formGroup",t),e.xp6(4),e.hij(" ",e.lcZ(6,17,"azt_lang_sugg_part_cc")," "),e.xp6(4),e.hij(" ",e.lcZ(10,19,e.lcZ(11,21,t.controls.examPartType.value))," "),e.xp6(5),e.hij(" ",e.lcZ(15,23,"lang_auto_so_luong_cau_hoi")," "),e.xp6(3),e.Q6J("max",120)("ngClass",e.VKq(29,Ux,t.controls.totalQuestion.errors)),e.xp6(3),e.hij(" ",e.lcZ(21,25,"lang_auto_tong_diem")," "),e.xp6(3),e.Q6J("decimal",!0)("ngClass",e.VKq(31,Ux,t.controls.scoreQuestion.errors||t.controls.scoreQuestion.value>=10&&t.controls.examPartType.value===a.offlineAnswerType.essay)),e.xp6(3),e.hij("",e.lcZ(27,27,"lang_testbank_points_per_question")+": "," "),e.xp6(2),e.Q6J("ngIf",t.controls.totalQuestion.errors||t.controls.scoreQuestion.errors)("ngIfElse",i),e.xp6(3),e.Q6J("ngIf",a.type===a.typeScreenCreateOfflineExam.create||a.type===a.typeScreenCreateOfflineExam.excel||!a.examCodeGroup.controls.isUpdate.value),e.xp6(2),e.Q6J("ngIf",t.controls.examPartType.value===a.offlineAnswerType.multipleChoice),e.xp6(1),e.Q6J("ngIf",t.controls.examPartType.value===a.offlineAnswerType.essay),e.xp6(1),e.Q6J("ngIf",t.controls.examPartType.value===a.offlineAnswerType.fill),e.xp6(1),e.Q6J("ngIf",t.controls.examPartType.value===a.offlineAnswerType.trueFalse)}}function BS(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"button",63),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw(3);return e.KtG(s.addOfflineExamPart(s.examCodeGroup.controls.offlineExamPart.controls.length-1,r.id))}),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()}if(2&n){const t=o.$implicit,i=e.oxw(3);e.xp6(1),e.Q6J("disabled",i.examCodeGroup.controls.examPartTypeExists.value.includes(t.id.toString())),e.xp6(1),e.hij(" ",e.lcZ(3,2,t.key)," ")}}function PS(n,o){if(1&n&&(e.TgZ(0,"div",56)(1,"button",57)(2,"div",58),e._UZ(3,"lucide-icon",59),e.qZA(),e._uU(4),e.ALo(5,"mytranslate"),e.qZA(),e.TgZ(6,"mat-menu",null,60)(8,"div",61)(9,"ul",62),e.YNc(10,BS,4,4,"li",37),e.qZA()()()()),2&n){const t=e.MAs(7),i=e.oxw(2);e.xp6(1),e.Q6J("matMenuTriggerFor",t)("disabled",4===i.examCodeGroup.controls.offlineExamPart.controls.length),e.xp6(3),e.hij(" ",e.lcZ(5,4,"lang_testbank_add_section")," "),e.xp6(6),e.Q6J("ngForOf",i.offlineExamPartService.examPartTypeList)}}function QS(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"form",1)(2,"div",2)(3,"form",1)(4,"div",3),e.YNc(5,LS,37,33,"div",4),e.YNc(6,PS,11,6,"div",5),e.qZA()()()(),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.form),e.xp6(2),e.Q6J("formGroup",t.examCodeGroup),e.xp6(2),e.Q6J("ngForOf",t.examCodeGroup.controls.offlineExamPart.controls),e.xp6(1),e.Q6J("ngIf",t.type===t.typeScreenCreateOfflineExam.create||t.type===t.typeScreenCreateOfflineExam.excel)}}let FS=(()=>{class n extends xe.Q{chooseAnswerQuestion(t,i,a){t.controls.answerList.controls[i].controls.answer.setValue(a),this.getEmptyAnswerExamCode(t),this.setInfoFinalExamCode()}chooseAnswerTrueFalse(t,i,a,r){const s=t.controls.answerList.controls[i];let l=s.controls.answer.value.split("");l[a]||(l=["U","U","U","U"]),l[a]=r;const c=l.join("");s.controls.answer.setValue(c),this.setInfoFinalExamCode(),this.getEmptyAnswerExamCode(t)}changeAnswerFill(t,i){this.getEmptyAnswerExamCode(t),this.setInfoFinalExamCode()}changeTotalQuestionInExamPart(t,i){const a=Number(t.controls.totalQuestion.value);if(!a)return this.showErrorSnack("lang_core_total_too_small");if(a>this.offlineExamPartService.maxQuestion)return this.showErrorSnack("lang_core_exam_exceed_max_questions");const r=Number(t.controls.scoreQuestion.value),s=t.controls.examPartType.value;t.controls.colTotalItem.patchValue(Math.ceil(a/this.offlineExamPartService.colAnswerList)),t.setControl("answerList",this.offlineExamPartService.createAnswerListByType(s,a,r)),this.infoCodeExamLast&&(t.controls.answerList.controls.forEach((l,c)=>{l.controls.answer.patchValue((s===this.offlineAnswerType.essay?this.offlineExamPartService.essayAnswer:this.infoCodeExamLast?.offlineExamPart?.[i].answerList?.[c]?.answer)??"")}),this.updateStartIndexLabelExamPart(),this.getEmptyAnswerExamCode(t))}changeScoreQuestionInExamPart(t){if(t.controls.scoreQuestion.errors)return this.showErrorSnack("lang_testbank_please_enter_score_greater_than_0");if(t.controls.scoreQuestion.value>=10&&t.controls.examPartType.value===this.offlineAnswerType.essay)return this.showErrorSnack("lang_core_vui_long_nhap_diem_tu_luan_nho_hon_10");let i=Number(t.controls.scoreQuestion.value)/Number(t.controls.totalQuestion.value);i=this.commonService.parseNumberFixed(i,this.offlineExamPartService.toFixTotalPoint),t.controls.answerList.controls.map(a=>a.controls.point.patchValue(i,{emitEvent:!1})),this.setInfoFinalExamCode()}changeExamPartType(t,i){t.patchValue({answerList:t.controls.answerList.value.map(a=>({answerType:i,answer:this.offlineExamPartService.getDefaultValueAnswerByPartType(i)}))}),this.setInfoFinalExamCode()}removeOfflineExamPart(t){this.examCodeGroup.controls.offlineExamPart.removeAt(t),this.examCodeGroup.controls.examPartTypeExists.setValue(this.offlineExamPartService.getAllExamPartTypeInExamCode(this.examCodeGroup.controls.offlineExamPart)),this.updateStartIndexLabelExamPart(),this.setInfoFinalExamCode()}addOfflineExamPart(t,i){this.examCodeGroup.controls.offlineExamPart.push(this.offlineExamPartService.createExamPart(i,8,8,this.examCodeGroup.controls.offlineExamPart.controls[t].controls.totalQuestion.value??0)),this.examCodeGroup.controls.examPartTypeExists.setValue(this.offlineExamPartService.getAllExamPartTypeInExamCode(this.examCodeGroup.controls.offlineExamPart)),this.sortExamPart(),this.updateStartIndexLabelExamPart(),this.getEmptyAnswerExamCode(this.examCodeGroup.controls.offlineExamPart.controls[t]),this.setInfoFinalExamCode()}setInfoFinalExamCode(){this.infoCodeExamLast=this.examCodeGroup.getRawValue(),this.sendInfoFinalExamCode.emit(this.infoCodeExamLast)}updateStartIndexLabelExamPart(){this.examCodeGroup.controls.offlineExamPart.controls.forEach((t,i)=>{const a=this.examCodeGroup.controls.offlineExamPart.controls[i-1]?Number(this.examCodeGroup.controls.offlineExamPart.controls[i-1].controls.startLabelIndex.value)+Number(this.examCodeGroup.controls.offlineExamPart.controls[i-1].controls.totalQuestion.value):0;t.controls.startLabelIndex.setValue(a)})}getEmptyAnswerExamCode(t){let a=[];if(t.controls.answerList.controls.forEach((r,s)=>{if(""===r.controls.answer.value||r.controls.answer.value.includes("U")||r.controls.answer.errors){const l=this.form.controls.isResetLabelQuestionPart.value?s+1:s+1+Number(t.controls.startLabelIndex.value);a.push(l)}}),0===a.length)t.controls.emptyAnswer.setValue(this.typeEmptyAnswer.success);else{let r=a.join(", ");t.controls.emptyAnswer.setValue(r)}}disableControlInExamPart(t){t.controls.totalQuestion.disable(),t.controls.examPartType.disable()}getIndexByExamPartType(t){return{[this.offlineAnswerType.multipleChoice]:0,[this.offlineAnswerType.trueFalse]:1,[this.offlineAnswerType.fill]:2,[this.offlineAnswerType.essay]:3}[t]||0}sortExamPart(){const t=this.examCodeGroup.controls.offlineExamPart;t.setValue(t.getRawValue().sort((i,a)=>this.getIndexByExamPartType(i.examPartType)-this.getIndexByExamPartType(a.examPartType)))}constructor(t){super(),this.offlineExamPartService=t,this.type=Sa.create,this.sendInfoFinalExamCode=new e.vpe,this.examPartTypeList=[],this.offlineAnswerType=XA.X,this.typeEmptyAnswer=Dg,this.typeScreenCreateOfflineExam=Sa}ngOnInit(){super.ngOnInit(),this.updateStartIndexLabelExamPart(),this.examCodeGroup.controls.offlineExamPart.controls.forEach(t=>{this.getEmptyAnswerExamCode(t),(this.type===this.typeScreenCreateOfflineExam.updateExam||this.type===this.typeScreenCreateOfflineExam.updateExamCode)&&this.examCodeGroup.controls.isUpdate.value&&this.disableControlInExamPart(t)}),this.setInfoFinalExamCode()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(fm))},n.\u0275cmp=e.Xpm({type:n,selectors:[["offline-exam-part"]],inputs:{form:"form",examCodeGroup:"examCodeGroup",type:"type"},outputs:{sendInfoFinalExamCode:"sendInfoFinalExamCode"},features:[e._Bn([fm]),e.qOj],decls:1,vars:1,consts:[[4,"ngIf"],[3,"formGroup"],["formArrayName","examCodeList"],["formArrayName","offlineExamPart"],["class","p-3",4,"ngFor","ngForOf"],["class","p-3 mt-5",4,"ngIf"],[1,"p-3"],[1,"box","p-3","border","border-slate-200","dark:border-darkmode-400","flex","flex-col","md:flex-row","md:items-center"],[1,"flex","items-center","mr-5"],[1,"font-medium"],[1,"ml-1"],[1,"font-medium",2,"text-transform","lowercase"],[1,"flex","items-center","mr-5","mt-3","md:mt-0"],[1,"ml-2"],["type","text","appOnlyNumber","","formControlName","totalQuestion",1,"form-control","form-control-sm",2,"width","4rem","text-align","center",3,"max","ngClass","selectionChange","input"],["type","text","formControlName","scoreQuestion","appOnlyNumber","",1,"form-control","form-control-sm",2,"width","4rem","text-align","center",3,"decimal","ngClass","input"],[1,"flex","items-center","mt-5","md:mt-0"],[1,"font-medium","mr-2"],["class","w-4 h-4",4,"ngIf","ngIfElse"],["noErrors",""],["class","ml-auto",4,"ngIf"],[1,"mt-3","mb-6"],["class","grid grid-cols-12",4,"ngIf"],["class","grid grid-cols-12 gap-5",4,"ngIf"],["class","grid grid-cols-10 gap-5",4,"ngIf"],[1,"w-4","h-4"],[1,"ml-auto"],[1,"btn","btn-outline-danger","btn-transparent",3,"disabled","click"],["name","x"],[1,"grid","grid-cols-12"],["class","col-span-12 lg:col-span-3","formArrayName","answerList",4,"ngFor","ngForOf"],["formArrayName","answerList",1,"col-span-12","lg:col-span-3"],["class","app-item mt-2",4,"ngFor","ngForOf"],[1,"app-item","mt-2"],[1,"answer-item","flex","items-center","mb-6","mt-1",3,"formGroup"],[1,"flex","items-center"],[1,"block-title","font-medium","w-6","mr-2"],[4,"ngFor","ngForOf"],["azt-track-service","create-manual-offline-exam-zhsV08DEqon",1,"btn","rounded-full","mr-2",2,"height","35px","line-height","35px","font-weight","400",3,"ngClass","click"],[1,"grid","grid-cols-12","gap-5"],["class","col-span-6 md:col-span-3 lg:col-span-2",4,"ngFor","ngForOf"],[1,"col-span-6","md:col-span-3","lg:col-span-2"],[1,"answer-item",3,"formGroup"],[1,"flex","items-center","mb-2"],[1,"block-title","font-medium","mr-2"],[1,"btn","rounded-md","mr-2","btn-outline-primary",2,"height","35px","line-height","35px","font-weight","400","width","100px"],["type","text","appOnlyNumber","","formControlName","answer","placeholder","...",1,"form-control","form-control-sm","text-center",2,"height","35px","width","100px",3,"decimal","decimalSeparator","maxLength","allowNegatives","ngClass","input"],[1,"grid","grid-cols-10","gap-5"],["class","col-span-12 sm:col-span-5 lg:col-span-2",4,"ngFor","ngForOf"],[1,"col-span-12","sm:col-span-5","lg:col-span-2"],[1,"mt-0"],["class","flex items-center mt-3",4,"ngFor","ngForOf"],[1,"flex","items-center","mt-3"],[1,"font-medium","mr-3"],[1,"btn","rounded-md","mr-3",2,"height","35px","line-height","35px","width","50px","font-weight","400",3,"ngClass","click"],[1,"btn","rounded-md",2,"height","35px","line-height","35px","width","50px","font-weight","400",3,"ngClass","click"],[1,"p-3","mt-5"],[1,"btn","btn-sm","btn-primary-soft",3,"matMenuTriggerFor","disabled"],[1,"w-4","h-4","mr-2"],["name","plus"],["menuAddExamPart","matMenu"],[1,"dropdown-menu","show","relative","w-64"],[1,"dropdown-content"],[1,"dropdown-item","font-medium","cursor-pointer","w-full",3,"disabled","click"]],template:function(t,i){1&t&&e.YNc(0,QS,7,4,"ng-container",0),2&t&&e.Q6J("ngIf",i.examCodeGroup)},dependencies:[F.mk,F.sg,F.O5,Qi.VK,Qi.p6,h._Y,h.Fj,h.JJ,h.JL,h.sg,h.u,h.CE,Dt.Y,wt.M,wi.n,_.Nh5,ye.JV,_S,fS],encapsulation:2}),n})();function NS(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"azt_lang_sugg_type_multiple_choice")+": "," "))}function ZS(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_testbank_true_false_quiz")+": "," "))}function DS(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_testbank_fill_number")+": "," "))}function US(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"azt_lang_sugg_type_essay")+": "," "))}function jS(n,o){1&n&&(e.TgZ(0,"div",9),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_core_vui_long_nhap_dau_du_dap_an_cau_hoi")," "))}function qS(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.ALo(3,"mytranslate"),e.qZA()),2&n){const t=e.oxw(3).$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_core_nhap_thieu_dap_an_tu_cau")+" "+t.emptyAnswer.split(", ")[0]+" "+e.lcZ(3,3,"lang_core_den_cau")+" "+t.emptyAnswer.split(", ")[t.emptyAnswer.split(", ").length-1]," ")}}function RS(n,o){if(1&n&&(e._uU(0),e.ALo(1,"mytranslate")),2&n){const t=e.oxw(3).$implicit;e.hij(" ",e.lcZ(1,1,"lang_core_nhung_cau_chua_nhap_dap_an")+": "+t.emptyAnswer," ")}}function zS(n,o){if(1&n&&(e.TgZ(0,"div",9),e.YNc(1,qS,4,5,"span",10),e.YNc(2,RS,2,3,"ng-template",null,11,e.W1O),e.qZA()),2&n){const t=e.MAs(3),i=e.oxw(2).$implicit;e.xp6(1),e.Q6J("ngIf",i.emptyAnswer.split(", ").length>10)("ngIfElse",t)}}function HS(n,o){if(1&n&&(e.TgZ(0,"div",5)(1,"div",6),e._uU(2),e.ALo(3,"mytranslate"),e.YNc(4,NS,3,3,"span",7),e.YNc(5,ZS,3,3,"span",7),e.YNc(6,DS,3,3,"span",7),e.YNc(7,US,3,3,"span",7),e.qZA(),e.YNc(8,jS,3,3,"div",8),e.YNc(9,zS,4,2,"div",8),e.qZA()),2&n){const t=e.oxw().$implicit,i=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,7,"azt_lang_sugg_part_cc")+" "," "),e.xp6(2),e.Q6J("ngIf",t.examPartType===i.offlineAnswerType.multipleChoice),e.xp6(1),e.Q6J("ngIf",t.examPartType===i.offlineAnswerType.trueFalse),e.xp6(1),e.Q6J("ngIf",t.examPartType===i.offlineAnswerType.fill),e.xp6(1),e.Q6J("ngIf",t.examPartType===i.offlineAnswerType.essay),e.xp6(1),e.Q6J("ngIf",t.emptyAnswer===i.typeEmptyAnswer.emptyAll),e.xp6(1),e.Q6J("ngIf",t.emptyAnswer&&t.emptyAnswer!==i.typeEmptyAnswer.emptyAll&&t.emptyAnswer!==i.typeEmptyAnswer.success)}}function JS(n,o){if(1&n&&(e.ynx(0),e.YNc(1,HS,10,9,"div",4),e.BQk()),2&n){const t=o.$implicit,i=e.oxw();e.xp6(1),e.Q6J("ngIf",t.emptyAnswer!==i.typeEmptyAnswer.init&&t.emptyAnswer!==i.typeEmptyAnswer.success)}}let KS=(()=>{class n extends xe.Q{constructor(){super(...arguments),this.offlineAnswerType=XA.X,this.typeEmptyAnswer=Dg}}return n.\u0275fac=function(){let o;return function(i){return(o||(o=e.n5z(n)))(i||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["error-exam-code"]],inputs:{form:"form",examCodeGroup:"examCodeGroup"},features:[e.qOj],decls:5,vars:3,consts:[[3,"formGroup"],["formArrayName","examCodeList"],[1,"error-exam-code"],[4,"ngFor","ngForOf"],["class","flex items-center mt-2",4,"ngIf"],[1,"flex","items-center","mt-2"],[1,"font-medium","text-xs","mr-2"],[4,"ngIf"],["class","text-xs font-medium text-danger",4,"ngIf"],[1,"text-xs","font-medium","text-danger"],[4,"ngIf","ngIfElse"],["showIndexQuestion",""]],template:function(t,i){1&t&&(e.TgZ(0,"form",0)(1,"div",1)(2,"form",0)(3,"div",2),e.YNc(4,JS,2,1,"ng-container",3),e.qZA()()()()),2&t&&(e.Q6J("formGroup",i.form),e.xp6(2),e.Q6J("formGroup",i.examCodeGroup),e.xp6(2),e.Q6J("ngForOf",i.examCodeGroup.controls.offlineExamPart.getRawValue()))},dependencies:[F.sg,F.O5,h._Y,h.JL,h.sg,h.CE,ye.JV],encapsulation:2}),n})();function GS(n,o){1&n&&(e.TgZ(0,"div",29)(1,"span"),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&n&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"lang_auto_vui_long_nhap_ten_de_thi")))}function YS(n,o){1&n&&(e.ynx(0),e.TgZ(1,"div",30)(2,"span",31),e._UZ(3,"azt-loading-ui"),e.qZA()(),e.BQk())}function $S(n,o){if(1&n&&(e.TgZ(0,"div",32),e._UZ(1,"config-level-subject",33),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("form",t.form)("schoolLevelObjs",t.schoolLevelObjs)}}function VS(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",32)(1,"config-score-scale-true-false-question",34),e.NdJ("errorConfigScoreScaleTrueFalse",function(a){e.CHM(t);const r=e.oxw(2);return e.KtG(r.setErrorConfigScoreScaleTrueFalse(a))}),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("form",t.form)("markDetails",t.markDetails)}}const WS=function(n){return{"text-danger":n}};function XS(n,o){if(1&n&&(e.TgZ(0,"span",38),e.ALo(1,"numberFloat"),e._uU(2),e.ALo(3,"formatOfflineExamHashIdToNumber"),e.ALo(4,"mytranslate"),e.qZA()),2&n){const t=e.oxw(),i=t.$implicit,a=t.index,r=e.oxw(2);e.Q6J("ngClass",e.VKq(8,WS,(i.invalid||i.controls.checkDuplicateError.value&&null!=i.controls.examCode.value&&r.codeExamDuplicateList.includes(e.lcZ(1,2,i.controls.examCode.value.toString())))&&r.selected.value!==a)),e.xp6(2),e.hij(" ",null!=i.controls.examCode.value?e.lcZ(3,4,i.controls.examCode.value):e.lcZ(4,6,"lang_core_chua_nhap_ma_de")," ")}}function eE(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"input",52),e.NdJ("input",function(){e.CHM(t);const a=e.oxw(2).$implicit,r=e.oxw(2);return e.KtG(r.checkDuplicateCode(a))}),e.ALo(1,"mytranslate"),e.qZA()}2&n&&(e.s9C("placeholder",e.lcZ(1,2,"lang_auto_nhap_ma_de")+"..."),e.Q6J("maxlength",3))}function tE(n,o){if(1&n&&(e.TgZ(0,"span",53),e._uU(1),e.ALo(2,"formatOfflineExamHashIdToNumber"),e.qZA()),2&n){const t=e.oxw(2).$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.controls.examCode.value)," ")}}function nE(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_vui_long_nhap_ma_de")," "))}function iE(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.ALo(3,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.AsE(" ",e.lcZ(2,2,"lang_auto_ma_de_phai_la_so_tu_1"),"",e.lcZ(3,4,"lang_auto_-999_va_toi_da_3_ky_tu")," "))}function oE(n,o){if(1&n&&(e.TgZ(0,"div",29),e.YNc(1,nE,3,3,"span",54),e.YNc(2,iE,4,6,"span",54),e.qZA()),2&n){const t=e.oxw(2).$implicit;e.xp6(1),e.Q6J("ngIf",t.controls.examCode.errors.required),e.xp6(1),e.Q6J("ngIf",t.controls.examCode.errors.min||t.controls.examCode.errors.max||t.controls.examCode.errors.maxlength)}}function aE(n,o){1&n&&(e.TgZ(0,"div",29)(1,"span"),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"lang_auto_vui_long_khong_nhap_trung_ma_de")," "))}function rE(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",45)(1,"button",55),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2).index,r=e.oxw(2);return e.KtG(r.removeItemCodeExam(a))}),e.TgZ(2,"span",24),e._UZ(3,"lucide-icon",56),e.qZA()()()}if(2&n){const t=e.oxw(2).index,i=e.oxw(2);e.xp6(1),e.Q6J("disabled",0===t&&1===i.form.controls.examCodeList.controls.length)}}function sE(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",39)(1,"div",40),e._UZ(2,"error-exam-code",41),e.qZA(),e.TgZ(3,"div",42)(4,"div",43)(5,"div",44)(6,"h3",45)(7,"span",46),e._uU(8),e.ALo(9,"mytranslate"),e.qZA(),e.YNc(10,eE,2,4,"input",47),e.YNc(11,tE,3,3,"ng-template",null,48,e.W1O),e.qZA(),e.YNc(13,oE,3,2,"div",12),e.YNc(14,aE,4,3,"div",12),e.ALo(15,"numberFloat"),e.qZA(),e.YNc(16,rE,4,1,"div",49),e.qZA(),e.TgZ(17,"div",50)(18,"offline-exam-part",51),e.NdJ("sendInfoFinalExamCode",function(a){e.CHM(t);const r=e.oxw(3);return e.KtG(r.setInfoFinalExamCode(a))}),e.qZA()()()()}if(2&n){const t=e.MAs(12),i=e.oxw().$implicit,a=e.oxw(2);e.Q6J("formGroup",i),e.xp6(2),e.Q6J("form",a.form)("examCodeGroup",i),e.xp6(6),e.hij(" ",e.lcZ(9,12,"lang_auto_ma_de")," "),e.xp6(2),e.Q6J("ngIf",a.type===a.typeScreenCreateOfflineExam.create||a.type===a.typeScreenCreateOfflineExam.excel||!i.controls.isUpdate.value)("ngIfElse",t),e.xp6(3),e.Q6J("ngIf",i.controls.examCode.errors&&(i.controls.examCode.touched||i.controls.examCode.dirty)),e.xp6(1),e.Q6J("ngIf",i.controls.checkDuplicateError.value&&null!=i.controls.examCode.value&&a.codeExamDuplicateList.includes(e.lcZ(15,14,i.controls.examCode.value.toString()))),e.xp6(2),e.Q6J("ngIf",a.type===a.typeScreenCreateOfflineExam.create||a.type===a.typeScreenCreateOfflineExam.excel||!i.controls.isUpdate.value),e.xp6(2),e.Q6J("form",a.form)("examCodeGroup",i)("type",a.type)}}function lE(n,o){if(1&n&&(e.TgZ(0,"mat-tab",35),e.YNc(1,XS,5,10,"ng-template",36),e.YNc(2,sE,19,16,"div",37),e.qZA()),2&n){const t=o.index,i=e.oxw(2);e.xp6(2),e.Q6J("ngIf",i.selected.value===t)}}function cE(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",7)(2,"div",8)(3,"div",9)(4,"label",10),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()(),e.TgZ(7,"div",9),e._UZ(8,"input",11),e.ALo(9,"mytranslate"),e.YNc(10,GS,4,3,"div",12),e.qZA()(),e.YNc(11,YS,4,0,"ng-container",2),e.YNc(12,$S,2,2,"ng-template",null,13,e.W1O),e.YNc(14,VS,2,2,"div",14),e.TgZ(15,"div",15)(16,"div",16),e._UZ(17,"input",17),e.qZA(),e.TgZ(18,"label",18),e._uU(19),e.ALo(20,"mytranslate"),e.qZA()(),e.TgZ(21,"div",15)(22,"button",19),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.openQuickScoreDialog())}),e._uU(23),e.ALo(24,"mytranslate"),e.qZA()(),e.TgZ(25,"div",20)(26,"div",21),e._uU(27),e.ALo(28,"mytranslate"),e.qZA(),e.TgZ(29,"div",22)(30,"button",23),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.addItemExamCode())}),e.TgZ(31,"span",24),e._UZ(32,"lucide-icon",25),e.qZA(),e.TgZ(33,"span",26),e._uU(34),e.ALo(35,"mytranslate"),e.qZA()()()(),e.TgZ(36,"mat-tab-group",27),e.NdJ("selectedIndexChange",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.selected.setValue(a))}),e.YNc(37,lE,3,1,"mat-tab",28),e.qZA()(),e.BQk()}if(2&n){const t=e.MAs(13),i=e.oxw();e.xp6(5),e.hij(" ",e.lcZ(6,12,"lang_auto_ten_de")," "),e.xp6(3),e.s9C("placeholder",e.lcZ(9,14,"lang_auto_nhap_ten_de")+" ..."),e.xp6(2),e.Q6J("ngIf",i.form.controls.examName.errors&&(i.form.controls.examName.dirty||i.form.controls.examName.touched)),e.xp6(1),e.Q6J("ngIf",i.loadingSubjectLevel)("ngIfElse",t),e.xp6(3),e.Q6J("ngIf",i.markDetails&&i.markDetails.length&&i.isExistTrueFalseQuestion),e.xp6(5),e.hij(" ",e.lcZ(20,16,"lang_testbank_sections_starting_from_question_1")," "),e.xp6(4),e.hij(" ",e.lcZ(24,18,"lang_testbank_quick_score_distribution")," "),e.xp6(4),e.hij(" ",e.lcZ(28,20,"lang_core_danh_sach_ma_de")," "),e.xp6(7),e.Oqu(e.lcZ(35,22,"lang_auto_them_ma_de")),e.xp6(2),e.Q6J("selectedIndex",i.selected.value),e.xp6(1),e.Q6J("ngForOf",i.form.controls.examCodeList.controls)}}function uE(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div",58)(2,"h3",45)(3,"span",46),e._uU(4),e.ALo(5,"mytranslate"),e.qZA(),e.TgZ(6,"span",53),e._uU(7),e.ALo(8,"formatOfflineExamHashIdToNumber"),e.qZA()()(),e.TgZ(9,"div",58)(10,"div",50)(11,"offline-exam-part",51),e.NdJ("sendInfoFinalExamCode",function(a){e.CHM(t);const r=e.oxw(2);return e.KtG(r.setInfoFinalExamCode(a))}),e.qZA()()()()}if(2&n){const t=o.$implicit,i=e.oxw(2);e.xp6(4),e.hij(" ",e.lcZ(5,5,"lang_auto_ma_de")," "),e.xp6(3),e.hij(" ",e.lcZ(8,7,t.controls.examCode.value)," "),e.xp6(4),e.Q6J("form",i.form)("examCodeGroup",t)("type",i.type)}}function dE(n,o){if(1&n&&e.YNc(0,uE,12,9,"div",57),2&n){const t=e.oxw();e.Q6J("ngForOf",t.form.controls.examCodeList.controls)}}const mE=function(n,o){return{"mt-3":n,"mt-10":o}};let e_=(()=>{class n extends xe.Q{setInfoFinalExamCode(t){this.infoFinalExamCode=t}checkDuplicateCode(t){let a=this.form.controls.examCodeList.controls.map(s=>Number(s.controls.examCode.value)?Number(s.controls.examCode.value):void 0);a=a.filter(s=>void 0!==s);let r=a.some((s,l)=>a.indexOf(s)!=l);this.codeExamDuplicateList=a.filter((s,l)=>a.indexOf(s)!==l),t.controls.checkDuplicateError.setValue(r)}addItemExamCode(){const t=this.form.controls.examCodeList;t.push(this.createItemCodeExam());const r=t.controls[t.controls.length-1];this.infoFinalExamCode?.offlineExamPart?.length&&(this.infoFinalExamCode.offlineExamPart.forEach(s=>{r.controls.offlineExamPart.push(this.offlineExamPartService.createExamPart(s.examPartType??this.offlineAnswerType.multipleChoice,s.totalQuestion??10,s.scoreQuestion??10,s.startLabelIndex??0))}),this.selected.setValue(t.controls.length-1))}resetCreateExam(){let t=Number(this.commonService.getMyParam(this.activeRoute,"cat_id"))??0;this.confirmDialog("lang_auto_msg_close_confirm_dialog_title","lang_auto_msg_close_confirm_dialog_desc","480px",()=>{const i=this.commonService.getMyQueryParam("backto")??`/admin/testbank/create-new-document/${t}`;this.myNavigation(i)})}removeItemCodeExam(t){const i=this.form.controls.examCodeList;let a=i.controls[t],r=`${this.commonService.myTranslateInstant("lang_auto_ban_co_chac_chan_muon_so_ma_de")} <b>${a.controls.examCode.value??""}</b>`;this.sAztDialogService.open(nS.s,{data:{content:r},restoreFocus:!1,width:"500px"}).afterClosed().subscribe(l=>{l&&(i.removeAt(t),this.oldAnswerList.splice(t,1),this.showSuccessSnack("lang_auto_xoa_ma_de_thanh_cong"))})}confirmDialog(t,i,a,r){this.sAztDialogService.open(Lg,{width:a,data:{title:t,msg:i},restoreFocus:!1}).afterClosed().subscribe(l=>{l&&r()})}handleSaveQuestionAndExam(){if(this.form.invalid||this.errorConfigScoreScaleTrueFalse){let i=this.commonService.myTranslateInstant("lang_auto_vui_long_nhap_day_du_thong_tin")+" "+this.commonService.myTranslateInstant("lang_azt_in_code")+" ",a=0;return this.form.controls.examCodeList.controls.forEach((r,s)=>{r.invalid&&r.controls.examCode.value&&(i+=(a>0?", ":"")+r.controls.examCode.value,a++)}),this.showErrorSnack(i),void this.form.markAllAsTouched()}let t=this.processDataQuestion();this.handleSaveData.emit(t)}openQuickScoreDialog(){if(this.type===Sa.create){let i=new h.Oe([]);this.form.controls.examCodeList.controls.forEach(a=>{i.controls.length<a.controls.offlineExamPart.controls.length&&(i=a.controls.offlineExamPart)}),this.setDefaultQuickScore(i)}this.sAztDialogService.open(hS,{width:"500px",data:this.quickScore}).afterClosed().subscribe(i=>{i&&(this.quickScore={...i},this.fillScoreExamPart(this.quickScore))})}setErrorConfigScoreScaleTrueFalse(t){this.errorConfigScoreScaleTrueFalse=t}fillScoreExamPart(t){this.form.controls.examCodeList.controls.forEach(i=>{i.controls.offlineExamPart.controls.forEach(a=>{switch(a.controls.examPartType.value){case this.offlineAnswerType.multipleChoice:a.controls.scoreQuestion.setValue(t.scoreMultipleChoice);break;case this.offlineAnswerType.trueFalse:a.controls.scoreQuestion.setValue(t.scoreTrueFalse);break;case this.offlineAnswerType.fill:a.controls.scoreQuestion.setValue(t.scoreFill);break;case this.offlineAnswerType.essay:a.controls.scoreQuestion.setValue(t.scoreEssay)}let r=Number(a.controls.scoreQuestion.value)/Number(a.controls.totalQuestion.value);r=this.commonService.parseNumberFixed(r,this.offlineExamPartService.toFixTotalPoint),a.controls.answerList.controls.forEach(s=>{s.controls.point.setValue(r,{emitEvent:!1})})})})}initCodeExam(){const t=this.form.controls.examCodeList;t.push(this.createItemCodeExam()),t.controls[0].controls.offlineExamPart.push(this.offlineExamPartService.createExamPart(this.offlineAnswerType.multipleChoice,8,8,0)),this.selected.setValue(0),this.form.updateValueAndValidity()}createItemCodeExam(){return new h.cw({examCode:new h.NI(void 0,{nonNullable:!0,validators:[h.kI.required,h.kI.min(1),h.kI.max(999),h.kI.maxLength(3),Da._.noWhiteSpace]}),examPartTypeExists:new h.NI(`${this.offlineAnswerType.multipleChoice}`,{nonNullable:!0}),checkDuplicateError:new h.NI(!1,{nonNullable:!0}),offlineExamPart:new h.Oe([]),isUpdate:new h.NI(!1,{nonNullable:!0})})}processDataQuestion(){return this.form.controls.examCodeList.controls.map(i=>{const a=[],r=[];return i.controls.offlineExamPart.controls.forEach(s=>{const l={answerType:Number(s.controls.examPartType.value),totalQuestion:Number(s.controls.totalQuestion.value),totalMark:Number(s.controls.scoreQuestion.value)};r.push(l),s.controls.answerList.controls.forEach(c=>{const u={answerType:c.controls.answerType.value,questionId:c?.controls?.questionId?.value,answer:this.offlineExamPartService.convertAnswerByType(c.controls.answerType.value,c.controls.answer.value),scorePerQuestion:Number(c.controls.point.value),isEssay:c.controls.answer.value===this.offlineExamPartService.essayAnswer};a.push(u)})}),{offlineMixQuestionHashId:Number(i.controls.examCode.value),offlineQuestionObjs:a,isUpdate:i?.controls?.isUpdate?.value,offlineMixQuestionId:i?.controls?.offlineMixQuestionId?.value,examPart:{parts:r}}})}processDataExamOffline(){if(!this.dataExamOffline)return;const t=this.form.controls.examCodeList;let i=new h.Oe([]);this.dataExamOffline.updateOfflineMixQuestionObjs.forEach((a,r)=>{const l=this.processDataExamPartCode(a.offlineQuestionObjs,r);i.controls.length<l.length&&(i=l),t.push(new h.cw({examCode:new h.NI(a.offlineMixQuestionHashId,{nonNullable:!0,validators:[h.kI.required,h.kI.min(1),h.kI.max(999),h.kI.maxLength(3)]}),examPartTypeExists:new h.NI(this.offlineExamPartService.getAllExamPartTypeInExamCode(l),{nonNullable:!0}),isUpdate:new h.NI(!0,{nonNullable:!0}),checkDuplicateError:new h.NI(!1,{nonNullable:!0}),offlineMixQuestionId:new h.NI(a.offlineMixQuestionId,{nonNullable:!0}),offlineExamPart:l}))}),this.setDefaultQuickScore(i)}processDataOfflineExamByExcel(){if(!this.form||!this.dataExamOfflineByExcel)return;const t=this.form.controls.examCodeList;let i=new h.Oe([]);this.dataExamOfflineByExcel.excelOfflineMixQuestionObjs.forEach((a,r)=>{const l=this.processDataExamPartCode(a.excelOfflineQuestionObjs,r);i.controls.length<l.length&&(i=l),t.push(new h.cw({examCode:new h.NI(a.offlineMixQuestionHashId,{nonNullable:!0,validators:[h.kI.required,h.kI.min(1),h.kI.max(999),h.kI.maxLength(3)]}),examPartTypeExists:new h.NI(this.offlineExamPartService.getAllExamPartTypeInExamCode(l),{nonNullable:!0}),checkDuplicateError:new h.NI(!1,{nonNullable:!0}),isUpdate:new h.NI(!1,{nonNullable:!0}),offlineExamPart:l}))}),this.setDefaultQuickScore(i)}updateExamPart(t,i,a,r,s){t.controls.answerList.push(this.offlineExamPartService.createItemAnswerWithValue(!1,i,a,r,s)),t.controls.totalQuestion.patchValue((t.controls.totalQuestion.value??0)+1,{emitEvent:!1}),t.controls.scoreQuestion.patchValue((t.controls.scoreQuestion.value??0)+a,{emitEvent:!1})}createFullExamPartCode(){return new h.Oe([this.offlineExamPartService.createExamPart(this.offlineAnswerType.multipleChoice,0,0,0),this.offlineExamPartService.createExamPart(this.offlineAnswerType.trueFalse,0,0,0),this.offlineExamPartService.createExamPart(this.offlineAnswerType.fill,0,0,0),this.offlineExamPartService.createExamPart(this.offlineAnswerType.essay,0,0,0)])}removeAndUpdateValueExamPart(t){for(let i=t.controls.length-1;i>=0;i--){const a=t.controls[i];a.controls.totalQuestion.value?(a.controls.scoreQuestion.patchValue(Number(a.controls.scoreQuestion.value.toFixed(2))),a.controls.colTotalItem.patchValue(Math.ceil(a.controls.totalQuestion.value/this.offlineExamPartService.colAnswerList)),t.controls[i+1]&&t.controls[i+1].controls.startLabelIndex.patchValue(a.controls.totalQuestion.value)):t.removeAt(i)}return t}processDataExamPartCode(t,i){let a=this.createFullExamPartCode();return t.forEach(r=>{switch(r.answerType){case this.offlineAnswerType.multipleChoice:this.updateExamPart(a.controls[0],r.answerType,r.scorePerQuestion,r.answer,r?.questionId);break;case this.offlineAnswerType.trueFalse:const s=this.type===Sa.excel||this.type===Sa.text?r.answer:this.offlineExamPartService.convertAnswerTrueFalse(r.answer);this.updateExamPart(a.controls[1],r.answerType,r.scorePerQuestion,s,r?.questionId);break;case this.offlineAnswerType.fill:this.updateExamPart(a.controls[2],r.answerType,r.scorePerQuestion,r.answer,r?.questionId);break;case this.offlineAnswerType.essay:this.updateExamPart(a.controls[3],r.answerType,r.scorePerQuestion,this.offlineExamPartService.essayAnswer,r?.questionId)}}),a=this.removeAndUpdateValueExamPart(a),a}getGradeAndSubjectObj(){this.loadingSubjectLevel=!0,this.waitDestroy(this.commonListService.apiCommonListSubjectAndLevelsGet(this.commonService.getBusinessDomainUrl()).subscribe(t=>{1==t.success?(this.schoolLevelObjs=t.data?.schoolLevelSubjectObjs??[],this.form.patchValue({schoolLevel:t.data?.examSchoolLogObj?.lastSchoolLevelId??null??0,schoolSubject:t.data?.examSchoolLogObj?.lastSchoolSubjectId??null??0}),this.successStatusObj()):this.errorStatusObj(t.message??""),this.loadingSubjectLevel=!1}))}setDefaultQuickScore(t){this.resetQuickScore(),t.controls.forEach(i=>{const r=i.controls.scoreQuestion.value,s=i.controls.totalQuestion.value;switch(i.controls.examPartType.value){case this.offlineAnswerType.multipleChoice:this.quickScore.scoreMultipleChoice=r,this.quickScore.totalMultipleChoice=s;break;case this.offlineAnswerType.trueFalse:this.quickScore.scoreTrueFalse=r,this.quickScore.totalTrueFalse=s;break;case this.offlineAnswerType.fill:this.quickScore.scoreFill=r,this.quickScore.totalFill=s;break;case this.offlineAnswerType.essay:this.quickScore.scoreEssay=r,this.quickScore.totalEssay=s}})}resetQuickScore(){this.quickScore={scoreMultipleChoice:0,totalMultipleChoice:0,scoreTrueFalse:0,totalTrueFalse:0,scoreFill:0,totalFill:0,scoreEssay:0,totalEssay:0}}checkExistTrueFalseQuestion(){this.isExistTrueFalseQuestion=this.type===Sa.create||this.type===Sa.excel||this.form.controls.examCodeList.controls.some(t=>t.controls.offlineExamPart.controls.some(i=>i.controls.examPartType.value===this.offlineAnswerType.trueFalse))}ngOnInit(){switch(super.ngOnInit(),this.getGradeAndSubjectObj(),this.type){case Sa.create:this.initCodeExam();break;case Sa.excel:case Sa.text:this.processDataOfflineExamByExcel();break;case Sa.updateExam:case Sa.updateExamCode:this.processDataExamOffline()}this.checkExistTrueFalseQuestion()}constructor(t,i,a,r){super(),this.sAztDialogService=t,this.activeRoute=i,this.commonListService=a,this.offlineExamPartService=r,this.markDetails=[],this.type=Sa.create,this.handleSaveData=new e.vpe,this.schoolLevelObjs=[],this.codeExamDuplicateList=[],this.oldAnswerList=[],this.typeScreenCreateOfflineExam=Sa,this.selected=new h.NI(0,{nonNullable:!0}),this.loadingSubjectLevel=!1,this.examPartTypeList=[],this.offlineAnswerType=XA.X,this.quickScore={scoreMultipleChoice:0,totalMultipleChoice:0,scoreTrueFalse:0,totalTrueFalse:0,scoreFill:0,totalFill:0,scoreEssay:0,totalEssay:0},this.errorConfigScoreScaleTrueFalse=!1,this.isExistTrueFalseQuestion=!1}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(qi.C),e.Y36(E.gz),e.Y36(ps.o7),e.Y36(fm))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ui-create-offline-exam"]],inputs:{form:"form",markDetails:"markDetails",type:"type",dataExamOffline:"dataExamOffline",dataExamOfflineByExcel:"dataExamOfflineByExcel"},outputs:{handleSaveData:"handleSaveData"},features:[e._Bn([fm]),e.qOj],decls:13,vars:15,consts:[[3,"formGroup"],[1,"box",3,"ngClass"],[4,"ngIf","ngIfElse"],["isUpdateExamCode",""],[1,"p-3","text-right"],["azt-track-service","create-manual-offline-exam-tlbe3XqUg",1,"btn","btn-secondary","w-24","mr-2",3,"click"],["azt-track-service","create-manual-offline-exam-VV_VzsR7QrJ",1,"btn","btn-primary","w-24",3,"click"],[1,"border-b","border-slate-200","dark:border-darkmode-400","p-4"],[1,"grid","grid-cols-12"],[1,"col-span-12"],["for","document-name",1,"form-label","mb-0","mt-2","flex","items-center","font-medium"],["id","document-name","formControlName","examName","type","text",1,"form-control",3,"placeholder"],["class","mt-2 text-xs font-medium text-danger",4,"ngIf"],["doneLoadingSubjectLevel",""],["class","mt-4",4,"ngIf"],[1,"mt-4","flex","items-center"],[1,"setting-input","form-switch","mr-3"],["type","checkbox","id","isResetLabelQuestionPart","formControlName","isResetLabelQuestionPart",1,"show-code","form-check-input"],["for","isResetLabelQuestionPart",1,"font-medium","flex","items-center"],[1,"btn","btn-primary-soft",3,"click"],[1,"mt-5","mb-3","flex","items-center"],[1,"font-medium","text-lg","mr-auto"],[1,"ml-2"],["azt-track-service","create-manual-offline-exam-5qKruBeS5Vi",1,"btn","btn-success","text-white",3,"click"],[1,"w-4","h-4","inline-block"],["name","plus"],[1,"text-white"],[3,"selectedIndex","selectedIndexChange"],["formArrayName","examCodeList","class","tab-title",4,"ngFor","ngForOf"],[1,"mt-2","text-xs","font-medium","text-danger"],[1,"mt-4","flex","items-center",2,"height","66px"],[1,"mx-auto","w-8","h-8"],[1,"mt-4"],[3,"form","schoolLevelObjs"],[3,"form","markDetails","errorConfigScoreScaleTrueFalse"],["formArrayName","examCodeList",1,"tab-title"],["mat-tab-label",""],["class","mt-3",3,"formGroup",4,"ngIf"],[3,"ngClass"],[1,"mt-3",3,"formGroup"],[1,"mt-2","mb-3"],[3,"form","examCodeGroup"],[1,"border","border-slate-200/60","dark:border-darkmode-400","rounded-md","pb-1"],[1,"p-3","bg-slate-100","dark:bg-darkmode-400","flex","items-center"],[1,"mr-auto"],[1,"flex","items-center"],[1,"font-medium"],["type","text","appOnlyNumber","","formControlName","examCode","class","form-control form-control-sm w-20 sm:ml-2","style","width: 7rem; text-align: center",3,"maxlength","placeholder","input",4,"ngIf","ngIfElse"],["isUpdate",""],["class","flex items-center",4,"ngIf"],[1,"offline-exam-part"],[3,"form","examCodeGroup","type","sendInfoFinalExamCode"],["type","text","appOnlyNumber","","formControlName","examCode",1,"form-control","form-control-sm","w-20","sm:ml-2",2,"width","7rem","text-align","center",3,"maxlength","placeholder","input"],[1,"font-medium","ml-2"],[4,"ngIf"],["azt-track-service","create-manual-offline-exam-ZLcxiYuHZw9",1,"btn","btn-sm","btn-outline-danger",3,"disabled","click"],["name","trash-2"],[4,"ngFor","ngForOf"],[1,"border-b","border-slate-200","dark:border-darkmode-400","p-3"]],template:function(t,i){if(1&t&&(e.TgZ(0,"form",0)(1,"div",1),e.YNc(2,cE,38,24,"ng-container",2),e.YNc(3,dE,1,1,"ng-template",null,3,e.W1O),e.TgZ(5,"div",4)(6,"button",5),e.NdJ("click",function(){return i.resetCreateExam()}),e._uU(7),e.ALo(8,"mytranslate"),e.qZA(),e.TgZ(9,"button",6),e.NdJ("click",function(){return i.handleSaveQuestionAndExam()}),e._uU(10),e.ALo(11,"mytranslate"),e.ALo(12,"mytranslate"),e.qZA()()()()),2&t){const a=e.MAs(4);e.Q6J("formGroup",i.form),e.xp6(1),e.Q6J("ngClass",e.WLB(12,mE,!i.isMobileWebView,i.isMobileWebView)),e.xp6(1),e.Q6J("ngIf",i.type!==i.typeScreenCreateOfflineExam.updateExamCode)("ngIfElse",a),e.xp6(5),e.hij(" ",e.lcZ(8,6,"lang_auto_huy")," "),e.xp6(3),e.hij(" ",i.type===i.typeScreenCreateOfflineExam.updateExam||i.type===i.typeScreenCreateOfflineExam.updateExamCode?e.lcZ(11,8,"lang_auto_cap_nhat"):e.lcZ(12,10,"lang_auto_luu")," ")}},dependencies:[F.mk,F.sg,F.O5,hu.uD,hu.uX,hu.SP,h._Y,h.Fj,h.Wl,h.JJ,h.JL,h.nD,h.sg,h.u,h.CE,Dt.Y,wt.M,wi.n,$p.Z,qv,_.Nh5,FS,KS,ye.JV,ye.N7,ye.Aw],encapsulation:2}),n})();function pE(n,o){if(1&n&&e._UZ(0,"azt-loading-effect",3),2&n){const t=e.oxw();e.Q6J("currentStatusObj",t.statusObj)}}function hE(n,o){if(1&n&&(e.TgZ(0,"p"),e._uU(1),e.ALo(2,"mytranslate"),e.TgZ(3,"b"),e._uU(4),e.qZA(),e._uU(5," - "),e.TgZ(6,"span"),e._uU(7),e.ALo(8,"mytranslate"),e.qZA()()),2&n){const t=o.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,3,"lang_auto_ma_de_loi"),": "),e.xp6(3),e.Oqu(t.rawOfflineMixQuestionHashId),e.xp6(3),e.Oqu(e.lcZ(8,5,t.error))}}function AE(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",8)(1,"div",9)(2,"div",10)(3,"p",11),e._uU(4),e.ALo(5,"mytranslate"),e.ALo(6,"mytranslate"),e.qZA(),e.TgZ(7,"div",12)(8,"button",13),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.showErrorBlock=!1)}),e.ALo(9,"mytranslate"),e.TgZ(10,"span",14),e._UZ(11,"lucide-icon",15),e.qZA()()()(),e.TgZ(12,"div",16),e.YNc(13,hE,9,7,"p",17),e.qZA()()()}if(2&n){const t=e.oxw(2);e.xp6(4),e.lnq("",e.lcZ(5,5,"lang_testbank_there_is")," ",t.excelErrorObjs.length," ",e.lcZ(6,7,"lang_testbank_error_in_the_excel_file"),""),e.xp6(4),e.s9C("matTooltip",e.lcZ(9,9,"lang_auto_dong")),e.xp6(5),e.Q6J("ngForOf",t.excelErrorObjs)}}function _E(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",4)(1,"h3",5),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.YNc(4,AE,14,11,"div",6),e.TgZ(5,"ui-create-offline-exam",7),e.NdJ("handleSaveData",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.handleSaveQuestionAndExam(a))}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,6,"lang_cms_create_exam_by_excel_title")," "),e.xp6(2),e.Q6J("ngIf",t.excelErrorObjs.length>0&&t.showErrorBlock),e.xp6(1),e.Q6J("form",t.form)("type",t.type)("markDetails",t.markDetails)("dataExamOfflineByExcel",t.dataExamOfflineExcel)}}let fE=(()=>{class n extends xe.Q{onFileSelected(t){this.file=t?t[0]:this.file,this.file&&["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel"].includes(this.file.type)?this.processFile():(this.showErrorSnack("lang_auto_vui_long_chon_dung_tep_tin_excel"),this.redirectService.redirectByUrl(this.commonService.getLocalRouter(this.backToLink)))}processFile(){this.initStatusObj();let t=Number(this.commonService.getMyParam(this.activeRoute,"cat_id"))??0;this.waitDestroy(this.offlineExamParserV2Service.apiOfflineExamParserV2ParserExcelV2PostForm(t,this.file).subscribe(i=>{1==i.success?(this.dataExamOfflineExcel.excelOfflineMixQuestionObjs=i.data?.excelOfflineMixQuestionObjs??[],this.dataExamOfflineExcel.orcLogId=i.data?.orcLogId??-1,this.excelErrorObjs=i.data?.errors??[],this.markDetails=i.data?.examTrueFalseQuestionMarkConfigObj?.markDetails??[],this.successStatusObj()):(this.errorStatusObj(i.message??"",!0),this.redirectService.redirectByUrl(this.commonService.getLocalRouter(this.backToLink)))}))}handleSaveQuestionAndExam(t){const a=this.configScoreScaleTrueFalseService.convertTrueFalseForm(this.form),r={resetQuestionIndex:!0,categoryId:this.categoryId,schoolLevelId:this.form.controls.schoolLevel.value,schoolSubjectId:this.form.controls.schoolSubject.value,name:this.form.controls.examName.value,orcLogId:-6,offlineMixQuestionObjs:t,examTrueFalseQuestionMarkConfigObj:a};this.initStatusObj(),this.waitDestroy(this.offlineExamCreatorV2Service.apiOfflineExamCreatorV2CreateExamObjPost(r).subscribe(s=>{if(s.success){this.showSuccessSnack("lang_auto_tao_de_thi_thanh_cong");const l=this.getMyQueryParam("classroomId"),c=this.getMyQueryParam("programId"),u=this.getMyQueryParam("sessionId"),m=this.getMyQueryParam("indexSession");if(!this.commonService.isNullUndefinedOrEmpty(m)&&!l)return this.programFormService.ExamExerciseOfProgramToSessionStorage(s.data?.obj?.id??0,s.data?.obj?.name??"","exam"),void(window.location.href=this.commonService.getLocalRouter(`/business/edit-educational-program/${c}?indexSession=${m}`));if(l)if(c&&u){const p=u.includes("?")?u.slice(0,u.indexOf("?")):u;this.saveDocumentTrainingCenter(Number(l),Number(c),Number(p),s.data?.obj)}else window.location.href=this.commonService.getLocalRouter(`/admin/testbank/config-exam-offline/${this.categoryId}/${s.data?.obj?.hashId}?classroomId=${l}`);else window.location.href=this.commonService.getLocalRouter(`/admin/testbank/config-exam-offline/${this.categoryId}/${s.data?.obj?.hashId}`)}else this.errorStatusObj(s.message??"")}))}saveDocumentTrainingCenter(t,i,a,r){this.classroomService.apiClassroomsClassroomIdSessionsSessionIdDocumentsPost(t,a,{name:r?.name,refId:r?.id,type:"exam"}).subscribe(l=>{l?window.location.href=this.commonService.getLocalRouter(`/admin/testbank/config-exam-offline/${this.categoryId}/${r?.hashId}?classroomId=${t}&programId=${i}&sessionId=${a}`):this.stopStatusObj()})}ngOnInit(){super.ngOnInit(),this.categoryId=Number(this.commonService.getMyParam(this.activeRoute,"cat_id"))??0;var t=this.commonService.getMyQueryParam("backto");this.backToLink=t??"/admin/testbank/create-new-document/"+(null!=this.categoryId?this.categoryId:0),this.commonService.translateMetaData({title:"lang_cms_create_exam_by_excel_title",description:"lang_cms_create_exam_by_excel_description",image:"lang_cms_test_image"});const i=this.editorOutputDataService.getFirstFile();i?this.onFileSelected([i]):this.redirectService.redirectByUrl(this.commonService.getLocalRouter(this.backToLink))}constructor(t,i,a,r,s,l,c,u){super(),this.editorOutputDataService=t,this.activeRoute=i,this.offlineExamParserV2Service=a,this.offlineExamCreatorV2Service=r,this.redirectService=s,this.classroomService=l,this.programFormService=c,this.configScoreScaleTrueFalseService=u,this.backToLink="",this.prevData="",this.categoryId=0,this.type=Sa.excel,this.excelErrorObjs=[],this.showErrorBlock=!0,this.dataExamOfflineExcel={name:"",schoolLevelId:1,schoolSubjectId:1,orcLogId:-1,offlineMixQuestionObjs:[],excelOfflineMixQuestionObjs:[],errors:[],resetQuestionIndex:!1},this.markDetails=[],this.form=new h.cw({examName:new h.NI("",{nonNullable:!0,validators:[h.kI.required,Da._.noWhiteSpace]}),isResetLabelQuestionPart:new h.NI(!0,{nonNullable:!0,validators:[h.kI.required]}),examCodeList:new h.Oe([]),schoolLevel:new h.NI(0,{nonNullable:!0,validators:[h.kI.required]}),schoolSubject:new h.NI(0,{nonNullable:!0,validators:[h.kI.required]}),trueFalseQuestionMarkConfig:new h.Oe([])})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Ar.O),e.Y36(E.gz),e.Y36(Za.Xe),e.Y36(Za.Jt),e.Y36(Lv.z),e.Y36(_r.um),e.Y36(qs.t),e.Y36(WA))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-create-by-excel"]],features:[e.qOj],decls:4,vars:3,consts:[[3,"headerBackToLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],["doneLoading",""],[3,"currentStatusObj"],[1,"mt-5","mx-auto",2,"max-width","1200px"],[1,"text-lg","font-medium"],["class","col-md-12 mb-4 mt-2",4,"ngIf"],[3,"form","type","markDetails","dataExamOfflineByExcel","handleSaveData"],[1,"col-md-12","mb-4","mt-2"],[1,"alert","alert-outline-danger","show","mb-2"],[1,"flex","items-center"],[1,"font-medium","text-lg"],[1,"ml-auto"],["azt-track-service","create-exam-by-excel-HGchE1J84tS",1,"btn-azt-secodary-icon",3,"matTooltip","click"],[1,"w-4","h-4","inline-block"],["name","x"],[1,"mt-3"],[4,"ngFor","ngForOf"]],template:function(t,i){if(1&t&&(e.TgZ(0,"teacher-layout",0),e.YNc(1,pE,1,1,"azt-loading-effect",1),e.YNc(2,_E,6,8,"ng-template",null,2,e.W1O),e.qZA()),2&t){const a=e.MAs(3);e.Q6J("headerBackToLink",i.backToLink),e.xp6(1),e.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a)}},dependencies:[F.sg,F.O5,Ai.gM,vi.l,wo._,_.Nh5,e_,ye.JV],encapsulation:2}),n})(),gE=(()=>{class n extends xe.Q{constructor(t,i,a,r,s){super(),this.activeRoute=t,this.offlineExamCreatorV2Service=i,this.classroomService=a,this.programFormService=r,this.configScoreScaleTrueFalseService=s,this.backToLink="",this.categoryId=0,this.markDetails=[],this.form=new h.cw({examName:new h.NI("",{nonNullable:!0,validators:[h.kI.required,Da._.noWhiteSpace]}),examCodeList:new h.Oe([]),schoolLevel:new h.NI(0,{nonNullable:!0,validators:[h.kI.required]}),schoolSubject:new h.NI(0,{nonNullable:!0,validators:[h.kI.required]}),isResetLabelQuestionPart:new h.NI(!0,{nonNullable:!0,validators:[h.kI.required]}),trueFalseQuestionMarkConfig:new h.Oe([])})}handleSaveQuestionAndExam(t){const a=this.configScoreScaleTrueFalseService.convertTrueFalseForm(this.form),r={categoryId:this.categoryId,schoolLevelId:this.form.controls.schoolLevel.value,schoolSubjectId:this.form.controls.schoolSubject.value,name:this.form.controls.examName.value,orcLogId:-5,resetQuestionIndex:this.form.controls.isResetLabelQuestionPart?.value??!0,offlineMixQuestionObjs:t,examTrueFalseQuestionMarkConfigObj:a};this.initStatusObj(),this.waitDestroy(this.offlineExamCreatorV2Service.apiOfflineExamCreatorV2CreateExamObjPost(r).subscribe(s=>{if(s.success){this.showSuccessSnack("lang_auto_tao_de_thi_thanh_cong");const l=this.getMyQueryParam("classroomId"),c=this.getMyQueryParam("programId"),u=this.getMyQueryParam("sessionId"),m=this.getMyQueryParam("indexSession");if(!this.commonService.isNullUndefinedOrEmpty(m))return this.programFormService.ExamExerciseOfProgramToSessionStorage(s.data?.obj?.id??0,s.data?.obj?.name??"","exam"),void this.commonService.myNavigationWithQueryString(`/business/edit-educational-program/${c}`,`?indexSession=${m}`);l?c&&u?this.saveDocumentTrainingCenter(Number(l),Number(c),Number(u),s.data?.obj):this.commonService.myNavigationWithQueryString(`/admin/testbank/config-exam-offline/${this.categoryId}/${s.data?.obj?.hashId}`,`?classroomId=${l}`):this.commonService.myNavigation(`/admin/testbank/config-exam-offline/${this.categoryId}/${s.data?.obj?.hashId}`)}else this.errorStatusObj(s.message??"",!0)}))}saveDocumentTrainingCenter(t,i,a,r){this.classroomService.apiClassroomsClassroomIdSessionsSessionIdDocumentsPost(t,a,{name:r?.name,refId:r?.id,type:"exam"}).subscribe(l=>{l?this.commonService.myNavigationWithQueryString(`/admin/testbank/config-exam-offline/${this.categoryId}/${r?.hashId}`,`?classroomId=${t}&programId=${i}&sessionId=${a}`):this.stopStatusObj()})}initMarkDetails(){this.markDetails=[{totalCorrect:1,markPercent:10},{totalCorrect:2,markPercent:25},{totalCorrect:3,markPercent:50},{totalCorrect:4,markPercent:100}]}ngOnInit(){super.ngOnInit(),this.categoryId=Number(this.commonService.getMyParam(this.activeRoute,"cat_id"))??0,this.backToLink=this.commonService.getMyQueryParam("backto")??`/admin/testbank/create-new-document/${this.categoryId}`,this.commonService.translateMetaData({title:"lang_cms_create_exam_by_hand_title",description:"lang_cms_create_exam_by_hand_description",image:"lang_cms_test_image"}),this.initMarkDetails()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(E.gz),e.Y36(Za.Jt),e.Y36(_r.um),e.Y36(qs.t),e.Y36(WA))},n.\u0275cmp=e.Xpm({type:n,selectors:[["create-manual-offline-exam"]],features:[e.qOj],decls:6,vars:6,consts:[[3,"headerBackToLink"],[1,"mt-5","mx-auto",2,"max-width","1200px"],[1,"text-xl","font-medium"],[3,"form","markDetails","handleSaveData"]],template:function(t,i){1&t&&(e.TgZ(0,"teacher-layout",0)(1,"div",1)(2,"h3",2),e._uU(3),e.ALo(4,"mytranslate"),e.qZA(),e.TgZ(5,"ui-create-offline-exam",3),e.NdJ("handleSaveData",function(r){return i.handleSaveQuestionAndExam(r)}),e.qZA()()()),2&t&&(e.Q6J("headerBackToLink",i.backToLink),e.xp6(3),e.hij(" ",e.lcZ(4,4,"lang_auto_nhap_tay_dap_an")," "),e.xp6(2),e.Q6J("form",i.form)("markDetails",i.markDetails))},dependencies:[wo._,e_,ye.JV],encapsulation:2}),n})();var Vv=I(19127);function xE(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",26)(1,"div",50),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.beforeOpenEditorShowAI())}),e.TgZ(2,"div",51),e._UZ(3,"img",52),e.ALo(4,"convertCdnLinkOfGitHub"),e.qZA(),e.TgZ(5,"div",32)(6,"div",33),e._uU(7),e.ALo(8,"mytranslate"),e.qZA()()(),e.TgZ(9,"div",34)(10,"span"),e._uU(11),e.ALo(12,"mytranslate"),e.qZA(),e.TgZ(13,"a",35),e._uU(14),e.ALo(15,"mytranslate"),e.qZA()()()}2&n&&(e.xp6(3),e.Q6J("src",e.lcZ(4,4,"images/azotaAI.png"),e.LSH),e.xp6(4),e.hij(" ",e.lcZ(8,6,"lang_testbank_create_custom_exam_with_azota_ai")," "),e.xp6(4),e.hij("",e.lcZ(12,8,"lang_testbank_use_ai_technology_for_births_for_automated_on_demand_exams"),"\xa0"),e.xp6(3),e.Oqu(e.lcZ(15,10,"lang_auto_tim_hieu_them")))}function bE(n,o){1&n&&e._UZ(0,"div",53)}const vE=function(n,o,t,i){return[n,o,t,i]};let wE=(()=>{class n extends xe.Q{redirectToMixBank(){this.paramClassroomService.redirectUrlAddParamClassroom(`/admin/testbank/mix-bank-template/${this.categoryId?this.categoryId:0}/user/0`)}redirectToCreateExamOfflineByHand(){this.paramClassroomService.redirectUrlAddParamClassroom(`/admin/testbank/create-manual-offline-exam/${this.categoryId?this.categoryId:0}`)}redirectToCreateExamOfflineByText(){this.paramClassroomService.redirectUrlAddParamClassroom(`/admin/testbank/create-exam-by-text/${this.categoryId?this.categoryId:0}`)}redirectToBack(){this.commonService.myNavigation("/testbank")}beforeOpenEditor(t="editor"){this.editorOutputDataService.setMode(t),this.paramClassroomService.redirectUrlAddParamClassroomReload(`/admin/testbank/azota-editor/${this.categoryId?this.categoryId:0}`)}beforeOpenEditorShowAI(t="editor"){this.editorOutputDataService.setMode(t),this.paramClassroomService.redirectUrlAddParamClassroomReload(`/admin/testbank/azota-editor/${this.categoryId?this.categoryId:0}?showAI=1`)}saveAndSwitch(t){this.editorOutputDataService.setFileProcess(t),this.paramClassroomService.redirectUrlAddParamClassroom(`/admin/testbank/azota-editor/${this.categoryId?this.categoryId:0}`)}startParser(t){this.isFollowLibParser=!0,this.commonService.getTranslate("lang_auto_dang_xu_ly_file_dau_vao_vui_long_doi_trong_giay_lat").subscribe(i=>{this.msgLoading=i}),this.saveAndSwitch(t)}changeFileAction(t){this.file=t,this.getFileIcon(),this.startParser(this.file)}getFileIcon(){const t=["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel"];this.file&&((0,ht.D_)(this.file.type??"")&&!t.includes(this.file.type??"")?this.fileIcon="images/word-icon.png":(0,ht._4)(this.file.type??"")?this.fileIcon="images/pdf-icon.png":(0,ht.Or)(this.file.type??"")?this.fileIcon="images/jpg-icon.png":this.file.type&&t.includes(this.file.type)&&(this.fileIcon="images/excel.png")),this.fileIcon="images/documents.png"}ngOnInit(){this.waitDestroy((0,ne.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.categoryId=Number(this.commonService.getMyParam(this.activeRoute,"cat_id"));let t=this.commonService.getMyQueryParam("backto")??"";this.backToLink=t||"/admin/testbank/document-management/0/"+(null!=this.categoryId?this.categoryId:0)+"/1"})),this.commonService.translateMetaData({title:"lang_cms_test_create_new_title",description:"lang_cms_test_create_new_description",image:"lang_cms_test_image"}),super.ngOnInit()}constructor(t,i,a){super(),this.activeRoute=t,this.editorOutputDataService=i,this.paramClassroomService=a,this.categoryId=0,this.backToLink="",this.isChooseFile=!1,this.isFollowLibParser=!1,this.fileParser=new oe.uD,this.isInitConf=!1,this.fileIcon="",this.msgLoading="",this.willShowAIBox=!Z.N.production||Z.N.isProdAzotaVn,this.allUploadFileTypes=_m.AZ,this.form=new h.cw({file:new h.NI("",{nonNullable:!0,validators:[h.kI.required]})})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(E.gz),e.Y36(Ar.O),e.Y36(Xr))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-create-new-document"]],features:[e.qOj],decls:120,vars:105,consts:[[3,"headerBackToLink"],[1,"intro-y","flex","items-center","mt-5"],[1,"text-lg","font-medium","mr-auto"],[1,"intro-y","chat","grid","grid-cols-12","gap-5","mt-5","create-new-document-main"],[1,"intro-y","col-span-12","lg:col-span-8"],[3,"fileType","limitSize","emitFiles"],["azt-track-service","create-new-document-PuQSKmLC3","id","box-left-file-drop",1,"h-full","cursor-pointer","box","p-5"],[1,"h-full","flex","items-center"],[1,"mx-auto","text-center"],[1,"w-16","h-16","flex-none","image-fit","overflow-hidden","mx-auto","upload-box"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"w-16","h-16","text-primary"],["fill-rule","evenodd","d","M4.406 1.342A5.53 5.53 0 0 1 8 0c2.69 0 4.923 2 5.166 4.579C14.758 4.804 16 6.137 16 7.773 16 9.569 14.502 11 12.687 11H10a.5.5 0 0 1 0-1h2.688C13.979 10 15 8.988 15 7.773c0-1.216-1.02-2.228-2.313-2.228h-.5v-.5C12.188 2.825 10.328 1 8 1a4.53 4.53 0 0 0-2.941 1.1c-.757.652-1.153 1.438-1.153 2.055v.448l-.445.049C2.064 4.805 1 5.952 1 7.318 1 8.785 2.23 10 3.781 10H6a.5.5 0 0 1 0 1H3.781C1.708 11 0 9.366 0 7.318c0-1.763 1.266-3.223 2.942-3.593.143-.863.698-1.723 1.464-2.383z"],["fill-rule","evenodd","d","M7.646 4.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 5.707V14.5a.5.5 0 0 1-1 0V5.707L5.354 7.854a.5.5 0 1 1-.708-.708l3-3z"],[1,"mt-3"],[1,"font-medium","text-lg","upload-box"],[1,"text-slate-500","text-xs","mt-1"],["azt-track-service","create-new-document-WauQzqbISx","href","https://docs.azota.vn/docs/huong-dan-su-dung/de-thi/chon-file-keo-tha-file-de-tao-de/","target","_blank",1,"text-primary",3,"click"],[1,"pt-2"],["azt-track-service","create-new-document-FxdEQuAx7G","id","download-link-item",3,"dataUrl","target","fileName","fileDescription","classStyle","click"],["azt-track-service","create-new-document-O5FkqsuTLC","id","download-link-item",3,"dataUrl","target","fileName","fileDescription","classStyle","click"],["id","download-link-item",3,"dataUrl","target","fileName","fileDescription","classStyle","click"],["azt-track-service","create-new-document-cPk0ISITQT","id","download-link-item",3,"dataUrl","target","fileName","fileDescription","classStyle","click"],[1,"col-span-12","lg:col-span-4"],["id","profile","role","tabpanel","aria-labelledby","profile-tab",1,"tab-pane"],[1,"pr-1"],["class","block-azt mb-5",4,"ngIf"],[1,"block-azt","mb-5"],["azt-track-service","create-new-document-eWSFP-ZUFW",1,"box","flex","items-center","px-5","py-5","zoom-in",3,"click"],[1,"w-8","h-8","flex-none","image-fit","overflow-hidden","mr-5"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"w-8","h-8","text-pending"],["d","M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"],["fill-rule","evenodd","d","M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z"],[1,"text-center"],[1,"font-medium","text-lg"],[1,"text-slate-500","text-xs","mt-2"],["azt-track-service","create-new-document-ZQ2mrymJc","href","https://docs.azota.vn/docs/huong-dan-su-dung/de-thi/tu-soan-de/","target","_blank",1,"text-primary"],["azt-track-service","create-new-document-KJvjOB4efQ",1,"box","flex","items-center","px-5","py-5","zoom-in",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"w-8","h-8","text-success"],["d","M8.277.084a.5.5 0 0 0-.554 0l-7.5 5A.5.5 0 0 0 .5 6h1.875v7H1.5a.5.5 0 0 0 0 1h13a.5.5 0 1 0 0-1h-.875V6H15.5a.5.5 0 0 0 .277-.916l-7.5-5zM12.375 6v7h-1.25V6h1.25zm-2.5 0v7h-1.25V6h1.25zm-2.5 0v7h-1.25V6h1.25zm-2.5 0v7h-1.25V6h1.25zM8 4a1 1 0 1 1 0-2 1 1 0 0 1 0 2zM.5 15a.5.5 0 0 0 0 1h15a.5.5 0 1 0 0-1H.5z"],["azt-track-service","create-new-document-MC5alRfKcY","href","https://docs.azota.vn/docs/huong-dan-su-dung/de-thi/tao-de-tu-ma-tran-de/","target","_blank",1,"text-primary"],["azt-track-service","create-new-document-PDK9L9LPGj",1,"box","flex","items-center","px-5","py-5","zoom-in",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"w-8","h-8","text-warning"],["d","M6.75 1a.75.75 0 0 1 .75.75V8a.5.5 0 0 0 1 0V5.467l.086-.004c.317-.012.637-.008.816.027.134.027.294.096.448.182.077.042.15.147.15.314V8a.5.5 0 0 0 1 0V6.435l.106-.01c.316-.024.584-.01.708.04.118.046.3.207.486.43.081.096.15.19.2.259V8.5a.5.5 0 1 0 1 0v-1h.342a1 1 0 0 1 .995 1.1l-.271 2.715a2.5 2.5 0 0 1-.317.991l-1.395 2.442a.5.5 0 0 1-.434.252H6.118a.5.5 0 0 1-.447-.276l-1.232-2.465-2.512-4.185a.517.517 0 0 1 .809-.631l2.41 2.41A.5.5 0 0 0 6 9.5V1.75A.75.75 0 0 1 6.75 1zM8.5 4.466V1.75a1.75 1.75 0 1 0-3.5 0v6.543L3.443 6.736A1.517 1.517 0 0 0 1.07 8.588l2.491 4.153 1.215 2.43A1.5 1.5 0 0 0 6.118 16h6.302a1.5 1.5 0 0 0 1.302-.756l1.395-2.441a3.5 3.5 0 0 0 .444-1.389l.271-2.715a2 2 0 0 0-1.99-2.199h-.581a5.114 5.114 0 0 0-.195-.248c-.191-.229-.51-.568-.88-.716-.364-.146-.846-.132-1.158-.108l-.132.012a1.26 1.26 0 0 0-.56-.642 2.632 2.632 0 0 0-.738-.288c-.31-.062-.739-.058-1.05-.046l-.048.002zm2.094 2.025z"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-8","h-8","text-secondary"],["cx","7","cy","12","r","3"],["d","M10 9v6"],["cx","17","cy","12","r","3"],["d","M14 7v8"],["d","M22 17v1c0 .5-.5 1-1 1H3c-.5 0-1-.5-1-1v-1"],["class","loading",4,"ngIf"],["azt-track-service","create-new-document-xS3E2vP1e",1,"box","flex","items-center","px-5","py-5","zoom-in",3,"click"],[1,"w-9","h-8","flex-none","image-fit","overflow-hidden","mr-5"],[1,"w-full","h-full","inline-block",3,"src"],[1,"loading"]],template:function(t,i){1&t&&(e.TgZ(0,"teacher-layout",0)(1,"div",1)(2,"h3",2),e._uU(3),e.ALo(4,"mytranslate"),e.qZA()(),e.TgZ(5,"div",3)(6,"div",4)(7,"azt-upload-single-document-to-editor",5),e.NdJ("emitFiles",function(r){return i.changeFileAction(r)}),e.TgZ(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9),e.O4$(),e.TgZ(12,"svg",10),e._UZ(13,"path",11)(14,"path",12),e.qZA()(),e.kcU(),e.TgZ(15,"div",13)(16,"div",14),e._uU(17),e.ALo(18,"mytranslate"),e.qZA(),e.TgZ(19,"div",15),e._uU(20),e.ALo(21,"mytranslate"),e._UZ(22,"br"),e._uU(23),e.ALo(24,"mytranslate"),e.TgZ(25,"b"),e._uU(26),e.ALo(27,"mytranslate"),e.qZA(),e._uU(28," , "),e.TgZ(29,"b"),e._uU(30),e.ALo(31,"mytranslate"),e.qZA(),e._uU(32),e.ALo(33,"mytranslate"),e.TgZ(34,"b"),e._uU(35),e.ALo(36,"mytranslate"),e.qZA(),e._uU(37),e.ALo(38,"mytranslate"),e.TgZ(39,"a",16),e.NdJ("click",function(r){return r.stopPropagation()}),e._uU(40),e.ALo(41,"mytranslate"),e.qZA(),e.TgZ(42,"div",17)(43,"azt-download-link-item",18),e.NdJ("click",function(r){return i.isMobileWebView?"":r.stopPropagation()}),e.ALo(44,"convertCdnLinkOfGitHubWithLocale"),e.ALo(45,"mytranslate"),e.qZA(),e._uU(46," \xa0|\xa0 "),e.TgZ(47,"azt-download-link-item",19),e.NdJ("click",function(r){return i.isMobileWebView?"":r.stopPropagation()}),e.ALo(48,"convertRawLinkOfGitHubWithLocale"),e.ALo(49,"mytranslate"),e.qZA(),e._uU(50," \xa0|\xa0 "),e.TgZ(51,"azt-download-link-item",20),e.NdJ("click",function(r){return i.isMobileWebView?"":r.stopPropagation()}),e.ALo(52,"convertRawLinkOfGitHubWithLocale"),e.ALo(53,"mytranslate"),e.qZA(),e._uU(54," \xa0|\xa0 "),e.TgZ(55,"azt-download-link-item",21),e.NdJ("click",function(r){return i.isMobileWebView?"":r.stopPropagation()}),e.ALo(56,"convertRawLinkOfGitHubWithLocale"),e.ALo(57,"mytranslate"),e.qZA()()()()()()()()(),e.TgZ(58,"div",22)(59,"div",23)(60,"div",24),e.YNc(61,xE,16,12,"div",25),e.ALo(62,"async"),e.ALo(63,"allowFeatureForUserBySchoolSubject"),e.TgZ(64,"div",26)(65,"div",27),e.NdJ("click",function(){return i.beforeOpenEditor()}),e.TgZ(66,"div",28),e.O4$(),e.TgZ(67,"svg",29),e._UZ(68,"path",30)(69,"path",31),e.qZA()(),e.kcU(),e.TgZ(70,"div",32)(71,"div",33),e._uU(72),e.ALo(73,"mytranslate"),e.qZA()()(),e.TgZ(74,"div",34)(75,"span"),e._uU(76),e.ALo(77,"mytranslate"),e.qZA(),e.TgZ(78,"a",35),e._uU(79),e.ALo(80,"mytranslate"),e.qZA()()(),e.TgZ(81,"div",26)(82,"div",36),e.NdJ("click",function(){return i.redirectToMixBank()}),e.TgZ(83,"div",28),e.O4$(),e.TgZ(84,"svg",37),e._UZ(85,"path",38),e.qZA()(),e.kcU(),e.TgZ(86,"div",32)(87,"div",33),e._uU(88),e.ALo(89,"mytranslate"),e.qZA()()(),e.TgZ(90,"div",34)(91,"span"),e._uU(92),e.ALo(93,"mytranslate"),e.qZA(),e.TgZ(94,"a",39),e._uU(95),e.ALo(96,"mytranslate"),e.qZA()()(),e.TgZ(97,"div",26)(98,"div",40),e.NdJ("click",function(){return i.redirectToCreateExamOfflineByHand()}),e.TgZ(99,"div",28),e.O4$(),e.TgZ(100,"svg",41),e._UZ(101,"path",42),e.qZA()(),e.kcU(),e.TgZ(102,"div",32)(103,"div",33),e._uU(104),e.ALo(105,"mytranslate"),e.qZA()()()(),e.TgZ(106,"div",26)(107,"div",40),e.NdJ("click",function(){return i.redirectToCreateExamOfflineByText()}),e.TgZ(108,"div",28),e.O4$(),e.TgZ(109,"svg",43),e._UZ(110,"circle",44)(111,"path",45)(112,"circle",46)(113,"path",47)(114,"path",48),e.qZA()(),e.kcU(),e.TgZ(115,"div",32)(116,"div",33),e._uU(117),e.ALo(118,"mytranslate"),e.qZA()()()()()()()(),e.YNc(119,bE,1,0,"div",49),e.qZA()),2&t&&(e.Q6J("headerBackToLink",i.backToLink),e.xp6(3),e.hij(" ",e.lcZ(4,43,"lang_auto_tao_de_moi")," "),e.xp6(4),e.Q6J("fileType",e.l5B(100,vE,i.allUploadFileTypes.WORD,i.allUploadFileTypes.AZT,i.allUploadFileTypes.PDF,i.allUploadFileTypes.EXCEL))("limitSize",200),e.xp6(10),e.Oqu(e.lcZ(18,45,"lang_auto_chon_file_hoc_keo_tha_file_vao_day")),e.xp6(3),e.hij(" ",e.lcZ(21,47,"lang_auto_azota_support_file_type")," .pdf, .docx, .xlsx. "),e.xp6(3),e.hij(" ",e.lcZ(24,49,"lang_auto_can_upload")," "),e.xp6(3),e.Oqu(e.lcZ(27,51,"lang_auto_bai_tap")),e.xp6(4),e.Oqu(e.lcZ(31,53,"lang_auto_de_thi")),e.xp6(2),e.hij(" ",e.lcZ(33,55,"lang_auto_hoac")," "),e.xp6(3),e.Oqu(e.lcZ(36,57,"lang_auto_bang_dap_an")),e.xp6(2),e.hij(" ",e.lcZ(38,59,"lang_auto_de_cham_offline"),". "),e.xp6(3),e.hij(" ",e.lcZ(41,61,"lang_auto_tim_hieu_them")," "),e.xp6(3),e.Q6J("dataUrl",e.lcZ(44,63,"medias_[LANG]/de_mau_azota.zip"))("target","_blank")("fileName",e.lcZ(45,65,"lang_testbank_create_document_azota_pdf_model"))("fileDescription","lang_testbank_create_document_azota_pdf_model")("classStyle","text-primary"),e.xp6(4),e.Q6J("dataUrl",e.lcZ(48,67,"medias_[LANG]/de_mau_azota.docx?raw=true"))("target","_self")("fileName",e.lcZ(49,69,"lang_testbank_create_document_azota_docx_model"))("fileDescription","lang_testbank_create_document_azota_docx_model")("classStyle","text-primary"),e.xp6(4),e.Q6J("dataUrl",e.lcZ(52,71,"medias_[LANG]/mau_de_dung_sai_azota_v1.docx?raw=true"))("target","_self")("fileName",e.lcZ(53,73,"lang_testbank_create_document_azota_docx_true_false_model"))("fileDescription","lang_testbank_create_document_azota_docx_true_false_model")("classStyle","text-primary"),e.xp6(4),e.Q6J("dataUrl",e.lcZ(56,75,"medias_[LANG]/de_mau_azota_excel_v2_5.xlsx?raw=true"))("target","_self")("fileName",e.lcZ(57,77,"lang_testbank_create_document_azota_pdf_model"))("fileDescription","lang_testbank_create_document_azota_excel_model")("classStyle","text-primary"),e.xp6(6),e.Q6J("ngIf",i.willShowAIBox||e.lcZ(62,79,e.xi3(63,81,"",32))),e.xp6(11),e.hij(" ",e.lcZ(73,84,"lang_auto_tu_soan_de_tren_azota")," "),e.xp6(4),e.hij("",e.lcZ(77,86,"lang_auto_su_dung_trinh_soan_thao_de_cua_azota_chinh_sua_tu_cac_mau_co_san_hoac_copy_and_paste_tu_cac_nguon_khac_nhau"),"\xa0"),e.xp6(3),e.Oqu(e.lcZ(80,88,"lang_auto_tim_hieu_them")),e.xp6(9),e.hij(" ",e.lcZ(89,90,"lang_auto_tao_ma_tran_de_thi")," "),e.xp6(4),e.hij("",e.lcZ(93,92,"lang_auto_azota_se_sinh_ngau_nhien_de_moi_tu_cac_chuyen_de_so_luong_cau_trong_moi_chuyen_de_cac_muc_do_kho_de_ma_nguoi_dung_lua_chon"),"\xa0"),e.xp6(3),e.Oqu(e.lcZ(96,94,"lang_auto_tim_hieu_them")),e.xp6(9),e.hij(" ",e.lcZ(105,96,"lang_auto_nhap_tay_dap_an")," "),e.xp6(13),e.hij(" ",e.lcZ(118,98,"lang_azt_create_offline_exam")," "),e.xp6(2),e.Q6J("ngIf",i.isFollowLibParser))},dependencies:[F.O5,Qv.P,Vv.K,wo._,F.Ov,ye.JV,ye.Bo,ye.Ju,ye.jw,ye.vJ],encapsulation:2}),n})();var Gt=I(70937);function yE(n,o){if(1&n&&(e.TgZ(0,"p"),e._uU(1),e.ALo(2,"mytranslate"),e.TgZ(3,"b"),e._uU(4),e.qZA(),e._uU(5," - "),e.TgZ(6,"span"),e._uU(7),e.ALo(8,"mytranslate"),e.qZA()()),2&n){const t=o.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,3,"lang_auto_ma_de_loi"),": "),e.xp6(3),e.Oqu(t.rawOfflineMixQuestionHashId),e.xp6(3),e.Oqu(e.lcZ(8,5,t.error))}}function CE(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",5)(1,"div",6)(2,"div",7)(3,"p",8),e._uU(4),e.ALo(5,"mytranslate"),e.ALo(6,"mytranslate"),e.qZA(),e.TgZ(7,"div",9)(8,"button",10),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.showErrorBlock=!1)}),e.ALo(9,"mytranslate"),e.TgZ(10,"span",11),e._UZ(11,"lucide-icon",12),e.qZA()()()(),e.TgZ(12,"div",13),e.YNc(13,yE,9,7,"p",14),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(4),e.lnq("",e.lcZ(5,5,"lang_testbank_there_is")," ",t.excelErrorObjs.length," ",e.lcZ(6,7,"lang_testbank_error_in_the_excel_file"),""),e.xp6(4),e.s9C("matTooltip",e.lcZ(9,9,"lang_auto_dong")),e.xp6(5),e.Q6J("ngForOf",t.excelErrorObjs)}}function TE(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",15),e._UZ(1,"textarea",16),e.ALo(2,"mytranslate"),e.TgZ(3,"div",17)(4,"p",18),e._uU(5),e.ALo(6,"mytranslate"),e.qZA(),e.TgZ(7,"p",19),e._uU(8),e.ALo(9,"mytranslate"),e.qZA(),e.TgZ(10,"p",19),e._uU(11),e.ALo(12,"mytranslate"),e.qZA(),e.TgZ(13,"p",19),e._uU(14),e.ALo(15,"mytranslate"),e.qZA(),e.TgZ(16,"p",19),e._uU(17),e.ALo(18,"mytranslate"),e.qZA(),e.TgZ(19,"p",19),e._uU(20),e.ALo(21,"mytranslate"),e.qZA(),e.TgZ(22,"p",19),e._uU(23),e.ALo(24,"mytranslate"),e.qZA(),e.TgZ(25,"p",19),e._uU(26),e.ALo(27,"mytranslate"),e._UZ(28,"br"),e._uU(29," #101/A/B/C/FFFF/TTTT/TFTT/-12/9.5/Essay/Essay "),e._UZ(30,"br"),e._uU(31," #102/A/A/D/TTTT/TTTT/TFTT/-12/9.5/Essay/Essay "),e.qZA()(),e.TgZ(32,"div",20)(33,"button",21),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.handleConvertTextToExcel())}),e._uU(34),e.ALo(35,"mytranslate"),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("formControl",t.textContent)("placeholder",e.lcZ(2,11,"Nh\u1eadp c\u1ea5u tr\xfac text")),e.xp6(4),e.Oqu("* "+e.lcZ(6,13,"lang_azt_separate_exam_codes_with_hashtag")),e.xp6(3),e.Oqu("* "+e.lcZ(9,15,"lang_azt_separate_exam_code_and_answers_with_slash")),e.xp6(3),e.Oqu("* "+e.lcZ(12,17,"lang_azt_exam_code_must_be_natural_number")),e.xp6(3),e.Oqu("* "+e.lcZ(15,19,"lang_azt_multiple_choice_answers_must_be_ABCD")),e.xp6(3),e.Oqu("* "+e.lcZ(18,21,"lang_azt_true_false_answers_format")),e.xp6(3),e.Oqu("* "+e.lcZ(21,23,"lang_azt_numeric_answers_format")),e.xp6(3),e.Oqu("* "+e.lcZ(24,25,"lang_azt_essay_answer_format")),e.xp6(3),e.hij(" '* ' + ",e.lcZ(27,27,"lang_azt_detailed_example")," "),e.xp6(8),e.hij(" ",e.lcZ(35,29,"lang_auto_tiep_tuc")," ")}}function kE(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",15)(1,"ui-create-offline-exam",22),e.NdJ("handleSaveData",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.handleSaveQuestionAndExam(a))}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("form",t.form)("type",t.type)("markDetails",t.markDetails)("dataExamOfflineByExcel",t.dataExamOfflineExcel)}}let SE=(()=>{class n extends xe.Q{handleSaveQuestionAndExam(t){const a=this.configScoreScaleTrueFalseService.convertTrueFalseForm(this.form),r={categoryId:this.categoryId,schoolLevelId:this.form.controls.schoolLevel.value,schoolSubjectId:this.form.controls.schoolSubject.value,name:this.form.controls.examName.value,orcLogId:-5,resetQuestionIndex:this.form.controls.isResetLabelQuestionPart?.value??!0,offlineMixQuestionObjs:t,examTrueFalseQuestionMarkConfigObj:a};this.initStatusObj(),this.waitDestroy(this.offlineExamCreatorV2Service.apiOfflineExamCreatorV2CreateExamObjPost(r).subscribe(s=>{if(!s.success)return this.errorStatusObj(s.message??"",!0);this.showSuccessSnack("lang_auto_tao_de_thi_thanh_cong");const l=this.getMyQueryParam("classroomId"),c=this.getMyQueryParam("programId"),u=this.getMyQueryParam("sessionId"),m=this.getMyQueryParam("indexSession");if(!this.commonService.isNullUndefinedOrEmpty(m))return this.programFormService.ExamExerciseOfProgramToSessionStorage(s.data?.obj?.id??0,s.data?.obj?.name??"","exam"),void this.commonService.myNavigationWithQueryString(`/business/edit-educational-program/${c}`,`?indexSession=${m}`);l?c&&u?this.saveDocumentTrainingCenter(Number(l),Number(c),Number(u),s.data?.obj):this.commonService.myNavigationWithQueryString(`/admin/testbank/config-exam-offline/${this.categoryId}/${s.data?.obj?.hashId}`,`?classroomId=${l}`):this.commonService.myNavigation(`/admin/testbank/config-exam-offline/${this.categoryId}/${s.data?.obj?.hashId}`)}))}handleConvertTextToExcel(){if(this.textContent.invalid)return this.showErrorSnack("lang_auto_vui_long_nhap_dung_dinh_dang");const t=this.textContent.value.split("#"),i=Gt.utils.book_new(),r=[];t.forEach(c=>{if(c.length){const u=c.split("/");r.push(u)}});const s=Gt.utils.aoa_to_sheet(r);Gt.utils.book_append_sheet(i,s,"Sheet1");const l=Gt.write(i,{bookType:"xlsx",type:"array"});this.processFile(l)}handlePrevStep(){this.step=0,this.checkBackDialog=!1,this.initFormGroup()}saveDocumentTrainingCenter(t,i,a,r){this.classroomService.apiClassroomsClassroomIdSessionsSessionIdDocumentsPost(t,a,{name:r?.name,refId:r?.id,type:"exam"}).subscribe(l=>{if(!l)return this.stopStatusObj();this.commonService.myNavigationWithQueryString(`/admin/testbank/config-exam-offline/${this.categoryId}/${r?.hashId}`,`?classroomId=${t}&programId=${i}&sessionId=${a}`)})}processFile(t){this.initStatusObj();const i=Number(this.commonService.getMyParam(this.activeRoute,"cat_id")??0),a=new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});this.waitDestroy(this.offlineExamParserV2Service.apiOfflineExamParserV2ParserExcelV2PostForm(i,a).subscribe(r=>{if(!r.success)return this.errorStatusObj("lang_auto_vui_long_nhap_dung_dinh_dang",!0);this.dataExamOfflineExcel={categoryId:i,name:"",schoolLevelId:1,schoolSubjectId:1,orcLogId:r.data?.orcLogId??-1,offlineMixQuestionObjs:[],excelOfflineMixQuestionObjs:r.data?.excelOfflineMixQuestionObjs??[],resetQuestionIndex:!1,errors:[]},this.excelErrorObjs=r.data?.errors??[],this.markDetails=r.data?.examTrueFalseQuestionMarkConfigObj?.markDetails??[],this.step=1,this.checkBackDialog=!0,this.successStatusObj()}))}initFormGroup(){this.form=new h.cw({examName:new h.NI("",{nonNullable:!0,validators:[h.kI.required,Da._.noWhiteSpace]}),examCodeList:new h.Oe([]),schoolLevel:new h.NI(0,{nonNullable:!0,validators:[h.kI.required]}),schoolSubject:new h.NI(0,{nonNullable:!0,validators:[h.kI.required]}),isResetLabelQuestionPart:new h.NI(!0,{nonNullable:!0,validators:[h.kI.required]}),trueFalseQuestionMarkConfig:new h.Oe([])})}ngOnInit(){super.ngOnInit(),this.categoryId=Number(this.commonService.getMyParam(this.activeRoute,"cat_id"))??0,this.backToLink=this.commonService.getMyQueryParam("backto")??`/admin/testbank/create-new-document/${this.categoryId}`,this.commonService.translateMetaData({title:"lang_cms_create_exam_by_hand_title",description:"lang_cms_create_exam_by_hand_description",image:"lang_cms_test_image"})}constructor(t,i,a,r,s,l){super(),this.activeRoute=t,this.offlineExamCreatorV2Service=i,this.classroomService=a,this.programFormService=r,this.configScoreScaleTrueFalseService=s,this.offlineExamParserV2Service=l,this.backToLink="",this.checkBackDialog=!1,this.showErrorBlock=!0,this.categoryId=0,this.step=0,this.textContent=new h.NI("",{nonNullable:!0,validators:[h.kI.required,Da._.noWhiteSpace]}),this.markDetails=[],this.type=Sa.text,this.excelErrorObjs=[],this.initFormGroup()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(E.gz),e.Y36(Za.Jt),e.Y36(_r.um),e.Y36(qs.t),e.Y36(WA),e.Y36(Za.Xe))},n.\u0275cmp=e.Xpm({type:n,selectors:[["create-offline-exam-by-text"]],features:[e.qOj],decls:8,vars:8,consts:[[3,"headerBackToLink","checkBackDialog","handleBackDialog"],[1,"mt-5","mx-auto",2,"max-width","1200px"],[1,"text-xl","font-medium"],["class","col-md-12 mb-4 mt-2",4,"ngIf"],["class","mt-4",4,"ngIf"],[1,"col-md-12","mb-4","mt-2"],[1,"alert","alert-outline-danger","show","mb-2"],[1,"flex","items-center"],[1,"font-medium","text-lg"],[1,"ml-auto"],["azt-track-service","create-exam-by-excel-HGchE1J84tS",1,"btn-azt-secodary-icon",3,"matTooltip","click"],[1,"w-4","h-4","inline-block"],["name","x"],[1,"mt-3"],[4,"ngFor","ngForOf"],[1,"mt-4"],[1,"form-control",2,"min-height","30vh",3,"formControl","placeholder"],[1,"note","mt-2"],[1,"font-medium"],[1,"font-medium","mt-1"],[1,"mt-4","text-right"],[1,"btn","btn-primary","w-24",3,"click"],[3,"form","type","markDetails","dataExamOfflineByExcel","handleSaveData"]],template:function(t,i){1&t&&(e.TgZ(0,"teacher-layout",0),e.NdJ("handleBackDialog",function(){return i.handlePrevStep()}),e.TgZ(1,"div",1)(2,"h3",2),e._uU(3),e.ALo(4,"mytranslate"),e.qZA(),e.YNc(5,CE,14,11,"div",3),e.YNc(6,TE,36,31,"div",4),e.YNc(7,kE,2,4,"div",4),e.qZA()()),2&t&&(e.Q6J("headerBackToLink",i.backToLink)("checkBackDialog",i.checkBackDialog),e.xp6(3),e.hij(" ",e.lcZ(4,6,"lang_azt_create_offline_exam")," "),e.xp6(2),e.Q6J("ngIf",i.excelErrorObjs.length>0&&i.showErrorBlock),e.xp6(1),e.Q6J("ngIf",0===i.step),e.xp6(1),e.Q6J("ngIf",1===i.step&&i.dataExamOfflineExcel))},dependencies:[F.sg,F.O5,Ai.gM,h.Fj,h.JJ,h.oH,wo._,_.Nh5,e_,ye.JV],encapsulation:2}),n})();function EE(n,o){if(1&n&&e._UZ(0,"azt-loading-effect",4),2&n){const t=e.oxw();e.Q6J("currentStatusObj",t.statusObj)}}function OE(n,o){if(1&n&&(e.TgZ(0,"div",5)(1,"div",6)(2,"h3",7),e._uU(3),e.ALo(4,"mytranslate"),e.qZA()(),e.TgZ(5,"div",8)(6,"h3",9),e._uU(7),e.ALo(8,"mytranslate"),e.qZA(),e.TgZ(9,"div",10),e._UZ(10,"input",11),e.TgZ(11,"a",12),e.O4$(),e.TgZ(12,"svg",13),e._UZ(13,"path",14)(14,"polyline",15)(15,"line",16),e.qZA(),e._uU(16),e.ALo(17,"mytranslate"),e.qZA()()()()),2&n){const t=e.oxw();e.xp6(3),e.hij("",e.lcZ(4,5,"lang_testbank_create_wibsite_result_header_title")," \u{1f389}"),e.xp6(4),e.hij(" ",e.lcZ(8,7,"lang_testbank_create_wibsite_result_address")," "),e.xp6(3),e.s9C("value",t.linkExerciseExist),e.xp6(1),e.Q6J("href",t.linkExerciseExist,e.LSH),e.xp6(5),e.hij(" ",e.lcZ(17,9,"lang_testbank_create_wibsite_result_Access")," ")}}let IE=(()=>{class n extends xe.Q{getExamDataById(){this.status_obj={loading:!0,error:!1},this.waitDestroy(this.examService.apiExamGetWebsiteInfoGet().subscribe(t=>{1==t.success?(this.obj=t.data?.obj,this.linkExerciseExist=`${t.data?.obj?.value}`,this.status_obj={loading:!1,error:!1}):(this.showErrorSnack(t.message??""),this.status_obj={loading:!1,error:!0})}))}ngOnInit(){(0,ne.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.getExamDataById(),this.backToLink="/admin/testbank/create-website"}),this.commonService.translateMetaData({title:"lang_cms_test_create_website_result_title",description:"lang_cms_test_create_website_result_description",image:"lang_cms_test_image"}),super.ngOnInit()}constructor(t,i){super(),this.activeRoute=t,this.examService=i,this.status_obj={loading:!1,error:!1},this.linkExerciseExist="",this.backToLink=""}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(E.gz),e.Y36(un.Oe))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-create-website-result"]],features:[e.qOj],decls:5,vars:3,consts:[[3,"headerBackToLink"],[1,"py-5","mt-8"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],["doneLoading",""],[3,"currentStatusObj"],[1,"intro-y","mt-8"],[1,"flex","items-center","justify-center"],[1,"text-lg","font-medium"],[1,"box","mx-auto","mt-5","p-3",2,"max-width","560px"],[1,"text-md","font-medium"],[1,"azt-copy","relative","mt-3","intro-x"],["type","text","readonly","",1,"form-control","py-3","px-4","border-transparent","bg-slate-100","pr-10",2,"padding-right","120px",3,"value"],["azt-track-service","create-website-result-F_Qjh-7fxPs","target","_blank",1,"btn","btn-outline-primary","absolute","my-auto","inset-y-0","right-0",2,"border-top-left-radius","0","border-bottom-left-radius","0",3,"href"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","mr-2","lucide"],["d","M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"],["points","15 3 21 3 21 9"],["x1","10","y1","14","x2","21","y2","3"]],template:function(t,i){if(1&t&&(e.TgZ(0,"teacher-layout",0)(1,"div",1),e.YNc(2,EE,1,1,"azt-loading-effect",2),e.YNc(3,OE,18,11,"ng-template",null,3,e.W1O),e.qZA()()),2&t){const a=e.MAs(4);e.Q6J("headerBackToLink",i.backToLink),e.xp6(2),e.Q6J("ngIf",i.status_obj.loading)("ngIfElse",a)}},dependencies:[F.O5,vi.l,wo._,ye.JV],styles:[".content-box[_ngcontent-%COMP%]{border-width:0px;background-color:#fff;box-sizing:border-box;border-width:1px;border-style:solid;border-color:#dcdcdc;border-radius:4px;box-shadow:none}.click-to-href[_ngcontent-%COMP%], .click-to-href[_ngcontent-%COMP%]:hover{color:#5f5f5f!important}@media only screen and (max-width: 992px){.box[_ngcontent-%COMP%]{width:60%}}@media only screen and (max-width: 768px){.box[_ngcontent-%COMP%]{width:80%}}@media only screen and (max-width: 576px){.box[_ngcontent-%COMP%]{width:90%}}@media only screen and (max-width: 380px){.box[_ngcontent-%COMP%]{width:95%}}"]}),n})();function ME(n,o){if(1&n&&e._UZ(0,"azt-loading-effect",3),2&n){const t=e.oxw();e.Q6J("currentStatusObj",t.statusObj)}}function LE(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",53),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.handleRunScriptIframe())}),e.O4$(),e.TgZ(1,"svg",33),e._UZ(2,"path",54)(3,"path",55),e.qZA(),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()}2&n&&(e.xp6(4),e.hij(" ",e.lcZ(5,1,"lang_button_edit")," "))}function BE(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",56),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.handleCancelEdit())}),e.O4$(),e.TgZ(1,"svg",33),e._UZ(2,"path",57)(3,"polyline",58)(4,"line",59)(5,"line",60),e.qZA(),e._uU(6),e.ALo(7,"mytranslate"),e.qZA()}2&n&&(e.xp6(6),e.hij(" ",e.lcZ(7,1,"lang_button_cancel")," "))}function PE(n,o){1&n&&(e.TgZ(0,"div",61),e.O4$(),e.TgZ(1,"svg",33),e._UZ(2,"circle",62)(3,"line",63)(4,"line",64),e.qZA(),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()),2&n&&(e.xp6(5),e.hij(" ",e.lcZ(6,1,"lang_auto_click_vao_tung_doan_text_ma_ban_muon_sua")," "))}function QE(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"a",65),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.handleRunScriptIframe())}),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()}2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_button_edit")))}function FE(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"a",66),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.handleCancelEdit())}),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()}2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_button_cancel")))}function NE(n,o){1&n&&(e.TgZ(0,"div",67),e.O4$(),e.TgZ(1,"svg",33),e._UZ(2,"circle",62)(3,"line",63)(4,"line",64),e.qZA(),e.kcU(),e.TgZ(5,"span"),e._uU(6),e.ALo(7,"mytranslate"),e.qZA()()),2&n&&(e.xp6(6),e.Oqu(e.lcZ(7,1,"lang_auto_click_vao_tung_doan_text_ma_ban_muon_sua")))}function ZE(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",4)(1,"div",5)(2,"div",6)(3,"div",7)(4,"div",8)(5,"h3",9),e._uU(6),e.ALo(7,"mytranslate"),e.qZA()(),e.TgZ(8,"div",10)(9,"h3",11)(10,"button",12),e._uU(11),e.ALo(12,"mytranslate"),e.qZA()(),e.TgZ(13,"mat-menu",null,13)(15,"div",14)(16,"div",15),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.handleClickTemplate("templateExample"))}),e.TgZ(17,"div",16),e._UZ(18,"img",17),e.ALo(19,"convertCdnLinkOfGitHub"),e.qZA(),e.TgZ(20,"h4"),e._uU(21,"Landing Teacher"),e.qZA()()()()()()(),e.TgZ(22,"div",18)(23,"div",19)(24,"div",20)(25,"button",21),e.O4$(),e.TgZ(26,"svg",22),e._UZ(27,"line",23)(28,"line",24)(29,"line",25),e.qZA()(),e.kcU(),e.TgZ(30,"mat-menu",null,26)(32,"div",27)(33,"ul",28)(34,"li"),e.YNc(35,LE,6,3,"button",29),e.qZA(),e.TgZ(36,"li"),e.YNc(37,BE,8,3,"button",30),e.qZA(),e.TgZ(38,"li"),e._UZ(39,"hr",31),e.qZA(),e.TgZ(40,"li")(41,"button",32),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.handleSaveTemplate())}),e.O4$(),e.TgZ(42,"svg",33),e._UZ(43,"path",34)(44,"polyline",35)(45,"polyline",36),e.qZA(),e._uU(46),e.ALo(47,"mytranslate"),e.qZA()()()()()()(),e.kcU(),e.TgZ(48,"div",37)(49,"div",38),e.YNc(50,PE,7,3,"div",39),e.YNc(51,QE,3,3,"a",40),e.TgZ(52,"a",41),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.handleSaveTemplate())}),e._uU(53),e.ALo(54,"mytranslate"),e.qZA(),e.YNc(55,FE,3,3,"a",42),e.qZA()()(),e.TgZ(56,"div",43),e.YNc(57,NE,8,3,"div",44),e.qZA()(),e.TgZ(58,"div",45)(59,"div",46)(60,"div",47)(61,"div",48)(62,"div",49),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.handleClickTemplate("templateExample"))}),e.TgZ(63,"div",16),e._UZ(64,"img",17),e.ALo(65,"convertCdnLinkOfGitHub"),e.qZA(),e.TgZ(66,"h4"),e._uU(67,"Landing Teacher"),e.qZA()()()()(),e.TgZ(68,"div",50)(69,"div",51),e._UZ(70,"iframe",52),e.ALo(71,"safe"),e.qZA()()()()}if(2&n){const t=e.MAs(14),i=e.MAs(31),a=e.oxw();e.xp6(6),e.Oqu(e.lcZ(7,21,"lang_testbank_create_wibsite_Sampling")),e.xp6(4),e.Q6J("matMenuTriggerFor",t),e.xp6(1),e.hij(" ",e.lcZ(12,23,"lang_testbank_create_wibsite_Sampling")," "),e.xp6(5),e.Gre("template-item ","templateExample"==a.templateName?"previewed":"",""),e.xp6(2),e.Q6J("src",e.lcZ(19,25,"templates/templateExample/template_2_feature.png"),e.LSH),e.xp6(7),e.Q6J("matMenuTriggerFor",i),e.xp6(10),e.Q6J("ngIf",!a.isEditable),e.xp6(2),e.Q6J("ngIf",a.isEditable),e.xp6(9),e.hij(" ",e.lcZ(47,27,"lang_button_save")," "),e.xp6(4),e.Q6J("ngIf",a.isEditable),e.xp6(1),e.Q6J("ngIf",!a.isEditable),e.xp6(2),e.Oqu(e.lcZ(54,29,"lang_button_save")),e.xp6(2),e.Q6J("ngIf",a.isEditable),e.xp6(2),e.Q6J("ngIf",a.isEditable),e.xp6(5),e.Gre("template-item ","templateExample"==a.templateName?"previewed":"",""),e.xp6(2),e.Q6J("src",e.lcZ(65,31,"templates/templateExample/template_2_feature.png"),e.LSH),e.xp6(6),e.Q6J("src",e.lcZ(71,33,a.whiteListWebsiteTemplateIframeSrc),e.uOi)}}let DE=(()=>{class n extends xe.Q{handleClickTemplate(t){this.whiteListWebsiteTemplateIframeSrc="/assets/templates/"+t+"/index.html",this.templateName=t}handleCancelEdit(){this.isEditable=!1,window.location.reload()}handleRunScriptIframe(){this.isEditable=!0;const t=document.getElementById("websiteTemplateIframe"),i=t?t.contentWindow:null;i&&i.eval(`\n        // *** INSERT THE SCRIPT TAG TO HEAD ***\n        // ---------------------------------------\n        var scriptExist=document.getElementById('ladi');\n        if(!scriptExist){console.log('Script Exist');\n        var script=document.createElement('script');\n        var att=document.createAttribute('src');\n        var attId=document.createAttribute('id');\n        att.value='${this.cdnService.convertCdnLinkOfGitHub("templates/common/ladipage.v4.js")}';\n        attId.value='ladi'; script.setAttributeNode(att);\n        script.setAttributeNode(attId);\n\n        document.head.appendChild(script);}\n        `)}getWebsiteUrl(){this.initStatusObj(),this.waitDestroy(this.userSettingService.apiUserSettingGetMyDomainGet().subscribe(t=>{1==t.success?(t.data?.obj&&t.data?.obj.value?(this.websiteUrl=t.data.obj.value,this.websiteUrl=this.websiteUrl):this.websiteUrl=this.commonService.getLocalRouter(this.commonService.getCurrentDomain()+"/en/test/category/"+this.userService.getUserObj().id+"/0/1"),this.successStatusObj()):this.errorStatusObj(t.message??"",!0)}))}handleSaveTemplate(){const t=document.getElementById("websiteTemplateIframe"),i=t?t.contentWindow:null;if(i){i.eval("\n        // *** REMOVE LADI JS SCRIPT TAG ***\n        // ---------------------------------\n        const myScript = document.getElementById('ladi');\n        if(myScript){myScript.remove();}\n\n        // *** REMOVE INPUT FILE TAG  ***\n        // ------------------------------\n        var inputFiles = document.querySelectorAll('.tpl-input-file');\n        inputFiles.forEach(input=>{jQuery(input).unwrap(); input.remove();});\n\n        // *** REMOVE demo test iframe  ***\n        var demoTestIMG = document.getElementById('demo_test_iframe');\n        if(demoTestIMG){demoTestIMG.remove();}\n        \n        // *** CHANGE ALL CONTENTEDITABLE TO FALSE ***\n        // -------------------------------------------\n        var editables=document.querySelectorAll('[contentEditable=true]');\n        editables.forEach(e=>{e.setAttribute('contentEditable','false');});\n        "),this.isLoading=!0;var a=i.document.body.outerHTML;this.apiUploadService.commonUploadLadiPageFile(a,this.templateName,a.length).subscribe(r=>{r.type!=V.dt.UploadProgress&&(1==r.success&&r?.data?.url?this.userSettingService.apiUserSettingSaveMyDomainPost({path:r?.data?.url}).subscribe(s=>{1==s.success?this.commonService.myNavigation("/admin/testbank/create-website-result"):(this.isLoading=!1,this.showErrorSnack("lang_auto_luu_website_template_khong_thanh_cong"))}):(this.isLoading=!1,this.showErrorSnack("lang_auto_luu_website_template_khong_thanh_cong")))})}}ngOnInit(){(0,ne.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.backToLink="/admin/dashboard",this.getWebsiteUrl()}),this.commonService.translateMetaData({title:"lang_cms_test_create_website_title",description:"lang_cms_test_create_website_description",image:"lang_cms_test_image"}),super.ngOnInit()}constructor(t,i,a,r,s){super(),this.userSettingService=t,this.cdnService=i,this.activeRoute=a,this.userService=r,this.apiUploadService=s,this.isLoading=!1,this.isEditable=!1,this.templateName="templateExample",this.whiteListWebsiteTemplateIframeSrc="/assets/templates/"+this.templateName+"/index.html",this.websiteUrl="",this.backToLink=""}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(ps.fi),e.Y36(tr.E),e.Y36(E.gz),e.Y36(ya.U),e.Y36(Wr.W))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-create-website"]],features:[e.qOj],decls:4,vars:3,consts:[[3,"headerBackToLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],["doneLoading",""],[3,"currentStatusObj"],[1,"container-builder","container-fluid","mt-3","pb-mb-80"],[1,"grid","grid-cols-12","gap-3","button-row","justify-between","mb-4"],[1,"col-span-4",2,"align-self","center"],[1,"button-bar","mb-0"],[1,"azt-hidden","lg:block"],[1,"text-md","font-medium",2,"padding-top","10px","padding-left","10px"],[1,"block","xl:hidden"],[1,"text-md","font-medium"],[1,"btn","btn-secondary",3,"matMenuTriggerFor"],["choose","matMenu"],[1,"box","dialog-landing"],["azt-track-service","create-website-m7o0z0tNGZ",3,"click"],[1,"tpl-avatar"],["alt","",3,"src"],[1,"col-span-8","pt-0","pb-0","text-right","w-full"],[1,"flex","justify-end","sm:hidden"],[1,"button-bar","flex","justify-end"],[1,"btn","btn-outline-secondary",3,"matMenuTriggerFor"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-5","h-5","lucide"],["x1","4","y1","12","x2","20","y2","12"],["x1","4","y1","6","x2","20","y2","6"],["x1","4","y1","18","x2","20","y2","18"],["reorder","matMenu"],[1,"dropdown-menu","w-56","show","relative","p-3"],[1,"dropdown-content"],["azt-track-service","create-website-KcLlwJbhLJ","class","dropdown-item w-full",3,"click",4,"ngIf"],["azt-track-service","create-website-hPK4dUWUNk","class","dropdown-item w-full",3,"click",4,"ngIf"],[1,"dropdown-divider","border-slate-200","dark:border-darkmode-400"],["azt-track-service","create-website-kAw_1A0pwF",1,"dropdown-item","w-full",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide","mr-2"],["d","M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"],["points","17 21 17 13 7 13 7 21"],["points","7 3 7 8 15 8"],[1,"azt-hidden","sm:block"],[1,"button-bar","justify-end"],["class","alert alert-info mr-3 mb-0 items-center flex p-2",4,"ngIf"],["azt-track-service","create-website-5leCyaUy9M","class","btn btn-secondary mr-2 w-20",3,"click",4,"ngIf"],["azt-track-service","create-website-JeQ8h6dSA5",1,"btn","btn-primary","w-20",3,"click"],["azt-track-service","create-website-tA2OLuQh7rU","class","btn btn-secondary ml-2 w-20",3,"click",4,"ngIf"],[1,"col-span-12","block","sm:hidden"],["class","alert alert-info mr-1 mb-0 items-center flex text-left p-2",4,"ngIf"],[1,"grid","grid-cols-12","gap-3","content-row"],[1,"col-span-2","azt-hidden","lg:block"],[1,"list-template"],[1,"wrap-layer"],["azt-track-service","create-website-bnKcSD98XWU",3,"click"],[1,"col","col-span-12","sm:col-span-12","md:col-span-10"],[1,"wrap-layer","w-full"],["id","websiteTemplateIframe","frameborder","0",2,"width","100%","height","100%",3,"src"],["azt-track-service","create-website-KcLlwJbhLJ",1,"dropdown-item","w-full",3,"click"],["d","M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"],["d","M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"],["azt-track-service","create-website-hPK4dUWUNk",1,"dropdown-item","w-full",3,"click"],["d","M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],["points","14 2 14 8 20 8"],["x1","9.5","y1","12.5","x2","14.5","y2","17.5"],["x1","14.5","y1","12.5","x2","9.5","y2","17.5"],[1,"alert","alert-info","mr-3","mb-0","items-center","flex","p-2"],["cx","12","cy","12","r","10"],["x1","12","y1","16","x2","12","y2","12"],["x1","12","y1","8","x2","12.01","y2","8"],["azt-track-service","create-website-5leCyaUy9M",1,"btn","btn-secondary","mr-2","w-20",3,"click"],["azt-track-service","create-website-tA2OLuQh7rU",1,"btn","btn-secondary","ml-2","w-20",3,"click"],[1,"alert","alert-info","mr-1","mb-0","items-center","flex","text-left","p-2"]],template:function(t,i){if(1&t&&(e.TgZ(0,"teacher-layout",0),e.YNc(1,ME,1,1,"azt-loading-effect",1),e.YNc(2,ZE,72,35,"ng-template",null,2,e.W1O),e.qZA()),2&t){const a=e.MAs(3);e.Q6J("headerBackToLink","/admin/dashboard"),e.xp6(1),e.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a)}},dependencies:[F.O5,Qi.VK,Qi.p6,vi.l,wo._,ye.JV,ye.CR,ye.Bo],styles:[".container-builder[_ngcontent-%COMP%]{height:calc(100vh - 72px);overflow:hidden;display:flex;flex-direction:column}.container-builder[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-2[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:15px;height:38px;display:flex;justify-content:center;align-items:center}.container-builder[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]   .col-content[_ngcontent-%COMP%]{background:white;padding:15px;flex:auto;border:1px solid #ececec;border-radius:3px}.container-builder[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   #websiteTemplateIframe[_ngcontent-%COMP%]{width:100%;height:100%;overflow:hidden}.container-builder[_ngcontent-%COMP%]   .content-row[_ngcontent-%COMP%]{flex:auto;overflow:hidden}.container-builder[_ngcontent-%COMP%]   .content-row[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]   .wrap-layer[_ngcontent-%COMP%]{width:100%;height:100%;background-color:#fff;padding:15px;border:1px solid #ccc;border-radius:3px}.container-builder[_ngcontent-%COMP%]   .content-row[_ngcontent-%COMP%]   .col.list-template[_ngcontent-%COMP%]{padding-right:0}.container-builder[_ngcontent-%COMP%]   .content-row[_ngcontent-%COMP%]   .col.list-template[_ngcontent-%COMP%]   .wrap-layer[_ngcontent-%COMP%]{overflow-y:auto}.container-builder[_ngcontent-%COMP%]   .list-template[_ngcontent-%COMP%]{height:100%}.button-bar[_ngcontent-%COMP%]{display:flex;align-items:center}.button-bar[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{flex:auto;margin-bottom:0;text-align:center}.template-item[_ngcontent-%COMP%]:hover{cursor:pointer}.template-item[_ngcontent-%COMP%]:hover   .tpl-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:scale(1.2)}.template-item[_ngcontent-%COMP%]   .tpl-avatar[_ngcontent-%COMP%]{width:100%;height:0;padding-top:66.6666666667%;position:relative;overflow:hidden}.template-item[_ngcontent-%COMP%]   .tpl-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;height:auto;width:100%;top:0;left:0;transition:all .5s}.template-item[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-weight:500;margin-top:3px}[_ngcontent-%COMP%]::-webkit-scrollbar{width:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#fff}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#999999;border-radius:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#414141}.dialog-landing[_ngcontent-%COMP%]{width:280px;padding:20px}"]}),n})();var jx=I(6050),t_=I(63278),n_=function(n){return n[n.ADD_FOLDER=0]="ADD_FOLDER",n[n.EDIT_FOLDER=1]="EDIT_FOLDER",n}(n_||{}),UE=I(45123),jE=I(72428),Ug=I(23433),Wv=I(96685),Xv=I(49042);function qE(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_cms_utils_folder_name_validate_255")," "))}function RE(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_cms_utils_folder_name_required")," "))}function zE(n,o){if(1&n&&(e.TgZ(0,"div",9),e.YNc(1,qE,3,3,"span",10),e.YNc(2,RE,3,3,"span",10),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.form.controls.folderName.errors.maxLength),e.xp6(1),e.Q6J("ngIf",t.form.controls.folderName.errors.noWhiteSpace)}}function HE(n,o){1&n&&(e.O4$(),e.TgZ(0,"svg",11)(1,"g",12)(2,"g",13)(3,"circle",14),e._UZ(4,"animate",15),e.qZA(),e.TgZ(5,"circle",16),e._UZ(6,"animate",17),e.qZA(),e.TgZ(7,"circle",18),e._UZ(8,"animate",19),e.qZA(),e.TgZ(9,"circle",20),e._UZ(10,"animate",21),e.qZA(),e.TgZ(11,"circle",22),e._UZ(12,"animate",23),e.qZA(),e.TgZ(13,"circle",24),e._UZ(14,"animate",25),e.qZA(),e.TgZ(15,"circle",26),e._UZ(16,"animate",27),e.qZA(),e.TgZ(17,"circle",28),e._UZ(18,"animate",29),e.qZA()()()())}let JE=(()=>{class n extends xe.Q{confirmAction(){this.initStatusObj();var t=this.form.getRawValue();this.form.valid&&1==this.data.type&&this.waitDestroy(this.examCategoryService.apiExamCategorySaveObjPost({name:t.folderName,parentId:this.data.categoryId??0}).subscribe(a=>{1==a.success?(this.emitClose.emit(!0),this.successStatusObj("lang_cms_utils_create_folder_success",!0)):(this.emitClose.emit(!1),this.errorStatusObj(a.message??"",!0))}))}ngOnInit(){super.ngOnInit()}constructor(t){super(),this.examCategoryService=t,this.emitClose=new e.vpe,this.form=new h.cw({folderName:new h.NI("",{nonNullable:!0,validators:[h.kI.required,h.kI.maxLength(255),Da._.noWhiteSpace]})})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Wv.F))},n.\u0275cmp=e.Xpm({type:n,selectors:[["form-enter-name-folder"]],inputs:{data:"data"},outputs:{emitClose:"emitClose"},features:[e.qOj],decls:14,vars:13,consts:[[3,"formGroup"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-3"],["type","text","formControlName","folderName",1,"form-control",3,"placeholder","enterKey"],["class","text-danger text-xs fade mt-2",4,"ngIf"],[1,"p-3","text-right"],["azt-track-service","create-folder-dialog-o4xZcHZdWw",1,"btn","btn-secondary","w-24","mr-2",3,"click"],["azt-track-service","create-folder-dialog-mbrsr9XCgZ",1,"btn","w-24","btn-primary",3,"disabled","click"],["width","20","viewBox","0 0 58 58","xmlns","http://www.w3.org/2000/svg","class","w-4 h-4 ml-2",4,"ngIf"],[1,"text-danger","text-xs","fade","mt-2"],[4,"ngIf"],["width","20","viewBox","0 0 58 58","xmlns","http://www.w3.org/2000/svg",1,"w-4","h-4","ml-2"],["fill","none","fill-rule","evenodd"],["transform","translate(2 1)","stroke","white","stroke-width","1.5"],["cx","42.601","cy","11.462","r","5","fill-opacity","1","fill","white"],["attributeName","fill-opacity","begin","0s","dur","1.3s","values","1;0;0;0;0;0;0;0","calcMode","linear","repeatCount","indefinite"],["cx","49.063","cy","27.063","r","5","fill-opacity","0","fill","white"],["attributeName","fill-opacity","begin","0s","dur","1.3s","values","0;1;0;0;0;0;0;0","calcMode","linear","repeatCount","indefinite"],["cx","42.601","cy","42.663","r","5","fill-opacity","0","fill","white"],["attributeName","fill-opacity","begin","0s","dur","1.3s","values","0;0;1;0;0;0;0;0","calcMode","linear","repeatCount","indefinite"],["cx","27","cy","49.125","r","5","fill-opacity","0","fill","white"],["attributeName","fill-opacity","begin","0s","dur","1.3s","values","0;0;0;1;0;0;0;0","calcMode","linear","repeatCount","indefinite"],["cx","11.399","cy","42.663","r","5","fill-opacity","0","fill","white"],["attributeName","fill-opacity","begin","0s","dur","1.3s","values","0;0;0;0;1;0;0;0","calcMode","linear","repeatCount","indefinite"],["cx","4.938","cy","27.063","r","5","fill-opacity","0","fill","white"],["attributeName","fill-opacity","begin","0s","dur","1.3s","values","0;0;0;0;0;1;0;0","calcMode","linear","repeatCount","indefinite"],["cx","11.399","cy","11.462","r","5","fill-opacity","0","fill","white"],["attributeName","fill-opacity","begin","0s","dur","1.3s","values","0;0;0;0;0;0;1;0","calcMode","linear","repeatCount","indefinite"],["cx","27","cy","5","r","5","fill-opacity","0","fill","white"],["attributeName","fill-opacity","begin","0s","dur","1.3s","values","0;0;0;0;0;0;0;1","calcMode","linear","repeatCount","indefinite"]],template:function(t,i){1&t&&(e.TgZ(0,"form",0)(1,"div",1)(2,"div",2)(3,"input",3),e.NdJ("enterKey",function(){return i.confirmAction()}),e.ALo(4,"mytranslate"),e.qZA(),e.YNc(5,zE,3,2,"div",4),e.qZA()(),e.TgZ(6,"div",5)(7,"button",6),e.NdJ("click",function(){return i.emitClose.emit(!1)}),e._uU(8),e.ALo(9,"mytranslate"),e.qZA(),e.TgZ(10,"button",7),e.NdJ("click",function(){return i.confirmAction()}),e.YNc(11,HE,19,0,"svg",8),e._uU(12),e.ALo(13,"mytranslate"),e.qZA()()()),2&t&&(e.Q6J("formGroup",i.form),e.xp6(3),e.s9C("placeholder",e.lcZ(4,7,"lang_cms_utils_folder_name")),e.xp6(2),e.Q6J("ngIf",i.form.controls.folderName.errors&&i.form.controls.folderName.dirty),e.xp6(3),e.hij(" ",e.lcZ(9,9,"lang_auto_huy")," "),e.xp6(2),e.Q6J("disabled",i.statusObj.loading||i.form.invalid),e.xp6(1),e.Q6J("ngIf",i.statusObj.loading),e.xp6(1),e.hij(" ",e.lcZ(13,11,"lang_auto_luu")," "))},dependencies:[F.O5,h._Y,h.Fj,h.JJ,h.JL,h.sg,h.u,wt.M,Xv.Y,ye.JV],encapsulation:2}),n})();var zs=I(93523);const KE=["fileSelect"],GE=function(n){return[n]};function YE(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",13)(1,"azt-upload-single-document-to-editor",14),e.NdJ("emitFiles",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.handleUploadComplete(a))}),e.TgZ(2,"div",15)(3,"div",16)(4,"span",17),e._UZ(5,"lucide-icon",18),e.qZA(),e.TgZ(6,"span",19),e._uU(7),e.ALo(8,"mytranslate"),e.qZA(),e._uU(9),e.ALo(10,"mytranslate"),e.qZA()()()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("fileType",e.VKq(7,GE,t.allUploadFileTypes.EXCEL)),e.xp6(6),e.hij(" ",e.lcZ(8,3,"lang_auto_keo_tha_file_excel")," "),e.xp6(2),e.hij(" ",e.lcZ(10,5,"lang_auto_hoc_click_de_chon_file")," ")}}function $E(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",20)(1,"div",21)(2,"div",22)(3,"div",23)(4,"div",24)(5,"div",25),e._UZ(6,"img",26),e.ALo(7,"convertCdnLinkOfGitHub"),e.qZA(),e.TgZ(8,"div",27)(9,"p",28,29),e._uU(11),e.qZA(),e.TgZ(12,"div",30),e._uU(13),e.qZA()(),e.TgZ(14,"div",31)(15,"button",32),e.NdJ("click",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.removeFile(a))}),e.ALo(16,"mytranslate"),e.TgZ(17,"span",33),e._UZ(18,"lucide-icon",34),e.qZA()()()()()()()()}if(2&n){const t=e.MAs(10),i=e.oxw();e.xp6(6),e.Q6J("src",e.lcZ(7,7,"images/excel.png"),e.LSH),e.xp6(3),e.s9C("matTooltip",null==i.file?null:i.file.name),e.Q6J("isDisabledTooltip",!1)("matTooltipDisabled",t.isDisabled),e.xp6(2),e.hij(" ",i.file?i.file.name:""," "),e.xp6(2),e.hij(" ",i.fileMb+"mb"," "),e.xp6(2),e.s9C("matTooltip",e.lcZ(16,9,"lang_auto_xoa"))}}function VE(n,o){1&n&&(e.O4$(),e.TgZ(0,"svg",35)(1,"g",36)(2,"g",37)(3,"circle",38),e._UZ(4,"animate",39),e.qZA(),e.TgZ(5,"circle",40),e._UZ(6,"animate",41),e.qZA(),e.TgZ(7,"circle",42),e._UZ(8,"animate",43),e.qZA(),e.TgZ(9,"circle",44),e._UZ(10,"animate",45),e.qZA(),e.TgZ(11,"circle",46),e._UZ(12,"animate",47),e.qZA(),e.TgZ(13,"circle",48),e._UZ(14,"animate",49),e.qZA(),e.TgZ(15,"circle",50),e._UZ(16,"animate",51),e.qZA(),e.TgZ(17,"circle",52),e._UZ(18,"animate",53),e.qZA()()()())}let WE=(()=>{class n extends xe.Q{handleUploadComplete(t){this.file=t,this.fileMb=this.getFileMB(this.file?.size??0)}getFileMB(t){return t&&t>0?(t/=1048576).toFixed(2):0}removeFile(t){t.stopPropagation(),this.fileSelect&&(this.fileSelect.nativeElement.value=null),this.file=null}getDownloadFileName(){return this.commonService.createFileNameExportFile(["azt-folder-levels",this.data.categoryId?.toString()??""])+".xlsx"}saveFileFolderExcel(){null!=this.file&&this.waitDestroy(this.examCategoryService.apiExamCategoryImportPostForm(this.data.categoryId??0,this.file).subscribe(t=>{1==t.success?(this.emitClose.emit(!0),this.successStatusObj("lang_cms_utils_create_folder_success",!0)):(this.emitClose.emit(!1),this.errorStatusObj(t.message??"",!0))}))}ngOnInit(){super.ngOnInit()}constructor(t){super(),this.examCategoryService=t,this.emitClose=new e.vpe,this.allUploadFileTypes=_m.AZ,this.fileMb=0,this.file=null}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Wv.F))},n.\u0275cmp=e.Xpm({type:n,selectors:[["export-excel-folder-level"]],viewQuery:function(t,i){if(1&t&&e.Gf(KE,5),2&t){let a;e.iGM(a=e.CRH())&&(i.fileSelect=a.first)}},inputs:{data:"data"},outputs:{emitClose:"emitClose"},features:[e.qOj],decls:21,vars:17,consts:[[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-3"],["class","w-full mt-3 xl:mt-0 flex-1 border-2 border-dashed dark:border-darkmode-400 rounded-md",4,"ngIf","ngIfElse"],["exitsFile",""],[1,"mt-2","text-center"],["azt-track-service","upload-excel-folder-jgjFF4dw5","target","_self",1,"btn","text-primary","btn-transparent",3,"href","download"],[1,"w-5","h-5","mr-2","inline-block"],["name","download-cloud"],[1,"text-primary"],[1,"p-3","text-right"],["azt-track-service","create-folder-dialog-o4xZcHZdWw",1,"btn","btn-secondary","w-24","mr-2",3,"click"],["azt-track-service","create-folder-dialog-mbrsr9XCgZ",1,"btn","w-24","btn-primary",3,"disabled","click"],["width","20","viewBox","0 0 58 58","xmlns","http://www.w3.org/2000/svg","class","w-4 h-4 ml-2",4,"ngIf"],[1,"w-full","mt-3","xl:mt-0","flex-1","border-2","border-dashed","dark:border-darkmode-400","rounded-md"],[3,"fileType","emitFiles"],[1,"px-4","pb-8","mt-8","flex","items-center","justify-center","text-center","cursor-pointer","relative"],[1,"flex","items-center"],[1,"w-5","h-5","mr-2","text-success","inline-block"],["name","file-spreadsheet"],[1,"text-primary","mr-1"],[1,"attack-file","mt-5"],[1,"grid","grid-cols-12","gap-3","mt-3"],[1,"col-span-12"],[1,"border","flex","border-slate-200/60","dark:border-darkmode-400","rounded-md","p-3"],[1,"flex","w-full","items-center"],[1,"w-12","h-12","image-fit","lg:mr-1","flex-none"],["alt","excel icon",1,"img-fluid",3,"src"],[1,"ml-2","mt-0",2,"width","calc(100% - 100px)"],[1,"font-medium","truncate",3,"matTooltip","isDisabledTooltip","matTooltipDisabled"],["c","isDisabled"],[1,"text-slate-500","text-xs"],[1,"ml-auto","mt-0","flex-none"],["azt-track-service","azt-automatic-identification-nCXCf-x_kx",1,"btn","btn-outline-danger","btn-transparent",3,"matTooltip","click"],[1,"w-4","h-4","inline-block"],["name","trash-2"],["width","20","viewBox","0 0 58 58","xmlns","http://www.w3.org/2000/svg",1,"w-4","h-4","ml-2"],["fill","none","fill-rule","evenodd"],["transform","translate(2 1)","stroke","white","stroke-width","1.5"],["cx","42.601","cy","11.462","r","5","fill-opacity","1","fill","white"],["attributeName","fill-opacity","begin","0s","dur","1.3s","values","1;0;0;0;0;0;0;0","calcMode","linear","repeatCount","indefinite"],["cx","49.063","cy","27.063","r","5","fill-opacity","0","fill","white"],["attributeName","fill-opacity","begin","0s","dur","1.3s","values","0;1;0;0;0;0;0;0","calcMode","linear","repeatCount","indefinite"],["cx","42.601","cy","42.663","r","5","fill-opacity","0","fill","white"],["attributeName","fill-opacity","begin","0s","dur","1.3s","values","0;0;1;0;0;0;0;0","calcMode","linear","repeatCount","indefinite"],["cx","27","cy","49.125","r","5","fill-opacity","0","fill","white"],["attributeName","fill-opacity","begin","0s","dur","1.3s","values","0;0;0;1;0;0;0;0","calcMode","linear","repeatCount","indefinite"],["cx","11.399","cy","42.663","r","5","fill-opacity","0","fill","white"],["attributeName","fill-opacity","begin","0s","dur","1.3s","values","0;0;0;0;1;0;0;0","calcMode","linear","repeatCount","indefinite"],["cx","4.938","cy","27.063","r","5","fill-opacity","0","fill","white"],["attributeName","fill-opacity","begin","0s","dur","1.3s","values","0;0;0;0;0;1;0;0","calcMode","linear","repeatCount","indefinite"],["cx","11.399","cy","11.462","r","5","fill-opacity","0","fill","white"],["attributeName","fill-opacity","begin","0s","dur","1.3s","values","0;0;0;0;0;0;1;0","calcMode","linear","repeatCount","indefinite"],["cx","27","cy","5","r","5","fill-opacity","0","fill","white"],["attributeName","fill-opacity","begin","0s","dur","1.3s","values","0;0;0;0;0;0;0;1","calcMode","linear","repeatCount","indefinite"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,YE,11,9,"div",2),e.YNc(3,$E,19,11,"ng-template",null,3,e.W1O),e.qZA(),e.TgZ(5,"div",4)(6,"a",5),e.ALo(7,"convertRawLinkOfGitHubWithLocale"),e.TgZ(8,"span",6),e._UZ(9,"lucide-icon",7),e.qZA(),e.TgZ(10,"span",8),e._uU(11),e.ALo(12,"mytranslate"),e.qZA()()()(),e.TgZ(13,"div",9)(14,"button",10),e.NdJ("click",function(){return i.emitClose.emit(!1)}),e._uU(15),e.ALo(16,"mytranslate"),e.qZA(),e.TgZ(17,"button",11),e.NdJ("click",function(){return i.saveFileFolderExcel()}),e.YNc(18,VE,19,0,"svg",12),e._uU(19),e.ALo(20,"mytranslate"),e.qZA()()),2&t){const a=e.MAs(4);e.xp6(2),e.Q6J("ngIf",!i.file)("ngIfElse",a),e.xp6(4),e.s9C("href",e.lcZ(7,9,"medias_[LANG]/excel-create-folder-sample.xlsx?raw=true"),e.LSH),e.s9C("download",i.getDownloadFileName()),e.xp6(5),e.hij(" ",e.lcZ(12,11,"lang_student_utils_download_file")," "),e.xp6(4),e.hij(" ",e.lcZ(16,13,"lang_auto_huy")," "),e.xp6(2),e.Q6J("disabled",i.statusObj.loading||!i.file),e.xp6(1),e.Q6J("ngIf",i.statusObj.loading),e.xp6(1),e.hij(" ",e.lcZ(20,15,"lang_auto_luu")," ")}},dependencies:[F.O5,Ai.gM,zs.Q,Vv.K,_.Nh5,ye.JV,ye.Bo,ye.jw],encapsulation:2}),n})();function XE(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"form-enter-name-folder",5),e.NdJ("emitClose",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.btnCloseDialog(a))}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("data",t.data)}}function eO(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"export-excel-folder-level",5),e.NdJ("emitClose",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.btnCloseDialog(a))}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("data",t.data)}}let tO=(()=>{class n extends mt.e{selectedIndexChange(t){this.selected.setValue(t)}btnCloseDialog(t){this.dialogRef.close(t||!1)}ngOnInit(){super.ngOnInit()}constructor(t,i){super(i,t),this.dialogRef=t,this.data=i,this.selected=new h.NI(0,{nonNullable:!0})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(U.so,8),e.Y36(U.WI))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-create-folder"]],features:[e.qOj],decls:9,vars:9,consts:[[1,"box"],[3,"selectedIndex","selectedIndexChange"],[3,"label"],[1,"mt-2"],[4,"ngIf"],[3,"data","emitClose"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"mat-tab-group",1),e.NdJ("selectedIndexChange",function(r){return i.selectedIndexChange(r)}),e._UZ(2,"mat-tab",2),e.ALo(3,"mytranslate"),e._UZ(4,"mat-tab",2),e.ALo(5,"mytranslate"),e.qZA(),e.TgZ(6,"div",3),e.YNc(7,XE,2,1,"div",4),e.YNc(8,eO,2,1,"div",4),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("selectedIndex",i.selected.value),e.xp6(1),e.s9C("label",e.lcZ(3,5,"lang_cms_utils_create_folder")),e.xp6(2),e.s9C("label",e.lcZ(5,7,"lang_student_utils_quick_add_excel")),e.xp6(3),e.Q6J("ngIf",0==i.selected.value),e.xp6(1),e.Q6J("ngIf",1==i.selected.value))},dependencies:[F.O5,hu.uX,hu.SP,JE,WE,ye.JV],encapsulation:2}),n})();function nO(n,o){1&n&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_cms_utils_folder_name_validate_255")," "))}function iO(n,o){1&n&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_cms_utils_folder_name_required")," "))}function oO(n,o){if(1&n&&(e.TgZ(0,"div",12),e.YNc(1,nO,3,3,"div",13),e.YNc(2,iO,3,3,"div",13),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.form.controls.folderName.errors.maxlength),e.xp6(1),e.Q6J("ngIf",t.form.controls.folderName.errors.noWhiteSpace)}}function aO(n,o){1&n&&(e.TgZ(0,"span",14),e._UZ(1,"azt-loading-ui"),e.qZA())}let rO=(()=>{class n extends mt.e{confirmAction(){var t=this.form.getRawValue();this.initStatusObj(),this.form.valid&&1==this.data.type&&this.waitDestroy(this.examCategoryService.apiExamCategoryUpdateObjPost({id:this.data.obj?.id,name:t.folderName,parentId:0}).subscribe(a=>{1==a.success?(this.btnCloseDialog(!0),this.successStatusObj("lang_cms_utils_update_folder_success",!0)):(this.btnCloseDialog(!1),this.errorStatusObj(a.message??"",!0))}))}btnCloseDialog(t){this.dialogRef.close(t)}ngOnInit(){this.data.obj&&(this.form=new h.cw({folderName:new h.NI(this.data.obj.name,{nonNullable:!0,validators:[h.kI.required,Da._.noWhiteSpace]})})),super.ngOnInit()}constructor(t,i,a){super(a,i),this.examCategoryService=t,this.dialogRef=i,this.data=a,this.typeString="",this.type=0,this.form=new h.cw({folderName:new h.NI("",{nonNullable:!0,validators:[h.kI.required,Da._.noWhiteSpace]})})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(un.F1),e.Y36(U.so,8),e.Y36(U.WI,8))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-update-folder"]],features:[e.qOj],decls:20,vars:16,consts:[[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-body","p-3"],[1,"intro"],[1,"text-base","font-medium","mr-auto"],[1,"form-horizontal","text-center",3,"formGroup"],["type","text","formControlName","folderName",1,"form-control","mt-2",3,"placeholder"],["class","alert alert-danger",4,"ngIf"],[1,"flex","justify-end","mt-3"],["azt-track-service","update-folder-dialog--iPi41TKU",1,"btn","w-20","btn-secondary","mr-2",3,"click"],["azt-track-service","update-folder-dialog-84k7o8Ic_c",1,"btn","btn-primary",3,"disabled","click"],["class","w-4 h-4 inline-block mr-2",4,"ngIf"],[1,"alert","alert-danger"],[4,"ngIf"],[1,"w-4","h-4","inline-block","mr-2"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()(),e.TgZ(7,"div",3)(8,"form",5),e._UZ(9,"input",6),e.ALo(10,"mytranslate"),e.YNc(11,oO,3,2,"div",7),e.qZA()(),e.TgZ(12,"div",8)(13,"button",9),e.NdJ("click",function(){return i.btnCloseDialog(!1)}),e._uU(14),e.ALo(15,"mytranslate"),e.qZA(),e.TgZ(16,"button",10),e.NdJ("click",function(){return i.confirmAction()}),e.YNc(17,aO,2,0,"span",11),e._uU(18),e.ALo(19,"mytranslate"),e.qZA()()()()()),2&t&&(e.xp6(5),e.Oqu(e.lcZ(6,8,"lang_cms_utils_update_folder")),e.xp6(3),e.Q6J("formGroup",i.form),e.xp6(1),e.s9C("placeholder",e.lcZ(10,10,"lang_cms_utils_folder_name")),e.xp6(2),e.Q6J("ngIf",i.form.controls.folderName.errors&&i.form.controls.folderName.dirty),e.xp6(3),e.hij(" ",e.lcZ(15,12,"lang_cms_common_close_btn")," "),e.xp6(2),e.Q6J("disabled",i.statusObj.loading||i.form.invalid),e.xp6(1),e.Q6J("ngIf",i.statusObj.loading),e.xp6(1),e.hij(" ",e.lcZ(19,14,"lang_cms_common_confirm_btn")," "))},dependencies:[F.O5,h._Y,h.Fj,h.JJ,h.JL,h.sg,h.u,wt.M,wi.n,ye.JV],encapsulation:2}),n})(),sO=(()=>{class n{doExamCategoryAction(t,i){switch(i){case n_.ADD_FOLDER:return this.showAddFolderDialog(t);case n_.EDIT_FOLDER:return this.showEditFolderDialog(t)}}showAddFolderDialog(t){return new ee.y(i=>{this.sAztDialogService.open(tO,{width:"600px",enterAnimationDuration:"0ms",exitAnimationDuration:"0ms",data:{categoryId:t.categoryId,type:1,isShow:!0},restoreFocus:!1}).afterClosed().subscribe(s=>{s?(i.next({reloadData:!0}),i.complete()):(i.next({reloadData:!1}),i.complete())})})}showEditFolderDialog(t){return new ee.y(i=>{t.examCategoryObj?this.sAztDialogService.open(rO,{data:{obj:t.examCategoryObj,categoryId:0,type:1,isShow:!0},restoreFocus:!1,width:"550px"}).afterClosed().subscribe(s=>{s?(i.next({reloadData:!0}),i.complete()):(i.next({reloadData:!1}),i.complete())}):(i.next({reloadData:!1}),i.complete())})}constructor(t){this.sAztDialogService=t}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(qi.C))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var qx=I(83306),Xp=I(23655);function lO(n,o){1&n&&(e.TgZ(0,"div"),e.Hsn(1),e.qZA())}const cO=["*"];let uO=(()=>{class n extends xe.Q{checkPermissionCallApi(){this.waitDestroy(this.testMarketQuestionService.apiTestMarketQuestionsPermissionGet(this.applyType).subscribe(t=>{1==t.success?(this.hasPermission=t.data?.obj??!1,this.successStatusObj()):this.errorStatusObj(t.message??"")}))}ngOnInit(){this.checkPermissionCallApi()}constructor(t){super(),this.testMarketQuestionService=t,this.applyType="",this.hasPermission=!1}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Xp.Q_))},n.\u0275cmp=e.Xpm({type:n,selectors:[["azt-permission-checking"]],inputs:{applyType:"applyType"},features:[e.qOj],ngContentSelectors:cO,decls:1,vars:1,consts:[[4,"ngIf"]],template:function(t,i){1&t&&(e.F$t(),e.YNc(0,lO,2,0,"div",0)),2&t&&e.Q6J("ngIf",i.hasPermission)},dependencies:[F.O5],encapsulation:2}),n})();var gm=I(25368),xl=I(31225),qo=I(94145),dO=I(20760),xm=I(31810),mO=I(25690),ew=I(55948),pO=I(16007);function hO(n,o){if(1&n&&e._UZ(0,"mat-progress-bar",8),2&n){const t=e.oxw();e.Q6J("value",100*(t.totalDocumentObjs>0?t.totalSavedObjs/t.totalDocumentObjs:0))("bufferValue",100)}}let AO=(()=>{class n extends mt.e{askBeforeCloseWindow(t){return!this.onProcessCopy||(t.returnValue=!1)}confirmDialog(t,i,a,r){this.sAztDialogService.open(Lg,{width:a,data:{title:t,msg:i},restoreFocus:!1}).afterClosed().subscribe(l=>{r(!0===l)})}onNoClick(){this.stopProcess=!0,this.confirmDialog("lang_auto_huy_copy","lang_auto_ban_co_chac_chan_muon_huy_tien_trinh_copy_khong","400px",t=>{t?this.closeDialog(!0):(this.stopProcess=!1,this.closeDialog(!1))})}closeDialog(t){t&&(this.onProcessCopy=!1,this.dialogRef.close(t))}getDocumentToCopy(){this.stopProcess=!1,this.onProcessCopy=!0,this.totalSavedObjs=0,this.totalDocumentObjs=0;let t=this.clipboardService.getCurrentClipBoard();var i=[],a=[];t.forEach(r=>{r.action==xl.h.COPY&&(r.type==qo.Y.EXAM_CATEGORY?i.push({fromCategoryId:r.id??0,fromCategoryName:r.name??"",fromCategoryObjs:void 0,fromDocumentObjs:void 0,parentOfNewCategoryId:this.data.copyToCateId??0,toNewCategoryId:void 0}):a.push(r))}),a.length>0&&i.push({fromCategoryId:0,fromCategoryName:"",fromCategoryObjs:[],fromDocumentObjs:a,parentOfNewCategoryId:0,toNewCategoryId:this.data.copyToCateId??0}),i.length>0?this._copyChildCategoryObjs(!0,this.commonService.myClone(i),0,{},r=>{r?(this.showErrorSnack(r),this.closeDialog(!1)):this._copyChildCategoryObjs(!1,this.commonService.myClone(i),0,{},s=>{s?(this.showErrorSnack(s),this.closeDialog(!1)):this.closeDialog(!0)})}):this.closeDialog(!1)}_copyOneCategoryObj(t,i,a,r){if(null==i.toNewCategoryId)t?(i.toNewCategoryId=0,this._copyOneCategoryObj(t,i,a,r)):this._createNewFolderOnNewCate(i,(l,c)=>{c?r(this.commonService.translateToKeyParam(c," "+i.fromCategoryName)):(a[l]=1,i.toNewCategoryId=l,this._copyOneCategoryObj(t,i,a,r))});else if(null==i.fromCategoryObjs)this._getDocumentOfChildFolder(a,i,(l,c,u)=>{u?r(this.commonService.translateToKeyParam(u," "+i.fromCategoryName)):(i.fromCategoryObjs=l,i.fromDocumentObjs=c,this._copyOneCategoryObj(t,i,a,r))});else if(i.fromDocumentObjs&&i.fromDocumentObjs.length>0)if(t)this.totalDocumentObjs+=i.fromDocumentObjs?.length??0,i.fromDocumentObjs=[],this._copyOneCategoryObj(t,i,a,r);else{var s=[];i.fromDocumentObjs.forEach(l=>{s.push({id:l.id,type:l.type,action:l.action})}),this._callSaveCopyDocument(i.toNewCategoryId,s,0,10,l=>{i.fromDocumentObjs=[],this._copyOneCategoryObj(t,i,a,r)})}else i.fromCategoryObjs.length>0?this._copyChildCategoryObjs(t,i.fromCategoryObjs,0,a,r):r(void 0)}_copyChildCategoryObjs(t,i,a=0,r,s){this.onProcessCopy&&i.length>a?this._copyOneCategoryObj(t,i[a],r,l=>{l?s(l):setTimeout(()=>{this._copyChildCategoryObjs(t,i,a+1,r,s)},100)}):s(void 0)}_getDocumentOfChildFolder(t,i,a){var r=function(s,l){let c=s?.categoryObjs??[],u=s?.documentObjs??[],m=[],p=[];c.forEach(f=>{t.hasOwnProperty(f.id??0)||m.push({fromCategoryId:f.id??0,fromCategoryName:f.name??"",fromCategoryObjs:void 0,fromDocumentObjs:void 0,parentOfNewCategoryId:i.toNewCategoryId??0,toNewCategoryId:void 0})}),u.forEach(f=>{f.exam&&p.push({id:f.exam.id??0,name:f.exam.name??"",type:qo.Y.EXAM,action:xl.h.COPY})}),l(m,p,void 0)};if(this.cacheApiResponseByCategoryIds.hasOwnProperty(i.fromCategoryId))r(this.cacheApiResponseByCategoryIds[i.fromCategoryId],a);else{let s={categoryId:i.fromCategoryId,documentType:void 0,shareType:void 0,fileType:void 0,classroomId:void 0,name:void 0,suggestExamPurpose:void 0,lite:1,getGlobal:0,page:1,itemPerPage:-1};this.documentService.apiDocumentsGet(s.categoryId,s.documentType,s.shareType,s.fileType,s.classroomId,s.name,s.suggestExamPurpose,s.lite,s.getGlobal,s.page,s.itemPerPage).subscribe(l=>{l&&1==l.success?(this.cacheApiResponseByCategoryIds[i.fromCategoryId]=l.data,r(l.data,a)):a([],[],l.message??"lang_cms_error_to_get_folder_data")})}}_createNewFolderOnNewCate(t,i){this.waitDestroy(this.examCategoryService.apiExamCategorySaveObjPost({name:t.fromCategoryName,parentId:t.parentOfNewCategoryId}).subscribe(r=>{1==r.success?i(r.data?.obj?.id??0,r.data?.obj?.id?void 0:"lang_cms_error_to_create_folder"):i(0,r.message)}))}_callSaveCopyDocument(t,i,a,r=10,s){if(this.stopProcess)this.onProcessCopy?setTimeout(()=>{this._callSaveCopyDocument(t,i,a,r,s)},100):s(void 0);else if(this.onProcessCopy){var l=i.slice(a,a+r);l.length>0?this.waitDestroy(this.examCategoryService.apiExamCategoryCopyOrCutOrDeletePost(t,{copyOrCutObjs:l}).subscribe(c=>{c&&1==c.success?(a+=l.length,this.totalSavedObjs+=l.length,setTimeout(()=>{this._callSaveCopyDocument(t,i,a,r,s)},100)):s(c.message)})):s(void 0)}else s(void 0)}ngOnInit(){this.getDocumentToCopy(),this.dialogRef.backdropClick().subscribe(t=>{this.onNoClick()})}constructor(t,i,a,r,s,l){super(l,s),this.examCategoryService=t,this.clipboardService=i,this.documentService=a,this.sAztDialogService=r,this.dialogRef=s,this.data=l,this.onProcessCopy=!0,this.stopProcess=!1,this.totalSavedObjs=0,this.totalDocumentObjs=0,this.cacheApiResponseByCategoryIds={}}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(un.F1),e.Y36(ew.e),e.Y36(un.Zg),e.Y36(qi.C),e.Y36(U.so),e.Y36(U.WI))},n.\u0275cmp=e.Xpm({type:n,selectors:[["copy-folder-dialog"]],hostBindings:function(t,i){1&t&&e.NdJ("beforeunload",function(r){return i.askBeforeCloseWindow(r)},!1,e.Jf7)},features:[e.qOj],decls:13,vars:10,consts:[[1,"box",2,"max-width","500px"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5"],[1,"text-md","font-medium","flex","items-center"],[1,"mt-3"],["mode","determinate",3,"value","bufferValue",4,"ngIf"],[1,"p-3","text-right"],["azt-track-service","copy-folder-dialog-IxIj_JqXunF",1,"btn","btn-secondary","w-24","mr-2",3,"click"],["mode","determinate",3,"value","bufferValue"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),e._uU(4),e.ALo(5,"mytranslate"),e.ALo(6,"mytranslate"),e.qZA(),e.TgZ(7,"div",4),e.YNc(8,hO,1,2,"mat-progress-bar",5),e.qZA()()(),e.TgZ(9,"div",6)(10,"button",7),e.NdJ("click",function(){return i.onNoClick()}),e._uU(11),e.ALo(12,"mytranslate"),e.qZA()()()),2&t&&(e.xp6(4),e.AsE(" ",e.lcZ(5,4,"lang_auto_he_thong_dang_copy_du_lieu"),"",e.lcZ(6,6,"lang_auto__vui_long_khong_tai_lai_trang")," "),e.xp6(4),e.Q6J("ngIf",i.onProcessCopy),e.xp6(3),e.hij(" ",e.lcZ(12,8,"lang_auto_huy")," "))},dependencies:[F.O5,pO.pW,ye.JV],styles:[".btn-hover[_ngcontent-%COMP%]:hover{background-color:#cbc8c8}"]}),n})();var _O=I(96573);function fO(n,o){if(1&n&&(e.TgZ(0,"div",20)(1,"span",10),e._uU(2),e.ALo(3,"mytranslate"),e._UZ(4,"azt-see-more-content",21),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,3,"lang_auto_thu_muc"),":\xa0 "),e.xp6(2),e.Q6J("content",t.folderNames)("maxLength",200)}}function gO(n,o){if(1&n&&(e.TgZ(0,"div",20)(1,"span",10),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e._uU(4," \xa0 "),e.TgZ(5,"span",10),e._UZ(6,"azt-see-more-content",21),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.hij("",e.lcZ(3,3,"lang_auto_only_de_thi"),":"),e.xp6(4),e.Q6J("content",t.examNames)("maxLength",200)}}let xO=(()=>{class n extends mt.e{onNoClick(){this.dialogRef.close(!1)}onAccept(){this.dialogRef.close(!0)}constructor(t,i){super(i,t),this.dialogRef=t,this.data=i,this.enumDocumentType=qo.Y,this.folderNames="",this.examNames="",this.folderNames=i.clipboardObjs.filter(a=>a.type==qo.Y.EXAM_CATEGORY).map(a=>this.commonService.myTranslateInstant(a.name)).join(", "),this.examNames=i.clipboardObjs.filter(a=>a.type==qo.Y.EXAM).map(a=>a.name).join(", ")}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(U.so),e.Y36(U.WI))},n.\u0275cmp=e.Xpm({type:n,selectors:[["multiple-delete-confirm"]],features:[e.qOj],decls:39,vars:25,consts:[[1,"box","w-72","sm:w-80"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5"],[1,"text-md","font-medium","flex","items-center","mb-2"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-6","h-6","mr-2","text-danger"],["d","M3 6h18"],["d","M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"],["d","M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"],["x1","10","y1","11","x2","10","y2","17"],["x1","14","y1","11","x2","14","y2","17"],[1,"font-medium"],[1,"contentBoxName"],[3,"defaultHeight"],[1,"p-2","w-64","sm:w-full"],["class","text-slate-500 dark:text-slate-400 mb-2",4,"ngIf"],[1,"text-xs","text-slate-500","dark:text-slate-400"],[2,"text-transform","lowercase"],[1,"p-3","text-right"],["azt-track-service","multiple-delete-dialog-NgJ73bNleKj",1,"btn","btn-secondary","w-24","mr-2",3,"click"],["azt-track-service","multiple-delete-dialog-zU2F66X2jAh",1,"btn","w-24","btn-danger",3,"click"],[1,"text-slate-500","dark:text-slate-400","mb-2"],[3,"content","maxLength"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),e.O4$(),e.TgZ(4,"svg",4),e._UZ(5,"path",5)(6,"path",6)(7,"path",7)(8,"line",8)(9,"line",9),e.qZA(),e.kcU(),e.TgZ(10,"span"),e._uU(11),e.ALo(12,"mytranslate"),e.TgZ(13,"span",10),e._uU(14),e.qZA(),e._uU(15),e.ALo(16,"mytranslate"),e.qZA()(),e.TgZ(17,"div",11)(18,"azt-mat-dialog-content",12)(19,"div",13),e.YNc(20,fO,5,5,"div",14),e.YNc(21,gO,7,5,"div",14),e.TgZ(22,"p",15)(23,"span"),e._uU(24),e.ALo(25,"mytranslate"),e.qZA(),e.TgZ(26,"span",16),e._uU(27),e.ALo(28,"mytranslate"),e.qZA(),e.TgZ(29,"span"),e._uU(30),e.ALo(31,"mytranslate"),e.qZA()()()()()()(),e.TgZ(32,"div",17)(33,"button",18),e.NdJ("click",function(){return i.onNoClick()}),e._uU(34),e.ALo(35,"mytranslate"),e.qZA(),e.TgZ(36,"button",19),e.NdJ("click",function(){return i.onAccept()}),e._uU(37),e.ALo(38,"mytranslate"),e.qZA()()()),2&t&&(e.xp6(11),e.hij(" ",e.lcZ(12,11,"lang_auto_ban_co_chac_chan_muon_xoa"),"\xa0 "),e.xp6(3),e.Oqu(i.data.clipboardObjs.length),e.xp6(1),e.hij(" \xa0",e.lcZ(16,13,"lang_auto_tai_lieu_vua_chon")," "),e.xp6(3),e.Q6J("defaultHeight",70),e.xp6(2),e.Q6J("ngIf",""!=i.folderNames),e.xp6(1),e.Q6J("ngIf",""!=i.examNames),e.xp6(3),e.Oqu(e.lcZ(25,15,"lang_auto_khi_xac_nhan")+", "),e.xp6(3),e.hij("",e.lcZ(28,17,"lang_auto_tai_lieu"),"\xa0"),e.xp6(3),e.Oqu(e.lcZ(31,19,"lang_auto_se_duoc_chuyen_vao_thung_rac_ban_co_the_dot")),e.xp6(4),e.hij(" ",e.lcZ(35,21,"lang_cms_common_close_btn")," "),e.xp6(3),e.hij(" ",e.lcZ(38,23,"lang_cms_common_confirm_btn")," "))},dependencies:[F.O5,_O.c,Dr.R,ye.JV],encapsulation:2}),n})();var bO=I(20254),vO=I(27722),eh=I(45468);let wO=(()=>{class n{redirectByAction(t,i,a){switch(i){case xm.T.OFFLINE_CONFIG:this.goToOfflineConfigPage(t);break;case xm.T.CONFIG_EXAM:this.goToConfigExamPage(t);break;case xm.T.EDIT_EXAM:this.goToEditExamPage(t);break;case xm.T.POWER_POINT:this.goToPowerPointPage(t);break;case xm.T.STATISTIC:this.goToStatisticPage(t);break;case xm.T.TESTED_LIST:this.goToTestedListPage(t,a)}}goToOfflineConfigPage(t){let i=`/admin/testbank/document-management/0/${t.categoryId}/${t.currentPage}`+(t.backToData?.shareType?"?data="+this.commonService.serializeJson({shareType:t.backToData?.shareType}):"");this.commonService.myNavigationWithQueryString("/admin/testbank/action-online-offline/"+t.categoryId+"/"+t.examObj.hashId,"?backto="+encodeURIComponent(i))}goToConfigExamPage(t){let i=`/admin/testbank/document-management/0/${t.categoryId}/${t.currentPage}`+(t.backToData?.shareType?"?data="+this.commonService.serializeJson({shareType:t.backToData?.shareType}):"");this.homeworkExamService.isOfflineExam(t.examObj)?this.commonService.myNavigationWithQueryString("/admin/testbank/config-exam-offline/"+t.categoryId+"/"+t.examObj.hashId,"?backto="+encodeURIComponent(i)):this.commonService.myNavigationWithQueryString("/admin/testbank/action-online-offline/"+t.categoryId+"/"+t.examObj.hashId,"?backto="+encodeURIComponent(i))}goToEditExamPage(t){let i=`/admin/testbank/document-management/0/${t.categoryId}/${t.currentPage}`+(t.backToData?.shareType?"?data="+this.commonService.serializeJson({shareType:t.backToData?.shareType}):"");this.commonService.myNavigationWithQueryString((t.examObj.orcLogId??0)<0?"/admin/testbank/update-offline-exam/"+t.categoryId+"/"+t.examObj.hashId:"/admin/testbank/update-exam/"+t.categoryId+"/"+t.examObj.id,"?backto="+encodeURIComponent(i))}goToPowerPointPage(t){let i=`/admin/testbank/document-management/0/${t.categoryId}/${t.currentPage}`+(t.backToData?.shareType?"?data="+this.commonService.serializeJson({shareType:t.backToData?.shareType}):"");this.commonService.myNavigationWithQueryString("/admin/testbank/powerpoint/"+t.categoryId+"/"+t.examObj.id,"?backto="+encodeURIComponent(i))}goToStatisticPage(t){let i=`/admin/testbank/document-management/0/${t.categoryId}/${t.currentPage}`+(t.backToData?.shareType?"?data="+this.commonService.serializeJson({shareType:t.backToData?.shareType}):"");this.commonService.myNavigationWithQueryString(`/admin/testbank/statistic/${t.examObj.categoryId?t.examObj.categoryId:0}/${t.examObj.id}`,"?backto="+encodeURIComponent(i))}goToTestedListPage(t,i){let a=`/admin/testbank/document-management/0/${t.categoryId}/${t.currentPage}`+(t.backToData?.shareType?"?data="+this.commonService.serializeJson({shareType:t.backToData?.shareType}):"");i?this.commonService.myNavigationToNewTab("/admin/testbank/exam-results-list/"+t.categoryId+"/"+t.examObj.id+"/0","?backto="+encodeURIComponent(a)):this.commonService.myNavigationWithQueryString("/admin/testbank/exam-results-list/"+t.categoryId+"/"+t.examObj.id+"/0","?backto="+encodeURIComponent(a))}constructor(t,i){this.commonService=t,this.homeworkExamService=i}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(Yn.z),e.LFG(eh.v))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var tw=I(85965),nw=I(47394),th=I(88131),Rx=I(67517),iw=I(4779),ow=I(41385);let yO=(()=>{class n{constructor(t,i,a,r,s,l,c){this.commonService=t,this.sortService=i,this.testedListApiService=a,this.sAztExamResultListSortService=r,this.timeService=s,this.formatAnswerSheetService=l,this.documentService=c,this.zipper=new tw,this.subscriptions=new nw.w0,this.currentDate=new Date,this.style_header={border:{top:{style:"thin",color:{rgb:"ff3c8dbc"}},bottom:{style:"thin",color:{rgb:"ff3c8dbc"}},left:{style:"thin",color:{rgb:"ffffffff"}},right:{style:"thin",color:{rgb:"ffffffff"}}},alignment:{vertical:"center",horizontal:"center",wrapText:!0},font:{sz:11,bold:!0,color:{rgb:"ffffffff"}},fill:{patternType:"solid",fgColor:{rgb:"2361ae"}}},this.style_body={border:{top:{style:"thin",color:{rgb:"ff757575"}},bottom:{style:"thin",color:{rgb:"ff757575"}},left:{style:"thin",color:{rgb:"ff757575"}},right:{style:"thin",color:{rgb:"ff757575"}}},alignment:{vertical:"center"}},this.keyColExcelArr=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],this.fullMameTranslate=this.commonService.myTranslateInstant("lang_first_and_last_name")??"",this.groupTranslate=this.commonService.myTranslateInstant("lang_azt_class_group")??"",this.classroomTranslate=this.commonService.myTranslateInstant("lang_testbank_tested_list_class")??"",this.birthdayTranslate=this.commonService.myTranslateInstant("lang_birthday")??"",this.genderTranslate=this.commonService.myTranslateInstant("lang_auto_gioi_tinh")??"",this.codeStudentTranslate=this.commonService.myTranslateInstant("lang_auto_so_bao_danh")??"",this.examCodeTranslate=this.commonService.myTranslateInstant("lang_auto_ma_de_thi")??"",this.trueAnswerCountTrans=this.commonService.myTranslateInstant("lang_testbank_tested_list_number_success")??"",this.wrongAnswerCountTrans=this.commonService.myTranslateInstant("lang_testbank_tested_list_error")??"",this.scoreTranslate=this.commonService.myTranslateInstant("lang_testbank_tested_list_test_score")??"",this.essayScoreTranslate=this.commonService.myTranslateInstant("lang_testbank_tested_list_essay_score")??"",this.totalScoreTranslate=this.commonService.myTranslateInstant("lang_testbank_tested_list_total_point")??"",this.combineScoreTranslate=this.commonService.myTranslateInstant("lang_combine_exam_component")??"",this.groupScoreTrans=this.commonService.myTranslateInstant("lang_testbank_test_config_group")??"",this.testedTimeTrans=this.commonService.myTranslateInstant("lang_testbank_tested_tested_time_exams")??"",this.totalTestedTimeTrans=this.commonService.myTranslateInstant("lang_testbank_tested_list_number_exams")??"",this.startTimeTrans=this.commonService.myTranslateInstant("lang_testbank_tested_list_time_start")??"",this.endTimeTrans=this.commonService.myTranslateInstant("lang_testbank_tested_list_time_end")??"",this.testingTimeTrans=this.commonService.myTranslateInstant("lang_testbank_tested_list_time_homework")??"",this.testingTimeMinutesTrans=this.commonService.myTranslateInstant("lang_testbank_tested_list_time_homework_only_minutes")??"",this.exitFullsceenCountTrans=this.commonService.myTranslateInstant("lang_testbank_tested_list_exit_full_screen")??"",this.exitBrowerCountTrans=this.commonService.myTranslateInstant("lang_testbank_tested_list_exit_brower")??"",this.cauTrans=this.commonService.myTranslateInstant("lang_testbank_tested_list_question"),this.additionalInfoTrans=this.commonService.myTranslateInstant("lang_testbank_tested_list_additional_information")??"",this.examNameTrans=this.commonService.myTranslateInstant("lang_testbank_tested_list_subject_exam")??"",this.examTimeTrans=this.commonService.myTranslateInstant("lang_testbank_tested_list_time_exam")??"",this.examTimeMinuteTrans=this.commonService.myTranslateInstant("lang_testbank_tested_list_minute")??"",this.examTotalQuestionTrans=this.commonService.myTranslateInstant("lang_testbank_tested_list_total_question")??"",this.examExportTypeTrans=this.commonService.myTranslateInstant("lang_auto_kieu_export")??"",this.examExportedTimeTrans=this.commonService.myTranslateInstant("lang_testbank_tested_list_time_export")??"",this.isNotMarked=this.commonService.myTranslateInstant("lang_auto_chua_cham")??"",this.isOnTest=this.commonService.myTranslateInstant("lang_auto_dang_thi")??"",this.isNotSubmit=this.commonService.myTranslateInstant("lang_auto_chua_nop_bai")??"",this.isNotTested=this.commonService.myTranslateInstant("lang_auto_chua_thi")??"",this.noBirthday=this.commonService.myTranslateInstant("lang_auto_hoc_sinh_chua_nhap_ngay_sinh")??"",this.maleTrans=this.commonService.myTranslateInstant("lang_auto_nam")??"",this.femaleTrans=this.commonService.myTranslateInstant("lang_auto_nu")??"",this.freeStudentTrans=this.commonService.myTranslateInstant("lang_auto_tu_do")??"",this.noDataExportTrans=this.commonService.myTranslateInstant("lang_auto_chua_co_du_lieu_thong_ke")??"",this.loadingDataTrans=this.commonService.myTranslateInstant("lang_auto_dang_tai_du_lieu")??"\u0110ang t\u1ea3i d\u1eef li\u1ec7u",this.processingDataTrans=this.commonService.myTranslateInstant("lang_auto_dang_xu_ly_du_lieu")??"\u0110ang x\u1eed l\xfd d\u1eef li\u1ec7u ",this.folderTitleTrans=this.commonService.myTranslateInstant("lang_auto_thu_muc")??"Th\u01b0 m\u1ee5c",this.examTitleTrans=this.commonService.myTranslateInstant("lang_auto_de_thi")??"\u0110\u1ec1 thi",this.currentCountProcess=0,this.currentFolderCount=0,this.totalFolderCount=0,this.totalCountProcess=0,this.listExamExportSelected=[]}resetService(){this.zipper=new tw,this.currentFolderCount=0,this.totalFolderCount=0,this.totalCountProcess=0,this.currentCountProcess=0,this.listExamExportSelected=[],this.subscriptions.unsubscribe(),this.subscriptions=new nw.w0}processExportExams(t,i){return new ee.y(a=>{this.resetService();let r="azota_excels/";this.totalCountProcess=t.length,this.totalFolderCount=t.filter(s=>s.type==qo.Y.EXAM_CATEGORY).length,this.listExamExportSelected=t.filter(s=>s.type==qo.Y.EXAM),this.getAllDataFromCates(t.filter(s=>s.type==qo.Y.EXAM_CATEGORY),r,s=>{this.listExamExportSelected=this.listExamExportSelected.concat(...s),this.currentFolderCount==this.totalFolderCount&&this.startProcessGetData(i,r).subscribe(l=>{l&&setTimeout(()=>{this.zipper.generateAsync({type:"blob"}).then(c=>{a.next(c),a.complete(),this.resetService()})},50)})})})}startProcessGetData(t,i){return new ee.y(a=>{this.listExamExportSelected.forEach(r=>{r.type==qo.Y.EXAM&&this.processDataExportForExam(r.id,t,r.name??"exam-"+r.id,r.parentCateName??i).subscribe(s=>{this.currentCountProcess++,this.currentCountProcess==this.totalCountProcess&&(a.next(!0),a.complete())})})})}getAllDataFromCates(t,i,a){t.length?t.forEach(r=>{cr.G.changeMsgLoadingEffect(this.loadingDataTrans+" "+this.folderTitleTrans.toLowerCase()+": "+r.name+`(${this.currentCountProcess})`);let s={categoryId:r.id,documentType:void 0,shareType:void 0,fileType:void 0,classroomId:void 0,name:void 0,suggestExamPurpose:void 0,lite:1,getGlobal:0,page:1,itemPerPage:-1};this.documentService.apiDocumentsGet(s.categoryId,s.documentType,s.shareType,s.fileType,s.classroomId,s.name,s.suggestExamPurpose,s.lite,s.getGlobal,s.page,s.itemPerPage).subscribe(l=>{let c=[],u=[],m=this.commonService.replaceForFolderName(l.data?.currentCategory?.name?l.data?.currentCategory?.name+"_"+l.data?.currentCategory?.id:""),p=i+this.commonService.createFolderNameExportFiles([m??"IdCate-"+r.id]);l&&1==l.success&&(l.data?.categoryObjs.forEach(f=>{c.push({id:f.id,name:f.name,parentCateName:p,parentId:r.id,type:qo.Y.EXAM_CATEGORY}),this.totalCountProcess++,this.totalFolderCount++}),l.data?.documentObjs.forEach(f=>{f.exam&&(u.push({id:f.exam.id,name:f.exam.name,parentCateName:p,parentId:r.id,type:qo.Y.EXAM}),this.totalCountProcess++)})),this.currentFolderCount++,this.currentCountProcess++,a(u),c.length&&setTimeout(()=>{this.getAllDataFromCates(c,p,a)},400)})}):a([])}processDataExportForExam(t,i,a,r){return new ee.y(s=>{let l="lastTime"==i?this.testedListApiService.getTestedLastMark("export_tool",t):"highest"==i?this.testedListApiService.getTestedHighestMark("export_tool",t):"firstTime"==i?this.testedListApiService.getTestedFirstMark("export_tool",t):this.testedListApiService.getTestedAllResult("export_tool",t);this.subscriptions.add(l.subscribe(c=>{if(cr.G.changeMsgLoadingEffect(this.processingDataTrans+" "+this.examTitleTrans+": "+a+`(${this.currentCountProcess})`),1==c.success){let m=c.data?.examObj,p=c.data?.questionObjs??[],f=c.data?.totalQuestion??0,b=c.data?.studentsNotInClassResults??[];b=this.mapQuestionWithAnswerForExportExcel(c.data?.studentsNotInClassResults??[],c.data?.questionObjs??[]);let L=c.data?.maxGroupId??0,N=c.data?.hasEssayQuestion??!1;b=this.sAztExamResultListSortService._changeExamResultStatusForOneClassroom(this.parseInfoFieldForStudentObjsInExportExcel(b),N);let G,R=this.processDataForExcel(c.data?.studentsInClassResults??[],p,N),j=Gt.utils.book_new(),ae=this.getTypeExportTrans(i),W=[{width:25},{width:40},{width:20},{width:15},{width:10},{width:15},{width:10},{width:15},{width:15},{width:15},{width:15}];if(N&&W.push({width:15}),m?.subjectMarks)for(let Fe=0;Fe<3;Fe++)W.push({width:15});if(L>0)for(let Fe=0;Fe<L;Fe++)W.push({width:10});W.push({width:10},{width:10},{width:20},{width:20},{width:15},{width:15},{width:15},{width:15});for(let Fe=0;Fe<f;Fe++)W.push({width:10});W.push({width:50});let le=[],ve=10,ce=6;G=Gt.utils.json_to_sheet([{A:""}],{skipHeader:!0});let te=[{A:this.examNameTrans+": "+m?.name,B:"",C:"",D:"",E:"",F:"",G:"",H:"",I:"",J:""},{A:this.examTimeTrans+": ",B:"",C:"",D:m?.minutes+" "+this.examTimeMinuteTrans,F:this.examTotalQuestionTrans+": ",G:"",H:"",I:2==m?.mixQuestion?m?.limitMixQuestion:m?.countQuestion,J:""},{A:this.examExportTypeTrans+": ",B:"",C:"",D:ae,F:"",G:"",H:"",I:"",J:""},{A:this.examExportedTimeTrans+": "+this.timeService.formatOnlyDateByUserUnit(this.currentDate)},{A:"",B:"",C:"",D:"",E:"",F:"",G:"",H:"",I:"",J:""},{A:this.fullMameTranslate,B:this.groupTranslate,C:this.classroomTranslate,D:this.birthdayTranslate,E:this.genderTranslate,F:this.codeStudentTranslate,G:this.examCodeTranslate,H:this.trueAnswerCountTrans,I:this.wrongAnswerCountTrans,J:this.scoreTranslate}];if(N?(ve+=2,te[5]={...te[5],K:this.essayScoreTranslate,L:this.totalScoreTranslate}):(ve++,te[5]={...te[5],K:this.totalScoreTranslate}),m?.subjectMarks){let Fe=this.getKeyOfColumnsExcel(ve+1,3);ve+=Fe.length;for(let Re=0;Re<Fe.length;Re++)te[5][Fe[Re]]=this.combineScoreTranslate+" "+(Re+1)}if(L>0){let Fe=this.getKeyOfColumnsExcel(ve+1,L);ve+=Fe.length;for(let Re=0;Re<Fe.length;Re++)te[5][Fe[Re]]=this.groupScoreTrans+" "+(Re+1)}let Se=this.getKeyOfColumnsExcel(ve+1,8);if(Se[0]&&(te[5][Se[0]]=this.testedTimeTrans),Se[1]&&(te[5][Se[1]]=this.totalTestedTimeTrans),Se[2]&&(te[5][Se[2]]=this.startTimeTrans),Se[3]&&(te[5][Se[3]]=this.endTimeTrans),Se[4]&&(te[5][Se[4]]=this.testingTimeTrans),Se[5]&&(te[5][Se[5]]=this.testingTimeMinutesTrans),Se[6]&&(te[5][Se[6]]=this.exitFullsceenCountTrans),Se[7]&&(te[5][Se[7]]=this.exitBrowerCountTrans),ve+=Se.length,f>0){let Fe=this.getKeyOfColumnsExcel(ve+1,f);ve+=Fe.length;for(let Re=0;Re<Fe.length;Re++)te[5][Fe[Re]]=this.cauTrans+" "+(Re+1)}let Ze=this.getKeyOfColumnsExcel(ve+1,1);te[5][Ze[0]]=this.additionalInfoTrans,ve+=Ze.length,le=[{s:{r:1,c:0},e:{r:1,c:9}},{s:{r:2,c:0},e:{r:2,c:2}},{s:{r:2,c:3},e:{r:2,c:4}},{s:{r:2,c:5},e:{r:2,c:7}},{s:{r:2,c:8},e:{r:2,c:9}},{s:{r:3,c:0},e:{r:3,c:2}},{s:{r:3,c:3},e:{r:3,c:5}},{s:{r:4,c:0},e:{r:4,c:9}}],G=Gt.utils.sheet_add_json(G,te,{skipHeader:!0,origin:-1}),R.length&&R.forEach(Fe=>{Fe.results?.length&&Fe.results.forEach(Re=>{let Je=this.timeService.formatOnlyDateByUserUnit(Re.birthday)?this.timeService.formatOnlyDateByUserUnit(Re.birthday):void 0,Ke=[{A:Re.fullName,B:Fe.classObj?.classroomGroup?.name,C:Fe.classObj?.name,D:null==Re.birthday?this.noBirthday:`${Je}`,E:0==Re.gender?this.femaleTrans:1==Re.gender?this.maleTrans:"",F:Re.identificationNumber?this.formatCodeStudent(Re.identificationNumber):"",G:Re.offlineMixQuestionHashId?this.formatCodeStudent(Re.offlineMixQuestionHashId):"",H:Re.rightAnswer,I:Re.isNotTested||Re.isOnTest?0:Re.countEssayQuestion&&Re.countEssayQuestion>0?(Re.totalQuestion??0)-(Re.rightAnswer??0)-Re.countEssayQuestion:(Re.totalQuestion??0)-(Re.rightAnswer??0),J:null!=Re.trueFalseMark?this.commonService.parseNumberFixed(Re.trueFalseMark,2):this.checkStatusStudentPipe(Re)}],et=9;if(N?(Ke[0]={...Ke[0],K:null!=Re.essayMark?this.commonService.parseNumberFixed(Re.essayMark,2):this.checkStatusStudentPipe(Re),L:this.commonService.parseNumberFixed(Re.mark??0,2)},et+=2):(Ke[0]={...Ke[0],K:this.commonService.parseNumberFixed(Re.mark??0,2)},et++),m?.subjectMarks){let Ee=this.getKeyOfColumnsExcel(et+1,3);for(let Ue=0;Ue<Ee.length;Ue++)Ke[0][Ee[Ue]]=Re.subjectMarkValues&&null!=Re.subjectMarkValues[Ue]?Re.subjectMarkValues[Ue]:"";et+=Ee.length}if(L>0){let Ee=this.getKeyOfColumnsExcel(et+1,L);for(let Ue=0;Ue<Ee.length;Ue++)Ke[0][Ee[Ue]]=Re.groupPoints&&Re.groupPoints[Ue]?Re.groupPoints[Ue].point:"";et+=Ee.length}let gt=this.getKeyOfColumnsExcel(et+1,8);if(gt[0]&&(Ke[0][gt[0]]=Re.testedTime),gt[1]&&(Ke[0][gt[1]]=Re.totalTestTime?Re.totalTestTime:Re.totalExamResultObjs),gt[2]&&(Ke[0][gt[2]]=this.timeService.formatFullDateTime(Re.startedTest??"")),gt[3]&&(Ke[0][gt[3]]=this.timeService.formatFullDateTime(Re.createdAt??"")),gt[4]&&(Ke[0][gt[4]]=null==Re.startedTest?"":this.timeService.calculationTimeExamTested(Re.startedTest,Re.createdAt??"")),gt[5]&&(Ke[0][gt[5]]=null==Re.startedTest?"":this.timeService.calculationTimeOnlyMinutes(Re.startedTest,Re.createdAt??"")),gt[6]&&(Ke[0][gt[6]]=Re.eventTracks?.exitCount??""),gt[7]&&(Ke[0][gt[7]]=Re.eventTracks?.blurCount??""),et+=gt.length,f>0){let Ee=this.getKeyOfColumnsExcel(et+1,f);et+=Ee.length;for(let Ue=0;Ue<Ee.length;Ue++)Ke[0][Ee[Ue]]=Re.answerMixObjs&&Re.answerMixObjs[Ue]?Re.answerMixObjs[Ue]:""}let ue=this.getKeyOfColumnsExcel(et+1,1),Te="";Re.inforsParse?.forEach(Ee=>{Te+=Ee.key+": "+Ee.value+" - "}),Ke[0][ue[0]]=Te,et++,ce++,Gt.utils.sheet_add_json(G,Ke,{skipHeader:!0,origin:-1})})}),b.length&&b.forEach(Fe=>{let Re=this.timeService.formatOnlyDateByUserUnit(Fe.birthday)?this.timeService.formatOnlyDateByUserUnit(Fe.birthday):void 0,Je=[{A:Fe.fullName??(this.commonService.myTranslateInstant("lang_auto_thi_sinh_thi_offline")??"Th\xed sinh offline_")+Fe.resultId,B:this.freeStudentTrans,C:this.freeStudentTrans,D:null==Fe.birthday?this.noBirthday:`${Re}`,E:0==Fe.gender?this.femaleTrans:1==Fe.gender?this.maleTrans:"",F:Fe.identificationNumber?this.formatCodeStudent(Fe.identificationNumber):"",G:Fe.offlineMixQuestionHashId?this.formatCodeStudent(Fe.offlineMixQuestionHashId):"",H:Fe.rightAnswer,I:Fe.isNotTested||Fe.isOnTest?0:Fe.countEssayQuestion&&Fe.countEssayQuestion>0?(Fe.totalQuestion??0)-(Fe.rightAnswer??0)-Fe.countEssayQuestion:(Fe.totalQuestion??0)-(Fe.rightAnswer??0),J:null!=Fe.trueFalseMark?this.commonService.parseNumberFixed(Fe.trueFalseMark,2):this.checkStatusStudentPipe(Fe)}],Ke=9;if(N?(Je[0]={...Je[0],K:null!=Fe.essayMark?this.commonService.parseNumberFixed(Fe.essayMark,2):this.checkStatusStudentPipe(Fe),L:this.commonService.parseNumberFixed(Fe.mark??0,2)},Ke+=2):(Je[0]={...Je[0],K:this.commonService.parseNumberFixed(Fe.mark??0,2)},Ke++),m?.subjectMarks){let Te=this.getKeyOfColumnsExcel(Ke+1,3);for(let Ee=0;Ee<Te.length;Ee++)Je[0][Te[Ee]]=Fe.subjectMarkValues&&null!=Fe.subjectMarkValues[Ee]?Fe.subjectMarkValues[Ee]:"";Ke+=Te.length}if(L>0){let Te=this.getKeyOfColumnsExcel(Ke+1,L);for(let Ee=0;Ee<Te.length;Ee++)Je[0][Te[Ee]]=Fe.groupPoints&&Fe.groupPoints[Ee]?Fe.groupPoints[Ee].point:"";Ke+=Te.length}let et=this.getKeyOfColumnsExcel(Ke+1,8);if(et[0]&&(Je[0][et[0]]=Fe.testedTime),et[1]&&(Je[0][et[1]]=Fe.totalTestTime?Fe.totalTestTime:Fe.totalExamResultObjs),et[2]&&(Je[0][et[2]]=this.timeService.formatFullDateTime(Fe.startedTest??"")),et[3]&&(Je[0][et[3]]=this.timeService.formatFullDateTime(Fe.createdAt??"")),et[4]&&(Je[0][et[4]]=null==Fe.startedTest?"":this.timeService.calculationTimeExamTested(Fe.startedTest,Fe.createdAt??"")),et[5]&&(Je[0][et[5]]=null==Fe.startedTest?"":this.timeService.calculationTimeOnlyMinutes(Fe.startedTest,Fe.createdAt??"")),et[6]&&(Je[0][et[6]]=Fe.eventTracks?.exitCount??""),et[7]&&(Je[0][et[7]]=Fe.eventTracks?.blurCount??""),Ke+=et.length,f>0){let Te=this.getKeyOfColumnsExcel(Ke+1,f);Ke+=Te.length;for(let Ee=0;Ee<Te.length;Ee++)Je[0][Te[Ee]]=Fe.answerMixObjs&&Fe.answerMixObjs[Ee]?Fe.answerMixObjs[Ee]:""}let gt=this.getKeyOfColumnsExcel(Ke+1,1),ue="";Fe.inforsParse?.forEach(Te=>{ue+=Te.key+": "+Te.value+" - "}),Je[0][gt[0]]=ue,Ke++,ce++,Gt.utils.sheet_add_json(G,Je,{skipHeader:!0,origin:-1})}),!R.length&&!b.length&&(ce++,Gt.utils.sheet_add_json(G,[{A:this.noDataExportTrans,B:"",C:"",D:"",E:"",F:"",G:"",H:"",I:"",J:""}],{skipHeader:!0,origin:-1}),le.push({s:{r:ce,c:0},e:{r:ce,c:9}})),G["!cols"]=W,G["!merges"]=le;let se={s:{c:0,r:7},e:{c:ve,r:ce}};for(let Fe=0;Fe<ve;Fe++)G[Gt.utils.encode_cell({c:Fe,r:6})]&&(G[Gt.utils.encode_cell({c:Fe,r:6})].s=this.style_header);for(let Fe=se.s.r;Fe<=se.e.r;++Fe)for(let Re=se.s.c;Re<=se.e.c;++Re)G[Gt.utils.encode_cell({c:Re,r:Fe})]&&(G[Gt.utils.encode_cell({c:Re,r:Fe})].s=this.style_body);let pe=m?.name?this.commonService.replaceForFolderName(m?.name):"Sheet "+ae;Gt.utils.book_append_sheet(j,G,this.commonService.replaceAll(pe&&pe?.length>31?pe?.substring(0,27)+"...":pe,"/",""));var u=Gt.write(j,{bookType:"xlsx",bookSST:!0,type:"array"});const Pe=new Blob([u],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});let Oe=this.commonService.createFileNameExportFile([a?this.commonService.replaceForFolderName(a+"_"+m?.id):"",i])+".xlsx";this.zipper.file(this.commonService.createFolderNameExportFiles([r])+Oe,Pe),s.next(Pe),s.complete()}else s.next(),s.complete()}))})}getKeyOfColumnsExcel(t,i){let a=[],r=t,s=0,l=0;t>=26&&(s=t%26,r-=26*s,s>26&&(s=1,l++));for(let c=0;c<i;c++){r>=26&&(r=0,s++);let u="";0==s&&0==l?u=this.keyColExcelArr[r]:(s>26&&(s=1,l++),l>0&&(u+=this.keyColExcelArr[l-1]),u+=this.keyColExcelArr[s-1]+""+this.keyColExcelArr[r]),a.push(u),r++}return a}getTypeExportTrans(t){return this.commonService.myTranslateInstant({lastTime:"lang_auto_last_time",firstTime:"lang_auto_first_time",highest:"lang_auto_highest",allTime:"lang_auto_allTime"}[t]||"lang_auto_last_time")??""}checkStatusStudentPipe(t){return t.isNotMarked?this.isNotMarked:t.isOnTest?this.isOnTest:t.isNotSubmit?this.isNotSubmit:t.isNotTested?this.isNotTested:""}formatCodeStudent(t,i){return this.formatAnswerSheetService.formatStudentCodeToNumber(t??0,i&&4===i?4:6)}processDataForExcel(t,i,a){var r=[];return t.forEach(s=>{s.results=this.mapQuestionWithAnswerForExportExcel(this.sortService.sortFirstNameStudents(s.results??new Array),i),s.results=this.sAztExamResultListSortService._changeExamResultStatusForOneClassroom(this.parseInfoFieldForStudentObjsInExportExcel(s.results),a),r.push(s)}),r}parseInfoFieldForStudentObjsInExportExcel(t){var i=[];for(let s=0;s<t.length;s++){var a=this.commonService.myParseJson(t[s].infors??"")??[];if(this.isNewInfoFieldFormatInExportExcel(a))if(null!=a){var r=new Array;a.forEach(l=>{l.contents&&1==l.contents.length?r.push({key:l.title,value:l.contents[0]}):l.contents&&l.contents.length>1&&r.push({key:l.title,value:l.contents.join(", ")})}),t[s].inforsParse=r}else t[s].inforsParse=new Array;else t[s].inforsParse=this.commonService.myParseJson(t[s].infors??"")??[];i.push(t[s])}return i}mapQuestionWithAnswerForExportExcel(t,i){var a=[];return t.forEach(r=>{if(""!=r.answers&&null!=r.answers&&"[]"!=r.answers){var s=this.commonService.willDeleteParseJson(r.answers),l=[];i.forEach(c=>{for(var u={QuestionId:c.questionId,Answer:"",index:c.sort},m=0;m<s.length;m++)if(s[m].QuestionId==c.questionId&&s[m].AnswerContent&&s[m].AnswerContent.length>0){u.Answer=s[m].AnswerContent[0].Content;break}l.push(u)}),a.push({...r,results:l})}else l=[],i.forEach(u=>{l.push({QuestionId:u.questionId,Answer:"",index:u.sort})}),a.push({...r,results:l})}),a}isNewInfoFieldFormatInExportExcel(t){var i=!1;if(null!=t)for(var a=0;a<t.length;a++)if(t[a].hasOwnProperty("contents")){i=!0;break}return i}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(Yn.z),e.LFG(th.V),e.LFG(Rx.X),e.LFG(iw.K),e.LFG(Mo.D),e.LFG(ow.j),e.LFG(un.Zg))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var nh=I(70342),jg=I(46504);const zx=function(n){return{active:n}},CO=function(n){return{clickable:n}},Hx=function(n){return{"truncate-bread":n}};function TO(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li",45)(1,"a",46),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.backToParentCategoryEvent(r))}),e.TgZ(2,"span",47,48),e.ALo(4,"mytranslate"),e.TgZ(5,"span"),e._uU(6),e.ALo(7,"mytranslate"),e.qZA()()()()}if(2&n){const t=o.$implicit,i=e.MAs(3),a=e.oxw();e.Q6J("ngClass",e.VKq(11,zx,t.id==a.currentCategoryId)),e.xp6(1),e.Q6J("ngClass",e.VKq(13,CO,t.id!=a.currentCategoryId)),e.xp6(1),e.s9C("matTooltip",e.lcZ(4,7,t.name)),e.Q6J("ngClass",e.VKq(15,Hx,t.id!=a.currentCategoryId))("isDisabledTooltip",!1)("matTooltipDisabled",i.isDisabled),e.xp6(4),e.Oqu(e.lcZ(7,9,t.name))}}const kO=function(n){return{"w-full":n}};function SO(n,o){if(1&n&&(e.TgZ(0,"span",58),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n){const t=e.oxw(2);e.Q6J("ngClass",e.VKq(5,kO,t.isMobileDevice||t.isMobileWebView)),e.xp6(1),e.AsE("",e.lcZ(2,3,"lang_auto_da_chon")," ",t.totalCheckboxSelected,"")}}function EO(n,o){if(1&n){const t=e.EpF();e.O4$(),e.kcU(),e.TgZ(0,"button",59),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.acceptCutAllDocumentObjs(void 0,void 0))}),e.O4$(),e.TgZ(1,"svg",20),e._UZ(2,"polyline",60)(3,"polyline",61)(4,"polyline",62)(5,"polyline",63)(6,"line",64)(7,"line",65),e.qZA(),e._uU(8),e.ALo(9,"mytranslate"),e.qZA()}2&n&&(e.xp6(8),e.hij(" ",e.lcZ(9,1,"lang_auto_cut")," "))}function OO(n,o){if(1&n){const t=e.EpF();e.O4$(),e.kcU(),e.TgZ(0,"button",66),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.handlePasteDataToFolder(a.currentCategoryId))}),e.O4$(),e.TgZ(1,"svg",67),e._UZ(2,"rect",68)(3,"path",69),e.qZA(),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()}2&n&&(e.xp6(4),e.hij(" ",e.lcZ(5,1,"lang_auto_paste")," "))}function IO(n,o){if(1&n){const t=e.EpF();e.O4$(),e.kcU(),e.TgZ(0,"button",70),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.acceptDeleteAllDocumentObjs(void 0,void 0))}),e.O4$(),e.TgZ(1,"svg",20),e._UZ(2,"path",71)(3,"path",72)(4,"path",73)(5,"line",74)(6,"line",75),e.qZA(),e._uU(7),e.ALo(8,"mytranslate"),e.qZA()}2&n&&(e.xp6(7),e.hij(" ",e.lcZ(8,1,"lang_auto_xoa")," "))}function MO(n,o){if(1&n&&(e.O4$(),e.kcU(),e.TgZ(0,"button",76),e.O4$(),e.TgZ(1,"svg",77),e._UZ(2,"circle",78)(3,"circle",79)(4,"circle",80),e.qZA()()),2&n){e.oxw(2);const t=e.MAs(19);e.Q6J("matMenuTriggerFor",t)}}const LO=function(n){return{"justify-between":n}};function BO(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",49),e.YNc(1,SO,3,7,"span",50),e.TgZ(2,"button",51),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.acceptCopyAllDocumentObjs(void 0,void 0))}),e.O4$(),e.TgZ(3,"svg",20),e._UZ(4,"rect",52)(5,"path",53),e.qZA(),e._uU(6),e.ALo(7,"mytranslate"),e.qZA(),e.YNc(8,EO,10,3,"button",54),e.YNc(9,OO,6,3,"button",55),e.YNc(10,IO,9,3,"button",56),e.YNc(11,MO,5,1,"button",57),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("ngClass",e.VKq(9,LO,t.isMobileDevice||t.isMobileWebView)),e.xp6(1),e.Q6J("ngIf",t.totalCheckboxSelected>0),e.xp6(5),e.hij(" ",e.lcZ(7,7,"lang_auto_copy")," "),e.xp6(2),e.Q6J("ngIf",!t.shareType||"owner"==t.shareType),e.xp6(1),e.Q6J("ngIf",t.hasCopyOrCutInClipboard()&&t.checkCurrentCatePastePermission()),e.xp6(1),e.Q6J("ngIf",!t.shareType||"owner"==t.shareType),e.xp6(1),e.Q6J("ngIf",!(null!=t.currentCategory&&t.currentCategory.isGlobalAzota))}}function PO(n,o){1&n&&(e.TgZ(0,"div",81)(1,"div",82),e.O4$(),e.TgZ(2,"svg",83),e._UZ(3,"path",84)(4,"path",85)(5,"path",86)(6,"path",87),e.qZA(),e.kcU(),e.TgZ(7,"p",88),e._uU(8),e.ALo(9,"mytranslate"),e.qZA()()()),2&n&&(e.xp6(8),e.hij("",e.lcZ(9,1,"lang_not_found_search"),"!"))}function QO(n,o){if(1&n&&(e.ynx(0),e.GkF(1,89),e.BQk()),2&n){const t=e.oxw(),i=e.MAs(17),a=e.MAs(15);e.xp6(1),e.Q6J("ngTemplateOutlet",t.isShowSearchResult?i:a)}}function FO(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"input",106),e.NdJ("change",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.selectOrUnselectAllDocumentObjs())}),e.qZA(),e.BQk()}}const xc=function(n){return{"text-primary stroke-width-2.5":n}};function NO(n,o){if(1&n){const t=e.EpF();e.O4$(),e.kcU(),e.TgZ(0,"div",107)(1,"div",108),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.sortDocumentByColumn(a.enumDocumentSortType.BY_ATTENDED,null==a.currentDocumentSortTypeObj?null:a.currentDocumentSortTypeObj.isAscSort))}),e.TgZ(2,"span",109),e._uU(3),e.ALo(4,"mytranslate"),e.TgZ(5,"div",96),e.O4$(),e.TgZ(6,"svg",97),e._UZ(7,"polyline",98),e.qZA(),e.TgZ(8,"svg",99),e._UZ(9,"polyline",100),e.qZA()()()()()}if(2&n){const t=e.oxw(2);e.xp6(3),e.hij(" ",e.lcZ(4,3,"lang_testbank_folder_and_file_number_attended")," "),e.xp6(3),e.Q6J("ngClass",e.VKq(5,xc,1==(null==t.currentDocumentSortTypeObj?null:t.currentDocumentSortTypeObj.isAscSort)&&(null==t.currentDocumentSortTypeObj?null:t.currentDocumentSortTypeObj.isColumnSortType)==t.enumDocumentSortType.BY_ATTENDED)),e.xp6(2),e.Q6J("ngClass",e.VKq(7,xc,0==(null==t.currentDocumentSortTypeObj?null:t.currentDocumentSortTypeObj.isAscSort)&&(null==t.currentDocumentSortTypeObj?null:t.currentDocumentSortTypeObj.isColumnSortType)==t.enumDocumentSortType.BY_ATTENDED))}}function ZO(n,o){if(1&n){const t=e.EpF();e.O4$(),e.kcU(),e.TgZ(0,"div",107)(1,"div",110)(2,"div",111),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.sortDocumentByColumn(a.enumDocumentSortType.BY_PUBLISH_STATUS,null==a.currentDocumentSortTypeObj?null:a.currentDocumentSortTypeObj.isAscSort))}),e._uU(3),e.ALo(4,"mytranslate"),e.TgZ(5,"div",96),e.O4$(),e.TgZ(6,"svg",97),e._UZ(7,"polyline",98),e.qZA(),e.TgZ(8,"svg",99),e._UZ(9,"polyline",100),e.qZA()()()()()}if(2&n){const t=e.oxw(2);e.xp6(3),e.hij(" ",e.lcZ(4,3,"lang_testbank_folder_and_file_status")," "),e.xp6(3),e.Q6J("ngClass",e.VKq(5,xc,1==(null==t.currentDocumentSortTypeObj?null:t.currentDocumentSortTypeObj.isAscSort)&&(null==t.currentDocumentSortTypeObj?null:t.currentDocumentSortTypeObj.isColumnSortType)==t.enumDocumentSortType.BY_PUBLISH_STATUS)),e.xp6(2),e.Q6J("ngClass",e.VKq(7,xc,0==(null==t.currentDocumentSortTypeObj?null:t.currentDocumentSortTypeObj.isAscSort)&&(null==t.currentDocumentSortTypeObj?null:t.currentDocumentSortTypeObj.isColumnSortType)==t.enumDocumentSortType.BY_PUBLISH_STATUS))}}function DO(n,o){1&n&&(e.O4$(),e.kcU(),e.TgZ(0,"div",107)(1,"div",112),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"lang_testbank_folder_and_file_delivery_for")," "))}function UO(n,o){if(1&n){const t=e.EpF();e.O4$(),e.kcU(),e.TgZ(0,"div",107)(1,"div",113),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.sortDocumentByColumn(a.enumDocumentSortType.BY_UPDATED_DATE,null==a.currentDocumentSortTypeObj?null:a.currentDocumentSortTypeObj.isAscSort))}),e.TgZ(2,"div",114),e._uU(3),e.ALo(4,"mytranslate"),e.qZA(),e.TgZ(5,"div",96),e.O4$(),e.TgZ(6,"svg",97),e._UZ(7,"polyline",98),e.qZA(),e.TgZ(8,"svg",99),e._UZ(9,"polyline",100),e.qZA()()()()}if(2&n){const t=e.oxw(2);e.xp6(3),e.hij(" ",e.lcZ(4,3,"lang_testbank_folder_and_file_time_update")," "),e.xp6(3),e.Q6J("ngClass",e.VKq(5,xc,1==(null==t.currentDocumentSortTypeObj?null:t.currentDocumentSortTypeObj.isAscSort)&&(null==t.currentDocumentSortTypeObj?null:t.currentDocumentSortTypeObj.isColumnSortType)==t.enumDocumentSortType.BY_UPDATED_DATE)),e.xp6(2),e.Q6J("ngClass",e.VKq(7,xc,0==(null==t.currentDocumentSortTypeObj?null:t.currentDocumentSortTypeObj.isAscSort)&&(null==t.currentDocumentSortTypeObj?null:t.currentDocumentSortTypeObj.isColumnSortType)==t.enumDocumentSortType.BY_UPDATED_DATE))}}function jO(n,o){1&n&&(e.ynx(0),e._UZ(1,"input",132),e.BQk())}function qO(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"span",90)(1,"input",137),e.NdJ("change",function(){e.CHM(t);const a=e.oxw(6);return e.KtG(a.removeValueOfFormInClipboard())}),e.qZA()()}if(2&n){const t=e.oxw().$implicit;e.Q6J("formGroup",t)}}function RO(n,o){if(1&n&&(e.ynx(0),e.YNc(1,qO,2,1,"span",136),e.BQk()),2&n){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",t)}}const aw=function(n){return[n]};function zO(n,o){if(1&n&&(e.TgZ(0,"span",135),e.YNc(1,RO,2,1,"ng-container",104),e.qZA()),2&n){const t=e.oxw(2).$implicit,i=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",e.VKq(1,aw,i.getClipboardFormGroupByExamCategory(t)))}}function HO(n,o){1&n&&e._UZ(0,"input",132)}function JO(n,o){if(1&n&&(e.YNc(0,zO,2,3,"span",133),e.ALo(1,"fullPermission"),e.YNc(2,HO,1,0,"ng-template",null,134,e.W1O)),2&n){const t=e.MAs(3),i=e.oxw().$implicit;e.Q6J("ngIf",-1!=i.id&&e.xi3(1,2,i,"exam"))("ngIfElse",t)}}function KO(n,o){1&n&&(e.ynx(0),e.O4$(),e.TgZ(1,"svg",138)(2,"g",139),e._UZ(3,"path",140)(4,"path",141)(5,"path",142)(6,"path",143),e.qZA()(),e.BQk())}function GO(n,o){1&n&&(e.TgZ(0,"span"),e.O4$(),e.TgZ(1,"svg",145),e.ALo(2,"mytranslate"),e._UZ(3,"path",146)(4,"path",147)(5,"path",148),e.qZA()()),2&n&&(e.xp6(1),e.s9C("matTooltip",e.lcZ(2,1,"lang_auto_da_chia_se")))}function YO(n,o){1&n&&(e.O4$(),e.TgZ(0,"svg",149),e._UZ(1,"path",150),e.qZA())}function $O(n,o){if(1&n&&(e.YNc(0,GO,6,3,"span",121),e.YNc(1,YO,2,0,"ng-template",null,144,e.W1O)),2&n){const t=e.MAs(2),i=e.oxw().$implicit;e.Q6J("ngIf",i.shared)("ngIfElse",t)}}function VO(n,o){1&n&&(e.TgZ(0,"span",151),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_de_chung_azota")," "))}function WO(n,o){1&n&&(e.TgZ(0,"span",152),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_auto_chia_se")))}function XO(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",153),e.NdJ("click",function(a){e.CHM(t);const r=e.oxw().$implicit,s=e.oxw(2),l=e.MAs(71);return e.KtG(s.onContextMenu(a,r,l))}),e.O4$(),e.TgZ(1,"svg",154),e._UZ(2,"circle",78)(3,"circle",79)(4,"circle",80),e.qZA()()}if(2&n){const t=e.oxw().$implicit;e.Q6J("disabled",!t.id||t.id<0||"user"==t.shareType)}}function eI(n,o){1&n&&(e.TgZ(0,"div",155),e._UZ(1,"div",156),e.qZA())}function tI(n,o){1&n&&(e.TgZ(0,"div",155),e._UZ(1,"div",110),e.qZA())}function nI(n,o){1&n&&(e.TgZ(0,"div",155),e._UZ(1,"div",157),e.qZA())}function iI(n,o){if(1&n&&(e.TgZ(0,"div",158)(1,"div",159)(2,"span",160),e._uU(3),e.ALo(4,"mytranslate"),e.qZA(),e._uU(5),e.ALo(6,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.qZA()()),2&n){const t=e.oxw().$implicit;e.xp6(3),e.hij("",e.lcZ(4,2,"lang_testbank_folder_and_file_time_update"),":\xa0"),e.xp6(2),e.hij(" ",e.lcZ(6,4,t.updatedAt)," ")}}const rw=function(n){return{opacity:n}},qg=function(n){return{"border-b":n}},ih=function(n,o){return{"col-span-4":n,"col-span-12":o}},sw=function(n,o){return{"w-60":n,"w-52":o}};function oI(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",115)(1,"div",116)(2,"div",117)(3,"div",118)(4,"div",119)(5,"div",120),e.YNc(6,jO,2,0,"ng-container",121),e.YNc(7,JO,4,5,"ng-template",null,122,e.W1O),e.qZA(),e.TgZ(9,"div",123),e.NdJ("mouseup",function(a){const s=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(2===a.button||l.handleOpenFolder(s,1===a.button))}),e.TgZ(10,"div",124),e.YNc(11,KO,7,0,"ng-container",121),e.YNc(12,$O,3,2,"ng-template",null,125,e.W1O),e.qZA(),e.TgZ(14,"div",126,48),e.ALo(16,"mytranslate"),e.TgZ(17,"span"),e._uU(18),e.ALo(19,"mytranslate"),e.qZA()(),e.YNc(20,VO,3,3,"span",127),e.YNc(21,WO,3,3,"span",128),e.qZA()(),e.YNc(22,XO,5,1,"button",129),e.qZA(),e.YNc(23,eI,2,0,"div",130),e.YNc(24,tI,2,0,"div",130),e.YNc(25,nI,2,0,"div",130),e.YNc(26,iI,7,6,"div",131),e.qZA()()()}if(2&n){const t=o.$implicit,i=o.last,a=e.MAs(8),r=e.MAs(13),s=e.MAs(15),l=e.oxw(2),c=e.MAs(84),u=e.MAs(71);e.s9C("id","folder_"+t.id),e.Q6J("ngStyle",e.VKq(29,rw,l.isSelectedExamCategoryInClipboard(t)?"0.6":"1"))("contextMenu",!t.id||t.id<0||"user"==t.shareType?c:u)("contextMenuValue",t),e.xp6(1),e.Q6J("ngClass",e.VKq(31,qg,l.categoryObjs&&(24!=l.categoryObjs.length||24==l.categoryObjs.length&&!i))),e.xp6(2),e.Q6J("ngClass",e.WLB(33,ih,!l.isMobileWebView,l.isMobileWebView)),e.xp6(3),e.Q6J("ngIf",1==t.isGlobalAzota)("ngIfElse",a),e.xp6(3),e.Q6J("ngClass",e.WLB(36,sw,-1==t.id,-1!=t.id)),e.xp6(2),e.Q6J("ngIf",1==t.isGlobalAzota)("ngIfElse",r),e.xp6(3),e.s9C("matTooltip",e.lcZ(16,25,t.name)),e.Q6J("isDisabledTooltip",!1)("matTooltipDisabled",s.isDisabled),e.xp6(3),e.Tol(l.isMobileWebView&&-1!=t.id?"azt-wv-item-name":""),e.xp6(1),e.Oqu(e.lcZ(19,27,t.name)),e.xp6(2),e.Q6J("ngIf",-1!=t.id&&1==t.isGlobalAzota),e.xp6(1),e.Q6J("ngIf",-1==t.id),e.xp6(1),e.Q6J("ngIf",l.isMobileDevice&&-1!=t.id&&1!=t.isGlobalAzota),e.xp6(1),e.Q6J("ngIf",!l.isMobileWebView),e.xp6(1),e.Q6J("ngIf",!l.isMobileWebView),e.xp6(1),e.Q6J("ngIf",!l.isMobileWebView),e.xp6(1),e.Q6J("ngIf",!l.isMobileWebView&&-1!=t.id&&1!=t.isGlobalAzota)}}function aI(n,o){if(1&n){const t=e.EpF();e.ynx(0,90),e.TgZ(1,"input",174),e.NdJ("change",function(){e.CHM(t);const a=e.oxw(6);return e.KtG(a.removeValueOfFormInClipboard())}),e.qZA(),e.BQk()}if(2&n){const t=e.oxw().$implicit;e.Q6J("formGroup",t)}}function rI(n,o){if(1&n&&(e.ynx(0),e.YNc(1,aI,2,1,"ng-container",136),e.BQk()),2&n){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",t)}}function sI(n,o){if(1&n&&(e.TgZ(0,"span",135),e.YNc(1,rI,2,1,"ng-container",104),e.qZA()),2&n){const t=e.oxw(2).$implicit,i=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",e.VKq(1,aw,i.getClipboardFormGroupByExam(t.exam)))}}function lI(n,o){1&n&&e._UZ(0,"input",175),2&n&&e.Q6J("disabled",!0)}function cI(n,o){1&n&&(e.O4$(),e.TgZ(0,"svg",176),e.ALo(1,"mytranslate"),e._UZ(2,"path",177)(3,"polyline",178)(4,"path",179),e.qZA()),2&n&&e.s9C("matTooltip",e.lcZ(1,1,"lang_testbank_folder_and_file_published"))}function uI(n,o){1&n&&(e.O4$(),e.TgZ(0,"svg",176),e.ALo(1,"mytranslate"),e._UZ(2,"path",177)(3,"polyline",178),e.qZA()),2&n&&e.s9C("matTooltip",e.lcZ(1,1,"lang_testbank_folder_and_file_Unpublished"))}function dI(n,o){if(1&n&&(e.TgZ(0,"span",180),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n){const t=e.oxw(2).$implicit;e.xp6(1),e.AsE("",e.lcZ(2,2,"lang_testbank_folder_and_file_number_attended"),": ",t.exam.attended,"")}}function mI(n,o){1&n&&(e.TgZ(0,"div",181),e.O4$(),e.TgZ(1,"svg",182),e.ALo(2,"mytranslate"),e._UZ(3,"path",183)(4,"path",184)(5,"path",185),e.qZA()()),2&n&&(e.xp6(1),e.s9C("matTooltip",e.lcZ(2,1,"lang_auto_da_chia_se")))}function pI(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",186),e.NdJ("click",function(a){e.CHM(t);const r=e.oxw(2).$implicit,s=e.oxw(2),l=e.MAs(74);return e.KtG(s.onContextMenu(a,r.exam,l))}),e.O4$(),e.TgZ(1,"svg",154),e._UZ(2,"circle",78)(3,"circle",79)(4,"circle",80),e.qZA()()}}function hI(n,o){if(1&n&&(e.TgZ(0,"div",158)(1,"div",187)(2,"span",188)(3,"span",189),e._uU(4),e.ALo(5,"mytranslate"),e.qZA(),e._uU(6),e.qZA()()()),2&n){const t=e.oxw(2).$implicit;e.xp6(4),e.hij("",e.lcZ(5,2,"lang_testbank_folder_and_file_number_attended"),":\xa0"),e.xp6(2),e.hij(" ",t.exam.attended," ")}}function AI(n,o){if(1&n&&(e.TgZ(0,"div",158)(1,"div",119)(2,"span",190)(3,"span")(4,"span",189),e._uU(5),e.ALo(6,"mytranslate"),e.qZA(),e._uU(7),e.ALo(8,"mytranslate"),e.ALo(9,"mytranslate"),e.qZA()()()()),2&n){const t=e.oxw(2).$implicit;e.xp6(5),e.hij("",e.lcZ(6,2,"lang_testbank_folder_and_file_status"),":\xa0"),e.xp6(2),e.hij(" ",1==t.exam.isPublished?e.lcZ(8,4,"lang_testbank_folder_and_file_published"):e.lcZ(9,6,"lang_testbank_folder_and_file_Unpublished")," ")}}function _I(n,o){if(1&n&&(e.TgZ(0,"span",194,48),e._uU(2),e.ALo(3,"slice"),e.qZA()),2&n){const t=e.MAs(1),i=e.oxw(3).$implicit,a=e.oxw(2);e.Q6J("matTooltip",a.getClassroomName(i.exam.classrooms).join(", "))("isDisabledTooltip",!1)("matTooltipDisabled",t.isDisabled),e.xp6(2),e.hij(" ",a.getClassroomName(i.exam.classrooms).join(", ").length>100?e.Dn7(3,4,a.getClassroomName(i.exam.classrooms).join(", "),0,100)+"..":a.getClassroomName(i.exam.classrooms).join(", ")," ")}}function fI(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_auto_tat_ca_moi_nguoi")))}function gI(n,o){if(1&n&&(e.TgZ(0,"div",191)(1,"div",192)(2,"span",189),e._uU(3),e.ALo(4,"mytranslate"),e.qZA(),e.TgZ(5,"span",190),e.YNc(6,_I,4,8,"span",193),e.YNc(7,fI,3,3,"span",11),e.qZA()()()),2&n){const t=e.oxw(2).$implicit;e.xp6(3),e.hij("",e.lcZ(4,3,"lang_testbank_folder_and_file_delivery_for"),":\xa0"),e.xp6(3),e.Q6J("ngIf",t.exam.classrooms&&t.exam.classrooms.length>0),e.xp6(1),e.Q6J("ngIf",!t.exam.classrooms||0==t.exam.classrooms.length)}}function xI(n,o){if(1&n&&(e.TgZ(0,"div",158)(1,"div",159)(2,"span",160),e._uU(3),e.ALo(4,"mytranslate"),e.qZA(),e._uU(5),e.ALo(6,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.qZA()()),2&n){const t=e.oxw(2).$implicit;e.xp6(3),e.hij("",e.lcZ(4,2,"lang_testbank_folder_and_file_time_update"),":\xa0"),e.xp6(2),e.hij(" ",e.lcZ(6,4,t.exam.updatedAt)," ")}}function bI(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",162)(1,"div",163)(2,"div",164)(3,"div",118)(4,"div",119)(5,"div",120),e.YNc(6,sI,2,3,"span",133),e.ALo(7,"fullPermission"),e.ALo(8,"copyPermission"),e.YNc(9,lI,1,1,"ng-template",null,165,e.W1O),e.qZA(),e.TgZ(11,"div",166),e.NdJ("mouseup",function(a){e.CHM(t);const r=e.oxw().$implicit,s=e.oxw(2);return e.KtG(2===a.button||s.redirectByDocumentAction(r.exam,s.enumDocumentRedirectType.TESTED_LIST,1===a.button))}),e.TgZ(12,"div",167),e.YNc(13,cI,5,3,"svg",168),e.YNc(14,uI,4,3,"svg",169),e.qZA(),e.TgZ(15,"div",126,48)(17,"span"),e._uU(18),e.qZA(),e.YNc(19,dI,3,4,"span",170),e.qZA(),e.YNc(20,mI,6,3,"div",171),e.qZA()(),e.YNc(21,pI,5,0,"button",172),e.qZA(),e.YNc(22,hI,7,4,"div",131),e.YNc(23,AI,10,8,"div",131),e.YNc(24,gI,8,5,"div",173),e.YNc(25,xI,7,6,"div",131),e.qZA()()()}if(2&n){const t=e.MAs(10),i=e.MAs(16),a=e.oxw(),r=a.$implicit,s=a.last,l=e.oxw(2),c=e.MAs(84),u=e.MAs(74);e.Q6J("ngStyle",e.VKq(29,rw,l.isSelectedExamInClipboard(r.exam)?"0.6":"1"))("contextMenu",!r.exam||l.commonService.isEmptyObj(r.exam.permissionObj)?c:u)("contextMenuValue",r.exam),e.xp6(1),e.Q6J("ngClass",e.VKq(31,qg,!s)),e.xp6(2),e.Q6J("ngClass",e.WLB(33,ih,!l.isMobileWebView,l.isMobileWebView)),e.xp6(3),e.Q6J("ngIf",e.xi3(7,23,r.exam,"exam")||e.xi3(8,26,r.exam,"exam"))("ngIfElse",t),e.xp6(7),e.Q6J("ngIf",1==r.exam.isPublished),e.xp6(1),e.Q6J("ngIf",1!=r.exam.isPublished),e.xp6(1),e.s9C("matTooltip",r.exam.name),e.Q6J("isDisabledTooltip",!1)("matTooltipDisabled",i.isDisabled),e.xp6(2),e.Gre("mb-0 d-block ",l.isMobileWebView?"azt-wv-item-name":"",""),e.xp6(1),e.Oqu(r.exam.name),e.xp6(1),e.Q6J("ngIf",l.isMobileWebView),e.xp6(1),e.Q6J("ngIf",r.shared),e.xp6(1),e.Q6J("ngIf",l.isMobileDevice&&null!=r.exam.permissionObj),e.xp6(1),e.Q6J("ngIf",!l.isMobileWebView),e.xp6(1),e.Q6J("ngIf",!l.isMobileWebView),e.xp6(1),e.Q6J("ngIf",!l.isMobileWebView),e.xp6(1),e.Q6J("ngIf",!l.isMobileWebView)}}function vI(n,o){if(1&n&&(e.ynx(0),e.YNc(1,bI,26,36,"div",161),e.BQk()),2&n){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",t.exam)}}const lw=function(n,o){return{"overflow-x-auto":n,"overflow-x-visible":o}},Rg=function(n){return{"min-width":n}},cw=function(n,o){return{"ml-5":n,"ml-3":o}};function wI(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"form",90)(1,"div",91),e.NdJ("contextmenu",function(){return!1}),e.TgZ(2,"div",92)(3,"div",93)(4,"div",94),e.YNc(5,FO,2,0,"ng-container",11),e.ALo(6,"editPermission"),e.TgZ(7,"div",95),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.sortDocumentByColumn(a.enumDocumentSortType.BY_NAME,null==a.currentDocumentSortTypeObj?null:a.currentDocumentSortTypeObj.isAscSort))}),e._uU(8),e.ALo(9,"mytranslate"),e.TgZ(10,"div",96),e.O4$(),e.TgZ(11,"svg",97),e._UZ(12,"polyline",98),e.qZA(),e.TgZ(13,"svg",99),e._UZ(14,"polyline",100),e.qZA()()()(),e.YNc(15,NO,10,9,"div",101),e.YNc(16,ZO,10,9,"div",101),e.YNc(17,DO,4,3,"div",101),e.YNc(18,UO,10,9,"div",101),e.qZA()(),e.kcU(),e.TgZ(19,"div",102),e.YNc(20,oI,27,39,"div",103),e.YNc(21,vI,2,1,"ng-container",104),e.qZA(),e._UZ(22,"div",105),e.qZA()()}if(2&n){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(1),e.Q6J("ngClass",e.WLB(21,lw,!t.isMobileDevice,t.isMobileDevice)),e.xp6(1),e.Q6J("ngStyle",e.VKq(24,Rg,t.isMobileWebView?"":"1100px")),e.xp6(2),e.Q6J("ngClass",e.WLB(26,ih,!t.isMobileWebView,t.isMobileWebView)),e.xp6(1),e.Q6J("ngIf",-1!=t.currentCategoryId&&!(null!=t.currentCategory&&t.currentCategory.isGlobalAzota)||e.xi3(6,16,t.currentCategory,"category")),e.xp6(2),e.Q6J("ngClass",e.WLB(29,cw,!t.isMobileWebView,t.isMobileWebView)),e.xp6(1),e.hij(" ",e.lcZ(9,19,"lang_testbank_folder_and_file_name")," "),e.xp6(3),e.Q6J("ngClass",e.VKq(32,xc,1==(null==t.currentDocumentSortTypeObj?null:t.currentDocumentSortTypeObj.isAscSort)&&(null==t.currentDocumentSortTypeObj?null:t.currentDocumentSortTypeObj.isColumnSortType)==t.enumDocumentSortType.BY_NAME)),e.xp6(2),e.Q6J("ngClass",e.VKq(34,xc,0==(null==t.currentDocumentSortTypeObj?null:t.currentDocumentSortTypeObj.isAscSort)&&(null==t.currentDocumentSortTypeObj?null:t.currentDocumentSortTypeObj.isColumnSortType)==t.enumDocumentSortType.BY_NAME)),e.xp6(2),e.Q6J("ngIf",!t.isMobileWebView),e.xp6(1),e.Q6J("ngIf",!t.isMobileWebView),e.xp6(1),e.Q6J("ngIf",!t.isMobileWebView),e.xp6(1),e.Q6J("ngIf",!t.isMobileWebView),e.xp6(1),e.Q6J("ngStyle",e.VKq(36,Rg,t.isMobileWebView?"":"1100px")),e.xp6(1),e.Q6J("ngForOf",t.categoryObjs),e.xp6(1),e.Q6J("ngForOf",t.documentObjs)}}const Jx=function(n,o){return{"col-span-8":n,"col-span-12":o}};function yI(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",92)(1,"div",93)(2,"div",94)(3,"div",197),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.sortDocumentByColumn(a.enumDocumentSortType.BY_NAME,null==a.currentDocumentSortTypeObj?null:a.currentDocumentSortTypeObj.isAscSort))}),e._uU(4),e.ALo(5,"mytranslate"),e.TgZ(6,"div",96),e.O4$(),e.TgZ(7,"svg",97),e._UZ(8,"polyline",98),e.qZA(),e.TgZ(9,"svg",99),e._UZ(10,"polyline",100),e.qZA()()()(),e.kcU(),e.TgZ(11,"div",198)(12,"div",199)(13,"span",109),e._uU(14),e.ALo(15,"mytranslate"),e.qZA()()()()()}if(2&n){const t=e.oxw(2);e.Q6J("ngStyle",e.VKq(12,Rg,t.isMobileWebView?"":"1100px")),e.xp6(2),e.Q6J("ngClass",e.WLB(14,ih,!t.isMobileWebView,t.isMobileWebView)),e.xp6(1),e.Q6J("ngClass",e.WLB(17,cw,!t.isMobileWebView,t.isMobileWebView)),e.xp6(1),e.hij(" ",e.lcZ(5,8,"lang_testbank_folder_and_file_name")," "),e.xp6(3),e.Q6J("ngClass",e.VKq(20,xc,1==(null==t.currentDocumentSortTypeObj?null:t.currentDocumentSortTypeObj.isAscSort)&&(null==t.currentDocumentSortTypeObj?null:t.currentDocumentSortTypeObj.isColumnSortType)==t.enumDocumentSortType.BY_NAME)),e.xp6(2),e.Q6J("ngClass",e.VKq(22,xc,0==(null==t.currentDocumentSortTypeObj?null:t.currentDocumentSortTypeObj.isAscSort)&&(null==t.currentDocumentSortTypeObj?null:t.currentDocumentSortTypeObj.isColumnSortType)==t.enumDocumentSortType.BY_NAME)),e.xp6(2),e.Q6J("ngClass",e.WLB(24,Jx,!t.isMobileWebView,t.isMobileWebView)),e.xp6(3),e.hij(" ",e.lcZ(15,10,"lang_testbank_folder_and_file_paths")," ")}}function CI(n,o){1&n&&(e.TgZ(0,"span"),e.O4$(),e.TgZ(1,"svg",145),e.ALo(2,"mytranslate"),e._UZ(3,"path",146)(4,"path",147)(5,"path",148),e.qZA()()),2&n&&(e.xp6(1),e.s9C("matTooltip",e.lcZ(2,1,"lang_auto_da_chia_se")))}function TI(n,o){1&n&&(e.O4$(),e.TgZ(0,"svg",149),e._UZ(1,"path",150),e.qZA())}function kI(n,o){1&n&&(e.TgZ(0,"span",152),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_auto_chia_se")))}function SI(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",205),e.NdJ("click",function(a){e.CHM(t);const r=e.oxw().$implicit,s=e.oxw(2),l=e.MAs(71);return e.KtG(s.onContextMenu(a,r,l))}),e.O4$(),e.TgZ(1,"svg",154),e._UZ(2,"circle",78)(3,"circle",79)(4,"circle",80),e.qZA()()}if(2&n){const t=e.oxw().$implicit;e.Q6J("disabled",!t.id||t.id<0||"user"==t.shareType)}}function EI(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.name)," ")}}function OI(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.name," ")}}const II=function(n){return{cursor:n}};function MI(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li",210)(1,"a",211),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw(4);return e.KtG("DOC"!=r.type&&s.goToBreadPath(r))}),e.TgZ(2,"span",47,48),e.ALo(4,"mytranslate"),e.YNc(5,EI,3,3,"span",11),e.YNc(6,OI,2,1,"span",11),e.qZA()()()}if(2&n){const t=o.$implicit,i=e.MAs(3),a=e.oxw(2).$implicit;e.Q6J("ngClass",e.VKq(10,zx,t.id!=a.id)),e.xp6(1),e.Q6J("ngStyle",e.VKq(12,II,"DOC"!=t.type?"pointer":"default")),e.xp6(1),e.s9C("matTooltip",e.lcZ(4,8,t.name)),e.Q6J("ngClass",e.VKq(14,Hx,t.id!=a.id))("isDisabledTooltip",!1)("matTooltipDisabled",i.isDisabled),e.xp6(3),e.Q6J("ngIf",-1==t.id),e.xp6(1),e.Q6J("ngIf",-1!=t.id)}}function LI(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"ol",206)(2,"li",207)(3,"a",208),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.goBackToAllCategoryPageEvent())}),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()(),e.YNc(6,MI,7,16,"li",209),e.qZA(),e.BQk()}if(2&n){const t=e.oxw().$implicit;e.xp6(4),e.hij(" ",e.lcZ(5,2,"lang_auto_tat_ca")," "),e.xp6(2),e.Q6J("ngForOf",t.paths)}}function BI(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",200)(1,"div",201)(2,"div",202)(3,"div",118)(4,"div",119)(5,"div",203),e.NdJ("mouseup",function(a){const s=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(2===a.button||l.handleOpenFolder(s,1===a.button))}),e.TgZ(6,"div",124),e.YNc(7,CI,6,3,"span",121),e.YNc(8,TI,2,0,"ng-template",null,144,e.W1O),e.qZA(),e.TgZ(10,"div",126,48),e.ALo(12,"mytranslate"),e.TgZ(13,"span"),e._uU(14),e.ALo(15,"mytranslate"),e.qZA()(),e.YNc(16,kI,3,3,"span",128),e.qZA()(),e.YNc(17,SI,5,1,"button",204),e.qZA(),e.TgZ(18,"div",198),e.YNc(19,LI,7,4,"ng-container",11),e.qZA()()()()}if(2&n){const t=o.$implicit,i=o.last,a=e.MAs(9),r=e.MAs(11),s=e.oxw(2),l=e.MAs(84),c=e.MAs(71);e.s9C("id","folder_"+t.id),e.Q6J("contextMenu",!t.id||t.id<0||"user"==t.shareType?l:c)("contextMenuValue",t),e.xp6(1),e.Q6J("ngClass",e.VKq(23,qg,s.categoryObjs&&(24!=s.categoryObjs.length||24==s.categoryObjs.length&&!i))),e.xp6(2),e.Q6J("ngClass",e.WLB(25,ih,!s.isMobileWebView,s.isMobileWebView)),e.xp6(2),e.Q6J("ngClass",e.WLB(28,sw,-1==t.id,-1!=t.id)),e.xp6(2),e.Q6J("ngIf",t.shared)("ngIfElse",a),e.xp6(3),e.s9C("matTooltip",e.lcZ(12,19,t.name)),e.Q6J("isDisabledTooltip",!1)("matTooltipDisabled",r.isDisabled),e.xp6(3),e.Tol(s.isMobileWebView&&-1!=t.id?"azt-wv-item-name":""),e.xp6(1),e.Oqu(e.lcZ(15,21,t.name)),e.xp6(2),e.Q6J("ngIf",-1==t.id),e.xp6(1),e.Q6J("ngIf",s.isMobileDevice&&-1!=t.id),e.xp6(1),e.Q6J("ngClass",e.WLB(31,Jx,!s.isMobileWebView,s.isMobileWebView)),e.xp6(1),e.Q6J("ngIf",null==t.paths?null:t.paths.length)}}function PI(n,o){1&n&&(e.O4$(),e.TgZ(0,"svg",176),e.ALo(1,"mytranslate"),e._UZ(2,"path",177)(3,"polyline",178)(4,"path",179),e.qZA()),2&n&&e.s9C("matTooltip",e.lcZ(1,1,"lang_testbank_folder_and_file_published"))}function QI(n,o){1&n&&(e.O4$(),e.TgZ(0,"svg",176),e.ALo(1,"mytranslate"),e._UZ(2,"path",177)(3,"polyline",178),e.qZA()),2&n&&e.s9C("matTooltip",e.lcZ(1,1,"lang_testbank_folder_and_file_Unpublished"))}function FI(n,o){if(1&n&&(e.TgZ(0,"span",180),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n){const t=e.oxw(2).$implicit;e.xp6(1),e.AsE("",e.lcZ(2,2,"lang_testbank_folder_and_file_number_attended"),": ",t.exam.attended,"")}}function NI(n,o){1&n&&(e.TgZ(0,"div",181),e.O4$(),e.TgZ(1,"svg",182),e.ALo(2,"mytranslate"),e._UZ(3,"path",183)(4,"path",184)(5,"path",185),e.qZA()()),2&n&&(e.xp6(1),e.s9C("matTooltip",e.lcZ(2,1,"lang_auto_da_chia_se")))}function ZI(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",219),e.NdJ("click",function(a){e.CHM(t);const r=e.oxw(2).$implicit,s=e.oxw(2),l=e.MAs(74);return e.KtG(s.onContextMenu(a,r.exam,l))}),e.O4$(),e.TgZ(1,"svg",154),e._UZ(2,"circle",78)(3,"circle",79)(4,"circle",80),e.qZA()()}}function DI(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.name)," ")}}function UI(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.name," ")}}const jI=function(n){return{"max-width":"100%",display:"block",cursor:n}};function qI(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li",210)(1,"a",221),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw(5);return e.KtG("DOC"!=r.type&&s.goToBreadPath(r))}),e.TgZ(2,"span",47,48),e.ALo(4,"mytranslate"),e.YNc(5,DI,3,3,"span",11),e.YNc(6,UI,2,1,"span",11),e.qZA()()()}if(2&n){const t=o.$implicit,i=e.MAs(3),a=e.oxw(3).$implicit;e.Q6J("ngClass",e.VKq(11,zx,t.id!=a.exam.id)),e.xp6(1),e.Akn(e.VKq(13,jI,t.id!=a.exam.id?"pointer":"default")),e.xp6(1),e.s9C("matTooltip",e.lcZ(4,9,t.name)),e.Q6J("ngClass",e.VKq(15,Hx,t.id!=a.exam.id))("isDisabledTooltip",!1)("matTooltipDisabled",i.isDisabled),e.xp6(3),e.Q6J("ngIf",-1==t.id),e.xp6(1),e.Q6J("ngIf",-1!=t.id)}}function RI(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"ol",206)(2,"li",207)(3,"a",220),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(4);return e.KtG(a.goBackToAllCategoryPageEvent())}),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()(),e.YNc(6,qI,7,17,"li",209),e.qZA(),e.BQk()}if(2&n){const t=e.oxw(2).$implicit;e.xp6(4),e.hij(" ",e.lcZ(5,2,"lang_auto_tat_ca")," "),e.xp6(2),e.Q6J("ngForOf",t.paths)}}function zI(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",213)(1,"div",214)(2,"div",215)(3,"div",118)(4,"div",216),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,r=e.oxw(2);return e.KtG(r.redirectByDocumentAction(a.exam,r.enumDocumentRedirectType.TESTED_LIST))}),e.TgZ(5,"div",217)(6,"div",167),e.YNc(7,PI,5,3,"svg",168),e.YNc(8,QI,4,3,"svg",169),e.qZA(),e.TgZ(9,"div",126,48)(11,"span"),e._uU(12),e.qZA(),e.YNc(13,FI,3,4,"span",170),e.qZA(),e.YNc(14,NI,6,3,"div",171),e.qZA()(),e.YNc(15,ZI,5,0,"button",218),e.qZA(),e.TgZ(16,"div",198),e.YNc(17,RI,7,4,"ng-container",11),e.qZA()()()()}if(2&n){const t=e.MAs(10),i=e.oxw(),a=i.$implicit,r=i.last,s=e.oxw(2),l=e.MAs(84),c=e.MAs(74);e.s9C("id","exam_"+a.exam.id),e.Q6J("contextMenu",!a.exam||s.commonService.isEmptyObj(a.exam.permissionObj)?l:c)("contextMenuValue",a.exam),e.xp6(1),e.Q6J("ngClass",e.VKq(19,qg,!r)),e.xp6(2),e.Q6J("ngClass",e.WLB(21,ih,!s.isMobileWebView,s.isMobileWebView)),e.xp6(4),e.Q6J("ngIf",1==a.exam.isPublished),e.xp6(1),e.Q6J("ngIf",1!=a.exam.isPublished),e.xp6(1),e.s9C("matTooltip",a.exam.name),e.Q6J("isDisabledTooltip",!1)("matTooltipDisabled",t.isDisabled),e.xp6(2),e.Gre("mb-0 d-block ",s.isMobileWebView?"azt-wv-item-name":"",""),e.xp6(1),e.Oqu(a.exam.name),e.xp6(1),e.Q6J("ngIf",s.isMobileWebView),e.xp6(1),e.Q6J("ngIf",a.shared),e.xp6(1),e.Q6J("ngIf",s.isMobileDevice&&null!=a.exam.permissionObj),e.xp6(1),e.Q6J("ngClass",e.WLB(24,Jx,!s.isMobileWebView,s.isMobileWebView)),e.xp6(1),e.Q6J("ngIf",null==a.paths?null:a.paths.length)}}function HI(n,o){if(1&n&&(e.ynx(0),e.YNc(1,zI,18,27,"div",212),e.BQk()),2&n){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",t.exam)}}function JI(n,o){if(1&n&&(e.TgZ(0,"div",91),e.NdJ("contextmenu",function(){return!1}),e.TgZ(1,"div",102),e.YNc(2,yI,16,27,"div",195),e.YNc(3,BI,20,34,"div",196),e.YNc(4,HI,2,1,"ng-container",104),e.qZA(),e._UZ(5,"div",105),e.qZA()),2&n){const t=e.oxw();e.Q6J("ngClass",e.WLB(5,lw,!t.isMobileDevice,t.isMobileDevice)),e.xp6(1),e.Q6J("ngStyle",e.VKq(8,Rg,t.isMobileWebView?"":"1100px")),e.xp6(1),e.Q6J("ngIf",!t.isMobileDevice),e.xp6(1),e.Q6J("ngForOf",t.categoryObjs),e.xp6(1),e.Q6J("ngForOf",t.documentObjs)}}function KI(n,o){1&n&&(e.TgZ(0,"li"),e._UZ(1,"hr",225),e.qZA())}function GI(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"a",226),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2).$implicit,r=e.oxw();return e.KtG(r.handleEditFolder(a))}),e.O4$(),e.TgZ(2,"svg",227),e._UZ(3,"path",228)(4,"path",229),e.qZA(),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()()}2&n&&(e.xp6(5),e.hij(" ",e.lcZ(6,1,"lang_button_edit")," "))}function YI(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"a",230),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2).$implicit,r=e.oxw();return e.KtG(r.acceptCopyAllDocumentObjs(void 0,a))}),e.O4$(),e.TgZ(2,"svg",67),e._UZ(3,"path",231)(4,"path",232),e.qZA(),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()()}2&n&&(e.xp6(5),e.hij(" ",e.lcZ(6,1,"lang_auto_copy")," "))}function $I(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"a",233),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2).$implicit,r=e.oxw();return e.KtG(r.acceptCutAllDocumentObjs(void 0,a))}),e.O4$(),e.TgZ(2,"svg",67),e._UZ(3,"polyline",60)(4,"polyline",61)(5,"polyline",62)(6,"polyline",63)(7,"line",64)(8,"line",65),e.qZA(),e._uU(9),e.ALo(10,"mytranslate"),e.qZA()()}2&n&&(e.xp6(9),e.hij(" ",e.lcZ(10,1,"lang_auto_cut")," "))}function VI(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"a",234),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2).$implicit,r=e.oxw();return e.KtG(r.handlePasteDataToFolder(a.id))}),e.O4$(),e.TgZ(2,"svg",67),e._UZ(3,"rect",68)(4,"path",69),e.qZA(),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()()}2&n&&(e.xp6(5),e.hij(" ",e.lcZ(6,1,"lang_auto_paste")," "))}function WI(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"a",235),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.cancelAllActionOfDocumentObjs())}),e.O4$(),e.TgZ(2,"svg",67),e._UZ(3,"circle",26)(4,"line",236)(5,"line",237),e.qZA(),e._uU(6),e.ALo(7,"mytranslate"),e.qZA()()}2&n&&(e.xp6(6),e.hij(" ",e.lcZ(7,1,"lang_auto_huy_copycut")," "))}function XI(n,o){1&n&&(e.TgZ(0,"li"),e._UZ(1,"hr",225),e.qZA())}function eM(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"a",238),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2).$implicit,r=e.oxw();return e.KtG(r.acceptDeleteAllDocumentObjs(void 0,a))}),e.O4$(),e.TgZ(2,"svg",239),e._UZ(3,"path",71)(4,"path",72)(5,"path",73)(6,"line",74)(7,"line",75),e.qZA(),e._uU(8),e.ALo(9,"mytranslate"),e.qZA()()}2&n&&(e.xp6(8),e.hij(" ",e.lcZ(9,1,"lang_button_delete")," "))}function tM(n,o){if(1&n&&(e.TgZ(0,"div",223)(1,"ul",17)(2,"li"),e._UZ(3,"azt-share",224),e.qZA(),e.YNc(4,KI,2,0,"li",11),e.ALo(5,"fullPermission"),e.YNc(6,GI,7,3,"li",11),e.ALo(7,"editPermission"),e.YNc(8,YI,7,3,"li",11),e.ALo(9,"copyPermission"),e.YNc(10,$I,11,3,"li",11),e.ALo(11,"deletePermission"),e.YNc(12,VI,7,3,"li",11),e.ALo(13,"editPermission"),e.YNc(14,WI,8,3,"li",11),e.ALo(15,"editPermission"),e.YNc(16,XI,2,0,"li",11),e.ALo(17,"fullPermission"),e.YNc(18,eM,10,3,"li",11),e.ALo(19,"deletePermission"),e.qZA()()),2&n){const t=e.oxw().$implicit,i=e.oxw();e.xp6(3),e.Q6J("objectCodeType",4)("typeDisplay","menu")("objectCode","CATEGORY")("objectId",t.id)("categoryWithPermissionObj",t),e.xp6(1),e.Q6J("ngIf",e.xi3(5,13,t,"category")),e.xp6(2),e.Q6J("ngIf",e.xi3(7,16,t,"category")),e.xp6(2),e.Q6J("ngIf",e.xi3(9,19,t,"category")),e.xp6(2),e.Q6J("ngIf",e.xi3(11,22,t,"category")),e.xp6(2),e.Q6J("ngIf",e.xi3(13,25,1==i.hasCopyOrCutInClipboard()&&!i.checkPasteFunc(t.id)&&t,"category")),e.xp6(2),e.Q6J("ngIf",e.xi3(15,28,i.hasCopyOrCutInClipboard()&&t,"category")),e.xp6(2),e.Q6J("ngIf",e.xi3(17,31,t,"category")),e.xp6(2),e.Q6J("ngIf",e.xi3(19,34,t,"category"))}}function nM(n,o){1&n&&(e.YNc(0,tM,20,37,"div",222),e.ALo(1,"editPermission")),2&n&&e.Q6J("ngIf",e.xi3(1,1,o.$implicit,"category"))}function iM(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"a",244),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2).$implicit,r=e.oxw();return e.KtG(r.doExamAction(a,r.enumDocumentDoExamActionType.SHOW_EXAM_DETAIL))}),e.O4$(),e.TgZ(2,"svg",239),e._UZ(3,"circle",26)(4,"line",245)(5,"line",246),e.qZA(),e._uU(6),e.ALo(7,"mytranslate"),e.qZA()()}2&n&&(e.xp6(6),e.hij(" ",e.lcZ(7,1,"lang_auto_xem_noi_dung_de")," "))}function oM(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"a",247),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2).$implicit,r=e.oxw();return e.KtG(r.redirectByDocumentAction(a,r.enumDocumentRedirectType.TESTED_LIST))}),e.O4$(),e.TgZ(2,"svg",239),e._UZ(3,"path",248)(4,"circle",249)(5,"path",250)(6,"path",251),e.qZA(),e._uU(7),e.ALo(8,"mytranslate"),e.qZA()()}2&n&&(e.xp6(7),e.hij(" ",e.lcZ(8,1,"lang_auto_danh_sach_da_lam")," "))}function aM(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"a",252),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2).$implicit,r=e.oxw();return e.KtG(r.doExamAction(a,r.enumDocumentDoExamActionType.COPY_EXAM_LINK))}),e.O4$(),e.TgZ(2,"svg",239),e._UZ(3,"path",253)(4,"path",254),e.qZA(),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()()}if(2&n){const t=e.oxw(2).$implicit,i=e.oxw();e.xp6(1),e.Q6J("cdkCopyToClipboard",i.getExamTestLink(t)),e.xp6(4),e.hij(" ",e.lcZ(6,2,"lang_auto_copy_link")," ")}}function rM(n,o){1&n&&(e.TgZ(0,"li"),e._UZ(1,"hr",225),e.qZA())}function sM(n,o){if(1&n&&(e.TgZ(0,"li"),e._UZ(1,"azt-share",224),e.qZA()),2&n){const t=e.oxw(2).$implicit;e.xp6(1),e.Q6J("objectCodeType",3)("typeDisplay","menu")("objectCode","EXAM")("objectId",t.id)("categoryWithPermissionObj",t)}}function lM(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"a",255),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2).$implicit,r=e.oxw();return e.KtG(r.redirectByDocumentAction(a,r.enumDocumentRedirectType.CONFIG_EXAM))}),e.O4$(),e.TgZ(2,"svg",67),e._UZ(3,"path",256)(4,"path",257)(5,"path",258)(6,"path",259)(7,"path",260)(8,"path",261)(9,"path",262)(10,"path",263)(11,"path",264)(12,"path",265)(13,"path",266)(14,"path",267)(15,"path",268)(16,"path",269),e.qZA(),e._uU(17),e.ALo(18,"mytranslate"),e.qZA()()}2&n&&(e.xp6(17),e.hij(" ",e.lcZ(18,1,"lang_auto_cai_dat")," "))}function cM(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"a",270),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3).$implicit,r=e.oxw();return e.KtG(r.redirectByDocumentAction(a,r.enumDocumentRedirectType.EDIT_EXAM))}),e.O4$(),e.TgZ(2,"svg",67),e._UZ(3,"path",271)(4,"path",272),e.qZA(),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()()}2&n&&(e.xp6(5),e.hij(" ",e.lcZ(6,1,"lang_testbank_folder_and_file_edit")," "))}function uM(n,o){if(1&n&&(e.ynx(0),e.YNc(1,cM,7,3,"li",11),e.ALo(2,"isOfflineExamWithCustomMixMark"),e.ALo(3,"editPermission"),e.BQk()),2&n){const t=e.oxw(2).$implicit;e.xp6(1),e.Q6J("ngIf",e.lcZ(2,1,t)&&e.xi3(3,3,t,"exam"))}}function dM(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"a",273),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3).$implicit,r=e.oxw();return e.KtG(r.redirectByDocumentAction(a,r.enumDocumentRedirectType.EDIT_EXAM))}),e.O4$(),e.TgZ(2,"svg",67),e._UZ(3,"path",271)(4,"path",272),e.qZA(),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()()}2&n&&(e.xp6(5),e.hij(" ",e.lcZ(6,1,"lang_testbank_folder_and_file_edit")," "))}function mM(n,o){if(1&n&&(e.YNc(0,dM,7,3,"li",11),e.ALo(1,"editPermission")),2&n){const t=e.oxw(2).$implicit;e.Q6J("ngIf",e.xi3(1,1,t,"exam"))}}function pM(n,o){1&n&&(e.ynx(0),e.O4$(),e.TgZ(1,"svg",67),e._UZ(2,"polyline",275),e.qZA(),e._uU(3),e.ALo(4,"mytranslate"),e.BQk()),2&n&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"lang_testbank_folder_and_file_publish")," "))}function hM(n,o){1&n&&(e.ynx(0),e.O4$(),e.TgZ(1,"svg",67),e._UZ(2,"line",276)(3,"line",277),e.qZA(),e._uU(4),e.ALo(5,"mytranslate"),e.BQk()),2&n&&(e.xp6(4),e.hij(" ",e.lcZ(5,1,"lang_auto_huy_xuat_ban")," "))}function AM(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"a",274),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2).$implicit,r=e.oxw();return e.KtG(r.changePublishStatus(a,void 0,1==a.isPublished?0:1))}),e.YNc(2,pM,5,3,"ng-container",11),e.YNc(3,hM,6,3,"ng-container",11),e.qZA()()}if(2&n){const t=e.oxw(2).$implicit;e.xp6(2),e.Q6J("ngIf",0==t.isPublished),e.xp6(1),e.Q6J("ngIf",1==t.isPublished)}}function _M(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"a",278),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2).$implicit,r=e.oxw();return e.KtG(r.redirectByDocumentAction(a,r.enumDocumentRedirectType.STATISTIC))}),e.O4$(),e.TgZ(2,"svg",67),e._UZ(3,"path",279)(4,"path",280),e.qZA(),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()()}2&n&&(e.xp6(5),e.hij(" ",e.lcZ(6,1,"lang_auto_thong_ke")," "))}function fM(n,o){1&n&&(e.TgZ(0,"li"),e._UZ(1,"hr",225),e.qZA())}function gM(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"a",281),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3).$implicit,r=e.oxw();return e.KtG(r.acceptCopyAllDocumentObjs(a,void 0))}),e.O4$(),e.TgZ(2,"svg",20),e._UZ(3,"rect",52)(4,"path",53),e.qZA(),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()()}2&n&&(e.xp6(5),e.hij(" ",e.lcZ(6,1,"lang_auto_copy")," "))}function xM(n,o){if(1&n&&(e.ynx(0),e.YNc(1,gM,7,3,"li",11),e.ALo(2,"copyPermission"),e.ALo(3,"isOfflineExamWithCustomMixMark"),e.BQk()),2&n){const t=e.oxw(2).$implicit;e.xp6(1),e.Q6J("ngIf",e.xi3(2,1,e.lcZ(3,4,t)&&t,"exam"))}}function bM(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"a",282),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3).$implicit,r=e.oxw();return e.KtG(r.acceptCopyAllDocumentObjs(a,void 0))}),e.O4$(),e.TgZ(2,"svg",20),e._UZ(3,"rect",52)(4,"path",53),e.qZA(),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()()}2&n&&(e.xp6(5),e.hij(" ",e.lcZ(6,1,"lang_auto_copy")," "))}function vM(n,o){if(1&n&&(e.YNc(0,bM,7,3,"li",11),e.ALo(1,"copyPermission")),2&n){const t=e.oxw(2).$implicit;e.Q6J("ngIf",e.xi3(1,1,t,"exam"))}}function wM(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"a",283),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2).$implicit,r=e.oxw();return e.KtG(r.acceptCutAllDocumentObjs(a,void 0))}),e.O4$(),e.TgZ(2,"svg",20),e._UZ(3,"polyline",60)(4,"polyline",61)(5,"polyline",62)(6,"polyline",63)(7,"line",64)(8,"line",65),e.qZA(),e._uU(9),e.ALo(10,"mytranslate"),e.qZA()()}2&n&&(e.xp6(9),e.hij(" ",e.lcZ(10,1,"lang_auto_cut")," "))}function yM(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"a",284),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2).$implicit,r=e.oxw();return e.KtG(r.acceptDeleteAllDocumentObjs(a,void 0))}),e.O4$(),e.TgZ(2,"svg",20),e._UZ(3,"path",71)(4,"path",72)(5,"path",73)(6,"line",74)(7,"line",75),e.qZA(),e._uU(8),e.ALo(9,"mytranslate"),e.qZA()()}2&n&&(e.xp6(8),e.hij(" ",e.lcZ(9,1,"lang_button_delete")," "))}function CM(n,o){1&n&&(e.TgZ(0,"li"),e._UZ(1,"hr",225),e.qZA())}const TM=function(n){return{"padding-bottom":n}};function kM(n,o){if(1&n&&(e.TgZ(0,"div",241)(1,"ul",17),e.ALo(2,"configPermission"),e.YNc(3,iM,8,3,"li",11),e.ALo(4,"viewPermission"),e.ALo(5,"globalCopyPermission"),e.YNc(6,oM,9,3,"li",11),e.ALo(7,"configAndViewPermission"),e.ALo(8,"configAndMarkPermission"),e.ALo(9,"viewPermission"),e.ALo(10,"configPermission"),e.ALo(11,"globalCopyPermission"),e.YNc(12,aM,7,4,"li",11),e.ALo(13,"viewPermission"),e.ALo(14,"configPermission"),e.ALo(15,"isOfflineExam"),e.ALo(16,"globalCopyPermission"),e.YNc(17,rM,2,0,"li",11),e.ALo(18,"editPermission"),e.ALo(19,"configPermission"),e.ALo(20,"globalCopyPermission"),e.YNc(21,sM,2,5,"li",11),e.ALo(22,"viewPermission"),e.ALo(23,"globalCopyPermission"),e.YNc(24,lM,19,3,"li",11),e.ALo(25,"editPermission"),e.YNc(26,uM,4,6,"ng-container",121),e.ALo(27,"isOfflineExam"),e.YNc(28,mM,2,4,"ng-template",null,242,e.W1O),e.YNc(30,AM,4,2,"li",11),e.ALo(31,"editPermission"),e.YNc(32,_M,7,3,"li",11),e.ALo(33,"statisticalPermission"),e.ALo(34,"globalCopyPermission"),e.YNc(35,fM,2,0,"li",11),e.ALo(36,"copyPermission"),e.ALo(37,"fullPermission"),e.ALo(38,"deletePermission"),e.YNc(39,xM,4,6,"ng-container",121),e.ALo(40,"isOfflineExam"),e.YNc(41,vM,2,4,"ng-template",null,243,e.W1O),e.YNc(43,wM,11,3,"li",11),e.ALo(44,"fullPermission"),e.YNc(45,yM,10,3,"li",11),e.ALo(46,"deletePermission"),e.YNc(47,CM,2,0,"li",11),e.ALo(48,"configPermission"),e.qZA()()),2&n){const t=e.MAs(29),i=e.MAs(42),a=e.oxw().$implicit;e.xp6(1),e.Akn(e.VKq(102,TM,e.xi3(2,18,a,"exam")?"46px":"7px")),e.xp6(2),e.Q6J("ngIf",e.xi3(4,21,a,"exam")||e.xi3(5,24,a,"exam")),e.xp6(3),e.Q6J("ngIf",e.xi3(7,27,a,"exam")||e.xi3(8,30,a,"exam")||e.xi3(9,33,a,"exam")||e.xi3(10,36,a,"exam")||!e.xi3(11,39,a,"exam")),e.xp6(6),e.Q6J("ngIf",(e.xi3(13,42,a,"exam")||e.xi3(14,45,a,"exam"))&&!e.lcZ(15,48,a)||!e.xi3(16,50,a,"exam")),e.xp6(5),e.Q6J("ngIf",e.xi3(18,53,a,"exam")||e.xi3(19,56,a,"exam")||!e.xi3(20,59,a,"exam")),e.xp6(4),e.Q6J("ngIf",e.xi3(22,62,a,"exam")||e.xi3(23,65,a,"exam")),e.xp6(3),e.Q6J("ngIf",e.xi3(25,68,a,"exam")),e.xp6(2),e.Q6J("ngIf",e.lcZ(27,71,a))("ngIfElse",t),e.xp6(4),e.Q6J("ngIf",e.xi3(31,73,a,"exam")),e.xp6(2),e.Q6J("ngIf",e.xi3(33,76,a,"exam")||!e.xi3(34,79,a,"exam")),e.xp6(3),e.Q6J("ngIf",e.xi3(36,82,a,"exam")||e.xi3(37,85,a,"exam")||e.xi3(38,88,a,"exam")),e.xp6(4),e.Q6J("ngIf",e.lcZ(40,91,a.orcLogId))("ngIfElse",i),e.xp6(4),e.Q6J("ngIf",e.xi3(44,93,a,"exam")),e.xp6(2),e.Q6J("ngIf",e.xi3(46,96,a,"exam")),e.xp6(2),e.Q6J("ngIf",e.xi3(48,99,a,"exam"))}}function SM(n,o){1&n&&e.YNc(0,kM,49,104,"div",240),2&n&&e.Q6J("ngIf",null!=o.$implicit.permissionObj)}function EM(n,o){1&n&&(e.TgZ(0,"li")(1,"a",287),e._uU(2),e.ALo(3,"mytranslate"),e.O4$(),e.TgZ(4,"svg",288),e._UZ(5,"polyline",289),e.qZA()()()),2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"lang_auto_xem_them")," "))}function OM(n,o){if(1&n&&(e.TgZ(0,"div",286)(1,"ul",17),e.YNc(2,EM,6,3,"li",11),e.ALo(3,"configPermission"),e.qZA()()),2&n){const t=e.oxw().$implicit;e.xp6(2),e.Q6J("ngIf",e.xi3(3,1,t,"exam"))}}function IM(n,o){1&n&&(e.YNc(0,OM,4,4,"div",285),e.ALo(1,"configPermission")),2&n&&e.Q6J("ngIf",e.xi3(1,1,o.$implicit,"exam"))}function MM(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"a",291),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,r=e.oxw();return e.KtG(r.redirectByDocumentAction(a,r.enumDocumentRedirectType.POWER_POINT))}),e.O4$(),e.TgZ(2,"svg",239),e._UZ(3,"path",292)(4,"polygon",293),e.qZA(),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()()}2&n&&(e.xp6(5),e.hij(" ",e.lcZ(6,1,"lang_testbank_folder_and_file_insert_into_powerpoint")," "))}function LM(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"a",294),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,r=e.oxw();return e.KtG(r.doExamAction(a,r.enumDocumentDoExamActionType.CONFIG_EXAM_CLASSROOM))}),e.O4$(),e.TgZ(2,"svg",239),e._UZ(3,"rect",295)(4,"path",296),e.qZA(),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()()}2&n&&(e.xp6(5),e.hij(" ",e.lcZ(6,1,"lang_testbank_folder_and_file_configuration_class")," "))}function BM(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"a",297),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,r=e.oxw();return e.KtG(r.doExamAction(a,r.enumDocumentDoExamActionType.SHARE_OFFLINE_RESULT))}),e.O4$(),e.TgZ(2,"svg",239),e._UZ(3,"path",298)(4,"polyline",178)(5,"path",299)(6,"path",300),e.qZA(),e._uU(7),e.ALo(8,"mytranslate"),e.qZA()()}2&n&&(e.xp6(7),e.hij(" ",e.lcZ(8,1,"lang_auto_tra_ket_qua_thi_offline")," "))}function PM(n,o){if(1&n&&(e.TgZ(0,"div",290)(1,"ul",17),e.YNc(2,MM,7,3,"li",11),e.ALo(3,"fullPermission"),e.YNc(4,LM,7,3,"li",11),e.ALo(5,"configPermission"),e.YNc(6,BM,9,3,"li",11),e.ALo(7,"fullPermission"),e.qZA()()),2&n){const t=o.$implicit;e.xp6(2),e.Q6J("ngIf",e.xi3(3,3,t,"exam")),e.xp6(2),e.Q6J("ngIf",e.xi3(5,6,t,"exam")),e.xp6(2),e.Q6J("ngIf",e.xi3(7,9,t,"exam"))}}function QM(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"a",301),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.handlePasteDataToFolder(a.currentCategoryId))}),e.O4$(),e.TgZ(2,"svg",67),e._UZ(3,"rect",68)(4,"path",69),e.qZA(),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()()}2&n&&(e.xp6(5),e.hij(" ",e.lcZ(6,1,"lang_auto_paste")," "))}function FM(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"a",302),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.cancelAllActionOfDocumentObjs())}),e.O4$(),e.TgZ(2,"svg",67),e._UZ(3,"circle",26)(4,"line",236)(5,"line",237),e.qZA(),e._uU(6),e.ALo(7,"mytranslate"),e.qZA()()}2&n&&(e.xp6(6),e.hij(" ",e.lcZ(7,1,"lang_auto_huy_copycut")," "))}function NM(n,o){if(1&n&&(e.TgZ(0,"div",223)(1,"ul",17),e.YNc(2,QM,7,3,"li",11),e.YNc(3,FM,8,3,"li",11),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.hasCopyOrCutInClipboard()&&t.checkCurrentCatePastePermission()),e.xp6(1),e.Q6J("ngIf",t.hasCopyOrCutInClipboard())}}let ZM=(()=>{class n extends xe.Q{checkCurrentCatePastePermission(){return 0==this.currentCategoryId||this.permissionService.hasEditPermission("category",this.currentCategory)}checkPasteFunc(t){return this.clipboardService.isPasteToSelfFolder(t)}sendReloadData(){this.clipboardService.resetClipBoardAfterPasteOrCancelAllActions(),this.loadApiData.emit(!0)}hasCopyOrCutInClipboard(){return null!=this.clipboardService.getCurrentClipBoard().find(i=>i.action==xl.h.COPY||i.action==xl.h.CUT)}handleOpenFolder(t,i){t.mouseWheel=!!i,this.goToChildCategoryPage.emit(t)}handleEditFolder(t){this.showEditFolderDialog.emit(t)}exportToExcel(t){cr.G.openLoadingEffect(this.commonService.myTranslateInstant("lang_auto_dang_khoi_tao_du_lieu")??"\u0110ang kh\u1edfi t\u1ea1o d\u1eef li\u1ec7u");let i=[],a=this.commonService.replaceForFolderName(this.currentCategory?.name?this.currentCategory?.name+"_"+this.currentCategory.id:"");this.getFormValue().clipboardObjs.filter(r=>r.checked).forEach(r=>{i.push({id:r.id,name:r.name,parentId:this.currentCategoryId,parentCateName:this.commonService.createFolderNameExportFiles([a??"azota_exported_excels/"]),type:r.type})}),this.sAztDocumentExportMultipleExamService.processExportExams(i,t).subscribe(r=>{if(cr.G.changeMsgLoadingEffect(this.commonService.myTranslateInstant("lang_auto_tap_tin_dang_duoc_tai_xuong")??"T\u1ec7p tin \u0111ang \u0111\u01b0\u1ee3c t\u1ea3i xu\u1ed1ng"),!r)return cr.G.closeLoadingEffect(10),this.errorStatusObj("lang_core_invalid_data",!0);let s=this.commonService.createFileNameExportFile([this.commonService.myTranslateInstant(this.currentCategory?.name)??"export_azota"])+"_"+t+"_result.zip";this.shareFileFlutterService.shareFileWithBlob(r,s),cr.G.closeLoadingEffect(10)})}handleDeleteMultipleDocument(){this.changeHiddenStatusObj.emit(!0);var t=[];this.getFormValue().clipboardObjs.filter(i=>i.checked).forEach(i=>{t.push({id:i.id,type:i.type,action:xl.h.DELETE,documentType:"exam"})}),this.waitDestroy(this.examCategoryService.apiExamCategoryCopyOrCutOrDeletePost(0,{copyOrCutObjs:t}).subscribe(i=>{i&&1==i.success?(this.clipboardService.resetClipBoardAfterPasteOrCancelAllActions(),this.showSuccessSnack("lang_auto_xoa_tai_lieu_thanh_cong"),this.sendReloadData(),this.changeHiddenStatusObj.emit(!1)):(this.showErrorSnack(i.message??""),this.changeHiddenStatusObj.emit(!1))}))}handlePasteDataToFolder(t){if(-1==t)this.showErrorSnack("lang_auto_khong_duoc_paste_vao_thu_muc_de_thi_duoc_chia_se");else if(this.clipboardService.hasCopyFolderActionInClipboard())this.clipboardService.isPasteToSelfFolder(t)?this.showErrorSnack("lang_auto_khong_duoc_paste_vao_thu_muc_ban_dang_muon_copy"):this.sAztDialogService.open(AO,{disableClose:!0,width:"350px",data:{copyToCateId:t},restoreFocus:!1}).afterClosed().subscribe(s=>{!0===s&&(this.clipboardService.resetClipBoardAfterPasteOrCancelAllActions(),this.showSuccessSnack("lang_auto_dan_du_lieu_thanh_cong"),this.sendReloadData())});else{var i=[];this.clipboardService.getCurrentClipBoard().filter(r=>r.action==xl.h.COPY||r.action==xl.h.CUT).forEach(r=>{i.push({id:r.id,type:r.type,action:r.action,documentType:"exam"})}),this.changeHiddenStatusObj.emit(!0),this.waitDestroy(this.examCategoryService.apiExamCategoryCopyOrCutOrDeletePost(t,{copyOrCutObjs:i}).subscribe(r=>{if(r&&1==r.success)this.clipboardService.resetClipBoardAfterPasteOrCancelAllActions(),this.showSuccessSnack("lang_auto_dan_du_lieu_thanh_cong"),this.sendReloadData(),this.changeHiddenStatusObj.emit(!1);else{if(r.message&&"azota_lang_core_exceed_max_global_copy"==r.message){let s=this.sAztConfigService.getConfig("maxCopyGlobalExam")??20,l=this.commonService.translateToKeyParam(r.message??"",s.toString(),s.toString());this.showErrorSnack(l??"")}else this.showErrorSnack(r.message??"");this.changeHiddenStatusObj.emit(!1)}}))}}changePublishStatus(t,i,a){this.changeHiddenStatusObj.emit(!0),this.selectCurrentItem(t,i);let r=this.getFormValue().clipboardObjs.filter(l=>l.checked);var s={ids:r.filter(l=>l.type==qo.Y.EXAM).map(l=>l.id),categoryIds:r.filter(l=>l.type==qo.Y.EXAM_CATEGORY).map(l=>l.id),status:a};this.examService.apiExamPublishExamsPost(s).subscribe(l=>{1==l.success?this.successStatusObj(1==a?"lang_auto_xuat_ban_thanh_cong":"lang_auto_huy_xuat_ban_thanh_cong",!0):this.errorStatusObj(1==a?"lang_core_xuat_ban_de_thi_khong_thanh_cong":"lang_core_huy_xuat_ban_de_thi_khong_thanh_cong",!0),this.sendReloadData(),this.changeHiddenStatusObj.emit(!1)})}selectOrUnselectAllDocumentObjs(){this.form.controls.clipboardObjs.controls.forEach(t=>{t.controls.checked.setValue(this.getFormValue().isSelectAll)}),this.form.controls.isSelectAll.value||this.removeValueOfFormInClipboard()}acceptCopyAllDocumentObjs(t,i){this.selectCurrentItem(t,i),this.setValueOfFormToClipboard(xl.h.COPY);let a=this.getTotalSelectedItem(),r=this.commonService.myTranslateInstant("lang_auto_copy_thanh_cong"),s=this.commonService.myTranslateInstant("lang_auto_tai_lieu");this.showSuccessSnack(r+" "+a+" "+s)}acceptCutAllDocumentObjs(t,i){this.selectCurrentItem(t,i),this.setValueOfFormToClipboard(xl.h.CUT);let a=this.getTotalSelectedItem(),r=this.commonService.myTranslateInstant("lang_auto_cut_thanh_cong"),s=this.commonService.myTranslateInstant("lang_auto_tai_lieu");this.showSuccessSnack(r+" "+a+" "+s)}acceptDeleteAllDocumentObjs(t,i){this.selectCurrentItem(t,i);let a=this.getFormValue().clipboardObjs.filter(s=>s.checked);this.sAztDialogService.open(xO,{data:{clipboardObjs:a},restoreFocus:!1}).afterClosed().subscribe(s=>{!0===s&&this.handleDeleteMultipleDocument()})}cancelAllActionOfDocumentObjs(){this.clipboardService.resetClipBoardAfterPasteOrCancelAllActions(),this.form.controls.clipboardObjs.controls.forEach(t=>{t.controls.checked.setValue(!1)})}getClipboardFormGroupByExamCategory(t){return this.form.controls.clipboardObjs.controls.find(a=>a.getRawValue().id==t.id&&a.getRawValue().type==qo.Y.EXAM_CATEGORY)}isSelectedExamCategoryInClipboard(t){var i=this.getClipboardFormGroupByExamCategory(t);return i?.getRawValue().checked??!1}getClipboardFormGroupByExam(t){return this.form.controls.clipboardObjs.controls.find(a=>a.getRawValue().id==t.id&&a.getRawValue().type==qo.Y.EXAM)}isSelectedExamInClipboard(t){var i=this.getClipboardFormGroupByExam(t);return i?.getRawValue().checked??!1}removeValueOfFormInClipboard(){let t=this.getFormValue().clipboardObjs.filter(i=>i.checked)?.length??0;this.getFormValue().clipboardObjs.filter(i=>!i.checked).forEach(i=>{this.clipboardService.removeDocumentInClipboard(i.id,i.type)}),t&&t==this.getFormValue().clipboardObjs.length?this.form.controls.isSelectAll.setValue(!0):this.form.controls.isSelectAll.setValue(!1)}setValueOfFormToClipboard(t){this.clipboardService.resetClipBoardAfterPasteOrCancelAllActions(),this.getFormValue().clipboardObjs.filter(i=>i.checked).forEach(i=>{this.clipboardService.setActionToClipboard(i.id,i.type,t,i.name)})}selectCurrentItem(t,i){null!=t?.id&&this.form.controls.clipboardObjs.controls.filter(r=>r.getRawValue().id==t.id&&r.getRawValue().type==qo.Y.EXAM).forEach(r=>{r.controls.checked.setValue(!0)}),null!=i?.id&&this.form.controls.clipboardObjs.controls.filter(s=>s.getRawValue().id==i.id&&s.getRawValue().type==qo.Y.EXAM_CATEGORY).forEach(s=>{s.controls.checked.setValue(!0)})}getFormValue(){return this.form.getRawValue()}initFormData(){this.shareType=this.backToData?.shareType??"",this.categoryObjs&&this.categoryObjs.length>0&&this.categoryObjs.forEach(t=>{if(t.id&&t.id>0&&!t.isGlobalAzota){let i=this.clipboardService.hasInClipboard(t.id,qo.Y.EXAM_CATEGORY),a=new h.cw({id:new h.NI(t.id,{nonNullable:!0}),name:new h.NI(t.name??"",{nonNullable:!0}),type:new h.NI(qo.Y.EXAM_CATEGORY,{nonNullable:!0}),action:new h.NI(this.clipboardService.getActionOfDocumentObj(t.id,qo.Y.EXAM_CATEGORY)??xl.h.COPY,{nonNullable:!0}),checked:new h.NI(i,{nonNullable:!0})});i&&this.totalCheckboxSelected++,this.form.controls.clipboardObjs.push(a)}}),this.documentObjs&&this.documentObjs.length>0&&this.documentObjs.forEach(t=>{if("exam"==t.type&&t.exam){let i=this.clipboardService.hasInClipboard(t.exam?.id??0,qo.Y.EXAM),a=new h.cw({id:new h.NI(t.exam.id??0,{nonNullable:!0}),name:new h.NI(t.exam.name??"",{nonNullable:!0}),type:new h.NI(qo.Y.EXAM,{nonNullable:!0}),action:new h.NI(this.clipboardService.getActionOfDocumentObj(t.exam?.id??0,qo.Y.EXAM)??xl.h.COPY,{nonNullable:!0}),checked:new h.NI(i,{nonNullable:!0})});this.form.controls.clipboardObjs.push(a)}})}getTotalSelectedItem(){return this.totalCheckboxSelected=this.form.getRawValue().clipboardObjs.filter(t=>t.checked).length,this.totalCheckboxSelected}getClassroomName(t){let i=[];return t.forEach(a=>{a.name&&!this.commonService.isExistInArray(i,a.name)&&i.push(a.name)}),i}getExamTestLink(t){return`${this.commonService.getCurrentDomain()}/de-thi/${t.hashId}`}goBackToAllCategoryPageEvent(){this.goBackToAllCategoryPage.emit()}backToParentCategoryEvent(t){this.backToParentCategory.emit(t)}goToBreadPath(t){var i={id:t.id,name:t.name??"",parentId:t.parentId,shareType:t.shareType,tenantId:t.tenantId,type:Number(t.type),countExam:0,permissionObj:{},isGlobalAzota:0};this.backToParentCategory.emit(i)}doExamAction(t,i){this.documentDoExamActionService.doExamAction({categoryId:this.currentCategoryId,examObj:t},i).subscribe(r=>{r&&r.reloadData&&this.sendReloadData()})}redirectByDocumentAction(t,i,a){t?.isGlobalAzota||this.documentRedirectActionService.redirectByAction({examObj:t,categoryId:this.currentCategoryId,currentPage:this.currentPage,backToData:this.backToData},i,a)}sortDocumentByColumn(t,i){let r=this.documentSortActionService.sortExamByColumn({rootCategoryObjs:this.rootCategoryObjs,rootDocumentObjs:this.rootDocumentObjs,currentCategoryObjs:this.categoryObjs??[],currentDocumentObjs:this.documentObjs??[]},t,i=null==i||!i);this.categoryObjs=r.categoryObjs,this.documentObjs=r.documentObjs,this.currentDocumentSortTypeObj={isAscSort:i,isColumnSortType:t},this.browserStorageService.saveSimpleSessionStorage("documentSort",JSON.stringify(this.currentDocumentSortTypeObj))}onContextMenu(t,i,a){t&&a&&(this.contextMenuService.show(a,{value:i,x:t?.clientX+15,y:t?.clientY+15}),t?.preventDefault(),t?.stopPropagation())}ngOnInit(){this.waitDestroy((0,ne.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.currentCategoryId=Number(this.commonService.getMyParam(this.activeRoute,"cat_id")),this.initFormData()})),this.form.valueChanges.subscribe(i=>{this.getTotalSelectedItem()});let t=this.commonService.myParseJson(this.browserStorageService.getSimpleSessionStorage("documentSort")??"");t&&this.sortDocumentByColumn(t.isColumnSortType,!t.isAscSort)}ngAfterViewInit(){this.contextMenuService.closeAll()}ngOnDestroy(){super.ngOnDestroy()}constructor(t,i,a,r,s,l,c,u,m,p,f,b,L,N){super(),this.documentDoExamActionService=t,this.contextMenuService=i,this.activeRoute=a,this.sAztDialogService=r,this.clipboardService=s,this.browserStorageService=l,this.documentSortActionService=c,this.documentRedirectActionService=u,this.examCategoryService=m,this.permissionService=p,this.sAztConfigService=f,this.shareFileFlutterService=b,this.sAztDocumentExportMultipleExamService=L,this.examService=N,this.rootCategoryObjs=[],this.rootDocumentObjs=[],this.isShowSearchResult=!1,this.currentPage=0,this.listBreadcrumb=[],this.goBackToAllCategoryPage=new e.vpe,this.backToParentCategory=new e.vpe,this.goToChildCategoryPage=new e.vpe,this.loadApiData=new e.vpe,this.changeHiddenStatusObj=new e.vpe,this.showEditFolderDialog=new e.vpe,this.currentDocumentSortTypeObj=void 0,this.enumDocumentSortType=mO.H,this.enumDocumentRedirectType=xm.T,this.enumDocumentDoExamActionType=dO.F,this.currentCategoryId=0,this.totalCheckboxSelected=0,this.shareType="",this.form=new h.cw({clipboardObjs:new h.Oe([]),isSelectAll:new h.NI(!1,{nonNullable:!0,validators:[h.kI.required]})})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(bO.Q),e.Y36(d.Lk),e.Y36(E.gz),e.Y36(qi.C),e.Y36(ew.e),e.Y36(oa.n),e.Y36(vO.d),e.Y36(wO),e.Y36(un.F1),e.Y36(pu.j),e.Y36(Mv.V),e.Y36(Ac.g),e.Y36(yO),e.Y36(un.Oe))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-exam-and-exam-category-list"]],inputs:{rootCategoryObjs:"rootCategoryObjs",rootDocumentObjs:"rootDocumentObjs",categoryObjs:"categoryObjs",currentCategory:"currentCategory",documentObjs:"documentObjs",isShowSearchResult:"isShowSearchResult",backToData:"backToData",currentPage:"currentPage",listBreadcrumb:"listBreadcrumb"},outputs:{goBackToAllCategoryPage:"goBackToAllCategoryPage",backToParentCategory:"backToParentCategory",goToChildCategoryPage:"goToChildCategoryPage",loadApiData:"loadApiData",changeHiddenStatusObj:"changeHiddenStatusObj",showEditFolderDialog:"showEditFolderDialog"},features:[e.qOj],decls:85,vars:29,consts:[[1,"azt-file-manager"],[1,"mt-5","mb-5","h-auto","flex","flex-col","sm:flex-row","items-center"],[1,"mr-auto"],[1,"breadcrumb"],[1,"breadcrumb-item","font-medium"],["azt-track-service","folder-and-file-new-F58H12G9GB-",3,"click"],[1,"text-lg"],["class","breadcrumb-item active",3,"ngClass",4,"ngFor","ngForOf"],["class","flex flex-wrap items-center mt-3 sm:mt-0 mr-auto sm:mr-0",3,"ngClass",4,"ngIf"],[1,"table-zone",3,"contextMenu"],["class","box p-5 flex items-center","style","height: 300px",4,"ngIf"],[4,"ngIf"],["DefaultDocumentTableTpl",""],["DocumentSearchResultTableTpl",""],["xPosition","before"],["publishUnPublishMenu","matMenu"],[1,"dropdown-menu","w-72","show","relative"],[1,"dropdown-content"],["azt-track-service","folder-and-file-new-nfNbs0mOU",3,"click"],["azt-track-service","class-list-1UlnYstZqkD",1,"dropdown-item","w-full"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","mr-2"],["d","M2 9V5c0-1.1.9-2 2-2h3.93a2 2 0 0 1 1.66.9l.82 1.2a2 2 0 0 0 1.66.9H20a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-1"],["d","M2 13h10"],["d","m9 16 3-3-3-3"],["azt-track-service","folder-and-file-new-_o5A8FSGtM",3,"click"],["azt-track-service","class-list-WQiM5XgRgUI",1,"dropdown-item","w-full"],["cx","12","cy","12","r","10"],["d","m15 9-6 6"],["d","m9 9 6 6"],["azt-track-service","exam-result-list-new-esmVBDKJjs",1,"dropdown-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide","mr-2","flex-none"],["d","M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"],["points","7 10 12 15 17 10"],["x1","12","y1","15","x2","12","y2","3"],["azt-track-service","exam-result-list-new-dlmCFDcvLN",1,"dropdown-item",3,"click"],["azt-track-service","exam-result-list-new-IJMCAvs_Zj",1,"dropdown-item",3,"click"],["azt-track-service","exam-result-list-new-zKngslcUte",1,"dropdown-item",3,"click"],["basicMenuExamCategory",""],["contextMenuItem",""],["basicMenuExamFile",""],["contextMenuItem","",3,"subMenu"],["subMenuMove",""],[3,"disabled"],["basicMenuAll",""],["disableMenu",""],[1,"breadcrumb-item","active",3,"ngClass"],["azt-track-service","folder-and-file-new-emN2AGc-y20",3,"ngClass","click"],[3,"ngClass","matTooltip","isDisabledTooltip","matTooltipDisabled"],["c","isDisabled"],[1,"flex","flex-wrap","items-center","mt-3","sm:mt-0","mr-auto","sm:mr-0",3,"ngClass"],["class","inline-block mr-2",3,"ngClass",4,"ngIf"],["azt-track-service","folder-and-file-new-T9QAf4VC0BP",1,"btn","btn-sm","btn-primary","mr-2",3,"click"],["x","9","y","9","width","13","height","13","rx","2","ry","2"],["d","M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"],["azt-track-service","folder-and-file-new-8Vfp-RcsPEP","class","btn btn-sm btn-primary mr-2",3,"click",4,"ngIf"],["azt-track-service","folder-and-file-new-9lzP1Y2bSWF","class","btn btn-sm btn-primary mr-2",3,"click",4,"ngIf"],["azt-track-service","folder-and-file-new-UOsQbpqqgFT","class","btn btn-sm btn-primary",3,"click",4,"ngIf"],["azt-track-service","folder-and-file-new-UOsQbpqqgFT","style","background-color: white","class","btn btn-sm btn-light ml-2 block",3,"matMenuTriggerFor",4,"ngIf"],[1,"inline-block","mr-2",3,"ngClass"],["azt-track-service","folder-and-file-new-8Vfp-RcsPEP",1,"btn","btn-sm","btn-primary","mr-2",3,"click"],["points","5 9 2 12 5 15"],["points","9 5 12 2 15 5"],["points","15 19 12 22 9 19"],["points","19 9 22 12 19 15"],["x1","2","y1","12","x2","22","y2","12"],["x1","12","y1","2","x2","12","y2","22"],["azt-track-service","folder-and-file-new-9lzP1Y2bSWF",1,"btn","btn-sm","btn-primary","mr-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","mr-2","lucide"],["x","8","y","2","width","8","height","4","rx","1","ry","1"],["d","M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"],["azt-track-service","folder-and-file-new-UOsQbpqqgFT",1,"btn","btn-sm","btn-primary",3,"click"],["d","M3 6h18"],["d","M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"],["d","M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"],["x1","10","y1","11","x2","10","y2","17"],["x1","14","y1","11","x2","14","y2","17"],["azt-track-service","folder-and-file-new-UOsQbpqqgFT",1,"btn","btn-sm","btn-light","ml-2","block",2,"background-color","white",3,"matMenuTriggerFor"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4"],["cx","12","cy","12","r","1"],["cx","12","cy","5","r","1"],["cx","12","cy","19","r","1"],[1,"box","p-5","flex","items-center",2,"height","300px"],[1,"text-center","mx-auto"],["width","84","height","84","viewBox","0 0 84 84","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M38.5 70H14C12.1435 70 10.363 69.2625 9.05025 67.9497C7.7375 66.637 7 64.8565 7 63V17.5C7 13.65 10.15 10.5 14 10.5H27.755C28.9079 10.506 30.0416 10.7966 31.0552 11.3462C32.0687 11.8957 32.9309 12.6871 33.565 13.65L36.435 17.85C37.0691 18.8129 37.9313 19.6043 38.9448 20.1538C39.9584 20.7034 41.092 20.994 42.245 21H70C71.8565 21 73.637 21.7375 74.9497 23.0503C76.2625 24.363 77 26.1435 77 28V42","stroke","#1F64E7","stroke-width","2.5","stroke-linecap","round","stroke-linejoin","round"],["d","M59.5 70C65.299 70 70 65.299 70 59.5C70 53.701 65.299 49 59.5 49C53.701 49 49 53.701 49 59.5C49 65.299 53.701 70 59.5 70Z","stroke","#1F64E7","stroke-width","2.5","stroke-linecap","round","stroke-linejoin","round"],["d","M73.5 73.5L68.25 68.25","stroke","#1F64E7","stroke-width","2.5","stroke-linecap","round","stroke-linejoin","round"],["d","M16 26V44.3184M16 50V54.7432V50Z","stroke","#75A4FE","stroke-width","2.5","stroke-linecap","round","stroke-linejoin","round"],[1,"font-medium","mt-2"],[3,"ngTemplateOutlet"],[3,"formGroup"],[1,"inbox","box",2,"scroll-snap-type","x mandatory",3,"ngClass","contextmenu"],[1,"p-5","text-slate-500","border-b","border-slate-200/60",3,"ngStyle"],[1,"grid","grid-cols-12","gap-3","items-center","-mx-5","px-5"],[1,"flex","items-center",3,"ngClass"],["azt-track-service","folder-and-file-new-Fh5Xeywt4Vl",1,"inbox__item--sender","flex","items-center","cursor-pointer",3,"ngClass","click"],[1,"flex","items-center","flex-col","ml-2"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4",3,"ngClass"],["points","18 15 12 9 6 15"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","-mt-2",3,"ngClass"],["points","6 9 12 15 18 9"],["class","col-span-2",4,"ngIf"],[1,"azt-table-body",2,"min-height","50vh",3,"ngStyle"],["class","folder-item",3,"ngStyle","id","contextMenu","contextMenuValue",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"p-5","flex","flex-col","sm:flex-row","items-center","text-center","sm:text-left","text-slate-500"],["type","checkbox","formControlName","isSelectAll",1,"form-check-input",3,"change"],[1,"col-span-2"],["azt-track-service","folder-and-file-new-bTOV6xW1dIT",1,"flex-none","flex","items-center","mr-5","cursor-pointer",3,"click"],[1,"flex","mx-auto"],[1,"w-40"],["azt-track-service","folder-and-file-new-C81T6Hn4LB6",1,"flex-none","flex","items-center","mr-5","cursor-pointer",3,"click"],[1,"lg:w-auto","ml-auto"],["azt-track-service","folder-and-file-new-0OUTvRkSwMy",1,"flex","items-center","cursor-pointer","pl-10",3,"click"],[1,"whitespace-nowrap"],[1,"folder-item",3,"ngStyle","id","contextMenu","contextMenuValue"],[1,"inbox__item","inline-block","sm:block","hover:shadow-md","text-slate-600","dark:text-slate-500","border-slate-200/60","dark:border-darkmode-400",2,"cursor","default",3,"ngClass"],[1,"block","sm:grid","grid-cols-12","gap-3","items-center","px-5","box-exam"],[1,"flex",2,"width","80vw","justify-content","space-between",3,"ngClass"],[1,"flex-none","flex","items-center"],[1,"flex","items-center"],[4,"ngIf","ngIfElse"],["normalCateCheckbox",""],["azt-track-service","folder-and-file-new-UCBI7ziYKss",1,"title-exam","flex","items-center","clickable","sm:w-full","ml-3",3,"ngClass","mouseup"],[1,"image-fit"],["normalCate",""],[1,"truncate","ml-3",3,"matTooltip","isDisabledTooltip","matTooltipDisabled"],["class","whitespace-nowrap ml-2 py-0.5 px-2 rounded-full text-xs bg-info text-white font-medium",4,"ngIf"],["class","whitespace-nowrap ml-2 py-0.5 px-2 rounded-full text-xs bg-primary text-white font-medium",4,"ngIf"],["azt-track-service","folder-and-file-new-Um2GE1qOYAg","class","btn btn-transparent btn-outline-secondary p-1 mr-2",3,"disabled","click",4,"ngIf"],["class","azt-hidden sm:block col-span-2",4,"ngIf"],["class","col-span-2 py-1",4,"ngIf"],["type","checkbox","disabled","",1,"form-check-input"],["formArrayName","clipboardObjs",4,"ngIf","ngIfElse"],["shareFolder",""],["formArrayName","clipboardObjs"],[3,"formGroup",4,"ngIf"],["type","checkbox","formControlName","checked",1,"form-check-input","flex-none",3,"change"],["xmlns","http://www.w3.org/2000/svg","version","1.0","fill","currentColor","width","16","height","16","viewBox","0 0 250.000000 250.000000","preserveAspectRatio","xMidYMid meet",1,"w-6","h-6","bi","bi-folder-fill"],["transform","translate(0.000000,250.000000) scale(0.100000,-0.100000)","fill","#485569","stroke","none"],["d","M305 2329 c-86 -20 -181 -113 -213 -208 -7 -19 -12 -78 -12 -133 0 -80 -4 -106 -21 -139 -30 -61 -33 -120 -15 -316 32 -335 45 -478 61 -668 30 -350 48 -409 148 -485 97 -73 68 -71 1023 -68 l849 3 49 23 c76 35 132 86 161 148 28 58 34 100 60 389 8 94 22 242 30 330 51 546 52 560 16 640 -32 73 -111 147 -181 170 -14 4 -200 11 -415 14 -466 7 -432 -2 -595 157 -72 70 -123 111 -160 128 l-55 26 -345 -1 c-190 -1 -363 -5 -385 -10z m735 -166 c40 -25 136 -120 129 -127 -2 -3 -214 -6 -469 -7 l-465 -1 3 23 c10 64 66 121 132 133 14 2 162 3 330 3 295 -2 306 -3 340 -24z m293 -395 c75 -23 116 -75 290 -378 222 -386 211 -363 211 -440 1 -107 -63 -201 -161 -236 -55 -19 -791 -19 -846 0 -57 21 -100 58 -132 117 -24 45 -30 65 -29 119 0 77 -11 54 211 440 171 297 215 355 285 377 46 15 123 15 171 1z"],["d","M1175 1641 c-17 -10 -39 -31 -50 -47 -21 -32 -85 -144 -85 -149 0 -2 18 -1 40 2 48 7 117 -17 148 -50 11 -12 58 -87 104 -167 83 -143 85 -145 122 -148 32 -3 43 2 77 36 36 36 39 44 39 93 0 50 -7 67 -83 199 -107 187 -126 215 -158 234 -37 22 -117 20 -154 -3z"],["d","M1044 1396 c-42 -19 -65 -51 -173 -240 -101 -177 -109 -207 -69 -277 31 -56 67 -69 193 -69 l106 0 -20 26 c-30 38 -44 90 -37 137 4 26 40 100 96 197 81 139 88 156 76 174 -36 55 -114 78 -172 52z"],["d","M1603 1153 c-6 -15 -23 -43 -37 -60 -42 -50 -101 -63 -292 -63 -180 0 -182 -1 -191 -68 -4 -27 1 -50 16 -80 35 -69 49 -72 303 -72 204 0 226 2 255 20 42 25 63 68 63 127 0 39 -9 64 -45 128 -57 100 -60 103 -72 68z"],["noShare",""],["width","16","height","16","viewBox","0 0 16 16","fill","currentColor","xmlns","http://www.w3.org/2000/svg",1,"w-6","h-6","bi","bi-folder-fill",3,"matTooltip"],["d","M9.63852 2H13.62C14.7961 2 15.7183 3.00984 15.6118 4.18107L14.9755 11.1811C14.8818 12.2112 14.0181 13 12.9837 13H2.63653C1.60212 13 0.738391 12.2112 0.64474 11.1811L0.00837643 4.18107C-0.0356793 3.69646 0.0963746 3.23948 0.349653 2.87023L0.310097 2C0.310097 0.895431 1.20553 0 2.3101 0H5.98167C6.5121 0 7.02081 0.210714 7.39588 0.585787L8.22431 1.41421C8.59938 1.78929 9.10809 2 9.63852 2ZM1.31657 2.11964C1.52937 2.04231 1.75945 2 2.00016 2H7.39588L6.68878 1.29289C6.50124 1.10536 6.24689 1 5.98167 1H2.3101C1.76412 1 1.32033 1.43755 1.31027 1.98112L1.31657 2.11964Z","fill","currentColor"],["d","M2.5 12C2.5 12 2 12 2 11.5C2 11 2.5 9.5 5 9.5C7.5 9.5 8 11 8 11.5C8 12 7.5 12 7.5 12H2.5Z","fill","white"],["d","M5 9C5.82843 9 6.5 8.32843 6.5 7.5C6.5 6.67157 5.82843 6 5 6C4.17157 6 3.5 6.67157 3.5 7.5C3.5 8.32843 4.17157 9 5 9Z","fill","white"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"w-6","h-6","bi","bi-folder-fill"],["d","M9.828 3h3.982a2 2 0 0 1 1.992 2.181l-.637 7A2 2 0 0 1 13.174 14H2.825a2 2 0 0 1-1.991-1.819l-.637-7a1.99 1.99 0 0 1 .342-1.31L.5 3a2 2 0 0 1 2-2h3.672a2 2 0 0 1 1.414.586l.828.828A2 2 0 0 0 9.828 3zm-8.322.12C1.72 3.042 1.95 3 2.19 3h5.396l-.707-.707A1 1 0 0 0 6.172 2H2.5a1 1 0 0 0-1 .981l.006.139z"],[1,"whitespace-nowrap","ml-2","py-0.5","px-2","rounded-full","text-xs","bg-info","text-white","font-medium"],[1,"whitespace-nowrap","ml-2","py-0.5","px-2","rounded-full","text-xs","bg-primary","text-white","font-medium"],["azt-track-service","folder-and-file-new-Um2GE1qOYAg",1,"btn","btn-transparent","btn-outline-secondary","p-1","mr-2",3,"disabled","click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-5","h-5","lucide"],[1,"azt-hidden","sm:block","col-span-2"],[1,"flex-none","flex","items-center","mr-5"],[1,"w-80"],[1,"col-span-2","py-1"],[1,"inbox__item--time","whitespace-nowrap","ml-auto","pl-10"],[1,"sm:hidden"],["class","exam-item",3,"ngStyle","contextMenu","contextMenuValue",4,"ngIf"],[1,"exam-item",3,"ngStyle","contextMenu","contextMenuValue"],[1,"inbox__item","sm:block","text-slate-600","hover:shadow-md","dark:text-slate-500","border-slate-200/60","dark:border-darkmode-400",2,"cursor","default",3,"ngClass"],["azt-track-service","folder-and-file-new-aOxsvSWNL",1,"block","sm:grid","grid-cols-12","gap-3","items-center","px-5","box-exam"],["shareExam",""],["azt-track-service","folder-and-file-new-1sDCbpyZRKl",1,"title-exam","flex","items-center","clickable","ml-3","w-52","sm:w-full",3,"mouseup"],[1,"w-6","h-6","image-fit"],["class","w-6 h-6 text-pending","xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",3,"matTooltip",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","class","w-6 h-6 text-pending","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",3,"matTooltip",4,"ngIf"],["class","azt-wv-sub-info mx-auto",4,"ngIf"],["class","icon-share ml-2",4,"ngIf"],["azt-track-service","folder-and-file-new-VLcxoWQErXD","class","btn btn-transparent btn-outline-secondary p-1 mr-2",3,"click",4,"ngIf"],["class","col-span-2 pt-1",4,"ngIf"],["azt-track-service","folder-and-file-new-KfYanxx5uS","type","checkbox","formControlName","checked",1,"form-check-input","flex-none",3,"change"],["type","checkbox",1,"form-check-input","flex-none",3,"disabled"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-6","h-6","text-pending",3,"matTooltip"],["d","M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],["points","14 2 14 8 20 8"],["d","m9 15 2 2 4-4"],[1,"azt-wv-sub-info","mx-auto"],[1,"icon-share","ml-2"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"w-4","h-4","lucide","text-slate-200","dark:text-darkmode-400",2,"padding","3px",3,"matTooltip"],["d","M7 14s-1 0-1-1 1-4 5-4 5 3 5 4-1 1-1 1H7zm4-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"],["fill-rule","evenodd","d","M5.216 14A2.238 2.238 0 0 1 5 13c0-1.355.68-2.75 1.936-3.72A6.325 6.325 0 0 0 5 9c-4 0-5 3-5 4s1 1 1 1h4.216z"],["d","M4.5 8a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5z"],["azt-track-service","folder-and-file-new-VLcxoWQErXD",1,"btn","btn-transparent","btn-outline-secondary","p-1","mr-2",3,"click"],[1,"flex-none","block","sm:flex","items-center","mr-5"],[1,"inbox__item--highlight","mx-auto"],[1,"sm:hidden","pl-10"],[1,"inbox__item--highlight"],[1,"col-span-2","pt-1"],[1,"w-72","sm:w-full","truncate"],[3,"matTooltip","isDisabledTooltip","matTooltipDisabled",4,"ngIf"],[3,"matTooltip","isDisabledTooltip","matTooltipDisabled"],["class","p-5 text-slate-500 border-b border-slate-200/60",3,"ngStyle",4,"ngIf"],["class","folder-item",3,"id","contextMenu","contextMenuValue",4,"ngFor","ngForOf"],["azt-track-service","folder-and-file-new-d3FNMrhtn",1,"inbox__item--sender","flex","items-center","cursor-pointer",3,"ngClass","click"],[3,"ngClass"],[1,"flex-none","flex","items-center","mr-5","cursor-pointer"],[1,"folder-item",3,"id","contextMenu","contextMenuValue"],[1,"inbox__item","inline-block","sm:block","text-slate-600","dark:text-slate-500","border-slate-200/60","dark:border-darkmode-400",2,"cursor","default",3,"ngClass"],[1,"block","sm:grid","grid-cols-12","gap-3","items-center","px-3","py-3"],["azt-track-service","folder-and-file-new-LEqGYkiB5A",1,"flex","items-center","clickable","sm:w-full","ml-3",2,"max-width","370px",3,"ngClass","mouseup"],["azt-track-service","folder-and-file-new-SpIrsSy8AO","class","btn btn-transparent btn-outline-secondary p-1 mr-2",3,"disabled","click",4,"ngIf"],["azt-track-service","folder-and-file-new-SpIrsSy8AO",1,"btn","btn-transparent","btn-outline-secondary","p-1","mr-2",3,"disabled","click"],[1,"breadcrumb","flex","flex-wrap","wrapLineBreadcumb","mt-2",2,"line-height","1.25rem","margin-left","5px"],[1,"breadcrumb-item","active"],["azt-track-service","folder-and-file-new-6Dvcjt22Hl",1,"ml-2",3,"click"],["class","breadcrumb-item",3,"ngClass",4,"ngFor","ngForOf"],[1,"breadcrumb-item",3,"ngClass"],["azt-track-service","folder-and-file-new-SGhP4bd0pB",1,"truncate","w-64","sm:w-auto",2,"max-width","100%","display","block",3,"ngStyle","click"],["class","exam-item",3,"id","contextMenu","contextMenuValue",4,"ngIf"],[1,"exam-item",3,"id","contextMenu","contextMenuValue"],[1,"inbox__item","sm:block","text-slate-600","dark:text-slate-500","border-slate-200/60","dark:border-darkmode-400",3,"ngClass"],[1,"block","sm:grid","grid-cols-12","gap-3","items-center","px-3","py-3",2,"cursor","default"],["azt-track-service","exam-and-exam-category-list-CxKJx5uxw",1,"flex-none","flex","items-center",2,"cursor","pointer",3,"click"],[1,"flex","items-center","clickable","ml-3","w-52","sm:w-full",2,"max-width","370px"],["azt-track-service","folder-and-file-new-21AjY4IME3","class","btn btn-transparent btn-outline-secondary p-1 mr-2",3,"click",4,"ngIf"],["azt-track-service","folder-and-file-new-21AjY4IME3",1,"btn","btn-transparent","btn-outline-secondary","p-1","mr-2",3,"click"],["azt-track-service","folder-and-file-new-FGP7Q6Rvcl",1,"ml-2",3,"click"],["azt-track-service","folder-and-file-new-QqjAwW1BnH",1,"truncate","w-64","sm:w-auto",3,"click"],["class","dropdown-menu show w-60 relative p-3",4,"ngIf"],[1,"dropdown-menu","show","w-60","relative","p-3"],[3,"objectCodeType","typeDisplay","objectCode","objectId","categoryWithPermissionObj"],[1,"dropdown-divider","border-slate-200","dark:border-darkmode-400"],["azt-track-service","folder-and-file-new-dngdKwgVYql",1,"dropdown-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","mr-2"],["d","M8.42 10.61a2.1 2.1 0 1 1 2.97 2.97L5.95 19 2 20l.99-3.95 5.43-5.44Z"],["d","M2 11.5V5c0-1.1.9-2 2-2h3.93a2 2 0 0 1 1.66.9l.82 1.2a2 2 0 0 0 1.66.9H20a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-9.5"],["azt-track-service","folder-and-file-new-dMvAkRVjW8P",1,"dropdown-item",3,"click"],["d","M8 17h12a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3.93a2 2 0 0 1-1.66-.9l-.82-1.2a2 2 0 0 0-1.66-.9H8a2 2 0 0 0-2 2v9c0 1.1.9 2 2 2Z"],["d","M2 8v11c0 1.1.9 2 2 2h14"],["azt-track-service","folder-and-file-new-Eqyg7w3RWjc",1,"dropdown-item",3,"click"],["azt-track-service","folder-and-file-new-hh3aACvDlTx",1,"dropdown-item",3,"click"],["azt-track-service","folder-and-file-new-dpksjYyWqXr",1,"dropdown-item",3,"click"],["x1","15","y1","9","x2","9","y2","15"],["x1","9","y1","9","x2","15","y2","15"],["azt-track-service","folder-and-file-new-73z5tojbR5l",1,"dropdown-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide","mr-2"],["class","dropdown-menu w-60 show relative p-3","style","margin-bottom: -48px",4,"ngIf"],[1,"dropdown-menu","w-60","show","relative","p-3",2,"margin-bottom","-48px"],["isOnlineExam",""],["isOnlineExamCopy",""],["azt-track-service","folder-and-file-new-saSjFTRviTc",1,"dropdown-item",3,"click"],["x1","12","y1","16","x2","12","y2","12"],["x1","12","y1","8","x2","12.01","y2","8"],["azt-track-service","folder-and-file-new-0TxDH9uhI5N",1,"dropdown-item",3,"click"],["d","M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"],["cx","9","cy","7","r","4"],["d","M22 21v-2a4 4 0 0 0-3-3.87"],["d","M16 3.13a4 4 0 0 1 0 7.75"],["azt-track-service","folder-and-file-new-Yrb2Iei9P3i",1,"dropdown-item",3,"cdkCopyToClipboard","click"],["d","M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"],["d","M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"],["azt-track-service","folder-and-file-new-imOSjqX7qwB",1,"dropdown-item",3,"click"],["d","M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z"],["d","M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z"],["d","M12 2v2"],["d","M12 22v-2"],["d","m17 20.66-1-1.73"],["d","M11 10.27 7 3.34"],["d","m20.66 17-1.73-1"],["d","m3.34 7 1.73 1"],["d","M14 12h8"],["d","M2 12h2"],["d","m20.66 7-1.73 1"],["d","m3.34 17 1.73-1"],["d","m17 3.34-1 1.73"],["d","m11 13.73-4 6.93"],["azt-track-service","folder-and-file-new-Rw0wdgMyIG",1,"dropdown-item",3,"click"],["d","M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"],["d","M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"],["azt-track-service","folder-and-file-new-yU7FoiHf8nE",1,"dropdown-item",3,"click"],["azt-track-service","folder-and-file-new-IFDWsvZh0l2",1,"dropdown-item",3,"click"],["points","20 6 9 17 4 12"],["x1","18","y1","6","x2","6","y2","18"],["x1","6","y1","6","x2","18","y2","18"],["azt-track-service","folder-and-file-new-nI3PRUcmMOn",1,"dropdown-item",3,"click"],["d","M3 3v18h18"],["d","m19 9-5 5-4-4-3 3"],["azt-track-service","folder-and-file-new-oIFmeRUYHl",1,"dropdown-item",3,"click"],["azt-track-service","folder-and-file-new-f1MqcshOTmu",1,"dropdown-item",3,"click"],["azt-track-service","folder-and-file-new-z4nXVrVuy-s",1,"dropdown-item",3,"click"],["azt-track-service","folder-and-file-new-LM51mwt6vZ2",1,"dropdown-item",3,"click"],["class","dropdown-menu show relative p-3","style","margin-top: -28px",4,"ngIf"],[1,"dropdown-menu","show","relative","p-3",2,"margin-top","-28px"],[1,"dropdown-item",2,"cursor","default"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide","ml-auto"],["points","9 18 15 12 9 6"],[1,"dropdown-menu","show","w-56","relative",2,"margin-left","-5px"],["azt-track-service","folder-and-file-new-PIBIuTYB0c1",1,"dropdown-item",3,"click"],["d","M5 17H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-1"],["points","12 15 17 21 7 21 12 15"],["azt-track-service","folder-and-file-new-1pfCD5AevZz",1,"dropdown-item",3,"click"],["x","2","y","7","width","20","height","14","rx","2","ry","2"],["d","M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"],["azt-track-service","folder-and-file-new-U8OX6yR8aix",1,"dropdown-item",3,"click"],["d","M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4"],["d","M2 15h10"],["d","m9 18 3-3-3-3"],["azt-track-service","folder-and-file-new-wPbmJ8sZGAH",1,"dropdown-item",3,"click"],["azt-track-service","folder-and-file-new-or8esZsCIRc",1,"dropdown-item",3,"click"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"ol",3)(4,"li",4)(5,"a",5),e.NdJ("click",function(){return i.goBackToAllCategoryPageEvent()}),e.TgZ(6,"h2",6),e._uU(7),e.ALo(8,"mytranslate"),e.qZA()()(),e.YNc(9,TO,8,17,"li",7),e.qZA()(),e.YNc(10,BO,12,11,"div",8),e.qZA(),e.TgZ(11,"div",9),e.YNc(12,PO,10,3,"div",10),e.YNc(13,QO,2,1,"ng-container",11),e.qZA()(),e.YNc(14,wI,23,38,"ng-template",null,12,e.W1O),e.YNc(16,JI,6,10,"ng-template",null,13,e.W1O),e.TgZ(18,"mat-menu",14,15)(20,"div",16)(21,"ul",17)(22,"li",18),e.NdJ("click",function(){return i.changePublishStatus(void 0,void 0,1)}),e.TgZ(23,"button",19),e.O4$(),e.TgZ(24,"svg",20),e._UZ(25,"path",21)(26,"path",22)(27,"path",23),e.qZA(),e._uU(28),e.ALo(29,"mytranslate"),e.qZA()(),e.kcU(),e.TgZ(30,"li",24),e.NdJ("click",function(){return i.changePublishStatus(void 0,void 0,0)}),e.TgZ(31,"button",25),e.O4$(),e.TgZ(32,"svg",20),e._UZ(33,"circle",26)(34,"path",27)(35,"path",28),e.qZA(),e._uU(36),e.ALo(37,"mytranslate"),e.qZA()(),e.kcU(),e.TgZ(38,"li")(39,"a",29),e.NdJ("click",function(){return i.exportToExcel("lastTime")}),e.O4$(),e.TgZ(40,"svg",30),e._UZ(41,"path",31)(42,"polyline",32)(43,"line",33),e.qZA(),e._uU(44),e.ALo(45,"mytranslate"),e.qZA()(),e.kcU(),e.TgZ(46,"li")(47,"a",34),e.NdJ("click",function(){return i.exportToExcel("highest")}),e.O4$(),e.TgZ(48,"svg",30),e._UZ(49,"path",31)(50,"polyline",32)(51,"line",33),e.qZA(),e._uU(52),e.ALo(53,"mytranslate"),e.qZA()(),e.kcU(),e.TgZ(54,"li")(55,"a",35),e.NdJ("click",function(){return i.exportToExcel("firstTime")}),e.O4$(),e.TgZ(56,"svg",30),e._UZ(57,"path",31)(58,"polyline",32)(59,"line",33),e.qZA(),e._uU(60),e.ALo(61,"mytranslate"),e.qZA()(),e.kcU(),e.TgZ(62,"li")(63,"a",36),e.NdJ("click",function(){return i.exportToExcel("allTime")}),e.O4$(),e.TgZ(64,"svg",30),e._UZ(65,"path",31)(66,"polyline",32)(67,"line",33),e.qZA(),e._uU(68),e.ALo(69,"mytranslate"),e.qZA()()()()(),e.kcU(),e.TgZ(70,"context-menu",null,37),e.YNc(72,nM,2,4,"ng-template",38),e.qZA(),e.TgZ(73,"context-menu",null,39),e.YNc(75,SM,1,1,"ng-template",38),e.YNc(76,IM,2,4,"ng-template",40),e.TgZ(77,"context-menu",null,41),e.YNc(79,PM,8,12,"ng-template",38),e.qZA()(),e.TgZ(80,"context-menu",42,43),e.YNc(82,NM,4,2,"ng-template",38),e.qZA(),e._UZ(83,"context-menu",42,44)),2&t){const a=e.MAs(78),r=e.MAs(81);e.xp6(7),e.hij(" ",e.lcZ(8,15,"lang_auto_tat_ca")," "),e.xp6(2),e.Q6J("ngForOf",i.listBreadcrumb),e.xp6(1),e.Q6J("ngIf",-1!=i.currentCategoryId&&(i.totalCheckboxSelected>0||i.hasCopyOrCutInClipboard())),e.xp6(1),e.Q6J("contextMenu",r),e.xp6(1),e.Q6J("ngIf",0==(null==i.categoryObjs?null:i.categoryObjs.length)&&0==(null==i.documentObjs?null:i.documentObjs.length)),e.xp6(1),e.Q6J("ngIf",0!=(null==i.categoryObjs?null:i.categoryObjs.length)||0!=(null==i.documentObjs?null:i.documentObjs.length)),e.xp6(15),e.hij(" ",e.lcZ(29,17,"lang_auto_xuat_ban")," "),e.xp6(8),e.hij(" ",e.lcZ(37,19,"lang_testbank_offline_test_cancel_publish")," "),e.xp6(8),e.hij(" ",e.lcZ(45,21,"lang_testbank_tested_list_export_excel_last_exam")," "),e.xp6(8),e.hij(" ",e.lcZ(53,23,"lang_testbank_tested_list_export_excel_highest_point")," "),e.xp6(8),e.hij(" ",e.lcZ(61,25,"lang_testbank_tested_list_export_excel_first_time_score")," "),e.xp6(8),e.hij(" ",e.lcZ(69,27,"lang_testbank_tested_list_export_excel_all_exam")," "),e.xp6(8),e.Q6J("subMenu",a),e.xp6(4),e.Q6J("disabled",!i.hasCopyOrCutInClipboard()),e.xp6(3),e.Q6J("disabled",!0)}},dependencies:[F.mk,F.sg,F.O5,F.tP,F.PC,nh.i3,Qi.VK,Qi.p6,Ai.gM,h._Y,h.Wl,h.JJ,h.JL,h.sg,h.u,h.CE,wt.M,zs.Q,jg.y,d.lB,d.GI,d.n5,F.OU,ye.JV,ye.NK,ye.Pf,ye.Z_,ye.J7,ye.k4,ye.PA,ye.Az,ye.xS,ye.CL,ye.Fb,ye.CP,ye.$n,ye.O7],styles:[".title-exam[_ngcontent-%COMP%]{max-width:370px;padding-top:14px;padding-bottom:14px}@media (max-width: 640px){.title-exam[_ngcontent-%COMP%]{padding-top:0;padding-bottom:0}.box-exam[_ngcontent-%COMP%]{padding-top:12px;padding-bottom:12px}}"]}),n})();function DM(n,o){1&n&&(e.O4$(),e.TgZ(0,"svg",12),e._UZ(1,"path",13)(2,"polyline",14)(3,"line",15)(4,"line",16)(5,"line",17),e.qZA())}function UM(n,o){1&n&&(e.O4$(),e.TgZ(0,"svg",12),e._UZ(1,"path",13)(2,"polyline",14),e.qZA())}function jM(n,o){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,DM,6,0,"svg",11),e.YNc(2,UM,3,0,"svg",11),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",1==(null==t.dataObj.homework?null:t.dataObj.homework.isPublished)),e.xp6(1),e.Q6J("ngIf",1!=(null==t.dataObj.homework?null:t.dataObj.homework.isPublished))}}function qM(n,o){1&n&&(e.O4$(),e.TgZ(0,"svg",20),e.ALo(1,"mytranslate"),e._UZ(2,"path",13)(3,"polyline",14)(4,"path",21),e.qZA()),2&n&&e.s9C("matTooltip",e.lcZ(1,1,"lang_testbank_folder_and_file_published"))}function RM(n,o){1&n&&(e.O4$(),e.TgZ(0,"svg",22),e.ALo(1,"mytranslate"),e._UZ(2,"path",13)(3,"polyline",14),e.qZA()),2&n&&e.s9C("matTooltip",e.lcZ(1,1,"lang_testbank_folder_and_file_Unpublished"))}function zM(n,o){if(1&n&&(e.YNc(0,qM,5,3,"svg",18),e.YNc(1,RM,4,3,"svg",19)),2&n){const t=e.oxw();e.Q6J("ngIf",1==(null==t.dataObj.exam?null:t.dataObj.exam.isPublished)),e.xp6(1),e.Q6J("ngIf",1!=(null==t.dataObj.exam?null:t.dataObj.exam.isPublished))}}function HM(n,o){if(1&n&&(e.TgZ(0,"div",7),e._uU(1),e.ALo(2,"mytranslate"),e.ALo(3,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.ALo(4,"mytranslate"),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.AsE(" ",e.lcZ(2,2,"lang_auto_thoi_gian_nop_bai"),": ",t.dataObj.deadline?e.lcZ(3,4,t.dataObj.deadline):e.lcZ(4,6,"lang_auto_khong_thoi_han")," ")}}function JM(n,o){if(1&n&&(e.TgZ(0,"div",7),e._uU(1),e.ALo(2,"mytranslate"),e.ALo(3,"mytranslate"),e.ALo(4,"mytranslate"),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.AsE(" ",e.lcZ(2,2,"lang_auto_thoi_gian_lam_bai"),": ",null!=t.dataObj.exam&&t.dataObj.exam.minutes?(null==t.dataObj.exam?null:t.dataObj.exam.minutes)+" "+e.lcZ(3,4,"lang_auto_phut"):e.lcZ(4,6,"lang_auto_khong_thoi_han")," ")}}function KM(n,o){if(1&n&&(e.TgZ(0,"span",23),e.ALo(1,"mytranslate"),e._uU(2),e.TgZ(3,"span",24),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()()),2&n){const t=e.oxw();e.s9C("matTooltip",e.lcZ(1,3,"lang_auto_luot_lam")),e.xp6(2),e.hij(" ",t.dataObj.submitted+" "," "),e.xp6(2),e.Oqu(e.lcZ(5,5,"lang_auto_luot_lam"))}}function GM(n,o){if(1&n&&(e.TgZ(0,"span",23),e.ALo(1,"mytranslate"),e._uU(2),e.TgZ(3,"span",24),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()()),2&n){const t=e.oxw();e.s9C("matTooltip",e.lcZ(1,3,"lang_auto_da_nop")),e.xp6(2),e.hij(" ",t.dataObj.submitted+"/"+t.dataObj.total+" "," "),e.xp6(2),e.Oqu(e.lcZ(5,5,"lang_auto_da_nop"))}}const YM=function(n){return{"bg-slate-100 dark:bg-darkmode-400":n}};let uw=(()=>{class n extends xe.Q{ngOnInit(){super.ngOnInit()}constructor(t){super(),this.commonService=t,this.dataObj={},this.showByClass=!1,this.viewType=""}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Yn.z))},n.\u0275cmp=e.Xpm({type:n,selectors:[["azt-file-item"]],inputs:{dataObj:"dataObj",showByClass:"showByClass",viewType:"viewType"},features:[e.qOj],decls:19,vars:19,consts:[[1,"box","p-2","flex","items-center","zoom-in",3,"ngClass"],[1,"flex-none","image-fit","rounded-md","overflow-hidden"],[4,"ngIf","ngIfElse"],["ExamIcon",""],[1,"ml-4","mr-auto","w-2/3"],[1,"font-medium","truncate",3,"matTooltip","isDisabledTooltip","matTooltipDisabled"],["c","isDisabled"],[1,"text-slate-500","text-xs","mt-0.5"],["class","text-slate-500 text-xs mt-0.5",4,"ngIf"],[1,"py-1","px-2","rounded-full","text-xs","bg-success","text-white","cursor-pointer","font-medium"],[3,"matTooltip",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","class","w-10 h-10 lucide text-primary","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-10","h-10","lucide","text-primary"],["d","M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],["points","14 2 14 8 20 8"],["x1","16","y1","13","x2","8","y2","13"],["x1","16","y1","17","x2","8","y2","17"],["x1","10","y1","9","x2","8","y2","9"],["class","w-10 h-10 text-pending lucide","xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",3,"matTooltip",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","class","w-10 h-10 lucide text-pending","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",3,"matTooltip",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-10","h-10","text-pending","lucide",3,"matTooltip"],["d","m9 15 2 2 4-4"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-10","h-10","lucide","text-pending",3,"matTooltip"],[3,"matTooltip"],[1,"hiddenIpt"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,jM,3,2,"div",2),e.YNc(3,zM,2,2,"ng-template",null,3,e.W1O),e.qZA(),e.TgZ(5,"div",4)(6,"div",5,6),e._uU(8),e.qZA(),e.TgZ(9,"div",7)(10,"span"),e._uU(11),e.ALo(12,"mytranslate"),e.ALo(13,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.qZA()(),e.YNc(14,HM,5,8,"div",8),e.YNc(15,JM,5,8,"div",8),e.qZA(),e.TgZ(16,"div",9),e.YNc(17,KM,6,7,"span",10),e.YNc(18,GM,6,7,"span",10),e.qZA()()),2&t){const a=e.MAs(4),r=e.MAs(7);e.Q6J("ngClass",e.VKq(17,YM,"classroom"==i.viewType)),e.xp6(2),e.Q6J("ngIf","homework"==i.dataObj.type)("ngIfElse",a),e.xp6(4),e.s9C("matTooltip",i.dataObj.name),e.Q6J("isDisabledTooltip",!1)("matTooltipDisabled",r.isDisabled),e.xp6(2),e.hij(" ",i.dataObj.name," "),e.xp6(3),e.AsE("",e.lcZ(12,13,"lang_auto_ngay_tao"),": ",e.lcZ(13,15,i.dataObj.createdAt),""),e.xp6(3),e.Q6J("ngIf","homework"==i.dataObj.type),e.xp6(1),e.Q6J("ngIf","exam"==i.dataObj.type),e.xp6(2),e.Q6J("ngIf","exam"==i.dataObj.type),e.xp6(1),e.Q6J("ngIf","homework"==i.dataObj.type)}},dependencies:[F.mk,F.O5,Ai.gM,zs.Q,ye.JV,ye.$n],encapsulation:2}),n})();function $M(n,o){1&n&&(e.TgZ(0,"span",2),e._UZ(1,"azt-loading-ui"),e.qZA())}const dw=function(n){return[n]},mw=function(n){return{backto:n}};function VM(n,o){if(1&n&&(e.TgZ(0,"div",10)(1,"a",11),e.ALo(2,"navigationLocalize"),e._UZ(3,"azt-file-item",12),e.qZA()()),2&n){const t=o.$implicit,i=e.oxw(4);let a;e.xp6(1),e.Q6J("routerLink",e.VKq(5,dw,e.lcZ(2,3,"/admin/testbank/exam-results-list/"+(null!==(a=null==t.exam?null:t.exam.categoryId)&&void 0!==a?a:0)+"/"+(null==t.exam?null:t.exam.id)+"/0")))("queryParams",e.VKq(7,mw,"/admin/testbank/document-management/0/"+i.categoryId+"/1")),e.xp6(2),e.Q6J("dataObj",t)}}function WM(n,o){if(1&n&&(e.TgZ(0,"div",8),e.YNc(1,VM,4,9,"div",9),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.recommendDocumentObjs)}}function XM(n,o){if(1&n&&(e.TgZ(0,"div",10)(1,"a",13),e.ALo(2,"navigationLocalize"),e._UZ(3,"azt-file-item",12),e.qZA()()),2&n){const t=o.$implicit,i=e.oxw(4);e.xp6(1),e.Q6J("routerLink",e.VKq(5,dw,e.lcZ(2,3,"/admin/testbank/homework-results-list/"+(null==t.homework?null:t.homework.classroomId)+"/"+(null==t.homework?null:t.homework.id)+"/"+(null==t.homework?null:t.homework.hashId))))("queryParams",e.VKq(7,mw,"/admin/testbank/document-management/1/"+i.categoryId+"/1")),e.xp6(2),e.Q6J("dataObj",t)}}function eL(n,o){if(1&n&&(e.TgZ(0,"div",8),e.YNc(1,XM,4,9,"div",9),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.recommendDocumentObjs)}}function tL(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"div",4)(2,"div",5)(3,"h2",6),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()(),e.YNc(6,WM,2,1,"div",7),e.YNc(7,eL,2,1,"div",7),e.qZA(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(4),e.hij(" ",e.lcZ(5,3,"lang_auto_duoc_de_xuat")," "),e.xp6(2),e.Q6J("ngIf","exam"==t.type),e.xp6(1),e.Q6J("ngIf","homework"==t.type)}}function nL(n,o){if(1&n&&e.YNc(0,tL,8,5,"ng-container",3),2&n){const t=e.oxw();e.Q6J("ngIf",t.recommendDocumentObjs.length>0)}}let pw=(()=>{class n extends xe.Q{convertRecommendDocumentObjs(t,i){var a=[];return t.forEach(r=>{"exam"===i&&r.exam?a.push({id:r.exam.id,hashId:r.exam.hashId,name:r.exam.name,type:"exam",createdAt:r.exam.createdAt,submitted:r.exam.attended,exam:r.exam}):"homework"===i&&r.homework&&a.push({id:r.homework.id,hashId:r.homework.hashId,name:r.homework.name,type:"homework",createdAt:r.homework.createdAt,submitted:r.homework.count,total:r.homework.totalStudent,homework:r.homework})}),a}getRecommendDocumentObjs(t){const i={categoryId:this.categoryId?this.categoryId:void 0,documentType:"file",shareType:"owner",fileType:t,classroomId:void 0,name:void 0,suggestExamPurpose:void 0,lite:void 0,getGlobal:0,page:1,itemPerPage:4};this.initStatusObj(),this.waitDestroy(this.documentService.apiDocumentsGet(i.categoryId,i.documentType,i.shareType,i.fileType,i.classroomId,i.name,i.suggestExamPurpose,i.lite,i.getGlobal,i.page,i.itemPerPage).subscribe(a=>{a&&1==a.success?(this.recommendDocumentObjs=this.convertRecommendDocumentObjs(a.data?.documentObjs??[],t),this.stopStatusObj()):this.showErrorSnack(a.message??"")}))}ngOnInit(){this.getRecommendDocumentObjs(this.type)}constructor(t,i){super(),this.commonService=t,this.documentService=i,this.recommendDocumentObjs=[],this.categoryId=0}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Yn.z),e.Y36(un.Zg))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-document-recommend-list"]],inputs:{type:"type"},features:[e.qOj],decls:3,vars:2,consts:[["class","w-8 h-8 inline-block mt-3",4,"ngIf","ngIfElse"],["doneLoading",""],[1,"w-8","h-8","inline-block","mt-3"],[4,"ngIf"],[1,"intro-y"],[1,"flex","items-center","mt-5"],[1,"text-lg","font-medium","truncate","mr-5"],["class","grid grid-cols-12 gap-6 mt-5",4,"ngIf"],[1,"grid","grid-cols-12","gap-6","mt-5"],["class","col-span-12 md:col-span-6 lg:col-span-4 xl:col-span-3",4,"ngFor","ngForOf"],[1,"col-span-12","md:col-span-6","lg:col-span-4","xl:col-span-3"],["azt-track-service","document-management-UHo7sIsZSVk",3,"routerLink","queryParams"],[3,"dataObj"],[3,"routerLink","queryParams"]],template:function(t,i){if(1&t&&(e.YNc(0,$M,2,0,"span",0),e.YNc(1,nL,1,1,"ng-template",null,1,e.W1O)),2&t){const a=e.MAs(2);e.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a)}},dependencies:[E.rH,F.sg,F.O5,uw,wi.n,ye.Jy,ye.JV],encapsulation:2}),n})();function iL(n,o){if(1&n&&e._UZ(0,"azt-loading-effect",5),2&n){const t=e.oxw();e.Q6J("currentStatusObj",t.statusObj)}}function oL(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"azt-permission-checking",26)(2,"button",27),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.goToMatrixExamPage())}),e.ALo(3,"editPermission"),e.O4$(),e.TgZ(4,"svg",28),e._UZ(5,"line",29)(6,"line",30)(7,"line",31)(8,"line",32)(9,"line",33)(10,"polygon",34),e.qZA(),e._uU(11),e.ALo(12,"mytranslate"),e.qZA()(),e.BQk()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("applyType","MATRIX_QUESTION"),e.xp6(1),e.Q6J("disabled",t.currentCategoryId&&!e.xi3(3,3,t.currentCategory,"category")),e.xp6(9),e.hij(" ",e.lcZ(12,6,"lang_testbank_test_list_create_new_from_matrix_bank")," ")}}function aL(n,o){if(1&n){const t=e.EpF();e.O4$(),e.kcU(),e.TgZ(0,"div",35)(1,"button",36),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.goToSyncExamByFolderPage(a.currentCategoryId))}),e.O4$(),e.TgZ(2,"svg",37),e._UZ(3,"path",38)(4,"path",39)(5,"path",40),e.qZA()()()}}function rL(n,o){1&n&&(e.O4$(),e.kcU(),e.ynx(0),e._UZ(1,"app-document-recommend-list",41),e.BQk()),2&n&&(e.xp6(1),e.Q6J("type","exam"))}function sL(n,o){if(1&n&&(e.O4$(),e.kcU(),e._UZ(0,"azt-loading-effect",5)),2&n){const t=e.oxw(2);e.Q6J("currentStatusObj",t.statusObj)}}const lL=function(){return[]};function cL(n,o){if(1&n){const t=e.EpF();e.O4$(),e.kcU(),e.TgZ(0,"div",42)(1,"app-exam-and-exam-category-list",43),e.NdJ("goToChildCategoryPage",function(a){e.CHM(t);const r=e.oxw(2);return e.KtG(r.goToChildCategoryPage(a))})("showEditFolderDialog",function(a){e.CHM(t);const r=e.oxw(2);return e.KtG(r.showEditFolderDialog(a))})("goBackToAllCategoryPage",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.goBackToAllCategoryPage())})("backToParentCategory",function(a){e.CHM(t);const r=e.oxw(2);return e.KtG(r.backToParentCategory(a))})("loadApiData",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.reloadApi())})("changeHiddenStatusObj",function(a){e.CHM(t);const r=e.oxw(2);return e.KtG(r.changeHiddenStatusObj(a))}),e.qZA()(),e.TgZ(2,"div",44)(3,"div",45)(4,"azt-paging",46),e.NdJ("goToPaginationPage",function(a){e.CHM(t);const r=e.oxw(2);return e.KtG(r.goToPage(a))}),e.qZA()(),e.TgZ(5,"div",47)(6,"p",48),e._uU(7),e.ALo(8,"number"),e.ALo(9,"mytranslate"),e.qZA()(),e.TgZ(10,"div",49)(11,"p",48),e._uU(12),e.ALo(13,"number"),e.ALo(14,"mytranslate"),e.qZA()()()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("rootCategoryObjs",t.cloneCategoryObjs)("rootDocumentObjs",t.cloneDocumentObjs)("categoryObjs",t.categoryObjs)("documentObjs",t.documentObjs)("backToData",t.backToData)("currentPage",t.pageObj.page)("currentCategory",t.currentCategory)("isShowSearchResult",t.isShowSearchResult)("listBreadcrumb",t.listBreadcrumb||e.DdM(20,lL)),e.xp6(3),e.Q6J("pageObj",t.pageObj),e.xp6(3),e.Oqu(e.lcZ(8,12,t.totalExam)+" "+e.lcZ(9,14,"lang_testbank_test_list_document")),e.xp6(5),e.Oqu(e.lcZ(13,16,t.totalExam)+" "+e.lcZ(14,18,"lang_testbank_test_list_document"))}}const uL=function(n,o){return{"md:col-span-3":n,"md:col-span-4":o}};function dL(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",6)(1,"div",7)(2,"div",8)(3,"div",9)(4,"azt-search-box",10),e.NdJ("onSearch",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.searchDocument(a.searchObj))}),e.ALo(5,"mytranslate"),e.qZA()(),e.TgZ(6,"div",11)(7,"div",12),e.YNc(8,oL,13,8,"ng-container",13),e.ALo(9,"showFeatureWhenIsNotBusinessDomain"),e.ALo(10,"async"),e.ALo(11,"allowFeatureBusinessForUser"),e.qZA(),e.TgZ(12,"div",14)(13,"button",15),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.goToCreateExamPage(a.currentCategoryId))}),e.ALo(14,"editPermission"),e.O4$(),e.TgZ(15,"svg",16),e._UZ(16,"line",17)(17,"line",18),e.qZA(),e._uU(18),e.ALo(19,"mytranslate"),e.qZA()(),e.kcU(),e.TgZ(20,"div",14)(21,"button",19),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.showAddFolderDialog())}),e.ALo(22,"editPermission"),e.O4$(),e.TgZ(23,"svg",20),e._UZ(24,"path",21)(25,"line",22)(26,"line",23),e.qZA(),e._uU(27),e.ALo(28,"mytranslate"),e.qZA()(),e.YNc(29,aL,6,0,"div",24),e.qZA()(),e.YNc(30,rL,2,1,"ng-container",13),e.YNc(31,sL,1,1,"azt-loading-effect",2),e.YNc(32,cL,15,21,"ng-template",null,25,e.W1O),e.qZA()()}if(2&n){const t=e.MAs(33),i=e.oxw();e.Q6J("hidden",!0===i.hiddenStatus.isHidden),e.xp6(4),e.Q6J("isServerSearch",!0)("placeholder",e.lcZ(5,14,"lang_auto_tim_kiem"))("searchContentObj",i.searchContentObj),e.xp6(3),e.Q6J("ngClass",e.WLB(34,uL,i.userService.isTestMarketAdminRole(),!i.userService.isTestMarketAdminRole())),e.xp6(1),e.Q6J("ngIf",e.lcZ(9,16,"")||e.lcZ(10,18,e.Dn7(11,20,"","azota_question_library",!1))),e.xp6(5),e.Q6J("disabled",i.currentCategoryId&&!e.xi3(14,24,i.currentCategory,"category")),e.xp6(5),e.hij(" ",e.lcZ(19,27,"lang_testbank_test_list_create_new")," "),e.xp6(3),e.Q6J("disabled",i.currentCategoryId&&!e.xi3(22,29,i.currentCategory,"category")),e.xp6(6),e.hij(" ",e.lcZ(28,32,"lang_auto_tao_thu_muc")," "),e.xp6(2),e.Q6J("ngIf",i.userService.isTestMarketAdminRole()),e.xp6(1),e.Q6J("ngIf",!i.currentCategoryId),e.xp6(1),e.Q6J("ngIf",i.searchContentObj.isLoading)("ngIfElse",t)}}let mL=(()=>{class n extends xe.Q{goToPage(t){this.backToData?this.commonService.myNavigationWithQueryString("/admin/testbank/document-management/0/"+this.currentCategoryId+"/"+t,"?data="+this.commonService.serializeJson(this.backToData)):this.commonService.myNavigation("/admin/testbank/document-management/0/"+this.currentCategoryId+"/"+t)}resetSearchForm(){this.searchContentObj.searchContent="",this.isShowSearchResult=!1}convertExamObj(t){var i=[];return t.forEach(a=>{a.exam&&i.push({name:a.exam.name,updatedAt:a.exam.updatedAt,createdAt:a.exam.createdAt,attended:a.exam.attended,isPublished:a.exam.isPublished,exam:a.exam,shared:a.shared,type:"exam",paths:a.paths,isGlobalAzota:0})}),i}showAddFolderDialog(){this.documentDoExamCategoryActionService.doExamCategoryAction({categoryId:this.currentCategoryId,examCategoryObj:void 0},n_.ADD_FOLDER).subscribe(t=>{t?.reloadData&&this.getData()})}showEditFolderDialog(t){this.documentDoExamCategoryActionService.doExamCategoryAction({categoryId:0,examCategoryObj:t},n_.EDIT_FOLDER).subscribe(i=>{i?.reloadData&&this.getData()})}goBackToAllCategoryPage(){this.searchContentObj.searchContent?(this.resetSearchForm(),0==this.currentCategoryId?this.getData():this.commonService.myNavigation("/admin/testbank/document-management/0/0/1")):this.commonService.myNavigation("/admin/testbank/document-management/0/0/1")}backToParentCategory(t){t.id!=this.currentCategoryId&&(this.resetSearchForm(),this.commonService.myNavigationWithQueryString("/admin/testbank/document-management/0/"+t.id+"/1",t.shareType?"?data="+this.commonService.serializeJson({shareType:t.shareType,backTo:`/admin/testbank/document-management/0/${this.currentCategoryId}/1`,suggest:t.isGlobalAzota>1?1:0,isAztLib:0!=t.isGlobalAzota?1:0}):""))}goToChildCategoryPage(t){if(this.resetSearchForm(),0!=t.isGlobalAzota)t.mouseWheel?this.commonService.myNavigationToNewTab("/ladingpage/document-management/0/0/1",""):this.commonService.myNavigationWithQueryString("/ladingpage/document-management/0/0/1","");else{let a=t.shareType?"?data="+this.commonService.serializeJson({shareType:t.shareType,suggest:0!=t.isGlobalAzota?1:0,isAztLib:0!=t.isGlobalAzota?1:0}):"";t.mouseWheel?this.commonService.myNavigationToNewTab("/admin/testbank/document-management/0/"+t.id+"/1",a):this.commonService.myNavigationWithQueryString("/admin/testbank/document-management/0/"+t.id+"/1",a)}}goToCreateExamPage(t){let i=`/admin/testbank/document-management/0/${this.currentCategoryId}/${this.pageObj.page}`+(this.backToData?.shareType?"?data="+this.commonService.serializeJson({shareType:this.backToData?.shareType,suggest:this.backToData?.suggest}):"");this.commonService.myNavigationWithQueryString("/admin/testbank/create-new-document/"+(t??0),"?backto="+encodeURIComponent(i))}goToMatrixExamPage(){let t=`/admin/testbank/document-management/0/${this.currentCategoryId}/${this.pageObj.page}`+(this.backToData?.shareType?"?data="+this.commonService.serializeJson({shareType:this.backToData?.shareType,suggest:this.backToData?.suggest}):"");this.commonService.myNavigationWithQueryString("/admin/testbank/matrix-list/"+this.currentCategoryId+"/1","?backto="+encodeURIComponent(t))}goToSyncExamByFolderPage(t){let i=`/admin/testbank/document-management/0/${this.currentCategoryId}/${this.pageObj.page}`+(this.backToData?.shareType?"?data="+this.commonService.serializeJson({shareType:this.backToData?.shareType,suggest:this.backToData?.suggest}):"");this.commonService.myNavigationWithQueryString("/admin/testbank/sync-folder/"+(t??0),"?backto="+encodeURIComponent(i))}getListParentCategoryObjs(){this.waitDestroy(this.examCategoryService.apiExamCategoryGetBreadcrumbsGet(this.currentCategoryId,this.backToData?.shareType??"","new").subscribe(t=>{if(t&&1==t.success){var i=[];t.data?.objs&&t.data?.objs.forEach(a=>{i.push({...a,shared:!1,sharedGroups:[],sharedTeachers:[],paths:[]})}),this.listBreadcrumb=i;for(let a=0;a<this.listBreadcrumb?.length;a++)if(this.listBreadcrumb[a].id==this.currentCategoryId){let r="",s=0,l=0;0!=this.listBreadcrumb[a].isGlobalAzota&&(l=1),!this.listBreadcrumb[a].parentId&&this.listBreadcrumb[a].shareType?(r=0!=this.listBreadcrumb[a].isGlobalAzota?"":"user",s=a>1?this.listBreadcrumb[a-1].id??-1:0==a&&0!=this.listBreadcrumb[a].isGlobalAzota?0:this.listBreadcrumb[a].tenantId??-1):this.listBreadcrumb[a].parentId&&this.listBreadcrumb[a].shareType?(r=a>1?this.listBreadcrumb[a-1].shareType??"":a<=1&&0!=this.listBreadcrumb[a].isGlobalAzota?this.listBreadcrumb[a].shareType??"":"",s=a>1?this.listBreadcrumb[a-1].id??-1:this.listBreadcrumb[a].parentId??-1):s=this.listBreadcrumb[a].parentId??0;let c=s?`/admin/testbank/document-management/0/${s}/1`+(this.backToData?"?data="+this.commonService.serializeJson({shareType:r}):""):"/admin/testbank/document-management/0/0/1";this.backToLink=this.commonService.serializeJson({shareType:r,backTo:c,suggest:l})}}else this.showErrorSnack(t.message??"")}))}getClassroomName(t){var i=[];return t.forEach(a=>{a.name&&!this.commonService.isExistInArray(i,a.name)&&i.push(a.name)}),i}searchDocument(t){this.searchContentObj=t,this.isShowSearchResult=!!this.searchContentObj.searchContent,this.pageObj.setPageNumber(1),this.commonService.myNavigationWithQueryString("/admin/testbank/document-management/0/"+this.currentCategoryId+"/"+this.pageObj.page,this.backToData?"?data="+this.commonService.serializeJson({shareType:this.backToData?.shareType,suggest:this.backToData?.suggest,backTo:this.backToData?.backTo??(null!=this.currentCategoryId&&0!=this.currentCategoryId?"/admin/testbank/document-management/0/0/1":"/admin/dashboard")}):""),this.searchContentObj.setLoading(!0);let a={categoryId:0!=this.currentCategoryId?this.currentCategoryId:0,documentType:void 0,shareType:this.backToData?.shareType??"",fileType:"exam",classroomId:void 0,name:this.searchContentObj.searchContent,suggestExamPurpose:void 0,lite:void 0,getGlobal:1,page:this.pageObj.page,itemPerPage:void 0};this.waitDestroy(this.documentService.apiDocumentsGet(a.categoryId,a.documentType,a.shareType,a.fileType,a.classroomId,a.name,a.suggestExamPurpose,a.lite,a.getGlobal,a.page,a.itemPerPage).subscribe(r=>{if(r&&1==r.success){var s=this.convertExamObj(r.data?.documentObjs??[]);this.documentObjs=s,this.cloneDocumentObjs=s,this.categoryObjs=r.data?.categoryObjs,this.cloneCategoryObjs=r.data?.categoryObjs??[],this.totalExam=r.data?.total??0,this.pageObj.setTotalPages(this.totalExam),this.stopStatusObj(),this.searchContentObj.setLoading(!1)}else this.showErrorSnack(r.message??""),this.searchContentObj.setLoading(!1)}))}getData(){var t=Number(this.commonService.getMyParam(this.activeRoute,"page"));this.pageObj.setPageNumber(t>0?t:1),this.searchContentObj.searchContent?this.searchContentObj.setLoading(!0):this.initStatusObj();let i={categoryId:0!=this.currentCategoryId?this.currentCategoryId:0,documentType:void 0,shareType:this.backToData?.shareType??"",fileType:"exam",classroomId:void 0,name:this.isShowSearchResult?this.searchContentObj.searchContent:void 0,suggestExamPurpose:void 0,lite:void 0,getGlobal:1,page:this.pageObj.page,itemPerPage:void 0};this.waitDestroy(this.documentService.apiDocumentsGet(i.categoryId,i.documentType,i.shareType,i.fileType,i.classroomId,i.name,i.suggestExamPurpose,i.lite,i.getGlobal,i.page,i.itemPerPage).subscribe(a=>{if(a&&1==a.success){var r=this.commonService.castObj(a.data?.documentObjs)??[],s=this.convertExamObj(r);this.documentObjs=s,this.cloneDocumentObjs=s,this.categoryObjs=a.data?.categoryObjs,this.cloneCategoryObjs=a.data?.categoryObjs??[],this.currentCategory=a.data?.currentCategory?{...a.data?.currentCategory,shared:!1,sharedGroups:[],sharedTeachers:[],paths:[]}:void 0,this.totalExam=a.data?.total??0,this.pageObj.setTotalPages(this.totalExam),this.getListParentCategoryObjs(),this.searchContentObj.setLoading(!1),this.stopStatusObj()}else this.searchContentObj.setLoading(!1),this.showErrorSnack(a.message??"")}))}reloadApi(){this.getData()}changeHiddenStatusObj(t){t?this.hiddenStatusObj():this.removeHiddenStatusObj()}ngOnInit(){this.waitDestroy((0,ne.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.pageObj.setPageNumber(Number(this.commonService.getMyParam(this.activeRoute,"page"))),this.currentCategoryId=Number(this.commonService.getMyParam(this.activeRoute,"cat_id")),this.backToData=this.commonService.myParseJson(this.commonService.getMyQueryParam("data")??""),this.backToLink=this.commonService.serializeJson({shareType:this.backToData?.shareType,suggest:this.backToData?.suggest,backTo:this.backToData?.backTo??(null!=this.currentCategoryId&&0!=this.currentCategoryId?"/admin/testbank/document-management/0/0/1":"/admin/dashboard")}),this.mobileWebviewService.sendSimpleMessage("OPEN_EXAM"),this.aztShareService.currentMessage.subscribe(i=>{this.getData()})})),this.commonService.translateMetaData({title:"lang_testbank_document_list_header_title",description:"lang_testbank_document_list_header_description",image:"lang_cms_test_image"}),super.ngOnInit()}ngOnDestroy(){super.ngOnDestroy()}constructor(t,i,a,r,s,l,c){super(),this.activeRoute=t,this.examCategoryService=i,this.documentService=a,this.aztShareService=r,this.mobileWebviewService=s,this.userService=l,this.documentDoExamCategoryActionService=c,this.isShowSearchResult=!1,this.totalExam=0,this.documentObjs=[],this.cloneDocumentObjs=[],this.cloneCategoryObjs=[],this.listBreadcrumb=[],this.currentCategoryId=0,this.backToLink="",this.searchContentObj=new t_.h,this.pageObj=new jx.m(24)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(E.gz),e.Y36(un.F1),e.Y36(UE.Z),e.Y36(jE.b),e.Y36(Ug.r),e.Y36(ya.U),e.Y36(sO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-document-exam-management-list"]],features:[e.qOj],decls:6,vars:5,consts:[[3,"headerBackToLink"],[1,"container-fluid","mt-5","overflow-hidden"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj","hidden"],["doneLoading",""],[3,"currentStatusObj"],[1,"grid","grid-cols-12","gap-6",3,"hidden"],[1,"col-span-12","lg:col-span-12","2xl:col-span-12"],[1,"flex","flex-col-reverse","sm:flex-row","items-center"],[1,"w-full","sm:w-auto","mr-auto","mt-3","sm:mt-0"],[3,"isServerSearch","placeholder","searchContentObj","onSearch"],[1,"w-full","sm:w-auto","grid","grid-cols-12","gap-2"],[1,"col-span-12","lg:col-span-6",3,"ngClass"],[4,"ngIf"],[1,"col-span-12","md:col-span-4","lg:col-span-3"],["azt-track-service","document-management-PLy5-QC0gDH",1,"btn","btn-success","text-white","shadow-md","w-full",3,"disabled","click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-6","mr-2"],["x1","12","y1","5","x2","12","y2","19"],["x1","5","y1","12","x2","19","y2","12"],["azt-track-service","document-management-Pe6lKHXLhm_",1,"btn","btn-primary","shadow-md","w-full","block",3,"disabled","click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-6","mr-2"],["d","M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z"],["x1","12","y1","10","x2","12","y2","16"],["x1","9","y1","13","x2","15","y2","13"],["class","col-span-2 md:col-span-1",4,"ngIf"],["doneLoadingSearch",""],[3,"applyType"],["azt-track-service","document-management-vOye2ZDtJ",1,"btn","btn-info","text-white","shadow-md","w-full",3,"disabled","click"],["xmlns","http://www.w3.org/2000/svg","width","20","height","24","viewBox","0 0 20 20","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"mr-2"],["x1","3","y1","22","x2","21","y2","22"],["x1","6","y1","18","x2","6","y2","11"],["x1","10","y1","18","x2","10","y2","11"],["x1","14","y1","18","x2","14","y2","11"],["x1","18","y1","18","x2","18","y2","11"],["points","12 2 20 7 4 7"],[1,"col-span-2","md:col-span-1"],["azt-track-service","document-management-FeigO5kRW",1,"btn","btn-danger","shadow-md","w-full",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-6"],["d","M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"],["d","M12 12v9"],["d","m16 16-4-4-4 4"],[3,"type"],[1,"azt-view-file-manager"],[3,"rootCategoryObjs","rootDocumentObjs","categoryObjs","documentObjs","backToData","currentPage","currentCategory","isShowSearchResult","listBreadcrumb","goToChildCategoryPage","showEditFolderDialog","goBackToAllCategoryPage","backToParentCategory","loadApiData","changeHiddenStatusObj"],[1,"azt-document-footer","flex","items-center","flex-col-reverse","sm:flex-row","mt-3"],[1,"mr-0","sm:mr-auto","mt-2"],[3,"pageObj","goToPaginationPage"],[1,"text-right","mt-2","azt-hidden","md:block"],[1,"text-md"],[1,"ml-auto","text-right","-mt-2","block","md:hidden"]],template:function(t,i){if(1&t&&(e.TgZ(0,"teacher-layout",0)(1,"div",1),e.YNc(2,iL,1,1,"azt-loading-effect",2),e._UZ(3,"azt-loading-effect",3),e.YNc(4,dL,34,37,"ng-template",null,4,e.W1O),e.qZA()()),2&t){const a=e.MAs(5);e.Q6J("headerBackToLink",i.backToLink),e.xp6(2),e.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a),e.xp6(1),e.Q6J("currentStatusObj",i.statusObj)("hidden",!0!==i.hiddenStatus.isHidden)}},dependencies:[F.mk,F.O5,vi.l,qx.L,uO,gm.W,wo._,ZM,pw,F.Ov,F.JJ,ye.JV,ye.Pf,ye.J8,ye.O0],encapsulation:2}),n})();function pL(n,o){1&n&&(e.TgZ(0,"span",14),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_auto_chia_se")))}const hL=function(n){return[n]},AL=function(n){return{backto:n}};function _L(n,o){if(1&n&&(e.TgZ(0,"div",17)(1,"a",18),e.ALo(2,"navigationLocalize"),e._UZ(3,"azt-file-item",19),e.qZA()()),2&n){const t=o.$implicit,i=e.oxw(3);e.xp6(1),e.Q6J("routerLink",e.VKq(7,hL,e.lcZ(2,5,"/admin/testbank/homework-results-list/"+(null==t.homework?null:t.homework.classroomId)+"/"+(null==t.homework?null:t.homework.id)+"/"+(null==t.homework?null:t.homework.hashId))))("queryParams",e.VKq(9,AL,"/admin/testbank/document-management/1/"+i.currentCategoryId+"/1")),e.xp6(2),e.Q6J("dataObj",t)("showByClass",!0)("viewType","classroom")}}function fL(n,o){if(1&n&&(e.TgZ(0,"div")(1,"div",15),e.YNc(2,_L,4,11,"div",16),e.qZA()()),2&n){const t=e.oxw().$implicit;e.xp6(2),e.Q6J("ngForOf",t.recommendExamObjs)}}function gL(n,o){1&n&&(e.TgZ(0,"div",20),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_homework_classroom_list_not_found_homework")))}const xL=function(n){return{cursor:n}};function bL(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",3)(1,"div",4)(2,"div",5)(3,"a",6,7),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.goToClassroomDetailPage(r))}),e._uU(5),e.ALo(6,"mytranslate"),e.qZA(),e.YNc(7,pL,3,3,"span",8),e.ALo(8,"fullPermission"),e.TgZ(9,"div",9)(10,"button",10),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.viewAllDocumentObjsOfClassroom(r))}),e._uU(11),e.ALo(12,"mytranslate"),e.qZA()()(),e.TgZ(13,"div",11),e.YNc(14,fL,3,1,"div",12),e.YNc(15,gL,3,3,"ng-template",null,13,e.W1O),e.qZA()()()}if(2&n){const t=o.$implicit,i=e.MAs(4),a=e.MAs(16);e.xp6(3),e.s9C("matTooltip",t.name),e.Q6J("ngStyle",e.VKq(16,xL,t.id?"pointer":"default"))("isDisabledTooltip",!1)("matTooltipDisabled",i.isDisabled),e.xp6(2),e.hij(" ",e.lcZ(6,9,t.name)," "),e.xp6(2),e.Q6J("ngIf",!e.xi3(8,11,t,"classroom")),e.xp6(4),e.hij(" ",e.lcZ(12,14,"lang_auto_xem_tat_ca")," "),e.xp6(3),e.Q6J("ngIf",t.recommendExamObjs&&t.recommendExamObjs.length>0)("ngIfElse",a)}}let vL=(()=>{class n extends xe.Q{goToClassroomDetailPage(t){t.id&&this.commonService.myNavigationWithQueryString("/admin/student/classroom-details/"+t.id+"/0","?backto="+encodeURIComponent(`/admin/testbank/document-management/1/${this.currentCategoryId}/${this.currentPage}`))}viewAllDocumentObjsOfClassroom(t){this.commonService.myNavigationWithQueryString("/admin/student/classroom-details/"+t.id+"/1","?backto="+encodeURIComponent(`/admin/testbank/document-management/1/${this.currentCategoryId}/${this.currentPage}`)+"&filterBy=homework")}ngOnInit(){this.waitDestroy((0,ne.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.currentCategoryId=Number(this.commonService.getMyParam(this.activeRoute,"cat_id")),this.currentPage=Number(this.commonService.getMyParam(this.activeRoute,"page"))})),this.commonService.translateMetaData({title:"lang_testbank_document_list_header_title",description:"lang_testbank_document_list_header_description",image:"lang_cms_test_image"})}ngOnDestroy(){super.ngOnDestroy()}constructor(t){super(),this.activeRoute=t,this.classroomWithHomeworkObjs=[],this.currentCategoryId=0,this.currentPage=0}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(E.gz))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-document-classroom-list"]],inputs:{classroomWithHomeworkObjs:"classroomWithHomeworkObjs"},features:[e.qOj],decls:3,vars:1,consts:[["id","contentent-view-2"],[1,"grid","grid-cols-12","gap-6"],["class","col-span-12 sm:col-span-6 lg:col-span-4 2xl:col-span-3",4,"ngFor","ngForOf"],[1,"col-span-12","sm:col-span-6","lg:col-span-4","2xl:col-span-3"],[1,"box",2,"height","100%"],[1,"flex","items-center","p-2","border-b","border-slate-200/60","dark:border-darkmode-400"],["azt-track-service","folder-and-classes-b2nw0JUA5LF",1,"font-medium","truncate","text-md",2,"max-width","40%",3,"ngStyle","matTooltip","isDisabledTooltip","matTooltipDisabled","click"],["c","isDisabled"],["class","ml-2 py-0.5 px-2 rounded-full text-xs bg-primary text-white cursor-pointer font-medium",4,"ngIf"],[1,"ml-auto"],["azt-track-service","folder-and-classes-jpGtWYvPZzj",1,"btn","btn-outline-primary","btn-transparent","p-2",3,"click"],[1,"p-3"],[4,"ngIf","ngIfElse"],["noDocumentData",""],[1,"ml-2","py-0.5","px-2","rounded-full","text-xs","bg-primary","text-white","cursor-pointer","font-medium"],[1,"grid","grid-cols-12","gap-3"],["class","col-span-12",4,"ngFor","ngForOf"],[1,"col-span-12"],["azt-track-service","folder-and-classes-M4tBKNEyrqt",3,"routerLink","queryParams"],[3,"dataObj","showByClass","viewType"],[1,"box","py-3","text-center"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,bL,17,18,"div",2),e.qZA()()),2&t&&(e.xp6(2),e.Q6J("ngForOf",i.classroomWithHomeworkObjs))},dependencies:[E.rH,F.sg,F.O5,F.PC,Ai.gM,uw,zs.Q,ye.Jy,ye.JV,ye.NK],encapsulation:2}),n})();function wL(n,o){if(1&n&&e._UZ(0,"azt-loading-effect",4),2&n){const t=e.oxw();e.Q6J("currentStatusObj",t.statusObj)}}function yL(n,o){if(1&n&&e._UZ(0,"azt-loading-effect",4),2&n){const t=e.oxw(2);e.Q6J("currentStatusObj",t.statusObj)}}function CL(n,o){if(1&n&&e._UZ(0,"app-document-classroom-list",27),2&n){const t=e.oxw(2);e.Q6J("classroomWithHomeworkObjs",t.classroomWithHomeworkObjs)}}function TL(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8)(4,"azt-search-box",9),e.NdJ("onSearch",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.searchClassroom(a.searchObj))}),e.ALo(5,"mytranslate"),e.qZA()(),e.TgZ(6,"div",10),e._UZ(7,"div",11),e.TgZ(8,"div",12)(9,"button",13),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.redirectToCreateHomeworkPage(a.currentCategoryId))}),e.O4$(),e.TgZ(10,"svg",14),e._UZ(11,"line",15)(12,"line",16),e.qZA(),e._uU(13),e.ALo(14,"mytranslate"),e.qZA()()()(),e.kcU(),e._UZ(15,"app-document-recommend-list",17),e.TgZ(16,"div",18)(17,"h3",19),e._uU(18),e.ALo(19,"mytranslate"),e.qZA(),e.YNc(20,yL,1,1,"azt-loading-effect",2),e.YNc(21,CL,1,1,"ng-template",null,20,e.W1O),e.qZA(),e.TgZ(23,"div",21)(24,"div",22)(25,"azt-paging",23),e.NdJ("goToPaginationPage",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.goToPage(a))}),e.qZA()(),e.TgZ(26,"div",24)(27,"p",25),e._uU(28),e.ALo(29,"number"),e.ALo(30,"mytranslate"),e.qZA()(),e.TgZ(31,"div",26)(32,"p",25),e._uU(33),e.ALo(34,"number"),e.ALo(35,"mytranslate"),e.qZA()()()()()}if(2&n){const t=e.MAs(22),i=e.oxw();e.xp6(4),e.Q6J("isServerSearch",!0)("placeholder",e.lcZ(5,11,"lang_testbank_test_list_search_class"))("searchContentObj",i.searchContentObj),e.xp6(9),e.hij(" ",e.lcZ(14,13,"lang_auto_tao_bai_tap")," "),e.xp6(2),e.Q6J("type","homework"),e.xp6(3),e.Oqu(e.lcZ(19,15,"lang_auto_tat_ca")),e.xp6(2),e.Q6J("ngIf",i.searchContentObj.isLoading)("ngIfElse",t),e.xp6(5),e.Q6J("pageObj",i.pageObj),e.xp6(3),e.Oqu(e.lcZ(29,17,i.totalExam)+" "+e.lcZ(30,19,"lang_testbank_test_list_classes")),e.xp6(5),e.Oqu(e.lcZ(34,21,i.totalExam)+" "+e.lcZ(35,23,"lang_testbank_test_list_classes"))}}let kL=(()=>{class n extends xe.Q{convertHomeworkObjs(t){var i=[];return t.forEach(a=>{i.length<this.maxItemToShow&&a.homework&&i.push({id:a.homework.id,hashId:a.homework.hashId,classroomId:a.homework.classroomId,name:a.homework.name,type:"homework",createdAt:a.homework.createdAt,deadline:a.homework.deadline,submitted:a.homework.count,total:a.homework.totalStudent,homework:a.homework})}),i}parseHomeworkObjs(t){var i=[];return t.forEach(a=>{a.recommendExamObjs=this.convertHomeworkObjs(a.documentObjs??[]),i.push(a)}),i}goToPage(t){this.backToData?this.commonService.myNavigationWithQueryString("/admin/testbank/document-management/1/"+this.currentCategoryId+"/"+t,"?data="+this.commonService.serializeJson(this.backToData)):this.commonService.myNavigation("/admin/testbank/document-management/1/"+this.currentCategoryId+"/"+t)}redirectToCreateHomeworkPage(t){let i=`/admin/testbank/document-management/1/${this.currentCategoryId}/${this.pageObj.page}`+(this.backToData?.shareType?"?data="+this.commonService.serializeJson({shareType:this.backToData?.shareType}):"");this.commonService.myNavigationWithQueryString("/admin/homework/add-new-homework/"+(t??0),"?backto="+encodeURIComponent(i))}getClassroomWithWithHomeworkObjs(){let t=Number(this.commonService.getMyParam(this.activeRoute,"page"));this.pageObj.setPageNumber(t),this.searchContentObj.searchContent?this.searchContentObj.isLoading=!0:this.initStatusObj(),this.documentService.apiDocumentsClassroomsGet(void 0,"homework",this.searchContentObj.searchContent?this.searchContentObj.searchContent:void 0,this.pageObj.page,this.pageObj.pageSize,2).subscribe(i=>{i&&1==i.success?(this.classroomWithHomeworkObjs=this.parseHomeworkObjs(i.data?.classrooms??[]),this.totalExam=i.data?.total??0,this.pageObj.setTotalPages(this.totalExam),this.successStatusObj(),this.searchContentObj.setLoading(!1)):(this.errorStatusObj(i.message??"",!0),this.searchContentObj.setLoading(!1))})}searchClassroom(t){this.searchContentObj=t,this.pageObj.setPageNumber(1),this.searchContentObj.setLoading(!0),this.documentService.apiDocumentsClassroomsGet(void 0,"homework",this.searchContentObj.searchContent,this.pageObj.page,this.pageObj.pageSize,2).subscribe(i=>{i&&1==i.success?(this.classroomWithHomeworkObjs=this.parseHomeworkObjs(i.data?.classrooms??[]),this.totalExam=i.data?.total??0,this.pageObj.setTotalPages(this.totalExam),this.successStatusObj(),this.searchContentObj.setLoading(!1)):(this.errorStatusObj(i.message??"",!0),this.searchContentObj.setLoading(!1))})}ngOnInit(){this.waitDestroy((0,ne.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.currentCategoryId=Number(this.commonService.getMyParam(this.activeRoute,"cat_id")),this.pageObj.setPageNumber(Number(this.commonService.getMyParam(this.activeRoute,"page"))),this.backToData=this.commonService.myParseJson(this.commonService.getMyQueryParam("data")??""),this.backToLink=this.commonService.serializeJson({shareType:this.backToData?.shareType,backTo:this.backToData?.backTo??(null!=this.currentCategoryId&&0!=this.currentCategoryId?"/admin/testbank/document-management/1/0/1":"/admin/dashboard")}),this.mobileWebviewService.sendSimpleMessage("OPEN_HOMEWORK"),this.getClassroomWithWithHomeworkObjs()})),this.waitDestroy(this.router.events.subscribe(t=>{t instanceof E.m2&&(this.currentCategoryId=Number(this.commonService.getMyParam(this.activeRoute,"cat_id")),this.pageObj.setPageNumber(Number(this.commonService.getMyParam(this.activeRoute,"page"))),this.backToData=this.commonService.myParseJson(this.commonService.getMyQueryParam("data")??""),this.backToLink=this.commonService.serializeJson({shareType:this.backToData?.shareType,backTo:this.backToData?.backTo??(null!=this.currentCategoryId&&0!=this.currentCategoryId?"/admin/testbank/document-management/1/0/1":"/admin/dashboard")}),this.getClassroomWithWithHomeworkObjs())})),this.commonService.translateMetaData({title:"lang_testbank_document_list_header_title",description:"lang_testbank_document_list_header_description",image:"lang_cms_test_image"}),super.ngOnInit()}ngOnDestroy(){super.ngOnDestroy()}constructor(t,i,a,r){super(),this.activeRoute=t,this.documentService=i,this.router=a,this.mobileWebviewService=r,this.maxItemToShow=2,this.classroomWithHomeworkObjs=[],this.totalExam=0,this.currentCategoryId=0,this.backToLink="",this.searchContentObj=new t_.h,this.pageObj=new jx.m(24)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(E.gz),e.Y36(un.Zg),e.Y36(E.F0),e.Y36(Ug.r))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-document-homework-list"]],features:[e.qOj],decls:5,vars:3,consts:[[3,"headerBackToLink"],[1,"container-fluid","mt-5","overflow-hidden"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],["doneLoading",""],[3,"currentStatusObj"],[1,"grid","grid-cols-12","gap-6"],[1,"col-span-12","lg:col-span-12","2xl:col-span-12"],[1,"flex","flex-col-reverse","sm:flex-row","items-center"],[1,"w-full","sm:w-auto","mr-auto","mt-3","sm:mt-0"],[3,"isServerSearch","placeholder","searchContentObj","onSearch"],[1,"w-full","sm:w-auto","grid","grid-cols-12","gap-2"],[1,"col-span-12","md:col-span-8"],[1,"col-span-12","md:col-span-4"],["azt-track-service","document-management-pW981emsf6c",1,"btn","btn-success","text-white","shadow-md","w-full",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-6","mr-2"],["x1","12","y1","5","x2","12","y2","19"],["x1","5","y1","12","x2","19","y2","12"],[3,"type"],[1,"azt-view-classroom","mt-5",2,"min-height","calc(100vh - 250px)"],[1,"mb-5","text-lg","font-medium"],["doneLoadingSearch",""],[1,"azt-document-footer","flex","items-center","flex-col-reverse","sm:flex-row","mt-3"],[1,"mr-0","sm:mr-auto","mt-2"],[3,"pageObj","goToPaginationPage"],[1,"text-right","mt-2","azt-hidden","md:block"],[1,"text-md"],[1,"ml-auto","text-right","-mt-2","block","md:hidden"],[3,"classroomWithHomeworkObjs"]],template:function(t,i){if(1&t&&(e.TgZ(0,"teacher-layout",0)(1,"div",1),e.YNc(2,wL,1,1,"azt-loading-effect",2),e.YNc(3,TL,36,25,"ng-template",null,3,e.W1O),e.qZA()()),2&t){const a=e.MAs(4);e.Q6J("headerBackToLink",i.backToLink),e.xp6(2),e.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a)}},dependencies:[F.O5,vi.l,qx.L,gm.W,wo._,vL,pw,F.JJ,ye.JV],encapsulation:2}),n})();var Ad=I(45337),SL=I(33975),EL=I(88787);function OL(n,o){if(1&n&&(e.TgZ(0,"div",10),e._UZ(1,"azt-list-classroom-checkbox",11),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("form",t.form)("classroomGroupData",t.data.classroomWithGroup)("permissionName",t.permissionTypes.exam)}}function IL(n,o){1&n&&(e.TgZ(0,"div")(1,"div",12)(2,"span",13),e._uU(3),e.ALo(4,"mytranslate"),e.qZA()()()),2&n&&(e.xp6(3),e.hij("* ",e.lcZ(4,1,"lang_testbank_excel_select_no_classroom_export"),""))}let ML=(()=>{class n extends mt.e{confirmAction(){const t=this.sAztClassroomCheckboxService.getClassroomIdsCheckedInGroup(this.form.controls.classroomFormArray);this.dialogRef.close(t)}checkTypeTable(t){return{lastTime:"lang_auto_last_time",firstTime:"lang_auto_first_time",highest:"lang_auto_highest",allTime:"lang_auto_allTime"}[t]||"lang_auto_last_time"}ngOnInit(){super.ngOnInit(),this.exportTitle=this.checkTypeTable(this.data.exportType)}constructor(t,i,a){super(t,i),this.data=t,this.dialogRef=i,this.sAztClassroomCheckboxService=a,this.exportTitle="",this.permissionTypes=pm.y,this.form=new h.cw({classroomFormArray:new h.Oe([]),whoAllow:new h.NI(2,{nonNullable:!0})},{validators:[Rp.h.classroomInGroupCheckBoxValidatorWithoutWhoAllow]})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(U.WI),e.Y36(U.so,8),e.Y36(Hp.f))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-select-classroom-export-excel"]],features:[e.qOj],decls:17,vars:14,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"flex","items-center","p-3","bg-slate-100","dark:bg-darkmode-400"],[1,"font-medium","text-base"],[1,"p-4"],["class","azt-list-classroom",4,"ngIf"],[4,"ngIf"],[1,"p-3","text-right"],["azt-track-service","select-student-export-H_SWYi6hbiY",1,"btn","w-24","btn-secondary","mr-3",3,"mat-dialog-close"],["azt-track-service","select-student-export-FAs4GdQImfT",1,"btn","w-24","btn-primary",3,"disabled","click"],[1,"azt-list-classroom"],[3,"form","classroomGroupData","permissionName"],[1,"col-span-12","p-4"],[1,"text-danger","font-medium","p-5"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e._uU(4),e.ALo(5,"mytranslate"),e.ALo(6,"mytranslate"),e.qZA()(),e.TgZ(7,"div",4),e.YNc(8,OL,2,3,"div",5),e.YNc(9,IL,5,3,"div",6),e.qZA()(),e.TgZ(10,"div",7)(11,"a",8),e._uU(12),e.ALo(13,"mytranslate"),e.qZA(),e.TgZ(14,"button",9),e.NdJ("click",function(){return i.confirmAction()}),e._uU(15),e.ALo(16,"mytranslate"),e.qZA()()()),2&t&&(e.xp6(4),e.Oqu(e.lcZ(5,6,"lang_testbank_excel_select_classroom_export")+e.lcZ(6,8,i.exportTitle)),e.xp6(4),e.Q6J("ngIf",i.data.classroomWithGroup.length),e.xp6(1),e.Q6J("ngIf",!i.data.classroomWithGroup.length),e.xp6(3),e.hij(" ",e.lcZ(13,10,"lang_cms_common_close_btn")," "),e.xp6(2),e.Q6J("disabled",i.form.controls.classroomFormArray.errors),e.xp6(1),e.hij(" ",e.lcZ(16,12,"lang_cms_common_confirm_btn")," "))},dependencies:[F.O5,U.ZT,hm.B,ye.JV],encapsulation:2}),n})(),Kx=(()=>{class n{constructor(t){this.browserStorageService=t,this.global_data_filter={}}getCustomFilter(t,i){let a="";switch(t){case"exam":a="saveFilterExam_"+i;break;case"homework":a="saveFilterHomework_"+i}return this.global_data_filter[a]}setCustomFilter(t,i,a){let r="";switch(i){case"exam":r="saveFilterExam_"+a,this.global_data_filter[r]="",t.isMarked&&(this.global_data_filter[r]+="isMarked "),t.isNotMarked&&(this.global_data_filter[r]+="isNotMarked "),t.isOnTest&&(this.global_data_filter[r]+="isOnTest "),t.isNotTested&&(this.global_data_filter[r]+="isNotTested ");break;case"homework":r="saveFilterHomework_"+a,this.global_data_filter[r]="",t.isMarked&&(this.global_data_filter[r]+="isMarked "),t.isSubmitted&&(this.global_data_filter[r]+="isSubmitted "),t.isNotSubmit&&(this.global_data_filter[r]+="isNotSubmit "),t.mustReSubmit&&(this.global_data_filter[r]+="mustReSubmit ")}}removeCustomFilter(t,i){let a="";switch(t){case"exam":a="saveFilterExam_"+i,this.global_data_filter[a]="";break;case"homework":a="saveFilterHomework_"+i,this.global_data_filter[a]=""}}getStatusSideNav(t){return this.browserStorageService.getSimpleStorage("statusSideNav_"+t)??""}removeStatusSideNav(t){this.browserStorageService.removeSimpleStorage("statusSideNav_"+t)}saveStatusSideNav(t,i){this.browserStorageService.saveSimpleStorage("statusSideNav_"+t,i?"open":"close")}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(oa.n))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var i_=I(7289),Gx=I(88632);let LL=(()=>{class n{constructor(t,i,a,r,s,l){this.commonService=t,this.examPageResultService=i,this.permissionService=a,this.globalService=r,this.browserStorageService=s,this.gzipHelper=l}getTestedUserObjs(t,i,a){return this.globalService.startIntervalFunc(t),this.getTestedOfExamResult(t,i,"default",a)}getTestedOfExamResult(t,i,a,r){return new ee.y(s=>{let l="tested_list_result_v2_"+i,c=this.browserStorageService.getSimpleStorage(l)??"",u=this.gzipHelper.resultContentSupport(c),m=u&&this.commonService.willDeleteParseJson(u)?this.commonService.willDeleteParseJson(u):void 0;r&&m?(s.next({status:200,success:1,data:m,message:"successful"}),s.complete()):this.examPageResultService.apiExamPageResultGetObjV3Get(i).subscribe(p=>{if(1==p.success){let b=p.data?.examObj,L=p.data?.classrooms??[],N=p.data?.totalAttended??0,R=p.data?.examCreatorObj,j=p.data?.offlineExamObj,G=p.data?.hasEssayQuestion,ae=p.data?.offlineMixQuestionObjs,W=p.data?.canResetStudentCode,le=p.data?.hasCreateStudentCode,ve=p.data?.examStudentObjs,ce=p.data?.fileTypeStr??"";if(this.permissionService.hasViewExamPermission("exam",b)||this.permissionService.hasConfigAndMarkClassroomPermission("exam",b)){let te=[];if(L.length>0)for(let Ze=0;Ze<L.length;Ze++){let se={id:L[Ze].id,name:L[Ze].name??"lang_auto_tu_do",totalTested:L[Ze].totalTested,countStudents:L[Ze].totalRegister??0,countSubmitted:L[Ze].totalTested,classroomGroup:L[Ze].classroomGroup},pe=[];(-1!=se.id||-1==se.id&&(se.countStudents||se.totalTested))&&te.push({classObj:{...se,teacherId:0,showAddStudent:0,grade:0},results:pe})}let Se={studentsInClassResults:te.length>0?te:[],studentsNotInClassResults:[],totalAttended:N,totalUsers:0,examCreatorObj:R,offlineMixQuestionObjs:ae,examObj:b,examStudents:ve,hasEssayQuestion:G,offlineExamObj:j,canResetStudentCode:W,hasCreateStudentCode:le,fileTypeStr:ce,errorConfigClassroomPermission:p.data?.errorConfigClassroomPermission,errorMessage:p.data?.errorMessage,classroomWithGroup:p.data?.classroomGroupObjs};if("export_tool"!=t){(this.browserStorageService.getSizeOfStorageByKey("tested_list_result_v2")>2||this.browserStorageService.getSizeOfStorage()>4.5)&&this.browserStorageService.removeSimpleStorageByKey("tested_list_result_v2");let Ze=this.gzipHelper.zipBigContent(JSON.stringify(Se));this.browserStorageService.saveSimpleStorage(l,Ze)}s.next({status:200,success:1,data:Se,message:"successful"}),s.complete()}else s.next({status:200,success:1,data:{studentsInClassResults:[],studentsNotInClassResults:[],totalAttended:N,totalUsers:0,examCreatorObj:R,offlineMixQuestionObjs:ae,examObj:b,examStudents:ve,hasEssayQuestion:G,offlineExamObj:j,canResetStudentCode:W,hasCreateStudentCode:le,fileTypeStr:p.data?.fileTypeStr,errorConfigClassroomPermission:p.data?.errorConfigClassroomPermission,errorMessage:p.data?.errorMessage,maxGroupId:0,classroomWithGroup:[]},message:"successful"}),s.complete()}else s.next({status:p.code,success:0,data:null,message:p.message??""}),s.complete()})})}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(Yn.z),e.LFG(un.DR),e.LFG(pu.j),e.LFG(i_.q),e.LFG(oa.n),e.LFG(Gx.n))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var BL=I(77827),zg=I(74699);let Yx=(()=>{class n{getDefaultFilterObj(){var t=this._getInitFilterObj(),i=this.commonService.castJsonToObj(this.browserStorageService.getSimpleStorage(this.localStorageSlug)??"");return i&&(t=i),t}clearFilter(){return this.filterObj=this._getInitFilterObj(),this.saveFilterObj(),this.filterObj}saveFilterObj(){this.browserStorageService.saveSimpleStorage(this.localStorageSlug,this.commonService.serializeJson(this.filterObj)),this.totalCustomFilter=this._countChecked(this.filterObj)}_countChecked(t){var i=0;for(var a in t)!0===t[a]&&(i+=1);return i}_getInitFilterObj(){return{isMarked:!1,isNotMarked:!1,isOnTest:!1,isNotSubmit:!1,isNotTested:!1}}constructor(t,i){this.commonService=t,this.browserStorageService=i,this.totalCustomFilter=0,this.localStorageSlug="testbank_exam_result_filter_v2",this.filterObj=this.getDefaultFilterObj(),this.totalCustomFilter=this._countChecked(this.filterObj)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(Yn.z),e.LFG(oa.n))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var PL=I(15152),Hs=I(32651);function QL(n,o){if(1&n&&(e.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"span",5),e._UZ(4,"azt-loading-ui"),e.qZA()(),e.TgZ(5,"div",6),e._UZ(6,"div",7),e.qZA()()()),2&n){const t=e.oxw();e.xp6(6),e.Q6J("innerHTML",t.msg,e.oJD)}}let Hg=(()=>{class n extends xe.Q{constructor(t){super(),this.commonService=t,this.show=!1,this.msg=""}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Yn.z))},n.\u0275cmp=e.Xpm({type:n,selectors:[["azt-export-docx-loading-box"]],inputs:{show:"show",msg:"msg",percent:"percent"},features:[e.qOj],decls:2,vars:1,consts:[[1,"export-docx-frame"],["class","loading-box",4,"ngIf"],[1,"loading-box"],[1,"loading-box-wrapper"],[2,"margin-bottom","10px"],[1,"w-4","h-4","inline-block"],[1,"loading-box-lines"],[1,"loading-box-lines-content",3,"innerHTML"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.YNc(1,QL,7,1,"div",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",i.show))},dependencies:[F.O5,wi.n],styles:[".export-docx-frame[_ngcontent-%COMP%]   .loading-box[_ngcontent-%COMP%]{width:100vw;height:100vh;position:fixed;z-index:9999;top:0;left:0;display:flex;justify-content:center;background-color:#000c}.export-docx-frame[_ngcontent-%COMP%]   .loading-box[_ngcontent-%COMP%]   .loading-box-wrapper[_ngcontent-%COMP%]{margin-top:100px;text-align:center;color:#fafafa;font-weight:400}.export-docx-frame[_ngcontent-%COMP%]   .loading-box[_ngcontent-%COMP%]   .loading-box-lines[_ngcontent-%COMP%]{font-size:20px;margin-top:10px;background-color:#fafafa;color:#000;height:-moz-fit-content;height:fit-content;width:500px;border-radius:5px}@media screen and (max-width: 520px){.export-docx-frame[_ngcontent-%COMP%]   .loading-box[_ngcontent-%COMP%]   .loading-box-wrapper[_ngcontent-%COMP%]{padding:10px}.export-docx-frame[_ngcontent-%COMP%]   .loading-box[_ngcontent-%COMP%]   .loading-box-lines[_ngcontent-%COMP%]{width:100%}}.export-docx-frame[_ngcontent-%COMP%]   .loading-box[_ngcontent-%COMP%]   .loading-box-lines-content[_ngcontent-%COMP%]{padding:20px}  .export-docx-frame .loading-box .loading-box-lines p{padding-top:10px}  .export-docx-frame .loading-box .loading-box-lines p:first-child{padding-top:0}"]}),n})();var $x=I(38228);let FL=(()=>{class n{transform(t){return{lastTime:"lang_auto_last_time",firstTime:"lang_auto_first_time",highest:"lang_auto_highest",allTime:"lang_auto_allTime"}[t]||"lang_auto_last_time"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=e.Yjl({name:"checkTypeTable",type:n,pure:!0}),n})(),NL=(()=>{class n{constructor(t){this.timeService=t}transform(t,i){return this.timeService.calculationTimeExamTested(t,i)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Mo.D,16))},n.\u0275pipe=e.Yjl({name:"calculationTime",type:n,pure:!0}),n})(),ZL=(()=>{class n{constructor(t){this.timeService=t}transform(t,i){return this.timeService.calculationTimeOnlyMinutes(t,i)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Mo.D,16))},n.\u0275pipe=e.Yjl({name:"calculationTimeOnlyMinutes",type:n,pure:!0}),n})(),DL=(()=>{class n{transform(t){return t.isNotMarked?"lang_auto_chua_cham":t.isOnTest?"lang_auto_dang_thi":t.isNotSubmit?"lang_auto_chua_nop_bai":t.isNotTested?"lang_auto_chua_thi":""}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=e.Yjl({name:"checkStatusStudent",type:n,pure:!0}),n})(),UL=(()=>{class n{transform(t){let i=[];for(let a=0;a<t;a++)i.push(a);return i}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=e.Yjl({name:"createFakeArr",type:n,pure:!0}),n})(),jL=(()=>{class n{transform(t,i,a,r,s){let l=a?12:11;return l+=r.subjectMarks?3:0,l+=i>0?i:0,2==t&&(l+=s?s+1:1),l}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=e.Yjl({name:"getCurrentColumnIndexForExcel",type:n,pure:!0}),n})();const qL=["TABLE"];function RL(n,o){if(1&n&&(e.TgZ(0,"th",6),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n){const t=e.oxw();e.uIk("excelWidth",15)("excelRow",5)("excelColumn",10)("excelStyle",t.styleThNormal),e.xp6(1),e.Oqu(e.lcZ(2,5,"lang_testbank_tested_list_essay_score"))}}function zL(n,o){if(1&n&&(e.TgZ(0,"th",6),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n){const t=o.index,i=e.oxw(2);e.uIk("excelWidth",15)("excelRow",5)("excelColumn",(i.hasEssayQuestion?12:11)+t)("excelStyle",i.styleThNormal),e.xp6(1),e.hij(" ",e.lcZ(2,5,"lang_combine_exam_component")+(t+1)," ")}}function HL(n,o){1&n&&(e.ynx(0),e.YNc(1,zL,3,7,"th",9),e.ALo(2,"createFakeArr"),e.BQk()),2&n&&(e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,1,3)))}function JL(n,o){if(1&n&&(e.TgZ(0,"th",6),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n){const t=o.$implicit,i=o.index,a=e.oxw(2);e.uIk("excelWidth",10)("excelRow",5)("excelColumn",(a.hasEssayQuestion?12:11)+(a.examObj.subjectMarks?3:0)+i)("excelStyle",a.styleThNormal),e.xp6(1),e.AsE(" ",e.lcZ(2,6,"lang_testbank_test_config_group"),"\xa0",t<9?"0"+(t+1):t+1," ")}}function KL(n,o){if(1&n&&(e.ynx(0),e.YNc(1,JL,3,8,"th",9),e.ALo(2,"createFakeArr"),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,1,t.maxGroupQuestion))}}const Au=function(n,o,t,i){return[1,n,o,t,i]};function GL(n,o){if(1&n&&(e.TgZ(0,"th",6),e.ALo(1,"getCurrentColumnIndexForExcel"),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()),2&n){const t=o.index,i=e.oxw();let a;e.uIk("excelWidth",8)("excelRow",5)("excelColumn",e.G7q(1,6,e.l5B(14,Au,i.maxGroupQuestion,i.hasEssayQuestion,i.examObj,i.totalQuestion))+(t+8))("excelStyle",i.styleThNormal),e.xp6(2),e.AsE(" ",e.lcZ(3,12,"lang_testbank_tested_list_question"),"\xa0",t+(null!==(a=i.examObj.startQuestionIndex)&&void 0!==a?a:0)<9?"0"+(t+(null!==(a=i.examObj.startQuestionIndex)&&void 0!==a?a:1)):t+(null!==(a=i.examObj.startQuestionIndex)&&void 0!==a?a:1)," ")}}function YL(n,o){if(1&n&&(e.TgZ(0,"td",14),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;let i;e.xp6(1),e.hij(" ",t.countEssayQuestion&&t.countEssayQuestion>0?(null!==(i=t.totalQuestion)&&void 0!==i?i:0)-(null!==(i=t.rightAnswer)&&void 0!==i?i:0)-t.countEssayQuestion:(null!==(i=t.totalQuestion)&&void 0!==i?i:0)-(null!==(i=t.rightAnswer)&&void 0!==i?i:0)," ")}}function $L(n,o){1&n&&(e.TgZ(0,"td",14),e._uU(1,"0"),e.qZA())}function VL(n,o){if(1&n&&(e.TgZ(0,"td",14),e._uU(1),e.ALo(2,"mytranslate"),e.ALo(3,"checkStatusStudent"),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(null!=t.essayMark?t.essayMark:e.lcZ(2,1,e.lcZ(3,3,t)))}}function WL(n,o){if(1&n&&(e.TgZ(0,"th",14),e._uU(1),e.qZA()),2&n){const t=o.index,i=e.oxw(3).$implicit;e.xp6(1),e.hij(" ",null!=(null==i.subjectMarkValues?null:i.subjectMarkValues[t])?null==i.subjectMarkValues?null:i.subjectMarkValues[t]:""," ")}}function XL(n,o){1&n&&(e.ynx(0),e.YNc(1,WL,2,1,"th",16),e.ALo(2,"createFakeArr"),e.BQk()),2&n&&(e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,1,3)))}function e8(n,o){1&n&&(e.TgZ(0,"th",14),e._uU(1),e.qZA()),2&n&&(e.xp6(1),e.Oqu(""))}function t8(n,o){1&n&&(e.YNc(0,e8,2,1,"th",16),e.ALo(1,"createFakeArr")),2&n&&e.Q6J("ngForOf",e.lcZ(1,1,3))}function n8(n,o){if(1&n&&(e.ynx(0),e.YNc(1,XL,3,3,"ng-container",17),e.YNc(2,t8,2,3,"ng-template",null,18,e.W1O),e.BQk()),2&n){const t=e.MAs(3),i=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",null==i.subjectMarkValues?null:i.subjectMarkValues.length)("ngIfElse",t)}}function i8(n,o){if(1&n&&(e.TgZ(0,"th",14),e._uU(1),e.ALo(2,"number"),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.point,"1.2-2"))}}function o8(n,o){1&n&&(e.TgZ(0,"th",14),e._uU(1),e.qZA()),2&n&&(e.xp6(1),e.Oqu(""))}function a8(n,o){if(1&n&&(e.ynx(0),e.YNc(1,o8,2,1,"th",16),e.ALo(2,"createFakeArr"),e.BQk()),2&n){const t=e.oxw(3).$implicit,i=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,1,i.maxGroupQuestion-t.groupPoints.length))}}function r8(n,o){if(1&n&&(e.ynx(0),e.YNc(1,i8,3,4,"th",16),e.YNc(2,a8,3,3,"ng-container",8),e.BQk()),2&n){const t=e.oxw(2).$implicit,i=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.groupPoints),e.xp6(1),e.Q6J("ngIf",t.groupPoints.length<i.maxGroupQuestion)}}function s8(n,o){1&n&&e._UZ(0,"th",14)}function l8(n,o){if(1&n&&(e.YNc(0,s8,1,0,"th",16),e.ALo(1,"createFakeArr")),2&n){const t=e.oxw(4);e.Q6J("ngForOf",e.lcZ(1,1,t.maxGroupQuestion))}}function c8(n,o){if(1&n&&(e.ynx(0),e.YNc(1,r8,3,2,"ng-container",17),e.YNc(2,l8,2,3,"ng-template",null,19,e.W1O),e.BQk()),2&n){const t=e.MAs(3),i=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",i.groupPoints&&i.groupPoints.length>0)("ngIfElse",t)}}function u8(n,o){if(1&n&&(e.TgZ(0,"td",14),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.Oqu(t)}}function d8(n,o){if(1&n&&(e.TgZ(0,"td",14),e._uU(1),e.qZA(),e.TgZ(2,"td",14),e._uU(3),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.Oqu(t.key),e.xp6(2),e.Oqu(t.value)}}function m8(n,o){if(1&n&&(e.TgZ(0,"tr")(1,"td",12),e._uU(2),e.qZA(),e.TgZ(3,"td",13),e._uU(4),e.qZA(),e.TgZ(5,"td",14),e._uU(6),e.qZA(),e.TgZ(7,"td",14),e._uU(8),e.ALo(9,"formatOnlyDateByUserUnitPipe"),e.qZA(),e.TgZ(10,"td",14),e._uU(11),e.ALo(12,"mytranslate"),e.ALo(13,"mytranslate"),e.qZA(),e.TgZ(14,"td",14),e._uU(15),e.ALo(16,"formatStudentCodeToNumber"),e.qZA(),e.TgZ(17,"td",14),e._uU(18),e.ALo(19,"formatOfflineExamHashIdToNumber"),e.qZA(),e.TgZ(20,"td",14),e._uU(21),e.qZA(),e.YNc(22,YL,2,1,"td",15),e.YNc(23,$L,2,0,"td",15),e.TgZ(24,"td",14),e._uU(25),e.ALo(26,"mytranslate"),e.ALo(27,"checkStatusStudent"),e.qZA(),e.YNc(28,VL,4,5,"td",15),e.TgZ(29,"td",14),e._uU(30),e.qZA(),e.YNc(31,n8,4,2,"ng-container",8),e.YNc(32,c8,4,2,"ng-container",8),e.TgZ(33,"td",14),e._uU(34),e.qZA(),e.TgZ(35,"td",14),e._uU(36),e.qZA(),e.TgZ(37,"td",14),e._uU(38),e.ALo(39,"formatFullDateTimeByUserUnitPipe"),e.qZA(),e.TgZ(40,"td",14),e._uU(41),e.ALo(42,"formatFullDateTimeByUserUnitPipe"),e.qZA(),e.TgZ(43,"td",14),e._uU(44),e.ALo(45,"calculationTime"),e.qZA(),e.TgZ(46,"td",14),e._uU(47),e.ALo(48,"calculationTimeOnlyMinutes"),e.qZA(),e.TgZ(49,"td",14),e._uU(50),e.qZA(),e.TgZ(51,"td",14),e._uU(52),e.qZA(),e.YNc(53,u8,2,1,"td",16),e.YNc(54,d8,4,2,"ng-template",10),e.qZA()),2&n){const t=o.$implicit,i=e.oxw().$implicit,a=e.oxw();let r,s,l,c,u;e.xp6(2),e.Oqu(t.fullName),e.xp6(2),e.Oqu(null!==(r=null==i.classObj||null==i.classObj.classroomGroup?null:i.classObj.classroomGroup.name)&&void 0!==r?r:""),e.xp6(2),e.Oqu(null==i.classObj?null:i.classObj.name),e.xp6(2),e.Oqu(e.lcZ(9,25,t.birthday)),e.xp6(3),e.Oqu(0==t.gender?e.lcZ(12,27,"lang_gender_female"):1==t.gender?e.lcZ(13,29,"lang_gender_male"):""),e.xp6(4),e.Oqu(t.identificationNumber?e.xi3(16,31,t.identificationNumber,6):""),e.xp6(3),e.Oqu(t.offlineMixQuestionHashId?e.xi3(19,34,t.offlineMixQuestionHashId,3):""),e.xp6(3),e.Oqu(t.rightAnswer),e.xp6(1),e.Q6J("ngIf",!t.isNotTested&&!t.isOnTest),e.xp6(1),e.Q6J("ngIf",t.isNotTested||t.isOnTest),e.xp6(2),e.Oqu(null!=t.trueFalseMark?t.trueFalseMark:e.lcZ(26,37,e.lcZ(27,39,t))),e.xp6(3),e.Q6J("ngIf",a.hasEssayQuestion),e.xp6(2),e.Oqu(t.mark),e.xp6(1),e.Q6J("ngIf",a.examObj.subjectMarks),e.xp6(1),e.Q6J("ngIf",a.maxGroupQuestion>0),e.xp6(2),e.Oqu(t.testedTime),e.xp6(2),e.Oqu(t.totalTestTime?t.totalTestTime:t.totalExamResultObjs),e.xp6(2),e.Oqu(e.lcZ(39,41,null!==(s=t.startedTest)&&void 0!==s?s:"")),e.xp6(3),e.Oqu(e.lcZ(42,43,null!==(l=t.createdAt)&&void 0!==l?l:"")),e.xp6(3),e.Oqu(null==t.startedTest?"":e.xi3(45,45,t.startedTest,null!==(c=t.createdAt)&&void 0!==c?c:"")),e.xp6(3),e.Oqu(null==t.startedTest?"":e.xi3(48,48,t.startedTest,null!==(u=t.createdAt)&&void 0!==u?u:"")),e.xp6(3),e.Oqu(null==t.eventTracks?null:t.eventTracks.exitCount),e.xp6(2),e.Oqu(null==t.eventTracks?null:t.eventTracks.blurCount),e.xp6(1),e.Q6J("ngForOf",t.answerMixObjs),e.xp6(1),e.Q6J("ngForOf",t.inforsParse)}}function p8(n,o){1&n&&(e.YNc(0,m8,55,51,"tr",11),e._UZ(1,"tr")),2&n&&e.Q6J("ngForOf",o.$implicit.results)}function h8(n,o){if(1&n&&(e.TgZ(0,"td",14),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;let i;e.xp6(1),e.hij(" ",t.countEssayQuestion&&t.countEssayQuestion>0?(null!==(i=t.totalQuestion)&&void 0!==i?i:0)-(null!==(i=t.rightAnswer)&&void 0!==i?i:0)-t.countEssayQuestion:(null!==(i=t.totalQuestion)&&void 0!==i?i:0)-(null!==(i=t.rightAnswer)&&void 0!==i?i:0)," ")}}function A8(n,o){1&n&&(e.TgZ(0,"td",14),e._uU(1,"0"),e.qZA())}function _8(n,o){if(1&n&&(e.TgZ(0,"td",14),e._uU(1),e.ALo(2,"mytranslate"),e.ALo(3,"checkStatusStudent"),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(null!=t.essayMark?t.essayMark:e.lcZ(2,1,e.lcZ(3,3,t)))}}function f8(n,o){if(1&n&&(e.TgZ(0,"th",14),e._uU(1),e.qZA()),2&n){const t=o.index,i=e.oxw(3).$implicit;e.xp6(1),e.hij(" ",null!=(null==i.subjectMarkValues?null:i.subjectMarkValues[t])?null==i.subjectMarkValues?null:i.subjectMarkValues[t]:""," ")}}function g8(n,o){1&n&&(e.ynx(0),e.YNc(1,f8,2,1,"th",16),e.ALo(2,"createFakeArr"),e.BQk()),2&n&&(e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,1,3)))}function x8(n,o){1&n&&(e.TgZ(0,"th",14),e._uU(1),e.qZA()),2&n&&(e.xp6(1),e.Oqu(""))}function b8(n,o){1&n&&(e.YNc(0,x8,2,1,"th",16),e.ALo(1,"createFakeArr")),2&n&&e.Q6J("ngForOf",e.lcZ(1,1,3))}function v8(n,o){if(1&n&&(e.ynx(0),e.YNc(1,g8,3,3,"ng-container",17),e.YNc(2,b8,2,3,"ng-template",null,18,e.W1O),e.BQk()),2&n){const t=e.MAs(3),i=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",null==i.subjectMarkValues?null:i.subjectMarkValues.length)("ngIfElse",t)}}function w8(n,o){if(1&n&&(e.TgZ(0,"th",14),e._uU(1),e.ALo(2,"number"),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.Oqu(e.xi3(2,1,t.point,"1.2-2"))}}function y8(n,o){1&n&&(e.TgZ(0,"th",14),e._uU(1),e.qZA()),2&n&&(e.xp6(1),e.Oqu(""))}function C8(n,o){if(1&n&&(e.ynx(0),e.YNc(1,y8,2,1,"th",16),e.ALo(2,"createFakeArr"),e.BQk()),2&n){const t=e.oxw(3).$implicit,i=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,1,i.maxGroupQuestion-t.groupPoints.length))}}function T8(n,o){if(1&n&&(e.ynx(0),e.YNc(1,w8,3,4,"th",16),e.YNc(2,C8,3,3,"ng-container",8),e.BQk()),2&n){const t=e.oxw(2).$implicit,i=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.groupPoints),e.xp6(1),e.Q6J("ngIf",t.groupPoints.length<i.maxGroupQuestion)}}function k8(n,o){1&n&&e._UZ(0,"th",14)}function S8(n,o){if(1&n&&(e.YNc(0,k8,1,0,"th",16),e.ALo(1,"createFakeArr")),2&n){const t=e.oxw(4);e.Q6J("ngForOf",e.lcZ(1,1,t.maxGroupQuestion))}}function E8(n,o){if(1&n&&(e.ynx(0),e.YNc(1,T8,3,2,"ng-container",17),e.YNc(2,S8,2,3,"ng-template",null,20,e.W1O),e.BQk()),2&n){const t=e.MAs(3),i=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",i.groupPoints&&i.groupPoints.length>0)("ngIfElse",t)}}function O8(n,o){if(1&n&&(e.TgZ(0,"td",14),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.Oqu(t)}}function I8(n,o){if(1&n&&(e.TgZ(0,"td",14),e._uU(1),e.qZA(),e.TgZ(2,"td",14),e._uU(3),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.Oqu(t.key),e.xp6(2),e.Oqu(t.value)}}function M8(n,o){if(1&n&&(e.TgZ(0,"tr")(1,"td",12),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e._UZ(4,"td",13),e.TgZ(5,"td",14),e._uU(6),e.ALo(7,"mytranslate"),e.qZA(),e.TgZ(8,"td",14),e._uU(9),e.ALo(10,"formatOnlyDateByUserUnitPipe"),e.qZA(),e.TgZ(11,"td",14),e._uU(12),e.ALo(13,"mytranslate"),e.ALo(14,"mytranslate"),e.qZA(),e.TgZ(15,"td",14),e._uU(16),e.ALo(17,"formatStudentCodeToNumber"),e.qZA(),e.TgZ(18,"td",14),e._uU(19),e.ALo(20,"formatOfflineExamHashIdToNumber"),e.qZA(),e.TgZ(21,"td",14),e._uU(22),e.qZA(),e.YNc(23,h8,2,1,"td",15),e.YNc(24,A8,2,0,"td",15),e.TgZ(25,"td",14),e._uU(26),e.ALo(27,"mytranslate"),e.ALo(28,"checkStatusStudent"),e.qZA(),e.YNc(29,_8,4,5,"td",15),e.TgZ(30,"td",14),e._uU(31),e.qZA(),e.YNc(32,v8,4,2,"ng-container",8),e.YNc(33,E8,4,2,"ng-container",8),e.TgZ(34,"td",14),e._uU(35),e.qZA(),e.TgZ(36,"td",14),e._uU(37),e.qZA(),e.TgZ(38,"td",14),e._uU(39),e.ALo(40,"formatFullDateTimeByUserUnitPipe"),e.qZA(),e.TgZ(41,"td",14),e._uU(42),e.ALo(43,"formatFullDateTimeByUserUnitPipe"),e.qZA(),e.TgZ(44,"td",14),e._uU(45),e.ALo(46,"calculationTime"),e.qZA(),e.TgZ(47,"td",14),e._uU(48),e.ALo(49,"calculationTimeOnlyMinutes"),e.qZA(),e.TgZ(50,"td",14),e._uU(51),e.qZA(),e.TgZ(52,"td",14),e._uU(53),e.qZA(),e.YNc(54,O8,2,1,"td",16),e.YNc(55,I8,4,2,"ng-template",10),e.qZA()),2&n){const t=o.$implicit,i=e.oxw(2);let a,r,s,l;e.xp6(2),e.Oqu(t.fullName||e.lcZ(3,24,"lang_auto_thi_sinh_thi_offline")+t.resultId),e.xp6(4),e.Oqu(e.lcZ(7,26,"lang_auto_tu_do")),e.xp6(3),e.Oqu(e.lcZ(10,28,t.birthday)),e.xp6(3),e.Oqu(0==t.gender?e.lcZ(13,30,"lang_gender_female"):1==t.gender?e.lcZ(14,32,"lang_gender_male"):""),e.xp6(4),e.Oqu(t.identificationNumber?e.xi3(17,34,t.identificationNumber,6):""),e.xp6(3),e.Oqu(t.offlineMixQuestionHashId?e.xi3(20,37,t.offlineMixQuestionHashId,3):""),e.xp6(3),e.Oqu(t.rightAnswer),e.xp6(1),e.Q6J("ngIf",!t.isNotTested&&!t.isOnTest),e.xp6(1),e.Q6J("ngIf",t.isNotTested||t.isOnTest),e.xp6(2),e.Oqu(null!=t.trueFalseMark?t.trueFalseMark:e.lcZ(27,40,e.lcZ(28,42,t))),e.xp6(3),e.Q6J("ngIf",i.hasEssayQuestion),e.xp6(2),e.Oqu(t.mark),e.xp6(1),e.Q6J("ngIf",i.examObj.subjectMarks),e.xp6(1),e.Q6J("ngIf",i.maxGroupQuestion>0),e.xp6(2),e.Oqu(t.testedTime),e.xp6(2),e.Oqu(t.totalTestTime?t.totalTestTime:t.totalExamResultObjs),e.xp6(2),e.Oqu(e.lcZ(40,44,null!==(a=t.startedTest)&&void 0!==a?a:"")),e.xp6(3),e.Oqu(e.lcZ(43,46,null!==(r=t.createdAt)&&void 0!==r?r:"")),e.xp6(3),e.Oqu(null==t.startedTest?"":e.xi3(46,48,t.startedTest,null!==(s=t.createdAt)&&void 0!==s?s:"")),e.xp6(3),e.Oqu(null==t.startedTest?"":e.xi3(49,51,t.startedTest,null!==(l=t.createdAt)&&void 0!==l?l:"")),e.xp6(3),e.Oqu(null==t.eventTracks?null:t.eventTracks.exitCount),e.xp6(2),e.Oqu(null==t.eventTracks?null:t.eventTracks.blurCount),e.xp6(1),e.Q6J("ngForOf",t.answerMixObjs),e.xp6(1),e.Q6J("ngForOf",t.inforsParse)}}function L8(n,o){if(1&n&&(e.ynx(0),e.YNc(1,M8,56,54,"tr",11),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.dataScore)}}const B8=function(n,o,t,i){return[2,n,o,t,i]};let P8=(()=>{class n extends xe.Q{exportToExcel(){let t=this.examObj.hasOwnProperty("name")?this.commonService.createFileNameExportFile([this.examObj.name??"",this.tableType,"-ScoreSheet"])+".xlsx":this.commonService.createFileNameExportFile([this.tableType,"ScoreSheet"])+".xlsx";this.exportExcelService.exportHtmlTableToExcelStyleOnlyHeaderRow(this.TABLE,!0,t,5)}checkSortListStudent(t,i){return this.isSortByMark?this.sortService.sortMarkDESC(i,this.hasEssayQuestion):this.isSortByTime?this.sortService.sortTimeDESC(i):0==t||this.isSortByName?this.sortService.sortFirstNameStudents(i):this.sortService.sortArrayByMultipleObjectKeyAsc(i,"pos","id")}processDataScoreByClass(){for(const t of this.dataScoreByClass)t.results=this.checkSortListStudent(t.classObj?.sortType??0,t.results||[])}ngOnChanges(){this.processDataScoreByClass()}constructor(t,i,a){super(),this.timeService=t,this.sortService=i,this.exportExcelService=a,this.dataScore=[],this.dataScoreByClass=[],this.exportQuestionObjs=[],this.tableType="lastTime",this.hasEssayQuestion=!1,this.countEssayQuestion=0,this.totalQuestion=0,this.maxGroupQuestion=0,this.isSortByMark=!1,this.isSortByTime=!1,this.isSortByName=!1,this.currentDate=new Date,this.styleThNormal='{"border": {"top": { "style": "thin", "color": { "rgb": "ff3c8dbc" } },"bottom": { "style": "thin", "color": { "rgb": "ff3c8dbc" } }, "left": { "style": "thin", "color": { "rgb": "ffffffff" } }, "right": { "style": "thin", "color": { "rgb": "ffffffff" } } },"alignment":{"vertical":"center","horizontal":"center","wrapText":true},"font":{"bold":true,"color":{"rgb":"ffffffff"}},"fill":{"patternType":"solid","fgColor":{"rgb":"2361ae"}}}',this.styleTdNormal='{"alignment":{"vertical":"center","horizontal":"center", "wrapText":true},"font":{"bold":false,"color":{"rgb":"000000"}}}'}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Mo.D),e.Y36(th.V),e.Y36($x.L))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-excel-score-sheet"]],viewQuery:function(t,i){if(1&t&&e.Gf(qL,5),2&t){let a;e.iGM(a=e.CRH())&&(i.TABLE=a.first)}},inputs:{examObj:"examObj",dataScore:"dataScore",dataScoreByClass:"dataScoreByClass",exportQuestionObjs:"exportQuestionObjs",tableType:"tableType",hasEssayQuestion:"hasEssayQuestion",countEssayQuestion:"countEssayQuestion",totalQuestion:"totalQuestion",maxGroupQuestion:"maxGroupQuestion",isSortByMark:"isSortByMark",isSortByTime:"isSortByTime",isSortByName:"isSortByName"},features:[e.qOj,e.TTD],decls:122,vars:280,consts:[["azt-track-service","excel-score-sheet-b3JV23esL",1,"table","table-bordered","hiddenIpt",3,"id","click"],["TABLE",""],[1,"thead-dark"],["colspan","10"],["colspan","3"],["colspan","2"],[1,"border-table","azt-excel-cell"],["class","border-table azt-excel-cell",4,"ngIf"],[4,"ngIf"],["class","border-table azt-excel-cell",4,"ngFor","ngForOf"],["ngFor","",3,"ngForOf"],[4,"ngFor","ngForOf"],[1,"border-table",2,"width","150px"],[1,"border-table",2,"width","100px"],[1,"border-table"],["class","border-table",4,"ngIf"],["class","border-table",4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],["NoSubjectMarkValues",""],["NoGroupPoints",""],["NoGroupPointsFree",""]],template:function(t,i){1&t&&(e.TgZ(0,"table",0,1),e.NdJ("click",function(){return i.exportToExcel()}),e.TgZ(2,"thead",2)(3,"tr")(4,"th",3),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()(),e.TgZ(7,"tr")(8,"th",4),e._uU(9),e.ALo(10,"mytranslate"),e.qZA(),e.TgZ(11,"th",5),e._uU(12),e.ALo(13,"mytranslate"),e.qZA(),e.TgZ(14,"th",4),e._uU(15),e.ALo(16,"mytranslate"),e.qZA(),e.TgZ(17,"th",5),e._uU(18),e.qZA()(),e.TgZ(19,"tr")(20,"th",4),e._uU(21),e.ALo(22,"mytranslate"),e.qZA(),e.TgZ(23,"th",4),e._uU(24),e.ALo(25,"mytranslate"),e.ALo(26,"checkTypeTable"),e.qZA()(),e.TgZ(27,"tr")(28,"th",3),e._uU(29),e.ALo(30,"mytranslate"),e.ALo(31,"formatOnlyDateByUserUnitPipe"),e.qZA()(),e.TgZ(32,"tr"),e._UZ(33,"th"),e.qZA(),e.TgZ(34,"tr")(35,"th",6),e._uU(36),e.ALo(37,"mytranslate"),e.qZA(),e.TgZ(38,"th",6),e._uU(39),e.ALo(40,"mytranslate"),e.qZA(),e.TgZ(41,"th",6),e._uU(42),e.ALo(43,"mytranslate"),e.qZA(),e.TgZ(44,"th",6),e._uU(45),e.ALo(46,"mytranslate"),e.qZA(),e.TgZ(47,"th",6),e._uU(48),e.ALo(49,"mytranslate"),e.qZA(),e.TgZ(50,"th",6),e._uU(51),e.ALo(52,"mytranslate"),e.qZA(),e.TgZ(53,"th",6),e._uU(54),e.ALo(55,"mytranslate"),e.qZA(),e.TgZ(56,"th",6),e._uU(57),e.ALo(58,"mytranslate"),e.qZA(),e.TgZ(59,"th",6),e._uU(60),e.ALo(61,"mytranslate"),e.qZA(),e.TgZ(62,"th",6),e._uU(63),e.ALo(64,"mytranslate"),e.qZA(),e.YNc(65,RL,3,7,"th",7),e.TgZ(66,"th",6),e._uU(67),e.ALo(68,"mytranslate"),e.qZA(),e.YNc(69,HL,3,3,"ng-container",8),e.YNc(70,KL,3,3,"ng-container",8),e.TgZ(71,"th",6),e.ALo(72,"getCurrentColumnIndexForExcel"),e._uU(73),e.ALo(74,"mytranslate"),e.qZA(),e.TgZ(75,"th",6),e.ALo(76,"getCurrentColumnIndexForExcel"),e._uU(77),e.ALo(78,"mytranslate"),e.qZA(),e.TgZ(79,"th",6),e.ALo(80,"getCurrentColumnIndexForExcel"),e._uU(81),e.ALo(82,"mytranslate"),e.qZA(),e.TgZ(83,"th",6),e.ALo(84,"getCurrentColumnIndexForExcel"),e._uU(85),e.ALo(86,"mytranslate"),e.qZA(),e.TgZ(87,"th",6),e.ALo(88,"getCurrentColumnIndexForExcel"),e._uU(89),e.ALo(90,"mytranslate"),e.qZA(),e.TgZ(91,"th",6),e.ALo(92,"getCurrentColumnIndexForExcel"),e._uU(93),e.ALo(94,"mytranslate"),e.qZA(),e.TgZ(95,"th",6),e.ALo(96,"getCurrentColumnIndexForExcel"),e._uU(97),e.ALo(98,"mytranslate"),e.qZA(),e.TgZ(99,"th",6),e.ALo(100,"getCurrentColumnIndexForExcel"),e._uU(101),e.ALo(102,"mytranslate"),e.qZA(),e.YNc(103,GL,4,19,"th",9),e.ALo(104,"createFakeArr"),e.TgZ(105,"th",6),e.ALo(106,"getCurrentColumnIndexForExcel"),e._uU(107),e.ALo(108,"mytranslate"),e.qZA()()(),e.TgZ(109,"tbody"),e.YNc(110,p8,2,1,"ng-template",10),e.YNc(111,L8,2,1,"ng-container",8),e._UZ(112,"tr"),e.TgZ(113,"tr"),e._UZ(114,"td")(115,"td")(116,"td")(117,"td"),e.TgZ(118,"td",5),e._uU(119),e.ALo(120,"mytranslate"),e.qZA(),e._UZ(121,"td"),e.qZA()()()),2&t&&(e.MGl("id","table_",i.tableType,""),e.xp6(5),e.AsE("",e.lcZ(6,119,"lang_testbank_tested_list_subject_exam"),": ",i.examObj.name,""),e.xp6(4),e.hij("",e.lcZ(10,121,"lang_testbank_tested_list_time_exam"),":"),e.xp6(3),e.AsE("",i.examObj.minutes," ",e.lcZ(13,123,"lang_testbank_tested_list_minute"),""),e.xp6(3),e.hij("",e.lcZ(16,125,"lang_testbank_tested_list_total_question"),":"),e.xp6(3),e.Oqu(2==i.examObj.mixQuestion?i.examObj.limitMixQuestion:i.examObj.countQuestion),e.xp6(3),e.hij("",e.lcZ(22,127,"lang_auto_kieu_export"),":"),e.xp6(3),e.Oqu(e.lcZ(25,129,e.lcZ(26,131,i.tableType))),e.xp6(5),e.AsE("",e.lcZ(30,133,"lang_testbank_tested_list_time_export"),": ",e.lcZ(31,135,i.currentDate),""),e.xp6(6),e.uIk("excelWidth",25)("excelRow",5)("excelColumn",0)("excelStyle",i.styleThNormal),e.xp6(1),e.Oqu(e.lcZ(37,137,"lang_first_and_last_name")),e.xp6(2),e.uIk("excelWidth",40)("excelRow",5)("excelColumn",1)("excelStyle",i.styleThNormal),e.xp6(1),e.Oqu(e.lcZ(40,139,"lang_azt_class_group")),e.xp6(2),e.uIk("excelWidth",20)("excelRow",5)("excelColumn",2)("excelStyle",i.styleThNormal),e.xp6(1),e.Oqu(e.lcZ(43,141,"lang_testbank_tested_list_class")),e.xp6(2),e.uIk("excelWidth",15)("excelRow",5)("excelColumn",3)("excelStyle",i.styleThNormal),e.xp6(1),e.Oqu(e.lcZ(46,143,"lang_birthday")),e.xp6(2),e.uIk("excelWidth",10)("excelRow",5)("excelColumn",4)("excelStyle",i.styleThNormal),e.xp6(1),e.Oqu(e.lcZ(49,145,"lang_gender")),e.xp6(2),e.uIk("excelWidth",15)("excelRow",5)("excelColumn",5)("excelStyle",i.styleThNormal),e.xp6(1),e.Oqu(e.lcZ(52,147,"lang_auto_so_bao_danh")),e.xp6(2),e.uIk("excelWidth",10)("excelRow",5)("excelColumn",6)("excelStyle",i.styleThNormal),e.xp6(1),e.Oqu(e.lcZ(55,149,"lang_auto_ma_de_thi")),e.xp6(2),e.uIk("excelWidth",15)("excelRow",5)("excelColumn",7)("excelStyle",i.styleThNormal),e.xp6(1),e.Oqu(e.lcZ(58,151,"lang_testbank_tested_list_number_success")),e.xp6(2),e.uIk("excelWidth",15)("excelRow",5)("excelColumn",8)("excelStyle",i.styleThNormal),e.xp6(1),e.Oqu(e.lcZ(61,153,"lang_testbank_tested_list_error")),e.xp6(2),e.uIk("excelWidth",15)("excelRow",5)("excelColumn",9)("excelStyle",i.styleThNormal),e.xp6(1),e.Oqu(e.lcZ(64,155,"lang_testbank_tested_list_test_score")),e.xp6(2),e.Q6J("ngIf",i.hasEssayQuestion),e.xp6(1),e.uIk("excelWidth",15)("excelRow",5)("excelColumn",i.hasEssayQuestion?11:10)("excelStyle",i.styleThNormal),e.xp6(1),e.Oqu(e.lcZ(68,157,"lang_testbank_tested_list_total_point")),e.xp6(2),e.Q6J("ngIf",i.examObj.subjectMarks),e.xp6(1),e.Q6J("ngIf",i.maxGroupQuestion>0),e.xp6(1),e.uIk("excelWidth",10)("excelRow",5)("excelColumn",e.G7q(72,159,e.l5B(235,Au,i.maxGroupQuestion,i.hasEssayQuestion,i.examObj,i.totalQuestion)))("excelStyle",i.styleThNormal),e.xp6(2),e.Oqu(e.lcZ(74,165,"lang_testbank_tested_tested_time_exams")),e.xp6(2),e.uIk("excelWidth",10)("excelRow",5)("excelColumn",e.G7q(76,167,e.l5B(240,Au,i.maxGroupQuestion,i.hasEssayQuestion,i.examObj,i.totalQuestion))+1)("excelStyle",i.styleThNormal),e.xp6(2),e.Oqu(e.lcZ(78,173,"lang_testbank_tested_list_number_exams")),e.xp6(2),e.uIk("excelWidth",20)("excelRow",5)("excelColumn",e.G7q(80,175,e.l5B(245,Au,i.maxGroupQuestion,i.hasEssayQuestion,i.examObj,i.totalQuestion))+2)("excelStyle",i.styleThNormal),e.xp6(2),e.Oqu(e.lcZ(82,181,"lang_testbank_tested_list_time_start")),e.xp6(2),e.uIk("excelWidth",20)("excelRow",5)("excelColumn",e.G7q(84,183,e.l5B(250,Au,i.maxGroupQuestion,i.hasEssayQuestion,i.examObj,i.totalQuestion))+3)("excelStyle",i.styleThNormal),e.xp6(2),e.Oqu(e.lcZ(86,189,"lang_testbank_tested_list_time_end")),e.xp6(2),e.uIk("excelWidth",15)("excelRow",5)("excelColumn",e.G7q(88,191,e.l5B(255,Au,i.maxGroupQuestion,i.hasEssayQuestion,i.examObj,i.totalQuestion))+4)("excelStyle",i.styleThNormal),e.xp6(2),e.Oqu(e.lcZ(90,197,"lang_testbank_tested_list_time_homework")),e.xp6(2),e.uIk("excelWidth",15)("excelRow",5)("excelColumn",e.G7q(92,199,e.l5B(260,Au,i.maxGroupQuestion,i.hasEssayQuestion,i.examObj,i.totalQuestion))+5)("excelStyle",i.styleThNormal),e.xp6(2),e.Oqu(e.lcZ(94,205,"lang_testbank_tested_list_time_homework_only_minutes")),e.xp6(2),e.uIk("excelWidth",15)("excelRow",5)("excelColumn",e.G7q(96,207,e.l5B(265,Au,i.maxGroupQuestion,i.hasEssayQuestion,i.examObj,i.totalQuestion))+6)("excelStyle",i.styleThNormal),e.xp6(2),e.hij(" ",e.lcZ(98,213,"lang_testbank_tested_list_exit_full_screen")," "),e.xp6(2),e.uIk("excelWidth",15)("excelRow",5)("excelColumn",e.G7q(100,215,e.l5B(270,Au,i.maxGroupQuestion,i.hasEssayQuestion,i.examObj,i.totalQuestion))+7)("excelStyle",i.styleThNormal),e.xp6(2),e.hij(" ",e.lcZ(102,221,"lang_testbank_tested_list_exit_brower")," "),e.xp6(2),e.Q6J("ngForOf",e.lcZ(104,223,i.totalQuestion)),e.xp6(2),e.uIk("excelWidth",50)("excelRow",5)("excelColumn",e.G7q(106,225,e.l5B(275,B8,i.maxGroupQuestion,i.hasEssayQuestion,i.examObj,i.totalQuestion))+7)("excelStyle",i.styleThNormal),e.xp6(2),e.hij(" ",e.lcZ(108,231,"lang_testbank_tested_list_additional_information")," "),e.xp6(3),e.Q6J("ngForOf",i.dataScoreByClass),e.xp6(1),e.Q6J("ngIf",i.dataScore.length),e.xp6(8),e.hij("",e.lcZ(120,233,"lang_testbank_tested_list_teacher_confirmed"),":"))},dependencies:[F.sg,F.O5,F.JJ,ye.JV,ye.gw,ye.Aw,ye.YK,ye.a5,FL,NL,ZL,DL,UL,jL],encapsulation:2}),n})();const Q8=["fileInput"],F8=["fileInputMobile"];function N8(n,o){if(1&n&&(e.TgZ(0,"div",3),e._UZ(1,"azt-loading-effect",4),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("currentStatusObj",t.statusObj)}}function Z8(n,o){1&n&&(e.TgZ(0,"div",19)(1,"p",20),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&n&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"lang_auto_dang_xu_ly_file_dau_vao_vui_long_doi_trong_giay_lat")))}function D8(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"a",30),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.viewExamError())}),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()}if(2&n){const t=e.oxw(3);e.xp6(1),e.Oqu(e.lcZ(2,1,t.isShowExamError?"lang_azt_an_bai_cham_loi":"lang_azt_hien_bai_cham_loi"))}}const U8=function(n){return{"width.%":n}};function j8(n,o){if(1&n&&(e.TgZ(0,"div",31)(1,"div",32)(2,"p",33),e._uU(3),e.ALo(4,"mytranslate"),e.TgZ(5,"span"),e._uU(6),e.qZA()(),e.TgZ(7,"div",34),e._UZ(8,"div",35),e.qZA()()()),2&n){const t=e.oxw(3);e.xp6(3),e.hij("",e.lcZ(4,4,"lang_testbank_export_pdf_by_user_processing")," "),e.xp6(3),e.AsE("",t.countProcessingExam,"/",t.listExamProcesing.length,""),e.xp6(2),e.Q6J("ngStyle",e.VKq(6,U8,t.countProcessingExam/t.listExamProcesing.length*100))}}function q8(n,o){if(1&n&&(e.TgZ(0,"div",21)(1,"div")(2,"p",22),e._uU(3),e.ALo(4,"mytranslate"),e.qZA(),e.TgZ(5,"p",23),e._uU(6),e.ALo(7,"mytranslate"),e.TgZ(8,"span",24),e._uU(9),e.qZA()(),e.TgZ(10,"div",25)(11,"p",26),e._uU(12),e.ALo(13,"mytranslate"),e.TgZ(14,"span",27),e._uU(15),e.qZA()(),e.YNc(16,D8,3,3,"a",28),e.qZA()(),e.YNc(17,j8,9,8,"div",29),e.qZA()),2&n){const t=e.oxw(2);e.xp6(3),e.AsE("",e.lcZ(4,8,"lang_azt_tong_so_bai_thi"),": ",t.listExamProcesing.length,""),e.xp6(3),e.hij("",e.lcZ(7,10,"lang_auto_cham_thanh_cong"),": "),e.xp6(3),e.hij(" ",t.getTotalScanSuccses(),""),e.xp6(3),e.hij(" ",e.lcZ(13,12,"lang_auto_cham_khong_thanh_cong"),": "),e.xp6(3),e.Oqu(t.getTotalScanError()),e.xp6(1),e.Q6J("ngIf",t.countProcessingExam==t.listExamProcesing.length),e.xp6(1),e.Q6J("ngIf",t.countProcessingExam<t.listExamProcesing.length)}}function R8(n,o){1&n&&(e.TgZ(0,"div",50)(1,"p"),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&n&&(e.oxw(),e.xp6(2),e.hij("",e.lcZ(3,1,"lang_testbank_export_pdf_by_user_processing"),"..."))}function z8(n,o){if(1&n&&(e.TgZ(0,"p",51),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit,i=e.oxw(3);e.xp6(1),e.hij(" ",i.getMessageError(t)," ")}}function H8(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",52),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,r=e.oxw(3);return e.KtG(r.editExamScan(a))}),e._uU(1),e.ALo(2,"mytranslate"),e.O4$(),e.TgZ(3,"svg",53),e._UZ(4,"path",54)(5,"path",55)(6,"path",56),e.qZA()()}if(2&n){const t=e.oxw().$implicit;e.Q6J("disabled",1==t.processingStatus),e.xp6(1),e.hij(" ",e.lcZ(2,2,"lang_auto_sua")," ")}}function J8(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",57),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,r=e.oxw(3);return e.KtG(r.showChooseCorners(a))}),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()}if(2&n){const t=e.oxw().$implicit;e.Q6J("disabled",1==t.processingStatus),e.xp6(1),e.Oqu(e.lcZ(2,2,"lang_azt_Chon_4_goc_den"))}}function K8(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",38)(1,"div",39)(2,"img",40),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw(3);return e.KtG(s.onShowImage(r.imageUrl))}),e.qZA(),e.YNc(3,R8,4,3,"div",41),e.YNc(4,z8,2,1,"p",42),e.TgZ(5,"div",43),e.YNc(6,H8,7,4,"button",44),e.YNc(7,J8,3,4,"button",45),e.TgZ(8,"button",46),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw(3);return e.KtG(s.sendExamScanError(r))}),e.ALo(9,"mytranslate"),e.O4$(),e.TgZ(10,"svg",47),e._UZ(11,"path",48)(12,"path",49),e.qZA()()()()()}if(2&n){const t=o.$implicit;e.Q6J("hidden",1==t.success),e.xp6(2),e.Q6J("src",t.imageUrl,e.LSH),e.xp6(1),e.Q6J("ngIf",1==t.processingStatus||3==t.processingStatus),e.xp6(1),e.Q6J("ngIf",t.errorMessage),e.xp6(2),e.Q6J("ngIf",2==t.errorCode),e.xp6(1),e.Q6J("ngIf",1==t.errorCode),e.xp6(1),e.s9C("matTooltip",e.lcZ(9,8,"lang_cms_error_management_title")),e.Q6J("disabled",1==t.processingStatus)}}function G8(n,o){if(1&n&&(e.TgZ(0,"div",36),e.YNc(1,K8,13,10,"div",37),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.listExamProcesing)}}function Y8(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",58)(1,"button",59),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.scanExamDone.emit(!0))}),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()}2&n&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"lang_azt_hoan_tat_cham_file_scan")))}function $8(n,o){if(1&n&&(e.TgZ(0,"div",78),e._UZ(1,"input",79),e.TgZ(2,"label",80),e._uU(3),e.qZA()()),2&n){const t=o.$implicit,i=e.oxw(4);e.xp6(1),e.MGl("id","selectedClassroom-",t.classId,""),e.Q6J("value",t.classId)("formControl",i.selectedClassroom),e.xp6(1),e.MGl("for","selectedClassroom-",t.classId,""),e.xp6(1),e.Oqu(t.className)}}function V8(n,o){if(1&n&&(e.TgZ(0,"div")(1,"p",68),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.TgZ(4,"p",69),e._uU(5),e.ALo(6,"mytranslate"),e.ALo(7,"mytranslate"),e.qZA(),e.TgZ(8,"div",73),e.YNc(9,$8,4,5,"div",74),e.TgZ(10,"div",75),e._UZ(11,"input",76),e.TgZ(12,"label",77),e._uU(13),e.ALo(14,"mytranslate"),e.qZA()()()()),2&n){const t=e.oxw(3);e.xp6(2),e.Oqu(e.lcZ(3,7,"lang_student_classroom_list_utils_create_class_new_course_choose_class")),e.xp6(3),e.AsE("",e.lcZ(6,9,"lang_homework_mark_exercise_utils_note"),": ",e.lcZ(7,11,"lang_azt_chon_lop_neu_chi_scan_nhung_bai_thi_thuoc_lop_da_chon"),""),e.xp6(4),e.Q6J("ngForOf",t.listClassroom.classes),e.xp6(2),e.Q6J("value",0)("formControl",t.selectedClassroom),e.xp6(2),e.Oqu(e.lcZ(14,13,"lang_auto_tat_ca"))}}function W8(n,o){if(1&n&&(e.TgZ(0,"div",64),e._UZ(1,"input",81),e.TgZ(2,"label",82),e._uU(3),e.ALo(4,"mytranslate"),e.qZA()()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("checked",t.selectedClassroom.getRawValue()>0)("formControl",t.selectedRequireStudentCode),e.uIk("disabled",t.selectedClassroom.getRawValue()>0||null),e.xp6(2),e.Oqu(e.lcZ(4,4,"lang_azt_khong_scan_bai_thi_hs_tu_do"))}}function X8(n,o){1&n&&(e.O4$(),e.TgZ(0,"svg",85),e._UZ(1,"path",86),e.qZA())}function eB(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",83),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw(3);return e.KtG(s.selectTemplate(r))}),e._uU(1),e.ALo(2,"mytranslate"),e.YNc(3,X8,2,0,"svg",84),e.qZA()}if(2&n){const t=o.$implicit,i=e.oxw(3);e.Q6J("ngClass",t.type==(null==i.templateSelect?null:i.templateSelect.type)?"class-active":""),e.xp6(1),e.AsE(" ",e.lcZ(2,4,"lang_auto_mau"),": ",t.shortName," "),e.xp6(2),e.Q6J("ngIf",t.type==(null==i.templateSelect?null:i.templateSelect.type))}}function tB(n,o){if(1&n&&(e.TgZ(0,"div",87)(1,"div",88),e._UZ(2,"img",89),e.qZA()()),2&n){const t=e.oxw(3);e.xp6(2),e.Q6J("src",t.templateSelect.imageUrl,e.LSH)}}function nB(n,o){if(1&n&&(e.TgZ(0,"div",60)(1,"div",21),e.YNc(2,V8,15,15,"div",61),e.TgZ(3,"p",62),e._uU(4),e.ALo(5,"mytranslate"),e.qZA(),e.YNc(6,W8,5,6,"div",63),e.TgZ(7,"div",64),e._UZ(8,"input",65),e.TgZ(9,"label",66),e._uU(10),e.ALo(11,"mytranslate"),e.qZA()()(),e.TgZ(12,"div",67)(13,"p",68),e._uU(14),e.ALo(15,"mytranslate"),e.qZA(),e.TgZ(16,"p",69),e._uU(17),e.ALo(18,"mytranslate"),e.ALo(19,"mytranslate"),e.qZA()(),e.TgZ(20,"div",70),e.YNc(21,eB,4,6,"div",71),e.qZA(),e.YNc(22,tB,3,1,"div",72),e.qZA()),2&n){const t=e.oxw(2);e.xp6(2),e.Q6J("ngIf",t.listClassroom&&t.listClassroom.classes.length>0),e.xp6(2),e.Oqu(e.lcZ(5,10,"lang_azt_cau_hinh_scan_bai_thi")),e.xp6(2),e.Q6J("ngIf",t.listClassroom&&t.listClassroom.classes.length>0),e.xp6(2),e.Q6J("formControl",t.selectedDuplicateCode),e.xp6(2),e.Oqu(e.lcZ(11,12,"lang_azt_khong_ghi_de_bai_cham")),e.xp6(4),e.Oqu(e.lcZ(15,14,"lang_testbank_create_wibsite_Sampling")),e.xp6(3),e.AsE("",e.lcZ(18,16,"lang_homework_mark_exercise_utils_note"),": ",e.lcZ(19,18,"lang_azt_chon_ten_mau_tuong_ung_voi_so_duoc_in_duoi_cuoi_to_phieu_thi"),""),e.xp6(4),e.Q6J("ngForOf",t.listScanTemplate),e.xp6(1),e.Q6J("ngIf",t.templateSelect)}}function iB(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",94)(1,"button",95),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.selectFileClick())}),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()}2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"lang_auto_chon_thu_muc_file_scan")," "))}const oB=function(n){return{"pl-0":n}};function aB(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",90),e.YNc(1,iB,4,3,"div",91),e.TgZ(2,"div",92)(3,"button",93),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.selectFileClick(!0))}),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()()()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",!t.isMobile),e.xp6(1),e.Q6J("ngClass",e.VKq(5,oB,!t.isMobile)),e.xp6(2),e.hij(" ",e.lcZ(5,3,"lang_auto_chon_thu_muc_file_scan_mobile")," ")}}function rB(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"form",5)(1,"input",6,7),e.NdJ("change",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.selectFileDirectory(a))}),e.qZA(),e.TgZ(3,"input",8,9),e.NdJ("change",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.selectFile(a))}),e.qZA()(),e.TgZ(5,"div",10)(6,"div",11),e.YNc(7,Z8,4,3,"div",12),e.YNc(8,q8,18,14,"div",13),e.YNc(9,G8,2,1,"div",14),e.YNc(10,Y8,4,3,"div",15),e.YNc(11,nB,23,20,"div",16),e.TgZ(12,"div",17),e.YNc(13,aB,6,7,"div",18),e.qZA()()()}if(2&n){const t=e.oxw();e.Q6J("hidden",!0),e.xp6(7),e.Q6J("ngIf",t.isUpload),e.xp6(1),e.Q6J("ngIf",!t.firstTimeScan),e.xp6(1),e.Q6J("ngIf",t.countProcessingExam==t.listExamProcesing.length&&t.isShowExamError),e.xp6(1),e.Q6J("ngIf",t.countProcessingExam==t.listExamProcesing.length&&!t.firstTimeScan),e.xp6(1),e.Q6J("ngIf",t.firstTimeScan),e.xp6(2),e.Q6J("ngIf",t.firstTimeScan&&t.templateSelect)}}const sB=["myCanvas"],lB=["myImage"];function cB(n,o){1&n&&(e.TgZ(0,"span",14),e._UZ(1,"azt-loading-ui"),e.qZA())}const Vx=".scan-exam-error[_ngcontent-%COMP%]{border-radius:5px;min-height:80px;background:#f6f7f8;display:flex;justify-content:center;align-items:center}.scan-exam-error[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px;color:red}.box-event[_ngcontent-%COMP%]{bottom:0;display:flex;flex-direction:column;justify-content:space-between;height:100%;align-items:center;position:absolute}.box-event[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:90%;margin-bottom:2px}.processing-box[_ngcontent-%COMP%]{position:absolute;top:0;height:100%;color:#ff0;font-size:13px;left:0;width:100%;display:flex;justify-content:center;align-items:center;background:rgba(211,211,211,.5803921569)}.box-progress-bar[_ngcontent-%COMP%]{height:200px;display:flex;align-items:center}.progress-bar[_ngcontent-%COMP%]{height:100%}.progress-bar-fill[_ngcontent-%COMP%]{width:100%;height:25px;background-color:#eee;border-radius:5px}.done-processing[_ngcontent-%COMP%]{position:absolute;top:5%;left:93%;transform:translate(-50%,-50%);display:flex;justify-content:center;align-items:center;width:29px;height:28px;background:rgba(170,170,170,.8196078431);border-radius:5px}.animated-background[_ngcontent-%COMP%]{animation-name:_ngcontent-%COMP%_placeHolderShimmer;background:#f6f7f8;background-image:linear-gradient(to right,#f6f7f8 0%,#edeef1 60%,#f6f7f8 40%,#f6f7f8 100%);background-repeat:no-repeat;animation-duration:2s;animation-fill-mode:forwards;animation-iteration-count:infinite;animation-timing-function:linear;display:flex;justify-content:center;align-items:center;border-radius:5px}@keyframes _ngcontent-%COMP%_placeHolderShimmer{0%{background-position:-468px 0}to{background-position:468px 0}}.image-template[_ngcontent-%COMP%]{border:1px solid lightgrey;border-radius:4px;padding:10px;max-height:380px}.class-active[_ngcontent-%COMP%]{background:#eee;border-radius:5px}.info-exam-scan[_ngcontent-%COMP%]{border-radius:5px;min-height:80px}.form-check-input[_ngcontent-%COMP%]{width:14px;height:14px}";function uB(n,o){if(1&n&&e._UZ(0,"azt-loading-effect",14),2&n){const t=e.oxw();e.Q6J("currentStatusObj",t.statusObj)}}function dB(n,o){if(1&n&&(e.TgZ(0,"div",36),e._UZ(1,"input",37),e.TgZ(2,"label",38),e._uU(3),e.qZA()()),2&n){const t=o.$implicit,i=e.oxw(2);e.xp6(1),e.MGl("id","examCode-",t,""),e.Q6J("value",t),e.xp6(1),e.MGl("for","examCode-",t,""),e.xp6(1),e.Oqu(i.formatCode(t))}}function mB(n,o){1&n&&(e.TgZ(0,"p",20),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij("*",e.lcZ(2,1,"lang_azt_chon_so_bao_danh_neu_bai_cham_sai_so_bao_danh"),""))}function pB(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"azt-search-box",39),e.NdJ("onSearch",function(a){e.CHM(t);const r=e.oxw(2);return e.KtG(r.onSearchStudentCodeBox(a.searchObj))}),e.ALo(1,"mytranslate"),e.qZA()}2&n&&e.Q6J("isServerSearch",!1)("placeholder",e.lcZ(1,2,"lang_azt_tim_ten_hoac_sbd_cua_hoc_sinh"))}function hB(n,o){if(1&n&&(e.TgZ(0,"button",40),e.O4$(),e.TgZ(1,"svg",41),e._UZ(2,"polygon",42),e.qZA(),e.kcU(),e.TgZ(3,"span",43),e._uU(4),e.ALo(5,"mytranslate"),e.qZA(),e.O4$(),e.TgZ(6,"svg",44),e._UZ(7,"path",45),e.qZA()()),2&n){const t=e.oxw(2),i=e.MAs(4);e.Q6J("matMenuTriggerFor",i),e.xp6(4),e.Oqu(e.lcZ(5,2,t.titleButtonFilterClass))}}function AB(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij("(",t.studentCode,")")}}function _B(n,o){if(1&n&&(e.TgZ(0,"div",46),e.ALo(1,"mytranslate"),e._UZ(2,"input",47),e.TgZ(3,"label",38),e._uU(4),e.YNc(5,AB,2,1,"span",48),e.qZA()()),2&n){const t=o.$implicit,i=o.index,a=e.oxw(2);e.cQ8("matTooltip","",t.studentName," - ",e.lcZ(1,12,t.studentCode?"lang_testbank_offline_student_identification":"lang_auto_khong_co_so_bao_danh")," ",a.formatStudentCode(t.studentCode),""),e.Q6J("hidden",a.classFilterId!=t.classroomId&&0!=a.classFilterId),e.xp6(2),e.hYB("id","studentCode-",t.studentCode,"-",i,""),e.Q6J("value",t.studentCode),e.uIk("disabled",!t.studentCode||null),e.xp6(1),e.hYB("for","studentCode-",t.studentCode,"-",i,""),e.xp6(1),e.hij("",t.studentName," "),e.xp6(1),e.Q6J("ngIf",t.studentCode)}}function fB(n,o){1&n&&(e.TgZ(0,"span",49),e._UZ(1,"azt-loading-ui"),e.qZA())}const gB=function(){return["studentName","studentCode"]};function xB(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",15)(1,"div",16)(2,"div",17)(3,"form",18)(4,"p",19),e._uU(5),e.ALo(6,"mytranslate"),e.qZA(),e.TgZ(7,"p",20),e._uU(8),e.ALo(9,"mytranslate"),e.qZA(),e.TgZ(10,"div",21),e.YNc(11,dB,4,4,"div",22),e.qZA(),e.TgZ(12,"p",23),e._uU(13),e.ALo(14,"mytranslate"),e.qZA(),e.YNc(15,mB,3,3,"p",24),e.TgZ(16,"div",25),e.YNc(17,pB,2,4,"azt-search-box",26),e.YNc(18,hB,8,4,"button",27),e.qZA(),e.TgZ(19,"div",21),e.YNc(20,_B,6,14,"div",28),e.ALo(21,"appFilter"),e.TgZ(22,"div",29),e._UZ(23,"input",30),e.TgZ(24,"label",31),e._uU(25),e.ALo(26,"mytranslate"),e.qZA()()()()()(),e.TgZ(27,"div",32)(28,"button",33),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onNoClick(!1))}),e._uU(29),e.ALo(30,"mytranslate"),e.qZA(),e.TgZ(31,"button",34),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.saveChange())}),e.YNc(32,fB,2,0,"span",35),e._uU(33),e.ALo(34,"mytranslate"),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(3),e.Q6J("formGroup",t.form),e.xp6(2),e.AsE("",e.lcZ(6,17,"lang_azt_ma_da_cua_phieu_scan"),": ",t.data.exam.examCode,""),e.xp6(3),e.hij("*",e.lcZ(9,19,"lang_azt_chon_ma_de_neu_bai_cham_sai_ma_de"),""),e.xp6(3),e.Q6J("ngForOf",t.data.examCodes),e.xp6(2),e.AsE("",e.lcZ(14,21,"lang_azt_so_bao_danh_nhan_duoc_tu_phieu_scan"),": ",t.data.exam.studentCode,""),e.xp6(2),e.Q6J("ngIf",t.data.studentCodes.length>0),e.xp6(2),e.Q6J("ngIf",t.data.studentCodes.length>0),e.xp6(1),e.Q6J("ngIf",t.data.classes&&t.data.classes.length>0),e.xp6(2),e.Q6J("ngForOf",e.Dn7(21,23,t.data.studentCodes,t.searchContentObjStudentCode.searchContent,e.DdM(33,gB))),e.xp6(3),e.Q6J("value",0),e.xp6(2),e.Oqu(e.lcZ(26,27,"lang_testbank_export_pdf_free")),e.xp6(4),e.hij(" ",e.lcZ(30,29,"lang_cms_common_close_btn")," "),e.xp6(2),e.Q6J("disabled",t.statusObj.loading),e.xp6(1),e.Q6J("ngIf",t.statusObj.loading),e.xp6(1),e.hij(" ",e.lcZ(34,31,"lang_button_save")," ")}}function bB(n,o){1&n&&(e.O4$(),e.TgZ(0,"svg",50),e._UZ(1,"path",51),e.qZA())}function vB(n,o){1&n&&(e.O4$(),e.TgZ(0,"svg",50),e._UZ(1,"path",51),e.qZA())}function wB(n,o){if(1&n){const t=e.EpF();e.O4$(),e.kcU(),e.TgZ(0,"li",52),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.filterClass(r))}),e.TgZ(1,"button",7),e.O4$(),e.TgZ(2,"svg",8),e._UZ(3,"path",9)(4,"path",10)(5,"path",11),e.qZA(),e._uU(6),e.YNc(7,vB,2,0,"svg",12),e.qZA()()}if(2&n){const t=o.$implicit,i=e.oxw();e.xp6(6),e.hij(" ",t.className," "),e.xp6(1),e.Q6J("ngIf",i.classFilterId==t.classId)}}let yB=(()=>{class n extends xe.Q{selectFileClick(t){this.hasExamOffline?this.permissionService.hasMarkPointPermission("exam",this.examObj)?this.loadedJs?this.fileInput&&(this.fileInputMobile&&t?(this.fileInputMobile.nativeElement.value=null,this.fileInputMobile.nativeElement.click(),this.firstTimeScan=!0):(this.fileInput.nativeElement.value=null,this.fileInput.nativeElement.click(),this.firstTimeScan=!0)):this.loadingFileJs().then(()=>{this.loadingFileJS=!1,this.fileInput&&(this.fileInputMobile&&t?(this.fileInputMobile.nativeElement.value=null,this.fileInputMobile.nativeElement.click(),this.firstTimeScan=!0):(this.fileInput.nativeElement.value=null,this.fileInput.nativeElement.click(),this.firstTimeScan=!0))}).catch(i=>{this.loadingFileJS=!1,this.showErrorSnack(this.commonService.myTranslateInstant(i.message)??"")}):this.showErrorSnack("lang_auto_ban_khong_co_quyen_thuc_thi_chuc_nang_nay"):this.showErrorSnack(this.examOfflineMessage&&""!=this.examOfflineMessage?this.examOfflineMessage:"lang_auto_ban_khong_co_quyen_thuc_thi_chuc_nang_nay")}loadScriptHandleImage(){var t=this;this.commonService.loadScriptPromises([{source:this.cdnService.registerJsCdn("azota_scan_answer_sheet_js"),name:"azota_scan_answer_sheet_js"}]).then(()=>{var i=this.userService.getUserObj();window.azotaScanAnswerSheet.processor(i.rememberToken,"https://"+Z.N.base_embed_link,this.examObj.hashId,i.id).then(function(){var a=(0,Yi.Z)(function*(r){t.processor=r,t.listScanTemplate=yield t.processor.templates(),t.listClassroom=yield t.processor.getStatistic(),t.stopStatusObj()});return function(r){return a.apply(this,arguments)}}())}).catch(i=>{this.commonService.myTranslateInstant("lang_auto_tai_thu_vien_that_bao_vui_long_load_lai_trang_de_thu_lai"),this.stopStatusObj()})}getFileLocal(){var t=this;return(0,Yi.Z)(function*(){try{window.scroll({top:0,behavior:"smooth"});try{var i={requireMatchStudentCode:t.selectedRequireStudentCode.getRawValue(),skipSent:t.selectedDuplicateCode.getRawValue(),classroomId:t.selectedClassroom.getRawValue()};yield t.processor.setConfig(i)}catch(l){console.log(l)}t.scanExamDone.emit(!1);for(const l of t.listExamProcesing){var s,a=yield l.file.arrayBuffer(),r=new Uint8Array(a);try{s=yield t.processor.scanAndUploadImage(r,l.file.type,null,t.templateSelect?.type??0,null,null)}catch{s={errorCode:1,errorMessage:"Kh\xf4ng ch\u1ea5m \u0111\u01b0\u1ee3c \u1ea3nh",success:!1}}t.handleResultScan(s,l,a),t.countProcessingExam++}}catch(l){console.log(l),t.showErrorSnack("lang_cms_error_missing_file")}})()}getMessageError(t){return(1==t.errorCode?this.commonService.myTranslateInstant("lang_azt_khong_nhan_duoc_4_goc_den"):"azt_lang_core_code_exam"==t.errorMessage?this.commonService.myTranslateInstant("lang_auto_ma_de")+` ${t.examCode} `+this.commonService.myTranslateInstant("lang_azt_khong_ton_tai"):"lang_core_exam_exceed_max_essay_mark"==t.errorMessage?this.commonService.myTranslateInstant("lang_azt_diem_tu_luan_bai_thi_lon_hon_diem_trong_cau_hinh")+` ${t.essayPoints??0}`:"azt_lang_core_student_exam_not_match"==t.errorMessage?this.commonService.myTranslateInstant("lang_auto_so_bao_danh")+` ${t.studentCode??0} `+this.commonService.myTranslateInstant("lang_azt_khong_ton_tai"):"azt_lang_core_answer_sheet_was_sent"==t.errorMessage?this.commonService.myTranslateInstant("lang_azt_da_co_so_bao_danh")+`${t.studentCode??0}`+this.commonService.myTranslateInstant("lang_azt_va_ma_de")+`${t.examCode??0}`+this.commonService.myTranslateInstant("lang_azt_vua_duoc_cham_truoc_do"):this.commonService.myTranslateInstant(t.errorMessage))??""}viewExamError(){this.isShowExamError=!this.isShowExamError}getTotalScanSuccses(){return this.listExamProcesing.filter(t=>t.success).length.toString()+"/"+this.listExamProcesing.length}getTotalScanError(){return this.listExamProcesing.filter(t=>0==t.success).length.toString()+"/"+this.listExamProcesing.length}showChooseCorners(t){var i=this;this.sAztDialogService.open(CB,{data:t,restoreFocus:!1}).afterClosed().subscribe(function(){var r=(0,Yi.Z)(function*(s){if(s){t.processingStatus=1,t.corners=s;var c,l=yield t.file.arrayBuffer();try{var u=new Uint8Array(l);c=yield i.processor.scanAndUploadImage(u,t.file.type,null,i.templateSelect?.type??0,s,null),i.showSuccessSnack("lang_azt_da_xu_ly_xong_bon_goc_den")}catch{c={errorCode:1,errorMessage:"Kh\xf4ng ch\u1ea5m \u0111\u01b0\u1ee3c \u1ea3nh",success:!1},i.showErrorSnack("lang_azt_xu_ly_bon_goc_den_khong_thanh_cong")}yield i.handleResultScan(c,t,l)}});return function(s){return r.apply(this,arguments)}}())}editExamScan(t){var i=this;let a={examCodes:this.processor.getSubExamCodes()??[],studentCodes:this.processor.getAvailableStudentCodes(),exam:t,classes:0!=this.selectedClassroom.getRawValue()?void 0:this.listClassroom?.classes};this.sAztDialogService.open(TB,{data:a,restoreFocus:!1,width:"700px"}).afterClosed().subscribe(function(){var s=(0,Yi.Z)(function*(l){if(l){t.processingStatus=1;var u,c=yield t.file.arrayBuffer();try{var m=new Uint8Array(c);u=yield i.processor.scanAndUploadImage(m,t.file.type,null,i.templateSelect?.type??0,null,null,l)}catch{u={errorCode:1,errorMessage:"'khong_cham_duoc_anh'",success:!1}}yield i.handleResultScan(u,t,c)}});return function(l){return s.apply(this,arguments)}}())}onShowImage(t){this.sAztDialogService.open(al.q,{maxWidth:"100vw",maxHeight:"100vh",height:"100%",width:"100%",data:{fileOption:{name:"",mimes:"image/jpeg",url:t,index:0}},restoreFocus:!1})}loadingFileJs(){var t=this;return this.loadingFileJS=!0,new Promise((i,a)=>{var r=[{source:this.cdnService.registerJsCdn("min.imgsdk"),name:"min.imgsdk"},{source:this.cdnService.registerJsCdn("min.imgsdk_loader"),name:"min.imgsdk_loader"}];this.commonService.loadScriptPromises(r).then((0,Yi.Z)(function*(){setTimeout(()=>{window.hasOwnProperty("imgsdk")?typeof imgsdk<"u"&&imgsdk?i(!0):a(new Error("lang_core_lib_not_load")):(t.countRetryLoadJS++,t.countRetryLoadJS>3?a(new Error("lang_core_lib_not_load")):i(t.loadingFileJs()))},1e3)})).catch(s=>{a(new Error("lang_core_lib_not_load"))})})}sendExamScanError(t){var i=this;return(0,Yi.Z)(function*(){t.processingStatus=3;try{var a=yield t.file.arrayBuffer(),r=new Uint8Array(a),s=t.file.name.split(".").pop();yield i.processor.scanAndSendError(r,s,null,i.templateSelect?.type??0,t.corners,null),i.showSuccessSnack("lang_azt_bao_loi_thanh_cong")}catch{i.showErrorSnack("lang_auto_bao_loi_khong_thanh_cong")}t.processingStatus=2})()}selectTemplate(t){this.templateSelect=t,this.scrollToBottom()}scrollToBottom(){var t=document.getElementById("box-botton");null!=t&&window.scrollTo({top:t.offsetTop,behavior:"smooth"})}ngOnInit(){this.initStatusObj(),this.loadScriptHandleImage(),this.isMobile=this.commonService.isMobileOrTable(),super.ngOnInit()}ngOnDestroy(){super.ngOnDestroy()}constructor(t,i,a,r){var s;super(),s=this,this.userService=t,this.cdnService=i,this.permissionService=a,this.sAztDialogService=r,this.loadedJs=!1,this.hasExamOffline=!1,this.examOfflineMessage="",this.scanExamDone=new e.vpe,this.selectedRequireStudentCode=new h.NI(!1,{nonNullable:!0}),this.selectedDuplicateCode=new h.NI(!1,{nonNullable:!0}),this.selectedClassroom=new h.NI(0,{nonNullable:!0}),this.loadingFileJS=!1,this.firstTimeScan=!0,this.isMobile=!1,this.countRetryLoadJS=0,this.isUpload=!1,this.listExamProcesing=[],this.countProcessingExam=0,this.listScanTemplate=[],this.isShowExamError=!1,this.selectFileDirectory=function(){var l=(0,Yi.Z)(function*(c){s.isUpload=!0;let p=c.target.files;try{let L=0;for(var f in s.listExamProcesing=[],p)if("length"!=f&&"item"!=f){var b=p[f];b.webkitRelativePath.indexOf("._")<0&&(b.webkitRelativePath.indexOf(".jpg")>0||b.webkitRelativePath.indexOf(".png")>0||b.webkitRelativePath.indexOf(".tiff")>0||b.webkitRelativePath.indexOf(".tif")>0||b.webkitRelativePath.indexOf(".jpeg")>0)?s.listExamProcesing.push({file:b}):L++}s.isUpload=!1,!p||!p.length||L>=p?.length?s.showErrorSnack("lang_auto_thu_muc_co_anh_khong_dung_dinh_dang_ho_tro_jpg_png_tiff_va_jpeg_brackets_vui_long_kiem_tra_lai"):(s.getFileLocal(),s.firstTimeScan=!1)}catch(L){s.isUpload=!1,console.log(L)}});return function(c){return l.apply(this,arguments)}}(),this.selectFile=function(){var l=(0,Yi.Z)(function*(c){s.isUpload=!0;let p=c.target.files;try{let L=0,N=!1;for(var f in s.listExamProcesing=[],p)if("length"!=f&&"item"!=f){var b=p[f];b.name.indexOf("._")<0&&(b.name.indexOf(".jpg")>0||b.name.indexOf(".png")>0||b.name.indexOf(".tiff")>0||b.name.indexOf(".tif")>0||b.name.indexOf(".jpeg")>0)?s.listExamProcesing.push({file:b}):((b.name.indexOf(".heic")>0||b.name.indexOf(".heif")>0)&&(N=!0),L++)}s.isUpload=!1,!p||L>=p?.length?s.showErrorSnack(N?"lang_auto_file_chon_co_heic_khong_dung_dinh_dang_ho_tro_jpg_png_tiff_va_jpeg_brackets_vui_long_kiem_tra_lai":"lang_auto_file_chon_co_anh_khong_dung_dinh_dang_ho_tro_jpg_png_tiff_va_jpeg_brackets_vui_long_kiem_tra_lai"):(s.getFileLocal(),s.firstTimeScan=!1)}catch(L){s.isUpload=!1,console.log(L)}});return function(c){return l.apply(this,arguments)}}(),this.handleResultScan=function(){var l=(0,Yi.Z)(function*(c,u,m){if(u.errorCode=c.errorCode??0,u.examCode=c.examSubCode??0,u.essayPoints=c.essayPoints??0,u.studentCode=c.studentCode??0,c.success){const f=new Blob([c.nameImage],{type:"image/jpeg"});u.nameImageUrl=URL.createObjectURL(f),u.processingStatus=0}else{const f=new Blob([m],{type:"image/jpeg"});u.imageUrl=URL.createObjectURL(f),u.processingStatus=2,u.errorMessage=c.errorMessage}u.success=c.success,s.listExamProcesing.filter(f=>f.success).length==s.listExamProcesing.length&&(s.showSuccessSnack("lang_azt_cham_thanh_cong_tat_ca_cac_bai_thi"),s.scanExamDone.emit(!0))});return function(c,u,m){return l.apply(this,arguments)}}()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(ya.U),e.Y36(tr.E),e.Y36(pu.j),e.Y36(qi.C))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-file-scan-offline-exam-new"]],viewQuery:function(t,i){if(1&t&&(e.Gf(Q8,5),e.Gf(F8,5)),2&t){let a;e.iGM(a=e.CRH())&&(i.fileInput=a.first),e.iGM(a=e.CRH())&&(i.fileInputMobile=a.first)}},inputs:{examObj:"examObj",loadedJs:"loadedJs",hasExamOffline:"hasExamOffline",examOfflineMessage:"examOfflineMessage"},outputs:{scanExamDone:"scanExamDone"},features:[e.qOj],decls:4,vars:2,consts:[[1,"box"],["class","p-5",4,"ngIf","ngIfElse"],["doneLoading",""],[1,"p-5"],[3,"currentStatusObj"],[3,"hidden"],["type","file","webkitdirectory","","multiple","",1,"form-control",3,"change"],["fileInput",""],["type","file","accept","image/*","multiple","",1,"form-control",3,"change"],["fileInputMobile",""],[1,"p-4"],[1,"grid","grid-cols-12","gap-3"],["class","col-span-12 text-center",4,"ngIf"],["class","col-span-12",4,"ngIf"],["class","grid grid-cols-12 col-span-12 gap-3",4,"ngIf"],["class","col-span-12 mt-5 flex justify-center",4,"ngIf"],["class","grid col-span-12 grid-cols-12",4,"ngIf"],["id","box-botton",1,"col-span-12","md:col-span-12","align-self-center","text-center","mt-3"],["class","flex flex-col md:flex-row mx-auto","style","justify-content: center;",4,"ngIf"],[1,"col-span-12","text-center"],[1,"mb-1",2,"font-size","14px"],[1,"col-span-12"],[1,"text-md","font-medium"],[1,"text-md","mt-2"],[1,"text-success","font-medium"],[1,"flex","mt-1"],[1,"text-md"],[1,"text-danger","font-medium"],["azt-track-service","file-scan-offline-_cpd9wyjr","class","hover ml-3","style","color: blue",3,"click",4,"ngIf"],["class","box-progress-bar ",4,"ngIf"],["azt-track-service","file-scan-offline-_cpd9wyjr",1,"hover","ml-3",2,"color","blue",3,"click"],[1,"box-progress-bar"],[1,"w-full"],[1,"text-md","font-medium","flex","justify-between"],[1,"progress-bar-fill","mt-2"],[1,"progress-bar",3,"ngStyle"],[1,"grid","grid-cols-12","col-span-12","gap-3"],["class","col-span-12 sm:col-span-4 lg:col-span-3 2xl:col-span-2 border rounded-md border-slate-200",3,"hidden",4,"ngFor","ngForOf"],[1,"col-span-12","sm:col-span-4","lg:col-span-3","2xl:col-span-2","border","rounded-md","border-slate-200",3,"hidden"],[1,"relative","h-full","flex","justify-center","items-center"],["azt-track-service","file-scan-offline-xW1za-xq4n",1,"p-1",3,"src","click"],["class","processing-box font-medium",4,"ngIf"],["class","font-medium text-danger text-center w-full absolute p-1","style","font-size: 12px; background: #eeeeeee3; top: 0",4,"ngIf"],[1,"absolute","w-full","flex","p-1","justify-end",2,"bottom","0","right","0"],["azt-track-service","file-scan-offline-bFywCZO_v","class","btn btn-primary btn-sm mr-1 w-full",3,"disabled","click",4,"ngIf"],["azt-track-service","file-scan-offline-uVMupWG4Rd","class","btn btn-primary btn-sm mr-1 w-full",3,"disabled","click",4,"ngIf"],["azt-track-service","file-scan-offline-ZB3c-gjZB",1,"btn","btn-warning","btn-sm",3,"matTooltip","disabled","click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-send",2,"color","white"],["d","m22 2-7 20-4-9-9-4Z"],["d","M22 2 11 13"],[1,"processing-box","font-medium"],[1,"font-medium","text-danger","text-center","w-full","absolute","p-1",2,"font-size","12px","background","#eeeeeee3","top","0"],["azt-track-service","file-scan-offline-bFywCZO_v",1,"btn","btn-primary","btn-sm","mr-1","w-full",3,"disabled","click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-file-pen-line","ml-3"],["d","m18 5-3-3H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2"],["d","M8 18h1"],["d","M18.4 9.6a2 2 0 1 1 3 3L17 17l-4 1 1-4Z"],["azt-track-service","file-scan-offline-uVMupWG4Rd",1,"btn","btn-primary","btn-sm","mr-1","w-full",3,"disabled","click"],[1,"col-span-12","mt-5","flex","justify-center"],["azt-track-service","file-scan-offline-tY0UXLagh1",1,"btn","btn-primary",3,"click"],[1,"grid","col-span-12","grid-cols-12"],[4,"ngIf"],[1,"text-md","font-medium","mr-auto","mt-1"],["class","flex items-center p-1",4,"ngIf"],[1,"flex","items-center","p-1"],["type","checkbox","id","selectedDuplicateCode",1,"form-check-input","flex-none","ng-valid","ng-dirty","ng-touched",3,"formControl"],["for","selectedDuplicateCode",1,"ml-1"],[1,"col-span-12","mt-1"],[1,"text-md","font-medium","mr-auto"],[1,"ml-1",2,"font-size","12px"],[1,"col-span-4","p-1","mt-1"],["azt-track-service","file-scan-offline-Q1ZD-RGHde","class","clickable flex justify-between items-center text-sm rounded mr-auto mb-1 p-1 hover:bg-slate-100 dark:hover:bg-darkmode-400",3,"ngClass","click",4,"ngFor","ngForOf"],["class","col-span-8 flex justify-end",4,"ngIf"],[1,"grid","grid-cols-12","p-1"],["class","flex pt-1 items-center col-span-4 lg:col-span-3 2xl:col-span-2",4,"ngFor","ngForOf"],[1,"flex","items-center","col-span-4","lg:col-span-3","2xl:col-span-2","pt-1"],["id","selectedClassroom-0","type","radio",1,"form-check-input","flex-none","ng-valid","ng-dirty","ng-touched",3,"value","formControl"],["for","selectedClassroom-0",1,"ml-1"],[1,"flex","pt-1","items-center","col-span-4","lg:col-span-3","2xl:col-span-2"],["type","radio",1,"form-check-input","flex-none","ng-valid","ng-dirty","ng-touched",3,"value","id","formControl"],[1,"ml-1","truncate",2,"max-width","70%",3,"for"],["type","checkbox","id","selectedRequireStudentCode",1,"form-check-input","flex-none","ng-valid","ng-dirty","ng-touched",3,"checked","formControl"],["for","selectedRequireStudentCode",1,"ml-1"],["azt-track-service","file-scan-offline-Q1ZD-RGHde",1,"clickable","flex","justify-between","items-center","text-sm","rounded","mr-auto","mb-1","p-1","hover:bg-slate-100","dark:hover:bg-darkmode-400",3,"ngClass","click"],["style","color: green; stroke-width: 2.5px; max-width: 25px","xmlns","http://www.w3.org/2000/svg","width","25","height","25","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","class","lucide lucide-check w-full",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","width","25","height","25","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-check","w-full",2,"color","green","stroke-width","2.5px","max-width","25px"],["d","M20 6 9 17l-5-5"],[1,"col-span-8","flex","justify-end"],[1,"image-template","flex","items-center"],[2,"max-height","360px",3,"src"],[1,"flex","flex-col","md:flex-row","mx-auto",2,"justify-content","center"],["class","mt-3 mr-3",4,"ngIf"],[1,"mt-3",3,"ngClass"],["azt-track-service","file-scan-offline-QP5Xn4YbcL",1,"btn","btn-primary",2,"text-transform","none",3,"click"],[1,"mt-3","mr-3"],["azt-track-service","file-scan-offline-rjEiLoTin7",1,"btn","btn-primary",2,"text-transform","none",3,"click"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0),e.YNc(1,N8,2,1,"div",1),e.YNc(2,rB,14,7,"ng-template",null,2,e.W1O),e.qZA()),2&t){const a=e.MAs(3);e.xp6(1),e.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a)}},dependencies:[F.mk,F.sg,F.O5,F.PC,Ai.gM,h._Y,h.Fj,h.Wl,h._,h.JJ,h.JL,h.F,h.oH,vi.l,ye.JV],styles:[Vx]}),n})(),CB=(()=>{class n extends mt.e{constructor(t,i){super(i,t),this.dialogRef=t,this.data=i,this.squares=[],this.diameter=30,this.radius=15}ngAfterViewInit(){this.canvas&&(this.ctx=this.canvas.nativeElement.getContext("2d"))}drawSquare(t){if(this.canvas){const i=this.canvas.nativeElement.getBoundingClientRect(),a=t.clientX-i.left,r=t.clientY-i.top;if(this.checkNotSquareDuplicate(a,r)){if(this.squares.length>=4)return;this.squares.push({x:a,y:r})}this.ctx&&(this.ctx.clearRect(0,0,this.canvas.nativeElement.width,this.canvas.nativeElement.height),this.ctx.strokeStyle="greenyellow",this.ctx.lineWidth=3,this.squares.forEach(s=>{this.ctx&&this.ctx.strokeRect(s.x-this.radius,s.y-this.radius,this.diameter,this.diameter)}))}}checkNotSquareDuplicate(t,i){if(this.canvas){const a=this.squares.find(r=>t>=r.x-this.radius&&t<=r.x+this.radius&&i>=r.y-this.radius&&i<=r.y+this.radius);if(a&&this.ctx)return this.squares=this.squares.filter(r=>r!==a),!1}return!0}onNoClick(t){if(t){var i=this.image?.nativeElement.width??0,a=this.image?.nativeElement.height??0,r=[];this.squares.forEach(s=>{r.push({x:s.x/i,y:s.y/a})}),this.dialogRef.close(r)}else this.dialogRef.close()}ngOnInit(){super.ngOnInit()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(U.so),e.Y36(U.WI))},n.\u0275cmp=e.Xpm({type:n,selectors:[["no-exam-offline-dialog"]],viewQuery:function(t,i){if(1&t&&(e.Gf(sB,5),e.Gf(lB,5)),2&t){let a;e.iGM(a=e.CRH())&&(i.canvas=a.first),e.iGM(a=e.CRH())&&(i.image=a.first)}},features:[e.qOj],decls:20,vars:14,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5"],[1,"text-md","flex"],[1,"text-medium","font-bold"],[1,"mt-2","flex","justify-center"],[2,"max-height","calc(100vh - 150px)",3,"src"],["myImage",""],[2,"position","absolute",3,"width","height","click"],["myCanvas",""],[1,"p-3","text-right"],["azt-track-service","delete-dialog-K2F22n8QsM",1,"btn","btn-secondary","w-24","mr-2",3,"click"],["azt-track-service","delete-dialog-6IvYAh7dZl",1,"btn","w-32","btn-primary",3,"disabled","click"],["class","w-4 h-4 inline-block mr-2",4,"ngIf"],[1,"w-4","h-4","inline-block","mr-2"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"p",4),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()(),e.TgZ(7,"div",5),e._UZ(8,"img",6,7),e.TgZ(10,"canvas",8,9),e.NdJ("click",function(r){return i.drawSquare(r)}),e.qZA()()()(),e.TgZ(12,"div",10)(13,"button",11),e.NdJ("click",function(){return i.onNoClick(!1)}),e._uU(14),e.ALo(15,"mytranslate"),e.qZA(),e.TgZ(16,"button",12),e.NdJ("click",function(){return i.onNoClick(!0)}),e.YNc(17,cB,2,0,"span",13),e._uU(18),e.ALo(19,"mytranslate"),e.qZA()()()),2&t){const a=e.MAs(9);e.xp6(5),e.Oqu(e.lcZ(6,8,"lang_azt_Chon_4_goc_den")),e.xp6(3),e.Q6J("src",i.data.imageUrl,e.LSH),e.xp6(2),e.Q6J("width",a.width)("height",a.height),e.xp6(4),e.hij(" ",e.lcZ(15,10,"lang_cms_common_close_btn")," "),e.xp6(2),e.Q6J("disabled",i.statusObj.loading||4!=i.squares.length),e.xp6(1),e.Q6J("ngIf",i.statusObj.loading),e.xp6(1),e.hij(" ",e.lcZ(19,12,"lang_button_save")," ")}},dependencies:[F.O5,wi.n,ye.JV],styles:[Vx]}),n})(),TB=(()=>{class n extends mt.e{constructor(t,i){super(i,t),this.dialogRef=t,this.data=i,this.searchContentObjStudentCode=new t_.h,this.titleButtonFilterClass="lang_auto_tat_ca_cac_lop",this.classFilterId=0;let a=i.studentCodes.filter(r=>r.studentCode==i.exam.studentCode).length>0?i.exam.studentCode:0;this.form=new h.cw({examCode:new h.NI(i.exam.examCode??0,{nonNullable:!0}),studentCode:new h.NI(a??0,{nonNullable:!0})})}filterClass(t){this.titleButtonFilterClass=t?t.className:"lang_auto_tat_ca_cac_lop",this.classFilterId=t?t.classId:0}onSearchStudentCodeBox(t){this.searchContentObjStudentCode=t}formatCode(t){if(!t)return"";let i=t.toString();return 1==i.length?"00"+i:2==i.length?"0"+i:i}formatStudentCode(t){if(!t)return"";let i=t.toString();return i="0".repeat(6-i.length)+i,i}saveChange(){let t={subExamCode:this.form.getRawValue().examCode,studentCode:this.form.getRawValue().studentCode};this.dialogRef.close(t)}onNoClick(t){this.dialogRef.close()}ngOnInit(){super.ngOnInit()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(U.so),e.Y36(U.WI))},n.\u0275cmp=e.Xpm({type:n,selectors:[["edit-scan-exam"]],features:[e.qOj],decls:17,vars:7,consts:[[3,"currentStatusObj",4,"ngIf","ngIfElse"],["doneLoading",""],["xPosition","before"],["filterByClass","matMenu"],[1,"dropdown-menu","w-72","show","relative"],[1,"dropdown-content"],["azt-track-service","file-scan-offline--DV_tcUjN",3,"click"],[1,"dropdown-item","w-full"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","mr-2"],["d","M2 9V5c0-1.1.9-2 2-2h3.93a2 2 0 0 1 1.66.9l.82 1.2a2 2 0 0 0 1.66.9H20a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-1"],["d","M2 13h10"],["d","m9 16 3-3-3-3"],["xmlns","http://www.w3.org/2000/svg","style","color: green","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","class","lucide lucide-check w-4 h-4 ml-2",4,"ngIf"],["azt-track-service","file-scan-offline-YGr5khKYNB",3,"click",4,"ngFor","ngForOf"],[3,"currentStatusObj"],[1,"box","w-full"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5",2,"max-height","calc(100vh - 200px)","overflow-y","auto"],[3,"formGroup"],[1,"font-medium","text-md","font-bold","mr-auto"],[1,"mb-2",2,"font-size","12px"],[1,"grid","grid-cols-12","p-1","mt-2"],["class","flex form-check pt-1 items-center col-span-3 md:col-span-2 lg:col-span-2 2xl:col-span-1",4,"ngFor","ngForOf"],[1,"font-medium","text-md","font-bold","mr-auto","mt-2"],["class","mb-2","style","font-size: 12px;",4,"ngIf"],[1,"flex"],["style","width: 100%",3,"isServerSearch","placeholder","onSearch",4,"ngIf"],["style","background-color: white; width: max-content;","class","btn btn-light ml-2",3,"matMenuTriggerFor",4,"ngIf"],["class","form-check flex pt-1 items-center col-span-6 lg:col-span-4 2xl:col-span-3",3,"matTooltip","hidden",4,"ngFor","ngForOf"],[1,"flex","items-center","col-span-3","md:col-span-2","lg:col-span-2","2xl:col-span-1"],["id","selectedStudentcode-0","formControlName","studentCode","type","radio",1,"form-check-input","flex-none",3,"value"],["for","selectedStudentcode-0",1,"pl-2","form-check-label"],[1,"p-3","text-right"],["azt-track-service","delete-dialog-K2F22n8QsM",1,"btn","btn-secondary","w-24","mr-2",3,"click"],["azt-track-service","delete-dialog-6IvYAh7dZl",1,"btn","w-32","btn-primary",3,"disabled","click"],["class","w-4 h-4 inline-block mr-2",4,"ngIf"],[1,"flex","form-check","pt-1","items-center","col-span-3","md:col-span-2","lg:col-span-2","2xl:col-span-1"],["formControlName","examCode","type","radio",1,"form-check-input","flex-none",3,"value","id"],[1,"pl-2","form-check-label","truncate",2,"max-width","70%",3,"for"],[2,"width","100%",3,"isServerSearch","placeholder","onSearch"],[1,"btn","btn-light","ml-2",2,"background-color","white","width","max-content",3,"matMenuTriggerFor"],["xmlns","http://www.w3.org/2000/svg","width","15","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-filter"],["points","22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"],[1,"ml-1","mr-2",2,"width","max-content"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-chevron-down"],["d","m6 9 6 6 6-6"],[1,"form-check","flex","pt-1","items-center","col-span-6","lg:col-span-4","2xl:col-span-3",3,"matTooltip","hidden"],["formControlName","studentCode","type","radio",1,"form-check-input","flex-none",3,"value","id"],[4,"ngIf"],[1,"w-4","h-4","inline-block","mr-2"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-check","w-4","h-4","ml-2",2,"color","green"],["d","M20 6 9 17l-5-5"],["azt-track-service","file-scan-offline-YGr5khKYNB",3,"click"]],template:function(t,i){if(1&t&&(e.YNc(0,uB,1,1,"azt-loading-effect",0),e.YNc(1,xB,35,34,"ng-template",null,1,e.W1O),e.TgZ(3,"mat-menu",2,3)(5,"div",4)(6,"ul",5)(7,"li",6),e.NdJ("click",function(){return i.filterClass()}),e.TgZ(8,"button",7),e.O4$(),e.TgZ(9,"svg",8),e._UZ(10,"path",9)(11,"path",10)(12,"path",11),e.qZA(),e._uU(13),e.ALo(14,"mytranslate"),e.YNc(15,bB,2,0,"svg",12),e.qZA()(),e.YNc(16,wB,8,2,"li",13),e.qZA()()()),2&t){const a=e.MAs(2);e.Q6J("ngIf",1==i.statusObj.loading)("ngIfElse",a),e.xp6(13),e.hij(" ",e.lcZ(14,5,"lang_auto_tat_ca_cac_lop")," "),e.xp6(2),e.Q6J("ngIf",0==i.classFilterId),e.xp6(1),e.Q6J("ngForOf",i.data.classes)}},dependencies:[F.sg,F.O5,Qi.VK,Qi.p6,Ai.gM,h._Y,h.Fj,h._,h.JJ,h.JL,h.sg,h.u,vi.l,wt.M,wi.n,gm.W,ye.JV,ye.om],styles:[Vx]}),n})();var hw=I(88135);function kB(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij("\xa0",e.lcZ(2,1,"lang_auto_de_thi"),""))}function SB(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij("\xa0",e.lcZ(2,1,"lang_auto_bai_tap"),""))}function EB(n,o){if(1&n&&(e.TgZ(0,"span",20),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(t.data.examObj.name)}}function OB(n,o){if(1&n&&(e.TgZ(0,"span",20),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(t.data.homeworkObj.name)}}function IB(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_auto_de_thi")+" "))}function MB(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_auto_bai_tap")+" "))}function LB(n,o){if(1&n&&(e.TgZ(0,"span",20),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(t.data.examObj.name+" ")}}function BB(n,o){if(1&n&&(e.TgZ(0,"span",20),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(t.data.homeworkObj.name+" ")}}function PB(n,o){1&n&&(e.TgZ(0,"span",21),e._UZ(1,"azt-loading-ui"),e.qZA())}let Wx=(()=>{class n extends mt.e{confirmDelete(){this.data.examObj?this.waitDestroy(this.examService.apiExamDeleteObjIdGet(Number(this.data.examObj?.id)).subscribe(t=>{1==t.success?(this.dialogRef.close(!0),this.showSuccessSnack("lang_cms_delete_success")):(this.btnCloseDialog(),this.showErrorSnack(t.message??""))})):this.data.homeworkObj&&this.waitDestroy(this.homeworkService.apiHomeworkDeleteObjGet(this.data.homeworkObj.hashId??"").subscribe(t=>{1==t.success?(this.dialogRef.close(!0),this.showSuccessSnack("lang_cms_delete_success")):(this.btnCloseDialog(),this.showErrorSnack(t.message??""))}))}btnCloseDialog(){this.dialogRef.close()}ngOnInit(){super.ngOnInit()}constructor(t,i,a,r){super(r,a),this.examService=t,this.homeworkService=i,this.dialogRef=a,this.data=r}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(un.Oe),e.Y36(zp.Lk),e.Y36(U.so,8),e.Y36(U.WI,8))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-delete-dialog"]],features:[e.qOj],decls:41,vars:25,consts:[[1,"box",2,"max-width","600px"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5"],[1,"text-md","flex"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-6","h-6","mr-2","text-danger","flex-none"],["d","M3 6h18"],["d","M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"],["d","M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"],["x1","10","y1","11","x2","10","y2","17"],["x1","14","y1","11","x2","14","y2","17"],[1,""],[2,"text-transform","lowercase"],[4,"ngIf"],["class","font-medium",4,"ngIf"],[1,"mt-2"],[1,"text-xs","text-slate-500","dark:text-slate-400"],[1,"p-3","text-right"],["azt-track-service","delete-dialog-K2F22n8QsM",1,"btn","btn-secondary","w-24","mr-2",3,"click"],["azt-track-service","delete-dialog-6IvYAh7dZl",1,"btn","w-32","btn-danger",3,"disabled","click"],["class","w-4 h-4 inline-block mr-2",4,"ngIf"],[1,"font-medium"],[1,"w-4","h-4","inline-block","mr-2"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e.O4$(),e.TgZ(4,"svg",4),e._UZ(5,"path",5)(6,"path",6)(7,"path",7)(8,"line",8)(9,"line",9),e.qZA(),e.kcU(),e.TgZ(10,"div")(11,"span",10),e._uU(12),e.ALo(13,"mytranslate"),e.qZA(),e.TgZ(14,"span",11),e.YNc(15,kB,3,3,"span",12),e.YNc(16,SB,3,3,"span",12),e.qZA(),e._uU(17,": "),e.YNc(18,EB,2,1,"span",13),e.YNc(19,OB,2,1,"span",13),e.qZA()(),e.TgZ(20,"div",14)(21,"p",15)(22,"span"),e._uU(23),e.ALo(24,"mytranslate"),e.qZA(),e.TgZ(25,"span",11),e.YNc(26,IB,3,3,"span",12),e.YNc(27,MB,3,3,"span",12),e.qZA(),e.YNc(28,LB,2,1,"span",13),e.YNc(29,BB,2,1,"span",13),e.TgZ(30,"span"),e._uU(31),e.ALo(32,"mytranslate"),e.qZA()()()()(),e.TgZ(33,"div",16)(34,"button",17),e.NdJ("click",function(){return i.btnCloseDialog()}),e._uU(35),e.ALo(36,"mytranslate"),e.qZA(),e.TgZ(37,"button",18),e.NdJ("click",function(){return i.confirmDelete()}),e.YNc(38,PB,2,0,"span",19),e._uU(39),e.ALo(40,"mytranslate"),e.qZA()()()),2&t&&(e.xp6(12),e.Oqu(e.lcZ(13,15,"lang_auto_ban_co_chac_chan_muon_xoa")),e.xp6(3),e.Q6J("ngIf",i.data.examObj),e.xp6(1),e.Q6J("ngIf",i.data.homeworkObj),e.xp6(2),e.Q6J("ngIf",i.data.examObj),e.xp6(1),e.Q6J("ngIf",i.data.homeworkObj),e.xp6(4),e.Oqu(e.lcZ(24,17,"lang_auto_khi_xac_nhan")+", "),e.xp6(3),e.Q6J("ngIf",i.data.examObj),e.xp6(1),e.Q6J("ngIf",i.data.homeworkObj),e.xp6(1),e.Q6J("ngIf",i.data.examObj),e.xp6(1),e.Q6J("ngIf",i.data.homeworkObj),e.xp6(2),e.Oqu(e.lcZ(32,19,"lang_auto_se_duoc_chuyen_vao_thung_rac_ban_co_the_dot")),e.xp6(4),e.hij(" ",e.lcZ(36,21,"lang_cms_common_close_btn")," "),e.xp6(2),e.Q6J("disabled",i.statusObj.loading),e.xp6(1),e.Q6J("ngIf",i.statusObj.loading),e.xp6(1),e.hij(" ",e.lcZ(40,23,"lang_cms_common_confirm_btn")," "))},dependencies:[F.O5,wi.n,ye.JV],encapsulation:2}),n})();var oh=I(96368),Aw=I(62836),QB=I(71332),FB=I(68004),o_=I(97931),_w=I(35149);function NB(n,o){1&n&&(e.TgZ(0,"span"),e.O4$(),e.TgZ(1,"svg",9),e._UZ(2,"path",10)(3,"path",11),e.qZA()())}function ZB(n,o){1&n&&(e.TgZ(0,"span",12),e.O4$(),e.TgZ(1,"svg",13),e._UZ(2,"path",14)(3,"path",15),e.qZA()())}function DB(n,o){1&n&&(e.TgZ(0,"span"),e.O4$(),e.TgZ(1,"svg",21),e._UZ(2,"path",22),e.qZA()())}function UB(n,o){1&n&&(e.TgZ(0,"span"),e.O4$(),e.TgZ(1,"svg",23),e._UZ(2,"path",24),e.qZA()())}function jB(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",25)(2,"a",26,27),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw(2).$implicit,l=e.oxw();return e.KtG(l.clickToClassroomEvent({classroomGroupObj:s.groupObj,classroomObj:r}))}),e._uU(4),e.qZA()(),e.BQk()}if(2&n){const t=o.$implicit,i=e.MAs(3),a=e.oxw(3);e.xp6(1),e.Q6J("hidden",!t.isShowClassroom),e.uIk("class",a.classroomGridCss),e.xp6(1),e.s9C("matTooltip",t.name),e.Q6J("isDisabledTooltip",!1)("matTooltipDisabled",i.isDisabled),e.xp6(2),e.hij(" ",t.name," ")}}function qB(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",17)(1,"div")(2,"span",18),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,r=e.oxw();return e.KtG(r.collapseByGroupId(a.groupObj))}),e.YNc(3,DB,3,0,"span",4),e.YNc(4,UB,3,0,"span",4),e.TgZ(5,"h2",19),e._uU(6),e.ALo(7,"mytranslate"),e.ALo(8,"mytranslate"),e.qZA()()(),e.TgZ(9,"div",20),e.YNc(10,jB,5,6,"ng-container",8),e.qZA()()}if(2&n){const t=e.oxw().$implicit;e.xp6(3),e.Q6J("ngIf",t.groupObj.isExpand),e.xp6(1),e.Q6J("ngIf",!t.groupObj.isExpand),e.xp6(2),e.AsE("",e.lcZ(7,6,t.groupObj.name)," ","("+t.groupObj.totalViewClassrooms+" "+e.lcZ(8,8,"lang_testbank_test_list_classes")+")",""),e.xp6(3),e.Q6J("hidden",!t.groupObj.isExpand),e.xp6(1),e.Q6J("ngForOf",t.classroomObjs)}}function RB(n,o){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,qB,11,10,"div",16),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",t.groupObj.isShowGroup)}}let fw=(()=>{class n extends _w.w{ngOnInit(){super.ngOnInit()}constructor(){super(),this.classroomGridCss="col-span-12 md:col-span-6 2lg:col-span-6"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["azt-list-classroom-view-for-small-box"]],features:[e.qOj],decls:11,vars:9,consts:[[1,"flex","items-center"],[1,"w-full"],[3,"isServerSearch","placeholder","onSearch"],["azt-track-service","azt-list-classroom-view-Cg6k1znbH",1,"clickable",3,"click"],[4,"ngIf"],["class","clickable",4,"ngIf"],[1,"overflow-auto","p-2","mt-2","border-slate-200","dark:border-darkmode-400","border","box",2,"height","220px","padding-right","5px"],["pointerEventsMethod","scrollbar",1,"w-full","h-full",3,"visibility","autoHeightDisabled"],[4,"ngFor","ngForOf"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-chevrons-up-down"],["d","m7 15 5 5 5-5"],["d","m7 9 5-5 5 5"],[1,"clickable"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-chevrons-down-up"],["d","m7 20 5-5 5 5"],["d","m7 4 5 5 5-5"],["class","azt-group mt-3",4,"ngIf"],[1,"azt-group","mt-3"],["azt-track-service","azt-list-classroom-view-mpTg8jgQkF",1,"flex","items-center","clickable",3,"click"],[1,"font-medium","truncate"],[1,"grid","grid-cols-12","gap-3","mt-3",3,"hidden"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-chevron-down"],["d","m6 9 6 6 6-6"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-chevron-right"],["d","m9 18 6-6-6-6"],[3,"hidden"],[1,"btn","btn-outline-secondary","block","truncate","w-full",3,"matTooltip","isDisabledTooltip","matTooltipDisabled","click"],["c","isDisabled"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"azt-search-box",2),e.NdJ("onSearch",function(r){return i.searchByName(r.searchObj)}),e.ALo(3,"mytranslate"),e.qZA()(),e.TgZ(4,"span",3),e.NdJ("click",function(){return i.collapseAll(!i.isExpandAll)}),e.YNc(5,NB,4,0,"span",4),e.YNc(6,ZB,4,0,"span",5),e.qZA()(),e.TgZ(7,"div",6)(8,"ng-scrollbar",7)(9,"div"),e.YNc(10,RB,2,1,"div",8),e.qZA()()()),2&t&&(e.xp6(2),e.Q6J("isServerSearch",!1)("placeholder",e.lcZ(3,7,"lang_testbank_test_list_search_group_and_classroom")),e.xp6(3),e.Q6J("ngIf",!i.isExpandAll),e.xp6(1),e.Q6J("ngIf",i.isExpandAll),e.xp6(2),e.Q6J("visibility","hover")("autoHeightDisabled",!0),e.xp6(2),e.Q6J("ngForOf",i.viewClassroomGroupObjs))},dependencies:[F.sg,F.O5,Ai.gM,k.KC,zs.Q,gm.W,ye.JV],encapsulation:2}),n})();var zB=I(78137);function HB(n,o){if(1&n&&(e.O4$(),e.kcU(),e._UZ(0,"span",6),e.ALo(1,"translateToKeyParam"),e.ALo(2,"number")),2&n){const t=e.oxw(2);let i;e.Q6J("innerHTML",e.xi3(1,1,"lang_testbank_tested_price_to_take_test",null!==(i=e.lcZ(2,4,t.mainExamComboObj.price))&&void 0!==i?i:""),e.oJD)}}function JB(n,o){if(1&n&&(e.O4$(),e.kcU(),e._UZ(0,"span",6),e.ALo(1,"translateToKeyParam"),e.ALo(2,"number")),2&n){const t=e.oxw(2);let i;e.Q6J("innerHTML",e.xi3(1,1,"lang_testbank_tested_price_to_show_explain",null!==(i=e.lcZ(2,4,t.mainExamComboObj.price))&&void 0!==i?i:""),e.oJD)}}function KB(n,o){if(1&n&&(e.ynx(0),e.O4$(),e.TgZ(1,"svg",1),e._UZ(2,"path",2)(3,"path",3)(4,"path",4),e.qZA(),e.YNc(5,HB,3,6,"span",5),e.YNc(6,JB,3,6,"span",5),e.BQk()),2&n){const t=e.oxw();e.xp6(5),e.Q6J("ngIf","TAKE_TEST"==t.mainComboItem.priceForAction),e.xp6(1),e.Q6J("ngIf","SHOW_EXPLAIN"==t.mainComboItem.priceForAction)}}let GB=(()=>{class n extends xe.Q{getData(){this.initStatusObj(),this.waitDestroy(this.comboPackageService.apiComboPackageListComboPackagesPost({examHashId:this.examObj.hashId??"",objectType:"EXAM"}).subscribe(t=>{t.success?(this.mainExamComboObj=t.data?.objs?.find(i=>null!=i.items.find(a=>a.objectId==this.examObj.id&&a.isMain)),this.mainComboItem=this.mainExamComboObj?.items.find(i=>i.isMain),this.successStatusObj()):this.errorStatusObj(t.message??"",!0)}))}ngOnInit(){super.ngOnInit(),this.getData()}constructor(t){super(),this.comboPackageService=t}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(zB.F))},n.\u0275cmp=e.Xpm({type:n,selectors:[["testbank-exam-price-box"]],inputs:{examObj:"examObj"},features:[e.qOj],decls:1,vars:1,consts:[[4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-layers","w-4","h-4","mr-2"],["d","M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z"],["d","M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8"],["d","M12 18V6"],["class","text-sm",3,"innerHTML",4,"ngIf"],[1,"text-sm",3,"innerHTML"]],template:function(t,i){1&t&&e.YNc(0,KB,7,2,"ng-container",0),2&t&&e.Q6J("ngIf",i.mainExamComboObj&&i.mainComboItem)},dependencies:[F.O5,F.JJ,ye.UE],encapsulation:2}),n})();function YB(n,o){if(1&n&&e._UZ(0,"testbank-exam-price-box",30),2&n){const t=e.oxw();e.Q6J("examObj",t.initData.examObj)}}function $B(n,o){if(1&n&&(e.TgZ(0,"div",31),e._UZ(1,"azt-share",32),e.qZA()),2&n){const t=e.oxw();let i;e.xp6(1),e.Q6J("objectCodeType",3)("objectCode","EXAM")("objectId",null!==(i=null==t.initData.examObj?null:t.initData.examObj.id)&&void 0!==i?i:0)("examWithPermissionObj",t.initData.examObj)}}const a_=function(n){return{opacity:n}};function VB(n,o){if(1&n){const t=e.EpF();e.O4$(),e.kcU(),e.TgZ(0,"li",37),e.ALo(1,"viewPermission"),e.TgZ(2,"a",59),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.handleReturnOfflineShare(a.initData.examObj))}),e.O4$(),e.TgZ(3,"svg",60),e._UZ(4,"path",61)(5,"polyline",22)(6,"path",62)(7,"path",63),e.qZA(),e._uU(8),e.ALo(9,"mytranslate"),e.qZA()()}if(2&n){const t=e.oxw(2);e.Q6J("ngStyle",e.VKq(7,a_,e.xi3(1,2,t.initData.examObj,"exam")?"1":"0.5")),e.xp6(8),e.hij(" ",e.lcZ(9,5,"lang_auto_tra_ket_qua_thi_offline")," ")}}function WB(n,o){1&n&&(e.O4$(),e.kcU(),e.ynx(0),e.TgZ(1,"div",64)(2,"div",65)(3,"span",66),e._UZ(4,"azt-loading-ui"),e.qZA()()(),e.BQk())}function XB(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",76),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.openDialogExamConfig("whoAllow"))}),e.O4$(),e.TgZ(1,"svg",12),e._UZ(2,"path",77)(3,"path",78),e.qZA(),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()}2&n&&(e.xp6(4),e.hij(" ",e.lcZ(5,1,"lang_auto_sua")," "))}function e7(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"azt-list-classroom-view-for-small-box",80),e.NdJ("clickToClassroomEmitter",function(a){e.CHM(t);const r=e.oxw(4);return e.KtG(r.clickToClassroomEvent(a))}),e.qZA()}if(2&n){const t=e.oxw(4);e.Q6J("isExpandAll",!1)("classroomGroupData",t.classroomWithGroup)}}function t7(n,o){if(1&n&&(e.ynx(0),e.YNc(1,e7,1,2,"azt-list-classroom-view-for-small-box",79),e.BQk()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.classroomWithGroup)}}function n7(n,o){1&n&&(e.TgZ(0,"div",81)(1,"a",82),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"lang_auto_tat_ca_moi_nguoi")," "))}function i7(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",83),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.redirectToUpdateExam())}),e.O4$(),e.TgZ(1,"svg",12),e._UZ(2,"path",77)(3,"path",78),e.qZA(),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()}2&n&&(e.xp6(4),e.hij(" ",e.lcZ(5,1,"lang_auto_sua")," "))}function o7(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",84),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.openDialogExamDetail())}),e.O4$(),e.TgZ(1,"svg",85),e._UZ(2,"path",86)(3,"polyline",22)(4,"line",87)(5,"line",88)(6,"line",89),e.qZA(),e._uU(7),e.ALo(8,"mytranslate"),e.qZA()}2&n&&(e.xp6(7),e.hij(" ",e.lcZ(8,1,"lang_auto_xem_chi_tiet")," "))}function a7(n,o){if(1&n&&(e.O4$(),e.kcU(),e.TgZ(0,"div",67)(1,"div",68)(2,"h3",34),e._uU(3),e.ALo(4,"mytranslate"),e.qZA(),e.YNc(5,XB,6,3,"button",69),e.ALo(6,"editPermission"),e.ALo(7,"configPermission"),e.qZA(),e.TgZ(8,"div",70),e.YNc(9,t7,2,1,"ng-container",57),e.YNc(10,n7,4,3,"ng-template",null,71,e.W1O),e.qZA()(),e.TgZ(12,"div",72)(13,"div",68)(14,"h3",34),e._uU(15),e.ALo(16,"mytranslate"),e.qZA(),e.YNc(17,i7,6,3,"button",73),e.ALo(18,"editPermission"),e.qZA(),e.TgZ(19,"div",74),e.YNc(20,o7,9,3,"button",75),e.ALo(21,"viewPermission"),e.qZA()()),2&n){const t=e.MAs(11),i=e.oxw(2);e.xp6(3),e.hij(" ",e.lcZ(4,7,"lang_auto_giao_cho")," "),e.xp6(2),e.Q6J("ngIf",e.xi3(6,9,i.initData.examObj,"exam")||e.xi3(7,12,i.initData.examObj,"exam")),e.xp6(4),e.Q6J("ngIf",2==(null==i.initData.examObj?null:i.initData.examObj.whoAllow)||3==(null==i.initData.examObj?null:i.initData.examObj.whoAllow))("ngIfElse",t),e.xp6(6),e.hij(" ",e.lcZ(16,15,"lang_auto_noi_dung")," "),e.xp6(2),e.Q6J("ngIf",e.xi3(18,17,i.initData.examObj,"exam")),e.xp6(3),e.Q6J("ngIf",e.xi3(21,20,i.initData.examObj,"exam"))}}function r7(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",33)(1,"h3",34),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.TgZ(4,"div",35)(5,"ul",36)(6,"li",37),e.ALo(7,"editPermission"),e.TgZ(8,"a",38),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.redirectToActionOnlOff())}),e.O4$(),e.TgZ(9,"svg",12),e._UZ(10,"path",39)(11,"circle",40),e.qZA(),e._uU(12),e.ALo(13,"mytranslate"),e.qZA()(),e.kcU(),e.TgZ(14,"li",37),e.ALo(15,"statisticalPermission"),e.TgZ(16,"a",41),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.redirectToStatistical())}),e.O4$(),e.TgZ(17,"svg",42),e._UZ(18,"path",43)(19,"path",44),e.qZA(),e._uU(20),e.ALo(21,"mytranslate"),e.qZA()(),e.kcU(),e.TgZ(22,"li",37),e.ALo(23,"viewPermission"),e.TgZ(24,"a",45),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.openVideoMonitor())}),e.O4$(),e.TgZ(25,"svg",12),e._UZ(26,"circle",46)(27,"circle",47)(28,"path",48)(29,"path",49),e.qZA(),e._uU(30),e.ALo(31,"mytranslate"),e.qZA()(),e.YNc(32,VB,10,9,"li",50),e.kcU(),e.TgZ(33,"li",37),e.ALo(34,"deletePermission"),e.TgZ(35,"a",51),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.openDeleteExam())}),e.O4$(),e.TgZ(36,"svg",12),e._UZ(37,"path",52)(38,"path",53)(39,"path",54)(40,"line",55)(41,"line",56),e.qZA(),e._uU(42),e.ALo(43,"mytranslate"),e.qZA()()()()(),e.YNc(44,WB,5,0,"ng-container",57),e.YNc(45,a7,22,23,"ng-template",null,58,e.W1O)}if(2&n){const t=e.MAs(46),i=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,12,"lang_auto_menu")," "),e.xp6(4),e.Q6J("ngStyle",e.VKq(34,a_,e.xi3(7,14,i.initData.examObj,"exam")?"1":"0.5")),e.xp6(6),e.hij(" ",e.lcZ(13,17,"lang_auto_cai_dat")," "),e.xp6(2),e.Q6J("ngStyle",e.VKq(36,a_,e.xi3(15,19,i.initData.examObj,"exam")?"1":"0.5")),e.xp6(6),e.hij(" ",e.lcZ(21,22,"lang_auto_thong_ke")," "),e.xp6(2),e.Q6J("ngStyle",e.VKq(38,a_,e.xi3(23,24,i.initData.examObj,"exam")?"1":"0.5")),e.xp6(8),e.hij(" ",e.lcZ(31,27,"lang_auto_giam_sat_nang_cao")," "),e.xp6(2),e.Q6J("ngIf",!i.isNotTestedYet),e.xp6(1),e.Q6J("ngStyle",e.VKq(40,a_,e.xi3(34,29,i.initData.examObj,"exam")?"1":"0.5")),e.xp6(9),e.hij(" ",e.lcZ(43,32,"lang_auto_xoa")," "),e.xp6(2),e.Q6J("ngIf",i.loadingApi)("ngIfElse",t)}}function s7(n,o){1&n&&(e.TgZ(0,"span"),e.O4$(),e.TgZ(1,"svg",90),e._UZ(2,"polyline",91),e.qZA()())}function l7(n,o){1&n&&(e.TgZ(0,"span"),e.O4$(),e.TgZ(1,"svg",90),e._UZ(2,"polyline",92),e.qZA()())}let c7=(()=>{class n extends xe.Q{toggleShowActions(){this.isShowActions=!this.isShowActions}copyLinkToClipboard(){return this.linkExam}showCopySuccess(){this.showSuccessSnack("lang_auto_sao_chep_thanh_cong")}openDialogWaring(t){this.commonService.getTranslate(t).subscribe(i=>{this.sAztDialogService.open(oh.C,{width:"600px",data:{isShow:!0,content:i},restoreFocus:!1})})}openDeleteExam(){this.permissionService.hasDeletePermission("exam",this.initData.examObj)?this.sAztDialogService.open(Wx,{data:{examObj:this.initData.examObj,isShow:!0},restoreFocus:!1}).afterClosed().subscribe(r=>{r&&this.commonService.myNavigation("/admin/testbank/document-management/0/0/1")}):this.openDialogWaring("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay")}openDialogExamConfig(t){this.sAztDialogService.open(hw.Y,{width:"900px",data:{hashId:this.initData.examObj?.hashId,examStudents:this.examStudents},restoreFocus:!1}).afterClosed().subscribe(a=>{a&&(this.initData.examObj={...a},this.reloadApi.emit())})}openDialogExamDetail(){if(this.permissionService.hasViewPermission("exam",this.initData.examObj)){var i={obj:{...this.initData.examObj},curCateId:this.initData.examObj?.categoryId?this.initData.examObj?.categoryId:0,isOnLib:0,isShow:!0};this.sAztDialogService.open(Aw.H,{width:"800px",maxWidth:"90vw",enterAnimationDuration:"0ms",exitAnimationDuration:"0ms",data:i,restoreFocus:!1}).afterClosed().subscribe(r=>{})}else this.openDialogWaring("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay")}handleReturnOfflineShare(t){t?this.permissionService.hasViewPermission("exam",t)?this.sAztDialogService.open(Dx.h,{width:"1000px",data:{examHashId:t.hashId,useDialog:!0},restoreFocus:!1}):this.showErrorSnack("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay"):this.showErrorSnack("lang_core_invalid_data")}redirectToActionOnlOff(){if(this.permissionService.hasEditPermission("exam",this.initData.examObj)){let i=`/admin/testbank/exam-results-list/${this.initData.examObj?.categoryId??0}/${this.initData.examObj?.id}/0`,a=this.commonService.getMyQueryParam("backto")??"";a&&(i=`/admin/testbank/exam-results-list/${this.initData.examObj?.categoryId??0}/${this.initData.examObj?.id}/0?backto=`+encodeURIComponent(a)),this.myNavigationWithQueryString(`/admin/testbank/action-online-offline/${this.initData.examObj?.categoryId??0}/${this.initData.examObj?.hashId}`,`?backto=${encodeURIComponent(i)}`)}else this.openDialogWaring("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay")}redirectConfigExamOnline(){if(this.permissionService.hasEditPermission("exam",this.initData.examObj)){let i=`/admin/testbank/exam-results-list/${this.initData.examObj?.categoryId??0}/${this.initData.examObj?.id}/0`,a=this.commonService.getMyQueryParam("backto")??"";a&&(i=`/admin/testbank/exam-results-list/${this.initData.examObj?.categoryId??0}/${this.initData.examObj?.id}/0?backto=`+encodeURIComponent(a)),this.myNavigationWithQueryString(`/admin/testbank/config-exam-online/${this.initData.examObj?.categoryId??0}/${this.initData.examObj?.hashId}`,`?backto=${encodeURIComponent(i)}`)}else this.openDialogWaring("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay")}redirectToStatistical(){if(this.permissionService.hasStatisticalPermission("exam",this.initData.examObj)){let i=`/admin/testbank/exam-results-list/${this.initData.examObj?.categoryId??0}/${this.initData.examObj?.id}/0`,a=this.commonService.getMyQueryParam("backto")??"";a&&(i=`/admin/testbank/exam-results-list/${this.initData.examObj?.categoryId??0}/${this.initData.examObj?.id}/0?backto=`+encodeURIComponent(a)),this.commonService.myNavigationWithQueryString(`/admin/testbank/statistic/${this.initData.examObj?.categoryId?this.initData.examObj.categoryId:0}/${this.initData.examObj?.id}`,"?backto="+encodeURIComponent(i))}else this.openDialogWaring("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay")}openVideoMonitor(){3!=this.initData.examObj?.autoMonitor?this.permissionService.hasFullPermission("exam",this.initData.examObj)&&this.permissionService.hasViewPermission("exam",this.initData.examObj)?this.openDialogWaring("lang_auto_chua_bat_giam_sat_moi"):this.openDialogWaring("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay"):-1==this.currentSelectedClassroomId&&this.openDialogWaring("lang_auto_khong_giam_sat_lop_tu_do"),3==this.initData.examObj?.autoMonitor&&this.permissionService.hasViewPermission("exam",this.initData.examObj)&&-1!=this.currentSelectedClassroomId&&this.sAztShowMonitorService.monitorAtTeacherDashboard({roomId:this.initData.examObj?.hashId,examId:this.initData.examObj?.id,userList:this.userList,examConfig:this.initData.examObj,fileTypeStr:this.initData.fileTypeStr})}clickToClassroomEvent(t){let i=`/admin/testbank/exam-results-list/${this.initData.examObj?.categoryId??0}/${this.initData.examObj?.id}/0`,a=this.commonService.getMyQueryParam("backto")??"";a&&(i=`/admin/testbank/exam-results-list/${this.initData.examObj?.categoryId??0}/${this.initData.examObj?.id}/0?backto=`+encodeURIComponent(a)),this.myNavigationWithQueryString(`/admin/student/classroom-details/${t.classroomObj.id}/0`,`?backto=${i}`)}toggleFullDescription(){this.checkFullDescription=!this.checkFullDescription}redirectToUpdateExam(){let t=`/admin/testbank/exam-results-list/${this.initData.examObj?.categoryId??0}/${this.initData.examObj?.id}/0`,i=this.commonService.getMyQueryParam("backto")??"";i&&(t=`/admin/testbank/exam-results-list/${this.initData.examObj?.categoryId??0}/${this.initData.examObj?.id}/0?backto=`+encodeURIComponent(i)),this.myNavigationWithQueryString(`/admin/testbank/update-exam/${this.initData.examObj?.categoryId??0}/${this.initData.examObj?.id}`,`?backto=${encodeURIComponent(t)}`)}constructor(t,i,a,r,s){super(),this.sAztDialogService=t,this.permissionService=i,this.sAztShowMonitorService=a,this.userService=r,this.fireStoreService=s,this.initData={studentsNotInClassResults:[]},this.classroomWithGroup=[],this.userList=[],this.isNotTestedYet=!1,this.loadingApi=!1,this.currentSelectedClassroomId=-1,this.examStudents=[],this.reloadApi=new e.vpe,this.isShowActions=!0,this.linkExam="",this.nextPage="",this.loadingObj={},this.allQuestionObjs=[],this.dataMixQuestionObjs=[],this.offlineMixQuestionObjs=[],this.isLoadingLib=!1,this.checkFullDescription=!1}ngOnInit(){let t=this.commonService.getCurrentDomain();this.linkExam=`${t}/de-thi/${this.initData.examObj?.hashId}`,super.ngOnInit()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(qi.C),e.Y36(pu.j),e.Y36(QB.p),e.Y36(ya.U),e.Y36(FB.j))},n.\u0275cmp=e.Xpm({type:n,selectors:[["menu-online-test"]],inputs:{initData:"initData",classroomWithGroup:"classroomWithGroup",userList:"userList",isNotTestedYet:"isNotTestedYet",loadingApi:"loadingApi",currentSelectedClassroomId:"currentSelectedClassroomId",examStudents:"examStudents"},outputs:{reloadApi:"reloadApi"},features:[e.qOj],decls:49,vars:32,consts:[[1,"box","p-3",2,"min-height","80vh"],[1,"document-info"],[1,"flex","md:items-center","flex-col","md:flex-row"],[1,"text-md","font-medium","truncate","mr-auto",3,"matTooltip","isDisabledTooltip","matTooltipDisabled"],["c","isDisabled"],[1,"w-auto","flex",2,"min-width","135px"],["azt-track-service","menu-online-test-e8RvVr3HPMz",1,"btn","btn-sm","btn-outline-primary",3,"cdkCopyToClipboard","click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-file","w-4","h-4","mr-2"],["x","9","y","9","width","13","height","13","rx","2","ry","2"],["d","M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"],[1,"pl-2","ml-2",3,"fileName","linkUrl"],[1,"flex","items-center","mt-2"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","mr-2"],["x","3","y","4","width","18","height","18","rx","2","ry","2"],["x1","16","y1","2","x2","16","y2","6"],["x1","8","y1","2","x2","8","y2","6"],["x1","3","y1","10","x2","21","y2","10"],[1,"text-sm"],["d","M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"],["cx","12","cy","7","r","4"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-layers","w-4","h-4","mr-2"],["d","M4 13.5V4a2 2 0 0 1 2-2h8.5L20 7.5V20a2 2 0 0 1-2 2h-5.5"],["points","14 2 14 8 20 8"],["d","M10.42 12.61a2.1 2.1 0 1 1 2.97 2.97L7.95 21 4 22l.99-3.95 5.43-5.44Z"],[3,"examObj",4,"ngIf"],["class","flex mt-2",4,"ngIf"],[3,"ngIf"],[1,"mt-2","text-center"],["azt-track-service","menu-online-test-JuzsQFkbn-n",1,"btn","btn-sm","btn-transparent","btn-outline-secondary",3,"click"],[4,"ngIf"],[3,"examObj"],[1,"flex","mt-2"],[3,"objectCodeType","objectCode","objectId","examWithPermissionObj"],[1,"azt-document-menu","mt-4"],[1,"text-md","font-bold"],[1,"dropdown-menu","show","relative","w-full","mt-2"],[1,"dropdown-content","bg-slate-100","dark:bg-darkmode-600"],[3,"ngStyle"],["azt-track-service","menu-online-test-gvg0oBjKoz0",1,"dropdown-item",3,"click"],["d","M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"],["cx","12","cy","12","r","3"],["azt-track-service","menu-online-test--xkt2Oho69C",1,"dropdown-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","mr-2","lucide"],["d","M3 3v18h18"],["d","m19 9-5 5-4-4-3 3"],["azt-track-service","menu-online-test-SyHOcHV1qRi",1,"dropdown-item",3,"click"],["cx","12","cy","10","r","8"],["cx","12","cy","10","r","3"],["d","M7 22h10"],["d","M12 22v-4"],[3,"ngStyle",4,"ngIf"],["azt-track-service","menu-online-test-353h1DUlYNc",1,"dropdown-item","text-danger",3,"click"],["d","M3 6h18"],["d","M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"],["d","M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"],["x1","10","y1","11","x2","10","y2","17"],["x1","14","y1","11","x2","14","y2","17"],[4,"ngIf","ngIfElse"],["doneLoading",""],["azt-track-service","menu-online-test-A5ZKlgHQbp",1,"dropdown-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide","mr-2"],["d","M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4"],["d","M2 15h10"],["d","m9 18 3-3-3-3"],[1,"azt-document-list-code","mt-4"],[1,"mt-4","flex","items-center",2,"height","66px"],[1,"mx-auto","w-8","h-8"],[1,"azt-document-who","mt-4"],[1,"flex","items-center"],["azt-track-service","menu-online-test-B-MAROi1YQ-","class","btn btn-outline-primary btn-sm btn-transparent ml-auto",3,"click",4,"ngIf"],[1,"mt-1"],["noClassroom",""],[1,"azt-document-content","mt-4"],["azt-track-service","menu-online-test-IOoMXZJczdx","class","btn btn-outline-primary btn-sm btn-transparent ml-auto",3,"click",4,"ngIf"],[1,"mt-2"],["azt-track-service","menu-online-test-WA9SAv4z5tk","class","btn-text-primary font-medium",3,"click",4,"ngIf"],["azt-track-service","menu-online-test-B-MAROi1YQ-",1,"btn","btn-outline-primary","btn-sm","btn-transparent","ml-auto",3,"click"],["d","M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"],["d","M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"],[3,"isExpandAll","classroomGroupData","clickToClassroomEmitter",4,"ngIf"],[3,"isExpandAll","classroomGroupData","clickToClassroomEmitter"],[1,"col-span-12","md:col-span-6"],[1,"btn","btn-outline-secondary","block","cursor-default","w-full"],["azt-track-service","menu-online-test-IOoMXZJczdx",1,"btn","btn-outline-primary","btn-sm","btn-transparent","ml-auto",3,"click"],["azt-track-service","menu-online-test-WA9SAv4z5tk",1,"btn-text-primary","font-medium",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","mr-2"],["d","M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],["x1","16","y1","13","x2","8","y2","13"],["x1","16","y1","17","x2","8","y2","17"],["x1","10","y1","9","x2","8","y2","9"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-5","h-5"],["points","18 15 12 9 6 15"],["points","6 9 12 15 18 9"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3,4),e._uU(5),e.qZA(),e.TgZ(6,"div",5)(7,"button",6),e.NdJ("click",function(){return i.showCopySuccess()}),e.O4$(),e.TgZ(8,"svg",7),e._UZ(9,"rect",8)(10,"path",9),e.qZA(),e._uU(11),e.ALo(12,"mytranslate"),e.qZA(),e.kcU(),e._UZ(13,"azt-download-qr-code",10),e.qZA()(),e.TgZ(14,"div",11),e.O4$(),e.TgZ(15,"svg",12),e._UZ(16,"rect",13)(17,"line",14)(18,"line",15)(19,"line",16),e.qZA(),e.kcU(),e.TgZ(20,"span",17),e._uU(21),e.ALo(22,"mytranslate"),e.ALo(23,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.qZA()(),e.TgZ(24,"div",11),e.O4$(),e.TgZ(25,"svg",12),e._UZ(26,"path",18)(27,"circle",19),e.qZA(),e.kcU(),e.TgZ(28,"span",17),e._uU(29),e.ALo(30,"mytranslate"),e.qZA()(),e.TgZ(31,"div",11),e.O4$(),e.TgZ(32,"svg",20),e._UZ(33,"path",21)(34,"polyline",22)(35,"path",23),e.qZA(),e.kcU(),e.TgZ(36,"span",17),e._uU(37),e.ALo(38,"mytranslate"),e.ALo(39,"number"),e.qZA()(),e.TgZ(40,"div",11),e.YNc(41,YB,1,1,"testbank-exam-price-box",24),e.qZA(),e.YNc(42,$B,2,4,"div",25),e.ALo(43,"viewPermission"),e.qZA(),e.YNc(44,r7,47,42,"ng-template",26),e.TgZ(45,"div",27)(46,"button",28),e.NdJ("click",function(){return i.toggleShowActions()}),e.YNc(47,s7,3,0,"span",29),e.YNc(48,l7,3,0,"span",29),e.qZA()()()),2&t){const a=e.MAs(4);e.xp6(3),e.s9C("matTooltip",null==i.initData.examObj?null:i.initData.examObj.name),e.s9C("matTooltip",null==i.initData.examObj?null:i.initData.examObj.name),e.Q6J("isDisabledTooltip",!1)("matTooltipDisabled",a.isDisabled),e.xp6(2),e.hij(" ",null==i.initData.examObj?null:i.initData.examObj.name," "),e.xp6(2),e.Q6J("cdkCopyToClipboard",i.copyLinkToClipboard()),e.xp6(4),e.hij(" ",e.lcZ(12,17,"lang_auto_copy_link")," "),e.xp6(2),e.Q6J("fileName","azota_exam_qr_code_"+(null==i.initData.examObj?null:i.initData.examObj.hashId))("linkUrl",i.copyLinkToClipboard()),e.xp6(8),e.hij(" ",e.lcZ(22,19,"lang_testbank_tested_list_date_create")+": "+e.lcZ(23,21,null==i.initData.examObj?null:i.initData.examObj.createdAt)," "),e.xp6(8),e.hij(" ",e.lcZ(30,23,"lang_auto_nguoi_tao")+": "+(null==i.initData.examCreatorObj?null:i.initData.examCreatorObj.fullName)," "),e.xp6(8),e.hij(" ",e.lcZ(38,25,"lang_testbank_tested_list_number_quizzes")+": "+(i.initData.totalAttended?i.initData.totalAttended:e.lcZ(39,27,0))," "),e.xp6(4),e.Q6J("ngIf",i.initData.examObj),e.xp6(1),e.Q6J("ngIf",e.xi3(43,29,i.initData.examObj,"exam")),e.xp6(2),e.Q6J("ngIf",i.isShowActions),e.xp6(3),e.Q6J("ngIf",i.isShowActions),e.xp6(1),e.Q6J("ngIf",!i.isShowActions)}},dependencies:[F.O5,F.PC,nh.i3,Ai.gM,o_.W,zs.Q,wi.n,jg.y,fw,GB,F.JJ,ye.JV,ye.Pf,ye.Z_,ye.J7,ye.PA,ye.CP,ye.$n],encapsulation:2}),n})();const Xx=function(n){return{"btn-primary":n}};function u7(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",14),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.changeViewHashId(r))}),e._uU(2),e.ALo(3,"formatOfflineExamHashIdToNumber"),e.qZA(),e.BQk()}if(2&n){const t=o.$implicit,i=e.oxw();e.xp6(1),e.Q6J("ngClass",e.VKq(4,Xx,(null==t?null:t.offlineMixQuestionHashId)==i.curOfflineMixQuestionObj.offlineMixQuestionHashId)),e.xp6(1),e.hij(" ",e.lcZ(3,2,null==t?null:t.offlineMixQuestionHashId)," ")}}function d7(n,o){1&n&&(e.TgZ(0,"span",20),e._uU(1),e.ALo(2,"mytranslate"),e.ALo(3,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"azt_lang_sugg_part_cc")+" "+e.lcZ(3,3,"azt_lang_sugg_type_multiple_choice")," "))}function m7(n,o){1&n&&(e.TgZ(0,"span",20),e._uU(1),e.ALo(2,"mytranslate"),e.ALo(3,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"azt_lang_sugg_part_cc")+" "+e.lcZ(3,3,"lang_testbank_true_false_quiz")," "))}function p7(n,o){1&n&&(e.TgZ(0,"span",20),e._uU(1),e.ALo(2,"mytranslate"),e.ALo(3,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"azt_lang_sugg_part_cc")+" "+e.lcZ(3,3,"lang_testbank_fill_number")," "))}function h7(n,o){1&n&&(e.TgZ(0,"span",20),e._uU(1),e.ALo(2,"mytranslate"),e.ALo(3,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"azt_lang_sugg_part_cc")+" "+e.lcZ(3,3,"azt_lang_sugg_type_essay")," "))}function A7(n,o){if(1&n&&(e.TgZ(0,"div",23)(1,"button",24),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&n){const t=o.$implicit,i=o.index;e.xp6(2),e.hij(" ",i+1+"-"+e.lcZ(3,1,null==t?null:t.answer)," ")}}function _7(n,o){if(1&n&&(e.TgZ(0,"div",21),e.YNc(1,A7,4,3,"div",22),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.offlineAnswerList)}}function f7(n,o){if(1&n&&(e.TgZ(0,"div",32)(1,"span",33),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.TgZ(4,"button",34),e._uU(5),e.ALo(6,"mytranslate"),e.qZA(),e.TgZ(7,"button",35),e._uU(8),e.ALo(9,"mytranslate"),e.qZA()()),2&n){const t=o.$implicit,i=o.index,a=e.oxw().$implicit;e.xp6(2),e.Oqu(e.lcZ(3,5,t.labelSubQuestion)+")"),e.xp6(2),e.Q6J("ngClass",e.VKq(11,Xx,a.answer.split("")[i]===t.labelTrue)),e.xp6(1),e.hij(" ",e.lcZ(6,7,"lang_auto_dung")," "),e.xp6(2),e.Q6J("ngClass",e.VKq(13,Xx,a.answer.split("")[i]===t.labelFalse)),e.xp6(1),e.hij(" ",e.lcZ(9,9,"lang_auto_sai")," ")}}function g7(n,o){if(1&n&&(e.TgZ(0,"div",27)(1,"div",28)(2,"div",29),e._uU(3),e.ALo(4,"mytranslate"),e.qZA(),e.TgZ(5,"div",30),e.YNc(6,f7,10,15,"div",31),e.qZA()()()),2&n){const t=o.index,i=e.oxw(2).$implicit,a=e.oxw();e.xp6(3),e.hij(" ",e.lcZ(4,2,"lang_auto_cau")+" "+(t+1+(a.data.resetQuestionIndex?0:i.startLabelIndex))," "),e.xp6(3),e.Q6J("ngForOf",a.offlineExamPartService.answerTrueFalseMap)}}function x7(n,o){if(1&n&&(e.TgZ(0,"div",25),e.YNc(1,g7,7,4,"div",26),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.offlineAnswerList)}}function b7(n,o){if(1&n&&(e.TgZ(0,"div")(1,"div",29),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.TgZ(4,"button",24),e._uU(5),e.qZA()()),2&n){const t=e.oxw(),i=t.index,a=t.$implicit,r=e.oxw(2).$implicit,s=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,2,"lang_auto_cau")+" "+(i+1+(s.data.resetQuestionIndex?0:r.startLabelIndex))," "),e.xp6(3),e.hij(" ",a.answer," ")}}function v7(n,o){if(1&n&&(e.TgZ(0,"div",37),e.YNc(1,b7,6,4,"div",38),e.qZA()),2&n){const t=e.oxw(2).$implicit,i=e.oxw();e.xp6(1),e.Q6J("ngIf",t.answerPartType===i.offlineAnswerType.fill)}}function w7(n,o){if(1&n&&(e.TgZ(0,"div",25),e.YNc(1,v7,2,1,"div",36),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.offlineAnswerList)}}function y7(n,o){if(1&n&&(e.TgZ(0,"div")(1,"div",29),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.TgZ(4,"button",24),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()()),2&n){const t=e.oxw().index,i=e.oxw(2).$implicit,a=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,2,"lang_auto_cau")+" "+(t+1+(a.data.resetQuestionIndex?0:i.startLabelIndex))," "),e.xp6(3),e.hij(" ",e.lcZ(6,4,"lang_core_essay_question")," ")}}function C7(n,o){if(1&n&&(e.TgZ(0,"div",37),e.YNc(1,y7,7,6,"div",38),e.qZA()),2&n){const t=e.oxw(2).$implicit,i=e.oxw();e.xp6(1),e.Q6J("ngIf",t.answerPartType===i.offlineAnswerType.essay)}}function T7(n,o){if(1&n&&(e.TgZ(0,"div",25),e.YNc(1,C7,2,1,"div",36),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.offlineAnswerList)}}function k7(n,o){if(1&n&&(e.TgZ(0,"div")(1,"div",15),e.YNc(2,d7,4,5,"span",16),e.YNc(3,m7,4,5,"span",16),e.YNc(4,p7,4,5,"span",16),e.YNc(5,h7,4,5,"span",16),e.qZA(),e.TgZ(6,"div",17),e.YNc(7,_7,2,1,"div",18),e.YNc(8,x7,2,1,"div",19),e.YNc(9,w7,2,1,"div",19),e.YNc(10,T7,2,1,"div",19),e.qZA()()),2&n){const t=o.$implicit,i=e.oxw();e.xp6(2),e.Q6J("ngIf",t.answerPartType===i.offlineAnswerType.multipleChoice),e.xp6(1),e.Q6J("ngIf",t.answerPartType===i.offlineAnswerType.trueFalse),e.xp6(1),e.Q6J("ngIf",t.answerPartType===i.offlineAnswerType.fill),e.xp6(1),e.Q6J("ngIf",t.answerPartType===i.offlineAnswerType.essay),e.xp6(2),e.Q6J("ngIf",t.answerPartType===i.offlineAnswerType.multipleChoice),e.xp6(1),e.Q6J("ngIf",t.answerPartType===i.offlineAnswerType.trueFalse),e.xp6(1),e.Q6J("ngIf",t.answerPartType===i.offlineAnswerType.fill),e.xp6(1),e.Q6J("ngIf",t.answerPartType===i.offlineAnswerType.essay)}}function S7(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",39)(1,"button",40),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.closeDialog())}),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()}2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"lang_auto_dong")," "))}const E7=function(){return[]};let gw=(()=>{class n extends mt.e{closeDialog(){this.isDialog&&this.dialogRef.close()}changeViewHashId(t){this.curOfflineMixQuestionObj=t,this.checkTotalQuestion()}checkTotalQuestion(){this.totalQuestionAnswer=this.curOfflineMixQuestionObj.offlineQuestionObjs?.length??0}updateCodeExam(){let t=this.commonService.getMyQueryParam("backto")??"";t&&t.includes("shareType")&&(this.backToLink=this.backToLink+"?backto="+encodeURIComponent(t)),this.myNavigationWithQueryString(`/admin/testbank/update-offline-exam-code/${this.examObj.categoryId??0}/${this.examObj.hashId}/${this.curOfflineMixQuestionObj.offlineMixQuestionId}`,`?backto=${encodeURIComponent(this.backToLink)}`),this.closeDialog()}ngOnInit(){this.checkTotalQuestion()}processData(t){const i={},a=[];t.offlineQuestionObjs.forEach(r=>{let s=i[r.answerType??0];s||(s={startLabelIndex:0,answerPartType:r.answerType??0,offlineAnswerList:[]},i[r.answerType??0]=s,a.push(s)),r.answerType==this.offlineAnswerType.trueFalse&&(r.answer=this.offlineExamPartService.convertAnswerTrueFalse(r.answer)),s.offlineAnswerList.push(r)}),this.offlineAnswerByPartList=a.filter(r=>r.offlineAnswerList.length>0),this.offlineAnswerByPartList.forEach((r,s)=>{s>0&&(r.startLabelIndex=this.offlineAnswerByPartList[s-1].startLabelIndex+this.offlineAnswerByPartList[s-1].offlineAnswerList.length)})}constructor(t,i,a){super(i,t),this.dialogRef=t,this.data=i,this.offlineExamPartService=a,this.isDialog=!1,this.totalQuestionAnswer=0,this.offlineAnswerType=XA.X,this.offlineAnswerByPartList=[],i&&(this.isDialog=i.isDialog,this.offlineExportObj=i.offlineExportObj,this.curOfflineMixQuestionObj=i.curOfflineMixQuestionObj,this.processData(this.curOfflineMixQuestionObj),this.backToLink=i.backToLink,this.examObj=this.offlineExportObj.examObj)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(U.so,8),e.Y36(U.WI,8),e.Y36(fm))},n.\u0275cmp=e.Xpm({type:n,selectors:[["preview-offline-exam"]],inputs:{isDialog:"isDialog",offlineExportObj:"offlineExportObj",curOfflineMixQuestionObj:"curOfflineMixQuestionObj",backToLink:"backToLink"},features:[e._Bn([fm]),e.qOj],decls:25,vars:19,consts:[[1,"box","py-4","px-4"],[1,"flex","items-center","mt-2"],[1,"text-md","font-medium","inline-block","mr-2"],[4,"ngFor","ngForOf"],[1,"btn","btn-outline-primary","btn-sm","btn-transparent","ml-auto",3,"click"],[1,"w-4","h-4","inline-block","mr-2"],["name","edit"],[1,"border","border-slate-200","dark:border-darkmode-400","mt-4","overflow-auto",2,"height","50vh"],["pointerEventsMethod","scrollbar",3,"visibility","autoHeightDisabled"],[1,"text-md","px-3","mt-3"],[1,"inline-block","ml-1"],[1,"lowercase"],[1,"p-3",2,"padding-right","0"],["class","text-right mt-4",4,"ngIf"],["azt-track-service","preview-offline-exam-Lnr2h-iZa9H",1,"btn","inline-block","border","border-slate-200","dark:border-darkmode-400","p-1","mr-2","text-center","w-12",3,"ngClass","click"],[1,"mt-5","mb-3"],["class","font-medium",4,"ngIf"],[1,"mt-4"],["class","flex items-center flex-wrap",4,"ngIf"],["class","grid grid-cols-12 gap-3 pr-3",4,"ngIf"],[1,"font-medium"],[1,"flex","items-center","flex-wrap"],["class","mr-3 mb-3 block-answer-offline h-full",4,"ngFor","ngForOf"],[1,"mr-3","mb-3","block-answer-offline","h-full"],[1,"btn","btn-sm","w-full","h-full"],[1,"grid","grid-cols-12","gap-3","pr-3"],["class","col-span-12 sm:col-span-4 lg:col-span-3",4,"ngFor","ngForOf"],[1,"col-span-12","sm:col-span-4","lg:col-span-3"],[1,"answer-item"],[1,"block-title","font-medium","text-xs","mr-3","mb-1"],[1,"mt-2"],["class","flex items-center mt-3",4,"ngFor","ngForOf"],[1,"flex","items-center","mt-3"],[1,"font-medium","mr-3"],[1,"btn","btn-sm","rounded-md","mr-3",2,"height","30px","line-height","30px","width","50px","font-weight","400",3,"ngClass"],[1,"btn","btn-sm","rounded-md",2,"height","30px","line-height","30px","width","50px","font-weight","400",3,"ngClass"],["class","col-span-6 md:col-span-3 lg:col-span-2",4,"ngFor","ngForOf"],[1,"col-span-6","md:col-span-3","lg:col-span-2"],[4,"ngIf"],[1,"text-right","mt-4"],["azt-track-service","preview-offline-exam-pMnvQqQQGlC",1,"btn","btn-outline-secondary","w-24",3,"click"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"span",2),e._uU(3),e.ALo(4,"mytranslate"),e.qZA(),e.YNc(5,u7,4,6,"ng-container",3),e.TgZ(6,"button",4),e.NdJ("click",function(){return i.updateCodeExam()}),e.TgZ(7,"span",5),e._UZ(8,"lucide-icon",6),e.qZA(),e._uU(9),e.ALo(10,"mytranslate"),e.qZA()(),e.TgZ(11,"div",7)(12,"ng-scrollbar",8)(13,"p",9),e._uU(14),e.ALo(15,"mytranslate"),e.TgZ(16,"span",10),e._uU(17),e.TgZ(18,"span",11),e._uU(19),e.ALo(20,"mytranslate"),e.qZA(),e._uU(21," ) "),e.qZA()(),e.TgZ(22,"div",12),e.YNc(23,k7,11,8,"div",3),e.qZA()()(),e.YNc(24,S7,4,3,"div",13),e.qZA()),2&t){let a;e.xp6(3),e.hij(" ",e.lcZ(4,10,"lang_auto_ma_de")+": "," "),e.xp6(2),e.Q6J("ngForOf",null!==(a=null==i.offlineExportObj?null:i.offlineExportObj.offlineMixQuestionObjs)&&void 0!==a?a:e.DdM(18,E7)),e.xp6(4),e.hij(" ",e.lcZ(10,12,"lang_auto_sua")," "),e.xp6(3),e.Q6J("visibility","hover")("autoHeightDisabled",!1),e.xp6(2),e.hij(" ",e.lcZ(15,14,"lang_auto_bang_dap_an")," "),e.xp6(3),e.hij(" (",i.totalQuestionAnswer," "),e.xp6(2),e.Oqu(e.lcZ(20,16,"lang_auto_cau")),e.xp6(4),e.Q6J("ngForOf",i.offlineAnswerByPartList),e.xp6(1),e.Q6J("ngIf",i.isDialog)}},dependencies:[F.mk,F.sg,F.O5,k.KC,_.Nh5,ye.JV,ye.Aw],encapsulation:2}),n})();function O7(n,o){if(1&n&&(e.TgZ(0,"div",24),e._UZ(1,"azt-share",25),e.qZA()),2&n){const t=e.oxw();let i;e.xp6(1),e.Q6J("objectCodeType",3)("objectCode","EXAM")("objectId",null!==(i=null==t.initData.examObj?null:t.initData.examObj.id)&&void 0!==i?i:0)("examWithPermissionObj",t.initData.examObj)}}function I7(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"a",35),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.openDeleteExam())}),e.O4$(),e.TgZ(1,"svg",6),e._UZ(2,"path",36)(3,"path",37)(4,"path",38)(5,"line",39)(6,"line",40),e.qZA(),e._uU(7),e.ALo(8,"mytranslate"),e.qZA()}2&n&&(e.xp6(7),e.hij(" ",e.lcZ(8,1,"lang_auto_xoa")," "))}function M7(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"a",41),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.redirectToSettingExamOffline())}),e.O4$(),e.TgZ(1,"svg",6),e._UZ(2,"path",42)(3,"circle",43),e.qZA(),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()}2&n&&(e.xp6(4),e.hij(" ",e.lcZ(5,1,"lang_auto_cai_dat")," "))}function L7(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"a",44),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.redirectToStatistical())}),e.O4$(),e.TgZ(1,"svg",45),e._UZ(2,"path",46)(3,"path",47),e.qZA(),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()}2&n&&(e.xp6(4),e.hij(" ",e.lcZ(5,1,"lang_auto_thong_ke")," "))}function B7(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"a",48),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.handleReturnOfflineShare(a.initData.examObj))}),e.O4$(),e.TgZ(2,"svg",49),e._UZ(3,"path",50)(4,"polyline",16)(5,"path",51)(6,"path",52),e.qZA(),e._uU(7),e.ALo(8,"mytranslate"),e.qZA()()}2&n&&(e.xp6(7),e.hij(" ",e.lcZ(8,1,"lang_auto_tra_ket_qua_thi_offline")," "))}function P7(n,o){1&n&&(e.ynx(0),e.TgZ(1,"div",53)(2,"div",54)(3,"span",55),e._UZ(4,"azt-loading-ui"),e.qZA()()(),e.BQk())}function Q7(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",63),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.openDialogExamConfig("whoAllow"))}),e.O4$(),e.TgZ(1,"svg",6),e._UZ(2,"path",64)(3,"path",65),e.qZA(),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()}2&n&&(e.xp6(4),e.hij(" ",e.lcZ(5,1,"lang_auto_sua")," "))}function F7(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"azt-list-classroom-view-for-small-box",67),e.NdJ("clickToClassroomEmitter",function(a){e.CHM(t);const r=e.oxw(4);return e.KtG(r.clickToClassroomEvent(a))}),e.qZA()}if(2&n){const t=e.oxw(4);e.Q6J("isExpandAll",!1)("classroomGroupData",t.classroomWithGroup)}}function N7(n,o){if(1&n&&(e.ynx(0),e.YNc(1,F7,1,2,"azt-list-classroom-view-for-small-box",66),e.BQk()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.classroomWithGroup)}}function Z7(n,o){1&n&&(e.TgZ(0,"div",68)(1,"a",69),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"lang_auto_tat_ca_moi_nguoi")," "))}function D7(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",70),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.redirectToAddCodeExam())}),e.TgZ(1,"span",71),e._UZ(2,"lucide-icon",72),e.qZA(),e._uU(3),e.ALo(4,"mytranslate"),e.qZA()}2&n&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"lang_auto_sua")," "))}function U7(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",74)(1,"button",75),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw(4);return e.KtG(s.openDialogPreview(r))}),e.O4$(),e.TgZ(2,"svg",76),e._UZ(3,"path",77)(4,"polyline",16)(5,"line",78)(6,"line",79)(7,"line",80),e.qZA(),e._uU(8),e.ALo(9,"mytranslate"),e.ALo(10,"formatOfflineExamHashIdToNumber"),e.qZA()()}if(2&n){const t=o.$implicit;e.xp6(8),e.AsE(" ",e.lcZ(9,2,"lang_auto_ma_de")," ",e.xi3(10,4,t.offlineMixQuestionHashId,3)," ")}}const j7=function(){return[]};function q7(n,o){if(1&n&&(e.ynx(0),e.YNc(1,U7,11,7,"div",73),e.BQk()),2&n){const t=e.oxw(3);let i;e.xp6(1),e.Q6J("ngForOf",null!==(i=null==t.offlineExportObj?null:t.offlineExportObj.offlineMixQuestionObjs)&&void 0!==i?i:e.DdM(1,j7))}}function R7(n,o){}function z7(n,o){if(1&n&&(e.TgZ(0,"div",56)(1,"div",2)(2,"h3",27),e._uU(3),e.ALo(4,"mytranslate"),e.qZA(),e.YNc(5,Q7,6,3,"button",57),e.ALo(6,"editPermission"),e.ALo(7,"configPermission"),e.qZA(),e.TgZ(8,"div",58),e.YNc(9,N7,2,1,"ng-container",33),e.YNc(10,Z7,4,3,"ng-template",null,59,e.W1O),e.qZA()(),e.TgZ(12,"div",53)(13,"div",2)(14,"h3",27),e._uU(15),e.ALo(16,"mytranslate"),e.qZA(),e.YNc(17,D7,5,3,"button",60),e.ALo(18,"editPermission"),e.ALo(19,"isOfflineExamWithCustomMixMark"),e.qZA(),e.TgZ(20,"div",61),e.YNc(21,q7,2,2,"ng-container",33),e.YNc(22,R7,0,0,"ng-template",null,62,e.W1O),e.qZA()()),2&n){const t=e.MAs(11),i=e.MAs(23),a=e.oxw(2);e.xp6(3),e.hij(" ",e.lcZ(4,8,"lang_auto_giao_cho")," "),e.xp6(2),e.Q6J("ngIf",e.xi3(6,10,a.initData.examObj,"exam")||e.xi3(7,13,a.initData.examObj,"exam")),e.xp6(4),e.Q6J("ngIf",2==(null==a.initData.examObj?null:a.initData.examObj.whoAllow)||3==(null==a.initData.examObj?null:a.initData.examObj.whoAllow))("ngIfElse",t),e.xp6(6),e.hij(" ",e.lcZ(16,16,"lang_auto_noi_dung")," "),e.xp6(2),e.Q6J("ngIf",e.xi3(18,18,a.initData.examObj,"exam")&&e.lcZ(19,21,a.initData.examObj)),e.xp6(4),e.Q6J("ngIf",(null==a.offlineExportObj||null==a.offlineExportObj.offlineMixQuestionObjs?null:a.offlineExportObj.offlineMixQuestionObjs.length)&&!a.loadingApi)("ngIfElse",i)}}function H7(n,o){if(1&n&&(e.TgZ(0,"div",26)(1,"h3",27),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.TgZ(4,"div",28)(5,"ul",29)(6,"li"),e.YNc(7,I7,9,3,"a",30),e.ALo(8,"deletePermission"),e.qZA(),e.TgZ(9,"li"),e.YNc(10,M7,6,3,"a",31),e.ALo(11,"editPermission"),e.qZA(),e.TgZ(12,"li"),e.YNc(13,L7,6,3,"a",32),e.ALo(14,"statisticalPermission"),e.qZA(),e.YNc(15,B7,9,3,"li",22),e.ALo(16,"viewPermission"),e.qZA()()(),e.YNc(17,P7,5,0,"ng-container",33),e.YNc(18,z7,24,23,"ng-template",null,34,e.W1O)),2&n){const t=e.MAs(19),i=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,7,"lang_auto_menu")," "),e.xp6(5),e.Q6J("ngIf",e.xi3(8,9,i.initData.examObj,"exam")),e.xp6(3),e.Q6J("ngIf",e.xi3(11,12,i.initData.examObj,"exam")),e.xp6(3),e.Q6J("ngIf",e.xi3(14,15,i.initData.examObj,"exam")),e.xp6(2),e.Q6J("ngIf",!i.isNotTestedYet&&e.xi3(16,18,i.initData.examObj,"exam")),e.xp6(2),e.Q6J("ngIf",i.loadingApi)("ngIfElse",t)}}function J7(n,o){1&n&&(e.TgZ(0,"span"),e.O4$(),e.TgZ(1,"svg",81),e._UZ(2,"polyline",82),e.qZA()())}function K7(n,o){1&n&&(e.TgZ(0,"span"),e.O4$(),e.TgZ(1,"svg",81),e._UZ(2,"polyline",83),e.qZA()())}function G7(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"azt-preview-exam",84),e.NdJ("closeDialog",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.closeDialogPreviewExam(a))}),e.qZA()}}let Y7=(()=>{class n extends xe.Q{toggleShowActions(){this.isShowActions=!this.isShowActions}openDialogExamConfig(t){this.sAztDialogService.open(hw.Y,{width:"900px",data:{hashId:this.initData.examObj?.hashId,examStudents:this.examStudents},restoreFocus:!1}).afterClosed().subscribe(a=>{a&&(this.initData.examObj={...a,editable:!0,allowStudentView:!0,permissionObj:{}},this.reloadApi.emit())})}openDialogPreview(t){if(this.offlineExportObj&&this.initData.examObj&&this.offlineExportObj.offlineMixQuestionObjs?.length){let i=this.commonService.myClone(this.offlineExportObj);i.offlineMixQuestionObjs=new Array,i.offlineMixQuestionObjs.push(t),this.sAztDialogService.open(gw,{width:"766px",data:{isDialog:!0,offlineExportObj:i,curOfflineMixQuestionObj:t,backToLink:`/admin/testbank/exam-results-list/${i.examObj?.categoryId??0}/${i.examObj?.id}/0`,resetQuestionIndex:this.offlineExportObj.resetQuestionIndex??!0},restoreFocus:!1})}}openDialogWaring(t){this.commonService.getTranslate(t).subscribe(i=>{this.sAztDialogService.open(oh.C,{data:{isShow:!0,content:i},restoreFocus:!1,width:"500px"})})}closeDialogPreviewExam(t){this.examDetailDialog={obj:void 0,isShow:!1}}openDeleteExam(){this.permissionService.hasViewPermission("exam",this.initData.examObj)?this.sAztDialogService.open(Wx,{data:{examObj:this.initData.examObj,isShow:!0},restoreFocus:!1}).afterClosed().subscribe(r=>{r&&this.commonService.myNavigation("/admin/testbank/document-management/0/0/1")}):this.commonService.getTranslate("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay").subscribe(i=>{this.openDialogWaring("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay")})}closeDeleteExam(t){t?(this.dataDeleteDialog={obj:void 0,type:0,isShow:!1},this.commonService.myNavigation("/admin/testbank/document-management/0/0/1")):this.dataDeleteDialog={obj:void 0,type:0,isShow:!1}}handleReturnOfflineShare(t){t?this.permissionService.hasViewPermission("exam",t)?this.sAztDialogService.open(Dx.h,{width:"1000px",data:{examHashId:t.hashId,useDialog:!0},restoreFocus:!1}):this.showErrorSnack("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay"):this.showErrorSnack("lang_core_invalid_data")}redirectToSettingExamOffline(){if(this.permissionService.hasEditPermission("exam",this.initData.examObj)){let i=`/admin/testbank/exam-results-list/${this.initData.examObj?.categoryId??0}/${this.initData.examObj?.id}/0`,a=this.commonService.getMyQueryParam("backto")??"";a&&(i=`/admin/testbank/exam-results-list/${this.initData.examObj?.categoryId??0}/${this.initData.examObj?.id}/0?backto=`+encodeURIComponent(a)),this.myNavigationWithQueryString(`/admin/testbank/config-exam-offline/${this.initData.examObj?.categoryId??0}/${this.initData.examObj?.hashId}`,`?backto=${encodeURIComponent(i)}`)}else this.openDialogWaring("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay")}redirectToStatistical(){if(this.permissionService.hasStatisticalPermission("exam",this.initData.examObj)){let i=`/admin/testbank/exam-results-list/${this.initData.examObj?.categoryId??0}/${this.initData.examObj?.id}/0`,a=this.commonService.getMyQueryParam("backto")??"";a&&(i=`/admin/testbank/exam-results-list/${this.initData.examObj?.categoryId??0}/${this.initData.examObj?.id}/0?backto=`+encodeURIComponent(a)),this.commonService.myNavigationWithQueryString(`/admin/testbank/statistic/${this.initData.examObj?.categoryId?this.initData.examObj.categoryId:0}/${this.initData.examObj?.id}`,"?backto="+encodeURIComponent(i))}else this.openDialogWaring("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay")}clickToClassroomEvent(t){let i=`/admin/testbank/exam-results-list/${this.initData.examObj?.categoryId??0}/${this.initData.examObj?.id}/0`,a=this.commonService.getMyQueryParam("backto")??"";a&&(i=`/admin/testbank/exam-results-list/${this.initData.examObj?.categoryId??0}/${this.initData.examObj?.id}/0?backto=`+encodeURIComponent(a)),this.myNavigationWithQueryString(`/admin/student/classroom-details/${t.classroomObj.id}/0`,`?backto=${i}`)}redirectToAddCodeExam(){let t=`/admin/testbank/exam-results-list/${this.initData.examObj?.categoryId??0}/${this.initData.examObj?.id}/0`,i=this.commonService.getMyQueryParam("backto")??"";i&&(t=`/admin/testbank/exam-results-list/${this.initData.examObj?.categoryId??0}/${this.initData.examObj?.id}/0?backto=`+encodeURIComponent(i)),this.myNavigationWithQueryString(`/admin/testbank/update-offline-exam/${this.initData.examObj?.categoryId??0}/${this.initData.examObj?.hashId}`,`?backto=${encodeURIComponent(t)}`)}getAnswerOffline(t){this.initStatusObj(),this.waitDestroy(this.offlineExamExportService.apiOfflineExamExportExportResultOfAllOfflineMixQuestionHashIdGet(t).subscribe(i=>{1==i.success?(this.offlineExportObj=i.data?.obj,this.successStatusObj()):this.errorStatusObj(i.message??"",!0)}))}constructor(t,i,a){super(),this.sAztDialogService=t,this.offlineExamExportService=i,this.permissionService=a,this.initData={studentsNotInClassResults:[]},this.classroomWithGroup=[],this.isNotTestedYet=!1,this.loadingApi=!0,this.examStudents=[],this.reloadApi=new e.vpe,this.examDetailDialog={obj:void 0,curCateId:-1,isOnLib:-1,isShow:!1},this.dataDeleteDialog={obj:void 0,type:0,isShow:!1},this.linkExam="",this.isShowActions=!0,this.dataDialogWarning={isShow:!1,content:""}}ngOnInit(){super.ngOnInit();let t=this.commonService.getCurrentDomain();this.linkExam=`${t}/de-thi/${this.initData.examObj?.hashId}`}ngOnChanges(){!this.loadingApi&&this.initData.examObj?.hashId&&this.getAnswerOffline(this.initData.examObj?.hashId)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(qi.C),e.Y36(Za.qr),e.Y36(pu.j))},n.\u0275cmp=e.Xpm({type:n,selectors:[["menu-offline-test"]],inputs:{initData:"initData",classroomWithGroup:"classroomWithGroup",isNotTestedYet:"isNotTestedYet",loadingApi:"loadingApi",examStudents:"examStudents"},outputs:{reloadApi:"reloadApi"},features:[e.qOj,e.TTD],decls:40,vars:26,consts:[[1,"box","p-3","h-full","lg:h-auto",2,"min-height","80vh"],[1,"document-info"],[1,"flex","items-center"],[1,"text-md","font-medium","truncate","mr-auto","mt-2",2,"max-width","90%",3,"matTooltip","isDisabledTooltip","matTooltipDisabled"],["c","isDisabled"],[1,"flex","items-center","mt-2"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","mr-2"],["x","3","y","4","width","18","height","18","rx","2","ry","2"],["x1","16","y1","2","x2","16","y2","6"],["x1","8","y1","2","x2","8","y2","6"],["x1","3","y1","10","x2","21","y2","10"],[1,"text-sm"],["d","M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"],["cx","12","cy","7","r","4"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-layers","w-4","h-4","mr-2"],["d","M4 13.5V4a2 2 0 0 1 2-2h8.5L20 7.5V20a2 2 0 0 1-2 2h-5.5"],["points","14 2 14 8 20 8"],["d","M10.42 12.61a2.1 2.1 0 1 1 2.97 2.97L7.95 21 4 22l.99-3.95 5.43-5.44Z"],["class","flex mt-2",4,"ngIf"],[3,"ngIf"],[1,"mt-2","text-center"],["azt-track-service","menu-offline-test-C7d866E60NA",1,"btn","btn-sm","btn-transparent","btn-outline-secondary",3,"click"],[4,"ngIf"],[3,"closeDialog",4,"ngIf"],[1,"flex","mt-2"],[3,"objectCodeType","objectCode","objectId","examWithPermissionObj"],[1,"azt-document-menu","mt-4"],[1,"text-md","font-bold"],[1,"dropdown-menu","show","relative","w-full","mt-2"],[1,"dropdown-content","bg-slate-100","dark:bg-darkmode-600"],["azt-track-service","menu-offline-test-v0ibVgHaHZp","class","dropdown-item text-danger",3,"click",4,"ngIf"],["azt-track-service","menu-offline-test-boVa6dq1W1j","class","dropdown-item",3,"click",4,"ngIf"],["azt-track-service","menu-offline-test-C_QDr7XeJG-","class","dropdown-item",3,"click",4,"ngIf"],[4,"ngIf","ngIfElse"],["doneLoading",""],["azt-track-service","menu-offline-test-v0ibVgHaHZp",1,"dropdown-item","text-danger",3,"click"],["d","M3 6h18"],["d","M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"],["d","M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"],["x1","10","y1","11","x2","10","y2","17"],["x1","14","y1","11","x2","14","y2","17"],["azt-track-service","menu-offline-test-boVa6dq1W1j",1,"dropdown-item",3,"click"],["d","M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"],["cx","12","cy","12","r","3"],["azt-track-service","menu-offline-test-C_QDr7XeJG-",1,"dropdown-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","mr-2","lucide"],["d","M3 3v18h18"],["d","m19 9-5 5-4-4-3 3"],["azt-track-service","menu-offline-test-yp0Mu41Mr",1,"dropdown-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide","mr-2"],["d","M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4"],["d","M2 15h10"],["d","m9 18 3-3-3-3"],[1,"azt-document-list-code","mt-4"],[1,"mt-4","flex","items-center",2,"height","66px"],[1,"mx-auto","w-8","h-8"],[1,"azt-document-who","mt-4"],["azt-track-service","menu-offline-test-l07YIWF2M_z","class","btn btn-outline-primary btn-sm btn-transparent ml-auto",3,"click",4,"ngIf"],[1,"mt-1"],["noClassroom",""],["azt-track-service","menu-offline-test-Q_qGX1X8E2W","class","btn btn-outline-primary btn-sm btn-transparent ml-auto",3,"click",4,"ngIf"],[1,"grid","grid-cols-12","gap-3","mt-3"],["noExamOffline",""],["azt-track-service","menu-offline-test-l07YIWF2M_z",1,"btn","btn-outline-primary","btn-sm","btn-transparent","ml-auto",3,"click"],["d","M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"],["d","M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"],[3,"isExpandAll","classroomGroupData","clickToClassroomEmitter",4,"ngIf"],[3,"isExpandAll","classroomGroupData","clickToClassroomEmitter"],[1,"col-span-12","md:col-span-6"],[1,"btn","btn-outline-secondary","block","cursor-default","w-full"],["azt-track-service","menu-offline-test-Q_qGX1X8E2W",1,"btn","btn-outline-primary","btn-sm","btn-transparent","ml-auto",3,"click"],[1,"w-4","h-4","inline-block","mr-2"],["name","edit"],["class","col-span-6",4,"ngFor","ngForOf"],[1,"col-span-6"],["azt-track-service","menu-offline-test-Md6K9sfq64w",1,"btn-text-primary","font-medium",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","mr-2"],["d","M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],["x1","16","y1","13","x2","8","y2","13"],["x1","16","y1","17","x2","8","y2","17"],["x1","10","y1","9","x2","8","y2","9"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-5","h-5"],["points","18 15 12 9 6 15"],["points","6 9 12 15 18 9"],[3,"closeDialog"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3,4),e._uU(5),e.qZA()(),e.TgZ(6,"div",5),e.O4$(),e.TgZ(7,"svg",6),e._UZ(8,"rect",7)(9,"line",8)(10,"line",9)(11,"line",10),e.qZA(),e.kcU(),e.TgZ(12,"span",11),e._uU(13),e.ALo(14,"mytranslate"),e.ALo(15,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.qZA()(),e.TgZ(16,"div",5),e.O4$(),e.TgZ(17,"svg",6),e._UZ(18,"path",12)(19,"circle",13),e.qZA(),e.kcU(),e.TgZ(20,"span",11),e._uU(21),e.ALo(22,"mytranslate"),e.qZA()(),e.TgZ(23,"div",5),e.O4$(),e.TgZ(24,"svg",14),e._UZ(25,"path",15)(26,"polyline",16)(27,"path",17),e.qZA(),e.kcU(),e.TgZ(28,"span",11),e._uU(29),e.ALo(30,"mytranslate"),e.ALo(31,"number"),e.qZA()(),e.YNc(32,O7,2,4,"div",18),e.ALo(33,"viewPermission"),e.qZA(),e.YNc(34,H7,20,21,"ng-template",19),e.TgZ(35,"div",20)(36,"button",21),e.NdJ("click",function(){return i.toggleShowActions()}),e.YNc(37,J7,3,0,"span",22),e.YNc(38,K7,3,0,"span",22),e.qZA()()(),e.YNc(39,G7,1,0,"azt-preview-exam",23)),2&t){const a=e.MAs(4);e.xp6(3),e.s9C("matTooltip",null==i.initData.examObj?null:i.initData.examObj.name),e.s9C("matTooltip",null==i.initData.examObj?null:i.initData.examObj.name),e.Q6J("isDisabledTooltip",!1)("matTooltipDisabled",a.isDisabled),e.xp6(2),e.hij(" ",null==i.initData.examObj?null:i.initData.examObj.name," "),e.xp6(8),e.hij(" ",e.lcZ(14,13,"lang_testbank_tested_list_date_create")+": "+e.lcZ(15,15,null==i.initData.examObj?null:i.initData.examObj.createdAt)," "),e.xp6(8),e.hij(" ",e.lcZ(22,17,"lang_auto_nguoi_tao")+": "+(null==i.initData.examCreatorObj?null:i.initData.examCreatorObj.fullName)," "),e.xp6(8),e.hij(" ",e.lcZ(30,19,"lang_testbank_tested_list_number_quizzes")+": "+(i.initData.totalAttended?i.initData.totalAttended:e.lcZ(31,21,0))," "),e.xp6(3),e.Q6J("ngIf",e.xi3(33,23,i.initData.examObj,"exam")),e.xp6(2),e.Q6J("ngIf",i.isShowActions),e.xp6(3),e.Q6J("ngIf",i.isShowActions),e.xp6(1),e.Q6J("ngIf",!i.isShowActions),e.xp6(1),e.Q6J("ngIf",i.examDetailDialog.isShow)}},dependencies:[F.sg,F.O5,Ai.gM,Aw.H,zs.Q,wi.n,jg.y,fw,_.Nh5,F.JJ,ye.JV,ye.Pf,ye.Z_,ye.J7,ye.PA,ye.Fb,ye.Aw,ye.CP,ye.$n],encapsulation:2}),n})();function $7(n,o){if(1&n&&(e.O4$(),e.kcU(),e.TgZ(0,"span",23)(1,"span",24),e._uU(2),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.Oqu(t.examResultFilterService.totalCustomFilter)}}function V7(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1,"\xa0"),e.TgZ(2,"span",27),e._uU(3),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(3),e.Oqu(t.examResultFilterService.totalCustomFilter)}}function W7(n,o){if(1&n&&(e.O4$(),e.kcU(),e.TgZ(0,"span",25),e._uU(1),e.ALo(2,"mytranslate"),e.YNc(3,V7,4,1,"span",26),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij(" ",e.lcZ(2,2,"lang_testbank_tested_list_sort")," "),e.xp6(2),e.Q6J("ngIf",t.examResultFilterService.totalCustomFilter>0)}}let X7=(()=>{class n extends xe.Q{changeFilter(){this.examResultFilterService.saveFilterObj(),this.changeFilterEvent.emit(this.examResultFilterService.filterObj)}clearFilter(){this.examResultFilterService.clearFilter(),this.changeFilter()}ngOnInit(){super.ngOnInit()}constructor(t){super(),this.examResultFilterService=t,this.changeFilterEvent=new e.vpe}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Yx))},n.\u0275cmp=e.Xpm({type:n,selectors:[["testbank-exam-result-filter-menu"]],outputs:{changeFilterEvent:"changeFilterEvent"},features:[e.qOj],decls:44,vars:25,consts:[[1,"btn","btn-sm","relative",3,"matMenuTriggerFor"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-search","w-4","h-4","mr-0","md:mr-1"],["points","22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"],["class","sm:hidden tooltip w-4 h-4 flex items-center justify-center absolute rounded-full bg-primary right-0 top-0 -mr-2 -mt-2",4,"ngIf"],["class","azt-hidden sm:block",4,"ngIf"],["xPosition","before"],["filterMenu","matMenu"],[1,"dropdown-menu","show","relative","w-64"],[1,"dropdown-content"],["azt-track-service","filter-menu-Csh-AtPhLM","for","isMarked",1,"dropdown-item","cursor-pointer",3,"click"],[1,"form-check","form-switch","ml-auto"],["id","isMarked","type","checkbox",1,"show-code","form-check-input","ml-2",3,"checked","change"],["azt-track-service","filter-menu-jvAvKjPSPr","for","isNotMarked",1,"dropdown-item","cursor-pointer",3,"click"],["id","isNotMarked","type","checkbox",1,"show-code","form-check-input","ml-2",3,"checked","change"],["azt-track-service","filter-menu-WpYAtInmdW","for","isOnTest",1,"dropdown-item","cursor-pointer",3,"click"],["id","isOnTest","type","checkbox",1,"show-code","form-check-input","ml-2",3,"checked","change"],["azt-track-service","filter-menu-qExv_PlJpt","for","isNotTested",1,"dropdown-item","cursor-pointer",3,"click"],["id","isNotTested","type","checkbox",1,"show-code","form-check-input","ml-2",3,"checked","change"],[1,"dropdown-divider"],[1,"flex","p-1"],[1,"btn","btn-secondary","py-1","px-2","ml-auto","mr-2"],["azt-track-service","filter-menu-ezDcdMX5-k",3,"click"],["azt-track-service","filter-menu-B7m4rnfcVw1",1,"btn","btn-danger","py-1","px-2",3,"click"],[1,"sm:hidden","tooltip","w-4","h-4","flex","items-center","justify-center","absolute","rounded-full","bg-primary","right-0","top-0","-mr-2","-mt-2"],[1,"rounded-full","bg-primary","text-white","cursor-pointer","font-medium"],[1,"azt-hidden","sm:block"],[4,"ngIf"],[1,"py-1","px-2","rounded-full","text-xs","bg-primary","text-white","cursor-pointer","font-medium"]],template:function(t,i){if(1&t&&(e.TgZ(0,"button",0),e.O4$(),e.TgZ(1,"svg",1),e._UZ(2,"polygon",2),e.qZA(),e.YNc(3,$7,3,1,"span",3),e.YNc(4,W7,4,4,"span",4),e.qZA(),e.kcU(),e.TgZ(5,"mat-menu",5,6)(7,"div",7)(8,"ul",8)(9,"li")(10,"label",9),e.NdJ("click",function(r){return r.stopPropagation()}),e._uU(11),e.ALo(12,"mytranslate"),e.TgZ(13,"div",10)(14,"input",11),e.NdJ("change",function(){return i.examResultFilterService.filterObj.isMarked=!i.examResultFilterService.filterObj.isMarked,i.changeFilter()}),e.qZA()()()(),e.TgZ(15,"li")(16,"label",12),e.NdJ("click",function(r){return r.stopPropagation()}),e._uU(17),e.ALo(18,"mytranslate"),e.TgZ(19,"div",10)(20,"input",13),e.NdJ("change",function(){return i.examResultFilterService.filterObj.isNotMarked=!i.examResultFilterService.filterObj.isNotMarked,i.changeFilter()}),e.qZA()()()(),e.TgZ(21,"li")(22,"label",14),e.NdJ("click",function(r){return r.stopPropagation()}),e._uU(23),e.ALo(24,"mytranslate"),e.TgZ(25,"div",10)(26,"input",15),e.NdJ("change",function(){return i.examResultFilterService.filterObj.isOnTest=!i.examResultFilterService.filterObj.isOnTest,i.changeFilter()}),e.qZA()()()(),e.TgZ(27,"li")(28,"label",16),e.NdJ("click",function(r){return r.stopPropagation()}),e._uU(29),e.ALo(30,"mytranslate"),e.TgZ(31,"div",10)(32,"input",17),e.NdJ("change",function(){return i.examResultFilterService.filterObj.isNotTested=!i.examResultFilterService.filterObj.isNotTested,i.changeFilter()}),e.qZA()()()(),e.TgZ(33,"li"),e._UZ(34,"hr",18),e.qZA(),e.TgZ(35,"li")(36,"div",19)(37,"button",20),e._uU(38),e.ALo(39,"mytranslate"),e.qZA(),e.TgZ(40,"div",21),e.NdJ("click",function(r){return r.stopPropagation()}),e.TgZ(41,"button",22),e.NdJ("click",function(){return i.clearFilter()}),e._uU(42),e.ALo(43,"mytranslate"),e.qZA()()()()()()()),2&t){const a=e.MAs(6);e.Q6J("matMenuTriggerFor",a),e.xp6(3),e.Q6J("ngIf",i.examResultFilterService.totalCustomFilter>0),e.xp6(1),e.Q6J("ngIf",!i.isMobileWebView),e.xp6(7),e.hij(" ",e.lcZ(12,13,"lang_testbank_tested_list_show_student_marking")," "),e.xp6(3),e.Q6J("checked",i.examResultFilterService.filterObj.isMarked),e.xp6(3),e.hij(" ",e.lcZ(18,15,"lang_testbank_tested_list_student_not_marking")," "),e.xp6(3),e.Q6J("checked",i.examResultFilterService.filterObj.isNotMarked),e.xp6(3),e.hij(" ",e.lcZ(24,17,"lang_testbank_tested_list_show_student_taking_exam")," "),e.xp6(3),e.Q6J("checked",i.examResultFilterService.filterObj.isOnTest),e.xp6(3),e.hij(" ",e.lcZ(30,19,"lang_testbank_tested_list_show_student_not_yet_exam")," "),e.xp6(3),e.Q6J("checked",i.examResultFilterService.filterObj.isNotTested),e.xp6(6),e.Oqu(e.lcZ(39,21,"lang_button_close")),e.xp6(4),e.Oqu(e.lcZ(43,23,"lang_button_delete"))}},dependencies:[F.O5,Qi.VK,Qi.p6,ye.JV],encapsulation:2}),n})();var eP=I(30073);function tP(n,o){1&n&&(e.TgZ(0,"span"),e.O4$(),e.TgZ(1,"svg",9),e._UZ(2,"path",10)(3,"path",11),e.qZA()())}function nP(n,o){1&n&&(e.TgZ(0,"span",12),e.O4$(),e.TgZ(1,"svg",13),e._UZ(2,"path",14)(3,"path",15),e.qZA()())}function iP(n,o){1&n&&(e.TgZ(0,"span"),e.O4$(),e.TgZ(1,"svg",21),e._UZ(2,"path",22),e.qZA()())}function oP(n,o){1&n&&(e.TgZ(0,"span"),e.O4$(),e.TgZ(1,"svg",23),e._UZ(2,"path",24),e.qZA()())}function aP(n,o){if(1&n&&(e.TgZ(0,"span",33),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.countSubmitted)}}function rP(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",25)(2,"div",26),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw(2).$implicit,l=e.oxw();return e.KtG(l.clickToClassroomEvent({classroomGroupObj:s.groupObj,classroomObj:r}))}),e.TgZ(3,"div",27)(4,"div",28)(5,"span",29),e._uU(6),e.ALo(7,"slice"),e.YNc(8,aP,2,1,"span",30),e.qZA()(),e.TgZ(9,"div",31)(10,"span",32),e._uU(11),e.ALo(12,"mytranslate"),e.qZA()()()()(),e.BQk()}if(2&n){const t=o.$implicit,i=e.oxw(3);e.xp6(1),e.Q6J("hidden",!t.isShowClassroom),e.uIk("class",i.classroomGridCss),e.xp6(4),e.s9C("matTooltip",t.name.length>30?t.name:""),e.xp6(1),e.hij(" ",t.name.length>30?e.Dn7(7,6,t.name,0,28)+"..":t.name," "),e.xp6(2),e.Q6J("ngIf",t.countSubmitted>0),e.xp6(3),e.hij(" ",e.lcZ(12,10,"lang_auto_si_so")+": "+t.countStudents," ")}}function sP(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",17)(1,"div")(2,"span",18),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,r=e.oxw();return e.KtG(r.collapseByGroupId(a.groupObj))}),e.YNc(3,iP,3,0,"span",4),e.YNc(4,oP,3,0,"span",4),e.TgZ(5,"h2",19),e._uU(6),e.ALo(7,"mytranslate"),e.ALo(8,"mytranslate"),e.qZA()()(),e.TgZ(9,"div",20),e.YNc(10,rP,13,12,"ng-container",8),e.qZA()()}if(2&n){const t=e.oxw().$implicit;e.xp6(3),e.Q6J("ngIf",t.groupObj.isExpand),e.xp6(1),e.Q6J("ngIf",!t.groupObj.isExpand),e.xp6(2),e.AsE("",e.lcZ(7,6,t.groupObj.name)," ","("+t.groupObj.totalViewClassrooms+" "+e.lcZ(8,8,"lang_testbank_test_list_classes")+")",""),e.xp6(3),e.Q6J("hidden",!t.groupObj.isExpand),e.xp6(1),e.Q6J("ngForOf",t.classroomObjs)}}function lP(n,o){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,sP,11,10,"div",16),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",t.groupObj.isShowGroup)}}let cP=(()=>{class n extends _w.w{ngOnInit(){super.ngOnInit()}constructor(){super(),this.classroomGridCss="col-span-12 md:col-span-4 lg:col-span-3",this.removeFreeDomClassroom=!1}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["azt-list-classroom-view-for-tested-list"]],features:[e.qOj],decls:10,vars:9,consts:[[1,"flex","items-center"],[1,"w-full"],[3,"isServerSearch","placeholder","onSearch"],["azt-track-service","azt-list-classroom-view-Cg6k1znbH",1,"clickable",3,"click"],[4,"ngIf"],["class","clickable",4,"ngIf"],[1,"overflow-auto","p-2","mt-2","border-slate-200","dark:border-darkmode-400","border","box",2,"height","calc(var(--vh, 1vh) * 100 - 200px)","padding-right","5px"],["pointerEventsMethod","scrollbar",1,"w-full","h-full",3,"visibility","autoHeightDisabled"],[4,"ngFor","ngForOf"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-chevrons-up-down"],["d","m7 15 5 5 5-5"],["d","m7 9 5-5 5 5"],[1,"clickable"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-chevrons-down-up"],["d","m7 20 5-5 5 5"],["d","m7 4 5 5 5-5"],["class","azt-group mt-3",4,"ngIf"],[1,"azt-group","mt-3"],["azt-track-service","azt-list-classroom-view-mpTg8jgQkF",1,"flex","items-center","clickable",3,"click"],[1,"font-medium","truncate"],[1,"grid","grid-cols-12","gap-3","mt-3",3,"hidden"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-chevron-down"],["d","m6 9 6 6 6-6"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-chevron-right"],["d","m9 18 6-6-6-6"],[3,"hidden"],["azt-track-service","join-classroom-bMP4eJi9N",1,"flex","items-center","p-3","rounded-md","bg-slate-100","dark:bg-darkmode-300","clickable",2,"min-height","80px","background-color","#c1d9f159",3,"click"],[1,"ml-2","text-left","mt-0","w-full"],[1,"azt-student-name"],[1,"font-medium",3,"matTooltip"],["class","rounded-full bg-primary text-white cursor-pointer font-medium pl-1 pr-1",4,"ngIf"],[1,"mt-1"],[1,"text-xs","text-slate-500","font-medium"],[1,"rounded-full","bg-primary","text-white","cursor-pointer","font-medium","pl-1","pr-1"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"azt-search-box",2),e.NdJ("onSearch",function(r){return i.searchByName(r.searchObj)}),e.ALo(3,"mytranslate"),e.qZA()(),e.TgZ(4,"span",3),e.NdJ("click",function(){return i.collapseAll(!i.isExpandAll)}),e.YNc(5,tP,4,0,"span",4),e.YNc(6,nP,4,0,"span",5),e.qZA()(),e.TgZ(7,"div",6)(8,"ng-scrollbar",7),e.YNc(9,lP,2,1,"div",8),e.qZA()()),2&t&&(e.xp6(2),e.Q6J("isServerSearch",!1)("placeholder",e.lcZ(3,7,"lang_testbank_test_list_search_class")),e.xp6(3),e.Q6J("ngIf",!i.isExpandAll),e.xp6(1),e.Q6J("ngIf",i.isExpandAll),e.xp6(2),e.Q6J("visibility","hover")("autoHeightDisabled",!0),e.xp6(1),e.Q6J("ngForOf",i.viewClassroomGroupObjs))},dependencies:[F.sg,F.O5,Ai.gM,k.KC,gm.W,F.OU,ye.JV],encapsulation:2}),n})();function uP(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"azt-list-classroom-view-for-tested-list",4),e.NdJ("clickToClassroomEmitter",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.clickToClassroomEvent(a))}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("isExpandAll",!0)("classroomGroupData",t.classroomWithGroup)}}let dP=(()=>{class n extends mt.e{clickToClassroomEvent(t){this.dialogRef.close(t)}btnCloseDialog(){this.dialogRef.close(void 0)}constructor(t,i){super(i,t),this.dialogRef=t,this.classroomWithGroup=[],this.classroomWithGroup=i}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(U.so,8),e.Y36(U.WI,8))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-tested-list-choose-classroom-dialog"]],features:[e.qOj],decls:6,vars:4,consts:[[1,"p-3","bg-white","w-full","h-full"],[3,"isExpandAll","classroomGroupData","clickToClassroomEmitter",4,"ngIf"],[1,"text-right","mt-4"],[1,"btn","w-24","btn-secondary",3,"click"],[3,"isExpandAll","classroomGroupData","clickToClassroomEmitter"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.YNc(1,uP,1,2,"azt-list-classroom-view-for-tested-list",1),e.TgZ(2,"div",2)(3,"button",3),e.NdJ("click",function(){return i.btnCloseDialog()}),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()()()),2&t&&(e.xp6(1),e.Q6J("ngIf",i.classroomWithGroup),e.xp6(3),e.hij(" ",e.lcZ(5,2,"lang_auto_dong")," "))},dependencies:[F.O5,cP,ye.JV],encapsulation:2}),n})(),e2=(()=>{class n{constructor(){this.totalSelected=0}setTotalSelected(t){null!=t&&(this.totalSelected=t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var r_=I(72358),Jg=I(85904),Kg=I(43614);const mP=["student",""];function pP(n,o){1&n&&(e.TgZ(0,"span",29),e.ALo(1,"mytranslate"),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()),2&n&&(e.s9C("matTooltip",e.lcZ(1,2,"lang_auto_hoc_sinh_nay_da_thoat_ra_khoi_man_hinh_thi_khi_chua_het_gio_ma_khong_an_nut_nop_bai_giao_vien_yeu_cau_hoc_sinh_quay_lai_bai_thi_de_an_nut_xac_nhan_nop_muon_sau_do_phuc_khao_de_ghi_nhan_ket_qua_bai_thi")),e.xp6(2),e.hij(" ",e.lcZ(3,4,"lang_auto_dang_thi_brackets")," "))}function hP(n,o){1&n&&(e.TgZ(0,"span",29),e.ALo(1,"mytranslate"),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()),2&n&&(e.s9C("matTooltip",e.lcZ(1,2,"lang_auto_hoc_sinh_nay_da_thoat_ra_khoi_man_hinh_thi_khi_chua_het_gio_ma_khong_an_nut_nop_bai_giao_vien_yeu_cau_hoc_sinh_quay_lai_bai_thi_de_an_nut_xac_nhan_nop_muon_sau_do_phuc_khao_de_ghi_nhan_ket_qua_bai_thi")),e.xp6(2),e.hij(" ",e.lcZ(3,4,"lang_auto_chua_nop_bai_brackets")," "))}function AP(n,o){if(1&n&&(e.TgZ(0,"div",26)(1,"span",27),e._uU(2),e.qZA(),e.YNc(3,pP,4,6,"span",28),e.YNc(4,hP,4,6,"span",28),e.qZA()),2&n){const t=e.oxw(2);e.xp6(2),e.Oqu(t.student.fullName),e.xp6(1),e.Q6J("ngIf",0==t.student.status&&(t.student.isMarked||t.student.isNotMarked)),e.xp6(1),e.Q6J("ngIf",-1==t.student.status&&(t.student.isMarked||t.student.isNotMarked))}}function _P(n,o){if(1&n&&e._UZ(0,"img",30),2&n){const t=e.oxw(2);e.Q6J("nameImages",t.student.nameImages)}}function fP(n,o){1&n&&(e.TgZ(0,"span",31),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_test_result_not_marked_essay")))}function gP(n,o){1&n&&(e.TgZ(0,"span",32),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_auto_dang_thi")))}function xP(n,o){1&n&&(e.TgZ(0,"span",33),e.ALo(1,"mytranslate"),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()),2&n&&(e.s9C("matTooltip",e.lcZ(1,2,"lang_auto_hoc_sinh_nay_da_thoat_ra_khoi_man_hinh_thi_khi_chua_het_gio_ma_khong_an_nut_nop_bai_giao_vien_yeu_cau_hoc_sinh_quay_lai_bai_thi_de_an_nut_xac_nhan_nop_muon_sau_do_phuc_khao_de_ghi_nhan_ket_qua_bai_thi")),e.xp6(2),e.hij(" ",e.lcZ(3,4,"lang_auto_chua_nop_bai")," "))}function bP(n,o){1&n&&(e.TgZ(0,"span",34),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_auto_chua_thi")))}function vP(n,o){1&n&&(e.TgZ(0,"span",35),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_point")+": "," "))}function wP(n,o){if(1&n&&(e.TgZ(0,"span",36),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);let i;e.xp6(1),e.hij(" ",null!==(i=t.student.mark)&&void 0!==i?i:0," ")}}function yP(n,o){1&n&&(e.TgZ(0,"span",35),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_combine_exam")+": "," "))}function CP(n,o){if(1&n&&(e.TgZ(0,"span",36),e._uU(1),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.hij(" ",t.student.subjectMarkValues.join(" | ")," ")}}function TP(n,o){if(1&n&&(e.TgZ(0,"div",11)(1,"div",12),e.YNc(2,yP,3,3,"span",17),e.YNc(3,CP,2,1,"span",18),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(2),e.Q6J("ngIf",t.student.isMarked),e.xp6(1),e.Q6J("ngIf",t.student.isMarked)}}function kP(n,o){1&n&&(e.TgZ(0,"div",37),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_thoi_gian_lam_bai")+":"," "))}function SP(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.timeService.calculationTimeExamTested(t.student.startedTest||void 0,t.student.createdAt||void 0)," ")}}function EP(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.timeService.calculationTimeExamTested(t.student.startedTest||void 0)," ")}}function OP(n,o){1&n&&(e.TgZ(0,"p",41),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_so_tep_tin_da_nop")+": "," "))}function IP(n,o){if(1&n&&(e.TgZ(0,"p",42),e._uU(1),e.qZA()),2&n){const t=e.oxw(3);let i;e.xp6(1),e.hij(" ",null!==(i=null==t.student.filesParse?null:t.student.filesParse.length)&&void 0!==i?i:0," ")}}function MP(n,o){if(1&n&&(e.TgZ(0,"div",38),e.YNc(1,OP,3,3,"p",39),e.YNc(2,IP,2,1,"p",40),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.student.isMarked||t.student.isNotMarked),e.xp6(1),e.Q6J("ngIf",t.student.isMarked||t.student.isNotMarked)}}function LP(n,o){if(1&n&&(e.TgZ(0,"div",22),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.hij(" ",t.timeService.calculationTime(t.student.createdAt||void 0)+" "+e.lcZ(2,1,"lang_auto_truoc")," ")}}function BP(n,o){if(1&n&&(e.TgZ(0,"div",38)(1,"p",41),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.YNc(4,LP,3,3,"div",43),e.qZA()),2&n){const t=e.oxw(2);e.xp6(2),e.hij(" ",e.lcZ(3,2,"lang_auto_thoi_gian_nop_bai")+": "," "),e.xp6(2),e.Q6J("ngIf",t.student.isMarked||t.student.isNotMarked)}}function PP(n,o){if(1&n&&(e.TgZ(0,"div",38)(1,"p",41),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.TgZ(4,"p",42),e._uU(5),e.ALo(6,"formatOfflineExamHashIdToNumber"),e.qZA()()),2&n){const t=e.oxw(2);let i;e.xp6(2),e.hij("",e.lcZ(3,2,"lang_auto_ma_de_thi"),":"),e.xp6(3),e.hij(" ",e.xi3(6,4,null!==(i=t.student.offlineMixQuestionHashId)&&void 0!==i?i:0,3)," ")}}function QP(n,o){if(1&n&&(e.TgZ(0,"div",38)(1,"p",41),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.TgZ(4,"p",42),e._uU(5),e.ALo(6,"formatStudentCodeToNumber"),e.qZA()()),2&n){const t=e.oxw(2);let i;e.xp6(2),e.hij(" ",e.lcZ(3,2,"lang_testbank_offline_student_identification")+": "," "),e.xp6(3),e.hij(" ",e.xi3(6,4,null!==(i=t.student.studentCode)&&void 0!==i?i:0,6)," ")}}function FP(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",44)(1,"div",45)(2,"span",46)(3,"input",47,48),e.NdJ("click",function(a){e.CHM(t);const r=e.oxw(2);return e.KtG(r.selectStudent(a,!0))}),e.qZA()()()()}if(2&n){const t=e.oxw(2);e.xp6(2),e.Q6J("formGroup",t.student.checkBoxGroupControl),e.xp6(1),e.Q6J("checked",t.student.checkBoxGroupControl.controls.selectedCheckbox.value)}}const NP=function(n,o){return{"zoom-in":n,"flex items-center":o}},ZP=function(n){return{"border-b border-slate-200 dark:border-darkmode-400":n}};function DP(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",3),e.NdJ("mouseenter",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.showHideCheckbox())})("mouseleave",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.showHideCheckbox())}),e.TgZ(1,"div",4),e.NdJ("click",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.selectStudent(a,!1,!0))})("auxclick",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.selectStudent(a,!1,!0))}),e.TgZ(2,"div",5)(3,"div",6),e._UZ(4,"azt-create-avatar",7),e.qZA(),e.TgZ(5,"div",8),e.YNc(6,AP,5,3,"div",9),e.YNc(7,_P,1,1,"img",10),e.TgZ(8,"div",11)(9,"div",12),e.YNc(10,fP,3,3,"span",13),e.YNc(11,gP,3,3,"span",14),e.YNc(12,xP,4,6,"span",15),e.YNc(13,bP,3,3,"span",16),e.YNc(14,vP,3,3,"span",17),e.YNc(15,wP,2,1,"span",18),e.qZA()(),e.YNc(16,TP,4,2,"div",19),e.qZA()(),e.TgZ(17,"div",20),e.YNc(18,kP,3,3,"div",21),e.TgZ(19,"div",22),e.YNc(20,SP,2,1,"span",23),e.YNc(21,EP,2,1,"span",23),e.qZA()(),e.YNc(22,MP,3,2,"div",24),e.YNc(23,BP,5,4,"div",24),e.YNc(24,PP,7,7,"div",24),e.YNc(25,QP,7,7,"div",24),e.qZA(),e.YNc(26,FP,5,2,"div",25),e.qZA()}if(2&n){const t=e.oxw();let i;e.Q6J("ngClass",e.WLB(22,NP,t.student.resultId,t.student.isNotTested&&!t.student.resultId)),e.xp6(2),e.Q6J("ngClass",e.VKq(25,ZP,t.student.resultId)),e.xp6(2),e.Q6J("linkAvatar",null!==(i=t.student.avatar)&&void 0!==i?i:"")("nameCreateAvatar",t.student.fullName)("size",40),e.xp6(2),e.Q6J("ngIf",!t.student.nameImages||t.commonService.convertStringToNumber(t.student.id)>0),e.xp6(1),e.Q6J("ngIf",t.student.nameImages&&t.commonService.convertStringToNumber(t.student.studentId)<=0),e.xp6(3),e.Q6J("ngIf",t.student.isNotMarked),e.xp6(1),e.Q6J("ngIf",t.student.isOnTest),e.xp6(1),e.Q6J("ngIf",t.student.isNotSubmit),e.xp6(1),e.Q6J("ngIf",t.student.isNotTested),e.xp6(1),e.Q6J("ngIf",t.student.isMarked),e.xp6(1),e.Q6J("ngIf",t.student.isMarked),e.xp6(1),e.Q6J("ngIf",t.student.isMarked&&t.student.subjectMarkValues&&t.student.subjectMarkValues.length),e.xp6(2),e.Q6J("ngIf",!t.student.isNotTested),e.xp6(2),e.Q6J("ngIf",t.student.isMarked||t.student.isNotMarked),e.xp6(1),e.Q6J("ngIf",t.student.isOnTest||t.student.isNotSubmit),e.xp6(1),e.Q6J("ngIf",t.hasEssayQuestion),e.xp6(1),e.Q6J("ngIf",t.student.isMarked||t.student.isNotMarked),e.xp6(1),e.Q6J("ngIf",t.student.isOffline),e.xp6(1),e.Q6J("ngIf",t.student.isOffline),e.xp6(1),e.Q6J("ngIf",t.student.isOffline&&(t.student.checkBoxGroupControl.controls.isShow.value||t.sAztExamResultStudentSelectedService.totalSelected))}}let UP=(()=>{class n extends xe.Q{handleSelectExamResult(){this.onHandleSelect.emit()}showHideCheckbox(){this.student.isOffline&&!this.isMobileDevice&&!this.isMobileWebView&&this.student.checkBoxGroupControl.controls.isShow.setValue(!this.student.checkBoxGroupControl.controls.isShow.value)}selectStudent(t,i,a){!this.student.isNotTested&&!this.student.isOnTest&&this.student.checkBoxGroupControl.controls.selectedCheckbox.setValue(!this.student.checkBoxGroupControl.controls.selectedCheckbox.value),a&&0==this.sAztExamResultStudentSelectedService.totalSelected&&3!=t.which?this.commonService.myNavigationWithQueryString(`/admin/testbank/test-review/${this.examId}/${this.student.userId}/${this.student.studentId}/${this.student.resultId??0}`,`?backto=${this.backLink}`):(setTimeout(()=>{i&&(t.preventDefault(),t.stopPropagation())},100),this.countTotalSelectStudent.emit())}constructor(t,i){super(),this.sAztExamResultStudentSelectedService=t,this.timeService=i,this.hasEssayQuestion=!1,this.onHandleSelect=new e.vpe,this.countTotalSelectStudent=new e.vpe}ngOnInit(){super.ngOnInit(),(this.isMobileDevice||this.isMobileWebView)&&this.student.isOffline&&this.student.checkBoxGroupControl.controls.isShow.setValue(!0)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e2),e.Y36(Mo.D))},n.\u0275cmp=e.Xpm({type:n,selectors:[["testbank-exam-result-student-exam-result-box","student",""]],inputs:{student:"student",examHashId:"examHashId",examId:"examId",backLink:"backLink",hasEssayQuestion:"hasEssayQuestion"},outputs:{onHandleSelect:"onHandleSelect",countTotalSelectStudent:"countTotalSelectStudent"},features:[e.qOj],attrs:mP,decls:4,vars:1,consts:[["azt-track-service","student_exam_result_box-exJlVgNrtS",1,"py-3","clickable"],[3,"ngTemplateOutlet"],["infoStudent",""],[1,"rounded-md","bg-slate-100","dark:bg-darkmode-300",2,"min-height","85px","height","100%","position","relative",3,"ngClass","mouseenter","mouseleave"],[3,"click","auxclick"],[1,"flex","items-center","p-3","student-exam-result-up",3,"ngClass"],[1,"w-12","h-10","image-fit","lg:mr-1"],[3,"linkAvatar","nameCreateAvatar","size"],[1,"ml-2","text-left","mt-0",2,"width","calc(100% - 3.5rem)"],["class","azt-student-name flex items-center","style","flex-wrap: wrap",4,"ngIf"],["appDrawNameImage","","class","mb-1 img-name-fluid",3,"nameImages",4,"ngIf"],[1,"flex","items-center","mt-1"],[1,"mr-auto","text-xs","mr-2"],["class","text-pending font-medium",4,"ngIf"],["class","text-danger",4,"ngIf"],["class","text-danger",3,"matTooltip",4,"ngIf"],["class","text-slate-500",4,"ngIf"],["class","text-slate-500 font-medium",4,"ngIf"],["class","text-black font-medium",4,"ngIf"],["class","flex items-center mt-1",4,"ngIf"],[1,"flex","items-center","px-3","py-2"],["class","text-slate-500 mr-auto text-xs mr-2",4,"ngIf"],[1,"text-slate-500","text-right","text-xs","font-medium"],[4,"ngIf"],["class","flex items-center px-3 pb-2",4,"ngIf"],["class","ml-auto absolute top-0 right-0 mt-1 mr-1","style","z-index: 999",4,"ngIf"],[1,"azt-student-name","flex","items-center",2,"flex-wrap","wrap"],[1,"font-medium","mr-2"],["class","text-xs text-danger text-right",3,"matTooltip",4,"ngIf"],[1,"text-xs","text-danger","text-right",3,"matTooltip"],["appDrawNameImage","",1,"mb-1","img-name-fluid",3,"nameImages"],[1,"text-pending","font-medium"],[1,"text-danger"],[1,"text-danger",3,"matTooltip"],[1,"text-slate-500"],[1,"text-slate-500","font-medium"],[1,"text-black","font-medium"],[1,"text-slate-500","mr-auto","text-xs","mr-2"],[1,"flex","items-center","px-3","pb-2"],["class","mr-auto text-xs text-slate-500",4,"ngIf"],["class","text-xs text-slate-500 font-medium",4,"ngIf"],[1,"mr-auto","text-xs","text-slate-500"],[1,"text-xs","text-slate-500","font-medium"],["class","text-slate-500 text-right text-xs font-medium",4,"ngIf"],[1,"ml-auto","absolute","top-0","right-0","mt-1","mr-1",2,"z-index","999"],[1,"clickable","flex","items-center","hover:bg-gray","dark:hover:bg-darkmode-400","rounded-md","p-1"],[1,"text-slate-500","text-center","inline-block",3,"formGroup"],["type","checkbox","formControlName","selectedCheckbox",1,"form-check-input","flex-none",3,"checked","click"],["eventInput",""]],template:function(t,i){if(1&t&&(e.TgZ(0,"a",0),e.GkF(1,1),e.qZA(),e.YNc(2,DP,27,27,"ng-template",null,2,e.W1O)),2&t){const a=e.MAs(3);e.xp6(1),e.Q6J("ngTemplateOutlet",a)}},dependencies:[F.mk,F.O5,F.tP,Ai.gM,h.Wl,h.JJ,h.JL,h.sg,h.u,Jg.g,wt.M,Kg.L,ye.JV,ye.gw,ye.Aw],encapsulation:2}),n})();const jP=["student",""],qP=function(n){return[n]},RP=function(n){return{backto:n}};function zP(n,o){if(1&n&&(e.TgZ(0,"a",3),e.ALo(1,"navigationLocalize"),e.GkF(2,4),e.qZA()),2&n){const t=e.oxw(),i=e.MAs(3);let a;e.Q6J("routerLink",e.VKq(5,qP,e.lcZ(1,3,"/admin/testbank/test-review/"+t.examId+"/"+t.student.userId+"/"+t.student.studentId+"/"+(null!==(a=t.student.resultId)&&void 0!==a?a:0))))("queryParams",e.VKq(7,RP,t.backLink)),e.xp6(2),e.Q6J("ngTemplateOutlet",i)}}function HP(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"a",5),e.NdJ("click",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.selectStudent(a,!1,!0))}),e.GkF(1,4),e.qZA()}if(2&n){e.oxw();const t=e.MAs(3);e.xp6(1),e.Q6J("ngTemplateOutlet",t)}}function JP(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"input",38),e.NdJ("click",function(a){e.CHM(t);const r=e.oxw(3);return e.KtG(r.selectStudent(a,!0))}),e.qZA()}}function KP(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"input",39),e.NdJ("change",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.countTotalSelectStudent.emit())}),e.qZA()}}function GP(n,o){if(1&n&&(e.TgZ(0,"span",35),e.YNc(1,JP,1,0,"input",36),e.YNc(2,KP,1,0,"input",37),e.qZA()),2&n){const t=e.oxw(2);e.Q6J("formGroup",t.student.checkBoxGroupControl),e.xp6(1),e.Q6J("ngIf",!t.sAztExamResultStudentSelectedService.totalSelected),e.xp6(1),e.Q6J("ngIf",t.sAztExamResultStudentSelectedService.totalSelected)}}function YP(n,o){1&n&&(e.TgZ(0,"span",43),e.ALo(1,"mytranslate"),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()),2&n&&(e.s9C("matTooltip",e.lcZ(1,2,"lang_auto_hoc_sinh_nay_da_thoat_ra_khoi_man_hinh_thi_khi_chua_het_gio_ma_khong_an_nut_nop_bai_giao_vien_yeu_cau_hoc_sinh_quay_lai_bai_thi_de_an_nut_xac_nhan_nop_muon_sau_do_phuc_khao_de_ghi_nhan_ket_qua_bai_thi")),e.xp6(2),e.hij(" ",e.lcZ(3,4,"lang_auto_dang_thi_brackets")," "))}function $P(n,o){1&n&&(e.TgZ(0,"span",43),e.ALo(1,"mytranslate"),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()),2&n&&(e.s9C("matTooltip",e.lcZ(1,2,"lang_auto_hoc_sinh_nay_da_thoat_ra_khoi_man_hinh_thi_khi_chua_het_gio_ma_khong_an_nut_nop_bai_giao_vien_yeu_cau_hoc_sinh_quay_lai_bai_thi_de_an_nut_xac_nhan_nop_muon_sau_do_phuc_khao_de_ghi_nhan_ket_qua_bai_thi")),e.xp6(2),e.hij(" ",e.lcZ(3,4,"lang_auto_chua_nop_bai_brackets")," "))}function VP(n,o){if(1&n&&(e.TgZ(0,"div",40)(1,"span",41),e._uU(2),e.qZA(),e.YNc(3,YP,4,6,"span",42),e.YNc(4,$P,4,6,"span",42),e.qZA()),2&n){const t=e.oxw(2);e.xp6(2),e.Oqu(t.student.fullName),e.xp6(1),e.Q6J("ngIf",0==t.student.status&&(t.student.isMarked||t.student.isNotMarked)),e.xp6(1),e.Q6J("ngIf",-1==t.student.status&&(t.student.isMarked||t.student.isNotMarked))}}function WP(n,o){if(1&n&&e._UZ(0,"img",44),2&n){const t=e.oxw(2);e.Q6J("nameImages",t.student.nameImages)}}function XP(n,o){1&n&&(e.TgZ(0,"span",45),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_test_result_not_marked_essay")))}function eQ(n,o){1&n&&(e.TgZ(0,"span",46),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_auto_dang_thi")))}function tQ(n,o){1&n&&(e.TgZ(0,"span",47),e.ALo(1,"mytranslate"),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()),2&n&&(e.s9C("matTooltip",e.lcZ(1,2,"lang_auto_hoc_sinh_nay_da_thoat_ra_khoi_man_hinh_thi_khi_chua_het_gio_ma_khong_an_nut_nop_bai_giao_vien_yeu_cau_hoc_sinh_quay_lai_bai_thi_de_an_nut_xac_nhan_nop_muon_sau_do_phuc_khao_de_ghi_nhan_ket_qua_bai_thi")),e.xp6(2),e.hij(" ",e.lcZ(3,4,"lang_auto_chua_nop_bai")," "))}function nQ(n,o){1&n&&(e.TgZ(0,"span",48),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_auto_chua_thi")))}function iQ(n,o){1&n&&(e.TgZ(0,"span",49),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_point")+": "," "))}function oQ(n,o){if(1&n&&(e.TgZ(0,"span",50),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);let i;e.xp6(1),e.hij(" ",null!==(i=t.student.mark)&&void 0!==i?i:0," ")}}function aQ(n,o){1&n&&(e.TgZ(0,"span",49),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_combine_exam")+": "," "))}function rQ(n,o){if(1&n&&(e.TgZ(0,"span",50),e._uU(1),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.hij(" ",t.student.subjectMarkValues.join(" | ")," ")}}function sQ(n,o){if(1&n&&(e.TgZ(0,"div",16)(1,"div",17),e.YNc(2,aQ,3,3,"span",22),e.YNc(3,rQ,2,1,"span",23),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(2),e.Q6J("ngIf",t.student.isMarked),e.xp6(1),e.Q6J("ngIf",t.student.isMarked)}}function lQ(n,o){1&n&&(e.TgZ(0,"div",51),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_thoi_gian_lam_bai")+":"," "))}function cQ(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.timeService.calculationTimeExamTested(t.student.startedTest||void 0,t.student.createdAt||void 0)," ")}}function uQ(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.timeService.calculationTimeExamTested(t.student.startedTest||void 0)," ")}}function dQ(n,o){1&n&&(e.TgZ(0,"div",51),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_thoi_gian_nop_bai")+":"," "))}function mQ(n,o){if(1&n&&(e.TgZ(0,"div",29),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.timeService.calculationTime(t.student.createdAt||void 0)+" "+e.lcZ(2,1,"lang_auto_truoc")," ")}}function pQ(n,o){1&n&&(e.TgZ(0,"div",51),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_so_tep_tin_da_nop")+":"," "))}function hQ(n,o){if(1&n&&(e.TgZ(0,"p",54),e._uU(1),e.qZA()),2&n){const t=e.oxw(3);let i;e.xp6(1),e.hij(" ",null!==(i=null==t.student.filesParse?null:t.student.filesParse.length)&&void 0!==i?i:0," ")}}const AQ=function(n){return{flex:n}};function _Q(n,o){if(1&n&&(e.TgZ(0,"div",25)(1,"div",52),e.YNc(2,pQ,3,3,"div",28),e.YNc(3,hQ,2,1,"p",53),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngClass",e.VKq(3,AQ,t.isMobileDevice||t.isMobileWebView)),e.xp6(1),e.Q6J("ngIf",(t.isMobileDevice||t.isMobileWebView)&&(t.student.isMarked||t.student.isNotMarked)),e.xp6(1),e.Q6J("ngIf",t.student.isMarked||t.student.isNotMarked)}}const xw=function(n,o){return{"px-0":n,"px-3":o}};function fQ(n,o){if(1&n&&(e.TgZ(0,"div",55)(1,"p",56),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.TgZ(4,"p",54),e._uU(5),e.ALo(6,"formatOfflineExamHashIdToNumber"),e.qZA()()),2&n){const t=e.oxw(2);let i;e.Q6J("ngClass",e.WLB(8,xw,t.isMobileDevice||t.isMobileWebView,!t.isMobileDevice&&!t.isMobileWebView)),e.xp6(2),e.hij("",e.lcZ(3,3,"lang_auto_ma_de_thi"),":"),e.xp6(3),e.hij(" ",e.xi3(6,5,null!==(i=t.student.offlineMixQuestionHashId)&&void 0!==i?i:0,3)," ")}}function gQ(n,o){if(1&n&&(e.TgZ(0,"div",55)(1,"p",56),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.TgZ(4,"p",54),e._uU(5),e.ALo(6,"formatStudentCodeToNumber"),e.qZA()()),2&n){const t=e.oxw(2);let i;e.Q6J("ngClass",e.WLB(8,xw,t.isMobileDevice||t.isMobileWebView,!t.isMobileDevice&&!t.isMobileWebView)),e.xp6(2),e.hij(" ",e.lcZ(3,3,"lang_testbank_offline_student_identification")+": "," "),e.xp6(3),e.hij(" ",e.xi3(6,5,null!==(i=t.student.studentCode)&&void 0!==i?i:0,6)," ")}}const xQ=function(n){return{"border-b":n}},bQ=function(n,o){return{"px-5":n,"px-3 ":o}},vQ=function(n,o){return{"col-span-4":n,"col-span-12":o}};function wQ(n,o){if(1&n&&(e.TgZ(0,"div",6)(1,"div",7)(2,"div",8),e.YNc(3,GP,3,3,"span",9),e.TgZ(4,"div",10)(5,"div",11),e._UZ(6,"azt-create-avatar",12),e.qZA(),e.TgZ(7,"div",13),e.YNc(8,VP,5,3,"div",14),e.YNc(9,WP,1,1,"img",15),e.TgZ(10,"div",16)(11,"div",17),e.YNc(12,XP,3,3,"span",18),e.YNc(13,eQ,3,3,"span",19),e.YNc(14,tQ,4,6,"span",20),e.YNc(15,nQ,3,3,"span",21),e.YNc(16,iQ,3,3,"span",22),e.YNc(17,oQ,2,1,"span",23),e.qZA()(),e.YNc(18,sQ,4,2,"div",24),e.qZA()()(),e.TgZ(19,"div",25)(20,"div",26)(21,"span",27),e.YNc(22,lQ,3,3,"div",28),e.TgZ(23,"div",29),e.YNc(24,cQ,2,1,"span",30),e.YNc(25,uQ,2,1,"span",30),e.qZA()()()(),e.TgZ(26,"div",25)(27,"div",26)(28,"span",27),e.YNc(29,dQ,3,3,"div",28),e.YNc(30,mQ,3,3,"div",31),e.qZA()()(),e.YNc(31,_Q,4,5,"div",32),e.TgZ(32,"div",25)(33,"div",26)(34,"div",33),e.YNc(35,fQ,7,11,"div",34),e.YNc(36,gQ,7,11,"div",34),e.qZA()()()()()),2&n){const t=e.oxw();let i;e.Q6J("ngClass",e.VKq(25,xQ,!t.last)),e.xp6(1),e.Q6J("ngClass",e.WLB(27,bQ,!t.isMobileWebView&&!t.isMobileDevice,t.isMobileWebView||t.isMobileDevice)),e.xp6(1),e.Q6J("ngClass",e.WLB(30,vQ,!t.isMobileWebView&&!t.isMobileDevice,t.isMobileWebView||t.isMobileDevice)),e.xp6(1),e.Q6J("ngIf",t.student.isOffline),e.xp6(2),e.Q6J("ngClass",t.isMobileDevice?"w-8 h-8 mr-2":"w-6 h-6"),e.xp6(1),e.Q6J("linkAvatar",null!==(i=t.student.avatar)&&void 0!==i?i:"")("nameCreateAvatar",t.student.fullName)("size",t.isMobileDevice?36:28),e.xp6(2),e.Q6J("ngIf",!t.student.nameImages||t.commonService.convertStringToNumber(t.student.id)>0),e.xp6(1),e.Q6J("ngIf",t.student.nameImages&&t.commonService.convertStringToNumber(t.student.studentId)<=0),e.xp6(3),e.Q6J("ngIf",t.student.isNotMarked),e.xp6(1),e.Q6J("ngIf",t.student.isOnTest),e.xp6(1),e.Q6J("ngIf",t.student.isNotSubmit),e.xp6(1),e.Q6J("ngIf",t.student.isNotTested),e.xp6(1),e.Q6J("ngIf",t.student.isMarked),e.xp6(1),e.Q6J("ngIf",t.student.isMarked),e.xp6(1),e.Q6J("ngIf",t.student.isMarked&&t.student.subjectMarkValues&&t.student.subjectMarkValues.length),e.xp6(4),e.Q6J("ngIf",!t.student.isNotTested&&(t.isMobileDevice||t.isMobileWebView)),e.xp6(2),e.Q6J("ngIf",t.student.isMarked||t.student.isNotMarked),e.xp6(1),e.Q6J("ngIf",t.student.isOnTest||t.student.isNotSubmit),e.xp6(4),e.Q6J("ngIf",(t.student.isMarked||t.student.isNotMarked)&&(t.isMobileDevice||t.isMobileWebView)),e.xp6(1),e.Q6J("ngIf",t.student.isMarked||t.student.isNotMarked),e.xp6(1),e.Q6J("ngIf",t.hasEssayQuestion),e.xp6(4),e.Q6J("ngIf",t.student.isOffline),e.xp6(1),e.Q6J("ngIf",t.student.isOffline)}}let yQ=(()=>{class n extends xe.Q{handleSelectExamResult(){this.onHandleSelect.emit()}selectStudent(t,i,a){i&&(t.preventDefault(),t.stopPropagation()),(i||a)&&!this.student.isNotTested&&!this.student.isOnTest&&this.student.checkBoxGroupControl.controls.selectedCheckbox.setValue(!this.student.checkBoxGroupControl.controls.selectedCheckbox.value),this.countTotalSelectStudent.emit()}constructor(t,i){super(),this.sAztExamResultStudentSelectedService=t,this.timeService=i,this.hasEssayQuestion=!1,this.last=!1,this.isOpenSideNav=!1,this.onHandleSelect=new e.vpe,this.countTotalSelectStudent=new e.vpe}ngOnInit(){super.ngOnInit()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e2),e.Y36(Mo.D))},n.\u0275cmp=e.Xpm({type:n,selectors:[["testbank-exam-result-student-exam-result-list","student",""]],inputs:{student:"student",examHashId:"examHashId",examId:"examId",backLink:"backLink",hasEssayQuestion:"hasEssayQuestion",last:"last",isOpenSideNav:"isOpenSideNav"},outputs:{onHandleSelect:"onHandleSelect",countTotalSelectStudent:"countTotalSelectStudent"},features:[e.qOj],attrs:jP,decls:4,vars:2,consts:[[3,"routerLink","queryParams",4,"ngIf"],["class","py-3 clickable",3,"click",4,"ngIf"],["infoStudent",""],[3,"routerLink","queryParams"],[3,"ngTemplateOutlet"],[1,"py-3","clickable",3,"click"],[1,"inbox__item","block","hover:shadow-md","text-slate-600","dark:text-slate-500","border-slate-200/60","dark:border-darkmode-400",3,"ngClass"],[1,"grid","grid-cols-12","gap-3","items-center","box-exam","w-full",3,"ngClass"],[1,"flex",2,"align-items","center",3,"ngClass"],["class","mr-2",3,"formGroup",4,"ngIf"],[1,"flex","items-center","p-3","student-exam-result-up","w-full"],[1,"image-fit","mr-1",3,"ngClass"],[3,"linkAvatar","nameCreateAvatar","size"],[1,"ml-2","text-left","mt-0",2,"width","calc(100% - 3.5rem)"],["class","azt-student-name flex items-center","style","flex-wrap: wrap",4,"ngIf"],["appDrawNameImage","","class","mb-1 img-name-fluid",3,"nameImages",4,"ngIf"],[1,"flex","items-center","mt-1"],[1,"mr-auto","text-xs","mr-2"],["class","text-pending font-medium",4,"ngIf"],["class","text-danger",4,"ngIf"],["class","text-danger",3,"matTooltip",4,"ngIf"],["class","text-slate-500",4,"ngIf"],["class","text-slate-500 font-medium",4,"ngIf"],["class","text-black font-medium",4,"ngIf"],["class","flex items-center mt-1",4,"ngIf"],[1,"col-span-12","md:col-span-2"],[1,"text-center"],[1,"flex","mx-auto"],["class","text-slate-500 mr-auto text-xs mr-2",4,"ngIf"],[1,"text-slate-500","text-right","text-xs","font-medium"],[4,"ngIf"],["class","text-slate-500 text-right text-xs font-medium",4,"ngIf"],["class","col-span-12 md:col-span-2",4,"ngIf"],[1,"whitespace-nowrap"],["class","flex items-center pb-2",3,"ngClass",4,"ngIf"],[1,"mr-2",3,"formGroup"],["class","form-check-input flex-none","type","checkbox","formControlName","selectedCheckbox",3,"click",4,"ngIf"],["class","form-check-input flex-none","id","noEvent","type","checkbox","formControlName","selectedCheckbox",3,"change",4,"ngIf"],["type","checkbox","formControlName","selectedCheckbox",1,"form-check-input","flex-none",3,"click"],["id","noEvent","type","checkbox","formControlName","selectedCheckbox",1,"form-check-input","flex-none",3,"change"],[1,"azt-student-name","flex","items-center",2,"flex-wrap","wrap"],[1,"font-medium","mr-2"],["class","text-xs text-danger text-right",3,"matTooltip",4,"ngIf"],[1,"text-xs","text-danger","text-right",3,"matTooltip"],["appDrawNameImage","",1,"mb-1","img-name-fluid",3,"nameImages"],[1,"text-pending","font-medium"],[1,"text-danger"],[1,"text-danger",3,"matTooltip"],[1,"text-slate-500"],[1,"text-slate-500","font-medium"],[1,"text-black","font-medium"],[1,"text-slate-500","mr-auto","text-xs","mr-2"],[1,"lg:w-auto","ml-auto","text-center",3,"ngClass"],["class","text-xs text-slate-500 font-medium",4,"ngIf"],[1,"text-xs","text-slate-500","font-medium"],[1,"flex","items-center","pb-2",3,"ngClass"],[1,"mr-auto","text-xs","text-slate-500"]],template:function(t,i){1&t&&(e.YNc(0,zP,3,9,"a",0),e.YNc(1,HP,2,1,"a",1),e.YNc(2,wQ,37,33,"ng-template",null,2,e.W1O)),2&t&&(e.Q6J("ngIf",0==i.sAztExamResultStudentSelectedService.totalSelected),e.xp6(1),e.Q6J("ngIf",i.sAztExamResultStudentSelectedService.totalSelected>0))},dependencies:[E.rH,F.mk,F.O5,F.tP,Ai.gM,h.Wl,h.JJ,h.JL,h.sg,h.u,Jg.g,wt.M,Kg.L,ye.Jy,ye.JV,ye.gw,ye.Aw],encapsulation:2}),n})();function CQ(n,o){if(1&n&&e.GkF(0,9),2&n){e.oxw();const t=e.MAs(11);e.Q6J("ngTemplateOutlet",t)}}function TQ(n,o){1&n&&(e.TgZ(0,"div"),e.Hsn(1),e.qZA())}function kQ(n,o){if(1&n&&e._UZ(0,"azt-loading-effect",13),2&n){const t=e.oxw(2);e.Q6J("currentStatusObj",t.statusObj)}}function SQ(n,o){if(1&n&&(e.TgZ(0,"div",15),e.GkF(1,9),e.qZA()),2&n){e.oxw(3);const t=e.MAs(13);e.xp6(1),e.Q6J("ngTemplateOutlet",t)}}function EQ(n,o){if(1&n&&(e.TgZ(0,"div",18)(1,"div",19),e.GkF(2,9),e.qZA(),e._UZ(3,"azt-scroll-to-top-bottom",20),e.qZA()),2&n){e.oxw(4);const t=e.MAs(9);e.xp6(2),e.Q6J("ngTemplateOutlet",t),e.xp6(1),e.Q6J("isScrollToTop",!0)}}function OQ(n,o){1&n&&(e.TgZ(0,"div",21)(1,"p",22),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&n&&(e.xp6(2),e.hij("",e.lcZ(3,1,"lang_not_found_search"),"!"))}function IQ(n,o){if(1&n&&(e.TgZ(0,"div"),e.GkF(1,9),e.YNc(2,EQ,4,2,"div",16),e.YNc(3,OQ,4,3,"div",17),e.qZA()),2&n){const t=e.oxw(3),i=e.MAs(5);e.xp6(1),e.Q6J("ngTemplateOutlet",i),e.xp6(1),e.Q6J("ngIf",!t.noDataSearch),e.xp6(1),e.Q6J("ngIf",t.noDataSearch)}}function MQ(n,o){if(1&n&&(e.YNc(0,SQ,2,1,"div",14),e.YNc(1,IQ,4,3,"div",2)),2&n){const t=e.oxw(2);e.Q6J("ngIf",t.isNotTestedYet&&!t.noDataSearch),e.xp6(1),e.Q6J("ngIf",!t.isNotTestedYet&&t.obj)}}const LQ=function(n){return{"py-2":n}};function BQ(n,o){if(1&n&&(e.TgZ(0,"div",10),e.YNc(1,kQ,1,1,"azt-loading-effect",11),e.YNc(2,MQ,2,2,"ng-template",null,12,e.W1O),e.qZA()),2&n){const t=e.MAs(3),i=e.oxw();e.Q6J("ngClass",e.VKq(3,LQ,!i.showFileScan)),e.xp6(1),e.Q6J("ngIf",i.scanLoading)("ngIfElse",t)}}function PQ(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",27)(1,"button",28),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.openClassroomGroupDialog())}),e.TgZ(2,"span",29),e._uU(3),e.ALo(4,"mytranslate"),e.ALo(5,"mytranslate"),e.qZA(),e.TgZ(6,"span",30)(7,"span",31),e._uU(8),e.qZA()(),e.O4$(),e.TgZ(9,"svg",32),e._UZ(10,"path",33),e.qZA()()()}if(2&n){const t=e.oxw(2);e.xp6(3),e.AsE("",e.lcZ(4,3,"lang_student_classroom_list_utils_create_class_choose_group_class"),": ",e.lcZ(5,5,null==t.currentSelectedGroup||null==t.currentSelectedGroup.groupObj?null:t.currentSelectedGroup.groupObj.name),""),e.xp6(5),e.Oqu(t.groupClassroomObjs.length)}}const bw=function(n){return{"col-span-2":n}};function QQ(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",34)(1,"button",35),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.selectClassroomToShowEvent(null==a.examResultObjsOfSelectedClassroom.classObj?null:a.examResultObjsOfSelectedClassroom.classObj.id))}),e.TgZ(2,"span",36),e.ALo(3,"mytranslate"),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()()()}if(2&n){const t=e.oxw(2);e.Q6J("ngClass",e.VKq(8,bw,t.isOpenSideNav)),e.xp6(2),e.Q6J("matTooltip",e.lcZ(3,4,null==t.examResultObjsOfSelectedClassroom.classObj?null:t.examResultObjsOfSelectedClassroom.classObj.name)+" ("+t.examResultObjsOfSelectedClassroom.countSubmitted+"/"+(null==t.examResultObjsOfSelectedClassroom.classObj?null:t.examResultObjsOfSelectedClassroom.classObj.countStudents)+")")("matTooltipPosition","above"),e.xp6(2),e.hij(" ",e.lcZ(5,6,null==t.examResultObjsOfSelectedClassroom.classObj?null:t.examResultObjsOfSelectedClassroom.classObj.name)+" ("+t.examResultObjsOfSelectedClassroom.countSubmitted+"/"+(null==t.examResultObjsOfSelectedClassroom.classObj?null:t.examResultObjsOfSelectedClassroom.classObj.countStudents)+")"," ")}}const FQ=function(n){return{active:n}};function NQ(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",34)(1,"button",37),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2).$implicit,r=e.oxw(2);return e.KtG(r.selectClassroomToShowEvent(null==a.classObj?null:a.classObj.id))}),e.TgZ(2,"span",36),e.ALo(3,"mytranslate"),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()()()}if(2&n){const t=e.oxw(2).$implicit,i=e.oxw(2);e.Q6J("ngClass",e.VKq(9,bw,i.isOpenSideNav)),e.xp6(1),e.Q6J("ngClass",e.VKq(11,FQ,(null==i.examResultObjsOfSelectedClassroom.classObj?null:i.examResultObjsOfSelectedClassroom.classObj.id)==(null==t.classObj?null:t.classObj.id))),e.xp6(1),e.Q6J("matTooltip",e.lcZ(3,5,null==t.classObj?null:t.classObj.name)+" ("+t.countSubmitted+"/"+(null==t.classObj?null:t.classObj.countStudents)+")")("matTooltipPosition","above"),e.xp6(2),e.hij(" ",e.lcZ(5,7,null==t.classObj?null:t.classObj.name)+" ("+t.countSubmitted+"/"+(null==t.classObj?null:t.classObj.countStudents)+")"," ")}}function ZQ(n,o){if(1&n&&(e.ynx(0),e.YNc(1,NQ,6,13,"div",25),e.BQk()),2&n){const t=e.oxw().$implicit,i=e.oxw(2);let a;e.xp6(1),e.Q6J("ngIf",t.indexCounter<i.showNumberClassroom||t.indexCounter<=i.showNumberClassroom&&(null!==(a=i.examResultObjsOfSelectedClassroom.indexCounter)&&void 0!==a?a:0)<=i.showNumberClassroom)}}function DQ(n,o){if(1&n&&(e.ynx(0),e.YNc(1,ZQ,2,1,"ng-container",2),e.BQk()),2&n){const t=o.$implicit,i=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.showOnTab&&null!=t.indexCounter&&!i.showFileScan)}}function UQ(n,o){if(1&n&&e.GkF(0,9),2&n){e.oxw(2);const t=e.MAs(7);e.Q6J("ngTemplateOutlet",t)}}function jQ(n,o){if(1&n&&(e.YNc(0,PQ,11,7,"div",23),e.TgZ(1,"div",24),e.YNc(2,QQ,6,10,"div",25),e.YNc(3,DQ,2,1,"ng-container",26),e.YNc(4,UQ,1,1,"ng-container",1),e.qZA()),2&n){const t=e.oxw();e.Q6J("ngIf",t.groupClassroomObjs.length),e.xp6(2),e.Q6J("ngIf",null!=t.examResultObjsOfSelectedClassroom.indexCounter&&t.examResultObjsOfSelectedClassroom.indexCounter>t.showNumberClassroom&&t.examResultObjsOfSelectedClassroom.showOnTab),e.xp6(1),e.Q6J("ngForOf",t.examResultObjsByClassroom),e.xp6(1),e.Q6J("ngIf",t.countShownOnTab()>t.showNumberClassroom+1)}}function qQ(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"a",45),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2).$implicit,r=e.oxw(2);return e.KtG(r.selectClassroomToShowEvent(null==a.classObj?null:a.classObj.id))}),e.TgZ(2,"span",46),e.ALo(3,"mytranslate"),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()()()}if(2&n){const t=e.oxw(2).$implicit;e.xp6(2),e.Q6J("matTooltip",e.lcZ(3,3,null==t.classObj?null:t.classObj.name)+" ("+t.countSubmitted+"/"+(null==t.classObj?null:t.classObj.countStudents)+")")("matTooltipPosition","left"),e.xp6(2),e.hij(" ",e.lcZ(5,5,null==t.classObj?null:t.classObj.name)+" ("+t.countSubmitted+"/"+(null==t.classObj?null:t.classObj.countStudents)+")"," ")}}function RQ(n,o){if(1&n&&(e.ynx(0),e.YNc(1,qQ,6,7,"li",2),e.BQk()),2&n){const t=e.oxw().$implicit,i=e.oxw(2);let a;e.xp6(1),e.Q6J("ngIf",t.indexCounter>i.showNumberClassroom||t.indexCounter>=i.showNumberClassroom&&(null!==(a=i.examResultObjsOfSelectedClassroom.indexCounter)&&void 0!==a?a:0)>i.showNumberClassroom)}}function zQ(n,o){if(1&n&&(e.ynx(0),e.YNc(1,RQ,2,1,"ng-container",2),e.BQk()),2&n){const t=o.$implicit,i=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null!=t.indexCounter&&(null==i.examResultObjsOfSelectedClassroom.classObj?null:i.examResultObjsOfSelectedClassroom.classObj.id)!=(null==t.classObj?null:t.classObj.id)&&t.showOnTab)}}const HQ=function(n){return{"shadow-md":n}};function JQ(n,o){if(1&n&&(e.TgZ(0,"div",38)(1,"button",39)(2,"span"),e._uU(3),e.ALo(4,"mytranslate"),e.qZA(),e.O4$(),e.TgZ(5,"svg",40),e._UZ(6,"polyline",41),e.qZA()(),e.kcU(),e.TgZ(7,"mat-menu",null,42)(9,"div",43)(10,"ul",44),e.YNc(11,zQ,2,1,"ng-container",26),e.qZA()()()()),2&n){const t=e.MAs(8),i=e.oxw();e.xp6(1),e.Q6J("matMenuTriggerFor",t),e.xp6(2),e.Oqu(e.lcZ(4,4,"lang_auto_xem_them")),e.xp6(6),e.Q6J("ngClass",e.VKq(6,HQ,i.examResultObjsByClassroom.length>=12)),e.xp6(2),e.Q6J("ngForOf",i.examResultObjsByClassroom)}}function KQ(n,o){if(1&n&&e._UZ(0,"azt-loading-effect",13),2&n){const t=e.oxw(2);e.Q6J("currentStatusObj",t.statusObj)}}function GQ(n,o){1&n&&(e.TgZ(0,"div",61)(1,"div",62)(2,"span",63),e._uU(3),e.ALo(4,"mytranslate"),e.qZA()()()),2&n&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"lang_auto_thoi_gian_lam_bai")," "))}function YQ(n,o){1&n&&(e.TgZ(0,"div",61)(1,"div",62)(2,"span",63),e._uU(3),e.ALo(4,"mytranslate"),e.qZA()()()),2&n&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"lang_auto_thoi_gian_nop_bai")," "))}function $Q(n,o){1&n&&(e.TgZ(0,"div",61)(1,"div",64),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"lang_auto_so_tep_tin_da_nop")," "))}function VQ(n,o){1&n&&(e.TgZ(0,"div",61)(1,"div",62)(2,"div",65),e._uU(3),e.ALo(4,"mytranslate"),e.qZA()()()),2&n&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"lang_auto_thi_offline")," "))}const WQ=function(n){return{opacity:n}};function XQ(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",66)(1,"testbank-exam-result-student-exam-result-list",67),e.NdJ("onHandleSelect",function(){const r=e.CHM(t).$implicit,s=e.oxw(4);return e.KtG(s.handleSelectExamResult(r))})("countTotalSelectStudent",function(){e.CHM(t);const a=e.oxw(4);return e.KtG(a.countTotalSelectStudent())}),e.qZA()()}if(2&n){const t=o.$implicit,i=e.oxw(4);e.s9C("id","student_result_"+t.id),e.Q6J("ngStyle",e.VKq(8,WQ,t.checkBoxGroupControl.controls.selectedCheckbox.value?"0.6":"1")),e.xp6(1),e.Q6J("student",t)("isOpenSideNav",i.isOpenSideNav)("examHashId",null==i.obj?null:i.obj.hashId)("examId",null==i.obj?null:i.obj.id)("backLink",i.backToLink)("hasEssayQuestion",i.hasEssayQuestion)}}const e9=function(n,o){return{"overflow-x-auto":n,"overflow-x-visible":o}},vw=function(n){return{"min-width":n}},t9=function(n,o){return{"col-span-4":n,"col-span-12":o}},n9=function(n,o){return{"ml-5":n,"ml-3":o}};function i9(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",51)(2,"div",52)(3,"div",53)(4,"div",54)(5,"div",55)(6,"input",56),e.NdJ("change",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.selectOrUnselectAllStudents())}),e.qZA(),e.TgZ(7,"div",57),e._uU(8),e.ALo(9,"mytranslate"),e.qZA()(),e.YNc(10,GQ,5,3,"div",58),e.YNc(11,YQ,5,3,"div",58),e.YNc(12,$Q,4,3,"div",58),e.YNc(13,VQ,5,3,"div",58),e.qZA()()(),e.TgZ(14,"div",59),e.YNc(15,XQ,2,10,"div",60),e.qZA()(),e.BQk()}if(2&n){const t=e.oxw(3);e.xp6(2),e.Q6J("ngClass",e.WLB(14,e9,!t.isMobileDevice,t.isMobileDevice)),e.xp6(1),e.Q6J("ngStyle",e.VKq(17,vw,t.isMobileDevice?"":t.isOpenSideNav?"900px":"1100px")),e.xp6(2),e.Q6J("ngClass",e.WLB(19,t9,!t.isMobileWebView&&!t.isMobileDevice,t.isMobileWebView||t.isMobileDevice)),e.xp6(1),e.Q6J("formControl",t.selectAllStudent),e.xp6(1),e.Q6J("ngClass",e.WLB(22,n9,!t.isMobileWebView,t.isMobileWebView)),e.xp6(1),e.hij(" ",e.lcZ(9,12,"lang_auto_ho_va_ten")," "),e.xp6(2),e.Q6J("ngIf",!t.isMobileDevice),e.xp6(1),e.Q6J("ngIf",!t.isMobileDevice),e.xp6(1),e.Q6J("ngIf",t.hasEssayQuestion&&!t.isMobileDevice),e.xp6(1),e.Q6J("ngIf",!t.isMobileDevice),e.xp6(1),e.Q6J("ngStyle",e.VKq(25,vw,t.isMobileWebView||t.isMobileDevice?"":t.isOpenSideNav?"900px":"1100px")),e.xp6(1),e.Q6J("ngForOf",t.lstStudentResults)}}const o9=function(n){return{"lg:col-span-3":n}};function a9(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",71)(1,"testbank-exam-result-student-exam-result-box",72),e.NdJ("onHandleSelect",function(){const r=e.CHM(t).$implicit,s=e.oxw(5);return e.KtG(s.handleSelectExamResult(r))})("countTotalSelectStudent",function(){e.CHM(t);const a=e.oxw(5);return e.KtG(a.countTotalSelectStudent())}),e.qZA()()}if(2&n){const t=o.$implicit,i=e.oxw(5);e.Q6J("ngClass",e.VKq(6,o9,!i.isOpenSideNav&&!i.isMobile)),e.xp6(1),e.Q6J("student",t)("examHashId",null==i.obj?null:i.obj.hashId)("examId",null==i.obj?null:i.obj.id)("backLink",i.backToLink)("hasEssayQuestion",i.hasEssayQuestion)}}function r9(n,o){if(1&n&&(e.TgZ(0,"div",69),e.YNc(1,a9,2,8,"div",70),e.qZA()),2&n){const t=e.oxw(4);e.xp6(1),e.Q6J("ngForOf",t.lstStudentResults)}}function s9(n,o){if(1&n&&e.YNc(0,r9,2,1,"div",68),2&n){const t=e.oxw(3);e.Q6J("ngIf",!t.showFileScan)}}function l9(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",73)(1,"div",74)(2,"button",75),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.selectPageWithClassroomId())}),e._uU(3),e.ALo(4,"mytranslate"),e.O4$(),e.TgZ(5,"svg",76),e._UZ(6,"polyline",41),e.qZA()()()()}2&n&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"lang_auto_xem_them"),"\xa0 "))}function c9(n,o){if(1&n&&(e.YNc(0,i9,16,27,"ng-container",48),e.YNc(1,s9,1,1,"ng-template",null,49,e.W1O),e.YNc(3,l9,7,3,"div",50)),2&n){const t=e.MAs(2),i=e.oxw(2);e.Q6J("ngIf",i.showList)("ngIfElse",t),e.xp6(3),e.Q6J("ngIf",i.canNextPage||i.checkShowLoadMore(-1==(null==i.examResultObjsOfSelectedClassroom.classObj?null:i.examResultObjsOfSelectedClassroom.classObj.id)?i.examResultObjsByPage.length:null==i.examResultObjsOfSelectedClassroom.results?null:i.examResultObjsOfSelectedClassroom.results.length))}}function u9(n,o){if(1&n&&(e.YNc(0,KQ,1,1,"azt-loading-effect",11),e.YNc(1,c9,4,3,"ng-template",null,47,e.W1O)),2&n){const t=e.MAs(2),i=e.oxw();e.Q6J("ngIf",i.loadingResultList)("ngIfElse",t)}}const d9=function(n){return{"mt-2 mb-2":n}},m9=function(n){return{"mb-2":n}};function p9(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"a",80),e.NdJ("click",function(a){e.CHM(t);const r=e.oxw(2);return e.KtG(r.handleRemoveExamResult(a))}),e.O4$(),e.TgZ(2,"svg",81),e._UZ(3,"polyline",82)(4,"path",83),e.qZA(),e._uU(5),e.ALo(6,"mytranslate"),e.qZA(),e.kcU(),e.TgZ(7,"a",84),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.selectOrUnselectAllStudents(!1))}),e.TgZ(8,"span"),e._uU(9),e.ALo(10,"mytranslate"),e.qZA()(),e.BQk()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngClass",e.VKq(9,d9,t.isMobileDevice||t.isMobileWebView)),e.xp6(4),e.hij(" ",e.lcZ(6,5,"lang_testbank_remove_offline_result")," "),e.xp6(2),e.Q6J("ngClass",e.VKq(11,m9,t.isMobileDevice||t.isMobileWebView)),e.xp6(2),e.AsE("",e.lcZ(10,7,"lang_auto_huy_chon")," (",t.sAztExamResultStudentSelectedService.totalSelected,")")}}function h9(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"a",85),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.showSelectFileScan())}),e.O4$(),e.TgZ(1,"svg",86),e._UZ(2,"path",87)(3,"circle",88),e.qZA(),e.kcU(),e.TgZ(4,"span"),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(5),e.Oqu(e.lcZ(6,1,t.isMobileWebView?"lang_auto_cham_off":"lang_auto_cham_file_scan"))}}function A9(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"a",89),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.showSelectFileScan())}),e.O4$(),e.TgZ(1,"svg",86),e._UZ(2,"line",90)(3,"path",91)(4,"path",92)(5,"path",93),e.qZA(),e.kcU(),e.TgZ(6,"span"),e._uU(7),e.ALo(8,"mytranslate"),e.qZA()()}2&n&&(e.xp6(7),e.Oqu(e.lcZ(8,1,"lang_auto_huy_cham_file_scan")))}function _9(n,o){if(1&n&&(e.TgZ(0,"p",77),e._uU(1),e.qZA(),e.YNc(2,p9,11,13,"ng-container",2),e.YNc(3,h9,7,3,"a",78),e.YNc(4,A9,9,3,"a",79)),2&n){const t=e.oxw();e.xp6(1),e.Oqu(t.headerTitle),e.xp6(1),e.Q6J("ngIf",t.sAztExamResultStudentSelectedService.totalSelected),e.xp6(1),e.Q6J("ngIf",!t.showFileScan&&!t.isNotTestedYet),e.xp6(1),e.Q6J("ngIf",t.showFileScan&&t.showButtonScan)}}function f9(n,o){1&n&&e._UZ(0,"div")}function g9(n,o){1&n&&(e._uU(0),e.ALo(1,"mytranslate")),2&n&&e.hij(" ",e.lcZ(1,1,"lang_auto_note_scan_file_in_student_exam_result_for_online_and_offline_exam_no_scan")," ")}function x9(n,o){if(1&n&&(e.TgZ(0,"div",102),e.YNc(1,f9,1,0,"div",48),e.ALo(2,"isOfflineExam"),e.YNc(3,g9,2,3,"ng-template",null,103,e.W1O),e.qZA()),2&n){const t=e.MAs(4),i=e.oxw(2);e.xp6(1),e.Q6J("ngIf",e.lcZ(2,2,i.obj))("ngIfElse",t)}}function b9(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",104)(1,"div",105)(2,"a",106),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.showSelectFileScan())}),e.O4$(),e.TgZ(3,"svg",107),e._UZ(4,"path",87)(5,"circle",88),e.qZA(),e.kcU(),e.TgZ(6,"span"),e._uU(7),e.ALo(8,"mytranslate"),e.qZA()()(),e.TgZ(9,"div",108)(10,"a",109),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.showCopySuccess())}),e.O4$(),e.TgZ(11,"svg",107),e._UZ(12,"circle",110)(13,"circle",111)(14,"circle",112)(15,"line",113)(16,"line",114),e.qZA(),e.kcU(),e.TgZ(17,"span"),e._uU(18),e.ALo(19,"mytranslate"),e.qZA()()()()}if(2&n){const t=e.oxw(2);e.xp6(7),e.Oqu(e.lcZ(8,3,t.isMobileWebView?"lang_auto_cham_off":"lang_auto_cham_file_scan")),e.xp6(3),e.Q6J("cdkCopyToClipboard",t.copyLinkToClipboard()),e.xp6(8),e.Oqu(e.lcZ(19,5,"lang_auto_copy_link_de_thi"))}}function v9(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",115)(1,"a",116),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.showSelectFileScan())}),e.O4$(),e.TgZ(2,"svg",107),e._UZ(3,"path",87)(4,"circle",88),e.qZA(),e.kcU(),e.TgZ(5,"span"),e._uU(6),e.ALo(7,"mytranslate"),e.qZA()()()}if(2&n){const t=e.oxw(2);e.xp6(6),e.Oqu(e.lcZ(7,1,t.isMobileWebView?"lang_auto_cham_off":"lang_auto_cham_file_scan"))}}function w9(n,o){1&n&&(e.TgZ(0,"p",117),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_auto_hoac")))}function y9(n,o){1&n&&(e.TgZ(0,"p",118),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_tai_app_azota_de_cham_bai_bang_camera_cua_dien_thoai_tai_app_tai_day")," "))}function C9(n,o){1&n&&(e.TgZ(0,"div",119)(1,"div",120)(2,"a",121),e._UZ(3,"img",122),e.ALo(4,"convertCdnLinkOfGitHub"),e.qZA(),e.TgZ(5,"a",123),e._UZ(6,"img",124),e.ALo(7,"convertCdnLinkOfGitHub"),e.qZA()()()),2&n&&(e.xp6(3),e.Q6J("src",e.lcZ(4,2,"images/google-play-badge.svg"),e.LSH),e.xp6(3),e.Q6J("src",e.lcZ(7,4,"images/2928664.svg"),e.LSH))}function T9(n,o){1&n&&(e.ynx(0),e.TgZ(1,"p",117),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.TgZ(4,"p",125),e._uU(5),e.ALo(6,"mytranslate"),e.qZA(),e.TgZ(7,"div",119)(8,"div",126)(9,"p",127)(10,"span",128),e._uU(11,"Google Play"),e.qZA(),e._UZ(12,"azt-download-qr-code",129),e.qZA(),e.TgZ(13,"p",130)(14,"span",128),e._uU(15,"App Store"),e.qZA(),e._UZ(16,"azt-download-qr-code",129),e.qZA()()(),e.BQk()),2&n&&(e.xp6(2),e.Oqu(e.lcZ(3,6,"lang_auto_hoac")),e.xp6(3),e.hij(" ",e.lcZ(6,8,"lang_auto_su_dung_ma_qr_de_tai_app_azota")," "),e.xp6(7),e.Q6J("fileName","azota_exam_qr_code_google_app")("linkUrl","https://play.google.com/store/apps/details?id=azt.teacher"),e.xp6(4),e.Q6J("fileName","azota_exam_qr_code_app_store")("linkUrl","https://apps.apple.com/vn/app/azota-teacher/id1658231068"))}function k9(n,o){if(1&n&&(e.TgZ(0,"div",94)(1,"h3",95),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.YNc(4,x9,5,4,"div",96),e.YNc(5,b9,20,7,"div",97),e.ALo(6,"isOfflineExam"),e.YNc(7,v9,8,3,"ng-template",null,98,e.W1O),e.YNc(9,w9,3,3,"p",99),e.ALo(10,"isOfflineExam"),e.YNc(11,y9,3,3,"p",100),e.YNc(12,C9,8,6,"div",101),e.YNc(13,T9,17,10,"ng-container",2),e.qZA()),2&n){const t=e.MAs(8),i=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,8,"lang_auto_chua_co_du_lieu_nop_bai")),e.xp6(2),e.Q6J("ngIf",!i.isMobileWebView),e.xp6(1),e.Q6J("ngIf",!e.lcZ(6,10,i.obj))("ngIfElse",t),e.xp6(4),e.Q6J("ngIf",!i.isMobileWebView&&!e.lcZ(10,12,i.obj)),e.xp6(2),e.Q6J("ngIf",!i.isMobileWebView),e.xp6(1),e.Q6J("ngIf",!i.isMobileWebView),e.xp6(1),e.Q6J("ngIf",!i.isMobile)}}const S9=["*"];let E9=(()=>{class n extends xe.Q{openClassroomGroupDialog(){this.sAztDialogService.open(dP,{data:this.groupClassroomObjs,restoreFocus:!1,panelClass:"azt-full-width-dialog"}).afterClosed().subscribe(i=>{i&&this.selectClassroomToShowEvent(i.classroomObj.id)})}selectGroupClassroomToShow(t,i=!1){let a=this.groupClassroomObjs.find(c=>c.groupObj?.id==t);if(!a)return;a.groupObj.id!=this.currentSelectedGroup?.groupObj.id&&this.examResultObjsByClassroom.map(c=>c.showOnTab=!1),this.currentSelectedGroup=a;let r=a.classroomObjs?.map(c=>c.id)??[],s=this.examResultObjsByClassroom.filter(c=>r.includes(c.classObj?.id??0));s.map(c=>c.showOnTab=!0),s.forEach((c,u)=>{c.indexCounter=u});let l=this.commonService.getFirstOfArray(r);i&&l&&this.selectClassroomToShowEvent(l)}copyLinkToClipboard(){return`${this.commonService.getCurrentDomain()}/de-thi/${this.obj?.hashId}`}showCopySuccess(){this.showSuccessSnack("lang_auto_sao_chep_thanh_cong")}countShownOnTab(){return this.examResultObjsByClassroom.filter(t=>t.showOnTab).length}showSelectFileScan(){if(this.isMobileWebView)return this.mobileWebviewService.sendMarkOfflineExamObj(this.obj?.hashId??"");this.showFileScan=!this.showFileScan,this.notTestedOpenFileScan.emit(this.showFileScan)}selectPageWithClassroomId(){this.curPage+=1,this.selectPageClassroomEmitter.emit({classroomId:this.currentClassroomId,page:this.curPage})}checkShowLoadMore(t){return!!t&&t%this.sizePage==0}selectPageEvent(t){this.curPage=t,setTimeout(()=>{this.scrollToPosition(this.currentScrollPosition)},100)}scrollToPosition(t){try{this.scrollbarRef?.scrollTo({top:t})}catch{}}selectClassroomToShowEvent(t){this.currentClassroomId=t??-1,this.initDataForClassroom(),this.sAztExamResultStudentSelectedService.setTotalSelected(0),this.selectAllStudent.setValue(!1),this.selectTabClassroomEmitter.emit(t)}findClassroomIdByExamResultId(t,i){return t.find(a=>a.results?.filter(r=>r.id==i).length)?.classObj?.id}findClassroomDataByClassroomId(t,i){return t.find(r=>r.classObj?.id?.toString()==i)||this.commonService.getFirstOfArray(t)}initDataForClassroom(){if(!this.currentClassroomId){var t=this.mustShownResultId??this.commonService.getFirstOfArray(this.examResultObjsByClassroom)?.classObj?.id;this.currentClassroomId=t||-1}var i=this.findClassroomDataByClassroomId(this.examResultObjsByClassroom,this.currentClassroomId.toString());i&&(this.examResultObjsOfSelectedClassroom=i,this.selectGroupClassroomToShow(this.examResultObjsOfSelectedClassroom.classObj?.classroomGroup?.id??-1)),this.lstStudentResults=this.examResultObjsOfSelectedClassroom.results??[]}handleSelectExamResult(t){t.resultId&&this.commonService.myNavigationWithQueryString(`/admin/testbank/test-review/${this.obj?.id}/${t.userId}/${t.studentId}/${t.resultId??0}`,`?backto=${this.backToLink}`,!0)}selectOrUnselectAllStudents(t){this.examResultObjsOfSelectedClassroom.results?.forEach(i=>{i.checkBoxGroupControl.controls.selectedCheckbox.setValue(t??this.selectAllStudent.value),null!=t&&!this.isMobileDevice&&i.checkBoxGroupControl.controls.isShow.setValue(t)}),this.countTotalSelectStudent()}countTotalSelectStudent(){let t=this.examResultObjsOfSelectedClassroom.results?.filter(i=>i.checkBoxGroupControl.controls.selectedCheckbox.value)?.length;this.sAztExamResultStudentSelectedService.setTotalSelected(t),this.selectAllStudent.setValue(t==this.examResultObjsOfSelectedClassroom.results?.length)}handleRemoveExamResult(t){let i=this.examResultObjsOfSelectedClassroom.results?.filter(r=>r.isOffline&&r.checkBoxGroupControl.controls.selectedCheckbox.value)??[];this.sAztDialogService.open(eP.z,{data:{examHashId:this.obj?.hashId??"",examResultIds:i.map(r=>r.resultId??0),examResults:i},restoreFocus:!1}).afterClosed().subscribe(r=>{r&&(this.examResultObjsOfSelectedClassroom.results?.forEach(s=>{s.checkBoxGroupControl.controls.selectedCheckbox.setValue(!1)}),this.sAztExamResultStudentSelectedService.setTotalSelected(0),this.selectAllStudent.setValue(!1),this.removeOfflineResultEmitter.emit(!0))})}ngAfterViewInit(){this.scrollbarRef?.scrolled.subscribe(t=>{t.target&&t.target instanceof HTMLElement&&(this.currentScrollPosition=t.target.scrollTop)})}ngOnChanges(t){t.examResultObjsByClassroom&&(this.mustShownResultId&&(this.currentClassroomId=this.findClassroomIdByExamResultId(this.examResultObjsByClassroom,this.mustShownResultId)??this.currentClassroomId),this.initDataForClassroom(),this.selectPageEvent(this.curPage))}ngOnInit(){super.ngOnInit(),this.sAztExamResultStudentSelectedService.setTotalSelected(0),this.examResultObjsByClassroom.length&&(this.initDataForClassroom(),this.selectPageEvent(this.curPage))}constructor(t,i,a,r,s){super(),this.timeService=t,this.sAztDialogService=i,this.examResultFilterService=a,this.mobileWebviewService=r,this.sAztExamResultStudentSelectedService=s,this.noDataSearch=!1,this.isOpenSideNav=!0,this.isMobile=!1,this.backToLink="",this.showList=!1,this.scanLoading=!1,this.showFileScan=!1,this.mustShownResultId=0,this.headerTitle="",this.notTestedOpenFileScan=new e.vpe,this.selectTabClassroomEmitter=new e.vpe,this.selectPageClassroomEmitter=new e.vpe,this.removeOfflineResultEmitter=new e.vpe,this.obj=void 0,this.examResultObjsByClassroom=[],this.isNotTestedYet=!1,this.hasEssayQuestion=!1,this.loadingResultList=!1,this.currentClassroomId=0,this.canNextPage=!1,this.showButtonScan=!0,this.groupClassroomObjs=[],this.selectAllStudent=new h.NI(!1,{nonNullable:!0}),this.examResultObjsOfSelectedClassroom={},this.showNumberClassroom=(this.isMobile?1:3)-1,this.lstStudentResults=[],this.examResultObjsByPage=[],this.curPage=1,this.sizePage=100,this.currentScrollPosition=0,this.totalSelectStudent=0}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Mo.D),e.Y36(qi.C),e.Y36(Yx),e.Y36(Ug.r),e.Y36(e2))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-student-exam-result-v2"]],viewQuery:function(t,i){if(1&t&&e.Gf(k.KC,5),2&t){let a;e.iGM(a=e.CRH())&&(i.scrollbarRef=a.first)}},inputs:{noDataSearch:"noDataSearch",isOpenSideNav:"isOpenSideNav",isMobile:"isMobile",backToLink:"backToLink",showList:"showList",scanLoading:"scanLoading",showFileScan:"showFileScan",mustShownResultId:"mustShownResultId",headerTitle:"headerTitle",obj:"obj",examResultObjsByClassroom:"examResultObjsByClassroom",isNotTestedYet:"isNotTestedYet",hasEssayQuestion:"hasEssayQuestion",loadingResultList:"loadingResultList",currentClassroomId:"currentClassroomId",canNextPage:"canNextPage",showButtonScan:"showButtonScan",groupClassroomObjs:"groupClassroomObjs"},outputs:{notTestedOpenFileScan:"notTestedOpenFileScan",selectTabClassroomEmitter:"selectTabClassroomEmitter",selectPageClassroomEmitter:"selectPageClassroomEmitter",removeOfflineResultEmitter:"removeOfflineResultEmitter"},features:[e.qOj,e.TTD],ngContentSelectors:S9,decls:14,vars:3,consts:[[1,"flex","items-center","mt-5","mb-5","flex-wrap",2,"justify-content","flex-end"],[3,"ngTemplateOutlet",4,"ngIf"],[4,"ngIf"],["class","box mt-2 relative","style","min-height: 90vh",3,"ngClass",4,"ngIf"],["showClassroomTabTmp",""],["seeMoreTabOnWebTmp",""],["showExamResultInOneClassroom",""],["examResultHeaderTmp",""],["notTestYetTmp",""],[3,"ngTemplateOutlet"],[1,"box","mt-2","relative",2,"min-height","90vh",3,"ngClass"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],["noLoading",""],[3,"currentStatusObj"],["class","scrollable-content flex items-center",4,"ngIf"],[1,"scrollable-content","flex","items-center"],["class","azt-student-list scrollable-content relative",4,"ngIf"],["class","text-center mt-5",4,"ngIf"],[1,"azt-student-list","scrollable-content","relative"],[1,"p-3"],[3,"isScrollToTop"],[1,"text-center","mt-5"],[1,"h4"],["class","pl-2 pb-2","style","border-bottom: 1px solid #e5e7eb",4,"ngIf"],[1,"nav","nav-link-tabs","grid","grid-cols-12","grap-3","p-2"],["class","col-span-6 md:col-span-3 nav-item",3,"ngClass",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"pl-2","pb-2",2,"border-bottom","1px solid #e5e7eb"],["azt-track-service","student-exam-result-v2-p3qKSOCXH",1,"btn-primary","btn","btn-sm","relative",3,"click"],[1,"mr-2"],[1,"tooltip","flex","items-center","justify-center","rounded-full"],[1,"rounded-full","text-white","cursor-pointer","font-medium","pl-1","pr-1",2,"color","black","background","white"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-chevron-down","ml-3",2,"stroke-width","3px"],["d","m6 9 6 6 6-6"],[1,"col-span-6","md:col-span-3","nav-item",3,"ngClass"],["azt-track-service","student-exam-result-new-MSaafbzaB",1,"active","nav-link","w-full","py-1",3,"click"],[1,"truncate",3,"matTooltip","matTooltipPosition"],["azt-track-service","student-exam-result-new-_LwxxkAKE2",1,"nav-link","w-full","py-1",3,"ngClass","click"],[1,"col-span-6","md:col-span-3","nav-item"],[1,"nav-link","flex","items-center","w-full","py-1",2,"border","none","justify-content","center",3,"matMenuTriggerFor"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide","ml-2"],["points","6 9 12 15 18 9"],["listActiveMenu","matMenu"],[1,"dropdown-menu","show","relative","w-60",3,"ngClass"],[1,"dropdown-content",2,"margin-top","0px","overflow-y","auto","max-height","350px"],["azt-track-service","student-exam-result-new-UODUmv0qb5",1,"dropdown-item",3,"click"],[1,"truncate","w-52",3,"matTooltip","matTooltipPosition"],["doneLoadList",""],[4,"ngIf","ngIfElse"],["showNormal",""],["class","col-span-12 mt-2",4,"ngIf"],[1,"table-zone"],[1,"inbox","box","overflow-x-auto",2,"scroll-snap-type","x mandatory",3,"ngClass"],[1,"p-5","text-slate-500","border-b","border-slate-200/60",3,"ngStyle"],[1,"grid","grid-cols-12","gap-3","items-center","-mx-5","px-5"],[1,"flex","items-center",3,"ngClass"],["type","checkbox",1,"form-check-input",3,"formControl","change"],[1,"inbox__item--sender","flex","items-center","cursor-pointer",3,"ngClass"],["class","col-span-2",4,"ngIf"],[1,"azt-table-body",2,"min-height","50vh",3,"ngStyle"],["class","clickable",3,"ngStyle","id",4,"ngFor","ngForOf"],[1,"col-span-2"],[1,"text-center","cursor-pointer"],[1,"flex","mx-auto"],[1,"lg:w-auto","ml-auto"],[1,"whitespace-nowrap"],[1,"clickable",3,"ngStyle","id"],[3,"student","isOpenSideNav","examHashId","examId","backLink","hasEssayQuestion","onHandleSelect","countTotalSelectStudent"],["class","grid grid-cols-12 gap-3","style","margin-bottom: 85px",4,"ngIf"],[1,"grid","grid-cols-12","gap-3",2,"margin-bottom","85px"],["class","col-span-12 sm:col-span-6 lg:col-span-4 2xl:col-span-3",3,"ngClass",4,"ngFor","ngForOf"],[1,"col-span-12","sm:col-span-6","lg:col-span-4","2xl:col-span-3",3,"ngClass"],[1,"w-full",3,"student","examHashId","examId","backLink","hasEssayQuestion","onHandleSelect","countTotalSelectStudent"],[1,"col-span-12","mt-2"],[1,"text-center","mt-3"],["azt-track-service","student-exam-result-new-QpFPWsrS4","mat-button","",1,"btn","btn-outline-secondary","btn-transparent",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"text-md","font-medium","mr-auto"],["azt-track-service","student-exam-result-new-YugzQx7amV","style","font-size: 13px","class","btn btn-pending-soft btn-sm",3,"click",4,"ngIf"],["azt-track-service","student-exam-result-new-UfMbOZaVPI","class","btn btn-pending-soft btn-sm",3,"click",4,"ngIf"],["azt-track-service","student-exam-result-v2-bOutCqn02",1,"btn","btn-primary-soft","btn-sm",2,"font-size","13px",3,"ngClass","click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","icon-name","trash","data-lucide","trash",1,"lucide","lucide-trash","w-4","h-4","mr-2"],["points","3 6 5 6 21 6"],["d","M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"],["azt-track-service","student-exam-result-v2-sqB0g4GMp4",1,"btn","btn-secondary-soft","btn-sm","ml-2",2,"font-size","13px",3,"ngClass","click"],["azt-track-service","student-exam-result-new-YugzQx7amV",1,"btn","btn-pending-soft","btn-sm",2,"font-size","13px",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","mr-2","lucide"],["d","M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z"],["cx","12","cy","13","r","3"],["azt-track-service","student-exam-result-new-UfMbOZaVPI",1,"btn","btn-pending-soft","btn-sm",3,"click"],["x1","2","y1","2","x2","22","y2","22"],["d","M7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16"],["d","M9.5 4h5L17 7h3a2 2 0 0 1 2 2v7.5"],["d","M14.121 15.121A3 3 0 1 1 9.88 10.88"],[1,"text-center","mt-3","mx-auto","p-3",2,"max-width","28rem"],[1,"font-medium","text-lg"],["class","mt-3 mx-auto",4,"ngIf"],["class","flex flex-col md:flex-row mx-auto",4,"ngIf","ngIfElse"],["OfflineExam",""],["class","h5 mt-2 font-medium",4,"ngIf"],["class","mt-2 ml-auto mr-auto w-4/5",4,"ngIf"],["class","grid grid-cols-12 mt-2 ml-auto mr-auto justify-center",4,"ngIf"],[1,"mt-3","mx-auto"],["notOfflineExam",""],[1,"flex","flex-col","md:flex-row","mx-auto"],[1,"mt-3","lg:mr-auto"],["azt-track-service","student-exam-result-new-Kn62V1VJ1o",1,"btn","btn-secondary-soft",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide","mr-2"],[1,"mt-3","lg:mx-auto"],["azt-track-service","student-exam-result-new-9Vqr3K2yC9",1,"btn","btn-secondary-soft",3,"cdkCopyToClipboard","click"],["cx","18","cy","5","r","3"],["cx","6","cy","12","r","3"],["cx","18","cy","19","r","3"],["x1","8.59","y1","13.51","x2","15.42","y2","17.49"],["x1","15.41","y1","6.51","x2","8.59","y2","10.49"],[1,"mt-3","lg:ml-auto"],["azt-track-service","student-exam-result-new-xsQoGzCGKe",1,"btn","btn-secondary-soft",3,"click"],[1,"h5","mt-2","font-medium"],[1,"mt-2","ml-auto","mr-auto","w-4/5"],[1,"grid","grid-cols-12","mt-2","ml-auto","mr-auto","justify-center"],[1,"col-span-12","w-full","self-center","mb-2"],["azt-track-service","student-exam-result-new-OSvgGR80G","href","https://play.google.com/store/apps/details?id=azt.teacher","target","_blank","rel","noopener",1,"pl-1","pr-1","mb-2","display-inline-block"],["alt","Get it on Google Play","width","150px",1,"play-store-badge",3,"src"],["azt-track-service","student-exam-result-new-bJncs5ICRt","href","https://apps.apple.com/vn/app/azota-teacher/id1658231068","target","_blank","rel","noopener",1,"pl-1","pl-1","mb-2","display-inline-block"],["alt","Download on the App Store","width","135px",1,"app-store-badge",3,"src"],[1,"mt-2","ml-auto","mr-auto","w-80"],[1,"col-span-12","items-center","mb-2"],[1,"px-1","mb-1","py-1","inline-flex","border","border-slate-200","rounded"],[1,"my-auto"],[1,"ml-1",3,"fileName","linkUrl"],[1,"ml-2","px-1","py-1","mb-1","inline-flex","border","border-slate-200","rounded"]],template:function(t,i){1&t&&(e.F$t(),e.TgZ(0,"div",0),e.YNc(1,CQ,1,1,"ng-container",1),e.qZA(),e.YNc(2,TQ,2,0,"div",2),e.YNc(3,BQ,4,5,"div",3),e.YNc(4,jQ,5,4,"ng-template",null,4,e.W1O),e.YNc(6,JQ,12,8,"ng-template",null,5,e.W1O),e.YNc(8,u9,3,2,"ng-template",null,6,e.W1O),e.YNc(10,_9,5,4,"ng-template",null,7,e.W1O),e.YNc(12,k9,14,14,"ng-template",null,8,e.W1O)),2&t&&(e.xp6(1),e.Q6J("ngIf",i.obj),e.xp6(1),e.Q6J("ngIf",i.showFileScan),e.xp6(1),e.Q6J("ngIf",!i.showFileScan))},dependencies:[F.mk,F.sg,F.O5,F.tP,F.PC,nh.i3,ds.lW,Qi.VK,Qi.p6,Ai.gM,h.Wl,h.JJ,h.oH,vi.l,o_.W,r_.M,UP,yQ,ye.JV,ye.CL,ye.Bo],encapsulation:2}),n})();const O9=["drawer"];function I9(n,o){if(1&n&&e._UZ(0,"azt-loading-effect",25),2&n){const t=e.oxw();e.Q6J("currentStatusObj",t.statusObj)}}function M9(n,o){1&n&&e._UZ(0,"status-loading-effect-component")}function L9(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"menu-offline-test",55),e.NdJ("reloadApi",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.reloadApi())}),e.qZA(),e.BQk()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("initData",t.initDataTestedList)("classroomWithGroup",t.classroomWithGroup)("examStudents",t.examStudents)("loadingApi",t.loadingResultList)("isNotTestedYet",t.isNotTestedYet)}}function B9(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"menu-online-test",56),e.NdJ("reloadApi",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.reloadApi())}),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("initData",t.initDataTestedList)("examStudents",t.examStudents)("classroomWithGroup",t.classroomWithGroup)("currentSelectedClassroomId",t.currentSelectClassroomId)("isNotTestedYet",t.isNotTestedYet)("userList",t.allUserObjsForMonitorModule)("loadingApi",t.loadingResultList)}}function P9(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",57),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.sAztMatDrawerService.openDrawer())}),e.ALo(1,"mytranslate"),e.O4$(),e.TgZ(2,"svg",47),e._UZ(3,"rect",58)(4,"path",59)(5,"path",60),e.qZA()()}2&n&&e.s9C("matTooltip",e.lcZ(1,1,"lang_auto_mo_menu"))}function Q9(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",61),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.sAztMatDrawerService.closeDrawer())}),e.ALo(1,"mytranslate"),e.O4$(),e.TgZ(2,"svg",47),e._UZ(3,"rect",58)(4,"path",59)(5,"path",62),e.qZA()()}2&n&&e.s9C("matTooltip",e.lcZ(1,1,"lang_auto_dong_menu"))}function F9(n,o){1&n&&(e.TgZ(0,"span"),e.O4$(),e.TgZ(1,"svg",63),e._UZ(2,"line",64)(3,"line",65)(4,"line",66)(5,"line",67)(6,"line",68)(7,"line",69),e.qZA()())}function N9(n,o){1&n&&(e.TgZ(0,"span"),e.O4$(),e.TgZ(1,"svg",70),e._UZ(2,"path",71)(3,"path",72)(4,"path",73),e.qZA()())}function Z9(n,o){1&n&&(e.TgZ(0,"div",74)(1,"div",75)(2,"p",76),e._uU(3),e.ALo(4,"mytranslate"),e.qZA()()()),2&n&&(e.xp6(3),e.hij("",e.lcZ(4,1,"lang_not_found_search"),"!"))}function D9(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"app-file-scan-offline-exam-new",79),e.NdJ("scanExamDone",function(a){e.CHM(t);const r=e.oxw(3);return e.KtG(r.scanExamDone(a))}),e.qZA()}if(2&n){const t=e.oxw(3);e.Q6J("examObj",t.examObj)("loadedJs",t.loadedJs)("hasExamOffline",t.hasExamOffline)("examOfflineMessage",t.examOfflineMessage)}}function U9(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"app-student-exam-result-v2",77),e.NdJ("removeOfflineResultEmitter",function(a){e.CHM(t);const r=e.oxw(2);return e.KtG(r.afterRemoveOfflineResult(a))})("selectTabClassroomEmitter",function(a){e.CHM(t);const r=e.oxw(2);return e.KtG(r.selectTabClassroomShow(a))})("selectPageClassroomEmitter",function(a){e.CHM(t);const r=e.oxw(2);return e.KtG(r.selectPageClassroomShow(a))})("notTestedOpenFileScan",function(a){e.CHM(t);const r=e.oxw(2);return e.KtG(r.openFileScan(a))}),e.YNc(1,D9,1,4,"app-file-scan-offline-exam-new",78),e.qZA()}if(2&n){const t=e.oxw(2);e.Q6J("noDataSearch",t.noDataSearch)("backToLink",t.backFromStudentView)("examResultObjsByClassroom",t.allViewExamResultObjsOfStudentByClassroom)("isNotTestedYet",t.isNotTestedYet)("showButtonScan",t.showButtonScan)("isOpenSideNav",t.sAztMatDrawerService.isOpenSideNav)("hasEssayQuestion",t.hasEssayQuestion)("showFileScan",t.showFileScan)("groupClassroomObjs",t.groupClassroomObjsInTestedList)("obj",t.examObj)("scanLoading",t.scanLoading)("isMobile",t.isMobileDevice)("currentClassroomId",t.currentSelectClassroomId)("headerTitle",t.headerTitle)("mustShownResultId",t.mustShownResultId)("loadingResultList",t.loadingResultList)("canNextPage",t.canNextPage)("showList",t.showList),e.xp6(1),e.Q6J("ngIf",t.showFileScan&&t.examObj)}}function j9(n,o){if(1&n&&e._UZ(0,"app-excel-score-sheet",80),2&n){const t=e.oxw(2);e.Q6J("dataScore",t.highestMark)("dataScoreByClass",t.dataExportHighestMark)("maxGroupQuestion",t.maxGroupQuestion)("examObj",t.examObj)("totalQuestion",t.totalExamQuestion)("exportQuestionObjs",t.exportQuestionObjs)("tableType","highest")("isSortByMark",t.form.controls.isSortByMarkDesc.value)("isSortByTime",t.form.controls.isSortByTimeDesc.value)("isSortByName",t.form.controls.isSortByNameAsc.value)("hasEssayQuestion",t.hasEssayQuestion)("countEssayQuestion",t.countEssayQuestion)}}function q9(n,o){if(1&n&&e._UZ(0,"app-excel-score-sheet",80),2&n){const t=e.oxw(2);e.Q6J("dataScore",t.exportToExcelObjs)("dataScoreByClass",t.dataExportLastTime)("maxGroupQuestion",t.maxGroupQuestion)("examObj",t.examObj)("totalQuestion",t.totalExamQuestion)("exportQuestionObjs",t.exportQuestionObjs)("tableType","lastTime")("isSortByMark",t.form.controls.isSortByMarkDesc.value)("isSortByTime",t.form.controls.isSortByTimeDesc.value)("isSortByName",t.form.controls.isSortByNameAsc.value)("hasEssayQuestion",t.hasEssayQuestion)("countEssayQuestion",t.countEssayQuestion)}}function R9(n,o){if(1&n&&e._UZ(0,"app-excel-score-sheet",80),2&n){const t=e.oxw(2);e.Q6J("dataScore",t.firstMark)("dataScoreByClass",t.dataExportFirstTime)("maxGroupQuestion",t.maxGroupQuestion)("examObj",t.examObj)("totalQuestion",t.totalExamQuestion)("exportQuestionObjs",t.exportQuestionObjs)("tableType","firstTime")("isSortByMark",t.form.controls.isSortByMarkDesc.value)("isSortByTime",t.form.controls.isSortByTimeDesc.value)("isSortByName",t.form.controls.isSortByNameAsc.value)("hasEssayQuestion",t.hasEssayQuestion)("countEssayQuestion",t.countEssayQuestion)}}function z9(n,o){if(1&n&&e._UZ(0,"app-excel-score-sheet",80),2&n){const t=e.oxw(2);e.Q6J("dataScore",t.allTimeMark)("dataScoreByClass",t.dataExportAllTime)("maxGroupQuestion",t.maxGroupQuestion)("examObj",t.examObj)("totalQuestion",t.totalExamQuestion)("exportQuestionObjs",t.exportQuestionObjs)("tableType","allTime")("isSortByMark",t.form.controls.isSortByMarkDesc.value)("isSortByTime",t.form.controls.isSortByTimeDesc.value)("isSortByName",t.form.controls.isSortByNameAsc.value)("hasEssayQuestion",t.hasEssayQuestion)("countEssayQuestion",t.countEssayQuestion)}}const H9=function(n,o){return{"w-85":n,"w-30":o}},J9=function(n){return{"azt-mobile-draw-left":n}},K9=function(n){return{"ml-30":n}},G9=function(n){return{"ml-5":n}},Y9=function(n){return{"px-0":n}};function $9(n,o){if(1&n){const t=e.EpF();e._UZ(0,"azt-export-docx-loading-box",26),e.YNc(1,M9,1,0,"status-loading-effect-component",8),e.TgZ(2,"div",27)(3,"mat-drawer-container",28)(4,"mat-drawer",29,30),e.NdJ("closedStart",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.changeStatusNav())})("openedChange",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.sAztMatDrawerService.openedChange(a))}),e.TgZ(6,"div",31),e.YNc(7,L9,2,5,"ng-container",32),e.YNc(8,B9,1,7,"ng-template",null,33,e.W1O),e.qZA()(),e.TgZ(10,"mat-drawer-content",34)(11,"div",35)(12,"div",36),e.YNc(13,P9,6,3,"button",37),e.YNc(14,Q9,6,3,"button",38),e.TgZ(15,"div",39)(16,"div",40)(17,"azt-search-box",41),e.NdJ("onSearch",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.search(a.searchObj))}),e.ALo(18,"mytranslate"),e.qZA()(),e.TgZ(19,"div",42)(20,"testbank-exam-result-filter-menu",43),e.NdJ("changeFilterEvent",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.changeFilterEvent())}),e.qZA()(),e.TgZ(21,"div",40)(22,"button",44),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.changeShowTypeEvent())}),e.ALo(23,"mytranslate"),e.YNc(24,F9,8,0,"span",8),e.YNc(25,N9,5,0,"span",8),e.qZA()(),e.TgZ(26,"div",45)(27,"button",46),e.O4$(),e.TgZ(28,"svg",47),e._UZ(29,"line",48)(30,"line",49)(31,"line",50),e.qZA()()()()(),e.kcU(),e.TgZ(32,"div",51),e.YNc(33,Z9,5,3,"div",52),e.YNc(34,U9,2,19,"ng-template",null,53,e.W1O),e.qZA()(),e.YNc(36,j9,1,12,"app-excel-score-sheet",54),e.YNc(37,q9,1,12,"app-excel-score-sheet",54),e.YNc(38,R9,1,12,"app-excel-score-sheet",54),e.YNc(39,z9,1,12,"app-excel-score-sheet",54),e.qZA()()()}if(2&n){const t=e.MAs(9),i=e.MAs(35),a=e.oxw(),r=e.MAs(5);e.Q6J("msg",a.exportResultService.keyLoading)("show",a.exportResultService.isLoading)("percent",a.exportResultService.percent),e.xp6(1),e.Q6J("ngIf",a.exportLoading),e.xp6(2),e.Q6J("hasBackdrop",a.sAztMatDrawerService.hasBackdrop),e.xp6(1),e.s9C("opened",a.sAztMatDrawerService.isOpenSideNav?"true":"false"),e.Q6J("ngClass",e.WLB(34,H9,a.isMobileDevice,!a.isMobileDevice))("mode",a.sAztMatDrawerService.mode),e.xp6(2),e.Q6J("ngClass",e.VKq(37,J9,a.isMobileDevice)),e.xp6(1),e.Q6J("ngIf",a.isOfflineExam)("ngIfElse",t),e.xp6(3),e.Q6J("ngClass",e.VKq(39,K9,!a.isMobileDevice&&a.sAztMatDrawerService.isOpenSideNav)),e.xp6(1),e.Q6J("ngClass",e.VKq(41,G9,!a.isMobileDevice&&a.sAztMatDrawerService.isOpenSideNav)),e.xp6(2),e.Q6J("ngIf",!a.sAztMatDrawerService.isOpenSideNav||a.isMobileDevice),e.xp6(1),e.Q6J("ngIf",a.sAztMatDrawerService.isOpenSideNav&&!a.isMobileDevice),e.xp6(3),e.Q6J("isServerSearch",!0)("placeholder",e.lcZ(18,30,"lang_testbank_tested_list_search"))("searchContentObj",a.searchContentObj)("styleInput",a.styleInput),e.xp6(5),e.Q6J("matTooltip",e.lcZ(23,32,a.showList?"lang_auto_hien_thi_dang_luoi":"lang_auto_hien_thi_dang_danh_sach")),e.xp6(2),e.Q6J("ngIf",!a.showList),e.xp6(1),e.Q6J("ngIf",a.showList),e.xp6(2),e.Q6J("matMenuTriggerFor",r),e.xp6(5),e.Q6J("ngClass",e.VKq(43,Y9,a.isMobileDevice||!a.sAztMatDrawerService.isOpenSideNav)),e.xp6(1),e.Q6J("ngIf",a.noDataSearch&&0==a.allViewExamResultObjsOfStudentByClassroom.length&&0!=a.allRawExamResultObjsOfStudentByClassroom.length)("ngIfElse",i),e.xp6(3),e.Q6J("ngIf",a.examObj),e.xp6(1),e.Q6J("ngIf",a.examObj),e.xp6(1),e.Q6J("ngIf",a.examObj),e.xp6(1),e.Q6J("ngIf",a.examObj)}}function V9(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"a",81),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.exportToExcel("lastTime"))}),e.O4$(),e.TgZ(2,"svg",82),e._UZ(3,"path",83)(4,"polyline",84)(5,"line",85),e.qZA(),e._uU(6),e.ALo(7,"mytranslate"),e.qZA()()}2&n&&(e.xp6(6),e.hij(" ",e.lcZ(7,1,"lang_testbank_tested_list_export_excel_last_exam")," "))}function W9(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"a",86),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.exportToExcel("highest"))}),e.O4$(),e.TgZ(2,"svg",82),e._UZ(3,"path",83)(4,"polyline",84)(5,"line",85),e.qZA(),e._uU(6),e.ALo(7,"mytranslate"),e.qZA()()}2&n&&(e.xp6(6),e.hij(" ",e.lcZ(7,1,"lang_testbank_tested_list_export_excel_highest_point")," "))}function X9(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"a",87),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.exportToExcel("firstTime"))}),e.O4$(),e.TgZ(2,"svg",82),e._UZ(3,"path",83)(4,"polyline",84)(5,"line",85),e.qZA(),e._uU(6),e.ALo(7,"mytranslate"),e.qZA()()}2&n&&(e.xp6(6),e.hij(" ",e.lcZ(7,1,"lang_testbank_tested_list_export_excel_first_time_score")," "))}function eF(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"a",88),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.exportToExcel("allTime"))}),e.O4$(),e.TgZ(2,"svg",82),e._UZ(3,"path",83)(4,"polyline",84)(5,"line",85),e.qZA(),e._uU(6),e.ALo(7,"mytranslate"),e.qZA()()}2&n&&(e.xp6(6),e.hij(" ",e.lcZ(7,1,"lang_testbank_tested_list_export_excel_all_exam")," "))}function tF(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"a",89),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.exportToPDF())}),e.O4$(),e.TgZ(2,"svg",90),e._UZ(3,"path",91)(4,"polyline",92)(5,"line",93)(6,"line",94)(7,"line",95),e.qZA(),e._uU(8),e.ALo(9,"mytranslate"),e.qZA()()}2&n&&(e.xp6(8),e.hij(" ",e.lcZ(9,1,"lang_testbank_tested_list_export_pdf_last")," "))}function nF(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"a",96),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.exportToPDF("highest"))}),e.O4$(),e.TgZ(2,"svg",90),e._UZ(3,"path",91)(4,"polyline",92)(5,"line",93)(6,"line",94)(7,"line",95),e.qZA(),e._uU(8),e.ALo(9,"mytranslate"),e.qZA()()}2&n&&(e.xp6(8),e.hij(" ",e.lcZ(9,1,"lang_testbank_tested_list_export_pdf_point_bigger")," "))}function iF(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"a",97),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.exportToPDF("first"))}),e.O4$(),e.TgZ(2,"svg",90),e._UZ(3,"path",91)(4,"polyline",92)(5,"line",93)(6,"line",94)(7,"line",95),e.qZA(),e._uU(8),e.ALo(9,"mytranslate"),e.qZA()()}2&n&&(e.xp6(8),e.hij(" ",e.lcZ(9,1,"lang_testbank_tested_list_export_pdf_fisrt")," "))}let oF=(()=>{class n extends xe.Q{set drawer(t){this.sAztMatDrawerService.resizeDrawerHeight(!0,t)}changeStatusNav(){this.isMobileDevice&&(document.body.style.overflow="auto")}getStatusSideNav(){if(window.innerWidth>980){let t=this.examFilterService.getStatusSideNav("exam");t&&"close"==t?this.sAztMatDrawerService.closeDrawer():this.sAztMatDrawerService.openDrawer()}}_viewDataBySortSearchAndFilter(){let t=this.allRawExamResultObjsOfStudentByClassroom.map(r=>({...r}));var i=this.sAztExamResultListSortService._getCurrentSortTypeOfSetting();t=this.sAztExamResultListSortService._sortExamResultObjsBySettingObjByClassroom(t,this.hasEssayQuestion,i);let a=t.find(r=>r.classObj?.id==this.currentSelectClassroomId)?.classObj?.classroomGroup?.id;t.map(r=>r.showOnTab=r.classObj?.classroomGroup?.id==a),this.allViewExamResultObjsOfStudentByClassroom=t,setTimeout(()=>{this.loadingResultList=!1},20)}search(t){this.searchContentObj=t,this.getStudentResultByPage(1,!0)}changeFilterEvent(){this.allViewExamResultObjsOfStudentByClassroom=[],this.loadingResultList=!0,this.getCounterStudentOfClassroomFiltered().subscribe(t=>{this.getStudentResultByPage(1)})}getCounterStudentOfClassroomFiltered(){return new ee.y(t=>{let a,r,i=this.examResultFilterService.getDefaultFilterObj();i&&(i.isMarked&&(a=1),i.isNotMarked&&(a=0),i.isMarked&&i.isNotMarked&&(a=2),i.isOnTest&&(r=0),i.isNotTested&&(r=-1),i.isOnTest&&i.isNotTested&&(r=2)),this.examPageResultService.apiExamPageResultListExamClassroomsGet(this.examId,r,a).subscribe(s=>{s.success&&s.data?.objs&&s.data?.objs.length?(s.data?.objs.forEach(l=>{this.allRawExamResultObjsOfStudentByClassroom.forEach(c=>{c.classObj?.id==l.id&&(0==l.totalTested&&(c.results=[]),c.countSubmitted=l.totalTested)},this.allRawExamResultObjsOfStudentByClassroom)}),t.next(!0),t.complete()):(t.next(!1),t.complete(),this.stopStatusObj())})})}changeShowTypeEvent(){this.showList=!this.showList,this.browserStorageService.saveSimpleStorage("save_show_list_exam_result",(this.showList?1:0).toString())}changeSortEvent(t){let i=!1;"isSortByNameAsc"==t&&this.form.controls.isSortByNameAsc.value&&(this.form.controls.isSortByNameAsc.setValue(!1),this.form.controls.isSortByMarkDesc.setValue(!1),this.form.controls.isSortByTimeDesc.setValue(!1),this.form.controls.isSortByNameAsc.setValue(!0),i=!0),"isSortByMarkDesc"==t&&this.form.controls.isSortByMarkDesc.value&&(this.form.controls.isSortByNameAsc.setValue(!1),this.form.controls.isSortByMarkDesc.setValue(!1),this.form.controls.isSortByTimeDesc.setValue(!1),this.form.controls.isSortByMarkDesc.setValue(!0),i=!0),"isSortByTimeDesc"==t&&this.form.controls.isSortByTimeDesc.value&&(this.form.controls.isSortByNameAsc.setValue(!1),this.form.controls.isSortByMarkDesc.setValue(!1),this.form.controls.isSortByTimeDesc.setValue(!1),this.form.controls.isSortByTimeDesc.setValue(!0),i=!0),i?this.sAztExamResultListSortService._saveSortTypeOfSetting(t):this.sAztExamResultListSortService._removeSortTypeOfSetting(),this._viewDataBySortSearchAndFilter()}processDataForExcel(t){var i=[];return t.forEach(a=>{a.results=this.mapQuestionWithAnswerForExportExcel(this.sortService.sortFirstNameStudents(a.results??new Array),this.exportQuestionObjs),a.results=this.sAztExamResultListSortService._changeExamResultStatusForOneClassroom(this.parseInfoFieldForStudentObjsInExportExcel(a.results),this.hasEssayQuestion),i.push(a)}),i}isNewInfoFieldFormatInExportExcel(t){var i=!1;if(null!=t)for(var a=0;a<t.length;a++)if(t[a].hasOwnProperty("contents")){i=!0;break}return i}parseInfoFieldForStudentObjsInExportExcel(t){var i=[];for(let s=0;s<t.length;s++){var a=this.commonService.myParseJson(t[s].infors??"")??[];if(this.isNewInfoFieldFormatInExportExcel(a))if(null!=a){var r=new Array;a.forEach(l=>{l.contents&&1==l.contents.length?r.push({key:l.title,value:l.contents[0]}):l.contents&&l.contents.length>1&&r.push({key:l.title,value:l.contents.join(", ")})}),t[s].inforsParse=r}else t[s].inforsParse=new Array;else t[s].inforsParse=this.commonService.myParseJson(t[s].infors??"")??[];i.push(t[s])}return i}mapQuestionWithAnswerForExportExcel(t,i){var a=[];return t.forEach(r=>{if(""!=r.answers&&null!=r.answers&&"[]"!=r.answers){var s=this.commonService.willDeleteParseJson(r.answers),l=[];i.forEach(c=>{for(var u={QuestionId:c.questionId,Answer:"",index:c.sort},m=0;m<s.length;m++)if(s[m].QuestionId==c.questionId&&s[m].AnswerContent&&s[m].AnswerContent.length>0){u.Answer=s[m].AnswerContent[0].Content;break}l.push(u)}),a.push({...r,results:l})}else l=[],i.forEach(u=>{l.push({QuestionId:u.questionId,Answer:"",index:u.sort})}),a.push({...r,results:l})}),a}exportToExcel(t){this.sAztDialogService.open(ML,{data:{classroomWithGroup:this.classroomWithGroup,exportType:t},restoreFocus:!1,width:"750px"}).afterClosed().subscribe(i=>{i&&this.initializeExport(t,i)})}initializeExport(t,i){let a="";this.commonService.myTranslate(["lang_auto_dang_khoi_tao_du_lieu"]).subscribe(l=>{a=l.lang_auto_dang_khoi_tao_du_lieu}),this.exportLoading=!0,Vp.openLoadingEffect(a);const s={lastTime:()=>this.testedListApiService.getTestedLastMark("export_tool",this.examId,i),highest:()=>this.testedListApiService.getTestedHighestMark("export_tool",this.examId,i),firstTime:()=>this.testedListApiService.getTestedFirstMark("export_tool",this.examId,i),allTime:()=>this.testedListApiService.getTestedAllResult("export_tool",this.examId,i)}[t];s&&this.waitDestroy(s().subscribe(l=>this.runActionExport(t,l)))}runActionExport(t,i){const s=(i.data?.studentsInClassResults?.reduce((l,c)=>l+(c.results?.length??0),0)??0)+(i.data?.studentsNotInClassResults.length??0)>100;this.checkVipAccountService.checkRunActionVip(s,EL.TI.TEACHER,l=>{if(l)return this.handleApiResponse(t,i);const c={returnUrl:this.commonService.getCurrentUrlWithoutLocale(),title:"lang_azt_record_count_exceeds_limit",description:"lang_azt_export_exceeds_100_records",titleBtnDestroy:"lang_payment_return_continue_buy"};this.sAztDialogService.open(SL.z,{data:c,hasBackdrop:!1}).afterClosed().subscribe(u=>{if(!u){const m=this.truncateResults(i);this.handleApiResponse(t,m)}})})}truncateResults(t){if(!t||!t.data)return t;let i=t.data.studentsInClassResults,a=t.data.studentsNotInClassResults,r=i?.reduce((s,l)=>s+(l?.results?.length??0),0)??0;if(r<=100)a=a.slice(0,100-r);else{let s=r-100;for(let l of i??[])if((l?.results?.length??0)>0&&((l?.results?.length??0)>s?(l.results=l?.results?.slice(0,l.results.length-s),s=0):(s-=l?.results?.length??0,l.results=[]),0===s))break;i=i?.filter(l=>l.results?.length),a=[]}return t.data.studentsInClassResults=i,t.data.studentsNotInClassResults=a,t}handleApiResponse(t,i){if(Array.isArray(i)||1!=i.success)return this.showErrorSnack(i.message??""),Vp.closeLoadingEffect(10),void(this.exportLoading=!1);this.commonService.myTranslate(["lang_auto_tap_tin_dang_duoc_tai_xuong"]).subscribe(s=>{Vp.changeMsgLoadingEffect(s.lang_auto_tap_tin_dang_duoc_tai_xuong)});const r={lastTime:()=>this.handleLastTimeData(i.data),highest:()=>this.handleHighestData(i.data),firstTime:()=>this.handleFirstTimeData(i.data),allTime:()=>this.handleAllTimeData(i.data)}[t];r&&r(),setTimeout(()=>{document.getElementById("table_"+t)?.click(),Vp.closeLoadingEffect(10),this.exportLoading=!1},1e3),this.successStatusObj()}handleLastTimeData(t){this.exportQuestionObjs=t?.questionObjs??[],this.totalExamQuestion=t?.totalQuestion??0,this.exportToExcelObjs=this.processStudentResults(t,"studentsNotInClassResults"),this.dataExportLastTime=this.processDataForExcel(t?.studentsInClassResults??[])}handleHighestData(t){this.exportQuestionObjs=t?.questionObjs??[],this.totalExamQuestion=t?.totalQuestion??0,this.highestMark=this.processStudentResults(t,"studentsNotInClassResults"),this.dataExportHighestMark=this.processDataForExcel(t?.studentsInClassResults??[])}handleFirstTimeData(t){this.exportQuestionObjs=t?.questionObjs??[],this.totalExamQuestion=t?.totalQuestion??0,this.firstMark=this.processStudentResults(t,"studentsNotInClassResults"),this.dataExportFirstTime=this.processDataForExcel(t?.studentsInClassResults??[])}handleAllTimeData(t){this.exportQuestionObjs=t?.questionObjs??[],this.totalExamQuestion=t?.totalQuestion??0,this.allTimeMark=this.processStudentResults(t,"studentsNotInClassResults"),this.dataExportAllTime=this.processDataForExcel(t?.studentsInClassResults??[])}processStudentResults(t,i){const a=this.sortResults(t?.[i]??[],t?.hasEssayQuestion??!1),r=this.mapQuestionWithAnswerForExportExcel(a,t?.questionObjs??[]),s=this.parseInfoFieldForStudentObjsInExportExcel(r);return this.sAztExamResultListSortService._changeExamResultStatusForOneClassroom(s,t?.hasEssayQuestion??!1)}sortResults(t,i){return this.form.controls?.isSortByMarkDesc?.value?this.sortService.sortMarkDESC(t,i):this.form.controls?.isSortByTimeDesc?.value?this.sortService.sortTimeDESC(t):this.sortService.sortFirstNameStudents(t)}exportToPDF(t){this.exportResultService.processClasses(this.examObj?.id??0,t).then(()=>{}).catch(i=>{this.commonService.snackError("string"==typeof i?i:i.message)})}scanExamDone(t){t?(this.scanLoading=!0,this.allRawExamResultObjsOfStudentByClassroom=[],this.allViewExamResultObjsOfStudentByClassroom=[],this.getData(),this.showFileScan=!1,this.showButtonScan=!0):this.showButtonScan=!1}closeScanFile(t){t&&(this.showFileScan=!1,0==this.allViewExamResultObjsOfStudentByClassroom.length&&this.selectTabClassroomShow(-1))}openFileScan(t){this.showFileScan=!(!t||!this.loadedJs)&&t}checkHasExamOffline(t){this.offlineExamResultService.apiOfflineExamResultHasOfflineExamGet(t).subscribe(i=>{1==i.success?i.data?.value&&this.homeworkExamService.isPdfExam(this.examObj)?(this.hasExamOffline=!0,this.tokenScanExamOffline=i.data?.value):(this.hasExamOffline=!1,this.tokenScanExamOffline=""):(this.hasExamOffline=!1,this.examOfflineMessage=i.message??""),setTimeout(()=>{this.changeHeaderTitle(),this.stopStatusObj()},this.commonService.getRandomNumber(200,1e3))})}foundClassOfSuccessScanResult(t){t&&(this.mustShownResultId=t)}parseAllUserObjsForMonitorModule(t){let i=this.sAztExamResultListSortService._changeExamResultStatusForAllClassroom(t,this.hasEssayQuestion,!0),a=[];return i.forEach(r=>{r.results&&r.results.length>0&&r.classObj?.id==this.currentSelectClassroomId&&r.results.forEach(s=>{var c={userid:s.userId,studentid:s.studentId,username:null,studentname:s.fullName,status:s.isOnTest?1:s.isNotMarked?2:s.isMarked?3:0};this.commonService.isExistInArray(a,c)||a.push(c)})}),a}changeHeaderTitle(){var t=0,i=0;this.allRawExamResultObjsOfStudentByClassroom.forEach(a=>{t+=a.classObj?.countStudents??0,i+=a.classObj?.totalTested??0}),this.totalSubmitted=i,this.totalStudents=t,this.commonService.getTranslate("lang_auto_danh_sach_da_thi").subscribe(a=>{this.headerTitle=a+" ("+this.totalSubmitted+"/"+this.totalStudents+")"})}reloadApi(){this.browserStorageService.removeSimpleSessionStorage("exam_results_shown_class_"+this.examObj?.hashId),this.headerTitle="",this.allRawExamResultObjsOfStudentByClassroom=[],this.allViewExamResultObjsOfStudentByClassroom=[],this.groupClassroomObjsInTestedList=[],this.loadingResultList=!0,this.getData()}selectTabClassroomShow(t){this.currentSelectClassroomId=t,this.loadingResultList=!0,this.getStudentResultByPage(1)}selectPageClassroomShow(t){this.currentSelectClassroomId=t.classroomId??-1,this.getStudentResultByPage(t.page??1)}getStudentResultByPage(t,i){let s,l,a=this.examResultFilterService.getDefaultFilterObj(),r=this.examResultFilterService.totalCustomFilter;a&&(a.isMarked&&(s=1),a.isNotMarked&&(s=0),a.isMarked&&a.isNotMarked&&(s=2),a.isOnTest&&(l=0),a.isNotTested&&(l=-1),a.isOnTest&&a.isNotTested&&(l=2)),this.examPageResultService.apiExamPageResultListResultsGet(this.examId,this.currentSelectClassroomId,this.searchContentObj.searchContent?this.searchContentObj.searchContent:void 0,l,s,1,this.sizePage*t).subscribe(c=>{if(c.success&&c.data?.objs&&c.data?.objs.length){let u=this.allRawExamResultObjsOfStudentByClassroom.find(f=>f.classObj?.id==this.currentSelectClassroomId)?.classObj?.classroomGroup?.id;this.allRawExamResultObjsOfStudentByClassroom.forEach(f=>{f.classObj?.id==this.currentSelectClassroomId&&(f.results=this.convertStudentResults(c.data?.objs??[])),f.showOnTab=f.classObj?.classroomGroup?.id==u},this.allRawExamResultObjsOfStudentByClassroom),this.allRawExamResultObjsOfStudentByClassroom=this.sAztExamResultListSortService._changeExamResultStatusForAllClassroom(this.allRawExamResultObjsOfStudentByClassroom,this.hasEssayQuestion,!0),this.checkHasExamOffline(this.examObj?.hashId??""),this.canNextPage=c.data.next??!1,this.scanLoading=!1,this.isNotTestedYet=!1,(i||""!=this.searchContentObj.searchContent)&&(this.examResultFilterService.clearFilter(),this._viewDataBySortSearchAndFilter(),this.noDataSearch=!1),r?this.getCounterStudentOfClassroomFiltered().subscribe(f=>{this._viewDataBySortSearchAndFilter()}):this._viewDataBySortSearchAndFilter(),-1!=this.currentSelectClassroomId&&(this.allUserObjsForMonitorModule=this.parseAllUserObjsForMonitorModule(this.allRawExamResultObjsOfStudentByClassroom));let p={classroomId:this.currentSelectClassroomId,page:t};this.browserStorageService.saveSimpleSessionStorage("exam_tested_list_v3_classroom_list_shown_"+this.examObj?.hashId,this.commonService.serializeJson(p)),this.successStatusObj()}else i||""!=this.searchContentObj.searchContent?this.noDataSearch=!0:-1!=this.currentSelectClassroomId&&this.currentSelectClassroomId||r?(this.isNotTestedYet=!1,this.allRawExamResultObjsOfStudentByClassroom=this.sAztExamResultListSortService._changeExamResultStatusForAllClassroom(this.allRawExamResultObjsOfStudentByClassroom,this.hasEssayQuestion,!0)):this.isNotTestedYet=!0,r?this.getCounterStudentOfClassroomFiltered().subscribe(u=>{this._viewDataBySortSearchAndFilter()}):this._viewDataBySortSearchAndFilter(),this.checkHasExamOffline(this.examObj?.hashId??""),this.canNextPage=!1,this.scanLoading=!1,this.stopStatusObj()})}convertStudentResults(t){let i=[];return t.forEach(a=>{let r={id:a.studentId,resultId:a.id,studentId:a.studentId,classroomIds:[a.classroomId??-1],userId:a.userId,fullName:a.attendeeName,nameImages:a.attendeeNameImage,birthday:a.attendeeBirthDay,mark:a.mark,startedTest:a.startedTest,confirmedAt:a.confirmedAt,status:a.testStatus,createdAt:a.createdAt,avatar:a.attendeeAvatar,isOffline:a.isOffline,subjectMarkValues:a.subjectMarks,studentCode:a.studentCode,offlineMixQuestionHashId:a.rawOfflineMixQuestionId,filesParse:this.commonService.myParseJson(a.files??""),totalExamResultObjs:0,checkBoxGroupControl:new h.cw({isShow:new h.NI(!1,{nonNullable:!0}),selectedCheckbox:new h.NI(!1,{nonNullable:!0})})};i.push(r)}),i}afterRemoveOfflineResult(t){t&&this.reloadApi()}groupingClassroomObj(t){let i=[],a=this.commonService.arrayToDictionary(t??[],r=>r.classObj?.classroomGroup?.id?.toString()??"");return Object.entries(a).forEach(([r,s],l)=>{let c=this.commonService.getFirstOfArray(s);c&&i.push({groupObj:c.classObj?.classroomGroup??{id:-1,name:this.commonService.myTranslateInstant("lang_student_classroom_list_other")},isOwned:!0,classroomObjs:(s.map(u=>u.classObj).filter(this.commonService.notEmpty)??[]).map(u=>({...u,totalRegister:u.totalRegister??0,totalTested:u.totalTested??0,countSubmitted:u.countSubmitted??0,isShareClassroom:!1,isWaitingConfirm:0,teamPermissions:[],permissionObj:{}}))})}),i}getData(){this.testedListApiNewService.getTestedUserObjs("tested_list",this.examId,!1).subscribe(t=>{if(1==t.success){this.initDataTestedList=t.data??{studentsNotInClassResults:[]};let i=1==this.initDataTestedList.studentsInClassResults?.length&&-1==this.initDataTestedList.studentsInClassResults[0].classObj?.id,a=!!i;i||(this.groupClassroomObjsInTestedList=this.groupingClassroomObj(this.initDataTestedList.studentsInClassResults)),this.examObj=t.data?.examObj,this.maxGroupQuestion=t.data?.maxGroupId??0;let r=this.commonService.getMyQueryParam("backto")??"",s=this.commonService.getMyQueryParam("filterBy")??"";if(s&&(r=this.commonService.plusParamToQueryString(r,{filterBy:s})),this.backToLink=r||"/admin/testbank/document-management/0/"+(null!=this.cateId?this.cateId:0)+"/1",this.examStudents=t.data?.examStudents??[],this.isOfflineExam=this.homeworkExamService.isOfflineExam(this.examObj),this.countEssayQuestion=this.sAztExamResultListSortService._counterTotalEssayOfQuestionObjs(t.data?.questionObjs??[]),this.hasEssayQuestion=t.data?.hasEssayQuestion??!1,this.classroomWithGroup=t.data?.classroomWithGroup??[],t.data?.studentsInClassResults&&t.data?.studentsInClassResults.length>0){t.data?.studentsInClassResults.forEach(c=>c.showOnTab=a),this.allRawExamResultObjsOfStudentByClassroom=t.data?.studentsInClassResults;let l=this.commonService.myParseJson(this.browserStorageService.getSimpleSessionStorage("exam_tested_list_v3_classroom_list_shown_"+this.examObj?.hashId)??"")??{};this.currentSelectClassroomId=l&&l.classroomId&&this.findClassroomDataByClassroomId(this.allRawExamResultObjsOfStudentByClassroom,l.classroomId.toString())?l.classroomId:t.data?.studentsInClassResults[0].classObj?.id??-1,this.getStudentResultByPage(1)}else this.checkHasExamOffline(this.examObj?.hashId??""),this.loadingResultList=!1,this.isNotTestedYet=!0,this.scanLoading=!1,this.successStatusObj()}else{if(this.scanLoading=!1,this.isNotTestedYet=!0,t.data&&t.data.errorConfigClassroomPermission)this.examObj=t.data.examObj,this.checkHasExamOffline(this.examObj?.hashId??""),this.stopStatusObj();else{let i=this.commonService.getMyQueryParam("backto")??"",a=this.commonService.getMyQueryParam("filterBy")??"";a&&(i=this.commonService.plusParamToQueryString(i,{filterBy:a})),this.backToLink=i||"/admin/testbank/document-management/0/"+(null!=this.cateId?this.cateId:0)+"/1",this.showErrorSnack(t.message??"")}this.loadingResultList=!1}})}findClassroomDataByClassroomId(t,i){for(var a of t)if(a.classObj?.id?.toString()==i)return!0;return!1}loadingFileJs(){var t=this;return new Promise((i,a)=>{var r=[{source:this.monitorService.getTmpVersionMonitor(),name:"listactive.js"},{source:this.cdnService.registerJsCdn("min.imgsdk"),name:"min.imgsdk"},{source:this.cdnService.registerJsCdn("min.imgsdk_loader"),name:"min.imgsdk_loader"}];this.commonService.loadScriptPromises(r).then((0,Yi.Z)(function*(){setTimeout(()=>{window.hasOwnProperty("imgsdk")?typeof imgsdk<"u"&&imgsdk?i(!0):a(new Error("lang_core_lib_not_load")):(t.countRetryLoadJS++,t.countRetryLoadJS>3?a(new Error("lang_core_lib_not_load")):t.loadingFileJs())},1e3)})).catch(s=>{a(new Error("lang_core_lib_not_load"))})})}ngOnInit(){super.ngOnInit(),this.initStatusObj(),this.getStatusSideNav(),(0,ne.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.cateId=Number(this.activeRoute.snapshot.paramMap.get("cat_id"))??0,this.examId=Number(this.activeRoute.snapshot.paramMap.get("id"))??0,this.resultId=Number(this.activeRoute.snapshot.paramMap.get("result_id"))??0,this.showList=!!Number(this.browserStorageService.getSimpleStorage("save_show_list_exam_result"));let t=this.commonService.getMyQueryParam("backto")??"";this.backFromStudentView=`/admin/testbank/exam-results-list/${this.cateId}/${this.examId}/${this.resultId}`,t&&(this.backFromStudentView=`/admin/testbank/exam-results-list/${this.cateId}/${this.examId}/${this.resultId}?backto=`+encodeURIComponent(t)),this.loadingFileJs().then(()=>{this.loadedJs=!0,this.getData()}).catch(i=>{this.loadedJs=!1,this.showErrorSnack(this.commonService.myTranslateInstant(i.message)??"")})}),this.commonService.translateMetaData({title:"lang_cms_test_tested_list_title",description:"lang_cms_test_tested_list_description",image:"lang_cms_test_image"}),this.waitDestroy(this.mobileWebviewService.getTestbankReloadTestedListSubscriber().subscribe(()=>{this.scanExamDone(!0)}))}ngOnDestroy(){this.globalService.stopIntervalFunc("tested_list"),document.body.style.overflow="auto",super.ngOnDestroy()}constructor(t,i,a,r,s,l,c,u,m,p,f,b,L,N,R,j,G,ae,W){super(),this.sortService=t,this.examFilterService=i,this.examPageResultService=a,this.testedListApiNewService=r,this.testedListApiService=s,this.offlineExamResultService=l,this.homeworkExamService=c,this.globalService=u,this.activeRoute=m,this.monitorService=p,this.cdnService=f,this.exportResultService=b,this.examResultFilterService=L,this.sAztExamResultListSortService=N,this.sAztDialogService=R,this.mobileWebviewService=j,this.browserStorageService=G,this.sAztMatDrawerService=ae,this.checkVipAccountService=W,this.dataExportFirstTime=[],this.dataExportHighestMark=[],this.dataExportLastTime=[],this.dataExportAllTime=[],this.exportQuestionObjs=[],this.exportToExcelObjs=[],this.highestMark=[],this.firstMark=[],this.allTimeMark=[],this.exportLoading=!1,this.initDataTestedList={studentsNotInClassResults:[]},this.allUserObjsForMonitorModule=[],this.examStudents=[],this.groupClassroomObjsInTestedList=[],this.allRawExamResultObjsOfStudentByClassroom=[],this.allViewExamResultObjsOfStudentByClassroom=[],this.examId=0,this.cateId=0,this.backToLink="",this.backFromStudentView="",this.sizePage=100,this.maxGroupQuestion=0,this.isNotTestedYet=!1,this.showButtonScan=!0,this.hasEssayQuestion=!1,this.countEssayQuestion=0,this.totalStudents=0,this.totalSubmitted=0,this.headerTitle="",this.noDataSearch=!1,this.totalExamQuestion=0,this.loadingResultList=!1,this.canNextPage=!1,this.showFileScan=!1,this.hasExamOffline=!1,this.examOfflineMessage="",this.tokenScanExamOffline="",this.scanLoading=!1,this.isOfflineExam=!1,this.resultId=0,this.mustShownResultId=0,this.loadedJs=!1,this.countRetryLoadJS=0,this.currentSelectClassroomId=-1,this.searchContentObj=new t_.h,this.styleInput="py-1",this.showList=!1,this.classroomWithGroup=[],this.form=new h.cw({isSortByNameAsc:new h.NI(this.sAztExamResultListSortService._getSortTypeOfSetting("isSortByNameAsc"),{nonNullable:!0}),isSortByMarkDesc:new h.NI(this.sAztExamResultListSortService._getSortTypeOfSetting("isSortByMarkDesc"),{nonNullable:!0}),isSortByTimeDesc:new h.NI(this.sAztExamResultListSortService._getSortTypeOfSetting("isSortByTimeDesc"),{nonNullable:!0})})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(th.V),e.Y36(Kx),e.Y36(un.DR),e.Y36(LL),e.Y36(Rx.X),e.Y36(Za.$4),e.Y36(eh.v),e.Y36(i_.q),e.Y36(E.gz),e.Y36(BL.G),e.Y36(tr.E),e.Y36(zg.U),e.Y36(Yx),e.Y36(iw.K),e.Y36(qi.C),e.Y36(Ug.r),e.Y36(oa.n),e.Y36(Ad.T),e.Y36(PL.O))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-exam-result-list-new"]],viewQuery:function(t,i){if(1&t&&e.Gf(O9,5),2&t){let a;e.iGM(a=e.CRH())&&(i.drawer=a.first)}},features:[e._Bn([Ad.T]),e.qOj],decls:62,vars:41,consts:[[3,"headerBackToLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],["doneLoading",""],["xPosition","before"],["mainMenu","matMenu"],[1,"dropdown-menu","show","relative","w-72"],[3,"formGroup"],[1,"dropdown-content"],[4,"ngIf"],["azt-track-service","exam-result-list-new-20jmo8LMYqG","for","isSortByName",1,"dropdown-item","cursor-pointer",3,"click"],[1,"flex","items-center"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"flex-none","w-4","h-4","mr-2","lucide"],["d","M11 5h4"],["d","M11 9h7"],["d","M11 13h10"],["d","m3 17 3 3 3-3"],["d","M6 18V4"],[1,"form-check","form-switch","ml-auto"],["id","isSortByName","type","checkbox","formControlName","isSortByNameAsc",1,"show-code","form-check-input","ml-2",3,"change"],["azt-track-service","exam-result-list-new-PlRPlXkXka5","for","isSortByMarkDesc",1,"dropdown-item","cursor-pointer",3,"click"],["d","M11 5h10"],["d","M11 13h4"],["id","isSortByMarkDesc","type","checkbox","formControlName","isSortByMarkDesc",1,"show-code","form-check-input","ml-2",3,"change"],["azt-track-service","exam-result-list-new-gV0jdKgcvAo","for","isSortByTimeDesc",1,"dropdown-item","cursor-pointer",3,"click"],["id","isSortByTimeDesc","type","checkbox","formControlName","isSortByTimeDesc",1,"show-code","form-check-input","ml-2",3,"change"],[3,"currentStatusObj"],[3,"msg","show","percent"],[1,"azt-exam-result-list"],[1,"azt-drawer-container","mt-5",3,"hasBackdrop"],[3,"ngClass","mode","opened","closedStart","openedChange"],["drawer",""],[1,"azt-draw-left",2,"overflow-x","hidden",3,"ngClass"],[4,"ngIf","ngIfElse"],["onlineExam",""],[3,"ngClass"],[1,"azt-drawer-content",3,"ngClass"],[1,"flex","box","sm:h-auto","rounded-md","border","border-slate-200/60","dark:border-darkmode-400","p-2","text-slate-500","mb-2"],["azt-track-service","exam-result-list-new-o479Z6DA7","class","btn btn-sm mr-2",3,"matTooltip","click",4,"ngIf"],["azt-track-service","exam-result-list-new-0py_X_1wx7","class","btn btn-sm mr-2",3,"matTooltip","click",4,"ngIf"],[1,"relative","flex","ml-auto"],[1,"mr-2"],[3,"isServerSearch","placeholder","searchContentObj","styleInput","onSearch"],[1,"filter","mr-2"],[3,"changeFilterEvent"],["azt-track-service","exam-result-list-new-uNiCmffiYA",1,"btn","btn-sm","btn-secondary",3,"matTooltip","click"],[1,"menu"],[1,"btn","btn-sm",3,"matMenuTriggerFor"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-menu","w-4","h-4"],["x1","4","y1","12","x2","20","y2","12"],["x1","4","y1","6","x2","20","y2","6"],["x1","4","y1","18","x2","20","y2","18"],[1,"container-fluid","app-content","pr-0",3,"ngClass"],["class","box-content py-2 mt-2",4,"ngIf","ngIfElse"],["allStudentOrStudentFilterBySearchKey",""],[3,"dataScore","dataScoreByClass","maxGroupQuestion","examObj","totalQuestion","exportQuestionObjs","tableType","isSortByMark","isSortByTime","isSortByName","hasEssayQuestion","countEssayQuestion",4,"ngIf"],[3,"initData","classroomWithGroup","examStudents","loadingApi","isNotTestedYet","reloadApi"],[3,"initData","examStudents","classroomWithGroup","currentSelectedClassroomId","isNotTestedYet","userList","loadingApi","reloadApi"],["azt-track-service","exam-result-list-new-o479Z6DA7",1,"btn","btn-sm","mr-2",3,"matTooltip","click"],["x","3","y","3","width","18","height","18","rx","2","ry","2"],["d","M9 3v18"],["d","m14 9 3 3-3 3"],["azt-track-service","exam-result-list-new-0py_X_1wx7",1,"btn","btn-sm","mr-2",3,"matTooltip","click"],["d","m16 15-3-3 3-3"],["xmlns","http://www.w3.org/2000/svg","width","30","height","30","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4"],["x1","8","y1","6","x2","21","y2","6"],["x1","8","y1","12","x2","21","y2","12"],["x1","8","y1","18","x2","21","y2","18"],["x1","3","y1","6","x2","3.01","y2","6"],["x1","3","y1","12","x2","3.01","y2","12"],["x1","3","y1","18","x2","3.01","y2","18"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4"],["d","M21 3H3v7h18V3z"],["d","M21 14h-5v7h5v-7z"],["d","M12 14H3v7h9v-7z"],[1,"box-content","py-2","mt-2"],[1,"text-center","mt-5"],[1,"h4"],[3,"noDataSearch","backToLink","examResultObjsByClassroom","isNotTestedYet","showButtonScan","isOpenSideNav","hasEssayQuestion","showFileScan","groupClassroomObjs","obj","scanLoading","isMobile","currentClassroomId","headerTitle","mustShownResultId","loadingResultList","canNextPage","showList","removeOfflineResultEmitter","selectTabClassroomEmitter","selectPageClassroomEmitter","notTestedOpenFileScan"],[3,"examObj","loadedJs","hasExamOffline","examOfflineMessage","scanExamDone",4,"ngIf"],[3,"examObj","loadedJs","hasExamOffline","examOfflineMessage","scanExamDone"],[3,"dataScore","dataScoreByClass","maxGroupQuestion","examObj","totalQuestion","exportQuestionObjs","tableType","isSortByMark","isSortByTime","isSortByName","hasEssayQuestion","countEssayQuestion"],["azt-track-service","exam-result-list-new-esmVBDKJjs",1,"dropdown-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide","mr-2","flex-none"],["d","M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"],["points","7 10 12 15 17 10"],["x1","12","y1","15","x2","12","y2","3"],["azt-track-service","exam-result-list-new-dlmCFDcvLN",1,"dropdown-item",3,"click"],["azt-track-service","exam-result-list-new-IJMCAvs_Zj",1,"dropdown-item",3,"click"],["azt-track-service","exam-result-list-new-zKngslcUte",1,"dropdown-item",3,"click"],["azt-track-service","exam-result-list-new-GFRfEkklS3",1,"dropdown-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"flex-none","w-4","h-4","mr-2"],["d","M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],["points","14 2 14 8 20 8"],["x1","16","y1","13","x2","8","y2","13"],["x1","16","y1","17","x2","8","y2","17"],["x1","10","y1","9","x2","8","y2","9"],["azt-track-service","exam-result-list-new-CFoSFfiD7N0",1,"dropdown-item",3,"click"],["azt-track-service","exam-result-list-new-K6OMK-6lFqk",1,"dropdown-item",3,"click"]],template:function(t,i){if(1&t&&(e.TgZ(0,"teacher-layout",0),e.YNc(1,I9,1,1,"azt-loading-effect",1),e.YNc(2,$9,40,45,"ng-template",null,2,e.W1O),e.qZA(),e.TgZ(4,"mat-menu",3,4)(6,"div",5)(7,"form",6)(8,"ul",7),e.YNc(9,V9,8,3,"li",8),e.ALo(10,"viewPermission"),e.YNc(11,W9,8,3,"li",8),e.ALo(12,"viewPermission"),e.YNc(13,X9,8,3,"li",8),e.ALo(14,"viewPermission"),e.YNc(15,eF,8,3,"li",8),e.ALo(16,"viewPermission"),e.YNc(17,tF,10,3,"li",8),e.ALo(18,"viewPermission"),e.YNc(19,nF,10,3,"li",8),e.ALo(20,"viewPermission"),e.YNc(21,iF,10,3,"li",8),e.ALo(22,"viewPermission"),e.TgZ(23,"li")(24,"label",9),e.NdJ("click",function(r){return r.stopPropagation()}),e.TgZ(25,"span",10),e.O4$(),e.TgZ(26,"svg",11),e._UZ(27,"path",12)(28,"path",13)(29,"path",14)(30,"path",15)(31,"path",16),e.qZA(),e._uU(32),e.ALo(33,"mytranslate"),e.qZA(),e.kcU(),e.TgZ(34,"div",17)(35,"input",18),e.NdJ("change",function(){return i.changeSortEvent("isSortByNameAsc")}),e.qZA()()()(),e.TgZ(36,"li")(37,"label",19),e.NdJ("click",function(r){return r.stopPropagation()}),e.TgZ(38,"span",10),e.O4$(),e.TgZ(39,"svg",11),e._UZ(40,"path",20)(41,"path",13)(42,"path",21)(43,"path",15)(44,"path",16),e.qZA(),e._uU(45),e.ALo(46,"mytranslate"),e.qZA(),e.kcU(),e.TgZ(47,"div",17)(48,"input",22),e.NdJ("change",function(){return i.changeSortEvent("isSortByMarkDesc")}),e.qZA()()()(),e.TgZ(49,"li")(50,"label",23),e.NdJ("click",function(r){return r.stopPropagation()}),e.TgZ(51,"span",10),e.O4$(),e.TgZ(52,"svg",11),e._UZ(53,"path",20)(54,"path",13)(55,"path",21)(56,"path",15)(57,"path",16),e.qZA(),e._uU(58),e.ALo(59,"mytranslate"),e.qZA(),e.kcU(),e.TgZ(60,"div",17)(61,"input",24),e.NdJ("change",function(){return i.changeSortEvent("isSortByTimeDesc")}),e.qZA()()()()()()()()),2&t){const a=e.MAs(3);e.Q6J("headerBackToLink",i.backToLink),e.xp6(1),e.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a),e.xp6(6),e.Q6J("formGroup",i.form),e.xp6(2),e.Q6J("ngIf",e.xi3(10,14,i.examObj,"exam")),e.xp6(2),e.Q6J("ngIf",e.xi3(12,17,i.examObj,"exam")),e.xp6(2),e.Q6J("ngIf",e.xi3(14,20,i.examObj,"exam")),e.xp6(2),e.Q6J("ngIf",e.xi3(16,23,i.examObj,"exam")),e.xp6(2),e.Q6J("ngIf",e.xi3(18,26,i.examObj,"exam")),e.xp6(2),e.Q6J("ngIf",e.xi3(20,29,i.examObj,"exam")),e.xp6(2),e.Q6J("ngIf",e.xi3(22,32,i.examObj,"exam")),e.xp6(11),e.hij(" ",e.lcZ(33,35,"lang_testbank_tested_list_sort_name")," "),e.xp6(13),e.hij(" ",e.lcZ(46,37,"lang_testbank_tested_list_sort_point")," "),e.xp6(13),e.hij(" ",e.lcZ(59,39,"lang_testbank_tested_list_sort_time")," ")}},dependencies:[F.mk,F.O5,Qi.VK,Qi.p6,Hs.jA,Hs.kh,Hs.LW,Ai.gM,h._Y,h.Wl,h.JJ,h.JL,h.sg,h.u,vi.l,wt.M,Hg,gm.W,wo._,P8,yB,c7,Y7,Vp,X7,E9,ye.JV,ye.J7],encapsulation:2}),n})(),ww=(()=>{class n{getDefaultFilterObj(){var t=this._getInitFilterObj(),i=this.commonService.castJsonToObj(this.browserStorageService.getSimpleStorage(this.localStorageSlug)??"");return i&&(t=i),t}clearFilter(){return this.filterObj=this._getInitFilterObj(),this.saveFilterObj(),this.filterObj}saveFilterObj(){this.browserStorageService.saveSimpleStorage(this.localStorageSlug,this.commonService.serializeJson(this.filterObj)),this.totalCustomFilter=this._countChecked(this.filterObj)}_countChecked(t){var i=0;for(var a in t)!0===t[a]&&(i+=1);return i}_getInitFilterObj(){return{isSubmitted:!1,isNotSubmit:!1,isMarked:!1,mustReSubmit:!1}}constructor(t,i){this.commonService=t,this.browserStorageService=i,this.totalCustomFilter=0,this.localStorageSlug="testbank_homework_result_filter_v2",this.filterObj=this.getDefaultFilterObj(),this.totalCustomFilter=this._countChecked(this.filterObj)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(Yn.z),e.LFG(oa.n))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var t2=I(51261);function aF(n,o){1&n&&(e.TgZ(0,"div",3)(1,"span",4),e._UZ(2,"azt-loading-ui"),e.qZA()())}function rF(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",5)(1,"form",6)(2,"div",7)(3,"div",8)(4,"h3",9),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()(),e.TgZ(7,"div",10),e._UZ(8,"editor",11),e.qZA()()()(),e.TgZ(9,"div",12)(10,"button",13),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.closeDialog())}),e._uU(11),e.ALo(12,"mytranslate"),e.qZA(),e.TgZ(13,"button",14),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.saveHomework())}),e._uU(14),e.ALo(15,"mytranslate"),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.form),e.xp6(4),e.hij(" ",e.lcZ(6,6,"lang_auto_noi_dung")," "),e.xp6(3),e.s9C("apiKey",t.tinyEditorKey),e.Q6J("init",t.initDataEditor),e.xp6(3),e.hij(" ",e.lcZ(12,8,"lang_auto_huy")," "),e.xp6(3),e.hij(" ",e.lcZ(15,10,"lang_auto_luu")," ")}}let sF=(()=>{class n extends mt.e{closeDialog(){this.dialogRef.close()}saveHomework(){if(this.initStatusObj(),this.form.invalid)this.showErrorSnack("lang_auto_vui_long_nhap_day_du_thong_tin");else{var i=this.form.getRawValue().homeworkDescription;this.uploadImageOfHomeworkService.replaceImageInContent(i).subscribe(a=>{if(null==a.errorMessage){let l={content:this.zipDataService.convertContentGzip(a.content)};this.waitDestroy(this.documentConfigService.apiDocumentConfigSaveHomeworkConfigPost(this.homeworkHashId,l).subscribe(c=>{1==c.success?(c.data&&c.data.objs&&this.data.callback(c.data.objs[0]),this.closeDialog(),this.showSuccessSnack("lang_auto_luu_thanh_cong")):this.errorStatusObj(c.message??"",!0)}))}else this.showErrorSnack(a.errorMessage),this.stopStatusObj()})}}getHomework(t){this.initStatusObj(),this.waitDestroy(this.documentConfigService.apiDocumentConfigGetHomeworkConfigDataV2Post(t,[]).subscribe(i=>{if(1==i.success){this.homeworkObj=i.data?.homeworkObj;let a=this.homeworkObj?.content?this.zipDataService.decodeContentGzip(this.homeworkObj?.content):"";this.form.patchValue({homeworkDescription:a}),this.successStatusObj()}else this.errorStatusObj(i.message??"",!0)}))}ngOnChanges(){this.initDataEditor=this.sAztTinyMceService.initConfigForTeacher()}ngOnInit(){this.initDataEditor=this.sAztTinyMceService.initConfigForTeacher(),super.ngOnInit()}constructor(t,i,a,r,s,l){super(l,s),this.sAztTinyMceService=t,this.zipDataService=i,this.documentConfigService=a,this.uploadImageOfHomeworkService=r,this.dialogRef=s,this.data=l,this.permissionTypes=pm.y,this.homeworkId=0,this.homeworkHashId="",this.homeworkObj=void 0,this.initDataEditor={},this.tinyEditorKey=Z.N.tinyEditorKey,this.homeworkHashId=l.hashId,this.getHomework(this.homeworkHashId),this.form=new h.cw({homeworkDescription:new h.NI("",{nonNullable:!0})})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Uv.y),e.Y36(Us.a),e.Y36(un.Cq),e.Y36(GA.Z),e.Y36(U.so,8),e.Y36(U.WI,8))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-config-homework"]],features:[e._Bn([{provide:Xn.fM,useClass:KA.WG,deps:[js.Ad,uo.o8]},{provide:Xn.ab,useFactory:md.hx,deps:[Mo.D]}]),e.qOj,e.TTD],decls:4,vars:2,consts:[[1,"box"],["class","azt-icon-loading text-center p-5",4,"ngIf","ngIfElse"],["doneLoading",""],[1,"azt-icon-loading","text-center","p-5"],[1,"w-4","h-4","inline-block"],[1,"setting","p-3"],[3,"formGroup"],["id","document-desc"],[1,"setting-label-textarea"],[1,"text-md","font-medium"],[1,"mt-2"],["formControlName","homeworkDescription",3,"apiKey","init"],[1,"p-3","text-right"],["azt-track-service","config-homework-dialog-lVvTPghlWFp",1,"btn","btn-secondary","w-24","mr-2",3,"click"],["azt-track-service","config-homework-dialog-DfiuQtfSx_I",1,"btn","w-24","btn-primary",3,"click"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0),e.YNc(1,aF,3,0,"div",1),e.YNc(2,rF,16,12,"ng-template",null,2,e.W1O),e.qZA()),2&t){const a=e.MAs(3);e.xp6(1),e.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a)}},dependencies:[F.O5,C.PG,h._Y,h.JJ,h.JL,h.sg,h.u,wt.M,wi.n,ye.JV],encapsulation:2}),n})(),lF=(()=>{class n extends mt.e{constructor(t,i){super(i,t),this.dialogRef=t,this.data=i}handleCloseDialog(){this.dialogRef.close(!1)}handleConfirmDialog(){this.dialogRef.close(!0)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(U.so),e.Y36(U.WI))},n.\u0275cmp=e.Xpm({type:n,selectors:[["testbank-homework-delete-dialog"]],features:[e.qOj],decls:23,vars:12,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5"],[1,"text-md","font-medium","flex","items-center"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-6","h-6","mr-2","text-danger"],["d","M3 6h18"],["d","M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"],["d","M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"],["x1","10","y1","11","x2","10","y2","17"],["x1","14","y1","11","x2","14","y2","17"],[1,"mt-2"],[1,"text-xs","text-slate-500","dark:text-slate-400"],[1,"p-3","text-right"],["azt-track-service","delete-dialog-Bb7ymz69OiI",1,"btn","btn-secondary","w-24","mr-2",3,"click"],["azt-track-service","delete-dialog-5Ii165wkYxm",1,"btn","w-24","btn-danger",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),e.O4$(),e.TgZ(4,"svg",4),e._UZ(5,"path",5)(6,"path",6)(7,"path",7)(8,"line",8)(9,"line",9),e.qZA(),e._uU(10),e.ALo(11,"mytranslate"),e.qZA(),e.kcU(),e.TgZ(12,"div",10)(13,"p",11),e._uU(14),e.ALo(15,"mytranslate"),e.qZA()()()(),e.TgZ(16,"div",12)(17,"button",13),e.NdJ("click",function(){return i.handleCloseDialog()}),e._uU(18),e.ALo(19,"mytranslate"),e.qZA(),e.TgZ(20,"button",14),e.NdJ("click",function(){return i.handleConfirmDialog()}),e._uU(21),e.ALo(22,"mytranslate"),e.qZA()()()),2&t&&(e.xp6(10),e.hij(" ",e.lcZ(11,4,"lang_auto_ban_co_chac_chan_muon_xoa")+" ?"," "),e.xp6(4),e.hij(" ",e.lcZ(15,6,"lang_auto_ban_muon_xoa_file")+" "+i.data.name," "),e.xp6(4),e.hij(" ",e.lcZ(19,8,"lang_auto_dong")," "),e.xp6(3),e.hij(" ",e.lcZ(22,10,"lang_auto_xac_nhan")," "))},dependencies:[ye.JV],encapsulation:2}),n})();var bm=I(44345),cF=I(32443);function uF(n,o){if(1&n&&(e.TgZ(0,"div",10)(1,"span",7),e._UZ(2,"lucide-icon",11),e.qZA(),e.TgZ(3,"span",12),e._uU(4),e.ALo(5,"mytranslate"),e.ALo(6,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.qZA()()),2&n){const t=e.oxw();e.xp6(4),e.hij(" ",e.lcZ(5,1,"lang_auto_bat_dau")+": "+e.lcZ(6,3,t.initData.homeworkObj.startDate)," ")}}function dF(n,o){if(1&n&&e._UZ(0,"azt-share",22),2&n){const t=e.oxw();e.Q6J("objectCodeType",2)("objectCode","HOMEWORK")("objectId",t.initData.homeworkObj.id)("homeworkWithPermissionObj",t.initData.homeworkObj)}}function mF(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",48)(2,"a",49),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.redirectToClassroomDetail())}),e._uU(3),e.qZA()(),e.BQk()}if(2&n){const t=e.oxw(2);e.xp6(2),e.s9C("matTooltip",t.initData.classroomObj.name),e.xp6(1),e.hij(" ",t.initData.classroomObj.name," ")}}function pF(n,o){1&n&&(e.TgZ(0,"div",48)(1,"a",50),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"lang_auto_tat_ca_moi_nguoi")," "))}function hF(n,o){1&n&&(e.TgZ(0,"button",51)(1,"span",7),e._UZ(2,"lucide-icon",52),e.qZA(),e._uU(3),e.ALo(4,"mytranslate"),e.qZA()),2&n&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"lang_auto_them_file")," "))}function AF(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",55),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw(3);return e.KtG(s.onShowFile(r,-1))}),e.TgZ(2,"span",7),e._UZ(3,"lucide-icon",56),e.qZA(),e.TgZ(4,"span",57),e._uU(5),e.qZA()(),e.TgZ(6,"button",58),e.NdJ("click",function(){const r=e.CHM(t).index,s=e.oxw(3);return e.KtG(s.removeFile(r))}),e.ALo(7,"mytranslate"),e.TgZ(8,"span",59),e._UZ(9,"lucide-icon",60),e.qZA()(),e.BQk()}if(2&n){const t=o.$implicit;e.xp6(4),e.s9C("matTooltip",t.name),e.xp6(1),e.hij(" ",t.name," "),e.xp6(1),e.s9C("matTooltip",e.lcZ(7,3,"lang_auto_xoa"))}}function _F(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"div",53),e.YNc(2,AF,10,5,"ng-container",54),e.qZA(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(2),e.Q6J("ngForOf",t.formHomework.files)}}function fF(n,o){1&n&&(e.TgZ(0,"p",61),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_chua_co_file_dinh_kem")," "))}function gF(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",62),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.openConfigDialog())}),e.TgZ(1,"span",7),e._UZ(2,"lucide-icon",63),e.qZA(),e._uU(3),e.ALo(4,"mytranslate"),e.qZA()}2&n&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"lang_auto_sua")," "))}function xF(n,o){if(1&n&&(e.TgZ(0,"div",64),e._UZ(1,"azt-dynamic-hook",65),e.qZA()),2&n){const t=e.oxw(2);let i;e.xp6(1),e.Q6J("content",null!==(i=t.initData.homeworkObj.content)&&void 0!==i?i:"")}}function bF(n,o){1&n&&(e.TgZ(0,"p",66),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_chua_co_noi_dung")," "))}const yw=function(n){return{opacity:n}},vF=function(n){return[n]};function wF(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",23)(1,"h3",24),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.TgZ(4,"div",25)(5,"ul",26)(6,"li",27),e.ALo(7,"editPermission"),e.TgZ(8,"a",28),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.redirectToSetting())}),e.TgZ(9,"span",7),e._UZ(10,"lucide-icon",29),e.qZA(),e._uU(11),e.ALo(12,"mytranslate"),e.qZA()(),e.TgZ(13,"li",27),e.ALo(14,"deletePermission"),e.TgZ(15,"a",30),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.openDeleteHomeworkDialog())}),e.TgZ(16,"span",7),e._UZ(17,"lucide-icon",31),e.qZA(),e._uU(18),e.ALo(19,"mytranslate"),e.qZA()()()()(),e.TgZ(20,"div",32)(21,"div",33)(22,"h3",24),e._uU(23),e.ALo(24,"mytranslate"),e.qZA()(),e.TgZ(25,"div",34),e.YNc(26,mF,4,2,"ng-container",35),e.YNc(27,pF,4,3,"ng-template",null,36,e.W1O),e.qZA()(),e.TgZ(29,"div",37)(30,"div",38)(31,"h3",24),e._uU(32),e.ALo(33,"mytranslate"),e.qZA(),e.TgZ(34,"azt-upload-multiple-box",39),e.NdJ("uploadComplete",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.handleUploadComplete(a))}),e.YNc(35,hF,5,3,"button",40),e.ALo(36,"editPermission"),e.ALo(37,"configPermission"),e.qZA()(),e.TgZ(38,"div",41),e._uU(39),e.ALo(40,"mytranslate"),e.qZA(),e.YNc(41,_F,3,1,"ng-container",35),e.YNc(42,fF,3,3,"ng-template",null,42,e.W1O),e.qZA(),e.TgZ(44,"div",43)(45,"div",33)(46,"h3",24),e._uU(47),e.ALo(48,"mytranslate"),e.qZA(),e.YNc(49,gF,5,3,"button",44),e.ALo(50,"editPermission"),e.ALo(51,"configPermission"),e.qZA(),e.TgZ(52,"div",45),e.YNc(53,xF,2,1,"div",46),e.YNc(54,bF,3,3,"p",47),e.qZA()()}if(2&n){const t=e.MAs(28),i=e.MAs(43),a=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,21,"lang_auto_menu")," "),e.xp6(4),e.Q6J("ngStyle",e.VKq(53,yw,e.xi3(7,23,a.initData.homeworkObj,"homework")?"1":"0.5")),e.xp6(5),e.hij(" ",e.lcZ(12,26,"lang_auto_cai_dat")," "),e.xp6(2),e.Q6J("ngStyle",e.VKq(55,yw,e.xi3(14,28,a.initData.homeworkObj,"homework")?"1":"0.5")),e.xp6(5),e.hij(" ",e.lcZ(19,31,"lang_auto_xoa")," "),e.xp6(5),e.hij(" ",e.lcZ(24,33,"lang_auto_giao_cho")," "),e.xp6(3),e.Q6J("ngIf",a.initData.classroomObj)("ngIfElse",t),e.xp6(6),e.hij(" ",e.lcZ(33,35,"lang_auto_file_dinh_kem")," "),e.xp6(2),e.Q6J("uploadToCdnMenu",a.allUploadToCdnMenuTypes.HOMEWORK)("fileType",e.VKq(57,vF,a.allUploadFileTypes.SYNTHETIC))("notSupportedFile",a.notSupportedFile.WMV)("isDisabled",a.checkAction),e.xp6(1),e.Q6J("ngIf",e.xi3(36,37,a.initData.homeworkObj,"exam")||e.xi3(37,40,a.initData.homeworkObj,"exam")),e.xp6(4),e.hij(" ",e.lcZ(40,43,"lang_auto_ho_tro_file_dinh_danh_anh_pdf_work_excel_audio_hoac_video")," "),e.xp6(2),e.Q6J("ngIf",null==a.formHomework.files?null:a.formHomework.files.length)("ngIfElse",i),e.xp6(6),e.hij(" ",e.lcZ(48,45,"lang_auto_noi_dung")," "),e.xp6(2),e.Q6J("ngIf",e.xi3(50,47,a.initData.homeworkObj,"homework")||e.xi3(51,50,a.initData.homeworkObj,"homework")),e.xp6(4),e.Q6J("ngIf",null==a.initData.homeworkObj?null:a.initData.homeworkObj.content),e.xp6(1),e.Q6J("ngIf",!(null!=a.initData.homeworkObj&&a.initData.homeworkObj.content))}}let yF=(()=>{class n extends xe.Q{toggleShowActions(){this.isShowActions=!this.isShowActions}showCopySuccess(){this.showSuccessSnack("lang_auto_sao_chep_thanh_cong_duong_dan_nop_bai")}copyLinkToClipboard(t){return`${this.commonService.getCurrentDomain()}/bai-tap/${t}`}handleUploadComplete(t){this.formHomework.files?.push(...t);let i={files:JSON.stringify(this.formHomework.files)};this.waitDestroy(this.documentConfigService.apiDocumentConfigSaveHomeworkConfigPost(this.initData.homeworkObj?.hashId??"",i).subscribe(a=>{1==a.success?this.showSuccessSnack("lang_auto_them_file_thanh_cong"):this.errorStatusObj(a.message??"",!0)}))}removeFile(t){this.sAztDialogService.open(lF,{width:"400px",data:this.formHomework.files?.[t],restoreFocus:!1}).afterClosed().subscribe(a=>{if(a){this.formHomework.files?.splice(t,1);let r={files:JSON.stringify(this.formHomework.files)};this.waitDestroy(this.documentConfigService.apiDocumentConfigSaveHomeworkConfigPost(this.initData.homeworkObj?.hashId??"",r).subscribe(s=>{1==s.success?this.showSuccessSnack("lang_auto_xoa_file_thanh_cong"):this.errorStatusObj(s.message??"",!0)}))}})}onShowFile(t,i){let a={...t,index:i};this.sAztDialogService.open(al.q,{maxWidth:"100vw",maxHeight:"100vh",height:"100%",width:"100%",data:{fileOption:a},restoreFocus:!1})}redirectToClassroomDetail(){let t=`/admin/testbank/homework-results-list/${this.initData.homeworkObj?.categoryId??0}/${this.initData.homeworkObj?.id}/${this.initData.homeworkObj?.hashId}`,i=this.commonService.getMyQueryParam("backto")??"";i&&i.includes("shareType")&&(t=`/admin/testbank/homework-results-list/${this.initData.homeworkObj?.categoryId??0}/${this.initData.homeworkObj?.id}/${this.initData.homeworkObj?.hashId}?backto=`+encodeURIComponent(i)),this.myNavigationWithQueryString(`/admin/student/classroom-details/${this.initData.classroomObj?.id}/0`,`?backto=${t}`)}redirectToSetting(){if(this.checkAction){let t=`/admin/testbank/homework-results-list/${this.initData.homeworkObj?.categoryId??0}/${this.initData.homeworkObj?.id}/${this.initData.homeworkObj?.hashId}`,i=this.commonService.getMyQueryParam("backto")??"";i&&i.includes("shareType")&&(t=`/admin/testbank/homework-results-list/${this.initData.homeworkObj?.categoryId??0}/${this.initData.homeworkObj?.id}/${this.initData.homeworkObj?.hashId}?backto=`+encodeURIComponent(i)),this.myNavigationWithQueryString(`/admin/testbank/config-homework/${this.initData.homeworkObj?.categoryId??0}/${this.initData.homeworkObj?.hashId}`,`?backto=${t}`)}else this.openDialogWaring("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay")}openDialogWaring(t){this.commonService.getTranslate(t).subscribe(i=>{this.sAztDialogService.open(oh.C,{data:{isShow:!0,content:i},restoreFocus:!1,width:"500px"})})}openDeleteHomeworkDialog(){this.checkAction?this.sAztDialogService.open(Wx,{data:{homeworkObj:this.initData.homeworkObj,isShow:!0},restoreFocus:!1}).afterClosed().subscribe(a=>{a&&this.commonService.myNavigation("/admin/testbank/document-management/1/0/1")}):this.openDialogWaring("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay")}openConfigDialog(){this.sAztDialogService.open(sF,{width:"850px",data:{callback:this.callbackConfigDialog.bind(this),showConfig:{description:!0},hashId:this.initData.homeworkObj?.hashId??""},restoreFocus:!1})}callbackConfigDialog(t){this.initData.homeworkObj&&(this.initData.homeworkObj.name=t.name??"",this.initData.homeworkObj.content=this.zipDataService.decodeContentGzip(t.content??""),this.formHomework.content=this.initData.homeworkObj.content.length>100?this.initData.homeworkObj.content.slice(0,100)+"...":this.initData.homeworkObj.content)}processData(){this.initData.homeworkObj&&(this.formHomework.files=this.commonService.myParseJson(this.initData.homeworkObj.files??"")??[],this.initData.homeworkObj.content=this.zipDataService.decodeContentGzip(this.initData.homeworkObj.content??""),this.formHomework.content=this.initData.homeworkObj.content.length>100?this.initData.homeworkObj.content.slice(0,100)+"...":this.initData.homeworkObj.content)}ngOnInit(){this.checkAction=this.permissionService.hasEditPermission("homework",this.initData.homeworkObj),this.processData(),super.ngOnInit()}constructor(t,i,a,r,s){super(),this.sAztDialogService=t,this.apiUploadService=i,this.documentConfigService=a,this.zipDataService=r,this.permissionService=s,this.isShowActions=!0,this.formHomework={files:[],content:""},this.checkAction=!0,this.allUploadToCdnMenuTypes=_m.j6,this.allUploadFileTypes=_m.AZ,this.notSupportedFile=_m.lN}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(qi.C),e.Y36(Wr.W),e.Y36(un.Cq),e.Y36(Us.a),e.Y36(pu.j))},n.\u0275cmp=e.Xpm({type:n,selectors:[["menu-homework"]],inputs:{initData:"initData"},features:[e.qOj],decls:38,vars:27,consts:[[1,"box","p-3"],[1,"document-info"],[1,"flex","md:items-center","flex-col","md:flex-row"],[1,"text-md","font-medium","truncate","mr-auto",2,"max-width","60%",3,"matTooltip","isDisabledTooltip","matTooltipDisabled"],["c","isDisabled"],[1,"w-auto","mt-2","lg:mt-0","flex","items-center"],["azt-track-service","menu-homework-eI2NNVUSUY1",1,"btn","btn-sm","btn-outline-primary",3,"cdkCopyToClipboard","click"],[1,"w-4","h-4","mr-2"],["name","copy"],[1,"ml-1",3,"fileName","linkUrl"],[1,"flex","items-center","mt-2"],["name","calendar"],[1,"text-sm"],["class","flex items-center mt-2",4,"ngIf"],["name","calendar-off"],[1,"text-sm","inline-block","ml-1"],[1,"flex","mt-2"],[3,"ngIf"],[1,"mt-2","text-center"],["azt-track-service","menu-homework-uD4Lx8Z-l-r",1,"btn","btn-sm","btn-transparent","btn-outline-secondary",3,"click"],[1,"w-5","h-5","inline-block"],[3,"name"],[3,"objectCodeType","objectCode","objectId","homeworkWithPermissionObj"],[1,"azt-document-menu","mt-4"],[1,"text-md","font-bold"],[1,"dropdown-menu","show","relative","w-full","mt-2"],[1,"dropdown-content","bg-slate-100","dark:bg-darkmode-600"],[3,"ngStyle"],["azt-track-service","menu-homework--_M1HhvAdpz",1,"dropdown-item",3,"click"],["name","settings"],["azt-track-service","menu-homework-2OnoCiN1dtn",1,"dropdown-item","text-danger",3,"click"],["name","trash-2"],[1,"azt-document-who","mt-4"],[1,"flex","items-center"],[1,"grid","grid-cols-12","gap-3","rounded-md","mt-1"],[4,"ngIf","ngIfElse"],["noClassroom",""],[1,"azt-document-file","mt-4"],[1,"flex","items-center","justify-between"],[2,"display","inline-block",3,"uploadToCdnMenu","fileType","notSupportedFile","isDisabled","uploadComplete"],["azt-track-service","menu-homework-nZbwE5HD5ts","class","btn btn-outline-primary btn-sm btn-transparent ml-auto",4,"ngIf"],[1,"leading-relaxed","text-slate-500","text-xs"],["noFile",""],[1,"azt-document-content","mt-4"],["azt-track-service","menu-homework-TNawByu5aUA","class","btn btn-outline-primary btn-sm btn-transparent ml-auto",3,"click",4,"ngIf"],[1,"azt-document-desc","mt-2"],["id","description_content","class","description text-left",4,"ngIf"],["class","text-md text-center",4,"ngIf"],[1,"col-span-12","md:col-span-6"],["azt-track-service","menu-homework-zV31SFaqVqP",1,"btn","btn-outline-secondary","block","truncate","w-full",3,"matTooltip","click"],[1,"btn","btn-outline-secondary","block","cursor-default","w-full"],["azt-track-service","menu-homework-nZbwE5HD5ts",1,"btn","btn-outline-primary","btn-sm","btn-transparent","ml-auto"],["name","upload"],[1,"app-block-detail","mt-2"],[4,"ngFor","ngForOf"],["azt-track-service","menu-homework-qPLF48TFcWr",1,"btn-text-primary",2,"width","85%",3,"click"],["name","file-text"],[1,"truncate",2,"width","75%","text-align","left",3,"matTooltip"],["azt-track-service","menu-homework-8wcAt-Fpoyn",1,"btn","btn-transparent",3,"matTooltip","click"],[1,"w-4","h-4"],["name","x"],[1,"text-md","text-center","mt-3"],["azt-track-service","menu-homework-TNawByu5aUA",1,"btn","btn-outline-primary","btn-sm","btn-transparent","ml-auto",3,"click"],["name","pencil"],["id","description_content",1,"description","text-left"],[3,"content"],[1,"text-md","text-center"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3,4),e._uU(5),e.qZA(),e.TgZ(6,"div",5)(7,"button",6),e.NdJ("click",function(){return i.showCopySuccess()}),e.TgZ(8,"span",7),e._UZ(9,"lucide-icon",8),e.qZA(),e._uU(10),e.ALo(11,"mytranslate"),e.qZA(),e._UZ(12,"azt-download-qr-code",9),e.qZA()(),e.TgZ(13,"div",10)(14,"span",7),e._UZ(15,"lucide-icon",11),e.qZA(),e.TgZ(16,"span",12),e._uU(17),e.ALo(18,"mytranslate"),e.ALo(19,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.qZA()(),e.YNc(20,uF,7,5,"div",13),e.TgZ(21,"div",10)(22,"span",7),e._UZ(23,"lucide-icon",14),e.qZA(),e.TgZ(24,"span",12),e._uU(25),e.ALo(26,"mytranslate"),e.qZA(),e.TgZ(27,"span",15),e._uU(28),e.ALo(29,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.ALo(30,"mytranslate"),e.qZA()(),e.TgZ(31,"div",16),e.YNc(32,dF,1,4,"ng-template",17),e.qZA()(),e.YNc(33,wF,55,59,"ng-template",17),e.TgZ(34,"div",18)(35,"button",19),e.NdJ("click",function(){return i.toggleShowActions()}),e.TgZ(36,"span",20),e._UZ(37,"lucide-icon",21),e.qZA()()()()),2&t){const a=e.MAs(4);e.xp6(3),e.s9C("matTooltip",i.initData.homeworkObj.name),e.Q6J("isDisabledTooltip",!1)("matTooltipDisabled",a.isDisabled),e.xp6(2),e.hij(" ",i.initData.homeworkObj.name," "),e.xp6(2),e.Q6J("cdkCopyToClipboard",i.copyLinkToClipboard(i.initData.homeworkObj.hashId)),e.xp6(3),e.hij(" ",e.lcZ(11,15,"lang_auto_copy_link")," "),e.xp6(2),e.Q6J("fileName","azota_submit_homework_qrcode_"+i.initData.homeworkObj.hashId)("linkUrl",i.copyLinkToClipboard(i.initData.homeworkObj.hashId)),e.xp6(5),e.hij(" ",e.lcZ(18,17,"lang_testbank_tested_list_date_create")+": "+e.lcZ(19,19,i.initData.homeworkObj.createdAt)," "),e.xp6(3),e.Q6J("ngIf",null==i.initData.homeworkObj?null:i.initData.homeworkObj.startDate),e.xp6(5),e.hij(" ",e.lcZ(26,21,"lang_auto_han_cuoi")+": "," "),e.xp6(3),e.hij(" ",i.initData.homeworkObj.deadline?e.lcZ(29,23,i.initData.homeworkObj.deadline):e.lcZ(30,25,"lang_auto_khong_thoi_han")," "),e.xp6(4),e.Q6J("ngIf",i.initData.homeworkObj.id),e.xp6(1),e.Q6J("ngIf",i.isShowActions),e.xp6(4),e.s9C("name",i.isShowActions?"chevron-up":"chevron-down")}},dependencies:[F.sg,F.O5,F.PC,nh.i3,Ai.gM,o_.W,zs.Q,jg.y,bm.O,cF.B,_.Nh5,ye.JV,ye.Pf,ye.Z_,ye.PA,ye.$n],encapsulation:2}),n})();const CF=["TABLE"];function TF(n,o){if(1&n&&(e.TgZ(0,"tr")(1,"td",4),e._uU(2),e.qZA(),e.TgZ(3,"td",4),e._uU(4),e.ALo(5,"formatOnlyDateByUserUnitPipe"),e.qZA(),e.TgZ(6,"td",7),e._uU(7),e.ALo(8,"mytranslate"),e.ALo(9,"mytranslate"),e.qZA(),e.TgZ(10,"td",4),e._uU(11),e.ALo(12,"mytranslate"),e.ALo(13,"mytranslate"),e.ALo(14,"mytranslate"),e.qZA(),e.TgZ(15,"td",4),e._UZ(16,"span",8),e.qZA()()),2&n){const t=o.$implicit,i=o.index,a=e.oxw();e.xp6(1),e.uIk("excelWidth",30)("excelRow",5+i)("excelColumn",0)("excelStyle",a.styleTdNormal),e.xp6(1),e.Oqu(t.fullName),e.xp6(1),e.uIk("excelWidth",15)("excelRow",5+i)("excelColumn",1)("excelStyle",a.styleTdNormal),e.xp6(1),e.Oqu(e.lcZ(5,25,t.birthday)),e.xp6(2),e.uIk("excelWidth",15)("excelRow",5+i)("excelColumn",2)("excelStyle",a.styleTdNormal),e.xp6(1),e.Oqu(0==t.gender?e.lcZ(8,27,"lang_gender_female"):1==t.gender?e.lcZ(9,29,"lang_gender_male"):""),e.xp6(3),e.uIk("excelWidth",15)("excelRow",5+i)("excelColumn",3)("excelStyle",a.styleTdNormal),e.xp6(1),e.Oqu(t.isMarked?a.checkPoint(t.point?t.point:0):t.mustReSubmit?e.lcZ(12,31,"lang_homework_utils_excel_table_export_must_resubmit"):t.isNotSubmit?e.lcZ(13,33,"lang_homework_utils_excel_table_export_not_submit"):e.lcZ(14,35,"lang_homework_utils_excel_table_export_not_point")),e.xp6(4),e.uIk("excelWidth",30)("excelRow",5+i)("excelColumn",4)("excelStyle",a.styleTdNormal),e.xp6(1),e.Q6J("innerHTML",a.getComment(t.answer),e.oJD)}}let kF=(()=>{class n extends xe.Q{exportToExcel(){let t=this.homeworkObj.hasOwnProperty("name")?this.commonService.createFileNameExportFile([this.homeworkObj.name??""])+"-ScoreSheet.xlsx":this.commonService.createFileNameExportFile(["ScoreSheet"])+".xlsx",i=this.exportExcelService.exportHtmlTableToExcelBlob(this.TABLE,!0);this.shareFileFlutterService.shareFileWithBlob(i,t)}checkPoint(t){let i=this.commonService.myTranslateInstant("lang_auto_dat")??"",a=this.commonService.myTranslateInstant("lang_auto_chua_dat")??"",r=this.commonService.myTranslateInstant("lang_auto_hoan_thanh")??"",s=this.commonService.myTranslateInstant("lang_auto_chua_hoan_thanh")??"",l=this.commonService.myTranslateInstant("lang_auto_hoan_thanh_tot")??"";switch(t){case 1e3:return i;case 1001:return a;case 2e3:return r;case 2001:return s;case 3e3:return l;default:return t}}getComment(t){var i="";return null!=t&&t.result&&(i=this.commonService.willDeleteParseJson(t.result).comment),this.commonService.removeTagHtml(i)}ngOnInit(){super.ngOnInit()}constructor(t,i){super(),this.shareFileFlutterService=t,this.exportExcelService=i,this.studentLists=[],this.tableType="homework",this.currentDate=new Date,this.styleTdNormal='{"alignment":{"vertical":"center","horizontal":"center", "wrapText":true},"font":{"bold":false,"color":{"rgb":"000000"}}}',this.styleTdNormalLeft='{"alignment":{"vertical":"center","horizontal":"left", "wrapText":true},"font":{"bold":false,"color":{"rgb":"000000"}}}',this.styleTdError='{"alignment":{"vertical":"center","horizontal":"center", "wrapText":true},"font":{"bold":false,"color":{"rgb":"f10000"}}}',this.styleTdErrorLeft='{"alignment":{"vertical":"center","horizontal":"left", "wrapText":true},"font":{"bold":false,"color":{"rgb":"f10000"}}}',this.styleThNormal='{"alignment":{"vertical":"center","horizontal":"center","wrapText":true},"font":{"bold":true,"color":{"rgb":"ffffffff"}},"fill":{"patternType":"solid","fgColor":{"rgb":"2361ae"}}}',this.styleTdNotNumberNormal='{"alignment":{"vertical":"center","horizontal":"center", "wrapText":true},"font":{"bold":false,"color":{"rgb":"000000"}},"isText":"1"}',this.styleTdNotNumberError='{"alignment":{"vertical":"center","horizontal":"center", "wrapText":true},"font":{"bold":false,"color":{"rgb":"f10000"}},"isText":"1"}'}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Ac.g),e.Y36($x.L))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-excel-export"]],viewQuery:function(t,i){if(1&t&&e.Gf(CF,5),2&t){let a;e.iGM(a=e.CRH())&&(i.TABLE=a.first)}},inputs:{studentLists:"studentLists",homeworkObj:"homeworkObj",tableType:"tableType"},features:[e.qOj],decls:44,vars:54,consts:[["azt-track-service","excel-table-export-ZXUlfEPdCW2",1,"table","table-bordered","hiddenIpt",3,"id","click"],["TABLE",""],[1,"thead-dark"],["colspan","10"],[1,"border-table","azt-excel-cell"],[4,"ngFor","ngForOf"],["colspan","2",1,"border-table","azt-excel-cell"],[1,"azt-excel-cell"],[3,"innerHTML"]],template:function(t,i){1&t&&(e.TgZ(0,"table",0,1),e.NdJ("click",function(){return i.exportToExcel()}),e.TgZ(2,"thead",2)(3,"tr")(4,"th",3),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()(),e.TgZ(7,"tr"),e._UZ(8,"th"),e.qZA(),e.TgZ(9,"tr")(10,"th",3),e._uU(11),e.ALo(12,"mytranslate"),e.ALo(13,"formatOnlyDateByUserUnitPipe"),e.qZA()(),e.TgZ(14,"tr"),e._UZ(15,"th"),e.qZA(),e.TgZ(16,"tr")(17,"th",4),e._uU(18),e.ALo(19,"mytranslate"),e.qZA(),e.TgZ(20,"th",4),e._uU(21),e.ALo(22,"mytranslate"),e.qZA(),e.TgZ(23,"th",4),e._uU(24),e.ALo(25,"mytranslate"),e.qZA(),e.TgZ(26,"th",4),e._uU(27),e.ALo(28,"mytranslate"),e.qZA(),e.TgZ(29,"th",4),e._uU(30),e.ALo(31,"mytranslate"),e.qZA()()(),e.TgZ(32,"tbody"),e.YNc(33,TF,17,37,"tr",5),e._UZ(34,"tr"),e.TgZ(35,"tr"),e._UZ(36,"td")(37,"td")(38,"td"),e.TgZ(39,"td",6),e._uU(40),e.ALo(41,"mytranslate"),e.qZA(),e._UZ(42,"td")(43,"td"),e.qZA()()()),2&t&&(e.MGl("id","table_",i.tableType,""),e.xp6(5),e.AsE("",e.lcZ(6,36,"lang_homework_utils_excel_table_export_homework"),": ",i.homeworkObj.name,""),e.xp6(6),e.AsE("",e.lcZ(12,38,"lang_homework_utils_excel_table_export_time_export_result"),": ",e.lcZ(13,40,i.currentDate),""),e.xp6(6),e.uIk("excelWidth",30)("excelRow",4)("excelColumn",0)("excelStyle",i.styleThNormal),e.xp6(1),e.Oqu(e.lcZ(19,42,"lang_first_and_last_name")),e.xp6(2),e.uIk("excelWidth",15)("excelRow",4)("excelColumn",1)("excelStyle",i.styleThNormal),e.xp6(1),e.Oqu(e.lcZ(22,44,"lang_birthday")),e.xp6(2),e.uIk("excelWidth",15)("excelRow",4)("excelColumn",2)("excelStyle",i.styleThNormal),e.xp6(1),e.Oqu(e.lcZ(25,46,"lang_gender")),e.xp6(2),e.uIk("excelWidth",15)("excelRow",4)("excelColumn",3)("excelStyle",i.styleThNormal),e.xp6(1),e.Oqu(e.lcZ(28,48,"lang_point")),e.xp6(2),e.uIk("excelWidth",30)("excelRow",4)("excelColumn",4)("excelStyle",i.styleThNormal),e.xp6(1),e.Oqu(e.lcZ(31,50,"lang_homework_utils_excel_table_export_comment")),e.xp6(3),e.Q6J("ngForOf",i.studentLists),e.xp6(6),e.uIk("excelWidth",15)("excelRow",6+i.studentLists.length)("excelColumn",2)("excelStyle",i.styleThNormal),e.xp6(1),e.hij("",e.lcZ(41,52,"lang_homework_utils_excel_table_export_verifil_teacher"),": "))},dependencies:[F.sg,ye.JV,ye.YK],encapsulation:2}),n})();var SF=I(91675);const EF=["student",""];function OF(n,o){1&n&&(e.TgZ(0,"span",14),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_auto_chua_cham")))}function IF(n,o){1&n&&(e.TgZ(0,"span",15),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_auto_chua_nop")))}function MF(n,o){1&n&&(e.TgZ(0,"span",16),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_da_yeu_cau_nop_lai"),""))}function LF(n,o){1&n&&(e.TgZ(0,"span",16),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_point")+": "))}function BF(n,o){if(1&n&&(e.TgZ(0,"span",17),e._UZ(1,"azt-check-mark",18),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("mark",t.student.point)}}function PF(n,o){if(1&n&&(e.TgZ(0,"div",19),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij(" ",t.timeService.calculationTime(t.student.createdAt||void 0)+" "+e.lcZ(2,1,"lang_auto_truoc")," ")}}function QF(n,o){1&n&&(e.TgZ(0,"p",23),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_so_tep_tin_da_nop")+":"," "))}function FF(n,o){if(1&n&&(e.TgZ(0,"div",20),e.YNc(1,QF,3,3,"p",21),e.TgZ(2,"p",22),e._uU(3),e.qZA()()),2&n){const t=e.oxw();let i;e.xp6(1),e.Q6J("ngIf",t.student.isMarked||t.student.isSubmitted),e.xp6(2),e.hij(" ",null!==(i=null==t.student.answerFileObjs?null:t.student.answerFileObjs.length)&&void 0!==i?i:0," ")}}const NF=function(n){return{"zoom-in":n}};let ZF=(()=>{class n extends xe.Q{constructor(t){super(),this.timeService=t}ngOnInit(){super.ngOnInit()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Mo.D))},n.\u0275cmp=e.Xpm({type:n,selectors:[["testbank-homework-result-student-exam-result-box","student",""]],inputs:{student:"student"},features:[e.qOj],attrs:EF,decls:16,vars:15,consts:[[1,"flex","items-center","p-3","rounded-md","h-full","bg-slate-100","dark:bg-darkmode-300",2,"min-height","85px",3,"ngClass"],[1,"w-12","h-10","image-fit","lg:mr-1"],[3,"linkAvatar","nameCreateAvatar","size"],[1,"ml-2","text-left","mt-0","w-full"],[1,"azt-student-name"],[1,"font-medium",3,"isDisabledTooltip"],[1,"flex","mt-1"],[1,"mr-auto","text-xs","mr-2"],["class","text-pending",4,"ngIf"],["class","text-danger",4,"ngIf"],["class","text-slate-500",4,"ngIf"],["class","text-black font-medium",4,"ngIf"],["class","text-slate-500 text-xs",4,"ngIf"],["class","flex items-center mb-1",4,"ngIf"],[1,"text-pending"],[1,"text-danger"],[1,"text-slate-500"],[1,"text-black","font-medium"],[3,"mark"],[1,"text-slate-500","text-xs"],[1,"flex","items-center","mb-1"],["class","mr-auto text-xs text-slate-500",4,"ngIf"],[1,"text-xs","text-slate-500"],[1,"mr-auto","text-xs","text-slate-500"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"azt-create-avatar",2),e.qZA(),e.TgZ(3,"div",3)(4,"div",4)(5,"span",5),e._uU(6),e.qZA()(),e.TgZ(7,"div",6)(8,"div",7),e.YNc(9,OF,3,3,"span",8),e.YNc(10,IF,3,3,"span",9),e.YNc(11,MF,3,3,"span",10),e.YNc(12,LF,3,3,"span",10),e.YNc(13,BF,2,1,"span",11),e.qZA(),e.YNc(14,PF,3,3,"div",12),e.qZA(),e.YNc(15,FF,4,2,"div",13),e.qZA()()),2&t){let a;e.Q6J("ngClass",e.VKq(13,NF,!(i.student.isNotSubmit&&i.student.mustReSubmit))),e.xp6(2),e.Q6J("linkAvatar",null!==(a=i.student.avatar)&&void 0!==a?a:"")("nameCreateAvatar",i.student.fullName)("size",40),e.xp6(3),e.Q6J("isDisabledTooltip",!1),e.xp6(1),e.hij(" ",i.student.fullName," "),e.xp6(3),e.Q6J("ngIf",i.student.isSubmitted),e.xp6(1),e.Q6J("ngIf",i.student.isNotSubmit),e.xp6(1),e.Q6J("ngIf",i.student.mustReSubmit),e.xp6(1),e.Q6J("ngIf",i.student.isMarked),e.xp6(1),e.Q6J("ngIf",i.student.isMarked),e.xp6(1),e.Q6J("ngIf",null!=i.student.createdAt),e.xp6(1),e.Q6J("ngIf",i.student.isMarked||i.student.isSubmitted)}},dependencies:[F.mk,F.O5,Jg.g,SF.B,zs.Q,ye.JV],encapsulation:2}),n})();function DF(n,o){if(1&n&&(e.TgZ(0,"div",4),e.GkF(1,5),e.qZA()),2&n){e.oxw();const t=e.MAs(4);e.xp6(1),e.Q6J("ngTemplateOutlet",t)}}function UF(n,o){if(1&n&&e._UZ(0,"testbank-homework-result-student-exam-result-box",13),2&n){const t=e.oxw().$implicit;e.Q6J("student",t)}}const jF=function(n){return{"lg:col-span-3":n}},qF=function(n){return[n]},RF=function(n){return{backto:n}};function zF(n,o){if(1&n&&(e.TgZ(0,"div",10)(1,"div",11)(2,"a",12),e.ALo(3,"navigationLocalize"),e._UZ(4,"testbank-homework-result-student-exam-result-box",13),e.qZA()(),e.YNc(5,UF,1,1,"ng-template",null,14,e.W1O),e.qZA()),2&n){const t=o.$implicit,i=e.oxw(2);let a;e.Q6J("ngClass",e.VKq(6,jF,!i.isOpenSideNav&&!i.isMobile)),e.xp6(2),e.Q6J("routerLink",e.VKq(8,qF,e.lcZ(3,4,"/admin/homework/switch-mark-exercise/"+(null!==(a=null==t||null==t.answer?null:t.answer.id)&&void 0!==a?a:0)+"/"+i.obj.hashId+"/"+t.id)))("queryParams",e.VKq(10,RF,i.backToLink)),e.xp6(2),e.Q6J("student",t)}}function HF(n,o){if(1&n&&(e.TgZ(0,"div")(1,"div",6)(2,"div",7)(3,"div",8),e.YNc(4,zF,7,12,"div",9),e.qZA()()()()),2&n){const t=e.oxw();e.xp6(4),e.Q6J("ngForOf",t.studentLists)}}function JF(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",15)(1,"p",16),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.TgZ(4,"p",17),e._uU(5),e.ALo(6,"mytranslate"),e.ALo(7,"mytranslate"),e.ALo(8,"mytranslate"),e.qZA(),e.TgZ(9,"a",18),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.showCopySuccess())}),e.O4$(),e.TgZ(10,"svg",19),e._UZ(11,"circle",20)(12,"circle",21)(13,"circle",22)(14,"line",23)(15,"line",24),e.qZA(),e.kcU(),e.TgZ(16,"span"),e._uU(17),e.ALo(18,"mytranslate"),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,6,"lang_auto_chua_co_du_lieu_nop_bai")),e.xp6(3),e.lnq("",e.lcZ(6,8,"lang_auto_neu_chua_gui_link_nop_bai_cho_hoc_sinh_vui_long_bam"),' "',e.lcZ(7,10,"lang_auto_copy_link_bai_tap"),'" ',e.lcZ(8,12,"lang_auto_ben_duoi_va_gui_cho_hoc_sinh_de_nop_bai"),""),e.xp6(4),e.Q6J("cdkCopyToClipboard",t.copyLinkHomeWorkToClipboard()),e.xp6(8),e.Oqu(e.lcZ(18,14,"lang_auto_copy_link_bai_tap"))}}let KF=(()=>{class n extends xe.Q{copyLinkHomeWorkToClipboard(){return`${this.commonService.getCurrentDomain()}/bai-tap/${this.obj.hashId}`}showCopySuccess(){this.showSuccessSnack("lang_auto_sao_chep_thanh_cong")}constructor(t){super(),this.timeService=t,this.isOpenSideNav=!0,this.backToLink="",this.studentLists=[],this.isNotTestedYet=!1,this.isMobile=this.commonService.isMobileOrTable()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Mo.D))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-student-homework-result"]],inputs:{isOpenSideNav:"isOpenSideNav",backToLink:"backToLink",obj:"obj",studentLists:"studentLists",isNotTestedYet:"isNotTestedYet"},features:[e.qOj],decls:5,vars:2,consts:[[1,"box","mt-2","relative"],["class","scrollable-content flex items-center",4,"ngIf"],[4,"ngIf"],["isNotTestedYetTmp",""],[1,"scrollable-content","flex","items-center"],[3,"ngTemplateOutlet"],[1,"azt-student-list"],[1,"mt-5","p-3"],[1,"grid","grid-cols-12","gap-3",2,"margin-bottom","85px"],["class","col-span-12 sm:col-span-6 lg:col-span-4 2xl:col-span-3",3,"ngClass",4,"ngFor","ngForOf"],[1,"col-span-12","sm:col-span-6","lg:col-span-4","2xl:col-span-3",3,"ngClass"],[1,"h-full"],["azt-track-service","student-homework-result-p_58RoCuYW9",3,"routerLink","queryParams"],[3,"student"],["answerIdNull",""],[1,"text-center","mt-5","mx-auto",2,"max-width","28rem"],[1,"text-lg"],[1,"mt-2","mx-auto"],["azt-track-service","student-homework-result-GcOiOvgvvW2",1,"mt-2","btn","btn-secondary-soft",3,"cdkCopyToClipboard","click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","mr-2","lucide"],["cx","18","cy","5","r","3"],["cx","6","cy","12","r","3"],["cx","18","cy","19","r","3"],["x1","8.59","y1","13.51","x2","15.42","y2","17.49"],["x1","15.41","y1","6.51","x2","8.59","y2","10.49"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.YNc(1,DF,2,1,"div",1),e.YNc(2,HF,5,1,"div",2),e.qZA(),e.YNc(3,JF,19,16,"ng-template",null,3,e.W1O)),2&t&&(e.xp6(1),e.Q6J("ngIf",i.isNotTestedYet),e.xp6(1),e.Q6J("ngIf",!i.isNotTestedYet))},dependencies:[E.rH,F.mk,F.sg,F.O5,F.tP,nh.i3,ZF,ye.Jy,ye.JV],encapsulation:2}),n})();function GF(n,o){if(1&n&&(e.O4$(),e.kcU(),e.TgZ(0,"span",23)(1,"span",24),e._uU(2),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.Oqu(t.homeworkResultFilterService.totalCustomFilter)}}function YF(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1,"\xa0"),e.TgZ(2,"span",27),e._uU(3),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(3),e.Oqu(t.homeworkResultFilterService.totalCustomFilter)}}function $F(n,o){if(1&n&&(e.O4$(),e.kcU(),e.TgZ(0,"span",25),e._uU(1),e.ALo(2,"mytranslate"),e.YNc(3,YF,4,1,"span",26),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij(" ",e.lcZ(2,2,"lang_testbank_tested_list_sort")," "),e.xp6(2),e.Q6J("ngIf",t.homeworkResultFilterService.totalCustomFilter>0)}}let VF=(()=>{class n extends xe.Q{changeFilter(){this.homeworkResultFilterService.saveFilterObj(),this.changeFilterEvent.emit(this.homeworkResultFilterService.filterObj)}clearFilter(){this.homeworkResultFilterService.clearFilter(),this.changeFilter()}ngOnInit(){super.ngOnInit()}constructor(t){super(),this.homeworkResultFilterService=t,this.changeFilterEvent=new e.vpe}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(ww))},n.\u0275cmp=e.Xpm({type:n,selectors:[["testbank-homework-result-filter-menu"]],outputs:{changeFilterEvent:"changeFilterEvent"},features:[e.qOj],decls:44,vars:25,consts:[[1,"btn","btn-sm","relative",3,"matMenuTriggerFor"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-search","w-4","h-4","mr-0","md:mr-1"],["points","22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"],["class","sm:hidden tooltip w-4 h-4 flex items-center justify-center absolute rounded-full bg-primary right-0 top-0 -mr-2 -mt-2",4,"ngIf"],["class","azt-hidden sm:block",4,"ngIf"],["xPosition","before"],["filterMenu","matMenu"],[1,"dropdown-menu","show","relative","w-64"],[1,"dropdown-content"],["azt-track-service","filter-menu-IuO864aLwuv","for","isSubmitted",1,"dropdown-item","cursor-pointer",3,"click"],[1,"form-check","form-switch","ml-auto"],["id","isSubmitted","type","checkbox",1,"show-code","form-check-input","ml-2",3,"checked","change"],["azt-track-service","filter-menu-up7nJngmzVG","for","isNotSubmit",1,"dropdown-item","cursor-pointer",3,"click"],["id","isNotSubmit","type","checkbox",1,"show-code","form-check-input","ml-2",3,"checked","change"],["azt-track-service","filter-menu-UMBRazW55_8","for","isMarked",1,"dropdown-item","cursor-pointer",3,"click"],["id","isMarked","type","checkbox",1,"show-code","form-check-input","ml-2",3,"checked","change"],["azt-track-service","filter-menu-ZcOfEctFCTF","for","mustReSubmit",1,"dropdown-item","cursor-pointer",3,"click"],["id","mustReSubmit","type","checkbox",1,"show-code","form-check-input","ml-2",3,"checked","change"],[1,"dropdown-divider"],[1,"flex","p-1"],[1,"btn","btn-secondary","py-1","px-2","ml-auto","mr-2"],["azt-track-service","filter-menu-QejPhqaKsKg",3,"click"],["azt-track-service","filter-menu-e-_PwZJaZjq",1,"btn","btn-danger","py-1","px-2",3,"click"],[1,"sm:hidden","tooltip","w-4","h-4","flex","items-center","justify-center","absolute","rounded-full","bg-primary","right-0","top-0","-mr-2","-mt-2"],[1,"rounded-full","bg-primary","text-white","cursor-pointer","font-medium"],[1,"azt-hidden","sm:block"],[4,"ngIf"],[1,"py-1","px-2","rounded-full","text-xs","bg-primary","text-white","cursor-pointer","font-medium"]],template:function(t,i){if(1&t&&(e.TgZ(0,"button",0),e.O4$(),e.TgZ(1,"svg",1),e._UZ(2,"polygon",2),e.qZA(),e.YNc(3,GF,3,1,"span",3),e.YNc(4,$F,4,4,"span",4),e.qZA(),e.kcU(),e.TgZ(5,"mat-menu",5,6)(7,"div",7)(8,"ul",8)(9,"li")(10,"label",9),e.NdJ("click",function(r){return r.stopPropagation()}),e._uU(11),e.ALo(12,"mytranslate"),e.TgZ(13,"div",10)(14,"input",11),e.NdJ("change",function(){return i.homeworkResultFilterService.filterObj.isSubmitted=!i.homeworkResultFilterService.filterObj.isSubmitted,i.changeFilter()}),e.qZA()()()(),e.TgZ(15,"li")(16,"label",12),e.NdJ("click",function(r){return r.stopPropagation()}),e._uU(17),e.ALo(18,"mytranslate"),e.TgZ(19,"div",10)(20,"input",13),e.NdJ("change",function(){return i.homeworkResultFilterService.filterObj.isNotSubmit=!i.homeworkResultFilterService.filterObj.isNotSubmit,i.changeFilter()}),e.qZA()()()(),e.TgZ(21,"li")(22,"label",14),e.NdJ("click",function(r){return r.stopPropagation()}),e._uU(23),e.ALo(24,"mytranslate"),e.TgZ(25,"div",10)(26,"input",15),e.NdJ("change",function(){return i.homeworkResultFilterService.filterObj.isMarked=!i.homeworkResultFilterService.filterObj.isMarked,i.changeFilter()}),e.qZA()()()(),e.TgZ(27,"li")(28,"label",16),e.NdJ("click",function(r){return r.stopPropagation()}),e._uU(29),e.ALo(30,"mytranslate"),e.TgZ(31,"div",10)(32,"input",17),e.NdJ("change",function(){return i.homeworkResultFilterService.filterObj.mustReSubmit=!i.homeworkResultFilterService.filterObj.mustReSubmit,i.changeFilter()}),e.qZA()()()(),e.TgZ(33,"li"),e._UZ(34,"hr",18),e.qZA(),e.TgZ(35,"li")(36,"div",19)(37,"button",20),e._uU(38),e.ALo(39,"mytranslate"),e.qZA(),e.TgZ(40,"div",21),e.NdJ("click",function(r){return r.stopPropagation()}),e.TgZ(41,"button",22),e.NdJ("click",function(){return i.clearFilter()}),e._uU(42),e.ALo(43,"mytranslate"),e.qZA()()()()()()()),2&t){const a=e.MAs(6);e.Q6J("matMenuTriggerFor",a),e.xp6(3),e.Q6J("ngIf",i.homeworkResultFilterService.totalCustomFilter>0),e.xp6(1),e.Q6J("ngIf",!i.isMobileWebView),e.xp6(7),e.hij(" ",e.lcZ(12,13,"lang_homework_homework_score_list_sort_student_not_marking")," "),e.xp6(3),e.Q6J("checked",i.homeworkResultFilterService.filterObj.isSubmitted),e.xp6(3),e.hij(" ",e.lcZ(18,15,"lang_homework_homework_score_list_sort_student_not_yet_paid")," "),e.xp6(3),e.Q6J("checked",i.homeworkResultFilterService.filterObj.isNotSubmit),e.xp6(3),e.hij(" ",e.lcZ(24,17,"lang_homework_homework_score_list_sort_mark")," "),e.xp6(3),e.Q6J("checked",i.homeworkResultFilterService.filterObj.isMarked),e.xp6(3),e.hij(" ",e.lcZ(30,19,"lang_homework_homework_score_list_sort_student_resubmit")," "),e.xp6(3),e.Q6J("checked",i.homeworkResultFilterService.filterObj.mustReSubmit),e.xp6(6),e.Oqu(e.lcZ(39,21,"lang_button_close")),e.xp6(4),e.Oqu(e.lcZ(43,23,"lang_button_delete"))}},dependencies:[F.O5,Qi.VK,Qi.p6,ye.JV],encapsulation:2}),n})();const WF=["drawer"];function XF(n,o){if(1&n&&e._UZ(0,"azt-loading-effect",30),2&n){const t=e.oxw();e.Q6J("currentStatusObj",t.statusObj)}}function eN(n,o){if(1&n&&(e.TgZ(0,"div",38)(1,"span"),e.O4$(),e.TgZ(2,"svg",39),e._UZ(3,"circle",40)(4,"line",41)(5,"line",42),e.qZA()(),e.kcU(),e.TgZ(6,"span"),e._uU(7),e.ALo(8,"mytranslate"),e.ALo(9,"mytranslate"),e.qZA()()),2&n){const t=e.oxw(3);e.xp6(7),e.AsE("",e.lcZ(8,2,"lang_homework_homework_score_list_not_search_data"),"! ",e.lcZ(9,4,"lang_core_not_found_classroom_or_homework"==t.errorMessage?"lang_homework_homework_score_list_class_maybe_delete":""),"")}}function tN(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",73),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(4);return e.KtG(a.sAztMatDrawerService.openDrawer())}),e.ALo(1,"mytranslate"),e.O4$(),e.TgZ(2,"svg",61),e._UZ(3,"rect",74)(4,"path",75)(5,"path",76),e.qZA()()}2&n&&e.s9C("matTooltip",e.lcZ(1,1,"lang_auto_mo_menu"))}function nN(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",77),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(4);return e.KtG(a.sAztMatDrawerService.closeDrawer())}),e.ALo(1,"mytranslate"),e.O4$(),e.TgZ(2,"svg",61),e._UZ(3,"rect",74)(4,"path",75)(5,"path",78),e.qZA()()}2&n&&e.s9C("matTooltip",e.lcZ(1,1,"lang_auto_dong_menu"))}function iN(n,o){1&n&&(e.TgZ(0,"div",79)(1,"div",80)(2,"p",81),e._uU(3),e.ALo(4,"mytranslate"),e.qZA()()()),2&n&&(e.xp6(3),e.hij("",e.lcZ(4,1,"lang_not_found_search"),"!"))}function oN(n,o){if(1&n&&e._UZ(0,"app-student-homework-result",82),2&n){const t=e.oxw(4);e.Q6J("backToLink",t.backToLink)("studentLists",t.studentHaveSortAndSearchByNameObjs)("isNotTestedYet",0==t.rawStudentObjs.length)("isOpenSideNav",t.sAztMatDrawerService.isOpenSideNav)("obj",t.homeworkObj)}}const aN=function(n,o){return{"w-85":n,"w-30":o}},rN=function(n){return{"azt-mobile-draw-left":n}},sN=function(n){return{"ml-30":n}},lN=function(n){return{"ml-5":n}},cN=function(n){return{"px-0":n}},uN=function(n){return[n]};function dN(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"mat-drawer-container",43)(1,"mat-drawer",44,45),e.NdJ("closedStart",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.changeStatusNav())}),e.TgZ(3,"div",46),e._UZ(4,"menu-homework",47),e.qZA()(),e.TgZ(5,"mat-drawer-content",48)(6,"div",49)(7,"div",50),e.YNc(8,tN,6,3,"button",51),e.YNc(9,nN,6,3,"button",52),e.TgZ(10,"div",53)(11,"flexed-on-the-top",54)(12,"div",55)(13,"azt-search-box",56),e.NdJ("onSearch",function(a){e.CHM(t);const r=e.oxw(3);return e.KtG(r.search(a.searchObj))}),e.ALo(14,"mytranslate"),e.qZA()(),e.TgZ(15,"div",57)(16,"testbank-homework-result-filter-menu",58),e.NdJ("changeFilterEvent",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.changeFilterEvent())}),e.qZA()(),e.TgZ(17,"div",59)(18,"button",60),e.O4$(),e.TgZ(19,"svg",61),e._UZ(20,"line",62)(21,"line",63)(22,"line",64),e.qZA()()()()()(),e.kcU(),e.TgZ(23,"div",65)(24,"div",66)(25,"div",67)(26,"p",68),e._uU(27),e.ALo(28,"mytranslate"),e.TgZ(29,"a",69),e.ALo(30,"navigationLocalize"),e._uU(31),e.qZA()()()(),e.YNc(32,iN,5,3,"div",70),e.YNc(33,oN,1,5,"ng-template",null,71,e.W1O),e.qZA()(),e._UZ(35,"app-excel-export",72),e.qZA()()}if(2&n){const t=e.MAs(34),i=e.oxw(3),a=e.MAs(5);e.Q6J("hasBackdrop",i.sAztMatDrawerService.hasBackdrop),e.xp6(1),e.s9C("opened",i.sAztMatDrawerService.isOpenSideNav?"true":"false"),e.Q6J("ngClass",e.WLB(32,aN,i.isMobileDevice,!i.isMobileDevice))("mode",i.sAztMatDrawerService.mode),e.xp6(2),e.Q6J("ngClass",e.VKq(35,rN,i.isMobileDevice)),e.xp6(1),e.Q6J("initData",i.initDataHomework),e.xp6(1),e.Q6J("ngClass",e.VKq(37,sN,!i.isMobileDevice&&i.sAztMatDrawerService.isOpenSideNav)),e.xp6(1),e.Q6J("ngClass",e.VKq(39,lN,!i.isMobileDevice&&i.sAztMatDrawerService.isOpenSideNav)),e.xp6(2),e.Q6J("ngIf",!i.sAztMatDrawerService.isOpenSideNav||i.isMobileDevice),e.xp6(1),e.Q6J("ngIf",i.sAztMatDrawerService.isOpenSideNav&&!i.isMobileDevice),e.xp6(2),e.Q6J("colorBackground","white"),e.xp6(2),e.Q6J("isServerSearch",!0)("placeholder",e.lcZ(14,26,"lang_homework_homework_score_list_search"))("searchContentObj",i.searchContentObj)("styleInput",i.styleInput),e.xp6(5),e.Q6J("matMenuTriggerFor",a),e.xp6(5),e.Q6J("ngClass",e.VKq(41,cN,i.isMobileDevice||!i.sAztMatDrawerService.isOpenSideNav)),e.xp6(4),e.hij(" ",e.lcZ(28,28,"lang_homework_homework_score_list_list_submit_class"),": "),e.xp6(2),e.Q6J("routerLink",e.VKq(43,uN,e.lcZ(30,30,"/admin/student/classroom-details/"+i.classroomId+"/0"))),e.xp6(2),e.AsE(" ",null==i.classroomObj?null:i.classroomObj.name," (",i.initDataHomework.homeworkObj.count+"/"+i.initDataHomework.studentObjs.length,") "),e.xp6(1),e.Q6J("ngIf",0!=i.rawStudentObjs.length&&0==i.studentHaveSortAndSearchByNameObjs.length)("ngIfElse",t),e.xp6(3),e.Q6J("studentLists",i.studentHaveSortAndSearchByNameObjs)("homeworkObj",i.homeworkObj)("tableType","homework")}}function mN(n,o){1&n&&e._UZ(0,"div",83)}function pN(n,o){if(1&n&&(e.TgZ(0,"div"),e._UZ(1,"azt-export-docx-loading-box",33),e.TgZ(2,"div",34),e.YNc(3,eN,10,6,"div",35),e.YNc(4,dN,36,45,"mat-drawer-container",36),e.qZA(),e.YNc(5,mN,1,0,"div",37),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("msg",t.exportResultService.keyLoading)("show",t.exportResultService.isLoading)("percent",t.exportResultService.percent),e.xp6(2),e.Q6J("ngIf",""!=t.errorMessage),e.xp6(1),e.Q6J("ngIf",""==t.errorMessage),e.xp6(1),e.Q6J("ngIf",1==t.isMobileDevice)}}function hN(n,o){if(1&n&&(e.YNc(0,pN,6,6,"div",31),e._UZ(1,"azt-scroll-to-top-bottom",32)),2&n){const t=e.oxw();e.Q6J("ngIf",t.homeworkObj),e.xp6(1),e.Q6J("isScrollToTop",!0)}}let AN=(()=>{class n extends xe.Q{set drawer(t){this.sAztMatDrawerService.resizeDrawerHeight(!0,t)}changeStatusNav(){this.isMobileDevice&&(document.body.style.overflow="auto")}saveStatusSideNav(){this.examFilterService.saveStatusSideNav("homework",this.sAztMatDrawerService.isOpenSideNav)}getStatusSideNav(){if(window.innerWidth>980){let t=this.examFilterService.getStatusSideNav("homework");t&&"close"==t?this.sAztMatDrawerService.closeDrawer():this.sAztMatDrawerService.openDrawer()}else this.sAztMatDrawerService.closeDrawer()}exportToExcel(t){setTimeout(()=>{document.getElementById("table_"+t)?.click()},1e3)}exportToPDF(){this.exportResultService.processHomeworks(Number(this.homeworkId),this.homeworkHashId).then(()=>{}).catch(t=>{this.commonService.snackError("string"==typeof t?t:t.message)})}_isSortedByTimeDesc(){return!!this.browserStorageService.getSimpleStorage(this.sortByStorageKey)}_sortStudentObjs(t){var i=this._isSortedByTimeDesc(),a=this.classroomObj?.sortType??0;return i?this.sortService.sortTimeDESC(t):0==a?this.sortService.sortFirstNameStudents(t):this.sortService.sortArrayByMultipleObjectKeyAsc(t,"pos","id")}_searchStudentObjsByName(t,i){i=this.commonService.convertVietnameseToEnglish(i);var a=[];for(let s=0;s<t.length;s++)-1!=this.commonService.convertVietnameseToEnglish(t[s].fullName??"").toLowerCase().indexOf(i.toLowerCase())&&a.push(t[s]);return a}_getStudentObjByFilterObj(t,i){return i.isSubmitted||i.isNotSubmit||i.isMarked||i.mustReSubmit?t.filter(r=>i.isSubmitted&&1==r.isSubmitted||i.isNotSubmit&&1==r.isNotSubmit||i.isMarked&&1==r.isMarked||i.mustReSubmit&&1==r.mustReSubmit):t}_viewDataBySortSearchAndFilter(){var t=this.homeworkResultFilterService.getDefaultFilterObj(),i=this._getStudentObjByFilterObj(this.rawStudentObjs,t),a=this.searchContentObj.searchContent;""!=a&&(i=this._searchStudentObjsByName(i,a)),i=this._sortStudentObjs(i),this.studentHaveSortAndSearchByNameObjs=i}search(t){this.searchContentObj=t,this.homeworkResultFilterService.clearFilter(),this._viewDataBySortSearchAndFilter()}sortByTimeDesc(){this.form.controls.sortByTimeDesc.value?this.browserStorageService.saveSimpleStorage(this.sortByStorageKey,"sort_by_time_desc"):this.browserStorageService.removeSimpleStorage(this.sortByStorageKey),this._viewDataBySortSearchAndFilter()}changeFilterEvent(){this.searchContentObj.searchContent="",this._viewDataBySortSearchAndFilter()}addStatusToStudentObjs(t){for(var i=[],a=0;a<t.length;a++){i.push({...t?.[a],index:a}),t[a].confirmedAt&&t[a].confirmedAt&&i[a].index==a?i[a].isMarked=!0:null==t[a].answer||t[a].confirmedAt||i[a].index!=a?null==t[a].answer&&null!=t[a].answerHistory&&i[a].index==a?i[a].mustReSubmit=!0:i[a].isNotSubmit=!0:i[a].isSubmitted=!0;let r=t[a].answer?.files??"";r.includes("<z>:")&&(r=this.zipDataService.decodeContentGzip(r)),i[a].answerFileObjs=this.castJsonToObj(r)}return i}parseHomeworkData(t){var i=this.castObj(t);return i?.files&&(i.fileObjs=this.commonService.myParseJson(i.files)),i&&this.zipDataService.convertHomeworkObj(i),i}getData(){this.initStatusObj(),this.waitDestroy(this.answerService.apiAnswerGetStudentsHomeworkGet(this.homeworkHashId).subscribe(t=>{if(1==t.success){if(t.data){this.errorMessage="",this.zipDataService.convertStudentsHomeworkObj(t.data?.studentObjs),this.initDataHomework=t.data,this.rawStudentObjs=this.addStatusToStudentObjs(t.data?.studentObjs??new Array),this.homeworkObj=this.parseHomeworkData(t.data?.homeworkObj??{}),this.classroomObj=t.data?.classroomObj??{},this.classroomId=this.classroomObj.id??0,this.categoryId=this.homeworkObj?.categoryId??0;let i=this.commonService.getMyQueryParam("backto")??"",a=this.commonService.getMyQueryParam("filterBy")??"";a&&(i=this.commonService.plusParamToQueryString(i,{filterBy:a})),this.backToLink="/admin/testbank/homework-results-list/"+this.categoryId+"/"+this.homeworkId+"/"+this.homeworkHashId,i&&i.includes("shareType")&&(this.backToLink=`/admin/testbank/homework-results-list/${this.categoryId}/${this.homeworkId}/${this.homeworkHashId}?backto=`+encodeURIComponent(i)),this.paramBackToLink=i||`/admin/testbank/document-management/1/${this.categoryId}/1`,this.changeFilterEvent()}this.successStatusObj()}else this.errorMessage=t.message??"",this.errorStatusObj(this.errorMessage,!0)}))}ngOnInit(){this.getStatusSideNav(),(0,ne.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.homeworkId=this.activeRoute.snapshot.paramMap.get("id")??"",this.homeworkHashId=this.commonService.getMyParam(this.activeRoute,"hash_id")??"",this.categoryId=Number(this.activeRoute.snapshot.paramMap.get("cat_id"))??0,this.getData()}),this.commonService.translateMetaData({title:"lang_cms_homework_submit_list_title",description:"lang_cms_homework_submit_list_description",image:"lang_cms_homework_image"}),super.ngOnInit()}ngOnDestroy(){document.body.style.overflow="auto",super.ngOnDestroy()}constructor(t,i,a,r,s,l,c,u,m){super(),this.activeRoute=t,this.answerService=i,this.zipDataService=a,this.sortService=r,this.browserStorageService=s,this.examFilterService=l,this.exportResultService=c,this.homeworkResultFilterService=u,this.sAztMatDrawerService=m,this.backToLink="",this.paramBackToLink="",this.homeworkId="",this.homeworkHashId="",this.categoryId=0,this.classroomId=0,this.rawStudentObjs=[],this.studentHaveSortAndSearchByNameObjs=[],this.errorMessage="",this.sortByStorageKey="homework_list_sort_by",this.searchContentObj=new t_.h,this.styleInput="py-1",this.form=new h.cw({sortByTimeDesc:new h.NI(this._isSortedByTimeDesc(),{nonNullable:!0})})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(E.gz),e.Y36(zp.P6),e.Y36(Us.a),e.Y36(th.V),e.Y36(oa.n),e.Y36(Kx),e.Y36(zg.U),e.Y36(ww),e.Y36(Ad.T))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-homework-result-list"]],viewQuery:function(t,i){if(1&t&&e.Gf(WF,5),2&t){let a;e.iGM(a=e.CRH())&&(i.drawer=a.first)}},features:[e._Bn([Ad.T]),e.qOj],decls:40,vars:13,consts:[[3,"headerBackToLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],["doneLoading",""],["xPosition","before"],["mainMenu","matMenu"],[1,"dropdown-menu","show","relative","w-72"],[1,"dropdown-content"],["azt-track-service","homework-result-list-UoAbuGB6VrG",1,"dropdown-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide","mr-2"],["d","M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"],["points","7 10 12 15 17 10"],["x1","12","y1","15","x2","12","y2","3"],["azt-track-service","homework-result-list-PxxtOkbgmqm",1,"dropdown-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","mr-2"],["d","M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],["points","14 2 14 8 20 8"],["x1","16","y1","13","x2","8","y2","13"],["x1","16","y1","17","x2","8","y2","17"],["x1","10","y1","9","x2","8","y2","9"],["azt-track-service","homework-result-list-mTV5aEMDlSD","for","isSortByTimeDESC",1,"dropdown-item","cursor-pointer",3,"click"],[1,"flex","items-center"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","mr-2","lucide"],["d","M11 5h10"],["d","M11 9h7"],["d","M11 13h4"],["d","m3 17 3 3 3-3"],["d","M6 18V4"],[1,"form-check","form-switch","ml-auto"],[3,"formGroup"],["id","isSortByTimeDESC","type","checkbox","formControlName","sortByTimeDesc",1,"show-code","form-check-input","ml-2",3,"change"],[3,"currentStatusObj"],[4,"ngIf"],[3,"isScrollToTop"],[3,"msg","show","percent"],[1,"azt-homework-result-list","container-fluid"],["class","intro-y col-span-11 alert alert-danger alert-dismissible show flex items-center mb-6",4,"ngIf"],["class","azt-drawer-container mt-5",3,"hasBackdrop",4,"ngIf"],["class","py-4",4,"ngIf"],[1,"intro-y","col-span-11","alert","alert-danger","alert-dismissible","show","flex","items-center","mb-6"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","icon-name","info","data-lucide","info",1,"lucide","w-4","h-4","mr-2"],["cx","12","cy","12","r","10"],["x1","12","y1","16","x2","12","y2","12"],["x1","12","y1","8","x2","12.01","y2","8"],[1,"azt-drawer-container","mt-5",3,"hasBackdrop"],[3,"ngClass","mode","opened","closedStart"],["drawer",""],[1,"azt-draw-left",2,"overflow-x","hidden",3,"ngClass"],[3,"initData"],[2,"overflow-x","hidden",3,"ngClass"],[1,"azt-drawer-content",3,"ngClass"],[1,"flex","box","sm:h-auto","rounded-md","border","border-slate-200/60","dark:border-darkmode-400","p-2","text-slate-500","mb-2"],["azt-track-service","homework-result-list-Ej_zMayVTN_","class","btn btn-sm mr-2",3,"matTooltip","click",4,"ngIf"],["azt-track-service","homework-result-list-hYOFjZmUAjh","class","btn btn-sm mr-2",3,"matTooltip","click",4,"ngIf"],[1,"relative","flex","ml-auto"],[3,"colorBackground"],[1,"mr-2"],[3,"isServerSearch","placeholder","searchContentObj","styleInput","onSearch"],[1,"filter","mr-2"],[3,"changeFilterEvent"],[1,"menu"],[1,"btn","btn-sm",3,"matMenuTriggerFor"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-menu","w-4","h-4"],["x1","4","y1","12","x2","20","y2","12"],["x1","4","y1","6","x2","20","y2","6"],["x1","4","y1","18","x2","20","y2","18"],[1,"container-fluid","content-zone","pr-0",3,"ngClass"],[1,"row","mt-5","align-items-center","mx-auto",2,"width","100%"],[1,"col-10","p-0","text-left"],[1,"h6",2,"font-weight","400","font-size","14px"],["azt-track-service","homework-result-list-Fk1Yij7NXbZ",1,"clickable","link-stu",3,"routerLink"],["class","box-content py-2",4,"ngIf","ngIfElse"],["allStudentOrStudentFilterBySearchKey",""],[3,"studentLists","homeworkObj","tableType"],["azt-track-service","homework-result-list-Ej_zMayVTN_",1,"btn","btn-sm","mr-2",3,"matTooltip","click"],["x","3","y","3","width","18","height","18","rx","2","ry","2"],["d","M9 3v18"],["d","m14 9 3 3-3 3"],["azt-track-service","homework-result-list-hYOFjZmUAjh",1,"btn","btn-sm","mr-2",3,"matTooltip","click"],["d","m16 15-3-3 3-3"],[1,"box-content","py-2"],[1,"text-center","mt-5"],[1,"h4"],[3,"backToLink","studentLists","isNotTestedYet","isOpenSideNav","obj"],[1,"py-4"]],template:function(t,i){if(1&t&&(e.TgZ(0,"teacher-layout",0),e.YNc(1,XF,1,1,"azt-loading-effect",1),e.YNc(2,hN,2,2,"ng-template",null,2,e.W1O),e.qZA(),e.TgZ(4,"mat-menu",3,4)(6,"div",5)(7,"ul",6)(8,"li")(9,"a",7),e.NdJ("click",function(){return i.exportToExcel("homework")}),e.O4$(),e.TgZ(10,"svg",8),e._UZ(11,"path",9)(12,"polyline",10)(13,"line",11),e.qZA(),e._uU(14),e.ALo(15,"mytranslate"),e.qZA()(),e.kcU(),e.TgZ(16,"li")(17,"a",12),e.NdJ("click",function(){return i.exportToPDF()}),e.O4$(),e.TgZ(18,"svg",13),e._UZ(19,"path",14)(20,"polyline",15)(21,"line",16)(22,"line",17)(23,"line",18),e.qZA(),e._uU(24),e.ALo(25,"mytranslate"),e.qZA()(),e.kcU(),e.TgZ(26,"li")(27,"label",19),e.NdJ("click",function(r){return r.stopPropagation()}),e.TgZ(28,"span",20),e.O4$(),e.TgZ(29,"svg",21),e._UZ(30,"path",22)(31,"path",23)(32,"path",24)(33,"path",25)(34,"path",26),e.qZA(),e._uU(35),e.ALo(36,"mytranslate"),e.qZA(),e.kcU(),e.TgZ(37,"div",27)(38,"form",28)(39,"input",29),e.NdJ("change",function(){return i.sortByTimeDesc()}),e.qZA()()()()()()()()),2&t){const a=e.MAs(3);e.Q6J("headerBackToLink",i.paramBackToLink),e.xp6(1),e.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a),e.xp6(13),e.hij(" ",e.lcZ(15,7,"lang_homework_homework_score_list_export_excel")," "),e.xp6(10),e.hij(" ",e.lcZ(25,9,"lang_homework_homework_score_list_export_pdf")," "),e.xp6(11),e.hij(" ",e.lcZ(36,11,"lang_testbank_tested_list_sort_time")," "),e.xp6(3),e.Q6J("formGroup",i.form)}},dependencies:[E.rH,F.mk,F.O5,Qi.VK,Qi.p6,Hs.jA,Hs.kh,Hs.LW,Ai.gM,h._Y,h.Wl,h.JJ,h.JL,h.sg,h.u,vi.l,wt.M,r_.M,Hg,t2.s,gm.W,wo._,yF,kF,KF,VF,ye.Jy,ye.JV],encapsulation:2}),n})();function _N(n,o){if(1&n&&e._UZ(0,"azt-loading-effect",3),2&n){const t=e.oxw();e.Q6J("currentStatusObj",t.statusObj)}}function fN(n,o){if(1&n&&(e.TgZ(0,"div",23),e._UZ(1,"print-history-box",24),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("examObj",t.examObj)("offlineExamObj",t.offlineExamObj)("startStudentCode",t.startStudentCode)("examPrintInfoObj",t.examPrintInfoObj)}}const Cw=function(n){return[n]};function gN(n,o){if(1&n&&(e.TgZ(0,"div",5)(1,"div",6)(2,"h3",7),e._uU(3),e.ALo(4,"mytranslate"),e.qZA()(),e.TgZ(5,"div",8),e.YNc(6,fN,2,4,"div",9),e.qZA(),e.TgZ(7,"div",10)(8,"div",11)(9,"a",12),e.ALo(10,"navigationLocalize"),e.O4$(),e.TgZ(11,"svg",13),e._UZ(12,"path",14)(13,"polyline",15)(14,"path",16)(15,"path",17)(16,"path",18)(17,"path",19),e.qZA(),e._uU(18),e.ALo(19,"mytranslate"),e.qZA()(),e.kcU(),e.TgZ(20,"div",20)(21,"a",21),e.ALo(22,"navigationLocalize"),e.O4$(),e.TgZ(23,"svg",13),e._UZ(24,"path",22),e.qZA(),e._uU(25),e.ALo(26,"mytranslate"),e.qZA()()()()),2&n){const t=e.oxw(2);let i,a;e.xp6(3),e.hij("",e.lcZ(4,6,"lang_auto_tao_file_thanh_cong")," \u{1f44f}"),e.xp6(3),e.Q6J("ngIf",t.offlineExamObj&&(null==t.offlineExamObj?null:t.offlineExamObj.hashId)),e.xp6(3),e.Q6J("routerLink",e.VKq(16,Cw,e.lcZ(10,8,"/admin/testbank/exam-results-list/"+(null!==(i=t.examObj.categoryId)&&void 0!==i?i:0)+"/"+t.examObj.id+"/0"))),e.xp6(9),e.hij(" ",e.lcZ(19,10,"lang_auto_quan_ly_danh_sach_da_thi")," "),e.xp6(3),e.Q6J("routerLink",e.VKq(18,Cw,e.lcZ(22,12,"/admin/testbank/document-management/0/"+(t.backToLink.includes("shareType")?0:null!==(a=t.examObj.categoryId)&&void 0!==a?a:0)+"/1"))),e.xp6(4),e.hij(" ",e.lcZ(26,14,"lang_auto_ve_trang_quan_ly_file")," ")}}function xN(n,o){if(1&n&&e.YNc(0,gN,27,20,"div",4),2&n){const t=e.oxw();e.Q6J("ngIf",t.examObj)}}let bN=(()=>{class n extends xe.Q{redirectToDocumentManager(){this.myNavigation(`/admin/testbank/document-management/0/${this.examObj?.categoryId??0}/1`)}redirectToTestResultList(){this.myNavigation(`/admin/testbank/exam-results-list/${this.examObj?.categoryId??0}/${this.examObj?.id}/0`)}getExamInfo(t,i){this.initStatusObj(),this.waitDestroy(this.documentConfigService.apiDocumentConfigGetExamConfigDataV2Get(t,i).subscribe(a=>{1==a.success?(a.data?.examObj&&a.data.offlineExamObj&&(this.examObj=a.data.examObj,this.offlineExamObj=a.data.offlineExamObj,this.examPrintInfoObj=a.data.examPrintInfoObj),this.successStatusObj()):this.errorStatusObj(a.message??"",!0)}))}ngOnInit(){let t=this.commonService.getMyParam(this.activeRoute,"hash_id")??"",i=this.commonService.getMyParam(this.activeRoute,"cat_id")??"";this.offlineHashId=this.commonService.getMyParam(this.activeRoute,"offline_hash_id")??"",this.getExamInfo(t,this.offlineHashId);let a=this.commonService.getMyQueryParam("backto");this.backToLink=a??`/admin/testbank/document-management/0/${i}/1`,this.commonService.translateMetaData({title:"lang_cms_download_print_data_title",description:"lang_cms_download_print_data_description",image:""}),super.ngOnInit()}constructor(t,i){super(),this.documentConfigService=t,this.activeRoute=i,this.backToLink="",this.offlineHashId="",this.startStudentCode=1}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(un.Cq),e.Y36(E.gz))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-download-file-print"]],features:[e._Bn([F.uU]),e.qOj],decls:4,vars:3,consts:[[3,"headerBackToLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],["doneLoading",""],[3,"currentStatusObj"],["class","action-document mx-auto mt-8","style","max-width: 700px",4,"ngIf"],[1,"action-document","mx-auto","mt-8",2,"max-width","700px"],[1,"action-heading","mb-4"],[1,"text-lg","font-medium","mb-1"],[1,"action-offline","mt-5"],["class","box mt-3 p-5",4,"ngIf"],[1,"mt-5","flex","flex-col","sm:flex-row","justify-center","items-center"],[1,"mr-2"],["azt-track-service","download-file-print-KZ0pTIEXewD",1,"btn","btn-outline-primary","btn-transparent",3,"routerLink"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","mr-2"],["d","M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],["points","14 2 14 8 20 8"],["d","M8 13h2"],["d","M8 17h2"],["d","M14 13h2"],["d","M14 17h2"],[1,"w-30"],["azt-track-service","download-file-print-O-UfiBIC5BM",1,"btn","btn-outline-primary","btn-transparent",3,"routerLink"],["d","M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z"],[1,"box","mt-3","p-5"],[3,"examObj","offlineExamObj","startStudentCode","examPrintInfoObj"]],template:function(t,i){if(1&t&&(e.TgZ(0,"teacher-layout",0),e.YNc(1,_N,1,1,"azt-loading-effect",1),e.YNc(2,xN,1,1,"ng-template",null,2,e.W1O),e.qZA()),2&t){const a=e.MAs(3);e.Q6J("headerBackToLink",i.backToLink),e.xp6(1),e.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a)}},dependencies:[E.rH,F.O5,vi.l,wo._,Dv,ye.Jy,ye.JV],styles:[".app[_ngcontent-%COMP%]{margin-top:100px}.app-block[_ngcontent-%COMP%]{max-width:750px;margin:0 auto}.app-head[_ngcontent-%COMP%]{text-align:center}.app-title[_ngcontent-%COMP%]{font-size:14px;font-weight:500;margin-bottom:0}.app-main[_ngcontent-%COMP%]{margin-top:40px}.app-copy[_ngcontent-%COMP%]{display:flex;justify-content:center;position:relative;width:630px;margin:0 auto}.btn-export[_ngcontent-%COMP%]{transition:all .5s;background:#2361ae}.btn-export[_ngcontent-%COMP%]:hover:enabled{background:#122e50}.app-content[_ngcontent-%COMP%]{border:none;outline:none;background:#fff;border-radius:5px;box-shadow:#00000012 0 0 5px;height:70px;box-sizing:border-box;padding:15px 20px;font-size:18px;color:#2361ae;width:100%;display:flex;align-items:center}.app-content-icon[_ngcontent-%COMP%]{margin-right:15px}.app-main-bottom[_ngcontent-%COMP%]{margin:30px auto 0;text-align:center;max-width:630px}.btn-text[_ngcontent-%COMP%]{border:none;text-transform:uppercase;background:transparent;color:#2361ae}.app-footer[_ngcontent-%COMP%]{margin-top:40px;margin-bottom:100px;text-align:center}.app-footer[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#babbbc;font-size:18px}.btn-copy[_ngcontent-%COMP%]{position:absolute;display:flex;background:#2361ae;align-items:center;right:0;height:100%;width:134px;border:none;padding:22px 23px;color:#fff;border-top-left-radius:0;border-bottom-left-radius:0;transition:all .5s}.btn-copy[_ngcontent-%COMP%]:hover{background:#184479}.btn-copy[_ngcontent-%COMP%]   .text-copy[_ngcontent-%COMP%]{margin-left:15px;text-transform:initial;font-size:16px}.btn-copy[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{width:30px;height:30px;font-size:30px}.truncate[_ngcontent-%COMP%]{width:70%}@media screen and (max-width: 768px){.app-copy[_ngcontent-%COMP%]{max-width:630px;width:auto}.btn-copy[_ngcontent-%COMP%]{right:0;width:auto}.app-content[_ngcontent-%COMP%]{padding-left:15px;padding-right:140px}}"]}),n})(),vN=(()=>{class n{static generate(t){const i=n._DEFAULT;if(void 0!==t)for(const a in i)Object.hasOwnProperty.call(i,a)&&Object.prototype.hasOwnProperty.call(t,a)&&(i[a]=t[a]);return i}}return n._DEFAULT={is_select_cell:!0,is_select_row:!0},n})();class Ya{constructor(o,t,i,a,r,s,l){this.commonService=o,this.noteAction=t,this.questionService=i,this.callbackOnChange=l,this.name="table_matrix",this.class_active="select",this.first_matrix=null,this.last_matrix=null,this.max_row=0,this.max_col=0,this.menuElement=null,this.list=[],this.menuMode=[],this.lstNode=[],this.isErrSum=!1,this.statusDisable=!1,this.table__main=a,this.table__element=r,this.option=s,this.flag=!1,this.flag_right=!1,this.flag_shift=!1,this.flag_un_merge=!1,this.flag_merge=!1,this.list=[],this.startAddEvent(),this.setupMenuMode(),window.addEventListener("mouseup",()=>{this.endCheck()})}get isErrNumPos(){return this.lstNode.filter(o=>o.content.filter(t=>t.isErr).length>0).length>0}setDisable(o){this.statusDisable=o,this.reBuild()}pushNode(o){return o={...o},new Promise(t=>{if(this.statusDisable)t();else{const i=this.pushTrElement(o);i&&this.reqCheck(i).then(()=>{t()})}})}getResult(){return this.lstNode.length>0?this.lstNode.map(o=>(o.content=o.content.map(t=>({...t,value:"POS"===t.indexName?t.value.replace("&nbsp;","").trim().toUpperCase():this.getResultOfString(t.value)})),o)):[]}resetAndPushList(o){return new Promise(t=>{this.lstNode=o.map(a=>{if("knowledge"===a.obj.type&&a.obj.item.endsWith(")")&&(a.obj.item=a.obj.item.substring(0,a.obj.item.lastIndexOf("(")),a.obj.prNode&&a.obj.prNode.item.endsWith(")")&&(a.obj.prNode.item=a.obj.prNode.item.substring(0,a.obj.prNode.item.lastIndexOf("(")))),a.content.length!==this.colName().length){const r=this.colName();let s=a.content.map(l=>l.indexName);r.forEach((l,c)=>{s.includes(l)||a.content.unshift(this.createEmptyContentWithName(c,a.content[0].id))}),a.content=a.content.map(l=>({...l,index:this.colNameToIndex(l.indexName)}))}return a.content=a.content.map(r=>(r.totalTL=0,r.totalTN=0,r.tempTotalTL=0,r.tempTotalTN=0,r)),a});const i=new Ge.Q(2);this.lstNode.forEach(a=>{i.addTask(this,this.reqCheck,[a])}),i.start().then(()=>{this.lstNode.forEach(a=>{a.content.forEach(r=>{r.mergeId.length>0&&(r.tempTotalTL=r.totalTL,r.tempTotalTN=r.totalTN,r.mergeId.forEach(s=>{const l=this.lstNode.findIndex(c=>c.index===s);-1!==l&&this.lstNode[l].content[r.index]&&(r.totalTL+=this.lstNode[l].content[r.index].totalTL,r.totalTN+=this.lstNode[l].content[r.index].totalTN)}))})}),this.reBuild(),t()})})}getSumQuestion(){let o=0;return this.lstNode.forEach(t=>{const i=this.sumParamOfColName(t.content,"SOCH_TL"),a=this.sumParamOfColName(t.content,"SOCH_TN"),r=this.sumParamOfColName(t.content,"SOCH_DS"),s=this.sumParamOfColName(t.content,"SOCH_DT");o+=i+a+r+s}),o}sumParamOfColName(o,t){const i={SOCH_TN:0,SOCH_TL:0,SOCH_DS:0,SOCH_DT:0,TGP:0};return o.forEach(a=>{a.indexName.indexOf("SOCH")>0&&(-1!==a.value.toUpperCase().indexOf("TN")&&(i.SOCH_TN+=Ya.selectNumberOfString(a.value)??0),-1!==a.value.toUpperCase().indexOf("TL")&&(i.SOCH_TL+=Ya.selectNumberOfString(a.value)??0),-1!==a.value.toUpperCase().indexOf("DS")&&(i.SOCH_DS+=Ya.selectNumberOfString(a.value)??0),-1!==a.value.toUpperCase().indexOf("DT")&&(i.SOCH_DT+=Ya.selectNumberOfString(a.value)??0),/^\d+$/.test(a.value)&&(i.SOCH_TN+=Ya.selectNumberOfString(a.value)??0)),a.indexName.indexOf("TGP")>0&&(i.TGP+=Ya.selectNumberOfString(a.value)??0)}),i[t]}reqCheck(o){return new Promise(t=>{let i,a,r;"test"===o.obj.type&&(a=o.obj.id.toString(),o.obj.shareType=o.obj.prNode?o.obj.prNode.shareType:void 0),"cate"===o.obj.type&&(i=o.obj.id.toString(),"-1"===i&&(o.obj.shareType="user")),"knowledge"===o.obj.type&&(r=o.obj.id.toString());let s=this.commonService.myTranslateInstant("lang_auto_don_vi")??"",l=this.commonService.myTranslateInstant("lang_auto_khong_tim_thay_cau_hoi_duoc_gan_nhan");this.questionService.apiQuestionsSummarizeTagsTypesGet(i,a,void 0,void 0,o.obj.shareType,r).subscribe(c=>{o.disLoading=!0,1===c.success&&c.data?0===c.data.reduce((m,p)=>m+(p.total??0),0)?(o.obj.item=this.commonService.myTranslateInstant(o.obj.item)??"",this.noteAction(s+': "'+o.obj.item+'":'+l,!0),o.content.forEach(m=>{m.disabled=!0})):o.content.forEach(m=>{const p=c.data?.map(R=>({answerType:R.answerType,tags:R.tags?.filter(j=>j.code==m.indexName.split("_")[0])})),f=p?.find(R=>3===R.answerType),b=p?.find(R=>1===R.answerType),L=p?.find(R=>4===R.answerType),N=p?.find(R=>5===R.answerType);m.totalTL=f?.tags?.reduce((R,j)=>R+(j.total??0),0)??0,m.totalTN=b?.tags?.reduce((R,j)=>R+(j.total??0),0)??0,m.totalDT=L?.tags?.reduce((R,j)=>R+(j.total??0),0)??0,m.totalDS=N?.tags?.reduce((R,j)=>R+(j.total??0),0)??0}):(this.noteAction(s+': "'+o.obj.item+'":'+l,!0),o.content.forEach(u=>{u.disabled=!0})),this.reBuild(),t()})})}getResultOfString(o){o=o.replace("&nbsp;","").trim().toUpperCase();let t=!1;const i=Ya.selectNumberOfString(o);return i?(["TN","TL","DS","DT","NH"].forEach(a=>{-1!==o.indexOf(a)&&(t=!0,o=i.toString()+a)}),t?o:i.toString()):""}pushChangeEvent(){this.callbackOnChange&&this.callbackOnChange(this.lstNode)}startAddEvent(){if(this.getMatrixTable(),this.statusDisable)return;const o=c=>{this.startCheck(c)},t=c=>(c.preventDefault(),this.startRightCheck(c),!1),i=c=>{this.flag&&(c.preventDefault(),this.moveCheck(c.target))},a=c=>{this.validateInput(c)},r=c=>{this.checkHotKey(c)},s=c=>{this.checkHotKeyEnd(c)};for(let c=0;c<this.max_row;c++)for(let u=0;u<this.max_col;u++){const m=this.getElWithMatrix(u,c);m&&m.classList.contains("edit-item-tb")&&(m.setAttribute("row_index",c.toString()),m.setAttribute("col_index",u.toString()),m.addEventListener("mousedown",o),m.addEventListener("contextmenu",t,!1),m.addEventListener("mouseover",i),m.addEventListener("input",a),m.addEventListener("keydown",r),m.addEventListener("keyup",s))}const l=document.getElementsByClassName("tb-matrix-editor-trash-node");Array.from(l).forEach(c=>{c.addEventListener("click",()=>{const u=this.getNodeWithElement(c);if(u){if(u.isMergeCate){const m=this.getRootMerge(u,"Cate");m&&m.numMergeCate--}else if(u.numMergeCate>1){const m=this.lstNode[this.lstNode.indexOf(u)+1];m&&(m.isMergeCate=!1,m.numMergeCate=u.numMergeCate-1)}u.content.forEach(m=>{if(m.isMerge){const p=this.findContentRootOfMerge(m,u.index);p&&p.mergeId.splice(p.mergeId.indexOf(u.index),1)}else if(m.mergeId.length>0){const p=this.findContentNextMerge(m);p&&(m.mergeId.splice(0,1),p.isMerge=!1,p.mergeId=m.mergeId)}}),this.lstNode.splice(this.lstNode.indexOf(u),1)}this.reBuild()})})}findContentRootOfMerge(o,t){let i;return this.lstNode.forEach(a=>{a.content.forEach(r=>{r.index==o.index&&r.mergeId.includes(t)&&(i=r)})}),i}findContentNextMerge(o){const t=this.lstNode.find(i=>i.index==o.mergeId[0]);if(t&&t.content[o.index])return t.content[o.index]}checkHotKeyEnd(o){return 16===o.keyCode&&(o.preventDefault(),this.list.length>1&&this.openMenu("select")),!1}checkHotKey(o){const t=(r,s)=>{if(this.flag_shift&&s){const l=this.getElWithMatrix(r.cell,r.row);l&&(0===this.list.length&&this.checkList(o.target),this.checkList(l))}else this.removeAllList(),this.focusMatrix(r);return!1},i=0===this.list.length?o.target:this.list[this.list.length-1],a=this.getMatrixEl(i);return 40===o.keyCode?(o.preventDefault(),t({...a,row:a.row+1},this.option.is_select_row)):38===o.keyCode?(o.preventDefault(),t({...a,row:a.row-i.rowSpan},this.option.is_select_row)):37===o.keyCode?(o.preventDefault(),t({row:a.row-i.rowSpan+1,cell:a.cell-1},this.option.is_select_cell)):39===o.keyCode?(o.preventDefault(),t({row:a.row-i.rowSpan+1,cell:a.cell+1},this.option.is_select_cell)):13===o.keyCode?(o.preventDefault(),this.flag_un_merge?(this.startUnMergeAction(),!1):this.flag_merge?(this.startMergeAction(),!1):this.flag_shift?(this.startRightCheck(o),!1):t({...a,row:a.row+1},this.option.is_select_row)):(16===o.keyCode&&(o.preventDefault(),this.flag_shift=!0),!1)}focusMatrix(o){const t=this.getElWithMatrix(o.cell,o.row);t&&t.focus()}startRightCheck(o){const t=o.target;t.rowSpan>1&&(this.flag_right=!0,this.flag=!1,this.list=[t],this.openMenu("right"),this.flag_un_merge=!0)}startCheck(o){this.removeAllList(),this.flag=!0,this.checkList(o.target)}moveCheck(o){this.toggleCursor(!0),this.checkList(o)}endCheck(){this.flag_right||(this.toggleCursor(!1),this.flag=!1,this.stepMenu()||this.removeAllList())}checkList(o){0===this.list.length?this.first_matrix=this.getMatrixEl(o):this.last_matrix=this.getMatrixEl(o),this.getList(),this.loopList(),this.flag_merge=!0}removeAllList(){this.closeMenu(),this.removeSelectList(),this.first_matrix=null,this.last_matrix=null,this.flag=!1,this.flag_right=!1,this.flag_shift=!1,this.flag_un_merge=!1,this.flag_merge=!1}getMatrixEl(o){return{cell:Number(o.getAttribute("col_index")),row:Number(o.getAttribute("row_index"))}}getMatrixTable(){this.table__element.innerHTML=this.table__element.innerHTML,this.max_row=this.table__element.rows.length,this.max_col=16}getList(){if(this.removeSelectList(),this.first_matrix&&this.last_matrix){let o=0,t=0,i=0,a=0;this.first_matrix.cell<this.last_matrix.cell?(o=this.first_matrix.cell,t=this.last_matrix.cell):(o=this.last_matrix.cell,t=this.first_matrix.cell),this.first_matrix.row<this.last_matrix.row?(i=this.first_matrix.row,a=this.last_matrix.row):(i=this.last_matrix.row,a=this.first_matrix.row);for(let r=o;r<=t;r++)for(let s=i;s<=a;s++){let l=!1;this.option.is_select_cell&&this.option.is_select_row?l=!0:this.option.is_select_row?o===t&&(l=!0):i===a&&(l=!0),l?this.pushList(this.getElWithMatrix(r,s)):this.endCheck()}}else this.first_matrix&&this.pushList(this.getElWithMatrix(this.first_matrix.cell,this.first_matrix.row))}loopList(){this.list.forEach(o=>{o.classList.add(this.class_active)})}getElWithMatrix(o,t){var a,r,s,l,c,u,m,i=[];for(m=0;m<this.table__element.rows.length;m++)for(a=this.table__element.rows[m],u=0;u<a.cells.length;u++){for(r=a.cells[u],s=u;i[m]&&i[m][s];++s);for(l=s;l<s+r.colSpan;++l)for(c=m;c<m+r.rowSpan;++c)i[c]||(i[c]=[]),i[c][l]=!0;if(s<=o&&o<s+r.colSpan&&m<=t&&t<m+r.rowSpan)return r}}pushList(o){o&&this.list.push(o)}removeSelectList(){this.list.forEach(o=>{o.classList.remove(this.class_active)}),this.list=[]}toggleCursor(o){document.body.style.cursor=o?"crosshair":"auto"}setupMenuMode(){this.menuMode.push({id:"__merge",mode:"select",action:this.startMergeAction}),this.menuMode.push({id:"__un_merge",mode:"right",action:this.startUnMergeAction})}generateMenu(o){this.menuElement||(this.menuElement=document.getElementById("menu__excel_editor"),this.menuMode.forEach(t=>{const i=document.getElementById(this.menuElement?.id+t.id);i&&i.addEventListener("click",a=>{t.action.call(this)})})),this.menuMode.forEach(t=>{const i=document.getElementById(this.menuElement?.id+t.id);i&&(i.style.display=t.mode===o?"flex":"none")})}stepMenu(){return this.list.length>1&&(this.openMenu("select"),!0)}openMenu(o){if(this.list.length>0){this.generateMenu(o);const t=this.getPosWithParent(this.list[this.list.length-1]);this.menuElement&&(this.menuElement.style.top=t.top+Math.floor(t.height/2)+"px",this.menuElement.style.left=t.left+Math.floor(t.width/2)+"px",this.menuElement.style.display="block")}}closeMenu(){this.menuElement&&(this.menuElement.style.display="none")}getPosWithParent(o){const t=this.table__main.getBoundingClientRect(),i=o.getBoundingClientRect();return{top:i.top-t.top,left:i.left-t.left,width:i.width,height:i.height}}startMergeAction(){let o;var t,i;for(let r=0;r<this.list.length;r++){const s=this.list[r];if(s){const l=this.getNodeWithElement(s);if(l){const c=this.getContentOfNodeWithElement(s,l);c&&(0===r?(o=this.getMatrixEl(s),i=l,(t=c).tempTotalTL=t.totalTL,t.tempTotalTN=t.totalTN):s.parentElement&&t&&(t.mergeId.push(l.index),c.isMerge=!0,c.value=""))}}}let a=[];if(i&&t&&t.mergeId.length>0){const r=[i];t.mergeId.forEach(s=>{const l=this.getNodeWithIndex(s);l&&r.push(l)}),a=this.getLstNodeParent(r)}if(t&&a.length>0)for(let r=0;r<this.list.length;r++){const s=this.list[r];if(s){const l=this.getNodeWithElement(s);if(l&&a.filter(c=>c.obj.id===l.obj.id).length>0){const c=this.getContentOfNodeWithElement(s,l);c&&0!==r&&(t.totalTL+=c.totalTL,t.totalTN+=c.totalTN)}}}this.reBuild(),o&&this.focusMatrix(o)}startUnMergeAction(){const o=this.list[0],t=this.getMatrixEl(o),i=this.getNodeWithElement(o);if(i){const a=this.getContentOfNodeWithElement(o,i);a&&(a.totalTL=a.tempTotalTL,a.totalTN=a.tempTotalTN,a.mergeId.forEach(r=>{const s=this.lstNode.find(l=>l.index==r);if(s){const l=s.content[a.index];l&&(l.isMerge=!1)}}),a.mergeId=[])}this.reBuild(),this.focusMatrix(t)}getCellOfCNode(o,t){for(let i=0;i<this.table__element.rows.length;i++){const a=this.table__element.rows[i];if(a.getAttribute("data-index")===o.index)for(let r=0;r<a.cells.length;r++){const s=a.cells[r];if(s.getAttribute("data-index")===t.index.toString())return s}}}getNodeWithElement(o){if(o.parentElement&&"TR"==o.parentElement.tagName.toUpperCase()){const t=o.parentElement.getAttribute("data-index");if(t){const i=t;return this.lstNode.find(a=>a.index===i)}}}getNodeWithIndex(o){return this.lstNode.find(t=>t.index===o)}isChildWithMatrix(o,t){if(o.obj.prNode)for(var i=this.commonService.myClone(o.obj.prNode);i;){if(t.includes(i.id))return!0;i=i.prNode}return!1}getLstNodeParent(o){const t=[],i=[];return o.forEach(a=>{t.push(a.obj.id)}),o.forEach(a=>{this.isChildWithMatrix(a,t)||0===i.filter(r=>r.obj.id===a.obj.id).length&&i.push(a)}),i}getContentOfNodeWithElement(o,t){const i=o.getAttribute("data-index");if(i&&i?.length>0)return t.content[parseInt(i)]}selectNumberWithElement(o){return Ya.selectNumberOfString(o.innerText)}static selectNumberOfString(o){var t=o.replace(/([0-9]+)T/g,"$1");if(!isNaN(Number(t)))return Number(t);var i=o.replace(/([0-9]+)TL/g,"$1");if(!isNaN(Number(i)))return Number(i);var a=o.replace(/([0-9]+)TN/g,"$1");if(!isNaN(Number(a)))return Number(a);var r=o.replace(/([0-9]+)%/g,"$1");if(!isNaN(Number(r)))return Number(r);var s=o.replace(/([0-9]+)N/g,"$1");if(!isNaN(Number(s)))return Number(s);var l=o.replace(/([0-9]+)NH/g,"$1");if(!isNaN(Number(l)))return Number(l);var c=o.replace(/([0-9]+)D/g,"$1");if(!isNaN(Number(c)))return Number(c);var u=o.replace(/([0-9]+)DS/g,"$1");if(!isNaN(Number(u)))return Number(u);var m=o.replace(/([0-9]+)DT/g,"$1");return isNaN(Number(m))?void 0:Number(m)}validateInput(o){const t=o.target,a=this.getNodeWithElement(t)?.content.find(l=>l.indexName===t.getAttribute("data-name"));if(0===(t.getAttribute("data-name")??"").indexOf("POS")&&(t.classList.remove("border-err"),t.classList.remove("common-warning-item")),0==t.innerText.length)return a&&0===(t.getAttribute("data-name")??"").indexOf("POS")&&(a.isErr=!1),void this.pushValueWithElement(t);if(t.innerText=t.innerText.replace(/(\r\n|\n|\r)/gm,"").trim().toUpperCase(),-1!==(t.getAttribute("data-name")??"").indexOf("_SOCH")&&(null==this.selectNumberWithElement(t)||t.innerText.includes(".")||t.innerText.includes(","))&&(t.innerHTML="&nbsp;",this.snackErrElement(t)),-1!==(t.getAttribute("data-name")??"").indexOf("_TGP")&&isNaN(Number(t.innerText))&&(t.innerHTML="&nbsp;",this.snackErrElement(t)),0===(t.getAttribute("data-name")??"").indexOf("DIEM")){let l=t.innerText.replace("%","");isNaN(Number(l))?(t.innerHTML="&nbsp;",this.snackErrElement(t)):t.innerText=l}if(0===(t.getAttribute("data-name")??"").indexOf("POS")){const l=Number(t.getAttribute("data-total-input-number"));this.getNoteValidatePos(l,t.innerText,a).isErr&&(this.snackErrElement(t,!1),t.classList.add("common-warning-item"))}""==t.innerText&&(t.innerHTML="&nbsp;");const r=window.getSelection(),s=document.createRange();r.removeAllRanges(),s.selectNodeContents(t),s.collapse(!1),r.addRange(s),t.focus(),this.pushValueWithElement(t)}pushValueWithElement(o){const t=this.getNodeWithElement(o);if(t){const i=this.getContentOfNodeWithElement(o,t);i&&(i.value=o.innerText+("DIEM"===i.indexName?"%":""),this.isNodeWarning(i)?o.classList.add(...this.getWarMsg(i).split(" ")):o.classList.remove("warning-item","wn-empty","wn-over-tn","wn-over-tl","wn-over-ds","wn-over-dt"))}this.sumAll()}sumAll(){let o=" ".repeat(this.colName().length).split("").map(()=>0);this.lstNode.forEach(r=>{r.content.forEach(s=>{if(["SOCH_TN","SOCH_TL","SOCH_DS","SOCH_DT","TGP"].includes(s.indexName)){s.value=this.sumParamOfColName(r.content,s.indexName).toString();const l=this.getCellOfCNode(r,s);l&&(l.innerText=s.value)}void 0!==o[s.index]&&!s.isMerge&&0!==s.index&&(o[s.index]+=Ya.selectNumberOfString(s.value)??0)})});var t="";o.forEach((r,s)=>{s===o.length-1?(this.isErrSum=Number(r)>100,t+=`<td class="text-center">${r>0?r.toString()+"%":""}</td>`):t+=0===s?'<td class="text-center"></td>':`<td class="text-center">${r>0?r.toString():""}</td>`});const a=`<tr class="dis-item-tb"><td colspan="4" class="text-center">${this.commonService.myTranslateInstant("lang_auto_tong")}</td>${t}</tr>`;this.table__element.tFoot&&(this.table__element.tFoot.innerHTML=a),this.lstNode.forEach(r=>{r.content.forEach(s=>{if("POS"===s.indexName){let l=this.countTotalNumQuestRow(r);const c=document.getElementById(`total_input_number_${s.index}${s.id}`);if(c){c.classList.remove("border-err"),c.classList.remove("common-warning-item"),c.setAttribute("data-total-input-number",l.toString());let u=this.getNoteValidatePos(l,s.value,s);c.setAttribute("common-note-trans",u.str),u.isErr&&(this.snackErrElement(c,!1),c.classList.add("common-warning-item"))}}})})}indexToColName(o){return this.colName()[o]??""}colNameToIndex(o){return this.colName().findIndex(t=>t===o)}colName(){return["POS","NB_SOCH","NB_TGP","TH_SOCH","TH_TGP","VD_SOCH","VD_TGP","VDC_SOCH","VDC_TGP","SOCH_TN","SOCH_TL","SOCH_DS","SOCH_DT","TGP","DIEM"]}snackErrElement(o,t=!0){let i=this.commonService.myTranslateInstant("lang_auto_du_lieu_nhap_vao_khong_hop_le")??"";this.noteAction(i,!0),o.classList.add("border-err"),t&&setTimeout(()=>{o.classList.remove("border-err")},1200)}hiddenNoteEmpty(){if(0===this.lstNode.length){let o=this.commonService.myTranslateInstant("lang_auto_matrix_content_text");this.table__element.tBodies[0].innerHTML=`<tr class="text-center"><td colspan="19">${o}</td></tr>`}}getRootMerge(o,t){let i=this.lstNode.findIndex(a=>a.index===o.index);for(let a=i;a>=0;a--)if(!this.lstNode[a]["isMerge"+t])return this.lstNode[a];return o}createEmptyContentWithName(o,t){return{totalTL:0,totalTN:0,totalDS:0,totalDT:0,tempTotalTL:0,tempTotalTN:0,tempTotalDS:0,tempTotalDT:0,indexName:this.indexToColName(o),index:o,id:t,value:"&nbsp;",mergeId:[],isErr:!1}}pushTrElement(o){var t=!1;if(this.lstNode.length>0){const a=this.lstNode[this.lstNode.length-1];if(a.obj.id===o.id)return;const r=this.getRootMerge(a,"Cate");(t=a.obj.prNode?.id===o.prNode?.id)&&r.numMergeCate++}const i={numMergeCate:1,isMergeCate:t,index:this.generateIdRequired(10),obj:o,content:" ".repeat(this.colName().length).split("").map((a,r)=>this.createEmptyContentWithName(r,o.id))};return this.lstNode.push(i),this.reBuild(),i}getNoteValidatePos(o,t,i){let a={str:this.commonService.myTranslateInstant("lang_auto_validate_empty")??"",isErr:!1};const r=this.commonService.myTranslateInstant("lang_auto_khong_qua")??"",s=this.commonService.myTranslateInstant("lang_auto_du")??"",l=t.replace("&nbsp;","").trim().toUpperCase();if(0===l.length)return i&&(i.isErr=!1),a;let c=l.split(",").map(u=>u.trim());if(!/^[C0-9,]+$/g.test(l)||l.includes(",,")||l.includes("CC")||c.length!==c.filter(u=>""!==u&&0!==Number(u)).length)return a.isErr=!0,i&&(i.isErr=!0),a.str=this.commonService.myTranslateInstant("lang_auto_validate_format")??"",a;if(!a.isErr){if(0===c.length)return i&&(i.isErr=!1),a;c.forEach(u=>{a.isErr=!/C([0-9]+)$/.test(u)&&!/([0-9]+)$/.test(u),a.isErr&&(a.str=this.commonService.myTranslateInstant("lang_auto_validate_format")??"")})}if(!a.isErr){const u=[];c.forEach(p=>{const f=Number(p.replace("C",""));u.includes(f)&&(a.isErr=!0,a.str=this.commonService.myTranslateInstant("lang_auto_validate_exits")??""),u.push(f)});let m=!1;this.lstNode.map(p=>p.content.find(f=>"POS"===f.indexName&&f.id!==i?.id)?.value.split(",").filter(f=>"&nbsp;"!==f).map(f=>Number(f.replace("C","")))).forEach(p=>{p&&p.forEach(f=>{u.includes(f)&&(m=!0)})}),m&&(a.isErr=!0,a.str=this.commonService.myTranslateInstant("lang_auto_validate_exits")??"")}return a.isErr||(a.isErr=c.length!==o,a.isErr&&(a.str=(this.commonService.myTranslateInstant("lang_auto_validate_number")??"").replace("${2}",c.length.toString()).replace("${3}",c.length>o?r:s).replace("${1}",o.toString()))),i&&(i.isErr=c.length!==o),a}reBuild(){let o;this.removeAllList();const t=[];var i="";this.lstNode.forEach((a,r)=>{var s="";s+=`<td class="dis-item-tb text-center">${r+1}</td>`,!a.isMergeCate&&a.obj.prNode&&(a.obj.prNode.item=this.commonService.myTranslateInstant(a.obj.prNode.item)??"",o=this.generateIdRequired(10),t.push(o),s+=`<td id="${o}" rowSpan="${a.numMergeCate}" class="dis-item-tb text-center">${a.obj.prNode.item}</td>`),a.obj.item=this.commonService.myTranslateInstant(a.obj.item)??"",o=this.generateIdRequired(10),t.push(o),s+=`<td id="${o}" class="dis-item-tb text-center" colSpan="${a.obj.prNode?1:2}">${a.obj.item}</td>`,s+='<td class="dis-item-tb text-center tb-matrix-editor-trash-node"><i class="fa fa-trash"></i></td>',a.content.forEach(l=>{if(["SOCH_TN","SOCH_TL","SOCH_DS","SOCH_DT","TGP"].includes(l.indexName))s+=`<td data-index="${l.index}" class="dis-item-tb text-center">${l.value}</td>`;else if("POS"===l.indexName){let c=this.countTotalNumQuestRow(a),u=this.getNoteValidatePos(c,l.value,l);s+=`<td id="total_input_number_${l.index}${l.id}" data-total-input-number="${c}" col-name="${this.getNameCol(l.indexName)}" data-name="${l.indexName}" data-index="${l.index}" class="${this.isNoteEditTable(l)?"note-edit-item-tb":""} ${this.getWarMsg(l)} edit-item-tb text-center common-note-item" common-note-trans="${u.str}" ${this.statusDisable?"":'contenteditable="true"'} ${l.mergeId.length>0?'rowSpan="'+(l.mergeId.length+1)+'"':""}>${l.value}</td>`}else if(!l.isMerge)if(a.disLoading){let c=this.commonService.myTranslateInstant("lang_auto_hien_co_trac_nghiem")??"",u=this.commonService.myTranslateInstant("lang_azt_true_false")??"",m=this.commonService.myTranslateInstant("lang_auto_dien_tu")??"",p=this.commonService.myTranslateInstant("lang_auto_tu_luan")??"",f=this.commonService.myTranslateInstant("lang_auto_khong_co_cau_hoi_nao")??"",b=this.commonService.myTranslateInstant("lang_auto_khong_du_cau_hoi")??"",L=b+" "+this.commonService.myTranslateInstant("lang_auto_cau_TL")?.toLowerCase(),N=b+" "+this.commonService.myTranslateInstant("lang_auto_trac_nghiem")?.toLowerCase(),R=b+" "+u.toLowerCase(),j=b+" "+m.toLowerCase();s+=`<td col-name="${this.getNameCol(l.indexName)}" num-tl="${l.totalTL??0}" num-tn="${l.totalTN??0}" num-ds="${l.totalDS}" num-dt="${l.totalDT}" data-name="${l.indexName}" first-trans="${c}" second-trans="${u}" third-trans="${m}" last-trans="${p}" over-question-trans-tl="${L}" over-question-trans-tn="${N}"  over-question-trans-ds="${R}"  over-question-trans-dt="${j}" empty-question-trans="${f}" data-index="${l.index}" class="${this.isNoteEditTable(l)?"note-edit-item-tb":""} ${this.getWarMsg(l)} edit-item-tb text-center ${l.value&&!l.indexName.endsWith("_TGP")&&(l.value.includes(".")||l.value.includes(","))?"border-err":""}" ${this.statusDisable?"":'contenteditable="true"'} ${l.mergeId.length>0?'rowSpan="'+(l.mergeId.length+1)+'"':""}>${l.value}</td>`}else s+=`<td data-name="${l.indexName}" data-index="${l.index}" class="text-center" ${l.mergeId.length>0?'rowSpan="'+(l.mergeId.length+1)+'"':""}><i class="fa fa-spinner fa-spin"></i></td>`}),i+=`<tr data-index="${a.index}">${s}</tr>`}),this.table__element.tBodies[0].innerHTML=i,this.sumAll(),this.startAddEvent(),this.hiddenNoteEmpty(),this.pushChangeEvent(),t.forEach(a=>{const r=document.getElementById(a);r&&this.commonService.convertMathJaxContent(r.innerHTML).then(s=>{r.innerHTML=s})})}countTotalNumQuestRow(o){let t=0;return o.content.filter(i=>["SOCH_TN","SOCH_TL","SOCH_DS"].includes(i.indexName)).forEach(i=>{t+=Number(i.value??"0")}),t}isNodeWarning(o){const t=o.value.includes("TN")||/^\d+$/.test(o.value),i=o.value.includes("TL"),a=o.value.includes("DS"),r=o.value.includes("DT"),s=Ya.selectNumberOfString(o.value)??0;return this.isNoteEditTable(o)&&(0===o.totalTL&&0===o.totalTN||t&&s>o.totalTN||i&&s>o.totalTL||a&&s>o.totalDS||r&&s>o.totalDT||!o.totalTL&&!o.totalTN)}getWarMsg(o){const t=o.value.includes("TN")||/^\d+$/.test(o.value),i=o.value.includes("TL"),a=o.value.includes("DS"),r=o.value.includes("DT"),s=Ya.selectNumberOfString(o.value)??0;if(this.isNoteEditTable(o)){if(0===o.totalTL&&0===o.totalTN&&0===o.totalDS&&0===o.tempTotalDT||!o.totalTL&&!o.totalTN&&!o.totalDS&&!o.totalDT)return"warning-item wn-empty";if(t&&s>o.totalTN)return"warning-item wn-over-tn";if(i&&s>o.totalTL)return"warning-item wn-over-tl";if(a&&s>o.totalDS)return"warning-item wn-over-ds";if(r&&s>o.totalDT)return"warning-item wn-over-dt"}return"hello"}isNoteEditTable(o){return o.indexName.includes("SOCH")&&o.indexName.indexOf("SOCH")>0}getNameCol(o){let t=this.commonService.myTranslateInstant("lang_auto_nhan_biet")??"",i=this.commonService.myTranslateInstant("lang_auto_thong_hieu")??"",a=this.commonService.myTranslateInstant("lang_auto_van_dung")??"",r=this.commonService.myTranslateInstant("lang_auto_van_dung_cao")??"";return 0===o.indexOf("NB")?t:0===o.indexOf("TH")?i:0===o.indexOf("VDC")?a:0===o.indexOf("VD")?r:""}generateIdRequired(o){let t="";for(let r=0;r<o;r++)t+="abcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(36*Math.random()));return Math.floor(Date.now()/1e3)+t}}let wN=(()=>{class n{constructor(t,i){this.gzipHelper=t,this.commonService=i}pushRankToMatrixBeauty(t,i,a){let r=t.ranks.find(s=>s.name===i);r?r.numQuest+=a:t.ranks.push({name:i,numQuest:a})}makeBeautyMatrixObj(t){const i={id:t.id,name:t.name??"",numberQuest:0,ranks:[],knowledge:[]};let a=this.gzipHelper.resultContentSupport(t.content??"");const r=this.commonService.castJsonToObj(a);return r&&r.forEach(s=>{const l=s.content.find(b=>"NB_SOCH"===b.indexName);l&&this.pushRankToMatrixBeauty(i,this.commonService.myTranslateInstant("azt_lang_tag_NB")??"NB",Ya.selectNumberOfString(l.value)??0);const c=s.content.find(b=>"TH_SOCH"===b.indexName);c&&this.pushRankToMatrixBeauty(i,this.commonService.myTranslateInstant("azt_lang_tag_TH")??"TH",Ya.selectNumberOfString(c.value)??0);const u=s.content.find(b=>"VD_SOCH"===b.indexName);u&&this.pushRankToMatrixBeauty(i,this.commonService.myTranslateInstant("azt_lang_tag_VD")??"VD",Ya.selectNumberOfString(u.value)??0);const m=s.content.find(b=>"VDC_SOCH"===b.indexName);m&&this.pushRankToMatrixBeauty(i,this.commonService.myTranslateInstant("azt_lang_tag_VDC")??"VDC",Ya.selectNumberOfString(m.value)??0);const p=s.content.find(b=>"SOCH_TN"===b.indexName),f=s.content.find(b=>"SOCH_TL"===b.indexName);p&&f&&(isNaN(Number(p.value))||(i.numberQuest+=Number(p.value)),isNaN(Number(f.value))||(i.numberQuest+=Number(f.value))),s.obj.item.endsWith(")")&&(s.obj.item=s.obj.item.substring(0,s.obj.item.lastIndexOf("("))),i.knowledge.push(s.obj.item)}),i}getBeautyMatrixObjs(t){let i=[];return t.forEach(a=>{i.push(this.makeBeautyMatrixObj(a))}),i}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(Gx.n),e.LFG(Yn.z))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var yN=I(7516),CN=I(43242);function TN(n,o){if(1&n&&(e.ynx(0),e._uU(1),e.BQk()),2&n){const t=o.$implicit,i=o.index;e.xp6(1),e.hij(" ",t.numQuest>0?(0==i?"":", ")+t.name+"("+t.numQuest+")":""," ")}}function kN(n,o){if(1&n&&(e.TgZ(0,"li",13),e._UZ(1,"azt-dynamic-hook",14),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("content",t)}}function SN(n,o){if(1&n&&(e.ynx(0),e.YNc(1,kN,2,1,"li",12),e.BQk()),2&n){const t=o.index;e.xp6(1),e.Q6J("ngIf",t<=2)}}function EN(n,o){1&n&&(e.TgZ(0,"div",15),e._uU(1," ... "),e.qZA())}function ON(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",3),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.clickToMatrix(r.id))}),e.TgZ(2,"div",4)(3,"h2",5,6),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()(),e.TgZ(7,"div",7)(8,"h2",8)(9,"b"),e._uU(10),e.ALo(11,"mytranslate"),e.qZA(),e._uU(12),e.qZA()(),e.TgZ(13,"div",7)(14,"h2",8)(15,"b"),e._uU(16),e.ALo(17,"mytranslate"),e.qZA(),e.YNc(18,TN,2,1,"ng-container",9),e.qZA()(),e.TgZ(19,"div",7)(20,"h2",8)(21,"b"),e._uU(22),e.ALo(23,"mytranslate"),e.qZA(),e.TgZ(24,"ul",10),e.YNc(25,SN,2,1,"ng-container",9),e.qZA()()(),e.YNc(26,EN,2,0,"div",11),e.qZA()()}if(2&n){const t=o.$implicit,i=e.MAs(4);e.xp6(3),e.s9C("matTooltip",t.name),e.Q6J("isDisabledTooltip",!1)("matTooltipDisabled",i.isDisabled),e.xp6(2),e.hij(" ",e.lcZ(6,11,t.name)," "),e.xp6(5),e.hij("",e.lcZ(11,13,"lang_matrix_list_total_question"),":"),e.xp6(2),e.hij(" ",t.numberQuest," "),e.xp6(4),e.hij("",e.lcZ(17,15,"lang_matrix_list_level_list"),":"),e.xp6(2),e.Q6J("ngForOf",t.ranks),e.xp6(4),e.hij("",e.lcZ(23,17,"lang_auto_don_vi_kien_thuc"),":"),e.xp6(3),e.Q6J("ngForOf",t.knowledge),e.xp6(1),e.Q6J("ngIf",t.knowledge.length>3)}}let IN=(()=>{class n extends xe.Q{clickToMatrix(t){t&&this.chooseMatrix.emit(t)}ngOnInit(){super.ngOnInit()}constructor(){super(),this.matrixList=[],this.chooseMatrix=new e.vpe}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["exam-matrix-info-box"]],inputs:{matrixList:"matrixList"},outputs:{chooseMatrix:"chooseMatrix"},features:[e.qOj],decls:2,vars:1,consts:[[1,"grid","grid-cols-12","gap-4"],["class","col-span-12 md:col-span-6 lg:col-span-4 box",4,"ngFor","ngForOf"],[1,"col-span-12","md:col-span-6","lg:col-span-4","box"],["azt-track-service","exam-matrix-info-box-61G2BIhvtR",1,"p-3","exam-matrix-info-box",3,"click"],[1,"text-left","w-full",2,"align-self","center"],[1,"intro-x","font-bold","text-lg","truncate",2,"vertical-align","middle",3,"matTooltip","isDisabledTooltip","matTooltipDisabled"],["c","isDisabled"],[1,"text-left","w-full","mt-1",2,"align-self","center"],[1,"intro-x","text-md",2,"vertical-align","middle"],[4,"ngFor","ngForOf"],[1,"px-1",2,"overflow","hidden"],["class","text-left w-full pb-1","style","align-self: center;",4,"ngIf"],["style","list-style: circle; list-style-position: inside;",4,"ngIf"],[2,"list-style","circle","list-style-position","inside"],[3,"content"],[1,"text-left","w-full","pb-1",2,"align-self","center"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.YNc(1,ON,27,19,"div",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngForOf",i.matrixList))},dependencies:[F.sg,F.O5,Ai.gM,zs.Q,bm.O,ye.JV],encapsulation:2}),n})();function MN(n,o){if(1&n&&e._UZ(0,"azt-loading-effect",3),2&n){const t=e.oxw();e.Q6J("currentStatusObj",t.statusObj)}}function LN(n,o){if(1&n&&(e.TgZ(0,"button",20),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.desc)," ")}}function BN(n,o){if(1&n&&(e.TgZ(0,"button",21),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.desc)," ")}}function PN(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",17),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw(3);return e.KtG(s.addSubject(r))}),e.YNc(1,LN,3,3,"button",18),e.YNc(2,BN,3,3,"button",19),e.qZA()}if(2&n){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",t.isChoose),e.xp6(1),e.Q6J("ngIf",!t.isChoose)}}function QN(n,o){1&n&&(e.TgZ(0,"mat-label"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_auto_chon_mon")))}function FN(n,o){if(1&n&&(e.TgZ(0,"mat-option",31),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.Q6J("value",t.id),e.xp6(1),e.Oqu(t.name)}}function NN(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",22)(1,"div",23)(2,"p",24),e._uU(3),e.qZA()(),e.TgZ(4,"div",25)(5,"div",26)(6,"mat-form-field",27),e.YNc(7,QN,3,3,"mat-label",28),e.TgZ(8,"mat-select",29),e.NdJ("ngModelChange",function(a){const s=e.CHM(t).$implicit;return e.KtG(s.subjectsIds=a)})("ngModelChange",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.backUpObjData())}),e.YNc(9,FN,2,2,"mat-option",30),e.qZA()()()()()}if(2&n){const t=o.$implicit,i=e.oxw(3);let a;e.xp6(3),e.Oqu(null==t.class?null:t.class.desc),e.xp6(4),e.Q6J("ngIf",!t.subjectsIds||!t.subjectsIds.length),e.xp6(1),e.Q6J("ngModel",t.subjectsIds),e.xp6(1),e.Q6J("ngForOf",i.multiChooseLevelSubjectService.valueSubjectSurvey[null!==(a=null==t.class?null:t.class.value)&&void 0!==a?a:0])}}function ZN(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",6)(1,"div",7)(2,"div",8)(3,"div",9)(4,"h3",10),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()(),e.TgZ(7,"div",11)(8,"button",12),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.nextStep())}),e._uU(9),e.ALo(10,"mytranslate"),e.qZA()()()(),e.TgZ(11,"h3",13),e._uU(12),e.ALo(13,"mytranslate"),e.qZA(),e.TgZ(14,"div",14),e.YNc(15,PN,3,2,"div",15),e.qZA(),e.TgZ(16,"h3",13),e._uU(17),e.ALo(18,"mytranslate"),e.qZA(),e.TgZ(19,"div",8),e.YNc(20,NN,10,4,"div",16),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(5),e.hij(" ",e.lcZ(6,7,"lang_matrix_list_teacher_choose_subject_and_grade")," "),e.xp6(3),e.Q6J("disabled",!t.checkValidChooseGradeAndSubject(t.dataObjs)),e.xp6(1),e.hij(" ",e.lcZ(10,9,"lang_auto_tiep_tuc")," "),e.xp6(3),e.hij(" ",e.lcZ(13,11,"lang_auto_khoi_day")," "),e.xp6(3),e.Q6J("ngForOf",t.multiChooseLevelSubjectService.valueSurvey),e.xp6(2),e.hij(" ",e.lcZ(18,13,"lang_auto_mon_day")," "),e.xp6(3),e.Q6J("ngForOf",t.dataObjs)}}function DN(n,o){1&n&&(e.O4$(),e.kcU(),e.ynx(0),e.TgZ(1,"div",41)(2,"h3",42),e._uU(3),e.ALo(4,"mytranslate"),e.qZA()(),e.BQk()),2&n&&(e.xp6(3),e.hij(" ",e.lcZ(4,1,"lang_matrix_list_not_have_suggestion")," "))}function UN(n,o){if(1&n){const t=e.EpF();e.O4$(),e.kcU(),e.ynx(0),e.TgZ(1,"h3",13),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.TgZ(4,"exam-matrix-info-box",43),e.NdJ("chooseMatrix",function(a){e.CHM(t);const r=e.oxw(3);return e.KtG(r.gotoEditMatrix(a))}),e.qZA(),e.BQk()}if(2&n){const t=e.oxw(3);e.xp6(2),e.hij(" ",e.lcZ(3,2,"lang_matrix_list_suggestion")," "),e.xp6(2),e.Q6J("matrixList",t.matrixSuggestList)}}function jN(n,o){if(1&n){const t=e.EpF();e.O4$(),e.kcU(),e.ynx(0),e.TgZ(1,"h3",13),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.TgZ(4,"exam-matrix-info-box",43),e.NdJ("chooseMatrix",function(a){e.CHM(t);const r=e.oxw(3);return e.KtG(r.gotoEditMatrix(a))}),e.qZA(),e.BQk()}if(2&n){const t=e.oxw(3);e.xp6(2),e.hij(" ",e.lcZ(3,2,"lang_matrix_list_owner_matrix")," "),e.xp6(2),e.Q6J("matrixList",t.matrixOwnerList)}}function qN(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",6)(1,"div",7)(2,"div",8)(3,"div",32)(4,"h3",33),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()(),e.TgZ(7,"div",11)(8,"button",34),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.createNewMatrix())}),e.O4$(),e.TgZ(9,"svg",35),e._UZ(10,"line",36)(11,"line",37),e.qZA(),e._uU(12),e.ALo(13,"mytranslate"),e.qZA()()()(),e.YNc(14,DN,5,3,"ng-container",28),e.YNc(15,UN,5,4,"ng-container",28),e.YNc(16,jN,5,4,"ng-container",28),e.kcU(),e.TgZ(17,"div",38)(18,"div",39)(19,"azt-paging",40),e.NdJ("goToPaginationPage",function(a){e.CHM(t);const r=e.oxw(2);return e.KtG(r.goToPage(a))}),e.qZA()()()()}if(2&n){const t=e.oxw(2);e.xp6(5),e.hij(" ",e.lcZ(6,6,"lang_matrix_list_choose_below_to_create_exam")," "),e.xp6(7),e.hij(" ",e.lcZ(13,8,"lang_matrix_list_create_new_matrix")," "),e.xp6(2),e.Q6J("ngIf",!t.matrixSuggestList.length&&!t.matrixOwnerList.length),e.xp6(1),e.Q6J("ngIf",t.matrixSuggestList.length>0),e.xp6(1),e.Q6J("ngIf",t.matrixOwnerList.length>0),e.xp6(3),e.Q6J("pageObj",t.pageObj)}}function RN(n,o){if(1&n&&(e.TgZ(0,"div",4),e.YNc(1,ZN,21,15,"div",5),e.YNc(2,qN,20,10,"div",5),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",1==t.step),e.xp6(1),e.Q6J("ngIf",2==t.step)}}let zN=(()=>{class n extends xe.Q{backUpObjData(){this.oldDataObjs=this.dataObjs}addSubject(t){t.isChoose=!t.isChoose,this.commonService.isExistInArray(this.classroomGrade,t)?this.classroomGrade=this.classroomGrade.filter(r=>r.value!=t.value):this.classroomGrade.push(t),this.dataObjs=[];let i=this.oldDataObjs.length,a=this.classroomGrade.length;for(let r=0;r<a;r++)if(this.dataObjs[r]={class:this.classroomGrade[r],subjectsIds:[]},i>0)for(let l=0;l<i;l++)this.dataObjs[r]&&this.oldDataObjs[l]&&this.dataObjs[r].class?.value==this.oldDataObjs[l].class?.value&&(this.dataObjs[r]=this.oldDataObjs[l])}checkValidChooseGradeAndSubject(t){let i=!0;return t.length?t.forEach(a=>{(!a.subjectsIds||!a.subjectsIds.length)&&(i=!1)}):i=!1,i}nextStep(){let t=[];for(let i=0;i<this.dataObjs.length;i++)if(this.dataObjs[i].subjectsIds&&Array.isArray(this.dataObjs[i].subjectsIds)){let a=this.dataObjs[i].subjectsIds??[];if(a.length)for(let r=0;r<a.length;r++)t.push({classId:this.dataObjs[i].class?.value??0,subjectId:a[r]})}t.length>0?(this.initStatusObj(),this.surveyConfigService.apiSurveyConfigSaveSurvey3Post({objs:t}).subscribe(i=>{i&&1==i.success?(this.step=2,this.getData()):this.errorStatusObj("lang_auto_khong_load_duoc_du_lieu",!0)})):this.errorStatusObj("lang_matrix_list_choose_grade_and_subject_fail",!0)}chooseAgain(){this.step=1,this.getGradeAndSubjectObj()}goToPage(t){this.commonService.myNavigationWithQueryString("/admin/testbank/matrix-list/"+this.curCate+"/"+t,"?backto="+encodeURIComponent(this.backToLink))}goToHome(){this.commonService.myNavigation("/admin/dashboard")}createNewMatrix(){this.commonService.myNavigationWithQueryString("/admin/testbank/mix-bank-template/"+this.curCate+"/azota/0","?backto="+encodeURIComponent("/admin/testbank/matrix-list/"+this.curCate+"/"+this.pageObj.page))}gotoEditMatrix(t){this.commonService.myNavigationWithQueryString("/admin/testbank/mix-bank-template/"+this.curCate+"/azota/"+t,"?backto="+encodeURIComponent("/admin/testbank/matrix-list/"+this.curCate+"/"+this.pageObj.page))}getSuggestionMatrix(){this.waitDestroy(this.examBank.apiExamBanksGet("knowledge","global",1,3).subscribe(t=>{t&&1==t.success?(this.matrixSuggestList=this.editorSAztCommonService.getBeautyMatrixObjs(t.data?.banks??[]),this.successStatusObj()):this.errorStatusObj(t.message??"",!0)}))}getGradeAndSubjectObj(){this.initStatusObj(),this.waitDestroy(this.commonListService.apiCommonListSubjectAndLevelsGet(this.commonService.getBusinessDomainUrl()).subscribe(t=>{1==t.success?(this.multiChooseLevelSubjectService.processDataSchoolAndLevel(t.data?.schoolLevelSubjectObjs??[]),this.successStatusObj()):this.errorStatusObj(t.message??"")}))}getData(){this.waitDestroy(this.examBank.apiExamBanksGet("knowledge","own",this.pageObj.page,this.pageObj.pageSize).subscribe(t=>{if(t&&1==t.success){this.matrixOwnerList=this.editorSAztCommonService.getBeautyMatrixObjs(t.data?.banks??[]);let i=t.data?.total??1;this.totalOwnerMatrix=i,this.pageObj.setTotalPages(i),this.getSuggestionMatrix()}else this.errorStatusObj(t.message??"",!0)}))}checkSurveySubmitted(){this.initStatusObj(),this.surveyConfigService.apiSurveyConfigGetSurvey3Get().subscribe(t=>{t&&1==t.success?t.data?.objs?.length&&t.data?.objs?.length>0?(this.step=2,this.getData()):this.getGradeAndSubjectObj():this.errorStatusObj("lang_auto_khong_load_duoc_du_lieu",!0)})}ngOnInit(){(0,ne.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{let t=this.commonService.getMyQueryParam("backto");this.backToLink=t??"/admin/testbank/document-management/0/0/1",this.pageObj.setPageNumber(Number(this.commonService.getMyParam(this.activeRoute,"page"))),this.curCate=Number(this.commonService.getMyParam(this.activeRoute,"cate")),this.checkSurveySubmitted()}),this.commonService.translateMetaData({title:"lang_matrix_list_title",description:"lang_matrix_list_description",image:""}),super.ngOnInit()}constructor(t,i,a,r,s,l,c){super(),this.activeRoute=t,this.examBank=i,this.editorSAztCommonService=a,this.documentConfigService=r,this.surveyConfigService=s,this.multiChooseLevelSubjectService=l,this.commonListService=c,this.matrixOwnerList=[],this.matrixSuggestList=[],this.backToLink="",this.curCate=0,this.totalOwnerMatrix=0,this.step=1,this.dataObjs=[],this.oldDataObjs=[],this.classroomGrade=[],this.pageObj=new jx.m(12)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(E.gz),e.Y36(un.SP),e.Y36(wN),e.Y36(un.Cq),e.Y36(Ss.XG),e.Y36(yN.X),e.Y36(CN.o))},n.\u0275cmp=e.Xpm({type:n,selectors:[["test-config-online"]],features:[e.qOj],decls:4,vars:3,consts:[[3,"headerBackToLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],["doneLoading",""],[3,"currentStatusObj"],[1,"container-fluid","py-5"],["class","block-cols-12-full m-0",4,"ngIf"],[1,"block-cols-12-full","m-0"],[1,"action-heading","mb-4"],[1,"grid","grid-cols-12","gap-3"],[1,"col-span-12","md:col-span-6","text-left",2,"align-self","center"],[1,"text-lg","font-medium",2,"vertical-align","middle"],[1,"col-span-12","md:col-span-6","text-right"],["azt-track-service","azota-matrix-list-jSDqGYuTf",1,"btn","btn-info","text-white","shadow-md","mr-2",3,"disabled","click"],[1,"text-lg","font-bold","mt-3","mb-3"],[1,"grid","grid-cols-10","gap-3",2,"max-width","620px"],["azt-track-service","azota-matrix-list-idyray5dXY","class","col-span-10 md:col-span-2 text-left",3,"click",4,"ngFor","ngForOf"],["class","col-span-12 md:col-span-4",4,"ngFor","ngForOf"],["azt-track-service","azota-matrix-list-idyray5dXY",1,"col-span-10","md:col-span-2","text-left",3,"click"],["class","btn btn-secondary shadow-md mr-2 w-full selected-border-box",4,"ngIf"],["class","btn btn-secondary shadow-md mr-2 w-full",4,"ngIf"],[1,"btn","btn-secondary","shadow-md","mr-2","w-full","selected-border-box"],[1,"btn","btn-secondary","shadow-md","mr-2","w-full"],[1,"col-span-12","md:col-span-4"],[1,"text-left"],[1,"text-md","font-medium"],[1,"grid","grid-cols-12","mt-2"],[1,"col-span-12"],["appearance","outline"],[4,"ngIf"],["multiple","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"col-span-12","md:col-span-6","text-left"],[1,"text-lg","font-bold",2,"vertical-align","middle"],["azt-track-service","azota-matrix-list-h4LcenZp7K",1,"btn","btn-info","text-white","shadow-md","mr-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","mr-2"],["x1","12","y1","5","x2","12","y2","19"],["x1","5","y1","12","x2","19","y2","12"],[1,"col-span-12","flex","flex-wrap","sm:flex-row","sm:flex-nowrap","items-center","mt-5"],[1,"w-full","sm:w-auto","sm:mr-auto"],[3,"pageObj","goToPaginationPage"],[1,"text-center","mx-auto","w-full","py-5"],[1,"text-md","mx-auto","alert","alert-danger"],[3,"matrixList","chooseMatrix"]],template:function(t,i){if(1&t&&(e.TgZ(0,"teacher-layout",0),e.YNc(1,MN,1,1,"azt-loading-effect",1),e.YNc(2,RN,3,2,"ng-template",null,2,e.W1O),e.qZA()),2&t){const a=e.MAs(3);e.Q6J("headerBackToLink",i.backToLink),e.xp6(1),e.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a)}},dependencies:[F.sg,F.O5,js.ey,ms.KE,ms.hX,Zg.gD,h.JJ,h.On,vi.l,qx.L,wo._,IN,ye.JV],encapsulation:2}),n})();var HN=I(10217),JN=I(77757);function KN(n,o){if(1&n&&e._UZ(0,"azt-loading-effect",3),2&n){const t=e.oxw();e.Q6J("currentStatusObj",t.statusObj)}}function GN(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",4)(1,"div",5)(2,"button",6),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.startExport())}),e.TgZ(3,"span",7),e._UZ(4,"lucide-icon",8),e.qZA(),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()()()}2&n&&(e.xp6(5),e.hij(" ",e.lcZ(6,1,"lang_testbank_export_exam_result_button")," "))}let YN=(()=>{class n extends xe.Q{startExport(){this.initStatusObj(),this.waitDestroy(this.examResultReportService.apiExamResultReportExportExamResultToExcelGet().subscribe(t=>{if(t.data?.value){let a=this.commonService.createFileNameExportFile(["export-exam-result"])+".xlsx";var i=this.sAztMyPdfService.b64toFile(t.data.value,a,"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet");HN.saveAs(i,a),this.successStatusObj("lang_testbank_export_exam_result_success",!0)}else this.errorStatusObj("lang_testbank_export_exam_result_error",!0)}))}ngOnInit(){this.commonService.translateMetaData({title:"lang_cms_export_exam_result_title",description:"lang_cms_export_exam_result_description",image:""}),super.ngOnInit()}constructor(t,i){super(),this.examResultReportService=t,this.sAztMyPdfService=i,this.backToLink="/admin/dashboard"}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(un.eO),e.Y36(JN.z))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-export-exam-result"]],features:[e._Bn([F.uU]),e.qOj],decls:4,vars:3,consts:[[3,"headerBackToLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],["doneLoading",""],[3,"currentStatusObj"],[1,"action-document","mx-auto","mt-8"],[1,"text-center"],[1,"btn","btn-success","text-white","shadow-md",3,"click"],[1,"w-4","h-4","mr-2","inline-block"],["name","download"]],template:function(t,i){if(1&t&&(e.TgZ(0,"teacher-layout",0),e.YNc(1,KN,1,1,"azt-loading-effect",1),e.YNc(2,GN,7,3,"ng-template",null,2,e.W1O),e.qZA()),2&t){const a=e.MAs(3);e.Q6J("headerBackToLink",i.backToLink),e.xp6(1),e.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a)}},dependencies:[F.O5,vi.l,wo._,_.Nh5,ye.JV],encapsulation:2}),n})();var Tw=I(91833),kw=I(74456),$N=I(2576);const s_={top:60,left:60,right:60,bottom:60};let WN=(()=>{class n{get loadPercent(){return Math.floor(this.countDraw/this.totalDraw*100)}getSourceCanvas(t){return(0,Yi.Z)(function*(){const i=document.getElementById(t);return yield kw(i,{scale:2})})()}resetPosition(t){t&&(this.currentPos={left:60,top:60,right:60,bottom:60})}drawHomeworkNoteBoxOfTeacher(t){var i=this;return(0,Yi.Z)(function*(){let a=document.querySelector(".box-point.display .text-mark");if(t){t.font="25px font_chu_dep",t.fillStyle="#000",a&&t.fillText("\u0110i\u1ec3m",90,i.currentPos.top+20),t.fillText("L\u1eddi ph\xea c\u1ee7a gi\xe1o vi\xean",420,i.currentPos.top+20),i.currentPos.top+=30;let r=document.querySelector(".box-msg .note p");if(r){t.lineWidth=2,t.fillStyle="#000",t.fillRect(i.currentPos.left,i.currentPos.top,t.canvas.width-i.currentPos.left-i.currentPos.right,1);const s=i.currentPos.top;let l=window.getComputedStyle(r,null).getPropertyValue("font"),c=window.getComputedStyle(r,null).getPropertyValue("color"),u=parseInt(l.split(" ")[0].split("p")[0],10);t.font=l;let p=i.exportPdfUtilsService.essayText2LinesArr(r.innerHTML,t,t.canvas.width-60-30-(a?200:0),16,l);i.currentPos.top+=35;const f=Math.round(1.5*u),b=i.currentPos.left+(a?200:0)+15;let L=0,N=200;for(let te=0;te<p.length;te++)for(let Se=0;Se<p[te].length;Se++){const Ze=p[te][Se];t.font=l,t.fillStyle=c,t.fillText(Ze,b,i.currentPos.top),i.currentPos.top+=f,L+=f}let R=document.querySelectorAll(".box-emoji> img"),j=i.currentPos.left+(a?100:0)+15,G=i.currentPos.top,ae=78,W=78,le=15;R.forEach(te=>{let Se=new Image;Se.src=te.getAttribute("src")??"",Se.onload=()=>{j=j+ae+le,t.drawImage(Se,j,G,ae,W)}});let ce=30+W;if(L>N-ce&&(N=L+ce),t.lineWidth=2,t.fillStyle="#000",t.fillRect(i.currentPos.left,s,1,N),a&&t.fillRect(i.currentPos.left+200,s,1,N),t.fillRect(t.canvas.width-i.currentPos.right,s,1,N),t.fillRect(i.currentPos.left,s+N,t.canvas.width-i.currentPos.right-i.currentPos.left,1),a){let te=a.getBoundingClientRect().width,Se=a.getBoundingClientRect().height,Ze=window.getComputedStyle(a,null).getPropertyValue("font"),se=window.getComputedStyle(a,null).getPropertyValue("color");t.font=Ze,t.fillStyle=se,t.fillText(a.textContent?a.textContent:"",i.currentPos.left+100-te/2,s+N/2+Se/4)}i.currentPos.top=s+N+20}else{if(t.lineWidth=2,t.rect(i.currentPos.left,i.currentPos.top,t.canvas.width-i.currentPos.left-i.currentPos.right,200),t.stroke(),a&&t.fillRect(i.currentPos.left+200,i.currentPos.top,1,200),a){let s=a.getBoundingClientRect().width,l=a.getBoundingClientRect().height,c=window.getComputedStyle(a,null).getPropertyValue("font"),u=window.getComputedStyle(a,null).getPropertyValue("color");t.font=c,t.fillStyle=u,t.fillText(a.textContent?a.textContent:"",i.currentPos.left+100-s/2,i.currentPos.top+150-l/2)}i.currentPos.top+=220}}})()}drawExamTitle(t){if(t){let b=document.querySelector("#mainTitle span"),L=b?window.getComputedStyle(b,null).getPropertyValue("font"):"",N=b?.getBoundingClientRect().width,R=b?.getBoundingClientRect().height;var i=b?.querySelector("img"),a=i?.getBoundingClientRect().width,r=i?.getBoundingClientRect().height,s=0;if(b&&b.textContent&&N&&R&&!(i&&a&&r)){var l=(t.canvas.width-N)/2,c=this.currentPos.top+15;t.font=L,t.fillStyle="#000",t.fillText(b.textContent,l,c),s=R+20}else b&&b.textContent&&N&&R&&i&&a&&r&&(l=(t.canvas.width-N)/2,c=this.currentPos.top+20,t.font=L,t.fillStyle="#000",t.fillText(b.textContent,l,c),s=R+40,t.drawImage(i,0,0,a,r,l+(N-a)+5,this.currentPos.top-10,a,r));s>0&&(this.currentPos.top+=s,this.countDraw++)}}drawColLeftRightInHeaderOfExam(t){let i=document.getElementById("colLeftInfo"),a=document.getElementById("colRightInfo"),r=i?i.querySelectorAll("h3"):void 0,s=a?a.querySelectorAll("h3"):void 0,l={top:0,left:0,right:0,bottom:0};if(t){if(t.font="16px Arial",r)for(let c=0;c<r.length;c++){0==c&&(l=du.cloneDeep(this.currentPos));const u=r[c];u.textContent&&(t.fillText(u.textContent??"",this.currentPos.left,this.currentPos.top),this.currentPos.top+=u.getBoundingClientRect().height+5)}if(s)for(let c=0;c<s.length;c++){const u=s[c];u.textContent&&(t.fillText(u.textContent,t.canvas.width-this.currentPos.right-u.getBoundingClientRect().width,l.top),l.top+=u.getBoundingClientRect().height+5)}}}drawBlockItemToPageForExam(t,i){var a=this;return(0,Yi.Z)(function*(){if(t){let s=document.querySelectorAll(`.${a.exportPdfUtilsService.blockCropItemClass}`);if(s.length>0){let l=[];for(let c=0;c<s.length;c++)l.push(c);var r=yield a.getSourceCanvas("multipleChoiceWrap");for(const c of l){const u=s[c];let m=u.classList.contains(a.exportPdfUtilsService.blockEssayCropItemClass),p=u.classList.contains("__TXT_ESSAY_PARA"),f=2*u.offsetLeft,b=2*u.offsetTop,L=2*u.getBoundingClientRect().width,N=2*u.getBoundingClientRect().height;const R=t.canvas.width-a.currentPos.left-a.currentPos.right,j=R*N/L;if(j<=t.canvas.height-a.currentPos.bottom-a.currentPos.top&&!m)a.drawSingleBlockItemToCanvas(t,r,R,j,{left:f,top:b,width:L,height:N},p);else if(a.exportPdfUtilsService.addContentToPdf(a.pdfDoc,t.canvas.toDataURL("image/jpeg",1)),a.pdfDoc.addPage(),a.exportPdfUtilsService.eraseCanvas(t),a.resetPosition(i),"h"==a.exportPdfConvertDataService.findScaleDirection(L,N)){const G=t.canvas.height-s_.top-s_.bottom,ae=G*L/N;a.drawSingleBlockItemToCanvas(t,r,R,j,{left:f,top:b,width:L,height:N},p,(t.canvas.width-ae)/2,s_.top,ae,G)}else a.drawSingleBlockItemToCanvas(t,r,R,j,{left:f,top:b,width:L,height:N},p)}a.exportPdfUtilsService.addContentToPdf(a.pdfDoc,t.canvas.toDataURL("image/jpeg",1))}else a.exportPdfUtilsService.addContentToPdf(a.pdfDoc,t.canvas.toDataURL("image/jpeg",1))}})()}convertEssayBoxes2Canvas(t,i,a,r){var s=this;return(0,Yi.Z)(function*(){let l=[];for(let c=0;c<t.length;c++)l.push(c);for(const c of l){const u=yield kw(t[c]);0==c&&i?(r&&(i.canvas.width-50-50)*u.height/u.width>i.canvas.height-50-s.currentPos.top&&(s.exportPdfUtilsService.addContentToPdf(s.pdfDoc,i.canvas.toDataURL("image/jpeg",1)),s.exportPdfUtilsService.eraseCanvas(i),s.resetPosition(a),s.pdfDoc.addPage()),s.addEssayImage(i,t,u,c)):(s.exportPdfUtilsService.eraseCanvas(i),s.resetPosition(a),s.addEssayImage(i,t,u,c))}})()}drawEssayIframeContent(t,i,a){var r=this;return(0,Yi.Z)(function*(){let s=document.querySelectorAll(".essayPdfImage");if(s.length>0&&t){a||(r.exportPdfUtilsService.eraseCanvas(t),r.resetPosition(i),r.pdfDoc.addPage());let l=document.querySelector("#essayPdfTitle span");t&&l&&l.textContent&&(t.font="18px Georgia",t.fillStyle="#333",t.fillText(l.textContent,(t.canvas.width-l.getBoundingClientRect().width)/2,r.currentPos.top+20),r.currentPos.top+=l.getBoundingClientRect().height+20),yield r.convertEssayBoxes2Canvas(s,t,i,a)}})()}addEssayImage(t,i,a,r){if(t){if("w"==this.exportPdfConvertDataService.findScaleDirection(a.width,a.height))t.drawImage(a,0,0,a.width,a.height,50,this.currentPos.top+50,t.canvas.width-100,(t.canvas.width-100)*a.height/a.width);else{let s=t.canvas.height-this.currentPos.top-this.currentPos.bottom,l=s*a.width/a.height;t.drawImage(a,0,0,a.width,a.height,(t.canvas.width-l)/2,this.currentPos.top,l,s)}console.log(`[_Essay_image_] V\u1ebd \u1ea3nh t\u1ef1 lu\u1eadn s\u1ed1 ${r+1}`),this.exportPdfUtilsService.addContentToPdf(this.pdfDoc,t.canvas.toDataURL("image/jpeg",1)),this.countDraw++,r!=i.length-1&&this.pdfDoc.addPage()}}drawSingleBlockItemToCanvas(t,i,a,r,s,l,c,u,m,p){l&&this.currentPos.top!=s_.top&&(this.currentPos.top-=60),t.drawImage(i,s.left,s.top,s.width,s.height,c||this.currentPos.left,u||this.currentPos.top,m||a,p||r),this.currentPos.top+=r+80,this.countDraw++}examToPdf(t,i){var a=this;return(0,Yi.Z)(function*(){a.countDraw=0,a.totalDraw=document.querySelectorAll(`.${a.exportPdfUtilsService.blockCropItemClass}`).length,a.pdfDoc=new In;let r=document.createElement("canvas"),s=document.getElementById("multipleChoiceWrap");if(s){let u=s.getBoundingClientRect().width;r.width=2*u,r.height=297*u/210*2}let l=r.getContext("2d");return a.exportPdfUtilsService.eraseCanvas(l),s&&a.resetPosition(s),s&&(yield a.drawBlockItemToPageForExam(l,s)),a.countDraw=a.totalDraw,yield a.exportPdfUtilsService.asyncTimeout(1e3),"class"==t?a.pdfDoc.output("blob"):(a.pdfDoc.save(i||"test_result.pdf"),!0)})()}homeworkToPdf(){var t=this;return(0,Yi.Z)(function*(){t.pdfDoc=new In;let i=document.createElement("canvas"),a=document.getElementById("multipleChoiceWrap");if(a){let l=a.getBoundingClientRect().width;i.width=l,i.height=297*l/210}let r=i.getContext("2d");return t.exportPdfUtilsService.eraseCanvas(r),a&&t.resetPosition(a),t.drawExamTitle(r),t.drawColLeftRightInHeaderOfExam(r),yield t.drawHomeworkNoteBoxOfTeacher(r),a&&(yield t.drawEssayIframeContent(r,a,!0)),t.pdfDoc.output("blob")})()}constructor(t,i,a,r){this.exportPdfConvertDataService=t,this.exportPdfUtilsService=i,this.answerTypeService=a,this.timeService=r,this.totalDraw=1,this.countDraw=0,this.currentPos=s_,this.pdfDoc=new In}}return n.\u0275fac=function(t){return new(t||n)(e.LFG($N.R),e.LFG(Tw.a),e.LFG(fr.i),e.LFG(Mo.D))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var i2=I(80034);function XN(n,o){if(1&n&&e._UZ(0,"azt-loading-effect",2),2&n){const t=e.oxw();e.Q6J("currentStatusObj",t.statusObj)}}function eZ(n,o){1&n&&(e.TgZ(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6)(4,"div",7)(5,"h1",8),e._uU(6),e.ALo(7,"mytranslate"),e.qZA(),e.TgZ(8,"div",9),e.Hsn(9),e.qZA(),e.Hsn(10,1),e.Hsn(11,2),e.Hsn(12,3),e.qZA()()()()()),2&n&&(e.xp6(6),e.Oqu(e.lcZ(7,1,"lang_azt_export_exam_file")))}const tZ=[[["","actionButton",""]],[["","actionButton",""]],[["","statusInfo",""]],[["","templateExport",""]]],nZ=["[actionButton]","[actionButton]","[statusInfo]","[templateExport]"];let iZ=(()=>{class n extends xe.Q{constructor(){super(...arguments),this.isLoading=!1,this.exportType=""}}return n.\u0275fac=function(){let o;return function(i){return(o||(o=e.n5z(n)))(i||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["export-layout"]],inputs:{isLoading:"isLoading",exportType:"exportType"},features:[e.qOj],ngContentSelectors:nZ,decls:3,vars:2,consts:[[3,"currentStatusObj",4,"ngIf","ngIfElse"],["doneLoading",""],[3,"currentStatusObj"],["id","test_review_container",1,"container-fluid","mt-2","pt-2"],["id","tabRowExam",1,"row",2,"margin-bottom","10px"],["id","test_review_area",1,"col"],["id","col_examContent_wrap",2,"width","1100px","margin","auto"],["id","mbTestContent"],[1,"text-center","text-lg","font-medium"],[1,"buttons-area","mb-3","mt-3","text-center"]],template:function(t,i){if(1&t&&(e.F$t(tZ),e.YNc(0,XN,1,1,"azt-loading-effect",0),e.YNc(1,eZ,13,3,"ng-template",null,1,e.W1O)),2&t){const a=e.MAs(2);e.Q6J("ngIf",i.isLoading)("ngIfElse",a)}},dependencies:[F.O5,vi.l,ye.JV],encapsulation:2}),n})();function oZ(n,o){1&n&&(e.TgZ(0,"div",8),e._UZ(1,"azt-loading-ui",9),e.qZA()),2&n&&(e.xp6(1),e.Q6J("type","bootstrap-spinner"))}function aZ(n,o){if(1&n&&e._UZ(0,"azt-loaded-img",10),2&n){const t=e.oxw();e.Tol("mb-1 "+t.blockItemCropClass),e.Q6J("isRetry",!1)("imgSrc",null==t.examObj?null:t.examObj.examHeader)}}function rZ(n,o){if(1&n&&e._UZ(0,"azt-question-standalone-for-preview",12),2&n){const t=e.oxw(),i=t.$implicit,a=t.index,r=e.oxw();e.Tol(r.blockItemCropClass),e.Q6J("examObj",r.examObj)("questionObj",i)("follower",r.followerRenderQuest)("curQuestionIndex",a)("isShowExplain",r.isShowExplain)("disableLazy",!0)("isExport",!0)}}function sZ(n,o){if(1&n&&(e.ynx(0),e.YNc(1,rZ,1,10,"azt-question-standalone-for-preview",11),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.examObj)}}function lZ(n,o){if(1&n&&(e.TgZ(0,"div",13),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.AsE(" [ ",t.pdfPercent,"% ] ",e.lcZ(2,2,"lang_testbank_export_pdf_by_user_wait_loading"),"\n")}}let cZ=(()=>{class n extends xe.Q{get pdfPercent(){return this.exportPdfNewService.loadPercent}exportToPdf(){var t=this;return(0,Yi.Z)(function*(){t.exportPdfUtilsService.removeTagAssistiveMml(),t.isProcessingSinglePdf=!0;const i=t.createNameExam(!1);document.body.style.overflow="hidden",yield t.exportPdfNewService.examToPdf("user",i),document.body.style.overflow="auto",t.isProcessingSinglePdf=!1})()}getConfigExam(){this.waitDestroy(this.documentConfigService.apiDocumentConfigGetExamConfigDataV2Get(this.examObj?.hashId??"").subscribe(t=>{if(!t.success)return this.errorStatusObj(t.message,!1);let i=0,a=0;this.questionList.forEach((r,s)=>{r.labelIndex=s,t.data?.resetQuestionIndex&&r.groupInfo&&r.groupInfo.groupId&&(i!=r.groupInfo.groupId&&(i=r.groupInfo.groupId,a=0),r.labelIndex=a,a++)}),this.successStatusObj()}))}getData(t){this.initStatusObj(),this.examService.apiExamGetQuestionsIdGet(t).subscribe(i=>{if(!i.success)return this.errorStatusObj(i.message,!0);const a=this.commonService.castJsonToClassObjs(Le.v,JSON.stringify(i.data?.questionObjs||[]))??[];this.followerRenderQuest.setNumQuest(a.length),a.forEach(r=>{r.isRoleTeacher=!0}),this.cloneQuestionList=this.commonService.myClone(a),this.questionList=a,this.examObj=i.data?.examObj,this.questionRenderService.parseRenderQuestions(this.questionList).then(this.listenToFinishRenderAll),this.getConfigExam(),this.successStatusObj()})}createNameExam(t){let a=this.printAnswersheetService.exportFileNameOfExamOffline(0,this.examObj?.name??"","",void 0);return t&&(a=this.commonService.replaceAll(a,"_","-")??""),a+".pdf"}ngOnInit(){super.ngOnInit(),this.examId=Number(this.commonService.getMyParam(this.activeRoute,"exam_id")??"0");const t=Number(this.commonService.getMyQueryParam("isShowExplain"));this.isShowExplain=1==t,this.getData(this.examId)}constructor(t,i,a,r,s,l,c,u){super(),this.documentConfigService=t,this.questionRenderService=i,this.baseApiService=a,this.exportPdfUtilsService=r,this.exportPdfNewService=s,this.examService=l,this.activeRoute=c,this.printAnswersheetService=u,this.examId=0,this.questionList=[],this.cloneQuestionList=[],this.followerRenderQuest=new mu.p,this.blockItemCropClass=this.exportPdfUtilsService.blockCropItemClass,this.isProcessingSinglePdf=!1,this.doneParsingAllQuestionsContent=!1,this.isShowExplain=!1,this.listenToFinishRenderAll=m=>{setTimeout(()=>{console.log("finish render all question ..."),this.doneParsingAllQuestionsContent=!0},5e3)}}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(un.Cq),e.Y36(Zc.h),e.Y36(Rv.V),e.Y36(Tw.a),e.Y36(WN),e.Y36(zv.O),e.Y36(E.gz),e.Y36(qp.H))},n.\u0275cmp=e.Xpm({type:n,selectors:[["azt-export-exam-pdf"]],features:[e.qOj],decls:10,vars:9,consts:[[3,"isLoading"],["actionButton","",1,"buttons-area","mb-3","text-center"],[1,"btn","btn-primary",3,"disabled","click"],["class","w-4 h-4 mr-2",4,"ngIf"],["id","multipleChoiceWrap","templateExport","",1,"exportPdfMode","exportPdfModeIndex"],["style","display: block","id","examHeader",3,"isRetry","class","imgSrc",4,"ngIf"],[4,"ngFor","ngForOf"],["class","text-center","style","padding-top: 150px; font-size: 20px; background-color: rgba(0, 0, 0, 0.575); color: #fff; position: fixed; top: 0; right: 0; left: 0; bottom: 0; z-index: 9999999999;",4,"ngIf"],[1,"w-4","h-4","mr-2"],[3,"type"],["id","examHeader",2,"display","block",3,"isRetry","imgSrc"],[3,"examObj","questionObj","follower","curQuestionIndex","isShowExplain","disableLazy","isExport","class",4,"ngIf"],[3,"examObj","questionObj","follower","curQuestionIndex","isShowExplain","disableLazy","isExport"],[1,"text-center",2,"padding-top","150px","font-size","20px","background-color","rgba(0, 0, 0, 0.575)","color","#fff","position","fixed","top","0","right","0","left","0","bottom","0","z-index","9999999999"]],template:function(t,i){1&t&&(e.TgZ(0,"export-layout",0)(1,"div",1)(2,"button",2),e.NdJ("click",function(){return i.exportToPdf()}),e.YNc(3,oZ,2,1,"div",3),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()(),e.TgZ(6,"div",4),e.YNc(7,aZ,1,5,"azt-loaded-img",5),e.YNc(8,sZ,2,1,"ng-container",6),e.qZA()(),e.YNc(9,lZ,3,4,"div",7)),2&t&&(e.Q6J("isLoading",i.statusObj.loading),e.xp6(2),e.Q6J("disabled",!i.doneParsingAllQuestionsContent),e.xp6(1),e.Q6J("ngIf",!i.doneParsingAllQuestionsContent),e.xp6(1),e.hij(" ",e.lcZ(5,7,"lang_testbank_export_pdf_by_user_download")," "),e.xp6(3),e.Q6J("ngIf",null==i.examObj?null:i.examObj.examHeader),e.xp6(1),e.Q6J("ngForOf",i.questionList),e.xp6(1),e.Q6J("ngIf",i.isProcessingSinglePdf))},dependencies:[F.sg,F.O5,i2.y,Zx.A,wi.n,iZ,ye.JV],encapsulation:2}),n})(),uZ=(()=>{class n extends xe.Q{redirectToDonate(){this.commonService.myNavigation("/admin/testbank/donate")}}return n.\u0275fac=function(){let o;return function(i){return(o||(o=e.n5z(n)))(i||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["app-testbank"]],features:[e.qOj],decls:2,vars:0,consts:[["id","testbank-layout"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"router-outlet"),e.qZA())},dependencies:[E.lC],styles:[".header-container[_ngcontent-%COMP%]{border-bottom-left-radius:3px;border-bottom-right-radius:3px;box-shadow:#a997973d 0 1px 7px}.btn-donate[_ngcontent-%COMP%]{background:transparent;border:none;text-transform:inherit;font-size:14px;color:#3c8dbc;display:flex;justify-content:center;align-items:center;margin-right:15px;transition:all .5s}.btn-donate[_ngcontent-%COMP%]:hover{color:#204e69}.btn-donate[_ngcontent-%COMP%]:hover   .donate-icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_bounce 1.2s 2s 8}.donate-icon[_ngcontent-%COMP%]{margin-right:5px;animation:_ngcontent-%COMP%_bounce 1.2s 2s 8}@keyframes _ngcontent-%COMP%_bounce{0%,20%,53%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1);transform:translateZ(0)}40%,43%{animation-timing-function:cubic-bezier(.755,.05,.855,.06);transform:translate3d(0,-14px,0) scaleY(1.1) rotate(-15deg)}70%{animation-timing-function:cubic-bezier(.755,.05,.855,.06);transform:translate3d(0,-7px,0) scaleY(1.05) rotate(15deg)}80%{transition-timing-function:cubic-bezier(.215,.61,.355,1);transform:translateZ(0) scaleY(.95) rotate(0)}90%{transform:translate3d(0,-2px,0) scaleY(1.02) rotate(0)}}@media screen and (max-width: 768px){.donate-title[_ngcontent-%COMP%]{display:none}.btn-donate[_ngcontent-%COMP%]{margin-right:0}}"]}),n})();var Ew=I(63019),Ow=I(65619),Yg=I(41019);let dZ=(()=>{class n{initialData(t,i){return this.schoolLevelId=t,this.schoolSubjectId=i,new Promise(a=>{this.apiLeechData(void 0).then(r=>{a(r.map(s=>new Yg.Z(s.id,s.pr,s.type,void 0,s.name,s.examHashId,s.examCategoryId,0,!s.isLeaf,!1,void 0,s.isLeaf)))}).catch(()=>{a([])})})}apiLeechData(t){return new Promise(i=>{const a=[];this.testMarketQuestionService.apiTestMarketQuestionsKnowledgeGet(this.schoolLevelId,this.schoolSubjectId,t).subscribe(r=>{1===r.success&&r.data&&(r.data.objs||[]).forEach(l=>{a.push({pr:t??0,id:l.id??0,name:l.name?l.name:"",examHashId:"",examCategoryId:"",type:"knowledge",isLeaf:l.isLeaf??!1})}),i(a)})})}constructor(t){this.testMarketQuestionService=t,this.schoolLevelId=0,this.schoolSubjectId=0}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(Xp.Q_))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class mZ{get data(){return this.dataChange.value}set data(o){this._treeControl.dataNodes=o,this.dataChange.next(o)}connect(o){return this._treeControl.expansionModel.changed.subscribe(t=>{(t.added||t.removed)&&this.handleTreeControl(t)}),(0,Ew.T)(o.viewChange,this.dataChange).pipe((0,hc.U)(()=>this.data))}disconnect(o){}handleTreeControl(o){o.added&&o.added.forEach(t=>this.toggleNode(t,!0)),o.removed&&o.removed.slice().reverse().forEach(t=>this.toggleNode(t,!1))}toggleNode(o,t){if("knowledge"!==o.type)return;const i=this.data.indexOf(o);if(t)o.isLoading=!0,this._database.apiLeechData(o.id).then(a=>{const r=a.map(s=>new Yg.Z(s.id,s.pr,s.type,void 0,s.name,s.examHashId,s.examCategoryId,o.level+1,!s.isLeaf,!1,o,s.isLeaf));this.data.splice(i+1,0,...r),this.dataChange.next(this.data),o.isLoading=!1});else{let a=0;for(let r=i+1;r<this.data.length&&this.data[r].level>o.level;r++,a++);this.data.splice(i+1,a),this.dataChange.next(this.data)}}constructor(o,t){this._treeControl=o,this._database=t,this.dataChange=new Ow.X([])}}let pZ=(()=>{class n{constructor(t){this.documentService=t}initialData(){return new Promise(t=>{this.apiLeechData(0).then(i=>{t(i.map(a=>new Yg.Z(a.id,a.pr,a.type,a.shareType,a.name,a.examHashId,a.examCategoryId,0,"cate"===a.type,a.isLeaf)))})})}apiLeechData(t,i){return new Promise(a=>{const r=[];let s={categoryId:t,documentType:void 0,shareType:i,fileType:void 0,classroomId:void 0,name:void 0,suggestExamPurpose:void 0,lite:1,getGlobal:0,page:1,itemPerPage:-1};this.documentService.apiDocumentsGet(s.categoryId,s.documentType,s.shareType,s.fileType,s.classroomId,s.name,s.suggestExamPurpose,s.lite,s.getGlobal,s.page,s.itemPerPage).subscribe(l=>{1===l.success&&l.data&&((l.data.categoryObjs||[]).forEach(m=>{r.push({pr:t,id:m.id??0,name:m.name??"",examHashId:"",examCategoryId:"",type:"cate",shareType:m.shareType,isLeaf:!1})}),(l.data.documentObjs||[]).forEach(m=>{m.exam&&r.push({pr:t,id:m.exam.id??0,examHashId:m.exam.hashId??"",examCategoryId:m.exam.categoryId?.toString()??"",name:m.exam.name??"",type:"test",shareType:void 0,isLeaf:!0})})),a(r)})})}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(un.Zg))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class hZ{get data(){return this.dataChange.value}set data(o){this._treeControl.dataNodes=o,this.dataChange.next(o)}constructor(o,t){this._treeControl=o,this._database=t,this.dataChange=new Ow.X([])}connect(o){return this._treeControl.expansionModel.changed.subscribe(t=>{(t.added||t.removed)&&this.handleTreeControl(t)}),(0,Ew.T)(o.viewChange,this.dataChange).pipe((0,hc.U)(()=>this.data))}disconnect(o){}handleTreeControl(o){o.added&&o.added.forEach(t=>this.toggleNode(t,!0)),o.removed&&o.removed.slice().reverse().forEach(t=>this.toggleNode(t,!1))}toggleNode(o,t){if("cate"!==o.type)return;const i=this.data.indexOf(o);if(t)o.isLoading=!0,this._database.apiLeechData(o.id,o.shareType).then(a=>{const r=a.map(s=>new Yg.Z(s.id,s.pr,s.type,s.shareType,s.name,s.examHashId,s.examCategoryId,o.level+1,"cate"===s.type,!1,o));this.data.splice(i+1,0,...r),this.dataChange.next(this.data),o.isLoading=!1});else{let a=0;for(let r=i+1;r<this.data.length&&this.data[r].level>o.level;r++,a++);this.data.splice(i+1,a),this.dataChange.next(this.data)}}}const AZ=["tableMain"],_Z=["table_mix_bank_template"];function fZ(n,o){if(1&n&&e._UZ(0,"azt-loading-effect",3),2&n){const t=e.oxw();e.Q6J("currentStatusObj",t.statusObj)}}function gZ(n,o){if(1&n&&(e.TgZ(0,"option",77),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n){const t=o.$implicit,i=e.oxw(3);e.Q6J("value",null==t.schoolLevel?null:t.schoolLevel.id)("selected",(null==t.schoolLevel?null:t.schoolLevel.id)==i.formSchoolInfo.controls.schoolLevel.value),e.xp6(1),e.hij(" ",e.lcZ(2,3,null==t.schoolLevel?null:t.schoolLevel.key)," ")}}function xZ(n,o){if(1&n&&(e.TgZ(0,"option",77),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n){const t=o.$implicit,i=e.oxw(3);e.Q6J("value",t.id)("selected",t.id==i.formSchoolInfo.controls.schoolSubject.value),e.xp6(1),e.hij(" ",e.lcZ(2,3,t.key)," ")}}function bZ(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"form",70)(1,"label",71),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.TgZ(4,"select",72),e.NdJ("change",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.changeSchoolLevelAndSubject(!0,a.formSchoolInfo.controls.schoolLevel.value,a.formSchoolInfo.controls.schoolSubject.value))}),e.TgZ(5,"option",73),e._uU(6),e.ALo(7,"mytranslate"),e.qZA(),e.YNc(8,gZ,3,5,"option",74),e.qZA(),e.TgZ(9,"label",75),e._uU(10),e.ALo(11,"mytranslate"),e.qZA(),e.TgZ(12,"select",76),e.NdJ("change",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.changeSchoolLevelAndSubject(!1,a.formSchoolInfo.controls.schoolLevel.value,a.formSchoolInfo.controls.schoolSubject.value))}),e.TgZ(13,"option",73),e._uU(14),e.ALo(15,"mytranslate"),e.qZA(),e.YNc(16,xZ,3,5,"option",74),e.qZA()()}if(2&n){const t=e.oxw(2);e.Q6J("formGroup",t.formSchoolInfo),e.xp6(2),e.hij(" ",e.lcZ(3,9,"lang_auto_lop_hoc")," "),e.xp6(3),e.Q6J("selected",0==t.formSchoolInfo.controls.schoolLevel.value),e.xp6(1),e.hij("",e.lcZ(7,11,"lang_auto_---chon_khoi"),"---"),e.xp6(2),e.Q6J("ngForOf",t.schoolLevelSubjectObjs),e.xp6(2),e.hij(" ",e.lcZ(11,13,"lang_auto_mon_hoc")," "),e.xp6(3),e.Q6J("selected",0==t.formSchoolInfo.controls.schoolSubject.value),e.xp6(1),e.hij("",e.lcZ(15,15,"lang_auto_---chon_mon"),"---"),e.xp6(2),e.Q6J("ngForOf",t.schoolSubjectObjs)}}function vZ(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li"),e._UZ(1,"hr",78),e.TgZ(2,"a",79),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw(2);return e.KtG(s.changeExamBank(r))}),e._uU(3),e.qZA()()}if(2&n){const t=o.$implicit;e.xp6(3),e.Oqu(t.name)}}function wZ(n,o){1&n&&(e.TgZ(0,"span"),e.O4$(),e.TgZ(1,"svg",86),e._UZ(2,"path",87),e.qZA()())}function yZ(n,o){1&n&&(e.TgZ(0,"span"),e.O4$(),e.TgZ(1,"svg",88),e._UZ(2,"path",89)(3,"polyline",90)(4,"path",91),e.qZA()())}function CZ(n,o){1&n&&(e.TgZ(0,"span"),e.O4$(),e.TgZ(1,"svg",92),e._UZ(2,"path",89)(3,"polyline",90)(4,"line",93)(5,"line",94)(6,"line",95),e.qZA()())}const Iw=function(n){return{paddingLeft:n}},Mw=function(n,o){return{"tb-active":n,"d-none":o}};function TZ(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"mat-tree-node",80),e.ALo(1,"compareString"),e._UZ(2,"button",81),e.TgZ(3,"div",82),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw(2);return e.KtG(null==s.tableEditor?null:s.tableEditor.pushNode(r))}),e.YNc(4,wZ,3,0,"span",83),e.YNc(5,yZ,5,0,"span",83),e.YNc(6,CZ,7,0,"span",83),e.TgZ(7,"span",84),e._UZ(8,"azt-dynamic-hook",85),e.qZA()()()}if(2&n){const t=o.$implicit,i=e.oxw(2);e.Q6J("ngStyle",e.VKq(9,Iw,15*t.level+"px"))("ngClass",e.WLB(11,Mw,i.exitsTables.includes(t.id),!e.xi3(1,6,t.item,i.filterContent))),e.xp6(4),e.Q6J("ngIf","cate"===t.type&&"knowledge"!==t.type||"knowledge"===t.type&&!t.isLeaf),e.xp6(1),e.Q6J("ngIf","cate"!==t.type&&"knowledge"!==t.type),e.xp6(1),e.Q6J("ngIf","knowledge"===t.type&&t.isLeaf),e.xp6(2),e.Q6J("content",t.item)}}function kZ(n,o){1&n&&(e.TgZ(0,"span"),e.O4$(),e.TgZ(1,"svg",86),e._UZ(2,"path",87),e.qZA()())}function SZ(n,o){1&n&&(e.TgZ(0,"span"),e.O4$(),e.TgZ(1,"svg",101),e._UZ(2,"path",89)(3,"polyline",90)(4,"path",91),e.qZA()())}function EZ(n,o){1&n&&(e.TgZ(0,"span",102),e._UZ(1,"azt-loading-ui"),e.qZA())}function OZ(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"mat-tree-node",80),e.ALo(1,"compareString"),e.TgZ(2,"button",96)(3,"mat-icon",97),e._uU(4),e.qZA()(),e.TgZ(5,"div",98),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw(2);return e.KtG(null==s.tableEditor?null:s.tableEditor.pushNode(r))}),e.YNc(6,kZ,3,0,"span",83),e.YNc(7,SZ,5,0,"span",83),e.TgZ(8,"span",99),e._UZ(9,"azt-dynamic-hook",85),e.qZA(),e.YNc(10,EZ,2,0,"span",100),e.qZA()()}if(2&n){const t=o.$implicit,i=e.oxw(2);e.Q6J("ngStyle",e.VKq(12,Iw,15*t.level+"px"))("ngClass",e.WLB(14,Mw,i.exitsTables.includes(t.id),!e.xi3(1,9,t.item,i.filterContent))),e.xp6(2),e.Q6J("disabled",t.isLoading),e.uIk("aria-label","Toggle "+t.item),e.xp6(2),e.hij(" ",i.treeControl.isExpanded(t)?"expand_more":"chevron_right"," "),e.xp6(2),e.Q6J("ngIf","cate"===t.type&&"knowledge"!==t.type||"knowledge"===t.type&&!t.isLeaf),e.xp6(1),e.Q6J("ngIf","cate"!==t.type&&"knowledge"!==t.type||"knowledge"===t.type&&t.isLeaf),e.xp6(2),e.Q6J("content",t.item),e.xp6(1),e.Q6J("ngIf",t.isLoading)}}function IZ(n,o){if(1&n&&(e.TgZ(0,"div",103)(1,"div",104)(2,"div",105)(3,"span",106),e._UZ(4,"azt-loading-ui"),e.qZA()(),e.TgZ(5,"div",107),e._uU(6),e.ALo(7,"mytranslate"),e.qZA()()()),2&n){const t=e.oxw(2);e.xp6(6),e.Oqu(e.lcZ(7,1,t.logConfig.msg))}}const MZ=function(n){return{"has-err":n}},LZ=function(n){return{"shadow-md":n}};function BZ(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",4)(1,"div",4),e.YNc(2,bZ,17,17,"form",5),e.qZA(),e.TgZ(3,"div",6)(4,"div",7)(5,"div",8)(6,"form",9),e._UZ(7,"input",10),e.ALo(8,"mytranslate"),e.qZA()()(),e.TgZ(9,"button",11),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.downloadTableMixBank())}),e.O4$(),e.TgZ(10,"svg",12)(11,"g",13)(12,"g",14),e._UZ(13,"path",15),e.qZA()()(),e._uU(14),e.ALo(15,"mytranslate"),e.qZA(),e.kcU(),e.TgZ(16,"button",16),e._uU(17),e.ALo(18,"mytranslate"),e.TgZ(19,"mat-icon"),e._uU(20,"expand_more"),e.qZA()(),e.TgZ(21,"mat-menu",null,17)(23,"div",18)(24,"ng-scrollbar",19)(25,"ul",20)(26,"li")(27,"a",21),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.createNew())}),e._uU(28),e.ALo(29,"mytranslate"),e.qZA()(),e.YNc(30,vZ,4,1,"li",22),e.qZA()()()()()(),e.TgZ(31,"div",23)(32,"div",24)(33,"div",25)(34,"ng-scrollbar",26)(35,"mat-tree",27),e.YNc(36,TZ,9,14,"mat-tree-node",28),e.YNc(37,OZ,11,17,"mat-tree-node",29),e.qZA()()(),e.TgZ(38,"div",30)(39,"input",31),e.NdJ("ngModelChange",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.filterContent=a)}),e.ALo(40,"mytranslate"),e.qZA()()(),e.TgZ(41,"div",32)(42,"div",33,34)(44,"table",35,36)(46,"thead",37)(47,"tr",38)(48,"td",39),e._uU(49),e.ALo(50,"mytranslate"),e.qZA(),e.TgZ(51,"td",39),e._uU(52),e.ALo(53,"mytranslate"),e.qZA(),e.TgZ(54,"td",40),e._uU(55),e.ALo(56,"mytranslate"),e.qZA(),e.TgZ(57,"td",41),e._uU(58),e.ALo(59,"mytranslate"),e.qZA(),e.TgZ(60,"td",42),e._uU(61),e.ALo(62,"mytranslate"),e.qZA(),e.TgZ(63,"td",43),e._uU(64),e.ALo(65,"mytranslate"),e.qZA(),e.TgZ(66,"td",39),e._uU(67," % "),e._UZ(68,"br"),e._uU(69),e.ALo(70,"mytranslate"),e._UZ(71,"br"),e._uU(72),e.ALo(73,"mytranslate"),e.qZA()(),e.TgZ(74,"tr",38)(75,"td",44),e._uU(76),e.ALo(77,"mytranslate"),e.qZA(),e.TgZ(78,"td",44),e._uU(79),e.ALo(80,"mytranslate"),e.qZA(),e.TgZ(81,"td",44),e._uU(82),e.ALo(83,"mytranslate"),e.qZA(),e.TgZ(84,"td",44),e._uU(85),e.ALo(86,"mytranslate"),e.qZA(),e.TgZ(87,"td",45),e._uU(88),e.ALo(89,"mytranslate"),e.qZA(),e.TgZ(90,"td",46),e._uU(91),e.ALo(92,"mytranslate"),e.qZA()(),e.TgZ(93,"tr",38)(94,"td"),e._uU(95),e.ALo(96,"mytranslate"),e.qZA(),e.TgZ(97,"td"),e._uU(98),e.ALo(99,"mytranslate"),e.qZA(),e.TgZ(100,"td"),e._uU(101),e.ALo(102,"mytranslate"),e.qZA(),e.TgZ(103,"td"),e._uU(104),e.ALo(105,"mytranslate"),e.qZA(),e.TgZ(106,"td"),e._uU(107),e.ALo(108,"mytranslate"),e.qZA(),e.TgZ(109,"td"),e._uU(110),e.ALo(111,"mytranslate"),e.qZA(),e.TgZ(112,"td"),e._uU(113),e.ALo(114,"mytranslate"),e.qZA(),e.TgZ(115,"td"),e._uU(116),e.ALo(117,"mytranslate"),e.qZA(),e.TgZ(118,"td"),e._uU(119),e.ALo(120,"mytranslate"),e.qZA(),e.TgZ(121,"td"),e._uU(122),e.ALo(123,"mytranslate"),e.qZA(),e.TgZ(124,"td"),e._uU(125),e.ALo(126,"mytranslate"),e.qZA(),e.TgZ(127,"td"),e._uU(128),e.ALo(129,"mytranslate"),e.qZA()()(),e.TgZ(130,"tbody")(131,"tr",47)(132,"td",48),e._uU(133),e.ALo(134,"mytranslate"),e.qZA()()(),e.TgZ(135,"tfoot",37)(136,"tr",49)(137,"td",50),e._uU(138),e.ALo(139,"mytranslate"),e.qZA(),e._UZ(140,"td")(141,"td")(142,"td")(143,"td")(144,"td")(145,"td")(146,"td")(147,"td")(148,"td")(149,"td")(150,"td")(151,"td")(152,"td")(153,"td")(154,"td"),e.qZA()()(),e.TgZ(155,"div",51),e._uU(156),e.ALo(157,"mytranslate"),e._UZ(158,"br"),e._uU(159),e.ALo(160,"mytranslate"),e._UZ(161,"br"),e._uU(162),e.ALo(163,"mytranslate"),e._UZ(164,"br"),e._uU(165),e.ALo(166,"mytranslate"),e._UZ(167,"br"),e._uU(168),e.ALo(169,"mytranslate"),e._UZ(170,"br"),e._uU(171),e.ALo(172,"mytranslate"),e.TgZ(173,"a",52),e._uU(174),e.ALo(175,"mytranslate"),e.qZA(),e._UZ(176,"br"),e._uU(177),e.ALo(178,"mytranslate"),e._UZ(179,"br"),e.qZA(),e.TgZ(180,"div",53)(181,"li",54),e.O4$(),e.TgZ(182,"svg",55),e._UZ(183,"path",56)(184,"path",57)(185,"path",58)(186,"path",59)(187,"path",60)(188,"path",61),e.qZA(),e.kcU(),e.TgZ(189,"span",62),e._uU(190),e.ALo(191,"mytranslate"),e.qZA()(),e.TgZ(192,"li",63),e.O4$(),e.TgZ(193,"svg",64),e._UZ(194,"path",65)(195,"path",57)(196,"path",66)(197,"path",67)(198,"path",68),e.qZA(),e.kcU(),e.TgZ(199,"span",62),e._uU(200),e.ALo(201,"mytranslate"),e.qZA()()()()()(),e.YNc(202,IZ,8,3,"div",69)}if(2&n){const t=e.MAs(22),i=e.oxw();e.xp6(2),e.Q6J("ngIf","azota"===i.selfRequestData),e.xp6(4),e.Q6J("formGroup",i.matrixTableForm),e.xp6(1),e.s9C("placeholder",e.lcZ(8,57,"lang_auto_nhap_ten_ma_tran")+"..."),e.Q6J("readonly",i.isDisableEditor)("ngClass",e.VKq(143,MZ,i.checkName&&(!i.matrixTableForm.controls.blackSelectName.value||0===i.matrixTableForm.controls.blackSelectName.value.trim().length))),e.xp6(7),e.hij(" ",e.lcZ(15,59,"lang_homework_homework_score_list_export_excel")," "),e.xp6(2),e.Q6J("matMenuTriggerFor",t),e.xp6(1),e.hij(" ",e.lcZ(18,61,"lang_auto_danh_sach_da_tao")," "),e.xp6(6),e.Q6J("ngClass",e.VKq(145,LZ,i.banks.length>=10)),e.xp6(1),e.Q6J("visibility","hover"),e.xp6(4),e.hij("+ ",e.lcZ(29,63,"lang_testbank_create_new_matrix"),""),e.xp6(2),e.Q6J("ngForOf",i.banks),e.xp6(4),e.Q6J("visibility","hover"),e.xp6(1),e.Q6J("dataSource",i.commonDataSourceProcess)("treeControl",i.treeControl),e.xp6(2),e.Q6J("matTreeNodeDefWhen",i.hasChild),e.xp6(2),e.s9C("placeholder",e.lcZ(40,65,"lang_auto_loc_theo_ten")),e.Q6J("ngModel",i.filterContent),e.xp6(10),e.hij(" ",e.lcZ(50,67,"lang_auto_STT")," "),e.xp6(3),e.hij(" ",e.lcZ(53,69,"lang_auto_noi_dung_kien_thuc")," "),e.xp6(3),e.hij(" ",e.lcZ(56,71,"lang_auto_don_vi_kien_thuc")," "),e.xp6(3),e.hij(" ",e.lcZ(59,73,"lang_auto_cau_trong_de_minh_hoa")," "),e.xp6(3),e.hij(" ",e.lcZ(62,75,"lang_auto_muc_do_nhan_biet")," "),e.xp6(3),e.hij(" ",e.lcZ(65,77,"lang_auto_tong")," "),e.xp6(5),e.hij(" ",e.lcZ(70,79,"lang_auto_tong")," "),e.xp6(3),e.hij(" ",e.lcZ(73,81,"lang_auto_diem")," "),e.xp6(4),e.hij(" ",e.lcZ(77,83,"lang_auto_nhan_biet")," "),e.xp6(3),e.Oqu(e.lcZ(80,85,"lang_auto_thong_hieu")),e.xp6(3),e.Oqu(e.lcZ(83,87,"lang_auto_van_dung")),e.xp6(3),e.Oqu(e.lcZ(86,89,"lang_auto_van_dung_cao")),e.xp6(3),e.Oqu(e.lcZ(89,91,"lang_auto_so_ch")),e.xp6(3),e.Oqu(e.lcZ(92,93,"lang_auto_thoi_gian_phut")),e.xp6(4),e.Oqu(e.lcZ(96,95,"lang_auto_so_ch")),e.xp6(3),e.Oqu(e.lcZ(99,97,"lang_auto_thoi_gian_phut")),e.xp6(3),e.Oqu(e.lcZ(102,99,"lang_auto_so_ch")),e.xp6(3),e.Oqu(e.lcZ(105,101,"lang_auto_thoi_gian_phut")),e.xp6(3),e.Oqu(e.lcZ(108,103,"lang_auto_so_ch")),e.xp6(3),e.Oqu(e.lcZ(111,105,"lang_auto_thoi_gian_phut")),e.xp6(3),e.Oqu(e.lcZ(114,107,"lang_auto_so_ch")),e.xp6(3),e.Oqu(e.lcZ(117,109,"lang_auto_thoi_gian_phut")),e.xp6(3),e.Oqu(e.lcZ(120,111,"lang_auto_TN")),e.xp6(3),e.Oqu(e.lcZ(123,113,"lang_auto_TL")),e.xp6(3),e.Oqu(e.lcZ(126,115,"lang_azt_DS")),e.xp6(3),e.Oqu(e.lcZ(129,117,"lang_azt_DT")),e.xp6(5),e.hij(" ",e.lcZ(134,119,"lang_auto_chon_cac_noi_dung_kien_thuc_o_cay_thu_muc_ben_cac_de_them_vao_ma_tran")," "),e.xp6(5),e.hij(" ",e.lcZ(139,121,"lang_auto_tong")," "),e.xp6(18),e.hij(" * ",e.lcZ(157,123,"lang_auto_nhap_tl_vao_sau_so_luong_cau_can_lay_de_chi_lay_cau_tu_luan")," "),e.xp6(3),e.hij(" * ",e.lcZ(160,125,"lang_azt_true_false_question_quantity_input_guide")," "),e.xp6(3),e.hij(" * ",e.lcZ(163,127,"lang_azt_fill_in_the_blank_question_quantity_input_guide")," "),e.xp6(3),e.hij(" * ",e.lcZ(166,129,"lang_azt_abbreviations_explanation")," "),e.xp6(3),e.hij(" * ",e.lcZ(169,131,"lang_azt_question_quantity_input_guide")," "),e.xp6(3),e.hij(" * ",e.lcZ(172,133,"lang_auto_ban_can_gan_nhan_muc_do_nhan_biet_cho_cac_cau_hoi_trong_dot")," "),e.xp6(3),e.hij(" ",e.lcZ(175,135,"lang_auto_tim_hieu_them")," "),e.xp6(3),e.hij(" * ",e.lcZ(178,137,"lang_auto_nhap_vi_tri_trong_de_note")," "),e.xp6(13),e.Oqu(e.lcZ(191,139,"lang_auto_gop_cac_o_da_chon")),e.xp6(10),e.hij(" ",e.lcZ(201,141,"lang_auto_huy_gop_o_da_chon")," "),e.xp6(2),e.Q6J("ngIf",i.logConfig.status)}}let PZ=(()=>{class n extends xe.Q{set tableMain(t){this.tableIsAlready||(this.tableIsAlready=!0,this.initTableEditor(t))}downloadTableMixBank(){if(this.table_mix_bank_template){cr.G.openLoadingEffect(this.commonService.myTranslateInstant("lang_auto_dang_lay_du_lieu_tu_he_thong")??"");var t=this.exportExcelService.exportHtmlTableToExcelBlob(this.table_mix_bank_template,!0);let i=this.commonService.createFileNameExportFile(["lang_matrix_list_total_matrix_"+(this.matrixTableForm.getRawValue().blackSelectName??"")+(this.matrixTableForm.getRawValue().blankSelectId??"")])+".xlsx";this.shareFileFlutterService.shareFileWithBlob(t,i),cr.G.closeLoadingEffect(200)}}initTableEditor(t){const i=t.nativeElement;this.tableEditor=new Ya(this.commonService,(r,s,l)=>{s?l&&this.showErrorSnack(r):this.showSuccessSnack(r)},this.questionService,i,i.firstElementChild,vN.generate({is_select_cell:!1}),r=>{this.exitsTables=[],r.forEach(s=>{this.exitsTables.push(s.obj.id)})}),this.curExamBankId?this.setMatrixNodeToTable(r=>{}):this.setCacheMatrixDataInLocalStorageToTable(r=>{})}setMatrixNodeToTable(t){this.tableEditor?.setDisable(this.isDisableEditor),this.tableEditor?.resetAndPushList(this.curMatrixNodeObjs).then(()=>{t(!0)})}setCacheMatrixDataInLocalStorageToTable(t){const i=this.editorOutputDataService.getMatrixData();i&&i.matrix.length>0&&i.response.type===this.selfRequestData?this.applyExamBankData(i.response,i.matrix,a=>{t(!0)}):t(!0)}changeSchoolLevelAndSubject(t,i,a){this.startLoading(),t&&(this.schoolSubjectObjs=this.schoolLevelSubjectObjs.find(s=>s.schoolLevel?.id==i)?.schoolSubjectObjs??[],a=this.schoolLevelSubjectObjs.find(s=>s.schoolLevel?.id==i)?.schoolSubjectObjs.find(s=>s.id==a)?a:this.schoolSubjectObjs[0]?this.schoolSubjectObjs[0].id:0),this.tableEditor?.resetAndPushList([]),this.getKnowledgeBySchoolLevelAndSubject(!0,i,a,r=>{this.stopLoading()})}changeExamBank(t){this.commonService.myNavigationWithQueryString(`/admin/testbank/mix-bank-template/${this.categoryId}/${this.selfRequestData}/${t.id}`,this.commonService.getCurrentQueryString("?"))}cancelChangeContent(){location.reload()}saveAction(){const t=this.tableEditor?.getResult();if(this.tableEditor?.isErrSum)return this.showErrorSnack("lang_auto_vui_long_nhap_tong_%_diem_khong_qua_100%");if(this.tableEditor&&this.tableEditor.isErrNumPos)return this.showErrorSnack("lang_auto_vui_long_nhap_vi_tri_cau_hoi_hop_le");if("azota"===this.selfRequestData&&this.tableEditor&&this.tableEditor.getSumQuestion()>120)return this.showErrorSnack("lang_auto_limit_matrix_bank_question");let i=this.matrixTableForm.controls.blackSelectName.value?.trim();if(!i)return this.showErrorSnack("lang_auto_vui_long_nhap_ten_ma_tran_de_thi");if(!t||!t.length)return this.showErrorSnack("lang_auto_khong_tim_thay_du_lieu_ma_tran");if(this.isDisableEditor)return this.actionRedirect(t);this.startLoading("lang_auto_dang_chuan_bi_cau_hoi_cho_ma_tran_vua_tao");let a=this.matrixTableForm.controls.blankSelectId.value??0,r={name:i,content:this.gzipHelper.zipBigContent(JSON.stringify(t)),type:this.typeRequestData,levelId:this.formSchoolInfo.controls.schoolLevel.value?this.formSchoolInfo.controls.schoolLevel.value:void 0,subjectId:this.formSchoolInfo.controls.schoolSubject.value?this.formSchoolInfo.controls.schoolSubject.value:void 0};a?this.examBankService.apiExamBanksIdPut(a,r).subscribe(s=>{s.success?this.actionRedirect(t):this.showErrorSnack("lang_auto_khong_the_thay_doi_ma_tran_de_thi")}):this.examBankService.apiExamBanksPost(r).subscribe(s=>{s.success?this.actionRedirect(t):this.showErrorSnack("lang_auto_khong_the_luu_ma_tran_de_thi")})}createNew(){this.matrixTableForm.controls.blackSelectName.setValue(null),this.matrixTableForm.controls.blankSelectId.setValue(null),this.tableEditor?.resetAndPushList([])}actionRedirect(t){this.startLoading(),this.editorOutputDataService.setMatrixData({matrix:t,response:{id:Number(this.matrixTableForm.controls.blankSelectId.value),name:this.matrixTableForm.controls.blackSelectName.value??"",type:this.selfRequestData,editable:!this.isDisableEditor,createdAt:new Date,updatedAt:new Date}});let i=`/admin/testbank/azota-editor/${this.categoryId?this.categoryId:0}`;i="azota"===this.selfRequestData?i+"?self=azota":i,this.paramClassroomService.redirectUrlAddParamClassroomReload(i)}get commonDataSourceProcess(){return"user"===this.selfRequestData?this.userCategoriesDataSource:"azota"===this.selfRequestData?this.azotaKnowledgeDataSource:this.userCategoriesDataSource}get typeRequestData(){return"user"===this.selfRequestData?"matrix":"azota"===this.selfRequestData?"knowledge":"matrix"}startLoading(t="lang_loading_data"){this.logConfig.setStatus(this.commonService.myTranslateInstant(t))}stopLoading(){this.logConfig.stopStatus()}getSchoolLevelAndSubject(t){if(this.schoolLevelSubjectObjs.length>0)return t(!0);this.testMarketQuestionService.apiTestMarketQuestionsSubjectLevelsGet().subscribe(i=>{i.success?(this.schoolLevelSubjectObjs=i.data?.schoolLevelSubjectObjs??[],t(!0)):(this.errorStatusObj(i.message,!0),t(!1))})}getListExamBanks(t){if(this.banks.length>0)return t(!0);this.examBankService.apiExamBanksGet(this.typeRequestData).subscribe(i=>{i.success?(this.banks=i.data?.banks??[],t(!0)):(this.errorStatusObj(i.message,!0),t(!1))})}getExamBankById(t,i){this.examBankService.apiExamBanksIdGet(t).subscribe(a=>{if(a.success){let r=this.gzipHelper.resultContentSupport(a.data?.content??"");const s=this.commonService.castJsonToObj(r);if(!a.data||!s)return i(!1,void 0,[]),this.errorStatusObj("lang_core_not_found_obj",!0);i(!0,a.data,s)}else i(!1,void 0,[]),this.errorStatusObj(a.message??"",!0)})}applyExamBankData(t,i,a){this.curMatrixNodeObjs=i,this.isDisableEditor=!t.editable,this.matrixTableForm.controls.blankSelectId.setValue(t.id),this.matrixTableForm.controls.blackSelectName.setValue(t.name),this.getKnowledgeBySchoolLevelAndSubject(!1,t.levelId??0,t.subjectId??0,r=>{if(!r)return a(!1);this.setMatrixNodeToTable(a)})}getKnowledgeBySchoolLevelAndSubject(t,i,a,r){if("user"==this.selfRequestData){if(this.commonDataSourceProcess.data.length)return r(!0);this.commonDataSourceProcess._database.initialData(i,a).then(s=>{this.commonDataSourceProcess.data=s,r(!0)})}else{let s=this.schoolLevelSubjectObjs.find(c=>c.schoolLevel?.id==i),l=s?.schoolSubjectObjs.find(c=>c.id==a);if(s&&s.schoolLevel?.id&&l){let c=this.formSchoolInfo.getRawValue();if(!t&&i==c.schoolLevel&&a==c.schoolSubject)return r(!0);this.schoolSubjectObjs=this.schoolLevelSubjectObjs.find(u=>u.schoolLevel?.id==i)?.schoolSubjectObjs??[],this.formSchoolInfo.controls.schoolLevel.setValue(i),this.formSchoolInfo.controls.schoolSubject.setValue(a),this.commonDataSourceProcess._database.initialData(i,a).then(u=>{this.commonDataSourceProcess.data=u,r(!0)})}else this.formSchoolInfo.controls.schoolLevel.setValue(0),this.formSchoolInfo.controls.schoolSubject.setValue(0),this.schoolSubjectObjs=[],this.commonDataSourceProcess.data=[],r(!0)}}initData(){this.startLoading(),this.getSchoolLevelAndSubject(t=>{if(!t)return this.stopLoading();this.getListExamBanks(i=>{if(!i)return this.stopLoading();if(this.curExamBankId)this.getExamBankById(this.curExamBankId,(a,r,s)=>{if(!a||!r)return this.stopLoading();this.applyExamBankData(r,s,l=>{if(!l)return this.stopLoading();this.stopLoading()})});else{let a=this.schoolLevelSubjectObjs.length-1,r=this.schoolLevelSubjectObjs[a]?this.schoolLevelSubjectObjs[a].schoolLevel?.id??0:0,s=this.schoolLevelSubjectObjs.find(l=>l.schoolLevel?.id==r)?.schoolSubjectObjs[0]?.id??0;this.getKnowledgeBySchoolLevelAndSubject(!1,r,s,l=>{this.stopLoading()})}})})}ngOnInit(){super.ngOnInit(),this.waitDestroy((0,ne.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.categoryId=Number(this.commonService.getMyParamOrDefault(this.activeRoute,"cat_id","0")),this.selfRequestData=this.commonService.getMyParamOrDefault(this.activeRoute,"mode_name","user"),this.curExamBankId=Number(this.commonService.getMyParamOrDefault(this.activeRoute,"matrix_id","0"));let t=this.commonService.getMyQueryParam("backto");this.backToLink=t??"/admin/testbank/create-new-document/"+this.categoryId,this.initData()}))}constructor(t,i,a,r,s,l,c,u,m,p,f){super(),this.userCategoriesDatabase=t,this.azotaKnowledgeDatabaseService=i,this.editorOutputDataService=a,this.activeRoute=r,this.examBankService=s,this.questionService=l,this.gzipHelper=c,this.paramClassroomService=u,this.testMarketQuestionService=m,this.exportExcelService=p,this.shareFileFlutterService=f,this.tableIsAlready=!1,this.schoolLevelSubjectObjs=[],this.schoolSubjectObjs=[],this.banks=[],this.curExamBankObj=void 0,this.curMatrixNodeObjs=[],this.backToLink="",this.categoryId=0,this.curExamBankId=0,this.exitsTables=[],this.logConfig=new on.H,this.filterContent="",this.selfRequestData="user",this.isDisableEditor=!1,this.checkName=!1,this.getLevel=b=>b.level,this.isExpandable=b=>b.expandable,this.hasChild=(b,L)=>L.expandable,this.treeControl=new $A.C2(this.getLevel,this.isExpandable),this.userCategoriesDataSource=new hZ(this.treeControl,t),this.azotaKnowledgeDataSource=new mZ(this.treeControl,i),this.matrixTableForm=new h.cw({blankSelectId:new h.NI(null),blackSelectName:new h.NI(null)}),this.formSchoolInfo=new h.cw({schoolLevel:new h.NI(0,{nonNullable:!0}),schoolSubject:new h.NI(0,{nonNullable:!0})})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(pZ),e.Y36(dZ),e.Y36(Ar.O),e.Y36(E.gz),e.Y36(un.SP),e.Y36(un.aE),e.Y36(Gx.n),e.Y36(Xr),e.Y36(Xp.Q_),e.Y36($x.L),e.Y36(Ac.g))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-mix-bank-template"]],viewQuery:function(t,i){if(1&t&&(e.Gf(AZ,5,e.SBq),e.Gf(_Z,5)),2&t){let a;e.iGM(a=e.CRH())&&(i.tableMain=a.first),e.iGM(a=e.CRH())&&(i.table_mix_bank_template=a.first)}},features:[e.qOj],decls:4,vars:4,consts:[[3,"headerBackToLink","showConfirmButton","handleCancel","handleConfirm"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],["doneLoading",""],[3,"currentStatusObj"],[1,"header-mix-bank"],["class","header-fx-item",3,"formGroup",4,"ngIf"],[1,"header-fx-item","d-block"],[1,"bank-name-block"],[1,"name-block"],[1,"input",3,"formGroup"],["formControlName","blackSelectName","type","text",1,"form-control",3,"readonly","placeholder","ngClass"],["azt-track-service","mix-bank-template-1PEX2I_fl",1,"btn","btn-primary","btn-sm","mr-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","x","0px","y","0px","width","24","height","24","viewBox","0,0,256,256",1,"mr-1"],["fill","#ffffff","fill-rule","nonzero","stroke","none","stroke-width","1","stroke-linecap","butt","stroke-linejoin","miter","stroke-miterlimit","10","stroke-dasharray","","stroke-dashoffset","0","font-family","none","font-weight","none","font-size","none","text-anchor","none",2,"mix-blend-mode","normal"],["transform","scale(10.66667,10.66667)"],["d","M12,3l-10,2v14l10,2zM14,5v2h2v2h-2v2h2v2h-2v2h2v2h-2v2h7c0.552,0 1,-0.448 1,-1v-12c0,-0.552 -0.448,-1 -1,-1zM18,7h2v2h-2zM4.17578,8.29688h1.77734l0.92383,2.21484c0.075,0.181 0.13145,0.39091 0.18945,0.62891h0.02539c0.033,-0.143 0.10017,-0.36148 0.20117,-0.64648l1.0293,-2.19727h1.62109l-1.93555,3.66992l1.99219,3.73633h-1.72852l-1.11328,-2.41406c-0.042,-0.085 -0.09181,-0.25614 -0.13281,-0.49414h-0.01562c-0.025,0.114 -0.07539,0.28467 -0.15039,0.51367l-1.12305,2.39453h-1.73633l2.06055,-3.70703zM18,11h2v2h-2zM18,15h2v2h-2z"],[1,"btn","btn-outline-secondary","btn-sm",3,"matMenuTriggerFor"],["historyMatrix","matMenu"],[1,"dropdown-menu","show","relative","w-72",2,"height","450px",3,"ngClass"],["pointerEventsMethod","scrollbar",3,"visibility"],[1,"dropdown-content","mt-0"],["azt-track-service","mix-bank-template-qYcpBwTiaO",1,"dropdown-item","uppercase","font-medium",3,"click"],[4,"ngFor","ngForOf"],[1,"main-mix-blank","bg-white","dark:bg-darkmode-400"],[1,"col-tree"],[1,"col-tree-main","pr-3"],["track","all","pointerEventsMethod","scrollbar",3,"visibility"],[3,"dataSource","treeControl"],[3,"ngStyle","ngClass",4,"matTreeNodeDef"],[3,"ngStyle","ngClass",4,"matTreeNodeDef","matTreeNodeDefWhen"],[1,"filler-node","bg-white","dark:bg-darkmode-400"],["type","text",1,"form-control",3,"ngModel","placeholder","ngModelChange"],[1,"col-table"],["id","table_main",1,"table-main"],["tableMain",""],["id","table__element"],["table_mix_bank_template",""],[2,"color","#2a3545"],[1,"header-tb"],["rowspan","3"],["rowspan","3","colspan","2"],["rowspan","3","colspan","1"],["colspan","8"],["colspan","5"],["colspan","2"],["colspan","4"],["rowspan","2"],["id","tr__empty-length",1,"text-center","text-slate-500","dark:text-slate-200"],["colspan","19"],[1,"dis-item-tb"],["colspan","4",1,"text-center"],[1,"ins-info"],["azt-track-service","mix-bank-template-uenTko-_UV","href","https://docs.azota.vn/docs/huong-dan-su-dung/de-thi/tao-de-tu-ma-tran-de","target","_blank",1,"text-primary"],["id","menu__excel_editor",1,"menu-excel"],["id","menu__excel_editor__merge",2,"display","none"],["width","25px","viewBox","0, 0, 2048, 2048","focusable","false"],["type","path","d","M 1536 973 l -256 256 l -72 -73 l 132 -132 h -734 l 132 132 l -72 73 l -256 -256 l 256 -256 l 72 72 l -132 133 h 734 l -132 -133 l 72 -72 m 563 -615 v 1741 h -1741 v -1741 m 103 308 h 717 v -205 h -717 m 717 1536 v -205 h -717 v 205 m 1536 -205 h -717 v 205 h 717 m 0 -1229 h -1536 v 922 h 1536 m 0 -1229 h -717 v 205 h 717 z",2,"fill","rgba(250, 250, 250, 1)"],["type","path","d","M 154 1792 v -1638 h 1638 v 1638 z",2,"fill","rgba(250, 250, 250, 1)"],["type","path","d","M 1024 410 h -102 v -205 h 102 m 0 1536 h -102 v -205 h 102 z",2,"fill","rgba(121, 119, 116, 1)"],["type","path","d","M 1843 102 v 1741 h -1741 v -1741 m 103 1639 h 1536 v -1536 h -1536 z",2,"fill","rgba(58, 58, 56, 1)"],["type","path","d","M 1843 410 v 1126 h -1741 v -1126 m 103 1024 h 1536 v -922 h -1536 z",2,"fill","rgba(30, 139, 205, 1)"],["type","path","d","M 1536 973 l -256 256 l -72 -73 l 132 -132 h -734 l 132 132 l -72 73 l -256 -256 l 256 -256 l 72 72 l -132 133 h 734 l -132 -133 l 72 -72 z",2,"fill","rgba(30, 139, 205, 1)"],[1,"menu-content"],["id","menu__excel_editor__un_merge",2,"display","none"],["width","25px","viewBox","0,0,2048,2048","focusable","false"],["type","path","d","M 1843 102 v 1741 h -1741 v -1741 m 103 512 h 717 v -409 h -717 m 1229 1024 h 307 v -512 h -307 m -103 0 h -307 v 512 h 307 m -819 -512 h -307 v 512 h 307 m 102 0 h 308 v -512 h -308 m 308 1024 v -410 h -717 v 410 m 1536 -410 h -717 v 410 h 717 m 0 -1127 v -409 h -717 v 409 z"],["type","path","d","M 1024 1331 v 410 h -102 v -410 m 0 -614 v -512 h 102 v 512 z",2,"fill","rgba(121, 119, 116, 1)"],["type","path","d","M 1843 102 v 1741 h -1741 v -1741 m 1639 103 h -1536 v 1536 h 1536 z",2,"fill","rgba(58, 58, 56, 1)"],["type","path","d","M 1843 614 v 717 h -1741 v -717 m 410 615 v -512 h -307 v 512 m 717 0 v -512 h -308 v 512 m 717 0 v -512 h -307 v 512 m 717 -512 h -307 v 512 h 307 z",2,"fill","rgba(30, 139, 205, 1)"],["class","loading-mess",4,"ngIf"],[1,"header-fx-item",3,"formGroup"],["for","",1,"mr-2","flex-none",2,"width","55px"],["formControlName","schoolLevel",1,"form-select","form-select-sm",3,"change"],["value","0","disabled","",3,"selected"],[3,"value","selected",4,"ngFor","ngForOf"],["for","",1,"ml-2","mr-2","flex-none",2,"width","55px"],["formControlName","schoolSubject",1,"form-select","form-select-sm",3,"change"],[3,"value","selected"],[1,"mx-1","border-slate-200","dark:border-darkmode-400"],["azt-track-service","mix-bank-template-8PSLx-wsAL",1,"dropdown-item",3,"click"],[3,"ngStyle","ngClass"],["mat-icon-button","","disabled",""],["azt-track-service","mix-bank-template-wg2qiwIfQ",1,"title-box","flex",2,"cursor","pointer","align-items","center",3,"click"],[4,"ngIf"],[1,"text-matrix-title","ml-3",2,"word-break","break-all"],[3,"content"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"w-6","h-6","mr-2","text-slate-600","dark:text-slate-500"],["d","M9.828 3h3.982a2 2 0 0 1 1.992 2.181l-.637 7A2 2 0 0 1 13.174 14H2.825a2 2 0 0 1-1.991-1.819l-.637-7a1.99 1.99 0 0 1 .342-1.31L.5 3a2 2 0 0 1 2-2h3.672a2 2 0 0 1 1.414.586l.828.828A2 2 0 0 0 9.828 3zm-8.322.12C1.72 3.042 1.95 3 2.19 3h5.396l-.707-.707A1 1 0 0 0 6.172 2H2.5a1 1 0 0 0-1 .981l.006.139z"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","aria-describedby","cdk-describedby-message-serverApp-1-31","cdk-describedby-host","serverApp-1",1,"mr-0","w-6","h-6","text-pending","mr-2"],["d","M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],["points","14 2 14 8 20 8"],["d","m9 15 2 2 4-4"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["x1","16","y1","13","x2","8","y2","13"],["x1","16","y1","17","x2","8","y2","17"],["x1","10","y1","9","x2","8","y2","9"],["mat-icon-button","","matTreeNodeToggle","",3,"disabled"],[1,"mat-icon-rtl-mirror"],["azt-track-service","mix-bank-template-dDNwOKdL6l",1,"title-box",2,"cursor","pointer",3,"click"],[1,"text-matrix-title"],["class","w-4 h-4 inline-block ml-2",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","aria-describedby","cdk-describedby-message-serverApp-1-31","cdk-describedby-host","serverApp-1",1,"mat-tooltip-trigger","w-6","h-6","text-pending","ng-star-inserted"],[1,"w-4","h-4","inline-block","ml-2"],[1,"loading-mess"],[1,"loading-content"],[1,"icon-msg"],[1,"w-4","h-4","inline-block","mr-2"],[1,"text-msg"]],template:function(t,i){if(1&t&&(e.TgZ(0,"editor-layout",0),e.NdJ("handleCancel",function(){return i.cancelChangeContent()})("handleConfirm",function(){return i.saveAction()}),e.YNc(1,fZ,1,1,"azt-loading-effect",1),e.YNc(2,BZ,203,147,"ng-template",null,2,e.W1O),e.qZA()),2&t){const a=e.MAs(3);e.Q6J("headerBackToLink",i.backToLink)("showConfirmButton",!0),e.xp6(1),e.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a)}},dependencies:[F.mk,F.sg,F.O5,F.PC,ds.RK,Yo.Hw,Qi.VK,Qi.p6,_c.fQ,_c.eu,_c.gi,_c.uo,k.KC,h._Y,h.YN,h.Kr,h.Fj,h.EJ,h.JJ,h.JL,h.On,h.sg,h.u,vi.l,wt.M,wi.n,bm.O,Qg.Z,ye.JV,ye.Tu],styles:['.header-mix-bank[_ngcontent-%COMP%]{padding:5px 20px;display:flex;flex-wrap:wrap;justify-content:space-between;align-items:center}.header-mix-bank[_ngcontent-%COMP%]   .bank-his-matrix[_ngcontent-%COMP%]{height:-moz-fit-content;height:fit-content;display:flex;justify-content:center;align-items:center}.header-mix-bank[_ngcontent-%COMP%]   .name-block[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;align-items:center}.header-mix-bank[_ngcontent-%COMP%]   .name-block[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{margin-right:10px}.header-mix-bank[_ngcontent-%COMP%]   .name-block[_ngcontent-%COMP%]   .has-err[_ngcontent-%COMP%]{border:1px solid red!important}.header-mix-bank[_ngcontent-%COMP%]   .name-block[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:500px;padding:5px 10px;border-radius:5px;margin-right:15px}.header-mix-bank[_ngcontent-%COMP%]   .header-fx-item[_ngcontent-%COMP%]{display:flex;align-items:center}.btn-save[_ngcontent-%COMP%]{background-color:#2361ae;line-height:30px;margin-top:5px;text-transform:none}.btn-save[_ngcontent-%COMP%]:hover{background-color:#2e8cff}.btn-save.mat-button-disabled[_ngcontent-%COMP%]{background-color:#0000001f}.btn-cancel[_ngcontent-%COMP%]{background-color:#d0d0d0;line-height:30px;margin-top:5px;text-transform:none}.btn-cancel[_ngcontent-%COMP%]:hover{background-color:#a3a3a3}.btn-cancel.mat-button-disabled[_ngcontent-%COMP%]{background-color:#0000001f}.loading-mess[_ngcontent-%COMP%]{width:100vw;height:100vh;position:fixed;z-index:9;top:0;left:0;display:flex;justify-content:center;align-items:center;background-color:#0006}.loading-content[_ngcontent-%COMP%]{text-align:center;color:#000}.loading-content[_ngcontent-%COMP%]   .text-msg[_ngcontent-%COMP%]{font-size:20px;margin-top:10px;background-color:#f0f8ffa3;padding:10px;border-radius:5px}  .main-mix-blank{width:100%;height:calc(100vh - 115px);display:flex}  .main-mix-blank .col-tree{position:relative;height:100%;overflow:hidden;width:25%;border-right:1px dotted #7f7f7f}  .main-mix-blank .col-tree-main{overflow:hidden;height:calc(100% - 54px)}  .main-mix-blank .col-tree .filler-node{position:sticky;bottom:0;padding:10px;border-top:1px dotted #e0e0e0}  .main-mix-blank .col-tree .filler-node input{width:100%;padding:5px 10px}  .main-mix-blank .col-tree mat-tree-node mat-icon{color:#37474f;width:30px}  .main-mix-blank .col-tree mat-tree-node string{width:100%;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;overflow:hidden;cursor:pointer}  .main-mix-blank .col-tree mat-tree-node .icon--folder{color:#ff9800}  .main-mix-blank .col-tree mat-tree-node .icon--article{color:#2196f3}  .main-mix-blank .col-tree mat-tree-node:hover mat-icon{color:#3f51b5}  .main-mix-blank .col-tree mat-tree-node:hover span{color:#3f51b5}  .main-mix-blank .col-tree .tb-active mat-icon{color:#3f51b5}  .main-mix-blank .col-tree .tb-active span{color:#3f51b5}  .main-mix-blank .col-table{width:75%;margin:20px 0;padding:0 20px;overflow:auto}  .main-mix-blank .table-main{position:relative}  .main-mix-blank .table-main td,   .main-mix-blank .table-main th{box-shadow:1px 1px #000 inset;-webkit-user-select:none;user-select:none}  .main-mix-blank .table-main table{position:relative;border-right:1px solid #000;border-bottom:1px solid #000;width:100%}  .main-mix-blank .table-main table thead{position:sticky;top:0;z-index:2}  .main-mix-blank .table-main table tfoot{position:sticky;bottom:0;box-shadow:0 1px #000 inset}  .main-mix-blank .table-main td{padding:10px}  .main-mix-blank .table-main .note-edit-item-tb:before{position:absolute;z-index:3;width:-moz-fit-content;width:fit-content;display:block;background:#fff59d;padding:5px;border-radius:5px;color:#263238;width:200px;top:0;right:0;transform:translate(-5px,calc(-100% - 5px));box-shadow:#00000005 0 1px 3px,#1b1f2326 0 0 0 1px}  .main-mix-blank .table-main .note-edit-item-tb:focus-visible:before{content:attr(first-trans) ": " attr(num-tn) "; " attr(second-trans) ": " attr(num-ds) "; " attr(third-trans) ": " attr(num-dt) "; " attr(last-trans) ": " attr(num-tl) "";white-space:pre-wrap}  .main-mix-blank .table-main .warning-item:after,   .main-mix-blank .table-main .common-warning-item:after{content:"\\e000";position:absolute;font-family:Material Icons;color:#ff9800;font-size:12px;top:0;right:3px;opacity:.5}  .main-mix-blank .table-main .warning-item:hover:after,   .main-mix-blank .table-main .common-warning-item:after{cursor:pointer}  .main-mix-blank .table-main .common-warning-item:after{color:red;font-size:15px;top:2px}  .main-mix-blank .table-main .common-note-item:hover:before{content:attr(common-note-trans);position:absolute;background:#fff59d;z-index:3;color:#000;width:200px;top:0;right:0;transform:translate(-5px,calc(-100% - 5px));padding:5px;border-radius:5px;box-shadow:#00000005 0 1px 3px,#1b1f2326 0 0 0 1px;display:block}  .main-mix-blank .table-main .wn-empty:hover:before{content:attr(empty-question-trans);background:#ff9800;z-index:3;color:#fff}  .main-mix-blank .table-main .wn-over-tn:hover:before{content:attr(over-question-trans-tn);background:#ff9800;z-index:3;color:#fff}  .main-mix-blank .table-main .wn-over-tl:hover:before{content:attr(over-question-trans-tl);background:#ff9800;z-index:3;color:#fff}  .main-mix-blank .table-main .wn-over-ds:hover:before{content:attr(over-question-trans-ds);background:#ff9800;z-index:3;color:#fff}  .main-mix-blank .table-main .wn-over-dt:hover:before{content:attr(over-question-trans-dt);background:#ff9800;z-index:3;color:#fff}  .main-mix-blank .table-main .edit-item-tb{text-align:center;position:relative}  .main-mix-blank .table-main .edit-item-tb:focus-visible{background-color:#fff;color:#000}  .main-mix-blank .table-main .header-tb{background-color:#c8e6c9;text-align:center;font-weight:600}  .main-mix-blank .table-main .header-tb td:hover{background-color:#c8e6c9}  .main-mix-blank .table-main .dis-item-tb{background-color:#cfd8dc;color:#2a3545}  .main-mix-blank .table-main .dis-item-tb td:hover{background-color:#cfd8dc!important}  .main-mix-blank .table-main .dis-item-tb:hover{background-color:#cfd8dc!important}  .main-mix-blank .table-main .text-center{text-align:center}  .main-mix-blank .table-main .no-background{background:#fff!important}  .main-mix-blank .table-main .no-background:hover{background:#fff!important}  .main-mix-blank .table-main table .select{background:#c7e5ff!important}  .main-mix-blank .table-main .menu-excel{display:none;width:-moz-fit-content;width:fit-content;background:#fff;border:1px solid #3f51b5;position:absolute;box-shadow:#00000059 0 5px 15px}  .main-mix-blank .table-main .menu-excel li{padding:10px;list-style:none;display:flex;justify-content:space-between;align-items:center;cursor:pointer}  .main-mix-blank .table-main .menu-excel li:hover{background:rgba(200,230,201,.231372549)}  .main-mix-blank .table-main .menu-excel li svg{margin-right:10px}  .main-mix-blank .table-main .border-err{border:1px solid #f44336!important;outline:1px solid #f44336!important}  .main-mix-blank .table-main .tb-matrix-editor-trash-node{cursor:pointer;width:20px}  .main-mix-blank .table-main .tb-matrix-editor-trash-node:hover{color:#f44336}  .main-mix-blank .table-main thead td{font-weight:400}.header-mix-bank[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .menu-item[_ngcontent-%COMP%]{text-transform:none}.ins-info[_ngcontent-%COMP%]{padding-top:15px;font-style:italic}@media (max-width: 768px){.bank-name-block[_ngcontent-%COMP%], .input[_ngcontent-%COMP%]{width:100%}.input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%!important;margin-bottom:5px}.main-mix-blank[_ngcontent-%COMP%]{flex-wrap:wrap;height:100%!important}.col-tree[_ngcontent-%COMP%]{width:100%!important;height:50vh!important;padding:10px 10px 0;--tw-border-opacity: 1;border:1px solid;border-color:rgb(var(--color-slate-200)/var(--tw-border-opacity))}.col-tree[_ngcontent-%COMP%]   .filler-node[_ngcontent-%COMP%]{padding:5px!important}.col-table[_ngcontent-%COMP%]{width:calc(100vw - 20px)!important;padding-bottom:30px}}.text-matrix-title[_ngcontent-%COMP%]{cursor:pointer;text-align:justify}.d-none[_ngcontent-%COMP%]{display:none!important}@media (max-width: 640px){.d-block[_ngcontent-%COMP%]{display:block!important}.name-block[_ngcontent-%COMP%]{width:90vw}}']}),n})();function QZ(n,o){if(1&n&&e._UZ(0,"azt-loading-effect",2),2&n){const t=e.oxw();e.Q6J("currentStatusObj",t.statusObj)}}function FZ(n,o){if(1&n&&e._UZ(0,"preview-offline-exam",9),2&n){const t=e.oxw(3);e.Q6J("isDialog",!1)("offlineExportObj",t.offlineExportObj)("curOfflineMixQuestionObj",t.offlineExportObj.offlineMixQuestionObjs[0])("backToLink",t.backToLink)}}function NZ(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"h3",6),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.TgZ(4,"div",7),e.YNc(5,FZ,1,4,"preview-offline-exam",8),e.qZA(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(2),e.hij(" ",e.lcZ(3,2,"lang_auto_dap_an_de_thi_offline")," "),e.xp6(3),e.Q6J("ngIf",t.offlineExportObj&&t.offlineExportObj.offlineMixQuestionObjs&&t.offlineExportObj.offlineMixQuestionObjs[0])}}function ZZ(n,o){1&n&&(e.TgZ(0,"div",10)(1,"div",11),e.O4$(),e.TgZ(2,"svg",12),e._UZ(3,"path",13)(4,"path",14)(5,"path",15)(6,"path",16)(7,"path",17)(8,"path",18),e.qZA()(),e.kcU(),e.TgZ(9,"div",19),e._uU(10),e.ALo(11,"mytranslate"),e.qZA()()),2&n&&(e.xp6(10),e.hij(" ",e.lcZ(11,1,"lang_auto_khong_co_du_lieu_dap_an_de_thi")," "))}function DZ(n,o){if(1&n&&(e.TgZ(0,"div",3),e.YNc(1,NZ,6,4,"ng-container",4),e.YNc(2,ZZ,12,3,"ng-template",null,5,e.W1O),e.qZA()),2&n){const t=e.MAs(3),i=e.oxw();e.xp6(1),e.Q6J("ngIf",null==i.offlineExportObj||null==i.offlineExportObj.offlineMixQuestionObjs?null:i.offlineExportObj.offlineMixQuestionObjs.length)("ngIfElse",t)}}let UZ=(()=>{class n extends xe.Q{getData(){this.initStatusObj();let t=this.getMyParam(this.activeRoute,"hash_id")??"";this.waitDestroy(this.offlineExamExportService.apiOfflineExamExportExportResultOfAllOfflineMixQuestionHashIdGet(t).subscribe(i=>{1==i.success?(this.offlineExportObj=i.data?.obj,this.backToLink=`/admin/testbank/offline-answer-list/${this.offlineExportObj?.examObj?.categoryId??0}/${this.offlineExportObj?.examObj?.hashId}`,this.successStatusObj()):this.errorStatusObj(i.message??"",!0)}))}changeViewHashId(t){this.indexHashId=t}replace3DigitExamCode(t){for(var i=t.toString();i.length<3;)i="0"+i;return i}ngOnInit(){this.getData(),super.ngOnInit()}constructor(t,i){super(),this.activeRoute=t,this.offlineExamExportService=i,this.indexHashId=0}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(E.gz),e.Y36(Za.qr))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-offline-answer-list"]],features:[e.qOj],decls:3,vars:2,consts:[[3,"currentStatusObj",4,"ngIf","ngIfElse"],["doneLoading",""],[3,"currentStatusObj"],[1,"mt-8","mx-auto",2,"max-width","1200px"],[4,"ngIf","ngIfElse"],["noDataAnswer",""],[1,"font-medium","text-center"],[1,"mt-4"],[3,"isDialog","offlineExportObj","curOfflineMixQuestionObj","backToLink",4,"ngIf"],[3,"isDialog","offlineExportObj","curOfflineMixQuestionObj","backToLink"],[1,"empty-block","mt-10"],[1,"icon-empty","flex"],["width","87","height","102","viewBox","0 0 87 102","fill","none","xmlns","http://www.w3.org/2000/svg",1,"mx-auto"],["fill-rule","evenodd","clip-rule","evenodd","d","M66.6719 13.9999L75.9738 81.8427L76.8095 88.649C77.0787 90.8417 75.5194 92.8374 73.3268 93.1066L14.7665 100.297C12.5739 100.566 10.5781 99.0069 10.3089 96.8142L1.29312 23.3867C1.1585 22.2904 1.93813 21.2925 3.03447 21.1579C3.0414 21.157 3.04832 21.1562 3.05526 21.1554L7.91363 20.6104M11.8422 20.1698L16.4292 19.6552Z","fill","white"],["d","M67.9103 13.8302C67.8165 13.1462 67.186 12.6678 66.5021 12.7615C65.8181 12.8553 65.3397 13.4858 65.4335 14.1697L67.9103 13.8302ZM75.9738 81.8427L77.2144 81.6903C77.2137 81.6845 77.213 81.6787 77.2122 81.6729L75.9738 81.8427ZM76.8095 88.649L78.0502 88.4967L76.8095 88.649ZM73.3268 93.1066L73.4791 94.3473L73.3268 93.1066ZM14.7665 100.297L14.9189 101.538L14.7665 100.297ZM10.3089 96.8142L11.5496 96.6619L10.3089 96.8142ZM3.05526 21.1554L3.1946 22.3976L3.05526 21.1554ZM8.05297 21.8527C8.73902 21.7757 9.23279 21.1572 9.15584 20.4711C9.07888 19.7851 8.46034 19.2913 7.77428 19.3682L8.05297 21.8527ZM11.7028 18.9276C11.0168 19.0045 10.523 19.6231 10.5999 20.3091C10.6769 20.9952 11.2954 21.4889 11.9815 21.412L11.7028 18.9276ZM16.5685 20.8974C17.2546 20.8205 17.7484 20.2019 17.6714 19.5159C17.5945 18.8298 16.9759 18.3361 16.2899 18.413L16.5685 20.8974ZM65.4335 14.1697L74.7354 82.0125L77.2122 81.6729L67.9103 13.8302L65.4335 14.1697ZM74.7331 81.995L75.5688 88.8013L78.0502 88.4967L77.2144 81.6903L74.7331 81.995ZM75.5688 88.8013C75.7539 90.3088 74.6819 91.6809 73.1744 91.866L73.4791 94.3473C76.357 93.994 78.4035 91.3745 78.0502 88.4967L75.5688 88.8013ZM73.1744 91.866L14.6142 99.0563L14.9189 101.538L73.4791 94.3473L73.1744 91.866ZM14.6142 99.0563C13.1067 99.2414 11.7347 98.1694 11.5496 96.6619L9.0682 96.9666C9.42156 99.8445 12.041 101.891 14.9189 101.538L14.6142 99.0563ZM11.5496 96.6619L2.5338 23.2344L0.0524334 23.539L9.0682 96.9666L11.5496 96.6619ZM2.5338 23.2344C2.48332 22.8232 2.77568 22.449 3.18681 22.3986L2.88213 19.9172C1.10059 20.1359 -0.166313 21.7575 0.0524334 23.539L2.5338 23.2344ZM3.18681 22.3986C3.1894 22.3982 3.192 22.3979 3.1946 22.3976L2.91592 19.9132C2.90465 19.9145 2.89339 19.9158 2.88213 19.9172L3.18681 22.3986ZM3.1946 22.3976L8.05297 21.8527L7.77428 19.3682L2.91592 19.9132L3.1946 22.3976ZM11.9815 21.412L16.5685 20.8974L16.2899 18.413L11.7028 18.9276L11.9815 21.412Z","fill","#1F64E7"],["fill-rule","evenodd","clip-rule","evenodd","d","M64.14 18.2692L72.5596 79.7529L73.3169 85.9212C73.5609 87.9083 72.1669 89.7146 70.2033 89.9557L17.7613 96.3948C15.7978 96.6359 14.0082 95.2204 13.7642 93.2333L5.61416 26.8568C5.47955 25.7605 6.25918 24.7626 7.35551 24.628L13.8431 23.8314","fill","#E8F0FE"],["d","M23.6719 1.25H69.2286C69.9577 1.25 70.6569 1.5395 71.1726 2.05485L84.6158 15.4898C85.1319 16.0056 85.4219 16.7053 85.4219 17.4349V80C85.4219 81.5188 84.1907 82.75 82.6719 82.75H23.6719C22.1531 82.75 20.9219 81.5188 20.9219 80V4C20.9219 2.48122 22.1531 1.25 23.6719 1.25Z","fill","white","stroke","#1F64E7","stroke-width","2.5"],["d","M69.6719 2.40283V14C69.6719 15.6569 71.015 17 72.6719 17H80.6055","stroke","#1F64E7","stroke-width","2.5","stroke-linecap","round","stroke-linejoin","round"],["d","M31 17H57M31 29H74M31 42H74M31 55H74M31 68H57","stroke","#75A4FE","stroke-width","2.5","stroke-linecap","round","stroke-linejoin","round"],[1,"text-center","font-medium","mt-4"]],template:function(t,i){if(1&t&&(e.YNc(0,QZ,1,1,"azt-loading-effect",0),e.YNc(1,DZ,4,2,"ng-template",null,1,e.W1O)),2&t){const a=e.MAs(2);e.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a)}},dependencies:[F.O5,vi.l,gw,ye.JV],encapsulation:2}),n})();var Lw=I(33024),jZ=I(24465);const qZ=function(n){return{"box-select":n}},RZ=function(n){return{active:n}};function zZ(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",2)(1,"img",3),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.ChooseTemplate(r.id?r.id:0))}),e.ALo(2,"mycdn"),e.qZA()()}if(2&n){const t=o.$implicit,i=e.oxw();e.Q6J("ngClass",e.VKq(5,qZ,i.template_selected_id===t.id)),e.xp6(1),e.s9C("src",e.lcZ(2,3,t.thumb),e.LSH),e.Q6J("ngClass",e.VKq(7,RZ,i.template_selected_id===t.id))}}let HZ=(()=>{class n extends xe.Q{constructor(){super(...arguments),this.templates=[],this.template_selected_id=0,this.change_template=new e.vpe}ChooseTemplate(t){t!==this.template_selected_id&&this.change_template.emit(t)}}return n.\u0275fac=function(){let o;return function(i){return(o||(o=e.n5z(n)))(i||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["app-choose-question-form"]],inputs:{templates:"templates",template_selected_id:"template_selected_id"},outputs:{change_template:"change_template"},features:[e.qOj],decls:4,vars:4,consts:[[1,"box-title","bg-slate-900","dark:bg-darkmode-400"],["class","box-item",3,"ngClass",4,"ngFor","ngForOf"],[1,"box-item",3,"ngClass"],["azt-track-service","choose-question-form-Irw33xRlJC","alt","",1,"noChooseTemplate",3,"ngClass","src","click"]],template:function(t,i){1&t&&(e.TgZ(0,"p",0),e._uU(1),e.ALo(2,"mytranslate"),e.qZA(),e.YNc(3,zZ,3,9,"div",1)),2&t&&(e.xp6(1),e.Oqu(e.lcZ(2,2,"lang_auto_chon_mau_hien_thi_cau_hoi_upper")),e.xp6(2),e.Q6J("ngForOf",i.templates))},dependencies:[F.mk,F.sg,ye.JV,ye.QN],styles:['.box-title[_ngcontent-%COMP%]{text-align:center;font-size:large;padding:10px;border-radius:5px 5px 0 0;background:rgb(var(--color-primary));color:#fff;font-weight:500}.box-item[_ngcontent-%COMP%]{cursor:pointer;margin:10px;position:relative}.box-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:10px}.box-select[_ngcontent-%COMP%]:before{content:"";background:rgb(var(--color-primary));width:15px;height:15px;position:absolute;border-radius:50%;top:5px;left:5px}.active[_ngcontent-%COMP%]{border:2px solid rgb(var(--color-primary));box-shadow:#091e4240 0 4px 8px -2px,#091e4214 0 0 0 1px}']}),n})();var JZ=I(87974),KZ=I(14041),GZ=I(67757),YZ=I(72969);const $Z=["left_element_box"],VZ=["right_element_box"];function WZ(n,o){1&n&&(e.O4$(),e.kcU(),e.TgZ(0,"span")(1,"span",24),e._UZ(2,"azt-loading-ui"),e.qZA()())}function XZ(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"a",31),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw(4);return e.KtG(s.redirectShowDetail(r))}),e._uU(2),e.ALo(3,"mytranslate"),e.ALo(4,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.qZA()()}if(2&n){const t=o.$implicit;e.xp6(2),e.AsE(" ",e.lcZ(3,2,"lang_testbank_powerpoint_date")," ",e.lcZ(4,4,t.createdAt)," ")}}function eD(n,o){if(1&n&&(e.O4$(),e.kcU(),e.TgZ(0,"div",25)(1,"span"),e._uU(2),e.ALo(3,"mytranslate"),e.ALo(4,"mytranslate"),e.qZA(),e.TgZ(5,"a",26),e._uU(6),e.ALo(7,"mytranslate"),e.qZA(),e.TgZ(8,"mat-menu",null,27)(10,"div",28)(11,"ul",29),e.YNc(12,XZ,5,6,"li",30),e.qZA()()()()),2&n){const t=e.MAs(9),i=e.oxw(3);e.xp6(2),e.lnq("",e.lcZ(3,6,"lang_testbank_powerpoint_used")," ",(null==i.examObj?null:i.examObj.powerpointLinks)&&(null==i.examObj||null==i.examObj.powerpointLinks?null:i.examObj.powerpointLinks.length)," ",e.lcZ(4,8,"lang_testbank_powerpoint_times"),""),e.xp6(3),e.Q6J("matMenuTriggerFor",t),e.xp6(1),e.Oqu(e.lcZ(7,10,"lang_testbank_powerpoint_see_detail")),e.xp6(6),e.Q6J("ngForOf",null==i.examObj?null:i.examObj.powerpointLinks)}}function tD(n,o){1&n&&(e.O4$(),e.kcU(),e.TgZ(0,"span")(1,"span",24),e._UZ(2,"azt-loading-ui"),e.qZA()())}function nD(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"a",43),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw(5);return e.KtG(s.redirectShowDetail(r))}),e._uU(2),e.ALo(3,"mytranslate"),e.ALo(4,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.qZA()()}if(2&n){const t=o.$implicit;e.xp6(2),e.AsE(" ",e.lcZ(3,2,"lang_testbank_powerpoint_date")," ",e.lcZ(4,4,t.createdAt)," ")}}function iD(n,o){if(1&n&&(e.O4$(),e.kcU(),e.TgZ(0,"div",41)(1,"span"),e._uU(2),e.ALo(3,"mytranslate"),e.ALo(4,"mytranslate"),e.qZA(),e.TgZ(5,"a",26),e._uU(6),e.ALo(7,"mytranslate"),e.qZA(),e.TgZ(8,"mat-menu",null,42)(10,"div",28)(11,"ul",29),e.YNc(12,nD,5,6,"li",30),e.qZA()()()()),2&n){const t=e.MAs(9),i=e.oxw().$implicit;e.xp6(2),e.lnq("",e.lcZ(3,6,"lang_testbank_powerpoint_used")," ",i.powerpointLinks.length," ",e.lcZ(4,8,"lang_testbank_powerpoint_times"),""),e.xp6(3),e.Q6J("matMenuTriggerFor",t),e.xp6(1),e.Oqu(e.lcZ(7,10,"lang_testbank_powerpoint_see_detail")),e.xp6(6),e.Q6J("ngForOf",i.powerpointLinks)}}function oD(n,o){if(1&n&&e._UZ(0,"azt-template-one",44),2&n){const t=e.oxw(),a=t.index;e.Q6J("questionObj",t.$implicit)("indexQuestion",a)("isAnswer",!0)}}function aD(n,o){if(1&n&&e._UZ(0,"azt-template-two",44),2&n){const t=e.oxw(),a=t.index;e.Q6J("questionObj",t.$implicit)("indexQuestion",a)("isAnswer",!0)}}function rD(n,o){if(1&n&&e._UZ(0,"azt-template-three",44),2&n){const t=e.oxw(),a=t.index;e.Q6J("questionObj",t.$implicit)("indexQuestion",a)("isAnswer",!0)}}function sD(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",32)(1,"div",33)(2,"div",34)(3,"div",35),e._uU(4),e.ALo(5,"mytranslate"),e.qZA(),e.TgZ(6,"button",36),e.NdJ("click",function(){const r=e.CHM(t).index,s=e.oxw(3);return e.KtG(s.generateLinkAction(r))}),e.O4$(),e.TgZ(7,"svg",15),e._UZ(8,"rect",16)(9,"path",17),e.qZA(),e._uU(10),e.ALo(11,"mytranslate"),e.YNc(12,tD,3,0,"span",18),e.qZA()(),e.YNc(13,iD,13,12,"div",37),e.qZA(),e.kcU(),e.TgZ(14,"div",38)(15,"container-element",39),e.YNc(16,oD,1,3,"azt-template-one",40),e.YNc(17,aD,1,3,"azt-template-two",40),e.YNc(18,rD,1,3,"azt-template-three",40),e.qZA()()()}if(2&n){const t=o.$implicit,i=o.index,a=e.oxw(3);e.xp6(4),e.AsE("",e.lcZ(5,9,"lang_testbank_powerpoint_question")," ",i+1,""),e.xp6(6),e.hij(" ",e.lcZ(11,11,"lang_testbank_powerpoint_copy_link_question")," "),e.xp6(2),e.Q6J("ngIf",t.isLoading&&!0===t.isLoading),e.xp6(1),e.Q6J("ngIf",0!=(null==t.powerpointLinks?null:t.powerpointLinks.length)),e.xp6(2),e.Q6J("ngSwitch",null==a.templateObj?null:a.templateObj.id),e.xp6(1),e.Q6J("ngSwitchCase",1),e.xp6(1),e.Q6J("ngSwitchCase",2),e.xp6(1),e.Q6J("ngSwitchCase",3)}}function lD(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",9,10)(2,"div",11)(3,"div",12)(4,"div",13),e._uU(5),e.qZA(),e.TgZ(6,"button",14),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.generateLinkAction())}),e.O4$(),e.TgZ(7,"svg",15),e._UZ(8,"rect",16)(9,"path",17),e.qZA(),e._uU(10),e.ALo(11,"mytranslate"),e.YNc(12,WZ,3,0,"span",18),e.qZA()(),e.YNc(13,eD,13,12,"div",19),e.qZA(),e.kcU(),e.TgZ(14,"div")(15,"button",20),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.redirectToYTB())}),e._UZ(16,"img",21),e.ALo(17,"convertCdnLinkOfGitHub"),e._uU(18),e.ALo(19,"mytranslate"),e.qZA()(),e.TgZ(20,"div",22),e.YNc(21,sD,19,13,"div",23),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(5),e.Oqu(null==t.examObj?null:t.examObj.name),e.xp6(5),e.hij(" ",e.lcZ(11,7,"lang_testbank_powerpoint_copy_link_exam")," "),e.xp6(2),e.Q6J("ngIf",(null==t.examObj?null:t.examObj.isLoading)&&!0===(null==t.examObj?null:t.examObj.isLoading)),e.xp6(1),e.Q6J("ngIf",(null==t.examObj?null:t.examObj.powerpointLinks)&&0!=(null==t.examObj||null==t.examObj.powerpointLinks?null:t.examObj.powerpointLinks.length)),e.xp6(3),e.Q6J("src",e.lcZ(17,9,"images/iconYoutube.svg"),e.LSH),e.xp6(2),e.hij(" ",e.lcZ(19,11,"lang_testbank_powerpoint_see_tutorial")," "),e.xp6(3),e.Q6J("ngForOf",t.questionObjs)}}function cD(n,o){if(1&n&&(e.TgZ(0,"div",45)(1,"div",11)(2,"div",12)(3,"div",13),e._uU(4),e.qZA()(),e.TgZ(5,"div",46)(6,"div",47),e._UZ(7,"img",48),e.ALo(8,"convertCdnLinkOfGitHub"),e._uU(9),e.ALo(10,"mytranslate"),e.qZA()()(),e.TgZ(11,"div",22)(12,"div",49),e._uU(13),e.ALo(14,"mytranslate"),e.qZA()()()),2&n){const t=e.oxw(2);e.xp6(4),e.Oqu(null==t.examObj?null:t.examObj.name),e.xp6(3),e.Q6J("src",e.lcZ(8,4,"images/iconYoutube.svg"),e.LSH),e.xp6(2),e.hij(" ",e.lcZ(10,6,"lang_testbank_powerpoint_see_tutorial")," "),e.xp6(4),e.Oqu(e.lcZ(14,8,"lang_testbank_powerpoint_note_toturial"))}}function uD(n,o){1&n&&(e.TgZ(0,"div",45)(1,"div",22)(2,"div",50)(3,"span",51),e._UZ(4,"azt-loading-ui"),e.qZA(),e.TgZ(5,"span",52),e._uU(6),e.ALo(7,"mytranslate"),e.qZA()()()()),2&n&&(e.xp6(6),e.hij(" ",e.lcZ(7,1,"lang_testbank_powerpoint_data_sample"),""))}function dD(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",3)(1,"div",4,5)(3,"app-choose-question-form",6),e.NdJ("change_template",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.changeTemplate(a))}),e.qZA()(),e.YNc(4,lD,22,13,"div",7),e.YNc(5,cD,15,10,"div",8),e.YNc(6,uD,8,3,"div",8),e.qZA()}if(2&n){const t=e.oxw();e.xp6(3),e.Q6J("templates",t.templatesObjs),e.xp6(1),e.Q6J("ngIf",t.isSupport&&t.isLoading),e.xp6(1),e.Q6J("ngIf",!t.isSupport&&t.isLoading),e.xp6(1),e.Q6J("ngIf",!t.isLoading)}}function mD(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",53),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.isShowVideo=!1)}),e.TgZ(1,"div",54)(2,"div",55)(3,"div",56),e._uU(4),e.ALo(5,"mytranslate"),e.qZA(),e.TgZ(6,"div",57)(7,"mat-icon",58),e._uU(8,"close"),e.qZA()()(),e.TgZ(9,"div",59),e._UZ(10,"azt-video-embed",60),e.qZA()()()}2&n&&(e.xp6(4),e.Oqu(e.lcZ(5,4,"lang_testbank_powerpoint_video_tutorial")),e.xp6(6),e.Akn("width:560px;height:315px;"),e.Q6J("cdnLink","https://www.youtube.com/embed/FpcOtHNGMCQ"))}let pD=(()=>{class n extends xe.Q{generateLinkAction(t){this.examObj&&(void 0!==t?this.questionObjs?.forEach(i=>{this.questionObjs?.[t].id===i.id&&(i.isLoading=!0)}):this.examObj={...this.examObj,isLoading:!0},this.powerPointLinkService.apiPowerPointLinkGenerateLinkObjPost({examId:void 0!==t?0:this.exam_id,questionId:void 0!==t?this.questionObjs?.[t].id:0,templateId:this.templateObj?.id??0}).subscribe(i=>{if(1==i.success){this.showSuccessSnack("lang_auto_copy_link_thanh_cong");const a=document.createElement("textarea");if(a.value=`${Z.N.base_embed_link}/embed_ppt/?link_id=${i.data?.obj?.id}&hash_class=${i.data?.obj?.hashCode}`,a.value=a.value.replace(/(^\w+:|^)\/\//,""),a.setAttribute("readonly",""),a.style.position="absolute",a.style.left="-9999px",document.body.appendChild(a),a.select(),document.execCommand("copy"),document.body.removeChild(a),!this.examObj)return;void 0!==t?(this.mergeLinks(this.questionObjs?.[t].powerpointLinks,i.data?.obj),this.questionObjs?.forEach(r=>{this.questionObjs?.[t].id===r.id&&(r.isLoading=!1)})):(this.mergeLinks(this.examObj?.powerpointLinks,i.data?.obj),this.examObj={...this.examObj,isLoading:!1})}else this.commonService.snackError("lang_auto_copy_link_that_bai_he_thong_khong_the_tao_link_cho_noi_dung_nay")}))}mergeLinks(t,i){for(let a=0;a<(t?.length??0);a++)if(t?.[a].id===i?.id)return;i&&t?.push(i)}redirectShowDetail(t){this.commonService.myNavigation(`/powerpoint/embed/${t.id}/${t.hashCode}`)}changeTemplate(t){this.getDataPowerPoint(t)}redirectToYTB(){window.open("https://www.youtube.com/watch?v=FpcOtHNGMCQ")}getDataPowerPoint(t){this.powerPointLinkService.apiPowerPointLinkGetObjGet(this.exam_id,t).subscribe(i=>{if(1==i.success){if(null!=i.data){this.templatesObjs=i.data?.templatesObjs,this.templateObj=i.data?.templateObj,this.examObj=i.data?.examObj;let a=this.commonService.castJsonToClassObjs(Lw.x,JSON.stringify(i.data?.questionObjs));this.questionObjs=this.homeworkExamService.changeDataQuestions(a??[])??[]}else this.isViewQuestion=!0;this.isSupport=this.homeworkExamService.isOnlyTrueFalseQuestionInList(this.questionObjs),i.data?.examObj&&this.powerpointExamService.convert(this.questionObjs,i.data?.examObj),this.isLoading=!0}else this.isViewQuestion=!0,this.showErrorSnack(i.message??""),this.isLoading=!0})}addEventElement(){document.addEventListener("scroll",()=>{this.left_element_box&&this.right_element_box&&(window.innerWidth>=1e3?(this.left_element_box.nativeElement.getBoundingClientRect().top<=-10&&(this.left_element_box.nativeElement.classList.remove("content__downtoup"),this.left_element_box.nativeElement.classList.add("content__fixed"),this.right_element_box.nativeElement.classList.add("content__rfixed")),this.right_element_box.nativeElement.getBoundingClientRect().top>=0&&(this.left_element_box.nativeElement.classList.remove("content__fixed"),this.left_element_box.nativeElement.classList.add("content__downtoup"),this.right_element_box.nativeElement.classList.remove("content__rfixed"))):(this.left_element_box.nativeElement.classList.remove("content__fixed"),this.left_element_box.nativeElement.classList.remove("content__downtoup"),this.right_element_box.nativeElement.classList.remove("content__rfixed")))})}ngOnInit(){this.commonService.translateMetaData({title:"lang_cms_question_powerpoint_title",description:"lang_cms_question_powerpoint_description",image:"lang_cms_test_image"}),this.waitDestroy((0,ne.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.exam_id=Number(this.commonService.getMyParam(this.activeRoute,"exam_id")),this.cat_id=Number(this.commonService.getMyParam(this.activeRoute,"cat_id")),this.backToLink=this.commonService.getMyQueryParam("backto")??"/admin/testbank/document-management/0/"+(this.cat_id??0)+"/1"})),this.getDataPowerPoint(),this.addEventElement(),super.ngOnInit()}constructor(t,i,a,r){super(),this.activeRoute=t,this.powerPointLinkService=i,this.homeworkExamService=a,this.powerpointExamService=r,this.backToLink="",this.exam_id=0,this.cat_id=0,this.questionObjs=[],this.isLoading=!1,this.isSupport=!1,this.isViewQuestion=!1,this.widthView=0,this.isShowVideo=!1}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(E.gz),e.Y36(un.WZ),e.Y36(eh.v),e.Y36(jZ.q))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-create-powerpoint-link"]],viewQuery:function(t,i){if(1&t&&(e.Gf($Z,5),e.Gf(VZ,5)),2&t){let a;e.iGM(a=e.CRH())&&(i.left_element_box=a.first),e.iGM(a=e.CRH())&&(i.right_element_box=a.first)}},features:[e.qOj],decls:3,vars:3,consts:[[3,"headerBackToLink"],["class","azt-ppt-content",4,"ngIf"],["azt-track-service","powerpoint-bN85gjV08DU","class","popup__video",3,"click",4,"ngIf"],[1,"azt-ppt-content"],[1,"left","box"],["left_element_box",""],[3,"templates","change_template"],["class","right box",4,"ngIf"],["class","right",4,"ngIf"],[1,"right","box"],["right_element_box",""],[1,"right__header"],[1,"right__header_lview"],[1,"right__header__exam_title"],["azt-track-service","powerpoint-N-aYwfOOF_",1,"btn","btn-outline-primary","btn-sm",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide","mr-2"],["x","9","y","9","width","13","height","13","rx","2","ry","2"],["d","M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"],[4,"ngIf"],["class","right__header_cview ml-2",4,"ngIf"],["azt-track-service","powerpoint-Zd6K5twMof",1,"btn-text-primary","ml-2",3,"click"],["alt","",1,"mr-2",3,"src"],[1,"right__content"],["class","right__content__question_item",4,"ngFor","ngForOf"],[1,"w-4","h-4","inline-block"],[1,"right__header_cview","ml-2"],[1,"btn","btn-outline-secondary","btn-sm",3,"matMenuTriggerFor"],["detailLinksExam","matMenu"],[1,"dropdown-menu","show","relative","w-56"],[1,"dropdown-content"],[4,"ngFor","ngForOf"],["azt-track-service","powerpoint-32OdBjI0q1",1,"dropdown-item",3,"click"],[1,"right__content__question_item"],[1,"right__content__question_item__header"],[1,"right__content__question_item__header_lview"],[1,"right__content__question_item__title"],["azt-track-service","powerpoint-UsKaxl1tor",1,"btn","btn-outline-primary","btn-sm",3,"click"],["class","right__content__question_item__header_rview",4,"ngIf"],[1,"right__content__question_item__content"],[3,"ngSwitch"],[3,"questionObj","indexQuestion","isAnswer",4,"ngSwitchCase"],[1,"right__content__question_item__header_rview"],["detailLinks","matMenu"],["azt-track-service","powerpoint-MYsWxijcXF",1,"dropdown-item",3,"click"],[3,"questionObj","indexQuestion","isAnswer"],[1,"right"],[1,"right__header_rview"],[1,"right__header__video"],["alt","",3,"src"],[1,"right__content_noti"],[1,"text-center","m-5"],[1,"w-4","h-4","inline-block","mr-2"],[1,"right__content_loading"],["azt-track-service","powerpoint-bN85gjV08DU",1,"popup__video",3,"click"],[1,"popup__video_box"],[1,"popup__video__header"],[1,"popup__video__header--title"],[1,"popup__video__header--close"],[1,"d-flex"],[1,"popup__video__video"],[3,"cdnLink"]],template:function(t,i){1&t&&(e.TgZ(0,"editor-layout",0),e.YNc(1,dD,7,4,"div",1),e.YNc(2,mD,11,6,"div",2),e.qZA()),2&t&&(e.Q6J("headerBackToLink",i.backToLink),e.xp6(1),e.Q6J("ngIf",0==i.isViewQuestion),e.xp6(1),e.Q6J("ngIf",i.isShowVideo))},dependencies:[F.sg,F.O5,F.RF,F.n9,Yo.Hw,Qi.VK,Qi.p6,HZ,JZ.f,KZ.j,GZ.e,wi.n,YZ.f,Qg.Z,ye.JV,ye.Bo,ye.$n],styles:[".azt-ppt-content[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:space-between;padding-top:10px;padding-bottom:40px}.azt-ppt-content__fixed[_ngcontent-%COMP%]{position:fixed;top:0;animation:_ngcontent-%COMP%_dropdownboxelement .5s}.azt-ppt-content__downtoup[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_downtoupboxelement .5s}.azt-ppt-content__rfixed[_ngcontent-%COMP%]{margin-left:380px!important}.azt-ppt-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{width:350px;height:100%;margin:10px}.azt-ppt-content[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{margin:10px;width:calc(100% - 340px);border-width:1px;border-style:solid;border-radius:5px;padding:10px}.azt-ppt-content[_ngcontent-%COMP%]   .right__content[_ngcontent-%COMP%]{padding-bottom:80px}.azt-ppt-content[_ngcontent-%COMP%]   .right__header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:20px}.azt-ppt-content[_ngcontent-%COMP%]   .right__header_lview[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.azt-ppt-content[_ngcontent-%COMP%]   .right__header_cview[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-right:10px}.azt-ppt-content[_ngcontent-%COMP%]   .right__header_cview[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:10px}.azt-ppt-content[_ngcontent-%COMP%]   .right__header__exam_title[_ngcontent-%COMP%]{max-width:350px;font-weight:700;margin:0 10px}.azt-ppt-content[_ngcontent-%COMP%]   .right__header__video[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer}.azt-ppt-content[_ngcontent-%COMP%]   .right__header__video[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-right:10px}.azt-ppt-content[_ngcontent-%COMP%]   .right__content__question_item__header[_ngcontent-%COMP%]{margin:20px 10px;display:flex;justify-content:space-between;align-items:center}.azt-ppt-content[_ngcontent-%COMP%]   .right__content__question_item__header_lview[_ngcontent-%COMP%], .azt-ppt-content[_ngcontent-%COMP%]   .right__content__question_item__header_rview[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.azt-ppt-content[_ngcontent-%COMP%]   .right__content__question_item__header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:10px}.azt-ppt-content[_ngcontent-%COMP%]   .right__content__question_item__title[_ngcontent-%COMP%]{font-weight:700;margin-right:10px;font-size:20px}.azt-ppt-content[_ngcontent-%COMP%]   .right__content_noti[_ngcontent-%COMP%]{text-align:center;font-size:20px;margin:50px}.azt-ppt-content[_ngcontent-%COMP%]   .right__content_loading[_ngcontent-%COMP%]{font-size:20px}.azt-ppt-content__btn[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;text-transform:uppercase;padding:6px 15px;border-radius:5px;cursor:pointer}.popup__video[_ngcontent-%COMP%]{position:fixed;z-index:999;width:100vw;height:100vh;top:0;left:0;display:flex;justify-content:center;align-items:center}.popup__video__header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:15px;border-radius:10px 10px 0 0}.popup__video__header--title[_ngcontent-%COMP%]{font-size:18px}.popup__video__header--close[_ngcontent-%COMP%]{cursor:pointer}.popup__video[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{border-radius:0 0 10px 10px}@keyframes _ngcontent-%COMP%_dropdownboxelement{0%{top:-10px}50%{top:40px}60%{top:10px}to{top:0}}@keyframes _ngcontent-%COMP%_downtoupboxelement{0%{padding-top:40px}to{padding-top:auto}}@media screen and (max-width: 925px){.content[_ngcontent-%COMP%]{display:block;width:100%;height:auto}.left[_ngcontent-%COMP%], .right[_ngcontent-%COMP%]{width:auto!important}.right__header[_ngcontent-%COMP%]{row-gap:10px}.right__header__exam_title[_ngcontent-%COMP%]{max-width:100%!important}.popup__video[_ngcontent-%COMP%]{align-items:flex-start}.popup__video_box[_ngcontent-%COMP%]{width:95%}.popup__video__header[_ngcontent-%COMP%]{margin-top:50px}.popup__video[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{width:100%}}@media screen and (max-width: 1199px) and (min-width: 926px){.view-screen-destop[_ngcontent-%COMP%]{display:none!important}.view-screen-phone[_ngcontent-%COMP%]{display:block!important}}@media screen and (max-width: 890px) and (min-width: 551px){.view-screen-destop[_ngcontent-%COMP%]{display:none!important}.view-screen-phone[_ngcontent-%COMP%]{display:block!important}}@media screen and (max-width: 550px){.right__content__question_item__header[_ngcontent-%COMP%]{display:grid!important;row-gap:10px}.right__header[_ngcontent-%COMP%]{display:grid!important;row-gap:10px;align-items:center!important;justify-content:space-between!important;align-content:center!important}.right__header__exam_title[_ngcontent-%COMP%]{max-width:50%!important}}"]}),n})();class bc{static objectLength(o){return Object.keys(o).length}static removeKeyInObject(o,t){for(var i in o)t.hasOwnProperty(i)&&delete o[i];return o}}var gD=I(1566);function xD(n,o){if(1&n&&e._UZ(0,"azt-loading-effect",3),2&n){const t=e.oxw();e.Q6J("currentStatusObj",t.statusObj)}}function bD(n,o){if(1&n&&(e.TgZ(0,"h3",40),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.hij("\xa0-\xa0",t.titleExam,"")}}function vD(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_vui_long_nhap_so_luong_de_dao")," "))}function wD(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_so_luong_de_phai_lon_hon_0")," "))}function yD(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.AsE("",e.lcZ(2,2,"lang_auto_so_luong_de_phai_nho_hon"),"\xa0",t.limitMaxMixQuestionHashId,"")}}function CD(n,o){if(1&n&&(e.TgZ(0,"div",41),e.YNc(1,vD,3,3,"span",27),e.YNc(2,wD,3,3,"span",27),e.YNc(3,yD,3,4,"span",27),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t.form.controls.numberExam||null==t.form.controls.numberExam.errors?null:t.form.controls.numberExam.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.form.controls.numberExam||null==t.form.controls.numberExam.errors?null:t.form.controls.numberExam.errors.min),e.xp6(1),e.Q6J("ngIf",null==t.form.controls.numberExam||null==t.form.controls.numberExam.errors?null:t.form.controls.numberExam.errors.max)}}function TD(n,o){1&n&&(e.TgZ(0,"div",41)(1,"small",42),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&n&&(e.xp6(2),e.hij("",e.lcZ(3,1,"lang_testbank_offline_test_cannot_be_reversed"),"."))}function kD(n,o){1&n&&(e.TgZ(0,"div",41)(1,"span"),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&n&&(e.xp6(2),e.hij("",e.lcZ(3,1,"lang_auto_de_thi_qua_120_cau_vui_long_tao_de_con_duoi_120_cau_de_in_de"),"."))}function SD(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"a",44),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.redirectToUpdateExam())}),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()}2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_testbank_link_to_update_exam")," "))}function ED(n,o){if(1&n&&(e.TgZ(0,"div",41)(1,"span"),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.YNc(4,SD,3,3,"a",43),e.qZA()),2&n){const t=e.oxw(2);e.xp6(2),e.hij("",e.lcZ(3,2,"lang_testbank_offline_test_not_print_exam_have_answer")+" "+t.dataConfigDocument.allowMaxAnswerChoices,"."),e.xp6(2),e.Q6J("ngIf",!(null!=t.examObj&&t.examObj.isRandomQuestion))}}function OD(n,o){if(1&n&&(e.TgZ(0,"p",48,49),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()),2&n){const t=e.MAs(1),i=e.oxw(3);e.s9C("matTooltip",i.pagePrintExamCodeWithString),e.Q6J("isDisabledTooltip",!1)("matTooltipDisabled",t.isDisabled),e.xp6(2),e.AsE(" ",e.lcZ(3,5,"lang_testbank_print_exam_custom_offline_mix_question_hash_id_will_create"),"\xa0",i.pagePrintExamCodeWithString," ")}}function ID(n,o){if(1&n&&(e.TgZ(0,"span")(1,"span",50),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.TgZ(4,"span",50),e._uU(5),e.ALo(6,"mytranslate"),e.ALo(7,"mytranslate"),e.qZA()()),2&n){const t=e.oxw(4);e.xp6(2),e.hij(" ",e.lcZ(3,5,"lang_testbank_print_exam_custom_input_offline_mix_question_hash_id_count_invalid")," "),e.xp6(3),e.HOy(" ",e.lcZ(6,7,"lang_testbank_print_exam_custom_input_offline_mix_question_hash_id_count_invalid_real"),"\xa0",null==t.form.controls.inputOfflineMixQuestionHashId||null==t.form.controls.inputOfflineMixQuestionHashId.errors?null:t.form.controls.inputOfflineMixQuestionHashId.errors.countReal," \xa0|\xa0 ",e.lcZ(7,9,"lang_testbank_print_exam_custom_input_offline_mix_question_hash_id_count_invalid_you"),"\xa0",null==t.form.controls.inputOfflineMixQuestionHashId||null==t.form.controls.inputOfflineMixQuestionHashId.errors?null:t.form.controls.inputOfflineMixQuestionHashId.errors.countOfCode," ")}}function MD(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_testbank_print_exam_custom_input_offline_mix_question_hash_id_format_invalid")," "))}function LD(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n){const t=e.oxw(4);e.xp6(1),e.AsE(" ",e.lcZ(2,2,"lang_testbank_print_exam_custom_offline_mix_question_hash_id_duplicated_invalid"),"\xa0",null==t.form.controls.inputOfflineMixQuestionHashId||null==t.form.controls.inputOfflineMixQuestionHashId.errors||null==t.form.controls.inputOfflineMixQuestionHashId.errors.duplicatedCustomHashIds?null:t.form.controls.inputOfflineMixQuestionHashId.errors.duplicatedCustomHashIds.join(", ")," ")}}function BD(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n){const t=e.oxw(4);e.xp6(1),e.AsE(" ",e.lcZ(2,2,"lang_testbank_print_exam_custom_input_offline_mix_question_hash_id_min_invalid"),"\xa0",null==t.form.controls.inputOfflineMixQuestionHashId||null==t.form.controls.inputOfflineMixQuestionHashId.errors?null:t.form.controls.inputOfflineMixQuestionHashId.errors.minOfStart," ")}}function PD(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n){const t=e.oxw(4);e.xp6(1),e.AsE(" ",e.lcZ(2,2,"lang_testbank_print_exam_custom_input_offline_mix_question_hash_id_max_invalid"),"\xa0",null==t.form.controls.inputOfflineMixQuestionHashId||null==t.form.controls.inputOfflineMixQuestionHashId.errors?null:t.form.controls.inputOfflineMixQuestionHashId.errors.maxOfStart," ")}}function QD(n,o){if(1&n&&(e.TgZ(0,"div",41),e.YNc(1,ID,8,11,"span",27),e.YNc(2,MD,3,3,"span",27),e.YNc(3,LD,3,4,"span",27),e.YNc(4,BD,3,4,"span",27),e.YNc(5,PD,3,4,"span",27),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",null==t.form.controls.inputOfflineMixQuestionHashId||null==t.form.controls.inputOfflineMixQuestionHashId.errors?null:t.form.controls.inputOfflineMixQuestionHashId.errors.countOfflineMixQuestionHashIdInvalid),e.xp6(1),e.Q6J("ngIf",null==t.form.controls.inputOfflineMixQuestionHashId||null==t.form.controls.inputOfflineMixQuestionHashId.errors?null:t.form.controls.inputOfflineMixQuestionHashId.errors.formatOfflineMixQuestionHashIdInvalid),e.xp6(1),e.Q6J("ngIf",null==t.form.controls.inputOfflineMixQuestionHashId||null==t.form.controls.inputOfflineMixQuestionHashId.errors?null:t.form.controls.inputOfflineMixQuestionHashId.errors.duplicatedCustomOfflineMixQuestionHashIdInvalid),e.xp6(1),e.Q6J("ngIf",null==t.form.controls.inputOfflineMixQuestionHashId||null==t.form.controls.inputOfflineMixQuestionHashId.errors?null:t.form.controls.inputOfflineMixQuestionHashId.errors.minOfflineMixQuestionHashIdInvalid),e.xp6(1),e.Q6J("ngIf",null==t.form.controls.inputOfflineMixQuestionHashId||null==t.form.controls.inputOfflineMixQuestionHashId.errors?null:t.form.controls.inputOfflineMixQuestionHashId.errors.maxOfflineMixQuestionHashIdInvalid)}}function FD(n,o){if(1&n&&(e.ynx(0),e._UZ(1,"input",45),e.ALo(2,"mytranslate"),e.TgZ(3,"div",46),e.YNc(4,OD,4,7,"p",47),e.qZA(),e.YNc(5,QD,6,5,"div",17),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.s9C("placeholder",e.lcZ(2,3,"lang_testbank_print_exam_custom_input_offline_mix_question_hash_id_placeholder")),e.xp6(3),e.Q6J("ngIf",!(null!=t.form.controls.numberExam&&t.form.controls.numberExam.errors||null!=t.form.controls.inputOfflineMixQuestionHashId&&t.form.controls.inputOfflineMixQuestionHashId.errors||""==t.pagePrintExamCodeWithString)),e.xp6(1),e.Q6J("ngIf",!(null!=t.form.controls.numberExam&&t.form.controls.numberExam.errors)&&(null==t.form.controls.inputOfflineMixQuestionHashId?null:t.form.controls.inputOfflineMixQuestionHashId.errors))}}function ND(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",12)(1,"div",13)(2,"div",32)(3,"div",51)(4,"div",52)(5,"label",53),e._uU(6),e.ALo(7,"mytranslate"),e.qZA(),e.TgZ(8,"div",54),e._uU(9),e.ALo(10,"mytranslate"),e.qZA()(),e.TgZ(11,"div",55)(12,"div",34)(13,"input",56),e.NdJ("change",function(a){e.CHM(t);const r=e.oxw(2);return e.KtG(r.changeRandomQuestionConfig(a))}),e.qZA()()()()()()()}2&n&&(e.xp6(6),e.hij(" ",e.lcZ(7,2,"lang_auto_lay_ngau_nhien_theo_ma_tran_de")," "),e.xp6(3),e.hij(" ",e.lcZ(10,4,"lang_auto_de_thi_duoc_tao_tu_ma_tran_de_khi_bat_tinh_nang_nay_dot")," "))}function ZD(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",12)(1,"div",13)(2,"div",32)(3,"div",19)(4,"div",52)(5,"label",57),e._uU(6),e.ALo(7,"mytranslate"),e.qZA(),e.TgZ(8,"div",58),e._uU(9),e.ALo(10,"mytranslate"),e.qZA()(),e.TgZ(11,"div",55)(12,"div",34)(13,"input",59),e.NdJ("change",function(a){e.CHM(t);const r=e.oxw(2);return e.KtG(r.changeCreateSubTestConfig(a))}),e.qZA()()()()()()()}2&n&&(e.xp6(6),e.hij(" ",e.lcZ(7,2,"lang_auto_tao_de_con")," "),e.xp6(3),e.hij(" ",e.lcZ(10,4,"lang_auto_tao_de_con_tu_mot_luong_cau_hoi_ngau_nhien_trong_de_goc_dot")," "))}function DD(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",60)(1,"test-config-online-mix-question",61),e.NdJ("isGroupMixQuestionChange",function(a){e.CHM(t);const r=e.oxw(2);return e.KtG(r.isGroupMixQuestion=a)})("checkValidateCountQuestionChange",function(a){e.CHM(t);const r=e.oxw(2);return e.KtG(r.checkValidateCountQuestion=a)})("hasChangeValueLimitQuestion",function(a){e.CHM(t);const r=e.oxw(2);return e.KtG(r.changeLimitQuestionNonGroup(a))})("totalTakeQuestionChange",function(a){e.CHM(t);const r=e.oxw(2);return e.KtG(r.changeLimitQuestionInGroup(a))}),e.qZA()()}if(2&n){const t=e.oxw(2);let i;e.Q6J("hidden",(null==t.form.controls.isRandomQuestion?null:t.form.controls.isRandomQuestion.value)||!(1==(null==t.form.controls.isCreateSubTest?null:t.form.controls.isCreateSubTest.value)&&1==(null!==(i=null==t.form.controls.mixQuestion?null:t.form.controls.mixQuestion.value)&&void 0!==i?i:0))),e.xp6(1),e.Q6J("fromPrintOffline",!0)("form",t.form)("obj",t.obj)("minLimitMixQuestion",t.minLimitMixQuestion)("examGroupInfos",t.examGroupInfos)}}function UD(n,o){1&n&&(e.TgZ(0,"span",68),e._UZ(1,"azt-loading-ui"),e.qZA())}function jD(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"input",69),e.NdJ("change",function(a){e.CHM(t);const r=e.oxw(3);return e.KtG(r.changeConfigSubjectMark(a))}),e.qZA()}}function qD(n,o){if(1&n&&(e.TgZ(0,"div",12)(1,"div",13)(2,"div",32)(3,"div",51)(4,"div",62)(5,"label",63),e._uU(6),e.ALo(7,"mytranslate"),e.qZA(),e.TgZ(8,"div",54)(9,"div"),e._uU(10),e.ALo(11,"mytranslate"),e.qZA(),e.TgZ(12,"div",64),e._uU(13),e.ALo(14,"mytranslate"),e.qZA(),e.TgZ(15,"div",64),e._uU(16),e.ALo(17,"mytranslate"),e.qZA()()(),e.TgZ(18,"div",65)(19,"div",34),e.YNc(20,UD,2,0,"span",66),e.YNc(21,jD,1,0,"input",67),e.qZA()()()()()()),2&n){const t=e.oxw(2);e.xp6(6),e.hij(" ",e.lcZ(7,6,"lang_config_create_exam_multiple_component")," "),e.xp6(4),e.Oqu(e.lcZ(11,8,"lang_config_create_exam_multiple_component_description_120")),e.xp6(3),e.Oqu(e.lcZ(14,10,"lang_config_create_exam_multiple_component_description_80")),e.xp6(3),e.Oqu(e.lcZ(17,12,"lang_testbank_in_case_users_create_subtopics_other_than_120_or_80_sentences_this_function_will_automatically_turn_off")),e.xp6(4),e.Q6J("ngIf",t.loadingSaveConfigMultiple),e.xp6(1),e.Q6J("ngIf",!t.loadingSaveConfigMultiple)}}const RD=function(n){return{hiddenIpt:n}};function zD(n,o){if(1&n&&(e.TgZ(0,"div",70),e._UZ(1,"add-info-print",71),e.qZA()),2&n){const t=e.oxw(2);e.Q6J("ngClass",e.VKq(3,RD,!(null!=t.form.controls.addInfoPrint&&t.form.controls.addInfoPrint.value))),e.xp6(1),e.Q6J("form",t.form)("examPrintInfoObj",t.examPrintInfoObj)}}function HD(n,o){1&n&&(e.TgZ(0,"div",78)(1,"div",79)(2,"a",80),e._UZ(3,"img",81),e.ALo(4,"convertCdnLinkOfGitHub"),e.qZA(),e.TgZ(5,"a",82),e._UZ(6,"img",83),e.ALo(7,"convertCdnLinkOfGitHub"),e.qZA()()()),2&n&&(e.xp6(3),e.Q6J("src",e.lcZ(4,2,"images/google-play-badge.svg"),e.LSH),e.xp6(3),e.Q6J("src",e.lcZ(7,4,"images/2928664.svg"),e.LSH))}function JD(n,o){1&n&&(e.TgZ(0,"p",75),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_su_dung_ma_qr_de_tai_app_azota")," "))}function KD(n,o){1&n&&(e.TgZ(0,"div",78)(1,"div",84)(2,"p",85)(3,"span",86),e._uU(4,"Google Play"),e.qZA(),e._UZ(5,"azt-download-qr-code",87),e.qZA(),e.TgZ(6,"p",88)(7,"span",86),e._uU(8,"App Store"),e.qZA(),e._UZ(9,"azt-download-qr-code",87),e.qZA()()()),2&n&&(e.xp6(5),e.Q6J("fileName","azota_exam_qr_code_google_app")("linkUrl","https://play.google.com/store/apps/details?id=azt.teacher"),e.xp6(4),e.Q6J("fileName","azota_exam_qr_code_app_store")("linkUrl","https://apps.apple.com/vn/app/azota-teacher/id1658231068"))}function GD(n,o){if(1&n&&(e.TgZ(0,"div",72)(1,"div",73)(2,"div",74)(3,"p",75),e._uU(4),e.ALo(5,"mytranslate"),e.qZA(),e.YNc(6,HD,8,6,"div",76),e.qZA(),e.TgZ(7,"div",50),e.YNc(8,JD,3,3,"p",77),e.YNc(9,KD,10,4,"div",76),e.qZA()()()),2&n){const t=e.oxw(2);e.xp6(4),e.hij(" ",e.lcZ(5,4,"lang_core_tai_app_tai_day")," "),e.xp6(2),e.Q6J("ngIf",!t.isMobileWebView),e.xp6(2),e.Q6J("ngIf",!t.isMobileWebView),e.xp6(1),e.Q6J("ngIf",!t.isMobileWebView)}}function YD(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",4)(1,"div",5)(2,"h3",6),e._uU(3),e.ALo(4,"mytranslate"),e.qZA(),e.YNc(5,bD,2,1,"h3",7),e.qZA(),e.TgZ(6,"div",8)(7,"form",9)(8,"div",10)(9,"div",11)(10,"div",12)(11,"div",13)(12,"div",14)(13,"label",15),e._uU(14),e.ALo(15,"mytranslate"),e.qZA(),e._UZ(16,"input",16),e.ALo(17,"mytranslate"),e.YNc(18,CD,4,3,"div",17),e.YNc(19,TD,4,3,"div",17),e.YNc(20,kD,4,3,"div",17),e.YNc(21,ED,5,4,"div",17),e.qZA(),e.TgZ(22,"div",18)(23,"div",19)(24,"div",20)(25,"label",21),e._uU(26),e.ALo(27,"mytranslate"),e.TgZ(28,"span",22),e.ALo(29,"mytranslate"),e._UZ(30,"lucide-icon",23),e.qZA()()(),e.TgZ(31,"div",24)(32,"div",25),e._UZ(33,"input",26),e.qZA()()(),e.YNc(34,FD,6,5,"ng-container",27),e.qZA(),e.TgZ(35,"div",18),e._UZ(36,"app-testbank-choose-answer-sheet",28),e.qZA()(),e.TgZ(37,"div",13),e._UZ(38,"preview-answer-sheet-dialog",29),e.qZA()(),e.YNc(39,ND,14,6,"div",30),e.YNc(40,ZD,14,6,"div",30),e.YNc(41,DD,2,6,"div",31),e.YNc(42,qD,22,14,"div",30),e.TgZ(43,"div",12)(44,"div",13)(45,"div",32)(46,"div",19)(47,"div",20)(48,"label",33),e._uU(49),e.ALo(50,"mytranslate"),e.qZA()(),e.TgZ(51,"div",24)(52,"div",34),e._UZ(53,"input",35),e.qZA()()()(),e.YNc(54,zD,2,5,"div",36),e.qZA()()(),e.YNc(55,GD,10,6,"div",37),e.qZA(),e.TgZ(56,"div",38)(57,"button",39),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.savePrintConfigObj())}),e._uU(58),e.ALo(59,"mytranslate"),e.qZA()()()()()}if(2&n){const t=e.oxw();let i;e.xp6(3),e.hij(" ",e.lcZ(4,35,"lang_auto_in_de_co_phieu_tra_loi_trac_nghiem_rieng")," "),e.xp6(2),e.Q6J("ngIf",t.titleExam),e.xp6(2),e.Q6J("formGroup",t.form),e.xp6(7),e.hij(" ",e.lcZ(15,37,"lang_auto_so_luong_de_dao")," "),e.xp6(2),e.s9C("placeholder",e.lcZ(17,39,"lang_auto_nhap_so_luong_de_dao")),e.xp6(2),e.Q6J("ngIf",(null==t.form.controls.numberExam?null:t.form.controls.numberExam.dirty)&&(null==t.form.controls.numberExam?null:t.form.controls.numberExam.errors)),e.xp6(1),e.Q6J("ngIf",0===(null==t.dataConfigDocument?null:t.dataConfigDocument.canMixQuestion)&&(null!==(i=null==t.form.controls.numberExam?null:t.form.controls.numberExam.value)&&void 0!==i?i:0)>1),e.xp6(1),e.Q6J("ngIf",1===(null==t.dataConfigDocument?null:t.dataConfigDocument.exceedMaxQuestions)),e.xp6(1),e.Q6J("ngIf",t.dataConfigDocument&&t.dataConfigDocument.maxAnswerChoices&&t.dataConfigDocument.maxAnswerChoices>4),e.xp6(5),e.hij(" ",e.lcZ(27,41,"lang_testbank_print_exam_custom_input_offline_mix_question_hash_id")," "),e.xp6(2),e.s9C("matTooltip",e.lcZ(29,43,"lang_testbank_print_exam_custom_input_offline_mix_question_hash_id_tooltip")),e.xp6(6),e.Q6J("ngIf",null==t.form.controls.allowCustomInputOfflineMixQuestionHashId?null:t.form.controls.allowCustomInputOfflineMixQuestionHashId.value),e.xp6(2),e.Q6J("form",t.form)("resetQuestionIndex",t.resetQuestionIndex)("formArrayName","answersheetTemplate"),e.xp6(2),e.Q6J("answersheetTemplate",t.form.controls.answersheetTemplate.value)("amountTemplateOriginalA4",t.form.controls.amountTemplateOriginalA4.value)("amountTemplateA5",t.form.controls.amountTemplateA5.value)("amountTemplateA6",t.form.controls.amountTemplateA6.value)("amountTemplateEssayA4",t.form.controls.amountTemplateEssayA4.value)("amountTemplateTrueFalseA4",t.form.controls.amountTemplateTrueFalseA4.value)("amountTemplateStartTrueFalseA4",t.form.controls.amountTemplateStartTrueFalseA4.value)("amountTemplateMultipleChoiceA4",t.form.controls.amountTemplateMultipleChoiceA4.value)("amountTemplateStartMultipleChoiceA4",t.form.controls.amountTemplateStartMultipleChoiceA4.value)("amountTemplateFillA4",t.form.controls.amountTemplateFillA4.value)("amountTemplateStartFillA4",t.form.controls.amountTemplateStartFillA4.value),e.xp6(1),e.Q6J("ngIf",t.enableRandomQuestion),e.xp6(1),e.Q6J("ngIf",!(null!=t.form.controls.isRandomQuestion&&t.form.controls.isRandomQuestion.value)),e.xp6(1),e.Q6J("ngIf",t.obj),e.xp6(1),e.Q6J("ngIf",t.canUseSubjectMark),e.xp6(7),e.hij(" ",e.lcZ(50,45,"lang_core_them_thong_tin")," "),e.xp6(5),e.Q6J("ngIf",t.examPrintInfoObj),e.xp6(1),e.Q6J("ngIf",!t.isMobileWebView),e.xp6(2),e.Q6J("disabled",t.checkValidateCountQuestion&&1==(null==t.form.controls.isCreateSubTest?null:t.form.controls.isCreateSubTest.value)||(t.form.controls.answersheetTemplate.value==t.allAnswerSheet.templateOriginalA4||t.form.controls.answersheetTemplate.value==t.allAnswerSheet.templateA4WithColorNew)&&t.form.controls.amountTemplateOriginalA4.errors||t.form.controls.answersheetTemplate.value==t.allAnswerSheet.templateA5Full50&&t.form.controls.amountTemplateA5.errors||t.form.controls.answersheetTemplate.value==t.allAnswerSheet.templateA4Essay&&t.form.controls.amountTemplateEssayA4.errors||t.form.controls.answersheetTemplate.value==t.allAnswerSheet.templateA6Full20&&t.form.controls.amountTemplateA6.errors||(t.form.controls.answersheetTemplate.value==t.allAnswerSheet.templateTrueFalseA4||t.form.controls.answersheetTemplate.value==t.allAnswerSheet.templateTrueFalseA4WithColor||t.form.controls.answersheetTemplate.value==t.allAnswerSheet.templateTrueFalseEssayA4||t.form.controls.answersheetTemplate.value==t.allAnswerSheet.templateTrueFalseA5||t.form.controls.answersheetTemplate.value==t.allAnswerSheet.templateTrueFalseA6||t.form.controls.answersheetTemplate.value==t.allAnswerSheet.templateA4WithFax||t.form.controls.answersheetTemplate.value==t.allAnswerSheet.templateA4WithFaxV2)&&t.form.controls.amountTemplateTrueFalseA4.errors||(t.form.controls.answersheetTemplate.value==t.allAnswerSheet.templateTrueFalseA4||t.form.controls.answersheetTemplate.value==t.allAnswerSheet.templateTrueFalseA4WithColor||t.form.controls.answersheetTemplate.value==t.allAnswerSheet.templateTrueFalseEssayA4||t.form.controls.answersheetTemplate.value==t.allAnswerSheet.templateTrueFalseA5||t.form.controls.answersheetTemplate.value==t.allAnswerSheet.templateTrueFalseA6||t.form.controls.answersheetTemplate.value==t.allAnswerSheet.templateA4WithFax||t.form.controls.answersheetTemplate.value==t.allAnswerSheet.templateA4WithFaxV2)&&t.form.controls.amountTemplateMultipleChoiceA4.errors||(t.form.controls.answersheetTemplate.value==t.allAnswerSheet.templateTrueFalseA4||t.form.controls.answersheetTemplate.value==t.allAnswerSheet.templateTrueFalseA4WithColor||t.form.controls.answersheetTemplate.value==t.allAnswerSheet.templateTrueFalseEssayA4||t.form.controls.answersheetTemplate.value==t.allAnswerSheet.templateTrueFalseA5||t.form.controls.answersheetTemplate.value==t.allAnswerSheet.templateTrueFalseA6||t.form.controls.answersheetTemplate.value==t.allAnswerSheet.templateA4WithFax||t.form.controls.answersheetTemplate.value==t.allAnswerSheet.templateA4WithFaxV2)&&t.form.controls.amountTemplateFillA4.errors||1==(null==t.form.controls.isCreateSubTest?null:t.form.controls.isCreateSubTest.value)&&t.isGroupMixQuestion&&t.totalTakeQuestion>120||1==(null==t.form.controls.isCreateSubTest?null:t.form.controls.isCreateSubTest.value)&&t.isGroupMixQuestion&&0==t.totalTakeQuestion||t.dataConfigDocument&&void 0!==t.dataConfigDocument.maxAnswerChoices&&t.dataConfigDocument.maxAnswerChoices>4||(null==t.form.controls.numberExam?null:t.form.controls.numberExam.errors)||(null==t.form.controls.allowCustomInputOfflineMixQuestionHashId?null:t.form.controls.allowCustomInputOfflineMixQuestionHashId.value)&&(null==t.form.controls.inputOfflineMixQuestionHashId?null:t.form.controls.inputOfflineMixQuestionHashId.errors)),e.xp6(1),e.hij(" ",e.lcZ(59,47,"lang_auto_in_de_and_phieu")," ")}}let $D=(()=>{class n extends xe.Q{get pagePrintExamCodeWithString(){const t=this.makeExamCodeWithInput();return t?`(${t.map(i=>this.formatAnswerSheetService.formatOfflineExamHashIdToNumber(i,3)).join(", ")})`:""}makeExamCodeWithInput(){if(this.form.controls.numberExam?.errors||this.form.controls.inputOfflineMixQuestionHashId?.errors)return;const t=this.commonService.examExtractNumbers(this.form.controls.numberExam?.value??1,this.form.controls.inputOfflineMixQuestionHashId?.value??"");return t.susses?t.data:void 0}getOfflineMixQuestionHashIdsWillCreated(t,i){t=Number(t),i=Number(i);let a=[];if(t>0&&i>0){let r=this.formatAnswerSheetService.getOfflineMixQuestionHashIdsFromStart(t,i);for(let s=0;s<r.length;s++)a.push(this.formatAnswerSheetService.formatOfflineExamHashIdToNumber(r[s],3))}return a.length>0?"("+a.join(", ")+")":""}getGroupMixInfosSubmit(t){let i={},a=[];return t.forEach(s=>{if(!i.hasOwnProperty(s.groupId)){i[s.groupId]=s.totalQuestion??0;let l=[],c=Number(s.totalGroupScore)/Number(s.totalQuestion);for(let u=0;u<(s.totalQuestion??0);u++)l.push(c);a=a.concat(l)}}),{status:this.isGroupMixQuestion?1:0,objs:i,marks:a}}getMixInfoSubmit(t,i){let a=Number(i)/Number(t),r=new Array(Number(t)).fill(a);return{limitMixQuestion:Number(t),marks:r}}startCreateOfflineExamData(){this.isLoadingPrintTest=!0;let t=Number(this.form.controls.numberExam?.value),a=this.form.controls.answersheetTemplate?Number(this.form.controls.answersheetTemplate.value):this.allAnswerSheet.templateOriginalA4,r=this.makeExamCodeWithInput(),s=this.getAmountAnswerSheetByTemplate(a),l={examHashId:this.examObj?.hashId??"",total:t,examTemplate:0,answersheetTemplate:a,totalQuestionOfAnswerSheet:s,customOfflineMixQuestionHashId:r??[],examParts:[{answerType:1,totalQuestion:this.form.controls.amountTemplateMultipleChoiceA4?Number(this.form.controls.amountTemplateMultipleChoiceA4.value):40},{answerType:4,totalQuestion:this.form.controls.amountTemplateFillA4?Number(this.form.controls.amountTemplateFillA4.value):6},{answerType:5,totalQuestion:this.form.controls.amountTemplateTrueFalseA4?Number(this.form.controls.amountTemplateTrueFalseA4.value):8}]};this.waitDestroy(this.offlineExamService.apiOfflineExamCreateExamObjPost(l).subscribe(c=>{if(c.success){if(c.data?.obj){let u=c.data.obj,p=`/admin/testbank/print-exam-and-ticket/${this.commonService.getMyParam(this.activeRoute,"cat_id")??"0"}/${this.examHashId}?backto=${encodeURIComponent(this.backToLink)}`;this.myNavigationWithQueryString(`/admin/testbank/download-file-print/${this.examObj?.categoryId??0}/${u.examHashId}/${u.hashId}`,`?backto=${encodeURIComponent(p)}`)}this.successStatusObj(),this.isLoadingPrintTest=!1}else this.errorStatusObj(c.message??"",!0),this.isLoadingPrintTest=!1}))}getAmountAnswerSheetByTemplate(t){switch(Number(t)){case this.allAnswerSheet.templateOriginalA4:case this.allAnswerSheet.templateA4WithColorNew:return this.form.controls.amountTemplateOriginalA4.value;case this.allAnswerSheet.templateA5Full50:return this.form.controls.amountTemplateA5.value;case this.allAnswerSheet.templateA6Full20:return this.form.controls.amountTemplateA6.value;case this.allAnswerSheet.templateA4Essay:return this.form.controls.amountTemplateEssayA4.value;case this.allAnswerSheet.templateTrueFalseA4:case this.allAnswerSheet.templateTrueFalseA4WithColor:case this.allAnswerSheet.templateTrueFalseA5:case this.allAnswerSheet.templateTrueFalseA6:case this.allAnswerSheet.templateTrueFalseEssayA4:return this.form.controls.amountTemplateTrueFalseA4.value+this.form.controls.amountTemplateFillA4.value+this.form.controls.amountTemplateStartMultipleChoiceA4.value;default:return this.form.controls.amountTemplateOriginalA4.value}}changeRandomQuestionConfig(t){t.target instanceof HTMLInputElement&&t.target.checked&&(this.form.controls.subjectMarks.enable(),this.form.controls.isCreateSubTest?.setValue(!1))}changeConfigSubjectMark(t){if(t.target instanceof HTMLInputElement){this.loadingSaveConfigMultiple=!0;let i=this.form.getRawValue(),a={subjectMarks:i.subjectMarks?1:0,isSaveConfig:0};this.waitDestroy(this.documentConfigService.apiDocumentConfigSaveExamConfigPost(this.examHashId,a).subscribe(r=>{1==r.success?(this.loadingSaveConfigMultiple=!1,this.successStatusObj(i.subjectMarks?"lang_config_create_exam_multiple_component_enable_successfully":"lang_config_create_exam_multiple_component_disable_successfully",!0)):(this.loadingSaveConfigMultiple=!1,this.errorStatusObj(r.message??"",!0),this.form.controls.subjectMarks.setValue(!a.subjectMarks))}))}}changeCreateSubTestConfig(t){t.target instanceof HTMLInputElement&&(t.target.checked?(120!=this.form.controls.limitMixQuestion?.value&&80!=this.form.controls.limitMixQuestion?.value||this.isGroupMixQuestion&&120!=this.totalTakeQuestion&&80!=this.totalTakeQuestion)&&(this.form.controls.subjectMarks.setValue(!1),this.form.controls.subjectMarks.disable()):this.form.controls.subjectMarks.enable())}changeLimitQuestionNonGroup(t){this.isGroupMixQuestion||this.disableSubjectMarksConfig(t)}changeLimitQuestionInGroup(t){this.totalTakeQuestion=t,this.isGroupMixQuestion&&this.disableSubjectMarksConfig(t)}disableSubjectMarksConfig(t){this.form.controls.isCreateSubTest?.value&&120!=t&&80!=t||!this.canUseSubjectMark?(this.form.controls.subjectMarks.setValue(!1),this.form.controls.subjectMarks.disable()):this.form.controls.subjectMarks.enable()}savePrintConfigObj(){this.initStatusObj(),this.form.controls.isRandomQuestion?.value&&this.form.controls.isCreateSubTest?.setValue(!1);let t=this.form.getRawValue();t.limitMixQuestion=t.limitMixQuestion?t.limitMixQuestion:0;let i=t.isCreateSubTest?2:2==this.dataConfigDocument?.examObj?.mixQuestion?1:void 0,a=t.groupInfos?this.getGroupMixInfosSubmit(t.groupInfos):void 0,s={mixQuestion:i,mixQuestionNotInGroupInfoWithMarkObj:t.totalPointQuestionNoGroup?this.getMixInfoSubmit(t.limitMixQuestion,t.totalPointQuestionNoGroup):void 0,mixQuestionGroupInfoWithMarkObj:a,subjectMarks:t.subjectMarks?1:0,isRandomQuestion:this.enableRandomQuestion?t.isRandomQuestion?1:0:void 0,isSaveConfig:0};this.waitDestroy(this.documentConfigService.apiDocumentConfigSaveExamConfigPost(this.examObj?.hashId??"",s).subscribe(l=>{1==l.success?(this.startCreateOfflineExamData(),this.addInfoPrint()):this.errorStatusObj(l.message??"",!0)}))}getExamInfoByHashId(t){this.initStatusObj(),this.waitDestroy(this.documentConfigService.apiDocumentConfigGetExamConfigDataV2Get(t).subscribe(i=>{1==i.success?(this.dataConfigDocument=i.data,this.canUseSubjectMark=i.data?.canUseSubjectMark??!1,this.resetQuestionIndex=i.data?.resetQuestionIndex??!0,this.resetQuestionIndex&&(this.form.controls.amountTemplateStartTrueFalseA4=new h.NI(1,{nonNullable:!0,validators:[h.kI.required,h.kI.min(1),h.kI.max(120)]}),this.form.controls.amountTemplateStartFillA4=new h.NI(1,{nonNullable:!0,validators:[h.kI.required,h.kI.min(1),h.kI.max(120)]})),this.dataConfigDocument&&this.initData(this.dataConfigDocument),this.successStatusObj()):this.errorStatusObj(i.message??"",!0)}))}initData(t){let a,i=t?.examObj,r=this.defaultMaxMixQuestionHashId-(t?.totalUsedMixQuestionHashId??0);if(a=this.castObj(i),null==a)return;a.limitQuestionGroupsParse=this.commonService.myParseJson(i.limitQuestionGroups??""),this.obj=a,this.examObj=t.examObj??{};let s=this.commonService.myTranslateInstant("lang_auto_ten_de_thi"),l=this.commonService.myTranslateInstant("lang_auto_ma_de");this.titleExam=s+": "+i.name+" - "+l+": "+i.hashId,this.examPrintInfoObj=t.examPrintInfoObj,this.enableRandomQuestion=t.enableRandomQuestion??!1,this.examPrintInfoObj?.status&&this.form.controls.addInfoPrint?.setValue(!0),this.limitMaxMixQuestionHashId=r>this.defaultMaxCreateMixExamOneTime?this.defaultMaxCreateMixExamOneTime:r;let c=t.examObj?.mixQuestionNotInGroupInfoWithMarkObj?.marks?.reduce((u,m)=>u+m,0);c=Math.round(100*(c??1))/100,this.form.controls.limitMixQuestion?.setValue(this.obj.limitMixQuestion),this.form.controls.isCreateSubTest?.setValue(2==this.obj.mixQuestion),this.form.controls.numberExam?.addValidators(h.kI.max(this.limitMaxMixQuestionHashId)),this.form.controls.answersheetTemplate.setValue(t.offlineExamObj?.answersheetTemplate?t.offlineExamObj?.answersheetTemplate:this.allAnswerSheet.templateOriginalA4),this.form.addValidators(function _D(n,o){return t=>{var a=t.controls.inputOfflineMixQuestionHashId,r=t.controls.numberExam;if(a&&a.value&&r&&""!=r.value.toString().trim()){var s=Yn.z.stcExamExtractNumbers(Number(r.value),a.value),c=s.data.filter(function(f){return-1!=o.indexOf(f)});if(s.data.length>0&&c.length>0){for(var u=[],m=0;m<c.length;m++)u.push(n.formatOfflineExamHashIdToNumber(c[m],3));return a.setErrors({duplicatedCustomOfflineMixQuestionHashIdInvalid:!0,duplicatedCustomHashIds:u}),{identityRevealed:!0}}}var p=a.errors??{};return p=bc.removeKeyInObject(p,{duplicatedCustomOfflineMixQuestionHashIdInvalid:!0,duplicatedCustomHashIds:[]}),bc.objectLength(p)<=0?a.setErrors(null):a.setErrors(p),null}}(this.formatAnswerSheetService,t.offlineMixQuestionHashIdsUsed??[])),this.form.addValidators(function hD(){return n=>{const o=n;var t=o.controls.inputOfflineMixQuestionHashId;if(t&&""!=t.value.trim()){var i=o.controls.numberExam;if(!i||""==i.value.toString().trim())return t.setErrors({countOfflineMixQuestionHashIdInvalid:!0,countOfCode:0,countReal:0}),{identityRevealed:!0};var a=Number(i.value),r=Yn.z.stcExamExtractNumbers(a,t.value);if(r.susses&&r.data.length!=a)return t.setErrors({countOfflineMixQuestionHashIdInvalid:!0,countOfCode:a,countReal:r.data.length}),{identityRevealed:!0}}var s=t.errors??{};return s=bc.removeKeyInObject(s,{countOfflineMixQuestionHashIdInvalid:!0,countOfCode:0,countReal:0}),bc.objectLength(s)<=0?t.setErrors(null):t.setErrors(s),null}}()),this.form.addValidators(function AD(){return n=>{var t=n.controls.inputOfflineMixQuestionHashId,i=n.controls.numberExam;if(t&&""!=t.value.trim()&&i&&""!=i.value.toString().trim()){var a=Yn.z.stcExamExtractNumbers(Number(i.value),t.value);if(!a.susses)return t.setErrors({formatOfflineMixQuestionHashIdInvalid:!0}),{identityRevealed:!0};if(0===a.data.length||a.data.filter(s=>s<0).length>0)return t.setErrors({formatOfflineMixQuestionHashIdInvalid:!0}),{identityRevealed:!0}}var r=t.errors??{};return r=bc.removeKeyInObject(r,{formatOfflineMixQuestionHashIdInvalid:!0}),bc.objectLength(r)<=0?t.setErrors(null):t.setErrors(r),null}}()),this.form.addValidators(function fD(n,o){return t=>{var a=t.controls.inputOfflineMixQuestionHashId,r=t.controls.numberExam;if(a&&""!=a.value.trim()&&r&&""!=r.value.toString().trim()){var s=Yn.z.stcExamExtractNumbers(Number(r.value),a.value);if(s.susses)for(let u=0;u<s.data.length;u++){if(s.data[u]<n)return a.setErrors({minOfflineMixQuestionHashIdInvalid:!0,minOfStart:n}),{identityRevealed:!0};if(s.data[u]>o){let m=o;return"special"===s.msg&&(m=m-Number(r.value)+1),a.setErrors({maxOfflineMixQuestionHashIdInvalid:!0,maxOfStart:m}),{identityRevealed:!0}}}}var l=a.errors??{};l=bc.removeKeyInObject(l,{minOfflineMixQuestionHashIdInvalid:!0,minOfStart:0}),bc.objectLength(l)<=0?a.setErrors(null):a.setErrors(l);var c=a.errors??{};return c=bc.removeKeyInObject(c,{maxOfflineMixQuestionHashIdInvalid:!0,maxOfStart:0}),bc.objectLength(c)<=0?a.setErrors(null):a.setErrors(c),null}}(1,999)),this.form.controls.schoolName?.setValue(t.examPrintInfoObj?.schoolName),this.form.controls.subjectName?.setValue(t.examPrintInfoObj?.subject),this.form.controls.isRandomQuestion?.setValue(1==this.obj.isRandomQuestion),this.form.controls.subjectMarks.setValue(!!this.examObj.subjectMarks),this.form.controls.totalPointQuestionNoGroup?.setValue(c),this.dataConfigDocument?.examParts.length&&(this.form=this.aztCalcExamPartService.calcExamPart(this.form,this.dataConfigDocument?.examParts,this.resetQuestionIndex)),this.hasGroupQuestion=!!t.hasGroupQuestion,this.minLimitMixQuestion=t.minLimitMixQuestion??0,this.examGroupInfos=t.examGroupInfos&&t.examGroupInfos.length>0?t.examGroupInfos:this.examGroupInfos}addInfoPrint(){this.waitDestroy(this.documentConfigService.apiDocumentConfigSaveExamPrintInfoObjPost(this.examHashId,{schoolName:this.form.controls.schoolName?.value,subject:this.form.controls.subjectName?.value,status:this.form.controls.addInfoPrint?.value?1:0}).subscribe(i=>{i.success||this.errorStatusObj(i.message??"")}))}redirectToUpdateExam(){const i=`/admin/testbank/print-exam-and-ticket/${this.commonService.getMyParam(this.activeRoute,"cat_id")??"0"}/${this.examHashId}?backto=${encodeURIComponent(this.backToLink)}`;this.myNavigationWithQueryString(`/admin/testbank/update-exam/${this.examObj?.categoryId??0}/${this.examObj?.id}`,`?backto=${encodeURIComponent(i)}`)}ngOnInit(){this.examHashId=this.commonService.getMyParam(this.activeRoute,"hash_id")??"";let t=this.commonService.getMyParam(this.activeRoute,"cat_id")??"",i=this.commonService.getMyQueryParam("backto")??"";this.backToLink=i||`/admin/testbank/action-online-offline/${t??0}/${this.examHashId}`,this.getExamInfoByHashId(this.examHashId),super.ngOnInit()}constructor(t,i,a,r,s){super(),this.offlineExamService=t,this.documentConfigService=i,this.formatAnswerSheetService=a,this.aztCalcExamPartService=r,this.activeRoute=s,this.titleExam="",this.backToLink="",this.isLoadingPrintTest=!1,this.isGroupMixQuestion=!1,this.checkValidateCountQuestion=!1,this.totalTakeQuestion=0,this.hasGroupQuestion=!1,this.examGroupInfos=[],this.minLimitMixQuestion=0,this.enableRandomQuestion=!1,this.defaultMaxCreateMixExamOneTime=100,this.defaultMaxMixQuestionHashId=999,this.limitMaxMixQuestionHashId=999,this.examHashId="",this.loadingSaveConfigMultiple=!1,this.canUseSubjectMark=!1,this.resetQuestionIndex=!0,this.allAnswerSheet=Ki.x,this.form=new h.cw({numberExam:new h.NI(1,{nonNullable:!0,validators:[h.kI.required,h.kI.min(1)]}),isCreateSubTest:new h.NI(!1,{nonNullable:!0}),mixQuestion:new h.NI(1,{nonNullable:!0}),groupInfos:new h.Oe([]),limitMixQuestion:new h.NI(void 0,{nonNullable:!0}),totalPointQuestionNoGroup:new h.NI(10,{nonNullable:!0}),answersheetTemplate:new h.NI(this.allAnswerSheet.templateOriginalA4,{nonNullable:!0,validators:[h.kI.required]}),amountTemplateOriginalA4:new h.NI(120,{nonNullable:!0,validators:[h.kI.required,h.kI.min(1),h.kI.max(120)]}),amountTemplateA5:new h.NI(60,{nonNullable:!0,validators:[h.kI.required,h.kI.min(1),h.kI.max(60)]}),amountTemplateA6:new h.NI(32,{nonNullable:!0,validators:[h.kI.required,h.kI.min(1),h.kI.max(32)]}),amountTemplateEssayA4:new h.NI(36,{nonNullable:!0,validators:[h.kI.required,h.kI.min(1),h.kI.max(36)]}),amountTemplateTrueFalseA4:new h.NI(8,{nonNullable:!0,validators:[h.kI.required,h.kI.min(0),h.kI.max(8)]}),amountTemplateStartTrueFalseA4:new h.NI(1,{nonNullable:!0,validators:[h.kI.required,h.kI.min(1),h.kI.max(120)]}),amountTemplateMultipleChoiceA4:new h.NI(40,{nonNullable:!0,validators:[h.kI.required,h.kI.min(0),h.kI.max(40)]}),amountTemplateStartMultipleChoiceA4:new h.NI(1,{nonNullable:!0,validators:[h.kI.required,h.kI.min(1),h.kI.max(120)]}),amountTemplateFillA4:new h.NI(6,{nonNullable:!0,validators:[h.kI.required,h.kI.min(0),h.kI.max(6)]}),amountTemplateStartFillA4:new h.NI(1,{nonNullable:!0,validators:[h.kI.required,h.kI.min(1),h.kI.max(120)]}),allowCustomInputOfflineMixQuestionHashId:new h.NI(!1,{nonNullable:!0,validators:[h.kI.required]}),inputOfflineMixQuestionHashId:new h.NI("",{nonNullable:!0}),addInfoPrint:new h.NI(!1,{nonNullable:!0}),schoolName:new h.NI("",{nonNullable:!0}),subjectName:new h.NI("",{nonNullable:!0}),isRandomQuestion:new h.NI(!1,{nonNullable:!0}),subjectMarks:new h.NI({value:!1,disabled:!1},{nonNullable:!0})})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Za.vv),e.Y36(un.Cq),e.Y36(ow.j),e.Y36(bg),e.Y36(E.gz))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-print-exam-and-ticket"]],features:[e.qOj],decls:4,vars:3,consts:[[3,"headerBackToLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],["doneLoading",""],[3,"currentStatusObj"],["id","azt-config-document",1,"azt-config-document","mx-auto","mt-5",2,"max-width","1000px"],[1,"flex","flex-wrap"],[1,"text-md","uppercase","font-medium"],["class","text-md font-medium",4,"ngIf"],[1,"box","mt-3"],[3,"formGroup"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5"],[1,"grid","grid-cols-12","gap-5"],[1,"col-span-12","md:col-span-6"],[1,"mt-0"],[1,"form-label","font-medium"],["type","text","appOnlyNumber","","formControlName","numberExam",1,"form-control",3,"placeholder"],["class","text-xs text-danger fade mt-2",4,"ngIf"],[1,"mt-4"],[1,"grid","grid-cols-12","items-center"],[1,"col-span-10","lg:col-span-5"],["for","allow-input-start-offline-mix-question-hash-id",1,"ml-0","azt-ml-0","mr-2","flex","items-center","font-medium"],[1,"w-4","h-4","ml-2","inline-block",3,"matTooltip"],["name","info"],[1,"col-span-2","lg:col-span-7","flex"],[1,"form-check","form-switch","mb-3","ml-auto"],["id","allow-input-start-offline-mix-question-hash-id","formControlName","allowCustomInputOfflineMixQuestionHashId","type","checkbox",1,"show-code","form-check-input"],[4,"ngIf"],[3,"form","resetQuestionIndex","formArrayName"],[3,"answersheetTemplate","amountTemplateOriginalA4","amountTemplateA5","amountTemplateA6","amountTemplateEssayA4","amountTemplateTrueFalseA4","amountTemplateStartTrueFalseA4","amountTemplateMultipleChoiceA4","amountTemplateStartMultipleChoiceA4","amountTemplateFillA4","amountTemplateStartFillA4"],["class","grid grid-cols-12 gap-5",4,"ngIf"],["class","mt-3",3,"hidden",4,"ngIf"],[1,"mt-5"],["for","add-info-print",1,"form-label","font-medium"],[1,"form-check","form-switch","ml-auto"],["id","add-info-print","formControlName","addInfoPrint","type","checkbox",1,"show-code","form-check-input","mr-0","ml-3"],[3,"ngClass",4,"ngIf"],["class","block-warning p-5",4,"ngIf"],[1,"p-3","text-right"],["azt-track-service","print-exam-and-ticket-PVsGtKGXRK",1,"btn","btn-primary",3,"disabled","click"],[1,"text-md","font-medium"],[1,"text-xs","text-danger","fade","mt-2"],[1,"text-note","text-danger"],["azt-track-service","print-exam-and-ticket-8BU0T1lQl","class","btn-text-primary inline-flex font-medium",3,"click",4,"ngIf"],["azt-track-service","print-exam-and-ticket-8BU0T1lQl",1,"btn-text-primary","inline-flex","font-medium",3,"click"],["type","text","formControlName","inputOfflineMixQuestionHashId",1,"form-control",3,"placeholder"],[1,"col-span-12","px-0","mt-2"],["class","text-slate-500 text-xs truncate",3,"matTooltip","isDisabledTooltip","matTooltipDisabled",4,"ngIf"],[1,"text-slate-500","text-xs","truncate",3,"matTooltip","isDisabledTooltip","matTooltipDisabled"],["c","isDisabled"],[1,"block"],[1,"grid","grid-cols-12"],[1,"col-span-10","lg:col-span-7"],["for","config-matrix-question",1,"form-label","font-medium"],[1,"leading-relaxed","text-slate-500","text-xs","pr-5"],[1,"col-span-2","lg:col-span-5"],["id","config-matrix-question","formControlName","isRandomQuestion","type","checkbox",1,"show-code","ml-auto","form-check-input","mr-0","ml-3",3,"change"],["for","create-sub-exam",1,"form-label","font-medium"],[1,"leading-relaxed","text-slate-500","text-xs","mt-2","pr-5"],["id","create-sub-exam","formControlName","isCreateSubTest","type","checkbox",1,"show-code","ml-auto","form-check-input","mr-0","ml-3",3,"change"],[1,"mt-3",3,"hidden"],["formArrayGroupInfosName","groupInfos","formControlLimitMixQuestionName","limitMixQuestion",3,"fromPrintOffline","form","obj","minLimitMixQuestion","examGroupInfos","isGroupMixQuestionChange","checkValidateCountQuestionChange","hasChangeValueLimitQuestion","totalTakeQuestionChange"],[1,"col-span-10","lg:col-span-10"],["for","subject-marks-question",1,"form-label","font-medium"],[1,"mt-0.5"],[1,"col-span-2","lg:col-span-2"],["class","w-5 h-5 inline-block mr-2",4,"ngIf"],["id","subject-marks-question","formControlName","subjectMarks","class","show-code ml-auto form-check-input mr-0 ml-3","type","checkbox",3,"change",4,"ngIf"],[1,"w-5","h-5","inline-block","mr-2"],["id","subject-marks-question","formControlName","subjectMarks","type","checkbox",1,"show-code","ml-auto","form-check-input","mr-0","ml-3",3,"change"],[3,"ngClass"],[3,"form","examPrintInfoObj"],[1,"block-warning","p-5"],[1,"mt-5","flex","flex-col","md:flex-row"],[1,"block","md:mr-10"],[1,"mt-2","font-medium"],["class","grid grid-cols-12 mt-2 ml-auto mr-auto justify-center",4,"ngIf"],["class","mt-2 font-medium",4,"ngIf"],[1,"grid","grid-cols-12","mt-2","ml-auto","mr-auto","justify-center"],[1,"col-span-12","w-full","self-center","mb-2"],["azt-track-service","print-exam-and-ticket-AVrdnS9P7","href","https://play.google.com/store/apps/details?id=azt.teacher","target","_blank","rel","noopener",1,"pl-1","pr-1","mb-2","display-inline-block"],["alt","Get it on Google Play","width","150px",1,"play-store-badge",3,"src"],["azt-track-service","print-exam-and-ticket-ZrLBZdsFfU","href","https://apps.apple.com/vn/app/azota-teacher/id1658231068","target","_blank","rel","noopener",1,"pl-1","pl-1","mb-2","display-inline-block"],["alt","Download on the App Store","width","135px",1,"app-store-badge",3,"src"],[1,"col-span-12","items-center","mb-2"],[1,"px-1","mb-1","py-1","inline-flex","border","border-slate-200","rounded"],[1,"my-auto","font-medium"],[1,"ml-1",3,"fileName","linkUrl"],[1,"ml-2","px-1","py-1","mb-1","inline-flex","border","border-slate-200","rounded"]],template:function(t,i){if(1&t&&(e.TgZ(0,"teacher-layout",0),e.YNc(1,xD,1,1,"azt-loading-effect",1),e.YNc(2,YD,60,49,"ng-template",null,2,e.W1O),e.qZA()),2&t){const a=e.MAs(3);e.Q6J("headerBackToLink",i.backToLink),e.xp6(1),e.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a)}},dependencies:[F.mk,F.O5,Ai.gM,h._Y,h.Fj,h.Wl,h.JJ,h.JL,h.sg,h.u,h.CE,vi.l,o_.W,Dt.Y,wt.M,zs.Q,gD.z,wi.n,wo._,_.Nh5,Kv,xg,Cv,ye.JV,ye.Bo],encapsulation:2}),n})();function VD(n,o){if(1&n&&e._UZ(0,"azt-loading-effect",3),2&n){const t=e.oxw();e.Q6J("currentStatusObj",t.statusObj)}}function WD(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",26)(1,"h3",27),e._uU(2),e.qZA(),e.TgZ(3,"div",28),e._UZ(4,"input",29),e.TgZ(5,"button",30),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.showCopySuccess())}),e.O4$(),e.TgZ(6,"svg",13),e._UZ(7,"rect",31)(8,"path",32),e.qZA(),e._uU(9),e.ALo(10,"mytranslate"),e.qZA()()()}if(2&n){const t=o.$implicit,i=e.oxw(3);let a;e.xp6(2),e.hij(" ",null==t.classObj?null:t.classObj.name," "),e.xp6(2),e.Q6J("value",t.linkDocument),e.xp6(1),e.Q6J("cdkCopyToClipboard",i.copyLinkToClipboard(null!==(a=t.linkDocument)&&void 0!==a?a:"")),e.xp6(4),e.hij(" ",e.lcZ(10,4,"lang_auto_sao_chep")," ")}}function XD(n,o){if(1&n&&(e.TgZ(0,"div",23)(1,"h3",24),e._uU(2),e.qZA(),e.YNc(3,WD,11,6,"div",25),e.qZA()),2&n){const t=e.oxw(2);e.xp6(2),e.hij(" ",null==t.homeworkObj?null:t.homeworkObj.name," "),e.xp6(1),e.Q6J("ngForOf",t.listLinkDocument)}}function eU(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",23)(1,"h3",24),e._uU(2),e.qZA(),e.TgZ(3,"div",33),e._UZ(4,"input",34),e.TgZ(5,"button",35),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.showCopySuccess())}),e.O4$(),e.TgZ(6,"svg",13),e._UZ(7,"rect",31)(8,"path",32),e.qZA(),e._uU(9),e.ALo(10,"mytranslate"),e.qZA()()()}if(2&n){const t=e.oxw(2);e.xp6(2),e.hij(" ",null==t.examObj?null:t.examObj.name," "),e.xp6(2),e.Q6J("value",t.linkDocument),e.xp6(1),e.Q6J("cdkCopyToClipboard",t.copyLinkToClipboard(t.linkDocument)),e.xp6(4),e.hij(" ",e.lcZ(10,4,"lang_auto_sao_chep")," ")}}function tU(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",36)(1,"p",37),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.TgZ(4,"p",27),e._uU(5),e.ALo(6,"mytranslate"),e.qZA(),e.TgZ(7,"div",38)(8,"code",39)(9,"span"),e._uU(10," < "),e.TgZ(11,"span"),e._uU(12,"iframe"),e.qZA(),e._uU(13," \xa0 "),e.TgZ(14,"span"),e._uU(15,"width"),e.qZA(),e._uU(16," = "),e.TgZ(17,"span"),e._uU(18,'"100%"'),e.qZA(),e._uU(19," \xa0 "),e.TgZ(20,"span"),e._uU(21,"height"),e.qZA(),e._uU(22," = "),e.TgZ(23,"span"),e._uU(24,'"900"'),e.qZA(),e._uU(25," \xa0 "),e.TgZ(26,"span"),e._uU(27,"src"),e.qZA(),e._uU(28," = "),e.TgZ(29,"span"),e._uU(30),e.qZA(),e._uU(31," \xa0 "),e.TgZ(32,"span"),e._uU(33,"title"),e.qZA(),e._uU(34," = "),e.TgZ(35,"span"),e._uU(36),e.qZA(),e._uU(37," \xa0 "),e.TgZ(38,"span"),e._uU(39,"frameborder"),e.qZA(),e._uU(40," = "),e.TgZ(41,"span"),e._uU(42,'"0"'),e.qZA(),e._uU(43," \xa0 "),e.TgZ(44,"span"),e._uU(45,"allow"),e.qZA(),e._uU(46," = "),e.TgZ(47,"span"),e._uU(48,'"accelerometer;autoplay;clipboard-write;encrypted-media; gyroscope; picture-in-picture"'),e.qZA(),e._uU(49," \xa0 "),e.TgZ(50,"span"),e._uU(51,"allowfullscreen"),e.qZA(),e._uU(52," > "),e.qZA(),e._uU(53," \xa0 "),e.TgZ(54,"span"),e._uU(55," </ "),e.TgZ(56,"span"),e._uU(57,"iframe"),e.qZA(),e._uU(58," > "),e.qZA()()(),e.TgZ(59,"div",40)(60,"button",41),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.showCopySuccess())}),e.O4$(),e.TgZ(61,"svg",42),e._UZ(62,"path",43)(63,"polyline",15),e.qZA(),e._uU(64),e.ALo(65,"mytranslate"),e.qZA()()()}if(2&n){const t=e.oxw(2);e.xp6(2),e.hij("",e.lcZ(3,6,"lang_testbank_publish_result_had_website"),"?"),e.xp6(3),e.hij(" ",e.lcZ(6,8,"lang_testbank_publish_result_note_tutorial")," "),e.xp6(25),e.hij('"',t.linkDocument,'"'),e.xp6(6),e.hij('"',null==t.examObj?null:t.examObj.name,'"'),e.xp6(24),e.Q6J("cdkCopyToClipboard",t.copyLinkToIframe()),e.xp6(4),e.hij(" ",e.lcZ(65,10,"lang_auto_sao_chep_ma_nhung")," ")}}function nU(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",4)(1,"div",5)(2,"h3",6),e._uU(3),e.ALo(4,"mytranslate"),e.ALo(5,"mytranslate"),e.ALo(6,"mytranslate"),e.ALo(7,"mytranslate"),e.qZA()(),e.TgZ(8,"p",7),e._uU(9),e.ALo(10,"mytranslate"),e.qZA(),e.YNc(11,XD,4,2,"div",8),e.YNc(12,eU,11,6,"div",8),e.YNc(13,tU,66,12,"div",9),e.TgZ(14,"div",10)(15,"div",11)(16,"a",12),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.getRouterLinkByType())}),e.O4$(),e.TgZ(17,"svg",13),e._UZ(18,"path",14)(19,"polyline",15)(20,"path",16)(21,"path",17)(22,"path",18)(23,"path",19),e.qZA(),e._uU(24),e.ALo(25,"mytranslate"),e.ALo(26,"mytranslate"),e.qZA()(),e.kcU(),e.TgZ(27,"div",20)(28,"a",21),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.backToDocumentManager())}),e.O4$(),e.TgZ(29,"svg",13),e._UZ(30,"path",22),e.qZA(),e._uU(31),e.ALo(32,"mytranslate"),e.ALo(33,"mytranslate"),e.qZA()()()()}if(2&n){const t=e.oxw();e.xp6(3),e.hij(" ",1==t.type?null!=t.homeworkObj&&t.homeworkObj.isPublished?e.lcZ(4,7,"lang_auto_xuat_ban_thanh_cong"):e.lcZ(5,9,"lang_auto_da_luu_thanh_cong_chua_xuat_ban"):null!=t.examObj&&t.examObj.isPublished?e.lcZ(6,11,"lang_auto_xuat_ban_thanh_cong"):e.lcZ(7,13,"lang_auto_da_luu_thanh_cong_chua_xuat_ban")," \u{1f389} "),e.xp6(6),e.hij(" ",e.lcZ(10,15,"lang_auto_copy_link_ben_duoi_va_gui_cho_hoc_sinh_hoc_sinh_truy_cap_link_de_lam_bai_va_nop_bai")," "),e.xp6(2),e.Q6J("ngIf",1==t.type),e.xp6(1),e.Q6J("ngIf",0==t.type),e.xp6(1),e.Q6J("ngIf",0==t.type),e.xp6(11),e.hij(" ",1==t.type?e.lcZ(25,17,"lang_auto_quan_ly_danh_sach_nop_bai_tap"):e.lcZ(26,19,"lang_auto_quan_ly_danh_sach_da_thi")," "),e.xp6(7),e.hij(" ",1==t.type?e.lcZ(32,21,"lang_auto_ve_trang_bai_tap_trong_lop"):e.lcZ(33,23,"lang_auto_ve_trang_quan_ly_file")," ")}}let iU=(()=>{class n extends xe.Q{constructor(t,i){super(),this.documentConfigService=t,this.activeRoute=i,this.backToLink="",this.linkDocument="",this.listLinkDocument=[],this.linkIframeDocument="",this.successListHomework=[],this.type=0}createLinkHomeworkObjs(t,i){var a=[];let r=this.commonService.getCurrentDomain();return t.forEach(s=>{var l=i.find(u=>u.id==s.classroomId);if(l)a.push({classObj:l,homeworkObj:s,linkDocument:`${r}/bai-tap/${s.hashId}`});else{var c={id:0,name:this.commonService.myTranslateInstant("lang_auto_tu_do")??"",teacherId:0,countStudents:0,showAddStudent:0,grade:0,isShareClassroom:!1,isWaitingConfirm:0,permissionObj:{},teamPermissions:[]};a.push({classObj:c,homeworkObj:s,linkDocument:`${r}/bai-tap/${s.hashId}`})}}),a}getHomeworkInfoByHashId(t){var i=this.commonService.myParseJson(t);this.initStatusObj(),this.waitDestroy(this.documentConfigService.apiDocumentConfigGetHomeworkConfigDataV2Post(i?.[0]??"",i).subscribe(a=>{if(1==a.success){this.homeworkObj=a.data?.homeworkObj,this.successListHomework=a.data?.successHomeworkObjs??[];let r=this.commonService.concatMultipleArray(a.data?.classroomGroupObjs.map(l=>l.classroomObjs)??[]);this.listLinkDocument=this.createLinkHomeworkObjs(a.data?.successHomeworkObjs??[],r);let s=this.commonService.getCurrentDomain();this.linkDocument=`${s}/bai-tap/${this.homeworkObj?.hashId}`,this.successStatusObj()}else this.errorStatusObj(a.message??"",!0)}))}getExamInfoByHashId(t){this.initStatusObj(),this.waitDestroy(this.documentConfigService.apiDocumentConfigGetExamConfigDataV2Get(t).subscribe(i=>{if(1==i.success){this.examObj=i.data?.examObj;let a=this.commonService.getCurrentDomain();this.linkDocument=`${a}/de-thi/${this.examObj?.hashId}`,this.linkIframeDocument=`<iframe width="100%" height="900" src="${this.linkDocument}"  title="${this.examObj?.name}" frameborder="0" allow="accelerometer;autoplay;clipboard-write;encrypted-media; gyroscope; picture-in-picture" allowfullscreen> </iframe>`,this.successStatusObj()}else this.errorStatusObj(i.message??"",!0)}))}copyLinkToClipboard(t){return t}copyLinkToIframe(){return this.linkIframeDocument}showCopySuccess(){this.showSuccessSnack("lang_auto_sao_chep_thanh_cong")}getRouterLinkByType(){let t=this.getBackData(this.backToLink,!1);this.myNavigationWithQueryString(1==this.type?"/admin/testbank/homework-results-list/"+this.homeworkObj?.classroomId+"/"+this.homeworkObj?.id+"/"+this.homeworkObj?.hashId:"/admin/testbank/exam-results-list/"+(this.examObj?.categoryId??0)+"/"+this.examObj?.id+"/0",t?"?"+decodeURIComponent(t):"")}getBackData(t,i){let a="";if(t.includes("backto")){let r=t.substring(t.lastIndexOf("backto"));r.includes("shareType")&&(a=i?r.substring(r.lastIndexOf("data")):r)}return a}backToDocumentManager(){let t=this.getBackData(this.backToLink,!0);this.myNavigationWithQueryString(1==this.type?"/admin/student/classroom-details/"+this.homeworkObj?.classroomId+"/1":`/admin/testbank/document-management/0/${this.examObj?.categoryId??0}/1`,t?"?"+decodeURIComponent(t):"")}ngOnInit(){let t=this.commonService.getMyQueryParam("backto"),i=this.commonService.getMyParam(this.activeRoute,"hash_id")??"";this.type=Number(this.commonService.getMyParam(this.activeRoute,"type"))??0,1==this.type?this.getHomeworkInfoByHashId(i):this.getExamInfoByHashId(i),this.backToLink=t??"/admin/testbank/document-management/0/0/1",this.commonService.translateMetaData({title:"lang_cms_publish_document_title",description:"lang_cms_publish_document_description",image:""}),super.ngOnInit()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(un.Cq),e.Y36(E.gz))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-publish-document"]],features:[e.qOj],decls:4,vars:3,consts:[[3,"headerBackToLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],["doneLoading",""],[3,"currentStatusObj"],[1,"intro-y","mt-8"],[1,"flex","items-center","justify-center"],[1,"text-lg","font-medium"],[1,"text-md","text-center"],["class","box mx-auto mt-5 p-3","style","max-width: 560px",4,"ngIf"],["class","box p-3 text-center mt-5 intro-x mx-auto","style","max-width: 560px",4,"ngIf"],[1,"mt-5","flex","flex-col","sm:flex-row","justify-center","items-center"],[1,"mr-2"],["azt-track-service","publish-document-WN-MSecHgq",1,"btn","btn-outline-primary","btn-transparent",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","mr-2"],["d","M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],["points","14 2 14 8 20 8"],["d","M8 13h2"],["d","M8 17h2"],["d","M14 13h2"],["d","M14 17h2"],[1,"w-30"],["azt-track-service","publish-document-zSqq-4hFwf",1,"btn","btn-outline-primary","btn-transparent",3,"click"],["d","M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z"],[1,"box","mx-auto","mt-5","p-3",2,"max-width","560px"],[1,"text-md","font-medium"],["class","mt-4",4,"ngFor","ngForOf"],[1,"mt-4"],[1,"text-md"],[1,"azt-copy","relative","mt-2"],["type","text","readonly","",1,"form-control","py-3","px-4","border-transparent","bg-slate-100","pr-10",2,"padding-right","120px",3,"value"],["azt-track-service","publish-document-pWkyuGbsV",1,"btn","btn-outline-primary","absolute","my-auto","inset-y-0","right-0",2,"border-top-left-radius","0","border-bottom-left-radius","0",3,"cdkCopyToClipboard","click"],["x","9","y","9","width","13","height","13","rx","2","ry","2"],["d","M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"],[1,"azt-copy","relative","mt-5","intro-x"],["type","text","readonly","",1,"form-control","py-3","px-4","border-transparent","bg-slate-100","pr-10","text-primary",2,"padding-right","120px","cursor","pointer",3,"value"],["azt-track-service","publish-document-OwwIaPHrMx",1,"btn","btn-outline-primary","absolute","my-auto","inset-y-0","right-0",2,"border-top-left-radius","0","border-bottom-left-radius","0",3,"cdkCopyToClipboard","click"],[1,"box","p-3","text-center","mt-5","intro-x","mx-auto",2,"max-width","560px"],[1,"tex-md"],[1,"overflow-y-auto","mt-3","rounded-md","text-left","border","border-slate-200","dark:border-darkmode-300","p-3"],[1,"whitespace-nowrap",2,"padding","1rem"],[1,"text-right","mt-3"],["azt-track-service","publish-document--zJK66x3oF",1,"copy-code","btn","py-1","mr-auto","px-2","btn-outline-secondary",3,"cdkCopyToClipboard","click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","icon-name","file","data-lucide","file",1,"lucide","lucide-file","w-4","h-4","mr-2"],["d","M14.5 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V7.5L14.5 2z"]],template:function(t,i){if(1&t&&(e.TgZ(0,"teacher-layout",0),e.YNc(1,VD,1,1,"azt-loading-effect",1),e.YNc(2,nU,34,25,"ng-template",null,2,e.W1O),e.qZA()),2&t){const a=e.MAs(3);e.Q6J("headerBackToLink",i.backToLink),e.xp6(1),e.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a)}},dependencies:[F.sg,F.O5,nh.i3,vi.l,wo._,ye.JV],encapsulation:2}),n})(),oU=(()=>{class n{constructor(t,i,a){this.globalService=t,this.commonService=i,this.examPageResultService=a}getExamStatisticObjs(t,i,a){return this.globalService.startIntervalFunc(t),this.getExamAndQuestionObjsForStatistic(t,i,a??0)}getExamAndQuestionObjsForStatistic(t,i,a){return new ee.y(r=>{this.examPageResultService.apiExamPageResultGetObjV2Get(i,a).subscribe(s=>{if(1==s.success){var l=s.data?.serverSecond??0,c=s.data?.examObj;let p=s.data?.totalQuestion??c?.countQuestion;var u=s.data?.classroomWithAvatarAndStudentObjs??new Array,m=this.commonService.castJsonToClassObjs(Le.v,JSON.stringify(s.data?.questionObjs))??new Array;this.getAllExamMarksObjsForStatistic(t,[],i,"",f=>{if(1==f.success){var b=[],L={};f.resultObjs?.forEach(N=>{N.examResultObjs&&N.examResultObjs.length>0&&N.examResultObjs.forEach(R=>{b.push(R.id??0),L.hasOwnProperty(R.id??0)||(L[R.id??0]=R)})}),this.getAllAnswerObjsForStatistic(b,i,N=>{if(1==N.success){var R=[];u.forEach(ae=>{ae.classroomObj&&R.push(ae.classroomObj)});var j=[];N.resultObjs?.forEach(ae=>{if(ae.id&&L.hasOwnProperty(ae.id)){var W={...L[ae.id],correctQuestionIds:ae.correctQuestionIds,wrongQuestionIds:ae.wrongQuestionIds,resultQuestionIds:ae.resultQuestionIds};j.push(W)}}),m.length>0?(r.next({status:200,success:1,data:{examObj:c,classroomObjs:R,totalQuestion:p,classroomObjsWithStudentObjs:u,questionObjs:m,resultQuestionObjs:j,resultObjs:f.resultObjs??[],curServerTime:l,totalAttended:s.data?.totalAttended},message:"successful"}),r.complete()):(r.next({status:200,success:0,data:null,message:"lang_core_there_are_no_question_in_exam"}),r.complete())}else r.next({status:N.code,success:0,data:null,message:N.message??""}),r.complete()})}else r.next({status:f.code,success:0,data:null,message:f.message??""}),r.complete()})}else r.next({status:s.code,success:0,data:null,message:s.message??""}),r.complete()})})}getAllExamMarksObjsForStatistic(t,i,a,r,s){this.examPageResultService.apiExamPageResultGetObjsV2Get(a,"statistic",r).subscribe(l=>{1==l.success?(l.data?.objs&&i.push(...l.data.objs),l.data?.nextPage?this.globalService.isStopIntervalFunc(t)?s({code:200,resultObjs:i,success:1,message:"successful"}):setTimeout(()=>{this.getAllExamMarksObjsForStatistic(t,i,a,l.data?.nextPage??"",s)},300):s({code:200,resultObjs:i,success:1,message:"successful"})):s({code:l.code,resultObjs:[],success:0,message:l.message??""})})}getAllAnswerObjsForStatistic(t,i,a){this.examPageResultService.apiExamPageResultGetQuestionStatisticByExamResultIdsPost(i,{examResultIds:t}).subscribe(r=>{if(1==r.success){var s=[];r.data?.objs&&s.push(...r.data.objs),a({code:200,resultObjs:s,success:1,message:"successful"})}else a({code:r.code,resultObjs:void 0,success:0,message:r.message??""})})}findExamResultOfStudent(t,i){var a=[];return t.length>1?t.forEach(r=>{r.testStatus&&(r.studentId==i||null==r.studentId)&&a.push(r)}):1==t.length&&(t[0].studentId==i||null==t[0].studentId)&&a.push(t[0]),a}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(i_.q),e.LFG(Yn.z),e.LFG(un.DR))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class $g extends Le.v{constructor(){super(...arguments),this.countTested=0,this.countTrue=0,this.countNotAnswer=0,this.countAttended=0,this.countFalse=0,this.studentWhoFalse=[],this.studentWhoNotAnswer=[]}}class Bw{constructor(){this.listResult=[],this.listQuestions=[]}}var Vg=I(20137);function aU(n,o){1&n&&(e.TgZ(0,"div",5)(1,"h3",6),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.TgZ(4,"div",7),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()()),2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,2,"lang_auto_bang_ty_le_dung_sai")," "),e.xp6(3),e.hij("",e.lcZ(6,4,"lang_testbank_statistical_cant_data_statistics"),"."))}function rU(n,o){1&n&&(e.TgZ(0,"div",8)(1,"h3",6),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"lang_auto_bang_ty_le_dung_sai")," "))}const sU=function(n){return{active:n}};function lU(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li",17),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw(3);return e.KtG(s.handleChangeClassStatistic(r))}),e.TgZ(1,"button",18),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()}if(2&n){const t=o.$implicit,i=e.oxw(3);let a;e.xp6(1),e.Q6J("ngClass",e.VKq(4,sU,i.idClassObj==t.id)),e.xp6(1),e.hij(" ",e.lcZ(3,2,null!==(a=t.name)&&void 0!==a?a:"lang_auto_thi_sinh_tu_do")," ")}}function cU(n,o){if(1&n&&(e.TgZ(0,"ul",15),e.YNc(1,lU,4,6,"li",16),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.classroomObjs)}}function uU(n,o){1&n&&(e.TgZ(0,"div",19)(1,"span",20),e._UZ(2,"azt-loading-ui"),e.qZA()())}function dU(n,o){if(1&n&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"replace"),e.ALo(3,"number"),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij("",e.Dn7(2,1,e.xi3(3,5,(t.countNotAnswer+t.countFalse)/t.countAttended*100,"1.0-2"),",","."),"%")}}function mU(n,o){1&n&&(e.TgZ(0,"div"),e._uU(1,"0%"),e.qZA())}function pU(n,o){if(1&n&&e._UZ(0,"img",62),2&n){const t=e.oxw().$implicit;e.Q6J("nameImages",t.nameImages)}}function hU(n,o){1&n&&(e.TgZ(0,"span",65),e._uU(1," , "),e.qZA())}function AU(n,o){if(1&n&&(e.TgZ(0,"span",63),e._uU(1),e.ALo(2,"mytranslate"),e.qZA(),e.YNc(3,hU,2,0,"span",64)),2&n){const t=e.oxw(),i=t.$implicit,a=t.index,r=e.oxw(2).$implicit;let s;e.xp6(1),e.Oqu(null!==(s=i.fullName)&&void 0!==s?s:e.lcZ(2,2,"lang_auto_thi_sinh_thi_offline")+"_"+i.studentId),e.xp6(2),e.Q6J("ngIf",a!=r.studentWhoFalse.length-1)}}const _U=function(){return{}};function fU(n,o){if(1&n&&(e.ynx(0),e.YNc(1,pU,1,1,"img",60),e.YNc(2,AU,4,4,"ng-template",null,61,e.W1O),e.BQk()),2&n){const t=o.$implicit,i=e.MAs(3),a=e.oxw(5);let r;e.xp6(1),e.Q6J("ngIf",t.nameImages&&!a.commonService.isEmptyObj(null!==(r=t.nameImages)&&void 0!==r?r:e.DdM(2,_U)))("ngIfElse",i)}}function gU(n,o){if(1&n&&(e.ynx(0),e.YNc(1,fU,4,3,"ng-container",43),e.BQk()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.studentWhoFalse)}}function xU(n,o){1&n&&(e._uU(0),e.ALo(1,"mytranslate")),2&n&&e.hij(" ",e.lcZ(1,1,"lang_testbank_statistical_student_not_show_who_wrong")," ")}function bU(n,o){if(1&n&&e._UZ(0,"img",62),2&n){const t=e.oxw().$implicit;e.Q6J("nameImages",t.nameImages)}}function vU(n,o){1&n&&(e.TgZ(0,"span",65),e._uU(1," , "),e.qZA())}function wU(n,o){if(1&n&&(e.TgZ(0,"span",63),e._uU(1),e.ALo(2,"mytranslate"),e.qZA(),e.YNc(3,vU,2,0,"span",64)),2&n){const t=e.oxw(),i=t.$implicit,a=t.index,r=e.oxw(2).$implicit;let s;e.xp6(1),e.Oqu(null!==(s=i.fullName)&&void 0!==s?s:e.lcZ(2,2,"lang_auto_thi_sinh_thi_offline")+"_"+i.studentId),e.xp6(2),e.Q6J("ngIf",a!=r.studentWhoNotAnswer.length-1)}}function yU(n,o){if(1&n&&(e.ynx(0),e.YNc(1,bU,1,1,"img",60),e.YNc(2,wU,4,4,"ng-template",null,61,e.W1O),e.BQk()),2&n){const t=o.$implicit,i=e.MAs(3),a=e.oxw(5);e.xp6(1),e.Q6J("ngIf",t.nameImages&&!a.commonService.isEmptyObj(t.nameImages))("ngIfElse",i)}}function CU(n,o){if(1&n&&(e.ynx(0),e.YNc(1,yU,4,2,"ng-container",43),e.BQk()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.studentWhoNotAnswer)}}function TU(n,o){1&n&&(e._uU(0),e.ALo(1,"mytranslate")),2&n&&e.hij(" ",e.lcZ(1,1,"lang_testbank_statistical_student_not_show_who_wrong")," ")}function kU(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"tr")(1,"td")(2,"div",25)(3,"span",49),e._uU(4),e.qZA()()(),e.TgZ(5,"td")(6,"div",50)(7,"span",49),e._uU(8),e.ALo(9,"mytranslate"),e.qZA(),e.TgZ(10,"button",51),e.NdJ("click",function(a){const r=e.CHM(t),s=r.$implicit,l=r.index,c=e.oxw(3),u=e.MAs(4);return e.KtG(c.onContextMenu(a,s,l,u))}),e.O4$(),e.TgZ(11,"svg",52),e._UZ(12,"path",53)(13,"circle",54),e.qZA()()()(),e.kcU(),e.TgZ(14,"td",55),e._uU(15),e.qZA(),e.TgZ(16,"td",55),e._uU(17),e.qZA(),e.TgZ(18,"td",55),e._uU(19),e.qZA(),e.TgZ(20,"td",55),e._uU(21),e.qZA(),e.TgZ(22,"td",55),e._uU(23),e.qZA(),e.TgZ(24,"td",55),e.YNc(25,dU,4,8,"div",56),e.YNc(26,mU,2,0,"div",56),e.qZA(),e.TgZ(27,"td",55),e.YNc(28,gU,2,1,"ng-container",57),e.YNc(29,xU,2,3,"ng-template",null,58,e.W1O),e.qZA(),e.TgZ(31,"td",55),e.YNc(32,CU,2,1,"ng-container",57),e.YNc(33,TU,2,3,"ng-template",null,59,e.W1O),e.qZA()()}if(2&n){const t=o.$implicit,i=o.index,a=e.MAs(30),r=e.MAs(34);e.xp6(4),e.Oqu(i+1),e.xp6(4),e.AsE("",e.lcZ(9,14,"lang_testbank_statistical_question")," ",t.id,""),e.xp6(7),e.Oqu(t.countAttended),e.xp6(2),e.Oqu(t.countTested),e.xp6(2),e.Oqu(t.countNotAnswer),e.xp6(2),e.Oqu(t.countTrue),e.xp6(2),e.Oqu(t.countFalse),e.xp6(2),e.Q6J("ngIf",0!=t.countAttended),e.xp6(1),e.Q6J("ngIf",0==t.countAttended),e.xp6(2),e.Q6J("ngIf",t.studentWhoFalse.length<=50)("ngIfElse",a),e.xp6(4),e.Q6J("ngIf",t.studentWhoNotAnswer.length<=50)("ngIfElse",r)}}function SU(n,o){1&n&&(e.TgZ(0,"span",66),e._UZ(1,"azt-loading-ui"),e.qZA())}function EU(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",21)(1,"table",22)(2,"thead",23)(3,"tr")(4,"th",24)(5,"div",25),e._uU(6),e.ALo(7,"mytranslate"),e.qZA()(),e.TgZ(8,"th",26)(9,"div",27),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.toggleSortIDQuestion())}),e._uU(10),e.ALo(11,"mytranslate"),e.O4$(),e.TgZ(12,"svg",28),e._UZ(13,"polyline",29)(14,"line",30)(15,"polyline",31)(16,"line",32),e.qZA()()(),e.kcU(),e.TgZ(17,"th",33)(18,"div",34),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.toggleSortStudentCountAttended())}),e._uU(19),e.ALo(20,"mytranslate"),e.O4$(),e.TgZ(21,"svg",28),e._UZ(22,"polyline",29)(23,"line",30)(24,"polyline",31)(25,"line",32),e.qZA()()(),e.kcU(),e.TgZ(26,"th",33)(27,"div",35),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.toggleSortStudentCountTested())}),e._uU(28),e.ALo(29,"mytranslate"),e.O4$(),e.TgZ(30,"svg",28),e._UZ(31,"polyline",29)(32,"line",30)(33,"polyline",31)(34,"line",32),e.qZA()()(),e.kcU(),e.TgZ(35,"th",33)(36,"div",36),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.toggleSortStudentCountNotAnswer())}),e._uU(37),e.ALo(38,"mytranslate"),e.O4$(),e.TgZ(39,"svg",28),e._UZ(40,"polyline",29)(41,"line",30)(42,"polyline",31)(43,"line",32),e.qZA()()(),e.kcU(),e.TgZ(44,"th",33)(45,"div",37),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.toggleSortStudentCountTrue())}),e._uU(46),e.ALo(47,"mytranslate"),e.O4$(),e.TgZ(48,"svg",28),e._UZ(49,"polyline",29)(50,"line",30)(51,"polyline",31)(52,"line",32),e.qZA()()(),e.kcU(),e.TgZ(53,"th",33)(54,"div",38),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.toggleSortStudentCountFalse())}),e._uU(55),e.ALo(56,"mytranslate"),e.O4$(),e.TgZ(57,"svg",28),e._UZ(58,"polyline",29)(59,"line",30)(60,"polyline",31)(61,"line",32),e.qZA()()(),e.kcU(),e.TgZ(62,"th",39)(63,"div",40),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.toggleSortFalse())}),e._uU(64),e.ALo(65,"mytranslate"),e.O4$(),e.TgZ(66,"svg",28),e._UZ(67,"polyline",29)(68,"line",30)(69,"polyline",31)(70,"line",32),e.qZA()()(),e.kcU(),e.TgZ(71,"th",41)(72,"span"),e._uU(73),e.ALo(74,"mytranslate"),e.qZA()(),e.TgZ(75,"th",42)(76,"span"),e._uU(77),e.ALo(78,"mytranslate"),e.qZA()()()(),e.TgZ(79,"tbody"),e.YNc(80,kU,35,16,"tr",43),e.qZA()(),e.TgZ(81,"div",44)(82,"button",45),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);let r;return e.KtG(a.getDataForClassroomStatistical(null!==(r=a.idClassObj)&&void 0!==r?r:-1,!0))}),e.YNc(83,SU,2,0,"span",46),e._uU(84),e.ALo(85,"mytranslate"),e.O4$(),e.TgZ(86,"svg",47),e._UZ(87,"polyline",48),e.qZA()()()()}if(2&n){const t=e.oxw(2);e.xp6(6),e.hij(" ",e.lcZ(7,14,"lang_auto_STT")," "),e.xp6(4),e.hij(" ",e.lcZ(11,16,"lang_testbank_statistical_questions")," "),e.xp6(9),e.hij(" ",e.lcZ(20,18,"lang_testbank_statistical_total_number_exam")," "),e.xp6(9),e.hij(" ",e.lcZ(29,20,"lang_testbank_statistical_number_student_did")," "),e.xp6(9),e.hij(" ",e.lcZ(38,22,"lang_testbank_statistical_number_student_do_not")," "),e.xp6(9),e.hij(" ",e.lcZ(47,24,"lang_testbank_statistical_number_student_right")," "),e.xp6(9),e.hij(" ",e.lcZ(56,26,"lang_testbank_statistical_number_student_wrong")," "),e.xp6(9),e.hij(" ",e.lcZ(65,28,"lang_testbank_statistical_student_not_done")," "),e.xp6(9),e.hij(" ",e.lcZ(74,30,"lang_testbank_statistical_student_who_wrong")," "),e.xp6(4),e.hij(" ",e.lcZ(78,32,"lang_testbank_statistical_student_who_not_answer")," "),e.xp6(3),e.Q6J("ngForOf",t.listQuestion),e.xp6(2),e.Q6J("disabled",t.isLoadMore||t.countTotalQuestion<50*t.page),e.xp6(1),e.Q6J("ngIf",t.isLoadMore),e.xp6(1),e.hij(" ",e.lcZ(85,34,"lang_auto_xem_them"),"\xa0 ")}}function OU(n,o){if(1&n&&(e.TgZ(0,"div",9)(1,"div",10),e.YNc(2,cU,2,1,"ul",11),e.TgZ(3,"div",12),e.YNc(4,uU,3,0,"div",13),e.YNc(5,EU,88,36,"div",14),e.qZA()()()),2&n){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.classroomObjs&&t.classroomObjs.length>0),e.xp6(2),e.Q6J("ngIf",t.changeClassLoading),e.xp6(1),e.Q6J("ngIf",!t.changeClassLoading)}}function IU(n,o){if(1&n&&e._UZ(0,"azt-question-standalone-for-preview",69),2&n){const t=e.oxw().$implicit,i=e.oxw();e.Q6J("hideQuestionLabel",!0)("follower",i.followerRenderQuest)("examObj",i.examObj)("questionObj",t.questionObj)("curQuestionIndex",t.questionIndex)}}function MU(n,o){if(1&n&&(e.TgZ(0,"div",67),e.YNc(1,IU,1,5,"azt-question-standalone-for-preview",68),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.examObj)}}let LU=(()=>{class n extends xe.Q{onContextMenu(t,i,a,r){t&&(this.contextMenuService.show(r,{value:{questionObj:i,questionIndex:a},x:t?.clientX+15,y:t?.clientY+15}),t?.preventDefault(),t?.stopPropagation())}countEssayQuestion(){let t=0;return this.questionObjs.forEach(i=>{this.answerTypeService.isEssayAnswer(i)&&t++}),t}readyData(t){this.listQuestion=t,this.isCheckData=0==this.listQuestion.length,this.followerRenderQuest.setNumQuest(this.listQuestion.length),this.cloneListQuestion=this.commonService.myClone(this.listQuestion),this.isSortFalse&&(this.listQuestion=this.listQuestion.sort((i,a)=>i.countAttended>0&&a.countAttended>0?(a.countNotAnswer+a.countFalse)/a.countAttended*100-(i.countNotAnswer+i.countFalse)/i.countAttended*100:0)),this.changeClassLoading=!1,this.isLoadMore=!1,this.doneLoadingEmit.emit(!0),this.successStatusObj()}getListQuestionStatistic(){if(this.dataStatistical){let t=this.dataStatistical;this.examObj.id=t.id,this.examObj.name=t.name??"";let i=this.commonService.castJsonToClassObjs(Bw,JSON.stringify(t.classrooms));this.classroomObjs=i??[],this.getDataForClassroomStatistical(this.idClassObj?this.idClassObj:this.classroomObjs[0].id??-1,!1)}else this.doneLoadingEmit.emit(!1)}getDataForClassroomStatistical(t,i){i?(this.isLoadMore=!0,this.page+=1):(this.initStatusObj(),this.countTotalQuestion=0),this.idClassObj=t,this.examPageResultService.apiExamPageResultListQuestionStatisticGet(this.examObj?.id??0,t,this.page,50).subscribe(a=>{if(a.success&&a.data){let r=[];a.data.objs?.forEach((s,l)=>{let c=this.commonService.castJsonToClassObj($g,JSON.stringify(s.question))??new $g;c.countAttended=s.totalTest??0,c.countTrue=s.totalCorrect??0,c.countNotAnswer=s.totalNotAnswered??0,c.countTested=s.totalAnswered??0,c.countFalse=s.totalWrong??0,c.countTrue=s.totalCorrect??0,c.indexQuestion=l,c.studentWhoFalse=s.wrongStudents??[],c.studentWhoNotAnswer=s.notAnsweredStudents??[],this.questionObjs.push(c)}),this.docxService.replaceCanvasBackgroundTS(this.questionObjs),this.questionObjs.forEach(s=>{(this.answerTypeService.isOneChoiceAnswer(s)||this.answerTypeService.isFillAnswer(s)||this.answerTypeService.isTrueFalseAnswer(s))&&r.push(s),this.countTotalQuestion++}),(!a.data.objs||!a.data.objs.length)&&(this.countTotalQuestion=50*this.page-1),this.readyData(r)}else this.doneLoadingEmit.emit(!1),this.isLoadMore=!1,this.showErrorSnack(a.message??"")})}handleChangeClassStatistic(t){this.idClassObj=t.id,this.page=1,this.changeClassLoading=!0,this.questionObjs=[],this.getDataForClassroomStatistical(this.idClassObj??-1,!1)}toggleSortFalse(){this.checkSortType.ratioTrueFalse=!this.checkSortType.ratioTrueFalse,this.checkSortType.ratioTrueFalse?(this.isSortFalse=!0,this.listQuestion=this.listQuestion.sort((t,i)=>(i.countAttended>0?(i.countNotAnswer+i.countFalse)/i.countAttended*100:0)-(t.countAttended>0?(t.countNotAnswer+t.countFalse)/t.countAttended*100:0))):this.listQuestion=this.listQuestion.sort((t,i)=>(i.countAttended>0?(i.countNotAnswer+i.countFalse)/i.countAttended*100:0)-(t.countAttended>0?(t.countNotAnswer+t.countFalse)/t.countAttended*100:0)).reverse()}toggleSortIndexQuestion(){this.checkSortType.numberIndex=!this.checkSortType.numberIndex,this.listQuestion=this.checkSortType.numberIndex?this.commonService.myClone(this.cloneListQuestion):this.commonService.myClone(this.cloneListQuestion).reverse()}toggleSortIDQuestion(){this.checkSortType.idQuestion=!this.checkSortType.idQuestion,this.checkSortType.idQuestion?this.listQuestion.sort((t,i)=>(t.id??0)-(i.id??0)):this.listQuestion.sort((t,i)=>(t.id??0)-(i.id??0)).reverse()}toggleSortStudentCountAttended(){this.checkSortType.totalStudentExam=!this.checkSortType.totalStudentExam,this.checkSortType.totalStudentExam?this.listQuestion.sort((t,i)=>t.countAttended-i.countAttended):this.listQuestion.sort((t,i)=>t.countAttended-i.countAttended).reverse()}toggleSortStudentCountTested(){this.checkSortType.countTested=!this.checkSortType.countTested,this.checkSortType.countTested?this.listQuestion.sort((t,i)=>t.countTested-i.countTested):this.listQuestion.sort((t,i)=>t.countTested-i.countTested).reverse()}toggleSortStudentCountNotAnswer(){this.checkSortType.countNotAnswer=!this.checkSortType.countNotAnswer,this.checkSortType.countNotAnswer?this.listQuestion.sort((t,i)=>t.countNotAnswer-i.countNotAnswer):this.listQuestion.sort((t,i)=>t.countNotAnswer-i.countNotAnswer).reverse()}toggleSortStudentCountTrue(){this.checkSortType.countTrue=!this.checkSortType.countTrue,this.checkSortType.countTrue?this.listQuestion.sort((t,i)=>t.countTrue-i.countTrue):this.listQuestion.sort((t,i)=>t.countTrue-i.countTrue).reverse()}toggleSortStudentCountFalse(){this.checkSortType.countFalse=!this.checkSortType.countFalse,this.checkSortType.countFalse?this.listQuestion.sort((t,i)=>t.countFalse-i.countFalse):this.listQuestion.sort((t,i)=>t.countFalse-i.countFalse).reverse()}ngOnChanges(){this.dataStatistical&&!this.commonService.isEmptyObj(this.dataStatistical)&&this.getListQuestionStatistic()}ngOnInit(){this.dataStatistical&&!this.commonService.isEmptyObj(this.dataStatistical)&&this.getListQuestionStatistic(),super.ngOnInit()}constructor(t,i,a,r){super(),this.contextMenuService=t,this.docxService=i,this.answerTypeService=a,this.examPageResultService=r,this.viewType=-1,this.doneLoadingEmit=new e.vpe,this.idClassObj=0,this.listQuestion=[],this.examObj={id:0,name:"",countQuestion:0,showFrontend:0,editable:!1,permissionObj:{},allowStudentView:!1},this.isCheckData=!1,this.changeClassLoading=!1,this.isMobile=this.commonService.isMobileOrTable(),this.isSortFalse=!1,this.cloneListQuestion=[],this.followerRenderQuest=new mu.p,this.classroomObjs=[],this.questionObjs=[],this.checkSortType={ratioTrueFalse:!1,numberIndex:!0,totalStudentExam:!1,countTested:!1,countFalse:!1,countNotAnswer:!1,countTrue:!1,idQuestion:!1},this.countTotalQuestion=0,this.page=1,this.isLoadMore=!1}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(d.Lk),e.Y36(Vg.n),e.Y36(fr.i),e.Y36(un.DR))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-list-question-new"]],inputs:{viewType:"viewType",dataStatistical:"dataStatistical"},outputs:{doneLoadingEmit:"doneLoadingEmit"},features:[e.qOj,e.TTD],decls:6,vars:3,consts:[["class","intro-y block items-center",4,"ngIf"],["class","intro-y block sm:flex items-center",4,"ngIf"],["class","report-box intro-x mt-5",4,"ngIf"],["popUp",""],["contextMenuItem",""],[1,"intro-y","block","items-center"],[1,"text-lg","font-medium","truncate","mr-5"],[1,"p-3","m-3","text-center","alert","text-slate-500","font-medium"],[1,"intro-y","block","sm:flex","items-center"],[1,"report-box","intro-x","mt-5"],[1,"box","p-5"],["class","nav nav-link-tabs","style","overflow-x: auto","role","tablist",4,"ngIf"],[1,"tab-content","mt-5","overflow-x-auto","overflow-y-hidden"],["class","flex justify-center pb-5",4,"ngIf"],["id","example-tab-5","class","tab-pane leading-relaxed active","role","tabpanel","aria-labelledby","example-5-tab",4,"ngIf"],["role","tablist",1,"nav","nav-link-tabs",2,"overflow-x","auto"],["azt-track-service","list-question-AxJI5shrt6","id","example-5-tab","class","nav-item flex-1 dz-clickable","role","presentation",3,"click",4,"ngFor","ngForOf"],["azt-track-service","list-question-AxJI5shrt6","id","example-5-tab","role","presentation",1,"nav-item","flex-1","dz-clickable",3,"click"],["data-tw-toggle","pill","data-tw-target","#example-tab-5","type","button","role","tab","aria-controls","example-tab-5","aria-selected","true",1,"nav-link","w-full","py-2",3,"ngClass"],[1,"flex","justify-center","pb-5"],[1,"w-4","h-4","inline-block"],["id","example-tab-5","role","tabpanel","aria-labelledby","example-5-tab",1,"tab-pane","leading-relaxed","active"],[1,"intro-x","table","table-bordered"],[1,"bg-slate-100","dark:bg-darkmode-400"],[1,"whitespace-nowrap",2,"padding","10px","width","20px"],[1,"text-center"],[1,"whitespace-nowrap",2,"padding","10px","width","120px"],["azt-track-service","list-question-kkZu13iI5D",1,"flex","items-center","dz-clickable",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-5","h-5","ml-1","inline-block","flex-none"],["points","11 17 7 21 3 17"],["x1","7","y1","21","x2","7","y2","9"],["points","21 7 17 3 13 7"],["x1","17","y1","15","x2","17","y2","3"],[1,"w-30",2,"padding","10px","width","110px"],["azt-track-service","list-question-xrD2etExg-",1,"flex","items-center","dz-clickable",3,"click"],["azt-track-service","list-question-y6cuGZ-SC8",1,"flex","items-center","dz-clickable",3,"click"],["azt-track-service","list-question-seyRna-GRR",1,"flex","items-center","dz-clickable",3,"click"],["azt-track-service","list-question-LND-UYgzgn",1,"flex","items-center","clickable",3,"click"],["azt-track-service","list-question-kM4o8UGqyP",1,"flex","items-center","clickable",3,"click"],[1,"w-30",2,"padding","10px","width","150px"],["azt-track-service","list-question-X1HptCCAQA",1,"flex","items-center","clickable",3,"click"],[1,"whitespace-nowrap",2,"text-align","center","vertical-align","middle","width","20.5vw"],[1,"whitespace-nowrap",2,"text-align","center","vertical-align","middle","width","18.5vw"],[4,"ngFor","ngForOf"],[1,"text-center","mt-3"],["azt-track-service","list-question-xwuEU3k_LH","mat-button","",1,"btn","btn-outline-secondary","btn-transparent",3,"disabled","click"],["class","w-4 h-4 inline-block mr-2",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["points","6 9 12 15 18 9"],[1,"text-md"],[1,"flex","items-center","relative"],["azt-track-service","list-question-1b7d1GbqkQ",1,"btn-transparent","ml-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-5","h-5"],["d","M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"],["cx","12","cy","12","r","3"],[2,"text-align","center","vertical-align","middle"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["notShowWhoFalse",""],["notShowWhoNotAnswer",""],["appDrawNameImage","","class","img-fluid","loading","lazy","class","img-name-fluid","style","margin: 1px auto; max-width: 100%; height: auto; display: block",3,"nameImages",4,"ngIf","ngIfElse"],["showName",""],["appDrawNameImage","","loading","lazy",1,"img-name-fluid",2,"margin","1px auto","max-width","100%","height","auto","display","block",3,"nameImages"],[1,"mb-0"],["class","mr-1",4,"ngIf"],[1,"mr-1"],[1,"w-4","h-4","inline-block","mr-2"],[1,"box",2,"margin-right","10%"],["style","margin-bottom: 0px",3,"hideQuestionLabel","follower","examObj","questionObj","curQuestionIndex",4,"ngIf"],[2,"margin-bottom","0px",3,"hideQuestionLabel","follower","examObj","questionObj","curQuestionIndex"]],template:function(t,i){1&t&&(e.YNc(0,aU,7,6,"div",0),e.YNc(1,rU,4,3,"div",1),e.YNc(2,OU,6,3,"div",2),e.TgZ(3,"context-menu",null,3),e.YNc(5,MU,2,1,"ng-template",4),e.qZA()),2&t&&(e.Q6J("ngIf",1==i.isCheckData),e.xp6(1),e.Q6J("ngIf",1!=i.isCheckData),e.xp6(1),e.Q6J("ngIf",1!=i.isCheckData))},dependencies:[F.mk,F.sg,F.O5,ds.lW,Kg.L,Zx.A,wi.n,d.GI,d.n5,F.JJ,ye.JV,ye.qY],styles:[".table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center;vertical-align:middle}"]}),n})();function BU(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li",9)(1,"button",10),e.NdJ("click",function(){const r=e.CHM(t).index,s=e.oxw();return e.KtG(s.chooseTapClass(r))}),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()}if(2&n){const t=o.$implicit,i=o.index,a=e.oxw();e.xp6(1),e.Gre("nav-link w-full py-2 ",a.indexClassInArray==i?"active":"",""),e.xp6(1),e.hij(" ",e.lcZ(3,4,null==t.classObj?null:t.classObj.name)," ")}}function PU(n,o){1&n&&(e.TgZ(0,"div",11)(1,"span",12),e._UZ(2,"azt-loading-ui"),e.qZA(),e.TgZ(3,"span",13),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()()),2&n&&(e.xp6(4),e.hij("",e.lcZ(5,1,"lang_cms_common_loading"),"..."))}function QU(n,o){1&n&&(e.TgZ(0,"span",26),e._UZ(1,"azt-loading-ui"),e.qZA())}const Pw=function(n){return{"rotated-icon":n}};function FU(n,o){if(1&n&&(e.O4$(),e.TgZ(0,"svg",27),e._UZ(1,"polyline",28)(2,"line",29)(3,"polyline",30)(4,"line",31),e.qZA()),2&n){const t=e.oxw(2);e.Q6J("ngClass",e.VKq(1,Pw,2==t.checkSortObj.fullName))}}function NU(n,o){1&n&&(e.TgZ(0,"span",26),e._UZ(1,"azt-loading-ui"),e.qZA())}function ZU(n,o){if(1&n&&(e.O4$(),e.TgZ(0,"svg",27),e._UZ(1,"polyline",28)(2,"line",29)(3,"polyline",30)(4,"line",31),e.qZA()),2&n){const t=e.oxw(2);e.Q6J("ngClass",e.VKq(1,Pw,2==t.checkSortObj.point))}}function DU(n,o){1&n&&(e.TgZ(0,"tbody")(1,"tr")(2,"td",32)(3,"p",33),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()()()()),2&n&&(e.xp6(4),e.hij("",e.lcZ(5,1,"lang_testbank_statistical_cant_had_student"),"."))}function UU(n,o){if(1&n&&(e.TgZ(0,"td",38),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.fullName)}}function jU(n,o){if(1&n&&(e.TgZ(0,"td",38),e._UZ(1,"img",42),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("nameImages",t.nameImages)}}function qU(n,o){if(1&n&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"formatOnlyDateByUserUnitPipe"),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,t.birthday))}}function RU(n,o){1&n&&(e._uU(0),e.ALo(1,"mytranslate")),2&n&&e.hij(" ",e.lcZ(1,1,"lang_testbank_statistical_student_cant_enter_birthday"),". ")}function zU(n,o){1&n&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_testbank_statistical_not_mark")," "))}function HU(n,o){1&n&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_testbank_statistical_exam_progress")," "))}function JU(n,o){1&n&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_testbank_statistical_exam_not_submit")," "))}function KU(n,o){1&n&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_testbank_statistical_not_exem_yet")," "))}function GU(n,o){if(1&n&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.mark," ")}}function YU(n,o){if(1&n&&(e.TgZ(0,"tr")(1,"td",38),e._uU(2),e.qZA(),e.YNc(3,UU,2,1,"td",39),e.YNc(4,jU,2,1,"td",39),e.TgZ(5,"td",38),e.YNc(6,qU,3,3,"div",23),e.YNc(7,RU,2,3,"ng-template",null,40,e.W1O),e.qZA(),e.TgZ(9,"td",41),e.YNc(10,zU,3,3,"div",34),e.YNc(11,HU,3,3,"div",34),e.YNc(12,JU,3,3,"div",34),e.YNc(13,KU,3,3,"div",34),e.YNc(14,GU,2,1,"div",34),e.qZA()()),2&n){const t=o.$implicit,i=o.index,a=e.MAs(8);e.xp6(2),e.Oqu(i+1),e.xp6(1),e.Q6J("ngIf",!t.nameImages||!t.nameImages.url),e.xp6(1),e.Q6J("ngIf",t.nameImages&&t.nameImages.url),e.xp6(2),e.Q6J("ngIf",null!=t.birthday)("ngIfElse",a),e.xp6(4),e.Q6J("ngIf",t.isNotMarked),e.xp6(1),e.Q6J("ngIf",t.isOnTest),e.xp6(1),e.Q6J("ngIf",t.isNotSubmit),e.xp6(1),e.Q6J("ngIf",t.isNotTested),e.xp6(1),e.Q6J("ngIf",t.isMarked)}}function $U(n,o){if(1&n&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"replace"),e.ALo(3,"number"),e.qZA()),2&n){const t=e.oxw(4);let i;e.xp6(1),e.hij(" ",e.Dn7(2,1,e.xi3(3,5,null!==(i=t.statisticObj[t.indexClassInArray].avgMark)&&void 0!==i?i:0,"1.0-2"),",",".")," ")}}function VU(n,o){if(1&n&&(e.TgZ(0,"tbody"),e.YNc(1,YU,15,10,"tr",35),e.TgZ(2,"tr",36)(3,"td",37),e._uU(4),e.ALo(5,"mytranslate"),e.qZA(),e.TgZ(6,"td",38),e.YNc(7,$U,4,8,"div",34),e.qZA()()()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",null==t.statisticObj[t.indexClassInArray]?null:t.statisticObj[t.indexClassInArray].studentsWithMark),e.xp6(3),e.Oqu(e.lcZ(5,3,"lang_testbank_statistical_avg_max_point")),e.xp6(3),e.Q6J("ngIf",t.statisticObj.length>0&&t.statisticObj[t.indexClassInArray])}}function WU(n,o){if(1&n&&e.YNc(0,VU,8,5,"tbody",34),2&n){const t=e.oxw(2);e.Q6J("ngIf",t.indexClassInArray>-1)}}function XU(n,o){1&n&&(e.TgZ(0,"span",48),e._UZ(1,"azt-loading-ui"),e.qZA())}function ej(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",43)(1,"button",44),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.showMore(a.indexClassInArray))}),e.YNc(2,XU,2,0,"span",45),e._uU(3),e.ALo(4,"mytranslate"),e.O4$(),e.TgZ(5,"svg",46),e._UZ(6,"polyline",47),e.qZA()()()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("disabled",t.loadingChangeClassroom||!t.enableNextPage),e.xp6(1),e.Q6J("ngIf",t.loadingChangeClassroom),e.xp6(1),e.hij(" ",e.lcZ(4,3,"lang_auto_xem_them"),"\xa0 ")}}function tj(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",14)(1,"table",15)(2,"thead",16)(3,"tr")(4,"th",17)(5,"div",18),e._uU(6),e.ALo(7,"mytranslate"),e.qZA()(),e.TgZ(8,"th",17)(9,"div",19),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.sortFullNameStudent(a.indexClassInArray))}),e._uU(10),e.ALo(11,"mytranslate"),e.YNc(12,QU,2,0,"span",20),e.YNc(13,FU,5,3,"svg",21),e.qZA()(),e.TgZ(14,"th",17)(15,"div",18),e._uU(16),e.ALo(17,"mytranslate"),e.qZA()(),e.TgZ(18,"th",17)(19,"div",22),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.sortStudentByPoint(a.indexClassInArray))}),e._uU(20),e.ALo(21,"mytranslate"),e.YNc(22,NU,2,0,"span",20),e.YNc(23,ZU,5,3,"svg",21),e.qZA()()()(),e.YNc(24,DU,6,3,"tbody",23),e.YNc(25,WU,1,1,"ng-template",null,24,e.W1O),e.qZA(),e.YNc(27,ej,7,5,"div",25),e.qZA()}if(2&n){const t=e.MAs(26),i=e.oxw();e.xp6(6),e.hij(" ",e.lcZ(7,11,"lang_auto_STT")," "),e.xp6(4),e.hij(" ",e.lcZ(11,13,"lang_first_and_last_name")," "),e.xp6(2),e.Q6J("ngIf",i.loadingOrder),e.xp6(1),e.Q6J("ngIf",!i.loadingOrder),e.xp6(3),e.hij(" ",e.lcZ(17,15,"lang_birthday")," "),e.xp6(4),e.hij(" ",e.lcZ(21,17,"lang_point")," "),e.xp6(2),e.Q6J("ngIf",i.loadingOrder),e.xp6(1),e.Q6J("ngIf",!i.loadingOrder),e.xp6(1),e.Q6J("ngIf",i.indexClassInArray>-1&&i.statisticObj.length>0&&0==(null==i.statisticObj[i.indexClassInArray].studentsWithMark?null:i.statisticObj[i.indexClassInArray].studentsWithMark.length)||-1==i.indexClassInArray&&0==i.freeStudentList.length)("ngIfElse",t),e.xp6(3),e.Q6J("ngIf",i.getStudentLength())}}let nj=(()=>{class n extends xe.Q{chooseTapClass(t,i,a,r){this.indexClassInArray!=t&&(this.page=1,this.indexClassInArray=t),i&&(this.loadingChangeClassroom=!0,this.page++),a&&(this.loadingOrder=!0),this.statisticObj[t]&&this.statisticObj[t].classObj?.id?this.examPageResultService.apiExamPageResultListTranscriptsGet(this.examObj?.id??0,this.statisticObj[t].classObj?.id,void 0,void 0,1,50*this.page,a??void 0,r??void 0).subscribe(s=>{s.success&&s.data?(this.statisticObj[t].studentsWithMark=this.convertStudentResults(s.data.obj?.results??[]),this.statisticObj[t].avgMark=s.data.obj?.averageMark??0,this.enableNextPage=s.data.obj?.next??!1,this.readyData(t,!!a),a&&(this.loadingOrder=!1),i?this.loadingChangeClassroom=!1:this.doneLoadingEmit.emit(!0)):(a&&(this.loadingOrder=!1),i?this.loadingChangeClassroom=!1:this.doneLoadingEmit.emit(!1))}):i||a?this.loadingChangeClassroom=!1:this.doneLoadingEmit.emit(!1)}showMore(t){this.checkSortObj.fullName?this.chooseTapClass(t,!0,"fullname",1==this.checkSortObj.fullName?"asc":"desc"):this.checkSortObj.point?this.chooseTapClass(t,!0,"mark",1==this.checkSortObj.point?"asc":"desc"):this.chooseTapClass(t,!0)}convertStudentResults(t){let i=[];return t.forEach(a=>{let r={id:a.studentId?.toString(),resultId:a.id,userId:a.userId,fullName:a.attendeeName,nameImages:a.attendeeNameImage,birthday:a.attendeeBirthDay,mark:a.mark,startedTest:a.startedTest,confirmedAt:a.confirmedAt,status:a.testStatus,createdAt:a.createdAt};i.push(r)}),i}getStudentLength(){return this.statisticObj[this.indexClassInArray]&&this.statisticObj[this.indexClassInArray].studentsWithMark?this.statisticObj[this.indexClassInArray].studentsWithMark?.length??0:0}getDataStatistic(){if(this.initStatusObj(),this.dataStatistical){let t=this.dataStatistical;this.examObj.id=t.id,this.examObj.name=t.name??"",t.classrooms?(t.classrooms.forEach(i=>{let a={classObj:{...i,teacherId:0,countStudents:0,showAddStudent:0,grade:0,name:i.name??"lang_auto_tu_do"},studentsWithMark:[]};this.statisticObj.push(a)}),this.chooseTapClass(0)):this.doneLoadingEmit.emit(!1)}else this.doneLoadingEmit.emit(!1)}readyData(t,i){let a=this.commonService.myClone(this.statisticObj[t].studentsWithMark)??[];if(this.statisticObj[t].studentsWithMark=this.checkStatusStudent(this.statisticObj[t].classObj&&0==this.statisticObj[t].classObj?.sortType?i?a:this.sortService.sortFirstNameStudents(a):i?a:this.sortService.sortArrayByMultipleObjectKeyAsc(a,"pos","id")),this.statisticObj[t].studentsWithMark)for(let r=0;r<(this.statisticObj[t].studentsWithMark?.length??0);r++)this.statisticObj[t].studentsWithMark[r].isMarked||(this.statisticObj[t].studentsWithMark[r].mark=-1);this.doneLoadingEmit.emit(!0),this.successStatusObj()}checkStatusStudent(t){var i=[];return t.forEach(a=>{a.confirmedAt&&""!=a.confirmedAt&&a.resultId&&a.resultId>0?a.isMarked=!0:a.resultId&&a.resultId>0&&(!a.confirmedAt||""==a.confirmedAt)?a.isNotMarked=!0:a.resultId&&0!=a.resultId||!a.startedTest||""==a.startedTest||0!=a.status?a.resultId&&0!=a.resultId||!a.startedTest||""==a.startedTest||-1!=a.status?null==a.startedTest&&(a.isNotTested=!0):a.isNotSubmit=!0:a.isOnTest=!0,i.push(a)}),i}calcAvgClassroomMark(t){var i=0,a=0;return t.forEach(r=>{r.isMarked&&(i++,a+=r.mark??0)}),i>0?(a/i).toFixed(2):0}goToStudentList(t){let i=`/admin/testbank/statistic/${this.examObj?.categoryId??0}/${this.examObj?.id}`;this.commonService.myNavigationWithQueryString(`/admin/student/classroom-details/${t.classObj?.id}/0`,"?backto="+encodeURIComponent(i))}sortFullNameStudent(t){this.checkSortObj.fullName=0==this.checkSortObj.fullName||2==this.checkSortObj.fullName?1:2,this.checkSortObj.fullName?(this.checkSortObj.point=0,this.chooseTapClass(t,!1,"fullname",1==this.checkSortObj.fullName?"asc":"desc")):this.chooseTapClass(t,!1)}sortStudentByPoint(t){this.checkSortObj.point=0==this.checkSortObj.point||2==this.checkSortObj.point?1:2,this.checkSortObj.point?(this.checkSortObj.fullName=0,this.chooseTapClass(t,!1,"mark",1==this.checkSortObj.point?"asc":"desc")):this.chooseTapClass(t,!1)}_sortByPoint(t){return t.sort((i,a)=>Number(i.mark)-Number(a.mark)),t}constructor(t,i,a){super(),this.sortService=t,this.globalService=i,this.examPageResultService=a,this.viewType=-1,this.doneLoadingEmit=new e.vpe,this.examId=0,this.indexClassInArray=0,this.statisticObj=[],this.statisticObjClone=[],this.isCheckData=!1,this.hasEssayQuestion=!1,this.examObj={id:0,name:"",countQuestion:0,showFrontend:0,editable:!1,permissionObj:{},allowStudentView:!1},this.freeStudentList=[],this.checkSortObj={numberIndex:!1,fullName:0,point:0},this.loadingChangeClassroom=!1,this.loadingOrder=!1,this.page=1,this.enableNextPage=!0}ngOnChanges(){this.dataStatistical&&!this.commonService.isEmptyObj(this.dataStatistical)&&this.getDataStatistic()}ngOnInit(){this.dataStatistical&&!this.commonService.isEmptyObj(this.dataStatistical)&&this.getDataStatistic(),super.ngOnInit()}ngOnDestroy(){this.globalService.stopIntervalFunc("statistic_score"),super.ngOnDestroy()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(th.V),e.Y36(i_.q),e.Y36(un.DR))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-table-score-new"]],inputs:{viewType:"viewType",dataStatistical:"dataStatistical"},outputs:{doneLoadingEmit:"doneLoadingEmit"},features:[e.qOj,e.TTD],decls:11,vars:6,consts:[[1,"intro-y","block","sm:flex","items-center"],[1,"text-lg","font-medium","truncate","mr-5"],[1,"report-box","intro-x","mt-5"],[1,"box","p-5"],["role","tablist",1,"nav","nav-link-tabs",2,"overflow-x","auto"],["id","example-5-tab","class","nav-item flex-1","role","presentation",4,"ngFor","ngForOf"],[1,"tab-content","overflow-x-auto","mt-5",2,"overflow-y","hidden"],["class","flex justify-center pb-5",4,"ngIf"],["id","example-tab-5","class","tab-pane leading-relaxed active","role","tabpanel","aria-labelledby","example-5-tab",4,"ngIf"],["id","example-5-tab","role","presentation",1,"nav-item","flex-1"],["azt-track-service","table-score-ZNru2_q8UiD","data-tw-toggle","pill","data-tw-target","#example-tab-5","type","button","role","tab","aria-controls","example-tab-5","aria-selected","true",3,"click"],[1,"flex","justify-center","pb-5"],[1,"w-4","h-4","inline-block"],[1,"sr-only","ml-2"],["id","example-tab-5","role","tabpanel","aria-labelledby","example-5-tab",1,"tab-pane","leading-relaxed","active"],[1,"intro-x","table","table-bordered"],[1,"bg-slate-100","dark:bg-darkmode-400"],[1,"whitespace-nowrap"],[1,"flex","items-center","justify-center"],["azt-track-service","table-score-1KLvUodz_gh",1,"flex","items-center","justify-center",3,"click"],["class","w-5 h-5 ml-1",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","class","w-5 h-5 ml-1 inline-block","style","cursor: pointer","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",3,"ngClass",4,"ngIf"],["azt-track-service","table-score-ItfC-iAX4HX",1,"flex","items-center","justify-center",3,"click"],[4,"ngIf","ngIfElse"],["table",""],["class","text-center mt-3",4,"ngIf"],[1,"w-5","h-5","ml-1"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-5","h-5","ml-1","inline-block",2,"cursor","pointer",3,"ngClass"],["points","11 17 7 21 3 17"],["x1","7","y1","21","x2","7","y2","9"],["points","21 7 17 3 13 7"],["x1","17","y1","15","x2","17","y2","3"],["colspan","4"],[1,"text-center","font-weight-bold","p-0","m-0"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"font-medium","text-center"],["colspan","3",2,"text-align","center","vertical-align","middle"],[2,"text-align","center","vertical-align","middle"],["style","text-align: center; vertical-align: middle",4,"ngIf"],["birthday",""],[1,"text-center",2,"text-align","center","vertical-align","middle"],["appDrawNameImage","","loading","lazy",1,"img-name-fluid",3,"nameImages"],[1,"text-center","mt-3"],["azt-track-service","table-score-RqXWm0zMM","mat-button","",1,"btn","btn-outline-secondary","btn-transparent",3,"disabled","click"],["class","w-4 h-4 inline-block mr-2",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["points","6 9 12 15 18 9"],[1,"w-4","h-4","inline-block","mr-2"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"h3",1),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()(),e.TgZ(4,"div",2)(5,"div",3)(6,"ul",4),e.YNc(7,BU,4,6,"li",5),e.qZA(),e.TgZ(8,"div",6),e.YNc(9,PU,6,3,"div",7),e.YNc(10,tj,28,19,"div",8),e.qZA()()()),2&t&&(e.xp6(2),e.hij(" ",e.lcZ(3,4,"lang_auto_bang_diem")," "),e.xp6(5),e.Q6J("ngForOf",i.statisticObj),e.xp6(2),e.Q6J("ngIf",i.loadingChangeClassroom),e.xp6(1),e.Q6J("ngIf",!i.loadingChangeClassroom))},dependencies:[F.mk,F.sg,F.O5,ds.lW,Kg.L,wi.n,F.JJ,ye.JV,ye.qY,ye.YK],styles:["td[_ngcontent-%COMP%]{vertical-align:middle!important}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:center;vertical-align:middle!important}.link-stu[_ngcontent-%COMP%]:hover{color:#007bff}.block-center[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.sort-icon[_ngcontent-%COMP%]{margin-top:4px;margin-left:4px}th[_ngcontent-%COMP%]{background:#2361ae;color:#fff;font-weight:400}.text-weight-500[_ngcontent-%COMP%]{font-weight:500}"]}),n})();var ij=I(72643);function oj(n,o){1&n&&(e.O4$(),e.TgZ(0,"svg",19),e._UZ(1,"path",20)(2,"polyline",21)(3,"path",22)(4,"path",23)(5,"path",24)(6,"path",25),e.qZA())}function aj(n,o){1&n&&(e.TgZ(0,"span",26),e._UZ(1,"azt-loading-ui"),e.qZA())}function rj(n,o){1&n&&(e.TgZ(0,"div",27),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_testbank_statistical_export_file_excel_success")))}function sj(n,o){1&n&&(e.TgZ(0,"div",28),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_testbank_statistical_export_file_excel_error")))}let lj=(()=>{class n extends xe.Q{exportExcel(){let t=this.form.getRawValue();if(0==t.statisticalCheck&&0==t.listQuestionCheck&&0==t.tableScoreCheck){let i=this.commonService.myTranslateInstant("lang_auto_khong_the_de_trong_tat_ca_cac_lua_chon_dot");alert(i)}else this.loadingDownload=!0,this.isExportSuccess=void 0,this.getData(this.examId).then(i=>{setTimeout(()=>{if(1==i){t.statisticalCheck&&this.AddStatisticToSheet(this.Statistic.statisticClass??[],this.Statistic.statisticNoClass??[]),t.tableScoreCheck&&this.AddTableScoreToSheet(this.TableScore.statisticClass??[],this.TableScore.statisticNoClass??[]),t.listQuestionCheck&&this.AddListQuestionToSheet(this.ListQuest.attended??0,this.ListQuest.listQuestions??[],this.ListQuest.listClassStatistic??[]);try{var a;if(a=null!=this.examObj?this.commonService.createFileNameExportFile(["Thong ke de thi",this.examObj.name??""])+".xlsx":this.commonService.createFileNameExportFile(["Thong ke de thi"])+".xlsx",this.commonService.isMobileWebview(void 0)){var r=Gt.write(this.wb,{bookType:"xlsx",bookSST:!0,type:"array"});const l=new Blob([r],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});this.shareFileFlutterService.shareFileWithBlob(l,a)}else Gt.writeFile(this.wb,a);this.isExportSuccess=!0,this.loadingDownload=!1,this.wb=Gt.utils.book_new()}catch(s){console.log(s),this.isExportSuccess=!1,this.loadingDownload=!1,this.wb=Gt.utils.book_new()}}else this.isExportSuccess=!1,this.loadingDownload=!1,this.wb=Gt.utils.book_new()},0)})}AddStatisticToSheet(t,i){let a=this.commonService.myTranslateInstant("lang_auto_lop")??"",r=this.commonService.myTranslateInstant("lang_azt_class_group")??"",s=this.commonService.myTranslateInstant("lang_auto_so_hoc_sinh")??"",l=this.commonService.myTranslateInstant("lang_auto_tren_tb")??"(>5)",c=this.commonService.myTranslateInstant("lang_auto_dang_ky")??"",u=this.commonService.myTranslateInstant("lang_auto_du_thi")??"",m=this.commonService.myTranslateInstant("lang_auto_amount")??"",p=this.commonService.myTranslateInstant("lang_auto_tong_upper"),b=1,L=Gt.utils.json_to_sheet([{A:r,B:a,C:s,D:"",E:"<1",F:"",G:"<2",H:"",I:"<3",J:"",K:"<4",L:"",M:"<5",N:"",O:"<6",P:"",Q:"<7",R:"",S:"<8",T:"",U:"<9",V:"",W:"<=10",X:"",Y:l+"(>= 5)",Z:""},{A:"",B:"",C:c,D:u,E:m,F:"%",G:m,H:"%",I:m,J:"%",K:m,L:"%",M:m,N:"%",O:m,P:"%",Q:m,R:"%",S:m,T:"%",U:m,V:"%",W:m,X:"%",Y:m,Z:"%"}],{skipHeader:!0});const N_e_c=25;for(let ve=0;ve<=N_e_c;++ve)L[Gt.utils.encode_cell({c:ve,r:0})].s=this.style_header;let R=[{s:{r:0,c:2},e:{r:0,c:3}},{s:{r:0,c:4},e:{r:0,c:5}},{s:{r:0,c:6},e:{r:0,c:7}},{s:{r:0,c:8},e:{r:0,c:9}},{s:{r:0,c:10},e:{r:0,c:11}},{s:{r:0,c:12},e:{r:0,c:13}},{s:{r:0,c:14},e:{r:0,c:15}},{s:{r:0,c:16},e:{r:0,c:17}},{s:{r:0,c:18},e:{r:0,c:19}},{s:{r:0,c:20},e:{r:0,c:21}},{s:{r:0,c:22},e:{r:0,c:23}},{s:{r:0,c:24},e:{r:0,c:25}},{s:{r:1,c:0},e:{r:1,c:1}}];if(null==t&&null==i){let ve=this.commonService.myTranslateInstant("lang_auto_chua_co_du_lieu_thong_ke")??"";Gt.utils.sheet_add_json(L,[{A:ve}],{skipHeader:!0,origin:-1})}else{if(null!=t){let se=0;t.length&&t.push({classObj:{id:0,name:"",teacherId:0,countStudents:0,grade:0,showAddStudent:0,classroomGroup:{id:0}},markPercent:t[t.length-1].markPercent??[],registerCount:t[t.length-1].registerCount??0,testedCount:t[t.length-1].testedCount??0}),t.forEach((pe,Be)=>{if(null!=pe.classObj){if(se!=pe.classObj.classroomGroup?.id&&se){let Pe=this.totalPoint(t.filter(Ke=>Ke.classObj?.classroomGroup?.id==se),[]),Oe=this.totalPercent(t.filter(Ke=>Ke.classObj?.classroomGroup?.id==se),[]),Fe=this.totalStudentRegister(t.filter(Ke=>Ke.classObj?.classroomGroup?.id==se),[]),Re=this.totalStudentTakeExam(t.filter(Ke=>Ke.classObj?.classroomGroup?.id==se),[]),Je=this.commonService.myTranslateInstant("lang_auto_tong_upper");Gt.utils.sheet_add_json(L,[{A:Je,B:"",C:Fe,D:Re,E:Pe[0],F:this._decimalPipe.transform(Oe[0],"1.0-2"),G:Pe[1],H:this._decimalPipe.transform(Oe[1],"1.0-2"),I:Pe[2],J:this._decimalPipe.transform(Oe[2],"1.0-2"),K:Pe[3],L:this._decimalPipe.transform(Oe[3],"1.0-2"),M:Pe[4],N:this._decimalPipe.transform(Oe[4],"1.0-2"),O:Pe[5],P:this._decimalPipe.transform(Oe[5],"1.0-2"),Q:Pe[6],R:this._decimalPipe.transform(Oe[6],"1.0-2"),S:Pe[7],T:this._decimalPipe.transform(Oe[7],"1.0-2"),U:Pe[8],V:this._decimalPipe.transform(Oe[8],"1.0-2"),W:Pe[9],X:this._decimalPipe.transform(Oe[9],"1.0-2"),Y:Pe[10],Z:this._decimalPipe.transform(Oe[10],"1.0-2")}],{skipHeader:!0,origin:-1}),b++,R.push({s:{r:b,c:0},e:{r:b,c:1}})}se=pe.classObj.classroomGroup?.id??0,pe.classObj.id&&(Gt.utils.sheet_add_json(L,[{A:pe.classObj.classroomGroup?.name??"",B:pe.classObj.name,C:pe.registerCount,D:pe.testedCount,E:pe.markPercent[0].count,F:this._decimalPipe.transform(pe.markPercent[0].percent,"1.0-2"),G:pe.markPercent[1].count,H:this._decimalPipe.transform(pe.markPercent[1].percent,"1.0-2"),I:pe.markPercent[2].count,J:this._decimalPipe.transform(pe.markPercent[2].percent,"1.0-2"),K:pe.markPercent[3].count,L:this._decimalPipe.transform(pe.markPercent[3].percent,"1.0-2"),M:pe.markPercent[4].count,N:this._decimalPipe.transform(pe.markPercent[4].percent,"1.0-2"),O:pe.markPercent[5].count,P:this._decimalPipe.transform(pe.markPercent[5].percent,"1.0-2"),Q:pe.markPercent[6].count,R:this._decimalPipe.transform(pe.markPercent[6].percent,"1.0-2"),S:pe.markPercent[7].count,T:this._decimalPipe.transform(pe.markPercent[7].percent,"1.0-2"),U:pe.markPercent[8].count,V:this._decimalPipe.transform(pe.markPercent[8].percent,"1.0-2"),W:pe.markPercent[9].count,X:this._decimalPipe.transform(pe.markPercent[9].percent,"1.0-2"),Y:pe.markPercent[10].count,Z:this._decimalPipe.transform(pe.markPercent[10].percent,"1.0-2")}],{skipHeader:!0,origin:-1}),b++)}})}i?.forEach(se=>{if((se.registerCount??0)>0){let pe=this.commonService.myTranslateInstant("lang_auto_thi_sinh_tu_do");Gt.utils.sheet_add_json(L,[{A:pe,B:pe,C:se.registerCount,D:se.testedCount,E:se.markPercent[0].count,F:this._decimalPipe.transform(se.markPercent[0].percent,"1.0-2"),G:se.markPercent[1].count,H:this._decimalPipe.transform(se.markPercent[1].percent,"1.0-2"),I:se.markPercent[2].count,J:this._decimalPipe.transform(se.markPercent[2].percent,"1.0-2"),K:se.markPercent[3].count,L:this._decimalPipe.transform(se.markPercent[3].percent,"1.0-2"),M:se.markPercent[4].count,N:this._decimalPipe.transform(se.markPercent[4].percent,"1.0-2"),O:se.markPercent[5].count,P:this._decimalPipe.transform(se.markPercent[5].percent,"1.0-2"),Q:se.markPercent[6].count,R:this._decimalPipe.transform(se.markPercent[6].percent,"1.0-2"),S:se.markPercent[7].count,T:this._decimalPipe.transform(se.markPercent[7].percent,"1.0-2"),U:se.markPercent[8].count,V:this._decimalPipe.transform(se.markPercent[8].percent,"1.0-2"),W:se.markPercent[9].count,X:this._decimalPipe.transform(se.markPercent[9].percent,"1.0-2"),Y:se.markPercent[10].count,Z:this._decimalPipe.transform(se.markPercent[10].percent,"1.0-2")}],{skipHeader:!0,origin:-1}),b++;let Be=this.totalPoint([],i),Pe=this.totalPercent([],i),Oe=this.totalStudentRegister([],i),Fe=this.totalStudentTakeExam([],i);Gt.utils.sheet_add_json(L,[{A:p,B:"",C:Oe,D:Fe,E:Be[0],F:this._decimalPipe.transform(Pe[0],"1.0-2"),G:Be[1],H:this._decimalPipe.transform(Pe[1],"1.0-2"),I:Be[2],J:this._decimalPipe.transform(Pe[2],"1.0-2"),K:Be[3],L:this._decimalPipe.transform(Pe[3],"1.0-2"),M:Be[4],N:this._decimalPipe.transform(Pe[4],"1.0-2"),O:Be[5],P:this._decimalPipe.transform(Pe[5],"1.0-2"),Q:Be[6],R:this._decimalPipe.transform(Pe[6],"1.0-2"),S:Be[7],T:this._decimalPipe.transform(Pe[7],"1.0-2"),U:Be[8],V:this._decimalPipe.transform(Pe[8],"1.0-2"),W:Be[9],X:this._decimalPipe.transform(Pe[9],"1.0-2"),Y:Be[10],Z:this._decimalPipe.transform(Pe[10],"1.0-2")}],{skipHeader:!0,origin:-1}),b++,R.push({s:{r:b,c:0},e:{r:b,c:1}})}});let ve=this.totalPoint(t,i),ce=this.totalPercent(t,i),te=this.totalStudentRegister(t,i),Se=this.totalStudentTakeExam(t,i),Ze=this.commonService.myTranslateInstant("lang_auto_de_thi");Gt.utils.sheet_add_json(L,[{A:p+" "+Ze,B:"",C:te,D:Se,E:ve[0],F:this._decimalPipe.transform(ce[0],"1.0-2"),G:ve[1],H:this._decimalPipe.transform(ce[1],"1.0-2"),I:ve[2],J:this._decimalPipe.transform(ce[2],"1.0-2"),K:ve[3],L:this._decimalPipe.transform(ce[3],"1.0-2"),M:ve[4],N:this._decimalPipe.transform(ce[4],"1.0-2"),O:ve[5],P:this._decimalPipe.transform(ce[5],"1.0-2"),Q:ve[6],R:this._decimalPipe.transform(ce[6],"1.0-2"),S:ve[7],T:this._decimalPipe.transform(ce[7],"1.0-2"),U:ve[8],V:this._decimalPipe.transform(ce[8],"1.0-2"),W:ve[9],X:this._decimalPipe.transform(ce[9],"1.0-2"),Y:ve[10],Z:this._decimalPipe.transform(ce[10],"1.0-2")}],{skipHeader:!0,origin:-1}),b++,R.push({s:{r:b,c:0},e:{r:b,c:1}})}L["!cols"]=[{width:15},{width:10},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9}],L["!rows"]=[{hpt:28},{hpt:27}],L["!merges"]=R;let ae_s_c=0,ae_e_c=25,ae_e_r=b-1,W_s_c=0,W_e_c=25;for(let ve=1;ve<=ae_e_r;++ve)for(let ce=ae_s_c;ce<=ae_e_c;++ce)L[Gt.utils.encode_cell({c:ce,r:ve})].s=this.style_body;for(let ve=W_s_c;ve<=W_e_c;++ve)L[Gt.utils.encode_cell({c:ve,r:b})].s=this.style_footer;let le=this.commonService.myTranslateInstant("lang_auto_thong_ke_pho_diem");Gt.utils.book_append_sheet(this.wb,L,le&&le?.length>31?le?.substring(0,27)+"...":le)}AddTableScoreToSheet(t,i){var a;let r=this.commonService.myTranslateInstant("lang_auto_stt")??"",s=this.commonService.myTranslateInstant("lang_auto_ho_va_ten")??"",l=this.commonService.myTranslateInstant("lang_auto_gioi_tinh")??"",c=this.commonService.myTranslateInstant("lang_auto_lop")??"",u=this.commonService.myTranslateInstant("lang_azt_class_group")??"",m=this.commonService.myTranslateInstant("lang_auto_ngay_sinh")??"",p=this.commonService.myTranslateInstant("lang_point")??"",f=this.commonService.myTranslateInstant("lang_auto_cau"),b=this.commonService.myTranslateInstant("lang_combine_exam_component")??"";if(0==t.length&&0==i.length){let L=this.commonService.myTranslateInstant("lang_auto_chua_co_hoc_sinh_thanh_gia_lam_de"),N=this.commonService.myTranslateInstant("lang_auto_bang_diem");a=Gt.utils.json_to_sheet([{A:L,B:"",C:"",D:"",E:"",F:"",G:""}],{skipHeader:!0}),Gt.utils.book_append_sheet(this.wb,a,N&&N?.length>31?N?.substring(0,27)+"...":N)}else{let L=[{width:8},{width:22},{width:34},{width:34},{width:34},{width:13},{width:13}];for(let te=0;te<this.limitQuestions;te++)L.push({width:13});let N=[],R=0,j=0;a=Gt.utils.json_to_sheet([{A:""}],{skipHeader:!0});let G=[{A:r,B:s,C:m,D:c,E:u,F:l,G:p}],ae=7,W=0,le=0;this.examObj?.subjectMarks&&(G[0]={...G[0],H:b+"1",I:b+"2",J:b+"3"},ae+=3);for(let te=0;te<this.limitQuestions;te++){ae>=26&&(ae=0,W++);let Se="";0==W&&0==le?Se=this.keyColExcelArr[ae]:(W>26&&(W=1,le++),le>0&&(Se+=this.keyColExcelArr[le-1]),Se+=this.keyColExcelArr[W-1]+""+this.keyColExcelArr[ae]),G[0][Se]=f+" "+(te+(this.examObj?.startQuestionIndex??0)<9?"0"+(te+(this.examObj?.startQuestionIndex??1)):te+(this.examObj?.startQuestionIndex??1)),ae++}if(R+=2,a=Gt.utils.sheet_add_json(a,G,{skipHeader:!0,origin:-1}),0!=t.length){let te=0;t.length&&t.push({classObj:{id:0,name:"",teacherId:0,countStudents:0,grade:0,showAddStudent:0,classroomGroup:{id:0}}});let Se=this.commonService.myTranslateInstant("lang_auto_diem_trung_binh_toan_truong")??"";t.forEach(Ze=>{if(te!=Ze.classObj?.classroomGroup?.id&&te){let se=[],pe="";t.forEach(Be=>{Be.classObj?.classroomGroup?.id==te&&(pe=Be.classObj?.classroomGroup?.name??"",Be.studentsWithMark&&Be.studentsWithMark.length&&(se=se.concat(Be.studentsWithMark.map(Pe=>Pe))))}),Gt.utils.sheet_add_json(a,[{A:"",B:"",C:"",D:"",E:pe,F:"",G:"",H:Se,I:this.calcAvgClassroomMark(se??[])}],{skipHeader:!0,origin:-1}),R+=1}if(te=Ze.classObj?.classroomGroup?.id??0,Ze.classObj?.id){if(0==Ze.studentsWithMark?.length){let Be=[{A:this.commonService.myTranslateInstant("lang_auto_chua_co_hoc_sinh_du_thi"),B:"",C:"",D:"",E:"",F:"",G:""}];N.push({s:{r:R+1,c:0},e:{r:R+1,c:6}}),Gt.utils.sheet_add_json(a,Be,{skipHeader:!0,origin:-1}),R++}else{let pe=this.commonService.myTranslateInstant("lang_auto_chua_cham")??"",Be=this.commonService.myTranslateInstant("lang_auto_dang_thi")??"",Pe=this.commonService.myTranslateInstant("lang_auto_chua_nop_bai")??"",Oe=this.commonService.myTranslateInstant("lang_auto_chua_thi")??"",Fe=this.commonService.myTranslateInstant("lang_auto_hoc_sinh_chua_nhap_ngay_sinh")??"",Re=this.commonService.myTranslateInstant("lang_auto_nam")??"",Je=this.commonService.myTranslateInstant("lang_auto_nu")??"";Ze.studentsWithMark?.forEach(Ke=>{let gt,et=this.timeService.formatOnlyDateByUserUnit(Ke.birthday)?this.timeService.formatOnlyDateByUserUnit(Ke.birthday):void 0;gt=Ke.isNotMarked?pe:Ke.isOnTest?Be:Ke.isNotSubmit?Pe:Ke.isNotTested?Oe:Ke.mark??"",R++;let ue=[{A:j+1,B:Ke.fullName,C:null==Ke.birthday?Fe:`${et}`,D:`${Ze.classObj?.name}`,E:`${Ze.classObj?.classroomGroup?.name}`,F:`${1==Ke.gender?Re:Je}`,G:`${gt}`}],Te=7;if(this.examObj?.subjectMarks){let Ee={};Ee=Ke.subjectMarks?{H:Ke.subjectMarks[0],I:Ke.subjectMarks[1],J:Ke.subjectMarks[2]}:{H:"",I:"",J:""},ue[0]={...ue[0],...Ee},Te+=3}if(Ke.answeredQuestions){let Ee=0,Ue=0;for(let $e=0;$e<Ke.answeredQuestions?.length;$e++){Te>=26&&(Te=0,Ee++);let ut="";0==Ee&&0==Ue?ut=this.keyColExcelArr[Te]:(Ee>26&&(Ee=1,Ue++),Ue>0&&(ut+=this.keyColExcelArr[Ue-1]),ut+=this.keyColExcelArr[Ee-1]+""+this.keyColExcelArr[Te]),ue[0][ut]=this.checkAnswerQuestionTableExport(Ke.answeredQuestions[$e]),Te++}}j++,Gt.utils.sheet_add_json(a,ue,{skipHeader:!0,origin:-1})})}let se=this.commonService.myTranslateInstant("lang_auto_diem_trung_binh")??"";Gt.utils.sheet_add_json(a,[{A:"",B:"",C:"",D:Ze.classObj.name,E:Ze.classObj.classroomGroup?.name,F:"",G:"",H:se,I:this.calcAvgClassroomMark(Ze.studentsWithMark??[])}],{skipHeader:!0,origin:-1}),R+=1}})}if(0!=i.length&&null!=i){let te=this.commonService.myTranslateInstant("lang_auto_chua_cham")??"",Se=this.commonService.myTranslateInstant("lang_auto_dang_thi")??"",Ze=this.commonService.myTranslateInstant("lang_auto_chua_nop_bai")??"",se=this.commonService.myTranslateInstant("lang_auto_chua_thi")??"",pe=this.commonService.myTranslateInstant("lang_auto_hoc_sinh_chua_nhap_ngay_sinh")??"",Be=this.commonService.myTranslateInstant("lang_auto_nam")??"",Pe=this.commonService.myTranslateInstant("lang_auto_nu")??"",Oe=this.commonService.myTranslateInstant("lang_auto_tu_do")??"";Object.keys(i).forEach(Re=>{let et,Je=i[Re],Ke=this.timeService.formatOnlyDateByUserUnit(Je.birthday)?this.timeService.formatOnlyDateByUserUnit(Je.birthday):void 0;et=Je.isNotMarked?te:Je.isOnTest?Se:Je.isNotSubmit?Ze:Je.isNotTested?se:Je.mark??"";let gt=[{A:j+1,B:Je.fullName,C:null==Ke?pe:`${Ke}`,D:Oe,E:Oe,F:`${1==Je.gender?Be:Pe}`,G:et}],ue=7;if(this.examObj?.subjectMarks){let Te={};Te=Je.subjectMarks?{H:Je.subjectMarks[0],I:Je.subjectMarks[1],J:Je.subjectMarks[2]}:{H:"",I:"",J:""},gt[0]={...gt[0],...Te},ue+=3}if(Je.answeredQuestions){let Te=0,Ee=0;for(let Ue=0;Ue<Je.answeredQuestions?.length;Ue++){ue>=26&&(ue=0,Te++);let $e="";0==Te&&0==Ee?$e=this.keyColExcelArr[ue]:(Te>26&&(Te=1,Ee++),Ee>0&&($e+=this.keyColExcelArr[Ee-1]),$e+=this.keyColExcelArr[Te-1]+""+this.keyColExcelArr[ue]),gt[0][$e]=this.checkAnswerQuestionTableExport(Je.answeredQuestions[Ue]),ue++}}Gt.utils.sheet_add_json(a,gt,{skipHeader:!0,origin:-1}),j++,R++});let Fe=this.commonService.myTranslateInstant("lang_auto_diem_trung_binh")??"";Gt.utils.sheet_add_json(a,[{A:"",B:"",C:"",D:Oe,E:Oe,F:"",G:"",H:Fe,I:this.calcAvgClassroomMark(i)}],{skipHeader:!0,origin:-1}),R+=1,Gt.utils.sheet_add_json(a,[{A:"",B:"",C:"",D:"",E:"",F:"",G:""}],{skipHeader:!0,origin:-1})}a["!cols"]=L,a[Gt.utils.encode_cell({c:0,r:1})].s=this.style_header,a[Gt.utils.encode_cell({c:1,r:1})].s=this.style_header,a[Gt.utils.encode_cell({c:2,r:1})].s=this.style_header,a[Gt.utils.encode_cell({c:3,r:1})].s=this.style_header,a[Gt.utils.encode_cell({c:4,r:1})].s=this.style_header,a[Gt.utils.encode_cell({c:5,r:1})].s=this.style_header,a[Gt.utils.encode_cell({c:6,r:1})].s=this.style_header;for(let te=0;te<this.limitQuestions+(this.examObj?.subjectMarks?3:0);te++)a[Gt.utils.encode_cell({c:7+te,r:1})]&&(a[Gt.utils.encode_cell({c:7+te,r:1})].s=this.style_header);let ve={s:{c:0,r:2},e:{c:6+this.limitQuestions+(this.examObj?.subjectMarks?3:0),r:R}};for(let te=ve.s.r;te<=ve.e.r;++te)for(let Se=ve.s.c;Se<=ve.e.c;++Se)a[Gt.utils.encode_cell({c:Se,r:te})]&&(a[Gt.utils.encode_cell({c:Se,r:te})].s=this.style_body);let ce=this.commonService.myTranslateInstant("lang_auto_bang_diem");Gt.utils.book_append_sheet(this.wb,a,ce&&ce?.length>31?ce?.substring(0,27)+"...":ce)}}AddListQuestionToSheet(t,i,a){var r,s=0,l=[{s:{r:0,c:0},e:{r:0,c:8}}],u=[],m=[];if(r=Gt.utils.json_to_sheet([{A:""}],{skipHeader:!0}),0==t){let p=this.commonService.myTranslateInstant("lang_auto_chua_co_du_lieu_thong_ke"),f=this.commonService.myTranslateInstant("lang_auto_bang_ty_le_dung_sai_export"),b=[{A:p,B:"",C:"",D:"",E:"",F:"",G:"",H:"",I:""}];s++,u.push(s),l.push({s:{r:s-1,c:0},e:{r:s-1,c:8}}),r=Gt.utils.sheet_add_json(r,b,{skipHeader:!0,origin:-1}),Gt.utils.book_append_sheet(this.wb,r,f&&f?.length>31?f?.substring(0,27)+"...":f)}else{let p=this.commonService.myTranslateInstant("lang_auto_cau_hoi"),f=this.commonService.myTranslateInstant("lang_auto_tong_so_hs_du_thi"),b=this.commonService.myTranslateInstant("lang_auto_so_hs_da_lam"),L=this.commonService.myTranslateInstant("lang_auto_so_hs_chua_lam"),N=this.commonService.myTranslateInstant("lang_auto_so_hs_lam_dung"),R=this.commonService.myTranslateInstant("lang_auto_so_hs_lam_sai"),j=this.commonService.myTranslateInstant("lang_auto_ty_le_hoc_sinh_khong_hoan_thanh_cau"),G=this.commonService.myTranslateInstant("lang_auto_danh_sach_hoc_sinh_lam_sai"),ae=this.commonService.myTranslateInstant("lang_testbank_statistical_student_who_not_answer"),W=this.commonService.myTranslateInstant("lang_auto_thong_ke_theo_cau_hoi"),le=this.commonService.myTranslateInstant("lang_auto_cau");a.length>0&&a.forEach(te=>{let Se=[{A:te.name,B:"",C:"",D:"",E:"",F:"",G:"",H:"",I:""},{A:p,B:f,C:b,D:L,E:N,F:R,G:j,H:G,I:ae}];if(u.push(s+=2),l.push({s:{r:s-1,c:0},e:{r:s-1,c:8}}),r=Gt.utils.sheet_add_json(r,Se,{skipHeader:!0,origin:-1}),0==te.listQuestions?.length){let se=[{A:this.commonService.myTranslateInstant("lang_auto_chua_co_du_lieu_thong_ke"),B:"",C:"",D:"",E:"",F:"",G:"",H:"",I:""}];s++,l.push({s:{r:s+1,c:0},e:{r:s+1,c:8}}),Gt.utils.sheet_add_json(r,se,{skipHeader:!0,origin:-1})}else te.listQuestions?.forEach((Ze,se)=>{let Be=[{A:`${le} ${Ze.id}`,B:Ze.countAttended,C:Ze.countTested,D:Ze.countNotAnswer,E:Ze.countTrue,F:Ze.countFalse,G:0!=Ze.countAttended?`${((Ze.countNotAnswer+Ze.countFalse)/Ze.countAttended*100).toFixed(2)}%`:"0%",H:this.getNameStudentWhoFalse(Ze.studentWhoFalse).join(", "),I:this.getNameStudentWhoFalse(Ze.studentWhoNotAnswer).join(", ")}];Gt.utils.sheet_add_json(r,Be,{skipHeader:!0,origin:-1}),s++});m.push(s),s+=2,Gt.utils.sheet_add_json(r,[{A:"",B:"",C:"",D:"",E:"",F:"",G:"",H:"",I:""},{A:"",B:"",C:"",D:"",E:"",F:"",G:"",H:"",I:""}],{skipHeader:!0,origin:-1})});let ve=[{A:W,B:"",C:"",D:"",E:"",F:"",G:"",H:"",I:""},{A:p,B:f,C:b,D:L,E:N,F:R,G:j,H:G,I:ae}];l.push({s:{r:(s+=2)-1,c:0},e:{r:s-1,c:8}}),u.push(s),r=Gt.utils.sheet_add_json(r,ve,{skipHeader:!0,origin:-1}),i.forEach((te,Se)=>{Gt.utils.sheet_add_json(r,[{A:`${le} ${te.id}`,B:te.countAttended,C:te.countTested,D:te.countNotAnswer,E:te.countTrue,F:te.countFalse,G:0!=te.countAttended?`${((te.countNotAnswer+te.countFalse)/te.countAttended*100).toFixed(2)}%`:"0%",H:this.getNameStudentWhoFalse(te.studentWhoFalse).join(", "),I:this.getNameStudentWhoFalse(te.studentWhoNotAnswer).join(", ")}],{skipHeader:!0,origin:-1}),s++}),m.push(s),Gt.utils.sheet_add_json(r,[{A:"",B:"",C:"",D:"",E:"",F:"",G:"",H:"",I:""},{A:"",B:"",C:"",D:"",E:"",F:"",G:"",H:"",I:""}],{skipHeader:!0,origin:-1}),r["!cols"]=[{wch:15.25},{wch:10.63},{wch:6.25},{wch:8.25},{wch:9},{wch:7.25},{wch:16.75},{wch:60},{wch:60}],r["!merges"]=l;for(let te=0;te<u.length;te++){r[Gt.utils.encode_cell({c:0,r:u[te]-1})].s={alignment:{vertical:"center",horizontal:"center"},font:{bold:!0}},r[Gt.utils.encode_cell({c:1,r:u[te]-1})].s={alignment:{vertical:"center",horizontal:"center"},font:{bold:!0}},r[Gt.utils.encode_cell({c:2,r:u[te]-1})].s={alignment:{vertical:"center",horizontal:"center"},font:{bold:!0}},r[Gt.utils.encode_cell({c:3,r:u[te]-1})].s={alignment:{vertical:"center",horizontal:"center"},font:{bold:!0}},r[Gt.utils.encode_cell({c:4,r:u[te]-1})].s={alignment:{vertical:"center",horizontal:"center"},font:{bold:!0}},r[Gt.utils.encode_cell({c:5,r:u[te]-1})].s={alignment:{vertical:"center",horizontal:"center"},font:{bold:!0}},r[Gt.utils.encode_cell({c:6,r:u[te]-1})].s={alignment:{vertical:"center",horizontal:"center"},font:{bold:!0}},r[Gt.utils.encode_cell({c:7,r:u[te]-1})].s={alignment:{vertical:"center",horizontal:"center"},font:{bold:!0}},r[Gt.utils.encode_cell({c:8,r:u[te]-1})].s={alignment:{vertical:"center",horizontal:"center"},font:{bold:!0}},r[Gt.utils.encode_cell({c:0,r:u[te]})].s=this.style_header,r[Gt.utils.encode_cell({c:1,r:u[te]})].s=this.style_header,r[Gt.utils.encode_cell({c:2,r:u[te]})].s=this.style_header,r[Gt.utils.encode_cell({c:3,r:u[te]})].s=this.style_header,r[Gt.utils.encode_cell({c:4,r:u[te]})].s=this.style_header,r[Gt.utils.encode_cell({c:5,r:u[te]})].s=this.style_header,r[Gt.utils.encode_cell({c:6,r:u[te]})].s=this.style_header,r[Gt.utils.encode_cell({c:7,r:u[te]})].s=this.style_header,r[Gt.utils.encode_cell({c:8,r:u[te]})].s=this.style_header;let Se={s:{c:0,r:u[te]+1},e:{c:8,r:m[te]}};for(let Ze=Se.s.r;Ze<=Se.e.r;++Ze)for(let se=Se.s.c;se<=Se.e.c;++se)r[Gt.utils.encode_cell({c:se,r:Ze})].s=this.style_body}let ce=this.commonService.myTranslateInstant("lang_auto_bang_ty_le_dung_sai_export");Gt.utils.book_append_sheet(this.wb,r,ce&&ce?.length>31?ce?.substring(0,27)+"...":ce)}}getNameStudentWhoFalse(t){var i=[];return t.forEach(a=>{a.fullName&&i.push(a.fullName)}),i.length>50?[this.commonService.myTranslateInstant("lang_testbank_statistical_student_not_show_who_wrong")??""]:i}checkStatusStudent(t,i){var a=[];return t.forEach(r=>{r.confirmedAt&&""!=r.confirmedAt&&r.resultId&&r.resultId>0?r.isMarked=!0:r.resultId&&r.resultId>0&&(!r.confirmedAt||""==r.confirmedAt)?r.isNotMarked=!0:r.resultId&&0!=r.resultId||!r.startedTest||""==r.startedTest||0!=r.status?r.resultId&&0!=r.resultId||!r.startedTest||""==r.startedTest||-1!=r.status?null==r.startedTest&&(r.isNotTested=!0):r.isNotSubmit=!0:r.isOnTest=!0,a.push(r)}),a}totalPercent(t,i){var a=[0,0,0,0,0,0,0,0,0,0,0,0];let r=0;for(let s=0;s<t.length;s++)t[s]&&(r+=t[s].testedCount??0,a[0]+=t[s].markPercent[0].count??0,a[1]+=t[s].markPercent[1].count??0,a[2]+=t[s].markPercent[2].count??0,a[3]+=t[s].markPercent[3].count??0,a[4]+=t[s].markPercent[4].count??0,a[5]+=t[s].markPercent[5].count??0,a[6]+=t[s].markPercent[6].count??0,a[7]+=t[s].markPercent[7].count??0,a[8]+=t[s].markPercent[8].count??0,a[9]+=t[s].markPercent[9].count??0,a[10]+=t[s].markPercent[10].count??0);for(let s=0;s<i.length;s++)i[s]&&(r+=i[s].testedCount??0,a[0]+=i[s].markPercent[0].count??0,a[1]+=i[s].markPercent[1].count??0,a[2]+=i[s].markPercent[2].count??0,a[3]+=i[s].markPercent[3].count??0,a[4]+=i[s].markPercent[4].count??0,a[5]+=i[s].markPercent[5].count??0,a[6]+=i[s].markPercent[6].count??0,a[7]+=i[s].markPercent[7].count??0,a[8]+=i[s].markPercent[8].count??0,a[9]+=i[s].markPercent[9].count??0,a[10]+=i[s].markPercent[10].count??0);for(let s=0;s<a.length;s++)a[s]=100*a[s]/r;return a}totalPoint(t,i){let a=[0,0,0,0,0,0,0,0,0,0,0];for(let r=0;r<t.length;r++)a[0]+=t[r].markPercent[0].count??0,a[1]+=t[r].markPercent[1].count??0,a[2]+=t[r].markPercent[2].count??0,a[3]+=t[r].markPercent[3].count??0,a[4]+=t[r].markPercent[4].count??0,a[5]+=t[r].markPercent[5].count??0,a[6]+=t[r].markPercent[6].count??0,a[7]+=t[r].markPercent[7].count??0,a[8]+=t[r].markPercent[8].count??0,a[9]+=t[r].markPercent[9].count??0,a[10]+=t[r].markPercent[10].count??0;for(let r=0;r<i.length;r++)a[0]+=i[r].markPercent[0].count??0,a[1]+=i[r].markPercent[1].count??0,a[2]+=i[r].markPercent[2].count??0,a[3]+=i[r].markPercent[3].count??0,a[4]+=i[r].markPercent[4].count??0,a[5]+=i[r].markPercent[5].count??0,a[6]+=i[r].markPercent[6].count??0,a[7]+=i[r].markPercent[7].count??0,a[8]+=i[r].markPercent[8].count??0,a[9]+=i[r].markPercent[9].count??0,a[10]+=i[r].markPercent[10].count??0;return a}totalStudentRegister(t,i){var a=0;for(let r=0;r<t.length;r++)a+=t[r].registerCount??0;for(let r=0;r<i.length;r++)a+=i[r].registerCount??0;return a}totalStudentTakeExam(t,i){var a=0;for(let r=0;r<t.length;r++)a+=t[r].testedCount??0;for(let r=0;r<i.length;r++)a+=i[r].testedCount??0;return a}calcAvgClassroomMark(t){var i=0,a=0;return t.forEach(r=>{r.isMarked&&(i++,a+=r.mark??0)}),i>0?(a/i).toFixed(2):0}convertStatisticalAllQuestion(t){var i=t.data?.questionObjs&&t.data.questionObjs.length>0?t.data.questionObjs:new Array,a=[];a=this.commonService.castJsonToClassObjs($g,JSON.stringify(i))??[];var r=t.data?.resultQuestionObjs&&t.data?.resultQuestionObjs.length>0?t.data.resultQuestionObjs:new Array,s=this.dictionaryService.getDictionaryByGroupFieldTS(r,"userId"),l=[];this.examObj=t.data?.examObj;var c=t.data?.resultObjs&&t.data.resultObjs.length>0?t.data.resultObjs:new Array,u={},m=[],p={};t.data?.classroomObjsWithStudentObjs?.forEach(R=>{R.classroomObj&&R.studentObjs&&R.studentObjs.forEach(j=>{if(j.parentId){this.commonService.isExistInArray(m,j.parentId)||m.push(j.parentId);var G=this.statisticalApiService.findExamResultOfStudent(s[j.parentId]??[],j.id??"0");if(G.length>0){var ae=G[G.length-1],W=j.parentId+"_"+(j.id?j.id:0)+"_"+ae.id;u.hasOwnProperty(W)||(u[W]=j),p.hasOwnProperty(W)||(p[W]=ae)}}})}),c.forEach(R=>{if(R.parentId&&s.hasOwnProperty(R.parentId??0)&&!this.commonService.isExistInArray(m,R.parentId??"0")){var j=s[R.parentId][s[R.parentId].length-1];let ae=this.commonService.myTranslateInstant("lang_auto_thi_sinh_thi_offline");R.fullName=R.fullName??ae+"_"+j.id;var G=R.parentId+"_"+(R.id??0)+"_"+j.id;u.hasOwnProperty(G)||(u[G]=R),p.hasOwnProperty(G)||(p[G]=j)}});for(var f=0;f<a.length;f++)(this.answerTypeService.isOneChoiceAnswer(a[f])||this.answerTypeService.isFillAnswer(a[f]))&&(a[f].countFalse=0,a[f].countNotAnswer=0,a[f].countTested=0,a[f].countAttended=0,a[f].countTrue=0,a[f].indexQuestion=f,a[f].studentWhoFalse=[],a[f].studentWhoNotAnswer=[]);for(var b in p)if(p.hasOwnProperty(b))for(f=0;f<a.length;f++)if(this.answerTypeService.isOneChoiceAnswer(a[f])||this.answerTypeService.isFillAnswer(a[f])){var L=p[b],N=u.hasOwnProperty(b)?u[b]:void 0;L.correctQuestionIds&&this.commonService.isExistInArray(L.correctQuestionIds,a[f].id)&&(a[f].countTrue++,a[f].countTested++),L.wrongQuestionIds&&this.commonService.isExistInArray(L.wrongQuestionIds,a[f].id)&&(a[f].countFalse++,a[f].countTested++,this.commonService.isExistInArray(a[f].studentWhoFalse,{studentId:N?.id??"0",parentId:N?.parentId,fullName:N?.fullName,nameImages:N?.nameImages})||a[f].studentWhoFalse?.push({studentId:N?.id??"0",parentId:N?.parentId,fullName:N?.fullName,nameImages:N?.nameImages})),L.resultQuestionIds&&this.commonService.isExistInArray(L.resultQuestionIds,a[f].id)&&a[f].countAttended++,this.commonService.isExistInArray(L.resultQuestionIds,a[f].id)&&!this.commonService.isExistInArray(L.correctQuestionIds,a[f].id)&&!this.commonService.isExistInArray(L.wrongQuestionIds,a[f].id)&&(a[f].countNotAnswer++,this.commonService.isExistInArray(a[f].studentWhoNotAnswer,{studentId:N?.id??"0",parentId:N?.parentId,fullName:N?.fullName,nameImages:N?.nameImages})||a[f].studentWhoNotAnswer?.push({studentId:N?.id??"0",parentId:N?.parentId,fullName:N?.fullName,nameImages:N?.nameImages}))}return a.forEach(R=>{(this.answerTypeService.isOneChoiceAnswer(R)||this.answerTypeService.isFillAnswer(R))&&l.push(R)}),l}getData(t){var i=this;return(0,Yi.Z)(function*(){return new Promise((a,r)=>{let s=0,l=0,c=i.form.getRawValue();1==c.statisticalCheck&&0==i.statisticalLoaded&&s++,1==c.listQuestionCheck&&0==i.listQuestionLoaded&&s++,1==c.tableScoreCheck&&0==i.tableScoreLoaded&&s++,0==s&&a(!0),i.statisticalApiService.getExamStatisticObjs("statistic_export_excel",t,1).subscribe(u=>{if(1==c.statisticalCheck&&0==i.statisticalLoaded){if(1==u.success&&u.data){var m=u.data.classroomObjsWithStudentObjs&&u.data.classroomObjsWithStudentObjs.length>0?u.data.classroomObjsWithStudentObjs:new Array,p=u.data.resultObjs&&u.data.resultObjs.length>0?u.data.resultObjs:new Array,f=i.testedListApiService.mergeStudentWithAvatar(p??[]),b=[],L=[],N=i.dictionaryService.getDictionaryByFieldTS(f,"parentId");if(i.examObj=u.data.examObj,m.length>0){var R=[],j=[];m.forEach(Ee=>{var Ue=[],$e=[],ut=0;Ee.studentObjs?.forEach(Qt=>{R.push(Qt.parentId??"0");var nn=Qt.parentId??"0";if(N.hasOwnProperty(nn)&&(Array.isArray(Qt.examResultObjs)||(Qt.examResultObjs=[]),Qt.examResultObjs=i.statisticalApiService.findExamResultOfStudent(Qt.examResultObjs?.concat(N[nn].examResultObjs??[])??[],Qt.id??"0")),Qt.examResultObjs&&Qt.examResultObjs.length>0){var tn=Qt.examResultObjs[Qt.examResultObjs.length-1];tn.testStatus&&(tn.totalEssayQuestion?tn.confirmedAt&&$e.push(tn):$e.push(tn))}ut++});for(var st=i.homeworkExamService.countMarks($e),dt=0;dt<st.length;dt++)Ue.push({key:10==dt?"Avg":9==dt?"<= 10":"<"+(dt+1),count:st[dt],percent:i.homeworkExamService.calcPercent(st[dt],$e.length)});b.push({classObj:Ee.classroomObj,registerCount:ut,testedCount:$e.length>0?$e.length:0,markPercent:Ue})});var G=[],ae=[];f.forEach(Ee=>{if(!i.commonService.isExistInArray(R,Ee.parentId??"0")&&Ee.examResultObjs&&Ee.examResultObjs.length>0){var Ue=i.statisticalApiService.findExamResultOfStudent(Ee.examResultObjs,Ee.id??"0");if(Ue.length>0){var $e=Ue[Ue.length-1];$e.testStatus&&($e.totalEssayQuestion?$e.confirmedAt&&ae.push($e):ae.push($e),j.push(Ee.parentId??"0"))}}});for(var W=i.homeworkExamService.countMarks(ae),le=0;le<W.length;le++)G.push({key:10==le?"Avg":9==le?"<= 10":"<"+(le+1),count:W[le],percent:i.homeworkExamService.calcPercent(W[le],ae.length)});ae.length>0&&L.push({classObj:void 0,registerCount:j.length>0?j.length:0,testedCount:ae.length>0?ae.length:0,markPercent:G})}else{var ce=[],te=[],Se=[];for(f.forEach(Ue=>{if(Ue.examResultObjs&&Ue.examResultObjs.length>0){var $e=i.statisticalApiService.findExamResultOfStudent(Ue.examResultObjs,Ue.id??"0");if($e.length>0){var ut=$e[$e.length-1];ut.testStatus&&(ut.totalEssayQuestion?ut.confirmedAt&&te.push(ut):te.push(ut),Se.push(Ue.parentId??"0"))}}}),W=i.homeworkExamService.countMarks(te),le=0;le<W.length;le++)ce.push({key:10==le?"Avg":9==le?"<= 10":"<"+(le+1),count:W[le],percent:i.homeworkExamService.calcPercent(W[le],te.length)});te.length>0&&L.push({classObj:void 0,registerCount:Se.length>0?Se.length:0,testedCount:te.length>0?te.length:0,markPercent:ce})}i.Statistic={statisticClass:b,statisticNoClass:L},i.statisticalLoaded=!0}else i.showErrorSnack(u.message??"");l++,l==s&&a(!0)}if(1==c.listQuestionCheck&&0==i.listQuestionLoaded){if(1==u.success&&u.data){p=u.data.resultObjs&&u.data.resultObjs.length>0?u.data.resultObjs:new Array,f=i.testedListApiService.mergeStudentWithAvatar(p??[]);var Ze=i.commonService.castJsonToClassObjs(Bw,JSON.stringify(u.data.classroomObjs))??[],se={};u.data.classroomObjsWithStudentObjs?.forEach(st=>{st.classroomObj&&st.studentObjs&&(se.hasOwnProperty(st.classroomObj?.id??0)||(se[st.classroomObj?.id??0]=st.studentObjs))});for(var pe=u.data.questionObjs&&u.data.questionObjs.length>0?u.data.questionObjs:new Array,Be=u.data?.resultQuestionObjs&&u.data?.resultQuestionObjs.length>0?u.data.resultQuestionObjs:new Array,Pe=i.dictionaryService.getDictionaryByGroupFieldTS(Be,"userId"),Oe=(R=[],0);Oe<Ze.length;Oe++)se.hasOwnProperty(Ze[Oe].id??0)&&(Ze[Oe].students=se[Ze[Oe].id??0]),Ze[Oe].students?.forEach(st=>{if(st.parentId&&!i.commonService.isExistInArray(R,st.parentId)&&R.push(st.parentId),st.parentId&&Pe.hasOwnProperty(st.parentId)&&!i.commonService.isExistInArray(Ze[Oe].listResult,Pe[st.parentId][0])){var dt=i.statisticalApiService.findExamResultOfStudent(Pe[st.parentId],st.id??"0");dt.length>0&&Ze[Oe].listResult?.push(dt[dt.length-1])}});var Fe=!1,Re={id:-1,name:i.commonService.myTranslateInstant("lang_auto_thi_sinh_tu_do"),userTested:[],listResult:[],listQuestions:[]};f.forEach(st=>{if(!i.commonService.isExistInArray(R,st.parentId??"0")){if(st.parentId&&Pe.hasOwnProperty(st.parentId??0)){var dt=i.statisticalApiService.findExamResultOfStudent(Pe[st.parentId],st.id??"0");if(dt.length>0){var Rt=dt[dt.length-1];Re.listResult.push(Rt);let Qt=i.commonService.myTranslateInstant("lang_auto_thi_sinh_thi_offline");st.fullName=st.fullName??Qt+"_"+Rt.id,Re.userTested?.push(st)}}Fe=!0}}),Fe&&Ze.push(Re);var Je=0;for(le=0;le<Ze.length;le++){var Ke=[];Ke=i.commonService.castJsonToClassObjs($g,JSON.stringify(pe))??[];for(var et=0;et<Ke.length;et++)(i.answerTypeService.isOneChoiceAnswer(Ke[et])||i.answerTypeService.isFillAnswer(Ke[et])||i.answerTypeService.isTrueFalseAnswer(Ke[et]))&&(Ke[et].indexQuestion=et,Ze[le].listQuestions.push(Ke[et]));var gt=i.dictionaryService.getDictionaryByGroupFieldTS(Ze[le].listResult??[],"userId");for(var ue in gt)if(gt.hasOwnProperty(ue)){Je++;var Te=-1==Ze[le].id?Ze[le].userTested?.filter(dt=>dt.parentId==gt[ue][0].userId):Ze[le].students?.filter(dt=>dt.parentId==gt[ue][0].userId);for(Oe=0;Oe<Ze[le].listQuestions.length;Oe++)(i.answerTypeService.isOneChoiceAnswer(Ze[le].listQuestions[Oe])||i.answerTypeService.isFillAnswer(Ze[le].listQuestions[Oe])||i.answerTypeService.isTrueFalseAnswer(Ze[le].listQuestions[Oe]))&&(gt[ue][0].correctQuestionIds&&i.commonService.isExistInArray(gt[ue][0].correctQuestionIds,Ze[le].listQuestions[Oe].id)&&(Ze[le].listQuestions[Oe].countTrue++,Ze[le].listQuestions[Oe].countTested++),gt[ue][0].wrongQuestionIds&&i.commonService.isExistInArray(gt[ue][0].wrongQuestionIds,Ze[le].listQuestions[Oe].id)&&(Ze[le].listQuestions[Oe].countFalse++,Ze[le].listQuestions[Oe].countTested++,Te&&Te.length>0&&(i.commonService.isExistInArray(Ze[le].listQuestions[Oe].studentWhoFalse,{studentId:Te[0].id,parentId:Te[0].parentId,fullName:Te[0].fullName,nameImages:Te[0].nameImages})||Ze[le].listQuestions[Oe].studentWhoFalse?.push({studentId:Te[0].id,parentId:Te[0].parentId,fullName:Te[0].fullName,nameImages:Te[0].nameImages}))),gt[ue][0].resultQuestionIds&&i.commonService.isExistInArray(gt[ue][0].resultQuestionIds,Ze[le].listQuestions[Oe].id)&&Ze[le].listQuestions[Oe].countAttended++,i.commonService.isExistInArray(gt[ue][0].resultQuestionIds,Ze[le].listQuestions[Oe].id)&&!i.commonService.isExistInArray(gt[ue][0].correctQuestionIds,Ze[le].listQuestions[Oe].id)&&!i.commonService.isExistInArray(gt[ue][0].wrongQuestionIds,Ze[le].listQuestions[Oe].id)&&(Ze[le].listQuestions[Oe].countNotAnswer++,Te&&Te.length>0&&(i.commonService.isExistInArray(Ze[le].listQuestions[Oe].studentWhoNotAnswer,{studentId:Te[0].id,parentId:Te[0].parentId,fullName:Te[0].fullName,nameImages:Te[0].nameImages})||Ze[le].listQuestions[Oe].studentWhoNotAnswer?.push({studentId:Te[0].id,parentId:Te[0].parentId,fullName:Te[0].fullName,nameImages:Te[0].nameImages}))))}}i.ListQuest={attended:Je,listQuestions:i.convertStatisticalAllQuestion(u),listClassStatistic:Ze},i.listQuestionLoaded=!0}else i.showErrorSnack(u.message??"");l++,l==s&&a(!0)}if(1==c.tableScoreCheck&&0==i.tableScoreLoaded){if(1==u.success&&u.data){i.examObj=u.data?.examObj,i.limitQuestions=i.examObj?.countQuestion??0;let Ee=i.homeworkExamService.hasEssayInExam(i.examObj),Ue=u.data.classroomObjsWithStudentObjs&&u.data.classroomObjsWithStudentObjs.length>0?u.data.classroomObjsWithStudentObjs:new Array,$e=u.data?.resultObjs&&u.data?.resultObjs.length>0?u.data.resultObjs:new Array,ut=i.testedListApiService.mergeStudentWithAvatar($e??[]),st=[],dt={};ut?.forEach(dn=>{let ft=dn.parentId??"0";dt.hasOwnProperty(ft)?dt[ft].push(...dn.examResultObjs??[]):dt[ft]=dn.examResultObjs??[],st=st.concat(dt[ft])});let Rt=[],Qt=[],nn=[],tn=[];i.homeworkExamService.mustInClassroom(i.examObj)&&Ue.length>0&&Ue.forEach(dn=>{let ft=[];dn.studentObjs?.forEach(je=>{let En;tn.push(je.parentId??"0");let wn=je.parentId??"0";dt.hasOwnProperty(wn)&&(Array.isArray(je.examResultObjs)||(je.examResultObjs=[]),je.examResultObjs=i.statisticalApiService.findExamResultOfStudent(dt[wn],je.id??"0")),je.examResultObjs&&je.examResultObjs.length&&(je.examResultObjs.length>1?je.examResultObjs.forEach(Mi=>{Mi.testStatus&&(En=Mi)}):En=je.examResultObjs[0]);let Zt=En?.testStatus??0,Vt=En?.mark?En.mark:0,an=En?.id&&Zt>0?En.id:0,Wt=En?.startedTest?En.startedTest:null,On=En?.confirmedAt?En.confirmedAt:null,Gn=En?.answeredQuestions&&Zt?En.answeredQuestions:[],ei=En?.subjectMarks?En.subjectMarks:void 0,gi={...je,userId:je.userId?.toString(),subjectMarks:ei,mark:Vt,resultId:an,startedTest:Wt,confirmedAt:On,status:Zt,answeredQuestions:Gn};ft.push(gi)}),Rt.push({classObj:dn.classroomObj,studentsWithMark:ft})}),$e.forEach(dn=>{let ft;if(!i.commonService.isExistInArray(tn,dn.parentId??"0")){dn.examResultObjs&&dn.examResultObjs.length&&(dn.examResultObjs&&dn.examResultObjs.length>1?dn.examResultObjs.forEach(ei=>{ei.testStatus&&(ft=ei)}):ft=dn.examResultObjs[0]);let je=ft?.testStatus??0,En=ft?.mark?ft.mark:0,wn=ft?.id&&je>0?ft.id:0,Zt=ft?.startedTest?ft.startedTest:null,Vt=ft?.confirmedAt?ft.confirmedAt:null,an=ft?.answeredQuestions&&je?ft.answeredQuestions:[],Wt=ft?.subjectMarks?ft.subjectMarks:void 0,On={...dn,userId:dn.userId?.toString(),subjectMarks:Wt,mark:En,resultId:wn,startedTest:Zt,confirmedAt:Vt,nameImages:dn.nameImages,nameImage:"",status:je,answeredQuestions:an},Gn=i.commonService.myTranslateInstant("lang_auto_thi_sinh_thi_offline");On.fullName=On.fullName??Gn+"_"+wn,nn.push(On)}}),Qt=nn;for(let dn of Rt)dn.studentsWithMark=i.checkStatusStudent(dn.classObj&&0==dn.classObj.sortType?i.sortService.sortFirstNameStudents(dn.studentsWithMark??[]):i.sortService.sortArrayByMultipleObjectKeyAsc(i.commonService.myClone(dn.studentsWithMark)??[],"pos","id"),Ee);i.TableScore={statisticClass:Rt,statisticNoClass:i.checkStatusStudent(i.sortService.sortFirstNameStudents(Qt),Ee)},i.tableScoreLoaded=!0}else i.showErrorSnack(u.message??"");l++,l==s&&a(!0)}})})})()}getObjKeyLength(t){return Object.keys(t).length}checkAnswerQuestionTableExport(t){let i="";return i=t.correct&&!t.isEssay?"lang_auto_dung":t.correct&&t.isEssay?"lang_auto_cau_TL":"lang_auto_sai",this.commonService.myTranslateInstant(i)??""}constructor(t,i,a,r,s,l,c,u,m,p,f){super(),this.statisticalApiService=t,this.testedListApiService=i,this.activeRoute=a,this.sortService=r,this.homeworkExamService=s,this.globalService=l,this._decimalPipe=c,this.dictionaryService=u,this.answerTypeService=m,this.shareFileFlutterService=p,this.timeService=f,this.viewType=-1,this.keyColExcelArr=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],this.examId=-1,this.limitQuestions=0,this.loadingDownload=!1,this.isExportSuccess=void 0,this.isOnApp=!1,this.style_first={border:{top:{style:"thin",color:{rgb:"ff3c8dbc"}},bottom:{style:"thin",color:{rgb:"ff3c8dbc"}},left:{style:"thin",color:{rgb:"ffffffff"}},right:{style:"thin",color:{rgb:"ffffffff"}},diagonal:{style:"thin",color:{rgb:"ffffffff"}},diagonalDown:!0},alignment:{vertical:"center",horizontal:"left",wrapText:!0},font:{sz:11,bold:!0,color:{rgb:"ffffffff"}},fill:{patternType:"solid",fgColor:{rgb:"ff3c8dbc"}}},this.style_header={border:{top:{style:"thin",color:{rgb:"ff3c8dbc"}},bottom:{style:"thin",color:{rgb:"ff3c8dbc"}},left:{style:"thin",color:{rgb:"ffffffff"}},right:{style:"thin",color:{rgb:"ffffffff"}}},alignment:{vertical:"center",horizontal:"center",wrapText:!0},font:{sz:11,bold:!0,color:{rgb:"ffffffff"}},fill:{patternType:"solid",fgColor:{rgb:"2361ae"}}},this.style_body={border:{top:{style:"thin",color:{rgb:"ff757575"}},bottom:{style:"thin",color:{rgb:"ff757575"}},left:{style:"thin",color:{rgb:"ff757575"}},right:{style:"thin",color:{rgb:"ff757575"}}},alignment:{vertical:"center",horizontal:"center",wrapText:!0}},this.style_footer={border:{top:{style:"thin",color:{rgb:"ff757575"}},bottom:{style:"thin",color:{rgb:"ff757575"}},left:{style:"thin",color:{rgb:"ff757575"}},right:{style:"thin",color:{rgb:"ff757575"}}},alignment:{vertical:"center",horizontal:"center",wrapText:!0},font:{sz:11,bold:!0},fill:{patternType:"solid",fgColor:{rgb:"ffffffff"}}},this.statisticalLoaded=!1,this.listQuestionLoaded=!1,this.tableScoreLoaded=!1,this.wb=Gt.utils.book_new(),this.Statistic={},this.ListQuest={},this.TableScore={},this.form=new h.cw({statisticalCheck:new h.NI(!0,{nonNullable:!0}),listQuestionCheck:new h.NI(!0,{nonNullable:!0}),tableScoreCheck:new h.NI(!0,{nonNullable:!0})})}ngOnInit(){this.waitDestroy((0,ne.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.examId=Number(this.commonService.getMyParam(this.activeRoute,"id"))??0,this.isOnApp=this.isMobileWebView})),super.ngOnInit()}ngOnDestroy(){this.globalService.stopIntervalFunc("statistic_export_excel1"),this.globalService.stopIntervalFunc("statistic_export_excel2"),this.globalService.stopIntervalFunc("statistic_export_excel3"),super.ngOnDestroy()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(oU),e.Y36(Rx.X),e.Y36(E.gz),e.Y36(th.V),e.Y36(eh.v),e.Y36(i_.q),e.Y36(F.JJ),e.Y36(ij.k),e.Y36(fr.i),e.Y36(Ac.g),e.Y36(Mo.D))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-export-excel-new"]],inputs:{viewType:"viewType"},features:[e.qOj],decls:33,vars:20,consts:[[1,"intro-y","flex","items-center"],[1,"text-lg","font-medium","truncate","mr-5"],[1,"report-box","intro-y","mt-3"],[3,"formGroup"],[1,"box","p-5"],[1,"text-slate-500","border-b","border-slate-200","flex","mb-2","pb-2"],[1,"form-check","mt-2"],["name","statistical","formControlName","statisticalCheck","id","checkbox-switch-1","type","checkbox",1,"form-check-input"],["for","checkbox-switch-1",1,"form-check-label"],["id","checkbox-switch-2","name","listquestion","formControlName","listQuestionCheck","type","checkbox",1,"form-check-input"],["for","checkbox-switch-2",1,"form-check-label"],["id","checkbox-switch-3","name","tablescore","formControlName","tableScoreCheck","type","checkbox","value","",1,"form-check-input"],["for","checkbox-switch-3",1,"form-check-label"],[1,"mt-3"],["azt-track-service","export-excel-_De31aTGuF",1,"btn","btn-outline-primary","shadow-md",3,"click"],["xmlns","http://www.w3.org/2000/svg","class","lucide w-4 h-4 mr-2","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",4,"ngIf"],["class","w-4 h-4 inline-block mr-2",4,"ngIf"],["class","col-md-8 mt-4","style","color: rgb(87, 141, 32);",4,"ngIf"],["class","col-md-8 mt-4","style","color: rgb(204, 49, 80);",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","mr-2"],["d","M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],["points","14 2 14 8 20 8"],["d","M8 13h3"],["d","M8 17h3"],["d","M14 13h3"],["d","M14 17h3"],[1,"w-4","h-4","inline-block","mr-2"],[1,"col-md-8","mt-4",2,"color","rgb(87, 141, 32)"],[1,"col-md-8","mt-4",2,"color","rgb(204, 49, 80)"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"h3",1),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()(),e.TgZ(4,"div",2)(5,"form",3)(6,"div",4)(7,"div",5)(8,"div",6),e._UZ(9,"input",7),e.TgZ(10,"label",8),e._uU(11),e.ALo(12,"mytranslate"),e.qZA()()(),e.TgZ(13,"div",5)(14,"div",6),e._UZ(15,"input",9),e.TgZ(16,"label",10),e._uU(17),e.ALo(18,"mytranslate"),e.qZA()()(),e.TgZ(19,"div",5)(20,"div",6),e._UZ(21,"input",11),e.TgZ(22,"label",12),e._uU(23),e.ALo(24,"mytranslate"),e.qZA()()(),e.TgZ(25,"div",13)(26,"button",14),e.NdJ("click",function(){return i.exportExcel()}),e.YNc(27,oj,7,0,"svg",15),e.YNc(28,aj,2,0,"span",16),e._uU(29),e.ALo(30,"mytranslate"),e.qZA(),e.YNc(31,rj,3,3,"div",17),e.YNc(32,sj,3,3,"div",18),e.qZA()()()()),2&t&&(e.xp6(2),e.hij(" ",e.lcZ(3,10,"lang_testbank_statistical_export_data_to_excel")," "),e.xp6(3),e.Q6J("formGroup",i.form),e.xp6(6),e.hij(" ",e.lcZ(12,12,"lang_testbank_statistical_score_spectrum_statistics")," "),e.xp6(6),e.hij(" ",e.lcZ(18,14,"lang_testbank_statistical_statistics_right_wrong")," "),e.xp6(6),e.hij(" ",e.lcZ(24,16,"lang_testbank_statistical_transcript")," "),e.xp6(4),e.Q6J("ngIf",1!=i.loadingDownload),e.xp6(1),e.Q6J("ngIf",i.loadingDownload),e.xp6(1),e.hij(" ",e.lcZ(30,18,"lang_testbank_statistical_export_file_excel")," "),e.xp6(2),e.Q6J("ngIf",!i.isOnApp&&!0===i.isExportSuccess),e.xp6(1),e.Q6J("ngIf",!i.isOnApp&&!1===i.isExportSuccess))},dependencies:[F.O5,h._Y,h.Wl,h.JJ,h.JL,h.sg,h.u,wt.M,wi.n,ye.JV],styles:["td[_ngcontent-%COMP%]{vertical-align:center!important}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{vertical-align:unset!important}.bg-blue-color[_ngcontent-%COMP%]{background-color:#3c8dbc;color:#fff}hr.solid[_ngcontent-%COMP%]{border-top:1px solid #bbb}input[type=checkbox].export-checkbox[_ngcontent-%COMP%]{width:19px;height:19px;vertical-align:middle}input[type=checkbox].export-checkbox[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]{color:#252525;padding-top:1rem;padding-bottom:.5rem;padding-right:.5rem}input[type=checkbox].export-checkbox[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;width:19px;height:19px;margin:-2px 10px 0 0;vertical-align:middle;cursor:pointer}input[type=checkbox].export-checkbox[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]{margin-left:.5rem}@media only screen and (max-width: 720px){.export-block[_ngcontent-%COMP%]{text-align:center}}"]}),n})();function cj(n,o){1&n&&(e.TgZ(0,"div",2)(1,"div",3)(2,"h3",4),e._uU(3),e.ALo(4,"mytranslate"),e.qZA()(),e.TgZ(5,"div",5),e._uU(6),e.ALo(7,"mytranslate"),e.qZA()()),2&n&&(e.xp6(3),e.hij(" ",e.lcZ(4,2,"lang_auto_bieu_do_pho_diem")," "),e.xp6(3),e.hij("",e.lcZ(7,4,"lang_testbank_statistical_cant_data_statistics"),"."))}function uj(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"td",54),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,r=e.oxw(2);return e.KtG(r.goToStudentList(a))}),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()}if(2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,t.classObj.name))}}function dj(n,o){if(1&n&&(e.TgZ(0,"td",51),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.registerCount)}}function mj(n,o){if(1&n&&(e.TgZ(0,"td",51),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.testedCount)}}function pj(n,o){if(1&n&&(e.TgZ(0,"td",51),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.markPercent[0].count)}}function hj(n,o){if(1&n&&(e.TgZ(0,"td",51),e._uU(1),e.ALo(2,"replace"),e.ALo(3,"number"),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.Dn7(2,1,e.xi3(3,5,t.markPercent[0].percent,"1.0-2"),",","."))}}function Aj(n,o){if(1&n&&(e.TgZ(0,"td",51),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.markPercent[1].count)}}function _j(n,o){if(1&n&&(e.TgZ(0,"td",51),e._uU(1),e.ALo(2,"replace"),e.ALo(3,"number"),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.Dn7(2,1,e.xi3(3,5,t.markPercent[1].percent,"1.0-2"),",","."))}}function fj(n,o){if(1&n&&(e.TgZ(0,"td",51),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.markPercent[2].count)}}function gj(n,o){if(1&n&&(e.TgZ(0,"td",51),e._uU(1),e.ALo(2,"replace"),e.ALo(3,"number"),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.Dn7(2,1,e.xi3(3,5,t.markPercent[2].percent,"1.0-2"),",","."))}}function xj(n,o){if(1&n&&(e.TgZ(0,"td",51),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.markPercent[3].count)}}function bj(n,o){if(1&n&&(e.TgZ(0,"td",51),e._uU(1),e.ALo(2,"replace"),e.ALo(3,"number"),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.Dn7(2,1,e.xi3(3,5,t.markPercent[3].percent,"1.0-2"),",","."))}}function vj(n,o){if(1&n&&(e.TgZ(0,"td",51),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.markPercent[4].count)}}function wj(n,o){if(1&n&&(e.TgZ(0,"td",51),e._uU(1),e.ALo(2,"replace"),e.ALo(3,"number"),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.Dn7(2,1,e.xi3(3,5,t.markPercent[4].percent,"1.0-2"),",","."))}}function yj(n,o){if(1&n&&(e.TgZ(0,"td",51),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.markPercent[5].count)}}function Cj(n,o){if(1&n&&(e.TgZ(0,"td",51),e._uU(1),e.ALo(2,"replace"),e.ALo(3,"number"),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.Dn7(2,1,e.xi3(3,5,t.markPercent[5].percent,"1.0-2"),",","."))}}function Tj(n,o){if(1&n&&(e.TgZ(0,"td",51),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.markPercent[6].count)}}function kj(n,o){if(1&n&&(e.TgZ(0,"td",51),e._uU(1),e.ALo(2,"replace"),e.ALo(3,"number"),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.Dn7(2,1,e.xi3(3,5,t.markPercent[6].percent,"1.0-2"),",","."))}}function Sj(n,o){if(1&n&&(e.TgZ(0,"td",51),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.markPercent[7].count)}}function Ej(n,o){if(1&n&&(e.TgZ(0,"td",51),e._uU(1),e.ALo(2,"replace"),e.ALo(3,"number"),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.Dn7(2,1,e.xi3(3,5,t.markPercent[7].percent,"1.0-2"),",","."))}}function Oj(n,o){if(1&n&&(e.TgZ(0,"td",51),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.markPercent[8].count)}}function Ij(n,o){if(1&n&&(e.TgZ(0,"td",51),e._uU(1),e.ALo(2,"replace"),e.ALo(3,"number"),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.Dn7(2,1,e.xi3(3,5,t.markPercent[8].percent,"1.0-2"),",","."))}}function Mj(n,o){if(1&n&&(e.TgZ(0,"td",51),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.markPercent[9].count)}}function Lj(n,o){if(1&n&&(e.TgZ(0,"td",51),e._uU(1),e.ALo(2,"replace"),e.ALo(3,"number"),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.Dn7(2,1,e.xi3(3,5,t.markPercent[9].percent,"1.0-2"),",","."))}}function Bj(n,o){if(1&n&&(e.TgZ(0,"td",51),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.markPercent[10].count)}}function Pj(n,o){if(1&n&&(e.TgZ(0,"td",51),e._uU(1),e.ALo(2,"replace"),e.ALo(3,"number"),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(e.Dn7(2,1,e.xi3(3,5,t.markPercent[10].percent,"1.0-2"),",","."))}}function Qj(n,o){if(1&n&&(e.TgZ(0,"tr"),e.YNc(1,uj,3,3,"td",52),e.YNc(2,dj,2,1,"td",53),e.YNc(3,mj,2,1,"td",53),e.YNc(4,pj,2,1,"td",53),e.YNc(5,hj,4,8,"td",53),e.YNc(6,Aj,2,1,"td",53),e.YNc(7,_j,4,8,"td",53),e.YNc(8,fj,2,1,"td",53),e.YNc(9,gj,4,8,"td",53),e.YNc(10,xj,2,1,"td",53),e.YNc(11,bj,4,8,"td",53),e.YNc(12,vj,2,1,"td",53),e.YNc(13,wj,4,8,"td",53),e.YNc(14,yj,2,1,"td",53),e.YNc(15,Cj,4,8,"td",53),e.YNc(16,Tj,2,1,"td",53),e.YNc(17,kj,4,8,"td",53),e.YNc(18,Sj,2,1,"td",53),e.YNc(19,Ej,4,8,"td",53),e.YNc(20,Oj,2,1,"td",53),e.YNc(21,Ij,4,8,"td",53),e.YNc(22,Mj,2,1,"td",53),e.YNc(23,Lj,4,8,"td",53),e.YNc(24,Bj,2,1,"td",53),e.YNc(25,Pj,4,8,"td",53),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",null!=t.classObj),e.xp6(1),e.Q6J("ngIf",null!=t.classObj),e.xp6(1),e.Q6J("ngIf",null!=t.classObj),e.xp6(1),e.Q6J("ngIf",null!=t.classObj),e.xp6(1),e.Q6J("ngIf",null!=t.classObj),e.xp6(1),e.Q6J("ngIf",null!=t.classObj),e.xp6(1),e.Q6J("ngIf",null!=t.classObj),e.xp6(1),e.Q6J("ngIf",null!=t.classObj),e.xp6(1),e.Q6J("ngIf",null!=t.classObj),e.xp6(1),e.Q6J("ngIf",null!=t.classObj),e.xp6(1),e.Q6J("ngIf",null!=t.classObj),e.xp6(1),e.Q6J("ngIf",null!=t.classObj),e.xp6(1),e.Q6J("ngIf",null!=t.classObj),e.xp6(1),e.Q6J("ngIf",null!=t.classObj),e.xp6(1),e.Q6J("ngIf",null!=t.classObj),e.xp6(1),e.Q6J("ngIf",null!=t.classObj),e.xp6(1),e.Q6J("ngIf",null!=t.classObj),e.xp6(1),e.Q6J("ngIf",null!=t.classObj),e.xp6(1),e.Q6J("ngIf",null!=t.classObj),e.xp6(1),e.Q6J("ngIf",null!=t.classObj),e.xp6(1),e.Q6J("ngIf",null!=t.classObj),e.xp6(1),e.Q6J("ngIf",null!=t.classObj),e.xp6(1),e.Q6J("ngIf",null!=t.classObj),e.xp6(1),e.Q6J("ngIf",null!=t.classObj),e.xp6(1),e.Q6J("ngIf",null!=t.classObj)}}function Fj(n,o){if(1&n&&(e.TgZ(0,"div",6)(1,"div",3)(2,"h3",4),e._uU(3),e.ALo(4,"mytranslate"),e.qZA()(),e.TgZ(5,"div",7)(6,"div",8)(7,"div",9)(8,"div",10)(9,"h3",11),e._uU(10),e.qZA(),e.TgZ(11,"div",12)(12,"div",13),e.O4$(),e.TgZ(13,"svg",14),e._UZ(14,"path",15)(15,"circle",16)(16,"polyline",17),e.qZA(),e._uU(17),e.ALo(18,"mytranslate"),e.qZA(),e.kcU(),e.TgZ(19,"div",18)(20,"div",19),e._uU(21),e.qZA()()(),e.TgZ(22,"div",12)(23,"div",13),e.O4$(),e.TgZ(24,"svg",14),e._UZ(25,"path",15)(26,"circle",16)(27,"line",20)(28,"line",21),e.qZA(),e._uU(29),e.ALo(30,"mytranslate"),e.qZA(),e.kcU(),e.TgZ(31,"div",18)(32,"div",19),e._uU(33),e.qZA(),e.TgZ(34,"div",22),e._uU(35),e.ALo(36,"replace"),e.ALo(37,"number"),e.qZA()()(),e.TgZ(38,"div",12)(39,"div",13),e.O4$(),e.TgZ(40,"svg",14),e._UZ(41,"path",23)(42,"path",24)(43,"path",25),e.qZA(),e._uU(44),e.ALo(45,"mytranslate"),e.qZA(),e.kcU(),e.TgZ(46,"div",18)(47,"div",19),e._uU(48),e.qZA()()()()(),e.TgZ(49,"div",26)(50,"div",27)(51,"p",28),e._uU(52),e.ALo(53,"mytranslate"),e.qZA(),e.TgZ(54,"div",18)(55,"span",19),e._uU(56),e.ALo(57,"replace"),e.ALo(58,"number"),e.qZA()()(),e.TgZ(59,"div",29)(60,"p",28),e._uU(61),e.ALo(62,"mytranslate"),e.qZA(),e.TgZ(63,"div",18)(64,"span",19),e._uU(65),e.qZA(),e.TgZ(66,"div",22),e._uU(67),e.ALo(68,"replace"),e.ALo(69,"number"),e.qZA()()(),e.TgZ(70,"div",27)(71,"p",30),e._uU(72),e.ALo(73,"mytranslate"),e.qZA(),e.TgZ(74,"div",18)(75,"span",19),e._uU(76),e.qZA(),e.TgZ(77,"div",31),e._uU(78),e.ALo(79,"replace"),e.ALo(80,"number"),e.qZA()()(),e.TgZ(81,"div",27)(82,"p",30),e._uU(83),e.ALo(84,"mytranslate"),e.qZA(),e.TgZ(85,"div",18)(86,"span",19),e._uU(87),e.qZA(),e.TgZ(88,"div",32),e._uU(89),e.ALo(90,"replace"),e.ALo(91,"number"),e.qZA()()()()()()(),e.TgZ(92,"div",33),e._UZ(93,"app-export-excel-new",34),e.qZA(),e.TgZ(94,"div",2)(95,"div",3)(96,"h3",4),e._uU(97),e.ALo(98,"mytranslate"),e.qZA()(),e.TgZ(99,"div",35)(100,"div",36)(101,"div",37)(102,"div",38),e._UZ(103,"div",39),e.qZA()()()()(),e.TgZ(104,"div",2)(105,"div",3)(106,"h3",4),e._uU(107),e.ALo(108,"mytranslate"),e.qZA()(),e.TgZ(109,"div",40)(110,"div",41)(111,"table",42)(112,"thead",43)(113,"tr")(114,"th",44),e._uU(115),e.ALo(116,"mytranslate"),e.qZA(),e.TgZ(117,"th",45),e._uU(118),e.ALo(119,"mytranslate"),e.qZA(),e.TgZ(120,"th",45),e._uU(121,"< 1"),e.qZA(),e.TgZ(122,"th",45),e._uU(123,"< 2"),e.qZA(),e.TgZ(124,"th",45),e._uU(125,"< 3"),e.qZA(),e.TgZ(126,"th",45),e._uU(127,"< 4"),e.qZA(),e.TgZ(128,"th",45),e._uU(129,"< 5"),e.qZA(),e.TgZ(130,"th",45),e._uU(131,"< 6"),e.qZA(),e.TgZ(132,"th",45),e._uU(133,"< 7"),e.qZA(),e.TgZ(134,"th",45),e._uU(135,"< 8"),e.qZA(),e.TgZ(136,"th",45),e._uU(137,"< 9"),e.qZA(),e.TgZ(138,"th",45),e._uU(139,"<= 10"),e.qZA(),e.TgZ(140,"th",45),e._uU(141),e.ALo(142,"mytranslate"),e.qZA()()(),e.TgZ(143,"tbody",46)(144,"tr"),e._UZ(145,"td"),e.TgZ(146,"td",47),e._uU(147),e.ALo(148,"mytranslate"),e.qZA(),e.TgZ(149,"td",47),e._uU(150),e.ALo(151,"mytranslate"),e.qZA(),e.TgZ(152,"td",48),e._uU(153),e.ALo(154,"mytranslate"),e.qZA(),e.TgZ(155,"td",48),e._uU(156,"%"),e.qZA(),e.TgZ(157,"td",48),e._uU(158),e.ALo(159,"mytranslate"),e.qZA(),e.TgZ(160,"td",48),e._uU(161,"%"),e.qZA(),e.TgZ(162,"td",48),e._uU(163),e.ALo(164,"mytranslate"),e.qZA(),e.TgZ(165,"td",48),e._uU(166,"%"),e.qZA(),e.TgZ(167,"td",48),e._uU(168),e.ALo(169,"mytranslate"),e.qZA(),e.TgZ(170,"td",48),e._uU(171,"%"),e.qZA(),e.TgZ(172,"td",48),e._uU(173),e.ALo(174,"mytranslate"),e.qZA(),e.TgZ(175,"td",48),e._uU(176,"%"),e.qZA(),e.TgZ(177,"td",48),e._uU(178),e.ALo(179,"mytranslate"),e.qZA(),e.TgZ(180,"td",48),e._uU(181,"%"),e.qZA(),e.TgZ(182,"td",48),e._uU(183),e.ALo(184,"mytranslate"),e.qZA(),e.TgZ(185,"td",48),e._uU(186,"%"),e.qZA(),e.TgZ(187,"td",48),e._uU(188),e.ALo(189,"mytranslate"),e.qZA(),e.TgZ(190,"td",48),e._uU(191,"%"),e.qZA(),e.TgZ(192,"td",48),e._uU(193),e.ALo(194,"mytranslate"),e.qZA(),e.TgZ(195,"td",48),e._uU(196,"%"),e.qZA(),e.TgZ(197,"td",48),e._uU(198),e.ALo(199,"mytranslate"),e.qZA(),e.TgZ(200,"td",48),e._uU(201,"%"),e.qZA(),e.TgZ(202,"td",48),e._uU(203),e.ALo(204,"mytranslate"),e.qZA(),e.TgZ(205,"td",48),e._uU(206,"%"),e.qZA()(),e.YNc(207,Qj,26,25,"tr",49),e.TgZ(208,"tr",50)(209,"td",51),e._uU(210),e.ALo(211,"mytranslate"),e.qZA(),e.TgZ(212,"td",51),e._uU(213),e.qZA(),e.TgZ(214,"td",51),e._uU(215),e.qZA(),e.TgZ(216,"td",51),e._uU(217),e.qZA(),e.TgZ(218,"td",51),e._uU(219),e.ALo(220,"replace"),e.ALo(221,"number"),e.qZA(),e.TgZ(222,"td",51),e._uU(223),e.qZA(),e.TgZ(224,"td",51),e._uU(225),e.ALo(226,"replace"),e.ALo(227,"number"),e.qZA(),e.TgZ(228,"td",51),e._uU(229),e.qZA(),e.TgZ(230,"td",51),e._uU(231),e.ALo(232,"replace"),e.ALo(233,"number"),e.qZA(),e.TgZ(234,"td",51),e._uU(235),e.qZA(),e.TgZ(236,"td",51),e._uU(237),e.ALo(238,"replace"),e.ALo(239,"number"),e.qZA(),e.TgZ(240,"td",51),e._uU(241),e.qZA(),e.TgZ(242,"td",51),e._uU(243),e.ALo(244,"replace"),e.ALo(245,"number"),e.qZA(),e.TgZ(246,"td",51),e._uU(247),e.qZA(),e.TgZ(248,"td",51),e._uU(249),e.ALo(250,"replace"),e.ALo(251,"number"),e.qZA(),e.TgZ(252,"td",51),e._uU(253),e.qZA(),e.TgZ(254,"td",51),e._uU(255),e.ALo(256,"replace"),e.ALo(257,"number"),e.qZA(),e.TgZ(258,"td",51),e._uU(259),e.qZA(),e.TgZ(260,"td",51),e._uU(261),e.ALo(262,"replace"),e.ALo(263,"number"),e.qZA(),e.TgZ(264,"td",51),e._uU(265),e.qZA(),e.TgZ(266,"td",51),e._uU(267),e.ALo(268,"replace"),e.ALo(269,"number"),e.qZA(),e.TgZ(270,"td",51),e._uU(271),e.qZA(),e.TgZ(272,"td",51),e._uU(273),e.ALo(274,"replace"),e.ALo(275,"number"),e.qZA(),e.TgZ(276,"td",51),e._uU(277),e.qZA(),e.TgZ(278,"td",51),e._uU(279),e.ALo(280,"replace"),e.ALo(281,"number"),e.qZA()()()()()()()),2&n){const t=e.oxw();let i;e.xp6(3),e.hij(" ",e.lcZ(4,66,"lang_auto_chi_so_co_ban")," "),e.xp6(7),e.hij(" ",t.examCommonStatistical.name," "),e.xp6(7),e.hij(" ",e.lcZ(18,68,"lang_auto_so_nguoi_dang_ky_thi")," "),e.xp6(4),e.Oqu(t.examCommonStatistical.totalRegister),e.xp6(8),e.hij(" ",e.lcZ(30,70,"lang_auto_so_nguoi_thi")," "),e.xp6(4),e.Oqu(t.examCommonStatistical.totalNotComplete),e.xp6(2),e.hij("",null!==(i=e.Dn7(36,72,e.xi3(37,76,t.examCommonStatistical.totalNotComplete/t.examCommonStatistical.totalRegister*100,"1.0-2"),",","."))&&void 0!==i?i:0,"%"),e.xp6(9),e.hij(" ",e.lcZ(45,79,"lang_auto_tong_luot_lam")," "),e.xp6(4),e.Oqu(t.examCommonStatistical.totalAttendee),e.xp6(4),e.hij(" ",e.lcZ(53,81,"lang_auto_diem_trung_binh")," "),e.xp6(4),e.Oqu(e.Dn7(57,83,e.xi3(58,87,t.examCommonStatistical.averageMark,"1.0-2"),",",".")),e.xp6(5),e.hij(" ",e.lcZ(62,90,"lang_auto_so_hoc_sinh_dat_diem")+" <1"," "),e.xp6(4),e.Oqu(t.examCommonStatistical.totalLte1),e.xp6(2),e.hij("",e.Dn7(68,92,e.xi3(69,96,100*t.examCommonStatistical.totalLte1/(t.examCommonStatistical.totalRegister-t.examCommonStatistical.totalNotComplete),"1.0-2"),",","."),"%"),e.xp6(5),e.Oqu(e.lcZ(73,99,"lang_auto_so_hoc_sinh_dat_diem")+"(>=5)"),e.xp6(4),e.Oqu(t.examCommonStatistical.totalGte5),e.xp6(2),e.hij("",e.Dn7(79,101,e.xi3(80,105,100*t.examCommonStatistical.totalGte5/(t.examCommonStatistical.totalRegister-t.examCommonStatistical.totalNotComplete),"1.0-2"),",","."),"%"),e.xp6(5),e.hij(" ",e.lcZ(84,108,"lang_auto_moc_diem_co_nhieu_hoc_sinh_dat_duoc_nhat")," "),e.xp6(4),e.Oqu(t.examCommonStatistical.markPopular),e.xp6(2),e.hij("",e.Dn7(90,110,e.xi3(91,114,t.examCommonStatistical.totalPopular/(t.examCommonStatistical.totalRegister-t.examCommonStatistical.totalNotComplete)*100,"1.0-2"),",","."),"%"),e.xp6(4),e.Q6J("viewType",t.viewType),e.xp6(4),e.hij(" ",e.lcZ(98,117,"lang_auto_bieu_do_pho_diem")," "),e.xp6(6),e.Q6J("chart",t.chart),e.xp6(4),e.hij(" ",e.lcZ(108,119,"lang_auto_bang_tan_so")," "),e.xp6(8),e.Oqu(e.lcZ(116,121,"lang_testbank_statistical_class")),e.xp6(3),e.Oqu(e.lcZ(119,123,"lang_testbank_statistical_number_student")),e.xp6(23),e.hij("",e.lcZ(142,125,"lang_testbank_statistical_on_tb")," (>= 5)"),e.xp6(6),e.Oqu(e.lcZ(148,127,"lang_button_register")),e.xp6(3),e.Oqu(e.lcZ(151,129,"lang_testbank_statistical_join_exam")),e.xp6(3),e.Oqu(e.lcZ(154,131,"lang_auto_amount")),e.xp6(5),e.Oqu(e.lcZ(159,133,"lang_auto_amount")),e.xp6(5),e.Oqu(e.lcZ(164,135,"lang_auto_amount")),e.xp6(5),e.Oqu(e.lcZ(169,137,"lang_auto_amount")),e.xp6(5),e.Oqu(e.lcZ(174,139,"lang_auto_amount")),e.xp6(5),e.Oqu(e.lcZ(179,141,"lang_auto_amount")),e.xp6(5),e.Oqu(e.lcZ(184,143,"lang_auto_amount")),e.xp6(5),e.Oqu(e.lcZ(189,145,"lang_auto_amount")),e.xp6(5),e.Oqu(e.lcZ(194,147,"lang_auto_amount")),e.xp6(5),e.Oqu(e.lcZ(199,149,"lang_auto_amount")),e.xp6(5),e.Oqu(e.lcZ(204,151,"lang_auto_amount")),e.xp6(4),e.Q6J("ngForOf",t.statistic),e.xp6(3),e.Oqu(e.lcZ(211,153,"lang_testbank_statistical_total")),e.xp6(3),e.Oqu(t.countStudentRegister),e.xp6(2),e.Oqu(t.countStudentTakeExam),e.xp6(2),e.Oqu(t.markPointOne),e.xp6(2),e.Oqu(e.Dn7(220,155,e.xi3(221,159,t.markPercentOne,"1.0-2"),",",".")),e.xp6(4),e.Oqu(t.markPointTwo),e.xp6(2),e.Oqu(e.Dn7(226,162,e.xi3(227,166,t.markPercentTwo,"1.0-2"),",",".")),e.xp6(4),e.Oqu(t.markPointThree),e.xp6(2),e.Oqu(e.Dn7(232,169,e.xi3(233,173,t.markPercentThree,"1.0-2"),",",".")),e.xp6(4),e.Oqu(t.markPointFour),e.xp6(2),e.Oqu(e.Dn7(238,176,e.xi3(239,180,t.markPercentFour,"1.0-2"),",",".")),e.xp6(4),e.Oqu(t.markPointFive),e.xp6(2),e.Oqu(e.Dn7(244,183,e.xi3(245,187,t.markPercentFive,"1.0-2"),",",".")),e.xp6(4),e.Oqu(t.markPointSix),e.xp6(2),e.Oqu(e.Dn7(250,190,e.xi3(251,194,t.markPercentSix,"1.0-2"),",",".")),e.xp6(4),e.Oqu(t.markPointSeven),e.xp6(2),e.Oqu(e.Dn7(256,197,e.xi3(257,201,t.markPercentSeven,"1.0-2"),",",".")),e.xp6(4),e.Oqu(t.markPointEight),e.xp6(2),e.Oqu(e.Dn7(262,204,e.xi3(263,208,t.markPercentEight,"1.0-2"),",",".")),e.xp6(4),e.Oqu(t.markPointNine),e.xp6(2),e.Oqu(e.Dn7(268,211,e.xi3(269,215,t.markPercentNine,"1.0-2"),",",".")),e.xp6(4),e.Oqu(t.markPointTen),e.xp6(2),e.Oqu(e.Dn7(274,218,e.xi3(275,222,t.markPercentTen,"1.0-2"),",",".")),e.xp6(4),e.Oqu(t.markPointAvg),e.xp6(2),e.Oqu(e.Dn7(280,225,e.xi3(281,229,t.markPercentAvg,"1.0-2"),",","."))}}let Nj=(()=>{class n extends xe.Q{getDataStatistic(){if(this.initStatusObj(),this.dataStatistical){let t={id:this.dataStatistical.id??0,categoryId:this.dataStatistical.categoryId??0,name:this.dataStatistical.name??"",totalRegister:this.dataStatistical.totalRegister??0,totalNotComplete:this.dataStatistical.totalNotComplete??0,totalAttendee:this.dataStatistical.totalAttendee??0,averageMark:this.dataStatistical.averageMark??0,markPopular:this.dataStatistical.markPopular??0,totalPopular:this.dataStatistical.totalPopular??0,totalLte1:this.dataStatistical.totalLte1??0,totalGte5:this.dataStatistical.totalGte5??0};this.examCommonStatistical=t,this.examPageResultService.apiExamPageResultGetExamClassroomFrequencyMarkGet(t.id).subscribe(i=>{if(i.success&&i.data){let a=[];i.data.objs?.forEach(r=>{let s={classObj:{id:r.classroomId,name:r.classroomName??"lang_testbank_statistical_freelance_contestant",teacherId:0,showAddStudent:0,countStudents:0,grade:0},registerCount:r.totalRegister,testedCount:r.totalAttendee,markPercent:this.calcMarkPerCentForClassroom(r.marks??[],r.totalAttendee??0)};a.push(s)}),this.readyData(a)}else this.doneLoadingEmit.emit(!1),this.showErrorSnack(i.message??"")})}else this.doneLoadingEmit.emit(!1)}readyData(t){this.statistic=t,this.totalStudentRegister(this.statistic),this.totalStudentTakeExam(this.statistic),this.totalPercent(this.statistic),this.totalPoint(this.statistic),this.createChart(),this.doneLoadingEmit.emit(!0),this.successStatusObj()}calcMarkPerCentForClassroom(t,i){let a=[],r=0;for(let l=1;l<=10;l++){let c={key:"",count:0,percent:0};if(t[l-1]){let u=t[l-1];0==u.fromMark&&1==u.toMark?c.key="<1":1==u.fromMark&&2==u.toMark?c.key="<2":2==u.fromMark&&3==u.toMark?c.key="<3":3==u.fromMark&&4==u.toMark?c.key="<4":4==u.fromMark&&5==u.toMark?c.key="<5":5==u.fromMark&&6==u.toMark?(c.key="<6",r+=u.total??0):6==u.fromMark&&7==u.toMark?(c.key="<7",r+=u.total??0):7==u.fromMark&&8==u.toMark?(c.key="<8",r+=u.total??0):8==u.fromMark&&9==u.toMark?(c.key="<9",r+=u.total??0):(c.key="<=10",r+=u.total??0),c.count=u.total??0,c.percent=this.homeworkExamService.calcPercent(u.total,i)}else c.key="<"+l;a.push(c)}let s={key:"Avg",count:r,percent:this.homeworkExamService.calcPercent(r,i)};return a.push(s),a}createChart(){let t=this.commonService.myTranslateInstant("lang_auto_thong_ke_diem_thi")??"",i=this.commonService.myTranslateInstant("lang_auto_so_luong")??"",r=new g.kL({chart:{type:"column",style:{fontFamily:"Arial"}},colors:["#2361ae"],title:{style:{wordWrap:"break-word","text-align":"center"},text:t+"_"+this.examCommonStatistical.name,useHTML:!0},credits:{enabled:!1},xAxis:{categories:["< 1","< 2","< 3","< 4","< 5","< 6","< 7","< 8","< 9","<= 10"]},yAxis:{title:{text:""}},plotOptions:{series:{dataLabels:{enabled:!0,align:"center"}}},series:[{name:i,type:"column",data:[this.markPointOne,this.markPointTwo,this.markPointThree,this.markPointFour,this.markPointFive,this.markPointSix,this.markPointSeven,this.markPointEight,this.markPointNine,this.markPointTen]}]});this.chart=r}totalPercent(t){var i=0,a=0,r=0,s=0,l=0,c=0,u=0,m=0,p=0,f=0,b=0,L=0;for(let N=0;N<t.length;N++)t[N]&&(L+=t[N].testedCount??0,i+=t[N].markPercent[0].count??0,a+=t[N].markPercent[1].count??0,r+=t[N].markPercent[2].count??0,s+=t[N].markPercent[3].count??0,l+=t[N].markPercent[4].count??0,c+=t[N].markPercent[5].count??0,u+=t[N].markPercent[6].count??0,m+=t[N].markPercent[7].count??0,p+=t[N].markPercent[8].count??0,f+=t[N].markPercent[9].count??0,b+=t[N].markPercent[10].count??0);this.markPercentOne=100*i/L,this.markPercentTwo=100*a/L,this.markPercentThree=100*r/L,this.markPercentFour=100*s/L,this.markPercentFive=100*l/L,this.markPercentSix=100*c/L,this.markPercentSeven=100*u/L,this.markPercentEight=100*m/L,this.markPercentNine=100*p/L,this.markPercentTen=100*f/L,this.markPercentAvg=100*b/L}totalPoint(t){var i=0,a=0,r=0,s=0,l=0,c=0,u=0,m=0,p=0,f=0,b=0;for(let L=0;L<t.length;L++)t[L]&&(i+=t[L].markPercent[0].count??0,a+=t[L].markPercent[1].count??0,r+=t[L].markPercent[2].count??0,s+=t[L].markPercent[3].count??0,l+=t[L].markPercent[4].count??0,c+=t[L].markPercent[5].count??0,u+=t[L].markPercent[6].count??0,m+=t[L].markPercent[7].count??0,p+=t[L].markPercent[8].count??0,f+=t[L].markPercent[9].count??0,b+=t[L].markPercent[10].count??0);this.markPointOne=i,this.markPointTwo=a,this.markPointThree=r,this.markPointFour=s,this.markPointFive=l,this.markPointSix=c,this.markPointSeven=u,this.markPointEight=m,this.markPointNine=p,this.markPointTen=f,this.markPointAvg=b}totalStudentRegister(t){var i=0;for(let a=0;a<t.length;a++)i+=t[a].registerCount??0;this.countStudentRegister=i}totalStudentTakeExam(t){var i=0;for(let a=0;a<t.length;a++)i+=t[a].testedCount??0;this.countStudentTakeExam=i}goToStudentList(t){t.classObj?.id&&t.classObj?.id>0&&this.commonService.myNavigationWithQueryString(`/admin/student/classroom-details/${t.classObj.id}/0`,"?backto="+encodeURIComponent(`/admin/testbank/statistic/${this.examCommonStatistical.categoryId??0}/${this.examCommonStatistical.id}`))}ngOnChanges(){this.dataStatistical&&!this.commonService.isEmptyObj(this.dataStatistical)&&this.getDataStatistic()}ngOnInit(){this.dataStatistical&&!this.commonService.isEmptyObj(this.dataStatistical)&&this.getDataStatistic(),super.ngOnInit()}constructor(t,i){super(),this.homeworkExamService=t,this.examPageResultService=i,this.viewType=-1,this.doneLoadingEmit=new e.vpe,this.chart=new g.kL,this.examId=-1,this.statistic=[],this.examCommonStatistical={id:0,categoryId:0,name:"",totalRegister:0,totalNotComplete:0,totalAttendee:0,averageMark:0,markPopular:0,totalPopular:0,totalLte1:0,totalGte5:0},this.totalAttended=0,this.markPointOne=0,this.markPointTwo=0,this.markPointThree=0,this.markPointFour=0,this.markPointFive=0,this.markPointSix=0,this.markPointSeven=0,this.markPointEight=0,this.markPointNine=0,this.markPointTen=0,this.markPointAvg=0,this.markPercentOne=0,this.markPercentTwo=0,this.markPercentThree=0,this.markPercentFour=0,this.markPercentFive=0,this.markPercentSix=0,this.markPercentSeven=0,this.markPercentEight=0,this.markPercentNine=0,this.markPercentTen=0,this.markPercentAvg=0,this.countStudentRegister=0,this.countStudentTakeExam=0,this.freeStudentCount=0,this.freeStudentTakeTest=0,this.freeStudentList=[]}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(eh.v),e.Y36(un.DR))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-statistical-point-new"]],inputs:{viewType:"viewType",dataStatistical:"dataStatistical"},outputs:{doneLoadingEmit:"doneLoadingEmit"},features:[e.qOj,e.TTD],decls:3,vars:2,consts:[["class","col-span-12",4,"ngIf","ngIfElse"],["statisticIO",""],[1,"col-span-12"],[1,"intro-y","block","sm:flex","items-center"],[1,"text-lg","font-medium","truncate","mr-5"],[1,"p-3","m-3","text-center","alert","text-slate-500","font-medium"],[1,"col-span-12","lg:col-span-8","xl:col-span-8"],[1,"report-box","intro-y","mt-3"],[1,"box","sm:flex"],[1,"flex-1","p-5"],[1,"text-3xl"],[1,"text-lg","font-medium"],[1,"mt-3"],[1,"text-slate-500","text-xs","uppercase","flex","items-center"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","mr-2"],["d","M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"],["cx","9","cy","7","r","4"],["points","16 11 18 13 22 9"],[1,"mt-1.5","flex","items-center"],[1,"text-base"],["x1","17","y1","8","x2","22","y2","13"],["x1","22","y1","8","x2","17","y2","13"],[1,"report-box__indicator","bg-danger","tooltip","cursor-pointer","ml-2"],["d","M20 19.5v.5a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8.5L18 5.5"],["d","M8 18h1"],["d","M18.42 9.61a2.1 2.1 0 1 1 2.97 2.97L16.95 17 13 18l.99-3.95 4.43-4.44Z"],[1,"p-5","flex","flex-col","justify-center","flex-1","border-t","sm:border-t-0","sm:border-l","border-slate-200","dark:border-darkmode-300","border-dashed"],[1,"static-info-item"],[1,"text-slate-500","text-xs","uppercase"],[1,"static-info-item","mt-5"],[1,"text-slate-500","text-xs","mt-5","uppercase"],[1,"report-box__indicator","bg-warning","tooltip","cursor-pointer","ml-2"],[1,"report-box__indicator","bg-primary","tooltip","cursor-pointer","ml-2"],[1,"col-span-12","lg:col-span-8","xl:col-span-4"],[3,"viewType"],[1,"report-box","intro-x","mt-3"],[1,"box","p-5"],[1,"h-[400px]"],[1,"chart-center"],[3,"chart"],[1,"report-box","intro-x","mt-5"],[1,"box","p-5","overflow-x-auto"],[1,"table","table-bordered"],[1,"bg-slate-100","dark:bg-darkmode-400"],[1,"whitespace-nowrap",2,"text-align","center","vertical-align","middle"],["colspan","2",1,"whitespace-nowrap",2,"text-align","center","vertical-align","middle"],[1,"text-center"],[2,"text-align","center","vertical-align","middle"],[2,"padding","9.5px !important","text-align","center","vertical-align","middle"],[4,"ngFor","ngForOf"],[1,"font-medium"],[2,"padding","9.5px !important"],["azt-track-service","statistical-point-H1Y1HbVLKAS","style","padding: 9.5px !important; cursor: pointer;",3,"click",4,"ngIf"],["style","padding: 9.5px !important",4,"ngIf"],["azt-track-service","statistical-point-H1Y1HbVLKAS",2,"padding","9.5px !important","cursor","pointer",3,"click"]],template:function(t,i){if(1&t&&(e.YNc(0,cj,8,6,"div",0),e.YNc(1,Fj,282,232,"ng-template",null,1,e.W1O)),2&t){const a=e.MAs(2);e.Q6J("ngIf",i.statistic&&0!=i.statistic.length&&i.freeStudentList&&0!=i.freeStudentList.length)("ngIfElse",a)}},dependencies:[F.sg,F.O5,g.Dm,lj,F.JJ,ye.JV,ye.qY],styles:["td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{vertical-align:middle!important}.bg-blue-color[_ngcontent-%COMP%]{background-color:#2361ae;color:#fff}.color-white[_ngcontent-%COMP%]{color:#fff}.table-border-slim[_ngcontent-%COMP%]{border:none!important}.table-bordered[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table-bordered[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:.5px solid #dee2e6!important}.border-top-none[_ngcontent-%COMP%]{border-top:none!important}.border-left-none[_ngcontent-%COMP%]{border-left:none!important}.border-right-none[_ngcontent-%COMP%]{border-right:none}.border-right-bold[_ngcontent-%COMP%]{border-right:1px solid #dee2e6!important}.table-responsive[_ngcontent-%COMP%]::-webkit-scrollbar{background-color:#fff;width:16px}.table-responsive[_ngcontent-%COMP%]::-webkit-scrollbar-track{background-color:#fff}.table-responsive[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#babac0;border-radius:16px;border:4px solid #fff}.table-responsive[_ngcontent-%COMP%]::-webkit-scrollbar-button{display:none}.block-total[_ngcontent-%COMP%]{font-weight:700;color:#000;background:#fff}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center;vertical-align:middle}@media screen and (max-width: 768px){.table-responsive[_ngcontent-%COMP%]{display:block}}"]}),n})();function Zj(n,o){if(1&n&&e._UZ(0,"azt-loading-effect",7),2&n){const t=e.oxw();e.Q6J("currentStatusObj",t.statusObj)}}const Dj=function(n){return{hiddenIpt:n}};let Uj=(()=>{class n extends xe.Q{getDataStatistical(){this.initStatusObj(),this.examPageResultService.apiExamPageResultGetExamInfoGet(this.examId).subscribe(t=>{1==t.success&&t.data?this.examInfoForStatistical=t.data??{}:(this.showErrorSnack(t.message??""),this.stopStatusObj())})}doneLoadingFunc(t){this.doneLoadCount++,this.doneLoadCount>=3&&this.stopStatusObj()}ngOnInit(){this.commonService.translateMetaData({title:"lang_cms_test_statistical_title",description:"lang_cms_test_statistical_description",image:"lang_cms_test_image"});let t=this.commonService.getMyParam(this.activeRoute,"cat_id")??"",i=this.commonService.getMyParam(this.activeRoute,"id")??"";this.backToLink=this.commonService.getMyQueryParam("backto")?this.commonService.getMyQueryParam("backto")??"":`/admin/testbank/exam-results-list/${t}/${i}/0`,this.waitDestroy((0,ne.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.examId=Number(this.commonService.getMyParam(this.activeRoute,"id"))??0,this.getDataStatistical()})),super.ngOnInit()}constructor(t,i){super(),this.examPageResultService=t,this.activeRoute=i,this.backToLink="",this.viewType=1,this.examId=0,this.doneLoadCount=0}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(un.DR),e.Y36(E.gz))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-statistical-new"]],features:[e.qOj],decls:8,vars:12,consts:[[3,"headerBackToLink"],[1,"statistical","mx-auto","mt-5"],[3,"currentStatusObj",4,"ngIf"],[1,"grid","grid-cols-12","gap-6",3,"ngClass"],[1,"col-span-12","grid","grid-cols-12","gap-6",3,"viewType","dataStatistical","doneLoadingEmit"],[1,"col-span-12",3,"viewType","dataStatistical","doneLoadingEmit"],[3,"isScrollToTop"],[3,"currentStatusObj"]],template:function(t,i){1&t&&(e.TgZ(0,"teacher-layout",0)(1,"div",1),e.YNc(2,Zj,1,1,"azt-loading-effect",2),e.TgZ(3,"div",3)(4,"app-statistical-point-new",4),e.NdJ("doneLoadingEmit",function(r){return i.doneLoadingFunc(r)}),e.qZA(),e.TgZ(5,"app-list-question-new",5),e.NdJ("doneLoadingEmit",function(r){return i.doneLoadingFunc(r)}),e.qZA(),e.TgZ(6,"app-table-score-new",5),e.NdJ("doneLoadingEmit",function(r){return i.doneLoadingFunc(r)}),e.qZA()(),e._UZ(7,"azt-scroll-to-top-bottom",6),e.qZA()()),2&t&&(e.Q6J("headerBackToLink",i.backToLink),e.xp6(2),e.Q6J("ngIf",i.statusObj.loading),e.xp6(1),e.Q6J("ngClass",e.VKq(10,Dj,i.statusObj.loading)),e.xp6(1),e.Q6J("viewType",i.viewType)("dataStatistical",i.examInfoForStatistical),e.xp6(1),e.Q6J("viewType",i.viewType)("dataStatistical",i.examInfoForStatistical),e.xp6(1),e.Q6J("viewType",i.viewType)("dataStatistical",i.examInfoForStatistical),e.xp6(1),e.Q6J("isScrollToTop",!0))},dependencies:[F.mk,F.O5,vi.l,r_.M,wo._,LU,nj,Nj],encapsulation:2}),n})();var ah=I(17738),jj=I(80581);class qj{process(o){let t=["(^c\xe2u\\s*\\d{1,4}[^0-9])","(^ca\u0302u\\s*\\d{1,4}[^0-9])","(^c\xa9u\\s*\\d{1,4}[^0-9])","(^ca\u201au\\s*\\d{1,4}[^0-9])","(^b\xe0i\\s*\\d{1,4}[^0-9])","(^ba\u0300i\\s*\\d{1,4}[^0-9])","(^cau\\s*\\d{1,4}[^0-9])","(^bai\\s*\\d{1,4}[^0-9])","(^question\\s*\\d{1,4}[^0-9])","(^questions\\s*\\d{1,4}[^0-9])","(^\\[\\d{1,4}\\][^0-9])","(^\\d+\\s*\\(nb\\))","(^\\d+\\s*\\(th\\))","(^\\d+\\s*\\(vd\\))","(^\\d+\\s*\\(vdc\\))","(^c\xe2u\\s*\\d{1,4}[\\s\\.:]*$)","(^ca\u0302u\\s*\\d{1,4}[\\s\\.:]*$)","(^c\xa9u\\s*\\d{1,4}[\\s\\.:]*$)","(^ca\u201au\\s*\\d{1,4}[\\s\\.:]*$)","(^b\xe0i\\s*\\d{1,4}[\\s\\.:]*$)","(^ba\u0300i\\s*\\d{1,4}[\\s\\.:]*$)","(^cau\\s*\\d{1,4}[\\s\\.:]*$)","(^bai\\s*\\d{1,4}[\\s\\.:]*$)","(^questions\\s*\\d{1,4}[\\s\\.:]*$)","(^question\\s*\\d{1,4}[\\s\\.:]*$)"],i=["(^(\\d+\\s*\\.)\\s*[\\.0-9])","(^(\\d+\\s*\\.)\\s*\\(\\s*\\d+\\s*\\))","(^(\\d+\\s*\\.)\\s*[^\\s]\\s*[^\\s0-9])","(^\\d+\\s*\\.\\s*$)"],a=["(H\u01af\u1edaNG\\s*D\u1eaaN)","(\u01af\u1edaNG\\s*D\u1eaaN\\s*GI\u1ea2I\\s*CHI)","(GI\u1ea2I\\s*TH\xcdCH\\s*CHI\\s*TI\u1ebeT)","(H\u01b0\u1edbng\\s*d\u1eabn\\s*gi\u1ea3i)","(L\u1eddi\\s*gi\u1ea3i)","(L\u1edcI\\s*GI\u1ea2I)","(GI\u1ea2I\\s*CHI\\s*TI\u1ebeT)","(HD:)","(GLOSSARY)"],r=0,s=[],l=[];for(let u of o){let m=this.do(u,t,i);null!=m?(s.push({idx:r,val:jj.Utils.capitalizeFirstLetter(m.olabel)}),l.push("q")):(m=this.match(u,a),null!=m&&l.push("h")),r++}if(l.join("-").startsWith("q-h-q-h")){let u=1;for(let m of s)o[m.idx]=o[m.idx].replace(m.val,m.val.replace(/\d+/g,u+"")),u++}}do(o,t,i){let a=this.matchPos(o,t,i);if(a.value){let r=null;for(let p=a.value.length-1;p>=0;p--)if(a.value[p]){r=a.value[p];break}if(null==r)return null;let s=o.replace(/\|/g,"").toLowerCase().indexOf(r),l=s,c="",u=o.toLowerCase();for((r.endsWith("(")||r.endsWith("["))&&(r=r.substring(0,r.length-1));l<u.length&&("|"!=u[l]&&(c+=u[l]),l++,c!=r););return{pos:[s,l],olabel:r}}return null}matchPos(o,t,i){let a=o.replace(/\|/g,"").toLowerCase().trim(),r=t.join("|"),s=a.matchAll(r).next();return s.value||(r=i.join("|"),s=a.matchAll(r).next()),s}match(o,t){let i=o.replace(/\|/g,"").trim().match(t.join("|"));return null!=i&&i.length>0?{pos:[0,0],olabel:""}:null}}let Rj=(()=>{class n{constructor(t,i,a,r,s,l,c,u,m){this.commonService=t,this.cdnService=i,this.infoService=a,this.questionService=r,this.examCategoryService=s,this.apiUploadService=l,this.userService=c,this.questionSaveService=u,this.examService=m,this.saveParts=[],this.cropPdfParams="",this.configRenderService=new gn.v,this.apiCallbackCache=new Map,this.apiDataCache=new Map,this.loadingManager=new Map,this.MATH_PAT=/\[!m:\$([^\$\]]+)\$\]/g}init(){return new Promise((t,i)=>{this.commonService.loadScriptPromises([{source:this.cdnService.convertCdnLinkOfGitHub("js/mnpaint_bundle.js?v=0.3"),name:"mnpaint_bundle.js"},{source:this.cdnService.registerJsCdn("min.azota_docx_script"),name:"min.azota_docx_script"},{source:this.cdnService.convertCdnLinkOfGitHub("js/SaxonJS2_v2.js"),name:"SaxonJS2_v2.js"},{source:this.cdnService.convertCdnLinkOfGitHub("sprintf.min.js"),name:"sprintf.min.js"},{source:this.cdnService.convertCdnLinkOfGitHub("bundle.js"),name:"bundle.js"},{source:this.cdnService.convertCdnLinkOfGitHub("wmf.v1.js"),name:"wmf.v1.js"},{source:this.cdnService.convertCdnLinkOfGitHub("math-editor/mathquill.min.js"),name:"mathquill.min.js"},{source:"https://cdnjs.cloudflare.com/ajax/libs/interact.js/1.10.11/interact.min.js",name:"interact.min.js"},{source:this.cdnService.convertCdnLinkOfGitHub("js/FromEMF.f1.js"),name:"FromEMF.js"},{source:this.cdnService.convertCdnLinkOfGitHub("js/ToContext2D.f1.js"),name:"ToContext2D.js"},{source:this.cdnService.convertCdnLinkOfGitHub("js/UDOC.f1.js"),name:"UDOC.js"}]).then(()=>{this.infoService.apiInfoGetConfigObjsGet("CROPPDF_PARAMS").subscribe(a=>{this.cropPdfParams=a.CROPPDF_PARAMS,t()})}).catch(a=>{i(a)})})}hasStyleAns(t,i,a){if(!i)return"";let r=a.filter(s=>s.lineIdx==i.lineIdx&&s.s<=i.b&&s.e>=i.b);for(let s of r)if(s.style.indexOf("!u")>=0||s.style.indexOf("!b")>=0||s.style.indexOf("!hl")>=0)return s.style;return""}applyStyle(t,i,a){for(let r=i.length-1;r>=0;r--){let s=i[r],l=a.filter(c=>c.lineIdx==s.lineIdx&&c.e>=s.s);for(let c=l.length-1;c>=0;c--){let u=l[c].s>=s.s?l[c].s:s.s,m=l[c].e<=(s.e??9999999)?l[c].e:s.e,p=l[c].style.replaceAll("!hl","");if(u<m&&""!=p){let f=t[s.lineIdx],b=f.substring(u,m);""!=b.trim()&&(t[s.lineIdx]=f.substring(0,u)+"["+p+":$"+b+"$]"+f.substring(m))}}}}processUnderlineAns(t){let i=/\[[!bihl]*[!u]+[!bihl]*:\$(([^\$]|\$[^\]])+)\$\]/g,a=0,r=[];for(let s of t){if(/^[ABCD\.\s\t\*]+$/.test(s)&&""!=s.trim()&&a>0){let l=s;l=l.replaceAll(/[\s\t\.]+/g,"");let c=l.indexOf("*"),u=0;if(l=l.replaceAll(/[\*]+/g,""),"ABCDEFGH".indexOf(l)>=0){let m=t[a-1].match(i);if(m&&l.length==m.length){for(let f of m)t[a-1]=t[a-1].replace(f,f.replace(/\[[!bihl]*[!u]+[!bihl]*:\$/g,`[${c==u?"*":""}${l.substring(0,1)}:`).replace("$]","]")),r[r.length-1]=t[a-1],l=l.substring(1),u++;a++;continue}}}r.push(s),a++}return r}processStyle(t){let i=/\[![!ibuchl]+:\$(([^\$]|\$[^\]])+)\$\]/g,a=/^\s*\[\*\s*[AC]\.[^\|]+\|\s*[BD]\..*\*\]\s*$/g,r=[],s=0;for(let L of t){if(a.test(t[s].replaceAll(i,"$1"))&&(t[s]=t[s].replaceAll("[*","").replaceAll("*]","").replaceAll("|"," ").trim(),L=t[s]),L){let j,N=L.matchAll(i),R=0;for(;;){let G=N.next();if(G.done)break;let ae=G.value[0],W=ae.indexOf(":"),le=ae.substring(1,W),ce=G.value.index-R,te=ce+G.value[1].length;j&&ce==j.e&&j.style==le?j.e=te:(j={lineIdx:s,s:ce,e:te,style:le},r.push(j)),R+=W+4}t[s]=L.replaceAll(i,"$1")}s++}const l=new K.ExamIntellisense(this.cropPdfParams);l.setLines(t);let c=l.parse(),u=[],m=new Map,p=0;for(let L of c){p++;for(let N of L.parts)u.push(N);for(let N of L.answers){let R=this.hasStyleAns(t,N.parts[0],r);""!=R&&m.set(`${L.label}-${L.group}-${N.label}-${p}`,R);for(let j of N.parts)u.push(j)}}for(let L of c)if(L.help)for(let N of L.help)u.push(N);this.applyStyle(t,u,r),l.setLines(t),c=l.parse()??[];let f=[];p=0;for(let L of c){p++;let N=new Map;if(!(L.answers.filter(R=>R.isCorrect).length>0)){for(let R of L.answers){let j=m.get(`${L.label}-${L.group}-${R.label}-${p}`);j&&""!=j&&N.set(j,N.has(j)?void 0:R.parts[0])}for(let R of N)if(R[1]){f.push(R[1]);break}}}for(let L=f.length-1;L>=0;L--){let N=f[L];t[N.lineIdx]=t[N.lineIdx].substring(0,N.b)+"*"+t[N.lineIdx].substring(N.b)}return t=this.processUnderlineAns(t),c.length>0?t.slice(c[0].parts[0].lineIdx):t}processMath(t,i){let a=0;for(let r of t){let s=r.matchAll(this.MATH_PAT);for(;;){let l=s.next();if(l.done)break;let c=l.value[0],m=i.get(l.value[1]);m&&(m.lineIdx=a+1,m.startCol=l.value.index+1,m.endCol=m.startCol+c.length)}a++}}getIncludeIds(t,i){return[]}renderStr(t,i,a,r,s,l,c,u,m=!0){let p=m?r.replaceAll(/<([\/!a-zA-Z])/g,"&lt;$1").replaceAll(/&lt;([ubi])>/g,"<$1>").replaceAll(/&lt;[\/]([ubi])>/g,"</$1>").replaceAll("&lt;br>","<br>").replaceAll("<&lt;","&lt;&lt;").replaceAll("<&lt;","&lt;&lt;").replaceAll("<&lt;","&lt;&lt;"):r,f=[new Jo,new No(this.cdnService),new wa,new Ba,new ia,new Vr,new La(i,this.commonService),new za,new xo.$(this.cdnService,this.commonService,this.configRenderService,l),new Ts(this.cdnService,this.commonService,c,this.apiCallbackCache,this.aztEditor,u,this.getIncludeIds(t),this.apiDataCache,this.matrixLoadedData)];"link"==s&&(f=[new xo.$(this.cdnService,this.commonService,this.configRenderService,l)]),"help"==s&&f.pop();for(const b of f)b.setLoadingManager(this.loadingManager),p=b.render(p,a,this.questionService);return p}upperFirst(t){return t?t.charAt(0).toUpperCase()+t.slice(1):""}parseExtra(t){if(t.startsWith("[@"))return{val:"",idx:0,id:t};let r=t.matchAll(/\[!info:\d+\]/g),s="",l=0;for(;;){let u=r.next();if(u.done)break;s=u.value[0],l=u.value.index;break}if(""==s)return{val:"",idx:0,id:"0"};let c=s.replace("[!info:","").replace("]","").trim();return{val:s,idx:l,id:c}}fillImg(t,i,a,r){let s=new RegExp("<div id='"+a+"'[^>]+></div>","g"),l=t[i];l.renderedStr=l.renderedStr.replace(s,r??"");for(let c of l.answers)c.renderedStr=c.renderedStr.replace(s,r??"");l.helpRenderedStr&&(l.helpRenderedStr=l.helpRenderedStr.replace(s,r??""))}fillError(t,i,a){t?.[i]?.err&&(t[i].err=`<span style='color:red'>${a}</span>`)}renderQuest(t,i,a,r,s,l){return new Promise(c=>{let u=3;r.answers.length>0&&(u=1),0==r.answers.length&&r.strAns&&(u=4);let m=(j,G)=>{console.log("nvanh fill image ",t.length,j,G),this.fillImg(t,s,j,G)},p=j=>{console.log("nvanh fill quest ",s,j)},f=j=>{this.fillError(t,s,j)},b=r.parts.map(j=>j.text??"").join("<br>").trim(),L=this.parseExtra(b);""!=L.val&&(b=b.substring(0,L.idx)+b.substring(L.idx+L.val.length));let N=r.help?r.help.map(j=>j.text??"").join("<br>").trim():void 0,R={renderedStr:this.renderStr(t,i,a,b,"full",m,p,f),quest:r,type:u,strAns:r.strAns?r.strAns.split(/[\|]/).map(j=>j.trim()):void 0,label:this.upperFirst(r.olabel??""),helpRenderedStr:N?this.renderStr(t,i,a,N,"full",m,p,f):void 0,answers:r.answers.map(j=>{let G=j.parts.map(ae=>ae.text??"").join("<br>").trim();return{renderedStr:this.renderStr(t,i,a,G,"full",m,p,f),ans:j}})};if(R.renderedStr.startsWith("Loading...|")){let j=R.renderedStr.split("|");if(j[1].indexOf(",")<0){let G=+j[1];G>0&&(R.id=G)}R.renderedStr=j[0]}t[s]=R,l&&l(R),c(R)})}getLstQuestWithFile(t,i,a){return new Promise((r,s)=>{const l=new Ln(this.commonService),c=[],u=new Map,m=[],p=[];let f=1;l.handleFileSelect(t,b=>{for(let W of b.data)if("img"==W.type)c.push({id:W.key,link:W.value,cssStyle:W.cssStyle}),W.cssStyle&&W.cssStyle.split(";").length>2&&m.push([`^\\[img:\\$${W.key}\\$\\]`,`[img:$${W.key}$]\n`]);else if("mathml"==W.type){let le=+W.key.split("_")[1];u.set(W.key,{id:le,str:W.value,raw:W.docx,lineIdx:0,startCol:0,endCol:0}),le>f&&(f=le)}f++;for(let W of b.lines){if(0==W.length)continue;let le="";le=Array.isArray(W[0])&&Array.isArray(W[W.length-1])&&Array.isArray(W[Math.floor(W.length/2)])?"[* "+W.map(ce=>ce.map(te=>te.join("").replaceAll("\n","\\n")).join("\\n")).join(" | ")+" *]":W.join("");for(let ce of m)le=le.replaceAll(new RegExp(ce[0],"g"),ce[1]);let ve=le.split("\n");for(let ce of ve)p.push(ce)}(new Nn).process(p);let N=this.processStyle(p);this.processMath(N,u),(new qj).process(N);const j=new K.ExamIntellisense(this.cropPdfParams);j.setLines(N);let G=j.parse();const ae=new Ge.Q(2);for(let W=0;W<G.length;W++)ae.addTask(this,this.renderQuest,[i,u,c,G[W],W,a]);ae.start().then(W=>{setTimeout(()=>{r({lstQuest:i,mathMap:u,images:c})},10*c.length)})})})}createFolder(t,i){return new Promise((a,r)=>{this.examCategoryService.apiExamCategorySaveObjPost({name:t,parentId:i}).subscribe(l=>{1==l.success?a(l.data??{}):r(new Error(l.message))})})}convertPartItem(t){return 0===t.length?"":/^\[@((.)+)\]/g.test(t[0].text??"")?t[0].lineIdx+"_____"+t[0].text?.split("]=>")[0]+"]":""}convertQuestion(t,i,a,r,s,l){return new Promise((c,u)=>{const m=[];r.answers.forEach(L=>{m.push({key:L.ans.label,content:L.renderedStr})});let p=r.answers.find(L=>!0===L.ans.isCorrect);const b={name:this.commonService.myTranslateInstant("lang_auto_cau_hoi_tu_editor")+" "+(s+1),answerType:r.type,categoryId:0,questionContent:r.renderedStr,questionText:r.renderedStr,answerConfig:JSON.stringify(m),groupId:l,answerResult:p?JSON.stringify([p.ans.label]):r.strAns&&r.strAns?.length>0?JSON.stringify(r.strAns):void 0,totalQuestion:t.length,version:"4",isFixAns:r.quest.isFixAns?1:0,isImage:1,answerMedia:r.helpRenderedStr,mediaMeta:JSON.stringify(i),groupType:i?.isFixGroup?"1":void 0,tags:r.tag&&r.tag.length?r.tag.map(L=>L.code??""):[],__path:this.convertPartItem(r.quest.parts)};a.exam?.questionObj.listQuestions?.push(b),a.exam?.rootQuests.push(r),r.audio&&(0,ht.F0)(r.audio.type)?r.attachments&&"[]"!==r.attachments?(b.attachments=r.attachments,c()):this.apiUploadService.uploadToCdnProgressForTestbankQuestionAttachment(r.audio).subscribe(L=>{L.type!=V.dt.UploadProgress&&(1==L.success?b.attachments=JSON.stringify([L.data]):u(new Error("lang_auto_upload_file_audio_that_bai")),c())}):c()})}generateFileAzt(t){let i=this.aztEditor?._editor.getValue().trim()??"";if(""!=i){let a=[],r=[];for(let c of t.mathMap)a.push(c);let l=JSON.stringify({text:i,imgs:t.images,maths:a,infos:r});return new Blob([l],{type:"text/plain"})}return null}saveCdn(t,i){return new Promise(a=>{if(i.exam?.examObj){let r=new Date,s=`user-${this.userService.getUserObj().id}-de-azota-${r.getDate()}${r.getMonth()+1}${r.getFullYear()}-${r.getTime()}.azt`;const l=this.generateFileAzt(t);if(l){const c=new File([l],s,{type:"text/plain"});this.apiUploadService.uploadToCdnForExamEditor(c).subscribe(u=>{u.type!=V.dt.UploadProgress&&(1==u.success&&u.data&&i.exam?.examObj&&(i.exam.examObj.cdnEditorFile=u.data.url??""),a())})}else a()}else a()})}makeExpandInfoObj(t){const a=t.map(r=>r.quest.olabel?.replace(/[`~!@#$%^&*()_|+\-=?;:'",.<>\{\}\[\]\\\/]/gi,"").replace(/[0-9 ]/g,"")).filter(r=>r&&r.length>0);return a.length>0?{label:(r=a[0]??this.commonService.myTranslateInstant("lang_auto_cau")??"",r.charAt(0).toUpperCase()+r.slice(1))}:{};var r}uploadFileProcess(t,i){return new Promise(a=>{t?this.apiUploadService.uploadToCdnProgressForTestbankDocx(t).subscribe(r=>{r.type!=V.dt.UploadProgress&&(1==r.success&&i.exam&&(i.exam.examObj.cdnExamFile=r.data?.url??""),a())}):a()})}saveQuestionObjs(t,i,a){return new Promise(r=>{this.questionService.apiQuestionSaveObjsV2Post({listQuestions:i}).subscribe(s=>{if(t.exam&&1===s.success&&s.data?.objs){const l=[];s.data.objs.forEach((c,u)=>{const m=t.exam?.examConfig.find(f=>f.name==c.name);if(l.push({id:c.id,name:c.name,groupId:c.groupId,scorePerQuestion:m?.point||1,totalQuestion:1,sort:u+a}),i[u]){const f=i[u];f.__path&&f.__path.length>0?this.saveParts.includes(f.__path)||this.saveParts.push(f.__path):this.saveParts.push(`[@Q${c.id}: C\xe2u ${u+a+1}]`)}}),r({indexSaved:s.data?.objs?.length+a,examConfigs:l})}else r({indexSaved:a,examConfigs:[]})})})}processSaveQuestions(t,i,a,r,s){if(i.exam?.questionObj&&i.exam?.questionObj.listQuestions){var l=i.exam?.questionObj.listQuestions.length;let u=a+100>l?l:a+100;var c=i.exam?.questionObj.listQuestions.slice(a,u)??[];let m=[];for(const p of c)m.push({categoryId:p.categoryId,groupId:p.groupId,name:p.name??"none",metadata:p.metadata,isImage:p.isImage,questionContent:p.questionContent,answerMedia:p.answerMedia,questionText:p.questionText,answerType:p.answerType,answerConfig:p.answerConfig,coordinates:p.coordinates,answerResult:p.answerResult,totalQuestion:p.totalQuestion,tags:p.tags??[],mediaId:p.mediaId,mediaMeta:p.mediaMeta,attachments:p.attachments,version:p.version,isFixAns:p.isFixAns,groupType:p.groupType});m.length>0?this.saveQuestionObjs(i,m,r).then(p=>{if(p.examConfigs&&p.examConfigs.length>0){let f=s.concat(p.examConfigs);this.processSaveQuestions(t,i,u,p.indexSaved,f)}}):this.saveExamObj(t,i,s)}}saveExamObj(t,i,a){if(i.exam){let s=!1;this.saveParts=this.saveParts.map(m=>{const p=m.split("_____");return-1!==m.indexOf("ng\u1eabu nhi\xean")&&(s=!0),1===p.length?p[0]:p[1]});let l={...this.formSubjectAndClassroom,generalTitle:i.exam?.examObj.name,generalDescription:""},c=this.userService.getUserObj(),u=JSON.stringify({type:"exam",id:0,user:c.id});i.exam.examObj.scoringMethod="1",i.exam.examObj.name=l.generalTitle,i.exam.examObj.examConfigs=JSON.stringify(a),i.exam.examObj.description=l.generalDescription,i.exam.examObj.editorStatus=2,i.exam.examObj.metadata=JSON.stringify(this.saveParts),i.exam.examObj.isRandomExam=s,i.exam.examObj.schoolLevelId=l.schoolLevel,i.exam.examObj.schoolSubjectId=l.schoolSubject,this.examService.apiExamSaveObjPost({id:i.exam.examObj.id??0,categoryId:i.exam.examObj.categoryId,scoringMethod:i.exam.examObj.scoringMethod,name:i.exam.examObj.name??"",description:i.exam.examObj.description,examConfigs:i.exam.examObj.examConfigs,suggestions:i.exam.examObj.suggestions,labelsUrl:i.exam.examObj.labelsUrl,abcdLabelPos:i.exam.examObj.abcdLabelPos,questionLabelMap:i.exam.examObj.questionLabelMap,firstInGroupIndexes:i.exam.examObj.firstInGroupIndexes,totalExam:i.exam.examObj.totalExam??0,cdnExamFile:i.exam.examObj.cdnExamFile,cdnEditorFile:i.exam.examObj.cdnEditorFile,trackEdit:i.exam.examObj.trackEdit,examHeader:i.exam.examObj.examHeader,expandInfoObj:i.exam.examObj.expandInfoObj,cutData:void 0,editorStatus:i.exam.examObj.editorStatus,startQuestionIndex:i.exam.examObj.startQuestionIndex,metadata:i.exam.examObj.metadata,isRandomExam:i.exam.examObj.isRandomExam,schoolLevelId:i.exam.examObj.schoolLevelId,schoolSubjectId:i.exam.examObj.schoolSubjectId,purposeId:i.exam.examObj.purposeId,purposeNote:i.exam.examObj.purposeNote},u).subscribe(m=>{t()})}}saveExam(t,i,a){return new Promise(r=>{if(t.result){const s=new Ge.Q(10,{function:(b,L)=>{const N=this.commonService.myTranslateInstant("lang_auto_dang_luu_du_lieu_de_thi");a.pushMsg(`${N}: ${Math.floor(b/L*100)}%`)}}),l={};let m,p=[],f=!0;l.exam={examObj:{categoryId:i,name:t.file.name,startQuestionIndex:(t.result.lstQuest[0].quest.isGroup?t.result.lstQuest[1]:t.result.lstQuest[0]).quest.label??1},questionObj:{listQuestions:[]},examConfig:[],rootQuests:[]},s.addTask(this,this.uploadFileProcess,[t.file,l]),t.result.lstQuest.forEach((b,L)=>{if(b.quest.isGroup)m=b,f=!1;else{f||(f=!0,p.push(L-(p.length+1)));const R={name:this.commonService.myTranslateInstant("lang_auto_cau_hoi_tu_editor")+" "+(L-p.length+1),point:1};l.exam?.examConfig.push(R),s.addTask(this,this.convertQuestion,[t.result?.lstQuest,m,l,b,L-p.length,p.length])}}),s.addTask(this,this.saveCdn,[t.result,l]),l.exam.examObj.firstInGroupIndexes=JSON.stringify(p),l.exam.examObj.expandInfoObj=this.makeExpandInfoObj(t.result.lstQuest),l.exam.examObj.description="",s.start().then(()=>{a.pushMsg("\u0110ang l\u01b0u ..."),console.log("nvanh save ",l),this.questionSaveService.convertQuestions(l.exam?.questionObj.listQuestions??[],l.exam?.rootQuests??[],(L,N="",R)=>{a.remove(),r()}).then(()=>{this.saveParts=[],this.processSaveQuestions(()=>{a.remove(),r()},l,0,0,[])}),r()})}else r()})}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(Yn.z),e.LFG(tr.E),e.LFG(Ss.CM),e.LFG(un.aE),e.LFG(un.F1),e.LFG(Wr.W),e.LFG(ya.U),e.LFG(Ha),e.LFG(un.Oe))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),zj=(()=>{class n{reset(){this.logger=new ah.O}cancel(){return new Promise(t=>{this.treeDataFolders.pushActionCancel(0).then(()=>{this.logger.remove(),t()})})}init(t,i){return new Promise((a,r)=>{this.logger=new ah.O(!0,this.commonService.myTranslateInstant("lang_loading_data")),this.treeDataFolders=new Wg,this.treeDataFolders.parentId=t,this.treeDataFolders.pushActionCancel(1),this.treeDataFolders.pushActionRunner(!0),this.syncQuestionTestBankService.formSubjectAndClassroom=i,this.syncQuestionTestBankService.init().then(()=>{a()}).catch(s=>{r(s)})})}push(t){this.treeDataFolders.push(t)}start(){this.logger.pushMsg(this.commonService.myTranslateInstant("lang_auto_dang_xu_ly_du_lieu")??"");const t=new Ge.Q(1);this.treeDataFolders.pushTaskDocument(t,this.syncQuestionTestBankService,this.logger),t.start().then(i=>{this.logger.remove()})}getListQuestion(){this.logger.pushMsg(this.commonService.myTranslateInstant("lang_auto_dang_xu_ly_du_lieu")??"");const t=new Ge.Q(1);this.treeDataFolders.pushTaskDocument(t,this.syncQuestionTestBankService,this.logger)}constructor(t,i){this.syncQuestionTestBankService=t,this.commonService=i,this.logger=new ah.O,this.treeDataFolders=new Wg}get keyLoading(){return this.logger.lines}get isLoading(){return this.logger.run??!1}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(Rj),e.LFG(Yn.z))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Wg{push(o){const t=o.webkitRelativePath.split("/"),i=t.shift();if(""===this.name&&(this.name=i??"root"),1===t.length)return void this.documents.push({file:o});t.pop();let a=this;t.forEach(r=>{a=this.getOrCreateObject(r,a)}),a.documents.push({file:o})}pushTaskDocument(o,t,i){o.addTask(this,this.syncFolderAction,[t,i],this.name),this.documents.forEach(a=>{o.addTask(this,this.processDocument,[a,t,i],a.file.name)}),this.children.forEach(a=>{a.pushTaskDocument(o,t,i)})}syncActionDocument(o,t,i){return new Promise(a=>{if(1===this.getStatusAction()&&this.checkName(this.makeName(i.file.name)))if(i.result&&i.result.lstQuest.filter(r=>r.answers.length>2).length>0){const r=new ah.O(!0,"\u0110ang l\u01b0u \u0111\u1ec1 thi "+i.file.name);t.pushChild(r),o.saveExam(i,this.folderId,r).then(()=>{this.saveName(this.makeName(i.file.name)),r.remove(),a()})}else a();else a()})}syncFolderAction(o,t){return new Promise(i=>{if(1===this.getStatusAction()&&this.checkName(this.makeName()))if(-1===this.folderId){const a=new ah.O(!0,"\u0110ang t\u1ea1o th\u01b0 m\u1ee5c "+this.name);t.pushChild(a),-1!==this.parentId?o.createFolder(this.name,this.parentId).then(r=>{this.folderId=r.obj?.id??-1,this.children.forEach(s=>{s.parentId=this.folderId}),this.saveName(this.makeName()),this.saveFolderId(this.makeName(),this.folderId),a.remove(),i()}).catch(()=>{this.folderId=-1,a.remove(),i()}):(a.remove(),i())}else i();else 1===this.getStatusAction()&&(this.folderId=this.getFolderId(this.makeName()),this.children.forEach(a=>{a.parentId=this.folderId})),i()})}processDocument(o,t,i){return new Promise((a,r)=>{if(1===this.getStatusAction()&&this.checkName(this.makeName(o.file.name))){const s=new ah.O(!0,"\u0110ang x\u1eed l\xfd t\u1ec7p tin "+o.file.name);i.pushChild(s),t.getLstQuestWithFile(o.file,[]).then(c=>{o.result=c,c.lstQuest.filter(u=>u.answers.length>2).length>0&&(s.pushMsg("\u0110ang l\u01b0u \u0111\u1ec1 thi "+o.file.name),this.syncActionDocument(t,i,o).then(()=>{s.remove(),a()}))})}else a()})}getOrCreateObject(o,t){let i=t.children.find(a=>a.name===o);return i||(i=new Wg(o),i.parentName=t.parentName+"/"+t.name,t.children.push(i)),i}saveName(o){const t=this.makeObjSave();t.save_names.push(o),this.setObjSave(t)}saveFolderId(o,t){const i=this.makeObjSave();i.folder_save.push({name:o,value:t}),this.setObjSave(i)}checkName(o){return!this.makeObjSave().save_names.includes(o)}makeName(o){return o?this.parentName+"_"+this.name+"_"+o:this.parentName+"_"+this.name}getFolderId(o){return this.makeObjSave().folder_save.find(i=>i.name===o)?.value??0}pushActionCancel(o){return new Promise(t=>{const i=this.makeObjSave();if(i.status=o,this.setObjSave(i),0===o){const a=setInterval(()=>{this.makeObjSave().isRun||(clearInterval(a),t())},100)}else t()})}pushActionRunner(o){const t=this.makeObjSave();t.isRun=o,this.setObjSave(t)}getStatusAction(){const o=this.makeObjSave().status;return 0===o&&this.pushActionRunner(!1),o}makeObjSave(){const o=window.localStorage.getItem(this.LOCAL_STORAGE_KEY);return o?JSON.parse(o):new Hj}setObjSave(o){window.localStorage.setItem(this.LOCAL_STORAGE_KEY,JSON.stringify(o))}constructor(o){this.parentName="",this.parentId=-1,this.folderId=-1,this.name="",this.documents=[],this.children=[],this.LOCAL_STORAGE_KEY="NVANH_TOOL_SYNC_ACTION",o&&(this.name=o)}}class Hj{constructor(){this.status=1,this.save_names=[],this.folder_save=[],this.isRun=!0}}var Jj=I(27118);const Kj=["drawer"];function Gj(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",18),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.handleCancelSync())}),e._uU(1," Hu\u1ef7 "),e.qZA()}}function Yj(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",38),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.sAztMatDrawerService.openDrawer())}),e.ALo(1,"mytranslate"),e.O4$(),e.TgZ(2,"svg",39),e._UZ(3,"rect",40)(4,"path",41)(5,"path",42),e.qZA()()}2&n&&e.s9C("matTooltip",e.lcZ(1,1,"lang_auto_mo_menu"))}function $j(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",43),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.sAztMatDrawerService.closeDrawer())}),e.ALo(1,"mytranslate"),e.O4$(),e.TgZ(2,"svg",39),e._UZ(3,"rect",40)(4,"path",41)(5,"path",44),e.qZA()()}2&n&&e.s9C("matTooltip",e.lcZ(1,1,"lang_auto_dong_menu"))}const Vj=function(n){return{"ml-5":n}};function Wj(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",19)(1,"div",20),e.YNc(2,Yj,6,3,"button",21),e.YNc(3,$j,6,3,"button",22),e.qZA(),e._UZ(4,"config-level-subject",23),e.TgZ(5,"div",11)(6,"p",24),e._uU(7),e.ALo(8,"mytranslate"),e.qZA()(),e.TgZ(9,"div",25)(10,"div",26)(11,"div",27)(12,"input",28,29),e.NdJ("change",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.handleEventChangeFolder(a))}),e.qZA(),e.TgZ(14,"div",30)(15,"div",31)(16,"div")(17,"span",15),e._UZ(18,"lucide-icon",32),e.qZA(),e.TgZ(19,"span",33),e._uU(20),e.ALo(21,"mytranslate"),e.qZA()()()(),e.TgZ(22,"div",34)(23,"span",35),e._uU(24),e.ALo(25,"mytranslate"),e.qZA()(),e.TgZ(26,"div",34)(27,"a",36),e.NdJ("click",function(){e.CHM(t);const a=e.MAs(13);return e.KtG(a.click())}),e.TgZ(28,"span",15),e._UZ(29,"lucide-icon",37),e.qZA(),e.TgZ(30,"span"),e._uU(31),e.ALo(32,"mytranslate"),e.qZA()()()()()()()}if(2&n){const t=e.oxw();e.Q6J("ngClass",e.VKq(18,Vj,!t.isMobileDevice&&t.sAztMatDrawerService.isOpenSideNav)),e.xp6(2),e.Q6J("ngIf",!t.sAztMatDrawerService.isOpenSideNav||t.isMobileDevice),e.xp6(1),e.Q6J("ngIf",t.sAztMatDrawerService.isOpenSideNav&&!t.isMobileDevice),e.xp6(1),e.Q6J("form",t.form)("schoolLevelObjs",t.schoolLevelObjs)("examSchoolLogObj",t.examSchoolLogObj),e.xp6(3),e.Oqu(e.lcZ(8,10,"lang_core_auto_tool_sync_chon_thu_muc")),e.xp6(13),e.hij(" ",e.lcZ(21,12,"lang_core_auto_tool_sync_keo_tha")," "),e.xp6(4),e.hij(" ",e.lcZ(25,14,"lang_core_auto_tool_sync_hoac")," "),e.xp6(7),e.Oqu(e.lcZ(32,16,"lang_core_auto_tool_sync_chon_thu_muc_can_sync"))}}const Xj=function(n,o){return{"w-85":n,"w-30":o}},eq=function(n){return{"azt-mobile-draw-left":n}};let tq=(()=>{class n extends xe.Q{set drawer(t){this.sAztMatDrawerService.resizeDrawerHeight(!1,t)}changeStatusNav(){this.isMobileDevice&&(document.body.style.overflow="auto")}saveStatusSideNav(){this.examFilterService.saveStatusSideNav("exam_sync_folder",this.sAztMatDrawerService.isOpenSideNav)}removeStatusSideNav(){this.examFilterService.removeStatusSideNav("exam_sync_folder")}getStatusSideNav(){if(window.innerWidth>980){let t=this.examFilterService.getStatusSideNav("exam_sync_folder");t&&"close"==t?this.sAztMatDrawerService.closeDrawer():this.sAztMatDrawerService.openDrawer()}}mainProcessFiles(t){const i=Number(this.activeRoute.snapshot.paramMap.get("cat_id"))??0,a=this.form.getRawValue();this.syncTestbankService.init(i,a).then(()=>{t.forEach(r=>{(0,ht.D_)(r.type)&&r.name.includes("docx")&&this.syncTestbankService.push(r)}),this.syncTestbankService.start()})}handleEventChangeFolder(t){t.target.files&&this.mainProcessFiles([...t.target.files]),t.target.value=""}handleCancelSync(){this.syncTestbankService.cancel().then(()=>{})}ngOnInit(){super.ngOnInit(),this.userService.isTestMarketAdminRole()?this.waitDestroy(this.commonListService.apiCommonListSubjectAndLevelsGet(this.commonService.getBusinessDomainUrl()).subscribe(t=>{1==t.success?(this.examSchoolLogObj=t.data?.examSchoolLogObj,this.schoolLevelObjs=t.data?.schoolLevelSubjectObjs??[],this.isLoadForm=!0):this.errorStatusObj(t.message??"")})):this.commonService.myNavigation("/admin/dashboard")}constructor(t,i,a,r,s,l){super(),this.examFilterService=t,this.syncTestbankService=i,this.activeRoute=a,this.userService=r,this.sAztMatDrawerService=s,this.commonListService=l,this.backToLink="/admin/dashboard",this.aztConfigCropParam="",this.isLoadForm=!1,this.schoolLevelObjs=[],this.form=new h.cw({generalDescription:new h.NI("",{nonNullable:!0}),schoolLevel:new h.NI(0,{nonNullable:!0,validators:[h.kI.required,h.kI.min(1)]}),schoolSubject:new h.NI(0,{nonNullable:!0,validators:[h.kI.required,h.kI.min(1)]})})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Kx),e.Y36(zj),e.Y36(E.gz),e.Y36(ya.U),e.Y36(Ad.T),e.Y36(ps.o7))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-sync-folder"]],viewQuery:function(t,i){if(1&t&&e.Gf(Kj,5),2&t){let a;e.iGM(a=e.CRH())&&(i.drawer=a.first)}},features:[e._Bn([Ad.T]),e.qOj],decls:23,vars:25,consts:[[3,"headerBackToLink"],[1,"container-fluid","mt-3","overflow-hidden"],["azt-track-service","sync-folder-I_srCKgqJ","class","cancel","style","z-index: 999999999999; position: fixed; padding: 5px 20px; border-radius: 5px; border: 1px solid #cfd8dc; background: #eceff1; top: 50px; left: 50%; cursor: pointer",3,"click",4,"ngIf"],[3,"msg","show","percent"],[1,"azt-drawer-container","mt-5",3,"hasBackdrop"],[3,"ngClass","mode","opened","closedStart"],["drawer",""],[1,"azt-draw-left",3,"ngClass"],["pointerEventsMethod","scrollbar",3,"visibility"],[1,"box","p-3","h-full","lg:h-auto","mb-10",2,"height","80vh"],[1,"document-info"],[1,"flex","items-center"],["matTooltip","\u0110\u1ed3ng b\u1ed9 th\u01b0 m\u1ee5c",1,"text-md","font-medium","truncate","mr-auto","mt-2",3,"isDisabledTooltip","matTooltipDisabled"],["c","isDisabled"],[1,"text-md","mt-2"],[1,"w-4","h-4","mr-1","inline-block",2,"vertical-align","sub"],["name","info"],["class","azt-drawer-content",3,"ngClass",4,"ngIf"],["azt-track-service","sync-folder-I_srCKgqJ",1,"cancel",2,"z-index","999999999999","position","fixed","padding","5px 20px","border-radius","5px","border","1px solid #cfd8dc","background","#eceff1","top","50px","left","50%","cursor","pointer",3,"click"],[1,"azt-drawer-content",3,"ngClass"],[1,"flex","box","sm:h-auto","rounded-md","border","border-slate-200/60","dark:border-darkmode-400","p-2","text-slate-500","mb-2"],["azt-track-service","sync-folder-SS5UgcvZq","class","btn btn-sm mr-2",3,"matTooltip","click",4,"ngIf"],["azt-track-service","sync-folder-q_c8tTVOYm","class","btn btn-sm mr-2",3,"matTooltip","click",4,"ngIf"],[3,"form","schoolLevelObjs","examSchoolLogObj"],[1,"text-md","font-medium","mr-auto","ng-star-inserted"],[1,"box","mt-2","relative","py-2",2,"height","62vh"],[1,"h-100","flex","items-center","justify-center",2,"height","100%"],[1,"text-center"],["type","file","webkitdirectory","",2,"display","none",3,"change"],["folderInputDirectory",""],["appDragDrop","",1,"xl:mt-0","flex-1","border-2","border-dashed","dark:border-darkmode-400","rounded-md"],[1,"flex","items-center","justify-center","text-center","cursor-pointer","relative",2,"width","400px","height","200px"],["name","folder-input"],[1,"text-primary","mr-1"],[1,"mt-3","lg:mr-auto"],[1,"text-md"],["azt-track-service","sync-folder-AgaqXySbDm",1,"btn","btn-secondary-soft",3,"click"],["name","folder-up"],["azt-track-service","sync-folder-SS5UgcvZq",1,"btn","btn-sm","mr-2",3,"matTooltip","click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-menu","w-4","h-4"],["x","3","y","3","width","18","height","18","rx","2","ry","2"],["d","M9 3v18"],["d","m14 9 3 3-3 3"],["azt-track-service","sync-folder-q_c8tTVOYm",1,"btn","btn-sm","mr-2",3,"matTooltip","click"],["d","m16 15-3-3 3-3"]],template:function(t,i){if(1&t&&(e.TgZ(0,"teacher-layout",0)(1,"div",1),e.YNc(2,Gj,2,0,"div",2),e._UZ(3,"azt-export-docx-loading-box",3),e.TgZ(4,"mat-drawer-container",4)(5,"mat-drawer",5,6),e.NdJ("closedStart",function(){return i.changeStatusNav()}),e.TgZ(7,"div",7)(8,"ng-scrollbar",8)(9,"div",9)(10,"div",10)(11,"div",11)(12,"h3",12,13),e._uU(14),e.ALo(15,"mytranslate"),e.qZA()(),e.TgZ(16,"div",14)(17,"span",15),e._UZ(18,"lucide-icon",16),e.qZA(),e._uU(19),e.ALo(20,"mytranslate"),e.qZA()()()()()(),e.TgZ(21,"mat-drawer-content"),e.YNc(22,Wj,33,20,"div",17),e.qZA()()()()),2&t){const a=e.MAs(13);e.Q6J("headerBackToLink",i.backToLink),e.xp6(2),e.Q6J("ngIf",i.syncTestbankService.isLoading),e.xp6(1),e.Q6J("msg",i.syncTestbankService.keyLoading)("show",i.syncTestbankService.isLoading)("percent",0),e.xp6(1),e.Q6J("hasBackdrop",i.sAztMatDrawerService.hasBackdrop),e.xp6(1),e.s9C("opened",i.sAztMatDrawerService.isOpenSideNav?"true":"false"),e.Q6J("ngClass",e.WLB(20,Xj,i.isMobileDevice,!i.isMobileDevice))("mode",i.sAztMatDrawerService.mode),e.xp6(2),e.Q6J("ngClass",e.VKq(23,eq,i.isMobileDevice)),e.xp6(1),e.Q6J("visibility","hover"),e.xp6(4),e.Q6J("isDisabledTooltip",!1)("matTooltipDisabled",a.isDisabled),e.xp6(2),e.hij(" ",e.lcZ(15,16,"lang_core_auto_tool_sync_huong_dan_dong_bo")," "),e.xp6(5),e.hij(" ",e.lcZ(20,18,"lang_core_auto_tool_sync_huong_dan_dong_bo_description")," "),e.xp6(3),e.Q6J("ngIf",i.isLoadForm)}},dependencies:[F.mk,F.O5,Hs.jA,Hs.kh,Hs.LW,Ai.gM,k.KC,Jj.N,zs.Q,Hg,$p.Z,wo._,_.Nh5,ye.JV],encapsulation:2}),n})();var nq=I(75270),iq=I(18224),oq=I(49649),aq=I(1103);function rq(n,o){if(1&n&&(e.TgZ(0,"div",3),e._UZ(1,"azt-student-info-box",4),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("name",t.studentObj.fullName)("parentFullName",t.studentObj.parentFullName)("parentId",t.studentObj.parentId)("parentPhone",t.studentObj.parentPhone)("phone",t.studentObj&&10==(null==t.studentObj.phone?null:t.studentObj.phone.length)?t.studentObj.phone:"")("email",t.studentObj.email)("avatar",t.studentObj.avatar)("gender",t.studentObj.gender)("birthday",t.studentObj.birthday)("joinedAt",t.studentObj.joinedAt)("classrooms",t.studentObj.classrooms)("facebookLink",t.studentObj.facebookLink)("schoolName",t.studentObj.schoolName)("hasUser",!0)("showPhone",t.showPhone)("nameImages",t.studentObj.nameImages)("identificationNumber",t.studentObj.identificationNumber)}}let sq=(()=>{class n extends xe.Q{returnTooltip(){return null==this.studentObj?.parentPhone?"ID: "+this.studentObj?.parentId+" - Phone: "+this.userService.anonymousPhone(this.studentObj?.phone??""):"ID: "+this.studentObj.parentId+" - Phone: "+this.userService.anonymousPhone(this.studentObj.parentPhone)+" - Name: "+this.studentObj.parentFullName}ngOnInit(){super.ngOnInit()}constructor(t){super(),this.userService=t,this.showPhone=!this.isBusinessDomain}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(ya.U))},n.\u0275cmp=e.Xpm({type:n,selectors:[["azt-basic-info-box"]],inputs:{studentObj:"studentObj",showPhone:"showPhone"},features:[e.qOj],decls:3,vars:1,consts:[[1,"flex","flex-1","items-center","justify-start"],[1,"w-full"],["class","font-medium text-md",4,"ngIf"],[1,"font-medium","text-md"],[3,"name","parentFullName","parentId","parentPhone","phone","email","avatar","gender","birthday","joinedAt","classrooms","facebookLink","schoolName","hasUser","showPhone","nameImages","identificationNumber"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,rq,2,17,"div",2),e.qZA()()),2&t&&(e.xp6(2),e.Q6J("ngIf",i.studentObj))},dependencies:[F.O5,aq.a],encapsulation:2}),n})();var lq=I(9409),cq=I(25541),uq=I(29578),dq=I(67898),mq=I(6598);function pq(n,o){if(1&n&&e._UZ(0,"azt-loading-effect",3),2&n){const t=e.oxw();e.Q6J("currentStatusObj",t.statusObj)}}function hq(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"azt-mat-dialog-content",4)(1,"div",5),e._UZ(2,"azt-test-result-tracking",6),e.qZA()(),e.TgZ(3,"div",7)(4,"button",8),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.dialogRef.close())}),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()()}if(2&n){const t=e.oxw();let i;e.Q6J("defaultHeight",70),e.xp6(2),e.Q6J("startQuestionIndex",null!==(i=null==t.examObj?null:t.examObj.startQuestionIndex)&&void 0!==i?i:1)("dataResultObjs",t.dataResultObjs)("dataScrollObjs",t.dataScrollObjs)("ipTrackingDataObjs",t.ipTrackingDataObjs),e.xp6(3),e.hij(" ",e.lcZ(6,6,"lang_auto_thoat")," ")}}let Aq=(()=>{class n extends mt.e{getData(t,i,a,r){this.initStatusObj(),this.waitDestroy(this.examResultTrackService.apiExamResultTrackGetObjGet(t,i,a,r).subscribe(s=>{if(1==s.success){this.examObj=s.data?.examObj;var l=this.castJsonToObj(this.zipDataService.decodeContentGzip(s?.data?.examResultTrackObj?.trackData??""));l&&([this.dataResultObjs,this.dataScrollObjs]=this.sAztTestResultTrackingService.processData(l)),this.ipTrackingDataObjs=s.data?.ipTracks??[],this.successStatusObj()}else this.errorStatusObj(s.message??"",!0);this.isLoading=!1}))}ngOnInit(){this.commonService.translateMetaData({title:"lang_auto_chi_tite_qua_trinh_lam_trac_nghiem",description:"lang_auto_chi_tite_qua_trinh_lam_trac_nghiem",image:"lang_cms_test_image"});let t=this.data.examIdParam??0,i=parseInt(this.data.examResultIdParam?.toString()??"0",10);this.getData(t,this.data.userIdParam??"",this.data.studentIdParam??"",i),super.ngOnInit()}constructor(t,i,a,r,s){super(s,r),this.examResultTrackService=t,this.zipDataService=i,this.sAztTestResultTrackingService=a,this.dialogRef=r,this.data=s,this.dataResultObjs=[],this.dataScrollObjs=[],this.ipTrackingDataObjs=[],this.backToLink="",this.isLoading=!0}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(un.UR),e.Y36(Us.a),e.Y36(dq.W),e.Y36(U.so,8),e.Y36(U.WI,8))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-test-result-tracking"]],features:[e.qOj],decls:4,vars:2,consts:[[1,"box","scroll-menu-test",2,"height","calc(100vh - 200px)","min-height","75vh"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],["doneLoading",""],[3,"currentStatusObj"],[3,"defaultHeight"],[1,"p-3"],[3,"startQuestionIndex","dataResultObjs","dataScrollObjs","ipTrackingDataObjs"],[1,"mt-2","pt-2","pb-2","px-3","text-right","absolute","bottom-0","right-0"],["azt-track-service","azt-dialog-danger-9EJYp6jGzr",1,"btn","w-24","btn-secondary",3,"click"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0),e.YNc(1,pq,1,1,"azt-loading-effect",1),e.YNc(2,hq,7,8,"ng-template",null,2,e.W1O),e.qZA()),2&t){const a=e.MAs(3);e.xp6(1),e.Q6J("ngIf",i.isLoading)("ngIfElse",a)}},dependencies:[F.O5,vi.l,mq.r,Dr.R,ye.JV],styles:[".container-fluid[_ngcontent-%COMP%]{background-color:#fff;width:100vh;max-height:95vh;padding:.5rem 1.25rem 1.25rem;overflow-y:auto}"]}),n})();function _q(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_auto_xac_nhan_chon_ket_qua_trac_nghiem")))}function fq(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_auto_xac_nhan_chon_ket_qua_tu_luan")))}function gq(n,o){if(1&n&&(e.TgZ(0,"span",13),e._uU(1),e.ALo(2,"mytranslate"),e.ALo(3,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.lnq(" ",e.lcZ(2,3,"lang_auto_lan")," ",t.data.index," - ",e.lcZ(3,5,1e3*t.data.createdAt)," ")}}function xq(n,o){if(1&n&&(e.TgZ(0,"span",13),e._uU(1),e.ALo(2,"mytranslate"),e.ALo(3,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.lnq(" ",e.lcZ(2,3,"lang_auto_lan")," ",t.data.index," - ",e.lcZ(3,5,1e3*t.data.createdAt)," ")}}function bq(n,o){1&n&&(e.TgZ(0,"span",14),e._UZ(1,"azt-loading-ui"),e.qZA())}let Fw=(()=>{class n extends mt.e{btnCloseDialog(t){this.dialogRef.close(t)}constructor(t,i){super(i,t),this.dialogRef=t,this.data=i}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(U.so,8),e.Y36(U.WI,8))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-confirm-history"]],features:[e.qOj],decls:23,vars:18,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5"],[1,"text-center"],[2,"font-weight","450","font-size","14px"],[4,"ngIf"],["style","font-weight: 450; font-size: 15px; color: #ff0024",4,"ngIf"],[1,"mt-2"],[1,"text-xs","text-slate-500","dark:text-slate-400"],[1,"flex","justify-end","my-3","p-3"],["azt-track-service","dialog-confirm-action-0FalsTWUHN",1,"btn","w-24","btn-secondary","mr-3",3,"click"],["azt-track-service","dialog-confirm-action-weCfaxHnGJ",1,"btn","w-32","btn-primary",3,"disabled","click"],["class","w-4 h-4 inline-block mr-2",4,"ngIf"],[2,"font-weight","450","font-size","15px","color","#ff0024"],[1,"w-4","h-4","inline-block","mr-2"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"p",4),e.YNc(5,_q,3,3,"span",5),e.YNc(6,fq,3,3,"span",5),e.YNc(7,gq,4,7,"span",6),e.YNc(8,xq,4,7,"span",6),e._uU(9),e.ALo(10,"mytranslate"),e.qZA()(),e.TgZ(11,"div",7)(12,"p",8),e._uU(13),e.ALo(14,"mytranslate"),e.qZA()()()(),e.TgZ(15,"div",9)(16,"button",10),e.NdJ("click",function(){return i.btnCloseDialog(void 0)}),e._uU(17),e.ALo(18,"mytranslate"),e.qZA(),e.TgZ(19,"button",11),e.NdJ("click",function(){return i.btnCloseDialog(i.data)}),e.YNc(20,bq,2,0,"span",12),e._uU(21),e.ALo(22,"mytranslate"),e.qZA()()()),2&t&&(e.xp6(5),e.Q6J("ngIf",10!=i.data.type),e.xp6(1),e.Q6J("ngIf",10==i.data.type),e.xp6(1),e.Q6J("ngIf",10!=i.data.type),e.xp6(1),e.Q6J("ngIf",10==i.data.type),e.xp6(1),e.hij(" ",e.lcZ(10,10,"lang_auto_lam_ket_qua_phuc_khao_cho_hoc_sinh_nay")," "),e.xp6(4),e.hij(" ",e.lcZ(14,12,"lang_auto_de_tra_loi_cau_hoi_tu_luan_ban_co_the_lam_truc_tiep_dot")," "),e.xp6(4),e.hij(" ",e.lcZ(18,14,"lang_auto_dong")," "),e.xp6(2),e.Q6J("disabled",i.statusObj.loading),e.xp6(1),e.Q6J("ngIf",i.statusObj.loading),e.xp6(1),e.hij(" ",e.lcZ(22,16,"lang_cms_common_confirm_btn")," "))},dependencies:[F.O5,wi.n,ye.JV,ye.$n],encapsulation:2}),n})();function vq(n,o){if(1&n&&(e.TgZ(0,"div",2),e._UZ(1,"azt-loading-effect",3),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("currentStatusObj",t.statusObj)}}function wq(n,o){1&n&&e._UZ(0,"th")}function yq(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"span")(1,"span",18),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw(5);return e.KtG(s.onShowFile(r))}),e._uU(2),e.qZA()()}if(2&n){const t=o.$implicit;e.xp6(2),e.Oqu(t.name)}}function Cq(n,o){if(1&n&&(e.ynx(0),e.YNc(1,yq,3,1,"span",14),e.BQk()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.fileObjs)}}function Tq(n,o){1&n&&(e._uU(0),e.ALo(1,"mytranslate")),2&n&&e.hij(" ",e.lcZ(1,1,"lang_auto_khong_co_file")," ")}function kq(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"td")(1,"button",19),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(),r=a.$implicit,s=a.index,l=e.oxw(3);return e.KtG(l.openDialogConfirm(r,s))}),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()}if(2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("disabled",!(null!=t.fileObjs&&t.fileObjs.length)),e.xp6(1),e.Oqu(e.lcZ(3,2,"lang_auto_phuc_khao"))}}function Sq(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"tr")(2,"td"),e._uU(3),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.ALo(6,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.qZA(),e.TgZ(7,"td",15),e.YNc(8,Cq,2,1,"ng-container",16),e.YNc(9,Tq,2,3,"ng-template",null,17,e.W1O),e.qZA(),e.YNc(11,kq,4,4,"td",13),e.qZA(),e.BQk()),2&n){const t=o.$implicit,i=o.index,a=e.MAs(10),r=e.oxw(3);e.xp6(3),e.Oqu(i+1),e.xp6(2),e.Oqu(e.lcZ(6,5,t.createdAt)),e.xp6(3),e.Q6J("ngIf",null==t.fileObjs?null:t.fileObjs.length)("ngIfElse",a),e.xp6(3),e.Q6J("ngIf",!r.isFrontEnd)}}function Eq(n,o){if(1&n&&(e.TgZ(0,"table",12)(1,"tr")(2,"th"),e._uU(3),e.ALo(4,"mytranslate"),e.qZA(),e.TgZ(5,"th"),e._uU(6),e.ALo(7,"mytranslate"),e.qZA(),e.TgZ(8,"th"),e._uU(9,"File"),e.qZA(),e.YNc(10,wq,1,0,"th",13),e.qZA(),e.YNc(11,Sq,12,7,"ng-container",14),e.qZA()),2&n){const t=e.oxw(2);e.xp6(3),e.Oqu(e.lcZ(4,4,"lang_auto_STT")),e.xp6(3),e.Oqu(e.lcZ(7,6,"lang_auto_thoi_gian")),e.xp6(4),e.Q6J("ngIf",!t.isFrontEnd),e.xp6(1),e.Q6J("ngForOf",t.objs)}}function Oq(n,o){1&n&&(e.TgZ(0,"div",20),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_auto_khong_co_du_lieu")))}function Iq(n,o){1&n&&(e.TgZ(0,"div",21)(1,"div",22)(2,"span",23),e._UZ(3,"azt-loading-ui"),e.qZA(),e.TgZ(4,"span",24),e._uU(5,"Loading..."),e.qZA()()())}function Mq(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",25)(1,"button",26),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.getNextPage())}),e.ALo(2,"mytranslate"),e.TgZ(3,"mat-icon"),e._uU(4,"keyboard_arrow_down"),e.qZA()()()}if(2&n){const t=e.oxw(2);e.xp6(1),e.s9C("matTooltip",e.lcZ(2,2,"lang_auto_xem_them")),e.Q6J("disabled",t.disableBtn)}}function Lq(n,o){if(1&n&&(e.TgZ(0,"div",4)(1,"div",5)(2,"div",6),e.YNc(3,Eq,12,8,"table",7),e.YNc(4,Oq,3,3,"ng-template",null,8,e.W1O),e.qZA()(),e.TgZ(6,"div",9),e.YNc(7,Iq,6,0,"div",10),e.YNc(8,Mq,5,4,"div",11),e.qZA()()),2&n){const t=e.MAs(5),i=e.oxw();e.xp6(3),e.Q6J("ngIf",i.objs.length>0)("ngIfElse",t),e.xp6(4),e.Q6J("ngIf",i.isLoadMore),e.xp6(1),e.Q6J("ngIf",!i.isLoadMore)}}let Bq=(()=>{class n extends xe.Q{btnCloseDialog(){this.closeDialog.emit(!1)}confirmData(t){this.initStatusObj(),this.examResultHistoryLogService.apiExamResultHistoryLogAcceptFileObjGet(t.examId,this.data.resultObj.id??0,t.userId,t.id).subscribe(i=>{1==i.success?(this.successStatusObj(),this.showSuccessSnack("lang_auto_phuc_khao_file_bai_lam_thanh_cong"),this.closeDialog.emit(!0)):(this.errorStatusObj(i.message??"",!0),this.closeDialog.emit(!1))})}openDialogConfirm(t,i){let a=t.createdAt?new Date(t.createdAt).getTime()/1e3:0;this.sAztDialogService.open(Fw,{data:{isShow:!0,index:i+1,type:10,createdAt:a,examId:t.examId??0,userId:t.userId??0,id:t.id??0},restoreFocus:!1}).afterClosed().subscribe(l=>{l&&this.confirmData(l)})}onShowFile(t){let i={...t,index:-1};this.sAztDialogService.open(al.q,{maxWidth:"100vw",maxHeight:"100vh",height:"100%",width:"100%",data:{fileOption:i},restoreFocus:!1})}convertFileObjs(t){for(var i=[],a=0;a<t.length;a++){var r=this.castObj(t[a]);r?.files&&(r.fileObjs=this.castJsonToObj(r.files)),i.push(t[a])}return i}getNextPage(){this.getObjs(this.curPage)}getObjs(t){""==t&&this.initStatusObj(),this.isLoadMore=!0,this.examResultHistoryLogService.apiExamResultHistoryLogGetFileObjsGet(this.data.examObj.id??0,this.data.resultObj.id??0,this.data.resultObj.userId?.toString(),t).subscribe(i=>{1==i.success?(this.isLoadMore=!1,this.curPage=i.data?.nextPage??"",i.data?.objs&&i.data.objs.length>0&&(this.objs=this.objs.concat(this.convertFileObjs(i.data.objs))),i.data?.nextPage||(this.disableBtn=!0),this.successStatusObj()):(this.isLoadMore=!1,this.errorStatusObj(i.message??"",!0))})}ngOnInit(){this.getObjs(""),this.offset=(new Date).getTimezoneOffset(),super.ngOnInit()}constructor(t,i){super(),this.examResultHistoryLogService=t,this.sAztDialogService=i,this.isFrontEnd=!1,this.closeDialog=new e.vpe,this.IAztTestbankMarkEssayDialogConfirmData={type:0,isShow:!1},this.objs=[],this.isLoadMore=!1,this.curPage="",this.offset=0,this.disableBtn=!1}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(un.ml),e.Y36(qi.C))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-result-history-essay"]],inputs:{data:"data",isFrontEnd:"isFrontEnd"},outputs:{closeDialog:"closeDialog"},features:[e.qOj],decls:3,vars:2,consts:[["class","block-table-v2",4,"ngIf","ngIfElse"],["doneLoading",""],[1,"block-table-v2"],[3,"currentStatusObj"],[1,"block-table"],[1,"mt-3","mb-2"],[1,"table-responsive"],["class","table table-bordered","id","tracktable",4,"ngIf","ngIfElse"],["noData",""],[1,"row","my-1","m-2"],["class","col-md-12",4,"ngIf"],["class","col-md-12 text-center",4,"ngIf"],["id","tracktable",1,"table","table-bordered"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"text-left"],[4,"ngIf","ngIfElse"],["noFiles",""],["azt-track-service","essay-qvqBong5nt",1,"preview-file",3,"click"],["azt-track-service","essay-CT8RATAJF6",1,"btn","btn-primary",3,"disabled","click"],[1,"alert","alert-info","p-2"],[1,"col-md-12"],[1,"d-flex","justify-content-center","mt-3"],[1,"w-4","h-4","inline-block"],[1,"sr-only","ml-2"],[1,"col-md-12","text-center"],["azt-track-service","essay-TB1XoFOuoU","mat-button","",1,"btn-all-add",3,"matTooltip","disabled","click"]],template:function(t,i){if(1&t&&(e.YNc(0,vq,2,1,"div",0),e.YNc(1,Lq,9,4,"ng-template",null,1,e.W1O)),2&t){const a=e.MAs(2);e.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a)}},dependencies:[F.sg,F.O5,ds.lW,Yo.Hw,Ai.gM,vi.l,wi.n,ye.JV,ye.$n],encapsulation:2}),n})();var Pq=I(6711);function Qq(n,o){if(1&n&&(e.TgZ(0,"div",2),e._UZ(1,"azt-loading-effect",3),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("currentStatusObj",t.statusObj)}}function Fq(n,o){1&n&&e._UZ(0,"th")}function Nq(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1,"\xa0|\xa0"),e.qZA())}function Zq(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.YNc(2,Nq,2,0,"span",13),e.qZA()),2&n){const t=o.$implicit,i=o.index,a=e.oxw(2),r=a.index,s=a.$implicit,l=e.oxw(2).$implicit;let c;e.xp6(1),e.hij(" ",t.content+(r!=(null!==(c=null==l.dataObj.answers?null:l.dataObj.answers.length)&&void 0!==c?c:0)-1&&i==s.answerContent.length-1?", ":"")," "),e.xp6(1),e.Q6J("ngIf",i!=s.answerContent.length-1)}}function Dq(n,o){if(1&n&&(e.TgZ(0,"span")(1,"span"),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.YNc(4,Zq,3,2,"span",14),e.qZA()),2&n){const t=e.oxw(),i=t.index,a=t.$implicit;e.xp6(2),e.AsE("",e.lcZ(3,3,"lang_auto_cau")," ",i+1,":\xa0"),e.xp6(2),e.Q6J("ngForOf",a.answerContent)}}function Uq(n,o){if(1&n&&(e.TgZ(0,"span"),e.YNc(1,Dq,5,5,"span",13),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",t.answerContent.length>0)}}function jq(n,o){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,Uq,2,1,"span",14),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.dataObj.answers)}}function qq(n,o){1&n&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_auto_chua_chon_dap_an")))}function Rq(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"td")(1,"button",16),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(),r=a.$implicit,s=a.index,l=e.oxw(3);return e.KtG(l.openDialogConfirm(r,s))}),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()}if(2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("disabled",!(null!=t.dataObj.answers&&t.dataObj.answers.length)),e.xp6(1),e.Oqu(e.lcZ(3,2,"lang_auto_phuc_khao"))}}function zq(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"tr")(2,"td"),e._uU(3),e.qZA(),e.TgZ(4,"td"),e._uU(5),e.ALo(6,"formatFullDateTimeTimezoneWithoutSecondByUserUnitPipe"),e.qZA(),e.TgZ(7,"td",15),e.YNc(8,jq,2,1,"div",13),e.YNc(9,qq,3,3,"div",13),e.qZA(),e.YNc(10,Rq,4,4,"td",13),e.qZA(),e.BQk()),2&n){const t=o.$implicit,i=o.index,a=e.oxw(3);e.xp6(3),e.Oqu(i+1),e.xp6(2),e.Oqu(e.lcZ(6,5,1e3*(t.secondTime?t.secondTime:0))),e.xp6(3),e.Q6J("ngIf",null==t.dataObj||null==t.dataObj.answers?null:t.dataObj.answers.length),e.xp6(1),e.Q6J("ngIf",!(null!=t.dataObj&&null!=t.dataObj.answers&&t.dataObj.answers.length)),e.xp6(1),e.Q6J("ngIf",!a.isFrontEnd)}}function Hq(n,o){if(1&n&&(e.TgZ(0,"table",12)(1,"tr")(2,"th"),e._uU(3),e.ALo(4,"mytranslate"),e.qZA(),e.TgZ(5,"th"),e._uU(6),e.ALo(7,"mytranslate"),e.qZA(),e.TgZ(8,"th"),e._uU(9),e.ALo(10,"mytranslate"),e.qZA(),e.YNc(11,Fq,1,0,"th",13),e.qZA(),e.YNc(12,zq,11,7,"ng-container",14),e.qZA()),2&n){const t=e.oxw(2);e.xp6(3),e.Oqu(e.lcZ(4,5,"lang_auto_STT")),e.xp6(3),e.Oqu(e.lcZ(7,7,"lang_auto_thoi_gian")),e.xp6(3),e.Oqu(e.lcZ(10,9,"lang_auto_dap_an_chon")),e.xp6(2),e.Q6J("ngIf",!t.isFrontEnd),e.xp6(1),e.Q6J("ngForOf",t.objs)}}function Jq(n,o){1&n&&(e.TgZ(0,"div",17),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_auto_khong_co_du_lieu")))}function Kq(n,o){1&n&&(e.TgZ(0,"div",18)(1,"div",19)(2,"span",20),e._UZ(3,"azt-loading-ui"),e.qZA(),e.TgZ(4,"span",21),e._uU(5,"Loading..."),e.qZA()()())}function Gq(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",22)(1,"button",23),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.getNextPage())}),e.ALo(2,"mytranslate"),e.TgZ(3,"mat-icon"),e._uU(4,"keyboard_arrow_down"),e.qZA()()()}if(2&n){const t=e.oxw(2);e.xp6(1),e.s9C("matTooltip",e.lcZ(2,2,"lang_auto_xem_them")),e.Q6J("disabled",t.disableBtn)}}function Yq(n,o){if(1&n&&(e.TgZ(0,"div",4)(1,"div",5)(2,"div",6),e.YNc(3,Hq,13,11,"table",7),e.YNc(4,Jq,3,3,"ng-template",null,8,e.W1O),e.qZA()(),e.TgZ(6,"div",9),e.YNc(7,Kq,6,0,"div",10),e.YNc(8,Gq,5,4,"div",11),e.qZA()()),2&n){const t=e.MAs(5),i=e.oxw();e.xp6(3),e.Q6J("ngIf",i.objs.length>0)("ngIfElse",t),e.xp6(4),e.Q6J("ngIf",i.isLoadMore),e.xp6(1),e.Q6J("ngIf",!i.isLoadMore)}}let $q=(()=>{class n extends xe.Q{convertGzipResultObjs(t){for(var i=[],a=0;a<t.length;a++){var r=this.castObj(t[a]);if(r){var s=this.zipDataService.decodeContentGzip(r?.datas??"");r.dataObj=this.castJsonToObj(s)??{},i.push(r)}}return i}convertRawToMixForAnswerObjs(t){for(var i=0;i<t.length;i++){var a=t[i].dataObj?.answers;if(a){for(var r=0;r<a.length;r++)a[r].answerContent.length&&(a[r].answerContent[0].content=this.findAlphaOfAnswerContent(a[r].answerContent[0].content,a[r].questionId));t[i].dataObj.answers=a}}return t}findAlphaOfAnswerContent(t,i){let a="";for(let s=0;s<this.questionObjs.length;s++)if(this.questionObjs[s].id==i){if(this.questionAnswerConfigService.isTrueFalseQuestion(this.questionObjs[s].answerType??0)){var r=this.questionObjs[s].answerConfigParse?.filter(l=>l.key==t&&l.questionId==i);r&&r.length>0&&(a=r[0].alpha??r[0].key??"");break}a=t}return a}getQuestionData(t,i){this.examResultHistoryLogService.apiExamResultHistoryLogGetAllExamQuestionObjsGet(t,this.data.resultObj.id??0).subscribe(a=>{if(1==a.success){let r=this.commonService.castJsonToClassObjs(Lw.x,JSON.stringify(a.data?.objs));this.questionObjs=this.questionAnswerConfigService.changeQuestionContent(r??[],!0),i(!0)}else this.errorStatusObj(a.message??"",!0),i(!1)})}btnCloseDialog(){this.closeDialog.emit(!1)}confirmData(t){this.initStatusObj(),this.examResultHistoryLogService.apiExamResultHistoryLogAcceptResultObjGet(t.examId,this.data.resultObj.id??0,t.userId,t.id).subscribe(i=>{1==i.success?(this.successStatusObj(),this.showSuccessSnack("lang_auto_phuc_khao_du_lieu_bai_lam_thanh_cong"),this.closeDialog.emit(!0)):(this.errorStatusObj(i.message??"",!0),this.closeDialog.emit(!1))})}openDialogConfirm(t,i){this.sAztDialogService.open(Fw,{data:{isShow:!0,index:i+1,type:11,createdAt:t.secondTime??0,examId:t.examId??0,userId:t.userId??0,id:t.id??0},restoreFocus:!1}).afterClosed().subscribe(s=>{s&&this.confirmData(s)})}getNextPage(){this.getObjs(this.curPage)}getObjs(t){""==t&&this.initStatusObj(),this.isLoadMore=!0,this.getQuestionData(this.data.examObj.id??0,i=>{i?this.examResultHistoryLogService.apiExamResultHistoryLogGetResultObjsGet(this.data.examObj.id??0,this.data.resultObj.id??0,this.data.resultObj.userId?.toString(),this.curPage).subscribe(a=>{if(1==a.success){if(a.data?.objs&&a.data.objs.length>0){var r=this.convertGzipResultObjs(a.data.objs);r=this.convertRawToMixForAnswerObjs(r),this.objs=this.objs.concat(r)}this.curPage=a.data?.nextPage??"",a.data?.nextPage||(this.disableBtn=!0),this.isLoadMore=!1,this.successStatusObj()}else this.isLoadMore=!1,this.errorStatusObj(a.message??"",!0)}):(this.stopStatusObj(),this.isLoadMore=!0)})}ngOnInit(){this.getObjs(this.curPage),this.offset=(new Date).getTimezoneOffset(),super.ngOnInit()}constructor(t,i,a,r){super(),this.examResultHistoryLogService=t,this.zipDataService=i,this.questionAnswerConfigService=a,this.sAztDialogService=r,this.isFrontEnd=!1,this.closeDialog=new e.vpe,this.objs=[],this.curPage="",this.offset=0,this.disableBtn=!1,this.questionObjs=[],this.isLoadMore=!1}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(un.ml),e.Y36(Us.a),e.Y36(Pq.U),e.Y36(qi.C))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-result-history-true-false"]],inputs:{data:"data",isFrontEnd:"isFrontEnd"},outputs:{closeDialog:"closeDialog"},features:[e.qOj],decls:3,vars:2,consts:[["class","block-table-v2",4,"ngIf","ngIfElse"],["doneLoading",""],[1,"block-table-v2"],[3,"currentStatusObj"],[1,"block-table"],[1,"mt-3","mb-2"],[1,"table-responsive"],["class","table table-bordered","id","tracktable",4,"ngIf","ngIfElse"],["noData",""],[1,"row","my-1","m-2"],["class","col-md-12",4,"ngIf"],["class","col-md-12 text-center",4,"ngIf"],["id","tracktable",1,"table","table-bordered"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"text-left"],["azt-track-service","truefalse-XnX_QRUEsZ0",1,"btn","btn-primary",3,"disabled","click"],[1,"alert","alert-info","p-2"],[1,"col-md-12"],[1,"d-flex","justify-content-center","mt-3"],[1,"w-4","h-4","inline-block"],[1,"sr-only","ml-2"],[1,"col-md-12","text-center"],["azt-track-service","truefalse-RDGSarfASfG","mat-button","",1,"btn-all-add",3,"matTooltip","disabled","click"]],template:function(t,i){if(1&t&&(e.YNc(0,Qq,2,1,"div",0),e.YNc(1,Yq,9,4,"ng-template",null,1,e.W1O)),2&t){const a=e.MAs(2);e.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a)}},dependencies:[F.sg,F.O5,ds.lW,Yo.Hw,Ai.gM,vi.l,wi.n,ye.JV,ye.hc],encapsulation:2}),n})();function Vq(n,o){if(1&n&&(e.TgZ(0,"div",9)(1,"span",10),e._UZ(2,"azt-create-avatar",11),e.qZA(),e.TgZ(3,"span",12),e._uU(4),e.qZA(),e._uU(5,"\xa0-\xa0 "),e.TgZ(6,"span",13),e._uU(7),e.ALo(8,"mytranslate"),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.Q6J("linkAvatar",t.dataHistory.studentObj.avatar)("nameCreateAvatar",t.dataHistory.studentObj.fullName)("size",30),e.xp6(2),e.hij(" ",t.dataHistory.studentObj.fullName,""),e.xp6(3),e.Oqu(e.lcZ(8,5,"lang_auto_chuc_nang_nay_duoc_su_dung_khi_giao_vien_chap_nhan_phuc_khao_diem_cho_nhung_truong_hop_thi_sinh_nop_bai_muon_hoac_chua_dong_bo_het_du_lieu_bai_thi"))}}function Wq(n,o){1&n&&(e.TgZ(0,"div",9)(1,"span",13),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&n&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"lang_auto_chuc_nang_nay_duoc_su_dung_khi_giao_vien_chap_nhan_phuc_khao_diem_cho_nhung_truong_hop_thi_sinh_nop_bai_muon_hoac_chua_dong_bo_het_du_lieu_bai_thi")))}function Xq(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"mat-tab",14),e.ALo(1,"mytranslate"),e.TgZ(2,"azt-mat-dialog-content")(3,"app-result-history-true-false",15),e.NdJ("closeDialog",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.btnCloseDialog(a))}),e.qZA()()()}if(2&n){const t=e.oxw();e.s9C("label",e.lcZ(1,3,"lang_auto_du_lieu_bai_lam")),e.xp6(3),e.Q6J("data",t.dataHistory)("isFrontEnd",t.isFrontEnd)}}function eR(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"mat-tab",14),e.ALo(1,"mytranslate"),e.TgZ(2,"azt-mat-dialog-content")(3,"app-result-history-essay",16),e.NdJ("closeDialog",function(a){e.CHM(t);const r=e.oxw(2);return e.KtG(r.btnCloseDialog(a))}),e.qZA()()()}if(2&n){const t=e.oxw(2);e.s9C("label",e.lcZ(1,3,"lang_auto_file_bai_lam")),e.xp6(3),e.Q6J("isFrontEnd",t.isFrontEnd)("data",t.dataHistory)}}function tR(n,o){if(1&n&&(e.ynx(0),e.YNc(1,eR,4,5,"mat-tab",4),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==(null==t.dataHistory.resultObj?null:t.dataHistory.resultObj.files)||""==(null==t.dataHistory.resultObj?null:t.dataHistory.resultObj.files)||"[]"==(null==t.dataHistory.resultObj?null:t.dataHistory.resultObj.files))}}let nR=(()=>{class n extends mt.e{btnCloseDialog(t){this.dialogRef.close(t)}constructor(t,i){super(i,t),this.dialogRef=t,this.isFrontEnd=!1,this.dataHistory={...i.dataHistory},this.isFrontEnd=i.isFrontEnd}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(U.so,8),e.Y36(U.WI,8))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-result-history"]],features:[e.qOj],decls:13,vars:10,consts:[[1,"box"],[1,"px-5","pt-5"],["class","flex items-center",4,"ngIf"],["mat-align-tabs","start","dynamicHeight","",1,"mt-3",2,"height","60vh",3,"selectedIndex"],[3,"label",4,"ngIf"],[4,"ngIf"],["align","end"],[1,"text-right","p-3"],["azt-track-service","result-history-mkCSltAT1",1,"btn","w-24","btn","btn-secondary",3,"click"],[1,"flex","items-center"],[1,"stdimg","align-self-center"],[3,"linkAvatar","nameCreateAvatar","size"],[1,"ml-3"],[1,"text-danger"],[3,"label"],[2,"width","100%",3,"data","isFrontEnd","closeDialog"],[2,"width","100%",3,"isFrontEnd","data","closeDialog"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,Vq,9,7,"div",2),e.YNc(3,Wq,4,3,"div",2),e.TgZ(4,"mat-tab-group",3),e.YNc(5,Xq,4,5,"mat-tab",4),e.YNc(6,tR,2,1,"ng-container",5),e.ALo(7,"hasEssayInExam"),e.qZA()(),e.TgZ(8,"mat-dialog-actions",6)(9,"div",7)(10,"button",8),e.NdJ("click",function(){return i.btnCloseDialog(!1)}),e._uU(11),e.ALo(12,"mytranslate"),e.qZA()()()()),2&t&&(e.xp6(2),e.Q6J("ngIf",!i.isFrontEnd),e.xp6(1),e.Q6J("ngIf",i.isFrontEnd),e.xp6(1),e.Q6J("selectedIndex",0),e.xp6(1),e.Q6J("ngIf","[]"==(null==i.dataHistory.resultObj?null:i.dataHistory.resultObj.answers)),e.xp6(1),e.Q6J("ngIf",e.lcZ(7,6,i.dataHistory.examObj)),e.xp6(5),e.hij(" ",e.lcZ(12,8,"lang_auto_dong")," "))},dependencies:[F.O5,U.H8,hu.uX,hu.SP,Jg.g,Bq,$q,Dr.R,ye.JV,ye.VI],encapsulation:2}),n})();var iR=I(72269);function oR(n,o){if(1&n&&(e.TgZ(0,"div",12),e._uU(1),e.ALo(2,"mytranslate"),e.TgZ(3,"b"),e._uU(4),e.ALo(5,"number"),e.qZA()()),2&n){const t=o.$implicit,i=o.index,a=e.oxw(2);e.xp6(1),e.hij(" ",e.lcZ(2,2,"lang_combine_exam_component")+(i+1),":\xa0 "),e.xp6(3),e.Oqu(t+(a.totalMarkSubject?"/"+e.xi3(5,4,a.totalMarkSubject/a.totalSubject,"1.0-2"):""))}}function aR(n,o){if(1&n&&(e.ynx(0),e.YNc(1,oR,6,7,"div",11),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",null==t.examResultObj?null:t.examResultObj.subjectMarkValues)}}function rR(n,o){if(1&n&&(e.TgZ(0,"span",14),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.lnq("(",t.examResultObj.rightAnswer,"/",t.examResultObj.totalQuestion-t.essayQuestionObjs.length,"\xa0",e.lcZ(2,3,"lang_auto_cau_brackets"),"")}}function sR(n,o){if(1&n&&(e.TgZ(0,"div",12),e._uU(1),e.ALo(2,"mytranslate"),e.ALo(3,"mytranslate"),e.YNc(4,rR,3,5,"span",13),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.AsE(" ",e.lcZ(2,3,"lang_auto_trac_nghiem"),": ",null!=t.examResultObj.trueFalseMark?t.examResultObj.trueFalseMark:e.lcZ(3,5,"lang_auto_chua_co_diem")," "),e.xp6(3),e.Q6J("ngIf",null!=(null==t.examResultObj?null:t.examResultObj.rightAnswer))}}function lR(n,o){if(1&n&&e.YNc(0,sR,5,7,"div",10),2&n){const t=e.oxw();e.Q6J("ngIf",t.trueFalseChoiceQuestionObjs.length>0&&t.examResultObj&&t.examResultObj.totalQuestion)}}function cR(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.ALo(3,"mytranslate"),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.HOy("",e.lcZ(2,4,"lang_auto_tu_luan"),": ",null==t.examResultObj?null:t.examResultObj.essayMark," (",t.essayQuestionObjs.length," ",e.lcZ(3,6,"lang_auto_cau_brackets"),"")}}function uR(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.TgZ(3,"span",16),e._uU(4),e.ALo(5,"mytranslate"),e.qZA(),e._uU(6),e.ALo(7,"mytranslate"),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.hij(" ",e.lcZ(2,4,"lang_auto_tu_luan"),": "),e.xp6(3),e.Oqu(e.lcZ(5,6,"lang_auto_chua_cham")),e.xp6(2),e.AsE(" (",t.essayQuestionObjs.length," ",e.lcZ(7,8,"lang_auto_cau_brackets")," ")}}function dR(n,o){if(1&n&&(e.TgZ(0,"div",12),e.YNc(1,cR,4,8,"span",15),e.YNc(2,uR,8,10,"span",15),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.examResultObj?null:t.examResultObj.confirmedAt),e.xp6(1),e.Q6J("ngIf",!(null!=t.examResultObj&&t.examResultObj.confirmedAt))}}function mR(n,o){if(1&n&&(e.TgZ(0,"div",12),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.AsE("",e.lcZ(2,2,"lang_auto_so_file_da_nop"),": ",t.files.length,"")}}function pR(n,o){if(1&n&&(e.TgZ(0,"div",12),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.AsE("",e.lcZ(2,2,"lang_auto_so_lan_thoat_man_hinh"),": ",t.examTracks.exitFullScreen,"")}}function hR(n,o){if(1&n&&(e.TgZ(0,"div",12),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.AsE("",e.lcZ(2,2,"lang_auto_so_lan_thoat_trinh_duyet"),": ",t.examTracks.blurWindow,"")}}function AR(n,o){if(1&n&&(e.TgZ(0,"div",12)(1,"span",17),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.AsE("",e.lcZ(3,2,"lang_auto_giao_vien_cham"),": ",null==t.markedByObj?null:t.markedByObj.fullName,"")}}function _R(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",12),e._uU(1),e.ALo(2,"mytranslate"),e.TgZ(3,"button",18),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.clickResultTrack())}),e.O4$(),e.TgZ(4,"svg",19),e._UZ(5,"path",20)(6,"polyline",21)(7,"circle",22)(8,"path",23),e.qZA()()()}2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_xem_chi_tiet_qua_trinh_lam_bai"),": "))}function fR(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",12),e._uU(1),e.ALo(2,"mytranslate"),e.TgZ(3,"button",24),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.showResultInfors())}),e.O4$(),e.TgZ(4,"svg",25),e._UZ(5,"circle",26)(6,"path",27)(7,"path",28)(8,"path",29),e.qZA()()()}2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_show_infos_test_submit"),": "))}function gR(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",12),e._uU(1),e.ALo(2,"mytranslate"),e.TgZ(3,"button",30),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.openResultHistoryReview())}),e.O4$(),e.TgZ(4,"svg",31),e._UZ(5,"path",32)(6,"path",33)(7,"path",34),e.qZA()()()}2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_phuc_khao"),": "))}let xR=(()=>{class n extends xe.Q{get checkHasType1Question(){let t=!1;for(let i=0;i<(this.questionObjs?.length??0);i++)if(this.answerTypeService.isOneChoiceAnswer(this.questionObjs?.[i])){t=!0;break}return t}checkShowIconHistory(){let t=!1;return this.historyExamResultObjs&&this.historyExamResultObjs.length>0&&(t=!0),this.homeworkExamService.isOnlyTrueFalse(this.examObj)?!(!t||!this.homeworkExamService.checkEmptyAnswerExamAll(this.examResultObj)):!(!t||""!=this.examResultObj?.files&&null!=this.examResultObj?.files&&!this.homeworkExamService.checkEmptyAnswerExamAll(this.examResultObj))}openResultHistoryReview(){this.sAztDialogService.open(nR,{data:{dataHistory:{examObj:this.examObj,resultObj:this.examResultObj,studentObj:this.studentObj},isFrontEnd:!1},restoreFocus:!1}).afterClosed().subscribe(a=>{a&&window.location.reload()})}showResultInfors(){this.sAztDialogService.open(iR.p,{width:"600px",data:this.resultInfos,restoreFocus:!1})}clickResultTrack(){this.sAztDialogService.open(Aq,{width:"750px",data:{examResultIdParam:this.examResultIdParam,examIdParam:this.examObj?.id,userIdParam:this.userIdParam,studentIdParam:this.studentIdParam},restoreFocus:!1})}ngOnInit(){super.ngOnInit(),this.totalSubject=this.examResultObj?.subjectMarkValues?.length??3,this.totalMarkSubject=this.examResultObj?.examResultStatisticObj?.examQuestionStatisticObj?.totalMark??0}constructor(t,i,a){super(),this.answerTypeService=t,this.homeworkExamService=i,this.sAztDialogService=a,this.essayQuestionObjs=[],this.trueFalseChoiceQuestionObjs=[],this.files=[],this.historyExamResultObjs=[],this.resultInfos=[],this.totalSubject=3,this.totalMarkSubject=30}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(fr.i),e.Y36(eh.v),e.Y36(qi.C))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-testbank-test-review-show-detail-info-for-teacher"]],inputs:{examResultIdParam:"examResultIdParam",userIdParam:"userIdParam",studentIdParam:"studentIdParam",examIdParam:"examIdParam",studentObj:"studentObj",examObj:"examObj",examResultObj:"examResultObj",markedByObj:"markedByObj",questionObjs:"questionObjs",essayQuestionObjs:"essayQuestionObjs",trueFalseChoiceQuestionObjs:"trueFalseChoiceQuestionObjs",files:"files",historyExamResultObjs:"historyExamResultObjs",examTracks:"examTracks",resultInfos:"resultInfos"},features:[e.qOj],decls:25,vars:17,consts:[[1,"info-exam-online"],[1,"rounded-md","bg-slate-200","dark:bg-darkmode-400","p-3",2,"border-bottom-left-radius","0","border-bottom-right-radius","0"],[1,"flex","items-center"],[1,"text-md"],[1,"info-exam-body","rounded-md","border","border-slate-200/60","dark:border-darkmode-400","p-2",2,"border-top-left-radius","0","border-top-right-radius","0"],[1,"font-medium","flex","items-center"],[1,"mr-3"],[1,"text-lg"],[4,"ngIf","ngIfElse"],["showNormalMark",""],["class","flex items-center mt-2",4,"ngIf"],["class","flex items-center mt-2",4,"ngFor","ngForOf"],[1,"flex","items-center","mt-2"],["class","ml-2",4,"ngIf"],[1,"ml-2"],[4,"ngIf"],[1,"text-pending"],[1,"mr-2"],["azt-track-service","show-detail-info-box-for-teacher--xrnTJmA5SE",1,"btn-text-primary","ml-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-5","h-5"],["d","M16 22h2c.5 0 1-.2 1.4-.6.4-.4.6-.9.6-1.4V7.5L14.5 2H6c-.5 0-1 .2-1.4.6C4.2 3 4 3.5 4 4v3"],["points","14 2 14 8 20 8"],["cx","8","cy","16","r","6"],["d","M9.5 17.5 8 16.25V14"],["azt-track-service","show-detail-info-box-for-teacher-setZE9eOS5A",1,"btn-text-primary","ml-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide"],["cx","12","cy","12","r","10"],["d","M17 12h.01"],["d","M12 12h.01"],["d","M7 12h.01"],["azt-track-service","show-detail-info-box-for-teacher-IF9N08gpe_f",1,"btn-text-primary","ml-3",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-5","h-5","lucide"],["d","M3 3v5h5"],["d","M3.05 13A9 9 0 1 0 6 5.3L3 8"],["d","M12 7v5l4 2"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3)(4,"span"),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()()()(),e.TgZ(7,"div",4)(8,"div",5)(9,"span",6),e._uU(10),e.ALo(11,"mytranslate"),e.qZA(),e.TgZ(12,"span",7),e._uU(13),e.qZA()(),e.YNc(14,aR,2,1,"ng-container",8),e.YNc(15,lR,1,1,"ng-template",null,9,e.W1O),e.YNc(17,dR,3,2,"div",10),e.YNc(18,mR,3,4,"div",10),e.YNc(19,pR,3,4,"div",10),e.YNc(20,hR,3,4,"div",10),e.YNc(21,AR,4,4,"div",10),e.YNc(22,_R,9,3,"div",10),e.YNc(23,fR,9,3,"div",10),e.YNc(24,gR,8,3,"div",10),e.qZA()()),2&t){const a=e.MAs(16);let r;e.xp6(5),e.Oqu(e.lcZ(6,13,"lang_auto_thong_tin_chi_tiet")),e.xp6(5),e.hij("",e.lcZ(11,15,"lang_auto_diem_cuoi"),":"),e.xp6(3),e.Oqu((null==i.examResultObj?null:i.examResultObj.mark)+(i.totalMarkSubject?"/"+i.totalMarkSubject:"")),e.xp6(1),e.Q6J("ngIf",(null==i.examObj?null:i.examObj.subjectMarks)&&(null==i.examResultObj||null==i.examResultObj.subjectMarkValues?null:i.examResultObj.subjectMarkValues.length))("ngIfElse",a),e.xp6(3),e.Q6J("ngIf",i.essayQuestionObjs.length),e.xp6(1),e.Q6J("ngIf",i.essayQuestionObjs.length),e.xp6(1),e.Q6J("ngIf",i.examTracks&&0!=(null==i.examObj?null:i.examObj.autoMonitor)),e.xp6(1),e.Q6J("ngIf",i.examTracks&&0!=(null==i.examObj?null:i.examObj.autoMonitor)),e.xp6(1),e.Q6J("ngIf",null==i.examResultObj?null:i.examResultObj.confirmedAt),e.xp6(1),e.Q6J("ngIf",i.checkHasType1Question&&i.trueFalseChoiceQuestionObjs.length>0&&(null==i.examResultObj?null:i.examResultObj.totalQuestion)),e.xp6(1),e.Q6J("ngIf",i.resultInfos.length),e.xp6(1),e.Q6J("ngIf",i.checkShowIconHistory()&&(null!==(r=null==i.examResultObj?null:i.examResultObj.userId)&&void 0!==r?r:0)>0)}},dependencies:[F.sg,F.O5,F.JJ,ye.JV],encapsulation:2}),n})();function bR(n,o){if(1&n&&(e.TgZ(0,"div",6)(1,"button",7),e._uU(2),e.ALo(3,"mytranslate"),e.TgZ(4,"span",8),e._uU(5),e.qZA()()()),2&n){const t=e.oxw(),i=e.MAs(2);e.xp6(1),e.Q6J("matMenuTriggerFor",i),e.xp6(1),e.hij(" ",e.lcZ(3,3,"lang_auto_xem_cac_lan_thi_")," "),e.xp6(3),e.hij("(",t.historyExamResultObjs.length,")")}}function vR(n,o){1&n&&(e.TgZ(0,"li"),e._UZ(1,"hr",14),e.qZA())}const wR=function(n){return{"bg-slate-100 dark:bg-darkmode-300":n}};function yR(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"a",9),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.getAndProcessAnswers(r.id))}),e.TgZ(2,"div",10)(3,"div",11),e._uU(4),e.ALo(5,"mytranslate"),e.ALo(6,"mytranslate"),e.qZA(),e.TgZ(7,"div",12),e._uU(8),e.ALo(9,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.ALo(10,"formatOnlyTimeByUserUnitPipe"),e.qZA(),e.TgZ(11,"div",12),e._uU(12),e.ALo(13,"mytranslate"),e.qZA()()()(),e.YNc(14,vR,2,0,"li",13)}if(2&n){const t=o.$implicit,i=o.index,a=e.oxw();e.xp6(1),e.Q6J("ngClass",e.VKq(20,wR,t.id===a.examResultIdParam)),e.xp6(3),e.HOy(" ",e.lcZ(5,10,"lang_auto_lan")," ",a.historyExamResultObjs.length-i," [",e.lcZ(6,12,"lang_auto_diem")," ",t.mark,"] "),e.xp6(4),e.AsE("",e.lcZ(9,14,t.startedTest)," - ",e.lcZ(10,16,t.createdAt),""),e.xp6(4),e.AsE("",e.lcZ(13,18,"lang_auto_thoi_gian_lam_bai"),": ",a.calculateTime(t.startedTest,t.createdAt),""),e.xp6(2),e.Q6J("ngIf",i!=a.historyExamResultObjs.length-1)}}let CR=(()=>{class n extends xe.Q{getAndProcessAnswers(t){var i=this.commonService.getLocalRouter("/admin/testbank/test-review/"+this.examIdParam+"/"+this.userIdParam+"/"+this.studentIdParam+"/"+(t??0))+"?backto="+encodeURIComponent(this.backToLink);window.location.href=i.toString()}calculateTime(t,i){return this.timeService.calculationTimeExamTested(t,i)}ngOnInit(){super.ngOnInit()}constructor(t){super(),this.timeService=t,this.historyExamResultObjs=[],this.backToLink=""}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Mo.D))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-testbank-test-review-exam-result-history"]],inputs:{historyExamResultObjs:"historyExamResultObjs",backToLink:"backToLink",examResultIdParam:"examResultIdParam",userIdParam:"userIdParam",studentIdParam:"studentIdParam",examIdParam:"examIdParam"},features:[e.qOj],decls:6,vars:2,consts:[["class","history-exam mt-3",4,"ngIf"],["yPosition","above"],["menuTimeTest","matMenu"],[1,"dropdown-menu","show","w-56","relative",2,"overflow-y","auto","max-height","calc(100vh - 250px)","box-shadow","0px 3px 10px #00000017"],[1,"dropdown-content",2,"margin-top","0"],["ngFor","",3,"ngForOf"],[1,"history-exam","mt-3"],[1,"btn","btn-outline-secondary","block","w-full",3,"matMenuTriggerFor"],[1,"ml-2"],["azt-track-service","exam-result-history-6Kv3ed2IY6",1,"dropdown-item","mb-2",3,"ngClass","click"],[1,"once-tested"],[1,"font-medium"],[1,"text-xs","text-slate-600","dark:text-slate-300","mt-1"],[4,"ngIf"],[1,"dropdown-divider","border-slate-200","dark:border-darkmode-400"]],template:function(t,i){1&t&&(e.YNc(0,bR,6,5,"div",0),e.TgZ(1,"mat-menu",1,2)(3,"div",3)(4,"ul",4),e.YNc(5,yR,15,22,"ng-template",5),e.qZA()()()),2&t&&(e.Q6J("ngIf",i.historyExamResultObjs),e.xp6(5),e.Q6J("ngForOf",i.historyExamResultObjs))},dependencies:[F.mk,F.sg,F.O5,Qi.VK,Qi.p6,ye.JV,ye.$n,ye.Ez],encapsulation:2}),n})(),TR=(()=>{class n extends xe.Q{clickExportPdf(){this.essayQuestionObjs.length>0&&!this.examResultObj?.confirmedAt?this.showErrorSnack("lang_auto_ban_chi_co_the_tai_file_pdf_khi_cham_xong_tu_luan"):this.exportResultService.processUser(Number(this.examIdParam??0),Number(this.examResultIdParam??0),this.userIdParam,this.studentIdParam).then(()=>{}).catch(t=>{this.commonService.snackError("string"==typeof t?t:t.message)})}getBackData(t,i){let a="";if(t.includes("backto")){let r=t.substring(t.lastIndexOf("backto"));r.includes("shareType")&&(a=i?r.substring(r.lastIndexOf("data")):r)}return a}redirectToTestedList(){let t=this.commonService.getMyQueryParam("backto"),i=this.getBackData(t??"",!1);this.commonService.myNavigationWithQueryString("/admin/testbank/exam-results-list/"+(this.examObj?.categoryId??0)+"/"+this.examIdParam+"/0",i?"?"+decodeURIComponent(i):"")}ngOnInit(){super.ngOnInit()}constructor(t){super(),this.exportResultService=t,this.essayQuestionObjs=[]}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(zg.U))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-testbank-test-review-export-pdf-menu"]],inputs:{examResultIdParam:"examResultIdParam",userIdParam:"userIdParam",studentIdParam:"studentIdParam",examIdParam:"examIdParam",examObj:"examObj",examResultObj:"examResultObj",essayQuestionObjs:"essayQuestionObjs"},features:[e.qOj],decls:29,vars:7,consts:[[1,"menu","ml-2"],[1,"btn","btn-sm",3,"matMenuTriggerFor"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-menu","w-4","h-4"],["x1","4","y1","12","x2","20","y2","12"],["x1","4","y1","6","x2","20","y2","6"],["x1","4","y1","18","x2","20","y2","18"],["xPosition","before"],["mainMenu","matMenu"],[1,"dropdown-menu","show","relative","w-72"],[1,"dropdown-content"],["azt-track-service","export-pdf-menu-box-55F1itGQin",1,"dropdown-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","mr-2"],["d","M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"],["points","7 10 12 15 17 10"],["x1","12","y1","15","x2","12","y2","3"],["azt-track-service","export-pdf-menu-box-LA2X4vBtnx",1,"dropdown-item",3,"click"],["x","8","y","2","width","8","height","4","rx","1","ry","1"],["d","M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"],["d","M12 11h4"],["d","M12 16h4"],["d","M8 11h.01"],["d","M8 16h.01"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"button",1),e.O4$(),e.TgZ(2,"svg",2),e._UZ(3,"line",3)(4,"line",4)(5,"line",5),e.qZA()()(),e.kcU(),e.TgZ(6,"mat-menu",6,7)(8,"div",8)(9,"ul",9)(10,"li")(11,"a",10),e.NdJ("click",function(){return i.clickExportPdf()}),e.O4$(),e.TgZ(12,"svg",11),e._UZ(13,"path",12)(14,"polyline",13)(15,"line",14),e.qZA(),e._uU(16),e.ALo(17,"mytranslate"),e.qZA()(),e.kcU(),e.TgZ(18,"li")(19,"a",15),e.NdJ("click",function(){return i.redirectToTestedList()}),e.O4$(),e.TgZ(20,"svg",11),e._UZ(21,"rect",16)(22,"path",17)(23,"path",18)(24,"path",19)(25,"path",20)(26,"path",21),e.qZA(),e._uU(27),e.ALo(28,"mytranslate"),e.qZA()()()()()),2&t){const a=e.MAs(7);e.xp6(1),e.Q6J("matMenuTriggerFor",a),e.xp6(15),e.hij(" ",e.lcZ(17,3,"lang_auto_tai_bai_lam_duoi_dang_pdf")," "),e.xp6(11),e.hij(" ",e.lcZ(28,5,"lang_auto_danh_sach_da_thi")," ")}},dependencies:[Qi.VK,Qi.p6,ye.JV],encapsulation:2}),n})(),kR=(()=>{class n extends xe.Q{hasNext(){var t=-1;if(this.testedUserObjs){for(var i=0;i<this.testedUserObjs.length;i++)if(this.testedUserObjs[i].userId==this.userIdParam&&this.testedUserObjs[i].studentId==this.studentIdParam){t=i;break}return t<this.testedUserObjs.length-1}return!1}hasPrev(){var t=-1;if(this.testedUserObjs){for(var i=0;i<this.testedUserObjs.length;i++)if(this.testedUserObjs[i].userId==this.userIdParam&&this.testedUserObjs[i].studentId==this.studentIdParam){t=i;break}return t>0}return!1}handleNavigate(t){this.initStatusObj();let i=0;i=this.historyExamResultObjs.length?this.historyExamResultObjs[0].id??this.examResultIdParam??0:this.examResultIdParam??0,this.waitDestroy(this.examPageResultService.apiExamPageResultGetNextResultGet(i,this.classroomId,"next"==t?1:0).subscribe(a=>{if(1==a.success&&a.data){var r=a.data.userId?.toString(),s=a.data.studentId?.toString(),l=a.data.id?.toString(),c=this.commonService.getLocalRouter("/admin/testbank/test-review/"+this.examIdParam+"/"+r+"/"+s+"/"+(l??0))+"?backto="+encodeURIComponent(this.backToLink);window.location.href=c.toString(),this.successStatusObj()}else this.showErrorSnack(a.message??""),this.stopStatusObj()}))}ngOnInit(){super.ngOnInit(),this.waitDestroy((0,ne.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.backToLink=this.commonService.getMyQueryParam("backto")??"",this.examResultIdParam=Number(this.activeRoute.snapshot.paramMap.get("result_id")),this.userIdParam=this.activeRoute.snapshot.paramMap.get("user_id")??void 0,this.studentIdParam=this.activeRoute.snapshot.paramMap.get("student_id")??void 0,this.examIdParam=this.activeRoute.snapshot.paramMap.get("exam_id")??void 0}))}constructor(t,i){super(),this.examPageResultService=t,this.activeRoute=i,this.classroomId=0,this.historyExamResultObjs=[],this.backToLink=""}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(un.DR),e.Y36(E.gz))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-testbank-test-review-show-next-back-button"]],inputs:{testedUserObjs:"testedUserObjs",classroomId:"classroomId",historyExamResultObjs:"historyExamResultObjs"},features:[e.qOj],decls:9,vars:6,consts:[[1,"p-3"],["azt-track-service","show-next-back-box-_0g3eIKk5Q",1,"btn","btn-sm","btn-secondary-soft","mr-2",3,"matTooltip","click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4"],["points","15 18 9 12 15 6"],["azt-track-service","show-next-back-box-gLJelBC71K",1,"btn","btn-sm","btn-secondary-soft",3,"matTooltip","click"],["points","9 18 15 12 9 6"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"button",1),e.NdJ("click",function(){return i.handleNavigate("prev")}),e.ALo(2,"mytranslate"),e.O4$(),e.TgZ(3,"svg",2),e._UZ(4,"polyline",3),e.qZA()(),e.kcU(),e.TgZ(5,"button",4),e.NdJ("click",function(){return i.handleNavigate("next")}),e.ALo(6,"mytranslate"),e.O4$(),e.TgZ(7,"svg",2),e._UZ(8,"polyline",5),e.qZA()()()),2&t&&(e.xp6(1),e.s9C("matTooltip",e.lcZ(2,2,"lang_auto_hoc_sinh_truoc_do")),e.xp6(4),e.s9C("matTooltip",e.lcZ(6,4,"lang_auto_hoc_sinh_tiep_theo")))},dependencies:[Ai.gM,ye.JV],encapsulation:2}),n})();var SR=I(51614);const ER=["drawer"];function OR(n,o){1&n&&(e.TgZ(0,"div",5),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_chua_co_du_lieu_nop_bai")," "))}function IR(n,o){1&n&&(e.TgZ(0,"div")(1,"div",32),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"lang_auto_thi_sinh_chua_thi_lan_nao")," "))}function MR(n,o){if(1&n&&(e._UZ(0,"app-testbank-show-offline-result",35),e.ALo(1,"mytranslate")),2&n){const t=e.oxw(3);let i;e.Q6J("backToLink",t.backToLink)("examResultIdParam",t.examResultIdParam)("userIdParam",t.userIdParam)("studentIdParam",t.studentIdParam)("examIdParam",t.examIdParam)("essayExam",!!t.essayQuestionObjs.length)("essayMark",null!=t.examResultObj&&t.examResultObj.confirmedAt?(null!==(i=null==t.examResultObj?null:t.examResultObj.essayMark)&&void 0!==i?i:0).toString():e.lcZ(1,12,"lang_auto_chua_cham"))("questionObjs",null==t.initDataResult||null==t.initDataResult.data?null:t.initDataResult.data.questionObjs)("examObj",t.examObj)("offlineMarkObj",null==t.initDataResult||null==t.initDataResult.data?null:t.initDataResult.data.offlineMarkObj)("offlineMixQuestionObj",null==t.initDataResult||null==t.initDataResult.data?null:t.initDataResult.data.offlineMixQuestionObj)("isDeletableExamResultObj",null==t.initDataResult||null==t.initDataResult.data?null:t.initDataResult.data.isDeletableExamResultObj)}}const o2=function(){return[]};function LR(n,o){if(1&n&&(e._UZ(0,"app-testbank-test-review-show-detail-info-for-teacher",33),e.YNc(1,MR,2,14,"app-testbank-show-offline-result",27),e._UZ(2,"app-testbank-test-review-exam-result-history",34)),2&n){const t=e.oxw(2);let i,a;e.Q6J("examResultIdParam",t.examResultIdParam)("userIdParam",t.userIdParam)("studentIdParam",t.studentIdParam)("examIdParam",t.examIdParam)("studentObj",t.studentObj)("examObj",t.examObj)("examResultObj",t.examResultObj)("markedByObj",null==t.initDataResult||null==t.initDataResult.data?null:t.initDataResult.data.markedByObj)("questionObjs",t.questionObjs)("essayQuestionObjs",t.essayQuestionObjs)("trueFalseChoiceQuestionObjs",t.trueFalseChoiceQuestionObjs)("files",t.files)("historyExamResultObjs",null!==(i=null==t.initDataResult||null==t.initDataResult.data?null:t.initDataResult.data.historyExamResultObjs)&&void 0!==i?i:e.DdM(22,o2))("examTracks",null==t.initDataResult||null==t.initDataResult.data?null:t.initDataResult.data.examTracks)("resultInfos",t.resultInfos),e.xp6(1),e.Q6J("ngIf",!t.isMobileWebView),e.xp6(1),e.Q6J("historyExamResultObjs",null!==(a=null==t.initDataResult||null==t.initDataResult.data?null:t.initDataResult.data.historyExamResultObjs)&&void 0!==a?a:e.DdM(23,o2))("backToLink",t.backToLink)("examResultIdParam",t.examResultIdParam)("userIdParam",t.userIdParam)("studentIdParam",t.studentIdParam)("examIdParam",t.examIdParam)}}function BR(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",36),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.sAztMatDrawerService.openDrawer())}),e.ALo(1,"mytranslate"),e.O4$(),e.TgZ(2,"svg",37),e._UZ(3,"rect",38)(4,"path",39)(5,"path",40),e.qZA()()}2&n&&e.s9C("matTooltip",e.lcZ(1,1,"lang_auto_mo_menu"))}function PR(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",41),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.sAztMatDrawerService.closeDrawer())}),e.ALo(1,"mytranslate"),e.O4$(),e.TgZ(2,"svg",37),e._UZ(3,"rect",38)(4,"path",39)(5,"path",42),e.qZA()()}2&n&&e.s9C("matTooltip",e.lcZ(1,1,"lang_auto_dong_menu"))}function QR(n,o){if(1&n&&(e._UZ(0,"app-testbank-show-offline-result",35),e.ALo(1,"mytranslate")),2&n){const t=e.oxw(2);let i;e.Q6J("backToLink",t.backToLink)("examResultIdParam",t.examResultIdParam)("userIdParam",t.userIdParam)("studentIdParam",t.studentIdParam)("examIdParam",t.examIdParam)("essayExam",!!t.essayQuestionObjs.length)("essayMark",null!=t.examResultObj&&t.examResultObj.confirmedAt?(null!==(i=null==t.examResultObj?null:t.examResultObj.essayMark)&&void 0!==i?i:0).toString():e.lcZ(1,12,"lang_auto_chua_cham"))("questionObjs",null==t.initDataResult||null==t.initDataResult.data?null:t.initDataResult.data.questionObjs)("examObj",t.examObj)("offlineMarkObj",null==t.initDataResult||null==t.initDataResult.data?null:t.initDataResult.data.offlineMarkObj)("offlineMixQuestionObj",null==t.initDataResult||null==t.initDataResult.data?null:t.initDataResult.data.offlineMixQuestionObj)("isDeletableExamResultObj",null==t.initDataResult||null==t.initDataResult.data?null:t.initDataResult.data.isDeletableExamResultObj)}}function FR(n,o){if(1&n&&e._UZ(0,"azt-loaded-img",49),2&n){const t=e.oxw(3);e.Q6J("imgSrc",null==t.examObj?null:t.examObj.examHeader)}}function NR(n,o){if(1&n&&(e.TgZ(0,"div",50),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.AsE("",e.lcZ(2,2,"lang_auto_tong_so_cau_dung")," ",null==t.examResultObj?null:t.examResultObj.rightAnswer,".")}}function ZR(n,o){if(1&n&&(e.TgZ(0,"div",50),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n){const t=e.oxw(3);let i;e.xp6(1),e.AsE("",e.lcZ(2,2,"lang_auto_tong_so_cau_sai")," ",(null!==(i=null==t.examResultObj?null:t.examResultObj.totalQuestion)&&void 0!==i?i:0)-t.essayQuestionObjs.length-(null!==(i=null==t.examResultObj?null:t.examResultObj.rightAnswer)&&void 0!==i?i:0),".")}}const DR=function(n,o){return{correct:n,incorrect:o}};function UR(n,o){if(1&n&&e._UZ(0,"azt-question-standalone-for-teacher-at-review-page",52),2&n){const t=e.oxw(),i=t.$implicit,a=t.index,r=e.oxw(3);e.Q6J("follower",r.followerRenderQuest)("examObj",r.examObj)("questionObj",i)("isOfflineMark",!(null==r.initDataResult||null==r.initDataResult.data||!r.initDataResult.data.offlineMarkObj))("curQuestionIndex",a)("userAnswersObj",r.userAnswersObj)("currentTab","multiple_choice_tab")("orgExamObjs",r.orgExamObjs)("ngClass",e.WLB(9,DR,null==i?null:i.correctAnswer,!i.correctAnswer))}}function jR(n,o){if(1&n&&e.YNc(0,UR,1,12,"azt-question-standalone-for-teacher-at-review-page",51),2&n){const t=e.oxw(3);e.Q6J("ngIf",t.examObj)}}function qR(n,o){if(1&n&&(e.TgZ(0,"mat-tab",43),e.ALo(1,"mytranslate"),e.TgZ(2,"div")(3,"div",44)(4,"div",45),e.YNc(5,FR,1,1,"azt-loaded-img",46),e.YNc(6,NR,3,4,"div",47),e.YNc(7,ZR,3,4,"div",47),e.YNc(8,jR,1,1,"ng-template",48),e.qZA()()()()),2&n){const t=e.oxw(2);e.s9C("label",e.lcZ(1,8,"lang_auto_trac_nghiem")),e.xp6(2),e.Tol(t.viewOption),e.xp6(3),e.Q6J("ngIf",null==t.examObj?null:t.examObj.examHeader),e.xp6(1),e.Q6J("ngIf","viewRight"==t.viewOption),e.xp6(1),e.Q6J("ngIf","viewWrong"==t.viewOption),e.xp6(1),e.Q6J("ngForOf",t.questionObjs)}}function RR(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"azt-mark-essay-new",57),e.NdJ("saveResultEvent",function(a){e.CHM(t);const r=e.oxw(3);return e.KtG(r.saveResultEvent(a))}),e.qZA(),e.BQk()}if(2&n){const t=e.oxw(3);let i;e.xp6(1),e.Q6J("curSelectedTab",t.curSelectedTab)("examObj",t.examObj)("showForTeacher",!0)("questions",t.essayQuestionObjs)("files",t.files)("userAnswersObj",t.userAnswersObj)("examResultObj",t.examResultObj)("resultID",null!==(i=t.examResultIdParam)&&void 0!==i?i:0)("orgExamObjs",t.orgExamObjs)("changeSelectedTab",t.changeSelectedTab)("orgExamObjs",t.orgExamObjs)}}function zR(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"azt-mark-essay",58),e.NdJ("saveResultEvent",function(a){e.CHM(t);const r=e.oxw(3);return e.KtG(r.saveResultEvent(a))}),e.qZA()}if(2&n){const t=e.oxw(3);let i;e.Q6J("showForTeacher",!0)("examObj",t.examObj)("questions",t.essayQuestionObjs)("files",t.files)("examResultObj",t.examResultObj)("userAnswersObj",t.userAnswersObj)("resultID",null!==(i=t.examResultIdParam)&&void 0!==i?i:0)("iframeViewMode","edit")("hasLoadedData",t.hasLoadedData)("orgExamObjs",t.orgExamObjs)}}function HR(n,o){if(1&n&&(e.TgZ(0,"mat-tab",53),e.ALo(1,"mytranslate"),e.TgZ(2,"div",54)(3,"div",55),e.YNc(4,RR,2,11,"ng-container",14),e.YNc(5,zR,1,10,"ng-template",null,56,e.W1O),e.qZA()()()),2&n){const t=e.MAs(6),i=e.oxw(2);e.s9C("label",e.lcZ(1,3,"lang_auto_tu_luan")),e.xp6(4),e.Q6J("ngIf",i.checkMarkNote)("ngIfElse",t)}}const JR=function(n,o){return{"w-85":n,"w-25":o}},KR=function(n){return{"azt-mobile-draw-left":n}},GR=function(n){return{"ml-25":n}},YR=function(n){return{"ml-5":n}};function $R(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"mat-drawer-container",6)(1,"mat-drawer",7,8),e.NdJ("closedStart",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.changeStatusNav())}),e.TgZ(3,"div",9)(4,"div",10)(5,"div",11),e._UZ(6,"azt-basic-info-box",12),e.qZA(),e.TgZ(7,"div",13),e.YNc(8,IR,4,3,"div",14),e.YNc(9,LR,3,24,"ng-template",null,15,e.W1O),e.qZA(),e._UZ(11,"app-testbank-test-review-show-next-back-button",16),e.qZA()()(),e.TgZ(12,"mat-drawer-content",17)(13,"div",18)(14,"div",19)(15,"div",20),e.YNc(16,BR,6,3,"button",21),e.YNc(17,PR,6,3,"button",22),e.TgZ(18,"div",23),e._uU(19),e.qZA(),e.TgZ(20,"div",24),e.GkF(21,25),e._UZ(22,"app-testbank-test-review-export-pdf-menu",26),e.qZA()(),e.YNc(23,QR,2,14,"app-testbank-show-offline-result",27),e.TgZ(24,"div",28)(25,"mat-tab-group",29),e.NdJ("selectedTabChange",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.onTabChanged(a))})("selectedIndexChange",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.curSelectedTab=a)}),e.YNc(26,qR,9,10,"mat-tab",30),e.YNc(27,HR,7,5,"mat-tab",31),e.qZA()()()()()()}if(2&n){const t=e.MAs(10),i=e.oxw(),a=e.MAs(5);let r,s;e.Q6J("hasBackdrop",i.sAztMatDrawerService.hasBackdrop),e.xp6(1),e.s9C("opened",i.sAztMatDrawerService.isOpenSideNav?"true":"false"),e.Q6J("ngClass",e.WLB(30,JR,i.isMobileDevice,!i.isMobileDevice))("mode",i.sAztMatDrawerService.mode),e.xp6(2),e.Q6J("ngClass",e.VKq(33,KR,i.isMobileDevice)),e.xp6(3),e.Q6J("studentObj",i.studentObj)("showPhone",!0),e.xp6(2),e.Q6J("ngIf",0===(null==i.initDataResult||null==i.initDataResult.data||null==i.initDataResult.data.historyExamResultObjs?null:i.initDataResult.data.historyExamResultObjs.length))("ngIfElse",t),e.xp6(3),e.Q6J("testedUserObjs",i.testedUserObjs)("classroomId",null!==(r=null==i.classroomObj?null:i.classroomObj.id)&&void 0!==r?r:-1)("historyExamResultObjs",null!==(s=null==i.initDataResult||null==i.initDataResult.data?null:i.initDataResult.data.historyExamResultObjs)&&void 0!==s?s:e.DdM(35,o2)),e.xp6(1),e.Q6J("ngClass",e.VKq(36,GR,!i.isMobileDevice&&i.sAztMatDrawerService.isOpenSideNav)),e.xp6(1),e.Q6J("ngClass",e.VKq(38,YR,!i.isMobileDevice&&i.sAztMatDrawerService.isOpenSideNav)),e.xp6(3),e.Q6J("ngIf",!i.sAztMatDrawerService.isOpenSideNav||i.isMobileDevice),e.xp6(1),e.Q6J("ngIf",i.sAztMatDrawerService.isOpenSideNav&&!i.isMobileDevice),e.xp6(1),e.s9C("matTooltip",null==i.examObj?null:i.examObj.name),e.xp6(1),e.hij(" ",null==i.examObj?null:i.examObj.name," "),e.xp6(2),e.Q6J("ngTemplateOutlet",a),e.xp6(1),e.Q6J("examResultIdParam",i.examResultIdParam)("userIdParam",i.userIdParam)("studentIdParam",i.studentIdParam)("examIdParam",i.examIdParam)("examObj",i.examObj)("examResultObj",i.examResultObj)("essayQuestionObjs",i.essayQuestionObjs),e.xp6(1),e.Q6J("ngIf",i.isMobileWebView),e.xp6(2),e.Q6J("selectedIndex",i.curSelectedTab),e.xp6(1),e.Q6J("ngIf",i.trueFalseChoiceQuestionObjs.length>0),e.xp6(1),e.Q6J("ngIf",i.essayQuestionObjs.length>0&&i.examObj&&i.examResultObj)}}function VR(n,o){1&n&&(e.TgZ(0,"button",75)(1,"span",76),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"lang_auto_sai")," "))}function WR(n,o){1&n&&(e.TgZ(0,"button",77)(1,"span",76),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"lang_auto_dung")," "))}function XR(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",59),e.YNc(1,VR,4,3,"button",60),e.YNc(2,WR,4,3,"button",61),e.TgZ(3,"button",62),e.O4$(),e.TgZ(4,"svg",63),e._UZ(5,"polygon",64),e.qZA(),e.kcU(),e.TgZ(6,"span",65),e._uU(7),e.ALo(8,"mytranslate"),e.qZA()()(),e.TgZ(9,"mat-menu",66,67)(11,"div",68)(12,"ul",69)(13,"li")(14,"label",70),e._uU(15),e.ALo(16,"mytranslate"),e.TgZ(17,"div",71)(18,"input",72),e.NdJ("change",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onChangeViewOption("viewRight"))})("click",function(a){return a.stopPropagation()}),e.qZA()()()(),e.TgZ(19,"li")(20,"label",73),e._uU(21),e.ALo(22,"mytranslate"),e.TgZ(23,"div",71)(24,"input",74),e.NdJ("change",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onChangeViewOption("viewWrong"))})("click",function(a){return a.stopPropagation()}),e.qZA()()()()()()()}if(2&n){const t=e.MAs(10),i=e.oxw();e.xp6(1),e.Q6J("ngIf","viewWrong"===i.viewOption),e.xp6(1),e.Q6J("ngIf","viewRight"===i.viewOption),e.xp6(1),e.Q6J("matMenuTriggerFor",t),e.xp6(4),e.hij(" ",e.lcZ(8,8,"lang_testbank_tested_list_sort")," "),e.xp6(8),e.hij(" ",e.lcZ(16,10,"lang_auto_cau_dung")," "),e.xp6(3),e.Q6J("checked","viewRight"==i.viewOption),e.xp6(3),e.hij(" ",e.lcZ(22,12,"lang_auto_cau_sai")," "),e.xp6(3),e.Q6J("checked","viewWrong"==i.viewOption)}}let ez=(()=>{class n extends xe.Q{set drawer(t){this.sAztMatDrawerService.resizeDrawerHeight(!0,t)}openDialogWaring(t){this.commonService.getTranslate(t).subscribe(i=>{this.sAztDialogService.open(oh.C,{data:{isShow:!0,content:i},restoreFocus:!1,width:"500px"})})}onResize(t){this.isMobileDevice=t.target.innerWidth<980,this.sAztMatDrawerService.changeToMobileMode(this.isMobileDevice)}changeStatusNav(){this.isMobileDevice&&(document.body.style.overflow="auto")}onChangeViewOption(t){this.viewOption=this.viewOption==t?"viewAll":t}onTabChanged(t){this.matTabGroupIndex=t.index,this.changeSelectedTab=!0}saveResultEvent(t){t&&this.examResultService.apiExamResultGetLastResultGet(Number(this.examIdParam),this.userIdParam??"",this.studentIdParam??"",this.examResultIdParam??0).subscribe(i=>{1==i.success?(this.examResultObj=i?.data?.examResultObj,this.orgExamObjs=i.data?.orgExamObjs??[],this.initDataResult?.data?.markedByObj&&(this.initDataResult.data.markedByObj.fullName=i.data?.markedByObj?.fullName??"",this.initDataResult.data.markedByObj.avatar=i.data?.markedByObj?.avatar)):this.errorStatusObj(i.message??"",!0)})}processConvertData(t){if(t.data){this.studentObj=this.testReviewService.mapStudentObjWithTestedObj(t.data,this.testedUserObjs,this.studentObj),this.examObj=t?.data?.examObj,this.examResultObj=t?.data?.examResultObj,this.files=this.commonService.myParseJson(this.examResultObj?.files??"")??[],this.resultInfos=this.commonService.willDeleteParseJson(this.examResultObj?.infors??"")??[],this.classroomObj=t?.data?.classroomObj;const i=this.commonService.castJsonToClassObjs(Le.v,JSON.stringify(t.data.questionObjs??[]));this.followerRenderQuest.setNumQuest(i?.length||0),this.questionObjs=i,this.questionObjs?.forEach(s=>{s.correctAnswer=this.commonService.isExistInArray(t?.data?.correctQuestionIds,s.id),s.isRoleTeacher=!0}),this.docxService.replaceCanvasBackgroundTS(this.questionObjs??[]),this.questionObjs=this.testReviewService.addIndexLabelToQuestionObjs(this.questionObjs),this.essayQuestionObjs=this.testReviewService.getEssayQuestionObjs(this.questionObjs),this.trueFalseChoiceQuestionObjs=this.testReviewService.getTrueFalseQuestionObjs(this.questionObjs),0==this.trueFalseChoiceQuestionObjs.length&&(this.curSelectedTab=1),this.userAnswersObj=this.testReviewService.convertAnswersArr(this.castJsonToObj(t.data.examResultObj?.answers??"")??[]),this.getQuestionCanFeedback(),this.documentConfigService.apiDocumentConfigGetExamConfigDataV2Get(this.examObj?.hashId??"").subscribe(s=>{if(1==s.success){let l=0,c=0;this.questionObjs?.forEach((u,m)=>{u.labelIndex=m,s.data?.resetQuestionIndex&&u.groupInfo&&u.groupInfo.groupId&&(l!=u.groupInfo.groupId&&(l=u.groupInfo.groupId,c=0),u.labelIndex=c,c++)})}this.hasLoadedData=!0});const a=this.envService.getVersionMarkNote(this.envService.getEnvValue("classliveUrl")??""),r=1e6;if(this.examResultObj?.result){const s=this.castJsonToObj(this.examResultObj?.result??"");this.checkMarkNote=!(!s||!s.urlDataMark)}else this.checkMarkNote=a>r}}getQuestionCanFeedback(){let t=[];Array.isArray(this.questionObjs)&&(this.questionObjs.forEach(i=>{i.id&&!this.commonService.isExistInArray(t,i.id)&&t.push(i.id)}),this.waitDestroy(this.testMarketFeedbackService.apiTestMarketFeedbacksQuestionsGet(this.examObj?.id,t.join(",")).subscribe(i=>{if(1==i.success){if(i.data?.objs?.length){let a=i.data?.objs??[];if(Array.isArray(this.questionObjs))for(let r=0;r<this.questionObjs.length;r++)a.forEach(s=>{this.questionObjs&&this.questionObjs[r].id==s.questionId&&(this.questionObjs[r].enableFeedback=s.allowFeedback)})}this.successStatusObj()}else this.errorStatusObj(i.message??"",!0)})))}getOrgExamObjs(){this.examResultService.apiExamResultGetLastResultGet(Number(this.examIdParam),this.userIdParam??"",this.studentIdParam??"",this.examResultIdParam??0).subscribe(t=>{1==t.success?this.orgExamObjs=t.data?.orgExamObjs??[]:this.errorStatusObj(t.message??"",!0)})}ngDoCheck(){this.questionContentHeight=Number(document.getElementById("draw-left-container")?.offsetHeight)?Number(document.getElementById("draw-left-container")?.offsetHeight)-104+"px":"100vh",this.cd.detectChanges()}ngOnInit(){this.waitDestroy((0,ne.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.backToLink=this.commonService.getMyQueryParam("backto")??"",this.cur_cateId=this.commonService.getMyParam(this.activeRoute,"cat_id")??"0",this.examResultIdParam=Number(this.activeRoute.snapshot.paramMap.get("result_id")),this.userIdParam=this.activeRoute.snapshot.paramMap.get("user_id")??void 0,this.studentIdParam=this.activeRoute.snapshot.paramMap.get("student_id")??void 0,this.examIdParam=this.activeRoute.snapshot.paramMap.get("exam_id")??void 0,this.initDataResult&&this.processConvertData(this.initDataResult)})),this.getOrgExamObjs(),this.answerBoxService.switchEssayTabMessage.subscribe(t=>{t&&(this.curSelectedTab=1,setTimeout(()=>{window.scroll(0,0)},0))}),super.ngOnInit()}constructor(t,i,a,r,s,l,c,u,m,p,f,b){super(),this.sAztDialogService=t,this.cd=i,this.activeRoute=a,this.documentConfigService=r,this.docxService=s,this.envService=l,this.testReviewService=c,this.examResultService=u,this.testMarketFeedbackService=m,this.answerBoxService=p,this.exportResultService=f,this.sAztMatDrawerService=b,this.curSelectedTab=0,this.questionContentHeight="100vh",this.backToLink="",this.examResultIdParam=0,this.cur_cateId="0",this.viewOption="viewAll",this.matTabGroupIndex=0,this.userAnswersObj={},this.files=[],this.resultInfos=[],this.essayQuestionObjs=[],this.trueFalseChoiceQuestionObjs=[],this.orgExamObjs=[],this.followerRenderQuest=new mu.p,this.hasLoadedData=!1,this.checkMarkNote=!1,this.changeSelectedTab=!1}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(qi.C),e.Y36(e.sBO),e.Y36(E.gz),e.Y36(un.Cq),e.Y36(Vg.n),e.Y36(nq.h),e.Y36(iq.t),e.Y36(un.kS),e.Y36(Xp.nC),e.Y36(oq.z),e.Y36(zg.U),e.Y36(Ad.T))},n.\u0275cmp=e.Xpm({type:n,selectors:[["azt-test-review-for-teacher"]],viewQuery:function(t,i){if(1&t&&e.Gf(ER,5),2&t){let a;e.iGM(a=e.CRH())&&(i.drawer=a.first)}},inputs:{initDataResult:"initDataResult",testedUserObjs:"testedUserObjs"},features:[e._Bn([Ad.T]),e.qOj],decls:7,vars:5,consts:[[1,"azt-result-list",3,"resize"],["class","p-3 m-3 text-center alert text-slate-500 font-medium",4,"ngIf","ngIfElse"],["hasResult",""],["showCorrectIncorrectFilterTpl",""],[3,"msg","show","percent"],[1,"p-3","m-3","text-center","alert","text-slate-500","font-medium"],[1,"azt-drawer-container","mt-5",2,"height","auto",3,"hasBackdrop"],[3,"ngClass","mode","opened","closedStart"],["drawer",""],["id","draw-left-container",1,"azt-draw-left",2,"overflow-x","hidden",3,"ngClass"],[1,"box",2,"min-height","calc(100vh - 40px)"],[1,"info-user","border-b","border-slate-200/60","dark:border-darkmode-400","p-3"],[1,"relative",3,"studentObj","showPhone"],[1,"p-3","sm:pb-0"],[4,"ngIf","ngIfElse"],["allReadyTested",""],[3,"testedUserObjs","classroomId","historyExamResultObjs"],[3,"ngClass"],[1,"azt-drawer-content","azt-test-review-for-teacher-new","relative",3,"ngClass"],[1,"p-0","slide-main"],[1,"flex","box","sm:h-auto","items-center","rounded-md","border","border-slate-200/60","dark:border-darkmode-400","p-2","text-slate-500","mb-5"],["azt-track-service","test-review-for-teacher-DvCY4Jj0cWz","class","btn btn-sm mr-2",3,"matTooltip","click",4,"ngIf"],["azt-track-service","test-review-for-teacher-olVLKKM8hCQ","class","btn btn-sm mr-2",3,"matTooltip","click",4,"ngIf"],[1,"truncate","font-medium","mx-auto","text-slate-600","dark:text-slate-300",2,"max-width","50%",3,"matTooltip"],[1,"relative","flex"],[3,"ngTemplateOutlet"],[3,"examResultIdParam","userIdParam","studentIdParam","examIdParam","examObj","examResultObj","essayQuestionObjs"],[3,"backToLink","examResultIdParam","userIdParam","studentIdParam","examIdParam","essayExam","essayMark","questionObjs","examObj","offlineMarkObj","offlineMixQuestionObj","isDeletableExamResultObj",4,"ngIf"],[1,"box","flex-1"],[3,"selectedIndex","selectedTabChange","selectedIndexChange"],[3,"label",4,"ngIf"],["id","tabEssay",3,"label",4,"ngIf"],[1,"flex","justify-center"],[3,"examResultIdParam","userIdParam","studentIdParam","examIdParam","studentObj","examObj","examResultObj","markedByObj","questionObjs","essayQuestionObjs","trueFalseChoiceQuestionObjs","files","historyExamResultObjs","examTracks","resultInfos"],[3,"historyExamResultObjs","backToLink","examResultIdParam","userIdParam","studentIdParam","examIdParam"],[3,"backToLink","examResultIdParam","userIdParam","studentIdParam","examIdParam","essayExam","essayMark","questionObjs","examObj","offlineMarkObj","offlineMixQuestionObj","isDeletableExamResultObj"],["azt-track-service","test-review-for-teacher-DvCY4Jj0cWz",1,"btn","btn-sm","mr-2",3,"matTooltip","click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-menu","w-4","h-4"],["x","3","y","3","width","18","height","18","rx","2","ry","2"],["d","M9 3v18"],["d","m14 9 3 3-3 3"],["azt-track-service","test-review-for-teacher-olVLKKM8hCQ",1,"btn","btn-sm","mr-2",3,"matTooltip","click"],["d","m16 15-3-3 3-3"],[3,"label"],[1,"azt-student-list"],[1,"p-3",2,"padding-bottom","80px"],["style","display: block","class","mb-1",3,"imgSrc",4,"ngIf"],["class","p-2 font-bold",4,"ngIf"],["ngFor","",3,"ngForOf"],[1,"mb-1",2,"display","block",3,"imgSrc"],[1,"p-2","font-bold"],["class","relative",3,"follower","examObj","questionObj","isOfflineMark","curQuestionIndex","userAnswersObj","currentTab","orgExamObjs","ngClass",4,"ngIf"],[1,"relative",3,"follower","examObj","questionObj","isOfflineMark","curQuestionIndex","userAnswersObj","currentTab","orgExamObjs","ngClass"],["id","tabEssay",3,"label"],["id","markEssay"],[1,"p-3",2,"padding-bottom","20px"],["isFrameMark",""],[3,"curSelectedTab","examObj","showForTeacher","questions","files","userAnswersObj","examResultObj","resultID","orgExamObjs","changeSelectedTab","saveResultEvent"],[3,"showForTeacher","examObj","questions","files","examResultObj","userAnswersObj","resultID","iframeViewMode","hasLoadedData","orgExamObjs","saveResultEvent"],[1,"filter","flex"],["class","btn btn-sm btn-danger mx-2","style","cursor: default; padding: 6px 4px;",4,"ngIf"],["class","btn btn-sm btn-success mx-2","style","cursor: default; padding: 6px 4px;",4,"ngIf"],[1,"btn","btn-sm",3,"matMenuTriggerFor"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-search","w-4","h-4","mr-1"],["points","22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"],[1,"azt-hidden","md:block"],["xPosition","before"],["filterMenu","matMenu"],[1,"dropdown-menu","show","relative","w-64"],[1,"dropdown-content"],["for","viewRight",1,"dropdown-item","cursor-pointer"],[1,"form-check","form-switch","ml-auto"],["azt-track-service","test-review-for-teacher-Pz5-Lg4oM39","id","viewRight","type","checkbox",1,"show-code","form-check-input","ml-2",3,"checked","change","click"],["for","viewWrong",1,"dropdown-item","cursor-pointer"],["azt-track-service","test-review-for-teacher-l9jNq9CQL6R","id","viewWrong","type","checkbox",1,"show-code","form-check-input","ml-2",3,"checked","change","click"],[1,"btn","btn-sm","btn-danger","mx-2",2,"cursor","default","padding","6px 4px"],[1,"azt-hidden","text-white","md:block"],[1,"btn","btn-sm","btn-success","mx-2",2,"cursor","default","padding","6px 4px"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0),e.NdJ("resize",function(r){return i.onResize(r)},!1,e.Jf7),e.YNc(1,OR,3,3,"div",1),e.YNc(2,$R,28,40,"ng-template",null,2,e.W1O),e.qZA(),e.YNc(4,XR,25,14,"ng-template",null,3,e.W1O),e._UZ(6,"azt-export-docx-loading-box",4)),2&t){const a=e.MAs(3);e.xp6(1),e.Q6J("ngIf",!(null!=i.initDataResult&&null!=i.initDataResult.data&&i.initDataResult.data.examResultObj||null!=i.initDataResult&&null!=i.initDataResult.data&&i.initDataResult.data.historyExamResultObjs))("ngIfElse",a),e.xp6(5),e.Q6J("msg",i.exportResultService.keyLoading)("show",i.exportResultService.isLoading)("percent",i.exportResultService.percent)}},dependencies:[F.mk,F.sg,F.O5,F.tP,Qi.VK,Qi.p6,Hs.jA,Hs.kh,Hs.LW,hu.uX,hu.SP,Ai.gM,i2.y,sq,lq.a,Hg,cq.Y,uq.S,xR,CR,TR,kR,SR.C,ye.JV],styles:[".edit-question-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;border-radius:5px;margin-bottom:-8px}.edit-question-header-right[_ngcontent-%COMP%]{display:flex;align-items:center}.edit-question-header-tag[_ngcontent-%COMP%], .edit-question-header-content[_ngcontent-%COMP%]{margin:10px 10px 18px;padding:5px}.edit-question-header-tag[_ngcontent-%COMP%]:hover, .edit-question-header-content[_ngcontent-%COMP%]:hover{background:rgba(35,97,174,.1803921569);border-radius:5px}.edit-question-header-dr[_ngcontent-%COMP%]{color:#607d8b;margin:0 10px}.edit-question-header-content[_ngcontent-%COMP%]{cursor:pointer}.edit-question-header-point[_ngcontent-%COMP%]{text-align:right}#test_review_container[_ngcontent-%COMP%]{background:#ecf0f5;flex:auto;padding-top:15px}.w-70[_ngcontent-%COMP%]{width:70%}.pos-menu[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%);right:0}.pos-menu-v2[_ngcontent-%COMP%]{position:absolute;top:-2%;right:0}#tester-info[_ngcontent-%COMP%]::-webkit-scrollbar{background-color:#fff;width:16px}#tester-info[_ngcontent-%COMP%]::-webkit-scrollbar-track{background-color:#fff}#tester-info[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#babac0;border-radius:16px;border:4px solid #fff}#tester-info[_ngcontent-%COMP%]::-webkit-scrollbar-button{display:none}#tester-info[_ngcontent-%COMP%]{width:300px;padding:15px;background-color:#fff;margin:0 auto;position:sticky;top:10px;max-height:calc(100vh - 10px);overflow-x:hidden;display:flex;flex-direction:column;max-width:100%;border-radius:3px;border:1px solid #f1f1f1}#short_cut_mobile[_ngcontent-%COMP%]{display:none}#fullPoint[_ngcontent-%COMP%]{border:1px solid #f1f1f1;background-color:#fafafa;padding:10px;margin-top:15px}#fullPoint[_ngcontent-%COMP%]   .point[_ngcontent-%COMP%]{font-weight:500;font-size:130%}.list-time[_ngcontent-%COMP%]{list-style:none;background-color:#fff;margin:0 10px;padding:10px}.list-time[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:10px}.list-time[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{margin-bottom:0}.list-time[_ngcontent-%COMP%]   li.select[_ngcontent-%COMP%]{font-weight:500}.btn-times[_ngcontent-%COMP%]{display:block;transition:all .5s;background:#fafafa;width:100%}.tested-times[_ngcontent-%COMP%]{margin-top:15px}.tested-times[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{border:1px solid #f1f1f1;background-color:#fafafa;padding:10px}.tested-times[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;border:1px solid #f1f1f1;border-top:none;margin-bottom:0;background-color:#fff;padding:10px}.tested-times[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:10px}.tested-times[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{margin-bottom:0}.tested-times[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.select[_ngcontent-%COMP%]{font-weight:500}.tested-times[_ngcontent-%COMP%]:last-child{flex:auto;overflow:auto}.fading_layer[_ngcontent-%COMP%]{position:absolute;z-index:9;background-color:#ffffffe3;width:100%;height:100%;top:0;left:0;padding-top:200px;text-align:center;color:#a9a9a9;font-size:16px}#filterWrap[_ngcontent-%COMP%]{position:absolute;right:0;top:0}.button-show-error[_ngcontent-%COMP%]:hover, .button-show-success[_ngcontent-%COMP%]:hover{background-color:#d8d8d8;color:#00f}.button-show-all[_ngcontent-%COMP%]:hover{color:#00f}.viewWrong[_ngcontent-%COMP%]   .correct[_ngcontent-%COMP%], .viewRight[_ngcontent-%COMP%]   .incorrect[_ngcontent-%COMP%]{display:none}.menu-button-filter[_ngcontent-%COMP%]{font-size:12px;font-weight:400!important;border:1px solid rgba(234,234,234,.8901960784);border-radius:3px;text-transform:none;padding-right:6px;padding-bottom:3px;color:#414141;line-height:20px;background:whitesmoke}#mbTestContent[_ngcontent-%COMP%]{position:relative}#mbTestContent[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{display:none;position:absolute;top:12px;color:#646464;z-index:100}#test_review_container.toggleNavInfo[_ngcontent-%COMP%]   #col_std_info[_ngcontent-%COMP%]{left:0}#close_button[_ngcontent-%COMP%]{color:red;position:absolute;right:5px;top:5px}@media screen and (max-width: 320px){#tester-info[_ngcontent-%COMP%]{width:100%}}@media screen and (max-width: 480px){#mbTestContent[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{display:inline-block}#boxQAButtons[_ngcontent-%COMP%]{position:fixed;right:20px;z-index:99999999999999;bottom:10px;background-color:#fff;border:1px solid #a3a3a3;padding:5px;border-radius:4px}#test_review_container[_ngcontent-%COMP%]{padding-top:0}#col_std_info[_ngcontent-%COMP%]{position:fixed;top:0;left:-100%;z-index:99999;background:rgba(0,0,0,.6117647059);bottom:0;padding:0;transition:all .5s}#short_cut_mobile[_ngcontent-%COMP%]{display:flex;font-weight:500;font-size:18px;justify-content:space-between;color:#4a4a4a}#header-app-component[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:last-child{padding-left:0!important}#tester-info[_ngcontent-%COMP%]{margin:0;position:relative;height:100%;max-height:unset;top:0}}.btn-copy[_ngcontent-%COMP%]{font-size:14px;transition:all .5s;border:none;background:transparent;text-transform:inherit;padding-left:0;color:#00b2c3}.btn-copy[_ngcontent-%COMP%]:hover{color:#047781}@media screen and (max-width: 768px){#tester-info[_ngcontent-%COMP%]{height:auto}#col_examContent_wrap[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{right:13px}#col_examContent_wrap[_ngcontent-%COMP%] > mat-icon.prev_icon[_ngcontent-%COMP%]{left:13px}}@media screen and (max-width: 1600px){#col_examContent_wrap[_ngcontent-%COMP%]{width:100%}}.icon-click-show-button[_ngcontent-%COMP%]{position:absolute;top:0;right:0;background:lightgrey;font-size:25px;text-align:center;height:auto;width:30px;padding:3px 0;border-radius:3px}"]}),n})();function tz(n,o){if(1&n&&e._UZ(0,"azt-loading-effect",3),2&n){const t=e.oxw();e.Q6J("currentStatusObj",t.statusObj)}}function nz(n,o){if(1&n&&e._UZ(0,"azt-test-review-for-teacher",4),2&n){const t=e.oxw();e.Q6J("initDataResult",t.initDataLastResultExam)("testedUserObjs",t.testedUserObjs)}}let iz=(()=>{class n extends xe.Q{openResultHistoryReview(t){this.examResultHistoryDialog=t}closeResultHistoryReview(t){t&&location.reload(),this.examResultHistoryDialog=void 0}onShowFile(t){this.isShowPreviewFile=!0,this.previewFile=t}onFileClose(){this.isShowPreviewFile=!1,this.previewFile=void 0}getAndProcessData(){this.initStatusObj();let t=Number(this.activeRoute.snapshot.paramMap.get("exam_id")),i=this.activeRoute.snapshot.paramMap.get("user_id")??"",a=this.activeRoute.snapshot.paramMap.get("student_id")??"",r=Number(this.activeRoute.snapshot.paramMap.get("result_id"));this.examResultService.apiExamResultGetLastResultGet(t,i,a,r??0).subscribe(s=>{1==s.success?(this.initDataLastResultExam=s,this.headerTitle=s?.data?.examObj?.name??"",this.translateMetaTitle(s.data?.examObj?.name),this.successStatusObj()):this.errorStatusObj(s.message??"",!0)})}translateMetaTitle(t){this.commonService.getTranslate("lang_auto_cham_de_thi").subscribe(i=>{this.commonService.translateMetaData({title:i+" "+t,description:i+t,image:"lang_cms_test_image"})})}ngOnInit(){let t=Number(this.activeRoute.snapshot.paramMap.get("exam_id")),i=this.commonService.getMyQueryParam("backto");this.backToLink=i||"/admin/testbank/exam-results-list/"+(this.initDataLastResultExam?.data?.examObj?.categoryId?this.initDataLastResultExam?.data?.examObj?.categoryId:0)+"/"+t+"/0",this.getAndProcessData(),super.ngOnInit()}constructor(t,i){super(),this.activeRoute=t,this.examResultService=i,this.headerTitle="",this.examResultHistoryDialog=void 0,this.isShowPreviewFile=!1,this.backToLink=""}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(E.gz),e.Y36(un.kS))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-test-review"]],features:[e.qOj],decls:4,vars:3,consts:[[3,"headerBackToLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],["doneLoading",""],[3,"currentStatusObj"],[3,"initDataResult","testedUserObjs"]],template:function(t,i){if(1&t&&(e.TgZ(0,"teacher-layout",0),e.YNc(1,tz,1,1,"azt-loading-effect",1),e.YNc(2,nz,1,2,"ng-template",null,2,e.W1O),e.qZA()),2&t){const a=e.MAs(3);e.Q6J("headerBackToLink",i.backToLink),e.xp6(1),e.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a)}},dependencies:[F.O5,vi.l,ez,wo._],encapsulation:2}),n})(),oz=(()=>{class n extends mt.e{constructor(t,i,a){super(a,i),this.trashService=t,this.dialogRef=i,this.data=a}onConfirmClick(t){this.dialogRef.close(t)}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(ps.d),e.Y36(U.so),e.Y36(U.WI))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-remove-dialog"]],features:[e.qOj],decls:22,vars:10,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5"],[1,"flex","items-center","text-md","font-medium"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-help-circle"],["cx","12","cy","12","r","10"],["d","M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"],["d","M12 17h.01"],[1,"ml-1"],[1,"mt-2"],[1,"text-xs","text-slate-500","dark:text-slate-400"],[1,"p-3","text-right"],[1,"text-right","mt-3"],["azt-track-service","remove-dialog-Vubm0SlK4B",1,"btn","w-24","btn-secondary","mr-3",3,"click"],["azt-track-service","remove-dialog-ZL8r-ixWHP",1,"btn","w-24","btn-primary",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),e.O4$(),e.TgZ(4,"svg",4),e._UZ(5,"circle",5)(6,"path",6)(7,"path",7),e.qZA(),e.kcU(),e.TgZ(8,"span",8),e._uU(9),e.ALo(10,"mytranslate"),e.qZA()(),e.TgZ(11,"div",9)(12,"p",10),e._uU(13),e.qZA()()()(),e.TgZ(14,"div",11)(15,"div",12)(16,"button",13),e.NdJ("click",function(){return i.onConfirmClick(!1)}),e._uU(17),e.ALo(18,"mytranslate"),e.qZA(),e.TgZ(19,"button",14),e.NdJ("click",function(){return i.onConfirmClick(!0)}),e._uU(20),e.ALo(21,"mytranslate"),e.qZA()()()()),2&t&&(e.xp6(9),e.Oqu(e.lcZ(10,4,"lang_cms_common_confirm_cancel")),e.xp6(4),e.hij(" ",i.data.content," "),e.xp6(4),e.hij(" ",e.lcZ(18,6,"lang_auto_huy")," "),e.xp6(3),e.hij(" ",e.lcZ(21,8,"lang_auto_xac_nhan")," "))},dependencies:[ye.JV],encapsulation:2}),n})(),Nw=(()=>{class n extends mt.e{ngOnInit(){this.expandInfoParse=this.data,super.ngOnInit()}saveConfig(){this.form.getRawValue().labelQuestion&&this.form.getRawValue().labelQuestion.length>0?this.dialogRef.close({label:this.form.getRawValue().labelQuestion}):this.dialogRef.close({label:void 0})}constructor(t,i){super(i,t),this.dialogRef=t,this.data=i,this.expandInfoParse=i,this.form=new h.cw({labelQuestion:new h.NI(this.expandInfoParse.label??"C\xe2u",{nonNullable:!0})})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(U.so,8),e.Y36(U.WI,8))},n.\u0275cmp=e.Xpm({type:n,selectors:[["azt-expand-info"]],features:[e.qOj],decls:30,vars:13,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5"],[1,"intro"],[1,"text-base","font-medium","mr-auto"],[1,"form-horizontal",3,"formGroup"],[1,"row","mt-3"],[1,"col-md-12"],[1,"col-md-12","mt-2"],["formControlName","labelQuestion",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],["value","C\xe2u"],["value","Question"],["value","B\xe0i"],[1,"p-3","text-right"],[1,"text-right","mt-3"],["azt-track-service","remove-dialog-Vubm0SlK4B",1,"btn","w-24","btn-secondary","mr-3",3,"click"],["azt-track-service","remove-dialog-ZL8r-ixWHP",1,"btn","w-24","btn-primary",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()(),e.TgZ(7,"div",3)(8,"form",5)(9,"div",6)(10,"div",7)(11,"p"),e._uU(12),e.ALo(13,"mytranslate"),e.qZA()(),e.TgZ(14,"div",8)(15,"select",9)(16,"option",10),e._uU(17,"C\xe2u"),e.qZA(),e.TgZ(18,"option",11),e._uU(19,"Question"),e.qZA(),e.TgZ(20,"option",12),e._uU(21,"B\xe0i"),e.qZA()()()()()()()(),e.TgZ(22,"div",13)(23,"div",14)(24,"button",15),e.NdJ("click",function(){return i.dialogRef.close()}),e._uU(25),e.ALo(26,"mytranslate"),e.qZA(),e.TgZ(27,"button",16),e.NdJ("click",function(){return i.saveConfig()}),e._uU(28),e.ALo(29,"mytranslate"),e.qZA()()()()),2&t&&(e.xp6(5),e.Oqu(e.lcZ(6,5,"lang_core_exam_config_question_label")),e.xp6(3),e.Q6J("formGroup",i.form),e.xp6(4),e.Oqu(e.lcZ(13,7,"lang_core_exam_config_question_label_description")),e.xp6(13),e.hij(" ",e.lcZ(26,9,"lang_auto_dong")," "),e.xp6(3),e.hij(" ",e.lcZ(29,11,"lang_auto_luu")," "))},dependencies:[h._Y,h.YN,h.Kr,h.EJ,h.JJ,h.JL,h.sg,h.u,wt.M,ye.JV],styles:[".label-info_bg[_ngcontent-%COMP%]{z-index:1000;width:100%;display:flex;left:0;top:0;position:fixed;height:100%;min-height:100vh;background-color:#3c3c3c80}.label-info[_ngcontent-%COMP%]{max-width:400px;border-radius:.375rem;z-index:1001;top:50%;left:50%;transform:translate(-50%,-50%);position:fixed;background:#fff;margin-left:auto;margin-right:auto;box-shadow:0 0 13px 3px #00000094}.block-title[_ngcontent-%COMP%]{text-align:center;font-weight:600}.block-body[_ngcontent-%COMP%]{text-align:left}.btn-close[_ngcontent-%COMP%]{transition:all .5s}.btn-close[_ngcontent-%COMP%]:hover{background:#dfe6e9}.input-point[_ngcontent-%COMP%]{margin-left:10px;max-width:100px;border:1px solid #000;border-radius:3px;text-align:center;color:#000;padding:0!important}.btn-config[_ngcontent-%COMP%]{transition:all .5s}.btn-config[_ngcontent-%COMP%]:hover{background:#133864}@media only screen and (max-width: 1024px){.label-info[_ngcontent-%COMP%]{width:95%;max-width:800px}}@media only screen and (max-width: 768px){.label-info[_ngcontent-%COMP%]{width:95%;max-width:700px}}@media only screen and (max-width: 576px){.label-info[_ngcontent-%COMP%]{width:95%;max-width:400px}}@media only screen and (max-width: 380px){.label-info[_ngcontent-%COMP%]{width:95%;max-width:300px}}@media only screen and (max-width: 290px){.label-info[_ngcontent-%COMP%]{width:95%;max-width:250px}}"]}),n})();function az(n,o){if(1&n&&(e.TgZ(0,"div",17)(1,"audio",18),e._UZ(2,"source",19),e.ALo(3,"safe"),e.ALo(4,"mycdn"),e.qZA()()),2&n){const t=e.oxw();e.xp6(1),e.s9C("id","audio_"+t.data.questionObj.id),e.xp6(1),e.Q6J("src",e.lcZ(3,2,e.lcZ(4,4,t.data.questionObj.attachments[0].url)),e.LSH)}}function rz(n,o){if(1&n&&(e.TgZ(0,"div",22)(1,"b",23),e._uU(2),e.qZA(),e.TgZ(3,"div",24),e._UZ(4,"azt-dynamic-hook",10),e.qZA()()),2&n){const t=o.$implicit;let i;e.xp6(2),e.hij("",null!==(i=t.alpha)&&void 0!==i?i:t.key,"."),e.xp6(2),e.Q6J("content",t.content)}}function sz(n,o){if(1&n&&(e.TgZ(0,"div",20),e.YNc(1,rz,5,2,"div",21),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.data.questionObj.answers)}}function lz(n,o){if(1&n&&(e.TgZ(0,"h2",25),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.AsE(" ",e.lcZ(2,2,"lang_auto_dap_an"),": ",t.data.questionObj.answerResult.join(", ")," ")}}function cz(n,o){1&n&&(e.TgZ(0,"span",26),e._UZ(1,"azt-loading-ui"),e.qZA())}let Zw=(()=>{class n extends mt.e{confirmDelete(){this.onDelete=!0,this.waitDestroy(this.examService.apiExamDeleteExamQuestionExamIdQuestionIdDelete(this.data.examId,this.data.questionObj.id).subscribe(t=>{1==t.success?(this.successStatusObj("lang_cms_delete_success",!0),this.onDelete=!1,this.dialogRef.close(!0)):(this.errorStatusObj(t.message??"",!0),this.onDelete=!1,this.dialogRef.close(!1))}))}btnCloseDialog(){this.dialogRef.close(!1)}get customQuestionLabel(){const t=this.commonService.castJsonToObj(this.data.examObj?.expandInfo??"")??void 0;return t?.label?t.label:"C\xe2u"}ngOnInit(){super.ngOnInit()}constructor(t,i,a){super(a,i),this.examService=t,this.dialogRef=i,this.data=a,this.onDelete=!1}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(un.Oe),e.Y36(U.so,8),e.Y36(U.WI,8))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-remove-question-dialog"]],features:[e.qOj],decls:29,vars:26,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-3","border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"intro-y","overflow-auto",2,"max-height","calc(100vh - 150px)"],[1,"text-md","mr-auto","font-bold"],[1,"border-t","border-slate-200/60","dark:border-darkmode-400","py-2","mt-2"],[1,"font-medium","text-md","text-center","mb-2"],["class","text-center ml-auto mr-auto mt-2",4,"ngIf"],[1,"question-standalone-label","mt-2"],[1,"tex2jax_process","box-content",2,"width","auto"],[3,"content"],["class","grid grid-cols-12 gap-2 answers mt-3",4,"ngIf"],["class","font-medium text-md text-left text-success my-2 mt-3",4,"ngIf"],[1,"p-3","flex","justify-end"],[1,"btn","w-24","btn-secondary","mr-3",3,"click"],[1,"btn","btn-primary","mw-24",3,"disabled","click"],["class","w-3 mr-2",4,"ngIf"],[1,"text-center","ml-auto","mr-auto","mt-2"],["controls","","preload","true",2,"margin-left","10px","margin-right","10px","max-width","70%",3,"id"],[3,"src"],[1,"grid","grid-cols-12","gap-2","answers","mt-3"],["class","answer col-span-12",4,"ngFor","ngForOf"],[1,"answer","col-span-12"],[1,"answer-label"],[1,"answer-content"],[1,"font-medium","text-md","text-left","text-success","my-2","mt-3"],[1,"w-3","mr-2"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),e._uU(5),e.ALo(6,"mytranslate"),e.qZA(),e.TgZ(7,"div",5)(8,"h2",6),e._uU(9),e.ALo(10,"mytranslate"),e.qZA(),e.YNc(11,az,5,6,"div",7),e.TgZ(12,"div",8),e._uU(13),e.ALo(14,"isOfflineExam"),e.ALo(15,"mytranslate"),e.qZA(),e.TgZ(16,"div",9),e._UZ(17,"azt-dynamic-hook",10),e.qZA(),e.YNc(18,sz,2,1,"div",11),e.YNc(19,lz,3,4,"h2",12),e.ALo(20,"isEssayAnswer"),e.qZA()()()(),e.TgZ(21,"div",13)(22,"button",14),e.NdJ("click",function(){return i.btnCloseDialog()}),e._uU(23),e.ALo(24,"mytranslate"),e.qZA(),e.TgZ(25,"button",15),e.NdJ("click",function(){return i.confirmDelete()}),e.YNc(26,cz,2,0,"span",16),e._uU(27),e.ALo(28,"mytranslate"),e.qZA()()()),2&t){let a,r;e.xp6(5),e.hij(" ",e.lcZ(6,12,"lang_remove_question_from_exam")," "),e.xp6(4),e.hij(" ",e.lcZ(10,14,"lang_auto_noi_dung_cau_hoi")," "),e.xp6(2),e.Q6J("ngIf",i.data.questionObj.attachments&&i.data.questionObj.attachments.length>0),e.xp6(2),e.AsE(" ",i.customQuestionLabel+" "+((null!=i.data.questionObj.labelIndex?i.data.questionObj.labelIndex:i.data.index)+(null!==(a=null==i.data.examObj?null:i.data.examObj.startQuestionIndex)&&void 0!==a?a:1))," ",e.lcZ(14,16,i.data.examObj)?" ("+e.lcZ(15,18,"lang_auto_hoi_de_thi_offline")+") ":null," "),e.xp6(4),e.Q6J("content",null!==(r=i.data.questionObj.content)&&void 0!==r?r:""),e.xp6(1),e.Q6J("ngIf",1==i.data.questionObj.answerType&&i.data.questionObj.answers&&i.data.questionObj.answers.length>0),e.xp6(1),e.Q6J("ngIf",i.data.questionObj.answerResult&&i.data.questionObj.isRoleTeacher&&!e.lcZ(20,20,i.data.questionObj)),e.xp6(4),e.hij(" ",e.lcZ(24,22,"lang_auto_dong")," "),e.xp6(2),e.Q6J("disabled",i.onDelete),e.xp6(1),e.Q6J("ngIf",i.onDelete),e.xp6(1),e.hij(" ",e.lcZ(28,24,"lang_auto_xoa")," ")}},dependencies:[F.sg,F.O5,wi.n,bm.O,ye.JV,ye.QN,ye.CR,ye.CL,ye.eH],styles:[".answer-content[_ngcontent-%COMP%]{display:flex!important;flex-wrap:wrap}.answer-box[_ngcontent-%COMP%]{border-radius:0 0 3px 3px;padding:8px 20px;justify-content:space-between;align-items:center}.answer[_ngcontent-%COMP%]{display:flex;align-items:center}.group-content-of-question-standalone[_ngcontent-%COMP%]{margin-bottom:10px;font-weight:700}.question-standalone-label[_ngcontent-%COMP%]{font-weight:700}.answer-label[_ngcontent-%COMP%]{min-width:20px;min-height:30px;display:flex;align-items:center;justify-content:flex-start;border-radius:50%;border-width:2px;border-style:solid;border-color:transparent}"]}),n})();var Dw=I(98603),a2=I(36621),Uw=I(94603),r2=I(99413),jw=I(25229),uz=I(52319),qw=I(4803),Rw=I(15422),zw=I(63529),dz=I(35524);function mz(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",9),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(),r=a.$implicit,s=a.index,l=e.oxw(2);let c;return e.KtG(l.setAnswerOnUpdate(l.questionObj.id,r,2,!1,null!==(c=l.questionObj.scorePerQuestion)&&void 0!==c?c:0,s))}),e._uU(1),e.qZA()}if(2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.key," ")}}function pz(n,o){if(1&n&&(e.TgZ(0,"button",10),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.key," ")}}function hz(n,o){if(1&n&&(e.ynx(0),e.YNc(1,mz,2,1,"button",7),e.YNc(2,pz,2,1,"button",8),e.BQk()),2&n){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",!t.isTrue),e.xp6(1),e.Q6J("ngIf",t.isTrue)}}function Az(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"a",11),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.showExplainBox())}),e._uU(1),e.ALo(2,"mytranslate"),e.ALo(3,"mytranslate"),e.qZA()}if(2&n){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.isShowExplain?e.lcZ(2,1,"lang_auto_an_giai_thich"):e.lcZ(3,3,"lang_auto_xem_giai_thich")," ")}}const Hw=function(n){return{"mb-0":n}};function _z(n,o){if(1&n&&(e.TgZ(0,"div",2)(1,"div",3),e.YNc(2,hz,3,2,"ng-container",4),e.qZA(),e.TgZ(3,"div",5),e.YNc(4,Az,4,5,"a",6),e.qZA()()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngClass",e.VKq(3,Hw,t.isMobileDevice)),e.xp6(1),e.Q6J("ngForOf",t.questionObj.answers),e.xp6(2),e.Q6J("ngIf",t.questionObj.help)}}function fz(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",16)(1,"button",17),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.TgZ(4,"button",18),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(),r=a.$implicit,s=a.index,l=e.oxw(2);let c;return e.KtG(l.setAnswerOnUpdate(l.questionObj.id,r,5,!1,null!==(c=l.questionObj.scorePerQuestion)&&void 0!==c?c:0,s,"F"))}),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()()}2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,2,"lang_auto_dung")," "),e.xp6(3),e.hij(" ",e.lcZ(6,4,"lang_auto_sai")," "))}function gz(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",19)(1,"button",18),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(),r=a.$implicit,s=a.index,l=e.oxw(2);let c;return e.KtG(l.setAnswerOnUpdate(l.questionObj.id,r,5,!1,null!==(c=l.questionObj.scorePerQuestion)&&void 0!==c?c:0,s,"T"))}),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.TgZ(4,"button",17),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()()}2&n&&(e.xp6(2),e.hij(" ",e.lcZ(3,2,"lang_auto_dung")," "),e.xp6(3),e.hij(" ",e.lcZ(6,4,"lang_auto_sai")," "))}function xz(n,o){if(1&n&&(e.ynx(0),e.TgZ(1,"div",12)(2,"span",13),e._uU(3),e.qZA(),e.YNc(4,fz,7,6,"div",14),e.YNc(5,gz,7,6,"div",15),e.qZA(),e.BQk()),2&n){const t=o.$implicit;e.xp6(3),e.hij(" ",t.key.toLowerCase()+")"," "),e.xp6(1),e.Q6J("ngIf",t.isTrue),e.xp6(1),e.Q6J("ngIf",!t.isTrue)}}function bz(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"a",11),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.showExplainBox())}),e._uU(1),e.ALo(2,"mytranslate"),e.ALo(3,"mytranslate"),e.qZA()}if(2&n){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.isShowExplain?e.lcZ(2,1,"lang_auto_an_giai_thich"):e.lcZ(3,3,"lang_auto_xem_giai_thich")," ")}}function vz(n,o){if(1&n&&(e.TgZ(0,"div",2)(1,"div",3),e.YNc(2,xz,6,3,"ng-container",4),e.qZA(),e.TgZ(3,"div",5),e.YNc(4,bz,4,5,"a",6),e.qZA()()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngClass",e.VKq(3,Hw,t.isMobileDevice)),e.xp6(1),e.Q6J("ngForOf",t.questionObj.answers),e.xp6(2),e.Q6J("ngIf",t.questionObj.help)}}function wz(n,o){1&n&&(e.TgZ(0,"mat-icon",30),e._uU(1,"cancel"),e.qZA())}function yz(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"mat-chip-row",28),e.NdJ("removed",function(){const r=e.CHM(t).$implicit,s=e.oxw(2);return e.KtG(s.removeAnswerType4(s.questionObj.id,r))}),e._uU(1),e.YNc(2,wz,2,0,"mat-icon",29),e.qZA()}if(2&n){const t=o.$implicit,i=e.oxw(2);e.Q6J("removable",i.removable),e.xp6(1),e.hij(" ",t," "),e.xp6(1),e.Q6J("ngIf",i.removable)}}function Cz(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",5)(1,"a",11),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.showExplainBox())}),e._uU(2),e.ALo(3,"mytranslate"),e.ALo(4,"mytranslate"),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(2),e.hij(" ",t.isShowExplain?e.lcZ(3,1,"lang_auto_an_giai_thich"):e.lcZ(4,3,"lang_auto_xem_giai_thich")," ")}}const Tz=function(n){return{width:n}},kz=function(n){return{"on-change":n}};function Sz(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",20)(1,"div",21)(2,"mat-form-field",22)(3,"span",23),e._uU(4),e.ALo(5,"mytranslate"),e.ALo(6,"mytranslate"),e.qZA(),e.TgZ(7,"mat-chip-grid",null,24),e.ALo(9,"mytranslate"),e.YNc(10,yz,3,3,"mat-chip-row",25),e.TgZ(11,"input",26),e.NdJ("matChipInputTokenEnd",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.setAnswerType4(r.questionObj.id,a))}),e.ALo(12,"mytranslate"),e.qZA()()()(),e.YNc(13,Cz,5,5,"div",27),e.qZA()}if(2&n){const t=e.MAs(8),i=e.oxw();e.xp6(1),e.Akn(e.VKq(19,Tz,i.questionObj.help?"80%":"100%")),e.xp6(1),e.Q6J("ngClass",e.VKq(21,kz,i.questionObj.onChanges)),e.xp6(2),e.hij(" ",i.questionObj.onChanges?e.lcZ(5,11,"lang_testbank_update_exam_changed_answer"):e.lcZ(6,13,"lang_testbank_update_exam_list_recognize_answer")," "),e.xp6(3),e.uIk("aria-label",e.lcZ(9,15,"lang_testbank_update_exam_recognize_answer")),e.xp6(3),e.Q6J("ngForOf",i.questionObj.answerResult),e.xp6(1),e.s9C("placeholder",e.lcZ(12,17,"lang_testbank_update_exam_add_answer")),e.Q6J("matChipInputFor",t)("matChipInputSeparatorKeyCodes",i.separatorKeysCodes)("matChipInputAddOnBlur",i.addOnBlur),e.xp6(2),e.Q6J("ngIf",i.questionObj.help)}}const Ez=function(){return{width:"80%"}};function Oz(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",20),e._UZ(1,"div",21),e.TgZ(2,"div",5)(3,"a",11),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.showExplainBox())}),e._uU(4),e.ALo(5,"mytranslate"),e.ALo(6,"mytranslate"),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(1),e.Akn(e.DdM(7,Ez)),e.xp6(3),e.hij(" ",t.isShowExplain?e.lcZ(5,3,"lang_auto_an_giai_thich"):e.lcZ(6,5,"lang_auto_xem_giai_thich")," ")}}let Iz=(()=>{class n extends xe.Q{constructor(){super(...arguments),this.isShowExplain=!1,this.setAnswerOnUpdateEmit=new e.vpe,this.setAnswerType4UpdateEmit=new e.vpe,this.removeAnswerType4Emit=new e.vpe,this.isShowExplainChange=new e.vpe,this.removable=!0,this.addOnBlur=!0,this.separatorKeysCodes=[Bg.K5]}showExplainBox(){this.isShowExplainChange.emit(!this.isShowExplain)}setAnswerOnUpdate(t,i,a,r,s,l,c){this.setAnswerOnUpdateEmit.emit({idQuestion:t,event:i,type:a,isImage:r,score:s,index:l??0,status:c})}removeAnswerType4(t,i){this.removeAnswerType4Emit.emit({questionId:t,answerObj:i})}setAnswerType4(t,i){this.setAnswerType4UpdateEmit.emit({questionId:t,event:i})}}return n.\u0275fac=function(){let o;return function(i){return(o||(o=e.n5z(n)))(i||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["azt-question-answer-edit-box"]],inputs:{isShowExplain:"isShowExplain",questionObj:"questionObj"},outputs:{setAnswerOnUpdateEmit:"setAnswerOnUpdateEmit",setAnswerType4UpdateEmit:"setAnswerType4UpdateEmit",removeAnswerType4Emit:"removeAnswerType4Emit",isShowExplainChange:"isShowExplainChange"},features:[e.qOj],decls:8,vars:12,consts:[["class","box pt-3 pb-3 pl-4 pr-4 flex items-center border-t border-slate-200 dark:border-darkmode-400","style","margin-top: -5px; border-top-left-radius: 0; border-top-right-radius: 0; box-shadow: none",4,"ngIf"],["class","box p-3 border-t flex border-slate-200 dark:border-darkmode-400","style","margin-top: -5px; border-top-left-radius: 0; border-top-right-radius: 0; box-shadow: none",4,"ngIf"],[1,"box","pt-3","pb-3","pl-4","pr-4","flex","items-center","border-t","border-slate-200","dark:border-darkmode-400",2,"margin-top","-5px","border-top-left-radius","0","border-top-right-radius","0","box-shadow","none"],[1,"list-answer","mt-auto","mb-auto",3,"ngClass"],[4,"ngFor","ngForOf"],[1,"ml-auto"],["azt-track-service","azt-standalone-question-4zQT3eCoTDc","class","btn btn-transparent","style","user-select: none",3,"click",4,"ngIf"],["azt-track-service","azt-standalone-question-FISnl1ZDo9-","class","btn rounded-full mr-2","style","width: 35px; height: 35px; line-height: 35px",3,"click",4,"ngIf"],["class","btn btn-pending rounded-full mr-2","style","width: 35px; height: 35px; line-height: 35px",4,"ngIf"],["azt-track-service","azt-standalone-question-FISnl1ZDo9-",1,"btn","rounded-full","mr-2",2,"width","35px","height","35px","line-height","35px",3,"click"],[1,"btn","btn-pending","rounded-full","mr-2",2,"width","35px","height","35px","line-height","35px"],["azt-track-service","azt-standalone-question-4zQT3eCoTDc",1,"btn","btn-transparent",2,"user-select","none",3,"click"],[1,"flex","items-center","mt-2"],[1,"mr-2"],["class","flex mr-2",4,"ngIf"],["class","flex",4,"ngIf"],[1,"flex","mr-2"],[1,"btn","btn-pending","rounded-full","mr-2",2,"width","40px","height","40px","line-height","35px","cursor","default"],[1,"btn","rounded-full","mr-2",2,"width","40px","height","40px","line-height","35px","cursor","default",3,"click"],[1,"flex"],[1,"box","p-3","border-t","flex","border-slate-200","dark:border-darkmode-400",2,"margin-top","-5px","border-top-left-radius","0","border-top-right-radius","0","box-shadow","none"],[1,"list-answer","mt-auto","mb-auto","align-self-center"],["appearance","outline",1,"example-chip-list","w-100","bg-white",2,"border-radius","5px","color","#000",3,"ngClass"],[2,"font-size","14px","font-weight","450"],["chipList",""],[3,"removable","removed",4,"ngFor","ngForOf"],[3,"placeholder","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur","matChipInputTokenEnd"],["class","ml-auto",4,"ngIf"],[3,"removable","removed"],["matChipRemove","",4,"ngIf"],["matChipRemove",""]],template:function(t,i){1&t&&(e.YNc(0,_z,5,5,"div",0),e.ALo(1,"isOneChoiceAnswer"),e.YNc(2,vz,5,5,"div",0),e.ALo(3,"isTrueFalseAnswer"),e.YNc(4,Sz,14,23,"div",1),e.ALo(5,"isFillAnswer"),e.YNc(6,Oz,7,8,"div",1),e.ALo(7,"isEssayAnswer")),2&t&&(e.Q6J("ngIf",e.lcZ(1,4,i.questionObj)),e.xp6(2),e.Q6J("ngIf",e.lcZ(3,6,i.questionObj)),e.xp6(2),e.Q6J("ngIf",e.lcZ(5,8,i.questionObj)),e.xp6(2),e.Q6J("ngIf",i.questionObj.help&&e.lcZ(7,10,i.questionObj)))},dependencies:[F.mk,F.sg,F.O5,qr.RA,qr.oH,qr.qH,qr.z3,Yo.Hw,ms.KE,ye.JV,ye.Uy,ye.eH,ye.ck,ye.rp],styles:['.pr-7[_ngcontent-%COMP%]{padding-right:28px}.w-38px[_ngcontent-%COMP%]{width:38px}.remove-grid[_ngcontent-%COMP%]{display:block!important}.question-standalone-loader-box[_ngcontent-%COMP%]{min-height:50px}  .skeleton-box-loading{width:100%;height:30px;max-width:100%;margin-bottom:5px;display:inline-block}  .skeleton-box-loading:after{position:absolute;inset:0;transform:translate(-100%);animation:_ngcontent-%COMP%_shimmer 2s infinite;content:""}.question-standalone-box[_ngcontent-%COMP%]{margin-bottom:30px;display:block;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 rgba(0, 0, 0, 0)),var(--tw-ring-shadow, 0 0 rgba(0, 0, 0, 0)),var(--tw-shadow);border-radius:.375rem}.question-standalone-container[_ngcontent-%COMP%]{padding:15px}.question-standalone-for-test-finder[_ngcontent-%COMP%]{border:none;margin-bottom:0;padding:0}.question-standalone-for-test-finder[_ngcontent-%COMP%]   .question-standalone-main-content[_ngcontent-%COMP%]{padding:15px;border:1px solid rgb(228,228,228)}.group-of-question-standalone-for-test-finder[_ngcontent-%COMP%]{padding:15px!important;border:1px solid rgb(228,228,228)!important}.question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid #2262AE!important;outline:3px solid rgba(125,160,201,.65)!important}.group-of-question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid green!important;outline:3px solid rgba(0,193,0,.321)!important}.question-standalone-container[_ngcontent-%COMP%]:hover   .prev_question_btn[_ngcontent-%COMP%], .question-standalone-container[_ngcontent-%COMP%]:hover   .next_question_btn[_ngcontent-%COMP%]{visibility:visible}.question-standalone-label[_ngcontent-%COMP%]{font-weight:700}.question-standalone-content-box[_ngcontent-%COMP%]{position:relative}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]{color:#f44336;position:relative;padding-left:20px;display:flex;align-items:center}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]:before{content:"!";position:absolute;left:0;color:#fff;background:#f44336;width:15px;height:15px;text-align:center;border-radius:50%;font-size:smaller;display:flex;justify-content:center;align-items:center}.question-standalone-step-container-box[_ngcontent-%COMP%]{margin-bottom:50px}.group-content-of-question-standalone[_ngcontent-%COMP%]{margin-bottom:10px;font-weight:700}.answer[_ngcontent-%COMP%]{display:flex;align-items:center}.answer-label[_ngcontent-%COMP%]{width:20px;height:30px;min-width:20px;min-height:30px;display:flex;align-items:center;justify-content:flex-start;border-radius:50%;border-width:2px;border-style:solid;border-color:transparent}.answer-box[_ngcontent-%COMP%]{border-radius:0 0 3px 3px;padding:8px 20px;justify-content:space-between;align-items:center}.selected-answer[_ngcontent-%COMP%]{background-color:#f39c12;color:#fff}.answer-content-front[_ngcontent-%COMP%]{display:flex!important;flex-wrap:wrap;width:calc(100% - 30px)}.explainTxt[_ngcontent-%COMP%]{width:125px;font-weight:500;display:flex;align-items:center}#examHeader[_ngcontent-%COMP%]{display:block;border:1px solid #e7e7e7;border-radius:3px;overflow:hidden}.next_question_btn[_ngcontent-%COMP%]{position:absolute;right:10px;top:35%;padding:.35rem .45rem;background-color:#a3a5a670;border-radius:50%;visibility:hidden}.prev_question_btn[_ngcontent-%COMP%]{position:absolute;left:10px;top:35%;padding:.35rem .45rem;background-color:#a3a5a670;border-radius:50%;visibility:hidden}.prev_question_btn[_ngcontent-%COMP%]:hover, .next_question_btn[_ngcontent-%COMP%]:hover{visibility:visible}.arrow_btn[_ngcontent-%COMP%]{font-size:20px;vertical-align:middle;width:20px;height:20px;color:#fff;margin-left:auto!important;margin-right:auto!important;-webkit-user-select:none;user-select:none}.bottom_action[_ngcontent-%COMP%]{position:fixed;padding:15px;bottom:0;left:0;background:#312e2e;color:#fff;width:100%}.bottom_action[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]{display:block}.btn-ans-result[_ngcontent-%COMP%]{color:#fff;background-color:#f39c12}.show-list[_ngcontent-%COMP%]{max-width:200px}.show-list[_ngcontent-%COMP%]   .show-sheet[_ngcontent-%COMP%]   .listli[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:27px;height:27px;border-radius:50%;border:1px solid #347da5;display:flex;align-items:center;color:#fff;justify-content:center;font-size:12px;cursor:pointer;-webkit-user-select:none;user-select:none}.top_action[_ngcontent-%COMP%]{position:fixed;padding:10px;top:0;left:0;background:#312e2e;color:#fff;width:100%}.scrollSheetMobile[_ngcontent-%COMP%]{max-height:200px;overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.scrollSheetMobile[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.notify-badge[_ngcontent-%COMP%]{position:absolute;right:3px;top:3px;text-align:center;color:#afafaf;padding:0;font-size:20px;cursor:pointer}.attach-container[_ngcontent-%COMP%]{background:#fff;padding:10px 0 0;border-radius:5px;width:83.33%;border:1px solid #e8e8e8}.answer-review[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:50%;border:1px solid rgb(52,125,165);display:flex;align-items:center;color:#fff;justify-content:center;font-size:15px;-webkit-user-select:none;user-select:none}.border-none[_ngcontent-%COMP%]{border:none!important}.bg-question[_ngcontent-%COMP%]{margin-top:15px;padding:15px 10px;background:#fff}.question-pending-part[_ngcontent-%COMP%]{width:100%;height:50px}.pencil-edit[_ngcontent-%COMP%]{position:absolute;top:-5px;right:-5px;width:30px;height:30px;border-radius:50%;text-align:center;background:darkgrey;z-index:9999}.pencil-edit[_ngcontent-%COMP%]   .lucide[_ngcontent-%COMP%]{color:#fff;stroke-width:2.5px;height:29px}.margin-question-bar[_ngcontent-%COMP%]{margin-top:calc(3rem + 40px)!important}.sheet-screen[_ngcontent-%COMP%]{max-height:calc(100vh - 140px);overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.sheet-screen[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}  .layout{display:grid;margin:20px 0;grid-row-gap:20px}  .layout-4{grid-template-columns:1fr 1fr 1fr 1fr}  .layout-2{grid-template-columns:1fr 1fr}  .layout-1{grid-template-columns:1fr}  .question-standalone-content-box{max-width:100%;overflow-x:auto;overflow-y:hidden}  #boxContentQuestion .question-standalone-container{max-width:800px}@keyframes _ngcontent-%COMP%_shimmer{to{transform:translate(100%)}}@media (max-width: 768px){.answer-content-front[_ngcontent-%COMP%]{justify-content:center}.btn-ans-result[_ngcontent-%COMP%]{margin-right:auto!important}}@media (max-width: 800px){  #boxContentQuestion .question-standalone-container{max-width:calc(90vw - 16px)!important}}']}),n})();const Mz=function(n){return{"skeleton-box-loading":n}};function Lz(n,o){if(1&n&&e._UZ(0,"div",3),2&n){const t=e.oxw();e.Q6J("ngClass",e.VKq(1,Mz,t.renderConfigObj.isFirstRender))}}function Bz(n,o){if(1&n&&e._UZ(0,"azt-test-audio-ui",15),2&n){const t=e.oxw(2);e.Q6J("questionObj",t.questionObj)("isShowList",!0)}}function Pz(n,o){1&n&&(e.TgZ(0,"span",16),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_auto_vui_long_nhap_dap_an_cho_cau_hoi")," "))}const Qz=function(n){return{"pb-2":n}};function Fz(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",4)(1,"div",5)(2,"div",6),e.YNc(3,Bz,1,2,"azt-test-audio-ui",7),e.YNc(4,Pz,3,3,"span",8),e.TgZ(5,"div",9),e._UZ(6,"azt-question-label-box",10)(7,"azt-question-action-box",11),e.qZA(),e._UZ(8,"azt-question-content-box",12)(9,"azt-question-answer-view-content-box",12),e.qZA()(),e.TgZ(10,"azt-question-answer-edit-box",13),e.NdJ("isShowExplainChange",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.isShowExplain=a)})("setAnswerOnUpdateEmit",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.setAnswerOnUpdateEmit.emit(a))})("setAnswerType4UpdateEmit",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.setAnswerType4UpdateEmit.emit(a))})("removeAnswerType4Emit",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.removeAnswerType4Emit.emit(a))}),e.qZA(),e._UZ(11,"azt-question-explain-box",14),e.qZA()}if(2&n){const t=e.oxw();e.xp6(1),e.Udp("font-size","1em")("line-height","1.7")("overflow","auto"),e.Q6J("id","question_render_container_"+t.questionObj.id)("ngClass",e.VKq(31,Qz,t.questionObj.attachments.length>0)),e.xp6(2),e.Q6J("ngIf",t.questionObj.attachments.length>0),e.xp6(1),e.Q6J("ngIf",t.isInvalidValidation),e.xp6(2),e.Q6J("examObj",t.examObj)("questionObj",t.questionObj)("renderConfigObj",t.renderConfigObj)("curQuestionIndex",t.curQuestionIndex),e.xp6(1),e.Q6J("showForTeacher",!0)("examObj",t.examObj)("questionObj",t.questionObj)("renderConfigObj",t.renderConfigObj)("curQuestionIndex",t.curQuestionIndex)("orgExamObjs",t.orgExamObjs),e.xp6(1),e.Q6J("examObj",t.examObj)("questionObj",t.questionObj)("renderConfigObj",t.renderConfigObj),e.xp6(1),e.Q6J("examObj",t.examObj)("questionObj",t.questionObj)("renderConfigObj",t.renderConfigObj),e.xp6(1),e.Q6J("isShowExplain",t.isShowExplain)("questionObj",t.questionObj),e.xp6(1),e.Q6J("isShowExplain",t.isShowExplain)("questionObj",t.questionObj)("renderConfigObj",t.renderConfigObj)}}let Jw=(()=>{class n extends a2.R{ngOnInit(){super.ngOnInit();let t=new Uw.m(!1,!1,!1);super.initData(t,this.follower,this.questionObj)}constructor(){super(),this.follower=new mu.p,this.curQuestionIndex=0,this.orgExamObjs=[],this.isShowExplain=!1,this.isInvalidValidation=!1,this.setAnswerOnUpdateEmit=new e.vpe,this.setAnswerType4UpdateEmit=new e.vpe,this.removeAnswerType4Emit=new e.vpe}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["azt-question-standalone-for-update"]],inputs:{examObj:"examObj",questionObj:"questionObj",follower:"follower",curQuestionIndex:"curQuestionIndex",orgExamObjs:"orgExamObjs",isShowExplain:"isShowExplain",isInvalidValidation:"isInvalidValidation"},outputs:{setAnswerOnUpdateEmit:"setAnswerOnUpdateEmit",setAnswerType4UpdateEmit:"setAnswerType4UpdateEmit",removeAnswerType4Emit:"removeAnswerType4Emit"},features:[e.qOj],decls:4,vars:3,consts:[["load_effect_lazy","",1,"question-standalone-box",3,"id"],["class","question-standalone-loader-box",3,"ngClass",4,"ngIf","ngIfElse"],["elementRended",""],[1,"question-standalone-loader-box",3,"ngClass"],[1,"question-standalone-content-box"],[1,"question-standalone-container","box","border-none",3,"id","ngClass"],[1,"question-standalone-main-content"],[3,"questionObj","isShowList",4,"ngIf"],["class","question-standalone-is-invalid-validation mb-2",4,"ngIf"],[1,"flex","items-center","justify-between"],[3,"examObj","questionObj","renderConfigObj","curQuestionIndex"],[3,"showForTeacher","examObj","questionObj","renderConfigObj","curQuestionIndex","orgExamObjs"],[3,"examObj","questionObj","renderConfigObj"],[3,"isShowExplain","questionObj","isShowExplainChange","setAnswerOnUpdateEmit","setAnswerType4UpdateEmit","removeAnswerType4Emit"],[2,"display","block",3,"isShowExplain","questionObj","renderConfigObj"],[3,"questionObj","isShowList"],[1,"question-standalone-is-invalid-validation","mb-2"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0),e.YNc(1,Lz,1,3,"div",1),e.YNc(2,Fz,12,33,"ng-template",null,2,e.W1O),e.qZA()),2&t){const a=e.MAs(3);e.Q6J("id","question_render_element_"+i.questionObj.id),e.xp6(1),e.Q6J("ngIf",!i.renderConfigObj.isRenderElement)("ngIfElse",a)}},dependencies:[F.mk,F.O5,r2.C,jw.T,uz.w,qw.S,Rw.L,zw.w,dz.P,Iz,ye.JV],styles:['.pr-7[_ngcontent-%COMP%]{padding-right:28px}.w-38px[_ngcontent-%COMP%]{width:38px}.remove-grid[_ngcontent-%COMP%]{display:block!important}.question-standalone-loader-box[_ngcontent-%COMP%]{min-height:50px}  .skeleton-box-loading{width:100%;height:30px;max-width:100%;margin-bottom:5px;display:inline-block}  .skeleton-box-loading:after{position:absolute;inset:0;transform:translate(-100%);animation:_ngcontent-%COMP%_shimmer 2s infinite;content:""}.question-standalone-box[_ngcontent-%COMP%]{margin-bottom:30px;display:block;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 rgba(0, 0, 0, 0)),var(--tw-ring-shadow, 0 0 rgba(0, 0, 0, 0)),var(--tw-shadow);border-radius:.375rem}.question-standalone-container[_ngcontent-%COMP%]{padding:15px}.question-standalone-for-test-finder[_ngcontent-%COMP%]{border:none;margin-bottom:0;padding:0}.question-standalone-for-test-finder[_ngcontent-%COMP%]   .question-standalone-main-content[_ngcontent-%COMP%]{padding:15px;border:1px solid rgb(228,228,228)}.group-of-question-standalone-for-test-finder[_ngcontent-%COMP%]{padding:15px!important;border:1px solid rgb(228,228,228)!important}.question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid #2262AE!important;outline:3px solid rgba(125,160,201,.65)!important}.group-of-question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid green!important;outline:3px solid rgba(0,193,0,.321)!important}.question-standalone-container[_ngcontent-%COMP%]:hover   .prev_question_btn[_ngcontent-%COMP%], .question-standalone-container[_ngcontent-%COMP%]:hover   .next_question_btn[_ngcontent-%COMP%]{visibility:visible}.question-standalone-label[_ngcontent-%COMP%]{font-weight:700}.question-standalone-content-box[_ngcontent-%COMP%]{position:relative}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]{color:#f44336;position:relative;padding-left:20px;display:flex;align-items:center}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]:before{content:"!";position:absolute;left:0;color:#fff;background:#f44336;width:15px;height:15px;text-align:center;border-radius:50%;font-size:smaller;display:flex;justify-content:center;align-items:center}.question-standalone-step-container-box[_ngcontent-%COMP%]{margin-bottom:50px}.group-content-of-question-standalone[_ngcontent-%COMP%]{margin-bottom:10px;font-weight:700}.answer[_ngcontent-%COMP%]{display:flex;align-items:center}.answer-label[_ngcontent-%COMP%]{width:20px;height:30px;min-width:20px;min-height:30px;display:flex;align-items:center;justify-content:flex-start;border-radius:50%;border-width:2px;border-style:solid;border-color:transparent}.answer-box[_ngcontent-%COMP%]{border-radius:0 0 3px 3px;padding:8px 20px;justify-content:space-between;align-items:center}.selected-answer[_ngcontent-%COMP%]{background-color:#f39c12;color:#fff}.answer-content-front[_ngcontent-%COMP%]{display:flex!important;flex-wrap:wrap;width:calc(100% - 30px)}.explainTxt[_ngcontent-%COMP%]{width:125px;font-weight:500;display:flex;align-items:center}#examHeader[_ngcontent-%COMP%]{display:block;border:1px solid #e7e7e7;border-radius:3px;overflow:hidden}.next_question_btn[_ngcontent-%COMP%]{position:absolute;right:10px;top:35%;padding:.35rem .45rem;background-color:#a3a5a670;border-radius:50%;visibility:hidden}.prev_question_btn[_ngcontent-%COMP%]{position:absolute;left:10px;top:35%;padding:.35rem .45rem;background-color:#a3a5a670;border-radius:50%;visibility:hidden}.prev_question_btn[_ngcontent-%COMP%]:hover, .next_question_btn[_ngcontent-%COMP%]:hover{visibility:visible}.arrow_btn[_ngcontent-%COMP%]{font-size:20px;vertical-align:middle;width:20px;height:20px;color:#fff;margin-left:auto!important;margin-right:auto!important;-webkit-user-select:none;user-select:none}.bottom_action[_ngcontent-%COMP%]{position:fixed;padding:15px;bottom:0;left:0;background:#312e2e;color:#fff;width:100%}.bottom_action[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]{display:block}.btn-ans-result[_ngcontent-%COMP%]{color:#fff;background-color:#f39c12}.show-list[_ngcontent-%COMP%]{max-width:200px}.show-list[_ngcontent-%COMP%]   .show-sheet[_ngcontent-%COMP%]   .listli[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:27px;height:27px;border-radius:50%;border:1px solid #347da5;display:flex;align-items:center;color:#fff;justify-content:center;font-size:12px;cursor:pointer;-webkit-user-select:none;user-select:none}.top_action[_ngcontent-%COMP%]{position:fixed;padding:10px;top:0;left:0;background:#312e2e;color:#fff;width:100%}.scrollSheetMobile[_ngcontent-%COMP%]{max-height:200px;overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.scrollSheetMobile[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.notify-badge[_ngcontent-%COMP%]{position:absolute;right:3px;top:3px;text-align:center;color:#afafaf;padding:0;font-size:20px;cursor:pointer}.attach-container[_ngcontent-%COMP%]{background:#fff;padding:10px 0 0;border-radius:5px;width:83.33%;border:1px solid #e8e8e8}.answer-review[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:50%;border:1px solid rgb(52,125,165);display:flex;align-items:center;color:#fff;justify-content:center;font-size:15px;-webkit-user-select:none;user-select:none}.border-none[_ngcontent-%COMP%]{border:none!important}.bg-question[_ngcontent-%COMP%]{margin-top:15px;padding:15px 10px;background:#fff}.question-pending-part[_ngcontent-%COMP%]{width:100%;height:50px}.pencil-edit[_ngcontent-%COMP%]{position:absolute;top:-5px;right:-5px;width:30px;height:30px;border-radius:50%;text-align:center;background:darkgrey;z-index:9999}.pencil-edit[_ngcontent-%COMP%]   .lucide[_ngcontent-%COMP%]{color:#fff;stroke-width:2.5px;height:29px}.margin-question-bar[_ngcontent-%COMP%]{margin-top:calc(3rem + 40px)!important}.sheet-screen[_ngcontent-%COMP%]{max-height:calc(100vh - 140px);overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.sheet-screen[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}  .layout{display:grid;margin:20px 0;grid-row-gap:20px}  .layout-4{grid-template-columns:1fr 1fr 1fr 1fr}  .layout-2{grid-template-columns:1fr 1fr}  .layout-1{grid-template-columns:1fr}  .question-standalone-content-box{max-width:100%;overflow-x:auto;overflow-y:hidden}  #boxContentQuestion .question-standalone-container{max-width:800px}@keyframes _ngcontent-%COMP%_shimmer{to{transform:translate(100%)}}@media (max-width: 768px){.answer-content-front[_ngcontent-%COMP%]{justify-content:center}.btn-ans-result[_ngcontent-%COMP%]{margin-right:auto!important}}@media (max-width: 800px){  #boxContentQuestion .question-standalone-container{max-width:calc(90vw - 16px)!important}}']}),n})();function Nz(n,o){if(1&n&&e._UZ(0,"azt-loaded-img",1),2&n){const t=e.oxw();e.Q6J("imgSrc",t.examObj.examHeader)}}let Kw=(()=>{class n extends xe.Q{}return n.\u0275fac=function(){let o;return function(i){return(o||(o=e.n5z(n)))(i||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["azt-exam-header-box"]],inputs:{examObj:"examObj"},features:[e.qOj],decls:1,vars:1,consts:[["style","display: block",3,"imgSrc",4,"ngIf"],[2,"display","block",3,"imgSrc"]],template:function(t,i){1&t&&e.YNc(0,Nz,1,1,"azt-loaded-img",0),2&t&&e.Q6J("ngIf",i.examObj.examHeader)},dependencies:[F.O5,i2.y],encapsulation:2}),n})(),Gw=(()=>{class n extends xe.Q{constructor(){super(...arguments),this.content=""}ngOnInit(){document.body.style.overflow="hidden",super.ngOnInit()}ngOnDestroy(){document.body.style.overflow="auto"}}return n.\u0275fac=function(){let o;return function(i){return(o||(o=e.n5z(n)))(i||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["azt-loading-handle-data"]],inputs:{content:"content"},features:[e.qOj],decls:10,vars:3,consts:[[1,"box-loading-handle-data"],[1,"box-body"],[1,"text-center","py-4"],["version","1.1","id","jobing-j-drawit","id","Layer_1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","x","0px","y","0px","viewBox","0 0 109 92.9",0,"xml","space","preserve",1,"w-12","mx-auto",2,"enable-background","new 0 0 109 92.9"],["d","M90.8,52c3.5,6.2,7.1,11.7,9.8,17.7c4.4,9.7-2.9,20.7-13.8,20.9c-11.8,0.2-23.7,0.2-35.5,0 c-11-0.1-17.6-12.2-12-21.7c0.4-0.8,1.8-1.4,2.7-1.4c9.9-0.1,19.7-0.1,29.6-0.1c9.8,0,15.9-4.6,18.7-14C90.4,53.2,90.5,52.9,90.8,52 z",1,"azt-svg-loading","jobing-j"],["d","M39.6,90.3c-6.8,0-13.8,0.8-20.5-0.2c-9.7-1.4-15-12.8-10.3-21.3c5.9-10.9,12.1-21.6,18.5-32.2 c5.5-9,18.6-8.7,24.2,0.2c0.7,1.1,0.8,1.9,0.1,3.1C46.7,48.3,42,57,36.8,65.3c-5.3,8.4-3.8,18.8,2.5,24.6 C39.5,89.9,39.5,90.2,39.6,90.3z",1,"azt-svg-loading","jobing-j"],["d","M32.5,27.3c3.3-5.7,6.1-11,9.4-16c5.9-9.1,19.4-9.2,25.1,0c6.5,10.4,12.6,21,18.3,31.7 c4.8,9-1.5,19.9-11.5,20.7c-1.6,0.1-2.6-0.2-3.5-1.8c-4.8-8.6-9.8-17.1-14.7-25.6c-4.7-8.3-12.5-11.6-21.7-9.2 C33.6,27.1,33.3,27.1,32.5,27.3z",1,"azt-svg-loading","jobing-j"],[1,"note","text-center","font-medium"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e.O4$(),e.TgZ(3,"svg",3),e._UZ(4,"path",4)(5,"path",5)(6,"path",6),e.qZA()(),e.kcU(),e.TgZ(7,"div",7),e._uU(8),e.ALo(9,"mytranslate"),e.qZA()()()),2&t&&(e.xp6(8),e.Oqu(e.lcZ(9,1,i.content)+"..."))},dependencies:[ye.JV],styles:[".box-loading-handle-data[_ngcontent-%COMP%]{height:100vh;width:100%;position:absolute;top:0;right:0;background:rgba(240,248,255,.3019607843);display:flex;align-items:center;justify-content:center;z-index:999}"]}),n})();const Yw="azt-dispatch-change-editor";class $w{constructor(o,t){this.editor=o,this.config=t}loadScript(o,t,i){return new Promise(a=>{((n,o)=>{n.execCommand("aztLoadScriptSource",!1,o)})(this.editor,{name:o,url:t,mode:i,callback:a})})}loadMultipleScript(o){return new Promise(t=>{((n,o)=>{n.execCommand("aztLoadMultipleScriptSource",!1,o)})(this.editor,{lst:o,callback:t})})}loadStyle(o,t,i){return((n,o)=>{n.execCommand("aztLoadStyleSource",!1,o)})(this.editor,{name:o,content:t,mode:i})}hiddenSuggestionMenu(o){return((n,o)=>{n.execCommand("aztHiddenSuggestionActionMenu",!1,o)})(this.editor,o)}addOneSuggestionMenu(o,t,i,a,r){return((n,o)=>{n.execCommand("aztAddSuggestionActionMenu",!1,o)})(this.editor,{name:o,callback:t,svgIcon:i,hidden:a,hiddenOnExcuse:r})}openOneSuggestionMenu(o){return((n,o)=>{n.execCommand("aztOpenOneSuggestionActionMenu",!1,o)})(this.editor,o)}hiddenOneSuggestionMenu(o){return((n,o)=>{n.execCommand("aztHiddenOneSuggestionActionMenu",!1,o)})(this.editor,o)}setContentPlaceholder(o){return((n,o)=>{n.execCommand("aztSetContentPlaceholderActionMenu",!1,o)})(this.editor,o)}pushJsonContent(o,t){return this.editor.fire("azt-dispatch-push-json-content",{name:o,content:t})}static replaceTranslateService(o){Object.prototype.hasOwnProperty.call(window,"aztEditorFnsTranslateService")||(window.aztEditorFnsTranslateService=o)}translate(o,t){return window.aztEditorFnsTranslateService?window.aztEditorFnsTranslateService(o,t):t??o}listenChangeEditor(o,t){this.editor.on(Yw,i=>{o.includes(i.dispatch_name)&&t(i.dispatch_name)})}dispatchChangeEditor(o){this.editor.fire(Yw,{dispatch_name:o})}getConfig(o){return this.config.getByKey(o)}setConfig(o,t){this.config[o]=t,this.editor.fire("azt-dispatch-change-config",{name:o})}}var Wz=I(1458),Xz=I.n(Wz),Vw=I(95277);let eH=(()=>{class n{constructor(t,i,a){this.infoService=t,this.commonService=i,this.sAZTranslateService=a,this.configs=Z.N.editor_local_setting,$w.replaceTranslateService((r,s)=>this.sAZTranslateService.myTranslateInstant(r)??s??r)}init(){var t=this;return new Promise(function(){var i=(0,Yi.Z)(function*(a,r){try{if(t.configs)return a();yield t.initConfig(),a()}catch(s){r(s)}});return function(a,r){return i.apply(this,arguments)}}())}initConfig(){return new Promise(t=>{this.infoService.apiInfoGetConfigObjsGet("EDITOR_V3_CONFIG").subscribe(i=>{this.configs=this.commonService.castJsonToObj(i.EDITOR_V3_CONFIG),t()})})}replaceMathMlToAztMathHook(t){return(t=t.replace(/<span class="tex2jax_process azt-mathml"[^>]*>\\\((.*?)\\\)<\/span>/gi,'<azt-math data-latex="$1"></azt-math>')).replace(/<span class=\"tex2jax_process azt-mathml\"[^>]*><![^>]*>[^<]*(<math\b[^>]*>[\s\S]*?<\/math>)[^<]*<\/span>/gi,(i,a)=>`<azt-math data-latex="${Xz().convert(a)}"></azt-math>`)}replaceQvStringEngAns(t){return t.replace(/(<span class=\"qv_string_eng_ans\") (style='[^\']*'[^>]*)(>[^\<]*)<span style='[^\']*'>([a-zA-Z])<\/span>(<\/span>)/gi,'$1 data-index-answer="$4"$3$5')}replaceImageContentToElement(t){return t.replace(/@\[\]({.*?\})@\[\]/g,(i,a)=>{const r=JSON.parse(a);return`<azt-image data-link="${r.link}" data-x="${r.data.x}" data-y="${r.data.y}" data-width="${r.data.width}" data-height="${r.data.height}"></azt-image>`})}processTextFromJson(t){return new Vw.m(this,t).pipeline(this.replaceMathMlToAztMathHook).pipeline(this.replaceImageContentToElement).pipeline(this.replaceQvStringEngAns).value}replaceCodeContentToSave(t){return t.replace(/<code processing="true" content="([^\"]*)"[^>]*>(.*)<\/code>/g,"<code>$1</code>")}replaceMathMlContentToSave(t){return(t=t.replace(/<azt-math data-latex="([^"]*)"[^>]*>(.*)<\/azt-math>/g,'<span class="tex2jax_process azt-mathml">\\($1\\)</span>')).replace(/<span class="[^"]*" data-latex="([^"]*)"[^>]*>(.*)<\/span>/g,'<span class="tex2jax_process azt-mathml">\\($1\\)</span>')}replaceBrContentToSave(t){return this.commonService.replaceAll(t,'<br data-mce-bogus="1">',"")??""}processFirstTextFromOutput(t){return new Vw.m(this,t).pipeline(this.replaceCodeContentToSave).pipeline(this.replaceMathMlContentToSave).pipeline(this.replaceBrContentToSave).value}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(Ss.CM),e.LFG(Yn.z),e.LFG(Dw.W))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const tH=function(){return{standalone:!0}};function nH(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"editor",1),e.NdJ("ngModelChange",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.question_html_content=a)})("onInit",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.handleEditorInit(a))}),e.qZA()}if(2&n){const t=e.oxw();let i;e.Q6J("ngModelOptions",e.DdM(4,tH))("ngModel",t.question_html_content)("apiKey",null!==(i=null==t.manager.configs?null:t.manager.configs.tiny_mce_key)&&void 0!==i?i:"")("init",t.config)}}let iH=(()=>{class n extends xe.Q{constructor(t,i){super(),this.manager=t,this.commonService=i,this.changeContentEditor=new e.vpe,this.changeImageEditor=new e.vpe,this.question_html_content="",this.isInitEditor=!0}onChangeNote(){return this.question_html_content.includes("azt-question-multiple-choice-answers")||this.question_html_content.includes("qv_string_eng_ans")?this.exportQuestionMultipleChoiceFromEditor():this.exportQuestionEssayFromEditor()}exportQuestionEssayFromEditor(){const t=new Ge.Q(5),i=this.commonService.myClone(this.question);var a,r;t.addTask(this,()=>new Promise(s=>{this.editor?.fire("azt-question-essay--export",{callback:l=>{a={content:this.manager.processFirstTextFromOutput(l.content)},s()}})})),t.addTask(this,()=>new Promise(s=>{this.editor?.fire("azt-helper-question--export",{callback:l=>{r=this.manager.processFirstTextFromOutput(l),s()}})})),t.start().then(()=>{i&&(i.help=r,i.content=a.content,this.changeContentEditor.emit(i))})}exportQuestionMultipleChoiceFromEditor(){const t=new Ge.Q(5),i=this.commonService.myClone(this.question);var a,r;t.addTask(this,()=>new Promise(s=>{this.editor?.fire("azt-question-multiple-choice--export",{callback:l=>{a={content:this.manager.processFirstTextFromOutput(l.content),answers:l.answers.map(c=>({...c,content:this.manager.processFirstTextFromOutput(c.content)}))},s()}})})),t.addTask(this,()=>new Promise(s=>{this.editor?.fire("azt-helper-question--export",{callback:l=>{r=this.manager.processFirstTextFromOutput(l),s()}})})),t.start().then(()=>{i&&(i.help=r,i.content=a.content,i.answers=a.answers,i.answers.length===this.question?.answers.length&&this.changeContentEditor.emit(i))})}ngOnInit(){super.ngOnInit(),this.manager.init().then(()=>{this.isInitEditor=!1})}handleEditorInit(t){this.editor=t.editor,function Vz(n){return new Promise(o=>{n.on("azt-dispatch-setup-api",t=>{o(new $w(n,t.config))})})}(this.editor).then(i=>{if(i.setConfig("lock_the_answer",!0),i.setConfig("many_multiple_choice_answers_are_correct",!0),1===this.question?.answerType){const a={content:this.manager.processTextFromJson(this.question?.content??""),answers:this.question?.answers.map(r=>({key:r.key,content:this.manager.processTextFromJson(r.content),isTrue:r.isTrue})),help:this.manager.processTextFromJson(this.question?.help??"")};i.pushJsonContent("QUESTION_MULTIPLE_CHOICE_JSON",a)}if(4===this.question?.answerType){const a={content:this.manager.processTextFromJson(this.question?.content??""),answers:this.question?.answerResult,help:this.manager.processTextFromJson(this.question?.help??"")};i.pushJsonContent("QUESTION_FILL_EMPTY_JSON",a)}i.listenChangeEditor(["content","image"],a=>{switch(a){case"content":return this.onChangeNote();case"image":return this.changeImageEditor.emit()}})})}get config(){if(!this.manager.configs)return{};const t=`${this.manager.configs?.base_init.plugins} ${this.manager.configs.external_plugins.map(r=>r.name).join(" ")}`,i={},a={};return this.manager.configs.external_plugins.forEach(r=>{i[r.name]=r.load_url,a[`${this.commonService.replaceAll(r.name,"-","_")}_settings`]=r.settings}),{...this.manager.configs?.base_init,plugins:t,external_plugins:i,...a}}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(eH),e.Y36(Yn.z))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-azt-editor-v3"]],inputs:{question:"question"},outputs:{changeContentEditor:"changeContentEditor",changeImageEditor:"changeImageEditor"},features:[e.qOj],decls:1,vars:1,consts:[[3,"ngModelOptions","ngModel","apiKey","init","ngModelChange","onInit",4,"ngIf"],[3,"ngModelOptions","ngModel","apiKey","init","ngModelChange","onInit"]],template:function(t,i){1&t&&e.YNc(0,nH,1,5,"editor",0),2&t&&e.Q6J("ngIf",!i.isInitEditor)},dependencies:[F.O5,h.JJ,h.On,C.PG],styles:[".tox-tinymce{border:none!important;border-radius:0 0 5px 5px!important}"]}),n})();const oH=["downPage"];function aH(n,o){if(1&n&&e._UZ(0,"azt-loading-effect",11),2&n){const t=e.oxw();e.Q6J("currentStatusObj",t.statusObj)}}function rH(n,o){1&n&&(e.TgZ(0,"span",45),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_testbank_create_exam_width_file_pdf_go_to")))}function sH(n,o){1&n&&(e.TgZ(0,"div",46),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_testbank_tested_list_teacher_confirmed")," "))}function lH(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",47)(1,"div",48)(2,"span",49),e._uU(3),e.ALo(4,"mytranslate"),e.qZA(),e.TgZ(5,"input",50),e.NdJ("keyup.enter",function(){e.CHM(t);const a=e.oxw(4);return e.KtG(a.actionNextToQuestion())})("ngModelChange",function(a){e.CHM(t);const r=e.oxw(4);return e.KtG(r.nexToQuestionConf.value=a)})("focus",function(){e.CHM(t);const a=e.oxw(4);return e.KtG(a.toggleTooltipNextToQuestion(!0))})("focusout",function(){e.CHM(t);const a=e.oxw(4);return e.KtG(a.toggleTooltipNextToQuestion(!1))}),e.qZA(),e.TgZ(6,"button",51),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(4);return e.KtG(a.actionNextToQuestion())}),e._uU(7),e.ALo(8,"mytranslate"),e.qZA()(),e.TgZ(9,"div")(10,"button",52),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(4);return e.KtG(a.openDialogSpitPoint())}),e._uU(11),e.ALo(12,"mytranslate"),e.qZA()()()}if(2&n){const t=e.oxw(4);e.xp6(3),e.Oqu(e.lcZ(4,5,"lang_testbank_create_exam_width_file_pdf_go_to")),e.xp6(2),e.Q6J("min",1)("ngModel",t.nexToQuestionConf.value),e.xp6(2),e.Oqu(e.lcZ(8,7,"lang_auto_den")),e.xp6(4),e.Oqu(e.lcZ(12,9,"lang_testbank_update_exam_split_points"))}}function cH(n,o){1&n&&(e.TgZ(0,"span",59),e._uU(1,",\xa0"),e.qZA())}function uH(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"b",57),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw(6);let l;return e.KtG(s.goToQuestionAll(null!==(l=r.index)&&void 0!==l?l:0))}),e.ALo(2,"mytranslate"),e._uU(3),e.ALo(4,"mytranslate"),e.qZA(),e.YNc(5,cH,2,0,"span",58),e.BQk()}if(2&n){const t=o.$implicit,i=o.index,a=e.oxw(6);let r;e.xp6(1),e.s9C("matTooltip",e.lcZ(2,4,"lang_testbank_create_exam_width_file_pdf_click_roll")),e.xp6(2),e.AsE(" ",e.lcZ(4,6,"lang_testbank_create_exam_width_file_pdf_question")," ",(null!==(r=t.index)&&void 0!==r?r:0)+1," "),e.xp6(2),e.Q6J("ngIf",i<a.invalidTypeQuestionConfig.length-1)}}function dH(n,o){if(1&n&&(e.ynx(0),e._uU(1),e.ALo(2,"mytranslate"),e.TgZ(3,"div",55),e.YNc(4,uH,6,8,"ng-container",56),e.qZA(),e.BQk()),2&n){const t=e.oxw(5);e.xp6(1),e.hij(" ",e.lcZ(2,2,"lang_testbank_create_exam_width_file_pdf_check_configuration")," "),e.xp6(3),e.Q6J("ngForOf",t.invalidTypeQuestionConfig)}}function mH(n,o){if(1&n&&(e.TgZ(0,"div",53)(1,"mat-icon",54),e._uU(2,"info_outlined"),e.qZA(),e._uU(3),e.ALo(4,"mytranslate"),e.YNc(5,dH,5,4,"ng-container",3),e.qZA()),2&n){const t=e.oxw(4);e.xp6(3),e.hij(" ",e.lcZ(4,2,"lang_testbank_create_exam_width_file_pdf_cant_save")," "),e.xp6(2),e.Q6J("ngIf",t.invalidTypeQuestionConfig.length>0)}}function pH(n,o){1&n&&(e.TgZ(0,"span",63),e._uU(1,"|"),e.qZA())}function hH(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"a",61),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw(5);return e.KtG(s.onShowFile(r))}),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.YNc(4,pH,2,0,"span",62),e.BQk()}if(2&n){const t=o.index,i=e.oxw(5);e.xp6(2),e.AsE("",e.lcZ(3,3,"lang_testbank_update_exam_image")," ",t+1,""),e.xp6(2),e.Q6J("ngIf",t<i.cropperData.length-1)}}function AH(n,o){if(1&n&&(e.TgZ(0,"div",60),e._uU(1),e.ALo(2,"mytranslate"),e.YNc(3,hH,5,5,"ng-container",56),e.qZA()),2&n){const t=e.oxw(4);e.xp6(1),e.hij(" ",e.lcZ(2,2,"lang_testbank_update_exam_data_split_exam"),": "),e.xp6(2),e.Q6J("ngForOf",t.cropperData)}}function _H(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",81),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(5);return e.KtG(a.cancelEditQuest())}),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()}2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_cms_common_close_btn")," "))}function fH(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",82),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(5);return e.KtG(a.onSaveEditOnlyQuest())}),e._UZ(1,"lucide-icon",83),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()}if(2&n){const t=e.oxw(5);e.Q6J("disabled",!t.editorInsideTargetObj.event.content),e.xp6(2),e.hij(" ",e.lcZ(3,2,"lang_student_classroom_list_update")," ")}}function gH(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"lucide-icon",99),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3).$implicit,r=e.oxw(4);return e.KtG(r.showFeedbackQuestionDialog(a))}),e.ALo(1,"mytranslate"),e.qZA()}2&n&&e.s9C("matTooltip",e.lcZ(1,1,"lang_auto_bao_loi"))}function xH(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",100)(1,"button",101),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3).$implicit,r=e.oxw(4);return e.KtG(r.showFeedbackQuestionDialog(a))}),e.ALo(2,"mytranslate"),e._UZ(3,"lucide-icon",102),e.qZA()()}2&n&&(e.xp6(1),e.s9C("matTooltip",e.lcZ(2,1,"lang_auto_bao_loi")))}function bH(n,o){if(1&n&&(e.ynx(0),e.YNc(1,gH,2,3,"lucide-icon",97),e.YNc(2,xH,4,3,"div",98),e.TgZ(3,"div",85),e._uU(4,"|"),e.qZA(),e.BQk()),2&n){const t=e.oxw(6);e.xp6(1),e.Q6J("ngIf",t.isMobile),e.xp6(1),e.Q6J("ngIf",!t.isMobile)}}function vH(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"lucide-icon",103),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2),r=a.$implicit,s=a.index,l=e.oxw(4);return e.KtG(l.removeQuestion(r,s))}),e.ALo(1,"mytranslate"),e.qZA()}2&n&&e.s9C("matTooltip",e.lcZ(1,1,"lang_auto_xoa"))}function wH(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"button",104),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2),r=a.$implicit,s=a.index,l=e.oxw(4);return e.KtG(l.removeQuestion(r,s))}),e.ALo(2,"mytranslate"),e._UZ(3,"lucide-icon",105),e.qZA()()}2&n&&(e.xp6(1),e.s9C("matTooltip",e.lcZ(2,1,"lang_auto_xoa")))}function yH(n,o){1&n&&(e.TgZ(0,"div",106),e.ALo(1,"mytranslate"),e.O4$(),e.TgZ(2,"svg",107),e._UZ(3,"line",108)(4,"path",109),e.qZA()()),2&n&&e.s9C("matTooltip",e.lcZ(1,1,"lang_auto_dap_an_cua_cau_hoi_nay_da_duoc_co_dinh"))}function CH(n,o){1&n&&(e.TgZ(0,"div",85),e._uU(1,"|"),e.qZA())}function TH(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",110)(1,"div",111)(2,"mat-chip-listbox")(3,"mat-chip-option",112),e.NdJ("removed",function(){e.CHM(t);const a=e.oxw(2).$implicit,r=e.oxw(4);return e.KtG(r.setTag(a))}),e._uU(4),e.ALo(5,"mytranslate"),e.TgZ(6,"button",113)(7,"mat-icon",114),e._uU(8,"cancel"),e.qZA()()()()()()}if(2&n){const t=e.oxw(2).$implicit;e.xp6(4),e.hij(" ",e.lcZ(5,1,"azt_lang_tag_"+t.tags[0].code)," ")}}function kH(n,o){1&n&&(e.TgZ(0,"div",85),e._uU(1,"|"),e.qZA())}function SH(n,o){1&n&&(e.O4$(),e.kcU(),e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_teacher_set_tags")))}function EH(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"a",124),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw(3).$implicit,l=e.oxw(4);return e.KtG(l.setTag(s,r))}),e._uU(2),e.qZA()()}if(2&n){const t=o.$implicit,i=e.oxw(7);let a;e.xp6(2),e.hij(" ",null!==(a=t[i.commonService.getCurrentLang()+"Name"])&&void 0!==a?a:t.enName," ")}}const s2=function(n){return{"mr-1":n}};function OH(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",115)(1,"button",116),e.O4$(),e.TgZ(2,"svg",92),e._UZ(3,"path",117)(4,"path",118)(5,"path",119),e.qZA(),e.YNc(6,SH,3,3,"span",3),e.qZA(),e.kcU(),e.TgZ(7,"mat-menu",null,120)(9,"div",121)(10,"ul",7),e.YNc(11,EH,3,1,"li",56),e.TgZ(12,"li"),e._UZ(13,"hr",122),e.qZA(),e.TgZ(14,"li")(15,"button",123),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2).$implicit,r=e.oxw(4);return e.KtG(r.applyTagAll(a))}),e._uU(16),e.ALo(17,"mytranslate"),e.qZA()()()()()()}if(2&n){const t=e.MAs(8),i=e.oxw(2).$implicit,a=e.oxw(4);e.xp6(1),e.Q6J("matMenuTriggerFor",t),e.xp6(1),e.Q6J("ngClass",e.VKq(8,s2,!a.isMobile)),e.xp6(4),e.Q6J("ngIf",!a.isMobile),e.xp6(5),e.Q6J("ngForOf",a.questionTags),e.xp6(4),e.Q6J("disabled",!i.tags),e.xp6(1),e.hij(" ",e.lcZ(17,6,"lang_teacher_apply_all_tags")," ")}}function IH(n,o){1&n&&(e.TgZ(0,"div",85),e._uU(1,"|"),e.qZA())}function MH(n,o){1&n&&(e.O4$(),e.kcU(),e.TgZ(0,"span",125),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_teacher_edit_content_exam")))}function LH(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_update_exam_original_question")))}function BH(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",126),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2).$implicit,r=e.oxw(4);return e.KtG(r.goToOriginalQuestion(a))}),e.TgZ(2,"span",127),e._UZ(3,"lucide-icon",128),e.qZA(),e.YNc(4,LH,3,3,"span",3),e.qZA(),e.TgZ(5,"div",85),e._uU(6,"|"),e.qZA(),e.BQk()}if(2&n){const t=e.oxw(6);e.xp6(2),e.Q6J("ngClass",e.VKq(2,s2,!t.isMobile)),e.xp6(2),e.Q6J("ngIf",!t.isMobile)}}function PH(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.YNc(1,bH,5,2,"ng-container",3),e.ynx(2),e.YNc(3,vH,2,3,"lucide-icon",84),e.YNc(4,wH,4,3,"div",3),e.TgZ(5,"div",85),e._uU(6,"|"),e.qZA(),e.BQk(),e.YNc(7,yH,5,3,"div",86),e.YNc(8,CH,2,0,"div",87),e.TgZ(9,"div",88),e.YNc(10,TH,9,3,"div",89),e.qZA(),e.YNc(11,kH,2,0,"div",87),e.YNc(12,OH,18,10,"div",90),e.YNc(13,IH,2,0,"div",87),e.TgZ(14,"div",91),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,r=e.oxw(4);return e.KtG(r.startEditQuest(a))}),e.TgZ(15,"span"),e.O4$(),e.TgZ(16,"svg",92),e._UZ(17,"path",93)(18,"polyline",94)(19,"path",95),e.qZA(),e.YNc(20,MH,3,3,"span",96),e.qZA()(),e.kcU(),e.TgZ(21,"div",85),e._uU(22,"|"),e.qZA(),e.YNc(23,BH,7,4,"ng-container",3),e.BQk()}if(2&n){const t=e.oxw().$implicit,i=e.oxw(4);e.xp6(1),e.Q6J("ngIf",t.enableFeedback),e.xp6(2),e.Q6J("ngIf",i.isMobile),e.xp6(1),e.Q6J("ngIf",!i.isMobile),e.xp6(3),e.Q6J("ngIf",t.isFixAns),e.xp6(1),e.Q6J("ngIf",t.isFixAns),e.xp6(2),e.Q6J("ngIf",t.tags&&t.tags.length>0),e.xp6(1),e.Q6J("ngIf",t.tags&&t.tags.length>0),e.xp6(1),e.Q6J("ngIf",i.questionTags.length>0),e.xp6(1),e.Q6J("ngIf",i.questionTags.length>0),e.xp6(3),e.Q6J("ngClass",e.VKq(12,s2,!i.isMobile)),e.xp6(4),e.Q6J("ngIf",!i.isMobile),e.xp6(3),e.Q6J("ngIf",t.orgQuestionObj&&t.orgQuestionObj.orgExamId)}}function QH(n,o){1&n&&e._UZ(0,"div")}function FH(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"app-azt-editor-v3",130),e.NdJ("changeContentEditor",function(a){e.CHM(t);const r=e.oxw(6);return e.KtG(r.onChangeContentEditor(a))})("changeImageEditor",function(){e.CHM(t);const a=e.oxw(6);return e.KtG(a.editorInsideTargetObj.event.image=!0)}),e.qZA()}if(2&n){const t=e.oxw(6);e.Q6J("question",t.editorInsideTargetObj.quest)}}function NH(n,o){if(1&n&&e.YNc(0,FH,1,1,"app-azt-editor-v3",129),2&n){const t=e.oxw(5);e.Q6J("ngIf",t.editorInsideTargetObj)}}function ZH(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"azt-question-standalone-for-update",131,79),e.NdJ("setAnswerType4UpdateEmit",function(a){e.CHM(t);const r=e.oxw(5);return e.KtG(r.setAnswerType4(a))})("removeAnswerType4Emit",function(a){e.CHM(t);const r=e.oxw(5);return e.KtG(r.removeAnswerType4(a))})("setAnswerOnUpdateEmit",function(a){e.CHM(t);const r=e.oxw(5);return e.KtG(r.setAnswer(a))}),e.qZA()}if(2&n){const t=e.oxw(),i=t.$implicit,a=t.index,r=e.oxw(4);e.Q6J("examObj",r.examObj)("questionObj",i)("follower",r.followerRenderQuest)("curQuestionIndex",a)("isShowExplain",r.defaultShowResultMedia)("isInvalidValidation",r.invalidValidationQuestionIds.includes(i.id))}}function DH(n,o){if(1&n&&(e.TgZ(0,"div",134),e._UZ(1,"img",135),e.ALo(2,"mycdn"),e.qZA()),2&n){const t=e.oxw(2).$implicit;e.xp6(1),e.s9C("src",e.lcZ(2,1,t.answerMedia),e.LSH)}}function UH(n,o){if(1&n&&(e.TgZ(0,"div",134)(1,"div",136),e._UZ(2,"span",137),e.qZA()()),2&n){const t=e.oxw(2).$implicit;e.xp6(2),e.Q6J("innerHtml",t.answerMedia,e.oJD)}}function jH(n,o){if(1&n&&(e.TgZ(0,"div",132),e.YNc(1,DH,3,3,"div",133),e.YNc(2,UH,3,1,"div",133),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",1==t.isImage),e.xp6(1),e.Q6J("ngIf",0==t.isImage)}}const qH=function(n){return{editable:n}},RH=function(n){return{"d-none":n}},zH=function(n){return{"error-border":n}};function HH(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",64)(1,"div",65)(2,"div",66)(3,"div",67)(4,"div",68),e.YNc(5,_H,3,3,"button",69),e.YNc(6,fH,4,4,"button",70),e.qZA(),e._UZ(7,"div",71),e.TgZ(8,"div",72),e.YNc(9,PH,24,14,"ng-container",3),e.ALo(10,"isOfflineExam"),e.TgZ(11,"div",73)(12,"span",74),e._uU(13),e.ALo(14,"mytranslate"),e.qZA(),e.TgZ(15,"input",75),e.NdJ("input",function(a){const s=e.CHM(t).$implicit,l=e.oxw(4);return e.KtG(l.setScore(a,s.id))}),e.qZA()()()(),e.TgZ(16,"div",76),e.YNc(17,QH,1,0,"div",77),e.YNc(18,NH,1,1,"ng-template",null,78,e.W1O),e.YNc(20,ZH,2,6,"ng-template",null,79,e.W1O),e.qZA()(),e.YNc(22,jH,3,2,"div",80),e.qZA()()}if(2&n){const t=o.$implicit,i=o.index,a=e.MAs(19),r=e.MAs(21),s=e.oxw(4);let l;e.Q6J("ngClass",e.VKq(20,qH,s.editorInsideTargetObj&&s.editorInsideTargetObj.quest.id===t.id)),e.uIk("id","questViewBoxByLabel"+t.rawIndex),e.xp6(1),e.s9C("id","question_view_"+t.id),e.xp6(1),e.s9C("id","question_"+i),e.xp6(3),e.Q6J("ngIf",s.editorInsideTargetObj&&s.editorInsideTargetObj.quest.id===t.id),e.xp6(1),e.Q6J("ngIf",s.editorInsideTargetObj&&s.editorInsideTargetObj.quest.id===t.id),e.xp6(3),e.Q6J("ngIf",!e.lcZ(10,16,s.examObj)),e.xp6(3),e.Q6J("ngClass",e.VKq(22,RH,s.isMobile)),e.xp6(1),e.hij("",e.lcZ(14,18,"lang_testbank_update_exam_point"),":"),e.xp6(2),e.s9C("value",s.isDivinePointForQuestion?s.parseNumberFixed(null!==(l=t.scorePerQuestion)&&void 0!==l?l:0,8):t.scorePerQuestion),e.Q6J("ngClass",e.VKq(24,zH,null==t.scorePerQuestion||t.scorePerQuestion<0))("decimal",!0),e.xp6(2),e.Q6J("ngIf",s.editorInsideTargetObj&&s.editorInsideTargetObj.quest.id===t.id)("ngIfThen",a)("ngIfElse",r),e.xp6(5),e.Q6J("ngIf",t.showResultMedia)}}function JH(n,o){1&n&&e._UZ(0,"azt-loading-handle-data",138),2&n&&e.Q6J("content","lang_testbank_export_pdf_by_user_processing")}function KH(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",14)(2,"div",15,16),e._UZ(4,"input",17),e.TgZ(5,"flexed-on-the-top",18)(6,"div",19)(7,"div",20),e.YNc(8,rH,3,3,"span",21),e.TgZ(9,"input",22),e.NdJ("keyup.enter",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.actionNextToQuestion())})("ngModelChange",function(a){e.CHM(t);const r=e.oxw(3);return e.KtG(r.nexToQuestionConf.value=a)})("focus",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.toggleTooltipNextToQuestion(!0))})("focusout",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.toggleTooltipNextToQuestion(!1))}),e.qZA(),e.TgZ(10,"button",23),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.actionNextToQuestion())}),e._uU(11),e.ALo(12,"mytranslate"),e.qZA()(),e.TgZ(13,"div",24)(14,"button",25),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.openDialogSpitPoint())}),e._uU(15),e.ALo(16,"mytranslate"),e.qZA(),e.TgZ(17,"button",26),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.goBack())}),e._uU(18),e.ALo(19,"mytranslate"),e.qZA(),e.TgZ(20,"button",27),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.handleSubmitSaveExam())}),e._uU(21),e.ALo(22,"mytranslate"),e.qZA()()()(),e.TgZ(23,"button",26),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.goBack())}),e._uU(24),e.ALo(25,"mytranslate"),e.qZA(),e.TgZ(26,"button",27),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.handleSubmitSaveExam())}),e._uU(27),e.ALo(28,"mytranslate"),e.qZA(),e.TgZ(29,"button",28),e.O4$(),e.TgZ(30,"svg",29),e._UZ(31,"circle",30)(32,"circle",31)(33,"circle",32),e.qZA()()(),e.kcU(),e.TgZ(34,"div",33)(35,"div",34)(36,"div",35),e.YNc(37,sH,3,3,"div",36),e.YNc(38,lH,13,11,"div",37),e.YNc(39,mH,6,4,"div",38),e.YNc(40,AH,4,4,"div",39),e.TgZ(41,"div",40),e._UZ(42,"azt-exam-header-box",41),e.YNc(43,HH,23,26,"div",42),e.qZA()()()(),e._UZ(44,"azt-scroll-to-top-bottom",43),e.qZA(),e.YNc(45,JH,1,1,"azt-loading-handle-data",44),e.BQk()}if(2&n){const t=e.oxw(3),i=e.MAs(7);e.xp6(4),e.Q6J("formControl",t.nameExamInp),e.xp6(1),e.Q6J("hidden",t.fixToTopTop>=-100)("colorBackground","#f0f8ffe8"),e.xp6(3),e.Q6J("ngIf",!t.isMobile),e.xp6(1),e.Q6J("min",1)("ngModel",t.nexToQuestionConf.value),e.xp6(2),e.Oqu(e.lcZ(12,23,"lang_auto_den")),e.xp6(4),e.Oqu(e.lcZ(16,25,"lang_testbank_update_exam_split_points")),e.xp6(3),e.Oqu(e.lcZ(19,27,"lang_button_cancel")),e.xp6(2),e.Q6J("disabled",""===t.nameExamInp.value.trim()||t.nameExamInp.errors||t.invalidTypeQuestionConfig.length>0),e.xp6(1),e.hij(" ",e.lcZ(22,29,"lang_button_save")," "),e.xp6(3),e.Oqu(e.lcZ(25,31,"lang_button_cancel")),e.xp6(2),e.Q6J("disabled",""===t.nameExamInp.value.trim()||t.nameExamInp.errors||t.invalidTypeQuestionConfig.length>0),e.xp6(1),e.hij(" ",e.lcZ(28,33,"lang_button_save")," "),e.xp6(2),e.Q6J("matMenuTriggerFor",i),e.xp6(8),e.Q6J("ngIf",0===t.questionObjs.length),e.xp6(1),e.Q6J("ngIf",t.questionObjs.length>0),e.xp6(1),e.Q6J("ngIf",t.invalidTypeQuestionConfig.length>0),e.xp6(1),e.Q6J("ngIf",t.cropperData&&t.cropperData.length>0),e.xp6(2),e.Q6J("examObj",t.examObj),e.xp6(1),e.Q6J("ngForOf",t.questionObjs),e.xp6(1),e.Q6J("isScrollToTop",!0),e.xp6(1),e.Q6J("ngIf",t.isLoadingSave)}}function GH(n,o){1&n&&(e.TgZ(0,"div",139)(1,"span",140),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&n&&(e.xp6(2),e.hij("",e.lcZ(3,1,"lang_testbank_update_exam_not_access_rights"),"!"))}function YH(n,o){if(1&n&&(e.ynx(0),e.YNc(1,KH,46,35,"ng-container",12),e.ALo(2,"editPermission"),e.YNc(3,GH,4,3,"ng-template",null,13,e.W1O),e.BQk()),2&n){const t=e.MAs(4),i=e.oxw(2);e.xp6(1),e.Q6J("ngIf",e.xi3(2,2,i.examObj,"exam"))("ngIfElse",t)}}function $H(n,o){if(1&n&&e.YNc(0,YH,5,5,"ng-container",3),2&n){const t=e.oxw();e.Q6J("ngIf",t.examObj)}}function VH(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"azt-exam-info",141),e.NdJ("closeDialog",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.closeDialogExamInfo())})("goToQuestion",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.onHandleGoToQuestion(a))}),e.qZA()()}if(2&n){const t=e.oxw();let i;e.xp6(1),e.Q6J("startIndexQuestion",null!==(i=null==t.examObj?null:t.examObj.startQuestionIndex)&&void 0!==i?i:1)("data",t.dataExamInfo)}}let WH=(()=>{class n extends xe.Q{onWindowScroll(){let t=document.getElementById("np-name-root");window.pageYOffset>30?t?.classList.add("fixToolBar"):t?.classList.remove("fixToolBar"),this.downPageElement&&(this.fixToTopTop=this.downPageElement.nativeElement.getBoundingClientRect().top)}cancelEditQuest(){if(this.editorInsideTargetObj){if(this.editorInsideTargetObj.event.content)return void this.sAztDialogService.open(oz,{width:"600px",data:{content:this.sAztTranslateService.myTranslateInstant("lang_cms_common_confirm_cancel_edit")},restoreFocus:!1}).afterClosed().subscribe(i=>{i&&(this.editorInsideTargetObj=void 0)});this.editorInsideTargetObj=void 0}}startEditQuest(t){this.editorInsideTargetObj={quest:t,event:{}}}confirmProcessQuest(t){return new Promise(i=>{let a=this.commonService.myTranslateInstant("lang_auto_xay_ra_loi_trong_qua_trinh_xu_ly_hinh_anh_cua_de")??"";i(this.questionSaveService.convertQuestions([t],[],(r,s=a)=>{this.isLoadingSave=!1,this.showErrorSnack(s)}))})}onSaveEditOnlyQuest(){if(!this.editorInsideTargetObj?.out)return void this.errorStatusObj("Kh\xf4ng t\xecm th\u1ea5y d\u1eef li\u1ec7u c\u1ea7n l\u01b0u");const t=this.editorInsideTargetObj.out;this.isLoadingSave=!0;const i={id:t.id,groupId:t.groupInfo?.groupId??0,name:"C\xe2u h\u1ecfi t\u1ea1o t\u1eeb editor m\u1edbi",isImage:1,questionContent:t.content,answerMedia:t.help,questionText:t.questionText,answerType:t.answerType,answerConfig:JSON.stringify(t.answers.map(a=>({key:a.key,content:a.content}))),answerResult:JSON.stringify(t.answers.filter(a=>a.isTrue).map(a=>a.key)),tags:t.tags.map(a=>a.code??""),version:"4",mediaId:t.mediaId??0,isFixAns:t.isFixAns?1:0,groupType:t.groupType,mediaMeta:JSON.stringify({renderedStr:t.groupInfo?.groupContent})};this.confirmProcessQuest(i).then(()=>{this.questionService.apiQuestionsIdPut(t.id,{id:0,groupId:i.groupId??0,name:i.name,metadata:i.metadata,isImage:i.isImage,questionContent:i.questionContent,answerMedia:i.answerMedia,questionText:i.questionText,answerType:i.answerType??1,answerConfig:i.answerConfig,coordinates:i.coordinates,answerResult:i.answerResult,tags:i.tags,mediaId:i.mediaId??0,mediaMeta:"",attachments:i.attachments,version:i.version,isFixAns:i.isFixAns??0,groupType:i.groupType}).subscribe(r=>{1==r.success?(this.showSuccessSnack("lang_auto_chinh_sua_cau_hoi_thanh_cong"),document.location.reload()):this.showErrorSnack(r.message??"")})})}setValidationToQuestionId(t,i){this.invalidValidationQuestionIds.includes(t)?i||(this.invalidValidationQuestionIds=this.invalidValidationQuestionIds.filter(a=>a!=t)):i&&this.invalidValidationQuestionIds.push(t)}scrollDown(){let t=document.getElementById("azt-layout");t&&t.scrollIntoView()}openDialogWaring(t){this.commonService.getTranslate(t).subscribe(i=>{this.sAztDialogService.open(oh.C,{data:{isShow:!0,content:i},restoreFocus:!1,width:"500px"})})}setTag(t,i){t.tags=i?[i]:[]}applyTagAll(t){for(let a=this.questionObjs.indexOf(t)+1;a<this.questionObjs.length;a++)this.questionObjs[a].tags=t.tags}openDialogConfigExpandInfo(){this.sAztDialogService.open(Nw,{data:this.expandInfoParse,restoreFocus:!1}).afterClosed().subscribe(i=>{this.closeDialogConfigExpandInfo(i)})}closeDialogConfigExpandInfo(t){void 0!==t&&(this.expandInfoParse=t,this.handleSubmitSaveExam())}openDialogSpitPoint(){let t=this.trueFalseCounter(this.questionObjs),i=this.fillAnswerCounter(this.questionObjs),a=this.questionObjs.length-t-i,r={multipleQuestion:t,multiplePoint:parseFloat(this.maxPointCounter(this.questionObjs)).toFixed(4),fillQuestion:i,fillPoint:parseFloat(this.maxPointFillAnswerCounter(this.questionObjs)).toFixed(4),essayQuestion:a,essayPoint:parseFloat(this.essayPointCounter(this.questionObjs)).toFixed(4)};this.sAztDialogService.open(Mn,{data:r,width:"500px",restoreFocus:!1}).afterClosed().subscribe(l=>{l&&this.setPointTest(l)})}removeQuestion(t,i){this.sAztDialogService.open(Zw,{width:"750px",data:{questionObj:t,examObj:this.examObj,examId:this.examId,index:i},restoreFocus:!1,autoFocus:!1}).afterClosed().subscribe(s=>{s&&this.getData()})}showFeedbackQuestionDialog(t){this.sAztDialogService.open(Ct.V,{width:"750px",data:{questionObj:t,role:"TEACHER",applyType:"MATRIX_QUESTION"},restoreFocus:!1,autoFocus:!1}).afterClosed().subscribe(r=>{})}get invalidTypeQuestionConfig(){return this.questionObjs.filter(t=>null==t.scorePerQuestion||t.scorePerQuestion<0||!isFinite(t.scorePerQuestion??0)||!t.answerResult?.length&&this.answerTypeService.isFillAnswer(t))}goToQuestionAll(t,i=150){var a=document.getElementById("question_"+t);a&&a.scrollIntoView()}enableScroll(){window.onscroll=()=>{}}disableScroll(){let t=window.pageYOffset||document.documentElement.scrollLeft,i=window.pageXOffset||document.documentElement.scrollTop;window.onscroll=()=>{window.scrollTo(t,i)}}onShowFile(t){var i=this.sAztDialogService.open(al.q,{maxWidth:"100vw",maxHeight:"100vh",height:"100%",width:"100%",data:{fileOption:{url:t}},restoreFocus:!1});this.disableScroll(),i.afterClosed().subscribe(a=>{a&&this.enableScroll()})}goBack(){this.commonService.myNavigationBySpecialQueryString(this.backToLink)}showAllResultQuestion(){this.defaultShowResultMedia=!this.defaultShowResultMedia}convertData(t){for(var i=[],a=0;a<t.length;a++)t[a].content&&i.push(t[a].content);return JSON.stringify(i)}keepAnswerResult(t){for(var i=[],a=0;a<t.length;a++)i.push({id:t[a].id??0,answerResult:JSON.stringify(t[a].answerResult),scorePerQuestion:t[a].scorePerQuestion??0,tags:t[a].tags?.map(r=>r.code??"")});return i}handleSubmitSaveExam(){if(!0!==this.isLoadingSave)if(this.examObj&&this.permissionService.hasEditPermission("exam",this.examObj)){let t=!1,i=0;this.questionObjs.forEach(a=>{3!=a.answerType&&0==a.answerResult?.length?(this.setValidationToQuestionId(a.id,!0),t=!0,document.getElementById("question_"+i)?.scrollIntoView()):this.setValidationToQuestionId(a.id,!1),i++}),this.newAnswerList.length>0?this.newAnswerList.forEach(a=>{var r=this.questionObjs.filter(s=>s.id==a.id);null!=r&&r.length>0&&!this.answerTypeService.isFillAnswer(r[0])&&a.answerResultParse&&a.answerResultParse.length>0&&(a.answerResult=this.convertData(a.answerResultParse??[]),a.tags=r[0].tags?.map(s=>s.code??""))}):this.newAnswerList=this.keepAnswerResult(this.questionObjs),t?this.showErrorSnack("lang_auto_vui_long_nhap_dap_an_cho_cau_hoi"):(this.isLoadingSave=!0,this.waitDestroy(this.questionService.apiQuestionUpdateAnswerResultsWithExamNamePost({examId:this.examId,examName:this.nameExamInp.value,answerResults:this.newAnswerList,expandInfoObj:this.expandInfoParse}).subscribe(r=>{1==r.success?(this.newAnswerList=new Array,this.examObj&&(this.examObj.expandInfo=this.serializeJson(this.expandInfoParse)),this.successStatusObj("lang_cms_update_success",!0),this.isLoadingSave=!1):(this.newAnswerList=new Array,this.errorStatusObj(r.message??"",!0),this.isLoadingSave=!1)})))}else this.showErrorSnack("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay")}setAnswer(t){var i=this.newAnswerList.filter(l=>l.id==t.idQuestion);if(null!=t.index&&1==t.type){var a={id:t.idQuestion,answerResultParse:[{index:t.index,content:t.isImage?t.event.content:t.event.key}],scorePerQuestion:t.score,answerResult:"",tags:[]};if(i&&i.length>0)for(var r=0;r<this.newAnswerList.length;r++)this.newAnswerList[r].id==a.id&&(this.newAnswerList[r].answerResultParse?.push(a.answerResultParse?.[0]??{}),this.newAnswerList[r].answerResult=JSON.stringify(this.newAnswerList[r].answerResultParse));else a.answerResult=JSON.stringify(a.answerResultParse),this.newAnswerList.push(a);this.changeStatusAnswer(a,t.index,!0,t.isImage)}else if(null!=t.index&&2==t.type){var s={id:t.idQuestion,answerResult:JSON.stringify([{index:t.index,content:t.isImage?t.event.content:t.event.key}]),answerResultParse:[{index:t.index,content:t.isImage?t.event.content:t.event.key}],scorePerQuestion:t.score,tags:[]};if(i&&i.length>0)for(r=0;r<this.newAnswerList.length;r++)this.newAnswerList[r].id==s.id&&(this.newAnswerList[r].answerResult=s.answerResult,this.newAnswerList[r].answerResultParse=s.answerResultParse);else this.newAnswerList.push(s);this.changeStatusAnswer(s,t.index,!1,t.isImage)}}setAnswerType4(t){const i=(t.event.value||"").trim();if(i){var a=this.newAnswerList.filter(r=>r.id==t.questionId);this.questionObjs.forEach(r=>{if(r.id==t.questionId){i.split("|").forEach(c=>{r.answerResult?.push(c.trim())}),r.onChanges=!0;var s={id:r.id,answerResult:JSON.stringify(r.answerResult),scorePerQuestion:r.scorePerQuestion??0,tags:r.tags?.map(c=>c.code??"")};null!=a&&a.length>0?this.newAnswerList.forEach(c=>{c.id==t.questionId&&(c.answerResult=JSON.stringify(r.answerResult))}):this.newAnswerList.push(s)}})}this.questionObjs.forEach(r=>{this.setValidationToQuestionId(r.id,3!=r.answerType&&0==r.answerResult?.length)}),t.event.input.value=""}removeAnswerType4(t){var i=this.newAnswerList.filter(a=>a.id==t.questionId);this.questionObjs.forEach(a=>{if(a.id==t.questionId){var r=a.answerResult?.indexOf(t.answerObj)??0;if(r>=0){a.answerResult?.splice(r,1);var s={id:a.id,answerResult:JSON.stringify(a.answerResult),scorePerQuestion:a.scorePerQuestion??0,tags:a.tags?.map(l=>l.code??"")};null!=i&&i.length>0?this.newAnswerList.forEach(l=>{l.id==t.questionId&&(l.answerResult=JSON.stringify(a.answerResult))}):this.newAnswerList.push(s)}}})}changeStatusAnswer(t,i,a,r){a||this.questionObjs.forEach(s=>{if(s.id==t.id&&s.answers&&s.answers.length>0){for(var l=0;l<s.answers.length;l++)s.answers[l].isTrue=!1;s.answers[i].isTrue=!0}})}setPointTest(t){let i=Number(t?.multiplePoint)/this.countTrueFalseQuestion,a=Number(t?.fillPoint)/this.countFillAnswerQuestion,r=0;this.questionObjs.length-this.countTrueFalseQuestion-this.countFillAnswerQuestion>0&&(r=Number(t?.essayPoint)/(this.questionObjs.length-this.countTrueFalseQuestion-this.countFillAnswerQuestion));for(let s=0;s<this.questionObjs.length;s++){let l=!1;if(this.answerTypeService.isOneChoiceAnswer(this.questionObjs[s])){this.questionObjs[s].scorePerQuestion=Number(this.parseNumberFixed(i,8));for(let c=0;c<this.newAnswerList.length;c++)if(this.newAnswerList[c].id==this.questionObjs[s].id){this.newAnswerList[c].scorePerQuestion=Number(this.parseNumberFixed(i,8)),l=!0;break}}else if(this.answerTypeService.isEssayAnswer(this.questionObjs[s])){this.questionObjs[s].scorePerQuestion=Number(this.parseNumberFixed(r,8));for(let c=0;c<this.newAnswerList.length;c++)if(this.newAnswerList[c].id==this.questionObjs[s].id){this.newAnswerList[c].scorePerQuestion=Number(this.parseNumberFixed(r,8)),l=!0;break}}else if(this.answerTypeService.isFillAnswer(this.questionObjs[s])){this.questionObjs[s].scorePerQuestion=Number(this.parseNumberFixed(a,8));for(let c=0;c<this.newAnswerList.length;c++)if(this.newAnswerList[c].id==this.questionObjs[s].id){this.newAnswerList[c].scorePerQuestion=Number(this.parseNumberFixed(a,8)),l=!0;break}}if(!l){let c={id:this.questionObjs[s].id??0,answerResult:JSON.stringify(this.questionObjs[s].answerResult),scorePerQuestion:this.questionObjs[s].scorePerQuestion??0,tags:[]};this.newAnswerList.push(c)}}this.showSuccessSnack("lang_auto_chia_diem_thanh_cong")}setPointQuestion(){var t=this.form.getRawValue();if(t.totalQuestion<=this.countTrueFalseQuestion+this.countFillAnswerQuestion){this.invalidTotalQuestion=!1;var i=Number(t.maxScore)/t.totalQuestion;this.questionObjs.forEach(a=>{if(this.answerTypeService.isOneChoiceAnswer(a)||this.answerTypeService.isFillAnswer(a)){a.scorePerQuestion=i;for(var r=0;r<this.newAnswerList.length;r++)if(this.newAnswerList[r].id==a.id){this.newAnswerList[r].scorePerQuestion=i;break}}}),this.isDivinePointForQuestion=!0,this.showSuccessSnack("lang_auto_chia_diem_thanh_cong")}else this.invalidTotalQuestion=!0,this.showErrorSnack("lang_auto_so_cau_ban_nhap_da_vuot_qua_so_cau_trac_nghiem_trong_de_thi")}setScore(t,i){for(let r=0;r<this.questionObjs.length;r++){let s=isNaN(parseFloat(t.target.value))?void 0:parseFloat(t.target.value);if(this.questionObjs[r]&&this.questionObjs[r].id==i&&(this.questionObjs[r].scorePerQuestion=s,this.newAnswerList.length>0)){let l=!1;for(var a=0;a<this.newAnswerList.length;a++)if(this.newAnswerList[a].id==this.questionObjs[r].id){this.newAnswerList[a].scorePerQuestion=s??0,l=!0;break}if(!l){let c=Array.isArray(this.questionObjs[r].answerResult)&&this.questionObjs[r].answerResult?.length?this.questionObjs[r].answerResult?.[0]:"";this.newAnswerList.push({id:this.questionObjs[r].id??0,answerResult:JSON.stringify(this.questionObjs[r].answerResult),answerResultParse:[{content:c}],scorePerQuestion:parseFloat(t.target.value),tags:[]})}}}}trueFalseCounter(t){var i=0;return t.forEach(a=>{this.answerTypeService.isOneChoiceAnswer(a)&&i++}),i}fillAnswerCounter(t){var i=0;return t.forEach(a=>{this.answerTypeService.isFillAnswer(a)&&i++}),i}maxPointCounter(t){var i=0;return t.forEach(a=>{this.answerTypeService.isOneChoiceAnswer(a)&&(i+=a.scorePerQuestion??0)}),this.parseNumberFixed(i,4)}maxPointFillAnswerCounter(t){var i=0;return t.forEach(a=>{this.answerTypeService.isFillAnswer(a)&&(i+=a.scorePerQuestion??0)}),this.parseNumberFixed(i,4)}essayPointCounter(t){var i=0;return t.forEach(a=>{!this.answerTypeService.isOneChoiceAnswer(a)&&!this.answerTypeService.isFillAnswer(a)&&(i+=a.scorePerQuestion??0)}),i.toString()}parseNumberFixed(t,i){let a=Number(parseFloat(t.toString()).toFixed(i));return isNaN(a)?"0":parseFloat(t.toString()).toFixed(i)}convertErrsResultQuestions(){for(let t=0;t<this.questionObjs.length;t++)null===this.questionObjs[t].answerResult&&(this.questionObjs[t].answerResult=[])}changeAnswerResultStatus(t){var i=[];let a=0;return t.forEach(r=>{if(r.index=a,r.isRoleTeacher=!0,a++,r.answers&&r.answerResult)for(let s=0;s<r.answers.length;s++)r.answers[s].questionId=r.id,r.answers[s].checked=!1,r.answers[s].isTrue=!!this.checkAnswerResult(r.answers[s].key??"",r.answerResult);i.push(r)}),i}checkAnswerResult(t,i){var a=!1;for(var r in i){if(i[r]==t){a=!0;break}a=!1}return a}getQuestionCanFeedback(){let t=[];this.questionObjs.forEach(i=>{i.id&&!this.commonService.isExistInArray(t,i.id)&&t.push(i.id)}),this.waitDestroy(this.testMarketFeedbackService.apiTestMarketFeedbacksQuestionsGet(this.examId,t.join(",")).subscribe(i=>{if(1==i.success&&i.data?.objs?.length){let a=i.data?.objs??[];for(let r=0;r<this.questionObjs.length;r++)a.forEach(s=>{this.questionObjs[r].id==s.questionId&&(this.questionObjs[r].enableFeedback=s.allowFeedback)});this.successStatusObj(),setTimeout(()=>{this.scrollToQuestion()},200),setTimeout(()=>{this.scrollToQuestion()},500)}else this.errorStatusObj(i.message??"",!0)}))}goToOriginalQuestion(t){const i=`/admin/testbank/update-exam/${this.examObj?.categoryId??0}/${this.examObj?.id}`+(this.backToLink?"?backto="+encodeURIComponent(this.backToLink):"");this.myNavigationWithQueryString(`/admin/testbank/update-exam/${t.orgQuestionObj?.orgCategoryId}/${t.orgQuestionObj?.orgExamId}`,`?backto=${encodeURIComponent(i)}&questionId=${t.orgQuestionObj?.orgQuestionId}`)}getData(){this.initStatusObj(),this.waitDestroy(this.examService.apiExamGetQuestionsIdGet(this.examId,1).subscribe(i=>{if(1==i.success){this.examObj=i.data?.examObj,this.expandInfoParse=this.commonService.castJsonToObj(this.examObj?.expandInfo??"{}")??{},this.firstInGroupIndexes=this.commonService.myParseJson(this.examObj?.firstInGroupIndexes??"")??[],this.nameExamInp.setValue(this.examObj?.name??"");let a=this.commonService.castJsonToClassObjs(Le.v,JSON.stringify(i.data?.questionObjs));const r=this.changeAnswerResultStatus(a??[]);this.followerRenderQuest.setNumQuest(r.length);const s=i.data?.orgQuestionObjs??[];this.questionObjs=r;for(let l=0;l<this.questionObjs.length;l++)for(let c=0;c<s.length;c++)s[c].questionId===this.questionObjs[l].id&&(this.questionObjs[l].orgQuestionObj=s[c]);this.cropperData=this.commonService.myParseJson(this.examObj?.labelsUrl??"")??[],this.docxService.replaceCanvasBackgroundTS(this.questionObjs),this.countTrueFalseQuestion=this.trueFalseCounter(this.questionObjs),this.countFillAnswerQuestion=this.fillAnswerCounter(this.questionObjs),this.convertErrsResultQuestions(),setTimeout(()=>{this.getQuestionCanFeedback()},200),this.form=new h.cw({maxScore:new h.NI(this.maxPointCounter(this.questionObjs),{nonNullable:!0,validators:[h.kI.required]}),totalQuestion:new h.NI(this.trueFalseCounter(this.questionObjs),{nonNullable:!0,validators:[h.kI.required]})}),this.questionService.apiQuestionGetTagsGet().subscribe(l=>{1==l.success&&l.data&&(this.questionTags=l.data.objs??[])})}else this.showErrorSnack(i.message??"")}))}openExamInfoDialog(){this.dataExamInfo={isShow:!0,obj:this.questionObjs}}closeDialogExamInfo(){this.dataExamInfo.isShow=!1}toggleStartNextToQuestion(){this.nexToQuestionConf.showInput=!this.nexToQuestionConf.showInput}toggleTooltipNextToQuestion(t){this.nexToQuestionConf.showTooltip=t}actionNextToQuestion(){if(void 0===this.nexToQuestionConf.value)return;const t=document.getElementById("questViewBoxByLabel"+(this.nexToQuestionConf.value-1));t?t.scrollIntoView():this.showErrorSnack(this.commonService.myTranslateInstant("lang_auto_khong_tim_thay_cau_can_di_chuyen_den")??"")}scrollToQuestion(){const t=this.commonService.getMyQueryParam("questionId"),i=document.getElementById("question_view_"+t);i&&i.scrollIntoView()}onHandleGoToQuestion(t){let i=this.questionObjs?.[t-1]?.id??0;if(i){const a=document.getElementById("question_view_"+i);if(!a)return;a.scrollIntoView()}}ngOnInit(){this.waitDestroy((0,ne.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.cur_cateId=Number(this.commonService.getMyParam(this.activeRoute,"cat_id"))??0,this.examId=Number(this.commonService.getMyParam(this.activeRoute,"id"))??0;var t=this.commonService.getMyQueryParam("backto");this.backToLink=t||"/admin/testbank/document-management/0/"+(null!=this.cur_cateId?this.cur_cateId:0)+"/1",this.getData()})),this.commonService.translateMetaData({title:"lang_cms_test_update_exam_title",description:"lang_cms_test_update_exam_description",image:"lang_cms_test_image"}),super.ngOnInit()}constructor(t,i,a,r,s,l,c,u,m,p){super(),this.sAztDialogService=t,this.questionService=i,this.questionSaveService=a,this.examService=r,this.activeRoute=s,this.permissionService=l,this.docxService=c,this.answerTypeService=u,this.testMarketFeedbackService=m,this.sAztTranslateService=p,this.questionTags=[],this.questionObjs=[],this.followerRenderQuest=new mu.p,this.defaultShowResultMedia=!1,this.cur_cateId=0,this.examId=0,this.firstInGroupIndexes=[],this.nameExamInp=new h.NI("",{nonNullable:!0,validators:[Da._.noWhiteSpace]}),this.newAnswerList=[],this.isMobile=this.commonService.isMobileOrTable(),this.backToLink="",this.countTrueFalseQuestion=0,this.countFillAnswerQuestion=0,this.invalidTotalQuestion=!1,this.isDivinePointForQuestion=!1,this.separatorKeysCodes=[Bg.K5],this.selectable=!0,this.removable=!0,this.addOnBlur=!0,this.isLoadingSave=!1,this.dataExamInfo={isShow:!1},this.expandInfoParse={},this.nexToQuestionConf={value:1,showInput:!1,showTooltip:!1},this.invalidValidationQuestionIds=[],this.fixToTopTop=0,this.form=new h.cw({maxScore:new h.NI("",{nonNullable:!0,validators:[h.kI.required]}),totalQuestion:new h.NI(0,{nonNullable:!0,validators:[h.kI.required]})})}onChangeContentEditor(t){this.editorInsideTargetObj&&(this.editorInsideTargetObj.out=t,this.editorInsideTargetObj.event.content=!0)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(qi.C),e.Y36(un.aE),e.Y36(Ha),e.Y36(un.Oe),e.Y36(E.gz),e.Y36(pu.j),e.Y36(Vg.n),e.Y36(fr.i),e.Y36(Xp.nC),e.Y36(Dw.W))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-update-exam"]],viewQuery:function(t,i){if(1&t&&e.Gf(oH,5),2&t){let a;e.iGM(a=e.CRH())&&(i.downPageElement=a.first)}},hostBindings:function(t,i){1&t&&e.NdJ("scroll",function(r){return i.onWindowScroll(r)},!1,e.Jf7)},features:[e.qOj],decls:24,vars:21,consts:[[3,"headerTitle","headerBackToLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],["doneLoading",""],[4,"ngIf"],["xPosition","before"],["filterMenu","matMenu"],[1,"dropdown-menu","show","relative","w-64"],[1,"dropdown-content"],["azt-track-service","view-share-question-okOXhhqB2o",1,"dropdown-item","cursor-pointer",3,"click"],["azt-track-service","view-share-question-wBBhYqj6qo",1,"dropdown-item","cursor-pointer",3,"click"],["azt-track-service","view-share-question-gm18o_AtnP",1,"dropdown-item","cursor-pointer",3,"click"],[3,"currentStatusObj"],[4,"ngIf","ngIfElse"],["noPermission",""],["id","box-create-action",1,"simple-exam-box"],["id","down-page",1,"flex",2,"width","100%","margin","20px auto"],["downPage",""],["type","text",1,"inputMobile","form-control","mr-2",3,"formControl"],[3,"hidden","colorBackground"],[1,"flex",2,"justify-content","space-between","width","100%"],[1,"next-to-question","rounded"],["class","font-medium ml-1","style","width: auto",4,"ngIf"],["appOnlyNumber","","type","number",1,"input-control-fix-top","inputMobile","form-control",3,"min","ngModel","keyup.enter","ngModelChange","focus","focusout"],["azt-track-service","update-exam-Z2-pIpbAtb",1,"btn","btn-set-score","mr-1",2,"height","30px",3,"click"],[1,"flex"],["azt-track-service","update-exam-VpkBJtDTEr",1,"btn","btn-set-score","mr-2",3,"click"],["azt-track-service","update-exam-Z_5jMqg7e",1,"btn","btn-reload","mr-2",3,"click"],["azt-track-service","update-exam-SzWhHAfWm",1,"btn","btn-save",3,"disabled","click"],["azt-track-service","update-exam-SzWhHAfWm",1,"btn","btn-filter","ml-2",3,"matMenuTriggerFor"],["_ngcontent-ng-c2390875836","","xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-more-vertical","w-5","h-5","text-slate-500"],["_ngcontent-ng-c2390875836","","cx","12","cy","12","r","1"],["_ngcontent-ng-c2390875836","","cx","19","cy","12","r","1"],["_ngcontent-ng-c2390875836","","cx","5","cy","12","r","1"],[1,"container-fluid","mb-5","mt-3"],[1,"block-cols-12-full","m-0"],["id","box-left-file",1,"box-file",2,"width","100%"],["class","box-control text-center",4,"ngIf"],["class","flex","style","justify-content: space-between; align-items: center",4,"ngIf"],["class","p-2 mt-2 mb-2 alert alert-danger text-center","style","align-items: center",4,"ngIf"],["id","box-cropper-data","class","mt-3",4,"ngIf"],[1,"list-question-box","mt-3"],[1,"mb-1",3,"examObj"],["class","list-question-box-item mb-2","style","position: relative",3,"ngClass",4,"ngFor","ngForOf"],[3,"isScrollToTop"],[3,"content",4,"ngIf"],[1,"font-medium","ml-1",2,"width","auto"],[1,"box-control","text-center"],[1,"flex",2,"justify-content","space-between","align-items","center"],[1,"next-to-question","rounded","shadow","py-1","px-2",2,"display","inline-block"],[1,"font-medium",2,"width","auto"],["appOnlyNumber","","type","number",1,"inputMobile","form-control",2,"width","80px","text-align","left","padding","10px",3,"min","ngModel","keyup.enter","ngModelChange","focus","focusout"],["azt-track-service","update-exam-Z2-pIpbAtb",1,"btn","btn-next-to-question",3,"click"],["azt-track-service","update-exam-VpkBJtDTEr",1,"btn","btn-set-score",3,"click"],[1,"p-2","mt-2","mb-2","alert","alert-danger","text-center",2,"align-items","center"],[2,"vertical-align","bottom"],[1,"error-block"],[4,"ngFor","ngForOf"],["azt-track-service","update-exam-CZTBs2UHWQ",1,"clickable","mt-1","ml-1",3,"matTooltip","click"],["class","mt-1",4,"ngIf"],[1,"mt-1"],["id","box-cropper-data",1,"mt-3"],["azt-track-service","update-exam--rL2wEApLv",1,"text-primary",3,"click"],["class","mx-1","style","color: #6c6c6c",4,"ngIf"],[1,"mx-1",2,"color","#6c6c6c"],[1,"list-question-box-item","mb-2",2,"position","relative",3,"ngClass"],[1,"w-100",3,"id"],[3,"id"],[1,"edit-question-header","box"],[1,"edit-question-header-left"],["azt-track-service","update-exam-editor-SYwtBjaMF","class","btn btn-sm p-1 pl-5 pr-5","matTooltipShowDelay","200",3,"click",4,"ngIf"],["azt-track-service","update-exam-editor-ssFa83VHZf","class","btn btn-sm editor-btn-flex p-1 pl-5 pr-5 ml-1 btn-azt-primary","matTooltipShowDelay","200",3,"disabled","click",4,"ngIf"],[1,"edit-question-header-center"],[1,"edit-question-header-right"],[1,"edit-question-header-point"],[2,"font-weight","500",3,"ngClass"],["type","text","appOnlyNumber","",1,"point-input","form-control",3,"ngClass","decimal","value","input"],[1,"card","question-card","mb-0","relative","box-shadow-none"],[4,"ngIf","ngIfThen","ngIfElse"],["aztEditorQuest",""],["normalQuestStandalone",""],["class","card question-card","style","box-shadow: none",4,"ngIf"],["azt-track-service","update-exam-editor-SYwtBjaMF","matTooltipShowDelay","200",1,"btn","btn-sm","p-1","pl-5","pr-5",3,"click"],["azt-track-service","update-exam-editor-ssFa83VHZf","matTooltipShowDelay","200",1,"btn","btn-sm","editor-btn-flex","p-1","pl-5","pr-5","ml-1","btn-azt-primary",3,"disabled","click"],["name","save",1,"mr-1",2,"display","flex","width","12px !important"],["style","width: 16px !important; height: 16px !important","name","trash-2",3,"matTooltip","click",4,"ngIf"],[1,"edit-question-header-dr"],["class","fix-answer",3,"matTooltip",4,"ngIf"],["class","edit-question-header-dr",4,"ngIf"],[1,"edit-question-header-show-tags"],["class","box-service-type no-wrap",4,"ngIf"],["class","edit-question-header-tag",4,"ngIf"],["azt-track-service","update-exam-N7CP3yfuUp",1,"edit-question-header-content",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4",3,"ngClass"],["d","M4 13.5V4a2 2 0 0 1 2-2h8.5L20 7.5V20a2 2 0 0 1-2 2h-5.5"],["points","14 2 14 8 20 8"],["d","M10.42 12.61a2.1 2.1 0 1 1 2.97 2.97L7.95 21 4 22l.99-3.95 5.43-5.44Z"],["class","",4,"ngIf"],["style","width: 16px !important; height: 16px !important","name","alert-octagon",3,"matTooltip","click",4,"ngIf"],["reportQTakeTest","",4,"ngIf"],["name","alert-octagon",2,"width","16px !important","height","16px !important",3,"matTooltip","click"],["reportQTakeTest",""],["azt-track-service","update-exam-5Q2j_re4X","matTooltipShowDelay","200",1,"btn","btn-sm","p-1","w-6","h-6",3,"matTooltip","click"],["name","alert-octagon"],["name","trash-2",2,"width","16px !important","height","16px !important",3,"matTooltip","click"],["azt-track-service","update-exam-QNh0Wct6N","matTooltipShowDelay","200",1,"btn","btn-sm","p-1","w-6","h-6",3,"matTooltip","click"],["name","trash-2"],[1,"fix-answer",3,"matTooltip"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide"],["x1","12","y1","17","x2","12","y2","22"],["d","M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z"],[1,"box-service-type","no-wrap"],[1,"first-text"],[1,"tag-chip",3,"removed"],["matChipRemove",""],[2,"font-size","15px"],[1,"edit-question-header-tag"],[3,"matMenuTriggerFor"],["d","M9 5H2v7l6.29 6.29c.94.94 2.48.94 3.42 0l3.58-3.58c.94-.94.94-2.48 0-3.42L9 5Z"],["d","M6 9.01V9"],["d","m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19"],["tags","matMenu"],[1,"dropdown-menu","show","relative","w-56"],[1,"dropdown-divider","border-slate-200","dark:border-darkmode-400"],["azt-track-service","update-exam-CZZ0b_rCyN",1,"dropdown-item","w-full",3,"disabled","click"],["azt-track-service","update-exam-mQam8bsKT2",1,"dropdown-item",3,"click"],[1,""],["azt-track-service","update-exam-Va0keXkLs",1,"edit-question-header-content","flex","items-center",3,"click"],[1,"w-4","h-4","inline-block",3,"ngClass"],["name","file-clock"],[3,"question","changeContentEditor","changeImageEditor",4,"ngIf"],[3,"question","changeContentEditor","changeImageEditor"],[1,"mb-0","relative","overflow-hidden",3,"examObj","questionObj","follower","curQuestionIndex","isShowExplain","isInvalidValidation","setAnswerType4UpdateEmit","removeAnswerType4Emit","setAnswerOnUpdateEmit"],[1,"card","question-card",2,"box-shadow","none"],["class","card-body pt-1 pb-1 pl-0 pr-0 MW-800",4,"ngIf"],[1,"card-body","pt-1","pb-1","pl-0","pr-0","MW-800"],["alt","question media",1,"img-fluid","img_respon",3,"src"],[1,"contentDocx",2,"max-width","80%","margin-left","10%"],[3,"innerHtml"],[3,"content"],[1,"alert","alert-danger","flex-center-box"],[1,"title-no-permission"],[3,"startIndexQuestion","data","closeDialog","goToQuestion"]],template:function(t,i){if(1&t&&(e.TgZ(0,"teacher-layout",0),e.ALo(1,"mytranslate"),e.YNc(2,aH,1,1,"azt-loading-effect",1),e.YNc(3,$H,1,1,"ng-template",null,2,e.W1O),e.qZA(),e.YNc(5,VH,2,2,"div",3),e.TgZ(6,"mat-menu",4,5)(8,"div",6)(9,"ul",7)(10,"li")(11,"span",8),e.NdJ("click",function(){return i.openDialogConfigExpandInfo()}),e._uU(12),e.ALo(13,"mytranslate"),e.qZA()(),e.TgZ(14,"li")(15,"span",9),e.NdJ("click",function(){return i.showAllResultQuestion()}),e._uU(16),e.ALo(17,"mytranslate"),e.ALo(18,"mytranslate"),e.ALo(19,"mytranslate"),e.qZA()(),e.TgZ(20,"li")(21,"span",10),e.NdJ("click",function(){return i.openExamInfoDialog()}),e._uU(22),e.ALo(23,"mytranslate"),e.qZA()()()()()),2&t){const a=e.MAs(4);e.Q6J("headerTitle",e.lcZ(1,9,"lang_testbank_update_exam_exam"))("headerBackToLink",i.backToLink),e.xp6(2),e.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a),e.xp6(3),e.Q6J("ngIf",i.dataExamInfo.isShow),e.xp6(7),e.hij(" ",e.lcZ(13,11,"lang_core_exam_config_question_label")," "),e.xp6(4),e.AsE(" ",0==i.defaultShowResultMedia?e.lcZ(17,13,"lang_testbank_update_exam_show"):e.lcZ(18,15,"lang_testbank_update_exam_hide")," ",e.lcZ(19,17,"lang_testbank_update_exam_explain")," "),e.xp6(6),e.hij(" ",e.lcZ(23,19,"lang_auto_thong_tin_de_thi")," ")}},dependencies:[F.mk,F.sg,F.O5,qr.z2,qr.iO,qr.qH,Yo.Hw,Qi.VK,Qi.p6,Ai.gM,h.Fj,h.wV,h.JJ,h.qQ,h.On,h.oH,vi.l,Dt.Y,Fx,r_.M,Jw,Kw,t2.s,Gw,iH,wo._,_.Nh5,ye.JV,ye.QN,ye.Pf,ye.CL],styles:["#box-create-action[_ngcontent-%COMP%]   #resizeBox[_ngcontent-%COMP%]{margin-left:50%;width:10px;position:fixed;height:100vh;cursor:col-resize}#box-create-action[_ngcontent-%COMP%]   #resizeBox[_ngcontent-%COMP%]   .resizeContent[_ngcontent-%COMP%]{height:100vh;width:10px}#box-create-action[_ngcontent-%COMP%]   .inp-name-root[_ngcontent-%COMP%]{position:fixed;top:0;width:70%;left:15%;display:flex;justify-content:center;align-items:center;height:45px}#box-create-action[_ngcontent-%COMP%]   .inp-name-root[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;font-weight:500;color:#555;text-align:center;width:100%}#box-create-action[_ngcontent-%COMP%]   .box-control[_ngcontent-%COMP%]{justify-content:left;align-items:center}#box-create-action[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]{background:#4050b5;color:#fff;padding-left:20px;padding-right:20px;font-size:small;transition:all .5s}#box-create-action[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]:hover{background:#133864}#box-create-action[_ngcontent-%COMP%]   .btn-filter[_ngcontent-%COMP%]{color:#4050b5;background:white;padding-left:5px;padding-right:5px;font-size:small;transition:all .5s}#box-create-action[_ngcontent-%COMP%]   .btn-filter[_ngcontent-%COMP%]:hover{background:#e9e9e9}#box-create-action[_ngcontent-%COMP%]   .btn-set-score[_ngcontent-%COMP%]{text-transform:initial;background:#2361ae;color:#fff;font-size:small;transition:all .5s}#box-create-action[_ngcontent-%COMP%]   .btn-set-quest-label[_ngcontent-%COMP%]{text-transform:initial;background:#2361ae;color:#fff;font-size:small;transition:all .5s;margin-right:10px}#box-create-action[_ngcontent-%COMP%]   .btn-next-to-question[_ngcontent-%COMP%]{text-transform:initial;background:#2361ae;color:#fff;font-size:small;transition:all .5s}#box-create-action[_ngcontent-%COMP%]   .btn-set-score[_ngcontent-%COMP%]:hover, #box-create-action[_ngcontent-%COMP%]   .btn-set-quest-label[_ngcontent-%COMP%]:hover, #box-create-action[_ngcontent-%COMP%]   .btn-next-to-question[_ngcontent-%COMP%]:hover{background:#133864}#box-create-action[_ngcontent-%COMP%]   .btn-show[_ngcontent-%COMP%]{text-transform:initial;background:#fff;border:1px solid #eee;color:#000;font-size:small;transition:all .5s}#box-create-action[_ngcontent-%COMP%]   .btn-show[_ngcontent-%COMP%]{background:#eee}#box-create-action[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{background:#9e9e9e;color:#fff;padding:5px 20px;font-size:small;text-align:center;width:100%}#box-create-action[_ngcontent-%COMP%]   .btn-reload[_ngcontent-%COMP%]{background:#fff;color:#000;padding-left:20px;padding-right:20px;font-size:small;text-align:center;transition:all .5}#box-create-action[_ngcontent-%COMP%]   .btn-reload[_ngcontent-%COMP%]:hover{background:#eee}#box-create-action[_ngcontent-%COMP%]   .box-file[_ngcontent-%COMP%]{width:50%}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;color:#5c5c5c;overflow-y:auto}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview--blur_status[_ngcontent-%COMP%]{position:fixed;display:flex;width:100vw;height:100%;background:rgba(0,0,0,.7803921569);color:#fff;font-size:20px;font-weight:lighter;justify-content:center;align-items:center;cursor:progress;z-index:100;top:0;left:0}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview--blur_status-frame[_ngcontent-%COMP%]{height:85%;overflow-x:auto}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview--blur_status[_ngcontent-%COMP%]   .span-status[_ngcontent-%COMP%]{margin-top:10px;position:relative;animation:_ngcontent-%COMP%_animatefadeIn .3s}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .list-question-box[_ngcontent-%COMP%]{padding:0 20px 100px;background:rgb(244,244,244)}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .list-question-box-item[_ngcontent-%COMP%]{padding-top:20px}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .list-question-box-item__img[_ngcontent-%COMP%]{padding:10px 0;background:white;border-radius:5px 5px 0 0;cursor:ns-resize}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .list-question-box-item__img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;cursor:default}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .list-question-box-item__img_result[_ngcontent-%COMP%]{padding:10px;background:white;border-radius:0 0 5px 5px}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .list-question-box-item__img_result[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .list-question-box-item__control[_ngcontent-%COMP%]   .border-result[_ngcontent-%COMP%]{border-radius:0!important}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .list-question-box-item__control_flex[_ngcontent-%COMP%]{display:flex;align-items:center;background:#43bfb6;border-radius:0 0 5px 5px;color:#fff;padding:8px 20px;justify-content:space-between}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .list-question-box-item__control_flex[_ngcontent-%COMP%]   .btn-ans[_ngcontent-%COMP%]{background:white;height:25px;width:25px;border-radius:50%;display:inline-block;padding:0!important;margin-left:10px}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .list-question-box-item__control_flex[_ngcontent-%COMP%]   .btn-ans-result[_ngcontent-%COMP%]{color:#fff;background-color:#f39c12}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .list-question-box-item__control_flex[_ngcontent-%COMP%]   .btn-remove[_ngcontent-%COMP%]{background:red;color:#fff;box-shadow:inset 0 0 58px 8px #00000012}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .list-question-box-item__control_flex[_ngcontent-%COMP%]   .btn-edit[_ngcontent-%COMP%]{background:#f59c12;color:#fff}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .list-question-box-item__control_flex[_ngcontent-%COMP%]   .inp[_ngcontent-%COMP%]{margin-left:10px;width:50px;border:none;height:25px;background-color:#e0e0e0}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .list-question-box-item__control_flex[_ngcontent-%COMP%]   .inp-result[_ngcontent-%COMP%]{margin-left:10px;width:-moz-fit-content;width:fit-content;height:25px;padding:3px 10px;color:#949494;font-size:small}#box-create-action[_ngcontent-%COMP%]   #box-viewer-create-result[_ngcontent-%COMP%]{cursor:cell!important}#box-create-action[_ngcontent-%COMP%]   .pdf__view[_ngcontent-%COMP%]{display:block;border:none}#box-create-action[_ngcontent-%COMP%]   .box-control-crop[_ngcontent-%COMP%]{position:absolute;top:-15px;left:10px;z-index:10}#box-create-action[_ngcontent-%COMP%]   .box-control-crop-btn[_ngcontent-%COMP%]{width:25px;height:25px;display:flex;justify-content:center;align-items:center}#box-create-action[_ngcontent-%COMP%]   .crop_action[_ngcontent-%COMP%]{position:fixed;z-index:10;background:#e2e2e2;padding:9px 5px;border-radius:0 0 5px;display:grid}#box-create-action[_ngcontent-%COMP%]   .crop_preview[_ngcontent-%COMP%]{position:fixed;z-index:3;background:gainsboro;display:flex;justify-content:center;align-items:center;padding:10px}#box-create-action[_ngcontent-%COMP%]   .crop_preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;cursor:all-scroll}#box-create-action[_ngcontent-%COMP%]   .d-none[_ngcontent-%COMP%]{display:none!important}#box-create-action[_ngcontent-%COMP%]   .link-merge-image-control[_ngcontent-%COMP%]{margin-bottom:10px;text-align:center;margin-top:-10px}#box-create-action[_ngcontent-%COMP%]   .link-merge-image-control[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{cursor:pointer}#box-create-action[_ngcontent-%COMP%]   .link-merge-image-control[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]:hover{color:#f06292}#box-create-action[_ngcontent-%COMP%]   .cursor-all-scroll[_ngcontent-%COMP%]{cursor:all-scroll!important}#box-create-action[_ngcontent-%COMP%]   .btn-save-fixed[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:45px}@keyframes _ngcontent-%COMP%_animatefadeIn{0%{top:0;opacity:0}to{top:0;opacity:1}}#box-create-action[_ngcontent-%COMP%]   .box-file[_ngcontent-%COMP%]   .box-control[_ngcontent-%COMP%]{display:flex;justify-content:left;align-items:center}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]{background:inherit;background-color:#fff;border-width:1px;border-style:solid;border-color:#d6d6d6;border-radius:5px;box-shadow:none;height:300px;display:flex}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_drop[_ngcontent-%COMP%]{cursor:pointer;width:100%;display:flex;justify-content:center;align-items:center;color:#5c5c5c}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_drop--input[_ngcontent-%COMP%]{text-align:center}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .is-dragover[_ngcontent-%COMP%]{background:#e4e4e4!important}#box-create-action[_ngcontent-%COMP%]   .box-file-content--viewer[_ngcontent-%COMP%]{overflow:auto;position:relative;width:100%}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item[_ngcontent-%COMP%]:first-child{padding-top:0!important}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box[_ngcontent-%COMP%]{background:rgb(244,244,244)}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item[_ngcontent-%COMP%]{padding-top:20px}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item__img[_ngcontent-%COMP%]{padding:5px 0;background:white;border-radius:5px 5px 0 0;cursor:ns-resize;border:1px solid #2361ae}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item__img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;cursor:default}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item__img_result[_ngcontent-%COMP%]{padding:5px 0;cursor:ns-resize;background:white;border-radius:0 0 5px 5px;border:1px solid #2361ae}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item__img_result[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;cursor:default}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item__control[_ngcontent-%COMP%]   .border-result[_ngcontent-%COMP%]{border-radius:0!important}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item__control_flex[_ngcontent-%COMP%]{display:flex;align-items:center;background:#2361ae;border-radius:0 0 5px 5px;color:#fff;padding:8px 20px;justify-content:space-between}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item__control_flex[_ngcontent-%COMP%]   .btn-ans[_ngcontent-%COMP%]{background:white;height:25px;width:25px;border-radius:50%;display:inline-block;padding:0!important;margin-left:10px}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item__control_flex[_ngcontent-%COMP%]   .btn-ans-result[_ngcontent-%COMP%]{color:#fff;background-color:#f39c12}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item__control_flex[_ngcontent-%COMP%]   .btn-remove[_ngcontent-%COMP%]{background:red;color:#fff;box-shadow:inset 0 0 58px 8px #00000012}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item__control_flex[_ngcontent-%COMP%]   .btn-edit[_ngcontent-%COMP%]{background:#f59c12;color:#fff}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item__control_flex[_ngcontent-%COMP%]   .inp[_ngcontent-%COMP%]{margin-left:10px;width:50px;border:none;height:25px;background-color:#e0e0e0}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item__control_flex[_ngcontent-%COMP%]   .inp-result[_ngcontent-%COMP%]{margin-left:10px;width:-moz-fit-content;width:fit-content;height:25px;padding:3px 10px;color:#949494;font-size:small}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item[_ngcontent-%COMP%]   .link-merge-image-control[_ngcontent-%COMP%]{margin-bottom:10px;text-align:center;margin-top:-10px}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item[_ngcontent-%COMP%]   .link-merge-image-control[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{cursor:pointer}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item[_ngcontent-%COMP%]   .link-merge-image-control[_ngcontent-%COMP%]:hover{color:#f06292}#box-create-action[_ngcontent-%COMP%]   .inp-name-root[_ngcontent-%COMP%]{position:fixed;z-index:110;top:0;left:15%;display:flex;justify-content:center;align-items:center;height:45px}#box-create-action[_ngcontent-%COMP%]   .inp-name-root[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-width:1px;border-style:solid;border-radius:5px;border-color:#d6d6d6;font-weight:500;font-size:13px;text-align:center;width:50%;padding:4px}#box-create-action[_ngcontent-%COMP%]   .inp-name-root[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus-visible{outline:none}.inputMobile[_ngcontent-%COMP%]{border-width:1px;border-style:solid;border-radius:5px;font-weight:500;font-size:13px;text-align:center;width:100%;padding:4px;height:38px}.inputMobile[_ngcontent-%COMP%]:focus-visible{outline:none}.fixToolBar[_ngcontent-%COMP%]{width:100%!important;left:0!important;background-color:#fff}.fixToolBar[_ngcontent-%COMP%]   .marginInput[_ngcontent-%COMP%]{width:70%!important;margin-left:5%!important}.fixToolBar[_ngcontent-%COMP%]   .btn-save-fixed[_ngcontent-%COMP%]{right:5%!important}.btn-primary-icon[_ngcontent-%COMP%]{transition:all .3s}.btn-primary-icon[_ngcontent-%COMP%]:hover{background:#000}.ng-binding[_ngcontent-%COMP%]{font-size:24px;font-weight:400}.no-answered[_ngcontent-%COMP%]{background:#273044}.dot-example[_ngcontent-%COMP%]   .__choice[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:50%;border:1px solid #ffd300;background-color:#ffd300;display:inline-flex}.answer-box[_ngcontent-%COMP%]{background:#2361ae;color:#fff;border-bottom-left-radius:3px;border-bottom-right-radius:3px;padding:8px 20px;max-width:100%;display:flex!important;flex-wrap:wrap;justify-content:space-between}.chip_question[_ngcontent-%COMP%]{background-color:#ffd300;color:#fff!important}.point-input[_ngcontent-%COMP%]{border-width:1px;border-style:solid;border-radius:5px;font-weight:500;font-size:13px;text-align:center;width:60px;padding:4px;margin-left:5px}input[_ngcontent-%COMP%]::-webkit-outer-spin-button, input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.on-change[_ngcontent-%COMP%]{border:3px solid #25df5a}.btn-detail[_ngcontent-%COMP%]{color:#2361ae}.btn-detail[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#2361ae}@media (max-width: 768px){.answer-box[_ngcontent-%COMP%]{justify-content:center}.list-question-box[_ngcontent-%COMP%]{margin-bottom:30px;scrollbar-width:none;-ms-overflow-style:none}.list-question-box[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.list-question-box[_ngcontent-%COMP%]   .point-input[_ngcontent-%COMP%]{width:60px}}.error-border[_ngcontent-%COMP%]{border:1px solid #ff4757!important}.error-border[_ngcontent-%COMP%]:focus{border:1px solid #ff4757!important}.edit-question-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:40px;padding:10px;border-radius:5px;margin-bottom:-8px}.edit-question-header-right[_ngcontent-%COMP%]{display:flex;align-items:center}.edit-question-header-tag[_ngcontent-%COMP%], .edit-question-header-content[_ngcontent-%COMP%]{padding:5px}.edit-question-header-tag[_ngcontent-%COMP%]:hover, .edit-question-header-content[_ngcontent-%COMP%]:hover{background:rgba(35,97,174,.1803921569);border-radius:5px}.edit-question-header-dr[_ngcontent-%COMP%]{color:#607d8b;margin:0 10px}.edit-question-header-content[_ngcontent-%COMP%]{cursor:pointer}.edit-question-header-point[_ngcontent-%COMP%]{text-align:right}.first-text[_ngcontent-%COMP%]{display:flex;align-items:center}.first-text[_ngcontent-%COMP%]   marquee[_ngcontent-%COMP%]{width:100px}.first-text[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;margin:0;padding:0;width:100%;display:flex;justify-content:center;align-items:center}.tag-chip[_ngcontent-%COMP%]{min-height:20px;font-size:12px}.fix-group[_ngcontent-%COMP%]{position:absolute;width:80px;height:50px;top:-21px;left:-36px;background-color:#d63031d4;transform:rotate(-45deg);color:#fff;font-size:9px;text-align:center;padding-top:30px}.justify-btn-block[_ngcontent-%COMP%]{justify-content:flex-end}@media screen and (max-width: 768px){.justify-btn-block[_ngcontent-%COMP%]{margin-top:5px;justify-content:flex-start}}.next-to-question[_ngcontent-%COMP%]{display:flex;align-items:center}.next-to-question[_ngcontent-%COMP%]   .btn-next-to-question-cancel[_ngcontent-%COMP%]{margin-left:10px}.next-to-question[_ngcontent-%COMP%]   .inputMobile[_ngcontent-%COMP%]{margin-right:10px}.next-to-question[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:100px;margin-right:10px}@media screen and (max-width: 500px){.edit-question-header-tag[_ngcontent-%COMP%], .edit-question-header-content[_ngcontent-%COMP%]{padding:5px 0}.btn-reload[_ngcontent-%COMP%], .btn-save[_ngcontent-%COMP%]{padding:.35rem .75rem!important}.btn-filter[_ngcontent-%COMP%]{padding-top:.35rem!important;padding-bottom:.35rem!important}.next-to-question[_ngcontent-%COMP%]{background:none!important}.inputMobile[_ngcontent-%COMP%], .btn-set-score[_ngcontent-%COMP%]{height:33px!important}.edit-question-header-dr[_ngcontent-%COMP%]{margin:0 9px}}.box-shadow-none[_ngcontent-%COMP%]{box-shadow:none}.editable[_ngcontent-%COMP%]   .question-card[_ngcontent-%COMP%]{position:relative;border:1.5px solid #1e40b0;box-shadow:#0000003d 0 3px 8px;padding:30px 0 0;background:#fff;margin:10px 0;border-radius:5px}.edit-question-header-left[_ngcontent-%COMP%], .editor-btn-flex[_ngcontent-%COMP%]{display:flex;align-items:center}.input-control-fix-top[_ngcontent-%COMP%]{width:70px;text-align:left;padding:10px;height:30px;margin-right:-1px}"]}),n})();var Ww=I(42242);let l2=(()=>{class n extends qn.jg{set selectedItem(t){this.internalSelectedItem=t}get selectedItem(){return this.internalSelectedItem}getText(t){return this.internalSelectedItem?this.internalSelectedItem.text:"Ch\u1ecdn khung ki\u1ebfn th\u1ee9c"}}return n.\u0275fac=function(){let o;return function(i){return(o||(o=e.n5z(n)))(i||n)}}(),n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function XH(n,o){1&n&&(e.O4$(),e.TgZ(0,"svg",17),e._UZ(1,"path",18),e.qZA())}function eJ(n,o){1&n&&(e.O4$(),e.TgZ(0,"svg",19),e._UZ(1,"path",20),e.qZA())}function tJ(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"i",14),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().onCollapseExpand;return e.KtG(a())}),e.YNc(1,XH,2,0,"svg",15),e.YNc(2,eJ,2,0,"svg",16),e.qZA()}if(2&n){const t=e.oxw().item;e.Q6J("ngSwitch",t.collapsed),e.xp6(1),e.Q6J("ngSwitchCase",!0),e.xp6(1),e.Q6J("ngSwitchCase",!1)}}const Xw=function(n){return{"text-pending":n}};function nJ(n,o){if(1&n&&(e.O4$(),e.TgZ(0,"svg",21),e._UZ(1,"path",22)(2,"path",23),e.qZA()),2&n){const t=e.oxw().item,i=e.oxw();e.Q6J("ngClass",e.VKq(1,Xw,i.dropdownTreeviewSelectI18n.selectedItem.value==(null==t?null:t.value)))}}function iJ(n,o){if(1&n){const t=e.EpF();e.YNc(0,tJ,3,3,"i",9),e.TgZ(1,"label",10),e.NdJ("click",function(){const a=e.CHM(t),r=a.item,s=a.onCollapseExpand,l=e.oxw();return e.KtG(r.children&&r.children.length?s():l.select(r))}),e.YNc(2,nJ,3,3,"svg",11),e.TgZ(3,"span",12),e._UZ(4,"azt-dynamic-hook",13),e.qZA()()}if(2&n){const t=o.item,i=e.oxw();let a;e.Q6J("ngIf",t.children),e.xp6(2),e.Q6J("ngIf",null==t?null:t.value),e.xp6(1),e.Q6J("ngClass",e.VKq(4,Xw,i.dropdownTreeviewSelectI18n.selectedItem.value==(null==t?null:t.value))),e.xp6(1),e.Q6J("content",null!==(a=t.text)&&void 0!==a?a:"")}}function oJ(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",26)(1,"input",27),e.NdJ("ngModelChange",function(a){e.CHM(t);const r=e.oxw(2);return e.KtG(r.filterText=a)})("ngModelChange",function(a){e.CHM(t);const r=e.oxw(2);return e.KtG(r.search(a))}),e.qZA()()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("placeholder",t.filterPlaceholder)("ngModel",t.filterText)}}function aJ(n,o){1&n&&(e.O4$(),e.TgZ(0,"svg",33),e._UZ(1,"path",34)(2,"path",35)(3,"path",36),e.qZA())}function rJ(n,o){1&n&&(e.O4$(),e.TgZ(0,"svg",37),e._UZ(1,"path",38)(2,"path",39)(3,"path",40),e.qZA())}function sJ(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"label",29),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2).onCollapseExpand;return e.KtG(a())}),e.TgZ(1,"i",30),e.YNc(2,aJ,4,0,"svg",31),e.YNc(3,rJ,4,0,"svg",32),e.qZA()()}if(2&n){const t=e.oxw(2).item;e.xp6(1),e.Q6J("ngSwitch",t.collapsed),e.xp6(1),e.Q6J("ngSwitchCase",!0),e.xp6(1),e.Q6J("ngSwitchCase",!1)}}function lJ(n,o){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,sJ,4,3,"label",28),e.qZA()),2&n){const t=e.oxw().config;e.xp6(1),e.Q6J("ngIf",t.hasCollapseExpand)}}function cJ(n,o){if(1&n&&(e.YNc(0,oJ,2,2,"div",24),e.YNc(1,lJ,2,1,"div",25)),2&n){const t=o.config;e.Q6J("ngIf",t.hasFilter),e.xp6(1),e.Q6J("ngIf",t.hasCollapseExpand)}}function uJ(n,o){1&n&&(e.TgZ(0,"div",41),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"long_core_khong_tim_thay_khung_kien_thuc")," "))}let dJ=(()=>{class n extends mt.e{constructor(t,i,a,r){super(r,a),this.i18n=t,this.sAztQuestionKnowledgeUnitService=i,this.dialogRef=a,this.data=r,this.filterPlaceholder=this.commonService.myTranslateInstant("lang_auto_tim_kiem")??"T\xecm ki\u1ebfm",this.filterText="",this.config=qn.VF.create({hasAllCheckBox:!1,hasCollapseExpand:!1,hasFilter:!0}),this.items=r.items,this.value=r.value,this.itemsNew=this.items,this.dropdownTreeviewSelectI18n=t}search(t){this.itemsNew=this.filterTreeByText(this.items,t)}filterTreeByText(t,i){return t.map(a=>this.filterTree(a,i,"children")).filter(a=>null!==a)}filterTree(t,i,a){let r=t.text.toLowerCase();if(r=this.commonService.removeSpecialStringInSearch(r),r=this.commonService.convertVietnameseToEnglish(r),i=i.toLowerCase(),i=this.commonService.removeSpecialStringInSearch(i),i=this.commonService.convertVietnameseToEnglish(i),r.includes(i))return t;const l=(t[a]??[]).map(c=>this.filterTree(c,i,"children")).filter(c=>null!==c);return l.length>0?(t.children=l,t):null}select(t){t.children||this.selectItem(t)}updateSelectedItem(){(0,du.isNil)(this.items)||this.selectItem(qn.xe.findItemInList(this.items,this.value))}selectItem(t){this.dropdownTreeviewSelectI18n.selectedItem!==t&&(this.dropdownTreeviewSelectI18n.selectedItem=t,this.dropdownTreeviewComponent&&this.dropdownTreeviewComponent.onSelectedChange([t]),t&&this.value!==t.value&&(this.value=t.value,this.dialogRef.close(t.value)))}ngOnInit(){super.ngOnInit(),this.updateSelectedItem()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(qn.SL),e.Y36(Ul),e.Y36(U.so,8),e.Y36(U.WI,8))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ngx-dropdown-treeview-select"]],viewQuery:function(t,i){if(1&t&&e.Gf(qn.no,5),2&t){let a;e.iGM(a=e.CRH())&&(i.dropdownTreeviewComponent=a.first)}},features:[e._Bn([{provide:qn.SL,useClass:l2}]),e.qOj],decls:12,vars:8,consts:[["class","ng-scrollbar"],["itemTemplate",""],["headerTemplate",""],["id","azt-question-knowledge",1,"box","h-full"],[2,"height","calc(var(--vh, 1vh) * 90 - 62px)"],[3,"headerTemplate","config","items","itemTemplate"],["class","box-not-found font-medium",4,"ngIf"],[1,"text-right","border-t","border-slate-200","dark:border-darkmode-400","p-3"],["azt-track-service","dropdown-treeview-ag1D5uWGg",1,"btn","btn-secondary","w-24",3,"click"],["aria-hidden","true",3,"ngSwitch","click",4,"ngIf"],["azt-track-service","dropdown-treeview-41U5OMzhv",1,"form-check-label",2,"line-height","1.5",3,"click"],["class","lucide lucide-send-horizontal w-4 h-4 flex-none mr-1","style","width: 14px !important; height: 14px !important","xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","3.6","stroke-linecap","round","stroke-linejoin","round",3,"ngClass",4,"ngIf"],[3,"ngClass"],[3,"content"],["aria-hidden","true",3,"ngSwitch","click"],["width","0.8rem","height","0.8rem","viewBox","0 0 16 16","class","bi bi-caret-right-fill","fill","currentColor","xmlns","http://www.w3.org/2000/svg",4,"ngSwitchCase"],["width","0.8rem","height","0.8rem","viewBox","0 0 16 16","class","bi bi-caret-down-fill","fill","currentColor","xmlns","http://www.w3.org/2000/svg",4,"ngSwitchCase"],["width","0.8rem","height","0.8rem","viewBox","0 0 16 16","fill","currentColor","xmlns","http://www.w3.org/2000/svg",1,"bi","bi-caret-right-fill"],["d","M12.14 8.753l-5.482 4.796c-.646.566-1.658.106-1.658-.753V3.204a1 1 0 0 1 1.659-.753l5.48 4.796a1 1 0 0 1 0 1.506z"],["width","0.8rem","height","0.8rem","viewBox","0 0 16 16","fill","currentColor","xmlns","http://www.w3.org/2000/svg",1,"bi","bi-caret-down-fill"],["d","M7.247 11.14L2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","3.6","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-send-horizontal","w-4","h-4","flex-none","mr-1",2,"width","14px !important","height","14px !important",3,"ngClass"],["d","m3 3 3 9-3 9 19-9Z"],["d","M6 12h16"],["class","flex w-full pt-3 pl-3 pr-3",4,"ngIf"],[4,"ngIf"],[1,"flex","w-full","pt-3","pl-3","pr-3"],["type","text",1,"form-control",3,"placeholder","ngModel","ngModelChange"],["azt-track-service","dropdown-treeview-KjWDc2NVkX","class","float-right",3,"click",4,"ngIf"],["azt-track-service","dropdown-treeview-KjWDc2NVkX",1,"float-right",3,"click"],["aria-hidden","true",3,"ngSwitch"],["width","1em","height","1em","viewBox","0 0 16 16","class","bi bi-arrows-angle-expand","fill","currentColor","xmlns","http://www.w3.org/2000/svg",4,"ngSwitchCase"],["width","1em","height","1em","viewBox","0 0 16 16","class","bi bi-arrows-angle-contract","fill","currentColor","xmlns","http://www.w3.org/2000/svg",4,"ngSwitchCase"],["width","1em","height","1em","viewBox","0 0 16 16","fill","currentColor","xmlns","http://www.w3.org/2000/svg",1,"bi","bi-arrows-angle-expand"],["fill-rule","evenodd","d","M1.5 10.036a.5.5 0 0 1 .5.5v3.5h3.5a.5.5 0 0 1 0 1h-4a.5.5 0 0 1-.5-.5v-4a.5.5 0 0 1 .5-.5z"],["fill-rule","evenodd","d","M6.354 9.646a.5.5 0 0 1 0 .708l-4.5 4.5a.5.5 0 0 1-.708-.708l4.5-4.5a.5.5 0 0 1 .708 0zm8.5-8.5a.5.5 0 0 1 0 .708l-4.5 4.5a.5.5 0 0 1-.708-.708l4.5-4.5a.5.5 0 0 1 .708 0z"],["fill-rule","evenodd","d","M10.036 1.5a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 .5.5v4a.5.5 0 1 1-1 0V2h-3.5a.5.5 0 0 1-.5-.5z"],["width","1em","height","1em","viewBox","0 0 16 16","fill","currentColor","xmlns","http://www.w3.org/2000/svg",1,"bi","bi-arrows-angle-contract"],["fill-rule","evenodd","d","M9.5 2.036a.5.5 0 0 1 .5.5v3.5h3.5a.5.5 0 0 1 0 1h-4a.5.5 0 0 1-.5-.5v-4a.5.5 0 0 1 .5-.5z"],["fill-rule","evenodd","d","M14.354 1.646a.5.5 0 0 1 0 .708l-4.5 4.5a.5.5 0 1 1-.708-.708l4.5-4.5a.5.5 0 0 1 .708 0zm-7.5 7.5a.5.5 0 0 1 0 .708l-4.5 4.5a.5.5 0 0 1-.708-.708l4.5-4.5a.5.5 0 0 1 .708 0z"],["fill-rule","evenodd","d","M2.036 9.5a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-1 0V10h-3.5a.5.5 0 0 1-.5-.5z"],[1,"box-not-found","font-medium"]],template:function(t,i){if(1&t&&(e.YNc(0,iJ,5,6,"ng-template",0,1,e.W1O),e.YNc(2,cJ,2,2,"ng-template",null,2,e.W1O),e.TgZ(4,"div",3)(5,"div",4),e._UZ(6,"ngx-treeview",5),e.YNc(7,uJ,3,3,"div",6),e.qZA(),e.TgZ(8,"div",7)(9,"button",8),e.NdJ("click",function(){return i.dialogRef.close()}),e._uU(10),e.ALo(11,"mytranslate"),e.qZA()()()),2&t){const a=e.MAs(1),r=e.MAs(3);e.xp6(6),e.Q6J("headerTemplate",r)("config",i.config)("items",i.itemsNew)("itemTemplate",a),e.xp6(1),e.Q6J("ngIf",!i.itemsNew.length),e.xp6(3),e.hij(" ",e.lcZ(11,6,"lang_button_close")," ")}},dependencies:[F.mk,F.O5,F.RF,F.n9,h.Fj,h.JJ,h.On,qn.GA,bm.O,ye.JV],styles:[".form-check-label[_ngcontent-%COMP%]:hover{color:#6495ed}.box-not-found[_ngcontent-%COMP%]{justify-content:center;display:flex;align-items:center;min-height:calc(var(--vh, 1vh) * 90 - 112px);width:100%}"]}),n})();var ey=I(64728);function mJ(n,o){1&n&&(e.TgZ(0,"div",4)(1,"span",5),e._UZ(2,"azt-loading-ui"),e.qZA()())}function pJ(n,o){1&n&&(e.TgZ(0,"span",8),e._UZ(1,"azt-loading-ui"),e.qZA())}function hJ(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"button",6),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.openDropdownTreeDialog())}),e._uU(1),e.YNc(2,pJ,2,0,"span",7),e.qZA()}if(2&n){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.buttonLable," "),e.xp6(1),e.Q6J("ngIf",t.statusObj.loading)}}function AJ(n,o){if(1&n&&(e.TgZ(0,"div",1),e.YNc(1,mJ,3,0,"div",2),e.YNc(2,hJ,3,2,"ng-template",null,3,e.W1O),e.qZA()),2&n){const t=e.MAs(3),i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.loadingSuggest)("ngIfElse",t)}}let ty=(()=>{class n extends xe.Q{constructor(t,i,a,r,s){super(),this.dropdownTreeviewSelectI18n=t,this.aiService=i,this.questionService=a,this.sAztDialogService=r,this.sAztQuestionKnowledgeUnitService=s,this.loadingSuggest=!1,this.value=0,this.buttonLable=""}onValueChange(t){t&&(this.setValue(t),this.waitDestroy(this.questionService.apiQuestionUpdateQuestionKnowledgePost({questionId:this.questionId,knowledgeId:t}).subscribe(i=>{i?this.showSuccessSnack("lang_update_question_knowledge_successfully"):this.showErrorSnack("lang_update_question_knowledge_unsuccessfully")})))}guessKnowledgeUnit(){this.loadingSuggest=!0,this.aiService.apiAiPredictQuestionKnowledgePost({text:this.questionContent??"",levelId:this.levelId,subjectId:this.subjectId}).subscribe({next:t=>{t.data&&null!=t.data.knowledgeId&&this.setValue(t.data.knowledgeId),this.loadingSuggest=!1},error:t=>{this.loadingSuggest=!1}})}openDropdownTreeDialog(){this.initStatusObj();const t=this.sAztDialogService.open(dJ,{data:{items:this.sAztQuestionKnowledgeUnitService.knowledgeUnitObjs,value:this.value},width:"100%",maxWidth:this.isMobileDevice?"100vw":"80vw",height:this.isMobileDevice?"100vh":"90vh",restoreFocus:!1});this.stopStatusObj(),t.afterClosed().subscribe(i=>{i&&(this.setValue(i),this.onValueChange(i))})}setValue(t){this.value=t,this.buttonLable=qn.xe.findItemInList(this.sAztQuestionKnowledgeUnitService.knowledgeUnitObjs,t).text??this.commonService.myTranslateInstant("long_core_chon_khung_kien_thuc")??"Ch\u1ecdn khung ki\u1ebfn th\u1ee9c"}ngOnInit(){this.knowledgeId?this.setValue(this.knowledgeId??0):this.guessKnowledgeUnit(),super.ngOnInit()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(l2),e.Y36(ey.p),e.Y36(un.aE),e.Y36(qi.C),e.Y36(Ul))},n.\u0275cmp=e.Xpm({type:n,selectors:[["azt-question-knowledge-unit"]],inputs:{knowledgeId:"knowledgeId",questionContent:"questionContent",questionId:"questionId",levelId:"levelId",subjectId:"subjectId"},features:[e._Bn([{provide:qn.SL,useClass:l2}]),e.qOj],decls:1,vars:1,consts:[["class","treeview-dd",4,"ngIf"],[1,"treeview-dd"],["class","text-center",4,"ngIf","ngIfElse"],["doneLoad",""],[1,"text-center"],[1,"w-6","h-6","inline-block","mr-2"],[1,"btn","flex","items-center","w-full",3,"click"],["class","w-4 h-4 inline-block ml-3",4,"ngIf"],[1,"w-4","h-4","inline-block","ml-3"]],template:function(t,i){1&t&&e.YNc(0,AJ,4,2,"div",0),2&t&&e.Q6J("ngIf",i.sAztQuestionKnowledgeUnitService.isShowKnowledgeUnit)},dependencies:[F.O5,wi.n],styles:["label[_ngcontent-%COMP%]{margin-bottom:0;cursor:pointer}.bi[_ngcontent-%COMP%]{cursor:pointer;margin-right:.3rem}"]}),n})();const _J=["downPage"];function fJ(n,o){if(1&n&&e._UZ(0,"azt-loading-effect",11),2&n){const t=e.oxw();e.Q6J("currentStatusObj",t.statusObj)}}function gJ(n,o){1&n&&(e.TgZ(0,"span",46),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_azt_go_to_question_number")))}function xJ(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",42),e.YNc(1,gJ,3,3,"span",43),e.TgZ(2,"input",44),e.NdJ("keyup.enter",function(){e.CHM(t);const a=e.oxw(5);return e.KtG(a.actionNextToQuestion())})("ngModelChange",function(a){e.CHM(t);const r=e.oxw(5);return e.KtG(r.nexToQuestionConf.value=a)})("focus",function(){e.CHM(t);const a=e.oxw(5);return e.KtG(a.toggleTooltipNextToQuestion(!0))})("focusout",function(){e.CHM(t);const a=e.oxw(5);return e.KtG(a.toggleTooltipNextToQuestion(!1))}),e.qZA(),e.TgZ(3,"button",45),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(5);return e.KtG(a.actionNextToQuestion())}),e._uU(4),e.ALo(5,"mytranslate"),e.qZA()()}if(2&n){const t=e.oxw(5);e.xp6(1),e.Q6J("ngIf",t.fixToTopWidth>500),e.xp6(1),e.Q6J("min",1)("ngModel",t.nexToQuestionConf.value),e.xp6(2),e.Oqu(e.lcZ(5,4,"lang_auto_den"))}}function bJ(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",47)(1,"button",48),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(5);return e.KtG(a.openDialogSpitPoint())}),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.TgZ(4,"button",19),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(5);return e.KtG(a.goBack())}),e._uU(5),e.ALo(6,"mytranslate"),e.qZA(),e.TgZ(7,"button",20),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(5);return e.KtG(a.handleSubmitSaveExam())}),e._uU(8),e.ALo(9,"mytranslate"),e.qZA()()}if(2&n){const t=e.oxw(5);e.xp6(2),e.Oqu(e.lcZ(3,4,"lang_testbank_update_exam_split_points")),e.xp6(3),e.Oqu(e.lcZ(6,6,"lang_button_cancel")),e.xp6(2),e.Q6J("disabled",""===t.nameExamInp.value.trim()||t.nameExamInp.errors||t.invalidTypeQuestionConfig.length>0),e.xp6(1),e.hij(" ",e.lcZ(9,8,"lang_button_save")," ")}}function vJ(n,o){if(1&n&&(e.TgZ(0,"flexed-on-the-top",38)(1,"div",39),e.YNc(2,xJ,6,6,"div",40),e.YNc(3,bJ,10,10,"div",41),e.qZA()()),2&n){const t=e.oxw(4);e.Q6J("colorBackground","#f0f8ffe8"),e.xp6(2),e.Q6J("ngIf",t.fixToTopTop<0),e.xp6(1),e.Q6J("ngIf",t.fixToTopTop<0)}}function wJ(n,o){1&n&&(e.TgZ(0,"div",49),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_testbank_tested_list_teacher_confirmed")," "))}function yJ(n,o){1&n&&(e.TgZ(0,"span",56),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_azt_go_to_question_number")))}function CJ(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",50)(1,"div",51),e.YNc(2,yJ,3,3,"span",52),e.TgZ(3,"input",53),e.NdJ("keyup.enter",function(){e.CHM(t);const a=e.oxw(4);return e.KtG(a.actionNextToQuestion())})("ngModelChange",function(a){e.CHM(t);const r=e.oxw(4);return e.KtG(r.nexToQuestionConf.value=a)})("focus",function(){e.CHM(t);const a=e.oxw(4);return e.KtG(a.toggleTooltipNextToQuestion(!0))})("focusout",function(){e.CHM(t);const a=e.oxw(4);return e.KtG(a.toggleTooltipNextToQuestion(!1))}),e.qZA(),e.TgZ(4,"button",54),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(4);return e.KtG(a.actionNextToQuestion())}),e._uU(5),e.ALo(6,"mytranslate"),e.qZA()(),e.TgZ(7,"div")(8,"button",55),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(4);return e.KtG(a.openDialogSpitPoint())}),e._uU(9),e.ALo(10,"mytranslate"),e.qZA()()()}if(2&n){const t=e.oxw(4);e.xp6(2),e.Q6J("ngIf",!t.isMobile),e.xp6(1),e.Q6J("min",1)("ngModel",t.nexToQuestionConf.value),e.xp6(2),e.Oqu(e.lcZ(6,5,"lang_auto_den")),e.xp6(4),e.Oqu(e.lcZ(10,7,"lang_testbank_update_exam_split_points"))}}function TJ(n,o){1&n&&(e.TgZ(0,"span",63),e._uU(1,",\xa0"),e.qZA())}function kJ(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"b",61),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw(6);let l;return e.KtG(s.goToQuestionAll(null!==(l=r.index)&&void 0!==l?l:0))}),e.ALo(2,"mytranslate"),e._uU(3),e.ALo(4,"mytranslate"),e.qZA(),e.YNc(5,TJ,2,0,"span",62),e.BQk()}if(2&n){const t=o.$implicit,i=o.index,a=e.oxw(6);let r;e.xp6(1),e.s9C("matTooltip",e.lcZ(2,4,"lang_testbank_create_exam_width_file_pdf_click_roll")),e.xp6(2),e.AsE(" ",e.lcZ(4,6,"lang_testbank_create_exam_width_file_pdf_question")," ",(null!==(r=t.index)&&void 0!==r?r:0)+1," "),e.xp6(2),e.Q6J("ngIf",i<a.invalidTypeQuestionConfig.length-1)}}function SJ(n,o){if(1&n&&(e.ynx(0),e._uU(1),e.ALo(2,"mytranslate"),e.TgZ(3,"div",59),e.YNc(4,kJ,6,8,"ng-container",60),e.qZA(),e.BQk()),2&n){const t=e.oxw(5);e.xp6(1),e.hij(" ",e.lcZ(2,2,"lang_testbank_create_exam_width_file_pdf_check_configuration")," "),e.xp6(3),e.Q6J("ngForOf",t.invalidTypeQuestionConfig)}}function EJ(n,o){if(1&n&&(e.TgZ(0,"div",57)(1,"mat-icon",58),e._uU(2,"info_outlined"),e.qZA(),e._uU(3),e.ALo(4,"mytranslate"),e.YNc(5,SJ,5,4,"ng-container",3),e.qZA()),2&n){const t=e.oxw(4);e.xp6(3),e.hij(" ",e.lcZ(4,2,"lang_testbank_create_exam_width_file_pdf_cant_save")," "),e.xp6(2),e.Q6J("ngIf",t.invalidTypeQuestionConfig.length>0)}}function OJ(n,o){1&n&&(e.TgZ(0,"span",67),e._uU(1,"|"),e.qZA())}function IJ(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"a",65),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw(5);return e.KtG(s.onShowFile(r))}),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.YNc(4,OJ,2,0,"span",66),e.BQk()}if(2&n){const t=o.index,i=e.oxw(5);e.xp6(2),e.AsE("",e.lcZ(3,3,"lang_testbank_update_exam_image")," ",t+1,""),e.xp6(2),e.Q6J("ngIf",t<i.cropperData.length-1)}}function MJ(n,o){if(1&n&&(e.TgZ(0,"div",64),e._uU(1),e.ALo(2,"mytranslate"),e.YNc(3,IJ,5,5,"ng-container",60),e.qZA()),2&n){const t=e.oxw(4);e.xp6(1),e.hij(" ",e.lcZ(2,2,"lang_testbank_update_exam_data_split_exam"),": "),e.xp6(2),e.Q6J("ngForOf",t.cropperData)}}const ny=function(n){return{"error-border":n}};function LJ(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"input",83),e.NdJ("input",function(a){e.CHM(t);const r=e.oxw().$implicit,s=e.oxw(4);return e.KtG(s.setScore(a,r.id))}),e.qZA()}if(2&n){const t=e.oxw().$implicit,i=e.oxw(4);let a;e.s9C("value",i.isDivinePointForQuestion?i.parseNumberFixed(null!==(a=t.scorePerQuestion)&&void 0!==a?a:0,8):t.scorePerQuestion),e.Q6J("ngClass",e.VKq(3,ny,null==t.scorePerQuestion||t.scorePerQuestion<0))("decimal",!0)}}function BJ(n,o){1&n&&(e.TgZ(0,"div",86),e._uU(1,"|"),e.qZA())}function PJ(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"lucide-icon",99),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3).$implicit,r=e.oxw(4);return e.KtG(r.showFeedbackQuestionDialog(a))}),e.ALo(1,"mytranslate"),e.qZA()}2&n&&e.s9C("matTooltip",e.lcZ(1,1,"lang_auto_bao_loi"))}function QJ(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",100)(1,"button",101),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3).$implicit,r=e.oxw(4);return e.KtG(r.showFeedbackQuestionDialog(a))}),e.ALo(2,"mytranslate"),e._UZ(3,"lucide-icon",102),e.qZA()()}2&n&&(e.xp6(1),e.s9C("matTooltip",e.lcZ(2,1,"lang_auto_bao_loi")))}function FJ(n,o){if(1&n&&(e.ynx(0),e.YNc(1,PJ,2,3,"lucide-icon",97),e.YNc(2,QJ,4,3,"div",98),e.TgZ(3,"div",86),e._uU(4,"|"),e.qZA(),e.BQk()),2&n){const t=e.oxw(6);e.xp6(1),e.Q6J("ngIf",t.isMobile),e.xp6(1),e.Q6J("ngIf",!t.isMobile)}}function NJ(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"lucide-icon",103),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2),r=a.$implicit,s=a.index,l=e.oxw(4);return e.KtG(l.removeQuestion(r,s))}),e.ALo(1,"mytranslate"),e.qZA()}2&n&&e.s9C("matTooltip",e.lcZ(1,1,"lang_auto_xoa"))}function ZJ(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"button",104),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2),r=a.$implicit,s=a.index,l=e.oxw(4);return e.KtG(l.removeQuestion(r,s))}),e.ALo(2,"mytranslate"),e._UZ(3,"lucide-icon",105),e.qZA()()}2&n&&(e.xp6(1),e.s9C("matTooltip",e.lcZ(2,1,"lang_auto_xoa")))}function DJ(n,o){1&n&&(e.TgZ(0,"div",106),e.ALo(1,"mytranslate"),e.O4$(),e.TgZ(2,"svg",107),e._UZ(3,"line",108)(4,"path",109),e.qZA()()),2&n&&e.s9C("matTooltip",e.lcZ(1,1,"lang_auto_dap_an_cua_cau_hoi_nay_da_duoc_co_dinh"))}function UJ(n,o){1&n&&(e.TgZ(0,"div",86),e._uU(1,"|"),e.qZA())}function jJ(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",110)(1,"div",111)(2,"mat-chip-listbox")(3,"mat-chip-option",112),e.NdJ("removed",function(){e.CHM(t);const a=e.oxw(2).$implicit,r=e.oxw(4);return e.KtG(r.setTag(a))}),e._uU(4),e.ALo(5,"mytranslate"),e.TgZ(6,"button",113)(7,"mat-icon",114),e._uU(8,"cancel"),e.qZA()()()()()()}if(2&n){const t=e.oxw(2).$implicit;e.xp6(4),e.hij(" ",e.lcZ(5,1,"azt_lang_tag_"+t.tags[0].code)," ")}}function qJ(n,o){1&n&&(e.TgZ(0,"div",86),e._uU(1,"|"),e.qZA())}function RJ(n,o){1&n&&(e.O4$(),e.kcU(),e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_teacher_set_tags")))}function zJ(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"li")(1,"a",124),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw(3).$implicit,l=e.oxw(4);return e.KtG(l.setTag(s,r))}),e._uU(2),e.qZA()()}if(2&n){const t=o.$implicit,i=e.oxw(7);let a;e.xp6(2),e.hij(" ",null!==(a=t[i.commonService.getCurrentLang()+"Name"])&&void 0!==a?a:t.enName," ")}}const c2=function(n){return{"mr-1":n}};function HJ(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",115)(1,"button",116),e.O4$(),e.TgZ(2,"svg",92),e._UZ(3,"path",117)(4,"path",118)(5,"path",119),e.qZA(),e.YNc(6,RJ,3,3,"span",3),e.qZA(),e.kcU(),e.TgZ(7,"mat-menu",null,120)(9,"div",121)(10,"ul",7),e.YNc(11,zJ,3,1,"li",60),e.TgZ(12,"li"),e._UZ(13,"hr",122),e.qZA(),e.TgZ(14,"li")(15,"button",123),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2).$implicit,r=e.oxw(4);return e.KtG(r.applyTagAll(a))}),e._uU(16),e.ALo(17,"mytranslate"),e.qZA()()()()()()}if(2&n){const t=e.MAs(8),i=e.oxw(2).$implicit,a=e.oxw(4);e.xp6(1),e.Q6J("matMenuTriggerFor",t),e.xp6(1),e.Q6J("ngClass",e.VKq(8,c2,!a.isMobile)),e.xp6(4),e.Q6J("ngIf",!a.isMobile),e.xp6(5),e.Q6J("ngForOf",a.questionTags),e.xp6(4),e.Q6J("disabled",!i.tags),e.xp6(1),e.hij(" ",e.lcZ(17,6,"lang_teacher_apply_all_tags")," ")}}function JJ(n,o){1&n&&(e.TgZ(0,"div",86),e._uU(1,"|"),e.qZA())}function KJ(n,o){1&n&&(e.O4$(),e.kcU(),e.TgZ(0,"span",125),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_teacher_edit_content_exam")))}function GJ(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_update_exam_original_question")))}function YJ(n,o){1&n&&(e.TgZ(0,"div",86),e._uU(1,"|"),e.qZA())}function $J(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",126),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2).$implicit,r=e.oxw(4);return e.KtG(r.goToOriginalQuestion(a))}),e.TgZ(2,"span",127),e._UZ(3,"lucide-icon",128),e.qZA(),e.YNc(4,GJ,3,3,"span",3),e.qZA(),e.YNc(5,YJ,2,0,"div",84),e.BQk()}if(2&n){const t=e.oxw(6);e.xp6(2),e.Q6J("ngClass",e.VKq(3,c2,!t.isMobile)),e.xp6(2),e.Q6J("ngIf",!t.isMobile),e.xp6(1),e.Q6J("ngIf",!t.isMobile)}}function VJ(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.YNc(1,BJ,2,0,"div",84),e.YNc(2,FJ,5,2,"ng-container",3),e.ynx(3),e.YNc(4,NJ,2,3,"lucide-icon",85),e.YNc(5,ZJ,4,3,"div",3),e.TgZ(6,"div",86),e._uU(7,"|"),e.qZA(),e.BQk(),e.YNc(8,DJ,5,3,"div",87),e.YNc(9,UJ,2,0,"div",84),e.TgZ(10,"div",88),e.YNc(11,jJ,9,3,"div",89),e.qZA(),e.YNc(12,qJ,2,0,"div",84),e.YNc(13,HJ,18,10,"div",90),e.YNc(14,JJ,2,0,"div",84),e.TgZ(15,"div",91),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,r=e.oxw(4);return e.KtG(r.editQuestion(a))}),e.TgZ(16,"span"),e.O4$(),e.TgZ(17,"svg",92),e._UZ(18,"path",93)(19,"polyline",94)(20,"path",95),e.qZA(),e.YNc(21,KJ,3,3,"span",96),e.qZA()(),e.kcU(),e.TgZ(22,"div",86),e._uU(23,"|"),e.qZA(),e.YNc(24,$J,6,5,"ng-container",3),e.BQk()}if(2&n){const t=e.oxw().$implicit,i=e.oxw(4);e.xp6(1),e.Q6J("ngIf",i.sAztQuestionKnowledgeUnitService.isShowKnowledgeUnit&&!i.isMobile),e.xp6(1),e.Q6J("ngIf",t.enableFeedback),e.xp6(2),e.Q6J("ngIf",i.isMobile),e.xp6(1),e.Q6J("ngIf",!i.isMobile),e.xp6(3),e.Q6J("ngIf",t.isFixAns),e.xp6(1),e.Q6J("ngIf",t.isFixAns),e.xp6(2),e.Q6J("ngIf",t.tags&&t.tags.length>0),e.xp6(1),e.Q6J("ngIf",t.tags&&t.tags.length>0),e.xp6(1),e.Q6J("ngIf",i.questionTags.length>0),e.xp6(1),e.Q6J("ngIf",i.questionTags.length>0),e.xp6(3),e.Q6J("ngClass",e.VKq(13,c2,!i.isMobile)),e.xp6(4),e.Q6J("ngIf",!i.isMobile),e.xp6(3),e.Q6J("ngIf",t.orgQuestionObj&&t.orgQuestionObj.orgExamId)}}const WJ=function(n){return{"d-none":n}};function XJ(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",129)(1,"span",130),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.TgZ(4,"input",83),e.NdJ("input",function(a){e.CHM(t);const r=e.oxw().$implicit,s=e.oxw(4);return e.KtG(s.setScore(a,r.id))}),e.qZA()()}if(2&n){const t=e.oxw().$implicit,i=e.oxw(4);let a;e.xp6(1),e.Q6J("ngClass",e.VKq(7,WJ,i.isMobile)),e.xp6(1),e.hij("",e.lcZ(3,5,"lang_testbank_update_exam_point"),":"),e.xp6(2),e.s9C("value",i.isDivinePointForQuestion?i.parseNumberFixed(null!==(a=t.scorePerQuestion)&&void 0!==a?a:0,8):t.scorePerQuestion),e.Q6J("ngClass",e.VKq(9,ny,null==t.scorePerQuestion||t.scorePerQuestion<0))("decimal",!0)}}function eK(n,o){if(1&n&&(e.TgZ(0,"div",133),e._UZ(1,"img",134),e.ALo(2,"mycdn"),e.qZA()),2&n){const t=e.oxw(2).$implicit;e.xp6(1),e.s9C("src",e.lcZ(2,1,t.answerMedia),e.LSH)}}function tK(n,o){if(1&n&&(e.TgZ(0,"div",133)(1,"div",135),e._UZ(2,"span",136),e.qZA()()),2&n){const t=e.oxw(2).$implicit;e.xp6(2),e.Q6J("innerHtml",t.answerMedia,e.oJD)}}function nK(n,o){if(1&n&&(e.TgZ(0,"div",131),e.YNc(1,eK,3,3,"div",132),e.YNc(2,tK,3,1,"div",132),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",1==t.isImage),e.xp6(1),e.Q6J("ngIf",0==t.isImage)}}function iK(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",68)(1,"azt-question-group-content-box",69),e.NdJ("editGroup",function(){const r=e.CHM(t).$implicit,s=e.oxw(4);return e.KtG(s.editGroup(r))}),e.qZA(),e.TgZ(2,"div",70)(3,"div",71)(4,"div",72)(5,"div",73)(6,"div",74),e._UZ(7,"azt-question-knowledge-unit",75),e.YNc(8,LJ,1,5,"input",76),e.qZA(),e._UZ(9,"div",77),e.TgZ(10,"div",78),e.YNc(11,VJ,25,15,"ng-container",3),e.ALo(12,"isOfflineExam"),e.YNc(13,XJ,5,11,"div",79),e.qZA()()(),e.TgZ(14,"div",80)(15,"azt-question-standalone-for-update",81),e.NdJ("setAnswerType4UpdateEmit",function(a){e.CHM(t);const r=e.oxw(4);return e.KtG(r.setAnswerType4(a))})("removeAnswerType4Emit",function(a){e.CHM(t);const r=e.oxw(4);return e.KtG(r.removeAnswerType4(a))})("setAnswerOnUpdateEmit",function(a){e.CHM(t);const r=e.oxw(4);return e.KtG(r.setAnswer(a))}),e.qZA()()(),e.YNc(16,nK,3,2,"div",82),e.qZA()()}if(2&n){const t=o.$implicit,i=o.index,a=e.oxw(4);let r,s,l,c;e.uIk("id","questViewBoxByLabel"+t.rawIndex),e.xp6(1),e.Q6J("examObj",a.examObj)("questionObj",t)("renderConfigObj",a.renderConfigObj),e.xp6(1),e.s9C("id","question_view_"+t.id),e.xp6(1),e.s9C("id","question_"+i),e.xp6(3),e.Q6J("ngClass",a.isMobile?"w-full mb-2 flex":""),e.xp6(1),e.Q6J("ngClass",a.isMobile?"w-full":"")("questionId",t.id)("knowledgeId",null!==(r=t.knowledgeId)&&void 0!==r?r:0)("questionContent",null!==(s=t.content)&&void 0!==s?s:"")("levelId",null!==(l=a.examObj.schoolLevelId)&&void 0!==l?l:0)("subjectId",null!==(c=a.examObj.schoolSubjectId)&&void 0!==c?c:0),e.xp6(1),e.Q6J("ngIf",a.isMobile),e.xp6(2),e.Q6J("ngClass",a.isMobile?"w-full justify-between":""),e.xp6(1),e.Q6J("ngIf",!e.lcZ(12,24,a.examObj)),e.xp6(2),e.Q6J("ngIf",!a.isMobile),e.xp6(2),e.Q6J("examObj",a.examObj)("questionObj",t)("follower",a.followerRenderQuest)("curQuestionIndex",i)("isShowExplain",a.defaultShowResultMedia)("isInvalidValidation",a.invalidValidationQuestionIds.includes(t.id)),e.xp6(1),e.Q6J("ngIf",t.showResultMedia)}}function oK(n,o){1&n&&e._UZ(0,"azt-loading-handle-data",137),2&n&&e.Q6J("content","lang_testbank_export_pdf_by_user_processing")}function aK(n,o){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",14)(2,"div",15,16),e._UZ(4,"input",17),e.YNc(5,vJ,4,3,"flexed-on-the-top",18),e.TgZ(6,"button",19),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.goBack())}),e._uU(7),e.ALo(8,"mytranslate"),e.qZA(),e.TgZ(9,"button",20),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.handleSubmitSaveExam())}),e._uU(10),e.ALo(11,"mytranslate"),e.qZA(),e.TgZ(12,"button",21),e.O4$(),e.TgZ(13,"svg",22),e._UZ(14,"circle",23)(15,"circle",24)(16,"circle",25),e.qZA()()(),e.kcU(),e.TgZ(17,"div",26)(18,"div",27)(19,"div",28),e.YNc(20,wJ,3,3,"div",29),e.YNc(21,CJ,11,9,"div",30),e.YNc(22,EJ,6,4,"div",31),e.YNc(23,MJ,4,4,"div",32),e.TgZ(24,"div",33),e._UZ(25,"azt-exam-header-box",34),e.YNc(26,iK,17,26,"div",35),e.qZA()()()(),e._UZ(27,"azt-scroll-to-top-bottom",36),e.qZA(),e.YNc(28,oK,1,1,"azt-loading-handle-data",37),e.BQk()}if(2&n){const t=e.oxw(3),i=e.MAs(6);e.xp6(4),e.Q6J("formControl",t.nameExamInp),e.xp6(1),e.Q6J("ngIf",t.fixToTopTop<2),e.xp6(2),e.Oqu(e.lcZ(8,14,"lang_button_cancel")),e.xp6(2),e.Q6J("disabled",""===t.nameExamInp.value.trim()||t.nameExamInp.errors||t.invalidTypeQuestionConfig.length>0),e.xp6(1),e.hij(" ",e.lcZ(11,16,"lang_button_save")," "),e.xp6(2),e.Q6J("matMenuTriggerFor",i),e.xp6(8),e.Q6J("ngIf",0===t.questionObjs.length),e.xp6(1),e.Q6J("ngIf",t.questionObjs.length>0),e.xp6(1),e.Q6J("ngIf",t.invalidTypeQuestionConfig.length>0),e.xp6(1),e.Q6J("ngIf",t.cropperData&&t.cropperData.length>0),e.xp6(2),e.Q6J("examObj",t.examObj),e.xp6(1),e.Q6J("ngForOf",t.questionObjs),e.xp6(1),e.Q6J("isScrollToTop",!0),e.xp6(1),e.Q6J("ngIf",t.isLoadingSave)}}function rK(n,o){1&n&&(e.TgZ(0,"div",138)(1,"span",139),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&n&&(e.xp6(2),e.hij("",e.lcZ(3,1,"lang_testbank_update_exam_not_access_rights"),"!"))}function sK(n,o){if(1&n&&(e.ynx(0),e.YNc(1,aK,29,18,"ng-container",12),e.ALo(2,"editPermission"),e.YNc(3,rK,4,3,"ng-template",null,13,e.W1O),e.BQk()),2&n){const t=e.MAs(4),i=e.oxw(2);e.xp6(1),e.Q6J("ngIf",e.xi3(2,2,i.examObj,"exam"))("ngIfElse",t)}}function lK(n,o){if(1&n&&e.YNc(0,sK,5,5,"ng-container",3),2&n){const t=e.oxw();e.Q6J("ngIf",t.examObj)}}function cK(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"azt-exam-info",140),e.NdJ("closeDialog",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.closeDialogExamInfo())})("goToQuestion",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.onHandleGoToQuestion(a))}),e.qZA()()}if(2&n){const t=e.oxw();let i;e.xp6(1),e.Q6J("startIndexQuestion",null!==(i=null==t.examObj?null:t.examObj.startQuestionIndex)&&void 0!==i?i:1)("data",t.dataExamInfo)}}let uK=(()=>{class n extends a2.R{setValidationToQuestionId(t,i){this.invalidValidationQuestionIds.includes(t)?i||(this.invalidValidationQuestionIds=this.invalidValidationQuestionIds.filter(a=>a!=t)):i&&this.invalidValidationQuestionIds.push(t)}onWindowScroll(){let t=document.getElementById("np-name-root");window.pageYOffset>30?t?.classList.add("fixToolBar"):t?.classList.remove("fixToolBar"),this.downPageElement&&(this.fixToTopWidth=this.downPageElement.nativeElement.getBoundingClientRect().width,this.fixToTopTop=this.downPageElement.nativeElement.getBoundingClientRect().top)}scrollDown(){let t=document.getElementById("azt-layout");t&&t.scrollIntoView()}editGroup(t){this.editQuestion(t,!0)}editQuestion(t,i){if(this.examObj?.editable){let a=`/admin/testbank/update-exam/${null!=this.cur_cateId?this.cur_cateId:0}/${this.examId}`+(this.backToLink?"?backto="+encodeURIComponent(this.backToLink):"");window.location.href=this.commonService.getLocalRouter("/admin/testbank/azota-editor/"+(null!=this.cur_cateId?this.cur_cateId:0))+"/"+t.id+"?backto="+encodeURIComponent(a)+"&r="+((t.rawIndex??0)+(this.examObj?.startQuestionIndex??1)-1)+(this.expandInfoParse.label?"&defaultQuestLabel="+this.expandInfoParse.label:"")+(this.sAztQuestionKnowledgeUnitService.isShowKnowledgeUnit?"&levelId="+this.examObj?.schoolLevelId+"&subjectId="+this.examObj?.schoolSubjectId:"")+(i?"&isEditGroup=1":"")}else this.openDialogWaring("lang_auto_not_edit_content_question")}openDialogWaring(t){this.commonService.getTranslate(t).subscribe(i=>{this.sAztDialogService.open(oh.C,{data:{isShow:!0,content:i},restoreFocus:!1,width:"500px"})})}setTag(t,i){t.tags=i?[i]:[]}applyTagAll(t){for(let a=this.questionObjs.indexOf(t)+1;a<this.questionObjs.length;a++)this.questionObjs[a].tags=t.tags}openDialogConfigExpandInfo(){this.sAztDialogService.open(Nw,{data:this.expandInfoParse,restoreFocus:!1}).afterClosed().subscribe(i=>{this.closeDialogConfigExpandInfo(i)})}closeDialogConfigExpandInfo(t){void 0!==t&&(this.expandInfoParse=t,this.handleSubmitSaveExam())}openDialogSpitPoint(){const t=this.oneChoiceCounter(this.questionObjs),i=this.trueFalseCounter(this.questionObjs),a=this.fillAnswerCounter(this.questionObjs),r=this.essayQuestionCounter(this.questionObjs),s={multipleQuestion:t,multiplePoint:parseFloat(this.maxPointCounter(this.questionObjs)).toFixed(4),fillQuestion:a,fillPoint:parseFloat(this.maxPointFillAnswerCounter(this.questionObjs)).toFixed(4),essayQuestion:r,essayPoint:parseFloat(this.essayPointCounter(this.questionObjs)).toFixed(4),trueFalseQuestion:i,trueFalsePoint:parseFloat(this.trueFalsePointCounter(this.questionObjs)).toFixed(4)};this.sAztDialogService.open(Mn,{data:s,width:"500px",restoreFocus:!1}).afterClosed().subscribe(c=>{c&&this.setPointTest(c)})}removeQuestion(t,i){this.sAztDialogService.open(Zw,{width:"750px",data:{questionObj:t,examObj:this.examObj,examId:this.examId,index:i},restoreFocus:!1,autoFocus:!1}).afterClosed().subscribe(s=>{s&&this.getData()})}showFeedbackQuestionDialog(t){this.sAztDialogService.open(Ct.V,{width:"750px",data:{questionObj:t,role:"TEACHER",applyType:"MATRIX_QUESTION"},restoreFocus:!1,autoFocus:!1}).afterClosed().subscribe(r=>{})}get invalidTypeQuestionConfig(){return this.questionObjs.filter(t=>null==t.scorePerQuestion||t.scorePerQuestion<0||!isFinite(t.scorePerQuestion??0)||!t.answerResult?.length&&this.answerTypeService.isFillAnswer(t))}goToQuestionAll(t,i=150){var a=document.getElementById("question_"+t);a&&a.scrollIntoView()}enableScroll(){window.onscroll=()=>{}}disableScroll(){let t=window.pageYOffset||document.documentElement.scrollLeft,i=window.pageXOffset||document.documentElement.scrollTop;window.onscroll=()=>{window.scrollTo(t,i)}}onShowFile(t){var i=this.sAztDialogService.open(al.q,{maxWidth:"100vw",maxHeight:"100vh",height:"100%",width:"100%",data:{fileOption:{url:t,mimes:"image/jpeg"},viewFullImageWithScroll:!0},restoreFocus:!1});this.disableScroll(),i.afterClosed().subscribe(a=>{a&&this.enableScroll()})}goBack(){this.commonService.myNavigationBySpecialQueryString(this.backToLink)}showAllResultQuestion(){this.defaultShowResultMedia=!this.defaultShowResultMedia}convertData(t){for(var i=[],a=0;a<t.length;a++)t[a].content&&i.push(t[a].content);return JSON.stringify(i)}keepAnswerResult(t){for(var i=[],a=0;a<t.length;a++)i.push({id:t[a].id??0,answerResult:JSON.stringify(t[a].answerResult),scorePerQuestion:t[a].scorePerQuestion??0,tags:t[a].tags?.map(r=>r.code??"")});return i}handleSubmitSaveExam(){if(!0!==this.isLoadingSave)if(this.examObj&&this.permissionService.hasEditPermission("exam",this.examObj)){let t=!1,i=0;this.questionObjs.forEach(a=>{this.answerTypeService.isEssayAnswer(a)||this.answerTypeService.isTrueFalseAnswer(a)?this.setValidationToQuestionId(a.id,!1):0==a.answerResult?.length&&(this.setValidationToQuestionId(a.id,!0),t=!0,document.getElementById("question_"+i)?.scrollIntoView()),i++}),this.newAnswerList.length>0?this.newAnswerList.forEach(a=>{var r=this.questionObjs.filter(s=>s.id==a.id);null!=r&&r.length>0&&!this.answerTypeService.isFillAnswer(r[0])&&a.answerResultParse&&a.answerResultParse.length>0&&(a.answerResult=this.convertData(a.answerResultParse??[]),a.tags=r[0].tags?.map(s=>s.code??""))}):this.newAnswerList=this.keepAnswerResult(this.questionObjs),t?this.showErrorSnack("lang_auto_vui_long_nhap_dap_an_cho_cau_hoi"):(this.isLoadingSave=!0,this.waitDestroy(this.questionService.apiQuestionUpdateAnswerResultsWithExamNamePost({examId:this.examId,examName:this.nameExamInp.value,answerResults:this.newAnswerList,expandInfoObj:this.expandInfoParse}).subscribe(r=>{1==r.success?(this.newAnswerList=new Array,this.examObj&&(this.examObj.expandInfo=this.serializeJson(this.expandInfoParse)),this.successStatusObj("lang_cms_update_success",!0),this.isLoadingSave=!1):(this.newAnswerList=new Array,this.errorStatusObj(r.message??"",!0),this.isLoadingSave=!1)})))}else this.showErrorSnack("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay")}setAnswer(t){var i=this.newAnswerList.filter(c=>c.id==t.idQuestion);if(null!=t.index&&1==t.type){var a={id:t.idQuestion,answerResultParse:[{index:t.index,content:t.isImage?t.event.content:t.event.key}],scorePerQuestion:t.score,answerResult:"",tags:[]};if(i&&i.length>0)for(var r=0;r<this.newAnswerList.length;r++)this.newAnswerList[r].id==a.id&&(this.newAnswerList[r].answerResultParse?.push(a.answerResultParse?.[0]??{}),this.newAnswerList[r].answerResult=JSON.stringify(this.newAnswerList[r].answerResultParse));else a.answerResult=JSON.stringify(a.answerResultParse),this.newAnswerList.push(a);this.changeStatusAnswer(a,t.index,!0,t.isImage)}else if(null!=t.index&&2==t.type){var s={id:t.idQuestion,answerResult:JSON.stringify([{index:t.index,content:t.isImage?t.event.content:t.event.key}]),answerResultParse:[{index:t.index,content:t.isImage?t.event.content:t.event.key}],scorePerQuestion:t.score,tags:[]};if(i&&i.length>0)for(r=0;r<this.newAnswerList.length;r++)this.newAnswerList[r].id==s.id&&(this.newAnswerList[r].answerResult=s.answerResult,this.newAnswerList[r].answerResultParse=s.answerResultParse);else this.newAnswerList.push(s);this.changeStatusAnswer(s,t.index,!1,t.isImage)}else if(null!=t.index&&5==t.type){let c=[],u=this.questionObjs.find(f=>f.id==t.idQuestion),m=t.isImage?t.event.content:t.event.key;u&&("F"==t.status?u.answerResult=u?.answerResult?.filter(f=>f!=m)??u?.answerResult:u?.answerResult.includes(m)||u.answerResult?.push(t.isImage?t.event.content:t.event.key)),c=u?.answerResult??[];let p=c.map(f=>({index:t.index,content:f}));var l={id:t.idQuestion,answerResult:JSON.stringify(p),answerResultParse:p,scorePerQuestion:t.score,tags:[]};if(i&&i.length>0)for(r=0;r<this.newAnswerList.length;r++)this.newAnswerList[r].id==l.id&&(this.newAnswerList[r].answerResult=l.answerResult,this.newAnswerList[r].answerResultParse=l.answerResultParse);else this.newAnswerList.push(l);this.changeStatusTrueFalseAnswer(l,c)}}setAnswerType4(t){const i=(t.event.value||"").trim();if(i){var a=this.newAnswerList.filter(r=>r.id==t.questionId);this.questionObjs.forEach(r=>{if(r.id==t.questionId){i.split("|").forEach(c=>{r.answerResult?.push(c.trim())}),r.onChanges=!0;var s={id:r.id,answerResult:JSON.stringify(r.answerResult),scorePerQuestion:r.scorePerQuestion??0,tags:r.tags?.map(c=>c.code??"")};null!=a&&a.length>0?this.newAnswerList.forEach(c=>{c.id==t.questionId&&(c.answerResult=JSON.stringify(r.answerResult))}):this.newAnswerList.push(s)}})}this.questionObjs.forEach(r=>{this.answerTypeService.isEssayAnswer(r)||this.answerTypeService.isTrueFalseAnswer(r)?this.setValidationToQuestionId(r.id,!1):0==r.answerResult?.length&&this.setValidationToQuestionId(r.id,!0)}),t.event.input.value=""}removeAnswerType4(t){var i=this.newAnswerList.filter(a=>a.id==t.questionId);this.questionObjs.forEach(a=>{if(a.id==t.questionId){var r=a.answerResult?.indexOf(t.answerObj)??0;if(r>=0){a.answerResult?.splice(r,1);var s={id:a.id,answerResult:JSON.stringify(a.answerResult),scorePerQuestion:a.scorePerQuestion??0,tags:a.tags?.map(l=>l.code??"")};null!=i&&i.length>0?this.newAnswerList.forEach(l=>{l.id==t.questionId&&(l.answerResult=JSON.stringify(a.answerResult))}):this.newAnswerList.push(s)}}})}changeStatusTrueFalseAnswer(t,i){this.questionObjs.forEach(a=>{a.id==t.id&&a.answers&&a.answers.length>0&&a.answers.map(r=>r.isTrue=i.includes(r.key))})}changeStatusAnswer(t,i,a,r){a||this.questionObjs.forEach(s=>{if(s.id==t.id&&s.answers&&s.answers.length>0){for(var l=0;l<s.answers.length;l++)s.answers[l].isTrue=!1;s.answers[i].isTrue=!0}})}setPointTest(t){const i=this.oneChoiceCounter(this.questionObjs),a=this.trueFalseCounter(this.questionObjs),r=this.fillAnswerCounter(this.questionObjs),s=this.essayQuestionCounter(this.questionObjs),l=Number(t?.multiplePoint)/i,c=Number(t?.trueFalsePoint)/a,u=Number(t?.fillPoint)/r,m=Number(t?.essayPoint)/s;for(let p=0;p<this.questionObjs.length;p++){let f=!1;this.answerTypeService.isOneChoiceAnswer(this.questionObjs[p])?this.questionObjs[p].scorePerQuestion=Number(this.parseNumberFixed(l,8)):this.answerTypeService.isTrueFalseAnswer(this.questionObjs[p])?this.questionObjs[p].scorePerQuestion=Number(this.parseNumberFixed(c,8)):this.answerTypeService.isFillAnswer(this.questionObjs[p])?this.questionObjs[p].scorePerQuestion=Number(this.parseNumberFixed(u,8)):this.answerTypeService.isEssayAnswer(this.questionObjs[p])&&(this.questionObjs[p].scorePerQuestion=Number(this.parseNumberFixed(m,8)));for(let b=0;b<this.newAnswerList.length;b++)if(this.newAnswerList[b].id==this.questionObjs[p].id){this.newAnswerList[b].scorePerQuestion=Number(this.parseNumberFixed(m,8)),f=!0;break}if(!f){let b={id:this.questionObjs[p].id??0,answerResult:JSON.stringify(this.questionObjs[p].answerResult),scorePerQuestion:this.questionObjs[p].scorePerQuestion??0,tags:[]};this.newAnswerList.push(b)}}this.showSuccessSnack("lang_auto_chia_diem_thanh_cong")}setPointQuestion(){var t=this.form.getRawValue();if(t.totalQuestion<=this.countTrueFalseQuestion+this.countFillAnswerQuestion){this.invalidTotalQuestion=!1;var i=Number(t.maxScore)/t.totalQuestion;this.questionObjs.forEach(a=>{if(this.answerTypeService.isOneChoiceAnswer(a)||this.answerTypeService.isFillAnswer(a)){a.scorePerQuestion=i;for(var r=0;r<this.newAnswerList.length;r++)if(this.newAnswerList[r].id==a.id){this.newAnswerList[r].scorePerQuestion=i;break}}}),this.isDivinePointForQuestion=!0,this.showSuccessSnack("lang_auto_chia_diem_thanh_cong")}else this.invalidTotalQuestion=!0,this.showErrorSnack("lang_auto_so_cau_ban_nhap_da_vuot_qua_so_cau_trac_nghiem_trong_de_thi")}setScore(t,i){for(let r=0;r<this.questionObjs.length;r++){let s=isNaN(parseFloat(t.target.value))?void 0:parseFloat(t.target.value);if(this.questionObjs[r]&&this.questionObjs[r].id==i&&(this.questionObjs[r].scorePerQuestion=s,this.newAnswerList.length>0)){let l=!1;for(var a=0;a<this.newAnswerList.length;a++)if(this.newAnswerList[a].id==this.questionObjs[r].id){this.newAnswerList[a].scorePerQuestion=s??0,l=!0;break}if(!l){let c=[];if(this.answerTypeService.isTrueFalseAnswer(this.questionObjs[r]))c=this.questionObjs[r].answerResult.map(u=>({content:u}));else{let u=Array.isArray(this.questionObjs[r].answerResult)&&this.questionObjs[r].answerResult?.length?this.questionObjs[r].answerResult?.[0]:"";c.push({content:u})}this.newAnswerList.push({id:this.questionObjs[r].id??0,answerResult:JSON.stringify(this.questionObjs[r].answerResult),answerResultParse:c,scorePerQuestion:parseFloat(t.target.value),tags:[]})}}}}oneChoiceCounter(t){return t.filter(i=>this.answerTypeService.isOneChoiceAnswer(i)).length}trueFalseCounter(t){return t.filter(i=>this.answerTypeService.isTrueFalseAnswer(i)).length}essayQuestionCounter(t){return t.filter(i=>this.answerTypeService.isEssayAnswer(i)).length}fillAnswerCounter(t){return t.filter(i=>this.answerTypeService.isFillAnswer(i)).length}maxPointCounter(t){var i=0;return t.forEach(a=>{this.answerTypeService.isOneChoiceAnswer(a)&&(i+=a.scorePerQuestion??0)}),this.parseNumberFixed(i,4)}maxPointFillAnswerCounter(t){var i=0;return t.forEach(a=>{this.answerTypeService.isFillAnswer(a)&&(i+=a.scorePerQuestion??0)}),this.parseNumberFixed(i,4)}essayPointCounter(t){var i=0;return t.forEach(a=>{this.answerTypeService.isEssayAnswer(a)&&(i+=a.scorePerQuestion??0)}),i.toString()}trueFalsePointCounter(t){var i=0;return t.forEach(a=>{this.answerTypeService.isTrueFalseAnswer(a)&&(i+=a.scorePerQuestion??0)}),i.toString()}parseNumberFixed(t,i){let a=Number(parseFloat(t.toString()).toFixed(i));return isNaN(a)?"0":parseFloat(t.toString()).toFixed(i)}convertErrsResultQuestions(){for(let t=0;t<this.questionObjs.length;t++)null===this.questionObjs[t].answerResult&&(this.questionObjs[t].answerResult=[])}changeAnswerResultStatus(t){var i=[];let a=0;return t.forEach(r=>{if(r.index=a,r.isRoleTeacher=!0,a++,r.answers&&r.answerResult)for(let s=0;s<r.answers.length;s++)r.answers[s].questionId=r.id,r.answers[s].checked=!1,r.answers[s].isTrue=!!this.checkAnswerResult(r.answers[s].key??"",r.answerResult);i.push(r)}),i}checkAnswerResult(t,i){var a=!1;for(var r in i){if(i[r]==t){a=!0;break}a=!1}return a}getQuestionCanFeedback(){let t=[];this.questionObjs.forEach(i=>{i.id&&!this.commonService.isExistInArray(t,i.id)&&t.push(i.id)}),this.waitDestroy(this.testMarketFeedbackService.apiTestMarketFeedbacksQuestionsGet(this.examId,t.join(",")).subscribe(i=>{if(1==i.success&&i.data?.objs?.length){let a=i.data?.objs??[];for(let r=0;r<this.questionObjs.length;r++)a.forEach(s=>{this.questionObjs[r].id==s.questionId&&(this.questionObjs[r].enableFeedback=s.allowFeedback)});this.successStatusObj(),setTimeout(()=>{this.scrollToQuestion()},500)}else this.errorStatusObj(i.message??"",!0)}))}goToOriginalQuestion(t){const i=`/admin/testbank/update-exam/${this.examObj?.categoryId??0}/${this.examObj?.id}`+(this.backToLink?"?backto="+encodeURIComponent(this.backToLink):"");this.myNavigationWithQueryString(`/admin/testbank/update-exam/${t.orgQuestionObj?.orgCategoryId}/${t.orgQuestionObj?.orgExamId}`,`?backto=${encodeURIComponent(i)}&questionId=${t.orgQuestionObj?.orgQuestionId}`)}getData(){this.initStatusObj(),this.waitDestroy(this.examService.apiExamGetQuestionsIdGet(this.examId,1).subscribe(i=>{if(1==i.success){this.fixToTopTop=0,this.examObj=i.data?.examObj,this.expandInfoParse=this.commonService.castJsonToObj(this.examObj?.expandInfo??"{}")??{},this.firstInGroupIndexes=this.commonService.myParseJson(this.examObj?.firstInGroupIndexes??"")??[],this.nameExamInp.setValue(this.examObj?.name??"");let a=this.commonService.castJsonToClassObjs(Le.v,JSON.stringify(i.data?.questionObjs));const r=this.changeAnswerResultStatus(a??[]);this.followerRenderQuest.setNumQuest(r.length);const s=i.data?.orgQuestionObjs??[];this.questionObjs=r;for(let l=0;l<this.questionObjs.length;l++)for(let c=0;c<s.length;c++)s[c].questionId===this.questionObjs[l].id&&(this.questionObjs[l].orgQuestionObj=s[c]);this.cropperData=this.commonService.myParseJson(this.examObj?.labelsUrl??"")??[],this.docxService.replaceCanvasBackgroundTS(this.questionObjs),this.countTrueFalseQuestion=this.oneChoiceCounter(this.questionObjs),this.countFillAnswerQuestion=this.fillAnswerCounter(this.questionObjs),this.convertErrsResultQuestions(),this.form=new h.cw({maxScore:new h.NI(this.maxPointCounter(this.questionObjs),{nonNullable:!0,validators:[h.kI.required]}),totalQuestion:new h.NI(this.oneChoiceCounter(this.questionObjs),{nonNullable:!0,validators:[h.kI.required]})}),this.questionService.apiQuestionGetTagsGet().subscribe(l=>{1==l.success&&(this.questionTags=l.data?.objs??[])}),this.sAztQuestionKnowledgeUnitService.getListKnowledgeUnit(this.examObj?.schoolLevelId??0,this.examObj?.schoolSubjectId??0).subscribe(l=>{this.getConfigExam()})}else this.showErrorSnack(i.message??"")}))}getConfigExam(){this.documentConfigService.apiDocumentConfigGetExamConfigDataV2Get(this.examObj?.hashId??"").subscribe(t=>{t.success||this.getQuestionCanFeedback();let i=0,a=0;this.questionObjs.forEach((r,s)=>{r.labelIndex=s,t.data?.resetQuestionIndex&&r.groupInfo&&r.groupInfo.groupId&&(i!=r.groupInfo.groupId&&(i=r.groupInfo.groupId,a=0),r.labelIndex=a,a++)}),this.getQuestionCanFeedback()})}openExamInfoDialog(){this.dataExamInfo={isShow:!0,obj:this.questionObjs}}closeDialogExamInfo(){this.dataExamInfo.isShow=!1}toggleStartNextToQuestion(){this.nexToQuestionConf.showInput=!this.nexToQuestionConf.showInput}toggleTooltipNextToQuestion(t){this.nexToQuestionConf.showTooltip=t}actionNextToQuestion(){if(void 0===this.nexToQuestionConf.value)return;const t=document.getElementById("questViewBoxByLabel"+(this.nexToQuestionConf.value-1));t?t.scrollIntoView():this.showErrorSnack(this.commonService.myTranslateInstant("lang_auto_khong_tim_thay_cau_can_di_chuyen_den")??"")}scrollToQuestion(){const t=this.commonService.getMyQueryParam("questionId"),i=document.getElementById("question_view_"+t);i&&i.scrollIntoView()}onHandleGoToQuestion(t){let i=this.questionObjs?.[t-1]?.id??0;if(i){const a=document.getElementById("question_view_"+i);if(!a)return;a.scrollIntoView()}}ngOnInit(){this.waitDestroy((0,ne.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.cur_cateId=Number(this.commonService.getMyParam(this.activeRoute,"cat_id"))??0,this.examId=Number(this.commonService.getMyParam(this.activeRoute,"id"))??0;var t=this.commonService.getMyQueryParam("backto");this.backToLink=t||"/admin/testbank/document-management/0/"+(null!=this.cur_cateId?this.cur_cateId:0)+"/1",this.getData()})),this.commonService.translateMetaData({title:"lang_cms_test_update_exam_title",description:"lang_cms_test_update_exam_description",image:"lang_cms_test_image"}),super.ngOnInit()}constructor(t,i,a,r,s,l,c,u,m,p){super(),this.sAztDialogService=t,this.questionService=i,this.examService=a,this.activeRoute=r,this.permissionService=s,this.docxService=l,this.answerTypeService=c,this.testMarketFeedbackService=u,this.documentConfigService=m,this.sAztQuestionKnowledgeUnitService=p,this.questionTags=[],this.questionObjs=[],this.followerRenderQuest=new mu.p,this.defaultShowResultMedia=!1,this.cur_cateId=0,this.examId=0,this.firstInGroupIndexes=[],this.nameExamInp=new h.NI("",{nonNullable:!0,validators:[Da._.noWhiteSpace]}),this.newAnswerList=[],this.isMobile=this.commonService.isMobileOrTable(),this.backToLink="",this.countTrueFalseQuestion=0,this.countFillAnswerQuestion=0,this.invalidTotalQuestion=!1,this.isDivinePointForQuestion=!1,this.separatorKeysCodes=[Bg.K5],this.selectable=!0,this.removable=!0,this.addOnBlur=!0,this.isLoadingSave=!1,this.dataExamInfo={isShow:!1},this.expandInfoParse={},this.nexToQuestionConf={value:1,showInput:!1,showTooltip:!1},this.invalidValidationQuestionIds=[],this.fixToTopWidth=0,this.fixToTopTop=0,this.form=new h.cw({maxScore:new h.NI("",{nonNullable:!0,validators:[h.kI.required]}),totalQuestion:new h.NI(0,{nonNullable:!0,validators:[h.kI.required]})})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(qi.C),e.Y36(un.aE),e.Y36(un.Oe),e.Y36(E.gz),e.Y36(pu.j),e.Y36(Vg.n),e.Y36(fr.i),e.Y36(Xp.nC),e.Y36(jv.C),e.Y36(Ul))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-update-exam"]],viewQuery:function(t,i){if(1&t&&e.Gf(_J,5),2&t){let a;e.iGM(a=e.CRH())&&(i.downPageElement=a.first)}},hostBindings:function(t,i){1&t&&e.NdJ("scroll",function(r){return i.onWindowScroll(r)},!1,e.Jf7)},features:[e.qOj],decls:23,vars:18,consts:[[3,"headerBackToLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],["doneLoading",""],[4,"ngIf"],["xPosition","before"],["filterMenu","matMenu"],[1,"dropdown-menu","show","relative","w-64"],[1,"dropdown-content"],["azt-track-service","view-share-question-okOXhhqB2o",1,"dropdown-item","cursor-pointer",3,"click"],["azt-track-service","view-share-question-wBBhYqj6qo",1,"dropdown-item","cursor-pointer",3,"click"],["azt-track-service","view-share-question-gm18o_AtnP",1,"dropdown-item","cursor-pointer",3,"click"],[3,"currentStatusObj"],[4,"ngIf","ngIfElse"],["noPermission",""],["id","box-create-action",1,"simple-exam-box"],["id","down-page",1,"flex",2,"width","100%","margin","20px auto"],["downPage",""],["type","text",1,"inputMobile","form-control","mr-2",3,"formControl"],[3,"colorBackground",4,"ngIf"],["azt-track-service","update-exam-Z_5jMqg7e",1,"btn","btn-reload","mr-2",3,"click"],["azt-track-service","update-exam-SzWhHAfWm",1,"btn","btn-save",3,"disabled","click"],["azt-track-service","update-exam-SzWhHAfWm",1,"btn","btn-filter","ml-2",3,"matMenuTriggerFor"],["_ngcontent-ng-c2390875836","","xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-more-vertical","w-5","h-5","text-slate-500"],["_ngcontent-ng-c2390875836","","cx","12","cy","12","r","1"],["_ngcontent-ng-c2390875836","","cx","19","cy","12","r","1"],["_ngcontent-ng-c2390875836","","cx","5","cy","12","r","1"],[1,"container-fluid","mb-5","mt-3"],[1,"block-cols-12-full","m-0"],["id","box-left-file",1,"box-file",2,"width","100%"],["class","box-control text-center",4,"ngIf"],["class","flex","style","justify-content: space-between; align-items: center",4,"ngIf"],["class","p-2 mt-2 mb-2 alert alert-danger text-center","style","align-items: center",4,"ngIf"],["id","box-cropper-data","class","mt-3",4,"ngIf"],[1,"list-question-box","mt-3"],[1,"mb-1",3,"examObj"],["class","list-question-box-item mb-2","style","position: relative",4,"ngFor","ngForOf"],[3,"isScrollToTop"],[3,"content",4,"ngIf"],[3,"colorBackground"],[1,"flex",2,"justify-content","space-between","width","100%"],["class","next-to-question rounded flex items-center bg-white",4,"ngIf"],["class","flex",4,"ngIf"],[1,"next-to-question","rounded","flex","items-center","bg-white"],["class","font-medium ml-1","style","width: auto",4,"ngIf"],["appOnlyNumber","","type","number",1,"inputMobile","form-control",2,"width","70px","text-align","left","padding","10px","height","30px","margin-right","-1px",3,"min","ngModel","keyup.enter","ngModelChange","focus","focusout"],["azt-track-service","update-exam-Z2-pIpbAtb",1,"btn","btn-set-score","ml-1",2,"height","30px",3,"click"],[1,"font-medium","ml-1",2,"width","auto"],[1,"flex"],["azt-track-service","update-exam-VpkBJtDTEr",1,"btn","btn-set-score","mr-2",3,"click"],[1,"box-control","text-center"],[1,"flex",2,"justify-content","space-between","align-items","center"],[1,"next-to-question","rounded","shadow","py-1","px-2",2,"display","inline-block"],["class","font-medium","style","width: auto",4,"ngIf"],["appOnlyNumber","","type","number",1,"inputMobile","form-control",2,"width","80px","text-align","left","padding","10px",3,"min","ngModel","keyup.enter","ngModelChange","focus","focusout"],["azt-track-service","update-exam-Z2-pIpbAtb",1,"btn","btn-set-score",3,"click"],["azt-track-service","update-exam-VpkBJtDTEr",1,"btn","btn-set-score",3,"click"],[1,"font-medium",2,"width","auto"],[1,"p-2","mt-2","mb-2","alert","alert-danger","text-center",2,"align-items","center"],[2,"vertical-align","bottom"],[1,"error-block"],[4,"ngFor","ngForOf"],["azt-track-service","update-exam-CZTBs2UHWQ",1,"clickable","mt-1","ml-1",3,"matTooltip","click"],["class","mt-1",4,"ngIf"],[1,"mt-1"],["id","box-cropper-data",1,"mt-3"],["azt-track-service","update-exam--rL2wEApLv",1,"text-primary",3,"click"],["class","mx-1","style","color: #6c6c6c",4,"ngIf"],[1,"mx-1",2,"color","#6c6c6c"],[1,"list-question-box-item","mb-2",2,"position","relative"],[3,"examObj","questionObj","renderConfigObj","editGroup"],[1,"w-100",3,"id"],[3,"id"],[1,"box"],[1,"edit-question-header"],[1,"edit-question-header-left",3,"ngClass"],[3,"ngClass","questionId","knowledgeId","questionContent","levelId","subjectId"],["type","text","class","point-input form-control","appOnlyNumber","",3,"ngClass","decimal","value","input",4,"ngIf"],[1,"edit-question-header-center"],[1,"edit-question-header-right",3,"ngClass"],["class","edit-question-header-point",4,"ngIf"],[1,"card","question-card","mb-0","relative",2,"box-shadow","none"],[1,"mb-0","relative","overflow-hidden",3,"examObj","questionObj","follower","curQuestionIndex","isShowExplain","isInvalidValidation","setAnswerType4UpdateEmit","removeAnswerType4Emit","setAnswerOnUpdateEmit"],["class","card question-card","style","box-shadow: none",4,"ngIf"],["type","text","appOnlyNumber","",1,"point-input","form-control",3,"ngClass","decimal","value","input"],["class","edit-question-header-dr",4,"ngIf"],["style","width: 16px !important; height: 16px !important","name","trash-2",3,"matTooltip","click",4,"ngIf"],[1,"edit-question-header-dr"],["class","fix-answer",3,"matTooltip",4,"ngIf"],[1,"edit-question-header-show-tags"],["class","box-service-type no-wrap",4,"ngIf"],["class","edit-question-header-tag",4,"ngIf"],["azt-track-service","update-exam-N7CP3yfuUp",1,"edit-question-header-content",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4",3,"ngClass"],["d","M4 13.5V4a2 2 0 0 1 2-2h8.5L20 7.5V20a2 2 0 0 1-2 2h-5.5"],["points","14 2 14 8 20 8"],["d","M10.42 12.61a2.1 2.1 0 1 1 2.97 2.97L7.95 21 4 22l.99-3.95 5.43-5.44Z"],["class","",4,"ngIf"],["style","width: 16px !important; height: 16px !important","name","alert-octagon",3,"matTooltip","click",4,"ngIf"],["reportQTakeTest","",4,"ngIf"],["name","alert-octagon",2,"width","16px !important","height","16px !important",3,"matTooltip","click"],["reportQTakeTest",""],["azt-track-service","update-exam-5Q2j_re4X","matTooltipShowDelay","200",1,"btn","btn-sm","p-1","w-6","h-6",3,"matTooltip","click"],["name","alert-octagon"],["name","trash-2",2,"width","16px !important","height","16px !important",3,"matTooltip","click"],["azt-track-service","update-exam-QNh0Wct6N","matTooltipShowDelay","200",1,"btn","btn-sm","p-1","w-6","h-6",3,"matTooltip","click"],["name","trash-2"],[1,"fix-answer",3,"matTooltip"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide"],["x1","12","y1","17","x2","12","y2","22"],["d","M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z"],[1,"box-service-type","no-wrap"],[1,"first-text"],[1,"tag-chip",3,"removed"],["matChipRemove",""],[2,"font-size","15px"],[1,"edit-question-header-tag"],[3,"matMenuTriggerFor"],["d","M9 5H2v7l6.29 6.29c.94.94 2.48.94 3.42 0l3.58-3.58c.94-.94.94-2.48 0-3.42L9 5Z"],["d","M6 9.01V9"],["d","m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19"],["tags","matMenu"],[1,"dropdown-menu","show","relative","w-56"],[1,"dropdown-divider","border-slate-200","dark:border-darkmode-400"],["azt-track-service","update-exam-CZZ0b_rCyN",1,"dropdown-item","w-full",3,"disabled","click"],["azt-track-service","update-exam-mQam8bsKT2",1,"dropdown-item",3,"click"],[1,""],["azt-track-service","update-exam-Va0keXkLs",1,"edit-question-header-content","flex","items-center",3,"click"],[1,"w-4","h-4","inline-block",3,"ngClass"],["name","file-clock"],[1,"edit-question-header-point"],[2,"font-weight","500",3,"ngClass"],[1,"card","question-card",2,"box-shadow","none"],["class","card-body pt-1 pb-1 pl-0 pr-0 MW-800",4,"ngIf"],[1,"card-body","pt-1","pb-1","pl-0","pr-0","MW-800"],["alt","question media",1,"img-fluid","img_respon",3,"src"],[1,"contentDocx",2,"max-width","80%","margin-left","10%"],[3,"innerHtml"],[3,"content"],[1,"alert","alert-danger","flex-center-box"],[1,"title-no-permission"],[3,"startIndexQuestion","data","closeDialog","goToQuestion"]],template:function(t,i){if(1&t&&(e.TgZ(0,"teacher-layout",0),e.YNc(1,fJ,1,1,"azt-loading-effect",1),e.YNc(2,lK,1,1,"ng-template",null,2,e.W1O),e.qZA(),e.YNc(4,cK,2,2,"div",3),e.TgZ(5,"mat-menu",4,5)(7,"div",6)(8,"ul",7)(9,"li")(10,"span",8),e.NdJ("click",function(){return i.openDialogConfigExpandInfo()}),e._uU(11),e.ALo(12,"mytranslate"),e.qZA()(),e.TgZ(13,"li")(14,"span",9),e.NdJ("click",function(){return i.showAllResultQuestion()}),e._uU(15),e.ALo(16,"mytranslate"),e.ALo(17,"mytranslate"),e.ALo(18,"mytranslate"),e.qZA()(),e.TgZ(19,"li")(20,"span",10),e.NdJ("click",function(){return i.openExamInfoDialog()}),e._uU(21),e.ALo(22,"mytranslate"),e.qZA()()()()()),2&t){const a=e.MAs(3);e.Q6J("headerBackToLink",i.backToLink),e.xp6(1),e.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a),e.xp6(3),e.Q6J("ngIf",i.dataExamInfo.isShow),e.xp6(7),e.hij(" ",e.lcZ(12,8,"lang_core_exam_config_question_label")," "),e.xp6(4),e.AsE(" ",0==i.defaultShowResultMedia?e.lcZ(16,10,"lang_testbank_update_exam_show"):e.lcZ(17,12,"lang_testbank_update_exam_hide")," ",e.lcZ(18,14,"lang_testbank_update_exam_explain")," "),e.xp6(6),e.hij(" ",e.lcZ(22,16,"lang_auto_thong_tin_de_thi")," ")}},dependencies:[F.mk,F.sg,F.O5,qr.z2,qr.iO,qr.qH,Yo.Hw,Qi.VK,Qi.p6,Ai.gM,h.Fj,h.wV,h.JJ,h.qQ,h.On,h.oH,vi.l,Dt.Y,Fx,r_.M,Jw,Ww.J,Kw,t2.s,Gw,ty,wo._,_.Nh5,ye.JV,ye.QN,ye.Pf,ye.CL],styles:["#box-create-action[_ngcontent-%COMP%]   #resizeBox[_ngcontent-%COMP%]{margin-left:50%;width:10px;position:fixed;height:100vh;cursor:col-resize}#box-create-action[_ngcontent-%COMP%]   #resizeBox[_ngcontent-%COMP%]   .resizeContent[_ngcontent-%COMP%]{height:100vh;width:10px}#box-create-action[_ngcontent-%COMP%]   .inp-name-root[_ngcontent-%COMP%]{position:fixed;top:0;width:70%;left:15%;display:flex;justify-content:center;align-items:center;height:45px}#box-create-action[_ngcontent-%COMP%]   .inp-name-root[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;font-weight:500;color:#555;text-align:center;width:100%}#box-create-action[_ngcontent-%COMP%]   .box-control[_ngcontent-%COMP%]{justify-content:left;align-items:center}#box-create-action[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]{background:#4050b5;color:#fff;padding-left:20px;padding-right:20px;font-size:small;transition:all .5s}#box-create-action[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]:hover{background:#133864}#box-create-action[_ngcontent-%COMP%]   .btn-filter[_ngcontent-%COMP%]{color:#4050b5;background:white;padding-left:5px;padding-right:5px;font-size:small;transition:all .5s}#box-create-action[_ngcontent-%COMP%]   .btn-filter[_ngcontent-%COMP%]:hover{background:#e9e9e9}#box-create-action[_ngcontent-%COMP%]   .btn-set-score[_ngcontent-%COMP%]{text-transform:initial;background:#2361ae;color:#fff;font-size:small;transition:all .5s}#box-create-action[_ngcontent-%COMP%]   .btn-set-quest-label[_ngcontent-%COMP%]{text-transform:initial;background:#2361ae;color:#fff;font-size:small;transition:all .5s;margin-right:10px}#box-create-action[_ngcontent-%COMP%]   .btn-next-to-question[_ngcontent-%COMP%]{text-transform:initial;background:#2361ae;color:#fff;font-size:small;transition:all .5s}#box-create-action[_ngcontent-%COMP%]   .btn-set-score[_ngcontent-%COMP%]:hover, #box-create-action[_ngcontent-%COMP%]   .btn-set-quest-label[_ngcontent-%COMP%]:hover, #box-create-action[_ngcontent-%COMP%]   .btn-next-to-question[_ngcontent-%COMP%]:hover{background:#133864}#box-create-action[_ngcontent-%COMP%]   .btn-show[_ngcontent-%COMP%]{text-transform:initial;background:#fff;border:1px solid #eee;color:#000;font-size:small;transition:all .5s}#box-create-action[_ngcontent-%COMP%]   .btn-show[_ngcontent-%COMP%]{background:#eee}#box-create-action[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{background:#9e9e9e;color:#fff;padding:5px 20px;font-size:small;text-align:center;width:100%}#box-create-action[_ngcontent-%COMP%]   .btn-reload[_ngcontent-%COMP%]{background:#fff;color:#000;padding-left:20px;padding-right:20px;font-size:small;text-align:center;transition:all .5}#box-create-action[_ngcontent-%COMP%]   .btn-reload[_ngcontent-%COMP%]:hover{background:#eee}#box-create-action[_ngcontent-%COMP%]   .box-file[_ngcontent-%COMP%]{width:50%}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;color:#5c5c5c;overflow-y:auto}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview--blur_status[_ngcontent-%COMP%]{position:fixed;display:flex;width:100vw;height:100%;background:rgba(0,0,0,.7803921569);color:#fff;font-size:20px;font-weight:lighter;justify-content:center;align-items:center;cursor:progress;z-index:100;top:0;left:0}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview--blur_status-frame[_ngcontent-%COMP%]{height:85%;overflow-x:auto}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview--blur_status[_ngcontent-%COMP%]   .span-status[_ngcontent-%COMP%]{margin-top:10px;position:relative;animation:_ngcontent-%COMP%_animatefadeIn .3s}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .list-question-box[_ngcontent-%COMP%]{padding:0 20px 100px;background:rgb(244,244,244)}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .list-question-box-item[_ngcontent-%COMP%]{padding-top:20px}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .list-question-box-item__img[_ngcontent-%COMP%]{padding:10px 0;background:white;border-radius:5px 5px 0 0;cursor:ns-resize}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .list-question-box-item__img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;cursor:default}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .list-question-box-item__img_result[_ngcontent-%COMP%]{padding:10px;background:white;border-radius:0 0 5px 5px}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .list-question-box-item__img_result[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .list-question-box-item__control[_ngcontent-%COMP%]   .border-result[_ngcontent-%COMP%]{border-radius:0!important}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .list-question-box-item__control_flex[_ngcontent-%COMP%]{display:flex;align-items:center;background:#43bfb6;border-radius:0 0 5px 5px;color:#fff;padding:8px 20px;justify-content:space-between}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .list-question-box-item__control_flex[_ngcontent-%COMP%]   .btn-ans[_ngcontent-%COMP%]{background:white;height:25px;width:25px;border-radius:50%;display:inline-block;padding:0!important;margin-left:10px}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .list-question-box-item__control_flex[_ngcontent-%COMP%]   .btn-ans-result[_ngcontent-%COMP%]{color:#fff;background-color:#f39c12}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .list-question-box-item__control_flex[_ngcontent-%COMP%]   .btn-remove[_ngcontent-%COMP%]{background:red;color:#fff;box-shadow:inset 0 0 58px 8px #00000012}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .list-question-box-item__control_flex[_ngcontent-%COMP%]   .btn-edit[_ngcontent-%COMP%]{background:#f59c12;color:#fff}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .list-question-box-item__control_flex[_ngcontent-%COMP%]   .inp[_ngcontent-%COMP%]{margin-left:10px;width:50px;border:none;height:25px;background-color:#e0e0e0}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .list-question-box-item__control_flex[_ngcontent-%COMP%]   .inp-result[_ngcontent-%COMP%]{margin-left:10px;width:-moz-fit-content;width:fit-content;height:25px;padding:3px 10px;color:#949494;font-size:small}#box-create-action[_ngcontent-%COMP%]   #box-viewer-create-result[_ngcontent-%COMP%]{cursor:cell!important}#box-create-action[_ngcontent-%COMP%]   .pdf__view[_ngcontent-%COMP%]{display:block;border:none}#box-create-action[_ngcontent-%COMP%]   .box-control-crop[_ngcontent-%COMP%]{position:absolute;top:-15px;left:10px;z-index:10}#box-create-action[_ngcontent-%COMP%]   .box-control-crop-btn[_ngcontent-%COMP%]{width:25px;height:25px;display:flex;justify-content:center;align-items:center}#box-create-action[_ngcontent-%COMP%]   .crop_action[_ngcontent-%COMP%]{position:fixed;z-index:10;background:#e2e2e2;padding:9px 5px;border-radius:0 0 5px;display:grid}#box-create-action[_ngcontent-%COMP%]   .crop_preview[_ngcontent-%COMP%]{position:fixed;z-index:3;background:gainsboro;display:flex;justify-content:center;align-items:center;padding:10px}#box-create-action[_ngcontent-%COMP%]   .crop_preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;cursor:all-scroll}#box-create-action[_ngcontent-%COMP%]   .d-none[_ngcontent-%COMP%]{display:none!important}#box-create-action[_ngcontent-%COMP%]   .link-merge-image-control[_ngcontent-%COMP%]{margin-bottom:10px;text-align:center;margin-top:-10px}#box-create-action[_ngcontent-%COMP%]   .link-merge-image-control[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{cursor:pointer}#box-create-action[_ngcontent-%COMP%]   .link-merge-image-control[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]:hover{color:#f06292}#box-create-action[_ngcontent-%COMP%]   .cursor-all-scroll[_ngcontent-%COMP%]{cursor:all-scroll!important}#box-create-action[_ngcontent-%COMP%]   .btn-save-fixed[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:45px}@keyframes _ngcontent-%COMP%_animatefadeIn{0%{top:0;opacity:0}to{top:0;opacity:1}}#box-create-action[_ngcontent-%COMP%]   .box-file[_ngcontent-%COMP%]   .box-control[_ngcontent-%COMP%]{display:flex;justify-content:left;align-items:center}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]{background:inherit;background-color:#fff;border-width:1px;border-style:solid;border-color:#d6d6d6;border-radius:5px;box-shadow:none;height:300px;display:flex}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_drop[_ngcontent-%COMP%]{cursor:pointer;width:100%;display:flex;justify-content:center;align-items:center;color:#5c5c5c}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_drop--input[_ngcontent-%COMP%]{text-align:center}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .is-dragover[_ngcontent-%COMP%]{background:#e4e4e4!important}#box-create-action[_ngcontent-%COMP%]   .box-file-content--viewer[_ngcontent-%COMP%]{overflow:auto;position:relative;width:100%}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item[_ngcontent-%COMP%]:first-child{padding-top:0!important}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box[_ngcontent-%COMP%]{background:rgb(244,244,244)}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item[_ngcontent-%COMP%]{padding-top:20px}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item__img[_ngcontent-%COMP%]{padding:5px 0;background:white;border-radius:5px 5px 0 0;cursor:ns-resize;border:1px solid #2361ae}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item__img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;cursor:default}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item__img_result[_ngcontent-%COMP%]{padding:5px 0;cursor:ns-resize;background:white;border-radius:0 0 5px 5px;border:1px solid #2361ae}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item__img_result[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;cursor:default}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item__control[_ngcontent-%COMP%]   .border-result[_ngcontent-%COMP%]{border-radius:0!important}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item__control_flex[_ngcontent-%COMP%]{display:flex;align-items:center;background:#2361ae;border-radius:0 0 5px 5px;color:#fff;padding:8px 20px;justify-content:space-between}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item__control_flex[_ngcontent-%COMP%]   .btn-ans[_ngcontent-%COMP%]{background:white;height:25px;width:25px;border-radius:50%;display:inline-block;padding:0!important;margin-left:10px}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item__control_flex[_ngcontent-%COMP%]   .btn-ans-result[_ngcontent-%COMP%]{color:#fff;background-color:#f39c12}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item__control_flex[_ngcontent-%COMP%]   .btn-remove[_ngcontent-%COMP%]{background:red;color:#fff;box-shadow:inset 0 0 58px 8px #00000012}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item__control_flex[_ngcontent-%COMP%]   .btn-edit[_ngcontent-%COMP%]{background:#f59c12;color:#fff}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item__control_flex[_ngcontent-%COMP%]   .inp[_ngcontent-%COMP%]{margin-left:10px;width:50px;border:none;height:25px;background-color:#e0e0e0}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item__control_flex[_ngcontent-%COMP%]   .inp-result[_ngcontent-%COMP%]{margin-left:10px;width:-moz-fit-content;width:fit-content;height:25px;padding:3px 10px;color:#949494;font-size:small}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item[_ngcontent-%COMP%]   .link-merge-image-control[_ngcontent-%COMP%]{margin-bottom:10px;text-align:center;margin-top:-10px}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item[_ngcontent-%COMP%]   .link-merge-image-control[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{cursor:pointer}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item[_ngcontent-%COMP%]   .link-merge-image-control[_ngcontent-%COMP%]:hover{color:#f06292}#box-create-action[_ngcontent-%COMP%]   .inp-name-root[_ngcontent-%COMP%]{position:fixed;z-index:110;top:0;left:15%;display:flex;justify-content:center;align-items:center;height:45px}#box-create-action[_ngcontent-%COMP%]   .inp-name-root[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-width:1px;border-style:solid;border-radius:5px;border-color:#d6d6d6;font-weight:500;font-size:13px;text-align:center;width:50%;padding:4px}#box-create-action[_ngcontent-%COMP%]   .inp-name-root[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus-visible{outline:none}.inputMobile[_ngcontent-%COMP%]{border-width:1px;border-style:solid;border-radius:5px;font-weight:500;font-size:13px;text-align:center;width:100%;padding:4px;height:38px}.inputMobile[_ngcontent-%COMP%]:focus-visible{outline:none}.fixToolBar[_ngcontent-%COMP%]{width:100%!important;left:0!important;background-color:#fff}.fixToolBar[_ngcontent-%COMP%]   .marginInput[_ngcontent-%COMP%]{width:70%!important;margin-left:5%!important}.fixToolBar[_ngcontent-%COMP%]   .btn-save-fixed[_ngcontent-%COMP%]{right:5%!important}.btn-primary-icon[_ngcontent-%COMP%]{transition:all .3s}.btn-primary-icon[_ngcontent-%COMP%]:hover{background:#000}.listda[_ngcontent-%COMP%]{margin-top:30px;padding-left:20px}.ng-binding[_ngcontent-%COMP%]{font-size:24px;font-weight:400}.listli[_ngcontent-%COMP%]{padding:0;margin:0 5px 0 0;display:inline-block}.listli[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:50%;border:1px solid rgb(52,125,165);display:flex;align-items:center;color:#fff;justify-content:center;font-size:15px;cursor:pointer}.no-answered[_ngcontent-%COMP%]{background:#273044}.dot-example[_ngcontent-%COMP%]   .__choice[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:50%;border:1px solid #ffd300;background-color:#ffd300;display:inline-flex}.answer-box[_ngcontent-%COMP%]{background:#2361ae;color:#fff;border-bottom-left-radius:3px;border-bottom-right-radius:3px;padding:8px 20px;max-width:100%;display:flex!important;flex-wrap:wrap;justify-content:space-between}.chip_question[_ngcontent-%COMP%]{background-color:#ffd300;color:#fff!important}.point-input[_ngcontent-%COMP%]{border-width:1px;border-style:solid;border-radius:5px;font-weight:500;font-size:13px;text-align:center;width:60px;padding:4px;margin-left:5px}input[_ngcontent-%COMP%]::-webkit-outer-spin-button, input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.on-change[_ngcontent-%COMP%]{border:3px solid #25df5a}input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}.btn-detail[_ngcontent-%COMP%]{color:#2361ae}.btn-detail[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#2361ae}@media (max-width: 768px){.answer-box[_ngcontent-%COMP%]{justify-content:center}.list-question-box[_ngcontent-%COMP%]{margin-bottom:30px;scrollbar-width:none;-ms-overflow-style:none}.list-question-box[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.list-question-box[_ngcontent-%COMP%]   .point-input[_ngcontent-%COMP%]{width:60px}}.error-border[_ngcontent-%COMP%]{border:1px solid #ff4757!important}.error-border[_ngcontent-%COMP%]:focus{border:1px solid #ff4757!important}.edit-question-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:40px;padding:10px;border-radius:5px;margin-bottom:5px;flex-wrap:wrap}.edit-question-header-right[_ngcontent-%COMP%]{display:flex;align-items:center}.edit-question-header-tag[_ngcontent-%COMP%], .edit-question-header-content[_ngcontent-%COMP%]{padding:5px}.edit-question-header-tag[_ngcontent-%COMP%]:hover, .edit-question-header-content[_ngcontent-%COMP%]:hover{background:rgba(35,97,174,.1803921569);border-radius:5px}.edit-question-header-dr[_ngcontent-%COMP%]{color:#607d8b;margin:0 10px}.edit-question-header-content[_ngcontent-%COMP%]{cursor:pointer}.edit-question-header-point[_ngcontent-%COMP%]{text-align:right}.first-text[_ngcontent-%COMP%]{display:flex;align-items:center}.first-text[_ngcontent-%COMP%]   marquee[_ngcontent-%COMP%]{width:100px}.first-text[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;margin:0;padding:0;width:100%;display:flex;justify-content:center;align-items:center}.tag-chip[_ngcontent-%COMP%]{min-height:20px;font-size:12px}.fix-group[_ngcontent-%COMP%]{position:absolute;width:80px;height:50px;top:-21px;left:-36px;background-color:#d63031d4;transform:rotate(-45deg);color:#fff;font-size:9px;text-align:center;padding-top:30px}.justify-btn-block[_ngcontent-%COMP%]{justify-content:flex-end}@media screen and (max-width: 768px){.justify-btn-block[_ngcontent-%COMP%]{margin-top:5px;justify-content:flex-start}}.next-to-question[_ngcontent-%COMP%]{display:flex;align-items:center}.next-to-question[_ngcontent-%COMP%]   .btn-next-to-question-cancel[_ngcontent-%COMP%]{margin-left:10px}.next-to-question[_ngcontent-%COMP%]   .inputMobile[_ngcontent-%COMP%]{margin-right:10px}.next-to-question[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:100px;margin-right:10px}@media screen and (max-width: 500px){.edit-question-header-tag[_ngcontent-%COMP%], .edit-question-header-content[_ngcontent-%COMP%]{padding:5px 0}.btn-reload[_ngcontent-%COMP%], .btn-save[_ngcontent-%COMP%]{padding:.35rem .75rem!important}.btn-filter[_ngcontent-%COMP%]{padding-top:.35rem!important;padding-bottom:.35rem!important}.next-to-question[_ngcontent-%COMP%]{background:none!important}.inputMobile[_ngcontent-%COMP%], .btn-set-score[_ngcontent-%COMP%]{height:33px!important}.edit-question-header-dr[_ngcontent-%COMP%]{margin:0 9px}}"]}),n})();function dK(n,o){if(1&n&&e._UZ(0,"azt-loading-effect",3),2&n){const t=e.oxw();e.Q6J("currentStatusObj",t.statusObj)}}function mK(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",4)(1,"h3",5),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.TgZ(4,"ui-create-offline-exam",6),e.NdJ("handleSaveData",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.handleUpdateQuestionAndExam(a))}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,5,"lang_core_update_exam_offline_title")," "),e.xp6(2),e.Q6J("form",t.form)("markDetails",t.markDetails)("type",t.type)("dataExamOffline",t.dataExamOffline)}}let pK=(()=>{class n extends xe.Q{constructor(t,i,a){super(),this.activeRoute=t,this.offlineExamCreatorV2Service=i,this.configScoreScaleTrueFalseService=a,this.dataExamOffline={updateOfflineMixQuestionObjs:[],addOfflineMixQuestionObjs:[],schoolLevelId:1,schoolSubjectId:1,name:"",examHashId:""},this.backToLink="",this.type=Sa.updateExamCode,this.markDetails=[],this.form=new h.cw({examName:new h.NI("",{nonNullable:!0,validators:[h.kI.required,Da._.noWhiteSpace]}),examCodeList:new h.Oe([]),schoolLevel:new h.NI(0,{nonNullable:!0,validators:[h.kI.required]}),isResetLabelQuestionPart:new h.NI(!0,{nonNullable:!0,validators:[h.kI.required]}),schoolSubject:new h.NI(0,{nonNullable:!0,validators:[h.kI.required]}),trueFalseQuestionMarkConfig:new h.Oe([])})}handleUpdateQuestionAndExam(t){const i=[],a=[],r=this.commonService.getMyParam(this.activeRoute,"hash_id")??"",s=this.configScoreScaleTrueFalseService.convertTrueFalseForm(this.form);t.forEach(c=>{if(c.isUpdate){const u=[];c.offlineQuestionObjs.forEach(p=>{u.push({questionId:p.questionId??0,answer:p.answer,answerType:p.answerType,scorePerQuestion:p.scorePerQuestion,isEssay:p.isEssay})}),i.push({offlineMixQuestionId:c.offlineMixQuestionId??0,offlineMixQuestionHashId:c.offlineMixQuestionHashId,examPart:c.examPart,offlineQuestionObjs:u})}else a.push({offlineMixQuestionHashId:c.offlineMixQuestionHashId,examPart:c.examPart,offlineQuestionObjs:c.offlineQuestionObjs})}),this.waitDestroy(this.offlineExamCreatorV2Service.apiOfflineExamCreatorV2UpdateExamObjPost({examHashId:r,schoolLevelId:this.form.controls.schoolLevel.value,schoolSubjectId:this.form.controls.schoolSubject.value,name:this.form.controls.examName.value,updateOfflineMixQuestionObjs:i,addOfflineMixQuestionObjs:a,examTrueFalseQuestionMarkConfigObj:s}).subscribe(c=>{if(c.success){this.successStatusObj(),this.showSuccessSnack("lang_testbank_successful_exam_update");const u=this.getMyQueryParam("backto")??"admin/testbank/document-management/0/0/1";this.myNavigation(u)}else this.errorStatusObj(c.message??"",!0)}))}getData(){this.initStatusObj();let t=this.commonService.getMyParam(this.activeRoute,"hash_id")??"",i=Number(this.commonService.getMyParam(this.activeRoute,"offline_id"))??0;this.waitDestroy(this.offlineExamCreatorV2Service.apiOfflineExamCreatorV2GetInitExamInfoToUpdateOneOfflineMixQuestionIdGet(t,i).subscribe(a=>{if(a.success){const r=a.data?.updateOfflineExamRequest;r&&(this.dataExamOffline.updateOfflineMixQuestionObjs=r.updateOfflineMixQuestionObjs??[],this.dataExamOffline.schoolLevelId=r.schoolLevelId,this.dataExamOffline.examHashId=t,this.dataExamOffline.schoolSubjectId=r.schoolSubjectId,this.dataExamOffline.name=r.name,this.form.controls.examName.setValue(r.name),this.form.controls.schoolLevel.setValue(r.schoolLevelId),this.form.controls.schoolSubject.setValue(r.schoolSubjectId),this.form.controls.isResetLabelQuestionPart.setValue(r.resetQuestionIndex??!0),this.markDetails=r.examTrueFalseQuestionMarkConfigObj?.markDetails??[]),this.successStatusObj()}else this.errorStatusObj(a.message??"",!0)}))}ngOnInit(){super.ngOnInit();let t=Number(this.commonService.getMyParam(this.activeRoute,"cat_id"))??0;this.backToLink=this.commonService.getMyQueryParam("backto")??`/admin/testbank/create-new-document/${t}`,this.commonService.translateMetaData({title:"lang_core_update_exam_offline_title",description:"lang_core_update_exam_offline_title",image:"lang_cms_test_image"}),this.getData()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(E.gz),e.Y36(Za.Jt),e.Y36(WA))},n.\u0275cmp=e.Xpm({type:n,selectors:[["update-offline-exam-code"]],features:[e.qOj],decls:4,vars:3,consts:[[3,"headerBackToLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],["doneLoading",""],[3,"currentStatusObj"],[1,"mt-5","mx-auto",2,"max-width","1200px"],[1,"text-xl","font-medium"],[3,"form","markDetails","type","dataExamOffline","handleSaveData"]],template:function(t,i){if(1&t&&(e.TgZ(0,"teacher-layout",0),e.YNc(1,dK,1,1,"azt-loading-effect",1),e.YNc(2,mK,5,7,"ng-template",null,2,e.W1O),e.qZA()),2&t){const a=e.MAs(3);e.Q6J("headerBackToLink",i.backToLink),e.xp6(1),e.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a)}},dependencies:[F.O5,vi.l,wo._,e_,ye.JV],encapsulation:2}),n})();function hK(n,o){if(1&n&&e._UZ(0,"azt-loading-effect",3),2&n){const t=e.oxw();e.Q6J("currentStatusObj",t.statusObj)}}function AK(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",4)(1,"h3",5),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.TgZ(4,"ui-create-offline-exam",6),e.NdJ("handleSaveData",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.handleUpdateQuestionAndExam(a))}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,5,"lang_core_update_exam_offline")," "),e.xp6(2),e.Q6J("form",t.form)("markDetails",t.markDetails)("type",t.type)("dataExamOffline",t.dataExamOffline)}}let _K=(()=>{class n extends xe.Q{handleUpdateQuestionAndExam(t){const i=[],a=[],r=this.commonService.getMyParam(this.activeRoute,"hash_id")??"",s=this.configScoreScaleTrueFalseService.convertTrueFalseForm(this.form);t.forEach((c,u)=>{if(c.isUpdate){const m=[];c.offlineQuestionObjs.forEach(f=>{m.push({questionId:f.questionId??0,answer:f.answer,answerType:f.answerType,scorePerQuestion:f.scorePerQuestion,isEssay:f.isEssay})}),i.push({offlineMixQuestionId:c.offlineMixQuestionId??0,offlineMixQuestionHashId:c.offlineMixQuestionHashId,examPart:c.examPart,offlineQuestionObjs:m})}else a.push({offlineMixQuestionHashId:c.offlineMixQuestionHashId,examPart:c.examPart,offlineQuestionObjs:c.offlineQuestionObjs})}),this.waitDestroy(this.offlineExamCreatorV2Service.apiOfflineExamCreatorV2UpdateExamObjPost({examHashId:r,schoolLevelId:this.form.controls.schoolLevel.value,schoolSubjectId:this.form.controls.schoolSubject.value,name:this.form.controls.examName.value,resetQuestionIndex:this.form.controls.isResetLabelQuestionPart.value,updateOfflineMixQuestionObjs:i,addOfflineMixQuestionObjs:a,examTrueFalseQuestionMarkConfigObj:s}).subscribe(c=>{if(c.success){this.successStatusObj(),this.showSuccessSnack("lang_testbank_successful_exam_update");const u=this.getMyQueryParam("backto")??"admin/testbank/document-management/0/0/1";this.myNavigation(u)}else this.errorStatusObj(c.message??"",!0)}))}getData(){this.initStatusObj();let t=this.commonService.getMyParam(this.activeRoute,"hash_id")??"";this.waitDestroy(this.offlineExamCreatorV2Service.apiOfflineExamCreatorV2GetInitExamInfoToUpdateGet(t).subscribe(i=>{if(i.success){const a=i.data?.updateOfflineExamRequest;a&&(this.dataExamOffline.updateOfflineMixQuestionObjs=a.updateOfflineMixQuestionObjs??[],this.dataExamOffline.schoolLevelId=a.schoolLevelId,this.dataExamOffline.examHashId=t,this.dataExamOffline.schoolSubjectId=a.schoolSubjectId,this.dataExamOffline.name=a.name,this.form.controls.examName.setValue(a.name),this.form.controls.schoolLevel.setValue(a.schoolLevelId),this.form.controls.schoolSubject.setValue(a.schoolSubjectId),this.form.controls.isResetLabelQuestionPart.setValue(a.resetQuestionIndex??!0),this.markDetails=a.examTrueFalseQuestionMarkConfigObj?.markDetails??[]),this.successStatusObj()}else this.errorStatusObj(i.message??"",!0)}))}ngOnInit(){super.ngOnInit();let t=Number(this.commonService.getMyParam(this.activeRoute,"cat_id"))??0;this.backToLink=this.commonService.getMyQueryParam("backto")??`/admin/testbank/create-new-document/${t}`,this.commonService.translateMetaData({title:"lang_core_update_exam_offline",description:"lang_core_update_exam_offline",image:"lang_cms_test_image"}),this.getData()}constructor(t,i,a){super(),this.activeRoute=t,this.offlineExamCreatorV2Service=i,this.configScoreScaleTrueFalseService=a,this.dataExamOffline={updateOfflineMixQuestionObjs:[],addOfflineMixQuestionObjs:[],schoolLevelId:1,schoolSubjectId:1,name:"",examHashId:""},this.backToLink="",this.type=Sa.updateExam,this.markDetails=[],this.form=new h.cw({examName:new h.NI("",{nonNullable:!0,validators:[h.kI.required,Da._.noWhiteSpace]}),examCodeList:new h.Oe([]),schoolLevel:new h.NI(0,{nonNullable:!0,validators:[h.kI.required]}),isResetLabelQuestionPart:new h.NI(!0,{nonNullable:!0,validators:[h.kI.required]}),schoolSubject:new h.NI(0,{nonNullable:!0,validators:[h.kI.required]}),trueFalseQuestionMarkConfig:new h.Oe([])})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(E.gz),e.Y36(Za.Jt),e.Y36(WA))},n.\u0275cmp=e.Xpm({type:n,selectors:[["update-offline-exam"]],features:[e.qOj],decls:4,vars:3,consts:[[3,"headerBackToLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],["doneLoading",""],[3,"currentStatusObj"],[1,"mt-5","mx-auto",2,"max-width","1200px"],[1,"text-xl","font-medium"],[3,"form","markDetails","type","dataExamOffline","handleSaveData"]],template:function(t,i){if(1&t&&(e.TgZ(0,"teacher-layout",0),e.YNc(1,hK,1,1,"azt-loading-effect",1),e.YNc(2,AK,5,7,"ng-template",null,2,e.W1O),e.qZA()),2&t){const a=e.MAs(3);e.Q6J("headerBackToLink",i.backToLink),e.xp6(1),e.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a)}},dependencies:[F.O5,vi.l,wo._,e_,ye.JV],encapsulation:2}),n})();const fK=[{path:"",component:uZ,canActivate:[o5.v],children:[{path:"create-new-document/:cat_id",component:wE},{path:"azota-editor/:cat_id",component:Br},{path:"azota-editor/:cat_id/:quest_id",component:Br},{path:"mix-bank-template/:cat_id/:mode_name/:matrix_id",component:PZ},{path:"sync-folder/:cat_id",component:tq},{path:"document-management/0/:cat_id/:page",component:mL},{path:"document-management/1/:cat_id/:page",component:kL},{path:"export-exam-to-pdf/:exam_id",component:cZ},{path:"action-online-offline/:cat_id/:hash_id",component:tT},{path:"print-exam-and-ticket/:cat_id/:hash_id",component:$D},{path:"config-exam-offline/:cat_id/:hash_id",component:ln},{path:"config-exam-online/:cat_id/:hash_id",component:eS},{path:"config-homework/:cat_id/:hash_id",component:Yv},{path:"config-homework/:cat_id",component:Yv},{path:"download-file-print/:cat_id/:hash_id/:offline_hash_id",component:bN},{path:"exam-results-list/:cat_id/:id/:result_id",component:oF},{path:"publish-document/:type/:cat_id/:hash_id",component:iU},{path:"homework-results-list/:cat_id/:id/:hash_id",component:AN},{path:"create-file-pdf-ver2/:cat_id",component:n5},{path:"create-exam-by-excel/:cat_id",component:fE},{path:"create-exam-by-text/:cat_id",component:SE},{path:"create-manual-offline-exam/:cat_id",component:gE},{path:"test-review/:exam_id/:user_id/:student_id/:result_id",component:iz},{path:"statistic/:cat_id/:id",component:Uj},{path:"update-exam/:cat_id/:id",component:uK},{path:"update-exam-editor/:cat_id/:id",component:WH},{path:"update-offline-exam-code/:cat_id/:hash_id/:offline_id",component:pK},{path:"update-offline-exam/:cat_id/:hash_id",component:_K},{path:"create-website",component:DE},{path:"create-website-result",component:IE},{path:"powerpoint/:cat_id/:exam_id",component:pD},{path:"config-share-offline-result/:cat_id/:hash_id",component:tS},{path:"offline-answer-list/:cat_id/:hash_id",component:UZ},{path:"matrix-list/:cate/:page",component:zN},{path:"export-exam-result",component:YN}]}];let gK=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[E.Bz.forChild(fK),E.Bz,R4.fQ]}),n})();var l_=function(n){return n[n.Folder=1]="Folder",n[n.File=2]="File",n[n.Group=3]="Group",n[n.Question=4]="Question",n}(l_||{}),iy=I(73157);let oy=(()=>{class n{getQuestionIdsAndQuestionGroupIdSelected(){this.questionIdsSelected=this.examFinderModel.selectedQuestionObjs.map(t=>t.id),this.questionGroupIdsSelected=null!=this.examFinderModel.selectedGroupId?[this.examFinderModel.selectedGroupId]:[]}pushDataToFirstLevel(t,i){return this.resetModel(),this.examFinderModel.isFirstTimeToLoadData=!1,this.examFinderModel.levelObjs.push({levelId:this.examFinderModel.levelObjs.length,categoryObjs:t,documentObjs:i,currentCategoryObj:void 0,currentDocumentObj:void 0}),this.reCalculateCurrentSelected(),this.examFinderModel}getCurrentLevelPathObjs(){let t=[];return this.examFinderModel.levelObjs.forEach(i=>{i.currentCategoryObj?t.push({type:l_.Folder,id:i.currentCategoryObj.id,name:i.currentCategoryObj.name,shareType:i.currentCategoryObj.shareType}):i.currentDocumentObj?.exam&&t.push({type:l_.File,id:i.currentDocumentObj.exam.id,name:i.currentDocumentObj.exam.name,shareType:void 0})}),t}selectCategoryObjInOneLevel(t,i){let a=this.examFinderModel.levelObjs.find(r=>r.levelId==t.levelId);if(a){let r=this.examFinderModel.levelObjs.filter(l=>l.levelId<t.levelId);a.currentCategoryObj=i,a.currentDocumentObj=void 0,r.push(a),r.push({levelId:r.length,categoryObjs:[],documentObjs:[],currentCategoryObj:void 0,currentDocumentObj:void 0}),this.examFinderModel.levelObjs=r,this.removeSelectedDocumentInModel(),this.reCalculateCurrentSelected()}return this.examFinderModel}pushCategoryData(t,i,a,r){let s=this.examFinderModel.levelObjs.find(l=>l.levelId==t.levelId);if(s&&s.currentCategoryObj?.id==i.id){let l=this.examFinderModel.levelObjs.filter(c=>c.levelId<=t.levelId);l.push({levelId:l.length,categoryObjs:a,documentObjs:r,currentCategoryObj:void 0,currentDocumentObj:void 0}),this.examFinderModel.levelObjs=l,this.removeSelectedDocumentInModel(),this.reCalculateCurrentSelected(),setTimeout(()=>{this.scrollToTarget({parentId:"grid-parent",targetId:"col-last"})},1e3)}return this.examFinderModel}clearSelectedQuestionAndQuestionGroup(){this.examFinderModel.selectedGroupId=void 0,this.examFinderModel.selectedQuestionObjs=[],this.questionTypeSelectedObjs=[],this.questionTagSelectedObjs=[],this.reCalculateCurrentSelected()}selectDocumentObjInOneLevel(t,i){let a=this.examFinderModel.levelObjs.find(r=>r.levelId==t.levelId);if(a&&i.exam){let r=this.examFinderModel.levelObjs.filter(s=>s.levelId<t.levelId);a.currentCategoryObj=void 0,a.currentDocumentObj=i,r.push(a),this.examFinderModel.levelObjs=r,this.removeSelectedDocumentInModel(),this.reCalculateCurrentSelected()}return this.examFinderModel}pushQuestionData(t,i,a,r){let s=this.examFinderModel.levelObjs.find(l=>l.levelId==t.levelId);if(s&&s.currentDocumentObj?.exam?.id==i.exam?.id){let l=this.examFinderModel.levelObjs.filter(c=>c.levelId<=t.levelId);this.examFinderModel.levelObjs=l,this.removeSelectedDocumentInModel(),this.examFinderModel.currentQuestionObjs=r,this.reCalculateCurrentSelected(),setTimeout(()=>{this.scrollToTarget({parentId:"grid-parent",targetId:"col-last"})},1e3)}return this.examFinderModel}handleGetAllQuestionStringCode(){if(this.examFinderModel.selectedQuestionObjs.length<=0){let t=this.examFinderModel.selectedGroupId;this.examFinderModel.selectedQuestionObjs=null!=t?this.examFinderModel.currentQuestionObjs.filter(i=>i.groupInfo?.groupId==t):this.examFinderModel.currentQuestionObjs}this.reCalculateCurrentSelected()}handSelectOneQuestionId(t){if(this.examFinderModel.selectedQuestionObjs.find(r=>r.id==t))this.examFinderModel.selectedQuestionObjs=this.examFinderModel.selectedQuestionObjs.filter(r=>r.id!=t);else{var a=this.examFinderModel.currentQuestionObjs.find(r=>r.id==t);a&&this.examFinderModel.selectedQuestionObjs.push(a)}this.reCalculateCurrentSelected()}handSelectQuestionGroupId(t){this.examFinderModel.selectedGroupId=this.examFinderModel.selectedGroupId==t?void 0:t,this.reCalculateCurrentSelected()}getDefaultFinderModel(){return{isFirstTimeToLoadData:!0,levelObjs:[],currentQuestionObjs:[],isShowQuestionObjs:!1,selectedGroupId:void 0,selectedQuestionObjs:[],hasSelectedItem:!1}}convertDocumentFile(t){var i=[];return t.forEach(a=>{a.exam&&i.push({name:a.exam.name,updatedAt:a.exam.updatedAt,attended:a.exam.attended,isPublished:a.exam.isPublished,exam:a.exam,type:"exam",shared:!1,paths:[],isGlobalAzota:0})}),i}scrollToTarget({parentId:t,targetId:i}){let a=document.getElementById(t),s=document.getElementById(i)?.offsetLeft;a?.scrollTo({left:s})}removeSelectedDocumentInModel(){this.examFinderModel.currentQuestionObjs=[],this.examFinderModel.selectedGroupId=void 0,this.examFinderModel.selectedQuestionObjs=[],this.examFinderModel.isShowQuestionObjs=!1}resetModel(){this.examFinderModel=this.getDefaultFinderModel()}reCalculateCurrentSelected(){let i=this.commonService.myClone(this.examFinderModel.levelObjs).reverse().find(a=>a.currentDocumentObj||a.currentCategoryObj);this.examFinderModel.hasSelectedItem=null!=i,this.examFinderModel.isShowQuestionObjs=null!=i?.currentDocumentObj,this.examFinderModel.currentDocumentObj=i?.currentDocumentObj?.exam?{...i.currentDocumentObj.exam,countQuestion:0,showFrontend:1,editable:!0,allowStudentView:!0}:void 0,this.getQuestionIdsAndQuestionGroupIdSelected()}constructor(t,i){this.testFinderSupportService=t,this.commonService=i,this.questionTagSelectedObjs=[],this.questionTypeSelectedObjs=[],this.questionIdsSelected=[],this.questionGroupIdsSelected=[],this.examFinderModel=this.getDefaultFinderModel(),this.testFinderSupportService.listenQuestionGroupSelectedEvent().subscribe(a=>{this.handSelectQuestionGroupId(a)}),this.testFinderSupportService.listenQuestionSelectedEvent().subscribe(a=>{this.handSelectOneQuestionId(a)})}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(iy.c),e.LFG(Yn.z))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function xK(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"mat-option",4),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.changeSelection(r,s.isSelectedOptions(r.key)))}),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()}if(2&n){const t=o.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}const bK=function(){return["new-select-design-panel"]};let vK=(()=>{class n extends xe.Q{isSelectedOptions(t){return null!=this.form.getRawValue().selectControl.find(i=>i.key==t)}get currentPlaceHolder(){let t=this.getCurrentSelected();return t.length>0?this.commonService.translateToKeyParam("lang_testbank_exam_finder_total_item_selected",t.length.toString()):this.commonService.myTranslateInstant(this.placeHolderKey)??""}get currentSelectValue(){let t=this.getCurrentSelected();return this.isSelectAll()?this.commonService.translateToKeyParam("lang_testbank_exam_finder_all_item_selected",t.length.toString()):t.map(i=>i.value).join(", ")}get haveSelected(){return this.getCurrentSelected().length>0}getCurrentSelected(){return this.form.getRawValue().selectControl.filter(t=>t.key!=this.ALL_KEY)}isSelectAll(){return this.getCurrentSelected().length==this.currentOptions.length-1}changeSelection(t,i){if(t.key==this.ALL_KEY)this.form.controls.selectControl.setValue(i?this.currentOptions:[]);else{let a=this.getCurrentSelected().map(r=>r.key);this.form.controls.selectControl.setValue(a.length==this.currentOptions.length-1?this.currentOptions:this.currentOptions.filter(r=>a.includes(r.key)))}}ngOnInit(){this.currentOptions="QUESTION_TAG"==this.listCheckboxType?this.questionTagList:this.questionTypeList,this.placeHolderKey="QUESTION_TAG"==this.listCheckboxType?"lang_auto_select_tag":"lang_auto_select_type";let t="QUESTION_TAG"==this.listCheckboxType?this.testFinderService.questionTagSelectedObjs:this.testFinderService.questionTypeSelectedObjs;this.form.controls.selectControl.setValue(this.currentOptions.filter(i=>t.map(a=>a.key).includes(i.key))),this.form.valueChanges.subscribe(i=>{let a=this.getCurrentSelected();"QUESTION_TAG"==this.listCheckboxType?this.testFinderService.questionTagSelectedObjs=a:"QUESTION_TYPE"==this.listCheckboxType&&(this.testFinderService.questionTypeSelectedObjs=a),this.selectedEvent.emit(a)}),super.ngOnInit()}constructor(t){super(),this.testFinderService=t,this.selectedEvent=new e.vpe,this.ALL_KEY="ALL_KEY",this.questionTagList=[{key:this.ALL_KEY,value:"lang_auto_tat_ca"},{key:"NB",value:"Nh\u1eadn bi\u1ebft"},{key:"TH",value:"Th\xf4ng hi\u1ec3u"},{key:"VD",value:"V\u1eadn d\u1ee5ng"},{key:"VDC",value:"V\u1eadn d\u1ee5ng cao"}],this.questionTypeList=[{key:this.ALL_KEY,value:"lang_auto_tat_ca"},{key:"TN",value:"Tr\u1eafc nghi\u1ec7m"},{key:"TL",value:"T\u1ef1 lu\u1eadn"},{key:"\u0110T",value:"\u0110i\u1ec1n t\u1eeb"},{key:"\u0110S",value:"\u0110\xfang sai"}],this.currentOptions=[],this.placeHolderKey="",this.form=new h.cw({selectControl:new h.NI([],{nonNullable:!0})})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(oy))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-select-search-dropdown"]],inputs:{listCheckboxType:"listCheckboxType"},outputs:{selectedEvent:"selectedEvent"},features:[e.qOj],decls:7,vars:8,consts:[[1,"new-select-design",3,"formGroup"],["appearance","outline"],["formControlName","selectControl","multiple","true",3,"ngClass","panelClass","disableOptionCentering","placeholder"],["azt-track-service","filter-multiple-select-kKzEUQdMs8l",3,"value","click",4,"ngFor","ngForOf"],["azt-track-service","filter-multiple-select-kKzEUQdMs8l",3,"value","click"]],template:function(t,i){1&t&&(e.TgZ(0,"form",0)(1,"mat-form-field",1)(2,"mat-select",2)(3,"mat-select-trigger")(4,"span"),e._uU(5),e.qZA()(),e.YNc(6,xK,3,4,"mat-option",3),e.qZA()()()),2&t&&(e.Q6J("formGroup",i.form),e.xp6(2),e.Q6J("ngClass",i.haveSelected?"custom-selected-text":"")("panelClass",e.DdM(7,bK))("disableOptionCentering",!0)("placeholder",i.currentPlaceHolder),e.xp6(3),e.Oqu(i.currentSelectValue),e.xp6(1),e.Q6J("ngForOf",i.currentOptions))},dependencies:[F.mk,F.sg,js.ey,ms.KE,Zg.gD,Zg.$L,h._Y,h.JJ,h.JL,h.sg,h.u,wt.M,ye.JV],styles:[".search-input[_ngcontent-%COMP%]{border:none!important;outline:none!important}.new-select-design[_ngcontent-%COMP%]{padding:0!important}form[_ngcontent-%COMP%]{display:flex;flex-direction:column}mat-label[_ngcontent-%COMP%]{display:block;font-size:14px;font-weight:700;color:#63738a}input[_ngcontent-%COMP%]{font-size:16px}.se-search[_ngcontent-%COMP%]{color:#008cff;font-size:22px}ngk-icon[_ngcontent-%COMP%]{cursor:pointer;fill:#0000008a}.mat-option.mat-option-disabled[_ngcontent-%COMP%]{color:#000!important}.no-results[_ngcontent-%COMP%]{display:block;line-height:1;font-size:14px;margin:1rem;text-align:center}.search-option[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;padding:15px 10px}.search-option[_ngcontent-%COMP%]   .ngk-search-icon[_ngcontent-%COMP%], .search-option[_ngcontent-%COMP%]   .se-search[_ngcontent-%COMP%]{margin-right:10px;margin-left:-16px}.search-option[_ngcontent-%COMP%]   .ngk-clear-icon[_ngcontent-%COMP%]{align-self:flex-end;margin-right:-16px}mat-error[_ngcontent-%COMP%]{color:#d6312b;margin-top:5px;font-size:16px}.custom-selected-text[_ngcontent-%COMP%]  .mat-select-placeholder{color:#000!important;opacity:1!important}"]}),n})();const wK=function(n){return{"skeleton-box-loading":n}};function yK(n,o){if(1&n&&e._UZ(0,"div",3),2&n){const t=e.oxw();e.Q6J("ngClass",e.VKq(1,wK,t.renderConfigObj.isFirstRender))}}function CK(n,o){if(1&n&&e._UZ(0,"azt-test-audio-ui",12),2&n){const t=e.oxw(2);e.Q6J("questionObj",t.questionObj)("isShowList",!0)}}const TK=function(n){return{"pb-2":n}},kK=function(n){return{"question-standalone-has-selected":n}};function SK(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",4)(1,"div",5),e._UZ(2,"azt-question-group-content-box",6),e.TgZ(3,"div",7),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.handleSelect(a.questionObj))}),e.YNc(4,CK,1,2,"azt-test-audio-ui",8),e.TgZ(5,"div",9),e._UZ(6,"azt-question-label-box",10),e.qZA(),e._UZ(7,"azt-question-content-box",11)(8,"azt-question-answer-view-content-box",11),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(1),e.Udp("font-size","1em")("line-height","1.7"),e.Q6J("id","question_render_container_"+t.questionObj.id)("ngClass",e.VKq(23,TK,t.questionObj.attachments.length>0)),e.xp6(1),e.Q6J("examObj",t.examObj)("questionObj",t.questionObj)("renderConfigObj",t.renderConfigObj)("questionGroupIdsSelected",t.questionGroupIdsSelected)("isTestFinderModule",!0),e.xp6(1),e.Q6J("ngClass",e.VKq(25,kK,!!t.questionIdsSelected.includes(t.questionObj.id))),e.xp6(1),e.Q6J("ngIf",t.questionObj.attachments.length>0),e.xp6(2),e.Q6J("examObj",t.examObj)("questionObj",t.questionObj)("renderConfigObj",t.renderConfigObj)("curQuestionIndex",t.curQuestionIndex),e.xp6(1),e.Q6J("examObj",t.examObj)("questionObj",t.questionObj)("renderConfigObj",t.renderConfigObj),e.xp6(1),e.Q6J("examObj",t.examObj)("questionObj",t.questionObj)("renderConfigObj",t.renderConfigObj)}}let EK=(()=>{class n extends a2.R{handleSelect(t){this.testFinderSupportService.sendQuestionSelectedEvent(t.id)}ngOnInit(){super.ngOnInit();let t=new Uw.m(!1,!1,!1);super.initData(t,this.follower,this.questionObj)}constructor(t){super(),this.testFinderSupportService=t,this.follower=new mu.p,this.curQuestionIndex=0,this.questionIdsSelected=[],this.questionGroupIdsSelected=[]}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(iy.c))},n.\u0275cmp=e.Xpm({type:n,selectors:[["azt-question-standalone-for-test-finder"]],inputs:{examObj:"examObj",questionObj:"questionObj",follower:"follower",curQuestionIndex:"curQuestionIndex",questionIdsSelected:"questionIdsSelected",questionGroupIdsSelected:"questionGroupIdsSelected"},features:[e.qOj],decls:4,vars:3,consts:[["load_effect_lazy","",1,"question-standalone-box",3,"id"],["class","question-standalone-loader-box",3,"ngClass",4,"ngIf","ngIfElse"],["elementRended",""],[1,"question-standalone-loader-box",3,"ngClass"],[1,"question-standalone-content-box"],[1,"question-standalone-container","box","question-standalone-for-test-finder",3,"id","ngClass"],[3,"examObj","questionObj","renderConfigObj","questionGroupIdsSelected","isTestFinderModule"],[1,"question-standalone-main-content","clickable",3,"ngClass","click"],[3,"questionObj","isShowList",4,"ngIf"],[1,"flex","items-center","justify-between"],[3,"examObj","questionObj","renderConfigObj","curQuestionIndex"],[3,"examObj","questionObj","renderConfigObj"],[3,"questionObj","isShowList"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0),e.YNc(1,yK,1,3,"div",1),e.YNc(2,SK,9,27,"ng-template",null,2,e.W1O),e.qZA()),2&t){const a=e.MAs(3);e.Q6J("id","question_render_element_"+i.questionObj.id),e.xp6(1),e.Q6J("ngIf",!i.renderConfigObj.isRenderElement)("ngIfElse",a)}},dependencies:[F.mk,F.O5,r2.C,jw.T,Ww.J,qw.S,Rw.L,zw.w],styles:['.pr-7[_ngcontent-%COMP%]{padding-right:28px}.w-38px[_ngcontent-%COMP%]{width:38px}.remove-grid[_ngcontent-%COMP%]{display:block!important}.question-standalone-loader-box[_ngcontent-%COMP%]{min-height:50px}  .skeleton-box-loading{width:100%;height:30px;max-width:100%;margin-bottom:5px;display:inline-block}  .skeleton-box-loading:after{position:absolute;inset:0;transform:translate(-100%);animation:_ngcontent-%COMP%_shimmer 2s infinite;content:""}.question-standalone-box[_ngcontent-%COMP%]{margin-bottom:30px;display:block;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 rgba(0, 0, 0, 0)),var(--tw-ring-shadow, 0 0 rgba(0, 0, 0, 0)),var(--tw-shadow);border-radius:.375rem}.question-standalone-container[_ngcontent-%COMP%]{padding:15px}.question-standalone-for-test-finder[_ngcontent-%COMP%]{border:none;margin-bottom:0;padding:0}.question-standalone-for-test-finder[_ngcontent-%COMP%]   .question-standalone-main-content[_ngcontent-%COMP%]{padding:15px;border:1px solid rgb(228,228,228)}.group-of-question-standalone-for-test-finder[_ngcontent-%COMP%]{padding:15px!important;border:1px solid rgb(228,228,228)!important}.question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid #2262AE!important;outline:3px solid rgba(125,160,201,.65)!important}.group-of-question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid green!important;outline:3px solid rgba(0,193,0,.321)!important}.question-standalone-container[_ngcontent-%COMP%]:hover   .prev_question_btn[_ngcontent-%COMP%], .question-standalone-container[_ngcontent-%COMP%]:hover   .next_question_btn[_ngcontent-%COMP%]{visibility:visible}.question-standalone-label[_ngcontent-%COMP%]{font-weight:700}.question-standalone-content-box[_ngcontent-%COMP%]{position:relative}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]{color:#f44336;position:relative;padding-left:20px;display:flex;align-items:center}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]:before{content:"!";position:absolute;left:0;color:#fff;background:#f44336;width:15px;height:15px;text-align:center;border-radius:50%;font-size:smaller;display:flex;justify-content:center;align-items:center}.question-standalone-step-container-box[_ngcontent-%COMP%]{margin-bottom:50px}.group-content-of-question-standalone[_ngcontent-%COMP%]{margin-bottom:10px;font-weight:700}.answer[_ngcontent-%COMP%]{display:flex;align-items:center}.answer-label[_ngcontent-%COMP%]{width:20px;height:30px;min-width:20px;min-height:30px;display:flex;align-items:center;justify-content:flex-start;border-radius:50%;border-width:2px;border-style:solid;border-color:transparent}.answer-box[_ngcontent-%COMP%]{border-radius:0 0 3px 3px;padding:8px 20px;justify-content:space-between;align-items:center}.selected-answer[_ngcontent-%COMP%]{background-color:#f39c12;color:#fff}.answer-content-front[_ngcontent-%COMP%]{display:flex!important;flex-wrap:wrap;width:calc(100% - 30px)}.explainTxt[_ngcontent-%COMP%]{width:125px;font-weight:500;display:flex;align-items:center}#examHeader[_ngcontent-%COMP%]{display:block;border:1px solid #e7e7e7;border-radius:3px;overflow:hidden}.next_question_btn[_ngcontent-%COMP%]{position:absolute;right:10px;top:35%;padding:.35rem .45rem;background-color:#a3a5a670;border-radius:50%;visibility:hidden}.prev_question_btn[_ngcontent-%COMP%]{position:absolute;left:10px;top:35%;padding:.35rem .45rem;background-color:#a3a5a670;border-radius:50%;visibility:hidden}.prev_question_btn[_ngcontent-%COMP%]:hover, .next_question_btn[_ngcontent-%COMP%]:hover{visibility:visible}.arrow_btn[_ngcontent-%COMP%]{font-size:20px;vertical-align:middle;width:20px;height:20px;color:#fff;margin-left:auto!important;margin-right:auto!important;-webkit-user-select:none;user-select:none}.bottom_action[_ngcontent-%COMP%]{position:fixed;padding:15px;bottom:0;left:0;background:#312e2e;color:#fff;width:100%}.bottom_action[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]{display:block}.btn-ans-result[_ngcontent-%COMP%]{color:#fff;background-color:#f39c12}.show-list[_ngcontent-%COMP%]{max-width:200px}.show-list[_ngcontent-%COMP%]   .show-sheet[_ngcontent-%COMP%]   .listli[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:27px;height:27px;border-radius:50%;border:1px solid #347da5;display:flex;align-items:center;color:#fff;justify-content:center;font-size:12px;cursor:pointer;-webkit-user-select:none;user-select:none}.top_action[_ngcontent-%COMP%]{position:fixed;padding:10px;top:0;left:0;background:#312e2e;color:#fff;width:100%}.scrollSheetMobile[_ngcontent-%COMP%]{max-height:200px;overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.scrollSheetMobile[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.notify-badge[_ngcontent-%COMP%]{position:absolute;right:3px;top:3px;text-align:center;color:#afafaf;padding:0;font-size:20px;cursor:pointer}.attach-container[_ngcontent-%COMP%]{background:#fff;padding:10px 0 0;border-radius:5px;width:83.33%;border:1px solid #e8e8e8}.answer-review[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:50%;border:1px solid rgb(52,125,165);display:flex;align-items:center;color:#fff;justify-content:center;font-size:15px;-webkit-user-select:none;user-select:none}.border-none[_ngcontent-%COMP%]{border:none!important}.bg-question[_ngcontent-%COMP%]{margin-top:15px;padding:15px 10px;background:#fff}.question-pending-part[_ngcontent-%COMP%]{width:100%;height:50px}.pencil-edit[_ngcontent-%COMP%]{position:absolute;top:-5px;right:-5px;width:30px;height:30px;border-radius:50%;text-align:center;background:darkgrey;z-index:9999}.pencil-edit[_ngcontent-%COMP%]   .lucide[_ngcontent-%COMP%]{color:#fff;stroke-width:2.5px;height:29px}.margin-question-bar[_ngcontent-%COMP%]{margin-top:calc(3rem + 40px)!important}.sheet-screen[_ngcontent-%COMP%]{max-height:calc(100vh - 140px);overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.sheet-screen[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}  .layout{display:grid;margin:20px 0;grid-row-gap:20px}  .layout-4{grid-template-columns:1fr 1fr 1fr 1fr}  .layout-2{grid-template-columns:1fr 1fr}  .layout-1{grid-template-columns:1fr}  .question-standalone-content-box{max-width:100%;overflow-x:auto;overflow-y:hidden}  #boxContentQuestion .question-standalone-container{max-width:800px}@keyframes _ngcontent-%COMP%_shimmer{to{transform:translate(100%)}}@media (max-width: 768px){.answer-content-front[_ngcontent-%COMP%]{justify-content:center}.btn-ans-result[_ngcontent-%COMP%]{margin-right:auto!important}}@media (max-width: 800px){  #boxContentQuestion .question-standalone-container{max-width:calc(90vw - 16px)!important}}']}),n})();function OK(n,o){if(1&n&&e._UZ(0,"azt-question-standalone-for-test-finder",3),2&n){const t=e.oxw(),i=t.$implicit,a=t.index,r=e.oxw();e.Q6J("examObj",r.exam)("hidden",!i.isShow)("follower",r.followerRenderQuest)("questionObj",i)("curQuestionIndex",a)("questionIdsSelected",r.questionIdsSelected)("questionGroupIdsSelected",r.questionGroupIdsSelected)}}function IK(n,o){if(1&n&&(e.ynx(0),e.YNc(1,OK,1,7,"azt-question-standalone-for-test-finder",2),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.exam)}}let MK=(()=>{class n extends xe.Q{getTagsOfQuestion(t){let i=[];return t.tags?.forEach(a=>{a.code&&i.push(a.code)}),i}getFilterTagValue(t){let i=[];return t.forEach(a=>{i.push(a.key)}),i}getFilterTypeValue(t){let i=[];return t.forEach(a=>{"TN"==a.key?(i.push(1),i.push(2)):"TL"==a.key?i.push(3):"\u0110T"==a.key?i.push(4):"\u0110S"==a.key&&i.push(5)}),i}checkValidTagQuestion(t,i){let a=!1;return t.forEach(r=>{this.commonService.isExistInArray(i,r)&&(a=!0)}),a}ngOnChanges(){let t=this.getFilterTagValue(this.filterTag),i=this.getFilterTypeValue(this.filterType);for(let a=0;a<this.questionList.length;a++){let r=this.getTagsOfQuestion(this.questionList[a]);this.questionList[a].isShow=t.length>0&&!i.length?!!this.checkValidTagQuestion(r,t):i.length>0&&!t.length?!!this.commonService.isExistInArray(i,this.questionList[a].answerType):!(t.length>0&&i.length>0)||!!this.checkValidTagQuestion(r,t)&&!!this.commonService.isExistInArray(i,this.questionList[a].answerType)}}ngOnInit(){this.followerRenderQuest.setNumQuest(this.questionList.length),this.questionList.forEach(t=>t.isRoleTeacher=!0),super.ngOnInit()}constructor(t){super(),this.commonService=t,this.questionList=[],this.filterTag=[],this.filterType=[],this.questionIdsSelected=[],this.questionGroupIdsSelected=[],this.followerRenderQuest=new mu.p}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Yn.z))},n.\u0275cmp=e.Xpm({type:n,selectors:[["azt-preview-list-question"]],inputs:{exam:"exam",questionList:"questionList",filterTag:"filterTag",filterType:"filterType",questionIdsSelected:"questionIdsSelected",questionGroupIdsSelected:"questionGroupIdsSelected"},features:[e.qOj,e.TTD],decls:2,vars:1,consts:[["id","boxContentQuestion"],[4,"ngFor","ngForOf"],[3,"examObj","hidden","follower","questionObj","curQuestionIndex","questionIdsSelected","questionGroupIdsSelected",4,"ngIf"],[3,"examObj","hidden","follower","questionObj","curQuestionIndex","questionIdsSelected","questionGroupIdsSelected"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.YNc(1,IK,2,1,"ng-container",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngForOf",i.questionList))},dependencies:[F.sg,F.O5,EK],encapsulation:2}),n})();const LK=["colItem"],BK=["resizeBarH"],PK=["aztColResizable",""];function QK(n,o){1&n&&(e.TgZ(0,"div",6)(1,"div",2),e.Hsn(2,1),e.qZA()())}const FK=[[["","colLeftContent",""]],[["","colRightContent",""]]],NK=function(n){return{width:n}},ZK=["[colLeftContent]","[colRightContent]"];let DK=(()=>{class n extends xe.Q{constructor(){super(...arguments),this.hasColRight=!1,this.width=0,this.x=0,this.y=0,this.leftWidth=0,this.handleMouseUp=t=>{this.resizeBarH&&this.resizeBarH.nativeElement.classList.remove("hover"),this.resizeBarH?.nativeElement.style.removeProperty("cursor"),document.body.style.removeProperty("cursor"),this.colItem?.nativeElement.style.removeProperty("user-select"),this.colItem?.nativeElement.style.removeProperty("pointer-events"),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp)},this.handleMouseMove=t=>{if(this.colItem){let i=this.colItem.nativeElement;i.style.width=`${this.leftWidth+(t.clientX-this.x)}px`,i.style.userSelect="none",i.style.pointerEvents="none",document.body.style.cursor="col-resize"}}}handleMouseDown(t){this.colItem&&(this.x=t.clientX,this.y=t.clientY,this.leftWidth=this.colItem.nativeElement.getBoundingClientRect().width,this.resizeBarH&&this.resizeBarH.nativeElement.classList.add("hover"),document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseUp))}}return n.\u0275fac=function(){let o;return function(i){return(o||(o=e.n5z(n)))(i||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["","aztColResizable",""]],viewQuery:function(t,i){if(1&t&&(e.Gf(LK,5),e.Gf(BK,5)),2&t){let a;e.iGM(a=e.CRH())&&(i.colItem=a.first),e.iGM(a=e.CRH())&&(i.resizeBarH=a.first)}},inputs:{hasColRight:"hasColRight",width:"width"},features:[e.qOj],attrs:PK,ngContentSelectors:ZK,decls:7,vars:4,consts:[[1,"col-item","border-r","border-slate-400","dark:border-darkmode-400",3,"ngStyle"],["colItem",""],[1,"col-content"],[1,"resize-bar","resize-bar-h",3,"mousedown"],["resizeBarH",""],["class","col-right",4,"ngIf"],[1,"col-right"]],template:function(t,i){1&t&&(e.F$t(FK),e.TgZ(0,"div",0,1)(2,"div",2),e.Hsn(3),e.qZA(),e.TgZ(4,"div",3,4),e.NdJ("mousedown",function(r){return i.handleMouseDown(r)}),e.qZA()(),e.YNc(6,QK,3,0,"div",5)),2&t&&(e.Q6J("ngStyle",e.VKq(2,NK,i.hasColRight?"60%":i.width?i.width+"px":"100%")),e.xp6(6),e.Q6J("ngIf",i.hasColRight))},dependencies:[F.O5,F.PC],styles:[".col-item[_ngcontent-%COMP%]{min-width:150px;min-height:150px;height:100%;position:relative}.col-item[_ngcontent-%COMP%]   .resize-bar[_ngcontent-%COMP%]{position:absolute;background-color:transparent}.col-item[_ngcontent-%COMP%]   .resize-bar[_ngcontent-%COMP%]:hover{background-color:#2262ae;cursor:col-resize}.col-item[_ngcontent-%COMP%]   .resize-bar.hover[_ngcontent-%COMP%]{background-color:#2262ae}.col-item[_ngcontent-%COMP%]   .resize-bar.resize-bar-h[_ngcontent-%COMP%]{width:3px;right:0;top:0;bottom:0}.col-right[_ngcontent-%COMP%]{flex:auto}.col-content[_ngcontent-%COMP%]{height:100%;padding:10px;overflow-y:auto;overflow-x:hidden}"]}),n})();function UK(n,o){1&n&&(e.TgZ(0,"span",26),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_auto_chia_se")))}const ay=function(n,o){return{selected:n,last:o}};function jK(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",20),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw(2).$implicit,l=e.oxw(2);return e.KtG(l.clickToCategoryObj(s,r))}),e.O4$(),e.TgZ(1,"svg",21),e._UZ(2,"path",22),e.qZA(),e.kcU(),e.TgZ(3,"span",23),e.ALo(4,"mytranslate"),e.TgZ(5,"span"),e._uU(6),e.ALo(7,"mytranslate"),e.qZA()(),e.YNc(8,UK,3,3,"span",24),e._UZ(9,"mat-spinner",25),e.qZA()}if(2&n){const t=o.$implicit,i=e.oxw(2),a=i.$implicit;e.Q6J("ngClass",e.WLB(10,ay,a.currentCategoryObj&&a.currentCategoryObj.id==t.id,i.last&&a.currentCategoryObj&&a.currentCategoryObj.id==t.id)),e.xp6(3),e.Q6J("title",e.lcZ(4,6,t.name)),e.xp6(3),e.Oqu(e.lcZ(7,8,t.name)),e.xp6(2),e.Q6J("ngIf",-1==t.id),e.xp6(1),e.Q6J("strokeWidth",2)("diameter",24)}}function qK(n,o){1&n&&(e.O4$(),e.TgZ(0,"svg",31),e.ALo(1,"mytranslate"),e._UZ(2,"path",32)(3,"polyline",33)(4,"path",34),e.qZA()),2&n&&e.s9C("matTooltip",e.lcZ(1,1,"lang_testbank_folder_and_file_published"))}function RK(n,o){1&n&&(e.O4$(),e.TgZ(0,"svg",31),e.ALo(1,"mytranslate"),e._UZ(2,"path",32)(3,"polyline",33),e.qZA()),2&n&&e.s9C("matTooltip",e.lcZ(1,1,"lang_testbank_folder_and_file_Unpublished"))}function zK(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",27),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw(2).$implicit,l=e.oxw(2);return e.KtG(l.clickToDocumentObj(s,r))}),e.TgZ(1,"div",28),e.YNc(2,qK,5,3,"svg",29),e.YNc(3,RK,4,3,"svg",30),e.qZA(),e.TgZ(4,"span",23),e._uU(5),e.qZA(),e._UZ(6,"mat-spinner",25),e.qZA()}if(2&n){const t=o.$implicit,i=e.oxw(2),a=i.$implicit;e.Q6J("ngClass",e.WLB(7,ay,a.currentDocumentObj&&a.currentDocumentObj.exam&&a.currentDocumentObj.exam.id==(null==t.exam?null:t.exam.id),i.last&&a.currentDocumentObj&&a.currentDocumentObj.exam&&a.currentDocumentObj.exam.id==(null==t.exam?null:t.exam.id))),e.xp6(2),e.Q6J("ngIf",1==(null==t.exam?null:t.exam.isPublished)),e.xp6(1),e.Q6J("ngIf",1!=(null==t.exam?null:t.exam.isPublished)),e.xp6(1),e.Q6J("title",t.name),e.xp6(1),e.Oqu(t.name),e.xp6(1),e.Q6J("strokeWidth",2)("diameter",24)}}function HK(n,o){if(1&n&&(e.TgZ(0,"div",16)(1,"div",17),e.YNc(2,jK,10,13,"div",18),e.YNc(3,zK,7,10,"div",19),e.qZA()()),2&n){const t=e.oxw(),i=t.last,a=t.$implicit,r=e.oxw(2);e.Q6J("width",300)("id",!r.testFinderService.examFinderModel.isShowQuestionObjs&&i?"col-last":""),e.xp6(2),e.Q6J("ngForOf",a.categoryObjs),e.xp6(1),e.Q6J("ngForOf",a.documentObjs)}}function JK(n,o){if(1&n&&e._UZ(0,"azt-loading-effect",38),2&n){const t=e.oxw(4);e.Q6J("currentStatusObj",t.statusObj)}}function KK(n,o){1&n&&(e.TgZ(0,"div",39),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_auto_thu_muc_trong")))}function GK(n,o){if(1&n&&(e.TgZ(0,"div",35)(1,"div",17),e.YNc(2,JK,1,1,"azt-loading-effect",36),e.YNc(3,KK,3,3,"ng-template",null,37,e.W1O),e.qZA()()),2&n){const t=e.MAs(4),i=e.oxw(3);e.Q6J("id",i.testFinderService.examFinderModel.isShowQuestionObjs?"":"col-last")("width",300),e.xp6(2),e.Q6J("ngIf",i.isLoadingSubData)("ngIfElse",t)}}function YK(n,o){if(1&n&&(e.ynx(0),e.YNc(1,HK,4,4,"div",14),e.YNc(2,GK,5,4,"ng-template",null,15,e.W1O),e.BQk()),2&n){const t=o.$implicit,i=e.MAs(3);e.xp6(1),e.Q6J("ngIf",t.categoryObjs.length>0||t.documentObjs.length>0)("ngIfElse",i)}}function $K(n,o){if(1&n&&e._UZ(0,"azt-loading-effect",38),2&n){const t=e.oxw(3);e.Q6J("currentStatusObj",t.statusObj)}}function VK(n,o){if(1&n&&e._UZ(0,"azt-preview-list-question",43),2&n){const t=e.oxw(4);e.Q6J("exam",t.testFinderService.examFinderModel.currentDocumentObj)("questionList",t.testFinderService.examFinderModel.currentQuestionObjs)("filterTag",t.questionTag)("filterType",t.questionType)("questionIdsSelected",t.testFinderService.questionIdsSelected)("questionGroupIdsSelected",t.testFinderService.questionGroupIdsSelected)}}function WK(n,o){if(1&n&&e.YNc(0,VK,1,6,"azt-preview-list-question",42),2&n){const t=e.oxw(3);e.Q6J("ngIf",t.testFinderService.examFinderModel.currentDocumentObj&&t.testFinderService.examFinderModel.currentQuestionObjs)}}function XK(n,o){if(1&n&&(e.TgZ(0,"div",40)(1,"div",41),e.YNc(2,$K,1,1,"azt-loading-effect",36),e.YNc(3,WK,1,1,"ng-template",null,37,e.W1O),e.qZA()()),2&n){const t=e.MAs(4),i=e.oxw(2);e.xp6(2),e.Q6J("ngIf",i.isLoadingSubData)("ngIfElse",t)}}function eG(n,o){if(1&n&&(e.ynx(0),e.YNc(1,YK,4,2,"ng-container",12),e.YNc(2,XK,5,2,"div",13),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.testFinderService.examFinderModel.levelObjs),e.xp6(1),e.Q6J("ngIf",t.testFinderService.examFinderModel.isShowQuestionObjs)}}function tG(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.TgZ(3,"b"),e._uU(4),e.qZA()()),2&n){const t=e.oxw();e.xp6(1),e.hij(" ",e.lcZ(2,2,"lang_auto_so_cau_da_chon"),":\xa0 "),e.xp6(3),e.Oqu(t.testFinderService.examFinderModel.selectedQuestionObjs.length)}}function nG(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"span",47),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.toggleTooltip())}),e._uU(1),e.qZA()}if(2&n){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.getTooltipText," ")}}function iG(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_auto_nhap_so_cau_can_lay")))}function oG(n,o){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_azt_number_of_groups_input_guide")))}function aG(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",44),e.YNc(1,nG,2,1,"span",45),e.YNc(2,iG,3,3,"span",2),e.YNc(3,oG,3,3,"span",2),e.TgZ(4,"input",46),e.NdJ("focus",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.showTooltip=!0)})("keyup.enter",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.enterToFireChooseButton(a))})("ngModelChange",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.totalRandomQuestion=a)}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.showTooltip&&t.testFinderService.examFinderModel.hasSelectedItem),e.xp6(1),e.Q6J("ngIf",!t.isCheckGroup.value),e.xp6(1),e.Q6J("ngIf",t.isCheckGroup.value),e.xp6(1),e.Q6J("ngModel",t.totalRandomQuestion)}}const rG=function(n){return{loading:n}};let sG=(()=>{class n extends xe.Q{cleanName(t){let i=t;return i=i.replaceAll(/[\[\],\.\-]+/g,""),i}replaceFilterCodeStr(t){let i="";return t.forEach((a,r)=>{r<t.length-1?a.includes("[@F:")?i+=a+",":i+=a+".":i.includes("[@F:")?(i=i.substring(0,i.lastIndexOf(",")),i+="."+a):i+=a}),i}get getTooltipText(){let t=this.commonService.myTranslateInstant("lang_auto_lay_ngau_nhien_so_cau_hoi_o")??"",i=this.commonService.myTranslateInstant("lang_auto_nhom_thuong")?.toUpperCase()??"",a=this.commonService.myTranslateInstant("lang_auto_thu_muc_thuong")?.toUpperCase()??"",r=this.commonService.myTranslateInstant("lang_auto_de_thi_thuong")?.toUpperCase()??"",s=this.commonService.myTranslateInstant("lang_auto_dang_chon")??"",l=t+" ";return l+=null!=this.testFinderService.examFinderModel.selectedGroupId?i:this.testFinderService.examFinderModel.isShowQuestionObjs?" "+r:a,l+=" "+s,l}get totalQuestionSelected(){return this.testFinderService.examFinderModel.selectedQuestionObjs.length}closeDialog(t){this.testFinderService.clearSelectedQuestionAndQuestionGroup(),this.closeTestFinder.emit(t)}toggleTooltip(){this.showTooltip=!this.showTooltip}changeTypeQuestion(t){this.isCheckGroup.value||(this.questionType=t)}changeTypeGroupQuestion(){this.questionType=this.isCheckGroup.value?[{key:"NH",value:"Nh\xf3m"}]:[]}changeTagQuestion(t){this.questionTag=t}enterToFireChooseButton(t){this.testFinderService.examFinderModel.selectedQuestionObjs.length<=0||this.statusObj.loading||this.clickToChooseButton()}clickToChooseButton(){this.totalRandomQuestion<=0&&(this.testFinderService.handleGetAllQuestionStringCode(),this.testFinderService.examFinderModel.selectedQuestionObjs.length<=0)?this.showErrorSnack("lang_auto_ban_can_nhap_so_luong_it_nhat_1_cau"):this.testFinderService.examFinderModel.selectedQuestionObjs.length>0?this.handleSelectDirectQuestionObjs():this.handleSelectRandomQuestionInCategoryObj()}handleSelectDirectQuestionObjs(){let t=this.commonService.myTranslateInstant("lang_auto_nhom")??"",i=this.commonService.myTranslateInstant("lang_auto_lay_tieu_de")??"",a=[],r=[],s=this.testFinderService.getCurrentLevelPathObjs(),c=this.testFinderService.examFinderModel.currentQuestionObjs;this.testFinderService.examFinderModel.selectedQuestionObjs.forEach(u=>{let m=[...s];null!=u.groupInfo?.groupId&&m.push({id:u.groupInfo.groupId,type:l_.Group,name:`${u.groupInfo.groupId}`,shareType:void 0,questionGroupId:u.groupInfo.groupId}),m.push({id:u.id,type:l_.Question,name:`${u.sourceLabel??"T\xean c\xe2u h\u1ecfi"}`,shareType:void 0});let f,p=[];for(let b=0;b<m.length;b++){const L=m[b];let N=this.commonService.myTranslateInstant(this.cleanName(L.name))??this.cleanName(L.name);if(1==L.type&&p.push(`[@C${L.id}:${(L.shareType&&"user"===L.shareType?`:${L.shareType}-`:null)??""}${N}]`),2==L.type&&p.push(`[@T${L.id}:${N}]`),3==L.type&&null!=L.questionGroupId){f=L.questionGroupId;let j=c.filter(G=>G.groupInfo?.groupId&&G.groupInfo?.groupId==f).length;j&&p.push(`[@G${N}:${j}-${t} ${N}]`)}4==L.type&&p.push(`[@Q${L.id}:${N.replace("[PDFv2] ","")}]`)}if(null!=f&&!r.includes(f)){let b=[...p];b[b.length-1]=`[${i}]`,a.push(b.join(".")),r.push(f)}a.push(p.join("."))}),this.closeDialog(a)}handleSelectRandomQuestionInCategoryObj(){let t=this.commonService.myTranslateInstant("lang_auto_nhom")??"",i=this.isCheckGroup.value?this.commonService.myTranslateInstant("lang_auto_nhom_thuong"):this.commonService.myTranslateInstant("lang_auto_cau_thuong")??"",a=this.commonService.myTranslateInstant("lang_auto_lay_ngau_nhien")??"",r=[];this.testFinderService.getCurrentLevelPathObjs().forEach(m=>{let p=this.commonService.myTranslateInstant(this.cleanName(m.name))??this.cleanName(m.name);1==m.type&&r.push(`[@C${m.id}:${(m.shareType&&"user"===m.shareType?`:${m.shareType}-`:null)??""}${p}]`),2==m.type&&r.push(`[@T${m.id}:${p}]`)}),this.questionType.length>0&&this.questionType.forEach(m=>{r.push(`[@F:${m.key}]`)}),this.questionTag.length>0&&this.questionTag.forEach(m=>{r.push(`[@F:${m.key}]`)});let c=this.testFinderService.examFinderModel.selectedGroupId;if(c){let m=this.testFinderService.examFinderModel.currentQuestionObjs.filter(p=>p.groupInfo?.groupId==c).length;r.push(`[@G${c}:${m}-${t} ${c}]`),r.push(`[${a} ${this.totalRandomQuestion} ${i}]`)}else r.push(`[${a} ${this.totalRandomQuestion} ${i}]`);let u=this.replaceFilterCodeStr(r);this.closeDialog([u])}clickToCategoryObj(t,i){if(t.currentCategoryObj?.id==i.id)return;this.testFinderService.selectCategoryObjInOneLevel(t,i),this.isLoadingSubData=!0,this.showTooltip=!0,this.destroyAllSubs();let a={categoryId:i.id,documentType:void 0,shareType:i.shareType,fileType:"exam_online",classroomId:void 0,name:void 0,suggestExamPurpose:void 0,lite:1,getGlobal:0,page:1,itemPerPage:-1};this.waitDestroy(this.documentService.apiDocumentsGet(a.categoryId,a.documentType,a.shareType,a.fileType,a.classroomId,a.name,a.suggestExamPurpose,a.lite,a.getGlobal,a.page,a.itemPerPage).subscribe(r=>{if(1==r.success){var s=r.data?.categoryObjs??[],l=this.testFinderService.convertDocumentFile(r.data?.documentObjs??[]);this.testFinderService.pushCategoryData(t,i,s,l)}else this.errorStatusObj(r.message,!0);this.isLoadingSubData=!1}))}clickToDocumentObj(t,i){!i.exam?.id||t.currentDocumentObj?.exam?.id==i.exam?.id||(this.testFinderService.selectDocumentObjInOneLevel(t,i),this.isLoadingSubData=!0,this.showTooltip=!0,this.destroyAllSubs(),this.waitDestroy(this.examService.apiExamGetQuestionsIdGet(i.exam.id).subscribe(a=>{if(a.success&&a.data?.examObj){let r={...a.data?.examObj,attended:0},s=this.commonService.castObj(a.data?.questionObjs)??[];this.testFinderService.pushQuestionData(t,i,r,s)}else this.errorStatusObj(a.message,!0);this.isLoadingSubData=!1})))}loadInitData(){this.initStatusObj(),this.waitDestroy(this.documentService.apiDocumentsGet(0,undefined,undefined,"exam_online",undefined,undefined,undefined,1,0,1,-1).subscribe(i=>{if(1==i.success){var a=this.testFinderService.convertDocumentFile(i.data?.documentObjs??[]);this.testFinderService.pushDataToFirstLevel(i.data?.categoryObjs??[],a),this.stopStatusObj()}else this.errorStatusObj(i.message,!0)}))}ngOnInit(){this.testFinderService.examFinderModel.isFirstTimeToLoadData&&this.loadInitData(),super.ngOnInit()}constructor(t,i,a){super(),this.testFinderService=t,this.documentService=i,this.examService=a,this.closeTestFinder=new e.vpe,this.questionType=this.testFinderService.questionTypeSelectedObjs,this.questionTag=this.testFinderService.questionTagSelectedObjs,this.totalRandomQuestion=0,this.isLoadingSubData=!1,this.showTooltip=!0,this.isCheckGroup=new h.NI(!1,{nonNullable:!0})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(oy),e.Y36(un.Zg),e.Y36(un.Oe))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-test-finder"]],outputs:{closeTestFinder:"closeTestFinder"},features:[e.qOj],decls:23,vars:22,consts:[["azt-track-service","test-finder-De2lZomoHz6",1,"close-button","clickable",3,"matTooltip","click"],["id","grid-parent",1,"grid-parent",3,"ngClass"],[4,"ngIf"],["id","examSaveBtns",1,"p-2","bg-slate-100","dark:bg-darkmode-400"],[1,"left","test-finder"],[2,"margin-left","3px",3,"listCheckboxType","selectedEvent"],[1,"setting-input","form-switch","ml-5"],["id","isGetGroup","type","checkbox",1,"show-code","form-check-input",3,"formControl","change"],["for","isGetGroup",1,"form-label","ml-2"],[1,"right"],["class","random",4,"ngIf"],["azt-track-service","test-finder-cpsVY9x_hjE",1,"btn","btn-primary","w-24","ml-3",3,"disabled","click"],[4,"ngFor","ngForOf"],["class","preview-pane","id","col-last",4,"ngIf"],["aztColResizable","",3,"width","id",4,"ngIf","ngIfElse"],["emptyCol",""],["aztColResizable","",3,"width","id"],["colLeftContent",""],["azt-track-service","test-finder-s_cSxPWj6","class","doc-item doc-item-cate clickable py-2 mt-1","style","border-radius: 0.375rem",3,"ngClass","click",4,"ngFor","ngForOf"],["azt-track-service","test-finder-1CILmbro_M","class","doc-item doc-item-file clickable py-2 mt-1","style","border-radius: 0.375rem",3,"ngClass","click",4,"ngFor","ngForOf"],["azt-track-service","test-finder-s_cSxPWj6",1,"doc-item","doc-item-cate","clickable","py-2","mt-1",2,"border-radius","0.375rem",3,"ngClass","click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"w-6","h-6","mr-3","pl-1","text-slate-600","dark:text-slate-500"],["d","M9.828 3h3.982a2 2 0 0 1 1.992 2.181l-.637 7A2 2 0 0 1 13.174 14H2.825a2 2 0 0 1-1.991-1.819l-.637-7a1.99 1.99 0 0 1 .342-1.31L.5 3a2 2 0 0 1 2-2h3.672a2 2 0 0 1 1.414.586l.828.828A2 2 0 0 0 9.828 3zm-8.322.12C1.72 3.042 1.95 3 2.19 3h5.396l-.707-.707A1 1 0 0 0 6.172 2H2.5a1 1 0 0 0-1 .981l.006.139z"],[1,"cat-name",3,"title"],["class","whitespace-nowrap ml-2 py-0.5 px-2 rounded-full text-xs bg-primary text-white font-medium",4,"ngIf"],["color","accent",3,"strokeWidth","diameter"],[1,"whitespace-nowrap","ml-2","py-0.5","px-2","rounded-full","text-xs","bg-primary","text-white","font-medium"],["azt-track-service","test-finder-1CILmbro_M",1,"doc-item","doc-item-file","clickable","py-2","mt-1",2,"border-radius","0.375rem",3,"ngClass","click"],[1,"file-icon","pl-1"],["class","w-6 h-6 text-pending","xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",3,"matTooltip",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","class","w-6 h-6 text-pending","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",3,"matTooltip",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-6","h-6","text-pending",3,"matTooltip"],["d","M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],["points","14 2 14 8 20 8"],["d","m9 15 2 2 4-4"],["aztColResizable","",3,"id","width"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],["doneLoading",""],[3,"currentStatusObj"],[1,"text-center","alert","alert-info"],["id","col-last",1,"preview-pane"],[1,"preview-content"],[3,"exam","questionList","filterTag","filterType","questionIdsSelected","questionGroupIdsSelected",4,"ngIf"],[3,"exam","questionList","filterTag","filterType","questionIdsSelected","questionGroupIdsSelected"],[1,"random"],["azt-track-service","test-finder-ZvOINp82Nc","class","qv_tooltip",3,"click",4,"ngIf"],["type","text","appOnlyNumber","","name","random","id","random",1,"form-control",3,"ngModel","focus","keyup.enter","ngModelChange"],["azt-track-service","test-finder-ZvOINp82Nc",1,"qv_tooltip",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"mat-icon",0),e.NdJ("click",function(){return i.closeDialog(void 0)}),e.ALo(1,"mytranslate"),e._uU(2,"close"),e.qZA(),e.TgZ(3,"div",1),e.YNc(4,eG,3,2,"ng-container",2),e.qZA(),e.TgZ(5,"div",3)(6,"form",4)(7,"b"),e._uU(8),e.ALo(9,"mytranslate"),e.qZA(),e.TgZ(10,"app-select-search-dropdown",5),e.NdJ("selectedEvent",function(r){return i.changeTagQuestion(r)}),e.qZA(),e.TgZ(11,"app-select-search-dropdown",5),e.NdJ("selectedEvent",function(r){return i.changeTypeQuestion(r)}),e.qZA(),e.TgZ(12,"div",6)(13,"input",7),e.NdJ("change",function(){return i.changeTypeGroupQuestion()}),e.qZA(),e.TgZ(14,"label",8),e._uU(15),e.ALo(16,"mytranslate"),e.qZA()()(),e.TgZ(17,"div",9),e.YNc(18,tG,5,4,"span",2),e.YNc(19,aG,5,4,"div",10),e.TgZ(20,"button",11),e.NdJ("click",function(){return i.clickToChooseButton()}),e._uU(21),e.ALo(22,"mytranslate"),e.qZA()()()),2&t&&(e.s9C("matTooltip",e.lcZ(1,12,"lang_auto_dong")),e.xp6(3),e.Q6J("ngClass",e.VKq(20,rG,i.statusObj.loading)),e.xp6(1),e.Q6J("ngIf",i.testFinderService.examFinderModel.levelObjs.length>0),e.xp6(4),e.hij("",e.lcZ(9,14,"lang_testbank_tested_list_sort"),":"),e.xp6(2),e.Q6J("listCheckboxType","QUESTION_TAG"),e.xp6(1),e.Q6J("listCheckboxType","QUESTION_TYPE"),e.xp6(2),e.Q6J("formControl",i.isCheckGroup),e.xp6(2),e.hij(" ",e.lcZ(16,16,"lang_azt_retrieve_by_group")," "),e.xp6(3),e.Q6J("ngIf",i.testFinderService.examFinderModel.selectedQuestionObjs.length>0),e.xp6(1),e.Q6J("ngIf",i.testFinderService.examFinderModel.selectedQuestionObjs.length<=0),e.xp6(1),e.Q6J("disabled",!i.testFinderService.examFinderModel.hasSelectedItem||i.statusObj.loading),e.xp6(1),e.hij(" ",e.lcZ(22,18,"lang_auto_chon")," "))},dependencies:[F.mk,F.sg,F.O5,Yo.Hw,Pv.Ou,Ai.gM,h._Y,h.Fj,h.Wl,h.JJ,h.JL,h.On,h.F,h.oH,vi.l,Dt.Y,vK,MK,DK,ye.JV],styles:['.close-button[_ngcontent-%COMP%]{position:absolute;right:5px;top:5px;color:#9c9c9c;z-index:10}.close-button[_ngcontent-%COMP%]:hover{color:#747474;cursor:pointer}.grid-parent[_ngcontent-%COMP%]{min-width:300;width:100%;min-height:150px;height:100%;display:flex;flex-wrap:nowrap;overflow-y:auto;position:relative}.grid-parent[_ngcontent-%COMP%]   .doc-item[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;align-items:center}.grid-parent[_ngcontent-%COMP%]   .doc-item.doc-item-cate[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:orange;margin-right:5px;width:40px;height:40px;min-width:40px;font-size:40px}.grid-parent[_ngcontent-%COMP%]   .doc-item.doc-item-cate[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{margin-left:5px;padding:5px}.grid-parent[_ngcontent-%COMP%]   .doc-item.doc-item-file[_ngcontent-%COMP%]   .file-icon[_ngcontent-%COMP%]{margin-right:5px;position:relative}.grid-parent[_ngcontent-%COMP%]   .doc-item.doc-item-file[_ngcontent-%COMP%]   .file-icon[_ngcontent-%COMP%]   .examTableIconObj[_ngcontent-%COMP%]{position:absolute;top:3px;left:5px;width:20px;background-image:url(https://239114911.e.cdneverest.net/cdnazota/storage_public/azota_assets/images/titlePublishExam.png);background-position:top;background-size:cover;overflow:hidden;height:20px}.grid-parent[_ngcontent-%COMP%]   .doc-item.selected[_ngcontent-%COMP%]{background-color:#2361ae}.grid-parent[_ngcontent-%COMP%]   .doc-item.selected[_ngcontent-%COMP%]   .cat-name[_ngcontent-%COMP%]{color:#fff}.grid-parent[_ngcontent-%COMP%]   .doc-item.selected.last[_ngcontent-%COMP%]{background-color:#2361ae}.grid-parent[_ngcontent-%COMP%]   .doc-item[_ngcontent-%COMP%]   .cat-name[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.grid-parent[_ngcontent-%COMP%]   .doc-item[_ngcontent-%COMP%]:hover{background-color:#7497c2}.grid-parent[_ngcontent-%COMP%]   .preview-pane[_ngcontent-%COMP%]{flex:1;min-width:800px;padding:15px;overflow-y:auto}.grid-parent[_ngcontent-%COMP%]   .preview-pane[_ngcontent-%COMP%]   .preview-content[_ngcontent-%COMP%]{width:100%;max-width:700px;height:100%;margin:0 auto}.grid-parent[_ngcontent-%COMP%]   .preview-pane[_ngcontent-%COMP%]   .preview-content[_ngcontent-%COMP%]   .question-item[_ngcontent-%COMP%]{border:1px solid rgb(231,231,231)}#examSaveBtns[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;height:50px}#examSaveBtns[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{padding-left:15px;flex:auto;display:flex;flex-wrap:wrap;align-items:center}#examSaveBtns[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{flex:auto;display:flex;justify-content:right;align-items:center;padding-right:15px}#examSaveBtns[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:35px;border:1px solid #eeeeee;margin-left:5px;padding:5px;width:100px}#examSaveBtns[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .random[_ngcontent-%COMP%]{display:flex;align-items:center}#examSaveBtns[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .random[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{color:#18a2b8;margin-right:.25rem}#examSaveBtns[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]{padding-left:50px;padding-right:50px;background-color:#2361ae}#examSaveBtns[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]:hover{background-color:#1e5395}#examSaveBtns[_ngcontent-%COMP%]   .btn-save.mat-button-disabled[_ngcontent-%COMP%]{background-color:#0000001f}.form-field-custom[_ngcontent-%COMP%]{background-color:#0000000a;border:1px solid rgba(206,212,218,.6980392157);border-radius:.25rem;margin-left:5px;width:auto!important}mat-spinner[_ngcontent-%COMP%]{display:none}@media screen and (max-width: 570px){#examSaveBtns[_ngcontent-%COMP%]{flex-wrap:wrap;height:auto;padding-top:5px;padding-bottom:5px}#examSaveBtns[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px;display:block;margin-bottom:5px;flex-wrap:wrap;align-items:center}#examSaveBtns[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .random[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{flex:none}#examSaveBtns[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:80px!important}#examSaveBtns[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]{padding-right:30px;padding-left:30px}}.qv_tooltip[_ngcontent-%COMP%]{bottom:47px;right:110px;display:flex;font-size:11px;justify-content:space-between;position:absolute;z-index:999;background:#faebd7;padding:5px 10px;border-radius:5px;font-weight:500;color:#000;box-shadow:#091e4240 0 4px 8px -2px,#091e4214 0 0 0 1px}.qv_tooltip[_ngcontent-%COMP%]:before{content:"";position:absolute;top:29px;left:298px;border-left:10px solid transparent;border-right:10px solid transparent;border-top:10px solid #faebd7}']}),n})();var lG=I(92438);const cG=["editorContainer"];let uG=(()=>{class n{initMonacoAction(){return new Promise(t=>{const i="assets/monaco-editor/min/vs";"object"!=typeof window.monaco?(this.loaderScript.type="text/javascript",this.loaderScript.setAttribute("async","false"),this.loaderScript.src=`${i}/loader.js`,this.loaderScript.addEventListener("load",()=>{window.require.config({paths:{vs:`${i}`}}),window.require(["vs/editor/editor.main"],()=>{t()})}),document.body.appendChild(this.loaderScript)):t()})}ngAfterViewInit(){this.initMonacoAction().then(()=>{this.initMonaco()})}ngOnDestroy(){this._windowResizeSubscription&&this._windowResizeSubscription.unsubscribe(),this._editor&&(this._editor.dispose(),this._editor=void 0),this.loaderScript.parentNode&&this.loaderScript.parentNode.removeChild(this.loaderScript)}constructor(t){this.commonService=t,this.loaderScript=document.createElement("script"),this.config="",this.onInit=new e.vpe,this.returnImageMap=new e.vpe}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Yn.z))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ng-component"]],viewQuery:function(t,i){if(1&t&&e.Gf(cG,7),2&t){let a;e.iGM(a=e.CRH())&&(i._editorContainer=a.first)}},inputs:{config:"config"},outputs:{onInit:"onInit",returnImageMap:"returnImageMap"},decls:0,vars:0,template:function(t,i){},encapsulation:2}),n})();class c_{constructor(o){this.name=o}}class dG extends c_{run(o){let t=o.getModel(),i=o.getSelection(),a={startLineNumber:i.startLineNumber,endLineNumber:i.endLineNumber,startColumn:i.startColumn,endColumn:i.endColumn},r=t.getValueInRange(a);o.executeEdits("",[{range:a,text:`<code>${r}</code>`}]),o.setPosition({lineNumber:i.endLineNumber,column:i.startColumn+6+r.length})}}class mG extends c_{run(o){let t=o.getPosition();o.executeEdits("",[{range:{startLineNumber:t.lineNumber,endLineNumber:t.lineNumber,startColumn:t.column,endColumn:t.column},text:"________"}]),o.setPosition({lineNumber:t.lineNumber,column:t.column+8})}}class pG extends c_{run(o){let t=o.getModel(),i=o.getSelection(),a={startLineNumber:i.startLineNumber,endLineNumber:i.endLineNumber,startColumn:i.startColumn,endColumn:i.endColumn},r=t.getValueInRange(a);o.executeEdits("",[{range:a,text:`\\( ${r} \\)`}]),o.setPosition({lineNumber:i.endLineNumber,column:i.startColumn+3+r.length})}}class u2 extends c_{constructor(o,t){super(o),this.tag=t}run(o){let t=o.getModel(),i=o.getSelection(),a={startLineNumber:i.startLineNumber,endLineNumber:i.endLineNumber,startColumn:i.startColumn,endColumn:i.endColumn},r=t.getValueInRange(a),s=r;r.indexOf(`!${this.tag}`)>=0?(s=s.replaceAll(`!${this.tag}`,""),s=s.replaceAll(/\[:\$(([^\$]|\$[^\]])+)\$\]/g,"$1")):s=r.startsWith("[!")?`[!${this.tag}`+r.substring(1):`[!${this.tag}:$${r}$]`,o.executeEdits("",[{range:a,text:s}])}}class hG extends c_{run(o){let t=o.getSelection(),i=o.getModel(),a={startLineNumber:t.startLineNumber,endLineNumber:t.endLineNumber,startColumn:t.startColumn,endColumn:t.endColumn},r=i.getValueInRange(a);/^\[\*?[A-H]:[^\]]+\]$/.test(r)?(r=r.substring(r.indexOf(":")+1,r.length-2),o.executeEdits("",[{range:a,text:r}])):o.executeEdits("",[{range:a,text:`[A:${r}]`}])}}class AG{constructor(){this.placeHolderRemoved=!1,this.decorations=[],this.parseChange=!0,this.hasError=!1}setIntellisense(o){this.azotaIntel=o}setSingleMode(o){this.azotaIntel?.setSingleMode(o)}setLang(o){this.lang=o,this.azotaIntel?.setLang(o)}registerPlugin(o,t){this._editor&&this._editor.addAction({id:o.name,label:o.name,keybindings:[this.monaco.KeyMod.CtrlCmd|t],contextMenuGroupId:"navigation",contextMenuOrder:1.5,run:function(i){o.run(i)}})}getCurLine(){return this._editor.getPosition().lineNumber}getCurLineText(){let o=this._editor.getPosition().lineNumber;return this._editor.getModel().getLineContent(o)}getLineText(o){return this._editor.getModel().getLineContent(o)}getCurQuest(){if(this.azotaIntel){let o=this.getCurLine()-1;return this.azotaIntel.getCurPos(o,50)[0]}}goToLine(o){this._editor.focus(),this._editor.setPosition({lineNumber:o,column:0}),this._editor.revealLineNearTop(o+1)}setPosition(o,t){let i={lineNumber:o,column:t};this._editor.focus(),this._editor.setPosition(i),this._editor.revealPositionNearTop(i)}insertDetails(o,t){let i=this.getLineText(o),r=[],s=i.replaceAll(/\s+/g," ").split("].[");s.splice(s.length-1);let l=s.join("].[")+"]";for(const c of t)r.push(l+`.[@Q${c}]`);if(r.length>0){let c=r.join("\n");this._editor.executeEdits("",[{range:{startLineNumber:o,endLineNumber:o,startColumn:0,endColumn:i.length+2},text:c}]),this._editor.setSelection({startLineNumber:o,endLineNumber:o,startColumn:0,endColumn:0})}}setError(o){this.hasError=o.length>0;let t=[],i=this._editor.getModel();for(const a of o){let r=a.split("|"),s=+r[0],l=r[1],c=i.getLineContent(s);t.push({startLineNumber:s,endLineNumber:s,startColumn:0,endColumn:c.length+1,message:l})}this.monaco.editor.setModelMarkers(i,"",t)}init(o,t,i,a){i&&this.setLang(i);let r=this;this.monaco=o;let s="azota",l=o.languages.getLanguages().filter(G=>G.id==s),c=l&&l.length>0;c||(o.languages.register({id:s}),o.languages.setMonarchTokensProvider(s,{operators:["=",">","<","!","~","?",":","==","<=",">=","!=","&&","||","++","--","+","-","*","/","&","|","^","%","<<",">>",">>>","+=","-=","*=","/=","&=","|=","^=","%=","<<=",">>=",">>>="],symbols:/[=><!~?:&|+\-*\/\^%]+/,tokenizer:{root:[[/^\s*C\xe2u\s*\d+/,"question-label"],[/^\s*Question\s*\d+/,"question-label"],[/\s+\*?[A-Ha-h][\.\)]/,"answer-label"],[/^\s*\*?[A-Ha-h][\.\)]/,"answer-label"],[/\[[^\]]+\]/,"expression"],[/^\s*L\u1eddi gi\u1ea3i\s*$/,"token"],[/^\s*GLOSSARY\s*$/,"token"],[/^\s*B\u1ea2NG \u0110\xc1P \xc1N\s*$/,"token"],[/^\s*B\u1ea3ng \u0111\xe1p \xe1n\s*$/,"token"],[/^\s*\-+H\u1ebeT\-+\s*$/,"token"],[/^\s*H\u01b0\u1edbng d\u1eabn gi\u1ea3i\s*$/,"token"],[/^\s*H\u01af\u1edaNG D\u1eaaN GI\u1ea2I\s*$/,"token"],[/^\s*Ch\u1ecdn\s*[A-Ha-h]\s*$/,"choose"],[/^\s*Answer keys\s*$/,"token"],[/^\s*ANSWER KEYS\s*$/,"token"],[/^\s*Answer key\s*$/,"token"],[/^\s*ANSWER KEY\s*$/,"token"],[/^\s*Answer Section\s*$/,"token"],[/^\s*\-+THE END\-+\s*$/,"token"],[/^\s*\-+END\-+\s*$/,"token"],[/^\s*Instructions\s*$/,"token"],[/^\s*INSTRUCTIONS\s*$/,"token"],[/^\s*Choose\s*[A-Ha-h]\s*$/,"choose"],[/^[IVX]+\s*[\.:].*$/,"section"],[/^Section+\s*[\dA-K]+[\.:].*$/,"section"],[/^Part+\s*[\dA-KVX]+[\.:].*$/,"section"],[/^Ph\u1ea7n+\s*[\dA-KVX]+[\.:].*$/,"section"],[/\\[a-z][a-z0-9]+/,"latex"],[/@symbols/,{cases:{"@operators":"operator","@default":""}}],{include:"@whitespace"},["[{}()\\[\\]]","@brackets"],["#+\\d","number.arg"],["\\-?(?:\\d+(?:\\.\\d+)?|\\.\\d+)\\s*(?:em|ex|pt|pc|sp|cm|mm|in)","number.len"]],whitespace:[["[ \\t\\r\\n]+","white"],["%.*$","comment"]]}}));let u="dark"==localStorage.getItem("mode_ui");var G;o.editor.defineTheme("azotaTheme",{base:u?"vs-dark":"vs",inherit:!0,rules:[{token:"question-label",foreground:u?"569cd6":"3437eb",fontStyle:"bold"},{token:"answer-label",foreground:u?"FF6464":"ff0000",fontStyle:"bold"},{token:"expression",foreground:"ab2428"},{token:"operator",foreground:"ab2428"},{token:"latex",foreground:"3437eb"},{token:"keyword",foreground:"2504da"},{token:"keyword.predefined",foreground:"2504da"},{token:"token",foreground:"8f4106",fontStyle:"bold"},{token:"choose",foreground:"000000",fontStyle:"bold"},{token:"section",foreground:"000000",fontStyle:"bold"}],colors:{"editor.foreground":u?"#d4d4d4":"#000000","editor.background":u?"#25304C":"#ffffff"}}),c||(o.languages.setLanguageConfiguration(s,{brackets:[["{","}"],["[","]"],["(",")"],["\\(","\\)"],["[*","*]"]]}),o.languages.registerCompletionItemProvider(s,{triggerCharacters:["@",".",","],provideCompletionItems:(G=(0,Yi.Z)(function*(ae,W){if(!r.azotaIntel)return{suggestions:[]};let le=ae.getWordUntilPosition(W),ve=ae.getLineContent(W.lineNumber);return{suggestions:(yield r.azotaIntel.getSuggestions(W.lineNumber-1,W.column-1,le.word,ve)).map(te=>{let se,Be,Se=te.split("|"),Ze=o.languages.CompletionItemKind.Text,pe=Se[0];if(Se.length>2){switch(Se[2]){case"file":Ze=o.languages.CompletionItemKind.File,pe="2"+Se[0];break;case"folder":Ze=o.languages.CompletionItemKind.Folder,pe="1"+Se[0];break;case"class":Ze=o.languages.CompletionItemKind.Class,pe="3"+Se[3];break;case"function":Ze=o.languages.CompletionItemKind.Function,pe="3"+Se[3];break;case"snippet":Ze=o.languages.CompletionItemKind.Module,se=o.languages.CompletionItemInsertTextRule.InsertAsSnippet,pe="0"}Be={id:"editor.action.triggerSuggest",title:""}}return{label:Se[0],kind:Ze,insertText:Se[1],insertTextRules:se,sortText:pe,command:Be,documentation:{supportHtml:!0,value:Se[4]}}})}}),function(W,le){return G.apply(this,arguments)})}));let p=o.editor.create(t,{theme:"azotaTheme",language:s,wordBasedSuggestions:!1,minimap:{enabled:!1},overviewRulerLanes:0,wordWrap:"on",tabSize:4,readOnly:a}),f=p.getModel();p.onMouseDown(function(G){"slider active"!=G.target.element.className&&(r.onChangePosCalback&&G.target.position&&r.onChangePosCalback(G.target.position.lineNumber,G.target.position.column),p.focus())});let b={domNode:null,getId:function(){return"my.content.widget"},getDomNode:function(){return this.domNode||this.domNode||(this.domNode=document.createElement("div"),this.domNode.innerHTML=r.lang?.myTranslateInstant("azt_lang_enter_at_to_choose_from_bank")??"Nh\u1eadp @ \u0111\u1ec3 ch\xe8n t\u1eeb ng\xe2n h\xe0ng c\xe1 nh\xe2n",this.domNode.style.color="grey",this.domNode.style.width="250px"),this.domNode},getPosition:function(){return{position:{lineNumber:1,column:2},preference:[o.editor.ContentWidgetPositionPreference.BELOW]}}};p.addContentWidget(b),f.onDidChangeContent(G=>{let W=f.getValue().replaceAll("\r","").split("\n");this.placeHolderRemoved||(p.removeContentWidget(b),this.placeHolderRemoved=!0);let le=G.changes[0].range.startLineNumber,ve=le<=W.length?f.getLineContent(le):"";ve.startsWith("@[@")&&this.runEditAction([G.changes[0].range.startLineNumber-1+"|0|3|[@"],p,!1),ve.endsWith(".,")&&this.runEditAction([`${G.changes[0].range.startLineNumber-1}|${ve.length-2}|${ve.length}|,`],p,!1),this.azotaIntel&&this.parseChange?this.azotaIntel.onChange({startLineNumber:G.changes[0].range.startLineNumber,endLineNumber:G.changes[0].range.endLineNumber,startColumn:G.changes[0].range.startColumn,endColumn:G.changes[0].range.endColumn,text:G.changes[0].text},r,this.onChangeCalback):this.parseChange&&this.onChangeCalback&&this.onChangeCalback(W,null)});let L=p.addCommand(0,function(G,ae,W){if(r.onInsertDetailsCb){let le=W.replaceAll(/\s+/g," ").trim();r.onInsertDetailsCb(le,ae)}},""),N=p.addCommand(0,function(G,ae,W){if(r.onRefreshCalback){let le=W.replaceAll(/\s+/g," ").trim();r.onRefreshCalback(le,ae)}},""),R=p.addCommand(0,function(G,ae,W){if(r.onInsertQuestTextCb){let le=W.replaceAll(/\s+/g," ").trim();r.onInsertQuestTextCb(le,ae)}},""),j=new Map;return a||(j.set("insertDirectQuest",L),j.set("insertQuestText",R)),j.set("randomAgain",N),c||o.languages.registerCodeLensProvider(s,{provideCodeLenses:function(G,ae){let W=G.getValue().split("\n");return r.azotaIntel?{lenses:r.azotaIntel.getCodeLens(W).map(ve=>{let ce=ve.split("|"),te=+ce[0]+1;return{range:{startLineNumber:te,startColumn:1,endLineNumber:te,endColumn:1},id:ce[1],command:{id:j.get(ce[1]),title:ce[2],arguments:[te,ce[4]],tooltip:ce[3]}}}),dispose:()=>{}}:{lenses:[],dispose:()=>{}}}}),p.onKeyUp(G=>{if(G.keyCode==o.KeyCode.Enter&&r.runCommand("enter",p),G.keyCode==o.KeyCode.Tab){let ae=p.getPosition(),W=f.getLineContent(ae.lineNumber);ae.column>W.length&&r.runCommand("tab",p)}}),p.onKeyDown(G=>{if(G.keyCode==o.KeyCode.Backspace){let ae=p.getSelection();if(ae.startLineNumber!=ae.endLineNumber||ae.startColumn!=ae.endColumn)return;let W=p.getPosition(),ve=f.getValueInRange({startLineNumber:W.lineNumber,endLineNumber:W.lineNumber,startColumn:W.column-1,endColumn:W.column}),ce={startLineNumber:W.lineNumber,endLineNumber:W.lineNumber,startColumn:0,endColumn:W.column};if("]"==ve){let se=f.getValueInRange(ce).lastIndexOf("[")+2;return ce.startColumn=se,void p.executeEdits("",[{range:ce,text:""}])}let te=f.getLineContent(W.lineNumber).trim(),Se=[/^C\xe2u\s\d+[\.:]$/,/^Question\s\d+[\.:]$/,/^[A-H]\.$/];if(W.column>te.length){let Ze=!1;for(const se of Se)if(se.test(te)){Ze=!0;break}if(Ze)return void p.executeEdits("",[{range:ce,text:"\n"}])}}}),p.onDidPaste(G=>{this.pastePosition=G}),o.languages.registerHoverProvider("azota",{provideHover:function(G,ae){if(r.onHoverCalback){let W=r.onHoverCalback(ae.lineNumber,ae.column,G.getLineContent(ae.lineNumber));return W?{range:new o.Range(W.lineIdx,W.s,W.lineIdx,W.e),contents:[{supportHtml:!0,value:W.text}]}:void 0}}}),this._editor=p,p.addCommand(o.KeyMod.CtrlCmd|o.KeyCode.Enter,function(){}),this.registerPlugin(new mG(this.lang?.myTranslateInstant("azt_lang_menu_fill_blank")??"\u0110i\u1ec1n v\xe0o ch\u1ed7 tr\u1ed1ng"),o.KeyCode.Period),this.registerPlugin(new hG(this.lang?.myTranslateInstant("azt_lang_menu_find_mistake")??"\u0110\xe1p \xe1n t\xecm l\u1ed7i sai"),o.KeyCode.KeyD),this.registerPlugin(new pG(this.lang?.myTranslateInstant("azt_lang_menu_enter_latex")??"Nh\u1eadp latex"),o.KeyCode.KeyL),this.registerPlugin(new u2(this.lang?.myTranslateInstant("azt_lang_menu_italic")??"In nghi\xeang","i"),o.KeyCode.KeyI),this.registerPlugin(new u2(this.lang?.myTranslateInstant("azt_lang_menu_bold")??"In \u0111\u1eadm","b"),o.KeyCode.KeyB),this.registerPlugin(new u2(this.lang?.myTranslateInstant("azt_lang_menu_underline")??"G\u1ea1ch ch\xe2n","u"),o.KeyCode.KeyU),this.registerPlugin(new dG(this.lang?.myTranslateInstant("azt_lang_menu_enter_code")??"Hi\u1ec3n th\u1ecb d\u1ea1ng code block"),o.KeyCode.KeyS),setTimeout(()=>{this._editor.focus()},200),p}setHoverCalback(o){this.onHoverCalback=o}onChange(o){this.onChangeCalback=o}onChangePosition(o){this.onChangePosCalback=o}onRefreshInclude(o){this.onRefreshCalback=o}onInsertDetails(o){this.onInsertDetailsCb=o}onInsertQuestText(o){this.onInsertQuestTextCb=o}updateLine(o,t,i,a){this._editor.executeEdits("",[{range:{startLineNumber:o,endLineNumber:o,startColumn:t,endColumn:i},text:a}])}insertLine(o){let t=this._editor.getPosition(),a=this._editor.getModel().getLineContent(t.lineNumber),r=a+"\n"+o;this._editor.executeEdits("",[{range:{startLineNumber:t.lineNumber,endLineNumber:t.lineNumber,startColumn:0,endColumn:a.length+1},text:r.trim()}]);let l=t.lineNumber+r.split("\n").length;this._editor.setSelection({startLineNumber:l,endLineNumber:l,startColumn:0,endColumn:0}),this._editor.focus()}removeLines(o,t){let i=this.parseChange;this.parseChange=!1;for(let a=o.length-1;a>=0;a--){let r=o[a],s={startLineNumber:r+1,endLineNumber:r+2,startColumn:0,endColumn:0};0==a&&t&&(this.parseChange=!0),this._editor.executeEdits("",[{range:s,text:""}])}this.parseChange=i}removeText(o,t,i,a){let r={startLineNumber:o,endLineNumber:o,startColumn:t,endColumn:i},s=this.parseChange;this.parseChange=a,this._editor.executeEdits("",[{range:r,text:""}]),this.parseChange=s}getCurPos(){return this._editor.getPosition()}insertAtCurPos(o){let t=this._editor.getPosition();this._editor.executeEdits("",[{range:{startLineNumber:t.lineNumber,endLineNumber:t.lineNumber,startColumn:t.column,endColumn:t.column},text:o}]);let a=t.lineNumber,r=t.column+o.length;return this._editor.setSelection({startLineNumber:a,endLineNumber:a,startColumn:r,endColumn:r}),this._editor.focus(),{lineIdx:a,startCol:t.column,endCol:r}}runEditAction(o,t,i,a){this.parseChange=!1;let r="",s=0;for(const l of o){let c=l.split("|"),u=+c[0]+1,f=c[3],b={startLineNumber:u,endLineNumber:u,startColumn:+c[1]+1,endColumn:+c[2]+1};if(s==o.length-1&&i&&!a&&(this.parseChange=!0),s==o.length-1&&a&&(f+="|"),t.executeEdits("",[{range:b,text:f}]),s==o.length-1&&a){this.parseChange=i??!1,b.startColumn=b.startColumn+f.length-1,b.endColumn=b.startColumn+1;let L=f.split("\n");L.length>1&&(b.startLineNumber=u+L.length-1,b.endLineNumber=b.startLineNumber,b.startColumn=L[L.length-1].length,b.endColumn=b.startColumn+1),t.executeEdits("",[{range:b,text:""}])}r=f,s++}return this.parseChange=!0,r}runCommand(o,t){let i=t.getPosition(),a=this.azotaIntel?.getAutofillValue(i.lineNumber-1,i.column-1,o);if(!a||0==a.length)return;let r=this.runEditAction(a,t,!0,!0),l=t.getModel().getLineCount(),c=r.split("\n").length,m={lineNumber:i.lineNumber+(i.lineNumber+c-1==l&&"enter"==o?c:0),column:("enter"==o?0:i.column)+r.length};t.setPosition(m),this.onChangePosCalback&&this.onChangePosCalback(m.lineNumber,m.column)}zeroPad(o,t){return o=o||2,(new Array(o).join("0")+t).slice(-1*o)}}class _G{constructor(o,t){this.examIntel=new K.ExamIntellisense(o),this.examIntel.setApiService(t),this.apiService=t}setSingleMode(o){this.examIntel.setSingleMode(o)}setLang(o){this.lang=o}getSuggestions(o,t,i,a){return new Promise(r=>{this.examIntel.getSuggestions(o,t,i,a).then(s=>{r(this.translate(s))})})}getAutofillValue(o,t,i){return this.translate(this.examIntel.getAutofillValue(o,t,i))}getCurPos(o,t){return this.examIntel.getCurPos(o,t)}getCodeLens(o){let t=[],i=0;for(const m of o)/^\[@[CTGK][\-\d]+:[^\]]+\]([\.,]\[[^\]]+\])*\.\[[^@:\]]+\d+[^@:\]]+\]$/.test(m.trim())?(m.includes("[@F:NH]")||t.push(`${i}|insertDirectQuest|azt_lang_editor_insert_direct|azt_lang_editor_insert_direct_desc|${m.trim()}`),t.push(`${i}|randomAgain|azt_lang_editor_random_again|azt_lang_editor_random_again_desc|${m.trim()}`)):/\[@Q\d+:[^\]]*\]$/.test(m.trim())&&t.push(`${i}|insertQuestText|azt_lang_editor_insert_quest_text|azt_lang_editor_insert_quest_text_desc|${m.trim()}`),i++;return this.translate(t)}getApiService(){return this.apiService}onChange(o,t,i){if(1!=o.text.length||"\n"==o.text)this.notiChange(t,i);else{let a=t._editor.getValue().replaceAll("\r",""),r=a.split("\n"),s=0;a.length>1e5&&(s=200*a.length/1e5),this.examIntel.setLines(r),clearTimeout(this.waitId),this.waitId=setTimeout(()=>{this.notiChange(t,i)},s)}}onMobileChange(o,t){let i=o.split("\n"),a=400;o.length>1e5&&(a=400*o.length/1e5),this.examIntel.setLines(i),clearTimeout(this.waitId),this.waitId=setTimeout(()=>{let r=this.examIntel.parse();t&&t(i,r)},a)}translate(o){let t=[];for(let i of o)t.push(this.lang?.translateString(i)??i);return t}notiChange(o,t){let i=o._editor.getValue().replaceAll("\r",""),a=i.split("\n");this.examIntel.setLines(a);let r=this.examIntel.parse(),s=this.examIntel.getEditHint();s&&o.runEditAction(s,o._editor),o.parseChange=!0,s.length>0&&(i=o._editor.getValue(),a=i.split("\n"),this.examIntel.setLines(a),r=this.examIntel.parse()),t&&t(a,r)}}let fG=(()=>{class n extends uG{constructor(){super(...arguments),this.onStartProcessFile=new e.vpe,this.onSwitchFilePdf=new e.vpe}reGenerateLayoutOfEditor(){this._editor&&setTimeout(()=>{this._editor.layout()},100)}setupDropFile(){if(!jQuery)return;const t=jQuery("#frame_monaco_editor");t&&t.on("drag dragstart dragend dragover dragenter dragleave drop",function(i){i.preventDefault(),i.stopPropagation()}).on("dragover dragenter",function(){t.addClass("is-dragover")}).on("dragleave dragend drop",function(){t.removeClass("is-dragover")}).on("drop",i=>{this.onStartProcessFile.emit(i.originalEvent.dataTransfer.files[0])})}initMonaco(){let t=new AG;this.editorApiService&&(t.setIntellisense(new _G(this.config,this.editorApiService)),this._editor=t.init(monaco,this._editorContainer.nativeElement,this.commonService,this.readOnly),this._windowResizeSubscription&&this._windowResizeSubscription.unsubscribe(),this._windowResizeSubscription=(0,lG.R)(window,"resize").subscribe(()=>this._editor.layout()),this.setupDropFile(),this.onInit.emit({azotaEditor:t}))}}return n.\u0275fac=function(){let o;return function(i){return(o||(o=e.n5z(n)))(i||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["azt-monaco-editor"]],inputs:{editorApiService:"editorApiService",readOnly:"readOnly"},outputs:{onStartProcessFile:"onStartProcessFile",onSwitchFilePdf:"onSwitchFilePdf"},features:[e._Bn([{provide:h.JU,useExisting:(0,e.Gpc)(()=>n),multi:!0}]),e.qOj],decls:4,vars:0,consts:[["id","frame_monaco_editor"],[1,"editor-container"],["editorContainer",""],[1,"file-drop-background"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"div",1,2)(3,"div",3),e.qZA())},styles:["[_nghost-%COMP%]{display:block}.editor-container[_ngcontent-%COMP%]{width:100%;height:100%}#frame_monaco_editor[_ngcontent-%COMP%]{height:100%;position:relative}.file-drop-background[_ngcontent-%COMP%]{display:none;position:absolute;top:0;left:0;width:100%;height:100%;background-color:#00000029;justify-content:center;align-items:center;color:#fff}"]}),n})();var gG=I(54901),xG=Object.defineProperty,bG=Object.defineProperties,vG=Object.getOwnPropertyDescriptors,ry=Object.getOwnPropertySymbols,wG=Object.prototype.hasOwnProperty,yG=Object.prototype.propertyIsEnumerable,sy=(n,o,t)=>o in n?xG(n,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[o]=t,Et=(n,o)=>{for(var t in o||(o={}))wG.call(o,t)&&sy(n,t,o[t]);if(ry)for(var t of ry(o))yG.call(o,t)&&sy(n,t,o[t]);return n},mi=(n,o)=>bG(n,vG(o));function Ea(n){return Array.isArray(n)}function As(){return"window"in globalThis&&"document"in globalThis}function ly(){if(!As())throw new Error("<math-field> is an interactive component that needs to run in a browser environment\nIf you are using nextjs, see https://nextjs.org/docs/advanced-features/dynamic-import#with-no-ssr")}function cy(){return"matchMedia"in globalThis?globalThis.matchMedia("(any-pointer: coarse)").matches:"ontouchstart"in globalThis||navigator.maxTouchPoints>0}function d2(){return"function"==typeof navigator.vibrate}function rh(){var n,o;if(!As())return"other";let t=null!=(o=null==(n=navigator.userAgentData)?void 0:n.platform)?o:navigator.platform;return/^mac/i.test(t)?5===navigator.maxTouchPoints?"ios":"macos":/^win/i.test(t)?"windows":/android/i.test(navigator.userAgent)?"android":/iphone|ipod|ipad/i.test(navigator.userAgent)?"ios":/\bcros\b/i.test(navigator.userAgent)?"chromeos":"other"}function uy(){if(!As())return!0;if(/firefox/i.test(navigator.userAgent)){let n=navigator.userAgent.match(/firefox\/(\d+)/i);return!!n&&parseInt(n[1])>=78}if(/trident/i.test(navigator.userAgent))return!1;if(/edge/i.test(navigator.userAgent)){let n=navigator.userAgent.match(/edg\/(\d+)/i);return!!n&&parseInt(n[1])>=79}return!0}var Ao={strings:{en:{"keyboard.tooltip.functions":"Functions","keyboard.tooltip.symbols":"Symbols","keyboard.tooltip.greek":"Greek Letters","keyboard.tooltip.command":"LaTeX Command Mode","keyboard.tooltip.numeric":"Numeric","keyboard.tooltip.roman":"Roman Letters","tooltip.copy to clipboard":"Copy to Clipboard","tooltip.cut to clipboard":"Cut to Clipboard","tooltip.paste from clipboard":"Paste from Clipboard","tooltip.redo":"Redo","tooltip.toggle virtual keyboard":"Toggle Virtual Keyboard","tooltip.undo":"Undo","menu.insert matrix":"Insert Matrix","menu.insert vector":"Insert Vector","submenu.array.matrix delimiters":"Matrix Delimiters","menu.array.add row above":"Add Row After","menu.array.add row below":"Add Row Before","menu.array.add column after":"Add Column After","menu.array.add column before":"Add Column Before","menu.array.delete row":"Delete Row","menu.array.delete rows":"Delete Selected Rows","menu.array.delete column":"Delete Column","menu.array.delete columns":"Delete Selected Columns","submenu.array.insert separator":"Insert Separator","menu.insert table":"Insert Table","submenu.table style":"Table Style"},ar:{"keyboard.tooltip.functions":"\u0645\u0647\u0627\u0645","keyboard.tooltip.symbols":"\u062d\u0631\u0641 \u0627\u0648 \u0631\u0645\u0632","keyboard.tooltip.greek":"\u062d\u0631\u0648\u0641 \u064a\u0648\u0646\u0627\u0646\u064a\u0629","keyboard.tooltip.command":"\u062d\u0627\u0644\u0629 \u062a\u0644\u0642\u064a \u0627\u0644\u0623\u0648\u0627\u0645\u0631 \u0627\u0644\u0644\u0627\u062a\u0643","keyboard.tooltip.numeric":"\u0627\u0644\u0631\u0642\u0645\u064a\u0629","keyboard.tooltip.roman":"\u0631\u0645\u0648\u0632 \u0627\u0644\u0627\u062d\u0631\u0641 \u0627\u0644\u0631\u0648\u0645\u0627\u0646\u064a\u0629","tooltip.copy to clipboard":"\u0646\u0633\u062e \u0625\u0644\u0649 \u0627\u0644\u062d\u0627\u0641\u0638\u0629","tooltip.redo":"\u0627\u0644\u0625\u0639\u0627\u062f\u0629","tooltip.toggle virtual keyboard":"\u062a\u0628\u062f\u064a\u0644 \u0644\u0648\u062d\u0629 \u0627\u0644\u0645\u0641\u0627\u062a\u064a\u062d \u0627\u0644\u0625\u0641\u062a\u0631\u0627\u0636\u064a\u0629","tooltip.undo":"\u0625\u0644\u063a\u0627\u0621","menu.insert matrix":"\u0623\u062f\u062e\u0644 \u0627\u0644\u0645\u0635\u0641\u0648\u0641\u0629","menu.insert vector":"\u0623\u062f\u062e\u0644 \u0645\u062a\u062c\u0647","submenu.array.matrix delimiters":"\u0645\u062d\u062f\u062f\u0627\u062a \u0627\u0644\u0645\u0635\u0641\u0648\u0641\u0629","menu.array.add row above":"\u0623\u0636\u0641 \u0635\u0641\u064b\u0627 \u0628\u0639\u062f \u0630\u0644\u0643","menu.array.add row below":"\u0623\u0636\u0641 \u0627\u0644\u0635\u0641 \u0642\u0628\u0644","menu.array.add column after":"\u0623\u0636\u0641 \u0627\u0644\u0639\u0645\u0648\u062f \u0628\u0639\u062f \u0630\u0644\u0643","menu.array.add column before":"\u0623\u0636\u0641 \u0627\u0644\u0639\u0645\u0648\u062f \u0642\u0628\u0644","menu.array.delete row":"\u0627\u062d\u0630\u0641 \u0635\u0641","menu.array.delete rows":"\u062d\u0630\u0641 \u0627\u0644\u0635\u0641\u0648\u0641 \u0627\u0644\u0645\u062d\u062f\u062f\u0629","menu.array.delete column":"\u062d\u0630\u0641 \u0627\u0644\u0639\u0645\u0648\u062f","menu.array.delete columns":"\u062d\u0630\u0641 \u0627\u0644\u0623\u0639\u0645\u062f\u0629 \u0627\u0644\u0645\u062d\u062f\u062f\u0629","submenu.array.insert separator":"\u0623\u062f\u062e\u0644 \u0641\u0627\u0635\u0644","menu.insert table":"\u0625\u062f\u0631\u0627\u062c \u062c\u062f\u0648\u0644","submenu.table style":"\u0646\u0645\u0637 \u0627\u0644\u062c\u062f\u0648\u0644"},bg:{"keyboard.tooltip.functions":"\u0424\u0443\u043d\u043a\u0446\u0438\u0438","keyboard.tooltip.symbols":"\u0421\u0438\u043c\u0432\u043e\u043b\u0438","keyboard.tooltip.greek":"\u0413\u0440\u044a\u0446\u043a\u0438 \u0431\u0443\u043a\u0432\u0438","keyboard.tooltip.command":"\u041a\u043e\u043c\u0430\u043d\u0434\u0435\u043d \u0440\u0435\u0436\u0438\u043c \u043d\u0430 \u043b\u0430\u0442\u0435\u043a\u0441","keyboard.tooltip.numeric":"\u0427\u0438\u0441\u043b\u043e\u0432\u0438","keyboard.tooltip.roman":"\u0420\u0438\u043c\u0441\u043a\u0438 \u0431\u0443\u043a\u0432\u0438","tooltip.copy to clipboard":"\u041a\u043e\u043f\u0438\u0440\u0430\u043d\u0435 \u0432 \u043a\u043b\u0438\u043f\u0431\u043e\u0440\u0434\u0430","tooltip.redo":"\u041f\u043e\u0432\u0442\u043e\u0440\u043d\u043e","tooltip.toggle virtual keyboard":"\u041f\u0440\u0435\u0432\u043a\u043b\u044e\u0447\u0432\u0430\u043d\u0435 \u043d\u0430 \u0432\u0438\u0440\u0442\u0443\u0430\u043b\u043d\u0430 \u043a\u043b\u0430\u0432\u0438\u0430\u0442\u0443\u0440\u0430","tooltip.undo":"\u041e\u0442\u043c\u044f\u043d\u0430","menu.insert matrix":"\u0412\u043c\u044a\u043a\u0432\u0430\u043d\u0435 \u043d\u0430 \u043c\u0430\u0442\u0440\u0438\u0446\u0430","menu.insert vector":"\u0412\u043c\u044a\u043a\u0432\u0430\u043d\u0435 \u043d\u0430 \u0432\u0435\u043a\u0442\u043e\u0440","submenu.array.matrix delimiters":"\u041c\u0430\u0442\u0440\u0438\u0447\u043d\u0438 \u0440\u0430\u0437\u0434\u0435\u043b\u0438\u0442\u0435\u043b\u0438","menu.array.add row above":"\u0414\u043e\u0431\u0430\u0432\u044f\u043d\u0435 \u043d\u0430 \u0440\u0435\u0434 \u0441\u043b\u0435\u0434","menu.array.add row below":"\u0414\u043e\u0431\u0430\u0432\u044f\u043d\u0435 \u043d\u0430 \u0440\u0435\u0434 \u043f\u0440\u0435\u0434\u0438","menu.array.add column after":"\u0414\u043e\u0431\u0430\u0432\u044f\u043d\u0435 \u043d\u0430 \u043a\u043e\u043b\u043e\u043d\u0430 \u0441\u043b\u0435\u0434","menu.array.add column before":"\u0414\u043e\u0431\u0430\u0432\u044f\u043d\u0435 \u043d\u0430 \u043a\u043e\u043b\u043e\u043d\u0430 \u043f\u0440\u0435\u0434\u0438","menu.array.delete row":"\u0418\u0437\u0442\u0440\u0438\u0432\u0430\u043d\u0435 \u043d\u0430 \u0440\u0435\u0434\u0430","menu.array.delete rows":"\u0418\u0437\u0442\u0440\u0438\u0432\u0430\u043d\u0435 \u043d\u0430 \u0438\u0437\u0431\u0440\u0430\u043d\u0438\u0442\u0435 \u0440\u0435\u0434\u043e\u0432\u0435","menu.array.delete column":"\u0418\u0437\u0442\u0440\u0438\u0432\u0430\u043d\u0435 \u043d\u0430 \u043a\u043e\u043b\u043e\u043d\u0430","menu.array.delete columns":"\u0418\u0437\u0442\u0440\u0438\u0432\u0430\u043d\u0435 \u043d\u0430 \u0438\u0437\u0431\u0440\u0430\u043d\u0438\u0442\u0435 \u043a\u043e\u043b\u043e\u043d\u0438","submenu.array.insert separator":"\u041f\u043e\u0441\u0442\u0430\u0432\u0435\u0442\u0435 \u0440\u0430\u0437\u0434\u0435\u043b\u0438\u0442\u0435\u043b","menu.insert table":"\u0412\u043c\u044a\u043a\u0432\u0430\u043d\u0435 \u043d\u0430 \u0442\u0430\u0431\u043b\u0438\u0446\u0430","submenu.table style":"\u0422\u0430\u0431\u043b\u0438\u0447\u0435\u043d \u0441\u0442\u0438\u043b"},bs:{"keyboard.tooltip.functions":"Funkcije","keyboard.tooltip.symbols":"Simboli","keyboard.tooltip.greek":"Gr\u010dka slova","keyboard.tooltip.command":"LaTeX naredbeni na\u010din","keyboard.tooltip.numeric":"Numeri\u010dki","keyboard.tooltip.roman":"Rimska slova","tooltip.copy to clipboard":"Kopirati u clipboard","tooltip.redo":"Ponovi","tooltip.toggle virtual keyboard":"Uklju\u010di / isklju\u010di virtualnu tipkovnicu","tooltip.undo":"Poni\u0161ti","menu.insert matrix":"Umetni matricu","menu.insert vector":"Umetni vektor","submenu.array.matrix delimiters":"Matri\u010dni razdjelnici","menu.array.add row above":"Dodaj redak nakon","menu.array.add row below":"Dodaj red prije","menu.array.add column after":"Dodaj stupac nakon","menu.array.add column before":"Dodaj stupac prije","menu.array.delete row":"Izbri\u0161i red","menu.array.delete rows":"Izbri\u0161i odabrane redove","menu.array.delete column":"Izbri\u0161i stupac","menu.array.delete columns":"Izbri\u0161i odabrane stupce","submenu.array.insert separator":"Umetni separator","menu.insert table":"Ubaci tabelu","submenu.table style":"Stil tabele"},cs:{"keyboard.tooltip.functions":"Funkce","keyboard.tooltip.symbols":"Symboly","keyboard.tooltip.greek":"\u0158eck\xe9 dopisy","keyboard.tooltip.command":"P\u0159\xedkazov\xfd re\u017eim LaTeX","keyboard.tooltip.numeric":"\u010c\xedseln\xe9","keyboard.tooltip.roman":"\u0158\xedmsk\xe9 dopisy","tooltip.copy to clipboard":"Zkop\xedrovat do schr\xe1nky","tooltip.redo":"P\u0159ed\u011blat","tooltip.toggle virtual keyboard":"P\u0159epnout virtu\xe1ln\xed kl\xe1vesnici","tooltip.undo":"Vr\xe1tit","menu.insert matrix":"Vlo\u017ete matici","menu.insert vector":"Vlo\u017eit vektor","submenu.array.matrix delimiters":"Odd\u011blova\u010de matic","menu.array.add row above":"P\u0159idat \u0159\xe1dek za","menu.array.add row below":"P\u0159idat \u0159\xe1dek p\u0159ed","menu.array.add column after":"P\u0159idat sloupec za","menu.array.add column before":"P\u0159idat sloupec d\u0159\xedve","menu.array.delete row":"Odstranit \u0159\xe1dek","menu.array.delete rows":"Odstranit vybran\xe9 \u0159\xe1dky","menu.array.delete column":"Odstranit sloupec","menu.array.delete columns":"Odstranit vybran\xe9 sloupce","submenu.array.insert separator":"Vlo\u017ete odd\u011blova\u010d","menu.insert table":"Vlo\u017eit tabulku","submenu.table style":"Styl tabulky"},da:{"keyboard.tooltip.functions":"Funktioner","keyboard.tooltip.symbols":"Symboler","keyboard.tooltip.greek":"Gr\xe6ske bogstaver","keyboard.tooltip.command":"LaTeX kommandotilstand","keyboard.tooltip.numeric":"Numerisk","keyboard.tooltip.roman":"Romerske breve","tooltip.copy to clipboard":"Kopier til udklipsholder","tooltip.redo":"Gentag igen","tooltip.toggle virtual keyboard":"Skift virtuelt tastatur","tooltip.undo":"Fortryd","menu.insert matrix":"Inds\xe6t matrix","menu.insert vector":"Inds\xe6t vektor","submenu.array.matrix delimiters":"Matrixafgr\xe6nsere","menu.array.add row above":"Tilf\xf8j r\xe6kke efter","menu.array.add row below":"Tilf\xf8j r\xe6kke f\xf8r","menu.array.add column after":"Tilf\xf8j kolonne efter","menu.array.add column before":"Tilf\xf8j kolonne f\xf8r","menu.array.delete row":"Slet r\xe6kke","menu.array.delete rows":"Slet valgte r\xe6kker","menu.array.delete column":"Slet kolonne","menu.array.delete columns":"Slet valgte kolonner","submenu.array.insert separator":"Inds\xe6t separator","menu.insert table":"Inds\xe6t tabel","submenu.table style":"Tabelstil"},de:{"keyboard.tooltip.functions":"Funktionen","keyboard.tooltip.symbols":"Symbole","keyboard.tooltip.greek":"Griechische Buchstaben","keyboard.tooltip.command":"LaTeX-Befehlsmodus","keyboard.tooltip.numeric":"Numerisch","keyboard.tooltip.roman":"R\xf6mische Buchstaben","tooltip.copy to clipboard":"In die Zwischenablage kopieren","tooltip.redo":"Wiederholen","tooltip.toggle virtual keyboard":"Virtuelle Tastatur umschalten","tooltip.undo":"Widerrufen","menu.insert matrix":"Matrix einf\xfcgen","menu.insert vector":"Vektor einf\xfcgen","submenu.array.matrix delimiters":"Matrixtrennzeichen","menu.array.add row above":"Zeile hinzuf\xfcgen nach","menu.array.add row below":"Zeile hinzuf\xfcgen vor","menu.array.add column after":"Spalte hinzuf\xfcgen nach","menu.array.add column before":"Spalte hinzuf\xfcgen vor","menu.array.delete row":"Zeile l\xf6schen","menu.array.delete rows":"Ausgew\xe4hlte Zeilen l\xf6schen","menu.array.delete column":"Spalte l\xf6schen","menu.array.delete columns":"Ausgew\xe4hlte Spalten l\xf6schen","submenu.array.insert separator":"Trennzeichen einf\xfcgen","menu.insert table":"Tabelle einf\xfcgen","submenu.table style":"Tabellenstil"},el:{"keyboard.tooltip.functions":"\u03c3\u03c5\u03bd\u03b1\u03c1\u03c4\u03ae\u03c3\u03b5\u03b9\u03c2","keyboard.tooltip.symbols":"\u03c3\u03cd\u03bc\u03b2\u03bf\u03bb\u03b1","keyboard.tooltip.greek":"\u03b5\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ac \u03b3\u03c1\u03ac\u03bc\u03bc\u03b1\u03c4\u03b1","keyboard.tooltip.command":"\u039b\u03b5\u03b9\u03c4\u03bf\u03c5\u03c1\u03b3\u03af\u03b1 \u03b5\u03bd\u03c4\u03bf\u03bb\u03ce\u03bd LaTeX","keyboard.tooltip.numeric":"\u0391\u03c1\u03b9\u03b8\u03bc\u03b7\u03c4\u03b9\u03ba\u03cc\u03c2","keyboard.tooltip.roman":"\u03a1\u03c9\u03bc\u03b1\u03ca\u03ba\u03ac \u03b3\u03c1\u03ac\u03bc\u03bc\u03b1\u03c4\u03b1","tooltip.copy to clipboard":"\u0391\u03bd\u03c4\u03b9\u03b3\u03c1\u03b1\u03c6\u03ae \u03c3\u03c4\u03bf \u03c0\u03c1\u03cc\u03c7\u03b5\u03b9\u03c1\u03bf","tooltip.redo":"\u039e\u03b1\u03bd\u03b1\u03ba\u03ac\u03bd\u03c9","tooltip.toggle virtual keyboard":"\u0395\u03bd\u03b1\u03bb\u03bb\u03b1\u03b3\u03ae \u03b5\u03b9\u03ba\u03bf\u03bd\u03b9\u03ba\u03bf\u03cd \u03c0\u03bb\u03b7\u03ba\u03c4\u03c1\u03bf\u03bb\u03bf\u03b3\u03af\u03bf\u03c5","tooltip.undo":"\u039e\u03b5\u03ba\u03ac\u03bd\u03c9","menu.insert matrix":"\u0395\u03b9\u03c3\u03b1\u03b3\u03c9\u03b3\u03ae Matrix","menu.insert vector":"\u0395\u03b9\u03c3\u03b1\u03b3\u03c9\u03b3\u03ae \u03b4\u03b9\u03b1\u03bd\u03cd\u03c3\u03bc\u03b1\u03c4\u03bf\u03c2","submenu.array.matrix delimiters":"\u039f\u03c1\u03b9\u03bf\u03b8\u03ad\u03c4\u03b5\u03c2 Matrix","menu.array.add row above":"\u03a0\u03c1\u03bf\u03c3\u03b8\u03ae\u03ba\u03b7 \u03c3\u03b5\u03b9\u03c1\u03ac\u03c2 \u03bc\u03b5\u03c4\u03ac","menu.array.add row below":"\u03a0\u03c1\u03bf\u03c3\u03b8\u03ae\u03ba\u03b7 \u03c3\u03b5\u03b9\u03c1\u03ac\u03c2 \u03c0\u03c1\u03b9\u03bd","menu.array.add column after":"\u03a0\u03c1\u03bf\u03c3\u03b8\u03ae\u03ba\u03b7 \u03c3\u03c4\u03ae\u03bb\u03b7\u03c2 \u03bc\u03b5\u03c4\u03ac","menu.array.add column before":"\u03a0\u03c1\u03bf\u03c3\u03b8\u03ae\u03ba\u03b7 \u03c3\u03c4\u03ae\u03bb\u03b7\u03c2 \u03c0\u03c1\u03b9\u03bd","menu.array.delete row":"\u0394\u03b9\u03b1\u03b3\u03c1\u03b1\u03c6\u03ae \u03c3\u03b5\u03b9\u03c1\u03ac\u03c2","menu.array.delete rows":"\u0394\u03b9\u03b1\u03b3\u03c1\u03b1\u03c6\u03ae \u03b5\u03c0\u03b9\u03bb\u03b5\u03b3\u03bc\u03ad\u03bd\u03c9\u03bd \u03c3\u03b5\u03b9\u03c1\u03ce\u03bd","menu.array.delete column":"\u0394\u03b9\u03b1\u03b3\u03c1\u03b1\u03c6\u03ae \u03c3\u03c4\u03ae\u03bb\u03b7\u03c2","menu.array.delete columns":"\u0394\u03b9\u03b1\u03b3\u03c1\u03b1\u03c6\u03ae \u03b5\u03c0\u03b9\u03bb\u03b5\u03b3\u03bc\u03ad\u03bd\u03c9\u03bd \u03c3\u03c4\u03b7\u03bb\u03ce\u03bd","submenu.array.insert separator":"\u0395\u03b9\u03c3\u03b1\u03b3\u03c9\u03b3\u03ae \u03b4\u03b9\u03b1\u03c7\u03c9\u03c1\u03b9\u03c3\u03c4\u03b9\u03ba\u03bf\u03cd","menu.insert table":"\u0395\u03b9\u03c3\u03b1\u03b3\u03c9\u03b3\u03ae \u03c0\u03af\u03bd\u03b1\u03ba\u03b1","submenu.table style":"\u03a3\u03c4\u03c5\u03bb \u03c0\u03af\u03bd\u03b1\u03ba\u03b1"},es:{"keyboard.tooltip.functions":"Funciones","keyboard.tooltip.symbols":"S\xedmbolos","keyboard.tooltip.greek":"Letras griegas","keyboard.tooltip.command":"Modo Comando LaTeX","keyboard.tooltip.numeric":"Num\xe9rico","keyboard.tooltip.roman":"Letras romanas","tooltip.copy to clipboard":"Copiar al portapapeles","tooltip.redo":"Rehacer","tooltip.toggle virtual keyboard":"Alternar teclado virtual","tooltip.undo":"Deshacer","menu.insert matrix":"A\xf1adir Matriz","menu.insert vector":"A\xf1adir vector","submenu.array.matrix delimiters":"Delimitadores de Matriz","menu.array.add row above":"A\xf1adir L\xednea Antes","menu.array.add row below":"A\xf1adir L\xednea Despues","menu.array.add column after":"A\xf1adir Columna Despues","menu.array.add column before":"A\xf1adir Columna Antes","menu.array.delete row":"Borrar L\xednea","menu.array.delete rows":"Borrar L\xedneas Seleccionadas","menu.array.delete column":"Borrar Columna","menu.array.delete columns":"Borrar Columnas Seleccionadas","submenu.array.insert separator":"Insertar un Separador","menu.insert table":"Insertar Tabla","submenu.table style":"Estilo de Tabla"},et:{"keyboard.tooltip.functions":"Funktsioonid","keyboard.tooltip.symbols":"S\xfcmbolid","keyboard.tooltip.greek":"Kreeka kirjad","keyboard.tooltip.command":"LaTeXi k\xe4sure\u017eiim","keyboard.tooltip.numeric":"Numbriline","keyboard.tooltip.roman":"Rooma kirjad","tooltip.copy to clipboard":"Kopeerida l\xf5ikelauale","tooltip.redo":"Tee uuesti","tooltip.toggle virtual keyboard":"L\xfclitage sisse virtuaalne klaviatuur","tooltip.undo":"V\xf5ta tagasi","menu.insert matrix":"Sisesta maatriks","menu.insert vector":"Sisesta vektor","submenu.array.matrix delimiters":"Maatriksi eraldajad","menu.array.add row above":"Lisa rida p\xe4rast","menu.array.add row below":"Lisa rida enne","menu.array.add column after":"Lisa veerg p\xe4rast","menu.array.add column before":"Lisa veerg enne","menu.array.delete row":"Kustuta rida","menu.array.delete rows":"Kustuta valitud read","menu.array.delete column":"Kustuta veerg","menu.array.delete columns":"Kustuta valitud veerud","submenu.array.insert separator":"Sisestage eraldaja","menu.insert table":"Sisesta tabeli","submenu.table style":"Tabeli stiilis"},fa:{"keyboard.tooltip.functions":"\u062a\u0648\u0627\u0628\u0639","keyboard.tooltip.symbols":"\u0646\u0645\u0627\u062f\u0647\u0627","keyboard.tooltip.greek":"\u062d\u0631\u0648\u0641 \u06cc\u0648\u0646\u0627\u0646\u06cc","keyboard.tooltip.command":"\u062d\u0627\u0644\u062a \u062f\u0633\u062a\u0648\u0631 \u0644\u0627\u062a\u06a9","keyboard.tooltip.numeric":"\u0639\u062f\u062f\u06cc","keyboard.tooltip.roman":"\u062d\u0631\u0648\u0641 \u0631\u0648\u0645\u06cc","tooltip.copy to clipboard":"\u06a9\u067e\u06cc \u0628\u0647 \u06a9\u0644\u06cc\u067e\u0628\u0648\u0631\u062f","tooltip.redo":"\u0628\u0627\u0632\u06af\u0634\u062a \u0628\u0647 \u0628\u0639\u062f","tooltip.toggle virtual keyboard":"\u0646\u0645\u0627\u06cc\u0634/\u0646\u0647\u0641\u062a\u0646 \u06a9\u06cc\u0628\u0648\u0631\u062f \u0645\u062c\u0627\u0632\u06cc","tooltip.undo":"\u0628\u0627\u0632\u06af\u0634\u062a \u0628\u0647 \u0642\u0628\u0644","menu.insert matrix":"\u0645\u0627\u062a\u0631\u06cc\u0633 \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f","menu.insert vector":"\u062f\u0631\u062c \u0628\u0631\u062f\u0627\u0631","submenu.array.matrix delimiters":"\u0645\u0631\u0632\u0647\u0627\u06cc \u0645\u0627\u062a\u0631\u06cc\u0633","menu.array.add row above":"\u0628\u0639\u062f \u0627\u0632 \u0622\u0646 \u0631\u062f\u06cc\u0641 \u0627\u0636\u0627\u0641\u0647 \u06a9\u0646\u06cc\u062f","menu.array.add row below":"\u0631\u062f\u06cc\u0641 \u0631\u0627 \u0642\u0628\u0644 \u0627\u0636\u0627\u0641\u0647 \u06a9\u0646\u06cc\u062f","menu.array.add column after":"\u0627\u0636\u0627\u0641\u0647 \u06a9\u0631\u062f\u0646 \u0633\u062a\u0648\u0646 \u0628\u0639\u062f","menu.array.add column before":"\u0633\u062a\u0648\u0646 \u0642\u0628\u0644 \u0631\u0627 \u0627\u0636\u0627\u0641\u0647 \u06a9\u0646\u06cc\u062f","menu.array.delete row":"\u0631\u062f\u06cc\u0641 \u0631\u0627 \u062d\u0630\u0641 \u06a9\u0646\u06cc\u062f","menu.array.delete rows":"\u0631\u062f\u06cc\u0641 \u0647\u0627\u06cc \u0627\u0646\u062a\u062e\u0627\u0628 \u0634\u062f\u0647 \u0631\u0627 \u062d\u0630\u0641 \u06a9\u0646\u06cc\u062f","menu.array.delete column":"\u062d\u0630\u0641 \u0633\u062a\u0648\u0646","menu.array.delete columns":"\u0633\u062a\u0648\u0646 \u0647\u0627\u06cc \u0627\u0646\u062a\u062e\u0627\u0628 \u0634\u062f\u0647 \u0631\u0627 \u062d\u0630\u0641 \u06a9\u0646\u06cc\u062f","submenu.array.insert separator":"\u062f\u0631\u062c \u062c\u062f\u0627 \u06a9\u0646\u0646\u062f\u0647","menu.insert table":"\u0642\u0631\u0627\u0631 \u062f\u0627\u062f\u0646 \u062c\u062f\u0648\u0644","submenu.table style":"\u0633\u0628\u06a9 \u0645\u06cc\u0632"},fi:{"keyboard.tooltip.functions":"Toiminnot","keyboard.tooltip.symbols":"Symbolit","keyboard.tooltip.greek":"Kreikkalaiset kirjeet","keyboard.tooltip.command":"LaTeX-komentotila","keyboard.tooltip.numeric":"Numeerinen","keyboard.tooltip.roman":"Roomalaiset kirjeet","tooltip.copy to clipboard":"Kopioi leikep\xf6yd\xe4lle","tooltip.redo":"Tee uudelleen","tooltip.toggle virtual keyboard":"Vaihda virtuaalin\xe4pp\xe4imist\xf6","tooltip.undo":"Kumoa","menu.insert matrix":"Lis\xe4\xe4 matriisi","menu.insert vector":"Lis\xe4\xe4 vektori","submenu.array.matrix delimiters":"Matriisin erottimet","menu.array.add row above":"Lis\xe4\xe4 rivi j\xe4lkeen","menu.array.add row below":"Lis\xe4\xe4 rivi ennen","menu.array.add column after":"Lis\xe4\xe4 sarake j\xe4lkeen","menu.array.add column before":"Lis\xe4\xe4 sarake ennen","menu.array.delete row":"Poista rivi","menu.array.delete rows":"Poista valitut rivit","menu.array.delete column":"Poista sarake","menu.array.delete columns":"Poista valitut sarakkeet","submenu.array.insert separator":"Aseta erotin","menu.insert table":"Lis\xe4\xe4 taulukko","submenu.table style":"Taulukon tyyli"},fr:{"keyboard.tooltip.functions":"Fonctions","keyboard.tooltip.symbols":"Symboles","keyboard.tooltip.greek":"Lettres grecques","keyboard.tooltip.command":"Mode de commandes LaTeX","keyboard.tooltip.numeric":"Num\xe9rique","keyboard.tooltip.roman":"Lettres romaines","tooltip.copy to clipboard":"Copier dans le presse-papiers","tooltip.redo":"R\xe9tablir","tooltip.toggle virtual keyboard":"Afficher/Masquer le clavier virtuel","tooltip.undo":"Annuler","menu.insert matrix":"Ins\xe9rer une Matrice","menu.insert vector":"Ins\xe9rer un Vecteur","submenu.array.matrix delimiters":"D\xe9limiteurs de la Matrice","menu.array.add row above":"Ajouter une Ligne Avant","menu.array.add row below":"Ajouter une Ligne Apr\xe8s","menu.array.add column before":"Ajouter une Colonne Avant","menu.array.add column after":"Ajouter une Colonne Apr\xe8s","menu.array.delete row":"Enlever une Ligne","menu.array.delete rows":"Enlever les Lignes S\xe9lection\xe9es","menu.array.delete column":"Enlever une Colone","menu.array.delete columns":"Enlever les Colonnes S\xe9lection\xe9es","submenu.array.insert separator":"Ins\xe9rer un S\xe9parateur","menu.insert table":"Ins\xe9rer une Table","submenu.table style":"Style de la  Table"},ga:{"keyboard.tooltip.functions":"Feidhmeanna","keyboard.tooltip.symbols":"Siombail\xed","keyboard.tooltip.greek":"Litreacha na Gr\xe9ige","keyboard.tooltip.command":"M\xf3d Ord\xfa LaTeX","keyboard.tooltip.numeric":"Uimhri\xfail","keyboard.tooltip.roman":"Litreacha R\xf3mh\xe1nacha","tooltip.copy to clipboard":"C\xf3ipe\xe1il chuig an Ghearrthaisce","tooltip.redo":"Athdh\xe9an","tooltip.toggle virtual keyboard":"M\xe9archl\xe1ir F\xedor\xfail a Fh\xe1il","tooltip.undo":"Cealaigh","menu.insert matrix":"Cuir isteach Maitr\xeds","menu.insert vector":"Cuir isteach Veicteoir","submenu.array.matrix delimiters":"Delimiters Maitr\xeds","menu.array.add row above":"Cuir Rae Tar \xe9is","menu.array.add row below":"Cuir Rae Roimh","menu.array.add column after":"Cuir Col\xfan Tar \xe9is","menu.array.add column before":"Cuir Col\xfan Roimh","menu.array.delete row":"Scrios Rae","menu.array.delete rows":"Scrios Sraitheanna Roghnaithe","menu.array.delete column":"Scrios Col\xfan","menu.array.delete columns":"Scrios Col\xfain Roghnaithe","submenu.array.insert separator":"Cuir Deighilteoir isteach","menu.insert table":"Ions\xe1igh T\xe1bla","submenu.table style":"St\xedl T\xe1bla"},he:{"keyboard.tooltip.functions":"\u05e4\u05d5\u05e0\u05e7\u05e6\u05d9\u05d5\u05ea","keyboard.tooltip.symbols":"\u05e1\u05de\u05dc\u05d9\u05dd","keyboard.tooltip.greek":"\u05d0\u05d5\u05ea\u05d9\u05d5\u05ea \u05d9\u05d5\u05d5\u05e0\u05d9\u05d5\u05ea","keyboard.tooltip.command":"\u05de\u05e6\u05d1 \u05e4\u05e7\u05d5\u05d3\u05d4 \u05dc\u05d8\u05e7\u05e1","keyboard.tooltip.numeric":"\u05de\u05e1\u05e4\u05e8\u05d9","keyboard.tooltip.roman":"\u05de\u05db\u05ea\u05d1\u05d9\u05dd \u05e8\u05d5\u05de\u05d9\u05d9\u05dd","tooltip.copy to clipboard":"\u05d4\u05e2\u05ea\u05e7 \u05dc\u05dc\u05d5\u05d7","tooltip.redo":"\u05dc\u05b7\u05e2\u05b2\u05e9\u05c2\u05d5\u05b9\u05ea \u05e9\u05c1\u05d5\u05bc\u05d1","tooltip.toggle virtual keyboard":"\u05d4\u05d7\u05dc\u05e3 \u05d0\u05ea \u05d4\u05de\u05e7\u05dc\u05d3\u05ea \u05d4\u05d5\u05d5\u05d9\u05e8\u05d8\u05d5\u05d0\u05dc\u05d9\u05ea","tooltip.undo":"\u05dc\u05d1\u05d8\u05dc","menu.insert matrix":"\u05d4\u05db\u05e0\u05e1 \u05de\u05d8\u05e8\u05d9\u05e7\u05e1","menu.insert vector":"\u05d4\u05db\u05e0\u05e1 \u05d5\u05e7\u05d8\u05d5\u05e8","submenu.array.matrix delimiters":"\u05de\u05e4\u05e8\u05d9\u05d3\u05d9 \u05de\u05d8\u05e8\u05d9\u05e7\u05e1","menu.array.add row above":"\u05d4\u05d5\u05e1\u05e3 \u05e9\u05d5\u05e8\u05d4 \u05d0\u05d7\u05e8\u05d9","menu.array.add row below":"\u05d4\u05d5\u05e1\u05e3 \u05e9\u05d5\u05e8\u05d4 \u05dc\u05e4\u05e0\u05d9","menu.array.add column after":"\u05d4\u05d5\u05e1\u05e3 \u05e2\u05de\u05d5\u05d3\u05d4 \u05d0\u05d7\u05e8\u05d9","menu.array.add column before":"\u05d4\u05d5\u05e1\u05e3 \u05e2\u05de\u05d5\u05d3\u05d4 \u05dc\u05e4\u05e0\u05d9","menu.array.delete row":"\u05de\u05d7\u05e7 \u05e9\u05d5\u05e8\u05d4","menu.array.delete rows":"\u05de\u05d7\u05e7 \u05e9\u05d5\u05e8\u05d5\u05ea \u05e9\u05e0\u05d1\u05d7\u05e8\u05d5","menu.array.delete column":"\u05de\u05d7\u05e7 \u05e2\u05de\u05d5\u05d3\u05d4","menu.array.delete columns":"\u05de\u05d7\u05e7 \u05e2\u05de\u05d5\u05d3\u05d5\u05ea \u05e9\u05e0\u05d1\u05d7\u05e8\u05d5","submenu.array.insert separator":"\u05d4\u05db\u05e0\u05e1 \u05de\u05e4\u05e8\u05d9\u05d3","menu.insert table":"\u05d4\u05db\u05e0\u05e1 \u05d8\u05d1\u05dc\u05d4","submenu.table style":"\u05d8\u05d1\u05dc\u05d4 \u05e1\u05b4\u05d2\u05b0\u05e0\u05d5\u05b9\u05df"},hr:{"keyboard.tooltip.functions":"Funkcije","keyboard.tooltip.symbols":"Simboli","keyboard.tooltip.greek":"Gr\u010dka slova","keyboard.tooltip.command":"LaTeX naredbeni na\u010din","keyboard.tooltip.numeric":"Numeri\u010dki","keyboard.tooltip.roman":"Rimska slova","tooltip.copy to clipboard":"Kopirati u me\u0111uspremnik","tooltip.redo":"Ponovi","tooltip.toggle virtual keyboard":"Uklju\u010di / isklju\u010di virtualnu tipkovnicu","tooltip.undo":"Poni\u0161ti","menu.insert matrix":"Umetni matricu","menu.insert vector":"Umetni vektor","submenu.array.matrix delimiters":"Matri\u010dni razdjelnici","menu.array.add row above":"Dodaj redak nakon","menu.array.add row below":"Dodaj redak prije","menu.array.add column after":"Dodaj stupac nakon","menu.array.add column before":"Dodaj stupac prije","menu.array.delete row":"Izbri\u0161i redak","menu.array.delete rows":"Izbri\u0161i odabrane retke","menu.array.delete column":"Izbri\u0161i stupac","menu.array.delete columns":"Izbri\u0161i odabrane stupce","submenu.array.insert separator":"Umetni separator","menu.insert table":"Umetni tablicu","submenu.table style":"Stil tabele"},id:{"keyboard.tooltip.functions":"Fungsi","keyboard.tooltip.symbols":"Simbol","keyboard.tooltip.greek":"Huruf Yunani","keyboard.tooltip.command":"Mode Perintah LaTeX","keyboard.tooltip.numeric":"Numerik","keyboard.tooltip.roman":"Surat Romawi","tooltip.copy to clipboard":"Menyalin ke clipboard","tooltip.redo":"Mengulangi","tooltip.toggle virtual keyboard":"Alihkan Keyboard Virtual","tooltip.undo":"Membuka","menu.insert matrix":"Sisipkan Matriks","menu.insert vector":"Sisipkan Vektor","submenu.array.matrix delimiters":"Pembatas Matriks","menu.array.add row above":"Tambahkan Baris Setelah","menu.array.add row below":"Tambahkan Baris Sebelumnya","menu.array.add column after":"Tambahkan Kolom Setelah","menu.array.add column before":"Tambahkan Kolom Sebelumnya","menu.array.delete row":"Hapus Baris","menu.array.delete rows":"Hapus Baris yang Dipilih","menu.array.delete column":"Hapus Kolom","menu.array.delete columns":"Hapus Kolom yang Dipilih","submenu.array.insert separator":"Sisipkan Pemisah","menu.insert table":"Sisipkan Tabel","submenu.table style":"Gaya Tabel"},hi:{"keyboard.tooltip.functions":"\u0915\u093e\u0930\u094d\u092f\u094b\u0902","keyboard.tooltip.symbols":"\u092a\u094d\u0930\u0924\u0940\u0915","keyboard.tooltip.greek":"\u0917\u094d\u0930\u0940\u0915 \u0905\u0915\u094d\u0937\u0930","keyboard.tooltip.command":"\u0932\u093e\u091f\u0947\u0915\u094d\u0938 \u0915\u092e\u093e\u0902\u0921 \u092e\u094b\u0921","keyboard.tooltip.numeric":"\u0938\u0902\u0916\u094d\u092f\u093e\u0924\u094d\u092e\u0915","keyboard.tooltip.roman":"\u0930\u094b\u092e\u0928 \u092a\u0924\u094d\u0930","tooltip.copy to clipboard":"\u0915\u094d\u0932\u093f\u092a\u092c\u094b\u0930\u094d\u0921 \u092a\u0930 \u0915\u0949\u092a\u0940 \u0915\u0930\u0947\u0902","tooltip.redo":"\u092b\u093f\u0930 \u0938\u0947 \u0915\u0930\u0947\u0902","tooltip.toggle virtual keyboard":"\u0935\u0930\u094d\u091a\u0941\u0905\u0932 \u0915\u0940\u092c\u094b\u0930\u094d\u0921 \u091f\u0949\u0917\u0932 \u0915\u0930\u0947\u0902","tooltip.undo":"\u092a\u0942\u0930\u094d\u0935\u0935\u0924","menu.insert matrix":"\u092e\u0948\u091f\u094d\u0930\u093f\u0915\u094d\u0938 \u0921\u093e\u0932\u0947\u0902","menu.insert vector":"\u0935\u0947\u0915\u094d\u091f\u0930 \u0921\u093e\u0932\u0947\u0902","submenu.array.matrix delimiters":"\u092e\u0948\u091f\u094d\u0930\u093f\u0915\u094d\u0938 \u0938\u0940\u092e\u093e\u0902\u0915\u0915","menu.array.add row above":"\u092c\u093e\u0926 \u092e\u0947\u0902 \u092a\u0902\u0915\u094d\u0924\u093f \u091c\u094b\u0921\u093c\u0947\u0902","menu.array.add row below":"\u092a\u0939\u0932\u0947 \u092a\u0902\u0915\u094d\u0924\u093f \u091c\u094b\u0921\u093c\u0947\u0902","menu.array.add column after":"\u092c\u093e\u0926 \u092e\u0947\u0902 \u0915\u0949\u0932\u092e \u091c\u094b\u0921\u093c\u0947\u0902","menu.array.add column before":"\u092a\u0939\u0932\u0947 \u0915\u0949\u0932\u092e \u091c\u094b\u0921\u093c\u0947\u0902","menu.array.delete row":"\u092a\u0902\u0915\u094d\u0924\u093f \u0915\u094b \u0939\u091f\u093e\u090f\u0902","menu.array.delete rows":"\u091a\u092f\u0928\u093f\u0924 \u092a\u0902\u0915\u094d\u0924\u093f\u092f\u094b\u0902 \u0915\u094b \u0939\u091f\u093e\u090f\u0902","menu.array.delete column":"\u0915\u0949\u0932\u092e \u0939\u091f\u093e\u090f\u0902","menu.array.delete columns":"\u091a\u092f\u0928\u093f\u0924 \u0915\u0949\u0932\u092e \u0939\u091f\u093e\u090f\u0902","submenu.array.insert separator":"\u0935\u093f\u092d\u093e\u091c\u0915 \u0921\u093e\u0932\u0947\u0902","menu.insert table":"\u091f\u0947\u092c\u0932 \u0907\u0902\u0938\u0930\u094d\u091f \u0915\u0930\u0947\u0902","submenu.table style":"\u091f\u0947\u092c\u0932 \u0938\u094d\u091f\u093e\u0907\u0932"},hu:{"keyboard.tooltip.functions":"Funkci\xf3k","keyboard.tooltip.symbols":"Szimb\xf3lumok","keyboard.tooltip.greek":"G\xf6r\xf6g levelek","keyboard.tooltip.command":"LaTeX Parancs m\xf3d","keyboard.tooltip.numeric":"Numerikus","keyboard.tooltip.roman":"R\xf3mai levelek","tooltip.copy to clipboard":"M\xe1solja a v\xe1g\xf3lapra","tooltip.redo":"\xdajra","tooltip.toggle virtual keyboard":"V\xe1lt\xe1s a virtu\xe1lis billenty\u0171zetre","tooltip.undo":"Visszavon\xe1s","menu.insert matrix":"Helyezze be a M\xe1trixot","menu.insert vector":"Vektor besz\xfar\xe1sa","submenu.array.matrix delimiters":"M\xe1trixhat\xe1rol\xf3k","menu.array.add row above":"Sor hozz\xe1ad\xe1sa ut\xe1n","menu.array.add row below":"Add Add Sor el\u0151tt","menu.array.add column after":"Oszlop hozz\xe1ad\xe1sa ut\xe1n","menu.array.add column before":"Add oszlop el\u0151tt","menu.array.delete row":"Sor t\xf6rl\xe9se","menu.array.delete rows":"Kijel\xf6lt sorok t\xf6rl\xe9se","menu.array.delete column":"Oszlop t\xf6rl\xe9se","menu.array.delete columns":"A kijel\xf6lt oszlopok t\xf6rl\xe9se","submenu.array.insert separator":"Helyezze be az elv\xe1laszt\xf3t","menu.insert table":"Helyezze be a t\xe1bl\xe1zatot","submenu.table style":"T\xe1bl\xe1zatos st\xedlus"},it:{"keyboard.tooltip.functions":"Funzioni","keyboard.tooltip.symbols":"Simboli","keyboard.tooltip.greek":"Lettere greche","keyboard.tooltip.command":"Modalit\xe0 di comando LaTeX","keyboard.tooltip.numeric":"Numerico","keyboard.tooltip.roman":"Lettere romane","tooltip.copy to clipboard":"Copia negli appunti","tooltip.redo":"Rifare","tooltip.toggle virtual keyboard":"Attiva / disattiva la tastiera virtuale","tooltip.undo":"Disfare","menu.insert matrix":"Inserisci una Matrice","menu.insert vector":"Inserisci Vettore","submenu.array.matrix delimiters":"Delimitatori di Matrice","menu.array.add row above":"Aggiungi una Riga Prima","menu.array.add row below":"Aggiungi una Riga Dopo","menu.array.add column before":"Aggiungi una Colonna Prima","menu.array.add column after":"Aggiungi una Colonna Dopo","menu.array.delete row":"Rimuovi una Riga","menu.array.delete rows":"Rimuovi le Righe Selezionate","menu.array.delete column":"Rimuovi una Colonna","menu.array.delete columns":"Rimuovi le Colonne Selezionate","submenu.array.insert separator":"Inserisci un Separatore","menu.insert table":"Inserisci Tabella","submenu.table style":"Stile tabella"},is:{"keyboard.tooltip.functions":"A\xf0ger\xf0ir","keyboard.tooltip.symbols":"T\xe1kn","keyboard.tooltip.greek":"Gr\xedsk br\xe9f","keyboard.tooltip.command":"LaTeX stj\xf3rnunarstilling","keyboard.tooltip.numeric":"T\xf6lulegt","keyboard.tooltip.roman":"R\xf3mversk br\xe9f","tooltip.copy to clipboard":"Afrita\xf0u \xe1 klemmuspjald","tooltip.redo":"Endurtaka","tooltip.toggle virtual keyboard":"Skiptu um s\xfdndarlyklabor\xf0","tooltip.undo":"Afturkalla","menu.insert matrix":"Settu fylki inn","menu.insert vector":"Settu inn Vector","submenu.array.matrix delimiters":"Matrix afm\xf6rkun","menu.array.add row above":"B\xe6ta vi\xf0 r\xf6\xf0 \xe1 eftir","menu.array.add row below":"B\xe6ta vi\xf0 r\xf6\xf0 \xe1\xf0ur","menu.array.add column after":"B\xe6ta vi\xf0 d\xe1lki \xe1 eftir","menu.array.add column before":"B\xe6ta vi\xf0 d\xe1lki \xe1\xf0ur","menu.array.delete row":"Ey\xf0a r\xf6\xf0","menu.array.delete rows":"Ey\xf0a v\xf6ldum l\xednum","menu.array.delete column":"Ey\xf0a d\xe1lki","menu.array.delete columns":"Ey\xf0a v\xf6ldum d\xe1lkum","submenu.array.insert separator":"Settu skiljuna \xed","menu.insert table":"Settu inn t\xf6flu","submenu.table style":"T\xf6flu st\xedl"},ja:{"keyboard.tooltip.functions":"\u95a2\u6570","keyboard.tooltip.symbols":"\u30b7\u30f3\u30dc\u30eb","keyboard.tooltip.greek":"\u30ae\u30ea\u30b7\u30e3\u6587\u5b57","keyboard.tooltip.command":"\u30e9\u30c6\u30c3\u30af\u30b9\u30b3\u30de\u30f3\u30c9\u30e2\u30fc\u30c9","keyboard.tooltip.numeric":"\u6570\u5024","keyboard.tooltip.roman":"\u30ed\u30fc\u30de\u5b57","tooltip.copy to clipboard":"\u30af\u30ea\u30c3\u30d7\u30dc\u30fc\u30c9\u306b\u30b3\u30d4\u30fc","tooltip.redo":"\u3084\u308a\u76f4\u3057","tooltip.toggle virtual keyboard":"\u4eee\u60f3\u30ad\u30fc\u30dc\u30fc\u30c9\u306e\u5207\u308a\u66ff\u3048","tooltip.undo":"\u5143\u306b\u623b\u3059","menu.insert matrix":"\u30de\u30c8\u30ea\u30c3\u30af\u30b9\u3092\u633f\u5165","menu.insert vector":"\u30d9\u30af\u30c8\u30eb\u3092\u633f\u5165","submenu.array.matrix delimiters":"\u884c\u5217\u533a\u5207\u308a\u6587\u5b57","menu.array.add row above":"\u5f8c\u306b\u884c\u3092\u8ffd\u52a0","menu.array.add row below":"\u524d\u306b\u884c\u3092\u8ffd\u52a0","menu.array.add column after":"\u5f8c\u306b\u5217\u3092\u8ffd\u52a0","menu.array.add column before":"\u524d\u306b\u5217\u3092\u8ffd\u52a0","menu.array.delete row":"\u884c\u3092\u524a\u9664","menu.array.delete rows":"\u9078\u629e\u3057\u305f\u884c\u3092\u524a\u9664\u3059\u308b","menu.array.delete column":"\u5217\u3092\u524a\u9664","menu.array.delete columns":"\u9078\u629e\u3057\u305f\u5217\u3092\u524a\u9664\u3059\u308b","submenu.array.insert separator":"\u30bb\u30d1\u30ec\u30fc\u30bf\u30fc\u3092\u633f\u5165","menu.insert table":"\u30c6\u30fc\u30d6\u30eb\u3092\u633f\u5165","submenu.table style":"\u30c6\u30fc\u30d6\u30eb\u30b9\u30bf\u30a4\u30eb"},ko:{"keyboard.tooltip.functions":"\uae30\ub2a5","keyboard.tooltip.symbols":"\uae30\ud638","keyboard.tooltip.greek":"\uadf8\ub9ac\uc2a4 \ubb38\uc790","keyboard.tooltip.command":"\uc720\uc561 \uba85\ub839 \ubaa8\ub4dc","keyboard.tooltip.numeric":"\uc22b\uc790","keyboard.tooltip.roman":"\ub85c\ub9c8 \ubb38\uc790","tooltip.copy to clipboard":"\ud074\ub9bd \ubcf4\ub4dc\uc5d0 \ubcf5\uc0ac","tooltip.redo":"\ub2e4\uc2dc \ud558\ub2e4","tooltip.toggle virtual keyboard":"\uac00\uc0c1 \ud0a4\ubcf4\ub4dc \uc804\ud658","tooltip.undo":"\uc2e4\ud589 \ucde8\uc18c","menu.insert matrix":"\ub9e4\ud2b8\ub9ad\uc2a4 \uc0bd\uc785","menu.insert vector":"\ubca1\ud130 \uc0bd\uc785","submenu.array.matrix delimiters":"\ud589\ub82c \uad6c\ubd84 \uae30\ud638","menu.array.add row above":"\ub4a4\uc5d0 \ud589 \ucd94\uac00","menu.array.add row below":"\uc55e\uc5d0 \ud589 \ucd94\uac00","menu.array.add column after":"\ub4a4\uc5d0 \uc5f4 \ucd94\uac00","menu.array.add column before":"\uc55e\uc5d0 \uc5f4 \ucd94\uac00","menu.array.delete row":"\ud589 \uc0ad\uc81c","menu.array.delete rows":"\uc120\ud0dd\ud55c \ud589 \uc0ad\uc81c","menu.array.delete column":"\uc5f4 \uc0ad\uc81c","menu.array.delete columns":"\uc120\ud0dd\ud55c \uc5f4 \uc0ad\uc81c","submenu.array.insert separator":"\uad6c\ubd84\uc790 \uc0bd\uc785","menu.insert table":"\ud45c \uc0bd\uc785","submenu.table style":"\ud14c\uc774\ube14 \uc2a4\ud0c0\uc77c"},lv:{"keyboard.tooltip.functions":"Funkcijas","keyboard.tooltip.symbols":"Simboli","keyboard.tooltip.greek":"Grie\u0137u burti","keyboard.tooltip.command":"LaTeX komandu re\u017e\u012bms","keyboard.tooltip.numeric":"Ciparu skaitlis","keyboard.tooltip.roman":"Romie\u0161u v\u0113stules","tooltip.copy to clipboard":"Kop\u0113t starpliktuv\u0113","tooltip.redo":"P\u0101rtais\u012bt","tooltip.toggle virtual keyboard":"P\u0101rsl\u0113gt virtu\u0101lo tastat\u016bru","tooltip.undo":"Atsaukt","menu.insert matrix":"Ievietojiet matricu","menu.insert vector":"Ievietot vektoru","submenu.array.matrix delimiters":"Matricas norobe\u017eot\u0101ji","menu.array.add row above":"Pievienot rindu p\u0113c","menu.array.add row below":"Pievienot rindu pirms","menu.array.add column after":"Pievienot kolonnu p\u0113c","menu.array.add column before":"Pievienot kolonnu pirms","menu.array.delete row":"Dz\u0113st rindu","menu.array.delete rows":"Dz\u0113st atlas\u012bt\u0101s rindas","menu.array.delete column":"Dz\u0113st kolonnu","menu.array.delete columns":"Dz\u0113st atlas\u012bt\u0101s kolonnas","submenu.array.insert separator":"Ievietojiet atdal\u012bt\u0101ju","menu.insert table":"Ievietojiet tabulu","submenu.table style":"Galda stils"},lt:{"keyboard.tooltip.functions":"Funkcijos","keyboard.tooltip.symbols":"Simboliai","keyboard.tooltip.greek":"Graiki\u0161kos raid\u0117s","keyboard.tooltip.command":"LaTeX komand\u0173 re\u017eimas","keyboard.tooltip.numeric":"Skaitmeninis","keyboard.tooltip.roman":"Romos lai\u0161kai","tooltip.copy to clipboard":"Nukopijuoti \u012f i\u0161karpin\u0119","tooltip.redo":"Perdaryti","tooltip.toggle virtual keyboard":"Perjungti virtuali\u0105j\u0105 klaviat\u016br\u0105","tooltip.undo":"At\u0161aukti","menu.insert matrix":"Ievietojiet matricu","menu.insert vector":"Ievietot vektoru","submenu.array.matrix delimiters":"Matricas norobe\u017eot\u0101ji","menu.array.add row above":"Pievienot rindu p\u0113c","menu.array.add row below":"Pievienot rindu pirms","menu.array.add column after":"Pievienot kolonnu p\u0113c","menu.array.add column before":"Pievienot kolonnu pirms","menu.array.delete row":"Dz\u0113st rindu","menu.array.delete rows":"Dz\u0113st atlas\u012bt\u0101s rindas","menu.array.delete column":"Dz\u0113st kolonnu","menu.array.delete columns":"Dz\u0113st atlas\u012bt\u0101s kolonnas","submenu.array.insert separator":"Ievietojiet atdal\u012bt\u0101ju","menu.insert table":"Ievietojiet tabulu","submenu.table style":"Tabulas stili"},lu:{"keyboard.tooltip.functions":"Funktiounen","keyboard.tooltip.symbols":"Symboler","keyboard.tooltip.greek":"Griichesch Br\xe9iwer","keyboard.tooltip.command":"LaTeX Kommando Modus","keyboard.tooltip.numeric":"Numeresch","keyboard.tooltip.roman":"R\xe9imesch Br\xe9iwer","tooltip.copy to clipboard":"Kop\xe9iert op Clipboard","tooltip.redo":"Nees nei maachen","tooltip.toggle virtual keyboard":"Wiesselt Virtuell Tastatur","tooltip.undo":"Undoen","menu.insert matrix":"Matrix asetzen","menu.insert vector":"Insert Vector","submenu.array.matrix delimiters":"Matrix Ofgrenzer","menu.array.add row above":"Dob\xe4izemaachen Rei No","menu.array.add row below":"F\xfc\xfcgt Rei vir","menu.array.add column after":"Dob\xe4izemaachen Kolonn No","menu.array.add column before":"Kolonn derb\xe4i Virun","menu.array.delete row":"Rad l\xe4schen","menu.array.delete rows":"L\xe4scht Ausgewielte Reien","menu.array.delete column":"L\xe4scht Kolonn","menu.array.delete columns":"L\xe4scht Ausgewielte Kolonnen","submenu.array.insert separator":"Insert Separator","menu.insert table":"D\xebsch anzeginn","submenu.table style":"D\xebsch Style"},nl:{"keyboard.tooltip.functions":"Functies","keyboard.tooltip.symbols":"Symbolen","keyboard.tooltip.greek":"Griekse letters","keyboard.tooltip.command":"LaTeX commando mode","keyboard.tooltip.numeric":"Numeriek","keyboard.tooltip.roman":"Romeinse letters","tooltip.copy to clipboard":"Kopi\xebren naar klembord","tooltip.redo":"Opnieuw","tooltip.toggle virtual keyboard":"Schakel naar virtueel toetsenbord","tooltip.undo":"Ongedaan maken","menu.insert matrix":"Matrix invoegen","menu.insert vector":"Vector invoegen","submenu.array.matrix delimiters":"Matrixscheidingstekens","menu.array.add row above":"Rij toevoegen na","menu.array.add row below":"Rij toevoegen eerder","menu.array.add column after":"Kolom toevoegen na","menu.array.add column before":"Kolom toevoegen voor","menu.array.delete row":"Verwijder rij","menu.array.delete rows":"Geselecteerde rijen verwijderen","menu.array.delete column":"Kolom verwijderen","menu.array.delete columns":"Geselecteerde kolommen verwijderen","submenu.array.insert separator":"Scheidingsteken invoegen","menu.insert table":"Tabel invoegen","submenu.table style":"Tabelstijl"},no:{"keyboard.tooltip.functions":"Funksjoner","keyboard.tooltip.symbols":"Symboler","keyboard.tooltip.greek":"Greske bokstaver","keyboard.tooltip.command":"LaTeX kommandomodus","keyboard.tooltip.numeric":"Numerisk","keyboard.tooltip.roman":"Romerske bokstaver","tooltip.copy to clipboard":"Kopiere til utklippstavle","tooltip.redo":"Gj\xf8re om","tooltip.toggle virtual keyboard":"Bytt virtuelt tastatur","tooltip.undo":"Angre","menu.insert matrix":"Sett inn matrise","menu.insert vector":"Sett inn vektor","submenu.array.matrix delimiters":"Matrix avgrensere","menu.array.add row above":"Legg til rad etter","menu.array.add row below":"Legg til rad f\xf8r","menu.array.add column after":"Legg til kolonne etter","menu.array.add column before":"Legg til kolonne f\xf8r","menu.array.delete row":"Slett rad","menu.array.delete rows":"Slett valgte rader","menu.array.delete column":"Slett kolonne","menu.array.delete columns":"Slett valgte kolonner","submenu.array.insert separator":"Sett inn skilletegn","menu.insert table":"Sett inn tabell","submenu.table style":"Tabellstil"},mk:{"keyboard.tooltip.functions":"\u0424\u0443\u043d\u043a\u0446\u0438\u0438","keyboard.tooltip.symbols":"\u0421\u0438\u043c\u0431\u043e\u043b\u0438","keyboard.tooltip.greek":"\u0413\u0440\u0447\u043a\u0438 \u0431\u0443\u043a\u0432\u0438","keyboard.tooltip.command":"\u0420\u0435\u0436\u0438\u043c \u043d\u0430 \u043a\u043e\u043c\u0430\u043d\u0434\u0430 \u0432\u043e \u043b\u0430\u0442\u0435\u043a\u0441","keyboard.tooltip.numeric":"\u041d\u0443\u043c\u0435\u0440\u0438\u0447\u043a\u0438","keyboard.tooltip.roman":"\u0420\u0438\u043c\u0441\u043a\u0438 \u043f\u0438\u0441\u043c\u0430","tooltip.copy to clipboard":"\u041a\u043e\u043f\u0438\u0440\u0430\u0458\u0442\u0435 \u0432\u043e \u043a\u043b\u0438\u043f\u0431\u043e\u0440\u0434","tooltip.redo":"\u041f\u043e\u0432\u0442\u043e\u0440\u043d\u043e","tooltip.toggle virtual keyboard":"\u0412\u043a\u043b\u0443\u0447\u0435\u0442\u0435 \u0458\u0430 \u0432\u0438\u0440\u0442\u0443\u0435\u043b\u043d\u0430\u0442\u0430 \u0442\u0430\u0441\u0442\u0430\u0442\u0443\u0440\u0430","tooltip.undo":"\u0412\u0440\u0430\u0442\u0438","menu.insert matrix":"\u0412\u043c\u0435\u0442\u043d\u0435\u0442\u0435 \u043c\u0430\u0442\u0440\u0438\u0446\u0430","menu.insert vector":"\u0412\u043c\u0435\u0442\u043d\u0438 \u0432\u0435\u043a\u0442\u043e\u0440","submenu.array.matrix delimiters":"\u0420\u0430\u0437\u0433\u0440\u0430\u043d\u0438\u0447\u0443\u0432\u0430\u0447\u0438 \u043d\u0430 \u043c\u0430\u0442\u0440\u0438\u0446\u0430","menu.array.add row above":"\u0414\u043e\u0434\u0430\u0434\u0435\u0442\u0435 \u0440\u0435\u0434 \u043f\u043e\u0441\u043b\u0435","menu.array.add row below":"\u0414\u043e\u0434\u0430\u0434\u0438 \u0440\u0435\u0434 \u043f\u0440\u0435\u0434 \u0442\u043e\u0430","menu.array.add column after":"\u0414\u043e\u0434\u0430\u0434\u0435\u0442\u0435 \u043a\u043e\u043b\u043e\u043d\u0430 \u043f\u043e\u0441\u043b\u0435","menu.array.add column before":"\u0414\u043e\u0434\u0430\u0434\u0435\u0442\u0435 \u043a\u043e\u043b\u043e\u043d\u0430 \u043f\u0440\u0435\u0434 \u0442\u043e\u0430","menu.array.delete row":"\u0418\u0437\u0431\u0440\u0438\u0448\u0438 \u0433\u043e \u0440\u0435\u0434\u043e\u0442","menu.array.delete rows":"\u0418\u0437\u0431\u0440\u0438\u0448\u0435\u0442\u0435 \u0433\u0438 \u0438\u0437\u0431\u0440\u0430\u043d\u0438\u0442\u0435 \u0440\u0435\u0434\u043e\u0432\u0438","menu.array.delete column":"\u0418\u0437\u0431\u0440\u0438\u0448\u0438 \u0458\u0430 \u043a\u043e\u043b\u043e\u043d\u0430\u0442\u0430","menu.array.delete columns":"\u0418\u0437\u0431\u0440\u0438\u0448\u0438 \u0458\u0430 \u043a\u043e\u043b\u043e\u043d\u0430\u0442\u0430","submenu.array.insert separator":"\u0412\u043c\u0435\u0442\u043d\u0435\u0442\u0435 \u0441\u0435\u043f\u0430\u0440\u0430\u0442\u043e\u0440","menu.insert table":"\u0412\u043c\u0435\u0442\u043d\u0438 \u0442\u0430\u0431\u0435\u043b\u0430","submenu.table style":"\u0422\u0430\u0431\u0435\u043b\u0430 \u0441\u0442\u0438\u043b"},pl:{"keyboard.tooltip.functions":"Funkcje","keyboard.tooltip.symbols":"Symbolika","keyboard.tooltip.greek":"Litery greckie","keyboard.tooltip.command":"Tryb polece\u0144 LaTeX","keyboard.tooltip.numeric":"Numeryczne","keyboard.tooltip.roman":"Litery rzymskie","tooltip.copy to clipboard":"Kopiuj do Schowka","tooltip.redo":"Przywr\xf3\u0107","tooltip.toggle virtual keyboard":"Prze\u0142\u0105cz wirtualn\u0105 klawiatur\u0119","tooltip.undo":"Cofnij","menu.insert matrix":"Wstaw macierz","menu.insert vector":"Wstaw wektor","submenu.array.matrix delimiters":"Ograniczniki macierzy","menu.array.add row above":"Dodaj wiersz po","menu.array.add row below":"Dodaj wiersz przed","menu.array.add column after":"Dodaj kolumn\u0119 po","menu.array.add column before":"Dodaj kolumn\u0119 przed","menu.array.delete row":"Usu\u0144 wiersz","menu.array.delete rows":"Usu\u0144 wybrane wiersze","menu.array.delete column":"Usu\u0144 kolumn\u0119","menu.array.delete columns":"Usu\u0144 wybrane kolumny","submenu.array.insert separator":"Wstaw separator","menu.insert table":"Wype\u0142nij tabel\u0119","submenu.table style":"Styl tabel\u0119"},pt:{"keyboard.tooltip.functions":"Functions","keyboard.tooltip.symbols":"S\xedmbolos","keyboard.tooltip.greek":"Letras gregas","keyboard.tooltip.command":"Modo de Comando LaTeX","keyboard.tooltip.numeric":"Num\xe9rico","keyboard.tooltip.roman":"Letras romanas","tooltip.copy to clipboard":"Copiar para \xe1rea de transfer\xeancia","tooltip.redo":"Refazer","tooltip.toggle virtual keyboard":"Alternar teclado virtual","tooltip.undo":"Desfazer","menu.insert matrix":"Inserir Matriz","menu.insert vector":"Inserir vetor","submenu.array.matrix delimiters":"Delimitadores de matriz","menu.array.add row above":"Adicionar linha depois","menu.array.add row below":"Adicionar linha antes","menu.array.add column after":"Adicionar coluna depois","menu.array.add column before":"Adicionar coluna antes","menu.array.delete row":"Excluir linha","menu.array.delete rows":"Excluir linhas selecionadas","menu.array.delete column":"Apagar Coluna","menu.array.delete columns":"Excluir Colunas Selecionadas","submenu.array.insert separator":"Inserir Separador","menu.insert table":"Insira a tabela","submenu.table style":"Estilo tabela"},ro:{"keyboard.tooltip.functions":"Func\u021bii","keyboard.tooltip.symbols":"Simboluri","keyboard.tooltip.greek":"Scrisori grece\u0219ti","keyboard.tooltip.command":"Modul de comand\u0103 latex","keyboard.tooltip.numeric":"Numeric","keyboard.tooltip.roman":"Scrisori romane","tooltip.copy to clipboard":"Copia\u021bi \xeen clipboard","tooltip.redo":"A reface","tooltip.toggle virtual keyboard":"Comuta\u021bi tastatura virtual\u0103","tooltip.undo":"Anula","menu.insert matrix":"Introduce\u021bi Matrix","menu.insert vector":"Insera\u021bi Vector","submenu.array.matrix delimiters":"Delimitatori de matrice","menu.array.add row above":"Ad\u0103uga\u021bi r\xe2ndul dup\u0103","menu.array.add row below":"Ad\u0103uga\u021bi r\xe2ndul \xeenainte","menu.array.add column after":"Ad\u0103uga\u021bi o coloan\u0103 dup\u0103","menu.array.add column before":"Ad\u0103uga\u021bi o coloan\u0103 \xeenainte","menu.array.delete row":"\u0218terge\u021bi r\xe2ndul","menu.array.delete rows":"\u0218terge\u021bi r\xe2ndurile selectate","menu.array.delete column":"\u0218terge\u021bi coloana","menu.array.delete columns":"\u0218terge\u021bi coloanele selectate","submenu.array.insert separator":"Introduce\u021bi separatorul","menu.insert table":"Introduce\u021bi tabelul","submenu.table style":"Table style"},ru:{"keyboard.tooltip.functions":"\u0424\u0443\u043d\u043a\u0446\u0438\u0438","keyboard.tooltip.symbols":"\u0421\u0438\u043c\u0432\u043e\u043b\u044b","keyboard.tooltip.greek":"\u0413\u0440\u0435\u0447\u0435\u0441\u043a\u0438\u0435 \u0431\u0443\u043a\u0432\u044b","keyboard.tooltip.command":"\u0420\u0435\u0436\u0438\u043c \u043a\u043e\u043c\u0430\u043d\u0434\u043d\u043e\u0439 \u0441\u0442\u0440\u043e\u043a\u0438 \u041b\u0430\u0442\u0435\u043a\u0441","keyboard.tooltip.numeric":"\u0447\u0438\u0441\u043b\u043e\u0432\u043e\u0439","keyboard.tooltip.roman":"\u041b\u0430\u0442\u0438\u043d\u0441\u043a\u0438\u0435 \u0431\u0443\u043a\u0432\u044b","tooltip.copy to clipboard":"\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0432 \u0431\u0443\u0444\u0435\u0440 \u043e\u0431\u043c\u0435\u043d\u0430","tooltip.redo":"\u043f\u0435\u0440\u0435\u0434\u0435\u043b\u044b\u0432\u0430\u0442\u044c","tooltip.toggle virtual keyboard":"\u041f\u0435\u0440\u0435\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0432\u0438\u0440\u0442\u0443\u0430\u043b\u044c\u043d\u0443\u044e \u043a\u043b\u0430\u0432\u0438\u0430\u0442\u0443\u0440\u0443","tooltip.undo":"\u0440\u0430\u0441\u0441\u0442\u0435\u0433\u0438\u0432\u0430\u0442\u044c","menu.insert matrix":"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043c\u0430\u0442\u0440\u0438\u0446\u0443","menu.insert vector":"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0432\u0435\u043a\u0442\u043e\u0440","submenu.array.matrix delimiters":"\u041c\u0430\u0442\u0440\u0438\u0447\u043d\u044b\u0435 \u0440\u0430\u0437\u0434\u0435\u043b\u0438\u0442\u0435\u043b\u0438","menu.array.add row above":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u0442\u0440\u043e\u043a\u0443 \u043f\u043e\u0441\u043b\u0435","menu.array.add row below":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u0442\u0440\u043e\u043a\u0443 \u043f\u0435\u0440\u0435\u0434","menu.array.add column after":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u0442\u043e\u043b\u0431\u0435\u0446 \u043f\u043e\u0441\u043b\u0435","menu.array.add column before":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u0442\u043e\u043b\u0431\u0435\u0446 \u043f\u0435\u0440\u0435\u0434","menu.array.delete row":"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u0442\u0440\u043e\u043a\u0443","menu.array.delete rows":"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435 \u0441\u0442\u0440\u043e\u043a\u0438","menu.array.delete column":"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u0442\u043e\u043b\u0431\u0435\u0446","menu.array.delete columns":"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435 \u0441\u0442\u043e\u043b\u0431\u0446\u044b","submenu.array.insert separator":"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0440\u0430\u0437\u0434\u0435\u043b\u0438\u0442\u0435\u043b\u044c","menu.insert table":"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0442\u0430\u0431\u043b\u0438\u0446\u0443","submenu.table style":"\u0422\u0430\u0431\u043b\u0438\u0447\u043d\u044b\u0439 \u0441\u0442\u0438\u043b\u044c"},sk:{"keyboard.tooltip.functions":"Functions","keyboard.tooltip.symbols":"Symboly","keyboard.tooltip.greek":"Gr\xe9cke listy","keyboard.tooltip.command":"Pr\xedkazov\xfd re\u017eim LaTeX","keyboard.tooltip.numeric":"Numerick\xe9","keyboard.tooltip.roman":"R\xedmske listy","tooltip.copy to clipboard":"Skop\xedrova\u0165 do schr\xe1nky","tooltip.redo":"Znova","tooltip.toggle virtual keyboard":"Prepn\xfa\u0165 virtu\xe1lnu kl\xe1vesnicu","tooltip.undo":"Vr\xe1tenie sp\xe4\u0165","menu.insert matrix":"Vlo\u017ete maticu","menu.insert vector":"Vlo\u017ete vektor","submenu.array.matrix delimiters":"Odde\u013eova\u010de mat\xedc","menu.array.add row above":"Pridajte riadok za","menu.array.add row below":"Pridajte riadok pred","menu.array.add column after":"Prida\u0165 st\u013apec za","menu.array.add column before":"Pridajte st\u013apec predt\xfdm","menu.array.delete row":"Odstr\xe1ni\u0165 riadok","menu.array.delete rows":"Odstr\xe1ni\u0165 vybrat\xe9 riadky","menu.array.delete column":"Odstr\xe1ni\u0165 st\u013apec","menu.array.delete columns":"Odstr\xe1ni\u0165 vybrat\xe9 st\u013apce","submenu.array.insert separator":"Vlo\u017ete odde\u013eova\u010d","menu.insert table":"Vlo\u017ete tabu\u013eku","submenu.table style":"\u0160t\xfdl tabu\u013eky"},sl:{"keyboard.tooltip.functions":"Funkcije","keyboard.tooltip.symbols":"Simboli","keyboard.tooltip.greek":"Gr\u0161ka pisma","keyboard.tooltip.command":"Ukazni na\u010din LaTeX","keyboard.tooltip.numeric":"\u0160tevilsko","keyboard.tooltip.roman":"Rimska pisma","tooltip.copy to clipboard":"Kopirati v odlo\u017ei\u0161\u010de","tooltip.redo":"Ponovi","tooltip.toggle virtual keyboard":"Preklop navidezne tipkovnice","tooltip.undo":"Razveljavi","menu.insert matrix":"Vstavi matrico","menu.insert vector":"Vstavi vektor","submenu.array.matrix delimiters":"Matri\u010dni lo\u010devalniki","menu.array.add row above":"Dodaj vrstico po","menu.array.add row below":"Dodaj vrstico prej","menu.array.add column after":"Dodaj stolpec po","menu.array.add column before":"Dodaj stolpec prej","menu.array.delete row":"Izbri\u0161i vrstico","menu.array.delete rows":"Izbri\u0161i izbrane vrstice","menu.array.delete column":"Izbri\u0161i stolpec","menu.array.delete columns":"Izbri\u0161i izbrane stolpce","submenu.array.insert separator":"Vstavi lo\u010dilo","menu.insert table":"Vstavi tabelo","submenu.table style":"Tabela slog"},sq:{"keyboard.tooltip.functions":"Funksione","keyboard.tooltip.symbols":"Simbolet","keyboard.tooltip.greek":"Letrat Greke","keyboard.tooltip.command":"Modaliteti i komand\xebs latex","keyboard.tooltip.numeric":"Numerike","keyboard.tooltip.roman":"Letrat romake","tooltip.copy to clipboard":"Kopjoni n\xeb Clipboard","tooltip.redo":"Riparo","tooltip.toggle virtual keyboard":"Aktivizo tastier\xebn virtuale","tooltip.undo":"Zhb\xebj","menu.insert matrix":"Vendosni Matric\xebn","menu.insert vector":"Vendos vektorin","submenu.array.matrix delimiters":"P\xebrcaktuesit e matric\xebs","menu.array.add row above":"Shto Rreshtin Pas","menu.array.add row below":"Shto Rreshtin Para","menu.array.add column after":"Shto kolon\xebn pas","menu.array.add column before":"Shto kolon\xebn para","menu.array.delete row":"Fshi Rreshtin","menu.array.delete rows":"Fshi rreshtat e zgjedhur","menu.array.delete column":"Fshi kolon\xebn","menu.array.delete columns":"Fshi kolonat e zgjedhura","submenu.array.insert separator":"Vendos Ndar\xebsin","menu.insert table":"Vendos tabel\xebn","submenu.table style":"Stili tabel\xebn"},sr:{"keyboard.tooltip.functions":"\u0424\u0443\u043d\u043a\u0446\u0438\u0458\u0435","keyboard.tooltip.symbols":"\u0421\u0438\u043c\u0431\u043e\u043b\u0438","keyboard.tooltip.greek":"\u0413\u0440\u0435\u0435\u043a \u041b\u0435\u0442\u0442\u0435\u0440\u0441","keyboard.tooltip.command":"\u041b\u0430\u0422\u0435\u041a\u0441 \u043a\u043e\u043c\u0430\u043d\u0434\u043d\u0438 \u0440\u0435\u0436\u0438\u043c","keyboard.tooltip.numeric":"\u041d\u0443\u043c\u0435\u0440\u0438\u0447\u043a\u0438","keyboard.tooltip.roman":"\u0420\u0438\u043c\u0441\u043a\u0430 \u043f\u0438\u0441\u043c\u0430","tooltip.copy to clipboard":"\u041a\u043e\u043f\u0438\u0440\u0430\u0458\u0442\u0435 \u0443 \u043c\u0435\u0452\u0443\u0441\u043f\u0440\u0435\u043c\u043d\u0438\u043a","tooltip.redo":"\u041f\u043e\u043d\u043e\u0432\u0438","tooltip.toggle virtual keyboard":"\u0423\u043a\u0459\u0443\u0447\u0438 / \u0438\u0441\u043a\u0459\u0443\u0447\u0438 \u0432\u0438\u0440\u0442\u0443\u0435\u043b\u043d\u0443 \u0442\u0430\u0441\u0442\u0430\u0442\u0443\u0440\u0443","tooltip.undo":"\u041e\u043f\u043e\u0437\u043e\u0432\u0438","menu.insert matrix":"\u0423\u043c\u0435\u0442\u043d\u0438 \u043c\u0430\u0442\u0440\u0438\u0446\u0443","menu.insert vector":"\u0423\u043c\u0435\u0442\u043d\u0438 \u0432\u0435\u043a\u0442\u043e\u0440","submenu.array.matrix delimiters":"\u041c\u0430\u0442\u0440\u0438\u043a \u0414\u0435\u043b\u0438\u043c\u0438\u0442\u0435\u0440\u0441","menu.array.add row above":"\u0414\u043e\u0434\u0430\u0458 \u0440\u0435\u0434 \u043f\u043e\u0441\u043b\u0435","menu.array.add row below":"\u0414\u043e\u0434\u0430\u0458 \u0440\u0435\u0434 \u043f\u0440\u0435","menu.array.add column after":"\u0414\u043e\u0434\u0430\u0458 \u043a\u043e\u043b\u043e\u043d\u0443 \u043f\u043e\u0441\u043b\u0435","menu.array.add column before":"\u0414\u043e\u0434\u0430\u0458 \u043a\u043e\u043b\u043e\u043d\u0443 \u043f\u0440\u0435","menu.array.delete row":"\u0418\u0437\u0431\u0440\u0438\u0448\u0438 \u0440\u0435\u0434","menu.array.delete rows":"\u0418\u0437\u0431\u0440\u0438\u0448\u0438 \u0438\u0437\u0430\u0431\u0440\u0430\u043d\u0435 \u0440\u0435\u0434\u043e\u0432\u0435","menu.array.delete column":"\u0418\u0437\u0431\u0440\u0438\u0448\u0438 \u043a\u043e\u043b\u043e\u043d\u0443","menu.array.delete columns":"\u0418\u0437\u0431\u0440\u0438\u0448\u0438 \u0438\u0437\u0430\u0431\u0440\u0430\u043d\u0435 \u043a\u043e\u043b\u043e\u043d\u0435","submenu.array.insert separator":"\u0423\u043c\u0435\u0442\u043d\u0438 \u0441\u0435\u043f\u0430\u0440\u0430\u0442\u043e\u0440","menu.insert table":"\u0423\u0431\u0430\u0446\u0438 \u0442\u0430\u0431\u0435\u043b\u0443","submenu.table style":"\u0422\u0430\u0431\u0435\u043b\u0430\u0440\u043d\u0438 \u0441\u0442\u0438\u043b"},sv:{"keyboard.tooltip.functions":"Funktioner","keyboard.tooltip.symbols":"Symboler","keyboard.tooltip.greek":"Grekiska bokst\xe4ver","keyboard.tooltip.command":"LaTeX kommandol\xe4ge","keyboard.tooltip.numeric":"Numerisk","keyboard.tooltip.roman":"Romerska bokst\xe4ver","tooltip.copy to clipboard":"Kopiera till Urklipp","tooltip.redo":"G\xf6ra om","tooltip.toggle virtual keyboard":"V\xe4xla virtuellt tangentbord","tooltip.undo":"\xc5ngra","menu.insert matrix":"S\xe4tt in matris","menu.insert vector":"Infoga vektor","submenu.array.matrix delimiters":"Matrisavgr\xe4nsare","menu.array.add row above":"L\xe4gg till rad efter","menu.array.add row below":"L\xe4gg till rad f\xf6re","menu.array.add column after":"L\xe4gg till kolumn efter","menu.array.add column before":"L\xe4gg till kolumn f\xf6re","menu.array.delete row":"Radera rad","menu.array.delete rows":"Ta bort valda rader","menu.array.delete column":"Ta bort kolumn","menu.array.delete columns":"Ta bort valda kolumner","submenu.array.insert separator":"S\xe4tt i separator","menu.insert table":"Infoga tabell","submenu.table style":"Tabellstil"},th:{"keyboard.tooltip.functions":"\u0e1f\u0e31\u0e07\u0e01\u0e4c\u0e0a\u0e31\u0e48\u0e19","keyboard.tooltip.symbols":"\u0e2a\u0e31\u0e0d\u0e25\u0e31\u0e01\u0e29\u0e13\u0e4c","keyboard.tooltip.greek":"\u0e2d\u0e31\u0e01\u0e29\u0e23\u0e01\u0e23\u0e35\u0e01","keyboard.tooltip.command":"\u0e42\u0e2b\u0e21\u0e14\u0e04\u0e33\u0e2a\u0e31\u0e48\u0e07 \u0e19\u0e49\u0e33\u0e22\u0e32\u0e07","keyboard.tooltip.numeric":"\u0e15\u0e31\u0e27\u0e40\u0e25\u0e02","keyboard.tooltip.roman":"\u0e2d\u0e31\u0e01\u0e29\u0e23\u0e42\u0e23\u0e21\u0e31\u0e19","tooltip.copy to clipboard":"\u0e04\u0e31\u0e14\u0e25\u0e2d\u0e01\u0e44\u0e1b\u0e17\u0e35\u0e48\u0e04\u0e25\u0e34\u0e1b\u0e1a\u0e2d\u0e23\u0e4c\u0e14","tooltip.redo":"\u0e17\u0e33\u0e0b\u0e49\u0e33","tooltip.toggle virtual keyboard":"\u0e2a\u0e25\u0e31\u0e1a\u0e41\u0e1b\u0e49\u0e19\u0e1e\u0e34\u0e21\u0e1e\u0e4c\u0e40\u0e2a\u0e21\u0e37\u0e2d\u0e19","tooltip.undo":"\u0e40\u0e25\u0e34\u0e01\u0e17\u0e33","menu.insert matrix":"\u0e41\u0e17\u0e23\u0e01\u0e40\u0e21\u0e17\u0e23\u0e34\u0e01\u0e0b\u0e4c","menu.insert vector":"\u0e41\u0e17\u0e23\u0e01\u0e40\u0e27\u0e01\u0e40\u0e15\u0e2d\u0e23\u0e4c","submenu.array.matrix delimiters":"\u0e15\u0e31\u0e27\u0e04\u0e31\u0e48\u0e19\u0e40\u0e21\u0e17\u0e23\u0e34\u0e01\u0e0b\u0e4c","menu.array.add row above":"\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e41\u0e16\u0e27\u0e2b\u0e25\u0e31\u0e07","menu.array.add row below":"\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e41\u0e16\u0e27\u0e01\u0e48\u0e2d\u0e19","menu.array.add column after":"\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e04\u0e2d\u0e25\u0e31\u0e21\u0e19\u0e4c\u0e2b\u0e25\u0e31\u0e07","menu.array.add column before":"\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e04\u0e2d\u0e25\u0e31\u0e21\u0e19\u0e4c\u0e01\u0e48\u0e2d\u0e19","menu.array.delete row":"\u0e25\u0e1a\u0e41\u0e16\u0e27","menu.array.delete rows":"\u0e25\u0e1a\u0e41\u0e16\u0e27\u0e17\u0e35\u0e48\u0e40\u0e25\u0e37\u0e2d\u0e01","menu.array.delete column":"\u0e25\u0e1a\u0e04\u0e2d\u0e25\u0e31\u0e21\u0e19\u0e4c","menu.array.delete columns":"\u0e25\u0e1a\u0e04\u0e2d\u0e25\u0e31\u0e21\u0e19\u0e4c\u0e17\u0e35\u0e48\u0e40\u0e25\u0e37\u0e2d\u0e01","submenu.array.insert separator":"\u0e15\u0e31\u0e27\u0e04\u0e31\u0e48\u0e19\u0e41\u0e17\u0e23\u0e01","menu.insert table":"\u0e41\u0e17\u0e23\u0e01\u0e15\u0e32\u0e23\u0e32\u0e07","submenu.table style":"\u0e2a\u0e44\u0e15\u0e25\u0e4c\u0e15\u0e32\u0e23\u0e32\u0e07"},tr:{"keyboard.tooltip.functions":"Fonksiyonlar","keyboard.tooltip.symbols":"Semboller","keyboard.tooltip.greek":"Yunan harfleri","keyboard.tooltip.command":"LaTeX Komut Modu","keyboard.tooltip.numeric":"Say\u0131sal","keyboard.tooltip.roman":"Roma Harfleri","tooltip.copy to clipboard":"Panoya kopyala","tooltip.redo":"Yeniden yap","tooltip.toggle virtual keyboard":"Sanal Klavyeyi A\xe7/Kapat","tooltip.undo":"Geri alma","menu.insert matrix":"Matris Ekle","menu.insert vector":"Vekt\xf6r Ekle","submenu.array.matrix delimiters":"Matris S\u0131n\u0131rlay\u0131c\u0131lar","menu.array.add row above":"Sat\u0131rdan Sonra Ekle","menu.array.add row below":"\xd6nce Sat\u0131r Ekle","menu.array.add column after":"Sonra S\xfctun Ekle","menu.array.add column before":"\xd6nce S\xfctun Ekle","menu.array.delete row":"S\u0131ray\u0131 sil","menu.array.delete rows":"Se\xe7ili Sat\u0131rlar\u0131 Sil","menu.array.delete column":"S\xfctunu Sil","menu.array.delete columns":"Se\xe7ili S\xfctunlar\u0131 Sil","submenu.array.insert separator":"Ay\u0131r\u0131c\u0131 Ekle","menu.insert table":"Tablo Ekle","submenu.table style":"Tablo Stili"},uk:{"keyboard.tooltip.functions":"\u0424\u0443\u043d\u043a\u0446\u0456\u0457","keyboard.tooltip.symbols":"\u0421\u0438\u043c\u0432\u043e\u043b\u0438","keyboard.tooltip.greek":"\u0413\u0440\u0435\u0446\u044c\u043a\u0456 \u043b\u0456\u0442\u0435\u0440\u0438","keyboard.tooltip.command":"\u041a\u043e\u043c\u0430\u043d\u0434\u043d\u0438\u0439 \u0440\u0435\u0436\u0438\u043c \u043b\u0430\u0442\u0435\u043a\u0441\u0443","keyboard.tooltip.numeric":"\u0427\u0438\u0441\u043b\u043e\u0432\u0438\u0439","keyboard.tooltip.roman":"\u0420\u0438\u043c\u0441\u044c\u043a\u0456 \u043b\u0456\u0442\u0435\u0440\u0438","tooltip.copy to clipboard":"\u041a\u043e\u043f\u0456\u044e\u0432\u0430\u0442\u0438 \u0432 \u0431\u0443\u0444\u0435\u0440 \u043e\u0431\u043c\u0456\u043d\u0443","tooltip.redo":"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0438","tooltip.toggle virtual keyboard":"\u041f\u0435\u0440\u0435\u043a\u043b\u044e\u0447\u0438\u0442\u0438 \u0432\u0456\u0440\u0442\u0443\u0430\u043b\u044c\u043d\u0443 \u043a\u043b\u0430\u0432\u0456\u0430\u0442\u0443\u0440\u0443","tooltip.undo":"\u0421\u043a\u0430\u0441\u0443\u0432\u0430\u0442\u0438","menu.insert matrix":"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u0438 \u043c\u0430\u0442\u0440\u0438\u0446\u044e","menu.insert vector":"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u0438 \u0432\u0435\u043a\u0442\u043e\u0440","submenu.array.matrix delimiters":"\u041c\u0430\u0442\u0440\u0438\u0447\u043d\u0456 \u0440\u043e\u0437\u0434\u0456\u043b\u044c\u043d\u0438\u043a\u0438","menu.array.add row above":"\u0414\u043e\u0434\u0430\u0442\u0438 \u0440\u044f\u0434\u043e\u043a \u043f\u0456\u0441\u043b\u044f","menu.array.add row below":"\u0414\u043e\u0434\u0430\u0442\u0438 \u0440\u044f\u0434\u043e\u043a \u0434\u043e","menu.array.add column after":"\u0414\u043e\u0434\u0430\u0442\u0438 \u0441\u0442\u043e\u0432\u043f\u0435\u0446\u044c \u043f\u0456\u0441\u043b\u044f","menu.array.add column before":"\u0414\u043e\u0434\u0430\u0442\u0438 \u0441\u0442\u043e\u0432\u043f\u0435\u0446\u044c \u043f\u0435\u0440\u0435\u0434","menu.array.delete row":"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u0440\u044f\u0434\u043e\u043a","menu.array.delete rows":"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u0432\u0438\u0431\u0440\u0430\u043d\u0456 \u0440\u044f\u0434\u043a\u0438","menu.array.delete column":"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u0441\u0442\u043e\u0432\u043f\u0435\u0446\u044c","menu.array.delete columns":"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u0432\u0438\u0431\u0440\u0430\u043d\u0456 \u0441\u0442\u043e\u0432\u043f\u0446\u0456","submenu.array.insert separator":"\u0412\u0441\u0442\u0430\u0432\u0442\u0435 \u0440\u043e\u0437\u0434\u0456\u043b\u044c\u043d\u0438\u043a","menu.insert table":"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u0438 \u0442\u0430\u0431\u043b\u0438\u0446\u044e","submenu.table style":"\u0421\u0442\u0438\u043b\u044c \u0442\u0430\u0431\u043b\u0438\u0446\u0456"},vi:{"keyboard.tooltip.functions":"Ch\u1ee9c n\u0103ng","keyboard.tooltip.symbols":"K\xfd hi\u1ec7u","keyboard.tooltip.greek":"Ch\u1eef Hy L\u1ea1p","keyboard.tooltip.command":"Ch\u1ebf \u0111\u1ed9 l\u1ec7nh LaTeX","keyboard.tooltip.numeric":"S\u1ed1","keyboard.tooltip.roman":"Ch\u1eef c\xe1i La m\xe3","tooltip.copy to clipboard":"Sao ch\xe9p v\xe0o clipboard","tooltip.redo":"L\xe0m l\u1ea1i","tooltip.toggle virtual keyboard":"Chuy\u1ec3n \u0111\u1ed5i b\xe0n ph\xedm \u1ea3o","tooltip.undo":"Ho\xe0n t\xe1c","menu.insert matrix":"Ch\xe8n ma tr\u1eadn","menu.insert vector":"Insert Vector","submenu.array.matrix delimiters":"D\u1ea5u ph\xe2n c\xe1ch ma tr\u1eadn","menu.array.add row above":"Th\xeam h\xe0ng sau","menu.array.add row below":"Th\xeam h\xe0ng tr\u01b0\u1edbc","menu.array.add column after":"Th\xeam c\u1ed9t sau","menu.array.add column before":"Th\xeam c\u1ed9t tr\u01b0\u1edbc","menu.array.delete row":"X\xf3a h\xe0ng","menu.array.delete rows":"X\xf3a h\xe0ng \u0111\xe3 ch\u1ecdn","menu.array.delete column":"X\xf3a c\u1ed9t","menu.array.delete columns":"X\xf3a c\xe1c c\u1ed9t \u0111\xe3 ch\u1ecdn","submenu.array.insert separator":"Ch\xe8n d\u1ea5u ph\xe2n c\xe1ch","menu.insert table":"Ch\xe8n b\u1ea3ng","submenu.table style":"Ki\u1ec3u b\u1ea3ng"},zh_cn:{"keyboard.tooltip.functions":"\u804c\u80fd","keyboard.tooltip.symbols":"\u7b26\u53f7","keyboard.tooltip.greek":"\u5e0c\u814a\u5b57\u6bcd","keyboard.tooltip.command":"\u4e73\u80f6 \u547d\u4ee4\u6a21\u5f0f","keyboard.tooltip.numeric":"\u6570\u5b57","keyboard.tooltip.roman":"\u7f57\u9a6c\u5b57\u6bcd","tooltip.copy to clipboard":"\u590d\u5236\u5230\u526a\u8d34\u677f","tooltip.redo":"\u91cd\u505a","tooltip.toggle virtual keyboard":"\u5207\u6362\u865a\u62df\u952e\u76d8","tooltip.undo":"\u64a4\u6d88","menu.insert matrix":"\u63d2\u5165\u77e9\u9635","menu.insert vector":"\u63d2\u5165\u5411\u91cf","submenu.array.matrix delimiters":"\u77e9\u9635\u5206\u9694\u7b26","menu.array.add row above":"\u5728\u540e\u9762\u6dfb\u52a0\u884c","menu.array.add row below":"\u5728\u524d\u9762\u6dfb\u52a0\u884c","menu.array.add column after":"\u5728\u540e\u9762\u6dfb\u52a0\u5217r","menu.array.add column before":"\u5728\u524d\u9762\u6dfb\u52a0\u5217","menu.array.delete row":"\u5220\u9664\u884c","menu.array.delete rows":"\u5220\u9664\u9009\u5b9a\u884c","menu.array.delete column":"\u5220\u9664\u5217","menu.array.delete columns":"\u5220\u9664\u9009\u5b9a\u7684\u5217","submenu.array.insert separator":"\u63d2\u5165\u5206\u9694\u7b26","menu.insert table":"\u63d2\u5165\u8868\u683c","submenu.table style":"\u8868\u683c\u6837\u5f0f"},zh_tw:{"keyboard.tooltip.functions":"\u8077\u80fd","keyboard.tooltip.symbols":"\u7b26\u865f","keyboard.tooltip.greek":"\u5e0c\u81d8\u5b57\u6bcd","keyboard.tooltip.command":"\u4e73\u81a0\u547d\u4ee4\u6a21\u5f0f","keyboard.tooltip.numeric":"\u6578\u5b57","keyboard.tooltip.roman":"\u7f85\u99ac\u5b57\u6bcd","tooltip.copy to clipboard":"\u8907\u88fd\u5230\u526a\u8cbc\u677f","tooltip.redo":"\u91cd\u505a","tooltip.toggle virtual keyboard":"\u5207\u63db\u865b\u64ec\u9375\u76e4","tooltip.undo":"\u64a4\u6d88","menu.insert matrix":"\u63d2\u5165\u77e9\u9663","menu.insert vector":"\u63d2\u5165\u5411\u91cf","submenu.array.matrix delimiters":"\u77e9\u9663\u5206\u9694\u7b26","menu.array.add row above":"\u5728\u5f8c\u9762\u6dfb\u52a0\u884c","menu.array.add row below":"\u5728\u524d\u9762\u6dfb\u52a0\u884c","menu.array.add column after":"\u5728\u5f8c\u9762\u6dfb\u52a0\u5217","menu.array.add column before":"\u5728\u524d\u9762\u6dfb\u52a0\u5217","menu.array.delete row":"\u522a\u9664\u884c","menu.array.delete rows":"\u522a\u9664\u9078\u5b9a\u884c","menu.array.delete column":"\u522a\u9664\u5217","menu.array.delete columns":"\u522a\u9664\u9078\u5b9a\u7684\u5217","submenu.array.insert separator":"\u63d2\u5165\u5206\u9694\u7b26","menu.insert table":"\u63d2\u5165\u8868\u683c","submenu.table style":"\u8868\u683c\u6a23\u5f0f"}},_locale:"",get locale(){return Ao._locale||(Ao._locale=As()?navigator.language.slice(0,5):"en"),Ao._locale},set locale(n){Ao._locale=n},merge(n,o){if(n&&o){let t=Ao._locale;Ao.locale=n,Ao.strings[n]=Et(Et({},Ao.strings[n]),o),Ao.locale=t}else if(n&&!o)for(let t of Object.keys(n))Ao.merge(t,n[t])}};function vm(n){if(void 0===n)return;let o=Ao.locale.slice(0,2),t="";return Ao.strings[Ao.locale]&&(t=Ao.strings[Ao.locale][n]),!t&&Ao.strings[o]&&(t=Ao.strings[o][n]),t||(t=Ao.strings.en[n]),t||void 0}var TG={m0:"#3F3D99",m1:"#993D71",m2:"#998B3D",m3:"#3D9956",m4:"#3D5A99",m5:"#993D90",m6:"#996D3D",m7:"#43993D",m8:"#3D7999",m9:"#843D99"},kG={blue:"#0072BD",orange:"#D95319",yellow:"#EDB120",purple:"#7E2F8E",green:"#77AC30",cyan:"#4DBEEE",red:"#A2142F"},Xg={red:"#fbbbb6",orange:"#ffe0c2",yellow:"#fff1c2",lime:"#d0e8b9",green:"#bceac4",teal:"#b9f1f1",blue:"#b6d9fb",indigo:"#d1c2f0",purple:"#e3baf8",magenta:"#f9c8e0",black:"#353535","dark-grey":"#8C8C8C",grey:"#D0D0D0","light-grey":"#F0F0F0",white:"#ffffff"},e1={red:"#d7170b",orange:"#fe8a2b",yellow:"#ffc02b",lime:"#63b215",green:"#21ba3a",teal:"#17cfcf",blue:"#0d80f2",indigo:"#63c",purple:"#a219e6",magenta:"#eb4799",black:"#000","dark-grey":"#666",grey:"#A6A6A6","light-grey":"#d4d5d2",white:"#ffffff"},dy={Red:"red",Orange:"orange",Yellow:"yellow",LimeGreen:"lime",Green:"green",TealBlue:"teal",Blue:"blue",Violet:"indigo",Purple:"purple",Magenta:"magenta",Black:"black",Gray:"grey",White:"white"},SG={Apricot:"#FBB982",Aquamarine:"#00B5BE",Bittersweet:"#C04F17",Black:"#221E1F",Blue:"#2D2F92",BlueGreen:"#00B3B8",BlueViolet:"#473992",BrickRed:"#B6321C",Brown:"#792500",BurntOrange:"#F7921D",CadetBlue:"#74729A",CarnationPink:"#F282B4",Cerulean:"#00A2E3",CornflowerBlue:"#41B0E4",Cyan:"#00AEEF",Dandelion:"#FDBC42",DarkOrchid:"#A4538A",Emerald:"#00A99D",ForestGreen:"#009B55",Fuchsia:"#8C368C",Goldenrod:"#FFDF42",Gray:"#949698",Green:"#00A64F",GreenYellow:"#DFE674",JungleGreen:"#00A99A",Lavender:"#F49EC4",Limegreen:"#8DC73E",Magenta:"#EC008C",Mahogany:"#A9341F",Maroon:"#AF3235",Melon:"#F89E7B",MidnightBlue:"#006795",Mulberry:"#A93C93",NavyBlue:"#006EB8",OliveGreen:"#3C8031",Orange:"#F58137",OrangeRed:"#ED135A",Orchid:"#AF72B0",Peach:"#F7965A",Periwinkle:"#7977B8",PineGreen:"#008B72",Plum:"#92268F",ProcessBlue:"#00B0F0",Purple:"#99479B",RawSienna:"#974006",Red:"#ED1B23",RedOrange:"#F26035",RedViolet:"#A1246B",Rhodamine:"#EF559F",RoyalBlue:"#0071BC",RoyalPurple:"#613F99",RubineRed:"#ED017D",Salmon:"#F69289",SeaGreen:"#3FBC9D",Sepia:"#671800",SkyBlue:"#46C5DD",SpringGreen:"#C6DC67",Tan:"#DA9D76",TealBlue:"#00AEB3",Thistle:"#D883B7",Turquoise:"#00B4CE",Violet:"#58429B",VioletRed:"#EF58A0",White:"#FFFFFF",WildStrawberry:"#EE2967",Yellow:"#FFF200",YellowGreen:"#98CC70",YellowOrange:"#FAA21A"};function t1(n){var o,t,i,a,r,s;let c,u,m,l=n.split("!"),p=255,f=255,b=255,L=-1,N=l.length>0&&l[0].startsWith("-");N&&(l[0]=l[0].slice(1));for(let R=0;R<l.length;R++){c=p,u=f,m=b;let j=null==(o=l[R].trim().match(/^([A-Za-z\d]+)/))?void 0:o[1],G=j?.toLowerCase(),ae=j&&null!=(s=null!=(r=null!=(a=null!=(i=null!=(t=e1[G])?t:e1[dy[j]])?i:kG[j])?a:SG[j])?r:TG[j])?s:l[R].trim(),W=ae.match(/^#([\da-f]{2})([\da-f]{2})([\da-f]{2})$/i);if(null!=W&&W[1]&&W[2]&&W[3])p=Math.max(0,Math.min(255,Number.parseInt(W[1],16))),f=Math.max(0,Math.min(255,Number.parseInt(W[2],16))),b=Math.max(0,Math.min(255,Number.parseInt(W[3],16)));else if(W=ae.match(/^#([\da-f]{3})$/i),null!=W&&W[1]){let le=Number.parseInt(W[1][0],16),ve=Number.parseInt(W[1][1],16),ce=Number.parseInt(W[1][2],16);p=Math.max(0,Math.min(255,16*le+le)),f=Math.max(0,Math.min(255,16*ve+ve)),b=Math.max(0,Math.min(255,16*ce+ce))}else{if(W=ae.match(/^rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i),!(null!=W&&W[1]&&W[2]&&W[3]))return;p=Math.max(0,Math.min(255,Number.parseInt(W[1]))),f=Math.max(0,Math.min(255,Number.parseInt(W[2]))),b=Math.max(0,Math.min(255,Number.parseInt(W[3])))}L>=0&&(p=(1-L)*p+L*c,f=(1-L)*f+L*u,b=(1-L)*b+L*m,L=-1),R+1<l.length&&(L=Math.max(0,Math.min(100,Number.parseInt(l[++R])))/100)}return L>=0&&(p=L*p+(1-L)*c,f=L*f+(1-L)*u,b=L*b+(1-L)*m),N&&(p=255-p,f=255-f,b=255-b),"#"+("00"+Math.round(p).toString(16)).slice(-2)+("00"+Math.round(f).toString(16)).slice(-2)+("00"+Math.round(b).toString(16)).slice(-2)}function m2(n){var o,t;return n=n.trim(),null!=(t=null!=(o=Xg[n.toLowerCase()])?o:Xg[dy[n]])?t:t1(n)}function p2(n,o,t){return t<0&&(t+=6),t>=6&&(t-=6),t<1?(o-n)*t+n:t<3?o:t<4?(o-n)*(4-t)+n:n}function h2(n){return n<0?0:n>255?255:Math.round(n)}function my(n){let o=function EG(n){if(!n||"#"!==n[0])return;let o;return(n=n.slice(1)).length<=4?(o={r:parseInt(n[0]+n[0],16),g:parseInt(n[1]+n[1],16),b:parseInt(n[2]+n[2],16)},4===n.length&&(o.a=parseInt(n[3]+n[3],16)/255)):(o={r:parseInt(n[0]+n[1],16),g:parseInt(n[2]+n[3],16),b:parseInt(n[4]+n[5],16)},8===n.length&&(o.a=parseInt(n[6]+n[7],16)/255)),o&&void 0===o.a&&(o.a=1),o}(n);if(!o)return n;let{h:t,s:i,l:a}=function MG(n){let{r:o,g:t,b:i}=n;o/=255,t/=255,i/=255;let l,c,a=Math.min(o,t,i),r=Math.max(o,t,i),s=r-a;r===a?l=0:o===r?l=(t-i)/s:t===r?l=2+(i-o)/s:i===r&&(l=4+(o-t)/s),l=Math.min(60*l,360),l<0&&(l+=360);let u=(a+r)/2;return c=r===a?0:u<=.5?s/(r+a):s/(2-r-a),{h:l,s:c,l:u}}(o);return i+=.1,a-=.1,function IG(n){let{r:o,g:t,b:i}=n,a=((1<<24)+(h2(o)<<16)+(h2(t)<<8)+h2(i)).toString(16).slice(1);return a[0]===a[1]&&a[2]===a[3]&&a[4]===a[5]&&a[6]===a[7]&&(a=a[0]+a[2]+a[4]),"#"+a}(function OG(n){let[o,t,i]=[n.h,n.s,n.l];o=(o+360)%360/60,i=Math.max(0,Math.min(i,1)),t=Math.max(0,Math.min(t,1));let a=i<=.5?i*(t+1):i+t-i*t,r=2*i-a;return{r:Math.round(255*p2(r,a,o+2)),g:Math.round(255*p2(r,a,o)),b:Math.round(255*p2(r,a,o-2))}}({h:t,s:i,l:a}))}var vc={},n1={60:"\\lt",62:"\\gt",111:"o",38:"\\&",123:"\\lbrace",125:"\\rbrace",91:"\\lbrack",93:"\\rbrack",58:"\\colon",160:"~",172:"\\neg",183:"\\cdot",188:"\\frac{1}{4}",189:"\\frac{1}{2}",190:"\\frac{3}{4}",8304:"^{0}",8305:"^{i}",185:"^{1}",178:"^{2}",179:"^{3}",8224:"\\dagger",8225:"\\ddagger",8230:"\\ldots",8308:"^{4}",8309:"^{5}",8310:"^{6}",8311:"^{7}",8312:"^{8}",8313:"^{9}",8314:"^{+}",8315:"^{-}",8316:"^{=}",8319:"^{n}",8320:"_{0}",8321:"_{1}",8322:"_{2}",8323:"_{3}",8324:"_{4}",8325:"_{5}",8326:"_{6}",8327:"_{7}",8328:"_{8}",8329:"_{9}",8330:"_{+}",8331:"_{-}",8332:"_{=}",8336:"_{a}",8337:"_{e}",8338:"_{o}",8339:"_{x}",8242:"\\prime",39:"\\prime",8592:"\\gets",8594:"\\to",9651:"\\triangle",9661:"\\triangledown",8715:"\\owns",8727:"\\ast",8739:"\\vert",8741:"\\Vert",8743:"\\land",8744:"\\lor",8901:"\\cdot",8904:"\\bowtie",8800:"\\ne",8804:"\\le",8805:"\\ge",8869:"\\bot",10231:"\\biconditional",10232:"\\impliedby",10233:"\\implies",10234:"\\iff",8450:"\\mathbb{C}",8469:"\\mathbb{N}",8473:"\\mathbb{P}",8474:"\\mathbb{Q}",8477:"\\mathbb{R}",8484:"\\mathbb{Z}",8461:"\\mathbb{H}",8476:"\\Re",8465:"\\Im",42:"\\ast",11036:"\\square",9633:"\\square",8720:"\\coprod",8716:"\\not\\ni",9671:"\\diamond",8846:"\\uplus",8851:"\\sqcap",8852:"\\sqcup",8768:"\\wr",8750:"\\oint",8226:"\\textbullet",8722:"-",978:"\\Upsilon"},wc={},A2={},QG={iff:"\\;\u27fa\\;",nicefrac:"^{#1}\\!\\!/\\!_{#2}",rd:"\\mathrm{d}",rD:"\\mathrm{D}",doubleStruckCapitalN:"\\mathbb{N}",doubleStruckCapitalR:"\\mathbb{R}",doubleStruckCapitalQ:"\\mathbb{Q}",doubleStruckCapitalZ:"\\mathbb{Z}",doubleStruckCapitalP:"\\mathbb{P}",scriptCapitalE:"\\mathscr{E}",scriptCapitalH:"\\mathscr{H}",scriptCapitalL:"\\mathscr{L}",gothicCapitalC:"\\mathfrak{C}",gothicCapitalH:"\\mathfrak{H}",gothicCapitalI:"\\mathfrak{I}",gothicCapitalR:"\\mathfrak{R}",imaginaryI:"\\mathrm{i}",imaginaryJ:"\\mathrm{j}",exponentialE:"\\mathrm{e}",differentialD:"\\mathrm{d}",capitalDifferentialD:"\\mathrm{D}","braket.sty":{package:{bra:"\\mathinner{\\langle{#1}|}",ket:"\\mathinner{|{#1}\\rangle}",braket:"\\mathinner{\\langle{#1}\\rangle}",set:"\\mathinner{\\lbrace #1 \\rbrace}",Bra:"\\left\\langle #1\\right|",Ket:"\\left|#1\\right\\rangle",Braket:"\\left\\langle{#1}\\right\\rangle",Set:"\\left\\lbrace #1 \\right\\rbrace"}},"amsmath.sty":{package:{varGamma:"\\mathit{\\Gamma}",varDelta:"\\mathit{\\Delta}",varTheta:"\\mathit{\\Theta}",varLambda:"\\mathit{\\Lambda}",varXi:"\\mathit{\\Xi}",varPi:"\\mathit{\\Pi}",varSigma:"\\mathit{\\Sigma}",varUpsilon:"\\mathit{\\Upsilon}",varPhi:"\\mathit{\\Phi}",varPsi:"\\mathit{\\Psi}",varOmega:"\\mathit{\\Omega}",pmod:{def:"\\quad(\\operatorname{mod}\\ #1)",args:1,expand:!1},mod:{def:"\\quad\\operatorname{mod}\\,\\,#1",args:1,expand:!1},bmod:{def:"\\;\\mathbin{\\operatorname{mod }}",expand:!1}},expand:!1},"texvc.sty":{package:{darr:"\\downarrow",dArr:"\\Downarrow",Darr:"\\Downarrow",lang:"\\langle",rang:"\\rangle",uarr:"\\uparrow",uArr:"\\Uparrow",Uarr:"\\Uparrow",N:"\\mathbb{N}",R:"\\mathbb{R}",Z:"\\mathbb{Z}",alef:"\\aleph",alefsym:"\\aleph",Alpha:"\\mathrm{A}",Beta:"\\mathrm{B}",bull:"\\bullet",Chi:"\\mathrm{X}",clubs:"\\clubsuit",cnums:"\\mathbb{C}",Complex:"\\mathbb{C}",Dagger:"\\ddagger",diamonds:"\\diamondsuit",empty:"\\emptyset",Epsilon:"\\mathrm{E}",Eta:"\\mathrm{H}",exist:"\\exists",harr:"\\leftrightarrow",hArr:"\\Leftrightarrow",Harr:"\\Leftrightarrow",hearts:"\\heartsuit",image:"\\Im",infin:"\\infty",Iota:"\\mathrm{I}",isin:"\\in",Kappa:"\\mathrm{K}",larr:"\\leftarrow",lArr:"\\Leftarrow",Larr:"\\Leftarrow",lrarr:"\\leftrightarrow",lrArr:"\\Leftrightarrow",Lrarr:"\\Leftrightarrow",Mu:"\\mathrm{M}",natnums:"\\mathbb{N}",Nu:"\\mathrm{N}",Omicron:"\\mathrm{O}",plusmn:"\\pm",rarr:"\\rightarrow",rArr:"\\Rightarrow",Rarr:"\\Rightarrow",real:"\\Re",reals:"\\mathbb{R}",Reals:"\\mathbb{R}",Rho:"\\mathrm{P}",sdot:"\\cdot",sect:"\\S",spades:"\\spadesuit",sub:"\\subset",sube:"\\subseteq",supe:"\\supseteq",Tau:"\\mathrm{T}",thetasym:"\\vartheta",weierp:"\\wp",Zeta:"\\mathrm{Z}"},expand:!1}},fu={" ":32,"\\#":35,"\\&":38,"\\$":36,"\\%":37,"\\_":95,"\\euro":8364,"\\maltese":10016,"\\{":123,"\\}":125,"\\nobreakspace":160,"\\ldots":8230,"\\textellipsis":8230,"\\backslash":92,"`":8216,"'":8217,"``":8220,"''":8221,"\\degree":176,"\\textasciicircum":94,"\\textasciitilde":126,"\\textasteriskcentered":42,"\\textbackslash":92,"\\textbraceleft":123,"\\textbraceright":125,"\\textbullet":8226,"\\textdollar":36,"\\textsterling":163,"\\textdagger":8224,"\\textdaggerdbl":8225,"\u2013":8211,"\u2014":8212,"\u2018":8216,"\u2019":8217,"\u201c":8220,"\u201d":8221,'"':8221,"\\ss":223,"\\ae":230,"\\oe":339,"\\AE":198,"\\OE":338,"\\O":216,"\\i":305,"\\j":567,"\\aa":229,"\\AA":197},FG=/[\w!@*()-=+{}[\]\\';:?/.,~<>`|$%#&^" ]/,NG=uy()?new RegExp("\\p{Letter}","u"):/[a-zA-Z\u0430\u0410\u0431\u0411\u0432\u0412\u0433\u0413\u0434\u0414\u0435\u0415\u0451\u0401\u0436\u0416\u0437\u0417\u0438\u0418\u0439\u0419\u043a\u041a\u043b\u041b\u043c\u041c\u043d\u041d\u043e\u041e\u043f\u041f\u0440\u0420\u0441\u0421\u0442\u0422\u0443\u0423\u0444\u0424\u0445\u0425\u0446\u0426\u0447\u0427\u0448\u0428\u0449\u0429\u044a\u042a\u044b\u042b\u044c\u042c\u044d\u042d\u044e\u042e\u044f\u0104\u0105\u0106\u0107\u0118\u0119\u0141\u0142\u0143\u0144\xd3\xf3\u015a\u015b\u0179\u017a\u017b\u017c\xe0\xe2\xe4\xf4\xe9\xe8\xeb\xea\xef\xee\xe7\xf9\xfb\xfc\xff\xe6\u0153\xc0\xc2\xc4\xd4\xc9\xc8\xcb\xca\xcf\xce\u0178\xc7\xd9\xdb\xdc\xc6\u0152\xf6\xdf\xd6\u1e9e\xec\xed\xf2\xfa\xcc\xcd\xd2\xda\xe1\xf1\xc1\xd1]/,i1=uy()?new RegExp("[0-9\\p{Letter}]","u"):/[\da-zA-Z\u0430\u0410\u0431\u0411\u0432\u0412\u0433\u0413\u0434\u0414\u0435\u0415\u0451\u0401\u0436\u0416\u0437\u0417\u0438\u0418\u0439\u0419\u043a\u041a\u043b\u041b\u043c\u041c\u043d\u041d\u043e\u041e\u043f\u041f\u0440\u0420\u0441\u0421\u0442\u0422\u0443\u0423\u0444\u0424\u0445\u0425\u0446\u0426\u0447\u0427\u0448\u0428\u0449\u0429\u044a\u042a\u044b\u042b\u044c\u042c\u044d\u042d\u044e\u042e\u044f\u0104\u0105\u0106\u0107\u0118\u0119\u0141\u0142\u0143\u0144\xd3\xf3\u015a\u015b\u0179\u017a\u017b\u017c\xe0\xe2\xe4\xf4\xe9\xe8\xeb\xea\xef\xee\xe7\xf9\xfb\xfc\xff\xe6\u0153\xc0\xc2\xc4\xd4\xc9\xc8\xcb\xca\xcf\xce\u0178\xc7\xd9\xdb\xdc\xc6\u0152\xf6\xdf\xd6\u1e9e\xec\xed\xf2\xfa\xcc\xcd\xd2\xda\xe1\xf1\xc1\xd1]/;function _2(n,o,t="mord",i){void 0!==o&&(vc[n]={definitionType:"symbol",type:t,variant:i,codepoint:o},n1[o]||(n1[o]=n),fu[n]||(fu[n]=o))}function Ua(n,o,t){if("string"!=typeof n)for(let[i,a,r,s]of n)_2(i,a,r??o,s??t);else for(let i=0;i<n.length;i++){let a=n.charAt(i);_2(a,a.codePointAt(0))}}function py(n,o){for(let t=n;t<=o;t++)_2(String.fromCodePoint(t),t)}function o1(n,o){if(void 0===o)return"";if("math"===n&&n1[o])return n1[o];if("text"===n){let t=Object.keys(fu).find(i=>fu[i]===o);if(!t){let i=o.toString(16);t="^".repeat(i.length)+i}return t}return String.fromCodePoint(o)}var s1,f2={119893:8462,119965:8492,119968:8496,119969:8497,119971:8459,119972:8464,119975:8466,119976:8499,119981:8475,119994:8495,119996:8458,120004:8500,120070:8493,120075:8460,120076:8465,120085:8476,120093:8488,120122:8450,120127:8461,120133:8469,120135:8473,120136:8474,120137:8477,120145:8484},hy=[{start:119808,len:26,offset:65,style:"bold"},{start:119834,len:26,offset:97,style:"bold"},{start:119860,len:26,offset:65,style:"italic"},{start:119886,len:26,offset:97,style:"italic"},{start:119912,len:26,offset:65,style:"bolditalic"},{start:119938,len:26,offset:97,style:"bolditalic"},{start:119964,len:26,offset:65,variant:"script"},{start:119990,len:26,offset:97,variant:"script"},{start:120016,len:26,offset:65,variant:"script",style:"bold"},{start:120042,len:26,offset:97,variant:"script",style:"bold"},{start:120068,len:26,offset:65,variant:"fraktur"},{start:120094,len:26,offset:97,variant:"fraktur"},{start:120172,len:26,offset:65,variant:"fraktur",style:"bold"},{start:120198,len:26,offset:97,variant:"fraktur",style:"bold"},{start:120120,len:26,offset:65,variant:"double-struck"},{start:120146,len:26,offset:97,variant:"double-struck"},{start:120224,len:26,offset:65,variant:"sans-serif"},{start:120250,len:26,offset:97,variant:"sans-serif"},{start:120276,len:26,offset:65,variant:"sans-serif",style:"bold"},{start:120302,len:26,offset:97,variant:"sans-serif",style:"bold"},{start:120328,len:26,offset:65,variant:"sans-serif",style:"italic"},{start:120354,len:26,offset:97,variant:"sans-serif",style:"italic"},{start:120380,len:26,offset:65,variant:"sans-serif",style:"bolditalic"},{start:120406,len:26,offset:97,variant:"sans-serif",style:"bolditalic"},{start:120432,len:26,offset:65,variant:"monospace"},{start:120458,len:26,offset:97,variant:"monospace"},{start:120488,len:25,offset:913,style:"bold"},{start:120514,len:25,offset:945,style:"bold"},{start:120546,len:25,offset:913,style:"italic"},{start:120572,len:25,offset:945,style:"italic"},{start:120604,len:25,offset:913,style:"bolditalic"},{start:120630,len:25,offset:945,style:"bolditalic"},{start:120662,len:25,offset:913,variant:"sans-serif",style:"bold"},{start:120688,len:25,offset:945,variant:"sans-serif",style:"bold"},{start:120720,len:25,offset:913,variant:"sans-serif",style:"bolditalic"},{start:120746,len:25,offset:945,variant:"sans-serif",style:"bolditalic"},{start:120782,len:10,offset:48,variant:"main",style:"bold"},{start:120792,len:10,offset:48,variant:"double-struck"},{start:120803,len:10,offset:48,variant:"sans-serif"},{start:120812,len:10,offset:48,variant:"sans-serif",style:"bold"},{start:120822,len:10,offset:48,variant:"monospace"}];function Ay(n){let o="auto",t=n.match(/:([^=]+)/);return t&&(o=t[1].trim()),o}function a1(n){if(!n)return[];let o=[],t=n.split("]");if(t[0].startsWith("[")){o.push({isOptional:!0,type:Ay(t[0].slice(1))});for(let i=1;i<=t.length;i++)o.push(...a1(t[i]))}else if(t=n.split("}"),t[0].startsWith("{")){o.push({isOptional:!1,type:Ay(t[0].slice(1))});for(let i=1;i<=t.length;i++)o.push(...a1(t[i]))}return o}function _y(n){if(!n)return"";let o="",t=!0;for(let i of n)"string"==typeof i.value?o+=i.value:t=!1;return t?o:""}function r1(n,o,t,i=!1){"string"==typeof n&&(n=[n]);let r={tabular:i,params:a1(o),createAtom:t};for(let s of n)A2[s]=r}function yc(n,o,t){r1(n,o,t,!0)}function Tt(n,o,t){var i,a;t||(t={});let r={definitionType:"function",params:a1(o),ifMode:t.ifMode,isFunction:null!=(i=t.isFunction)&&i,applyMode:t.applyMode,infix:null!=(a=t.infix)&&a,createAtom:t.createAtom,applyStyle:t.applyStyle};if("string"==typeof n)wc["\\"+n]=r;else for(let s of n)wc["\\"+s]=r}function g2(n){return s1||(s1=x2(QG)),n?x2(Et(Et({},s1),n)):s1}function fy(n,o){var t,i,a,r;if("string"==typeof n){let s=0,l=n;return/(^|[^\\])#1/.test(l)&&(s=1),/(^|[^\\])#2/.test(l)&&(s=2),/(^|[^\\])#3/.test(l)&&(s=3),/(^|[^\\])#4/.test(l)&&(s=4),/(^|[^\\])#5/.test(l)&&(s=5),/(^|[^\\])#6/.test(l)&&(s=6),/(^|[^\\])#7/.test(l)&&(s=7),/(^|[^\\])#8/.test(l)&&(s=8),/(^|[^\\])#9/.test(l)&&(s=9),{expand:null==(t=o?.expand)||t,captureSelection:null==(i=o?.captureSelection)||i,args:s,def:l}}return Et({expand:null==(a=o?.expand)||a,captureSelection:null==(r=o?.captureSelection)||r,args:0},n)}function x2(n){if(!n)return{};let o={};for(let t of Object.keys(n)){let i=n[t];if(null==i)delete o[t];else if("object"==typeof i&&"package"in i)for(let a of Object.keys(i.package))o[a]=fy(i.package[a],{expand:i.expand,captureSelection:i.captureSelection});else o[t]=fy(i)}return o}var He=[0,.69444,0,0],cn=[0,.61111,0,0],Un=[.25,.75,0,0],Rn=[0,.44444,0,0],$n=[0,.68611,0,0],li=[.19444,.69444,0,0],_i=[0,.68333,0,0],fi=[0,.68889,0,0],Bi=[0,.69141,0,0],Ii=[0,0,0,0],Lo=[0,.64444,0,0],_a=[0,.69224,0,0],fa=[.19444,.44444,0,0],$a=[.65002,1.15,0,0],ur=[0,.55556,0,0],wr=[.35001,.85,0,0],yr=[1.25003,1.75,0,0],Cr=[.95003,1.45,0,0],Rr=[0,.75,0,0],zr=[0,.47534,0,0],Js=[.25001,.75,0,0],Ks=[.55001,1.05,0,0],b2=[.16667,.68889,0,0],Gs=[.08167,.58167,0,0],RG={"AMS-Regular":{32:Ii,65:fi,66:fi,67:fi,68:fi,69:fi,70:fi,71:fi,72:fi,73:fi,74:b2,75:fi,76:fi,77:fi,78:fi,79:b2,80:fi,81:b2,82:fi,83:fi,84:fi,85:fi,86:fi,87:fi,88:fi,89:fi,90:fi,107:fi,160:Ii,165:[0,.675,.025,0],174:[.15559,.69224,0,0],240:fi,295:fi,710:[0,.825,0,0],732:[0,.9,0,0],770:[0,.825,0,0],771:[0,.9,0,0],989:Gs,1008:[0,.43056,.04028,0],8245:[0,.54986,0,0],8463:fi,8487:fi,8498:fi,8502:fi,8503:fi,8504:fi,8513:fi,8592:[-.03598,.46402,0,0],8594:[-.03598,.46402,0,0],8602:[-.13313,.36687,0,0],8603:[-.13313,.36687,0,0],8606:[.01354,.52239,0,0],8608:[.01354,.52239,0,0],8610:[.01354,.52239,0,0],8611:[.01354,.52239,0,0],8619:[0,.54986,0,0],8620:[0,.54986,0,0],8621:[-.13313,.37788,0,0],8622:[-.13313,.36687,0,0],8624:_a,8625:_a,8630:[0,.43056,0,0],8631:[0,.43056,0,0],8634:[.08198,.58198,0,0],8635:[.08198,.58198,0,0],8638:[.19444,.69224,0,0],8639:[.19444,.69224,0,0],8642:[.19444,.69224,0,0],8643:[.19444,.69224,0,0],8644:[.1808,.675,0,0],8646:[.1808,.675,0,0],8647:[.1808,.675,0,0],8648:[.19444,.69224,0,0],8649:[.1808,.675,0,0],8650:[.19444,.69224,0,0],8651:[.01354,.52239,0,0],8652:[.01354,.52239,0,0],8653:[-.13313,.36687,0,0],8654:[-.13313,.36687,0,0],8655:[-.13313,.36687,0,0],8666:[.13667,.63667,0,0],8667:[.13667,.63667,0,0],8669:[-.13313,.37788,0,0],8672:[-.064,.437,0,0],8674:[-.064,.437,0,0],8705:[0,.825,0,0],8708:fi,8709:Gs,8717:[0,.43056,0,0],8722:[-.03598,.46402,0,0],8724:[.08198,.69224,0,0],8726:Gs,8733:_a,8736:_a,8737:_a,8738:[.03517,.52239,0,0],8739:Gs,8740:[.25142,.74111,0,0],8741:Gs,8742:[.25142,.74111,0,0],8756:_a,8757:_a,8764:[-.13313,.36687,0,0],8765:[-.13313,.37788,0,0],8769:[-.13313,.36687,0,0],8770:[-.03625,.46375,0,0],8774:[.30274,.79383,0,0],8776:[-.01688,.48312,0,0],8778:Gs,8782:[.06062,.54986,0,0],8783:[.06062,.54986,0,0],8785:[.08198,.58198,0,0],8786:[.08198,.58198,0,0],8787:[.08198,.58198,0,0],8790:_a,8791:[.22958,.72958,0,0],8796:[.08198,.91667,0,0],8806:[.25583,.75583,0,0],8807:[.25583,.75583,0,0],8808:[.25142,.75726,0,0],8809:[.25142,.75726,0,0],8812:[.25583,.75583,0,0],8814:[.20576,.70576,0,0],8815:[.20576,.70576,0,0],8816:[.30274,.79383,0,0],8817:[.30274,.79383,0,0],8818:[.22958,.72958,0,0],8819:[.22958,.72958,0,0],8822:[.1808,.675,0,0],8823:[.1808,.675,0,0],8828:[.13667,.63667,0,0],8829:[.13667,.63667,0,0],8830:[.22958,.72958,0,0],8831:[.22958,.72958,0,0],8832:[.20576,.70576,0,0],8833:[.20576,.70576,0,0],8840:[.30274,.79383,0,0],8841:[.30274,.79383,0,0],8842:[.13597,.63597,0,0],8843:[.13597,.63597,0,0],8847:[.03517,.54986,0,0],8848:[.03517,.54986,0,0],8858:[.08198,.58198,0,0],8859:[.08198,.58198,0,0],8861:[.08198,.58198,0,0],8862:[0,.675,0,0],8863:[0,.675,0,0],8864:[0,.675,0,0],8865:[0,.675,0,0],8872:_a,8873:_a,8874:_a,8876:fi,8877:fi,8878:fi,8879:fi,8882:[.03517,.54986,0,0],8883:[.03517,.54986,0,0],8884:[.13667,.63667,0,0],8885:[.13667,.63667,0,0],8888:[0,.54986,0,0],8890:[.19444,.43056,0,0],8891:[.19444,.69224,0,0],8892:[.19444,.69224,0,0],8901:[0,.54986,0,0],8903:Gs,8905:Gs,8906:Gs,8907:_a,8908:_a,8909:[-.03598,.46402,0,0],8910:[0,.54986,0,0],8911:[0,.54986,0,0],8912:[.03517,.54986,0,0],8913:[.03517,.54986,0,0],8914:[0,.54986,0,0],8915:[0,.54986,0,0],8916:_a,8918:[.0391,.5391,0,0],8919:[.0391,.5391,0,0],8920:[.03517,.54986,0,0],8921:[.03517,.54986,0,0],8922:[.38569,.88569,0,0],8923:[.38569,.88569,0,0],8926:[.13667,.63667,0,0],8927:[.13667,.63667,0,0],8928:[.30274,.79383,0,0],8929:[.30274,.79383,0,0],8934:[.23222,.74111,0,0],8935:[.23222,.74111,0,0],8936:[.23222,.74111,0,0],8937:[.23222,.74111,0,0],8938:[.20576,.70576,0,0],8939:[.20576,.70576,0,0],8940:[.30274,.79383,0,0],8941:[.30274,.79383,0,0],8994:[.19444,.69224,0,0],8995:[.19444,.69224,0,0],9416:[.15559,.69224,0,0],9484:_a,9488:_a,9492:[0,.37788,0,0],9496:[0,.37788,0,0],9585:[.19444,.68889,0,0],9586:[.19444,.74111,0,0],9632:[0,.675,0,0],9633:[0,.675,0,0],9650:[0,.54986,0,0],9651:[0,.54986,0,0],9654:[.03517,.54986,0,0],9660:[0,.54986,0,0],9661:[0,.54986,0,0],9664:[.03517,.54986,0,0],9674:[.11111,.69224,0,0],9733:[.19444,.69224,0,0],10003:_a,10016:_a,10731:[.11111,.69224,0,0],10846:[.19444,.75583,0,0],10877:[.13667,.63667,0,0],10878:[.13667,.63667,0,0],10885:[.25583,.75583,0,0],10886:[.25583,.75583,0,0],10887:[.13597,.63597,0,0],10888:[.13597,.63597,0,0],10889:[.26167,.75726,0,0],10890:[.26167,.75726,0,0],10891:[.48256,.98256,0,0],10892:[.48256,.98256,0,0],10901:[.13667,.63667,0,0],10902:[.13667,.63667,0,0],10933:[.25142,.75726,0,0],10934:[.25142,.75726,0,0],10935:[.26167,.75726,0,0],10936:[.26167,.75726,0,0],10937:[.26167,.75726,0,0],10938:[.26167,.75726,0,0],10949:[.25583,.75583,0,0],10950:[.25583,.75583,0,0],10955:[.28481,.79383,0,0],10956:[.28481,.79383,0,0],57350:Gs,57351:Gs,57352:Gs,57353:[0,.43056,.04028,0],57356:[.25142,.75726,0,0],57357:[.25142,.75726,0,0],57358:[.41951,.91951,0,0],57359:[.30274,.79383,0,0],57360:[.30274,.79383,0,0],57361:[.41951,.91951,0,0],57366:[.25142,.75726,0,0],57367:[.25142,.75726,0,0],57368:[.25142,.75726,0,0],57369:[.25142,.75726,0,0],57370:[.13597,.63597,0,0],57371:[.13597,.63597,0,0]},"Caligraphic-Regular":{32:Ii,65:[0,.68333,0,.19445],66:[0,.68333,.03041,.13889],67:[0,.68333,.05834,.13889],68:[0,.68333,.02778,.08334],69:[0,.68333,.08944,.11111],70:[0,.68333,.09931,.11111],71:[.09722,.68333,.0593,.11111],72:[0,.68333,.00965,.11111],73:[0,.68333,.07382,0],74:[.09722,.68333,.18472,.16667],75:[0,.68333,.01445,.05556],76:[0,.68333,0,.13889],77:[0,.68333,0,.13889],78:[0,.68333,.14736,.08334],79:[0,.68333,.02778,.11111],80:[0,.68333,.08222,.08334],81:[.09722,.68333,0,.11111],82:[0,.68333,0,.08334],83:[0,.68333,.075,.13889],84:[0,.68333,.25417,0],85:[0,.68333,.09931,.08334],86:[0,.68333,.08222,0],87:[0,.68333,.08222,.08334],88:[0,.68333,.14643,.13889],89:[.09722,.68333,.08222,.08334],90:[0,.68333,.07944,.13889],160:Ii},"Fraktur-Regular":{32:Ii,33:Bi,34:Bi,38:Bi,39:Bi,40:[.24982,.74947,0,0],41:[.24982,.74947,0,0],42:[0,.62119,0,0],43:[.08319,.58283,0,0],44:[0,.10803,0,0],45:[.08319,.58283,0,0],46:[0,.10803,0,0],47:[.24982,.74947,0,0],48:zr,49:zr,50:zr,51:[.18906,.47534,0,0],52:[.18906,.47534,0,0],53:[.18906,.47534,0,0],54:Bi,55:[.18906,.47534,0,0],56:Bi,57:[.18906,.47534,0,0],58:zr,59:[.12604,.47534,0,0],61:[-.13099,.36866,0,0],63:Bi,65:Bi,66:Bi,67:Bi,68:Bi,69:Bi,70:[.12604,.69141,0,0],71:Bi,72:[.06302,.69141,0,0],73:Bi,74:[.12604,.69141,0,0],75:Bi,76:Bi,77:Bi,78:Bi,79:Bi,80:[.18906,.69141,0,0],81:[.03781,.69141,0,0],82:Bi,83:Bi,84:Bi,85:Bi,86:Bi,87:Bi,88:Bi,89:[.18906,.69141,0,0],90:[.12604,.69141,0,0],91:[.24982,.74947,0,0],93:[.24982,.74947,0,0],94:Bi,97:zr,98:Bi,99:zr,100:[0,.62119,0,0],101:zr,102:[.18906,.69141,0,0],103:[.18906,.47534,0,0],104:[.18906,.69141,0,0],105:Bi,106:Bi,107:Bi,108:Bi,109:zr,110:zr,111:zr,112:[.18906,.52396,0,0],113:[.18906,.47534,0,0],114:zr,115:zr,116:[0,.62119,0,0],117:zr,118:[0,.52396,0,0],119:[0,.52396,0,0],120:[.18906,.47534,0,0],121:[.18906,.47534,0,0],122:[.18906,.47534,0,0],160:Ii,8216:Bi,8217:Bi,58112:[0,.62119,0,0],58113:[0,.62119,0,0],58114:[.18906,.69141,0,0],58115:[.18906,.69141,0,0],58116:[.18906,.47534,0,0],58117:Bi,58118:[0,.62119,0,0],58119:zr},"Main-Bold":{32:Ii,33:He,34:He,35:li,36:[.05556,.75,0,0],37:[.05556,.75,0,0],38:He,39:He,40:Un,41:Un,42:Rr,43:[.13333,.63333,0,0],44:[.19444,.15556,0,0],45:Rn,46:[0,.15556,0,0],47:Un,48:Lo,49:Lo,50:Lo,51:Lo,52:Lo,53:Lo,54:Lo,55:Lo,56:Lo,57:Lo,58:Rn,59:fa,60:[.08556,.58556,0,0],61:[-.10889,.39111,0,0],62:[.08556,.58556,0,0],63:He,64:He,65:$n,66:$n,67:$n,68:$n,69:$n,70:$n,71:$n,72:$n,73:$n,74:$n,75:$n,76:$n,77:$n,78:$n,79:$n,80:$n,81:[.19444,.68611,0,0],82:$n,83:$n,84:$n,85:$n,86:[0,.68611,.01597,0],87:[0,.68611,.01597,0],88:$n,89:[0,.68611,.02875,0],90:$n,91:Un,92:Un,93:Un,94:He,95:[.31,.13444,.03194,0],97:Rn,98:He,99:Rn,100:He,101:Rn,102:[0,.69444,.10903,0],103:[.19444,.44444,.01597,0],104:He,105:He,106:li,107:He,108:He,109:Rn,110:Rn,111:Rn,112:fa,113:fa,114:Rn,115:Rn,116:[0,.63492,0,0],117:Rn,118:[0,.44444,.01597,0],119:[0,.44444,.01597,0],120:Rn,121:[.19444,.44444,.01597,0],122:Rn,123:Un,124:Un,125:Un,126:[.35,.34444,0,0],160:Ii,163:He,168:He,172:Rn,176:He,177:[.13333,.63333,0,0],184:[.17014,0,0,0],198:$n,215:[.13333,.63333,0,0],216:[.04861,.73472,0,0],223:He,230:Rn,247:[.13333,.63333,0,0],248:[.09722,.54167,0,0],305:Rn,338:$n,339:Rn,567:fa,710:He,711:[0,.63194,0,0],713:[0,.59611,0,0],714:He,715:He,728:He,729:He,730:He,732:He,733:He,915:$n,916:$n,920:$n,923:$n,926:$n,928:$n,931:$n,933:$n,934:$n,936:$n,937:$n,8211:[0,.44444,.03194,0],8212:[0,.44444,.03194,0],8216:He,8217:He,8220:He,8221:He,8224:li,8225:li,8242:ur,8407:[0,.72444,.15486,0],8463:He,8465:He,8467:He,8472:fa,8476:He,8501:He,8592:[-.10889,.39111,0,0],8593:li,8594:[-.10889,.39111,0,0],8595:li,8596:[-.10889,.39111,0,0],8597:Un,8598:li,8599:li,8600:li,8601:li,8636:[-.10889,.39111,0,0],8637:[-.10889,.39111,0,0],8640:[-.10889,.39111,0,0],8641:[-.10889,.39111,0,0],8656:[-.10889,.39111,0,0],8657:li,8658:[-.10889,.39111,0,0],8659:li,8660:[-.10889,.39111,0,0],8661:Un,8704:He,8706:[0,.69444,.06389,0],8707:He,8709:[.05556,.75,0,0],8711:$n,8712:[.08556,.58556,0,0],8715:[.08556,.58556,0,0],8722:[.13333,.63333,0,0],8723:[.13333,.63333,0,0],8725:Un,8726:Un,8727:[-.02778,.47222,0,0],8728:[-.02639,.47361,0,0],8729:[-.02639,.47361,0,0],8730:[.18,.82,0,0],8733:Rn,8734:Rn,8736:_a,8739:Un,8741:Un,8743:ur,8744:ur,8745:ur,8746:ur,8747:[.19444,.69444,.12778,0],8764:[-.10889,.39111,0,0],8768:li,8771:[.00222,.50222,0,0],8776:[.02444,.52444,0,0],8781:[.00222,.50222,0,0],8801:[.00222,.50222,0,0],8804:[.19667,.69667,0,0],8805:[.19667,.69667,0,0],8810:[.08556,.58556,0,0],8811:[.08556,.58556,0,0],8826:[.08556,.58556,0,0],8827:[.08556,.58556,0,0],8834:[.08556,.58556,0,0],8835:[.08556,.58556,0,0],8838:[.19667,.69667,0,0],8839:[.19667,.69667,0,0],8846:ur,8849:[.19667,.69667,0,0],8850:[.19667,.69667,0,0],8851:ur,8852:ur,8853:[.13333,.63333,0,0],8854:[.13333,.63333,0,0],8855:[.13333,.63333,0,0],8856:[.13333,.63333,0,0],8857:[.13333,.63333,0,0],8866:He,8867:He,8868:He,8869:He,8900:[-.02639,.47361,0,0],8901:[-.02639,.47361,0,0],8902:[-.02778,.47222,0,0],8968:Un,8969:Un,8970:Un,8971:Un,8994:[-.13889,.36111,0,0],8995:[-.13889,.36111,0,0],9651:li,9657:[-.02778,.47222,0,0],9661:li,9667:[-.02778,.47222,0,0],9711:li,9824:[.12963,.69444,0,0],9825:[.12963,.69444,0,0],9826:[.12963,.69444,0,0],9827:[.12963,.69444,0,0],9837:Rr,9838:li,9839:li,10216:Un,10217:Un,10815:$n,10927:[.19667,.69667,0,0],10928:[.19667,.69667,0,0],57376:li},"Main-BoldItalic":{32:Ii,33:[0,.69444,.11417,0],34:[0,.69444,.07939,0],35:[.19444,.69444,.06833,0],37:[.05556,.75,.12861,0],38:[0,.69444,.08528,0],39:[0,.69444,.12945,0],40:[.25,.75,.15806,0],41:[.25,.75,.03306,0],42:[0,.75,.14333,0],43:[.10333,.60333,.03306,0],44:[.19444,.14722,0,0],45:[0,.44444,.02611,0],46:[0,.14722,0,0],47:[.25,.75,.15806,0],48:[0,.64444,.13167,0],49:[0,.64444,.13167,0],50:[0,.64444,.13167,0],51:[0,.64444,.13167,0],52:[.19444,.64444,.13167,0],53:[0,.64444,.13167,0],54:[0,.64444,.13167,0],55:[.19444,.64444,.13167,0],56:[0,.64444,.13167,0],57:[0,.64444,.13167,0],58:[0,.44444,.06695,0],59:[.19444,.44444,.06695,0],61:[-.10889,.39111,.06833,0],63:[0,.69444,.11472,0],64:[0,.69444,.09208,0],65:$n,66:[0,.68611,.0992,0],67:[0,.68611,.14208,0],68:[0,.68611,.09062,0],69:[0,.68611,.11431,0],70:[0,.68611,.12903,0],71:[0,.68611,.07347,0],72:[0,.68611,.17208,0],73:[0,.68611,.15681,0],74:[0,.68611,.145,0],75:[0,.68611,.14208,0],76:$n,77:[0,.68611,.17208,0],78:[0,.68611,.17208,0],79:[0,.68611,.09062,0],80:[0,.68611,.0992,0],81:[.19444,.68611,.09062,0],82:[0,.68611,.02559,0],83:[0,.68611,.11264,0],84:[0,.68611,.12903,0],85:[0,.68611,.17208,0],86:[0,.68611,.18625,0],87:[0,.68611,.18625,0],88:[0,.68611,.15681,0],89:[0,.68611,.19803,0],90:[0,.68611,.14208,0],91:[.25,.75,.1875,0],93:[.25,.75,.09972,0],94:[0,.69444,.06709,0],95:[.31,.13444,.09811,0],97:[0,.44444,.09426,0],98:[0,.69444,.07861,0],99:[0,.44444,.05222,0],100:[0,.69444,.10861,0],101:[0,.44444,.085,0],102:[.19444,.69444,.21778,0],103:[.19444,.44444,.105,0],104:[0,.69444,.09426,0],105:[0,.69326,.11387,0],106:[.19444,.69326,.1672,0],107:[0,.69444,.11111,0],108:[0,.69444,.10861,0],109:[0,.44444,.09426,0],110:[0,.44444,.09426,0],111:[0,.44444,.07861,0],112:[.19444,.44444,.07861,0],113:[.19444,.44444,.105,0],114:[0,.44444,.11111,0],115:[0,.44444,.08167,0],116:[0,.63492,.09639,0],117:[0,.44444,.09426,0],118:[0,.44444,.11111,0],119:[0,.44444,.11111,0],120:[0,.44444,.12583,0],121:[.19444,.44444,.105,0],122:[0,.44444,.13889,0],126:[.35,.34444,.11472,0],160:Ii,168:[0,.69444,.11473,0],176:He,184:[.17014,0,0,0],198:[0,.68611,.11431,0],216:[.04861,.73472,.09062,0],223:[.19444,.69444,.09736,0],230:[0,.44444,.085,0],248:[.09722,.54167,.09458,0],305:[0,.44444,.09426,0],338:[0,.68611,.11431,0],339:[0,.44444,.085,0],567:[.19444,.44444,.04611,0],710:[0,.69444,.06709,0],711:[0,.63194,.08271,0],713:[0,.59444,.10444,0],714:[0,.69444,.08528,0],715:He,728:[0,.69444,.10333,0],729:[0,.69444,.12945,0],730:He,732:[0,.69444,.11472,0],733:[0,.69444,.11472,0],915:[0,.68611,.12903,0],916:$n,920:[0,.68611,.09062,0],923:$n,926:[0,.68611,.15092,0],928:[0,.68611,.17208,0],931:[0,.68611,.11431,0],933:[0,.68611,.10778,0],934:[0,.68611,.05632,0],936:[0,.68611,.10778,0],937:[0,.68611,.0992,0],8211:[0,.44444,.09811,0],8212:[0,.44444,.09811,0],8216:[0,.69444,.12945,0],8217:[0,.69444,.12945,0],8220:[0,.69444,.16772,0],8221:[0,.69444,.07939,0]},"Main-Italic":{32:Ii,33:[0,.69444,.12417,0],34:[0,.69444,.06961,0],35:[.19444,.69444,.06616,0],37:[.05556,.75,.13639,0],38:[0,.69444,.09694,0],39:[0,.69444,.12417,0],40:[.25,.75,.16194,0],41:[.25,.75,.03694,0],42:[0,.75,.14917,0],43:[.05667,.56167,.03694,0],44:[.19444,.10556,0,0],45:[0,.43056,.02826,0],46:[0,.10556,0,0],47:[.25,.75,.16194,0],48:[0,.64444,.13556,0],49:[0,.64444,.13556,0],50:[0,.64444,.13556,0],51:[0,.64444,.13556,0],52:[.19444,.64444,.13556,0],53:[0,.64444,.13556,0],54:[0,.64444,.13556,0],55:[.19444,.64444,.13556,0],56:[0,.64444,.13556,0],57:[0,.64444,.13556,0],58:[0,.43056,.0582,0],59:[.19444,.43056,.0582,0],61:[-.13313,.36687,.06616,0],63:[0,.69444,.1225,0],64:[0,.69444,.09597,0],65:_i,66:[0,.68333,.10257,0],67:[0,.68333,.14528,0],68:[0,.68333,.09403,0],69:[0,.68333,.12028,0],70:[0,.68333,.13305,0],71:[0,.68333,.08722,0],72:[0,.68333,.16389,0],73:[0,.68333,.15806,0],74:[0,.68333,.14028,0],75:[0,.68333,.14528,0],76:_i,77:[0,.68333,.16389,0],78:[0,.68333,.16389,0],79:[0,.68333,.09403,0],80:[0,.68333,.10257,0],81:[.19444,.68333,.09403,0],82:[0,.68333,.03868,0],83:[0,.68333,.11972,0],84:[0,.68333,.13305,0],85:[0,.68333,.16389,0],86:[0,.68333,.18361,0],87:[0,.68333,.18361,0],88:[0,.68333,.15806,0],89:[0,.68333,.19383,0],90:[0,.68333,.14528,0],91:[.25,.75,.1875,0],93:[.25,.75,.10528,0],94:[0,.69444,.06646,0],95:[.31,.12056,.09208,0],97:[0,.43056,.07671,0],98:[0,.69444,.06312,0],99:[0,.43056,.05653,0],100:[0,.69444,.10333,0],101:[0,.43056,.07514,0],102:[.19444,.69444,.21194,0],103:[.19444,.43056,.08847,0],104:[0,.69444,.07671,0],105:[0,.65536,.1019,0],106:[.19444,.65536,.14467,0],107:[0,.69444,.10764,0],108:[0,.69444,.10333,0],109:[0,.43056,.07671,0],110:[0,.43056,.07671,0],111:[0,.43056,.06312,0],112:[.19444,.43056,.06312,0],113:[.19444,.43056,.08847,0],114:[0,.43056,.10764,0],115:[0,.43056,.08208,0],116:[0,.61508,.09486,0],117:[0,.43056,.07671,0],118:[0,.43056,.10764,0],119:[0,.43056,.10764,0],120:[0,.43056,.12042,0],121:[.19444,.43056,.08847,0],122:[0,.43056,.12292,0],126:[.35,.31786,.11585,0],160:Ii,168:[0,.66786,.10474,0],176:He,184:[.17014,0,0,0],198:[0,.68333,.12028,0],216:[.04861,.73194,.09403,0],223:[.19444,.69444,.10514,0],230:[0,.43056,.07514,0],248:[.09722,.52778,.09194,0],338:[0,.68333,.12028,0],339:[0,.43056,.07514,0],710:[0,.69444,.06646,0],711:[0,.62847,.08295,0],713:[0,.56167,.10333,0],714:[0,.69444,.09694,0],715:He,728:[0,.69444,.10806,0],729:[0,.66786,.11752,0],730:He,732:[0,.66786,.11585,0],733:[0,.69444,.1225,0],915:[0,.68333,.13305,0],916:_i,920:[0,.68333,.09403,0],923:_i,926:[0,.68333,.15294,0],928:[0,.68333,.16389,0],931:[0,.68333,.12028,0],933:[0,.68333,.11111,0],934:[0,.68333,.05986,0],936:[0,.68333,.11111,0],937:[0,.68333,.10257,0],8211:[0,.43056,.09208,0],8212:[0,.43056,.09208,0],8216:[0,.69444,.12417,0],8217:[0,.69444,.12417,0],8220:[0,.69444,.1685,0],8221:[0,.69444,.06961,0],8463:fi},"Main-Regular":{32:Ii,33:He,34:He,35:li,36:[.05556,.75,0,0],37:[.05556,.75,0,0],38:He,39:He,40:Un,41:Un,42:Rr,43:[.08333,.58333,0,0],44:[.19444,.10556,0,0],45:[0,.43056,0,0],46:[0,.10556,0,0],47:Un,48:Lo,49:Lo,50:Lo,51:Lo,52:Lo,53:Lo,54:Lo,55:Lo,56:Lo,57:Lo,58:[0,.43056,0,0],59:[.19444,.43056,0,0],60:[.0391,.5391,0,0],61:[-.13313,.36687,0,0],62:[.0391,.5391,0,0],63:He,64:He,65:_i,66:_i,67:_i,68:_i,69:_i,70:_i,71:_i,72:_i,73:_i,74:_i,75:_i,76:_i,77:_i,78:_i,79:_i,80:_i,81:[.19444,.68333,0,0],82:_i,83:_i,84:_i,85:_i,86:[0,.68333,.01389,0],87:[0,.68333,.01389,0],88:_i,89:[0,.68333,.025,0],90:_i,91:Un,92:Un,93:Un,94:He,95:[.31,.12056,.02778,0],97:[0,.43056,0,0],98:He,99:[0,.43056,0,0],100:He,101:[0,.43056,0,0],102:[0,.69444,.07778,0],103:[.19444,.43056,.01389,0],104:He,105:[0,.66786,0,0],106:[.19444,.66786,0,0],107:He,108:He,109:[0,.43056,0,0],110:[0,.43056,0,0],111:[0,.43056,0,0],112:[.19444,.43056,0,0],113:[.19444,.43056,0,0],114:[0,.43056,0,0],115:[0,.43056,0,0],116:[0,.61508,0,0],117:[0,.43056,0,0],118:[0,.43056,.01389,0],119:[0,.43056,.01389,0],120:[0,.43056,0,0],121:[.19444,.43056,.01389,0],122:[0,.43056,0,0],123:Un,124:Un,125:Un,126:[.35,.31786,0,0],160:Ii,163:He,167:li,168:[0,.66786,0,0],172:[0,.43056,0,0],176:He,177:[.08333,.58333,0,0],182:li,184:[.17014,0,0,0],198:_i,215:[.08333,.58333,0,0],216:[.04861,.73194,0,0],223:He,230:[0,.43056,0,0],247:[.08333,.58333,0,0],248:[.09722,.52778,0,0],305:[0,.43056,0,0],338:_i,339:[0,.43056,0,0],567:[.19444,.43056,0,0],710:He,711:[0,.62847,0,0],713:[0,.56778,0,0],714:He,715:He,728:He,729:[0,.66786,0,0],730:He,732:[0,.66786,0,0],733:He,915:_i,916:_i,920:_i,923:_i,926:_i,928:_i,931:_i,933:_i,934:_i,936:_i,937:_i,8211:[0,.43056,.02778,0],8212:[0,.43056,.02778,0],8216:He,8217:He,8220:He,8221:He,8224:li,8225:li,8230:[0,.12,0,0],8242:ur,8407:[0,.71444,.15382,0],8463:fi,8465:He,8467:[0,.69444,0,.11111],8472:[.19444,.43056,0,.11111],8476:He,8501:He,8592:[-.13313,.36687,0,0],8593:li,8594:[-.13313,.36687,0,0],8595:li,8596:[-.13313,.36687,0,0],8597:Un,8598:li,8599:li,8600:li,8601:li,8614:[.011,.511,0,0],8617:[.011,.511,0,0],8618:[.011,.511,0,0],8636:[-.13313,.36687,0,0],8637:[-.13313,.36687,0,0],8640:[-.13313,.36687,0,0],8641:[-.13313,.36687,0,0],8652:[.011,.671,0,0],8656:[-.13313,.36687,0,0],8657:li,8658:[-.13313,.36687,0,0],8659:li,8660:[-.13313,.36687,0,0],8661:Un,8704:He,8706:[0,.69444,.05556,.08334],8707:He,8709:[.05556,.75,0,0],8711:_i,8712:[.0391,.5391,0,0],8715:[.0391,.5391,0,0],8722:[.08333,.58333,0,0],8723:[.08333,.58333,0,0],8725:Un,8726:Un,8727:[-.03472,.46528,0,0],8728:[-.05555,.44445,0,0],8729:[-.05555,.44445,0,0],8730:[.2,.8,0,0],8733:[0,.43056,0,0],8734:[0,.43056,0,0],8736:_a,8739:Un,8741:Un,8743:ur,8744:ur,8745:ur,8746:ur,8747:[.19444,.69444,.11111,0],8764:[-.13313,.36687,0,0],8768:li,8771:[-.03625,.46375,0,0],8773:[-.022,.589,0,0],8776:[-.01688,.48312,0,0],8781:[-.03625,.46375,0,0],8784:[-.133,.67,0,0],8801:[-.03625,.46375,0,0],8804:[.13597,.63597,0,0],8805:[.13597,.63597,0,0],8810:[.0391,.5391,0,0],8811:[.0391,.5391,0,0],8826:[.0391,.5391,0,0],8827:[.0391,.5391,0,0],8834:[.0391,.5391,0,0],8835:[.0391,.5391,0,0],8838:[.13597,.63597,0,0],8839:[.13597,.63597,0,0],8846:ur,8849:[.13597,.63597,0,0],8850:[.13597,.63597,0,0],8851:ur,8852:ur,8853:[.08333,.58333,0,0],8854:[.08333,.58333,0,0],8855:[.08333,.58333,0,0],8856:[.08333,.58333,0,0],8857:[.08333,.58333,0,0],8866:He,8867:He,8868:He,8869:He,8872:[.249,.75,0,0],8900:[-.05555,.44445,0,0],8901:[-.05555,.44445,0,0],8902:[-.03472,.46528,0,0],8904:[.005,.505,0,0],8942:[.03,.9,0,0],8943:[-.19,.31,0,0],8945:[-.1,.82,0,0],8968:Un,8969:Un,8970:Un,8971:Un,8994:[-.14236,.35764,0,0],8995:[-.14236,.35764,0,0],9136:[.244,.744,0,0],9137:[.244,.744,0,0],9651:li,9657:[-.03472,.46528,0,0],9661:li,9667:[-.03472,.46528,0,0],9711:li,9824:[.12963,.69444,0,0],9825:[.12963,.69444,0,0],9826:[.12963,.69444,0,0],9827:[.12963,.69444,0,0],9837:Rr,9838:li,9839:li,10216:Un,10217:Un,10222:[.244,.744,0,0],10223:[.244,.744,0,0],10229:[.011,.511,0,0],10230:[.011,.511,0,0],10231:[.011,.511,0,0],10232:[.024,.525,0,0],10233:[.024,.525,0,0],10234:[.024,.525,0,0],10236:[.011,.511,0,0],10815:_i,10927:[.13597,.63597,0,0],10928:[.13597,.63597,0,0],57376:li},"Math-BoldItalic":{32:Ii,48:Rn,49:Rn,50:Rn,51:fa,52:fa,53:fa,54:Lo,55:fa,56:Lo,57:fa,65:$n,66:[0,.68611,.04835,0],67:[0,.68611,.06979,0],68:[0,.68611,.03194,0],69:[0,.68611,.05451,0],70:[0,.68611,.15972,0],71:$n,72:[0,.68611,.08229,0],73:[0,.68611,.07778,0],74:[0,.68611,.10069,0],75:[0,.68611,.06979,0],76:$n,77:[0,.68611,.11424,0],78:[0,.68611,.11424,0],79:[0,.68611,.03194,0],80:[0,.68611,.15972,0],81:[.19444,.68611,0,0],82:[0,.68611,.00421,0],83:[0,.68611,.05382,0],84:[0,.68611,.15972,0],85:[0,.68611,.11424,0],86:[0,.68611,.25555,0],87:[0,.68611,.15972,0],88:[0,.68611,.07778,0],89:[0,.68611,.25555,0],90:[0,.68611,.06979,0],97:Rn,98:He,99:Rn,100:He,101:Rn,102:[.19444,.69444,.11042,0],103:[.19444,.44444,.03704,0],104:He,105:[0,.69326,0,0],106:[.19444,.69326,.0622,0],107:[0,.69444,.01852,0],108:[0,.69444,.0088,0],109:Rn,110:Rn,111:Rn,112:fa,113:[.19444,.44444,.03704,0],114:[0,.44444,.03194,0],115:Rn,116:[0,.63492,0,0],117:Rn,118:[0,.44444,.03704,0],119:[0,.44444,.02778,0],120:Rn,121:[.19444,.44444,.03704,0],122:[0,.44444,.04213,0],160:Ii,915:[0,.68611,.15972,0],916:$n,920:[0,.68611,.03194,0],923:$n,926:[0,.68611,.07458,0],928:[0,.68611,.08229,0],931:[0,.68611,.05451,0],933:[0,.68611,.15972,0],934:$n,936:[0,.68611,.11653,0],937:[0,.68611,.04835,0],945:Rn,946:[.19444,.69444,.03403,0],947:[.19444,.44444,.06389,0],948:[0,.69444,.03819,0],949:Rn,950:[.19444,.69444,.06215,0],951:[.19444,.44444,.03704,0],952:[0,.69444,.03194,0],953:Rn,954:Rn,955:He,956:fa,957:[0,.44444,.06898,0],958:[.19444,.69444,.03021,0],959:Rn,960:[0,.44444,.03704,0],961:fa,962:[.09722,.44444,.07917,0],963:[0,.44444,.03704,0],964:[0,.44444,.13472,0],965:[0,.44444,.03704,0],966:fa,967:fa,968:[.19444,.69444,.03704,0],969:[0,.44444,.03704,0],977:He,981:li,982:[0,.44444,.03194,0],1009:fa,1013:Rn,57649:Rn,57911:fa},"Math-Italic":{32:Ii,48:[0,.43056,0,0],49:[0,.43056,0,0],50:[0,.43056,0,0],51:[.19444,.43056,0,0],52:[.19444,.43056,0,0],53:[.19444,.43056,0,0],54:Lo,55:[.19444,.43056,0,0],56:Lo,57:[.19444,.43056,0,0],65:[0,.68333,0,.13889],66:[0,.68333,.05017,.08334],67:[0,.68333,.07153,.08334],68:[0,.68333,.02778,.05556],69:[0,.68333,.05764,.08334],70:[0,.68333,.13889,.08334],71:[0,.68333,0,.08334],72:[0,.68333,.08125,.05556],73:[0,.68333,.07847,.11111],74:[0,.68333,.09618,.16667],75:[0,.68333,.07153,.05556],76:[0,.68333,0,.02778],77:[0,.68333,.10903,.08334],78:[0,.68333,.10903,.08334],79:[0,.68333,.02778,.08334],80:[0,.68333,.13889,.08334],81:[.19444,.68333,0,.08334],82:[0,.68333,.00773,.08334],83:[0,.68333,.05764,.08334],84:[0,.68333,.13889,.08334],85:[0,.68333,.10903,.02778],86:[0,.68333,.22222,0],87:[0,.68333,.13889,0],88:[0,.68333,.07847,.08334],89:[0,.68333,.22222,0],90:[0,.68333,.07153,.08334],97:[0,.43056,0,0],98:He,99:[0,.43056,0,.05556],100:[0,.69444,0,.16667],101:[0,.43056,0,.05556],102:[.19444,.69444,.10764,.16667],103:[.19444,.43056,.03588,.02778],104:He,105:[0,.65952,0,0],106:[.19444,.65952,.05724,0],107:[0,.69444,.03148,0],108:[0,.69444,.01968,.08334],109:[0,.43056,0,0],110:[0,.43056,0,0],111:[0,.43056,0,.05556],112:[.19444,.43056,0,.08334],113:[.19444,.43056,.03588,.08334],114:[0,.43056,.02778,.05556],115:[0,.43056,0,.05556],116:[0,.61508,0,.08334],117:[0,.43056,0,.02778],118:[0,.43056,.03588,.02778],119:[0,.43056,.02691,.08334],120:[0,.43056,0,.02778],121:[.19444,.43056,.03588,.05556],122:[0,.43056,.04398,.05556],160:Ii,915:[0,.68333,.13889,.08334],916:[0,.68333,0,.16667],920:[0,.68333,.02778,.08334],923:[0,.68333,0,.16667],926:[0,.68333,.07569,.08334],928:[0,.68333,.08125,.05556],931:[0,.68333,.05764,.08334],933:[0,.68333,.13889,.05556],934:[0,.68333,0,.08334],936:[0,.68333,.11,.05556],937:[0,.68333,.05017,.08334],945:[0,.43056,.0037,.02778],946:[.19444,.69444,.05278,.08334],947:[.19444,.43056,.05556,0],948:[0,.69444,.03785,.05556],949:[0,.43056,0,.08334],950:[.19444,.69444,.07378,.08334],951:[.19444,.43056,.03588,.05556],952:[0,.69444,.02778,.08334],953:[0,.43056,0,.05556],954:[0,.43056,0,0],955:He,956:[.19444,.43056,0,.02778],957:[0,.43056,.06366,.02778],958:[.19444,.69444,.04601,.11111],959:[0,.43056,0,.05556],960:[0,.43056,.03588,0],961:[.19444,.43056,0,.08334],962:[.09722,.43056,.07986,.08334],963:[0,.43056,.03588,0],964:[0,.43056,.1132,.02778],965:[0,.43056,.03588,.02778],966:[.19444,.43056,0,.08334],967:[.19444,.43056,0,.05556],968:[.19444,.69444,.03588,.11111],969:[0,.43056,.03588,0],977:[0,.69444,0,.08334],981:[.19444,.69444,0,.08334],982:[0,.43056,.02778,0],1009:[.19444,.43056,0,.08334],1013:[0,.43056,0,.05556],57649:[0,.43056,0,.02778],57911:[.19444,.43056,0,.08334]},"SansSerif-Bold":{32:Ii,33:He,34:He,35:li,36:[.05556,.75,0,0],37:[.05556,.75,0,0],38:He,39:He,40:Un,41:Un,42:Rr,43:[.11667,.61667,0,0],44:[.10556,.13056,0,0],45:[0,.45833,0,0],46:[0,.13056,0,0],47:Un,48:He,49:He,50:He,51:He,52:He,53:He,54:He,55:He,56:He,57:He,58:[0,.45833,0,0],59:[.10556,.45833,0,0],61:[-.09375,.40625,0,0],63:He,64:He,65:He,66:He,67:He,68:He,69:He,70:He,71:He,72:He,73:He,74:He,75:He,76:He,77:He,78:He,79:He,80:He,81:[.10556,.69444,0,0],82:He,83:He,84:He,85:He,86:[0,.69444,.01528,0],87:[0,.69444,.01528,0],88:He,89:[0,.69444,.0275,0],90:He,91:Un,93:Un,94:He,95:[.35,.10833,.03056,0],97:[0,.45833,0,0],98:He,99:[0,.45833,0,0],100:He,101:[0,.45833,0,0],102:[0,.69444,.07639,0],103:[.19444,.45833,.01528,0],104:He,105:He,106:li,107:He,108:He,109:[0,.45833,0,0],110:[0,.45833,0,0],111:[0,.45833,0,0],112:[.19444,.45833,0,0],113:[.19444,.45833,0,0],114:[0,.45833,.01528,0],115:[0,.45833,0,0],116:[0,.58929,0,0],117:[0,.45833,0,0],118:[0,.45833,.01528,0],119:[0,.45833,.01528,0],120:[0,.45833,0,0],121:[.19444,.45833,.01528,0],122:[0,.45833,0,0],126:[.35,.34444,0,0],160:Ii,168:He,176:He,180:He,184:[.17014,0,0,0],305:[0,.45833,0,0],567:[.19444,.45833,0,0],710:He,711:[0,.63542,0,0],713:[0,.63778,0,0],728:He,729:He,730:He,732:He,733:He,915:He,916:He,920:He,923:He,926:He,928:He,931:He,933:He,934:He,936:He,937:He,8211:[0,.45833,.03056,0],8212:[0,.45833,.03056,0],8216:He,8217:He,8220:He,8221:He},"SansSerif-Italic":{32:Ii,33:[0,.69444,.05733,0],34:[0,.69444,.00316,0],35:[.19444,.69444,.05087,0],36:[.05556,.75,.11156,0],37:[.05556,.75,.03126,0],38:[0,.69444,.03058,0],39:[0,.69444,.07816,0],40:[.25,.75,.13164,0],41:[.25,.75,.02536,0],42:[0,.75,.11775,0],43:[.08333,.58333,.02536,0],44:[.125,.08333,0,0],45:[0,.44444,.01946,0],46:[0,.08333,0,0],47:[.25,.75,.13164,0],48:[0,.65556,.11156,0],49:[0,.65556,.11156,0],50:[0,.65556,.11156,0],51:[0,.65556,.11156,0],52:[0,.65556,.11156,0],53:[0,.65556,.11156,0],54:[0,.65556,.11156,0],55:[0,.65556,.11156,0],56:[0,.65556,.11156,0],57:[0,.65556,.11156,0],58:[0,.44444,.02502,0],59:[.125,.44444,.02502,0],61:[-.13,.37,.05087,0],63:[0,.69444,.11809,0],64:[0,.69444,.07555,0],65:He,66:[0,.69444,.08293,0],67:[0,.69444,.11983,0],68:[0,.69444,.07555,0],69:[0,.69444,.11983,0],70:[0,.69444,.13372,0],71:[0,.69444,.11983,0],72:[0,.69444,.08094,0],73:[0,.69444,.13372,0],74:[0,.69444,.08094,0],75:[0,.69444,.11983,0],76:He,77:[0,.69444,.08094,0],78:[0,.69444,.08094,0],79:[0,.69444,.07555,0],80:[0,.69444,.08293,0],81:[.125,.69444,.07555,0],82:[0,.69444,.08293,0],83:[0,.69444,.09205,0],84:[0,.69444,.13372,0],85:[0,.69444,.08094,0],86:[0,.69444,.1615,0],87:[0,.69444,.1615,0],88:[0,.69444,.13372,0],89:[0,.69444,.17261,0],90:[0,.69444,.11983,0],91:[.25,.75,.15942,0],93:[.25,.75,.08719,0],94:[0,.69444,.0799,0],95:[.35,.09444,.08616,0],97:[0,.44444,.00981,0],98:[0,.69444,.03057,0],99:[0,.44444,.08336,0],100:[0,.69444,.09483,0],101:[0,.44444,.06778,0],102:[0,.69444,.21705,0],103:[.19444,.44444,.10836,0],104:[0,.69444,.01778,0],105:[0,.67937,.09718,0],106:[.19444,.67937,.09162,0],107:[0,.69444,.08336,0],108:[0,.69444,.09483,0],109:[0,.44444,.01778,0],110:[0,.44444,.01778,0],111:[0,.44444,.06613,0],112:[.19444,.44444,.0389,0],113:[.19444,.44444,.04169,0],114:[0,.44444,.10836,0],115:[0,.44444,.0778,0],116:[0,.57143,.07225,0],117:[0,.44444,.04169,0],118:[0,.44444,.10836,0],119:[0,.44444,.10836,0],120:[0,.44444,.09169,0],121:[.19444,.44444,.10836,0],122:[0,.44444,.08752,0],126:[.35,.32659,.08826,0],160:Ii,168:[0,.67937,.06385,0],176:He,184:[.17014,0,0,0],305:[0,.44444,.04169,0],567:[.19444,.44444,.04169,0],710:[0,.69444,.0799,0],711:[0,.63194,.08432,0],713:[0,.60889,.08776,0],714:[0,.69444,.09205,0],715:He,728:[0,.69444,.09483,0],729:[0,.67937,.07774,0],730:He,732:[0,.67659,.08826,0],733:[0,.69444,.09205,0],915:[0,.69444,.13372,0],916:He,920:[0,.69444,.07555,0],923:He,926:[0,.69444,.12816,0],928:[0,.69444,.08094,0],931:[0,.69444,.11983,0],933:[0,.69444,.09031,0],934:[0,.69444,.04603,0],936:[0,.69444,.09031,0],937:[0,.69444,.08293,0],8211:[0,.44444,.08616,0],8212:[0,.44444,.08616,0],8216:[0,.69444,.07816,0],8217:[0,.69444,.07816,0],8220:[0,.69444,.14205,0],8221:[0,.69444,.00316,0]},"SansSerif-Regular":{32:Ii,33:He,34:He,35:li,36:[.05556,.75,0,0],37:[.05556,.75,0,0],38:He,39:He,40:Un,41:Un,42:Rr,43:[.08333,.58333,0,0],44:[.125,.08333,0,0],45:Rn,46:[0,.08333,0,0],47:Un,48:[0,.65556,0,0],49:[0,.65556,0,0],50:[0,.65556,0,0],51:[0,.65556,0,0],52:[0,.65556,0,0],53:[0,.65556,0,0],54:[0,.65556,0,0],55:[0,.65556,0,0],56:[0,.65556,0,0],57:[0,.65556,0,0],58:Rn,59:[.125,.44444,0,0],61:[-.13,.37,0,0],63:He,64:He,65:He,66:He,67:He,68:He,69:He,70:He,71:He,72:He,73:He,74:He,75:He,76:He,77:He,78:He,79:He,80:He,81:[.125,.69444,0,0],82:He,83:He,84:He,85:He,86:[0,.69444,.01389,0],87:[0,.69444,.01389,0],88:He,89:[0,.69444,.025,0],90:He,91:Un,93:Un,94:He,95:[.35,.09444,.02778,0],97:Rn,98:He,99:Rn,100:He,101:Rn,102:[0,.69444,.06944,0],103:[.19444,.44444,.01389,0],104:He,105:[0,.67937,0,0],106:[.19444,.67937,0,0],107:He,108:He,109:Rn,110:Rn,111:Rn,112:fa,113:fa,114:[0,.44444,.01389,0],115:Rn,116:[0,.57143,0,0],117:Rn,118:[0,.44444,.01389,0],119:[0,.44444,.01389,0],120:Rn,121:[.19444,.44444,.01389,0],122:Rn,126:[.35,.32659,0,0],160:Ii,168:[0,.67937,0,0],176:He,184:[.17014,0,0,0],305:Rn,567:fa,710:He,711:[0,.63194,0,0],713:[0,.60889,0,0],714:He,715:He,728:He,729:[0,.67937,0,0],730:He,732:[0,.67659,0,0],733:He,915:He,916:He,920:He,923:He,926:He,928:He,931:He,933:He,934:He,936:He,937:He,8211:[0,.44444,.02778,0],8212:[0,.44444,.02778,0],8216:He,8217:He,8220:He,8221:He},"Script-Regular":{32:Ii,65:[0,.7,.22925,0],66:[0,.7,.04087,0],67:[0,.7,.1689,0],68:[0,.7,.09371,0],69:[0,.7,.18583,0],70:[0,.7,.13634,0],71:[0,.7,.17322,0],72:[0,.7,.29694,0],73:[0,.7,.19189,0],74:[.27778,.7,.19189,0],75:[0,.7,.31259,0],76:[0,.7,.19189,0],77:[0,.7,.15981,0],78:[0,.7,.3525,0],79:[0,.7,.08078,0],80:[0,.7,.08078,0],81:[0,.7,.03305,0],82:[0,.7,.06259,0],83:[0,.7,.19189,0],84:[0,.7,.29087,0],85:[0,.7,.25815,0],86:[0,.7,.27523,0],87:[0,.7,.27523,0],88:[0,.7,.26006,0],89:[0,.7,.2939,0],90:[0,.7,.24037,0],160:Ii},"Size1-Regular":{32:Ii,40:wr,41:wr,47:wr,91:wr,92:wr,93:wr,123:wr,125:wr,160:Ii,710:[0,.72222,0,0],732:[0,.72222,0,0],770:[0,.72222,0,0],771:[0,.72222,0,0],8214:[-99e-5,.601,0,0],8593:[1e-5,.6,0,0],8595:[1e-5,.6,0,0],8657:[1e-5,.6,0,0],8659:[1e-5,.6,0,0],8719:Js,8720:Js,8721:Js,8730:wr,8739:[-.00599,.606,0,0],8741:[-.00599,.606,0,0],8747:[.30612,.805,.19445,0],8748:[.306,.805,.19445,0],8749:[.306,.805,.19445,0],8750:[.30612,.805,.19445,0],8896:Js,8897:Js,8898:Js,8899:Js,8968:wr,8969:wr,8970:wr,8971:wr,9168:[-99e-5,.601,0,0],10216:wr,10217:wr,10752:Js,10753:Js,10754:Js,10756:Js,10758:Js},"Size2-Regular":{32:Ii,40:$a,41:$a,47:$a,91:$a,92:$a,93:$a,123:$a,125:$a,160:Ii,710:Rr,732:Rr,770:Rr,771:Rr,8719:Ks,8720:Ks,8721:Ks,8730:$a,8747:[.86225,1.36,.44445,0],8748:[.862,1.36,.44445,0],8749:[.862,1.36,.44445,0],8750:[.86225,1.36,.44445,0],8896:Ks,8897:Ks,8898:Ks,8899:Ks,8968:$a,8969:$a,8970:$a,8971:$a,10216:$a,10217:$a,10752:Ks,10753:Ks,10754:Ks,10756:Ks,10758:Ks},"Size3-Regular":{32:Ii,40:Cr,41:Cr,47:Cr,91:Cr,92:Cr,93:Cr,123:Cr,125:Cr,160:Ii,710:Rr,732:Rr,770:Rr,771:Rr,8730:Cr,8968:Cr,8969:Cr,8970:Cr,8971:Cr,10216:Cr,10217:Cr},"Size4-Regular":{32:Ii,40:yr,41:yr,47:yr,91:yr,92:yr,93:yr,123:yr,125:yr,160:Ii,710:[0,.825,0,0],732:[0,.825,0,0],770:[0,.825,0,0],771:[0,.825,0,0],8730:yr,8968:yr,8969:yr,8970:yr,8971:yr,9115:[.64502,1.155,0,0],9116:[1e-5,.6,0,0],9117:[.64502,1.155,0,0],9118:[.64502,1.155,0,0],9119:[1e-5,.6,0,0],9120:[.64502,1.155,0,0],9121:[.64502,1.155,0,0],9122:[-99e-5,.601,0,0],9123:[.64502,1.155,0,0],9124:[.64502,1.155,0,0],9125:[-99e-5,.601,0,0],9126:[.64502,1.155,0,0],9127:[1e-5,.9,0,0],9128:$a,9129:[.90001,0,0,0],9130:[0,.3,0,0],9131:[1e-5,.9,0,0],9132:$a,9133:[.90001,0,0,0],9143:[.88502,.915,0,0],10216:yr,10217:yr,57344:[-.00499,.605,0,0],57345:[-.00499,.605,0,0],57680:[0,.12,0,0],57681:[0,.12,0,0],57682:[0,.12,0,0],57683:[0,.12,0,0]},"Typewriter-Regular":{32:Ii,33:cn,34:cn,35:cn,36:[.08333,.69444,0,0],37:[.08333,.69444,0,0],38:cn,39:cn,40:[.08333,.69444,0,0],41:[.08333,.69444,0,0],42:[0,.52083,0,0],43:[-.08056,.53055,0,0],44:[.13889,.125,0,0],45:[-.08056,.53055,0,0],46:[0,.125,0,0],47:[.08333,.69444,0,0],48:cn,49:cn,50:cn,51:cn,52:cn,53:cn,54:cn,55:cn,56:cn,57:cn,58:[0,.43056,0,0],59:[.13889,.43056,0,0],60:[-.05556,.55556,0,0],61:[-.19549,.41562,0,0],62:[-.05556,.55556,0,0],63:cn,64:cn,65:cn,66:cn,67:cn,68:cn,69:cn,70:cn,71:cn,72:cn,73:cn,74:cn,75:cn,76:cn,77:cn,78:cn,79:cn,80:cn,81:[.13889,.61111,0,0],82:cn,83:cn,84:cn,85:cn,86:cn,87:cn,88:cn,89:cn,90:cn,91:[.08333,.69444,0,0],92:[.08333,.69444,0,0],93:[.08333,.69444,0,0],94:cn,95:[.09514,0,0,0],96:cn,97:[0,.43056,0,0],98:cn,99:[0,.43056,0,0],100:cn,101:[0,.43056,0,0],102:cn,103:[.22222,.43056,0,0],104:cn,105:cn,106:[.22222,.61111,0,0],107:cn,108:cn,109:[0,.43056,0,0],110:[0,.43056,0,0],111:[0,.43056,0,0],112:[.22222,.43056,0,0],113:[.22222,.43056,0,0],114:[0,.43056,0,0],115:[0,.43056,0,0],116:[0,.55358,0,0],117:[0,.43056,0,0],118:[0,.43056,0,0],119:[0,.43056,0,0],120:[0,.43056,0,0],121:[.22222,.43056,0,0],122:[0,.43056,0,0],123:[.08333,.69444,0,0],124:[.08333,.69444,0,0],125:[.08333,.69444,0,0],126:cn,127:cn,160:Ii,176:cn,184:[.19445,0,0,0],305:[0,.43056,0,0],567:[.22222,.43056,0,0],711:[0,.56597,0,0],713:[0,.56555,0,0],714:cn,715:cn,728:cn,730:cn,770:cn,771:cn,776:cn,915:cn,916:cn,920:cn,923:cn,926:cn,928:cn,931:cn,933:cn,934:cn,936:cn,937:cn,8216:cn,8217:cn,8242:cn,9251:[.11111,.21944,0,0]}},zG=/[\u3040-\u309F]|[\u30A0-\u30FF]|[\u4E00-\u9FAF]|[\uAC00-\uD7AF]/,bl=.25,wm=.431,gy={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[wm,wm,wm],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[bl,bl,bl],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04]},v2=[0,.5,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],ym=5,xy={"\xa0":" ","\u200b":" ",\u00c5:"A",\u00c7:"C",\u00d0:"D",\u00de:"o",\u00e5:"a",\u00e7:"c",\u00f0:"d",\u00fe:"o",\u0410:"A",\u0411:"B",\u0412:"B",\u0413:"F",\u0414:"A",\u0415:"E",\u0416:"K",\u0417:"3",\u0418:"N",\u0419:"N",\u041a:"K",\u041b:"N",\u041c:"M",\u041d:"H",\u041e:"O",\u041f:"N",\u0420:"P",\u0421:"C",\u0422:"T",\u0423:"y",\u0424:"O",\u0425:"X",\u0426:"U",\u0427:"h",\u0428:"W",\u0429:"W",\u042a:"B",\u042b:"X",\u042c:"B",\u042d:"3",\u042e:"X",\u042f:"R",\u0430:"a",\u0431:"b",\u0432:"a",\u0433:"r",\u0434:"y",\u0435:"e",\u0436:"m",\u0437:"e",\u0438:"n",\u0439:"n",\u043a:"n",\u043b:"n",\u043c:"m",\u043d:"n",\u043e:"o",\u043f:"n",\u0440:"p",\u0441:"c",\u0442:"o",\u0443:"y",\u0444:"b",\u0445:"x",\u0446:"n",\u0447:"n",\u0448:"w",\u0449:"w",\u044a:"a",\u044b:"m",\u044c:"a",\u044d:"e",\u044e:"m",\u044f:"r"};function Cm(n,o){void 0===n&&(n=77);let t=RG[o][n];if(t)return{defaultMetrics:!1,depth:t[0],height:t[1],italic:t[2],skew:t[3]};if(11034===n)return{defaultMetrics:!0,depth:.2,height:.8,italic:0,skew:0};let i=String.fromCodePoint(n);if(i in xy)n=xy[i].codePointAt(0);else if(zG.test(i))return n=77,{defaultMetrics:!0,depth:.2,height:.9,italic:0,skew:0};return{defaultMetrics:!0,depth:.2,height:.7,italic:0,skew:0}}var _d=class{constructor(n,o,t){this.id=n,this.sizeDelta=o,this.cramped=t;let i={"-4":2,"-3":1,0:0}[o];this.metrics=Object.keys(gy).reduce((a,r)=>mi(Et({},a),{[r]:gy[r][i]}),{})}getFontSize(n){return Math.max(1,n+this.sizeDelta)}get sup(){return Va[[0,1,0,1,2,3,2,3][this.id]]}get sub(){return Va[[0,0,0,0,2,2,2,2][this.id]]}get fracNum(){return Va[[0,1,0,1,2,3,4,5][this.id]]}get fracDen(){return Va[[0,0,0,0,2,2,4,4][this.id]]}get cramp(){return Va[[0,0,2,2,4,4,6,6][this.id]]}get isTight(){return this.sizeDelta<0}},Va={7:new _d(7,0,!1),6:new _d(6,0,!0),5:new _d(5,0,!1),4:new _d(4,0,!0),3:new _d(3,-3,!1),2:new _d(2,-3,!0),1:new _d(1,-4,!1),0:new _d(0,-4,!0)};function Cc(n,o){return null===n?0:function JG(n,o){var t;if(!n)return 0;let i={pt:1,mm:7227/2540,cm:7227/254,ex:35271/8192,px:3/4,em:10,bp:1.00375,dd:1238/1157,pc:12,in:72.27,mu:10/18}[null!=(t=n.unit)?t:"pt"];if(Number.isFinite(o)){let a=10**o;return Math.round(n.dimension/10*i*a)/a}return n.dimension*i}(n,o)/10}function C2(n){var o;return`${n.dimension}${null!=(o=n.unit)?o:"pt"}`}Va.displaystyle=Va[7],Va.textstyle=Va[5],Va.scriptstyle=Va[3],Va.scriptscriptstyle=Va[1];var pi=class{constructor(n,o,t){var i,a,r,s,l,c;n instanceof pi&&(this.parent=n),n instanceof pi||(this.registers=null!=(i=n.registers)?i:{}),this.isPhantom=null!=(s=null!=(r=o?.isPhantom)?r:null==(a=this.parent)?void 0:a.isPhantom)&&s;let m,u=Et({},n);if(o&&(o.letterShapeStyle&&"auto"!==o.letterShapeStyle&&(u.letterShapeStyle=o.letterShapeStyle),o.color&&"none"!==o.color&&(u.color=o.color),o.backgroundColor&&"none"!==o.backgroundColor&&(u.backgroundColor=o.backgroundColor),o.fontSize&&"auto"!==o.fontSize&&o.fontSize!==(null==(l=this.parent)?void 0:l._size)&&(this._size=o.fontSize)),this.letterShapeStyle=null!=(c=u.letterShapeStyle)?c:"tex",this.color=u.color,this.backgroundColor=u.backgroundColor,"string"==typeof t){if(n instanceof pi)switch(t){case"cramp":m=n.mathstyle.cramp;break;case"superscript":m=n.mathstyle.sup;break;case"subscript":m=n.mathstyle.sub;break;case"numerator":m=n.mathstyle.fracNum;break;case"denominator":m=n.mathstyle.fracDen}switch(t){case"textstyle":m=Va.textstyle;break;case"displaystyle":m=Va.displaystyle;break;case"scriptstyle":m=Va.scriptstyle;break;case"scriptscriptstyle":m=Va.scriptscriptstyle}}this._mathstyle=m,this.atomIdsSettings=n.atomIdsSettings,this.renderPlaceholder=u.renderPlaceholder}get mathstyle(){let n=this._mathstyle,o=this.parent;for(;!n;)n=o._mathstyle,o=o.parent;return n}getRegister(n){var o;return null!=(o=this.registers)&&o[n]?this.registers[n]:this.parent?this.parent.getRegister(n):void 0}getRegisterAsGlue(n){var o;if(null!=(o=this.registers)&&o[n]){let t=this.registers[n];return"object"==typeof t&&"glue"in t?t:"object"==typeof t&&"dimension"in t?{glue:{dimension:t.dimension}}:"number"==typeof t?{glue:{dimension:t}}:void 0}if(this.parent)return this.parent.getRegisterAsGlue(n)}getRegisterAsEm(n){return Cc(this.getRegisterAsDimension(n))}getRegisterAsDimension(n){var o;if(null!=(o=this.registers)&&o[n]){let t=this.registers[n];return"object"==typeof t&&"glue"in t?t.glue:"object"==typeof t&&"dimension"in t?t:"number"==typeof t?{dimension:t}:void 0}if(this.parent)return this.parent.getRegisterAsDimension(n)}setRegister(n,o){void 0!==o?this.registers[n]=o:delete this.registers[n]}setGlobalRegister(n,o){let t=this;for(;t.parent;)t.setRegister(n,void 0),t=t.parent;t.setRegister(n,o)}get size(){let n=this._size,o=this.parent;for(;!n;)n=o._size,o=o.parent;return n}makeID(){if(!this.atomIdsSettings)return;if(this.atomIdsSettings.overrideID)return this.atomIdsSettings.overrideID;if("number"!=typeof this.atomIdsSettings.seed)return Date.now().toString(36).slice(-2)+Math.floor(1e5*Math.random()).toString(36);let n=this.atomIdsSettings.seed.toString(36);return this.atomIdsSettings.seed+=1,n}scale(n){return n*this.effectiveFontSize}get scalingFactor(){return this.parent?this.effectiveFontSize/this.parent.effectiveFontSize:1}get isDisplayStyle(){return 7===this.mathstyle.id||6===this.mathstyle.id}get isCramped(){return this.mathstyle.cramped}get isTight(){return this.mathstyle.isTight}get effectiveFontSize(){return v2[Math.max(1,this.size+this.mathstyle.sizeDelta)]}get computedColor(){let n=this.color,o=this.parent;return!n&&o&&(n=o.color,o=o.parent),n??""}get computedBackgroundColor(){let n=this.backgroundColor,o=this.parent;return!n&&o&&(n=o.backgroundColor,o=o.parent),n??""}get metrics(){return this.mathstyle.metrics}},T2={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},k2={widehat1:[1062,239,.24],widehat2:[2364,300,.3],widehat3:[2364,360,.36],widehat4:[2364,420,.42],widecheck1:[1062,239,.24],widecheck2:[2364,300,.3],widecheck3:[2364,360,.36],widecheck4:[2364,420,.42],widetilde1:[600,260,.26],widetilde2:[1033,286,.286],widetilde3:[2339,306,.306],widetilde4:[2340,312,.34],overarc:[1061,159,.3],underarc:[1061,159,.3]},by={doubleleftarrow:"M262 157\nl10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3\n 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28\n 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5\nc2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5\n 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87\n-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7\n-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z\nm8 0v40h399730v-40zm0 194v40h399730v-40z",doublerightarrow:"M399738 392l\n-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5\n 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88\n-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68\n-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18\n-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782\nc-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3\n-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z",leftarrow:"M400000 241H110l3-3c68.7-52.7 113.7-120\n 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8\n-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247\nc-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208\n 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3\n 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202\n l-3-3h399890zM100 241v40h399900v-40z",leftbrace:"M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117\n-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7\n 5-6 9-10 13-.7 1-7.3 1-20 1H6z",leftbraceunder:"M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13\n 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688\n 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7\n-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z",overarc:"M529 0c179 0 524 115 524 115 5 1 9 5 9 10 0 1-1 2-1 3l-4 22c-1 5-5 9-11 9h-2s-338-93-512-92c-174 0-513 92-513 92h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13 0 0 342-115 520-115z",underarc:"m 529 160\n  c -179 0 -524 -115 -524 -115\n  c -5 -1 -9 -5 -9 -10\n  c 0 -1 1 -2 1 -3\n  l 4 -22\n  c 1 -5 5 -9 11 -9\n  h 2\n  s 338 93 512 92\n  c 174 0 513 -92 513 -92\n  h 2\n  c 5 0 9 4 11 9\n  l 5 22\n  c 1 6 -2 12 -8 13\n  c 0 0 -342 115 -520 115\n  z\n  ",leftgroup:"M400000 80\nH435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0\n 435 0h399565z",leftgroupunder:"M400000 262\nH435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219\n 435 219h399565z",leftharpoon:"M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3\n-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5\n-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7\n-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z",leftharpoonplus:"M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5\n 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3\n-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7\n-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z\nm0 0v40h400000v-40z",leftharpoondown:"M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333\n 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5\n 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667\n-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z",leftharpoondownplus:"M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12\n 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7\n-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0\nv40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z",lefthook:"M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5\n-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3\n-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21\n 71.5 23h399859zM103 281v-40h399897v40z",leftlinesegment:"M40 281 V428 H0 V94 H40 V241 H400000 v40z\nM40 281 V428 H0 V94 H40 V241 H400000 v40z",leftmapsto:"M40 281 V448H0V74H40V241H400000v40z\nM40 281 V448H0V74H40V241H400000v40z",leftToFrom:"M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23\n-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8\nc28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3\n 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z",longequal:"M0 50 h400000 v40H0z m0 194h40000v40H0z\nM0 50 h400000 v40H0z m0 194h40000v40H0z",midbrace:"M200428 334\nc-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14\n-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7\n 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11\n 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z",midbraceunder:"M199572 214\nc100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14\n 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3\n 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0\n-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z",oiintSize1:"M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6\n-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z\nm368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8\n60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z",oiintSize2:"M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8\n-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z\nm502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2\nc0 110 84 276 504 276s502.4-166 502.4-276z",oiiintSize1:"M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6\n-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z\nm525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0\n85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z",oiiintSize2:"M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8\n-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z\nm770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1\nc0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z",rightarrow:"M0 241v40h399891c-47.3 35.3-84 78-110 128\n-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20\n 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7\n 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85\n-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5\n-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67\n 151.7 139 205zm0 0v40h399900v-40z",rightbrace:"M400000 542l\n-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5\ns-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1\nc124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z",rightbraceunder:"M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3\n 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237\n-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z",rightgroup:"M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0\n 3-1 3-3v-38c-76-158-257-219-435-219H0z",rightgroupunder:"M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18\n 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z",rightharpoon:"M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3\n-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2\n-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58\n 69.2 92 94.5zm0 0v40h399900v-40z",rightharpoonplus:"M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11\n-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7\n 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z\nm0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z",rightharpoondown:"M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8\n 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5\n-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95\n-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z",rightharpoondownplus:"M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8\n 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3\n 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3\n-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z\nm0-194v40h400000v-40zm0 0v40h400000v-40z",righthook:"M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3\n 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0\n-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21\n 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z",rightlinesegment:"M399960 241 V94 h40 V428 h-40 V281 H0 v-40z\nM399960 241 V94 h40 V428 h-40 V281 H0 v-40z",rightToFrom:"M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23\n 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32\n-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142\n-167z M100 147v40h399900v-40zM0 341v40h399900v-40z",twoheadleftarrow:"M0 167c68 40\n 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69\n-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3\n-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19\n-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101\n 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z",twoheadrightarrow:"M400000 167\nc-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3\n 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42\n 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333\n-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70\n 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z",widetilde1:"M200 55.538c-77 0-168 73.953-177 73.953-3 0-7\n-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0\n 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0\n 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128\n-68.267.847-113-73.952-191-73.952z",widetilde2:"M344 55.266c-142 0-300.638 81.316-311.5 86.418\n-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9\n 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114\nc1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751\n 181.476 676 181.476c-149 0-189-126.21-332-126.21z",widetilde3:"M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457\n-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0\n 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697\n 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696\n -338 0-409-156.573-744-156.573z",widetilde4:"M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345\n-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409\n 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9\n 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409\n -175.236-744-175.236z",vec:"M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z",widehat1:"M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22\nc-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z",widehat2:"M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z",widehat3:"M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z",widehat4:"M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z",widecheck1:"M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,\n-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z",widecheck2:"M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z",widecheck3:"M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z",widecheck4:"M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z",baraboveleftarrow:"M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202\nc4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5\nc-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130\ns-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47\n121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6\ns2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11\nc0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z\nM100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z",rightarrowabovebar:"M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32\n-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0\n13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39\n-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5\n-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5\n-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67\n151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z",baraboveshortleftharpoon:"M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11\nc1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17\nc2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21\nc-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40\nc-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z\nM0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z",rightharpoonaboveshortbar:"M0,241 l0,40c399126,0,399993,0,399993,0\nc4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,\n-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6\nc-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z\nM0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z",shortbaraboveleftharpoon:"M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11\nc1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,\n1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,\n-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z\nM93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z",shortrightharpoonabovebar:"M53,241l0,40c398570,0,399437,0,399437,0\nc4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,\n-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6\nc-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z\nM500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z"},m_=class{constructor(n){m_._registry[n]=this}static createAtom(n,o,t,i){return m_._registry[n].createAtom(o,t,i)}static serialize(n,o){return m_._registry[n[0].mode].serialize(n,o)}static applyStyle(n,o,t){return m_._registry[n].applyStyle(o,t)}},fd=m_;function $s(n,o){let a,t=[],i=[];for(let r of n)if("first"!==r.type&&r.style){let s;"variant"===o?(s=r.style.variant,r.style.variantStyle&&"up"!==r.style.variantStyle&&(s+="-"+r.style.variantStyle)):"cssClass"===o?"group"===r.type&&(s=r.customClass):s=r.style[o],s===a?i.push(r):(i.length>0&&t.push(i),i=[r],a=s)}return i.length>0&&t.push(i),t}fd._registry={};var VG=["","chem","mord","mbin","mop","mrel","mopen","mclose","mpunct","minner","spacing","first","latex","composition","error","placeholder","supsub","none","mathfield"],XG={mord:{mop:3,mbin:4,mrel:5,minner:3},mop:{mord:3,mop:3,rel:5,minner:3},mbin:{mord:4,mop:4,mopen:4,minner:4},mrel:{mord:5,mop:5,mopen:5,minner:5},mclose:{mop:3,mbin:4,mrel:5,minner:3},mpunct:{mord:3,mop:3,mrel:3,mopen:3,mpunct:3,minner:3},minner:{mord:3,mop:3,mbin:4,mrel:5,mopen:3,mpunct:3,minner:3}},eY={mord:{mop:3},mop:{mord:3,mop:3},mclose:{mop:3},minner:{mop:3}};function p_(n,o){if("string"==typeof n)return n;if("number"==typeof n){Number.isFinite(n);let t=Math.ceil(100*n)/100;return 0===t?"0":t.toString()+(o??"")}return""}var Ht=class{constructor(n,o){var t,i,a,r,s,l;if("number"==typeof n?this.value=String.fromCodePoint(n):"string"==typeof n?this.value=n:Ea(n)?this.children=n.filter(u=>null!==u):n&&n instanceof Ht&&(this.children=[n]),this.type=null!=(t=o?.type)?t:"",this.isSelected=!1,this.isTight=null!=(i=o?.isTight)&&i,this.newList=null!=(a=o?.newList)&&a,null!=o&&o.properties)for(let u of Object.keys(o.properties))this.setStyle(u,o.properties[u]);null!=o&&o.attributes&&(this.attributes=o.attributes),this.classes=null!=(r=o?.classes)?r:"";let c=o?.fontFamily||"Main-Regular";if(null!=o&&o.style&&this.value&&(c=fd.applyStyle(null!=(s=o.mode)?s:"math",this,o.style)||"Main-Regular"),this.height=0,this.depth=0,this.skew=0,this.italic=0,this.maxFontSize=0,"latex"===this.type)this.height=.8,this.depth=.2;else if("number"==typeof n){let u=Cm(n,c);this.height=u.height,this.depth=u.depth,this.skew=u.skew,this.italic=u.italic}else if(this.value){this.height=-1/0,this.depth=-1/0,this.skew=-1/0,this.italic=-1/0;for(let u=0;u<this.value.length;u++){let m=Cm(this.value.codePointAt(u),c||"Main-Regular");this.height=Math.max(this.height,m.height),this.depth=Math.max(this.depth,m.depth),this.skew=m.skew,this.italic=m.italic}}else if(this.children&&this.children.length>0)if(1===this.children.length){let u=this.children[0];this.height=u.height,this.depth=u.depth,this.maxFontSize=u.maxFontSize,this.skew=u.skew,this.italic=u.italic}else{let u=-1/0,m=-1/0,p=0;for(let f of this.children)f.height>u&&(u=f.height),f.depth>m&&(m=f.depth),p=Math.max(p,null!=(l=f.maxFontSize)?l:0);this.height=u,this.depth=m,this.maxFontSize=p}void 0!==o?.height&&(this.height=o.height),void 0!==o?.depth&&(this.depth=o.depth),void 0!==o?.maxFontSize&&(this.maxFontSize=o.maxFontSize)}set atomID(n){void 0===n||0===n.length||(this.attributes||(this.attributes={}),this.attributes["data-atom-id"]=n)}selected(n){if(this.isSelected!==n&&(this.isSelected=n,this.children))for(let o of this.children)o.selected(n)}setStyle(n,o,t){if(void 0===o)return;let i=p_(o,t);i.length>0&&(this.cssProperties||(this.cssProperties={}),this.cssProperties[n]=i)}setTop(n){Number.isFinite(n)&&Math.abs(n)>.01&&(this.cssProperties||(this.cssProperties={}),this.cssProperties.top=p_(n,"em"),this.height-=n,this.depth+=n)}get left(){var n;return null!=(n=this.cssProperties)&&n["margin-left"]?Number.parseFloat(this.cssProperties["margin-left"]):0}set left(n){Number.isFinite(n)&&(0===n?this.cssProperties&&delete this.cssProperties["margin-left"]:(this.cssProperties||(this.cssProperties={}),this.cssProperties["margin-left"]=p_(n,"em")))}set right(n){Number.isFinite(n)&&(0===n?this.cssProperties&&delete this.cssProperties["margin-right"]:(this.cssProperties||(this.cssProperties={}),this.cssProperties["margin-right"]=p_(n,"em")))}set width(n){Number.isFinite(n)&&(0===n?this.cssProperties&&delete this.cssProperties.width:(this.cssProperties||(this.cssProperties={}),this.cssProperties.width=p_(n,"em")))}wrap(n,o){let t=n.parent;if(!t)return this;n.isPhantom&&this.setStyle("opacity",0);let i=n.computedColor;i===t.computedColor&&(i=""),this.setStyle("color",i);let s,a=n.effectiveFontSize===t.effectiveFontSize?void 0:n.effectiveFontSize,r=n.computedBackgroundColor;if(this.isSelected&&(r=my(r)),r===t.computedBackgroundColor&&(r=""),!(a||r||o&&(o.classes||o.type)))return this;r?(s=gd(this,o),s.selected(this.isSelected),s.setStyle("background-color",r),s.setStyle("display","inline-block")):s=new Ht(this,o);let l=n.scalingFactor;return 1!==l&&(s.setStyle("font-size",100*l,"%"),s.height*=l,s.depth*=l,s.italic*=l,s.skew*=l),s}wrapSelect(n){if(!this.isSelected)return this;if(!n.parent)return this;let o=my(n.computedBackgroundColor),t=gd(this);return t.selected(!0),t.setStyle("background-color",o),t.setStyle("display","inline-block"),t}toMarkup(){var n,o,t;let i=null!=(n=this.value)?n:"";if(this.children)for(let l of this.children)i+=l.toMarkup();let a=this.classes.split(" ");a.push(null!=(o={latex:"ML__latex",placeholder:"ML__placeholder",error:"ML__error"}[this.type])?o:""),"latex"===this.caret&&a.push("ML__latex-caret");let r=1===a.length?a[0]:a.filter((l,c,u)=>l.length>0&&u.indexOf(l)===c).join(" "),s="";if(i.length>0&&"\u200b"!==i||r.length>0||this.cssId||this.htmlData||this.htmlStyle||this.attributes||this.cssProperties||this.svgBody||this.svgOverlay){let l="";if(this.cssId&&(l+=` id="${this.cssId.replace(/ /g,"-")}" `),this.htmlData){let u=this.htmlData.split(",");for(let m of u){let p=m.match(/([^=]+)=(.+$)/);if(p){let f=p[1].trim().replace(/ /g,"-");f&&(l+=` data-${f}="${p[2]}" `)}else{let f=m.trim().replace(/ /g,"-");f&&(l+=` data-${f} `)}}}if(this.htmlStyle){let u=this.htmlStyle.split(";"),m="";for(let p of u){let f=p.match(/([^=]+):(.+$)/);if(f){let b=f[1].trim().replace(/ /g,"-");b&&(m+=`${b}:${f[2]};`)}}m&&(l+=` style="${m}"`)}if(this.attributes&&(l+=" "+Object.keys(this.attributes).map(u=>`${u}="${this.attributes[u]}"`).join(" ")),r.length>0&&(l+=` class="${r}"`),this.cssProperties){let u=Object.keys(this.cssProperties).map(m=>`${m}:${this.cssProperties[m]}`).join(";");u.length>0&&(l+=` style="${u}"`)}let c="";this.svgBody?c=function GG(n){if(k2[n]){let[u,m,p]=k2[n];return`<span style="display:inline-block;height:${p/2}em;min-width:0"><span class="stretchy" style="height:${p}em"><svg width="100%" height="${p}em" viewBox="0 0 ${u} ${m}" preserveAspectRatio="none" ><path fill="currentcolor" d="${by[n]}"></path></svg></span></span>`}let r,s,[o,t,i,a]=T2[n],l=i/1e3;3===o.length?(r=["slice-1-of-3","slice-2-of-3","slice-3-of-3"],s=["xMinYMin","xMidYMin","xMaxYMin"]):2===o.length?(r=["slice-1-of-2","slice-2-of-2"],s=["xMinYMin","xMaxYMin"]):(r=["slice-1-of-1"],s=[a]);let c=o.map((u,m)=>`<span class="${r[m]}" style=height:${l}em><svg width=400em height=${l}em viewBox="0 0 400000 ${i}" preserveAspectRatio="${s[m]} slice"><path fill="currentcolor" d="${by[u]}"></path></svg></span>`).join("");return`<span style="display:inline-block;height:${l}em;min-width:${t}em;">${c}</span>`}(this.svgBody):this.svgOverlay&&(c='<span style="',c+="display: inline-block;",c+=`height:${this.height+this.depth}em;`,c+=`vertical-align:${this.depth}em;`,c+='">',c+=i,c+="</span>",c+='<svg style="position:absolute;overflow:overlay;',c+=`height:${this.height+this.depth}em;`,null!=(t=this.cssProperties)&&t.padding?(c+=`top:${this.cssProperties.padding}em;`,c+=`left:${this.cssProperties.padding}em;`,c+=`width:calc(100% - 2 * ${this.cssProperties.padding}em );`):c+="top:0;left:0;width:100%;",c+="z-index:2;",c+='"',this.svgStyle&&(c+=` style="${this.svgStyle}"`),c+=`>${this.svgOverlay}</svg>`),s=`<span${l}>${i}${c}</span>`}return"text"===this.caret?s+='<span class="ML__text-caret"></span>':"math"===this.caret&&(s+='<span class="ML__caret"></span>'),s}tryCoalesceWith(n){if(this.type!==n.type||!/ML__text/.test(this.classes)&&!["mord","mbin","mrel"].includes(this.type)||this.svgBody||!this.value||n.svgBody||!n.value)return!1;if(this.children&&this.children.length>0||n.children&&n.children.length>0)return!1;let i=this.cssProperties?Object.keys(this.cssProperties).length:0;if(i!==(n.cssProperties?Object.keys(n.cssProperties).length:0))return!1;if(i>0)for(let l of Object.keys(this.cssProperties))if(this.cssProperties[l]!==n.cssProperties[l])return!1;let r=this.classes.trim().replace(/\s+/g," ").split(" "),s=n.classes.trim().replace(/\s+/g," ").split(" ");if(r.length!==s.length)return!1;r.sort(),s.sort();for(let[l,c]of r.entries())if("vertical-separator"===c||c!==s[l])return!1;return this.value+=n.value,this.height=Math.max(this.height,n.height),this.depth=Math.max(this.depth,n.depth),this.maxFontSize=Math.max(this.maxFontSize,n.maxFontSize),this.italic=n.italic,!0}};function S2(n){if(!n||0===n.length)return[];n[0].children=S2(n[0].children);let o=[n[0]];for(let t=1;t<n.length;t++)o[o.length-1].tryCoalesceWith(n[t])||(n[t].children=S2(n[t].children),o.push(n[t]));return o}function c1(n){return n.children&&(n.children=S2(n.children)),n}function vy(n,o,t){o.newList&&(n=null);let i=o.type;if("first"===i)return null;if("spacing"===i)return n;if(t(n,o),o.children){let a=null;(void 0===i||0===i.length)&&(a=n);for(let r of o.children)a=vy(a,r,t);(void 0===i||0===i.length)&&(n=a)}return"supsub"!==i&&void 0!==i&&i.length>0&&(n=o),n}function wy(n,o){n&&vy(null,n,o)}function ch(n,o=1){return function tY(n){wy(n,(o,t)=>{"mbin"===t.type&&(!o||/first|none|mbin|mop|mrel|mopen|mpunct/.test(o.type))&&(t.type="mord"),o&&"mbin"===o.type&&/mrel|mclose|mpunct|placeholder/.test(t.type)&&(o.type="mord")})}(n),function nY(n,o){wy(n,(t,i)=>{var a,r,s,l;let c=null!=(a=t?.type)?a:"none",u=i.isTight?null!=(r=eY[c])?r:null:null!=(s=XG[c])?s:null,m=u&&null!=(l=u[i.type])?l:0;m&&(i.left+=o*(m/18))})}(n,o),n}function gd(n,o){if(!n)return new Ht(null,o);let t=new Ht(null,{classes:"ML__strut"});t.setStyle("height",Math.max(0,n.height),"em");let i=[t];if(0!==n.depth){let a=new Ht(null,{classes:"ML__strut--bottom"});a.setStyle("height",n.height+n.depth,"em"),a.setStyle("vertical-align",-n.depth,"em"),i.push(a)}return i.push(n),new Ht(i,o)}function u1(n){let o=function YG(n){return T2[n]?T2[n][2]/1e3:k2[n][2]}(n)/2,t=new Ht(null,{height:o+.166,depth:o-.166,maxFontSize:0});return t.svgBody=n,t}var m1,sa=class extends Ht{constructor(n,o){var t;let[i,a,r]=function aY(n){var o;let[t,i]=function oY(n){if("individualShift"in n){let o=n.individualShift,t=o[0],i=[t],a=-t.shift-t.box.depth,r=a;for(let s=1;s<o.length;s++){let l=o[s],c=-l.shift-r-l.box.depth;r+=c,i.push(c-(t.box.height+t.box.depth)),i.push(l),t=l}return[i,a]}if("top"in n){let o=n.top;for(let t of n.children)o-="number"==typeof t?t:t.box.height+t.box.depth;return[n.children,o]}if("bottom"in n)return[n.children,-n.bottom];if("firstBaseline"in n){let o=n.firstBaseline[0];if("number"==typeof o)throw new Error("First child must be an element.");return[n.firstBaseline,-o.box.depth]}if("shift"in n){let o=n.children[0];if("number"==typeof o)throw new Error("First child must be an element.");return[n.children,-o.box.depth-n.shift]}return[null,0]}(n);if(!t)return[[],0,0];let a=0;for(let b of t)if("number"!=typeof b){let L=b.box;a=Math.max(a,L.maxFontSize,L.height)}a+=2;let r=new Ht(null,{classes:"pstrut"});r.setStyle("height",a,"em");let s=[],l=i,c=i,u=i;for(let b of t){if("number"==typeof b)u+=b;else{let L=b.box,N=null!=(o=b.classes)?o:[],R=new Ht([r,L],{classes:N.join(" "),style:b.style});R.setStyle("top",-a-u-L.depth,"em"),b.marginLeft&&R.setStyle("margin-left",b.marginLeft,"em"),b.marginRight&&R.setStyle("margin-right",b.marginRight,"em"),s.push(R),u+=L.height+L.depth}l=Math.min(l,u),c=Math.max(c,u)}let m=new Ht(s,{classes:"vlist"});if(m.setStyle("height",c,"em"),l>=0)return[[new Ht(m,{classes:"vlist-r"})],c,-l];let p=new Ht(new Ht(null),{classes:"vlist"});p.setStyle("height",-l,"em");let f=new Ht(8203,{classes:"vlist-s",maxFontSize:0,height:0,depth:0});return[[new Ht([m,f],{classes:"vlist-r"}),new Ht(p,{classes:"vlist-r"})],c,-l]}(n);super(1===i.length?i[0]:i,{classes:(null!=(t=o?.classes)?t:"")+" vlist-t"+(2===i.length?" vlist-t2":""),height:a,depth:r,type:o?.type})}},d1=8205,lY=[[d1,1],[65038,2],[127995,5],[129456,4],[917536,96]],yy=[127462,127487];function Cy(n){var o;if(void 0===m1){m1={};for(let t of lY)for(let i=t[0];i<=t[0]+t[1]-1;i++)m1[i]=!0}return null!=(o=m1[n])&&o}function cY(n){return n>=yy[0]&&n<=yy[1]}function Ty(n){if(/^[\u0020-\u00FF]*$/.test(n))return n;let o=[],t=function sY(n){let o=[];for(let t=0;t<n.length;t++){let i=n.charCodeAt(t);if(13===i&&10===n.charCodeAt(t+1)&&(i=10,t++),(13===i||12===i)&&(i=10),0===i&&(i=65533),i>=55296&&i<=56319){let a=n.charCodeAt(t+1);a>=56320&&a<=57343&&(i=65536+1024*(i-55296)+(a-56320),t++)}o.push(i)}return o}(n),i=0;for(;i<t.length;){let a=t[i++],r=t[i];if(r===d1){let s=i-1;for(i+=2;t[i]===d1;)i+=2;o.push(String.fromCodePoint(...t.slice(s,i-s+1)))}else if(Cy(r)){let s=i-1;for(;Cy(t[i]);)i+=t[i]===d1?2:1;o.push(String.fromCodePoint(...t.slice(s,2*i-s-1)))}else cY(a)?(i+=1,o.push(String.fromCodePoint(...t.slice(i-2,2)))):o.push(String.fromCodePoint(a))}return o}var uY=class{constructor(n){this.s=Ty(n),this.pos=0,this.obeyspaces=!1}end(){return this.pos>=this.s.length}get(){return this.pos<this.s.length?this.s[this.pos++]:""}peek(){return this.s[this.pos]}match(n){let o=n.exec("string"==typeof this.s?this.s.slice(this.pos):this.s.slice(this.pos).join(""));return null!=o&&o[0]?(this.pos+=o[0].length,o[0]):""}next(){if(this.end())return null;if(!this.obeyspaces&&this.match(/^[ \f\n\r\t\v\u00A0\u2028\u2029]+/)||this.obeyspaces&&this.match(/^[ \f\n\r\t\v\u00A0\u2028\u2029]/))return"<space>";let n=this.get();if("\\"===n){if(!this.end()){let o=this.match(/^[a-zA-Z\*]+/);if(o)this.match(/^[ \f\n\r\t\v\u00A0\u2028\u2029]*/);else if(o=this.get()," "===o)return"<space>";return"\\"+o}}else{if("{"===n)return"<{>";if("}"===n)return"<}>";if("^"===n){if("^"===this.peek()){this.get();let o=this.match(/^(\^(\^(\^(\^[\da-f])?[\da-f])?[\da-f])?[\da-f])?[\da-f]{2}/);if(o)return String.fromCodePoint(Number.parseInt(o.slice(o.lastIndexOf("^")+1),16))}return n}if("#"===n){if(!this.end()){let o=!1;return/[\d?@]/.test(this.peek())&&(o=!0,this.pos+1<this.s.length)&&(o=/[^\dA-Za-z]/.test(this.s[this.pos+1])),o?"#"+this.get():"#"}}else if("$"===n)return"$"===this.peek()?(this.get(),"<$$>"):"<$>"}return n}};function dY(n,o){var t,i,a,r;let s=[],l=n.next();if(l&&"\\relax"!==l)if("\\noexpand"===l)l=n.next(),l&&s.push(l);else if("\\obeyspaces"===l)n.obeyspaces=!0;else if("\\space"===l||"~"===l)s.push("<space>");else if("\\bgroup"===l)s.push("<{>");else if("\\egroup"===l)s.push("<}>");else if("\\string"===l){if(l=n.next(),l)if(l.startsWith("\\"))for(let c of l)s.push("\\"===c?"\\backslash":c);else"<{>"===l?s.push("\\{"):"<space>"===l?s.push("~"):"<}>"===l&&s.push("\\}")}else if("\\csname"===l){for(;"<space>"===n.peek();)n.next();let c="",u=!1,m=[];do{if(0===m.length)if(/^#[\d?@]$/.test(n.peek())){let p=n.get().slice(1);m=uh(null!=(i=null!=(t=o?.(p))?t:o?.("?"))?i:"\\placeholder{}",o),l=m[0]}else l=n.next(),m=l?[l]:[];u=0===m.length,!u&&"\\endcsname"===l&&(u=!0,m.shift()),u||(u="<$>"===l||"<$$>"===l||"<{>"===l||"<}>"===l||"string"==typeof l&&l.length>1&&l.startsWith("\\")),u||(c+=m.shift())}while(!u);c&&s.push("\\"+c),s.push(...m)}else if("\\endcsname"!==l)if(l.length>1&&l.startsWith("#")){let c=l.slice(1);s.push(...uh(null!=(r=null!=(a=o?.(c))?a:o?.("?"))?r:"\\placeholder{}",o))}else s.push(l);return s}function uh(n,o=null){let t=[],i="";for(let s of n.toString().split(/\r?\n/)){i&&t.push(i),i=" ";let l=s.match(/((?:\\%)|[^%])*/);null!==l&&t.push(l[0])}let a=new uY(t.join("")),r=[];do{r.push(...dY(a,o))}while(!a.end());return r}function Bo(n){let o="",t=[];for(let i of n)i&&(/[a-zA-Z\*]/.test(i[0])&&t.push(o),t.push(i),/\\[a-zA-Z]+\*?[\"\'][^\ ]+$/.test(i)&&t.push(" "),o=/\\[a-zA-Z]+\*?$/.test(i)?" ":"");return t.join("")}function h_(n){return Bo(n.map(o=>{var t;return null!=(t={"<space>":" ","<$$>":"$$","<$>":"$","<{>":"{","<}>":"}"}[o])?t:o}))}var pY=class extends Ht{constructor(n,o,t){super(null,t),this.mathfield=o,this.htmlData=`placeholder-id="${n}" `;let i=function mY(n){return gd(ch(n.model.root.render(new pi({registers:n.registers},{fontSize:ym,letterShapeStyle:n.options.letterShapeStyle},"inline-math"===n.options.defaultMode?"textstyle":"displaystyle")),n.options.horizontalSpacingScale),{classes:"ML__mathlive",attributes:{translate:"no","aria-hidden":"true"}})}(o._mathfield);this.height=i.height,this.depth=i.depth}toMarkup(){let n=[],o=this.classes.split(" "),t=1===o.length?o[0]:o.filter((a,r,s)=>a.length>0&&s.indexOf(a)===r).join(" ");if(this.cssId&&n.push(`id="${this.cssId.replace(/ /g,"-")}"`),this.htmlData){let a=this.htmlData.split(",");for(let r of a){let s=r.match(/([^=]+)=(.+$)/);if(s){let l=s[1].trim().replace(/ /g,"-");l&&n.push(`data-${l}=${s[2]}`)}else{let l=r.trim().replace(/ /g,"-");l&&n.push(`data-${l}`)}}}if(this.htmlStyle){let a=this.htmlStyle.split(";"),r="";for(let s of a){let l=s.match(/([^=]+):(.+$)/);if(l){let c=l[1].trim().replace(/ /g,"-");c&&(r+=`${c}:${l[2]};`)}}r&&n.push(`style="${r}"`)}this.attributes&&n.push(...Object.keys(this.attributes).map(a=>`${a}="${this.attributes[a]}"`)),t.length>0&&n.push(`class="${t}"`);let i=this.mathfield;return n.push(`style="display:inline-block; width:${i.clientWidth}px; height:${i.clientHeight}px;" `),`<span ${n.join(" ")}></span>`}},Tm=["above","body","below","superscript","subscript"];function km(n){return"string"==typeof n&&Tm.includes(n)}function p1(n){return void 0!==n&&Array.isArray(n)&&2===n.length}var vl=class{constructor(n,o,t){var i,a,r,s,l,c;this.id=void 0,this.verbatimLatex=void 0,this._isDirty=!1,this._changeCounter=0,this.subsupPlacement=void 0,this.explicitSubsupPlacement=!1,this.skipBoundary=!1,this.captureSelection=!1,this.type=n,this.context=o,"string"==typeof t?.value&&(this.value=t.value),this.command=null!=(a=null!=(i=t?.command)?i:this.value)?a:"",this.mode=null!=(r=t?.mode)?r:"math",this.isFunction=null!=(s=t?.isFunction)&&s,this.subsupPlacement=t?.limits,this.style=null!=(l=t?.style)?l:{},this.displayContainsHighlight=null!=(c=t?.displayContainsHighlight)&&c,null!=t&&t.serialize&&(vl.customSerializer[t.command]=t.serialize)}static createBox(n,o,t){var i,a,r;if(!o)return null;let s=function hY(n){let o,t=[],i=[];for(let a of n)if(o||a.style){let r=a.computedStyle;o&&r.color===o.color&&r.backgroundColor===o.backgroundColor&&r.fontSize===o.fontSize?i.push(a):(i.length>0&&t.push(i),i=[a],o=r)}else i.push(a);return i.length>0&&t.push(i),t}(o);if(1===s.length){let u=s[0];return E2(n,u,u[0].style?mi(Et({},t),{style:{color:u[0].style.color,backgroundColor:u[0].style.backgroundColor,fontSize:u[0].style.fontSize}}):t)}let l=[],c=t?.newList;for(let u of s){let p=E2(new pi(n,{color:null==(i=u[0].style)?void 0:i.color,backgroundColor:null==(a=u[0].style)?void 0:a.backgroundColor,fontSize:null==(r=u[0].style)?void 0:r.fontSize}),u,{newList:c});p&&(c=!1,l.push(p))}return 0===l.length?null:1!==l.length||null!=t&&t.classes||null!=t&&t.type?new Ht(l,{classes:t?.classes,type:t?.type,newList:t?.newList}).wrap(n):l[0].wrap(n)}static serialize(n,o){return Ea(n)?dh(n,o):"number"==typeof n||"boolean"==typeof n?n.toString():"string"==typeof n?n.replace(/\s/g,"~"):void 0===n?"":o.expandMacro||"string"!=typeof n.verbatimLatex?n.command&&vl.customSerializer[n.command]?vl.customSerializer[n.command](n,o):n.serialize(o):n.verbatimLatex}static commonAncestor(n,o){if(n===o||n.parent===o.parent)return n.parent;let t=new WeakSet,{parent:i}=n;for(;i;)t.add(i),i=i.parent;for(i=o.parent;i;){if(t.has(i))return i;i=i.parent}}static fromJson(n,o){let t=new vl(n.type,o,n);for(let i of Tm)n[i]&&t.setChildren(n[i],i);return t}toJson(){let n={type:this.type};if("math"!==this.mode&&(n.mode=this.mode),this.command&&this.command!==this.value&&(n.command=this.command),void 0!==this.value&&(n.value=this.value),this.style&&Object.keys(this.style).length>0&&(n.style=Et({},this.style)),void 0!==this.verbatimLatex&&(n.verbatimLatex=this.verbatimLatex),this.subsupPlacement&&(n.subsupPlacement=this.subsupPlacement),this.explicitSubsupPlacement&&(n.explicitSubsupPlacement=!0),this.isFunction&&(n.isFunction=!0),this.displayContainsHighlight&&(n.displayContainsHighlight=!0),this.isExtensibleSymbol&&(n.isExtensibleSymbol=!0),this.skipBoundary&&(n.skipBoundary=!0),this.captureSelection&&(n.captureSelection=!0),this._branches)for(let o of Object.keys(this._branches))this._branches[o]&&(n[o]=this._branches[o].filter(t=>"first"!==t.type).map(t=>t.toJson()));return n}get changeCounter(){return this._changeCounter}get isDirty(){return this._isDirty}set isDirty(n){if(this._isDirty=n,n){this._changeCounter++,this.verbatimLatex=void 0,this._children=void 0;let{parent:o}=this;for(;o;)o._isDirty=!0,o._changeCounter++,o.verbatimLatex=void 0,o._children=void 0,o=o.parent}}serialize(n){var o;return this.body&&this.command?Bo([this.command,"{",this.bodyToLatex(n),"}",this.supsubToLatex(n)]):this.body?Bo([this.bodyToLatex(n),this.supsubToLatex(n)]):this.value&&"\u200b"!==this.value?null!=(o=this.command)?o:function UG(n,o){var t;if("text"===n)return null!=(t=o1(n,o.codePointAt(0)))?t:o;let i;if(i=o1(n,o.codePointAt(0)),i)return i;let r=function ZG(n){var o;if((n<119808||n>120831)&&(n<8448||n>8527))return{char:String.fromCodePoint(n)};for(let t in f2)if(f2[t]===n){n=null!=(o=t.codePointAt(0))?o:0;break}for(let t of hy)if(n>=t.start&&n<t.start+t.len)return{char:String.fromCodePoint(n-t.start+t.offset),variant:t.variant,style:t.style};return{char:String.fromCodePoint(n)}}(o.codePointAt(0));return r.style||r.variant?(i=r.char,r.variant&&(i="\\"+r.variant+"{"+i+"}"),"bold"===r.style?i="\\mathbf{"+i+"}":"italic"===r.style?i="\\mathit{"+i+"}":"bolditalic"===r.style&&(i="\\mathbfit{"+i+"}"),"\\mathord{"+i+"}"):""}(this.mode,this.value):""}bodyToLatex(n){return dh(this.body,n)}aboveToLatex(n){return dh(this.above,n)}belowToLatex(n){return dh(this.below,n)}supsubToLatex(n){let o="";if(void 0!==this.branch("subscript")){let t=dh(this.subscript,n);o+=0===t.length?"_{}":1===t.length?"_"+t:`_{${t}}`}if(void 0!==this.branch("superscript")){let t=dh(this.superscript,n);o+=0===t.length?"^{}":1===t.length?"\u2032"===t?"^\\prime ":"\u2033"===t?"^\\doubleprime ":"^"+t:`^{${t}}`}return o}get treeDepth(){let n=1,o=this.parent;for(;o;)o=o.parent,n+=1;return n}get inCaptureSelection(){let n=!1,o=this;for(;o;){if(o.captureSelection){n=!0;break}o=o.parent}return n}branch(n){if(km(n)&&this._branches)return this._branches[n]}get branches(){if(!this._branches)return[];let n=[];for(let o of Tm)this._branches[o]&&n.push(o);return n}createBranch(n){return km(n),km(n)?(this._branches?this._branches[n]||(this._branches[n]=[this.makeFirstAtom(n)]):this._branches={[n]:[this.makeFirstAtom(n)]},this.isDirty=!0,this._branches[n]):[]}get row(){return p1(this.treeBranch)?this.treeBranch[0]:-1}get col(){return p1(this.treeBranch)?this.treeBranch[1]:-1}get body(){var n;return null==(n=this._branches)?void 0:n.body}set body(n){this.setChildren(n,"body")}get superscript(){var n;return null==(n=this._branches)?void 0:n.superscript}set superscript(n){this.setChildren(n,"superscript")}get subscript(){var n;return null==(n=this._branches)?void 0:n.subscript}set subscript(n){this.setChildren(n,"subscript")}get above(){var n;return null==(n=this._branches)?void 0:n.above}set above(n){this.setChildren(n,"above")}get below(){var n;return null==(n=this._branches)?void 0:n.below}set below(n){this.setChildren(n,"below")}get computedStyle(){var n;if(!this.parent)return Et({},null!=(n=this.style)?n:{});let o=void 0!==this.style.verbatimColor,t=void 0!==this.style.verbatimBackgroundColor,i=Et(Et({},this.parent.computedStyle),this.style);return delete i.variant,delete i.variantStyle,t||delete i.verbatimBackgroundColor,o||delete i.verbatimColor,i}applyStyle(n){this.isDirty=!0,this.style=Et(Et({},this.style),n),"none"===this.style.fontFamily&&delete this.style.fontFamily,"auto"===this.style.fontShape&&delete this.style.fontShape,"auto"===this.style.fontSeries&&delete this.style.fontSeries,"none"===this.style.color&&(delete this.style.color,delete this.style.verbatimColor),"none"===this.style.backgroundColor&&(delete this.style.backgroundColor,delete this.style.verbatimBackgroundColor),"auto"===this.style.fontSize&&delete this.style.fontSize;for(let o of this.children)o.applyStyle(n)}getInitialBaseElement(){let o;return this.hasEmptyBranch("body")||(o=this.body[1].getInitialBaseElement()),o??this}getFinalBaseElement(){return this.hasEmptyBranch("body")?this:this.body[this.body.length-1].getFinalBaseElement()}isCharacterBox(){if("leftright"===this.type)return!1;let n=this.getInitialBaseElement();return/mord/.test(n.type)}hasEmptyBranch(n){let o=this.branch(n);return!o||1===o.length}setChildren(n,o){if(!n||(km(o),!km(o)))return;let i=[this.makeFirstAtom(o),...n];this._branches?this._branches[o]=i:this._branches={[o]:i};for(let a of n)a.parent=this,a.treeBranch=o;this.isDirty=!0}makeFirstAtom(n){let o=new vl("first",this.context,{mode:this.mode});return o.parent=this,o.treeBranch=n,o}addChild(n,o){this.createBranch(o).push(n),this.isDirty=!0,n.parent=this,n.treeBranch=o}addChildBefore(n,o){let t=this.createBranch(o.treeBranch);t.splice(t.indexOf(o),0,n),this.isDirty=!0,n.parent=this,n.treeBranch=o.treeBranch}addChildAfter(n,o){let t=this.createBranch(o.treeBranch);t.splice(t.indexOf(o)+1,0,n),this.isDirty=!0,n.parent=this,n.treeBranch=o.treeBranch}addChildren(n,o){for(let t of n)this.addChild(t,o)}addChildrenAfter(n,o){let t=this.createBranch(o.treeBranch);t.splice(t.indexOf(o)+1,0,...n),this.isDirty=!0;for(let i of n)i.parent=this,i.treeBranch=o.treeBranch;return n[n.length-1]}removeBranch(n){let o=this.branch(n);if(km(n)&&(this._branches[n]=void 0),!o)return[];for(let t of o)t.parent=void 0,t.treeBranch=void 0;return o.shift(),this.isDirty=!0,o}removeChild(n){if("first"===n.type)return;let o=this.branch(n.treeBranch),t=o.indexOf(n);o.splice(t,1),this.isDirty=!0,n.parent=void 0,n.treeBranch=void 0}get siblings(){return"root"===this.type?[]:this.parent.branch(this.treeBranch)}get firstSibling(){return this.siblings[0]}get lastSibling(){let{siblings:n}=this;return n[n.length-1]}get isFirstSibling(){return this===this.firstSibling}get isLastSibling(){return this===this.lastSibling}get hasNoSiblings(){return 1===this.siblings.length}get leftSibling(){let n=this.parent.branch(this.treeBranch);return n[n.indexOf(this)-1]}get rightSibling(){let n=this.parent.branch(this.treeBranch);return n[n.indexOf(this)+1]}get hasChildren(){return!!(this._branches&&this.children.length>0)}get firstChild(){return this.children[0]}get lastChild(){let{children:n}=this;return n[n.length-1]}get children(){if(this._children)return this._children;if(!this._branches)return[];let n=[];for(let o of Tm)if(this._branches[o])for(let t of this._branches[o])n.push(...t.children),n.push(t);return this._children=n,n}render(n,o){if("first"===this.type&&!n.atomIdsSettings)return null;let t=new pi(n,this.style),i="";"root"===this.type&&(i+=" ML__base"),this.isSelected&&(i+=" ML__selected");let a=this.createBox(t,{classes:i,newList:!0===o?.newList||"first"===this.type});return a?(!this.subsupPlacement&&(this.superscript||this.subscript)&&(a=this.attachSupsub(t,{base:a})),a.wrap(t)):null}attachSupsub(n,o){var t,i;let a=o.base,r=this.superscript,s=this.subscript;if(!r&&!s)return a;let l=null,c=null,u=null!=(t=o.isCharacterBox)?t:this.isCharacterBox(),m=0;if(r){let R=new pi(n,void 0,"superscript");l=vl.createBox(R,r,{newList:!0}),u||(m=a.height-n.metrics.supDrop*R.scalingFactor)}let f,p=0;if(s){let R=new pi(n,void 0,"subscript");c=vl.createBox(R,s,{newList:!0}),u||(p=a.depth+n.metrics.subDrop*R.scalingFactor)}f=n.isDisplayStyle?n.metrics.sup1:n.isCramped?n.metrics.sup3:n.metrics.sup2;let b=.05/n.scalingFactor,L=null;if(c&&l){m=Math.max(m,f,l.depth+.25*n.metrics.xHeight),p=Math.max(p,n.metrics.sub2);let R=n.metrics.defaultRuleThickness;if(m-l.depth-(c.height-p)<4*R){p=4*R-(m-l.depth)+c.height;let G=.8*n.metrics.xHeight-(m-l.depth);G>0&&(m+=G,p-=G)}L=new sa({individualShift:[{box:c,shift:p,marginLeft:this.isExtensibleSymbol&&a.italic?-a.italic:0},{box:l,shift:-m}]}).wrap(n)}else c&&!l?(p=Math.max(p,n.metrics.sub1,c.height-.3448),L=new sa({shift:p,children:[{box:c,marginRight:b,marginLeft:this.isCharacterBox()?-(null!=(i=a.italic)?i:0):0}]})):!c&&l&&(m=Math.max(m,f,l.depth+.10775),L=new sa({shift:-m,children:[{box:l,marginRight:b}]}),L.wrap(n));let N=new Ht(L,{classes:"msubsup"+(this.isSelected?" ML__selected":"")});return this.caret&&(N.caret=this.caret),new Ht([a,N],{type:o.type})}attachLimits(n,o){var t;let i=this.superscript?vl.createBox(new pi(n,this.style,"superscript"),this.superscript,{newList:!0}):null,a=this.subscript?vl.createBox(new pi(n,this.style,"subscript"),this.subscript,{newList:!0}):null;return i||a?function rY(n,o){var t,i,a,r,s;let l=n.metrics,c=new Ht(o.base),u=null!=(t=o.baseShift)?t:0,m=null!=(i=o.slant)?i:0,p=0,f=0;o.above&&(p=null!=(a=o.aboveShift)?a:Math.max(l.bigOpSpacing1,l.bigOpSpacing3-o.above.depth)),o.below&&(f=null!=(r=o.belowShift)?r:Math.max(l.bigOpSpacing2,l.bigOpSpacing4-o.below.height));let b=null;return b=o.below&&o.above?new sa({bottom:l.bigOpSpacing5+o.below.height+o.below.depth+f+c.depth+u,children:[l.bigOpSpacing5,{box:o.below,marginLeft:-m,classes:["ML__center"]},f,{box:c,classes:["ML__center"]},p,{box:o.above,marginLeft:m,classes:["ML__center"]},l.bigOpSpacing5]}).wrap(n):o.below&&!o.above?new sa({top:c.height-u,children:[l.bigOpSpacing5,{box:o.below,marginLeft:-m,classes:["ML__center"]},f,{box:c,classes:["ML__center"]}]}).wrap(n):!o.below&&o.above?new sa({bottom:c.depth+u,children:[{box:c,classes:["ML__center"]},p,{box:o.above,marginLeft:m,classes:["ML__center"]},l.bigOpSpacing5]}).wrap(n):new sa({bottom:c.depth+u,children:[{box:c},l.bigOpSpacing5]}).wrap(n),new Ht(b,{type:null!=(s=o.type)?s:"mop"})}(n,mi(Et({},o),{above:i,below:a,type:null!=(t=o?.type)?t:"mop"})):o.base.wrap(n)}bind(n,o){if(!o||n.isPhantom||"\u200b"===this.value)return o;let t=this.parent;for(;t&&!t.captureSelection;)t=t.parent;return null!=t&&t.captureSelection||(this.id||(this.id=n.makeID()),o.atomID=this.id),o}createMathfieldBox(n,o,t){let a=new pY(t,o,{type:"mathfield",mode:this.mode,maxFontSize:n.scalingFactor,style:mi(Et({variant:"normal"},this.style),{letterShapeStyle:n.letterShapeStyle,fontSize:Math.max(1,n.size+n.mathstyle.sizeDelta)}),classes:""});return n.isTight&&(a.isTight=!0),("math"!==this.mode||"main"===this.style.variant)&&(a.italic=0),a.right=a.italic,this.bind(n,a),gd(a,{type:"mord"})}createBox(n,o){var t,i,a;let r=null!=(t=this.value)?t:this.body,s=function WG(n){return VG.includes(n)}(this.type)?this.type:void 0,l=null!=(i=o?.classes)?i:"";"text"===this.mode&&(l+=" ML__text");let c="string"==typeof r||void 0===r?new Ht(r??null,{type:s,mode:this.mode,maxFontSize:n.scalingFactor,style:mi(Et({variant:"normal"},this.style),{letterShapeStyle:n.letterShapeStyle,fontSize:Math.max(1,n.size+n.mathstyle.sizeDelta)}),classes:l,newList:o?.newList}):null!=(a=vl.createBox(n,r,{type:s,mode:this.mode,style:this.style,classes:l,newList:o?.newList}))?a:new Ht(null);return n.isTight&&(c.isTight=!0),("math"!==this.mode||"main"===this.style.variant)&&(c.italic=0),c.right=c.italic,this.bind(n,c),this.caret&&!this.superscript&&!this.subscript&&(c.caret=this.caret),c}isDigit(){var n;return"mord"===this.type&&this.value?/^[\d,.]$/.test(this.value):"group"===this.type&&2===(null==(n=this.body)?void 0:n.length)&&"first"===this.body[0].type&&","===this.body[1].value}asDigit(){var n;return"mord"===this.type&&this.value&&/^[\d,.]$/.test(this.value)?this.value:"group"===this.type&&2===(null==(n=this.body)?void 0:n.length)&&"first"===this.body[0].type&&","===this.body[1].value?".":""}},kt=vl;function dh(n,o){if(!n||0===n.length)return"";if("first"===n[0].type){if(1===n.length)return"";n=n.slice(1)}return 0===n.length?"":Bo($s(n,"cssClass").map(t=>Bo($s(t,"color").map(i=>Bo(function $G(n){let o=[],t=[],i="NONE";for(let a of n)"first"!==a.type&&(a.mode!==i?(t.length>0&&o.push(t),t=[a],i=a.mode):t.push(a));return t.length>0&&o.push(t),o}(i).map(a=>fd.serialize(a,o)))))))}function E2(n,o,t){var i,a,r,s,l;function c(L){return"text"===L.mode}if(!o||0===o.length)return null;let b,u=new pi(n,t?.style),m=!(null!=(i=u.atomIdsSettings)&&i.groupNumbers),p=[],f=null!=(a=t?.newList)&&a;if(1===o.length){let L=o[0],N=L.render(u,{newList:f});N&&(m&&L.isSelected&&N.selected(!0),p=[N])}else{let L="",N=!0;for(let R of o){null!=(r=u.atomIdsSettings)&&r.groupNumbers&&L&&(N&&R.isDigit()||!N&&c(R))&&(u.atomIdsSettings.overrideID=L);let j=R.render(u,{newList:f});u.atomIdsSettings&&(u.atomIdsSettings.overrideID=void 0),j&&(f="group"===R.type&&!R.boxType,null!=(s=u.atomIdsSettings)&&s.groupNumbers&&((R.isDigit()||c(R))&&(!L||N!==R.isDigit())&&(N=R.isDigit(),L=null!=(l=R.id)?l:""),L&&(!(R.isDigit()||c(R))||!R.hasEmptyBranch("superscript")||!R.hasEmptyBranch("subscript"))&&(L="")),m&&R.isSelected&&j.selected(!0),p.push(j))}}return 0===p.length?null:(t||u.isTight||p.length>1?(b=new Ht(p,Et({isTight:u.isTight},t??{})),b.isSelected=p.every(L=>L.isSelected)):b=p[0],b.wrap(u).wrap(n))}kt.customSerializer={};var A_=class extends kt{constructor(n,o,t,i){super("accent",t,{command:n,style:i.style}),i.accentChar?this.accent=i.accentChar:this.svgAccent=i?.svgAccent,this.body=o,this.skipBoundary=!0}static fromJson(n,o){return new A_(n.command,n.body,o,{accentChar:n.accentChar,svgAccent:n.svgAccent,style:n.style})}toJson(){return mi(Et({},super.toJson()),{accentChar:this.accent,svgAccent:this.svgAccent})}render(n){var o;let t=new pi(n,this.style,"cramp"),i=null!=(o=kt.createBox(t,this.body))?o:new Ht(null),a=0;!this.hasEmptyBranch("body")&&2===this.body.length&&this.body[1].isCharacterBox()&&(a=i.skew);let s,r=Math.min(i.height,wm);if(this.svgAccent)s=u1(this.svgAccent),r=t.metrics.bigOpSpacing1-r;else if(this.accent){let c=new Ht(this.accent,{fontFamily:"Main-Regular"});c.italic=0;let u=8407===this.accent?" ML__accent-vec":"";s=new Ht(new Ht(c),{classes:"ML__accent-body"+u})}s=new sa({shift:0,children:[{box:new Ht(i)},-r,{box:s,marginLeft:i.left+2*a,classes:["ML__center"]}]});let l=new Ht(s,{newList:!0,type:"mord"});return this.caret&&(l.caret=this.caret),this.bind(t,l.wrap(t)),this.attachSupsub(t,{base:l})}},__={"(":")","{":"}","[":"]","|":"|","\\lbrace":"\\rbrace","\\lparen":"\\rparen","\\{":"\\}","\\langle":"\\rangle","\\lfloor":"\\rfloor","\\lceil":"\\rceil","\\vert":"\\vert","\\lvert":"\\rvert","\\Vert":"\\Vert","\\lVert":"\\rVert","\\lbrack":"\\rbrack","\\ulcorner":"\\urcorner","\\llcorner":"\\lrcorner","\\lgroup":"\\rgroup","\\lmoustache":"\\rmoustache"},ky=Object.fromEntries(Object.entries(__).map(([n,o])=>[o,n]));function h1(n){var o;return null!=(o={"[":91,"]":93,"(":40,")":41,"\\mid":8739,"|":8739,"\u2223":8739,"\u2225":8741,"\\|":8739,"\\{":123,"\\}":125,"\\lbrace":123,"\\rbrace":125,"\\lparen":40,"\\rparen":41,"\\lbrack":91,"\\rbrack":93,"\\vert":8739,"\\lvert":8739,"\\mvert":8739,"\\rvert":8739,"\\Vert":8741,"\\lVert":8741,"\\mVert":8741,"\\rVert":8741,"\\parallel":8741,"\\shortparallel":8741,"\\langle":10216,"\\rangle":10217,"\\lfloor":8970,"\\rfloor":8971,"\\lceil":8968,"\\rceil":8969,"\\ulcorner":9484,"\\urcorner":9488,"\\llcorner":9492,"\\lrcorner":9496,"\\lgroup":10222,"\\rgroup":10223,"\\lmoustache":9136,"\\rmoustache":9137,"\\surd":8730}[n])?o:n.codePointAt(0)}function Sy(n,o,t,i,a){let r=new pi(i,a?.style,"textstyle"),s=new Ht(h1(n),{fontFamily:"Size"+o+"-Regular",classes:"ML__delim-size"+o}).wrap(r);return t&&s.setTop((1-r.scalingFactor)*bl),s}function Ey(n,o,t,i,a){var r;let s,l,c,u;s=c=u=h1(n),l=null;let m="Size1-Regular";"\\vert"===n||"\\lvert"===n||"\\rvert"===n||"\\mvert"===n||"\\mid"===n?c=s=u=8739:"\\Vert"===n||"\\lVert"===n||"\\rVert"===n||"\\mVert"===n||"\\|"===n?c=s=u=8741:"\\uparrow"===n?c=u=9168:"\\Uparrow"===n?c=u=8214:"\\downarrow"===n?s=c=9168:"\\Downarrow"===n?s=c=8214:"\\updownarrow"===n?(s=8593,c=9168,u=8595):"\\Updownarrow"===n?(s=8657,c=8214,u=8659):"["===n||"\\lbrack"===n?(s=9121,c=9122,u=9123,m="Size4-Regular"):"]"===n||"\\rbrack"===n?(s=9124,c=9125,u=9126,m="Size4-Regular"):"\\lfloor"===n||"\u230a"===n?(c=s=9122,u=9123,m="Size4-Regular"):"\\lceil"===n||"\u2308"===n?(s=9121,c=u=9122,m="Size4-Regular"):"\\rfloor"===n||"\u230b"===n?(c=s=9125,u=9126,m="Size4-Regular"):"\\rceil"===n||"\u2309"===n?(s=9124,c=u=9125,m="Size4-Regular"):"("===n||"\\lparen"===n?(s=9115,c=9116,u=9117,m="Size4-Regular"):")"===n||"\\rparen"===n?(s=9118,c=9119,u=9120,m="Size4-Regular"):"\\{"===n||"\\lbrace"===n?(s=9127,l=9128,u=9129,c=9130,m="Size4-Regular"):"\\}"===n||"\\rbrace"===n?(s=9131,l=9132,u=9133,c=9130,m="Size4-Regular"):"\\lgroup"===n||"\u27ee"===n?(s=9127,u=9129,c=9130,m="Size4-Regular"):"\\rgroup"===n||"\u27ef"===n?(s=9131,u=9133,c=9130,m="Size4-Regular"):"\\lmoustache"===n||"\u23b0"===n?(s=9127,u=9133,c=9130,m="Size4-Regular"):"\\rmoustache"===n||"\u23b1"===n?(s=9131,u=9129,c=9130,m="Size4-Regular"):"\\surd"===n?(s=57345,u=9143,c=57344,m="Size4-Regular"):"\\ulcorner"===n?(s=9484,c=u=32):"\\urcorner"===n?(s=9488,c=u=32):"\\llcorner"===n?(u=9492,c=s=32):"\\lrcorner"===n&&(s=9496,c=s=32);let p=Cm(s,m),f=p.height+p.depth,b=Cm(c,m),L=b.height+b.depth,N=Cm(u,m),R=N.height+N.depth,j=0,G=1;if(null!==l){let Be=Cm(l,m);j=Be.height+Be.depth,G=2}let ae=f+R+j,W=Math.max(0,Math.ceil((o-ae)/(G*L))),ve=bl;t&&(ve*=i.scalingFactor);let ce=(ae+W*G*L)/2-ve,te=.008,Se=[];Se.push({box:new Ht(u,{fontFamily:m})}),Se.push(-te);let Ze=new Ht(c,{fontFamily:m});if(null===l)for(let Be=0;Be<W;Be++)Se.push({box:Ze});else{for(let Be=0;Be<W;Be++)Se.push({box:Ze});Se.push(-te),Se.push({box:new Ht(l,{fontFamily:m})}),Se.push(-te);for(let Be=0;Be<W;Be++)Se.push({box:Ze})}Se.push(-te),Se.push({box:new Ht(s,{fontFamily:m})});let se="";"Size1-Regular"===m?se=" delim-size1":"Size4-Regular"===m&&(se=" delim-size4");let pe=new sa({bottom:ce,children:Se},{classes:se});return new Ht(pe,mi(Et({},a??{}),{classes:(null!=(r=a?.classes)?r:"")+" ML__delim-mult"}))}var Oy=new Set(["(",")","\\lparen","\\rparen","[","]","\\lbrack","\\rbrack","\\{","\\}","\\lbrace","\\rbrace","\\lfloor","\\rfloor","\\lceil","\\rceil","\\surd","\u230a","\u230b","\u2308","\u2309"]),_Y=new Set(["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\mvert","\\mid","\\lgroup","\\rgroup","\\lmoustache","\\rmoustache","\u27ee","\u27ef","\u23b0","\u23b1"]),Iy=new Set(["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"]),fY=[0,1.2,1.8,2.4,3],xY=[{type:"small",mathstyle:"scriptscriptstyle"},{type:"small",mathstyle:"scriptstyle"},{type:"small",mathstyle:"textstyle"},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],bY=[{type:"small",mathstyle:"scriptscriptstyle"},{type:"small",mathstyle:"scriptscriptstyle"},{type:"small",mathstyle:"textstyle"},{type:"stack"}],vY=[{type:"small",mathstyle:"scriptscriptstyle"},{type:"small",mathstyle:"scriptstyle"},{type:"small",mathstyle:"textstyle"},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}];function wY(n){return"small"===n.type?"Main-Regular":"large"===n.type?"Size"+n.size+"-Regular":"Size4-Regular"}function A1(n,o,t,i,a,r){var s;if(!o||0===o.length||"."===o)return Sm(a,n,n);let l;"<"===o||"\\lt"===o?o="\\langle":(">"===o||"\\gt"===o)&&(o="\\rangle"),l=Iy.has(o)?xY:Oy.has(o)?vY:bY;let c=function yY(n,o,t,i){for(let r={"-4":0,"-3":1,0:2}[i.mathstyle.sizeDelta];r<t.length&&"stack"!==t[r].type;r++){let s=Cm(n,wY(t[r]));if(s.defaultMetrics)return{type:"small",mathstyle:"scriptstyle"};let l=s.height+s.depth;if("small"===t[r].type&&("scriptscriptstyle"===t[r].mathstyle?l*=v2[Math.max(1,i.size-2)]:"scriptstyle"===t[r].mathstyle&&(l*=v2[Math.max(1,i.size-1)])),l>o)return t[r]}return t[t.length-1]}(h1(o),t,l,a),u=new pi(a,r?.style,c.mathstyle);return"small"===c.type?function AY(n,o,t,i){let a=new Ht(h1(n),{fontFamily:"Main-Regular"}).wrap(o,i);return t&&a.setTop((1-o.scalingFactor)*bl),a}(o,u,i,{type:n,classes:"ML__small-delim "+(null!=(s=r?.classes)?s:"")}):"large"===c.type?Sy(o,c.size,i,u,mi(Et({},r),{type:n})):Ey(o,t,i,u,mi(Et({},r),{type:n}))}function f_(n,o,t,i,a,r){if("."===o)return Sm(a,n,r?.classes);let s=bl*a.scalingFactor,u=Math.max(t-s,i+s);return A1(n,o,Math.max(u/500*901,2*u-.5),!0,a,r)}function Sm(n,o,t){let i=new pi(n,void 0,"textstyle");return new Ht(null,{classes:" nulldelimiter "+(t??""),type:o}).wrap(i)}var _s=class extends kt{constructor(n,o,t){var i,a,r,s;super("overunder",o,{command:n,serialize:t.serialize,style:t.style}),this.skipBoundary=null==(i=t.skipBoundary)||i,this.subsupPlacement=t.supsubPlacement,this.body=t.body,this.svgAbove=t.svgAbove,this.svgBelow=t.svgBelow,this.svgBody=t.svgBody,this.above=t.above,this.below=t.below,this.boxType=null!=(a=t.boxType)?a:"mord",this.paddedBody=null!=(r=t.paddedBody)&&r,this.paddedLabels=null!=(s=t.paddedLabels)&&s}static fromJson(n,o){return new _s(n.command,o,n)}toJson(){let n={};return this.skipBoundary||(n.skipBoundary=!1),this.subsupPlacement&&(n.subsupPlacement=this.subsupPlacement),this.svgAbove&&(n.svgAbove=this.svgAbove),this.svgBelow&&(n.svgBelow=this.svgBelow),this.svgBody&&(n.svgBody=this.svgBody),"mord"!==this.boxType&&(n.boxType=this.boxType),this.paddedBody&&(n.paddedBody=!0),this.paddedLabels&&(n.paddedLabels=!0),Et(Et({},super.toJson()),n)}render(n){let o=this.svgBody?u1(this.svgBody):kt.createBox(n,this.body,{newList:!0}),t=new pi(n,this.style,"scriptstyle"),i=null;this.svgAbove?i=u1(this.svgAbove):this.above&&(i=kt.createBox(t,this.above,{newList:!0}));let a=null;this.svgBelow?a=u1(this.svgBelow):this.below&&(a=kt.createBox(t,this.below,{newList:!0})),this.paddedBody&&(o=new Ht([Sm(n,"mopen"),o,Sm(n,"mclose")],{newList:!0}));let r=function CY(n,o){if(!o.base)return null;if(!o.above&&!o.below){let l=new Ht(o.base,{type:o.type});return l.setStyle("position","relative"),l}let t=0;o.above&&(t=-o.above.depth+n.metrics.bigOpSpacing2);let i=null,a=o.base,s=["ML__center"];return o.paddedAboveBelow&&s.push("ML__label_padding"),o.below&&o.above?i=new sa({bottom:n.metrics.bigOpSpacing5+o.below.height+o.below.depth+a.depth+0,children:[n.metrics.bigOpSpacing5,{box:o.below,classes:s},{box:a,classes:["ML__center"]},t,{box:o.above,classes:s},n.metrics.bigOpSpacing5]}):o.below?i=new sa({top:a.height-0,children:[n.metrics.bigOpSpacing5,{box:o.below,classes:s},{box:a,classes:["ML__center"]}]}):o.above&&(i=new sa({bottom:a.depth+0,children:[{box:a,classes:["ML__center"]},t,{box:o.above,classes:s},n.metrics.bigOpSpacing5]})),new Ht(i,{type:o.type})}(n,{base:o,above:i,below:a,type:"mbin"===this.boxType||"mrel"===this.boxType?this.boxType:"mord",paddedAboveBelow:this.paddedLabels});return r?(r="over-under"===this.subsupPlacement?this.attachLimits(n,{base:r,type:r.type}):this.attachSupsub(n,{base:r}),this.caret&&(r.caret=this.caret),this.bind(n,r)):null}},Oa=class extends kt{constructor(n,o,t){var i,r,s;super("group",o,{command:t?.command,mode:null!=(i=t?.mode)?i:"math",serialize:t?.serialize,style:t?.style}),this.body=n,this.mathstyleName=t?.mathstyleName,this.latexOpen=t?.latexOpen,this.latexClose=t?.latexClose,this.cssId=t?.cssId,this.htmlData=t?.htmlData,this.htmlStyle=t?.htmlStyle,this.customClass=t?.customClass,this.boxType=t?.boxType,this.skipBoundary=!0,this.captureSelection=null!=(r=t?.captureSelection)&&r,this.changeMode=null!=(s=t?.changeMode)&&s,this.displayContainsHighlight=!1,n&&1===n.length&&","===n[0].command&&(this.captureSelection=!0)}static fromJson(n,o){return new Oa(n.body,o,n)}toJson(){let n={};return this.mathstyleName&&(n.mathstyleName=this.mathstyleName),this.latexOpen&&(n.latexOpen=this.latexOpen),this.latexClose&&(n.latexClose=this.latexClose),this.cssId&&(n.cssId=this.cssId),this.htmlData&&(n.htmlData=this.htmlData),this.htmlStyle&&(n.htmlStyle=this.htmlStyle),this.customClass&&(n.customClass=this.customClass),this.boxType&&(n.boxType=this.boxType),this.captureSelection&&(n.captureSelection=!0),this.changeMode&&(n.changeMode=!0),Et(Et({},super.toJson()),n)}render(n){let o=new pi(n,this.style,this.mathstyleName),t=kt.createBox(o,this.body,{type:this.boxType,classes:this.customClass,mode:this.mode,style:{backgroundColor:this.style.backgroundColor},newList:!this.boxType});return t?(this.cssId&&(t.cssId=this.cssId),this.htmlData&&(t.htmlData=this.htmlData),this.htmlStyle&&(t.htmlStyle=this.htmlStyle),this.caret&&(t.caret=this.caret),this.bind(n,t)):null}serialize(n){let o=this.bodyToLatex(n);return"string"==typeof this.latexOpen&&(o=this.latexOpen+o+this.latexClose),this.htmlData&&(o=`\\htmlData{${this.htmlData}}{${o}}`),this.htmlStyle&&(o=`\\htmlStyle{${this.htmlStyle}}{${o}}`),this.customClass&&(o=`\\class{${this.customClass}}{${o}}`),this.cssId&&(o=`\\cssId{${this.cssId}}{${o}}`),o}},Em=class extends kt{constructor(n,o,t,i){super("spacing",t,{command:n,style:o}),this.width=i}static fromJson(n,o){return new Em(n.command,n.style,o,n.width)}toJson(){let n={};return this.width&&(n.width=this.width),Et(Et({},super.toJson()),n)}render(n){var o;let t;if(this.width)t=new Ht(null,{classes:"mspace"}),t.left=function KG(n){return Cc(n.glue)}(this.width);else{let i=null!=(o={"\\qquad":"qquad","\\quad":"quad","\\enspace":"enspace","\\;":"thickspace","\\:":"mediumspace","\\,":"thinspace","\\!":"negativethinspace"}[this.command])?o:"mediumspace";t=new Ht(null,{classes:i})}return t=this.bind(n,t),this.caret&&(t.caret=this.caret),t}serialize(n){var o;let t=null!=(o=this.command)?o:"";return"\\hspace"===this.command||"\\hspace*"===this.command?Number.isFinite(this.width)?t+=`{${this.width}em'}`:t+="{0pt}":Number.isFinite(this.width)&&(t+=` ${this.width}em`),t}},Wa=class extends kt{constructor(n,o,t,i){super("leftright",t,{style:i.style,displayContainsHighlight:!0}),this.variant=n,this.body=o,this.leftDelim=i.leftDelim,this.rightDelim=i.rightDelim}static fromJson(n,o){var t;return new Wa(null!=(t=n.variant)?t:"",n.body,o,n)}toJson(){let n=super.toJson();return this.variant&&(n.variant=this.variant),this.leftDelim&&(n.leftDelim=this.leftDelim),this.rightDelim&&(n.rightDelim=this.rightDelim),n}serialize(n){var o,t;let i=this.matchingRightDelim();return Bo("left...right"===this.variant?["\\left"+(null!=(o=this.leftDelim)?o:"."),this.bodyToLatex(n),"\\right"+i]:"mleft...mright"===this.variant?["\\mleft"+(null!=(t=this.leftDelim)?t:"."),this.bodyToLatex(n),"\\mright"+i]:[this.leftDelim&&"."!==this.leftDelim?this.leftDelim:"",this.bodyToLatex(n),i])}matchingRightDelim(){var n,o;if(this.rightDelim&&"?"!==this.rightDelim)return this.rightDelim;let t=null!=(n=this.leftDelim)?n:".";return null!=(o=__[t])?o:t}render(n){var o,t,i;let a=new pi(n,this.style),r=new pi(n,this.style,"textstyle"),s=null!=(o=kt.createBox(a,this.body,{newList:!0}))?o:new Ht(null,{newList:!0}),l=s.height/r.scalingFactor,c=s.depth/r.scalingFactor,u=[];if(this.leftDelim&&u.push(this.bind(r,f_("mopen",this.leftDelim,l,c,r,{classes:"ML__open"+(this.containsCaret?" ML__contains-caret":""),mode:this.mode,style:this.style}))),s){if(s.children)for(let f=0;f<s.children.length;f++){let b=s.children[f];if(b.delim){let L=b.caret;s.children[f]=this.bind(a,f_("minner",b.delim,l,c,a)),s.children[f].caret=L}}u.push(s)}if(this.rightDelim){let f=this.containsCaret?" ML__contains-caret":"",b=this.rightDelim;"?"===b&&(this.context.smartFence?(b=this.matchingRightDelim(),f+=" ML__smart-fence__close"):b="."),u.push(this.bind(r,f_("mclose",b,l,c,r,{classes:f+" ML__close",mode:this.mode,style:this.style})))}let m=null!=(i="mleft...mright"===this.variant||(null==(t=this.leftSibling)?void 0:t.isFunction))&&i,p=new Ht(u,{type:m?"mclose":"minner",classes:"left-right"});return this.caret&&(p.caret=this.caret),this.bind(a,p.wrap(a))}},g_=class extends kt{constructor(n,o){super("msubsup",n,{style:o?.style})}static fromJson(n,o){let t=new g_(o,n);for(let i of Tm)n[i]&&t.setChildren(n[i],i);return t}toJson(){return super.toJson()}render(n){var o;let t=this.leftSibling,i=new pi(n,{isPhantom:!0}),a=null!=(o=t.render(i))?o:new Ht(null),r=new Ht(null,{height:a.height,depth:a.depth});return this.attachSupsub(n,{base:r,isCharacterBox:t.isCharacterBox(),type:"supsub"})}serialize(n){return this.supsubToLatex(n)}},Ro=class extends kt{constructor(n,o){var t;let i=o?.value||n.placeholderSymbol;super("placeholder",n,{mode:null!=(t=o?.mode)?t:"math",style:o?.style,value:i,command:"\\placeholder"}),this.captureSelection=!0,this.placeholderId=o?.placeholderId,null!=o&&o.default&&(this.defaultValue=o?.default)}static fromJson(n,o){return new Ro(o,n)}toJson(){let n=super.toJson();return this.placeholderId&&(n.placeholderId=this.placeholderId),this.value===this.context.placeholderSymbol&&delete n.value,this.defaultValue&&(n.defaultValue=this.defaultValue.map(o=>o.toJson())),n}render(n){if("function"==typeof n.renderPlaceholder)return n.renderPlaceholder(n,this);let o="";return this.caret&&(o+="ML__placeholder-selected "),this.isSelected&&(o+=" ML__selected "),this.createBox(n,{classes:o})}serialize(n){var o;let t=null!=(o=this.value)?o:"";return t===this.context.placeholderSymbol&&(t=""),`\\placeholder${this.placeholderId?`[${this.placeholderId}]`:""}${this.defaultValue?`[${kt.serialize(this.defaultValue,n)}]`:""}{${t}}`}},O2=class extends kt{constructor(n,o){super("error",o,{value:n,command:n,mode:"math"}),this.verbatimLatex=n}static fromJson(n,o){return new O2(n.command,o)}toJson(){return super.toJson()}render(n){let o=this.createBox(n,{classes:"ML__error"});return this.caret&&(o.caret=this.caret),o}},I2=class extends kt{constructor(n,o,t){var i,a;super("macro",o,{command:n}),this.body=t.body,this.captureSelection=void 0===t.captureSelection?!t.args:t.captureSelection,this.macroArgs=null!=(i=t.args)?i:"",this.expand=null!=(a=t.expand)&&a}static fromJson(n,o){return new I2(n.command,o,n)}toJson(){let n=super.toJson();return this.expand&&(n.expand=!0),void 0!==this.captureSelection&&(n.captureSelection=this.captureSelection),this.macroArgs&&(n.args=this.macroArgs),n}serialize(n){return n.expandMacro&&this.expand?this.bodyToLatex(n):this.command+this.macroArgs}render(n){let o=kt.createBox(n,this.body);return o?(this.caret&&(o.caret=this.caret),this.bind(n,o)):null}},mh=class extends kt{constructor(n,o,t,i){super("text",i,{command:n,mode:"text",displayContainsHighlight:!0}),this.value=o,this.verbatimLatex=o,this.applyStyle(t)}static fromJson(n,o){return new mh(n.command,n.value,n.style,o)}toJson(){return super.toJson()}render(n){let o=this.createBox(n);return this.caret&&(o.caret=this.caret),o}serialize(n){var o;return null!=(o=this.verbatimLatex)?o:o1("text",this.value.codePointAt(0))}};function _1(n){return!/^<({|}|\$|\$\$|space)>$/.test(n)}var f1=class{constructor(n,o,t){var i,a,r,s,l,c;this.index=0,this.endCount=0,this.tokens=n,this.context=o,this.errors=[],this.args=null!=(i=t.args)?i:null,this.smartFence=null!=(a=t.smartFence)?a:o.smartFence,this._currentParsingContext={parent:void 0,mathlist:[],style:null!=(r=t.style)?r:{},parseMode:null!=(s=t.parseMode)?s:"math",mathstyle:null!=(l=t.mathstyle)?l:"displaystyle",registers:null!=(c=t.registers)?c:o.registers,tabular:!1}}get currentContext(){return this._currentParsingContext}get rootContext(){let n=this._currentParsingContext;for(;n.parent;)n=n.parent;return n}beginContext(n){var o,t,i;let a={parent:this.currentContext,mathlist:[],style:Et({},this.currentContext.style),parseMode:null!=(o=n?.mode)?o:this.currentContext.parseMode,mathstyle:null!=(t=n?.mathstyle)?t:this.currentContext.mathstyle,registers:null,tabular:null!=(i=n?.tabular)&&i};this._currentParsingContext=a}endContext(){this._currentParsingContext=this._currentParsingContext.parent}onError(n){this.errors.push(Et({before:h_(this.tokens.slice(this.index,this.index+10)),after:h_(this.tokens.slice(Math.max(0,this.index-10),this.index))},n))}get mathlist(){return this.currentContext.mathlist}set mathlist(n){this.currentContext.mathlist=n}get parseMode(){return this.currentContext.parseMode}set parseMode(n){this.currentContext.parseMode=n}get tabularMode(){return this.currentContext.tabular}get style(){let n=this.currentContext;for(;n;){if(n.style)return n.style;n=n.parent}return{}}set style(n){this.currentContext.style=n}getRegister(n){var o,t,i;if(n.startsWith("global "))return null!=(t=null==(o=this.rootContext.registers)?void 0:o[n.slice(7)])?t:0;let a=this.currentContext;for(;a;){if(null!=(i=a.registers)&&i[n])return a.registers[n];a=a.parent}return 0}setRegister(n,o){var t;if(n.startsWith("global ")){n=n.slice(7);let i=this.currentContext;for(;i;)null!=(t=i.registers)&&t[n]&&delete i.registers[n],i=i.parent;this.rootContext.registers[n]=o}else this.currentContext.registers||(this.currentContext.registers={}),this.currentContext.registers[n]=o}end(){return this.endCount++,this.index>=this.tokens.length||this.endCount>1e3}get(){return this.endCount=0,this.index<this.tokens.length?this.tokens[this.index++]:""}peek(){return this.tokens[this.index]}match(n){return this.tokens[this.index]===n&&(this.index++,!0)}lastSubsupAtom(){let n;return this.mathlist.length>0&&(n=this.mathlist[this.mathlist.length-1],"msubsup"===n.type||void 0!==n.subsupPlacement)||(n=new g_(this.context,{style:this.style}),this.mathlist.push(n)),n}hasPattern(n){return n.test(this.tokens[this.index])}hasInfixCommand(){var n;let{index:o}=this;if(o<this.tokens.length&&this.tokens[o].startsWith("\\")){let t=this.context.getDefinition(this.tokens[o],this.parseMode);return!(!t||"symbol"===t.definitionType||t.ifMode&&!t.ifMode.includes(this.parseMode))&&null!=(n=t.infix)&&n}return!1}matchColumnSeparator(){let{index:n}=this;return!(!this.tabularMode||"&"!==this.tokens[n]||(this.index++,0))}matchRowSeparator(){let{index:n}=this;return!(!this.tabularMode||"\\\\"!==this.tokens[n]&&"\\cr"!==this.tokens[n]||(this.index++,0))}placeholder(){var n;let o=null==(n=this.args)?void 0:n.call(this,"?");return o?kr(o,this.context,{parseMode:this.parseMode,mathstyle:"textstyle"}):[new Ro(this.context,{mode:this.parseMode,style:this.style})]}matchWhitespace(){let n=!1;for(;this.match("<space>");)n=!0;return n}skipUntilToken(n){let o=this.tokens[this.index];for(;o&&o!==n;)o=this.tokens[++this.index];o===n&&this.index++}skipFiller(){let n=!1;do{let o=this.matchWhitespace(),t=this.match("\\relax");n=!o&&!t}while(!n)}matchKeyword(n){let o=this.index,t=this.end(),i="";for(;!t;){let r=this.get();_1(r)?(i+=r,t=this.end()||i.length>=n.length):t=!0}let a=n.toUpperCase()===i.toUpperCase();return a||(this.index=o),a}scanString(){let n="";for(;!this.end();)if(this.match("<space>"))n+=" ";else{let o=this.peek();if("]"===o)break;if(_1(o))n+=this.get();else{if(!o.startsWith("\\"))break;this.onError({code:"unbalanced-braces"}),n+=this.get()}}return n}scanBalancedString(){let n="",o=this.end(),t=1;for(;!o;){if(this.match("<space>"))n+=" ";else{let i=this.get();"<{>"===i?(n+="{",t+=1):"<}>"===i?(t-=1,t>0?n+="}":this.index-=1):n+="<$>"===i?"$":"<$$>"===i?"$$":i}o=0===t||this.end()}return n}matchLiteralArg(){var n;let o="";if(this.match("<{>")){let t=1;for(;t>0&&!this.end();){let i=this.get();"<}>"===i?(t-=1,t>0&&(o+="}")):"<{>"===i?(t+=1,o+="{"):o+=null!=(n={"<space>":" ","<$$>":"$$","<$>":"$"}[i])?n:i}}return o}scanNumber(n=!0){var o,t;let i=!1,a=this.peek();for(;"<space>"===a||"+"===a||"-"===a;)this.get(),"-"===a&&(i=!i),a=this.peek();n=!!n;let r=10,s=/\d/;if(this.match("'"))r=8,s=/[0-7]/,n=!0;else if(this.match('"')||this.match("x"))r=16,s=/[\dA-F]/,n=!0;else if(this.match("`"))return a=this.get(),a?a.startsWith("\\")&&2===a.length?(i?-1:1)*(null!=(o=a.codePointAt(1))?o:0):(i?-1:1)*(null!=(t=a.codePointAt(0))?t:0):null;let l="";for(;this.hasPattern(s);)l+=this.get();if(!n&&(this.match(".")||this.match(",")))for(l+=".";this.hasPattern(s);)l+=this.get();let c=n?Number.parseInt(l,r):Number.parseFloat(l);return Number.isNaN(c)?null:i?-c:c}scanDimen(){var n,o,t;let a,i=this.scanNumber(!1);if(null===i){if(null==(n=this.peek())||!n.startsWith("\\"))return null;i=1}return this.matchWhitespace(),this.matchKeyword("pt")?a={dimension:i,unit:"pt"}:this.matchKeyword("mm")?a={dimension:i,unit:"mm"}:this.matchKeyword("cm")?a={dimension:i,unit:"cm"}:this.matchKeyword("ex")?a={dimension:i,unit:"ex"}:this.matchKeyword("px")?a={dimension:i,unit:"px"}:this.matchKeyword("em")?a={dimension:i,unit:"em"}:this.matchKeyword("bp")?a={dimension:i,unit:"bp"}:this.matchKeyword("dd")?a={dimension:i,unit:"dd"}:this.matchKeyword("pc")?a={dimension:i,unit:"pc"}:this.matchKeyword("in")?a={dimension:i,unit:"in"}:this.matchKeyword("mu")?a={dimension:i,unit:"mu"}:null!=(o=this.peek())&&o.startsWith("\\")?(a=null!=(t=g1(this.getRegister(this.get().slice(1)),this.context))?t:{dimension:0},a.dimension*=i):(this.match("\\relax")||this.onError({code:"missing-unit"}),a={dimension:i,unit:"pt"}),a}scanGlue(){let n=this.scanDimen();if(null===n)return null;let o={glue:n};return this.matchWhitespace(),this.match("\\relax")||(this.matchKeyword("plus")&&this.scanDimen(),this.matchWhitespace(),this.match("\\relax"))||(this.matchWhitespace(),this.matchKeyword("minus")&&this.scanDimen()),o}scanColspec(){this.matchWhitespace();let n=[];for(;!this.end()&&"<}>"!==this.peek()&&"]"!==this.peek();){let o=this.get();"c"===o||"r"===o||"l"===o?n.push({align:o}):"|"===o?n.push({separator:"solid"}):":"===o?n.push({separator:"dashed"}):"@"===o&&(this.match("<{>")&&(this.beginContext({mode:"math"}),n.push({gap:this.parse(t=>"<}>"===t)}),this.endContext()),this.match("<}>")||this.onError({code:"unbalanced-braces"}))}return n}parseModeSet(){let n="";if(this.match("\\(")&&(n="\\)"),!n&&this.match("\\[")&&(n="\\]"),!n)return null;this.beginContext({mode:"math",mathstyle:"\\)"===n?"textstyle":"displaystyle"});let o=new Oa(this.parse(t=>t===n),this.context,{mathstyleName:"\\)"===n?"textstyle":"displaystyle",latexOpen:"\\]"===n?"\\[":"\\(",latexClose:n,boxType:"mord"});return this.match(n)||this.onError({code:"unbalanced-mode-shift"}),this.endContext(),o.hasEmptyBranch("body")?null:o}parseModeShift(){let n="";if(this.match("<$>")&&(n="<$>"),!n&&this.match("<$$>")&&(n="<$$>"),!n)return null;this.beginContext({mode:"math",mathstyle:"textstyle"});let o=new Oa(this.parse(t=>t===n),this.context,{mathstyleName:"<$>"===n?"textstyle":"displaystyle",latexOpen:"<$>"===n?"$ ":"$$ ",latexClose:"<$>"===n?" $":" $$"});return this.match(n)||this.onError({code:"unbalanced-mode-shift"}),this.endContext(),o.hasEmptyBranch("body")?null:o}parseEnvironment(){if(!this.match("\\begin"))return null;let n=this.parseArgument("string");if(!n)return null;let o=function jG(n){var o;return null!=(o=A2[n])?o:null}(n);if(!o)return this.onError({code:"unknown-environment",arg:n}),null;let t=[];if(o.params)for(let l of o.params)if(l.isOptional)t.push(this.parseOptionalArgument(l.type));else{let c=this.parseArgument(l.type);c||this.onError({code:"missing-argument",arg:n}),t.push(c)}this.beginContext({tabular:o.tabular});let i=[],a=[],r=[],s=!1;do{if(this.end()&&(this.onError({code:"unbalanced-environment",arg:n}),s=!0),!s&&this.match("\\end")&&(this.parseArgument("string")!==n&&this.onError({code:"unbalanced-environment",arg:n}),s=!0),!s)if(this.matchColumnSeparator())r.push(this.mathlist),this.mathlist=[];else if(this.matchRowSeparator()){r.push(this.mathlist),this.mathlist=[];let l=null;this.matchWhitespace(),this.match("[")&&(l=this.scanDimen(),this.matchWhitespace(),this.match("]")),a.push(l??{dimension:0}),i.push(r),r=[]}else this.mathlist.push(...this.parse(l=>"<}>"===l||"&"===l||"\\end"===l||"\\cr"===l||"\\\\"===l))}while(!s);return r.push(this.mathlist),r.length>0&&i.push(r),this.endContext(),o.createAtom(this.context,n,i,a,t)}parse(n){this.beginContext(),n||(n=l=>"<}>"===l);let s,o="",t=null,i=[],a=null,r=this.mathlist;for(this.mathlist=[];!this.end()&&!n(this.peek());)this.hasInfixCommand()&&!o?(o=this.get(),t=this.context.getDefinition(o,"math"),t&&(i=this.parseArguments(t)[1]),a=this.mathlist,this.mathlist=[]):this.parseToken();return o?(i.unshift(this.mathlist),this.mathlist=r,a&&i.unshift(a),s=[t.createAtom(o,i,this.style,this.context)]):(s=this.mathlist,this.mathlist=r),this.endContext(),s}parseGroup(){if(!this.match("<{>"))return null;let n=new Oa(this.parse(o=>"<}>"===o),this.context,{mode:this.parseMode,latexOpen:"{",latexClose:"}"});return this.match("<}>")||this.onError({code:"unbalanced-braces"}),n}scanSmartFence(){if(this.matchWhitespace(),!this.match("("))return null;this.beginContext();let n=1;for(;!this.end()&&0!==n;)this.match("(")&&(n+=1),this.match(")")&&(n-=1),0!==n&&this.parseToken();0===n&&this.match(")");let o=new Wa("",this.mathlist,this.context,{leftDelim:"(",rightDelim:0===n?")":"?"});return this.endContext(),o}scanDelim(){this.matchWhitespace();let n=this.get();if(!n)return this.onError({code:"unexpected-end-of-string"}),null;let o=".";(n.startsWith("\\")||_1(n))&&(o=n);let t=this.context.getDefinition(o,"math");return t?"function"===t.definitionType&&t.ifMode&&!t.ifMode.includes(this.parseMode)?(this.onError({code:"unexpected-delimiter",arg:o}),null):"symbol"===t.definitionType&&("mopen"===t.type||"mclose"===t.type)||/^(\.|\?|\||<|>|\\vert|\\Vert|\\\||\\surd|\\uparrow|\\downarrow|\\Uparrow|\\Downarrow|\\updownarrow|\\Updownarrow|\\mid|\\mvert|\\mVert)$/.test(o)?o:(this.onError({code:"unexpected-delimiter",arg:o}),null):(this.onError({code:"unknown-command",arg:o}),null)}parseLeftRight(){var n;if(this.match("\\right")||this.match("\\mright"))return this.onError({code:"unbalanced-braces"}),null;let o="\\right";if(!this.match("\\left")){if(!this.match("\\mleft"))return null;o="\\mright"}let t=this.scanDelim();if(!t)return null;for(this.beginContext();!this.end()&&!this.match(o);)this.parseToken();let i=this.mathlist;this.endContext();let a=null!=(n=this.scanDelim())?n:".";return new Wa("\\right"===o?"left...right":"mleft...mright",i,this.context,{leftDelim:t,rightDelim:a,style:this.style})}parseSupSub(){if("math"!==this.parseMode)return!1;let n=this.peek();if("^"!==n&&"_"!==n&&"'"!==n)return!1;for(;"^"===n||"_"===n||"'"===n;){if(this.match("'"))this.match("'")?this.lastSubsupAtom().addChild(new kt("mord",this.context,{command:"\\doubleprime",mode:"math",value:"\u2032\u2032"}),"superscript"):this.lastSubsupAtom().addChild(new kt("mord",this.context,{command:"\\prime",mode:"math",value:"\u2032"}),"superscript");else if(this.match("^")||this.match("_")){let o=this.parseArgument("math");o?this.lastSubsupAtom().addChildren(o,"_"===n?"subscript":"superscript"):this.lastSubsupAtom().createBranch("_"===n?"subscript":"superscript")}n=this.peek()}return!0}parseLimits(){let n=this.match("\\limits"),o=!n&&this.match("\\nolimits"),t=!o&&!n&&this.match("\\displaylimits");if(!n&&!o&&!t)return!1;let i=this.mathlist.length>0?this.mathlist[this.mathlist.length-1]:null;return!(null===i||"mop"!==i.type||(n?(i.subsupPlacement="over-under",i.explicitSubsupPlacement=!0,0):o?(i.subsupPlacement="adjacent",i.explicitSubsupPlacement=!0,0):!t||(i.subsupPlacement="auto",i.explicitSubsupPlacement=!0,0)))}parseArguments(n){if(null==n||!n.params)return[void 0,[]];let o,t=[],i=n.infix?2:0;for(;i<n.params.length;){let a=n.params[i];if("rest"===a.type)t.push(this.parse(r=>"<}>"===r||"&"===r||"\\end"===r||"\\cr"===r||"\\\\"===r));else if(a.isOptional)t.push(this.parseOptionalArgument(a.type));else if(a.type.endsWith("*"))o=a.type.slice(0,-1);else{let r=this.parseArgument(a.type);if(null!==r)t.push(r);else switch(this.onError({code:"missing-argument"}),a.type){case"number":t.push(0);break;case"dimen":t.push({dimension:0,unit:"pt"});break;case"glue":t.push({glue:{dimension:0,unit:"pt"}});break;case"string":case"balanced-string":t.push("");break;case"delim":t.push(".");break;case"colspec":t.push("llllllllll");break;default:t.push(this.placeholder())}}i+=1}return[o,t]}parseArgument(n){var o,t;this.skipFiller(),"auto"===n&&(n=this.parseMode);let i=null,a="<{>"===this.peek();if(!a){if("delim"===n)return null!=(o=this.scanDelim())?o:".";if("text"===n||"math"===n){this.beginContext();let s=this.parseSimpleToken();return this.endContext(),s}}if(a&&this.get(),"text"===n||"math"===n){this.beginContext({mode:n});do{this.mathlist.push(...this.parse())}while(!this.match("<}>")&&!this.end())}else if(this.beginContext(),"string"===n?i=this.scanString():"balanced-string"===n?i=this.scanBalancedString():"number"===n?i=this.scanNumber():"colspec"===n?i=this.scanColspec():"dimen"===n?i=this.scanDimen():"glue"===n?i=this.scanGlue():"delim"===n&&(i=null!=(t=this.scanDelim())?t:"."),a&&this.skipUntilToken("<}>"),null===i)return this.endContext(),null;let r=this.mathlist;return this.endContext(),i??r}parseOptionalArgument(n){var o,t;if(n="auto"===n?this.parseMode:n,this.matchWhitespace(),!this.match("["))return null;let i=null;for(;!this.end()&&!this.match("]");)if("string"===n)i=this.scanString();else if("number"===n)i=this.scanNumber();else if("dimen"===n)i=this.scanDimen();else if("glue"===n)i=this.scanGlue();else if("colspec"===n)i=this.scanColspec();else if("bbox"===n){let a=this.scanString().toLowerCase().trim().split(/,(?![^(]*\)(?:(?:[^(]*\)){2})*[^"]*$)/),r={};for(let s of a){let l=null==(t=(o=this.context).backgroundColorMap)?void 0:t.call(o,s);if(l)r.backgroundcolor=l;else{let c=s.match(/^\s*([\d.]+)\s*([a-z]{2})/);if(c)r.padding=c[0];else{let u=s.match(/^\s*border\s*:\s*(.*)/);u&&(r.border=u[1])}}}i=r}else"math"===n&&(this.beginContext({mode:"math"}),i=this.mathlist.concat(this.parse(a=>"]"===a)),this.endContext());return i}parseCommand(n){var o,t,i,a,r,s,l;if("\\placeholder"===n){let p=this.parseOptionalArgument("string"),f=this.parseOptionalArgument("math"),b=null!=(o=this.parseArgument("string"))?o:void 0;return[new Ro(this.context,{mode:this.parseMode,placeholderId:p,value:b,default:f,style:this.style})]}let c=null;if("\\char"===n){let p=this.index,f=Math.floor(null!=(t=this.scanNumber(!0))?t:Number.NaN);(!Number.isFinite(f)||f<0||f>1114111)&&(f=10067);let b="\\char"+h_(this.tokens.slice(p,this.index));return c=new kt("math"===this.parseMode?"mord":"text",this.context,{command:"\\char",mode:this.parseMode,value:String.fromCodePoint(f),serialize:()=>b}),c.verbatimLatex=b,[c]}if("\\hskip"===n||"\\kern"===n){let p=this.scanGlue();return p?[new Em(n,this.style,this.context,p)]:null}if(c=this.scanMacro(n),c)return[c];let u=this.context.getDefinition(n,this.parseMode);if(!u)return this.onError({code:"unknown-command",arg:n}),[new O2(n,this.context)];let m=this.index;if("symbol"===u.definitionType){let p=Et({},this.style);u.variant&&(p.variant=u.variant),c=new kt(null!=(i=u.type)?i:"mop",this.context,{command:n,style:p,value:String.fromCodePoint(u.codepoint),mode:this.parseMode})}else{if(u.ifMode&&!u.ifMode.includes(this.parseMode))return[];let p=this.parseMode;u.applyMode&&(this.parseMode=u.applyMode);let[f,b]=this.parseArguments(u);if(this.parseMode=p,!b)return null;if(u.applyMode&&!u.applyStyle&&!u.createAtom)return b[0];if(u.infix)return this.onError({code:"too-many-infix-commands",arg:n}),null;if("function"==typeof u.createAtom)c=u.createAtom(n,b,this.style,this.context),f&&(c.body=null!=(a=this.parseArgument(f))?a:void 0);else if("function"==typeof u.applyStyle){let L=u.applyStyle(n,b,this.context),N=this.parseMode;if(u.applyMode&&(this.parseMode=u.applyMode),f){let R=this.style;this.style=Et(Et({},this.style),L);let j=this.parseArgument(f);return this.style=R,this.parseMode=N,j}this.style=Et(Et({},this.style),L),this.parseMode=N}else c=new kt("mop",this.context,{command:null!=(r=u.command)?r:n,style:Et({},this.style),value:n,mode:null!=(s=u.applyMode)?s:this.parseMode})}if(c instanceof kt&&void 0===c.verbatimLatex&&!/^\\(llap|rlap|class|cssId|htmlData)$/.test(n)&&(c.verbatimLatex=(null!=(l=c.command)?l:"")+h_(this.tokens.slice(m,this.index)),0===c.verbatimLatex.length&&(c.verbatimLatex=void 0),c.isFunction&&this.smartFence)){let p=this.scanSmartFence();if(p)return[c,p]}return c?[c]:null}parseLiteral(n){let o=fd.createAtom(this.parseMode,n,this.context,Et({},this.style));if(!o)return null;if(o.isFunction&&this.smartFence){let t=this.scanSmartFence();if(t)return[o,t]}return[o]}parseSimpleToken(){let n=this.get();return n?"<space>"===n?"text"===this.parseMode?[new mh(" "," ",this.style,this.context)]:null:n.startsWith("\\")?this.parseCommand(n):_1(n)?this.parseLiteral(n):(this.onError("<}>"===n?{latex:"",code:"unbalanced-braces"}:{latex:"",code:"unexpected-token",arg:n}),null):null}scanMacro(n){var o;let t=this.context.getMacro(n);if(!t)return null;let i=this.index,a=t.args,r={"?":null==(o=this.args)?void 0:o.call(this,"?")};for(let s=1;s<=a;s++)r[s]=this.matchLiteralArg();return new I2(n,this.context,{expand:t.expand,captureSelection:t.captureSelection,args:h_(this.tokens.slice(i,this.index)),body:kr(t.def,this.context,{parseMode:this.parseMode,args:s=>r[s],mathstyle:this.currentContext.mathstyle})})}parseToken(){var n,o,t,i;let a=null!=(i=null!=(t=null!=(o=null!=(n=this.parseEnvironment())?n:this.parseModeShift())?o:this.parseModeSet())?t:this.parseGroup())?i:this.parseLeftRight();if(null===a){if(this.parseSupSub()||this.parseLimits())return!0;a=this.parseSimpleToken()}return Ea(a)?this.mathlist.push(...a):a&&this.mathlist.push(a),null!==a}};function kr(n,o,t){var i,a,r;let s=null!=(i=t?.args)?i:null,l=new f1(uh(n,s),o,{args:s,mathstyle:null!=(a=t?.mathstyle)?a:"displaystyle",parseMode:null!=(r=t?.parseMode)?r:"math"}),c=[];for(;!l.end();)c.push(...l.parse());return c}function TY(n,o,t){return"object"==typeof n&&"glue"in n?n:"object"==typeof n&&"dimension"in n?{glue:n}:"number"==typeof n?{glue:{dimension:n}}:new f1(uh(n),o,{registers:t}).scanGlue()}function g1(n,o,t){return"number"==typeof n?{dimension:n,unit:"pt"}:("object"==typeof n&&"glue"in n&&(n=n.glue),"object"==typeof n&&"dimension"in n?n:new f1(uh(n),o,{registers:t}).scanDimen())}var Om=class extends kt{constructor(n,o,t,i){super("box",t,{command:n,serialize:i.serialize,style:i.style}),this.body=o,this.framecolor=i.framecolor,this.verbatimFramecolor=i.verbatimBackgroundcolor,this.backgroundcolor=i.backgroundcolor,this.verbatimBackgroundcolor=i.verbatimBackgroundcolor,this.padding=i.padding,this.border=i.border}static fromJson(n,o){return new Om(n.command,n.body,o,n)}toJson(){return mi(Et({},super.toJson()),{framecolor:this.framecolor,verbatimFramecolor:this.verbatimFramecolor,backgroundcolor:this.backgroundcolor,verbatimBackgroundcolor:this.verbatimBackgroundcolor,padding:this.padding,border:this.border})}render(n){let o=new pi(n,this.style),t=Cc(o.getRegisterAsDimension("fboxsep")),i=void 0===this.padding?t:Cc(g1(this.padding,mi(Et({},this.context),{registers:n.registers}))),a=kt.createBox(n,this.body);if(!a)return null;a.setStyle("vertical-align",-a.height,"em");let r=new Ht(a,{type:"mord"}),s=new Ht(null,{classes:"ML__box"});s.height=r.height+i,s.depth=r.depth+i,s.setStyle("box-sizing","border-box"),s.setStyle("position","absolute"),s.setStyle("height",r.height+r.depth+2*i,"em"),0===i?s.setStyle("width","100%"):(s.setStyle("width",`calc(100% + ${2*i}em)`),s.setStyle("top",t,"em"),s.setStyle("left",-i,"em")),this.backgroundcolor&&s.setStyle("background-color",this.backgroundcolor),this.framecolor&&s.setStyle("border",`${Cc(o.getRegisterAsDimension("fboxrule"))}em solid ${this.framecolor}`),this.border&&s.setStyle("border",this.border),r.setStyle("display","inline-block"),r.setStyle("height",a.height+a.depth,"em"),r.setStyle("vertical-align",-i,"em");let l=new Ht([s,r]);return l.setStyle("position","relative"),l.setStyle("display","inline-block"),l.setStyle("line-height",0),l.height=r.height+i,l.depth=r.depth+i,l.left=i,l.right=i,l.setStyle("height",r.height+i,"em"),l.setStyle("top",r.depth-r.height,"em"),l.setStyle("vertical-align",r.depth+i,"em"),this.caret&&(l.caret=this.caret),this.attachSupsub(n,{base:l})}},So=class extends kt{constructor(n,o,t,i,a={}){var r,s;super("array",n),this.environmentName=o,this.rowGaps=i,a.mathstyleName&&(this.mathstyleName=a.mathstyleName),a.columns&&(this.colFormat=0===a.columns.length?[{align:"l"}]:a.columns),this.colFormat||(this.colFormat=[{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"}]),this.array=function kY(n,o,t,i){let a=0;for(let m of i)"align"in m&&(a+=1);let r=0,s=[];for(let m of t){let p=0;for(r=Math.max(r,Math.min(m.length,a));p<m.length;){let f=[],b=Math.min(m.length,p+a);for(;p<b;)f.push(0===m[p].length?[new kt("first",n,{mode:o.mode})]:"first"!==m[p][0].type?[new kt("first",n,{mode:o.mode}),...m[p]]:m[p]),p+=1;s.push(f)}}1===s[s.length-1].length&&0===s[s.length-1][0].length&&s.pop();let l=[];for(let m of s){if(m.length!==r)for(let p=m.length;p<r;p++)m.push([new kt("first",n,{mode:o.mode}),new Ro(n)]);l.push(m)}let c=0,u=0;for(let m of l){u=0;for(let p of m){for(let f of p)f.parent=o,f.treeBranch=[c,u];u+=1}c+=1}return o.isDirty=!0,l}(n,this,t,this.colFormat),a.leftDelim&&(this.leftDelim=a.leftDelim),a.rightDelim&&(this.rightDelim=a.rightDelim),void 0!==a.jot&&(this.jot=a.jot),a.arraycolsep&&(this.arraycolsep=a.arraycolsep),this.colSeparationType=a.colSeparationType,this.arraystretch=null!=(r=a.arraystretch)?r:1,this.minColumns=null!=(s=a.minColumns)?s:1}static fromJson(n,o){return new So(o,n.environmentName,n.array,n.rowGaps,n)}toJson(){let n=mi(Et({},super.toJson()),{environmentName:this.environmentName,array:this.array.map(o=>o.map(t=>t.map(i=>i.toJson()))),rowGaps:this.rowGaps,columns:this.colFormat,colSeparationType:this.colSeparationType});return 1!==this.arraystretch&&(n.arraystretch=this.arraystretch),this.arraycolsep&&(n.arraycolsep=this.arraycolsep),this.leftDelim&&(n.leftDelim=this.leftDelim),this.rightDelim&&(n.rightDelim=this.rightDelim),void 0!==this.jot&&(n.jot=this.jot),n}branch(n){var o;if(p1(n))return null!=(o=this.array[n[0]][n[1]])?o:void 0}get branches(){let n=super.branches;return this.array.forEach((o,t)=>{this.array[t].forEach((i,a)=>{this.array[t][a]&&n.push([t,a])})}),n}createBranch(n){var o;return p1(n)?(this.isDirty=!0,null!=(o=this.branch(n))?o:[]):[]}get rowCount(){return this.array.length}get colCount(){return this.array[0].length}get maxColumns(){return this.colFormat.filter(n=>!!n.align).length}removeBranch(n){if(km(n))return super.removeBranch(n);let o=this.branch(n);return this.array[n[0]][n[1]]=void 0,o.forEach(t=>{t.parent=void 0,t.treeBranch=void 0}),o.shift(),this.isDirty=!0,o}get hasChildren(){return this.children.length>0}get children(){let n=[];for(let o of this.array)for(let t of o)if(t)for(let i of t)n.push(...i.children),n.push(i);return[...n,...super.children]}render(n){var o,t,i,a,r;let s=new pi(n,this.style,this.mathstyleName),l=s.getRegisterAsEm("arrayrulewidth"),c=s.getRegisterAsEm("arraycolsep"),u=s.getRegisterAsEm("doublerulesep"),m=null!=(o=this.arraystretch)?o:1,p="number"==typeof this.arraycolsep?this.arraycolsep:c;"small"===this.colSeparationType&&(p=new pi(n,void 0,"scriptstyle").scalingFactor/n.scalingFactor*.2778);let f=1.2*m,b=.7*f,L=.3*f,N=0,R=[],j=0,G=this.array.length;for(let Oe=0;Oe<G;++Oe){let Fe=this.array[Oe];j=Math.max(j,Fe.length);let Re=new pi(s,this.style,this.mathstyleName),Je=b/Re.scalingFactor,Ke=L/Re.scalingFactor,et={cells:[],height:0,depth:0,pos:0};for(let ue of Fe){let Te=null!=(t=kt.createBox(Re,ue,{newList:!0}))?t:new Ht(null,{newList:!0});Ke=Math.max(Ke,Te.depth),Je=Math.max(Je,Te.height),et.cells.push(Te)}let gt=null!=(i=Cc(this.rowGaps[Oe]))?i:0;gt>0&&(gt+=L,Ke=Math.max(Ke,gt),gt=0),void 0!==this.jot&&(Ke+=this.jot),et.height=Je,et.depth=Ke,N+=Je,et.pos=N,N+=Ke+gt,R.push(et)}let ae=N/2+bl,W=[];for(let Oe=0;Oe<j;Oe++){let Fe=[];for(let Re of R){let Je=Re.cells[Oe];Je.depth=Re.depth,Je.height=Re.height,Fe.push({box:Je,shift:Re.pos-ae})}Fe.length>0&&W.push(new sa({individualShift:Fe}))}let le=[],ve=!1,ce=!1,te=0,Se=!this.leftDelim,{colFormat:Ze}=this;for(let Oe of Ze){if("align"in Oe&&te>=W.length)break;if("align"in Oe)ve?le.push(b1(2*p)):(ce||Se)&&le.push(b1(p)),le.push(new Ht(W[te],{classes:"col-align-"+Oe.align})),te++,ve=!0,ce=!1,Se=!1;else if("gap"in Oe){if("number"==typeof Oe.gap)le.push(b1(Oe.gap));else{let Fe=SY(n,R,ae,Oe.gap);Fe&&le.push(Fe)}ve=!1,ce=!1,Se=!1}else if("separator"in Oe){let Fe=new Ht(null,{classes:"vertical-separator"});Fe.setStyle("height",N,"em"),Fe.setStyle("border-right",`${l}em ${Oe.separator} currentColor`),Fe.setStyle("vertical-align",-(N-ae),"em");let Re=0;ce?Re=u-l:ve&&(Re=p-l),Fe.left=Re,le.push(Fe),ve=!1,ce=!0,Se=!1}}ve&&!this.rightDelim&&le.push(b1(p));let se=new Ht(le,{classes:"mtable"});if(!(this.leftDelim&&"."!==this.leftDelim||this.rightDelim&&"."!==this.rightDelim))return this.caret&&(se.caret=this.caret),se;let pe=se.height,Be=se.depth,Pe=this.bind(n,new Ht([this.bind(n,f_("mopen",null!=(a=this.leftDelim)?a:".",pe,Be,s)),se,this.bind(n,f_("mclose",null!=(r=this.rightDelim)?r:".",pe,Be,s))],{type:"mord"}));return Pe?(this.caret&&(Pe.caret=this.caret),this.attachSupsub(n,{base:Pe})):null}serialize(n){let o="\\begin{"+this.environmentName+"}";if("array"===this.environmentName){if(o+="{",void 0!==this.colFormat)for(let t of this.colFormat)"align"in t?o+=t.align:"separator"in t&&"solid"===t.separator?o+="|":"separator"in t&&"dashed"===t.separator&&(o+=":");o+="}"}for(let t=0;t<this.array.length;t++){for(let i=0;i<this.array[t].length;i++)i>0&&(o+=" & "),o=Bo([o,kt.serialize(this.array[t][i],n)]);t<this.array.length-1&&(o+=" \\\\ ")}return o+="\\end{"+this.environmentName+"}",o}getCell(n,o){return this.array[n][o]}setCell(n,o,t){"array"===this.type&&Array.isArray(this.array);for(let a of this.array[n][o])a.parent=void 0,a.treeBranch=void 0;let i=t;(0===t.length||"first"!==t[0].type)&&(i=[new kt("first",this.context,{mode:this.mode}),...t]),this.array[n][o]=i;for(let a of i)a.parent=this,a.treeBranch=[n,o];this.isDirty=!0}addRowBefore(n){"array"===this.type&&Array.isArray(this.array);let o=[];for(let t=0;t<this.colCount;t++)o.push(x1(this));this.array.splice(n,0,o);for(let t=n;t<this.rowCount;t++)for(let i=0;i<this.colCount;i++){let a=this.array[t][i];if(a)for(let r of a)r.treeBranch=[t,i]}this.isDirty=!0}addRowAfter(n){"array"===this.type&&Array.isArray(this.array);let o=[];for(let t=0;t<this.colCount;t++)o.push(x1(this));this.array.splice(n+1,0,o);for(let t=n+1;t<this.rowCount;t++)for(let i=0;i<this.colCount;i++){let a=this.array[t][i];if(a)for(let r of a)r.treeBranch=[t,i]}this.isDirty=!0}removeRow(n){"array"===this.type&&Array.isArray(this.array);let o=this.array.splice(n,1);for(let t of o)for(let i of t)if(i)for(let a of i)a.parent=void 0,a.treeBranch=void 0;for(let t=n;t<this.rowCount;t++)for(let i=0;i<this.colCount;i++){let a=this.array[t][i];if(a)for(let r of a)r.treeBranch=[t,i]}this.isDirty=!0}addColumnBefore(n){"array"===this.type&&Array.isArray(this.array);for(let o of this.array)o.splice(n,0,x1(this));for(let o=0;o<this.rowCount;o++)for(let t=n;t<this.colCount;t++){let i=this.array[o][t];if(i)for(let a of i)a.treeBranch=[o,t]}this.isDirty=!0}addColumnAfter(n){"array"===this.type&&Array.isArray(this.array);for(let o of this.array)o.splice(n+1,0,x1(this));for(let o=0;o<this.rowCount;o++)for(let t=n+1;t<this.colCount;t++){let i=this.array[o][t];if(i)for(let a of i)a.treeBranch=[o,t]}this.isDirty=!0}addColumn(){this.addColumnAfter(this.colCount-1)}removeColumn(n){"array"===this.type&&Array.isArray(this.array);for(let o of this.array){let t=o.splice(n,1);for(let i of t)if(i)for(let a of i)a.parent=void 0,a.treeBranch=void 0}for(let o=0;o<this.rowCount;o++)for(let t=n;t<this.colCount;t++){let i=this.array[o][t];if(i)for(let a of i)a.treeBranch=[o,t]}this.isDirty=!0}get cells(){let n=[];for(let o of this.array)for(let t of o)t&&n.push(t);return n}};function x1(n){let o=new kt("first",n.context,{mode:n.mode});o.parent=n;let t=new Ro(n.context,{mode:n.mode});return t.parent=n,[o,t]}function b1(n){let o=new Ht(null,{classes:"arraycolsep"});return o.width=n,o}function SY(n,o,t,i){if(!i)return null;let a=[];for(let r of o){let s=kt.createBox(n,i,{newList:!0});s&&(s.depth=r.depth,s.height=r.height,a.push({box:s,shift:r.pos-t}))}return new sa({individualShift:a}).wrap(n)}var M2=class extends kt{constructor(n,o,t){var i;super("composition",o,{mode:null!=(i=t?.mode)?i:"math",value:n})}static fromJson(n,o){return new M2(n.value,o,n)}toJson(){return super.toJson()}get computedStyle(){return{}}render(n){let o=new Ht(this.value,{classes:"ML__composition",type:"composition"});return this.bind(n,o),this.caret&&(o.caret=this.caret),o}serialize(n){return""}},L2=class extends kt{constructor(n,o,t){super("chem",t,{command:n,mode:"math"});let i=_o.go(Mt.go(o,"\\pu"===n?"pu":"ce"),!1);this.body=kr(i,t),this.verbatimLatex=n+"{"+o+"}",this.arg=o,this.captureSelection=!0}static fromJson(n,o){return new L2(n.command,n.arg,o)}toJson(){return mi(Et({},super.toJson()),{arg:this.arg})}render(n){let o=kt.createBox(n,this.body,{type:"chem",newList:!0});return this.caret&&(o.caret=this.caret),this.bind(n,o)}serialize(n){return this.verbatimLatex}};Tt(["ce","pu"],"{chemformula:balanced-string}",{createAtom:(n,o,t,i)=>new L2(n,o[0],i)});var Mt={go:function(n,o){if(!n)return[];void 0===o&&(o="ce");var t="0",i={parenthesisLevel:0};n=(n=(n=n.replace(/\n/g," ")).replace(/[\u2212\u2013\u2014\u2010]/g,"-")).replace(/[\u2026]/g,"...");for(var a,r=10,s=[];;){a!==n?(r=10,a=n):r--;var l=Mt.stateMachines[o],c=l.transitions[t]||l.transitions["*"];e:for(var u=0;u<c.length;u++){var m=Mt.patterns.match_(c[u].pattern,n);if(m){for(var p=c[u].task,f=0;f<p.action_.length;f++){var b;if(l.actions[p.action_[f].type_])b=l.actions[p.action_[f].type_](i,m.match_,p.action_[f].option);else{if(!Mt.actions[p.action_[f].type_])throw["MhchemBugA","mhchem bug A. Please report. ("+p.action_[f].type_+")"];b=Mt.actions[p.action_[f].type_](i,m.match_,p.action_[f].option)}Mt.concatArray(s,b)}if(t=p.nextState||t,!(n.length>0))return s;if(p.revisit||(n=m.remainder),!p.toContinue)break e}}if(r<=0)throw["MhchemBugU","mhchem bug U. Please report."]}},concatArray:function(n,o){if(o)if(Array.isArray(o))for(var t=0;t<o.length;t++)n.push(o[t]);else n.push(o)},patterns:{patterns:{empty:/^$/,else:/^./,else2:/^./,space:/^\s/,"space A":/^\s(?=[A-Z\\$])/,space$:/^\s$/,"a-z":/^[a-z]/,x:/^x/,x$:/^x$/,i$:/^i$/,letters:/^(?:[a-zA-Z\u03B1-\u03C9\u0391-\u03A9?@]|(?:\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega|Gamma|Delta|Theta|Lambda|Xi|Pi|Sigma|Upsilon|Phi|Psi|Omega)(?:\s+|\{\}|(?![a-zA-Z]))))+/,"\\greek":/^\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega|Gamma|Delta|Theta|Lambda|Xi|Pi|Sigma|Upsilon|Phi|Psi|Omega)(?:\s+|\{\}|(?![a-zA-Z]))/,"one lowercase latin letter $":/^(?:([a-z])(?:$|[^a-zA-Z]))$/,"$one lowercase latin letter$ $":/^\$(?:([a-z])(?:$|[^a-zA-Z]))\$$/,"one lowercase greek letter $":/^(?:\$?[\u03B1-\u03C9]\$?|\$?\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega)\s*\$?)(?:\s+|\{\}|(?![a-zA-Z]))$/,digits:/^[0-9]+/,"-9.,9":/^[+\-]?(?:[0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))/,"-9.,9 no missing 0":/^[+\-]?[0-9]+(?:[.,][0-9]+)?/,"(-)(9.,9)(e)(99)":function(n){var o=n.match(/^(\+\-|\+\/\-|\+|\-|\\pm\s?)?([0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))?(\((?:[0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))\))?(?:([eE]|\s*(\*|x|\\times|\u00D7)\s*10\^)([+\-]?[0-9]+|\{[+\-]?[0-9]+\}))?/);return o&&o[0]?{match_:o.splice(1),remainder:n.substr(o[0].length)}:null},"(-)(9)^(-9)":function(n){var o=n.match(/^(\+\-|\+\/\-|\+|\-|\\pm\s?)?([0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+)?)\^([+\-]?[0-9]+|\{[+\-]?[0-9]+\})/);return o&&o[0]?{match_:o.splice(1),remainder:n.substr(o[0].length)}:null},"state of aggregation $":function(n){var o=Mt.patterns.findObserveGroups(n,"",/^\([a-z]{1,3}(?=[\),])/,")","");if(o&&o.remainder.match(/^($|[\s,;\)\]\}])/))return o;var t=n.match(/^(?:\((?:\\ca\s?)?\$[amothc]\$\))/);return t?{match_:t[0],remainder:n.substr(t[0].length)}:null},"_{(state of aggregation)}$":/^_\{(\([a-z]{1,3}\))\}/,"{[(":/^(?:\\\{|\[|\()/,")]}":/^(?:\)|\]|\\\})/,", ":/^[,;]\s*/,",":/^[,;]/,".":/^[.]/,". ":/^([.\u22C5\u00B7\u2022])\s*/,"...":/^\.\.\.(?=$|[^.])/,"* ":/^([*])\s*/,"^{(...)}":function(n){return Mt.patterns.findObserveGroups(n,"^{","","","}")},"^($...$)":function(n){return Mt.patterns.findObserveGroups(n,"^","$","$","")},"^a":/^\^([0-9]+|[^\\_])/,"^\\x{}{}":function(n){return Mt.patterns.findObserveGroups(n,"^",/^\\[a-zA-Z]+\{/,"}","","","{","}","",!0)},"^\\x{}":function(n){return Mt.patterns.findObserveGroups(n,"^",/^\\[a-zA-Z]+\{/,"}","")},"^\\x":/^\^(\\[a-zA-Z]+)\s*/,"^(-1)":/^\^(-?\d+)/,"'":/^'/,"_{(...)}":function(n){return Mt.patterns.findObserveGroups(n,"_{","","","}")},"_($...$)":function(n){return Mt.patterns.findObserveGroups(n,"_","$","$","")},_9:/^_([+\-]?[0-9]+|[^\\])/,"_\\x{}{}":function(n){return Mt.patterns.findObserveGroups(n,"_",/^\\[a-zA-Z]+\{/,"}","","","{","}","",!0)},"_\\x{}":function(n){return Mt.patterns.findObserveGroups(n,"_",/^\\[a-zA-Z]+\{/,"}","")},"_\\x":/^_(\\[a-zA-Z]+)\s*/,"^_":/^(?:\^(?=_)|\_(?=\^)|[\^_]$)/,"{}":/^\{\}/,"{...}":function(n){return Mt.patterns.findObserveGroups(n,"","{","}","")},"{(...)}":function(n){return Mt.patterns.findObserveGroups(n,"{","","","}")},"$...$":function(n){return Mt.patterns.findObserveGroups(n,"","$","$","")},"${(...)}$":function(n){return Mt.patterns.findObserveGroups(n,"${","","","}$")},"$(...)$":function(n){return Mt.patterns.findObserveGroups(n,"$","","","$")},"=<>":/^[=<>]/,"#":/^[#\u2261]/,"+":/^\+/,"-$":/^-(?=[\s_},;\]/]|$|\([a-z]+\))/,"-9":/^-(?=[0-9])/,"- orbital overlap":/^-(?=(?:[spd]|sp)(?:$|[\s,;\)\]\}]))/,"-":/^-/,"pm-operator":/^(?:\\pm|\$\\pm\$|\+-|\+\/-)/,operator:/^(?:\+|(?:[\-=<>]|<<|>>|\\approx|\$\\approx\$)(?=\s|$|-?[0-9]))/,arrowUpDown:/^(?:v|\(v\)|\^|\(\^\))(?=$|[\s,;\)\]\}])/,"\\bond{(...)}":function(n){return Mt.patterns.findObserveGroups(n,"\\bond{","","","}")},"->":/^(?:<->|<-->|->|<-|<=>>|<<=>|<=>|[\u2192\u27F6\u21CC])/,CMT:/^[CMT](?=\[)/,"[(...)]":function(n){return Mt.patterns.findObserveGroups(n,"[","","","]")},"1st-level escape":/^(&|\\\\|\\hline)\s*/,"\\,":/^(?:\\[,\ ;:])/,"\\x{}{}":function(n){return Mt.patterns.findObserveGroups(n,"",/^\\[a-zA-Z]+\{/,"}","","","{","}","",!0)},"\\x{}":function(n){return Mt.patterns.findObserveGroups(n,"",/^\\[a-zA-Z]+\{/,"}","")},"\\ca":/^\\ca(?:\s+|(?![a-zA-Z]))/,"\\x":/^(?:\\[a-zA-Z]+\s*|\\[_&{}%])/,orbital:/^(?:[0-9]{1,2}[spdfgh]|[0-9]{0,2}sp)(?=$|[^a-zA-Z])/,others:/^[\/~|]/,"\\frac{(...)}":function(n){return Mt.patterns.findObserveGroups(n,"\\frac{","","","}","{","","","}")},"\\overset{(...)}":function(n){return Mt.patterns.findObserveGroups(n,"\\overset{","","","}","{","","","}")},"\\underset{(...)}":function(n){return Mt.patterns.findObserveGroups(n,"\\underset{","","","}","{","","","}")},"\\underbrace{(...)}":function(n){return Mt.patterns.findObserveGroups(n,"\\underbrace{","","","}_","{","","","}")},"\\color{(...)}0":function(n){return Mt.patterns.findObserveGroups(n,"\\color{","","","}")},"\\color{(...)}{(...)}1":function(n){return Mt.patterns.findObserveGroups(n,"\\color{","","","}","{","","","}")},"\\color(...){(...)}2":function(n){return Mt.patterns.findObserveGroups(n,"\\color","\\","",/^(?=\{)/,"{","","","}")},"\\ce{(...)}":function(n){return Mt.patterns.findObserveGroups(n,"\\ce{","","","}")},oxidation$:/^(?:[+-][IVX]+|\\pm\s*0|\$\\pm\$\s*0)$/,"d-oxidation$":/^(?:[+-]?\s?[IVX]+|\\pm\s*0|\$\\pm\$\s*0)$/,"roman numeral":/^[IVX]+/,"1/2$":/^[+\-]?(?:[0-9]+|\$[a-z]\$|[a-z])\/[0-9]+(?:\$[a-z]\$|[a-z])?$/,amount:function(n){var o;if(o=n.match(/^(?:(?:(?:\([+\-]?[0-9]+\/[0-9]+\)|[+\-]?(?:[0-9]+|\$[a-z]\$|[a-z])\/[0-9]+|[+\-]?[0-9]+[.,][0-9]+|[+\-]?\.[0-9]+|[+\-]?[0-9]+)(?:[a-z](?=\s*[A-Z]))?)|[+\-]?[a-z](?=\s*[A-Z])|\+(?!\s))/))return{match_:o[0],remainder:n.substr(o[0].length)};var t=Mt.patterns.findObserveGroups(n,"","$","$","");return t&&(o=t.match_.match(/^\$(?:\(?[+\-]?(?:[0-9]*[a-z]?[+\-])?[0-9]*[a-z](?:[+\-][0-9]*[a-z]?)?\)?|\+|-)\$$/))?{match_:o[0],remainder:n.substr(o[0].length)}:null},amount2:function(n){return this.amount(n)},"(KV letters),":/^(?:[A-Z][a-z]{0,2}|i)(?=,)/,formula$:function(n){if(n.match(/^\([a-z]+\)$/))return null;var o=n.match(/^(?:[a-z]|(?:[0-9\ \+\-\,\.\(\)]+[a-z])+[0-9\ \+\-\,\.\(\)]*|(?:[a-z][0-9\ \+\-\,\.\(\)]+)+[a-z]?)$/);return o?{match_:o[0],remainder:n.substr(o[0].length)}:null},uprightEntities:/^(?:pH|pOH|pC|pK|iPr|iBu)(?=$|[^a-zA-Z])/,"/":/^\s*(\/)\s*/,"//":/^\s*(\/\/)\s*/,"*":/^\s*[*.]\s*/},findObserveGroups:function(n,o,t,i,a,r,s,l,c,u){var m=function(j,G){if("string"==typeof G)return 0!==j.indexOf(G)?null:G;var ae=j.match(G);return ae?ae[0]:null},f=m(n,o);if(null===f||(n=n.substr(f.length),null===(f=m(n,t))))return null;var b=function(j,G,ae){for(var W=0;G<j.length;){var le=j.charAt(G),ve=m(j.substr(G),ae);if(null!==ve&&0===W)return{endMatchBegin:G,endMatchEnd:G+ve.length};if("{"===le)W++;else if("}"===le){if(0===W)throw["ExtraCloseMissingOpen","Extra close brace or missing open brace"];W--}G++}return null}(n,f.length,i||a);if(null===b)return null;var L=n.substring(0,i?b.endMatchEnd:b.endMatchBegin);if(r||s){var N=this.findObserveGroups(n.substr(b.endMatchEnd),r,s,l,c);if(null===N)return null;var R=[L,N.match_];return{match_:u?R.join(""):R,remainder:N.remainder}}return{match_:L,remainder:n.substr(b.endMatchEnd)}},match_:function(n,o){var t=Mt.patterns.patterns[n];if(void 0===t)throw["MhchemBugP","mhchem bug P. Please report. ("+n+")"];if("function"==typeof t)return Mt.patterns.patterns[n](o);var i=o.match(t);return i?{match_:i[2]?[i[1],i[2]]:i[1]?i[1]:i[0],remainder:o.substr(i[0].length)}:null}},actions:{"a=":function(n,o){n.a=(n.a||"")+o},"b=":function(n,o){n.b=(n.b||"")+o},"p=":function(n,o){n.p=(n.p||"")+o},"o=":function(n,o){n.o=(n.o||"")+o},"q=":function(n,o){n.q=(n.q||"")+o},"d=":function(n,o){n.d=(n.d||"")+o},"rm=":function(n,o){n.rm=(n.rm||"")+o},"text=":function(n,o){n.text_=(n.text_||"")+o},insert:function(n,o,t){return{type_:t}},"insert+p1":function(n,o,t){return{type_:t,p1:o}},"insert+p1+p2":function(n,o,t){return{type_:t,p1:o[0],p2:o[1]}},copy:function(n,o){return o},rm:function(n,o){return{type_:"rm",p1:o||""}},text:function(n,o){return Mt.go(o,"text")},"{text}":function(n,o){var t=["{"];return Mt.concatArray(t,Mt.go(o,"text")),t.push("}"),t},"tex-math":function(n,o){return Mt.go(o,"tex-math")},"tex-math tight":function(n,o){return Mt.go(o,"tex-math tight")},bond:function(n,o,t){return{type_:"bond",kind_:t||o}},"color0-output":function(n,o){return{type_:"color0",color:o[0]}},ce:function(n,o){return Mt.go(o)},"1/2":function(n,o){var t=[];o.match(/^[+\-]/)&&(t.push(o.substr(0,1)),o=o.substr(1));var i=o.match(/^([0-9]+|\$[a-z]\$|[a-z])\/([0-9]+)(\$[a-z]\$|[a-z])?$/);return i[1]=i[1].replace(/\$/g,""),t.push({type_:"frac",p1:i[1],p2:i[2]}),i[3]&&(i[3]=i[3].replace(/\$/g,""),t.push({type_:"tex-math",p1:i[3]})),t},"9,9":function(n,o){return Mt.go(o,"9,9")}},createTransitions:function(n){var o,t,i,a,r={};for(o in n)for(t in n[o])for(i=t.split("|"),n[o][t].stateArray=i,a=0;a<i.length;a++)r[i[a]]=[];for(o in n)for(t in n[o])for(i=n[o][t].stateArray||[],a=0;a<i.length;a++){var s=n[o][t];if(s.action_){s.action_=[].concat(s.action_);for(var l=0;l<s.action_.length;l++)"string"==typeof s.action_[l]&&(s.action_[l]={type_:s.action_[l]})}else s.action_=[];for(var c=o.split("|"),u=0;u<c.length;u++)if("*"===i[a])for(var m in r)r[m].push({pattern:c[u],task:s});else r[i[a]].push({pattern:c[u],task:s})}return r},stateMachines:{}};Mt.stateMachines={ce:{transitions:Mt.createTransitions({empty:{"*":{action_:"output"}},else:{"0|1|2":{action_:"beginsWithBond=false",revisit:!0,toContinue:!0}},oxidation$:{0:{action_:"oxidation-output"}},CMT:{r:{action_:"rdt=",nextState:"rt"},rd:{action_:"rqt=",nextState:"rdt"}},arrowUpDown:{"0|1|2|as":{action_:["sb=false","output","operator"],nextState:"1"}},uprightEntities:{"0|1|2":{action_:["o=","output"],nextState:"1"}},orbital:{"0|1|2|3":{action_:"o=",nextState:"o"}},"->":{"0|1|2|3":{action_:"r=",nextState:"r"},"a|as":{action_:["output","r="],nextState:"r"},"*":{action_:["output","r="],nextState:"r"}},"+":{o:{action_:"d= kv",nextState:"d"},"d|D":{action_:"d=",nextState:"d"},q:{action_:"d=",nextState:"qd"},"qd|qD":{action_:"d=",nextState:"qd"},dq:{action_:["output","d="],nextState:"d"},3:{action_:["sb=false","output","operator"],nextState:"0"}},amount:{"0|2":{action_:"a=",nextState:"a"}},"pm-operator":{"0|1|2|a|as":{action_:["sb=false","output",{type_:"operator",option:"\\pm"}],nextState:"0"}},operator:{"0|1|2|a|as":{action_:["sb=false","output","operator"],nextState:"0"}},"-$":{"o|q":{action_:["charge or bond","output"],nextState:"qd"},d:{action_:"d=",nextState:"d"},D:{action_:["output",{type_:"bond",option:"-"}],nextState:"3"},q:{action_:"d=",nextState:"qd"},qd:{action_:"d=",nextState:"qd"},"qD|dq":{action_:["output",{type_:"bond",option:"-"}],nextState:"3"}},"-9":{"3|o":{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"3"}},"- orbital overlap":{o:{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"2"},d:{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"2"}},"-":{"0|1|2":{action_:[{type_:"output",option:1},"beginsWithBond=true",{type_:"bond",option:"-"}],nextState:"3"},3:{action_:{type_:"bond",option:"-"}},a:{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"2"},as:{action_:[{type_:"output",option:2},{type_:"bond",option:"-"}],nextState:"3"},b:{action_:"b="},o:{action_:{type_:"- after o/d",option:!1},nextState:"2"},q:{action_:{type_:"- after o/d",option:!1},nextState:"2"},"d|qd|dq":{action_:{type_:"- after o/d",option:!0},nextState:"2"},"D|qD|p":{action_:["output",{type_:"bond",option:"-"}],nextState:"3"}},amount2:{"1|3":{action_:"a=",nextState:"a"}},letters:{"0|1|2|3|a|as|b|p|bp|o":{action_:"o=",nextState:"o"},"q|dq":{action_:["output","o="],nextState:"o"},"d|D|qd|qD":{action_:"o after d",nextState:"o"}},digits:{o:{action_:"q=",nextState:"q"},"d|D":{action_:"q=",nextState:"dq"},q:{action_:["output","o="],nextState:"o"},a:{action_:"o=",nextState:"o"}},"space A":{"b|p|bp":{}},space:{a:{nextState:"as"},0:{action_:"sb=false"},"1|2":{action_:"sb=true"},"r|rt|rd|rdt|rdq":{action_:"output",nextState:"0"},"*":{action_:["output","sb=true"],nextState:"1"}},"1st-level escape":{"1|2":{action_:["output",{type_:"insert+p1",option:"1st-level escape"}]},"*":{action_:["output",{type_:"insert+p1",option:"1st-level escape"}],nextState:"0"}},"[(...)]":{"r|rt":{action_:"rd=",nextState:"rd"},"rd|rdt":{action_:"rq=",nextState:"rdq"}},"...":{"o|d|D|dq|qd|qD":{action_:["output",{type_:"bond",option:"..."}],nextState:"3"},"*":{action_:[{type_:"output",option:1},{type_:"insert",option:"ellipsis"}],nextState:"1"}},". |* ":{"*":{action_:["output",{type_:"insert",option:"addition compound"}],nextState:"1"}},"state of aggregation $":{"*":{action_:["output","state of aggregation"],nextState:"1"}},"{[(":{"a|as|o":{action_:["o=","output","parenthesisLevel++"],nextState:"2"},"0|1|2|3":{action_:["o=","output","parenthesisLevel++"],nextState:"2"},"*":{action_:["output","o=","output","parenthesisLevel++"],nextState:"2"}},")]}":{"0|1|2|3|b|p|bp|o":{action_:["o=","parenthesisLevel--"],nextState:"o"},"a|as|d|D|q|qd|qD|dq":{action_:["output","o=","parenthesisLevel--"],nextState:"o"}},", ":{"*":{action_:["output","comma"],nextState:"0"}},"^_":{"*":{}},"^{(...)}|^($...$)":{"0|1|2|as":{action_:"b=",nextState:"b"},p:{action_:"b=",nextState:"bp"},"3|o":{action_:"d= kv",nextState:"D"},q:{action_:"d=",nextState:"qD"},"d|D|qd|qD|dq":{action_:["output","d="],nextState:"D"}},"^a|^\\x{}{}|^\\x{}|^\\x|'":{"0|1|2|as":{action_:"b=",nextState:"b"},p:{action_:"b=",nextState:"bp"},"3|o":{action_:"d= kv",nextState:"d"},q:{action_:"d=",nextState:"qd"},"d|qd|D|qD":{action_:"d="},dq:{action_:["output","d="],nextState:"d"}},"_{(state of aggregation)}$":{"d|D|q|qd|qD|dq":{action_:["output","q="],nextState:"q"}},"_{(...)}|_($...$)|_9|_\\x{}{}|_\\x{}|_\\x":{"0|1|2|as":{action_:"p=",nextState:"p"},b:{action_:"p=",nextState:"bp"},"3|o":{action_:"q=",nextState:"q"},"d|D":{action_:"q=",nextState:"dq"},"q|qd|qD|dq":{action_:["output","q="],nextState:"q"}},"=<>":{"0|1|2|3|a|as|o|q|d|D|qd|qD|dq":{action_:[{type_:"output",option:2},"bond"],nextState:"3"}},"#":{"0|1|2|3|a|as|o":{action_:[{type_:"output",option:2},{type_:"bond",option:"#"}],nextState:"3"}},"{}":{"*":{action_:{type_:"output",option:1},nextState:"1"}},"{...}":{"0|1|2|3|a|as|b|p|bp":{action_:"o=",nextState:"o"},"o|d|D|q|qd|qD|dq":{action_:["output","o="],nextState:"o"}},"$...$":{a:{action_:"a="},"0|1|2|3|as|b|p|bp|o":{action_:"o=",nextState:"o"},"as|o":{action_:"o="},"q|d|D|qd|qD|dq":{action_:["output","o="],nextState:"o"}},"\\bond{(...)}":{"*":{action_:[{type_:"output",option:2},"bond"],nextState:"3"}},"\\frac{(...)}":{"*":{action_:[{type_:"output",option:1},"frac-output"],nextState:"3"}},"\\overset{(...)}":{"*":{action_:[{type_:"output",option:2},"overset-output"],nextState:"3"}},"\\underset{(...)}":{"*":{action_:[{type_:"output",option:2},"underset-output"],nextState:"3"}},"\\underbrace{(...)}":{"*":{action_:[{type_:"output",option:2},"underbrace-output"],nextState:"3"}},"\\color{(...)}{(...)}1|\\color(...){(...)}2":{"*":{action_:[{type_:"output",option:2},"color-output"],nextState:"3"}},"\\color{(...)}0":{"*":{action_:[{type_:"output",option:2},"color0-output"]}},"\\ce{(...)}":{"*":{action_:[{type_:"output",option:2},"ce"],nextState:"3"}},"\\,":{"*":{action_:[{type_:"output",option:1},"copy"],nextState:"1"}},"\\x{}{}|\\x{}|\\x":{"0|1|2|3|a|as|b|p|bp|o|c0":{action_:["o=","output"],nextState:"3"},"*":{action_:["output","o=","output"],nextState:"3"}},others:{"*":{action_:[{type_:"output",option:1},"copy"],nextState:"3"}},else2:{a:{action_:"a to o",nextState:"o",revisit:!0},as:{action_:["output","sb=true"],nextState:"1",revisit:!0},"r|rt|rd|rdt|rdq":{action_:["output"],nextState:"0",revisit:!0},"*":{action_:["output","copy"],nextState:"3"}}}),actions:{"o after d":function(n,o){var t;if((n.d||"").match(/^[0-9]+$/)){var i=n.d;n.d=void 0,t=this.output(n),n.b=i}else t=this.output(n);return Mt.actions["o="](n,o),t},"d= kv":function(n,o){n.d=o,n.dType="kv"},"charge or bond":function(n,o){if(n.beginsWithBond){var t=[];return Mt.concatArray(t,this.output(n)),Mt.concatArray(t,Mt.actions.bond(n,o,"-")),t}n.d=o},"- after o/d":function(n,o,t){var i=Mt.patterns.match_("orbital",n.o||""),a=Mt.patterns.match_("one lowercase greek letter $",n.o||""),r=Mt.patterns.match_("one lowercase latin letter $",n.o||""),s=Mt.patterns.match_("$one lowercase latin letter$ $",n.o||""),l="-"===o&&(i&&""===i.remainder||a||r||s);l&&!n.a&&!n.b&&!n.p&&!n.d&&!n.q&&!i&&r&&(n.o="$"+n.o+"$");var c=[];return l?(Mt.concatArray(c,this.output(n)),c.push({type_:"hyphen"})):(i=Mt.patterns.match_("digits",n.d||""),t&&i&&""===i.remainder?(Mt.concatArray(c,Mt.actions["d="](n,o)),Mt.concatArray(c,this.output(n))):(Mt.concatArray(c,this.output(n)),Mt.concatArray(c,Mt.actions.bond(n,o,"-")))),c},"a to o":function(n){n.o=n.a,n.a=void 0},"sb=true":function(n){n.sb=!0},"sb=false":function(n){n.sb=!1},"beginsWithBond=true":function(n){n.beginsWithBond=!0},"beginsWithBond=false":function(n){n.beginsWithBond=!1},"parenthesisLevel++":function(n){n.parenthesisLevel++},"parenthesisLevel--":function(n){n.parenthesisLevel--},"state of aggregation":function(n,o){return{type_:"state of aggregation",p1:Mt.go(o,"o")}},comma:function(n,o){var t=o.replace(/\s*$/,"");return t!==o&&0===n.parenthesisLevel?{type_:"comma enumeration L",p1:t}:{type_:"comma enumeration M",p1:t}},output:function(n,o,t){var i,a,r;for(var s in n.r?(a="M"===n.rdt?Mt.go(n.rd,"tex-math"):"T"===n.rdt?[{type_:"text",p1:n.rd||""}]:Mt.go(n.rd),r="M"===n.rqt?Mt.go(n.rq,"tex-math"):"T"===n.rqt?[{type_:"text",p1:n.rq||""}]:Mt.go(n.rq),i={type_:"arrow",r:n.r,rd:a,rq:r}):(i=[],!n.a&&!n.b&&!n.p&&!n.o&&!n.q&&!n.d&&!t||(n.sb&&i.push({type_:"entitySkip"}),n.o||n.q||n.d||n.b||n.p||2===t?n.o||n.q||n.d||!n.b&&!n.p?n.o&&"kv"===n.dType&&Mt.patterns.match_("d-oxidation$",n.d||"")?n.dType="oxidation":n.o&&"kv"===n.dType&&!n.q&&(n.dType=void 0):(n.o=n.a,n.d=n.b,n.q=n.p,n.a=n.b=n.p=void 0):(n.o=n.a,n.a=void 0),i.push({type_:"chemfive",a:Mt.go(n.a,"a"),b:Mt.go(n.b,"bd"),p:Mt.go(n.p,"pq"),o:Mt.go(n.o,"o"),q:Mt.go(n.q,"pq"),d:Mt.go(n.d,"oxidation"===n.dType?"oxidation":"bd"),dType:n.dType}))),n)"parenthesisLevel"!==s&&"beginsWithBond"!==s&&delete n[s];return i},"oxidation-output":function(n,o){var t=["{"];return Mt.concatArray(t,Mt.go(o,"oxidation")),t.push("}"),t},"frac-output":function(n,o){return{type_:"frac-ce",p1:Mt.go(o[0]),p2:Mt.go(o[1])}},"overset-output":function(n,o){return{type_:"overset",p1:Mt.go(o[0]),p2:Mt.go(o[1])}},"underset-output":function(n,o){return{type_:"underset",p1:Mt.go(o[0]),p2:Mt.go(o[1])}},"underbrace-output":function(n,o){return{type_:"underbrace",p1:Mt.go(o[0]),p2:Mt.go(o[1])}},"color-output":function(n,o){return{type_:"color",color1:o[0],color2:Mt.go(o[1])}},"r=":function(n,o){n.r=o},"rdt=":function(n,o){n.rdt=o},"rd=":function(n,o){n.rd=o},"rqt=":function(n,o){n.rqt=o},"rq=":function(n,o){n.rq=o},operator:function(n,o,t){return{type_:"operator",kind_:t||o}}}},a:{transitions:Mt.createTransitions({empty:{"*":{}},"1/2$":{0:{action_:"1/2"}},else:{0:{nextState:"1",revisit:!0}},"$(...)$":{"*":{action_:"tex-math tight",nextState:"1"}},",":{"*":{action_:{type_:"insert",option:"commaDecimal"}}},else2:{"*":{action_:"copy"}}}),actions:{}},o:{transitions:Mt.createTransitions({empty:{"*":{}},"1/2$":{0:{action_:"1/2"}},else:{0:{nextState:"1",revisit:!0}},letters:{"*":{action_:"rm"}},"\\ca":{"*":{action_:{type_:"insert",option:"circa"}}},"\\x{}{}|\\x{}|\\x":{"*":{action_:"copy"}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"{(...)}":{"*":{action_:"{text}"}},else2:{"*":{action_:"copy"}}}),actions:{}},text:{transitions:Mt.createTransitions({empty:{"*":{action_:"output"}},"{...}":{"*":{action_:"text="}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"\\greek":{"*":{action_:["output","rm"]}},"\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:["output","copy"]}},else:{"*":{action_:"text="}}}),actions:{output:function(n){if(n.text_){var o={type_:"text",p1:n.text_};for(var t in n)delete n[t];return o}}}},pq:{transitions:Mt.createTransitions({empty:{"*":{}},"state of aggregation $":{"*":{action_:"state of aggregation"}},i$:{0:{nextState:"!f",revisit:!0}},"(KV letters),":{0:{action_:"rm",nextState:"0"}},formula$:{0:{nextState:"f",revisit:!0}},"1/2$":{0:{action_:"1/2"}},else:{0:{nextState:"!f",revisit:!0}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"{(...)}":{"*":{action_:"text"}},"a-z":{f:{action_:"tex-math"}},letters:{"*":{action_:"rm"}},"-9.,9":{"*":{action_:"9,9"}},",":{"*":{action_:{type_:"insert+p1",option:"comma enumeration S"}}},"\\color{(...)}{(...)}1|\\color(...){(...)}2":{"*":{action_:"color-output"}},"\\color{(...)}0":{"*":{action_:"color0-output"}},"\\ce{(...)}":{"*":{action_:"ce"}},"\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"copy"}},else2:{"*":{action_:"copy"}}}),actions:{"state of aggregation":function(n,o){return{type_:"state of aggregation subscript",p1:Mt.go(o,"o")}},"color-output":function(n,o){return{type_:"color",color1:o[0],color2:Mt.go(o[1],"pq")}}}},bd:{transitions:Mt.createTransitions({empty:{"*":{}},x$:{0:{nextState:"!f",revisit:!0}},formula$:{0:{nextState:"f",revisit:!0}},else:{0:{nextState:"!f",revisit:!0}},"-9.,9 no missing 0":{"*":{action_:"9,9"}},".":{"*":{action_:{type_:"insert",option:"electron dot"}}},"a-z":{f:{action_:"tex-math"}},x:{"*":{action_:{type_:"insert",option:"KV x"}}},letters:{"*":{action_:"rm"}},"'":{"*":{action_:{type_:"insert",option:"prime"}}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"{(...)}":{"*":{action_:"text"}},"\\color{(...)}{(...)}1|\\color(...){(...)}2":{"*":{action_:"color-output"}},"\\color{(...)}0":{"*":{action_:"color0-output"}},"\\ce{(...)}":{"*":{action_:"ce"}},"\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"copy"}},else2:{"*":{action_:"copy"}}}),actions:{"color-output":function(n,o){return{type_:"color",color1:o[0],color2:Mt.go(o[1],"bd")}}}},oxidation:{transitions:Mt.createTransitions({empty:{"*":{}},"roman numeral":{"*":{action_:"roman-numeral"}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},else:{"*":{action_:"copy"}}}),actions:{"roman-numeral":function(n,o){return{type_:"roman numeral",p1:o||""}}}},"tex-math":{transitions:Mt.createTransitions({empty:{"*":{action_:"output"}},"\\ce{(...)}":{"*":{action_:["output","ce"]}},"{...}|\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"o="}},else:{"*":{action_:"o="}}}),actions:{output:function(n){if(n.o){var o={type_:"tex-math",p1:n.o};for(var t in n)delete n[t];return o}}}},"tex-math tight":{transitions:Mt.createTransitions({empty:{"*":{action_:"output"}},"\\ce{(...)}":{"*":{action_:["output","ce"]}},"{...}|\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"o="}},"-|+":{"*":{action_:"tight operator"}},else:{"*":{action_:"o="}}}),actions:{"tight operator":function(n,o){n.o=(n.o||"")+"{"+o+"}"},output:function(n){if(n.o){var o={type_:"tex-math",p1:n.o};for(var t in n)delete n[t];return o}}}},"9,9":{transitions:Mt.createTransitions({empty:{"*":{}},",":{"*":{action_:"comma"}},else:{"*":{action_:"copy"}}}),actions:{comma:function(){return{type_:"commaDecimal"}}}},pu:{transitions:Mt.createTransitions({empty:{"*":{action_:"output"}},space$:{"*":{action_:["output","space"]}},"{[(|)]}":{"0|a":{action_:"copy"}},"(-)(9)^(-9)":{0:{action_:"number^",nextState:"a"}},"(-)(9.,9)(e)(99)":{0:{action_:"enumber",nextState:"a"}},space:{"0|a":{}},"pm-operator":{"0|a":{action_:{type_:"operator",option:"\\pm"},nextState:"0"}},operator:{"0|a":{action_:"copy",nextState:"0"}},"//":{d:{action_:"o=",nextState:"/"}},"/":{d:{action_:"o=",nextState:"/"}},"{...}|else":{"0|d":{action_:"d=",nextState:"d"},a:{action_:["space","d="],nextState:"d"},"/|q":{action_:"q=",nextState:"q"}}}),actions:{enumber:function(n,o){var t=[];return"+-"===o[0]||"+/-"===o[0]?t.push("\\pm "):o[0]&&t.push(o[0]),o[1]&&(Mt.concatArray(t,Mt.go(o[1],"pu-9,9")),o[2]&&(o[2].match(/[,.]/)?Mt.concatArray(t,Mt.go(o[2],"pu-9,9")):t.push(o[2])),o[3]=o[4]||o[3],o[3]&&(o[3]=o[3].trim(),"e"===o[3]||"*"===o[3].substr(0,1)?t.push({type_:"cdot"}):t.push({type_:"times"}))),o[3]&&t.push("10^{"+o[5]+"}"),t},"number^":function(n,o){var t=[];return"+-"===o[0]||"+/-"===o[0]?t.push("\\pm "):o[0]&&t.push(o[0]),Mt.concatArray(t,Mt.go(o[1],"pu-9,9")),t.push("^{"+o[2]+"}"),t},operator:function(n,o,t){return{type_:"operator",kind_:t||o}},space:function(){return{type_:"pu-space-1"}},output:function(n){var o,t=Mt.patterns.match_("{(...)}",n.d||"");t&&""===t.remainder&&(n.d=t.match_);var i=Mt.patterns.match_("{(...)}",n.q||"");if(i&&""===i.remainder&&(n.q=i.match_),n.d&&(n.d=n.d.replace(/\u00B0C|\^oC|\^{o}C/g,"{}^{\\circ}C"),n.d=n.d.replace(/\u00B0F|\^oF|\^{o}F/g,"{}^{\\circ}F")),n.q){n.q=n.q.replace(/\u00B0C|\^oC|\^{o}C/g,"{}^{\\circ}C"),n.q=n.q.replace(/\u00B0F|\^oF|\^{o}F/g,"{}^{\\circ}F");var a={d:Mt.go(n.d,"pu"),q:Mt.go(n.q,"pu")};"//"===n.o?o={type_:"pu-frac",p1:a.d,p2:a.q}:((o=a.d).push(a.d.length>1||a.q.length>1?{type_:" / "}:{type_:"/"}),Mt.concatArray(o,a.q))}else o=Mt.go(n.d,"pu-2");for(var r in n)delete n[r];return o}}},"pu-2":{transitions:Mt.createTransitions({empty:{"*":{action_:"output"}},"*":{"*":{action_:["output","cdot"],nextState:"0"}},"\\x":{"*":{action_:"rm="}},space:{"*":{action_:["output","space"],nextState:"0"}},"^{(...)}|^(-1)":{1:{action_:"^(-1)"}},"-9.,9":{0:{action_:"rm=",nextState:"0"},1:{action_:"^(-1)",nextState:"0"}},"{...}|else":{"*":{action_:"rm=",nextState:"1"}}}),actions:{cdot:function(){return{type_:"tight cdot"}},"^(-1)":function(n,o){n.rm+="^{"+o+"}"},space:function(){return{type_:"pu-space-2"}},output:function(n){var o=[];if(n.rm){var t=Mt.patterns.match_("{(...)}",n.rm||"");o=t&&""===t.remainder?Mt.go(t.match_,"pu"):{type_:"rm",p1:n.rm}}for(var i in n)delete n[i];return o}}},"pu-9,9":{transitions:Mt.createTransitions({empty:{0:{action_:"output-0"},o:{action_:"output-o"}},",":{0:{action_:["output-0","comma"],nextState:"o"}},".":{0:{action_:["output-0","copy"],nextState:"o"}},else:{"*":{action_:"text="}}}),actions:{comma:function(){return{type_:"commaDecimal"}},"output-0":function(n){var o=[];if(n.text_=n.text_||"",n.text_.length>4){var t=n.text_.length%3;0===t&&(t=3);for(var i=n.text_.length-3;i>0;i-=3)o.push(n.text_.substr(i,3)),o.push({type_:"1000 separator"});o.push(n.text_.substr(0,t)),o.reverse()}else o.push(n.text_);for(var a in n)delete n[a];return o},"output-o":function(n){var o=[];if(n.text_=n.text_||"",n.text_.length>4){for(var t=n.text_.length-3,i=0;i<t;i+=3)o.push(n.text_.substr(i,3)),o.push({type_:"1000 separator"});o.push(n.text_.substr(i))}else o.push(n.text_);for(var a in n)delete n[a];return o}}}};var vd,_o={go:function(n,o){if(!n)return"";for(var t="",i=!1,a=0;a<n.length;a++){var r=n[a];"string"==typeof r?t+=r:(t+=_o._go2(r),"1st-level escape"===r.type_&&(i=!0))}return!o&&!i&&t&&(t="{"+t+"}"),t},_goInner:function(n){return n&&_o.go(n,!0)},_go2:function(n){var o;switch(n.type_){case"chemfive":o="";var t={a:_o._goInner(n.a),b:_o._goInner(n.b),p:_o._goInner(n.p),o:_o._goInner(n.o),q:_o._goInner(n.q),d:_o._goInner(n.d)};t.a&&(t.a.match(/^[+\-]/)&&(t.a="{"+t.a+"}"),o+=t.a+"\\,"),(t.b||t.p)&&(o+="{\\vphantom{X}}",o+="^{\\hphantom{"+(t.b||"")+"}}_{\\hphantom{"+(t.p||"")+"}}",o+="{\\vphantom{X}}",o+="^{\\smash[t]{\\vphantom{2}}\\mathllap{"+(t.b||"")+"}}",o+="_{\\vphantom{2}\\mathllap{\\smash[t]{"+(t.p||"")+"}}}"),t.o&&(t.o.match(/^[+\-]/)&&(t.o="{"+t.o+"}"),o+=t.o),"kv"===n.dType?((t.d||t.q)&&(o+="{\\vphantom{X}}"),t.d&&(o+="^{"+t.d+"}"),t.q&&(o+="_{\\smash[t]{"+t.q+"}}")):"oxidation"===n.dType?(t.d&&(o+="{\\vphantom{X}}",o+="^{"+t.d+"}"),t.q&&(o+="{\\vphantom{X}}",o+="_{\\smash[t]{"+t.q+"}}")):(t.q&&(o+="{\\vphantom{X}}",o+="_{\\smash[t]{"+t.q+"}}"),t.d&&(o+="{\\vphantom{X}}",o+="^{"+t.d+"}"));break;case"rm":case"roman numeral":o="\\mathrm{"+n.p1+"}";break;case"text":n.p1.match(/[\^_]/)?(n.p1=n.p1.replace(" ","~").replace("-","\\text{-}"),o="\\mathrm{"+n.p1+"}"):o="\\text{"+n.p1+"}";break;case"state of aggregation":o="\\mskip2mu "+_o._goInner(n.p1);break;case"state of aggregation subscript":o="\\mskip1mu "+_o._goInner(n.p1);break;case"bond":if(!(o=_o._getBond(n.kind_)))throw["MhchemErrorBond","mhchem Error. Unknown bond type ("+n.kind_+")"];break;case"frac":var i="\\frac{"+n.p1+"}{"+n.p2+"}";o="\\mathchoice{\\textstyle"+i+"}{"+i+"}{"+i+"}{"+i+"}";break;case"pu-frac":var a="\\frac{"+_o._goInner(n.p1)+"}{"+_o._goInner(n.p2)+"}";o="\\mathchoice{\\textstyle"+a+"}{"+a+"}{"+a+"}{"+a+"}";break;case"tex-math":case"1st-level escape":o=n.p1+" ";break;case"frac-ce":o="\\frac{"+_o._goInner(n.p1)+"}{"+_o._goInner(n.p2)+"}";break;case"overset":o="\\overset{"+_o._goInner(n.p1)+"}{"+_o._goInner(n.p2)+"}";break;case"underset":o="\\underset{"+_o._goInner(n.p1)+"}{"+_o._goInner(n.p2)+"}";break;case"underbrace":o="\\underbrace{"+_o._goInner(n.p1)+"}_{"+_o._goInner(n.p2)+"}";break;case"color":o="{\\color{"+n.color1+"}{"+_o._goInner(n.color2)+"}}";break;case"color0":o="\\color{"+n.color+"}";break;case"arrow":var r={rd:_o._goInner(n.rd),rq:_o._goInner(n.rq)},s="\\x"+_o._getArrow(n.r);r.rq&&(s+="[{"+r.rq+"}]"),o=s+=r.rd?"{"+r.rd+"}":"{}";break;case"operator":o=_o._getOperator(n.kind_);break;case"space":o=" ";break;case"entitySkip":case"pu-space-1":o="~";break;case"pu-space-2":o="\\mkern3mu ";break;case"1000 separator":o="\\mkern2mu ";break;case"commaDecimal":o="{,}";break;case"comma enumeration L":o="{"+n.p1+"}\\mkern6mu ";break;case"comma enumeration M":o="{"+n.p1+"}\\mkern3mu ";break;case"comma enumeration S":o="{"+n.p1+"}\\mkern1mu ";break;case"hyphen":o="\\text{-}";break;case"addition compound":o="\\,{\\cdot}\\,";break;case"electron dot":o="\\mkern1mu \\bullet\\mkern1mu ";break;case"KV x":o="{\\times}";break;case"prime":o="\\prime ";break;case"cdot":o="\\cdot ";break;case"tight cdot":o="\\mkern1mu{\\cdot}\\mkern1mu ";break;case"times":o="\\times ";break;case"circa":o="{\\sim}";break;case"^":o="uparrow";break;case"v":o="downarrow";break;case"ellipsis":o="\\ldots ";break;case"/":o="/";break;case" / ":o="\\,/\\,";break;default:throw["MhchemBugT","mhchem bug T. Please report."]}return o},_getArrow:function(n){switch(n){case"->":case"\u2192":case"\u27f6":return"rightarrow";case"<-":return"leftarrow";case"<->":return"leftrightarrow";case"<--\x3e":return"rightleftarrows";case"<=>":case"\u21cc":return"rightleftharpoons";case"<=>>":return"rightequilibrium";case"<<=>":return"leftequilibrium";default:throw["MhchemBugT","mhchem bug T. Please report."]}},_getBond:function(n){switch(n){case"-":case"1":return"{-}";case"=":case"2":return"{=}";case"#":case"3":return"{\\equiv}";case"~":return"{\\tripledash}";case"~-":return"{\\mathrlap{\\raisebox{-.1em}{$-$}}\\raisebox{.1em}{$\\tripledash$}}";case"~=":case"~--":return"{\\mathrlap{\\raisebox{-.2em}{$-$}}\\mathrlap{\\raisebox{.2em}{$\\tripledash$}}-}";case"-~-":return"{\\mathrlap{\\raisebox{-.2em}{$-$}}\\mathrlap{\\raisebox{.2em}{$-$}}\\tripledash}";case"...":return"{{\\cdot}{\\cdot}{\\cdot}}";case"....":return"{{\\cdot}{\\cdot}{\\cdot}{\\cdot}}";case"->":return"{\\rightarrow}";case"<-":return"{\\leftarrow}";case"<":return"{<}";case">":return"{>}";default:throw["MhchemBugT","mhchem bug T. Please report."]}},_getOperator:function(n){switch(n){case"+":return" {}+{} ";case"-":return" {}-{} ";case"=":return" {}={} ";case"<":return" {}<{} ";case">":return" {}>{} ";case"<<":return" {}\\ll{} ";case">>":return" {}\\gg{} ";case"\\pm":return" {}\\pm{} ";case"\\approx":case"$\\approx$":return" {}\\approx{} ";case"v":case"(v)":return" \\downarrow{} ";case"^":case"(^)":return" \\uparrow{} ";default:throw["MhchemBugT","mhchem bug T. Please report."]}}},B2=class extends kt{constructor(n,o,t,i){super("delim",t,{command:n,style:i?.style}),this.value=o,this.size=i?.size}static fromJson(n,o){return new B2(n.command,n.delim,o,n)}toJson(){return mi(Et({},super.toJson()),{delim:this.value,size:this.size})}render(n){let o=new Ht(null);return o.delim=this.value,o}serialize(n){return 1===this.value.length?this.command+this.value:`${this.command}{${this.value}}`}},P2=class extends kt{constructor(n,o,t,i){super("sizeddelim",t,{command:n,style:i.style}),this.value=o,this.delimClass=i.delimClass,this.size=i.size}static fromJson(n,o){return new P2(n.command,n.delim,o,n)}toJson(){return mi(Et({},super.toJson()),{delim:this.value,size:this.size,delimClass:this.delimClass})}render(n){let o=function gY(n,o,t,i){var a;return void 0===n||"."===n?Sm(t,null!=(a=i.type)?a:"minner",i.classes):("<"===n||"\\lt"===n||"\u27e8"===n?n="\\langle":(">"===n||"\\gt"===n||"\u27e9"===n)&&(n="\\rangle"),Oy.has(n)||Iy.has(n)?Sy(n,o,!1,t,i):_Y.has(n)?Ey(n,fY[o],!1,t,i):null)}(this.value,this.size,n,{classes:this.delimClass});return o?(o=this.bind(n,o),this.caret&&(o.caret=this.caret),o):null}serialize(n){return 1===this.value.length?this.command+this.value:`${this.command}{${this.value}}`}},ph=class extends kt{constructor(n,o,t,i,a){super("enclose",i,{command:n,style:a.style}),this.body=o,this.backgroundcolor=a.backgroundcolor,t.updiagonalarrow&&(t.updiagonalstrike=!1),t.box&&(t.left=!1,t.right=!1,t.bottom=!1,t.top=!1),this.notation=t,this.shadow=a.shadow,this.strokeWidth=a.strokeWidth,this.strokeStyle=a.strokeStyle,this.svgStrokeStyle=a.svgStrokeStyle,this.strokeColor=a.strokeColor,this.borderStyle=a.borderStyle,this.padding=a.padding,this.captureSelection=!0}static fromJson(n,o){return new ph(n.command,n.body,n.notation,o,n)}toJson(){let n={};return this.notation.downdiagonalstrike&&(n.downdiagonalstrike=!0),this.notation.updiagonalstrike&&(n.downdiagonalstrike=!0),this.notation.verticalstrike&&(n.downdiagonalstrike=!0),this.notation.horizontalstrike&&(n.downdiagonalstrike=!0),this.notation.updiagonalarrow&&(n.downdiagonalstrike=!0),this.notation.right&&(n.downdiagonalstrike=!0),this.notation.bottom&&(n.downdiagonalstrike=!0),this.notation.left&&(n.downdiagonalstrike=!0),this.notation.top&&(n.downdiagonalstrike=!0),this.notation.circle&&(n.downdiagonalstrike=!0),this.notation.roundedbox&&(n.downdiagonalstrike=!0),this.notation.madruwb&&(n.downdiagonalstrike=!0),this.notation.actuarial&&(n.downdiagonalstrike=!0),this.notation.box&&(n.downdiagonalstrike=!0),mi(Et({},super.toJson()),{notation:n,shadow:this.shadow,strokeWidth:this.strokeWidth,strokeStyle:this.strokeStyle,svgStrokeStyle:this.svgStrokeStyle,strokeColor:this.strokeColor,borderStyle:this.borderStyle,padding:this.padding})}serialize(n){var o;let t=null!=(o=this.command)?o:"";if("\\enclose"===this.command){t+="{"+Object.keys(this.notation).join(" ")+"}";let i="",a="";this.backgroundcolor&&"transparent"!==this.backgroundcolor&&(i+=a+'mathbackground="'+this.backgroundcolor+'"',a=","),this.shadow&&"auto"!==this.shadow&&(i+=a+'shadow="'+this.shadow+'"',a=","),this.strokeWidth||"solid"!==this.strokeStyle?(i+=a+this.borderStyle,a=","):this.strokeColor&&"currentColor"!==this.strokeColor&&(i+=a+'mathcolor="'+this.strokeColor+'"',a=","),i&&(t+=`[${i}]`)}return t+=`{${this.bodyToLatex(n)}}`,t}render(n){var o;let t=new pi(n,this.style),i=kt.createBox(t,this.body);if(!i)return null;let a=null!=(o=Cc(this.padding&&"auto"!==this.padding?g1(this.padding,mi(Et({},this.context),{registers:n.registers})):t.getRegisterAsDimension("fboxsep")))?o:0,r=function EY(n){if(!n)return"1px";let o=n.match(/([0-9][a-zA-Z\%]+)/);return null===o?"1px":o[1]}(this.borderStyle),s=new Ht(null,{classes:"ML__notation"});s.setStyle("box-sizing","border-box"),s.setStyle("top",`calc(-${r} / 2 - ${a}em)`),s.setStyle("left",`calc(-${r} / 2 - ${a}em)`),s.setStyle("height",`calc(100% + ${2*a}em + 2 * ${r})`),s.height=i.height+a,s.depth=i.depth+a,s.setStyle("width",`calc(100% + ${2*a}em + 2 * ${r})`),this.backgroundcolor&&s.setStyle("background-color",this.backgroundcolor),this.notation.box&&s.setStyle("border",this.borderStyle),this.notation.actuarial&&(s.setStyle("border-top",this.borderStyle),s.setStyle("border-right",this.borderStyle)),this.notation.madruwb&&(s.setStyle("border-bottom",this.borderStyle),s.setStyle("border-right",this.borderStyle)),this.notation.roundedbox&&(s.setStyle("border-radius","8px"),s.setStyle("border",this.borderStyle)),this.notation.circle&&(s.setStyle("border-radius","50%"),s.setStyle("border",this.borderStyle)),this.notation.top&&s.setStyle("border-top",this.borderStyle),this.notation.left&&s.setStyle("border-left",this.borderStyle),this.notation.right&&s.setStyle("border-right",this.borderStyle),this.notation.bottom&&s.setStyle("border-bottom",this.borderStyle);let l="";if(this.notation.horizontalstrike&&(l+='<line x1="3%"  y1="50%" x2="97%" y2="50%"',l+=` stroke-width="${this.strokeWidth}" stroke="${this.strokeColor}"`,l+=' stroke-linecap="round"',this.svgStrokeStyle&&(l+=` stroke-dasharray="${this.svgStrokeStyle}"`),l+="/>"),this.notation.verticalstrike&&(l+='<line x1="50%"  y1="3%" x2="50%" y2="97%"',l+=` stroke-width="${this.strokeWidth}" stroke="${this.strokeColor}"`,l+=' stroke-linecap="round"',this.svgStrokeStyle&&(l+=` stroke-dasharray="${this.svgStrokeStyle}"`),l+="/>"),this.notation.updiagonalstrike&&(l+='<line x1="3%"  y1="97%" x2="97%" y2="3%"',l+=` stroke-width="${this.strokeWidth}" stroke="${this.strokeColor}"`,l+=' stroke-linecap="round"',this.svgStrokeStyle&&(l+=` stroke-dasharray="${this.svgStrokeStyle}"`),l+="/>"),this.notation.downdiagonalstrike&&(l+='<line x1="3%"  y1="3%" x2="97%" y2="97%"',l+=` stroke-width="${this.strokeWidth}" stroke="${this.strokeColor}"`,l+=' stroke-linecap="round"',this.svgStrokeStyle&&(l+=` stroke-dasharray="${this.svgStrokeStyle}"`),l+="/>"),l){let u;"none"!==this.shadow&&(u="auto"===this.shadow?"filter: drop-shadow(0 0 .5px rgba(255, 255, 255, .7)) drop-shadow(1px 1px 2px #333)":"filter: drop-shadow("+this.shadow+")"),function iY(n,o,t){n.svgOverlay=o,n.svgStyle=t}(s,l,u)}let c=new Ht([s,i]);return c.setStyle("position","relative"),c.setStyle("display","inline"),c.height=i.height+a,c.depth=i.depth+a,c.left=a,c.right=a,this.caret&&(c.caret=this.caret),c.wrap(t)}},Im=class extends kt{constructor(n,o,t,i,a){var r,s;super("genfrac",i,{style:a.style,command:n,serialize:a.serialize,displayContainsHighlight:!0}),this.above=o,this.below=t,this.hasBarLine=null==(r=a?.hasBarLine)||r,this.continuousFraction=null!=(s=a?.continuousFraction)&&s,this.numerPrefix=a?.numerPrefix,this.denomPrefix=a?.denomPrefix,this.mathstyleName=a?.mathstyleName,this.leftDelim=a?.leftDelim,this.rightDelim=a?.rightDelim}static fromJson(n,o){return new Im(n.command,n.above,n.below,o,n)}toJson(){let n={};return this.continuousFraction&&(n.continuousFraction=!0),this.numerPrefix&&(n.numerPrefix=this.numerPrefix),this.denomPrefix&&(n.denomPrefix=this.denomPrefix),this.leftDelim&&(n.leftDelim=this.leftDelim),this.rightDelim&&(n.rightDelim=this.rightDelim),this.hasBarLine||(n.hasBarLine=!1),this.mathstyleName&&(n.mathstyleName=this.mathstyleName),Et(Et({},super.toJson()),n)}serialize(n){return this.command+`{${this.aboveToLatex(n)}}{${this.belowToLatex(n)}}`}get children(){if(this._children)return this._children;let n=[];if("numerator-denominator"===this.context.fractionNavigationOrder){for(let o of this.above)n.push(...o.children),n.push(o);for(let o of this.below)n.push(...o.children),n.push(o)}else{for(let o of this.below)n.push(...o.children),n.push(o);for(let o of this.above)n.push(...o.children),n.push(o)}return this._children=n,n}render(n){var o,t;let m,f,i=new pi(n,this.style,this.mathstyleName),a=i.metrics,r=new pi(i,this.style,this.continuousFraction?"":"numerator"),s=this.numerPrefix?new Ht([new Ht(this.numerPrefix),kt.createBox(r,this.above)],{isTight:r.isTight,newList:!0}):null!=(o=kt.createBox(r,this.above,{newList:!0}))?o:new Ht(null,{newList:!0}),l=new pi(i,this.style,this.continuousFraction?"":"denominator"),c=this.denomPrefix?new Ht([new Ht(this.denomPrefix),kt.createBox(l,this.below,{newList:!0})]):null!=(t=kt.createBox(l,this.below,{newList:!0}))?t:new Ht(null,{newList:!0}),u=this.hasBarLine?a.defaultRuleThickness:0,p=0;i.isDisplayStyle?(m=a.num1,p=u>0?3*u:7*u,f=a.denom1):(u>0?(m=a.num2,p=u):(m=a.num3,p=3*u),f=a.denom2);let b=[];this.isSelected&&b.push("ML__selected");let R,L=s.depth,N=c.height;if(u<=0){let ve=m-L-(N-f);ve<p&&(m+=(p-ve)/2,f+=(p-ve)/2),R=new sa({individualShift:[{box:s,shift:-m,classes:[...b,"ML__center"]},{box:c,shift:f,classes:[...b,"ML__center"]}]}).wrap(i)}else{let ve=bl+u/2,ce=bl-u/2;m<p+L+ve&&(m=p+L+ve),f<p+N-ce&&(f=p+N-ce);let te=new Ht(null,{classes:"ML__frac-line",mode:this.mode,style:this.style});te.height=u/2,te.depth=u/2,R=new sa({individualShift:[{box:c,shift:f,classes:[...b,"ML__center"]},{box:te,shift:u/2-ce,classes:b},{box:s,shift:-m,classes:[...b,"ML__center"]}]}).wrap(i)}let j=i.isDisplayStyle?a.delim1:a.delim2,G=this.isSelected?" ML__selected":"",ae=this.leftDelim?this.bind(n,A1("mopen",this.leftDelim,j,!0,n,{style:this.style,mode:this.mode,classes:G})):Sm(i,"mopen"),W=null;W=this.continuousFraction?new Ht(null,{type:"mclose"}):this.rightDelim?this.bind(n,A1("mclose",this.rightDelim,j,!0,n,{style:this.style,mode:this.mode,classes:G})):Sm(i,"mclose");let le=this.bind(n,new Ht([ae,R,W],{isTight:i.isTight,type:"mord",classes:"mfrac"}));return le?(this.caret&&(le.caret=this.caret),this.attachSupsub(n,{base:le})):null}},la=class extends kt{constructor(n,o,t){var i;super("latex",o,{value:n,mode:"latex"}),this.isSuggestion=null!=(i=t?.isSuggestion)&&i,this.isError=!1,this.verbatimLatex=n}static fromJson(n,o){let t=new la(n.command,o);return n.isSuggestion&&(t.isSuggestion=!0),n.isError&&(t.isError=!0),t}toJson(){let n={};return this.isSuggestion&&(n.isSuggestion=!0),this.isError&&(n.isError=!0),Et(Et({},super.toJson()),n)}get computedStyle(){return{}}render(n){let o=new Ht(this.value,{classes:this.isSuggestion?"ML__suggestion":this.isError?"ML__error":"",type:"latex",maxFontSize:1});return o?(this.caret&&(o.caret=this.caret),this.bind(n,o)):null}},xd=class extends kt{constructor(n,o){super("latexgroup",o,{mode:"latex"}),this.body=[...n].map(t=>new la(t,o)),this.skipBoundary=!1}static fromJson(n,o){return new xd("",o)}toJson(){return super.toJson()}render(n){let o=kt.createBox(n,this.body,{newList:!0});return o?(this.caret&&(o.caret=this.caret),this.bind(n,o)):null}serialize(n){var o,t;return null!=(t=null==(o=this.body)?void 0:o.map(i=>i.value).join(""))?t:""}},v1=class extends kt{constructor(n,o,t,i){super("line",t,{command:n,style:i.style}),this.skipBoundary=!0,this.body=o,this.position=i.position}static fromJson(n,o){return new v1(n.command,n.body,o,n)}toJson(){return mi(Et({},super.toJson()),{position:this.position})}render(n){let o=new pi(n,this.style,"cramp"),t=kt.createBox(o,this.body);if(!t)return null;let r,i=o.metrics.defaultRuleThickness/o.scalingFactor,a=new Ht(null,{classes:this.position+"-line"});return a.height=i,a.maxFontSize=1.125*i*o.scalingFactor,r=new sa("overline"===this.position?{shift:0,children:[{box:t},3*i,{box:a},i]}:{top:t.height,children:[i,{box:a},3*i,{box:t}]}),this.caret&&(r.caret=this.caret),new Ht(r,{classes:this.position,type:"mord"})}},fs=class extends kt{constructor(n,o,t,i){var a,r,s,l;super(null!=(a=i.type)?a:"mop",t,{command:n,style:i.style,isFunction:i?.isFunction}),"string"==typeof o?this.value=o:this.body=o,this.captureSelection=null!=(r=i.captureSelection)&&r,this.hasArgument=null!=(s=i.hasArgument)&&s,this.variant=i?.variant,this.variantStyle=i?.variantStyle,this.subsupPlacement=i?.limits,this.isExtensibleSymbol=null!=(l=i?.isExtensibleSymbol)&&l}static fromJson(n,o){return new fs(n.command,n.body?n.body:n.value,o,n)}toJson(){let n=super.toJson();return this.hasArgument&&(n.hasArgument=!0),this.variant&&(n.variant=this.variant),this.variantStyle&&(n.variantStyle=this.variantStyle),this.subsupPlacement&&(n.limits=this.subsupPlacement),this.isExtensibleSymbol&&(n.isExtensibleSymbol=!0),this.value&&(n.symbol=this.value),n}render(n){var o;let t,i=0,a=0;if(this.isExtensibleSymbol){let s=n.isDisplayStyle&&"\\smallint"!==this.value;if(t=new Ht(this.value,{fontFamily:s?"Size2-Regular":"Size1-Regular",classes:"op-symbol "+(s?"large-op":"small-op"),type:"mop",maxFontSize:n.scalingFactor}),!t)return null;t.right=t.italic,i=(t.height-t.depth)/2-bl*n.scalingFactor,a=t.italic,t.setStyle("color",this.style.color),t.setStyle("background-color",this.style.backgroundColor)}else if(this.body){if(t=kt.createBox(n,this.body,{newList:!0}),!t)return null;t.setStyle("color",this.style.color),t.setStyle("background-color",this.style.backgroundColor)}else t=new Ht(this.value,{type:"mop",mode:"math",maxFontSize:n.scalingFactor,style:{color:this.style.color,backgroundColor:this.style.backgroundColor,letterShapeStyle:n.letterShapeStyle,variant:this.variant,variantStyle:this.variantStyle}});this.isExtensibleSymbol&&t.setTop(i);let r=t;if(this.superscript||this.subscript){let s=null!=(o=this.subsupPlacement)?o:"auto";r="over-under"===s||"auto"===s&&n.isDisplayStyle?this.attachLimits(n,{base:t,baseShift:i,slant:a}):this.attachSupsub(n,{base:t})}return this.caret&&(r.caret=this.caret),new Ht(this.bind(n,r),{type:"mop",classes:"op-group"+(this.isSelected?" ML__selected":"")})}serialize(n){if("\u200b"===this.value)return this.supsubToLatex(n);let o=[];return o.push(this.command),this.hasArgument&&o.push(`{${this.bodyToLatex(n)}}`),this.explicitSubsupPlacement&&("over-under"===this.subsupPlacement&&o.push("\\limits"),"adjacent"===this.subsupPlacement&&o.push("\\nolimits"),"auto"===this.subsupPlacement&&o.push("\\displaylimits")),o.push(this.supsubToLatex(n)),Bo(o)}},bd=class extends kt{constructor(n,o,t,i){var a,r;super("overlap",t,{command:n,style:i?.style}),this.skipBoundary=!0,this.body="string"==typeof o?[new kt("mord",t,{value:o})]:o,this.align=null!=(a=i?.align)?a:"left",this.boxType=null!=(r=i?.boxType)?r:"mord"}static fromJson(n,o){return new bd(n.command,n.body,o,n)}toJson(){let n={};return this.align&&(n.align=this.align),this.boxType&&(n.boxType=this.boxType),Et(Et({},super.toJson()),n)}render(n){let o=kt.createBox(n,this.body,{classes:"inner"});return o?(this.caret&&(o.caret=this.caret),this.bind(n,new Ht([o,new Ht(null,{classes:"fix"})],{classes:"left"===this.align?"llap":"rlap",type:this.boxType}))):null}},Mm=class extends kt{constructor(n,o,t,i){var a,r,s,l;super("phantom",t,{command:n,style:i.style}),this.captureSelection=!0,this.body=o,this.isInvisible=null!=(a=i.isInvisible)&&a,this.smashDepth=null!=(r=i.smashDepth)&&r,this.smashHeight=null!=(s=i.smashHeight)&&s,this.smashWidth=null!=(l=i.smashWidth)&&l}static fromJson(n,o){return new Mm(n.command,n.body,o,n)}toJson(){let n={};return this.isInvisible&&(n.isInvisible=!0),this.smashDepth&&(n.smashDepth=!0),this.smashHeight&&(n.smashHeight=!0),this.smashWidth&&(n.smashWidth=!0),Et(Et({},super.toJson()),n)}render(n){let o=new pi(n,{isPhantom:!0});if(!this.smashDepth&&!this.smashHeight&&!this.smashWidth)return kt.createBox(o,this.body,{classes:"inner"});let t=kt.createBox(this.isInvisible?o:n,this.body);if(!t)return null;if(this.smashWidth){let i=new Ht(null,{classes:"fix"});return new Ht([t,i],{classes:"rlap"}).wrap(n)}if(!this.smashHeight&&!this.smashDepth)return t;if(this.smashHeight&&(t.height=0),this.smashDepth&&(t.depth=0),t.children)for(let i of t.children)this.smashHeight&&(i.height=0),this.smashDepth&&(i.depth=0);return new sa({firstBaseline:[{box:t}]},{type:"mord"}).wrap(n)}},Q2=class extends kt{constructor(n,o,t){var i;super("rule",o,{command:n,style:t.style}),this.shift=null!=(i=t.shift)?i:{dimension:0},this.height=t.height,this.width=t.width}static fromJson(n,o){return new Q2(n.command,o,n)}toJson(){let n={height:this.height,width:this.width};return this.shift&&(n.shift=this.shift),Et(Et({},super.toJson()),n)}render(n){let o=new pi(n,this.style,"textstyle"),t=Cc(this.shift),i=Cc(this.width),a=Cc(this.height),r=new Ht(null,{classes:"rule",type:"mord"});return r.setStyle("border-right-width",i,"em"),r.setStyle("border-top-width",a,"em"),r.setStyle("border-color",this.style.color),r.setStyle("vertical-align",t,"em"),this.isSelected&&r.setStyle("opacity","50%"),r.width=i,r.height=a+t,r.depth=-t,this.bind(n,r),this.caret&&(r.caret=this.caret),r.wrap(o)}serialize(n){var o;let t=null!=(o=this.command)?o:"";return this.shift&&(t+=`[${C2(this.shift)}]`),t+=`{${C2(this.width)}}{${C2(this.height)}}`,t}},F2=class extends kt{constructor(n,o,t){var i;super("surd",o,{command:n,mode:null!=(i=t.mode)?i:"math",style:t.style,displayContainsHighlight:!0}),this.body=t.body,this.above=t.index}static fromJson(n,o){return new F2(n.command,o,mi(Et({},n),{index:n.above}))}toJson(){return super.toJson()}serialize(n){let o="";return this.above&&(o+=`[${this.aboveToLatex(n)}]`),o+=`{${this.bodyToLatex(n)}}`,this.command+o}render(n){var o;let t=new pi(n,this.style,"cramp"),i=null!=(o=kt.createBox(t,this.body,{style:this.style,newList:!0}))?o:new Ht(null),a=t.scalingFactor,r=t.metrics.defaultRuleThickness/a,s=n.isDisplayStyle?wm:r,l=new Ht(null,{classes:"ML__sqrt-line",style:this.style,height:r}),c=a*(r+s/4),u=Math.max(2*a*s,i.height+i.depth)+c+r,m=new pi(n,this.style),p=this.isSelected?" ML__selected":"",f=this.bind(m,new Ht(A1("","\\surd",u,!1,m,{classes:p}),{classes:"ML__sqrt-sign"+p,style:this.style}));if(!f)return null;let b=f.height+f.depth-r;b>i.height+i.depth+c&&(c=(c+b-(i.height+i.depth))/2),f.setTop(f.height-i.height-c);let L=this.bind(n,new sa({firstBaseline:[{box:new Ht(i)},c-2*r,{box:l},r]}).wrap(n)),N=kt.createBox(new pi(n,this.style,"scriptscriptstyle"),this.above,{style:this.style,newList:!0});if(!N){let G=new Ht([f,L],{classes:this.containsCaret?"ML__contains-caret":"",type:"mord"});return this.caret&&(G.caret=this.caret),this.bind(n,G.wrap(n))}let R=new sa({shift:-.6*(Math.max(f.height,L.height)-Math.max(f.depth,L.depth)),children:[{box:N}]}),j=new Ht([new Ht(R,{classes:"ML__sqrt-index"}),f,L],{type:"mord",classes:this.containsCaret?"ML__contains-caret":""});return j.height=f.height,j.depth=f.depth,this.caret&&(j.caret=this.caret),this.bind(n,j.wrap(n))}},Ly={"p@":"1pt ","z@":"0pt",maxdimen:"16383.99999pt",hfuzz:"0.1pt",vfuzz:"0.1pt",overfullrule:"5pt",hsize:"6.5in",vsize:"8.9in",parindent:"20pt",maxdepth:"4pt",splitmaxdepth:"\\maxdimen",boxmaxdepth:"\\maxdimen",delimitershortfall:"5pt",nulldelimiterspace:"1.2pt",scriptspace:"0.5pt",topskip:"10pt",splittopskip:"10pt",normalbaselineskip:"12pt",normallineskip:"1pt",normallineskiplimit:"0pt",jot:"3pt",doublerulesep:"2pt",arrayrulewidth:"0.4pt",arraycolsep:"5pt",fboxsep:"3pt",fboxrule:"0.4pt"},By={"z@skip":"0pt plust0pt minus0pt",hideskip:"-1000pt plust 1fill","@flushglue":"0pt plust 1fill",parskip:"0pt plus 1pt",abovedisplayskip:"12pt plus 3pt minus 9pt",abovedisplayshortskip:"0pt plus 3pt",belowdisplayskip:"12pt plus 3pt minus 9pt",belowdisplayshortskip:"7pt plus 3pt minus 4pt",parfillskip:"0pt plus 1fil",thinmuskip:"3mu",medmuskip:"4mu plus 2mu minus 4mu",thickmuskip:"5mu plus 5mu",smallskipamount:"3pt plus1pt minus1pt",medskipamount:"6pt plus2pt minus2pt",bigskipamount:"12pt plus4pt minus4pt"},OY={pretolerance:100,tolerance:200,hbadness:1e3,vbadness:1e3,linepenalty:10,hyphenpenalty:50,exhyphenpenalty:50,binoppenalty:700,relpenalty:500,clubpenalty:150,widowpenalty:150,displaywidowpenalty:50,brokenpenalty:100,predisplaypenalty:1e4,doublehyphendemerits:1e4,finalhyphendemerits:5e3,adjdemerits:1e4,tracinglostchars:1,uchyph:1,delimiterfactor:901,defaulthyphenchar:"\\-",defaultskewchar:-1,newlinechar:-1,showboxbreadth:5,showboxdepth:3,errorcontextlines:5,interdisplaylinepenalty:100,interfootnotelinepenalty:100,baselineSkip:1.2,arraystretch:"",month:(new Date).getMonth()+1,day:(new Date).getDate(),year:(new Date).getFullYear()};function Py(n){var o,t;if(vd)return vd;vd=Et({},OY);for(let i of Object.keys(Ly))vd[i]=null!=(o=g1(Ly[i],n,vd))?o:0;for(let i of Object.keys(By))vd[i]=null!=(t=TY(By[i],n,vd))?t:0;return vd}function Lm(){let n={registers:{},smartFence:!1,fractionNavigationOrder:"numerator-denominator",placeholderSymbol:"\u25a2",letterShapeStyle:Ao.locale.startsWith("fr")?"french":"tex",colorMap:t1,backgroundColorMap:m2,getDefinition:N2,getMacro:o=>Qy(o,g2())};return mi(Et({},n),{registers:Py(n)})}function N2(n,o="math"){if(!n||0===n.length)return null;let t=null;if(n.startsWith("\\")){if(t=wc[n],t)return t;"math"===o?t=vc[n]:fu[n]&&(t={definitionType:"symbol",type:"mord",codepoint:fu[n]})}else if("math"===o){if(t=vc[n],!t&&1===n.length){let i=o1("math",n.codePointAt(0));return i.startsWith("\\")?mi(Et({},N2(i,"math")),{command:i}):null}}else fu[n]?t={definitionType:"symbol",type:"mord",codepoint:fu[n]}:"text"===o&&(t={definitionType:"symbol",type:"mord",codepoint:n.codePointAt(0)});return t&&"symbol"===t.definitionType&&"mord"===t.type&&(102===t.codepoint||103===t.codepoint||104===t.codepoint)&&(t.isFunction=!0),t??null}function Qy(n,o){return n.startsWith("\\")?o[n.slice(1)]:null}var w1=class extends kt{constructor(n,o,t,i){super("tooltip",t,{command:i?.command,mode:"math",serialize:i?.serialize,style:i?.style,displayContainsHighlight:!0}),this.body=n;let a=Lm();this.tooltip=new kt("root",a,{style:{}}),this.tooltip.body=o,this.skipBoundary=!0,this.captureSelection=!1}static fromJson(n,o){return new w1(n.body,wl(n.tooltip,o),o,n)}toJson(){var n;let o=null==(n=this.tooltip.body)?void 0:n.filter(t=>"first"!==t.type).map(t=>t.toJson());return mi(Et({},super.toJson()),{tooltip:o})}render(n){let o=kt.createBox(n,this.body,{style:this.style});if(!o)return null;let t=c1(ch(new Ht(this.tooltip.render(new pi({registers:n.registers},{fontSize:ym},"displaystyle")),{classes:"ML__tooltip-content"}))),i=new Ht([t,o],{classes:"ML__tooltip-container"});return this.caret&&(i.caret=this.caret),this.bind(n,i)}serialize(n){return`${this.command}{${this.bodyToLatex(n)}}{${kt.serialize(this.tooltip.body,n)}}`}};function wl(n,o){if(Ea(n))return n.map(a=>wl(a,o));n=Et({},n);for(let a of Tm)n[a]&&(n[a]=wl(n[a],o));n.array&&(n.array=wl(n.array,o));let i,t=n.type;"accent"===t&&(i=A_.fromJson(n,o)),"array"===t&&(i=So.fromJson(n,o)),"box"===t&&(i=Om.fromJson(n,o)),"chem"===t&&(i=L2.fromJson(n,o)),"choice"===t&&(i=Z2.fromJson(n,o)),"composition"===t&&(i=M2.fromJson(n,o)),"delim"===t&&(i=B2.fromJson(n,o)),"enclose"===t&&(i=ph.fromJson(n,o)),"error"===t&&(i=O2.fromJson(n,o)),"genfrac"===t&&(i=Im.fromJson(n,o)),"group"===t&&(i=Oa.fromJson(n,o)),"latex"===t&&(i=la.fromJson(n,o)),"latexgroup"===t&&(i=xd.fromJson(n,o)),"leftright"===t&&(i=Wa.fromJson(n,o)),"line"===t&&(i=v1.fromJson(n,o)),"macro"===t&&(i=I2.fromJson(n,o)),"msubsup"===t&&(i=g_.fromJson(n,o)),"overlap"===t&&(i=bd.fromJson(n,o)),"overunder"===t&&(i=_s.fromJson(n,o)),"placeholder"===t&&(n.defaultValue&&(n.defaultValue=wl(n.defaultValue,o)),i=Ro.fromJson(n,o)),"phantom"===t&&(i=Mm.fromJson(n,o)),"rule"===t&&(i=Q2.fromJson(n,o)),"sizeddelim"===t&&(i=P2.fromJson(n,o)),"spacing"===t&&(i=Em.fromJson(n,o)),"surd"===t&&(i=F2.fromJson(n,o)),"text"===t&&(i=mh.fromJson(n,o)),"tooltip"===t&&(i=w1.fromJson(n,o)),"mop"===t&&(i=fs.fromJson(n,o)),i||(["first","mbin","mrel","mclose","minner","mopen","mord","mpunct","root","space"].includes(t),i=kt.fromJson(n,o));for(let a of Tm)n[a]&&i.setChildren(n[a],a);return void 0!==n.verbatimLatex&&(i.verbatimLatex=n.verbatimLatex),n.subsupPlacement&&(i.subsupPlacement=n.subsupPlacement),n.explicitSubsupPlacement&&(i.explicitSubsupPlacement=!0),n.isFunction&&(i.isFunction=!0),n.isExtensibleSymbol&&(i.isExtensibleSymbol=!0),n.skipBoundary&&(i.skipBoundary=!0),n.captureSelection&&(i.captureSelection=!0),i}var Z2=class extends kt{constructor(n,o){super("choice",o),this.choices=n,this.skipBoundary=!0}static fromJson(n,o){return new Z2([wl(n.choices[0],o),wl(n.choices[1],o),wl(n.choices[2],o),wl(n.choices[3],o)],o)}toJson(){let n=[];for(let o of this.choices)n.push(o.filter(t=>"first"!==t.type).map(t=>t.toJson()));return mi(Et({},super.toJson()),{choices:n})}render(n){let o=kt.createBox(n,this.choices[Math.floor(n.mathstyle.id/2)]);return o?(this.caret&&(o.caret=this.caret),this.bind(n,o)):null}serialize(n){return`\\mathchoice{${kt.serialize(this.choices[0],n)}}{${kt.serialize(this.choices[1],n)}}{${kt.serialize(this.choices[2],n)}}{${kt.serialize(this.choices[3],n)}}`}};Tt("mathtip","{:math}{:math}",{createAtom:(n,o,t,i)=>new w1(o[0],o[1],i,{command:n,content:"math",style:t})}),Tt("texttip","{:math}{:text}",{createAtom:(n,o,t,i)=>new w1(o[0],o[1],i,{command:n,content:"text",style:t})}),Tt("error","{:math}",{createAtom:(n,o,t,i)=>new Oa(o[0],i,{mode:"math",command:"\\error",customClass:"ML__error",style:t,serialize:(a,r)=>`\\error{${a.bodyToLatex(r)}}`})}),Tt("ensuremath","{:math}",{createAtom:(n,o,t,i)=>new Oa(o[0],i,{mode:"math",latexOpen:"\\ensuremath{",latexClose:"}",style:t})}),Tt("color","{:string}",{applyStyle:(n,o,t)=>{var i,a;let r=o[0];return{verbatimColor:o[0],color:null!=(a=null==(i=t.colorMap)?void 0:i.call(t,r))?a:r}}}),Tt("textcolor","{:string}{content:auto*}",{applyStyle:(n,o,t)=>{var i,a;let r=o[0];return{verbatimColor:r,color:null!=(a=null==(i=t.colorMap)?void 0:i.call(t,r))?a:r}}}),Tt("boxed","{content:math}",{createAtom:(n,o,t,i)=>new Om(n,o[0],i,{framecolor:"black",style:t})}),Tt("colorbox","{:string}{content:auto*}",{applyMode:"text",applyStyle:(n,o,t)=>{var i,a;let r=o[0];return{verbatimBackgroundColor:o[0],backgroundColor:null!=(a=null==(i=t.backgroundColorMap)?void 0:i.call(t,r))?a:r}}}),Tt("fcolorbox","{frame-color:string}{background-color:string}{content:auto}",{applyMode:"text",createAtom:(n,o,t,i)=>{var a,r,s,l;let c=o[0],u=o[1];return new Om(n,o[2],i,{verbatimFramecolor:c,framecolor:null!=(r=null==(a=i.colorMap)?void 0:a.call(i,c))?r:c,verbatimBackgroundcolor:o[1],backgroundcolor:null!=(l=null==(s=i.backgroundColorMap)?void 0:s.call(i,u))?l:u,style:t,serialize:(m,p)=>{var f,b;return`${m.command}{${null!=(f=m.verbatimFramecolor)?f:m.framecolor}{${null!=(b=m.verbatimBackgroundcolor)?b:m.backgroundcolor}}{${m.bodyToLatex(p)}}`}})}}),Tt("bbox","[:bbox]{body:auto}",{createAtom:(n,o,t,i)=>{if(o[0]){let a=o[0];return new Om(n,o[1],i,{padding:a.padding,border:a.border,backgroundcolor:a.backgroundcolor,style:t,serialize:(r,s)=>{var l;let c=n;if(Number.isFinite(r.padding)||void 0!==r.border||void 0!==r.backgroundcolor){let u=[];r.padding&&u.push(r.padding),r.border&&u.push(`border: ${r.border}`),(r.verbatimBackgroundcolor||r.backgroundcolor)&&u.push(null!=(l=r.verbatimBackgroundcolor)?l:r.backgroundcolor),c+=`[${u.join(",")}]`}return c+`{${r.bodyToLatex(s)}}`}})}return new Om(n,o[1],i,{style:t})}}),Tt(["displaystyle","textstyle","scriptstyle","scriptscriptstyle"],"{:rest}",{createAtom:(n,o,t,i)=>new Oa(o[0],i,{latexOpen:`{${n} `,latexClose:"}",style:t,mathstyleName:n.slice(1)})}),Tt(["tiny","scriptsize","footnotesize","small","normalsize","large","Large","LARGE","huge","Huge"],"",{applyStyle:(n,o)=>({fontSize:{"\\tiny":1,"\\scriptsize":2,"\\footnotesize":3,"\\small":4,"\\normalsize":5,"\\large":6,"\\Large":7,"\\LARGE":8,"\\huge":9,"\\Huge":10}[n]})}),Tt("fontseries","{:string}",{ifMode:"text",applyStyle:(n,o)=>({fontSeries:o[0]})}),Tt("fontshape","{:string}",{ifMode:"text",applyStyle:(n,o)=>({fontShape:o[0]})}),Tt("fontfamily","{:string}",{ifMode:"text",applyStyle:(n,o)=>({fontFamily:o[0]})}),Tt("selectfont","",{ifMode:"text",applyStyle:(n,o)=>({})}),Tt("bf","",{applyStyle:(n,o)=>({fontSeries:"b",fontShape:"n",fontFamily:"cmr"})}),Tt(["boldsymbol","bm"],"{:math*}",{applyMode:"math",createAtom:(n,o,t,i)=>new Oa(o[0],i,{latexOpen:`${n}{`,latexClose:"}",style:t,customClass:"ML__boldsymbol"})}),Tt("bold","{:math*}",{applyMode:"math",applyStyle:(n,o)=>({variantStyle:"bold"})}),Tt("bfseries","",{applyMode:"text",applyStyle:(n,o)=>({fontSeries:"b"})}),Tt("mdseries","",{applyMode:"text",applyStyle:(n,o)=>({fontSeries:"m"})}),Tt("upshape","",{applyMode:"text",applyStyle:(n,o)=>({fontShape:"n"})}),Tt("slshape","",{applyMode:"text",applyStyle:(n,o)=>({fontShape:"sl"})}),Tt("scshape","",{applyMode:"text",applyStyle:(n,o)=>({fontShape:"sc"})}),Tt("textbf","{:text*}",{applyMode:"text",applyStyle:(n,o)=>({fontSeries:"b"})}),Tt("textmd","{:text*}",{applyMode:"text",applyStyle:(n,o)=>({fontSeries:"m"})}),Tt("textup","{:text*}",{applyMode:"text",applyStyle:(n,o)=>({fontShape:"n"})}),Tt("textnormal","{:text*}",{applyMode:"text",applyStyle:(n,o)=>({fontShape:"n",fontSeries:"m"})}),Tt("textsl","{:text*}",{applyMode:"text",applyStyle:(n,o)=>({fontShape:"sl"})}),Tt("textit","{:text*}",{applyMode:"text",applyStyle:(n,o)=>({fontShape:"it"})}),Tt("textsc","{:text*}",{applyMode:"text",applyStyle:(n,o)=>({fontShape:"sc"})}),Tt("textrm","{:text*}",{applyMode:"text",applyStyle:(n,o)=>({fontFamily:"roman"})}),Tt("textsf","{:text*}",{applyMode:"text",applyStyle:(n,o)=>({fontFamily:"sans-serif"})}),Tt("texttt","{:text*}",{applyMode:"text",applyStyle:(n,o)=>({fontFamily:"monospace"})}),Tt("mathbf","{:math*}",{applyMode:"math",applyStyle:(n,o)=>({variant:"normal",variantStyle:"bold"})}),Tt("mathit","{:math*}",{applyMode:"math",applyStyle:(n,o)=>({variant:"main",variantStyle:"italic"})}),Tt("mathnormal","{:math*}",{applyMode:"math",applyStyle:(n,o)=>({variant:"normal",variantStyle:"italic"})}),Tt("mathbfit","{:math*}",{applyMode:"math",applyStyle:(n,o)=>({variant:"main",variantStyle:"bolditalic"})}),Tt("mathrm","{:math*}",{applyMode:"math",applyStyle:(n,o)=>({variant:"normal",variantStyle:"up"})}),Tt("mathsf","{:math*}",{applyMode:"math",applyStyle:(n,o)=>({variant:"sans-serif",variantStyle:"up"})}),Tt("mathtt","{:math*}",{applyMode:"math",applyStyle:(n,o)=>({variant:"monospace",variantStyle:"up"})}),Tt("it","",{applyStyle:(n,o)=>({fontSeries:"m",fontShape:"it",fontFamily:"cmr",variantStyle:"italic"})}),Tt("rmfamily","",{applyStyle:(n,o)=>({fontFamily:"roman"})}),Tt("sffamily","",{applyStyle:(n,o)=>({fontFamily:"sans-serif"})}),Tt("ttfamily","",{applyStyle:(n,o)=>({fontFamily:"monospace"})}),Tt(["Bbb","mathbb"],"{:math*}",{applyStyle:(n,o)=>({variant:"double-struck",variantStyle:"up"})}),Tt(["frak","mathfrak"],"{:math*}",{applyStyle:(n,o)=>({variant:"fraktur",variantStyle:"up"})}),Tt("mathcal","{:math*}",{applyStyle:(n,o)=>({variant:"calligraphic",variantStyle:"up"})}),Tt("mathscr","{:math*}",{applyStyle:(n,o)=>({variant:"script",variantStyle:"up"})}),Tt("mbox","{:text}",{ifMode:"math",createAtom:(n,o,t,i)=>new Oa(o[0],i,{changeMode:!0,style:t,mode:"text",command:n,serialize:(a,r)=>`\\mbox{${a.bodyToLatex(mi(Et({},r),{skipModeCommand:!0}))}}`})}),Tt("text","{:text}",{ifMode:"math",applyMode:"text"}),Tt("class","{name:string}{content:auto*}",{createAtom:(n,o,t,i)=>new Oa(o[1],i,{customClass:o[0],style:t})}),Tt("cssId","{id:string}{content:auto}",{createAtom:(n,o,t,i)=>new Oa(o[1],i,{cssId:o[0],style:t})}),Tt("htmlData","{data:string}{content:auto}",{createAtom:(n,o,t,i)=>new Oa(o[1],i,{htmlData:o[0],style:t})}),Tt("htmlStyle","{data:string}{content:auto}",{createAtom:(n,o,t,i)=>new Oa(o[1],i,{htmlStyle:o[0],style:t})}),Tt("em","{:auto*}",{createAtom:(n,o,t,i)=>new Oa(o[0],i,{latexOpen:"\\em",latexClose:"",customClass:"ML__emph",style:t})}),Tt("emph","{:auto}",{createAtom:(n,o,t,i)=>new Oa(o[0],i,{latexOpen:"\\emph{",latexClose:"}",customClass:"ML__emph",style:t})});var Fy={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}};Tt(["bigl","Bigl","biggl","Biggl","bigr","Bigr","biggr","Biggr","bigm","Bigm","biggm","Biggm","big","Big","bigg","Bigg"],"{:delim}",{createAtom:(n,o,t,i)=>new P2(n,o[0],i,{size:Fy[n].size,delimClass:Fy[n].mclass,style:t})}),Tt(["hspace","hspace*"],"{width:glue}",{createAtom:(n,o,t,i)=>{var a;return new Em(n,t,i,null!=(a=o[0])?a:{glue:{dimension:0}})}}),Tt(["mkern","kern"],"{width:glue}",{createAtom:(n,o,t,i)=>{var a;return new Em(n,t,i,null!=(a=o[0])?a:{glue:{dimension:0}})}}),Tt("mspace","{width:glue}",{createAtom:(n,o,t,i)=>{var a;return new Em(n,t,i,null!=(a=o[0])?a:{glue:{dimension:0}})}}),Tt("mathop","{:auto}",{createAtom:(n,o,t,i)=>new fs(n,o[0],i,{type:"mop",captureSelection:!0,limits:"over-under",isFunction:!0,hasArgument:!0,style:t})}),Tt("mathchoice","{:math}{:math}{:math}{:math}",{createAtom:(n,o,t,i)=>new Z2(o,i)}),Tt(["mathbin","mathrel","mathopen","mathclose","mathpunct","mathord","mathinner"],"{:auto}",{createAtom:(n,o,t,i)=>new fs(n,o[0],i,{type:{"\\mathbin":"mbin","\\mathrel":"mrel","\\mathopen":"mopen","\\mathclose":"mclose","\\mathpunct":"mpunct","\\mathord":"mord","\\mathinner":"minner"}[n],captureSelection:!0,hasArgument:!0,style:t})}),Tt(["operatorname","operatorname*"],"{operator:math}",{createAtom:(n,o,t,i)=>{let a=new fs(n,o[0],i,{isFunction:!0,hasArgument:!0,limits:"\\operatorname"===n?"adjacent":"over-under",style:t});return a.captureSelection=!0,a.body&&a.body.forEach(r=>{var s;"first"!==r.type&&(r.type="mord",r.value=null!=(s={"\u2217":"*","\u2212":"-"}[r.value])?s:r.value,r.isFunction=!1,!r.style.variant&&!r.style.variantStyle&&(r.style.variant="main",r.style.variantStyle="up"))}),a}});var IY=class extends kt{constructor(n,o,t){let i=Number.parseInt(n);Number.isFinite(i)||(i=10067),super("mord",t,{value:String.fromCodePoint(i),style:o}),this.codepoint=i}serialize(n){return'\\unicode"'+("000000"+this.codepoint.toString(16)).toUpperCase().slice(-6)}};function y1(n){if(1===n.length){let o=n[0];if("mbin"===o.type)return"mbin";if("mrel"===o.type)return"mrel"}return"mord"}Tt("unicode","{charcode:number}",{createAtom:(n,o,t,i)=>new IY(o[0],t,i)}),Tt("rule","[raise:dimen]{width:dimen}{thickness:dimen}",{createAtom:(n,o,t,i)=>new Q2(n,i,{shift:o[0],width:o[1],height:o[2],style:t})}),Tt("overline","{:auto}",{createAtom:(n,o,t,i)=>new v1(n,o[0],i,{position:"overline",style:t})}),Tt("underline","{:auto}",{createAtom:(n,o,t,i)=>new v1(n,o[0],i,{position:"underline",style:t})}),Tt("overset","{above:auto}{base:auto}",{createAtom:(n,o,t,i)=>new _s(n,i,{above:o[0],body:o[1],skipBoundary:!1,style:t,boxType:y1(o[1]),serialize:(a,r)=>`${a.command}{${a.aboveToLatex(r)}}{${a.bodyToLatex(r)}}`})}),Tt("underset","{below:auto}{base:auto}",{createAtom:(n,o,t,i)=>new _s(n,i,{below:o[0],body:o[1],skipBoundary:!1,style:t,boxType:y1(o[1]),serialize:(a,r)=>`${n}{${a.belowToLatex(r)}}{${a.bodyToLatex(r)}}`})}),Tt("overunderset","{above:auto}{below:auto}{base:auto}",{createAtom:(n,o,t,i)=>new _s(n,i,{above:o[0],below:o[1],body:o[2],skipBoundary:!1,style:t,boxType:y1(o[2]),serialize:(a,r)=>`${a.command}{${a.aboveToLatex(r)}}{${a.bodyToLatex(r)}}`})}),Tt(["stackrel","stackbin"],"[below:auto]{above:auto}{base:auto}",{createAtom:(n,o,t,i)=>new _s(n,i,{body:o[2],above:o[1],below:o[0],skipBoundary:!1,style:t,boxType:"\\stackrel"===n?"mrel":"mbin",serialize:(a,r)=>`${a.command}{${a.aboveToLatex(r)}}{${a.bodyToLatex(r)}}`})}),Tt("smash","[:string]{:auto}",{createAtom:(n,o,t,i)=>new Mm(n,o[1],i,o[0]?{smashHeight:o[0].includes("t"),smashDepth:o[0].includes("b"),style:t}:{smashHeight:!0,smashDepth:!0,style:t})}),Tt(["vphantom"],"{:auto*}",{createAtom:(n,o,t,i)=>new Mm(n,o[1],i,{isInvisible:!0,smashWidth:!0,style:t})}),Tt(["hphantom"],"{:auto*}",{createAtom:(n,o,t,i)=>new Mm(n,o[1],i,{isInvisible:!0,smashHeight:!0,smashDepth:!0,style:t})}),Tt(["phantom"],"{:auto*}",{createAtom:(n,o,t,i)=>new Mm(n,o[1],i,{isInvisible:!0,style:t})}),Tt("not","{:math}",{createAtom:(n,o,t,i)=>{if(o.length<1||null===o[0])return new kt("mrel",i,{command:n,style:t,value:"\ue020"});let a=o[0];return new Oa([new bd(n,"\ue020",i,{align:"right",style:t,boxType:"mrel"}),...a],i,{boxType:"mrel",captureSelection:!0,command:"\\not",serialize:(r,s)=>{let l=kt.serialize(a,s);return 1!==l.length||/[a-zA-Z]/.test(l)?`\\not{${l}}`:"\\not"+l}})}}),Tt(["ne","neq"],"",{createAtom:(n,o,t,i)=>new Oa([new bd(n,"\ue020",i,{align:"right",style:t,boxType:"mrel"}),new kt("mrel",i,{style:t,value:"="})],i,{boxType:"mrel",captureSelection:!0,serialize:()=>n,command:n})}),Tt("rlap","{:auto}",{createAtom:(n,o,t,i)=>new bd(n,o[0],i,{align:"right",style:t})}),Tt("llap","{:auto}",{createAtom:(n,o,t,i)=>new bd(n,o[0],i,{style:t})}),Tt("mathllap","{:auto}",{createAtom:(n,o,t,i)=>new bd(n,o[0],i,{style:t})}),Tt("mathrlap","{:auto}",{createAtom:(n,o,t,i)=>new bd(n,o[0],i,{align:"right",style:t})});var Ny={acute:714,grave:715,dot:729,ddot:168,mathring:730,tilde:126,bar:713,breve:728,check:711,hat:94,vec:8407};function gs(n){for(let o of n)for(let t of o)if(t.length>0)return!1;return!0}Tt(Object.keys(Ny),"{body:auto}",{createAtom:(n,o,t,i)=>new A_(n,o[0],i,{accentChar:Ny[n.slice(1)],style:t})}),Tt(["widehat","widecheck","widetilde"],"{body:auto}",{createAtom:(n,o,t,i)=>{let a=_y(o[0]);return new A_(n,o[0],i,{style:t,svgAccent:n.slice(1)+(a.length>5?"4":["1","1","2","2","3","3"][a.length])})}}),Tt(["overarc","overparen","wideparen"],"{body:auto}",{createAtom:(n,o,t,i)=>new A_(n,o[0],i,{style:t,svgAccent:"overarc"})}),Tt(["underarc","underparen"],"{body:auto}",{createAtom:(n,o,t,i)=>new _s(n,i,{body:o[0],style:t,svgBelow:"underarc"})}),Tt("utilde","{body:auto}",{createAtom:(n,o,t,i)=>{let a=_y(o[0]);return new _s(n,i,{body:o[0],svgBelow:"widetilde"+(a.length>5?"4":["1","1","2","2","3","3"][a.length]),style:t,boxType:y1(o[0])})}}),Tt("^","{:string}",{createAtom:(n,o,t,i)=>{var a;return new kt("mord",i,{command:n,isFunction:!1,limits:"adjacent",style:t,value:o[0]&&null!=(a={a:"\xe2",e:"\xea",i:"\xee",o:"\xf4",u:"\xfb",A:"\xc2",E:"\xca",I:"\xce",O:"\xd4",U:"\xdb"}[o[0]])?a:"^"})}}),Tt("`","{:string}",{createAtom:(n,o,t,i)=>{var a;return new kt("mord",i,{command:n,isFunction:!1,limits:"adjacent",style:t,value:o[0]&&null!=(a={a:"\xe0",e:"\xe8",i:"\xec",o:"\xf2",u:"\xf9",A:"\xc0",E:"\xc8",I:"\xcc",O:"\xd2",U:"\xd9"}[o[0]])?a:"`"})}}),Tt("'","{:string}",{createAtom:(n,o,t,i)=>{var a;return new kt("mord",i,{command:n,isFunction:!1,limits:"adjacent",style:t,value:o[0]&&null!=(a={a:"\xe1",e:"\xe9",i:"\xed",o:"\xf3",u:"\xfa",A:"\xc1",E:"\xc9",I:"\xcd",O:"\xd3",U:"\xda"}[o[0]])?a:"^"})}}),Tt("~","{:string}",{createAtom:(n,o,t,i)=>{var a;return new kt("mord",i,{command:n,isFunction:!1,limits:"adjacent",style:t,value:o[0]&&null!=(a={n:"\xf1",N:"\xd1",a:"\xe3",o:"\xf5",A:"\xc3",O:"\xd5"}[o[0]])?a:"\xb4"})}}),Tt("c","{:string}",{createAtom:(n,o,t,i)=>{var a;return new kt("mord",i,{command:n,isFunction:!1,limits:"adjacent",style:t,value:o[0]&&null!=(a={c:"\xe7",C:"\xc7"}[o[0]])?a:""})}}),Tt("enclose","{notation:string}[style:string]{body:auto}",{createAtom:(n,o,t,i)=>{var a;let r={strokeColor:"currentColor",strokeWidth:"",strokeStyle:"solid",backgroundcolor:"transparent",padding:"auto",shadow:"auto",svgStrokeStyle:void 0,borderStyle:void 0,style:t};if(o[1]){let l=o[1].split(/,(?![^(]*\)(?:(?:[^(]*\)){2})*[^"]*$)/);for(let c of l){let u=c.match(/\s*(\S+)\s+(\S+)\s+(.*)/);if(u)r.strokeWidth=u[1],r.strokeStyle=u[2],r.strokeColor=u[3];else{let m=c.match(/\s*([a-z]*)\s*=\s*"(.*)"/);m&&("mathbackground"===m[1]?r.backgroundcolor=m[2]:"mathcolor"===m[1]?r.strokeColor=m[2]:"padding"===m[1]?r.padding=m[2]:"shadow"===m[1]&&(r.shadow=m[2]))}}"dashed"===r.strokeStyle?r.svgStrokeStyle="5,5":"dotted"===r.strokeStyle&&(r.svgStrokeStyle="1,5")}r.borderStyle=`${r.strokeWidth} ${r.strokeStyle} ${r.strokeColor}`;let s={};return(null!=(a=o[0])?a:"").split(/[, ]/).filter(l=>l.length>0).forEach(l=>{s[l.toLowerCase()]=!0}),new ph(n,o[2],s,i,r)}}),Tt("cancel","{body:auto}",{createAtom:(n,o,t,i)=>new ph(n,o[0],{updiagonalstrike:!0},i,{strokeColor:"currentColor",strokeWidth:"",strokeStyle:"solid",borderStyle:"1px solid currentColor",backgroundcolor:"transparent",padding:"auto",shadow:"auto",style:t})}),Tt("bcancel","{body:auto}",{createAtom:(n,o,t,i)=>new ph(n,o[0],{downdiagonalstrike:!0},i,{strokeColor:"currentColor",strokeWidth:"",strokeStyle:"solid",borderStyle:"1px solid currentColor",backgroundcolor:"transparent",padding:"auto",shadow:"auto",style:t})}),Tt("xcancel","{body:auto}",{createAtom:(n,o,t,i)=>new ph(n,o[0],{updiagonalstrike:!0,downdiagonalstrike:!0},i,{strokeColor:"currentColor",strokeWidth:"",strokeStyle:"solid",borderStyle:"1px solid currentColor",backgroundcolor:"transparent",padding:"auto",shadow:"auto",style:t})}),r1("math","",(n,o,t,i)=>(gs(t)&&(t=[[[new kt("first",n),new Ro(n)]]]),new So(n,o,t,i,{mathstyleName:"textstyle"}))),r1("displaymath","",(n,o,t,i)=>(gs(t)&&(t=[[[new kt("first",n),new Ro(n)]]]),new So(n,o,t,i,{mathstyleName:"textstyle"}))),yc("array","{columns:colspec}",(n,o,t,i,a)=>(gs(t)&&(t=[[[new kt("first",n),new Ro(n)]]]),new So(n,o,t,i,{columns:a[0],mathstyleName:"textstyle"}))),yc(["equation","equation*","subequations"],"",(n,o,t,i)=>(gs(t)&&(t=[[[new kt("first",n),new Ro(n)]]]),new So(n,o,t,i,{columns:[{align:"c"}]}))),yc("multline","",(n,o,t,i)=>(gs(t)&&(t=[[[new kt("first",n),new Ro(n)]]]),new So(n,o,t,i,{columns:[{align:"m"}]}))),yc(["align","align*","aligned","eqnarray"],"",(n,o,t,i)=>{let a=0;gs(t)&&(t=[[[new kt("first",n),new Ro(n)],[new kt("first",n),new Ro(n)]]]);for(let l of t)a=Math.max(a,l.length);let r=[{gap:0},{align:"r"},{gap:.25},{align:"l"}],s=2;for(;s<a;)r.push({gap:1}),r.push({align:"r"}),r.push({gap:.25}),r.push({align:"l"}),s+=2;return r.push({gap:0}),new So(n,o,t,i,{arraycolsep:0,columns:r,colSeparationType:"align",jot:.3,minColumns:2})}),yc("split","",(n,o,t,i)=>(gs(t)&&(t=[[[new kt("first",n),new Ro(n)],[new kt("first",n),new Ro(n)]]]),new So(n,o,t,i,{columns:[{align:"r"},{align:"l"}],minColumns:2}))),yc(["gather","gathered"],"",(n,o,t,i)=>(gs(t)&&(t=[[[new kt("first",n),new Ro(n)]]]),new So(n,o,t,i,{columns:[{gap:.25},{align:"c"},{gap:0}],colSeparationType:"gather"}))),yc(["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],"[columns:colspec]",(n,o,t,i,a)=>{var r;gs(t)&&(t=[[[new kt("first",n),new Ro(n)]]]);let s=".",l=".";switch(o){case"pmatrix":case"pmatrix*":s="(",l=")";break;case"bmatrix":case"bmatrix*":s="[",l="]";break;case"Bmatrix":case"Bmatrix*":s="\\lbrace",l="\\rbrace";break;case"vmatrix":case"vmatrix*":s="\\vert",l="\\vert";break;case"Vmatrix":case"Vmatrix*":s="\\Vert",l="\\Vert";break;case"matrix":case"matrix*":s=".",l="."}return new So(n,o,t,i,{mathstyleName:"textstyle",leftDelim:s,rightDelim:l,columns:null!=(r=a[0])?r:[{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"}]})}),yc(["smallmatrix","smallmatrix*"],"[columns:colspec]",(n,o,t,i,a)=>{var r;return gs(t)&&(t=[[[new kt("first",n),new Ro(n)]]]),new So(n,o,t,i,{mathstyleName:"scriptstyle",columns:null!=(r=a[0])?r:[{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"}],colSeparationType:"small",arraystretch:.5})}),yc(["cases","dcases"],"",(n,o,t,i)=>(gs(t)&&(t=[[[new kt("first",n),new Ro(n)]]]),new So(n,o,t,i,{mathstyleName:"dcases"===o?"displaystyle":"textstyle",arraystretch:1.2,leftDelim:"\\lbrace",rightDelim:".",columns:[{align:"l"},{gap:1},{align:"l"}]}))),yc("rcases","",(n,o,t,i)=>(gs(t)&&(t=[[[new kt("first",n),new Ro(n)]]]),new So(n,o,t,i,{arraystretch:1.2,leftDelim:".",rightDelim:"\\rbrace",columns:[{align:"l"},{gap:1},{align:"l"}]}))),r1("center","",(n,o,t,i)=>(gs(t)&&(t=[[[new kt("first",n),new Ro(n)]]]),new So(n,o,t,i,{columns:[{align:"c"}]}))),Tt(["overrightarrow","overleftarrow","Overrightarrow","overleftharpoon","overrightharpoon","overleftrightarrow","overlinesegment","overgroup"],"{:auto}",{createAtom:(n,o,t,i)=>new _s(n,i,{body:o[0],skipBoundary:!1,supsubPlacement:"over-under",paddedBody:!0,boxType:"mrel",style:t,svgAbove:n.slice(1)})}),Tt("overbrace","{:auto}",{createAtom:(n,o,t,i)=>new _s(n,i,{body:o[0],skipBoundary:!1,supsubPlacement:"over-under",paddedBody:!0,boxType:"mord",style:t,svgAbove:n.slice(1)})}),Tt(["underrightarrow","underleftarrow","underleftrightarrow","underlinesegment","undergroup"],"{:auto}",{createAtom:(n,o,t,i)=>new _s(n,i,{body:o[0],skipBoundary:!1,supsubPlacement:"over-under",paddedBody:!0,boxType:"mrel",style:t,svgBelow:n.slice(1)})}),Tt(["underbrace"],"{:auto}",{createAtom:(n,o,t,i)=>new _s(n,i,{body:o[0],skipBoundary:!1,supsubPlacement:"over-under",paddedBody:!0,boxType:"mord",style:t,svgBelow:n.slice(1)})}),Tt(["xrightarrow","xleftarrow","xRightarrow","xLeftarrow","xleftharpoonup","xleftharpoondown","xrightharpoonup","xrightharpoondown","xlongequal","xtwoheadleftarrow","xtwoheadrightarrow","xleftrightarrow","xLeftrightarrow","xrightleftharpoons","xleftrightharpoons","xhookleftarrow","xhookrightarrow","xmapsto","xtofrom","xrightleftarrows","xrightequilibrium","xleftequilibrium"],"[:auto]{:auto}",{createAtom:(n,o,t,i)=>{var a,r;return new _s(n,i,{style:t,svgBody:n.slice(1),above:0===(null==(a=o[1])?void 0:a.length)?void 0:o[1],below:null!=(r=o[0])?r:null,skipBoundary:!1,supsubPlacement:"over-under",paddedBody:!0,paddedLabels:!0,boxType:"mrel",serialize:(s,l)=>n+(s.hasEmptyBranch("below")?"":`[${s.belowToLatex(l)}]`)+`{${s.aboveToLatex(l)}}${s.supsubToLatex(l)}`})}}),Tt(["arccos","arcsin","arctan","arctg","arcctg","arg","ch","cos","cosh","cot","cotg","coth","ctg","cth","csc","cosec","dim","exp","hom","inf","ker","lb","lg","ln","log","Pr","sec","sh","sin","sinh","sup","tan","tanh","tg","th","arcsec","arccsc","arsinh","arcosh","artanh","arcsech","arccsch"],"",{isFunction:!0,createAtom:(n,o,t,i)=>new fs(n,n.slice(1),i,{limits:"adjacent",isFunction:!0,variant:"main",variantStyle:"up",style:t})}),Tt(["liminf","limsup"],"",{createAtom:(n,o,t,i)=>new fs(n,{"\\liminf":"lim inf","\\limsup":"lim sup"}[n],i,{limits:"over-under",variant:"main",style:t})}),Tt(["lim","mod"],"",{createAtom:(n,o,t,i)=>new fs(n,n.slice(1),i,{limits:"over-under",variant:"main",style:t})}),Tt(["det","max","min"],"",{isFunction:!0,createAtom:(n,o,t,i)=>new fs(n,n.slice(1),i,{limits:"over-under",isFunction:!0,variant:"main",style:t})}),Tt(["ang"],"{:math}",{isFunction:!0,createAtom:(n,o,t,i)=>new Oa([...o[0],new kt("mord",i,{value:"\xb0",style:t})],i,{mode:"math",latexOpen:"\\ang{",latexClose:"}",style:t})}),Tt("sqrt","[index:auto]{radicand:auto}",{createAtom:(n,o,t,i)=>new F2(n,i,{body:o[1],index:o[0],style:t})}),Tt(["frac","dfrac","tfrac","cfrac","binom","dbinom","tbinom"],"{numerator}{denominator}",{createAtom:(n,o,t,i)=>{let a={style:t};switch(n){case"\\dfrac":case"\\frac":case"\\tfrac":a.hasBarLine=!0;break;case"\\atopfrac":a.hasBarLine=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":a.hasBarLine=!1,a.leftDelim="(",a.rightDelim=")"}switch(n){case"\\dfrac":case"\\dbinom":a.mathstyleName="displaystyle";break;case"\\tfrac":case"\\tbinom":a.mathstyleName="textstyle";break;case"\\cfrac":a.hasBarLine=!0,a.continuousFraction=!0}return new Im(n,o[0],o[1],i,a)}}),Tt(["brace","brack"],"",{infix:!0,createAtom:(n,o,t,i)=>new Im(n,o[0],o[1],i,{hasBarLine:!1,leftDelim:"\\brace"===n?"\\lbrace":"\\lbrack",rightDelim:"\\brace"===n?"\\rbrace":"\\rbrack",style:t,serialize:(a,r)=>Bo([a.aboveToLatex(r),a.command,a.belowToLatex(r)])})}),Tt(["over","atop","choose"],"",{infix:!0,createAtom:(n,o,t,i)=>{let a,r;return"\\choose"===n&&(a="(",r=")"),new Im(n,o[0],o[1],i,{hasBarLine:"\\over"===n,leftDelim:a,rightDelim:r,style:t,serialize:(s,l)=>Bo([s.aboveToLatex(l),s.command,s.belowToLatex(l)])})}}),Tt(["overwithdelims","atopwithdelims"],"{numer:auto}{denom:auto}{left-delim:delim}{right-delim:delim}",{infix:!0,createAtom:(n,o,t,i)=>new Im(n,o[0],o[1],i,{leftDelim:o[2],rightDelim:o[3],hasBarLine:!1,style:t,serialize:(a,r)=>`${a.aboveToLatex(r)} ${a.command}${a.leftDelim}${a.rightDelim}${a.belowToLatex(r)}`})}),Tt("pdiff","{numerator}{denominator}",{createAtom:(n,o,t,i)=>new Im(n,o[0],o[1],i,{hasBarLine:!0,numerPrefix:"\u2202",denomPrefix:"\u2202",style:t})}),Tt(["sum","prod","bigcup","bigcap","coprod","bigvee","bigwedge","biguplus","bigotimes","bigoplus","bigodot","bigsqcup","intop"],"",{createAtom:(n,o,t,i)=>new fs(n,{coprod:"\u2210",bigvee:"\u22c1",bigwedge:"\u22c0",biguplus:"\u2a04",bigcap:"\u22c2",bigcup:"\u22c3",intop:"\u222b",prod:"\u220f",sum:"\u2211",bigotimes:"\u2a02",bigoplus:"\u2a01",bigodot:"\u2a00",bigsqcup:"\u2a06",smallint:"\u222b"}[n.slice(1)],i,{isExtensibleSymbol:!0,limits:"auto",variant:"main",style:t})}),Tt("smallint","",{createAtom:(n,o,t,i)=>new fs(n,"\u222b",i,{limits:"adjacent",isExtensibleSymbol:!1,style:t,variant:"main"})});var D2={int:"\u222b",iint:"\u222c",iiint:"\u222d",oint:"\u222e",oiint:"\u222f",oiiint:"\u2230",intclockwise:"\u2231",varointclockwise:"\u2232",ointctrclockwise:"\u2233",intctrclockwise:"\u2a11",sqcup:"\u2294",sqcap:"\u2293",uplus:"\u228e",wr:"\u2240",amalg:"\u2a3f",Cap:"\u22d2",Cup:"\u22d3",doublecap:"\u22d2",doublecup:"\u22d3"};function LY(n,o){return n[0]===o[0]&&n[1]===o[1]?"equal":"different"}function Vs(n){let o=1/0,t=-1/0;for(let i of n.ranges)o=Math.min(o,i[0],i[1]),t=Math.max(t,i[0],i[1]);return[o,t]}function U2(n,o,t){return t?function BY(n,o){if(!o)return"";if("string"==typeof o)return o;if(!n||void 0===o.after)return o.value;let t=!1,i=!1,a=!1,r=!1,s=!1,l=!1,c=!1,u=!1,m=!1,p=!1,f=!1,b=!1,L=!1,N=!1,R=!1,j=n[0],G=0;for(;j&&/msubsup|placeholder/.test(j.type);)G+=1,j=n[G];return t=!j||"first"===j.type,j&&(N="text"===j.mode,i=!N&&"mord"===j.type&&NG.test(j.value),a=!N&&"mord"===j.type&&/\d+$/.test(j.value),r=!N&&j.isFunction,s="genfrac"===j.type,l="surd"===j.type,c="mbin"===j.type,u="mrel"===j.type,m="mop"===j.type,p="mpunct"===j.type||"minner"===j.type,f="array"===j.type,b="mopen"===j.type,L="mclose"===j.type||"leftright"===j.type,R="space"===j.type),o.after.includes("nothing")&&t||o.after.includes("letter")&&i||o.after.includes("digit")&&a||o.after.includes("function")&&r||o.after.includes("frac")&&s||o.after.includes("surd")&&l||o.after.includes("binop")&&c||o.after.includes("relop")&&u||o.after.includes("operator")&&m||o.after.includes("punct")&&p||o.after.includes("array")&&f||o.after.includes("openfence")&&b||o.after.includes("closefence")&&L||o.after.includes("text")&&N||o.after.includes("space")&&R?o.value:""}(n,t[o]):""}Tt(Object.keys(D2),"",{createAtom:(n,o,t,i)=>new fs(n,D2[n.slice(1)],i,{limits:"adjacent",isExtensibleSymbol:!0,style:t,variant:{"\u22d2":"ams","\u22d3":"ams"}[D2[n.slice(1)]]})}),Tt(["Re","Im"],"",{createAtom:(n,o,t,i)=>new fs(n,{"\\Re":"\u211c","\\Im":"\u2111"}[n],i,{limits:"adjacent",style:t,isFunction:!0,variant:"fraktur"})}),Tt("middle","{:delim}",{createAtom:(n,o,t,i)=>new B2(n,o[0],i,{size:1,style:t})}),Ua("0123456789/@.?!"),py(65,90),py(97,122),Ua([["\\forall",8704],["\\exists",8707],["\\nexists",8708,"mord","ams"],["\\mid",8739,"mrel"],["\\top",8868],["\\bot",8869]]),Ua([["\\sharp",9839],["\\flat",9837],["\\natural",9838],["\\#",35],["\\&",38],["\\clubsuit",9827],["\\heartsuit",9825],["\\spadesuit",9824],["\\diamondsuit",9826],["\\parallelogram",9649]]),Ua([["\\backslash",92],["\\nabla",8711],["\\partial",8706],["\\ell",8467],["\\hbar",8463],["\\Q",81,"mord","double-struck"],["\\C",67,"mord","double-struck"],["\\P",80,"mord","double-struck"],["\\pounds",163],["\\euro",8364]]),Ua([["\\rightarrow",8594],["\\to",8594],["\\leftarrow",8592],["\\gets",8592],["\\Rightarrow",8658],["\\Leftarrow",8656],["\\longrightarrow",10230],["\\longleftarrow",10229],["\\Longrightarrow",10233],["\\implies",10233],["\\Longleftarrow",10232],["\\impliedby",10232],["\\longleftrightarrow",10231],["\\biconditional",10231],["\\Longleftrightarrow",10234],["\\mapsto",8614],["\\longmapsto",10236],["\\uparrow",8593],["\\downarrow",8595],["\\Uparrow",8657],["\\Downarrow",8659],["\\updownarrow",8597],["\\Updownarrow",8661],["\\hookrightarrow",8618],["\\hookleftarrow",8617],["\\rightharpoonup",8640],["\\leftharpoonup",8636],["\\rightharpoondown",8641],["\\leftharpoondown",8637],["\\searrow",8600],["\\nearrow",8599],["\\swarrow",8601],["\\nwarrow",8598],["\\originalof",8886],["\\laplace",8886],["\\imageof",8887],["\\Laplace",8887]],"mrel"),Ua([["\\lbrace",123,"mopen"],["\\rbrace",125,"mclose"],["\\lparen",40,"mopen"],["\\rparen",41,"mclose"],["\\langle",10216,"mopen"],["\\rangle",10217,"mclose"],["\\lfloor",8970,"mopen"],["\\rfloor",8971,"mclose"],["\\lceil",8968,"mopen"],["\\rceil",8969,"mclose"],["\\vert",8739],["\\lvert",8739,"mopen"],["\\rvert",8739,"mclose"],["\\|",8741],["\\Vert",8741],["\\mVert",8741],["\\lVert",8741,"mopen"],["\\rVert",8741,"mclose"],["\\lbrack",91,"mopen"],["\\rbrack",93,"mclose"],["\\{",123,"mopen"],["\\}",125,"mclose"],["(",40,"mopen"],[")",41,"mclose"],["[",91,"mopen"],["]",93,"mclose"],["\\ulcorner",9484,"mopen","ams"],["\\urcorner",9488,"mclose","ams"],["\\llcorner",9492,"mopen","ams"],["\\lrcorner",9496,"mclose","ams"],["\\lgroup",10222,"mopen"],["\\rgroup",10223,"mclose"],["\\lmoustache",9136,"mopen"],["\\rmoustache",9137,"mclose"]]),Ua([["\\dashrightarrow",8674],["\\dashleftarrow",8672],["\\Rrightarrow",8667],["\\Lleftarrow",8666],["\\leftrightarrows",8646],["\\rightleftarrows",8644],["\\curvearrowright",8631],["\\curvearrowleft",8630],["\\rightrightarrows",8649],["\\leftleftarrows",8647],["\\upuparrows",8648],["\\downdownarrows",8650],["\\vartriangle",9651],["\\triangleq",8796],["\\vartriangleleft",8882],["\\trianglelefteq",8884],["\\ntriangleleft",8938],["\\ntrianglelefteq",8940],["\\vartriangleright",8883],["\\trianglerighteq",8885],["\\ntriangleright",8939],["\\ntrianglerighteq",8941],["\\blacktriangleleft",9664],["\\blacktriangleright",9654],["\\leftarrowtail",8610],["\\rightarrowtail",8611],["\\looparrowright",8620],["\\looparrowleft",8619],["\\twoheadleftarrow",8606],["\\twoheadrightarrow",8608],["\\rightleftharpoons",8652],["\\leftrightharpoons",8651],["\\Rsh",8625],["\\Lsh",8624],["\\circlearrowright",8635],["\\circlearrowleft",8634],["\\restriction",8638],["\\upharpoonright",8638],["\\upharpoonleft",8639],["\\downharpoonright",8642],["\\downharpoonleft",8643],["\\rightsquigarrow",8669],["\\leadsto",8669],["\\leftrightsquigarrow",8621],["\\multimap",8888],["\\nrightarrow",8603],["\\nleftarrow",8602],["\\nRightarrow",8655],["\\nLeftarrow",8653],["\\nleftrightarrow",8622],["\\nLeftrightarrow",8654],["\\shortparallel",8741],["\\nless",8814],["\\nleqslant",57360],["\\lneq",10887],["\\lneqq",8808],["\\nleqq",57361],["\\lvertneqq",57356],["\\lnsim",8934],["\\lnapprox",10889],["\\nprec",8832],["\\npreceq",8928],["\\precnsim",8936],["\\precnapprox",10937],["\\nsim",8769],["\\nshortmid",57350],["\\nmid",8740],["\\nvdash",8876],["\\nvDash",8877],["\\ngtr",8815],["\\ngeqslant",57359],["\\ngeqq",57358],["\\gneq",10888],["\\gneqq",8809],["\\gvertneqq",57357],["\\gnsim",8935],["\\gnapprox",10890],["\\nsucc",8833],["\\nsucceq",8929],["\\succnsim",8937],["\\succnapprox",10938],["\\ncong",8774],["\\nshortparallel",57351],["\\nparallel",8742],["\\nVDash",8879],["\\nsupseteqq",57368],["\\supsetneq",8843],["\\varsupsetneq",57371],["\\supsetneqq",10956],["\\varsupsetneqq",57369],["\\nVdash",8878],["\\precneqq",10933],["\\succneqq",10934],["\\nsubseteqq",57366],["\\leqslant",10877],["\\geqslant",10878],["\\gtrsim",8819],["\\approxeq",8778],["\\thickapprox",8776],["\\lessapprox",10885],["\\gtrapprox",10886],["\\precapprox",10935],["\\succapprox",10936],["\\thicksim",8764],["\\succsim",8831],["\\precsim",8830],["\\backsim",8765],["\\eqsim",8770],["\\backsimeq",8909],["\\lesssim",8818],["\\nleq",8816],["\\ngeq",8817],["\\smallsmile",8995],["\\smallfrown",8994],["\\leqq",8806],["\\eqslantless",10901],["\\lll",8920],["\\lessgtr",8822],["\\lesseqgtr",8922],["\\lesseqqgtr",10891],["\\risingdotseq",8787],["\\fallingdotseq",8786],["\\subseteqq",10949],["\\Subset",8912],["\\sqsubset",8847],["\\preccurlyeq",8828],["\\curlyeqprec",8926],["\\vDash",8872],["\\Vvdash",8874],["\\bumpeq",8783],["\\Bumpeq",8782],["\\geqq",8807],["\\eqslantgtr",10902],["\\ggg",8921],["\\gtrless",8823],["\\gtreqless",8923],["\\gtreqqless",10892],["\\supseteqq",10950],["\\Supset",8913],["\\sqsupset",8848],["\\succcurlyeq",8829],["\\curlyeqsucc",8927],["\\Vdash",8873],["\\shortmid",8739],["\\between",8812],["\\pitchfork",8916],["\\varpropto",8733],["\\backepsilon",8717],["\\llless",8920],["\\gggtr",8921],["\\doteqdot",8785],["\\Doteq",8785],["\\eqcirc",8790],["\\circeq",8791],["\\therefore",8756],["\\because",8757]],"mrel","ams"),Ua([["+",43],["-",8722],["\u2212",8722],["\\pm",177],["\\mp",8723],["*",8727],["\\times",215],["\\div",247],["\\divides",8739],["\\cdot",8901],["\\cap",8745],["\\cup",8746],["\\setminus",8726],["\\land",8743],["\\wedge",8743],["\\lor",8744],["\\vee",8744],["\\circ",8728],["\\bigcirc",9711],["\\bullet",8729],["\\oplus",8853],["\\ominus",8854],["\\otimes",8855],["\\odot",8857],["\\oslash",8856],["\\bigtriangleup",9651],["\\bigtriangledown",9661],["\\triangleleft",9667],["\\triangleright",9657],["\\And",38],["\\dagger",8224],["\\dag",8224],["\\ddag",8225],["\\ddagger",8225],["\\ast",8727],["\\star",8902],["\\bigstar",9733],["\\diamond",8900]],"mbin"),Ua([["\\lhd",8882],["\\rhd",8883],["\\lessdot",8918],["\\gtrdot",8919],["\\ltimes",8905],["\\rtimes",8906],["\\leftthreetimes",8907],["\\rightthreetimes",8908],["\\intercal",8890],["\\dotplus",8724],["\\doublebarwedge",10846],["\\divideontimes",8903],["\\centerdot",8901],["\\smallsetminus",8726],["\\barwedge",8892],["\\veebar",8891],["\\nor",8891],["\\curlywedge",8911],["\\curlyvee",8910],["\\boxminus",8863],["\\boxplus",8862],["\\boxtimes",8864],["\\boxdot",8865],["\\circleddash",8861],["\\circledast",8859],["\\circledcirc",8858],["\\unlhd",8884],["\\unrhd",8885]],"mbin","ams"),Ua([["\\surd",8730],["\\infty",8734],["\\prime",8242],["\\doubleprime",8243],["\\angle",8736],["`",8216],["\\$",36],["\\%",37],["\\_",95],["\\alpha",945],["\\beta",946],["\\gamma",947],["\\delta",948],["\\epsilon",1013],["\\varepsilon",949],["\\zeta",950],["\\eta",951],["\\theta",952],["\\vartheta",977],["\\iota",953],["\\kappa",954],["\\varkappa",1008,"mord","ams"],["\\lambda",955],["\\mu",956],["\\nu",957],["\\xi",958],["\\omicron",111],["\\pi",960],["\\varpi",982],["\\rho",961],["\\varrho",1009],["\\sigma",963],["\\varsigma",962],["\\tau",964],["\\phi",981],["\\varphi",966],["\\upsilon",965],["\\chi",967],["\\psi",968],["\\omega",969],["\\Gamma",915],["\\Delta",916],["\\Theta",920],["\\Lambda",923],["\\Xi",926],["\\Pi",928],["\\Sigma",931],["\\Upsilon",933],["\\Phi",934],["\\Psi",936],["\\Omega",937],["\\digamma",989,"mord","ams"],["\\emptyset",8709]]),Ua([["=",61],["<",60],["\\lt",60],[">",62],["\\gt",62],["\\le",8804],["\\leq",8804],["\\ge",8805],["\\geq",8805],["\\ll",8810],["\\gg",8811],["\\coloneq",8788],["\\measeq",8797],["\\eqdef",8798],["\\questeq",8799],[":",58],["\\cong",8773],["\\equiv",8801],["\\prec",8826],["\\preceq",10927],["\\succ",8827],["\\succeq",10928],["\\perp",8869],["\\propto",8733],["\\Colon",8759],["\\smile",8995],["\\frown",8994],["\\sim",8764],["\\doteq",8784],["\\bowtie",8904],["\\Join",8904],["\\asymp",8781],["\\sqsubseteq",8849],["\\sqsupseteq",8850],["\\approx",8776],["\\~",126],["\\leftrightarrow",8596],["\\Leftrightarrow",8660],["\\models",8872],["\\vdash",8866],["\\dashv",8867],["\\roundimplies",10608],["\\in",8712],["\\notin",8713],["\\ni",8715],["\\owns",8715],["\\subset",8834],["\\supset",8835],["\\subseteq",8838],["\\supseteq",8839],["\\differencedelta",8710],["\\mvert",8739],["\\parallel",8741],["\\simeq",8771]],"mrel"),Ua([["\\lnot",172],["\\neg",172],["\\triangle",9651],["\\subsetneq",8842],["\\varsubsetneq",57370],["\\subsetneqq",10955],["\\varsubsetneqq",57367],["\\nsubset",8836],["\\nsupset",8837],["\\nsubseteq",8840],["\\nsupseteq",8841]],"mrel","ams"),Ua([["\\wp",8472],["\\aleph",8501]]),Ua([["\\blacktriangle",9650],["\\hslash",8463],["\\Finv",8498],["\\Game",8513],["\\eth",240],["\\mho",8487],["\\Bbbk",107],["\\yen",165],["\\square",9633],["\\Box",9633],["\\blacksquare",9632],["\\circledS",9416],["\\circledR",174],["\\triangledown",9661],["\\blacktriangledown",9660],["\\checkmark",10003],["\\diagup",9585],["\\measuredangle",8737],["\\sphericalangle",8738],["\\backprime",8245],["\\backdoubleprime",8246],["\\Diamond",9674],["\\lozenge",9674],["\\blacklozenge",10731],["\\varnothing",8709],["\\complement",8705],["\\maltese",10016],["\\beth",8502],["\\daleth",8504],["\\gimel",8503]],"mord","ams"),Ua([["\\ ",160],["~",160],["\\space",160]],"space"),Tt(["!",",",":",";","enskip","enspace","quad","qquad"],"",{createAtom:(n,o,t,i)=>new Em(n,t,i)}),Ua([["\\colon",58],["\\cdotp",8901],["\\vdots",8942,"mord"],["\\ldotp",46],[",",44],[";",59]],"mpunct"),Ua([["\\cdots",8943],["\\ddots",8945],["\\ldots",8230],["\\mathellipsis",8230]],"minner"),Ua([["\\/",47],["|",8739,"mord"],["\\imath",305],["\\jmath",567],["\\degree",176],["'",8242],['"',8221]]);var Zy={"&":"\\&","%":"\\%","''":"^{\\doubleprime}",alpha:"\\alpha",delta:"\\delta",Delta:"\\Delta",pi:"\\pi",Pi:"\\Pi",theta:"\\theta",Theta:"\\Theta",ii:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\imaginaryI"},jj:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\imaginaryJ"},ee:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\exponentialE"},nabla:"\\nabla",grad:"\\nabla",del:"\\partial",deg:{after:"digit+space",value:"\\degree"},infty:"\\infty","\u221e":"\\infty",oo:{after:"nothing+digit+frac+surd+binop+relop+punct+array+openfence+closefence+space",value:"\\infty"},"\u2211":"\\sum",sum:"\\sum_{#?}^{#?}",int:"\\int_{#?}^{#?}",prod:"\\prod_{#?}^{#?}",sqrt:"\\sqrt{#?}","\u2206":"\\differentialD","\u2202":"\\differentialD",arcsin:"\\arcsin",arccos:"\\arccos",arctan:"\\arctan",arcsec:"\\arcsec",arccsc:"\\arccsc",arsinh:"\\arsinh",arcosh:"\\arcosh",artanh:"\\artanh",arcsech:"\\arcsech",arccsch:"\\arccsch",arg:"\\arg",ch:"\\ch",cosec:"\\cosec",cosh:"\\cosh",cot:"\\cot",cotg:"\\cotg",coth:"\\coth",csc:"\\csc",ctg:"\\ctg",cth:"\\cth",sec:"\\sec",sinh:"\\sinh",sh:"\\sh",tanh:"\\tanh",tg:"\\tg",th:"\\th",sin:"\\sin",cos:"\\cos",tan:"\\tan",lg:"\\lg",lb:"\\lb",log:"\\log",ln:"\\ln",exp:"\\exp",lim:"\\lim_{#?}",dx:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\differentialD x"},dy:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\differentialD y"},dt:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\differentialD t"},AA:"\\forall",EE:"\\exists","!EE":"\\nexists","&&":"\\land",xin:{after:"nothing+text+relop+punct+openfence+space",value:"x \\in"},in:{after:"nothing+letter+closefence",value:"\\in"},"!in":"\\notin",NN:"\\mathbb{N}",ZZ:"\\Z",QQ:"\\Q",RR:"\\R",CC:"\\C",xx:"\\times","+-":"\\pm","\u2260":"\\ne","!=":"\\ne","\u2265":"\\ge",">=":"\\ge","\u2264":"\\le","<=":"\\le","<<":"\\ll",">>":"\\gg","~~":"\\approx","\u2248":"\\approx","?=":"\\questeq","\xf7":"\\div","\xac":"\\neg",":=":"\\coloneq","::":"\\Colon","(:":"\\langle",":)":"\\rangle",beta:"\\beta",chi:"\\chi",epsilon:"\\epsilon",varepsilon:"\\varepsilon",eta:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\eta"},gamma:"\\gamma",Gamma:"\\Gamma",iota:"\\iota",kappa:"\\kappa",lambda:"\\lambda",Lambda:"\\Lambda",mu:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\mu"},nu:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\nu"},\u00b5:"\\mu",phi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\phi"},Phi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\Phi"},varphi:"\\varphi",psi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\psi"},Psi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\Psi"},rho:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\rho"},sigma:"\\sigma",Sigma:"\\Sigma",tau:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\tau"},vartheta:"\\vartheta",upsilon:"\\upsilon",xi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space",value:"\\xi"},Xi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\Xi"},zeta:"\\zeta",omega:"\\omega",Omega:"\\Omega",\u03a9:"\\omega",forall:"\\forall",exists:"\\exists","!exists":"\\nexists",":.":"\\therefore",liminf:"\\liminf_{#?}",limsup:"\\limsup_{#?}",argmin:"\\operatorname*{arg~min}_{#?}",argmax:"\\operatorname*{arg~max}_{#?}",det:"\\det",mod:"\\mod",max:"\\max",min:"\\min",erf:"\\operatorname{erf}",erfc:"\\operatorname{erfc}",bessel:"\\operatorname{bessel}",mean:"\\operatorname{mean}",median:"\\operatorname{median}",fft:"\\operatorname{fft}",lcm:"\\operatorname{lcm}",gcd:"\\operatorname{gcd}",randomReal:"\\operatorname{randomReal}",randomInteger:"\\operatorname{randomInteger}",Re:"\\operatorname{Re}",Im:"\\operatorname{Im}",mm:{after:"nothing+digit+operator",value:"\\operatorname{mm}"},cm:{after:"nothing+digit+operator",value:"\\operatorname{cm}"},km:{after:"nothing+digit+operator",value:"\\operatorname{km}"},kg:{after:"nothing+digit+operator",value:"\\operatorname{kg}"},"...":"\\ldots","+...":"+\\cdots","-...":"-\\cdots","->...":"\\to\\cdots","->":"\\to","|->":"\\mapsto","--\x3e":"\\longrightarrow","<--":"\\longleftarrow","=>":"\\Rightarrow","==>":"\\Longrightarrow","<=>":"\\Leftrightarrow","<->":"\\leftrightarrow","(.)":"\\odot","(+)":"\\oplus","(/)":"\\oslash","(*)":"\\otimes","(-)":"\\ominus","||":"\\Vert","{":"\\{","}":"\\}","*":"\\cdot"};function C1(n,o){var t;let i=null!=(t=o?.format)?t:"auto";return"auto"===i&&([i,n]=function PY(n){if((n=n.trim()).length<=1)return["latex",n];let o;return[o,n]=j2(n),o?["latex",n]:n.startsWith("`")&&n.endsWith("`")?["ascii-math",n=n.substring(1,n.length-1)]:n.includes("\\")?["latex",n]:/\$.+\$/.test(n)?["latex",`\\text{${n}}`]:[void 0,n]}(n)),"ascii-math"===i?["ascii-math",Sr(n=(n=(n=(n=(n=(n=n.replace(/\u2061/gu,"")).replace(/\u3016/gu,"{")).replace(/\u3017/gu,"}")).replace(/([^\\])sinx/g,"$1\\sin x")).replace(/([^\\])cosx/g,"$1\\cos x ")).replace(/\u2013/g,"-"),{inlineShortcuts:o?.inlineShortcuts})]:["latex",n]}function Sr(n,o){var t,i,a;if(!n)return"";let s,r=!1,l=null!=(t=o.inlineShortcuts)?t:Zy;if(!r&&(n.startsWith("^")||n.startsWith("_"))&&(s=Bm(n.slice(1),{inlineShortcuts:l,noWrap:!0}),n=n[0]+"{"+s.match+"}",n+=Sr(s.rest,o),r=!0),r||(s=n.match(/^(sqrt|\u221A)(.*)/),s&&(s=Bm(s[2],{inlineShortcuts:l,noWrap:!0}),n="\\sqrt{"+(null!=(i=s.match)?i:"\\placeholder{}")+"}",n+=Sr(s.rest,o),r=!0)),r||(s=n.match(/^(\\cbrt|\u221B)(.*)/),s&&(s=Bm(s[2],{inlineShortcuts:l,noWrap:!0}),n="\\sqrt[3]{"+(null!=(a=s.match)?a:"\\placeholder{}")+"}",n+=Sr(s.rest,o),r=!0)),r||(s=n.match(/^abs(.*)/),s&&(s=Bm(s[1],{inlineShortcuts:l,noWrap:!0}),n="\\left|"+s.match+"\\right|",n+=Sr(s.rest,o),r=!0)),r||(s=n.match(/^["\u201d\u201c](.*?)["\u201d\u201c](.*)/),s&&(n="\\text{"+s[1]+"}",n+=Sr(s[2],o),r=!0)),r||(s=n.match(/^([^a-zA-Z\(\{\[\_\^\\\s"]+)(.*)/),s&&(n=Dy(s[1],l),n+=Sr(s[2],o),r=!0)),!r&&/^([fgh])[^a-zA-Z]/.test(n)&&(s=Bm(n.slice(1),{inlineShortcuts:l,noWrap:!0}),n="("===n[1]?n[0]+"\\left("+s.match+"\\right)":n[0]+s.match,n+=Sr(s.rest,o),r=!0),r||(s=n.match(/^([a-zA-Z]+)(.*)/),s&&(n=Dy(s[1],l),n+=Sr(s[2],o),r=!0)),!r)if(s=Bm(n,{inlineShortcuts:l,noWrap:!0}),s.match&&"/"===s.rest[0]){let c=Bm(s.rest.slice(1),{inlineShortcuts:l,noWrap:!0});c.match&&(n="\\frac{"+s.match+"}{"+c.match+"}"+Sr(c.rest,o)),r=!0}else s.match&&(n=n.startsWith("(")?"\\left("+s.match+"\\right)"+Sr(s.rest,o):s.match+Sr(s.rest,o),r=!0);return r||(s=n.match(/^(\s+)(.*)$/),s&&(n=" "+Sr(s[2],o),r=!0)),n}function Bm(n,o){let t="",i=n=n.trim(),a=n.charAt(0),r={"(":")","{":"}","[":"]"}[a];if(r){let s=1,l=1;for(;l<n.length&&s>0;)n[l]===a&&s++,n[l]===r&&s--,l++;0===s?(o.noWrap&&"("===a?t=Sr(n.substring(1,l-1),o):("{"===a&&"}"===r&&(a="\\{",r="\\}"),t="\\left"+a+Sr(n.substring(1,l-1),o)+"\\right"+r),i=n.slice(Math.max(0,l))):(t=n.substring(1,l),i="")}else{let s=n.match(/^([a-zA-Z]+)/);if(s){let l=U2(null,n,o.inlineShortcuts);if(l)return l=l.replace("_{#?}",""),l=l.replace("^{#?}",""),{match:l,rest:n.slice(l.length)}}if(s=n.match(/^([a-zA-Z])/),s)return{match:s[1],rest:n.slice(1)};if(s=n.match(/^(-)?\d+(\.\d*)?/),s)return{match:s[0],rest:n.slice(s[0].length)};/^\\(left|right)/.test(n)||(s=n.match(/^(\\[a-zA-Z]+)/),s&&(i=n.slice(s[1].length),t=s[1]))}return{match:t,rest:i}}function Dy(n,o){let t=U2(null,n,o);return t?(t=t.replace("_{#?}",""),t=t.replace("^{#?}",""),t+=" "):t=n,t}var Uy=[["\\[","\\]"],["\\(","\\)"],["$$","$$"],["$","$"],["\\begin{math}","\\end{math}"],["\\begin{displaymath}","\\end{displaymath}"],["\\begin{equation}","\\end{equation}"],["\\begin{equation*}","\\end{equation*}"]];function j2(n){let o=n.trim();for(let t of Uy)if(o.startsWith(t[0])&&o.endsWith(t[1]))return[!0,o.substring(t[0].length,o.length-t[1].length)];return[!1,n]}var NY=(n,o,t)=>(Uy.some(i=>o.startsWith(i[0])&&o.endsWith(i[1]))||(o=`$$ ${o} $$`),o),T1=class{constructor(n){T1._registry[n]=this}static onPaste(n,o,t){var i;if("string"==typeof t){let r=new DataTransfer;r.setData("text/plain",t),t=r}let a=new ClipboardEvent("paste",{clipboardData:t,cancelable:!0});return!(null==(i=o.host)||!i.dispatchEvent(a))&&T1._registry[n].onPaste(o,t)}static onCopy(n,o){if(!o.clipboardData)return;let t=n.model,i=t.selectionIsCollapsed?[0,t.lastOffset]:Vs(t.selection),a=t.getAtoms(i);if(a.every(r=>"text"===r.mode||!r.mode))o.clipboardData.setData("text/plain",a.filter(r=>r instanceof mh).map(r=>r.value).join(""));else if(a.every(r=>"latex"===r.mode))o.clipboardData.setData("text/plain",t.getAtoms(i,{includeChildren:!0}).map(r=>{var s;return null!=(s=r.value)?s:""}).join(""));else{let r;r=1===a.length&&void 0!==a[0].verbatimLatex?a[0].verbatimLatex:t.getValue(i,"latex-expanded"),o.clipboardData.setData("application/x-latex",r);try{o.clipboardData.setData("text/plain",n.options.onExport(n,r,i))}catch{}1===a.length&&("root"===a[0].type||"group"===a[0].type)&&(a=a[0].body.filter(l=>"first"!==l.type));try{o.clipboardData.setData("application/json+mathlive",JSON.stringify(a.map(l=>l.toJson())))}catch{}let s=n.computeEngine;if(s)try{s.jsonSerializationOptions={metadata:["latex"]};let l=s.parse(r),c=JSON.stringify(l.json);c&&o.clipboardData.setData("application/json",c)}catch{}}o.preventDefault()}static insert(n,o,t,i={}){return T1._registry[n].insert(o,t,i)}onPaste(n,o){return!1}insert(n,o,t){return!1}},Po=T1;Po._registry={};var xs={"\\ne":"<mo>&ne;</mo>","\\neq":"<mo>&neq;</mo>","\\pm":"&#177;","\\times":"&#215;","\\colon":":","\\vert":"|","\\Vert":"\u2225","\\mid":"\u2223","\\lbrace":"{","\\rbrace":"}","\\lparen":"(","\\rparen":")","\\langle":"\u27e8","\\rangle":"\u27e9","\\lfloor":"\u230a","\\rfloor":"\u230b","\\lceil":"\u2308","\\rceil":"\u2309","\\vec":"&#x20d7;","\\acute":"&#x00b4;","\\grave":"&#x0060;","\\dot":"&#x02d9;","\\ddot":"&#x00a8;","\\tilde":"&#x007e;","\\bar":"&#x00af;","\\breve":"&#x02d8;","\\check":"&#x02c7;","\\hat":"&#x005e;"},jy="<mo>&#x2061;</mo>",q2="<mo>&#8290;</mo>";function k1(n){return n.replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function yo(n,o){return n&&o.generateID?` extid="${n}"`:""}function ZY(n,o,t){var i,a,r,s,l,c,u,m;let p=!1;o=o??n.atoms.length;let f="",b="",L=n.atoms[n.index];if("\\operatorname"===L.command)b=b_(L.body),n.index+=1;else{let N=null!=(a=null==(i=L.style)?void 0:i.variant)?a:"",R=null!=(s=null==(r=L.style)?void 0:r.variantStyle)?s:"";for(;n.index<o&&("mord"===L.type||"macro"===L.type)&&!L.isDigit()&&N===(null!=(c=null==(l=L.style)?void 0:l.variant)?c:"")&&R===(null!=(m=null==(u=L.style)?void 0:u.variantStyle)?m:"");)b+=b_([L]),n.index+=1,L=n.atoms[n.index]}return b.length>0&&(p=!0,f=`<mi>${b}</mi>`,("mi"===n.lastType||"mn"===n.lastType||"mtext"===n.lastType||"fence"===n.lastType)&&!/^<mo>(.*)<\/mo>$/.test(f)&&(f=q2+f),b.endsWith(">f</mi>")||b.endsWith(">g</mi>")?(f+=jy,n.lastType="applyfunction"):n.lastType=/^<mo>(.*)<\/mo>$/.test(f)?"mo":"mi",x_(b,n,t)||(n.mathML+=f)),p}function x_(n,o,t){var i;let a=o.atoms[o.index-1];if(!a)return!1;if(!a.superscript&&!a.subscript){if("msubsup"!==(null==(i=o.atoms[o.index])?void 0:i.type))return!1;a=o.atoms[o.index],o.index+=1}let r=Zi(a.superscript,t),s=Zi(a.subscript,t);if(!r&&!s)return!1;let l="";return r&&s?l=`<msubsup>${n}${s}${r}</msubsup>`:r?l=`<msup>${n}${r}</msup>`:s&&(l=`<msub>${n}${s}</msub>`),o.mathML+=l,o.lastType="",!0}function jY(n,o,t){o=o??n.atoms.length;let i=n.index,a="";for(;n.index<o&&"text"===n.atoms[n.index].mode;)a+=n.atoms[n.index].value?n.atoms[n.index].value:" ",n.index+=1;return a.length>0&&(n.mathML+=`<mtext ${yo(n.atoms[i].id,t)}\n      >${a}</mtext>`,n.lastType="mtext",!0)}function qY(n,o,t){o=o??n.atoms.length;let i=n.index,a="",r=function UY(n){let o=-1,t=n.index,i=!1,a=!1;for(;t<n.atoms.length&&!i&&!a;){let r=n.atoms[t];i=!r.isDigit(),a=!i&&void 0!==r.superscript,t++}return a&&(o=t-1),o}(n);for(r>=0&&r<o&&(o=r);n.index<o&&n.atoms[n.index].isDigit();)a+=n.atoms[n.index].asDigit(),n.index+=1;return!(a.length<=0||(a="<mn"+yo(n.atoms[i].id,t)+">"+a+"</mn>",r<0&&function DY(n){return n.index<n.atoms.length&&n.atoms[n.index].superscript&&"msubsup"===n.atoms[n.index].type}(n)&&(r=n.index,n.index+=1),x_(a,n,t)||(n.mathML+=a,n.lastType="mn"),0))}function RY(n,o,t){let i=!1,a="",r="";if(n.index<(o=o??n.atoms.length)&&"mopen"===n.atoms[n.index].type){let s=!1,l=0,c=n.index,u=-1,m=c+1;for(;m<o&&!s;)"mopen"===n.atoms[m].type?l+=1:"mclose"===n.atoms[m].type&&(l-=1),-1===l&&(s=!0,u=m),m+=1;s&&(a="<mrow>",a+=Pm(n.atoms[c],t),a+=Zi(n.atoms,t,c+1,u),a+=Pm(n.atoms[u],t),a+="</mrow>",n.index=u+1,("mi"===n.lastType||"mn"===n.lastType||"mfrac"===n.lastType||"fence"===n.lastType)&&(n.mathML+=q2),x_(a,n,t)&&(i=!0,n.lastType="",a=""),r="fence")}return a.length>0&&(i=!0,n.mathML+=a,n.lastType=r),i}function zY(n,o,t){let i=!1,a="",r="",s=n.atoms[n.index];if(n.index<(o=o??n.atoms.length)&&("mbin"===s.type||"mrel"===s.type))a+=R2(n.atoms[n.index],t),n.index+=1,r="mo";else if(n.index<o&&"mop"===s.type){if("over-under"===s.subsupPlacement&&(s.superscript||s.subscript)){let l=Pm(s,t);s.superscript&&s.subscript?(a+="<munderover>"+l,a+=Zi(s.subscript,t),a+=Zi(s.superscript,t),a+="</munderover>"):s.superscript?(a+="<mover>"+l,a+=Zi(s.superscript,t),a+="</mover>"):s.subscript&&(a+="<munder>"+l,a+=Zi(s.subscript,t),a+="</munder>"),r="mo"}else{let l=n.atoms[n.index],c="\\operatorname"===l.value,u=c?'<mi class="MathML-Unit"'+yo(l.id,t)+">"+b_(l.value)+"</mi>":Pm(l,t);a+=u,c||/^<mo>(.*)<\/mo>$/.test(u)?r=c?"mi":"mo":(a+=jy,r="applyfunction")}("mi"===n.lastType||"mn"===n.lastType)&&!/^<mo>(.*)<\/mo>$/.test(a)&&(a=q2+a),n.index+=1}return a.length>0&&(i=!0,x_(a,n,t)||(n.mathML+=a,n.lastType=r)),i}function Zi(n,o,t,i){let a={atoms:[],index:t??0,mathML:"",lastType:""};if("number"==typeof n||"boolean"==typeof n)a.mathML=n.toString();else if("string"==typeof n)a.mathML=n;else if(n instanceof kt)a.mathML=R2(n,o);else if(Array.isArray(n)){a.atoms=n;let r=0;for(i=i||(n?n.length:0);a.index<i;)if(jY(a,i,o)||qY(a,i,o)||ZY(a,i,o)||zY(a,i,o)||RY(a,i,o))r+=1;else if(a.index<i){let s=R2(a.atoms[a.index],o);"mn"===a.lastType&&s.length>0&&"genfrac"===a.atoms[a.index].type&&(s="<mo>&#x2064;</mo>"+s),a.lastType="genfrac"===a.atoms[a.index].type?"mfrac":"",a.index+=1,x_(s,a,o)?r+=1:s.length>0&&(a.mathML+=s,r+=1)}r>1&&(a.mathML="<mrow>"+a.mathML+"</mrow>")}return a.mathML}function Pm(n,o){let t="",i=b_(n.value);return i&&(t="<mo"+yo(n.id,o)+">"+i+"</mo>"),t}function b_(n){if(!n)return"";if("string"==typeof n)return k1(n);if(!Array.isArray(n)&&"string"==typeof n.body)return k1(n.body);let o="";for(let t of n)"string"==typeof t.value&&(o+=t.value);return k1(o)}function R2(n,o){var t,i,a,r,s,l,c,u,m,p,f,b,L,N,R,j,G,ae,W,le,ve,ce,te,Se,Ze;let Re,Je,Ke,et,gt,ue,se={widehat:"^",widecheck:"\u02c7",widetilde:"~",utilde:"~",overleftarrow:"\u2190",underleftarrow:"\u2190",xleftarrow:"\u2190",overrightarrow:"\u2192",underrightarrow:"\u2192",xrightarrow:"\u2192",underbrace:"\u23df",overbrace:"\u23de",overgroup:"\u23e0",undergroup:"\u23e1",overleftrightarrow:"\u2194",underleftrightarrow:"\u2194",xleftrightarrow:"\u2194",Overrightarrow:"\u21d2",xRightarrow:"\u21d2",overleftharpoon:"\u21bc",xleftharpoonup:"\u21bc",overrightharpoon:"\u21c0",xrightharpoonup:"\u21c0",xLeftarrow:"\u21d0",xLeftrightarrow:"\u21d4",xhookleftarrow:"\u21a9",xhookrightarrow:"\u21aa",xmapsto:"\u21a6",xrightharpoondown:"\u21c1",xleftharpoondown:"\u21bd",xrightleftharpoons:"\u21cc",xleftrightharpoons:"\u21cb",xtwoheadleftarrow:"\u219e",xtwoheadrightarrow:"\u21a0",xlongequal:"=",xtofrom:"\u21c4",xrightleftarrows:"\u21c4",xrightequilibrium:"\u21cc",xleftequilibrium:"\u21cb"},pe={"\\exponentialE":"&#x02147;","\\imaginaryI":"&#x2148;","\\differentialD":"&#x2146;","\\capitalDifferentialD":"&#x2145;","\\alpha":"&#x03b1;","\\pi":"&#x03c0;","\\infty":"&#x221e;","\\forall":"&#x2200;","\\nexists":"&#x2204;","\\exists":"&#x2203;","\\hbar":"\u210f","\\cdotp":"\u22c5","\\ldots":"\u2026","\\cdots":"\u22ef","\\ddots":"\u22f1","\\vdots":"\u22ee","\\ldotp":"."},Pe={"\\!":-3/18,"\\ ":6/18,"\\,":3/18,"\\:":4/18,"\\;":5/18,"\\enspace":.5,"\\quad":1,"\\qquad":2,"\\enskip":.5},Oe="",Fe="",Te=null!=(i={cal:"script",frak:"fraktur",bb:"double-struck",scr:"script",cmtt:"monospace",cmss:"sans-serif"}[null!=(t=n.fontFamily)?t:n.font])?i:"";Te&&(Te=` mathvariant="${Te}"`);let{command:Ee}=n;if("text"===n.mode)Oe=`<mi${yo(n.id,o)}>${n.value}</mi>`;else switch(n.type){case"first":case"line":case"overlap":case"msubsup":case"phantom":case"composition":case"rule":case"chem":case"error":break;case"group":case"root":Oe=xs[n.command]?xs[n.command]:Zi(n.body,o);break;case"array":if((n.leftDelim&&"."!==n.leftDelim||n.rightDelim&&"."!==n.rightDelim)&&(Oe+="<mrow>",n.leftDelim&&"."!==n.leftDelim&&(Oe+="<mo>"+(xs[n.leftDelim]||n.leftDelim)+"</mo>")),Oe+="<mtable",n.colFormat){for(Oe+=' columnalign="',Ke=0;Ke<n.colFormat.length;Ke++)n.colFormat[Ke].align&&(Oe+={l:"left",c:"center",r:"right"}[n.colFormat[Ke].align]+" ");Oe+='"'}for(Oe+=">",Je=0;Je<n.array.length;Je++){for(Oe+="<mtr>",Re=0;Re<n.array[Je].length;Re++)Oe+="<mtd>"+Zi(n.array[Je][Re],o)+"</mtd>";Oe+="</mtr>"}Oe+="</mtable>",(n.leftDelim&&"."!==n.leftDelim||n.rightDelim&&"."!==n.rightDelim)&&(n.rightDelim&&"."!==n.rightDelim&&(Oe+="<mo>"+(xs[n.leftDelim]||n.rightDelim)+"</mo>"),Oe+="</mrow>");break;case"genfrac":(n.leftDelim||n.rightDelim)&&(Oe+="<mrow>"),n.leftDelim&&"."!==n.leftDelim&&(Oe+="<mo"+yo(n.id,o)+">"+(xs[n.leftDelim]||n.leftDelim)+"</mo>"),n.hasBarLine?(Oe+="<mfrac>",Oe+=Zi(n.above,o)||"<mi>&nbsp;</mi>",Oe+=Zi(n.below,o)||"<mi>&nbsp;</mi>",Oe+="</mfrac>"):(Oe+="<mtable"+yo(n.id,o)+">",Oe+="<mtr>"+Zi(n.above,o)+"</mtr>",Oe+="<mtr>"+Zi(n.below,o)+"</mtr>",Oe+="</mtable>"),n.rightDelim&&"."!==n.rightDelim&&(Oe+="<mo"+yo(n.id,o)+">"+(xs[n.rightDelim]||n.rightDelim)+"</mo>"),(n.leftDelim||n.rightDelim)&&(Oe+="</mrow>");break;case"surd":n.hasEmptyBranch("above")?(Oe+="<msqrt"+yo(n.id,o)+">",Oe+=Zi(n.body,o),Oe+="</msqrt>"):(Oe+="<mroot"+yo(n.id,o)+">",Oe+=Zi(n.body,o),Oe+=Zi(n.above,o),Oe+="</mroot>");break;case"leftright":Oe="<mrow>",n.leftDelim&&"."!==n.leftDelim&&(Oe+="<mo"+yo(n.id,o)+">"+(null!=(a=xs[n.leftDelim])?a:n.leftDelim)+"</mo>"),n.body&&(Oe+=Zi(n.body,o)),n.rightDelim&&"."!==n.rightDelim&&(Oe+="<mo"+yo(n.id,o)+">"+(null!=(r=xs[n.rightDelim])?r:n.rightDelim)+"</mo>"),Oe+="</mrow>";break;case"sizeddelim":case"delim":Oe+='<mo separator="true"'+yo(n.id,o)+">"+(xs[n.delim]||n.delim)+"</mo>";break;case"accent":Oe+='<mover accent="true"'+yo(n.id,o)+">",Oe+=Zi(n.body,o),Oe+="<mo>"+(xs[Ee]||n.accent)+"</mo>",Oe+="</mover>";break;case"overunder":gt=n.above,et=n.below,(n.svgAbove||gt)&&(n.svgBelow||et)?ue=n.body:gt&&gt.length>0?(ue=n.body,null!=(l=null==(s=n.body)?void 0:s[0])&&l.below?(et=n.body[0].below,ue=n.body[0].body):"first"===(null==(u=null==(c=n.body)?void 0:c[0])?void 0:u.type)&&null!=(p=null==(m=n.body)?void 0:m[1])&&p.below&&(et=n.body[1].below,ue=n.body[1].body)):et&&et.length>0&&(ue=n.body,null!=(b=null==(f=n.body)?void 0:f[0])&&b.above?(gt=n.body[0].above,ue=n.body[0].body):"first"===(null==(N=null==(L=n.body)?void 0:L[0])?void 0:N.type)&&null!=(j=null==(R=n.body)?void 0:R[1])&&j.above&&(gt=n.body[1].overscript,ue=n.body[1].body)),(n.svgAbove||gt)&&(n.svgBelow||et)?(Oe+=`<munderover ${Te} ${yo(n.id,o)}>`,Oe+=null!=(G=se[n.svgBody])?G:Zi(ue,o),Oe+=null!=(ae=se[n.svgBelow])?ae:Zi(et,o),Oe+=null!=(W=se[n.svgAbove])?W:Zi(gt,o),Oe+="</munderover>"):n.svgAbove||gt?(Oe+=`<mover ${Te} ${yo(n.id,o)}>`+(null!=(le=se[n.svgBody])?le:Zi(ue,o)),Oe+=null!=(ve=se[n.svgAbove])?ve:Zi(gt,o),Oe+="</mover>"):(n.svgBelow||et)&&(Oe+=`<munder ${Te} ${yo(n.id,o)}>`+(null!=(ce=se[n.svgBody])?ce:Zi(ue,o)),Oe+=null!=(te=se[n.svgBelow])?te:Zi(et,o),Oe+="</munder>");break;case"placeholder":case"mord":{Oe=pe[Ee]||Ee||("string"==typeof n.value?n.value:"");let Ue=Ee?Ee.match(/{?\\char"([\dabcdefABCDEF]*)}?/):null;Ue?Oe="&#x"+Ue[1]+";":Oe.length>0&&Oe.startsWith("\\")&&(Oe="string"==typeof n.value&&n.value.charCodeAt(0)>255?"&#x"+("000000"+n.value.charCodeAt(0).toString(16)).slice(-4)+";":"string"==typeof n.value?n.value.charAt(0):"");let $e=/\d/.test(Oe)?"mn":"mi";Oe=`<${$e}${Te}${yo(n.id,o)}>${k1(Oe)}</${$e}>`;break}case"mbin":case"mrel":case"minner":Oe=Ee&&pe[Ee]?"<mi"+yo(n.id,o)+">"+pe[Ee]+"</mi>":Ee&&xs[Ee]?"<mo"+yo(n.id,o)+">"+xs[Ee]+"</mo>":Pm(n,o);break;case"mpunct":Oe='<mo separator="true"'+yo(n.id,o)+">"+(null!=(Se=xs[Ee])?Se:Ee)+"</mo>";break;case"mop":"\u200b"!==n.body&&(Oe="<mo"+yo(n.id,o)+">",Oe+="\\operatorname"===Ee?n.body:Ee||n.body,Oe+="</mo>");break;case"box":Oe='<menclose notation="box"',n.backgroundcolor&&(Oe+=' mathbackground="'+n.backgroundcolor+'"'),Oe+=yo(n.id,o)+">"+Zi(n.body,o)+"</menclose>";break;case"spacing":Oe+='<mspace width="'+(null!=(Ze=Pe[Ee])?Ze:0)+'em"/>';break;case"enclose":Oe='<menclose notation="';for(let Ue in n.notation)Object.prototype.hasOwnProperty.call(n.notation,Ue)&&n.notation[Ue]&&(Oe+=Fe+Ue,Fe=" ");Oe+=yo(n.id,o)+'">'+Zi(n.body,o)+"</menclose>";break;case"space":Oe+="&nbsp;";break;case"mopen":case"mclose":Oe+=Pm(n,o);break;case"macro":{let Ue=n.command+b_(n.macroArgs);Ue&&(Oe+=`<mo ${yo(n.id,o)}>${Ue}</mo>`)}break;case"latexgroup":case"tooltip":Oe+=Zi(n.body,o);break;case"latex":Oe+="<mtext"+yo(n.id,o)+">"+n.value+"</mtext>"}return Oe}var hh={"\\alpha":"alpha ","\\mu":"mew ","\\sigma":"sigma ","\\pi":"pie ","\\imaginaryI":"eye ","\\sum":"Summation ","\\prod":"Product ","+":"plus ","-":"minus ",";":'<break time="150ms"/> semi-colon <break time="150ms"/>',",":'<break time="150ms"/> comma  <break time="150ms"/>',"|":'<break time="150ms"/>Vertical bar<break time="150ms"/>',"(":'<break time="150ms"/>Open paren. <break time="150ms"/>',")":'<break time="150ms"/> Close paren. <break time="150ms"/>',"=":"equals ","<":"is less than ","\\lt":"is less than ","<=":"is less than or equal to ","\\le":"is less than or equal to ","\\gt":"is greater than ",">":"is greater than ","\\ge":"is greater than or equal to ","\\geq":"is greater than or equal to ","\\leq":"is less than or equal to ","!":"factorial ","\\sin":"sine ","\\cos":"cosine ","\u200b":"","\u2212":"minus ",":":'<break time="150ms"/> such that <break time="200ms"/> ',"\\colon":'<break time="150ms"/> such that <break time="200ms"/> ',"\\hbar":"etch bar ","\\iff":'<break time="200ms"/>if, and only if, <break time="200ms"/>',"\\Longleftrightarrow":'<break time="200ms"/>if, and only if, <break time="200ms"/>',"\\land":"and ","\\lor":"or ","\\neg":"not ","\\div":"divided by ","\\forall":"for all ","\\exists":"there exists ","\\nexists":"there does not exists ","\\in":"element of ","\\N":'the set <break time="150ms"/><say-as interpret-as="character">n</say-as>',"\\C":'the set <break time="150ms"/><say-as interpret-as="character">c</say-as>',"\\Z":'the set <break time="150ms"/><say-as interpret-as="character">z</say-as>',"\\Q":'the set <break time="150ms"/><say-as interpret-as="character">q</say-as>',"\\infty":"infinity ","\\nabla":"nabla ","\\partial":"partial derivative of ","\\cdot":"times ","\\cdots":"dot dot dot ","\\Rightarrow":"implies ","\\lparen":'<break time="150ms"/>open paren<break time="150ms"/>',"\\rparen":'<break time="150ms"/>close paren<break time="150ms"/>',"\\lbrace":'<break time="150ms"/>open brace<break time="150ms"/>',"\\{":'<break time="150ms"/>open brace<break time="150ms"/>',"\\rbrace":'<break time="150ms"/>close brace<break time="150ms"/>',"\\}":'<break time="150ms"/>close brace<break time="150ms"/>',"\\langle":'<break time="150ms"/>left angle bracket<break time="150ms"/>',"\\rangle":'<break time="150ms"/>right angle bracket<break time="150ms"/>',"\\lfloor":'<break time="150ms"/>open floor<break time="150ms"/>',"\\rfloor":'<break time="150ms"/>close floor<break time="150ms"/>',"\\lceil":'<break time="150ms"/>open ceiling<break time="150ms"/>',"\\rceil":'<break time="150ms"/>close ceiling<break time="150ms"/>',"\\vert":'<break time="150ms"/>vertical bar<break time="150ms"/>',"\\mvert":'<break time="150ms"/>divides<break time="150ms"/>',"\\lvert":'<break time="150ms"/>left vertical bar<break time="150ms"/>',"\\rvert":'<break time="150ms"/>right vertical bar<break time="150ms"/>',"\\lbrack":'<break time="150ms"/> open square bracket <break time="150ms"/>',"\\rbrack":'<break time="150ms"/> close square bracket <break time="150ms"/>',mm:"millimeters",cm:"centimeters",km:"kilometers",kg:"kilograms"},z2={array:"array",matrix:"matrix",pmatrix:"parenthesis matrix",bmatrix:"square brackets matrix",Bmatrix:"braces matrix",vmatrix:"bars matrix",Vmatrix:"double bars matrix","matrix*":"matrix",smallmatrix:"small matrix"};function v_(n){let o=0;if(Ea(n))for(let t of n)"first"!==t.type&&(o+=1);return 1===o}function qy(n){let o="";if(Ea(n))for(let t of n)"first"!==t.type&&"string"==typeof t.value&&(o+=t.value);return o}function eo(n,o,t){var i,a,r,s;function c(m){return"<emphasis>"+m+"</emphasis>"}if(!o)return"";let u="";if(Ea(o)){let m=!1,p=!1;for(let f=0;f<o.length;f++)"first"!==o[f].type&&("text"!==o[f].mode&&(p=!1),f<o.length-2&&"mopen"===o[f].type&&"mclose"===o[f+2].type&&"mord"===o[f+1].type?(u+=" of ",u+=c(eo(n,o[f+1],t)),f+=2):"text"===o[f].mode?p?u+=null!=(i=o[f].value)?i:" ":(p=!0,u+=eo("text",o[f],t)):o[f].isDigit()?m?u+=o[f].asDigit():(m=!0,u+=eo(n,o[f],t)):(m=!1,u+=eo(n,o[f],t)))}else if("text"===o.mode)o.id&&"math"===n&&(u+='<mark name="'+o.id.toString()+'"/>'),u+=o.value;else{o.id&&"math"===n&&(u+='<mark name="'+o.id.toString()+'"/>');let m="",p="",f="",b=!1,{command:L}=o;switch(o.type){case"accent":"\\vec"===L&&(u+="vector "+eo(n,o.body,t));break;case"array":let N=o.array,R=o.environmentName;if(Object.keys(z2).includes(R)){u+=` begin ${z2[R]} `;for(let W=0;W<N.length;W++){W>0&&(u+=","),u+=` row ${W+1} `;for(let le=0;le<N[W].length;le++)le>0&&(u+=","),u+=` column ${le+1}: `,u+=eo("math",N[W][le],t)}u+=` end ${z2[R]} `}break;case"group":"\\ne"===L?u+=" not equal ":("\\not"===L&&(u+=" not "),u+=eo("math",o.body,t));break;case"root":u+=eo("math",o.body,t);break;case"genfrac":if(m=eo("math",o.above,t),p=eo("math",o.below,t),v_(o.above)&&v_(o.below)){let W={"1/2":" half ","1/3":" one third ","2/3":" two third","1/4":" one quarter ","3/4":" three quarter ","1/5":" one fifth ","2/5":" two fifths ","3/5":" three fifths ","4/5":" four fifths ","1/6":" one sixth ","5/6":" five sixths ","1/8":" one eight ","3/8":" three eights ","5/8":" five eights ","7/8":" seven eights ","1/9":" one ninth ","2/9":" two ninths ","4/9":" four ninths ","5/9":" five ninths ","7/9":" seven ninths ","8/9":" eight ninths "}[qy(o.above)+"/"+qy(o.below)];W?u=W:u+=m+" over "+p}else u+=' the fraction <break time="150ms"/>'+m+' over <break time="150ms"/>'+p+'.<break time="150ms"/> End fraction.<break time="150ms"/>';break;case"surd":if(f=eo("math",o.body,t),o.hasEmptyBranch("above"))u+=v_(o.body)?" the square root of "+f+" , ":' the square root of <break time="200ms"/>'+f+'. <break time="200ms"/> End square root';else{let W=eo("math",o.above,t);W=W.trim();let le=W.replace(/<mark([^/]*)\/>/g,"");u+="3"===le?' the cube root of <break time="200ms"/>'+f+'. <break time="200ms"/> End cube root':"n"===le?' the nth root of <break time="200ms"/>'+f+'. <break time="200ms"/> End root':' the root with index: <break time="200ms"/>'+W+', of <break time="200ms"/>'+f+'. <break time="200ms"/> End root'}break;case"leftright":{let W=o;u+=null!=(a=W.leftDelim?hh[W.leftDelim]:void 0)?a:W.leftDelim,u+=eo("math",o.body,t),u+=null!=(r=W.rightDelim?hh[W.rightDelim]:void 0)?r:W.rightDelim}break;case"rule":case"overunder":case"overlap":case"space":case"spacing":break;case"line":let j=o.position;u+=`${j} `,u+=eo("math",o.body,t),u+=` end ${j} `;break;case"macro":let G=L.replace(/^\\/g,""),ae=g2()[G];ae&&(u+=null!=ae&&ae.expand?eo("math",o.body,t):`${G} `);break;case"placeholder":u+="placeholder ";break;case"delim":case"sizeddelim":case"mord":case"minner":case"mbin":case"mrel":case"mpunct":case"mopen":case"mclose":{if("\\mathbin"===L||"\\mathrel"===L||"\\mathopen"===L||"\\mathclose"===L||"\\mathpunct"===L||"\\mathord"===L||"\\mathinner"===L){u=eo(n,o.body,t);break}let W=o.isDigit()?o.asDigit():o.value,le=o.command;if(("delim"===o.type||"sizeddelim"===o.type)&&(le=o.value,W=le),"text"===n)u+=W;else{if("mbin"===o.type&&(u+='<break time="150ms"/>'),W){let ve=hh[W]||(le?hh[le.trim()]:"");if(ve)u+=" "+ve;else{let ce=le?function HY(n){let o="";return n.startsWith("\\")&&(o=" "+n.replace("\\","")+" "),o}(le.trim()):"";u+=ce||function l(m){return t.textToSpeechMarkup?/[a-z]/.test(m)?` <say-as interpret-as="character">${m}</say-as>`:/[A-Z]/.test(m)?`capital <say-as interpret-as="character">${m.toLowerCase()}</say-as>`:m:/[a-z]/.test(m)?" '"+m.toUpperCase()+"'":/[A-Z]/.test(m)?" 'capital "+m.toUpperCase()+"'":m}(W)}}else u+=eo("math",o.body,t);"mbin"===o.type&&(u+='<break time="150ms"/>')}break}case"mop":if("\u200b"!==o.value){let W=o.command;if("\\sum"===W)if(o.hasEmptyBranch("superscript")||o.hasEmptyBranch("subscript"))if(o.hasEmptyBranch("subscript"))u+=" the summation of";else{let le=eo("math",o.subscript,t);le=le.trim(),u+=' the summation from <break time="200ms"/>'+le+'<break time="200ms"/> of <break time="150ms"/>',b=!0}else{let le=eo("math",o.superscript,t);le=le.trim();let ve=eo("math",o.subscript,t);ve=ve.trim(),u+=' the summation from <break time="200ms"/>'+ve+'<break time="200ms"/> to  <break time="200ms"/>'+le+'<break time="200ms"/> of <break time="150ms"/>',b=!0}else if("\\prod"===W)if(o.hasEmptyBranch("superscript")||o.hasEmptyBranch("subscript"))if(o.hasEmptyBranch("subscript"))u+=" the product  of ";else{let le=eo("math",o.subscript,t);le=le.trim(),u+=' the product from <break time="200ms"/>'+le+'<break time="200ms"/> of <break time="150ms"/>',b=!0}else{let le=eo("math",o.superscript,t);le=le.trim();let ve=eo("math",o.subscript,t);ve=ve.trim(),u+=' the product from <break time="200ms"/>'+ve+'<break time="200ms"/> to <break time="200ms"/>'+le+'<break time="200ms"/> of <break time="150ms"/>',b=!0}else if("\\int"===W)if(o.hasEmptyBranch("superscript")||o.hasEmptyBranch("subscript"))u+=' the integral of <break time="200ms"/> ';else{let le=eo("math",o.superscript,t);le=le.trim();let ve=eo("math",o.subscript,t);ve=ve.trim(),u+=' the integral from <break time="200ms"/>'+c(ve)+'<break time="200ms"/> to <break time="200ms"/>'+c(le)+' <break time="200ms"/> of ',b=!0}else"string"==typeof o.value?u+=(null!=(s=hh[o.value])?s:o.command?hh[o.command]:void 0)||" "+o.value:o.command&&(u+="\\mathop"===o.command?eo("math",o.body,t):"\\operatorname"===o.command?function KY(n,o){return n?n.map(t=>t.value).join(""):""}(o.body):o.command.startsWith("\\")?" "+o.command.slice(1):" "+o.command)}break;case"enclose":f=eo("math",o.body,t),u+=" crossed out "+f+". End crossed out."}if(!b&&!o.hasEmptyBranch("superscript")){let N=eo(n,o.superscript,t);N=N.trim();let R=N.replace(/<[^>]*>/g,"");if(v_(o.superscript)){if("math"===n){let j=function JY(n){if(Ea(n))for(let o of n)if("first"!==o.type&&o.id)return o.id.toString();return""}(o.superscript);j&&(u+='<mark name="'+j+'"/>')}"\u2032"===R?u+=" prime ":"2"===R?u+=" squared ":"3"===R?u+=" cubed ":Number.isNaN(Number.parseInt(R))?u+=" to the "+N+"; ":u+=' to the <say-as interpret-as="ordinal">'+R+"</say-as> power; "}else Number.isNaN(Number.parseInt(R))?u+=" raised to the "+N+"; ":u+=' raised to the <say-as interpret-as="ordinal">'+R+"</say-as> power; "}if(!b&&!o.hasEmptyBranch("subscript")){let N=eo("math",o.subscript,t);N=N.trim(),u+=v_(o.subscript)?" sub "+N:" subscript "+N+". End subscript. "}}return u}function Ah(n,o){var t;let i=mi(Et({},o),{textToSpeechRulesOptions:Et({},o.textToSpeechRulesOptions)});if("sre"===i.textToSpeechRules&&"sre"in globalThis){let r=Zi(n,i);return r?(i.textToSpeechMarkup&&(i.textToSpeechRulesOptions=null!=(t=i.textToSpeechRulesOptions)?t:{},i.textToSpeechRulesOptions.markup=i.textToSpeechMarkup,"ssml"===i.textToSpeechRulesOptions.markup&&(i.textToSpeechRulesOptions.markup="ssml_step"),i.textToSpeechRulesOptions.rate=i.speechEngineRate),i.textToSpeechRulesOptions&&globalThis.sre.System.getInstance().setupEngine(i.textToSpeechRulesOptions),globalThis.sre.System.getInstance().toSpeech(r)):""}let a=eo("math",n,i);if("ssml"===i.textToSpeechMarkup){let r="";i.speechEngineRate&&(r='<prosody rate="'+i.speechEngineRate+'">'),a='<?xml version="1.0"?><speak version="1.1" xmlns="http://www.w3.org/2001/10/synthesis" xml:lang="en-US"><amazon:auto-breaths>'+r+"<p><s>"+a+"</s></p>"+(r?"</prosody>":"")+"</amazon:auto-breaths></speak>"}else a="mac"===i.textToSpeechMarkup&&"macos"===rh()?a.replace(/<mark([^/]*)\/>/g,"").replace(/<emphasis>/g,"[[emph+]]").replace(/<\/emphasis>/g,"").replace(/<break time="(\d*)ms"\/>/g,"[[slc $1]]").replace(/<say-as[^>]*>/g,"").replace(/<\/say-as>/g,""):a.replace(/<[^>]*>/g,"").replace(/\s{2,}/g," ");return a}function yl(n,o,t,i){let a=o.split(" ");for(let r of a){let s=r.match(/(.*):(.*)/);if(s){let l=i??{};"active"===s[2]?l.passive=!1:l[s[2]]=!0,n.addEventListener(s[1],t,l)}else n.addEventListener(r,t,i)}}function S1(n,o,t,i){let a=o.split(" ");for(let r of a){let s=r.match(/(.*):(.*)/);if(s){let l=i??{};"active"===s[2]?l.passive=!1:l[s[2]]=!0,n.removeEventListener(s[1],t,l)}else n.removeEventListener(r,t,i)}}function Ry(n){var o;ly();let t=document.getElementById(n);return t?t.dataset.refcount=Number(Number.parseInt(null!=(o=t.getAttribute("data-refcount"))?o:"0")+1).toString():(t=document.createElement("div"),t.setAttribute("aria-hidden","true"),t.dataset.refcount="1",t.id=n,document.body.append(t)),t}function zy(n){var o;if(!n)return;let t=Number.parseInt(null!=(o=n.getAttribute("data-refcount"))?o:"0");t<=1?n.remove():n.dataset.refcount=Number(t-1).toString()}function Qm(n){var o;return(null==(o=n.element)?void 0:o.mathfield)===n}function w_(n){let o=function GY(n){var o,t;return null!=(t=null!=(o=n.querySelector(".ML__caret"))?o:n.querySelector(".ML__text-caret"))?t:n.querySelector(".ML__latex-caret")}(n);if(!o)return null;let t=o.getBoundingClientRect();return{x:t.right,y:t.bottom,height:t.height}}function YY(n){var o;if(!n.parent)return"root";let t=null!=(o=n.parent.id)?o:"";return t+="string"==typeof n.treeBranch?"-"+n.treeBranch:`-${n.treeBranch[0]}/${n.treeBranch[0]}`,t}function Hy(n,o){if(!o)return null;let t=n.field.getBoundingClientRect(),i=o.right-o.left,a=o.bottom-o.top,r=Math.ceil(o.left-t.left+n.field.scrollLeft),s=Math.ceil(o.top-t.top);return{left:r,right:r+i,top:s,bottom:s+a}}function Jy(n){let o=n.getBoundingClientRect(),t=parseInt(getComputedStyle(n).marginRight),i={top:o.top-1,bottom:o.bottom,left:o.left,right:o.right-1+t};if(0===n.children.length||"SVG"===n.tagName.toUpperCase())return i;for(let a of n.children)if(1===a.nodeType&&"atomId"in a.dataset&&!a.classList.contains("pstrut")){let r=Jy(a);i.left=Math.min(i.left,r.left),i.right=Math.max(i.right,r.right),i.top=Math.min(i.top,r.top),i.bottom=Math.max(i.bottom,r.bottom)}return i}function y_(n,o){var t,i;if(!o.id)return null;let a=null!=(i=null==(t=n.atomBoundsCache)?void 0:t.get(o.id))?i:null;if(null!==a)return a;let r=n.field.querySelector(`[data-atom-id="${o.id}"]`);return a=r?Jy(r):null,n.atomBoundsCache&&(a?n.atomBoundsCache.set(o.id,a):n.atomBoundsCache.delete(o.id)),a??null}function Ky(n,o){return n.model.selection.ranges.reduce((t,i)=>t.concat(...function $Y(n,o,t){let i=new Map;for(let a of n.model.getAtoms(o,{includeChildren:!0})){if(null!=t&&t.excludeAtomsWithBackground&&a.style.backgroundColor)break;let r=Hy(n,y_(n,a));if(r){let s=YY(a);if(i.has(s)){let l=i.get(s);i.set(s,{left:Math.min(l.left,r.left),right:Math.max(l.right,r.right),top:Math.min(l.top,r.top),bottom:Math.max(l.bottom,r.bottom)})}else i.set(s,r)}}return[...i.values()]}(n,i,o)),[])}function Yy(n){let o=0,t=0,i=n.offsetWidth,a=n.offsetHeight;for(;n instanceof HTMLElement;)o+=n.offsetTop,t+=n.offsetLeft,n=n.offsetParent;return new DOMRect(t,o,i,a)}var $y={main:["Main-Regular","ML__cmr"],"main-italic":["Main-Italic","ML__cmr ML__it"],"main-bold":["Main-Bold","ML__cmr ML__bold"],"main-bolditalic":["Main-BoldItalic","ML__cmr ML__bold ML__it"],normal:["Main-Regular","ML__cmr"],"normal-bold":["Main-Bold","ML__mathbf"],"normal-italic":["Math-Italic","ML__mathit"],"normal-bolditalic":["Math-BoldItalic","ML__mathbfit"],ams:["AMS-Regular","ML__ams"],"ams-bold":["AMS-Regular","ML__ams"],"ams-italic":["AMS-Regular","ML__ams"],"ams-bolditalic":["AMS-Regular","ML__ams"],"sans-serif":["SansSerif-Regular","ML__sans"],"sans-serif-bold":["SansSerif-Regular","ML__sans ML__bold"],"sans-serif-italic":["SansSerif-Regular","ML__sans"],"sans-serif-bolditalic":["SansSerif-Regular","ML__sans"],calligraphic:["Caligraphic-Regular","ML__cal"],"calligraphic-bold":["Caligraphic-Regular","ML__cal ML__bold"],"calligraphic-italic":["Caligraphic-Regular","ML__cal ML__it"],"calligraphic-bolditalic":["Caligraphic-Regular","ML__cal ML__bold ML__it"],script:["Script-Regular","ML__script"],"script-bold":["Script-Regular","ML__script ML__bold"],"script-italic":["Script-Regular","ML__script ML__it"],"script-bolditalic":["Script-Regular","ML__script ML__bold ML__it"],fraktur:["Fraktur-Regular","ML__frak"],"fraktur-bold":["Fraktur-Regular","ML__frak"],"fraktur-italic":["Fraktur-Regular","ML__frak"],"fraktur-bolditalic":["Fraktur-Regular","ML__frak"],monospace:["Typewriter-Regular","ML__tt"],"monospace-bold":["Typewriter-Regular","ML__tt ML__bold"],"monospace-italic":["Typewriter-Regular","ML__tt ML__it"],"monospace-bolditalic":["Typewriter-Regular","ML__tt ML__bold ML__it"],"double-struck":["AMS-Regular","ML__bb"],"double-struck-bold":["AMS-Regular","ML__bb"],"double-struck-italic":["AMS-Regular","ML__bb"],"double-struck-bolditalic":["AMS-Regular","ML__bb"]},Vy={"double-struck":/^[A-Z ]$/,script:/^[A-Z ]$/,calligraphic:/^[\dA-Z ]$/,fraktur:/^[\dA-Za-z ]$|^[!"#$%&'()*+,\-./:;=?[]^\u2019\u2018]$/,monospace:/^[\dA-Za-z ]$|^[!"&'()*+,\-./:;=?@[\]^_~\u0131\u0237\u0393\u0394\u0398\u039B\u039E\u03A0\u03A3\u03A5\u03A8\u03A9]$/,"sans-serif":/^[\dA-Za-z ]$|^[!"&'()*+,\-./:;=?@[\]^_~\u0131\u0237\u0393\u0394\u0398\u039B\u039E\u03A0\u03A3\u03A5\u03A8\u03A9]$/},Wy=/^[\u03B1-\u03C9]|\u03D1|\u03D5|\u03D6|\u03F1|\u03F5]$/,WY=[/^[a-z]$/,/^[A-Z]$/,Wy,/^[\u0393|\u0394\u0398\u039B\u039E\u03A0\u03A3\u03A5\u03A6\u03A8\u03A9]$/],XY={iso:["it","it","it","it"],tex:["it","it","it","up"],french:["it","up","up","up"],upright:["up","up","up","up"]};function H2(n){if(!n)return"";let{style:o}=n;if(void 0===o.variant)return"";let t=o.variant;return o.variantStyle&&"up"!==o.variantStyle&&(t+="-"+o.variantStyle),t}function _h(n){return[Bo(n.map(o=>o[0])),n.map(o=>o[1]).some(o=>!0===o)]}function s$(n,o){return _h($s(n,"fontSize").map(t=>{var i,a;let[r,s]=function r$(n,o){return _h($s(n,"fontSeries").map(t=>{let[i,a]=function a$(n,o){return _h($s(n,"fontShape").map(t=>{let[i,a]=function o$(n,o){return[Bo(n.map(t=>kt.serialize(t,o))),!0]}(t,o),{fontShape:r}=t[0].style;return"it"===r?["\\textit{"+i+"}",!1]:"sl"===r?["\\textsl{"+i+"}",!1]:"sc"===r?["\\textsc{"+i+"}",!1]:"n"===r?["\\textup{"+i+"}",!1]:r?[`{\\fontshape{${t[0].style.fontShape}}${i}`,!1]:[i,a]}))}(t,o),{fontSeries:r}=t[0].style;return"b"===r?[`\\textbf{${i}}`,!1]:"l"===r?[`\\textlf{${i}}`,!1]:"m"===r?[`\\textmd{${i}}`,!1]:r?[`\\fontseries{${r}}${i}`,!1]:[i,a]}))}(t,o),l=null!=(a=["","tiny","scriptsize","footnotesize","small","normalsize","large","Large","LARGE","huge","Huge"][null!=(i=t[0].style.fontSize)?i:""])?a:"";return l?[`{\\${l} ${r}}`,s]:[r,s]}))}function u$(n,o){return _h($s(n,"backgroundColor").map(t=>{var i,a;let[r,s]=function d$(n,o){var t;if(!n||0===n.length)return["",!1];let i=null==(t=n[0].parent)?void 0:t.style.color;return _h($s(n,"color").map(a=>{var r,s;let[l,c]=function c$(n,o){return function l$(n,o){return _h($s(n,"fontFamily").map(t=>{var i,a;let[r,s]=s$(t,o),l=null!=(a={roman:"textrm",monospace:"texttt","sans-serif":"textsf"}[null!=(i=t[0].style.fontFamily)?i:""])?a:"";return l?[`\\${l}{${r}}`,!1]:t[0].style.fontFamily?[`\\fontfamily{${t[0].style.fontFamily}}${r}`,s]:[r,s]}))}(n,o)}(a,o);return null!=(r=o.skipStyles)&&r||!a[0].style.color||"none"===a[0].style.color||i===a[0].style.color?[l,c]:[`\\textcolor{${null!=(s=a[0].style.verbatimColor)?s:a[0].style.color}}{${l}}`,!1]}))}(t,o),l=t[0].computedStyle;return null!=(i=o.skipStyles)&&i||!l.backgroundColor||"none"===l.backgroundColor?[r,s]:[`\\colorbox{${null!=(a=l.verbatimBackgroundColor)?a:l.backgroundColor}}{${r}}`,!1]}))}new class extends fd{constructor(){super("math")}createAtom(n,o,t){var i,a,r,s,l;let c=o.getDefinition(n,"math");if(null===c)return new kt("mord",o,{mode:"math",command:n,value:n,style:t});if("symbol"===c.definitionType){let m=new kt(null!=(i=c.type)?i:"mord",o,{mode:"math",command:null!=(a=c.command)?a:n,value:String.fromCodePoint(c.codepoint),style:t});return null!=(r=c.isFunction)&&r&&(m.isFunction=!0),n.startsWith("\\")&&(m.verbatimLatex=n),m}let u=new kt("mord",o,{mode:"math",command:null!=(s=c.command)?s:n,value:n,style:t});return null!=(l=c.isFunction)&&l&&(u.isFunction=!0),n.startsWith("\\")&&(u.verbatimLatex=n),u}serialize(n,o){let{parent:t}=n[0],i=t?.computedStyle.fontSize;return Bo($s(n,"fontSize").map(a=>{let r=function i$(n,o){let{parent:t}=n[0],i=t?.computedStyle.backgroundColor;return Bo($s(n,"backgroundColor").map(a=>{var r,s;let l=function n$(n,o){let{parent:t}=n[0],i=t?.computedStyle.color;return Bo($s(n,"color").map(a=>{var r,s;let l=function t$(n,o){var t;let{parent:i}=n[0],a=H2(i),r=null!=(t=i?.mode)?t:"math";return Bo($s(n,"variant").map(s=>{let l=H2(s[0]);if(s.every(u=>{let m=u.context.getDefinition(u.command,r);return!(!m||"function"===m.definitionType||!m.variant)&&H2(u)===l}))return Bo(s.map(u=>kt.serialize(u,o)));let c="";return l&&l!==a&&(c={calligraphic:"\\mathcal{",fraktur:"\\mathfrak{","double-struck":"\\mathbb{",script:"\\mathscr{",monospace:"\\mathtt{","sans-serif":"\\mathsf{",normal:"\\mathrm{","normal-italic":"\\mathnormal{","normal-bold":"\\mathbf{","normal-bolditalic":"\\mathbfit{",ams:"","ams-italic":"\\mathit{","ams-bold":"\\mathbf{","ams-bolditalic":"\\mathbfit{",main:"","main-italic":"\\mathit{","main-bold":"\\mathbf{","main-bolditalic":"\\mathbfit{"}[l]),c?c+Bo(s.map(u=>kt.serialize(u,o)))+"}":Bo(s.map(u=>kt.serialize(u,o)))}))}(a,o),c=a[0].computedStyle;return null!=(r=o.skipStyles)&&r||!c.color||t&&i===c.color?l:"\\textcolor{"+(null!=(s=c.verbatimColor)?s:c.color)+"}{"+l+"}"}))}(a,o),c=a[0].computedStyle;return!(null!=(r=o.skipStyles)&&r)&&l.trim()&&c.backgroundColor&&(!t||i!==c.backgroundColor)&&(a.length>0||!(a[0]instanceof Om))&&(l=`\\ensuremath{${l}}`,l=`\\colorbox{${null!=(s=c.verbatimBackgroundColor)?s:c.backgroundColor}}{${l}}`),l}))}(a,o),s=a[0].computedStyle.fontSize;return!s||t&&i===s?r:"\\"+["","tiny","scriptsize","footnotesize","small","normalsize","large","Large","LARGE","huge","Huge"][s]+" "+r}))}applyStyle(n,o){if(void 0===o.variant)return"";let t="auto"!==o.letterShapeStyle&&o.letterShapeStyle?o.letterShapeStyle:"tex",{variant:i}=o,{variantStyle:a}=o;"normal"===i&&!a&&/[\u00A3\u0131\u0237]/.test(n.value)&&(i="main",a="italic"),"normal"===i&&!a&&1===n.value.length&&WY.forEach((c,u)=>{c.test(n.value)&&"it"===XY[t][u]&&(a="italic")}),"up"===a&&(a=void 0);let r=a?i+"-"+a:i,[s,l]=$y[r];return Vy[i]&&!Vy[i].test(n.value)?(n.value=function DG(n,o,t){if(!/[A-Za-z\d]/.test(n)||!o&&!t)return n;let i=n.codePointAt(0);if(void 0===i)return n;for(let a of hy)if((!o||a.variant===o)&&(!t||a.style===t)&&i>=a.offset&&i<a.offset+a.len){let r=a.start+i-a.offset;return String.fromCodePoint(f2[r]||r)}return n}(n.value,i,a),null):(Wy.test(n.value)&&(n.classes+=" lcGreek"),l&&(n.classes+=" "+l),s)}};var Xy={roman:"","sans-serif":"ML__sans",monospace:"ML__tt"};function gu(n){let o=0;for(let t=0;t<n.length;t++)o=Math.imul(31,o)+n.charCodeAt(t)|0;return Math.abs(o)}function xu(n,o,t){var i,a;if(!o)return null;let r=null!=(i=n?.getRootNode())?i:document?.head;if(!r)return null;r===document&&(r=document.head);let s=r.querySelector(`style[data-id="${t}"]`);if(s){let l=Number.parseFloat(null!=(a=s.getAttribute("data-refcount"))?a:"0");s.dataset.refcount=Number(l+1).toString()}else{let l=document.createElement("style");l.dataset.id=t,l.dataset.refcount="1",l.append(document.createTextNode(o)),r.appendChild(l)}return{release:()=>{var l;let c=r.querySelector(`style[data-id="${t}"]`);if(c){let u=Number.parseFloat(null!=(l=c.getAttribute("data-refcount"))?l:"0");1===u?c.remove():c.dataset.refcount=Number(u-1).toString()}}}}function e3(n){let o=n.split("+"),t={shift:!1,alt:!1,cmd:!1,win:!1,meta:!1,ctrl:!1,key:o.pop()};return o.includes("shift")&&(t.shift=!0),o.includes("alt")&&(t.alt=!0),o.includes("ctrl")&&(t.ctrl=!0),o.includes("cmd")&&(t.cmd=!0),o.includes("win")&&(t.win=!0),o.includes("meta")&&(t.meta=!0),t}function E1(n){let o="";return n.shift&&(o+="shift+"),n.alt&&(o+="alt+"),n.ctrl&&(o+="ctrl+"),n.cmd&&(o+="cmd+"),n.win&&(o+="win+"),n.meta&&(o+="meta+"),o+n.key}new class extends fd{constructor(){super("text")}createAtom(n,o,t){let i=o.getDefinition(n,"text");return i&&"symbol"===i.definitionType?new mh(n,String.fromCodePoint(i.codepoint),t??{},o):null}serialize(n,o){var t;let[i,a]=u$(n,o);return!0===(null!=(t=o.skipModeCommand)&&t)&&(a=!1),a&&(i=`\\text{${i}}`),i}applyStyle(n,o){var t,i,a,r,s;let{fontFamily:l}=o;if(Xy[l]?n.classes+=" "+Xy[l]:l&&n.setStyle("font-family",l),o.fontShape&&(n.classes+=" ",n.classes+=null!=(t={it:"ML__it",sl:"ML__shape_sl",sc:"ML__shape_sc",ol:"ML__shape_ol"}[o.fontShape])?t:""),o.fontSeries){let c=o.fontSeries.match(/(.?[lbm])?(.?[cx])?/);c&&(n.classes+=" ",n.classes+=null!=(a={ul:"ML__series_ul",el:"ML__series_el",l:"ML__series_l",sl:"ML__series_sl",m:"",sb:"ML__series_sb",b:"ML__bold",eb:"ML__series_eb",ub:"ML__series_ub"}[null!=(i=c[1])?i:""])?a:"",n.classes+=" ",n.classes+=null!=(s={uc:"ML__series_uc",ec:"ML__series_ec",c:"ML__series_c",sc:"ML__series_sc",n:"",sx:"ML__series_sx",x:"ML__series_x",ex:"ML__series_ex",ux:"ML__series_ux"}[null!=(r=c[2])?r:""])?s:"")}return"Main-Regular"}},new class extends fd{constructor(){super("latex")}createAtom(n,o,t){return new la(n,o)}serialize(n,o){return n.filter(t=>t instanceof la&&!t.isSuggestion).map(t=>t.value).join("")}applyStyle(){return null}};var Fm,t3="apple"===J2()?{id:"apple.en-intl",displayName:"English (international)",virtualLayout:"qwerty",platform:"apple",locale:"en",score:0,mapping:{KeyA:["a","A","\xe5","\xc5"],KeyB:["b","B","\u222b","\u0131"],KeyC:["c","C","\xe7","\xc7"],KeyD:["d","D","\u2202","\xce"],KeyE:["e","E","\xb4","\xb4"],KeyF:["f","F","\u0192","\xcf"],KeyG:["g","G","\xa9","\u02dd"],KeyH:["h","H","\u02d9","\xd3"],KeyI:["i","I","\u02c6","\u02c6"],KeyJ:["j","J","\u2206","\xd4"],KeyK:["k","K","\u02da","\uf8ff"],KeyL:["l","L","\xac","\xd2"],KeyM:["m","M","\xb5","\xc2"],KeyN:["n","N","\u02dc","\u02dc"],KeyO:["o","O","\xf8","\xd8"],KeyP:["p","P","\u03c0","\u220f"],KeyQ:["q","Q","\u0153","\u0152"],KeyR:["r","R","\xae","\u2030"],KeyS:["s","S","\xdf","\xcd"],KeyT:["t","T","\u2020","\u02c7"],KeyU:["u","U","\xa8","\xa8"],KeyV:["v","V","\u221a","\u25ca"],KeyW:["w","W","\u2211","\u201e"],KeyX:["x","X","\u2248","\u02db"],KeyY:["y","Y","\xa5","\xc1"],KeyZ:["z","Z","\u03a9","\xb8"],Digit1:["1","!","\xa1","\u2044"],Digit2:["2","@","\u2122","\u20ac"],Digit3:["3","#","\xa3","\u2039"],Digit4:["4","$","\xa2","\u203a"],Digit5:["5","%","\u221e","\ufb01"],Digit6:["6","^","\xa7","\ufb02"],Digit7:["7","&","\xb6","\u2021"],Digit8:["8","*","\u2022","\xb0"],Digit9:["9","(","\xaa","\xb7"],Digit0:["0",")","\xba","\u201a"],Space:[" "," "," "," "],Minus:["-","_","\u2013","\u2014"],Equal:["=","+","\u2260","\xb1"],BracketLeft:["[","{","\u201c","\u201d"],BracketRight:["]","}","\u2018","\u2019"],Backslash:["\\","|","\xab","\xbb"],Semicolon:[";",":","\u2026","\xda"],Quote:["'",'"',"\xe6","\xc6"],Backquote:["`","\u02dc","`","`"],Comma:[",","<","\u2264","\xaf"],Period:[".",">","\u2265","\u02d8"],Slash:["/","?","\xf7","\xbf"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],Numpad1:["1","1","1","1"],Numpad2:["2","2","2","2"],Numpad3:["3","3","3","3"],Numpad4:["4","4","4","4"],Numpad5:["5","5","5","5"],Numpad6:["6","6","6","6"],Numpad7:["7","7","7","7"],Numpad8:["8","8","8","8"],Numpad9:["9","9","9","9"],Numpad0:["0","0","0","0"],NumpadDecimal:[".",".",".","."],IntlBackslash:["\xa7","\xb1","\xa7","\xb1"],NumpadEqual:["=","=","=","="],AudioVolumeUp:["","=","","="]}}:"windows"===J2()?{id:"windows.en-intl",displayName:"English (international)",platform:"windows",virtualLayout:"qwerty",locale:"en",score:0,mapping:{KeyA:["a","A","\xe1","\xc1"],KeyB:["b","B","",""],KeyC:["c","C","\xa9","\xa2"],KeyD:["d","D","\xf0","\xd0"],KeyE:["e","E","\xe9","\xc9"],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","\xed","\xcd"],KeyJ:["j","J","",""],KeyK:["k","K","",""],KeyL:["l","L","\xf8","\xd8"],KeyM:["m","M","\xb5",""],KeyN:["n","N","\xf1","\xd1"],KeyO:["o","O","\xf3","\xd3"],KeyP:["p","P","\xf6","\xd6"],KeyQ:["q","Q","\xe4","\xc4"],KeyR:["r","R","\xae",""],KeyS:["s","S","\xdf","\xa7"],KeyT:["t","T","\xfe","\xde"],KeyU:["u","U","\xfa","\xda"],KeyV:["v","V","",""],KeyW:["w","W","\xe5","\xc5"],KeyX:["x","X","",""],KeyY:["y","Y","\xfc","\xdc"],KeyZ:["z","Z","\xe6","\xc6"],Digit1:["1","!","\xa1","\xb9"],Digit2:["2","@","\xb2",""],Digit3:["3","#","\xb3",""],Digit4:["4","$","\xa4","\xa3"],Digit5:["5","%","\u20ac",""],Digit6:["6","^","\xbc",""],Digit7:["7","&","\xbd",""],Digit8:["8","*","\xbe",""],Digit9:["9","(","\u2018",""],Digit0:["0",")","\u2019",""],Space:[" "," ","",""],Minus:["-","_","\xa5",""],Equal:["=","+","\xd7","\xf7"],BracketLeft:["[","{","\xab",""],BracketRight:["]","}","\xbb",""],Backslash:["\\","|","\xac","\xa6"],Semicolon:[";",":","\xb6","\xb0"],Quote:["'",'"',"\xb4","\xa8"],Backquote:["`","~","",""],Comma:[",","<","\xe7","\xc7"],Period:[".",">","",""],Slash:["/","?","\xbf",""],NumpadDivide:["/","/","",""],NumpadMultiply:["*","*","",""],NumpadSubtract:["-","-","",""],NumpadAdd:["+","+","",""],IntlBackslash:["\\","|","",""]}}:{id:"linux.en",displayName:"English",platform:"linux",virtualLayout:"qwerty",locale:"en",score:0,mapping:{KeyA:["a","A","a","A"],KeyB:["b","B","b","B"],KeyC:["c","C","c","C"],KeyD:["d","D","d","D"],KeyE:["e","E","e","E"],KeyF:["f","F","f","F"],KeyG:["g","G","g","G"],KeyH:["h","H","h","H"],KeyI:["i","I","i","I"],KeyJ:["j","J","j","J"],KeyK:["k","K","k","K"],KeyL:["l","L","l","L"],KeyM:["m","M","m","M"],KeyN:["n","N","n","N"],KeyO:["o","O","o","O"],KeyP:["p","P","p","P"],KeyQ:["q","Q","q","Q"],KeyR:["r","R","r","R"],KeyS:["s","S","s","S"],KeyT:["t","T","t","T"],KeyU:["u","U","u","U"],KeyV:["v","V","v","V"],KeyW:["w","W","w","W"],KeyX:["x","X","x","X"],KeyY:["y","Y","y","Y"],KeyZ:["z","Z","z","Z"],Digit1:["1","!","1","!"],Digit2:["2","@","2","@"],Digit3:["3","#","3","#"],Digit4:["4","$","4","$"],Digit5:["5","%","5","%"],Digit6:["6","^","6","^"],Digit7:["7","&","7","&"],Digit8:["8","*","8","*"],Digit9:["9","(","9","("],Digit0:["0",")","0",")"],Space:[" "," "," "," "],Minus:["-","_","-","_"],Equal:["=","+","=","+"],BracketLeft:["[","{","[","{"],BracketRight:["]","}","]","}"],Backslash:["\\","|","\\","|"],Semicolon:[";",":",";",":"],Quote:["'",'"',"'",'"'],Backquote:["`","~","`","~"],Comma:[",","<",",","<"],Period:[".",">",".",">"],Slash:["/","?","/","?"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],Numpad1:["1","1","1","1"],Numpad2:["2","2","2","2"],Numpad3:["3","3","3","3"],Numpad4:["4","4","4","4"],Numpad5:["5","5","5","5"],Numpad6:["6","6","6","6"],Numpad7:["7","7","7","7"],Numpad8:["8","8","8","8"],Numpad9:["9","9","9","9"],Numpad0:["0","0","0","0"],NumpadDecimal:["",".","","."],IntlBackslash:["<",">","|","\xa6"],NumpadEqual:["=","=","=","="],NumpadComma:[".",".",".","."],NumpadParenLeft:["(","(","(","("],NumpadParenRight:[")",")",")",")"]}},h$={enter:"[Enter]",escape:"[Escape]",backspace:"[Backspace]",tab:"[Tab]",space:"[Space]",pausebreak:"[Pause]",insert:"[Insert]",home:"[Home]",pageup:"[PageUp]",delete:"[Delete]",end:"[End]",pagedown:"[PageDown]",right:"[ArrowRight]",left:"[ArrowLeft]",down:"[ArrowDown]",up:"[ArrowUp]",numpad0:"[Numpad0]",numpad1:"[Numpad1]",numpad2:"[Numpad2]",numpad3:"[Numpad3]",numpad4:"[Numpad4]",numpad5:"[Numpad5]",numpad6:"[Numpad6]",numpad7:"[Numpad7]",numpad8:"[Numpad8]",numpad9:"[Numpad9]",numpad_divide:"[NumpadDivide]",numpad_multiply:"[NumpadMultiply]",numpad_subtract:"[NumpadSubtract]",numpad_add:"[NumpadAdd]",numpad_decimal:"[NumpadDecimal]",numpad_separator:"[NumpadComma]",capslock:"[Capslock]",f1:"[F1]",f2:"[F2]",f3:"[F3]",f4:"[F4]",f5:"[F5]",f6:"[F6]",f7:"[F7]",f8:"[F8]",f9:"[F9]",f10:"[F10]",f11:"[F11]",f12:"[F12]",f13:"[F13]",f14:"[F14]",f15:"[F15]",f16:"[F16]",f17:"[F17]",f18:"[F18]",f19:"[F19]"},C_=[];function J2(){switch(rh()){case"macos":case"ios":return"apple";case"windows":return"windows"}return"linux"}function Tc(n){(!n.platform||n.platform===J2())&&C_.push(n)}function n3(n){Fm=C_.find(o=>n.startsWith(o.locale))}function T_(){return Fm??C_[0]}Tc(t3),Tc({id:"apple.french",locale:"fr",displayName:"French",platform:"apple",virtualLayout:"azerty",score:0,mapping:{KeyA:["q","Q","\u2021","\u03a9"],KeyB:["b","B","\xdf","\u222b"],KeyC:["c","C","\xa9","\xa2"],KeyD:["d","D","\u2202","\u2206"],KeyE:["e","E","\xea","\xca"],KeyF:["f","F","\u0192","\xb7"],KeyG:["g","G","\ufb01","\ufb02"],KeyH:["h","H","\xcc","\xce"],KeyI:["i","I","\xee","\xef"],KeyJ:["j","J","\xcf","\xcd"],KeyK:["k","K","\xc8","\xcb"],KeyL:["l","L","\xac","|"],KeyM:[",","?","\u221e","\xbf"],KeyN:["n","N","~","\u0131"],KeyO:["o","O","\u0153","\u0152"],KeyP:["p","P","\u03c0","\u220f"],KeyQ:["a","A","\xe6","\xc6"],KeyR:["r","R","\xae","\u201a"],KeyS:["s","S","\xd2","\u2211"],KeyT:["t","T","\u2020","\u2122"],KeyU:["u","U","\xba","\xaa"],KeyV:["v","V","\u25ca","\u221a"],KeyW:["z","Z","\xc2","\xc5"],KeyX:["x","X","\u2248","\u2044"],KeyY:["y","Y","\xda","\u0178"],KeyZ:["w","W","\u2039","\u203a"],Digit1:["&","1","\uf8ff","\xb4"],Digit2:["\xe9","2","\xeb","\u201e"],Digit3:['"',"3","\u201c","\u201d"],Digit4:["'","4","\u2018","\u2019"],Digit5:["(","5","{","["],Digit6:["\xa7","6","\xb6","\xe5"],Digit7:["\xe8","7","\xab","\xbb"],Digit8:["!","8","\xa1","\xdb"],Digit9:["\xe7","9","\xc7","\xc1"],Digit0:["\xe0","0","\xf8","\xd8"],Space:[" "," "," "," "],Minus:[")","\xb0","}","]"],Equal:["-","_","\u2014","\u2013"],BracketLeft:["^","\xa8","\xf4","\xd4"],BracketRight:["$","*","\u20ac","\xa5"],Backslash:["`","\xa3","@","#"],Semicolon:["m","M","\xb5","\xd3"],Quote:["\xf9","%","\xd9","\u2030"],Backquote:["<",">","\u2264","\u2265"],Comma:[";",".","\u2026","\u2022"],Period:[":","/","\xf7","\\"],Slash:["=","+","\u2260","\xb1"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],NumpadDecimal:[",",".",",","."],IntlBackslash:["@","#","\u2022","\u0178"],NumpadEqual:["=","=","=","="]}}),Tc({id:"apple.spanish",locale:"es",displayName:"Spanish ISO",platform:"apple",virtualLayout:"qwerty",score:0,mapping:{KeyA:["a","A","\xe5","\xc5"],KeyB:["b","B","\xdf",""],KeyC:["c","C","\xa9"," "],KeyD:["d","D","\u2202","\u2206"],KeyE:["e","E","\u20ac","\u20ac"],KeyF:["f","F","\u0192","\ufb01"],KeyG:["g","G","\uf8ff","\ufb02"],KeyH:["h","H","\u2122"," "],KeyI:["i","I"," "," "],KeyJ:["j","J","\xb6","\xaf"],KeyK:["k","K","\xa7","\u02c7"],KeyL:["l","L"," ","\u02d8"],KeyM:["m","M","\xb5","\u02da"],KeyN:["n","N"," ","\u02d9"],KeyO:["o","O","\xf8","\xd8"],KeyP:["p","P","\u03c0","\u220f"],KeyQ:["q","Q","\u0153","\u0152"],KeyR:["r","R","\xae"," "],KeyS:["s","S","\u222b"," "],KeyT:["t","T","\u2020","\u2021"],KeyU:["u","U"," "," "],KeyV:["v","V","\u221a","\u25ca"],KeyW:["w","W","\xe6","\xc6"],KeyX:["x","X","\u2211","\u203a"],KeyY:["y","Y","\xa5"," "],KeyZ:["z","Z","\u03a9","\u2039"],Digit1:["1","!","|","\u0131"],Digit2:["2",'"',"@","\u02dd"],Digit3:["3","\xb7","#","\u2022"],Digit4:["4","$","\xa2","\xa3"],Digit5:["5","%","\u221e","\u2030"],Digit6:["6","&","\xac"," "],Digit7:["7","/","\xf7","\u2044"],Digit8:["8","(","\u201c","\u2018"],Digit9:["9",")","\u201d","\u2019"],Digit0:["0","=","\u2260","\u2248"],Space:[" "," "," "," "],Minus:["'","?","\xb4","\xb8"],Equal:["\xa1","\xbf","\u201a","\u02db"],BracketLeft:["`","^","[","\u02c6"],BracketRight:["+","*","]","\xb1"],Backslash:["\xe7","\xc7","}","\xbb"],Semicolon:["\xf1","\xd1","~","\u02dc"],Quote:["\xb4","\xa8","{","\xab"],Backquote:["<",">","\u2264","\u2265"],Comma:[",",";","\u201e",""],Period:[".",":","\u2026","\u2026"],Slash:["-","_","\u2013","\u2014"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],Numpad1:["1","1","1","1"],Numpad2:["2","2","2","2"],Numpad3:["3","3","3","3"],Numpad4:["4","4","4","4"],Numpad5:["5","5","5","5"],Numpad6:["6","6","6","6"],Numpad7:["7","7","7","7"],Numpad8:["8","8","8","8"],Numpad9:["9","9","9","9"],Numpad0:["0","0","0","0"],NumpadDecimal:[",",",",",",","],IntlBackslash:["\xba","\xaa","\\","\xb0"]}}),Tc({id:"windows.spanish",locale:"es",displayName:"Spanish",platform:"windows",virtualLayout:"qwerty",score:0,mapping:{KeyA:["a","A","",""],KeyB:["b","B","",""],KeyC:["c","C","",""],KeyD:["d","D","",""],KeyE:["e","E","\u20ac",""],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","",""],KeyJ:["j","J","",""],KeyK:["k","K","",""],KeyL:["l","L","",""],KeyM:["m","M","",""],KeyN:["n","N","",""],KeyO:["o","O","",""],KeyP:["p","P","",""],KeyQ:["q","Q","",""],KeyR:["r","R","",""],KeyS:["s","S","",""],KeyT:["t","T","",""],KeyU:["u","U","",""],KeyV:["v","V","",""],KeyW:["w","W","",""],KeyX:["x","X","",""],KeyY:["y","Y","",""],KeyZ:["z","Z","",""],Digit1:["1","!","|",""],Digit2:["2",'"',"@",""],Digit3:["3","\xb7","#",""],Digit4:["4","$","~",""],Digit5:["5","%","\u20ac",""],Digit6:["6","&","\xac",""],Digit7:["7","/","",""],Digit8:["8","(","",""],Digit9:["9",")","",""],Digit0:["0","=","",""],Space:[" "," ","",""],Minus:["'","?","",""],Equal:["\xa1","\xbf","",""],BracketLeft:["`","^","[",""],BracketRight:["+","*","]",""],Backslash:["\xe7","\xc7","}",""],Semicolon:["\xf1","\xd1","",""],Quote:["\xb4","\xa8","{",""],Backquote:["\xba","\xaa","\\",""],Comma:[",",";","",""],Period:[".",":","",""],Slash:["-","_","",""],NumpadDivide:["/","/","",""],NumpadMultiply:["*","*","",""],NumpadSubtract:["-","-","",""],NumpadAdd:["+","+","",""],IntlBackslash:["<",">","",""]}}),Tc({id:"linux.spanish",locale:"es",displayName:"Spanish",platform:"linux",virtualLayout:"qwerty",score:0,mapping:{KeyA:["a","A","\xe6","\xc6"],KeyB:["b","B","\u201d","\u2019"],KeyC:["c","C","\xa2","\xa9"],KeyD:["d","D","\xf0","\xd0"],KeyE:["e","E","\u20ac","\xa2"],KeyF:["f","F","\u0111","\xaa"],KeyG:["g","G","\u014b","\u014a"],KeyH:["h","H","\u0127","\u0126"],KeyI:["i","I","\u2192","\u0131"],KeyJ:["j","J","\u0309","\u031b"],KeyK:["k","K","\u0138","&"],KeyL:["l","L","\u0142","\u0141"],KeyM:["m","M","\xb5","\xba"],KeyN:["n","N","n","N"],KeyO:["o","O","\xf8","\xd8"],KeyP:["p","P","\xfe","\xde"],KeyQ:["q","Q","@","\u03a9"],KeyR:["r","R","\xb6","\xae"],KeyS:["s","S","\xdf","\xa7"],KeyT:["t","T","\u0167","\u0166"],KeyU:["u","U","\u2193","\u2191"],KeyV:["v","V","\u201c","\u2018"],KeyW:["w","W","\u0142","\u0141"],KeyX:["x","X","\xbb",">"],KeyY:["y","Y","\u2190","\xa5"],KeyZ:["z","Z","\xab","<"],Digit1:["1","!","|","\xa1"],Digit2:["2",'"',"@","\u215b"],Digit3:["3","\xb7","#","\xa3"],Digit4:["4","$","~","$"],Digit5:["5","%","\xbd","\u215c"],Digit6:["6","&","\xac","\u215d"],Digit7:["7","/","{","\u215e"],Digit8:["8","(","[","\u2122"],Digit9:["9",")","]","\xb1"],Digit0:["0","=","}","\xb0"],Enter:["\r","\r","\r","\r"],Escape:["\x1b","\x1b","\x1b","\x1b"],Backspace:["\b","\b","\b","\b"],Tab:["\t","","\t",""],Space:[" "," "," "," "],Minus:["'","?","\\","\xbf"],Equal:["\xa1","\xbf","\u0303","~"],BracketLeft:["\u0300","\u0302","[","\u030a"],BracketRight:["+","*","]","\u0304"],Backslash:["\xe7","\xc7","}","\u0306"],Semicolon:["\xf1","\xd1","~","\u030b"],Quote:["\u0301","\u0308","{","{"],Backquote:["\xba","\xaa","\\","\\"],Comma:[",",";","\u2500","\xd7"],Period:[".",":","\xb7","\xf7"],Slash:["-","_","\u0323","\u0307"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],NumpadEnter:["\r","\r","\r","\r"],Numpad1:["","1","","1"],Numpad2:["","2","","2"],Numpad3:["","3","","3"],Numpad4:["","4","","4"],Numpad5:["","5","","5"],Numpad6:["","6","","6"],Numpad7:["","7","","7"],Numpad8:["","8","","8"],Numpad9:["","9","","9"],Numpad0:["","0","","0"],NumpadDecimal:["",".","","."],IntlBackslash:["<",">","|","\xa6"],NumpadEqual:["=","=","=","="],NumpadComma:[".",".",".","."],NumpadParenLeft:["(","(","(","("],NumpadParenRight:[")",")",")",")"]}}),Tc({id:"linux.french",locale:"fr",displayName:"French",virtualLayout:"azerty",platform:"linux",score:0,mapping:{KeyA:["q","Q","@","\u03a9"],KeyB:["b","B","\u201d","\u2019"],KeyC:["c","C","\xa2","\xa9"],KeyD:["d","D","\xf0","\xd0"],KeyE:["e","E","\u20ac","\xa2"],KeyF:["f","F","\u0111","\xaa"],KeyG:["g","G","\u014b","\u014a"],KeyH:["h","H","\u0127","\u0126"],KeyI:["i","I","\u2192","\u0131"],KeyJ:["j","J","\u0309","\u031b"],KeyK:["k","K","\u0138","&"],KeyL:["l","L","\u0142","\u0141"],KeyM:[",","?","\u0301","\u030b"],KeyN:["n","N","n","N"],KeyO:["o","O","\xf8","\xd8"],KeyP:["p","P","\xfe","\xde"],KeyQ:["a","A","\xe6","\xc6"],KeyR:["r","R","\xb6","\xae"],KeyS:["s","S","\xdf","\xa7"],KeyT:["t","T","\u0167","\u0166"],KeyU:["u","U","\u2193","\u2191"],KeyV:["v","V","\u201c","\u2018"],KeyW:["z","Z","\xab","<"],KeyX:["x","X","\xbb",">"],KeyY:["y","Y","\u2190","\xa5"],KeyZ:["w","W","\u0142","\u0141"],Digit1:["&","1","\xb9","\xa1"],Digit2:["\xe9","2","~","\u215b"],Digit3:['"',"3","#","\xa3"],Digit4:["'","4","{","$"],Digit5:["(","5","[","\u215c"],Digit6:["-","6","|","\u215d"],Digit7:["\xe8","7","`","\u215e"],Digit8:["_","8","\\","\u2122"],Digit9:["\xe7","9","^","\xb1"],Digit0:["\xe0","0","@","\xb0"],Enter:["\r","\r","\r","\r"],Escape:["\x1b","\x1b","\x1b","\x1b"],Backspace:["\b","\b","\b","\b"],Tab:["\t","","\t",""],Space:[" "," "," "," "],Minus:[")","\xb0","]","\xbf"],Equal:["=","+","}","\u0328"],BracketLeft:["\u0302","\u0308","\u0308","\u030a"],BracketRight:["$","\xa3","\xa4","\u0304"],Backslash:["*","\xb5","\u0300","\u0306"],Semicolon:["m","M","\xb5","\xba"],Quote:["\xf9","%","\u0302","\u030c"],Backquote:["\xb2","~","\xac","\xac"],Comma:[";",".","\u2500","\xd7"],Period:[":","/","\xb7","\xf7"],Slash:["!","\xa7","\u0323","\u0307"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],NumpadDecimal:["",".","","."],IntlBackslash:["<",">","|","\xa6"]}}),Tc({id:"windows.french",locale:"fr",displayName:"French",virtualLayout:"azerty",platform:"windows",score:0,mapping:{KeyA:["q","Q","",""],KeyB:["b","B","",""],KeyC:["c","C","",""],KeyD:["d","D","",""],KeyE:["e","E","\u20ac",""],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","",""],KeyJ:["j","J","",""],KeyK:["k","K","",""],KeyL:["l","L","",""],KeyM:[",","?","",""],KeyN:["n","N","",""],KeyO:["o","O","",""],KeyP:["p","P","",""],KeyQ:["a","A","",""],KeyR:["r","R","",""],KeyS:["s","S","",""],KeyT:["t","T","",""],KeyU:["u","U","",""],KeyV:["v","V","",""],KeyW:["z","Z","",""],KeyX:["x","X","",""],KeyY:["y","Y","",""],KeyZ:["w","W","",""],Digit1:["&","1","",""],Digit2:["\xe9","2","~",""],Digit3:['"',"3","#",""],Digit4:["'","4","{",""],Digit5:["(","5","[",""],Digit6:["-","6","|",""],Digit7:["\xe8","7","`",""],Digit8:["_","8","\\",""],Digit9:["\xe7","9","^",""],Digit0:["\xe0","0","@",""],Space:[" "," ","",""],Minus:[")","\xb0","]",""],Equal:["=","+","}",""],BracketLeft:["^","\xa8","",""],BracketRight:["$","\xa3","\xa4",""],Backslash:["*","\xb5","",""],Semicolon:["m","M","",""],Quote:["\xf9","%","",""],Backquote:["\xb2","","",""],Comma:[";",".","",""],Period:[":","/","",""],Slash:["!","\xa7","",""],NumpadDivide:["/","/","",""],NumpadMultiply:["*","*","",""],NumpadSubtract:["-","-","",""],NumpadAdd:["+","+","",""],IntlBackslash:["<",">","",""]}}),Tc({id:"windows.german",locale:"de",displayName:"German",platform:"windows",virtualLayout:"qwertz",score:0,mapping:{KeyA:["a","A","",""],KeyB:["b","B","",""],KeyC:["c","C","",""],KeyD:["d","D","",""],KeyE:["e","E","\u20ac",""],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","",""],KeyJ:["j","J","",""],KeyK:["k","K","",""],KeyL:["l","L","",""],KeyM:["m","M","\xb5",""],KeyN:["n","N","",""],KeyO:["o","O","",""],KeyP:["p","P","",""],KeyQ:["q","Q","@",""],KeyR:["r","R","",""],KeyS:["s","S","",""],KeyT:["t","T","",""],KeyU:["u","U","",""],KeyV:["v","V","",""],KeyW:["w","W","",""],KeyX:["x","X","",""],KeyY:["z","Z","",""],KeyZ:["y","Y","",""],Digit1:["1","!","",""],Digit2:["2",'"',"\xb2",""],Digit3:["3","\xa7","\xb3",""],Digit4:["4","$","",""],Digit5:["5","%","",""],Digit6:["6","&","",""],Digit7:["7","/","{",""],Digit8:["8","(","[",""],Digit9:["9",")","]",""],Digit0:["0","=","}",""],Space:[" "," ","",""],Minus:["\xdf","?","\\","\u1e9e"],Equal:["\xb4","`","",""],BracketLeft:["\xfc","\xdc","",""],BracketRight:["+","*","~",""],Backslash:["#","'","",""],Semicolon:["\xf6","\xd6","",""],Quote:["\xe4","\xc4","",""],Backquote:["^","\xb0","",""],Comma:[",",";","",""],Period:[".",":","",""],Slash:["-","_","",""],NumpadDivide:["/","/","",""],NumpadMultiply:["*","*","",""],NumpadSubtract:["-","-","",""],NumpadAdd:["+","+","",""],IntlBackslash:["<",">","|",""]}}),Tc({id:"apple.german",locale:"de",displayName:"German",virtualLayout:"qwertz",platform:"apple",score:0,mapping:{KeyA:["a","A","\xe5","\xc5"],KeyB:["b","B","\u222b","\u2039"],KeyC:["c","C","\xe7","\xc7"],KeyD:["d","D","\u2202","\u2122"],KeyE:["e","E","\u20ac","\u2030"],KeyF:["f","F","\u0192","\xcf"],KeyG:["g","G","\xa9","\xcc"],KeyH:["h","H","\xaa","\xd3"],KeyI:["i","I","\u2044","\xdb"],KeyJ:["j","J","\xba","\u0131"],KeyK:["k","K","\u2206","\u02c6"],KeyL:["l","L","@","\ufb02"],KeyM:["m","M","\xb5","\u02d8"],KeyN:["n","N","~","\u203a"],KeyO:["o","O","\xf8","\xd8"],KeyP:["p","P","\u03c0","\u220f"],KeyQ:["q","Q","\xab","\xbb"],KeyR:["r","R","\xae","\xb8"],KeyS:["s","S","\u201a","\xcd"],KeyT:["t","T","\u2020","\u02dd"],KeyU:["u","U","\xa8","\xc1"],KeyV:["v","V","\u221a","\u25ca"],KeyW:["w","W","\u2211","\u201e"],KeyX:["x","X","\u2248","\xd9"],KeyY:["z","Z","\u03a9","\u02c7"],KeyZ:["y","Y","\xa5","\u2021"],Digit1:["1","!","\xa1","\xac"],Digit2:["2",'"',"\u201c","\u201d"],Digit3:["3","\xa7","\xb6","#"],Digit4:["4","$","\xa2","\xa3"],Digit5:["5","%","[","\ufb01"],Digit6:["6","&","]","^"],Digit7:["7","/","|","\\"],Digit8:["8","(","{","\u02dc"],Digit9:["9",")","}","\xb7"],Digit0:["0","=","\u2260","\xaf"],Space:[" "," "," "," "],Minus:["\xdf","?","\xbf","\u02d9"],Equal:["\xb4","`","'","\u02da"],BracketLeft:["\xfc","\xdc","\u2022","\xb0"],BracketRight:["+","*","\xb1","\uf8ff"],Backslash:["#","'","\u2018","\u2019"],Semicolon:["\xf6","\xd6","\u0153","\u0152"],Quote:["\xe4","\xc4","\xe6","\xc6"],Backquote:["<",">","\u2264","\u2265"],Comma:[",",";","\u221e","\u02db"],Period:[".",":","\u2026","\xf7"],Slash:["-","_","\u2013","\u2014"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],NumpadDecimal:[",",",",".","."],IntlBackslash:["^","\xb0","\u201e","\u201c"],NumpadEqual:["=","=","=","="]}}),Tc({id:"dvorak",locale:"en",displayName:"Dvorak",virtualLayout:"dvorak",platform:"",score:0,mapping:{KeyA:["a","A","\xe5","\xc5"],KeyB:["x","X","\u2248","\u02db"],KeyC:["j","J","\u2206","\xd4"],KeyD:["e","E","\xb4","\xb4"],KeyE:[".",">","\u2265","\u02d8"],KeyF:["u","U","\xa8","\xa8"],KeyG:["i","I","\u02c6","\u02c6"],KeyH:["d","D","\u2202","\xce"],KeyI:["c","C","\xe7","\xc7"],KeyJ:["h","H","\u02d9","\xd3"],KeyK:["t","T","\u2020","\u02c7"],KeyL:["n","N","\u02dc","\u02dc"],KeyM:["m","M","\xb5","\xc2"],KeyN:["b","B","\u222b","\u0131"],KeyO:["r","R","\xae","\u2030"],KeyP:["l","L","\xac","\xd2"],KeyQ:["'",'"',"\xe6","\xc6"],KeyR:["p","P","\u03c0","\u220f"],KeyS:["o","O","\xf8","\xd8"],KeyT:["y","Y","\xa5","\xc1"],KeyU:["g","G","\xa9","\u02dd"],KeyV:["k","K","\u02da","\uf8ff"],KeyW:[",","<","\u2264","\xaf"],KeyX:["q","Q","\u0153","\u0152"],KeyY:["f","F","\u0192","\xcf"],KeyZ:[";",":","\u2026","\xda"],Digit1:["1","!","\xa1","\u2044"],Digit2:["2","@","\u2122","\u20ac"],Digit3:["3","#","\xa3","\u2039"],Digit4:["4","$","\xa2","\u203a"],Digit5:["5","%","\u221e","\ufb01"],Digit6:["6","^","\xa7","\ufb02"],Digit7:["7","&","\xb6","\u2021"],Digit8:["8","*","\u2022","\xb0"],Digit9:["9","(","\xaa","\xb7"],Digit0:["0",")","\xba","\u201a"],Space:[" "," "," "," "],Minus:["[","{","\u201c","\u201d"],Equal:["]","}","\u2018","\u2019"],BracketLeft:["/","?","\xf7","\xbf"],BracketRight:["=","+","\u2260","\xb1"],Backslash:["\\","|","\xab","\xbb"],Semicolon:["s","S","\xdf","\xcd"],Quote:["-","_","\u2013","\u2014"],Backquote:["`","~","`","`"],Comma:["w","W","\u2211","\u201e"],Period:["v","V","\u221a","\u25ca"],Slash:["z","Z","\u03a9","\xb8"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],Numpad1:["1","1","1","1"],Numpad2:["2","2","2","2"],Numpad3:["3","3","3","3"],Numpad4:["4","4","4","4"],Numpad5:["5","5","5","5"],Numpad6:["6","6","6","6"],Numpad7:["7","7","7","7"],Numpad8:["8","8","8","8"],Numpad9:["9","9","9","9"],Numpad0:["0","0","0","0"],NumpadDecimal:[".",".",".","."],IntlBackslash:["\xa7","\xb1","\xa7","\xb1"],NumpadEqual:["=","=","=","="],AudioVolumeUp:["","=","","="]}});var i3=[{key:"left",command:"moveToPreviousChar"},{key:"right",command:"moveToNextChar"},{key:"up",command:"moveUp"},{key:"down",command:"moveDown"},{key:"shift+[ArrowLeft]",command:"extendSelectionBackward"},{key:"shift+[ArrowRight]",command:"extendSelectionForward"},{key:"shift+[ArrowUp]",command:"extendSelectionUpward"},{key:"shift+[ArrowDown]",command:"extendSelectionDownward"},{key:"[Backspace]",command:"deleteBackward"},{key:"alt+[Delete]",command:"deleteBackward"},{key:"[Delete]",command:"deleteForward"},{key:"alt+[Backspace]",command:"deleteForward"},{key:"alt+[ArrowLeft]",command:"moveToPreviousWord"},{key:"alt+[ArrowRight]",command:"moveToNextWord"},{key:"shift+alt+[ArrowLeft]",command:"extendToPreviousWord"},{key:"shift+alt+[ArrowRight]",command:"extendToNextWord"},{key:"ctrl+[ArrowLeft]",command:"moveToGroupStart"},{key:"ctrl+[ArrowRight]",command:"moveToGroupEnd"},{key:"shift+ctrl+[ArrowLeft]",command:"extendToGroupStart"},{key:"shift+ctrl+[ArrowRight]",command:"extendToGroupEnd"},{key:"[Space]",ifMode:"math",command:"moveAfterParent"},{key:"shift+[Space]",ifMode:"math",command:"moveBeforeParent"},{key:"[Home]",command:"moveToMathfieldStart"},{key:"cmd+[ArrowLeft]",command:"moveToMathfieldStart"},{key:"shift+[Home]",command:"extendToMathFieldStart"},{key:"shift+cmd+[ArrowLeft]",command:"extendToMathFieldStart"},{key:"[End]",command:"moveToMathfieldEnd"},{key:"cmd+[ArrowRight]",command:"moveToMathfieldEnd"},{key:"shift+[End]",command:"extendToMathFieldEnd"},{key:"shift+cmd+[ArrowRight]",command:"extendToMathFieldEnd"},{key:"[Pageup]",command:"moveToGroupStart"},{key:"[Pagedown]",command:"moveToGroupEnd"},{key:"[Tab]",ifMode:"math",command:"moveToNextPlaceholder"},{key:"shift+[Tab]",ifMode:"math",command:"moveToPreviousPlaceholder"},{key:"[Tab]",ifMode:"text",command:"moveToNextPlaceholder"},{key:"shift+[Tab]",ifMode:"text",command:"moveToPreviousPlaceholder"},{key:"[Escape]",ifMode:"math",command:["switchMode","latex"]},{key:"[Escape]",ifMode:"text",command:["switchMode","latex"]},{key:"[Escape]",ifMode:"latex",command:["complete","complete",{selectItem:"true"}]},{key:"\\",ifMode:"math",command:["switchMode","latex","\\"]},{key:"[IntlBackslash]",ifMode:"math",command:["switchMode","latex","\\"]},{key:"[Tab]",ifMode:"latex",command:["complete","accept-suggestion"]},{key:"[Return]",ifMode:"latex",command:"complete"},{key:"[Enter]",ifMode:"latex",command:"complete"},{key:"shift+[Escape]",ifMode:"latex",command:["complete","reject"]},{key:"[ArrowDown]",ifMode:"latex",command:"nextSuggestion"},{key:"[ArrowUp]",ifMode:"latex",command:"previousSuggestion"},{key:"ctrl+a",ifPlatform:"!macos",command:"selectAll"},{key:"cmd+a",command:"selectAll"},{key:"[Cut]",command:"cutToClipboard"},{key:"[Copy]",command:"copyToClipboard"},{key:"[Paste]",command:"pasteFromClipboard"},{key:"[Clear]",command:"deleteBackward"},{key:"[Undo]",command:"undo"},{key:"[Redo]",command:"redo"},{key:"[EraseEof]",command:"deleteToGroupEnd"},{key:"ctrl+x",command:"cutToClipboard"},{key:"cmd+x",command:"cutToClipboard"},{key:"ctrl+c",command:"copyToClipboard"},{key:"cmd+c",command:"copyToClipboard"},{key:"ctrl+v",command:"pasteFromClipboard"},{key:"cmd+v",command:"pasteFromClipboard"},{key:"ctrl+z",ifPlatform:"!macos",command:"undo"},{key:"cmd+z",command:"undo"},{key:"ctrl+y",ifPlatform:"!macos",command:"redo"},{key:"shift+cmd+y",command:"redo"},{key:"shift+ctrl+z",ifPlatform:"!macos",command:"redo"},{key:"shift+cmd+z",command:"redo"},{key:"ctrl+b",ifPlatform:"macos",command:"moveToPreviousChar"},{key:"ctrl+f",ifPlatform:"macos",command:"moveToNextChar"},{key:"ctrl+p",ifPlatform:"macos",command:"moveUp"},{key:"ctrl+n",ifPlatform:"macos",command:"moveDown"},{key:"ctrl+a",ifPlatform:"macos",command:"moveToMathfieldStart"},{key:"ctrl+e",ifPlatform:"macos",command:"moveToMathfieldEnd"},{key:"shift+ctrl+b",ifPlatform:"macos",command:"extendSelectionBackward"},{key:"shift+ctrl+f",ifPlatform:"macos",command:"extendSelectionForward"},{key:"shift+ctrl+p",ifPlatform:"macos",command:"extendSelectionUpward"},{key:"shift+ctrl+n",ifPlatform:"macos",command:"extendSelectionDownward"},{key:"shift+ctrl+a",ifPlatform:"macos",command:"extendToMathFieldStart"},{key:"shift+ctrl+e",ifPlatform:"macos",command:"extendToMathFieldEnd"},{key:"alt+ctrl+b",ifPlatform:"macos",command:"moveToPreviousWord"},{key:"alt+ctrl+f",ifPlatform:"macos",command:"moveToNextWord"},{key:"shift+alt+ctrl+b",ifPlatform:"macos",command:"extendToPreviousWord"},{key:"shift+alt+ctrl+f",ifPlatform:"macos",command:"extendToNextWord"},{key:"ctrl+h",ifPlatform:"macos",command:"deleteBackward"},{key:"ctrl+d",ifPlatform:"macos",command:"deleteForward"},{key:"ctrl+l",ifPlatform:"macos",command:"scrollIntoView"},{key:"ctrl+[Digit2]",ifMode:"math",command:["insert","\\sqrt{#0}"]},{key:"ctrl+[Digit5]",ifMode:"math",command:"moveToOpposite"},{key:"ctrl+[Digit6]",ifMode:"math",command:"moveToSuperscript"},{key:"ctrl+[Return]",ifMode:"math",command:"addRowAfter"},{key:"ctrl+[Enter]",ifMode:"math",command:"addRowAfter"},{key:"cmd+[Return]",ifMode:"math",command:"addRowAfter"},{key:"cmd+[Enter]",ifMode:"math",command:"addRowAfter"},{key:"alt+p",ifMode:"math",command:["insert","\\pi"]},{key:"alt+v",ifMode:"math",command:["insert","\\sqrt{#0}"]},{key:"alt+w",ifMode:"math",command:["insert","\\sum_{i=#?}^{#?}"]},{key:"alt+b",command:["insert","\\int_{#?}^{#?}"]},{key:"alt+u",ifMode:"math",command:["insert","\\cup"]},{key:"alt+n",ifMode:"math",command:["insert","\\cap"]},{key:"alt+o",ifMode:"math",command:["insert","\\emptyset"]},{key:"alt+d",ifMode:"math",command:["insert","\\differentialD"]},{key:"shift+alt+o",ifMode:"math",command:["insert","\\varnothing"]},{key:"shift+alt+d",ifMode:"math",command:["insert","\\partial"]},{key:"shift+alt+p",ifMode:"math",command:["insert","\\prod_{i=#?}^{#?}"]},{key:"shift+alt+u",ifMode:"math",command:["insert","\\bigcup"]},{key:"shift+alt+n",ifMode:"math",command:["insert","\\bigcap"]},{key:"shift+alt+a",ifMode:"math",command:["insert","\\forall"]},{key:"shift+alt+e",ifMode:"math",command:["insert","\\exists"]},{key:"alt+[Backslash]",ifMode:"math",command:["insert","\\backslash"]},{key:"[NumpadDivide]",ifMode:"math",command:["insert","\\frac{#@}{#?}"]},{key:"alt+[NumpadDivide]",ifMode:"math",command:["insert","\\frac{#?}{#@}"]},{key:"shift+alt+k",command:"toggleKeystrokeCaption"},{key:"alt+[Space]",command:"toggleVirtualKeyboard"},{key:"alt+ctrl+[ArrowUp]",command:["speak","all",{withHighlighting:!1}]},{key:"alt+ctrl+[ArrowDown]",command:["speak","selection",{withHighlighting:!1}]},{key:"alt+[Equal]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["applyStyle",{mode:"text"}]},{key:"alt+[Equal]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"text",command:["applyStyle",{mode:"math"}]},{key:"shift+[Quote]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["switchMode","text","",""]},{key:"shift+[Quote]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"text",command:["switchMode","math","",""]},{key:"/",ifMode:"math",command:["insert","\\frac{#@}{#?}"]},{key:"alt+/",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","\\/"]},{key:"alt+[BracketLeft]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","\\left\\lbrack #0 \\right\\rbrack"]},{key:"ctrl+[Minus]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"moveToSubscript"},{key:"shift+alt+[BracketLeft]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","\\left\\lbrace #0 \\right\\rbrace"]},{key:"ctrl+;",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"addRowAfter"},{key:"cmd+;",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"addRowAfter"},{key:"shift+ctrl+;",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"addRowBefore"},{key:"shift+cmd+;",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"addRowBefore"},{key:"ctrl+[Backspace]",ifMode:"math",command:"removeRow"},{key:"cmd+[Backspace]",ifMode:"math",command:"removeRow"},{key:"ctrl+[Comma]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"addColumnAfter"},{key:"cmd+[Comma]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"addColumnAfter"},{key:"shift+ctrl+[Comma]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"addColumnBefore"},{key:"shift+cmd+[Comma]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"addColumnBefore"},{key:"shift+[Backspace]",ifMode:"math",command:"removeColumn"},{key:"alt+[Digit5]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","$\\infty"]},{key:"alt+[Digit6]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","\\wedge"]},{key:"shift+alt+[Digit6]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","\\vee"]},{key:"alt+[Digit9]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","("]},{key:"alt+[Digit0]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert",")"]},{key:"alt+|",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","|"]},{key:"shift+[Backquote]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","\\~"]},{key:"[Backquote]",ifLayout:["windows.french","linux.french"],ifMode:"math",command:["insert","^2"]}],g$={"\\theta":"alt+q","\\sqrt":["alt+v","ctrl+[Digit2]"],"\\pi":"alt+p","\\prod":"shift+alt+p","\\sum":"alt+w","\\int":"alt+b","\\cup":"alt+u","\\cap":"alt+n","\\bigcup":"shift+alt+u","\\bigcap":"shift+alt+n","\\forall":"shift+alt+a","\\exists":"shift+alt+e","\\infty":"alt+[Digit5]","\\wedge":"alt+[Digit6]","\\vee":"shift+alt+[Digit6]","\\differentialD":"alt+d","\\partial":"shift+alt+d","\\frac":"Slash","\\emptyset":"alt+o","\\varnothing":"shift+alt+o","\\~":"~"};function o3(n){let o=n;return Ea(o)&&(o=o.length>0?o[0]+"("+o.slice(1).join("")+")":""),o}function v$(n,o){let t=[];if("string"==typeof o){let r=g$[o];Ea(r)?t=r.slice():r&&t.push(r)}let i=o3(o),a=new RegExp("^"+i.replace("\\","\\\\").replace("|","\\|").replace("*","\\*").replace("$","\\$").replace("^","\\^")+"([^*a-zA-Z]|$)");for(let r of n)a.test(o3(r.command))&&t.push(r.key);return t.map(K2)}function K2(n){var o;let t=/macos|ios|/.test(rh()),i=n.split("+"),a="";for(let r of i)!t&&a&&(a+='<span class="ML__shortcut-join">+</span>'),r.startsWith("[Key")?a+=r.slice(4,5):r.startsWith("Key")?a+=r.slice(3,4):r.startsWith("[Digit")?a+=r.slice(6,7):r.startsWith("Digit")?a+=r.slice(5,6):a+=null!=(o={cmd:"\u2318",meta:t?"\u2318":"command",shift:t?"\u21e7":"shift",alt:t?"\u2325":"alt",ctrl:t?"\u2303":"control","\n":t?"\u23ce":"return","[return]":t?"\u23ce":"return","[enter]":t?"\u2324":"enter","[tab]":t?"\u21e5":"tab","[escape]":"esc","[backspace]":t?"\u232b":"backspace","[delete]":t?"\u2326":"del","[pageup]":t?"\u21de":"page up","[pagedown]":t?"\u21df":"page down","[home]":t?"\u2912":"home","[end]":t?"\u2913":"end","[space]":"space","[equal]":"=","[minus]":"-","[comma]":",","[slash]":"/","[backslash]":"\\","[bracketleft]":"[","[bracketright]":"]",semicolon:";",period:".",comma:",",minus:"-",equal:"=",quote:"'",bracketLeft:"[",bracketRight:"]",backslash:"\\",intlbackslash:"\\",backquote:"`",slash:"/",numpadmultiply:"* &#128290;",numpaddivide:"/ &#128290;",numpadsubtract:"- &#128290;",numpadadd:"+ &#128290;",numpaddecimal:". &#128290;",numpadcomma:", &#128290;",help:"help",left:"\u21e0",up:"\u21e1",right:"\u21e2",down:"\u21e3","[arrowleft]":"\u21e0","[arrowup]":"\u21e1","[arrowright]":"\u21e2","[arrowdown]":"\u21e3","[digit0]":"0","[digit1]":"1","[digit2]":"2","[digit3]":"3","[digit4]":"4","[digit5]":"5","[digit6]":"6","[digit7]":"7","[digit8]":"8","[digit9]":"9"}[r.toLowerCase()])?o:r.toUpperCase();return a}function w$(n,o){if(n.ifPlatform&&!/^!?(macos|windows|android|ios|chromeos|other)$/.test(n.ifPlatform))throw new Error(`Unexpected platform "${n.ifPlatform}" for keybinding ${n.key}`);if(void 0!==n.ifLayout&&(0===o.score||!n.ifLayout.includes(o.id)))return;let t=e3(n.key),i=n.ifPlatform;if(t.cmd){if(i&&"macos"!==i&&"ios"!==i)throw new Error('Unexpected "cmd" modifier with platform "'+i+'"\n"cmd" modifier can only be used with macOS or iOS platform.');i||(i="ios"===rh()?"ios":"macos"),t.win=!1,t.cmd=!1,t.meta=!0}if(t.win){if(i&&"windows"!==i)throw new Error('Unexpected "win" modifier with platform "'+i+'"\n"win" modifier can only be used with Windows platform.');i="windows",t.win=!1,t.cmd=!1,t.meta=!0}if(i&&!function x$(n){if(As()){let o=rh(),t=n.startsWith("!"),i=n.endsWith(o);if(t&&!i||!t&&i)return!0}return"!other"!==n&&"other"===n}(i))return;if(/^\[.+\]$/.test(t.key))return mi(Et({},n),{ifPlatform:i,key:E1(t)});let a=function A$(n,o){var t;let i={shift:!1,alt:!1,cmd:!1,win:!1,meta:!1,ctrl:!1,key:""};if(!n)return i;for(let[a,r]of Object.entries(o.mapping)){if(r[0]===n)return i.key=`[${a}]`,i;if(r[1]===n)return i.shift=!0,i.key=`[${a}]`,i;if(r[2]===n)return i.alt=!0,i.key=`[${a}]`,i;if(r[3]===n)return i.shift=!0,i.alt=!0,i.key=`[${a}]`,i}return i.key=null!=(t=h$[n])?t:"",i}(t.key,o);if(!a)throw new Error('Invalid keybinding key "'+n.key+'"');if(a.shift&&t.shift||a.alt&&t.alt)throw new Error(`The keybinding ${n.key} (${G2(n.command)}) is conflicting with the key combination ${E1(a)} using the ${o.displayName} keyboard layout`);return a.shift=a.shift||t.shift,a.alt=a.alt||t.alt,a.meta=t.meta,a.ctrl=t.ctrl,mi(Et({},n),{ifPlatform:i,key:E1(a)})}function G2(n){if(Array.isArray(n)){let o=[...n];return o.shift()+"("+o.map(t=>"string"==typeof t?`"${t}"`:t.toString()).join(", ")+")"}return n}var a3="#mathlive-popover-panel{visibility:hidden;background-color:rgba(97,97,97,0.95);color:#fff;text-align:center;border-radius:8px;position:fixed;z-index:1;display:flex;flex-direction:column;justify-content:center;box-shadow:0 14px 28px rgba(0,0,0,0.25),0 10px 10px rgba(0,0,0,0.22);transition:all .2s cubic-bezier(.64, .09, .08, 1)}#mathlive-popover-panel::after{content:'';position:absolute;top:-5px;left:calc(50% - 3px);width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;font-size:1rem;border-bottom:5px solid rgba(97,97,97,0.9)}#mathlive-popover-panel.is-visible{visibility:inherit;animation:ML__fade-in cubic-bezier(0, 0, .2, 1) .15s}@keyframes ML__fade-in{from{opacity:0}to{opacity:1}}#mathlive-popover-panel ul{display:flex;flex-flow:column;list-style:none;margin:0;padding:0;align-items:flex-start;justify-content:center}#mathlive-popover-panel li{display:flex;flex-direction:row;justify-content:space-between;margin:8px;padding:8px;width:calc(100% - 16px - 16px);column-gap:1em;border-radius:8px;cursor:pointer}#mathlive-popover-panel li a{color:#5ea6fd;padding-top:.3em;margin-top:.4em;display:block}#mathlive-popover-panel li a:hover{color:#5ea6fd;text-decoration:underline}#mathlive-popover-panel li:hover,#mathlive-popover-panel li.is-pressed,#mathlive-popover-panel li.is-active{background:rgba(255,255,255,0.1)}.ML__popover__command{font-size:1.6rem;font-family:KaTeX_Main}.ML__popover__latex{font-family:'IBM Plex Mono','Source Code Pro',Consolas,'Roboto Mono',Menlo,'Bitstream Vera Sans Mono','DejaVu Sans Mono',Monaco,Courier,monospace;align-self:center}.ML__popover__keybinding{font-family:system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI','Roboto','Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue',sans-serif;font-size:.8em;opacity:.7}.ML__shortcut-join{opacity:.5}",kc=".ML__sr-only{position:absolute;width:1px;height:1px;margin:-1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);clip-path:inset(50%);white-space:nowrap;border:0}.ML__isInline{display:inline-block}.ML__base{visibility:inherit;display:inline-block;position:relative;cursor:text;padding:0;margin:0;box-sizing:content-box;border:0;outline:0;vertical-align:baseline;font-weight:inherit;font-family:inherit;font-style:inherit;text-decoration:none;width:min-content}body.ML__fonts-loading .ML__base{visibility:hidden}.ML__strut,.ML__strut--bottom{display:inline-block;min-height:.5em}.ML__small-delim{font-family:KaTeX_Main}.ML__text{font-family:var(--text-font-family, system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI','Roboto','Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue',sans-serif);white-space:pre}.ML__cmr{font-family:KaTeX_Main;font-style:normal}.ML__mathit{font-family:KaTeX_Math;font-style:italic}.ML__mathbf{font-family:KaTeX_Main;font-weight:bold}.lcGreek.ML__mathbf{font-family:KaTeX_Math;font-weight:normal}.ML__mathbfit{font-family:KaTeX_Math;font-weight:bold;font-style:italic}.ML__ams{font-family:KaTeX_AMS}.ML__bb{font-family:KaTeX_AMS}.ML__cal{font-family:KaTeX_Caligraphic}.ML__frak{font-family:KaTeX_Fraktur}.ML__tt{font-family:KaTeX_Typewriter}.ML__script{font-family:KaTeX_Script}.ML__sans{font-family:KaTeX_SansSerif}.ML__series_ul{font-weight:100}.ML__series_el{font-weight:100}.ML__series_l{font-weight:200}.ML__series_sl{font-weight:300}.ML__series_sb{font-weight:500}.ML__bold,.ML__boldsymbol{font-weight:700}.ML__series_eb{font-weight:800}.ML__series_ub{font-weight:900}.ML__series_uc{font-stretch:ultra-condensed}.ML__series_ec{font-stretch:extra-condensed}.ML__series_c{font-stretch:condensed}.ML__series_sc{font-stretch:semi-condensed}.ML__series_sx{font-stretch:semi-expanded}.ML__series_x{font-stretch:expanded}.ML__series_ex{font-stretch:extra-expanded}.ML__series_ux{font-stretch:ultra-expanded}.ML__it{font-style:italic}.ML__shape_ol{-webkit-text-stroke:1px black;text-stroke:1px black;color:transparent}.ML__shape_sc{font-variant:small-caps}.ML__shape_sl{font-style:oblique}.ML__emph{color:#bc2612}.ML__emph .ML__emph{color:#0c7f99}.ML__highlight{color:#007cb2;background:#edd1b0}.ML__center{text-align:center}.ML__label_padding{padding:0 .5em}.ML__frac-line{width:100%;min-height:1px}.ML__frac-line:after{content:'';display:block;margin-top:-0.04em;min-height:.04em;-webkit-print-color-adjust:exact;print-color-adjust:exact;background:currentColor;box-sizing:content-box;transform:translate(0, 0)}.ML__sqrt{display:inline-block}.ML__sqrt-sign{display:inline-block;font-family:KaTeX_Main;position:relative}.ML__sqrt-line{display:inline-block;height:.04em;width:100%}.ML__sqrt-line:before{content:'';display:block;margin-top:-0.04em;min-height:.04em;-webkit-print-color-adjust:exact;print-color-adjust:exact;background:currentColor;transform:translate(0, 0)}.ML__sqrt-line:after{border-bottom-width:1px;content:' ';display:block;margin-top:-0.1em}.ML__sqrt-index{margin-left:.27777778em;margin-right:-0.55555556em}.ML__delim-size1{font-family:KaTeX_Size1}.ML__delim-size2{font-family:KaTeX_Size2}.ML__delim-size3{font-family:KaTeX_Size3}.ML__delim-size4{font-family:KaTeX_Size4}.ML__delim-mult .delim-size1>span{font-family:KaTeX_Size1}.ML__delim-mult .delim-size4>span{font-family:KaTeX_Size4}.ML__accent-body>span{font-family:KaTeX_Main;width:0}.ML__accent-vec>span{position:relative;left:.24em}.ML__mathlive{display:inline-block;direction:ltr;text-align:left;text-indent:0;text-rendering:auto;font-family:KaTeX_Main,'Times New Roman',serif;font-style:normal;font-size-adjust:none;font-stretch:normal;font-variant-caps:normal;letter-spacing:normal;line-height:1.2;word-wrap:normal;word-spacing:normal;white-space:nowrap;text-shadow:none;-webkit-user-select:none;user-select:none;width:min-content}.ML__mathlive .style-wrap{position:relative}.ML__mathlive .mfrac,.ML__mathlive .left-right{display:inline-block}.ML__mathlive .vlist-t{display:inline-table;table-layout:fixed;border-collapse:collapse}.ML__mathlive .vlist-r{display:table-row}.ML__mathlive .vlist{display:table-cell;vertical-align:bottom;position:relative}.ML__mathlive .vlist>span{display:block;height:0;position:relative}.ML__mathlive .vlist>span>span{display:inline-block}.ML__mathlive .vlist>span>.pstrut{overflow:hidden;width:0}.ML__mathlive .vlist-t2{margin-right:-2px}.ML__mathlive .vlist-s{display:table-cell;vertical-align:bottom;font-size:1px;width:2px;min-width:2px}.ML__mathlive .msubsup{text-align:left}.ML__mathlive .negativethinspace{display:inline-block;margin-left:-0.16667em;height:.71em}.ML__mathlive .thinspace{display:inline-block;width:.16667em;height:.71em}.ML__mathlive .mediumspace{display:inline-block;width:.22222em;height:.71em}.ML__mathlive .thickspace{display:inline-block;width:.27778em;height:.71em}.ML__mathlive .enspace{display:inline-block;width:.5em;height:.71em}.ML__mathlive .quad{display:inline-block;width:1em;height:.71em}.ML__mathlive .qquad{display:inline-block;width:2em;height:.71em}.ML__mathlive .llap,.ML__mathlive .rlap{width:0;position:relative;display:inline-block}.ML__mathlive .llap>.inner,.ML__mathlive .rlap>.inner{position:absolute}.ML__mathlive .llap>.fix,.ML__mathlive .rlap>.fix{display:inline-block}.ML__mathlive .llap>.inner{right:0}.ML__mathlive .rlap>.inner{left:0}.ML__mathlive .rule{display:inline-block;border:solid 0;position:relative;box-sizing:border-box}.ML__mathlive .overline .overline-line,.ML__mathlive .underline .underline-line{width:100%}.ML__mathlive .overline .overline-line:before,.ML__mathlive .underline .underline-line:before{border-bottom-style:solid;border-bottom-width:.04em;content:'';display:block}.ML__mathlive .overline .overline-line:after,.ML__mathlive .underline .underline-line:after{border-bottom-style:solid;border-bottom-width:.04em;min-height:thin;content:'';display:block;margin-top:-1px}.ML__mathlive .stretchy{display:block;position:absolute;width:100%;left:0;overflow:hidden}.ML__mathlive .stretchy:before,.ML__mathlive .stretchy:after{content:''}.ML__mathlive .stretchy svg{display:block;position:absolute;width:100%;height:inherit;fill:currentColor;stroke:currentColor;fill-rule:nonzero;fill-opacity:1;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1}.ML__mathlive .slice-1-of-2{display:inline-flex;position:absolute;left:0;width:50.2%;overflow:hidden}.ML__mathlive .slice-2-of-2{display:inline-flex;position:absolute;right:0;width:50.2%;overflow:hidden}.ML__mathlive .slice-1-of-3{display:inline-flex;position:absolute;left:0;width:25.1%;overflow:hidden}.ML__mathlive .slice-2-of-3{display:inline-flex;position:absolute;left:25%;width:50%;overflow:hidden}.ML__mathlive .slice-3-of-3{display:inline-flex;position:absolute;right:0;width:25.1%;overflow:hidden}.ML__mathlive .slice-1-of-1{display:inline-flex;position:absolute;width:100%;left:0;overflow:hidden}.ML__mathlive .nulldelimiter{width:.12em;display:inline-block}.ML__mathlive .op-group{display:inline-block}.ML__mathlive .op-symbol{position:relative}.ML__mathlive .op-symbol.small-op{font-family:KaTeX_Size1}.ML__mathlive .op-symbol.large-op{font-family:KaTeX_Size2}.ML__mathlive .accent>.vlist>span{text-align:center}.ML__mathlive .mtable .vertical-separator{display:inline-block;min-width:1px;box-sizing:border-box}.ML__mathlive .mtable .arraycolsep{display:inline-block}.ML__mathlive .mtable .col-align-m>.vlist-t{text-align:center}.ML__mathlive .mtable .col-align-c>.vlist-t{text-align:center}.ML__mathlive .mtable .col-align-l>.vlist-t{text-align:left}.ML__mathlive .mtable .col-align-r>.vlist-t{text-align:right}.ML__error{display:inline-block;background-image:radial-gradient(ellipse at center, hsl(341,100%,40%), rgba(0,0,0,0) 70%);background-color:hsla(341,100%,40%,0.1);background-repeat:repeat-x;background-size:3px 3px;padding-bottom:3px;background-position:0 100%}.ML__error>.ML__error{background:transparent;padding:0}.ML__composition{background:#fff1c2;color:black;text-decoration:underline var(--caret-color-computed, var(--ML__caret-color))}@media (prefers-color-scheme:dark){.ML__composition{background:#69571c;color:white}}.ML__placeholder{color:var(--placeholder-color, var(--ML__placeholder-color));opacity:var(--placeholder-opacity, .4);padding-left:.4ex;padding-right:.4ex;font-family:system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI','Roboto','Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue',sans-serif}.ML__placeholdercontainer{display:none}.ML__placeholdercontainer math-field{display:inline-block;position:absolute;z-index:1001;min-width:32px;padding-left:4px;padding-right:4px;border-radius:4px;border:1px solid var(--editable-border)}.ML__isReadOnly .ML__placeholdercontainer{display:block}.ML__notation{position:absolute;box-sizing:border-box}.ML__container{min-height:auto !important}";function r3(n){var o,t;"function"==typeof(null==(o=n.listeners)?void 0:o.onSelectionDidChange)&&!n.suppressChangeNotifications&&(n.suppressChangeNotifications=!0,n.listeners.onSelectionDidChange(n),n.suppressChangeNotifications=!1),null==(t=n.mathfield.virtualKeyboard)||t.updateToolbar(n.mathfield)}function Co(n,o={}){var t;if(n.suppressChangeNotifications||!n.mathfield.host)return!0;n.suppressChangeNotifications=!0;let i=n.mathfield.host.dispatchEvent(new InputEvent("beforeinput",mi(Et({},o),{data:o.data?o.data:null!=(t=o.inputType)?t:"",cancelable:!0,bubbles:!0,composed:!0})));return n.suppressChangeNotifications=!1,i}function Eo(n,o){var t;n.suppressChangeNotifications||!n.mathfield.host||(n.suppressChangeNotifications=!0,n.mathfield.host.dispatchEvent(new InputEvent("input",mi(Et({},o),{data:o.data?o.data:null!=(t=o.inputType)?t:"",bubbles:!0,composed:!0}))),n.suppressChangeNotifications=!1)}function k_(n){var o,t;let i=n.atoms.find(a=>a instanceof xd);return i&&null!=(t=null==(o=i.body)?void 0:o.filter(a=>a instanceof la))?t:[]}function s3(n,o){var t;let i=0,a=!1,r=Number.isFinite(o?.before)?null!=(t=o?.before)?t:0:n.lastOffset;for(;i<=r&&!a;){let c=n.at(i);a=c instanceof la&&c.isSuggestion,a||i++}if(!a)return[void 0,void 0];let s=i,l=!1;for(;s<=r&&!l;){let c=n.at(s);l=!(c instanceof la&&c.isSuggestion),l||s++}return[i-1,s-1]}function Y2(n){let o=k_(n.model).filter(t=>t.isSuggestion);if(0!==o.length){n.model.position=n.model.offsetOf(o[0].leftSibling);for(let t of o)t.parent.removeChild(t)}}function O1(n,o){var t;let{model:i}=n;Y2(n);for(let u of k_(i))u.isError=!1;if(!i.selectionIsCollapsed)return void S_(n);let a=[],r=i.at(i.position);for(;r&&r instanceof la&&/^[a-zA-Z\*]$/.test(r.value);)r=r.leftSibling;if(r&&r instanceof la&&"\\"===r.value)for(a.push(r),r=r.rightSibling;r&&r instanceof la&&/^[a-zA-Z\*]$/.test(r.value);)a.push(r),r=r.rightSibling;let s=a.map(u=>u.value).join(""),l=s?function qG(n,o){var t,i;if("\\"===o)return[];if(!o.startsWith("\\"))return[];let a=[];for(let s in wc)s.startsWith(o)&&!wc[s].infix&&a.push({match:s,frequency:null!=(t=wc[s].frequency)?t:0});for(let s in vc)s.startsWith(o)&&a.push({match:s,frequency:null!=(i=vc[s].frequency)?i:0});let r=o.substring(1);for(let s of Object.keys(n.options.macros))s.startsWith(r)&&a.push({match:"\\"+s,frequency:0});return a.sort((s,l)=>{var c,u;return s.frequency===l.frequency?s.match.length===l.match.length?s.match<l.match?-1:1:s.match.length-l.match.length:(null!=(c=l.frequency)?c:0)-(null!=(u=s.frequency)?u:0)}),a.map(s=>s.match)}(n,s):[];if(0===l.length)return/^\\[a-zA-Z\*]+$/.test(s)&&a.forEach(u=>{u.isError=!0}),void S_(n);n.suggestionIndex=null!=(t=o?.atIndex)?t:0,n.suggestionIndex<0&&(n.suggestionIndex=l.length-1);let c=l[n.suggestionIndex%l.length];if(c!==s){let u=a[a.length-1];u.parent.addChildrenAfter([...c.slice(s.length-c.length)].map(m=>new la(m,n,{isSuggestion:!0})),u),Vo(n)}!function E$(n,o){if(0===o.length||!1===n.options.enablePopover)return void S_(n);o=o.slice(0,10);let t="<ul>";for(let a of o){let r=a,s=S$(n,a),l=v$(n.keybindings,r).join("<br>");t+=`<li role="button" data-command="${r}"><span class="ML__popover__latex">${r}</span><span class="ML__popover__command">${s}</span>`,l&&(t+=`<span class="ML__popover__keybinding">${l}</span>`),t+="</li>"}t+="</ul>",n.popover=function O$(n,o){return n.popover?(n.popover.innerHTML=n.options.createHTML(o),n.popover):(n.popover=Ry("mathlive-popover-panel"),void 0===$2&&($2=gu(a3).toString(36)),V2=xu(null,a3,$2),W2=xu(null,kc,gu(kc).toString(36)),n.popover.innerHTML=n.options.createHTML(o),n.popover)}(n,t);let i=n.popover.querySelectorAll("ul li");for(let a of i)a.addEventListener("pointerdown",r=>r.preventDefault()),a.addEventListener("click",r=>{Nm(n,"reject"),Po.insert("math",n.model,a.dataset.command,{selectionMode:"placeholder",format:"latex"}),n.dirty=!0,n.scrollIntoView(),n.focus()});setTimeout(()=>{let a=w_(n.field);a&&c3(n,a),n.popover&&(n.popover.classList.add("is-visible"),n.popoverVisible=!0)},32)}(n,l)}function l3(n){let[o,t]=s3(n,{before:n.position});if(void 0===o||void 0===t)return!1;let i=!1;return n.getAtoms([o,t]).forEach(a=>{a.isSuggestion&&(a.isSuggestion=!1,i=!0)}),i}function Nm(n,o="accept",t){var i,a;S_(n);let r=function k$(n){return n.atoms.find(o=>o instanceof xd)}(n.model);if(!r)return!1;if("accept-suggestion"===o){let c=k_(n.model).filter(u=>u.isSuggestion);if(0===c.length)return!1;for(let u of c)u.isSuggestion=!1;return n.model.position=n.model.offsetOf(c[c.length-1]),!0}let s=k_(n.model).filter(c=>!c.isSuggestion).map(c=>c.value).join(""),l=r.leftSibling;return r.parent.removeChild(r),n.model.position=n.model.offsetOf(l),n.mode=null!=(i=t?.mode)?i:"math","reject"===o||(Po.insert("math",n.model,s,{selectionMode:null!=(a=t?.selectItem)&&a?"item":"placeholder",format:"latex"}),n.snapshot(),n.model.announce("replacement")),!0}new class extends Po{constructor(){super("latex")}createAtom(n,o,t){return new la(n,o)}onPaste(n,o){var t;if(!o)return!1;let i="string"==typeof o?o:null!=(t=o.getData("text/x-latex"))?t:o.getData("text/plain");return!(!i||!Co(n.model,{inputType:"insertFromPaste",data:i})||(n.snapshot(),this.insert(n.model,i)&&(Eo(n.model,{inputType:"insertFromPaste"}),Vo(n)),0))}insert(n,o,t){if(!Co(n,{data:o,inputType:"insertText"}))return!1;t||(t={}),t.insertionMode||(t.insertionMode="replaceSelection"),t.selectionMode||(t.selectionMode="placeholder");let{suppressChangeNotifications:i}=n;t.suppressChangeNotifications&&(n.suppressChangeNotifications=!0);let a=n.suppressChangeNotifications;n.suppressChangeNotifications=!0,"replaceSelection"!==t.insertionMode||n.selectionIsCollapsed?"replaceAll"===t.insertionMode?(n.root.setChildren([],"body"),n.position=0):"insertBefore"===t.insertionMode?n.collapseSelection("backward"):"insertAfter"===t.insertionMode&&n.collapseSelection("forward"):n.deleteAtoms(Vs(n.selection));let r=[];for(let c of o)FG.test(c)&&r.push(new la(c,n.mathfield));let s=n.at(n.position);if(s instanceof xd&&(s=s.lastChild),!(s.parent instanceof xd)){let c=new xd("",n.mathfield);s.parent.addChildAfter(c,s),s=c.firstChild}let l=s.parent.addChildrenAfter(r,s);return n.suppressChangeNotifications=a,"before"===t.selectionMode||("item"===t.selectionMode?n.setSelection(n.anchor,n.offsetOf(l)):l&&(n.position=n.offsetOf(l))),Eo(n,{data:o,inputType:"insertText"}),n.suppressChangeNotifications=i,!0}};var $2,V2=null,W2=null;function S$(n,o){let t=n,i=new kt("root",t);return i.body=kr(o,t,{parseMode:"math"}),gd(c1(ch(new Ht(i.render(new pi({registers:t.registers},{fontSize:ym},"displaystyle")),{classes:"ML__base"}))),{classes:"ML__mathlive"}).toMarkup()}function I1(n,o){var t;if(n.element&&n.element.mathfield===n&&n.popover&&n.popoverVisible){if(null!=o&&o.deferred)return void setTimeout(()=>I1(n),100);if("latex"!==(null==(t=n.model.at(n.model.position))?void 0:t.type))S_(n);else{let i=w_(n.field);i&&c3(n,i)}}}function c3(n,o){if(ly(),!n.popover||!n.popoverVisible)return;let t=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,i=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,a=window.innerWidth-document.documentElement.clientWidth,r=window.innerHeight-document.documentElement.clientHeight,s=n.virtualKeyboard.height;n.popover.style.left=o.x+n.popover.offsetWidth/2>i-a?i-n.popover.offsetWidth-a+"px":o.x-n.popover.offsetWidth/2<0?"0":o.x-n.popover.offsetWidth/2+"px",o.y+n.popover.offsetHeight+5>t-r-s?(n.popover.classList.add("ML__popover--reverse-direction"),n.popover.style.top=o.y-o.height-n.popover.offsetHeight-5+"px"):(n.popover.classList.remove("ML__popover--reverse-direction"),n.popover.style.top=`${o.y+5}px`)}function S_(n){n.suggestionIndex=0,n.popoverVisible=!1,n.popover&&(n.popover.classList.remove("is-visible"),n.popover.innerHTML="")}function M$(n){let o=0;for(let t=0;t<n.length;t++)o=31*o+n.charCodeAt(t),o|=0;return Math.abs(o)}function Vo(n,o){n.dirty||(n.dirty=!0,requestAnimationFrame(()=>{Qm(n)&&n.dirty&&(n.atomBoundsCache=new Map,Zm(n,o),n.atomBoundsCache=void 0)}))}function Zm(n,o){var t;if(!Qm(n))return;o=o??{};let{model:i}=n;i.root.caret="",i.root.isSelected=!1,i.root.containsCaret=!0;for(let c of i.atoms)c.caret="",c.isSelected=!1,c.containsCaret=!1;let a=!n.options.readOnly&&n.hasFocus();if(i.selectionIsCollapsed)i.at(i.position).caret=a?n.mode:"";else{let c=i.getAtoms(i.selection,{includeChildren:!0});for(let u of c)u.isSelected=!0}if(a){let c=i.at(i.position).parent;for(;c;)c.containsCaret=!0,c=c.parent}let r=function L$(n,o){var t;return gd(ch(n.model.root.render(new pi({registers:n.registers,atomIdsSettings:{seed:(o=o??{}).forHighlighting?M$(kt.serialize(n.model.root,{expandMacro:!1,defaultMode:n.options.defaultMode})):"random",groupNumbers:null!=(t=o.forHighlighting)&&t},renderPlaceholder:n.options.readOnly?(a,r)=>{if(r.placeholderId){let s=n.getPlaceholderField(r.placeholderId);return r.createMathfieldBox(a,s,r.placeholderId)}return r.createBox(a)}:void 0},{fontSize:ym,letterShapeStyle:n.options.letterShapeStyle},"inline-math"===n.options.defaultMode?"textstyle":"displaystyle")),n.options.horizontalSpacingScale),{classes:"ML__mathlive",attributes:{translate:"no","aria-hidden":"true"}})}(n,o),s=n.field,l=s.classList.contains("ML__focused");l&&!a?s.classList.remove("ML__focused"):!l&&a&&s.classList.add("ML__focused"),s.innerHTML=n.options.createHTML(r.toMarkup()),n.fieldContent=s.querySelector(".ML__mathlive"),n.accessibleMathML.innerHTML=n.options.createHTML('<math xmlns="http://www.w3.org/1998/Math/MathML">'+Zi(i.root,n.options)+"</math>"),u3(n),n.options.readOnly&&n.attachNestedMathfield(),null!=(t=o.interactive)&&t||setTimeout(()=>u3(n),32),n.dirty=!1}function u3(n){let o=n.field;if(!o)return;for(let r of o.querySelectorAll(".ML__selection, .ML__contains-highlight"))r.remove();if(!n.hasFocus())return;let t=n.model,i=parseFloat(getComputedStyle(o).width),a=o.getBoundingClientRect().width/i;if(a=isNaN(a)?1:a,t.selectionIsCollapsed){setTimeout(()=>I1(n),32);let r=t.at(t.position);for(;r&&(!r.containsCaret||!r.displayContainsHighlight);)r=r.parent;if(null!=r&&r.containsCaret&&r.displayContainsHighlight){let s=Hy(n,y_(n,r));if(s){s.left/=a,s.right/=a,s.top/=a,s.bottom/=a;let l=document.createElement("div");l.classList.add("ML__contains-highlight"),l.style.position="absolute",l.style.left=`${s.left}px`,l.style.top=`${s.top}px`,l.style.width=`${Math.ceil(s.right-s.left)}px`,l.style.height=`${Math.ceil(s.bottom-s.top-1)}px`,o.insertBefore(l,o.childNodes[0])}}}else for(let r of function B$(n){let o=[];for(let t of n){let i=!1;for(let a of o)if(t.left===a.left&&t.right===a.right&&t.top===a.top&&t.bottom===a.bottom){i=!0;break}i||o.push(t)}n=o,o=[];for(let t of n){let i=0;for(let a of n)if(t.left>=a.left&&t.right<=a.right&&t.top>=a.top&&t.bottom<=a.bottom&&(i+=1,i>1))break;1===i&&o.push(t)}return o}(Ky(n,{excludeAtomsWithBackground:!0}))){r.left/=a,r.right/=a,r.top/=a,r.bottom/=a;let s=document.createElement("div");s.classList.add("ML__selection"),s.style.position="absolute",s.style.left=`${r.left}px`,s.style.top=`${r.top}px`,s.style.width=`${Math.ceil(r.right-r.left)}px`,s.style.height=`${Math.ceil(r.bottom-r.top-1)}px`,o.insertBefore(s,o.childNodes[0])}}var bu={};function Er(n,o){o=o??{target:"mathfield",canUndo:!1};for(let t of Object.keys(n))bu[t]=mi(Et({},o),{fn:n[t]})}function E_(n){var o;let t;return t=Ea(n)?n[0]:n,t=t.replace(/-\w/g,i=>i[1].toUpperCase()),null==(o=bu[t])?void 0:o.target}function fh(n,o,t){return o+Ah(t,mi(Et({},n),{textToSpeechMarkup:"",textToSpeechRulesOptions:mi(Et({},n.textToSpeechRulesOptions),{markup:"none"})}))}function D$(n,o){var t,i,a;if(As()&&(null!=o||(o=null!=(t=ca().config)?t:{}),o))if(o.speechEngine&&"local"!==o.speechEngine)if("amazon"===o.speechEngine)if("AWS"in window){let r=new globalThis.AWS.Polly({apiVersion:"2016-06-10"}),s={OutputFormat:"mp3",VoiceId:null!=(i=o.speechEngineVoice)?i:"Joanna",Engine:["Amy","Emma","Brian","Ivy","Joanna","Kendra","Kimberly","Salli","Joey","Justin","Matthew"].includes(null!=(a=o.speechEngineVoice)?a:"Joanna")?"neural":"standard",Text:n,TextType:"ssml"};r.synthesizeSpeech(s,(l,c)=>{if(l)console.error("MathLive: polly.synthesizeSpeech() error:",l,l.stack);else if(null!=c&&c.AudioStream){let u=new Uint8Array(c.AudioStream),m=new Blob([u.buffer],{type:"audio/mpeg"}),p=URL.createObjectURL(m);new Audio(p).play().catch(f=>console.log(f))}})}else console.error("MathLive: AWS SDK not loaded. See https://www.npmjs.com/package/aws-sdk");else"google"===o.speechEngine&&console.error("MathLive: The Google speech engine is not supported yet. Please come again.");else{let r=new SpeechSynthesisUtterance(n);window.speechSynthesis.speak(r)}}function d3(n){if(n&&(n.classList.remove("ML__highlight"),n.children))for(let o of n.children)d3(o)}function eb(n,o){var t;n&&(o&&(null==(t=n.dataset)?void 0:t.atomId)!==o?(n.classList.remove("ML__highlight"),n.children&&n.children.length>0&&[...n.children].forEach(i=>{i instanceof HTMLElement&&eb(i,o)})):(n.classList.add("ML__highlight"),n.children&&n.children.length>0&&[...n.children].forEach(i=>{i instanceof HTMLElement&&eb(i)})))}function U$(n,o,t){var i;if(!As())return;if(null!=t||(t=ca().config),"amazon"!==t.speechEngine)return console.error("MathLive: Use Amazon TTS Engine for synchronized highlighting"),void(t.speakHook&&t.speakHook(o,t));if(!globalThis.AWS)return void console.error("MathLive: AWS SDK not loaded. See https://www.npmjs.com/package/aws-sdk");let a=new globalThis.AWS.Polly({apiVersion:"2016-06-10"}),r={OutputFormat:"json",VoiceId:null!=(i=t.speechEngineVoice)?i:"Joanna",Engine:"standard",Text:o,TextType:"ssml",SpeechMarkTypes:["ssml"]};ca().readAloudElement=n,a.synthesizeSpeech(r,(s,l)=>{if(s)return void console.error("MathLive: polly.synthesizeSpeech() error:",s,s.stack);if(null==l||!l.AudioStream)return;let c=new TextDecoder("utf-8").decode(new Uint8Array(l.AudioStream));ca().readAloudMarks=c.split("\n").map(u=>u?JSON.parse(u):{}),ca().readAloudTokens=[];for(let u of ca().readAloudMarks)u.value&&ca().readAloudTokens.push(u.value);ca().readAloudCurrentMark="",r.OutputFormat="mp3",r.SpeechMarkTypes=[],a.synthesizeSpeech(r,(u,m)=>{if(u)return void console.error("MathLive: polly.synthesizeSpeech(",o,") error:",u,u.stack);if(null==m||!m.AudioStream)return;let p=new Uint8Array(m.AudioStream),f=new Blob([p.buffer],{type:"audio/mpeg"}),b=URL.createObjectURL(f),L=ca();L.readAloudAudio?L.readAloudAudio.pause():(L.readAloudAudio=new Audio,L.readAloudAudio.addEventListener("ended",()=>{let N=L.readAloudMathField;L.readAloudStatus="ended",document.body.dispatchEvent(new Event("read-aloud-status-change",{bubbles:!0,composed:!0})),N?(Zm(N),L.readAloudElement=null,L.readAloudMathField=null,L.readAloudTokens=[],L.readAloudMarks=[],L.readAloudCurrentMark=""):d3(L.readAloudElement)}),L.readAloudAudio.addEventListener("timeupdate",()=>{let N="",R=1e3*L.readAloudAudio.currentTime+100;for(let j of L.readAloudMarks)j.time<R&&(N=j.value);L.readAloudCurrentMark!==N&&(L.readAloudCurrentToken=N,N&&N===L.readAloudFinalToken?L.readAloudAudio.pause():(L.readAloudCurrentMark=N,eb(L.readAloudElement,L.readAloudCurrentMark)))})),L.readAloudAudio.src=b,L.readAloudStatus="playing",document.body.dispatchEvent(new Event("read-aloud-status-change",{bubbles:!0,composed:!0})),L.readAloudAudio.play()})})}function tb(n,o){var t,i,a;let r=gh(n,Object.keys(n));for(let s of Object.keys(o))switch(s){case"scriptDepth":if(Ea(o.scriptDepth))r.scriptDepth=[o.scriptDepth[0],o.scriptDepth[1]];else{if("number"!=typeof o.scriptDepth)throw new TypeError("Unexpected value for scriptDepth");r.scriptDepth=[o.scriptDepth,o.scriptDepth]}break;case"locale":r.locale="auto"===o.locale?navigator.language.slice(0,5):o.locale,Ao.locale=r.locale;break;case"strings":Ao.merge(o.strings),r.strings=Ao.strings;break;case"virtualKeyboardLayout":r.virtualKeyboardLayout=o.virtualKeyboardLayout;break;case"virtualKeyboardMode":let l=o.virtualKeyboardMode.toLowerCase();r.virtualKeyboardMode="auto"===l?cy()?"onfocus":"off":l;break;case"customVirtualKeyboardLayers":r.customVirtualKeyboardLayers=Et(Et({},r.customVirtualKeyboardLayers),o.customVirtualKeyboardLayers);break;case"customVirtualKeyboards":r.customVirtualKeyboards=Et(Et({},r.customVirtualKeyboards),o.customVirtualKeyboards);break;case"letterShapeStyle":r.letterShapeStyle="auto"===o.letterShapeStyle?Ao.locale.startsWith("fr")?"french":"tex":o.letterShapeStyle;break;case"plonkSound":void 0!==o.plonkSound&&(r.plonkSound=o.plonkSound);break;case"keypressSound":null===o.keypressSound?r.keypressSound={default:null,delete:null,return:null,spacebar:null}:"string"==typeof o.keypressSound?r.keypressSound={delete:o.keypressSound,return:o.keypressSound,spacebar:o.keypressSound,default:o.keypressSound}:"object"==typeof o.keypressSound&&"default"in o.keypressSound&&(r.keypressSound=Et({},o.keypressSound),r.keypressSound.delete=null!=(t=r.keypressSound.delete)?t:o.keypressSound.default,r.keypressSound.return=null!=(i=r.keypressSound.return)?i:o.keypressSound.default,r.keypressSound.spacebar=null!=(a=r.keypressSound.spacebar)?a:o.keypressSound.default);break;case"computeEngine":r.computeEngine=o.computeEngine;break;case"virtualKeyboardContainer":r.virtualKeyboardContainer=o.virtualKeyboardContainer;break;case"macros":r.macros=x2(o.macros);break;default:r[s]=Ea(o[s])?[...o[s]]:"object"==typeof o[s]?Et({},o[s]):o[s]}return r}function gh(n,o){let t;t="string"==typeof o?[o]:void 0===o?Object.keys(n):o;let i={};for(let a of t)i[a]=null===n[a]?null:Ea(n[a])?[...n[a]]:"object"!=typeof n[a]||n[a]instanceof Element||"computeEngine"===a?n[a]:Et({},n[a]);return"string"==typeof o?i[o]:i}Er({performWithFeedback:(n,o)=>function Q$(n,o){n.focus(),n.options.keypressVibration&&d2()&&navigator.vibrate(3),o=o.replace(/-\w/g,i=>i[1].toUpperCase()),n.playSound("moveToNextPlaceholder"===o||"moveToPreviousPlaceholder"===o||"complete"===o?"return":"deleteBackward"===o||"deleteForward"===o||"deletePreviousWord"===o||"deleteNextWord"===o||"deleteToGroupStart"===o||"deleteToGroupEnd"===o||"deleteToMathFieldStart"===o||"deleteToMathFieldEnd"===o?"delete":"keypress");let t=n.executeCommand(o);return n.scrollIntoView(),t}(n,o)}),Er({complete:Nm,nextSuggestion:function F$(n){return O1(n,{atIndex:n.suggestionIndex+1}),!1},previousSuggestion:function N$(n){return O1(n,{atIndex:n.suggestionIndex-1}),!1}},{target:"mathfield",category:"autocomplete"}),Er({speak:(n,o,t)=>function Z$(n,o,t){var i,a;t=t??{withHighlighting:!1};let{model:r}=n;let c=function s(p){let f=null;switch(p){case"all":default:f=r.root;break;case"selection":f=r.getAtoms(r.selection);break;case"left":f=r.getAtoms(r.offsetOf(r.at(r.position).leftSibling),r.position);break;case"right":f=r.getAtoms(r.position,r.offsetOf(r.at(r.position).rightSibling));break;case"group":f=r.getAtoms(r.getSiblingsRange(r.position));break;case"parent":{let{parent:b}=r.at(r.position);f=b&&"root"!==b.type?b:r.root;break}}return f}(o);if(null===c)return null==(a=(i=n.options).speakHook)||a.call(i,function l(p){let f="";switch(p){case"all":case"group":default:break;case"selection":f="no selection";break;case"left":f="at start";break;case"right":f="at end";break;case"parent":f="no parent"}return f}(o),n.options),!1;let u=Et({},n.options);(t.withHighlighting||"amazon"===u.speechEngine)&&(u.textToSpeechMarkup=globalThis.sre&&"sre"===u.textToSpeechRules?"ssml_step":"ssml");let m=Ah(c,u);return As()&&t.withHighlighting?(ca().readAloudMathField=n,Zm(n,{forHighlighting:!0}),n.options.readAloudHook&&n.options.readAloudHook(n.field,m,n.options)):n.options.speakHook&&n.options.speakHook(m,u),!1}(n,o,t)},{target:"mathfield",category:"speech"});var m3='<span style="width: 21px; margin-top: 4px;"><svg style="width: 21px;" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M528 64H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h480c26.51 0 48-21.49 48-48V112c0-26.51-21.49-48-48-48zm16 336c0 8.823-7.177 16-16 16H48c-8.823 0-16-7.177-16-16V112c0-8.823 7.177-16 16-16h480c8.823 0 16 7.177 16 16v288zM168 268v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm-336 80v-24c0-6.627-5.373-12-12-12H84c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm384 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zM120 188v-24c0-6.627-5.373-12-12-12H84c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm-96 152v-8c0-6.627-5.373-12-12-12H180c-6.627 0-12 5.373-12 12v8c0 6.627 5.373 12 12 12h216c6.627 0 12-5.373 12-12z"/></svg></span>';function nb(){var n,o,t;return{readOnly:!1,createHTML:i=>i,fontsDirectory:"./fonts",soundsDirectory:"./sounds",computeEngine:void 0,defaultMode:"math",macros:g2(),registers:{},colorMap:t1,backgroundColorMap:m2,horizontalSpacingScale:1,letterShapeStyle:Ao.locale.startsWith("fr")?"french":"tex",smartMode:!1,smartFence:!0,smartSuperscript:!0,scriptDepth:[1/0,1/0],removeExtraneousParentheses:!0,mathModeSpace:"",decimalSeparator:".",fractionNavigationOrder:"numerator-denominator",placeholderSymbol:"\u25a2",enablePopover:!0,locale:Ao.locale,strings:Ao.strings,keybindings:i3,inlineShortcuts:Zy,inlineShortcutTimeout:0,virtualKeyboardToggleGlyph:m3,virtualKeyboardMode:"auto",virtualKeyboards:"all",virtualKeyboardLayout:"auto",customVirtualKeyboardLayers:{},customVirtualKeyboards:{},virtualKeyboardTheme:/android|cros/i.test(navigator.userAgent)?"material":"apple",keypressVibration:!0,keypressSound:null,plonkSound:null,virtualKeyboardToolbar:"default",virtualKeyboardContainer:null!=(o=null==(n=globalThis.document)?void 0:n.body)?o:null,useSharedVirtualKeyboard:!1,sharedVirtualKeyboardTargetOrigin:null==(t=globalThis.window)?void 0:t.origin,originValidator:"same-origin",textToSpeechRules:"mathlive",textToSpeechMarkup:"",textToSpeechRulesOptions:{},speechEngine:"local",speechEngineVoice:"Joanna",speechEngineRate:"100%",speakHook:D$,readAloudHook:U$,onInlineShortcut:()=>"",onExport:NY,value:""}}function ib(n){return"inline-math"===n.defaultMode?"math":n.defaultMode}var h3,A3,p3="@keyframes ML__caret-blink{0%,100%{opacity:1}50%{opacity:0}}.ML__caret:after{content:'';border:none;border-radius:2px;border-right:2px solid var(--caret-color, var(--ML__caret-color));margin-right:-2px;position:relative;left:-1px;animation:ML__caret-blink 1.05s step-end forwards infinite}.ML__text-caret:after{content:'';border:none;border-radius:1px;border-right:1px solid var(--caret-color, var(--ML__caret-color));margin-right:-1px;position:relative;left:0;animation:ML__caret-blink 1.05s step-end forwards infinite}.ML__latex-caret:after{content:'_';border:none;margin-right:0;margin-right:calc(-1ex - 2px);position:relative;color:var(--caret-color, var(--ML__caret-color));animation:ML__caret-blink 1.05s step-end forwards infinite}.ML__container{display:flex;flex-flow:row;justify-content:space-between;align-items:flex-end;min-height:39px;width:100%;isolation:isolate;touch-action:none;--ML__selection-background-color:hsl(var(--hue, 212), 97%, 85%);--ML__text-highlight-background-color:hsla(var(--hue, 212), 40%, 50%, .1);--ML__contains-highlight-background-color:hsl(var(--hue, 212), 40%, 95%);--ML__selection-color:currentColor;--ML__caret-color:hsl(var(--hue, 212), 40%, 49%);--ML__smart-fence-color:currentColor;--ML__latex-color:var(--primary, hsl(var(--hue, 212), 40%, 50%));--ML__placeholder-color:hsl(var(--hue, 212), 40%, 49%)}@media (prefers-color-scheme:dark){.ML__container{--ML__selection-background-color:hsl(var(--hue, 212), 25%, 45%);--ML__text-highlight-background-color:hsla(var(--hue, 212), 40%, 50%, .2);--ML__contains-highlight-background-color:hsl(var(--hue, 212), 5%, 34%);--ML__caret-color:hsl(var(--hue, 212), 60%, 69%);--ML__latex-color:var(--primary, hsl(var(--hue, 212), 40%, 50%));--ML__placeholder-color:hsl(var(--hue, 212), 60%, 69%)}}.ML__content{display:flex;align-items:center;align-self:center;position:relative;overflow:hidden;padding:2px 0 2px 1px;width:100%}.ML__virtual-keyboard-toggle{display:none;box-sizing:border-box}.ML__virtual-keyboard-toggle>span{display:flex;align-self:center;align-items:center}.ML__virtual-keyboard-toggle.is-visible{display:flex;align-self:center;align-items:center;flex-shrink:0;flex-direction:column;justify-content:center;width:34px;height:34px;padding:0;margin-right:4px;cursor:pointer;border-radius:8px;border:1px solid transparent;transition:background .2s cubic-bezier(.64, .09, .08, 1);color:var(--primary, hsl(var(--hue, 212), 40%, 50%));fill:currentColor;background:transparent}.ML__virtual-keyboard-toggle.is-visible:hover{background:hsla(0,0%,70%,0.5);color:#333;fill:currentColor;border-radius:8px}.ML__keyboard-sink{display:inline-block;resize:none;outline:none;border:none;position:fixed;clip:rect(0 0 0 0);font-size:1em;font-family:KaTeX_Main}.ML__focused .ML__text{background:var(--highlight-text, var(--ML__text-highlight-background-color))}.ML__smart-fence__close{opacity:var(--smart-fence-opacity, .5);color:var(--smart-fence-color, var(--ML__smart-fence-color))}.ML__focused .ML__selection{background:var(--selection-background-color-focused, var(--selection-background-color, var(--ML__selection-background-color))) !important}.ML__focused .ML__selected,.ML__focused .ML__selected .ML__contains-caret,.ML__focused .ML__selected .ML__smart-fence__close,.ML__focused .ML__selected .ML__placeholder{color:var(--selection-color-focused, var(--selection-color, var(--ML__selection-color))) !important}.ML__selection{box-sizing:border-box;background:var(--selection-background-color, var(--ML__selection-background-color)) !important}.ML__selected,.ML__selected .ML__contains-caret,.ML__selected .ML__smart-fence__close,.ML__selected .ML__placeholder{color:var(--selection-color, var(--ML__selection-color));opacity:1}.ML__contains-caret.ML__close,.ML__contains-caret.ML__open,.ML__contains-caret>.ML__close,.ML__contains-caret>.ML__open,.ML__contains-caret .ML__sqrt-sign,.ML__contains-caret .ML__sqrt-line{color:var(--caret-color, var(--ML__caret-color))}.ML__contains-highlight{background:var(--contains-highlight-backround-color, var(--ML__contains-highlight));box-sizing:border-box}.ML__latex{font-family:'IBM Plex Mono','Source Code Pro',Consolas,'Roboto Mono',Menlo,'Bitstream Vera Sans Mono','DejaVu Sans Mono',Monaco,Courier,monospace;font-weight:400;color:var(--latex-color, var(--ML__latex-color))}.ML__suggestion{opacity:.5}.ML__virtual-keyboard-toggle.is-visible.is-pressed:hover{background:hsl(var(--hue, 212), 25%, 35%);color:#fafafa;fill:currentColor}.ML__virtual-keyboard-toggle:focus{outline:none;border-radius:8px;border:2px solid var(--primary, hsl(var(--hue, 212), 40%, 50%))}.ML__virtual-keyboard-toggle.is-pressed,.ML__virtual-keyboard-toggle.is-active:hover,.ML__virtual-keyboard-toggle.is-active{background:hsl(var(--hue, 212), 25%, 35%);color:#fafafa;fill:currentColor}.ML__tooltip-container{position:relative;transform:scale(0)}.ML__tooltip-container .ML__tooltip-content{position:fixed;display:inline-table;visibility:hidden;z-index:2;width:max-content;max-width:400px;padding:12px 12px;border-radius:8px;background:#616161;color:#fff;box-shadow:0 2px 2px 0 rgba(0,0,0,0.14),0 1px 5px 0 rgba(0,0,0,0.12),0 3px 1px -2px rgba(0,0,0,0.2);opacity:0;transition:opacity .15s cubic-bezier(.4, 0, 1, 1)}.ML__tooltip-container .ML__tooltip-content .ML__text{white-space:normal}.ML__tooltip-container .ML__tooltip-content .ML__base{display:contents}.ML__tooltip-container:hover .ML__tooltip-content{visibility:visible;opacity:1;font-size:.75em;transform:scale(1) translate(0, 3em)}[data-ML__tooltip]{position:relative}[data-ML__tooltip][data-placement='top']::after{top:inherit;bottom:100%}[data-ML__tooltip]::after{content:attr(data-ML__tooltip);position:absolute;display:none;z-index:2;right:110%;width:max-content;max-width:200px;padding:8px 8px;border-radius:2px;background:#616161;color:#fff;box-shadow:0 2px 2px 0 rgba(0,0,0,0.14),0 1px 5px 0 rgba(0,0,0,0.12),0 3px 1px -2px rgba(0,0,0,0.2);text-align:center;font-family:system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI','Roboto','Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue',sans-serif;font-weight:400;font-size:12px;opacity:0;transform:scale(.5);transition:all .15s cubic-bezier(.4, 0, 1, 1)}@media only screen and (max-width:767px){[data-ML__tooltip]::after{padding:8px 16px;font-size:16px}}:not(.tracking) [data-ML__tooltip]:hover{position:relative}:not(.tracking) [data-ML__tooltip]:hover::after{visibility:visible;display:inline-table;opacity:1;transform:scale(1)}[data-ML__tooltip][data-delay]::after{transition-delay:0s}[data-ML__tooltip][data-delay]:hover::after{transition-delay:1s}",M1=null,ob=(null==(A3=null==(h3=globalThis?.document)?void 0:h3.currentScript)?void 0:A3.src)||function j$(){let n=String((new Error).stack).replace(/^Error.*\n/,"").split("\n");if(0===n.length)return console.error(`Can't use relative paths to specify assets location because the sourcefile location could not be determined (unexpected stack trace format "${(new Error).stack}").`),"";let o=n[1],t=o.match(/http.*\.ts[\?:]/);return t&&(o=n[2]),t=o.match(/(https?:.*):[0-9]+:[0-9]+/),t||(t=o.match(/at (.*(\.ts))[\?:]/),t||(t=o.match(/at (.*(\.mjs|\.js))[\?:]/))),t?t[1]:(console.error(n),console.error(`Can't use relative paths to specify assets location because the source file location could not be determined (unexpected location "${o}").`),"")}();function _3(n){return ab.apply(this,arguments)}function ab(){return ab=(0,Yi.Z)(function*(n){if(/^(?:[a-z+]+:)?\/\//i.test(n))return new URL(n).href;if(null===M1)try{let o=yield fetch(ob,{method:"HEAD"});200===o.status&&(M1=o.url)}catch{console.error(`Invalid URL "${n}" (relative to "${ob}")`)}return new URL(n,M1??ob).href}),ab.apply(this,arguments)}function rb(n){return sb.apply(this,arguments)}function sb(){return sb=(0,Yi.Z)(function*(n){var o;if(!(document.body.classList.contains("ML__fonts-loading")||null!=(o=getComputedStyle(document.documentElement).getPropertyValue("--ML__static-fonts"))&&o)&&(document.body.classList.remove("ML__fonts-did-not-load"),"fonts"in document)){let t=["KaTeX_Main","KaTeX_Math","KaTeX_AMS","KaTeX_Caligraphic","KaTeX_Fraktur","KaTeX_SansSerif","KaTeX_Script","KaTeX_Typewriter","KaTeX_Size1","KaTeX_Size2","KaTeX_Size3","KaTeX_Size4"],i=Array.from(document.fonts).map(s=>s.family);if(t.every(s=>i.includes(s)))return;document.body.classList.add("ML__fonts-loading");let a=yield _3(n??"./fonts");if(!a)return document.body.classList.add("ML__fonts-did-not-load"),void document.body.classList.remove("ML__fonts-loading");let r=[["KaTeX_Main-Regular"],["KaTeX_Main-BoldItalic",{style:"italic",weight:"bold"}],["KaTeX_Main-Bold",{weight:"bold"}],["KaTeX_Main-Italic",{style:"italic"}],["KaTeX_Math-Italic",{style:"italic"}],["KaTeX_Math-BoldItalic",{style:"italic",weight:"bold"}],["KaTeX_AMS-Regular"],["KaTeX_Caligraphic-Regular"],["KaTeX_Caligraphic-Bold",{weight:"bold"}],["KaTeX_Fraktur-Regular"],["KaTeX_Fraktur-Bold",{weight:"bold"}],["KaTeX_SansSerif-Regular",{style:"italic"}],["KaTeX_SansSerif-Bold",{weight:"bold"}],["KaTeX_SansSerif-Italic",{style:"italic"}],["KaTeX_Script-Regular"],["KaTeX_Typewriter-Regular"],["KaTeX_Size1-Regular"],["KaTeX_Size2-Regular"],["KaTeX_Size3-Regular"],["KaTeX_Size4-Regular"]].map(s=>function q$(n,o,t={}){return new FontFace(n,`url(${o}.woff2) format('woff2')`,t)}(s[0].replace(/-[a-zA-Z]+$/,""),a+"/"+s[0],s[1]));try{(yield Promise.all(r.map(s=>{try{return s.load()}catch{}}))).forEach(s=>document.fonts.add(s))}catch(s){console.error(`The MathLive fonts could not be loaded from "${a}"`,{cause:s}),document.body.classList.add("ML__fonts-did-not-load")}document.body.classList.remove("ML__fonts-loading")}}),sb.apply(this,arguments)}function wd(n){return"number"==typeof n&&!Number.isNaN(n)}function L1(n){return Array.isArray(n)&&2===n.length}function B1(n){return null!=n&&"object"==typeof n&&"ranges"in n&&Array.isArray(n.ranges)}var O_={"\\ne":"\u2260","\\neq":"\u2260","\u2212":"-","-":"-","\\alpha":"alpha","\\beta":"beta","\\gamma":"gamma","\\delta":"delta","\\epsilon":"epsilon","\\varepsilon":"varepsilon","\\zeta":"zeta","\\eta":"eta","\\theta":"theta","\\vartheta":"vartheta","\\iota":"iota","\\kappa":"kappa","\\lambda":"lambda","\\mu":"mu","\\nu":"nu","\\xi":"xi","\\pi":"pi","\\rho":"rho","\\sigma":"sigma","\\tau":"tau","\\upsilon":"upsilon","\\phi":"phi","\\varphi":"varphi","\\chi":"chi","\\psi":"psi","\\omega":"omega","\\Gamma":"Gamma","\\Delta":"Delta","\\Theta":"Theta","\\Lambda":"Lambda","\\Xi":"Xi","\\Pi":"Pi","\\Sigma":"Sigma","\\Phi":"Phi","\\Psi":"Psi","\\Omega":"Omega","\\exponentialE":"e","\\imaginaryI":"i","\\imaginaryJ":"j","\\!":" ","\\,":" ","\\:":" ","\\;":" ","\\enskip":" ","\\enspace":" ","\\qquad":" ","\\quad":" "},lb={"\\pm":"+-","\\times":"xx","\\colon":":","\\vert":"|","\\Vert":"||","\\mid":"|","\\lbrace":"{","\\rbrace":"}","\\lparen":"(","\\rparen":")","\\langle":"(:","\\rangle":":)"};function Wo(n){var o,t,i,a,r,s,l,c,u,m,p,f,b;if(!n)return"";if(Ea(n)){if(0===n.length||("first"===n[0].type&&(n=n.slice(1)),0===n.length))return"";let j="";if("latex"===n[0].mode)for(let G of n)j+=Wo(G);else if("text"===n[0].mode){let G=0;for(j='"';"text"===(null==(o=n[G])?void 0:o.mode);)j+=n[G].body?Wo(n[G].body):n[G].value,G++;j+='"'+Wo(n.slice(G))}else if("math"===n[0].mode){let G=0;for(;n[G]&&"math"===n[G].mode;)j+=Wo(n[G]),G++;j+=Wo(n.slice(G))}else console.warn("toASCIIMath: Unexpected mode");return j.trim()}if("text"===n.mode)return'"'+n.value+'"';let R,L="",{command:N}=n;switch(n.type){case"first":return"";case"group":case"root":L=null!=(t=O_[N])?t:Wo(n.body);break;case"genfrac":{let ve=n;(ve.leftDelim||ve.rightDelim)&&(L+="."!==ve.leftDelim&&ve.leftDelim?ve.leftDelim:"{:"),ve.hasBarLine?(L+="(",L+=Wo(ve.above),L+=")/(",L+=Wo(ve.below),L+=")"):(L+="("+Wo(ve.above)+"),",L+="("+Wo(ve.below)+")"),(ve.leftDelim||ve.rightDelim)&&(L+="."!==ve.rightDelim&&ve.rightDelim?ve.rightDelim:"{:")}break;case"surd":L+=n.hasEmptyBranch("above")?"sqrt("+Wo(n.body)+")":"root("+Wo(n.above)+")("+Wo(n.body)+")";break;case"latex":L=n.value;break;case"leftright":{let ve=n;L+="."!==ve.leftDelim&&ve.leftDelim?ve.leftDelim:"{:",L+=Wo(ve.body),L+="."!==ve.rightDelim&&ve.rightDelim?ve.rightDelim:":}"}break;case"sizeddelim":case"delim":case"overlap":case"overunder":case"box":break;case"mord":L=null!=(a=null!=(i=O_[N])?i:N)?a:"string"==typeof n.value?n.value:"",L.startsWith("\\")&&(L+=" "),R=N?N.match(/{?\\char"([\dabcdefABCDEF]*)}?/):null,R?L=String.fromCodePoint(Number.parseInt("0x"+R[1])):L.length>0&&L.startsWith("\\")&&(L="string"==typeof n.value?n.value.charAt(0):n.command);break;case"mbin":case"mrel":case"minner":L=null!=(s=null!=(r=O_[N])?r:lb[N])?s:n.value;break;case"mopen":case"mclose":L+=n.value;break;case"mpunct":L=null!=(l=lb[N])?l:N;break;case"mop":"\u200b"!==n.value&&(L="",L+="\\operatorname"===N?Wo(n.body):null!=(c=n.value)?c:N,L+=" ");break;case"array":let j=n.array,G=n.environmentName,ae=null!=(u={bmatrix:["[","]"],"bmatrix*":["[","]"]}[G])?u:["(",")"],W=[];for(let ve of j){let ce=[];for(let te of ve)ce.push(ae[0]+Wo(te)+ae[1]);W.push(ce.join(","))}let le=null!=(m={bmatrix:["[","]"],"bmatrix*":["[","]"],cases:["{",":}"]}[G])?m:["(",")"];L=le[0]+W.join(",")+le[1];break;case"spacing":L=null!=(p=O_[N])?p:" ";break;case"enclose":L="("+Wo(n.body)+")";break;case"space":L=" ";break;case"msubsup":L="";break;case"macro":L=null!=(b=null!=(f=O_[N])?f:lb[N])?b:Wo(n.body)}if(!n.hasEmptyBranch("subscript")){L+="_";let j=Wo(n.subscript);L+=j.length>1?"("+j+")":j}if(!n.hasEmptyBranch("superscript")){L+="^";let j=Wo(n.superscript);L+=j.length>1?"("+j+")":j}return L}function f3(n){let o;if("body"===n.treeBranch)o={enclose:"cross out",leftright:"delimiter",surd:"square root",root:"math field",mop:"operator"}[n.type];else if("genfrac"===n.parent.type){if("above"===n.treeBranch)return"numerator";if("below"===n.treeBranch)return"denominator"}else"surd"===n.parent.type?"above"===n.treeBranch&&(o="index"):"superscript"===n.treeBranch?o="superscript":"subscript"===n.treeBranch&&(o="subscript");return o??"parent"}function g3(n,o,t,i){let a=n.offsetOf(o);if(a<t||a>i)return!1;if(!o.hasChildren)return!0;let r=n.offsetOf(o.firstChild);if(r>=t&&r<=i){let s=n.offsetOf(o.lastChild);if(s>=t&&s<=i)return!0}return!1}function cb(n,o,t){if(null==o||!o.hasChildren)return!1;let[i,a]=t,r=n.offsetOf(o.firstChild),s=n.offsetOf(o.lastChild);return r>=i&&r<=a&&s>=r&&s<=a}function P1(n,o){let t=n.at(n.position);for(;t&&!(Array.isArray(t.treeBranch)&&t.parent instanceof So);)t=t.parent;if(Array.isArray(t?.treeBranch)&&t?.parent instanceof So){let a,i=t.parent;switch(o){case"after row":i.addRowAfter(t.treeBranch[0]),a=n.offsetOf(i.getCell(t.treeBranch[0]+1,0)[0]);break;case"after column":if(i.maxColumns<=i.colCount)return void n.announce("plonk");i.addColumnAfter(t.treeBranch[1]),a=n.offsetOf(i.getCell(t.treeBranch[0],t.treeBranch[1]+1)[0]);break;case"before row":i.addRowBefore(t.treeBranch[0]),a=n.offsetOf(i.getCell(t.treeBranch[0]-1,0)[0]);break;case"before column":if(i.maxColumns<=i.colCount)return void n.announce("plonk");i.addColumnBefore(t.treeBranch[1]),a=n.offsetOf(i.getCell(t.treeBranch[0],t.treeBranch[1]-1)[0])}n.setSelection(a,a+1)}}function x3(n){return!!Co(n,{inputType:"insertText"})&&(P1(n,"after row"),Eo(n,{inputType:"insertText"}),!0)}function b3(n){return!!Co(n,{inputType:"insertText"})&&(P1(n,"after column"),Eo(n,{inputType:"insertText"}),!0)}function v3(n,o){let t=n.at(n.position);for(;t&&!(Array.isArray(t.treeBranch)&&t.parent instanceof So);)t=t.parent;if(Array.isArray(t?.treeBranch)&&t?.parent instanceof So){let r,i=t.parent,a=t.treeBranch;switch(o){case"row":if(i.rowCount>1){i.removeRow(a[0]);let s=i.getCell(Math.max(0,a[0]-1),a[1]);r=n.offsetOf(s[s.length-1])}break;case"column":if(i.colCount>i.minColumns){i.removeColumn(a[1]);let s=i.getCell(a[0],Math.max(0,a[1]-1));r=n.offsetOf(s[s.length-1])}}r&&n.setPositionHandlingPlaceholder(r)}}function I_(n,o,t,i){var a,r,s,l,c,u;let m=t.parent;if(m&&t instanceof Wa){let p=!i&&"forward"===o||"body"===i&&"backward"===o,f=n.offsetOf(p?t.firstChild:t.lastChild);return p?"?"!==t.rightDelim&&"."!==t.rightDelim?(t.leftDelim=".",t.isDirty=!0):(m.addChildrenAfter(t.removeBranch("body"),t),m.removeChild(t),f--):"?"!==t.leftDelim&&"."!==t.leftDelim?(t.rightDelim=".",t.isDirty=!0):(m.addChildrenAfter(t.removeBranch("body"),t),m.removeChild(t),f--),n.position=f,!0}if(m&&"surd"===t.type){if("forward"===o&&!i||"backward"===o&&"body"===i){let p=t.leftSibling;t.hasChildren&&m.addChildrenAfter(t.removeBranch("body"),t),m.removeChild(t),n.position=n.offsetOf(p)}else"forward"===o&&"body"===i?n.position=n.offsetOf(t):i||"backward"!==o?"above"===i&&(t.hasEmptyBranch("above")&&t.removeBranch("above"),n.position=n.offsetOf("backward"===o?t.leftSibling:t.body[0])):t.hasChildren?n.position=n.offsetOf(t.lastChild):(n.position=Math.max(0,n.offsetOf(t)-1),m.removeChild(t));return!0}if(m&&("box"===t.type||"enclose"===t.type)){let p=i&&"backward"===o||!i&&"forward"===o?t.leftSibling:t.lastChild;return m.addChildrenAfter(t.removeBranch("body"),t),m.removeChild(t),n.position=n.offsetOf(p),!0}if("genfrac"===t.type||"overunder"===t.type){if(!i)return!("overunder"===t.type&&t.hasEmptyBranch("body")||"genfrac"===t.type&&t.hasEmptyBranch("below")&&t.hasEmptyBranch("above")||(n.position=n.offsetOf("forward"===o?t.firstChild:t.lastChild),0));let p="numerator-denominator"===t.context.fractionNavigationOrder?"above":"below",f="above"===p?"below":"above";if(m&&("forward"===o&&i===p||"backward"===o&&i===f)){let b=t.removeBranch(p),L=t.removeBranch(f);return m.addChildrenAfter([...b,...L],t),m.removeChild(t),n.position=n.offsetOf(b.length>0?b[b.length-1]:L[0]),!0}return n.position=n.offsetOf("backward"===o?t.leftSibling:t),!0}if(t.isExtensibleSymbol||"msubsup"===t.type){if(!i&&"forward"===o)return!1;if(!i){if(t.subscript||t.superscript){let p="forward"===o?null!=(s=null==(a=t.superscript)?void 0:a[0])?s:null==(r=t.subscript)?void 0:r[0]:null!=(u=null==(l=t.subscript)?void 0:l[0].lastSibling)?u:null==(c=t.superscript)?void 0:c[0].lastSibling;return p&&(n.position=n.offsetOf(p)),!0}return!1}if(i&&t.hasEmptyBranch(i)&&t.removeBranch(i),!t.hasChildren){let p="forward"===o?n.offsetOf(t):Math.max(0,n.offsetOf(t)-1);return t.parent.removeChild(t),n.position=p,!0}if("superscript"===i)if("backward"===o){let p=n.offsetOf(t.firstChild)-1;n.position=p}else n.position=n.offsetOf(t.subscript?t.subscript[0]:t);else"subscript"===i&&(n.position="backward"===o&&t.superscript?n.offsetOf(t.superscript[0].lastSibling):"backward"===o?n.offsetOf(t.firstChild)-1:n.offsetOf(t));return!0}if("genfrac"===m?.type&&!i&&"first"!==t.type){let p=n.offsetOf(t.leftSibling);return m.removeChild(t),m.hasEmptyBranch("above")&&m.hasEmptyBranch("below")?(p=n.offsetOf(m.leftSibling),m.parent.removeChild(m),n.announce("delete",void 0,[m]),n.position=p,!0):(n.announce("delete",void 0,[t]),n.position=p,!0)}return!1}function Sc(n,o,t){let i=n.getAtoms(o);if(i.length>0&&i[0].parent){let a=i[0].parent.firstChild;"first"===a.type&&(a=a.rightSibling);let s=i[0];if("first"===s.type&&(s=s.rightSibling),s===a&&i[i.length-1]===i[i.length-1].parent.lastChild){let c=i[0].parent;"root"!==c.type&&(o=[n.offsetOf(c.leftSibling),n.offsetOf(c.rightSibling)])}if(1===i.length&&"placeholder"===i[0].type&&"genfrac"===i[0].parent.type){let c=i[0].parent,u="below"===i[0].treeBranch?"above":"below",m=n.offsetOf(c.leftSibling);return n.deferNotifications({content:!0,selection:!0,type:t},()=>{var p,f;let b=c.removeBranch(u);if(1===b.length&&"placeholder"===b[0].type)null==(f=c.parent)||f.removeChild(c),n.position=Math.max(0,m);else{let L=c.parent.addChildrenAfter(b,c);null==(p=c.parent)||p.removeChild(c),n.position=n.offsetOf(L)}})}}return n.deferNotifications({content:!0,selection:!0,type:t},()=>n.deleteAtoms(o))}function w3(n,o){let i,t=n.at(o);if(t){i=t.mode;let a=t.parent;for(;!i&&a;)a&&(i=a.mode),a=a.parent}return i}function yd(n,o){!n||!o||(Ea(n)?n.forEach(t=>yd(t,o)):"object"==typeof n&&!n.style.color&&!n.style.backgroundColor&&!n.style.fontFamily&&!n.style.fontShape&&!n.style.fontSeries&&!n.style.fontSize&&!n.style.variant&&!n.style.variantStyle&&(n.applyStyle(o),yd(n.body,o),yd(n.above,o),yd(n.below,o),yd(n.subscript,o),yd(n.superscript,o)))}function ub(n,o,t,i){function a(s,l){for(let c of r)if(c.style[s]!==l)return!1;return!0}if((o=n.normalizeRange(o))[0]===o[1])return!1;let r=n.getAtoms(o,{includeChildren:!0});"toggle"===i.operation&&(t.color&&a("color",t.color)&&(t.color="none",t.verbatimColor=void 0),t.backgroundColor&&a("backgroundColor",t.backgroundColor)&&(t.backgroundColor="none",t.verbatimBackgroundColor=void 0),t.fontFamily&&a("fontFamily",t.fontFamily)&&(t.fontFamily="none"),t.fontSeries&&a("fontSeries",t.fontSeries)&&(t.fontSeries="auto"),t.fontShape&&a("fontShape",t.fontShape)&&(t.fontShape="auto"),t.fontSize&&a("fontSize",t.fontSize)&&(t.fontSize=ym));for(let s of r)s.applyStyle(t);return!0}function db(n,o,t){if("text"!==n.at(o).mode)return o;let a,i="backward"===t?-1:1;if(i1.test(n.at(o).value)){let s,r=o;do{s="text"===n.at(r).mode&&i1.test(n.at(r).value),r+=i}while(n.at(r)&&s);a=n.at(r)?r-2*i:r-i}else if(/\s/.test(n.at(o).value)){let r=o;for(;n.at(r)&&"text"===n.at(r).mode&&/\s/.test(n.at(r).value);)r+=i;if(n.at(r)){let s=!0;do{s="text"===n.at(r).mode&&!/\s/.test(n.at(r).value),r+=i}while(n.at(r)&&s);a=n.at(r)?r-2*i:r-i}else a=r-i}else{let r=o;for(;n.at(r)&&"text"===n.at(r).mode&&!/\s/.test(n.at(r).value);)r+=i;a=n.at(r)?r:r-i;let s=!0;for(;n.at(r)&&s;)s="text"===n.at(r).mode&&/\s/.test(n.at(r).value),s&&(a=r),r+=i;a=n.at(r)?r-2*i:r-i}return a-(i>0?0:1)}function xh(n,o,t){var i,a,r,s,l,c,u;let m=n.position;null!=(i=t?.extend)&&i||n.collapseSelection(o);let p=n.at(n.position);if("forward"===o&&("msubsup"===p.type?(p=p.rightSibling,p||(p=n.at(n.position+1))):p=n.at(n.position+1)),!p)return n.announce("plonk"),!1;let f=n.offsetOf(p);if(p instanceof mh)f=db(n,f,o);else if(p instanceof la)if(p.isSuggestion)for(;p&&p instanceof la;)p.isSuggestion=!1,f=n.offsetOf(p),p=p.rightSibling;else if("forward"===o){if(p=p.rightSibling,!(p&&p instanceof la))return n.announce("plonk"),!1;for(;p&&p instanceof la&&/[a-zA-Z\*]/.test(p.value);)f=n.offsetOf(p),p=p.rightSibling}else{if(p=p.leftSibling,!(p&&p instanceof la))return n.announce("plonk"),!1;for(;p&&p instanceof la&&/[a-zA-Z\*]/.test(p.value);)f=n.offsetOf(p),p=p.leftSibling}else if("forward"===o&&"mopen"===p.type){let b=0;do{"mopen"===p.type?b+=1:"mclose"===p.type&&(b-=1),p=p.rightSibling}while(!p.isLastSibling&&0!==b);f=n.offsetOf(p.leftSibling)}else if("backward"===o&&"mclose"===p.type){let b=0;do{"mopen"===p.type?b+=1:"mclose"===p.type&&(b-=1),p=p.leftSibling}while(!p.isFirstSibling&&0!==b);f=n.offsetOf(p)}else if("backward"===o)if("first"===p.type)for(;f>0&&"first"===p.type;)f-=1,p=n.at(f);else{let b=p.type;"msubsup"===p.type&&(f=n.offsetOf(n.at(f).leftSibling)),f-=1;let L=null==(a=n.at(f))?void 0:a.type;for(;f>=0&&L===b;)"msubsup"===(null==(r=n.at(f))?void 0:r.type)?f=n.offsetOf(n.at(f).leftSibling):f-=1,L=n.at(f).type}else{let{type:b}=p,L=null==(s=n.at(f))?void 0:s.type,{lastOffset:N}=n;for(;f<=N&&(L===b||"msubsup"===L);){for(;"msubsup"===(null==(l=n.at(f).rightSibling)?void 0:l.type);)f=n.offsetOf(n.at(f).rightSibling);f+=1,L=null==(c=n.at(f))?void 0:c.type}f-=1}if(null!=(u=t?.extend)&&u){if(!n.setSelection(n.anchor,f))return n.announce("plonk"),!1}else{if(f===n.position)return n.announce("plonk"),!1;n.position=f}return n.announce("move",m),!0}function vu(n,o,t){var i,a,r,s,l,c,u,m;if(t=t??{extend:!1},"forward"!==o){let[f,b]=s3(n);void 0!==f&&void 0!==b&&n.deleteAtoms([f,b])}if("upward"===o)return function nV(n,o){var t,i,a,r;let s=null!=(t=o?.extend)&&t;s||n.collapseSelection("backward");let l=n.at(n.position),c=l;for(;c&&"below"!==c.treeBranch&&!(Array.isArray(c.treeBranch)&&c.parent instanceof So);)c=c.parent;if(Array.isArray(c?.treeBranch)&&c.parent instanceof So){let u=c.parent,m=Math.max(0,c.treeBranch[0]-1);Q1(n,l,u.array[m][c.treeBranch[1]],s,"up")}else{if(!c){let u=!0;return n.suppressChangeNotifications||(u=null==(r=null==(a=n.mathfield.host)?void 0:a.dispatchEvent(new CustomEvent("move-out",{detail:{direction:"upward"},cancelable:!0,bubbles:!0,composed:!0})))||r),n.announce(u?"plonk":"line"),u}Q1(n,l,null!=(i=c.parent.branch("above"))?i:c.parent.createBranch("above"),s,"up")}return!0}(n,t);if("downward"===o)return function iV(n,o){var t,i,a,r;let s=null!=(t=o?.extend)&&t;s||n.collapseSelection("forward");let l=n.at(n.position),c=l;for(;c&&"above"!==c.treeBranch&&!(Array.isArray(c.treeBranch)&&c.parent instanceof So);)c=c.parent;if(Array.isArray(c?.treeBranch)&&c.parent instanceof So){let u=c.parent,m=Math.min(u.array.length-1,c.treeBranch[0]+1);Q1(n,l,u.array[m][c.treeBranch[1]],s,"down")}else{if(!c){let u=!0;return n.suppressChangeNotifications||(u=null==(r=null==(a=n.mathfield.host)?void 0:a.dispatchEvent(new CustomEvent("move-out",{detail:{direction:"downward"},cancelable:!0,bubbles:!0,composed:!0})))||r),n.announce(u?"plonk":"line"),u}Q1(n,l,null!=(i=c.parent.branch("below"))?i:c.parent.createBranch("below"),s,"down")}return!0}(n,t);let p=n.position;if(t.extend)return n.extendSelection(o);if(n.selectionIsPlaceholder)return n.collapseSelection(o),vu(n,o);if(!n.collapseSelection(o)){let f=n.position+("forward"===o?1:-1),b=n.at(f);if(f>=0&&f<=n.lastOffset)if("forward"===o)if(b.inCaptureSelection){for(;!b.captureSelection;)b=b.parent;f=n.offsetOf(b)}else if(!b.isFirstSibling&&b.isLastSibling&&null!=(i=b.parent)&&i.skipBoundary){if(f+1!==n.lastOffset)return n.position=f,vu(n,"forward",t);f+=1}else null!=(a=b.parent)&&a.skipBoundary&&null!=(r=b.rightSibling)&&r.isLastSibling?f+=2:null!=(s=b.parent)&&s.skipBoundary&&"first"===b.type?f+=1:b instanceof la&&b.isSuggestion&&(b.isSuggestion=!1);else if("backward"===o)if(null!=(l=b.parent)&&l.inCaptureSelection){for(;!b.captureSelection;)b=b.parent;f=Math.max(0,n.offsetOf(b.leftSibling))}else(b.skipBoundary||null!=(c=b.parent)&&c.skipBoundary&&"first"===b.type)&&(f=Math.max(0,n.position-2));if(f<0||f>n.lastOffset){let L=!0;return n.suppressChangeNotifications||(L=null==(m=null==(u=n.mathfield.host)?void 0:u.dispatchEvent(new CustomEvent("move-out",{detail:{direction:o},cancelable:!0,bubbles:!0,composed:!0})))||m),L&&n.announce("plonk"),L}n.setPositionHandlingPlaceholder(f)}return n.announce("move",p),!0}function Q1(n,o,t,i,a){let r=Yy(n.mathfield.getHTMLElement(o)).right,s=n.offsetOf(function tV(n,o,t){let i=1/0,a=0;for(;a<o.length;a++){let r=Yy(n.getHTMLElement(o[a])).right,s=Math.abs(t-r);if(!(s<=i))break;i=s}return o[a-1]}(n.mathfield,t,r));if(i){let u,[l,c]=n.selection.ranges[0];u=s<("up"===a?l:c)?{ranges:[[s,c]],direction:"backward"}:{ranges:[[l,s]],direction:"forward"},n.setSelection(u)}else n.setPositionHandlingPlaceholder(s);n.announce(`move ${a}`)}function y3(n){let o=n.position,t=n.at(o).parent;return t&&"root"!==t.type?(n.position=n.offsetOf(t),n.announce("move",o),!0):(n.announce("plonk"),!1)}function C3(n){var o;if(n.collapseSelection(),function oV(n){let o=0,t=n.at(n.position),i=!1;for(;t;)(!t.hasEmptyBranch("superscript")||!t.hasEmptyBranch("subscript"))&&(o+=1),t.hasEmptyBranch("superscript")?t.hasEmptyBranch("subscript")||(i=!1):i=!0,t=t.parent;return i?o:0}(n)>=n.mathfield.options.scriptDepth[1])return n.announce("plonk"),!1;let t=n.at(n.position);return void 0===t.subsupPlacement&&("msubsup"!==(null==(o=t.rightSibling)?void 0:o.type)&&t.parent.addChildAfter(new g_(n.mathfield,{style:t.computedStyle}),t),t=t.rightSibling),t.createBranch("superscript"),n.setSelection(n.getSiblingsRange(n.offsetOf(t.superscript[0]))),!0}function T3(n){var o;if(n.collapseSelection(),function aV(n){let o=0,t=n.at(n.position),i=!1;for(;t;)(!t.hasEmptyBranch("superscript")||!t.hasEmptyBranch("subscript"))&&(o+=1),t.hasEmptyBranch("superscript")?t.hasEmptyBranch("subscript")||(i=!0):i=!1,t=t.parent;return i?o:0}(n)>=n.mathfield.options.scriptDepth[0])return n.announce("plonk"),!1;let t=n.at(n.position);return void 0===t.subsupPlacement&&("msubsup"!==(null==(o=n.at(n.position+1))?void 0:o.type)&&t.parent.addChildAfter(new g_(n.mathfield,{style:n.at(n.position).computedStyle}),t),t=n.at(n.position+1)),t.createBranch("subscript"),n.setSelection(n.getSiblingsRange(n.offsetOf(t.subscript[0]))),!0}function k3(n,o,t=!0){var i,a;let r="forward"===o?1:-1;"placeholder"===n.at(n.anchor).type&&vu(n,o);let s=n.getAllAtoms(Math.max(n.position+r,0));"backward"===o&&s.reverse();let l=s.filter(p=>"placeholder"===p.type||p.treeDepth>2&&p.isFirstSibling&&p.isLastSibling);if(0===l.length){if(!t||null!=(a=null==(i=n.mathfield.host)?void 0:i.dispatchEvent(new CustomEvent("focus-out",{detail:{direction:o},cancelable:!0,bubbles:!0,composed:!0})))&&!a)return n.announce("plonk"),!1;let p=function rV(){function o(c){return!(!function t(c){return!(c.disabled||"hidden"===c.type&&"INPUT"===c.tagName.toUpperCase()||function l(c){if(!As()||c===document.activeElement||c.contains(document.activeElement))return!1;if("hidden"===getComputedStyle(c).visibility)return!0;let u=c.getBoundingClientRect();if(0===u.width||0===u.height)return!0;for(;c;){if("none"===getComputedStyle(c).display)return!0;c=c.parentElement}return!1}(c))}(c)||function a(c){return"INPUT"===c.tagName.toUpperCase()&&"radio"===c.type&&!function s(c){var u;if(!c.name)return!0;let p=function r(c,u){for(let m of c)if(m.checked&&m.form===u)return m;return null}((null!=(u=c.form)?u:c.ownerDocument).querySelectorAll('input[type="radio"][name="'+c.name+'"]'),c.form);return!p||p===c}(c)}(c)||i(c)<0)}function i(c){var u;let m=Number.parseInt(null!=(u=c.getAttribute("tabindex"))?u:"NaN",10);return Number.isNaN(m)?"true"===c.contentEditable||("AUDIO"===c.nodeName||"VIDEO"===c.nodeName)&&null===c.getAttribute("tabindex")?0:c.tabIndex:m}return As()?function n(c){let u=[],m=[];return[...c.querySelectorAll('input, select, textarea, a[href], button,\n        [tabindex], audio[controls], video[controls],\n        [contenteditable]:not([contenteditable="false"]), details>summary')].filter(o).forEach((p,f)=>{let b=i(p);0===b?u.push(p):m.push({documentOrder:f,tabIndex:b,node:p})}),m.sort((p,f)=>p.tabIndex===f.tabIndex?p.documentOrder-f.documentOrder:p.tabIndex-f.tabIndex).map(p=>p.node).concat(u)}(document.body):[]}();if(!document.activeElement||1===p.length)return n.announce("plonk"),!1;let f=p.indexOf(document.activeElement)+r;return!!(document.activeElement instanceof Tb&&c(document.activeElement,o,r)||(f<0&&(f=p.length-1),f>=p.length&&(f=0),p[f]instanceof Tb&&c(p[f],o,r)))||(p[f].focus(),0!==f||(n.announce("plonk"),!1))}function c(p,f,b){var L,N,R;let j=[...null!=(N=null==(L=p.shadowRoot)?void 0:L.querySelectorAll("math-field"))?N:[]];if(j.length){let G=null==(R=p.shadowRoot)?void 0:R.activeElement,ae=j.indexOf(G),W=ae+b;if(ae<0&&"backward"===f&&(W=j.length-1),W>=0&&W<j.length)return j[W].focus(),!0}return!1}let u=n.position,m=n.offsetOf(l[0]);return"placeholder"===l[0].type?n.setSelection(m-1,m):n.position=m,n.announce("move",u),!0}function S3(n){var o,t,i,a,r,s;if("text"===w3(n,n.position)){let l=Math.min(n.anchor,n.position),c=Math.max(n.anchor,n.position),u=!1;for(;!u&&l>0;){let m=n.at(l);"text"===m.mode&&i1.test(m.value)?l-=1:u=!0}for(u=!1;!u&&c<=n.lastOffset;){let m=n.at(c);"text"===m.mode&&i1.test(m.value)?c+=1:u=!0}if(u&&(c-=1),l>=c)return n.setSelection(c-1,c),!0;n.setSelection(l,c)}else{let l=n.at(n.position);if(l.isDigit()){let c=Math.min(n.anchor,n.position),u=Math.max(n.anchor,n.position);for(;null!=(o=n.at(c))&&o.isDigit();)c-=1;for(;null!=(t=n.at(u))&&t.isDigit();)u+=1;n.setSelection(c,u-1)}else if(l.style.variant||l.style.variantStyle){let c=Math.min(n.anchor,n.position),u=Math.max(n.anchor,n.position),m=null==(i=n.at(c))?void 0:i.style;for(;m&&m.variant===l.style.variant&&m.variantStyle===l.style.variantStyle;)c-=1,m=null==(a=n.at(c))?void 0:a.style;for(m=null==(r=n.at(u))?void 0:r.style;m&&m.variant===l.style.variant&&m.variantStyle===l.style.variantStyle;)u+=1,m=null==(s=n.at(u))?void 0:s.style;n.setSelection(c,u-1)}else n.setSelection(n.offsetOf(l.firstSibling),n.offsetOf(l.lastSibling))}return!0}Er({addRowAfter:x3,addColumnAfter:b3,addRowBefore:function K$(n){return!!Co(n,{inputType:"insertText"})&&(P1(n,"before row"),Eo(n,{inputType:"insertText"}),!0)},addColumnBefore:function G$(n){return!!Co(n,{inputType:"insertText"})&&(P1(n,"before column"),Eo(n,{inputType:"insertText"}),!0)},removeRow:function Y$(n){return!!Co(n,{inputType:"deleteContent"})&&(v3(n,"row"),Eo(n,{inputType:"deleteContent"}),!0)},removeColumn:function $$(n){return!!Co(n,{inputType:"deleteContent"})&&(v3(n,"column"),Eo(n,{inputType:"deleteContent"}),!0)}},{target:"model",category:"array-edit"}),Er({deleteAll:n=>Co(n,{inputType:"deleteContent"})&&Sc(n,[0,-1],"deleteContent"),deleteForward:n=>function W$(n){return!!Co(n,{inputType:"deleteContentForward"})&&(n.selectionIsCollapsed?n.deferNotifications({content:!0,selection:!0,type:"deleteContentForward"},()=>{var o,t;let i=n.at(n.position).rightSibling;if(i&&I_(n,"forward",i))return;if(i){if(n.at(n.position).isLastSibling&&I_(n,"forward",i.parent,i.treeBranch))return}else{if(i=n.at(n.position),i.isLastSibling&&I_(n,"forward",i.parent,i.treeBranch))return;i=void 0}if(n.position===n.lastOffset||!i)return void n.announce("plonk");i.parent.removeChild(i);let a=null==(o=n.at(n.position))?void 0:o.rightSibling;for(;"msubsup"===a?.type;)a.parent.removeChild(a),a=null==(t=n.at(n.position))?void 0:t.rightSibling;n.announce("delete",void 0,[i])}):Sc(n,Vs(n.selection),"deleteContentForward"))}(n),deleteBackward:n=>function V$(n){return!!Co(n,{inputType:"deleteContentBackward"})&&(n.selectionIsCollapsed?n.deferNotifications({content:!0,selection:!0,type:"deleteContentBackward"},()=>{let o=n.at(n.position);if(!o||!I_(n,"backward",o)){if(null!=o&&o.isFirstSibling){if(I_(n,"backward",o.parent,o.treeBranch))return;o=null}if(!o)return void n.announce("plonk");n.position=n.offsetOf(o.leftSibling),o.parent.removeChild(o),n.announce("delete",void 0,[o])}}):Sc(n,Vs(n.selection),"deleteContentBackward"))}(n),deleteNextWord:n=>Co(n,{inputType:"deleteWordForward"})&&Sc(n,[n.anchor,db(n,n.position,"forward")],"deleteWordForward"),deletePreviousWord:n=>Co(n,{inputType:"deleteWordBackward"})&&Sc(n,[n.anchor,db(n,n.position,"backward")],"deleteWordBackward"),deleteToGroupStart:n=>Co(n,{inputType:"deleteSoftLineBackward"})&&Sc(n,[n.anchor,n.offsetOf(n.at(n.position).firstSibling)],"deleteSoftLineBackward"),deleteToGroupEnd:n=>Co(n,{inputType:"deleteSoftLineForward"})&&Sc(n,[n.anchor,n.offsetOf(n.at(n.position).lastSibling)],"deleteSoftLineForward"),deleteToMathFieldStart:n=>Co(n,{inputType:"deleteHardLineBackward"})&&Sc(n,[n.anchor,0],"deleteHardLineBackward"),deleteToMathFieldEnd:n=>Co(n,{inputType:"deleteHardLineForward"})&&Sc(n,[n.anchor,-1],"deleteHardLineForward")},{target:"model",category:"delete"}),Er({moveToOpposite:n=>{let t=n.at(n.position),{parent:i}=t;if(!i)return n.announce("plonk"),!1;let r,a=t.treeBranch;return"string"==typeof a&&(r={superscript:"subscript",subscript:"superscript",above:"below",below:"above"}[a]),r?(i.branch(r)||i.createBranch(r),n.setSelection(n.getBranchRange(n.offsetOf(i),r))):t.subsupPlacement?T3(n):C3(n)},moveBeforeParent:n=>{let{parent:o}=n.at(n.position);return o?(n.position=n.offsetOf(o),!0):(n.announce("plonk"),!1)},moveAfterParent:n=>y3(n),moveToNextPlaceholder:n=>k3(n,"forward"),moveToPreviousPlaceholder:n=>k3(n,"backward"),moveToNextChar:n=>vu(n,"forward"),moveToPreviousChar:n=>vu(n,"backward"),moveUp:n=>vu(n,"upward"),moveDown:n=>vu(n,"downward"),moveToNextWord:n=>xh(n,"forward"),moveToPreviousWord:n=>xh(n,"backward"),moveToGroupStart:n=>{let o=n.offsetOf(n.at(n.position).firstSibling);return o===n.position?(n.announce("plonk"),!1):(n.position=o,!0)},moveToGroupEnd:n=>{let o=n.offsetOf(n.at(n.position).lastSibling);return o===n.position?(n.announce("plonk"),!1):(n.position=o,!0)},moveToMathfieldStart:n=>0===n.position?(n.announce("plonk"),!1):(n.position=0,!0),moveToMathfieldEnd:n=>n.position===n.lastOffset?(n.announce("plonk"),!1):(n.position=n.lastOffset,!0),moveToSuperscript:n=>C3(n),moveToSubscript:n=>T3(n)},{target:"model",category:"selection-anchor"}),Er({selectGroup:n=>{let o=S3(n);return o||n.announce("plonk"),o},selectAll:n=>n.setSelection(0,n.lastOffset),extendSelectionForward:n=>{let o=n.extendSelection("forward");return o||n.announce("plonk"),o},extendSelectionBackward:n=>{let o=n.extendSelection("backward");return o||n.announce("plonk"),o},extendToNextWord:n=>xh(n,"forward",{extend:!0}),extendToPreviousWord:n=>xh(n,"backward",{extend:!0}),extendSelectionUpward:n=>vu(n,"upward",{extend:!0}),extendSelectionDownward:n=>vu(n,"downward",{extend:!0}),extendToNextBoundary:n=>xh(n,"forward",{extend:!0}),extendToPreviousBoundary:n=>xh(n,"backward",{extend:!0}),extendToGroupStart:n=>{let o=n.setSelection(n.anchor,n.offsetOf(n.at(n.position).firstSibling));return o||n.announce("plonk"),o},extendToGroupEnd:n=>{let o=n.setSelection(n.anchor,n.offsetOf(n.at(n.position).lastSibling));return o||n.announce("plonk"),o},extendToMathFieldStart:n=>{let o=n.setSelection(n.anchor,0);return o||n.announce("plonk"),o},extendToMathFieldEnd:n=>{let o=n.setSelection(n.anchor,n.lastOffset);return o||n.announce("plonk"),o}},{target:"model",category:"selection-extend"});var bh=class{constructor(n){var o,t;this.preventOverlayClose=null!=(o=n?.preventOverlayClose)&&o,this.translucent=null!=(t=n?.translucent)&&t,this.state="closed"}get element(){if(this._element)return this._element;let n=document.createElement("div");return n.setAttribute("role","presentation"),n.style.position="fixed",n.style.contain="content",n.style.top="0",n.style.left="0",n.style.right="0",n.style.bottom="0",n.style.zIndex="var(--scrim-zindex, 10099)",n.style.outline="none",this.translucent?(n.style.background="rgba(255, 255, 255, .2)",n.style.backdropFilter="contrast(40%)"):n.style.background="transparent",this._element=n,n}open(n){var o;if("closed"!==this.state)return;this.state="opening",this.savedActiveElement=E3();let{element:t}=this;(null!=(o=n?.root)?o:document.body).appendChild(t),t.addEventListener("click",this),document.addEventListener("touchmove",this,!1),document.addEventListener("scroll",this,!1);let i=window.innerWidth-document.documentElement.clientWidth;this.savedMarginRight=document.body.style.marginRight,this.savedOverflow=document.body.style.overflow,document.body.style.overflow="hidden";let a=Number.parseFloat(getComputedStyle(document.body).marginRight);document.body.style.marginRight=`${a+i}px`,null!=n&&n.child&&t.append(n.child),this.state="open"}close(){var n,o,t,i;if("open"!==this.state)return;this.state="closing","function"==typeof this.onClose&&this.onClose();let{element:a}=this;a.removeEventListener("click",this),document.removeEventListener("touchmove",this,!1),document.removeEventListener("scroll",this,!1),a.remove(),document.body.style.overflow=null!=(n=this.savedOverflow)?n:"",document.body.style.marginRight=null!=(o=this.savedMarginRight)?o:"",E3()!==this.savedActiveElement&&(null==(i=null==(t=this.savedActiveElement)?void 0:t.focus)||i.call(t)),a.innerHTML="",this.state="closed"}handleEvent(n){this.preventOverlayClose||(n.target===this._element&&"click"===n.type||n.target===document&&("touchmove"===n.type||"scroll"===n.type))&&(this.close(),n.preventDefault(),n.stopPropagation())}};function E3(){var n;let o=document.activeElement;for(;null!=(n=o?.shadowRoot)&&n.activeElement;)o=o.shadowRoot.activeElement;return o}var sV=new Set(["Backquote","Digit0","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","Minus","Equal","IntlYen","KeyQ","KeyW","KeyE","KeyR","KeyT","KeyY","KeyU","KeyI","KeyO","KeyP","BracketLeft","BracketRight","Backslash","KeyA","KeyS","KeyD","KeyF","KeyG","KeyH","KeyJ","KeyK","KeyL","Semicolon","Quote","IntlBackslash","KeyZ","KeyX","KeyC","KeyV","KeyB","KeyN","KeyM","Comma","Period","Slash","IntlRo","Space","Numpad0","Numpad1","Numpad2","Numpad3","Numpad4","Numpad5","Numpad6","Numpad7","Numpad8","Numpad9","NumpadAdd","NumpadComma","NumpadDecimal","NumpadDivide","NumpadEqual","NumpadHash","NumpadMultiply","NumpadParenLeft","NumpadParenRight","NumpadStar","NumpadSubstract"]);function O3(n){return!n.ctrlKey&&!n.metaKey&&"Dead"!==n.key&&(""===n.code||sV.has(n.code))}function I3(n){n=function _$(n){if(n.code)return n;let o=Object.entries(T_().mapping),t=!1,i=!1,a="";for(let r=0;r<4;r++){for(let[s,l]of o)if(l[r]===n.key){a=s,3===r?(t=!0,i=!0):2===r?t=!0:1===r&&(i=!0);break}if(a)break}return new KeyboardEvent(n.type,mi(Et({},n),{altKey:t,shiftKey:i,code:a}))}(n);let o=[];return n.ctrlKey&&o.push("ctrl"),n.metaKey&&o.push("meta"),n.altKey&&o.push("alt"),n.shiftKey&&o.push("shift"),0===o.length?"["+n.code+"]":(o.push("["+n.code+"]"),o.join("+"))}function F1(n){var o;if(!n)return"";let t;return"Unidentified"===n.key&&n.target&&(t=n.target.value),t=null!=(o=t??n.key)?o:n.code,/^(Dead|Return|Enter|Tab|Escape|Delete|PageUp|PageDown|Home|End|Help|ArrowLeft|ArrowRight|ArrowUp|ArrowDown)$/.test(t)&&(t=""),t}var mb,M3=".ML__keyboard{--hue:206;--keyboard-background:rgba(209, 213, 217);--keyboard-text:#000;--keyboard-text-active:var(--primary, hsl(var(--hue), 40%, 50%));--keyboard-background-border:#ddd;--keycap-background:white;--keycap-background-active:#e5e5e5;--keycap-background-border:#e5e6e9;--keycap-background-border-bottom:#8d8f92;--keycap-text:#000;--keycap-text-active:#fff;--keycap-secondary-text:#000;--keycap-modifier-background:#b9bdc7;--keycap-modifier-border:#c5c9d0;--keycap-modifier-border-bottom:#989da6;--keyboard-alternate-background:#fff;--keyboard-alternate-background-active:var(--primary, hsl(var(--hue), 40%, 50%));--keyboard-alternate-text:var(--keycap-text, #000);--keyboard-alternate-text-active:#fff;--keyboard-alternate-key-length:70px;--keyboard-alternate-key-font-size:30px;--keyboard-alternate-key-aside-font-size:12px;--keyboard-height:calc(276px + env(safe-area-inset-bottom, 0));--keycap-height:52px;--keycap-font-size:20px;--keycap-small-font-size:calc(var(--keycap-font-size) * .8);--keycap-extra-small-font-size:calc(var(--keycap-font-size) / 1.42);--keycap-tt-font-size:calc(var(--keycap-font-size) * 1.5);position:fixed;top:0;left:0;height:100%;width:100%;z-index:var(--keyboard-zindex, 105);pointer-events:none}.ML__keyboard.is-visible .ML__keyboard--plate{transform:translate(0, calc(-1 * var(--keyboard-height, 276px)));opacity:1;visibility:visible;transition-timing-function:cubic-bezier(.4, 0, 1, 1)}.ML__keyboard.alternate-keys{visibility:hidden;max-width:286px;background-color:var(--keyboard-alternate-background);text-align:center;border-radius:6px;position:fixed;bottom:auto;top:0;box-sizing:content-box;transform:none;z-index:calc(var(--keyboard-zindex, 105) + 1);display:flex;flex-direction:row;justify-content:center;align-content:center;box-shadow:0 14px 28px rgba(0,0,0,0.25),0 10px 10px rgba(0,0,0,0.22);transition:none}@media (max-width: 414px){.ML__keyboard.alternate-keys{max-width:320px}}.ML__keyboard.alternate-keys.is-visible{visibility:visible}.ML__keyboard.alternate-keys.compact{--keyboard-alternate-key-length:50px;--keyboard-alternate-key-font-size:24px;--keyboard-alternate-key-aside-font-size:10px}.ML__keyboard.alternate-keys ul{list-style:none;margin:3px;padding:0;display:flex;flex-flow:row wrap-reverse;justify-content:center}.ML__keyboard.alternate-keys ul>li{display:flex;flex-flow:column;align-items:center;justify-content:center;font-size:var(--keyboard-alternate-key-font-size);height:var(--keyboard-alternate-key-length);width:var(--keyboard-alternate-key-length);box-sizing:border-box;margin:0;background:transparent;border:1px solid transparent;border-radius:5px;pointer-events:all;cursor:pointer;color:var(--keyboard-alternate-text);fill:currentColor}@media (max-height:412px){.ML__keyboard.alternate-keys ul>li{font-size:24px;height:50px;width:50px}}.ML__keyboard.alternate-keys ul>li .ML__mathlive{pointer-events:none}.ML__keyboard.alternate-keys ul>li:hover,.ML__keyboard.alternate-keys ul>li.is-pressed,.ML__keyboard.alternate-keys ul>li.is-active{background:var(--keyboard-alternate-background-active);color:var(--keyboard-alternate-text-active)}.ML__keyboard.alternate-keys ul>li.small{font-size:var(--keycap-small-font-size, 16px)}.ML__keyboard.alternate-keys ul>li.small-button{width:42px;height:42px;margin:2px;background:#fbfbfb}.ML__keyboard.alternate-keys ul>li.small-button:hover{background:var(--keyboard-alternate-background-active)}.ML__keyboard.alternate-keys ul>li.box>div,.ML__keyboard.alternate-keys ul>li.box>span{border:1px dashed rgba(0,0,0,0.24)}.ML__keyboard.alternate-keys ul>li .warning{min-height:60px;min-width:60px;background:#cd0030;color:white;padding:5px;display:flex;align-items:center;justify-content:center;border-radius:5px}.ML__keyboard.alternate-keys ul>li .warning:hover,.ML__keyboard.alternate-keys ul>li .warning.is-pressed,.ML__keyboard.alternate-keys ul>li .warning.is-active{background:red}.ML__keyboard.alternate-keys ul>li .warning svg.svg-glyph{width:50px;height:50px}.ML__keyboard.alternate-keys ul>li aside{font-size:var(--keyboard-alternate-key-aside-font-size);line-height:12px;opacity:.78;padding-top:2px}.ML__keyboard .ML__keyboard--plate{position:absolute;left:0;bottom:calc(-1 * var(--keyboard-height, 276px));width:100%;margin:0;padding-bottom:env(safe-area-inset-bottom, 0);padding-top:5px;transform:translate(0, 0);opacity:0;visibility:hidden;transition:.28s cubic-bezier(0, 0, .2, 1);transition-property:transform, opacity;touch-action:none;-webkit-user-select:none;user-select:none;pointer-events:all;background-color:var(--keyboard-background);border-top:1px solid var(--keyboard-background-border);font-family:system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI','Roboto','Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue',sans-serif;font-size:16px;font-weight:400;box-sizing:border-box;text-shadow:none;box-shadow:0 3px 6px rgba(0,0,0,0.16),0 3px 6px rgba(0,0,0,0.23)}.ML__keyboard .ML__keyboard--plate .tex{font-family:'KaTeX_Math',KaTeX_Main,'Cambria Math','Asana Math',OpenSymbol,Symbola,STIX,Times,serif !important}.ML__keyboard .ML__keyboard--plate .tex-math{font-family:KaTeX_Math,'Cambria Math','Asana Math',OpenSymbol,Symbola,STIX,Times,serif !important}.ML__keyboard .ML__keyboard--plate .tt{font-family:'IBM Plex Mono','Source Code Pro',Consolas,'Roboto Mono',Menlo,'Bitstream Vera Sans Mono','DejaVu Sans Mono',Monaco,Courier,monospace !important;font-size:var(--keycap-tt-font-size, 30px);font-weight:400}.ML__keyboard .ML__keyboard--plate>div.keyboard-layer{display:none;outline:none}.ML__keyboard .ML__keyboard--plate>div.keyboard-layer.is-visible{display:flex;flex-flow:column}.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar{align-self:center;display:flex;flex-flow:row;justify-content:space-between;width:100%;min-width:736px;max-width:766px}.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar svg{height:20px;width:20px}@media (max-width: 1024px){.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar{min-width:556px}}@media (max-width: 744px){.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar{width:365px;min-width:365px;max-width:100vw}.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar svg{height:13px;width:17px}}.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar>.left{position:relative;display:flex;justify-content:flex-start;flex-flow:row}.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar>.right{display:flex;justify-content:flex-end;flex-flow:row}.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar>div>div{display:flex;align-items:baseline;justify-content:center;color:var(--keyboard-text);fill:currentColor;background:0;font-size:110%;padding:4px 15px;cursor:pointer;min-height:0;width:max-content;border:none;padding-left:10px;padding-right:10px;margin-top:7px;margin-bottom:8px;margin-left:4px;margin-right:4px;box-shadow:none;border-bottom:2px solid transparent}.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar>div>div.disabled svg,.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar>div>div.disabled:hover svg,.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar>div>div.disabled.is-pressed svg{color:var(--keyboard-text);opacity:.2}@media (max-width: 414px){.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar>div>div{font-size:100%;padding:0 6px 0 0}}@media (max-width: 744px){.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar>div>div{padding-left:4px;padding-right:4px;font-size:90%}}.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar>div>div:hover,.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar>div>div:active,.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar>div>div.is-pressed,.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar>div>div.is-active{color:var(--keyboard-text-active)}.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar>div>div.selected{color:var(--keyboard-text-active);border-bottom-color:var(--keyboard-text-active);padding-bottom:0}.ML__keyboard .ML__keyboard--plate [data-tooltip]{position:relative}.ML__keyboard .ML__keyboard--plate [data-tooltip]::after{position:absolute;display:inline-table;content:attr(data-tooltip);top:inherit;bottom:100%;width:max-content;max-width:200px;padding:8px 8px;background:#616161;color:#fff;text-align:center;z-index:2;box-shadow:0 2px 2px 0 rgba(0,0,0,0.14),0 1px 5px 0 rgba(0,0,0,0.12),0 3px 1px -2px rgba(0,0,0,0.2);border-radius:2px;font-family:system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI','Roboto','Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue',sans-serif;font-weight:400;font-size:12px;transition:all .15s cubic-bezier(.4, 0, 1, 1) 1s;opacity:0;transform:scale(.5)}@media (max-width: 744px){.ML__keyboard .ML__keyboard--plate [data-tooltip]::after{padding:8px 16px;font-size:16px}}.ML__keyboard .ML__keyboard--plate [data-tooltip]:hover{position:relative}.ML__keyboard .ML__keyboard--plate [data-tooltip]:hover::after{opacity:1;transform:scale(1)}.ML__keyboard .ML__keyboard--plate div .rows{border:0;border-collapse:separate;clear:both;margin:auto;display:flex;flex-flow:column;align-items:center}.ML__keyboard .ML__keyboard--plate div .rows>ul{display:flex;flex-flow:row;max-width:100vw;list-style:none;height:var(--keycap-height, 52px);margin:0 0 3px 0;padding:0}.ML__keyboard .ML__keyboard--plate div .rows>ul>li{display:flex;flex-flow:column;align-items:center;justify-content:center;--max-width:100px;--margin:6px;margin-right:var(--margin);width:calc(min(var(--max-width), 10vw) - var(--margin));height:var(--keycap-height, 52px);box-sizing:border-box;padding:0;vertical-align:top;text-align:center;float:left;color:var(--keycap-text);fill:currentColor;font-size:var(--keycap-font-size, 20px);background:var(--keycap-background);border:1px solid var(--keycap-background-border);border-bottom-color:var(--keycap-background-border-bottom);border-radius:5px;cursor:pointer;position:relative;overflow:hidden;-webkit-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent}.ML__keyboard .ML__keyboard--plate div .rows>ul>li .ML__mathlive{pointer-events:none}.ML__keyboard .ML__keyboard--plate div .rows>ul>li:last-child{margin-right:0}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.small{font-size:var(--keycap-small-font-size, 16px)}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.tt{color:var(--keyboard-text-active)}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.bottom{justify-content:flex-end}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.left{align-items:flex-start;padding-left:4px}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.right{align-items:flex-end;padding-right:4px}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.w0{width:0}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.w5{width:calc(min(var(--max-width), 10vw) / 2 - var(--margin))}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.w15{width:calc(15 * min(var(--max-width), 10vw) / 10 - var(--margin))}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.w20{width:calc(20 * min(var(--max-width), 10vw) / 10 - var(--margin))}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.w50{width:calc(50 * min(var(--max-width), 10vw) / 10 - var(--margin))}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.separator{background:transparent;border:none;pointer-events:none}.ML__keyboard .ML__keyboard--plate div .rows>ul>li svg.svg-glyph{padding:8px 0;width:20px;height:20px}.ML__keyboard .ML__keyboard--plate div .rows>ul>li .warning{height:25px;width:25px;min-height:25px;min-width:25px;background:#cd0030;color:white;border-radius:100%;padding:5px;display:flex;align-items:center;justify-content:center;margin-bottom:-2px}.ML__keyboard .ML__keyboard--plate div .rows>ul>li .warning svg.svg-glyph{width:16px;height:16px}@media (max-width: 744px){.ML__keyboard .ML__keyboard--plate div .rows>ul>li .warning{height:16px;width:16px;min-height:16px;min-width:16px}.ML__keyboard .ML__keyboard--plate div .rows>ul>li .warning svg.svg-glyph{width:14px;height:14px}}@media (max-width: 1024px){.ML__keyboard .ML__keyboard--plate div .rows>ul>li.if-wide{display:none}}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.tex-math{font-size:25px}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.is-pressed{background:var(--keycap-background-active);color:var(--keyboard-text-active)}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.keycap.is-active,.ML__keyboard .ML__keyboard--plate div .rows>ul>li.action.is-active{transform:translateY(calc(-0.2 * var(--keycap-height, 52px))) scale(1.4, 1.4);z-index:calc(var(--keyboard-zindex, 105) - 5);color:var(--keyboard-text-active)}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.modifier.is-active{background:var(--keyboard-text-active);color:var(--keycap-text-active)}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.action.font-glyph,.ML__keyboard .ML__keyboard--plate div .rows>ul>li.modifier.font-glyph{font-size:18px}@media (max-width: 744px){.ML__keyboard .ML__keyboard--plate div .rows>ul>li.action.font-glyph,.ML__keyboard .ML__keyboard--plate div .rows>ul>li.modifier.font-glyph{font-size:16px}}@media (max-width: 744px){.ML__keyboard .ML__keyboard--plate div .rows>ul>li.fnbutton{font-size:12px}}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.bigfnbutton{font-size:var(--keycap-extra-small-font-size, 14px)}@media (max-width: 744px){.ML__keyboard .ML__keyboard--plate div .rows>ul>li.bigfnbutton{font-size:calc(var(--keycap-extra-small-font-size, 14px) / 1.55)}}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.modifier,.ML__keyboard .ML__keyboard--plate div .rows>ul>li.action{background-color:var(--keycap-modifier-background);border-color:var(--keycap-modifier-border);border-bottom-color:var(--keycap-modifier-border-bottom);font-size:65%;font-weight:100}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.modifier.selected,.ML__keyboard .ML__keyboard--plate div .rows>ul>li.action.selected{color:var(--keyboard-text-active)}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.modifier.selected:hover,.ML__keyboard .ML__keyboard--plate div .rows>ul>li.action.selected:hover,.ML__keyboard .ML__keyboard--plate div .rows>ul>li.modifier.selected:active,.ML__keyboard .ML__keyboard--plate div .rows>ul>li.action.selected:active,.ML__keyboard .ML__keyboard--plate div .rows>ul>li.modifier.selected.is-pressed,.ML__keyboard .ML__keyboard--plate div .rows>ul>li.action.selected.is-pressed,.ML__keyboard .ML__keyboard--plate div .rows>ul>li.modifier.selected.is-active,.ML__keyboard .ML__keyboard--plate div .rows>ul>li.action.selected.is-active{color:white}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.keycap.w50{font-size:80%;padding-top:10px;font-weight:100}.ML__keyboard .ML__keyboard--plate div .rows>ul>li small{color:var(--keycap-secondary-text)}@media (max-width: 744px){.ML__keyboard .ML__keyboard--plate div .rows>ul>li small{font-size:9px}}.ML__keyboard .ML__keyboard--plate div .rows>ul>li aside{font-family:system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI','Roboto','Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue',sans-serif;font-size:10px;line-height:10px;color:var(--keycap-secondary-text)}@media (max-width: 744px){.ML__keyboard .ML__keyboard--plate div .rows>ul>li aside{display:none}}@media (max-width: 768px){.ML__keyboard .ML__keyboard--plate div .rows>ul>li{--margin:2px;--max-width:74px;--width:34px;min-width:34px}}@media (max-width: 414px){.ML__keyboard .ML__keyboard--plate div .rows>ul{height:40px}.ML__keyboard .ML__keyboard--plate div .rows>ul>li{width:calc(10vw - 2px);height:40px}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.w5{width:calc(5vw - 2px)}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.w15{width:calc(15vw - 2px)}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.w20{width:calc(20vw - 2px)}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.w50{width:calc(50vw - 2px)}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.separator{width:2px;min-width:2px}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.modifier,.ML__keyboard .ML__keyboard--plate div .rows>ul>li.action{font-size:65%}}@media (prefers-color-scheme:dark){.ML__keyboard{--hue:206;--keyboard-background:#0c0c0c;--keyboard-text:#f0f0f0;--keyboard-text-active:hsl(var(--hue), 100%, 60%);--keyboard-background-border:hsl(0,0%,10%);--keycap-background:#555555;--keycap-background-active:hsl(var(--hue), 35%, 42%);--keycap-background-border:transparent;--keycap-background-border-bottom:transparent;--keycap-text:hsl(0,0%,81.6%);--keycap-text-active:#000;--keycap-secondary-text:#fff;--keycap-modifier-background:#303030;--keycap-modifier-border:transparent;--keycap-modifier-border-bottom:transparent;--keyboard-alternate-background:#303030}}body[theme='dark'] .ML__keyboard{--hue:206;--keyboard-background:#0c0c0c;--keyboard-text:#f0f0f0;--keyboard-text-active:hsl(var(--hue), 100%, 60%);--keyboard-background-border:hsl(0,0%,10%);--keycap-background:#555555;--keycap-background-active:hsl(var(--hue), 35%, 42%);--keycap-background-border:transparent;--keycap-background-border-bottom:transparent;--keycap-text:hsl(0,0%,81.6%);--keycap-text-active:#000;--keycap-secondary-text:#fff;--keycap-modifier-background:#303030;--keycap-modifier-border:transparent;--keycap-modifier-border-bottom:transparent;--keyboard-alternate-background:hsl(var(--hue), 19%, 38%)}";function N1(n,o,t){let i,a;t.default&&(n.dataset.command=JSON.stringify(t.default)),t.alt&&(n.dataset.commandAlt=JSON.stringify(t.alt)),t.shift&&(n.dataset.commandShift=JSON.stringify(t.shift)),t.pressed&&(n.dataset.commandPressed=JSON.stringify(t.pressed)),t.pressAndHoldStart&&(n.dataset.commandPressAndHoldStart=JSON.stringify(t.pressAndHoldStart)),t.pressAndHoldEnd&&(n.dataset.commandPressAndHoldEnd=JSON.stringify(t.pressAndHoldEnd)),yl(n,"pointerdown:passive",r=>{if(1!==r.buttons)return;r.stopPropagation(),i=Date.now(),n.classList.add("is-pressed");let s=r.target;s.hasPointerCapture(r.pointerId)&&s.releasePointerCapture(r.pointerId);let l=n.getAttribute("data-command-pressed");l&&o(JSON.parse(l));let c=n.getAttribute("data-command-press-and-hold-start");c&&(a&&clearTimeout(a),a=setTimeout(()=>{n.classList.contains("is-pressed")&&(n.classList.remove("is-pressed"),o(JSON.parse(c)))},300))}),yl(n,"pointerenter",r=>{let s=r.target;s.hasPointerCapture(r.pointerId)&&s.releasePointerCapture(r.pointerId),1===r.buttons&&n.classList.add("is-pressed")}),yl(n,"pointercancel",()=>n.classList.remove("is-pressed")),yl(n,"pointerleave",()=>n.classList.remove("is-pressed")),yl(n,"pointerup",r=>{let s=n.classList.contains("is-pressed");n.classList.remove("is-pressed"),n.classList.add("is-active"),setTimeout(()=>n.classList.remove("is-active"),150);let l=Date.now()>=i&&!s?n.getAttribute("data-command-press-and-hold-end"):null;!l&&r.altKey&&(l=n.getAttribute("data-command-alt")),!l&&r.shiftKey&&(l=n.getAttribute("data-command-shift")),l||(l=n.getAttribute("data-command")),l&&o(JSON.parse(l)),r.stopPropagation(),r.preventDefault()})}function M_(){var n;let o=document.querySelector("#mathlive-alternate-keys-panel");return o&&(o.classList.remove("is-visible"),o.innerHTML=""),null==(n=bh.scrim)||n.close(),!1}var B3={numeric:{tooltip:"keyboard.tooltip.numeric",layer:"math",label:"123",layers:["math"]},roman:{tooltip:"keyboard.tooltip.roman",layer:"lower-roman",label:"ABC",layers:["lower-roman","upper-roman"]},greek:{tooltip:"keyboard.tooltip.greek",layer:"lower-greek",label:"&alpha;&beta;&gamma;",classes:"tex-math",layers:["lower-greek","upper-greek"]},functions:{tooltip:"keyboard.tooltip.functions",layer:"functions",label:"<i>f</i>&thinsp;()",classes:"tex",layers:["functions"]},symbols:{tooltip:"keyboard.tooltip.symbols",layer:"symbols",label:"&infin;\u2260\u2208",classes:"tex",layers:["symbols"]}},pb={"\\varphi ":["&Phi;","\\Phi "],"\\varsigma ":["&Sigma;","\\Sigma "],"\\epsilon ":["&#x0190;",'\\char"0190'],"\\rho ":["&#x3A1",'\\char"3A1'],"\\tau ":["&#x3A4;",'\\char"3A4'],"\\upsilon ":["&Upsilon;","\\Upsilon "],"\\theta ":["&Theta;","\\Theta "],"\\iota ":["&Iota;",'\\char"399'],"\\omicron ":["&#x039F;",'\\char"39F'],"\\pi ":["&Pi;","\\Pi "],"\\alpha ":["&Alpha;",'\\char"391'],"\\sigma ":["&Sigma;","\\Sigma "],"\\delta ":["&Delta;","\\Delta "],"\\phi ":["&#x03a6;","\\Phi "],"\\gamma ":["&Gamma;","\\Gamma "],"\\eta ":["&Eta;",'\\char"397'],"\\xi ":["&Xi;","\\Xi "],"\\kappa ":["&Kappa;",'\\char"39A'],"\\lambda ":["&Lambda;","\\Lambda "],"\\zeta ":["&Zeta;",'\\char"396'],"\\chi ":["&Chi;",'\\char"3A7'],"\\psi ":["&Psi;","\\Psi "],"\\omega ":["&Omega;","\\Omega "],"\\beta ":["&Beta;",'\\char"392'],"\\nu ":["&Nu;",'\\char"39D'],"\\mu ":["&Mu;",'\\char"39C']},L_={0:["\\emptyset","\\varnothing","\\infty",{latex:"#?_0",insert:"#@_0"},"\\circ","\\bigcirc","\\bullet"],2:["\\frac{1}{2}",{latex:"#?^2",insert:"#@^2"}],3:["\\frac{1}{3}",{latex:"#?^3",insert:"#@^3"}],".":[".",",",";","\\colon",{latex:":",aside:"ratio"},{latex:"\\cdotp",aside:"center dot",class:"box"},{latex:"\\cdots",aside:"center ellipsis",class:"box"},{latex:"\\ldotp",aside:"low dot",class:"box"},{latex:"\\ldots",aside:"low ellipsis",class:"box"},{latex:"\\vdots",aside:"",class:"box"},{latex:"\\ddots",aside:"",class:"box"},"\\odot","\\oslash","\\circledcirc"],"*":["\\cdot","\\ast","\\star","\\bigstar","\\ltimes","\\rtimes","\\rightthreetimes","\\leftthreetimes","\\intercal","\\prod",{latex:"\\prod_{n\\mathop=0}^{\\infty}",class:"small"}],"+":["\\pm","\\mp","\\sum",{latex:"\\sum_{n\\mathop=0}^{\\infty}",class:"small"},"\\dotplus","\\oplus"],"-":["\\pm","\\mp","\\ominus","\\vert #0  \\vert"],"/":["\\divideontimes","/","\\div","\\%"],"(":["\\left( #0\\right)","\\left[ #0\\right]","\\left\\{ #0\\right\\}","\\left\\langle #0\\right\\rangle","\\lfloor","\\llcorner","(","\\lbrack","\\lvert","\\lVert","\\lgroup","\\langle","\\lceil","\\ulcorner","\\lmoustache","\\lbrace"],")":["\\rfloor","\\lrcorner",")","\\rbrack","\\rvert","\\rVert","\\rgroup","\\rangle","\\rceil","\\urcorner","\\rmoustache","\\rbrace"],"=":["\\cong","\\asymp","\\equiv","\\differencedelta","\\varpropto","\\thickapprox","\\approxeq","\\thicksim","\\backsim","\\eqsim","\\simeq","\\Bumpeq","\\bumpeq","\\doteq","\\Doteq","\\fallingdotseq","\\risingdotseq","\\coloneq","\\eqcirc","\\circeq","\\triangleq","\\between"],"!=":["\\neq","\\ncong","","\\nsim"],"<":["\\leq","\\leqq","\\lneqq","\\ll","\\lessgtr","\\nless","\\nleq","\\lesssim","\\precsim","\\prec","\\nprec","\\preccurlyeq","\\lessdot"],">":["\\geq","\\geqq","\\gneqq","\\gg","\\gtrless","\\ngtr","\\ngeq","\\gtrsim","\\succsim","\\succ","\\nsucc","\\succcurlyeq","\\gtrdot"],in:["\\owns"],"!in":["\\backepsilon"],subset:["\\subseteq","\\nsubset","\\nsubseteq"],superset:["\\supseteq","\\nsupset","\\nsupseteq"],infinity:["\\aleph_0","\\aleph_1","\\omega","\\mathfrak{m}"],"numeric-pi":["\\prod","\\theta","\\rho","\\sin","\\cos","\\tan"],ee:["\\times 10^{#?}","\\ln","\\log_{10}","\\log"],"^":["_{#?}"],int:[{latex:"\\int_{#?}^{#?}",class:"small"},{latex:"\\int",class:"small"},{latex:"\\smallint",class:"small"},{latex:"\\iint",class:"small"},{latex:"\\iiint",class:"small"},{latex:"\\oint",class:"small"},{latex:"\\dfrac{\\rd}{\\rd x}",class:"small"},{latex:"\\frac{\\partial}{\\partial x}",class:"small"},"\\capitalDifferentialD","\\rd","\\partial"],nabla:["\\nabla\\times","\\nabla\\cdot","\\nabla^{2}"],"!":["!!","\\Gamma","\\Pi"],accents:["\\bar{#@}","\\vec{#@}","\\hat{#@}","\\check{#@}","\\dot{#@}","\\ddot{#@}","\\mathring{#@}","\\breve{#@}","\\acute{#@}","\\tilde{#@}","\\grave{#@}"],underline:["\\underbrace{#@}","\\underlinesegment{#@}","\\underleftrightarrow{#@}","\\underrightarrow{#@}","\\underleftarrow{#@}","\\undergroup{#@}"],overline:["\\overbrace{#@}","\\overlinesegment{#@}","\\overleftrightarrow{#@}","\\overrightarrow{#@}","\\overleftarrow{#@}","\\overgroup{#@}"],xleftarrows:["\\xlongequal{#@}","\\xleftrightarrow{#@}","\\xLeftrightarrow{#@}","\\xleftrightharpoons{#@}","\\xLeftarrow{#@}","\\xleftharpoonup{#@}","\\xleftharpoondown{#@}","\\xtwoheadleftarrow{#@}","\\xhookleftarrow{#@}","\\xtofrom{#@}","\\xleftequilibrium{#@}","\\xrightleftarrows{#@}"],xrightarrows:["\\xrightarrow{#@}","\\xlongequal{#@}","\\xleftrightarrow{#@}","\\xLeftrightarrow{#@}","\\xleftrightharpoons{#@}","\\xRightarrow{#@}","\\xrightharpoonup{#@}","\\xrightharpoondown{#@}","\\xtwoheadrightarrow{#@}","\\xrightleftharpoons{#@}","\\xhookrightarrow{#@}","\\xmapsto{#@}","\\xrightequilibrium{#@}","\\xrightleftarrows{#@}"],A:[{latex:"\\aleph",aside:"aleph"},{latex:"\\forall",aside:"for all"}],a:[{latex:"\\aleph",aside:"aleph"},{latex:"\\forall",aside:"for all"}],b:[{latex:"\\beth",aside:"beth"}],B:[{latex:"\\beth",aside:"beth"}],c:[{latex:"\\C",aside:"set of complex numbers"}],d:[{latex:"\\daleth",aside:"daleth"}],D:[{latex:"\\daleth",aside:"daleth"}],e:[{latex:"\\exponentialE",aside:"exponential e"},{latex:"\\exists",aside:"there is"},{latex:"\\nexists",aside:"there isn\u2019t"}],g:[{latex:"\\gimel",aside:"gimel"}],G:[{latex:"\\gimel",aside:"gimel"}],h:[{latex:"\\hbar",aside:"h bar"},{latex:"\\hslash",aside:"h slash"}],i:[{latex:"\\imaginaryI",aside:"imaginary i"}],j:[{latex:"\\imaginaryJ",aside:"imaginary j"}],l:[{latex:"\\ell",aside:"ell"}],n:[{latex:"\\mathbb{N}",aside:"set of natural numbers"}],p:[{latex:"\\mathbb{P}",aside:"set of primes"}],q:[{latex:"\\mathbb{Q}",aside:"set of rational numbers"}],r:[{latex:"\\mathbb{R}",aside:"set of real numbers"}],z:[{latex:"\\mathbb{Z}",aside:"set of integers"}],"x-var":["y","z","t","r",{latex:"f(#?)",class:"small"},{latex:"g(#?)",class:"small"},"x^2","x^n","x_n","x_{n+1}","x_i","x_{i+1}"],"n-var":["i","j","p","k","a","u"],ii:["\\Re","\\Im","\\imaginaryJ","\\Vert #0 \\Vert"],logic:[{latex:"\\exists",aside:"there is"},{latex:"\\nexists",aside:"there isn\u2019t"},{latex:"\\ni",aside:"such that"},{latex:"\\Colon",aside:"such that"},{latex:"\\implies",aside:"implies"},{latex:"\\impliedby",aside:"implied by"},{latex:"\\iff",aside:"if and only if"},{latex:"\\land",aside:"and"},{latex:"\\lor",aside:"or"},{latex:"\\oplus",aside:"xor"},{latex:"\\lnot",aside:"not"},{latex:"\\downarrow",aside:"nor"},{latex:"\\uparrow",aside:"nand"},{latex:"\\curlywedge",aside:"nor"},{latex:"\\bar\\curlywedge",aside:"nand"},{latex:"\\therefore",aside:"therefore"},{latex:"\\because",aside:"because"},{latex:"^\\biconditional",aside:"biconditional"},"\\leftrightarrow","\\Leftrightarrow","\\to","\\models","\\vdash","\\gets","\\dashv","\\roundimplies"],"set-operators":["\\cap","\\cup","\\setminus","\\smallsetminus","\\complement"],"set-relations":["\\in","\\notin","\\ni","\\owns","\\subset","\\supset","\\subseteq","\\supseteq","\\subsetneq","\\supsetneq","\\varsubsetneq","\\subsetneqq","\\nsubset","\\nsupset","\\nsubseteq","\\nsupseteq"],space:[{latex:'\\char"203A\\!\\char"2039',insert:"\\!",aside:"negative thin space<br>\u207b\xb3\u29f8\u2081\u2088 em"},{latex:'\\unicode{"203A}\\,\\unicode{"2039}',insert:"\\,",aside:"thin space<br>\xb3\u29f8\u2081\u2088 em"},{latex:'\\unicode{"203A}\\:\\unicode{"2039}',insert:"\\:",aside:"medium space<br>\u2074\u29f8\u2081\u2088 em"},{latex:'\\unicode{"203A}\\;\\unicode{"2039}',insert:"\\;",aside:"thick space<br>\u2075\u29f8\u2081\u2088 em"},{latex:'\\unicode{"203A}\\ \\unicode{"2039}',insert:"\\ ",aside:"\u2153 em"},{latex:'\\unicode{"203A}\\enspace\\unicode{"2039}',insert:"\\enspace",aside:"\xbd em"},{latex:'\\unicode{"203A}\\quad\\unicode{"2039}',insert:"\\quad",aside:"1 em"},{latex:'\\unicode{"203A}\\qquad\\unicode{"2039}',insert:"\\qquad",aside:"2 em"}],delete:[{label:'<span class="warning"><svg class="svg-glyph"><use xlink:href="#svg-trash" /></svg></span>',command:"deleteAll"}],"->|":[]},mo={},mV={math:"\n        <div class='rows'>\n            <ul>\n                <li class='keycap tex' data-alt-keys='x-var'><i>x</i></li>\n                <li class='keycap tex' data-alt-keys='n-var'><i>n</i></li>\n                <li class='separator w5'></li>\n                <row name='numpad-1'/>\n                <li class='separator w5'></li>\n                <li class='keycap tex' data-latex='\\exponentialE' data-alt-keys='ee'>e</li>\n                <li class='keycap tex' data-latex='\\imaginaryI' data-alt-keys='ii'>i</li>\n                <li class='keycap tex' data-latex='\\pi' data-alt-keys='numeric-pi'></li>\n            </ul>\n            <ul>\n                <li class='keycap tex' data-key='<' data-alt-keys='<'>&lt;</li>\n                <li class='keycap tex' data-key='>' data-alt-keys='>'>&gt;</li>\n                <li class='separator w5'></li>\n                <row name='numpad-2'/>\n                <li class='separator w5'></li>\n                <li class='keycap tex' data-latex='#@^{2}' data-latex='x^2'></li>\n                <li class='keycap tex' data-alt-keys='^' data-insert='#@^{#?}' data-latex='x^\\placeholder'></li>\n                <li class='keycap tex small' data-insert='\\sqrt{#0}' data-latex='\\sqrt{#0}'></li>\n            </ul>\n            <ul>\n                <li class='keycap tex' data-alt-keys='(' >(</li>\n                <li class='keycap tex' data-alt-keys=')' >)</li>\n                <li class='separator w5'></li>\n                <row name='numpad-3'/>\n                <li class='separator w5'></li>\n                <li class='keycap small' data-alt-keys='int' data-latex='\\int_0^\\infty'></li>\n                <li class='keycap' data-latex='\\forall' data-alt-keys='logic' ></li>\n                <li class='action font-glyph bottom right' data-alt-keys='delete' data-command='[\"performWithFeedback\",\"deleteBackward\"]'><svg class=\"svg-glyph\"><use xlink:href=\"#svg-delete-backward\" /></svg></li></ul>\n            </ul>\n            <ul>\n                <li class='keycap' data-alt-keys='foreground-color' data-command='[\"applyStyle\",{\"color\":\"red\"}]'><span style='border-radius: 50%;width:22px;height:22px; border: 3px solid #cc2428; box-sizing: border-box'></span></li>\n                <li class='keycap' data-alt-keys='background-color' data-command='[\"applyStyle\",{\"backgroundColor\":\"yellow\"}]'><span style='border-radius: 50%;width:22px;height:22px; background:#fff590; box-sizing: border-box'></span></li>\n                <li class='separator w5'></li>\n                <row name='numpad-4'/>\n                <li class='separator w5'></li>\n                <arrows/>\n            </ul>\n        </div>\n    ","lower-roman":"\n        <div class='rows'>\n            <ul>\n                <row name='numpad-1' class='if-wide'/>\n                <row name='lower-1' shift-layer='upper-roman'/>\n            </ul>\n            <ul>\n                <row name='numpad-2' class='if-wide'/>\n                <row name='lower-2'  shift-layer='upper-roman''/>\n            </ul>\n            <ul>\n                <row name='numpad-3' class='if-wide'/>\n                <row name='lower-3'  shift-layer='upper-roman''/>\n            </ul>\n            <ul>\n                <row name='numpad-4' class='if-wide'/>\n                <li class='keycap' >;</li>\n                <li class='keycap' >,</li>\n                <li class='keycap w50' data-key=' ' data-alt-keys='space'>&nbsp;</li>\n                <arrows/>\n            </ul>\n        </div>","upper-roman":"\n        <div class='rows'>\n            <ul>\n                <row name='numpad-1' class='if-wide'/>\n                <row name='upper-1'  shift-layer='lower-roman'/>\n            </ul>\n            <ul>\n                <row name='numpad-2' class='if-wide'/>\n                <row name='upper-2' shift-layer='lower-roman'/>\n            </ul>\n            <ul>\n                <row name='numpad-3' class='if-wide'/>\n                <row name='upper-3' shift-layer='lower-roman'/>\n            </ul>\n            <ul>\n                <row name='numpad-4' class='if-wide'/>\n                <li class='keycap' >;</li>\n                <li class='keycap' data-alt-keys='.'>;</li>\n                <li class='keycap w50' data-key=' '>&nbsp;</li>\n                <arrows/>\n            </ul>\n        </div>",symbols:"\n        <div class='rows'>\n            <ul>\n                <row name='numpad-1' class='if-wide'/>\n                <li class='keycap tex' data-alt-keys='(' data-insert='\\lbrace '>{</li>\n                <li class='keycap tex' data-alt-keys=')' data-insert='\\rbrace '>}</li>\n                <li class='separator w5'></li>\n                <li class='keycap tex small' data-alt-keys='xleftarrows' data-latex='\\leftarrow' ></li>\n                <li class='keycap tex small' data-alt-keys='xrightarrows' data-latex='\\rightarrow' ></li>\n                <li class='keycap tex' data-alt-keys='overline' data-latex='\\overline{#@}' data-aside='overline'></li>\n                <li class='keycap tex' data-alt-keys='underline' data-latex='\\underline{#@}' data-aside='underline'></li>\n                <li class='keycap w15' data-insert='\\ulcorner#0\\urcorner '><span><sup>&#x250c;</sup><span><span style='color:#ddd'>o</span><sup>&#x2510;</sup></span><aside>ceil</aside></li>\n                <li class='keycap tex' data-alt-keys='nabla' data-insert='\\nabla '>&#x2207;<aside>nabla</aside></li>\n                <li class='keycap tex' data-alt-keys='infinity' data-insert='\\infty '>&#x221e;</li>\n\n            </ul>\n            <ul>\n                <row name='numpad-2' class='if-wide'/>\n                <li class='keycap tex' data-alt-keys='(' data-insert='\\lbrack '>[</li>\n                <li class='keycap tex' data-alt-keys=')' data-insert='\\rbrack '>]</li>\n                <li class='separator w5'></li>\n\n                <li class='keycap tex' data-alt-keys='in' data-insert='\\in '>&#x2208;</li>\n                <li class='keycap tex' data-alt-keys='!in' data-insert='\\notin '>&#x2209;</li>\n                <li class='keycap tex' data-insert='\\Re '>&#x211c;<aside>Real</aside></li>\n                <li class='keycap tex' data-insert='\\Im '>&#x2111;<aside>Imaginary</aside></li>\n                <li class='keycap w15' data-insert='\\llcorner#0\\lrcorner '><span><sub>&#x2514;</sub><span style='color:#ddd'>o</span><sub>&#x2518;</sub></span><aside>floor</aside></li>\n\n                <li class='keycap tex' data-insert='\\partial '>&#x2202;<aside>partial<br>derivative</aside></li>\n                <li class='keycap tex' data-insert='\\emptyset '>&#x2205;<aside>empty set</aside></li>\n\n            </ul>\n            <ul>\n                <row name='numpad-3' class='if-wide'/>\n                <li class='keycap tex' data-alt-keys='(' data-insert='\\langle '>&#x27e8;</li>\n                <li class='keycap tex' data-alt-keys=')' data-insert='\\rangle '>&#x27e9;</li>\n                <li class='separator w5'></li>\n                <li class='keycap tex' data-alt-keys='subset' data-insert='\\subset '>&#x2282;</li>\n                <li class='keycap tex' data-alt-keys='superset' data-insert='\\supset '>&#x2283;</li>\n\n                <li class='keycap tex' data-alt-keys='accents' data-insert='\\vec{#@}' data-latex='\\vec{#?}' data-aside='vector'></li>\n                <li class='keycap tex' data-alt-keys='absnorm' data-insert='\\left| #0 \\right|' data-latex='\\left| #? \\right|' data-aside='abs'></li>\n\n                <li class='keycap tex' data-key='!' data-alt-keys='!'>!<aside>factorial</aside></li>\n                <li class='keycap' data-latex='^{\\prime} '><span><sup><span><span style='color:#ddd'>o</span>&#x2032</sup></span><aside>prime</aside></li>\n\n                <li class='action font-glyph bottom right w15'\n                    data-shifted='<span class=\"warning\"><svg class=\"svg-glyph\"><use xlink:href=\"#svg-trash\" /></svg></span>'\n                    data-shifted-command='\"deleteAll\"'\n                    data-alt-keys='delete' data-command='[\"performWithFeedback\",\"deleteBackward\"]'\n                ><svg class=\"svg-glyph\"><use xlink:href=\"#svg-delete-backward\" /></svg></li>\n            </ul>\n            <ul>\n                <row name='numpad-4' class='if-wide'/>\n                <li class='keycap tex' data-insert=','>,</li>\n                <li class='keycap tex' data-insert='\\cdot '>&#x22c5;<aside>centered dot</aside></li>\n                <li class='keycap tex' data-insert='\\colon '>:<aside>colon</aside></li>\n                <li class='keycap tex' data-insert='\\circ '>&#x2218;<aside>circle</aside></li>\n                <li class='keycap tex' data-insert='\\approx '>&#x2248;<aside>approx.</aside></li>\n                <li class='keycap tex' data-insert='\\ne '>&#x2260;</li>\n                <li class='keycap tex' data-insert='\\pm '>&#x00b1;</li>\n                <arrows/>\n            </ul>\n        </div>","lower-greek":"\n        <div class='rows'>\n            <ul><li class='keycap tex' data-insert='\\varphi '><i>&#x03c6;</i><aside>phi var.</aside></li>\n                <li class='keycap tex' data-insert='\\varsigma '><i>&#x03c2;</i><aside>sigma var.</aside></li>\n                <li class='keycap tex' data-insert='\\epsilon '><i>&#x03f5;</i></li>\n                <li class='keycap tex' data-insert='\\rho '><i>&rho;</i></li>\n                <li class='keycap tex' data-insert='\\tau '><i>&tau;</i></li>\n                <li class='keycap tex' data-insert='\\upsilon '><i>&upsilon;</i></li>\n                <li class='keycap tex' data-insert='\\theta '><i>&theta;</i></li>\n                <li class='keycap tex' data-insert='\\iota '><i>&iota;</i></li>\n                <li class='keycap tex' data-insert='\\omicron '>&omicron;</i></li>\n                <li class='keycap tex' data-insert='\\pi '><i>&pi;</i></li>\n            </ul>\n            <ul><li class='keycap tex' data-insert='\\alpha ' data-shifted='&Alpha;' data-shifted-command='[\"insert\",\"\\\\char\\\"391\"]'><i>&alpha;</i></li>\n                <li class='keycap tex' data-insert='\\sigma '><i>&sigma;</i></li>\n                <li class='keycap tex' data-insert='\\delta '><i>&delta;</i></li>\n                <li class='keycap tex' data-insert='\\phi '><i>&#x03d5;</i></i></li>\n                <li class='keycap tex' data-insert='\\gamma '><i>&gamma;</i></li>\n                <li class='keycap tex' data-insert='\\eta '><i>&eta;</i></li>\n                <li class='keycap tex' data-insert='\\xi '><i>&xi;</i></li>\n                <li class='keycap tex' data-insert='\\kappa '><i>&kappa;</i></li>\n                <li class='keycap tex' data-insert='\\lambda '><i>&lambda;</i></li>\n            </ul>\n            <ul><li class='shift modifier font-glyph bottom left w15 layer-switch' data-layer='upper-greek'><svg class=\"svg-glyph\"><use xlink:href=\"#svg-shift\" /></svg></li>\n                <li class='keycap tex' data-insert='\\zeta '><i>&zeta;</i></li>\n                <li class='keycap tex' data-insert='\\chi '><i>&chi;</i></li>\n                <li class='keycap tex' data-insert='\\psi '><i>&psi;</i></li>\n                <li class='keycap tex' data-insert='\\omega '><i>&omega;</i></li>\n                <li class='keycap tex' data-insert='\\beta '><i>&beta;</i></li>\n                <li class='keycap tex' data-insert='\\nu '><i>&nu;</i></li>\n                <li class='keycap tex' data-insert='\\mu '><i>&mu;</i></li>\n                <li class='action font-glyph bottom right w15'\n                    data-shifted='<span class=\"warning\"><svg class=\"svg-glyph\"><use xlink:href=\"#svg-trash\" /></svg></span>'\n                    data-shifted-command='\"deleteAll\"'\n                    data-alt-keys='delete' data-command='[\"performWithFeedback\",\"deleteBackward\"]'\n                ><svg class=\"svg-glyph\"><use xlink:href=\"#svg-delete-backward\" /></svg></li>\n            </ul>\n            <ul>\n                <li class='keycap ' data-key=' '>&nbsp;</li>\n                <li class='keycap'>,</li>\n                <li class='keycap tex' data-insert='\\varepsilon '><i>&#x03b5;</i><aside>epsilon var.</aside></li>\n                <li class='keycap tex' data-insert='\\vartheta '><i>&#x03d1;</i><aside>theta var.</aside></li>\n                <li class='keycap tex' data-insert='\\varkappa '><i>&#x3f0;</i><aside>kappa var.</aside></li>\n                <li class='keycap tex' data-insert='\\varpi '><i>&#x03d6;<aside>pi var.</aside></i></li>\n                <li class='keycap tex' data-insert='\\varrho '><i>&#x03f1;</i><aside>rho var.</aside></li>\n                <arrows/>\n            </ul>\n        </div>","upper-greek":"\n        <div class='rows'>\n            <ul><li class='keycap tex' data-insert='\\Phi '>&Phi;<aside>phi</aside></li>\n                <li class='keycap tex' data-insert='\\Sigma '>&Sigma;<aside>sigma</aside></li>\n                <li class='keycap tex' data-insert='\\char\"0190'>&#x0190;<aside>epsilon</aside></li>\n                <li class='keycap tex' data-insert='\\char\"3A1'>&#x3A1;<aside>rho</aside></li>\n                <li class='keycap tex' data-insert='\\char\"3A4'>&#x3A4;<aside>tau</aside></li>\n                <li class='keycap tex' data-insert='\\Upsilon '>&Upsilon;<aside>upsilon</aside></li>\n                <li class='keycap tex' data-insert='\\Theta '>&Theta;<aside>theta</aside></li>\n                <li class='keycap tex' data-insert='\\char\"399'>&Iota;<aside>iota</aside></li>\n                <li class='keycap tex' data-insert='\\char\"39F'>&#x039F;<aside>omicron</aside></li>\n                <li class='keycap tex' data-insert='\\Pi '>&Pi;<aside>pi</aside></li></ul>\n            <ul><li class='keycap tex' data-insert='\\char\"391'>&#x391;<aside>alpha</aside></li>\n                <li class='keycap tex' data-insert='\\Sigma '>&Sigma;<aside>sigma</aside></li>\n                <li class='keycap tex' data-insert='\\Delta '>&Delta;<aside>delta</aside></li>\n                <li class='keycap tex' data-insert='\\Phi '>&#x03a6;<aside>phi</aside></li>\n                <li class='keycap tex' data-insert='\\Gamma '>&Gamma;<aside>gamma</aside></li>\n                <li class='keycap tex' data-insert='\\char\"397'>&Eta;<aside>eta</aside></li>\n                <li class='keycap tex' data-insert='\\Xi '>&Xi;<aside>xi</aside></li>\n                <li class='keycap tex' data-insert='\\char\"39A'>&Kappa;<aside>kappa</aside></li>\n                <li class='keycap tex' data-insert='\\Lambda '>&Lambda;<aside>lambda</aside></li></ul>\n            <ul><li class='shift modifier font-glyph bottom left selected w15 layer-switch' data-layer='lower-greek'><svg class=\"svg-glyph\"><use xlink:href=\"#svg-shift\" /></svg></li>\n                <li class='keycap tex' data-insert='\\char\"396'>&Zeta;<aside>zeta</aside></li>\n                <li class='keycap tex' data-insert='\\char\"3A7'>&Chi;<aside>chi</aside></li>\n                <li class='keycap tex' data-insert='\\Psi '>&Psi;<aside>psi</aside></li>\n                <li class='keycap tex' data-insert='\\Omega '>&Omega;<aside>omega</aside></li>\n                <li class='keycap tex' data-insert='\\char\"392'>&Beta;<aside>beta</aside></li>\n                <li class='keycap tex' data-insert='\\char\"39D'>&Nu;<aside>nu</aside></li>\n                <li class='keycap tex' data-insert='\\char\"39C'>&Mu;<aside>mu</aside></li>\n                <li class='action font-glyph bottom right w15' data-command='[\"performWithFeedback\",\"deleteBackward\"]'><svg class=\"svg-glyph\"><use xlink:href=\"#svg-delete-backward\" /></svg></li></ul>\n            <ul>\n                <li class='separator w10'>&nbsp;</li>\n                <li class='keycap'>.</li>\n                <li class='keycap w50' data-key=' '>&nbsp;</li>\n                <arrows/>\n            </ul>\n        </div>",functions:"\n        <div class='rows'>\n            <ul>\n                <li class='fnbutton' data-insert='\\sin'></li>\n                <li class='fnbutton' data-insert='\\sin^{-1}'></li>\n                <li class='fnbutton' data-insert='\\ln'></li>\n                <li class='fnbutton' data-insert='\\exponentialE^{#?}'></li>\n                <li class='bigfnbutton' data-insert='\\operatorname{lcm}(#?)' data-latex='\\operatorname{lcm}()'></li>\n                <li class='bigfnbutton' data-insert='\\operatorname{ceil}(#?)' data-latex='\\operatorname{ceil}()'></li>\n                <li class='bigfnbutton' data-insert='\\lim_{n\\to\\infty}'></li>\n                <li class='bigfnbutton' data-insert='\\int'></li>\n                <li class='bigfnbutton' data-insert='\\operatorname{abs}(#?)' data-latex='\\operatorname{abs}()'></li>\n            </ul>\n            <ul>\n                <li class='fnbutton' data-latex='\\cos'></li>\n                <li class='fnbutton' data-latex='\\cos^{-1}'></li>\n                <li class='fnbutton' data-latex='\\log'></li>\n                <li class='fnbutton' data-latex='10^{#?}'></li>\n                <li class='bigfnbutton' data-insert='\\operatorname{gcd}(#?)' data-latex='\\operatorname{gcd}()'></li>\n                <li class='bigfnbutton' data-insert='\\operatorname{floor}(#?)' data-latex='\\operatorname{floor}()'></li>\n                <li class='bigfnbutton' data-latex='\\sum_{n\\mathop=0}^{\\infty}'></li>\n                <li class='bigfnbutton' data-latex='\\int_{0}^{\\infty}'></li>\n                <li class='bigfnbutton' data-insert='\\operatorname{sign}(#?)' data-latex='\\operatorname{sign}()'></li>\n            </ul>\n            <ul>\n                <li class='fnbutton' data-latex='\\tan'></li>\n                <li class='fnbutton' data-latex='\\tan^{-1}'></li>\n                <li class='fnbutton' data-latex='\\log_{#?}'></li>\n                <li class='fnbutton' data-latex='\\sqrt[#?]{#0}'></li>\n                <li class='bigfnbutton' data-insert='#0 \\mod' data-latex='\\mod'></li>\n                <li class='bigfnbutton' data-insert='\\operatorname{round}(#?) ' data-latex='\\operatorname{round}()'></li>\n                <li class='bigfnbutton' data-insert='\\prod_{n\\mathop=0}^{\\infty}' data-latex='{\\scriptstyle \\prod_{n=0}^{\\infty}}'></li>\n                <li class='bigfnbutton' data-insert='\\frac{\\differentialD #0}{\\differentialD x}'></li>\n                <li class='action font-glyph bottom right' data-command='[\"performWithFeedback\",\"deleteBackward\"]'><svg class=\"svg-glyph\"><use xlink:href=\"#svg-delete-backward\" /></svg></li></ul>\n            <ul>\n                <li class='fnbutton'>(</li>\n                <li class='fnbutton'>)</li>\n                <li class='fnbutton' data-insert='^{#?}' data-latex='x^{#?}'></li>\n                <li class='fnbutton' data-insert='_{#?}' data-latex='x_{#?}'></li>\n                <li class='keycap w20 ' data-key=' '>&nbsp;</li>\n                <arrows/>\n            </ul>\n        </div>",style:"\n        <div class='rows'>\n            <ul>\n                <li class='keycap' data-alt-keys='foreground-color' data-command='[\"applyStyle\",{\"color\":\"red\"}]'><span style='border-radius: 50%;width:22px;height:22px; border: 3px solid #cc2428'></span></li>\n                <li class='keycap' data-alt-keys='background-color' data-command='[\"applyStyle\",{\"backgroundColor\":\"yellow\"}]'><span style='border-radius: 50%;width:22px;height:22px; background:#fff590'></span></li>\n                <li class='separator w5'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"size\":\"3\"}]' data-latex='\\scriptsize\\text{small}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"size\":\"5\"}]' data-latex='\\scriptsize\\text{normal}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"size\":\"9\"}]' data-latex='\\huge\\text{big}'></li>\n                <li class='separator w5'></li>\n                <li class='keycap' data-latex='\\langle' data-command='[\"insert\", \"\\\\langle\", {\"smartFence\":true}]'></li>\n            </ul>\n            <ul>\n                <li class='keycap' data-command='[\"applyStyle\",{\"series\":\"l\"}]' data-latex='\\fontseries{l}\\text{Ab}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"series\":\"m\"}]' data-latex='\\fontseries{m}\\text{Ab}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"series\":\"b\"}]' data-latex='\\fontseries{b}\\text{Ab}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"series\":\"bx\"}]' data-latex='\\fontseries{bx}\\text{Ab}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"series\":\"sb\"}]' data-latex='\\fontseries{sb}\\text{Ab}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"series\":\"c\"}]' data-latex='\\fontseries{c}\\text{Ab}'></li>\n            </ul>\n            <ul>\n                <li class='keycap' data-command='[\"applyStyle\",{\"shape\":\"up\"}]' data-latex='\\textup{Ab}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"shape\":\"it\"}]' data-latex='\\textit{Ab}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"shape\":\"sl\"}]' data-latex='\\textsl{Ab}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"shape\":\"sc\"}]' data-latex='\\textsc{Ab}'></li>\n                <li class='separator w5'></li>\n                <li class='keycap' data-insert='\\emph{#@} ' data-latex='\\text{\\emph{emph}}'></li>\n            </ul>\n            <ul>\n                <li class='keycap' data-command='[\"applyStyle\",{\"fontFamily\":\"cmr\"}]' data-latex='\\textrm{Az}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"fontFamily\":\"cmtt\"}]' data-latex='\\texttt{Az}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"fontFamily\":\"cmss\"}]' data-latex='\\textsf{Az}'></li>\n\n                <li class='keycap' data-command='[\"applyStyle\",{\"fontFamily\":\"bb\"}]'  data-latex='\\mathbb{AZ}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"fontFamily\":\"scr\"}]'  data-latex='\\mathscr{AZ}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"fontFamily\":\"cal\"}]' data-latex='\\mathcal{A1}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"fontFamily\":\"frak\"}]' data-latex='\\mathfrak{Az}'></li>\n            </ul>\n        </div>"};function P3(n,o){n=n.replace(/(^|[^\\])#@/g,"$1#?");let t=Lm(),i=new kt("root",t);return i.body=kr(n,t,{parseMode:"math",args:o}),gd(c1(ch(new Ht(i.render(new pi({registers:t.registers},{fontSize:ym},"displaystyle")),{classes:"ML__base"}))),{classes:"ML__mathlive"}).toMarkup()}function pV(n,o,t){var i,a,r;let s="<div class='left'>",l=o.replace(/\s+/g," ").split(" ");if(l.length>1){let c=Et(Et({},B3),null!=(i=n.customVirtualKeyboards)?i:{});for(let u of l){if(!c[u]){console.error('MathLive: Unknown virtual keyboard "',u,'"');break}s+="<div class='",s+=u===t?"selected ":c[u].command?"action ":"layer-switch ",s+=(null!=(a=c[u].classes)?a:"")+"'",c[u].tooltip&&(s+="data-tooltip='"+(null!=(r=vm(c[u].tooltip))?r:c[u].tooltip)+"' "),u!==t&&("string"==typeof c[u].command?s+=`data-command='"${c[u].command}"'`:Array.isArray(c[u].command)&&(s+=`data-command='${JSON.stringify(c[u].command)}'`),c[u].layer&&(s+="data-layer='"+c[u].layer+"'")),s+=">"+c[u].label+"</div>"}}return s+="</div>",s+="<div class='ML__toolbar-action right'></div>",s}function hV(n,o){let t="";if("none"===n.virtualKeyboardToolbar)return"";let i=[];null!=o&&o.model.selectionIsCollapsed?i.push("undo","redo","pasteFromClipboard"):i.push("cutToClipboard","copyToClipboard","pasteFromClipboard");let a={undo:`<div class='action ${!1===o?.canUndo()?"disabled":""}'\n          data-command='"undo"'\n          data-tooltip='${vm("tooltip.undo")}'>\n          <svg><use xlink:href='#svg-undo' /></svg>\n      </div>`,redo:`<div class='action ${!1===o?.canRedo()?"disabled":""}'\n          data-command='"redo"'\n          data-tooltip='${vm("tooltip.redo")}'>\n          <svg><use xlink:href='#svg-redo' /></svg>\n      </div>`,cutToClipboard:`\n        <div class='action'\n            data-command='"cutToClipboard"'\n            data-tooltip='${vm("tooltip.cut to clipboard")}'>\n            <svg><use xlink:href='#svg-cut' /></svg>\n        </div>\n    `,copyToClipboard:`\n        <div class='action'\n            data-command='"copyToClipboard"'\n            data-tooltip='${vm("tooltip.copy to clipboard")}'>\n            <svg><use xlink:href='#svg-copy' /></svg>\n        </div>\n    `,pasteFromClipboard:`\n        <div class='action'\n            data-command='"pasteFromClipboard"'\n            data-tooltip='${vm("tooltip.paste from clipboard")}'>\n            <svg><use xlink:href='#svg-paste' /></svg>\n        </div>\n    `};return t+=i.map(r=>a[r]).join(""),t}function Q3(n,o,t){var i,a;for(let r of o){let s;r.getAttribute("data-latex")?s=P3(r.getAttribute("data-latex").replace(/&quot;/g,'"'),()=>"\\placeholder{}"):r.getAttribute("data-insert")&&""===r.innerHTML?s=P3(r.getAttribute("data-insert").replace(/&quot;/g,'"'),()=>"\\placeholder{}"):r.getAttribute("data-content")&&(s=r.getAttribute("data-content").replace(/&quot;/g,'"')),r.getAttribute("data-aside")&&(s=(s??"")+"<aside>"+r.getAttribute("data-aside").replace(/&quot;/g,'"')+"</aside>"),void 0!==s&&(r.innerHTML=n.options.createHTML(s)),r.getAttribute("data-classes")&&r.classList.add(r.getAttribute("data-classes"));let l=null==(i=r.getAttribute("data-insert"))?void 0:i.replace(/&quot;/g,'"');l&&pb[l]&&(r.dataset.shifted=pb[l][0],r.dataset.shiftedCommand=JSON.stringify(["insertAndUnshiftKeyboardLayer",pb[l][1]]));let c,u=r.getAttribute("data-command");if(u)if(/^[a-zA-Z]+$/.test(u))c=u;else try{c=JSON.parse(u)}catch{}else c=r.getAttribute("data-insert")?["insert",r.getAttribute("data-insert"),{focus:!0,feedback:!0,scrollIntoView:!0,mode:"math",format:"latex",resetStyle:!0}]:r.getAttribute("data-latex")?["insert",r.getAttribute("data-latex"),{focus:!0,feedback:!0,scrollIntoView:!0,mode:"math",format:"latex",resetStyle:!0}]:["typedText",null!=(a=r.getAttribute("data-key"))?a:r.textContent,{focus:!0,feedback:!0,simulateKeystroke:!0}];if(c){t&&(c=[t,c]);let m={default:c},p=r.getAttribute("data-alt-keys");p&&mo[p]&&(m={default:c,pressAndHoldStart:["showAlternateKeys",p],pressAndHoldEnd:"hideAlternateKeys"}),N1(r,f=>n.executeCommand(f),m)}}}function AV(n,o){var t,i,a,r;let s={qwerty:{"lower-1":"qwertyuiop","lower-2":" asdfghjkl ","lower-3":"^zxcvbnm~","upper-1":"QWERTYUIOP","upper-2":" ASDFGHJKL ","upper-3":"^ZXCVBNM~","numpad-1":"789/","numpad-2":"456*","numpad-3":"123-","numpad-4":"0.=+"},azerty:{"lower-1":"azertyuiop","lower-2":"qsdfghjklm","lower-3":"^ wxcvbn ~","upper-1":"AZERTYUIOP","upper-2":"QSDFGHJKLM","upper-3":"^ WXCVBN ~"},qwertz:{"lower-1":"qwertzuiop","lower-2":" asdfghjkl ","lower-3":"^yxcvbnm~","upper-1":"QWERTZUIOP","upper-2":" ASDFGHJKL","upper-3":"^YXCVBNM~"},dvorak:{"lower-1":"^  pyfgcrl ","lower-2":"aoeuidhtns","lower-3":"qjkxbmwvz~","upper-1":"^  PYFGCRL ","upper-2":"AOEUIDHTNS","upper-3":"QJKXBMWVZ~"},colemak:{"lower-1":" qwfpgjluy ","lower-2":"arstdhneio","lower-3":"^zxcvbkm~","upper-1":" QWFPGNLUY ","upper-2":"ARSTDHNEIO","upper-3":"^ZXCVBKM~"}},l=n.virtualKeyboardLayout;if("auto"===l){let f=T_();f&&(l=f.virtualLayout),(!l||"auto"===l)&&(l=null!=(t={fr:"azerty",be:"azerty",al:"qwertz",ba:"qwertz",cz:"qwertz",de:"qwertz",hu:"qwertz",sk:"qwertz",ch:"qwertz"}[Ao.locale.slice(0,2)])?t:"qwerty")}let m,c=null!=(i=s[l])?i:s.qwerty,u=o;u=u.replace(/<arrows\/>/g,'\n        <li class=\'action\' data-command=\'["performWithFeedback","moveToPreviousChar"]\'\n            data-shifted=\'<svg class="svg-glyph"><use xlink:href="#svg-angle-double-left" /></svg>\'\n            data-shifted-command=\'["performWithFeedback","extendToPreviousChar"]\'>\n            <svg class="svg-glyph"><use xlink:href=\'#svg-arrow-left\' /></svg>\n        </li>\n        <li class=\'action\' data-command=\'["performWithFeedback","moveToNextChar"]\'\n            data-shifted=\'<svg class="svg-glyph"><use xlink:href="#svg-angle-double-right" /></svg>\'\n            data-shifted-command=\'["performWithFeedback","extendToNextChar"]\'>\n            <svg class="svg-glyph"><use xlink:href=\'#svg-arrow-right\' /></svg>\n        </li>\n        <li class=\'action\' data-command=\'["performWithFeedback","commit"]\'>\n        <svg class="svg-glyph"><use xlink:href=\'#svg-commit\' /></svg></li>');let p=u.match(/(<row\s+)(.*)((?:<\/row|\/)>)/);for(;p;){m="";let f=p[2].match(/[a-zA-Z][a-zA-Z\d-]*=(['"])(.*?)\1/g),b={};if(f)for(let N of f){let R=N.match(/([a-zA-Z][a-zA-Z\d-]*)=(['"])(.*?)\2/);R&&(b[R[1]]=R[3])}let L=c[b.name];if(L||(L=s.qwerty[b.name]),L)for(let N of L){let R=null!=(a=b.class)?a:"";R&&(R=` ${R}`),"~"===N?(m+="<li class='action font-glyph bottom right ",m+=L.length-(L.match(/ /g)||[]).length/2==10?"w10":"w15",m+='\' data-shifted=\'<span class="warning"><svg class="svg-glyph"><use xlink:href="#svg-trash" /></svg></span>\'\n                        data-shifted-command=\'"deleteAll"\'\n                        data-alt-keys=\'delete\' data-command=\'["performWithFeedback","deleteBackward"]\'\n                        ><svg class="svg-glyph"><use xlink:href="#svg-delete-backward" /></svg></li>'):" "===N?m+="<li class='separator w5'></li>":"^"===N?m+="<li class='shift modifier font-glyph bottom left w15 layer-switch' data-layer='"+b["shift-layer"]+'\'><svg class="svg-glyph"><use xlink:href="#svg-shift" /></svg></li>':"/"===N?m+="<li class='keycap"+R+"' data-alt-keys='/' data-insert='\\frac{#@}{#?}'>&divide;</li>":"*"===N?m+="<li class='keycap"+R+"' data-alt-keys='*' data-insert='\\times '>&times;</li>":"-"===N?m+="<li class='keycap"+R+"' data-alt-keys='-' data-key='-'>&#x2212;</li>":"."===N?m+="<li class='keycap"+R+"' data-alt-keys='.' data-command='\"insertDecimalSeparator\"'>"+(null!=(r=n.decimalSeparator)?r:".")+"</li>":R.includes("tt")?m+=`<li class='keycap${R}' data-alt-keys='${N}' data-command='["typedText","${N}",{"mode":"latex", "focus":true, "feedback":true}]'>${N}</li>`:m+="<li class='keycap"+R+"' data-alt-keys='"+N+"'>"+N+"</li>"}else console.error("MathLive: Unknown roman keyboard row:",b.name);u=u.replace(new RegExp(p[1]+p[2]+p[3]),m),p=u.match(/(<row\s+)(.*)((?:<\/row|\/)>)/)}return u}function Z1(n){M_();let o=n.element.querySelectorAll("div.keyboard-layer.is-visible .rows .keycap, div.keyboard-layer.is-visible .rows .action");if(o)for(let t of o){let i=t.getAttribute("data-unshifted-content");i&&(t.innerHTML=n.options.createHTML(i),t.dataset.unshiftedContent="");let a=t.getAttribute("data-unshifted-command");a&&(t.dataset.command=a,t.dataset.unshiftedCommand="")}return!1}function gV(n){return Object.keys(n).map(o=>`${o} {${function fV(n){return"string"==typeof n?n:Object.entries(n).map(([o,t])=>`${o}:${t} !important`).join(";")}(n[o])}}`).join("")}function F3(n,o){B_(n),M_(),Z1(n);let t=n?.element.querySelectorAll(".keyboard-layer"),i=!1;for(let a of t)if(a.dataset.layer===o){i=!0;break}if(i)for(let a of t)a.dataset.layer===o?a.classList.add("is-visible"):a.classList.remove("is-visible");return n.focusMathfield(),!0}function B_(n,o=""){let t=n.options.virtualKeyboardContainer;if(!t||!n.stateWillChange(!0))return!1;if(n.element?n.element.classList.add("is-visible"):n.buildAndAttachElement(o),!n.visible){let i=ca();i.visibleVirtualKeyboard&&hb(i.visibleVirtualKeyboard),i.visibleVirtualKeyboard=n;let a=t.style.paddingBottom;n.originalContainerBottomPadding=a,t.style.paddingBottom=a?`calc(${a} + var(--keyboard-height, 276px) - 1px)`:"calc(var(--keyboard-height, 276px) - 1px)"}return setTimeout(()=>{var i;null==(i=n.element)||i.classList.add("is-visible"),n.focusMathfield()},1),n.visible=!0,n.stateChanged(),!1}function hb(n){var o,t,i;let a=n.options.virtualKeyboardContainer;return!a||!n.stateWillChange(!1)||(n.element&&(ca().visibleVirtualKeyboard=void 0,n.disable(),M_(),n.visible=!1,null==(o=n.coreStylesheet)||o.release(),n.coreStylesheet=null,null==(t=n.virtualKeyboardStylesheet)||t.release(),n.virtualKeyboardStylesheet=null,null==(i=n._element)||i.remove(),n._element=void 0,null!==n.originalContainerBottomPadding&&(a.style.paddingBottom=n.originalContainerBottomPadding)),n.visible=!1,n.stateChanged()),!1}function D1(n,o,t){"function"==typeof o&&(t=o,o=1/0),void 0===o&&(o=1/0);let i=n.position,a=!1,r="";for(;!a;){let s=n.at(i);a=0===o||void 0===s||"math"!==s.mode||!(/mord|textord|mpunct/.test(s.type)||"mop"===s.type&&/[a-zA-Z]+/.test(s.value))||!s.hasEmptyBranch("superscript")||!s.hasEmptyBranch("subscript")||"function"==typeof t&&!t(s),a||(s.mode="text",s.command=s.value,s.verbatimLatex=void 0,r+=s.value),i-=1,o-=1}Eo(n,{data:r,inputType:"insertText"})}function P_(n,o,t){"function"==typeof o&&(t=o,o=1/0),void 0===o&&(o=1/0);let i=n.position,a=!1,r=[];for(;!a;){let s=n.at(i);a=0===o||!s||s.isFirstSibling||"text"!==s.mode||" "===s.value||t&&!t(s),a||(r.push(s.serialize({defaultMode:"math"})),s.mode="math"),i-=1,o-=1}Ab(n),Eo(n,{data:Bo(r),inputType:"insertText"})}function Ab(n){var o;let t=n.position-1;for(;t>=0&&"math"===(null==(o=n.at(t))?void 0:o.mode);)t-=1;if(!(t<0)&&"text"===n.at(t).mode&&" "===n.at(t).value&&"math"===n.at(t-1).mode){n.at(t-1).parent.removeChild(n.at(t-1));let i=n.suppressChangeNotifications;n.suppressChangeNotifications=!0,n.position-=1,n.suppressChangeNotifications=i,Eo(n,{inputType:"deleteContent"})}}Er({showAlternateKeys:function dV(n,o){var t,i;let a=mo[o],r=document.createElement("div");r.setAttribute("aria-hidden","true"),r.className="ML__keyboard alternate-keys"+(n.element.classList.contains("material")?" material":""),r.id="mathlive-alternate-keys-panel",r.style.width=a.length>=14?"236px":a.length>=7?"286px":4===a.length||2===a.length?"146px":1===a.length?"86px":"146px",r.style.height="auto";let s="";for(let u of a)s+="<li","string"==typeof u?s+=' data-latex="'+u.replace(/"/g,"&quot;")+'"':(u.latex&&(s+=' data-latex="'+u.latex.replace(/"/g,"&quot;")+'"'),u.content&&(s+=' data-content="'+u.content.replace(/"/g,"&quot;")+'"'),u.insert&&(s+=' data-insert="'+u.insert.replace(/"/g,"&quot;")+'"'),u.command&&(s+="string"==typeof u.command?` data-command="${u.command.replace(/"/g,"&quot;")}"`:" data-command='"+JSON.stringify(u.command).replace(/"/g,"&quot;")+"'"),u.aside&&(s+=` data-aside="${u.aside.replace(/"/g,"&quot;")}"`),u.class&&(s+=` data-classes="${u.class}"`)),s+=">",s+="string"==typeof u?u:null!=(t=u.label)?t:"",s+="</li>";s="<ul>"+s+"</ul>",r.innerHTML=n.options.createHTML(s),Q3(n,[...r.querySelectorAll("li")],"performAlternateKeys"),bh.scrim||(bh.scrim=new bh),bh.scrim.open({root:n.options.virtualKeyboardContainer,child:r});let l=null==(i=n?.element)?void 0:i.querySelector('div.keyboard-layer.is-visible div.rows ul li[data-alt-keys="'+o+'"]'),c=l?.getBoundingClientRect();if(c){c.top-r.clientHeight<0&&(r.style.width="auto",a.length<=6?r.style.height="56px":a.length<=12?r.style.height="108px":a.length<=18?r.style.height="205px":r.classList.add("compact"));let u=(c.top-r.clientHeight+5).toString()+"px",m=Math.max(0,Math.min(window.innerWidth-r.offsetWidth,(c.left+c.right-r.offsetWidth)/2))+"px";r.style.transform="translate("+m+","+u+")",r.classList.add("is-visible")}return!1}},{target:"virtual-keyboard"}),Er({shiftKeyboardLayer:function xV(n){let o=n?.element.querySelectorAll("div.keyboard-layer.is-visible .rows .keycap, div.keyboard-layer.is-visible .rows .action");if(o)for(let t of o){if(t.dataset.unshiftedContent)return!1;let i=t.getAttribute("data-shifted");if(i||/^[a-z]$/.test(t.innerHTML)){t.dataset.unshiftedContent=t.innerHTML,i||(i=t.innerHTML.toUpperCase()),t.innerHTML=n.options.createHTML(i);let a=t.getAttribute("data-command");if(a){t.dataset.unshiftedCommand=a;let r=t.getAttribute("data-shifted-command");if(r)t.dataset.command=r;else{let s=JSON.parse(a);Ea(s)&&(s[1]=s[1].toUpperCase()),t.dataset.command=JSON.stringify(s)}}}}return!1}},{target:"virtual-keyboard"}),Er({hideAlternateKeys:()=>M_(),performAlternateKeys:function bV(n,o){return M_(),n.executeCommand(o)},switchKeyboardLayer:(n,o)=>F3(n,o),unshiftKeyboardLayer:n=>Z1(n),insertAndUnshiftKeyboardLayer:function vV(n,o){return n.executeCommand(["insert",o]),Z1(n),!0}},{target:"virtual-keyboard"}),Er({toggleVirtualKeyboardAlt:function wV(n){let o=!1;return null!=n&&n.element&&(o=n?.element.classList.contains("material"),n.disable()),B_(n,o?"":"material"),!1},toggleVirtualKeyboardShift:function yV(n){var o,t,i;n.options.virtualKeyboardLayout={qwerty:"azerty",azerty:"qwertz",qwertz:"dvorak",dvorak:"colemak",colemak:"qwerty"}[n.options.virtualKeyboardLayout];let a=null!=(i=null==(t=null==(o=n?.element)?void 0:o.querySelector("div.keyboard-layer.is-visible"))?void 0:t.id)?i:"";return n&&n.disable(),B_(n),a&&F3(n,a),!1}},{target:"virtual-keyboard"}),Er({toggleVirtualKeyboard:(n,o)=>function CV(n,o){return n.visible?hb(n):B_(n,o),!1}(n,o),hideVirtualKeyboard:n=>hb(n),showVirtualKeyboard:(n,o)=>B_(n,o)},{target:"virtual-keyboard"});var _b,N3="#mathlive-keystroke-caption-panel{visibility:hidden;background:var(--secondary, hsl(var(--hue, 212), 19%, 26%));border-color:var(--secondary-border, hsl(0,0%,91%));box-shadow:0 3px 6px rgba(0,0,0,0.16),0 3px 6px rgba(0,0,0,0.23);text-align:center;border-radius:6px;padding:16px;position:absolute;z-index:1;display:flex;flex-direction:row-reverse;justify-content:center;--keystroke:white;--on-keystroke:#555;--keystroke-border:#f7f7f7}@media (prefers-color-scheme:dark){body:not([theme='light']) #mathlive-keystroke-caption-panel{--keystroke:hsl(var(--hue, 212), 50%, 30%);--on-keystroke:hsl(0,0%,98%);--keystroke-border:hsl(var(--hue, 212), 50%, 25%)}}body[theme='dark'] #mathlive-keystroke-caption-panel{--keystroke:hsl(var(--hue, 212), 50%, 30%);--on-keystroke:hsl(0,0%,98%);--keystroke-border:hsl(var(--hue, 212), 50%, 25%)}#mathlive-keystroke-caption-panel>span{min-width:14px;margin:0 8px 0 0;padding:4px;background-color:var(--keystroke);color:var(--on-keystroke);fill:currentColor;font-family:system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI','Roboto','Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue',sans-serif;font-size:1em;border-radius:6px;border:2px solid var(--keystroke-border)}",fb=null,gb=null;function Z3(n){return n.keystrokeCaption||(n.keystrokeCaption=Ry("mathlive-keystroke-caption-panel"),void 0===_b&&(_b=gu(N3).toString(36)),fb=xu(null,N3,_b),gb=xu(null,kc,gu(kc).toString(36))),n.keystrokeCaption}function LV(n){if(!n||n.length>1)return null;let o=n[0];return o instanceof Wa&&"("===o.leftDelim&&")"===o.rightDelim?o.removeBranch("body"):null}function U1(n){if(n){for(let o=0;n[o];o++){let t=n[o];if(t instanceof Wa&&"("===t.leftDelim){let i=0,a=0,r=0;for(let s=0;t.body[s];s++)"genfrac"===t.body[s].type&&(i++,a=s),r++;0===r&&1===i&&(n[o]=t.body[a])}}for(let o of n){for(let t of o.branches)if(!o.hasEmptyBranch(t)){U1(o.branch(t));let i=LV(o.branch(t));i&&o.setChildren(i,t)}if(o instanceof So)for(let t of o.cells)U1(t)}}}function D3(n){if(!n)return[];let o=[];for(let t of n){for(let i of t.branches)if(!t.hasEmptyBranch(i)){let a=D3(t.branch(i));o.push(...a)}t instanceof Ro&&o.push(t)}return o}function U3(n){return!!/^(mord|surd|msubsup|leftright|mop|mclose)$/.test(n.type)&&!(n.isExtensibleSymbol||n.isFunction)}function xb(n,o,t){let i=n.at(n.position),{parent:a}=i,r=a instanceof Wa?a.leftDelim+a.rightDelim:"";if("\\lbrace\\rbrace"===r&&(r="{}"),"\\{\\}"===r&&(r="{}"),"\\lparen\\rparen"===r&&(r="()"),"{}"===r&&/\||\\vert|\\Vert|\\mvert|\\mid/.test(o))return Po.insert("math",n,"\\,\\middle"+o+"\\, ",{format:"latex",style:t}),!0;if(("{"===o||"\\{"===o)&&(o="\\lbrace"),("}"===o||"\\}"===o)&&(o="\\rbrace"),"["===o&&(o="\\lbrack"),"]"===o&&(o="\\rbrack"),__[o]){let l=a;if("leftright"===l.type&&l.firstChild===i&&("?"===l.leftDelim||"."===l.leftDelim))return l.leftDelim=o,l.isDirty=!0,!0;if(!(a instanceof Wa&&"|"===a.leftDelim)){if(Po.insert("math",n,`\\left${o}\\right?`,{format:"latex",style:t}),"first"!==i.lastSibling.type){let c=n.offsetOf(i.lastSibling),u=n.extractAtoms([n.position,c]);n.at(n.position).body=u,n.position-=1}return!0}}let s="";if(Object.keys(__).forEach(l=>{o===__[l]&&(s=l)}),s){if(a instanceof Wa&&i.isLastSibling)return a.isDirty=!0,a.rightDelim=o,n.position+=1,Eo(n,{data:o,inputType:"insertText"}),!0;let c,l=n.offsetOf(i.firstSibling);for(c=n.position;c>=l;c--){let p=n.at(c);if(p instanceof Wa&&"?"===p.rightDelim)break}let u=n.at(c);if(c>=l&&u instanceof Wa)return u.rightDelim=o,u.addChildren(n.extractAtoms([c,n.position]),i.treeBranch),n.position=c,Eo(n,{data:o,inputType:"insertText"}),!0;if(a instanceof Wa&&"?"===a.rightDelim)return a.isDirty=!0,a.rightDelim=o,a.parent.addChildren(n.extractAtoms([n.position,n.offsetOf(i.lastSibling)]),a.treeBranch),n.position=n.offsetOf(a),Eo(n,{data:o,inputType:"insertText"}),!0;let m=a.parent;return!!(m instanceof Wa&&"?"===m.rightDelim&&n.at(n.position).isLastSibling)&&(n.position=n.offsetOf(m),xb(n,o,t))}return!1}function j3(n,o,t){var i,a,r,s;let{model:l}=n;!function f$(n){var o,t;if(!n||"Unidentified"===n.key||"Dead"===n.key)return;let i=n.shiftKey&&n.altKey?3:n.altKey?2:n.shiftKey?1:0;for(let a of C_)(null==(o=a.mapping[n.code])?void 0:o[i])===n.key?a.score+=1:null!=(t=a.mapping[n.code])&&t[i]&&(a.score=0);C_.sort((a,r)=>r.score-a.score)}(t);let c=T_();if(n.keyboardLayout!==c.id&&(n.keyboardLayout=c.id,n._keybindings=void 0),clearTimeout(n.inlineShortcutBufferFlushTimer),n.inlineShortcutBufferFlushTimer=0,function SV(n,o){if(n.options.readOnly||!n.keystrokeCaptionVisible)return;let t=Z3(n),i=n.element.getBoundingClientRect();t.style.left=`${i.left}px`,t.style.top=i.top-64+"px",t.innerHTML=n.options.createHTML("<span>"+(K2(o)||o)+"</span>"+t.innerHTML),t.style.visibility="visible",setTimeout(()=>{t.childNodes.length>0&&t.childNodes[t.childNodes.length-1].remove(),0===t.childNodes.length&&(t.style.visibility="hidden")},3e3)}(n,o),t.defaultPrevented)return n.flushInlineShortcutBuffer(),!1;let u,p,m="";if(!n.options.readOnly){if("math"===n.mode)if("[Backspace]"===o)n.inlineShortcutBuffer.pop(),n.flushInlineShortcutBuffer({defer:!0});else if(O3(t)){let L=F1(t),N=[...null!=(a=null==(i=n.inlineShortcutBuffer[n.inlineShortcutBuffer.length-1])?void 0:i.keystrokes)?a:[],L];n.inlineShortcutBuffer.push({state:l.getState(),keystrokes:N,leftSiblings:PV(n)});let R=0,j="";for(;!u&&R<N.length;)p=n.inlineShortcutBuffer.length-(N.length-R),j=N.slice(R).join(""),u=U2(n.inlineShortcutBuffer[p].leftSiblings,j,n.options.inlineShortcuts),!u&&/^[a-zA-Z][a-zA-Z0-9]+?([_\^][a-zA-Z0-9\*\+\-]+?)?$/.test(j)&&(u=n.options.onInlineShortcut(n,j)),R+=1;n.flushInlineShortcutBuffer({defer:!0})}else n.flushInlineShortcutBuffer();if(n.options.smartMode){let L=n.mode;u?n.mode="math":function kV(n,o,t){if(n.smartModeSuppressed)return!1;let{model:i}=n;if(!i.at(i.position).isLastSibling||!t||!O3(t))return!1;let a=F1(t);if(!i.selectionIsCollapsed)return!("text"!==n.mode||!/[/_^]/.test(a));let r=function TV(n){let o="",t=n.position,i=!1;for(;!i;){let a=n.at(t);i=!(a&&("text"===a.mode||"math"===a.mode&&/mord|textord|mpunct/.test(a.type))),i||(o=a.value+o),t-=1}return o}(i)+a;if("text"===n.mode){if("Esc"===o||/[/\\]/.test(a))return!0;if(/[\^_]/.test(a))return/(^|\s)[a-zA-Z][^_]$/.test(r)&&P_(i,1),!0;let s={")":"(","}":"{","]":"["}[a],{parent:l}=i.at(i.position);if(s&&l instanceof Wa&&l.leftDelim===s)return!0;if(/(^|[^a-zA-Z])(a|I) $/.test(r))return!1;if(/[$\u20ac\xa3\u20a4\u20ba\xa5\xa4\u0e3f\xa2\u20a1\u20a7\u20a8\u20b9\u20a9\u20b1]/u.test(a))return!0;if(/(^|[^a-zA-Z'\u2019])[a-zA-Z] $/.test(r))return P_(i,1),!1;if(/\D\.[^\d\s]$/.test(r)){P_(i,1);let c=i.at(i.position);return c.value="\u22c5",c.style.variant="normal",c.command="\\cdot",c.verbatimLatex=void 0,Eo(i,{data:"\\cdot",inputType:"insertText"}),!0}if(/(^|\s)[a-zA-Z][^a-zA-Z]$/.test(r)||/\.\d$/.test(r)||/\([\d+\-.]$/.test(r))return P_(i,1),!0;if(/\([a-z][,;]$/.test(r))return P_(i,2),!0;if(/[\d+\-=><*|]$/.test(a))return Ab(i),!0}else{if("[Space]"===o)return D1(i,void 0,s=>/[a-z][:,;.]$/.test(s.value)),!0;if(/[a-zA-Z]{3,}$/.test(r)&&!/(dxd|abc|xyz|uvw)$/.test(r))return D1(i,void 0,s=>/[a-zA-Z]/.test(s.value)),!0;if(/(^|\W)(if)$/i.test(r))return D1(i,1),!0;if(/(\u0393|\u0394|\u0398|\u039B|\u039E|\u03A0|\u03A3|\u03A5|\u03A6|\u03A8|\u03A9|[\u03B1-\u03C9]|\u03D1|\u03D5|\u03D6|\u03F1|\u03F5){3,}$/u.test(r)&&!/(\u03b1\u03b2\u03b3)$/.test(r))return D1(i,void 0,s=>/(:|,|;|.|\u0393|\u0394|\u0398|\u039B|\u039E|\u03A0|\u03A3|\u03A5|\u03A6|\u03A8|\u03A9|[\u03B1-\u03C9]|\u03D1|\u03D5|\u03D6|\u03F1|\u03F5)/u.test(s.value)),!0;if("?"===a||"."===a&&!/[\d-+]\.$/.test(r))return!0}return!1}(n,o,t)&&(n.mode={math:"text",text:"math"}[n.mode],m=""),n.mode!==L&&(null!=(r=n.host)&&r.dispatchEvent(new Event("mode-change",{bubbles:!0,composed:!0,cancelable:!0}))||(n.mode=L))}}if(!u){if(m||(m=function b$(n,o,t){if(0===n.length)return"";let i=E1(e3(t));for(let a=n.length-1;a>=0;a--)if(n[a].key===i&&(!n[a].ifMode||n[a].ifMode===o))return n[a].command;return""}(n.keybindings,n.mode,o)),!m&&("[Enter]"===o||"[Return]"===o)){let L=!1;return Co(l,{inputType:"insertLineBreak"})&&(n.host&&(L=!n.host.dispatchEvent(new Event("change",{bubbles:!0,composed:!0}))),L||t.preventDefault&&(t.preventDefault(),t.stopPropagation()),Eo(l,{inputType:"insertLineBreak"})),L}if("math"===n.mode){if("[Space]"===o){if(n.flushInlineShortcutBuffer(),n.options.mathModeSpace)return n.snapshot(),Po.insert("math",l,n.options.mathModeSpace,{format:"latex"}),m="",n.dirty=!0,n.scrollIntoView(),t.preventDefault&&(t.preventDefault(),t.stopPropagation()),!1;let L=l.at(l.position+1),N=l.at(l.position-1);("text"===L?.mode||"text"===N?.mode)&&(n.snapshot(),Po.insert("text",l," "),n.dirty=!0)}null!=(s=l.at(l.position))&&s.isDigit()&&","===n.options.decimalSeparator&&","===F1(t)&&(m="insertDecimalSeparator")}}if(!u&&!m)return!0;let f=l.at(Math.max(l.position,l.anchor)),{parent:b}=f;if("moveAfterParent"===m&&"leftright"===b?.type&&f.isLastSibling&&n.options.smartFence&&xb(l,".",n.style)&&(m="",Vo(n)),n.keyboardDelegate.cancelComposition(),m)n.executeCommand(m);else if(u){let L=Et(Et({},l.at(l.position).computedStyle),n.style);if(!/^\\({|}|\[|]|@|#|\$|%|&|\^|_|backslash)$/.test(u)){let N=n.mode;Po.insert(n.mode,l,F1(t),{suppressChangeNotifications:!0,style:L}),n.snapshot(),l.setState(n.inlineShortcutBuffer[p].state),n.mode=N}l.deferNotifications({content:!0,selection:!0,data:u??null,type:"insertText"},()=>(Po.insert(n.mode,l,u,{format:"latex",style:L}),Ab(n.model),u.endsWith(" ")&&(n.mode="text",Po.insert("text",l," ",{style:L})),!0)),n.snapshot(),n.dirty=!0,l.announce("replacement")}return n.scrollIntoView(),t.preventDefault&&t.preventDefault(),!1}function bb(n,o,t){var i;let{model:a}=n;if(n.options.readOnly)return void a.announce("plonk");if((t=t??{}).focus&&n.focus(),t.feedback&&(n.options.keypressVibration&&d2()&&navigator.vibrate(3),n.playSound("keypress")),"string"==typeof t.mode&&n.switchMode(t.mode),t.simulateKeystroke){let c=o.charAt(0),u=new KeyboardEvent("keypress",{key:c});if(!j3(n,c,u))return}let r=a.at(a.position),s=Et(Et({},r.computedStyle),n.style);a.selectionIsCollapsed||(a.deleteAtoms(Vs(a.selection)),n.snapshot());let l=Ty(o);if("latex"===n.mode)a.deferNotifications({content:!0,selection:!0,data:o,type:"insertText"},()=>{Y2(n);for(let c of l)Po.insert("latex",a,c);O1(n)});else if("text"===n.mode)for(let c of l)Po.insert("text",a,c,{style:s});else if("math"===n.mode)for(let c of l){let u={"^":"moveToSuperscript",_:"moveToSubscript"," ":"moveAfterParent"}[c];" "===c&&n.options.mathModeSpace&&(u=["insert",n.options.mathModeSpace]),u?n.executeCommand(u):/\d/.test(c)&&n.options.smartSuperscript&&"superscript"===r.treeBranch&&"mop"!==(null==(i=r.parent)?void 0:i.type)&&r.hasNoSiblings?(Po.insert("math",a,c,{style:s}),y3(a)):("mord"===r.type&&/[a-zA-Z]/.test(r.value)&&/[a-zA-Z]/.test(c)&&(r.style.variant&&(s.variant=r.style.variant),r.style.variantStyle&&(s.variantStyle=r.style.variantStyle)),Po.insert("math",a,c,{style:s}))}n.snapshotAndCoalesce(),n.dirty=!0,n.scrollIntoView()}function PV(n){let o=n.model,t=[],i=o.at(Math.min(o.position,o.anchor));for(;"first"!==i.type;)t.push(i),i=i.leftSibling;return t}function q3(n,o){var t,i,a,r,s,l;let c={};"string"==typeof o.color&&(c.verbatimColor=o.color,c.color=null!=(t=n.colorMap(o.color))?t:"none"),"string"==typeof o.backgroundColor&&(c.verbatimBackgroundColor=o.backgroundColor,c.backgroundColor=null!=(i=n.backgroundColorMap(o.backgroundColor))?i:"none"),"string"==typeof o.fontFamily&&(c.fontFamily=o.fontFamily),"string"==typeof o.series&&(c.fontSeries=o.series),"string"==typeof o.fontSeries&&(c.fontSeries=o.fontSeries.toLowerCase()),c.fontSeries&&(c.fontSeries=null!=(a={bold:"b",medium:"m",normal:"m"}[c.fontSeries])?a:c.fontSeries),"string"==typeof o.shape&&(c.fontShape=o.shape),"string"==typeof o.fontShape&&(c.fontShape=o.fontShape.toLowerCase()),c.fontShape&&(c.fontShape=null!=(r={italic:"it",up:"n",upright:"n",normal:"n"}[c.fontShape])?r:c.fontShape);let u=null!=(s=o.size)?s:o.fontSize;return"number"==typeof u?c.fontSize=Math.max(1,Math.min(10,u)):"string"==typeof u&&(c.fontSize=null!=(l={size1:1,size2:2,size3:3,size4:4,size5:5,size6:6,size7:7,size8:8,size9:9,size10:10}[u.toLowerCase()])?l:{tiny:1,scriptsize:2,footnotesize:3,small:4,normal:5,normalsize:5,large:6,Large:7,LARGE:8,huge:9,Huge:10}[u]),c}new class extends Po{constructor(){super("math")}onPaste(n,o){if(!o||!Co(n.model,{data:"string"==typeof o?o:null,dataTransfer:"string"==typeof o?null:o,inputType:"insertFromPaste"}))return!1;let t="",i="auto",a="string"!=typeof o?o.getData("application/json+mathlive"):"";if(a)try{let r=JSON.parse(a);if(r&&Array.isArray(r)){n.snapshot();let s=wl(r,n),{model:l}=n;l.selectionIsCollapsed||l.deleteAtoms(Vs(l.selection));let c=l.at(l.position);if(c.parent instanceof So){let u=[],m=[];"first"===s[0].type&&s.shift(),"first"===s[s.length-1].type&&s.pop();for(let L of s)"first"===L.type&&m.length>0?(u.push(m),m=[L]):m.push(L);m.length>0&&u.push(m);let p=Number(c.treeBranch[0]),f=Number(c.treeBranch[1]),b=c.parent.maxColumns;for(;c.parent.colCount-f<u.length&&c.parent.colCount<b;)c.parent.addColumn();c.parent.addChildrenAfter(u[0],c);for(let L=1;L<u.length;L++)f++,f>=b&&(f=0,c.parent.addRowAfter(p),p++),c.parent.setCell(p,f,u[L])}else c.parent.addChildrenAfter(s.filter(u=>"first"!==u.type),c);return l.position=l.offsetOf(s[s.length-1]),Eo(l,{inputType:"insertFromPaste"}),Vo(n),!0}}catch{}if(a="string"!=typeof o?o.getData("application/json"):"",a&&n.computeEngine)try{let r=JSON.parse(a);if("object"==typeof r&&"latex"in r&&r.latex&&(t=r.latex),!t){let s=n.computeEngine.box(r);s&&!s.has("Error")&&(t=s.latex)}t||(i="latex")}catch{}if(!t&&"string"!=typeof o&&(t=o.getData("application/x-latex"),t&&(i="latex")),t||(t="string"==typeof o?o:o.getData("text/plain")),t){let r;return n.snapshot(),[r,t]=j2(t),"auto"===i&&r&&(i="latex"),this.insert(n.model,t,{format:i})&&Vo(n),!0}return!1}insert(n,o,t){var i,a;let r="string"==typeof o?o:null!=(a=null==(i=n.mathfield.computeEngine)?void 0:i.box(o).latex)?a:"";if(!t.suppressChangeNotifications&&!Co(n,{data:r,inputType:"insertText"}))return!1;if(t.insertionMode||(t.insertionMode="replaceSelection"),t.selectionMode||(t.selectionMode="placeholder"),t.format||(t.format="auto"),n.mathfield.smartFence){if(n.selectionIsCollapsed&&"string"==typeof o&&xb(n,o,t.style))return!0}else if("replaceAll"!==t.insertionMode){let{parent:W}=n.at(n.position);if(W instanceof Wa&&"?"===W.rightDelim&&n.at(n.position).isLastSibling&&"string"==typeof o&&/^[)}\]|]$/.test(o))return W.isDirty=!0,W.rightDelim=o,n.position+=1,r3(n),Eo(n,{data:r,inputType:"insertText"}),!0}let{suppressChangeNotifications:s}=n;t.suppressChangeNotifications&&(n.suppressChangeNotifications=!0);let l=n.suppressChangeNotifications;n.suppressChangeNotifications=!0;let c={};if(c[0]="replaceAll"===t.insertionMode?"":n.getValue(n.selection,"latex-unstyled"),c["?"]="\\placeholder{}",c["@"]=c["?"],"replaceSelection"!==t.insertionMode||n.selectionIsCollapsed?"replaceAll"===t.insertionMode?(n.root.setChildren([],"body"),n.position=0):"insertBefore"===t.insertionMode?n.collapseSelection("backward"):"insertAfter"===t.insertionMode&&n.collapseSelection("forward"):n.deleteAtoms(Vs(n.selection)),n.at(n.position).isLastSibling||"placeholder"!==n.at(n.position+1).type?"placeholder"===n.at(n.position).type&&n.deleteAtoms([n.position-1,n.position]):n.deleteAtoms([n.position,n.position+1]),c[0])c["@"]=c[0];else if("string"==typeof o&&/(^|[^\\])#@/.test(o)){let W=function BV(n){let o=n.at(n.position);if("text"===o.mode){for(;!o.isFirstSibling&&"text"===o.mode;)o=o.leftSibling;return n.offsetOf(o)}let t=o,i=!1;if("mclose"===o.type){let a=ky[o.value];for(;!o.isFirstSibling&&("mopen"!==o.type||o.value!==a);)o=o.leftSibling;o.isFirstSibling||(o=o.leftSibling),i=!0}else"leftright"===o.type&&(o=o.leftSibling,i=!0);if(i)for(;!o.isFirstSibling&&(o.isFunction||U3(o));)o=o.leftSibling;else{let a=[];for(;!o.isFirstSibling&&(U3(o)||a.length>0);)"mclose"===o.type&&a.unshift(o.value),"mopen"===o.type&&a.length>0&&o.value===ky[a[0]]&&a.shift(),o=o.leftSibling}return t===o?-1:n.offsetOf(o)}(n);W>=0&&(c["@"]=n.getValue(W,n.position,"latex-unstyled"),n.deleteAtoms([W,n.position]))}c[0]||(c[0]=c["?"]);let u=!1,[p,f]=function MV(n,o,t,i){var a;let r,s=[];if("string"!=typeof o||"math-json"===i.format){if(!n.mathfield.computeEngine)return["math-json",[]];[r,o]=["latex",n.mathfield.computeEngine.box(o).latex],s=kr(o,n.mathfield,{parseMode:"math"})}else"string"==typeof o&&"ascii-math"===i.format?([r,o]=C1(o,{format:"ascii-math",inlineShortcuts:n.mathfield.options.inlineShortcuts}),s=kr(o,n.mathfield,{parseMode:"math"}),"latex"!==r&&n.options.removeExtraneousParentheses&&U1(s)):("auto"===i.format||null!=(a=i.format)&&a.startsWith("latex"))&&("auto"===i.format&&([r,o]=C1(o,{format:"auto",inlineShortcuts:n.mathfield.options.inlineShortcuts})),"latex"===i.format&&([,o]=j2(o)),s=kr(o,n.mathfield,{parseMode:"math",args:t}),"latex"!==i.format&&n.options.removeExtraneousParentheses&&U1(s));return yd(s,i.style),[r??"latex",s]}(n,o,W=>(u=!0,c[W]),t);if(!f)return!1;let b=D3(f),L=b.filter(W=>W.placeholderId&&!n.mathfield.placeholders.has(W.placeholderId)),N=b.map(W=>W.placeholderId);[...n.mathfield.placeholders.keys()].filter(W=>!N.includes(W)).forEach(W=>{var le;n.mathfield.placeholders.has(W)&&(null==(le=n.mathfield.placeholders.get(W))||le.field.remove(),n.mathfield.placeholders.delete(W))}),L.forEach(W=>{var le,ve;W.placeholderId&&n.mathfield.placeholders.has(W.placeholderId);let ce=n.mathfield.options.virtualKeyboardMode;"manual"===ce&&(ce="onfocus");let te=new Tb(mi(Et({},n.mathfield.options),{virtualKeyboardMode:ce,readOnly:!1})),Se=W.defaultValue?kt.serialize(W.defaultValue,{defaultMode:"math"}):"";te.value=Se,te.addEventListener("input",()=>{(function C$(n,o){n.suppressChangeNotifications||!n.mathfield.host||(n.suppressChangeNotifications=!0,n.mathfield.host.dispatchEvent(new CustomEvent("placeholder-change",{detail:{placeholderId:o},bubbles:!0,composed:!0})),n.suppressChangeNotifications=!1)})(n,W.placeholderId),setTimeout(()=>Vo(n.mathfield))}),null==(ve=null==(le=n.mathfield.element)?void 0:le.querySelector(".ML__placeholdercontainer"))||ve.appendChild(te),n.mathfield.placeholders.set(W.placeholderId,{atom:W,field:te})});let{parent:R}=n.at(n.position);if("latex"!==p&&n.options.removeExtraneousParentheses&&R instanceof Wa&&"("===R.leftDelim&&R.hasEmptyBranch("body")&&1===f.length&&"genfrac"===f[0].type){let W=R.parent,le=R.treeBranch;W.removeChild(R),W.setChildren(f,le)}let j=R.hasEmptyBranch("body"),G=n.at(n.position);G.parent.addChildrenAfter(f,G),"latex"===p&&"string"==typeof o&&"root"===R.type&&j&&!u&&(R.verbatimLatex=o),n.suppressChangeNotifications=l;let ae=f[f.length-1];if("placeholder"===t.selectionMode){let W=f.reduce((le,ve)=>[...le,...ve.children.filter(ce=>"placeholder"===ce.type)],[]);if(W.length>0){let le=n.offsetOf(W[0]);n.setSelection(le-1,le),n.announce("move")}else ae&&(n.position=n.offsetOf(ae))}else"before"===t.selectionMode||("after"===t.selectionMode?ae&&(n.position=n.offsetOf(ae)):"item"===t.selectionMode&&n.setSelection(n.anchor,n.offsetOf(ae)));return Eo(n,{data:r,inputType:"insertText"}),n.suppressChangeNotifications=s,!0}},Er({undo:n=>(Nm(n,"accept"),n.undo(),!0),redo:n=>(Nm(n,"accept"),n.redo(),!0),scrollIntoView:n=>(n.scrollIntoView(),!0),scrollToStart:n=>(n.field.scroll(0,0),!0),scrollToEnd:n=>{let o=n.field.getBoundingClientRect();return n.field.scroll(o.left-window.scrollX,0),!0},toggleKeystrokeCaption:function EV(n){return n.keystrokeCaptionVisible=!n.keystrokeCaptionVisible,n.keystrokeCaptionVisible?(n.keystrokeCaption=Z3(n),n.keystrokeCaption.innerHTML=""):n.keystrokeCaption&&(n.keystrokeCaption.style.visibility="hidden"),!1},plonk:n=>(n.model.announce("plonk"),!0),switchMode:(n,o,t,i)=>(n.switchMode(o,t,i),!0),insert:(n,o,t)=>n.insert(o,t),typedText:(n,o,t)=>(bb(n,o,t),!0),insertDecimalSeparator:n=>{if("math"===n.mode&&","===n.options.decimalSeparator){let o=n.model;if(o.at(Math.max(o.position,o.anchor)).isDigit())return n.snapshot(),n.insert("{,}",{format:"latex"}),!0}return n.insert("."),!0},commit:n=>{var o;return Co(n.model,{inputType:"insertLineBreak"})&&(null==(o=n.host)||o.dispatchEvent(new Event("change",{bubbles:!0,composed:!0})),Eo(n.model,{inputType:"insertLineBreak"})),!0}}),Er({copyToClipboard:n=>(n.focus(),n.model.selectionIsCollapsed&&n.select(),document.queryCommandSupported("copy")?document.execCommand("copy"):n.element.querySelector(".ML__keyboard-sink").dispatchEvent(new ClipboardEvent("copy",{bubbles:!0,composed:!0})),!1),cutToClipboard:n=>(n.focus(),document.queryCommandSupported("cut")?document.execCommand("cut"):n.element.querySelector(".ML__keyboard-sink").dispatchEvent(new ClipboardEvent("cut",{bubbles:!0,composed:!0})),!0),pasteFromClipboard:n=>(n.focus(),document.queryCommandSupported("paste")?document.execCommand("paste"):navigator.clipboard.readText().then(o=>{o&&Co(n.model,{inputType:"insertFromPaste",data:o})?(n.snapshot(),n.insert(o)&&(Eo(n.model,{inputType:"insertFromPaste"}),Vo(n))):n.model.announce("plonk")}),!0)},{target:"mathfield",category:"clipboard"}),Er({applyStyle:function QV(n,o){n.flushInlineShortcutBuffer();let t=q3(n,o),{model:i}=n;return i.selectionIsCollapsed?(n.style.fontSeries&&t.fontSeries===n.style.fontSeries&&(t.fontSeries="auto"),t.fontShape&&t.fontShape===n.style.fontShape&&(t.fontShape="auto"),t.color&&t.color===n.style.color&&(t.color="none"),t.backgroundColor&&t.backgroundColor===n.style.backgroundColor&&(t.backgroundColor="none"),t.fontSize&&t.fontSize===n.style.fontSize&&(t.fontSize="auto"),n.style=Et(Et({},n.style),t)):n.model.deferNotifications({content:!0,type:"insertText"},()=>{i.selection.ranges.forEach(a=>ub(i,a,t,{operation:"toggle"})),n.snapshot()}),!0}},{target:"mathfield"});var Dm=null,Q_=0;function R3(n){return n instanceof PointerEvent}function FV(n,o,t){if(n>=t.left&&n<=t.right&&o>=t.top&&o<=t.bottom)return 0;let i=n-(t.left+t.right)/2,a=o-(t.top+t.bottom)/2;return i*i+a*a}function H3(n,o,t,i,a){if(!t.id)return[1/0,null];if(o.has(t.id))return o.get(t.id);let r=y_(n,t);if(!r)return[1/0,null];let s=[1/0,null];if(t.hasChildren&&!t.captureSelection&&i>=r.left&&i<=r.right)for(let l of t.children){let c=H3(n,o,l,i,a);c[0]<=s[0]&&(s=c)}return s[1]||(s=[FV(i,a,r),t]),o.set(t.id,s),s}function NV(n,o,t){let[,i]=H3(n,new Map,n.model.root,o,t);return i}function F_(n,o,t,i){var a;let r=n.fieldContent.getBoundingClientRect();if(o>r.right||t>r.bottom+8)return n.model.lastOffset;if(o<r.left||t<r.top-8)return 0;(i=i??{}).bias=null!=(a=i.bias)?a:0;let s=NV(n,o,t),l=[],c=s;for(;c;)l.unshift(c),c=c.parent;for(let m of l)if(m.captureSelection){s=m;break}let u=n.model.offsetOf(s);if(u<0)return-1;if(s.leftSibling)if(0===i.bias&&"placeholder"!==s.type){let m=y_(n,s);m&&o<(m.left+m.right)/2&&(u=n.model.offsetOf(s.leftSibling))}else i.bias<0&&(u=n.model.offsetOf(s.leftSibling));return u}new class extends Po{constructor(){super("text")}onPaste(n,o){if(!o)return!1;let t="string"==typeof o?o:o.getData("text/plain");return!(!t||!Co(n.model,{inputType:"insertFromPaste",data:t})||(n.snapshot(),this.insert(n.model,t)&&(Eo(n.model,{inputType:"insertFromPaste"}),Vo(n)),0))}insert(n,o,t={}){if(!Co(n,{data:o,inputType:"insertText"}))return!1;t.insertionMode||(t.insertionMode="replaceSelection"),t.selectionMode||(t.selectionMode="placeholder"),t.format||(t.format="auto");let{suppressChangeNotifications:i}=n;t.suppressChangeNotifications&&(n.suppressChangeNotifications=!0);let a=n.suppressChangeNotifications;n.suppressChangeNotifications=!0,"replaceSelection"!==t.insertionMode||n.selectionIsCollapsed?"replaceAll"===t.insertionMode?(n.root.setChildren([],"body"),n.position=0):"insertBefore"===t.insertionMode?n.collapseSelection("backward"):"insertAfter"===t.insertionMode&&n.collapseSelection("forward"):n.deleteAtoms(Vs(n.selection));let r=function DV(n,o){return kr(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=n.replace(/\\/g,"\\textbackslash ")).replace(/#/g,"\\#")).replace(/\$/g,"\\$")).replace(/%/g,"\\%")).replace(/&/g,"\\&")).replace(/_/g,"\\_")).replace(/{/g,"\\textbraceleft ")).replace(/}/g,"\\textbraceright ")).replace(/\^/g,"\\textasciicircum ")).replace(/~/g,"\\textasciitilde ")).replace(/\xa3/g,"\\textsterling "),o,{parseMode:"text"})}(o,n.mathfield);if(yd(r,t.style),!r)return!1;let s=n.at(n.position),l=s.parent.addChildrenAfter(r,s);return n.suppressChangeNotifications=a,"before"===t.selectionMode||("item"===t.selectionMode?n.setSelection(n.anchor,n.offsetOf(l)):l&&(n.position=n.offsetOf(l))),Eo(n,{data:o,inputType:"insertText"}),n.suppressChangeNotifications=i,!0}};var vb,wb,j1="mathlive#remote-virtual-keyboard-message";function N_(n){if("object"!=typeof n)return{};let o={};return n.fontsDirectory&&(o.fontsDirectory=n.fontsDirectory),n.soundsDirectory&&(o.soundsDirectory=n.soundsDirectory),n.virtualKeyboards&&(o.virtualKeyboards=n.virtualKeyboards),n.virtualKeyboardLayout&&(o.virtualKeyboardLayout=n.virtualKeyboardLayout),n.customVirtualKeyboardLayers&&(o.customVirtualKeyboardLayers=n.customVirtualKeyboardLayers),n.customVirtualKeyboards&&(o.customVirtualKeyboards=n.customVirtualKeyboards),n.virtualKeyboardTheme&&(o.virtualKeyboardTheme=n.virtualKeyboardTheme),n.keypressVibration&&(o.keypressVibration=n.keypressVibration),n.keypressSound&&(o.keypressSound=n.keypressSound),n.plonkSound&&(o.plonkSound=n.plonkSound),n.virtualKeyboardToolbar&&(o.virtualKeyboardToolbar=n.virtualKeyboardToolbar),n.targetOrigin&&(o.targetOrigin=n.targetOrigin),n.originValidator&&(o.originValidator=n.originValidator),o}As()||console.error('MathLive: this version of the MathLive library is for use in the browser. A subset of the API is available on the server side in the "mathlive-ssr" library. If using server side rendering (with React for example) you may want to do a dynamic import of the MathLive library inside a `useEffect()` call.');var yb=As()?document.createElement("template"):null;yb&&(yb.innerHTML='<style>\n:host { display: block; position: relative; overflow: hidden auto;}\n:host([hidden]) { display: none; }\n:host([disabled]) { opacity:  .5; }\n:host(:focus), :host(:focus-within) {\n  outline: Highlight auto 1px;    /* For Firefox */\n  outline: -webkit-focus-ring-color auto 1px;\n}\n:host([readonly]), :host([read-only]) { outline: none; }\n</style>\n<div></div><slot style="display:none"></slot>');var Di=new WeakMap,Cl=class extends HTMLElement{constructor(n){super(),Cb()&&(this._internals=this.attachInternals(),this._internals.role="math",this._internals.ariaLabel="math input field",this._internals.ariaMultiLine="false"),this.attachShadow({mode:"open"}),this.shadowRoot.append(yb.content.cloneNode(!0));let o=this.shadowRoot.querySelector("slot:not([name])");this._slotValue=o.assignedNodes().map(t=>3===t.nodeType?t.textContent:"").join("").trim(),n&&this.setOptions(n),this.shadowRoot.host.addEventListener("pointerdown",t=>this.onPointerDown(),!0),this.shadowRoot.host.addEventListener("focus",()=>{var t;return null==(t=this._mathfield)?void 0:t.focus()},!0),this.shadowRoot.host.addEventListener("blur",()=>{var t;return null==(t=this._mathfield)?void 0:t.blur()},!0)}static get formAssociated(){return Cb()}static get optionsAttributes(){return{"default-mode":"string","fonts-directory":"string","sounds-directory":"string","horizontal-spacing-scale":"string","math-mode-space":"string","inline-shortcut-timeout":"string","keypress-vibration":"on/off","keypress-sound":"string","plonk-sound":"string","letter-shape-style":"string",locale:"string","read-only":"boolean","remove-extraneous-parentheses":"on/off","smart-fence":"on/off","smart-mode":"on/off","smart-superscript":"on/off","speech-engine":"string","speech-engine-rate":"string","speech-engine-voice":"string","text-to-speech-markup":"string","text-to-speech-rules":"string","virtual-keyboard-layout":"string","virtual-keyboard-mode":"string","virtual-keyboard-theme":"string","virtual-keyboards":"string","use-shared-virtual-keyboard":"boolean","shared-virtual-keyboard-target-origin":"string"}}static get observedAttributes(){return[...Object.keys(Cl.optionsAttributes),"disabled","readonly","read-only"]}onPointerDown(){window.addEventListener("pointerup",n=>{n.target===this&&this.dispatchEvent(new MouseEvent("click",{altKey:n.altKey,button:n.button,buttons:n.buttons,clientX:n.clientX,clientY:n.clientY,ctrlKey:n.ctrlKey,metaKey:n.metaKey,movementX:n.movementX,movementY:n.movementY,relatedTarget:n.relatedTarget,screenX:n.screenX,screenY:n.screenY,shiftKey:n.shiftKey}))},{once:!0})}getPlaceholderField(n){var o;return null==(o=this._mathfield)?void 0:o.getPlaceholderField(n)}addEventListener(n,o,t){return super.addEventListener(n,o,t)}removeEventListener(n,o,t){super.removeEventListener(n,o,t)}get form(){var n;return null==(n=this._internals)?void 0:n.form}get name(){var n;return null!=(n=this.getAttribute("name"))?n:""}get type(){return this.localName}get mode(){var n,o;return null!=(o=null==(n=this._mathfield)?void 0:n.mode)?o:"math"}set mode(n){this._mathfield&&(this._mathfield.mode=n)}get computeEngine(){if(this._mathfield)return this._mathfield.computeEngine}set computeEngine(n){this._mathfield&&this._mathfield.setOptions({computeEngine:n})}get expression(){if(this._mathfield)return globalThis[Symbol.for("io.cortexjs.compute-engine")]||console.error('MathLive: The CortexJS Compute Engine library is not available.\nLoad the library, for example with:\nimport "https://unpkg.com/@cortex-js/compute-engine?module"'),this._mathfield.expression}set expression(n){var o,t;if(!this._mathfield)return;let i=null!=(t=null==(o=this.computeEngine)?void 0:o.box(n).latex)?t:null;null!==i&&this._mathfield.setValue(i),globalThis[Symbol.for("io.cortexjs.compute-engine")]||console.error('MathLive: The CortexJS Compute Engine library is not available.\nLoad the library, for example with:\nimport "https://unpkg.com/@cortex-js/compute-engine?module"')}get errors(){var n,o;return null!=(o=null==(n=this._mathfield)?void 0:n.errors)?o:[]}get placeholders(){if(!this._mathfield)return{};let n={};for(let[o,t]of this._mathfield.placeholders)n[o]=t.field;return n}getOptions(n){return this._mathfield?gh(this._mathfield.options,n):Di.has(this)?gh(tb(nb(),Di.get(this).options),n):null}getOption(n){return this.getOptions([n])[n]}setOptions(n){if(this._mathfield)this._mathfield.setOptions(n),this._mathfield.placeholders.forEach(o=>{o.field.setOptions(mi(Et({},n),{readOnly:!1}))});else if(Di.has(this)){let o=Et(Et({},Di.get(this).options),n);Di.set(this,mi(Et({},Di.get(this)),{selection:{ranges:o.readOnly?[[0,0]]:[[0,-1]]},options:o}))}else Di.set(this,{value:void 0,selection:{ranges:[[0,0]]},options:n});!function RV(n){let o=nb(),t=n.getOptions();Object.keys(Cl.optionsAttributes).forEach(i=>{let a=Ec(i);"on/off"===Cl.optionsAttributes[i]?o[a]!==t[a]?n.setAttribute(i,t[a]?"on":"off"):n.removeAttribute(i):o[a]!==t[a]&&("boolean"===Cl.optionsAttributes[i]?t[a]?n.setAttribute(i,""):n.removeAttribute(i):("string"==typeof t[a]||"number"==typeof t[a])&&n.setAttribute(i,t[a].toString()))})}(this)}executeCommand(n){var o,t;return null!=(t=null==(o=this._mathfield)?void 0:o.executeCommand(n))&&t}getValue(n,o,t){var i,a;if(this._mathfield)return this._mathfield.model.getValue(n,o,t);if(Di.has(this)){let r,s,l;if(B1(n)?([r,s]=n.ranges[0],l=o):L1(n)?([r,s]=n,l=o):wd(n)&&wd(o)?(r=n,s=o,l=t):(r=0,s=-1,l=n),(void 0===l||"latex"===l)&&0===r&&-1===s)return null!=(a=null!=(i=Di.get(this).value)?i:this.textContent)?a:""}return""}setValue(n,o){if(this._mathfield&&void 0!==n)return o||(o={suppressChangeNotifications:!0}),void this._mathfield.setValue(n,o);if(Di.has(this)){let i=Di.get(this).options;return void Di.set(this,{value:n,selection:{ranges:i.readOnly?[[0,0]]:[[0,-1]],direction:"forward"},options:i})}let t=q1(this);Di.set(this,{value:n,selection:{ranges:t.readOnly?[[0,0]]:[[0,-1]],direction:"forward"},options:t})}hasFocus(){var n,o;return null!=(o=null==(n=this._mathfield)?void 0:n.hasFocus())&&o}get virtualKeyboardState(){var n,o;return null!=(o=null==(n=this._mathfield)?void 0:n.virtualKeyboardState)?o:"hidden"}set virtualKeyboardState(n){this._mathfield&&(this._mathfield.virtualKeyboardState=n)}focus(){super.focus()}blur(){var n;null==(n=this._mathfield)||n.blur(),super.blur()}select(){var n;null==(n=this._mathfield)||n.select()}insert(n,o){var t,i;return null!=(i=null==(t=this._mathfield)?void 0:t.insert(n,o))&&i}applyStyle(n,o){var t;return null==(t=this._mathfield)?void 0:t.applyStyle(n,o)}get caretPoint(){var n,o;return null!=(o=null==(n=this._mathfield)?void 0:n.getCaretPoint())?o:null}set caretPoint(n){var o;n&&(null==(o=this._mathfield)||o.setCaretPoint(n.x,n.y))}setCaretPoint(n,o){var t,i;return null!=(i=null==(t=this._mathfield)?void 0:t.setCaretPoint(n,o))&&i}offsetFromPoint(n,o,t){return this._mathfield?F_(this._mathfield,n,o,t):-1}hitboxFromOffset(n){if(!this._mathfield)return null;let o=this._mathfield.model.at(n);if(!o)return null;let t=y_(this._mathfield,o);return t?new DOMRect(t.left,t.top,t.right-t.left,t.bottom-t.top):null}resetUndo(){var n;null==(n=this._mathfield)||n.resetUndo()}canUndo(){return!!this._mathfield&&this._mathfield.canUndo()}canRedo(){return!!this._mathfield&&this._mathfield.canRedo()}connectedCallback(){var n,o,t;Cb()||(this.hasAttribute("role")||this.setAttribute("role","math"),this.hasAttribute("aria-label")||this.setAttribute("aria-label","math input field"),this.setAttribute("aria-multiline","false")),this.setAttribute("contenteditable","true"),this.hasAttribute("tabindex")||this.setAttribute("tabindex","0");let i=this.shadowRoot.querySelector("slot:not([name])");try{this._style=i.assignedElements().filter(r=>"style"===r.tagName.toLowerCase()).map(r=>r.textContent).join("")}catch{}if(this._style){let r=document.createElement("style");r.textContent=this._style,this.shadowRoot.appendChild(r)}try{let r=i.assignedElements().filter(s=>"script"===s.tagName.toLowerCase()&&"application/json"===s.type).map(s=>s.textContent).join("");r&&this.setOptions(JSON.parse(r))}catch{}let a="";if(a=this.hasAttribute("value")?null!=(n=this.getAttribute("value"))?n:"":null!=(o=i?.assignedNodes().map(r=>3===r.nodeType?r.textContent:"").join("").trim())?o:"",this._mathfield=new class{constructor(n,o){var t,i,a;this.focusBlurInProgress=!1,this.stylesheets=[],this.audioBuffers={},this.options=tb(mi(Et({},nb()),{registers:Py(this)}),o.readOnly?mi(Et({},o),{virtualKeyboardMode:"off"}):Et({plonkSound:"plonk.wav",keypressSound:{spacebar:"keypress-spacebar.wav",return:"keypress-return.wav",delete:"keypress-delete.wav",default:"keypress-standard.wav"}},o)),"auto"===this.options.virtualKeyboardMode&&(this.options.virtualKeyboardMode=cy()?"onfocus":"off"),void 0!==this.options.computeEngine&&(this._computeEngine=o.computeEngine),o.eventSink&&(this.host=o.eventSink),this.placeholders=new Map,this.element=n,n.mathfield=this,null!==this.options.fontsDirectory&&rb(this.options.fontsDirectory),vb||(vb=gu(kc).toString(36)),this.stylesheets.push(xu(n,kc,vb)),wb||(wb=gu(p3).toString(36)),this.stylesheets.push(xu(n,p3,wb));let r=[];if(r.push(`<span contenteditable=true class=ML__keyboard-sink autocapitalize=off autocomplete=off autocorrect=off spellcheck=false inputmode=none tabindex=${null!=(t=n.tabIndex)?t:0}></span>`),r.push("<span part=container class=ML__container aria-hidden=true>"),r.push("<span part=content class=ML__content></span>"),r.push(`<div part='virtual-keyboard-toggle' class=ML__virtual-keyboard-toggle role=button data-ML__tooltip="${vm("tooltip.toggle virtual keyboard")}">`),r.push(null!=(i=this.options.virtualKeyboardToggleGlyph)?i:m3),r.push("</div>"),r.push("<div class=ML__placeholdercontainer></div>"),r.push("</span>"),r.push("<div class=ML__sr-only>"),r.push("<span role=status aria-live=assertive aria-atomic=true></span>"),r.push("<span class=accessibleMathML></span>"),r.push("</div>"),this.element.innerHTML=this.options.createHTML(r.join("")),!this.element.children)return void console.error("%cMathLive: Something went wrong and the mathfield could not be created.%c\nIf you are using Vue, this may be because you are using the runtime-only build of Vue. Make sure to include 'runtimeCompiler: true' in your Vue configuration. Theremay a warning from Vue in the log above.","color:red;font-family:system-ui;font-size:1.2rem;font-weight:bold","color:inherit;font-family:system-ui;font-size:inherit;font-weight:inherit");this.field=this.element.querySelector("[part=content]"),this.field.addEventListener("click",l=>l.stopImmediatePropagation(),{capture:!1}),this.field.addEventListener("wheel",this,{passive:!1}),"PointerEvent"in window?this.field.addEventListener("pointerdown",this):this.field.addEventListener("mousedown",this),this.virtualKeyboardToggle=this.element.querySelector("[part=virtual-keyboard-toggle]"),this.options.readOnly||"manual"!==this.options.virtualKeyboardMode?this.virtualKeyboardToggle.classList.remove("is-visible"):this.virtualKeyboardToggle.classList.add("is-visible"),N1(this.virtualKeyboardToggle,l=>this.executeCommand(l),{default:"toggleVirtualKeyboard",alt:"toggleVirtualKeyboardAlt",shift:"toggleVirtualKeyboardShift"}),this.ariaLiveText=this.element.querySelector("[role=status]"),this.accessibleMathML=this.element.querySelector(".accessibleMathML"),this.keystrokeCaptionVisible=!1,this.popoverVisible=!1,this.suggestionIndex=0,this.inlineShortcutBuffer=[],this.inlineShortcutBufferFlushTimer=0,this.mode=ib(this.options),this.smartModeSuppressed=!1,this.style={},this.options.readOnly?this.element.classList.add("ML__isReadOnly"):this.element.classList.remove("ML__isReadOnly"),"inline-math"===this.options.defaultMode?this.element.classList.add("ML__isInline"):this.element.classList.remove("ML__isInline"),this.blurred=!0,this.keyboardDelegate=function lV(n,o,t){let i=null,a=null,r=!1,s=!1,l=!1;return n.addEventListener("keydown",c=>{r||"Process"===c.key||"CapsLock"===c.code||/(Control|Meta|Alt|Shift)(Left|Right)/.test(c.code)?i=null:(i=c,a=null,t.onKeystroke(I3(c),c)||(i=null,n.textContent=""))},!0),n.addEventListener("keypress",c=>{r||(i&&a&&t.onKeystroke(I3(i),i),a=c)},!0),n.addEventListener("compositionstart",c=>{n.textContent="",r=!0,t.onCompositionStart(c.data)},!0),n.addEventListener("compositionupdate",c=>{r&&t.onCompositionUpdate(c.data)},!0),n.addEventListener("compositionend",c=>{n.textContent="",r&&(r=!1,t.onCompositionEnd(c.data))},!0),n.addEventListener("beforeinput",c=>c.stopImmediatePropagation()),n.addEventListener("input",c=>{var u;if(!r&&(n.textContent="","insertCompositionText"!==c.inputType)){if("insertFromPaste"===c.inputType)return c.preventDefault(),void c.stopPropagation();t.onInput(null!=(u=c.data)?u:""),c.preventDefault(),c.stopPropagation()}}),n.addEventListener("paste",c=>{n.focus(),n.textContent="",t.onPaste(c)||c.preventDefault(),c.stopImmediatePropagation()},!0),n.addEventListener("cut",c=>t.onCut(c),!0),n.addEventListener("copy",c=>t.onCopy(c),!0),n.addEventListener("blur",c=>{var u,m,p,f;if((null==(m=null==(u=c.relatedTarget)?void 0:u._mathfield)?void 0:m.element)===o)return n.focus(),c.preventDefault(),void c.stopPropagation();let b=null==(p=bh.scrim)?void 0:p.state;return"open"===b||"opening"===b||c.relatedTarget===c.target.getRootNode().host?(c.preventDefault(),void c.stopPropagation()):void(l||s||(l=!0,i=null,a=null,null==(f=t.onBlur)||f.call(t),l=!1,c.stopPropagation()))},!0),n.addEventListener("focus",c=>{var u;l||s||(s=!0,null==(u=t.onFocus)||u.call(t),s=!1,c.stopPropagation())},!0),{cancelComposition:()=>{r&&(n.blur(),requestAnimationFrame(()=>n.focus()))},blur:()=>{"function"==typeof n.blur&&n.blur()},focus:()=>{!s&&"function"==typeof n.focus&&n.focus()},hasFocus:()=>function cV(){var n;let o=document.activeElement;for(;null!=(n=o?.shadowRoot)&&n.activeElement;)o=o.shadowRoot.activeElement;return o}()===n,setAriaLabel:c=>n.setAttribute("aria-label",c),setValue:c=>{var u;n.innerText=c,n.style.top="-1000px",null==(u=window.getSelection())||u.selectAllChildren(n)},moveTo:(c,u)=>{n.style.top=`${u}px`,n.style.left=`${c}px`}}}(this.element.querySelector(".ML__keyboard-sink"),this.element,{onFocus:()=>this.onFocus(),onBlur:()=>this.onBlur(),onInput:l=>bb(this,l),onKeystroke:(l,c)=>j3(this,l,c),onCompositionStart:l=>this.onCompositionStart(l),onCompositionUpdate:l=>this.onCompositionUpdate(l),onCompositionEnd:l=>this.onCompositionEnd(l),onCut:l=>{this.options.readOnly?this.model.announce("plonk"):Co(this.model,{inputType:"deleteByCut"})&&(this.snapshot(),Po.onCopy(this,l),Sc(this.model,Vs(this.model.selection),"deleteByCut"),Vo(this))},onCopy:l=>Po.onCopy(this,l),onPaste:l=>{let c=!this.options.readOnly;return c&&(c=Po.onPaste(this.model.at(this.model.position).mode,this,l.clipboardData)),c||this.model.announce("plonk"),l.preventDefault(),l.stopPropagation(),c}}),window.addEventListener("resize",this),window.addEventListener("blur",()=>{Qm(this)&&this.hasFocus()&&window.addEventListener("focus",l=>{l.target===window&&Qm(this)&&this.focus()},{once:!0})},{capture:!0}),this.model=new class{constructor(n,o,t){this.options=n,this._selection={ranges:[[0,0]],direction:"none"},this._anchor=0,this._position=0,this.mathfield=t,this.suppressChangeNotifications=!1,this.root=new kt("root",t,{mode:n.mode}),this.root.body=[],this.setListeners(o)}get atoms(){return this.root.children}get selection(){return this._selection}set selection(n){this.setSelection(n)}setSelection(n,o){return this.deferNotifications({selection:!0},()=>{let t=this.normalizeSelection(n,o);if(void 0===t)throw new TypeError("Invalid selection");if(1===t.ranges.length&&t.ranges[0][0]===t.ranges[0][1]){let i=t.ranges[0][0];this._position=i,this._anchor=i,this._selection=t}else{let i=Vs(t);"backward"===t.direction?[this._position,this._anchor]=i:[this._anchor,this._position]=i;let a=this.at(i[0]+1),r=this.at(i[1]);kt.commonAncestor(a,r),this._selection={ranges:[i],direction:t.direction}}})}setPositionHandlingPlaceholder(n){var o,t,i;"placeholder"===(null==(o=this.at(n))?void 0:o.type)?this.setSelection(n-1,n):"placeholder"===(null==(i=null==(t=this.at(n))?void 0:t.rightSibling)?void 0:i.type)?this.setSelection(n,n+1):this.position=n}getState(){return{content:this.root.toJson(),selection:this.selection}}setState(n,o){var t;let i=this.suppressChangeNotifications;this.suppressChangeNotifications=null==(t=o?.suppressChangeNotifications)||t;let a={};"undo"===o?.type&&(a={inputType:"historyUndo"}),"redo"===o?.type&&(a={inputType:"historyRedo"}),Co(this,a)&&(this.root=wl(n.content,this.mathfield),this.selection=n.selection,Eo(this,a)),this.suppressChangeNotifications=i}get position(){return this._position}set position(n){this.setSelection(n,n)}get anchor(){return this._anchor}get selectionIsCollapsed(){return this._anchor===this._position}get selectionIsPlaceholder(){return 1===Math.abs(this._anchor-this._position)&&"placeholder"===this.at(Math.max(this._anchor,this._position)).type}collapseSelection(n="forward"){return this._anchor!==this._position&&(this.position="backward"===n?Math.min(this._anchor,this._position):Math.max(this._anchor,this._position),!0)}get lastOffset(){return this.atoms.length-1}at(n){return this.atoms[n]}offsetOf(n){return this.atoms.indexOf(n)}getSiblingsRange(n){let o=this.at(n),{parent:t}=o;if(!t)return[0,this.lastOffset];let i=o.parent.branch(o.treeBranch);return[this.offsetOf(i[0]),this.offsetOf(i[i.length-1])]}getBranchRange(n,o){let t=this.at(n).branch(o);return[this.offsetOf(t[0]),this.offsetOf(t[t.length-1])]}getAtoms(n,o,t){let a,r,i=t??{};if(B1(n)){if(i=o??{},n.ranges.length>1)return n.ranges.reduce((u,m)=>[...u,...this.getAtoms(m,i)],[]);n=n.ranges[0]}if(wd(n)){if(a=n,!wd(o))return[];r=o}else[a,r]=n,i=o??{};if(!Number.isFinite(a))return[];void 0===i.includeChildren&&(i.includeChildren=!1),a<0&&(a=this.lastOffset-a+1),r<0&&(r=this.lastOffset-r+1);let s=Math.min(a,r)+1,l=Math.max(a,r);if(1===s&&l===this.lastOffset)return[this.root];let c=[];for(let u=s;u<=l;u++){let m=this.atoms[u];g3(this,m,s,l)&&c.push(m)}return i.includeChildren||(c=c.filter(u=>{let m=!1,{parent:p}=u;for(;p&&!m;)m=g3(this,p,s,l),p=p.parent;return!m})),c}getAllAtoms(n){let o=[],t=this.lastOffset;for(let i=n;i<=t;i++)o.push(this.atoms[i]);for(let i=0;i<n;i++)o.push(this.atoms[i]);return o}extractAtoms(n){let o=this.getAtoms(n);1===o.length&&"root"===o[0].type&&(o=o[0].children);for(let t of o)t.parent.removeChild(t);return o}deleteAtoms(n){this.extractAtoms(n),this.position=n[0]}atomToString(n,o){let t=o??"latex";if(t.startsWith("latex"))return fd.serialize([n],{expandMacro:"latex-expanded"===t,skipStyles:"latex-unstyled"===t,defaultMode:this.mathfield.options.defaultMode});if("math-ml"===t)return Zi(n,this.mathfield.options);if("spoken"===t)return Ah(n,this.mathfield.options);if("spoken-text"===t){let i=this.mathfield.options.textToSpeechMarkup;this.mathfield.options.textToSpeechMarkup="";let a=Ah(n,this.mathfield.options);return this.mathfield.options.textToSpeechMarkup=i,a}if("spoken-ssml"===t||"spoken-ssml-with-highlighting"===t){let i=this.mathfield.options.textToSpeechMarkup;this.mathfield.options.textToSpeechMarkup="ssml";let a=Ah(n,this.mathfield.options);return this.mathfield.options.textToSpeechMarkup=i,a}if("math-json"===t){if(!this.mathfield.computeEngine)return globalThis[Symbol.for("io.cortexjs.compute-engine")]||console.error('The CortexJS Compute Engine library is not available.\nLoad the library, for example with:\nimport "https://unpkg.com/@cortex-js/compute-engine?module"'),'["Error", "compute-engine-not-available"]';try{let i=this.mathfield.computeEngine.parse(kt.serialize(n,{expandMacro:!1,defaultMode:"math"}));return JSON.stringify(i.json)}catch(i){return JSON.stringify(["Error",`'${i.toString()}'`])}}return"ascii-math"===t?Wo(n):(console.error("MathLive: Unknown format :",t),"")}getValue(n,o,t){if(void 0===n)return this.atomToString(this.root,"latex");if("string"==typeof n)return this.atomToString(this.root,n);let i,a;if(wd(n)&&wd(o)?(i=[this.normalizeRange([n,o])],a=t??"latex"):L1(n)?(i=[this.normalizeRange(n)],a=o):B1(n)?(i=n.ranges,a=o):(i=[],a="latex"),a.startsWith("latex")){let r={expandMacro:"latex-expanded"===a,skipStyles:"latex-unstyled"===a,defaultMode:this.mathfield.options.defaultMode};return Bo(i.map(s=>kt.serialize(this.getAtoms(s),r)))}return i.map(r=>this.getAtoms(r).map(s=>this.atomToString(s,a)).join("")).join("")}extendSelection(n){let o=this._anchor;if("forward"===n){let i=this._position;do{let a=this.at(i+1);if(null!=a&&a.inCaptureSelection){for(;!a.captureSelection;)a=a.parent;i=this.offsetOf(a?.lastChild)+1}else i+=1}while(i<=this.lastOffset&&this.at(i).isFirstSibling);return i===o-1&&"first"===this.at(o).type&&(i=o),this.extendSelectionTo(o,i)}let t=this._position-1;if(t<0)return!1;for(;t>=0&&this.at(t).isLastSibling;){let i=this.at(t);if(null!=i&&i.inCaptureSelection){for(;!i.captureSelection;)i=i.parent;t=this.offsetOf(i.firstChild)-1}else t-=1}return t<0&&(t=0),t===o+1&&"first"===this.at(t).type&&(o=t),this.extendSelectionTo(o,t)}extendSelectionTo(n,o){return this.deferNotifications({selection:!0},()=>{let t=this.normalizeRange([n,o]),[i,a]=t,{parent:r}=this.at(a);if(r&&("genfrac"===r.type||"msubsup"===r.type))for(;r!==this.root&&cb(this,r,[i,a]);)a=this.offsetOf(r),r=r.parent;for(r=this.at(i).parent;r!==this.root&&cb(this,r,[i,a]);)i=this.offsetOf(r.leftSibling),r=r.parent;if(r=this.at(a).parent,"genfrac"===r?.type)for(;r!==this.root&&cb(this,r,[i,a]);)a=this.offsetOf(r),r=r.parent;this._position=this.normalizeOffset(o),this._selection={ranges:[[i,a]],direction:"none"}})}setListeners(n){this.listeners=n}announce(n,o,t=[]){var i,a;(null==(a=null==(i=this.mathfield.host)?void 0:i.dispatchEvent(new CustomEvent("announce",{detail:{command:n,previousPosition:o,atoms:t},cancelable:!0,bubbles:!0,composed:!0})))||a)&&function R$(n,o,t,i){let a="";"plonk"===o?(n.playSound("plonk"),n.flushInlineShortcutBuffer()):"delete"===o?a=fh(n.options,"deleted: ",i):"focus"===o||o.includes("move")?a=function z$(n,o){if(Number.isNaN(o))return"";let t=n.at(o);if(!t||t.treeDepth<=n.at(n.position).treeDepth)return"";let i="",a=t.parent,r=n.at(n.position).parent;for(;a!==n.root&&a!==r;)i+=`out of ${f3(a)};`,a=a.parent;return i}(n.model,t)+(n.model.selectionIsCollapsed?"":"selected: ")+function H$(n,o){if(!n.selectionIsCollapsed)return fh(o,"",n.getAtoms(n.selection));let t="",i=n.at(n.position),a=f3(i);return i.isFirstSibling&&(t=(a?"start of "+a:"unknown")+": "),i.isLastSibling?i.isFirstSibling||(t+=a?"end of "+a:"unknown"):t+=fh(o,"",i),t}(n.model,n.options):"replacement"===o?a=fh(n.options,"",n.model.at(n.model.position)):"line"===o?(a=fh(n.options,"",n.model.root),n.keyboardDelegate.setAriaLabel("after: "+a)):a=i?fh(n.options,o+" ",i):o;let r=n.ariaLiveText.textContent.includes("\xa0")?" \u202f ":" \xa0 ";n.ariaLiveText.textContent=a+r}(this.mathfield,n,o,t)}deferNotifications(n,o){let t=this._selection,i=this._anchor,a=this._position,r=this.suppressChangeNotifications;this.suppressChangeNotifications=!0;let s=this.root.changeCounter;o();let l=this.root.changeCounter!==s,c=i!==this._anchor||a!==this._position||"different"===function MY(n,o){if(n.direction===o.direction){let t=n.ranges.length;if(o.ranges.length===t){let i=0;for(;i<t&&"equal"===LY(n.ranges[i],o.ranges[i]);)i++;return i===t?"equal":"different"}}return"different"}(this._selection,t);return this.suppressChangeNotifications=r,n.content&&l&&Eo(this,{inputType:n.type}),n.selection&&c&&r3(this),l||c}normalizeOffset(n){return n>0?n=Math.min(n,this.lastOffset):n<0&&(n=this.lastOffset+n+1),n}normalizeRange(n){let[o,t]=n;return o=this.normalizeOffset(o),t=this.normalizeOffset(t),o<t?[o,t]:[t,o]}normalizeSelection(n,o){var t;let i;if(wd(n)){let a=this.normalizeOffset(n);if(wd(o)){let r=this.normalizeOffset(o);i=a<=r?{ranges:[[a,r]],direction:"none"}:{ranges:[[r,a]],direction:"backward"}}else i={ranges:[[a,a]],direction:"none"}}else if(L1(n)){let a=this.normalizeOffset(n[0]),r=this.normalizeOffset(n[1]);i=a<=r?{ranges:[[a,r]],direction:"none"}:{ranges:[[r,a]],direction:"backward"}}else B1(n)&&(i={ranges:n.ranges.map(a=>this.normalizeRange(a)),direction:null!=(t=n.direction)?t:"none"});return i}}({mode:ib(this.options),macros:this.options.macros,removeExtraneousParentheses:this.options.removeExtraneousParentheses},{onSelectionDidChange:()=>this._onSelectionDidChange()},this),this.undoManager=new class{constructor(n){this.recording=!1,this.canCoalesce=!1,this.model=n,this.reset()}get maximumDepth(){return 1e3}reset(){this.stack=[],this.index=-1}startRecording(){this.recording=!0}canUndo(){return this.index>0}canRedo(){return this.index!==this.stack.length-1}undo(){return!!this.canUndo()&&(this.model.setState(this.stack[this.index-1],{suppressChangeNotifications:!1,type:"undo"}),this.index-=1,this.canCoalesce=!1,!0)}redo(){return!!this.canRedo()&&(this.index+=1,this.model.setState(this.stack[this.index],{suppressChangeNotifications:!1,type:"redo"}),this.canCoalesce=!1,!0)}pop(){this.canUndo()&&(this.index-=1,this.stack.pop())}snapshot(){return!!this.recording&&(this.stack.splice(this.index+1,this.stack.length-this.index-1),this.stack.push(this.model.getState()),this.index++,this.stack.length>this.maximumDepth&&this.stack.shift(),this.canCoalesce=!1,!0)}snapshotAndCoalesce(){if(!this.recording)return!1;this.canCoalesce&&this.pop();let n=this.snapshot();return this.canCoalesce=!0,n}}(this.model);let s=null!=(a=o.value)?a:this.element.textContent;s&&(s=s.trim()),s&&Po.insert("math",this.model,s,{insertionMode:"replaceAll",selectionMode:"after",format:"latex",suppressChangeNotifications:!0}),this.undoManager.startRecording(),this.undoManager.snapshot(),Fm&&!this.options.locale.startsWith(Fm.locale)&&n3(this.options.locale),Vo(this),document.fonts.ready.then(()=>Zm(this))}get audioContext(){return this._audioContext||(this._audioContext=new AudioContext),this._audioContext}get colorMap(){return n=>{var o;let t;return"function"==typeof(null==(o=this.options)?void 0:o.colorMap)&&(t=this.options.colorMap(n)),t||(t=t1(n)),t}}get backgroundColorMap(){return n=>{var o;let t;return"function"==typeof(null==(o=this.options)?void 0:o.backgroundColorMap)&&(t=this.options.backgroundColorMap(n)),!t&&"function"==typeof this.options.colorMap&&(t=this.options.colorMap(n)),t||(t=m2(n)),t}}get fractionNavigationOrder(){var n,o;return null!=(o=null==(n=this.options)?void 0:n.fractionNavigationOrder)?o:"numerator-denominator"}get placeholderSymbol(){var n,o;return null!=(o=null==(n=this.options)?void 0:n.placeholderSymbol)?o:"\u25a2"}get smartFence(){var n,o;return null!=(o=null==(n=this.options)?void 0:n.smartFence)&&o}get letterShapeStyle(){var n,o;return null!=(o=null==(n=this.options)?void 0:n.letterShapeStyle)?o:"tex"}get registers(){var n,o;return null!=(o=null==(n=this.options)?void 0:n.registers)?o:{}}getDefinition(n,o="math"){return N2(n,o)}getMacro(n){return Qy(n,this.options.macros)}get virtualKeyboard(){if(!this.options.readOnly)return this._virtualKeyboard||(this._virtualKeyboard=this.options.useSharedVirtualKeyboard||ca().sharedVirtualKeyboard?new class{constructor(n){var o,t,i;this.targetOrigin=null!=(t=null!=(o=n.targetOrigin)?o:globalThis.origin)?t:"*",this.originValidator=null!=(i=n.originValidator)?i:"same-origin",this._mathfield=n.mathfield}get visible(){var n,o;return null!=(o=null==(n=ca().sharedVirtualKeyboard)?void 0:n.visible)&&o}set visible(n){ca().sharedVirtualKeyboard&&(ca().sharedVirtualKeyboard.visible=n)}setOptions(n){this.sendMessage("set-options",{options:JSON.stringify(N_(n))})}create(){}dispose(){this.disable()}enable(){this.enabled||(this.enabled=!0,globalThis.addEventListener("message",this),this.updateToolbar())}disable(){this.enabled&&(globalThis.removeEventListener("message",this),this.enabled=!1)}executeCommand(n){var o,t,i;return"virtual-keyboard"===E_(n)?(this._mathfield&&(this.setOptions(N_(this._mathfield.getOptions())),("showVirtualKeyboard"===n||"toggleVirtualKeyboard"===n&&!1===this.visible)&&(null==(t=(o=this._mathfield).focus)||t.call(o))),this.sendMessage("execute-command",{command:n}),requestAnimationFrame(()=>this.updateToolbar()),!1):null==(i=this._mathfield)?void 0:i.executeCommand(n)}focusMathfield(){}blurMathfield(){}stateWillChange(n){return!0}stateChanged(){}updateToolbar(){var n;null==(n=ca().sharedVirtualKeyboard)||n.updateToolbar(this._mathfield)}handleEvent(n){var o,t,i,a;if("message"===n.type&&n.data&&n.data.type===j1){if(!function Gy(n,o){return"*"===n||"none"===o||("same-origin"===o?!globalThis.origin||n===globalThis.origin:"function"==typeof o&&o(n))}(n.origin,this.originValidator))throw new Error(`Message from unknown origin (${n.origin}) cannot be handled`);let{action:r}=n.data;if("execute-command"===r){if("virtual-keyboard"===E_(n.data.command)&&window===globalThis.parent)return;this.executeCommand(n.data.command)}else"update-state"===r?(this.visible=n.data.state.visible,this.height=n.data.state.height):"focus"===r?null==(t=null==(o=this._mathfield)?void 0:o.focus)||t.call(o):"blur"===r?null==(a=null==(i=this._mathfield)?void 0:i.blur)||a.call(i):"update-toolbar"===r&&this.updateToolbar()}}sendMessage(n,o={}){return!!globalThis.parent&&(globalThis.parent.postMessage(Et({type:j1,action:n},o),this.targetOrigin),!0)}}({targetOrigin:this.options.sharedVirtualKeyboardTargetOrigin,originValidator:this.options.originValidator,mathfield:this}):new class{constructor(n,o){this.originalContainerBottomPadding=null,this.options=n,this.visible=!1,this._mathfield=o,this.coreStylesheet=null,this.virtualKeyboardStylesheet=null}setOptions(n){var o,t;let i="";if(this._element){let a=this._element.querySelector("div.keyboard-layer.is-visible");a&&(i=null!=(o=a.getAttribute("data-layer"))?o:""),this._element.remove(),this._element=void 0}if(this.options=n,this.visible){this.buildAndAttachElement(n.virtualKeyboardTheme);let a=this.element.querySelector(`.keyboard-layer[data-layer="${i}"]`);a&&(null==(t=this.element.querySelector(".keyboard-layer.is-visible"))||t.classList.remove("is-visible"),a.classList.add("is-visible")),this.element.classList.add("is-visible")}}get element(){return this._element}set element(n){var o;this._element!==n&&(null==(o=this._element)||o.remove(),this._element=n)}get visible(){return this._visible}set visible(n){this._visible=n}get height(){var n,o;return null!=(o=null==(n=this.element)?void 0:n.offsetHeight)?o:0}buildAndAttachElement(n){var o;this.element=function _V(n,o){var t,i,a,r;let s='<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">\n\n    <symbol id="svg-delete-backward" viewBox="0 0 576 512">\n      <path d="M432.1 208.1L385.9 256L432.1 303C442.3 312.4 442.3 327.6 432.1 336.1C423.6 346.3 408.4 346.3 399 336.1L352 289.9L304.1 336.1C295.6 346.3 280.4 346.3 271 336.1C261.7 327.6 261.7 312.4 271 303L318.1 256L271 208.1C261.7 199.6 261.7 184.4 271 175C280.4 165.7 295.6 165.7 304.1 175L352 222.1L399 175C408.4 165.7 423.6 165.7 432.1 175C442.3 184.4 442.3 199.6 432.1 208.1V208.1zM512 64C547.3 64 576 92.65 576 128V384C576 419.3 547.3 448 512 448H205.3C188.3 448 172 441.3 160 429.3L9.372 278.6C3.371 272.6 0 264.5 0 256C0 247.5 3.372 239.4 9.372 233.4L160 82.75C172 70.74 188.3 64 205.3 64L512 64zM528 128C528 119.2 520.8 112 512 112H205.3C201 112 196.9 113.7 193.9 116.7L54.63 256L193.9 395.3C196.9 398.3 201 400 205.3 400H512C520.8 400 528 392.8 528 384V128z"/>\n    </symbol>\n\n    <symbol id="svg-shift" viewBox="0 0 384 512">\n      <path d="M2.438 252.3C7.391 264.2 19.06 272 32 272h80v160c0 26.51 21.49 48 48 48h64C250.5 480 272 458.5 272 432v-160H352c12.94 0 24.61-7.797 29.56-19.75c4.953-11.97 2.219-25.72-6.938-34.88l-160-176C208.4 35.13 200.2 32 192 32S175.6 35.13 169.4 41.38l-160 176C.2188 226.5-2.516 240.3 2.438 252.3zM192 86.63L313.4 224H224v208H160V224H70.63L192 86.63z"/>\n    </symbol>\n\n    <symbol id="svg-commit" viewBox="0 0 512 512">\n      <path d="M135 432.1l-128-128C2.344 300.3 0 294.2 0 288s2.344-12.28 7.031-16.97l128-128c9.375-9.375 24.56-9.375 33.94 0s9.375 24.56 0 33.94L81.94 264H464v-208C464 42.75 474.8 32 488 32S512 42.75 512 56V288c0 13.25-10.75 24-24 24H81.94l87.03 87.03c9.375 9.375 9.375 24.56 0 33.94S144.4 442.3 135 432.1z"/>\n    </symbol>\n\n    <symbol id="svg-command" viewBox="0 0 640 512">\n      <path d="M34.495 36.465l211.051 211.05c4.686 4.686 4.686 12.284 0 16.971L34.495 475.535c-4.686 4.686-12.284 4.686-16.97 0l-7.071-7.07c-4.686-4.686-4.686-12.284 0-16.971L205.947 256 10.454 60.506c-4.686-4.686-4.686-12.284 0-16.971l7.071-7.07c4.686-4.687 12.284-4.687 16.97 0zM640 468v-10c0-6.627-5.373-12-12-12H300c-6.627 0-12 5.373-12 12v10c0 6.627 5.373 12 12 12h328c6.627 0 12-5.373 12-12z"/>\n    </symbol>\n\n    <symbol id="svg-undo" viewBox="0 0 512 512">\n      <path d="M20 8h10c6.627 0 12 5.373 12 12v110.625C85.196 57.047 165.239 7.715 256.793 8.001 393.18 8.428 504.213 120.009 504 256.396 503.786 393.181 392.834 504 256 504c-63.926 0-122.202-24.187-166.178-63.908-5.113-4.618-5.354-12.561-.482-17.433l7.069-7.069c4.503-4.503 11.749-4.714 16.482-.454C150.782 449.238 200.935 470 256 470c117.744 0 214-95.331 214-214 0-117.744-95.331-214-214-214-82.862 0-154.737 47.077-190.289 116H180c6.627 0 12 5.373 12 12v10c0 6.627-5.373 12-12 12H20c-6.627 0-12-5.373-12-12V20c0-6.627 5.373-12 12-12z"/>\n    </symbol>\n    <symbol id="svg-redo" viewBox="0 0 512 512">\n      <path d="M492 8h-10c-6.627 0-12 5.373-12 12v110.625C426.804 57.047 346.761 7.715 255.207 8.001 118.82 8.428 7.787 120.009 8 256.396 8.214 393.181 119.166 504 256 504c63.926 0 122.202-24.187 166.178-63.908 5.113-4.618 5.354-12.561.482-17.433l-7.069-7.069c-4.503-4.503-11.749-4.714-16.482-.454C361.218 449.238 311.065 470 256 470c-117.744 0-214-95.331-214-214 0-117.744 95.331-214 214-214 82.862 0 154.737 47.077 190.289 116H332c-6.627 0-12 5.373-12 12v10c0 6.627 5.373 12 12 12h160c6.627 0 12-5.373 12-12V20c0-6.627-5.373-12-12-12z"/>\n    </symbol>\n    <symbol id="svg-arrow-left" viewBox="0 0 320 512">\n      <path d="M206.7 464.6l-183.1-191.1C18.22 267.1 16 261.1 16 256s2.219-11.97 6.688-16.59l183.1-191.1c9.152-9.594 24.34-9.906 33.9-.7187c9.625 9.125 9.938 24.37 .7187 33.91L73.24 256l168 175.4c9.219 9.5 8.906 24.78-.7187 33.91C231 474.5 215.8 474.2 206.7 464.6z"/>\n    </symbol>\n    <symbol id="svg-arrow-right" viewBox="0 0 320 512">\n      <path d="M113.3 47.41l183.1 191.1c4.469 4.625 6.688 10.62 6.688 16.59s-2.219 11.97-6.688 16.59l-183.1 191.1c-9.152 9.594-24.34 9.906-33.9 .7187c-9.625-9.125-9.938-24.38-.7187-33.91l168-175.4L78.71 80.6c-9.219-9.5-8.906-24.78 .7187-33.91C88.99 37.5 104.2 37.82 113.3 47.41z"/>\n    </symbol>\n    <symbol id="svg-tab" viewBox="0 0 448 512">\n      <path d="M32 217.1c0-8.8 7.2-16 16-16h144v-93.9c0-7.1 8.6-10.7 13.6-5.7l143.5 143.1c6.3 6.3 6.3 16.4 0 22.7L205.6 410.4c-5 5-13.6 1.5-13.6-5.7v-93.9H48c-8.8 0-16-7.2-16-16v-77.7m-32 0v77.7c0 26.5 21.5 48 48 48h112v61.9c0 35.5 43 53.5 68.2 28.3l143.6-143c18.8-18.8 18.8-49.2 0-68L228.2 78.9c-25.1-25.1-68.2-7.3-68.2 28.3v61.9H48c-26.5 0-48 21.6-48 48zM436 64h-8c-6.6 0-12 5.4-12 12v360c0 6.6 5.4 12 12 12h8c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12z"/>\n    </symbol>\n    <symbol id="svg-paste" viewBox="0 0 512 512"><path d="M160 32c11.6 0 21.3 8.2 23.5 19.2C185 58.6 191.6 64 199.2 64H208c8.8 0 16 7.2 16 16V96H96V80c0-8.8 7.2-16 16-16h8.8c7.6 0 14.2-5.4 15.7-12.8C138.7 40.2 148.4 32 160 32zM64 64h2.7C65 69 64 74.4 64 80V96c0 17.7 14.3 32 32 32H224c17.7 0 32-14.3 32-32V80c0-5.6-1-11-2.7-16H256c17.7 0 32 14.3 32 32h32c0-35.3-28.7-64-64-64H210.6c-9-18.9-28.3-32-50.6-32s-41.6 13.1-50.6 32H64C28.7 32 0 60.7 0 96V384c0 35.3 28.7 64 64 64H192V416H64c-17.7 0-32-14.3-32-32V96c0-17.7 14.3-32 32-32zM288 480c-17.7 0-32-14.3-32-32V192c0-17.7 14.3-32 32-32h96v56c0 22.1 17.9 40 40 40h56V448c0 17.7-14.3 32-32 32H288zM416 165.3L474.7 224H424c-4.4 0-8-3.6-8-8V165.3zM448 512c35.3 0 64-28.7 64-64V235.9c0-12.7-5.1-24.9-14.1-33.9l-59.9-59.9c-9-9-21.2-14.1-33.9-14.1H288c-35.3 0-64 28.7-64 64V448c0 35.3 28.7 64 64 64H448z"/></symbol>\n    <symbol id="svg-cut" viewBox="0 0 512 512"><path d="M485.6 444.2L333.6 314.9C326.9 309.2 326.1 299.1 331.8 292.4C337.5 285.6 347.6 284.8 354.4 290.5L506.4 419.8C513.1 425.5 513.9 435.6 508.2 442.4C502.5 449.1 492.4 449.9 485.6 444.2zM485.7 67.76C492.5 62.07 502.5 62.94 508.2 69.69C513.9 76.45 513.1 86.55 506.3 92.24L208.5 343.1C218.3 359.7 224 379.2 224 400C224 461.9 173.9 512 112 512C50.14 512 0 461.9 0 400C0 338.1 50.14 288 112 288C141.5 288 168.4 299.4 188.4 318.1L262.2 256L188.4 193.9C168.4 212.6 141.5 224 112 224C50.14 224 0 173.9 0 112C0 50.14 50.14 0 112 0C173.9 0 224 50.14 224 112C224 132.8 218.3 152.3 208.5 168.9L287 235.1L485.7 67.76zM32 112C32 156.2 67.82 192 112 192C156.2 192 192 156.2 192 112C192 67.82 156.2 32 112 32C67.82 32 32 67.82 32 112zM112 480C156.2 480 192 444.2 192 400C192 355.8 156.2 320 112 320C67.82 320 32 355.8 32 400C32 444.2 67.82 480 112 480z"/></symbol>\n    <symbol id="svg-copy" viewBox="0 0 512 512"><path d="M272 416C263.2 416 256 423.2 256 432V448c0 17.67-14.33 32-32 32H64c-17.67 0-32-14.33-32-32V192c0-17.67 14.33-32 32-32h112C184.8 160 192 152.8 192 144C192 135.2 184.8 128 176 128H63.99c-35.35 0-64 28.65-64 64l.0098 256C0 483.3 28.65 512 64 512h160c35.35 0 64-28.65 64-64v-16C288 423.2 280.8 416 272 416zM502.6 86.63l-77.25-77.25C419.4 3.371 411.2 0 402.7 0H288C252.7 0 224 28.65 224 64v256c0 35.35 28.65 64 64 64h160c35.35 0 64-28.65 64-64V109.3C512 100.8 508.6 92.63 502.6 86.63zM416 45.25L466.7 96H416V45.25zM480 320c0 17.67-14.33 32-32 32h-160c-17.67 0-32-14.33-32-32V64c0-17.67 14.33-32 32-32h96l.0026 64c0 17.67 14.33 32 32 32H480V320z"/>\n    </symbol>\n    <symbol id="svg-angle-double-right" viewBox="0 0 320 512">\n      <path d="M166.9 264.5l-117.8 116c-4.7 4.7-12.3 4.7-17 0l-7.1-7.1c-4.7-4.7-4.7-12.3 0-17L127.3 256 25.1 155.6c-4.7-4.7-4.7-12.3 0-17l7.1-7.1c4.7-4.7 12.3-4.7 17 0l117.8 116c4.6 4.7 4.6 12.3-.1 17zm128-17l-117.8-116c-4.7-4.7-12.3-4.7-17 0l-7.1 7.1c-4.7 4.7-4.7 12.3 0 17L255.3 256 153.1 356.4c-4.7 4.7-4.7 12.3 0 17l7.1 7.1c4.7 4.7 12.3 4.7 17 0l117.8-116c4.6-4.7 4.6-12.3-.1-17z"/>\n    </symbol>\n    <symbol id="svg-angle-double-left" viewBox="0 0 320 512">\n      <path d="M153.1 247.5l117.8-116c4.7-4.7 12.3-4.7 17 0l7.1 7.1c4.7 4.7 4.7 12.3 0 17L192.7 256l102.2 100.4c4.7 4.7 4.7 12.3 0 17l-7.1 7.1c-4.7 4.7-12.3 4.7-17 0L153 264.5c-4.6-4.7-4.6-12.3.1-17zm-128 17l117.8 116c4.7 4.7 12.3 4.7 17 0l7.1-7.1c4.7-4.7 4.7-12.3 0-17L64.7 256l102.2-100.4c4.7-4.7 4.7-12.3 0-17l-7.1-7.1c-4.7-4.7-12.3-4.7-17 0L25 247.5c-4.6 4.7-4.6 12.3.1 17z"/>\n    </symbol>\n    <symbol id="svg-trash" viewBox="0 0 448 512">\n      <path d="M336 64l-33.6-44.8C293.3 7.1 279.1 0 264 0h-80c-15.1 0-29.3 7.1-38.4 19.2L112 64H24C10.7 64 0 74.7 0 88v2c0 3.3 2.7 6 6 6h26v368c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V96h26c3.3 0 6-2.7 6-6v-2c0-13.3-10.7-24-24-24h-88zM184 32h80c5 0 9.8 2.4 12.8 6.4L296 64H152l19.2-25.6c3-4 7.8-6.4 12.8-6.4zm200 432c0 8.8-7.2 16-16 16H80c-8.8 0-16-7.2-16-16V96h320v368zm-176-44V156c0-6.6 5.4-12 12-12h8c6.6 0 12 5.4 12 12v264c0 6.6-5.4 12-12 12h-8c-6.6 0-12-5.4-12-12zm-80 0V156c0-6.6 5.4-12 12-12h8c6.6 0 12 5.4 12 12v264c0 6.6-5.4 12-12 12h-8c-6.6 0-12-5.4-12-12zm160 0V156c0-6.6 5.4-12 12-12h8c6.6 0 12 5.4 12 12v264c0 6.6-5.4 12-12 12h-8c-6.6 0-12-5.4-12-12z"/>\n    </symbol>\n</svg>\n        ';n.create(),L_["foreground-color"]=[];for(let W of Object.keys(e1))L_["foreground-color"].push({class:"small-button",content:'<span style="border-radius:50%;width:32px;height:32px; box-sizing: border-box; border: 3px solid '+e1[W]+'"></span>',command:["applyStyle",{color:W}]});L_["background-color"]=[];for(let W of Object.keys(Xg))L_["background-color"].push({class:"small-button",content:'<span style="border-radius:50%;width:32px;height:32px; background:'+Xg[W]+'"></span>',command:["applyStyle",{backgroundColor:W}]});mo=Et({},L_);for(let W of Object.keys(mo))mo[W]=mo[W].slice();for(let W=0;W<26;W++){let le="ABCDEFGHIJKLMNOPQRSTUVWXYZ"[W];mo[le]||(mo[le]=[]),mo[le].unshift({latex:"\\mathbb{"+le+"}",aside:"blackboard",insert:"\\mathbb{"+le+"}"}),mo[le].unshift({latex:"\\mathbf{"+le+"}",aside:"bold",insert:"\\mathbf{"+le+"}"}),mo[le].unshift({latex:"\\mathsf{"+le+"}",aside:"sans",insert:"\\mathsf{"+le+"}"}),mo[le].unshift({latex:"\\mathtt{"+le+"}",aside:"monospace",insert:"\\mathtt{"+le+"}"}),mo[le].unshift({latex:"\\mathcal{"+le+"}",aside:"calligraphy",insert:"\\mathcal{"+le+"}"}),mo[le].unshift({latex:"\\mathfrak{"+le+"}",aside:"fraktur",insert:"\\mathfrak{"+le+"}"})}for(let W=0;W<=26;W++){let le="abcdefghijklmnopqrstuvwxyz"[W];mo[le]||(mo[le]=[]),mo[le].unshift({latex:"\\mathsf{"+le+"}",aside:"sans",insert:"\\mathsf{"+le+"}"}),mo[le].unshift({latex:"\\mathbf{"+le+"}",aside:"bold",insert:"\\mathbf{"+le+"}"}),mo[le].unshift({latex:"\\mathtt{"+le+"}",aside:"monospace",insert:"\\mathtt{"+le+"}"}),mo[le].unshift({latex:"\\mathfrak{"+le+"}",aside:"fraktur",insert:"\\mathfrak{"+le+"}"})}for(let W=0;W<10;W++){let le="0123456789"[W];mo[le]||(mo[le]=[]),mo[le].unshift({latex:"\\mathbf{"+le+"}",aside:"bold",insert:"\\mathbf{"+le+"}"}),mo[le].unshift({latex:"\\mathsf{"+le+"}",aside:"sans",insert:"\\mathsf{"+le+"}"}),mo[le].unshift({latex:"\\mathtt{"+le+"}",aside:"monospace",insert:"\\mathtt{"+le+"}"}),mo[le].unshift({latex:"\\mathcal{"+le+"}",aside:"script",insert:"\\mathcal{"+le+"}"}),mo[le].unshift({latex:"\\mathfrak{"+le+"}",aside:"fraktur",insert:"\\mathfrak{"+le+"}"})}let m=n.options.virtualKeyboards;m||(m="all"),m=m.replace(/\ball\b/i,"numeric functions symbols roman greek");let p=Et(Et({},mV),null!=(t=n.options.customVirtualKeyboardLayers)?t:{}),f=Et(Et({},B3),null!=(i=n.options.customVirtualKeyboards)?i:{}),b=m.replace(/\s+/g," ").split(" ");for(let W of b){if(!f[W]){console.error('MathLive: Unknown virtual keyboard "'+W+'"');continue}let le=null!=(a=f[W].layers)?a:[];f[W].layer&&le.push(f[W].layer),le=[...new Set(le)];for(let ve of le){if(!p[ve]){console.error('MathLive: Unknown virtual keyboard layer: "',ve,'"');break}if("object"==typeof p[ve]){let te=p[ve],Se="";if("string"==typeof te.styles?Se+=`<style>${te.styles}</style>`:"object"==typeof te.styles&&(Se+=`<style>${gV(te.styles)}</style>`),te.backdrop&&(Se+=`<div class='${te.backdrop}'>`),te.container&&(Se+=`<div class='${te.container}'>`),te.rows){Se+="<div class='rows'>";for(let Ze of te.rows){Se+="<ul>";for(let se of Ze){if(Se+="<li",se.class){let pe=se.class;se.layer&&!/layer-switch/.test(pe)&&(pe+=" layer-switch"),/separator/.test(pe)||(pe+=" keycap"),Se+=` class="${pe}"`}else Se+=' class="keycap"';if(se.key&&(Se+=` data-key="${se.key}"`),se.command&&("string"==typeof se.command?Se+=` data-command='"${se.command}"'`:(Se+=" data-command='",Se+=JSON.stringify(se.command),Se+="'")),se.insert&&(Se+=` data-insert="${se.insert}"`),se.latex&&(Se+=` data-latex="${se.latex}"`),se.aside&&(Se+=` data-aside="${se.aside}"`),se.variants){let pe=Date.now().toString(36).slice(-2)+Math.floor(1e5*Math.random()).toString(36);mo[pe]=se.variants,Se+=` data-alt-keys="${pe}"`}se.shifted&&(Se+=` data-shifted="${se.shifted}"`),se.shiftedCommand&&(Se+=` data-shifted-command="${se.shiftedCommand}"`),se.layer&&(Se+=` data-layer="${se.layer}"`),Se+=`>${se.label?se.label:""}</li>`}Se+="</ul>"}Se+="</div>"}te.container&&(Se+="</div>"),te.backdrop&&(Se+="</div>"),p[ve]=Se}s+=`<div tabindex="-1" class='keyboard-layer' data-layer='${ve}'>`,s+=`<div class='keyboard-toolbar' role='toolbar'>${pV(n.options,m,W)}</div>`;let ce=p[ve];"string"==typeof ce&&(s+=AV(n.options,ce)),s+="</div>"}}let L=document.createElement("div");L.className="ML__keyboard",o?L.classList.add(o):n.options.virtualKeyboardTheme&&L.classList.add(n.options.virtualKeyboardTheme);let N=document.createElement("div");N.className="ML__keyboard--plate",N.innerHTML=n.options.createHTML(s),L.appendChild(N);let R=L.querySelectorAll(".ML__toolbar-action");if(R)for(let W of R)W.addEventListener("click",le=>{var ve,ce;let te=le.target,Se="";for(;te&&!Se;)Se=null!=(ve=te?.getAttribute("data-command"))?ve:"",te=null!=(ce=te?.parentElement)?ce:null;Se&&n.executeCommand(JSON.parse(Se))});let j=L.querySelectorAll(".keycap, .action, .fnbutton, .bigfnbutton");for(let W of j)W.id="ML__k"+Date.now().toString(36).slice(-2)+Math.floor(1e5*Math.random()).toString(36);Q3(n,[...j]);let G=L.querySelectorAll(".layer-switch");for(let W of G)W.classList.contains("shift")?N1(W,le=>n.executeCommand(le),{pressed:"shiftKeyboardLayer",default:["switchKeyboardLayer",W.getAttribute("data-layer")],pressAndHoldEnd:"unshiftKeyboardLayer"}):N1(W,le=>n.executeCommand(le),{default:["switchKeyboardLayer",W.getAttribute("data-layer")]});let ae=L.querySelectorAll(".keyboard-layer");for(let W of ae)W.addEventListener("mousedown",le=>le.preventDefault());return null==(r=ae[0])||r.classList.add("is-visible"),L}(this,n??""),yl(this.element,"mousedown",()=>this.focusMathfield()),null==(o=this.options.virtualKeyboardContainer)||o.appendChild(this.element)}handleEvent(n){if(this.element)switch(n.type){case"mouseup":case"blur":case"touchend":case"touchcancel":document.body.style.userSelect="",Z1(this)}}focusMathfield(){var n,o;null==(o=null==(n=this._mathfield)?void 0:n.focus)||o.call(n)}blurMathfield(){var n,o;null==(o=null==(n=this._mathfield)?void 0:n.blur)||o.call(n)}stateWillChange(n){var o,t;return(null==(t=null==(o=this._mathfield)?void 0:o.host)?void 0:t.dispatchEvent(new CustomEvent("before-virtual-keyboard-toggle",{detail:{visible:n},bubbles:!0,cancelable:!0,composed:!0})))??!0}stateChanged(){var n,o;null==(o=null==(n=this._mathfield)?void 0:n.host)||o.dispatchEvent(new Event("virtual-keyboard-toggle",{bubbles:!0,cancelable:!1,composed:!0}))}updateToolbar(n){var o;let t=null==(o=this._element)?void 0:o.querySelectorAll(".ML__toolbar-action");if(t)for(let i of t)i.innerHTML=hV(this.options,n)}executeCommand(n){var o,t,i;let a,r=[];return Ea(n)?(a=n[0],r=n.slice(1)):a=n,a=a.replace(/-\w/g,s=>s[1].toUpperCase()),"virtual-keyboard"===(null==(o=bu[a])?void 0:o.target)?bu[a].fn(this,...r):null!=(i=null==(t=this._mathfield)?void 0:t.executeCommand(n))&&i}create(){this.virtualKeyboardStylesheet||(mb||(mb=gu(M3).toString(36)),this.virtualKeyboardStylesheet=xu(null,M3,mb)),this.coreStylesheet||(this.coreStylesheet=xu(null,kc,gu(kc).toString(36))),null!==this.options.fontsDirectory&&rb(this.options.fontsDirectory)}enable(){window.addEventListener("mouseup",this),window.addEventListener("blur",this)}disable(){window.removeEventListener("mouseup",this),window.removeEventListener("blur",this)}dispose(){}}(this.options,this)),this._virtualKeyboard}get computeEngine(){var n,o;if(void 0===this._computeEngine){let t=null==(n=globalThis[Symbol.for("io.cortexjs.compute-engine")])?void 0:n.ComputeEngine;t?this._computeEngine=new t:console.error('MathLive: The CortexJS Compute Engine library is not available.\nLoad the library, for example with:\nimport "https://unpkg.com/@cortex-js/compute-engine?module"'),this._computeEngine&&","===this.options.decimalSeparator&&(this._computeEngine.latexOptions.decimalMarker="{,}")}return null!=(o=this._computeEngine)?o:null}get virtualKeyboardState(){var n;return null!=(n=this.virtualKeyboard)&&n.visible?"visible":"hidden"}set virtualKeyboardState(n){this.virtualKeyboard&&("hidden"===n?this.virtualKeyboard.executeCommand("hideVirtualKeyboard"):"visible"===n&&this.virtualKeyboard.executeCommand("showVirtualKeyboard"))}get keybindings(){var n,o;if(this._keybindings)return this._keybindings;let[t,i]=function y$(n,o){let t=[],i=[];for(let a of n)try{let r=w$(a,o);if(r){let s=t.filter(l=>l.key===r.key&&l.ifMode===r.ifMode);if(s.length>0)throw new Error(`Ambiguous key binding ${a.key} (${G2(a.command)}) matches ${s[0].key} (${G2(s[0].command)}) with the ${o.displayName} keyboard layout`);t.push(r)}}catch(r){r instanceof Error&&i.push(r.message)}return[t,i]}(this.options.keybindings,null!=(n=T_())?n:t3);return(null==(o=T_())?void 0:o.score)>0&&(this._keybindings=t,i.length>0&&console.error("MathLive: Invalid keybindings for current keyboard layout",i)),t}setOptions(n){var o,t;if(this.options=tb(this.options,n),"computeEngine"in n&&(this._computeEngine=this.options.computeEngine),this._computeEngine&&"decimalSeparator"in n&&(this._computeEngine.latexOptions.decimalMarker=","===this.options.decimalSeparator?"{,}":"."),this.model.setListeners({onSelectionDidChange:a=>this._onSelectionDidChange()}),this.model.options.macros=this.options.macros,Fm&&!this.options.locale.startsWith(Fm.locale)&&n3(this.options.locale),this._keybindings=void 0,("soundsDirectory"in n||"plonkSound"in n||"keypressSound"in n||"spacebarKeypressSound"in n||"returnKeypressSound"in n||"deleteKeypressSound"in n)&&(this.audioBuffers={}),"inline-math"===this.options.defaultMode?this.element.classList.add("ML__isInline"):this.element.classList.remove("ML__isInline"),this.options.readOnly?(this.hasFocus()&&"visible"===this.virtualKeyboardState&&this.executeCommand("hideVirtualKeyboard"),this.onBlur(),this.element.classList.add("ML__isReadOnly")):this.element.classList.remove("ML__isReadOnly"),null==(o=this.virtualKeyboard)||o.setOptions(this.options),this.options.readOnly||"manual"!==this.options.virtualKeyboardMode?this.virtualKeyboardToggle.classList.remove("is-visible"):this.virtualKeyboardToggle.classList.add("is-visible"),"virtualKeyboardToggleGlyph"in n){let a=null==(t=this.element)?void 0:t.querySelector(".ML__virtual-keyboard-toggle");a&&(a.innerHTML=this.options.createHTML(this.options.virtualKeyboardToggleGlyph))}let i=kt.serialize(this.model.root,{expandMacro:!1,defaultMode:this.options.defaultMode});("macros"in n||this.model.getValue()!==i)&&Po.insert("math",this.model,i,{insertionMode:"replaceAll",selectionMode:"after",format:"latex",suppressChangeNotifications:!0}),Vo(this)}getOptions(n){return gh(this.options,n)}getOption(n){return gh(this.options,n)}handleEvent(n){if(Qm(this))switch(n.type){case"focus":this.onFocus();break;case"blur":this.onBlur();break;case"mousedown":case"pointerdown":!function z3(n,o){var t;n.atomBoundsCache=new Map;let a,i=n,r=!1,s=!1,l="none";if(o.buttons>1)return;let c=!1,u=!1,m=o.clientX,p=o.clientY,f=Date.now(),b=i.field,L=setInterval(()=>{c?b.scroll({top:0,left:b.scrollLeft-16}):u&&b.scroll({top:0,left:b.scrollLeft+16})},32);function N(G){"PointerEvent"in window?(S1(b,"pointermove",R),S1(b,"pointerup pointercancel",N),G instanceof PointerEvent&&b.releasePointerCapture(G.pointerId)):(S1(window,"mousemove",R),S1(window,"mouseup blur",N)),r=!1,clearInterval(L),n.element.classList.remove("tracking"),G&&G.preventDefault()}function R(G){if(!i.hasFocus())return void N(null);let ae=G.clientX,W=G.clientY,le=R3(G)&&"touch"===G.pointerType?20:5;if(Date.now()<f+500&&Math.abs(m-ae)<le&&Math.abs(p-W)<le)return G.preventDefault(),void G.stopPropagation();let ve=b.getBoundingClientRect();u=ae>ve.right,c=ae<ve.left;let ce=a;R3(G)&&(G.isPrimary||(ce=F_(i,G.clientX,G.clientY,{bias:0})));let te=F_(i,ae,W,{bias:ae<=m?ae===m?0:-1:1});ce>=0&&te>=0&&(i.model.extendSelectionTo(ce,te),Vo(n)),G.preventDefault(),G.stopPropagation()}Dm&&Math.abs(Dm.x-m)<5&&Math.abs(Dm.y-p)<5&&Date.now()<Dm.time+500?(Q_+=1,Dm.time=f):(Dm={x:m,y:p,time:f},Q_=1);let j=b.getBoundingClientRect();if(m>=j.left&&m<=j.right&&p>=j.top&&p<=j.bottom){if(n.hasFocus()||(l="all",n.focus({scrollIntoView:!1})),n.flushInlineShortcutBuffer(),n.smartModeSuppressed=!1,a=F_(n,m,p,{bias:0}),a>=0){if(n.element.classList.add("tracking"),o.shiftKey){let G=n.model.selectionIsCollapsed;n.model.extendSelectionTo(n.model.anchor,a),l=l3(n.model)||G?"all":"selection"}else"placeholder"===n.model.at(a).type?(n.model.setSelection(a-1,a),l="selection"):"placeholder"===(null==(t=n.model.at(a).rightSibling)?void 0:t.type)?(n.model.setSelection(a,a+1),l="selection"):(n.model.position=a,l=l3(n.model)?"all":"selection");n.style={},3===o.detail||Q_>2?(N(o),(3===o.detail||3===Q_)&&(n.model.selection={ranges:[[0,n.model.lastOffset]]},l="all")):r||(r=!0,"PointerEvent"in window?(yl(b,"pointermove",R),yl(b,"pointerup pointercancel",N),o instanceof PointerEvent&&b.setPointerCapture(o.pointerId)):(yl(window,"blur",N),yl(window,"mousemove",R),yl(window,"mouseup",N)),(2===o.detail||2===Q_)&&(s=!0,S3(n.model),l="all"))}}else Dm=null;"none"!==l&&(n.model.selectionIsCollapsed&&(l="all"),Vo(n)),o.preventDefault()}(this,n);break;case"resize":this.resizeTimer&&cancelAnimationFrame(this.resizeTimer),this.resizeTimer=requestAnimationFrame(()=>Qm(this)&&this.onResize());break;case"wheel":this.onWheel(n);break;default:console.warn("Unexpected event type",n.type)}}dispose(){if(!Qm(this))return;let n=this.element;delete this.element,delete n.mathfield,n.innerHTML=this.model.getValue(),n.removeEventListener("pointerdown",this),n.removeEventListener("mousedown",this),n.removeEventListener("focus",this),n.removeEventListener("blur",this),window.removeEventListener("resize",this),window.removeEventListener("blur",this,{capture:!0}),delete this.accessibleMathML,delete this.ariaLiveText,delete this.field,delete this.fieldContent,this.virtualKeyboardToggle.remove(),delete this.virtualKeyboardToggle,this._virtualKeyboard&&(this._virtualKeyboard.dispose(),delete this._virtualKeyboard),function I$(n){zy(n.popover),V2&&V2.release(),W2&&W2.release(),delete n.popover}(this),function OV(n){zy(n.keystrokeCaption),fb&&fb.release(),gb&&gb.release(),delete n.keystrokeCaption}(this),this.stylesheets.forEach(o=>o?.release())}flushInlineShortcutBuffer(n){if(null!=n||(n={defer:!1}),!n.defer)return this.inlineShortcutBuffer=[],clearTimeout(this.inlineShortcutBufferFlushTimer),void(this.inlineShortcutBufferFlushTimer=0);this.options.inlineShortcutTimeout>0&&(clearTimeout(this.inlineShortcutBufferFlushTimer),this.inlineShortcutBufferFlushTimer=setTimeout(()=>this.flushInlineShortcutBuffer(),this.options.inlineShortcutTimeout))}executeCommand(n){var o,t;return"virtual-keyboard"===E_(n)?null!=(t=null==(o=this.virtualKeyboard)?void 0:o.executeCommand(n))&&t:function P$(n,o){var t,i,a;if(!o)return!1;let r,s=[],l=!1,c=!1;Ea(o)?(r=o[0],s=o.slice(1)):r=o,r=r.replace(/-\w/g,m=>m[1].toUpperCase());let u=null==(t=bu[r])?void 0:t.target;if("model"===u){if(n.options.readOnly&&/^(paste|cut|insert|delete|transpose|add)/.test(r))return n.model.announce("plonk"),!1;/^(delete|transpose|add)/.test(r)&&"deleteBackward"!==r&&n.flushInlineShortcutBuffer(),/^(delete|transpose|add)/.test(r)&&"latex"!==n.mode&&(n.popUndoStack(),n.snapshot()),"latex"===n.mode&&!/^(complete)/.test(r)&&Y2(n),bu[r].fn(n.model,...s),"latex"!==n.mode&&/^(delete|transpose|add)/.test(r)&&n.snapshot(),"latex"===n.mode&&O1(n),c=!0,l=!0}else if("virtual-keyboard"===u)c=null!=(a=null==(i=n.virtualKeyboard)?void 0:i.executeCommand(o))&&a,l=!0;else{if(!bu[r])throw new Error(`Unknown command "${r}"`);/^(undo|redo)/.test(r)&&n.flushInlineShortcutBuffer(),c=bu[r].fn(n,...s),l=!0}return"virtual-keyboard"!==u&&(!n.model.selectionIsCollapsed||/^(transpose|paste|complete|((moveToNextChar|moveToPreviousChar|extend).*))_$/.test(r))&&(n.flushInlineShortcutBuffer(),n.style={}),c&&Vo(n),l}(this,n)}get errors(){return function My(n,o,t){var i;let a=new f1(uh(n,null),o,{args:null,mathstyle:"displaystyle",parseMode:null!=(i=t?.parseMode)?i:"math"});for(;!a.end();)a.parse();return a.errors}(this.model.getValue(),this)}getValue(n,o,t){return this.model.getValue(n,o,t)}setValue(n,o){var t;void 0===(o=o??{mode:"math"}).insertionMode&&(o.insertionMode="replaceAll"),(void 0===o.format||"auto"===o.format)&&(o.format="latex");let i="math";(void 0===o.mode||"auto"===o.mode)&&(i=null!=(t=w3(this.model,this.model.position))?t:"math"),Po.insert(i,this.model,n,o)&&(this.undoManager.snapshot(),Vo(this))}get expression(){let n=this.computeEngine;return n?n.box(n.parse(this.model.getValue())):null}loadSound(n){var o=this;return(0,Yi.Z)(function*(){var t,i,a,r,s,l,c;delete o.audioBuffers[n];let u="";switch(n){case"keypress":u="string"==typeof o.options.keypressSound?o.options.keypressSound:null==(t=o.options.keypressSound)?void 0:t.default;break;case"spacebar":u="string"==typeof o.options.keypressSound?o.options.keypressSound:null!=(r=null==(i=o.options.keypressSound)?void 0:i.spacebar)?r:null==(a=o.options.keypressSound)?void 0:a.default;break;case"delete":u="string"==typeof o.options.keypressSound?o.options.keypressSound:null!=(c=null==(s=o.options.keypressSound)?void 0:s.delete)?c:null==(l=o.options.keypressSound)?void 0:l.default;break;case"plonk":u=o.options.plonkSound}if("string"!=typeof u)return;u=u.trim();let m=o.options.soundsDirectory;if(null==m||"null"===m||"none"===u||"null"===u)return;let p=yield(yield fetch(yield _3(m+"/"+u))).arrayBuffer(),f=yield o.audioContext.decodeAudioData(p);o.audioBuffers[n]=f})()}playSound(n){var o=this;return(0,Yi.Z)(function*(){if(o.audioBuffers[n]||(yield o.loadSound(n)),!o.audioBuffers[n])return;let t=o.audioContext.createBufferSource();t.buffer=o.audioBuffers[n];let i=o.audioContext.createGain();i.gain.value=.5,t.connect(i).connect(o.audioContext.destination),t.start()})()}scrollIntoView(){var n;if(!this.element)return;null==(n=this.host)||n.scrollIntoView({block:"nearest",inline:"nearest"}),this.dirty&&Zm(this,{interactive:!0});let o=this.field.getBoundingClientRect(),t=null;if(this.model.selectionIsCollapsed)t=w_(this.field);else{let i=Ky(this);if(i.length>0){let a=-1/0,r=-1/0;for(let s of i)s.right>a&&(a=s.right),s.top<r&&(r=s.top);t={x:a+o.left-this.field.scrollLeft,y:r+o.top-this.field.scrollTop,height:0}}}if(this.host&&t){let i=this.host.getBoundingClientRect(),a=t.y,r=this.host.scrollTop;a<i.top?r=a-i.top+this.host.scrollTop:a>i.bottom&&(r=a-i.bottom+this.host.scrollTop+t.height),this.host.scroll({top:r,left:0})}if(t){let i=t.x-window.scrollX,a=this.field.scrollLeft;i<o.left?a=i-o.left+this.field.scrollLeft-20:i>o.right&&(a=i-o.right+this.field.scrollLeft+20),this.field.scroll({top:this.field.scrollTop,left:a})}}insert(n,o){if("string"==typeof n&&n.length>0){if(this.flushInlineShortcutBuffer(),(o=o??{mode:"math"}).focus&&this.focus(),o.feedback&&(this.options.keypressVibration&&d2()&&navigator.vibrate(3),this.playSound("keypress")),o.scrollIntoView&&this.scrollIntoView(),"\\\\"===n)x3(this.model);else if("&"===n)b3(this.model);else{let t=this.style;Po.insert(this.mode,this.model,n,Et({style:this.model.at(this.model.position).computedStyle},o)),o.resetStyle&&(this.style=t)}return this.undoManager.snapshot(),Vo(this),!0}return!1}switchMode(n,o="",t=""){var i;if(this.mode===n||this.options.readOnly||null==(i=this.host)||!i.dispatchEvent(new Event("mode-change",{bubbles:!0,composed:!0,cancelable:!0})))return;let a=this.mode,{model:r}=this;r.deferNotifications({content:!!t||!!o,selection:!0,type:"insertText"},()=>{let s=!1;if(this.flushInlineShortcutBuffer(),this.smartModeSuppressed=/text|math/.test(this.mode)&&/text|math/.test(n),o&&"latex"!==n){let l=kr(o,this,{parseMode:n});r.collapseSelection("forward");let c=r.at(r.position);r.position=r.offsetOf(c.parent.addChildrenAfter(l,c)),s=!0}if(this.mode=n,"latex"===n){let l=r.selectionIsCollapsed;Nm(this,"accept");let c,u=r.at(r.position);if(l)c="\\";else{let p=Vs(r.selection);c=this.model.getValue(p,"latex");let f=this.model.extractAtoms(p);1===f.length&&f[0]instanceof Ro&&(c=o,l=!0),u=r.at(p[0])}let m=new xd(c,this);u.parent.addChildAfter(m,u),l?r.position=r.offsetOf(m.lastChild):r.setSelection(r.offsetOf(m.firstChild),r.offsetOf(m.lastChild))}else k_(r).forEach(l=>{l.isError=!1});if(t){let l=kr(t,this,{parseMode:a});r.collapseSelection("forward");let c=r.at(r.position);r.position=r.offsetOf(c.parent.addChildrenAfter(l,c)),s=!0}return Vo(this),s}),this.mode=n}hasFocus(){return this.keyboardDelegate.hasFocus()}focus(n){var o;this.hasFocus()||(this.keyboardDelegate.focus(),this.model.announce("line"),(null==(o=n?.scrollIntoView)||o)&&this.scrollIntoView())}blur(){this.hasFocus()&&this.keyboardDelegate.blur()}select(){this.model.selection={ranges:[[0,this.model.lastOffset]]}}applyStyle(n,o={}){var t,i;let a={operation:"set",suppressChangeNotifications:!1};L1(o)?a.range=o:(a.range=o.range,a.suppressChangeNotifications=null!=(t=o.suppressChangeNotifications)&&t);let r=q3(this,n),s=null!=(i=a.operation)?i:"set";this.model.deferNotifications({content:!a.suppressChangeNotifications,type:"insertText"},()=>{void 0===a.range?this.model.selection.ranges.forEach(l=>ub(this.model,l,r,{operation:s})):ub(this.model,a.range,r,{operation:s})}),Vo(this)}getCaretPoint(){let n=w_(this.field);return n?{x:n.x,y:n.y}:null}setCaretPoint(n,o){let t=F_(this,n,o,{bias:0});if(t<0)return!1;let i=this.model.position;return this.model.position=t,this.model.announce("move",i),Vo(this),!0}getPlaceholderField(n){var o;return null==(o=this.placeholders.get(n))?void 0:o.field}attachNestedMathfield(){let n=!1,o=this.field.getBoundingClientRect();this.placeholders.forEach((t,i)=>{var a,r;let s=this.field.querySelector(`[data-placeholder-id="${i}"]`);if(!s)return;let l=s.getBoundingClientRect(),u=l.left-o.left+(null!=(a=this.element.offsetLeft)?a:0);(!t.field.style.left||Math.abs(u-parseFloat(t.field.style.left))>=1)&&(n=!0,t.field.style.left=`${u}px`);let m=l.top-o.top+(null!=(r=this.element.offsetTop)?r:0);(!t.field.style.top||Math.abs(m-parseFloat(t.field.style.top))>=1)&&(n=!0,t.field.style.top=`${m}px`)}),n&&Vo(this)}canUndo(){return this.undoManager.canUndo()}canRedo(){return this.undoManager.canRedo()}popUndoStack(){this.undoManager.pop()}snapshot(){var n,o;this.undoManager.snapshot()&&(null==(n=this.virtualKeyboard)||n.updateToolbar(this),null==(o=this.host)||o.dispatchEvent(new CustomEvent("undo-state-change",{bubbles:!0,composed:!0,detail:{type:"snapshot"}})))}snapshotAndCoalesce(){var n,o;this.undoManager.snapshotAndCoalesce()&&(null==(n=this.virtualKeyboard)||n.updateToolbar(this),null==(o=this.host)||o.dispatchEvent(new CustomEvent("undo-state-change",{bubbles:!0,composed:!0,detail:{type:"snapshot"}})))}undo(){var n,o;this.undoManager.undo()&&(null==(n=this.virtualKeyboard)||n.updateToolbar(this),null==(o=this.host)||o.dispatchEvent(new CustomEvent("undo-state-change",{bubbles:!0,composed:!0,detail:{type:"undo"}})))}redo(){var n,o;this.undoManager.redo()&&(null==(n=this.virtualKeyboard)||n.updateToolbar(this),null==(o=this.host)||o.dispatchEvent(new CustomEvent("undo-state-change",{bubbles:!0,composed:!0,detail:{type:"undo"}})))}resetUndo(){var n;null==(n=this.undoManager)||n.reset()}_onSelectionDidChange(){var n,o,t;let i=this.model;this.keyboardDelegate.setValue(this.model.getValue(this.model.selection,"latex-expanded"));let a=i.getAtoms(i.selection);if(1===a.length&&"placeholder"===a[0].type){let r=a[0];this.placeholders.has(r.placeholderId)&&(null==(n=this.placeholders.get(r.placeholderId))||n.field.focus())}{let r=i.at(i.position),s=null!=(o=r.mode)?o:ib(this.options);this.mode!==s&&("latex"===this.mode?(Nm(this,"accept",{mode:s}),i.position=i.offsetOf(r)):this.switchMode(s))}null==(t=this.host)||t.dispatchEvent(new Event("selection-change",{bubbles:!0,composed:!0}))}onFocus(){var n,o,t;this.focusBlurInProgress||!this.blurred||(this.focusBlurInProgress=!0,this.blurred=!1,this.keyboardDelegate.focus(),null==(n=this.virtualKeyboard)||n.setOptions(this.options),null==(o=this.virtualKeyboard)||o.enable(),"onfocus"===this.options.virtualKeyboardMode&&this.executeCommand("showVirtualKeyboard"),I1(this),Zm(this,{interactive:!0}),null==(t=this.host)||t.dispatchEvent(new FocusEvent("focus",{bubbles:!1,composed:!0})),this.valueOnFocus=this.model.getValue(),this.focusBlurInProgress=!1)}onBlur(){var n,o,t,i;this.focusBlurInProgress||this.blurred||(this.focusBlurInProgress=!0,this.blurred=!0,this.ariaLiveText.textContent="",Nm(this,"accept"),this.model.getValue()!==this.valueOnFocus&&(null==(n=this.host)||n.dispatchEvent(new Event("change",{bubbles:!0,composed:!0}))),/onfocus|manual/.test(this.options.virtualKeyboardMode)&&!ca().sharedVirtualKeyboard&&this.executeCommand("hideVirtualKeyboard"),null==(o=this.virtualKeyboard)||o.disable(),null==(t=this.host)||t.dispatchEvent(new Event("blur",{bubbles:!1,composed:!0})),null==(i=this.host)||i.dispatchEvent(new UIEvent("focusout",{bubbles:!0,composed:!0})),Vo(this),this.focusBlurInProgress=!1)}onCompositionStart(n){this.model.deleteAtoms(Vs(this.model.selection));let o=w_(this.field);o&&requestAnimationFrame(()=>{Zm(this),this.keyboardDelegate.moveTo(o.x,o.y-o.height)})}onCompositionUpdate(n){(function X$(n,o){let t=n.at(n.position);if("composition"===t.type)t.value=o;else{let{caret:i}=t;t.caret="";let a=new M2(o,n.mathfield,{mode:t.mode});a.caret=i,t.parent.addChildAfter(a,t),n.position+=1}})(this.model,n),Vo(this)}onCompositionEnd(n){(function eV(n){let o=n.at(n.position);"composition"===o.type&&(o.parent.removeChild(o),n.position-=1)})(this.model),bb(this,n,{simulateKeystroke:!0})}onResize(){I1(this)}onWheel(n){let o=5*n.deltaX;if(!Number.isFinite(o)||0===o)return;let t=this.field;o<0&&0===t.scrollLeft||o>0&&t.offsetWidth+t.scrollLeft>=t.scrollWidth||(t.scrollBy({top:0,left:o}),n.preventDefault(),n.stopPropagation())}getHTMLElement(n){let o=n;for(;!o.id&&o.hasChildren;)o=n.children[0];if(o.id)return this.fieldContent.querySelector(`[data-atom-id="${o.id}"]`);throw new TypeError("Could not get an ID from atom")}}(this.shadowRoot.querySelector(":host > div"),mi(Et({},Di.has(this)?Di.get(this).options:q1(this)),{eventSink:this,value:a})),!Di.has(this)){this.upgradeProperty("disabled"),this.upgradeProperty("readonly");for(let r of Object.keys(Cl.optionsAttributes))this.upgradeProperty(Ec(r))}null!=(t=this._mathfield)&&t.model?(Di.has(this)&&this._mathfield.model.deferNotifications({content:!1,selection:!1},()=>{let r=Di.get(this).value;void 0!==r&&this._mathfield.setValue(r),this._mathfield.model.selection=Di.get(this).selection,Di.delete(this)}),i.addEventListener("slotchange",r=>{if(r.target!==i)return;let s=i.assignedNodes().map(l=>3===l.nodeType?l.textContent:"").join("").trim();s!==this._slotValue&&(this._mathfield?this._mathfield.setValue(s):this.value=s)}),this.dispatchEvent(new Event("mount",{cancelable:!1,bubbles:!0,composed:!0}))):this._mathfield=null}disconnectedCallback(){if(this.dispatchEvent(new Event("unmount",{cancelable:!1,bubbles:!0,composed:!0})),!this._mathfield)return;let n=gh(this._mathfield.options,Object.keys(Cl.optionsAttributes).map(o=>Ec(o)));Di.set(this,{value:this._mathfield.getValue(),selection:this._mathfield.model.selection,options:n}),this._mathfield.dispose(),this._mathfield=null}upgradeProperty(n){if(this.hasOwnProperty(n)){let o=this[n];delete this[n],("readonly"===n||"read-only"===n)&&(n="readOnly"),this[n]=o}}attributeChangedCallback(n,o,t){if(o===t)return;let i=null!==t;switch(n){case"disabled":this.disabled=i;break;case"read-only":case"readonly":this.readOnly=i}}get readonly(){return this.hasAttribute("readonly")||this.hasAttribute("read-only")}set readonly(n){let o=!!n;o?(this.setAttribute("readonly",""),this.setAttribute("disabled",""),this.setAttribute("aria-readonly","true")):(this.removeAttribute("readonly"),this.removeAttribute("read-only"),this.removeAttribute("disabled"),this.removeAttribute("aria-readonly")),this.setOptions({readOnly:o})}get disabled(){return this.hasAttribute("disabled")}set disabled(n){let o=!!n;o?this.setAttribute("disabled",""):this.removeAttribute("disabled"),this.setAttribute("aria-disabled",o?"true":"false"),this.setOptions({readOnly:o})}get value(){return this.getValue()}set value(n){this.setValue(n)}get defaultMode(){return this.getOption("defaultMode")}set defaultMode(n){this.setOptions({defaultMode:n})}get fontsDirectory(){return this.getOption("fontsDirectory")}set fontsDirectory(n){this.setOptions({fontsDirectory:n})}get mathModeSpace(){return this.getOption("mathModeSpace")}set mathModeSpace(n){this.setOptions({mathModeSpace:n})}get inlineShortcutTimeout(){return this.getOption("inlineShortcutTimeout")}set inlineShortcutTimeout(n){this.setOptions({inlineShortcutTimeout:n})}get keypressVibration(){return this.getOption("keypressVibration")}set keypressVibration(n){this.setOptions({keypressVibration:n})}get keypressSound(){return this.getOption("keypressSound")}set keypressSound(n){this.setOptions({keypressSound:n})}get plonkSound(){var n;return null!=(n=this.getOption("plonkSound"))?n:null}set plonkSound(n){this.setOptions({plonkSound:n})}get letterShapeStyle(){return this.getOption("letterShapeStyle")}set letterShapeStyle(n){this.setOptions({letterShapeStyle:n})}get locale(){return this.getOption("locale")}set locale(n){this.setOptions({locale:n})}get readOnly(){return this.getOption("readOnly")}set readOnly(n){this.setOptions({readOnly:n})}get removeExtraneousParentheses(){return this.getOption("removeExtraneousParentheses")}set removeExtraneousParentheses(n){this.setOptions({removeExtraneousParentheses:n})}get smartFence(){return this.getOption("smartFence")}set smartFence(n){this.setOptions({smartFence:n})}get smartMode(){return this.getOption("smartMode")}set smartMode(n){this.setOptions({smartMode:n})}get smartSuperscript(){return this.getOption("smartSuperscript")}set smartSuperscript(n){this.setOptions({smartSuperscript:n})}get speechEngine(){return this.getOption("speechEngine")}set speechEngine(n){this.setOptions({speechEngine:n})}get speechEngineRate(){return this.getOption("speechEngineRate")}set speechEngineRate(n){this.setOptions({speechEngineRate:n})}get speechEngineVoice(){return this.getOption("speechEngineVoice")}set speechEngineVoice(n){this.setOptions({speechEngineVoice:n})}get textToSpeechMarkup(){return this.getOption("textToSpeechMarkup")}set textToSpeechMarkup(n){this.setOptions({textToSpeechMarkup:n})}get textToSpeechRules(){return this.getOption("textToSpeechRules")}set textToSpeechRule(n){this.setOptions({textToSpeechRules:n})}get virtualKeyboardLayout(){return this.getOption("virtualKeyboardLayout")}set virtualKeyboardLayout(n){this.setOptions({virtualKeyboardLayout:n})}get virtualKeyboardMode(){return this.getOption("virtualKeyboardMode")}set virtualKeyboardMode(n){this.setOptions({virtualKeyboardMode:n})}get virtualKeyboardTheme(){return this.getOption("virtualKeyboardTheme")}set virtualKeyboardTheme(n){this.setOptions({virtualKeyboardTheme:n})}get virtualKeyboards(){return this.getOption("virtualKeyboards")}set virtualKeyboards(n){this.setOptions({virtualKeyboards:n})}get useSharedVirtualKeyboard(){return this.getOption("useSharedVirtualKeyboard")}set useSharedVirtualKeyboard(n){this.setOptions({useSharedVirtualKeyboard:n})}get sharedVirtualKeyboardTargetOrigin(){return this.getOption("sharedVirtualKeyboardTargetOrigin")}set sharedVirtualKeyboardTargetOrigin(n){this.setOptions({sharedVirtualKeyboardTargetOrigin:n})}get selection(){return this._mathfield?this._mathfield.model.selection:Di.has(this)?Di.get(this).selection:{ranges:[[0,0]],direction:"forward"}}set selection(n){"number"==typeof n&&(n={ranges:[[n,n]]}),this._mathfield?this._mathfield.model.selection=n:Di.has(this)?Di.set(this,mi(Et({},Di.get(this)),{selection:n})):Di.set(this,{value:void 0,selection:n,options:q1(this)})}get selectionIsCollapsed(){let n=this.selection;return 1===n.ranges.length&&n.ranges[0][0]===n.ranges[0][1]}get position(){return this._mathfield?this._mathfield.model.position:Di.has(this)?Di.get(this).selection.ranges[0][0]:0}set position(n){this._mathfield&&(this._mathfield.model.position=n),Di.has(this)?Di.set(this,mi(Et({},Di.get(this)),{selection:{ranges:[[n,n]]}})):Di.set(this,{value:void 0,selection:{ranges:[[n,n]]},options:q1(this)})}getOffsetDepth(n){var o;return this._mathfield?(null==(o=this._mathfield.model.at(n))?void 0:o.treeDepth)-2:0}get lastOffset(){var n,o;return null!=(o=null==(n=this._mathfield)?void 0:n.model.lastOffset)?o:-1}};function Ec(n){return n.toLowerCase().replace(/[^a-zA-Z\d]+(.)/g,(o,t)=>t.toUpperCase())}function q1(n){let o={},t=Cl.optionsAttributes;return Object.keys(t).forEach(i=>{if(n.hasAttribute(i)){let a=n.getAttribute(i);o[Ec(i)]="boolean"===t[i]||("on/off"===t[i]?"on"===a||"off"!==a&&void 0:"number"===t[i]?Number.parseFloat(a??"0"):a)}else"boolean"===t[i]&&(o[Ec(i)]=!1)}),o}function Cb(){return!(!window.ElementInternals||!HTMLElement.prototype.attachInternals||!("role"in window.ElementInternals.prototype))}var K3,G3,Y3,Tb=Cl;!As()||null!=(K3=window.customElements)&&K3.get("math-field")||(null!=globalThis[G3=Symbol.for("io.cortexjs.mathlive")]||(globalThis[G3]={}),globalThis[Symbol.for("io.cortexjs.mathlive")].version="0.89.4",window.MathfieldElement=Cl,null==(Y3=window.customElements)||Y3.define("math-field",Cl));var Pn=1200,zo=3e3,dr=4e3;function qt(n,o,t=zo,i="$0"){for(let a of o)vc[a]&&(vc[a].frequency=t,vc[a].category=n,vc[a].template=i.replace(/\$0/g,a)),wc[a]&&(wc[a]=mi(Et({},wc[a]),{frequency:t,category:n,template:i.replace(/\$0/g,a)}))}function ca(){var n;return null!=globalThis[n=Symbol.for("io.cortexjs.mathlive")]||(globalThis[n]={}),globalThis[Symbol.for("io.cortexjs.mathlive")]}qt("Trigonometry",["\\cos","\\sin","\\tan"],dr),qt("Trigonometry",["\\arccos","\\arcsin","\\arctan","\\arctg","\\arcctg","\\arcsec","\\arccsc","\\arsinh","\\arcosh","\\artanh","\\arcsech","\\arccsch","\\arg","\\ch","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\lg","\\lb","\\sec","\\sinh","\\sh","\\tanh","\\tg","\\th"],2e3),qt("Functions",["\\ln","\\log","\\exp","\\lim"],dr),qt("Functions",["\\dim","\\ker","\\deg","\\det","\\mod","\\min","\\max"],zo),qt("Functions",["\\hom"],Pn),qt("Decoration",["\\rule"],200,"$0{2em}{1em}"),qt("Decoration",["\\color","\\textcolor"],200,"{$0{m0}A}{$0{m1}B}{$0{m2}C }{$0{m3}a}{$0{m4}b}{$0{m5}c}{$0{m6}8}"),qt("Decoration",["\\overline","\\underline"],zo,"$0{\\placeholder{}}"),qt("Decoration",["\\enclose"],Pn,'\\enclose{updiagonalstrike,roundedbox}[1px solid red, mathbackground="#fbc0bd"]{x=0}'),qt("Decoration",["\\fcolorbox"],Pn,'\\fcolorbox{#cd0030}{#ffd400}{\\unicode{"2B1A}}'),qt("Decoration",["\\colorbox"],Pn,'\\colorbox{#fbc0bd}{\\unicode{"2B1A}}'),qt("Decoration",["\\boxed","\\cancel","\\bcancel","\\xcancel"],Pn,"$0{\\placeholder{}}"),qt("Decoration",["\\bbox"],Pn,'\\bbox[#ffd400, solid 2px #ffd400]{\\unicode{"2B1A}}'),qt("Styling",["\\mathbb"],dr,"$0{Don Knuth}"),qt("Styling",["\\textbf","\\textup","\\textit","\\textrm","\\textsf","\\texttt","\\textnormal","\\textmd","\\textsl","\\textsc","\\mathsf","\\mathtt","\\mathrm","\\mathfrak","\\mathcal","\\mathscr","\\mathbf","\\mathmd","\\mathit","\\text","\\mbox","\\Bbb","\\bold","\\bm","\\boldsymbol"],zo,"$0{Don Knuth}"),qt("Styling",["\\frak","\\tt","\\bf","\\it","\\rmfamily","\\sffamily","\\ttfamily","\\class","\\cssId","\\htmlData","\\htmlStyle"],Pn,"{$0 Don Knuth}"),qt("Styling",["\\bfseries","\\mdseries","\\upshape","\\slshape","\\scshape"],Pn,"\\text{$0 Don Knuth}"),qt("Styling",["\\class","\\cssId"],Pn,"$0{testIdentifier}{Don Knuth}"),qt("Styling",["\\fontseries"],Pn,"\\text{$0{b}Don Knuth}"),qt("Styling",["\\fontfamily"],Pn,"\\text{$0{cmtt}Don Knuth}"),qt("Styling",["\\fontshape"],Pn,"\\text{$0{sc}Don Knuth}"),qt("Styling",["\\selectfont"],Pn,"\\text{$0}"),qt("Styling",["\\emph"],Pn,"Don$0{Knuth}"),qt("Styling",["\\em"],Pn,"Don{$0 Knuth}"),qt("Layout",["\\mathop","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathord","\\mathinner","\\operatorname","\\operatorname*"],Pn,"x=$0{arg}=0"),qt("Layout",["\\middle"],Pn,"\\left\\{x$0|x>0\\right\\}"),qt("Layout",["\\overset","\\underset","\\stackrel","\\stackbin"],Pn,"$0{arg}{x=0}"),qt("Layout",["\\rlap","\\mathrlap"],Pn,"$0{/}0"),qt("Layout",["\\llap","\\mathllap"],Pn,"o$0{/}"),qt("Fractions",["\\frac"],dr,"$0{\\placeholder{}}{\\placeholder{}}"),qt("Fractions",["\\binom","\\dfrac","\\tfrac","\\dbinom","\\tbinom","\\pdiff","\\cfrac"],Pn,"$0{\\placeholder{}}{\\placeholder{}}"),qt("Fractions",["\\over","\\atop","\\choose"],Pn,'\\unicode{"2B1A} $0 \\unicode{"2B1A}'),qt("Fractions",["\\overwithdelims","\\atopwithdelims"],Pn,'{\\unicode{"2B1A} $0{\\lbrace}{\\rbrace} \\unicode{"2B1A}}'),qt("Extensible Operators",["\\sum","\\prod","\\bigcap","\\bigcup","\\int"],dr),qt("Extensible Operators",["\\bigoplus","\\smallint","\\iint","\\oint"],zo),qt("Extensible Operators",["\\bigwedge","\\bigvee","\\coprod","\\bigsqcup","\\bigotimes","\\bigodot","\\biguplus","\\intop","\\sqcup","\\sqcap","\\uplus","\\wr","\\Cap","\\Cup","\\doublecap","\\doublecup","\\amalg","\\iiint","\\oiint","\\oiiint","\\intclockwise","\\varointclockwise","\\ointctrclockwise","\\intctrclockwise"],Pn),qt("Accents",["\\vec"],dr),qt("Accents",["\\bar","\\ddot","\\acute","\\tilde","\\check"],zo,"$0{\\placeholder{}}"),qt("Accents",["\\^","\\`","\\'"],Pn,"$0{e}"),qt("Accents",["\\c"],Pn,"$0{c}"),qt("Accents",["\\~"],Pn,"$0{n}"),qt("Accents",["\\mathring","\\hat","\\dot","\\breve","\\grave"],Pn,"$0{\\placeholder{}}"),qt("Extensible Symbols",["\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftharpoon","\\overrightharpoon","\\overleftrightarrow","\\overbrace","\\overlinesegment","\\overgroup","\\widehat","\\widecheck","\\widetilde"],zo,"$0{ABC}"),qt("Extensible Symbols",["\\underrightarrow","\\underleftarrow","\\underleftrightarrow","\\underbrace","\\underlinesegment","\\undergroup","\\utilde"],zo,"$0{ABC}"),qt("Sizing",["\\tiny","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],Pn,"$0{x=0}"),qt("Sizing",["\\big","\\Big","\\bigg","\\Bigg"],Pn,"$0($0)"),qt("Sizing",["\\bigl","\\Bigl","\\biggl","\\Biggl"],Pn,"$0("),qt("Sizing",["\\bigr","\\Bigr","\\biggr","\\Biggr"],Pn,"$0)"),qt("Sizing",["\\bigm","\\Bigm","\\biggm","\\Biggm"],Pn,"$0|"),qt("Letterlike Symbols",["\\nabla","\\partial","\\N","\\R","\\Q","\\C","\\Z","\\exponentialE","\\forall","\\exists","\\nexists"],dr),qt("Letterlike Symbols",["\\doubleStruckCapitalP","\\P","\\ell","\\hbar","\\hslash","\\imath","\\jmath","\\imaginaryI","\\imaginaryJ","\\differentialD","\\rd","\\capitalDifferentialD","\\doubleStruckCapitalN","\\doubleStruckCapitalR","\\doubleStruckCapitalQ","\\doubleStruckCapitalC","\\doubleStruckCapitalZ","\\rD","\\differencedelta","\\mid","@","\\Re","\\Im","\\$","\\%","\\And","\\degree"],zo),qt("Letterlike Symbols",["\\top","\\bot","\\scriptCapitalE","\\scriptCapitalH","\\scriptCapitalL","\\gothicCapitalC","\\gothicCapitalH","\\gothicCapitalI","\\gothicCapitalR","\\Bbbk","\\Finv","\\Game","\\wp","\\eth","\\mho","\\pounds","\\yen","\\euro"],Pn),qt("Crosses",["\\dagger","\\dag"],dr),qt("Crosses",["\\ddag","\\ddagger","\\maltese","\\textdagger","\\textdaggerdbl"],Pn),qt("Various",["\\checkmark","\\diagup","\\diagdown","\\angle","\\measuredangle","\\sphericalangle","\\prime","\\doubleprime","\\backprime","\\backdoubleprime","\\sharp","\\flat","\\natural","\\&","\\#","\\clubsuit","\\spadesuit","\\diamondsuit","\\heartsuit","\\backslash","\\infty","/","\\_","\\/","|","'"],Pn),qt("Various",["\\unicode"],Pn,'$0{"2B1A}'),qt("Arrows",["\\longrightarrow","\\rightarrow","\\Longrightarrow","\\Rightarrow"],dr),qt("Arrows",["\\longmapsto","\\mapsto","\\Longleftrightarrow","\\rightleftarrows","\\leftarrow","\\curvearrowleft","\\uparrow","\\downarrow","\\hookrightarrow","\\rightharpoonup","\\rightleftharpoons"],zo),qt("Arrows",["\\Leftarrow","\\longleftrightarrow","\\longleftarrow","\\Longleftarrow","\\searrow","\\nearrow","\\swarrow","\\nwarrow","\\Uparrow","\\Downarrow","\\updownarrow","\\Updownarrow","\\hookleftarrow","\\leftharpoonup","\\leftharpoondown","\\rightharpoondown","\\leftrightarrows","\\dashrightarrow","\\dashleftarrow","\\leftleftarrows","\\Lleftarrow","\\twoheadleftarrow","\\leftarrowtail","\\looparrowleft","\\leftrightharpoons","\\circlearrowleft","\\Lsh","\\upuparrows","\\downharpoonleft","\\multimap","\\leftrightsquigarrow","\\twoheadrightarrow","\\rightarrowtail","\\looparrowright","\\curvearrowright","\\circlearrowright","\\Rsh","\\downdownarrows","\\upharpoonright","\\downharpoonright","\\rightsquigarrow","\\leadsto","\\Rrightarrow","\\restriction"],Pn),qt("Arrows",["\\upharpoonleft","\\rightrightarrows"],0),qt("Negated Arrows",["\\nrightarrow","\\nRightarrow","\\nleftrightarrow","\\nLeftrightarrow","\\nleftarrow","\\nLeftarrow"],Pn),qt("Extensible Symbols",["\\xrightarrow","\\xleftarrow","\\xRightarrow","\\xLeftarrow","\\xleftharpoonup","\\xleftharpoondown","\\xrightharpoonup","\\xrightharpoondown","\\xlongequal","\\xtwoheadleftarrow","\\xtwoheadrightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xrightleftharpoons","\\xleftrightharpoons","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium"],Pn,"$0[below]{above}=0"),qt("Negated Relations",["\\nless","\\nleqslant","\\lneq","\\lneqq","\\nleqq","\\unlhd","\\unrhd","\\lvertneqq","\\lnsim","\\lnapprox","\\nprec","\\npreceq","\\precnsim","\\precnapprox","\\nsim","\\nshortmid","\\nmid","\\nvdash","\\nvDash","\\ngtr","\\ngeqslant","\\ngeqq","\\gneq","\\gneqq","\\gvertneqq","\\gnsim","\\nsucc","\\succnsim","\\ncong","\\nshortparallel","\\nparallel","\\nVDash","\\nVdash","\\precneqq","\\succneqq","\\gnapprox","\\succnapprox","\\nsucceq"],Pn),qt("Hebrew",["\\aleph","\\beth","\\daleth","\\gimel"],Pn),qt("Fences",["\\lbrace","\\rbrace","\\vert","\\Vert","\\{","\\}","(",")","[","]"],dr),qt("Fences",["\\langle","\\rangle","\\lfloor","\\rfloor","\\lceil","\\rceil","\\mvert","\\|","\\mVert"],zo),qt("Fences",["\\lvert","\\rvert","\\lVert","\\rVert","\\lbrack","\\rbrack","\\ulcorner","\\urcorner","\\llcorner","\\lrcorner","\\lgroup","\\rgroup","\\lmoustache","\\rmoustache"],Pn),qt("Relations",["=","\\ne","\\neq","<",">","\\leqslant","\\geqslant","\\approx"],dr),qt("Relations",["\\lt","\\gt","\\le","\\ge","\\leq","\\geq","\\gg","\\cong","\\equiv","\\prec","\\preceq","\\succ","\\perp","\\parallel","\\propto","\\smile","\\frown","\\sim","\\gtrsim"],zo),qt("Relations",["\\coloneq","\\succeq","\\approxeq","\\thickapprox","\\lessapprox","\\gtrapprox","\\precapprox","\\succapprox","\\thicksim","\\succsim","\\precsim","\\backsim","\\eqsim","\\backsimeq","\\simeq","\\lesssim","\\nleq","\\ngeq","\\smallsmile","\\smallfrown","\\bowtie","\\asymp","\\leqq","\\eqslantless","\\ll","\\lll","\\lessgtr","\\lesseqgtr","\\lesseqqgtr","\\risingdotseq","\\fallingdotseq","\\preccurlyeq","\\curlyeqprec","\\vDash","\\Vvdash","\\bumpeq","\\Bumpeq","\\geqq","\\eqslantgtr","\\ggg","\\gtrless","\\gtreqless","\\gtreqqless","\\succcurlyeq","\\curlyeqsucc","\\Vdash","\\shortmid","\\shortparallel","\\between","\\pitchfork","\\varpropto","\\backepsilon","\\llless","\\gggtr","\\lhd","\\rhd","\\Join","\\doteq","\\doteqdot","\\Doteq","\\eqcirc","\\circeq","\\lessdot","\\gtrdot","\\measeq","\\eqdef","\\questeq"],Pn),qt("Logic",["\\leftrightarrow","\\Leftrightarrow","\\to"],dr),qt("Logic",["\\models","\\vdash"],zo),qt("Logic",["\\therefore","\\because","\\implies","\\gets","\\dashv","\\impliedby","\\biconditional","\\roundimplies"],Pn),qt("Operators",["+","-","*","\\cdot"],dr),qt("Operators",["\\sqrt"],dr,"$0{\\placeholder{}}"),qt("Operators",["\\pm","\\mp","\\times","\\div","\\surd"],zo),qt("Operators",["\\ltimes","\\rtimes","\\leftthreetimes","\\rightthreetimes","\\intercal","\\dotplus","\\centerdot","\\doublebarwedge","\\divideontimes","\\divides"],Pn),qt("Logic",["\\wedge","\\vee","\\neg"],dr),qt("Logic",["\\lnot"],zo),qt("Logic",["\\land","\\lor","\\barwedge","\\veebar","\\nor","\\curlywedge","\\curlyvee"],Pn),qt("Greek",["\\alpha","\\beta","\\gamma","\\delta","\\epsilon","\\varepsilon","\\zeta","\\eta","\\theta","\\vartheta","\\iota","\\kappa","\\varkappa","\\lambda","\\mu","\\nu","\\xi","\\pi","\\varpi","\\rho","\\varrho","\\sigma","\\varsigma","\\tau","\\phi","\\varphi","\\upsilon","\\chi","\\psi","\\omega","\\Gamma","\\Delta","\\Theta","\\Lambda","\\Xi","\\Pi","\\Sigma","\\Upsilon","\\Phi","\\Psi","\\Omega","\\digamma","\\omicron"],zo),qt("Sets",["\\emptyset","\\varnothing","\\cap","\\cup","\\in","\\notin","\\subset","\\supset","\\subseteq","\\supseteq","\\sqsubseteq"],dr),qt("Sets",["\\setminus","\\not","\\ni","\\sqsupseteq","\\nsupseteqq","\\supsetneq","\\varsupsetneq","\\supsetneqq","\\varsupsetneqq"],zo),qt("Sets",["\\smallsetminus","\\complement","\\owns","\\subsetneq","\\varsubsetneq","\\subsetneqq","\\varsubsetneqq","\\nsubset","\\nsupset","\\nsubseteq","\\nsupseteq","\\nsubseteqq","\\subseteqq","\\Subset","\\sqsubset","\\supseteqq","\\Supset","\\sqsupset"],Pn),qt("Spacing",["\\space","\\quad","\\qquad"],zo,'\\unicode{"203A}$0\\unicode{"2039}'),qt("Spacing",["\\!","\\,","\\:","\\;","\\enskip","\\enspace"],Pn,'\\unicode{"203A}$0\\unicode{"2039}'),qt("Spacing",["\\hspace","\\hspace*"],Pn,'\\unicode{"203A}$0{1em}\\unicode{"2039}'),qt("Punctuation",["\\colon","\\cdotp","\\ldots","\\cdots","\\ddots","\\vdots","?","!",":",'"',",",".",";"],zo),qt("Punctuation",["\\mathellipsis","\\ldotp","\\Colon"],Pn),qt("Boxes",["\\square","\\Box"],zo),qt("Boxes",["\\blacksquare","\\boxminus","\\boxplus","\\boxtimes","\\boxdot"],Pn),qt("Circles",["\\circ","\\bullet","\\circleddash","\\oplus","\\otimes"],zo),qt("Circles",["\\bigcirc","\\circledast","\\ominus","\\circledcirc","\\oslash","\\circledS","\\circledR","\\odot"],Pn),qt("Triangles",["\\triangle","\\triangleq"],zo),qt("Triangles",["\\bigtriangleup","\\vartriangle","\\triangledown","\\bigtriangledown","\\triangleleft","\\vartriangleleft","\\trianglelefteq","\\ntriangleleft","\\ntrianglelefteq","\\triangleright","\\vartriangleright","\\trianglerighteq","\\ntriangleright","\\ntrianglerighteq","\\blacktriangle","\\blacktriangledown","\\blacktriangleleft","\\blacktriangleright"],Pn),qt("Shapes",["\\ast","\\star"],zo),qt("Shapes",["\\diamond","\\Diamond","\\lozenge","\\blacklozenge","\\bigstar"],Pn);let rW=(()=>{class n extends xe.Q{actionClose(){this.mfe.value="",this.hiddenVirtualKeyboard(),this.onClose.emit()}actionInsert(){this.inp&&(this.inp.str=this.mfe.value),this.mfe.value="",this.hiddenVirtualKeyboard(),this.onInsertLatex.emit(this.inp)}showVirtualKeyboard(){this.isShow&&setTimeout(()=>{this.mfe.focus(),this.mfe.virtualKeyboardState="visible",this.isLoadLib=!1})}hiddenVirtualKeyboard(){this.mfe.virtualKeyboardState="hidden"}ngOnChanges(){this.startInitView(),this.mfe.value=(this.inp?.str.includes("<math xmlns")?this.commonService.convertMathTypeToLatex(this.inp?.str??""):this.inp?.str)??"",this.showVirtualKeyboard()}ngAfterViewInit(){this.startInitView()}startInitView(){if(this.isInitElement)return;const t=document.getElementById("formula-mathtype-editor");t&&(this.isInitElement=!0,t.appendChild(this.mfe),this.showVirtualKeyboard())}ngOnInit(){this.mfe.style.fontSize="35px",this.mfe.style.padding="10px",this.mfe.setOptions({fontsDirectory:"https://azota889.github.io/storage_public/azota_assets/mathlive/fonts",soundsDirectory:"https://azota889.github.io/storage_public/azota_assets/mathlive/sounds",virtualKeyboardMode:"onfocus",virtualKeyboardLayout:"dvorak"})}constructor(t){super(),this.commonService=t,this.onClose=new e.vpe,this.onInsertLatex=new e.vpe,this.isLoadLib=!0,this.isInitElement=!1,this.mfe=new Cl}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Yn.z))},n.\u0275cmp=e.Xpm({type:n,selectors:[["mathtype-editor"]],inputs:{inp:"inp",isShow:"isShow"},outputs:{onClose:"onClose",onInsertLatex:"onInsertLatex"},features:[e.qOj,e.TTD],decls:18,vars:10,consts:[[1,"box-dialog"],["azt-track-service","mathTypeEditor--ICqsoSyYS3",1,"dialog-overlay",3,"click"],[1,"dialog-header"],[1,"dialog-title"],["azt-track-service","mathTypeEditor-3Cej2Ykz3qf",1,"dialog-close",3,"click"],[1,"dialog-body"],["id","formula-mathtype-editor"],[1,"dialog-footer"],[1,"dialog-noti"],[1,"dialog-ok"],["azt-track-service","mathTypeEditor-QurJasjSBOm",1,"btn","btn-primary","w-24",3,"disabled","click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e.NdJ("click",function(){return i.actionClose()}),e.qZA(),e.TgZ(2,"div")(3,"div",2)(4,"div",3),e._uU(5),e.ALo(6,"mytranslate"),e.qZA(),e.TgZ(7,"div",4),e.NdJ("click",function(){return i.actionClose()}),e.TgZ(8,"mat-icon"),e._uU(9,"close"),e.qZA()()(),e.TgZ(10,"div",5),e._UZ(11,"div",6),e.qZA(),e.TgZ(12,"div",7),e._UZ(13,"div",8),e.TgZ(14,"div",9)(15,"button",10),e.NdJ("click",function(){return i.actionInsert()}),e._uU(16),e.ALo(17,"mytranslate"),e.qZA()()()()()),2&t&&(e.xp6(2),e.Gre("box dialog",i.isMobileDevice?"-mobile":"",""),e.xp6(3),e.hij(" ",e.lcZ(6,6,"lang_auto_soan_thao_cong_thuc")," "),e.xp6(10),e.Q6J("disabled",i.isLoadLib),e.xp6(1),e.hij(" ",e.lcZ(17,8,"lang_auto_chen")," "))},dependencies:[Yo.Hw,ye.JV],styles:["body{--keyboard-zindex: 9999}.box-dialog[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:flex-start;top:0;left:0;width:100vw;height:100vh;position:fixed;z-index:9999}.box-dialog[_ngcontent-%COMP%]   .dialog-overlay[_ngcontent-%COMP%]{top:0;left:0;width:100vw;height:100vh;position:fixed;background-color:#0000004d}.dialog[_ngcontent-%COMP%]{position:absolute;margin-top:7vh;width:650px;box-shadow:#0000003d 0 3px 8px}.dialog-mobile[_ngcontent-%COMP%]{position:absolute;margin-top:7vh;width:95%;box-shadow:#0000003d 0 3px 8px}.dialog-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #d0d0d0;padding:10px}.dialog-title[_ngcontent-%COMP%]{font-weight:700}.dialog-close[_ngcontent-%COMP%]{display:flex;align-items:center;border-radius:50%}.dialog-close[_ngcontent-%COMP%]:hover{background-color:#d0d0d04a;cursor:pointer}.dialog-footer[_ngcontent-%COMP%]{display:flex;padding:10px;border-top:1px solid #d0d0d0;justify-content:space-between;align-items:center}.dialog-body[_ngcontent-%COMP%]{padding:10px}.for-type[_ngcontent-%COMP%]{color:#292980;cursor:pointer}"]}),n})(),sW=(()=>{class n extends xe.Q{constructor(){super(...arguments),this.id_content="",this.onDropFile=new e.vpe}onFileSelected(t){let r=t.target.files,s=!!r&&r[0];0!=s&&this.onDropFile.emit(s)}setupDropFile(){const t=jQuery("#frame_inp_editor_"+this.id_content);t&&t.on("drag dragstart dragend dragover dragenter dragleave drop",function(i){i.preventDefault(),i.stopPropagation()}).on("dragover dragenter",function(){t.addClass("is-dragover")}).on("dragleave dragend drop",function(){t.removeClass("is-dragover")}).on("drop",i=>{this.onDropFile.emit(i.originalEvent.dataTransfer.files[0])})}ngAfterViewInit(){this.setupDropFile()}}return n.\u0275fac=function(){let o;return function(i){return(o||(o=e.n5z(n)))(i||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["question-dropper"]],inputs:{id_content:"id_content"},outputs:{onDropFile:"onDropFile"},features:[e.qOj],decls:13,vars:7,consts:[["azt-track-service","question-dropper-qkcT8PYGlf",1,"editor-drop-file",3,"id","click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-6","h-6","text-pending","mx-auto"],["d","M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"],["d","M12 12v9"],["d","m16 16-4-4-4 4"],[1,"link"],["type","file","name","fileHomework",1,"hiddenIpt",3,"change"],["formChoseFile",""]],template:function(t,i){if(1&t){const a=e.EpF();e.TgZ(0,"div",0),e.NdJ("click",function(){e.CHM(a);const s=e.MAs(12);return e.KtG(s.click())}),e.O4$(),e.TgZ(1,"svg",1),e._UZ(2,"path",2)(3,"path",3)(4,"path",4),e.qZA(),e.kcU(),e.TgZ(5,"p"),e._uU(6),e.ALo(7,"mytranslate"),e.TgZ(8,"span",5),e._uU(9),e.ALo(10,"mytranslate"),e.qZA()()(),e.TgZ(11,"input",6,7),e.NdJ("change",function(s){return i.onFileSelected(s)}),e.qZA()}2&t&&(e.MGl("id","frame_inp_editor_",i.id_content,""),e.xp6(6),e.hij("",e.lcZ(7,3,"lang_auto_keo_tha_fiel_vao_day_hoc_bam_vao")," "),e.xp6(3),e.Oqu(e.lcZ(10,5,"lang_auto_chon_file")+" ..."))},dependencies:[ye.JV],styles:[".editor-drop-file[_ngcontent-%COMP%]{cursor:pointer;text-align:center;border:1px dotted #2462ae;padding:20px;border-radius:5px;-webkit-user-select:none;user-select:none}.editor-drop-file[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding:0;margin:0}.editor-drop-file[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]{color:#2462ae}.is-dragover[_ngcontent-%COMP%]{background-color:#2462ae6a}"]}),n})();var X3=I(56291);function lW(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",1)(1,"div",2),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.actionClose())}),e.qZA(),e.TgZ(2,"div",3)(3,"div",4)(4,"div",5),e._uU(5),e.ALo(6,"mytranslate"),e.qZA(),e.TgZ(7,"div",6),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.actionClose())}),e.TgZ(8,"mat-icon"),e._uU(9,"close"),e.qZA()()(),e.TgZ(10,"div",7),e._uU(11),e.ALo(12,"mytranslate"),e.qZA(),e.TgZ(13,"div",8),e._UZ(14,"div",9),e.TgZ(15,"div",10)(16,"span",11)(17,"button",12),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.actionClose())}),e._uU(18),e.ALo(19,"mytranslate"),e.qZA()(),e.TgZ(20,"button",13),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.actionClose(!0))}),e._uU(21),e.ALo(22,"mytranslate"),e.qZA()()()()()}if(2&n){const t=e.oxw();e.xp6(5),e.hij(" ",e.lcZ(6,4,"lang_auto_xac_nhan")," "),e.xp6(6),e.hij(" ",e.lcZ(12,6,t.msgConfirm)," "),e.xp6(7),e.hij(" ",e.lcZ(19,8,"lang_auto_huy")," "),e.xp6(3),e.hij(" ",e.lcZ(22,10,"lang_auto_xac_nhan")," ")}}let cW=(()=>{class n extends xe.Q{constructor(t){super(),this.commonService=t,this.showConfirm=!1,this.msgConfirm=""}actionClose(t){this.showConfirm=!1,this.callback&&this.callback(t||!1)}startConfirm(t){return new Promise(i=>{this.msgConfirm=t,this.showConfirm=!0,this.callback=a=>{i(a)}})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Yn.z))},n.\u0275cmp=e.Xpm({type:n,selectors:[["editor-confirm"]],features:[e.qOj],decls:1,vars:1,consts:[["class","box-dialog",4,"ngIf"],[1,"box-dialog"],["azt-track-service","confirm-KaF7r9iJd",1,"overlay",3,"click"],[1,"dialog","box"],[1,"dialog-header"],[1,"dialog-title"],["azt-track-service","confirm-uojtwFwgYyj",1,"dialog-close",3,"click"],[1,"dialog-body"],[1,"dialog-footer"],[1,"dialog-noti"],[1,"dialog-confirm"],[1,"mr-3"],["azt-track-service","confirm-IkBjzbPeZUQ",1,"btn","btn-secondary","mr-2","w-24",3,"click"],["azt-track-service","confirm-PuBYMRtw1El",1,"btn","btn-primary","w-24",3,"click"]],template:function(t,i){1&t&&e.YNc(0,lW,23,12,"div",0),2&t&&e.Q6J("ngIf",i.showConfirm)},dependencies:[F.O5,Yo.Hw,ye.JV],styles:[".box-dialog[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:flex-start;top:0;left:0;width:100vw;height:100vh;position:fixed;z-index:9999}.dialog[_ngcontent-%COMP%]{margin-top:7vh;width:550px;box-shadow:#0000003d 0 3px 8px}.overlay[_ngcontent-%COMP%]{background-color:#0000004d;width:100%;height:100vh;position:absolute}.dialog-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px}.dialog-title[_ngcontent-%COMP%]{font-weight:700}.dialog-close[_ngcontent-%COMP%]{display:flex;align-items:center;border-radius:50%}.dialog-close[_ngcontent-%COMP%]:hover{background-color:#d0d0d04a;cursor:pointer}.dialog-footer[_ngcontent-%COMP%]{display:flex;padding:10px;justify-content:space-between;align-items:center}.dialog-body[_ngcontent-%COMP%]{padding:10px}"]}),n})(),uW=(()=>{class n extends xe.Q{actionClose(){this.onClose.emit()}actionFinish(){this.onPushImage.emit({element:this.el_target,source:this.src_source,output:this.editor._imgCtx.canvas.toDataURL("image/png",1)})}startLoad(){this.is_load_libs=!1,this.commonService.loadScriptPromises([{source:this.cdnService.convertCdnLinkOfGitHub("js/mnpaint_bundle.js?v=0.3"),name:"mnpaint_bundle.js"}]).then(()=>{if(this.is_load_libs=!0,this.el_target){this.src_source=this.el_target.getAttribute("src")||"";var t=document.createElement("img");this.el?.appendChild(t),t.onload=()=>{const i=mnpaint.getInstance();i.startSession(t),i.config.width=this.el?.clientWidth,i.config.height=this.el?.clientHeight,i.config.resizable=!1,i.config.stopWhenClickOutsize=!1,i.config.stopWhenClickOutside=!1,i.config.autoUpdateSource="change",this.editor=i},t.src=this.src_source}})}uploadImageAction(){this.editor._fileInput.click()}addTextAction(){this.editor._addText()}cropAction(){this.editor._setSelectionType("crop")}undoAction(){this.editor._undo()}redoAction(){this.editor._redo()}zoomAction(t){t?this.editor.zoomIn():this.editor.zoomOut()}ngAfterViewInit(){this.el=document.getElementById("only-image-editor_image__process"),this.startLoad()}constructor(t){super(),this.cdnService=t,this.onClose=new e.vpe,this.onPushImage=new e.vpe,this.el=null,this.src_source="",this.is_load_libs=!1}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(tr.E))},n.\u0275cmp=e.Xpm({type:n,selectors:[["only-image-editor"]],inputs:{el_target:"el_target"},outputs:{onClose:"onClose",onPushImage:"onPushImage"},features:[e.qOj],decls:66,vars:6,consts:[[1,"box-dialog"],["azt-track-service","imageEditor-E8qc0UaMWsA",1,"dialog-overlay",3,"click"],[1,"dialog","box"],[1,"dialog-body"],[1,"img-editor-bx"],[1,"bx-content"],[1,"az-editor"],[1,"az-editor-top-bar"],[1,"top-bar-tool",2,"width","55px"],[1,"top-bar-tool"],[1,"top-bar-tool-item"],["azt-track-service","imageEditor-Z62bVA0hAQV","matTooltip","Undo",1,"btn-az-text","mr-3",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"icon"],["d","M3 7v6h6"],["d","M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13"],["azt-track-service","imageEditor-_e7HTV21HlD","matTooltip","Redo",1,"btn-az-text",3,"click"],["d","M21 7v6h-6"],["d","M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7"],["azt-track-service","imageEditor-z4iVO06Ys6H","matTooltip","Zoom +",1,"btn-az-text","mr-2",3,"click"],["cx","11","cy","11","r","8"],["x1","21","y1","21","x2","16.65","y2","16.65"],["x1","11","y1","8","x2","11","y2","14"],["x1","8","y1","11","x2","14","y2","11"],["azt-track-service","imageEditor-690dZE83J6L","matTooltip","Zoom -",1,"btn-az-text",3,"click"],[1,"az-editor-body"],[1,"az-editor-slide-bar"],[1,"az-tool"],["azt-track-service","imageEditor-qzyGDqt8nDW",1,"az-tool-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"az-tool-icon"],["d","M6 2v14a2 2 0 0 0 2 2h14"],["d","M18 22V8a2 2 0 0 0-2-2H2"],["azt-track-service","imageEditor-RUdGS0nAto3",1,"az-tool-item",3,"click"],["points","4 7 4 4 20 4 20 7"],["x1","9","y1","20","x2","15","y2","20"],["x1","12","y1","4","x2","12","y2","20"],["azt-track-service","imageEditor-efAq1HoIGbC",1,"az-tool-item",3,"click"],["d","M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"],["d","M12 12v9"],["d","m16 16-4-4-4 4"],[1,"az-editor-main"],["id","only-image-editor_image__process",1,"az-editor-content"],[1,"dialog-footer"],[1,"dialog-noti"],[1,"dialog-ok"],["azt-track-service","imageEditor-DcXjxkUVcBd",1,"btn","btn-secondary","mr-2","w-20",3,"click"],["azt-track-service","imageEditor-GDQpZCPJRZZ",1,"btn","btn-primary","w-20",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e.NdJ("click",function(){return i.actionClose()}),e.qZA(),e.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7),e._UZ(8,"div",8),e.TgZ(9,"div",9)(10,"div",10)(11,"button",11),e.NdJ("click",function(){return i.undoAction()}),e.O4$(),e.TgZ(12,"svg",12),e._UZ(13,"path",13)(14,"path",14),e.qZA()(),e.kcU(),e.TgZ(15,"button",15),e.NdJ("click",function(){return i.redoAction()}),e.O4$(),e.TgZ(16,"svg",12),e._UZ(17,"path",16)(18,"path",17),e.qZA()()()(),e.kcU(),e.TgZ(19,"div",9)(20,"div",10)(21,"button",18),e.NdJ("click",function(){return i.zoomAction(!0)}),e.O4$(),e.TgZ(22,"svg",12),e._UZ(23,"circle",19)(24,"line",20)(25,"line",21)(26,"line",22),e.qZA()(),e.kcU(),e.TgZ(27,"button",23),e.NdJ("click",function(){return i.zoomAction()}),e.O4$(),e.TgZ(28,"svg",12),e._UZ(29,"circle",19)(30,"line",20)(31,"line",22),e.qZA()()()()(),e.kcU(),e.TgZ(32,"div",24)(33,"div",25)(34,"nav",26)(35,"button",27),e.NdJ("click",function(){return i.cropAction()}),e.O4$(),e.TgZ(36,"svg",28),e._UZ(37,"path",29)(38,"path",30),e.qZA(),e.kcU(),e.TgZ(39,"span"),e._uU(40,"Crop"),e.qZA()(),e.TgZ(41,"button",31),e.NdJ("click",function(){return i.addTextAction()}),e.O4$(),e.TgZ(42,"svg",28),e._UZ(43,"polyline",32)(44,"line",33)(45,"line",34),e.qZA(),e.kcU(),e.TgZ(46,"span"),e._uU(47,"Text"),e.qZA()(),e.TgZ(48,"button",35),e.NdJ("click",function(){return i.uploadImageAction()}),e.O4$(),e.TgZ(49,"svg",28),e._UZ(50,"path",36)(51,"path",37)(52,"path",38),e.qZA(),e.kcU(),e.TgZ(53,"span"),e._uU(54,"Upload"),e.qZA()()()(),e.TgZ(55,"div",39),e._UZ(56,"div",40),e.qZA()()()()()(),e.TgZ(57,"div",41),e._UZ(58,"div",42),e.TgZ(59,"div",43)(60,"button",44),e.NdJ("click",function(){return i.actionClose()}),e._uU(61),e.ALo(62,"mytranslate"),e.qZA(),e.TgZ(63,"button",45),e.NdJ("click",function(){return i.actionFinish()}),e._uU(64),e.ALo(65,"mytranslate"),e.qZA()()()()()),2&t&&(e.xp6(61),e.hij(" ",e.lcZ(62,2,"lang_auto_huy")," "),e.xp6(3),e.hij(" ",e.lcZ(65,4,"lang_auto_luu")," "))},dependencies:[Ai.gM,ye.JV],styles:[".box-dialog[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:flex-start;top:0;left:0;width:100vw;height:100vh;position:fixed;z-index:9999}.box-dialog[_ngcontent-%COMP%]   .dialog-overlay[_ngcontent-%COMP%]{top:0;left:0;width:100vw;height:100vh;position:fixed;background-color:#0000004d}.dialog[_ngcontent-%COMP%]{position:absolute;margin-top:5vh;width:90vw;box-shadow:#0000003d 0 3px 8px}.dialog-title[_ngcontent-%COMP%]{font-weight:700}.dialog-close[_ngcontent-%COMP%]{display:flex;align-items:center;border-radius:50%;color:#5d647b}.dialog-close[_ngcontent-%COMP%]:hover{background-color:#d0d0d04a;cursor:pointer}.dialog-footer[_ngcontent-%COMP%]{display:flex;padding:10px;border-top:1px solid #dfe0e5;justify-content:space-between;align-items:center}.az-editor[_ngcontent-%COMP%]{width:100%}.az-editor-top-bar[_ngcontent-%COMP%]{display:flex;align-items:center;border-bottom:1px solid #dfe0e5;padding:10px}.az-editor-body[_ngcontent-%COMP%]{display:flex}.az-editor-slide-bar[_ngcontent-%COMP%]{border-right:1px solid #dfe0e5;border-top:0px;flex-direction:column;flex-shrink:0;height:70vh;width:80px;overflow:hidden auto}.az-editor-main[_ngcontent-%COMP%]{background:#f7f7f8;width:100%;overflow:auto;max-height:75vh}.az-editor-content[_ngcontent-%COMP%]{width:100%;height:100%}.az-editor-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto}.top-bar-tool[_ngcontent-%COMP%]{display:flex;margin-right:20px}.top-bar-tool-item[_ngcontent-%COMP%]{display:flex;align-items:center;color:#5d647b;font-size:12px}.top-bar-tool-input[_ngcontent-%COMP%]{border:1px solid #dfe0e5;border-radius:5px;width:50px;color:#5d647b;margin-left:5px;padding-left:3px;padding-right:3px}.az-tool[_ngcontent-%COMP%]{display:flex;flex-direction:column}.az-tool-item[_ngcontent-%COMP%]{padding:10px 24px;position:relative;display:flex;justify-content:center;align-items:center;flex-direction:column;color:#5d647b;background:transparent;border:none;-webkit-user-select:none;user-select:none;text-transform:initial;transition:all .5s}.az-tool-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-top:5px}.az-tool-item[_ngcontent-%COMP%]:hover{color:#1e41af;font-weight:500}.az-tool-icon[_ngcontent-%COMP%]{width:24px;height:24px}.az-tool[_ngcontent-%COMP%]   .active-tool[_ngcontent-%COMP%]{color:#1e41af;font-weight:500}.btn-az-text[_ngcontent-%COMP%]{border:none;background:transparent;color:#5d647b;transition:all .5s}.btn-az-text[_ngcontent-%COMP%]:hover:not([disabled]){color:#1e41af}.btn-az-text[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:24px;height:24px}.btn-az-text[_ngcontent-%COMP%]:disabled{opacity:.5}@media screen and (max-width: 768px){.top-bar-tool[_ngcontent-%COMP%]{margin-right:10px}.top-bar-tool[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none}}"]}),n})();function dW(n,o){1&n&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_cms_common_loading")))}function mW(n,o){1&n&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_auto_khong_co_cau_hoi_nao")))}function pW(n,o){if(1&n&&(e.TgZ(0,"mat-icon",18),e.ALo(1,"mytranslate"),e.ALo(2,"mytranslate"),e._uU(3," push_pin"),e.qZA()),2&n){const t=e.oxw().$implicit;e.s9C("matTooltip",t.isFixGroup?e.lcZ(1,1,"lang_auto_cau_hoi_trong_nhom_dang_duoc_co_dinh"):e.lcZ(2,3,"lang_auto_dap_an_trong_cau_hoi_dang_duoc_co_dinh"))}}function hW(n,o){1&n&&(e.TgZ(0,"div",19)(1,"span",20),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()()),2&n&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"tieu_de_nhom")))}function AW(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",21)(1,"app-quest-header",22),e.NdJ("onChooseSimilar",function(a){e.CHM(t);const r=e.oxw(2);return e.KtG(r.actionInsert(a))})("onError",function(a){e.CHM(t);const r=e.oxw(2);return e.KtG(r.commonService.snackError(a))}),e.qZA()()}if(2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("q",t)("similar",!0)}}function _W(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.label)}}function fW(n,o){if(1&n&&(e.TgZ(0,"span"),e.YNc(1,_W,2,1,"span",6),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",t.isCorrect)}}function gW(n,o){if(1&n&&(e.TgZ(0,"div")(1,"span"),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.YNc(4,fW,2,1,"span",30),e.qZA()),2&n){const t=e.oxw(3).$implicit;e.xp6(2),e.Oqu(e.lcZ(3,2,"lang_auto_dap_an_dung")+":"),e.xp6(2),e.Q6J("ngForOf",t.quest.answers)}}function xW(n,o){if(1&n&&(e.TgZ(0,"span",34),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.Oqu(t)}}function bW(n,o){if(1&n&&(e.TgZ(0,"div",31)(1,"span",32),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.YNc(4,xW,2,1,"span",33),e.qZA()),2&n){const t=e.oxw(3).$implicit;e.xp6(2),e.Oqu(e.lcZ(3,2,"lang_auto_dap_an")+":"),e.xp6(2),e.Q6J("ngForOf",t.strAns)}}function vW(n,o){1&n&&(e.TgZ(0,"span",39),e._UZ(1,"div",40)(2,"div",41),e.qZA())}const e4=function(n){return{"an-true":n}},wW=function(n){return{answerType:n}};function yW(n,o){if(1&n&&(e.TgZ(0,"div",35),e.YNc(1,vW,3,0,"span",36),e.TgZ(2,"div",37),e._uU(3),e.ALo(4,"isTrueFalseAnswer"),e.qZA(),e.TgZ(5,"div",38),e._UZ(6,"azt-dynamic-hook",25),e.qZA()()),2&n){const t=o.$implicit,i=e.oxw(3).$implicit;e.xp6(1),e.Q6J("ngIf",t.ans.isCorrect),e.xp6(1),e.Q6J("ngClass",e.VKq(7,e4,t.ans.isCorrect)),e.xp6(1),e.hij(" ",e.lcZ(4,5,e.VKq(9,wW,i.type))?t.ans.label.toLowerCase():t.ans.label,""),e.xp6(2),e.Q6J("ngClass",e.VKq(11,e4,t.ans.isCorrect)),e.xp6(1),e.Q6J("content",t.renderedStr)}}function CW(n,o){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,gW,5,4,"div",6),e.YNc(2,bW,5,4,"div",28),e.YNc(3,yW,7,13,"div",29),e.qZA()),2&n){const t=e.oxw(2).$implicit;e.Gre("box-ans quest-ans-ver-",t.v,""),e.xp6(1),e.Q6J("ngIf","pdf-1-0"==t.v),e.xp6(1),e.Q6J("ngIf",4==t.type&&t.strAns),e.xp6(1),e.Q6J("ngForOf",t.answers)}}const TW=function(n){return{"padding-mobile":n}};function kW(n,o){if(1&n&&(e.TgZ(0,"div",42)(1,"div",43)(2,"span"),e._uU(3),e.ALo(4,"mytranslate"),e.qZA()(),e.TgZ(5,"div",44),e._UZ(6,"azt-dynamic-hook",25),e.qZA()()),2&n){const t=e.oxw(2).$implicit,i=e.oxw();e.Gre("box-help quest-help-ver-",t.v,""),e.Q6J("ngClass",e.VKq(8,TW,i.isMobile)),e.xp6(3),e.Oqu(e.lcZ(4,6,"lang_auto_huong_dan_giai_upper")),e.xp6(3),e.Q6J("content",t.helpRenderedStr)}}function SW(n,o){if(1&n&&(e.TgZ(0,"div",23)(1,"div",24),e._UZ(2,"azt-dynamic-hook",25),e.qZA(),e.YNc(3,CW,4,6,"div",26),e.YNc(4,kW,7,10,"div",27),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Gre("tex2jax_process box-content quest-ver-",t.v,""),e.xp6(1),e.Q6J("content",t.renderedStr),e.xp6(1),e.Q6J("ngIf",!t.quest.isGroup),e.xp6(1),e.Q6J("ngIf",t.helpRenderedStr)}}function EW(n,o){if(1&n&&(e._UZ(0,"div",45),e.ALo(1,"safeContentQuestion")),2&n){const t=e.oxw().$implicit;e.Q6J("innerHTML",e.lcZ(1,1,t.err),e.oJD)}}function OW(n,o){1&n&&e._UZ(0,"div",46)}function IW(n,o){if(1&n&&(e.TgZ(0,"div",8)(1,"div",9),e.YNc(2,pW,4,5,"mat-icon",10),e._UZ(3,"div",11),e.ALo(4,"safeContentQuestion"),e.YNc(5,hW,4,3,"div",12),e.YNc(6,AW,2,2,"div",13),e.TgZ(7,"div",14)(8,"div"),e.YNc(9,SW,5,6,"div",15),e.YNc(10,EW,2,3,"div",16),e.qZA()()(),e.YNc(11,OW,1,0,"div",17),e.qZA()),2&n){const t=o.$implicit,i=e.oxw();e.xp6(2),e.Q6J("ngIf",t.isFixGroup||t.quest.isFixAns),e.xp6(1),e.Q6J("innerHTML",e.lcZ(4,7,i.errorQuestionView.makeErr(t,i.lstQuest)),e.oJD),e.xp6(2),e.Q6J("ngIf",t.quest.isGroup),e.xp6(1),e.Q6J("ngIf",!t.quest.isGroup),e.xp6(3),e.Q6J("ngIf",!t.err),e.xp6(1),e.Q6J("ngIf",t.err),e.xp6(1),e.Q6J("ngIf",0==i.lstQuest.length)}}const MW=function(n){return{"max-height":n}};let LW=(()=>{class n extends xe.Q{ngOnInit(){this.isMobile=this.commonService.isMobileOrTable()}actionClose(){this.onClose.emit()}actionInsert(t){t.v="similar",this.onInsert.emit(t)}constructor(){super(),this.onClose=new e.vpe,this.onInsert=new e.vpe,this.onChooseSimilar=new e.vpe,this.isMobile=!1,this.lstQuest=[],this.errorQuestionView=new ns(this.commonService)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["similar-quest"]],inputs:{inp:"inp"},outputs:{onClose:"onClose",onInsert:"onInsert",onChooseSimilar:"onChooseSimilar"},features:[e.qOj],decls:14,vars:12,consts:[[1,"box-dialog"],["azt-track-service","mathTypeEditor--ICqsoSyYS3",1,"dialog-overlay",3,"click"],["cdkDrag","","cdkDragRootElement",".dialog-drag","cdkDragHandle","",1,"dialog-header",2,"cursor","move"],[1,"dialog-title"],["azt-track-service","mathTypeEditor-3Cej2Ykz3qf",1,"dialog-close",3,"click"],[1,"dialog-body",2,"overflow","auto",3,"ngStyle"],[4,"ngIf"],["class","question-standalone-content-box",4,"ngFor","ngForOf"],[1,"question-standalone-content-box"],[1,"box-service","box","border","border-slate-400","dark:border-darkmode-400"],["class","fix-content",3,"matTooltip",4,"ngIf"],[1,"box-metadata",3,"innerHTML"],["class","group-box-header",4,"ngIf"],["class","box-service-header w-full",4,"ngIf"],[1,"box-service-content","relative"],["class","exam-box",4,"ngIf"],["class","exam-box",3,"innerHTML",4,"ngIf"],["class","skeleton-box-loading h-100 w-100",4,"ngIf"],[1,"fix-content",3,"matTooltip"],[1,"group-box-header"],[1,"title"],[1,"box-service-header","w-full"],[3,"q","similar","onChooseSimilar","onError"],[1,"exam-box"],["azt-track-service","azota-editor-sBE9TpjyDRX"],[3,"content"],[3,"class",4,"ngIf"],[3,"class","ngClass",4,"ngIf"],["class","mt-4",4,"ngIf"],["class","box-an",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"mt-4"],[1,"font-bold"],["class","bag-label",4,"ngFor","ngForOf"],[1,"bag-label"],[1,"box-an"],["class","checkmark",4,"ngIf"],["azt-track-service","azota-editor-KqGja32WPDY",1,"box-an-label",3,"ngClass"],["azt-track-service","azota-editor-cZIOwUqdMq6",1,"tex2jax_process","box-an-content",3,"ngClass"],[1,"checkmark"],[1,"checkmark_stem"],[1,"checkmark_kick"],[3,"ngClass"],[1,"help-title"],["azt-track-service","azota-editor-K029PsYFgYK",1,"tex2jax_process","help-content","text-slate-500"],[1,"exam-box",3,"innerHTML"],[1,"skeleton-box-loading","h-100","w-100"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e.NdJ("click",function(){return i.actionClose()}),e.qZA(),e.TgZ(2,"div")(3,"div",2)(4,"div",3),e._uU(5),e.ALo(6,"mytranslate"),e.qZA(),e.TgZ(7,"div",4),e.NdJ("click",function(){return i.actionClose()}),e.TgZ(8,"mat-icon"),e._uU(9,"close"),e.qZA()()(),e.TgZ(10,"div",5),e.YNc(11,dW,3,3,"div",6),e.YNc(12,mW,3,3,"div",6),e.YNc(13,IW,12,9,"div",7),e.qZA()()()),2&t&&(e.xp6(2),e.Gre("box dialog-drag dialog",i.isMobile?"-mobile":"",""),e.xp6(3),e.hij(" ",e.lcZ(6,8,"lang_auto_doi_cau_khac")," "),e.xp6(5),e.Q6J("ngStyle",e.VKq(10,MW,i.isMobile?"75vh":"500px")),e.xp6(1),e.Q6J("ngIf",!i.inp),e.xp6(1),e.Q6J("ngIf",i.inp&&0==i.inp.length),e.xp6(1),e.Q6J("ngForOf",i.inp))},dependencies:[F.mk,F.sg,F.O5,F.PC,hd.Zt,hd.Bh,Yo.Hw,Ai.gM,bm.O,X3.X,ye.JV,ye.ES,ye.rp],styles:['body{--keyboard-zindex: 9999}.box-dialog[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:flex-start;top:0;left:0;width:100vw;height:100vh;position:fixed;z-index:9999}.box-dialog[_ngcontent-%COMP%]   .dialog-overlay[_ngcontent-%COMP%]{top:0;left:0;width:100vw;height:100vh;position:fixed;background-color:#0000004d}.dialog[_ngcontent-%COMP%]{position:absolute;margin-top:7vh;width:650px;box-shadow:#0000003d 0 3px 8px}.dialog-mobile[_ngcontent-%COMP%]{position:absolute;margin-top:7vh;width:95%;box-shadow:#0000003d 0 3px 8px}.dialog-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #d0d0d0;padding:10px}.dialog-title[_ngcontent-%COMP%]{font-weight:700}.dialog-close[_ngcontent-%COMP%]{display:flex;align-items:center;border-radius:50%}.dialog-close[_ngcontent-%COMP%]:hover{background-color:#d0d0d04a;cursor:pointer}.dialog-footer[_ngcontent-%COMP%]{display:flex;padding:10px;border-top:1px solid #d0d0d0;justify-content:space-between;align-items:center}.dialog-body[_ngcontent-%COMP%]{padding:10px}.for-type[_ngcontent-%COMP%]{color:#292980;cursor:pointer}#testFinderMask[_ngcontent-%COMP%]{padding:15px;background-color:#00000085;position:fixed;inset:0;z-index:999}#testFinderMask[_ngcontent-%COMP%]   app-test-finder[_ngcontent-%COMP%]{display:block;position:fixed;inset:15px;display:flex;flex-direction:column}.app-editor[_ngcontent-%COMP%]{display:flex;width:100%;height:calc(100vh - 55px);overflow:hidden}.col-questions[_ngcontent-%COMP%], .col-editor[_ngcontent-%COMP%]{width:50%}.col-editor[_ngcontent-%COMP%]{border-left:1px solid #e0e0e0}.toolbar-editor[_ngcontent-%COMP%]{display:flex;--tw-border-opacity: 1;border-bottom:1px solid rgb(var(--color-slate-200)/var(--tw-border-opacity));box-shadow:none;justify-content:space-between}.toolbar-btn[_ngcontent-%COMP%]{padding:10px;border-right:1px solid #e0e0e0;cursor:pointer;display:flex;align-items:center;-webkit-user-select:none;user-select:none;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.2s}.toolbar-btn[_ngcontent-%COMP%]:hover{background-color:#ededed90}.toolbar-right[_ngcontent-%COMP%]   .toolbar-btn[_ngcontent-%COMP%]{border-right:none;border-left:1px solid #e0e0e0}.toolbar-right[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:0;margin-left:5px}.toolbar-left[_ngcontent-%COMP%], .toolbar-right[_ngcontent-%COMP%]{display:flex}.col-questions[_ngcontent-%COMP%]{overflow:auto;position:relative}.question-standalone-content-box[_ngcontent-%COMP%]{margin:10px}.loading-mess[_ngcontent-%COMP%]{width:100vw;height:100vh;position:fixed;z-index:9;top:0;left:0;display:flex;justify-content:center;align-items:center;background-color:#0006}.loading-content[_ngcontent-%COMP%]{text-align:center;color:#000}.loading-content[_ngcontent-%COMP%]   .text-msg[_ngcontent-%COMP%]{font-size:20px;margin-top:10px;background-color:#f0f8ffa3;padding:10px;border-radius:5px}.icon-msg[_ngcontent-%COMP%]{margin-bottom:10px}.text-msg[_ngcontent-%COMP%]{font-size:20px}.footer-editor[_ngcontent-%COMP%]{border-top:1px solid #e0e0e0;display:flex;align-items:center}.footer-editor[_ngcontent-%COMP%]   .footer-item[_ngcontent-%COMP%]{padding:10px}.footer-editor[_ngcontent-%COMP%]   .footer-link[_ngcontent-%COMP%]{color:#2361ae;cursor:pointer}.footer-editor[_ngcontent-%COMP%]   .footer-sp[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:center;align-items:center}.footer-editor[_ngcontent-%COMP%]   .footer-sp[_ngcontent-%COMP%]:hover   .footer-link-hover[_ngcontent-%COMP%]{display:block}.footer-editor[_ngcontent-%COMP%]   .footer-sp[_ngcontent-%COMP%]   .footer-link-hover[_ngcontent-%COMP%]{cursor:pointer;display:none;position:absolute;width:300px;left:0;top:calc(-25px - 100%);background:antiquewhite;padding:10px;border-radius:5px;box-shadow:#091e4240 0 4px 8px -2px,#091e4214 0 0 0 1px}.footer-editor[_ngcontent-%COMP%]   .footer-sp[_ngcontent-%COMP%]   .footer-link-hover[_ngcontent-%COMP%]:before{content:"";position:absolute;bottom:-6px;left:20px;border-left:10px solid transparent;border-right:10px solid transparent;border-top:10px solid #faebd7}.box-an[_ngcontent-%COMP%]{display:flex;align-items:center;position:relative;cursor:pointer}.box-an[_ngcontent-%COMP%]:hover   .box-an-content[_ngcontent-%COMP%], .box-an[_ngcontent-%COMP%]:hover   .box-an-label[_ngcontent-%COMP%]{outline:1px solid #2462ae}.box-an-label[_ngcontent-%COMP%]{font-weight:700;margin-right:5px;min-width:25px;justify-content:center}.box-an-content[_ngcontent-%COMP%], .box-content[_ngcontent-%COMP%]{padding:5px;outline:1px solid #ccc;border-radius:3px;margin-bottom:5px;align-items:center;overflow-wrap:anywhere;overflow-x:auto;overflow-y:hidden}.box-an-content[_ngcontent-%COMP%]{padding-right:20px}.box-an-label[_ngcontent-%COMP%]{padding:5px;outline:1px solid #ccc;border-radius:3px;margin-bottom:5px;display:flex;align-items:center;overflow-wrap:anywhere}.an-true[_ngcontent-%COMP%]{outline:1px solid #2462ae;color:#2462ae;position:relative}.checkmark[_ngcontent-%COMP%]{position:absolute;left:-25px;display:inline-block;width:22px;height:22px;transform:rotate(45deg)}.checkmark_stem[_ngcontent-%COMP%]{position:absolute;width:3px;height:9px;background-color:#2462ae;left:11px;top:6px}.checkmark_kick[_ngcontent-%COMP%]{position:absolute;width:3px;height:3px;background-color:#2462ae;left:8px;top:12px}.link-tooltip[_ngcontent-%COMP%]{color:#2462ae;cursor:pointer}.box-service-name[_ngcontent-%COMP%], .box-service-question-name[_ngcontent-%COMP%]{outline:1px solid #ccc;padding:3px 10px!important;border-radius:3px;font-weight:500}.box-service-question-name[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content}.box-service-question[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap}.box-service-question[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child{border-right:none}.box-service-question[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:last-child{border-right:none}.box-service-question[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding:0 10px;cursor:pointer;color:#2462ae;border-right:1px solid #ccc}.first-text[_ngcontent-%COMP%]{display:flex;align-items:center}.first-text[_ngcontent-%COMP%]   marquee[_ngcontent-%COMP%]{width:100px}.first-text[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;margin-right:5px;display:flex;justify-content:center;align-items:center}.selection[_ngcontent-%COMP%]{border:1.5px solid #2462ae;box-shadow:#00000073 0 25px 20px -20px}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.inp-point[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:space-between;align-items:center}.inp-point[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:40px;text-align:center;padding:5px;border-radius:5px;outline:1px solid #ccc;border:none}.inp-point[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:1px solid #2262ae;box-shadow:#11111a0d 0 1px,#11111a1a 0 0 8px}.inp-point[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-outer-spin-button, .inp-point[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.inp-point[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}.inp-point[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{border-right:none;text-align:left;padding:0 0 0 10px}.hide[_ngcontent-%COMP%]{display:none!important}  .mat-form-field-underline{display:none}  .question-standalone-is-invalid-validation{color:#f44336;position:relative;padding-left:20px;display:flex;align-items:center;margin-bottom:10px}  .question-standalone-is-invalid-validation:before{content:"!";position:absolute;left:0;color:#fff;background:#f44336;width:15px;height:15px;text-align:center;border-radius:50%;font-size:smaller;display:flex;justify-content:center;align-items:center}.box-service[_ngcontent-%COMP%]{position:relative;margin:10px 0;padding:20px 30px;border-radius:5px;box-shadow:none}.box-service[_ngcontent-%COMP%]:first-child{margin:0 0 10px}.box-service-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:5px}  .img-docx,   .qv_qts_image,   .qv_img-group-content,   .qv_ats_image{cursor:pointer;max-width:100%}  .qv_img-group-content{width:100%}  .qv_full_a_img{cursor:pointer;width:60%}  .qv_full_img{cursor:pointer;width:100%}  .qv_img{cursor:pointer;margin-top:-1px}  .qv_none_image{display:inline-block;color:#2262ae;cursor:pointer}.box-help[_ngcontent-%COMP%]{border-top:1px solid #d7d7d7;margin:15px -30px 0;padding:10px 30px 0}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]{text-align:center;font-size:11px;margin-top:-20px}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#fff;padding:0 10px;color:#d58e0b}.box-help[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]{font-size:13px;overflow-x:auto;overflow-y:hidden}.font-bold[_ngcontent-%COMP%]{font-weight:700}.bag-label[_ngcontent-%COMP%]{border-radius:5px;background:#c0c0c0;padding:4px;font-size:13px;margin-right:5px}.bag-label[_ngcontent-%COMP%]:last-child{margin-right:0}.mt-4[_ngcontent-%COMP%]{margin-top:4px}.mb-5[_ngcontent-%COMP%]{margin-bottom:5px}.box-show-files[_ngcontent-%COMP%]{background:#f0f0f0;border-radius:5px;padding:10px;margin-bottom:3px}.padding-mobile[_ngcontent-%COMP%]{padding-left:5px;padding-right:5px}@media screen and (max-width: 580px){.app-editor[_ngcontent-%COMP%]{flex-direction:column;height:auto;overflow:auto}.col-questions[_ngcontent-%COMP%], .col-editor[_ngcontent-%COMP%]{width:100%}.main__editor[_ngcontent-%COMP%]{overflow-x:hidden}}  .q-table td{border:1px solid #c0c0c0;padding:3px 10px}  .box-content img,   .box-an-content img{max-width:100%}.group-box-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;position:relative;cursor:pointer}.group-box-header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{outline:1px solid #ccc;padding:3px 10px!important;border-radius:3px;font-weight:500}.group-box-header[_ngcontent-%COMP%]   .link-option[_ngcontent-%COMP%]{cursor:pointer;color:#2462ae;margin-left:10px}.fix-content[_ngcontent-%COMP%]{position:absolute;font-size:15px;color:#2361ae;top:0;left:5px;transform:rotate(-45deg)}.lazy_quest[_ngcontent-%COMP%]{width:100%;height:200px}  .skeleton-box-loading{display:inline-block;position:relative;overflow:hidden}  .skeleton-box-loading:after{position:absolute;inset:0;transform:translate(-100%);animation:_ngcontent-%COMP%_shimmer 2s infinite;content:""}@keyframes _ngcontent-%COMP%_shimmer{to{transform:translate(100%)}}  .box-service-content .homework-content{overflow-y:auto}  .box-service-content .azt-mathml{cursor:pointer}  .box-service-content .azt-mathml:hover{background-color:#ebebeb}button.menu[_ngcontent-%COMP%]{text-transform:none!important}.header-file-name[_ngcontent-%COMP%]{width:100%;text-align:center;border:0}.w-100[_ngcontent-%COMP%]{width:100%}.h-100[_ngcontent-%COMP%]{height:100%}.azt-order-1[_ngcontent-%COMP%]{order:1}.azt-order-2[_ngcontent-%COMP%]{order:2}@media screen and (max-width: 768px){.box-an-content[_ngcontent-%COMP%], .box-content[_ngcontent-%COMP%], .box-help[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]{overflow-y:auto}}']}),n})();function BW(n,o){if(1&n&&(e.TgZ(0,"li",8),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.xp6(1),e.Oqu(t)}}const PW=function(n){return{"max-height":n}};let QW=(()=>{class n extends xe.Q{ngOnInit(){this.isMobile=this.commonService.isMobileOrTable()}actionClose(){this.onClose.emit()}get lstMsgErrors(){return this.lstErrors.map(t=>t.split("|")).map(t=>`${this.stringTrans} ${t[0]}: ${t[1]}`)}constructor(){super(),this.onClose=new e.vpe,this.lstErrors=[],this.isMobile=!1,this.stringTrans=this.commonService.myTranslateInstant("lang_auto_line")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["show-errors-quests"]],inputs:{lstErrors:"lstErrors"},outputs:{onClose:"onClose"},features:[e.qOj],decls:13,vars:10,consts:[[1,"box-dialog"],[1,"dialog-overlay",3,"click"],["cdkDrag","","cdkDragRootElement",".dialog-drag","cdkDragHandle","",1,"dialog-header",2,"cursor","move"],[1,"dialog-title"],[1,"dialog-close",3,"click"],[1,"dialog-body",2,"overflow","auto",3,"ngStyle"],[1,"lst-errs"],["class","lst-err-item",4,"ngFor","ngForOf"],[1,"lst-err-item"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e.NdJ("click",function(){return i.actionClose()}),e.qZA(),e.TgZ(2,"div")(3,"div",2)(4,"div",3),e._uU(5),e.ALo(6,"mytranslate"),e.qZA(),e.TgZ(7,"div",4),e.NdJ("click",function(){return i.actionClose()}),e.TgZ(8,"mat-icon"),e._uU(9,"close"),e.qZA()()(),e.TgZ(10,"div",5)(11,"ul",6),e.YNc(12,BW,2,1,"li",7),e.qZA()()()()),2&t&&(e.xp6(2),e.Gre("box dialog-drag dialog",i.isMobile?"-mobile":"",""),e.xp6(3),e.hij(" ",e.lcZ(6,6,"lang_auto_vui_long_kiem_tra_lai_cac_noi_dung_sau")," "),e.xp6(5),e.Q6J("ngStyle",e.VKq(8,PW,i.isMobile?"75vh":"500px")),e.xp6(2),e.Q6J("ngForOf",i.lstMsgErrors))},dependencies:[F.sg,F.PC,hd.Zt,hd.Bh,Yo.Hw,ye.JV],styles:[".box-dialog[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:flex-start;top:0;left:0;width:100vw;height:100vh;position:fixed;z-index:9999}.box-dialog[_ngcontent-%COMP%]   .dialog-overlay[_ngcontent-%COMP%]{top:0;left:0;width:100vw;height:100vh;position:fixed;background-color:#0000004d}.dialog[_ngcontent-%COMP%]{position:absolute;margin-top:7vh;width:650px;box-shadow:#0000003d 0 3px 8px}.dialog-mobile[_ngcontent-%COMP%]{position:absolute;margin-top:7vh;width:95%;box-shadow:#0000003d 0 3px 8px}.dialog-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #d0d0d0;padding:10px}.dialog-title[_ngcontent-%COMP%]{font-weight:700}.dialog-close[_ngcontent-%COMP%]{display:flex;align-items:center;border-radius:50%}.dialog-close[_ngcontent-%COMP%]:hover{background-color:#d0d0d04a;cursor:pointer}.dialog-footer[_ngcontent-%COMP%]{display:flex;padding:10px;border-top:1px solid #d0d0d0;justify-content:space-between;align-items:center}.lst-errs[_ngcontent-%COMP%]   .lst-err-item[_ngcontent-%COMP%]{padding:15px 10px;border-bottom:1px dotted #e0e0e0}.lst-errs[_ngcontent-%COMP%]   .lst-err-item[_ngcontent-%COMP%]:last-child{border-bottom:none!important}"]}),n})();function FW(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"span",19),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw(2);return e.KtG(s.onHandleNextQuestion(r.rawIndexQuestion))}),e._uU(1),e.qZA()}if(2&n){const t=o.$implicit;e.xp6(1),e.Oqu(t.label)}}function NW(n,o){if(1&n&&(e.TgZ(0,"tr")(1,"td",15),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.TgZ(4,"td",16),e._uU(5),e.qZA(),e.TgZ(6,"td",17),e.YNc(7,FW,2,1,"span",18),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,3,"lang_testbank_number_of_unanswered_questions")),e.xp6(3),e.Oqu(t.showMore.countQuestUnanswered.countQuest),e.xp6(2),e.Q6J("ngForOf",t.showMore.countQuestUnanswered.lstQuest)}}function ZW(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"span",19),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw(2);return e.KtG(s.onHandleNextQuestion(r.rawIndexQuestion))}),e._uU(1),e.qZA()}if(2&n){const t=o.$implicit;e.xp6(1),e.Oqu(t.label)}}function DW(n,o){if(1&n&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.ALo(3,"mytranslate"),e.ALo(4,"lowercase"),e.qZA(),e.TgZ(5,"td",16),e._uU(6),e.qZA(),e.TgZ(7,"td",17),e.YNc(8,ZW,2,1,"span",18),e.qZA()()),2&n){const t=o.$implicit;e.xp6(2),e.AsE("",e.lcZ(3,4,"lang_testbank_test_config_total_number_question")," ",e.lcZ(4,6,t.type),""),e.xp6(4),e.Oqu(t.countQuest),e.xp6(2),e.Q6J("ngForOf",t.lstQuest)}}function UW(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"span",19),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw(2);return e.KtG(s.onHandleNextQuestion(r.rawIndexQuestion))}),e._uU(1),e.qZA()}if(2&n){const t=o.$implicit;e.xp6(1),e.Oqu(t.label)}}function jW(n,o){if(1&n&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.ALo(3,"mytranslate"),e.ALo(4,"lowercase"),e.ALo(5,"mytranslate"),e.ALo(6,"lowercase"),e.ALo(7,"mytranslate"),e.qZA(),e.TgZ(8,"td",16),e._uU(9),e.qZA(),e.TgZ(10,"td",17),e.YNc(11,UW,2,1,"span",18),e.qZA()()),2&n){const t=o.$implicit;e.xp6(2),e.HOy("",e.lcZ(3,6,"lang_auto_tong_so_cau_trac_nghiem")," ",e.lcZ(4,8,e.lcZ(5,10,"lang_auto_co"))," ",t.numberAns," ",e.lcZ(6,12,e.lcZ(7,14,"lang_auto_dap_an")),""),e.xp6(7),e.Oqu(t.countQuest),e.xp6(2),e.Q6J("ngForOf",t.lstQuest)}}function qW(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"span",19),e.NdJ("click",function(){const r=e.CHM(t).$implicit,s=e.oxw(2);return e.KtG(s.onHandleNextQuestion(r.rawIndexQuestion))}),e._uU(1),e.qZA()}if(2&n){const t=o.$implicit;e.xp6(1),e.Oqu(t.label)}}function RW(n,o){if(1&n&&(e.TgZ(0,"tr")(1,"td",15),e._uU(2),e.ALo(3,"mytranslate"),e.qZA(),e.TgZ(4,"td",16),e._uU(5),e.qZA(),e.TgZ(6,"td",17),e.YNc(7,qW,2,1,"span",18),e.qZA()()),2&n){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,3,"lang_testbank_editor_the_question_without_a_solution_guide")),e.xp6(3),e.Oqu(t.showMore.countQuestNoHelp.countQuest),e.xp6(2),e.Q6J("ngForOf",t.showMore.countQuestNoHelp.lstQuest)}}let zW=(()=>{class n extends xe.Q{ngOnInit(){this.isMobile=this.commonService.isMobileOrTable(),this.makeInfo(),this.showMore={...this.info,typeQuests:this.info.typeQuests.filter(t=>t.lstQuest.length>0)}}makeInfo(){const t={totalQuest:this.lstQuest.filter(i=>!i.quest.isGroup).length,typeQuests:[],ansCountQuest:[],countQuestNoHelp:{countQuest:0,lstQuest:[]},countQuestUnanswered:{countQuest:0,lstQuest:[]}};this.lstQuest.filter(i=>!i.quest.isGroup).forEach(i=>{let a=t.typeQuests.findIndex(r=>r.typeNumber===i.type);if(-1===a&&(a=t.typeQuests.push({type:this.getNameTypeQuestion(i.type??-1),typeNumber:i.type??-1,countQuest:0,lstQuest:[]})-1),t.typeQuests[a].countQuest++,1===t.typeQuests[a].typeNumber){let r=t.ansCountQuest.findIndex(s=>s.numberAns===i.answers.length);-1===r&&(r=t.ansCountQuest.push({numberAns:i.answers.length,countQuest:0,lstQuest:[]})-1),t.ansCountQuest[r].countQuest++,t.ansCountQuest[r].lstQuest.push({label:this.commonService.myTranslateInstant("lang_auto_cau")+" "+this.extractNumberFromString(i.label).toString(),nextToQuest:this.extractNumberFromString(i.label),type:i.type??1,rawIndexQuestion:i.rawIndexQuestion??1})}else t.typeQuests[a].lstQuest.push({label:this.commonService.myTranslateInstant("lang_auto_cau")+" "+this.extractNumberFromString(i.label).toString(),nextToQuest:this.extractNumberFromString(i.label),type:i.type??1,rawIndexQuestion:i.rawIndexQuestion??1});if(i.helpRenderedStr||(t.countQuestNoHelp.countQuest++,t.countQuestNoHelp.lstQuest.push({label:this.commonService.myTranslateInstant("lang_auto_cau")+" "+this.extractNumberFromString(i.label).toString(),nextToQuest:this.extractNumberFromString(i.label),type:i.type??1,rawIndexQuestion:i.rawIndexQuestion??1})),1===i.type||4===i.type){let r=!1;for(let s=0;s<i.answers.length;s++)if(i.answers[s].ans.isCorrect){r=!0;break}i.strAns?.length&&(r=!0),r||(t.countQuestUnanswered.countQuest++,t.countQuestUnanswered.lstQuest.push({label:this.commonService.myTranslateInstant("lang_auto_cau")+" "+this.extractNumberFromString(i.label).toString(),nextToQuest:this.extractNumberFromString(i.label),type:i.type??1,rawIndexQuestion:i.rawIndexQuestion??1}))}}),t.ansCountQuest.sort((i,a)=>a.numberAns-i.numberAns),this.info=t}getNameTypeQuestion(t){switch(t){case 1:return this.commonService.myTranslateInstant("lang_auto_trac_nghiem")??"";case 3:return this.commonService.myTranslateInstant("lang_testbank_create_exam_width_file_docx_essay")??"";case 4:return this.commonService.myTranslateInstant("lang_auto_dien_tu")??"";case 5:return this.commonService.myTranslateInstant("lang_testbank_total_true_false_questions")??""}return""}extractNumberFromString(t){const a=t.match(/\d+/g);return a?parseInt(a[0]):0}actionClose(){this.onClose.emit()}onHandleNextQuestion(t){this.onNextQuestion.emit(t.toString())}constructor(){super(),this.onClose=new e.vpe,this.onNextQuestion=new e.vpe,this.isMobile=!1}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["show-info-quests"]],inputs:{lstQuest:"lstQuest"},outputs:{onClose:"onClose",onNextQuestion:"onNextQuestion"},features:[e.qOj],decls:34,vars:28,consts:[[1,"box-dialog"],[1,"dialog-overlay",3,"click"],["cdkDrag","","cdkDragRootElement",".dialog-drag","cdkDragHandle","",1,"dialog-header",2,"cursor","move"],[1,"dialog-title"],[1,"dialog-close",3,"click"],[1,"dialog-body",2,"overflow","auto","max-height","70vh"],[1,"quest-info-number"],[1,"quest-info-item"],[1,"table","table-bordered"],[1,"table-header"],[2,"width","35%"],[2,"width","15%"],[2,"width","50%"],[4,"ngIf"],[4,"ngFor","ngForOf"],[2,"white-space","nowrap"],[1,"text-center"],[2,"padding-top","0px","padding-bottom","0px"],["class","label-quest-item",3,"click",4,"ngFor","ngForOf"],[1,"label-quest-item",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e.NdJ("click",function(){return i.actionClose()}),e.qZA(),e.TgZ(2,"div")(3,"div",2)(4,"div",3),e._uU(5),e.ALo(6,"mytranslate"),e.qZA(),e.TgZ(7,"div",4),e.NdJ("click",function(){return i.actionClose()}),e.TgZ(8,"mat-icon"),e._uU(9,"close"),e.qZA()()(),e.TgZ(10,"div",5)(11,"div",6)(12,"p",7),e._uU(13),e.ALo(14,"mytranslate"),e.ALo(15,"lowercase"),e.ALo(16,"mytranslate"),e.qZA()(),e.TgZ(17,"table",8)(18,"thead")(19,"tr",9)(20,"td",10),e._uU(21),e.ALo(22,"mytranslate"),e.qZA(),e.TgZ(23,"td",11),e._uU(24),e.ALo(25,"mytranslate"),e.qZA(),e.TgZ(26,"td",12),e._uU(27),e.ALo(28,"mytranslate"),e.qZA()()(),e.TgZ(29,"tbody"),e.YNc(30,NW,8,5,"tr",13),e.YNc(31,DW,9,8,"tr",14),e.YNc(32,jW,12,16,"tr",14),e.YNc(33,RW,8,5,"tr",13),e.qZA()()()()()),2&t&&(e.xp6(2),e.Gre("box dialog-drag dialog",i.isMobile?"-mobile":"",""),e.xp6(3),e.hij(" ",e.lcZ(6,14,"lang_auto_thong_tin_de_thi")," "),e.xp6(8),e.lnq("",e.lcZ(14,16,"lang_auto_tong_so_cau_trong_de_thi"),": ",i.info.totalQuest," ",e.lcZ(15,18,e.lcZ(16,20,"lang_auto_cau")),""),e.xp6(8),e.Oqu(e.lcZ(22,22,"lang_auto_thong_tin")),e.xp6(3),e.Oqu(e.lcZ(25,24,"lang_auto_so_luong")),e.xp6(3),e.Oqu(e.lcZ(28,26,"lang_auto_danh_sach_cac_cau")),e.xp6(3),e.Q6J("ngIf",i.showMore.countQuestUnanswered.countQuest),e.xp6(1),e.Q6J("ngForOf",i.showMore.typeQuests),e.xp6(1),e.Q6J("ngForOf",i.showMore.ansCountQuest),e.xp6(1),e.Q6J("ngIf",i.showMore.countQuestNoHelp.countQuest))},dependencies:[F.sg,F.O5,hd.Zt,hd.Bh,Yo.Hw,F.i8,ye.JV],styles:[".box-dialog[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:flex-start;top:0;left:0;width:100vw;height:100vh;position:fixed;z-index:9999}.box-dialog[_ngcontent-%COMP%]   .dialog-overlay[_ngcontent-%COMP%]{top:0;left:0;width:100vw;height:100vh;position:fixed;background-color:#0000004d}.dialog[_ngcontent-%COMP%]{position:absolute;margin-top:7vh;width:800px;box-shadow:#0000003d 0 3px 8px}.dialog[_ngcontent-%COMP%]   .text-center[_ngcontent-%COMP%]{text-align:center!important}@media screen and (max-width: 800px){.dialog[_ngcontent-%COMP%]{width:90vw!important}}.dialog-body[_ngcontent-%COMP%]{padding:10px}.dialog-body[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:top}.dialog-mobile[_ngcontent-%COMP%]{position:absolute;margin-top:7vh;width:95%;box-shadow:#0000003d 0 3px 8px}.dialog-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #d0d0d0;padding:10px}.dialog-title[_ngcontent-%COMP%]{font-weight:700}.dialog-close[_ngcontent-%COMP%]{display:flex;align-items:center;border-radius:50%}.dialog-close[_ngcontent-%COMP%]:hover{background-color:#d0d0d04a;cursor:pointer}.dialog-footer[_ngcontent-%COMP%]{display:flex;padding:10px;border-top:1px solid #d0d0d0;justify-content:space-between;align-items:center}.lst-errs[_ngcontent-%COMP%]   .lst-err-item[_ngcontent-%COMP%]{padding:15px 10px;border-bottom:1px dotted #e0e0e0}.lst-errs[_ngcontent-%COMP%]   .lst-err-item[_ngcontent-%COMP%]:last-child{border-bottom:none!important}.quest-info-item[_ngcontent-%COMP%]{padding:5px 0;text-align:right}.label-quest-item[_ngcontent-%COMP%]{padding:5px;border:1px solid #e0e0e0;border-radius:5px;cursor:pointer;display:block;width:-moz-fit-content;width:fit-content;float:left;margin:5px}.label-quest-item[_ngcontent-%COMP%]:hover{background-color:#eceff1}.table-header[_ngcontent-%COMP%]{text-align:center;font-weight:500}"]}),n})();var kb=I(5177),HW=I(92300);let JW=(()=>{class n{constructor(t,i){this.commonService=t,this.userService=i,this.listChatContentData=[]}pushMessageToListChat(t,i,a,r,s){let l=this.createMessageContent(t,i,a,r,s);return this.listChatContentData.push(l),l}addMessage(t,i){let a=this.createMessageContent(!0,"text",t);return this.listChatContentData[this.listChatContentData.length-1].messageChat+=a.messageChat,a}createMessageContent(t,i,a,r,s){return{userObj:t?this.getAIUserObj():this.userService.getUserObj(),messageChat:a??"",fileData:s,type:i}}getAIUserObj(){return{fullName:"AzotaAI",avatar:"images/azotaAI.png",id:0,password:"",amount:0,gender:0}}initChatAI(){let t=(this.commonService.myTranslateInstant("lang_ai_chat_box_greeting_1")??"Ch\xe0o ")+this.userService.getUserObj().fullName+(this.commonService.myTranslateInstant("lang_ai_chat_box_greeting_2")??", t\xf4i c\xf3 th\u1ec3 gi\xfap g\xec cho b\u1ea1n?");this.pushMessageToListChat(!0,"text",t,!0)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(Yn.z),e.LFG(ya.U))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var KW=I(48830);let GW=(()=>{class n{constructor(t){this.el=t,this.focus=!0}ngOnInit(){this.focus&&window.setTimeout(()=>{this.el.nativeElement.focus()})}set autofocus(t){this.focus=!1!==t}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.SBq))},n.\u0275dir=e.lG2({type:n,selectors:[["","autofocus",""]],inputs:{autofocus:"autofocus"}}),n})();const YW=["perfectScroll"];function $W(n,o){1&n&&(e.TgZ(0,"span",27),e.O4$(),e.TgZ(1,"svg",28)(2,"circle",29),e._UZ(3,"animate",30)(4,"animate",31),e.qZA(),e.TgZ(5,"circle",32),e._UZ(6,"animate",33)(7,"animate",34),e.qZA(),e.TgZ(8,"circle",35),e._UZ(9,"animate",30)(10,"animate",31),e.qZA()()())}function VW(n,o){if(1&n&&(e.TgZ(0,"li"),e._UZ(1,"img",24),e.ALo(2,"mycdn"),e.ALo(3,"convertCdnLinkOfGitHub"),e.TgZ(4,"p"),e._UZ(5,"span",25),e.ALo(6,"mytranslate"),e.YNc(7,$W,11,0,"span",26),e.qZA()()),2&n){const t=o.$implicit,i=e.oxw();e.Tol(t.userObj.id?"sent":"replies"),e.xp6(1),e.Q6J("src",t.userObj.id?e.lcZ(2,5,t.userObj.avatar):e.lcZ(3,7,"images/azotaAI.png"),e.LSH),e.xp6(4),e.Q6J("innerHtml",e.lcZ(6,9,i.commonService.replaceAll(t.messageChat.trim(),"\n",'<span class="break-message-line"></span>')),e.oJD),e.xp6(2),e.Q6J("ngIf",!t.userObj.id&&i.loadingMessageApi)}}function WW(n,o){1&n&&(e.TgZ(0,"li",36)(1,"p"),e.O4$(),e.TgZ(2,"svg",28)(3,"circle",29),e._UZ(4,"animate",30)(5,"animate",31),e.qZA(),e.TgZ(6,"circle",32),e._UZ(7,"animate",33)(8,"animate",34),e.qZA(),e.TgZ(9,"circle",35),e._UZ(10,"animate",30)(11,"animate",31),e.qZA()()()())}let eX=(()=>{class n extends xe.Q{sendDataCreateQuestion(){if(this.initStatusObj(),!this.promptCreateExam.value||""==this.promptCreateExam.value?.trim())return;let t=JSON.parse(JSON.stringify(this.promptCreateExam.value??""));this.promptCreateExam.setValue(""),this.loadingMessageChatAI=!0;let a={text:t,his:this.listHistoryChat.slice(-6)};this.listHistoryChat.push(t),this.aztChatBoxAIService.pushMessageToListChat(!1,"text",t),this.scrollToPosition(),this.processAnalysisCommand(a).subscribe(r=>{if(r.success)this.createQuestion.emit(r.data?.objs??[]),this.successStatusObj();else{this.loadingMessageChatAI=!1;let s=this.commonService.myTranslateInstant(r.message);502===r.code&&(s="H\u1ec7 th\u1ed1ng \u0111ang qu\xe1 t\u1ea3i vui l\xf2ng th\u1eed l\u1ea1i"),this.aztChatBoxAIService.pushMessageToListChat(!0,"text",s),this.scrollToPosition(),this.errorStatusObj(r.message)}})}analysisCommand(t){const i=/-(\w+)\s+\[([^\]]+)\]|-(\w+)\s+\{([^}]*)\}|-(\w+)\s+([^-\s]+)/g,a={};let r;for(;null!==(r=i.exec(t));){const s=r[1]||r[3]||r[5],l=r[2]||r[4]||r[6];if(l.startsWith("{")&&l.endsWith("}")){const c=l.slice(1,-1).split(","),u={};c.forEach(m=>{const[p,f]=m.split(":").map(b=>b.trim());u[p]=f}),a[s]=u}else a[s]=l}return a}getCommandByText(t){return new ee.y(i=>{this.saveMessageChatApi(t.text??"",!1).pipe((0,kb.g)(100)).subscribe(a=>{this.lastUserMessageId=a,this.aiService.apiAiCmdPost(t).subscribe(r=>{if(r.success)this.listHistoryChat.push(r.data?.text??""),i.next(r);else{this.loadingMessageChatAI=!1;let s=this.commonService.myTranslateInstant(r.message);502===r.code&&(s="H\u1ec7 th\u1ed1ng \u0111ang qu\xe1 t\u1ea3i vui l\xf2ng th\u1eed l\u1ea1i!"),this.aztChatBoxAIService.pushMessageToListChat(!0,"text",s),this.scrollToPosition(),this.errorStatusObj(r.message),i.error()}})})})}saveMessageChatApi(t,i){return new ee.y(a=>{this.messageService.chatApiMessagesPost({content:t,parentId:i?this.lastUserMessageId:void 0,conversationId:0,type:1}).subscribe(l=>{l?a.next(l.id):(a.next(0),this.showErrorSnack("lang_cms_error_lost_connect_to_server"))})})}processAnalysisCommand(t){return new ee.y(i=>{this.getCommandByText(t).pipe((0,kb.g)(200)).subscribe(a=>{if(1===a.success)this.saveMessageChatApi(a.data?.text??"",!0).pipe((0,kb.g)(100)).subscribe(()=>{const r=a.data?.text??"";let l=r.match(/(create_test_by_knowledge|create_test_by_purpose)\s(.*)/g)?.[0];const c=l?.trimStart().split(" ")[0],u=this.analysisCommand(l??r);switch(c){case"create_test_by_purpose":this.sAztAzotaTrackingService.sendCustomEvent("ai_create_exam_get_questions",[]),this.createQuestionByGenerateExam(u).subscribe(p=>{p.data?.objs?.length&&this.sAztAzotaTrackingService.sendCustomEvent("ai_create_exam_get_questions_success",[]),i.next(p)});break;case"create_test_by_knowledge":this.sAztAzotaTrackingService.sendCustomEvent("ai_create_exam_get_questions",[]),this.createQuestionByKnowledge(u).subscribe(p=>{p.data?.objs?.length&&this.sAztAzotaTrackingService.sendCustomEvent("ai_create_exam_get_questions_success",[]),i.next(p)});break;default:i.next({success:0,message:r,version:"v1.0",detailMessage:"",code:400})}});else{this.loadingMessageChatAI=!1;let r=this.commonService.myTranslateInstant(a.message);502===a.code&&(r="H\u1ec7 th\u1ed1ng \u0111ang qu\xe1 t\u1ea3i vui l\xf2ng th\u1eed l\u1ea1i"),this.aztChatBoxAIService.pushMessageToListChat(!0,"text",r),this.scrollToPosition(),this.errorStatusObj(a.message)}})})}createQuestionByKnowledge(t){return new ee.y(i=>{const r=t.knowledge?.match(/\[(.*?)\]: (\d+)/g);let s=0,l=[];r?r.forEach(m=>{l.push(m),s+=parseInt(m.split(":")[1])}):l.push(t.knowledge??""),this.aztChatBoxAIService.pushMessageToListChat(!0,"text",`V\u1edbi y\xeau c\u1ea7u c\u1ee7a b\u1ea1n v\u1ec1 t\u1ea1o ${s} c\xe2u h\u1ecfi ${t.subject?"cho m\xf4n "+t.subject:""} ${t.class?"l\u1edbp "+t.class:""}, t\xf4i b\u1eaft \u0111\u1ea7u th\u1ef1c hi\u1ec7n: \n`);const u=new Ge.Q(1);l?.forEach(m=>{u.addTask(this,this.callApiKnowledge,[m,t])}),u.start().then(m=>{let p=[];m.datas.forEach(L=>{p=p?.concat(L)});let f="";f+=p.length>0?`\n T\xf4i \u0111\xe3 th\xeam ${p.length} ${s?"/"+s:""} c\xe2u h\u1ecfi v\xe0o \u0111\u1ec1 c\u1ee7a b\u1ea1n`:"\n ",this.aztChatBoxAIService.addMessage(f),i.next({success:1,message:"",version:"v1.0",detailMessage:"",code:200,data:{objs:p}}),i.complete()})})}callApiKnowledge(t,i){return this.loadingMessageChatAI=!1,this.loadingMessageApi=!0,new Promise(a=>{let r=parseInt(t.split(":")[1])??5,s=t.split(":")[0]??"";const u=/\(([^)]+)\)[^\(]*$/.exec(s.trim()??"All"),m=u?u[1]:"";s.includes(`(${m})`)&&(s=s.replace(`(${m})`,""));let p={schoolLevelId:i.class?Number(i.class):void 0,schoolSubjectName:i.subject??"",promptText:s.replace(/\[|\]/g,"").trim()??"All",numberOfQuestion:r,difficulty:m};this.aiService.apiAiListKnowledgeQuestionsPost(p).subscribe(f=>{this.loadingMessageApi=!1;let b=this.commonService.myTranslateInstant(f.message)+"\n";this.commonService.replaceAll(b,"\t",'<span class="inline-block ml-5"></span>'),0==f.success&&(b=`<span class="font-medium text-danger">${b}</span>`),200==f.code&&this.aztChatBoxAIService.addMessage(b),this.scrollToPosition(),1==f.success?(this.totalQuestion+=f.data?.objs?.length??0,a(f.data?.objs??[])):a([])})})}createQuestionByGenerateExam(t){let i=t.type?t.type.toLowerCase():"";return t.type&&t.type.includes(",")&&(i=t.type.split(",")[0]?.toLocaleLowerCase()??""),new ee.y(a=>{const r={schoolLevelId:t.class?Number(t.class):void 0,schoolSubjectName:t.subject??"",numberOfQuestion:5,type:i};this.waitDestroy(this.aiService.apiAiListPurposeQuestionsPost(r).subscribe(s=>{if(s.success)a.next(s);else{this.loadingMessageChatAI=!1;let l=this.commonService.myTranslateInstant(s.message);this.aztChatBoxAIService.pushMessageToListChat(!0,"text",l),this.scrollToPosition(),this.errorStatusObj(s.message),a.error()}}))})}closeDialog(){this.aztChatBoxAIService.listChatContentData=[],this.close.emit(!0)}scrollToPosition(t){setTimeout(()=>{try{this.perfectScroll&&this.perfectScroll.scrollTo({top:t??this.perfectScroll.viewport.contentHeight})}catch{}})}constructor(t,i,a,r){super(),this.aiService=t,this.messageService=i,this.aztChatBoxAIService=a,this.sAztAzotaTrackingService=r,this.questList=[],this.close=new e.vpe,this.createQuestion=new e.vpe,this.promptCreateExam=new h.NI("",[h.kI.required,Da._.noWhiteSpace]),this.lastUserMessageId=0,this.loadingMessageChatAI=!1,this.totalQuestion=0,this.loadingMessageApi=!1,this.listHistoryChat=[]}ngOnInit(){this.totalQuestion=this.questList.filter(t=>!t.quest.isGroup).length,0===this.aztChatBoxAIService.listChatContentData.length&&this.aztChatBoxAIService.initChatAI(),this.scrollToPosition()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(ey.p),e.Y36(HW.ez),e.Y36(JW),e.Y36(KW.g))},n.\u0275cmp=e.Xpm({type:n,selectors:[["azt-ai-chat-box"]],viewQuery:function(t,i){if(1&t&&e.Gf(YW,5),2&t){let a;e.iGM(a=e.CRH())&&(i.perfectScroll=a.first)}},inputs:{questList:"questList"},outputs:{close:"close",createQuestion:"createQuestion"},features:[e.qOj],decls:32,vars:18,consts:[[1,"box-dialog"],[1,"dialog","box"],[1,"dialog-header","flex","items-center","p-3","border-b","border-slate-200","dark:border-darkmode-400"],[1,"dialog-title"],[1,"w-6","h-5","inline-block","mr-1"],[1,"w-full","h-full","inline-block",3,"src"],[1,"font-medium","bg-pending","text-white","rounded-lg","px-2","py-0.5","text-xs"],["azt-track-service","ai-chat-box-65UAr2QT0",1,"dialog-close","ml-auto",3,"click"],[1,"w-4","h-4","inline-block"],["name","x"],[1,"p-0"],["pointerEventsMethod","scrollbar",1,"messages",2,"height","250px","padding-bottom","10px","margin-right","5px",3,"visibility"],["perfectScroll",""],[1,"p-3"],[1,"mr-2"],[3,"class",4,"ngFor","ngForOf"],["class","replies","style","margin-left: auto; margin-right: auto",4,"ngIf"],[1,"dialog-body","p-3"],[1,"border","border-slate-200","dark:border-darkmode-600","p-2","rounded-md"],["value","",1,"chat__box__input","form-control","dark:bg-darkmode-600","px-1","h-16","resize-none","border-transparent","shadow-none","focus:border-transparent","focus:ring-0",3,"formControl","autofocus","placeholder","enterKey"],[1,"mt-2","flex","items-center"],[1,"upload-file","relative"],[1,"ml-auto"],["azt-track-service","ai-chat-box-8tp_7gRUQe",1,"btn","btn-sm","btn-primary","w-30",3,"disabled","click"],["alt","",3,"src"],[3,"innerHtml"],["class","w-4 h-4 mt-2 block",4,"ngIf"],[1,"w-4","h-4","mt-2","block"],["width","25","viewBox","0 0 120 30","xmlns","http://www.w3.org/2000/svg","fill","currentColor",1,"w-4","h-4"],["cx","15","cy","15","r","15"],["attributeName","r","from","15","to","15","begin","0s","dur","0.8s","values","15;9;15","calcMode","linear","repeatCount","indefinite"],["attributeName","fill-opacity","from","1","to","1","begin","0s","dur","0.8s","values","1;.5;1","calcMode","linear","repeatCount","indefinite"],["cx","60","cy","15","r","9","fill-opacity","0.3"],["attributeName","r","from","9","to","9","begin","0s","dur","0.8s","values","9;15;9","calcMode","linear","repeatCount","indefinite"],["attributeName","fill-opacity","from","0.5","to","0.5","begin","0s","dur","0.8s","values",".5;1;.5","calcMode","linear","repeatCount","indefinite"],["cx","105","cy","15","r","15"],[1,"replies",2,"margin-left","auto","margin-right","auto"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),e._UZ(5,"img",5),e.ALo(6,"convertCdnLinkOfGitHub"),e.qZA(),e._uU(7),e.ALo(8,"mytranslate"),e.TgZ(9,"span",6),e._uU(10,"Beta"),e.qZA()(),e.TgZ(11,"button",7),e.NdJ("click",function(){return i.closeDialog()}),e.TgZ(12,"span",8),e._UZ(13,"lucide-icon",9),e.qZA()()(),e.TgZ(14,"div",10)(15,"ng-scrollbar",11,12)(17,"div",13)(18,"ul",14),e.YNc(19,VW,8,11,"li",15),e.YNc(20,WW,12,0,"li",16),e.qZA()()()(),e.TgZ(21,"div",17)(22,"div",18)(23,"textarea",19),e.NdJ("enterKey",function(){return i.sendDataCreateQuestion()}),e.ALo(24,"mytranslate"),e._uU(25,"\t\t\t\t"),e.qZA(),e.TgZ(26,"div",20),e._UZ(27,"div",21),e.TgZ(28,"div",22)(29,"button",23),e.NdJ("click",function(){return i.sendDataCreateQuestion()}),e._uU(30),e.ALo(31,"mytranslate"),e.qZA()()()()()()()),2&t&&(e.xp6(5),e.Q6J("src",e.lcZ(6,10,"images/azotaAI.png"),e.LSH),e.xp6(2),e.hij(" ",e.lcZ(8,12,"lang_testbank_create_a_question_with_azota_ai")," "),e.xp6(8),e.Q6J("visibility","hover"),e.xp6(4),e.Q6J("ngForOf",i.aztChatBoxAIService.listChatContentData),e.xp6(1),e.Q6J("ngIf",i.loadingMessageChatAI),e.xp6(3),e.s9C("placeholder",e.lcZ(24,14,"lang_testbank_enter_the_purpose_of_the_test_azota_ai_will_help_you_create_the_test_you_want")),e.Q6J("formControl",i.promptCreateExam)("autofocus",!0),e.xp6(6),e.Q6J("disabled",i.statusObj.loading||i.loadingMessageChatAI||i.promptCreateExam.errors),e.xp6(1),e.hij(" ",e.lcZ(31,16,"lang_cms_create_question_title")," "))},dependencies:[F.sg,F.O5,h.Fj,h.JJ,h.oH,k.KC,_.Nh5,Xv.Y,GW,ye.JV,ye.QN,ye.Bo],styles:[".dialog[_ngcontent-%COMP%]{position:absolute;margin-top:5vh;width:100%;box-shadow:#0000003d 0 3px 8px}.dialog-title[_ngcontent-%COMP%]{font-weight:700}.dialog-close[_ngcontent-%COMP%]{display:flex;align-items:center;border-radius:50%;color:#5d647b}.dialog-close[_ngcontent-%COMP%]:hover{background-color:#d0d0d04a;cursor:pointer}.dialog-footer[_ngcontent-%COMP%]{display:flex;padding:10px;justify-content:space-between;align-items:center}.shadow-none[_ngcontent-%COMP%]{box-shadow:none}.border-transparent[_ngcontent-%COMP%]{border-color:transparent}.focus\\:ring-0[_ngcontent-%COMP%]:focus{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 rgba(0, 0, 0, 0))}.focus\\:border-transparent[_ngcontent-%COMP%]:focus{border-color:transparent;outline:none;box-shadow:none}.messages[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:block;clear:both;float:left;margin:10px 15px 5px;width:calc(100% - 15px);font-size:.9em}.messages[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-last-child(1){margin-bottom:20px}.messages[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.replies[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin:6px 8px 0 0}.messages[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.replies[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{background:#f5f5f5;word-break:break-word;--tw-text-opacity: 1;color:rgb(var(--color-slate-700)/var(--tw-text-opacity))}.messages[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.sent[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:not(.file-img){float:right;margin:6px 0 0 8px}.messages[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.sent[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{background:#1e3fb0;color:#fff;float:right}.messages[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:not(.file-img){width:22px;border-radius:50%;float:left}img.file-img[_ngcontent-%COMP%]{width:35px!important;margin-right:10px}.messages[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:inline-block;padding:10px 15px;border-radius:20px;max-width:calc(100% - 130px);line-height:1.5}@media (max-width: 640px){.messages[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{max-width:230px}}.cursor[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle;align-content:center;width:10px;height:15px;margin-left:3px;background-color:rgb(var(--color-slate-500)/var(--tw-text-opacity));animation:_ngcontent-%COMP%_blink 1s infinite}@keyframes _ngcontent-%COMP%_typing{0%{width:0}to{width:100%}}@keyframes _ngcontent-%COMP%_blink{0%,to{opacity:1}50%{opacity:0}}"]}),n})(),tX=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[F.JJ,{provide:C.f8,useValue:Z.N.azt_tiny_mce_script_src}],imports:[E.Bz,F.ez,M.j,k.kb,C.Z_,gK,h.u5,h.UX,U.Is,B.Z,x.xC,w.QG,g.SD,D.W,Ni.f,ol,Q.d,_.qyJ.pick(_.ciZ),d.vI]}),n})();e.B6R(ln,function(){return[E.rH,F.O5,h._Y,h.Wl,h.JJ,h.JL,h.sg,h.u,h.CE,vi.l,o_.W,wt.M,Fv.S,wi.n,wo._,_.Nh5,Zv,xg,Cv,Cg]},function(){return[ye.Jy,ye.JV,ye.Bo,ye.EZ]}),e.B6R(Br,function(){return[F.mk,F.sg,F.O5,F.PC,Yo.Hw,Qi.VK,Qi.p6,Ai.gM,h.Fj,h.wV,h.JJ,h.qQ,h.On,Dt.Y,r2.C,fG,wi.n,bm.O,gG.v,ty,rW,sW,X3.X,cW,uW,LW,QW,zW,eX,Qg.Z,_.Nh5,si,Sg,sG]},function(){return[ye.JV,ye.ES,ye.qY,ye.Bo,ye.rp]})},56291:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{X:()=>QuestHeaderComponent});var _angular_core__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(65879),src_app_w_azota_library_azota_core_supers_my_base_component__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(37734),src_app_w_azota_library_azota_helpers_common_FileManagers__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(61713),src_app_w_azota_library_azota_core_services_cdn_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(32965),angular_shepherd__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(14913),src_app_w_azota_library_azota_core_services_browser_storage_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(88489),_angular_common__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(96814),_angular_material_core__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(23680),_angular_material_chips__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(22557),_angular_material_icon__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(30617),_angular_material_menu__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(77988),_angular_material_select__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(98525),_angular_material_tooltip__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(92596),_angular_forms__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(56223),_tooltip_controller_component__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(61811),_w_azota_library_azota_core_pipes_common_pipe__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(36727);const _c0=["markInput"],_c1=["inpAudioUpload"];function QuestHeaderComponent_div_3_common_tooltip_9_Template(Ne,H){1&Ne&&(_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"common-tooltip")(1,"em")(2,"mark"),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(3,"Ctr + Enter"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(4),_angular_core__WEBPACK_IMPORTED_MODULE_6__.ALo(5,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()()),2&Ne&&(_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(4),_angular_core__WEBPACK_IMPORTED_MODULE_6__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_6__.lcZ(5,1,"lang_auto_de_tu_dong_nhap_diem_cho_cac_cau_con_lai_trong_nhom_bang_dot")," "))}const _c2=function(Ne){return{hide:Ne}};function QuestHeaderComponent_div_3_Template(Ne,H){if(1&Ne){const I=_angular_core__WEBPACK_IMPORTED_MODULE_6__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"div",17)(1,"div",18)(2,"span",19),_angular_core__WEBPACK_IMPORTED_MODULE_6__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_6__.CHM(I);const h=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_6__.KtG(h.showMarkInput())}),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(3),_angular_core__WEBPACK_IMPORTED_MODULE_6__.ALo(4,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.ALo(5,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(6,"div",20)(7,"input",21,22),_angular_core__WEBPACK_IMPORTED_MODULE_6__.NdJ("keyup",function(h){_angular_core__WEBPACK_IMPORTED_MODULE_6__.CHM(I);const U=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_6__.KtG(U.checkKeyup(h))})("focus",function(){_angular_core__WEBPACK_IMPORTED_MODULE_6__.CHM(I);const h=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_6__.KtG(h.enableTooltip())})("focusout",function(){_angular_core__WEBPACK_IMPORTED_MODULE_6__.CHM(I);const h=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_6__.KtG(h.disableTooltip())})("ngModelChange",function(h){_angular_core__WEBPACK_IMPORTED_MODULE_6__.CHM(I);const U=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_6__.KtG(U.q.point=h)}),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(9,QuestHeaderComponent_div_3_common_tooltip_9_Template,6,3,"common-tooltip",14),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(10,"div"),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(11),_angular_core__WEBPACK_IMPORTED_MODULE_6__.ALo(12,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()()()()}if(2&Ne){const I=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw();let F;_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngClass",_angular_core__WEBPACK_IMPORTED_MODULE_6__.VKq(13,_c2,I.showPointInput)),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.hij(" ",I.q.point&&+I.q.point>0?I.q.point+" "+_angular_core__WEBPACK_IMPORTED_MODULE_6__.lcZ(4,7,"lang_auto_diem"):_angular_core__WEBPACK_IMPORTED_MODULE_6__.lcZ(5,9,"lang_auto_nhap_diem")," "),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(3),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngClass",_angular_core__WEBPACK_IMPORTED_MODULE_6__.VKq(15,_c2,!I.showPointInput)),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("size",(null==I.q.point||null==(F=I.q.point.toString())?null:F.length)||2)("ngModel",I.q.point),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",I.isTooltipPoint),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_6__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_6__.lcZ(12,11,"lang_auto_diem")," ")}}function QuestHeaderComponent_div_4_div_1_Template(Ne,H){if(1&Ne){const I=_angular_core__WEBPACK_IMPORTED_MODULE_6__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"div",28),_angular_core__WEBPACK_IMPORTED_MODULE_6__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_6__.CHM(I),_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw();const h=_angular_core__WEBPACK_IMPORTED_MODULE_6__.MAs(4);return _angular_core__WEBPACK_IMPORTED_MODULE_6__.KtG(h.click())}),_angular_core__WEBPACK_IMPORTED_MODULE_6__.O4$(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(1,"svg",29),_angular_core__WEBPACK_IMPORTED_MODULE_6__._UZ(2,"path",30),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(3," Audio "),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()}}function QuestHeaderComponent_div_4_div_2_span_2_Template(Ne,H){if(1&Ne){const I=_angular_core__WEBPACK_IMPORTED_MODULE_6__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"span",39),_angular_core__WEBPACK_IMPORTED_MODULE_6__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_6__.CHM(I);const h=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw(3);return _angular_core__WEBPACK_IMPORTED_MODULE_6__.KtG(h.removeAudio())}),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(1,"[X]"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()}}function QuestHeaderComponent_div_4_div_2_span_3_Template(Ne,H){if(1&Ne&&(_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"span",40),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()),2&Ne){const I=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw(3);_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Oqu(I.audioName)}}function QuestHeaderComponent_div_4_div_2_span_4_Template(Ne,H){if(1&Ne&&(_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()),2&Ne){const I=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw(3);_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Oqu(I.audioName)}}function QuestHeaderComponent_div_4_div_2_mat_icon_5_Template(Ne,H){if(1&Ne){const I=_angular_core__WEBPACK_IMPORTED_MODULE_6__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"mat-icon",41),_angular_core__WEBPACK_IMPORTED_MODULE_6__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_6__.CHM(I);const h=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw(3);return _angular_core__WEBPACK_IMPORTED_MODULE_6__.KtG(h.loadAudio())}),_angular_core__WEBPACK_IMPORTED_MODULE_6__.ALo(1,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(2,"cached"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()}2&Ne&&_angular_core__WEBPACK_IMPORTED_MODULE_6__.s9C("matTooltip",_angular_core__WEBPACK_IMPORTED_MODULE_6__.lcZ(1,1,"lang_auto_tai_lai_audio"))}function QuestHeaderComponent_div_4_div_2_mat_icon_6_Template(Ne,H){if(1&Ne){const I=_angular_core__WEBPACK_IMPORTED_MODULE_6__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"mat-icon",42),_angular_core__WEBPACK_IMPORTED_MODULE_6__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_6__.CHM(I);const h=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw(3);return _angular_core__WEBPACK_IMPORTED_MODULE_6__.KtG(h.stopAudio())}),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(1,"pause "),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()}}function QuestHeaderComponent_div_4_div_2_mat_icon_7_Template(Ne,H){if(1&Ne){const I=_angular_core__WEBPACK_IMPORTED_MODULE_6__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"mat-icon",43),_angular_core__WEBPACK_IMPORTED_MODULE_6__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_6__.CHM(I);const h=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw(3);return _angular_core__WEBPACK_IMPORTED_MODULE_6__.KtG(h.playAudio())}),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(1," play_circle"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()}}function QuestHeaderComponent_div_4_div_2_i_8_Template(Ne,H){1&Ne&&_angular_core__WEBPACK_IMPORTED_MODULE_6__._UZ(0,"i",44)}function QuestHeaderComponent_div_4_div_2_Template(Ne,H){if(1&Ne&&(_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"div",31)(1,"span",32),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(2,QuestHeaderComponent_div_4_div_2_span_2_Template,2,0,"span",33),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(3,QuestHeaderComponent_div_4_div_2_span_3_Template,2,1,"span",34),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(4,QuestHeaderComponent_div_4_div_2_span_4_Template,2,1,"span",14),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(5,QuestHeaderComponent_div_4_div_2_mat_icon_5_Template,3,3,"mat-icon",35),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(6,QuestHeaderComponent_div_4_div_2_mat_icon_6_Template,2,0,"mat-icon",36),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(7,QuestHeaderComponent_div_4_div_2_mat_icon_7_Template,2,0,"mat-icon",37),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(8,QuestHeaderComponent_div_4_div_2_i_8_Template,1,0,"i",38),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()),2&Ne){const I=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw(2);let F;_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("matTooltip",I.audioName),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",!(null!=I.q.quest.parts[0]&&null!=I.q.quest.parts[0].text&&null!=(F=I.q.quest.parts[0].text.trim())&&F.startsWith("[@"))),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",I.isLoadFalseAudio),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",!I.isLoadFalseAudio),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",I.isLoadFalseAudio),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",!I.isLoadFalseAudio&&I.isLoadedAudio&&I.isPlayingAudio),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",!I.isLoadFalseAudio&&I.isLoadedAudio&&!I.isPlayingAudio),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",!I.isLoadedAudio)}}function QuestHeaderComponent_div_4_Template(Ne,H){if(1&Ne){const I=_angular_core__WEBPACK_IMPORTED_MODULE_6__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"div",23),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(1,QuestHeaderComponent_div_4_div_1_Template,4,0,"div",24),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(2,QuestHeaderComponent_div_4_div_2_Template,9,8,"div",25),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(3,"input",26,27),_angular_core__WEBPACK_IMPORTED_MODULE_6__.NdJ("input",function(h){_angular_core__WEBPACK_IMPORTED_MODULE_6__.CHM(I);const U=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_6__.KtG(U.selectFileAudio(h))}),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()()}if(2&Ne){const I=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw();let F;_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",!(I.isHasAudio||null!=I.q.quest.parts[0]&&null!=I.q.quest.parts[0].text&&null!=(F=I.q.quest.parts[0].text.trim())&&F.startsWith("[@"))),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",I.isHasAudio)}}function QuestHeaderComponent_div_5_Template(Ne,H){if(1&Ne&&(_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"div",45)(1,"div",31)(2,"mat-select",46)(3,"mat-option",47),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(4),_angular_core__WEBPACK_IMPORTED_MODULE_6__.ALo(5,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(6,"mat-option",47),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(7),_angular_core__WEBPACK_IMPORTED_MODULE_6__.ALo(8,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(9,"mat-option",47),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(10),_angular_core__WEBPACK_IMPORTED_MODULE_6__.ALo(11,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(12,"mat-option",47),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(13),_angular_core__WEBPACK_IMPORTED_MODULE_6__.ALo(14,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()()()()),2&Ne){const I=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw();_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngModel",I.q.type)("disabled",!0),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("value",3),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_6__.lcZ(5,10,"lang_testbank_create_exam_width_file_docx_essay")," "),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("value",1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_6__.lcZ(8,12,"lang_auto_trac_nghiem")," "),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("value",4),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_6__.lcZ(11,14,"lang_auto_dien_tu")," "),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("value",5),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_6__.lcZ(14,16,"lang_auto_trac_nghiem")," \u0110/S ")}}function QuestHeaderComponent_div_6_button_6_Template(Ne,H){1&Ne&&(_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"button",50)(1,"mat-icon",51),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(2,"cancel"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()())}function QuestHeaderComponent_div_6_Template(Ne,H){if(1&Ne){const I=_angular_core__WEBPACK_IMPORTED_MODULE_6__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"div",45)(1,"div",31)(2,"mat-chip-listbox")(3,"mat-chip",48),_angular_core__WEBPACK_IMPORTED_MODULE_6__.NdJ("removed",function(){_angular_core__WEBPACK_IMPORTED_MODULE_6__.CHM(I);const h=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_6__.KtG(h.setTag())}),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(4),_angular_core__WEBPACK_IMPORTED_MODULE_6__.ALo(5,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(6,QuestHeaderComponent_div_6_button_6_Template,3,0,"button",49),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()()()()}if(2&Ne){const I=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw(),F=_angular_core__WEBPACK_IMPORTED_MODULE_6__.MAs(23);let h;_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(3),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("matMenuTriggerFor",F),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_6__.lcZ(5,3,"azt_lang_tag_"+I.q.tag[0].code)," "),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",!(null!=I.q.quest.parts[0]&&null!=I.q.quest.parts[0].text&&null!=(h=I.q.quest.parts[0].text.trim())&&h.startsWith("[@")))}}function QuestHeaderComponent_button_9_Template(Ne,H){if(1&Ne){const I=_angular_core__WEBPACK_IMPORTED_MODULE_6__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"button",52),_angular_core__WEBPACK_IMPORTED_MODULE_6__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_6__.CHM(I);const h=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_6__.KtG(h.chooseQuest(h.q))}),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.ALo(2,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()}2&Ne&&(_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_6__.lcZ(2,1,"lang_auto_chon")," "))}function QuestHeaderComponent_button_10_Template(Ne,H){if(1&Ne&&(_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"button",53),_angular_core__WEBPACK_IMPORTED_MODULE_6__.ALo(1,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.O4$(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(2,"svg",54),_angular_core__WEBPACK_IMPORTED_MODULE_6__._UZ(3,"path",55)(4,"path",56),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()()),2&Ne){_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw();const I=_angular_core__WEBPACK_IMPORTED_MODULE_6__.MAs(23);_angular_core__WEBPACK_IMPORTED_MODULE_6__.s9C("matTooltip",_angular_core__WEBPACK_IMPORTED_MODULE_6__.lcZ(1,2,"lang_auto_gan_nhan_muc_do_nhan_biet")),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("matMenuTriggerFor",I)}}function QuestHeaderComponent_button_11_Template(Ne,H){if(1&Ne){const I=_angular_core__WEBPACK_IMPORTED_MODULE_6__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"button",57),_angular_core__WEBPACK_IMPORTED_MODULE_6__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_6__.CHM(I);const h=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_6__.KtG(h.randomQuest())}),_angular_core__WEBPACK_IMPORTED_MODULE_6__.ALo(1,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(2,"span",58),_angular_core__WEBPACK_IMPORTED_MODULE_6__.O4$(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(3,"svg",54),_angular_core__WEBPACK_IMPORTED_MODULE_6__._UZ(4,"path",59)(5,"path",60)(6,"path",61)(7,"path",62)(8,"path",63),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()()()}2&Ne&&_angular_core__WEBPACK_IMPORTED_MODULE_6__.s9C("matTooltip",_angular_core__WEBPACK_IMPORTED_MODULE_6__.lcZ(1,1,"azt_lang_editor_random_again"))}function QuestHeaderComponent_button_12_Template(Ne,H){if(1&Ne&&(_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"button",64)(1,"span",58),_angular_core__WEBPACK_IMPORTED_MODULE_6__.O4$(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(2,"svg",54),_angular_core__WEBPACK_IMPORTED_MODULE_6__._UZ(3,"circle",65)(4,"circle",66)(5,"circle",67),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()()()),2&Ne){_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw();const I=_angular_core__WEBPACK_IMPORTED_MODULE_6__.MAs(14);_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("matMenuTriggerFor",I)}}function QuestHeaderComponent_li_17_Template(Ne,H){if(1&Ne){const I=_angular_core__WEBPACK_IMPORTED_MODULE_6__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"li")(1,"a",68),_angular_core__WEBPACK_IMPORTED_MODULE_6__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_6__.CHM(I);const h=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_6__.KtG(h.setFixAns())}),_angular_core__WEBPACK_IMPORTED_MODULE_6__.O4$(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(2,"svg",69),_angular_core__WEBPACK_IMPORTED_MODULE_6__._UZ(3,"line",70)(4,"path",71),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.kcU(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(5,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(6),_angular_core__WEBPACK_IMPORTED_MODULE_6__.ALo(7,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.ALo(8,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.ALo(9,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()()()}if(2&Ne){const I=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw();_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(6),_angular_core__WEBPACK_IMPORTED_MODULE_6__.AsE("",I.q.quest.isFixAns?_angular_core__WEBPACK_IMPORTED_MODULE_6__.lcZ(7,2,"lang_auto_bo_co_dinh"):_angular_core__WEBPACK_IMPORTED_MODULE_6__.lcZ(8,4,"lang_auto_co_dinh")," ",_angular_core__WEBPACK_IMPORTED_MODULE_6__.lcZ(9,6,"lang_auto_dap_an"),"")}}function QuestHeaderComponent_li_18_Template(Ne,H){if(1&Ne){const I=_angular_core__WEBPACK_IMPORTED_MODULE_6__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"li")(1,"a",72),_angular_core__WEBPACK_IMPORTED_MODULE_6__.NdJ("click",function(h){_angular_core__WEBPACK_IMPORTED_MODULE_6__.CHM(I);const U=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_6__.KtG(U.copyContent(h))}),_angular_core__WEBPACK_IMPORTED_MODULE_6__.O4$(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(2,"svg",73),_angular_core__WEBPACK_IMPORTED_MODULE_6__._UZ(3,"rect",74)(4,"path",75),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.kcU(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(5,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(6),_angular_core__WEBPACK_IMPORTED_MODULE_6__.ALo(7,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()()()}2&Ne&&(_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(6),_angular_core__WEBPACK_IMPORTED_MODULE_6__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_6__.lcZ(7,1,"lang_auto_copy_noi_dung")," "))}function QuestHeaderComponent_li_19_Template(Ne,H){if(1&Ne){const I=_angular_core__WEBPACK_IMPORTED_MODULE_6__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"li")(1,"a",76),_angular_core__WEBPACK_IMPORTED_MODULE_6__.NdJ("click",function(h){_angular_core__WEBPACK_IMPORTED_MODULE_6__.CHM(I);const U=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_6__.KtG(U.cut(h))}),_angular_core__WEBPACK_IMPORTED_MODULE_6__.O4$(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(2,"svg",73),_angular_core__WEBPACK_IMPORTED_MODULE_6__._UZ(3,"circle",77)(4,"circle",78)(5,"line",79)(6,"line",80)(7,"line",81),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.kcU(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(8,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(9),_angular_core__WEBPACK_IMPORTED_MODULE_6__.ALo(10,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()()()}2&Ne&&(_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(9),_angular_core__WEBPACK_IMPORTED_MODULE_6__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_6__.lcZ(10,1,"lang_auto_cat")," "))}function QuestHeaderComponent_li_20_Template(Ne,H){if(1&Ne){const I=_angular_core__WEBPACK_IMPORTED_MODULE_6__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"li")(1,"a",82),_angular_core__WEBPACK_IMPORTED_MODULE_6__.NdJ("click",function(h){_angular_core__WEBPACK_IMPORTED_MODULE_6__.CHM(I);const U=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_6__.KtG(U.del(h))}),_angular_core__WEBPACK_IMPORTED_MODULE_6__.O4$(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(2,"svg",73),_angular_core__WEBPACK_IMPORTED_MODULE_6__._UZ(3,"path",83)(4,"path",84)(5,"path",85),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.kcU(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(6,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(7),_angular_core__WEBPACK_IMPORTED_MODULE_6__.ALo(8,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()()()}2&Ne&&(_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(7),_angular_core__WEBPACK_IMPORTED_MODULE_6__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_6__.lcZ(8,1,"lang_auto_xoa")," "))}function QuestHeaderComponent_li_21_Template(Ne,H){if(1&Ne&&(_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"li")(1,"a",86),_angular_core__WEBPACK_IMPORTED_MODULE_6__.O4$(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(2,"svg",69),_angular_core__WEBPACK_IMPORTED_MODULE_6__._UZ(3,"path",87)(4,"path",88)(5,"path",89),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.kcU(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(6,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(7),_angular_core__WEBPACK_IMPORTED_MODULE_6__.ALo(8,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()()()),2&Ne){_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw();const I=_angular_core__WEBPACK_IMPORTED_MODULE_6__.MAs(23);_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("matMenuTriggerFor",I),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(6),_angular_core__WEBPACK_IMPORTED_MODULE_6__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_6__.lcZ(8,2,"lang_auto_gan_nhan")," ")}}function QuestHeaderComponent_div_24_li_2_Template(Ne,H){if(1&Ne){const I=_angular_core__WEBPACK_IMPORTED_MODULE_6__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"li")(1,"a",91),_angular_core__WEBPACK_IMPORTED_MODULE_6__.NdJ("click",function(){const U=_angular_core__WEBPACK_IMPORTED_MODULE_6__.CHM(I).$implicit,E=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw(2);return _angular_core__WEBPACK_IMPORTED_MODULE_6__.KtG(E.setTag(U))}),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(2),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()()}if(2&Ne){const I=H.$implicit,F=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw(2);let h;_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_6__.hij(" ",null!==(h=I[F.commonService.getCurrentLang()+"Name"])&&void 0!==h?h:I.enName," ")}}function QuestHeaderComponent_div_24_li_3_Template(Ne,H){1&Ne&&(_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"li"),_angular_core__WEBPACK_IMPORTED_MODULE_6__._UZ(1,"hr",92),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA())}function QuestHeaderComponent_div_24_li_4_Template(Ne,H){if(1&Ne){const I=_angular_core__WEBPACK_IMPORTED_MODULE_6__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"li")(1,"button",93),_angular_core__WEBPACK_IMPORTED_MODULE_6__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_6__.CHM(I);const h=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw(2);let U;return _angular_core__WEBPACK_IMPORTED_MODULE_6__.KtG(h.applyTagAll(null!==(U=h.q.tag)&&void 0!==U?U:[]))}),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(2),_angular_core__WEBPACK_IMPORTED_MODULE_6__.ALo(3,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()()}if(2&Ne){const I=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw(2);_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("disabled",!I.q.tag),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_6__.lcZ(3,2,"lang_auto_ap_dung_cho_cac_cau_con_lai")," ")}}function QuestHeaderComponent_div_24_Template(Ne,H){if(1&Ne&&(_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"div",12)(1,"ul",13),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(2,QuestHeaderComponent_div_24_li_2_Template,3,1,"li",90),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(3,QuestHeaderComponent_div_24_li_3_Template,2,0,"li",14),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(4,QuestHeaderComponent_div_24_li_4_Template,4,4,"li",14),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()()),2&Ne){const I=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw();_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngForOf",I.questionTags),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",I.notOnlyQuestEdit),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",I.notOnlyQuestEdit)}}let QuestHeaderComponent=(()=>{class QuestHeaderComponent extends src_app_w_azota_library_azota_core_supers_my_base_component__WEBPACK_IMPORTED_MODULE_0__.Q{constructor(Ne,H,I){super(),this.cdnService=Ne,this.shepherdService=H,this.browserStorageService=I,this.index=0,this.notOnlyQuestEdit=!0,this.showType=!0,this.similar=!1,this.questionTags=[],this.onLabelClick=new _angular_core__WEBPACK_IMPORTED_MODULE_6__.vpe,this.onHotKeyPointSync=new _angular_core__WEBPACK_IMPORTED_MODULE_6__.vpe,this.onApplyAllTag=new _angular_core__WEBPACK_IMPORTED_MODULE_6__.vpe,this.onError=new _angular_core__WEBPACK_IMPORTED_MODULE_6__.vpe,this.onCopy=new _angular_core__WEBPACK_IMPORTED_MODULE_6__.vpe,this.onCut=new _angular_core__WEBPACK_IMPORTED_MODULE_6__.vpe,this.onChooseSimilar=new _angular_core__WEBPACK_IMPORTED_MODULE_6__.vpe,this.onDel=new _angular_core__WEBPACK_IMPORTED_MODULE_6__.vpe,this.onChangeQuest=new _angular_core__WEBPACK_IMPORTED_MODULE_6__.vpe,this.onRandomQuest=new _angular_core__WEBPACK_IMPORTED_MODULE_6__.vpe,this.onExtraInfo=new _angular_core__WEBPACK_IMPORTED_MODULE_6__.vpe,this.isHasAudio=!1,this.isLoadedAudio=!1,this.isLoadFalseAudio=!1,this.audioName="",this.audioMime="",this.audioUrl="",this.isTooltipPoint=!1,this.isPlayingAudio=!1,this.showPointInput=!1,this.isMobile=!1,this.q={label:"",quest:{label:0,answers:[],parts:[]},answers:[],renderedStr:""}}chooseQuest(Ne){this.onChooseSimilar.emit(Ne)}ngAfterViewInit(){setTimeout(()=>{const Ne=document.getElementById("azt_tour_1"),H=[{attachTo:{element:"#azt_tour_1",on:"bottom"},buttons:[{action(){return this.cancel()},classes:"btn btn-primary w-20",text:this.commonService.myTranslateInstant("lang_button_close")}],classes:"box",id:"intro",title:this.commonService.myTranslateInstant("lang_core_change_to_the_same_question"),text:this.commonService.myTranslateInstant("lang_core_click_here_to_select_a_similar_question_from_the_general_bank_of_azota")}],I=this.browserStorageService.getSimpleStorage("show_tour_quest_header");0===this.index&&!I&&!this.shepherdService.isActive&&Ne&&(this.shepherdService.defaultStepOptions={classes:"box",scrollTo:!0,cancelIcon:{enabled:!1}},this.shepherdService.requiredElements=[{selector:"#azt_tour_1"}],this.shepherdService.modal=!0,this.shepherdService.addSteps(H),this.shepherdService.start(),this.browserStorageService.saveSimpleStorage("show_tour_quest_header","1"))},500)}ngOnInit(){super.ngOnInit(),this.isMobile=this.commonService.isMobileOrTable();let Ne=this.commonService.willDeleteParseJson(this.q.attachments||"[]");this.q.audio?(this.isHasAudio=!0,this.audioName=this.q.audio.name,this.isLoadedAudio=!0,this.isLoadFalseAudio=!1):Ne.forEach(H=>{(0,src_app_w_azota_library_azota_helpers_common_FileManagers__WEBPACK_IMPORTED_MODULE_1__.F0)(H.mimes||"")&&(this.isHasAudio=!0,this.audioUrl=H.url||"",this.audioName=H.name||"",this.audioMime=H.mimes||""),this.audioUrl&&this.loadAudio()})}loadAudio(){this.isLoadedAudio=!1,fetch(this.cdnService.getMyCdn(this.audioUrl)).then(Ne=>{if(!Ne.ok)throw new Error("Something went wrong");Ne.blob().then(H=>{this.q.audio=new File([H],this.audioName,{type:this.audioMime}),this.isLoadedAudio=!0,this.isLoadFalseAudio=!1})}).catch(()=>{this.isLoadedAudio=!0,this.isLoadFalseAudio=!0;let Ne=this.commonService.myTranslateInstant("lang_auto_khong_the_tai_tep_audio_cho"),H=this.commonService.myTranslateInstant("lang_auto_vui_long_thu_lai");this.showErrorSnack(`${Ne} ${this.q.label} ${H}`)})}ngOnDestroy(){super.ngOnDestroy(),this.stopAudio()}changeQuest(){this.shepherdService.isActive&&this.shepherdService.cancel(),this.onChangeQuest.emit(this.q)}randomQuest(){this.onRandomQuest.emit()}removeAudio(){this.q.attachments=void 0,this.stopAudio(),this.q.audio=void 0,this.isHasAudio=!1,this.onExtraInfo.emit({q:this.q,type:"audio",data:this.q.audio}),this.inpAudioUpload&&(this.inpAudioUpload.nativeElement.value=null)}selectFileAudio(Ne){(0,src_app_w_azota_library_azota_helpers_common_FileManagers__WEBPACK_IMPORTED_MODULE_1__.F0)(Ne.target.files[0].type)?(this.stopAudio(),this.q.audio=Ne.target.files[0],this.audioName=this.q.audio?.name??"",this.isLoadedAudio=!0,this.isLoadFalseAudio=!1,this.isHasAudio=!0,this.onExtraInfo.emit({q:this.q,type:"audio",data:this.q.audio})):this.showErrorSnack("lang_auto_file_dinh_kem_phai_la_mot_audio")}showMarkInput(){this.showPointInput=!0,setTimeout(()=>{this.markInput?.nativeElement.focus()},50)}enableTooltip(){this.isTooltipPoint=!0}disableTooltip(){this.showPointInput&&this.onExtraInfo.emit({q:this.q,type:"point",data:this.q.point}),this.isTooltipPoint=!1,this.showPointInput=!1}setFixAns(){this.q.quest.isFixAns=!this.q.quest.isFixAns,this.onExtraInfo.emit({q:this.q,type:"fix",data:this.q.quest.isFixAns})}setTag(Ne){this.q.tag=Ne?[Ne]:[],this.onExtraInfo.emit({q:this.q,type:"tag",data:this.q.tag})}applyTagAll(Ne){this.onApplyAllTag.emit(Ne)}copyContent(Ne){this.onCopy.emit(this.q)}cut(Ne){this.onCut.emit(this.q)}del(Ne){this.onDel.emit(this.q)}getTagName(Ne){return Ne.toUpperCase().split(" ").map(H=>H[0]??"").join("")}checkKeyup(ev){if("Enter"==ev.code){let v=this.markInput?.nativeElement.value;if(!/^[\d\.\+\-\*\/\s\(\)]+$/.test(v)){let Ne=this.commonService.myTranslateInstant("lang_auto_du_lieu_diem_ban_nhap_khong_hop_le_dot");return void this.onError.emit(Ne)}if(v=eval(v),this.q.point=Math.round(100*v)/100,ev.ctrlKey)this.isTooltipPoint=!1,this.showPointInput=!1,this.onHotKeyPointSync.emit(this.q.point);else{window.focus();let Ne=document.activeElement;Ne&&Ne.blur()}}}isPlayAudio(){return!(!window.playMedia||window.playMedia.id!==this.q?.quest.label||!window.playMedia.played)}stopAudio(){window.playMedia&&(window.playMedia.pause(),window.playMedia=void 0,this.isPlayingAudio=!1)}playAudio(){window.playMedia&&window.playMedia.pause(),this.q.audio&&(window.playMedia=new Audio(URL.createObjectURL(this.q.audio)),window.playMedia.id=this.q?.quest.label,window.playMedia.play(),this.isPlayingAudio=!0)}labelClick(){this.onLabelClick.emit(this.q?.quest.parts)}}return QuestHeaderComponent.\u0275fac=function Ne(H){return new(H||QuestHeaderComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_6__.Y36(src_app_w_azota_library_azota_core_services_cdn_service__WEBPACK_IMPORTED_MODULE_2__.E),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Y36(angular_shepherd__WEBPACK_IMPORTED_MODULE_7__.a),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Y36(src_app_w_azota_library_azota_core_services_browser_storage_service__WEBPACK_IMPORTED_MODULE_3__.n))},QuestHeaderComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_6__.Xpm({type:QuestHeaderComponent,selectors:[["app-quest-header"]],viewQuery:function Ne(H,I){if(1&H&&(_angular_core__WEBPACK_IMPORTED_MODULE_6__.Gf(_c0,5),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Gf(_c1,5)),2&H){let F;_angular_core__WEBPACK_IMPORTED_MODULE_6__.iGM(F=_angular_core__WEBPACK_IMPORTED_MODULE_6__.CRH())&&(I.markInput=F.first),_angular_core__WEBPACK_IMPORTED_MODULE_6__.iGM(F=_angular_core__WEBPACK_IMPORTED_MODULE_6__.CRH())&&(I.inpAudioUpload=F.first)}},inputs:{q:"q",index:"index",notOnlyQuestEdit:"notOnlyQuestEdit",showType:"showType",similar:"similar",questionTags:"questionTags"},outputs:{onLabelClick:"onLabelClick",onHotKeyPointSync:"onHotKeyPointSync",onApplyAllTag:"onApplyAllTag",onError:"onError",onCopy:"onCopy",onCut:"onCut",onChooseSimilar:"onChooseSimilar",onDel:"onDel",onChangeQuest:"onChangeQuest",onRandomQuest:"onRandomQuest",onExtraInfo:"onExtraInfo"},features:[_angular_core__WEBPACK_IMPORTED_MODULE_6__.qOj],decls:25,vars:15,consts:[[1,"box-service-question"],["azt-track-service","quest-header-7xvJmr2fh",1,"box-service-question-name",3,"click"],["class","box-service-inp-point",4,"ngIf"],["class","box-service-attach-files cursor-pointer",4,"ngIf"],["class","box-service-type",4,"ngIf"],[1,"box-service-type",2,"padding-right","0px","padding-left","0px"],[1,"first-text","ml-2","sm:ml-0"],["azt-track-service","quest-header-QjB4b6i1y","class","btn btn-primary w-20","style","vertical-align: middle;",3,"click",4,"ngIf"],["class","btn btn-transparent",3,"matMenuTriggerFor","matTooltip",4,"ngIf"],["azt-track-service","quest-header-HExiRUm87","style","width: 30px","class","btn btn-transparent",3,"matTooltip","click",4,"ngIf"],["style","width: 30px","class","btn btn-transparent",3,"matMenuTriggerFor",4,"ngIf"],["menu","matMenu"],[1,"dropdown-menu","show","relative","w-56"],[1,"dropdown-content"],[4,"ngIf"],["tags","matMenu"],["class","dropdown-menu show relative w-56",4,"ngIf"],[1,"box-service-inp-point"],[1,"first-text","cursor-pointer"],["azt-track-service","quest-header-1hL1VYrnNh",3,"ngClass","click"],[1,"inp-point",3,"ngClass"],[3,"size","ngModel","keyup","focus","focusout","ngModelChange"],["markInput",""],[1,"box-service-attach-files","cursor-pointer"],["azt-track-service","quest-header-i7a1qGxHBu","class","first-text","style","white-space: nowrap;",3,"click",4,"ngIf"],["class","first-text",4,"ngIf"],["type","file","accept","audio/ogg;audio/mpeg;audio/wav",1,"hide",3,"input"],["inpAudioUpload",""],["azt-track-service","quest-header-i7a1qGxHBu",1,"first-text",2,"white-space","nowrap",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","14","height","14","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48"],[1,"first-text"],[1,"name-audio",3,"matTooltip"],["azt-track-service","quest-header-bBZd9Ohvof","class","delete",3,"click",4,"ngIf"],["style","\n            color: #9e9e9e;\n            text-decoration: line-through;",4,"ngIf"],["azt-track-service","quest-header-froZ2p_D33",3,"matTooltip","click",4,"ngIf"],["azt-track-service","quest-header-bUlGyrYcRo",3,"click",4,"ngIf"],["azt-track-service","quest-header-SjZKht1L9l",3,"click",4,"ngIf"],["class","fa fa-spinner fa-spin",4,"ngIf"],["azt-track-service","quest-header-bBZd9Ohvof",1,"delete",3,"click"],[2,"color","#9e9e9e","text-decoration","line-through"],["azt-track-service","quest-header-froZ2p_D33",3,"matTooltip","click"],["azt-track-service","quest-header-bUlGyrYcRo",3,"click"],["azt-track-service","quest-header-SjZKht1L9l",3,"click"],[1,"fa","fa-spinner","fa-spin"],[1,"box-service-type"],[3,"ngModel","disabled"],[3,"value"],[1,"tag-chip",3,"matMenuTriggerFor","removed"],["matChipRemove","",4,"ngIf"],["matChipRemove",""],[2,"font-size","15px"],["azt-track-service","quest-header-QjB4b6i1y",1,"btn","btn-primary","w-20",2,"vertical-align","middle",3,"click"],[1,"btn","btn-transparent",3,"matMenuTriggerFor","matTooltip"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z"],["d","M7 7h.01"],["azt-track-service","quest-header-HExiRUm87",1,"btn","btn-transparent",2,"width","30px",3,"matTooltip","click"],[1,"w-5","h-5","inline-block"],["d","m17 2 4 4-4 4"],["d","M3 11v-1a4 4 0 0 1 4-4h14"],["d","m7 22-4-4 4-4"],["d","M21 13v1a4 4 0 0 1-4 4H3"],["d","M11 10h1v4"],[1,"btn","btn-transparent",2,"width","30px",3,"matMenuTriggerFor"],["cx","12","cy","12","r","1"],["cx","12","cy","5","r","1"],["cx","12","cy","19","r","1"],["azt-track-service","quest-header-NheQ3Js3Ya",1,"dropdown-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-5","lucide","mr-2"],["x1","12","y1","17","x2","12","y2","22"],["d","M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z"],["azt-track-service","quest-header-gKmo4Y1J7u",1,"dropdown-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide","mr-2"],["x","9","y","9","width","13","height","13","rx","2","ry","2"],["d","M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"],["azt-track-service","quest-header-Y1KbHn_mie",1,"dropdown-item",3,"click"],["cx","6","cy","6","r","3"],["cx","6","cy","18","r","3"],["x1","20","y1","4","x2","8.12","y2","15.88"],["x1","14.47","y1","14.48","x2","20","y2","20"],["x1","8.12","y1","8.12","x2","12","y2","12"],["azt-track-service","quest-header-84pgUW5VoW",1,"dropdown-item",3,"click"],["d","M3 6h18"],["d","M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"],["d","M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"],["mat-menu-item","",1,"dropdown-item",3,"matMenuTriggerFor"],["d","M9 5H2v7l6.29 6.29c.94.94 2.48.94 3.42 0l3.58-3.58c.94-.94.94-2.48 0-3.42L9 5Z"],["d","M6 9.01V9"],["d","m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19"],[4,"ngFor","ngForOf"],["azt-track-service","quest-header-6eo6V4JpI2",1,"dropdown-item",3,"click"],[1,"dropdown-divider","border-slate-200","dark:border-darkmode-400"],["azt-track-service","quest-header-RiQa-w8Jwo",1,"dropdown-item","w-full",3,"disabled","click"]],template:function Ne(H,I){if(1&H&&(_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"div",0)(1,"div",1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.NdJ("click",function(){return I.labelClick()}),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(2),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(3,QuestHeaderComponent_div_3_Template,13,17,"div",2),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(4,QuestHeaderComponent_div_4_Template,5,2,"div",3),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(5,QuestHeaderComponent_div_5_Template,15,18,"div",4),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(6,QuestHeaderComponent_div_6_Template,7,5,"div",4),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(7,"div",5)(8,"div",6),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(9,QuestHeaderComponent_button_9_Template,3,3,"button",7),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(10,QuestHeaderComponent_button_10_Template,5,4,"button",8),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(11,QuestHeaderComponent_button_11_Template,9,3,"button",9),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(12,QuestHeaderComponent_button_12_Template,6,1,"button",10),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(13,"mat-menu",null,11)(15,"div",12)(16,"ul",13),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(17,QuestHeaderComponent_li_17_Template,10,8,"li",14),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(18,QuestHeaderComponent_li_18_Template,8,3,"li",14),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(19,QuestHeaderComponent_li_19_Template,11,3,"li",14),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(20,QuestHeaderComponent_li_20_Template,9,3,"li",14),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(21,QuestHeaderComponent_li_21_Template,9,4,"li",14),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()()(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(22,"mat-menu",null,15),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(24,QuestHeaderComponent_div_24_Template,5,3,"div",16),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()()()()),2&H){let F,h,U;_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Oqu(I.q.label),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",I.notOnlyQuestEdit&&!I.similar),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",!I.isMobile&&!I.similar),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",I.showType),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",I.q.tag&&I.q.tag.length>0&&!I.similar),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(3),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",I.similar),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",!(I.q.tag&&0!=I.q.tag.length||I.similar)),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",!I.similar&&I.q.changeable),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",!I.similar),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(5),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",!(1!==I.q.type&&5!==I.q.type||null!=I.q.quest.parts[0]&&null!=I.q.quest.parts[0].text&&null!=(F=I.q.quest.parts[0].text.trim())&&F.startsWith("[@"))),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",I.notOnlyQuestEdit),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",I.notOnlyQuestEdit),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",I.notOnlyQuestEdit),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",!(null!=I.q.quest.parts[0]&&null!=I.q.quest.parts[0].text&&null!=(h=I.q.quest.parts[0].text.trim())&&h.startsWith("[@"))),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(3),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",!(null!=I.q.quest.parts[0]&&null!=I.q.quest.parts[0].text&&null!=(U=I.q.quest.parts[0].text.trim())&&U.startsWith("[@")))}},dependencies:[_angular_common__WEBPACK_IMPORTED_MODULE_8__.mk,_angular_common__WEBPACK_IMPORTED_MODULE_8__.sg,_angular_common__WEBPACK_IMPORTED_MODULE_8__.O5,_angular_material_core__WEBPACK_IMPORTED_MODULE_9__.ey,_angular_material_chips__WEBPACK_IMPORTED_MODULE_10__.HS,_angular_material_chips__WEBPACK_IMPORTED_MODULE_10__.z2,_angular_material_chips__WEBPACK_IMPORTED_MODULE_10__.qH,_angular_material_icon__WEBPACK_IMPORTED_MODULE_11__.Hw,_angular_material_menu__WEBPACK_IMPORTED_MODULE_12__.VK,_angular_material_menu__WEBPACK_IMPORTED_MODULE_12__.OP,_angular_material_menu__WEBPACK_IMPORTED_MODULE_12__.p6,_angular_material_select__WEBPACK_IMPORTED_MODULE_13__.gD,_angular_material_tooltip__WEBPACK_IMPORTED_MODULE_14__.gM,_angular_forms__WEBPACK_IMPORTED_MODULE_15__.Fj,_angular_forms__WEBPACK_IMPORTED_MODULE_15__.JJ,_angular_forms__WEBPACK_IMPORTED_MODULE_15__.On,_tooltip_controller_component__WEBPACK_IMPORTED_MODULE_4__.S,_w_azota_library_azota_core_pipes_common_pipe__WEBPACK_IMPORTED_MODULE_5__.JV],styles:[".box-service-name[_ngcontent-%COMP%], .box-service-question-name[_ngcontent-%COMP%]{outline:1px solid #ccc;padding:3px 10px!important;border-radius:3px;font-weight:500}.box-service-question-name[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content}.box-service-question[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap}.box-service-question[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child{border-right:none}.box-service-question[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:last-child{border-right:none}.box-service-question[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding:0 10px;cursor:pointer;color:#2462ae;border-right:1px solid #ccc}.box-service-pin-ans[_ngcontent-%COMP%]{cursor:pointer;color:#2462ae}.first-text[_ngcontent-%COMP%]{display:flex;align-items:center;padding:0!important}.first-text[_ngcontent-%COMP%]   marquee[_ngcontent-%COMP%]{width:100px}.first-text[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;margin:0;padding:0;width:100%;display:flex;justify-content:center;align-items:center}.selection[_ngcontent-%COMP%]{border:1.5px solid #2462ae;box-shadow:#00000073 0 25px 20px -20px}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.inp-point[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:space-between;align-items:center}.inp-point[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{text-align:center;padding:5px;border-radius:5px;outline:1px solid #ccc;border:none}.inp-point[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:1px solid #2262ae;box-shadow:#11111a0d 0 1px,#11111a1a 0 0 8px}.inp-point[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-outer-spin-button, .inp-point[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.inp-point[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}.inp-point[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{border-right:none;text-align:left;padding:0 0 0 10px}.hide[_ngcontent-%COMP%]{display:none!important}  .mat-form-field-underline{display:none}.delete[_ngcontent-%COMP%]{color:red}  .mat-select-arrow-wrapper{margin-left:5px}button.menu[_ngcontent-%COMP%]{text-transform:none!important}.tag-chip[_ngcontent-%COMP%]{min-height:20px;font-size:12px}.name-audio[_ngcontent-%COMP%]{max-width:100px;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:1;line-clamp:1}.name-audio[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{padding-right:5px}.no-wrap[_ngcontent-%COMP%]{white-space:nowrap}"]}),QuestHeaderComponent})()},61811:(Ne,H,I)=>{"use strict";I.d(H,{S:()=>C});var F=I(37734),h=I(65879);const U=function(g,_){return{left:g,bottom:_}},E=function(){return{}},d=["*"];let C=(()=>{class g extends F.Q{constructor(){super(...arguments),this.isConfig=!0,this.bottom=-60,this.left=-5}}return g.\u0275fac=function(){let _;return function(w){return(_||(_=h.n5z(g)))(w||g)}}(),g.\u0275cmp=h.Xpm({type:g,selectors:[["common-tooltip"]],inputs:{isConfig:"isConfig",bottom:"bottom",left:"left"},features:[h.qOj],ngContentSelectors:d,decls:3,vars:6,consts:[[1,"qv_tooltip"],[1,"content_tooltip"]],template:function(x,w){1&x&&(h.F$t(),h.TgZ(0,"span",0)(1,"span",1),h.Hsn(2),h.qZA()()),2&x&&h.Akn(w.isConfig?h.WLB(2,U,w.left+"px",w.bottom+"px"):h.DdM(5,E))},styles:['.qv_tooltip[_ngcontent-%COMP%]{white-space:break-spaces;font-size:11px;position:absolute;z-index:999;width:400px;background:#faebd7;padding:5px 10px;border-radius:5px;font-weight:500;color:#000;box-shadow:#091e4240 0 4px 8px -2px,#091e4214 0 0 0 1px}.qv_tooltip[_ngcontent-%COMP%]:before{content:"";position:absolute;top:-6px;left:20px;border-left:10px solid transparent;border-right:10px solid transparent;border-bottom:10px solid #faebd7}']}),g})()},96573:(Ne,H,I)=>{"use strict";I.d(H,{c:()=>_});var F=I(37734),h=I(65879),U=I(96814),E=I(44345),d=I(36727);function C(x,w){if(1&x){const k=h.EpF();h.TgZ(0,"a",2),h.NdJ("click",function(){h.CHM(k);const B=h.oxw();return h.KtG(B.clickToSeeMore())}),h._uU(1),h.ALo(2,"mytranslate"),h.qZA()}2&x&&(h.xp6(1),h.Oqu(h.lcZ(2,1,"lang_cms_common_see_more")))}function g(x,w){if(1&x){const k=h.EpF();h.TgZ(0,"a",2),h.NdJ("click",function(){h.CHM(k);const B=h.oxw();return h.KtG(B.clickToShowShortContent())}),h._uU(1),h.ALo(2,"mytranslate"),h.qZA()}2&x&&(h.xp6(1),h.Oqu(h.lcZ(2,1,"lang_cms_common_see_short_content")))}let _=(()=>{class x extends F.Q{constructor(){super(...arguments),this.content="",this.maxLength=500,this.showContent="",this.showSeeMoreButton=!0,this.showShortContentButton=!1}clickToShowShortContent(){this.showSeeMoreButton=!0,this.showShortContentButton=!1,this.processSeeMore()}clickToSeeMore(){this.showSeeMoreButton=!1,this.showShortContentButton=!0,this.processSeeMore()}processSeeMore(){let k=this.commonService.removeTagHtml(this.content);k.length>this.maxLength?this.showContent=this.showSeeMoreButton?k.substring(0,this.maxLength)+"...":this.content:(this.showSeeMoreButton=!1,this.showShortContentButton=!1,this.showContent=this.content)}ngOnInit(){this.processSeeMore(),super.ngOnInit()}ngOnChanges(){this.showSeeMoreButton=!0,this.showShortContentButton=!1,this.processSeeMore()}}return x.\u0275fac=function(){let w;return function(M){return(w||(w=h.n5z(x)))(M||x)}}(),x.\u0275cmp=h.Xpm({type:x,selectors:[["azt-see-more-content"]],inputs:{content:"content",maxLength:"maxLength"},features:[h.qOj,h.TTD],decls:3,vars:3,consts:[[3,"content"],["class","btn-text-primary",3,"click",4,"ngIf"],[1,"btn-text-primary",3,"click"]],template:function(k,M){1&k&&(h._UZ(0,"azt-dynamic-hook",0),h.YNc(1,C,3,3,"a",1),h.YNc(2,g,3,3,"a",1)),2&k&&(h.Q6J("content",M.showContent),h.xp6(1),h.Q6J("ngIf",M.showSeeMoreButton&&M.content.length>M.maxLength),h.xp6(1),h.Q6J("ngIf",M.showShortContentButton&&M.content.length>M.maxLength))},dependencies:[U.O5,E.O,d.JV],encapsulation:2}),x})()},93283:(Ne,H,I)=>{"use strict";I.d(H,{s:()=>C});var F=I(19347),h=I(72164),U=I(65879),E=I(37722),d=I(36727);let C=(()=>{class g extends h.e{btnCloseDialog(){this.dialogRef.close(!1)}confirmDialog(){this.dialogRef.close(!0)}constructor(x,w){super(w,x),this.dialogRef=x,this.data=w}}return g.\u0275fac=function(x){return new(x||g)(U.Y36(F.so,8),U.Y36(F.WI,8))},g.\u0275cmp=U.Xpm({type:g,selectors:[["azt-dialog-danger"]],features:[U.qOj],decls:14,vars:7,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5"],[1,"text-md","flex"],[1,"w-6","h-6","mr-2","text-danger","inline-block","flex-none"],["name","trash-2"],[1,"text-md",3,"innerHtml"],[1,"p-3","text-right"],["azt-track-service","azt-dialog-danger-9EJYp6jGzr",1,"btn","w-24","btn-secondary","mr-2",3,"click"],["azt-track-service","azt-dialog-danger-ffMh3NrPRC",1,"btn","w-24","btn-danger",3,"click"]],template:function(x,w){1&x&&(U.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3)(4,"span",4),U._UZ(5,"lucide-icon",5),U.qZA(),U._UZ(6,"span",6),U.qZA()()(),U.TgZ(7,"div",7)(8,"button",8),U.NdJ("click",function(){return w.btnCloseDialog()}),U._uU(9),U.ALo(10,"mytranslate"),U.qZA(),U.TgZ(11,"button",9),U.NdJ("click",function(){return w.confirmDialog()}),U._uU(12),U.ALo(13,"mytranslate"),U.qZA()()()),2&x&&(U.xp6(6),U.Q6J("innerHtml",w.data.content,U.oJD),U.xp6(3),U.hij(" ",U.lcZ(10,3,"lang_auto_huy")," "),U.xp6(3),U.hij(" ",U.lcZ(13,5,"lang_auto_xac_nhan")," "))},dependencies:[E.Nh5,d.JV],encapsulation:2}),g})()},96368:(Ne,H,I)=>{"use strict";I.d(H,{C:()=>C});var F=I(19347),h=I(72164),U=I(65879),E=I(78497),d=I(36727);let C=(()=>{class g extends h.e{btnCloseDialog(){this.dialogRef.close()}constructor(x,w){super(w,x),this.dialogRef=x,this.data=w}}return g.\u0275fac=function(x){return new(x||g)(U.Y36(F.so,8),U.Y36(F.WI,8))},g.\u0275cmp=U.Xpm({type:g,selectors:[["azt-dialog-warning"]],features:[U.qOj],decls:17,vars:8,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-0"],[1,"text-md","font-medium","flex","items-center","p-3","pb-0"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-6","h-6","mr-2","text-pending"],["points","7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2"],["x1","12","y1","8","x2","12","y2","12"],["x1","12","y1","16","x2","12.01","y2","16"],[1,"mt-2"],[3,"defaultHeight"],[1,"text-xs","text-slate-500","dark:text-slate-400","p-3","pt-0",3,"innerHtml"],[1,"p-3","text-right"],["azt-track-service","azt-dialog-warning-3FIn9IaXN",1,"btn","w-24","btn-primary",3,"click"]],template:function(x,w){1&x&&(U.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),U.O4$(),U.TgZ(4,"svg",4),U._UZ(5,"polygon",5)(6,"line",6)(7,"line",7),U.qZA(),U._uU(8),U.ALo(9,"mytranslate"),U.qZA(),U.kcU(),U.TgZ(10,"div",8)(11,"azt-mat-dialog-content",9),U._UZ(12,"div",10),U.qZA()()()(),U.TgZ(13,"div",11)(14,"button",12),U.NdJ("click",function(){return w.btnCloseDialog()}),U._uU(15),U.ALo(16,"mytranslate"),U.qZA()()()),2&x&&(U.xp6(8),U.hij(" ",U.lcZ(9,4,"lang_auto_canh_bao")," "),U.xp6(3),U.Q6J("defaultHeight",60),U.xp6(1),U.Q6J("innerHtml",w.data.content,U.oJD),U.xp6(3),U.hij(" ",U.lcZ(16,6,"lang_auto_dong")," "))},dependencies:[E.R,d.JV],encapsulation:2}),g})()},7516:(Ne,H,I)=>{"use strict";I.d(H,{X:()=>U});var F=I(65879),h=I(46558);let U=(()=>{class E{processDataSchoolAndLevel(C){this.valueSurvey=C.filter(g=>g.schoolLevel?.id).map(g=>({value:g.schoolLevel?.id,desc:this.commonService.myTranslateInstant(g.schoolLevel?.name)})),this.valueSubjectSurvey=Array.from({length:14},(g,_)=>C.find(x=>x.schoolLevel?.id==_)?.schoolSubjectObjs??[])}constructor(C){this.commonService=C,this.valueSurvey=[],this.valueSubjectSurvey=[]}}return E.\u0275fac=function(C){return new(C||E)(F.LFG(h.z))},E.\u0275prov=F.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E})()},28485:Ne=>{"use strict";var I={}.hasOwnProperty,h=/[ -,\.\/:-@\[-\^`\{-~]/,U=/[ -,\.\/:-@\[\]\^`\{-~]/,d=/(^|\\+)?(\\[A-F0-9]{1,6})\x20(?![a-fA-F0-9\x20])/g,C=function g(_,x){x=function(_,x){if(!_)return x;var w={};for(var k in x)w[k]=I.call(_,k)?_[k]:x[k];return w}(x,g.options),"single"!=x.quotes&&"double"!=x.quotes&&(x.quotes="single");for(var w="double"==x.quotes?'"':"'",k=x.isIdentifier,M=_.charAt(0),B="",Q=0,D=_.length;Q<D;){var Z=_.charAt(Q++),V=Z.charCodeAt(),oe=void 0;if(V<32||V>126){if(V>=55296&&V<=56319&&Q<D){var K=_.charCodeAt(Q++);56320==(64512&K)?V=((1023&V)<<10)+(1023&K)+65536:Q--}oe="\\"+V.toString(16).toUpperCase()+" "}else oe=x.escapeEverything?h.test(Z)?"\\"+Z:"\\"+V.toString(16).toUpperCase()+" ":/[\t\n\f\r\x0B]/.test(Z)?"\\"+V.toString(16).toUpperCase()+" ":"\\"==Z||!k&&('"'==Z&&w==Z||"'"==Z&&w==Z)||k&&U.test(Z)?"\\"+Z:Z;B+=oe}return k&&(/^-[-\d]/.test(B)?B="\\-"+B.slice(1):/\d/.test(M)&&(B="\\3"+M+" "+B.slice(1))),B=B.replace(d,function(ee,ne,de){return ne&&ne.length%2?ee:(ne||"")+de}),!k&&x.wrap?w+B+w:B};C.options={escapeEverything:!1,isIdentifier:!1,quotes:"single",wrap:!1},C.version="3.0.0",Ne.exports=C},87482:(Ne,H,I)=>{var F=I(39698),h=I(78955);function E(g){return null==g}function C(g){(g=function d(g){var _={};for(var x in g)_[x]=g[x];return _}(g||{})).whiteList=g.whiteList||F.whiteList,g.onAttr=g.onAttr||F.onAttr,g.onIgnoreAttr=g.onIgnoreAttr||F.onIgnoreAttr,g.safeAttrValue=g.safeAttrValue||F.safeAttrValue,this.options=g}I(53034),C.prototype.process=function(g){if(!(g=(g=g||"").toString()))return"";var x=this.options,w=x.whiteList,k=x.onAttr,M=x.onIgnoreAttr,B=x.safeAttrValue;return h(g,function(D,Z,V,oe,K){var ee=w[V],ne=!1;if(!0===ee?ne=ee:"function"==typeof ee?ne=ee(oe):ee instanceof RegExp&&(ne=ee.test(oe)),!0!==ne&&(ne=!1),oe=B(V,oe)){var fe,de={position:Z,sourcePosition:D,source:K,isWhite:ne};if(ne)return E(fe=k(V,oe,de))?V+":"+oe:fe;if(!E(fe=M(V,oe,de)))return fe}})},Ne.exports=C},39698:(Ne,H)=>{function I(){return{"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1}}var U=/javascript\s*\:/gim;H.whiteList={"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1},H.getDefaultWhiteList=I,H.onAttr=function F(d,C,g){},H.onIgnoreAttr=function h(d,C,g){},H.safeAttrValue=function E(d,C){return U.test(C)?"":C}},51474:(Ne,H,I)=>{var F=I(39698),h=I(87482);for(var E in(H=Ne.exports=function U(d,C){return new h(C).process(d)}).FilterCSS=h,F)H[E]=F[E];typeof window<"u"&&(window.filterCSS=Ne.exports)},78955:(Ne,H,I)=>{var F=I(53034);Ne.exports=function h(U,E){";"!==(U=F.trimRight(U))[U.length-1]&&(U+=";");var d=U.length,C=!1,g=0,_=0,x="";function w(){if(!C){var B=F.trim(U.slice(g,_)),Q=B.indexOf(":");if(-1!==Q){var D=F.trim(B.slice(0,Q)),Z=F.trim(B.slice(Q+1));if(D){var V=E(g,x.length,D,Z,B);V&&(x+=V+"; ")}}}g=_+1}for(;_<d;_++){var k=U[_];if("/"===k&&"*"===U[_+1]){var M=U.indexOf("*/",_+2);if(-1===M)break;g=(_=M+1)+1,C=!1}else"("===k?C=!0:")"===k?C=!1:";"===k?C||w():"\n"===k&&w()}return F.trim(x)}},53034:Ne=>{Ne.exports={indexOf:function(H,I){var F,h;if(Array.prototype.indexOf)return H.indexOf(I);for(F=0,h=H.length;F<h;F++)if(H[F]===I)return F;return-1},forEach:function(H,I,F){var h,U;if(Array.prototype.forEach)return H.forEach(I,F);for(h=0,U=H.length;h<U;h++)I.call(F,H[h],h,H)},trim:function(H){return String.prototype.trim?H.trim():H.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(H){return String.prototype.trimRight?H.trimRight():H.replace(/(\s*$)/g,"")}}},73021:(Ne,H,I)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.FileParser=void 0;const F=I(96999),h=I(13649),U=I(21084),E=I(45962);H.FileParser=class d{constructor(){this.services=[],this.conf=""}loadConf(g){this.conf=g}init(){this.registerService(new E.WordService),this.registerService(new h.PdfService),this.registerService(new F.ImageService),this.registerService(new U.TableService)}registerService(g){g.loadConf(this.conf),this.services.push(g)}start(g){return new Promise((_,x)=>{let w=0;for(let k=0;k<this.services.length;k++)this.services[k].start(g).then(B=>{w++,B.supported?_(B):w===this.services.length&&x()})})}loadAllLibs(g){return new Promise(_=>{let x=0;const w=()=>{if(x===g.length)_(!0);else{const k=g[x];if(document.getElementById(k.name))x++,w();else{const B=document.createElement("script");B.setAttribute("src",k.link),B.setAttribute("id",k.name),B.setAttribute("async","false"),B.addEventListener("load",()=>{x++,w()},!1),document.body.appendChild(B)}}};w()})}}},22299:(Ne,H,I)=>{"use strict";H.uD=void 0;const h=I(73021);Object.defineProperty(H,"uD",{enumerable:!0,get:function(){return h.FileParser}});I(17618)},17618:(Ne,H)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.DocxParser=void 0;class I{constructor(){this.arrayBuffer=null,this.numberID=0}start(h){this.wmf||(this.wmf=new WMFConverter),this.file=h}reset(){this.file=void 0,this.arrayBuffer=void 0}load(){return new Promise(h=>{if(this.file){const U=this.file.name.split(".").pop();if("docx"===U?.toLocaleLowerCase()){const E=new FileReader;E.onloadend=()=>{this.arrayBuffer=E.result,h(!0)},E.readAsArrayBuffer(this.file)}else h(!1)}else h(!1)})}toTextLines(){return new Promise((h,U)=>{this.load().then(E=>{if(E){const d=[],C=[];mammoth.convertToMarkdown({arrayBuffer:this.arrayBuffer},{styleMap:["b => ","i => ","u => "]}).then(x=>{x.value.split("\n").forEach(k=>{k.length>0&&(0===k.indexOf("\t")&&(k=k.substring(1)),k=this.convertImageString(k,C),d.push(k.replace(/\t/g,"    ").replace(/\\./g,".")))}),C.forEach(k=>{this.processImageWmf(k)}),h({str:d,maps:C})})}else U({msg:"File kh\xf4ng h\u1ed7 tr\u1ee3."})})})}processImageWmf(h){(h.link.indexOf("image/x-wmf")>=0||h.link.indexOf("image/x-emf")>=0)&&(h.link=this.wmf.toPNG(h.link))}convertImageString(h,U){for(;-1!==h.indexOf(I.IMG_MD_START);){const E="ha"+this.numberID,d=h.indexOf(I.IMG_MD_START),C=h.indexOf(")",d+1),g=h.substring(d+I.IMG_MD_START.length,C);U.push({id:E,link:g}),h=h.substring(0,d)+"[!img:"+E+"]"+h.substring(C+1,h.length),this.numberID++}return h}}H.DocxParser=I,I.IMG_MD_START="![]("},96999:(Ne,H)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.ImageService=void 0,H.ImageService=class I{constructor(){this.conf=""}toBase64(h){return new Promise((U,E)=>{const d=new FileReader;d.onload=()=>{U(d.result)},d.onerror=C=>{E(C)},d.readAsDataURL(h)})}isFileImage(h){return h&&"image"===h.type.split("/")[0]}generateIdRequired(h){let U="";for(let C=0;C<h;C++)U+="abcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(36*Math.random()));return Math.floor(Date.now()/1e3)+U}loadConf(h){this.conf=h}start(h){return new Promise(U=>{this.isFileImage(h)?this.toBase64(h).then(E=>{const d="ih"+this.generateIdRequired(3),C={maps:[],str:[]};C.maps.push({id:d,link:E}),C.str.push("[!img:"+d+"]"),U({type:"image",supported:!0,data:C})}).catch(()=>{U({type:"image",supported:!1,data:{str:[],maps:[]}})}):U({type:"image",supported:!1,data:{str:[],maps:[]}})})}}},13649:(Ne,H)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.PdfService=void 0,H.PdfService=class I{constructor(){this.conf=""}isPdfDocument(h){return/^(?:application\/pdf)$/i.test(h.type)}loadConf(h){this.conf=h}start(h){return new Promise(U=>{this.isPdfDocument(h)?U({type:"pdf",supported:!0,data:{str:[],maps:[]}}):U({type:"pdf",supported:!1,data:{str:[],maps:[]}})})}cropQuestionContent(h,U){const E=[];let d=Number.MAX_VALUE;return h.answers.forEach(g=>{E.push({label:this.mergeContentCanvas(g.remove,U),content:this.mergeContentsCanvas(g.positions,U),conf:g}),d>g.positions[0].top&&(d=g.positions[0].top)}),h.positions[h.positions.length-1].heigh=d-h.positions[h.positions.length-1].top,{label:this.mergeContentCanvas(h.remove,U),content:this.mergeContentsCanvas(h.positions,U),ans:E,conf:h}}mergeContentsCanvas(h,U){let E=0,d=0,C=[];h.forEach(w=>{const k=this.mergeContentCanvas(w,U);E=k.width,d+=k.height,C.push(k)});const g=document.createElement("canvas");g.width=E,g.height=d;const _=g.getContext("2d");let x=0;return C.forEach(w=>{_?.drawImage(w,0,x,w.width,w.height,0,0,w.width,w.height),x+=w.height}),g}mergeContentCanvas(h,U){const E=U[h.pageIndex].canvas,d=document.createElement("canvas");d.width=h.width,d.height=h.heigh;const C=d.getContext("2d");return C?.drawImage(E,h.left,h.top,h.width,h.heigh,0,0,h.width,h.heigh),d}}},21084:(Ne,H,I)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.TableService=void 0;const F=I(17618);H.TableService=class h{constructor(){this.conf="",this.docxParser=new F.DocxParser}loadConf(E){}start(E){return new Promise(d=>{d("application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"==E.type||"application/vnd.ms-excel"==E.type||".csv"==E.type?{type:"xlsx",supported:!0,data:{str:[],maps:[]}}:{type:"xlsx",supported:!1,data:{str:[],maps:[]}})})}}},45962:(Ne,H,I)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.WordService=void 0;const F=I(17618);H.WordService=class h{constructor(){this.pattern_remove=/<a id="[^"]+"><\/a>/g,this.conf="",this.docxParser=new F.DocxParser}loadConf(E){}start(E){return new Promise(d=>{this.docxParser.start(E),this.docxParser.toTextLines().then(C=>{for(let g=0;g<C.str.length;g++)C.str[g]=C.str[g].replace(this.pattern_remove,"");d({type:"docx",supported:!0,data:C})}).catch(C=>{d({type:"docx",supported:!1,data:{str:[],maps:[]}})})})}}},16930:Ne=>{var C=/[a-z0-9_-]/i,g=/[\s\t]/,x=/[^a-z0-9_-]/i;Ne.exports={parse:function(k){for(var Z,V,M=!0,B=0,Q="",D=0,oe=[];;){if(V=k[D],0===B){if(!V&&M)break;if(!V&&!M)throw new Error("Parse error");if('"'===V||"'"===V)Z=V,B=1,M=!1;else if(!g.test(V)){if(!C.test(V))throw new Error("Parse error");B=3,M=!1,D--}}else if(1===B){if(!V)throw new Error("Parse Error");"\\"===V?B=2:V===Z?(oe.push(Q),Q="",B=4):Q+=V}else if(2===B){if(V!==Z&&"\\"!==V)throw new Error("Parse error");Q+=V,B=1}else if(3===B){if(!V){oe.push(Q);break}C.test(V)?Q+=V:","===V?(oe.push(Q),Q="",B=0):g.test(V)?B=5:"\\"===V&&(B=6)}else if(6===B){if(/[0-9a-f]/i.test(V))throw new Error("Parse error");Q+=V,B=3}else if(5===B){if(!V){oe.push(Q);break}if(C.test(V))Q+=" "+V,B=3;else if(","===V)oe.push(Q),Q="",B=0;else if(!g.test(V))throw new Error("Parse error")}else if(4===B){if(!V)break;if(","===V)B=0;else if(!g.test(V))throw new Error("Parse error")}D++}return oe},stringify:function(k,M){var B=M&&M.quote||'"';if('"'!==B&&"'"!==B)throw new Error("Quote must be `'` or `\"`");for(var Q=new RegExp(B,"g"),D=[],Z=0;Z<k.length;++Z){var V=k[Z];x.test(V)&&(V=B+(V=V.replace(/\\/g,"\\\\").replace(Q,"\\"+B))+B),D.push(V)}return D.join(", ")}}},74456:function(Ne){Ne.exports=function(){"use strict";var H=function(T,y){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,S){O.__proto__=S}||function(O,S){for(var J in S)Object.prototype.hasOwnProperty.call(S,J)&&(O[J]=S[J])})(T,y)};function I(T,y){if("function"!=typeof y&&null!==y)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");function O(){this.constructor=T}H(T,y),T.prototype=null===y?Object.create(y):(O.prototype=y.prototype,new O)}var F=function(){return F=Object.assign||function(y){for(var O,S=1,J=arguments.length;S<J;S++)for(var ie in O=arguments[S])Object.prototype.hasOwnProperty.call(O,ie)&&(y[ie]=O[ie]);return y},F.apply(this,arguments)};function h(T,y,O,S){return new(O||(O=Promise))(function(ie,_e){function Me(ot){try{Ve(S.next(ot))}catch(ct){_e(ct)}}function Ie(ot){try{Ve(S.throw(ot))}catch(ct){_e(ct)}}function Ve(ot){ot.done?ie(ot.value):function J(ie){return ie instanceof O?ie:new O(function(_e){_e(ie)})}(ot.value).then(Me,Ie)}Ve((S=S.apply(T,y||[])).next())})}function U(T,y){var S,J,ie,_e,O={label:0,sent:function(){if(1&ie[0])throw ie[1];return ie[1]},trys:[],ops:[]};return _e={next:Me(0),throw:Me(1),return:Me(2)},"function"==typeof Symbol&&(_e[Symbol.iterator]=function(){return this}),_e;function Me(Ve){return function(ot){return function Ie(Ve){if(S)throw new TypeError("Generator is already executing.");for(;O;)try{if(S=1,J&&(ie=2&Ve[0]?J.return:Ve[0]?J.throw||((ie=J.return)&&ie.call(J),0):J.next)&&!(ie=ie.call(J,Ve[1])).done)return ie;switch(J=0,ie&&(Ve=[2&Ve[0],ie.value]),Ve[0]){case 0:case 1:ie=Ve;break;case 4:return O.label++,{value:Ve[1],done:!1};case 5:O.label++,J=Ve[1],Ve=[0];continue;case 7:Ve=O.ops.pop(),O.trys.pop();continue;default:if(!(ie=(ie=O.trys).length>0&&ie[ie.length-1])&&(6===Ve[0]||2===Ve[0])){O=0;continue}if(3===Ve[0]&&(!ie||Ve[1]>ie[0]&&Ve[1]<ie[3])){O.label=Ve[1];break}if(6===Ve[0]&&O.label<ie[1]){O.label=ie[1],ie=Ve;break}if(ie&&O.label<ie[2]){O.label=ie[2],O.ops.push(Ve);break}ie[2]&&O.ops.pop(),O.trys.pop();continue}Ve=y.call(T,O)}catch(ot){Ve=[6,ot],J=0}finally{S=ie=0}if(5&Ve[0])throw Ve[1];return{value:Ve[0]?Ve[1]:void 0,done:!0}}([Ve,ot])}}}function E(T,y,O){if(O||2===arguments.length)for(var ie,S=0,J=y.length;S<J;S++)(ie||!(S in y))&&(ie||(ie=Array.prototype.slice.call(y,0,S)),ie[S]=y[S]);return T.concat(ie||y)}for(var d=function(){function T(y,O,S,J){this.left=y,this.top=O,this.width=S,this.height=J}return T.prototype.add=function(y,O,S,J){return new T(this.left+y,this.top+O,this.width+S,this.height+J)},T.fromClientRect=function(y,O){return new T(O.left+y.windowBounds.left,O.top+y.windowBounds.top,O.width,O.height)},T.fromDOMRectList=function(y,O){var S=Array.from(O).find(function(J){return 0!==J.width});return S?new T(S.left+y.windowBounds.left,S.top+y.windowBounds.top,S.width,S.height):T.EMPTY},T.EMPTY=new T(0,0,0,0),T}(),C=function(T,y){return d.fromClientRect(T,y.getBoundingClientRect())},_=function(T){for(var y=[],O=0,S=T.length;O<S;){var J=T.charCodeAt(O++);if(J>=55296&&J<=56319&&O<S){var ie=T.charCodeAt(O++);56320==(64512&ie)?y.push(((1023&J)<<10)+(1023&ie)+65536):(y.push(J),O--)}else y.push(J)}return y},x=function(){for(var T=[],y=0;y<arguments.length;y++)T[y]=arguments[y];if(String.fromCodePoint)return String.fromCodePoint.apply(String,T);var O=T.length;if(!O)return"";for(var S=[],J=-1,ie="";++J<O;){var _e=T[J];_e<=65535?S.push(_e):S.push(55296+((_e-=65536)>>10),_e%1024+56320),(J+1===O||S.length>16384)&&(ie+=String.fromCharCode.apply(String,S),S.length=0)}return ie},w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",k=typeof Uint8Array>"u"?[]:new Uint8Array(256),M=0;M<64;M++)k[w.charCodeAt(M)]=M;for(var B="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Q=typeof Uint8Array>"u"?[]:new Uint8Array(256),D=0;D<64;D++)Q[B.charCodeAt(D)]=D;for(var ye=function(T,y,O){return T.slice?T.slice(y,O):new Uint16Array(Array.prototype.slice.call(T,y,O))},ii=function(){function T(y,O,S,J,ie,_e){this.initialValue=y,this.errorValue=O,this.highStart=S,this.highValueIndex=J,this.index=ie,this.data=_e}return T.prototype.get=function(y){var O;if(y>=0){if(y<55296||y>56319&&y<=65535)return this.data[O=((O=this.index[y>>5])<<2)+(31&y)];if(y<=65535)return this.data[O=((O=this.index[2048+(y-55296>>5)])<<2)+(31&y)];if(y<this.highStart)return O=this.index[O=2080+(y>>11)],this.data[O=((O=this.index[O+=y>>5&63])<<2)+(31&y)];if(y<=1114111)return this.data[this.highValueIndex]}return this.errorValue},T}(),oi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ut=typeof Uint8Array>"u"?[]:new Uint8Array(256),Hn=0;Hn<64;Hn++)Ut[oi.charCodeAt(Hn)]=Hn;var O,S,J,_e,Me,jt=10,ai=13,Fo=15,No=17,xo=18,$m=19,Vm=20,Ts=21,La=22,Ba=24,ia=25,Vr=26,wa=27,Ko=28,ks=30,Ss=32,un=33,Zc=34,Ar=35,Yn=37,Ha=38,nr=39,oa=40,Ud=42,Xr=[9001,65288],qn="\xd7",Ul=(O=function(T){var S,ie,_e,Me,Ie,y=.75*T.length,O=T.length,J=0;"="===T[T.length-1]&&(y--,"="===T[T.length-2]&&y--);var Ve=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(y):new Array(y),ot=Array.isArray(Ve)?Ve:new Uint8Array(Ve);for(S=0;S<O;S+=4)ie=Q[T.charCodeAt(S)],_e=Q[T.charCodeAt(S+1)],Me=Q[T.charCodeAt(S+2)],Ie=Q[T.charCodeAt(S+3)],ot[J++]=ie<<2|_e>>4,ot[J++]=(15&_e)<<4|Me>>2,ot[J++]=(3&Me)<<6|63&Ie;return Ve}("KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA=="),S=Array.isArray(O)?function(T){for(var y=T.length,O=[],S=0;S<y;S+=4)O.push(T[S+3]<<24|T[S+2]<<16|T[S+1]<<8|T[S]);return O}(O):new Uint32Array(O),J=Array.isArray(O)?function(T){for(var y=T.length,O=[],S=0;S<y;S+=2)O.push(T[S+1]<<8|T[S]);return O}(O):new Uint16Array(O),_e=ye(J,12,S[4]/2),Me=2===S[5]?ye(J,(24+S[4])/2):function(T,y,O){return T.slice?T.slice(y,O):new Uint32Array(Array.prototype.slice.call(T,y,O))}(S,Math.ceil((24+S[4])/4)),new ii(S[0],S[1],S[2],S[3],_e,Me)),es=[ks,36],Qu=[1,2,3,5],jl=[jt,8],Wm=[wa,Vr],Xm=Qu.concat(jl),ql=[Ha,nr,oa,Zc,Ar],Vh=[Fo,ai],jd=function(T,y,O,S){var J=S[O];if(Array.isArray(T)?-1!==T.indexOf(J):T===J)for(var ie=O;ie<=S.length;){if((_e=S[++ie])===y)return!0;if(_e!==jt)break}if(J===jt)for(ie=O;ie>0;){var Me=S[--ie];if(Array.isArray(T)?-1!==T.indexOf(Me):T===Me)for(var Ie=O;Ie<=S.length;){var _e;if((_e=S[++Ie])===y)return!0;if(_e!==jt)break}if(Me!==jt)break}return!1},tp=function(T,y){for(var O=T;O>=0;){var S=y[O];if(S!==jt)return S;O--}return 0},Wh=function(T,y,O,S,J){if(0===O[S])return qn;var ie=S-1;if(Array.isArray(J)&&!0===J[ie])return qn;var _e=ie-1,Me=ie+1,Ie=y[ie],Ve=_e>=0?y[_e]:0,ot=y[Me];if(2===Ie&&3===ot)return qn;if(-1!==Qu.indexOf(Ie))return"!";if(-1!==Qu.indexOf(ot)||-1!==jl.indexOf(ot))return qn;if(8===tp(ie,y))return"\xf7";if(11===Ul.get(T[ie])||(Ie===Ss||Ie===un)&&11===Ul.get(T[Me])||7===Ie||7===ot||9===Ie||-1===[jt,ai,Fo].indexOf(Ie)&&9===ot||-1!==[No,xo,$m,Ba,Ko].indexOf(ot)||tp(ie,y)===La||jd(23,La,ie,y)||jd([No,xo],Ts,ie,y)||jd(12,12,ie,y))return qn;if(Ie===jt)return"\xf7";if(23===Ie||23===ot)return qn;if(16===ot||16===Ie)return"\xf7";if(-1!==[ai,Fo,Ts].indexOf(ot)||14===Ie||36===Ve&&-1!==Vh.indexOf(Ie)||Ie===Ko&&36===ot||ot===Vm||-1!==es.indexOf(ot)&&Ie===ia||-1!==es.indexOf(Ie)&&ot===ia||Ie===wa&&-1!==[Yn,Ss,un].indexOf(ot)||-1!==[Yn,Ss,un].indexOf(Ie)&&ot===Vr||-1!==es.indexOf(Ie)&&-1!==Wm.indexOf(ot)||-1!==Wm.indexOf(Ie)&&-1!==es.indexOf(ot)||-1!==[wa,Vr].indexOf(Ie)&&(ot===ia||-1!==[La,Fo].indexOf(ot)&&y[Me+1]===ia)||-1!==[La,Fo].indexOf(Ie)&&ot===ia||Ie===ia&&-1!==[ia,Ko,Ba].indexOf(ot))return qn;if(-1!==[ia,Ko,Ba,No,xo].indexOf(ot))for(var ct=ie;ct>=0;){if((vt=y[ct])===ia)return qn;if(-1===[Ko,Ba].indexOf(vt))break;ct--}if(-1!==[wa,Vr].indexOf(ot))for(ct=-1!==[No,xo].indexOf(Ie)?_e:ie;ct>=0;){var vt;if((vt=y[ct])===ia)return qn;if(-1===[Ko,Ba].indexOf(vt))break;ct--}if(Ha===Ie&&-1!==[Ha,nr,Zc,Ar].indexOf(ot)||-1!==[nr,Zc].indexOf(Ie)&&-1!==[nr,oa].indexOf(ot)||-1!==[oa,Ar].indexOf(Ie)&&ot===oa||-1!==ql.indexOf(Ie)&&-1!==[Vm,Vr].indexOf(ot)||-1!==ql.indexOf(ot)&&Ie===wa||-1!==es.indexOf(Ie)&&-1!==es.indexOf(ot)||Ie===Ba&&-1!==es.indexOf(ot)||-1!==es.concat(ia).indexOf(Ie)&&ot===La&&-1===Xr.indexOf(T[Me])||-1!==es.concat(ia).indexOf(ot)&&Ie===xo)return qn;if(41===Ie&&41===ot){for(var hn=O[ie],Kt=1;hn>0&&41===y[--hn];)Kt++;if(Kt%2!=0)return qn}return Ie===Ss&&ot===un?qn:"\xf7"},Xh=function(T,y){y||(y={lineBreak:"normal",wordBreak:"normal"});var O=function(T,y){void 0===y&&(y="strict");var O=[],S=[],J=[];return T.forEach(function(ie,_e){var Me=Ul.get(ie);if(Me>50?(J.push(!0),Me-=50):J.push(!1),-1!==["normal","auto","loose"].indexOf(y)&&-1!==[8208,8211,12316,12448].indexOf(ie))return S.push(_e),O.push(16);if(4===Me||11===Me){if(0===_e)return S.push(_e),O.push(ks);var Ie=O[_e-1];return-1===Xm.indexOf(Ie)?(S.push(S[_e-1]),O.push(Ie)):(S.push(_e),O.push(ks))}return S.push(_e),31===Me?O.push("strict"===y?Ts:Yn):Me===Ud||29===Me?O.push(ks):43===Me?O.push(ie>=131072&&ie<=196605||ie>=196608&&ie<=262141?Yn:ks):void O.push(Me)}),[S,O,J]}(T,y.lineBreak),S=O[0],J=O[1],ie=O[2];return("break-all"===y.wordBreak||"break-word"===y.wordBreak)&&(J=J.map(function(Me){return-1!==[ia,ks,Ud].indexOf(Me)?Yn:Me})),[S,J,"keep-all"===y.wordBreak?ie.map(function(Me,Ie){return Me&&T[Ie]>=19968&&T[Ie]<=40959}):void 0]},eA=function(){function T(y,O,S,J){this.codePoints=y,this.required="!"===O,this.start=S,this.end=J}return T.prototype.slice=function(){return x.apply(void 0,this.codePoints.slice(this.start,this.end))},T}(),ti=function(T){return T>=48&&T<=57},xr=function(T){return ti(T)||T>=65&&T<=70||T>=97&&T<=102},rl=function(T){return 10===T||9===T||32===T},sl=function(T){return function(T){return function(T){return T>=97&&T<=122}(T)||function(T){return T>=65&&T<=90}(T)}(T)||function(T){return T>=128}(T)||95===T},Kd=function(T){return sl(T)||ti(T)||45===T},dp=function(T){return T>=0&&T<=8||11===T||T>=14&&T<=31||127===T},Qr=function(T,y){return 92===T&&10!==y},Os=function(T,y,O){return 45===T?sl(y)||Qr(y,O):!!sl(T)||!(92!==T||!Qr(T,y))},Gi=function(T,y,O){return 43===T||45===T?!!ti(y)||46===y&&ti(O):ti(46===T?y:T)},Is=function(T){var y=0,O=1;(43===T[y]||45===T[y])&&(45===T[y]&&(O=-1),y++);for(var S=[];ti(T[y]);)S.push(T[y++]);var J=S.length?parseInt(x.apply(void 0,S),10):0;46===T[y]&&y++;for(var ie=[];ti(T[y]);)ie.push(T[y++]);var _e=ie.length,Me=_e?parseInt(x.apply(void 0,ie),10):0;(69===T[y]||101===T[y])&&y++;var Ie=1;(43===T[y]||45===T[y])&&(45===T[y]&&(Ie=-1),y++);for(var Ve=[];ti(T[y]);)Ve.push(T[y++]);var ot=Ve.length?parseInt(x.apply(void 0,Ve),10):0;return O*(J+Me*Math.pow(10,-_e))*Math.pow(10,Ie*ot)},or={type:2},is={type:3},ll={type:4},Gd={type:13},mp={type:8},pp={type:21},hp={type:9},Ru={type:10},ar={type:11},zu={type:12},Gl={type:14},br={type:23},Yc={type:1},Fr={type:25},Yl={type:24},Hu={type:26},$c={type:27},Yd={type:28},$l={type:29},Vc={type:31},Wc={type:32},$d=function(){function T(){this._value=[]}return T.prototype.write=function(y){this._value=this._value.concat(_(y))},T.prototype.read=function(){for(var y=[],O=this.consumeToken();O!==Wc;)y.push(O),O=this.consumeToken();return y},T.prototype.consumeToken=function(){var y=this.consumeCodePoint();switch(y){case 34:return this.consumeStringToken(34);case 35:var O=this.peekCodePoint(0),S=this.peekCodePoint(1),J=this.peekCodePoint(2);if(Kd(O)||Qr(S,J)){var ie=Os(O,S,J)?2:1;return{type:5,value:this.consumeName(),flags:ie}}break;case 36:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),Gd;break;case 39:return this.consumeStringToken(39);case 40:return or;case 41:return is;case 42:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),Gl;break;case 43:if(Gi(y,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(y),this.consumeNumericToken();break;case 44:return ll;case 45:var Me=y,Ie=this.peekCodePoint(0),Ve=this.peekCodePoint(1);if(Gi(Me,Ie,Ve))return this.reconsumeCodePoint(y),this.consumeNumericToken();if(Os(Me,Ie,Ve))return this.reconsumeCodePoint(y),this.consumeIdentLikeToken();if(45===Ie&&62===Ve)return this.consumeCodePoint(),this.consumeCodePoint(),Yl;break;case 46:if(Gi(y,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(y),this.consumeNumericToken();break;case 47:if(42===this.peekCodePoint(0))for(this.consumeCodePoint();;){var ot=this.consumeCodePoint();if(42===ot&&47===(ot=this.consumeCodePoint()))return this.consumeToken();if(-1===ot)return this.consumeToken()}break;case 58:return Hu;case 59:return $c;case 60:if(33===this.peekCodePoint(0)&&45===this.peekCodePoint(1)&&45===this.peekCodePoint(2))return this.consumeCodePoint(),this.consumeCodePoint(),Fr;break;case 64:var ct=this.peekCodePoint(0),vt=this.peekCodePoint(1),hn=this.peekCodePoint(2);if(Os(ct,vt,hn))return{type:7,value:this.consumeName()};break;case 91:return Yd;case 92:if(Qr(y,this.peekCodePoint(0)))return this.reconsumeCodePoint(y),this.consumeIdentLikeToken();break;case 93:return $l;case 61:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),mp;break;case 123:return ar;case 125:return zu;case 117:case 85:var Kt=this.peekCodePoint(0),en=this.peekCodePoint(1);return 43===Kt&&(xr(en)||63===en)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(y),this.consumeIdentLikeToken();case 124:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),hp;if(124===this.peekCodePoint(0))return this.consumeCodePoint(),pp;break;case 126:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),Ru;break;case-1:return Wc}return rl(y)?(this.consumeWhiteSpace(),Vc):ti(y)?(this.reconsumeCodePoint(y),this.consumeNumericToken()):sl(y)?(this.reconsumeCodePoint(y),this.consumeIdentLikeToken()):{type:6,value:x(y)}},T.prototype.consumeCodePoint=function(){var y=this._value.shift();return typeof y>"u"?-1:y},T.prototype.reconsumeCodePoint=function(y){this._value.unshift(y)},T.prototype.peekCodePoint=function(y){return y>=this._value.length?-1:this._value[y]},T.prototype.consumeUnicodeRangeToken=function(){for(var y=[],O=this.consumeCodePoint();xr(O)&&y.length<6;)y.push(O),O=this.consumeCodePoint();for(var S=!1;63===O&&y.length<6;)y.push(O),O=this.consumeCodePoint(),S=!0;if(S)return{type:30,start:parseInt(x.apply(void 0,y.map(function(Ie){return 63===Ie?48:Ie})),16),end:parseInt(x.apply(void 0,y.map(function(Ie){return 63===Ie?70:Ie})),16)};var _e=parseInt(x.apply(void 0,y),16);if(45===this.peekCodePoint(0)&&xr(this.peekCodePoint(1))){this.consumeCodePoint(),O=this.consumeCodePoint();for(var Me=[];xr(O)&&Me.length<6;)Me.push(O),O=this.consumeCodePoint();return{type:30,start:_e,end:parseInt(x.apply(void 0,Me),16)}}return{type:30,start:_e,end:_e}},T.prototype.consumeIdentLikeToken=function(){var y=this.consumeName();return"url"===y.toLowerCase()&&40===this.peekCodePoint(0)?(this.consumeCodePoint(),this.consumeUrlToken()):40===this.peekCodePoint(0)?(this.consumeCodePoint(),{type:19,value:y}):{type:20,value:y}},T.prototype.consumeUrlToken=function(){var y=[];if(this.consumeWhiteSpace(),-1===this.peekCodePoint(0))return{type:22,value:""};var O=this.peekCodePoint(0);if(39===O||34===O){var S=this.consumeStringToken(this.consumeCodePoint());return 0===S.type&&(this.consumeWhiteSpace(),-1===this.peekCodePoint(0)||41===this.peekCodePoint(0))?(this.consumeCodePoint(),{type:22,value:S.value}):(this.consumeBadUrlRemnants(),br)}for(;;){var J=this.consumeCodePoint();if(-1===J||41===J)return{type:22,value:x.apply(void 0,y)};if(rl(J))return this.consumeWhiteSpace(),-1===this.peekCodePoint(0)||41===this.peekCodePoint(0)?(this.consumeCodePoint(),{type:22,value:x.apply(void 0,y)}):(this.consumeBadUrlRemnants(),br);if(34===J||39===J||40===J||dp(J))return this.consumeBadUrlRemnants(),br;if(92===J){if(!Qr(J,this.peekCodePoint(0)))return this.consumeBadUrlRemnants(),br;y.push(this.consumeEscapedCodePoint())}else y.push(J)}},T.prototype.consumeWhiteSpace=function(){for(;rl(this.peekCodePoint(0));)this.consumeCodePoint()},T.prototype.consumeBadUrlRemnants=function(){for(;;){var y=this.consumeCodePoint();if(41===y||-1===y)return;Qr(y,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},T.prototype.consumeStringSlice=function(y){for(var S="";y>0;){var J=Math.min(5e4,y);S+=x.apply(void 0,this._value.splice(0,J)),y-=J}return this._value.shift(),S},T.prototype.consumeStringToken=function(y){for(var O="",S=0;;){var J=this._value[S];if(-1===J||void 0===J||J===y)return{type:0,value:O+=this.consumeStringSlice(S)};if(10===J)return this._value.splice(0,S),Yc;if(92===J){var ie=this._value[S+1];-1!==ie&&void 0!==ie&&(10===ie?(O+=this.consumeStringSlice(S),S=-1,this._value.shift()):Qr(J,ie)&&(O+=this.consumeStringSlice(S),O+=x(this.consumeEscapedCodePoint()),S=-1))}S++}},T.prototype.consumeNumber=function(){var y=[],O=4,S=this.peekCodePoint(0);for((43===S||45===S)&&y.push(this.consumeCodePoint());ti(this.peekCodePoint(0));)y.push(this.consumeCodePoint());S=this.peekCodePoint(0);var J=this.peekCodePoint(1);if(46===S&&ti(J))for(y.push(this.consumeCodePoint(),this.consumeCodePoint()),O=8;ti(this.peekCodePoint(0));)y.push(this.consumeCodePoint());S=this.peekCodePoint(0),J=this.peekCodePoint(1);var ie=this.peekCodePoint(2);if((69===S||101===S)&&((43===J||45===J)&&ti(ie)||ti(J)))for(y.push(this.consumeCodePoint(),this.consumeCodePoint()),O=8;ti(this.peekCodePoint(0));)y.push(this.consumeCodePoint());return[Is(y),O]},T.prototype.consumeNumericToken=function(){var y=this.consumeNumber(),O=y[0],S=y[1],J=this.peekCodePoint(0),ie=this.peekCodePoint(1),_e=this.peekCodePoint(2);return Os(J,ie,_e)?{type:15,number:O,flags:S,unit:this.consumeName()}:37===J?(this.consumeCodePoint(),{type:16,number:O,flags:S}):{type:17,number:O,flags:S}},T.prototype.consumeEscapedCodePoint=function(){var y=this.consumeCodePoint();if(xr(y)){for(var O=x(y);xr(this.peekCodePoint(0))&&O.length<6;)O+=x(this.consumeCodePoint());rl(this.peekCodePoint(0))&&this.consumeCodePoint();var S=parseInt(O,16);return 0===S||function(T){return T>=55296&&T<=57343}(S)||S>1114111?65533:S}return-1===y?65533:y},T.prototype.consumeName=function(){for(var y="";;){var O=this.consumeCodePoint();if(Kd(O))y+=x(O);else{if(!Qr(O,this.peekCodePoint(0)))return this.reconsumeCodePoint(O),y;y+=x(this.consumeEscapedCodePoint())}}},T}(),Ju=function(){function T(y){this._tokens=y}return T.create=function(y){var O=new $d;return O.write(y),new T(O.read())},T.parseValue=function(y){return T.create(y).parseComponentValue()},T.parseValues=function(y){return T.create(y).parseComponentValues()},T.prototype.parseComponentValue=function(){for(var y=this.consumeToken();31===y.type;)y=this.consumeToken();if(32===y.type)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(y);var O=this.consumeComponentValue();do{y=this.consumeToken()}while(31===y.type);if(32===y.type)return O;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},T.prototype.parseComponentValues=function(){for(var y=[];;){var O=this.consumeComponentValue();if(32===O.type)return y;y.push(O),y.push()}},T.prototype.consumeComponentValue=function(){var y=this.consumeToken();switch(y.type){case 11:case 28:case 2:return this.consumeSimpleBlock(y.type);case 19:return this.consumeFunction(y)}return y},T.prototype.consumeSimpleBlock=function(y){for(var O={type:y,values:[]},S=this.consumeToken();;){if(32===S.type||sA(S,y))return O;this.reconsumeToken(S),O.values.push(this.consumeComponentValue()),S=this.consumeToken()}},T.prototype.consumeFunction=function(y){for(var O={name:y.value,values:[],type:18};;){var S=this.consumeToken();if(32===S.type||3===S.type)return O;this.reconsumeToken(S),O.values.push(this.consumeComponentValue())}},T.prototype.consumeToken=function(){var y=this._tokens.shift();return typeof y>"u"?Wc:y},T.prototype.reconsumeToken=function(y){this._tokens.unshift(y)},T}(),Vl=function(T){return 15===T.type},cl=function(T){return 17===T.type},Ci=function(T){return 20===T.type},Ap=function(T){return 0===T.type},Wl=function(T,y){return Ci(T)&&T.value===y},Vd=function(T){return 31!==T.type},Ms=function(T){return 31!==T.type&&4!==T.type},Ka=function(T){var y=[],O=[];return T.forEach(function(S){if(4===S.type){if(0===O.length)throw new Error("Error parsing function args, zero tokens for arg");return y.push(O),void(O=[])}31!==S.type&&O.push(S)}),O.length&&y.push(O),y},sA=function(T,y){return 11===y&&12===T.type||28===y&&29===T.type||2===y&&3===T.type},os=function(T){return 17===T.type||15===T.type},zi=function(T){return 16===T.type||os(T)},Ku=function(T){return T.length>1?[T[0],T[1]]:[T[0]]},aa={type:17,number:0,flags:4},Gu={type:16,number:50,flags:4},Ls={type:16,number:100,flags:4},Xc=function(T,y,O){var S=T[0],J=T[1];return[Ti(S,y),Ti(typeof J<"u"?J:S,O)]},Ti=function(T,y){if(16===T.type)return T.number/100*y;if(Vl(T))switch(T.unit){case"rem":case"em":return 16*T.number;default:return T.number}return T.number},$="grad",we_parse=function(T,y){if(15===y.type)switch(y.unit){case"deg":return Math.PI*y.number/180;case $:return Math.PI/200*y.number;case"rad":return y.number;case"turn":return 2*Math.PI*y.number}throw new Error("Unsupported angle type")},qe=function(T){return 15===T.type&&("deg"===T.unit||T.unit===$||"rad"===T.unit||"turn"===T.unit)},ze=function(T){switch(T.filter(Ci).map(function(O){return O.value}).join(" ")){case"to bottom right":case"to right bottom":case"left top":case"top left":return[aa,aa];case"to top":case"bottom":return tt(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[aa,Ls];case"to right":case"left":return tt(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Ls,Ls];case"to bottom":case"top":return tt(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Ls,aa];case"to left":case"right":return tt(270)}return 0},tt=function(T){return Math.PI*T/180},pt_parse=function(T,y){if(18===y.type){var O=Wi[y.name];if(typeof O>"u")throw new Error('Attempting to parse an unsupported color function "'+y.name+'"');return O(T,y.values)}if(5===y.type){if(3===y.value.length){var S=y.value.substring(0,1),J=y.value.substring(1,2),ie=y.value.substring(2,3);return Pt(parseInt(S+S,16),parseInt(J+J,16),parseInt(ie+ie,16),1)}if(4===y.value.length){S=y.value.substring(0,1),J=y.value.substring(1,2),ie=y.value.substring(2,3);var _e=y.value.substring(3,4);return Pt(parseInt(S+S,16),parseInt(J+J,16),parseInt(ie+ie,16),parseInt(_e+_e,16)/255)}if(6===y.value.length)return S=y.value.substring(0,2),J=y.value.substring(2,4),ie=y.value.substring(4,6),Pt(parseInt(S,16),parseInt(J,16),parseInt(ie,16),1);if(8===y.value.length)return S=y.value.substring(0,2),J=y.value.substring(2,4),ie=y.value.substring(4,6),_e=y.value.substring(6,8),Pt(parseInt(S,16),parseInt(J,16),parseInt(ie,16),parseInt(_e,16)/255)}if(20===y.type){var Me=Hi[y.value.toUpperCase()];if(typeof Me<"u")return Me}return Hi.TRANSPARENT},xt=function(T){return 0==(255&T)},Bt=function(T){var y=255&T,O=255&T>>8,S=255&T>>16,J=255&T>>24;return y<255?"rgba("+J+","+S+","+O+","+y/255+")":"rgb("+J+","+S+","+O+")"},Pt=function(T,y,O,S){return(T<<24|y<<16|O<<8|Math.round(255*S)<<0)>>>0},Nt=function(T,y){if(17===T.type)return T.number;if(16===T.type){var O=3===y?1:255;return 3===y?T.number/100*O:Math.round(T.number/100*O)}return 0},kn=function(T,y){var O=y.filter(Ms);if(3===O.length){var S=O.map(Nt);return Pt(S[0],S[1],S[2],1)}if(4===O.length){var Me=O.map(Nt);return Pt(Me[0],Me[1],Me[2],Me[3])}return 0};function yn(T,y,O){return O<0&&(O+=1),O>=1&&(O-=1),O<1/6?(y-T)*O*6+T:O<.5?y:O<2/3?6*(y-T)*(2/3-O)+T:T}var bi=function(T,y){var O=y.filter(Ms),S=O[0],J=O[1],ie=O[2],_e=O[3],Me=(17===S.type?tt(S.number):we_parse(T,S))/(2*Math.PI),Ie=zi(J)?J.number/100:0,Ve=zi(ie)?ie.number/100:0,ot=typeof _e<"u"&&zi(_e)?Ti(_e,1):1;if(0===Ie)return Pt(255*Ve,255*Ve,255*Ve,1);var ct=Ve<=.5?Ve*(Ie+1):Ve+Ie-Ve*Ie,vt=2*Ve-ct,hn=yn(vt,ct,Me+1/3),Kt=yn(vt,ct,Me),en=yn(vt,ct,Me-1/3);return Pt(255*hn,255*Kt,255*en,ot)},Wi={hsl:bi,hsla:bi,rgb:kn,rgba:kn},ki=function(T,y){return pt_parse(T,Ju.create(y).parseComponentValue())},Hi={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},so={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(T,y){return y.map(function(O){if(Ci(O))switch(O.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Bn={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},xn=function(T,y){var O=pt_parse(T,y[0]),S=y[1];return S&&zi(S)?{color:O,stop:S}:{color:O,stop:null}},ui=function(T,y){var O=T[0],S=T[T.length-1];null===O.stop&&(O.stop=aa),null===S.stop&&(S.stop=Ls);for(var J=[],ie=0,_e=0;_e<T.length;_e++){var Me=T[_e].stop;if(null!==Me){var Ie=Ti(Me,y);J.push(Ie>ie?Ie:ie),ie=Ie}else J.push(null)}var Ve=null;for(_e=0;_e<J.length;_e++){var ot=J[_e];if(null===ot)null===Ve&&(Ve=_e);else if(null!==Ve){for(var ct=_e-Ve,hn=(ot-J[Ve-1])/(ct+1),Kt=1;Kt<=ct;Kt++)J[Ve+Kt-1]=hn*Kt;Ve=null}}return T.map(function(en,si){return{color:en.color,stop:Math.max(Math.min(1,J[si]/y),0)}})},Zo=function(T,y,O){var S="number"==typeof T?T:function(T,y,O){var S=y/2,J=O/2,ie=Ti(T[0],y)-S,_e=J-Ti(T[1],O);return(Math.atan2(_e,ie)+2*Math.PI)%(2*Math.PI)}(T,y,O),J=Math.abs(y*Math.sin(S))+Math.abs(O*Math.cos(S)),ie=y/2,_e=O/2,Me=J/2,Ie=Math.sin(S-Math.PI/2)*Me,Ve=Math.cos(S-Math.PI/2)*Me;return[J,ie-Ve,ie+Ve,_e-Ie,_e+Ie]},bo=function(T,y){return Math.sqrt(T*T+y*y)},as=function(T,y,O,S,J){return[[0,0],[0,y],[T,0],[T,y]].reduce(function(_e,Me){var ot=bo(O-Me[0],S-Me[1]);return(J?ot<_e.optimumDistance:ot>_e.optimumDistance)?{optimumCorner:Me,optimumDistance:ot}:_e},{optimumDistance:J?1/0:-1/0,optimumCorner:null}).optimumCorner},ul=function(T,y){var O=tt(180),S=[];return Ka(y).forEach(function(J,ie){if(0===ie){var _e=J[0];if(20===_e.type&&-1!==["top","left","right","bottom"].indexOf(_e.value))return void(O=ze(J));if(qe(_e))return void(O=(we_parse(T,_e)+tt(270))%tt(360))}var Me=xn(T,J);S.push(Me)}),{angle:O,stops:S,type:1}},eu="closest-side",lA="farthest-side",Yu="closest-corner",B0="farthest-corner",hf="ellipse",Q0="contain",cA=function(T,y){var O=0,S=3,J=[],ie=[];return Ka(y).forEach(function(_e,Me){var Ie=!0;if(0===Me?Ie=_e.reduce(function(ot,ct){if(Ci(ct))switch(ct.value){case"center":return ie.push(Gu),!1;case"top":case"left":return ie.push(aa),!1;case"right":case"bottom":return ie.push(Ls),!1}else if(zi(ct)||os(ct))return ie.push(ct),!1;return ot},Ie):1===Me&&(Ie=_e.reduce(function(ot,ct){if(Ci(ct))switch(ct.value){case"circle":return O=0,!1;case hf:return O=1,!1;case Q0:case eu:return S=0,!1;case lA:return S=1,!1;case Yu:return S=2,!1;case"cover":case B0:return S=3,!1}else if(os(ct)||zi(ct))return Array.isArray(S)||(S=[]),S.push(ct),!1;return ot},Ie)),Ie){var Ve=xn(T,_e);J.push(Ve)}}),{size:S,shape:O,stops:J,position:ie,type:2}},_p_parse=function(T,y){if(22===y.type){var O={url:y.value,type:0};return T.cache.addImage(y.value),O}if(18===y.type){var S=dA[y.name];if(typeof S>"u")throw new Error('Attempting to parse an unsupported image function "'+y.name+'"');return S(T,y.values)}throw new Error("Unsupported image type "+y.type)};for(var dA={"linear-gradient":function(T,y){var O=tt(180),S=[];return Ka(y).forEach(function(J,ie){if(0===ie){var _e=J[0];if(20===_e.type&&"to"===_e.value)return void(O=ze(J));if(qe(_e))return void(O=we_parse(T,_e))}var Me=xn(T,J);S.push(Me)}),{angle:O,stops:S,type:1}},"-moz-linear-gradient":ul,"-ms-linear-gradient":ul,"-o-linear-gradient":ul,"-webkit-linear-gradient":ul,"radial-gradient":function(T,y){var O=0,S=3,J=[],ie=[];return Ka(y).forEach(function(_e,Me){var Ie=!0;if(0===Me){var Ve=!1;Ie=_e.reduce(function(ct,vt){if(Ve)if(Ci(vt))switch(vt.value){case"center":return ie.push(Gu),ct;case"top":case"left":return ie.push(aa),ct;case"right":case"bottom":return ie.push(Ls),ct}else(zi(vt)||os(vt))&&ie.push(vt);else if(Ci(vt))switch(vt.value){case"circle":return O=0,!1;case hf:return O=1,!1;case"at":return Ve=!0,!1;case eu:return S=0,!1;case"cover":case lA:return S=1,!1;case Q0:case Yu:return S=2,!1;case B0:return S=3,!1}else if(os(vt)||zi(vt))return Array.isArray(S)||(S=[]),S.push(vt),!1;return ct},Ie)}if(Ie){var ot=xn(T,_e);J.push(ot)}}),{size:S,shape:O,stops:J,position:ie,type:2}},"-moz-radial-gradient":cA,"-ms-radial-gradient":cA,"-o-radial-gradient":cA,"-webkit-radial-gradient":cA,"-webkit-gradient":function(T,y){var O=tt(180),S=[],J=1;return Ka(y).forEach(function(Ie,Ve){var ot=Ie[0];if(0===Ve){if(Ci(ot)&&"linear"===ot.value)return void(J=1);if(Ci(ot)&&"radial"===ot.value)return void(J=2)}if(18===ot.type)if("from"===ot.name){var ct=pt_parse(T,ot.values[0]);S.push({stop:aa,color:ct})}else if("to"===ot.name)ct=pt_parse(T,ot.values[0]),S.push({stop:Ls,color:ct});else if("color-stop"===ot.name){var vt=ot.values.filter(Ms);if(2===vt.length){ct=pt_parse(T,vt[1]);var hn=vt[0];cl(hn)&&S.push({stop:{type:16,number:100*hn.number,flags:hn.flags},color:ct})}}}),1===J?{angle:(O+tt(180))%tt(360),stops:S,type:J}:{size:3,shape:0,stops:S,position:[],type:J}}},Af={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(T,y){if(0===y.length)return[];var O=y[0];return 20===O.type&&"none"===O.value?[]:y.filter(function(S){return Ms(S)&&function F0(T){return!(20===T.type&&"none"===T.value||18===T.type&&!dA[T.name])}(S)}).map(function(S){return _p_parse(T,S)})}},N0={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(T,y){return y.map(function(O){if(Ci(O))switch(O.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},fp={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(T,y){return Ka(y).map(function(O){return O.filter(zi)}).map(Ku)}},_f={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(T,y){return Ka(y).map(function(O){return O.filter(Ci).map(function(S){return S.value}).join(" ")}).map(bv)}},bv=function(T){switch(T){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;default:return 0}},gp=function(T){return T.AUTO="auto",T.CONTAIN="contain",T.COVER="cover",T}(gp||{}),vv={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(T,y){return Ka(y).map(function(O){return O.filter(wv)})}},wv=function(T){return Ci(T)||zi(T)},Qn=function(T){return{name:"border-"+T+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},mA=Qn("top"),io=Qn("right"),pA=Qn("bottom"),ff=Qn("left"),tu=function(T){return{name:"border-radius-"+T,initialValue:"0 0",prefix:!1,type:1,parse:function(y,O){return Ku(O.filter(zi))}}},em=tu("top-left"),hA=tu("top-right"),nu=tu("bottom-right"),gf=tu("bottom-left"),$u=function(T){return{name:"border-"+T+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(y,O){switch(O){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},xp=$u("top"),Qa=$u("right"),Fa=$u("bottom"),Na=$u("left"),ra=function(T){return{name:"border-"+T+"-width",initialValue:"0",type:0,prefix:!1,parse:function(y,O){return Vl(O)?O.number:0}}},xf=ra("top"),Z0=ra("right"),bf=ra("bottom"),D0=ra("left"),U0={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},AA={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(T,y){return"rtl"===y?1:0}},j0={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(T,y){return y.filter(Ci).reduce(function(O,S){return O|ec(S.value)},0)}},ec=function(T){switch(T){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},_A={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(T,y){switch(y){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},vf={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(T,y){return 20===y.type&&"normal"===y.value?0:17===y.type||15===y.type?y.number:0}},tc=function(T){return T.NORMAL="normal",T.STRICT="strict",T}(tc||{}),Vu={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(T,y){return"strict"===y?tc.STRICT:tc.NORMAL}},wf={name:"line-height",initialValue:"normal",prefix:!1,type:4},nc=function(T,y){return Ci(T)&&"normal"===T.value?1.2*y:17===T.type?y*T.number:zi(T)?Ti(T,y):y},yf={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(T,y){return 20===y.type&&"none"===y.value?null:_p_parse(T,y)}},ic={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(T,y){return"inside"===y?0:1}},dl={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(T,y){switch(y){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;default:return-1}}},In=function(T){return{name:"margin-"+T,initialValue:"0",prefix:!1,type:4}},Oo=In("top"),fA=In("right"),iu=In("bottom"),Wu=In("left"),Wn={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(T,y){return y.filter(Ci).map(function(O){switch(O.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;default:return 0}})}},oc={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(T,y){return"break-word"===y?"break-word":"normal"}},Ta=function(T){return{name:"padding-"+T,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},Cf=Ta("top"),Ps=Ta("right"),q0=Ta("bottom"),R0=Ta("left"),z0={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(T,y){switch(y){case"right":return 2;case"center":case"justify":return 1;default:return 0}}},Do={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(T,y){switch(y){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},Uo={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(T,y){return 1===y.length&&Wl(y[0],"none")?[]:Ka(y).map(function(O){for(var S={color:Hi.TRANSPARENT,offsetX:aa,offsetY:aa,blur:aa},J=0,ie=0;ie<O.length;ie++){var _e=O[ie];os(_e)?(0===J?S.offsetX=_e:1===J?S.offsetY=_e:S.blur=_e,J++):S.color=pt_parse(T,_e)}return S})}},jo={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(T,y){switch(y){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},H0={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(T,y){if(20===y.type&&"none"===y.value)return null;if(18===y.type){var O=bp[y.name];if(typeof O>"u")throw new Error('Attempting to parse an unsupported transform function "'+y.name+'"');return O(y.values)}return null}},bp={matrix:function(T){var y=T.filter(function(O){return 17===O.type}).map(function(O){return O.number});return 6===y.length?y:null},matrix3d:function(T){var y=T.filter(function(Ie){return 17===Ie.type}).map(function(Ie){return Ie.number});return 16===y.length?[y[0],y[1],y[4],y[5],y[12],y[13]]:null}},Tf={type:16,number:50,flags:4},K0=[Tf,Tf],G0={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(T,y){var O=y.filter(zi);return 2!==O.length?K0:[O[0],O[1]]}},Y0={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(T,y){switch(y){case"hidden":return 1;case"collapse":return 2;default:return 0}}},tm=function(T){return T.NORMAL="normal",T.BREAK_ALL="break-all",T.KEEP_ALL="keep-all",T}(tm||{}),xA={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(T,y){switch(y){case"break-all":return tm.BREAK_ALL;case"keep-all":return tm.KEEP_ALL;default:return tm.NORMAL}}},Qs={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(T,y){if(20===y.type)return{auto:!0,order:0};if(cl(y))return{auto:!1,order:y.number};throw new Error("Invalid z-index number parsed")}},bA={name:"time",parse:function(T,y){if(15===y.type)switch(y.unit.toLowerCase()){case"s":return 1e3*y.number;case"ms":return y.number}throw new Error("Unsupported time type")}},kf={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(T,y){return cl(y)?y.number:1}},rs={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Xu={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(T,y){return y.filter(Ci).map(function(O){switch(O.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(O){return 0!==O})}},ed={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(T,y){var O=[],S=[];return y.forEach(function(J){switch(J.type){case 20:case 0:O.push(J.value);break;case 17:O.push(J.number.toString());break;case 4:S.push(O.join(" ")),O.length=0}}),O.length&&S.push(O.join(" ")),S.map(function(J){return-1===J.indexOf(" ")?J:"'"+J+"'"})}},td={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},vp={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(T,y){return cl(y)?y.number:Ci(y)&&"bold"===y.value?700:400}},pa={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(T,y){return y.filter(Ci).map(function(O){return O.value})}},wp={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(T,y){switch(y){case"oblique":return"oblique";case"italic":return"italic";default:return"normal"}}},vo=function(T,y){return 0!=(T&y)},yp={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(T,y){if(0===y.length)return[];var O=y[0];return 20===O.type&&"none"===O.value?[]:y}},Cp={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(T,y){if(0===y.length)return null;var O=y[0];if(20===O.type&&"none"===O.value)return null;for(var S=[],J=y.filter(Vd),ie=0;ie<J.length;ie++){var _e=J[ie],Me=J[ie+1];if(20===_e.type){var Ie=Me&&cl(Me)?Me.number:1;S.push({counter:_e.value,increment:Ie})}}return S}},ou={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(T,y){if(0===y.length)return[];for(var O=[],S=y.filter(Vd),J=0;J<S.length;J++){var ie=S[J],_e=S[J+1];if(Ci(ie)&&"none"!==ie.value){var Me=_e&&cl(_e)?_e.number:0;O.push({counter:ie.value,reset:Me})}}return O}},Tp={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(T,y){return y.filter(Vl).map(function(O){return bA.parse(T,O)})}},bn={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(T,y){if(0===y.length)return null;var O=y[0];if(20===O.type&&"none"===O.value)return null;var S=[],J=y.filter(Ap);if(J.length%2!=0)return null;for(var ie=0;ie<J.length;ie+=2)S.push({open:J[ie].value,close:J[ie+1].value});return S}},Sf=function(T,y,O){if(!T)return"";var S=T[Math.min(y,T.length-1)];return S?O?S.open:S.close:""},yv={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(T,y){return 1===y.length&&Wl(y[0],"none")?[]:Ka(y).map(function(O){for(var S={color:255,offsetX:aa,offsetY:aa,blur:aa,spread:aa,inset:!1},J=0,ie=0;ie<O.length;ie++){var _e=O[ie];Wl(_e,"inset")?S.inset=!0:os(_e)?(0===J?S.offsetX=_e:1===J?S.offsetY=_e:2===J?S.blur=_e:S.spread=_e,J++):S.color=pt_parse(T,_e)}return S})}},Ef={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(T,y){var S=[];return y.filter(Ci).forEach(function(J){switch(J.value){case"stroke":S.push(1);break;case"fill":S.push(0);break;case"markers":S.push(2)}}),[0,1,2].forEach(function(J){-1===S.indexOf(J)&&S.push(J)}),S}},Of={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},If={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(T,y){return Vl(y)?y.number:0}},vA=function(){function T(y,O){var S,J;this.animationDuration=mn(y,Tp,O.animationDuration),this.backgroundClip=mn(y,so,O.backgroundClip),this.backgroundColor=mn(y,Bn,O.backgroundColor),this.backgroundImage=mn(y,Af,O.backgroundImage),this.backgroundOrigin=mn(y,N0,O.backgroundOrigin),this.backgroundPosition=mn(y,fp,O.backgroundPosition),this.backgroundRepeat=mn(y,_f,O.backgroundRepeat),this.backgroundSize=mn(y,vv,O.backgroundSize),this.borderTopColor=mn(y,mA,O.borderTopColor),this.borderRightColor=mn(y,io,O.borderRightColor),this.borderBottomColor=mn(y,pA,O.borderBottomColor),this.borderLeftColor=mn(y,ff,O.borderLeftColor),this.borderTopLeftRadius=mn(y,em,O.borderTopLeftRadius),this.borderTopRightRadius=mn(y,hA,O.borderTopRightRadius),this.borderBottomRightRadius=mn(y,nu,O.borderBottomRightRadius),this.borderBottomLeftRadius=mn(y,gf,O.borderBottomLeftRadius),this.borderTopStyle=mn(y,xp,O.borderTopStyle),this.borderRightStyle=mn(y,Qa,O.borderRightStyle),this.borderBottomStyle=mn(y,Fa,O.borderBottomStyle),this.borderLeftStyle=mn(y,Na,O.borderLeftStyle),this.borderTopWidth=mn(y,xf,O.borderTopWidth),this.borderRightWidth=mn(y,Z0,O.borderRightWidth),this.borderBottomWidth=mn(y,bf,O.borderBottomWidth),this.borderLeftWidth=mn(y,D0,O.borderLeftWidth),this.boxShadow=mn(y,yv,O.boxShadow),this.color=mn(y,U0,O.color),this.direction=mn(y,AA,O.direction),this.display=mn(y,j0,O.display),this.float=mn(y,_A,O.cssFloat),this.fontFamily=mn(y,ed,O.fontFamily),this.fontSize=mn(y,td,O.fontSize),this.fontStyle=mn(y,wp,O.fontStyle),this.fontVariant=mn(y,pa,O.fontVariant),this.fontWeight=mn(y,vp,O.fontWeight),this.letterSpacing=mn(y,vf,O.letterSpacing),this.lineBreak=mn(y,Vu,O.lineBreak),this.lineHeight=mn(y,wf,O.lineHeight),this.listStyleImage=mn(y,yf,O.listStyleImage),this.listStylePosition=mn(y,ic,O.listStylePosition),this.listStyleType=mn(y,dl,O.listStyleType),this.marginTop=mn(y,Oo,O.marginTop),this.marginRight=mn(y,fA,O.marginRight),this.marginBottom=mn(y,iu,O.marginBottom),this.marginLeft=mn(y,Wu,O.marginLeft),this.opacity=mn(y,kf,O.opacity);var ie=mn(y,Wn,O.overflow);this.overflowX=ie[0],this.overflowY=ie[ie.length>1?1:0],this.overflowWrap=mn(y,oc,O.overflowWrap),this.paddingTop=mn(y,Cf,O.paddingTop),this.paddingRight=mn(y,Ps,O.paddingRight),this.paddingBottom=mn(y,q0,O.paddingBottom),this.paddingLeft=mn(y,R0,O.paddingLeft),this.paintOrder=mn(y,Ef,O.paintOrder),this.position=mn(y,Do,O.position),this.textAlign=mn(y,z0,O.textAlign),this.textDecorationColor=mn(y,rs,null!==(S=O.textDecorationColor)&&void 0!==S?S:O.color),this.textDecorationLine=mn(y,Xu,null!==(J=O.textDecorationLine)&&void 0!==J?J:O.textDecoration),this.textShadow=mn(y,Uo,O.textShadow),this.textTransform=mn(y,jo,O.textTransform),this.transform=mn(y,H0,O.transform),this.transformOrigin=mn(y,G0,O.transformOrigin),this.visibility=mn(y,Y0,O.visibility),this.webkitTextStrokeColor=mn(y,Of,O.webkitTextStrokeColor),this.webkitTextStrokeWidth=mn(y,If,O.webkitTextStrokeWidth),this.wordBreak=mn(y,xA,O.wordBreak),this.zIndex=mn(y,Qs,O.zIndex)}return T.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&0===this.visibility},T.prototype.isTransparent=function(){return xt(this.backgroundColor)},T.prototype.isTransformed=function(){return null!==this.transform},T.prototype.isPositioned=function(){return 0!==this.position},T.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},T.prototype.isFloating=function(){return 0!==this.float},T.prototype.isInlineLevel=function(){return vo(this.display,4)||vo(this.display,33554432)||vo(this.display,268435456)||vo(this.display,536870912)||vo(this.display,67108864)||vo(this.display,134217728)},T}(),Mf=function T(y,O){this.content=mn(y,yp,O.content),this.quotes=mn(y,bn,O.quotes)},Lf=function T(y,O){this.counterIncrement=mn(y,Cp,O.counterIncrement),this.counterReset=mn(y,ou,O.counterReset)},mn=function(T,y,O){var S=new $d,J=null!==O&&typeof O<"u"?O.toString():y.initialValue;S.write(J);var ie=new Ju(S.read());switch(y.type){case 2:var _e=ie.parseComponentValue();return y.parse(T,Ci(_e)?_e.value:y.initialValue);case 0:return y.parse(T,ie.parseComponentValue());case 1:return y.parse(T,ie.parseComponentValues());case 4:return ie.parseComponentValue();case 3:switch(y.format){case"angle":return we_parse(T,ie.parseComponentValue());case"color":return pt_parse(T,ie.parseComponentValue());case"image":return _p_parse(T,ie.parseComponentValue());case"length":var Me=ie.parseComponentValue();return os(Me)?Me:aa;case"length-percentage":var Ie=ie.parseComponentValue();return zi(Ie)?Ie:aa;case"time":return bA.parse(T,ie.parseComponentValue())}}},kp=function(T,y){var O=function(T){switch(T.getAttribute("data-html2canvas-debug")){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}}(T);return 1===O||y===O},ss=function T(y,O){this.context=y,this.textNodes=[],this.elements=[],this.flags=0,kp(O,3),this.styles=new vA(y,window.getComputedStyle(O,null)),sm(O)&&(this.styles.animationDuration.some(function(S){return S>0})&&(O.style.animationDuration="0s"),null!==this.styles.transform&&(O.style.transform="none")),this.bounds=C(this.context,O),kp(O,4)&&(this.flags|=16)},wA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",nm=typeof Uint8Array>"u"?[]:new Uint8Array(256),Sp=0;Sp<64;Sp++)nm[wA.charCodeAt(Sp)]=Sp;for(var Uf=function(T,y,O){return T.slice?T.slice(y,O):new Uint16Array(Array.prototype.slice.call(T,y,O))},jf=function(){function T(y,O,S,J,ie,_e){this.initialValue=y,this.errorValue=O,this.highStart=S,this.highValueIndex=J,this.index=ie,this.data=_e}return T.prototype.get=function(y){var O;if(y>=0){if(y<55296||y>56319&&y<=65535)return this.data[O=((O=this.index[y>>5])<<2)+(31&y)];if(y<=65535)return this.data[O=((O=this.index[2048+(y-55296>>5)])<<2)+(31&y)];if(y<this.highStart)return O=this.index[O=2080+(y>>11)],this.data[O=((O=this.index[O+=y>>5&63])<<2)+(31&y)];if(y<=1114111)return this.data[this.highValueIndex]}return this.errorValue},T}(),kA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",tx=typeof Uint8Array>"u"?[]:new Uint8Array(256),Op=0;Op<64;Op++)tx[kA.charCodeAt(Op)]=Op;var Hf=8,OA=9,Jf=11,Kf=12,ox=function(){for(var T=[],y=0;y<arguments.length;y++)T[y]=arguments[y];if(String.fromCodePoint)return String.fromCodePoint.apply(String,T);var O=T.length;if(!O)return"";for(var S=[],J=-1,ie="";++J<O;){var _e=T[J];_e<=65535?S.push(_e):S.push(55296+((_e-=65536)>>10),_e%1024+56320),(J+1===O||S.length>16384)&&(ie+=String.fromCharCode.apply(String,S),S.length=0)}return ie},ax=function(T,y){var O=function(T){var S,ie,_e,Me,Ie,y=.75*T.length,O=T.length,J=0;"="===T[T.length-1]&&(y--,"="===T[T.length-2]&&y--);var Ve=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(y):new Array(y),ot=Array.isArray(Ve)?Ve:new Uint8Array(Ve);for(S=0;S<O;S+=4)ie=nm[T.charCodeAt(S)],_e=nm[T.charCodeAt(S+1)],Me=nm[T.charCodeAt(S+2)],Ie=nm[T.charCodeAt(S+3)],ot[J++]=ie<<2|_e>>4,ot[J++]=(15&_e)<<4|Me>>2,ot[J++]=(3&Me)<<6|63&Ie;return Ve}(T),S=Array.isArray(O)?function(T){for(var y=T.length,O=[],S=0;S<y;S+=4)O.push(T[S+3]<<24|T[S+2]<<16|T[S+1]<<8|T[S]);return O}(O):new Uint32Array(O),J=Array.isArray(O)?function(T){for(var y=T.length,O=[],S=0;S<y;S+=2)O.push(T[S+1]<<8|T[S]);return O}(O):new Uint16Array(O),_e=Uf(J,12,S[4]/2),Me=2===S[5]?Uf(J,(24+S[4])/2):function(T,y,O){return T.slice?T.slice(y,O):new Uint32Array(Array.prototype.slice.call(T,y,O))}(S,Math.ceil((24+S[4])/4));return new jf(S[0],S[1],S[2],S[3],_e,Me)}("AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA="),MA=function(T){return ax.get(T)},rx=function(T,y,O){var S=O-2,J=y[S],ie=y[O-1],_e=y[O];if(2===ie&&3===_e)return"\xd7";if(2===ie||3===ie||4===ie||2===_e||3===_e||4===_e)return"\xf7";if(ie===Hf&&-1!==[Hf,OA,Jf,Kf].indexOf(_e)||(ie===Jf||ie===OA)&&(_e===OA||10===_e)||(ie===Kf||10===ie)&&10===_e||13===_e||5===_e||7===_e||1===ie)return"\xd7";if(13===ie&&14===_e){for(;5===J;)J=y[--S];if(14===J)return"\xd7"}if(15===ie&&15===_e){for(var Me=0;15===J;)Me++,J=y[--S];if(Me%2==0)return"\xd7"}return"\xf7"},Vf=function(T){var y=function(T){for(var y=[],O=0,S=T.length;O<S;){var J=T.charCodeAt(O++);if(J>=55296&&J<=56319&&O<S){var ie=T.charCodeAt(O++);56320==(64512&ie)?y.push(((1023&J)<<10)+(1023&ie)+65536):(y.push(J),O--)}else y.push(J)}return y}(T),O=y.length,S=0,J=0,ie=y.map(MA);return{next:function(){if(S>=O)return{done:!0,value:null};for(var _e="\xd7";S<O&&"\xd7"===(_e=rx(0,ie,++S)););if("\xd7"!==_e||S===O){var Me=ox.apply(null,y.slice(J,S));return J=S,{value:Me,done:!1}}return{done:!0,value:null}}}},Wf=function(T){return 0===T[0]&&255===T[1]&&0===T[2]&&255===T[3]},Mp=function(T,y,O,S,J){var ie="http://www.w3.org/2000/svg",_e=document.createElementNS(ie,"svg"),Me=document.createElementNS(ie,"foreignObject");return _e.setAttributeNS(null,"width",T.toString()),_e.setAttributeNS(null,"height",y.toString()),Me.setAttributeNS(null,"width","100%"),Me.setAttributeNS(null,"height","100%"),Me.setAttributeNS(null,"x",O.toString()),Me.setAttributeNS(null,"y",S.toString()),Me.setAttributeNS(null,"externalResourcesRequired","true"),_e.appendChild(Me),Me.appendChild(J),_e},BA=function(T){return new Promise(function(y,O){var S=new Image;S.onload=function(){return y(S)},S.onerror=O,S.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(T))})},ha={get SUPPORT_RANGE_BOUNDS(){var T=function(T){if(T.createRange){var O=T.createRange();if(O.getBoundingClientRect){var S=T.createElement("boundtest");S.style.height="123px",S.style.display="block",T.body.appendChild(S),O.selectNode(S);var J=O.getBoundingClientRect(),ie=Math.round(J.height);if(T.body.removeChild(S),123===ie)return!0}}return!1}(document);return Object.defineProperty(ha,"SUPPORT_RANGE_BOUNDS",{value:T}),T},get SUPPORT_WORD_BREAKING(){var T=ha.SUPPORT_RANGE_BOUNDS&&function(T){var y=T.createElement("boundtest");y.style.width="50px",y.style.display="block",y.style.fontSize="12px",y.style.letterSpacing="0px",y.style.wordSpacing="0px",T.body.appendChild(y);var O=T.createRange();y.innerHTML="function"==typeof"".repeat?"&#128104;".repeat(10):"";var S=y.firstChild,J=_(S.data).map(function(Ie){return x(Ie)}),ie=0,_e={},Me=J.every(function(Ie,Ve){O.setStart(S,ie),O.setEnd(S,ie+Ie.length);var ot=O.getBoundingClientRect();ie+=Ie.length;var ct=ot.x>_e.x||ot.y>_e.y;return _e=ot,0===Ve||ct});return T.body.removeChild(y),Me}(document);return Object.defineProperty(ha,"SUPPORT_WORD_BREAKING",{value:T}),T},get SUPPORT_SVG_DRAWING(){var T=function(T){var y=new Image,O=T.createElement("canvas"),S=O.getContext("2d");if(!S)return!1;y.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{S.drawImage(y,0,0),O.toDataURL()}catch{return!1}return!0}(document);return Object.defineProperty(ha,"SUPPORT_SVG_DRAWING",{value:T}),T},get SUPPORT_FOREIGNOBJECT_DRAWING(){var T="function"==typeof Array.from&&"function"==typeof window.fetch?function(T){var y=T.createElement("canvas"),O=100;y.width=O,y.height=O;var S=y.getContext("2d");if(!S)return Promise.reject(!1);S.fillStyle="rgb(0, 255, 0)",S.fillRect(0,0,O,O);var J=new Image,ie=y.toDataURL();J.src=ie;var _e=Mp(O,O,0,0,J);return S.fillStyle="red",S.fillRect(0,0,O,O),BA(_e).then(function(Me){S.drawImage(Me,0,0);var Ie=S.getImageData(0,0,O,O).data;S.fillStyle="red",S.fillRect(0,0,O,O);var Ve=T.createElement("div");return Ve.style.backgroundImage="url("+ie+")",Ve.style.height=O+"px",Wf(Ie)?BA(Mp(O,O,0,0,Ve)):Promise.reject(!1)}).then(function(Me){return S.drawImage(Me,0,0),Wf(S.getImageData(0,0,O,O).data)}).catch(function(){return!1})}(document):Promise.resolve(!1);return Object.defineProperty(ha,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:T}),T},get SUPPORT_CORS_IMAGES(){var T=typeof(new Image).crossOrigin<"u";return Object.defineProperty(ha,"SUPPORT_CORS_IMAGES",{value:T}),T},get SUPPORT_RESPONSE_TYPE(){var T="string"==typeof(new XMLHttpRequest).responseType;return Object.defineProperty(ha,"SUPPORT_RESPONSE_TYPE",{value:T}),T},get SUPPORT_CORS_XHR(){var T="withCredentials"in new XMLHttpRequest;return Object.defineProperty(ha,"SUPPORT_CORS_XHR",{value:T}),T},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var T=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(ha,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:T}),T}},pl=function T(y,O){this.text=y,this.bounds=O},Lp=function(T,y){var O=y.ownerDocument;if(O){var S=O.createElement("html2canvaswrapper");S.appendChild(y.cloneNode(!0));var J=y.parentNode;if(J){J.replaceChild(S,y);var ie=C(T,S);return S.firstChild&&J.replaceChild(S.firstChild,S),ie}}return d.EMPTY},Bp=function(T,y,O){var S=T.ownerDocument;if(!S)throw new Error("Node has no owner document");var J=S.createRange();return J.setStart(T,y),J.setEnd(T,y+O),J},lc=function(T){if(ha.SUPPORT_NATIVE_TEXT_SEGMENTATION){var y=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(y.segment(T)).map(function(O){return O.segment})}return function(T){for(var S,y=Vf(T),O=[];!(S=y.next()).done;)S.value&&O.push(S.value.slice());return O}(T)},cc=function(T,y){return 0!==y.letterSpacing?lc(T):function(T,y){if(ha.SUPPORT_NATIVE_TEXT_SEGMENTATION){var O=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(O.segment(T)).map(function(S){return S.segment})}return PA(T,y)}(T,y)},Zs=[32,160,4961,65792,65793,4153,4241],PA=function(T,y){for(var J,O=function(T,y){var O=_(T),S=Xh(O,y),J=S[0],ie=S[1],_e=S[2],Me=O.length,Ie=0,Ve=0;return{next:function(){if(Ve>=Me)return{done:!0,value:null};for(var ot=qn;Ve<Me&&(ot=Wh(O,ie,J,++Ve,_e))===qn;);if(ot!==qn||Ve===Me){var ct=new eA(O,ot,Ie,Ve);return Ie=Ve,{value:ct,done:!1}}return{done:!0,value:null}}}}(T,{lineBreak:y.lineBreak,wordBreak:"break-word"===y.overflowWrap?"break-word":y.wordBreak}),S=[],ie=function(){if(J.value){var _e=J.value.slice(),Me=_(_e),Ie="";Me.forEach(function(Ve){-1===Zs.indexOf(Ve)?Ie+=x(Ve):(Ie.length&&S.push(Ie),S.push(x(Ve)),Ie="")}),Ie.length&&S.push(Ie)}};!(J=O.next()).done;)ie();return S},uc=function T(y,O,S){this.text=Jt(O.data,S.textTransform),this.textBounds=function(T,y,O,S){var J=cc(y,O),ie=[],_e=0;return J.forEach(function(Me){if(O.textDecorationLine.length||Me.trim().length>0)if(ha.SUPPORT_RANGE_BOUNDS){var Ie=Bp(S,_e,Me.length).getClientRects();if(Ie.length>1){var Ve=lc(Me),ot=0;Ve.forEach(function(vt){ie.push(new pl(vt,d.fromDOMRectList(T,Bp(S,ot+_e,vt.length).getClientRects()))),ot+=vt.length})}else ie.push(new pl(Me,d.fromDOMRectList(T,Ie)))}else{var ct=S.splitText(Me.length);ie.push(new pl(Me,Lp(T,S))),S=ct}else ha.SUPPORT_RANGE_BOUNDS||(S=S.splitText(Me.length));_e+=Me.length}),ie}(y,this.text,S,O)},Jt=function(T,y){switch(y){case 1:return T.toLowerCase();case 3:return T.replace(hl,dc);case 2:return T.toUpperCase();default:return T}},hl=/(^|\s|:|-|\(|\))([a-z])/g,dc=function(T,y,O){return T.length>0?y+O.toUpperCase():T},Xf=function(T){function y(O,S){var J=T.call(this,O,S)||this;return J.src=S.currentSrc||S.src,J.intrinsicWidth=S.naturalWidth,J.intrinsicHeight=S.naturalHeight,J.context.cache.addImage(J.src),J}return I(y,T),y}(ss),Al=function(T){function y(O,S){var J=T.call(this,O,S)||this;return J.canvas=S,J.intrinsicWidth=S.width,J.intrinsicHeight=S.height,J}return I(y,T),y}(ss),Pp=function(T){function y(O,S){var J=T.call(this,O,S)||this,ie=new XMLSerializer,_e=C(O,S);return S.setAttribute("width",_e.width+"px"),S.setAttribute("height",_e.height+"px"),J.svg="data:image/svg+xml,"+encodeURIComponent(ie.serializeToString(S)),J.intrinsicWidth=S.width.baseVal.value,J.intrinsicHeight=S.height.baseVal.value,J.context.cache.addImage(J.svg),J}return I(y,T),y}(ss),eg=function(T){function y(O,S){var J=T.call(this,O,S)||this;return J.value=S.value,J}return I(y,T),y}(ss),us=function(T){function y(O,S){var J=T.call(this,O,S)||this;return J.start=S.start,J.reversed="boolean"==typeof S.reversed&&!0===S.reversed,J}return I(y,T),y}(ss),tg=[{type:15,flags:0,unit:"px",number:3}],Zr=[{type:16,flags:0,number:50}],ad="checkbox",Qp="radio",ng="password",Fp=707406591,au=function(T){function y(O,S){var J=T.call(this,O,S)||this;switch(J.type=S.type.toLowerCase(),J.checked=S.checked,J.value=function(T){var y=T.type===ng?new Array(T.value.length+1).join("\u2022"):T.value;return 0===y.length?T.placeholder||"":y}(S),(J.type===ad||J.type===Qp)&&(J.styles.backgroundColor=3739148031,J.styles.borderTopColor=J.styles.borderRightColor=J.styles.borderBottomColor=J.styles.borderLeftColor=2779096575,J.styles.borderTopWidth=J.styles.borderRightWidth=J.styles.borderBottomWidth=J.styles.borderLeftWidth=1,J.styles.borderTopStyle=J.styles.borderRightStyle=J.styles.borderBottomStyle=J.styles.borderLeftStyle=1,J.styles.backgroundClip=[0],J.styles.backgroundOrigin=[0],J.bounds=function(T){return T.width>T.height?new d(T.left+(T.width-T.height)/2,T.top,T.height,T.height):T.width<T.height?new d(T.left,T.top+(T.height-T.width)/2,T.width,T.width):T}(J.bounds)),J.type){case ad:J.styles.borderTopRightRadius=J.styles.borderTopLeftRadius=J.styles.borderBottomRightRadius=J.styles.borderBottomLeftRadius=tg;break;case Qp:J.styles.borderTopRightRadius=J.styles.borderTopLeftRadius=J.styles.borderBottomRightRadius=J.styles.borderBottomLeftRadius=Zr}return J}return I(y,T),y}(ss),im=function(T){function y(O,S){var J=T.call(this,O,S)||this,ie=S.options[S.selectedIndex||0];return J.value=ie&&ie.text||"",J}return I(y,T),y}(ss),om=function(T){function y(O,S){var J=T.call(this,O,S)||this;return J.value=S.value,J}return I(y,T),y}(ss),Np=function(T){function y(O,S){var J=T.call(this,O,S)||this;J.src=S.src,J.width=parseInt(S.width,10)||0,J.height=parseInt(S.height,10)||0,J.backgroundColor=J.styles.backgroundColor;try{if(S.contentWindow&&S.contentWindow.document&&S.contentWindow.document.documentElement){J.tree=FA(O,S.contentWindow.document.documentElement);var ie=S.contentWindow.document.documentElement?ki(O,getComputedStyle(S.contentWindow.document.documentElement).backgroundColor):Hi.TRANSPARENT,_e=S.contentWindow.document.body?ki(O,getComputedStyle(S.contentWindow.document.body).backgroundColor):Hi.TRANSPARENT;J.backgroundColor=xt(ie)?xt(_e)?J.styles.backgroundColor:_e:ie}}catch{}return J}return I(y,T),y}(ss),am=["OL","UL","MENU"],rm=function(T,y,O,S){for(var J=y.firstChild,ie=void 0;J;J=ie)if(ie=J.nextSibling,og(J)&&J.data.trim().length>0)O.textNodes.push(new uc(T,J,O.styles));else if(rd(J))if(ZA(J)&&J.assignedNodes)J.assignedNodes().forEach(function(Me){return rm(T,Me,O,S)});else{var _e=QA(T,J);_e.styles.isVisible()&&(sx(J,_e,S)?_e.flags|=4:ig(_e.styles)&&(_e.flags|=2),-1!==am.indexOf(J.tagName)&&(_e.flags|=8),O.elements.push(_e),J.shadowRoot?rm(T,J.shadowRoot,_e,S):!Dp(J)&&!ld(J)&&!cm(J)&&rm(T,J,_e,S))}},QA=function(T,y){return cd(y)?new Xf(T,y):lg(y)?new Al(T,y):ld(y)?new Pp(T,y):ag(y)?new eg(T,y):rg(y)?new us(T,y):sg(y)?new au(T,y):cm(y)?new im(T,y):Dp(y)?new om(T,y):cg(y)?new Np(T,y):new ss(T,y)},FA=function(T,y){var O=QA(T,y);return O.flags|=4,rm(T,y,O,O),O},sx=function(T,y,O){return y.styles.isPositionedWithZIndex()||y.styles.opacity<1||y.styles.isTransformed()||lm(T)&&O.styles.isTransparent()},ig=function(T){return T.isPositioned()||T.isFloating()},og=function(T){return T.nodeType===Node.TEXT_NODE},rd=function(T){return T.nodeType===Node.ELEMENT_NODE},sm=function(T){return rd(T)&&typeof T.style<"u"&&!sd(T)},sd=function(T){return"object"==typeof T.className},ag=function(T){return"LI"===T.tagName},rg=function(T){return"OL"===T.tagName},sg=function(T){return"INPUT"===T.tagName},ld=function(T){return"svg"===T.tagName},lm=function(T){return"BODY"===T.tagName},lg=function(T){return"CANVAS"===T.tagName},NA=function(T){return"VIDEO"===T.tagName},cd=function(T){return"IMG"===T.tagName},cg=function(T){return"IFRAME"===T.tagName},ug=function(T){return"STYLE"===T.tagName},Dp=function(T){return"TEXTAREA"===T.tagName},cm=function(T){return"SELECT"===T.tagName},ZA=function(T){return"SLOT"===T.tagName},DA=function(T){return T.tagName.indexOf("-")>0},mg=function(){function T(){this.counters={}}return T.prototype.getCounterValue=function(y){var O=this.counters[y];return O&&O.length?O[O.length-1]:1},T.prototype.getCounterValues=function(y){return this.counters[y]||[]},T.prototype.pop=function(y){var O=this;y.forEach(function(S){return O.counters[S].pop()})},T.prototype.parse=function(y){var O=this,S=y.counterIncrement,J=y.counterReset,ie=!0;null!==S&&S.forEach(function(Me){var Ie=O.counters[Me.counter];Ie&&0!==Me.increment&&(ie=!1,Ie.length||Ie.push(1),Ie[Math.max(0,Ie.length-1)]+=Me.increment)});var _e=[];return ie&&J.forEach(function(Me){var Ie=O.counters[Me.counter];_e.push(Me.counter),Ie||(Ie=O.counters[Me.counter]=[]),Ie.push(Me.reset)}),_e},T}(),UA={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},Up={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["\u0554","\u0553","\u0552","\u0551","\u0550","\u054f","\u054e","\u054d","\u054c","\u054b","\u054a","\u0549","\u0548","\u0547","\u0546","\u0545","\u0544","\u0543","\u0542","\u0541","\u0540","\u053f","\u053e","\u053d","\u053c","\u053b","\u053a","\u0539","\u0538","\u0537","\u0536","\u0535","\u0534","\u0533","\u0532","\u0531"]},lx={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["\u05d9\u05f3","\u05d8\u05f3","\u05d7\u05f3","\u05d6\u05f3","\u05d5\u05f3","\u05d4\u05f3","\u05d3\u05f3","\u05d2\u05f3","\u05d1\u05f3","\u05d0\u05f3","\u05ea","\u05e9","\u05e8","\u05e7","\u05e6","\u05e4","\u05e2","\u05e1","\u05e0","\u05de","\u05dc","\u05db","\u05d9\u05d8","\u05d9\u05d7","\u05d9\u05d6","\u05d8\u05d6","\u05d8\u05d5","\u05d9","\u05d8","\u05d7","\u05d6","\u05d5","\u05d4","\u05d3","\u05d2","\u05d1","\u05d0"]},cx={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["\u10f5","\u10f0","\u10ef","\u10f4","\u10ee","\u10ed","\u10ec","\u10eb","\u10ea","\u10e9","\u10e8","\u10e7","\u10e6","\u10e5","\u10e4","\u10f3","\u10e2","\u10e1","\u10e0","\u10df","\u10de","\u10dd","\u10f2","\u10dc","\u10db","\u10da","\u10d9","\u10d8","\u10d7","\u10f1","\u10d6","\u10d5","\u10d4","\u10d3","\u10d2","\u10d1","\u10d0"]},ud=function(T,y,O,S,J,ie){return T<y||T>O?mm(T,J,ie.length>0):S.integers.reduce(function(_e,Me,Ie){for(;T>=Me;)T-=Me,_e+=S.values[Ie];return _e},"")+ie},pg=function(T,y,O,S){var J="";do{O||T--,J=S(T)+J,T/=y}while(T*y>=y);return J},Io=function(T,y,O,S,J){var ie=O-y+1;return(T<0?"-":"")+(pg(Math.abs(T),ie,S,function(_e){return x(Math.floor(_e%ie)+y)})+J)},ru=function(T,y,O){void 0===O&&(O=". ");var S=y.length;return pg(Math.abs(T),S,!1,function(J){return y[Math.floor(J%S)]})+O},Ds=function(T,y,O,S,J,ie){if(T<-9999||T>9999)return mm(T,4,J.length>0);var _e=Math.abs(T),Me=J;if(0===_e)return y[0]+Me;for(var Ie=0;_e>0&&Ie<=4;Ie++){var Ve=_e%10;0===Ve&&vo(ie,1)&&""!==Me?Me=y[Ve]+Me:Ve>1||1===Ve&&0===Ie||1===Ve&&1===Ie&&vo(ie,2)||1===Ve&&1===Ie&&vo(ie,4)&&T>100||1===Ve&&Ie>1&&vo(ie,8)?Me=y[Ve]+(Ie>0?O[Ie-1]:"")+Me:1===Ve&&Ie>0&&(Me=O[Ie-1]+Me),_e=Math.floor(_e/10)}return(T<0?S:"")+Me},dm="\ub9c8\uc774\ub108\uc2a4",mm=function(T,y,O){var S=O?". ":"",J=O?"\u3001":"",ie=O?", ":"",_e=O?" ":"";switch(y){case 0:return"\u2022"+_e;case 1:return"\u25e6"+_e;case 2:return"\u25fe"+_e;case 5:var Me=Io(T,48,57,!0,S);return Me.length<4?"0"+Me:Me;case 4:return ru(T,"\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d",J);case 6:return ud(T,1,3999,UA,3,S).toLowerCase();case 7:return ud(T,1,3999,UA,3,S);case 8:return Io(T,945,969,!1,S);case 9:return Io(T,97,122,!1,S);case 10:return Io(T,65,90,!1,S);case 11:return Io(T,1632,1641,!0,S);case 12:case 49:return ud(T,1,9999,Up,3,S);case 35:return ud(T,1,9999,Up,3,S).toLowerCase();case 13:return Io(T,2534,2543,!0,S);case 14:case 30:return Io(T,6112,6121,!0,S);case 15:return ru(T,"\u5b50\u4e11\u5bc5\u536f\u8fb0\u5df3\u5348\u672a\u7533\u9149\u620c\u4ea5",J);case 16:return ru(T,"\u7532\u4e59\u4e19\u4e01\u620a\u5df1\u5e9a\u8f9b\u58ec\u7678",J);case 17:case 48:return Ds(T,"\u96f6\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u5341\u767e\u5343\u842c","\u8ca0",J,14);case 47:return Ds(T,"\u96f6\u58f9\u8cb3\u53c3\u8086\u4f0d\u9678\u67d2\u634c\u7396","\u62fe\u4f70\u4edf\u842c","\u8ca0",J,15);case 42:return Ds(T,"\u96f6\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u5341\u767e\u5343\u842c","\u8d1f",J,14);case 41:return Ds(T,"\u96f6\u58f9\u8d30\u53c1\u8086\u4f0d\u9646\u67d2\u634c\u7396","\u62fe\u4f70\u4edf\u842c","\u8d1f",J,15);case 26:return Ds(T,"\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u5341\u767e\u5343\u4e07","\u30de\u30a4\u30ca\u30b9",J,0);case 25:return Ds(T,"\u96f6\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d","\u62fe\u767e\u5343\u4e07","\u30de\u30a4\u30ca\u30b9",J,7);case 31:return Ds(T,"\uc601\uc77c\uc774\uc0bc\uc0ac\uc624\uc721\uce60\ud314\uad6c","\uc2ed\ubc31\ucc9c\ub9cc",dm,ie,7);case 33:return Ds(T,"\u96f6\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u5341\u767e\u5343\u842c",dm,ie,0);case 32:return Ds(T,"\u96f6\u58f9\u8cb3\u53c3\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u62fe\u767e\u5343",dm,ie,7);case 18:return Io(T,2406,2415,!0,S);case 20:return ud(T,1,19999,cx,3,S);case 21:return Io(T,2790,2799,!0,S);case 22:return Io(T,2662,2671,!0,S);case 22:return ud(T,1,10999,lx,3,S);case 23:return ru(T,"\u3042\u3044\u3046\u3048\u304a\u304b\u304d\u304f\u3051\u3053\u3055\u3057\u3059\u305b\u305d\u305f\u3061\u3064\u3066\u3068\u306a\u306b\u306c\u306d\u306e\u306f\u3072\u3075\u3078\u307b\u307e\u307f\u3080\u3081\u3082\u3084\u3086\u3088\u3089\u308a\u308b\u308c\u308d\u308f\u3090\u3091\u3092\u3093");case 24:return ru(T,"\u3044\u308d\u306f\u306b\u307b\u3078\u3068\u3061\u308a\u306c\u308b\u3092\u308f\u304b\u3088\u305f\u308c\u305d\u3064\u306d\u306a\u3089\u3080\u3046\u3090\u306e\u304a\u304f\u3084\u307e\u3051\u3075\u3053\u3048\u3066\u3042\u3055\u304d\u3086\u3081\u307f\u3057\u3091\u3072\u3082\u305b\u3059");case 27:return Io(T,3302,3311,!0,S);case 28:return ru(T,"\u30a2\u30a4\u30a6\u30a8\u30aa\u30ab\u30ad\u30af\u30b1\u30b3\u30b5\u30b7\u30b9\u30bb\u30bd\u30bf\u30c1\u30c4\u30c6\u30c8\u30ca\u30cb\u30cc\u30cd\u30ce\u30cf\u30d2\u30d5\u30d8\u30db\u30de\u30df\u30e0\u30e1\u30e2\u30e4\u30e6\u30e8\u30e9\u30ea\u30eb\u30ec\u30ed\u30ef\u30f0\u30f1\u30f2\u30f3",J);case 29:return ru(T,"\u30a4\u30ed\u30cf\u30cb\u30db\u30d8\u30c8\u30c1\u30ea\u30cc\u30eb\u30f2\u30ef\u30ab\u30e8\u30bf\u30ec\u30bd\u30c4\u30cd\u30ca\u30e9\u30e0\u30a6\u30f0\u30ce\u30aa\u30af\u30e4\u30de\u30b1\u30d5\u30b3\u30a8\u30c6\u30a2\u30b5\u30ad\u30e6\u30e1\u30df\u30b7\u30f1\u30d2\u30e2\u30bb\u30b9",J);case 34:return Io(T,3792,3801,!0,S);case 37:return Io(T,6160,6169,!0,S);case 38:return Io(T,4160,4169,!0,S);case 39:return Io(T,2918,2927,!0,S);case 40:return Io(T,1776,1785,!0,S);case 43:return Io(T,3046,3055,!0,S);case 44:return Io(T,3174,3183,!0,S);case 45:return Io(T,3664,3673,!0,S);case 46:return Io(T,3872,3881,!0,S);default:return Io(T,48,57,!0,S)}},fg="data-html2canvas-ignore",gg=function(){function T(y,O,S){if(this.context=y,this.options=S,this.scrolledElements=[],this.referenceElement=O,this.counters=new mg,this.quoteDepth=0,!O.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(O.ownerDocument.documentElement,!1)}return T.prototype.toIFrame=function(y,O){var S=this,J=jp(y,O);if(!J.contentWindow)return Promise.reject("Unable to find iframe window");var ie=y.defaultView.pageXOffset,_e=y.defaultView.pageYOffset,Me=J.contentWindow,Ie=Me.document,Ve=vi(J).then(function(){return h(S,void 0,void 0,function(){var ot,ct;return U(this,function(vt){switch(vt.label){case 0:return this.scrolledElements.forEach(Us),Me&&(Me.scrollTo(O.left,O.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(Me.scrollY!==O.top||Me.scrollX!==O.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(Me.scrollX-O.left,Me.scrollY-O.top,0,0))),ot=this.options.onclone,typeof(ct=this.clonedReferenceElement)>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:Ie.fonts&&Ie.fonts.ready?[4,Ie.fonts.ready]:[3,2];case 1:vt.sent(),vt.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,jA(Ie)]:[3,4];case 3:vt.sent(),vt.label=4;case 4:return"function"==typeof ot?[2,Promise.resolve().then(function(){return ot(Ie,ct)}).then(function(){return J})]:[2,J]}})})});return Ie.open(),Ie.write(xg(document.doctype)+"<html></html>"),Za(this.referenceElement.ownerDocument,ie,_e),Ie.replaceChild(Ie.adoptNode(this.documentElement),Ie.documentElement),Ie.close(),Ve},T.prototype.createElementClone=function(y){if(kp(y,2),lg(y))return this.createCanvasClone(y);if(NA(y))return this.createVideoClone(y);if(ug(y))return this.createStyleClone(y);var O=y.cloneNode(!1);return cd(O)&&(cd(y)&&y.currentSrc&&y.currentSrc!==y.src&&(O.src=y.currentSrc,O.srcset=""),"lazy"===O.loading&&(O.loading="eager")),DA(O)?this.createCustomElementClone(O):O},T.prototype.createCustomElementClone=function(y){var O=document.createElement("html2canvascustomelement");return qA(y.style,O),O},T.prototype.createStyleClone=function(y){try{var O=y.sheet;if(O&&O.cssRules){var S=[].slice.call(O.cssRules,0).reduce(function(ie,_e){return _e&&"string"==typeof _e.cssText?ie+_e.cssText:ie},""),J=y.cloneNode(!1);return J.textContent=S,J}}catch(ie){if(this.context.logger.error("Unable to access cssRules property",ie),"SecurityError"!==ie.name)throw ie}return y.cloneNode(!1)},T.prototype.createCanvasClone=function(y){var O;if(this.options.inlineImages&&y.ownerDocument){var S=y.ownerDocument.createElement("img");try{return S.src=y.toDataURL(),S}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",y)}}var J=y.cloneNode(!1);try{J.width=y.width,J.height=y.height;var ie=y.getContext("2d"),_e=J.getContext("2d");if(_e)if(!this.options.allowTaint&&ie)_e.putImageData(ie.getImageData(0,0,y.width,y.height),0,0);else{var Me=null!==(O=y.getContext("webgl2"))&&void 0!==O?O:y.getContext("webgl");if(Me){var Ie=Me.getContextAttributes();!1===Ie?.preserveDrawingBuffer&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",y)}_e.drawImage(y,0,0)}return J}catch{this.context.logger.info("Unable to clone canvas as it is tainted",y)}return J},T.prototype.createVideoClone=function(y){var O=y.ownerDocument.createElement("canvas");O.width=y.offsetWidth,O.height=y.offsetHeight;var S=O.getContext("2d");try{return S&&(S.drawImage(y,0,0,O.width,O.height),this.options.allowTaint||S.getImageData(0,0,O.width,O.height)),O}catch{this.context.logger.info("Unable to clone video as it is tainted",y)}var J=y.ownerDocument.createElement("canvas");return J.width=y.offsetWidth,J.height=y.offsetHeight,J},T.prototype.appendChildNode=function(y,O,S){(!rd(O)||!function(T){return"SCRIPT"===T.tagName}(O)&&!O.hasAttribute(fg)&&("function"!=typeof this.options.ignoreElements||!this.options.ignoreElements(O)))&&(!this.options.copyStyles||!rd(O)||!ug(O))&&y.appendChild(this.cloneNode(O,S))},T.prototype.cloneChildNodes=function(y,O,S){for(var J=this,ie=y.shadowRoot?y.shadowRoot.firstChild:y.firstChild;ie;ie=ie.nextSibling)if(rd(ie)&&ZA(ie)&&"function"==typeof ie.assignedNodes){var _e=ie.assignedNodes();_e.length&&_e.forEach(function(Me){return J.appendChildNode(O,Me,S)})}else this.appendChildNode(O,ie,S)},T.prototype.cloneNode=function(y,O){if(og(y))return document.createTextNode(y.data);if(!y.ownerDocument)return y.cloneNode(!1);var S=y.ownerDocument.defaultView;if(S&&rd(y)&&(sm(y)||sd(y))){var J=this.createElementClone(y);J.style.transitionProperty="none";var ie=S.getComputedStyle(y),_e=S.getComputedStyle(y,":before"),Me=S.getComputedStyle(y,":after");this.referenceElement===y&&sm(J)&&(this.clonedReferenceElement=J),lm(J)&&dx(J);var Ie=this.counters.parse(new Lf(this.context,ie)),Ve=this.resolvePseudoContent(y,J,_e,hc.BEFORE);DA(y)&&(O=!0),NA(y)||this.cloneChildNodes(y,J,O),Ve&&J.insertBefore(Ve,J.firstChild);var ot=this.resolvePseudoContent(y,J,Me,hc.AFTER);return ot&&J.appendChild(ot),this.counters.pop(Ie),(ie&&(this.options.copyStyles||sd(y))&&!cg(y)||O)&&qA(ie,J),(0!==y.scrollTop||0!==y.scrollLeft)&&this.scrolledElements.push([J,y.scrollLeft,y.scrollTop]),(Dp(y)||cm(y))&&(Dp(J)||cm(J))&&(J.value=y.value),J}return y.cloneNode(!1)},T.prototype.resolvePseudoContent=function(y,O,S,J){var ie=this;if(S){var _e=S.content,Me=O.ownerDocument;if(Me&&_e&&"none"!==_e&&"-moz-alt-content"!==_e&&"none"!==S.display){this.counters.parse(new Lf(this.context,S));var Ie=new Mf(this.context,S),Ve=Me.createElement("html2canvaspseudoelement");qA(S,Ve),Ie.content.forEach(function(ct){if(0===ct.type)Ve.appendChild(Me.createTextNode(ct.value));else if(22===ct.type){var vt=Me.createElement("img");vt.src=ct.value,vt.style.opacity="1",Ve.appendChild(vt)}else if(18===ct.type){if("attr"===ct.name){var hn=ct.values.filter(Ci);hn.length&&Ve.appendChild(Me.createTextNode(y.getAttribute(hn[0].value)||""))}else if("counter"===ct.name){var Kt=ct.values.filter(Ms),si=Kt[1];if((en=Kt[0])&&Ci(en)){var Tn=ie.counters.getCounterValue(en.value),vn=si&&Ci(si)?dl.parse(ie.context,si.value):3;Ve.appendChild(Me.createTextNode(mm(Tn,vn,!1)))}}else if("counters"===ct.name){var en,Pi=ct.values.filter(Ms),di=Pi[1];if(si=Pi[2],(en=Pi[0])&&Ci(en)){var Jn=ie.counters.getCounterValues(en.value),pn=si&&Ci(si)?dl.parse(ie.context,si.value):3,Ei=di&&0===di.type?di.value:"",Oi=Jn.map(function(rr){return mm(rr,pn,!1)}).join(Ei);Ve.appendChild(Me.createTextNode(Oi))}}}else if(20===ct.type)switch(ct.value){case"open-quote":Ve.appendChild(Me.createTextNode(Sf(Ie.quotes,ie.quoteDepth++,!0)));break;case"close-quote":Ve.appendChild(Me.createTextNode(Sf(Ie.quotes,--ie.quoteDepth,!1)));break;default:Ve.appendChild(Me.createTextNode(ct.value))}}),Ve.className=RA+" "+zA;var ot=J===hc.BEFORE?" "+RA:" "+zA;return sd(O)?O.className.baseValue+=ot:O.className+=ot,Ve}}},T.destroy=function(y){return!!y.parentNode&&(y.parentNode.removeChild(y),!0)},T}(),hc=function(T){return T[T.BEFORE=0]="BEFORE",T[T.AFTER=1]="AFTER",T}(hc||{}),jp=function(T,y){var O=T.createElement("iframe");return O.className="html2canvas-container",O.style.visibility="hidden",O.style.position="fixed",O.style.left="-10000px",O.style.top="0px",O.style.border="0",O.width=y.width.toString(),O.height=y.height.toString(),O.scrolling="no",O.setAttribute(fg,"true"),T.body.appendChild(O),O},Ac=function(T){return new Promise(function(y){T.complete?y():T.src?(T.onload=y,T.onerror=y):y()})},jA=function(T){return Promise.all([].slice.call(T.images,0).map(Ac))},vi=function(T){return new Promise(function(y,O){var S=T.contentWindow;if(!S)return O("No window assigned for iframe");var J=S.document;S.onload=T.onload=function(){S.onload=T.onload=null;var ie=setInterval(function(){J.body.childNodes.length>0&&"complete"===J.readyState&&(clearInterval(ie),y(T))},50)}})},ux=["all","d","content"],qA=function(T,y){for(var O=T.length-1;O>=0;O--){var S=T.item(O);-1===ux.indexOf(S)&&y.style.setProperty(S,T.getPropertyValue(S))}return y},xg=function(T){var y="";return T&&(y+="<!DOCTYPE ",T.name&&(y+=T.name),T.internalSubset&&(y+=T.internalSubset),T.publicId&&(y+='"'+T.publicId+'"'),T.systemId&&(y+='"'+T.systemId+'"'),y+=">"),y},Za=function(T,y,O){T&&T.defaultView&&(y!==T.defaultView.pageXOffset||O!==T.defaultView.pageYOffset)&&T.defaultView.scrollTo(y,O)},Us=function(T){var y=T[0],S=T[2];y.scrollLeft=T[1],y.scrollTop=S},RA="___html2canvas___pseudoelement_before",zA="___html2canvas___pseudoelement_after",vg='{\n    content: "" !important;\n    display: none !important;\n}',dx=function(T){mx(T,"."+RA+":before"+vg+"\n         ."+zA+":after"+vg)},mx=function(T,y){var O=T.ownerDocument;if(O){var S=O.createElement("style");S.textContent=y,T.appendChild(S)}},wg=function(){function T(){}return T.getOrigin=function(y){var O=T._link;return O?(O.href=y,O.href=O.href,O.protocol+O.hostname+O.port):"about:blank"},T.isSameOrigin=function(y){return T.getOrigin(y)===T._origin},T.setContext=function(y){T._link=y.document.createElement("a"),T._origin=T.getOrigin(y.location.href)},T._origin="about:blank",T}(),px=function(){function T(y,O){this.context=y,this._options=O,this._cache={}}return T.prototype.addImage=function(y){var O=Promise.resolve();return this.has(y)||(JA(y)||fx(y))&&(this._cache[y]=this.loadImage(y)).catch(function(){}),O},T.prototype.match=function(y){return this._cache[y]},T.prototype.loadImage=function(y){return h(this,void 0,void 0,function(){var O,S,J,ie,_e=this;return U(this,function(Me){switch(Me.label){case 0:return O=wg.isSameOrigin(y),S=!HA(y)&&!0===this._options.useCORS&&ha.SUPPORT_CORS_IMAGES&&!O,J=!HA(y)&&!O&&!JA(y)&&"string"==typeof this._options.proxy&&ha.SUPPORT_CORS_XHR&&!S,O||!1!==this._options.allowTaint||HA(y)||JA(y)||J||S?(ie=y,J?[4,this.proxy(ie)]:[3,2]):[2];case 1:ie=Me.sent(),Me.label=2;case 2:return this.context.logger.debug("Added image "+y.substring(0,256)),[4,new Promise(function(Ie,Ve){var ot=new Image;ot.onload=function(){return Ie(ot)},ot.onerror=Ve,(yg(ie)||S)&&(ot.crossOrigin="anonymous"),ot.src=ie,!0===ot.complete&&setTimeout(function(){return Ie(ot)},500),_e._options.imageTimeout>0&&setTimeout(function(){return Ve("Timed out ("+_e._options.imageTimeout+"ms) loading image")},_e._options.imageTimeout)})];case 3:return[2,Me.sent()]}})})},T.prototype.has=function(y){return typeof this._cache[y]<"u"},T.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},T.prototype.proxy=function(y){var O=this,S=this._options.proxy;if(!S)throw new Error("No proxy defined");var J=y.substring(0,256);return new Promise(function(ie,_e){var Me=ha.SUPPORT_RESPONSE_TYPE?"blob":"text",Ie=new XMLHttpRequest;Ie.onload=function(){if(200===Ie.status)if("text"===Me)ie(Ie.response);else{var ct=new FileReader;ct.addEventListener("load",function(){return ie(ct.result)},!1),ct.addEventListener("error",function(vt){return _e(vt)},!1),ct.readAsDataURL(Ie.response)}else _e("Failed to proxy resource "+J+" with status code "+Ie.status)},Ie.onerror=_e;var Ve=S.indexOf("?")>-1?"&":"?";if(Ie.open("GET",""+S+Ve+"url="+encodeURIComponent(y)+"&responseType="+Me),"text"!==Me&&Ie instanceof XMLHttpRequest&&(Ie.responseType=Me),O._options.imageTimeout){var ot=O._options.imageTimeout;Ie.timeout=ot,Ie.ontimeout=function(){return _e("Timed out ("+ot+"ms) proxying "+J)}}Ie.send()})},T}(),hx=/^data:image\/svg\+xml/i,Ax=/^data:image\/.*;base64,/i,_x=/^data:image\/.*/i,fx=function(T){return ha.SUPPORT_SVG_DRAWING||!gx(T)},HA=function(T){return _x.test(T)},yg=function(T){return Ax.test(T)},JA=function(T){return"blob"===T.substr(0,4)},gx=function(T){return"svg"===T.substr(-3).toLowerCase()||hx.test(T)},ln=function(){function T(y,O){this.type=0,this.x=y,this.y=O}return T.prototype.add=function(y,O){return new T(this.x+y,this.y+O)},T}(),Dr=function(T,y,O){return new ln(T.x+(y.x-T.x)*O,T.y+(y.y-T.y)*O)},wi=function(){function T(y,O,S,J){this.type=1,this.start=y,this.startControl=O,this.endControl=S,this.end=J}return T.prototype.subdivide=function(y,O){var S=Dr(this.start,this.startControl,y),J=Dr(this.startControl,this.endControl,y),ie=Dr(this.endControl,this.end,y),_e=Dr(S,J,y),Me=Dr(J,ie,y),Ie=Dr(_e,Me,y);return O?new T(this.start,S,_e,Ie):new T(Ie,Me,ie,this.end)},T.prototype.add=function(y,O){return new T(this.start.add(y,O),this.startControl.add(y,O),this.endControl.add(y,O),this.end.add(y,O))},T.prototype.reverse=function(){return new T(this.end,this.endControl,this.startControl,this.start)},T}(),Ur=function(T){return 1===T.type},Cg=function T(y){var O=y.styles,S=y.bounds,J=Xc(O.borderTopLeftRadius,S.width,S.height),ie=J[0],_e=J[1],Me=Xc(O.borderTopRightRadius,S.width,S.height),Ie=Me[0],Ve=Me[1],ot=Xc(O.borderBottomRightRadius,S.width,S.height),ct=ot[0],vt=ot[1],hn=Xc(O.borderBottomLeftRadius,S.width,S.height),Kt=hn[0],en=hn[1],si=[];si.push((ie+Ie)/S.width),si.push((Kt+ct)/S.width),si.push((_e+en)/S.height),si.push((Ve+vt)/S.height);var Tn=Math.max.apply(Math,si);Tn>1&&(ie/=Tn,_e/=Tn,Ie/=Tn,Ve/=Tn,ct/=Tn,vt/=Tn,Kt/=Tn,en/=Tn);var vn=S.width-Ie,Pi=S.height-vt,di=S.width-ct,Jn=S.height-en,pn=O.borderTopWidth,Ei=O.borderRightWidth,Oi=O.borderBottomWidth,Kn=O.borderLeftWidth,$o=Ti(O.paddingTop,y.bounds.width),rr=Ti(O.paddingRight,y.bounds.width),vr=Ti(O.paddingBottom,y.bounds.width),Xi=Ti(O.paddingLeft,y.bounds.width);this.topLeftBorderDoubleOuterBox=ie>0||_e>0?uo(S.left+Kn/3,S.top+pn/3,ie-Kn/3,_e-pn/3,Xn.TOP_LEFT):new ln(S.left+Kn/3,S.top+pn/3),this.topRightBorderDoubleOuterBox=ie>0||_e>0?uo(S.left+vn,S.top+pn/3,Ie-Ei/3,Ve-pn/3,Xn.TOP_RIGHT):new ln(S.left+S.width-Ei/3,S.top+pn/3),this.bottomRightBorderDoubleOuterBox=ct>0||vt>0?uo(S.left+di,S.top+Pi,ct-Ei/3,vt-Oi/3,Xn.BOTTOM_RIGHT):new ln(S.left+S.width-Ei/3,S.top+S.height-Oi/3),this.bottomLeftBorderDoubleOuterBox=Kt>0||en>0?uo(S.left+Kn/3,S.top+Jn,Kt-Kn/3,en-Oi/3,Xn.BOTTOM_LEFT):new ln(S.left+Kn/3,S.top+S.height-Oi/3),this.topLeftBorderDoubleInnerBox=ie>0||_e>0?uo(S.left+2*Kn/3,S.top+2*pn/3,ie-2*Kn/3,_e-2*pn/3,Xn.TOP_LEFT):new ln(S.left+2*Kn/3,S.top+2*pn/3),this.topRightBorderDoubleInnerBox=ie>0||_e>0?uo(S.left+vn,S.top+2*pn/3,Ie-2*Ei/3,Ve-2*pn/3,Xn.TOP_RIGHT):new ln(S.left+S.width-2*Ei/3,S.top+2*pn/3),this.bottomRightBorderDoubleInnerBox=ct>0||vt>0?uo(S.left+di,S.top+Pi,ct-2*Ei/3,vt-2*Oi/3,Xn.BOTTOM_RIGHT):new ln(S.left+S.width-2*Ei/3,S.top+S.height-2*Oi/3),this.bottomLeftBorderDoubleInnerBox=Kt>0||en>0?uo(S.left+2*Kn/3,S.top+Jn,Kt-2*Kn/3,en-2*Oi/3,Xn.BOTTOM_LEFT):new ln(S.left+2*Kn/3,S.top+S.height-2*Oi/3),this.topLeftBorderStroke=ie>0||_e>0?uo(S.left+Kn/2,S.top+pn/2,ie-Kn/2,_e-pn/2,Xn.TOP_LEFT):new ln(S.left+Kn/2,S.top+pn/2),this.topRightBorderStroke=ie>0||_e>0?uo(S.left+vn,S.top+pn/2,Ie-Ei/2,Ve-pn/2,Xn.TOP_RIGHT):new ln(S.left+S.width-Ei/2,S.top+pn/2),this.bottomRightBorderStroke=ct>0||vt>0?uo(S.left+di,S.top+Pi,ct-Ei/2,vt-Oi/2,Xn.BOTTOM_RIGHT):new ln(S.left+S.width-Ei/2,S.top+S.height-Oi/2),this.bottomLeftBorderStroke=Kt>0||en>0?uo(S.left+Kn/2,S.top+Jn,Kt-Kn/2,en-Oi/2,Xn.BOTTOM_LEFT):new ln(S.left+Kn/2,S.top+S.height-Oi/2),this.topLeftBorderBox=ie>0||_e>0?uo(S.left,S.top,ie,_e,Xn.TOP_LEFT):new ln(S.left,S.top),this.topRightBorderBox=Ie>0||Ve>0?uo(S.left+vn,S.top,Ie,Ve,Xn.TOP_RIGHT):new ln(S.left+S.width,S.top),this.bottomRightBorderBox=ct>0||vt>0?uo(S.left+di,S.top+Pi,ct,vt,Xn.BOTTOM_RIGHT):new ln(S.left+S.width,S.top+S.height),this.bottomLeftBorderBox=Kt>0||en>0?uo(S.left,S.top+Jn,Kt,en,Xn.BOTTOM_LEFT):new ln(S.left,S.top+S.height),this.topLeftPaddingBox=ie>0||_e>0?uo(S.left+Kn,S.top+pn,Math.max(0,ie-Kn),Math.max(0,_e-pn),Xn.TOP_LEFT):new ln(S.left+Kn,S.top+pn),this.topRightPaddingBox=Ie>0||Ve>0?uo(S.left+Math.min(vn,S.width-Ei),S.top+pn,vn>S.width+Ei?0:Math.max(0,Ie-Ei),Math.max(0,Ve-pn),Xn.TOP_RIGHT):new ln(S.left+S.width-Ei,S.top+pn),this.bottomRightPaddingBox=ct>0||vt>0?uo(S.left+Math.min(di,S.width-Kn),S.top+Math.min(Pi,S.height-Oi),Math.max(0,ct-Ei),Math.max(0,vt-Oi),Xn.BOTTOM_RIGHT):new ln(S.left+S.width-Ei,S.top+S.height-Oi),this.bottomLeftPaddingBox=Kt>0||en>0?uo(S.left+Kn,S.top+Math.min(Jn,S.height-Oi),Math.max(0,Kt-Kn),Math.max(0,en-Oi),Xn.BOTTOM_LEFT):new ln(S.left+Kn,S.top+S.height-Oi),this.topLeftContentBox=ie>0||_e>0?uo(S.left+Kn+Xi,S.top+pn+$o,Math.max(0,ie-(Kn+Xi)),Math.max(0,_e-(pn+$o)),Xn.TOP_LEFT):new ln(S.left+Kn+Xi,S.top+pn+$o),this.topRightContentBox=Ie>0||Ve>0?uo(S.left+Math.min(vn,S.width+Kn+Xi),S.top+pn+$o,vn>S.width+Kn+Xi?0:Ie-Kn+Xi,Ve-(pn+$o),Xn.TOP_RIGHT):new ln(S.left+S.width-(Ei+rr),S.top+pn+$o),this.bottomRightContentBox=ct>0||vt>0?uo(S.left+Math.min(di,S.width-(Kn+Xi)),S.top+Math.min(Pi,S.height+pn+$o),Math.max(0,ct-(Ei+rr)),vt-(Oi+vr),Xn.BOTTOM_RIGHT):new ln(S.left+S.width-(Ei+rr),S.top+S.height-(Oi+vr)),this.bottomLeftContentBox=Kt>0||en>0?uo(S.left+Kn+Xi,S.top+Jn,Math.max(0,Kt-(Kn+Xi)),en-(Oi+vr),Xn.BOTTOM_LEFT):new ln(S.left+Kn+Xi,S.top+S.height-(Oi+vr))},Xn=function(T){return T[T.TOP_LEFT=0]="TOP_LEFT",T[T.TOP_RIGHT=1]="TOP_RIGHT",T[T.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",T[T.BOTTOM_LEFT=3]="BOTTOM_LEFT",T}(Xn||{}),uo=function(T,y,O,S,J){var ie=(Math.sqrt(2)-1)/3*4,_e=O*ie,Me=S*ie,Ie=T+O,Ve=y+S;switch(J){case Xn.TOP_LEFT:return new wi(new ln(T,Ve),new ln(T,Ve-Me),new ln(Ie-_e,y),new ln(Ie,y));case Xn.TOP_RIGHT:return new wi(new ln(T,y),new ln(T+_e,y),new ln(Ie,Ve-Me),new ln(Ie,Ve));case Xn.BOTTOM_RIGHT:return new wi(new ln(Ie,y),new ln(Ie,y+Me),new ln(T+_e,Ve),new ln(T,Ve));default:return new wi(new ln(Ie,Ve),new ln(Ie-_e,Ve),new ln(T,y+Me),new ln(T,y))}},js=function(T){return[T.topLeftBorderBox,T.topRightBorderBox,T.bottomRightBorderBox,T.bottomLeftBorderBox]},md=function(T){return[T.topLeftPaddingBox,T.topRightPaddingBox,T.bottomRightPaddingBox,T.bottomLeftPaddingBox]},pm=function T(y,O,S){this.offsetX=y,this.offsetY=O,this.matrix=S,this.type=0,this.target=6},Mo=function T(y,O){this.path=y,this.target=O,this.type=1},Rp=function T(y){this.opacity=y,this.type=2,this.target=6},zp=function(T){return 1===T.type},GA=function(T,y){return T.length===y.length&&T.some(function(O,S){return O===y[S]})},YA=function T(y){this.element=y,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]},ms=function(){function T(y,O){if(this.container=y,this.parent=O,this.effects=[],this.curves=new Cg(this.container),this.container.styles.opacity<1&&this.effects.push(new Rp(this.container.styles.opacity)),null!==this.container.styles.transform&&this.effects.push(new pm(this.container.bounds.left+this.container.styles.transformOrigin[0].number,this.container.bounds.top+this.container.styles.transformOrigin[1].number,this.container.styles.transform)),0!==this.container.styles.overflowX){var _e=js(this.curves),Me=md(this.curves);GA(_e,Me)?this.effects.push(new Mo(_e,6)):(this.effects.push(new Mo(_e,2)),this.effects.push(new Mo(Me,4)))}}return T.prototype.getEffects=function(y){for(var O=-1===[2,3].indexOf(this.container.styles.position),S=this.parent,J=this.effects.slice(0);S;){var ie=S.effects.filter(function(Ie){return!zp(Ie)});if(O||0!==S.container.styles.position||!S.parent){if(J.unshift.apply(J,ie),O=-1===[2,3].indexOf(S.container.styles.position),0!==S.container.styles.overflowX){var _e=js(S.curves),Me=md(S.curves);GA(_e,Me)||J.unshift(new Mo(Me,6))}}else J.unshift.apply(J,ie);S=S.parent}return J.filter(function(Ie){return vo(Ie.target,y)})},T}(),Ai=function(T,y,O,S){T.container.elements.forEach(function(J){var ie=vo(J.flags,4),_e=vo(J.flags,2),Me=new ms(J,T);vo(J.styles.display,2048)&&S.push(Me);var Ie=vo(J.flags,8)?[]:S;if(ie||_e){var Ve=ie||J.styles.isPositioned()?O:y,ot=new YA(Me);if(J.styles.isPositioned()||J.styles.opacity<1||J.styles.isTransformed()){var ct=J.styles.zIndex.order;if(ct<0){var vt=0;Ve.negativeZIndex.some(function(Kt,en){return ct>Kt.element.container.styles.zIndex.order?(vt=en,!1):vt>0}),Ve.negativeZIndex.splice(vt,0,ot)}else if(ct>0){var hn=0;Ve.positiveZIndex.some(function(Kt,en){return ct>=Kt.element.container.styles.zIndex.order?(hn=en+1,!1):hn>0}),Ve.positiveZIndex.splice(hn,0,ot)}else Ve.zeroOrAutoZIndexOrTransformedOrOpacity.push(ot)}else J.styles.isFloating()?Ve.nonPositionedFloats.push(ot):Ve.nonPositionedInlineLevel.push(ot);Ai(Me,ot,ie?ot:O,Ie)}else J.styles.isInlineLevel()?y.inlineLevel.push(Me):y.nonInlineLevel.push(Me),Ai(Me,y,O,Ie);vo(J.flags,8)&&hm(J,Ie)})},hm=function(T,y){for(var O=T instanceof us?T.start:1,S=T instanceof us&&T.reversed,J=0;J<y.length;J++){var ie=y[J];ie.container instanceof eg&&"number"==typeof ie.container.value&&0!==ie.container.value&&(O=ie.container.value),ie.listValue=mm(O,ie.container.styles.listStyleType,!0),O+=S?-1:1}},Tg=function(T,y){switch(y){case 0:return jr(T.topLeftBorderBox,T.topLeftPaddingBox,T.topRightBorderBox,T.topRightPaddingBox);case 1:return jr(T.topRightBorderBox,T.topRightPaddingBox,T.bottomRightBorderBox,T.bottomRightPaddingBox);case 2:return jr(T.bottomRightBorderBox,T.bottomRightPaddingBox,T.bottomLeftBorderBox,T.bottomLeftPaddingBox);default:return jr(T.bottomLeftBorderBox,T.bottomLeftPaddingBox,T.topLeftBorderBox,T.topLeftPaddingBox)}},Jp=function(T,y){var O=[];return Ur(T)?O.push(T.subdivide(.5,!1)):O.push(T),Ur(y)?O.push(y.subdivide(.5,!0)):O.push(y),O},jr=function(T,y,O,S){var J=[];return Ur(T)?J.push(T.subdivide(.5,!1)):J.push(T),Ur(O)?J.push(O.subdivide(.5,!0)):J.push(O),Ur(S)?J.push(S.subdivide(.5,!0).reverse()):J.push(S),Ur(y)?J.push(y.subdivide(.5,!1).reverse()):J.push(y),J},kg=function(T){var O=T.styles;return T.bounds.add(O.borderLeftWidth,O.borderTopWidth,-(O.borderRightWidth+O.borderLeftWidth),-(O.borderTopWidth+O.borderBottomWidth))},Kp=function(T){var y=T.styles,O=T.bounds,S=Ti(y.paddingLeft,O.width),J=Ti(y.paddingRight,O.width),ie=Ti(y.paddingTop,O.width),_e=Ti(y.paddingBottom,O.width);return O.add(S+y.borderLeftWidth,ie+y.borderTopWidth,-(y.borderRightWidth+y.borderLeftWidth+S+J),-(y.borderTopWidth+y.borderBottomWidth+ie+_e))},Gp=function(T,y,O){var S=function(T,y){return 0===T?y.bounds:2===T?Kp(y):kg(y)}(qs(T.styles.backgroundOrigin,y),T),J=function(T,y){return 0===T?y.bounds:2===T?Kp(y):kg(y)}(qs(T.styles.backgroundClip,y),T),ie=yx(qs(T.styles.backgroundSize,y),O,S),_e=ie[0],Me=ie[1],Ie=Xc(qs(T.styles.backgroundPosition,y),S.width-_e,S.height-Me);return[$p(qs(T.styles.backgroundRepeat,y),Ie,ie,S,J),Math.round(S.left+Ie[0]),Math.round(S.top+Ie[1]),_e,Me]},ps=function(T){return Ci(T)&&T.value===gp.AUTO},Yp=function(T){return"number"==typeof T},yx=function(T,y,O){var S=y[0],J=y[1],ie=y[2],_e=T[0],Me=T[1];if(!_e)return[0,0];if(zi(_e)&&Me&&zi(Me))return[Ti(_e,O.width),Ti(Me,O.height)];var Ie=Yp(ie);if(Ci(_e)&&(_e.value===gp.CONTAIN||_e.value===gp.COVER))return Yp(ie)?O.width/O.height<ie!=(_e.value===gp.COVER)?[O.width,O.width/ie]:[O.height*ie,O.height]:[O.width,O.height];var ot=Yp(S),ct=Yp(J),vt=ot||ct;if(ps(_e)&&(!Me||ps(Me)))return ot&&ct?[S,J]:Ie||vt?vt&&Ie?[ot?S:J*ie,ct?J:S/ie]:[ot?S:O.width,ct?J:O.height]:[O.width,O.height];if(Ie){var Tn=0,vn=0;return zi(_e)?Tn=Ti(_e,O.width):zi(Me)&&(vn=Ti(Me,O.height)),ps(_e)?Tn=vn*ie:(!Me||ps(Me))&&(vn=Tn/ie),[Tn,vn]}var Pi=null,di=null;if(zi(_e)?Pi=Ti(_e,O.width):Me&&zi(Me)&&(di=Ti(Me,O.height)),null!==Pi&&(!Me||ps(Me))&&(di=ot&&ct?Pi/S*J:O.height),null!==di&&ps(_e)&&(Pi=ot&&ct?di/J*S:O.width),null!==Pi&&null!==di)return[Pi,di];throw new Error("Unable to calculate background-size for element")},qs=function(T,y){var O=T[y];return typeof O>"u"?T[0]:O},$p=function(T,y,O,S,J){var ie=y[0],_e=y[1],Me=O[0],Ie=O[1];switch(T){case 2:return[new ln(Math.round(S.left),Math.round(S.top+_e)),new ln(Math.round(S.left+S.width),Math.round(S.top+_e)),new ln(Math.round(S.left+S.width),Math.round(Ie+S.top+_e)),new ln(Math.round(S.left),Math.round(Ie+S.top+_e))];case 3:return[new ln(Math.round(S.left+ie),Math.round(S.top)),new ln(Math.round(S.left+ie+Me),Math.round(S.top)),new ln(Math.round(S.left+ie+Me),Math.round(S.height+S.top)),new ln(Math.round(S.left+ie),Math.round(S.height+S.top))];case 1:return[new ln(Math.round(S.left+ie),Math.round(S.top+_e)),new ln(Math.round(S.left+ie+Me),Math.round(S.top+_e)),new ln(Math.round(S.left+ie+Me),Math.round(S.top+_e+Ie)),new ln(Math.round(S.left+ie),Math.round(S.top+_e+Ie))];default:return[new ln(Math.round(J.left),Math.round(J.top)),new ln(Math.round(J.left+J.width),Math.round(J.top)),new ln(Math.round(J.left+J.width),Math.round(J.height+J.top)),new ln(Math.round(J.left),Math.round(J.height+J.top))]}},$A="Hidden Text",Og=function(){function T(y){this._data={},this._document=y}return T.prototype.parseMetrics=function(y,O){var S=this._document.createElement("div"),J=this._document.createElement("img"),ie=this._document.createElement("span"),_e=this._document.body;S.style.visibility="hidden",S.style.fontFamily=y,S.style.fontSize=O,S.style.margin="0",S.style.padding="0",S.style.whiteSpace="nowrap",_e.appendChild(S),J.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",J.width=1,J.height=1,J.style.margin="0",J.style.padding="0",J.style.verticalAlign="baseline",ie.style.fontFamily=y,ie.style.fontSize=O,ie.style.margin="0",ie.style.padding="0",ie.appendChild(this._document.createTextNode($A)),S.appendChild(ie),S.appendChild(J);var Me=J.offsetTop-ie.offsetTop+2;S.removeChild(ie),S.appendChild(this._document.createTextNode($A)),S.style.lineHeight="normal",J.style.verticalAlign="super";var Ie=J.offsetTop-S.offsetTop+2;return _e.removeChild(S),{baseline:Me,middle:Ie}},T.prototype.getMetrics=function(y,O){var S=y+" "+O;return typeof this._data[S]>"u"&&(this._data[S]=this.parseMetrics(y,O)),this._data[S]},T}(),Ig=function T(y,O){this.context=y,this.options=O},_c=function(T){function y(O,S){var J=T.call(this,O,S)||this;return J._activeEffects=[],J.canvas=S.canvas?S.canvas:document.createElement("canvas"),J.ctx=J.canvas.getContext("2d"),S.canvas||(J.canvas.width=Math.floor(S.width*S.scale),J.canvas.height=Math.floor(S.height*S.scale),J.canvas.style.width=S.width+"px",J.canvas.style.height=S.height+"px"),J.fontMetrics=new Og(document),J.ctx.scale(J.options.scale,J.options.scale),J.ctx.translate(-S.x,-S.y),J.ctx.textBaseline="bottom",J._activeEffects=[],J.context.logger.debug("Canvas renderer initialized ("+S.width+"x"+S.height+") with scale "+S.scale),J}return I(y,T),y.prototype.applyEffects=function(O){for(var S=this;this._activeEffects.length;)this.popEffect();O.forEach(function(J){return S.applyEffect(J)})},y.prototype.applyEffect=function(O){this.ctx.save(),function(T){return 2===T.type}(O)&&(this.ctx.globalAlpha=O.opacity),function(T){return 0===T.type}(O)&&(this.ctx.translate(O.offsetX,O.offsetY),this.ctx.transform(O.matrix[0],O.matrix[1],O.matrix[2],O.matrix[3],O.matrix[4],O.matrix[5]),this.ctx.translate(-O.offsetX,-O.offsetY)),zp(O)&&(this.path(O.path),this.ctx.clip()),this._activeEffects.push(O)},y.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},y.prototype.renderStack=function(O){return h(this,void 0,void 0,function(){return U(this,function(J){switch(J.label){case 0:return O.element.container.styles.isVisible()?[4,this.renderStackContent(O)]:[3,2];case 1:J.sent(),J.label=2;case 2:return[2]}})})},y.prototype.renderNode=function(O){return h(this,void 0,void 0,function(){return U(this,function(S){switch(S.label){case 0:return vo(O.container.flags,16),O.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(O)]:[3,3];case 1:return S.sent(),[4,this.renderNodeContent(O)];case 2:S.sent(),S.label=3;case 3:return[2]}})})},y.prototype.renderTextWithLetterSpacing=function(O,S,J){var ie=this;0===S?this.ctx.fillText(O.text,O.bounds.left,O.bounds.top+J):lc(O.text).reduce(function(Me,Ie){return ie.ctx.fillText(Ie,Me,O.bounds.top+J),Me+ie.ctx.measureText(Ie).width},O.bounds.left)},y.prototype.createFontStyle=function(O){var S=O.fontVariant.filter(function(_e){return"normal"===_e||"small-caps"===_e}).join(""),J=Mg(O.fontFamily).join(", "),ie=Vl(O.fontSize)?""+O.fontSize.number+O.fontSize.unit:O.fontSize.number+"px";return[[O.fontStyle,S,O.fontWeight,ie,J].join(" "),J,ie]},y.prototype.renderTextNode=function(O,S){return h(this,void 0,void 0,function(){var J,_e,Me,Ie,Ve,ot,ct,vt=this;return U(this,function(hn){return J=this.createFontStyle(S),_e=J[1],Me=J[2],this.ctx.font=J[0],this.ctx.direction=1===S.direction?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",Ie=this.fontMetrics.getMetrics(_e,Me),Ve=Ie.baseline,ot=Ie.middle,ct=S.paintOrder,O.textBounds.forEach(function(Kt){ct.forEach(function(en){switch(en){case 0:vt.ctx.fillStyle=Bt(S.color),vt.renderTextWithLetterSpacing(Kt,S.letterSpacing,Ve);var si=S.textShadow;si.length&&Kt.text.trim().length&&(si.slice(0).reverse().forEach(function(Tn){vt.ctx.shadowColor=Bt(Tn.color),vt.ctx.shadowOffsetX=Tn.offsetX.number*vt.options.scale,vt.ctx.shadowOffsetY=Tn.offsetY.number*vt.options.scale,vt.ctx.shadowBlur=Tn.blur.number,vt.renderTextWithLetterSpacing(Kt,S.letterSpacing,Ve)}),vt.ctx.shadowColor="",vt.ctx.shadowOffsetX=0,vt.ctx.shadowOffsetY=0,vt.ctx.shadowBlur=0),S.textDecorationLine.length&&(vt.ctx.fillStyle=Bt(S.textDecorationColor||S.color),S.textDecorationLine.forEach(function(Tn){switch(Tn){case 1:vt.ctx.fillRect(Kt.bounds.left,Math.round(Kt.bounds.top+Ve),Kt.bounds.width,1);break;case 2:vt.ctx.fillRect(Kt.bounds.left,Math.round(Kt.bounds.top),Kt.bounds.width,1);break;case 3:vt.ctx.fillRect(Kt.bounds.left,Math.ceil(Kt.bounds.top+ot),Kt.bounds.width,1)}}));break;case 1:S.webkitTextStrokeWidth&&Kt.text.trim().length&&(vt.ctx.strokeStyle=Bt(S.webkitTextStrokeColor),vt.ctx.lineWidth=S.webkitTextStrokeWidth,vt.ctx.lineJoin=window.chrome?"miter":"round",vt.ctx.strokeText(Kt.text,Kt.bounds.left,Kt.bounds.top+Ve)),vt.ctx.strokeStyle="",vt.ctx.lineWidth=0,vt.ctx.lineJoin="miter"}})}),[2]})})},y.prototype.renderReplacedElement=function(O,S,J){if(J&&O.intrinsicWidth>0&&O.intrinsicHeight>0){var ie=Kp(O),_e=md(S);this.path(_e),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(J,0,0,O.intrinsicWidth,O.intrinsicHeight,ie.left,ie.top,ie.width,ie.height),this.ctx.restore()}},y.prototype.renderNodeContent=function(O){return h(this,void 0,void 0,function(){var S,J,ie,_e,Me,ot,ct,vt,Kt,en,si,Tn,vn,Pi,di,Jn;return U(this,function(pn){switch(pn.label){case 0:this.applyEffects(O.getEffects(4)),J=O.curves,ie=(S=O.container).styles,_e=0,Me=S.textNodes,pn.label=1;case 1:return _e<Me.length?[4,this.renderTextNode(Me[_e],ie)]:[3,4];case 2:pn.sent(),pn.label=3;case 3:return _e++,[3,1];case 4:if(!(S instanceof Xf))return[3,8];pn.label=5;case 5:return pn.trys.push([5,7,,8]),[4,this.context.cache.match(S.src)];case 6:return vn=pn.sent(),this.renderReplacedElement(S,J,vn),[3,8];case 7:return pn.sent(),this.context.logger.error("Error loading image "+S.src),[3,8];case 8:if(S instanceof Al&&this.renderReplacedElement(S,J,S.canvas),!(S instanceof Pp))return[3,12];pn.label=9;case 9:return pn.trys.push([9,11,,12]),[4,this.context.cache.match(S.svg)];case 10:return vn=pn.sent(),this.renderReplacedElement(S,J,vn),[3,12];case 11:return pn.sent(),this.context.logger.error("Error loading svg "+S.svg.substring(0,255)),[3,12];case 12:return S instanceof Np&&S.tree?[4,new y(this.context,{scale:this.options.scale,backgroundColor:S.backgroundColor,x:0,y:0,width:S.width,height:S.height}).render(S.tree)]:[3,14];case 13:ot=pn.sent(),S.width&&S.height&&this.ctx.drawImage(ot,0,0,S.width,S.height,S.bounds.left,S.bounds.top,S.bounds.width,S.bounds.height),pn.label=14;case 14:if(S instanceof au&&(ct=Math.min(S.bounds.width,S.bounds.height),S.type===ad?S.checked&&(this.ctx.save(),this.path([new ln(S.bounds.left+.39363*ct,S.bounds.top+.79*ct),new ln(S.bounds.left+.16*ct,S.bounds.top+.5549*ct),new ln(S.bounds.left+.27347*ct,S.bounds.top+.44071*ct),new ln(S.bounds.left+.39694*ct,S.bounds.top+.5649*ct),new ln(S.bounds.left+.72983*ct,S.bounds.top+.23*ct),new ln(S.bounds.left+.84*ct,S.bounds.top+.34085*ct),new ln(S.bounds.left+.39363*ct,S.bounds.top+.79*ct)]),this.ctx.fillStyle=Bt(Fp),this.ctx.fill(),this.ctx.restore()):S.type===Qp&&S.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(S.bounds.left+ct/2,S.bounds.top+ct/2,ct/4,0,2*Math.PI,!0),this.ctx.fillStyle=Bt(Fp),this.ctx.fill(),this.ctx.restore())),Cx(S)&&S.value.length){switch(vt=this.createFontStyle(ie),Kt=this.fontMetrics.getMetrics(di=vt[0],vt[1]).baseline,this.ctx.font=di,this.ctx.fillStyle=Bt(ie.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=kx(S.styles.textAlign),Jn=Kp(S),en=0,S.styles.textAlign){case 1:en+=Jn.width/2;break;case 2:en+=Jn.width}si=Jn.add(en,0,0,-Jn.height/2+1),this.ctx.save(),this.path([new ln(Jn.left,Jn.top),new ln(Jn.left+Jn.width,Jn.top),new ln(Jn.left+Jn.width,Jn.top+Jn.height),new ln(Jn.left,Jn.top+Jn.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new pl(S.value,si),ie.letterSpacing,Kt),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!vo(S.styles.display,2048))return[3,20];if(null===S.styles.listStyleImage)return[3,19];if(0!==(Tn=S.styles.listStyleImage).type)return[3,18];vn=void 0,Pi=Tn.url,pn.label=15;case 15:return pn.trys.push([15,17,,18]),[4,this.context.cache.match(Pi)];case 16:return vn=pn.sent(),this.ctx.drawImage(vn,S.bounds.left-(vn.width+10),S.bounds.top),[3,18];case 17:return pn.sent(),this.context.logger.error("Error loading list-style-image "+Pi),[3,18];case 18:return[3,20];case 19:O.listValue&&-1!==S.styles.listStyleType&&(di=this.createFontStyle(ie)[0],this.ctx.font=di,this.ctx.fillStyle=Bt(ie.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",Jn=new d(S.bounds.left,S.bounds.top+Ti(S.styles.paddingTop,S.bounds.width),S.bounds.width,nc(ie.lineHeight,ie.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new pl(O.listValue,Jn),ie.letterSpacing,nc(ie.lineHeight,ie.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),pn.label=20;case 20:return[2]}})})},y.prototype.renderStackContent=function(O){return h(this,void 0,void 0,function(){var S,J,ie,_e,Me,Ie,Ve,ot,ct,vt,hn,Kt,en,si;return U(this,function(vn){switch(vn.label){case 0:return vo(O.element.container.flags,16),[4,this.renderNodeBackgroundAndBorders(O.element)];case 1:vn.sent(),S=0,J=O.negativeZIndex,vn.label=2;case 2:return S<J.length?[4,this.renderStack(J[S])]:[3,5];case 3:vn.sent(),vn.label=4;case 4:return S++,[3,2];case 5:return[4,this.renderNodeContent(O.element)];case 6:vn.sent(),ie=0,_e=O.nonInlineLevel,vn.label=7;case 7:return ie<_e.length?[4,this.renderNode(_e[ie])]:[3,10];case 8:vn.sent(),vn.label=9;case 9:return ie++,[3,7];case 10:Me=0,Ie=O.nonPositionedFloats,vn.label=11;case 11:return Me<Ie.length?[4,this.renderStack(Ie[Me])]:[3,14];case 12:vn.sent(),vn.label=13;case 13:return Me++,[3,11];case 14:Ve=0,ot=O.nonPositionedInlineLevel,vn.label=15;case 15:return Ve<ot.length?[4,this.renderStack(ot[Ve])]:[3,18];case 16:vn.sent(),vn.label=17;case 17:return Ve++,[3,15];case 18:ct=0,vt=O.inlineLevel,vn.label=19;case 19:return ct<vt.length?[4,this.renderNode(vt[ct])]:[3,22];case 20:vn.sent(),vn.label=21;case 21:return ct++,[3,19];case 22:hn=0,Kt=O.zeroOrAutoZIndexOrTransformedOrOpacity,vn.label=23;case 23:return hn<Kt.length?[4,this.renderStack(Kt[hn])]:[3,26];case 24:vn.sent(),vn.label=25;case 25:return hn++,[3,23];case 26:en=0,si=O.positiveZIndex,vn.label=27;case 27:return en<si.length?[4,this.renderStack(si[en])]:[3,30];case 28:vn.sent(),vn.label=29;case 29:return en++,[3,27];case 30:return[2]}})})},y.prototype.mask=function(O){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(O.slice(0).reverse()),this.ctx.closePath()},y.prototype.path=function(O){this.ctx.beginPath(),this.formatPath(O),this.ctx.closePath()},y.prototype.formatPath=function(O){var S=this;O.forEach(function(J,ie){var _e=Ur(J)?J.start:J;0===ie?S.ctx.moveTo(_e.x,_e.y):S.ctx.lineTo(_e.x,_e.y),Ur(J)&&S.ctx.bezierCurveTo(J.startControl.x,J.startControl.y,J.endControl.x,J.endControl.y,J.end.x,J.end.y)})},y.prototype.renderRepeat=function(O,S,J,ie){this.path(O),this.ctx.fillStyle=S,this.ctx.translate(J,ie),this.ctx.fill(),this.ctx.translate(-J,-ie)},y.prototype.resizeImage=function(O,S,J){var ie;if(O.width===S&&O.height===J)return O;var Me=(null!==(ie=this.canvas.ownerDocument)&&void 0!==ie?ie:document).createElement("canvas");return Me.width=Math.max(1,S),Me.height=Math.max(1,J),Me.getContext("2d").drawImage(O,0,0,O.width,O.height,0,0,S,J),Me},y.prototype.renderBackgroundImage=function(O){return h(this,void 0,void 0,function(){var S,J,ie,_e,Me;return U(this,function(Ve){switch(Ve.label){case 0:S=O.styles.backgroundImage.length-1,J=function(ot){var ct,vt,hn,Kt,en,si,Tn,vn,Pi,di,Jn,pn,Ei,Oi,Kn,$o,rr,vr,Xi,ka,fc,sr,lr,su,Rs,gc,lu,cu,fl,uu,gl;return U(this,function(pd){switch(pd.label){case 0:if(0!==ot.type)return[3,5];ct=void 0,vt=ot.url,pd.label=1;case 1:return pd.trys.push([1,3,,4]),[4,ie.context.cache.match(vt)];case 2:return ct=pd.sent(),[3,4];case 3:return pd.sent(),ie.context.logger.error("Error loading background-image "+vt),[3,4];case 4:return ct&&(hn=Gp(O,S,[ct.width,ct.height,ct.width/ct.height]),$o=hn[0],sr=hn[1],lr=hn[2],Oi=ie.ctx.createPattern(ie.resizeImage(ct,Xi=hn[3],ka=hn[4]),"repeat"),ie.renderRepeat($o,Oi,sr,lr)),[3,6];case 5:!function(T){return 1===T.type}(ot)?function(T){return 2===T.type}(ot)&&(Kn=Gp(O,S,[null,null,null]),$o=Kn[0],rr=Kn[1],vr=Kn[2],ka=Kn[4],sr=Ti((fc=0===ot.position.length?[Gu]:ot.position)[0],Xi=Kn[3]),lr=Ti(fc[fc.length-1],ka),su=function(T,y,O,S,J){var ie=0,_e=0;switch(T.size){case 0:0===T.shape?ie=_e=Math.min(Math.abs(y),Math.abs(y-S),Math.abs(O),Math.abs(O-J)):1===T.shape&&(ie=Math.min(Math.abs(y),Math.abs(y-S)),_e=Math.min(Math.abs(O),Math.abs(O-J)));break;case 2:if(0===T.shape)ie=_e=Math.min(bo(y,O),bo(y,O-J),bo(y-S,O),bo(y-S,O-J));else if(1===T.shape){var Me=Math.min(Math.abs(O),Math.abs(O-J))/Math.min(Math.abs(y),Math.abs(y-S)),Ie=as(S,J,y,O,!0);_e=Me*(ie=bo(Ie[0]-y,(Ie[1]-O)/Me))}break;case 1:0===T.shape?ie=_e=Math.max(Math.abs(y),Math.abs(y-S),Math.abs(O),Math.abs(O-J)):1===T.shape&&(ie=Math.max(Math.abs(y),Math.abs(y-S)),_e=Math.max(Math.abs(O),Math.abs(O-J)));break;case 3:if(0===T.shape)ie=_e=Math.max(bo(y,O),bo(y,O-J),bo(y-S,O),bo(y-S,O-J));else if(1===T.shape){Me=Math.max(Math.abs(O),Math.abs(O-J))/Math.max(Math.abs(y),Math.abs(y-S));var ct=as(S,J,y,O,!1);_e=Me*(ie=bo(ct[0]-y,(ct[1]-O)/Me))}}return Array.isArray(T.size)&&(ie=Ti(T.size[0],S),_e=2===T.size.length?Ti(T.size[1],J):ie),[ie,_e]}(ot,sr,lr,Xi,ka),gc=su[1],(Rs=su[0])>0&&gc>0&&(lu=ie.ctx.createRadialGradient(rr+sr,vr+lr,0,rr+sr,vr+lr,Rs),ui(ot.stops,2*Rs).forEach(function(Am){return lu.addColorStop(Am.stop,Bt(Am.color))}),ie.path($o),ie.ctx.fillStyle=lu,Rs!==gc?(cu=O.bounds.left+.5*O.bounds.width,fl=O.bounds.top+.5*O.bounds.height,gl=1/(uu=gc/Rs),ie.ctx.save(),ie.ctx.translate(cu,fl),ie.ctx.transform(1,0,0,uu,0,0),ie.ctx.translate(-cu,-fl),ie.ctx.fillRect(rr,gl*(vr-fl)+fl,Xi,ka*gl),ie.ctx.restore()):ie.ctx.fill())):(Kt=Gp(O,S,[null,null,null]),$o=Kt[0],sr=Kt[1],lr=Kt[2],en=Zo(ot.angle,Xi=Kt[3],ka=Kt[4]),si=en[0],Tn=en[1],vn=en[2],Pi=en[3],di=en[4],(Jn=document.createElement("canvas")).width=Xi,Jn.height=ka,pn=Jn.getContext("2d"),Ei=pn.createLinearGradient(Tn,Pi,vn,di),ui(ot.stops,si).forEach(function(Am){return Ei.addColorStop(Am.stop,Bt(Am.color))}),pn.fillStyle=Ei,pn.fillRect(0,0,Xi,ka),Xi>0&&ka>0&&(Oi=ie.ctx.createPattern(Jn,"repeat"),ie.renderRepeat($o,Oi,sr,lr))),pd.label=6;case 6:return S--,[2]}})},ie=this,_e=0,Me=O.styles.backgroundImage.slice(0).reverse(),Ve.label=1;case 1:return _e<Me.length?[5,J(Me[_e])]:[3,4];case 2:Ve.sent(),Ve.label=3;case 3:return _e++,[3,1];case 4:return[2]}})})},y.prototype.renderSolidBorder=function(O,S,J){return h(this,void 0,void 0,function(){return U(this,function(ie){return this.path(Tg(J,S)),this.ctx.fillStyle=Bt(O),this.ctx.fill(),[2]})})},y.prototype.renderDoubleBorder=function(O,S,J,ie){return h(this,void 0,void 0,function(){var _e,Me;return U(this,function(Ie){switch(Ie.label){case 0:return S<3?[4,this.renderSolidBorder(O,J,ie)]:[3,2];case 1:return Ie.sent(),[2];case 2:return _e=function(T,y){switch(y){case 0:return jr(T.topLeftBorderBox,T.topLeftBorderDoubleOuterBox,T.topRightBorderBox,T.topRightBorderDoubleOuterBox);case 1:return jr(T.topRightBorderBox,T.topRightBorderDoubleOuterBox,T.bottomRightBorderBox,T.bottomRightBorderDoubleOuterBox);case 2:return jr(T.bottomRightBorderBox,T.bottomRightBorderDoubleOuterBox,T.bottomLeftBorderBox,T.bottomLeftBorderDoubleOuterBox);default:return jr(T.bottomLeftBorderBox,T.bottomLeftBorderDoubleOuterBox,T.topLeftBorderBox,T.topLeftBorderDoubleOuterBox)}}(ie,J),this.path(_e),this.ctx.fillStyle=Bt(O),this.ctx.fill(),Me=function(T,y){switch(y){case 0:return jr(T.topLeftBorderDoubleInnerBox,T.topLeftPaddingBox,T.topRightBorderDoubleInnerBox,T.topRightPaddingBox);case 1:return jr(T.topRightBorderDoubleInnerBox,T.topRightPaddingBox,T.bottomRightBorderDoubleInnerBox,T.bottomRightPaddingBox);case 2:return jr(T.bottomRightBorderDoubleInnerBox,T.bottomRightPaddingBox,T.bottomLeftBorderDoubleInnerBox,T.bottomLeftPaddingBox);default:return jr(T.bottomLeftBorderDoubleInnerBox,T.bottomLeftPaddingBox,T.topLeftBorderDoubleInnerBox,T.topLeftPaddingBox)}}(ie,J),this.path(Me),this.ctx.fill(),[2]}})})},y.prototype.renderNodeBackgroundAndBorders=function(O){return h(this,void 0,void 0,function(){var S,J,ie,_e,Me,Ie,Ve,ot,ct=this;return U(this,function(vt){switch(vt.label){case 0:return this.applyEffects(O.getEffects(2)),J=!xt((S=O.container.styles).backgroundColor)||S.backgroundImage.length,ie=[{style:S.borderTopStyle,color:S.borderTopColor,width:S.borderTopWidth},{style:S.borderRightStyle,color:S.borderRightColor,width:S.borderRightWidth},{style:S.borderBottomStyle,color:S.borderBottomColor,width:S.borderBottomWidth},{style:S.borderLeftStyle,color:S.borderLeftColor,width:S.borderLeftWidth}],_e=Tx(qs(S.backgroundClip,0),O.curves),J||S.boxShadow.length?(this.ctx.save(),this.path(_e),this.ctx.clip(),xt(S.backgroundColor)||(this.ctx.fillStyle=Bt(S.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(O.container)]):[3,2];case 1:vt.sent(),this.ctx.restore(),S.boxShadow.slice(0).reverse().forEach(function(hn){ct.ctx.save();var Kt=js(O.curves),en=hn.inset?0:1e4,si=function(T,y,O,S,J){return T.map(function(ie,_e){switch(_e){case 0:return ie.add(y,O);case 1:return ie.add(y+S,O);case 2:return ie.add(y+S,O+J);case 3:return ie.add(y,O+J)}return ie})}(Kt,(hn.inset?1:-1)*hn.spread.number-en,(hn.inset?1:-1)*hn.spread.number,hn.spread.number*(hn.inset?-2:2),hn.spread.number*(hn.inset?-2:2));hn.inset?(ct.path(Kt),ct.ctx.clip(),ct.mask(si)):(ct.mask(Kt),ct.ctx.clip(),ct.path(si)),ct.ctx.shadowOffsetX=hn.offsetX.number+en,ct.ctx.shadowOffsetY=hn.offsetY.number,ct.ctx.shadowColor=Bt(hn.color),ct.ctx.shadowBlur=hn.blur.number,ct.ctx.fillStyle=hn.inset?Bt(hn.color):"rgba(0,0,0,1)",ct.ctx.fill(),ct.ctx.restore()}),vt.label=2;case 2:Me=0,Ie=0,Ve=ie,vt.label=3;case 3:return Ie<Ve.length?0!==(ot=Ve[Ie]).style&&!xt(ot.color)&&ot.width>0?2!==ot.style?[3,5]:[4,this.renderDashedDottedBorder(ot.color,ot.width,Me,O.curves,2)]:[3,11]:[3,13];case 4:return vt.sent(),[3,11];case 5:return 3!==ot.style?[3,7]:[4,this.renderDashedDottedBorder(ot.color,ot.width,Me,O.curves,3)];case 6:return vt.sent(),[3,11];case 7:return 4!==ot.style?[3,9]:[4,this.renderDoubleBorder(ot.color,ot.width,Me,O.curves)];case 8:return vt.sent(),[3,11];case 9:return[4,this.renderSolidBorder(ot.color,Me,O.curves)];case 10:vt.sent(),vt.label=11;case 11:Me++,vt.label=12;case 12:return Ie++,[3,3];case 13:return[2]}})})},y.prototype.renderDashedDottedBorder=function(O,S,J,ie,_e){return h(this,void 0,void 0,function(){var Me,Ie,Ve,ot,ct,vt,hn,Kt,en,si,Tn,vn,Pi,di,Jn,pn;return U(this,function(Ei){return this.ctx.save(),Me=function(T,y){switch(y){case 0:return Jp(T.topLeftBorderStroke,T.topRightBorderStroke);case 1:return Jp(T.topRightBorderStroke,T.bottomRightBorderStroke);case 2:return Jp(T.bottomRightBorderStroke,T.bottomLeftBorderStroke);default:return Jp(T.bottomLeftBorderStroke,T.topLeftBorderStroke)}}(ie,J),Ie=Tg(ie,J),2===_e&&(this.path(Ie),this.ctx.clip()),Ur(Ie[0])?(Ve=Ie[0].start.x,ot=Ie[0].start.y):(Ve=Ie[0].x,ot=Ie[0].y),Ur(Ie[1])?(ct=Ie[1].end.x,vt=Ie[1].end.y):(ct=Ie[1].x,vt=Ie[1].y),hn=0===J||2===J?Math.abs(Ve-ct):Math.abs(ot-vt),this.ctx.beginPath(),this.formatPath(3===_e?Me:Ie.slice(0,2)),Kt=S<3?3*S:2*S,en=S<3?2*S:S,3===_e&&(Kt=S,en=S),si=!0,hn<=2*Kt?si=!1:hn<=2*Kt+en?(Kt*=Tn=hn/(2*Kt+en),en*=Tn):(vn=Math.floor((hn+en)/(Kt+en)),Pi=(hn-vn*Kt)/(vn-1),en=(di=(hn-(vn+1)*Kt)/vn)<=0||Math.abs(en-Pi)<Math.abs(en-di)?Pi:di),si&&this.ctx.setLineDash(3===_e?[0,Kt+en]:[Kt,en]),3===_e?(this.ctx.lineCap="round",this.ctx.lineWidth=S):this.ctx.lineWidth=2*S+1.1,this.ctx.strokeStyle=Bt(O),this.ctx.stroke(),this.ctx.setLineDash([]),2===_e&&(Ur(Ie[0])&&(Jn=Ie[3],pn=Ie[0],this.ctx.beginPath(),this.formatPath([new ln(Jn.end.x,Jn.end.y),new ln(pn.start.x,pn.start.y)]),this.ctx.stroke()),Ur(Ie[1])&&(Jn=Ie[1],pn=Ie[2],this.ctx.beginPath(),this.formatPath([new ln(Jn.end.x,Jn.end.y),new ln(pn.start.x,pn.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},y.prototype.render=function(O){return h(this,void 0,void 0,function(){var S;return U(this,function(J){switch(J.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Bt(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),S=function(T){var y=new ms(T,null),O=new YA(y),S=[];return Ai(y,O,O,S),hm(y.container,S),O}(O),[4,this.renderStack(S)];case 1:return J.sent(),this.applyEffects([]),[2,this.canvas]}})})},y}(Ig),Cx=function(T){return T instanceof om||T instanceof im||T instanceof au&&T.type!==Qp&&T.type!==ad},Tx=function(T,y){switch(T){case 0:return js(y);case 2:return function(T){return[T.topLeftContentBox,T.topRightContentBox,T.bottomRightContentBox,T.bottomLeftContentBox]}(y);default:return md(y)}},kx=function(T){switch(T){case 1:return"center";case 2:return"right";default:return"left"}},Sx=["-apple-system","system-ui"],Mg=function(T){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?T.filter(function(y){return-1===Sx.indexOf(y)}):T},Ex=function(T){function y(O,S){var J=T.call(this,O,S)||this;return J.canvas=S.canvas?S.canvas:document.createElement("canvas"),J.ctx=J.canvas.getContext("2d"),J.options=S,J.canvas.width=Math.floor(S.width*S.scale),J.canvas.height=Math.floor(S.height*S.scale),J.canvas.style.width=S.width+"px",J.canvas.style.height=S.height+"px",J.ctx.scale(J.options.scale,J.options.scale),J.ctx.translate(-S.x,-S.y),J.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+S.width+"x"+S.height+" at "+S.x+","+S.y+") with scale "+S.scale),J}return I(y,T),y.prototype.render=function(O){return h(this,void 0,void 0,function(){var S,J;return U(this,function(ie){switch(ie.label){case 0:return S=Mp(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,O),[4,Ox(S)];case 1:return J=ie.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Bt(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(J,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},y}(Ig),Ox=function(T){return new Promise(function(y,O){var S=new Image;S.onload=function(){y(S)},S.onerror=O,S.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(T))})},Ix=function(){function T(y){var S=y.enabled;this.id=y.id,this.enabled=S,this.start=Date.now()}return T.prototype.debug=function(){for(var y=[],O=0;O<arguments.length;O++)y[O]=arguments[O];this.enabled&&(typeof window<"u"&&window.console&&"function"==typeof console.debug?console.debug.apply(console,E([this.id,this.getTime()+"ms"],y)):this.info.apply(this,y))},T.prototype.getTime=function(){return Date.now()-this.start},T.prototype.info=function(){for(var y=[],O=0;O<arguments.length;O++)y[O]=arguments[O];this.enabled&&typeof window<"u"&&window.console&&"function"==typeof console.info&&console.info.apply(console,E([this.id,this.getTime()+"ms"],y))},T.prototype.warn=function(){for(var y=[],O=0;O<arguments.length;O++)y[O]=arguments[O];this.enabled&&(typeof window<"u"&&window.console&&"function"==typeof console.warn?console.warn.apply(console,E([this.id,this.getTime()+"ms"],y)):this.info.apply(this,y))},T.prototype.error=function(){for(var y=[],O=0;O<arguments.length;O++)y[O]=arguments[O];this.enabled&&(typeof window<"u"&&window.console&&"function"==typeof console.error?console.error.apply(console,E([this.id,this.getTime()+"ms"],y)):this.info.apply(this,y))},T.instances={},T}(),Mx=function(){function T(y,O){var S;this.windowBounds=O,this.instanceName="#"+T.instanceCount++,this.logger=new Ix({id:this.instanceName,enabled:y.logging}),this.cache=null!==(S=y.cache)&&void 0!==S?S:new px(this,y)}return T.instanceCount=1,T}();typeof window<"u"&&wg.setContext(window);var Bx=function(T,y){return h(void 0,void 0,void 0,function(){var O,S,J,ie,_e,Me,Ie,Ve,ot,ct,vt,hn,Kt,en,si,Tn,vn,Pi,di,Jn,pn,Oi,Kn,$o,rr,vr,Xi,ka,fc,sr,lr,su,Rs,gc,lu,cu,fl,uu;return U(this,function(gl){switch(gl.label){case 0:if(!T||"object"!=typeof T)return[2,Promise.reject("Invalid element provided as first argument")];if(!(O=T.ownerDocument))throw new Error("Element is not attached to a Document");if(!(S=O.defaultView))throw new Error("Document is not attached to a Window");return J={allowTaint:null!==(Oi=y.allowTaint)&&void 0!==Oi&&Oi,imageTimeout:null!==(Kn=y.imageTimeout)&&void 0!==Kn?Kn:15e3,proxy:y.proxy,useCORS:null!==($o=y.useCORS)&&void 0!==$o&&$o},ie=F({logging:null===(rr=y.logging)||void 0===rr||rr,cache:y.cache},J),_e={windowWidth:null!==(vr=y.windowWidth)&&void 0!==vr?vr:S.innerWidth,windowHeight:null!==(Xi=y.windowHeight)&&void 0!==Xi?Xi:S.innerHeight,scrollX:null!==(ka=y.scrollX)&&void 0!==ka?ka:S.pageXOffset,scrollY:null!==(fc=y.scrollY)&&void 0!==fc?fc:S.pageYOffset},Me=new d(_e.scrollX,_e.scrollY,_e.windowWidth,_e.windowHeight),Ie=new Mx(ie,Me),Ve=null!==(sr=y.foreignObjectRendering)&&void 0!==sr&&sr,ot={allowTaint:null!==(lr=y.allowTaint)&&void 0!==lr&&lr,onclone:y.onclone,ignoreElements:y.ignoreElements,inlineImages:Ve,copyStyles:Ve},Ie.logger.debug("Starting document clone with size "+Me.width+"x"+Me.height+" scrolled to "+-Me.left+","+-Me.top),ct=new gg(Ie,T,ot),(vt=ct.clonedReferenceElement)?[4,ct.toIFrame(O,Me)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return hn=gl.sent(),Kt=lm(vt)||function(T){return"HTML"===T.tagName}(vt)?function(T){var y=T.body,O=T.documentElement;if(!y||!O)throw new Error("Unable to get document size");var S=Math.max(Math.max(y.scrollWidth,O.scrollWidth),Math.max(y.offsetWidth,O.offsetWidth),Math.max(y.clientWidth,O.clientWidth)),J=Math.max(Math.max(y.scrollHeight,O.scrollHeight),Math.max(y.offsetHeight,O.offsetHeight),Math.max(y.clientHeight,O.clientHeight));return new d(0,0,S,J)}(vt.ownerDocument):C(Ie,vt),en=Kt.width,si=Kt.height,Tn=Kt.left,vn=Kt.top,Pi=Px(Ie,vt,y.backgroundColor),di={canvas:y.canvas,backgroundColor:Pi,scale:null!==(Rs=null!==(su=y.scale)&&void 0!==su?su:S.devicePixelRatio)&&void 0!==Rs?Rs:1,x:(null!==(gc=y.x)&&void 0!==gc?gc:0)+Tn,y:(null!==(lu=y.y)&&void 0!==lu?lu:0)+vn,width:null!==(cu=y.width)&&void 0!==cu?cu:Math.ceil(en),height:null!==(fl=y.height)&&void 0!==fl?fl:Math.ceil(si)},Ve?(Ie.logger.debug("Document cloned, using foreign object rendering"),[4,new Ex(Ie,di).render(vt)]):[3,3];case 2:return Jn=gl.sent(),[3,5];case 3:return Ie.logger.debug("Document cloned, element located at "+Tn+","+vn+" with size "+en+"x"+si+" using computed rendering"),Ie.logger.debug("Starting DOM parsing"),pn=FA(Ie,vt),Pi===pn.styles.backgroundColor&&(pn.styles.backgroundColor=Hi.TRANSPARENT),Ie.logger.debug("Starting renderer for element at "+di.x+","+di.y+" with size "+di.width+"x"+di.height),[4,new _c(Ie,di).render(pn)];case 4:Jn=gl.sent(),gl.label=5;case 5:return(!(null!==(uu=y.removeContainer)&&void 0!==uu)||uu)&&(gg.destroy(hn)||Ie.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),Ie.logger.debug("Finished rendering"),[2,Jn]}})})},Px=function(T,y,O){var S=y.ownerDocument,J=S.documentElement?ki(T,getComputedStyle(S.documentElement).backgroundColor):Hi.TRANSPARENT,ie=S.body?ki(T,getComputedStyle(S.body).backgroundColor):Hi.TRANSPARENT,_e="string"==typeof O?ki(T,O):null===O?Hi.TRANSPARENT:4294967295;return y===S.documentElement?xt(J)?xt(ie)?_e:ie:J:_e};return function(T,y){return void 0===y&&(y={}),Bx(T,y)}}()},8897:(Ne,H)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.Utils=H.CONST=void 0;class I{static load(U){let E=JSON.parse(U);Object.assign(this,E)}}H.CONST=I,I.RENDER_SCALE=2,I.LINE_SMALL_HEIGHT=7*I.RENDER_SCALE,I.SPLIT_MARGIN=3*I.RENDER_SCALE,I.INTERSEC_MARGIN=20*I.RENDER_SCALE,I.LINE_MAGIN=2*I.RENDER_SCALE,I.MARGIN_LEFT=2*I.RENDER_SCALE,I.ENABLE_IMAGE_PROCESS=!0,I.STEP_SIZE=2,I.CROP_FULL_WIDTH=!0,I.OVERLAP=.5,I.QUESTION_PATTERN=[],I.QUESTION_PATTERN2=[],I.BREAK_LINE_PATTERN=[],I.SECTION_PATTERN_LOWER=[],I.SECTION_PATTERN_NORMAL=[],I.KICK_PATTERN=[],I.TVCN_CHAR=[],I.HET_PATTERN=[],I.DAPAN_PATTERN=[],I.HUONGDAN_PATTERN=[],I.MULTIPLE_ANS_PATTERN=[],I.DRAW_RESULT="",I.SKIP_CHAR=[],I.FOOTER_PATTERN=[],I.HELP_ANS_PATTERN=[],I.RES_ANS_PATTERN=[],I.GROUP_TF_PATTERN=[],I.GROUP_FI_PATTERN=[],I.FIX_NO_END_PATTERN=[],H.Utils=class F{static capitalizeFirstLetter(U){return U.charAt(0).toUpperCase()+U.slice(1)}static tagLang(U){let E=new Map([["EASY","NB"],["MEDIUM","TH"],["HARD","VD"],["HARDEST","VDC"],["MC","TN"],["FB","\u0110T"],["ES","TL"],["TF","\u0110S"],["GR","NH"]]);return E.has(U)?E.get(U):U}static parseInclude(U){let E=U.split("=>"),d=E.length>1?E[1]:-1,w=E[0];w=w.replaceAll(/\[@([CTQGK][-\d]+):(:(user[_0-9]*)-)?[^\]]*\]/g,"$1:$3").replaceAll(/\[@(F:[^\]]*)\]/g,"$1").replaceAll(/\[[^\]\d]+(\d+)[^\]\d]+\]/g,"$1").replaceAll(/\[[^\]]+\]/g,"");let ee,k=w.split("."),M=[],B=[],Q=[],D=[],Z=[],V=[],oe=[],K=[],ne=[],de=new Map([["EASY","NB"],["MEDIUM","TH"],["HARD","VD"],["HARDEST","VDC"],["MC","TN"],["FB","\u0110T"],["ES","TL"],["TF","\u0110S"],["GR","NH"]]),fe=[];for(let xe=k.length-1;xe>=0;xe--){let Ge=k[xe].trim();if(/^\d*$/.test(Ge)){ee=+Ge;continue}let nt=Ge.split(",");for(let ht of nt){let Ct=ht.split(":"),mt=Ct[0],e=Ct[1]??"";if(/^G[-\d]+$/.test(mt.trim()))M.push(+mt.trim().substring(1));else if(/^Q[-\d]+$/.test(mt.trim()))Q.push(+mt.trim().substring(1)),K.push(e),fe.push({type:"QUEST",id:+mt.trim().substring(1)});else if(/^C[-\d]+$/.test(mt.trim())){let Dt=+mt.trim().substring(1);D.push(Dt),V.push(e),fe.push({type:""!=e?"SHARE":"CATEGORY",id:Dt})}else if(/^K[-\d]+$/.test(mt.trim())){let Dt=+mt.trim().substring(1);D.push(Dt),V.push(e),fe.push({type:""!=e?"SHARE":"KNOWLEDGE",id:Dt})}else if(/^T[-\d]+$/.test(mt.trim()))B.push(+mt.trim().substring(1)),oe.push(e),fe.push({type:"EXAM",id:+mt.trim().substring(1),groupIds:M});else if(ht.trim().startsWith("F:")){let Dt=ht.trim().substring(2);ne.push(de.has(Dt)?de.get(Dt):Dt)}}if(fe.length>0){if(ne.length>0){let ht=["TL","TN","\u0110T","ES","MC","FB","TF","GR","\u0110S","NH"];for(let Ct of fe)Ct.tags=ne.filter(mt=>ht.indexOf(mt)<0),Ct.answerTypes=ne.filter(mt=>ht.indexOf(mt)>=0).map(mt=>"TL"==mt||"ES"==mt?3:"TN"==mt||"MC"==mt?1:"\u0110S"==mt?5:"NH"==mt?0:4)}break}}return Q.length>0&&(ee=Q.length),Z.push(...V),Z.push(...oe),Z.push(...K),{paths:fe,shareTypes:Z,catId:D,examId:B,tag:ne,groupId:M,questId:Q,getNum:ee,idx:d}}static getNumberFromStr(U){let E=U.match(/(\d+)/);return E?E[0]:""}static removeAccents(U){let E=["a\xe0\u1ea3\xe3\xe1\u1ea1\u0103\u1eb1\u1eb3\u1eb5\u1eaf\u1eb7\xe2\u1ea7\u1ea9\u1eab\u1ea5\u1ead","A\xc0\u1ea2\xc3\xc1\u1ea0\u0102\u1eb0\u1eb2\u1eb4\u1eae\u1eb6\xc2\u1ea6\u1ea8\u1eaa\u1ea4\u1eac","d\u0111","D\u0110","e\xe8\u1ebb\u1ebd\xe9\u1eb9\xea\u1ec1\u1ec3\u1ec5\u1ebf\u1ec7","E\xc8\u1eba\u1ebc\xc9\u1eb8\xca\u1ec0\u1ec2\u1ec4\u1ebe\u1ec6","i\xec\u1ec9\u0129\xed\u1ecb","I\xcc\u1ec8\u0128\xcd\u1eca","o\xf2\u1ecf\xf5\xf3\u1ecd\xf4\u1ed3\u1ed5\u1ed7\u1ed1\u1ed9\u01a1\u1edd\u1edf\u1ee1\u1edb\u1ee3","O\xd2\u1ece\xd5\xd3\u1ecc\xd4\u1ed2\u1ed4\u1ed6\u1ed0\u1ed8\u01a0\u1edc\u1ede\u1ee0\u1eda\u1ee2","u\xf9\u1ee7\u0169\xfa\u1ee5\u01b0\u1eeb\u1eed\u1eef\u1ee9\u1ef1","U\xd9\u1ee6\u0168\xda\u1ee4\u01af\u1eea\u1eec\u1eee\u1ee8\u1ef0","y\u1ef3\u1ef7\u1ef9\xfd\u1ef5","Y\u1ef2\u1ef6\u1ef8\xdd\u1ef4"];for(const d of E){let C=new RegExp("["+d.substring(1)+"]","g");U=U.replace(C,d[0])}return U}static zeroPad(U,E){return U=U||2,(new Array(U).join("0")+E).slice(-1*U)}static removeInvisibleChars(U){return U.replace(/[\u200B-\u200D\uFEFF]/g," ")}}},81874:(Ne,H,I)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.ExamParser=void 0;const F=I(8897),h=I(88501),U=I(30549),E=I(53781),d=I(34143),C=I(13826),g=I(51453),_=I(54716),x=I(7411),w=I(52169),k=I(71598),M=I(60987),B=I(77780),Q=I(2630),D=I(37805),Z=I(2721);H.ExamParser=class V{constructor(K){this.DEF_QUEST_NAME="c\xe2u ",this.lang="vi",F.CONST.load(K)}setLang(K){this.lang=K,this.DEF_QUEST_NAME="vi"==K?"c\xe2u ":"question "}fixItems(K){let ee=["(^b\xe0i\\s+\\d+)"],ne=[],de=0,fe=!1;for(let Le of K)Le.type==w.QuestionParser.TYPE_NAME&&Le.olabel&&(Le.olabel.trim().match(ee.join("|"))?ne.push(de):fe=!0),de++;if(fe)for(let Le of ne)Le+1<K.length&&K[Le+1].type==w.QuestionParser.TYPE_NAME&&(K[Le].type=k.SectionParser.TYPE_NAME,K[Le].pos=[0,0]);return K}parse(K,ee,ne){const de="__NO-SEC__";for(let at=0;at<K.length;at++)K[at]=F.Utils.removeInvisibleChars(K[at]);(new d.DapAnChiTietParser).fixNoEnd(K);let fe=this.findItems(K,ne);this.fixItems(fe);let Le=new Map,xe=new Map,Ge=[],nt=null,ht=0,Ct=de,mt="main",e=0,Dt=0,wt=new Map,Yt=new Map,sn=de;for(let at=0;at<fe.length;at++){let Lt=fe[at],Mn=at==fe.length-1?void 0:fe[at+1],$t=this.getPartInfo(K,Lt,Mn);if(this.loadText(K,$t),Lt.type==k.SectionParser.TYPE_NAME&&"main"==mt&&(ht++,Ct=Lt.extInfo??ht+"",Ge.push({label:ht,parts:$t,answers:[],isGroup:!0})),Lt.type==w.QuestionParser.TYPE_NAME){if(Mn&&Mn.type==E.AnswerParser.TYPE_NAME&&Mn.pos[2]>0){let Dn;for(let Ln=at+1;Ln<fe.length;Ln++)if(fe[Ln].type!=E.AnswerParser.TYPE_NAME){Dn=fe[Ln];break}$t=this.getPartInfo(K,Lt,Dn),this.loadText(K,$t)}let Zn=Lt.label?+Lt.label:0,on=Le.get(Ct+"--"+Zn);if(!on&&1==xe.get(Zn)?.length&&(on=xe.get(Zn)[0]),on&&"main"!=mt){let Dn=$t.map(Ln=>Ln.text).join("\n").trim();on.help&&1==Dn.split("\n").length&&0==on.answers.length?on.strAns=Dn.replaceAll(/\[![hcluib]+:\$([^\]]*)\$\]/g,"$1").trim():on.help=$t,nt=on}else if("main"==mt){on={label:Zn,olabel:Lt.olabel,answers:[],parts:$t},ht>0&&(on.group=ht,on.extInfo=Ct),Le.set(Ct+"--"+Zn,on);let Dn=xe.get(Zn);Dn?Dn.push(on):xe.set(Zn,[on]),Ge.push(on),nt=on}}if(Lt.type==E.AnswerParser.TYPE_NAME&&nt&&"main"==mt){let Zn=!1;if($t.length>0){let Nn=K[$t[0].lineIdx].replace(/\|/g,"").trim().match(F.CONST.MULTIPLE_ANS_PATTERN.join("|"));null!=Nn&&Nn.length>0&&(Zn=!0)}let on=""==Lt.olabel;Lt.pos[2]>0&&($t=[$t[0]],$t[0].e=Lt.pos[2],this.loadText(K,$t),on=!0),nt.answers.push({label:Lt.label??"",isCorrect:"*"==Lt.extInfo,parts:on?[$t[0]]:$t,isInline:on,olabel:Lt.olabel}),nt.isFixAns=on||Zn}if(Lt.type==x.IncludeParser.TYPE_NAME)if(Lt.label&&/\.\d*$/.test(Lt.label)){let Zn=Lt.label.split("."),on=+Zn[Zn.length-1],Dn=$t[0].text??"",Ln=Yt.get(Dn)??-1;if(Ln++,Yt.set(Dn,Ln),0==on){ht++,Ct=Lt.label??"";let jt=Dn+"=>"+Ln+"-0",gn=[];gn.push(...$t),gn[0]={lineIdx:$t[0].lineIdx,s:0,b:0,text:jt},Ge.push({label:ht,parts:gn,answers:[],isGroup:!0});continue}let Cn=nt?nt.label:0,Nn=0;for(let jt=0;jt<on;jt++){Nn++;let gn=Dn+"=>"+Ln+"-"+jt,Sn=[];Sn.push(...$t),Sn[0]={lineIdx:$t[0].lineIdx,s:0,b:0,text:gn};let ai={label:Cn+Nn,olabel:nt?nt.olabel?.replace(/\d+/,Cn+Nn+""):this.DEF_QUEST_NAME+(Cn+Nn)+".",answers:[],parts:Sn};ht>0&&(ai.group=ht,ai.extInfo=Ct),Le.set(Ct+"--"+ai.label,ai),Ge.push(ai),nt=ai}}else if(Lt.label&&/\.Q\d+(,Q\d+)*$/.test(Lt.label)){let Dn=Lt.label.split(".").pop()?.split(",").length??0;for(let Ln=0;Ln<Dn;Ln++){let Cn={lineIdx:$t[0].lineIdx,s:0,b:0,text:$t[0].text+"=>0-"+Ln},Nn=nt?nt.label:0,jt={label:Nn+1,olabel:nt?nt.olabel?.replace(/\d+/,Nn+1+""):this.DEF_QUEST_NAME+(Nn+1)+".",answers:[],parts:[Cn]};ht>0&&(jt.group=ht,jt.extInfo=Ct),Le.set(Ct+"--"+jt.label,jt),Ge.push(jt),nt=jt}}Lt.type==_.HuongDanParser.TYPE_NAME&&nt&&($t.splice(0,1),Mn&&Mn.type==w.QuestionParser.TYPE_NAME&&Mn.label&&!Le.has(Ct+"--"+Mn.label)||!Mn||Mn.type==k.SectionParser.TYPE_NAME||Mn.type==g.HetParser.TYPE_NAME?"main"==mt&&(nt.help=$t):"main"==mt&&(mt="info",e=Lt.lineIdx??0),e>0&&0==Dt&&(Dt=Lt.lineIdx??0)),(Lt.type==g.HetParser.TYPE_NAME||Lt.type==C.DapAnParser.TYPE_NAME)&&(mt="info",e=Lt.lineIdx??0,ht=0),Lt.type==k.SectionParser.TYPE_NAME&&"info"==mt&&Ct!=de&&(ht++,sn=Lt.extInfo??ht+"",Ct=sn),Lt.type==d.DapAnChiTietParser.TYPE_NAME&&(Lt.extInfo=sn,wt.has(sn)||wt.set(sn,[]),wt.get(sn)?.push(Lt))}let ii=new d.DapAnChiTietParser,oi=new Map;for(let at of wt){let Lt=ii.getAnsMC(K,at[1]),Mn=(0,U.toArabic)(at[0])??at[0];for(let $t of Lt)oi.set(Mn+"--"+$t[0],$t[1])}let Ut=new Map;if(e>0){let at=Dt>0?K.slice(e,Dt):K.slice(e),Lt=ii.getAnsStr(at);for(let Mn of Lt){let $t=!1,Zn=+Mn[0].split("-")[1],on=de,Dn=0;for(let Cn=0;Cn<fe.length;Cn++){let Nn=fe[Cn];Nn.type!=g.HetParser.TYPE_NAME&&Nn.type!=C.DapAnParser.TYPE_NAME?Nn.type==k.SectionParser.TYPE_NAME&&$t&&(Nn.lineIdx??0)<e+Zn&&(Dn++,on=Nn.extInfo??Dn+""):$t=!0}let Ln=(0,U.toArabic)(on);Ln&&(on=Ln+""),Ut.set(on+"--"+Mn[0].split("-")[0],Mn[1])}}let Hn=[];for(const at of Ge){if(at.isGroup){Hn.push(at);continue}let Lt=at.extInfo??de,$t=((0,U.toArabic)(Lt)??Lt)+"--"+at.label,Zn=de+"--"+at.label,on=oi.get($t)??oi.get(Zn)??"",Dn=Ut.get($t)??Ut.get(Zn)??"",Ln="";at.help&&(Ln=ii.getAnsFromHelp(at.help,K)??"");let Cn=on;if(""==Cn.trim()&&(Cn=Ln),""==Cn.trim()&&(Cn=Dn),Cn.startsWith("!")&&(at.answers.length>0&&Cn.length==2*at.answers.length+1?(Cn=Cn.replaceAll(/[a-dA-D][Ss]/g,"").replaceAll(/([a-dA-D])[\u0111\u0110Dd]/g,"$1").toUpperCase(),at.typeCode="TF"):Cn=Cn.substring(1)),at.answers.length>0){if(0==at.answers.filter(gn=>gn.isCorrect).length)for(const gn of at.answers)/^!?[A-H,.\s]+$/.test(Cn)&&Cn.indexOf(gn.label.toUpperCase())>=0&&(gn.isCorrect=!0);let jt=at.answers.filter(gn=>gn.isCorrect).length;if(at.typeCode||(at.typeCode=jt>1?"MC":"SC"),0==jt&&""!=Cn&&"!"!=Cn){at.typeCode="FI",at.strAns=Cn;for(let gn of at.answers)for(let Sn of gn.parts)Sn.s=Sn.b,this.loadText(K,[Sn]),at.parts.push(Sn);at.answers=[]}}else at.strAns=""==Cn&&at.strAns?at.strAns:Cn,!at.typeCode&&""!=at.strAns&&(at.typeCode="FI");if(at.typeCode||(at.typeCode="ES"),at.answers.length>0){if(")"==at.answers[0].olabel&&"a"==at.answers[0].label){if(at.typeCode="TF",4!=at.answers.length&&0==at.answers.filter(jt=>jt.isCorrect).length){at.typeCode="ES";for(let jt of at.answers)for(let gn of jt.parts)gn.s=gn.b,this.loadText(K,[gn]),at.parts.push(gn);at.answers=[]}}else if(at.group){let jt=Hn.filter(gn=>gn.label==at.group)[0];if(jt){let Sn=jt.parts.map(ai=>ai.text).join(" ").toLowerCase().match(F.CONST.GROUP_TF_PATTERN.join("|"));Sn&&Sn.length>0&&(at.typeCode="TF")}}if(0==at.answers.filter(jt=>jt.isCorrect).length&&4==at.answers.length&&"a"==at.answers[0].label){let jt=[];for(const Jo of at.answers){let Fo=Jo.parts.filter(No=>""!=(No.text??"").trim());jt.push(Fo.length>0?Fo[Fo.length-1]:void 0)}let gn=!0,Sn="",ai=ii.isDSPat(jt[3]?.text??"");if(""!=ai)Sn=ai.replaceAll(/[a-dA-D][Ss]/g,"").replaceAll(/([a-dA-D])[\u0111\u0110Dd]/g,"$1").toUpperCase(),jt[3].text="";else{let Jo=[],Fo=0;for(let ji of jt){let No=!1,xo=ji?.text?.match(/(\[![!buiclh]+:\$)?\s*[\u0110S][.\s]*(\$\])?\s*\.?\s*$/g);if(xo&&xo.length>0&&(No=!0,Jo.push(xo[0]),ii.cleanStyle(xo[0]).trim().startsWith("\u0110")&&(Sn+=at.answers[Fo].label.toUpperCase())),!No){gn=!1;break}Fo++}if(gn){let ji=0;for(let No of Jo){let xo=(jt[ji].text?.length??0)-No.length;jt[ji].text=jt[ji]?.text?.substring(0,xo),ji++}}}if(gn){for(const Jo of at.answers)/^!?[A-H,\s]+$/.test(Sn)&&Sn.indexOf(Jo.label.toUpperCase())>=0&&(Jo.isCorrect=!0);at.typeCode="TF"}}}if(at.group){let Nn=Hn.filter(jt=>jt.label==at.group)[0];if(Nn){let gn=Nn.parts.map(Sn=>Sn.text).join(" ").toLowerCase().match(F.CONST.GROUP_FI_PATTERN.join("|"));if(gn&&gn.length>0&&(at.typeCode="FI",at.answers.length>0)){for(let Sn of at.answers)for(let ai of Sn.parts)ai.s=ai.b,this.loadText(K,[ai]),at.parts.push(ai);at.answers=[]}}}}for(let at of Ge)if("TF"==at.typeCode)for(let Lt of at.answers){let Mn=Lt.parts[0].text??"",$t=Mn.match(/^[\s.,):]*\[\s*([0-4])\s*\]/);Lt.order=$t?+$t[1]:0,$t&&(Mn=Mn.replace($t[0],""),Lt.parts[0].text=Mn)}return this.metadata={res1:oi,res2:Ut},Ge}checkErr(K){(new h.Checker).run(K)}static fixNoEnd(K){(new d.DapAnChiTietParser).fixNoEnd(K)}getPartInfo(K,ee,ne){let de=ee.lineIdx??0,fe=ne?.lineIdx??K.length-1;if(de==fe)return ne?[{lineIdx:de,b:ee.pos[0],s:ee.pos[1],e:ne?.pos[0]}]:[{lineIdx:de,b:ee.pos[0],s:ee.pos[1]}];{let Le=[];Le.push({lineIdx:de,b:ee.pos[0],s:ee.pos[1]});for(let xe=de+1;xe<fe;xe++)Le.push({lineIdx:xe,b:0,s:0});if(ne){let xe=ne?.pos[0];""!=K[fe].substring(0,xe).replace(/\|/g,"").trim()&&Le.push({lineIdx:fe,b:0,s:0,e:xe})}else Le.push({lineIdx:fe,b:0,s:0});return Le}}loadText(K,ee){for(const ne of ee)ne.text=K[ne.lineIdx].substring(ne.s,ne.e)}findItems(K,ee){let ne=["remove:q-s-a => 1","remove:s-s => 0","remove:h-h => 0","remove:h-a => 0","rmdup:a-a => void","remove:q-a:\\d+\\-[^A] => 0","remove:s-a:.+\\-[^A] => 0","remove:a-a:A\\-[^BC] => 0","remove:a-a:B\\-[^CD] => 0","remove:a-a:C\\-[^DB] => 0","remove:a-a:D\\-[^E] => 0","remove:a-a:E\\-[^F] => 0","remove:a-a-a:A-B\\-[^C] => 0","remove:a-a-a:A-C\\-[^B] => 0","removea:a-a-a-a:[a-e]-A-B-C => 3","removea:a-a-a-a:a-C-b-c => 2","same:q:QUESTION_PATTERN,QUESTION_PATTERN2 => void"];ee&&(ne=["remove:q-s-a => 1","remove:s-s => 0","remove:h-h => 0","remove:h-a => 0","remove:q-a:\\d+\\-[^A] => 0","remove:s-a:.+\\-[^A] => 0","remove:a-a:A\\-[^ABC] => 0","remove:a-a:B\\-[^ABCD] => 0","remove:a-a:C\\-[^ABCDE] => 0","remove:a-a:D\\-[^ADEF] => 0","remove:a-a:E\\-[^AEF] => 0","removea:a-a-a-a:[a-e]-A-B-C => 3","removea:a-a-a-a:a-C-b-c => 2","same:q:QUESTION_PATTERN,QUESTION_PATTERN2 => void"]);let de=[new D.RemoveRule,new M.ModifyAnsRule,new Z.SameKindRule,new Q.RemoveDupRule],fe=[new B.RemoveARule],Le=[{parser:new d.DapAnChiTietParser,also:[2]},{parser:new k.SectionParser,from:[0],to:[1],also:[3]},{parser:new w.QuestionParser,from:[0],to:[1],also:[3]},{parser:new E.AnswerParser},{parser:new g.HetParser,to:[2]},{parser:new C.DapAnParser,to:[2],also:[6]},{parser:new _.HuongDanParser},{parser:new x.IncludeParser,from:[0],to:[1]}],xe=[{name:"start",expect:[1,2,7]},{name:"main",expect:[1,2,3,4,5,6,7]},{name:"info",expect:[0,1,2,6]}],Ge=xe[0],nt=[],ht=0;for(const Dt of K)if(""!=Dt){for(const wt of Ge.expect){let ye=Le[wt],Yt=ye.parser.parse(Dt);if(Yt.length>0){if(Yt.forEach(sn=>sn.lineIdx=ht),nt.push(...Yt),ye.parser.TYPE==_.HuongDanParser.TYPE_NAME){let sn=nt.filter(Ut=>Ut.type==w.QuestionParser.TYPE_NAME).length,ii=nt.filter(Ut=>Ut.type==_.HuongDanParser.TYPE_NAME).length,oi=nt.filter(Ut=>Ut.type==C.DapAnParser.TYPE_NAME).length;if(Ge.name==xe[1].name&&sn>1&&0==ii){Ge=xe[2];let Ut=xe[2].expect.indexOf(6);Ut>=0&&xe[2].expect.splice(Ut,1)}else if(Ge.name==xe[2].name){oi>0&&Le[0].parser.off();let Ut=xe[2].expect.indexOf(6);Ut>=0&&xe[2].expect.splice(Ut,1)}}if(ye.to){let sn=0;for(const ii of ye.to)(ye.from&&xe[ye.from[sn]]==Ge||!ye.from)&&(Ge=xe[ii]),sn++}if(ye.also)for(const sn of ye.also){let oi=nt[nt.length-1].pos[1],Ut=Le[sn].parser.parse(Dt.substring(oi));Ut.length>0&&(Ut.forEach(Hn=>{Hn.lineIdx=ht;for(let at=0;at<Hn.pos.length;at++)Hn.pos[at]=Hn.pos[at]+oi}),nt.push(...Ut))}break}}ht++}else ht++;let Ct=[],mt=[];for(const Dt of ne){for(const wt of de){let ye=wt.load(Dt);if(ye){Ct.push(ye);break}}for(const wt of fe){let ye=wt.load(Dt);if(ye){mt.push(ye);break}}}let e=0;for(;e<nt.length;){for(const Dt of mt){let wt=nt.length;if(Dt.run(nt,e)){let ye=wt-nt.length;ye>0&&(e-=ye+1);break}}e++}for(e=0;e<nt.length;){for(const Dt of Ct){let wt=nt.length;if(Dt.run(nt,e)){let ye=wt-nt.length;ye>0&&(e-=ye+1);break}}e++}return nt}}},99737:(Ne,H)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.EditorApiService=void 0,H.EditorApiService=class I{}},71834:(Ne,H,I)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.ExamIntellisense=void 0;const F=I(81874),h=I(7394),U=I(74375),E=I(50270),d=I(96701),C=I(65344),g=I(30549);H.ExamIntellisense=class _{constructor(w){this.conf=w,this._lstQuest=[],this._lines=[],this.singleMode=!1,this.exParser=new F.ExamParser(w),this.apiService=null}setSingleMode(w){this.singleMode=w}setLines(w){this._lines=w}setApiService(w){this.apiService=w}parse(w){return this._lstQuest=this.exParser.parse(this._lines,w,!1),this._lstQuest}getAutofillValue(w,k,M){if(0==this._lstQuest.length)return[];if(/^\[?\s*@/.test(this._lines[w].trim()))return[];let Q=[],D=this.getCurPos(w,k),Z=D[0],V=D[1],oe=D[2],K=this._lines[w>0?w-1:0];if(Z&&Z.parts.length>0&&Z.parts[0].text?.trim().startsWith("[@"),K.startsWith("[@")||""==K.trim())return[];if(V&&Z){let ee="ABCDEFGHIJKLMN";V.label==V.label.toLowerCase()&&(ee=ee.toLowerCase());let ne=ee.indexOf(V.label),de=ee[ne+1]+V.olabel+" ",fe=V.label+V.olabel+" ";if(!this.singleMode&&this._lines[V.parts[0].lineIdx].trim()==fe.trim()&&V.parts[0].lineIdx!=w){let Le=Z.parts[0],Ge=this._lines[Le.lineIdx].substring(Le.b,Le.s).replace(/\d+/,Z.label+1+"")+" ";return Q.push(`${V.parts[0].lineIdx}|0|${fe.length}|`),Q.push(`${w}|${k}|${k}|${Ge}`),Q}if(V.label.toUpperCase()<"D"&&("enter"!=M||w>0&&""!=this._lines[w-1].trim()&&V.parts[0].lineIdx!=w))return Q.push(`${w}|${k}|${k}|${de}`),Q;if(!this.singleMode&&V.label.toUpperCase()>="D"&&V.parts[0].lineIdx!=w&&"enter"==M&&w==this._lines.length-1){let Le=Z.parts[0],Ge=this._lines[Le.lineIdx].substring(Le.b,Le.s).replace(/\d+/,Z.label+1+"")+" ";return Q.push(`${w}|${k}|${k}|\n${Ge}`),Q}}if(!V&&!oe&&Z&&"enter"==M&&""==this._lines[w].trim()&&w>0&&""!=this._lines[w-1].trim()){let ee=Z.parts[0],ne=this._lines[ee.lineIdx].substring(ee.s).trim();if(this.singleMode||""!=ne)if(0==Z.answers.length)Q.push(`${w}|${k}|${k}|A. `);else if(!this.singleMode){let de=Z.parts[0],Le=this._lines[de.lineIdx].substring(de.b,de.s).replace(/\d+/,Z.label+1+"")+" ";Q.push(`${w}|${k}|${k}|${Le}`)}return Q}return Q}getSuggestions(w,k,M,B){return new Promise(Q=>{let D=B?.substring(0,k)??"",Z=this.singleMode?[new h.AnsSugg,new E.EndSugg,new U.ChooseSugg]:[new d.IncludeSugg(this.apiService,Q),new C.QuestSugg,new h.AnsSugg,new g.SectionSugg,new E.EndSugg,new U.ChooseSugg],V=[],oe=this.getCurPos(w,k),K=oe[0],ee=oe[1],fe=K?{type:oe[2]?"h":ee?"a":"q",quest:K,ansLabel:ee?ee.label:void 0,secLabel:K.group?this._lstQuest.filter(Le=>Le.isGroup).pop()?.parts[0].text:void 0,lineIdx:w,col:k}:void 0;for(let Le of Z){let xe=Le.run(D,M,fe);if(1==xe.length&&"-1"==xe[0])return;V.push(...xe)}Q(V)})}getEditHint(){let k=0,M=[],B=!1,Q=null;for(const D of this._lstQuest){if(D.isGroup){Q=D;continue}let Z="",V="A".charCodeAt(0)-1,oe=!1;for(const K of D.answers){if(""==K.olabel)break;if(Z+=K.label,!oe&&!"ABCDEFGHIJKLMN".startsWith(Z.toUpperCase())&&(oe=!0),V++,oe){let ee=K.parts[0],ne="*"==this._lines[ee.lineIdx].substring(ee.b,ee.b+1)?1:0;M.push(`${ee.lineIdx}|${ee.b+ne}|${ee.b+ne+1}|${String.fromCharCode(V)}`)}}if(!B&&D.label-k<=0&&k>0&&null!=Q&&!Q.isGroup&&(B=!0),B){let K=D.parts[0],ne=this._lines[K.lineIdx].substring(K.b,K.s).replace(/\d+/,k+1+"");M.push(`${K.lineIdx}|${K.b}|${K.s}|${ne}`),k++}else k=D.label;Q=D}return M}getCurPos(w,k){let M=!1,B=null,Q=null,D=!1,Z=!1;for(const V of this._lstQuest)if(!V.isGroup){for(const oe of V.parts)if(oe.lineIdx==w){M=!0,B=V,Q=null,V.parts.length>0&&V.parts[0].text?.trim().startsWith("[@")&&(Z=!0,M=!1);break}if(Z&&V.parts.length>0&&!V.parts[0].text?.trim().startsWith("[@"))break;for(const oe of V.answers)for(const K of oe.parts)if(K.lineIdx==w&&K.s<=k&&(!K.e||K.e>=k)){M=!0,B=V,Q=oe;break}if(M)break;if(V.help)for(const oe of V.help)if(oe.lineIdx==w&&oe.s<=k&&(!oe.e||oe.e>=k)){M=!0,B=V,Q=null,D=!0;break}if(M)break}return[B,Q,D]}}},88501:(Ne,H,I)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.Checker=void 0;const F=I(14057);H.Checker=class h{constructor(){this.lstChecker=[new F.NoAnsErr]}run(E){for(let d of E){d.error=[];for(let C of this.lstChecker){let g=C.check(d);d.error.push(...g)}}}}},71437:(Ne,H)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.ErrorChecker=void 0,H.ErrorChecker=class I{}},14057:(Ne,H,I)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.NoAnsErr=void 0;const F=I(71437);H.NoAnsErr=class h extends F.ErrorChecker{check(E){return"SC"!=E.typeCode&&"MC"!=E.typeCode||0!=E.answers.filter(C=>C.isCorrect).length?[]:[{type:"NO_ANS",msg:"ERR_NO_CORRECT_ANS",quickFix:["B\u1ea5m v\xe0o A, B, C ho\u1eb7c D \u0111\u1ec3 ch\u1ecdn l\xe0m \u0111\xe1p \xe1n \u0111\xfang"]}]}}},7394:(Ne,H,I)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.AnsSugg=void 0;const F=I(47078);H.AnsSugg=class h extends F.Sugg{run(E,d,C){if(!C||"h"==C.type||/^\[?\s*@/.test(E))return[];let g=C.ansLabel?String.fromCharCode(C.ansLabel.charCodeAt(0)+1)+".":"A.";return[g+"|"+g+" "]}}},74375:(Ne,H,I)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.ChooseSugg=void 0;const F=I(47078);H.ChooseSugg=class h extends F.Sugg{run(E,d,C){if(E!=d||!C)return[];let g=[];if("h"==C.type&&C.quest)for(let _ of C.quest.answers)g.push(`azt_lang_sugg_choose ${_.label}|azt_lang_sugg_choose ${_.label}`);return g}}},50270:(Ne,H,I)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.EndSugg=void 0;const F=I(47078);H.EndSugg=class h extends F.Sugg{run(E,d){return E!=d?[]:["azt_lang_sugg_help_unsign|azt_lang_sugg_help\n","azt_lang_sugg_help|azt_lang_sugg_help\n","azt_lang_sugg_ans_table_unsign|azt_lang_sugg_ans_table_upper\n","azt_lang_sugg_ans_table|azt_lang_sugg_ans_table_upper\n","azt_lang_sugg_the_end_short_unsign|azt_lang_sugg_the_end\n","azt_lang_sugg_the_end_short|azt_lang_sugg_the_end\n","azt_lang_sugg_instruction_unsign|azt_lang_sugg_instruction\n","azt_lang_sugg_instruction|azt_lang_sugg_instruction\n"]}}},96701:(Ne,H,I)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.IncludeSugg=void 0;const F=I(8897),h=I(47078);H.IncludeSugg=class U extends h.Sugg{constructor(d,C){super(),this.apiService=d,this.resolve=C}run(d){let C=d;if(C.startsWith("@[")&&(C=C.substring(1)),/^\[?\s*@/.test(C)&&null!=this.apiService){let g=C.replace("]..","].").split("].").map(oe=>oe.replace("]","").replace("[","").replace("@","").trim()),_=g[g.length-1],x=0,w=!0,k="azt_lang_sugg_random x azt_lang_sugg_question|[azt_lang_sugg_random ${1:2} azt_lang_sugg_question]|snippet",M="azt_lang_sugg_get_all|[ALL]|snippet",B=["azt_lang_sugg_filter: azt_lang_sugg_level azt_lang_sugg_level_easy|[@F:azt_lang_tag_NB].|snippet","azt_lang_sugg_filter: azt_lang_sugg_level azt_lang_sugg_level_medium|[@F:azt_lang_tag_TH].|snippet","azt_lang_sugg_filter: azt_lang_sugg_level azt_lang_sugg_level_hard|[@F:azt_lang_tag_VD].|snippet","azt_lang_sugg_filter: azt_lang_sugg_level azt_lang_sugg_level_hardest|[@F:azt_lang_tag_VDC].|snippet","azt_lang_sugg_filter: azt_lang_sugg_type azt_lang_sugg_type_multiple_choice|[@F:azt_lang_tag_TN].|snippet","azt_lang_sugg_filter: azt_lang_sugg_type azt_lang_sugg_type_fill_blank|[@F:azt_lang_tag_DT].|snippet","azt_lang_sugg_filter: azt_lang_sugg_type azt_lang_sugg_type_essay|[@F:azt_lang_tag_TL].|snippet"],Q="",D="",V=C.matchAll(/\[@C(\d+)::user\-[^\]]*\]/g);for(;;){let oe=V.next();if(oe.done)break;D="user_"+oe.value[1]}if(g.length>1){_.endsWith(",")&&/^([CTGQH][\-\d]+|F):/.test(_)&&(Q=_.substring(0,1),_="");let oe=g[g.length-2];if(oe.startsWith("F:"))return this.resolve([k]),["-1"];if(oe.indexOf(",")>=0){let K=[];return""==Q&&K.push(k),K.push(...B),this.resolve(K),["-1"]}if(_.trim().length>0&&!/^[CTGQH][\-\d]+:/.test(_))return this.resolve([]),["-1"];if(!/^[CTGQH][\-\d]+:/.test(oe))return this.resolve([]),["-1"];if(/^C[\-\d]+:/.test(oe)&&(x=+oe.split(":")[0].trim().substring(1),/^C[\-\d]+::user\-/.test(oe)&&(D="user")),/^T[\-\d]+:/.test(oe)&&(x=+oe.split(":")[0].trim().substring(1),w=!1),/^G[\-\d]+:/.test(oe)){let K=oe.split(":")[1].split("-")[0];return this.resolve(["azt_lang_sugg_get_group_title|[azt_lang_sugg_get_title]|snippet",`azt_lang_sugg_get_all|[azt_lang_sugg_get_title]\n${C}[azt_lang_sugg_get_all ${K} azt_lang_sugg_question]|snippet`,`azt_lang_sugg_random x azt_lang_sugg_question|${"[azt_lang_sugg_get_title]\n"+C+"[azt_lang_sugg_random ${1:2} azt_lang_sugg_question]"}|snippet`]),["-1"]}if(/^Q[\-\d]+:/.test(oe)||/^Q[\-\d]+:/.test(_))return this.resolve([]),["-1"];if(/^H[\-\d]+:/.test(oe)||/^Q[\-\d]+:/.test(_))return this.resolve([]),["-1"]}if(w)return"F"==Q?(this.resolve(B),["-1"]):(this.apiService.searchRes(D,x).then(oe=>{let K="";-1==x&&(K=":user-"),(0==x||-1==x)&&(k="");let ee=oe.map(ne=>{let de=ne.name;return de=de.replaceAll(/[\[\],\.\-]+/g,""),`${de}|[@${("cat"==ne.type?"C":"T")+ne.id}:${K}${de}].|${"cat"==ne.type?"folder":"file"}`});""!=k&&""==Q&&(ee.push(k),ee.push(...B)),this.resolve(ee)}),["-1"]);if(C.endsWith(".")||C.endsWith(",")){let oe=Math.abs(x);return this.apiService.getQuestion(oe).then(K=>{let ee=K.map(fe=>{let Le=("group"==fe.type?"azt_lang_sugg_group_cc ":"azt_lang_sugg_question_cc ")+fe.label,xe=("group"==fe.type?"G":"Q")+fe.id,Ge="group"==fe.type?".":"",nt=fe.content,ht="group"==fe.type?"class":"function",Ct="group"==fe.type?K.filter(wt=>wt.groupId==fe.id).length+"-":"",mt="group"!=fe.type&&fe.groupId?"G"+F.Utils.zeroPad(3,fe.groupId):"G000";return"group"==fe.type&&(mt="G"+F.Utils.zeroPad(3,fe.id)),{name:Le,code:xe,groupQnum:Ct,posfix:Ge,icon:ht,sort:`${mt}-${"group"==fe.type?"G"+F.Utils.zeroPad(3,fe.id):"Q"+F.Utils.zeroPad(10,fe.id)}`,doc:nt}});ee.sort((fe,Le)=>fe.sort>Le.sort?1:-1);let ne=ee.map(fe=>`${fe.name}|[@${fe.code}:${fe.groupQnum}${fe.name}]${fe.posfix}|${fe.icon}|${fe.sort}|${fe.doc}`),de=[];if(""!=k){""==Q&&(de.push(k),de.push(...B));let fe=M.split("|");fe[1]=ee.map((Le,xe)=>(0==xe?"":C)+`[@${Le.code}:${Le.groupQnum}${Le.name}]`+(Le.code.startsWith("G")?".[azt_lang_sugg_get_title]":"")).join("\n"),de.push(fe.join("|"))}de.push(...ne),"F"==Q&&(de=B),this.resolve(de)}),["-1"]}return this.resolve([]),["-1"]}return[]}}},65344:(Ne,H,I)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.QuestSugg=void 0;const F=I(8897),h=I(47078);H.QuestSugg=class U extends h.Sugg{run(d,C,g){if(d!=C)return[];if(!g)return["azt_lang_sugg_question_cc 1. |azt_lang_sugg_question_cc 1. ","azt_lang_sugg_question_cc_unsign 1. |azt_lang_sugg_question_cc 1. ","Question 1. |Question 1. "];let _=g.quest.olabel??"azt_lang_sugg_question_cc 1.",x=+F.Utils.getNumberFromStr(_),w=_.replace(/\d+/,x+1+"");return w=g.quest.olabel?F.Utils.capitalizeFirstLetter(w):w,[F.Utils.removeAccents(w)+"|"+w+" ",w+"|"+w+" "]}}},30549:(Ne,H,I)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.SectionSugg=H.toArabic=H.isRoman=H.toRoman=H.BaseNumbers=H.RomanNumber=void 0;const F=I(8897),h=I(47078);class U{constructor(x,w){this.baseUnits=0,this.thousands=0,this.num=x,this.str=w}}function E(_){let x,w;if(_<=0||_>3999)return"";{x=0;let k="";for(_=Math.floor(_);_>0;)w=H.BaseNumbers[x],0===Math.floor(_/w.num)?++x:(k+=w.str,_-=w.num);return k}}function d(_){return/^M{0,4}(CM|CD|D?C{0,3})(XC|XL|L?X{0,3})(IX|IV|V?I{0,3})$/.test(_)}function C(_){let x=_.toUpperCase();if(!d(x))return null;let w=0,k=0;for(;x.length>0&&k<H.BaseNumbers.length;){const M=H.BaseNumbers[k];x.startsWith(M.str)?(w+=M.num,x=x.substring(M.str.length)):k++}return x.length>0?null:w}H.RomanNumber=U,H.BaseNumbers=[new U(1e3,"M"),new U(900,"CM"),new U(500,"D"),new U(400,"CD"),new U(100,"C"),new U(90,"XC"),new U(50,"L"),new U(40,"XL"),new U(10,"X"),new U(9,"IX"),new U(5,"V"),new U(4,"IV"),new U(1,"I")],H.toRoman=E,H.isRoman=d,H.toArabic=C,H.SectionSugg=class g extends h.Sugg{run(x,w,k){if(x!=w)return[];if(!k)return["azt_lang_sugg_part_cc 1. |azt_lang_sugg_part_cc 1. ","azt_lang_sugg_part_cc_unsign 1. |azt_lang_sugg_part_cc 1. ","Part 1. |Part 1. "];if("h"==k.type||!k.secLabel)return[];let M="";if(/^(ph\u1ea7n|part)\s*\d+\./.test(k.secLabel.toLowerCase())){let B=k.secLabel.split("."),Q=+F.Utils.getNumberFromStr(B[0]);M=B[0].replace(/\d+/,Q+1+".")}else if(/^(ph\u1ea7n|part)\s+[ivx]+\./.test(k.secLabel.toLowerCase())){let Q=k.secLabel.split(".")[0].split(" "),Z=E((C(Q.pop())??0)+1);Q.push(Z),M=Q.join(" ")+"."}else/^[ivx]+\./.test(k.secLabel.toLowerCase())&&(M=E((C(k.secLabel.split(".")[0])??0)+1)+".");return[F.Utils.removeAccents(M)+"|"+M+" ",M+"|"+M+" "]}}},47078:(Ne,H)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.Sugg=void 0,H.Sugg=class I{constructor(){this.lang="vi"}setLang(h){this.lang=h}}},8094:(Ne,H,I)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.DocxReader=void 0;const F=I(31213),h=I(58809),U=I(82820),E=I(31785),d=I(56666);H.DocxReader=class C{constructor(_=!0){_&&(this.wmf=new WMFConverter)}readFileInputEventAsArrayBuffer(_,x){let w=new FileReader;w.onload=function(k){x(k.target.result)},w.readAsArrayBuffer(_)}readFile(_,x,w,k,M){let B=this,Q=(D,Z)=>{k&&k(D,Z,"lang_auto_cong_thuc")};this.readFileInputEventAsArrayBuffer(_,function(D){azotaDocx.readDocx(D,Q).then(function(Z){console.log(Z);for(let K of Z.data)"img"==K.type&&("image/x-wmf"==K.contentType||"image/x-emf"==K.contentType?B.convert(K):K.value="data:"+K.contentType+";base64, "+K.value,!K.cssStyle&&K.height&&K.width&&"EMU"==K.measureUnit)&&(K.cssStyle=`width:${+K.width/12700}pt;height:${+K.height/12700}pt;margin-top:0px;`);let V=new Map,oe=0;for(let K of Z.data)"img"==K.type&&K.cropInfo&&V.set(oe,1),oe++;if(w&&0==V.size)w(B.parse(Z,x));else{oe=0;for(let K of Z.data){if("img"==K.type&&K.cropInfo){const ee=oe,ne=document.createElement("img");ne.src=K.value,ne.onload=()=>{B.cropImage(K,ne),V.delete(ee),0==V.size&&w&&w(B.parse(Z,x))},ne.onerror=()=>{V.delete(ee),0==V.size&&w&&w(B.parse(Z,x))}}oe++}}}).catch(Z=>{M&&M(Z.message)})})}parseText(_,x=!1){let w=_.split("\n");(new U.SmartTestReader).process(w),w=this.processUnderlineAns(w);let M=w.join("\n").replaceAll(/\?\s*(\$\])?\s+(\[![!ubclih]+:\$A\.\s*\$\])/g,"?$1\n$2").replaceAll(/\?\s*(\$\])?\s+(\[![!ubclih]+:\$A\$\]\.)/g,"?$1\n$2").replaceAll(/\?\s*(\$\])?\s+(\[![!ubclih]+:\$A\$\]\s*\[![!ubclih]+:\$\s*\.)/g,"?$1\n$2"),B=M,Q=new E.StyleRender,D=[];if(x){let Z=Q.clean(M);M=Z.res,D=Z.styles}else M=Q.render(M);return{text:M,orgText:B,images:[],mathMap:new Map,tableMap:new Map,styles:D}}parse(_,x=!1){let w="",k=[],M=new Map,B=new Map,Q=[];for(let ne of _.data)if("img"==ne.type)k.push({id:ne.key,link:ne.value,cssStyle:ne.cssStyle}),ne.cssStyle&&ne.cssStyle.split(";").length>2&&Q.push([`^\\[img:\\$${ne.key}\\$\\]`,`[img:$${ne.key}$]\n`]);else if("mathml"==ne.type){let de=+ne.key.split("_")[1];M.set(ne.key,{id:de,str:ne.value,raw:ne.docx})}else"table"==ne.type&&B.set(ne.position,ne);let D=[],Z=-1;for(let ne of _.lines){if(Z++,0==ne.length)continue;let de="";if(Array.isArray(ne[0])&&Array.isArray(ne[ne.length-1])&&Array.isArray(ne[Math.floor(ne.length/2)])){let Le=_.data.filter(nt=>nt.position==Z&&"table"==nt.type)[0],xe=Le?`!!${Le.position}!!:`:"";de=Le&&+Le.borderBottomSize>0||D.length>0&&D[D.length-1].startsWith("[*")?`[*${xe} `+ne.map(nt=>nt.map(ht=>ht.join("").replaceAll("\n","\\n").replaceAll("|","\\|")).join("\\n")).join(" | ")+" *]":ne.map(nt=>nt.map(ht=>ht.join("")).join("\n")).join(" \t ")}else de=ne.join("");for(let Le of Q)de=de.replaceAll(new RegExp(Le[0],"g"),Le[1]);let fe=de.split("\n");for(let Le of fe)D.push(Le)}(new U.SmartTestReader).process(D),D=this.processUnderlineAns(D),w=D.join("\n").replaceAll(/\?\s*(\$\])?\s+(\[![!ubclih]+:\$A\.\s*\$\])/g,"?$1\n$2").replaceAll(/\?\s*(\$\])?\s+(\[![!ubclih]+:\$A\$\]\.)/g,"?$1\n$2").replaceAll(/\?\s*(\$\])?\s+(\[![!ubclih]+:\$A\$\]\s*\[![!ubclih]+:\$\s*\.)/g,"?$1\n$2");let oe=w,K=new E.StyleRender,ee=[];if(x){let ne=K.clean(w);w=ne.res,ee=ne.styles}else w=K.render(w),w=new F.ImageRender(k).render(w),w=new h.MathRender(M).render(w),w=new d.TableRender(B).render(w);return{text:w,orgText:oe,images:k,mathMap:M,tableMap:B,styles:ee}}processUnderlineAns(_){let x=/\[[!bichl]*[!u]+[!bichl]*:\$(([^$]|\$[^\]])+)\$\]/g,w=0,k=[];for(let M of _){let B=M;if(B=B.replaceAll(/\[[!uhl]+:\$([A-D\s.]+)\$\]/g,"*$1"),/^[ABCD.\s*]+$/.test(B)&&""!=B.trim()&&w>0){B=B.replaceAll(/[\s.]+/g,"");let Q=B.indexOf("*"),D=0;if(B=B.replaceAll(/[*]+/g,""),"ABCDEFGH".indexOf(B)>=0){let Z=_[w-1].match(x);if(Z&&B.length==Z.length){for(let oe of Z)_[w-1]=_[w-1].replace(oe,oe.replace(/\[[!bichl]*[!u]+[!bichl]*:\$/g,`[${Q==D?"*":""}${B.substring(0,1)}:`).replace("$]","]")),k[k.length-1]=_[w-1],B=B.substring(1),D++;w++;continue}}}k.push(M),w++}return k}convert(_){return new Promise(x=>{if("image/x-wmf"==_.contentType)_.value=this.wmf.toPNG("data:"+_.contentType+";base64, "+_.value),x();else{let M=new ToContext2D(0,1),B=this.decodeBase64(_.value);try{FromEMF.Parse(B,M)}catch{}let Q=this.scaleCanvas(M.canvas,200,200);_.value=Q.toDataURL(),x()}})}decodeBase64(_){return Uint8Array.from(atob(_),function(x){return x.charCodeAt(0)})}scaleCanvas(_,x,w){let k=document.createElement("canvas");return k.width=x,k.height=w,k.getContext("2d")?.drawImage(_,0,0,_.width,_.height,0,0,x,w),k}cropImage(_,x){if(!_.cropInfo)return;let w=_.cropInfo.left?+_.cropInfo.left:0,k=_.cropInfo.top?+_.cropInfo.top:0,M=_.cropInfo.right?+_.cropInfo.right:0,B=_.cropInfo.bottom?+_.cropInfo.bottom:0;if(w+k+M+B==0)return;let Q=x.width,D=x.height,Z=w*Q/1e5,V=k*D/1e5,ee=Q-M*Q/1e5-Z,ne=D-B*D/1e5-V;const de=document.createElement("canvas");de.width=ee,de.height=ne,de.getContext("2d")?.drawImage(x,Z,V,ee,ne,0,0,ee,ne),_.value=de.toDataURL()}}},4778:(Ne,H)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.DicReplaceRender=void 0,H.DicReplaceRender=class I{constructor(){this.chemBase=["H","He","Li","Be","B","C","N","O","F","Ne","Na","Mg","Al","Si","P","S","Cl","Ar","K","Ca","Sc","Ti","V","Cr","Mn","Fe","Co","Ni","Cu","Zn","Ga","Ge","As","Se","Br","Kr","Rb","Sr","Y","Zr","Nb","Mo","Tc","Ru","Rh","Pd","Ag","Cd","In","Sn","Sb","Te","I","Xe","Cs","Ba","La","Ce","Pr","Nd","Pm","Sm","Eu","Gd","Tb","Dy","Ho","Er","Tm","Yb","Lu","Hf","Ta","W","Re","Os","Ir","Pt","Au","Hg","Tl","Pb","Bi","Po","At","Rn","Fr","Ra","Ac","Th","Pa","U","Np","Pu","Am","Cm","Bk","Cf","Es","Fm","Md","No","Lr","Rf","Db","Sg","Bh","Hs","Mt","Ds","Rg","Cn","Nh","Fl","Mc","Lv","Ts","Og"]}makeid(h){let U="";let C=0;for(;C<h;)U+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random())),C+=1;return U}findAttributes(h){const U={content:"",attr:[]};return U.content=h.replace(/(\w+)=["']?((?:.(?!["']?\s+=|\s*\/?[>"']))+.)["']?/g,E=>{const d=this.makeid(25);return U.attr.push({key:d,value:E}),d}),U}processMapException(h,U){return U.forEach(E=>{h=h.replace(E.key,E.value)}),h}render(h){if(h.trim().startsWith("[@"))return h;const U=this.findAttributes(h);let E=h=U.content,d=this.chemBase.join("|"),C=new RegExp(`(?:[\\s,.:;"'=\u2013\\-\\/\\+\\?<>]|^)\\(?\\d*(${d})+\\d*(${d}|\\d+|\\(|\\))*(?:(?=[\\s,.:;"'=\u2013\\-\\/\\+\\?<>])|\\(\\w+\\)|$)`,"g"),g=E.matchAll(C),_=[];for(;;){let w=g.next();if(w.done)break;let k=0==w.value.index?w.value[0]:w.value[0].substring(1);k.replace("(","").replace(")","").length<=1||_.push({s:0==w.value.index?0:w.value.index+1,len:k.length,val:this.autoFormat(k)})}if(_.sort((w,k)=>w.s>k.s?-1:1),_.filter(w=>/\d+/.test(w.val)).length>0)for(let w of _)E=E.substring(0,w.s)+"\\("+w.val+"\\)"+E.substring(w.s+w.len);return this.processMapException(E,U.attr)}autoFormat(h){return h.replaceAll(/([^(])(\d+)/g,"$1_{$2}")}}},93562:(Ne,H,I)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.ExamReader=void 0;const F=I(8094),h=I(31785),U=I(58809),E=I(56666),d=I(31213),C=I(85130),g=I(61644),_=I(82826),x=I(4778),w=I(81874);H.ExamReader=class k{constructor(B){this.cfg=B}read(B,Q,D,Z){(new F.DocxReader).readFile(B,!0,oe=>{console.log(oe),this.parse(oe,Q)},D,Z)}readFromText(B,Q){let Z=new F.DocxReader(!1).parseText(B,!0);this.parse(Z,Q)}setAnsStyle(B,Q,D){let Z=new h.StyleRender,V=B.answers.length>0&&0==B.answers.filter(fe=>fe.isCorrect).length,oe=[],K=[],ee=!1,ne=!0,de=[];for(let fe of B.answers){let Le=Z.getAnsStyle(Q,fe.parts[0],D);Le.indexOf("!fl")>=0&&(V&&K.push(fe),Le.indexOf("!cl")<0&&(ne=!1)),V&&(Le.indexOf("!u")>=0&&(fe.isCorrect=!0,ee=!0),(Le.indexOf("!cl")>=0||Le.indexOf("!hl")>=0)&&oe.push(fe)),de.push(Le)}if(!ee&&K.length<B.answers.length&&K.length>0)for(let fe of K)fe.isCorrect=!0;else if(!ee&&oe.length<B.answers.length&&oe.length>0)for(let fe of oe)fe.isCorrect=!0;if(V=B.answers.length>0&&0==B.answers.filter(fe=>fe.isCorrect).length,V){let fe=0;for(let Le of de){let xe=Le.split("!");xe.length>fe&&(fe=xe.length)}if(fe>1){let Le=[];for(let xe=0;xe<de.length;xe++)de[xe].split("!").length==fe&&Le.push(B.answers[xe]);if(Le.length<B.answers.length)for(let xe of Le)xe.isCorrect=!0}}return ne}parse(B,Q){let D=new w.ExamParser(this.cfg),Z=new h.StyleRender,V=B.text.split("\n"),oe=D.parse(V);for(let ee of oe){this.renderPart(ee.parts,B);let ne=this.setAnsStyle(ee,V,B.styles);for(let fe of ee.answers)this.renderPart(fe.parts,B,ne);let de=ee.answers.length>0&&0==ee.answers.filter(fe=>fe.isCorrect).length;if(ee.help&&de){Z.applyStyle(ee.help,B.styles);let fe=ee.help?.map(Le=>Le.text).join("\n")??"";if(""!=fe.trim()){let Le=Z.clean(fe),xe=(`C\xe2u ${ee.label}. `+Le.res).split("\n"),Ge=D.parse(xe);if(1==Ge.length){this.setAnsStyle(Ge[0],xe,Le.styles);let nt=Ge[0].answers.filter(ht=>ht.isCorrect);for(let ht of nt)ee.answers.filter(Ct=>Ct.label==ht.label)[0].isCorrect=!0}}}ee.help&&this.renderPart(ee.help,B,!1)}D.checkErr(oe),Q(oe.map(ee=>({label:ee.olabel??ee.label+".",content:this.getText(ee.parts,B),isGroup:ee.isGroup,answers:ee.answers.map(ne=>({label:ne.label,olabel:ne.olabel,content:this.getText(ne.parts,B),isCorrect:ne.isCorrect,order:ne.order})),fillBlankAnswer:ee.strAns,typeCode:ee.typeCode,help:ee.help?this.getText(ee.help,B):void 0,group:ee.group,isFixAns:ee.isFixAns,error:ee.error})),B)}toText(B,Q=!1){let D=[];for(let V of B){if(D.push(`${V.label} ${V.content}`.trim()),V.isGroup)continue;let oe=[];for(let K of V.answers??[])D.push(`${K.label}${K.olabel??"."} ${K.content}`),oe.push("TF"==V.typeCode?`${K.label})${K.isCorrect?"\u0110":"S"}`:K.label);0==oe.length&&V.fillBlankAnswer&&oe.push(V.fillBlankAnswer),D.push("L\u1eddi gi\u1ea3i"),D.push("\u0110\xe1p \xe1n: "+oe.join(", ")),V.help&&D.push(V.help),D.push("")}let Z=D.join("\n");return Z=Z.replaceAll(/\[\*(!!\d+!!:)?/g,"|").replaceAll("*]","|"),Q||(Z=Z.replaceAll(/<img[^>]+>/g,"[image]")),Z}renderPart(B,Q,D=!0){let Z=new h.StyleRender;D&&Z.applyStyle(B,Q.styles);for(let V of B)V.text&&(V.text=Z.render(V.text),V.text=new d.ImageRender(Q.images).render(V.text),V.text=new U.MathRender(Q.mathMap).render(V.text),V.text=(new C.UnderlineAnsRender).render(V.text),V.text=(new g.SkipLatexBoundRender).render(V.text),V.text=(new _.SymbolRender).render(V.text),V.text=(new x.DicReplaceRender).render(V.text))}getText(B,Q){let D=B.map(Z=>Z.text).join("<br>").replace(/^(\s*<br>\s*)+/g,"").replace(/(\s*<br>\s*)+$/g,"");return D=new E.TableRender(Q.tableMap).render(D,"<br>"),D}}},31213:(Ne,H)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.ImageRender=void 0,H.ImageRender=class I{constructor(h){this.iamges=h}render(h){let U=h;for(let E of this.iamges){let d=E.cssStyle?E.cssStyle.replaceAll(/position:\s*[^;]+;?/g,""):"";U=U.replaceAll("[img:$"+E.id+"$]",`<img id="${E.id}" src="${E.link}" style="${d}">`)}return U}}},58809:(Ne,H)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.MathRender=void 0,H.MathRender=class I{constructor(h,U=!1){this.mathMap=h,this.raw=U}render(h){let U=h,d=U.matchAll(/\[!m:\$(([^\]]|[^$]\])+)\$\]/g);for(;;){let C=d.next();if(C.done)break;let g=C.value[0],_=C.value[1],x=this.mathMap.get(_),w="";if(x){let k=this.isPureTextMathML(x.str);if(""!=k)w=k;else{const M=document.createElement("span");M.id=_,M.innerHTML=this.cleanMathML(x.str),this.raw&&x.raw&&M.setAttribute("data-azt-math-raw",x.raw),w=M.outerHTML}}U=U.replace(g,w)}return U}cleanMathML(h){let U=h;return U=U.replaceAll('display="block"',""),U=U.replaceAll(/<\?xml[^>]+\?>/g,""),U=U.replaceAll(/\s*xmlns="[^"]+"/g,""),U=U.replaceAll("\n",""),U}isPureTextMathML(h){let E=(new DOMParser).parseFromString(h,"application/xml");if(E.querySelector("parsererror"))return console.error("isPureTextMathML: Invalid MathML"),"";let d=E.documentElement.children,C=["mi","mn","mo","ms","mspace","mtext"],g="";for(let x=0;x<d.length;x++){let w=d[x];if(C.indexOf(w.tagName.toLowerCase())<0)return"";g+=w.textContent?.trim()??""}return/^[0-9.,-]+$/.test(g.replaceAll("\u2212","-"))?g:""}}},61644:(Ne,H)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.SkipLatexBoundRender=void 0,H.SkipLatexBoundRender=class I{render(h){let U=this.bypassChild(h);return U=U.replaceAll(/\\\)\s*\\\(/g,""),U}bypassChild(h,U="\\(",E="\\)"){if(U.length!==E.length)return"";const d=[];let C=0;for(;;){let x=h.indexOf(U,C);if(-1===x)break;d.push("s_"+x),C=x+1}for(C=0;;){let x=h.indexOf(E,C);if(-1===x)break;d.push("e_"+x),C=x+1}d.sort(function(x,w){return parseInt(x.substring(2))-parseInt(w.substring(2))});let g=[];const _=[];return d.forEach(x=>{if(x.startsWith("s"))g.push(parseInt(x.substring(2)));else if(1==g.length)g=[];else{let w=g.pop();if(w){let k=parseInt(x.substring(2));_.push(w),_.push(k)}}}),_.sort(function(x,w){return x-w}).reverse().forEach(x=>{h=h.substring(0,x)+h.substring(x+U.length)}),h}}},82820:(Ne,H)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.SmartTestReader=void 0,H.SmartTestReader=class I{process(h){let U=/^\s*#(\d)\s*\[[A-Z0-9\-[\]$!:b]+\]/g,E=["NB","TH","VD","VDC"],d=0,C=!1,g=1;for(let _ of h){let w=_.matchAll(U).next();if(!w.done){let M=+w.value[1]-1;M<E.length&&(h[d]=_.replace(w.value[0],`C\xe2u ${g++}. (${E[M]})`)),C=!0}C&&"GY"==_.trim()&&(h[d]="L\u1eddi gi\u1ea3i"),d++}}}},31785:(Ne,H)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.StyleRender=void 0,H.StyleRender=class I{render(h){let U=h;U=U.replaceAll(/\[![!aibucsphl]+:\$\$\]/g,"");let d=U.matchAll(/\[![!aibucsphl]+:\$(([^$]|\$[^\]])+)\$\]/g);for(;;){let C=d.next();if(C.done)break;let g=C.value[0],_=C.value[1],x=g.split(":")[0].split("!");x.shift(),x.filter(w=>"a"==w).length>0&&(_=_.toUpperCase());for(let w=x.length-1;w>=0;w--){let k=x[w];_="hl"==k||"cl"==k?`<span class='cl'>${_}</span>`:`<${k}>${_}</${k}>`}U=U.replace(g,_)}return U}clean(h){let U=h.split("\n"),E=/\[![!aibuchl]+:\$(([^$]|\$[^\]])+)\$\]/g,d=/^\s*\[\*(!!\d+!!:)?\s*[AC]\.[^|]+\|\s*[BD]\..*\*\]\s*$/g,C=[],g=0;for(let x of U){let w=x;d.test(U[g].replaceAll(E,"$1"))&&(U[g]=U[g].replaceAll(/\[\*(!!\d+!!:)?/g,"").replaceAll("*]","").replaceAll("|"," ").trim(),w=U[g]);let B,k=w.matchAll(E),M=0;for(;;){let Q=k.next();if(Q.done)break;let D=Q.value[0],Z=D.indexOf(":"),V=D.substring(1,Z),K=(Q.value.index??0)-M,ee=K+Q.value[1].length;B&&K==B.e&&B.style==V?B.e=ee:(B={lineIdx:g,s:K,e:ee,style:V},C.push(B)),M+=Z+4}U[g]=w.replaceAll(E,"$1"),g++}return{res:U.join("\n"),styles:C}}applyStyle(h,U,E=!1){for(let d=h.length-1;d>=0;d--){let C=h[d],g=U.filter(x=>x.lineIdx==C.lineIdx&&this.isRangeIntersec(x.s,x.e,C.s,C.e??999999)),_=[];for(let x of g){let w=x.s>=C.s?x.s:C.s,k=x.e<=(C.e??9999999)?x.e:C.e??9999999;w-=C.s,k-=C.s;let M=E?x.style:x.style.replaceAll("!hl","").replaceAll("!cl","");w<k&&""!=M&&C.text&&""!=(C.text.substring(w,k)??"").trim()&&(_.push({idx:w,str:`[${M}:$`}),_.push({idx:k,str:"$]"}))}_.sort((x,w)=>{let k=w.idx-x.idx;return 0!=k?k:w.str.length-x.str.length});for(let x of _)C.text=C.text?.substring(0,x.idx)+x.str+C.text?.substring(x.idx)}}getAnsStyle(h,U,E){if(!U)return"";let d=[],C={...U};this.applyStyle([C],E,!0),C.text!=U.text&&""==C.text?.replaceAll(/\[[!a-z]+:\$[^\]]+\$\]/g,"").replaceAll(/\s*\.\s*$/g,"").trim()&&d.push("!fl");for(let x of E)x.lineIdx==U.lineIdx&&x.s<=U.b&&U.b<x.e&&d.push(x.style);let _=d&&d.length>0?d.join():"";return _.indexOf("!u")>=0||_.indexOf("!b")>=0||_.indexOf("!hl")>=0||_.indexOf("!cl")>=0||_.indexOf("!fl")>=0?_:""}isRangeIntersec(h,U,E,d){return h<=E&&E<=U||E<=h&&h<=d}getStyleScore(h){let U=0;return h.indexOf("!cl")>=0&&(U+=8),h.indexOf("!u")>=0&&(U+=4),h.indexOf("!i")>=0&&(U+=2),h.indexOf("!b")>=0&&(U+=1),U}}},82826:(Ne,H)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.SymbolRender=void 0,H.SymbolRender=class I{render(h){let U=h,E=[[/([^<])-+([^\-><]+)-+>/g,"$1\\( \\xrightarrow[]{$2} \\)"],[/<-+([^\-><]+)-+([^>])/g,"\\( \\xleftarrow[]{$1} \\)$2"],[/([^<])--+>/g,"$1\\( \\longrightarrow \\)"],[/<--+([^>])/g,"\\( \\longleftarrow \\)$1"],[/<-+>/g,"\\( \\longleftrightarrow \\)"],[/([^<])->/g,"$1\\( \\rightarrow \\)"],[/<-([^>])/g,"\\( \\leftarrow \\)$1"]];for(let d of E)U=U.replaceAll(d[0],d[1]);return U}}},56666:(Ne,H)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.TableRender=void 0,H.TableRender=class I{constructor(h){this.infos=h}render(h,U="\n"){let d=h.split(U),C=[],g=[],_="";for(let x of d){let w=x;if(w.trim().startsWith("[*")&&w.trim().endsWith("*]")){let k=w.matchAll(/^\s*\[\*!!(\d+)!!:/g).next();if(k.value){g.length>0&&(C.push(`<table class="q-table ${_}">${g.join("")}</table>`),g=[]);let B=this.infos.get(+k.value[1]);_=B&&B.borderTopSize>0?"border-1":"border-0",w=w.replace(k.value[0],"[*")}let M=w.replaceAll("\\n","<br>").replaceAll("[*","<tr><td>").replaceAll("*]","</td></tr>");M=M.replaceAll("|","</td><td>"),g.push(M)}else g.length>0&&(C.push(`<table class="q-table ${_}">${g.join("")}</table>`),g=[]),C.push(w)}return g.length>0&&C.push(`<table class="q-table ${_}">`+g.join("")+"</table>"),C.join(U)}}},85130:(Ne,H)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.UnderlineAnsRender=void 0,H.UnderlineAnsRender=class I{render(h){let U=h,d=U.matchAll(/\[\*?[A-H]:[^\]]+\]/g);for(;;){let _=d.next();if(_.done)break;let x=_.value[0],k=x.substring(1,x.length-1).split(":");2==k[0].length&&(k[0]=k[0].substring(1)),U=U.replace(x,`<span class="qv_string_eng_ans" style='cursor: pointer;padding: 0 5px;font-weight: bold;text-decoration: underline;position: relative;height: 40px;display: inline-block;'>${k[1]} <span style='position: absolute;top: 20px;left: 45%;'>${k[0]}</span></span>`)}return U}revert(h,U){let E=h;return E=E.replaceAll(/<span class="qv_string_eng_ans"[^>]+>([^><]+)<span[^>]+>([^><]+)<\/span><\/span>/g,"[$2:$1]"),E=E.replace("["+U+":","[*"+U+":"),E}}},69623:function(Ne,H,I){"use strict";var F=this&&this.__createBinding||(Object.create?function(U,E,d,C){void 0===C&&(C=d);var g=Object.getOwnPropertyDescriptor(E,d);(!g||("get"in g?!E.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return E[d]}}),Object.defineProperty(U,C,g)}:function(U,E,d,C){void 0===C&&(C=d),U[C]=E[d]}),h=this&&this.__exportStar||function(U,E){for(var d in U)"default"!==d&&!Object.prototype.hasOwnProperty.call(E,d)&&F(E,U,d)};Object.defineProperty(H,"__esModule",{value:!0}),h(I(71834),H),h(I(99737),H),h(I(81874),H),h(I(99422),H),h(I(8897),H),h(I(8094),H),h(I(93562),H),h(I(31785),H),h(I(56666),H)},37274:(Ne,H,I)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.CanvasUtil=void 0;const F=I(8897);class h{static drawPoint(E,d,C){null!=E&&(E.fillStyle=d,E.beginPath(),E.arc(C.left,C.top,5,0,2*Math.PI),E.fill())}static drawBox(E,d,C,g){null!=E&&(g?(E.fillStyle=d,E.beginPath(),E.rect(C.left,C.top,C.width,C.heigh),E.fill()):(E.strokeStyle=d,E.beginPath(),E.rect(C.left,C.top,C.width,C.heigh),E.stroke()))}static drawBox2(E,d,C,g,_){null!=E&&(E.strokeStyle=d,E.beginPath(),E.rect(_[4],_[5],C,g),E.stroke())}static drawLine(E,d,C,g){null!=E&&(E.strokeStyle=d,E.beginPath(),E.moveTo(C,g),E.lineTo(E.canvas.width-10,g),E.stroke())}static drawText(E,d,C,g){null!=E&&(E.font="11px Arial",E.fillStyle=d,E.fillText(g,C[4],C[5]))}static isLineIntersec(E,d){let C=E.transform[5]<=d.transform[5]&&d.transform[5]<=E.transform[5]+E.height,g=d.transform[5]<=E.transform[5]&&E.transform[5]<=d.transform[5]+d.height,_=E.transform[4]<=d.transform[4]&&d.transform[4]<=E.transform[4]+E.width+F.CONST.INTERSEC_MARGIN,x=d.transform[4]<=E.transform[4]&&E.transform[4]<=d.transform[4]+d.width+F.CONST.INTERSEC_MARGIN,w=this.isSameLine(E,d);return(C||g)&&(_||x)&&!w}static isLineVIntersec(E,d){return(E.transform[5]<=d.transform[5]&&d.transform[5]<=E.transform[5]+E.height||d.transform[5]<=E.transform[5]&&E.transform[5]<=d.transform[5]+d.height)&&(E.transform[4]<=d.transform[4]&&d.transform[4]<=E.transform[4]+E.width+F.CONST.INTERSEC_MARGIN||d.transform[4]<=E.transform[4]&&E.transform[4]<=d.transform[4]+d.width+F.CONST.INTERSEC_MARGIN)&&Math.abs(d.transform[4]-E.transform[4])>F.CONST.INTERSEC_MARGIN/2}static isSameLine(E,d){return Math.abs(E.transform[5]+E.height-(d.transform[5]+d.height))<=F.CONST.LINE_MAGIN}static isObjIntersec(E,d){return E.transform[5]<=d.transform[5]&&d.transform[5]<=E.transform[5]+E.height||d.transform[5]<=E.transform[5]&&E.transform[5]<=d.transform[5]+d.height}static isObjFullIntersec(E,d){return(E.transform[5]<=d.transform[5]&&d.transform[5]<=E.transform[5]+E.height||d.transform[5]<=E.transform[5]&&E.transform[5]<=d.transform[5]+d.height)&&(E.transform[4]<=d.transform[4]&&d.transform[4]<=E.transform[4]+E.width||d.transform[4]<=E.transform[4]&&E.transform[4]<=d.transform[4]+d.width)}static isFirstLineOfPage(E,d){return!(E<0||E>=d.length||0!=E&&d[E-1].pageIndex==d[E].pageIndex)}static isLastLineOfPage(E,d){return!(E<0||E>=d.length||E!=d.length-1&&d[E+1].pageIndex==d[E].pageIndex)}static getTopLine(E,d,C){let g=C[d],_=[[F.CONST.STEP_SIZE,F.CONST.OVERLAP],[1,F.CONST.OVERLAP],[1,.3]];for(const x of _){let w=x[0],k=x[1],M=g.transform[5],B=0,Q=3*w;if(!h.isFirstLineOfPage(d,C)){let Z=h.isSameLine(C[d-1],g);h.isLineIntersec(C[d-1],g)?(M=C[d-1].transform[5]+C[d-1].height,B=C[d-1].transform[5],C[d-1].transform[4]>C[d].transform[4]+2*F.CONST.MARGIN_LEFT?B-=2*F.CONST.MARGIN_LEFT:B+=C[d-1].height*k,w=1,Q=C[d].transform[5]+C[d].height/2-M):(B=Z&&d-2>=0?C[d-2].transform[5]+C[d-2].height*k:C[d-1].transform[5]+C[d-1].height*k,Z&&h.isFirstLineOfPage(d-1,C)&&(B=0))}if(!F.CONST.ENABLE_IMAGE_PROCESS)return[M,0];let D=!1;for(;M>B;){if(!h.hasColor(E,g.transform[4],M,g.width,w))return[M,0];D||(D=!0,M+=Q),M-=w}}return[g.transform[5],1]}static arrContains(E,d){for(const C of d)if(C==E)return!0;return!1}static getBottomLine(E,d,C){let g=C[d],_=[[F.CONST.STEP_SIZE,F.CONST.OVERLAP],[1,F.CONST.OVERLAP],[1,.3]];for(const x of _){let w=x[0],k=x[1],M=g.transform[5]+g.height,B=9999,Q=3*w;if(!h.isLastLineOfPage(d,C)){let Z=h.isSameLine(C[d+1],g);h.isLineIntersec(C[d+1],g)?(M=C[d+1].transform[5],B=C[d+1].transform[5]+C[d+1].height,C[d+1].transform[4]>C[d].transform[4]+2*F.CONST.MARGIN_LEFT?B+=2*F.CONST.MARGIN_LEFT:B-=C[d+1].height*k,Q=C[d].transform[5]+C[d].height/2-M):(B=Z&&d+2<C.length?C[d+2].transform[5]+C[d+2].height-C[d+2].height*k:C[d+1].transform[5]+C[d+1].height-C[d+1].height*k,Z&&h.isLastLineOfPage(d+1,C)&&(B=9999));let V=C[d+1].top;if(V&&M>=V&&!Z)return[V,0]}if(!F.CONST.ENABLE_IMAGE_PROCESS)return[M,0];let D=!1;for(;M<B;){if(!h.hasColor(E,g.transform[4],M,g.width,w))return[M,0];D||(D=!0,M-=Q),M+=w}}return[g.transform[5]+g.height,1]}static hasColor(E,d,C,g,_){let x=Math.round(d),w=Math.round(x+g),k=Math.round(C),M=Math.round(k+_);for(let V=k;V<M;V++)for(let oe=x;oe<w;oe++){let K=4*(V*E.width+oe);if((E.data[K]+E.data[K+1]+E.data[K+2])/3<150)return!0}return!1}static calIndexPos2(E,d,C,g,_){let x=[],w=0,k=0,M=0,B=0,Q=0,D=0,Z=!0,V=!0;for(const ne of E){V=this.isObjIntersec(E[0],ne),B=ne.transform[4],_||(w+=B-M>F.CONST.SPLIT_MARGIN&&""!=ne.str.trim()||Q!=ne.transform[5]?1:0),Z=B+2*F.CONST.MARGIN_LEFT>=M;let de=ne.transform[4]+ne.width;if(V&&(M=de),de>k&&V&&(k=de),w+=ne.str.length,w>g&&Z&&V){ne.transform.forEach(Ge=>{x.push(Ge)}),x[3]=ne.height,x[2]=D,x[1]=ne.str.length-w+g;let fe=ne.str.substr(0,ne.str.length-w+g+1);if(fe.length==ne.str.length){x[4]=x[4]+ne.width;break}var K=d[ne.fontName].fontFamily,ee=Math.hypot(ne.transform[2],ne.transform[3]);C.font=`${ee}px ${K}`;let Le=C.measureText(fe).width,xe=C.measureText(ne.str).width;x[4]=x[4]+ne.width*Le/xe;break}V&&(Q=ne.transform[5]),D++}return 0==x.length&&(x=[0,E[E.length-1].length-1,E.length-1,E[0].height,k,E[0].transform[5]]),x}static calIndexPos(E,d,C,g,_){let x=[],w=0,k=0,M=0,B=0,Q=0,D=0,Z=!0,V=!0,oe="";for(const de of E){V=this.isObjIntersec(E[0],de),B=de.transform[4],_||(w+=B-M>F.CONST.SPLIT_MARGIN&&""!=de.str.trim()||Q!=de.transform[5]?1:0,oe+=(B-M>F.CONST.SPLIT_MARGIN&&""!=de.str.trim()||Q!=de.transform[5]?"|":"")+de.str),Z=B+2*F.CONST.MARGIN_LEFT>=M;let fe=de.transform[4]+de.width;if(V&&(M=fe),fe>k&&V&&(k=fe),w+=de.str.length,w>g&&Z&&V){let Le=de.str.substr(0,de.str.length-w+g);var ee=d[de.fontName].fontFamily,ne=Math.hypot(de.transform[2],de.transform[3]);C.font=`${ne}px ${ee}`;let xe=C.measureText(Le).width,Ge=C.measureText(de.str).width;de.transform.forEach(nt=>{x.push(nt)}),x[4]=x[4]+de.width*xe/Ge,x[3]=de.height,x[2]=D,x[1]=de.str.length-w+g;break}V&&(Q=de.transform[5]),D++}return 0==x.length&&(x=[0,E[E.length-1].length-1,E.length-1,E[0].height,k,E[0].transform[5]]),x}static getTextBottom(E,d,C,g){let _=Math.atan2(E[1],E[0]);d.vertical&&(_+=Math.PI/2);const x=Math.hypot(E[2],E[3]),w=x*h.getAscent(d.fontFamily,C,g);let k=E[5],M=0;M=0===_?w:w*Math.cos(_);let B=0*M;return k=E[5]-M-B,[k,x+B]}static getAscent(E,d,C){const x=C.get(E);if(x)return x;d.save(),d.font=`30px ${E}`;const w=d.measureText("");let k=w.fontBoundingBoxAscent,M=Math.abs(w.fontBoundingBoxDescent);if(k){d.restore();const Q=k/(k+M);return C.set(E,Q),Q}d.strokeStyle="red",d.clearRect(0,0,30,30),d.strokeText("g",0,0);let B=d.getImageData(0,0,30,30).data;M=0;for(let Q=B.length-1-3;Q>=0;Q-=4)if(B[Q]>0){M=Math.ceil(Q/4/30);break}d.clearRect(0,0,30,30),d.strokeText("A",0,30),B=d.getImageData(0,0,30,30).data,k=0;for(let Q=0,D=B.length;Q<D;Q+=4)if(B[Q]>0){k=30-Math.floor(Q/4/30);break}if(d.restore(),k){const Q=k/(k+M);return C.set(E,Q),Q}return C.set(E,.8),.8}static getMaxLineRight(E,d){let C=0;for(const g of d)if(g.pageIndex==E||-1==E){let _=g.transform[4]+g.width;_>C&&(C=_)}return C}static getMinLineLeft(E,d){let C=99999;for(const g of d)if(g.pageIndex==E||-1==E){let _=g.transform[4];_<C&&(C=_)}return C}}H.CanvasUtil=h},55072:(Ne,H,I)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.PdfUtils=void 0;const F=I(8897),h=I(37274);class U{constructor(){let d=document.createElement("canvas");this.tempCanvas=d.getContext("2d"),this.ascentCache=new Map,this.imageCache=[]}loadPdf(d,C){let _={url:URL.createObjectURL(d),cMapPacked:!0,cMapUrl:"/assets/js/pdf-js-v2/cmaps/",disableAutoFetch:!1,disableFontFace:!1,disableRange:!1,disableStream:!1,docBaseUrl:"",enableXfa:!0,fontExtraProperties:!1,isEvalSupported:!0,maxImageSize:-1,pdfBug:!1,standardFontDataUrl:"/assets/js/pdf-js-v2/standard_fonts/",verbosity:1};const x=pdfjsLib.getDocument(_);let w=[],k=this;x.promise.then(function(M){k.optionalContentConfigPromise=M.getOptionalContentConfig();let B=M._pdfInfo.numPages;for(let Q=1;Q<=B;Q++)M.getPage(Q).then(D=>{w.push(D),w.length==B&&(w=w.sort((Z,V)=>Z._pageIndex>V._pageIndex?1:-1),C(w))})},function(M){console.error(M)})}getImages(d,C){let g=[];if("function"!=typeof d.objs.getAll)return g;let _=d.objs.getAll(),x=Object.keys(_);for(const w of x)_[w].data.pageIndex=C,g.push(_[w].data);return g}isImageObj(d){return-999==d.transform[0]&&"img"==d.str}getLines(d,C,g,_){let x=_.scale,w=d.items.length;for(let D=0;D<w;D++){let Z=d.items[D];this.isImageObj(Z)||(Z.transform=U.transform(_.transform,Z.transform),Z.width=Z.width*x),Z.transform[4]+Z.width>g.canvas.width&&(Z.width=g.canvas.width-Z.transform[4]-20);let V=this.isImageObj(Z)?[Z.transform[5],Z.height]:h.CanvasUtil.getTextBottom(Z.transform,d.styles[Z.fontName],this.tempCanvas,this.ascentCache);Z.height=V[1];let oe=Math.ceil(V[0]);Z.transform[5]=oe}d.items.sort((D,Z)=>1e6*Math.floor(D.transform[5])-D.transform[4]<1e6*Math.floor(Z.transform[5])-Z.transform[4]?-1:1);let B,k=[],M=0;this.imageCache[C]?B=this.imageCache[C]:(B=g.getImageData(0,0,g.canvas.width,g.canvas.height),this.imageCache[C]=B);let Q={strLine:"",transform:[],textObjs:[],pageIndex:C,width:0,height:0,txtLength:0};for(let D=0;D<w;D++){let Z=d.items[D];if(this.isImageObj(Z))for(let oe=0;oe<w;oe++){let K=d.items[oe];if(!this.isImageObj(K)&&D!=oe&&h.CanvasUtil.isObjIntersec(Z,K)&&""!=K.str.trim()&&!/^[\sA-K\.\|]+$/g.test(K.str)){Z.str="";break}}if(h.CanvasUtil.arrContains(Z.str.trim(),F.CONST.SKIP_CHAR))continue;let V=Math.floor(Z.transform[5]+Z.height);0!=M?M-V>=-F.CONST.LINE_MAGIN?this.addTxtToLine(Q,Z):0!=Q.textObjs.length&&(k.push(Q),Q=this.newLine(Z,C),M=Math.floor(Q.transform[5]+Q.height)):(Q=this.newLine(Z,C),M=Math.floor(Q.transform[5]+Q.height))}k.push(Q);for(const D of k)this.calculateSize(D);this.findAndMergeAnsQuestBlock(k,"ans"),this.findAndMergeAnsQuestBlock(k,"quest"),this.findAndMergeBlock(k),this.mergeIntersecLine(k),this.mergeSmallLine(k,B);for(const D of k)this.calculateSize(D);return k}mergeIntersecLine(d){let C=0;for(;C<d.length;){let g=d[C];C++,C<d.length&&h.CanvasUtil.isLineVIntersec(g,d[C])&&(this.mergeLine(g,d[C]),d.splice(C,1),C--)}}findAndSplitQuestAnsLine(d,C,g){let _=0,x=[],w=F.CONST.BREAK_LINE_PATTERN.join("|");for(const k of d){k.top=void 0,k.bottom=void 0;let M=k.strLine.replace(/\|/g,"").trim().match(w);if(null!=M&&M.length>0){let B=/[\s\|\.]+[B\u0412][\s\|]*\./g,Q=k.strLine.trim().toUpperCase().match(B);if(null!=Q&&Q.length>0){let D=M[0].toUpperCase().indexOf("A");x.push({lineIndex:_,strIndex:D})}}_++}for(let k=x.length-1;k>=0;k--){let M=x[k].lineIndex;this.splitLine(M,C[d[M].pageIndex],g[d[M].pageIndex],x[k].strIndex,d)}}mergeSmallLine(d,C){let g=0,_=1.2*F.CONST.LINE_SMALL_HEIGHT;for(;g<d.length;){let x=d[g];if(!x||!this.isSmallLine(x)){g++;continue}g-1>=0&&!d[g-1].bottom&&(d[g-1].bottom=h.CanvasUtil.getBottomLine(C,g-1,d)[0]),g+1<d.length&&!d[g+1].top&&(d[g+1].top=h.CanvasUtil.getTopLine(C,g+1,d)[0]);let w=g-1<0?-9999:this.getLineTop(x)-this.getLineBot(d[g-1]),k=g+1>=d.length?-9999:this.getLineTop(d[g+1])-this.getLineBot(x),M=g-1>=0&&d[g-1].transform[4]<=x.transform[4]&&x.transform[4]<=d[g-1].transform[4]+d[g-1].width,B=g+1<d.length&&d[g+1].transform[4]<=x.transform[4]&&x.transform[4]<=d[g+1].transform[4]+d[g+1].width;if(0==g&&k<=_&&B){this.mergeLine(d[g+1],x),d.splice(g,1),g--;continue}if(g==d.length-1&&w<=_&&M){this.mergeLine(d[g-1],x),d.splice(g,1),g--;continue}let Q=-1;w>k&&B&&k<=_?Q=g+1:w<=k&&M&&w<=_?Q=g-1:w<=k&&B&&k<=_?Q=g+1:w>k&&M&&w<=_&&(Q=g-1),Q>=0?(this.mergeLine(d[Q],x),d.splice(g,1),g--):g++}}isSmallLine(d){return d.height<F.CONST.LINE_SMALL_HEIGHT}mergeLine(d,C){for(const g of C.textObjs)this.addTxtToLine(d,g)}findAndMergeAnsQuestBlock(d,C){let _=0;for(;_<d.length;){if("ans"==C&&this.isAnsLine(d[_])||"quest"==C&&this.isQuestLine(d[_])){let w=_,k=-1,M=1,B=[];for(;M<=10;){if(w=_+k*M,w<0){k=1,M=1;continue}if(w>=d.length)break;let Q=this.isAnsLine(d[w]),D=Q||this.isQuestLine(d[w]),Z="ans"==C&&Q&&h.CanvasUtil.isSameLine(d[_],d[w]),V=!D&&h.CanvasUtil.isLineIntersec(d[_],d[w])&&d[w].transform[4]>d[_].transform[4];if((Z||V)&&B.push(w),M++,D&&1==k)break;(M>10||D)&&-1==k&&(k=1,M=1)}B.sort((Q,D)=>Q<D?1:-1);for(const Q of B)for(const D of d[Q].textObjs)this.addTxtToLine(d[_],D);for(const Q of B)d.splice(Q,1),Q<_&&_--}_++}}findAndMergeBlock(d){let C=0;for(;C<d.length;){if(this.isAnsLine(d[C])||this.isQuestLine(d[C])){C++;continue}let _=C+1;for(;_<d.length&&d[C].pageIndex==d[_].pageIndex;){let x=this.isAnsLine(d[_])||this.isQuestLine(d[_]);if(h.CanvasUtil.isLineIntersec(d[C],d[_])&&!x||h.CanvasUtil.isSameLine(d[C],d[_])){for(const w of d[_].textObjs)this.addTxtToLine(d[C],w);d.splice(_,1),_=C}_++}C++}}isAnsLine(d){let g=d.strLine.trim().match(/[\s\|\.]+[AB\u0412CDEFGHIJK]\s*\./g);return null!=g&&g.length>0}isQuestLine(d){let C=F.CONST.QUESTION_PATTERN.join("|"),g=d.strLine.replace(/\|/g,"").toLowerCase().trim().match(C);return null!=g&&g.length>0}encodeLines(d,C){let g="",_=0;for(const x of C){if(x.height<F.CONST.LINE_SMALL_HEIGHT){_-1>=0&&!C[_-1].bottom&&(C[_-1].bottom=h.CanvasUtil.getBottomLine(d,_-1,C)[0]),_+1<C.length&&!C[_+1].top&&(C[_+1].top=h.CanvasUtil.getTopLine(d,_+1,C)[0]);let w=_-1<0?-9999:this.getLineTop(x)-this.getLineBot(C[_-1]),k=_+1>=C.length?-9999:this.getLineTop(C[_+1])-this.getLineBot(x),M=_-1>=0&&C[_-1].transform[4]<=x.transform[4]&&x.transform[4]+x.width<=C[_-1].transform[4]+C[_-1].width,B=_+1<C.length&&C[_+1].transform[4]<=x.transform[4]&&x.transform[4]+x.width<=C[_+1].transform[4]+C[_+1].width,Q=1.2*F.CONST.LINE_SMALL_HEIGHT;Math.abs(w)>=Q&&Math.abs(k)>=Q?g+="L":g+=-9999==w?"3":-9999==k?"4":w>k&&B?"2":w<=k&&M?"1":w<=k&&B?"2":w>k&&M?"1":"L"}else g+="L";_++}return g}getLineTop(d){return d.top?d.top:d.transform[5]}getLineBot(d){return d.bottom?d.bottom:d.transform[5]+d.height}splitLine(d,C,g,_,x){let w=x[d],k=h.CanvasUtil.calIndexPos(w.textObjs,C,g,_,!0),M=this.newLine(w.textObjs[0],w.pageIndex),B=k[2],Q=k[1],D=w.textObjs[B],Z=D.transform,V={str:D.str.substr(0,Q),width:k[4]-Z[4],height:D.height,fontName:D.fontName,transform:[Z[0],Z[1],Z[2],Z[3],Z[4],Z[5]]},oe={str:D.str.substr(Q),width:D.width-V.width,height:D.height,fontName:D.fontName,transform:[Z[0],Z[1],Z[2],Z[3],k[4],Z[5]]},K=w.textObjs;w.textObjs=[],M.textObjs=[];for(let ee=0;ee<K.length;ee++)ee<B?this.addTxtToLine(w,K[ee]):ee>B?this.addTxtToLine(M,K[ee]):(this.addTxtToLine(w,V),this.addTxtToLine(M,oe));return this.calculateSize(w),this.calculateSize(M),d==x.length-1?x.push(M):x.splice(d+1,0,M),M}findAndMergeSmallLine(d,C,g){let _=0,x=d.matchAll(g),w=[];for(;;){let k=x.next();if(k.done)break;let M=k.value[0],B=k.value.index,Q=0,D=[];for(let Z=0;Z<M.length;Z++)"L"==M[Z]?Q=B+Z:D.push(B+Z);for(const Z of D){for(const V of C[Z].textObjs)this.addTxtToLine(C[Q],V);C[Q].top=void 0,C[Q].bottom=void 0,w.push(Z)}_++}w.sort((k,M)=>k<M?1:-1);for(const k of w)C.splice(k,1);return _}newLine(d,C){let g={strLine:"",transform:[],textObjs:[],pageIndex:C,width:0,height:0,txtLength:0};return g.transform[4]=d.transform[4],g.transform[5]=d.transform[5],g.height=d.height,g.width=d.width,g.txtLength=d.str.length,g.textObjs.push(d),g}addTxtToLine(d,C){C.transform[4]<d.transform[4]&&(d.transform[4]=C.transform[4]),C.transform[5]<d.transform[5]&&(d.transform[5]=C.transform[5]),C.transform[5]+C.height>d.transform[5]+d.height&&(d.height=C.transform[5]+C.height-d.transform[5]),C.transform[4]+C.width>d.transform[4]+d.width&&(d.width=C.transform[4]+C.width-d.transform[4]),d.txtLength+=C.str.length,d.textObjs.push(C);let g=d.transform[4]+d.width,_=d.height;for(const x of d.textObjs)x.transform[4]+x.width>g&&(g=x.transform[4]+x.width),x.transform[5]+x.height>d.transform[5]+_&&(_=x.transform[5]+x.height-d.transform[5]);d.width=g-d.transform[4],d.height=_}static transform(d,C){return pdfjsLib.Util.transform(d,C)}render(d,C,g,_){let x=this,w=d.length;for(let k=0;k<w;k++){let M=document.createElement("div");M.className="pdf-page",M.id="page-"+k,document.getElementById(C)?.appendChild(M),x.renderPage(d[k],g,_)}}calculateSize(d){if(0==d.textObjs.length)return;d.textObjs.sort((D,Z)=>1e6*Math.floor(D.transform[4])+D.transform[5]>1e6*Math.floor(Z.transform[4])+Z.transform[5]?1:-1),d.strLine="";let C=0,g=0,_=0,x=0,w=9999,k=0,M=9999;for(const D of d.textObjs){let Z=h.CanvasUtil.isObjIntersec(d.textObjs[0],D);_=D.transform[4];let V=_-g>F.CONST.SPLIT_MARGIN&&""!=D.str.trim()||x!=D.transform[5]?"|":"";d.strLine+=V+D.str,_<M&&(M=_);let oe=D.transform[4]+D.width;Z&&(g=oe),oe>C&&Z&&(C=oe),Z&&(x=D.transform[5]),D.transform[5]<w&&(w=D.transform[5]),D.transform[5]+D.height>k&&(k=D.transform[5]+D.height)}d.transform[4]=M,d.transform[5]=w,d.width=C-M,d.height=k-w,d.transform[0]=w,d.transform[1]=k;let B=F.CONST.TVCN_CHAR,Q=d.strLine;for(const D of B)Q=Q.replace(new RegExp(D[0],"g"),D[1]);d.strLine=Q}renderPage(d,C,g){let _=d._pageIndex,x=d.getViewport({scale:C}),w=.8*x.width,k=document.createElement("canvas"),M=document.getElementById("page-"+_);M?.appendChild(k),k.id="canvas"+_;let B=k.getContext("2d",{alpha:!1});k.height=x.height,k.width=x.width,k.style.height=x.height*w/x.width+"px",k.style.width=w+"px",M&&(M.style.width=k.style.width,M.style.height=k.style.height);const D={canvasContext:B,transform:[1,0,0,1,0,0],viewport:x,annotationMode:pdfjsLib.AnnotationMode.ENABLE_FORMS,optionalContentConfigPromise:this.optionalContentConfigPromise,annotationCanvasMap:new Map,pageColors:{background:"Canvas",foreground:"CanvasText"}};d.render(D).promise.then(function(){g&&g(B,d._pageIndex,x)})}}H.PdfUtils=U},99422:(Ne,H,I)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.Process=void 0;const F=I(8897),h=I(81874),U=I(12273),E=I(37274),d=I(55072);H.Process=class C{constructor(_){this.config=_,F.CONST.load(_);let x=JSON.parse(_);F.CONST.LINE_SMALL_HEIGHT=x.LINE_SMALL_HEIGHT*F.CONST.RENDER_SCALE,F.CONST.SPLIT_MARGIN=x.SPLIT_MARGIN*F.CONST.RENDER_SCALE,F.CONST.INTERSEC_MARGIN=x.INTERSEC_MARGIN*F.CONST.RENDER_SCALE,F.CONST.LINE_MAGIN=x.LINE_MAGIN*F.CONST.RENDER_SCALE,F.CONST.MARGIN_LEFT=x.MARGIN_LEFT*F.CONST.RENDER_SCALE,F.CONST.FOOTER_PATTERN=x.FOOTER_PATTERN??["(trang\\s*\\d+)","(Page\\s*\\d+)","(Trang\\s*\\d+)","(TRANG\\s*\\d+)","(^\\d{1,4}$)"],F.CONST.HELP_ANS_PATTERN=x.HELP_ANS_PATTERN??["([\\s\\.]*Ch\u1ecdn\\s*([ABCDEFGH]))"]}setUpdateStatusCallback(_){this.updateStatusCallback=_}setOncompleteCallback(_){this.onCompleteCallback=_}getOverview(_){let x=_.filter(Z=>Z.isGroup).length,w=_.filter(Z=>!Z.isGroup).length,k=_.filter(Z=>Z.answers.length>0).length,M=_.filter(Z=>!Z.isGroup&&0==Z.answers.length).length,B=_.filter(Z=>Z.answers.length>4),Q=B.length+"|"+B.map(Z=>Z.num).join(",");return B=_.filter(Z=>Z.answers.length<4&&Z.answers.length>0),{groupNum:x+"",questNum:w+"",tnNum:k+"",tlNum:M+"",tnGt4:Q,tnLt4:B.length+"|"+B.map(Z=>Z.num).join(",")}}parsePdf(_){let x=new d.PdfUtils;x.loadPdf(_,w=>{const k=w.length;let M=[],B=[],Q=document.createElement("div");Q.id="hiddenWrapper",Q.style.width="1px",Q.style.height="1px",Q.style.overflow="hidden",Q.style.opacity="0",Q.style.zIndex="-9999",Q.style.position="fixed",Q.style.top="0",Q.style.left="0",document.body.appendChild(Q);let D=document.createElement("div"),Z="canvasWrapper";D.id=Z,Q.appendChild(D);const V=(new Date).getTime();let oe=[];x.render(w,Z,F.CONST.RENDER_SCALE,(K,ee,ne)=>{if(null!=K&&(M[ee]=K,B[ee]=ne),oe.push(1),this.updateStatusCallback&&this.updateStatusCallback(`Rendering: ${oe.length}/${k}`),oe.length==k){const de=(new Date).getTime();this.updateStatusCallback&&this.updateStatusCallback("Render done: "+(de-V)/1e3+" secs"),this.startAnalyze(M,B,w)}})})}imgToTextObj(_,x){return{str:"img",fontName:x,width:_.paintWidth,height:_.paintHeight,transform:[-999,0,0,0,-_.left,-_.top-_.paintHeight]}}startAnalyze(_,x,w){const k=w.length;let M=[],B=[],Q=[],D=new d.PdfUtils;const Z=(new Date).getTime();for(let V=0;V<k;V++){const oe=V;let K=D.getImages(w[V],oe);w[V].getTextContent().then(ee=>{for(const de of K)ee.items.push(this.imgToTextObj(de,ee.items.length>0?ee.items[0].fontName:""));let ne=D.getLines(ee,oe,_[oe],x[oe]);if(B=B.concat(ne),Q[oe]=ee.styles,M.push(1),M.length==k){B.sort((Ct,mt)=>1e7*Ct.pageIndex+(Ct.transform.length>0?Ct.transform[5]:0)-(1e7*mt.pageIndex+(mt.transform.length>0?mt.transform[5]:0))),D.findAndSplitQuestAnsLine(B,Q,_);let de=new U.FooterParser,fe=0;for(const Ct of B){if((B.length-1==fe||fe+1<B.length-1&&Ct.pageIndex!=B[fe+1].pageIndex)&&(Ct.isLastLine=!0),Ct.isLastLine&&de.parse(Ct.strLine).length>0){Ct.isFooter=!0;let mt=E.CanvasUtil.getBottomLine(D.imageCache[B[fe-1].pageIndex],fe-1,B);Ct.top=mt[0]+F.CONST.MARGIN_LEFT}fe++}let Le=new h.ExamParser(this.config),xe=B.map(Ct=>Ct.strLine),Ge=Le.parse(xe),nt=this.getQuestionInfo(Ge,B,Q,_,D.imageCache);const ht=(new Date).getTime();this.updateStatusCallback&&this.updateStatusCallback("Analyze done: "+(ht-Z)/1e3+" secs"),this.showOnCanvas(nt,_,F.CONST.DRAW_RESULT),this.onCompleteCallback&&this.onCompleteCallback(nt,_)}})}}getPosInfo(_,x,w,k,M,B,Q,D,Z){if(!w.top){let K=E.CanvasUtil.getTopLine(M,B,k);w.top=K[0],w.isIntersec=K[1]}if(!w.bottom){let K=E.CanvasUtil.getBottomLine(M,B,k);w.bottom=K[0],w.isIntersec=K[1]}return{str:"",pageIndex:w.pageIndex,lineIndex:B,transform:"a"==_?E.CanvasUtil.calIndexPos2(w.textObjs,D,Q,Z?Z-1:0):w.transform,startLeft:x>=0?E.CanvasUtil.calIndexPos2(w.textObjs,D,Q,x-1):void 0,type:_}}getQuestionInfo(_,x,w,k,M){let B=[];for(const Q of _){let D=Q.parts[0].lineIdx,Z=x[D],V=this.getPosInfo("q",Q.parts[0].s,Z,x,M[Z.pageIndex],D,k[Z.pageIndex],w[Z.pageIndex]),oe=null;if(D=Q.parts[Q.parts.length-1].lineIdx,Q.answers.length>0){let K=Q.answers[Q.answers.length-1];K.parts.length>0&&(D=K.parts[K.parts.length-1].lineIdx)}if(D+=1,D<x.length&&(Z=x[D],oe=this.getPosInfo("q",-1,Z,x,M[Z.pageIndex],D,k[Z.pageIndex],w[Z.pageIndex])),Q.isGroup)B.push({num:Q.label,answers:[],remove:this.getQuestRemoveBox(V,x),positions:this.getQuestBoxes(V,x,oe,k[Z.pageIndex].canvas.height),isGroup:!0,text:Q.parts.map(K=>x[K.lineIdx])});else{let K={num:Q.label,answers:[],remove:this.getQuestRemoveBox(V,x),positions:this.getQuestBoxes(V,x,oe,k[Z.pageIndex].canvas.height),group:Q.group,strAns:Q.strAns,isFixAns:Q.isFixAns,text:Q.parts.map(ne=>x[ne.lineIdx])};B.push(K);let ee=0;for(const ne of Q.answers){let de={pageIndex:K.remove.pageIndex,top:K.remove.top-1,left:K.remove.left-1,width:1,heigh:1};if(ne.parts.length>0){if(D=ne.parts[0].lineIdx,Z=x[D],1==Z.isIntersec&&(K.isFixAns=!0),ne.parts.length>1&&(K.isFixAns=!0),V=this.getPosInfo("a",ne.parts[0].s,Z,x,M[Z.pageIndex],D,k[Z.pageIndex],w[Z.pageIndex],ne.parts[0].b),oe=null,ee<Q.answers.length-1){let xe=Q.answers[ee+1];D=xe.parts[0].lineIdx,Z=x[D],oe=this.getPosInfo("a",xe.parts[0].s,Z,x,M[Z.pageIndex],D,k[Z.pageIndex],w[Z.pageIndex],xe.parts[0].b)}else D=ne.parts[ne.parts.length-1].lineIdx+1,D<x.length-1&&(Z=x[D],oe=this.getPosInfo("q",-1,Z,x,M[Z.pageIndex],D,k[Z.pageIndex],w[Z.pageIndex]));let fe=this.getAnsRemoveBox(V,x),Le={label:ne.label,remove:fe,isCorrect:ne.isCorrect,positions:ne.isInline?[fe]:this.getAnsBoxes(V,x,oe,k[Z.pageIndex].canvas.height)};K.answers.push(Le)}else K.answers.push({label:ne.label,remove:de,isCorrect:ne.isCorrect,positions:[de]});ee++}Q.help&&Q.help.length>0&&(D=Q.help[0].lineIdx,Z=x[D],V=this.getPosInfo("q",Q.help[0].s,Z,x,M[Z.pageIndex],D,k[Z.pageIndex],w[Z.pageIndex]),oe=null,D=Q.help[Q.help.length-1].lineIdx+1,D<x.length&&(Z=x[D],oe=this.getPosInfo("q",-1,Z,x,M[Z.pageIndex],D,k[Z.pageIndex],w[Z.pageIndex])),K.help={num:Q.label,remove:this.getQuestRemoveBox(V,x),positions:this.getQuestBoxes(V,x,oe,k[Z.pageIndex].canvas.height),text:Q.help.map(ne=>x[ne.lineIdx])})}}return B}showHidden(){let _=document.getElementById("hiddenWrapper");_&&(_.style.opacity="1",_.style.width="",_.style.height="",_.style.overflow="",_.style.position="")}showOnCanvas(_,x,w){const k=(new Date).getTime(),M=new Map([["A","rgba(18, 0, 255, 0.4)"],["B","rgba(0, 158, 34, 0.4)"],["C","rgba(50, 50, 50, 0.4)"],["D","rgba(132, 0, 137, 0.4)"],["E","rgba(132, 0, 137, 0.4)"],["F","rgba(132, 0, 137, 0.4)"],["G","rgba(132, 0, 137, 0.4)"],["H","rgba(132, 0, 137, 0.4)"]]);if(w.indexOf("quest")>=0)for(const Q of _){for(const D of Q.positions)E.CanvasUtil.drawBox(x[D.pageIndex],Q.isGroup?"black":"red",D);E.CanvasUtil.drawBox(x[Q.remove.pageIndex],"yellow",Q.remove);for(const D of Q.answers){for(const Z of D.positions)E.CanvasUtil.drawBox(x[Z.pageIndex],M.get(D.label)+"",Z,!0);E.CanvasUtil.drawBox(x[D.remove.pageIndex],"yellow",D.remove),D.isCorrect&&E.CanvasUtil.drawPoint(x[D.positions[0].pageIndex],"green",D.positions[0])}if(Q.help){for(const D of Q.help.positions)E.CanvasUtil.drawBox(x[D.pageIndex],"orange",D);Q.help.remove&&E.CanvasUtil.drawBox(x[Q.help.remove.pageIndex],"yellow",Q.help.remove)}}const B=(new Date).getTime();this.updateStatusCallback&&this.updateStatusCallback("Draw done: "+(B-k)/1e3+" secs")}getAnsRemoveBox(_,x){let w=_.startLeft?_.startLeft[5]-2:x[_.lineIndex].top,k=_.transform[4]-F.CONST.MARGIN_LEFT,M=_.startLeft?_.startLeft[5]+_.startLeft[3]:x[_.lineIndex].bottom;return{pageIndex:_.pageIndex,top:w||20,left:k,heigh:M&&w?M-w:0,width:(_.startLeft?_.startLeft[4]:0)-k}}getAnsBoxes(_,x,w,k){const M=k,B=F.CONST.MARGIN_LEFT;let Q=[],D=x[_.lineIndex].top,Z=x[_.lineIndex].bottom;if(!D||!Z)return[];let oe=Z,K=_.transform[4]-B,ee=w&&_.lineIndex==w.lineIndex?w.transform[4]-B:x[_.lineIndex].transform[4]+x[_.lineIndex].width+B;if(Q.push({pageIndex:_.pageIndex,top:D,left:K,width:ee-K,heigh:Z-D}),w&&w.lineIndex==_.lineIndex)return Q;D=Z,Z=M,ee=0;let ne=_.pageIndex,de=0;for(de=_.lineIndex+1;de<x.length;de++){if(Z==M&&E.CanvasUtil.isLastLineOfPage(de,x)){let Le=x[de].isFooter?x[de-1]:x[de];Z=Le.transform[5]+Le.height+20}let fe=x[de].top;if(de>_.lineIndex+1&&!x[de-1].isFooter){let Le=x[de-1].transform[4]+x[de-1].width+B;Le>ee&&(ee=Le);let xe=x[de-1].transform[4]-B;xe<K&&(K=xe)}if(x[de].isFooter&&fe)de-_.lineIndex>1?(Z=x[de-1].transform[5]+x[de-1].height+F.CONST.LINE_MAGIN,K=x[_.lineIndex+1].transform[4]-B):Z=x[_.lineIndex].bottom;else if(x[de].pageIndex>ne&&(Z&&Z-D>F.CONST.LINE_SMALL_HEIGHT&&de-_.lineIndex>1&&Q.push({pageIndex:ne,top:D,left:K,width:ee-K,heigh:Z-D}),D=20,oe=D),ne=x[de].pageIndex,fe){Z=fe;break}}if(de>=x.length&&(de=x.length-1),de-_.lineIndex>1&&x[de-1].transform[5]>oe&&!E.CanvasUtil.isFirstLineOfPage(de,x)){let fe=20==D?x[de].transform[4]:x[_.lineIndex+1].transform[4];if(20!=D)for(let Le=_.lineIndex+2;Le<=de;Le++)x[Le].transform[4]<fe&&(fe=x[Le].transform[4]);Z&&Z-D>F.CONST.LINE_SMALL_HEIGHT&&Q.push({pageIndex:ne,top:D,left:fe,width:ee-fe,heigh:Z-D})}w&&"a"==w.type&&w.transform[4]>x[w.lineIndex].transform[4]+10*F.CONST.RENDER_SCALE&&(ee=w.transform[4]-B,D=x[w.lineIndex].top,K=x[w.lineIndex].transform[4]-B,Z=x[w.lineIndex].bottom,D&&Z&&Z-D>F.CONST.LINE_SMALL_HEIGHT&&Q.push({pageIndex:ne,top:D,left:K,width:ee-K,heigh:Z-D}));for(let fe=Q.length-1;fe>=1;fe--)Q[fe].left-(Q[fe-1].left+Q[fe-1].width)>=20*F.CONST.RENDER_SCALE&&Q.splice(fe,1);return Q}getQuestRemoveBox(_,x){let w=_.startLeft?_.startLeft[5]:x[_.lineIndex].top,k=_.transform[4]-F.CONST.MARGIN_LEFT,M=_.startLeft?_.startLeft[5]+_.startLeft[3]:x[_.lineIndex].bottom;return{pageIndex:_.pageIndex,top:w||20,left:k,heigh:M&&w?M-w:0,width:(_.startLeft?_.startLeft[4]:0)-k}}getQuestBoxes(_,x,w,k){let M=k;for(let de=_.lineIndex;de<x.length;de++)if(E.CanvasUtil.isLastLineOfPage(de,x)){let fe=x[de].isFooter?x[de-1]:x[de];M=fe.transform[5]+fe.height+20;break}let B=[],Q=_.pageIndex,D=w?w.lineIndex:x.length-1,Z=x[_.lineIndex].transform[4]-F.CONST.MARGIN_LEFT,V=x[_.lineIndex].top;if(!V)return[];let oe=F.CONST.CROP_FULL_WIDTH?E.CanvasUtil.getMaxLineRight(-1,x)+2*F.CONST.MARGIN_LEFT:x[_.lineIndex].transform[4]+x[_.lineIndex].width+2*F.CONST.MARGIN_LEFT,K=M,ee=Q,ne=_.lineIndex+1;for(;ne<=D;ne++){let de=x[ne].top;if(ne==x.length-1&&!w&&(de=x[ne].bottom),!F.CONST.CROP_FULL_WIDTH){let Le=x[ne-1].transform[4]+x[ne-1].width+2*F.CONST.MARGIN_LEFT;Le>oe&&(oe=Le)}let fe=x[ne-1].transform[4]-F.CONST.MARGIN_LEFT;fe<Z&&(Z=fe),x[ne].isFooter&&de?K=de:(x[ne].pageIndex>ee&&(x[ne-1].isFooter||(K=M),B.push({pageIndex:ee,top:V,left:Z,width:oe-Z,heigh:K-V}),V=20,Z=E.CanvasUtil.getMinLineLeft(x[ne].pageIndex,x)-F.CONST.MARGIN_LEFT),ee=x[ne].pageIndex,de&&(K=de))}if(ne-=1,!w&&E.CanvasUtil.isLastLineOfPage(ne,x)){let de=x[ne].isFooter?x[ne-1]:x[ne];K=de.transform[5]+de.height+20}return E.CanvasUtil.isFirstLineOfPage(ne,x)||B.push({pageIndex:ee,top:V,left:Z,width:oe-Z,heigh:K-V}),B}}},53781:(Ne,H,I)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.AnswerParser=void 0;const F=I(86563);class h extends F.Parser{constructor(E){super(),null!=E&&(this.isOn=E),this.TYPE=h.TYPE_NAME}do(E){let d=[],C="|"+E,g=/([\s|.\]]+\*?[A-Ha-h][\s|]*[.)])/g,_=this.matchPos(C,g,!1);0==_.length&&(_=this.matchPos(C,g,!0));let x=!1;0==_.length&&/^\|?\s*\*?[A-H\s|]+$/g.test(C)&&(x=!0,_=this.matchPos(C,/\*?[A-H]/g,!1));let w=!1;if(0==_.length&&(x=!0,w=!0,_=this.matchPos(C,/\[\*?[A-H]:[^\]]+\]/g,!1)),_.length>0)for(const k of _){let M=k.index+k.value.length-1,B=-9999,Q=k.value.replace(/\*?[\sA-Ha-h|]/g,"");w&&(B=k.index+k.value.length-2,k.index=k.index+1,M=k.index+1+(k.value.startsWith("[*")?1:0),Q=".");let D={type:this.TYPE,pos:[k.index-1,M,B]},Z=E.substring(D.pos[0]);if(!x&&!/^\|?\s*[*A-Himg\s|.]+$/g.test(C)&&Z.trim()==k.value.trim())continue;D.label=E.substring(D.pos[0],D.pos[0]+1),"*"==D.label&&(D.label=E.substring(D.pos[0]+1,D.pos[0]+2),D.extInfo="*"),D.olabel=Q,D.score=1,""==E.substring(0,D.pos[0]).replace(/[\s|]/g,"")&&(D.score=2);let oe=E.replace(/\[![a-z0-9_]+:[a-z0-9_]+\]/g,"").trim().toUpperCase().replace("*",""),K=new RegExp("^A\\s*"+D.olabel?.replace(/([.)])/,"\\$1"));!w&&"A"==D.label.toUpperCase()&&!K.test(oe)||d.push(D)}return d}matchPos(E,d,C){let g=C?E.toUpperCase():E,_=/[\s|.\]]/,x=g.matchAll(d),w=[];for(;;){let k=x.next();if(k.done)break;let M=0;for(let Z=k.value.index;Z<g.length&&_.test(g[Z]);Z++)M++;let B=k.value[0].substr(M,1),Q=/[[(]\s*(VD|TH|NB|VDC|EASY|MEDIUM|HARD|HARDEST)\s*[\d.]*\s*[)\]]\s*[:.]?/g,D=/\[![a-z]+:\$\s*\$\]/g;"A"==B&&!g.replace(/\|/g,"").replace(/\[!info:\d+\]/g,"").replace(Q,"").replace(D,"").trim().startsWith("A")||"*A"==B&&!g.replace(/\|/g,"").replace(/\[!info:\d+\]/g,"").replace(Q,"").replace(D,"").trim().startsWith("*A")||w.push({value:k.value[0].substr(M),index:k.value.index+M})}return w}}H.AnswerParser=h,h.TYPE_NAME="answer"},34143:(Ne,H,I)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.DapAnChiTietParser=void 0;const F=I(8897),h=I(13826),U=I(51453),E=I(86563);class d extends E.Parser{constructor(g){super(),this.TYPE=d.TYPE_NAME,null!=g&&(this.isOn=g)}do(g){let _=/^[0-9ABCDEFGH\u0110Sabcdefgh\u0111s]+$/i,x=this.cleanDS(g),w=this.cleanLine(x);if(_.test(w)&&w.length>=2)return[{type:d.TYPE_NAME,pos:[0,0]}];_=/^\[\*(!!\d+!!:)?(\s*\d+[^\]|]+\|?)+\*\]$/i;let k=this.cleanLineKeepTable(x.trim());return k=k.replaceAll("\\|",""),_.test(k)&&w.length>=2?[{type:d.TYPE_NAME,pos:[0,0]}]:[]}fixNoEnd(g){let _=[new U.HetParser,new h.DapAnParser],x=[],w=0,k=-1;for(let M of g){if(""==M.trim()){w++;continue}for(let D of _){let Z=D.parse(M);Z.length>0&&x.push(...Z)}let B=this.cleanDS(M);B=this.cleanLineKeepTable(B),B.trim().match(F.CONST.FIX_NO_END_PATTERN.join("|"))&&-1==k&&(k=w),w++}if(0==x.length&&k>=0)for(let M=k-1;M>=0;M--)if(!g[M].trim().startsWith("[*"))return g.splice(M+1,0,"H\u1ebft"),g}cleanLine(g,_=!1){if(!g)return"";let x=[/\|/g,_?/[\s:;![\]@*$()]+/g:/[\s.\-:,;![\]@*$()]+/g,/C\xe2u/g,/C\xc2U/g,/\u0110\xe1p\xe1n/g,/\u0110\xc1P\xc1N/g,/\u0110\/A/g,/Question/g,/Questions/g,/question/g,/questions/g,/ch\u1ecdn/g,/Ch\u1ecdn/g,"\u2013","\u2212"],w=g;w=this.cleanStyle(w);for(const k of x)w=w.replaceAll(k,"");return w=w.replaceAll("\\n",""),w}cleanLineKeepTable(g){let _=[/C\xe2u/g,/C\xc2U/g,/\u0110\xe1p\s*\xe1n/g,/\u0110\xc1P\s*\xc1N/g,/\u0110\/A/g,/Question/g,/Questions/g,/question/g,/questions/g,/ch\u1ecdn/g,/Ch\u1ecdn/g],x=["\u2013:-","\u2212:-"],w=g;w=w.replaceAll(/\[![!iucsbp]+:\$(([^$]|\$[^\]])+)\$\]/g,"$1"),w=w.replaceAll(/\[![!iucsbp]+:!!\]/g,"");for(const k of _)w=w.replaceAll(k,"");for(const k of x){let M=k.split(":");w=w.replaceAll(M[0],M[1])}return w=w.replaceAll("\\n","\n"),w}cleanDS(g){return g.replaceAll(/([a-d])[.),]\s*[\u0110\u0111]\xfang/g,"$1) \u0110").replaceAll(/([a-d])[.),]\s*[Ss]ai/g,"$1) S")}pivotTable(g){let _=g.length,x=g[0].length,w=[];for(let k=0;k<x;k++){let M=[];for(let B=0;B<_;B++)M.push(g[B][k]);w.push(M)}return w}isDSPat(g){let _=this.cleanDS(g),x=this.cleanLine(_);return/^([a-dA-D][D\u0110S\u0111sd])+$/.test(x)?x:""}getAnsMC(g,_){let x=[],w=[],k=[],M=new Map;for(const oe of _){let K=g[oe.lineIdx??0];K=this.cleanDS(K);let ee=this.cleanLine(K);if(/^\d+([a-dA-D][D\u0110S\u0111sd])+$/.test(ee)){let de=F.Utils.getNumberFromStr(ee),fe=ee.replace(de,"");M.set(+de,"!"+fe)}if(w.push(K),K.trim().startsWith("[*")){let de=K.replace(/\[\*(!!\d+!!:)?/g,"").replace("*]","").replace(/\s\|\s/g,"|").trim();de=de.replaceAll("\\|","__//__").replaceAll("|","_##_").replaceAll("__//__","|"),k.push(de.split("_##_"))}else x.push(K)}let B=new Map;if(k.length>0){let oe=0,K=0,ee=/^([a-dA-D][D\u0110S\u0111sd])*$/,ne=-1,de=!0,fe=0;for(let Le=0;Le<k.length;Le++){let xe=k[Le];for(let Ge=0;Ge<xe.length;Ge++){let ht=this.cleanLineKeepTable(xe[Ge].trim()).trim();if(""==ht||/^[\s.,:-]+$/.test(ht))continue;let Ct=ht.match(/^(\d+)\s*([.:,)-])/i);if(!Ct){de=!1,B.clear();break}fe=+Ct[1];let mt=ht.substring(ht.indexOf(Ct[2])+1).trim();ee.test(mt)&&""!=mt&&(mt="!"+mt),B.set(fe,mt)}if(!de)break}for(de&&B.size>0&&(oe=k.length+1);oe<k.length;){let Le=!0;for(let xe=0;xe<k[oe].length;xe++){let nt=+this.cleanLine(k[oe][xe]??"");if(0!=nt){if(nt-K!=1&&0!=K){Le=!1;break}K=nt}}if(Le){if(ne=oe,oe++,oe>=k.length)break;for(let xe=0;xe<k[ne].length;xe++){let Ge=+this.cleanLine(k[ne][xe]??""),nt=this.cleanLine(k[oe][xe]??"");ee.test(nt)&&""!=nt&&(nt="!"+nt),B.set(Ge,nt.startsWith("!")?nt:(k[oe][xe]??"").trim())}oe++}else{if(0==oe){let xe=!0;K=0;for(let Ge=0;Ge<k.length;Ge++){let ht=+this.cleanLine(k[Ge][0]??"");if(0!=ht){if(ht-K!=1&&0!=K){xe=!1;break}K=ht}}if(xe){k=this.pivotTable(k),oe=0,K=0,ne=-1;continue}break}{let xe=!0;for(let Ge=0;Ge<k[oe].length;Ge++){let nt=this.cleanLine(k[oe][Ge]??"");if(!ee.test(nt)){xe=!1;break}{let ht=+this.cleanLine(k[ne][Ge]??"");B.set(ht,B.get(ht)+nt)}}if(oe++,!xe){B.clear();break}}}}}0==B.size&&(x=w);for(let oe of B)M.set(oe[0],oe[1]);let Q=[];for(let oe of x){let K=this.cleanLine(oe).trim();/(\d+[A-H])+/i.test(K)&&Q.push(K)}let D=Q.join(""),Z=this.cleanLine(D),V=this.getResultMC(Z.toUpperCase());for(const oe of V)M.set(oe.num,oe.str);return M}cleanStyle(g){let _=g;return _=_.replaceAll(/\[![!iucsbp]+:\$(([^$]|\$[^\]])+)\$\]/g,"$1"),_=_.replaceAll(/\[![!iucsbp]+:!!\]/g,""),_=_.replaceAll(/\[\*(!!\d+!!:)?/g,"").replaceAll("*]",""),_}getAnsStr(g){let _=g.join("\n");_=this.cleanStyle(_),_=this.cleanDS(_);let x=this.getResultStr(_),w=new Map,k=/^([a-dA-D][\u0110S\u0111sDd])*$/;for(const M of x){let B=this.cleanLine(M.str);k.test(B)&&(M.str="!"+B),!(M.str.split("\n").length>1)&&w.set(M.num+"-"+M.lineIdx,M.str)}return w}getAnsFromHelp(g,_){let x=[],w=/^([a-dA-D][\u0110S\u0111sDd])*$/;for(const M of g){let B=_[M.lineIdx];B=this.cleanStyle(B),B=this.cleanDS(B).trim(),""!=B&&x.push(B)}x.length>1&&(x=[x[0],x[x.length-1]]);let k=0;for(const M of x){let B=M.trim().match(F.CONST.HELP_ANS_PATTERN.join("|")),Q=2*F.CONST.HELP_ANS_PATTERN.length+1;if(null!=B)for(let D=0;D<Q;D++){if(0==D||D%2>0)continue;let Z=B[D]?.trim();if(null!=Z){let V=0==k?0:g.length-1;g[V].text=g[V].text?.replace(B[0],"");let oe=this.cleanLine(Z);return w.test(oe)&&(Z="!"+oe),Z}}k++}return""}getResultStr(g){let _=[],x=g.replace(/\n/g,"\n"),w=F.CONST.QUESTION_PATTERN.join("|").replace(/\(\^/g,"("),k=x.matchAll(new RegExp(w,"ig"));for(;;){let Z=k.next();if(Z.done)break;let V=Z.value[0],oe=F.Utils.getNumberFromStr(V);x=x.replace(V,oe+".")}let D,M=F.CONST.RES_ANS_PATTERN.length>0?new RegExp(F.CONST.RES_ANS_PATTERN.join("|"),"g"):/\d+[.-][^|0-9]/g,B=x.matchAll(M),Q=-1;for(;;){let Z=B.next();if(Z.done)break;if(-1==Q)Q=Z.value.index,D=Z;else{let V=x.substr(Q,Z.value.index-Q);_.push(this.toAns(V,D,this.getLineIdx(x,Q))),Q=Z.value.index,D=Z}}if(Q>=0&&D){let Z=x.substr(Q);_.push(this.toAns(Z,D,this.getLineIdx(x,Q)))}return _}getLineIdx(g,_){return g.substring(0,_).split("\n").length-1}toAns(g,_,x){let w=_.value[0].length-1;return{num:+_.value[0].substr(0,w-1),str:g.substring(w).split("\n").map(B=>B.replace(/\s+/g," ")).join("\n").trim(),lineIdx:x}}getResultMC(g){let _=g.toUpperCase(),x=[],w="",k=[],M=!1;for(let B=0;B<_.length;B++){let Q=_.charCodeAt(B),D=Q>=65&&Q<=72;if(D&&""==w)return[];D!=M&&(k.push(w),w=""),M=D,w+=g[B]}if(""!=w&&k.push(w),k.length%2>0)return[];for(let B=1;B<k.length;B+=2){let Q=0,D=Math.floor(k[B-1].length/k[B].length),Z=+k[B-1].substring(Q,D),V=Z,oe=!1;for(let K=0;K<k[B].length;K++){if(K>=k[B-1].length){oe=!0;break}if(Z=+k[B-1].substring(Q,Q+D),Z!=V){oe=!0;break}x.push({num:Z,str:k[B][K]}),Q+=D,V=Z+1,D=V.toString().length}if(oe){x=[];break}}if(0==x.length)for(let B=1;B<k.length;B+=2){let Q=+k[B-1];if(B>1&&Q!=x[x.length-1].num+1)return[];x.push({num:Q,str:k[B]})}return x}}H.DapAnChiTietParser=d,d.TYPE_NAME="chitietdapan"},13826:(Ne,H,I)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.DapAnParser=void 0;const F=I(8897),h=I(86563);class U extends h.Parser{constructor(d){super(),null!=d&&(this.isOn=d),this.TYPE=U.TYPE_NAME}do(d){return this.match(d,F.CONST.DAPAN_PATTERN)}static getAnsFromHelp(d){for(const C of d){let g=C.replace(/\|/g,"").trim().match(F.CONST.HELP_ANS_PATTERN.join("|"));if(null!=g)for(const _ of g)if(null!=_&&1==_.length)return _}return""}}H.DapAnParser=U,U.TYPE_NAME="dapan"},12273:(Ne,H,I)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.FooterParser=void 0;const F=I(8897),h=I(86563);class U extends h.Parser{constructor(d){super(),null!=d&&(this.isOn=d),this.TYPE=U.TYPE_NAME}do(d){return this.match(d,F.CONST.FOOTER_PATTERN)}}H.FooterParser=U,U.TYPE_NAME="footer"},51453:(Ne,H,I)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.HetParser=void 0;const F=I(8897),h=I(86563);class U extends h.Parser{constructor(d){super(),null!=d&&(this.isOn=d),this.TYPE=U.TYPE_NAME}do(d){return this.match(d,F.CONST.HET_PATTERN)}}H.HetParser=U,U.TYPE_NAME="end"},54716:(Ne,H,I)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.HuongDanParser=void 0;const F=I(8897),h=I(86563);class U extends h.Parser{constructor(d){super(),null!=d&&(this.isOn=d),this.TYPE=U.TYPE_NAME}do(d){return this.match(d,F.CONST.HUONGDAN_PATTERN)}}H.HuongDanParser=U,U.TYPE_NAME="huongdan"},7411:(Ne,H,I)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.IncludeParser=void 0;const F=I(86563);class h extends F.Parser{constructor(E){super(),null!=E&&(this.isOn=E),this.TYPE=h.TYPE_NAME}do(E){let d=E.replace(/\|/g,"").trim(),g=/\[@([CTQG]\d+):[^\]]*\]/g,_=/\[@(F:[^\]]*)\]/g,x=/\[[^\]\d]+(\d+)[^\]\d]+\]/g,w=/\[[^\]]+\]/g;if(/^\[@[^!\]]+\]([\.,]\[[^\]!]+\])*$/.test(d)){let k=d;return k=k.replaceAll(g,"$1").replaceAll(_,"$1").replaceAll(x,"$1").replaceAll(w,""),[{type:this.TYPE,pos:[0,0],label:"@@."+k}]}return[]}}H.IncludeParser=h,h.TYPE_NAME="include"},86563:(Ne,H)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.Parser=void 0,H.Parser=class I{constructor(){this.isOn=!0,this.TYPE="default"}on(){this.isOn=!0}off(){this.isOn=!1}parse(h){return this.isOn?this.do(h):[]}match(h,U){let E=h.replace(/\|/g,"").trim().match(U.join("|"));return null!=E&&E.length>0?[{type:this.TYPE,pos:[0,0]}]:[]}}},52169:(Ne,H,I)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.QuestionParser=void 0;const F=I(8897),h=I(86563);class U extends h.Parser{constructor(d){super(),null!=d&&(this.isOn=d),this.TYPE=U.TYPE_NAME}do(d){let C=this.matchPos(d);if(C.value){let g=null;for(let B=C.value.length-1;B>=0;B--)if(C.value[B]){g=C.value[B];break}if(null==g)return[];let _=d.replace(/\|/g,"").toLowerCase().indexOf(g),x=_,w="",k=d.toLowerCase();for((g.endsWith("(")||g.endsWith("["))&&(g=g.substring(0,g.length-1));x<k.length&&("|"!=k[x]&&(w+=k[x]),x++,w!=g););let M={type:this.TYPE,pos:[_,x]};return M.label=this.getNumberFromStr(d.substring(M.pos[0],M.pos[1])),M.olabel=g,[M]}return[]}matchPos(d){let C=d.replace(/\|/g,"").toLowerCase().trim(),g=F.CONST.QUESTION_PATTERN.join("|"),_=C.matchAll(g).next();return _.value||(g=F.CONST.QUESTION_PATTERN2.join("|"),_=C.matchAll(g).next()),_}getNumberFromStr(d){let C=d.match(/(\d+)/);return C?C[0]:""}}H.QuestionParser=U,U.TYPE_NAME="question"},71598:(Ne,H,I)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.SectionParser=void 0;const F=I(8897),h=I(86563);class U extends h.Parser{constructor(d){super(),null!=d&&(this.isOn=d),this.TYPE=U.TYPE_NAME}do(d){let C=d.replace(/\|/g,"");C=C.replaceAll(/\[![!ibuchl]+:\$(([^$]|\$[^\]])+)\$\]/g,"$1");let g=C.toLowerCase().trim().match(F.CONST.SECTION_PATTERN_LOWER.join("|")),_=null!=g&&g.length>0;if(_||(g=C.trim().match(F.CONST.SECTION_PATTERN_NORMAL.join("|")),_=null!=g&&g.length>0),_&&g){let k,x=/\s+([0-9ABCDEFIVX]+)\s*[.:]/g,w=C.matchAll(x).next();return w.done&&(x=/\s+([0-9ABCDEFIVX]+)\s*$/g,w=C.matchAll(x).next()),w.done||(k=w.value[1]),[{type:this.TYPE,pos:[0,0],label:C,extInfo:k}]}return[]}}H.SectionParser=U,U.TYPE_NAME="section"},60987:(Ne,H,I)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.ModifyAnsRule=void 0;const F=I(56446);class h extends F.Rule{constructor(E){super(E??"","modify:")}load(E){let d=new h(E);return""!=d.pattern?d:null}run(E,d){if(""==this.pattern)return!1;if(this.getStack(E,d).endsWith(this.pattern)&&this.checkVal(E,d)){for(const g of this.data){let _=g.split(":"),x=d-+_[0],w=E[x].label;E[x].label=_[1],E[x].err=w+" -> "+_[1]}return!0}return!1}}H.ModifyAnsRule=h},77780:(Ne,H,I)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.RemoveARule=void 0;const F=I(56446);class h extends F.Rule{constructor(E){super(E??"","removea:")}load(E){let d=new h(E);return""!=d.pattern?d:null}run(E,d){if(""==this.pattern)return!1;if(this.getStack(E,d).endsWith(this.pattern)&&this.checkVal(E,d,!1)){for(const g of this.data)E.splice(d-+g,1);return!0}return!1}}H.RemoveARule=h},2630:(Ne,H,I)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.RemoveDupRule=void 0;const F=I(56446);class h extends F.Rule{constructor(E){super(E??"","rmdup:")}load(E){let d=new h(E);return""!=d.pattern?d:null}run(E,d){return""!=this.pattern&&(!(!this.getStack(E,d).endsWith(this.pattern)||E[d].label!=E[d-1].label)&&(E.splice((E[d].score??0)>(E[d-1].score??0)?d-1:d,1),!0))}}H.RemoveDupRule=h},37805:(Ne,H,I)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.RemoveRule=void 0;const F=I(56446);class h extends F.Rule{constructor(E){super(E??"","remove:")}load(E){let d=new h(E);return""!=d.pattern?d:null}run(E,d){if(""==this.pattern)return!1;if(this.getStack(E,d).endsWith(this.pattern)&&this.checkVal(E,d)){for(const g of this.data)E.splice(d-+g,1);return!0}return!1}}H.RemoveRule=h},56446:(Ne,H)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.Rule=void 0,H.Rule=class I{constructor(h,U){if(this.TYPE="",this.pattern="",this.valPattern="",this.data=[],this.TYPE=U,!h.startsWith(this.TYPE))return;let d=h.substring(this.TYPE.length).split("=>"),C=d[0].split(":");this.pattern=C[0].trim(),this.valPattern=C.length>1?C[1].trim():"",this.data=d[1].split(",").map(g=>g.trim())}checkVal(h,U,E=!0){if(""==this.valPattern)return!0;let C=[];for(let _=Math.ceil(this.pattern.length/2);_>0;_--)C.push(h[U-_+1].label?.trim());let g=C.join("-");return new RegExp(this.valPattern).test(E?g.toLocaleUpperCase():g)}getStack(h,U){let E="",d=U-10>=0?U-10:0;for(;d<=U;d++)E+="-"+h[d].type[0];return E}}},2721:(Ne,H,I)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.SameKindRule=void 0;const F=I(8897),h=I(53781),U=I(13826),E=I(51453),d=I(54716),C=I(71598),g=I(56446);class _ extends g.Rule{constructor(w){super(w??"","same:")}load(w){let k=new _(w);return""!=k.pattern?k:null}run(w,k){if(""==this.pattern)return!1;let M=w[k];if(!M?.type.startsWith(this.pattern))return!1;let B="",Q=0,D=w.length;for(let K=0;K<k;K++){let ee=w[K];(ee.type==E.HetParser.TYPE_NAME||ee.type==U.DapAnParser.TYPE_NAME)&&(B="da",K>k?D=K:Q=K),ee.type==d.HuongDanParser.TYPE_NAME&&"da"==B&&(B="hd",K<k&&(Q=K))}if("da"==B)return!1;let oe,Z=[],V=this.valPattern.split(",");for(const K of V){let ee=K.trim(),de=new RegExp(F.CONST[ee].join("|"));Z.push(de)}for(let K of Z){for(let ee=Q;ee<D;ee++)if(w[ee].type.startsWith(this.pattern)&&K.test(w[ee].olabel??"")){oe=K;break}if(oe)break}if(oe&&!oe.test(M.olabel??"")){let K=k>0?w[k-1].type==C.SectionParser.TYPE_NAME:null,ee=k>0&&!oe.test(w[k-1].olabel??"");if(!(K&&w[k+1]?.type==h.AnswerParser.TYPE_NAME&&w[k+2]?.type==h.AnswerParser.TYPE_NAME&&w[k+3]?.type==h.AnswerParser.TYPE_NAME||ee))return w.splice(k,1),!0}return!1}}H.SameKindRule=_},4159:(Ne,H,I)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.AnswerParser=void 0;const F=I(48089),h=I(37403),U=I(15025);class E extends U.Parser{constructor(){super(),this.TYPE=E.TYPE_NAME}parse(C,g,_,x,w,k){var M=[],B=this.matchPos(g.strLine,!1);if(0==B.length&&(B=this.matchPos(g.strLine,!0)),B.length>0)for(const Q of B)M.push({str:Q.value,pageIndex:g.pageIndex,lineIndex:_,transform:F.CanvasUtil.calIndexPos(g.textObjs,w,k,Q.index),startLeft:F.CanvasUtil.calIndexPos2(g.textObjs,w,k,Q.index+1),type:this.TYPE});return M}static getRemoveBox(C,g){let _=C.startLeft?C.startLeft[5]-2:g[C.lineIndex].top,x=C.transform[4]-h.CONST.MARGIN_LEFT,w=C.startLeft?C.startLeft[5]+C.startLeft[3]:g[C.lineIndex].bottom;return{pageIndex:C.pageIndex,top:_||20,left:x,heigh:w&&_?w-_:0,width:(C.startLeft?C.startLeft[4]:0)-x}}static getBoxes(C,g,_,x){const w=x,k=h.CONST.MARGIN_LEFT;let M=[],B=g[C.lineIndex].top,Q=g[C.lineIndex].bottom;if(!B||!Q)return[];let Z=Q,V=C.transform[4]-k,oe=_&&C.lineIndex==_.lineIndex?_.transform[4]-k:g[C.lineIndex].transform[4]+g[C.lineIndex].width+k;if(M.push({pageIndex:C.pageIndex,top:B,left:V,width:oe-V,heigh:Q-B}),_&&_.lineIndex==C.lineIndex)return M;B=Q,Q=w,oe=0;let K=C.pageIndex,ee=0;for(ee=C.lineIndex+1;ee<g.length;ee++){if(Q==w&&F.CanvasUtil.isLastLineOfPage(ee,g)){let de=g[ee].isFooter?g[ee-1]:g[ee];Q=de.transform[5]+de.height+20}let ne=g[ee].top;if(ee>C.lineIndex+1&&!g[ee-1].isFooter){let de=g[ee-1].transform[4]+g[ee-1].width+k;de>oe&&(oe=de);let fe=g[ee-1].transform[4]-k;fe<V&&(V=fe)}if(g[ee].isFooter&&ne)ee-C.lineIndex>1?(Q=g[ee-1].transform[5]+g[ee-1].height+h.CONST.LINE_MAGIN,V=g[C.lineIndex+1].transform[4]-k):Q=g[C.lineIndex].bottom;else if(g[ee].pageIndex>K&&(Q&&Q-B>h.CONST.LINE_SMALL_HEIGHT&&ee-C.lineIndex>1&&M.push({pageIndex:K,top:B,left:V,width:oe-V,heigh:Q-B}),B=20,Z=B),K=g[ee].pageIndex,ne){Q=ne;break}}if(ee>=g.length&&(ee=g.length-1),ee-C.lineIndex>1&&g[ee-1].transform[5]>Z&&!F.CanvasUtil.isFirstLineOfPage(ee,g)){let ne=20==B?g[ee].transform[4]:g[C.lineIndex+1].transform[4];Q&&Q-B>h.CONST.LINE_SMALL_HEIGHT&&M.push({pageIndex:K,top:B,left:ne,width:oe-ne,heigh:Q-B})}_&&_.type==E.TYPE_NAME&&_.transform[4]>g[_.lineIndex].transform[4]+25*h.CONST.RENDER_SCALE&&(oe=_.transform[4]-k,B=g[_.lineIndex].top,V=g[_.lineIndex].transform[4]-k,Q=g[_.lineIndex].bottom,B&&Q&&Q-B>h.CONST.LINE_SMALL_HEIGHT&&M.push({pageIndex:K,top:B,left:V,width:oe-V,heigh:Q-B}));for(let ne=M.length-1;ne>=1;ne--)M[ne].left-(M[ne-1].left+M[ne-1].width)>=20*h.CONST.RENDER_SCALE&&M.splice(ne,1);return M}matchPos(C,g){for(var _=g?C.toUpperCase():C,x=h.CONST.ANS_PATTERN,w=new RegExp("[\\s\\|\\.]"),k=_.matchAll(x),M=[];;){var B=k.next();if(B.done)break;for(var Q=0,D=B.value.index;D<_.length&&w.test(_[D]);D++)Q++;let Z=B.value[0].substr(Q,1);"A"==Z&&!_.replace(/\|/g,"").trim().startsWith("A")||M.push({value:Z,index:B.value.index+Q})}return M}}H.AnswerParser=E,E.TYPE_NAME="answer"},48089:(Ne,H,I)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.CanvasUtil=void 0;const F=I(37403);class h{static drawPoint(E,d,C){null!=E&&(E.fillStyle=d,E.beginPath(),E.arc(C.left,C.top,5,0,2*Math.PI),E.fill())}static drawBox(E,d,C,g){null!=E&&(g?(E.fillStyle=d,E.beginPath(),E.rect(C.left,C.top,C.width,C.heigh),E.fill()):(E.strokeStyle=d,E.beginPath(),E.rect(C.left,C.top,C.width,C.heigh),E.stroke()))}static drawBox2(E,d,C,g,_){null!=E&&(E.strokeStyle=d,E.beginPath(),E.rect(_[4],_[5],C,g),E.stroke())}static drawLine(E,d,C,g){null!=E&&(E.strokeStyle=d,E.beginPath(),E.moveTo(C,g),E.lineTo(E.canvas.width-10,g),E.stroke())}static drawText(E,d,C,g){null!=E&&(E.font="11px Arial",E.fillStyle=d,E.fillText(g,C[4],C[5]))}static isLineIntersec(E,d){let C=E.transform[5]<=d.transform[5]&&d.transform[5]<=E.transform[5]+E.height,g=d.transform[5]<=E.transform[5]&&E.transform[5]<=d.transform[5]+d.height,_=E.transform[4]<=d.transform[4]&&d.transform[4]<=E.transform[4]+E.width+F.CONST.INTERSEC_MARGIN,x=d.transform[4]<=E.transform[4]&&E.transform[4]<=d.transform[4]+d.width+F.CONST.INTERSEC_MARGIN,w=this.isSameLine(E,d);return(C||g)&&(_||x)&&!w}static isLineVIntersec(E,d){return(E.transform[5]<=d.transform[5]&&d.transform[5]<=E.transform[5]+E.height||d.transform[5]<=E.transform[5]&&E.transform[5]<=d.transform[5]+d.height)&&(E.transform[4]<=d.transform[4]&&d.transform[4]<=E.transform[4]+E.width+F.CONST.INTERSEC_MARGIN||d.transform[4]<=E.transform[4]&&E.transform[4]<=d.transform[4]+d.width+F.CONST.INTERSEC_MARGIN)&&Math.abs(d.transform[4]-E.transform[4])>F.CONST.INTERSEC_MARGIN/2}static isSameLine(E,d){return Math.abs(E.transform[5]+E.height-(d.transform[5]+d.height))<=F.CONST.LINE_MAGIN}static isObjIntersec(E,d){return E.transform[5]<=d.transform[5]&&d.transform[5]<=E.transform[5]+E.height||d.transform[5]<=E.transform[5]&&E.transform[5]<=d.transform[5]+d.height}static isObjFullIntersec(E,d){return(E.transform[5]<=d.transform[5]&&d.transform[5]<=E.transform[5]+E.height||d.transform[5]<=E.transform[5]&&E.transform[5]<=d.transform[5]+d.height)&&(E.transform[4]<=d.transform[4]&&d.transform[4]<=E.transform[4]+E.width||d.transform[4]<=E.transform[4]&&E.transform[4]<=d.transform[4]+d.width)}static isFirstLineOfPage(E,d){return!(E<0||E>=d.length||0!=E&&d[E-1].pageIndex==d[E].pageIndex)}static isLastLineOfPage(E,d){return!(E<0||E>=d.length||E!=d.length-1&&d[E+1].pageIndex==d[E].pageIndex)}static getTopLine(E,d,C){let g=C[d],_=[[F.CONST.STEP_SIZE,F.CONST.OVERLAP],[1,F.CONST.OVERLAP],[1,.3]];for(const x of _){let w=x[0],k=x[1],M=g.transform[5],B=0,Q=3*w;if(!h.isFirstLineOfPage(d,C)){let Z=h.isSameLine(C[d-1],g);h.isLineIntersec(C[d-1],g)?(M=C[d-1].transform[5]+C[d-1].height,B=C[d-1].transform[5],C[d-1].transform[4]>C[d].transform[4]+2*F.CONST.MARGIN_LEFT?B-=2*F.CONST.MARGIN_LEFT:B+=C[d-1].height*k,w=1,Q=C[d].transform[5]+C[d].height/2-M):(B=Z&&d-2>=0?C[d-2].transform[5]+C[d-2].height*k:C[d-1].transform[5]+C[d-1].height*k,Z&&h.isFirstLineOfPage(d-1,C)&&(B=0))}if(!F.CONST.ENABLE_IMAGE_PROCESS)return[M,0];let D=!1;for(;M>B;){if(!h.hasColor(E,g.transform[4],M,g.width,w))return[M,0];D||(D=!0,M+=Q),M-=w}}return[g.transform[5],1]}static arrContains(E,d){for(const C of d)if(C==E)return!0;return!1}static getBottomLine(E,d,C){let g=C[d],_=[[F.CONST.STEP_SIZE,F.CONST.OVERLAP],[1,F.CONST.OVERLAP],[1,.3]];for(const x of _){let w=x[0],k=x[1],M=g.transform[5]+g.height,B=9999,Q=3*w;if(!h.isLastLineOfPage(d,C)){let Z=h.isSameLine(C[d+1],g);h.isLineIntersec(C[d+1],g)?(M=C[d+1].transform[5],B=C[d+1].transform[5]+C[d+1].height,C[d+1].transform[4]>C[d].transform[4]+2*F.CONST.MARGIN_LEFT?B+=2*F.CONST.MARGIN_LEFT:B-=C[d+1].height*k,Q=C[d].transform[5]+C[d].height/2-M):(B=Z&&d+2<C.length?C[d+2].transform[5]+C[d+2].height-C[d+2].height*k:C[d+1].transform[5]+C[d+1].height-C[d+1].height*k,Z&&h.isLastLineOfPage(d+1,C)&&(B=9999));let V=C[d+1].top;if(V&&M>=V&&!Z)return[V,0]}if(!F.CONST.ENABLE_IMAGE_PROCESS)return[M,0];let D=!1;for(;M<B;){if(!h.hasColor(E,g.transform[4],M,g.width,w))return[M,0];D||(D=!0,M-=Q),M+=w}}return[g.transform[5]+g.height,1]}static hasColor(E,d,C,g,_){let x=Math.round(d),w=Math.round(x+g),k=Math.round(C),M=Math.round(k+_);for(let V=k;V<M;V++)for(let oe=x;oe<w;oe++){let K=4*(V*E.width+oe);if((E.data[K]+E.data[K+1]+E.data[K+2])/3<150)return!0}return!1}static calIndexPos2(E,d,C,g,_){let x=[],w=0,k=0,M=0,B=0,Q=0,D=0,Z=!0,V=!0;for(const ne of E){V=this.isObjIntersec(E[0],ne),B=ne.transform[4],_||(w+=B-M>F.CONST.SPLIT_MARGIN&&""!=ne.str.trim()||Q!=ne.transform[5]?1:0),Z=B+2*F.CONST.MARGIN_LEFT>=M;let de=ne.transform[4]+ne.width;if(V&&(M=de),de>k&&V&&(k=de),w+=ne.str.length,w>g&&Z&&V){ne.transform.forEach(Ge=>{x.push(Ge)}),x[3]=ne.height,x[2]=D,x[1]=ne.str.length-w+g;let fe=ne.str.substr(0,ne.str.length-w+g+1);if(fe.length==ne.str.length){x[4]=x[4]+ne.width;break}var K=d[ne.fontName].fontFamily,ee=Math.hypot(ne.transform[2],ne.transform[3]);C.font=`${ee}px ${K}`;let Le=C.measureText(fe).width,xe=C.measureText(ne.str).width;x[4]=x[4]+ne.width*Le/xe;break}V&&(Q=ne.transform[5]),D++}return 0==x.length&&(x=[0,E[E.length-1].length-1,E.length-1,E[0].height,k,E[0].transform[5]]),x}static calIndexPos(E,d,C,g,_){let x=[],w=0,k=0,M=0,B=0,Q=0,D=0,Z=!0,V=!0,oe="";for(const de of E){V=this.isObjIntersec(E[0],de),B=de.transform[4],_||(w+=B-M>F.CONST.SPLIT_MARGIN&&""!=de.str.trim()||Q!=de.transform[5]?1:0,oe+=(B-M>F.CONST.SPLIT_MARGIN&&""!=de.str.trim()||Q!=de.transform[5]?"|":"")+de.str),Z=B+2*F.CONST.MARGIN_LEFT>=M;let fe=de.transform[4]+de.width;if(V&&(M=fe),fe>k&&V&&(k=fe),w+=de.str.length,w>g&&Z&&V){let Le=de.str.substr(0,de.str.length-w+g);var ee=d[de.fontName].fontFamily,ne=Math.hypot(de.transform[2],de.transform[3]);C.font=`${ne}px ${ee}`;let xe=C.measureText(Le).width,Ge=C.measureText(de.str).width;de.transform.forEach(nt=>{x.push(nt)}),x[4]=x[4]+de.width*xe/Ge,x[3]=de.height,x[2]=D,x[1]=de.str.length-w+g;break}V&&(Q=de.transform[5]),D++}return 0==x.length&&(x=[0,E[E.length-1].length-1,E.length-1,E[0].height,k,E[0].transform[5]]),x}static getTextBottom(E,d,C,g){let _=Math.atan2(E[1],E[0]);d.vertical&&(_+=Math.PI/2);const x=Math.hypot(E[2],E[3]),w=x*h.getAscent(d.fontFamily,C,g);let k=E[5],M=0;M=0===_?w:w*Math.cos(_);let B=0*M;return k=E[5]-M-B,[k,x+B]}static getAscent(E,d,C){const x=C.get(E);if(x)return x;d.save(),d.font=`30px ${E}`;const w=d.measureText("");let k=w.fontBoundingBoxAscent,M=Math.abs(w.fontBoundingBoxDescent);if(k){d.restore();const Q=k/(k+M);return C.set(E,Q),Q}d.strokeStyle="red",d.clearRect(0,0,30,30),d.strokeText("g",0,0);let B=d.getImageData(0,0,30,30).data;M=0;for(let Q=B.length-1-3;Q>=0;Q-=4)if(B[Q]>0){M=Math.ceil(Q/4/30);break}d.clearRect(0,0,30,30),d.strokeText("A",0,30),B=d.getImageData(0,0,30,30).data,k=0;for(let Q=0,D=B.length;Q<D;Q+=4)if(B[Q]>0){k=30-Math.floor(Q/4/30);break}if(d.restore(),k){const Q=k/(k+M);return C.set(E,Q),Q}return C.set(E,.8),.8}static getMaxLineRight(E,d){let C=0;for(const g of d)if(g.pageIndex==E||-1==E){let _=g.transform[4]+g.width;_>C&&(C=_)}return C}static getMinLineLeft(E,d){let C=99999;for(const g of d)if(g.pageIndex==E||-1==E){let _=g.transform[4];_<C&&(C=_)}return C}}H.CanvasUtil=h},37403:(Ne,H)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.CONST=void 0;class I{}H.CONST=I,I.RENDER_SCALE=2,I.LINE_SMALL_HEIGHT=7*I.RENDER_SCALE,I.SPLIT_MARGIN=3*I.RENDER_SCALE,I.INTERSEC_MARGIN=20*I.RENDER_SCALE,I.LINE_MAGIN=2*I.RENDER_SCALE,I.MARGIN_LEFT=2*I.RENDER_SCALE,I.ENABLE_IMAGE_PROCESS=!0,I.STEP_SIZE=2,I.CROP_FULL_WIDTH=!0,I.OVERLAP=.5,I.QUESTION_PATTERN=[],I.QUESTION_PATTERN2=[],I.BREAK_LINE_PATTERN=[],I.SECTION_PATTERN_LOWER=[],I.SECTION_PATTERN_NORMAL=[],I.KICK_PATTERN=[],I.TVCN_CHAR=[],I.HET_PATTERN=[],I.DAPAN_PATTERN=[],I.HUONGDAN_PATTERN=[],I.MULTIPLE_ANS_PATTERN=[],I.DRAW_RESULT="",I.SKIP_CHAR=[],I.FOOTER_PATTERN=[],I.HELP_ANS_PATTERN=[],I.ANS_PATTERN=[]},66933:(Ne,H,I)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.DapAnChiTietParser=void 0;const F=I(15025);class h extends F.Parser{constructor(E,d){super(),this.firstLine=null,this.lineIdx=0,this.str="",this.TYPE=h.TYPE_NAME,null!=E&&(this.isOn=E),this.offCalback=d}parse(E,d,C,g,_,x){var k=d.strLine.replace(/\|/g,"").replace(/\s*\.*\-*:*,*;*/g,"");return k=(k=(k=(k=(k=k.replace(/C\xe2u/g,"")).replace(/\u0110\xe1p\xe1n/g,"")).replace(/\u0110\xe1p/g,"")).replace(/\xe1n/g,"")).replace(/\u0110\/A/g,""),/^[0-9ABCDEFGHabcdefgh]+$/g.test(k)&&k.length>=2&&(null==this.firstLine&&(this.firstLine=d,this.lineIdx=C),this.str+=k),[]}static getBoxes(E,d,C,g){return[]}getResult(E){let d=[],C="",g=[],_=!1;for(let x=0;x<E.length;x++){let w=E.charCodeAt(x),k=w>=65&&w<=72;if(k&&""==C)return[];k!=_&&(g.push(C),C=""),_=k,C+=E[x]}""!=C&&g.push(C);for(let x=1;x<g.length;x+=2){let w=0,k=Math.floor(g[x-1].length/g[x].length),M=+g[x-1].substr(w,k),B=M;for(let Q=0;Q<g[x].length;Q++){if(Q>=g[x-1].length)return[];if(M=+g[x-1].substr(w,k),M!=B)return[];d.push({num:M,str:g[x][Q]}),w+=k,B=M+1,k=B.toString().length}}return d}on(){super.on(),this.firstLine=null,this.lineIdx=0,this.str=""}off(){if(super.off(),this.offCalback&&this.firstLine){var E=this.getResult(this.str.toUpperCase());if(E.length>0){let d=JSON.stringify({main:E,sub:[]});this.offCalback([{str:d,pageIndex:this.firstLine.pageIndex,lineIndex:this.lineIdx,transform:this.firstLine.transform,type:this.TYPE}])}}this.firstLine=null,this.str=""}}H.DapAnChiTietParser=h,h.TYPE_NAME="dapanchitiet"},94081:(Ne,H,I)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.DapAnDienTuParser=void 0;const F=I(37403),h=I(93494),U=I(2101),E=I(15025);class d extends E.Parser{constructor(g,_){super(),this.firstLine=null,this.lineIdx=0,this.str="",this.TYPE=d.TYPE_NAME,null!=g&&(this.isOn=g),this.offCalback=_}parse(g,_,x,w,k,M){let B=[new h.FooterParser,new U.HuongDanParser];for(const D of B)if(D.parse(g,_,x,w,k,M).length>0)return[];var Q=_.strLine;return null==this.firstLine&&(this.firstLine=_,this.lineIdx=x),this.str+=Q+"\n",[]}static getBoxes(g,_,x,w){return[]}getResult(g){let _=[],x=g.replace(/\n/g,"\n|"),w=F.CONST.QUESTION_PATTERN.join("|").replace(/\(\^/g,"(\\|"),k=x.matchAll(new RegExp(w,"ig"));for(;;){let Z=k.next();if(Z.done)break;let V=Z.value[0],oe=this.getNumberFromStr(V);x=x.replace(V,oe+".")}let D,B=x.matchAll(/\d+[\.\-]/g),Q=-1;for(;;){let Z=B.next();if(Z.done)break;if(-1==Q)Q=Z.value.index,D=Z;else{let V=x.substr(Q,Z.value.index-Q);_.push(this.toAns(V,D)),Q=Z.value.index,D=Z}}if(Q>=0&&D){let Z=x.substr(Q);_.push(this.toAns(Z,D))}return _}toAns(g,_){let x=_.value[0].length;return{num:+_.value[0].substr(0,x-1),str:g.substr(x).replace(/\|/g," ").replace(/ +/g," ").trim()}}getNumberFromStr(g){var _=g.match(/(\d+)/);return _?_[0]:""}on(){super.on(),this.firstLine=null,this.lineIdx=0,this.str=""}off(){if(super.off(),this.offCalback&&this.firstLine){var g=this.getResult(this.str);if(g.length>0){let _=JSON.stringify({main:[],sub:g});this.offCalback([{str:_,pageIndex:this.firstLine.pageIndex,lineIndex:this.lineIdx,transform:this.firstLine.transform,type:this.TYPE}])}}this.firstLine=null,this.str=""}}H.DapAnDienTuParser=d,d.TYPE_NAME="dapandientu"},44123:(Ne,H,I)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.DapAnParser=void 0;const F=I(37403),h=I(15025);class U extends h.Parser{constructor(d){super(),null!=d&&(this.isOn=d),this.TYPE=U.TYPE_NAME}parse(d,C,g,_,x,w){let k=C.strLine.replace(/\|/g,"").trim().match(F.CONST.DAPAN_PATTERN.join("|"));return null!=k&&k.length>0?[{str:C.strLine,pageIndex:C.pageIndex,lineIndex:g,transform:C.transform,type:this.TYPE}]:[]}static getBoxes(d,C,g,_){return[]}static getAnsFromHelp(d){for(const C of d){let g=C.strLine.replace(/\|/g,"").trim().match(F.CONST.HELP_ANS_PATTERN.join("|"));if(null!=g)for(let _=0;_<g.length;_++)if(null!=g[_]&&1==g[_].length)return g[_]}return""}strContains(d,C){var g=d;for(const _ of C)if(g.indexOf(_)>=0)return!0;return!1}}H.DapAnParser=U,U.TYPE_NAME="dapan"},93494:(Ne,H,I)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.FooterParser=void 0;const F=I(37403),h=I(15025);class U extends h.Parser{constructor(){super(),this.TYPE=U.TYPE_NAME}parse(d,C,g,_,x,w){if(!C.isLastLine||_&&C.transform[5]<_.transform[5]+_.height)return[];var M=C.strLine.replace(/\|/g,"").trim().match(F.CONST.FOOTER_PATTERN.join("|"));return null!=M&&M.length>0?[{str:M[0],pageIndex:C.pageIndex,lineIndex:g,transform:C.transform,type:this.TYPE}]:[]}static getBoxes(d,C,g,_){return[]}}H.FooterParser=U,U.TYPE_NAME="footer"},15251:(Ne,H,I)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.HetParser=void 0;const F=I(37403),h=I(15025);class U extends h.Parser{constructor(d){super(),null!=d&&(this.isOn=d),this.TYPE=U.TYPE_NAME}parse(d,C,g,_,x,w){let k=C.strLine.replace(/\|/g,"").trim().match(F.CONST.HET_PATTERN.join("|"));return null!=k&&k.length>0?[{str:C.strLine,pageIndex:C.pageIndex,lineIndex:g,transform:C.transform,type:this.TYPE}]:[]}static getBoxes(d,C,g,_){return[]}strContains(d,C){for(const g of C)if(d.indexOf(g)>=0)return!0;return!1}}H.HetParser=U,U.TYPE_NAME="het"},2101:(Ne,H,I)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.HuongDanParser=void 0;const F=I(37403),h=I(15025),U=I(82130);class E extends h.Parser{constructor(){super(),this.TYPE=E.TYPE_NAME}parse(C,g,_,x,w,k){let M=g.strLine.replace(/\|/g,"").trim().match(F.CONST.HUONGDAN_PATTERN.join("|"));return null!=M&&M.length>0?[{str:g.strLine,pageIndex:g.pageIndex,lineIndex:_,transform:g.transform,type:this.TYPE}]:[]}static getBoxes(C,g,_,x){return U.QuestionParser.getBoxes(C,g,_,x)}strContains(C,g){var _=C;for(const x of g)if(_.indexOf(x)>=0)return!0;return!1}}H.HuongDanParser=E,E.TYPE_NAME="huongdan"},15025:(Ne,H)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.Parser=void 0,H.Parser=class I{constructor(){this.isOn=!0,this.TYPE="default"}on(){this.isOn=!0}off(){this.isOn=!1}process(h,U,E,d,C,g){return this.isOn?this.parse(h,U,E,d,C,g):[]}}},15119:(Ne,H,I)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.PdfRender=void 0;const F=I(48089),h=I(37403);class U{constructor(){let d=document.createElement("canvas");this.tempCanvas=d.getContext("2d"),this.ascentCache=new Map,this.imageCache=[]}loadPdf(d,C){var g=URL.createObjectURL(d);const x=pdfjsLib.getDocument({url:g,cMapPacked:!0,cMapUrl:"/assets/js/pdf-js-v2/cmaps/",disableAutoFetch:!1,disableFontFace:!1,disableRange:!1,disableStream:!1,docBaseUrl:"",enableXfa:!0,fontExtraProperties:!1,isEvalSupported:!0,maxImageSize:-1,pdfBug:!1,standardFontDataUrl:"/assets/js/pdf-js-v2/standard_fonts/",verbosity:1});var w=[];let k=this;x.promise.then(function(M){k.optionalContentConfigPromise=M.getOptionalContentConfig();for(var B=M._pdfInfo.numPages,Q=1;Q<=B;Q++)M.getPage(Q).then(D=>{w.push(D),w.length==B&&(w=w.sort((Z,V)=>Z._pageIndex>V._pageIndex?1:-1),C(w))})},function(M){console.error(M)})}getImages(d,C){let g=[];if("function"!=typeof d.objs.getAll)return console.log("Unable to read img"),g;let _=d.objs.getAll(),x=Object.keys(_);for(const w of x)_[w].data.pageIndex=C,g.push(_[w].data);return g}isImageObj(d){return-999==d.transform[0]&&"img"==d.str}getLines(d,C,g,_){let x=_.scale,w=d.items.length;for(let D=0;D<w;D++){let Z=d.items[D];this.isImageObj(Z)||(Z.transform=U.transform(_.transform,Z.transform),Z.width=Z.width*x),Z.transform[4]+Z.width>g.canvas.width&&(Z.width=g.canvas.width-Z.transform[4]-20);let V=this.isImageObj(Z)?[Z.transform[5],Z.height]:F.CanvasUtil.getTextBottom(Z.transform,d.styles[Z.fontName],this.tempCanvas,this.ascentCache);Z.height=V[1];let oe=Math.ceil(V[0]);Z.transform[5]=oe}d.items.sort((D,Z)=>1e6*Math.floor(D.transform[5])-D.transform[4]<1e6*Math.floor(Z.transform[5])-Z.transform[4]?-1:1);let B,k=[],M=0;this.imageCache[C]?B=this.imageCache[C]:(B=g.getImageData(0,0,g.canvas.width,g.canvas.height),this.imageCache[C]=B);var Q={strLine:"",transform:[],textObjs:[],pageIndex:C,width:0,height:0,txtLength:0};for(let D=0;D<w;D++){let Z=d.items[D];if(this.isImageObj(Z))for(let oe=0;oe<w;oe++)if(D!=oe&&F.CanvasUtil.isObjIntersec(Z,d.items[oe])){Z.str="";break}if(F.CanvasUtil.arrContains(Z.str.trim(),h.CONST.SKIP_CHAR))continue;let V=Math.floor(Z.transform[5]+Z.height);0!=M?M-V>=-h.CONST.LINE_MAGIN?this.addTxtToLine(Q,Z):0!=Q.textObjs.length&&(k.push(Q),Q=this.newLine(Z,C),M=Math.floor(Q.transform[5]+Q.height)):(Q=this.newLine(Z,C),M=Math.floor(Q.transform[5]+Q.height))}k.push(Q);for(const D of k)this.calculateSize(D);this.findAndMergeAnsQuestBlock(k,"ans"),this.findAndMergeAnsQuestBlock(k,"quest"),this.findAndMergeBlock(k),this.mergeIntersecLine(k),this.mergeSmallLine(k,B);for(const D of k)this.calculateSize(D);return k}mergeIntersecLine(d){let C=0;for(;C<d.length;){let g=d[C];C++,C<d.length&&F.CanvasUtil.isLineVIntersec(g,d[C])&&(this.mergeLine(g,d[C]),d.splice(C,1),C--)}}findAndSplitQuestAnsLine(d,C,g){let _=0,x=[],w=h.CONST.BREAK_LINE_PATTERN.join("|");for(const M of d){M.top=void 0,M.bottom=void 0;var k=M.strLine.replace(/\|/g,"").trim().match(w);if(null!=k&&k.length>0){let B=/[\s\|\.]+[B\u0412][\s\|]*\./g,Q=M.strLine.trim().toUpperCase().match(B);if(null!=Q&&Q.length>0){let D=k[0].toUpperCase().indexOf("A");x.push({lineIndex:_,strIndex:D})}}_++}for(let M=x.length-1;M>=0;M--){let B=x[M].lineIndex;this.splitLine(B,C[d[B].pageIndex],g[d[B].pageIndex],x[M].strIndex,d)}}mergeSmallLine(d,C){let g=0,_=1.2*h.CONST.LINE_SMALL_HEIGHT;for(;g<d.length;){let x=d[g];if(!x||!this.isSmallLine(x)){g++;continue}g-1>=0&&!d[g-1].bottom&&(d[g-1].bottom=F.CanvasUtil.getBottomLine(C,g-1,d)[0]),g+1<d.length&&!d[g+1].top&&(d[g+1].top=F.CanvasUtil.getTopLine(C,g+1,d)[0]);let w=g-1<0?-9999:this.getLineTop(x)-this.getLineBot(d[g-1]),k=g+1>=d.length?-9999:this.getLineTop(d[g+1])-this.getLineBot(x),M=g-1>=0&&d[g-1].transform[4]<=x.transform[4]&&x.transform[4]<=d[g-1].transform[4]+d[g-1].width,B=g+1<d.length&&d[g+1].transform[4]<=x.transform[4]&&x.transform[4]<=d[g+1].transform[4]+d[g+1].width;if(0==g&&k<=_&&B){this.mergeLine(d[g+1],x),d.splice(g,1),g--;continue}if(g==d.length-1&&w<=_&&M){this.mergeLine(d[g-1],x),d.splice(g,1),g--;continue}let Q=-1;w>k&&B&&k<=_?Q=g+1:w<=k&&M&&w<=_?Q=g-1:w<=k&&B&&k<=_?Q=g+1:w>k&&M&&w<=_&&(Q=g-1),Q>=0?(this.mergeLine(d[Q],x),d.splice(g,1),g--):g++}}isSmallLine(d){return d.height<h.CONST.LINE_SMALL_HEIGHT}mergeLine(d,C){for(const g of C.textObjs)this.addTxtToLine(d,g)}findAndMergeAnsQuestBlock(d,C){let _=0;for(;_<d.length;){if("ans"==C&&this.isAnsLine(d[_])||"quest"==C&&this.isQuestLine(d[_])){let w=_,k=-1,M=1,B=[];for(;M<=10;){if(w=_+k*M,w<0){k=1,M=1;continue}if(w>=d.length)break;let Q=this.isAnsLine(d[w]),D=Q||this.isQuestLine(d[w]),Z="ans"==C&&Q&&F.CanvasUtil.isSameLine(d[_],d[w]),V=!D&&F.CanvasUtil.isLineIntersec(d[_],d[w])&&d[w].transform[4]>d[_].transform[4];if((Z||V)&&B.push(w),M++,D&&1==k)break;(M>10||D)&&-1==k&&(k=1,M=1)}B.sort((Q,D)=>Q<D?1:-1);for(const Q of B)for(const D of d[Q].textObjs)this.addTxtToLine(d[_],D);for(const Q of B)d.splice(Q,1),Q<_&&_--}_++}}findAndMergeBlock(d){let C=0;for(;C<d.length;){if(this.isAnsLine(d[C])||this.isQuestLine(d[C])){C++;continue}let _=C+1;for(;_<d.length&&d[C].pageIndex==d[_].pageIndex;){let x=this.isAnsLine(d[_])||this.isQuestLine(d[_]);if(F.CanvasUtil.isLineIntersec(d[C],d[_])&&!x||F.CanvasUtil.isSameLine(d[C],d[_])){for(const w of d[_].textObjs)this.addTxtToLine(d[C],w);d.splice(_,1),_=C}_++}C++}}isAnsLine(d){let g=d.strLine.trim().match(/[\s\|\.]+[AB\u0412CDEFGHIJK]\s*\./g);return null!=g&&g.length>0}isQuestLine(d){let C=h.CONST.QUESTION_PATTERN.join("|"),g=d.strLine.replace(/\|/g,"").toLowerCase().trim().match(C);return null!=g&&g.length>0}encodeLines(d,C){let g="",_=0;for(const x of C){if(x.height<h.CONST.LINE_SMALL_HEIGHT){_-1>=0&&!C[_-1].bottom&&(C[_-1].bottom=F.CanvasUtil.getBottomLine(d,_-1,C)[0]),_+1<C.length&&!C[_+1].top&&(C[_+1].top=F.CanvasUtil.getTopLine(d,_+1,C)[0]);let w=_-1<0?-9999:this.getLineTop(x)-this.getLineBot(C[_-1]),k=_+1>=C.length?-9999:this.getLineTop(C[_+1])-this.getLineBot(x),M=_-1>=0&&C[_-1].transform[4]<=x.transform[4]&&x.transform[4]+x.width<=C[_-1].transform[4]+C[_-1].width,B=_+1<C.length&&C[_+1].transform[4]<=x.transform[4]&&x.transform[4]+x.width<=C[_+1].transform[4]+C[_+1].width,Q=1.2*h.CONST.LINE_SMALL_HEIGHT;Math.abs(w)>=Q&&Math.abs(k)>=Q?g+="L":g+=-9999==w?"3":-9999==k?"4":w>k&&B?"2":w<=k&&M?"1":w<=k&&B?"2":w>k&&M?"1":"L"}else g+="L";_++}return g}getLineTop(d){return d.top?d.top:d.transform[5]}getLineBot(d){return d.bottom?d.bottom:d.transform[5]+d.height}splitLine(d,C,g,_,x){let w=x[d],k=F.CanvasUtil.calIndexPos(w.textObjs,C,g,_,!0),M=this.newLine(w.textObjs[0],w.pageIndex),B=k[2],Q=k[1],D=w.textObjs[B],Z=D.transform,V={str:D.str.substr(0,Q),width:k[4]-Z[4],height:D.height,fontName:D.fontName,transform:[Z[0],Z[1],Z[2],Z[3],Z[4],Z[5]]},oe={str:D.str.substr(Q),width:D.width-V.width,height:D.height,fontName:D.fontName,transform:[Z[0],Z[1],Z[2],Z[3],k[4],Z[5]]},K=w.textObjs;w.textObjs=[],M.textObjs=[];for(let ee=0;ee<K.length;ee++)ee<B?this.addTxtToLine(w,K[ee]):ee>B?this.addTxtToLine(M,K[ee]):(this.addTxtToLine(w,V),this.addTxtToLine(M,oe));return this.calculateSize(w),this.calculateSize(M),d==x.length-1?x.push(M):x.splice(d+1,0,M),M}findAndMergeSmallLine(d,C,g){let _=0,x=d.matchAll(g),w=[];for(;;){let k=x.next();if(k.done)break;let M=k.value[0],B=k.value.index,Q=0,D=[];for(let Z=0;Z<M.length;Z++)"L"==M[Z]?Q=B+Z:D.push(B+Z);for(const Z of D){for(const V of C[Z].textObjs)this.addTxtToLine(C[Q],V);C[Q].top=void 0,C[Q].bottom=void 0,w.push(Z)}_++}w.sort((k,M)=>k<M?1:-1);for(const k of w)C.splice(k,1);return _}newLine(d,C){let g={strLine:"",transform:[],textObjs:[],pageIndex:C,width:0,height:0,txtLength:0};return g.transform[4]=d.transform[4],g.transform[5]=d.transform[5],g.height=d.height,g.width=d.width,g.txtLength=d.str.length,g.textObjs.push(d),g}addTxtToLine(d,C){C.transform[4]<d.transform[4]&&(d.transform[4]=C.transform[4]),C.transform[5]<d.transform[5]&&(d.transform[5]=C.transform[5]),C.transform[5]+C.height>d.transform[5]+d.height&&(d.height=C.transform[5]+C.height-d.transform[5]),C.transform[4]+C.width>d.transform[4]+d.width&&(d.width=C.transform[4]+C.width-d.transform[4]),d.txtLength+=C.str.length,d.textObjs.push(C);let g=d.transform[4]+d.width,_=d.height;for(const x of d.textObjs)x.transform[4]+x.width>g&&(g=x.transform[4]+x.width),x.transform[5]+x.height>d.transform[5]+_&&(_=x.transform[5]+x.height-d.transform[5]);d.width=g-d.transform[4],d.height=_}static transform(d,C){return pdfjsLib.Util.transform(d,C)}render(d,C,g,_){for(var x,k=d.length,M=0;M<k;M++){var B=document.createElement("div");B.className="pdf-page",B.id="page-"+M,null===(x=document.getElementById(C))||void 0===x||x.appendChild(B),this.renderPage(d[M],g,_)}}calculateSize(d){if(0==d.textObjs.length)return;d.textObjs.sort((D,Z)=>1e6*Math.floor(D.transform[4])+D.transform[5]>1e6*Math.floor(Z.transform[4])+Z.transform[5]?1:-1),d.strLine="";let C=0,g=0,_=0,x=0,w=9999,k=0,M=9999;for(const D of d.textObjs){let Z=F.CanvasUtil.isObjIntersec(d.textObjs[0],D);_=D.transform[4];let V=_-g>h.CONST.SPLIT_MARGIN&&""!=D.str.trim()||x!=D.transform[5]?"|":"";d.strLine+=V+D.str,_<M&&(M=_);let oe=D.transform[4]+D.width;Z&&(g=oe),oe>C&&Z&&(C=oe),Z&&(x=D.transform[5]),D.transform[5]<w&&(w=D.transform[5]),D.transform[5]+D.height>k&&(k=D.transform[5]+D.height)}d.transform[4]=M,d.transform[5]=w,d.width=C-M,d.height=k-w,d.transform[0]=w,d.transform[1]=k;let B=h.CONST.TVCN_CHAR,Q=d.strLine;for(const D of B)Q=Q.replace(new RegExp(D[0],"g"),D[1]);d.strLine=Q}renderPage(d,C,g){var _=d._pageIndex,x=d.getViewport({scale:C});let w=.8*x.width;var k=document.createElement("canvas"),M=document.getElementById("page-"+_);M?.appendChild(k),k.id="canvas"+_;var B=k.getContext("2d",{alpha:!1});k.height=x.height,k.width=x.width,k.style.height=x.height*w/x.width+"px",k.style.width=w+"px",M&&(M.style.width=k.style.width,M.style.height=k.style.height);const Z={canvasContext:B,transform:[1,0,0,1,0,0],viewport:x,annotationMode:pdfjsLib.AnnotationMode.ENABLE_FORMS,optionalContentConfigPromise:this.optionalContentConfigPromise,annotationCanvasMap:new Map,pageColors:{background:"Canvas",foreground:"CanvasText"}};d.render(Z).promise.then(function(){g&&g(B,d._pageIndex,x)})}}H.PdfRender=U},52280:(Ne,H,I)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.Process=void 0;const F=I(4159),h=I(48089),U=I(37403),E=I(66933),d=I(44123),C=I(93494),g=I(15251),_=I(2101),x=I(15119),w=I(82130),k=I(94904),M=I(94081);H.Process=class B{constructor(D){var Z,V,oe;let K=JSON.parse(D);U.CONST.RENDER_SCALE=K.RENDER_SCALE,U.CONST.LINE_SMALL_HEIGHT=K.LINE_SMALL_HEIGHT*U.CONST.RENDER_SCALE,U.CONST.SPLIT_MARGIN=K.SPLIT_MARGIN*U.CONST.RENDER_SCALE,U.CONST.INTERSEC_MARGIN=K.INTERSEC_MARGIN*U.CONST.RENDER_SCALE,U.CONST.LINE_MAGIN=K.LINE_MAGIN*U.CONST.RENDER_SCALE,U.CONST.MARGIN_LEFT=K.MARGIN_LEFT*U.CONST.RENDER_SCALE,U.CONST.ENABLE_IMAGE_PROCESS=K.ENABLE_IMAGE_PROCESS,U.CONST.STEP_SIZE=K.STEP_SIZE,U.CONST.CROP_FULL_WIDTH=K.CROP_FULL_WIDTH,U.CONST.OVERLAP=K.OVERLAP,U.CONST.QUESTION_PATTERN=K.QUESTION_PATTERN,U.CONST.QUESTION_PATTERN2=K.QUESTION_PATTERN2,U.CONST.BREAK_LINE_PATTERN=K.BREAK_LINE_PATTERN,U.CONST.SECTION_PATTERN_LOWER=K.SECTION_PATTERN_LOWER,U.CONST.SECTION_PATTERN_NORMAL=K.SECTION_PATTERN_NORMAL,U.CONST.KICK_PATTERN=K.KICK_PATTERN,U.CONST.TVCN_CHAR=K.TVCN_CHAR,U.CONST.HET_PATTERN=K.HET_PATTERN,U.CONST.DAPAN_PATTERN=K.DAPAN_PATTERN,U.CONST.HUONGDAN_PATTERN=K.HUONGDAN_PATTERN,U.CONST.MULTIPLE_ANS_PATTERN=K.MULTIPLE_ANS_PATTERN,U.CONST.DRAW_RESULT=K.DRAW_RESULT,U.CONST.SKIP_CHAR=K.SKIP_CHAR,U.CONST.FOOTER_PATTERN=null!==(Z=K.FOOTER_PATTERN)&&void 0!==Z?Z:["(trang\\s*\\d+)","(Page\\s*\\d+)","(Trang\\s*\\d+)","(TRANG\\s*\\d+)","(^\\d{1,4}$)"],U.CONST.HELP_ANS_PATTERN=null!==(V=K.HELP_ANS_PATTERN)&&void 0!==V?V:["([\\s\\.]*Ch\u1ecdn\\s*([ABCDEFGH]))"],U.CONST.ANS_PATTERN=null!==(oe=K.ANS_PATTERN)&&void 0!==oe?oe:["([\\s\\|\\.]+[ABCDEFGHIJK][\\s\\|]*[\\.\\)])"]}setUpdateStatusCallback(D){this.updateStatusCallback=D}setOncompleteCallback(D){this.onCompleteCallback=D}parsePdf(D){let Z=new x.PdfRender;Z.loadPdf(D,V=>{const oe=V.length;let K=[],ee=[],ne=document.createElement("div");ne.id="hiddenWrapper",ne.style.width="1px",ne.style.height="1px",ne.style.overflow="hidden",ne.style.opacity="0",ne.style.zIndex="-9999",ne.style.position="fixed",ne.style.top="0",ne.style.left="0",document.body.appendChild(ne);let de=document.createElement("div"),fe="canvasWrapper";de.id=fe,ne.appendChild(de);const Le=(new Date).getTime();let xe=[];Z.render(V,fe,U.CONST.RENDER_SCALE,(Ge,nt,ht)=>{if(null!=Ge&&(K[nt]=Ge,ee[nt]=ht),xe.push(1),this.updateStatusCallback&&this.updateStatusCallback(`Rendering: ${xe.length}/${oe}`),xe.length==oe){const Ct=(new Date).getTime();this.updateStatusCallback&&this.updateStatusCallback("Render done: "+(Ct-Le)/1e3+" secs"),this.startAnalyze(K,ee,V)}})})}showHidden(){let D=document.getElementById("hiddenWrapper");D&&(D.style.opacity="1",D.style.width="",D.style.height="",D.style.overflow="",D.style.position="")}imgToTextObj(D,Z){return{str:"img",fontName:Z,width:D.paintWidth,height:D.paintHeight,transform:[-999,0,0,0,-D.left,-D.top-D.paintHeight]}}startAnalyze(D,Z,V){const oe=V.length;let K=[],ee=[],ne=[],de=[],fe=new x.PdfRender;const Le=(new Date).getTime();for(let xe=0;xe<oe;xe++){const Ge=xe;let nt=fe.getImages(V[xe],Ge);for(const ht of nt)de.push(ht);V[xe].getTextContent().then(ht=>{var Ct;for(const e of nt)ht.items.push(this.imgToTextObj(e,ht.items.length>0?ht.items[0].fontName:""));var mt=fe.getLines(ht,Ge,D[Ge],Z[Ge]);if(ee=ee.concat(mt),ne[Ge]=ht.styles,K.push(1),K.length==oe){ee.sort((Ut,Hn)=>1e7*Ut.pageIndex+(Ut.transform.length>0?Ut.transform[5]:0)-(1e7*Hn.pageIndex+(Hn.transform.length>0?Hn.transform[5]:0))),fe.findAndSplitQuestAnsLine(ee,ne,D),""!=U.CONST.DRAW_RESULT&&console.log(ee);let e=this.findEntityPos(ee,ne,D,fe.imageCache,0);console.log("lstPos",e);let Dt=!1;for(const Ut of e)if(Ut.type==w.QuestionParser.TYPE_NAME){Dt=!0;break}if(Dt||(e=this.findEntityPos(ee,ne,D,fe.imageCache,1)),0==e.length)return void(this.onCompleteCallback&&this.onCompleteCallback([],D));let wt=e[0].type==E.DapAnChiTietParser.TYPE_NAME,ye=wt?JSON.parse(e[0].str):null,Yt=new Map,sn=new Map;if(wt){for(const Ut of ye.main)Yt.set(Ut.num,Ut.str);for(const Ut of ye.sub)sn.set(Ut.num,Ut.str)}let ii=this.getQuestionInfo(e,ee,D,Yt);ii.forEach(Ut=>{if(!Yt.has(Ut.num)&&!sn.has(Ut.num)&&Ut.help&&Ut.help.text){let Hn=d.DapAnParser.getAnsFromHelp(Ut.help.text);""!=Hn&&sn.set(Ut.num,Hn)}});for(const Ut of ii){if(!Ut.isGroup&&0==Ut.answers.length&&Yt.has(Ut.num)){let Hn={pageIndex:Ut.remove.pageIndex,top:Ut.remove.top-1,left:Ut.remove.left-1,width:1,heigh:1};for(const at of["A","B","C","D"]){let Lt={label:at,remove:Hn,positions:[Hn]};Yt.get(Ut.num)==at&&(Lt.isCorrect=!0),Ut.answers.push(Lt)}Ut.isFixAns=!0}if(!Ut.isGroup&&0==Ut.answers.length&&!Yt.has(Ut.num)&&sn.has(Ut.num)&&(Ut.strAns=sn.get(Ut.num)),!Ut.isGroup&&Ut.answers.length>0&&!Yt.has(Ut.num)&&sn.has(Ut.num))for(const Hn of Ut.answers)Hn.label==(null===(Ct=sn.get(Ut.num))||void 0===Ct?void 0:Ct.toUpperCase().substring(0,1))&&(Hn.isCorrect=!0)}const oi=(new Date).getTime();this.updateStatusCallback&&this.updateStatusCallback("Analyze done: "+(oi-Le)/1e3+" secs"),this.showOnCanvas(ii,e,ee,D,de,U.CONST.DRAW_RESULT),this.onCompleteCallback&&this.onCompleteCallback(ii,D)}})}}findEntityPos(D,Z,V,oe,K){let ee=[],fe=!1;var xe=[{parser:new k.SectionParser,on:[],off:[]},{parser:new w.QuestionParser(K),on:[3,4],off:[6]},{parser:new F.AnswerParser,on:[3,6],off:[]},{parser:new g.HetParser(!1),on:[6,8],off:[0,2]},{parser:new d.DapAnParser(!1),on:[6,8],off:[0,2,4]},{parser:new _.HuongDanParser,on:[],off:[8]},{parser:new E.DapAnChiTietParser(!1,e=>{for(const Dt of e)ee.unshift(Dt)}),on:[],off:[2]},{parser:new C.FooterParser,on:[],off:[]},{parser:new M.DapAnDienTuParser(!1,e=>{if(0!=e.length)if(ee.length>0&&ee[0].type==E.DapAnChiTietParser.TYPE_NAME){let Dt=JSON.parse(e[0].str),wt=JSON.parse(ee[0].str);wt.sub=Dt.sub,ee[0].str=JSON.stringify(wt)}else e[0].type=E.DapAnChiTietParser.TYPE_NAME,ee.unshift(e[0])}),on:[],off:[2]}],Ge=[8,0,1,2,3,4,5,6,7],nt=null;let ht=0,Ct="";for(const e of D){(ht==D.length-1||e.pageIndex<D[ht+1].pageIndex)&&(e.isLastLine=!0);for(const Dt of Ge){let wt=xe[Dt];var mt=wt.parser.process(ee,e,ht,nt,Z[e.pageIndex],V[e.pageIndex]);if(mt.length>0){for(const ye of mt){if(ye.type!=F.AnswerParser.TYPE_NAME&&ye.type!=C.FooterParser.TYPE_NAME&&(Ct=""),ye.type==F.AnswerParser.TYPE_NAME){if(!"ABCDEFGH".startsWith(Ct+ye.str))continue;Ct+=ye.str;for(let Yt=ee.length-1;Yt>=0&&ee[Yt].type==k.SectionParser.TYPE_NAME;Yt--)ee.splice(Yt,1)}ye.type==C.FooterParser.TYPE_NAME&&(e.isFooter=!0),ye.type==d.DapAnParser.TYPE_NAME&&(fe=!0),ye.type==_.HuongDanParser.TYPE_NAME&&fe&&xe[5].parser.off(),ee.push(ye)}for(const ye of wt.on)xe[ye].parser.on();for(const ye of wt.off)xe[ye].parser.off();break}}nt=e,ht++}for(const e of xe)e.parser.off();return ee.forEach(e=>{if(!D[e.lineIndex].top){let wt=h.CanvasUtil.getTopLine(oe[e.pageIndex],e.lineIndex,D);D[e.lineIndex].top=wt[0],1!=e.isIntersec&&(e.isIntersec=wt[1])}}),ee.forEach(e=>{if(!D[e.lineIndex].bottom){let wt=h.CanvasUtil.getBottomLine(oe[e.pageIndex],e.lineIndex,D);D[e.lineIndex].bottom=wt[0],1!=e.isIntersec&&(e.isIntersec=wt[0])}}),ee}showOnCanvas(D,Z,V,oe,K,ee){const ne=(new Date).getTime(),de=new Map([["A","rgba(18, 0, 255, 0.4)"],["B","rgba(0, 158, 34, 0.4)"],["C","rgba(50, 50, 50, 0.4)"],["D","rgba(132, 0, 137, 0.4)"],["E","rgba(132, 0, 137, 0.4)"],["F","rgba(132, 0, 137, 0.4)"],["G","rgba(132, 0, 137, 0.4)"],["H","rgba(132, 0, 137, 0.4)"]]),fe=new Map([[w.QuestionParser.TYPE_NAME,"red"],[F.AnswerParser.TYPE_NAME,"blue"],[g.HetParser.TYPE_NAME,"gray"],[E.DapAnChiTietParser.TYPE_NAME,"green"],[d.DapAnParser.TYPE_NAME,"orange"],[_.HuongDanParser.TYPE_NAME,"pink"],[C.FooterParser.TYPE_NAME,"yellow"],[k.SectionParser.TYPE_NAME,"black"]]);if(ee.indexOf("quest")>=0)for(const xe of D){for(const Ge of xe.positions)h.CanvasUtil.drawBox(oe[Ge.pageIndex],xe.isGroup?"black":"red",Ge);h.CanvasUtil.drawBox(oe[xe.remove.pageIndex],"yellow",xe.remove);for(const Ge of xe.answers){for(const nt of Ge.positions)h.CanvasUtil.drawBox(oe[nt.pageIndex],de.get(Ge.label)+"",nt,!0);h.CanvasUtil.drawBox(oe[Ge.remove.pageIndex],"yellow",Ge.remove),Ge.isCorrect&&h.CanvasUtil.drawPoint(oe[Ge.positions[0].pageIndex],"green",Ge.positions[0])}if(xe.help){for(const Ge of xe.help.positions)h.CanvasUtil.drawBox(oe[Ge.pageIndex],"orange",Ge);xe.help.remove&&h.CanvasUtil.drawBox(oe[xe.help.remove.pageIndex],"yellow",xe.help.remove)}}if(ee.indexOf("line")>=0)for(const xe of V)h.CanvasUtil.drawBox2(oe[xe.pageIndex],xe.height<U.CONST.LINE_SMALL_HEIGHT?"red":"rgba(50, 58, 168, 0.4)",xe.width,xe.height,xe.transform);if(ee.indexOf("txt")>=0)for(const xe of V)for(const Ge of xe.textObjs)""!=Ge.str.trim()&&h.CanvasUtil.drawBox2(oe[xe.pageIndex],xe.height<U.CONST.LINE_SMALL_HEIGHT?"red":"rgba(132, 0, 137, 0.2)",Ge.width,Ge.height,Ge.transform);if(ee.indexOf("img")>=0)for(const xe of K)h.CanvasUtil.drawBox2(oe[xe.pageIndex],"green",xe.paintWidth,xe.paintHeight,[0,0,0,0,-xe.left,-xe.top-xe.paintHeight]);if(ee.indexOf("pos")>=0)for(const xe of Z){let Ge={top:xe.transform[5],left:xe.transform[4],width:0,heigh:0,pageIndex:xe.pageIndex};h.CanvasUtil.drawPoint(oe[xe.pageIndex],fe.get(xe.type)+"",Ge)}const Le=(new Date).getTime();this.updateStatusCallback&&this.updateStatusCallback("Draw done: "+(Le-ne)/1e3+" secs")}getQuestionInfo(D,Z,V,oe){if(0==D.length)return[];let K=0,ee=[],ne=new Map,de="",fe=!1,Le=!1,xe=0;D.forEach((Ge,nt)=>{nt>0&&null==D[nt-1].text&&(D[nt-1].text=Z.slice(D[nt-1].lineIndex,Ge.lineIndex)),nt==D.length-1&&(D[nt].text=Z.slice(D[nt].lineIndex,Z.length))}),D.forEach(Ge=>{let nt=":"+Ge.type;!fe&&(Ge.type==g.HetParser.TYPE_NAME||Ge.type==d.DapAnParser.TYPE_NAME)&&(fe=!0);let ht=null;for(let mt=K+1;mt<D.length;mt++)if((Ge.type!=w.QuestionParser.TYPE_NAME||D[mt].type!=F.AnswerParser.TYPE_NAME)&&D[mt].type!=C.FooterParser.TYPE_NAME){ht=D[mt];break}let Ct=V[Ge.pageIndex].canvas.height-20;if(!fe&&Ge.type==k.SectionParser.TYPE_NAME&&(xe++,ee.push({num:xe,answers:[],remove:k.SectionParser.getRemoveBox(Ge,Z),positions:k.SectionParser.getBoxes(Ge,Z,ht,Ct),isGroup:!0,text:Ge.text})),!fe&&Ge.type==w.QuestionParser.TYPE_NAME&&ee.push({num:+Ge.str,answers:[],remove:w.QuestionParser.getRemoveBox(Ge,Z),positions:w.QuestionParser.getBoxes(Ge,Z,ht,Ct),group:xe,text:Ge.text}),!fe&&Ge.type==F.AnswerParser.TYPE_NAME&&ee.length>0){let mt=ee[ee.length-1].num,e={label:Ge.str,remove:F.AnswerParser.getRemoveBox(Ge,Z),positions:F.AnswerParser.getBoxes(Ge,Z,ht,Ct)};oe.size>0&&oe.get(mt)==e.label&&(e.isCorrect=!0),ee[ee.length-1].answers.push(e);let Dt=Z[Ge.lineIndex].strLine.replace(/\|/g,"").trim().match(U.CONST.MULTIPLE_ANS_PATTERN.join("|"));null!=Dt&&Dt.length>0&&(ee[ee.length-1].isFixAns=!0),1==Ge.isIntersec&&(ee[ee.length-1].isFixAns=!0)}if(!Le&&Ge.type==_.HuongDanParser.TYPE_NAME&&1==ee.length&&de.endsWith(`:${w.QuestionParser.TYPE_NAME}:${F.AnswerParser.TYPE_NAME}`)&&(Le=!0),Ge.type==_.HuongDanParser.TYPE_NAME&&Le){let mt=ee[ee.length-1].num;ne.set(mt,{num:mt,positions:_.HuongDanParser.getBoxes(Ge,Z,ht,Ct),text:Ge.text})}if(Ge.type==_.HuongDanParser.TYPE_NAME&&!Le&&(ne.clear(),fe=!0),fe&&Ge.type==w.QuestionParser.TYPE_NAME){let mt=+Ge.str;ne.get(mt)||ne.set(mt,{num:mt,positions:w.QuestionParser.getBoxes(Ge,Z,ht,Ct),remove:w.QuestionParser.getRemoveBox(Ge,Z),text:Ge.text})}!de.endsWith(nt)&&Ge.type!=C.FooterParser.TYPE_NAME&&(de+=nt),K++});for(const Ge of ee)Ge.isGroup||(Ge.help=ne.get(Ge.num),1==Ge.answers.length&&(Ge.answers=[]));return ee}}},82130:(Ne,H,I)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.QuestionParser=void 0;const F=I(48089),h=I(37403),U=I(15025);class E extends U.Parser{constructor(C){super(),this.TYPE=E.TYPE_NAME,this.questType=C}parse(C,g,_,x,w,k){var M=this.matchPos(g.strLine);if(M.value){let B=null;for(let oe=M.value.length-1;oe>=0;oe--)if(M.value[oe]){B=M.value[oe];break}if(null==B)return[];let D=B.matchAll(/\d+/g).next(),Z=B.length;!D.done&&!B.trim().endsWith(".")&&!B.trim().endsWith(":")&&(Z=D.value.index+D.value[0].length);let V=g.strLine.replace(/\|/g,"").toLowerCase().indexOf(B)+Z-1;return[{str:this.getNumberFromStr(B),pageIndex:g.pageIndex,lineIndex:_,transform:g.transform,startLeft:F.CanvasUtil.calIndexPos2(g.textObjs,w,k,V,!0),type:this.TYPE}]}return[]}matchPos(C){let g=C.replace(/\|/g,"").toLowerCase().trim();if(0==this.questType){let _=h.CONST.QUESTION_PATTERN.join("|");return g.matchAll(_).next()}{let _=h.CONST.QUESTION_PATTERN2.join("|");return g.matchAll(_).next()}}getNumberFromStr(C){var g=C.match(/(\d+)/);return g?g[0]:""}static getRemoveBox(C,g){let _=C.startLeft?C.startLeft[5]:g[C.lineIndex].top,x=C.transform[4]-h.CONST.MARGIN_LEFT,w=C.startLeft?C.startLeft[5]+C.startLeft[3]:g[C.lineIndex].bottom;return{pageIndex:C.pageIndex,top:_||20,left:x,heigh:w&&_?w-_:0,width:(C.startLeft?C.startLeft[4]:0)-x}}static getBoxes(C,g,_,x){let w=x;for(let ee=C.lineIndex;ee<g.length;ee++)if(F.CanvasUtil.isLastLineOfPage(ee,g)){let ne=g[ee].isFooter?g[ee-1]:g[ee];w=ne.transform[5]+ne.height+20;break}let k=[],M=C.pageIndex,B=_?_.lineIndex:g.length-1,Q=g[C.lineIndex].transform[4]-h.CONST.MARGIN_LEFT,D=g[C.lineIndex].top;if(!D)return[];let Z=h.CONST.CROP_FULL_WIDTH?F.CanvasUtil.getMaxLineRight(-1,g)+2*h.CONST.MARGIN_LEFT:g[C.lineIndex].transform[4]+g[C.lineIndex].width+2*h.CONST.MARGIN_LEFT,V=w,oe=M,K=C.lineIndex+1;for(;K<=B;K++){let ee=g[K].top;if(K==g.length-1&&!_&&(ee=g[K].bottom),!h.CONST.CROP_FULL_WIDTH){let de=g[K-1].transform[4]+g[K-1].width+2*h.CONST.MARGIN_LEFT;de>Z&&(Z=de)}let ne=g[K-1].transform[4]-h.CONST.MARGIN_LEFT;ne<Q&&(Q=ne),g[K].isFooter&&ee?V=ee:(g[K].pageIndex>oe&&(g[K-1].isFooter||(V=w),k.push({pageIndex:oe,top:D,left:Q,width:Z-Q,heigh:V-D}),D=20,Q=F.CanvasUtil.getMinLineLeft(g[K].pageIndex,g)-h.CONST.MARGIN_LEFT),oe=g[K].pageIndex,ee&&(V=ee))}if(K-=1,!_&&F.CanvasUtil.isLastLineOfPage(K,g)){let ee=g[K].isFooter?g[K-1]:g[K];V=ee.transform[5]+ee.height+20}return F.CanvasUtil.isFirstLineOfPage(K,g)||k.push({pageIndex:oe,top:D,left:Q,width:Z-Q,heigh:V-D}),k}}H.QuestionParser=E,E.TYPE_NAME="question"},94904:(Ne,H,I)=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0}),H.SectionParser=void 0;const F=I(48089),h=I(37403),U=I(15025),E=I(82130);class d extends U.Parser{constructor(){super(),this.TYPE=d.TYPE_NAME}parse(g,_,x,w,k,M){let B=_.strLine.replace(/\|/g,"").toLowerCase().trim().match(h.CONST.SECTION_PATTERN_LOWER.join("|")),Q=null!=B&&B.length>0;if(Q||(B=_.strLine.replace(/\|/g,"").trim().match(h.CONST.SECTION_PATTERN_NORMAL.join("|")),Q=null!=B&&B.length>0),Q&&B){let D=_.strLine.indexOf(B[0])+B[0].length+1,Z=[B[0][0]];for(let V=g.length-1;V>=0;V--){if(g[V].type==E.QuestionParser.TYPE_NAME){Z.push(".Q");break}Z.push(g[V].str[0])}return"HGFEDCBA.Q".endsWith(Z.join(""))?[]:[{str:B[0],pageIndex:_.pageIndex,lineIndex:x,transform:_.transform,startLeft:F.CanvasUtil.calIndexPos(_.textObjs,k,M,D,!0),type:this.TYPE}]}return[]}static getRemoveBox(g,_){let x=_[g.lineIndex].top,w=g.transform[4]-h.CONST.MARGIN_LEFT,k=_[g.lineIndex].bottom;return{pageIndex:g.pageIndex,top:x||20,left:w,heigh:k&&x?k-x:0,width:w-w}}static getBoxes(g,_,x,w){const k=w;let M=[],B=g.pageIndex,Q=x?x.lineIndex:_.length-1,D=F.CanvasUtil.getMinLineLeft(-1,_)-h.CONST.MARGIN_LEFT,Z=_[g.lineIndex].top;if(!Z)return[];let V=F.CanvasUtil.getMaxLineRight(-1,_)+2*h.CONST.MARGIN_LEFT,oe=k,K=B,ee=g.lineIndex+1;for(;ee<=Q;ee++){let ne=_[ee].top;if(_[ee].isFooter&&ne)oe=ne;else if(_[ee].pageIndex>K&&(M.push({pageIndex:K,top:Z,left:D,width:V-D,heigh:oe-Z}),Z=20),K=_[ee].pageIndex,ne){oe=ne;break}}return ee>=_.length&&(ee=_.length-1),F.CanvasUtil.isFirstLineOfPage(ee,_)||M.push({pageIndex:K,top:Z,left:D,width:V-D,heigh:oe-Z}),M}}H.SectionParser=d,d.TYPE_NAME="section"},62180:function(Ne,H,I){"use strict";var F=this&&this.__createBinding||(Object.create?function(U,E,d,C){void 0===C&&(C=d),Object.defineProperty(U,C,{enumerable:!0,get:function(){return E[d]}})}:function(U,E,d,C){void 0===C&&(C=d),U[C]=E[d]}),h=this&&this.__exportStar||function(U,E){for(var d in U)"default"!==d&&!Object.prototype.hasOwnProperty.call(E,d)&&F(E,U,d)};Object.defineProperty(H,"__esModule",{value:!0}),h(I(52280),H)},47e3:(Ne,H,I)=>{"use strict";Ne.exports=I(45260)},26319:Ne=>{"use strict";var H=2*Math.PI;function I(U,E,d,C){var _=U*d+E*C;return _>1&&(_=1),_<-1&&(_=-1),(U*C-E*d<0?-1:1)*Math.acos(_)}function h(U,E){var d=1.3333333333333333*Math.tan(E/4),C=Math.cos(U),g=Math.sin(U),_=Math.cos(U+E),x=Math.sin(U+E);return[C,g,C-g*d,g+C*d,_+x*d,x-_*d,_,x]}Ne.exports=function(E,d,C,g,_,x,w,k,M){var B=Math.sin(M*H/360),Q=Math.cos(M*H/360),D=Q*(E-C)/2+B*(d-g)/2,Z=-B*(E-C)/2+Q*(d-g)/2;if(0===D&&0===Z)return[];if(0===w||0===k)return[];w=Math.abs(w),k=Math.abs(k);var V=D*D/(w*w)+Z*Z/(k*k);V>1&&(w*=Math.sqrt(V),k*=Math.sqrt(V));var oe=function F(U,E,d,C,g,_,x,w,k,M){var B=M*(U-d)/2+k*(E-C)/2,Q=-k*(U-d)/2+M*(E-C)/2,D=x*x,Z=w*w,V=B*B,oe=Q*Q,K=D*Z-D*oe-Z*V;K<0&&(K=0),K/=D*oe+Z*V;var ee=(K=Math.sqrt(K)*(g===_?-1:1))*x/w*Q,ne=K*-w/x*B,de=M*ee-k*ne+(U+d)/2,fe=k*ee+M*ne+(E+C)/2,Le=(B-ee)/x,xe=(Q-ne)/w,Ge=(-B-ee)/x,nt=(-Q-ne)/w,ht=I(1,0,Le,xe),Ct=I(Le,xe,Ge,nt);return 0===_&&Ct>0&&(Ct-=H),1===_&&Ct<0&&(Ct+=H),[de,fe,ht,Ct]}(E,d,C,g,_,x,w,k,B,Q),K=[],ee=oe[2],ne=oe[3],de=Math.max(Math.ceil(Math.abs(ne)/(H/4)),1);ne/=de;for(var fe=0;fe<de;fe++)K.push(h(ee,ne)),ee+=ne;return K.map(function(Le){for(var xe=0;xe<Le.length;xe+=2){var Ge=Le[xe+0],nt=Le[xe+1],Ct=B*(Ge*=w)+Q*(nt*=k);Le[xe+0]=Q*Ge-B*nt+oe[0],Le[xe+1]=Ct+oe[1]}return Le})}},61175:Ne=>{"use strict";var H=1e-10,I=Math.PI/180;function F(h,U,E){if(!(this instanceof F))return new F(h,U,E);this.rx=h,this.ry=U,this.ax=E}F.prototype.transform=function(h){var U=Math.cos(this.ax*I),E=Math.sin(this.ax*I),d=[this.rx*(h[0]*U+h[2]*E),this.rx*(h[1]*U+h[3]*E),this.ry*(-h[0]*E+h[2]*U),this.ry*(-h[1]*E+h[3]*U)],C=d[0]*d[0]+d[2]*d[2],g=d[1]*d[1]+d[3]*d[3],_=((d[0]-d[3])*(d[0]-d[3])+(d[2]+d[1])*(d[2]+d[1]))*((d[0]+d[3])*(d[0]+d[3])+(d[2]-d[1])*(d[2]-d[1])),x=(C+g)/2;if(_<H*x)return this.rx=this.ry=Math.sqrt(x),this.ax=0,this;var w=d[0]*d[1]+d[2]*d[3],k=x+(_=Math.sqrt(_))/2,M=x-_/2;return this.ax=Math.abs(w)<H&&Math.abs(k-g)<H?90:180*Math.atan(Math.abs(w)>Math.abs(k-g)?(k-C)/w:w/(k-g))/Math.PI,this.ax>=0?(this.rx=Math.sqrt(k),this.ry=Math.sqrt(M)):(this.ax+=90,this.rx=Math.sqrt(M),this.ry=Math.sqrt(k)),this},F.prototype.isDegenerate=function(){return this.rx<H*this.ry||this.ry<H*this.rx},Ne.exports=F},16998:Ne=>{"use strict";function H(F,h){return[F[0]*h[0]+F[2]*h[1],F[1]*h[0]+F[3]*h[1],F[0]*h[2]+F[2]*h[3],F[1]*h[2]+F[3]*h[3],F[0]*h[4]+F[2]*h[5]+F[4],F[1]*h[4]+F[3]*h[5]+F[5]]}function I(){if(!(this instanceof I))return new I;this.queue=[],this.cache=null}I.prototype.matrix=function(F){return 1===F[0]&&0===F[1]&&0===F[2]&&1===F[3]&&0===F[4]&&0===F[5]||(this.cache=null,this.queue.push(F)),this},I.prototype.translate=function(F,h){return(0!==F||0!==h)&&(this.cache=null,this.queue.push([1,0,0,1,F,h])),this},I.prototype.scale=function(F,h){return(1!==F||1!==h)&&(this.cache=null,this.queue.push([F,0,0,h,0,0])),this},I.prototype.rotate=function(F,h,U){var E,d,C;return 0!==F&&(this.translate(h,U),E=F*Math.PI/180,d=Math.cos(E),C=Math.sin(E),this.queue.push([d,C,-C,d,0,0]),this.cache=null,this.translate(-h,-U)),this},I.prototype.skewX=function(F){return 0!==F&&(this.cache=null,this.queue.push([1,0,Math.tan(F*Math.PI/180),1,0,0])),this},I.prototype.skewY=function(F){return 0!==F&&(this.cache=null,this.queue.push([1,Math.tan(F*Math.PI/180),0,1,0,0])),this},I.prototype.toArray=function(){if(this.cache)return this.cache;if(!this.queue.length)return this.cache=[1,0,0,1,0,0],this.cache;if(this.cache=this.queue[0],1===this.queue.length)return this.cache;for(var F=1;F<this.queue.length;F++)this.cache=H(this.cache,this.queue[F]);return this.cache},I.prototype.calc=function(F,h,U){var E;return this.queue.length?(this.cache||(this.cache=this.toArray()),[F*(E=this.cache)[0]+h*E[2]+(U?0:E[4]),F*E[1]+h*E[3]+(U?0:E[5])]):[F,h]},Ne.exports=I},18148:Ne=>{"use strict";var H={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},I=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];function F(M){return 10===M||13===M||8232===M||8233===M||32===M||9===M||11===M||12===M||160===M||M>=5760&&I.indexOf(M)>=0}function E(M){return M>=48&&M<=57}function d(M){return M>=48&&M<=57||43===M||45===M||46===M}function C(M){this.index=0,this.path=M,this.max=M.length,this.result=[],this.param=0,this.err="",this.segmentStart=0,this.data=[]}function g(M){for(;M.index<M.max&&F(M.path.charCodeAt(M.index));)M.index++}function _(M){var B=M.path.charCodeAt(M.index);return 48===B?(M.param=0,void M.index++):49===B?(M.param=1,void M.index++):void(M.err="SvgPath: arc flag can be 0 or 1 only (at pos "+M.index+")")}function x(M){var ee,B=M.index,Q=B,D=M.max,Z=!1,V=!1,oe=!1,K=!1;if(Q>=D)M.err="SvgPath: missed param (at pos "+Q+")";else if((43===(ee=M.path.charCodeAt(Q))||45===ee)&&(ee=++Q<D?M.path.charCodeAt(Q):0),E(ee)||46===ee){if(46!==ee){if(Z=48===ee,ee=++Q<D?M.path.charCodeAt(Q):0,Z&&Q<D&&ee&&E(ee))return void(M.err="SvgPath: numbers started with `0` such as `09` are illegal (at pos "+B+")");for(;Q<D&&E(M.path.charCodeAt(Q));)Q++,V=!0;ee=Q<D?M.path.charCodeAt(Q):0}if(46===ee){for(K=!0,Q++;E(M.path.charCodeAt(Q));)Q++,oe=!0;ee=Q<D?M.path.charCodeAt(Q):0}if(101===ee||69===ee){if(K&&!V&&!oe)return void(M.err="SvgPath: invalid float exponent (at pos "+Q+")");if((43===(ee=++Q<D?M.path.charCodeAt(Q):0)||45===ee)&&Q++,!(Q<D&&E(M.path.charCodeAt(Q))))return void(M.err="SvgPath: invalid float exponent (at pos "+Q+")");for(;Q<D&&E(M.path.charCodeAt(Q));)Q++}M.index=Q,M.param=parseFloat(M.path.slice(B,Q))+0}else M.err="SvgPath: param should start with 0..9 or `.` (at pos "+Q+")"}function w(M){var B,Q;Q=(B=M.path[M.segmentStart]).toLowerCase();var D=M.data;if("m"===Q&&D.length>2&&(M.result.push([B,D[0],D[1]]),D=D.slice(2),Q="l",B="m"===B?"l":"L"),"r"===Q)M.result.push([B].concat(D));else for(;D.length>=H[Q]&&(M.result.push([B].concat(D.splice(0,H[Q]))),H[Q]););}function k(M){var Q,D,Z,V,oe,B=M.max;if(M.segmentStart=M.index,D=function U(M){return 97==(32|M)}(Q=M.path.charCodeAt(M.index)),function h(M){switch(32|M){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:case 114:return!0}return!1}(Q))if(V=H[M.path[M.index].toLowerCase()],M.index++,g(M),M.data=[],V){for(Z=!1;;){for(oe=V;oe>0;oe--){if(!D||3!==oe&&4!==oe?x(M):_(M),M.err.length)return void w(M);M.data.push(M.param),g(M),Z=!1,M.index<B&&44===M.path.charCodeAt(M.index)&&(M.index++,g(M),Z=!0)}if(!Z&&(M.index>=M.max||!d(M.path.charCodeAt(M.index))))break}w(M)}else w(M);else M.err="SvgPath: bad command "+M.path[M.index]+" (at pos "+M.index+")"}Ne.exports=function(B){var Q=new C(B),D=Q.max;for(g(Q);Q.index<D&&!Q.err.length;)k(Q);return Q.result.length&&("mM".indexOf(Q.result[0][0])<0?(Q.err="SvgPath: string should start with `M` or `m`",Q.result=[]):Q.result[0][0]="M"),{err:Q.err,segments:Q.result}}},45260:(Ne,H,I)=>{"use strict";var F=I(18148),h=I(48873),U=I(16998),E=I(26319),d=I(61175);function C(g){if(!(this instanceof C))return new C(g);var _=F(g);this.segments=_.segments,this.err=_.err,this.__stack=[]}C.from=function(g){if("string"==typeof g)return new C(g);if(g instanceof C){var _=new C("");return _.err=g.err,_.segments=g.segments.map(function(x){return x.slice()}),_.__stack=g.__stack.map(function(x){return U().matrix(x.toArray())}),_}throw new Error("SvgPath.from: invalid param type "+g)},C.prototype.__matrix=function(g){var x,_=this;g.queue.length&&this.iterate(function(w,k,M,B){var Q,D,Z,V;switch(w[0]){case"v":D=0===(Q=g.calc(0,w[1],!0))[0]?["v",Q[1]]:["l",Q[0],Q[1]];break;case"V":D=(Q=g.calc(M,w[1],!1))[0]===g.calc(M,B,!1)[0]?["V",Q[1]]:["L",Q[0],Q[1]];break;case"h":D=0===(Q=g.calc(w[1],0,!0))[1]?["h",Q[0]]:["l",Q[0],Q[1]];break;case"H":D=(Q=g.calc(w[1],B,!1))[1]===g.calc(M,B,!1)[1]?["H",Q[0]]:["L",Q[0],Q[1]];break;case"a":case"A":var oe=g.toArray(),K=d(w[1],w[2],w[3]).transform(oe);if(oe[0]*oe[3]-oe[1]*oe[2]<0&&(w[5]=w[5]?"0":"1"),Q=g.calc(w[6],w[7],"a"===w[0]),"A"===w[0]&&w[6]===M&&w[7]===B||"a"===w[0]&&0===w[6]&&0===w[7]){D=["a"===w[0]?"l":"L",Q[0],Q[1]];break}D=K.isDegenerate()?["a"===w[0]?"l":"L",Q[0],Q[1]]:[w[0],K.rx,K.ry,K.ax,w[4],w[5],Q[0],Q[1]];break;case"m":D=["m",(Q=g.calc(w[1],w[2],V=k>0))[0],Q[1]];break;default:for(D=[Z=w[0]],V=Z.toLowerCase()===Z,x=1;x<w.length;x+=2)Q=g.calc(w[x],w[x+1],V),D.push(Q[0],Q[1])}_.segments[k]=D},!0)},C.prototype.__evaluateStack=function(){var g,_;if(this.__stack.length){if(1===this.__stack.length)return this.__matrix(this.__stack[0]),void(this.__stack=[]);for(g=U(),_=this.__stack.length;--_>=0;)g.matrix(this.__stack[_].toArray());this.__matrix(g),this.__stack=[]}},C.prototype.toString=function(){var g="",_="",x=!1;this.__evaluateStack();for(var w=0,k=this.segments.length;w<k;w++){var M=this.segments[w],B=M[0];B!==_||"m"===B||"M"===B?("m"===B&&"z"===_&&(g+=" "),g+=B,x=!1):x=!0;for(var Q=1;Q<M.length;Q++){var D=M[Q];1===Q?x&&D>=0&&(g+=" "):D>=0&&(g+=" "),g+=D}_=B}return g},C.prototype.translate=function(g,_){return this.__stack.push(U().translate(g,_||0)),this},C.prototype.scale=function(g,_){return this.__stack.push(U().scale(g,_||0===_?_:g)),this},C.prototype.rotate=function(g,_,x){return this.__stack.push(U().rotate(g,_||0,x||0)),this},C.prototype.skewX=function(g){return this.__stack.push(U().skewX(g)),this},C.prototype.skewY=function(g){return this.__stack.push(U().skewY(g)),this},C.prototype.matrix=function(g){return this.__stack.push(U().matrix(g)),this},C.prototype.transform=function(g){return g.trim()?(this.__stack.push(h(g)),this):this},C.prototype.round=function(g){var M,_=0,x=0,w=0,k=0;return g=g||0,this.__evaluateStack(),this.segments.forEach(function(B){var Q=B[0].toLowerCase()===B[0];switch(B[0]){case"H":case"h":return Q&&(B[1]+=w),w=B[1]-B[1].toFixed(g),void(B[1]=+B[1].toFixed(g));case"V":case"v":return Q&&(B[1]+=k),k=B[1]-B[1].toFixed(g),void(B[1]=+B[1].toFixed(g));case"Z":case"z":return w=_,void(k=x);case"M":case"m":return Q&&(B[1]+=w,B[2]+=k),w=B[1]-B[1].toFixed(g),k=B[2]-B[2].toFixed(g),_=w,x=k,B[1]=+B[1].toFixed(g),void(B[2]=+B[2].toFixed(g));case"A":case"a":return Q&&(B[6]+=w,B[7]+=k),w=B[6]-B[6].toFixed(g),k=B[7]-B[7].toFixed(g),B[1]=+B[1].toFixed(g),B[2]=+B[2].toFixed(g),B[3]=+B[3].toFixed(g+2),B[6]=+B[6].toFixed(g),void(B[7]=+B[7].toFixed(g));default:return M=B.length,Q&&(B[M-2]+=w,B[M-1]+=k),w=B[M-2]-B[M-2].toFixed(g),k=B[M-1]-B[M-1].toFixed(g),void B.forEach(function(D,Z){Z&&(B[Z]=+B[Z].toFixed(g))})}}),this},C.prototype.iterate=function(g,_){var Z,V,oe,x=this.segments,w={},k=!1,M=0,B=0,Q=0,D=0;if(_||this.__evaluateStack(),x.forEach(function(K,ee){var ne=g(K,ee,M,B);Array.isArray(ne)&&(w[ee]=ne,k=!0);var de=K[0]===K[0].toLowerCase();switch(K[0]){case"m":case"M":return Q=M=K[1]+(de?M:0),void(D=B=K[2]+(de?B:0));case"h":case"H":return void(M=K[1]+(de?M:0));case"v":case"V":return void(B=K[1]+(de?B:0));case"z":case"Z":return M=Q,void(B=D);default:M=K[K.length-2]+(de?M:0),B=K[K.length-1]+(de?B:0)}}),!k)return this;for(oe=[],Z=0;Z<x.length;Z++)if(typeof w[Z]<"u")for(V=0;V<w[Z].length;V++)oe.push(w[Z][V]);else oe.push(x[Z]);return this.segments=oe,this},C.prototype.abs=function(){return this.iterate(function(g,_,x,w){var B,k=g[0],M=k.toUpperCase();if(k!==M)switch(g[0]=M,k){case"v":return void(g[1]+=w);case"a":return g[6]+=x,void(g[7]+=w);default:for(B=1;B<g.length;B++)g[B]+=B%2?x:w}},!0),this},C.prototype.rel=function(){return this.iterate(function(g,_,x,w){var B,k=g[0],M=k.toLowerCase();if(k!==M&&(0!==_||"M"!==k))switch(g[0]=M,k){case"V":return void(g[1]-=w);case"A":return g[6]-=x,void(g[7]-=w);default:for(B=1;B<g.length;B++)g[B]-=B%2?x:w}},!0),this},C.prototype.unarc=function(){return this.iterate(function(g,_,x,w){var k,M,B,Q=[],D=g[0];return"A"!==D&&"a"!==D?null:("a"===D?(M=x+g[6],B=w+g[7]):(M=g[6],B=g[7]),0===(k=E(x,w,M,B,g[4],g[5],g[1],g[2],g[3])).length?[["a"===g[0]?"l":"L",g[6],g[7]]]:(k.forEach(function(Z){Q.push(["C",Z[2],Z[3],Z[4],Z[5],Z[6],Z[7]])}),Q))}),this},C.prototype.unshort=function(){var _,x,w,k,M,g=this.segments;return this.iterate(function(B,Q,D,Z){var K,V=B[0],oe=V.toUpperCase();Q&&("T"===oe?("Q"===(w=g[Q-1])[0]?(_=w[1]-D,x=w[2]-Z):"q"===w[0]?(_=w[1]-w[3],x=w[2]-w[4]):(_=0,x=0),k=-_,M=-x,(K="t"===V)||(k+=D,M+=Z),g[Q]=[K?"q":"Q",k,M,B[1],B[2]]):"S"===oe&&("C"===(w=g[Q-1])[0]?(_=w[3]-D,x=w[4]-Z):"c"===w[0]?(_=w[3]-w[5],x=w[4]-w[6]):(_=0,x=0),k=-_,M=-x,(K="s"===V)||(k+=D,M+=Z),g[Q]=[K?"c":"C",k,M,B[1],B[2],B[3],B[4]]))}),this},Ne.exports=C},48873:(Ne,H,I)=>{"use strict";var F=I(16998),h={matrix:!0,scale:!0,rotate:!0,translate:!0,skewX:!0,skewY:!0},U=/\s*(matrix|translate|scale|rotate|skewX|skewY)\s*\(\s*(.+?)\s*\)[\s,]*/,E=/[\s,]+/;Ne.exports=function(C){var _,x,g=new F;return C.split(U).forEach(function(w){if(w.length){if(typeof h[w]<"u")return void(_=w);switch(x=w.split(E).map(function(k){return+k||0}),_){case"matrix":return void(6===x.length&&g.matrix(x));case"scale":return void(1===x.length?g.scale(x[0],x[0]):2===x.length&&g.scale(x[0],x[1]));case"rotate":return void(1===x.length?g.rotate(x[0],0,0):3===x.length&&g.rotate(x[0],x[1],x[2]));case"translate":return void(1===x.length?g.translate(x[0],0):2===x.length&&g.translate(x[0],x[1]));case"skewX":return void(1===x.length&&g.skewX(x[0]));case"skewY":return void(1===x.length&&g.skewY(x[0]))}}}),g}},85129:(Ne,H,I)=>{var F=I(51474).FilterCSS,h=I(51474).getDefaultWhiteList,U=I(98735);var d=new F;function w(wt){return wt.replace(M,"&lt;").replace(B,"&gt;")}var M=/</g,B=/>/g,Q=/"/g,D=/&quot;/g,Z=/&#([a-zA-Z0-9]*);?/gim,V=/&colon;?/gim,oe=/&newline;?/gim,K=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,ee=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,ne=/u\s*r\s*l\s*\(.*/gi;function de(wt){return wt.replace(Q,"&quot;")}function fe(wt){return wt.replace(D,'"')}function Le(wt){return wt.replace(Z,function(Yt,sn){return String.fromCharCode("x"===sn[0]||"X"===sn[0]?parseInt(sn.substr(1),16):parseInt(sn,10))})}function xe(wt){return wt.replace(V,":").replace(oe," ")}function Ge(wt){for(var ye="",Yt=0,sn=wt.length;Yt<sn;Yt++)ye+=wt.charCodeAt(Yt)<32?" ":wt.charAt(Yt);return U.trim(ye)}function nt(wt){return Ge(wt=xe(wt=Le(wt=fe(wt))))}function ht(wt){return w(wt=de(wt))}H.whiteList={a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]},H.getDefaultWhiteList=function E(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}},H.onTag=function C(wt,ye,Yt){},H.onIgnoreTag=function g(wt,ye,Yt){},H.onTagAttr=function _(wt,ye,Yt){},H.onIgnoreTagAttr=function x(wt,ye,Yt){},H.safeAttrValue=function k(wt,ye,Yt,sn){if(Yt=nt(Yt),"href"===ye||"src"===ye){if("#"===(Yt=U.trim(Yt)))return"#";if("http://"!==Yt.substr(0,7)&&"https://"!==Yt.substr(0,8)&&"mailto:"!==Yt.substr(0,7)&&"tel:"!==Yt.substr(0,4)&&"data:image/"!==Yt.substr(0,11)&&"ftp://"!==Yt.substr(0,6)&&"./"!==Yt.substr(0,2)&&"../"!==Yt.substr(0,3)&&"#"!==Yt[0]&&"/"!==Yt[0])return""}else if("background"===ye){if(K.lastIndex=0,K.test(Yt))return""}else if("style"===ye){if(ee.lastIndex=0,ee.test(Yt)||(ne.lastIndex=0,ne.test(Yt)&&(K.lastIndex=0,K.test(Yt))))return"";!1!==sn&&(Yt=(sn=sn||d).process(Yt))}return ht(Yt)},H.escapeHtml=w,H.escapeQuote=de,H.unescapeQuote=fe,H.escapeHtmlEntities=Le,H.escapeDangerHtml5Entities=xe,H.clearNonPrintableCharacter=Ge,H.friendlyAttrValue=nt,H.escapeAttrValue=ht,H.onIgnoreTagStripAll=function Ct(){return""},H.StripTagBody=function mt(wt,ye){"function"!=typeof ye&&(ye=function(){});var Yt=!Array.isArray(wt),ii=[],oi=!1;return{onIgnoreTag:function(Ut,Hn,at){if(function sn(Ut){return!!Yt||-1!==U.indexOf(wt,Ut)}(Ut)){if(at.isClosing){return ii.push([!1!==oi?oi:at.position,at.position+10]),oi=!1,"[/removed]"}return oi||(oi=at.position),"[removed]"}return ye(Ut,Hn,at)},remove:function(Ut){var Hn="",at=0;return U.forEach(ii,function(Lt){Hn+=Ut.slice(at,Lt[0]),at=Lt[1]}),Hn+=Ut.slice(at)}}},H.stripCommentTag=function e(wt){for(var ye="",Yt=0;Yt<wt.length;){var sn=wt.indexOf("\x3c!--",Yt);if(-1===sn){ye+=wt.slice(Yt);break}ye+=wt.slice(Yt,sn);var ii=wt.indexOf("--\x3e",sn);if(-1===ii)break;Yt=ii+3}return ye},H.stripBlankChar=function Dt(wt){var ye=wt.split("");return(ye=ye.filter(function(Yt){var sn=Yt.charCodeAt(0);return!(127===sn||sn<=31&&10!==sn&&13!==sn)})).join("")},H.cssFilter=d,H.getDefaultCSSWhiteList=h},77424:(Ne,H,I)=>{var F=I(85129),h=I(74469),U=I(69278);function E(C,g){return new U(g).process(C)}(H=Ne.exports=E).filterXSS=E,H.FilterXSS=U,function(){for(var C in F)H[C]=F[C];for(var g in h)H[g]=h[g]}(),typeof window<"u"&&(window.filterXSS=Ne.exports),function d(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}()&&(self.filterXSS=Ne.exports)},74469:(Ne,H,I)=>{var F=I(98735);function h(M){var Q,B=F.spaceIndex(M);return Q=M.slice(1,-1===B?-1:B+1),"/"===(Q=F.trim(Q).toLowerCase()).slice(0,1)&&(Q=Q.slice(1)),"/"===Q.slice(-1)&&(Q=Q.slice(0,-1)),Q}function U(M){return"</"===M.slice(0,2)}var d=/[^a-zA-Z0-9\\_:.-]/gim;function g(M,B){for(;B<M.length;B++){var Q=M[B];if(" "!==Q)return"="===Q?B:-1}}function _(M,B){for(;B<M.length;B++){var Q=M[B];if(" "!==Q)return"'"===Q||'"'===Q?B:-1}}function x(M,B){for(;B>0;B--){var Q=M[B];if(" "!==Q)return"="===Q?B:-1}}function k(M){return function w(M){return'"'===M[0]&&'"'===M[M.length-1]||"'"===M[0]&&"'"===M[M.length-1]}(M)?M.substr(1,M.length-2):M}H.parseTag=function E(M,B,Q){"use strict";var D="",Z=0,V=!1,oe=!1,K=0,ee=M.length,ne="",de="";e:for(K=0;K<ee;K++){var fe=M.charAt(K);if(!1===V){if("<"===fe){V=K;continue}}else if(!1===oe){if("<"===fe){D+=Q(M.slice(Z,K)),V=K,Z=K;continue}if(">"===fe||K===ee-1){D+=Q(M.slice(Z,V)),ne=h(de=M.slice(V,K+1)),D+=B(V,D.length,ne,de,U(de)),Z=K+1,V=!1;continue}if('"'===fe||"'"===fe)for(var Le=1,xe=M.charAt(K-Le);""===xe.trim()||"="===xe;){if("="===xe){oe=fe;continue e}xe=M.charAt(K-++Le)}}else if(fe===oe){oe=!1;continue}}return Z<ee&&(D+=Q(M.substr(Z))),D},H.parseAttr=function C(M,B){"use strict";var Q=0,D=0,Z=[],V=!1,oe=M.length;function K(Le,xe){if(!((Le=(Le=F.trim(Le)).replace(d,"").toLowerCase()).length<1)){var Ge=B(Le,xe||"");Ge&&Z.push(Ge)}}for(var ee=0;ee<oe;ee++){var fe,ne=M.charAt(ee);if(!1!==V||"="!==ne)if(!1===V||ee!==D){if(/\s|\n|\t/.test(ne)){if(M=M.replace(/\s|\n|\t/g," "),!1===V){if(-1===(fe=g(M,ee))){K(F.trim(M.slice(Q,ee))),V=!1,Q=ee+1;continue}ee=fe-1;continue}if(-1===(fe=x(M,ee-1))){K(V,k(F.trim(M.slice(Q,ee)))),V=!1,Q=ee+1;continue}}}else{if(-1===(fe=M.indexOf(ne,ee+1)))break;K(V,F.trim(M.slice(D+1,fe))),V=!1,Q=(ee=fe)+1}else V=M.slice(Q,ee),D='"'===M.charAt(Q=ee+1)||"'"===M.charAt(Q)?Q:_(M,ee+1)}return Q<M.length&&(!1===V?K(M.slice(Q)):K(V,k(F.trim(M.slice(Q))))),F.trim(Z.join(" "))}},98735:Ne=>{Ne.exports={indexOf:function(H,I){var F,h;if(Array.prototype.indexOf)return H.indexOf(I);for(F=0,h=H.length;F<h;F++)if(H[F]===I)return F;return-1},forEach:function(H,I,F){var h,U;if(Array.prototype.forEach)return H.forEach(I,F);for(h=0,U=H.length;h<U;h++)I.call(F,H[h],h,H)},trim:function(H){return String.prototype.trim?H.trim():H.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(H){var F=/\s|\n|\t/.exec(H);return F?F.index:-1}}},69278:(Ne,H,I)=>{var F=I(51474).FilterCSS,h=I(85129),U=I(74469),E=U.parseTag,d=U.parseAttr,C=I(98735);function g(M){return null==M}function k(M){(M=function x(M){var B={};for(var Q in M)B[Q]=M[Q];return B}(M||{})).stripIgnoreTag&&(M.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),M.onIgnoreTag=h.onIgnoreTagStripAll),M.whiteList=M.whiteList||M.allowList?function w(M){var B={};for(var Q in M)Array.isArray(M[Q])?B[Q.toLowerCase()]=M[Q].map(function(D){return D.toLowerCase()}):B[Q.toLowerCase()]=M[Q];return B}(M.whiteList||M.allowList):h.whiteList,M.onTag=M.onTag||h.onTag,M.onTagAttr=M.onTagAttr||h.onTagAttr,M.onIgnoreTag=M.onIgnoreTag||h.onIgnoreTag,M.onIgnoreTagAttr=M.onIgnoreTagAttr||h.onIgnoreTagAttr,M.safeAttrValue=M.safeAttrValue||h.safeAttrValue,M.escapeHtml=M.escapeHtml||h.escapeHtml,this.options=M,!1===M.css?this.cssFilter=!1:(M.css=M.css||{},this.cssFilter=new F(M.css))}k.prototype.process=function(M){if(!(M=(M=M||"").toString()))return"";var Q=this.options,D=Q.whiteList,Z=Q.onTag,V=Q.onIgnoreTag,oe=Q.onTagAttr,K=Q.onIgnoreTagAttr,ee=Q.safeAttrValue,ne=Q.escapeHtml,de=this.cssFilter;Q.stripBlankChar&&(M=h.stripBlankChar(M)),Q.allowCommentTag||(M=h.stripCommentTag(M));var fe=!1;Q.stripIgnoreTagBody&&(fe=h.StripTagBody(Q.stripIgnoreTagBody,V),V=fe.onIgnoreTag);var Le=E(M,function(xe,Ge,nt,ht,Ct){var mt={sourcePosition:xe,position:Ge,isClosing:Ct,isWhite:Object.prototype.hasOwnProperty.call(D,nt)},e=Z(nt,ht,mt);if(!g(e))return e;if(mt.isWhite){if(mt.isClosing)return"</"+nt+">";var Dt=function _(M){var B=C.spaceIndex(M);if(-1===B)return{html:"",closing:"/"===M[M.length-2]};var Q="/"===(M=C.trim(M.slice(B+1,-1)))[M.length-1];return Q&&(M=C.trim(M.slice(0,-1))),{html:M,closing:Q}}(ht),wt=D[nt],ye=d(Dt.html,function(Yt,sn){var ii=-1!==C.indexOf(wt,Yt),oi=oe(nt,Yt,sn,ii);return g(oi)?ii?(sn=ee(nt,Yt,sn,de))?Yt+'="'+sn+'"':Yt:g(oi=K(nt,Yt,sn,ii))?void 0:oi:oi});return ht="<"+nt,ye&&(ht+=" "+ye),Dt.closing&&(ht+=" /"),ht+">"}return g(e=V(nt,ht,mt))?ne(ht):e},ne);return fe&&(Le=fe.remove(Le)),Le},Ne.exports=k},14913:(Ne,H,I)=>{"use strict";I.d(H,{a:()=>Ti});var F=I(65879),h=I(49671),U=function($){return function E(Y){return!!Y&&"object"==typeof Y}($)&&!function d(Y){var $=Object.prototype.toString.call(Y);return"[object RegExp]"===$||"[object Date]"===$||function _(Y){return Y.$$typeof===g}(Y)}($)},g="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function w(Y,$){return!1!==$.clone&&$.isMergeableObject(Y)?oe(function x(Y){return Array.isArray(Y)?[]:{}}(Y),Y,$):Y}function k(Y,$,re){return Y.concat($).map(function(Ae){return w(Ae,re)})}function Q(Y){return Object.keys(Y).concat(function B(Y){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(Y).filter(function($){return Y.propertyIsEnumerable($)}):[]}(Y))}function D(Y,$){try{return $ in Y}catch{return!1}}function oe(Y,$,re){(re=re||{}).arrayMerge=re.arrayMerge||k,re.isMergeableObject=re.isMergeableObject||U,re.cloneUnlessOtherwiseSpecified=w;var Ae=Array.isArray($);return Ae===Array.isArray(Y)?Ae?re.arrayMerge(Y,$,re):function V(Y,$,re){var Ae={};return re.isMergeableObject(Y)&&Q(Y).forEach(function(we){Ae[we]=w(Y[we],re)}),Q($).forEach(function(we){(function Z(Y,$){return D(Y,$)&&!(Object.hasOwnProperty.call(Y,$)&&Object.propertyIsEnumerable.call(Y,$))})(Y,we)||(Ae[we]=D(Y,we)&&re.isMergeableObject($[we])?function M(Y,$){if(!$.customMerge)return oe;var re=$.customMerge(Y);return"function"==typeof re?re:oe}(we,re)(Y[we],$[we],re):w($[we],re))}),Ae}(Y,$,re):w($,re)}oe.all=function($,re){if(!Array.isArray($))throw new Error("first argument should be an array");return $.reduce(function(Ae,we){return oe(Ae,we,re)},{})};var ee=oe;function de(Y){return Y instanceof HTMLElement}function fe(Y){return"function"==typeof Y}function Le(Y){return"string"==typeof Y}function xe(Y){return void 0===Y}class Ge{on($,re,Ae,we){return void 0===we&&(we=!1),xe(this.bindings)&&(this.bindings={}),xe(this.bindings[$])&&(this.bindings[$]=[]),this.bindings[$].push({handler:re,ctx:Ae,once:we}),this}once($,re,Ae){return this.on($,re,Ae,!0)}off($,re){return xe(this.bindings)||xe(this.bindings[$])||(xe(re)?delete this.bindings[$]:this.bindings[$].forEach((Ae,we)=>{Ae.handler===re&&this.bindings[$].splice(we,1)})),this}trigger($){for(var re=arguments.length,Ae=new Array(re>1?re-1:0),we=1;we<re;we++)Ae[we-1]=arguments[we];return!xe(this.bindings)&&this.bindings[$]&&this.bindings[$].forEach((qe,ze)=>{const{ctx:tt,handler:pt,once:xt}=qe;pt.apply(tt||this,Ae),xt&&this.bindings[$].splice(ze,1)}),this}}function nt(Y){const $=Object.getOwnPropertyNames(Y.constructor.prototype);for(let re=0;re<$.length;re++){const Ae=$[re],we=Y[Ae];"constructor"!==Ae&&"function"==typeof we&&(Y[Ae]=we.bind(Y))}return Y}function mt(Y){return Le(Y)&&""!==Y?"-"!==Y.charAt(Y.length-1)?`${Y}-`:Y:""}function Dt(Y){return null==Y||!Y.element||!Y.on}function wt(){let Y=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,$=>{const re=(Y+16*Math.random())%16|0;return Y=Math.floor(Y/16),("x"==$?re:3&re|8).toString(16)})}function ye(){return ye=Object.assign?Object.assign.bind():function(Y){for(var $=1;$<arguments.length;$++){var re=arguments[$];for(var Ae in re)Object.prototype.hasOwnProperty.call(re,Ae)&&(Y[Ae]=re[Ae])}return Y},ye.apply(this,arguments)}function Yt(Y,$){if(null==Y)return{};var we,qe,re={},Ae=Object.keys(Y);for(qe=0;qe<Ae.length;qe++)!($.indexOf(we=Ae[qe])>=0)&&(re[we]=Y[we]);return re}const sn=["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","flipAlignment"],ii=["mainAxis","crossAxis","limiter"];function oi(Y){return Y.split("-")[0]}function Ut(Y){return Y.split("-")[1]}function Hn(Y){return["top","bottom"].includes(oi(Y))?"x":"y"}function at(Y){return"y"===Y?"height":"width"}function Lt(Y,$,re){let{reference:Ae,floating:we}=Y;const qe=Ae.x+Ae.width/2-we.width/2,ze=Ae.y+Ae.height/2-we.height/2,tt=Hn($),pt=at(tt),xt=Ae[pt]/2-we[pt]/2,Pt="x"===tt;let Nt;switch(oi($)){case"top":Nt={x:qe,y:Ae.y-we.height};break;case"bottom":Nt={x:qe,y:Ae.y+Ae.height};break;case"right":Nt={x:Ae.x+Ae.width,y:ze};break;case"left":Nt={x:Ae.x-we.width,y:ze};break;default:Nt={x:Ae.x,y:Ae.y}}switch(Ut($)){case"start":Nt[tt]-=xt*(re&&Pt?-1:1);break;case"end":Nt[tt]+=xt*(re&&Pt?-1:1)}return Nt}const Mn=function(){var Y=(0,h.Z)(function*($,re,Ae){const{placement:we="bottom",strategy:qe="absolute",middleware:ze=[],platform:tt}=Ae,pt=ze.filter(Boolean),xt=yield null==tt.isRTL?void 0:tt.isRTL(re);let Bt=yield tt.getElementRects({reference:$,floating:re,strategy:qe}),{x:Pt,y:Nt}=Lt(Bt,we,xt),kn=we,yn={},bi=0;for(let Wi=0;Wi<pt.length;Wi++){const{name:ki,fn:Hi}=pt[Wi],{x:so,y:Bn,data:xn,reset:ui}=yield Hi({x:Pt,y:Nt,initialPlacement:we,placement:kn,strategy:qe,middlewareData:yn,rects:Bt,platform:tt,elements:{reference:$,floating:re}});Pt=so??Pt,Nt=Bn??Nt,yn=ye({},yn,{[ki]:ye({},yn[ki],xn)}),ui&&bi<=50&&(bi++,"object"==typeof ui&&(ui.placement&&(kn=ui.placement),ui.rects&&(Bt=!0===ui.rects?yield tt.getElementRects({reference:$,floating:re,strategy:qe}):ui.rects),({x:Pt,y:Nt}=Lt(Bt,kn,xt))),Wi=-1)}return{x:Pt,y:Nt,placement:kn,strategy:qe,middlewareData:yn}});return function(re,Ae,we){return Y.apply(this,arguments)}}();function Zn(Y){return"number"!=typeof Y?function $t(Y){return ye({top:0,right:0,bottom:0,left:0},Y)}(Y):{top:Y,right:Y,bottom:Y,left:Y}}function on(Y){return ye({},Y,{top:Y.y,left:Y.x,right:Y.x+Y.width,bottom:Y.y+Y.height})}function Dn(Y,$){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,h.Z)(function*(Y,$){var re;void 0===$&&($={});const{x:Ae,y:we,platform:qe,rects:ze,elements:tt,strategy:pt}=Y,{boundary:xt="clippingAncestors",rootBoundary:Bt="viewport",elementContext:Pt="floating",altBoundary:Nt=!1,padding:kn=0}=$,yn=Zn(kn),Wi=tt[Nt?"floating"===Pt?"reference":"floating":Pt],ki=on(yield qe.getClippingRect({element:null==(re=yield null==qe.isElement?void 0:qe.isElement(Wi))||re?Wi:Wi.contextElement||(yield null==qe.getDocumentElement?void 0:qe.getDocumentElement(tt.floating)),boundary:xt,rootBoundary:Bt,strategy:pt})),Hi="floating"===Pt?ye({},ze.floating,{x:Ae,y:we}):ze.reference,so=yield null==qe.getOffsetParent?void 0:qe.getOffsetParent(tt.floating),Bn=(yield null==qe.isElement?void 0:qe.isElement(so))&&(yield null==qe.getScale?void 0:qe.getScale(so))||{x:1,y:1},xn=on(qe.convertOffsetParentRelativeRectToViewportRelativeRect?yield qe.convertOffsetParentRelativeRectToViewportRelativeRect({rect:Hi,offsetParent:so,strategy:pt}):Hi);return{top:(ki.top-xn.top+yn.top)/Bn.y,bottom:(xn.bottom-ki.bottom+yn.bottom)/Bn.y,left:(ki.left-xn.left+yn.left)/Bn.x,right:(xn.right-ki.right+yn.right)/Bn.x}})).apply(this,arguments)}const Cn=Math.min,Nn=Math.max;function jt(Y,$,re){return Nn(Y,Cn($,re))}const Sn={left:"right",right:"left",bottom:"top",top:"bottom"};function ai(Y){return Y.replace(/left|right|bottom|top/g,$=>Sn[$])}const Fo={start:"end",end:"start"};function ji(Y){return Y.replace(/start|end/g,$=>Fo[$])}function $m(Y){return"x"===Y?"y":"x"}const Ts=function($){return void 0===$&&($={}),{options:$,fn(re){const{x:Ae,y:we,placement:qe,rects:ze,middlewareData:tt}=re,{offset:pt=0,mainAxis:xt=!0,crossAxis:Bt=!0}=$,Pt={x:Ae,y:we},Nt=Hn(qe),kn=$m(Nt);let yn=Pt[Nt],bi=Pt[kn];const Wi="function"==typeof pt?pt(re):pt,ki="number"==typeof Wi?{mainAxis:Wi,crossAxis:0}:ye({mainAxis:0,crossAxis:0},Wi);if(xt){const ui="y"===Nt?"height":"width",Go=ze.reference[Nt]-ze.floating[ui]+ki.mainAxis,Zo=ze.reference[Nt]+ze.reference[ui]-ki.mainAxis;yn<Go?yn=Go:yn>Zo&&(yn=Zo)}if(Bt){var Hi,so,Bn,xn;const ui="y"===Nt?"width":"height",Go=["top","left"].includes(oi(qe)),Zo=ze.reference[kn]-ze.floating[ui]+(Go&&null!=(Hi=null==(so=tt.offset)?void 0:so[kn])?Hi:0)+(Go?0:ki.crossAxis),bo=ze.reference[kn]+ze.reference[ui]+(Go?0:null!=(Bn=null==(xn=tt.offset)?void 0:xn[kn])?Bn:0)-(Go?ki.crossAxis:0);bi<Zo?bi=Zo:bi>bo&&(bi=bo)}return{[Nt]:yn,[kn]:bi}}}};function La(Y){var $;return(null==($=Y.ownerDocument)?void 0:$.defaultView)||window}function za(Y){return La(Y).getComputedStyle(Y)}function Ba(Y){return tr(Y)?(Y.nodeName||"").toLowerCase():""}let ia;function Vr(){if(ia)return ia;const Y=navigator.userAgentData;return Y&&Array.isArray(Y.brands)?(ia=Y.brands.map($=>$.brand+"/"+$.version).join(" "),ia):navigator.userAgent}function wa(Y){return Y instanceof La(Y).HTMLElement}function Ko(Y){return Y instanceof La(Y).Element}function tr(Y){return Y instanceof La(Y).Node}function ks(Y){return!(typeof ShadowRoot>"u")&&(Y instanceof La(Y).ShadowRoot||Y instanceof ShadowRoot)}function Wr(Y){const{overflow:$,overflowX:re,overflowY:Ae,display:we}=za(Y);return/auto|scroll|overlay|hidden/.test($+Ae+re)&&!["inline","contents"].includes(we)}function Ss(Y){return["table","td","th"].includes(Ba(Y))}function un(Y){const $=/firefox/i.test(Vr()),re=za(Y),Ae=re.backdropFilter||re.WebkitBackdropFilter;return"none"!==re.transform||"none"!==re.perspective||!!Ae&&"none"!==Ae||$&&"filter"===re.willChange||$&&!!re.filter&&"none"!==re.filter||["transform","perspective"].some(we=>re.willChange.includes(we))||["paint","layout","strict","content"].some(we=>{const qe=re.contain;return null!=qe&&qe.includes(we)})}function Zc(){return!/^((?!chrome|android).)*safari/i.test(Vr())}function Ar(Y){return["html","body","#document"].includes(Ba(Y))}const ya={x:1,y:1};function Yn(Y){const $=!Ko(Y)&&Y.contextElement?Y.contextElement:Ko(Y)?Y:null;if(!$)return ya;const re=$.getBoundingClientRect(),Ae=za($);let we=re.width/parseFloat(Ae.width),qe=re.height/parseFloat(Ae.height);return(!we||!Number.isFinite(we))&&(we=1),(!qe||!Number.isFinite(qe))&&(qe=1),{x:we,y:qe}}function Ha(Y,$,re,Ae){var we,qe,ze,tt;void 0===$&&($=!1),void 0===re&&(re=!1);const pt=Y.getBoundingClientRect();let xt=ya;$&&(Ae?Ko(Ae)&&(xt=Yn(Ae)):xt=Yn(Y));const Bt=Ko(Y)?La(Y):window,Pt=!Zc()&&re,Nt=(pt.left+(Pt&&null!=(we=null==(qe=Bt.visualViewport)?void 0:qe.offsetLeft)?we:0))/xt.x,kn=(pt.top+(Pt&&null!=(ze=null==(tt=Bt.visualViewport)?void 0:tt.offsetTop)?ze:0))/xt.y,yn=pt.width/xt.x,bi=pt.height/xt.y;return{width:yn,height:bi,top:kn,right:Nt+yn,bottom:kn+bi,left:Nt,x:Nt,y:kn}}function nr(Y){return((tr(Y)?Y.ownerDocument:Y.document)||window.document).documentElement}function oa(Y){return Ko(Y)?{scrollLeft:Y.scrollLeft,scrollTop:Y.scrollTop}:{scrollLeft:Y.pageXOffset,scrollTop:Y.pageYOffset}}function qi(Y){return Ha(nr(Y)).left+oa(Y).scrollLeft}function Ud(Y,$,re){const Ae=wa($),we=nr($),qe=Ha(Y,!0,"fixed"===re,$);let ze={scrollLeft:0,scrollTop:0};const tt={x:0,y:0};if(Ae||!Ae&&"fixed"!==re)if(("body"!==Ba($)||Wr(we))&&(ze=oa($)),wa($)){const pt=Ha($,!0);tt.x=pt.x+$.clientLeft,tt.y=pt.y+$.clientTop}else we&&(tt.x=qi(we));return{x:qe.left+ze.scrollLeft-tt.x,y:qe.top+ze.scrollTop-tt.y,width:qe.width,height:qe.height}}function _r(Y){if("html"===Ba(Y))return Y;const $=Y.assignedSlot||Y.parentNode||(ks(Y)?Y.host:null)||nr(Y);return ks($)?$.host:$}function Xr(Y){return wa(Y)&&"fixed"!==za(Y).position?Y.offsetParent:null}function qn(Y){const $=La(Y);let re=Xr(Y);for(;re&&Ss(re)&&"static"===za(re).position;)re=Xr(re);return re&&("html"===Ba(re)||"body"===Ba(re)&&"static"===za(re).position&&!un(re))?$:re||function fr(Y){let $=_r(Y);for(;wa($)&&!Ar($);){if(un($))return $;$=_r($)}return null}(Y)||$}const Qu=Math.min,jl=Math.max;function Xm(Y){const $=_r(Y);return Ar($)?Y.ownerDocument.body:wa($)&&Wr($)?$:Xm($)}function ql(Y,$){var re;void 0===$&&($=[]);const Ae=Xm(Y),we=Ae===(null==(re=Y.ownerDocument)?void 0:re.body),qe=La(Ae);return we?$.concat(qe,qe.visualViewport||[],Wr(Ae)?Ae:[]):$.concat(Ae,ql(Ae))}function ep(Y,$,re){return"viewport"===$?on(function es(Y,$){const re=La(Y),Ae=nr(Y),we=re.visualViewport;let qe=Ae.clientWidth,ze=Ae.clientHeight,tt=0,pt=0;if(we){qe=we.width,ze=we.height;const xt=Zc();(xt||!xt&&"fixed"===$)&&(tt=we.offsetLeft,pt=we.offsetTop)}return{width:qe,height:ze,x:tt,y:pt}}(Y,re)):Ko($)?function Vh(Y,$){const re=Ha(Y,!0,"fixed"===$),Ae=re.top+Y.clientTop,we=re.left+Y.clientLeft,qe=wa(Y)?Yn(Y):{x:1,y:1},ze=Y.clientWidth*qe.x,tt=Y.clientHeight*qe.y,pt=we*qe.x,xt=Ae*qe.y;return{top:xt,left:pt,right:pt+ze,bottom:xt+tt,x:pt,y:xt,width:ze,height:tt}}($,re):on(function Wm(Y){var $;const re=nr(Y),Ae=oa(Y),we=null==($=Y.ownerDocument)?void 0:$.body,qe=jl(re.scrollWidth,re.clientWidth,we?we.scrollWidth:0,we?we.clientWidth:0),ze=jl(re.scrollHeight,re.clientHeight,we?we.scrollHeight:0,we?we.clientHeight:0);let tt=-Ae.scrollLeft+qi(Y);const pt=-Ae.scrollTop;return"rtl"===za(we||re).direction&&(tt+=jl(re.clientWidth,we?we.clientWidth:0)-qe),{width:qe,height:ze,x:tt,y:pt}}(nr(Y)))}function jd(Y,$){const re=$.get(Y);if(re)return re;let Ae=ql(Y).filter(tt=>Ko(tt)&&"body"!==Ba(tt)),we=null;const qe="fixed"===za(Y).position;let ze=qe?_r(Y):Y;for(;Ko(ze)&&!Ar(ze);){const tt=za(ze),pt=un(ze);(qe?pt||we:pt||"static"!==tt.position||!we||!["absolute","fixed"].includes(we.position))?we=tt:Ae=Ae.filter(Bt=>Bt!==ze),ze=_r(ze)}return $.set(Y,Ae),Ae}const Wh={getClippingRect:function tp(Y){let{element:$,boundary:re,rootBoundary:Ae,strategy:we}=Y;const ze=[..."clippingAncestors"===re?jd($,this._c):[].concat(re),Ae],pt=ze.reduce((xt,Bt)=>{const Pt=ep($,Bt,we);return xt.top=jl(Pt.top,xt.top),xt.right=Qu(Pt.right,xt.right),xt.bottom=Qu(Pt.bottom,xt.bottom),xt.left=jl(Pt.left,xt.left),xt},ep($,ze[0],we));return{width:pt.right-pt.left,height:pt.bottom-pt.top,x:pt.left,y:pt.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function Ul(Y){let{rect:$,offsetParent:re,strategy:Ae}=Y;const we=wa(re),qe=nr(re);if(re===qe)return $;let ze={scrollLeft:0,scrollTop:0},tt={x:1,y:1};const pt={x:0,y:0};if((we||!we&&"fixed"!==Ae)&&(("body"!==Ba(re)||Wr(qe))&&(ze=oa(re)),wa(re))){const xt=Ha(re);tt=Yn(re),pt.x=xt.x+re.clientLeft,pt.y=xt.y+re.clientTop}return{width:$.width*tt.x,height:$.height*tt.y,x:$.x*tt.x-ze.scrollLeft*tt.x+pt.x,y:$.y*tt.y-ze.scrollTop*tt.y+pt.y}},isElement:Ko,getDimensions:function Pu(Y){if(wa(Y))return{width:Y.offsetWidth,height:Y.offsetHeight};const $=Ha(Y);return{width:$.width,height:$.height}},getOffsetParent:qn,getDocumentElement:nr,getScale:Yn,getElementRects(Y){var $=this;return(0,h.Z)(function*(){let{reference:re,floating:Ae,strategy:we}=Y;const qe=$.getOffsetParent||qn,ze=$.getDimensions;return{reference:Ud(re,yield qe(Ae),we),floating:ye({x:0,y:0},yield ze(Ae))}})()},getClientRects:Y=>Array.from(Y.getClientRects()),isRTL:Y=>"rtl"===za(Y).direction};function tA(Y){Y.cleanup&&Y.cleanup();const $=Y._getResolvedAttachToOptions();let re=$.element;const Ae=function ip(Y,$){const re={strategy:"absolute",middleware:[]},Ae=function Uc(Y){return!(!Y.options.arrow||!Y.el)&&Y.el.querySelector(".shepherd-arrow")}($);return Dt(Y)||(re.middleware.push(function($){return void 0===$&&($={}),{name:"flip",options:$,fn:re=>(0,h.Z)(function*(){var Ae;const{placement:we,middlewareData:qe,rects:ze,initialPlacement:tt,platform:pt,elements:xt}=re,{mainAxis:Bt=!0,crossAxis:Pt=!0,fallbackPlacements:Nt,fallbackStrategy:kn="bestFit",flipAlignment:yn=!0}=$,bi=Yt($,sn),Wi=oi(we),Hi=Nt||(Wi!==tt&&yn?function No(Y){const $=ai(Y);return[ji(Y),$,ji($)]}(tt):[ai(tt)]),so=[tt,...Hi],Bn=yield Dn(re,bi),xn=[];let ui=(null==(Ae=qe.flip)?void 0:Ae.overflows)||[];if(Bt&&xn.push(Bn[Wi]),Pt){const{main:as,cross:Xl}=function Jo(Y,$,re){void 0===re&&(re=!1);const Ae=Ut(Y),we=Hn(Y),qe=at(we);let ze="x"===we?Ae===(re?"end":"start")?"right":"left":"start"===Ae?"bottom":"top";return $.reference[qe]>$.floating[qe]&&(ze=ai(ze)),{main:ze,cross:ai(ze)}}(we,ze,yield null==pt.isRTL?void 0:pt.isRTL(xt.floating));xn.push(Bn[as],Bn[Xl])}if(ui=[...ui,{placement:we,overflows:xn}],!xn.every(as=>as<=0)){var Go,Zo;const as=(null!=(Go=null==(Zo=qe.flip)?void 0:Zo.index)?Go:0)+1,Xl=so[as];if(Xl)return{data:{index:as,overflows:ui},reset:{placement:Xl}};let Bs="bottom";switch(kn){case"bestFit":{var bo;const ul=null==(bo=ui.map(Wd=>[Wd,Wd.overflows.filter(eu=>eu>0).reduce((eu,lA)=>eu+lA,0)]).sort((Wd,eu)=>Wd[1]-eu[1])[0])?void 0:bo[0].placement;ul&&(Bs=ul);break}case"initialPlacement":Bs=tt}if(we!==Bs)return{reset:{placement:Bs}}}return{}})()}}(),function($){return void 0===$&&($={}),{name:"shift",options:$,fn:re=>(0,h.Z)(function*(){const{x:Ae,y:we,placement:qe}=re,{mainAxis:ze=!0,crossAxis:tt=!1,limiter:pt={fn:ki=>{let{x:Hi,y:so}=ki;return{x:Hi,y:so}}}}=$,xt=Yt($,ii),Bt={x:Ae,y:we},Pt=yield Dn(re,xt),Nt=Hn(oi(qe)),kn=$m(Nt);let yn=Bt[Nt],bi=Bt[kn];ze&&(yn=jt(yn+Pt["y"===Nt?"top":"left"],yn,yn-Pt["y"===Nt?"bottom":"right"])),tt&&(bi=jt(bi+Pt["y"===kn?"top":"left"],bi,bi-Pt["y"===kn?"bottom":"right"]));const Wi=pt.fn(ye({},re,{[Nt]:yn,[kn]:bi}));return ye({},Wi,{data:{x:Wi.x-Ae,y:Wi.y-we}})})()}}({limiter:Ts(),crossAxis:!0})),Ae&&re.middleware.push((Y=>({name:"arrow",options:Y,fn:$=>(0,h.Z)(function*(){const{element:re,padding:Ae=0}=Y??{},{x:we,y:qe,placement:ze,rects:tt,platform:pt}=$;if(null==re)return{};const xt=Zn(Ae),Bt={x:we,y:qe},Pt=Hn(ze),Nt=Ut(ze),kn=at(Pt),yn=yield pt.getDimensions(re),bi="y"===Pt?"top":"left",Wi="y"===Pt?"bottom":"right",ki=tt.reference[kn]+tt.reference[Pt]-Bt[Pt]-tt.floating[kn],Hi=Bt[Pt]-tt.reference[Pt],so=yield null==pt.getOffsetParent?void 0:pt.getOffsetParent(re);let Bn=so?"y"===Pt?so.clientHeight||0:so.clientWidth||0:0;0===Bn&&(Bn=tt.floating[kn]);const ui=xt[bi],Go=Bn-yn[kn]-xt[Wi],Zo=Bn/2-yn[kn]/2+(ki/2-Hi/2),bo=jt(ui,Zo,Go);return{[Pt]:Bt[Pt]-(("start"===Nt?xt[bi]:xt[Wi])>0&&Zo!==bo&&tt.reference[kn]<=tt.floating[kn]?Zo<ui?ui-Zo:Go-Zo:0),data:{[Pt]:bo,centerOffset:Zo-bo}}})()}))({element:Ae})),re.placement=Y.on),ee($.options.floatingUIOptions||{},re)}($,Y),we=Dt($);return we&&(re=document.body,Y.shepherdElementComponent.getElement().classList.add("shepherd-centered")),Y.cleanup=function Xh(Y,$,re,Ae){void 0===Ae&&(Ae={});const{ancestorScroll:we=!0,ancestorResize:qe=!0,elementResize:ze=!0,animationFrame:tt=!1}=Ae,pt=we&&!tt,xt=pt||qe?[...Ko(Y)?ql(Y):Y.contextElement?ql(Y.contextElement):[],...ql($)]:[];xt.forEach(yn=>{pt&&yn.addEventListener("scroll",re,{passive:!0}),qe&&yn.addEventListener("resize",re)});let Bt=null;if(ze){let yn=!0;Bt=new ResizeObserver(()=>{yn||re(),yn=!1}),Ko(Y)&&!tt&&Bt.observe(Y),!Ko(Y)&&Y.contextElement&&!tt&&Bt.observe(Y.contextElement),Bt.observe($)}let Pt,Nt=tt?Ha(Y):null;return tt&&function kn(){const yn=Ha(Y);Nt&&(yn.x!==Nt.x||yn.y!==Nt.y||yn.width!==Nt.width||yn.height!==Nt.height)&&re(),Nt=yn,Pt=requestAnimationFrame(kn)}(),re(),()=>{var yn;xt.forEach(bi=>{pt&&bi.removeEventListener("scroll",re),qe&&bi.removeEventListener("resize",re)}),null==(yn=Bt)||yn.disconnect(),Bt=null,tt&&cancelAnimationFrame(Pt)}}(re,Y.el,()=>{Y.el?function Dc(Y,$,re,Ae){((Y,$,re)=>{const Ae=new Map,we=ye({platform:Wh},re),qe=ye({},we.platform,{_c:Ae});return Mn(Y,$,ye({},we,{platform:qe}))})(Y,$.el,re).then(function np(Y,$){return re=>{let{x:Ae,y:we,placement:qe,middlewareData:ze}=re;return Y.el&&(Object.assign(Y.el.style,$?{position:"fixed",left:"50%",top:"50%",transform:"translate(-50%, -50%)"}:{position:"absolute",left:`${Ae}px`,top:`${we}px`}),Y.el.dataset.popperPlacement=qe,function Fu(Y,$){const re=Y.querySelector(".shepherd-arrow");if(re){let Ae,we,qe,ze;if($.arrow){const{x:tt,y:pt}=$.arrow;Ae=null!=tt?`${tt}px`:"",we=null!=pt?`${pt}px`:""}Object.assign(re.style,{left:Ae,top:we,right:qe,bottom:ze})}}(Y.el,ze)),Y}}($,Ae)).then(we=>new Promise(qe=>{setTimeout(()=>qe(we),300)})).then(we=>{we&&we.el&&we.el.focus({preventScroll:!0})})}(re,Y,Ae,we):Y.cleanup()}),Y.target=$.element,Ae}function Ja(){}function oA(Y,$){for(const re in $)Y[re]=$[re];return Y}function jc(Y){return Y()}function Rl(){return Object.create(null)}function qc(Y){Y.forEach(jc)}function Nu(Y){return"function"==typeof Y}function Ir(Y,$){return Y!=Y?$==$:Y!==$||Y&&"object"==typeof Y||"function"==typeof Y}function ts(Y,$){Y.appendChild($)}function Ca(Y,$,re){Y.insertBefore($,re||null)}function ir(Y){Y.parentNode&&Y.parentNode.removeChild(Y)}function Mr(Y){return document.createElement(Y)}function op(Y){return document.createElementNS("http://www.w3.org/2000/svg",Y)}function ap(Y){return document.createTextNode(Y)}function Du(){return ap(" ")}function Rc(Y,$,re,Ae){return Y.addEventListener($,re,Ae),()=>Y.removeEventListener($,re,Ae)}function Vi(Y,$,re){null==re?Y.removeAttribute($):Y.getAttribute($)!==re&&Y.setAttribute($,re)}function rp(Y,$){const re=Object.getOwnPropertyDescriptors(Y.__proto__);for(const Ae in $)null==$[Ae]?Y.removeAttribute(Ae):"style"===Ae?Y.style.cssText=$[Ae]:"__value"===Ae?Y.value=Y[Ae]=$[Ae]:re[Ae]&&re[Ae].set?Y[Ae]=$[Ae]:Vi(Y,Ae,$[Ae])}function zl(Y,$,re){Y.classList[re?"add":"remove"]($)}let Hl;function zc(Y){Hl=Y}function sp(){if(!Hl)throw new Error("Function called outside component initialization");return Hl}function Hc(Y){sp().$$.after_update.push(Y)}const gr=[],Jl=[],ju=[],cp=[],Jc=Promise.resolve();let qd=!1;function Rd(Y){ju.push(Y)}const zd=new Set;let qu=0;function up(){const Y=Hl;do{for(;qu<gr.length;){const $=gr[qu];qu++,zc($),Lr($.$$)}for(zc(null),gr.length=0,qu=0;Jl.length;)Jl.pop()();for(let $=0;$<ju.length;$+=1){const re=ju[$];zd.has(re)||(zd.add(re),re())}ju.length=0}while(gr.length);for(;cp.length;)cp.pop()();qd=!1,zd.clear(),zc(Y)}function Lr(Y){if(null!==Y.fragment){Y.update(),qc(Y.before_update);const $=Y.dirty;Y.dirty=[-1],Y.fragment&&Y.fragment.p(Y.ctx,$),Y.after_update.forEach(Rd)}}const Kc=new Set;let ns;function Br(){ns={r:0,c:[],p:ns}}function ol(){ns.r||qc(ns.c),ns=ns.p}function Ni(Y,$){Y&&Y.i&&(Kc.delete(Y),Y.i($))}function Ki(Y,$,re,Ae){if(Y&&Y.o){if(Kc.has(Y))return;Kc.add(Y),ns.c.push(()=>{Kc.delete(Y),Ae&&(re&&Y.d(1),Ae())}),Y.o($)}else Ae&&Ae()}function yi(Y){Y&&Y.c()}function Pr(Y,$,re,Ae){const{fragment:we,after_update:qe}=Y.$$;we&&we.m($,re),Ae||Rd(()=>{const ze=Y.$$.on_mount.map(jc).filter(Nu);Y.$$.on_destroy?Y.$$.on_destroy.push(...ze):qc(ze),Y.$$.on_mount=[]}),qe.forEach(Rd)}function Es(Y,$){const re=Y.$$;null!==re.fragment&&(qc(re.on_destroy),re.fragment&&re.fragment.d($),re.on_destroy=re.fragment=null,re.ctx=[])}function ti(Y,$,re,Ae,we,qe,ze,tt){void 0===tt&&(tt=[-1]);const pt=Hl;zc(Y);const xt=Y.$$={fragment:null,ctx:[],props:qe,update:Ja,not_equal:we,bound:Rl(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map($.context||(pt?pt.$$.context:[])),callbacks:Rl(),dirty:tt,skip_bound:!1,root:$.target||pt.$$.root};ze&&ze(xt.root);let Bt=!1;if(xt.ctx=re?re(Y,$.props||{},function(Pt,Nt){const kn=!(arguments.length<=2)&&arguments.length-2?arguments.length<=2?void 0:arguments[2]:Nt;return xt.ctx&&we(xt.ctx[Pt],xt.ctx[Pt]=kn)&&(!xt.skip_bound&&xt.bound[Pt]&&xt.bound[Pt](kn),Bt&&function Ri(Y,$){-1===Y.$$.dirty[0]&&(gr.push(Y),function rA(){qd||(qd=!0,Jc.then(up))}(),Y.$$.dirty.fill(0)),Y.$$.dirty[$/31|0]|=1<<$%31}(Y,Pt)),Nt}):[],xt.update(),Bt=!0,qc(xt.before_update),xt.fragment=!!Ae&&Ae(xt.ctx),$.target){if($.hydrate){const Pt=function Uu(Y){return Array.from(Y.childNodes)}($.target);xt.fragment&&xt.fragment.l(Pt),Pt.forEach(ir)}else xt.fragment&&xt.fragment.c();$.intro&&Ni(Y.$$.fragment),Pr(Y,$.target,$.anchor,$.customElement),up()}zc(pt)}class ma{$destroy(){Es(this,1),this.$destroy=Ja}$on($,re){if(!Nu(re))return Ja;const Ae=this.$$.callbacks[$]||(this.$$.callbacks[$]=[]);return Ae.push(re),()=>{const we=Ae.indexOf(re);-1!==we&&Ae.splice(we,1)}}$set($){this.$$set&&!function Zu(Y){return 0===Object.keys(Y).length}($)&&(this.$$.skip_bound=!0,this.$$set($),this.$$.skip_bound=!1)}}function xr(Y){let $,re,Ae,we,qe;return{c(){$=Mr("button"),Vi($,"aria-label",re=Y[3]?Y[3]:null),Vi($,"class",Ae=`${Y[1]||""} shepherd-button ${Y[4]?"shepherd-button-secondary":""}`),$.disabled=Y[2],Vi($,"tabindex","0")},m(ze,tt){Ca(ze,$,tt),$.innerHTML=Y[5],we||(qe=Rc($,"click",function(){Nu(Y[0])&&Y[0].apply(this,arguments)}),we=!0)},p(ze,tt){let[pt]=tt;Y=ze,32&pt&&($.innerHTML=Y[5]),8&pt&&re!==(re=Y[3]?Y[3]:null)&&Vi($,"aria-label",re),18&pt&&Ae!==(Ae=`${Y[1]||""} shepherd-button ${Y[4]?"shepherd-button-secondary":""}`)&&Vi($,"class",Ae),4&pt&&($.disabled=Y[2])},i:Ja,o:Ja,d(ze){ze&&ir($),we=!1,qe()}}}function Kl(Y,$,re){let qe,ze,tt,pt,xt,Bt,{config:Ae,step:we}=$;function Pt(Nt){return fe(Nt)?Nt=Nt.call(we):Nt}return Y.$$set=Nt=>{"config"in Nt&&re(6,Ae=Nt.config),"step"in Nt&&re(7,we=Nt.step)},Y.$$.update=()=>{192&Y.$$.dirty&&(re(0,qe=Ae.action?Ae.action.bind(we.tour):null),re(1,ze=Ae.classes),re(2,tt=!!Ae.disabled&&Pt(Ae.disabled)),re(3,pt=Ae.label?Pt(Ae.label):null),re(4,xt=Ae.secondary),re(5,Bt=Ae.text?Pt(Ae.text):null))},[qe,ze,tt,pt,xt,Bt,Ae,we]}class Gc extends ma{constructor($){super(),ti(this,$,Kl,xr,Ir,{config:6,step:7})}}function Hd(Y,$,re){const Ae=Y.slice();return Ae[2]=$[re],Ae}function Jd(Y){let $,re,Ae=Y[1],we=[];for(let ze=0;ze<Ae.length;ze+=1)we[ze]=rl(Hd(Y,Ae,ze));const qe=ze=>Ki(we[ze],1,1,()=>{we[ze]=null});return{c(){for(let ze=0;ze<we.length;ze+=1)we[ze].c();$=function aA(){return ap("")}()},m(ze,tt){for(let pt=0;pt<we.length;pt+=1)we[pt].m(ze,tt);Ca(ze,$,tt),re=!0},p(ze,tt){if(3&tt){let pt;for(Ae=ze[1],pt=0;pt<Ae.length;pt+=1){const xt=Hd(ze,Ae,pt);we[pt]?(we[pt].p(xt,tt),Ni(we[pt],1)):(we[pt]=rl(xt),we[pt].c(),Ni(we[pt],1),we[pt].m($.parentNode,$))}for(Br(),pt=Ae.length;pt<we.length;pt+=1)qe(pt);ol()}},i(ze){if(!re){for(let tt=0;tt<Ae.length;tt+=1)Ni(we[tt]);re=!0}},o(ze){we=we.filter(Boolean);for(let tt=0;tt<we.length;tt+=1)Ki(we[tt]);re=!1},d(ze){(function Pa(Y,$){for(let re=0;re<Y.length;re+=1)Y[re]&&Y[re].d($)})(we,ze),ze&&ir($)}}}function rl(Y){let $,re;return $=new Gc({props:{config:Y[2],step:Y[0]}}),{c(){yi($.$$.fragment)},m(Ae,we){Pr($,Ae,we),re=!0},p(Ae,we){const qe={};2&we&&(qe.config=Ae[2]),1&we&&(qe.step=Ae[0]),$.$set(qe)},i(Ae){re||(Ni($.$$.fragment,Ae),re=!0)},o(Ae){Ki($.$$.fragment,Ae),re=!1},d(Ae){Es($,Ae)}}}function sl(Y){let $,re,Ae=Y[1]&&Jd(Y);return{c(){$=Mr("footer"),Ae&&Ae.c(),Vi($,"class","shepherd-footer")},m(we,qe){Ca(we,$,qe),Ae&&Ae.m($,null),re=!0},p(we,qe){let[ze]=qe;we[1]?Ae?(Ae.p(we,ze),2&ze&&Ni(Ae,1)):(Ae=Jd(we),Ae.c(),Ni(Ae,1),Ae.m($,null)):Ae&&(Br(),Ki(Ae,1,1,()=>{Ae=null}),ol())},i(we){re||(Ni(Ae),re=!0)},o(we){Ki(Ae),re=!1},d(we){we&&ir($),Ae&&Ae.d()}}}function Kd(Y,$,re){let Ae,{step:we}=$;return Y.$$set=qe=>{"step"in qe&&re(0,we=qe.step)},Y.$$.update=()=>{1&Y.$$.dirty&&re(1,Ae=we.options.buttons)},[we,Ae]}class dp extends ma{constructor($){super(),ti(this,$,Kd,sl,Ir,{step:0})}}function Qr(Y){let $,re,Ae,we,qe;return{c(){$=Mr("button"),re=Mr("span"),re.textContent="\xd7",Vi(re,"aria-hidden","true"),Vi($,"aria-label",Ae=Y[0].label?Y[0].label:"Close Tour"),Vi($,"class","shepherd-cancel-icon"),Vi($,"type","button")},m(ze,tt){Ca(ze,$,tt),ts($,re),we||(qe=Rc($,"click",Y[1]),we=!0)},p(ze,tt){let[pt]=tt;1&pt&&Ae!==(Ae=ze[0].label?ze[0].label:"Close Tour")&&Vi($,"aria-label",Ae)},i:Ja,o:Ja,d(ze){ze&&ir($),we=!1,qe()}}}function Os(Y,$,re){let{cancelIcon:Ae,step:we}=$;return Y.$$set=ze=>{"cancelIcon"in ze&&re(0,Ae=ze.cancelIcon),"step"in ze&&re(2,we=ze.step)},[Ae,ze=>{ze.preventDefault(),we.cancel()},we]}class Gi extends ma{constructor($){super(),ti(this,$,Os,Qr,Ir,{cancelIcon:0,step:2})}}function Is(Y){let $;return{c(){$=Mr("h3"),Vi($,"id",Y[1]),Vi($,"class","shepherd-title")},m(re,Ae){Ca(re,$,Ae),Y[3]($)},p(re,Ae){let[we]=Ae;2&we&&Vi($,"id",re[1])},i:Ja,o:Ja,d(re){re&&ir($),Y[3](null)}}}function or(Y,$,re){let{labelId:Ae,element:we,title:qe}=$;return Hc(()=>{fe(qe)&&re(2,qe=qe()),re(0,we.innerHTML=qe,we)}),Y.$$set=tt=>{"labelId"in tt&&re(1,Ae=tt.labelId),"element"in tt&&re(0,we=tt.element),"title"in tt&&re(2,qe=tt.title)},[we,Ae,qe,function ze(tt){Jl[tt?"unshift":"push"](()=>{we=tt,re(0,we)})}]}class is extends ma{constructor($){super(),ti(this,$,or,Is,Ir,{labelId:1,element:0,title:2})}}function ll(Y){let $,re;return $=new is({props:{labelId:Y[0],title:Y[2]}}),{c(){yi($.$$.fragment)},m(Ae,we){Pr($,Ae,we),re=!0},p(Ae,we){const qe={};1&we&&(qe.labelId=Ae[0]),4&we&&(qe.title=Ae[2]),$.$set(qe)},i(Ae){re||(Ni($.$$.fragment,Ae),re=!0)},o(Ae){Ki($.$$.fragment,Ae),re=!1},d(Ae){Es($,Ae)}}}function Gd(Y){let $,re;return $=new Gi({props:{cancelIcon:Y[3],step:Y[1]}}),{c(){yi($.$$.fragment)},m(Ae,we){Pr($,Ae,we),re=!0},p(Ae,we){const qe={};8&we&&(qe.cancelIcon=Ae[3]),2&we&&(qe.step=Ae[1]),$.$set(qe)},i(Ae){re||(Ni($.$$.fragment,Ae),re=!0)},o(Ae){Ki($.$$.fragment,Ae),re=!1},d(Ae){Es($,Ae)}}}function mp(Y){let $,re,Ae,we=Y[2]&&ll(Y),qe=Y[3]&&Y[3].enabled&&Gd(Y);return{c(){$=Mr("header"),we&&we.c(),re=Du(),qe&&qe.c(),Vi($,"class","shepherd-header")},m(ze,tt){Ca(ze,$,tt),we&&we.m($,null),ts($,re),qe&&qe.m($,null),Ae=!0},p(ze,tt){let[pt]=tt;ze[2]?we?(we.p(ze,pt),4&pt&&Ni(we,1)):(we=ll(ze),we.c(),Ni(we,1),we.m($,re)):we&&(Br(),Ki(we,1,1,()=>{we=null}),ol()),ze[3]&&ze[3].enabled?qe?(qe.p(ze,pt),8&pt&&Ni(qe,1)):(qe=Gd(ze),qe.c(),Ni(qe,1),qe.m($,null)):qe&&(Br(),Ki(qe,1,1,()=>{qe=null}),ol())},i(ze){Ae||(Ni(we),Ni(qe),Ae=!0)},o(ze){Ki(we),Ki(qe),Ae=!1},d(ze){ze&&ir($),we&&we.d(),qe&&qe.d()}}}function pp(Y,$,re){let qe,ze,{labelId:Ae,step:we}=$;return Y.$$set=tt=>{"labelId"in tt&&re(0,Ae=tt.labelId),"step"in tt&&re(1,we=tt.step)},Y.$$.update=()=>{2&Y.$$.dirty&&(re(2,qe=we.options.title),re(3,ze=we.options.cancelIcon))},[Ae,we,qe,ze]}class hp extends ma{constructor($){super(),ti(this,$,pp,mp,Ir,{labelId:0,step:1})}}function Ru(Y){let $;return{c(){$=Mr("div"),Vi($,"class","shepherd-text"),Vi($,"id",Y[1])},m(re,Ae){Ca(re,$,Ae),Y[3]($)},p(re,Ae){let[we]=Ae;2&we&&Vi($,"id",re[1])},i:Ja,o:Ja,d(re){re&&ir($),Y[3](null)}}}function ar(Y,$,re){let{descriptionId:Ae,element:we,step:qe}=$;return Hc(()=>{let{text:tt}=qe.options;fe(tt)&&(tt=tt.call(qe)),de(tt)?we.appendChild(tt):re(0,we.innerHTML=tt,we)}),Y.$$set=tt=>{"descriptionId"in tt&&re(1,Ae=tt.descriptionId),"element"in tt&&re(0,we=tt.element),"step"in tt&&re(2,qe=tt.step)},[we,Ae,qe,function ze(tt){Jl[tt?"unshift":"push"](()=>{we=tt,re(0,we)})}]}class zu extends ma{constructor($){super(),ti(this,$,ar,Ru,Ir,{descriptionId:1,element:0,step:2})}}function Gl(Y){let $,re;return $=new hp({props:{labelId:Y[1],step:Y[2]}}),{c(){yi($.$$.fragment)},m(Ae,we){Pr($,Ae,we),re=!0},p(Ae,we){const qe={};2&we&&(qe.labelId=Ae[1]),4&we&&(qe.step=Ae[2]),$.$set(qe)},i(Ae){re||(Ni($.$$.fragment,Ae),re=!0)},o(Ae){Ki($.$$.fragment,Ae),re=!1},d(Ae){Es($,Ae)}}}function br(Y){let $,re;return $=new zu({props:{descriptionId:Y[0],step:Y[2]}}),{c(){yi($.$$.fragment)},m(Ae,we){Pr($,Ae,we),re=!0},p(Ae,we){const qe={};1&we&&(qe.descriptionId=Ae[0]),4&we&&(qe.step=Ae[2]),$.$set(qe)},i(Ae){re||(Ni($.$$.fragment,Ae),re=!0)},o(Ae){Ki($.$$.fragment,Ae),re=!1},d(Ae){Es($,Ae)}}}function Yc(Y){let $,re;return $=new dp({props:{step:Y[2]}}),{c(){yi($.$$.fragment)},m(Ae,we){Pr($,Ae,we),re=!0},p(Ae,we){const qe={};4&we&&(qe.step=Ae[2]),$.$set(qe)},i(Ae){re||(Ni($.$$.fragment,Ae),re=!0)},o(Ae){Ki($.$$.fragment,Ae),re=!1},d(Ae){Es($,Ae)}}}function Fr(Y){let $,Ae,qe,tt,re=!xe(Y[2].options.title)||Y[2].options.cancelIcon&&Y[2].options.cancelIcon.enabled,we=!xe(Y[2].options.text),ze=Array.isArray(Y[2].options.buttons)&&Y[2].options.buttons.length,pt=re&&Gl(Y),xt=we&&br(Y),Bt=ze&&Yc(Y);return{c(){$=Mr("div"),pt&&pt.c(),Ae=Du(),xt&&xt.c(),qe=Du(),Bt&&Bt.c(),Vi($,"class","shepherd-content")},m(Pt,Nt){Ca(Pt,$,Nt),pt&&pt.m($,null),ts($,Ae),xt&&xt.m($,null),ts($,qe),Bt&&Bt.m($,null),tt=!0},p(Pt,Nt){let[kn]=Nt;4&kn&&(re=!xe(Pt[2].options.title)||Pt[2].options.cancelIcon&&Pt[2].options.cancelIcon.enabled),re?pt?(pt.p(Pt,kn),4&kn&&Ni(pt,1)):(pt=Gl(Pt),pt.c(),Ni(pt,1),pt.m($,Ae)):pt&&(Br(),Ki(pt,1,1,()=>{pt=null}),ol()),4&kn&&(we=!xe(Pt[2].options.text)),we?xt?(xt.p(Pt,kn),4&kn&&Ni(xt,1)):(xt=br(Pt),xt.c(),Ni(xt,1),xt.m($,qe)):xt&&(Br(),Ki(xt,1,1,()=>{xt=null}),ol()),4&kn&&(ze=Array.isArray(Pt[2].options.buttons)&&Pt[2].options.buttons.length),ze?Bt?(Bt.p(Pt,kn),4&kn&&Ni(Bt,1)):(Bt=Yc(Pt),Bt.c(),Ni(Bt,1),Bt.m($,null)):Bt&&(Br(),Ki(Bt,1,1,()=>{Bt=null}),ol())},i(Pt){tt||(Ni(pt),Ni(xt),Ni(Bt),tt=!0)},o(Pt){Ki(pt),Ki(xt),Ki(Bt),tt=!1},d(Pt){Pt&&ir($),pt&&pt.d(),xt&&xt.d(),Bt&&Bt.d()}}}function Yl(Y,$,re){let{descriptionId:Ae,labelId:we,step:qe}=$;return Y.$$set=ze=>{"descriptionId"in ze&&re(0,Ae=ze.descriptionId),"labelId"in ze&&re(1,we=ze.labelId),"step"in ze&&re(2,qe=ze.step)},[Ae,we,qe]}class Hu extends ma{constructor($){super(),ti(this,$,Yl,Fr,Ir,{descriptionId:0,labelId:1,step:2})}}function $c(Y){let $;return{c(){$=Mr("div"),Vi($,"class","shepherd-arrow"),Vi($,"data-popper-arrow","")},m(re,Ae){Ca(re,$,Ae)},d(re){re&&ir($)}}}function Yd(Y){let $,re,Ae,we,qe,ze,tt,pt,xt=Y[4].options.arrow&&Y[4].options.attachTo&&Y[4].options.attachTo.element&&Y[4].options.attachTo.on&&$c();Ae=new Hu({props:{descriptionId:Y[2],labelId:Y[3],step:Y[4]}});let Bt=[{"aria-describedby":we=xe(Y[4].options.text)?null:Y[2]},{"aria-labelledby":qe=Y[4].options.title?Y[3]:null},Y[1],{role:"dialog"},{tabindex:"0"}],Pt={};for(let Nt=0;Nt<Bt.length;Nt+=1)Pt=oA(Pt,Bt[Nt]);return{c(){$=Mr("div"),xt&&xt.c(),re=Du(),yi(Ae.$$.fragment),rp($,Pt),zl($,"shepherd-has-cancel-icon",Y[5]),zl($,"shepherd-has-title",Y[6]),zl($,"shepherd-element",!0)},m(Nt,kn){Ca(Nt,$,kn),xt&&xt.m($,null),ts($,re),Pr(Ae,$,null),Y[13]($),ze=!0,tt||(pt=Rc($,"keydown",Y[7]),tt=!0)},p(Nt,kn){let[yn]=kn;Nt[4].options.arrow&&Nt[4].options.attachTo&&Nt[4].options.attachTo.element&&Nt[4].options.attachTo.on?xt||(xt=$c(),xt.c(),xt.m($,re)):xt&&(xt.d(1),xt=null);const bi={};4&yn&&(bi.descriptionId=Nt[2]),8&yn&&(bi.labelId=Nt[3]),16&yn&&(bi.step=Nt[4]),Ae.$set(bi),rp($,Pt=function al(Y,$){const re={},Ae={},we={$$scope:1};let qe=Y.length;for(;qe--;){const ze=Y[qe],tt=$[qe];if(tt){for(const pt in ze)pt in tt||(Ae[pt]=1);for(const pt in tt)we[pt]||(re[pt]=tt[pt],we[pt]=1);Y[qe]=tt}else for(const pt in ze)we[pt]=1}for(const ze in Ae)ze in re||(re[ze]=void 0);return re}(Bt,[(!ze||20&yn&&we!==(we=xe(Nt[4].options.text)?null:Nt[2]))&&{"aria-describedby":we},(!ze||24&yn&&qe!==(qe=Nt[4].options.title?Nt[3]:null))&&{"aria-labelledby":qe},2&yn&&Nt[1],{role:"dialog"},{tabindex:"0"}])),zl($,"shepherd-has-cancel-icon",Nt[5]),zl($,"shepherd-has-title",Nt[6]),zl($,"shepherd-element",!0)},i(Nt){ze||(Ni(Ae.$$.fragment,Nt),ze=!0)},o(Nt){Ki(Ae.$$.fragment,Nt),ze=!1},d(Nt){Nt&&ir($),xt&&xt.d(),Es(Ae),Y[13](null),tt=!1,pt()}}}function Ju(Y){return Y.split(" ").filter($=>!!$.length)}function Vl(Y,$,re){let Nt,kn,yn,{classPrefix:Ae,element:we,descriptionId:qe,firstFocusableElement:ze,focusableElements:tt,labelId:pt,lastFocusableElement:xt,step:Bt,dataStepId:Pt}=$;return function lp(Y){sp().$$.on_mount.push(Y)}(()=>{re(1,Pt={[`data-${Ae}shepherd-step-id`]:Bt.id}),re(9,tt=we.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]')),re(8,ze=tt[0]),re(10,xt=tt[tt.length-1])}),Hc(()=>{yn!==Bt.options.classes&&function Wi(){(function ki(xn){if(Le(xn)){const ui=Ju(xn);ui.length&&we.classList.remove(...ui)}})(yn),yn=Bt.options.classes,function Hi(xn){if(Le(xn)){const ui=Ju(xn);ui.length&&we.classList.add(...ui)}}(yn)}()}),Y.$$set=xn=>{"classPrefix"in xn&&re(11,Ae=xn.classPrefix),"element"in xn&&re(0,we=xn.element),"descriptionId"in xn&&re(2,qe=xn.descriptionId),"firstFocusableElement"in xn&&re(8,ze=xn.firstFocusableElement),"focusableElements"in xn&&re(9,tt=xn.focusableElements),"labelId"in xn&&re(3,pt=xn.labelId),"lastFocusableElement"in xn&&re(10,xt=xn.lastFocusableElement),"step"in xn&&re(4,Bt=xn.step),"dataStepId"in xn&&re(1,Pt=xn.dataStepId)},Y.$$.update=()=>{16&Y.$$.dirty&&(re(5,Nt=Bt.options&&Bt.options.cancelIcon&&Bt.options.cancelIcon.enabled),re(6,kn=Bt.options&&Bt.options.title))},[we,Pt,qe,pt,Bt,Nt,kn,xn=>{const{tour:ui}=Bt;switch(xn.keyCode){case 9:if(0===tt.length){xn.preventDefault();break}xn.shiftKey?(document.activeElement===ze||document.activeElement.classList.contains("shepherd-element"))&&(xn.preventDefault(),xt.focus()):document.activeElement===xt&&(xn.preventDefault(),ze.focus());break;case 27:ui.options.exitOnEsc&&Bt.cancel();break;case 37:ui.options.keyboardNavigation&&ui.back();break;case 39:ui.options.keyboardNavigation&&ui.next()}},ze,tt,xt,Ae,()=>we,function Bn(xn){Jl[xn?"unshift":"push"](()=>{we=xn,re(0,we)})}]}class cl extends ma{constructor($){super(),ti(this,$,Vl,Yd,Ir,{classPrefix:11,element:0,descriptionId:2,firstFocusableElement:8,focusableElements:9,labelId:3,lastFocusableElement:10,step:4,dataStepId:1,getElement:12})}get getElement(){return this.$$.ctx[12]}}class Ci extends Ge{constructor($,re){return void 0===re&&(re={}),super($,re),this.tour=$,this.classPrefix=this.tour.options?mt(this.tour.options.classPrefix):"",this.styles=$.styles,this._resolvedAttachTo=null,nt(this),this._setOptions(re),this}cancel(){this.tour.cancel(),this.trigger("cancel")}complete(){this.tour.complete(),this.trigger("complete")}destroy(){(function iA(Y){Y.cleanup&&Y.cleanup(),Y.cleanup=null})(this),de(this.el)&&(this.el.remove(),this.el=null),this._updateStepTargetOnHide(),this.trigger("destroy")}getTour(){return this.tour}hide(){this.tour.modal.hide(),this.trigger("before-hide"),this.el&&(this.el.hidden=!0),this._updateStepTargetOnHide(),this.trigger("hide")}_resolveAttachToOptions(){return this._resolvedAttachTo=function e(Y){const $=Y.options.attachTo||{},re=Object.assign({},$);if(fe(re.element)&&(re.element=re.element.call(Y)),Le(re.element)){try{re.element=document.querySelector(re.element)}catch{}re.element||console.error(`The element for this Shepherd step was not found ${$.element}`)}return re}(this),this._resolvedAttachTo}_getResolvedAttachToOptions(){return null===this._resolvedAttachTo?this._resolveAttachToOptions():this._resolvedAttachTo}isOpen(){return!(!this.el||this.el.hidden)}show(){return fe(this.options.beforeShowPromise)?Promise.resolve(this.options.beforeShowPromise()).then(()=>this._show()):Promise.resolve(this._show())}updateStepOptions($){Object.assign(this.options,$),this.shepherdElementComponent&&this.shepherdElementComponent.$set({step:this})}getElement(){return this.el}getTarget(){return this.target}_createTooltipContent(){return this.shepherdElementComponent=new cl({target:this.tour.options.stepsContainer||document.body,props:{classPrefix:this.classPrefix,descriptionId:`${this.id}-description`,labelId:`${this.id}-label`,step:this,styles:this.styles}}),this.shepherdElementComponent.getElement()}_scrollTo($){const{element:re}=this._getResolvedAttachToOptions();fe(this.options.scrollToHandler)?this.options.scrollToHandler(re):function ne(Y){return Y instanceof Element}(re)&&"function"==typeof re.scrollIntoView&&re.scrollIntoView($)}_getClassOptions($){const re=this.tour&&this.tour.options&&this.tour.options.defaultStepOptions,we=re&&re.classes?re.classes:"",qe=[...($.classes?$.classes:"").split(" "),...we.split(" ")],ze=new Set(qe);return Array.from(ze).join(" ").trim()}_setOptions($){void 0===$&&($={});let re=this.tour&&this.tour.options&&this.tour.options.defaultStepOptions;re=ee({},re||{}),this.options=Object.assign({arrow:!0},re,$,function nA(Y,$){return{floatingUIOptions:ee(Y.floatingUIOptions||{},$.floatingUIOptions||{})}}(re,$));const{when:Ae}=this.options;this.options.classes=this._getClassOptions($),this.destroy(),this.id=this.options.id||`step-${wt()}`,Ae&&Object.keys(Ae).forEach(we=>{this.on(we,Ae[we],this)})}_setupElements(){xe(this.el)||this.destroy(),this.el=this._createTooltipContent(),this.options.advanceOn&&function Ct(Y){const{event:$,selector:re}=Y.options.advanceOn||{};if(!$)return console.error("advanceOn was defined, but no event name was passed.");{const Ae=function ht(Y,$){return re=>{if($.isOpen()){const Ae=$.el&&re.currentTarget===$.el;(!xe(Y)&&re.currentTarget.matches(Y)||Ae)&&$.tour.next()}}}(re,Y);let we;try{we=document.querySelector(re)}catch{}if(!xe(re)&&!we)return console.error(`No element was found for the selector supplied to advanceOn: ${re}`);we?(we.addEventListener($,Ae),Y.on("destroy",()=>we.removeEventListener($,Ae))):(document.body.addEventListener($,Ae,!0),Y.on("destroy",()=>document.body.removeEventListener($,Ae,!0)))}}(this),tA(this)}_show(){this.trigger("before-show"),this._resolveAttachToOptions(),this._setupElements(),this.tour.modal||this.tour._setupModal(),this.tour.modal.setupForStep(this),this._styleTargetElementForStep(this),this.el.hidden=!1,this.options.scrollTo&&setTimeout(()=>{this._scrollTo(this.options.scrollTo)}),this.el.hidden=!1;const $=this.shepherdElementComponent.getElement(),re=this.target||document.body;re.classList.add(`${this.classPrefix}shepherd-enabled`),re.classList.add(`${this.classPrefix}shepherd-target`),$.classList.add("shepherd-enabled"),this.trigger("show")}_styleTargetElementForStep($){const re=$.target;re&&($.options.highlightClass&&re.classList.add($.options.highlightClass),re.classList.remove("shepherd-target-click-disabled"),!1===$.options.canClickTarget&&re.classList.add("shepherd-target-click-disabled"))}_updateStepTargetOnHide(){const $=this.target||document.body;this.options.highlightClass&&$.classList.remove(this.options.highlightClass),$.classList.remove("shepherd-target-click-disabled",`${this.classPrefix}shepherd-enabled`,`${this.classPrefix}shepherd-target`)}}function Vd(Y){let $,re,Ae,we,qe;return{c(){$=op("svg"),re=op("path"),Vi(re,"d",Y[2]),Vi($,"class",Ae=(Y[1]?"shepherd-modal-is-visible":"")+" shepherd-modal-overlay-container")},m(ze,tt){Ca(ze,$,tt),ts($,re),Y[11]($),we||(qe=Rc($,"touchmove",Y[3]),we=!0)},p(ze,tt){let[pt]=tt;4&pt&&Vi(re,"d",ze[2]),2&pt&&Ae!==(Ae=(ze[1]?"shepherd-modal-is-visible":"")+" shepherd-modal-overlay-container")&&Vi($,"class",Ae)},i:Ja,o:Ja,d(ze){ze&&ir($),Y[11](null),we=!1,qe()}}}function Ms(Y){if(!Y)return null;const re=Y instanceof HTMLElement&&window.getComputedStyle(Y).overflowY;return"hidden"!==re&&"visible"!==re&&Y.scrollHeight>=Y.clientHeight?Y:Ms(Y.parentElement)}function sA(Y,$,re){let{element:Ae,openingProperties:we}=$;wt();let ze,tt,qe=!1;function xt(){re(4,we={width:0,height:0,x:0,y:0,r:0})}function Bt(){re(1,qe=!1),ki()}function Pt(Bn,xn,ui,Go){if(void 0===Bn&&(Bn=0),void 0===xn&&(xn=0),Go){const{y:Zo,height:bo}=function Ka(Y,$){const re=Y.getBoundingClientRect();let Ae=re.y||re.top,we=re.bottom||Ae+re.height;if($){const ze=$.getBoundingClientRect(),tt=ze.y||ze.top,pt=ze.bottom||tt+ze.height;Ae=Math.max(Ae,tt),we=Math.min(we,pt)}return{y:Ae,height:Math.max(we-Ae,0)}}(Go,ui),{x:as,width:Xl,left:Bs}=Go.getBoundingClientRect();re(4,we={width:Xl+2*Bn,height:bo+2*Bn,x:(as||Bs)-Bn,y:Zo-Bn,r:xn})}else xt()}function kn(){re(1,qe=!0)}xt();const yn=Bn=>{Bn.preventDefault()};function ki(){ze&&(cancelAnimationFrame(ze),ze=void 0),window.removeEventListener("touchmove",yn,{passive:!1})}return Y.$$set=Bn=>{"element"in Bn&&re(0,Ae=Bn.element),"openingProperties"in Bn&&re(4,we=Bn.openingProperties)},Y.$$.update=()=>{16&Y.$$.dirty&&re(2,tt=function Wl(Y){let{width:$,height:re,x:Ae=0,y:we=0,r:qe=0}=Y;const{innerWidth:ze,innerHeight:tt}=window,{topLeft:pt=0,topRight:xt=0,bottomRight:Bt=0,bottomLeft:Pt=0}="number"==typeof qe?{topLeft:qe,topRight:qe,bottomRight:qe,bottomLeft:qe}:qe;return`M${ze},${tt}H0V0H${ze}V${tt}ZM${Ae+pt},${we}a${pt},${pt},0,0,0-${pt},${pt}V${re+we-Pt}a${Pt},${Pt},0,0,0,${Pt},${Pt}H${$+Ae-Bt}a${Bt},${Bt},0,0,0,${Bt}-${Bt}V${we+xt}a${xt},${xt},0,0,0-${xt}-${xt}Z`}(we))},[Ae,qe,tt,Bn=>{Bn.stopPropagation()},we,()=>Ae,xt,Bt,Pt,function Nt(Bn){ki(),Bn.tour.options.useModalOverlay?(function Hi(Bn){const{modalOverlayOpeningPadding:xn,modalOverlayOpeningRadius:ui}=Bn.options,Go=Ms(Bn.target),Zo=()=>{ze=void 0,Pt(xn,ui,Go,Bn.target),ze=requestAnimationFrame(Zo)};Zo(),function Wi(){window.addEventListener("touchmove",yn,{passive:!1})}()}(Bn),kn()):Bt()},kn,function so(Bn){Jl[Bn?"unshift":"push"](()=>{Ae=Bn,re(0,Ae)})}]}class os extends ma{constructor($){super(),ti(this,$,sA,Vd,Ir,{element:0,openingProperties:4,getElement:5,closeModalOpening:6,hide:7,positionModal:8,setupForStep:9,show:10})}get getElement(){return this.$$.ctx[5]}get closeModalOpening(){return this.$$.ctx[6]}get hide(){return this.$$.ctx[7]}get positionModal(){return this.$$.ctx[8]}get setupForStep(){return this.$$.ctx[9]}get show(){return this.$$.ctx[10]}}const zi=new Ge,aa=typeof window>"u";class Gu{constructor(){}}function Xc(Y){const{classes:$,disabled:re,label:Ae,secondary:we,type:qe,text:ze}=Y;if(!qe)return Y;if(-1===["back","cancel","next"].indexOf(qe))throw new Error("'type' property must be one of 'back', 'cancel', or 'next'");return{action:this[qe].bind(this),classes:$,disabled:re,label:Ae,secondary:we,text:ze}}Object.assign(zi,aa?{Tour:Gu,Step:Gu}:{Tour:class Ku extends Ge{constructor($){return void 0===$&&($={}),super($),nt(this),this.options=Object.assign({},{exitOnEsc:!0,keyboardNavigation:!0},$),this.classPrefix=mt(this.options.classPrefix),this.steps=[],this.addSteps(this.options.steps),["active","cancel","complete","inactive","show","start"].map(we=>{(qe=>{this.on(qe,ze=>{(ze=ze||{}).tour=this,zi.trigger(qe,ze)})})(we)}),this._setTourID(),this}addStep($,re){let Ae=$;return Ae instanceof Ci?Ae.tour=this:Ae=new Ci(this,Ae),xe(re)?this.steps.push(Ae):this.steps.splice(re,0,Ae),Ae}addSteps($){return Array.isArray($)&&$.forEach(re=>{this.addStep(re)}),this}back(){const $=this.steps.indexOf(this.currentStep);this.show($-1,!1)}cancel(){this.options.confirmCancel?window.confirm(this.options.confirmCancelMessage||"Are you sure you want to stop the tour?")&&this._done("cancel"):this._done("cancel")}complete(){this._done("complete")}getById($){return this.steps.find(re=>re.id===$)}getCurrentStep(){return this.currentStep}hide(){const $=this.getCurrentStep();if($)return $.hide()}isActive(){return zi.activeTour===this}next(){const $=this.steps.indexOf(this.currentStep);$===this.steps.length-1?this.complete():this.show($+1,!0)}removeStep($){const re=this.getCurrentStep();this.steps.some((Ae,we)=>{if(Ae.id===$)return Ae.isOpen()&&Ae.hide(),Ae.destroy(),this.steps.splice(we,1),!0}),re&&re.id===$&&(this.currentStep=void 0,this.steps.length?this.show(0):this.cancel())}show($,re){void 0===$&&($=0),void 0===re&&(re=!0);const Ae=Le($)?this.getById($):this.steps[$];Ae&&(this._updateStateBeforeShow(),fe(Ae.options.showOn)&&!Ae.options.showOn()?this._skipStep(Ae,re):(this.trigger("show",{step:Ae,previous:this.currentStep}),this.currentStep=Ae,Ae.show()))}start(){this.trigger("start"),this.focusedElBeforeOpen=document.activeElement,this.currentStep=null,this._setupModal(),this._setupActiveTour(),this.next()}_done($){const re=this.steps.indexOf(this.currentStep);if(Array.isArray(this.steps)&&this.steps.forEach(Ae=>Ae.destroy()),function Ap(Y){if(Y){const{steps:$}=Y;$.forEach(re=>{re.options&&!1===re.options.canClickTarget&&re.options.attachTo&&re.target instanceof HTMLElement&&re.target.classList.remove("shepherd-target-click-disabled")})}}(this),this.trigger($,{index:re}),zi.activeTour=null,this.trigger("inactive",{tour:this}),this.modal&&this.modal.hide(),("cancel"===$||"complete"===$)&&this.modal){const Ae=document.querySelector(".shepherd-modal-overlay-container");Ae&&Ae.remove()}de(this.focusedElBeforeOpen)&&this.focusedElBeforeOpen.focus()}_setupActiveTour(){this.trigger("active",{tour:this}),zi.activeTour=this}_setupModal(){this.modal=new os({target:this.options.modalContainer||document.body,props:{classPrefix:this.classPrefix,styles:this.styles}})}_skipStep($,re){const Ae=this.steps.indexOf($);Ae===this.steps.length-1?this.complete():this.show(re?Ae+1:Ae-1,re)}_updateStateBeforeShow(){this.currentStep&&this.currentStep.hide(),this.isActive()||this._setupActiveTour()}_setTourID(){this.id=`${this.options.tourName||"tour"}--${wt()}`}},Step:Ci});let Ti=(()=>{class Y{constructor(){this.confirmCancel=!1,this.confirmCancelMessage=null,this.defaultStepOptions={},this.errorTitle=null,this.isActive=!1,this.keyboardNavigation=!0,this.messageForUser=null,this.modal=!1,this.requiredElements=[],this.tourName=void 0,this.tourObject=null,this.exitOnEsc=!0}back(){this.tourObject.back()}cancel(){this.tourObject.cancel()}complete(){this.tourObject.complete()}hide(){this.tourObject.hide()}next(){this.tourObject.next()}show(re){this.tourObject.show(re)}start(){this.isActive=!0,this.tourObject.start()}onTourFinish(re){this.isActive=!1}addSteps(re){this._initialize();const Ae=this.tourObject;if(re&&Array.isArray(re)&&0!==re.length){if(!this.requiredElementsPresent())return void Ae.addStep({buttons:[{text:"Exit",action:Ae.cancel}],id:"error",title:this.errorTitle,text:[this.messageForUser]});re.forEach(we=>{we.buttons&&(we.buttons=we.buttons.map(Xc.bind(this),this)),Ae.addStep(we)})}}requiredElementsPresent(){let re=!0;return this.requiredElements.forEach(Ae=>{const we=document.querySelector(Ae.selector);re&&(!we||function Ls(Y){return 0===Y.offsetWidth&&0===Y.offsetHeight}(we))&&(re=!1,this.errorTitle=Ae.title,this.messageForUser=Ae.message)}),re}_initialize(){const re=new zi.Tour({confirmCancel:this.confirmCancel,confirmCancelMessage:this.confirmCancelMessage,defaultStepOptions:this.defaultStepOptions,keyboardNavigation:this.keyboardNavigation,tourName:this.tourName,useModalOverlay:this.modal,exitOnEsc:this.exitOnEsc});re.on("complete",this.onTourFinish.bind(this,"complete")),re.on("cancel",this.onTourFinish.bind(this,"cancel")),this.tourObject=re}}return Y.\u0275fac=function(re){return new(re||Y)},Y.\u0275prov=F.Yz7({token:Y,factory:Y.\u0275fac,providedIn:"root"}),Y})()},71002:(Ne,H,I)=>{"use strict";function F(h){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(U){return typeof U}:function(U){return U&&"function"==typeof Symbol&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U})(h)}I.d(H,{Z:()=>F})}}]);