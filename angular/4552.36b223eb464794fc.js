"use strict";(self.webpackChunkBalacoClient=self.webpackChunkBalacoClient||[]).push([[4552],{47635:(Mt,St,r)=>{r.d(St,{c:()=>Y});var g=r(10936),o=r(66257),e=r(48725),A=r(59640),t=r(37497),at=r(27208),l=r(18586),m=r(48891),n=r(65162),ut=r(95624),kt=r(46899),q=r(25898),tt=r(54460),pt=r(47712),L=r(18718),Q=r(22613),V=r(69135),W=r(32099),X=r(5800),st=r(10123),J=r(15343),et=r(76975);const jt=y=>({"text-primary stroke-width-2.5":y}),vt=y=>({"text-primary stroke-width-2.5":y,"-mt-2":!0});function Tt(y,$){1&y&&(m.j41(0,"div",10),m.EFF(1),m.nI1(2,"mytranslate"),m.k0s()),2&y&&(m.R7$(),m.SpI(" ",m.bMT(2,1,"lang_core_huong_dan_chon_vao_bang_va_vuot_sang_trai_de_xem_cac_thong_tin_khac")," "))}function rt(y,$){if(1&y){const S=m.RV6();m.j41(0,"div",11)(1,"div",12)(2,"azt-search-box",13),m.nI1(3,"mytranslate"),m.bIt("onSearch",function(lt){m.eBV(S);const Ot=m.XpG();return m.Njj(Ot.onSearchBox(lt.searchObj))}),m.k0s()()()}2&y&&(m.R7$(2),m.Y8G("isServerSearch",!0)("placeholder",m.bMT(3,2,"lang_core_tim_theo_ten_phone_email")))}function wt(y,$){if(1&y&&m.nrm(0,"azt-loading-effect",15),2&y){const S=m.XpG(2);m.Y8G("currentStatusObj",S.statusObj)}}function Pt(y,$){if(1&y&&(m.j41(0,"div",25),m.nrm(1,"lucide-icon",26)(2,"lucide-icon",27),m.k0s()),2&y){const S=m.XpG().$implicit,z=m.XpG(3);m.R7$(),m.Y8G("ngClass",m.eq3(2,jt,S.typeFieldSort===z.typeFieldSort.asc)),m.R7$(),m.Y8G("ngClass",m.eq3(4,vt,S.typeFieldSort===z.typeFieldSort.desc))}}function U(y,$){if(1&y){const S=m.RV6();m.j41(0,"th",22)(1,"div",23),m.bIt("click",function(){const lt=m.eBV(S).$implicit,Ot=m.XpG(3);return m.Njj(Ot.sortTableByFieldName(lt))}),m.EFF(2),m.nI1(3,"mytranslate"),m.DNE(4,Pt,3,6,"div",24),m.k0s()()}if(2&y){const S=$.$implicit;m.R7$(),m.Aen(S.customStyle),m.HbH(S.customClassCss),m.R7$(),m.SpI(" ",m.bMT(3,6,S.key)," "),m.R7$(2),m.Y8G("ngIf",!S.ignore)}}function It(y,$){if(1&y){const S=m.RV6();m.j41(0,"tr",28)(1,"td"),m.nrm(2,"azt-student-info-box",29),m.k0s(),m.j41(3,"td",30),m.EFF(4),m.nI1(5,"formatStudentCodeToNumber"),m.k0s(),m.j41(6,"td",30),m.EFF(7),m.nI1(8,"formatOnlyDateByUserUnitPipe"),m.k0s(),m.j41(9,"td",30)(10,"div",31),m.nrm(11,"textarea",32),m.nI1(12,"mytranslate"),m.j41(13,"span",33,1),m.nI1(15,"mytranslate"),m.bIt("click",function(){const lt=m.eBV(S).$implicit,Ot=m.XpG(3);return m.Njj(Ot.showAllComment(lt))}),m.nrm(16,"lucide-icon",34),m.k0s()()()()}if(2&y){const S=$.$implicit,z=m.sdS(14);m.Y8G("id","row_student_"+S.id),m.R7$(2),m.Y8G("name",S.fullName)("parentFullName",S.parentFullName)("parentId",S.parentId)("phone",S.phone)("parentPhone",S.parentPhone)("avatar",S.avatar)("gender",S.gender)("hasUser",S.hasUser)("schoolName",S.schoolName)("classrooms",S.classrooms)("joinedAt",S.joinedAt)("identificationNumber",S.identificationNumber),m.R7$(2),m.JRh(S.identificationNumber?m.i5U(5,22,S.identificationNumber,6):""),m.R7$(3),m.JRh(m.bMT(8,25,null!=S.assessments&&S.assessments[0]?null==S.assessments||null==S.assessments[0]?null:S.assessments[0].createdAt:"")),m.R7$(4),m.FS9("placeholder",m.bMT(12,27,"lang_azt_enter_comment")),m.Y8G("id","assessment_content_"+S.id)("disabled",!0)("value",S.lastAssessmentComment),m.R7$(2),m.FS9("matTooltip",m.bMT(15,29,"lang_student_show_all_comment")),m.Y8G("isDisabledTooltip",!1)("matTooltipDisabled",z.isDisabled)}}function ct(y,$){if(1&y){const S=m.RV6();m.j41(0,"azt-paging",38),m.bIt("goToPaginationPage",function(lt){m.eBV(S);const Ot=m.XpG(4);return m.Njj(Ot.setPageStudent(lt))}),m.k0s()}if(2&y){const S=m.XpG(4);m.Y8G("pageObj",S.pageObj)}}function Z(y,$){if(1&y&&(m.j41(0,"div",39),m.EFF(1),m.nI1(2,"mytranslate"),m.k0s()),2&y){const S=m.XpG(4);m.R7$(),m.Lme("",S.totalStudent," ",m.bMT(2,2,"lang_notify_list_students"),"")}}function gt(y,$){if(1&y&&(m.j41(0,"div",35),m.nrm(1,"div"),m.DNE(2,ct,1,1,"azt-paging",36)(3,Z,3,4,"div",37),m.k0s()),2&y){const S=m.XpG(3);m.R7$(2),m.Y8G("ngIf",S.totalStudent>S.pageObj.pageSize),m.R7$(),m.Y8G("ngIf",!S.isStudent)}}function Et(y,$){if(1&y&&(m.j41(0,"div",16)(1,"drag-scroll")(2,"table",17)(3,"thead")(4,"tr",18),m.DNE(5,U,5,8,"th",19),m.k0s()(),m.j41(6,"tbody"),m.DNE(7,It,17,31,"tr",20),m.k0s()()()(),m.DNE(8,gt,4,2,"div",21)),2&y){const S=m.XpG(2);m.R7$(5),m.Y8G("ngForOf",S.sortTableByFieldNameService.fieldNameList),m.R7$(2),m.Y8G("ngForOf",S.listStudent),m.R7$(),m.Y8G("ngIf",S.listStudent&&S.totalStudent&&S.totalStudent>0)}}function it(y,$){if(1&y&&(m.j41(0,"div",5),m.DNE(1,wt,1,1,"azt-loading-effect",14)(2,Et,9,3,"ng-template",null,0,m.C5r),m.k0s()),2&y){const S=m.sdS(3),z=m.XpG();m.R7$(),m.Y8G("ngIf",z.statusObj.loading)("ngIfElse",S)}}function dt(y,$){if(1&y&&m.nrm(0,"azt-loading-effect",15),2&y){const S=m.XpG(2);m.Y8G("currentStatusObj",S.statusObj)}}function _t(y,$){1&y&&(m.j41(0,"div",41),m.EFF(1),m.nI1(2,"mytranslate"),m.k0s()),2&y&&(m.R7$(),m.SpI(" ",m.bMT(2,1,"lang_azt_no_comments_yet")," "))}function nt(y,$){if(1&y&&(m.j41(0,"div",44)(1,"div",45)(2,"p",46),m.EFF(3),m.nI1(4,"mytranslate"),m.nI1(5,"formatOnlyDateByUserUnitPipe"),m.k0s()(),m.nrm(6,"div",47),m.nI1(7,"safeNormalHtmlContent"),m.k0s()),2&y){const S=$.$implicit;m.R7$(3),m.Lme("",m.bMT(4,3,"lang_student_add_comment_date"),": ",m.bMT(5,5,S.updatedAt),""),m.R7$(3),m.Y8G("innerHTML",m.bMT(7,7,S.comment),m.npT)}}function ot(y,$){if(1&y&&(m.j41(0,"div",42),m.DNE(1,nt,8,9,"div",43),m.k0s()),2&y){const S=m.XpG(3);m.R7$(),m.Y8G("ngForOf",null==S.firstStudent?null:S.firstStudent.assessments)}}function Ct(y,$){if(1&y&&m.DNE(0,_t,3,3,"div",40)(1,ot,2,1,"ng-template",null,3,m.C5r),2&y){const S=m.sdS(2),z=m.XpG(2);m.Y8G("ngIf",!(null!=z.firstStudent&&z.firstStudent.assessments&&null!=z.firstStudent&&null!=z.firstStudent.assessments&&z.firstStudent.assessments.length))("ngIfElse",S)}}function Dt(y,$){if(1&y&&(m.j41(0,"div",5),m.DNE(1,dt,1,1,"azt-loading-effect",14)(2,Ct,3,2,"ng-template",null,2,m.C5r),m.k0s()),2&y){const S=m.sdS(3),z=m.XpG();m.R7$(),m.Y8G("ngIf",z.statusObj.loading)("ngIfElse",S)}}let Y=(()=>{var y;class $ extends A.H{onSearchBox(z){this.searchContentObj=z,this.getData()}showAllComment(z){this.sAztDialogService.open(l.U,{width:"700px",restoreFocus:!1,data:{student:z,isTeacher:!1}}).afterClosed().subscribe(lt=>{lt&&this.getData()})}setPageStudent(z){this.myNavigationWithQueryString("/admin/student/classroom-details/"+this.classroomId+"/6","?page="+z),this.pageObj.setPageNumber(z),this.getData()}sortTableByFieldName(z){z.ignore||(this.orderObj=this.sortTableByFieldNameService.convertDataSort(z),this.getData())}getData(){this.initStatusObj(),this.waitDestroy(this.studentService.apiStudentsListPost({page:this.pageObj.page,size:this.pageObj.pageSize,markMonth:this.dataFilter?.monthSelected,markYear:this.dataFilter?.yearSelected,name:this.searchContentObj.searchContent,classroomId:this.classroomId,getBook:!1,getMark:!1,getPayment:!1,getAttendance:!1,me:this.isStudent,getAssessment:!0,order:this.orderObj}).subscribe({next:lt=>{lt.list.length&&(this.listStudent=[]),this.totalStudent=lt.total,lt.list.forEach(Ot=>{let Lt=this.sAztAssessmentStudentService.getLastAssessmentStudent(Ot);this.listStudent.push({...Ot,commentControl:new g.gE({id:new g.MJ(0,{nonNullable:!0}),updatedAt:new g.MJ(Lt?.updatedAt?.toString()??"",{nonNullable:!0}),comment:new g.MJ(Lt?.comment??"",{nonNullable:!0}),isEditted:new g.MJ(!1,{nonNullable:!0})}),listCommentControl:this.sAztAssessmentStudentService.makeListFormArrayComment(Ot.assessments),editComment:!1}),this.firstStudent=this.listStudent?.[0]?this.listStudent[0]:void 0,this.firstStudent=this.convertBreakLine(this.firstStudent)}),this.totalStudent=lt.total,this.pageObj.setTotalPages(this.totalStudent),this.successStatusObj()},error:lt=>{this.errorStatusObj(lt.error.message,!0)}}))}convertBreakLine(z){if(!z)return;const lt=z.assessments?.map(Ot=>({...Ot,comment:Ot.comment?.replace(/\n/g,"<br/>")}));return{...z,assessments:lt}}initFieldNameList(){return[{fieldName:"fullName",key:"lang_auto_ho_va_ten",ignore:!1,typeFieldSort:o.H.none,customClassCss:"flex items-center whitespace-nowrap"},{fieldName:"identificationNumber",key:"lang_auto_so_bao_danh",ignore:!1,typeFieldSort:o.H.none,customClassCss:"flex items-center justify-center whitespace-nowrap"},{fieldName:"lastAssessmentDate",key:"lang_azt_comments_date",ignore:!1,typeFieldSort:o.H.none,customClassCss:"flex items-center justify-center whitespace-nowrap"},{fieldName:"lastAssessmentComment",key:"lang_azt_comments_consciousness_and_academic_performance",ignore:!0,typeFieldSort:o.H.none,customClassCss:"flex items-center justify-center whitespace-nowrap"}]}ngOnInit(){super.ngOnInit(),this.sortTableByFieldNameService.setFieldNameList(this.initFieldNameList()),this.classroomId=Number(this.commonService.getMyParam(this.activeRoute,"id")),this.pageObj.setPageNumber(Number(this.commonService.getMyQueryParam("page")??"1")),this.getData()}constructor(z,lt,Ot,Lt,Vt){super(),this.activeRoute=z,this.studentService=lt,this.sAztDialogService=Ot,this.sAztAssessmentStudentService=Lt,this.sortTableByFieldNameService=Vt,this.classroomId=0,this.searchContentObj=new at.Z,this.pageObj=new t.d(50),this.listStudent=[],this.totalStudent=0,this.typeFieldSort=o.H}}return(y=$).\u0275fac=function(z){return new(z||y)(m.rXU(n.nX),m.rXU(ut.b0),m.rXU(kt.i),m.rXU(q.n),m.rXU(e.s))},y.\u0275cmp=m.VBU({type:y,selectors:[["app-assessment-board"]],inputs:{isStudent:"isStudent"},features:[m.Jv_([e.s]),m.Vt3],decls:9,vars:7,consts:[["doneLoading",""],["c","isDisabled"],["doneLoadingStudent",""],["hasData",""],[1,"grid","grid-cols-12","mt-5"],[1,"col-span-12"],[1,"text-xl","font-medium"],["class","mt-1",4,"ngIf"],["class","col-span-12 lg:col-span-12 2xl:col-span-12 mt-4",4,"ngIf"],["class","col-span-12",4,"ngIf"],[1,"mt-1"],[1,"col-span-12","lg:col-span-12","2xl:col-span-12","mt-4"],[1,"flex","flex-col","sm:flex-row"],[3,"onSearch","isServerSearch","placeholder"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[1,"intro-y"],["drag-scroll-item","",1,"table","table-report","mt-2",2,"white-space","initial","display","table"],[1,"box"],["class","cursor-pointer",4,"ngFor","ngForOf"],[3,"id",4,"ngFor","ngForOf"],["class","flex justify-between items-center mt-5",4,"ngIf"],[1,"cursor-pointer"],["azt-track-service","assesment-board-oI-Jn2-vQ",3,"click"],["class","flex items-center flex-col ml-2",4,"ngIf"],[1,"flex","items-center","flex-col","ml-2"],["name","chevron-up","size","16",3,"ngClass"],["name","chevron-down","size","16",3,"ngClass"],[3,"id"],[3,"name","parentFullName","parentId","phone","parentPhone","avatar","gender","hasUser","schoolName","classrooms","joinedAt","identificationNumber"],[1,"text-center","capitalize"],[1,"flex","items-center"],["type","text",1,"form-control",2,"min-width","80px",3,"id","disabled","placeholder","value"],[1,"w-6","h-6","ml-4","inline-block","clickable",3,"click","matTooltip","isDisabledTooltip","matTooltipDisabled"],["name","history","size","24"],[1,"flex","justify-between","items-center","mt-5"],[3,"pageObj","goToPaginationPage",4,"ngIf"],["class","flex justify-end",4,"ngIf"],[3,"goToPaginationPage","pageObj"],[1,"flex","justify-end"],["class","mt-2 py-3 px-5 mb-3 text-center","style","height: 55px",4,"ngIf","ngIfElse"],[1,"mt-2","py-3","px-5","mb-3","text-center",2,"height","55px"],[1,"py-3","px-5","box","mt-4"],["class","mt-4",4,"ngFor","ngForOf"],[1,"mt-4"],[1,"flex","mb-2",2,"align-items","center"],[1,"font-bold","mb-0"],[1,"box","bg-slate-200","dark:bg-darkmode-400","p-2",3,"innerHTML"]],template:function(z,lt){1&z&&(m.j41(0,"div",4)(1,"div",5)(2,"h3",6),m.EFF(3),m.nI1(4,"mytranslate"),m.k0s(),m.DNE(5,Tt,3,3,"div",7),m.k0s(),m.DNE(6,rt,4,4,"div",8)(7,it,4,2,"div",9)(8,Dt,4,2,"div",9),m.k0s()),2&z&&(m.R7$(3),m.JRh(m.bMT(4,5,"lang_azt_comments")),m.R7$(2),m.Y8G("ngIf",lt.isMobileDevice&&lt.listStudent.length>0&&!lt.isStudent),m.R7$(),m.Y8G("ngIf",!lt.isStudent),m.R7$(),m.Y8G("ngIf",!lt.isStudent),m.R7$(),m.Y8G("ngIf",lt.isStudent))},dependencies:[tt.YU,tt.Sq,tt.bT,pt.oV,L.K,Q.q,V.f,W.W,X.B,st.jd,st.Ew,J.WGl,et.wp,et._y,et.Po,et.vv],encapsulation:2}),$})()},33791:(Mt,St,r)=>{r.d(St,{E:()=>Dt});var g=r(10127),o=r(66257),e=r(48725),A=r(59640),t=r(37497),at=r(27208),l=r(48891),m=r(65162),n=r(46899),ut=r(95624),kt=r(54460),q=r(18718),tt=r(22613),pt=r(32099),L=r(5800),Q=r(10123),V=r(15343),W=r(85127),X=r(76975);const st=()=>[],J=Y=>({"text-primary stroke-width-2.5":Y}),et=Y=>({"text-primary stroke-width-2.5":Y,"-mt-2":!0});function jt(Y,y){1&Y&&(l.j41(0,"div",7),l.EFF(1),l.nI1(2,"mytranslate"),l.k0s()),2&Y&&(l.R7$(),l.SpI(" ",l.bMT(2,1,"lang_core_huong_dan_chon_vao_bang_va_vuot_sang_trai_de_xem_cac_thong_tin_khac")," "))}function vt(Y,y){if(1&Y&&(l.j41(0,"div",13),l.nrm(1,"azt-loading-effect",14),l.k0s()),2&Y){const $=l.XpG(2);l.R7$(),l.Y8G("currentStatusObj",$.statusObj)}}function Tt(Y,y){1&Y&&(l.j41(0,"div",20),l.EFF(1),l.nI1(2,"mytranslate"),l.k0s()),2&Y&&(l.R7$(),l.SpI(" ",l.bMT(2,1,"lang_student_classroom_list_detail_not_student")," "))}function rt(Y,y){if(1&Y&&(l.j41(0,"div",29),l.nrm(1,"lucide-icon",30)(2,"lucide-icon",31),l.k0s()),2&Y){const $=l.XpG().$implicit,S=l.XpG(5);l.R7$(),l.Y8G("ngClass",l.eq3(2,J,$.typeFieldSort===S.typeFieldSort.asc)),l.R7$(),l.Y8G("ngClass",l.eq3(4,et,$.typeFieldSort===S.typeFieldSort.desc))}}function wt(Y,y){if(1&Y){const $=l.RV6();l.j41(0,"th",26)(1,"div",27),l.bIt("click",function(){const z=l.eBV($).$implicit,lt=l.XpG(5);return l.Njj(lt.sortTableByFieldName(z))}),l.EFF(2),l.nI1(3,"mytranslate"),l.DNE(4,rt,3,6,"div",28),l.k0s()()}if(2&Y){const $=y.$implicit;l.R7$(),l.Aen($.customStyle),l.HbH($.customClassCss),l.R7$(),l.SpI(" ",l.bMT(3,6,$.key)," "),l.R7$(2),l.Y8G("ngIf",!$.ignore)}}function Pt(Y,y){1&Y&&(l.j41(0,"span"),l.EFF(1,"/"),l.k0s())}function U(Y,y){if(1&Y&&(l.j41(0,"span"),l.EFF(1),l.DNE(2,Pt,2,0,"span",5),l.EFF(3),l.k0s()),2&Y){const $=l.XpG().$implicit;l.R7$(),l.SpI(" ",$.lastMonthPaid," "),l.R7$(),l.Y8G("ngIf",$.lastMonthPaid),l.R7$(),l.SpI(" ",$.lastYearPaid," ")}}function It(Y,y){1&Y&&(l.j41(0,"span",38),l.EFF(1),l.nI1(2,"mytranslate"),l.k0s()),2&Y&&(l.R7$(),l.SpI(" ",l.bMT(2,1,"lang_core_hoc_thu")," "))}function ct(Y,y){if(1&Y){const $=l.RV6();l.j41(0,"tr")(1,"td",32),l.bIt("click",function(){const z=l.eBV($).$implicit,lt=l.XpG(5);return l.Njj(lt.addOrEditTuitionFee(z))}),l.nrm(2,"azt-student-info-box",33),l.k0s(),l.j41(3,"td",34),l.EFF(4),l.nI1(5,"formatStudentCodeToNumber"),l.k0s(),l.j41(6,"td",35),l.EFF(7),l.k0s(),l.j41(8,"td",36),l.DNE(9,U,4,3,"span",5)(10,It,3,3,"span",37),l.k0s()()}if(2&Y){let $;const S=y.$implicit;l.R7$(2),l.Y8G("name",S.fullName)("avatar",S.avatar)("gender",S.gender)("schoolName",S.schoolName)("hasUser",S.hasUser)("classrooms",S.classrooms)("joinedAt",S.joinedAt)("phone",S.phone)("identificationNumber",S.identificationNumber),l.R7$(2),l.JRh(S.identificationNumber?l.i5U(5,13,S.identificationNumber,6):""),l.R7$(3),l.SpI(" ",null!==($=null==S.classroom?null:S.classroom.name)&&void 0!==$?$:""," "),l.R7$(2),l.Y8G("ngIf",!S.isTrial),l.R7$(),l.Y8G("ngIf",S.isTrial)}}function Z(Y,y){if(1&Y&&(l.j41(0,"div")(1,"div",21)(2,"drag-scroll")(3,"table",22)(4,"thead")(5,"tr",23),l.DNE(6,wt,5,8,"th",24),l.k0s()(),l.j41(7,"tbody"),l.DNE(8,ct,11,16,"tr",25),l.k0s()()()()()),2&Y){let $;const S=l.XpG(4);l.R7$(6),l.Y8G("ngForOf",S.sortTableByFieldNameService.fieldNameList),l.R7$(2),l.Y8G("ngForOf",null!==($=null==S.listPayment?null:S.listPayment.list)&&void 0!==$?$:l.lJ4(2,st))}}function gt(Y,y){if(1&Y){const $=l.RV6();l.j41(0,"div",39),l.EFF(1),l.nI1(2,"mytranslate"),l.j41(3,"span",40),l.bIt("click",function(){l.eBV($);const z=l.XpG(4);return l.Njj(z.goBack())}),l.EFF(4),l.nI1(5,"mytranslate"),l.k0s()()}2&Y&&(l.R7$(),l.SpI(" ",l.bMT(2,2,"lang_core_not_found_student"),"... "),l.R7$(3),l.JRh(l.bMT(5,4,"lang_powerpoint_frontend_chart_back")))}function Et(Y,y){if(1&Y&&(l.j41(0,"div",17),l.DNE(1,Tt,3,3,"div",18)(2,Z,9,3,"div",5)(3,gt,6,6,"div",19),l.k0s()),2&Y){let $,S;const z=l.XpG(3);l.R7$(),l.Y8G("ngIf",!z.searchContentObj.isLoading&&0==(null==z.listPayment?null:z.listPayment.total)&&""==z.searchContentObj.searchContent),l.R7$(),l.Y8G("ngIf",(null!==($=null==z.listPayment?null:z.listPayment.total)&&void 0!==$?$:0)>0),l.R7$(),l.Y8G("ngIf",!z.searchContentObj.isLoading&&0==(null!==(S=null==z.listPayment?null:z.listPayment.list)&&void 0!==S?S:l.lJ4(3,st)).length&&""!=z.searchContentObj.searchContent)}}function it(Y,y){if(1&Y){const $=l.RV6();l.j41(0,"azt-paging",44),l.bIt("goToPaginationPage",function(z){l.eBV($);const lt=l.XpG(4);return l.Njj(lt.setPageStudent(z))}),l.k0s()}if(2&Y){const $=l.XpG(4);l.Y8G("pageObj",$.pageObj)}}function dt(Y,y){if(1&Y&&(l.j41(0,"div",45),l.EFF(1),l.nI1(2,"mytranslate"),l.k0s()),2&Y){const $=l.XpG(4);l.R7$(),l.Lme("",$.listPayment.total," ",l.bMT(2,2,"lang_notify_list_students"),"")}}function _t(Y,y){if(1&Y&&(l.j41(0,"div",41),l.nrm(1,"div"),l.DNE(2,it,1,1,"azt-paging",42)(3,dt,3,4,"div",43),l.k0s()),2&Y){const $=l.XpG(3);l.R7$(2),l.Y8G("ngIf",$.listPayment.total>$.pageObj.pageSize),l.R7$(),l.Y8G("ngIf",!$.isStudent)}}function nt(Y,y){if(1&Y&&l.DNE(0,Et,4,4,"div",15)(1,_t,4,2,"div",16),2&Y){let $;const S=l.XpG(2);l.Y8G("ngIf",!S.isStudent),l.R7$(),l.Y8G("ngIf",S.listPayment&&S.listPayment.total&&(null!==($=null==S.listPayment?null:S.listPayment.total)&&void 0!==$?$:0)>0)}}function ot(Y,y){if(1&Y){const $=l.RV6();l.qex(0),l.j41(1,"div",8)(2,"div",9)(3,"div",10)(4,"azt-search-box",11),l.nI1(5,"mytranslate"),l.bIt("onSearch",function(z){l.eBV($);const lt=l.XpG();return l.Njj(lt.onSearchBox(z.searchObj))}),l.k0s()()()(),l.DNE(6,vt,2,1,"div",12)(7,nt,2,2,"ng-template",null,0,l.C5r),l.bVm()}if(2&Y){const $=l.sdS(8),S=l.XpG();l.R7$(4),l.Y8G("isServerSearch",!0)("placeholder",l.bMT(5,5,"lang_core_tim_theo_ten_phone_email"))("searchContentObj",S.searchContentObj),l.R7$(2),l.Y8G("ngIf",S.statusObj.loading)("ngIfElse",$)}}function Ct(Y,y){1&Y&&(l.j41(0,"div",46),l.nrm(1,"detail-tuition-fee-student"),l.k0s())}let Dt=(()=>{var Y;class y extends A.H{onSearchBox(S){this.searchContentObj=S,this.getData()}addOrEditTuitionFee(S){this.sAztDialogService.open(g.B,{width:"900px",restoreFocus:!1,data:S}).afterClosed().subscribe(z=>{z&&this.getData()})}goBack(){this.searchContentObj.resetSearchContentEvent("EMIT_EVENT")}sortTableByFieldName(S){S.ignore||(this.orderObj=this.sortTableByFieldNameService.convertDataSort(S),this.getData())}setPageStudent(S){this.myNavigationWithQueryString("/admin/student/classroom-details/"+this.classroomId+"/8","?page="+S),this.pageObj.setPageNumber(S),this.getData()}getData(){this.initStatusObj(),this.waitDestroy(this.studentService.apiStudentsListPost({page:this.pageObj.page,size:this.pageObj.pageSize,markMonth:this.dataFilter?.monthSelected,markYear:this.dataFilter?.yearSelected,name:this.searchContentObj.searchContent,classroomId:this.classroomId,getBook:!1,getMark:!1,getPayment:!0,getAttendance:!1,me:this.isStudent,getAssessment:!1,order:this.orderObj}).subscribe({next:z=>{this.listPayment=z,this.pageObj.setTotalPages(z.total??0),this.successStatusObj()},error:z=>{this.errorStatusObj(z.error.message,!0)}}))}initFieldNameList(){return[{fieldName:"fullName",key:"lang_auto_ho_va_ten",ignore:!1,typeFieldSort:o.H.none,customClassCss:"flex items-center whitespace-nowrap"},{fieldName:"identificationNumber",key:"lang_auto_so_bao_danh",ignore:!1,typeFieldSort:o.H.none,customClassCss:"flex items-center justify-center whitespace-nowrap"},{fieldName:"classroom.name",key:"lang_auto_lop",ignore:!0,typeFieldSort:o.H.none,customClassCss:"text-center whitespace-nowrap"},{fieldName:"payment",key:"lang_azt_tuition_fee_submission_time",ignore:!1,typeFieldSort:o.H.none,customClassCss:"flex items-center justify-center whitespace-nowrap"}]}ngOnInit(){super.ngOnInit(),this.sortTableByFieldNameService.setFieldNameList(this.initFieldNameList()),this.classroomId=Number(this.commonService.getMyParam(this.activeRoute,"id")),this.pageObj.setPageNumber(Number(this.commonService.getMyQueryParam("page")??"1")),this.isStudent||this.getData()}constructor(S,z,lt,Ot){super(),this.activeRoute=S,this.sAztDialogService=z,this.studentService=lt,this.sortTableByFieldNameService=Ot,this.pageStudent=1,this.searchContentObj=new at.Z,this.classroomId=0,this.pageObj=new t.d(50),this.typeFieldSort=o.H}}return(Y=y).\u0275fac=function(S){return new(S||Y)(l.rXU(m.nX),l.rXU(n.i),l.rXU(ut.b0),l.rXU(e.s))},Y.\u0275cmp=l.VBU({type:Y,selectors:[["app-tuition-fee-board"]],inputs:{isStudent:"isStudent"},features:[l.Jv_([e.s]),l.Vt3],decls:8,vars:6,consts:[["doneLoading",""],[1,"mt-5"],[1,"col-span-12"],[1,"text-xl","font-medium"],["class","mt-1",4,"ngIf"],[4,"ngIf"],["class","intro-y col-span-12 overflow-auto",4,"ngIf"],[1,"mt-1"],[1,"col-span-12","lg:col-span-12","2xl:col-span-12","mt-5"],[1,"intro-y","flex","flex-col-reverse","sm:flex-row","items-center"],[1,"w-full","grid","sm:flex","sm:justify-start","sm:w-auto","mr-auto","mt-3","sm:mt-0"],[3,"onSearch","isServerSearch","placeholder","searchContentObj"],["class","w-full flex justify-center items-center",4,"ngIf","ngIfElse"],[1,"w-full","flex","justify-center","items-center"],[3,"currentStatusObj"],["class","intro-y col-span-12",4,"ngIf"],["class","flex justify-between items-center mt-5",4,"ngIf"],[1,"intro-y","col-span-12"],["class","flex justify-center mt-5",4,"ngIf"],["class","flex justify-center mt-19",4,"ngIf"],[1,"flex","justify-center","mt-5"],[1,"intro-y",2,"height","100%"],["drag-scroll-item","",1,"table","table-report","mt-2",2,"white-space","initial","display","table"],[1,"box"],["class","cursor-pointer",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"cursor-pointer"],["azt-track-service","tuition-fee-board-WXuxcVronQ",3,"click"],["class","flex items-center flex-col ml-2",4,"ngIf"],[1,"flex","items-center","flex-col","ml-2"],["name","chevron-up","size","16",3,"ngClass"],["name","chevron-down","size","16",3,"ngClass"],["azt-track-service","class-list-details-DbKkCgISc7I",1,"!py-3.5","clickable",3,"click"],[3,"name","avatar","gender","schoolName","hasUser","classrooms","joinedAt","phone","identificationNumber"],[1,"text-center","capitalize"],[1,"text-center",2,"min-width","100px","max-width","150px"],[1,"text-center"],["class","text-slate-500",4,"ngIf"],[1,"text-slate-500"],[1,"flex","justify-center","mt-19"],["azt-track-service","business-tuition-fee-hLqHhho7i",1,"clickable",2,"color","#2262ae !important",3,"click"],[1,"flex","justify-between","items-center","mt-5"],[3,"pageObj","goToPaginationPage",4,"ngIf"],["class","flex justify-end",4,"ngIf"],[3,"goToPaginationPage","pageObj"],[1,"flex","justify-end"],[1,"intro-y","col-span-12","overflow-auto"]],template:function(S,z){1&S&&(l.j41(0,"div",1)(1,"div",2)(2,"h3",3),l.EFF(3),l.nI1(4,"mytranslate"),l.k0s(),l.DNE(5,jt,3,3,"div",4),l.k0s(),l.DNE(6,ot,9,7,"ng-container",5)(7,Ct,2,0,"div",6),l.k0s()),2&S&&(l.R7$(3),l.SpI(" ",l.bMT(4,4,z.isStudent?"lang_student_tuition_fee_info":"lang_business_tuition_fee_title_top")," "),l.R7$(2),l.Y8G("ngIf",(z.isMobileDevice||z.isMobileWebView)&&!z.isStudent),l.R7$(),l.Y8G("ngIf",!z.isStudent),l.R7$(),l.Y8G("ngIf",z.isStudent))},dependencies:[kt.YU,kt.Sq,kt.bT,q.K,tt.q,pt.W,L.B,Q.jd,Q.Ew,V.WGl,W.k,X.wp,X.Po],encapsulation:2}),y})()},85127:(Mt,St,r)=>{r.d(St,{k:()=>pt});var g=r(59640),o=r(48891),e=r(95624),A=r(54460),t=r(52811),at=r(10123),l=r(76975);function m(L,Q){1&L&&(o.j41(0,"div"),o.EFF(1),o.nI1(2,"mytranslate"),o.k0s()),2&L&&(o.R7$(),o.SpI(" ",o.bMT(2,1,"lang_core_huong_dan_chon_vao_bang_va_vuot_sang_trai_de_xem_cac_thong_tin_khac")," "))}function n(L,Q){1&L&&(o.j41(0,"tr",11)(1,"td",12)(2,"span",13),o.nrm(3,"azt-loading-ui"),o.k0s()()())}function ut(L,Q){if(1&L&&(o.j41(0,"tr")(1,"td",11),o.EFF(2),o.k0s(),o.j41(3,"td"),o.EFF(4),o.nI1(5,"formatFullDateTimeWithoutSecondByUserUnitPipe"),o.k0s(),o.j41(6,"td"),o.EFF(7),o.k0s(),o.j41(8,"td",11)(9,"span",16),o.EFF(10),o.nI1(11,"mytranslate"),o.k0s()()()),2&L){const V=Q.$implicit,W=Q.index;o.R7$(2),o.JRh(W+1),o.R7$(2),o.JRh(o.bMT(5,4,V.createdAt)),o.R7$(3),o.JRh(V.month+"/"+V.year),o.R7$(3),o.SpI(" ",o.bMT(11,6,"lang_student_tuition_fee_paid")," ")}}function kt(L,Q){if(1&L&&(o.qex(0),o.DNE(1,ut,12,8,"tr",15),o.bVm()),2&L){const V=o.XpG(2);o.R7$(),o.Y8G("ngForOf",V.historyTuitionFeeList)}}function q(L,Q){1&L&&(o.j41(0,"tr")(1,"td",17),o.EFF(2),o.nI1(3,"mytranslate"),o.k0s()()),2&L&&(o.R7$(2),o.SpI(" ",o.bMT(3,1,"lang_student_profile_not_data_view")," "))}function tt(L,Q){if(1&L&&o.DNE(0,kt,2,1,"ng-container",14)(1,q,4,3,"ng-template",null,1,o.C5r),2&L){const V=o.sdS(2),W=o.XpG();o.Y8G("ngIf",W.historyTuitionFeeList.length)("ngIfElse",V)}}let pt=(()=>{var L;class Q extends g.H{getTuitionFree(){this.initStatusObj(),this.waitDestroy(this.paymentService.apiPaymentMeGet().subscribe(W=>{W?(this.historyTuitionFeeList=W.histories,this.successStatusObj()):this.errorStatusObj("lang_cms_error_lost_connect_to_server",!0)}))}ngOnInit(){super.ngOnInit(),this.getTuitionFree()}constructor(W){super(),this.paymentService=W,this.historyTuitionFeeList=[]}}return(L=Q).\u0275fac=function(W){return new(W||L)(o.rXU(e.WG))},L.\u0275cmp=o.VBU({type:L,selectors:[["detail-tuition-fee-student"]],features:[o.Vt3],decls:23,vars:15,consts:[["doneLoading",""],["noTuitionFee",""],[1,"detail-attendance"],[4,"ngIf"],[1,"mt-4","box"],["drag-scroll-item","",1,"table","table-bordered",2,"white-space","initial","display","table"],[1,"bg-slate-100","dark:bg-darkmode-400"],[1,"whitespace-nowrap","text-center",2,"width","30px"],[1,"whitespace-nowrap"],[1,"whitespace-nowrap","text-center",2,"min-width","150px"],["class","text-center",4,"ngIf","ngIfElse"],[1,"text-center"],["colspan","4"],[1,"w-10","h-10","inline-block","m-auto"],[4,"ngIf","ngIfElse"],[4,"ngFor","ngForOf"],[1,"ml-2","py-0.5","px-2","rounded-full","text-xs","bg-success","text-white","cursor-pointer","font-medium","ng-star-inserted"],["colspan","4",1,"text-center"]],template:function(W,X){if(1&W&&(o.j41(0,"div",2),o.DNE(1,m,3,3,"div",3),o.j41(2,"div",4)(3,"drag-scroll")(4,"table",5)(5,"thead",6)(6,"tr")(7,"th",7),o.EFF(8),o.nI1(9,"mytranslate"),o.k0s(),o.j41(10,"th",8),o.EFF(11),o.nI1(12,"mytranslate"),o.k0s(),o.j41(13,"th",8),o.EFF(14),o.nI1(15,"mytranslate"),o.k0s(),o.j41(16,"th",9),o.EFF(17),o.nI1(18,"mytranslate"),o.k0s()()(),o.j41(19,"tbody"),o.DNE(20,n,4,0,"tr",10)(21,tt,3,2,"ng-template",null,0,o.C5r),o.k0s()()()()()),2&W){const st=o.sdS(22);o.R7$(),o.Y8G("ngIf",X.isMobileDevice||X.isMobileWebView),o.R7$(7),o.SpI(" ",o.bMT(9,7,"lang_auto_stt")," "),o.R7$(3),o.SpI(" ",o.bMT(12,9,"lang_student_payment_time")," "),o.R7$(3),o.SpI(" ",o.bMT(15,11,"lang_student_monthly_tuition_fee")," "),o.R7$(3),o.SpI(" ",o.bMT(18,13,"lang_student_status")," "),o.R7$(3),o.Y8G("ngIf",X.statusObj.loading)("ngIfElse",st)}},dependencies:[A.Sq,A.bT,t.R,at.jd,at.Ew,l.wp,l.bH],encapsulation:2}),Q})()},25898:(Mt,St,r)=>{r.d(St,{n:()=>e});var g=r(10936),o=r(48891);let e=(()=>{var A;class t{makeListFormArrayComment(l,m){let n=new g.Yp([]);return l&&l.forEach(ut=>{n.push(new g.gE({id:new g.MJ({value:ut.id,disabled:!m},{nonNullable:!0}),updatedAt:new g.MJ({value:ut.updatedAt?.toString()??"",disabled:!m},{nonNullable:!0}),comment:new g.MJ({value:ut.comment??"",disabled:!m},{nonNullable:!0}),isEditted:new g.MJ(!1,{nonNullable:!0})}))}),n}getLastAssessmentStudent(l){if(l.assessments&&l.assessments.length)return l.assessments[0]}}return(A=t).\u0275fac=function(l){return new(l||A)},A.\u0275prov=o.jDH({token:A,factory:A.\u0275fac,providedIn:"root"}),t})()},18586:(Mt,St,r)=>{r.d(St,{U:()=>Et});var g=r(81519),o=r(48891),e=r(10936),A=r(34514),t=r(47426),at=r(89163),l=r(99503),m=r(79347),n=r(33887),ut=r(62095),kt=r(9691),q=r(25898),tt=r(10296),pt=r(67638),L=r(40609),Q=r(54460),V=r(47712),W=r(81587),X=r(2915),st=r(52811),J=r(5800),et=r(15343),jt=r(76975);const vt=()=>({"ml-2 cursor-pointer":!0});function Tt(it,dt){if(1&it){const _t=o.RV6();o.j41(0,"button",13),o.bIt("click",function(){o.eBV(_t);const ot=o.XpG();return o.Njj(ot.changeEditStatus(!0))}),o.EFF(1),o.nI1(2,"mytranslate"),o.k0s()}2&it&&(o.R7$(),o.SpI(" ",o.bMT(2,1,"lang_auto_sua")," "))}function rt(it,dt){if(1&it){const _t=o.RV6();o.j41(0,"button",14),o.bIt("click",function(){o.eBV(_t);const ot=o.XpG();return o.Njj(ot.changeEditStatus(!1))}),o.EFF(1),o.nI1(2,"mytranslate"),o.k0s()}if(2&it){const _t=o.XpG();o.Y8G("disabled",_t.isSave),o.R7$(),o.SpI(" ",o.bMT(2,2,"lang_auto_huy_sua")," ")}}function wt(it,dt){if(1&it){const _t=o.RV6();o.j41(0,"button",15),o.bIt("click",function(){o.eBV(_t);const ot=o.XpG();return o.Njj(ot.saveEdit())}),o.EFF(1),o.nI1(2,"mytranslate"),o.k0s()}if(2&it){const _t=o.XpG();o.Y8G("disabled",_t.isSave||_t.countChangedComment()),o.R7$(),o.SpI(" ",o.bMT(2,2,"lang_auto_luu")," ")}}function Pt(it,dt){1&it&&(o.j41(0,"div",16)(1,"span",17),o.nrm(2,"azt-loading-ui"),o.k0s()())}function U(it,dt){1&it&&(o.j41(0,"div",19),o.EFF(1),o.nI1(2,"mytranslate"),o.k0s()),2&it&&(o.R7$(),o.SpI(" ",o.bMT(2,1,"lang_azt_no_comments_yet")," "))}function It(it,dt){if(1&it){const _t=o.RV6();o.j41(0,"button",28),o.bIt("click",function(){o.eBV(_t);const ot=o.XpG().$implicit,Ct=o.XpG(3);return o.Njj(Ct.deleteAssesment(ot.controls.id.value))}),o.nrm(1,"lucide-icon",29),o.nI1(2,"mytranslate"),o.k0s()}if(2&it){const _t=o.XpG(4);o.Y8G("disabled",_t.isSave),o.R7$(),o.FS9("matTooltip",o.bMT(2,2,"lang_auto_xoa"))}}function ct(it,dt){if(1&it){const _t=o.RV6();o.j41(0,"div",22)(1,"form",23)(2,"div",24)(3,"p",25),o.EFF(4),o.nI1(5,"mytranslate"),o.nI1(6,"formatOnlyDateByUserUnitPipe"),o.k0s(),o.DNE(7,It,3,4,"button",26),o.k0s(),o.j41(8,"textarea",27),o.bIt("change",function(){const ot=o.eBV(_t).$implicit;return o.Njj(ot.controls.isEditted.setValue(!0))}),o.k0s()()()}if(2&it){const _t=dt.$implicit,nt=o.XpG(3);o.R7$(),o.Y8G("formGroup",_t),o.R7$(3),o.Lme("",o.bMT(5,4,"lang_student_add_comment_date"),": ",o.bMT(6,6,_t.controls.updatedAt.value),""),o.R7$(3),o.Y8G("ngIf",nt.isEdit)}}function Z(it,dt){if(1&it&&(o.j41(0,"div",20),o.DNE(1,ct,9,8,"div",21),o.k0s()),2&it){const _t=o.XpG(2);o.R7$(),o.Y8G("ngForOf",null==_t.data.student.listCommentControl?null:_t.data.student.listCommentControl.controls)}}function gt(it,dt){if(1&it&&o.DNE(0,U,3,3,"div",18)(1,Z,2,1,"ng-template",null,1,o.C5r),2&it){const _t=o.sdS(2),nt=o.XpG();o.Y8G("ngIf",!nt.data.student.assessments||!nt.data.student.assessments.length)("ngIfElse",_t)}}let Et=(()=>{var it;class dt extends n._{filterData(nt){this.dataFilter=nt,this.initStatusObj()}countChangedComment(){return!!this.data.student.listCommentControl?.controls.filter(ot=>ot.controls.isEditted.value&&!ot.controls.comment.value)?.length}saveEdit(){this.isSave=!0,this.changeEditStatus(!1),this.initStatusObj();let nt=this.data.student.listCommentControl?.controls.filter(Ct=>Ct.controls.isEditted.value).map(Ct=>({id:Ct.controls.id.value,studentId:this.data.student.id,comment:Ct.controls.comment.value}))??[];if(!nt.length)return this.errorStatusObj("lang_business_ban_chua_thay_doi_hoc_sinh_nao",!0),void(this.isSave=!1);this.waitDestroy(this.studentService.apiStudentsAssessmentsPost({classroomId:this.data.student.classroomId,studentAssessments:nt}).subscribe(Ct=>{Ct.success?(this.showSuccessSnack("lang_student_edit_comment_successfully"),this.isEdit=!1,this.hasChanged=!0,this.getStudent()):this.errorStatusObj("lang_student_edit_comment_unsuccessfully",!0),this.isSave=!1}))}deleteAssesment(nt){this.initStatusObj(),this.waitDestroy(this.studentService.apiStudentsIdAssessmentsDelete(nt).subscribe(ot=>{ot.success?(this.getStudent(!0),this.showSuccessSnack("lang_student_delete_comment_successfully"),this.hasChanged=!0):this.errorStatusObj("lang_student_delete_comment_unsuccessfully",!0)}))}changeEditStatus(nt){this.isEdit=nt,this.data.student.listCommentControl?.controls.map(ot=>nt?ot.enable():ot.disable())}getStudent(nt){this.waitDestroy(this.studentService.apiStudentsListPost({page:1,size:1,id:this.data.student.id,markMonth:this.dataFilter?.monthSelected,markYear:this.dataFilter?.yearSelected,classroomId:this.data.student.classroomId,getBook:!1,getMark:!1,getAttendance:!1,getPayment:!1,me:!this.data.isTeacher,getAssessment:!0}).subscribe({next:Ct=>{if(Ct.list.length){let Dt=this.sAztAssessmentStudentService.getLastAssessmentStudent(Ct.list[0]);this.data.student={...Ct.list[0],commentControl:new e.gE({id:new e.MJ(0,{nonNullable:!0}),updatedAt:new e.MJ(Dt?.updatedAt?.toString()??"",{nonNullable:!0}),comment:new e.MJ(Dt?.comment??"",{nonNullable:!0}),isEditted:new e.MJ(!1,{nonNullable:!0})}),listCommentControl:this.sAztAssessmentStudentService.makeListFormArrayComment(Ct.list[0].assessments,nt)}}this.stopStatusObj()},error:Ct=>{this.errorStatusObj(Ct.error.message,!0)}}))}closeDialog(){this.dialogRef.close(this.hasChanged)}ngOnInit(){super.ngOnInit()}constructor(nt,ot,Ct,Dt,Y,y,$){super($,y),this.sAztAssessmentStudentService=nt,this.sAztTimeService=ot,this.shareFileFlutterService=Ct,this.exportExcelService=Dt,this.studentService=Y,this.dialogRef=y,this.data=$,this.styleThNormal='{"alignment":{"vertical":"center","horizontal":"center","wrapText":true},"font":{"bold":true,"color":{"rgb":"ffffffff"}},"fill":{"patternType":"solid","fgColor":{"rgb":"2361ae"}},"border": {"right":{"style": "thin","color":{"rgb":"ffffffff"}},"left":{"style": "thin","color":{"rgb":"ffffffff"}}}}',this.styleTdNormalLeft='{"alignment":{"vertical":"center","horizontal":"left", "wrapText":true},"font":{"bold":false,"color":{"rgb":"000000"}}}',this.styleTdNotNumberNormal='{"alignment":{"vertical":"center","horizontal":"center", "wrapText":true},"font":{"bold":false,"color":{"rgb":"000000"}},"isText":"1"}',this.styleTdNormal='{"alignment":{"vertical":"center","horizontal":"center", "wrapText":true},"font":{"bold":false,"color":{"rgb":"000000"}}}',this.isSave=!1,this.isEdit=!1,this.hasChanged=!1,this.commonService=(0,o.WQX)(ut.R)}ngOnDestroy(){super.ngOnDestroy()}}return(it=dt).\u0275fac=function(nt){return new(nt||it)(o.rXU(q.n),o.rXU(kt.F),o.rXU(tt.R),o.rXU(pt.x),o.rXU(L.b),o.rXU(at.CP,8),o.rXU(at.Vh,8))},it.\u0275cmp=o.VBU({type:it,selectors:[["azt-student-comments"]],features:[o.Jv_([{provide:g.$O,useClass:l.fb,deps:[t.Ju,A.ij]},{provide:g.vq,useFactory:m.fJ,deps:[kt.F]}]),o.Vt3],decls:15,vars:19,consts:[["doneLoading",""],["hasData",""],[1,"box"],[1,"px-5","py-3","border-b","border-slate-300"],[1,"flex","justify-between","items-start"],[3,"name","parentFullName","parentId","parentPhone","phone","email","avatar","gender","hasUser"],[2,"align-self","center"],["name","x","size","16",3,"click","matTooltip","ngClass"],[1,"flex","justify-end"],["azt-track-service","show-all-comment-dialog-LbiztBEnN","class","btn btn-sm btn-secondary",3,"click",4,"ngIf"],["azt-track-service","show-all-comment-dialog-obLkGIiBj3","class","btn btn-sm btn-secondary-soft mr-2",3,"disabled","click",4,"ngIf"],["azt-track-service","show-all-comment-dialog-NsWjWIKf_r","class","btn btn-sm btn-primary",3,"disabled","click",4,"ngIf"],["class","p-5 text-center",4,"ngIf","ngIfElse"],["azt-track-service","show-all-comment-dialog-LbiztBEnN",1,"btn","btn-sm","btn-secondary",3,"click"],["azt-track-service","show-all-comment-dialog-obLkGIiBj3",1,"btn","btn-sm","btn-secondary-soft","mr-2",3,"click","disabled"],["azt-track-service","show-all-comment-dialog-NsWjWIKf_r",1,"btn","btn-sm","btn-primary",3,"click","disabled"],[1,"p-5","text-center"],[1,"w-8","h-8","inline-block","mr-2"],["class","mt-2 py-3 px-5 mb-2 text-center","style","height: 55px",4,"ngIf","ngIfElse"],[1,"mt-2","py-3","px-5","mb-2","text-center",2,"height","55px"],[1,"py-3","px-5"],["class","mt-2",4,"ngFor","ngForOf"],[1,"mt-2"],[3,"formGroup"],[1,"flex","mb-2","items-center"],[1,"font-bold","mb-0"],["azt-track-service","show-all-comment-dialog-nT0YvyBIsP","class","btn btn-transparent btn-outline-secondary btn-sm",3,"disabled","click",4,"ngIf"],["formControlName","comment","type","text",1,"form-control",2,"min-width","80px",3,"change"],["azt-track-service","show-all-comment-dialog-nT0YvyBIsP",1,"btn","btn-transparent","btn-outline-secondary","btn-sm",3,"click","disabled"],["name","trash-2","size","16",3,"matTooltip"]],template:function(nt,ot){if(1&nt){const Ct=o.RV6();o.j41(0,"div",2)(1,"div",3)(2,"div",4),o.nrm(3,"azt-student-info-box",5),o.j41(4,"div",6)(5,"lucide-icon",7),o.nI1(6,"mytranslate"),o.bIt("click",function(){return o.eBV(Ct),o.Njj(ot.closeDialog())}),o.k0s()()(),o.j41(7,"div",8),o.DNE(8,Tt,3,3,"button",9)(9,rt,3,4,"button",10)(10,wt,3,4,"button",11),o.k0s()(),o.j41(11,"azt-mat-dialog-content"),o.DNE(12,Pt,3,0,"div",12)(13,gt,3,2,"ng-template",null,0,o.C5r),o.k0s()()}if(2&nt){const Ct=o.sdS(14);o.R7$(3),o.Y8G("name",ot.data.student.fullName)("parentFullName",ot.data.student.parentFullName)("parentId",ot.data.student.parentId)("parentPhone",ot.data.student.parentPhone)("phone",ot.data.student.phone)("email",ot.data.student.email)("avatar",ot.data.student.avatar)("gender",ot.data.student.gender)("hasUser",ot.data.student.hasUser),o.R7$(2),o.FS9("matTooltip",o.bMT(6,16,"lang_auto_dong")),o.Y8G("ngClass",o.lJ4(18,vt)),o.R7$(3),o.Y8G("ngIf",!ot.isEdit&&ot.data.isTeacher),o.R7$(),o.Y8G("ngIf",ot.isEdit),o.R7$(),o.Y8G("ngIf",ot.isEdit),o.R7$(2),o.Y8G("ngIf",ot.statusObj.loading)("ngIfElse",Ct)}},dependencies:[Q.YU,Q.Sq,Q.bT,V.oV,e.qT,e.me,e.BC,e.cb,e.j4,e.JD,W.t,X.U,st.R,J.B,et.WGl,jt.wp,jt.vv],styles:[".text-sm[_ngcontent-%COMP%]{font-size:14px!important}.box[_ngcontent-%COMP%]{height:100%}.box-point-homework[_ngcontent-%COMP%]{min-width:90px;background-color:rgb(var(--color-slate-100)/var(--tw-bg-opacity));border:1px solid;border-color:rgb(var(--color-slate-200)/var(--tw-border-opacity));font-weight:700;min-height:34px}.btn-edit-point[_ngcontent-%COMP%]{position:absolute;right:5px;color:gray}"]}),dt})()},66067:(Mt,St,r)=>{r.d(St,{E:()=>Pn});var g=r(76627),o=r(59640),e=r(48891),A=r(65162),t=r(73202),at=r(95624),l=r(9691),m=r(54460),n=r(18718),ut=r(64198),kt=r(75421),q=r(93518),tt=r(53043),pt=r(69307),L=r(46899),Q=r(40111),V=r(17818),W=r(47426),X=r(47712),st=r(69135),J=r(52811),et=r(91584),jt=r(15343),vt=r(23750),Tt=r(81519),rt=r(10936),wt=r(34514),Pt=r(99503),U=r(79347);class It{static addNewEducationalProgramFormValidator(I){let s=I,a=s.controls.weekdayConfig;if(!a.length)return s.setErrors(null),null;let _=0,v=0;return a.controls.forEach(k=>{let G=!1,H={invalidTime:!1,requireTime:!1,invalidInfrastructure:!1,identityRevealed:!0};k.controls.selected.value?(k.controls.infrastructureId.value||(G=!0,H.invalidInfrastructure=!0),k.controls.startTime.value&&k.controls.endTime.value?new Date("1970-01-01T"+k.controls.startTime.value).getTime()>=new Date("1970-01-01T"+k.controls.endTime.value).getTime()?(G=!0,H.invalidTime=!0):H.invalidTime=!1:(G=!0,H.requireTime=!0),k.setErrors(G?H:null),v++):k.setErrors(null),k.invalid&&_++},a),_||!v?(s.setErrors({invalidData:!0}),{identityRevealed:!0,invalidData:!0}):(s.setErrors(null),null)}}var ct=r(43234),Z=r(66772),gt=r(84828),Et=r(39471),it=r(97839),dt=r(95670),_t=r(4375),nt=r(20378),ot=r(81587),Ct=r(43166),Dt=r(5502),Y=r(44233),y=r(76975);const $=["startTime"],S=i=>({"mt-2":i}),z=()=>({"ml-2 clickable":!0}),lt=()=>({"width.px":"auto","height.%":100}),Ot=i=>[i],Lt=i=>({backTo:i}),Vt=()=>({"mr-2":!0}),Ht=(i,I)=>({hiddenVisible:i,visibleIpt:I}),Xt=i=>({"border border-primary":i}),Qt=()=>({"text-primary":!0});function qt(i,I){if(1&i&&e.nrm(0,"azt-loading-effect",11),2&i){const s=e.XpG();e.Y8G("currentStatusObj",s.statusObj)}}function te(i,I){if(1&i){const s=e.RV6();e.j41(0,"button",45),e.bIt("click",function(){e.eBV(s);const _=e.XpG(2);return e.Njj(_.saveEducationalProgramEmit.emit(!1))}),e.nrm(1,"lucide-icon",46),e.j41(2,"span",47),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()()}if(2&i){const s=e.XpG(2);e.Y8G("disabled",s.isSavingProgram),e.R7$(3),e.JRh(e.bMT(4,2,"lang_auto_huy"))}}function ee(i,I){1&i&&e.nrm(0,"lucide-icon",52)}function ne(i,I){1&i&&e.nrm(0,"lucide-icon",53)}function oe(i,I){1&i&&e.nrm(0,"lucide-icon",61),2&i&&e.Y8G("ngClass",e.lJ4(1,Qt))}function ie(i,I){if(1&i){const s=e.RV6();e.j41(0,"div",57)(1,"div",58),e.bIt("click",function(){let _;const v=e.eBV(s).$implicit,k=e.XpG().$implicit,G=e.XpG(2).$implicit,H=e.XpG(2);return e.Njj(H.selectSubject(null!==(_=G.id)&&void 0!==_?_:0,null!==(_=k.id)&&void 0!==_?_:0,v))}),e.j41(2,"span",59),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.DNE(5,oe,1,2,"lucide-icon",60),e.k0s()()}if(2&i){const s=I.$implicit;e.Y8G("ngClass",e.eq3(5,Xt,s.selected)),e.R7$(3),e.JRh(e.bMT(4,3,s.name)),e.R7$(2),e.Y8G("ngIf",s.selected)}}function ae(i,I){if(1&i&&(e.qex(0),e.j41(1,"h3",54)(2,"span",55),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()(),e.DNE(5,ie,6,7,"div",56),e.bVm()),2&i){const s=I.$implicit;e.R7$(3),e.SpI(" ",e.bMT(4,2,s.name)," "),e.R7$(2),e.Y8G("ngForOf",s.children)}}function F(i,I){if(1&i&&(e.qex(0),e.DNE(1,ae,6,4,"ng-container",25),e.bVm()),2&i){const s=e.XpG().$implicit;e.R7$(),e.Y8G("ngForOf",s.subjects)}}function mt(i,I){if(1&i){const s=e.RV6();e.qex(0),e.j41(1,"h3",48),e.bIt("click",function(){let _;const v=e.eBV(s).$implicit,k=e.XpG(2);return e.Njj(k.showEducationalProgramSubject(null!==(_=v.id)&&void 0!==_?_:0))}),e.j41(2,"span",49),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.DNE(5,ee,1,0,"lucide-icon",50)(6,ne,1,0,"lucide-icon",51),e.k0s(),e.DNE(7,F,2,1,"ng-container",26),e.bVm()}if(2&i){const s=I.$implicit;e.R7$(3),e.SpI(" ",e.bMT(4,4,s.name)," "),e.R7$(2),e.Y8G("ngIf",s.showChild),e.R7$(),e.Y8G("ngIf",!s.showChild),e.R7$(),e.Y8G("ngIf",s.showChild)}}function P(i,I){1&i&&(e.qex(0),e.j41(1,"small",62),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.bVm()),2&i&&(e.R7$(2),e.SpI("* ",e.bMT(3,1,"lang_business_config_educational_program_validate"),""))}function w(i,I){1&i&&(e.qex(0),e.j41(1,"small",62),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.bVm()),2&i&&(e.R7$(2),e.SpI("* ",e.bMT(3,1,"lang_business_config_educational_program_no_program_yet"),""))}function D(i,I){if(1&i){const s=e.RV6();e.qex(0),e.j41(1,"div",64),e.bIt("click",function(){e.eBV(s);const _=e.XpG().$implicit,v=e.XpG(2);return e.Njj(v.openWeekdayConfig(_.controls.id.value))}),e.j41(2,"span"),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()(),e.bVm()}if(2&i){const s=e.XpG().$implicit;e.R7$(),e.Y8G("formGroup",s),e.R7$(2),e.JRh(e.bMT(4,2,s.controls.name.value))}}function ht(i,I){1&i&&(e.j41(0,"button",81),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i&&(e.R7$(),e.JRh(e.bMT(2,1,"lang_auto_huy")))}function Rt(i,I){1&i&&(e.j41(0,"button",82),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i&&(e.R7$(),e.JRh(e.bMT(2,1,"lang_auto_xac_nhan")))}function Nt(i,I){1&i&&e.nrm(0,"p",83)}function Ut(i,I){1&i&&(e.j41(0,"mat-label"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_business_config_educational_program_select_infrastructure")," "))}function Wt(i,I){if(1&i&&(e.j41(0,"mat-option",84),e.EFF(1),e.k0s()),2&i){const s=I.$implicit;e.FS9("value",s.id),e.R7$(),e.JRh(s.name)}}function zt(i,I){1&i&&(e.qex(0),e.j41(1,"small",85),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.bVm()),2&i&&(e.R7$(2),e.SpI("* ",e.bMT(3,1,"lang_business_config_educational_program_time_validate"),""))}function ce(i,I){1&i&&(e.qex(0),e.j41(1,"small",85),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.bVm()),2&i&&(e.R7$(2),e.SpI("* ",e.bMT(3,1,"lang_testbank_test_config_end_time_bigger_time_star"),""))}function _e(i,I){1&i&&(e.qex(0),e.nrm(1,"br"),e.j41(2,"small",86),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.bVm()),2&i&&(e.R7$(3),e.SpI("* ",e.bMT(4,1,"lang_business_config_educational_program_infrastructure_validate"),""))}function me(i,I){if(1&i){const s=e.RV6();e.j41(0,"div",65)(1,"div",66)(2,"span",67),e.bIt("click",function(){e.eBV(s);const _=e.XpG().$implicit,v=e.XpG(2);return e.Njj(v.openWeekdayConfig(_.controls.id.value))}),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"lucide-icon",68),e.bIt("click",function(){e.eBV(s);const _=e.XpG().$implicit,v=e.XpG(2);return e.Njj(v.openWeekdayConfig(_.controls.id.value))}),e.k0s(),e.j41(6,"div",69)(7,"div",70)(8,"div",71),e.nrm(9,"input",72),e.nI1(10,"mytranslate"),e.nrm(11,"ngx-mat-timepicker",73,2),e.k0s(),e.j41(13,"span",74),e.EFF(14,"\xa0-\xa0"),e.k0s(),e.j41(15,"div",71),e.nrm(16,"input",75),e.nI1(17,"mytranslate"),e.nrm(18,"ngx-mat-timepicker",73,3),e.k0s(),e.DNE(20,ht,3,3,"ng-template",null,4,e.C5r)(22,Rt,3,3,"ng-template",null,5,e.C5r)(24,Nt,1,0,"ng-template",null,6,e.C5r),e.j41(26,"lucide-icon",76),e.bIt("click",function(){e.eBV(s);const _=e.XpG().$implicit,v=e.XpG(2);return e.Njj(v.openWeekdayConfig(_.controls.id.value))}),e.k0s()(),e.j41(27,"mat-form-field",77),e.DNE(28,Ut,3,3,"mat-label",26),e.j41(29,"mat-select",78,7),e.bIt("openedChange",function(_){e.eBV(s);const v=e.XpG().$implicit,k=e.XpG(2);return e.Njj(k.touchedMatSelect(_,v))}),e.j41(31,"mat-option"),e.nrm(32,"ngx-mat-select-search",79),e.nI1(33,"mytranslate"),e.nI1(34,"mytranslate"),e.k0s(),e.DNE(35,Wt,2,2,"mat-option",80),e.k0s()(),e.DNE(36,zt,4,3,"ng-container",26)(37,ce,4,3,"ng-container",26)(38,_e,5,3,"ng-container",26),e.k0s()()()}if(2&i){const s=e.sdS(12),a=e.sdS(19),_=e.sdS(21),v=e.sdS(23),k=e.sdS(25),G=e.sdS(30),H=e.XpG().$implicit,bt=e.XpG(2);e.Y8G("formGroup",H)("ngClass",e.eq3(36,Xt,H.controls.selected.value)),e.R7$(3),e.JRh(e.bMT(4,26,H.controls.name.value)),e.R7$(6),e.FS9("placeholder",e.bMT(10,28,"lang_auto_tu")),e.Y8G("ngxMatTimepicker",s)("format",24),e.R7$(2),e.Y8G("editableHintTmpl",k)("enableKeyboardInput",!0)("cancelBtnTmpl",_)("confirmBtnTmpl",v),e.R7$(5),e.FS9("placeholder",e.bMT(17,30,"lang_auto_den")),e.Y8G("ngxMatTimepicker",a)("format",24),e.R7$(2),e.Y8G("editableHintTmpl",k)("enableKeyboardInput",!0)("cancelBtnTmpl",_)("confirmBtnTmpl",v),e.R7$(10),e.Y8G("ngIf",H.errors&&H.errors.invalidInfrastructure&&!H.controls.infrastructureId.touched),e.R7$(),e.Y8G("value",H.controls.infrastructureId.value),e.R7$(3),e.FS9("placeholderLabel",e.bMT(33,32,"lang_bot_common_search_by_name")),e.FS9("noEntriesFoundLabel",e.bMT(34,34,"lang_bot_common_search_not_found")),e.Y8G("formControl",G.searchControl),e.R7$(3),e.Y8G("ngForOf",G.filter(bt.listInfrastructureObjs,"name")),e.R7$(),e.Y8G("ngIf",H.errors&&H.errors.requireTime),e.R7$(),e.Y8G("ngIf",H.errors&&H.errors.invalidTime),e.R7$(),e.Y8G("ngIf",H.errors&&H.errors.invalidInfrastructure)}}function de(i,I){if(1&i&&(e.qex(0),e.DNE(1,D,5,4,"ng-container",26)(2,me,39,38,"div",63),e.bVm()),2&i){const s=I.$implicit;e.R7$(),e.Y8G("ngIf",!s.controls.selected.value),e.R7$(),e.Y8G("ngIf",s.controls.selected.value)}}function re(i,I){1&i&&(e.qex(0),e.j41(1,"small",62),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.bVm()),2&i&&(e.R7$(2),e.SpI("* ",e.bMT(3,1,"lang_business_config_educational_program_start_time_validate"),""))}function ue(i,I){1&i&&e.nrm(0,"azt-loading-ui",90)}function pe(i,I){if(1&i){const s=e.RV6();e.j41(0,"div",87)(1,"button",88),e.bIt("click",function(){e.eBV(s);const _=e.XpG(2);return e.Njj(_.saveEducationalProgram())}),e.DNE(2,ue,1,0,"azt-loading-ui",89),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()()}if(2&i){const s=e.XpG(2);e.R7$(),e.Y8G("disabled",s.form.invalid||s.isSavingProgram),e.R7$(),e.Y8G("ngIf",s.isSavingProgram),e.R7$(),e.SpI(" ",e.bMT(4,3,"lang_auto_luu")," ")}}function j(i,I){if(1&i){const s=e.RV6();e.DNE(0,te,5,4,"button",12),e.j41(1,"div",13)(2,"div",14)(3,"div",15)(4,"div",16)(5,"div",17)(6,"h3",18),e.EFF(7,"1"),e.k0s()(),e.j41(8,"span",19),e.EFF(9),e.nI1(10,"mytranslate"),e.k0s(),e.j41(11,"lucide-icon",20),e.bIt("click",function(){e.eBV(s);const _=e.XpG();return e.Njj(_.reloadAllEducationalProgram())}),e.k0s()(),e.j41(12,"div",21)(13,"div",22)(14,"ng-scrollbar",23)(15,"div",24),e.DNE(16,mt,8,6,"ng-container",25)(17,P,4,3,"ng-container",26)(18,w,4,3,"ng-container",26),e.k0s()()(),e.j41(19,"div",24)(20,"a",27),e.nI1(21,"navigationLocalize"),e.nrm(22,"lucide-icon",28),e.j41(23,"span",29),e.EFF(24),e.nI1(25,"mytranslate"),e.k0s()()()()(),e.j41(26,"div",15)(27,"div",16)(28,"div",17)(29,"h3",18),e.EFF(30,"2"),e.k0s()(),e.j41(31,"span",30),e.EFF(32),e.nI1(33,"mytranslate"),e.k0s()(),e.j41(34,"div",31)(35,"div",32)(36,"ng-scrollbar",23)(37,"div",33),e.DNE(38,de,3,2,"ng-container",25),e.k0s()()()()(),e.j41(39,"div",15)(40,"div",16)(41,"div",17)(42,"h3",18),e.EFF(43,"3"),e.k0s()(),e.j41(44,"span",30),e.EFF(45),e.nI1(46,"mytranslate"),e.k0s()(),e.j41(47,"div",34)(48,"div",35)(49,"ng-scrollbar",23)(50,"div",36)(51,"mat-form-field",37)(52,"input",38),e.bIt("click",function(){e.eBV(s);const _=e.XpG();return e.Njj(_.openDateTimePicker(1))}),e.k0s(),e.j41(53,"button",39),e.bIt("click",function(_){return e.eBV(s),e.XpG().openDateTimePicker(1),e.Njj(_.stopPropagation())}),e.nrm(54,"lucide-icon",40),e.k0s(),e.j41(55,"ngx-mat-datetime-picker",41,1)(57,"ngx-mat-datepicker-actions")(58,"button",42),e.EFF(59),e.nI1(60,"mytranslate"),e.k0s(),e.j41(61,"button",43),e.EFF(62,"OK"),e.k0s()()()(),e.DNE(63,re,4,3,"ng-container",26),e.k0s()()(),e.DNE(64,pe,5,5,"div",44),e.k0s()()()()}if(2&i){const s=e.sdS(56),a=e.XpG();e.Y8G("ngIf",a.programObj),e.R7$(2),e.Y8G("ngClass",e.eq3(41,S,a.programObj)),e.R7$(7),e.JRh(e.bMT(10,29,"lang_config_educational_program_select_new")),e.R7$(2),e.Y8G("ngClass",e.lJ4(43,z)),e.R7$(3),e.Y8G("visibility","hover")("ngStyle",e.lJ4(44,lt)),e.R7$(2),e.Y8G("ngForOf",a.listEducationalProgramObjs),e.R7$(),e.Y8G("ngIf",a.listEducationalProgramObjs.length>0&&!a.form.controls.chooseProgramId.value),e.R7$(),e.Y8G("ngIf",!a.listEducationalProgramObjs.length),e.R7$(2),e.Y8G("routerLink",e.eq3(45,Ot,e.bMT(21,31,"/business/create-general-educational-program")))("queryParams",e.eq3(47,Lt,a.currentURL)),e.R7$(2),e.Y8G("ngClass",e.lJ4(49,Vt)),e.R7$(2),e.JRh(e.bMT(25,33,"lang_config_educational_program_add_new")),e.R7$(8),e.JRh(e.bMT(33,35,"lang_config_educational_program_add_time")),e.R7$(3),e.Y8G("ngClass",e.l_i(50,Ht,a.form.controls.stepChoose.value<2,a.form.controls.stepChoose.value>=2)),e.R7$(),e.Y8G("visibility","hover")("ngStyle",e.lJ4(53,lt)),e.R7$(2),e.Y8G("ngForOf",a.form.controls.weekdayConfig.controls),e.R7$(7),e.JRh(e.bMT(46,37,"lang_config_educational_program_add_start_time")),e.R7$(3),e.Y8G("ngClass",e.l_i(54,Ht,a.form.controls.stepChoose.value<3,a.form.controls.stepChoose.value>=3)),e.R7$(),e.Y8G("visibility","hover")("ngStyle",e.lJ4(57,lt)),e.R7$(3),e.Y8G("max",a.maxDate)("ngxMatDatetimePicker",s),e.R7$(3),e.Y8G("touchUi",!0)("hideTime",!0),e.R7$(4),e.JRh(e.bMT(60,39,"lang_auto_dong")),e.R7$(4),e.Y8G("ngIf",a.form.controls.startTimeEducationalProgram.invalid),e.R7$(),e.Y8G("ngIf",!a.statusObj.loading)}}let K=(()=>{var i;class I extends o.H{openDateTimePicker(a){1==a&&this.startTime&&this.startTime.open()}showEducationalProgramSubject(a){this.listEducationalProgramObjs.forEach(_=>{_.id==a&&(_.showChild=!_.showChild,_.showChild||_.subjects.forEach(v=>{v.children?.forEach(k=>{k.id==this.form.controls.chooseProgramId.value&&(this.form.controls.stepChoose.setValue(1),this.form.controls.chooseProgramId.setValue(0),k.selected=!1,this.initFormWeekly())})}))})}selectSubject(a,_,v){this.listEducationalProgramObjs.forEach(k=>{k.id==a?k.subjects.forEach(G=>{G.id==_?G.children?.forEach(H=>{H.id==v.id?(H.selected=!H.selected,this.form.controls.chooseProgramId.setValue(H.selected?v.id:0),this.form.controls.stepChoose.setValue(H.selected?2:1)):H.selected=!1}):G.children?.map(H=>H.selected=!1)}):k.subjects.map(G=>G.children?.map(H=>H.selected=!1))})}reloadAllEducationalProgram(){this.form.controls.chooseProgramId.setValue(0),this.initFormWeekly(),this.initData()}openWeekdayConfig(a){this.form.controls.weekdayConfig.controls.forEach(_=>{_.controls.id.value==a&&_.controls.selected.setValue(!_.controls.selected.value)})}touchedMatSelect(a,_){a?_.controls.infrastructureId.markAsTouched():_.controls.infrastructureId.markAsUntouched()}saveEducationalProgram(){this.isSavingProgram=!0;let a={programId:this.form.controls.chooseProgramId.value,studyingTimes:this.convertStudyTimes(),startTime:this.timeService.formatDateTimeToPostToServer(this.form.controls.startTimeEducationalProgram.value)};this.waitDestroy(this.classroomService.apiClassroomsClassroomIdProgramsPost(this.classroomId,a).subscribe({next:_=>{this.showSuccessSnack("lang_educational_program_save_success_educational_program"),this.isSavingProgram=!1,this.saveEducationalProgramEmit.emit(!0)},error:_=>{this.isSavingProgram=!1,this.errorStatusObj(_.error.message,!0)}}))}convertStudyTimes(){let a=[];return this.form.controls.weekdayConfig.controls.forEach(_=>{if(_.controls.selected.value){let v={days:_.controls.id.value,fromHour:new Date("1970-01-01T"+_.controls.startTime.value).getHours(),fromMinute:new Date("1970-01-01T"+_.controls.startTime.value).getMinutes(),toHour:new Date("1970-01-01T"+_.controls.endTime.value).getHours(),toMinute:new Date("1970-01-01T"+_.controls.endTime.value).getMinutes(),roomId:_.controls.infrastructureId.value};a.push(v)}}),a}convertSubjectList(a,_){let v=[];return a.forEach(k=>{if(k.schoolLevelId==_)if(v.filter(H=>H.id==k.schoolSubjectId&&H.levelId==k.schoolLevelId).length)v.forEach(H=>{H.id==k.schoolSubjectId&&H.levelId==k.schoolLevelId&&(H.children?.find(bt=>bt==k)||H.children?.push(k))});else{let H={id:k.schoolSubjectId,levelId:k.schoolLevelId,name:this.schoolSubjectObjs.find(bt=>bt.id==k.schoolSubjectId)?.name,children:[k]};v.push(H)}}),v}convertProgramInfo(a){let _=[],v=this.sAZTranslateService.myTranslateInstant("lang_auto_lop")??"L\u1edbp",k=this.sAZTranslateService.myTranslateInstant("lang_core_buoi")??"Bu\u1ed5i";return a.forEach(G=>{if(G.name=`${G.name} (${G.totalSession} ${k})`,!_.filter(bt=>bt.id==G.schoolLevelId).length){let bt={id:G.schoolLevelId,name:v+" "+G.schoolLevelId,subjects:this.convertSubjectList(a,G.schoolLevelId),showChild:!1};_.push(bt)}}),_.sort((G,H)=>(H.id??0)-(G.id??0))}convertListInfrastructure(a){let _=[],v=this.commonService.myTranslateInstant("lang_infrastructure_seat")??"";return a.forEach(k=>{k.name=`${k.infrastructure?.name??""} - ${k.name} (${k.numberSeat} ${v})`,_.push(k)}),_}getAllInfrastructure(){this.waitDestroy(this.infrastructureService.apiInfrastructuresRoomsGet().subscribe({next:a=>{this.listInfrastructureObjs=this.convertListInfrastructure(a.list),this.stopStatusObj()},error:a=>{this.errorStatusObj(a.error.message,!0)}}))}initFormWeekly(){this.form.controls.startTimeEducationalProgram.setValue(""),this.form.controls.weekdayConfig.clear();for(let a=0;a<7;a++){let _=new rt.gE({id:new rt.MJ(a,{nonNullable:!0}),name:new rt.MJ("lang_config_educational_program_day_"+a,{nonNullable:!0}),startTime:new rt.MJ("",{nonNullable:!0}),endTime:new rt.MJ("",{nonNullable:!0}),infrastructureId:new rt.MJ(0,{nonNullable:!0}),selected:new rt.MJ(!1,{nonNullable:!0}),invalidTime:new rt.MJ(!1,{nonNullable:!0})});this.form.controls.weekdayConfig.push(_)}}initData(){this.initStatusObj(),this.waitDestroy(this.programService.apiProgramsListPost({page:0,size:-1}).subscribe({next:a=>{this.listEducationalProgramObjs=this.convertProgramInfo(a.list),this.getAllInfrastructure()},error:a=>{this.errorStatusObj(a.error.message,!0)}}))}getSubjectObjs(){this.initStatusObj(),this.waitDestroy(this.commonListService.apiCommonListSubjectAndLevelsGet(this.commonService.getBusinessDomainUrl()).subscribe(a=>{1==a.success?(this.schoolSubjectObjs=this.commonService.concatMultipleArray(a.data?.schoolLevelSubjectObjs.map(_=>_.schoolSubjectObjs)??[]),this.initData()):(this.errorStatusObj(a.message??""),this.initData())}))}ngOnInit(){super.ngOnInit(),this.backLink=this.commonService.getMyQueryParam("backto")??"/business/dashboard",this.getSubjectObjs()}ngAfterViewChecked(){this.form.controls.weekdayConfig.controls.filter(_=>_.controls.selected).length?2==this.form.controls.stepChoose.value&&this.form.controls.stepChoose.setValue(3):3==this.form.controls.stepChoose.value&&this.form.controls.stepChoose.setValue(2),this.cd.detectChanges()}ngDoCheck(){this.cd.detectChanges()}constructor(a,_,v,k,G,H,bt){super(),this.cd=a,this.timeService=_,this.classroomService=v,this.programService=k,this.infrastructureService=G,this.sAZTranslateService=H,this.commonListService=bt,this.saveEducationalProgramEmit=new e.bkB,this.backLink="",this.currentURL=this.commonService.getCurrentUrlWithoutLocale(),this.listEducationalProgramObjs=[],this.listInfrastructureObjs=[],this.maxDate=ct.c.maxDateTimePicker,this.curStep=1,this.isSavingProgram=!1,this.schoolSubjectObjs=[],this.form=new rt.gE({chooseProgramId:new rt.MJ(0,{nonNullable:!0,validators:[rt.k0.required,rt.k0.min(1)]}),startTimeEducationalProgram:new rt.MJ("",{nonNullable:!0,validators:[rt.k0.required]}),weekdayConfig:new rt.Yp([]),stepChoose:new rt.MJ(1,{nonNullable:!0})},{validators:[It.addNewEducationalProgramFormValidator]}),this.initFormWeekly()}}return(i=I).\u0275fac=function(a){return new(a||i)(e.rXU(e.gRc),e.rXU(l.F),e.rXU(at.zS),e.rXU(at.sC),e.rXU(at.BU),e.rXU(Z.o),e.rXU(gt.Nz))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-add-new-educational-program"]],viewQuery:function(a,_){if(1&a&&e.GBs($,5),2&a){let v;e.mGM(v=e.lsd())&&(_.startTime=v.first)}},inputs:{classroomId:"classroomId",programObj:"programObj"},outputs:{saveEducationalProgramEmit:"saveEducationalProgramEmit"},features:[e.Jv_([{provide:Tt.$O,useClass:Pt.fb,deps:[W.Ju,wt.ij]},{provide:Tt.vq,useFactory:U.In,deps:[l.F]}]),e.Vt3],decls:5,vars:3,consts:[["doneLoading",""],["startTime",""],["timeStartPicker",""],["timeEndPicker",""],["cancelBtn",""],["confirmBtn",""],["dialHint",""],["searchInListInfrastructure","searchInList"],[1,"mx-auto","mt-3","pb-2"],[3,"formGroup"],["class","block pb-5",3,"currentStatusObj",4,"ngIf","ngIfElse"],[1,"block","pb-5",3,"currentStatusObj"],["azt-track-service","add-new-educational-program-V_itz7ADg","class","btn btn-transparent",3,"disabled","click",4,"ngIf"],[1,"box","px-4","pt-5"],[1,"grid","grid-cols-12",3,"ngClass"],[1,"col-span-12","md:col-span-4"],[1,"flex","px-2","pb-3","items-center"],[1,"bg-info","text-white","h-8","w-8","text-center",2,"border-radius","50%"],[1,"font-bold","text-xl"],[1,"ml-2",2,"vertical-align","middle","font-weight","420","word-break","break-all"],["name","refresh-ccw","size","18",3,"click","ngClass"],[1,"border","border-slate-300",2,"border-bottom","0","border-left","0"],[2,"height","calc(100vh - 250px)","overflow-y","auto"],["pointerEventsMethod","scrollbar",3,"visibility","ngStyle"],[2,"padding-right","1rem"],[4,"ngFor","ngForOf"],[4,"ngIf"],["azt-track-service","add-new-educational-programs-eY0H_Hziew",1,"btn","btn-sm","btn-primary","shadow-md","w-full","block","mx-auto","mt-3","mb-3",3,"routerLink","queryParams"],["name","plus","size","16",3,"ngClass"],[2,"vertical-align","middle","font-size","14px !important"],[1,"ml-2",2,"vertical-align","middle","font-weight","420"],[1,"border","border-slate-300",2,"height","100%","border-bottom","0","border-left","0","border-right","0"],["formArrayName","weekdayConfig",1,"mt-2","pb-2",2,"height","calc(100vh - 205px)","overflow-y","auto",3,"ngClass"],[2,"padding-right","1rem","padding-left","1rem"],[1,"border","border-slate-300",2,"border-bottom","0","border-right","0"],[2,"height","calc(100vh - 250px)","overflow-y","auto",3,"ngClass"],[1,"mt-2",2,"padding-left","1rem","padding-right","1rem"],["appearance","outline"],["matInput","","formControlName","startTimeEducationalProgram","readonly","",3,"click","max","ngxMatDatetimePicker"],["matSuffix","",2,"font-size","18px",3,"click"],["name","calendar-clock","size","16"],[3,"touchUi","hideTime"],["mat-raised-button","","color","secondary","ngxMatDatepickerCancel",""],["mat-raised-button","","color","primary","ngxMatDatepickerApply",""],["class","text-right mt-3 mb-3",4,"ngIf"],["azt-track-service","add-new-educational-program-V_itz7ADg",1,"btn","btn-transparent",3,"click","disabled"],["name","chevron-left","size","20"],[1,"azt-hidden","sm:block","ml-1"],[1,"flex","items-center","mt-2","cursor-pointer",2,"font-weight","420","font-size","15px",3,"click"],["azt-track-service","add-new-educational-programs-B1gOVovsf",1,"mr-2"],["name","chevron-down","size","18",4,"ngIf"],["name","chevron-right","size","18",4,"ngIf"],["name","chevron-down","size","18"],["name","chevron-right","size","18"],[1,"flex","mt-1","ml-2",2,"font-weight","420","font-size","15px"],[1,"clickable",2,"align-items","center"],["class","box bg-slate-400/20 rounded mt-2 py-2 px-3 clickable",3,"ngClass",4,"ngFor","ngForOf"],[1,"box","bg-slate-400/20","rounded","mt-2","py-2","px-3","clickable",3,"ngClass"],["azt-track-service","add-new-educational-programs-bahN75vF_Q",1,"flex","items-center","w-full","justify-between",3,"click"],[2,"vertical-align","middle","text-align","left"],["name","square-check","size","18",3,"ngClass",4,"ngIf"],["name","square-check","size","18",3,"ngClass"],[1,"text-danger","mt-3","float-left","text-left"],["class","box bg-slate-400/20 rounded mt-2 py-2 px-3 text-left relative",3,"formGroup","ngClass",4,"ngIf"],["azt-track-service","add-new-educational-programs-FanOWsky0S",1,"box","bg-slate-400/20","rounded","mt-2","py-2","px-3","clickable","text-left",3,"click","formGroup"],[1,"box","bg-slate-400/20","rounded","mt-2","py-2","px-3","text-left","relative",3,"formGroup","ngClass"],[1,"flex","items-center","justify-between","flex-wrap"],["azt-track-service","add-new-educational-programs-UqgywYmnzK",1,"clickable",3,"click"],["name","square-check","size","18",1,"text-primary","ml-2","clickable",3,"click"],[1,"block","md:ml-2","w-full"],[1,"flex","justify-between",2,"align-items","center"],[2,"width","100%","height","38px","align-items","center"],["type","text","formControlName","startTime","readOnly","",1,"rounded","w-full",3,"placeholder","ngxMatTimepicker","format"],[3,"editableHintTmpl","enableKeyboardInput","cancelBtnTmpl","confirmBtnTmpl"],[1,"text-center",2,"vertical-align","middle","align-self","center"],["type","text","formControlName","endTime","readOnly","",1,"rounded","w-full",3,"placeholder","ngxMatTimepicker","format"],["name","square-check","size","18",1,"text-primary","ml-2","clickable","hiddenIpt","md:inlineBlockIpt",3,"click"],["appearance","outline",1,"mt-2","bg-white","rounded"],["searchInList","","formControlName","infrastructureId",3,"openedChange","value"],[3,"formControl","placeholderLabel","noEntriesFoundLabel"],[3,"value",4,"ngFor","ngForOf"],["mat-raised-button","","color","secondary",2,"margin-right","10px"],["mat-raised-button","","color","primary"],[1,"small"],[3,"value"],[1,"text-danger","mt-2"],[1,"text-danger","mt-1"],[1,"text-right","mt-3","mb-3"],["azt-track-service","add-new-educational-programs-R3hLoR84Ua",1,"btn","w-24","btn-primary",3,"click","disabled"],["class","mr-1",4,"ngIf"],[1,"mr-1"]],template:function(a,_){if(1&a&&(e.j41(0,"div",8)(1,"form",9),e.DNE(2,qt,1,1,"azt-loading-effect",10)(3,j,65,58,"ng-template",null,0,e.C5r),e.k0s()()),2&a){const v=e.sdS(4);e.R7$(),e.Y8G("formGroup",_.form),e.R7$(),e.Y8G("ngIf",_.statusObj.loading)("ngIfElse",v)}},dependencies:[A.Wk,m.YU,m.Sq,m.bT,m.B3,W.wT,Et.$z,it.fg,dt.rl,dt.nJ,dt.yw,_t.VO,Tt.m7,Tt.yF,Tt.HF,Tt.gx,Tt.Uq,nt.gu,nt.wn,rt.qT,rt.me,rt.BC,rt.cb,rt.l_,rt.j4,rt.JD,rt.v8,n.K,ot.t,J.R,Ct.x,jt.WGl,Dt.Yh,Y.U9,y.F2,y.wp],encapsulation:2}),I})();const C=()=>({"zoom-in":!0}),x=()=>[];function O(i,I){if(1&i&&(e.qex(0),e.j41(1,"p",5),e.EFF(2),e.k0s(),e.bVm()),2&i){const s=I.$implicit;e.R7$(2),e.SpI("",s.content," ")}}function R(i,I){if(1&i){const s=e.RV6();e.j41(0,"div",6),e.bIt("click",function(){e.eBV(s);const _=e.XpG(2);return e.Njj(_.editContent())}),e.nrm(1,"lucide-icon",7),e.k0s()}2&i&&(e.R7$(),e.Y8G("ngClass",e.lJ4(1,C)))}function ft(i,I){if(1&i&&(e.j41(0,"div",2)(1,"div"),e.DNE(2,O,3,1,"ng-container",3),e.k0s(),e.DNE(3,R,2,2,"div",4),e.k0s()),2&i){const s=e.XpG();e.R7$(2),e.Y8G("ngForOf",s.contents),e.R7$(),e.Y8G("ngIf",s.teacherRole)}}function Ft(i,I){if(1&i){const s=e.RV6();e.j41(0,"button",21),e.nI1(1,"mytranslate"),e.bIt("click",function(){e.eBV(s);const _=e.XpG().$implicit,v=e.XpG(2);return e.Njj(v.removeContent(_))}),e.nrm(2,"lucide-icon",22),e.k0s()}if(2&i){const s=e.XpG(3);e.FS9("matTooltip",e.bMT(1,2,"lang_button_delete")),e.Y8G("disabled",s.statusObj.loading)}}function Gt(i,I){1&i&&(e.j41(0,"div",23)(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()),2&i&&(e.R7$(2),e.SpI("*",e.bMT(3,1,"lang_core_vui_long_nhap_noi_dung"),""))}function Bt(i,I){if(1&i&&(e.j41(0,"div")(1,"div",17),e.nrm(2,"input",18),e.nI1(3,"mytranslate"),e.DNE(4,Ft,3,4,"button",19),e.k0s(),e.DNE(5,Gt,4,3,"div",20),e.k0s()),2&i){const s=I.$implicit,a=e.XpG(2);e.R7$(2),e.FS9("placeholder",e.bMT(3,5,"lang_core_nhap_noi_dung_buoi_hoc")),e.Y8G("formControl",s.controls.content)("disabled",a.statusObj.loading),e.R7$(2),e.Y8G("ngIf",a.listFormContent.controls.length>1),e.R7$(),e.Y8G("ngIf",s.controls.content.errors)}}function Yt(i,I){1&i&&e.nrm(0,"azt-loading-ui",24),2&i&&e.Y8G("size",16)}function ge(i,I){1&i&&e.nrm(0,"lucide-icon",25)}function se(i,I){if(1&i){const s=e.RV6();e.j41(0,"div",8),e.DNE(1,Bt,6,7,"div",3),e.j41(2,"div",9)(3,"button",10),e.bIt("click",function(){e.eBV(s);const _=e.XpG();return e.Njj(_.viewContent())}),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s(),e.j41(6,"button",11),e.bIt("click",function(){e.eBV(s);const _=e.XpG();return e.Njj(_.addContent())}),e.nrm(7,"lucide-icon",12),e.j41(8,"span",13),e.EFF(9),e.nI1(10,"mytranslate"),e.k0s()(),e.j41(11,"button",14),e.bIt("click",function(){e.eBV(s);const _=e.XpG();return e.Njj(_.saveContent())}),e.DNE(12,Yt,1,1,"azt-loading-ui",15)(13,ge,1,0,"lucide-icon",16),e.j41(14,"span",13),e.EFF(15),e.nI1(16,"mytranslate"),e.k0s()()()()}if(2&i){let s;const a=e.XpG();e.R7$(),e.Y8G("ngForOf",null!==(s=null==a.listFormContent?null:a.listFormContent.controls)&&void 0!==s?s:e.lJ4(15,x)),e.R7$(2),e.Y8G("disabled",a.statusObj.loading),e.R7$(),e.SpI(" ",e.bMT(5,9,"lang_button_cancel")," "),e.R7$(2),e.Y8G("disabled",a.statusObj.loading||a.isEmptyContent()),e.R7$(3),e.SpI(" ",e.bMT(10,11,"lang_button_add")," "),e.R7$(2),e.Y8G("disabled",a.statusObj.loading||a.isEmptyContent()),e.R7$(),e.Y8G("ngIf",a.statusObj.loading),e.R7$(),e.Y8G("ngIf",!a.statusObj.loading),e.R7$(2),e.SpI(" ",e.bMT(16,13,"lang_button_save")," ")}}let f=(()=>{var i;class I extends o.H{isEmptyContent(){return!!this.listFormContent.controls.find(a=>a.controls.content.errors)}editContent(){this.listFormContent=new rt.Yp(this.contents.map(a=>new rt.gE({contentId:new rt.MJ(a.id,{nonNullable:!0,validators:[rt.k0.required]}),content:new rt.MJ(a.content,{nonNullable:!0,validators:[rt.k0.required]})})))}addContent(){var a=this.listFormContent.controls.map(_=>_.getRawValue().contentId);this.listFormContent.controls.push(new rt.gE({contentId:new rt.MJ(this.commonService.getVirtualIdWithoutInList(!0,a),{nonNullable:!0,validators:[rt.k0.required]}),content:new rt.MJ("",{nonNullable:!0,validators:[rt.k0.required]})}))}removeContent(a){this.listFormContent.controls=this.listFormContent.controls.filter(_=>_!=a)}viewContent(){this.listFormContent.clear()}saveContent(){this.initStatusObj();let a={contents:this.listFormContent?.controls.map(_=>({id:_.getRawValue().contentId<0?0:_.getRawValue().contentId,content:_.getRawValue().content}))??[]};this.waitDestroy(this.classroomService.apiClassroomsClassroomIdSessionsSessionIdPut(this.classroomId,this.sessionId,a).subscribe({next:_=>{this.showSuccessSnack("lang_auto_chinh_sua_thanh_cong"),this.close.emit(!0)},error:_=>{this.errorStatusObj(_.error.message,!0)}}))}ngOnInit(){super.ngOnInit()}constructor(a){super(),this.classroomService=a,this.contents=[],this.close=new e.bkB,this.listFormContent=new rt.Yp([])}}return(i=I).\u0275fac=function(a){return new(a||i)(e.rXU(at.zS))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-education-program-session-content-form"]],inputs:{teacherRole:"teacherRole",contents:"contents",classroomId:"classroomId",sessionId:"sessionId"},outputs:{close:"close"},features:[e.Jv_([{provide:Tt.$O,useClass:Pt.fb,deps:[W.Ju,wt.ij]},{provide:Tt.vq,useFactory:U.In,deps:[l.F]}]),e.Vt3],decls:2,vars:2,consts:[["class","flex justify-between items-center",4,"ngIf"],["class","mb-2",4,"ngIf"],[1,"flex","justify-between","items-center"],[4,"ngFor","ngForOf"],["azt-track-service","edit-content-session-clV7wEeRi","class","mr-2 ml-1",3,"click",4,"ngIf"],[1,"text-danger","font-medium"],["azt-track-service","edit-content-session-clV7wEeRi",1,"mr-2","ml-1",3,"click"],["name","pencil-line","size","16",3,"ngClass"],[1,"mb-2"],[1,"mt-2","flex","justify-end"],["azt-track-service","edit-content-session-fb5Kcem4lN",1,"btn","btn-secondary","py-1",3,"click","disabled"],["azt-track-service","edit-content-session-LUmRlMXNo0",1,"btn","btn-info","py-1","ml-2",3,"click","disabled"],["name","plus","size","16"],[1,"ml-1"],["azt-track-service","edit-content-session-u3EiKdwIT9",1,"btn","btn-primary","ml-2","py-1",3,"click","disabled"],[3,"size",4,"ngIf"],["name","save","size","16",4,"ngIf"],[1,"flex","items-center"],["type","text",1,"form-control","mt-2","mb-2",3,"formControl","disabled","placeholder"],["class","btn btn-light ml-2 px-2",3,"matTooltip","disabled","click",4,"ngIf"],["class","text-xs font-medium text-danger ng-star-inserted",4,"ngIf"],[1,"btn","btn-light","ml-2","px-2",3,"click","matTooltip","disabled"],["name","trash-2","size","20"],[1,"text-xs","font-medium","text-danger","ng-star-inserted"],[3,"size"],["name","save","size","16"]],template:function(a,_){1&a&&e.DNE(0,ft,4,2,"div",0)(1,se,17,16,"div",1),2&a&&(e.Y8G("ngIf",0==_.listFormContent.controls.length),e.R7$(),e.Y8G("ngIf",_.listFormContent.controls.length>0))},dependencies:[m.YU,m.Sq,m.bT,X.oV,rt.me,rt.BC,rt.l_,J.R,jt.WGl,y.wp],encapsulation:2}),I})();const N=i=>({"text-slate-700":i}),T=(i,I)=>({"text-slate-600":i,"text-warning":I}),b=i=>[i],u=i=>({backto:i}),M=()=>({"text-pending":!0}),$t=()=>({"text-primary":!0}),Jt=(i,I)=>({"text-success":i,"text-slate-700/50":I}),he=(i,I,s,a,_,v)=>({backto:i,classroomId:I,programId:s,sessionId:a,levelId:_,subjectId:v}),le=(i,I)=>({"text-slate-600":i,"btn-text-primary":I}),fe=i=>({width:i}),be=i=>({"dropdown-menu-scroll":i}),ve=()=>({"mr-2":!0});function Ie(i,I){if(1&i&&(e.j41(0,"div",12),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i){const s=e.XpG();e.R7$(),e.SpI(" ",e.bMT(2,1,s.errorApiMessage)," ")}}function Se(i,I){if(1&i){const s=e.RV6();e.j41(0,"app-add-new-educational-program",15),e.bIt("saveEducationalProgramEmit",function(_){e.eBV(s);const v=e.XpG(2);return e.Njj(v.emitDataReloadSession(_))}),e.k0s()}if(2&i){const s=e.XpG(2);e.Y8G("classroomId",s.classroomId)("programObj",s.programObj)}}function je(i,I){if(1&i){const s=e.RV6();e.j41(0,"button",21),e.bIt("click",function(){e.eBV(s);const _=e.XpG(3);return e.Njj(_.addNewEducationalProgram())}),e.nrm(1,"lucide-icon",22),e.j41(2,"span",23),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()()}2&i&&(e.R7$(3),e.JRh(e.bMT(4,1,"lang_educational_program_select_another")))}function ke(i,I){if(1&i){const s=e.RV6();e.j41(0,"div",26)(1,"a",27),e.bIt("auxclick",function(_){const v=e.eBV(s).$implicit,k=e.XpG(4);return e.Njj(k.previewFile(v,_))})("click",function(_){const v=e.eBV(s).$implicit,k=e.XpG(4);return e.Njj(k.previewFile(v,_))}),e.nrm(2,"azt-document-type-file",28),e.k0s()()}if(2&i){let s;const a=I.$implicit;e.R7$(2),e.Y8G("type",a.documentType)("name",null!==(s=a.name)&&void 0!==s?s:"")("url",a.link)("iconVerticalStyle","baseline")("customClass","w-6 h-6")}}function xe(i,I){if(1&i&&(e.qex(0),e.j41(1,"div",24),e.DNE(2,ke,3,5,"div",25),e.k0s(),e.bVm()),2&i){const s=e.XpG(3);e.R7$(2),e.Y8G("ngForOf",s.generalDocumentObjs)}}function Te(i,I){1&i&&e.nrm(0,"lucide-icon",33)}function Oe(i,I){1&i&&e.nrm(0,"lucide-icon",34)}function Ee(i,I){1&i&&(e.j41(0,"button",43),e.nrm(1,"lucide-icon",44),e.j41(2,"span",45),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()()),2&i&&(e.R7$(3),e.JRh(e.bMT(4,1,"lang_student_absence")))}function ye(i,I){1&i&&(e.j41(0,"button",46),e.nrm(1,"lucide-icon",44),e.k0s())}function Re(i,I){if(1&i&&(e.j41(0,"div",40),e.DNE(1,Ee,5,3,"button",41),e.nI1(2,"allowFeatureBusinessForUser"),e.nI1(3,"async"),e.DNE(4,ye,2,0,"button",42),e.nI1(5,"allowFeatureBusinessForUser"),e.nI1(6,"async"),e.k0s()),2&i){const s=e.XpG().$implicit;e.R7$(),e.Y8G("ngIf",(null==s.studentAttendance?null:s.studentAttendance.absent)&&e.bMT(3,5,e.i5U(2,2,"training_center_student_attendance",!0))),e.R7$(3),e.Y8G("ngIf",(null==s.studentAttendance?null:s.studentAttendance.absent)&&e.bMT(6,10,e.i5U(5,7,"training_center_student_attendance",!0)))}}function we(i,I){if(1&i&&(e.qex(0),e.j41(1,"span",52),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.bVm()),2&i){const s=e.XpG(2).$implicit;e.R7$(2),e.JRh(e.bMT(3,1,"lang_test_market_address")+": "+(null==s.room.infrastructure?null:s.room.infrastructure.name)+" - "+s.room.name)}}function Fe(i,I){if(1&i){const s=e.RV6();e.j41(0,"div",47),e.bIt("click",function(){e.eBV(s);const _=e.XpG().$implicit,v=e.XpG(5);return e.Njj(v.expandSessionObj(_))}),e.j41(1,"div",48)(2,"h3",49)(3,"span",50),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s(),e.j41(6,"span",51),e.EFF(7),e.nI1(8,"mytranslate"),e.k0s()(),e.DNE(9,we,4,3,"ng-container",14),e.k0s()()}if(2&i){const s=e.XpG().$implicit;e.R7$(3),e.Y8G("ngClass",e.eq3(8,N,s.outOfDate)),e.R7$(),e.JRh(e.bMT(5,4,"lang_core_buoi")+" "+s.sort),e.R7$(3),e.JRh(e.bMT(8,6,"lang_config_educational_program_day_"+s.day)+", "+s.dateSession+" "+s.timeSession),e.R7$(2),e.Y8G("ngIf",s.room)}}function De(i,I){if(1&i&&(e.qex(0),e.j41(1,"span",70),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.bVm()),2&i){const s=e.XpG(2).$implicit;e.R7$(2),e.JRh(e.bMT(3,1,"lang_test_market_address")+": "+(null==s.room.infrastructure?null:s.room.infrastructure.name)+" - "+s.room.name)}}function Pe(i,I){if(1&i){const s=e.RV6();e.j41(0,"div",59)(1,"div",60)(2,"span",61),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()(),e.j41(5,"app-education-program-session-content-form",71),e.bIt("close",function(_){e.eBV(s);const v=e.XpG(2).$implicit,k=e.XpG(5);return e.Njj(k.reloadData(_,v))}),e.k0s()()}if(2&i){const s=e.XpG(2).$implicit,a=e.XpG(5);e.R7$(2),e.Y8G("ngClass",e.l_i(8,T,s.outOfDate,!s.outOfDate)),e.R7$(),e.JRh(e.bMT(4,6,"lang_auto_noi_dung")),e.R7$(2),e.Y8G("contents",s.contents)("teacherRole",a.teacherRole)("classroomId",a.classroomId)("sessionId",s.id)}}function Me(i,I){1&i&&(e.qex(0),e.j41(1,"div",82),e.nrm(2,"img",83),e.nI1(3,"convertCdnLinkOfGitHub"),e.k0s(),e.bVm()),2&i&&(e.R7$(2),e.Y8G("src",e.bMT(3,1,"images/type_file/unknown-file.svg"),e.B4B))}function ze(i,I){1&i&&(e.qex(0),e.nrm(1,"lucide-icon",84),e.bVm()),2&i&&(e.R7$(),e.Y8G("ngClass",e.lJ4(1,M)))}function Ge(i,I){1&i&&(e.qex(0),e.nrm(1,"lucide-icon",85),e.bVm()),2&i&&(e.R7$(),e.Y8G("ngClass",e.lJ4(1,$t)))}function $e(i,I){if(1&i&&(e.j41(0,"small",86),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i){const s=e.XpG().$implicit;e.R7$(),e.E5c(" ",e.bMT(2,3,"lang_auto_da_nop"),":\xa0",s.totalFinish,"/",s.totalAttendee," ")}}function Ne(i,I){if(1&i&&(e.j41(0,"small",87),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i){const s=e.XpG().$implicit;e.Y8G("ngClass",e.l_i(4,Jt,s.totalFinish,!s.totalFinish)),e.R7$(),e.SpI(" ",e.bMT(2,2,s.totalFinish?"lang_auto_da_nop":"lang_auto_chua_nop")," ")}}function Ae(i,I){if(1&i){const s=e.RV6();e.j41(0,"small",88),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"button",89),e.nI1(4,"mytranslate"),e.bIt("click",function(_){e.eBV(s);const v=e.XpG().$implicit,k=e.XpG(2).$implicit;return e.XpG(5).editMarkCoefficient(v,k),_.stopPropagation(),e.Njj(_.preventDefault())}),e.nrm(5,"lucide-icon",90),e.k0s()()}if(2&i){const s=e.XpG().$implicit;e.R7$(),e.Lme(" ",e.bMT(2,3,"lang_student_score_factor"),":\xa0",s.markCoefficient," "),e.R7$(2),e.FS9("matTooltip",e.bMT(4,5,"lang_student_edit_mark_coefficient"))}}function Le(i,I){if(1&i&&(e.j41(0,"div",72)(1,"a",73),e.nI1(2,"navigationLocalize"),e.j41(3,"div",74)(4,"div",75),e.DNE(5,Me,4,3,"ng-container",14)(6,ze,2,2,"ng-container",14)(7,Ge,2,2,"ng-container",14),e.k0s(),e.j41(8,"div",76)(9,"div",77)(10,"span",78,2),e.EFF(12),e.k0s(),e.DNE(13,$e,3,5,"small",79)(14,Ne,3,7,"small",80)(15,Ae,6,7,"small",81),e.k0s()()()()()),2&i){let s;const a=I.$implicit,_=e.sdS(11),v=e.XpG(7);e.R7$(),e.Y8G("routerLink",e.eq3(14,b,e.bMT(2,12,a.documentType==v.allDocumentTypes.exam?v.teacherRole?"/admin/testbank/exam-results-list/"+(null!==(s=a.categoryId)&&void 0!==s?s:0)+"/"+a.refId+"/0":"/de-thi/"+a.hashId:v.teacherRole?"/admin/testbank/homework-results-list/"+(null!==(s=a.classroomId)&&void 0!==s?s:0)+"/"+a.refId+"/"+a.hashId:"/bai-tap/"+a.hashId)))("queryParams",e.eq3(16,u,v.currentUrl)),e.R7$(4),e.Y8G("ngIf",!a.type),e.R7$(),e.Y8G("ngIf","exam"==a.type),e.R7$(),e.Y8G("ngIf","homework"==a.type),e.R7$(3),e.FS9("matTooltip",a.name),e.Y8G("isDisabledTooltip",!1)("matTooltipDisabled",_.isDisabled),e.R7$(2),e.SpI(" ",a.name," "),e.R7$(),e.Y8G("ngIf",v.teacherRole),e.R7$(),e.Y8G("ngIf",!v.teacherRole),e.R7$(),e.Y8G("ngIf",v.teacherRole)}}function d(i,I){if(1&i&&(e.j41(0,"a",91),e.nI1(1,"navigationLocalize"),e.j41(2,"span",92),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()()),2&i){let s;const a=e.XpG(2).$implicit,_=e.XpG(5);e.Y8G("routerLink",e.eq3(8,b,e.bMT(1,4,"/admin/testbank/create-new-document/0")))("queryParams",e.l4e(10,he,_.currentUrl,_.classroomId,a.programId,a.id,null!==(s=null==_.programObj?null:_.programObj.schoolLevelId)&&void 0!==s?s:0,null!==(s=null==_.programObj?null:_.programObj.schoolSubjectId)&&void 0!==s?s:0))("ngClass",e.l_i(17,le,a.outOfDate,!a.outOfDate)),e.R7$(3),e.SpI("+ ",e.bMT(4,6,"lang_business_assign_exams"),"")}}function E(i,I){if(1&i){const s=e.RV6();e.j41(0,"div",106)(1,"a",107),e.bIt("click",function(_){let v;e.eBV(s);const k=e.XpG(2).$implicit,G=e.XpG(3).$implicit,H=e.XpG(4).$implicit;return e.XpG(5).removeDocumentFromSession(H,null!==(v=k.sessionId)&&void 0!==v?v:0,k.id,G),_.preventDefault(),e.Njj(_.stopPropagation())}),e.nrm(2,"lucide-icon",108),e.nI1(3,"mytranslate"),e.k0s()()}2&i&&(e.R7$(2),e.Y8G("matTooltip",e.bMT(3,1,"lang_educational_program_remove_document_from_session")))}function p(i,I){if(1&i){const s=e.RV6();e.j41(0,"li")(1,"a",103),e.bIt("auxclick",function(_){e.eBV(s);const v=e.XpG().$implicit,k=e.XpG(12);return e.Njj(k.previewFile(v,_))})("click",function(_){e.eBV(s);const v=e.XpG().$implicit,k=e.XpG(12);return e.Njj(k.previewFile(v,_))}),e.nrm(2,"azt-document-type-file",104),e.DNE(3,E,4,3,"div",105),e.k0s()()}if(2&i){let s;const a=e.XpG().$implicit,_=e.XpG(12);e.R7$(2),e.Y8G("truncateString",!1)("textWidth","99%")("type",a.documentType)("showBorder",!1)("onlyOneLine",!0)("iconVerticalStyle","baseline")("name",null!==(s=a.name)&&void 0!==s?s:"")("url",a.link)("customClass","w-6 h-6"),e.R7$(),e.Y8G("ngIf",_.teacherRole)}}function c(i,I){if(1&i&&(e.qex(0),e.DNE(1,p,4,10,"li",14),e.bVm()),2&i){const s=e.XpG(3).$implicit,a=e.XpG(9);e.R7$(),e.Y8G("ngIf",s.name==a.allDocumentGroupTypes.video)}}function h(i,I){if(1&i&&(e.qex(0),e.j41(1,"h3",98),e.nrm(2,"lucide-icon",99),e.j41(3,"span",23),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()(),e.j41(6,"mat-menu",100,4)(8,"div",101)(9,"ul",102),e.DNE(10,c,2,1,"ng-container",20),e.k0s()()(),e.bVm()),2&i){const s=e.sdS(7),a=e.XpG(2).$implicit,_=e.XpG(4).last,v=e.XpG(2).last;e.XpG();const k=e.sdS(2),G=e.XpG(2);e.R7$(),e.Y8G("matMenuTriggerFor",a.documentObjs.length?s:null),e.R7$(3),e.Lme("",e.bMT(5,6,"lang_config_educational_program_"+a.name),""," ("+a.documentObjs.length+")",""),e.R7$(4),e.Y8G("ngStyle",e.eq3(8,fe,G.isMobileWebView?k.offsetWidth-40+"px":"27rem")),e.R7$(),e.Y8G("ngClass",e.eq3(10,be,v&&_||a.documentObjs.length>5)),e.R7$(),e.Y8G("ngForOf",a.documentObjs)}}function B(i,I){if(1&i){const s=e.RV6();e.j41(0,"div",106)(1,"a",110),e.bIt("click",function(_){let v;e.eBV(s);const k=e.XpG(2).$implicit,G=e.XpG(3).$implicit,H=e.XpG(4).$implicit;return e.XpG(5).removeDocumentFromSession(H,null!==(v=k.sessionId)&&void 0!==v?v:0,k.id,G),_.preventDefault(),e.Njj(_.stopPropagation())}),e.nrm(2,"lucide-icon",108),e.nI1(3,"mytranslate"),e.k0s()()}2&i&&(e.R7$(2),e.Y8G("matTooltip",e.bMT(3,1,"lang_educational_program_remove_document_from_session")))}function yt(i,I){if(1&i){const s=e.RV6();e.j41(0,"li")(1,"a",109),e.bIt("auxclick",function(_){e.eBV(s);const v=e.XpG().$implicit,k=e.XpG(12);return e.Njj(k.previewFile(v,_))})("click",function(_){e.eBV(s);const v=e.XpG().$implicit,k=e.XpG(12);return e.Njj(k.previewFile(v,_))}),e.nrm(2,"azt-document-type-file",104),e.DNE(3,B,4,3,"div",105),e.k0s()()}if(2&i){let s;const a=e.XpG().$implicit,_=e.XpG(12);e.R7$(2),e.Y8G("truncateString",!1)("textWidth","99%")("type",a.documentType)("showBorder",!1)("onlyOneLine",!0)("iconVerticalStyle","baseline")("name",null!==(s=a.name)&&void 0!==s?s:"")("url",a.link)("customClass","w-6 h-6"),e.R7$(),e.Y8G("ngIf",_.teacherRole)}}function At(i,I){if(1&i&&(e.qex(0),e.DNE(1,yt,4,10,"li",14),e.bVm()),2&i){const s=e.XpG(3).$implicit,a=e.XpG(9);e.R7$(),e.Y8G("ngIf",s.name==a.allDocumentGroupTypes.document)}}function Ce(i,I){if(1&i&&(e.qex(0),e.j41(1,"h3",98),e.nrm(2,"lucide-icon",99),e.j41(3,"span",23),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()(),e.j41(6,"mat-menu",100,5)(8,"div",101)(9,"ul",102),e.DNE(10,At,2,1,"ng-container",20),e.k0s()()(),e.bVm()),2&i){const s=e.sdS(7),a=e.XpG(2).$implicit,_=e.XpG(4).last,v=e.XpG(2).last;e.XpG();const k=e.sdS(2),G=e.XpG(2);e.R7$(),e.Y8G("matMenuTriggerFor",a.documentObjs.length?s:null),e.R7$(3),e.Lme("",e.bMT(5,6,"lang_config_educational_program_"+a.name),""," ("+a.documentObjs.length+")",""),e.R7$(4),e.Y8G("ngStyle",e.eq3(8,fe,G.isMobileWebView?k.offsetWidth-40+"px":"27rem")),e.R7$(),e.Y8G("ngClass",e.eq3(10,be,v&&_||a.documentObjs.length>5)),e.R7$(),e.Y8G("ngForOf",a.documentObjs)}}function Ve(i,I){if(1&i){const s=e.RV6();e.j41(0,"div",106)(1,"a",112),e.bIt("click",function(_){let v;e.eBV(s);const k=e.XpG(2).$implicit,G=e.XpG(3).$implicit,H=e.XpG(4).$implicit;return e.XpG(5).removeDocumentFromSession(H,null!==(v=k.sessionId)&&void 0!==v?v:0,k.id,G),_.preventDefault(),e.Njj(_.stopPropagation())}),e.nrm(2,"lucide-icon",108),e.nI1(3,"mytranslate"),e.k0s()()}2&i&&(e.R7$(2),e.Y8G("matTooltip",e.bMT(3,1,"lang_educational_program_remove_document_from_session")))}function Xe(i,I){if(1&i){const s=e.RV6();e.j41(0,"li")(1,"a",111),e.bIt("auxclick",function(_){e.eBV(s);const v=e.XpG().$implicit,k=e.XpG(12);return e.Njj(k.previewFile(v,_))})("click",function(_){e.eBV(s);const v=e.XpG().$implicit,k=e.XpG(12);return e.Njj(k.previewFile(v,_))}),e.nrm(2,"azt-document-type-file",104),e.DNE(3,Ve,4,3,"div",105),e.k0s()()}if(2&i){let s;const a=e.XpG().$implicit,_=e.XpG(12);e.R7$(2),e.Y8G("truncateString",!1)("textWidth","99%")("type",a.documentType)("showBorder",!1)("onlyOneLine",!0)("iconVerticalStyle","baseline")("name",null!==(s=a.name)&&void 0!==s?s:"")("url",a.link)("customClass","w-6 h-6"),e.R7$(),e.Y8G("ngIf",_.teacherRole)}}function Ue(i,I){if(1&i&&(e.qex(0),e.DNE(1,Xe,4,10,"li",14),e.bVm()),2&i){const s=e.XpG(3).$implicit,a=e.XpG(9);e.R7$(),e.Y8G("ngIf",s.name==a.allDocumentGroupTypes.homework)}}function We(i,I){if(1&i&&(e.qex(0),e.j41(1,"h3",98),e.nrm(2,"lucide-icon",99),e.j41(3,"span",23),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()(),e.j41(6,"mat-menu",100,6)(8,"div",101)(9,"ul",102),e.DNE(10,Ue,2,1,"ng-container",20),e.k0s()()(),e.bVm()),2&i){const s=e.sdS(7),a=e.XpG(2).$implicit,_=e.XpG(4).last,v=e.XpG(2).last;e.XpG();const k=e.sdS(2),G=e.XpG(2);e.R7$(),e.Y8G("matMenuTriggerFor",a.documentObjs.length?s:null),e.R7$(3),e.Lme("",e.bMT(5,6,"lang_config_educational_program_"+a.name),""," ("+a.documentObjs.length+")",""),e.R7$(4),e.Y8G("ngStyle",e.eq3(8,fe,G.isMobileWebView?k.offsetWidth-40+"px":"27rem")),e.R7$(),e.Y8G("ngClass",e.eq3(10,be,v&&_||a.documentObjs.length>5)),e.R7$(),e.Y8G("ngForOf",a.documentObjs)}}function Je(i,I){if(1&i){const s=e.RV6();e.j41(0,"div",106)(1,"a",115),e.bIt("click",function(_){let v;e.eBV(s);const k=e.XpG(2).$implicit,G=e.XpG(3).$implicit,H=e.XpG(4).$implicit;return e.XpG(5).removeDocumentFromSession(H,null!==(v=k.sessionId)&&void 0!==v?v:0,k.id,G),_.preventDefault(),e.Njj(_.stopPropagation())}),e.nrm(2,"lucide-icon",108),e.nI1(3,"mytranslate"),e.k0s()()}2&i&&(e.R7$(2),e.Y8G("matTooltip",e.bMT(3,1,"lang_educational_program_remove_document_from_session")))}function Ke(i,I){if(1&i){const s=e.RV6();e.j41(0,"li")(1,"a",113),e.bIt("auxclick",function(_){e.eBV(s);const v=e.XpG().$implicit,k=e.XpG(12);return e.Njj(k.previewFile(v,_))})("click",function(_){e.eBV(s);const v=e.XpG().$implicit,k=e.XpG(12);return e.Njj(k.previewFile(v,_))}),e.nrm(2,"azt-document-type-file",114),e.DNE(3,Je,4,3,"div",105),e.k0s()()}if(2&i){let s;const a=e.XpG().$implicit,_=e.XpG(12);e.R7$(2),e.Y8G("truncateString",!1)("type",a.documentType)("textWidth","99%")("showBorder",!1)("onlyOneLine",!0)("iconVerticalStyle","baseline")("name",null!==(s=a.name)&&void 0!==s?s:"")("url",a.link)("customClass","w-6 h-6"),e.R7$(),e.Y8G("ngIf",_.teacherRole)}}function He(i,I){if(1&i&&(e.qex(0),e.DNE(1,Ke,4,10,"li",14),e.bVm()),2&i){const s=e.XpG(3).$implicit,a=e.XpG(9);e.R7$(),e.Y8G("ngIf",s.name==a.allDocumentGroupTypes.homework_view)}}function Qe(i,I){if(1&i&&(e.qex(0),e.j41(1,"h3",98),e.nrm(2,"lucide-icon",99),e.j41(3,"span",23),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()(),e.j41(6,"mat-menu",100,7)(8,"div",101)(9,"ul",102),e.DNE(10,He,2,1,"ng-container",20),e.k0s()()(),e.bVm()),2&i){const s=e.sdS(7),a=e.XpG(2).$implicit,_=e.XpG(4).last,v=e.XpG(2).last;e.XpG();const k=e.sdS(2),G=e.XpG(2);e.R7$(),e.Y8G("matMenuTriggerFor",a.documentObjs.length?s:null),e.R7$(3),e.Lme("",e.bMT(5,6,"lang_config_educational_program_"+a.name),""," ("+a.documentObjs.length+")",""),e.R7$(4),e.Y8G("ngStyle",e.eq3(8,fe,G.isMobileWebView?k.offsetWidth-40+"px":"27rem")),e.R7$(),e.Y8G("ngClass",e.eq3(10,be,v&&_||a.documentObjs.length>5)),e.R7$(),e.Y8G("ngForOf",a.documentObjs)}}function Ze(i,I){if(1&i){const s=e.RV6();e.j41(0,"div",106)(1,"a",117),e.bIt("click",function(_){let v;e.eBV(s);const k=e.XpG(2).$implicit,G=e.XpG(3).$implicit,H=e.XpG(4).$implicit;return e.XpG(5).removeDocumentFromSession(H,null!==(v=k.sessionId)&&void 0!==v?v:0,k.id,G),_.preventDefault(),e.Njj(_.stopPropagation())}),e.nrm(2,"lucide-icon",108),e.nI1(3,"mytranslate"),e.k0s()()}2&i&&(e.R7$(2),e.Y8G("matTooltip",e.bMT(3,1,"lang_educational_program_remove_document_from_session")))}function qe(i,I){if(1&i){const s=e.RV6();e.j41(0,"li")(1,"a",116),e.bIt("auxclick",function(_){e.eBV(s);const v=e.XpG().$implicit,k=e.XpG(12);return e.Njj(k.previewFile(v,_))})("click",function(_){e.eBV(s);const v=e.XpG().$implicit,k=e.XpG(12);return e.Njj(k.previewFile(v,_))}),e.nrm(2,"azt-document-type-file",114),e.DNE(3,Ze,4,3,"div",105),e.k0s()()}if(2&i){let s;const a=e.XpG().$implicit,_=e.XpG(12);e.R7$(2),e.Y8G("truncateString",!1)("type",a.documentType)("textWidth","99%")("showBorder",!1)("onlyOneLine",!0)("iconVerticalStyle","baseline")("name",null!==(s=a.name)&&void 0!==s?s:"")("url",a.link)("customClass","w-6 h-6"),e.R7$(),e.Y8G("ngIf",_.teacherRole)}}function tn(i,I){if(1&i&&(e.qex(0),e.DNE(1,qe,4,10,"li",14),e.bVm()),2&i){const s=e.XpG(3).$implicit,a=e.XpG(9);e.R7$(),e.Y8G("ngIf",s.name==a.allDocumentGroupTypes.unknown)}}function en(i,I){if(1&i&&(e.qex(0),e.j41(1,"h3",98),e.nrm(2,"lucide-icon",99),e.j41(3,"span",23),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()(),e.j41(6,"mat-menu",100,8)(8,"div",101)(9,"ul",102),e.DNE(10,tn,2,1,"ng-container",20),e.k0s()()(),e.bVm()),2&i){const s=e.sdS(7),a=e.XpG(2).$implicit,_=e.XpG(4).last,v=e.XpG(2).last;e.XpG();const k=e.sdS(2),G=e.XpG(2);e.R7$(),e.Y8G("matMenuTriggerFor",s),e.R7$(3),e.Lme("",e.bMT(5,6,"lang_config_educational_program_"+a.name),""," ("+a.documentObjs.length+")",""),e.R7$(4),e.Y8G("ngStyle",e.eq3(8,fe,G.isMobileWebView?k.offsetWidth-40+"px":"18rem")),e.R7$(),e.Y8G("ngClass",e.eq3(10,be,v&&_||a.documentObjs.length>5)),e.R7$(),e.Y8G("ngForOf",a.documentObjs)}}function nn(i,I){if(1&i&&(e.j41(0,"div",97),e.DNE(1,h,11,12,"ng-container",14)(2,Ce,11,12,"ng-container",14)(3,We,11,12,"ng-container",14)(4,Qe,11,12,"ng-container",14)(5,en,11,12,"ng-container",14),e.k0s()),2&i){const s=e.XpG().$implicit,a=e.XpG(9);e.R7$(),e.Y8G("ngIf",s.name==a.allDocumentGroupTypes.video),e.R7$(),e.Y8G("ngIf",s.name==a.allDocumentGroupTypes.document),e.R7$(),e.Y8G("ngIf",s.name==a.allDocumentGroupTypes.homework),e.R7$(),e.Y8G("ngIf",s.name==a.allDocumentGroupTypes.homework_view),e.R7$(),e.Y8G("ngIf",s.name==a.allDocumentGroupTypes.unknown&&s.documentObjs.length)}}function on(i,I){if(1&i&&(e.qex(0),e.DNE(1,nn,6,5,"div",96),e.bVm()),2&i){const s=I.$implicit,a=e.XpG(9);e.R7$(),e.Y8G("ngIf",s.name!=a.allDocumentGroupTypes.unknown||s.name==a.allDocumentGroupTypes.unknown&&s.documentObjs.length)}}function an(i,I){if(1&i&&(e.qex(0),e.DNE(1,on,2,1,"ng-container",20),e.bVm()),2&i){const s=e.XpG(3).$implicit;e.R7$(),e.Y8G("ngForOf",s.groupDocumentObjs)}}function sn(i,I){if(1&i){const s=e.RV6();e.j41(0,"div",106)(1,"a",122),e.bIt("click",function(){let _;e.eBV(s);const v=e.XpG().$implicit,k=e.XpG(4).$implicit,G=e.XpG(5);return e.Njj(G.removeDocumentFromSession(k,null!==(_=v.sessionId)&&void 0!==_?_:0,v.id))}),e.nrm(2,"lucide-icon",108),e.nI1(3,"mytranslate"),e.k0s()()}2&i&&(e.R7$(2),e.Y8G("matTooltip",e.bMT(3,1,"lang_educational_program_remove_document_from_session")))}function rn(i,I){if(1&i){const s=e.RV6();e.j41(0,"div",119)(1,"a",120),e.bIt("auxclick",function(_){const v=e.eBV(s).$implicit,k=e.XpG(9);return e.Njj(k.previewFile(v,_))})("click",function(_){const v=e.eBV(s).$implicit,k=e.XpG(9);return e.Njj(k.previewFile(v,_))}),e.nrm(2,"azt-document-type-file",121),e.k0s(),e.DNE(3,sn,4,3,"div",105),e.k0s()}if(2&i){let s;const a=I.$implicit,_=e.XpG(9);e.R7$(2),e.Y8G("type",a.documentType)("name",null!==(s=a.name)&&void 0!==s?s:"")("url",a.link)("customClass","w-6 h-6"),e.R7$(),e.Y8G("ngIf",_.teacherRole)}}function ln(i,I){if(1&i&&e.DNE(0,rn,4,5,"div",118),2&i){const s=e.XpG(3).$implicit;e.Y8G("ngForOf",s.normalDocumentObjs)}}function cn(i,I){if(1&i){const s=e.RV6();e.j41(0,"app-upload-document-for-session",123),e.bIt("emitFileDocument",function(_){e.eBV(s);const v=e.XpG(3).$implicit,k=e.XpG(5);return e.Njj(k.uploadFileEmitted(_,v))}),e.j41(1,"span",92),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()}if(2&i){const s=e.XpG(3).$implicit;e.Y8G("isBtn",!0)("customClass",s.outOfDate?"text-slate-600":"text-primary"),e.R7$(2),e.JRh(e.bMT(3,3,"lang_educational_program_add_document"))}}function _n(i,I){if(1&i&&(e.j41(0,"div",63),e.DNE(1,an,2,1,"ng-container",93)(2,ln,1,1,"ng-template",null,3,e.C5r),e.j41(4,"div",94),e.DNE(5,cn,4,5,"app-upload-document-for-session",95),e.k0s()()),2&i){const s=e.sdS(3),a=e.XpG(2).$implicit,_=e.XpG(5);e.R7$(),e.Y8G("ngIf",a.groupDocumentObjs.length)("ngIfElse",s),e.R7$(4),e.Y8G("ngIf",_.teacherRole)}}function mn(i,I){1&i&&(e.j41(0,"div",124)(1,"div",125)(2,"span",126),e.nrm(3,"azt-loading-ui",127),e.k0s()()()),2&i&&(e.R7$(3),e.Y8G("type","oval"))}function dn(i,I){if(1&i&&(e.j41(0,"a",135),e.nI1(1,"navigationLocalize"),e.nrm(2,"lucide-icon",136),e.j41(3,"span",134),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()()),2&i){const s=e.XpG(3).$implicit,a=e.XpG(5);e.Y8G("routerLink",e.eq3(8,b,e.bMT(1,4,"/admin/student/attendance-student/"+a.classroomId+"/"+s.programId+"/"+s.id)))("queryParams",e.eq3(10,u,"/admin/student/classroom-details/"+a.classroomId+"/3?sessionId="+s.id+"&backto="+a.backLink)),e.R7$(4),e.Lme("",e.bMT(5,6,"lang_student_attendance_student"),""," ("+s.totalJoinedStudent+"/"+s.totalStudent+")","")}}function un(i,I){if(1&i&&(e.j41(0,"a",137),e.nI1(1,"navigationLocalize"),e.nrm(2,"lucide-icon",138),e.j41(3,"span",134),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()()),2&i){const s=e.XpG(3).$implicit,a=e.XpG(5);e.Y8G("routerLink",e.eq3(7,b,e.bMT(1,3,"/admin/student/distribute-document/"+a.classroomId+"/"+s.programId+"/"+s.id)))("queryParams",e.eq3(9,u,"/admin/student/classroom-details/"+a.classroomId+"/3?sessionId="+s.id+"&backto="+a.backLink)),e.R7$(4),e.JRh(e.bMT(5,5,"lang_student_distribute_books"))}}function pn(i,I){if(1&i&&(e.j41(0,"a",139),e.nI1(1,"navigationLocalize"),e.nrm(2,"lucide-icon",140),e.j41(3,"span",134),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()()),2&i){const s=e.XpG(3).$implicit,a=e.XpG(5);e.Y8G("routerLink",e.eq3(7,b,e.bMT(1,3,"/admin/student/submit-score/"+a.classroomId+"/"+s.programId+"/"+s.id)))("queryParams",e.eq3(9,u,"/admin/student/classroom-details/"+a.classroomId+"/3?sessionId="+s.id+"&backto="+a.backLink)),e.R7$(4),e.JRh(e.bMT(5,5,"lang_student_enter_score"))}}function gn(i,I){if(1&i&&(e.j41(0,"div",66)(1,"div",60)(2,"span",61),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()(),e.j41(5,"div",128),e.DNE(6,dn,6,12,"a",129),e.nI1(7,"allowFeatureBusinessForUser"),e.nI1(8,"async"),e.DNE(9,un,6,11,"a",130),e.nI1(10,"allowFeatureBusinessForUser"),e.nI1(11,"async"),e.DNE(12,pn,6,11,"a",131),e.nI1(13,"allowFeatureBusinessForUser"),e.nI1(14,"async"),e.j41(15,"a",132),e.nI1(16,"navigationLocalize"),e.nrm(17,"lucide-icon",133),e.j41(18,"span",134),e.EFF(19),e.nI1(20,"mytranslate"),e.k0s()()()()),2&i){const s=e.XpG(2).$implicit,a=e.XpG(5);e.R7$(2),e.Y8G("ngClass",e.l_i(29,T,s.outOfDate,!s.outOfDate)),e.R7$(),e.SpI(" ",e.bMT(4,8,"lang_auto_hanh_dong")," "),e.R7$(3),e.Y8G("ngIf",e.bMT(8,13,e.i5U(7,10,"training_center_student_attendance",!1))),e.R7$(3),e.Y8G("ngIf",e.bMT(11,18,e.i5U(10,15,"training_center_student_book",!1))),e.R7$(3),e.Y8G("ngIf",e.bMT(14,23,e.i5U(13,20,"training_center_student_mark",!1))),e.R7$(3),e.Y8G("routerLink",e.eq3(32,b,e.bMT(16,25,"/admin/student/add-comment/"+a.classroomId+"/"+s.programId+"/"+s.id)))("queryParams",e.eq3(34,u,"/admin/student/classroom-details/"+a.classroomId+"/3?sessionId="+s.id+"&backto="+a.backLink)),e.R7$(4),e.JRh(e.bMT(20,27,"lang_auto_nhap_nhan_xet"))}}function fn(i,I){if(1&i&&(e.j41(0,"div",66)(1,"div",60)(2,"span",61),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()(),e.j41(5,"div",128)(6,"div",141)(7,"span"),e.EFF(8),e.nI1(9,"mytranslate"),e.k0s(),e.j41(10,"span",142),e.EFF(11),e.nI1(12,"mytranslate"),e.k0s()()()()),2&i){const s=e.XpG(2).$implicit;e.R7$(2),e.Y8G("ngClass",e.l_i(10,T,s.outOfDate,!s.outOfDate)),e.R7$(),e.SpI(" ",e.bMT(4,4,"lang_auto_hanh_dong")," "),e.R7$(5),e.JRh(e.bMT(9,6,"lang_business_requested_leave_with_a_reason")),e.R7$(3),e.JRh(null!=s.studentAttendance&&s.studentAttendance.reason?null==s.studentAttendance?null:s.studentAttendance.reason:e.bMT(12,8,"lang_student_absence_no_reason"))}}function bn(i,I){if(1&i){const s=e.RV6();e.j41(0,"div",53)(1,"div",54),e.bIt("click",function(){e.eBV(s);const _=e.XpG().$implicit,v=e.XpG(5);return e.Njj(v.expandSessionObj(_))}),e.j41(2,"h3",55)(3,"span",56),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s(),e.j41(6,"span",57),e.EFF(7),e.nI1(8,"mytranslate"),e.k0s()(),e.DNE(9,De,4,3,"ng-container",14),e.k0s(),e.DNE(10,Pe,6,11,"div",58),e.j41(11,"div",59)(12,"div",60)(13,"span",61),e.EFF(14),e.nI1(15,"mytranslate"),e.k0s()(),e.j41(16,"div",62)(17,"div",63),e.DNE(18,Le,16,18,"div",64)(19,d,5,20,"a",65),e.k0s()()(),e.j41(20,"div",66)(21,"div",60)(22,"span",61),e.EFF(23),e.nI1(24,"mytranslate"),e.k0s()(),e.j41(25,"div",62),e.DNE(26,_n,6,3,"div",67)(27,mn,4,1,"div",68),e.k0s()(),e.DNE(28,gn,21,36,"div",69),e.nI1(29,"allowFeatureBusinessForUser"),e.nI1(30,"async"),e.nI1(31,"allowFeatureBusinessForUser"),e.nI1(32,"async"),e.nI1(33,"allowFeatureBusinessForUser"),e.nI1(34,"async"),e.DNE(35,fn,13,13,"div",69),e.nI1(36,"allowFeatureBusinessForUser"),e.nI1(37,"async"),e.k0s()}if(2&i){const s=e.XpG().$implicit,a=e.XpG(5);e.BMQ("id","session-"+s.id),e.R7$(3),e.Y8G("ngClass",e.eq3(44,N,s.outOfDate)),e.R7$(),e.JRh(e.bMT(5,16,"lang_core_buoi")+" "+s.sort),e.R7$(3),e.JRh(e.bMT(8,18,"lang_config_educational_program_day_"+s.day)+", "+s.dateSession+" "+s.timeSession),e.R7$(2),e.Y8G("ngIf",s.room),e.R7$(),e.Y8G("ngIf",s.contents&&s.contents.length),e.R7$(3),e.Y8G("ngClass",e.l_i(46,T,s.outOfDate,!s.outOfDate)),e.R7$(),e.JRh(e.bMT(15,20,"lang_cms_auto_gen_test_exam_title")),e.R7$(4),e.Y8G("ngForOf",s.examHomeworkObjs),e.R7$(),e.Y8G("ngIf",a.teacherRole),e.R7$(3),e.Y8G("ngClass",e.l_i(49,T,s.outOfDate,!s.outOfDate)),e.R7$(),e.JRh(e.bMT(24,22,"lang_testbank_document_list_header_title")),e.R7$(3),e.Y8G("ngIf",!s.isDeletingDocument&&!s.isUploadingDocument),e.R7$(),e.Y8G("ngIf",s.isDeletingDocument||s.isUploadingDocument),e.R7$(),e.Y8G("ngIf",(e.bMT(30,27,e.i5U(29,24,"training_center_student_attendance",!1))||e.bMT(32,32,e.i5U(31,29,"training_center_student_book",!1))||e.bMT(34,37,e.i5U(33,34,"training_center_student_mark",!1)))&&a.teacherRole),e.R7$(7),e.Y8G("ngIf",(null==s.studentAttendance?null:s.studentAttendance.absent)&&e.bMT(37,42,e.i5U(36,39,"training_center_student_attendance",!0))&&!a.teacherRole)}}function hn(i,I){if(1&i&&(e.j41(0,"div",36),e.DNE(1,Re,7,12,"div",37)(2,Fe,10,10,"div",38)(3,bn,38,52,"div",39),e.k0s()),2&i){const s=I.$implicit,a=e.XpG(5);e.R7$(),e.Y8G("ngIf",!a.teacherRole),e.R7$(),e.Y8G("ngIf",!s.isExpanded),e.R7$(),e.Y8G("ngIf",s.isExpanded)}}function vn(i,I){if(1&i&&(e.qex(0),e.DNE(1,hn,4,3,"div",35),e.bVm()),2&i){const s=e.XpG().$implicit;e.R7$(),e.Y8G("ngForOf",s.programObjs)}}function Cn(i,I){if(1&i){const s=e.RV6();e.qex(0),e.j41(1,"h3",29)(2,"span",30),e.bIt("click",function(){const _=e.eBV(s).$implicit;return e.Njj(_.expand=!_.expand)}),e.EFF(3),e.nI1(4,"mytranslate"),e.DNE(5,Te,1,0,"lucide-icon",31)(6,Oe,1,0,"lucide-icon",32),e.k0s()(),e.DNE(7,vn,2,1,"ng-container",14),e.bVm()}if(2&i){const s=I.$implicit;e.R7$(3),e.SpI(" ",e.bMT(4,4,s.monthName)," "),e.R7$(2),e.Y8G("ngIf",s.expand),e.R7$(),e.Y8G("ngIf",!s.expand),e.R7$(),e.Y8G("ngIf",s.expand)}}function In(i,I){if(1&i&&(e.qex(0),e.j41(1,"div",16,1)(3,"div",17)(4,"h3",18),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s(),e.DNE(7,je,5,3,"button",19),e.k0s(),e.DNE(8,xe,3,1,"ng-container",14),e.k0s(),e.qex(9),e.DNE(10,Cn,8,6,"ng-container",20),e.bVm()()),2&i){const s=e.XpG(2);e.R7$(5),e.SpI(" ",e.bMT(6,4,"lang_educational_program_general_documents")," "),e.R7$(2),e.Y8G("ngIf",s.teacherRole),e.R7$(),e.Y8G("ngIf",s.generalDocumentObjs.length),e.R7$(2),e.Y8G("ngForOf",s.groupProgramSessionObjs)}}function Sn(i,I){1&i&&(e.j41(0,"h3",148),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_config_educational_program_add_new_description")," "))}function jn(i,I){if(1&i){const s=e.RV6();e.j41(0,"button",149),e.bIt("click",function(){e.eBV(s);const _=e.XpG(4);return e.Njj(_.addNewEducationalProgram())}),e.nrm(1,"lucide-icon",150),e.j41(2,"span"),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()()}2&i&&(e.R7$(),e.Y8G("ngClass",e.lJ4(4,ve)),e.R7$(2),e.JRh(e.bMT(4,2,"lang_config_educational_program_select_new")))}function kn(i,I){if(1&i&&(e.j41(0,"div",144)(1,"h3",145),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.DNE(4,Sn,3,3,"h3",146)(5,jn,5,5,"button",147),e.k0s()),2&i){const s=e.XpG(3);e.R7$(2),e.SpI(" ",e.bMT(3,3,"lang_config_educational_program_no_have_yet")," "),e.R7$(2),e.Y8G("ngIf",s.teacherRole),e.R7$(),e.Y8G("ngIf",s.teacherRole)}}function xn(i,I){1&i&&(e.j41(0,"h3",148),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&i&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_config_educational_program_add_new_session_desc")," "))}function Tn(i,I){if(1&i){const s=e.RV6();e.j41(0,"button",152),e.bIt("click",function(){e.eBV(s);const _=e.XpG(4);return e.Njj(_.editEducationalProgram())}),e.nrm(1,"lucide-icon",153),e.j41(2,"span"),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()()}2&i&&(e.R7$(),e.Y8G("ngClass",e.lJ4(4,ve)),e.R7$(2),e.JRh(e.bMT(4,2,"lang_config_educational_program_edit_btn")))}function On(i,I){if(1&i&&(e.j41(0,"div",144)(1,"h3",145),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.DNE(4,xn,3,3,"h3",146)(5,Tn,5,5,"button",151),e.k0s()),2&i){const s=e.XpG(3);e.R7$(2),e.SpI(" ",e.bMT(3,3,"lang_config_educational_program_no_have_session_yet")," "),e.R7$(2),e.Y8G("ngIf",s.teacherRole),e.R7$(),e.Y8G("ngIf",s.teacherRole)}}function En(i,I){if(1&i&&(e.qex(0),e.DNE(1,kn,6,5,"div",143)(2,On,6,5,"ng-template",null,9,e.C5r),e.bVm()),2&i){const s=e.sdS(3),a=e.XpG(2);e.R7$(),e.Y8G("ngIf",!a.programObj)("ngIfElse",s)}}function yn(i,I){if(1&i&&e.DNE(0,Se,1,2,"app-add-new-educational-program",13)(1,In,11,6,"ng-container",14)(2,En,4,2,"ng-container",14),2&i){const s=e.XpG();e.Y8G("ngIf",s.showAddNewEducationalProgram),e.R7$(),e.Y8G("ngIf",!s.showAddNewEducationalProgram&&s.programSessionObjs.length),e.R7$(),e.Y8G("ngIf",!s.showAddNewEducationalProgram&&s.programSessionObjs.length<=0)}}let Rn=(()=>{var i;class I extends o.H{emitDataReloadSession(a){a?(this.initStatusObj(),this.programObj=void 0,this.generalDocumentObjs=[],this.programSessionObjs=[],this.groupProgramSessionObjs=[],this.reloadSessionDataEmitter.emit()):this.showAddNewEducationalProgram=!1}editMarkCoefficient(a,_){this.sAztDialogService.open(pt._,{data:{id:a.markId??0,name:"",coefficient:a.markCoefficient,programId:_.programId,classroomId:this.classroomId,sessionId:_.id,isOnlyCoefficient:!0,documentName:a.name,documentType:a.type},restoreFocus:!1,width:"400px"}).afterClosed().subscribe(k=>{k&&this.reloadSessionDataOfProgram(_)})}reloadData(a,_){a&&this.reloadSessionDataOfProgram(_)}reloadSessionDataOfProgram(a){a.isLoadingData=!0,this.reloadSessionDataEmitter.emit(a)}addNewEducationalProgram(){this.showAddNewEducationalProgram=!this.showAddNewEducationalProgram}editEducationalProgram(){let a=this.commonService.getCurrentUrlWithoutLocale();this.myNavigationWithQueryString("/business/edit-educational-program/"+this.programObj?.id,"?backTo="+a)}removeDocumentFromSession(a,_,v,k){var G=(a.normalDocumentObjs.filter(bt=>bt.id==v)[0].name??"")+" - "+this.commonService.myTranslateInstant("lang_core_buoi")+" "+a.sort.toString(),H=this.commonService.myTranslateInstant("lang_auto_ban_co_chac_chan_muon_xoa")+' <div class="text-md font-medium inline"> '+G+" </div> ?";this.sAztDialogService.open(kt.u,{data:{content:H},restoreFocus:!1,width:"500px"}).afterClosed().subscribe(bt=>{bt&&(a.isDeletingDocument=!0,this.waitDestroy(this.classroomService.apiClassroomsClassroomIdSessionsSessionIdDocumentsDocumentIdDelete(this.classroomId,_,v).subscribe({next:Zt=>{k&&(k.documentObjs=k.documentObjs.filter(xt=>xt.id!=v)),a.normalDocumentObjs=a.normalDocumentObjs.filter(xt=>xt.id!=v),this.showSuccessSnack("lang_config_educational_program_remove_document_link_successfully"),a.isDeletingDocument=!1},error:Zt=>{a.isDeletingDocument=!1,this.errorStatusObj(Zt.error.message,!0)}})))})}uploadFileEmitted(a,_){_.isUploadingDocument=!0,this.waitDestroy(this.classroomService.apiClassroomsClassroomIdSessionsSessionIdDocumentsPost(this.classroomId,_.id,a).subscribe({next:v=>{this.reloadSessionDataOfProgram(_),_.isUploadingDocument=!1,this.showSuccessSnack("lang_config_educational_program_add_document_link_successfully")},error:v=>{_.isUploadingDocument=!1,this.errorStatusObj(v.error.message,!0)}}))}expandSessionObj(a){a.isExpanded=!a.isExpanded,this.changeSessionDataEmitter.emit(a)}previewFile(a,_){if(this.isBusinessDomain&&a.type==t.d.video&&(0,ut.xy)(a.link??""))window.open(a.link,"_blank");else{const v={name:a.name,mimes:this.sAztFileTypeService.getMineTypeByFileType(a.type),type:a.type,url:a.link};this.sAztDialogService.open(tt.V,{maxWidth:"100vw",maxHeight:"100vh",height:"100%",width:"100%",data:{fileOption:{...v,index:0},showDownloadIcon:!1},restoreFocus:!1})}}ngAfterViewInit(){let a=this.programSessionObjs.find(_=>_.isExpanded);if(a){let _=document.getElementById("session-"+a.id);window.scrollTo({top:_?.offsetTop})}}ngDoCheck(){this.cd.detectChanges()}ngOnInit(){super.ngOnInit(),this.backLink||(this.backLink="/admin/student/manage-classroom/0")}constructor(a,_,v,k){super(),this.sAztDialogService=a,this.cd=_,this.classroomService=v,this.sAztFileTypeService=k,this.backLink="",this.errorApiMessage="",this.generalDocumentObjs=[],this.programSessionObjs=[],this.groupProgramSessionObjs=[],this.reloadSessionDataEmitter=new e.bkB,this.changeSessionDataEmitter=new e.bkB,this.allDocumentTypes=t.d,this.allDocumentGroupTypes=q.k,this.showAddNewEducationalProgram=!1,this.currentUrl=this.commonService.getCurrentUrlWithoutLocale()}}return(i=I).\u0275fac=function(a){return new(a||i)(e.rXU(L.i),e.rXU(e.gRc),e.rXU(at.zS),e.rXU(Q.k))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-list-sessions"]],inputs:{teacherRole:"teacherRole",classroomId:"classroomId",backLink:"backLink",errorApiMessage:"errorApiMessage",generalDocumentObjs:"generalDocumentObjs",programSessionObjs:"programSessionObjs",groupProgramSessionObjs:"groupProgramSessionObjs",programObj:"programObj"},outputs:{reloadSessionDataEmitter:"reloadSessionDataEmitter",changeSessionDataEmitter:"changeSessionDataEmitter"},features:[e.Vt3],decls:4,vars:2,consts:[["noApiError",""],["generalDocumentsWidget",""],["c","isDisabled"],["normalViewDocument",""],["matMenuVideo","matMenu"],["matMenuDocument","matMenu"],["matMenuHomework","matMenu"],["matMenuHomeworkView","matMenu"],["matMenuUnknown","matMenu"],["hasProgramObj",""],[1,"container","educational-program-width"],["class","alert alert-danger p-3 mt-3 mb-3","style","margin-bottom: 1.25rem",4,"ngIf","ngIfElse"],[1,"alert","alert-danger","p-3","mt-3","mb-3",2,"margin-bottom","1.25rem"],[3,"classroomId","programObj","saveEducationalProgramEmit",4,"ngIf"],[4,"ngIf"],[3,"saveEducationalProgramEmit","classroomId","programObj"],[1,"box","p-3","mb-3"],[1,"flex",2,"justify-content","space-between","align-items","center"],[1,"font-medium","text-md"],["azt-track-service","list-educational-program-sessions-7fw0c5bF4","class","btn btn-primary text-white",3,"click",4,"ngIf"],[4,"ngFor","ngForOf"],["azt-track-service","list-educational-program-sessions-7fw0c5bF4",1,"btn","btn-primary","text-white",3,"click"],["name","refresh-cw","size","16"],[1,"ml-2"],[1,"grid","grid-cols-12","gap-3","mt-3"],["class","col-span-12 md:col-span-4",4,"ngFor","ngForOf"],[1,"col-span-12","md:col-span-4"],["azt-track-service","list-educational-program-sessions-tZA6KoGtc",1,"cursor-pointer","hover:slate-100",3,"auxclick","click"],[3,"type","name","url","iconVerticalStyle","customClass"],[1,"flex","mt-5",2,"font-weight","420","font-size","15px"],["azt-track-service","add-new-educational-programs-B1gOVovsf",1,"clickable",2,"align-items","center",3,"click"],["name","chevron-down","size","18",4,"ngIf"],["name","chevron-right","size","18",4,"ngIf"],["name","chevron-down","size","18"],["name","chevron-right","size","18"],["class","relative mt-2",4,"ngFor","ngForOf"],[1,"relative","mt-2"],["class","absolute","style","right: 5px; top: 5px; z-index: 99",4,"ngIf"],["azt-track-service","list-educational-program-sessions-WqkcB50ei9","class","box p-3 mb-3 cursor-pointer clickable expanded-box",3,"click",4,"ngIf"],["class","box p-3 mb-3","style","user-select: none",4,"ngIf"],[1,"absolute",2,"right","5px","top","5px","z-index","99"],["class","btn btn-warning btn-sm text-slate-600 change-block-hidden","style","cursor: default",4,"ngIf"],["class","btn btn-warning btn-sm text-slate-600 change-hidden-block","style","cursor: default; padding: 3px",4,"ngIf"],[1,"btn","btn-warning","btn-sm","text-slate-600","change-block-hidden",2,"cursor","default"],["name","user-x",2,"width","16px !important","height","16px !important","vertical-align","middle"],[1,"ml-1",2,"vertical-align","middle"],[1,"btn","btn-warning","btn-sm","text-slate-600","change-hidden-block",2,"cursor","default","padding","3px"],["azt-track-service","list-educational-program-sessions-WqkcB50ei9",1,"box","p-3","mb-3","cursor-pointer","clickable","expanded-box",3,"click"],[1,"heading"],[1,"font-medium","pr-5","md:pr-auto"],[2,"font-weight","420",3,"ngClass"],[1,"ml-2","text-slate-500",2,"font-weight","400"],[1,"text-slate-500",2,"font-weight","400"],[1,"box","p-3","mb-3",2,"user-select","none"],["azt-track-service","list-educational-program-sessions-AdTUEEwTH6",1,"heading","cursor-pointer","expanded-box-open","pb-2",3,"click"],[1,"font","pr-5","md:pr-auto"],[1,"font-medium",3,"ngClass"],[1,"ml-2","text-slate-500"],["class","azt-answer",4,"ngIf"],[1,"azt-answer"],[1,"strike"],[1,"uppercase",3,"ngClass"],[1,"azt-answer-content","p-3","w-full"],[1,"grid","grid-cols-12","items-center","gap-3"],["class","col-span-12 md:col-span-3",4,"ngFor","ngForOf"],["style","text-align: left","azt-track-service","list-educational-program-sessions-7tcWVQIX5M","class","btn btn-transparent w-48 block",3,"routerLink","queryParams","ngClass",4,"ngIf"],[1,"azt-answer","mt-1"],["class","grid grid-cols-12 items-center gap-3",4,"ngIf"],["class","grid grid-cols-12 gap-2",4,"ngIf"],["class","azt-answer mt-1",4,"ngIf"],[1,"text-slate-500"],[3,"close","contents","teacherRole","classroomId","sessionId"],[1,"col-span-12","md:col-span-3"],["azt-track-service","list-educational-program-sessions-osVwsOKGN",3,"routerLink","queryParams"],[1,"flex","p-3"],[1,"flex","lg:mr-1","text-center",2,"align-items","center"],[1,"ml-1","text-left","mt-0",2,"align-self","center"],[1,"azt-student-name",2,"display","inline-grid"],[1,"font-medium","truncate",2,"max-width","100%",3,"matTooltip","isDisabledTooltip","matTooltipDisabled"],["class","text-slate-700/50 mb-0","style","font-size: 13px",4,"ngIf"],["class","mb-0","style","font-size: 13px",3,"ngClass",4,"ngIf"],["class","text-primary mb-0 relative flex items-center","style","font-size: 13px",4,"ngIf"],[1,"w-12","h-12","font-medium","image-fit","flex-none"],["alt","unknown-icon",3,"src"],["name","file-check","size","48",3,"ngClass"],["name","file-text","size","48",3,"ngClass"],[1,"text-slate-700/50","mb-0",2,"font-size","13px"],[1,"mb-0",2,"font-size","13px",3,"ngClass"],[1,"text-primary","mb-0","relative","flex","items-center",2,"font-size","13px"],["matRipple","","azt-track-service","list-educational-program-sessions-mHY0DeFrF",1,"btn","btn-outline-primary","btn-sm","border-0","shadow-none","p-1",3,"click","matTooltip"],["name","square-pen","size","16"],["azt-track-service","list-educational-program-sessions-7tcWVQIX5M",1,"btn","btn-transparent","w-48","block",2,"text-align","left",3,"routerLink","queryParams","ngClass"],[1,"uppercase"],[4,"ngIf","ngIfElse"],[1,"col-span-12","md:col-span-2"],[3,"isBtn","customClass","emitFileDocument",4,"ngIf"],["class","col-span-12 md:col-span-2 relative",4,"ngIf"],[1,"col-span-12","md:col-span-2","relative"],[1,"flex","px-3","items-center","cursor-pointer","text-primary",2,"font-weight","420","font-size","15px",3,"matMenuTriggerFor"],["name","circle-arrow-down","size","18"],["xPosition","after"],[1,"dropdown-menu","show",3,"ngStyle"],[1,"dropdown-content",3,"ngClass"],["azt-track-service","list-educational-program-sessions-9Uh-D7fBV",1,"dropdown-item","relative",2,"align-items","center",3,"auxclick","click"],[2,"width","100%",3,"truncateString","textWidth","type","showBorder","onlyOneLine","iconVerticalStyle","name","url","customClass"],["class","absolute top-0 right-0 p-1 z-50",4,"ngIf"],[1,"absolute","top-0","right-0","p-1","z-50"],["azt-track-service","list-educational-program-sessions-b0R49s83kG",1,"btn","btn-transparent","btn-outline-danger","btn-sm","p-0","block",3,"click"],["name","x","size","16",3,"matTooltip"],["azt-track-service","list-educational-program-sessions-3xvwjvQpPm",1,"dropdown-item","relative",2,"align-items","center",3,"auxclick","click"],["azt-track-service","list-educational-program-sessions-wmJtTG9lgc",1,"btn","btn-transparent","btn-outline-danger","btn-sm","p-0","block",3,"click"],["azt-track-service","list-educational-program-sessions-0ddxB4xw-G",1,"dropdown-item","relative",2,"align-items","center",3,"auxclick","click"],["azt-track-service","list-educational-program-sessions-H_Fu6rJpUs",1,"btn","btn-transparent","btn-outline-danger","btn-sm","p-0","block",3,"click"],["azt-track-service","list-educational-program-sessions-URYQZ4M5Qb",1,"dropdown-item","relative",2,"align-items","center",3,"auxclick","click"],[2,"width","100%",3,"truncateString","type","textWidth","showBorder","onlyOneLine","iconVerticalStyle","name","url","customClass"],["azt-track-service","list-educational-program-sessions-MHIjTu_EQr",1,"btn","btn-transparent","btn-outline-danger","btn-sm","p-0","block",3,"click"],["azt-track-service","list-educational-program-sessions-yixL-fRljl",1,"dropdown-item","relative",2,"align-items","center",3,"auxclick","click"],["azt-track-service","list-educational-program-sessions-bjX0o_IOex",1,"btn","btn-transparent","btn-outline-danger","btn-sm","p-0","block",3,"click"],["class","col-span-12 md:col-span-3 relative",4,"ngFor","ngForOf"],[1,"col-span-12","md:col-span-3","relative"],["azt-track-service","list-educational-program-sessions-0reisrghN1",1,"cursor-pointer","hover:slate-100",3,"auxclick","click"],[3,"type","name","url","customClass"],["azt-track-service","list-educational-program-sessions-E4pIFQJwz",1,"btn","btn-transparent","btn-outline-danger","btn-sm","p-0","block",3,"click"],[3,"emitFileDocument","isBtn","customClass"],[1,"grid","grid-cols-12","gap-2"],[1,"col-span-12","text-center","p-4",2,"align-items","center"],[1,"w-6","h-6","mx-auto","flex"],[3,"type"],[1,"azt-answer-content","py-2","w-full","flex"],["azt-track-service","list-educational-program-sessions-AmCuW4QA33","class","btn btn-secondary btn-sm text-slate-600 w-48 block",3,"routerLink","queryParams",4,"ngIf"],["azt-track-service","list-educational-program-sessions-Dn0g23Gk6B","class","btn btn-secondary btn-sm text-slate-600 w-48 block ml-2",3,"routerLink","queryParams",4,"ngIf"],["azt-track-service","list-educational-program-sessions-2wySJMHhPL","class","btn btn-secondary btn-sm text-slate-600 w-48 block ml-2",3,"routerLink","queryParams",4,"ngIf"],["azt-track-service","list-educational-program-sessions-dM0Vh7XPW",1,"btn","btn-secondary","btn-sm","text-slate-600","w-48","block","ml-2",3,"routerLink","queryParams"],["name","message-circle","size","18"],[1,"ml-2",2,"vertical-align","middle"],["azt-track-service","list-educational-program-sessions-AmCuW4QA33",1,"btn","btn-secondary","btn-sm","text-slate-600","w-48","block",3,"routerLink","queryParams"],["name","users","size","18"],["azt-track-service","list-educational-program-sessions-Dn0g23Gk6B",1,"btn","btn-secondary","btn-sm","text-slate-600","w-48","block","ml-2",3,"routerLink","queryParams"],["name","book","size","18"],["azt-track-service","list-educational-program-sessions-2wySJMHhPL",1,"btn","btn-secondary","btn-sm","text-slate-600","w-48","block","ml-2",3,"routerLink","queryParams"],["name","clipboard-pen","size","18"],[1,"font-medium"],[1,"text-danger"],["class","box px-4 py-5 text-center mx-auto mt-3",4,"ngIf","ngIfElse"],[1,"box","px-4","py-5","text-center","mx-auto","mt-3"],[2,"font-weight","450","font-size","15.5px"],["class","mt-3","style","font-weight: 400; font-size: 14px",4,"ngIf"],["azt-track-service","config-educational-program-UuVaYM-oC","class","btn btn-primary shadow-md w-64 mx-auto mt-3",3,"click",4,"ngIf"],[1,"mt-3",2,"font-weight","400","font-size","14px"],["azt-track-service","config-educational-program-UuVaYM-oC",1,"btn","btn-primary","shadow-md","w-64","mx-auto","mt-3",3,"click"],["name","plus","size","16",3,"ngClass"],["azt-track-service","list-educational-program-sessions-QcN2jh-wS","class","btn btn-primary shadow-md w-64 mx-auto mt-3",3,"click",4,"ngIf"],["azt-track-service","list-educational-program-sessions-QcN2jh-wS",1,"btn","btn-primary","shadow-md","w-64","mx-auto","mt-3",3,"click"],["name","square-pen","size","16",3,"ngClass"]],template:function(a,_){if(1&a&&(e.j41(0,"div",10),e.DNE(1,Ie,3,3,"div",11)(2,yn,3,3,"ng-template",null,0,e.C5r),e.k0s()),2&a){const v=e.sdS(3);e.R7$(),e.Y8G("ngIf",!_.statusObj.loading&&_.errorApiMessage)("ngIfElse",v)}},dependencies:[A.Wk,m.YU,m.Sq,m.bT,m.B3,V.kk,V.Cp,W.r6,X.oV,st.f,J.R,et.m,jt.WGl,vt.J,K,f,m.Jj,y.F2,y.wp,y.gt,y.bj],encapsulation:2}),I})();function wn(i,I){if(1&i&&e.nrm(0,"azt-loading-effect",2),2&i){const s=e.XpG();e.Y8G("currentStatusObj",s.statusObj)}}function Fn(i,I){if(1&i){const s=e.RV6();e.j41(0,"div",3)(1,"app-list-sessions",4),e.bIt("reloadSessionDataEmitter",function(_){e.eBV(s);const v=e.XpG();return e.Njj(v.reloadSessionData(_))})("changeSessionDataEmitter",function(_){e.eBV(s);const v=e.XpG();return e.Njj(v.changeSessionData(_))}),e.k0s()()}if(2&i){const s=e.XpG();e.R7$(),e.Y8G("teacherRole",s.teacherRole)("classroomId",s.classroomId)("backLink",s.backLink)("errorApiMessage",s.errorApiMessage)("generalDocumentObjs",s.generalDocumentObjs)("programSessionObjs",s.programSessionObjs)("groupProgramSessionObjs",s.groupProgramSessionObjs)("programObj",s.programObj)}}let Dn=(()=>{var i;class I extends o.H{changeSessionData(a){this.programSessionObjs.map(_=>_.id==a.id?a:_),this.teacherRole&&this.commonService.myNavigationWithQueryString(`/admin/student/classroom-details/${this.classroomId}/3`,`?sessionId=${a.id}${this.backLink?"&backTo="+this.backLink:""}`)}reloadSessionData(a){this.initData(a)}convertNormalDocumentByGroup(a){let _={};return a.forEach(v=>{v.groupType&&(_.hasOwnProperty(v.groupType)||(_[v.groupType]=[]),_[v.groupType].push(v))}),_}processData(a){let _=this.commonService.arrayToDictionary(a,k=>k.groupType?k.groupType:"unknown"),v=[{name:"video",documentObjs:[]},{name:"document",documentObjs:[]},{name:"homework",documentObjs:[]},{name:"homework_view",documentObjs:[]},{name:"unknown",documentObjs:[]}];return Object.entries(_).forEach(([k,G],H)=>{if(G.length>0){let bt={name:k,documentObjs:G};"video"==bt.name&&(v[0]=bt),"document"==bt.name&&(v[1]=bt),"homework"==bt.name&&(v[2]=bt),"homework_view"==bt.name&&(v[3]=bt),"unknown"==bt.name&&(v[4]=bt)}}),v}convertDocumentsOfSession(a,_){let v=(new Date).toDateString(),k=!1;return a.forEach((G,H)=>{G.normalDocumentObjs=G.allDocumentObjs.filter(xt=>"exam"!=xt.type&&"homework"!=xt.type),G.examHomeworkObjs=G.allDocumentObjs.filter(xt=>"exam"==xt.type||"homework"==xt.type),G.groupDocumentObjs=this.processData(G.normalDocumentObjs),G.indexSession=G.sort;let bt="",Zt="";if(G.fromTime){let xt=new Date(G.fromTime),Kt=new Date(xt.toDateString()),Be=new Date(v),Ye=Math.floor((Kt.getTime()-Be.getTime())/1e3);G.dateSession=this.timeService.getFormatDate(G.fromTime),G.outOfDate=Ye<0,G.monthSession=xt.getMonth()+1,G.yearSession=xt.getFullYear(),bt+=this.addZeroToTime(xt.getHours())+":"+this.addZeroToTime(xt.getMinutes()),Zt=this.timeService.calculationTimeAgoOnlyDate(Kt,Be)}if(G.toTime){let xt=new Date(G.toTime);bt+=" - "+this.addZeroToTime(xt.getHours())+":"+this.addZeroToTime(xt.getMinutes())}bt+=Zt?" ("+Zt+")":"",G.timeSession=bt,k||(G.isExpanded=_?G.isExpanded:!G.outOfDate,G.isExpanded&&(k=!0))}),a}addZeroToTime(a){return a<10?"0"+a:a.toString()}getSchoolLeaveObjs(a,_){a.length&&!this.teacherRole?this.waitDestroy(this.studentService.apiStudentsAttendancesMeGet(this.classroomId).subscribe({next:v=>{a.map(k=>{k.studentAttendance=v.list.find(G=>G.sessionId==k.id)}),_(a)},error:v=>{this.errorStatusObj(v.error.message,!0),_(a)}})):_(a)}initData(a){a||(this.initStatusObj(),this.programSessionObjs=[],this.programObj=void 0,this.generalDocumentObjs=[]),this.groupProgramSessionObjs=[];let _=this.teacherRole?this.classroomService.apiClassroomsClassroomIdProgramsProgramIdGet(this.classroomId,0):this.classroomService.apiClassroomsClassroomIdStudentsProgramsProgramIdGet(this.classroomId,0);this.waitDestroy(_.subscribe({next:v=>{this.generalDocumentObjs=v.generalDocuments.map(G=>({...G,documentType:this.commonService.getEnumTypeWithDefault(t.d,G.type,t.d.unknown)})),this.programObj=v.program;let k=v.sessions.map(G=>({...G,isExpanded:!1,isLoadingData:!1,isDeletingDocument:!1,isUploadingDocument:!1,normalDocumentObjs:[],examHomeworkObjs:[],groupDocumentObjs:[],indexSession:0,yearSession:0,monthSession:0,allDocumentObjs:G.documents.map(H=>({...H,documentType:this.commonService.getEnumTypeWithDefault(t.d,H.type,t.d.unknown)}))}));k=this.convertDocumentsOfSession(k,!!a),this.getSchoolLeaveObjs(k,G=>{if(a){let xt=G.find(Kt=>Kt.id==a.id);this.programSessionObjs=this.programSessionObjs.map(Kt=>Kt.id==xt?.id?{...xt,isExpanded:Kt.isExpanded}:Kt)}else this.programSessionObjs=G;this.sessionId&&this.programSessionObjs.map(xt=>xt.isExpanded=xt.id==this.sessionId);let H=this.commonService.arrayToDictionary(this.programSessionObjs,xt=>xt.monthSession?.toString()+"/"+xt.yearSession?.toString()),bt=this.commonService.myTranslateInstant("lang_core_thang")??"Th\xe1ng",Zt=(new Date).getMonth()+1+"/"+(new Date).getFullYear();Object.entries(H).forEach(([xt,Kt],Be)=>{let Ye=Kt.find(zn=>zn.isExpanded);this.groupProgramSessionObjs.push({monthName:bt+" "+xt,programObjs:Kt,expand:!(xt!=Zt&&!Ye)})}),this.stopStatusObj()})},error:v=>{this.errorApiMessage=v.error.message,this.errorStatusObj(v.error.message,!0)}}))}ngOnInit(){super.ngOnInit(),this.initData(void 0)}constructor(a,_,v,k){super(),this.classroomService=a,this.timeService=_,this.studentService=v,this.activeRoute=k,this.sessionId=0,this.generalDocumentObjs=[],this.programSessionObjs=[],this.groupProgramSessionObjs=[],this.errorApiMessage=""}}return(i=I).\u0275fac=function(a){return new(a||i)(e.rXU(at.zS),e.rXU(l.F),e.rXU(at.b0),e.rXU(A.nX))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-view-educational-program"]],inputs:{teacherRole:"teacherRole",classroomId:"classroomId",backLink:"backLink",sessionId:"sessionId"},features:[e.Vt3],decls:3,vars:2,consts:[["doneLoading",""],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[1,"intro-y","relative",2,"min-height","calc(100vh - 550px)"],[3,"reloadSessionDataEmitter","changeSessionDataEmitter","teacherRole","classroomId","backLink","errorApiMessage","generalDocumentObjs","programSessionObjs","groupProgramSessionObjs","programObj"]],template:function(a,_){if(1&a&&e.DNE(0,wn,1,1,"azt-loading-effect",1)(1,Fn,2,8,"ng-template",null,0,e.C5r),2&a){const v=e.sdS(2);e.Y8G("ngIf",_.statusObj.loading)("ngIfElse",v)}},dependencies:[m.bT,n.K,Rn],encapsulation:2}),I})(),Pn=(()=>{var i;class I extends o.H{ngOnInit(){this.waitDestroy((0,g.z)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{let a=this.commonService.getMyQueryParam("backto");this.classroomId=Number(this.commonService.getMyParam(this.activeRoute,"id"))??0,this.backLink=a||(this.backLink??"/business/dashboard"),this.sessionId=Number(this.commonService.getMyQueryParam("sessionId"))})),super.ngOnInit()}constructor(a){super(),this.activeRoute=a,this.classroomId=0,this.sessionId=0,this.backLink=""}}return(i=I).\u0275fac=function(a){return new(a||i)(e.rXU(A.nX))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-educational-program"]],inputs:{isStudent:"isStudent"},features:[e.Vt3],decls:1,vars:4,consts:[[3,"teacherRole","classroomId","sessionId","backLink"]],template:function(a,_){1&a&&e.nrm(0,"app-view-educational-program",0),2&a&&e.Y8G("teacherRole",!_.isStudent)("classroomId",_.classroomId)("sessionId",_.sessionId)("backLink",_.backLink)},dependencies:[Dn],encapsulation:2}),I})()},69307:(Mt,St,r)=>{r.d(St,{_:()=>Q});var g=r(10936),o=r(89163),e=r(33887),A=r(15766),t=r(48891),at=r(90998),l=r(54460),m=r(81587),n=r(52811),ut=r(76975);function kt(V,W){1&V&&(t.j41(0,"div",17),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&V&&(t.R7$(),t.SpI(" *",t.bMT(2,1,"lang_auto_vui_long_nhap_ten_dau_diem")," "))}function q(V,W){if(1&V&&(t.j41(0,"div",15)(1,"label",8),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s(),t.nrm(4,"input",16),t.nI1(5,"mytranslate"),t.DNE(6,kt,3,3,"div",10),t.k0s()),2&V){const X=t.XpG();t.R7$(2),t.SpI(" ",t.bMT(3,3,"lang_student_name_component_score")," "),t.R7$(2),t.FS9("placeholder",t.bMT(5,5,"lang_student_enter_name_component_score")),t.R7$(2),t.Y8G("ngIf",X.form.controls.name.dirty&&X.form.controls.name.errors)}}function tt(V,W){if(1&V&&(t.j41(0,"div",15)(1,"label",8),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s(),t.nrm(4,"input",18),t.nI1(5,"mytranslate"),t.k0s()),2&V){const X=t.XpG();t.R7$(2),t.SpI(" ",t.bMT(3,3,"homework"==X.data.documentType?"lang_auto_bai_tap":"lang_auto_de_thi"),": "),t.R7$(2),t.FS9("placeholder",t.bMT(5,5,"lang_student_enter_name_component_score")),t.Y8G("value",X.data.documentName)}}function pt(V,W){1&V&&(t.j41(0,"div",17),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&V&&(t.R7$(),t.SpI(" *",t.bMT(2,1,"lang_auto_he_so_diem_phai_la_so")," "))}function L(V,W){1&V&&t.nrm(0,"azt-loading-ui",19)}let Q=(()=>{var V;class W extends e._{setValueCoeffcient(){var st=this.form.controls.coefficient.value?.toString().replace(/[^0-9]/g,"");this.form.controls.coefficient.setValue(Number(st)??0)}createStartingPoint(){let st={name:this.form.getRawValue().name,coefficient:this.form.getRawValue().coefficient,programId:this.data.programId,classroomId:this.data.classroomId,sessionId:this.data.sessionId};this.waitDestroy(this.data.id?this.commonMarkService.apiCommonMarksIdPut(this.data.id,st).subscribe(J=>{J?(this.showSuccessSnack("lang_core_sua_dau_diem_thanh_cong"),this.dialogRef.close(st)):this.errorStatusObj("lang_core_sua_dau_diem_khong_thanh_cong",!0),this.stopStatusObj()}):this.commonMarkService.apiCommonMarksPost(st).subscribe(J=>{J?(this.showSuccessSnack("lang_core_them_dau_diem_thanh_cong"),this.dialogRef.close(st)):this.errorStatusObj("lang_core_them_dau_diem_khong_thanh_cong",!0),this.stopStatusObj()}))}ngOnInit(){}constructor(st,J,et){super(et,J),this.commonMarkService=st,this.dialogRef=J,this.data=et,this.form=new g.gE({name:new g.MJ({value:et.name??"",disabled:0==et.canEditName},{nonNullable:!0,validators:[g.k0.required,A.M.noWhiteSpace]}),coefficient:new g.MJ(et.coefficient,{nonNullable:!0,validators:[g.k0.required,g.k0.pattern(/^[1-9]\d*$/)]})})}}return(V=W).\u0275fac=function(st){return new(st||V)(t.rXU(at.a),t.rXU(o.CP,8),t.rXU(o.Vh))},V.\u0275cmp=t.VBU({type:V,selectors:[["app-create-score-dialog"]],features:[t.Vt3],decls:25,vars:21,consts:[[1,"box"],[3,"formGroup"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-3","border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"text-md","font-medium","flex","items-center"],[1,"p-5","pt-0","list-class"],["class","mt-2",4,"ngIf"],[1,"mt-3"],[1,"form-label"],["type","number","formControlName","coefficient",1,"form-control","hidden-scroll",3,"input","placeholder"],["class","text-xs text-danger mt-1",4,"ngIf"],[1,"p-3","flex","justify-end"],[1,"btn","btn-secondary","w-24","mr-2",3,"click"],[1,"btn","w-24","btn-primary",3,"click","disabled"],["class","mr-1",4,"ngIf"],[1,"mt-2"],["type","text","formControlName","name",1,"form-control",3,"placeholder"],[1,"text-xs","text-danger","mt-1"],["type","text","disabled","",1,"form-control",3,"value","placeholder"],[1,"mr-1"]],template:function(st,J){1&st&&(t.j41(0,"div",0)(1,"form",1)(2,"div",2)(3,"div",3)(4,"h3",4),t.EFF(5),t.nI1(6,"mytranslate"),t.k0s()(),t.j41(7,"div",5),t.DNE(8,q,7,7,"div",6)(9,tt,6,7,"div",6),t.j41(10,"div",7)(11,"label",8),t.EFF(12),t.nI1(13,"mytranslate"),t.k0s(),t.j41(14,"input",9),t.nI1(15,"mytranslate"),t.bIt("input",function(){return J.setValueCoeffcient()}),t.k0s(),t.DNE(16,pt,3,3,"div",10),t.k0s()()(),t.j41(17,"div",11)(18,"button",12),t.bIt("click",function(){return J.dialogRef.close()}),t.EFF(19),t.nI1(20,"mytranslate"),t.k0s(),t.j41(21,"button",13),t.bIt("click",function(){return J.createStartingPoint()}),t.DNE(22,L,1,0,"azt-loading-ui",14),t.EFF(23),t.nI1(24,"mytranslate"),t.k0s()()()()),2&st&&(t.R7$(),t.Y8G("formGroup",J.form),t.R7$(4),t.SpI(" ",t.bMT(6,11,J.data.id?J.data.isOnlyCoefficient?"lang_student_edit_mark_coefficient":"lang_student_sua_dau_diem":"lang_student_enter_new_component_score")," "),t.R7$(3),t.Y8G("ngIf",!J.data.isOnlyCoefficient),t.R7$(),t.Y8G("ngIf",J.data.isOnlyCoefficient),t.R7$(3),t.SpI(" ",t.bMT(13,13,"lang_student_score_factor")," "),t.R7$(2),t.FS9("placeholder",t.bMT(15,15,"lang_student_enter_score_factor")),t.R7$(2),t.Y8G("ngIf",J.form.controls.coefficient.dirty&&J.form.controls.coefficient.errors),t.R7$(3),t.JRh(t.bMT(20,17,"lang_button_cancel")),t.R7$(2),t.Y8G("disabled",J.form.controls.name.errors&&!J.data.isOnlyCoefficient||J.form.controls.coefficient.errors),t.R7$(),t.Y8G("ngIf",J.statusObj.loading),t.R7$(),t.SpI(" ",t.bMT(24,19,"lang_button_save")," "))},dependencies:[l.bT,g.qT,g.me,g.Q0,g.BC,g.cb,g.j4,g.JD,m.t,n.R,ut.wp],styles:[".truncate[_ngcontent-%COMP%]{max-width:90px;vertical-align:middle;cursor:pointer}@media (max-width: 640px){.truncate[_ngcontent-%COMP%]{max-width:180px}.list-class[_ngcontent-%COMP%]{max-height:60vh}}.box[_ngcontent-%COMP%]{margin-top:1px}.hidden-scroll[_ngcontent-%COMP%]::-webkit-inner-spin-button, .hidden-scroll[_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}"]}),W})()},71703:(Mt,St,r)=>{r.d(St,{V:()=>ae});var g=r(81519),o=r(34514),e=r(47426),A=r(89163),t=r(99503),at=r(79347),l=r(33887),m=r(9691),n=r(48891),ut=r(62095),kt=r(59640),q=r(18148),tt=r(69307),pt=r(46899),L=r(10296),Q=r(67638),V=r(40609),W=r(54460),X=r(47712),st=r(66729),J=r(2915),et=r(52811),jt=r(5800),vt=r(74637),Tt=r(10123),rt=r(15343),wt=r(76975);const Pt=["table_score_student"],U=()=>[],It=()=>({"mr-2":!0}),ct=()=>({"text-success":!0});function Z(F,mt){if(1&F){const P=n.RV6();n.j41(0,"div",11)(1,"button",12),n.bIt("click",function(){n.eBV(P);const D=n.XpG();return n.Njj(D.downloadTableScore())}),n.nrm(2,"lucide-icon",13),n.j41(3,"span"),n.EFF(4),n.nI1(5,"mytranslate"),n.k0s()()()}2&F&&(n.R7$(2),n.Y8G("ngClass",n.lJ4(4,It)),n.R7$(2),n.JRh(n.bMT(5,2,"lang_student_export_a_grade_sheet")))}function gt(F,mt){if(1&F){const P=n.RV6();n.j41(0,"div",14)(1,"button",15),n.nI1(2,"mytranslate"),n.bIt("click",function(){n.eBV(P);const D=n.XpG();return n.Njj(D.downloadTableScore())}),n.nrm(3,"lucide-icon",16),n.k0s(),n.j41(4,"button",17),n.nI1(5,"mytranslate"),n.bIt("click",function(){n.eBV(P);const D=n.XpG();return n.Njj(D.closeDialog.emit(D.isEdit))}),n.nrm(6,"lucide-icon",18),n.k0s()()}2&F&&(n.R7$(),n.FS9("matTooltip",n.bMT(2,2,"lang_student_export_a_grade_sheet")),n.R7$(3),n.FS9("matTooltip",n.bMT(5,4,"lang_auto_thoat")))}function Et(F,mt){1&F&&n.nrm(0,"azt-loading-ui",25)}function it(F,mt){if(1&F&&(n.j41(0,"div",36),n.EFF(1),n.nI1(2,"mytranslate"),n.nI1(3,"formatOnlyDateByUserUnitPipe"),n.k0s()),2&F){const P=n.XpG().$implicit;n.R7$(),n.Lme(" ",n.bMT(2,2,"lang_student_profile_utils_homework_answer_created_at"),": ",n.bMT(3,4,P.createdAt)," ")}}function dt(F,mt){if(1&F&&(n.j41(0,"div",36)(1,"span"),n.EFF(2),n.nI1(3,"mytranslate"),n.k0s(),n.j41(4,"span",37),n.EFF(5),n.k0s()()),2&F){const P=n.XpG().$implicit;n.R7$(2),n.JRh(n.bMT(3,2,"lang_auto_he_so")),n.R7$(3),n.JRh(P.coefficient)}}function _t(F,mt){if(1&F){const P=n.RV6();n.j41(0,"button",38),n.nI1(1,"mytranslate"),n.bIt("click",function(){n.eBV(P);const D=n.XpG().$implicit,ht=n.XpG(2);return n.Njj(ht.editScore(D))}),n.nrm(2,"lucide-icon",39),n.k0s()}2&F&&n.FS9("matTooltip",n.bMT(1,1,"lang_student_sua_dau_diem"))}function nt(F,mt){if(1&F&&(n.j41(0,"div",40),n.nrm(1,"azt-check-mark",41),n.k0s()),2&F){const P=n.XpG().$implicit;n.R7$(),n.Y8G("mark",P.marks.length>0?P.marks[0]:"")}}function ot(F,mt){if(1&F&&(n.j41(0,"div",40),n.nrm(1,"azt-check-mark",41),n.k0s()),2&F){const P=n.XpG().$implicit,w=n.XpG(2);n.R7$(),n.Y8G("mark",w.returnValue(P))}}function Ct(F,mt){if(1&F){const P=n.RV6();n.j41(0,"input",42),n.nI1(1,"mytranslate"),n.nI1(2,"mytranslate"),n.bIt("input",function(D){n.eBV(P);const ht=n.XpG().$implicit,Rt=n.XpG(2);return n.Njj(Rt.handleMarkStudent(D,ht.id))}),n.k0s()}if(2&F){const P=n.XpG().$implicit,w=n.XpG(2);n.FS9("matTooltip",n.bMT(1,6,"lang_core_diem_duoc_tach_boi_dau_cach")),n.Mz_("id","input_point_",P.id.toString(),""),n.FS9("placeholder",n.bMT(2,8,"lang_auto_nhap_diem")),n.Y8G("disabled",w.isStudent)("value",w.returnValue(P))}}function Dt(F,mt){1&F&&(n.nrm(0,"lucide-icon",46),n.nI1(1,"mytranslate"),n.nI1(2,"mytranslate")),2&F&&n.FCK("matTooltip","",n.bMT(1,3,"lang_auto_sua")," ",n.bMT(2,5,"lang_auto_diem"),"")}function Y(F,mt){1&F&&(n.nrm(0,"lucide-icon",47),n.nI1(1,"mytranslate")),2&F&&n.FS9("matTooltip",n.bMT(1,1,"lang_editor_common_cancel"))}function y(F,mt){if(1&F){const P=n.RV6();n.j41(0,"button",43),n.bIt("click",function(){n.eBV(P);const D=n.XpG().$implicit,ht=n.XpG(2);return n.Njj(ht.viewInput(D.id==ht.inputPointSelect?-1:D.id))}),n.DNE(1,Dt,3,7,"lucide-icon",44)(2,Y,2,3,"lucide-icon",45),n.k0s()}if(2&F){const P=n.XpG().$implicit,w=n.XpG(2);n.R7$(),n.Y8G("ngIf",w.inputPointSelect!=P.id),n.R7$(),n.Y8G("ngIf",w.inputPointSelect==P.id)}}function $(F,mt){1&F&&n.nrm(0,"azt-loading-ui",51)}function S(F,mt){1&F&&n.nrm(0,"lucide-icon",52),2&F&&n.Y8G("ngClass",n.lJ4(1,ct))}function z(F,mt){if(1&F){const P=n.RV6();n.j41(0,"button",48),n.nI1(1,"mytranslate"),n.bIt("click",function(){n.eBV(P);const D=n.XpG().$implicit,ht=n.XpG(2);return n.Njj(ht.saveMark(D))}),n.DNE(2,$,1,0,"azt-loading-ui",49)(3,S,1,2,"lucide-icon",50),n.k0s()}if(2&F){const P=n.XpG(3);n.FS9("matTooltip",n.bMT(1,4,"lang_button_save")),n.Y8G("disabled",P.isSave),n.R7$(2),n.Y8G("ngIf",P.isSave),n.R7$(),n.Y8G("ngIf",!P.isSave)}}function lt(F,mt){if(1&F){const P=n.RV6();n.j41(0,"button",53),n.nI1(1,"mytranslate"),n.bIt("click",function(){n.eBV(P);const D=n.XpG().$implicit,ht=n.XpG(2);return n.Njj(ht.goToEditPoint(D))}),n.nrm(2,"lucide-icon",54),n.k0s()}2&F&&n.FS9("matTooltip",n.bMT(1,1,"lang_core_go_to_enter_score"))}function Ot(F,mt){if(1&F&&(n.j41(0,"tr")(1,"td")(2,"div",14)(3,"div"),n.EFF(4),n.DNE(5,it,4,6,"div",26)(6,dt,6,4,"div",26),n.k0s(),n.DNE(7,_t,3,3,"button",27),n.k0s()(),n.j41(8,"td",28)(9,"div",29),n.DNE(10,nt,2,1,"div",30)(11,ot,2,1,"div",30)(12,Ct,3,10,"input",31)(13,y,3,2,"button",32)(14,z,4,6,"button",33),n.k0s()(),n.j41(15,"td",34),n.DNE(16,lt,3,3,"button",35),n.k0s()()),2&F){const P=mt.$implicit,w=n.XpG(2);n.R7$(4),n.SpI(" ",P.name," "),n.R7$(),n.Y8G("ngIf",P.createdAt&&!w.isStudent),n.R7$(),n.Y8G("ngIf",P.coefficient),n.R7$(),n.Y8G("ngIf",!w.isStudent),n.R7$(3),n.Y8G("ngIf","homework"==P.objectType),n.R7$(),n.Y8G("ngIf","homework"!=P.objectType&&w.inputPointSelect!=P.id),n.R7$(),n.Y8G("ngIf","homework"!=P.objectType&&w.inputPointSelect==P.id),n.R7$(),n.Y8G("ngIf",!w.isStudent&&P.canEditMark&&!w.listMarkNew),n.R7$(),n.Y8G("ngIf",!w.isStudent&&P.canEditMark&&w.listMarkNew&&w.listMarkNew.id==P.id),n.R7$(2),n.Y8G("ngIf",!w.isStudent&&P.programId&&P.sessionId)}}function Lt(F,mt){1&F&&n.nrm(0,"azt-loading-ui",25)}function Vt(F,mt){if(1&F){const P=n.RV6();n.j41(0,"azt-mat-dialog-content")(1,"div",19),n.DNE(2,Et,1,0,"azt-loading-ui",20),n.j41(3,"azt-filter-box",21),n.bIt("sendFilter",function(D){n.eBV(P);const ht=n.XpG();return n.Njj(ht.filterData(D))}),n.k0s()(),n.j41(4,"table",22)(5,"tbody"),n.DNE(6,Ot,17,10,"tr",10),n.j41(7,"tr")(8,"td"),n.EFF(9),n.nI1(10,"mytranslate"),n.k0s(),n.j41(11,"td",23)(12,"div",24),n.DNE(13,Lt,1,0,"azt-loading-ui",20),n.EFF(14),n.k0s()()()()()()}if(2&F){let P;const w=n.XpG();n.R7$(2),n.Y8G("ngIf",w.statusObj.loading),n.R7$(4),n.Y8G("ngForOf",null!==(P=w.data.marks)&&void 0!==P?P:n.lJ4(8,U)),n.R7$(3),n.SpI(" ",n.bMT(10,6,"lang_business_diem_tong_ket")," "),n.R7$(2),n.Y8G("colSpan",2),n.R7$(2),n.Y8G("ngIf",w.isSave),n.R7$(),n.SpI(" ",w.data.averageMark," ")}}function Ht(F,mt){if(1&F&&(n.j41(0,"div",36)(1,"span"),n.EFF(2),n.nI1(3,"mytranslate"),n.k0s(),n.j41(4,"span",37),n.EFF(5),n.k0s()()),2&F){const P=n.XpG().$implicit;n.R7$(2),n.JRh(n.bMT(3,2,"lang_auto_he_so")),n.R7$(3),n.JRh(P.coefficient)}}function Xt(F,mt){if(1&F&&(n.j41(0,"div",40),n.nrm(1,"azt-check-mark",41),n.k0s()),2&F){const P=n.XpG().$implicit;n.R7$(),n.Y8G("mark",P.marks.length>0?P.marks[0]:"")}}function Qt(F,mt){if(1&F&&(n.j41(0,"div",40),n.nrm(1,"azt-check-mark",41),n.k0s()),2&F){const P=n.XpG().$implicit,w=n.XpG(2);n.R7$(),n.Y8G("mark",w.returnValue(P))}}function qt(F,mt){if(1&F&&(n.j41(0,"tr")(1,"td")(2,"div",14)(3,"div"),n.EFF(4),n.DNE(5,Ht,6,4,"div",26),n.k0s()()(),n.j41(6,"td",59),n.DNE(7,Xt,2,1,"div",30)(8,Qt,2,1,"div",30),n.k0s()()),2&F){const P=mt.$implicit;n.R7$(4),n.SpI(" ",P.name," "),n.R7$(),n.Y8G("ngIf",P.coefficient),n.R7$(2),n.Y8G("ngIf","homework"==P.objectType),n.R7$(),n.Y8G("ngIf","homework"!=P.objectType)}}function te(F,mt){if(1&F&&(n.j41(0,"table",55)(1,"thead")(2,"tr")(3,"th",56),n.EFF(4),n.nI1(5,"mytranslate"),n.k0s(),n.j41(6,"th",57),n.EFF(7),n.nI1(8,"mytranslate"),n.k0s()()(),n.j41(9,"tbody"),n.DNE(10,qt,9,4,"tr",10),n.j41(11,"tr")(12,"td"),n.EFF(13),n.nI1(14,"mytranslate"),n.k0s(),n.j41(15,"td")(16,"div",58),n.EFF(17),n.k0s()()()()()),2&F){let P;const w=n.XpG();n.R7$(4),n.JRh(n.bMT(5,5,"lang_student_name_component_score")),n.R7$(3),n.JRh(n.bMT(8,7,"lang_testbank_update_exam_point")),n.R7$(3),n.Y8G("ngForOf",null!==(P=w.data.marks)&&void 0!==P?P:n.lJ4(11,U)),n.R7$(3),n.SpI(" ",n.bMT(14,9,"lang_business_diem_tong_ket")," "),n.R7$(4),n.SpI(" ",w.data.averageMark," ")}}function ee(F,mt){if(1&F&&n.nrm(0,"azt-check-mark",41),2&F){const P=n.XpG().$implicit;n.Y8G("mark",P.marks.length>0?P.marks[0]:"")}}function ne(F,mt){if(1&F&&n.nrm(0,"azt-check-mark",41),2&F){const P=n.XpG().$implicit,w=n.XpG();n.Y8G("mark",w.returnValue(P))}}function oe(F,mt){if(1&F&&(n.j41(0,"tr")(1,"td",9),n.EFF(2),n.k0s(),n.j41(3,"td",9),n.EFF(4),n.k0s(),n.j41(5,"td",9),n.EFF(6),n.k0s(),n.j41(7,"td",9),n.DNE(8,ee,1,1,"azt-check-mark",60)(9,ne,1,1,"azt-check-mark",60),n.k0s()()),2&F){const P=mt.$implicit,w=mt.index,D=n.XpG();n.R7$(),n.BMQ("excelRow",w+1)("excelColumn",0)("excelStyle",D.styleTdNormal),n.R7$(),n.SpI(" ",P.name?w+1:""," "),n.R7$(),n.BMQ("excelRow",w+1)("excelColumn",1)("excelStyle",D.styleTdNormalLeft),n.R7$(),n.SpI(" ",P.name," "),n.R7$(),n.BMQ("excelRow",w+1)("excelColumn",2)("excelStyle",D.styleTdNotNumberNormal),n.R7$(),n.SpI(" ",P.coefficient," "),n.R7$(),n.BMQ("excelRow",w+1)("excelColumn",3)("excelStyle",D.styleTdNotNumberNormal),n.R7$(),n.Y8G("ngIf","homework"==P.objectType),n.R7$(),n.Y8G("ngIf","homework"!=P.objectType)}}let ie=(()=>{var F;class mt extends kt.H{filterData(w){this.dataFilter=w,this.initStatusObj(),this.getStudent()}getStudent(){this.waitDestroy(this.studentService.apiStudentsListPost({page:1,size:1,id:this.data.id,markMonth:this.dataFilter?.monthSelected,markYear:this.dataFilter?.yearSelected,classroomId:this.data.classroomId,getBook:!1,getMark:!0,getAttendance:!1,getPayment:!1,me:this.isStudent??!1,getAssessment:!1}).subscribe({next:D=>{D.list.length&&(this.data=D.list[0]),this.stopStatusObj()},error:D=>{this.errorStatusObj(D.error.message,!0)}}))}downloadTableScore(){q.L.openLoadingEffect(this.commonService.myTranslateInstant("lang_auto_dang_lay_du_lieu_tu_he_thong")??"");var w=this.exportExcelService.exportHtmlTableToExcelBlob(this.table_score_student,!0);let D=this.commonService.createFileNameExportFile(["bang_diem_hoc_sinh"+this.data.fullName])+".xlsx";this.shareFileFlutterService.shareFileWithBlob(w,D),q.L.closeLoadingEffect(200)}goToEditPoint(w){this.closeDialog.emit(),this.myNavigationWithQueryString("/admin/student/submit-score/"+w.classroomId+"/"+w.programId+"/"+w.sessionId,"?studentId="+this.data.id)}viewInput(w){this.inputPointSelect=w}handleMarkStudent(w,D){if(!this.isStudent){var ht=this.commonService.handlePointByValueInput(w);this.listMarkNew={id:D,points:ht.length>0?ht:[-1]}}}saveMark(w){this.isSave=!0,this.listMarkNew&&this.waitDestroy(this.studentService.apiStudentsMarksPost({programId:w.programId,classroomId:w.classroomId,sessionId:w.sessionId,students:[{id:this.data.id,listMarks:[this.listMarkNew]}]}).subscribe(ht=>{ht?(this.data.marks?.filter(Rt=>Rt.id==w.id)?.forEach(Rt=>Rt.marks=this.listMarkNew?.points?.find(Nt=>-1==Nt)?[]:this.listMarkNew?.points??Rt.marks),this.getStudent(),this.listMarkNew=void 0,this.inputPointSelect=-1,this.isEdit=!0,this.successStatusObj("lang_auto_cap_nhat_diem_thanh_cong",!0)):this.errorStatusObj("lang_auto_cap_nhat_diem_khong_thanh_cong",!0),this.isSave=!1}))}editScore(w){w&&this.sAztDialogService.open(tt._,{data:{...w,canEditName:w.canEditMark},restoreFocus:!1,width:"400px"}).afterClosed().subscribe(D=>{if(D){try{var ht=this.data.marks?.find(Rt=>Rt.id==w.id);ht&&(ht.coefficient=D.coefficient,ht.name=D.name)}catch{}this.isEdit=!0}})}returnValue(w){return(w.marks??[]).join(" ")}ngOnInit(){super.ngOnInit()}constructor(w,D,ht,Rt,Nt){super(),this.sAztDialogService=w,this.sAztTimeService=D,this.shareFileFlutterService=ht,this.exportExcelService=Rt,this.studentService=Nt,this.styleThNormal='{"alignment":{"vertical":"center","horizontal":"center","wrapText":true},"font":{"bold":true,"color":{"rgb":"ffffffff"}},"fill":{"patternType":"solid","fgColor":{"rgb":"2361ae"}},"border": {"right":{"style": "thin","color":{"rgb":"ffffffff"}},"left":{"style": "thin","color":{"rgb":"ffffffff"}}}}',this.styleTdNormalLeft='{"alignment":{"vertical":"center","horizontal":"left", "wrapText":true},"font":{"bold":false,"color":{"rgb":"000000"}}}',this.styleTdNotNumberNormal='{"alignment":{"vertical":"center","horizontal":"center", "wrapText":true},"font":{"bold":false,"color":{"rgb":"000000"}},"isText":"1"}',this.styleTdNormal='{"alignment":{"vertical":"center","horizontal":"center", "wrapText":true},"font":{"bold":false,"color":{"rgb":"000000"}}}',this.closeDialog=new n.bkB,this.inputPointSelect=-1,this.isSave=!1,this.isEdit=!1,this.commonService=(0,n.WQX)(ut.R)}ngOnDestroy(){super.ngOnDestroy()}}return(F=mt).\u0275fac=function(w){return new(w||F)(n.rXU(pt.i),n.rXU(m.F),n.rXU(L.R),n.rXU(Q.x),n.rXU(V.b))},F.\u0275cmp=n.VBU({type:F,selectors:[["azt-view-table-score-single"]],viewQuery:function(w,D){if(1&w&&n.GBs(Pt,5),2&w){let ht;n.mGM(ht=n.lsd())&&(D.table_score_student=ht.first)}},inputs:{data:"data",isStudent:"isStudent",viewDialog:"viewDialog"},outputs:{closeDialog:"closeDialog"},features:[n.Jv_([{provide:g.$O,useClass:t.fb,deps:[e.Ju,o.ij]},{provide:g.vq,useFactory:at.fJ,deps:[m.F]}]),n.Vt3],decls:34,vars:61,consts:[["table_score_student",""],["class","flex justify-end mb-5",4,"ngIf"],[1,"box"],[1,"pt-5","px-5","flex","justify-between","items-start"],[3,"name","parentFullName","parentId","parentPhone","phone","email","avatar","gender","hasUser"],["class","flex items-center",4,"ngIf"],[4,"ngIf"],["class","table table-report","style","white-space: initial; display: table",4,"ngIf"],[1,"table","table-bordered",2,"display","none",3,"border"],[1,"text-center","azt-excel-cell"],[4,"ngFor","ngForOf"],[1,"flex","justify-end","mb-5"],["azt-track-service","view-table-score-single-vS0yZHQHw",1,"btn","btn-primary","flex","btn-download-excel",3,"click"],["name","download","size","18",3,"ngClass"],[1,"flex","items-center"],["matRipple","",1,"btn","btn-sm","btn-outline-primary","border-0","mr-2","p-1",3,"click","matTooltip"],["name","download","size","20"],["matRipple","",1,"btn","btn-sm","btn-outline-secondary","border-0","p-1",3,"click","matTooltip"],["name","x","size","20"],[1,"pt-3","px-5","flex","justify-end","items-center"],["class","loading-upload mr-1","type","bootstrap-spinner",4,"ngIf"],[3,"sendFilter"],["drag-scroll-item","",1,"table","table-report",2,"white-space","initial","display","table"],[3,"colSpan"],[1,"flex","justify-center","font-bold","items-center"],["type","bootstrap-spinner",1,"loading-upload","mr-1"],["class","mt-0.5 text-xs text-slate-500",4,"ngIf"],["azt-track-service","table-score-single-diaglog-VepNA5tWXp","style","color: gray","class","w-5 h-5 inline-block ml-1",3,"matTooltip","click",4,"ngIf"],[1,"text-center",2,"padding","0"],[1,"flex","items-center",2,"position","relative"],["class","form-control form-control-sm text-center box-point-homework",4,"ngIf"],["style","color: black !important;","type","text","class","form-control form-control-sm text-center",3,"matTooltip","id","disabled","value","placeholder","input",4,"ngIf"],["azt-track-service","view-table-score-single-lX3L0QoGBo","class","inline-block btn-edit-point zoom-in",3,"click",4,"ngIf"],["azt-track-service","view-table-score-single-uJE-8eAu46","class","inline-block btn-edit-point zoom-in",3,"matTooltip","disabled","click",4,"ngIf"],[1,"text-center",2,"padding","0 10px 0 10px"],["class","btn btn-secondary-soft","matRipple","",3,"matTooltip","click",4,"ngIf"],[1,"mt-0.5","text-xs","text-slate-500"],[1,"inline-block","ml-1"],["azt-track-service","table-score-single-diaglog-VepNA5tWXp",1,"w-5","h-5","inline-block","ml-1",2,"color","gray",3,"click","matTooltip"],["name","pencil","size","16"],[1,"form-control","form-control-sm","text-center","box-point-homework"],[3,"mark"],["type","text",1,"form-control","form-control-sm","text-center",2,"color","black !important",3,"input","matTooltip","id","disabled","value","placeholder"],["azt-track-service","view-table-score-single-lX3L0QoGBo",1,"inline-block","btn-edit-point","zoom-in",3,"click"],["name","pencil","size","16",3,"matTooltip",4,"ngIf"],["name","x","size","16",3,"matTooltip",4,"ngIf"],["name","pencil","size","16",3,"matTooltip"],["name","x","size","16",3,"matTooltip"],["azt-track-service","view-table-score-single-uJE-8eAu46",1,"inline-block","btn-edit-point","zoom-in",3,"click","matTooltip","disabled"],["class","loading-upload","type","bootstrap-spinner",4,"ngIf"],["name","check","size","20",3,"ngClass",4,"ngIf"],["type","bootstrap-spinner",1,"loading-upload"],["name","check","size","20",3,"ngClass"],["matRipple","",1,"btn","btn-secondary-soft",3,"click","matTooltip"],["name","external-link","size","16"],[1,"table","table-report",2,"white-space","initial","display","table"],[1,"whitespace-nowrap"],[1,"whitespace-nowrap","text-center"],[1,"flex","justify-center","font-bold"],[1,"text-center"],[3,"mark",4,"ngIf"]],template:function(w,D){if(1&w&&(n.DNE(0,Z,6,5,"div",1),n.j41(1,"div",2)(2,"div",3),n.nrm(3,"azt-student-info-box",4),n.DNE(4,gt,7,6,"div",5),n.k0s(),n.DNE(5,Vt,15,9,"azt-mat-dialog-content",6)(6,te,18,12,"table",7),n.k0s(),n.j41(7,"table",8,0)(9,"thead")(10,"tr")(11,"th",9),n.EFF(12),n.nI1(13,"mytranslate"),n.k0s(),n.j41(14,"th",9),n.EFF(15),n.nI1(16,"mytranslate"),n.k0s(),n.j41(17,"th",9),n.EFF(18),n.nI1(19,"mytranslate"),n.k0s(),n.j41(20,"th",9),n.EFF(21),n.nI1(22,"mytranslate"),n.k0s()()(),n.j41(23,"tbody"),n.DNE(24,oe,10,17,"tr",10),n.j41(25,"tr")(26,"td",9),n.EFF(27),n.k0s(),n.j41(28,"td",9),n.EFF(29),n.nI1(30,"mytranslate"),n.k0s(),n.nrm(31,"td"),n.j41(32,"td",9),n.EFF(33),n.k0s()()()()),2&w){let ht,Rt,Nt,Ut,Wt,zt;n.Y8G("ngIf",D.isStudent&&!D.viewDialog),n.R7$(3),n.Y8G("name",D.data.fullName)("parentFullName",D.data.parentFullName)("parentId",D.data.parentId)("parentPhone",D.data.parentPhone)("phone",D.data.phone)("email",D.data.email)("avatar",D.data.avatar)("gender",D.data.gender)("hasUser",D.data.hasUser),n.R7$(),n.Y8G("ngIf",D.viewDialog),n.R7$(),n.Y8G("ngIf",D.viewDialog),n.R7$(),n.Y8G("ngIf",D.isStudent&&!D.viewDialog),n.R7$(),n.Y8G("border",1),n.R7$(4),n.BMQ("excelWidth",10)("excelRow",0)("excelColumn",0)("excelStyle",D.styleThNormal),n.R7$(),n.SpI(" ",n.bMT(13,50,"lang_student_export_excel_no")," "),n.R7$(2),n.BMQ("excelWidth",10)("excelRow",0)("excelColumn",1)("excelStyle",D.styleThNormal),n.R7$(),n.SpI(" ",n.bMT(16,52,"lang_student_name_component_score")," "),n.R7$(2),n.BMQ("excelWidth",10)("excelRow",0)("excelColumn",2)("excelStyle",D.styleThNormal),n.R7$(),n.SpI(" ",n.bMT(19,54,"lang_auto_he_so")," "),n.R7$(2),n.BMQ("excelWidth",20)("excelRow",0)("excelColumn",3)("excelStyle",D.styleThNormal),n.R7$(),n.SpI(" ",n.bMT(22,56,"lang_testbank_update_exam_point")," "),n.R7$(3),n.Y8G("ngForOf",null!==(ht=D.data.marks)&&void 0!==ht?ht:n.lJ4(60,U)),n.R7$(2),n.BMQ("excelRow",(null!==(Rt=null==D.data.marks?null:D.data.marks.length)&&void 0!==Rt?Rt:0)+1)("excelColumn",0)("excelStyle",D.styleTdNormal),n.R7$(),n.SpI(" ",(null!==(Nt=null==D.data.marks?null:D.data.marks.length)&&void 0!==Nt?Nt:0)+1," "),n.R7$(),n.BMQ("excelRow",(null!==(Ut=null==D.data.marks?null:D.data.marks.length)&&void 0!==Ut?Ut:0)+1)("excelColumn",1)("excelStyle",D.styleTdNormal),n.R7$(),n.SpI(" ",n.bMT(30,58,"lang_business_diem_tong_ket")," "),n.R7$(2),n.BMQ("excelRow",(null!==(Wt=null==D.data.marks?null:D.data.marks.length)&&void 0!==Wt?Wt:0)+1)("excelColumn",3)("excelStyle",D.styleTdNormal),n.R7$(),n.BMQ("excelRow",(null!==(zt=null==D.data.marks?null:D.data.marks.length)&&void 0!==zt?zt:0)+1)("excelColumn",4)("excelStyle",D.styleTdNotNumberNormal),n.R7$(),n.SpI(" ",D.data.averageMark," ")}},dependencies:[W.YU,W.Sq,W.bT,e.r6,X.oV,st.D,J.U,et.R,jt.B,vt.E,Tt.Ew,rt.WGl,wt.wp,wt.vv],styles:[".text-sm[_ngcontent-%COMP%]{font-size:14px!important}.box[_ngcontent-%COMP%]{height:100%}.box-point-homework[_ngcontent-%COMP%]{min-width:90px;background-color:rgb(var(--color-slate-100)/var(--tw-bg-opacity));border:1px solid;border-color:rgb(var(--color-slate-200)/var(--tw-border-opacity));font-weight:700;min-height:34px}.btn-edit-point[_ngcontent-%COMP%]{position:absolute;right:5px;color:gray}"]}),mt})(),ae=(()=>{var F;class mt extends l._{closeDialog(w){this.dialogRef.close(w)}ngOnInit(){super.ngOnInit()}constructor(w,D){super(D,w),this.dialogRef=w,this.data=D}ngOnDestroy(){super.ngOnDestroy()}}return(F=mt).\u0275fac=function(w){return new(w||F)(n.rXU(A.CP,8),n.rXU(A.Vh,8))},F.\u0275cmp=n.VBU({type:F,selectors:[["azt-table-score-single"]],features:[n.Jv_([{provide:g.$O,useClass:t.fb,deps:[e.Ju,o.ij]},{provide:g.vq,useFactory:at.fJ,deps:[m.F]}]),n.Vt3],decls:1,vars:3,consts:[[3,"closeDialog","data","isStudent","viewDialog"]],template:function(w,D){1&w&&(n.j41(0,"azt-view-table-score-single",0),n.bIt("closeDialog",function(Rt){return D.closeDialog(Rt)}),n.k0s()),2&w&&n.Y8G("data",D.data.student)("isStudent",!D.data.isTeacher)("viewDialog",!0)},dependencies:[ie],encapsulation:2}),mt})()},19857:(Mt,St,r)=>{r.d(St,{g:()=>pe});var g=r(76627),o=r(59640),e=r(18148),A=r(37497),t=r(75421),at=r(27208),l=r(69307),m=r(71703),n=r(48891),ut=r(90998),kt=r(40609),q=r(9691),tt=r(46899),pt=r(64624),L=r(67638),Q=r(65162),V=r(10296),W=r(54460),X=r(47712),st=r(18718),J=r(22613),et=r(66729),jt=r(52811),vt=r(11002),Tt=r(32099),rt=r(5800),wt=r(10123),Pt=r(15343),U=r(76975);const It=["table_score"],ct=()=>({"mr-2":!0}),Z=()=>[],gt=()=>({"text-danger":!0});function Et(j,K){1&j&&(n.j41(0,"div",10),n.EFF(1),n.nI1(2,"mytranslate"),n.k0s()),2&j&&(n.R7$(),n.SpI(" ",n.bMT(2,1,"lang_core_huong_dan_chon_vao_bang_va_vuot_sang_trai_de_xem_cac_thong_tin_khac")," "))}function it(j,K){if(1&j&&(n.j41(0,"div",7)(1,"h3",8),n.EFF(2),n.nI1(3,"mytranslate"),n.k0s(),n.DNE(4,Et,3,3,"div",9),n.k0s()),2&j){let C;const x=n.XpG();n.R7$(2),n.JRh(n.bMT(3,2,"lang_student_enter_score")),n.R7$(2),n.Y8G("ngIf",x.isMobileDevice&&!x.isStudent&&(null!==(C=null==x.dataStudent||null==x.dataStudent.list?null:x.dataStudent.list.length)&&void 0!==C?C:0)>0)}}function dt(j,K){1&j&&(n.j41(0,"div",10),n.EFF(1),n.nI1(2,"mytranslate"),n.k0s()),2&j&&(n.R7$(),n.SpI(" ",n.bMT(2,1,"lang_core_huong_dan_chon_vao_bang_va_vuot_sang_trai_de_xem_cac_thong_tin_khac")," "))}function _t(j,K){if(1&j&&(n.j41(0,"div",7)(1,"h3",8),n.EFF(2),n.nI1(3,"mytranslate"),n.k0s(),n.DNE(4,dt,3,3,"div",9),n.k0s()),2&j){let C;const x=n.XpG();n.R7$(2),n.JRh(n.bMT(3,2,"lang_auto_bang_diem")),n.R7$(2),n.Y8G("ngIf",x.isMobileDevice&&!x.isStudent&&(null!==(C=null==x.dataStudent||null==x.dataStudent.list?null:x.dataStudent.list.length)&&void 0!==C?C:0)>0)}}function nt(j,K){if(1&j){const C=n.RV6();n.j41(0,"button",19),n.bIt("click",function(){n.eBV(C);const O=n.XpG(2);return n.Njj(O.createNewScore())}),n.nrm(1,"lucide-icon",20),n.j41(2,"span"),n.EFF(3),n.nI1(4,"mytranslate"),n.k0s()()}2&j&&(n.R7$(),n.Y8G("ngClass",n.lJ4(4,ct)),n.R7$(2),n.JRh(n.bMT(4,2,"lang_student_enter_new_component_score")))}function ot(j,K){if(1&j){const C=n.RV6();n.j41(0,"button",21),n.bIt("click",function(){n.eBV(C);const O=n.XpG(2);return n.Njj(O.downloadTableScore())}),n.nrm(1,"lucide-icon",22),n.j41(2,"span"),n.EFF(3),n.nI1(4,"mytranslate"),n.k0s()()}2&j&&(n.R7$(),n.Y8G("ngClass",n.lJ4(4,ct)),n.R7$(2),n.JRh(n.bMT(4,2,"lang_student_export_a_grade_sheet")))}function Ct(j,K){1&j&&n.nrm(0,"azt-loading-ui",26)}function Dt(j,K){if(1&j){const C=n.RV6();n.j41(0,"flexed-on-the-top",23)(1,"button",24),n.bIt("click",function(){n.eBV(C);const O=n.XpG(2);return n.Njj(O.saveMark())}),n.DNE(2,Ct,1,0,"azt-loading-ui",25),n.EFF(3),n.nI1(4,"mytranslate"),n.k0s()()}if(2&j){const C=n.XpG(2);n.Y8G("colorBackground","#f0f8ffe8"),n.R7$(),n.Y8G("disabled",0==C.listStudentMark.length||C.isSave),n.R7$(),n.Y8G("ngIf",C.isSave),n.R7$(),n.SpI(" ",n.bMT(4,4,"lang_auto_luu")," ")}}function Y(j,K){if(1&j){const C=n.RV6();n.j41(0,"div",11)(1,"div",12)(2,"div",13)(3,"azt-search-box",14),n.nI1(4,"mytranslate"),n.bIt("onSearch",function(O){n.eBV(C);const R=n.XpG();return n.Njj(R.onSearchBox(O.searchObj))}),n.k0s()(),n.j41(5,"div",15),n.DNE(6,nt,5,5,"button",16)(7,ot,5,5,"button",17)(8,Dt,5,6,"flexed-on-the-top",18),n.k0s()()()}if(2&j){const C=n.XpG();n.R7$(3),n.Y8G("isServerSearch",!0)("placeholder",n.bMT(4,5,"lang_core_tim_theo_ten_phone_email")),n.R7$(3),n.Y8G("ngIf","ENTER_SCORE"==C.screenType),n.R7$(),n.Y8G("ngIf","TABLE_SCORE"==C.screenType),n.R7$(),n.Y8G("ngIf","ENTER_SCORE"==C.screenType)}}function y(j,K){if(1&j&&n.nrm(0,"azt-loading-effect",27),2&j){const C=n.XpG();n.Y8G("currentStatusObj",C.statusObj)}}function $(j,K){1&j&&(n.j41(0,"div",33),n.EFF(1),n.nI1(2,"mytranslate"),n.k0s()),2&j&&(n.R7$(),n.JRh(n.bMT(2,1,"lang_student_classroom_list_detail_not_student")))}function S(j,K){if(1&j&&(n.j41(0,"div",50)(1,"span"),n.EFF(2),n.nI1(3,"mytranslate"),n.k0s(),n.j41(4,"span",51),n.EFF(5),n.k0s()()),2&j){const C=n.XpG().$implicit;n.R7$(2),n.JRh(n.bMT(3,2,"lang_auto_he_so")),n.R7$(3),n.JRh(C.coefficient)}}function z(j,K){if(1&j){const C=n.RV6();n.j41(0,"button",52),n.nI1(1,"mytranslate"),n.bIt("click",function(){n.eBV(C);const O=n.XpG().$implicit,R=n.XpG(3);return n.Njj(R.createNewScore(O))}),n.nrm(2,"lucide-icon",53),n.k0s()}2&j&&n.FS9("matTooltip",n.bMT(1,1,"lang_student_sua_dau_diem"))}function lt(j,K){if(1&j){const C=n.RV6();n.j41(0,"button",54),n.nI1(1,"mytranslate"),n.bIt("click",function(){n.eBV(C);const O=n.XpG().$implicit,R=n.XpG(3);return n.Njj(R.deleteMark(O))}),n.nrm(2,"lucide-icon",55),n.k0s()}2&j&&(n.FS9("matTooltip",n.bMT(1,2,"lang_button_delete")),n.R7$(2),n.Y8G("ngClass",n.lJ4(4,gt)))}function Ot(j,K){if(1&j&&(n.j41(0,"th",42)(1,"div",43)(2,"div",44)(3,"div",45),n.EFF(4),n.k0s(),n.j41(5,"div",46),n.DNE(6,S,6,4,"div",47)(7,z,3,3,"button",48)(8,lt,3,5,"button",49),n.k0s()()()()),2&j){const C=K.$implicit,x=n.XpG(3);n.R7$(3),n.FS9("matTooltip",C.name),n.R7$(),n.JRh(C.name),n.R7$(2),n.Y8G("ngIf",C.coefficient),n.R7$(),n.Y8G("ngIf",!x.isStudent),n.R7$(),n.Y8G("ngIf",C.canEditName)}}function Lt(j,K){1&j&&(n.j41(0,"th",56),n.EFF(1),n.nI1(2,"mytranslate"),n.k0s()),2&j&&(n.R7$(),n.JRh(n.bMT(2,1,"lang_business_diem_tong_ket")))}function Vt(j,K){if(1&j&&(n.j41(0,"div",66),n.nrm(1,"azt-check-mark",67),n.k0s()),2&j){const C=n.XpG().$implicit;n.R7$(),n.Y8G("mark",C.marks.length>0?C.marks[0]:"")}}function Ht(j,K){if(1&j&&(n.j41(0,"div",66),n.nrm(1,"azt-check-mark",67),n.k0s()),2&j){const C=n.XpG().$implicit,x=n.XpG(4);n.R7$(),n.Y8G("mark",x.returnValue(C))}}function Xt(j,K){if(1&j){const C=n.RV6();n.j41(0,"input",68),n.nI1(1,"mytranslate"),n.nI1(2,"mytranslate"),n.bIt("input",function(O){n.eBV(C);const R=n.XpG().index,ft=n.XpG().index,Ft=n.XpG(3);return n.Njj(Ft.handleMarkStudent(O,ft,R))}),n.k0s()}if(2&j){const C=n.XpG().$implicit,x=n.XpG().$implicit,O=n.XpG(3);n.FS9("matTooltip",n.bMT(1,5,"lang_core_diem_duoc_tach_boi_dau_cach")),n.FS9("id",C.id.toString()+"-"+x.id.toString()),n.FS9("placeholder",n.bMT(2,7,"lang_auto_nhap_diem")),n.Y8G("matTooltipDisabled",!C.canEditMark)("value",O.returnValue(C))}}function Qt(j,K){if(1&j&&(n.j41(0,"td",62),n.DNE(1,Vt,2,1,"div",63)(2,Ht,2,1,"div",63)(3,Xt,3,9,"input",64),n.nrm(4,"div",65),n.k0s()),2&j){const C=K.$implicit,x=n.XpG().$implicit,O=n.XpG(3);n.Y8G("hidden","TABLE_SCORE"==O.screenType),n.R7$(),n.Y8G("ngIf","homework"==C.objectType),n.R7$(),n.Y8G("ngIf","homework"!=C.objectType&&(!C.canEditMark||"ENTER_SCORE"!=O.screenType)),n.R7$(),n.Y8G("ngIf","homework"!=C.objectType&&C.canEditMark),n.R7$(),n.Mz_("id","error-",C.id.toString()+"-"+x.id.toString(),""),n.Y8G("hidden",!0)}}function qt(j,K){if(1&j&&(n.j41(0,"td")(1,"div",69),n.EFF(2),n.k0s()()),2&j){const C=n.XpG().$implicit;n.R7$(2),n.SpI(" ",C.averageMark," ")}}function te(j,K){if(1&j){const C=n.RV6();n.j41(0,"tr",57)(1,"td",58),n.bIt("click",function(){const O=n.eBV(C).$implicit,R=n.XpG(3);return n.Njj(R.openDialogTableSingle(O))}),n.nrm(2,"azt-student-info-box",59),n.k0s(),n.j41(3,"td",60),n.EFF(4),n.nI1(5,"formatStudentCodeToNumber"),n.k0s(),n.DNE(6,Qt,5,7,"td",61)(7,qt,3,1,"td",31),n.k0s()}if(2&j){let C;const x=K.$implicit,O=n.XpG(3);n.Y8G("id","row_student_"+x.id),n.R7$(2),n.Y8G("name",x.fullName)("parentFullName",x.parentFullName)("parentId",x.parentId)("parentPhone",x.parentPhone)("phone",x.phone)("avatar",x.avatar)("gender",x.gender)("hasUser",x.hasUser)("schoolName",x.schoolName)("classrooms",x.classrooms)("joinedAt",x.joinedAt)("identificationNumber",x.identificationNumber),n.R7$(2),n.JRh(x.identificationNumber?n.i5U(5,16,x.identificationNumber,6):""),n.R7$(2),n.Y8G("ngForOf",null!==(C=x.marks)&&void 0!==C?C:n.lJ4(19,Z)),n.R7$(),n.Y8G("ngIf","TABLE_SCORE"==O.screenType)}}function ee(j,K){if(1&j&&(n.j41(0,"div",34)(1,"drag-scroll")(2,"table",35)(3,"thead")(4,"tr",36)(5,"th",37),n.EFF(6),n.nI1(7,"mytranslate"),n.k0s(),n.j41(8,"th",38),n.EFF(9),n.nI1(10,"mytranslate"),n.k0s(),n.DNE(11,Ot,9,5,"th",39)(12,Lt,3,3,"th",40),n.k0s()(),n.j41(13,"tbody"),n.DNE(14,te,8,20,"tr",41),n.k0s()()()()),2&j){let C,x;const O=n.XpG(2);n.R7$(6),n.JRh(n.bMT(7,5,"lang_auto_ho_va_ten")),n.R7$(3),n.JRh(n.bMT(10,7,"lang_auto_so_bao_danh")),n.R7$(2),n.Y8G("ngForOf",null!==(C=null==O.dataMark?null:O.dataMark.list)&&void 0!==C?C:n.lJ4(9,Z)),n.R7$(),n.Y8G("ngIf","TABLE_SCORE"==O.screenType),n.R7$(2),n.Y8G("ngForOf",null!==(x=null==O.dataStudent?null:O.dataStudent.list)&&void 0!==x?x:n.lJ4(10,Z))}}function ne(j,K){if(1&j&&(n.j41(0,"div",72),n.nrm(1,"azt-student-info-box",73),n.j41(2,"div",74)(3,"div",75),n.EFF(4),n.nI1(5,"mytranslate"),n.k0s(),n.j41(6,"div",75),n.EFF(7),n.k0s()()()),2&j){const C=K.$implicit;n.R7$(),n.Y8G("name",C.fullName)("parentFullName",C.parentFullName)("parentId",C.parentId)("parentPhone",C.parentPhone)("phone",C.phone)("email",C.email)("avatar",C.avatar)("gender",C.gender)("hasUser",C.hasUser)("identificationNumber",C.identificationNumber),n.R7$(3),n.SpI(" ",n.bMT(5,12,"lang_business_diem_tong_ket")," "),n.R7$(3),n.SpI(" ",C.averageMark," ")}}function oe(j,K){1&j&&n.nrm(0,"lucide-icon",80)}function ie(j,K){1&j&&n.nrm(0,"lucide-icon",81)}function ae(j,K){if(1&j&&(n.j41(0,"div",91)(1,"span"),n.EFF(2),n.nI1(3,"mytranslate"),n.k0s(),n.j41(4,"span",51),n.EFF(5),n.k0s()()),2&j){const C=n.XpG().$implicit;n.R7$(2),n.JRh(n.bMT(3,2,"lang_auto_he_so")),n.R7$(3),n.JRh(C.coefficient)}}function F(j,K){if(1&j&&(n.j41(0,"div",92),n.nrm(1,"azt-check-mark",67),n.k0s()),2&j){const C=n.XpG().$implicit;n.R7$(),n.Y8G("mark",C.marks.length>0?C.marks[0]:"")}}function mt(j,K){if(1&j&&(n.j41(0,"div",92),n.nrm(1,"azt-check-mark",67),n.k0s()),2&j){const C=n.XpG().$implicit,x=n.XpG(6);n.R7$(),n.Y8G("mark",x.returnValue(C))}}function P(j,K){if(1&j&&(n.j41(0,"tr")(1,"td")(2,"div",87)(3,"div"),n.EFF(4),n.DNE(5,ae,6,4,"div",88),n.k0s()()(),n.j41(6,"td",89),n.DNE(7,F,2,1,"div",90)(8,mt,2,1,"div",90),n.k0s()()),2&j){const C=K.$implicit;n.R7$(4),n.SpI(" ",C.name," "),n.R7$(),n.Y8G("ngIf",C.coefficient),n.R7$(2),n.Y8G("ngIf","homework"==C.objectType),n.R7$(),n.Y8G("ngIf","homework"!=C.objectType)}}function w(j,K){if(1&j&&(n.j41(0,"div",83)(1,"table",84)(2,"thead")(3,"tr")(4,"th",85),n.EFF(5),n.nI1(6,"mytranslate"),n.k0s(),n.j41(7,"th",86),n.EFF(8),n.nI1(9,"mytranslate"),n.k0s()()(),n.j41(10,"tbody"),n.DNE(11,P,9,4,"tr",71),n.k0s()()()),2&j){const C=n.XpG(2).$implicit;n.R7$(5),n.JRh(n.bMT(6,3,"lang_student_name_component_score")),n.R7$(3),n.JRh(n.bMT(9,5,"lang_testbank_update_exam_point")),n.R7$(3),n.Y8G("ngForOf",C.marks)}}function D(j,K){if(1&j&&(n.qex(0),n.DNE(1,w,12,7,"div",82),n.bVm()),2&j){const C=n.XpG(4);n.R7$(),n.Y8G("ngIf",C.isStudent)}}function ht(j,K){if(1&j){const C=n.RV6();n.j41(0,"div")(1,"h3",76)(2,"span",77),n.bIt("click",function(){const O=n.eBV(C).$implicit;return n.Njj(O.expand=!O.expand)}),n.EFF(3),n.nI1(4,"mytranslate"),n.DNE(5,oe,1,0,"lucide-icon",78)(6,ie,1,0,"lucide-icon",79),n.k0s()(),n.DNE(7,D,2,1,"ng-container",31),n.k0s()}if(2&j){const C=K.$implicit;n.R7$(3),n.Lme(" ",n.bMT(4,5,"lang_core_thang")," ",C.date," "),n.R7$(2),n.Y8G("ngIf",C.expand),n.R7$(),n.Y8G("ngIf",!C.expand),n.R7$(),n.Y8G("ngIf",C.expand)}}function Rt(j,K){if(1&j&&(n.j41(0,"div"),n.DNE(1,ne,8,14,"div",70)(2,ht,8,7,"div",71),n.k0s()),2&j){let C;const x=n.XpG(2);n.R7$(),n.Y8G("ngForOf",null!==(C=null==x.dataStudent?null:x.dataStudent.list)&&void 0!==C?C:n.lJ4(2,Z)),n.R7$(),n.Y8G("ngForOf",x.listGroupMarkDate)}}function Nt(j,K){if(1&j){const C=n.RV6();n.j41(0,"azt-paging",96),n.bIt("goToPaginationPage",function(O){n.eBV(C);const R=n.XpG(3);return n.Njj(R.setPageStudent(O))}),n.k0s()}if(2&j){const C=n.XpG(3);n.Y8G("pageObj",C.pageObj)}}function Ut(j,K){if(1&j&&(n.j41(0,"div",15),n.EFF(1),n.nI1(2,"mytranslate"),n.k0s()),2&j){const C=n.XpG(3);n.R7$(),n.Lme("",C.dataStudent.total," ",n.bMT(2,2,"lang_notify_list_students"),"")}}function Wt(j,K){if(1&j&&(n.j41(0,"div",93),n.nrm(1,"div"),n.DNE(2,Nt,1,1,"azt-paging",94)(3,Ut,3,4,"div",95),n.k0s()),2&j){const C=n.XpG(2);n.R7$(2),n.Y8G("ngIf",C.dataStudent.total>C.pageObj.pageSize),n.R7$(),n.Y8G("ngIf",!C.isStudent)}}function zt(j,K){if(1&j&&(n.j41(0,"div",28),n.DNE(1,$,3,3,"div",29)(2,ee,15,11,"div",30)(3,Rt,3,3,"div",31),n.k0s(),n.DNE(4,Wt,4,2,"div",32)),2&j){let C,x,O;const R=n.XpG();n.R7$(),n.Y8G("ngIf",!R.isStudent&&0==(null==R.dataStudent||null==R.dataStudent.list?null:R.dataStudent.list.length)&&0==(null!==(C=null==R.dataStudent?null:R.dataStudent.total)&&void 0!==C?C:0)),n.R7$(),n.Y8G("ngIf",!R.isStudent&&(null!==(x=null==R.dataStudent||null==R.dataStudent.list?null:R.dataStudent.list.length)&&void 0!==x?x:0)>0),n.R7$(),n.Y8G("ngIf",R.isStudent),n.R7$(),n.Y8G("ngIf",R.dataStudent&&R.dataStudent.total&&(null!==(O=null==R.dataStudent?null:R.dataStudent.total)&&void 0!==O?O:0)>0)}}function ce(j,K){if(1&j&&(n.j41(0,"th",98),n.EFF(1),n.nI1(2,"mytranslate"),n.k0s()),2&j){const C=K.$implicit,x=K.index,O=n.XpG(2);n.BMQ("excelWidth",20)("excelRow",0)("excelColumn",6+x)("excelStyle",O.styleThNormal),n.R7$(),n.Lme(" ",C.name+"\n"," "," ("+n.bMT(2,6,"lang_auto_he_so")+" "+C.coefficient+")"," ")}}function _e(j,K){if(1&j&&n.nrm(0,"azt-check-mark",67),2&j){const C=n.XpG().$implicit;n.Y8G("mark",C.marks.length>0?C.marks[0]:"")}}function me(j,K){if(1&j&&(n.j41(0,"span"),n.EFF(1),n.k0s()),2&j){const C=n.XpG().$implicit,x=n.XpG(3);n.R7$(),n.SpI(" ",x.returnValue(C)," ")}}function de(j,K){if(1&j&&(n.j41(0,"td",98),n.DNE(1,_e,1,1,"azt-check-mark",100)(2,me,2,1,"span",31),n.k0s()),2&j){const C=K.$implicit,x=K.index,O=n.XpG().index,R=n.XpG(2);n.BMQ("excelRow",O+1)("excelColumn",6+x)("excelStyle",R.styleTdNormal),n.R7$(),n.Y8G("ngIf","homework"==C.objectType),n.R7$(),n.Y8G("ngIf","homework"!=C.objectType)}}function re(j,K){if(1&j&&(n.j41(0,"tr")(1,"td",98),n.EFF(2),n.k0s(),n.j41(3,"td",98),n.EFF(4),n.k0s(),n.j41(5,"td",98),n.EFF(6),n.k0s(),n.j41(7,"td",98),n.EFF(8),n.k0s(),n.j41(9,"td",98),n.EFF(10),n.nI1(11,"formatOnlyDateByUserUnitPipe"),n.k0s(),n.j41(12,"td",98),n.EFF(13),n.nI1(14,"mytranslate"),n.nI1(15,"mytranslate"),n.k0s(),n.DNE(16,de,3,5,"td",99),n.j41(17,"td",98),n.EFF(18),n.k0s()()),2&j){let C,x;const O=K.$implicit,R=K.index,ft=n.XpG(2);n.R7$(),n.BMQ("excelRow",R+1)("excelColumn",0)("excelStyle",ft.styleTdNormal),n.R7$(),n.SpI(" ",null!=O&&O.fullName?R+1:""," "),n.R7$(),n.BMQ("excelRow",R+1)("excelColumn",1)("excelStyle",ft.styleTdNormalLeft),n.R7$(),n.SpI(" ",null==O?null:O.fullName," "),n.R7$(),n.BMQ("excelRow",R+1)("excelColumn",2)("excelStyle",ft.styleTdNotNumberNormal),n.R7$(),n.SpI(" ",null==O?null:O.phone," "),n.R7$(),n.BMQ("excelRow",R+1)("excelColumn",3)("excelStyle",ft.styleTdNormal),n.R7$(),n.SpI(" ",null==O?null:O.email," "),n.R7$(),n.BMQ("excelRow",R+1)("excelColumn",4)("excelStyle",ft.styleTdNormal),n.R7$(),n.SpI(" ",n.bMT(11,29,null==O?null:O.birthday)," "),n.R7$(2),n.BMQ("excelRow",R+1)("excelColumn",5)("excelStyle",ft.styleTdNormal),n.R7$(),n.SpI(" ",1==(null==O?null:O.gender)?n.bMT(14,31,"lang_student_export_excel_gender_male"):0==(null==O?null:O.gender)?n.bMT(15,33,"lang_student_export_excel_gender_female"):""," "),n.R7$(3),n.Y8G("ngForOf",null!==(C=O.marks)&&void 0!==C?C:n.lJ4(35,Z)),n.R7$(),n.BMQ("excelRow",R+1)("excelColumn",6+(null!==(x=null==O.marks?null:O.marks.length)&&void 0!==x?x:0))("excelStyle",ft.styleTdNotNumberNormal),n.R7$(),n.SpI(" ",O.averageMark," ")}}function ue(j,K){if(1&j&&(n.j41(0,"table",97,1)(2,"thead")(3,"tr")(4,"th",98),n.EFF(5),n.nI1(6,"mytranslate"),n.k0s(),n.j41(7,"th",98),n.EFF(8),n.nI1(9,"mytranslate"),n.k0s(),n.j41(10,"th",98),n.EFF(11),n.nI1(12,"mytranslate"),n.k0s(),n.j41(13,"th",98),n.EFF(14),n.nI1(15,"mytranslate"),n.k0s(),n.j41(16,"th",98),n.EFF(17),n.nI1(18,"mytranslate"),n.k0s(),n.j41(19,"th",98),n.EFF(20),n.nI1(21,"mytranslate"),n.k0s(),n.DNE(22,ce,3,8,"th",99),n.j41(23,"th",98),n.EFF(24),n.nI1(25,"mytranslate"),n.k0s()()(),n.j41(26,"tbody"),n.DNE(27,re,19,36,"tr",71),n.k0s()()),2&j){let C,x,O;const R=n.XpG();n.Y8G("border",1),n.R7$(4),n.BMQ("excelWidth",10)("excelRow",0)("excelColumn",0)("excelStyle",R.styleThNormal),n.R7$(),n.SpI(" ",n.bMT(6,38,"lang_student_export_excel_no")," "),n.R7$(2),n.BMQ("excelWidth",20)("excelRow",0)("excelColumn",1)("excelStyle",R.styleThNormal),n.R7$(),n.SpI(" ",n.bMT(9,40,"lang_student_export_excel_full_name")," "),n.R7$(2),n.BMQ("excelWidth",20)("excelRow",0)("excelColumn",2)("excelStyle",R.styleThNormal),n.R7$(),n.SpI(" ",n.bMT(12,42,"lang_number_phone")," "),n.R7$(2),n.BMQ("excelWidth",20)("excelRow",0)("excelColumn",3)("excelStyle",R.styleThNormal),n.R7$(),n.SpI(" ",n.bMT(15,44,"lang_student_export_excel_email")," "),n.R7$(2),n.BMQ("excelWidth",20)("excelRow",0)("excelColumn",4)("excelStyle",R.styleThNormal),n.R7$(),n.SpI(" ",n.bMT(18,46,"lang_student_export_excel_birthday")," "),n.R7$(2),n.BMQ("excelWidth",20)("excelRow",0)("excelColumn",5)("excelStyle",R.styleThNormal),n.R7$(),n.SpI(" ",n.bMT(21,48,"lang_student_export_excel_gender")," "),n.R7$(2),n.Y8G("ngForOf",null!==(C=null==R.dataMark?null:R.dataMark.list)&&void 0!==C?C:n.lJ4(52,Z)),n.R7$(),n.BMQ("excelWidth",20)("excelRow",0)("excelColumn",6+(null!==(x=null==R.dataMark||null==R.dataMark.list?null:R.dataMark.list.length)&&void 0!==x?x:0))("excelStyle",R.styleThNormal),n.R7$(),n.SpI(" ",n.bMT(25,50,"lang_business_diem_tong_ket")," "),n.R7$(3),n.Y8G("ngForOf",null!==(O=null==R.dataStudent?null:R.dataStudent.list)&&void 0!==O?O:n.lJ4(53,Z))}}let pe=(()=>{var j;class K extends o.H{goToProfile(x,O){this.commonService.myNavigationWithQueryString("/admin/student/profile-student/"+x+"/"+O,"?backto="+encodeURIComponent("ENTER_SCORE"==this.screenType?"/admin/student/submit-score/"+this.classroomId+"/"+this.programId+"/"+this.sessionId:"/admin/student/classroom-details/"+this.classroomId+"/4"))}setPageStudent(x){this.myNavigationWithQueryString("/admin/student/"+("ENTER_SCORE"==this.screenType?"submit-score/"+this.classroomId+"/"+this.programId+"/"+this.sessionId:"classroom-details/"+this.classroomId+"/4"),"?page="+x),this.initStatusObj(),this.pageObj.setPageNumber(x),this.getListStudent()}openDialogTableSingle(x){"ENTER_SCORE"!=this.screenType?this.sAztDialogService.open(m.V,{width:"750px",restoreFocus:!1,data:{student:x,isTeacher:!0}}).afterClosed().subscribe(O=>{O&&this.getListStudent()}):(x.classroomId||x.id)&&this.goToProfile(x.classroomId,x.id)}onSearchBox(x){this.searchContentObj=x,this.setPageStudent(1),this.initStatusObj()}downloadTableScore(){e.L.openLoadingEffect(this.commonService.myTranslateInstant("lang_auto_dang_lay_du_lieu_tu_he_thong")??"");var x=this.exportExcelService.exportHtmlTableToExcelBlob(this.table_answer,!0);let O=this.commonService.createFileNameExportFile(["bang_diem_lop_"+this.classroomObj?.name])+".xlsx";this.shareFileFlutterService.shareFileWithBlob(x,O),e.L.closeLoadingEffect(200)}handlePointByValueInput(x){var O=x.target;let R=""===O.value.trim()?"":O.value;R=R.replace(/[^\d\s,\.]/g,""),R=R.replace(/,/g,"."),R=R.replace(/\s+/g," "),R=R.replace(/\.{2,}/g,"."),R=R.replace(/(?:^|\s)\./g," 0."),R=R.replace(/^\s+/,""),R=R.replace(/\.\s/g," ");var ft=R.split(" ");if(ft.length>0){var Ft=""!=ft[ft.length-1]?ft[ft.length-1]:ft[ft.length-2];Number(Ft)>-1?Ft.split(".").length>1&&Ft.split(".")[1].length>2&&(R=R.substring(0,R.length-1)):R=R.replace(/\.$/," ")}return O.value=R,R.split(" ").filter(Yt=>""!=Yt).map(Yt=>parseFloat(Yt))}handleMarkStudent(x,O,R){var ft=this.handlePointByValueInput(x);ft=0==ft.length?[-1]:ft;var Ft=this.dataStudent.list[O],Gt=this.dataMark.list[R],Bt=this.listStudentMark.findIndex(se=>se.id==Ft.id);if(Bt>-1){var Yt=(this.listStudentMark[Bt].listMarks??[]).findIndex(se=>se.id==Gt.id);Yt>-1?this.listStudentMark[Bt].listMarks[Yt].points=ft:this.listStudentMark[Bt].listMarks?.push({id:Gt.id,points:ft})}else this.listStudentMark.push({id:Ft.id,listMarks:[{id:Gt.id,points:ft}]})}returnValue(x){return(x.marks??[]).join(" ")}saveMark(){this.isSave=!0,this.waitDestroy(this.studentService.apiStudentsMarksPost({programId:this.programId,classroomId:this.classroomId,sessionId:this.sessionId,students:this.listStudentMark}).subscribe({next:O=>{this.getListStudent(),this.successStatusObj("lang_auto_cap_nhat_diem_thanh_cong",!0),this.isSave=!1},error:O=>{this.errorStatusObj(O.error.message,!0),this.isSave=!1}}))}createNewScore(x){this.isStudent||this.sAztDialogService.open(l._,{data:x||{programId:this.programId,classroomId:this.classroomId,sessionId:this.sessionId},restoreFocus:!1,width:"400px"}).afterClosed().subscribe(R=>{R&&this.getListMark()})}getListMark(){this.waitDestroy(this.commonMarkService.apiCommonMarksListPost({page:this.pageMark,size:1e3,programId:this.programId,classroomId:this.classroomId,sessionId:this.sessionId}).subscribe({next:O=>{this.dataMark=O,this.getListStudent()},error:O=>{this.errorStatusObj(O.error.message,!0)}}))}deleteMark(x){var O=this.commonService.myTranslateInstant("lang_auto_ban_co_chac_chan_muon_xoa")+' <div class="text-md font-medium inline"> '+x.name+" </div> ?";this.sAztDialogService.open(t.u,{data:{content:O},restoreFocus:!1,width:"500px"}).afterClosed().subscribe(R=>{R&&this.waitDestroy(this.commonMarkService.apiCommonMarksIdDelete(x.id).subscribe({next:ft=>{this.getListMark()},error:ft=>{this.errorStatusObj(ft.error.message,!0)}}))})}getClassroomObj(){this.waitDestroy(this.classroomService.apiClassroomGetObjGet(this.classroomId).subscribe(x=>{1==x.success&&(this.classroomObj=x.data?.obj)}))}getListStudent(){this.waitDestroy(this.studentService.apiStudentsListPost({page:this.pageObj.page,size:this.pageObj.pageSize,markMonth:this.dataFilter?.monthSelected,markYear:this.dataFilter?.yearSelected,name:this.searchContentObj.searchContent,programId:this.programId,classroomId:this.classroomId,sessionId:this.sessionId,getBook:!1,getMark:!0,getPayment:!1,getAttendance:!1,me:this.isStudent,getAssessment:!1}).subscribe({next:O=>{this.dataStudent=O,this.pageObj.setTotalPages(this.dataStudent?.total??0),this.isStudent?this.handleGroupMarkByDate(O.list):setTimeout(()=>this.scrollElementStudentById(),500),this.stopStatusObj()},error:O=>{this.errorStatusObj(O.error.message,!0)}}))}handleGroupMarkByDate(x){let O=[];x.forEach(ft=>{let Ft=ft.marks?.map(Gt=>({...Gt,monthAndYear:this.sAztTimeService.formatDateToMonthYear(Gt.createdAt)}))??[];O=O.concat(Ft)});let R=this.commonService.arrayToDictionary(O,ft=>ft.monthAndYear);this.listGroupMarkDate=Object.entries(R).map(([ft,Ft])=>({date:ft,marks:Ft,expand:!1}))}scrollElementStudentById(){if(this.studentId){var x=document.getElementById("row_student_"+this.studentId);x&&x.scrollIntoView({behavior:"smooth",block:"start"})}}ngOnInit(){(0,g.z)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.initStatusObj(),this.studentId=this.commonService.getMyQueryParam("studentId"),this.pageObj.setPageNumber(Number(this.commonService.getMyQueryParam("page")??"1"))}),super.ngOnInit(),"ENTER_SCORE"==this.screenType?this.getListMark():this.getListStudent(),this.getClassroomObj()}constructor(x,O,R,ft,Ft,Gt,Bt,Yt){super(),this.commonMarkService=x,this.studentService=O,this.sAztTimeService=R,this.sAztDialogService=ft,this.classroomService=Ft,this.exportExcelService=Gt,this.activeRoute=Bt,this.shareFileFlutterService=Yt,this.screenType="ENTER_SCORE",this.classroomId=0,this.programId=0,this.sessionId=0,this.isStudent=!0,this.styleThNormal='{"alignment":{"vertical":"center","horizontal":"center","wrapText":true},"font":{"bold":true,"color":{"rgb":"ffffffff"}},"fill":{"patternType":"solid","fgColor":{"rgb":"2361ae"}},"border": {"right":{"style": "thin","color":{"rgb":"ffffffff"}},"left":{"style": "thin","color":{"rgb":"ffffffff"}}}}',this.styleTdNormalLeft='{"alignment":{"vertical":"center","horizontal":"left", "wrapText":true},"font":{"bold":false,"color":{"rgb":"000000"}}}',this.styleTdNotNumberNormal='{"alignment":{"vertical":"center","horizontal":"center", "wrapText":true},"font":{"bold":false,"color":{"rgb":"000000"}},"isText":"1"}',this.styleTdNormal='{"alignment":{"vertical":"center","horizontal":"center", "wrapText":true},"font":{"bold":false,"color":{"rgb":"000000"}}}',this.pageMark=1,this.listStudentMark=[],this.listGroupMarkDate=[],this.isSave=!1,this.pageObj=new A.d(50),this.searchContentObj=new at.Z}}return(j=K).\u0275fac=function(x){return new(x||j)(n.rXU(ut.a),n.rXU(kt.b),n.rXU(q.F),n.rXU(tt.i),n.rXU(pt.z),n.rXU(L.x),n.rXU(Q.nX),n.rXU(V.R))},j.\u0275cmp=n.VBU({type:j,selectors:[["app-table-score"]],viewQuery:function(x,O){if(1&x&&n.GBs(It,5),2&x){let R;n.mGM(R=n.lsd())&&(O.table_answer=R.first)}},inputs:{screenType:"screenType",classroomId:"classroomId",programId:"programId",sessionId:"sessionId",isStudent:"isStudent"},features:[n.Vt3],decls:8,vars:6,consts:[["doneLoading",""],["table_score",""],[1,"grid","grid-cols-12","gap-5","mt-5"],["class","col-span-12 md:col-span-6",4,"ngIf"],["class","col-span-12 lg:col-span-12 2xl:col-span-12",4,"ngIf"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],["class","table table-bordered","style","display: none",3,"border",4,"ngIf"],[1,"col-span-12","md:col-span-6"],[1,"text-xl","font-medium"],["class","mt-1 col-span-12",4,"ngIf"],[1,"mt-1","col-span-12"],[1,"col-span-12","lg:col-span-12","2xl:col-span-12"],[1,"flex","flex-col","sm:flex-row"],[1,"w-full","sm:w-auto","mr-auto","mb-3","sm:mb-0"],[3,"onSearch","isServerSearch","placeholder"],[1,"flex","justify-end"],["azt-track-service","enter-score-ULGPeBf6V","class","btn btn-primary flex mr-2",3,"click",4,"ngIf"],["azt-track-service","table-score-n5S54LPUX","class","btn btn-primary flex btn-download-excel",3,"click",4,"ngIf"],[3,"colorBackground",4,"ngIf"],["azt-track-service","enter-score-ULGPeBf6V",1,"btn","btn-primary","flex","mr-2",3,"click"],["name","plus","size","20",3,"ngClass"],["azt-track-service","table-score-n5S54LPUX",1,"btn","btn-primary","flex","btn-download-excel",3,"click"],["name","download","size","20",3,"ngClass"],[3,"colorBackground"],["azt-track-service","enter-score-OlvWZNI2DZ",1,"btn","btn-primary","shadow-md","sm:mt-0","ml-2",3,"click","disabled"],["class","loading-upload mr-1","type","bootstrap-spinner",4,"ngIf"],["type","bootstrap-spinner",1,"loading-upload","mr-1"],[3,"currentStatusObj"],[1,"intro-y","col-span-12","overflow-auto"],["class","mt-10 text-center",4,"ngIf"],["class","block","style","height: 100%",4,"ngIf"],[4,"ngIf"],["class","flex justify-between items-center mt-5",4,"ngIf"],[1,"mt-10","text-center"],[1,"block",2,"height","100%"],["drag-scroll-item","",1,"table","table-report","mt-2",2,"white-space","initial","display","table"],[1,"box"],[1,"whitespace-nowrap",2,"padding-left","25px"],[1,"whitespace-nowrap","text-center"],["class","text-center","style","max-width: 120px !important",4,"ngFor","ngForOf"],["class","text-center whitespace-nowrap",4,"ngIf"],[3,"id",4,"ngFor","ngForOf"],[1,"text-center",2,"max-width","120px !important"],[1,"flex","items-center","justify-center"],[1,"grid","justify-start",2,"max-width","85%"],[1,"truncate","font-medium",3,"matTooltip"],[1,"flex","justify-between",2,"width","max-content"],["class","mt-0.5 text-xs text-slate-500 text-center flex items-center",4,"ngIf"],["azt-track-service","enter-score-YQX6a-qxwK","class","inline-block ml-1",3,"matTooltip","click",4,"ngIf"],["azt-track-service","table-score-8Xr_zTWDT","class","inline-block ml-1",3,"matTooltip","click",4,"ngIf"],[1,"mt-0.5","text-xs","text-slate-500","text-center","flex","items-center"],[1,"inline-block","ml-1"],["azt-track-service","enter-score-YQX6a-qxwK",1,"inline-block","ml-1",3,"click","matTooltip"],["name","pencil","size","16"],["azt-track-service","table-score-8Xr_zTWDT",1,"inline-block","ml-1",3,"click","matTooltip"],["name","trash-2","size","16",3,"ngClass"],[1,"text-center","whitespace-nowrap"],[3,"id"],["azt-track-service","table-score-iwGAjYKV2",1,"!py-3.5","clickable",3,"click"],[3,"name","parentFullName","parentId","parentPhone","phone","avatar","gender","hasUser","schoolName","classrooms","joinedAt","identificationNumber"],[1,"text-center","capitalize"],["class","text-center",3,"hidden",4,"ngFor","ngForOf"],[1,"text-center",3,"hidden"],["class","form-control form-control-sm text-center box-point-homework",4,"ngIf"],["style","color: black !important","type","text","class","form-control form-control-sm text-center",3,"matTooltipDisabled","matTooltip","id","value","placeholder","input",4,"ngIf"],[1,"text-xs","text-danger","mt-1",3,"id","hidden"],[1,"form-control","form-control-sm","text-center","box-point-homework"],[3,"mark"],["type","text",1,"form-control","form-control-sm","text-center",2,"color","black !important",3,"input","matTooltipDisabled","matTooltip","id","value","placeholder"],[1,"flex","justify-center","font-bold"],["class","box p-3 mb-5 flex justify-between",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"box","p-3","mb-5","flex","justify-between"],[3,"name","parentFullName","parentId","parentPhone","phone","email","avatar","gender","hasUser","identificationNumber"],[1,"text-center"],[1,"font-bold"],[1,"flex","mt-2",2,"font-weight","420","font-size","15px"],["azt-track-service","table-score-4mYihdNPO",1,"clickable",2,"align-items","center",3,"click"],["name","chevron-down","size","18",4,"ngIf"],["name","chevron-right","size","18",4,"ngIf"],["name","chevron-down","size","18"],["name","chevron-right","size","18"],["class","box mt-3 mb-1",4,"ngIf"],[1,"box","mt-3","mb-1"],[1,"table","table-report",2,"white-space","initial","display","table"],[1,"whitespace-nowrap"],[1,"whitespace-nowrap","text-center",2,"width","100px"],[1,"flex","items-center"],["class","mt-0.5 text-xs text-slate-500",4,"ngIf"],[1,"text-center","font-bold"],["style","max-width: 100px",4,"ngIf"],[1,"mt-0.5","text-xs","text-slate-500"],[2,"max-width","100px"],[1,"flex","justify-between","items-center","mt-5"],[3,"pageObj","goToPaginationPage",4,"ngIf"],["class","flex justify-end",4,"ngIf"],[3,"goToPaginationPage","pageObj"],[1,"table","table-bordered",2,"display","none",3,"border"],[1,"text-center","azt-excel-cell"],["class","text-center azt-excel-cell",4,"ngFor","ngForOf"],[3,"mark",4,"ngIf"]],template:function(x,O){if(1&x&&(n.j41(0,"div",2),n.DNE(1,it,5,4,"div",3)(2,_t,5,4,"div",3)(3,Y,9,7,"div",4),n.k0s(),n.DNE(4,y,1,1,"azt-loading-effect",5)(5,zt,5,4,"ng-template",null,0,n.C5r)(7,ue,28,54,"table",6)),2&x){const R=n.sdS(6);n.R7$(),n.Y8G("ngIf","ENTER_SCORE"==O.screenType),n.R7$(),n.Y8G("ngIf","TABLE_SCORE"==O.screenType),n.R7$(),n.Y8G("ngIf",!O.isStudent),n.R7$(),n.Y8G("ngIf",O.statusObj.loading)("ngIfElse",R),n.R7$(3),n.Y8G("ngIf","TABLE_SCORE"==O.screenType)}},dependencies:[W.YU,W.Sq,W.bT,X.oV,st.K,J.q,et.D,jt.R,vt.$,Tt.W,rt.B,wt.jd,wt.Ew,Pt.WGl,U.wp,U.Po,U.vv],styles:[".truncate[_ngcontent-%COMP%]{max-width:100%!important}@media (max-width: 639px){.btn-download-excel[_ngcontent-%COMP%]{width:100%!important}}.box-point-homework[_ngcontent-%COMP%]{min-width:120px;background-color:rgb(var(--color-slate-100)/var(--tw-bg-opacity));border:1px solid;border-color:rgb(var(--color-slate-200)/var(--tw-border-opacity));font-weight:700;min-height:34px}"]}),K})()},57350:(Mt,St,r)=>{r.d(St,{s:()=>t});var g=r(59640),o=r(48891),e=r(65162),A=r(19857);let t=(()=>{var at;class l extends g.H{ngOnInit(){super.ngOnInit(),this.classroomId=Number(this.commonService.getMyParam(this.activeRoute,"id"))}constructor(n){super(),this.activeRoute=n,this.classroomId=0}}return(at=l).\u0275fac=function(n){return new(n||at)(o.rXU(e.nX))},at.\u0275cmp=o.VBU({type:at,selectors:[["app-grand-board"]],inputs:{isStudent:"isStudent"},features:[o.Vt3],decls:1,vars:5,consts:[[3,"isStudent","screenType","classroomId","programId","sessionId"]],template:function(n,ut){1&n&&o.nrm(0,"app-table-score",0),2&n&&o.Y8G("isStudent",ut.isStudent)("screenType","TABLE_SCORE")("classroomId",ut.classroomId)("programId",0)("sessionId",0)},dependencies:[A.g],styles:[".table-fix[_ngcontent-%COMP%]{overflow:auto;width:100%;max-height:530px}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{width:165px;--tw-text-opacity: 1;background:rgb(255 255 255/var(--tw-text-opacity))}table[_ngcontent-%COMP%]{table-layout:fixed;width:100%}td[_ngcontent-%COMP%]:first-child, th[_ngcontent-%COMP%]:first-child{position:sticky;left:0;z-index:1}td[_ngcontent-%COMP%]:last-child, th[_ngcontent-%COMP%]:last-child{position:sticky;right:0;z-index:1}thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{position:sticky;top:0}th[_ngcontent-%COMP%]:first-child, th[_ngcontent-%COMP%]:last-child{z-index:2}@media screen and (max-width: 768px){td[_ngcontent-%COMP%]:first-child, th[_ngcontent-%COMP%]:first-child{position:inherit}td[_ngcontent-%COMP%]:last-child, th[_ngcontent-%COMP%]:last-child{position:inherit}thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{position:inherit}}.truncate[_ngcontent-%COMP%]{max-width:100%!important}"]}),l})()},25622:(Mt,St,r)=>{r.d(St,{b:()=>Pt});var g=r(59640),o=r(48891),e=r(95624),A=r(27691),t=r(65162),at=r(36484),l=r(40949),m=r(54460),n=r(18718),ut=r(68323),kt=r(94743),q=r(76975);const tt=U=>({cursor:U}),pt=(U,It,ct)=>({"p-5 bg-primary text-white":U,"p-3":It,"border border-primary p-4 border-w-2":ct}),L=U=>({"text-base":U}),Q=U=>({"text-white":U});function V(U,It){if(1&U&&o.nrm(0,"azt-loading-effect",3),2&U){const ct=o.XpG();o.Y8G("currentStatusObj",ct.statusObj)}}function W(U,It){if(1&U&&(o.j41(0,"div",22),o.EFF(1),o.nI1(2,"mytranslate"),o.k0s()),2&U){const ct=o.XpG(),Z=ct.$implicit;o.Y8G("ngClass",o.eq3(4,Q,0===ct.index)),o.R7$(),o.JRh(Z.averageMark+" "+o.bMT(2,2,"lang_auto_diem"))}}function X(U,It){if(1&U&&(o.j41(0,"div",22),o.EFF(1),o.nI1(2,"mytranslate"),o.k0s()),2&U){const ct=o.XpG();o.Y8G("ngClass",o.eq3(4,Q,0===ct.index&&ct.$implicit.averageMark)),o.R7$(),o.JRh(o.bMT(2,2,"lang_not_data"))}}function st(U,It){1&U&&(o.j41(0,"div",23),o.nrm(1,"azt-svg-icon",24),o.k0s()),2&U&&(o.R7$(),o.Y8G("size",40))}function J(U,It){1&U&&(o.j41(0,"div",25),o.nrm(1,"azt-svg-icon",26),o.k0s()),2&U&&(o.R7$(),o.Y8G("size",40))}function et(U,It){1&U&&(o.j41(0,"div",27),o.nrm(1,"azt-svg-icon",28),o.k0s()),2&U&&(o.R7$(),o.Y8G("size",40))}function jt(U,It){if(1&U&&(o.j41(0,"div",29)(1,"div",30),o.EFF(2),o.nI1(3,"mytranslate"),o.k0s(),o.j41(4,"div",31),o.EFF(5),o.k0s()()),2&U){const ct=o.XpG().index,Z=o.XpG(3);o.R7$(2),o.SpI(" ",o.bMT(3,2,"lang_azt_final_score_ranking")+" "+(ct+1)+"/"+Z.dataStudent.total," "),o.R7$(3),o.JRh(Z.commentByRanking)}}function vt(U,It){if(1&U){const ct=o.RV6();o.qex(0),o.j41(1,"div",8),o.bIt("click",function(){const gt=o.eBV(ct).$implicit,Et=o.XpG(3);return o.Njj(Et.goToProfile(gt.classroomId,gt.id))}),o.j41(2,"div",9)(3,"span",10),o.EFF(4),o.k0s()(),o.j41(5,"div",11)(6,"div",12),o.nrm(7,"azt-create-avatar",13),o.k0s(),o.j41(8,"div",14)(9,"div",15),o.EFF(10),o.k0s(),o.DNE(11,W,3,6,"div",16)(12,X,3,6,"div",16),o.k0s()(),o.j41(13,"div",17),o.DNE(14,st,2,1,"div",18)(15,J,2,1,"div",19)(16,et,2,1,"div",20),o.k0s()(),o.DNE(17,jt,6,4,"div",21),o.bVm()}if(2&U){const ct=It.$implicit,Z=It.index,gt=o.XpG(3);o.R7$(),o.Y8G("ngStyle",o.eq3(15,tt,gt.isStudent?"default":"pointer"))("ngClass",o.sMw(17,pt,0===Z&&ct.averageMark,0!==Z||!ct.averageMark,(2===Z||1===Z)&&ct.averageMark))("hidden",!(!gt.isTqbDomain||!gt.isStudent)&&ct.parentId!=gt.curUserId),o.R7$(3),o.JRh(Z+1),o.R7$(3),o.Y8G("linkAvatar",ct.avatar)("nameCreateAvatar",ct.fullName)("size",0===Z?48:44),o.R7$(2),o.Y8G("ngClass",o.eq3(21,L,0===Z)),o.R7$(),o.JRh(ct.fullName),o.R7$(),o.Y8G("ngIf",ct.averageMark),o.R7$(),o.Y8G("ngIf",!ct.averageMark),o.R7$(2),o.Y8G("ngIf",0===Z&&ct.averageMark),o.R7$(),o.Y8G("ngIf",1===Z&&ct.averageMark),o.R7$(),o.Y8G("ngIf",2===Z&&ct.averageMark),o.R7$(),o.Y8G("ngIf",gt.isTqbDomain&&gt.isStudent&&ct.parentId===gt.curUserId)}}function Tt(U,It){if(1&U&&(o.j41(0,"div",5)(1,"div",6),o.EFF(2),o.nI1(3,"mytranslate"),o.k0s(),o.DNE(4,vt,18,23,"ng-container",7),o.k0s()),2&U){const ct=o.XpG(2);o.R7$(2),o.SpI(" ",o.bMT(3,2,"lang_azt_leaderboard")," "),o.R7$(2),o.Y8G("ngForOf",ct.dataStudent.list)}}function rt(U,It){1&U&&(o.j41(0,"div",32)(1,"div",33),o.nrm(2,"azt-svg-icon",34),o.j41(3,"p",35),o.EFF(4),o.nI1(5,"mytranslate"),o.k0s()()()),2&U&&(o.R7$(2),o.Y8G("size",82),o.R7$(2),o.JRh(o.bMT(5,2,"lang_not_data")+"!"))}function wt(U,It){if(1&U&&o.DNE(0,Tt,5,4,"div",4)(1,rt,6,4,"ng-template",null,1,o.C5r),2&U){const ct=o.sdS(2),Z=o.XpG();o.Y8G("ngIf",Z.dataStudent&&Z.dataStudent.list&&Z.dataStudent.list.length)("ngIfElse",ct)}}let Pt=(()=>{var U;class It extends g.H{goToProfile(Z,gt){this.isStudent||this.commonService.myNavigationWithQueryString("/admin/student/profile-student/"+Z+"/"+gt,"?backto="+encodeURIComponent(`/admin/student/classroom-details/${Z}/5`))}getListStudent(){this.initStatusObj(),this.waitDestroy(this.studentService.apiStudentsListPost({page:1,size:1e3,name:"",programId:0,classroomId:this.classroomId,sessionId:0,getBook:!1,getMark:!0,getPayment:!1,getAttendance:!1,me:!1,getAssessment:!1,order:{fieldName:"averageMark",descending:!0,ignore:!1}}).subscribe({next:gt=>{this.dataStudent=gt;const Et=this.splitIntoGroups(this.dataStudent.list??[]);this.isTqbDomain&&this.loadTextCdn(this.cdnService.addRandomQueryParam(this.linkTopMess)).subscribe(it=>{const dt=this.castJsonToObj(it)??[];dt.length&&Et.forEach((_t,nt)=>{_t.forEach((ot,Ct)=>{ot.parentId===this.curUserId&&0==nt&&(this.commentByRanking=dt[0].mess),ot.parentId===this.curUserId&&1==nt&&(this.commentByRanking=dt[1].mess),ot.parentId===this.curUserId&&2==nt&&(this.commentByRanking=dt[2].mess),ot.parentId===this.curUserId&&3==nt&&(this.commentByRanking=dt[3].mess)})})}),this.stopStatusObj()},error:gt=>{this.errorStatusObj(gt.error.message,!0)}}))}loadTextCdn(Z){return this.http.get(Z,{responseType:"text"})}splitIntoGroups(Z){const Et=Z.length,it=Math.min(4,Et),dt=Math.ceil(Et/it);let _t=[];for(let nt=0;nt<it;nt++)_t.push(Z.slice(nt*dt,(nt+1)*dt));return _t}ngOnInit(){super.ngOnInit(),this.classroomId=Number(this.commonService.getMyParam(this.activeRoute,"id")),this.curUserId=this.sAztUserService.getUserObj().id,this.getListStudent()}constructor(Z,gt,Et,it,dt){super(),this.studentService=Z,this.http=gt,this.activeRoute=Et,this.sAztUserService=it,this.cdnService=dt,this.classroomId=0,this.curUserId=0,this.linkTopMess="https://azota889.github.io/storage_public_v2/topmess.json",this.commentByRanking=""}}return(U=It).\u0275fac=function(Z){return new(Z||U)(o.rXU(e.b0),o.rXU(A.Qq),o.rXU(t.nX),o.rXU(at.R),o.rXU(l.B))},U.\u0275cmp=o.VBU({type:U,selectors:[["app-leader-board"]],inputs:{isStudent:"isStudent"},features:[o.Vt3],decls:3,vars:2,consts:[["doneLoading",""],["emptyData",""],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],["class","p-4 leaderboard rounded-lg",4,"ngIf","ngIfElse"],[1,"p-4","leaderboard","rounded-lg"],[1,"text-xl","text-center","font-medium"],[4,"ngFor","ngForOf"],["azt-track-service","leaderboard-dDzfaXSYR",1,"flex","items-center","box","rounded-25px","mt-4","intro-x","zoom-in","p-3",2,"min-height","92px",3,"click","ngStyle","ngClass","hidden"],[1,"w-5","h-5","rounded-full","border","border-w-2","border-slate-200","dark:border-slate-400","flex","items-center","justify-center"],[1,"text-xs","font-medium"],[1,"mx-3","flex","items-center"],[1,"image-fit","zoom-in"],[3,"linkAvatar","nameCreateAvatar","size"],[1,"ml-4"],[1,"font-medium",3,"ngClass"],["class","text-slate-600 mt-0.5 text-xs font-medium",3,"ngClass",4,"ngIf"],[1,"ml-auto"],["class","icon-top-1",4,"ngIf"],["class","icon-top-2",4,"ngIf"],["class","icon-top-3",4,"ngIf"],["class","mt-4",4,"ngIf"],[1,"text-slate-600","mt-0.5","text-xs","font-medium",3,"ngClass"],[1,"icon-top-1"],["type","crown-gold",3,"size"],[1,"icon-top-2"],["type","crown-silver",3,"size"],[1,"icon-top-3"],["type","crown-copper",3,"size"],[1,"mt-4"],[1,"font-bold","uppercase","text-center"],[1,"text-center",2,"font-style","italic"],[1,"box","p-3","flex","items-center",2,"min-height","216px"],[1,"text-center","mx-auto"],["type","inbox-empty",3,"size"],[1,"font-medium","mt-5"]],template:function(Z,gt){if(1&Z&&o.DNE(0,V,1,1,"azt-loading-effect",2)(1,wt,3,2,"ng-template",null,0,o.C5r),2&Z){const Et=o.sdS(2);o.Y8G("ngIf",gt.statusObj.loading)("ngIfElse",Et)}},dependencies:[m.YU,m.Sq,m.bT,m.B3,n.K,ut.p,kt.m,q.wp],styles:[".leaderboard[_ngcontent-%COMP%]{background:#dae3fe;border-radius:30px}.rounded-25px[_ngcontent-%COMP%]{border-radius:25px}"]}),It})()},95054:(Mt,St,r)=>{r.d(St,{K:()=>se});var g=r(26988),o=r(59640),e=function(f){return f[f.ADD_NEW=0]="ADD_NEW",f[f.UPDATE=1]="UPDATE",f[f.DELETE=2]="DELETE",f}(e||{}),A=r(10936),t=r(48891),at=r(95624),l=r(54460),m=r(47712),n=r(18718),ut=r(52811),kt=r(94743),q=r(15343),tt=r(15766),pt=r(39712),L=r(36484),Q=r(97839),V=r(99965),W=r(63349),X=r(53043),st=r(46899);const J=()=>({"stroke-1.5":!0});function et(f,N){if(1&f){const T=t.RV6();t.j41(0,"div",2)(1,"div",3)(2,"a",4),t.bIt("click",function(){const u=t.eBV(T).$implicit,M=t.XpG();return t.Njj(M.onShowFile(u,-1))}),t.j41(3,"div",5),t.nrm(4,"img",6),t.j41(5,"span",7),t.bIt("click",function(){const u=t.eBV(T).$implicit,M=t.XpG();return t.Njj(M.removeFile(u))}),t.nrm(6,"lucide-icon",8),t.k0s()()()()()}if(2&f){const T=N.$implicit;t.R7$(4),t.Y8G("src",T.url,t.B4B),t.R7$(2),t.Y8G("ngClass",t.lJ4(2,J))}}let jt=(()=>{var f;class N extends o.H{onShowFile(b,u){let M={...b,index:u};this.sAztDialogService.open(X.V,{maxWidth:"100vw",maxHeight:"100vh",height:"100%",width:"100%",data:{fileOption:M},restoreFocus:!1})}removeFile(b){this.files=this.files.filter(u=>u.url!=b.url),this.filesChange.emit(this.files)}constructor(b){super(),this.sAztDialogService=b,this.filesChange=new t.bkB}}return(f=N).\u0275fac=function(b){return new(b||f)(t.rXU(st.i))},f.\u0275cmp=t.VBU({type:f,selectors:[["app-new-list-images"]],inputs:{files:"files"},outputs:{filesChange:"filesChange"},features:[t.Vt3],decls:2,vars:1,consts:[[1,"grid","grid-cols-12","gap-3","mb-3"],["class","col-span-12 md:col-span-6 xl:col-span-4 lg:col-span-2",4,"ngFor","ngForOf"],[1,"col-span-12","md:col-span-6","xl:col-span-4","lg:col-span-2"],[1,"border","flex","border-slate-200/60","dark:border-darkmode-400","rounded-md","p-1","pr-2","pl-2"],["azt-track-service","list-images-jCIgoLK9i",1,"flex","w-full","items-center",3,"click"],[1,"w-full","h-28","image-fit","zoom-in"],[1,"rounded-md",3,"src"],["azt-track-service","list-images-3VlAbiB3VZ",1,"cursor-pointer","absolute","top-0","right-0","-mt-2","-mr-2","flex","h-5","w-5","items-center","justify-center","rounded-full","bg-danger","text-white",3,"click"],["name","x","size","16",3,"ngClass"]],template:function(b,u){1&b&&(t.j41(0,"div",0),t.DNE(1,et,7,3,"div",1),t.k0s()),2&b&&(t.R7$(),t.Y8G("ngForOf",u.files))},dependencies:[l.YU,l.Sq,q.WGl],encapsulation:2}),N})();var vt=r(76975);const Tt=f=>[f],rt=()=>({"zoom-in":!0});function wt(f,N){if(1&f){const T=t.RV6();t.j41(0,"app-new-list-images",13),t.mxI("filesChange",function(u){t.eBV(T);const M=t.XpG();return t.DH7(M.files,u)||(M.files=u),t.Njj(u)}),t.k0s()}if(2&f){const T=t.XpG();t.R50("files",T.files)}}function Pt(f,N){1&f&&t.nrm(0,"azt-loading-ui",14)}let U=(()=>{var f;class N extends o.H{saveNewPost(){if(this.contentFormControl.value.trim()){this.initStatusObj();var b={content:this.contentFormControl.value??"",classroomId:this.classroomId,imageLinks:this.files.map(u=>u.url).filter(this.commonService.notEmpty),isLockComment:this.isLockComment?1:0,isSchool:this.isSchool};this.waitDestroy(this.newsService.apiNewsPost(b).subscribe({next:u=>{this.successStatusObj("lang_business_news_add_new_post_success",!0),this.contentFormControl.setValue(""),this.files=[],this.changePostObjEvent.emit({...u,isShowEditForm:!1,hasLoveEmotion:!1,isShowCommentBox:!1})},error:u=>{this.errorStatusObj(u.error.message,!0)}}))}}handleUploadComplete(b){this.files.push(...b)}ngOnInit(){this.userObj=this.userService.getUserObj()}constructor(b,u){super(),this.newsService=b,this.userService=u,this.changePostObjEvent=new t.bkB,this.contentFormControl=new A.MJ("",{nonNullable:!0,validators:[tt.M.noWhiteSpace]}),this.files=[],this.isLockComment=!1,this.allUploadToCdnMenuTypes=pt.b8,this.allUploadFileTypes=pt.PO}}return(f=N).\u0275fac=function(b){return new(b||f)(t.rXU(at.bH),t.rXU(L.R))},f.\u0275cmp=t.VBU({type:f,selectors:[["app-news-add-new-post"]],inputs:{classroomId:"classroomId",isSchool:"isSchool"},outputs:{changePostObjEvent:"changePostObjEvent"},features:[t.Vt3],decls:19,vars:23,consts:[[1,"box"],[1,"relative","w-full","pt-3","pr-3","pl-3"],["matInput","","autoResize","","row","5",3,"formControl","placeholder"],["class","pt-3",3,"files","filesChange",4,"ngIf"],[1,"text-right","box-button"],[1,"w-full","flex","sm:justify-between","justify-end","items-center"],[1,"btn","btn-outline-secondary","btn-sm","mr-2","p-0","border-0",3,"click","matTooltip"],["size","24",3,"name"],[3,"uploadComplete","uploadToCdnMenu","fileType"],["azt-track-service","add-new-post-YUr68bfqj5",1,"mr-2","text-success","inline-block","clickable","flex","items-center",2,"vertical-align","middle"],["name","image",2,"width","24px!important","height","24px!important","vertical-align","middle","color","limegreen",3,"matTooltip","ngClass"],["azt-track-service","add-new-post-D1kcZnYwie","type","button",1,"btn","btn-primary","btn-sm","w-24",3,"click","disabled"],["class","mr-1",4,"ngIf"],[1,"pt-3",3,"filesChange","files"],[1,"mr-1"]],template:function(b,u){1&b&&(t.j41(0,"div",0)(1,"div",1)(2,"textarea",2),t.nI1(3,"mytranslate"),t.EFF(4,"        "),t.k0s(),t.DNE(5,wt,1,1,"app-new-list-images",3),t.k0s(),t.j41(6,"div",4)(7,"div",5)(8,"button",6),t.nI1(9,"mytranslate"),t.bIt("click",function(){return u.isLockComment=!u.isLockComment}),t.nrm(10,"lucide-icon",7),t.k0s(),t.j41(11,"azt-upload-multiple-box",8),t.bIt("uploadComplete",function($t){return u.handleUploadComplete($t)}),t.j41(12,"span",9),t.nrm(13,"lucide-icon",10),t.nI1(14,"mytranslate"),t.k0s()(),t.j41(15,"button",11),t.bIt("click",function(){return u.saveNewPost()}),t.DNE(16,Pt,1,0,"azt-loading-ui",12),t.EFF(17),t.nI1(18,"mytranslate"),t.k0s()()()()),2&b&&(t.R7$(2),t.FS9("placeholder",t.bMT(3,12,"lang_business_news_post_content")),t.Y8G("formControl",u.contentFormControl),t.R7$(3),t.Y8G("ngIf",u.files.length),t.R7$(3),t.FS9("matTooltip",t.bMT(9,14,u.isLockComment?"lang_student_comment_lock":"lang_student_unlock_comments")),t.R7$(2),t.Y8G("name",u.isLockComment?"lock":"lock-open"),t.R7$(),t.Y8G("uploadToCdnMenu",u.allUploadToCdnMenuTypes.BUSINESS_NEWS)("fileType",t.eq3(20,Tt,u.allUploadFileTypes.IMAGE)),t.R7$(2),t.FS9("matTooltip",t.bMT(14,16,"lang_core_tai_anh")),t.Y8G("ngClass",t.lJ4(22,rt)),t.R7$(2),t.Y8G("disabled",""==u.contentFormControl.value||u.statusObj.loading),t.R7$(),t.Y8G("ngIf",u.statusObj.loading),t.R7$(),t.SpI(" ",t.bMT(18,18,"lang_business_news_add_new_post_button")," "))},dependencies:[l.YU,l.bT,Q.fg,m.oV,A.me,A.BC,A.l_,V.j,ut.R,W.V,q.WGl,jt,vt.wp],styles:["textarea[_ngcontent-%COMP%]:focus{outline:none;border:none}textarea[_ngcontent-%COMP%]{resize:none;min-height:25px;font-size:14px;width:100%;border:none;padding:0;height:25px}.box-button[_ngcontent-%COMP%]{padding:5px 10px;border-bottom-left-radius:5px;border-bottom-right-radius:5px}"]}),N})();var It=r(89163),ct=r(33887),Z=r(2915);function gt(f,N){1&f&&t.nrm(0,"azt-loading-ui",9)}let Et=(()=>{var f;class N extends ct._{btnCloseDialog(b){this.dialogRef.close(b)}confirmDelete(){this.initStatusObj(),this.waitDestroy(this.newsService.apiNewsIdDelete(this.postObj.id).subscribe({next:b=>{this.btnCloseDialog(!0),this.successStatusObj(),this.showSuccessSnack("lang_cms_delete_success")},error:b=>{this.errorStatusObj(b.error.message,!0)}}))}constructor(b,u,M){super(M,u),this.newsService=b,this.dialogRef=u,this.data=M,this.postObj=M}}return(f=N).\u0275fac=function(b){return new(b||f)(t.rXU(at.bH),t.rXU(It.CP,8),t.rXU(It.Vh,8))},f.\u0275cmp=t.VBU({type:f,selectors:[["app-delete-news-post-confirm-dialog"]],features:[t.Vt3],decls:18,vars:11,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-3"],[1,"text-base","font-medium","mr-auto"],[1,"text-danger"],[1,"p-3","flex","justify-end"],["azt-track-service","delete_student-1XDt7rqJlo",1,"btn","w-24","btn-secondary","mr-3",3,"click"],["azt-track-service","delete_student-f7KFuC0__A",1,"btn","w-32","btn-primary",3,"click"],["class","mr-1",4,"ngIf"],[1,"mr-1"]],template:function(b,u){1&b&&(t.j41(0,"div",0)(1,"div",1)(2,"azt-mat-dialog-content")(3,"div",2)(4,"p",3),t.EFF(5),t.nI1(6,"mytranslate"),t.j41(7,"b",4),t.EFF(8),t.k0s(),t.EFF(9,"? "),t.k0s()()()(),t.j41(10,"div",5)(11,"button",6),t.bIt("click",function(){return u.btnCloseDialog(!1)}),t.EFF(12),t.nI1(13,"mytranslate"),t.k0s(),t.j41(14,"button",7),t.bIt("click",function(){return u.confirmDelete()}),t.DNE(15,gt,1,0,"azt-loading-ui",8),t.EFF(16),t.nI1(17,"mytranslate"),t.k0s()()()),2&b&&(t.R7$(5),t.SpI(" ",t.bMT(6,5,"lang_business_news_are_your_sure_to_delete_news_post"),"\xa0 "),t.R7$(3),t.JRh(u.postObj.content),t.R7$(4),t.SpI(" ",t.bMT(13,7,"lang_cms_common_close_btn")," "),t.R7$(3),t.Y8G("ngIf",u.statusObj.loading),t.R7$(),t.SpI(" ",t.bMT(17,9,"lang_cms_common_confirm_btn")," "))},dependencies:[l.bT,Z.U,ut.R,vt.wp],encapsulation:2}),N})();var it=r(17818),dt=r(68323),_t=r(49221),nt=function(f){return f[f.ADD_NEW=0]="ADD_NEW",f[f.UPDATE=1]="UPDATE",f[f.DELETE=2]="DELETE",f}(nt||{}),ot=r(95670),Ct=r(43558);const Dt=()=>({"text-primary flex-none zoom-in":!0});function Y(f,N){1&f&&t.nrm(0,"azt-loading-ui",9)}let y=(()=>{var f;class N extends o.H{saveNewComment(){this.commentContentFormControl.value.trim()&&(this.initStatusObj(),this.waitDestroy(this.newsService.apiNewsNewsIdCommentsPost(this.postObj.id,{content:this.commentContentFormControl.value}).subscribe({next:u=>{this.successStatusObj(),this.commentContentFormControl.setValue(""),this.changeCommentObjEvent.emit({...u,isShowEditForm:!1,allowDelete:!0,allowEdit:!0})},error:u=>{this.errorStatusObj(u.error.message,!0)}})))}ngOnInit(){this.userObj=this.userService.getUserObj()}constructor(b,u){super(),this.newsService=b,this.userService=u,this.changeCommentObjEvent=new t.bkB,this.commentContentFormControl=new A.MJ("",{nonNullable:!0,validators:[tt.M.noWhiteSpace]})}}return(f=N).\u0275fac=function(b){return new(b||f)(t.rXU(at.bH),t.rXU(L.R))},f.\u0275cmp=t.VBU({type:f,selectors:[["app-news-add-new-comments"]],inputs:{postObj:"postObj"},outputs:{changeCommentObjEvent:"changeCommentObjEvent"},features:[t.Vt3],decls:12,vars:15,consts:[[1,"flex"],[3,"nameCreateAvatar","linkAvatar","size"],[1,"border","border-slate-200","dark:border-darkmode-400","relative","w-full","ml-3",2,"border-radius","5px"],[1,"w-full","border-none",2,"min-height","70px"],["matInput","","autoResize","",2,"resize","auto","height","30px",3,"enterKey","enableInMobile","formControl","placeholder"],[1,"text-right","p-1","absolute",2,"bottom","5px","right","5px"],["azt-track-service","add-new-comment-tIKt3rAhD",1,"btn","btn-secondary","btn-sm","zoom-in",3,"click","matTooltip","disabled"],["class","mr-1",4,"ngIf"],["name","send","size","18",3,"ngClass"],[1,"mr-1"]],template:function(b,u){1&b&&(t.j41(0,"div",0),t.nrm(1,"azt-create-avatar",1),t.j41(2,"div",2)(3,"mat-form-field",3)(4,"textarea",4),t.nI1(5,"mytranslate"),t.bIt("enterKey",function(){return!(""==u.commentContentFormControl.value||u.statusObj.loading)&&u.saveNewComment()}),t.EFF(6,"            "),t.k0s()(),t.j41(7,"div",5)(8,"button",6),t.nI1(9,"mytranslate"),t.bIt("click",function(){return u.saveNewComment()}),t.DNE(10,Y,1,0,"azt-loading-ui",7),t.nrm(11,"lucide-icon",8),t.k0s()()()()),2&b&&(t.R7$(),t.Y8G("nameCreateAvatar",u.userObj.fullName)("linkAvatar",u.userObj.avatar)("size",30),t.R7$(3),t.FS9("placeholder",t.bMT(5,10,"lang_core_viet_binh_luan")),t.Y8G("enableInMobile",!1)("formControl",u.commentContentFormControl),t.R7$(4),t.FS9("matTooltip",t.bMT(9,12,"lang_business_news_add_new_post_button")),t.Y8G("disabled",""==u.commentContentFormControl.value||u.statusObj.loading),t.R7$(2),t.Y8G("ngIf",u.statusObj.loading),t.R7$(),t.Y8G("ngClass",t.lJ4(14,Dt)))},dependencies:[l.YU,l.bT,Q.fg,ot.rl,m.oV,A.me,A.BC,A.l_,dt.p,V.j,Ct.Z,ut.R,q.WGl,vt.wp],encapsulation:2}),N})();function $(f,N){1&f&&t.nrm(0,"azt-loading-ui",9)}let S=(()=>{var f;class N extends ct._{btnCloseDialog(b){this.dialogRef.close(b)}confirmDelete(){this.initStatusObj(),this.waitDestroy(this.newsService.apiNewsNewsIdCommentsCommentIdDelete(this.postObj.id,this.commentObj.id).subscribe({next:b=>{this.btnCloseDialog(!0),this.successStatusObj(),this.showSuccessSnack("lang_cms_delete_success")},error:b=>{this.errorStatusObj(b.error.message,!0)}}))}constructor(b,u,M){super(M,u),this.newsService=b,this.dialogRef=u,this.data=M,this.postObj=M.postObj,this.commentObj=M.commentObj}}return(f=N).\u0275fac=function(b){return new(b||f)(t.rXU(at.bH),t.rXU(It.CP,8),t.rXU(It.Vh,8))},f.\u0275cmp=t.VBU({type:f,selectors:[["app-delete-news-post-comment-confirm-dialog"]],features:[t.Vt3],decls:18,vars:11,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-3"],[1,"text-base","font-medium","mr-auto"],[1,"text-danger"],[1,"p-3","flex","justify-end"],["azt-track-service","delete_student-1XDt7rqJlo",1,"btn","w-24","btn-secondary","mr-3",3,"click"],["azt-track-service","delete_student-f7KFuC0__A",1,"btn","w-32","btn-primary",3,"click"],["class","mr-1",4,"ngIf"],[1,"mr-1"]],template:function(b,u){1&b&&(t.j41(0,"div",0)(1,"div",1)(2,"azt-mat-dialog-content")(3,"div",2)(4,"p",3),t.EFF(5),t.nI1(6,"mytranslate"),t.j41(7,"b",4),t.EFF(8),t.k0s(),t.EFF(9,"? "),t.k0s()()()(),t.j41(10,"div",5)(11,"button",6),t.bIt("click",function(){return u.btnCloseDialog(!1)}),t.EFF(12),t.nI1(13,"mytranslate"),t.k0s(),t.j41(14,"button",7),t.bIt("click",function(){return u.confirmDelete()}),t.DNE(15,$,1,0,"azt-loading-ui",8),t.EFF(16),t.nI1(17,"mytranslate"),t.k0s()()()),2&b&&(t.R7$(5),t.SpI(" ",t.bMT(6,5,"lang_business_news_are_your_sure_to_delete_news_post_comment"),"\xa0 "),t.R7$(3),t.JRh(u.commentObj.content),t.R7$(4),t.SpI(" ",t.bMT(13,7,"lang_cms_common_close_btn")," "),t.R7$(3),t.Y8G("ngIf",u.statusObj.loading),t.R7$(),t.SpI(" ",t.bMT(17,9,"lang_cms_common_confirm_btn")," "))},dependencies:[l.bT,Z.U,ut.R,vt.wp],encapsulation:2}),N})();const z=()=>({"text-slate-500":!0}),lt=()=>({"mr-2":!0}),Ot=()=>({"mr-2 text-danger":!0});function Lt(f,N){if(1&f&&(t.j41(0,"button",15),t.nrm(1,"lucide-icon",16),t.k0s()),2&f){t.XpG();const T=t.sdS(12);t.Y8G("matMenuTriggerFor",T),t.R7$(),t.Y8G("ngClass",t.lJ4(2,z))}}function Vt(f,N){if(1&f){const T=t.RV6();t.j41(0,"li")(1,"a",17),t.bIt("click",function(){t.eBV(T);const u=t.XpG();return t.Njj(u.editCommentEvent())}),t.nrm(2,"lucide-icon",18),t.EFF(3),t.nI1(4,"mytranslate"),t.k0s()()}2&f&&(t.R7$(2),t.Y8G("ngClass",t.lJ4(4,lt)),t.R7$(),t.SpI(" ",t.bMT(4,2,"lang_auto_sua")," "))}function Ht(f,N){if(1&f){const T=t.RV6();t.j41(0,"li")(1,"a",19),t.bIt("click",function(){t.eBV(T);const u=t.XpG();return t.Njj(u.deleteCommentEvent())}),t.nrm(2,"lucide-icon",20),t.EFF(3),t.nI1(4,"mytranslate"),t.k0s()()}2&f&&(t.R7$(2),t.Y8G("ngClass",t.lJ4(4,Ot)),t.R7$(),t.SpI(" ",t.bMT(4,2,"lang_auto_xoa")," "))}let Xt=(()=>{var f;class N extends o.H{editCommentEvent(){this.commentObj.isShowEditForm=!0,this.changeCommentObjEvent.emit({actionType:nt.UPDATE,commentObj:this.commentObj})}deleteCommentEvent(){this.sAztDialogService.open(S,{width:"700px",data:{postObj:this.postObj,commentObj:this.commentObj},restoreFocus:!1}).afterClosed().subscribe(u=>{u&&this.changeCommentObjEvent.emit({actionType:nt.DELETE,commentObj:this.commentObj})})}constructor(b){super(),this.sAztDialogService=b,this.changeCommentObjEvent=new t.bkB}}return(f=N).\u0275fac=function(b){return new(b||f)(t.rXU(st.i))},f.\u0275cmp=t.VBU({type:f,selectors:[["app-news-view-comment"]],inputs:{postObj:"postObj",commentObj:"commentObj"},outputs:{changeCommentObjEvent:"changeCommentObjEvent"},features:[t.Jv_([g.h]),t.Vt3],decls:20,vars:13,consts:[["menuBox",""],[1,"flex","mb-3","comment-body"],[1,"image-fit","mt-2"],[3,"nameCreateAvatar","linkAvatar","size"],[1,"flex","items-center","justify-start"],[1,"box-content","px-3","py-2","ml-3"],[1,"font-medium","whitespace-nowrap"],[3,"content","maxLine","backgroundColor"],[1,"btn-show","ml-1"],["class","clickable p-1 hover:bg-slate-100 dark:hover:bg-darkmode-400","style","border-radius: 50%","data-tw-toggle","dropdown",3,"matMenuTriggerFor",4,"ngIf"],["xPosition","after"],[1,"dropdown-menu","show","relative","w-28"],[1,"dropdown-content"],[4,"ngIf"],[1,"text-slate-500","text-xs","whitespace-nowrap","mt-0.5","ml-3"],["data-tw-toggle","dropdown",1,"clickable","p-1","hover:bg-slate-100","dark:hover:bg-darkmode-400",2,"border-radius","50%",3,"matMenuTriggerFor"],["name","ellipsis","size","20",3,"ngClass"],["azt-track-service","comments-post-dialog-a0fkWfZtZk",1,"dropdown-item",3,"click"],["name","square-pen","size","16",3,"ngClass"],["azt-track-service","comments-post-dialog-_pPBuSnF37",1,"dropdown-item","text-danger",3,"click"],["name","trash-2","size","16",3,"ngClass"]],template:function(b,u){1&b&&(t.j41(0,"div",1)(1,"div",2),t.nrm(2,"azt-create-avatar",3),t.k0s(),t.j41(3,"div")(4,"div",4)(5,"div",5)(6,"div",6),t.EFF(7),t.k0s(),t.nrm(8,"azt-see-more-multiple-lines",7),t.k0s(),t.j41(9,"div",8),t.DNE(10,Lt,2,3,"button",9),t.j41(11,"mat-menu",10,0)(13,"div",11)(14,"ul",12),t.DNE(15,Vt,5,5,"li",13)(16,Ht,5,5,"li",13),t.k0s()()()()(),t.j41(17,"div",14),t.EFF(18),t.nI1(19,"relativeTime"),t.k0s()()()),2&b&&(t.R7$(2),t.Y8G("nameCreateAvatar",null==u.commentObj.user?null:u.commentObj.user.fullName)("linkAvatar",null==u.commentObj.user?null:u.commentObj.user.avatar)("size",30),t.R7$(5),t.SpI(" ",null==u.commentObj.user?null:u.commentObj.user.fullName,"\xa0 "),t.R7$(),t.Y8G("content",u.commentObj.content)("maxLine",5)("backgroundColor","#f5f5f5"),t.R7$(2),t.Y8G("ngIf",u.commentObj.allowDelete||u.commentObj.allowEdit),t.R7$(5),t.Y8G("ngIf",u.commentObj.allowEdit),t.R7$(),t.Y8G("ngIf",u.commentObj.allowDelete),t.R7$(2),t.JRh(t.bMT(19,11,u.commentObj.createdAt)))},dependencies:[l.YU,l.bT,it.kk,it.Cp,dt.p,_t.R,q.WGl,vt.wp,vt.NA],styles:[".btn-show[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:transparent}.comment-body[_ngcontent-%COMP%]:hover   .btn-show[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:rgb(var(--color-slate-500)/var(--tw-text-opacity))}.box-content[_ngcontent-%COMP%]{border-radius:5px;background-color:#f5f5f5}"]}),N})();const Qt=()=>({"text-primary":!0});function qt(f,N){1&f&&t.nrm(0,"azt-loading-ui",11)}let te=(()=>{var f;class N extends o.H{cancel(){this.commentObj.isShowEditForm=!1,this.changeCommentObjEvent.emit(this.commentObj)}saveNewComment(){if(this.commentContentFormControl.value.trim()){this.initStatusObj();var b={content:this.commentContentFormControl.value};this.waitDestroy(this.newsService.apiNewsNewsIdCommentsCommentIdPut(this.postObj.id,this.commentObj.id,b).subscribe({next:u=>{this.successStatusObj(),this.commentObj.isShowEditForm=!1,this.commentObj.content=b.content,this.changeCommentObjEvent.emit(this.commentObj),this.commentContentFormControl.setValue("")},error:u=>{this.errorStatusObj(u.error.message,!0)}}))}}ngOnInit(){this.userObj=this.userService.getUserObj(),this.commentContentFormControl.setValue(this.commentObj.content)}constructor(b,u){super(),this.newsService=b,this.userService=u,this.changeCommentObjEvent=new t.bkB,this.commentContentFormControl=new A.MJ("",{nonNullable:!0,validators:[tt.M.noWhiteSpace]})}}return(f=N).\u0275fac=function(b){return new(b||f)(t.rXU(at.bH),t.rXU(L.R))},f.\u0275cmp=t.VBU({type:f,selectors:[["app-news-edit-comment"]],inputs:{postObj:"postObj",commentObj:"commentObj"},outputs:{changeCommentObjEvent:"changeCommentObjEvent"},features:[t.Vt3],decls:16,vars:18,consts:[[1,"flex"],[3,"nameCreateAvatar","linkAvatar","size"],[1,"border","border-slate-200","dark:border-darkmode-400","relative","w-full","ml-3",2,"border-radius","5px"],[1,"w-full","border-none",2,"min-height","70px"],["matInput","","autoResize","","row","5",2,"resize","none","height","30px",3,"enterKey","enableInMobile","formControl","placeholder"],[1,"flex","justify-end","p-1","absolute",2,"bottom","5px","right","5px"],[1,"flex","items-center","justify-center"],["azt-track-service","edit-comment-725iQWOtdo","type","button",1,"btn","btn-secondary","btn-sm","w-22","mr-2",3,"click"],["azt-track-service","edit-comment-FFY36YTq2a",1,"btn","btn-outline-secondary","btn-sm",3,"click","matTooltip","disabled"],["class","mr-1",4,"ngIf"],["name","send","size","18",3,"ngClass"],[1,"mr-1"]],template:function(b,u){1&b&&(t.j41(0,"div",0),t.nrm(1,"azt-create-avatar",1),t.j41(2,"div",2)(3,"mat-form-field",3)(4,"textarea",4),t.nI1(5,"mytranslate"),t.bIt("enterKey",function(){return!(""==u.commentContentFormControl.value||u.statusObj.loading)&&u.saveNewComment()}),t.EFF(6,"            "),t.k0s()(),t.j41(7,"div",5)(8,"div",6)(9,"button",7),t.bIt("click",function(){return u.cancel()}),t.EFF(10),t.nI1(11,"mytranslate"),t.k0s(),t.j41(12,"button",8),t.nI1(13,"mytranslate"),t.bIt("click",function(){return u.saveNewComment()}),t.DNE(14,qt,1,0,"azt-loading-ui",9),t.nrm(15,"lucide-icon",10),t.k0s()()()()()),2&b&&(t.R7$(),t.Y8G("nameCreateAvatar",u.userObj.fullName)("linkAvatar",u.userObj.avatar)("size",30),t.R7$(3),t.FS9("placeholder",t.bMT(5,11,"lang_core_viet_binh_luan")),t.Y8G("enableInMobile",!1)("formControl",u.commentContentFormControl),t.R7$(6),t.SpI(" ",t.bMT(11,13,"lang_cms_common_close_btn")," "),t.R7$(2),t.FS9("matTooltip",t.bMT(13,15,"lang_business_news_add_new_post_button")),t.Y8G("disabled",""==u.commentContentFormControl.value||u.statusObj.loading),t.R7$(2),t.Y8G("ngIf",u.statusObj.loading),t.R7$(),t.Y8G("ngClass",t.lJ4(17,Qt)))},dependencies:[l.YU,l.bT,Q.fg,ot.rl,m.oV,A.me,A.BC,A.l_,dt.p,V.j,Ct.Z,ut.R,q.WGl,vt.wp],encapsulation:2}),N})();function ee(f,N){if(1&f){const T=t.RV6();t.qex(0),t.j41(1,"app-news-view-comment",6),t.bIt("changeCommentObjEvent",function(u){t.eBV(T);const M=t.XpG(2);return t.Njj(M.changeCommentObj(u.actionType,u.commentObj))}),t.k0s(),t.bVm()}if(2&f){const T=t.XpG().$implicit,b=t.XpG();t.R7$(),t.Y8G("postObj",b.postObj)("commentObj",T)}}function ne(f,N){if(1&f){const T=t.RV6();t.j41(0,"div",3)(1,"app-news-edit-comment",6),t.bIt("changeCommentObjEvent",function(u){t.eBV(T);const M=t.XpG(2);return t.Njj(M.changeCommentObj(M.enumNewsCommentActionType.UPDATE,u))}),t.k0s()()}if(2&f){const T=t.XpG().$implicit,b=t.XpG();t.R7$(),t.Y8G("postObj",b.postObj)("commentObj",T)}}function oe(f,N){if(1&f&&(t.j41(0,"div"),t.DNE(1,ee,2,2,"ng-container",5)(2,ne,2,2,"ng-template",null,0,t.C5r),t.k0s()),2&f){const T=N.$implicit,b=t.sdS(3);t.R7$(),t.Y8G("ngIf",!T.isShowEditForm)("ngIfElse",b)}}function ie(f,N){1&f&&t.nrm(0,"azt-loading-ui",10)}function ae(f,N){if(1&f){const T=t.RV6();t.j41(0,"div",7)(1,"button",8),t.bIt("click",function(){t.eBV(T);const u=t.XpG();return t.Njj(!u.sAztNextPaginationService.isLoadingNextPage&&u.getNextPage())}),t.EFF(2),t.nI1(3,"mytranslate"),t.DNE(4,ie,1,0,"azt-loading-ui",9),t.k0s()()}if(2&f){const T=t.XpG();t.R7$(2),t.SpI(" ",t.bMT(3,2,"lang_business_news_load_more_comments")," "),t.R7$(2),t.Y8G("ngIf",T.sAztNextPaginationService.isLoadingNextPage)}}let F=(()=>{var f;class N extends o.H{changeCommentObj(b,u){b==nt.ADD_NEW?(this.commentObjs.unshift(u),this.postObj.totalComment+=1):b==nt.UPDATE?this.commentObjs=this.commentObjs.map(M=>M.id==u.id?u:M):(this.postObj.totalComment-=1,this.commentObjs=this.commentObjs.filter(M=>M.id!=u.id))}getNextPage(){this.sAztNextPaginationService.setNextPage(),this.getData(!0)}getData(b){b?this.sAztNextPaginationService.setLoading(!0):this.initStatusObj(),this.waitDestroy(this.newsService.apiNewsNewsIdCommentsGet(this.postObj.id,this.sAztNextPaginationService.curPage,this.sAztNextPaginationService.itemPerPage).subscribe({next:u=>{u.list.forEach(M=>{this.commentObjs.push({...M,isShowEditForm:!1,allowEdit:M.tenantId==this.userObj.id,allowDelete:!this.isStudent||M.tenantId==this.userObj.id})}),this.sAztNextPaginationService.setLoading(!1),this.sAztNextPaginationService.setTotalRecord(u.total),this.stopStatusObj()},error:u=>{this.errorStatusObj(u.error.message,!0)}}))}ngOnInit(){this.sAztNextPaginationService.setTotalItemPerPage(10),this.getData(!1)}constructor(b,u,M){super(),this.newsService=b,this.userService=u,this.sAztNextPaginationService=M,this.commentObjs=[],this.enumNewsCommentActionType=nt,this.userObj=this.userService.getUserObj()}}return(f=N).\u0275fac=function(b){return new(b||f)(t.rXU(at.bH),t.rXU(L.R),t.rXU(g.h))},f.\u0275cmp=t.VBU({type:f,selectors:[["app-news-list-comments"]],inputs:{isStudent:"isStudent",postObj:"postObj"},features:[t.Jv_([g.h]),t.Vt3],decls:4,vars:3,consts:[["showEditForm",""],[4,"ngFor","ngForOf"],["class","mb-2 font-medium",4,"ngIf"],[1,"pb-2"],[3,"changeCommentObjEvent","postObj"],[4,"ngIf","ngIfElse"],[3,"changeCommentObjEvent","postObj","commentObj"],[1,"mb-2","font-medium"],["azt-track-service","comments-92wgKv717",1,"clickable",3,"click"],["class","ml-1",4,"ngIf"],[1,"ml-1"]],template:function(b,u){1&b&&(t.DNE(0,oe,4,2,"div",1)(1,ae,5,4,"div",2),t.j41(2,"div",3)(3,"app-news-add-new-comments",4),t.bIt("changeCommentObjEvent",function($t){return u.changeCommentObj(u.enumNewsCommentActionType.ADD_NEW,$t)}),t.k0s()()),2&b&&(t.Y8G("ngForOf",u.commentObjs),t.R7$(),t.Y8G("ngIf",u.commentObjs.length&&u.sAztNextPaginationService.hasNextPage),t.R7$(2),t.Y8G("postObj",u.postObj))},dependencies:[l.Sq,l.bT,ut.R,y,Xt,te,vt.wp],encapsulation:2}),N})();const mt=f=>({clickable:f}),P=(f,N)=>({"heart-selected":f,"heart-non-selected":N});function w(f,N){1&f&&(t.j41(0,"div",2)(1,"span",3),t.nrm(2,"lucide-icon",4),t.k0s(),t.j41(3,"span"),t.EFF(4),t.nI1(5,"mytranslate"),t.k0s()()),2&f&&(t.R7$(4),t.JRh(t.bMT(5,1,"lang_student_comment_feature_disabled")))}function D(f,N){if(1&f){const T=t.RV6();t.j41(0,"div",5)(1,"div",6),t.nI1(2,"isParentViewOnly"),t.j41(3,"button",7),t.nI1(4,"isParentViewOnly"),t.bIt("click",function(){t.eBV(T);const u=t.XpG();return t.Njj(u.changeEmotionEvent())}),t.nrm(5,"lucide-icon",8),t.k0s(),t.j41(6,"span"),t.EFF(7),t.k0s()(),t.j41(8,"div",9),t.nI1(9,"isParentViewOnly"),t.j41(10,"button",10),t.nI1(11,"isParentViewOnly"),t.bIt("click",function(){t.eBV(T);const u=t.XpG();return t.Njj(u.showCommentObjs())}),t.nrm(12,"lucide-icon",11),t.k0s(),t.j41(13,"span"),t.EFF(14),t.k0s()()()}if(2&f){const T=t.XpG();t.R7$(),t.Y8G("ngClass",t.eq3(15,mt,!t.bMT(2,7,""))),t.R7$(2),t.Y8G("disabled",t.bMT(4,9,"")),t.R7$(2),t.Y8G("ngClass",t.l_i(17,P,T.postObj.hasLoveEmotion,!T.postObj.hasLoveEmotion)),t.R7$(2),t.JRh(T.postObj.totalEmotion),t.R7$(),t.Y8G("ngClass",t.eq3(20,mt,!t.bMT(9,11,""))),t.R7$(2),t.Y8G("disabled",t.bMT(11,13,"")),t.R7$(4),t.JRh(T.postObj.totalComment)}}let ht=(()=>{var f;class N extends o.H{changeEmotionEvent(){this.postObj.hasLoveEmotion=!this.postObj.hasLoveEmotion,this.postObj.totalEmotion+=this.postObj.hasLoveEmotion?1:-1,this.changePostObjEvent.emit(this.postObj),this.waitDestroy(this.newsService.apiNewsNewsIdEmotionsPost(this.postObj.id).subscribe({next:b=>{this.successStatusObj()},error:b=>{this.errorStatusObj(b.error.message,!0),this.postObj.hasLoveEmotion=!this.postObj.hasLoveEmotion,this.postObj.totalEmotion-=this.postObj.hasLoveEmotion?1:-1,this.changePostObjEvent.emit(this.postObj)}}))}showCommentObjs(){this.postObj.isShowCommentBox=!0,this.changePostObjEvent.emit(this.postObj)}constructor(b){super(),this.newsService=b,this.changePostObjEvent=new t.bkB}}return(f=N).\u0275fac=function(b){return new(b||f)(t.rXU(at.bH))},f.\u0275cmp=t.VBU({type:f,selectors:[["app-news-emotions"]],inputs:{postObj:"postObj"},outputs:{changePostObjEvent:"changePostObjEvent"},features:[t.Vt3],decls:2,vars:2,consts:[["class","flex items-center justify-center pb-3 text-slate-500",4,"ngIf"],["class","flex pb-3","style","align-items: center",4,"ngIf"],[1,"flex","items-center","justify-center","pb-3","text-slate-500"],[1,"inline-block","mr-2"],["name","message-circle-off","size","18"],[1,"flex","pb-3",2,"align-items","center"],[1,"flex","mr-5",2,"align-items","center",3,"ngClass"],["azt-track-service","emotions-02_zwrttZ",1,"mr-2","zoom-in","heart-label",3,"click","disabled"],["name","heart","size","20",3,"ngClass"],["azt-track-service","emotions-Yt4v8qy-f6",1,"flex",2,"align-items","center",3,"ngClass"],["azt-track-service","emotions-lsF85jGU0",1,"mr-2","zoom-in",3,"click","disabled"],["name","message-square","size","20"]],template:function(b,u){1&b&&t.DNE(0,w,6,3,"div",0)(1,D,15,22,"div",1),2&b&&(t.Y8G("ngIf",u.postObj.isLockComment),t.R7$(),t.Y8G("ngIf",!u.postObj.isLockComment))},dependencies:[l.YU,l.bT,q.WGl,vt.wp,vt.hx],styles:['@charset "UTF-8";.heart-label[_ngcontent-%COMP%]{position:relative;cursor:pointer;font-size:1.5em;align-self:center;transition:color .2s ease-in-out;color:#aab8c2}.heart-non-selected[_ngcontent-%COMP%]{background:transparent}.heart-non-selected[_ngcontent-%COMP%]:hover{stroke:#7f6167!important}  .heart-selected svg{fill:#e2264d!important;stroke:#e2264d!important;will-change:font-size;animation:heart 1s cubic-bezier(.17,.89,.32,1.49)}']}),N})();var Rt=r(40111);function Nt(f,N){if(1&f){const T=t.RV6();t.j41(0,"a",3),t.bIt("click",function(){const u=t.eBV(T).$implicit,M=t.XpG();return t.Njj(M.onShowFile(u))}),t.nrm(1,"img",4),t.k0s()}if(2&f){const T=N.$implicit;t.R7$(),t.Y8G("src",T.imageLink,t.B4B)}}let Ut=(()=>{var f;class N extends o.H{onShowFile(b){this.sAztDialogService.open(X.V,{maxWidth:"100vw",maxHeight:"100vh",height:"100%",width:"100%",data:{fileOption:{name:"image_post"+b.id,mimes:"image/jpeg",url:b.imageLink,index:-1}},restoreFocus:!1})}constructor(b,u){super(),this.sAztDialogService=b,this.sAztFileTypeService=u,this.images=[]}}return(f=N).\u0275fac=function(b){return new(b||f)(t.rXU(st.i),t.rXU(Rt.k))},f.\u0275cmp=t.VBU({type:f,selectors:[["app-list-images-post"]],inputs:{images:"images"},features:[t.Vt3],decls:3,vars:1,consts:[[1,"outerContainer"],[1,"containerw3","containerw3-margin"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],[3,"src"]],template:function(b,u){1&b&&(t.j41(0,"div",0)(1,"div",1),t.DNE(2,Nt,2,1,"a",2),t.k0s()()),2&b&&(t.R7$(2),t.Y8G("ngForOf",u.images))},dependencies:[l.Sq],styles:['body[_ngcontent-%COMP%]{margin:0;font-family:arial}.containerw3[_ngcontent-%COMP%]{display:flex;overflow:hidden;flex-wrap:wrap;margin:-2.5px}.containerw3[_ngcontent-%COMP%]:after{content:"";flex-grow:999999999;min-width:300px;height:0}.containerw3[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{position:relative;display:block;height:300px;margin:2.5px;flex-grow:1}.containerw3[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{height:300px;object-fit:cover;max-width:100%;min-width:100%;vertical-align:bottom}.containerw3.containerw3-margin[_ngcontent-%COMP%]{margin:2.5px}@media (max-width: 767px){.containerw3[_ngcontent-%COMP%]{display:flex;overflow:hidden;flex-wrap:wrap;margin:-2.5px}.containerw3[_ngcontent-%COMP%]:after{content:"";flex-grow:999999999;min-width:150px;height:0}.containerw3[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{position:relative;display:block;height:150px;margin:2.5px;flex-grow:1}.containerw3[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{height:150px;object-fit:cover;max-width:100%;min-width:100%;vertical-align:bottom}.containerw3.containerw3-margin[_ngcontent-%COMP%]{margin:2.5px}}@media (max-width: 400px){.containerw3[_ngcontent-%COMP%]{display:flex;overflow:hidden;flex-wrap:wrap;margin:-2.5px}.containerw3[_ngcontent-%COMP%]:after{content:"";flex-grow:999999999;min-width:100px;height:0}.containerw3[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{position:relative;display:block;height:100px;margin:2.5px;flex-grow:1}.containerw3[_ngcontent-%COMP%] > *[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{height:100px;object-fit:cover;max-width:100%;min-width:100%;vertical-align:bottom}.containerw3.containerw3-margin[_ngcontent-%COMP%]{margin:2.5px}}']}),N})();const Wt=()=>({"text-slate-500":!0}),zt=()=>({"mr-2":!0});function ce(f,N){if(1&f&&t.eu8(0,15),2&f){t.XpG();const T=t.sdS(17);t.Y8G("ngTemplateOutlet",T)}}function _e(f,N){if(1&f&&(t.j41(0,"div"),t.nrm(1,"hr",12)(2,"app-news-list-comments",16),t.k0s()),2&f){const T=t.XpG();t.R7$(2),t.Y8G("isStudent",T.isStudent)("postObj",T.postObj)}}function me(f,N){if(1&f){const T=t.RV6();t.j41(0,"div",17)(1,"button",18),t.nrm(2,"lucide-icon",19),t.k0s(),t.j41(3,"mat-menu",20,1)(5,"div",21)(6,"ul",22)(7,"li")(8,"a",23),t.bIt("click",function(){t.eBV(T);const u=t.XpG();return t.Njj(u.editPostEvent())}),t.nrm(9,"lucide-icon",24),t.EFF(10),t.nI1(11,"mytranslate"),t.k0s()(),t.j41(12,"li")(13,"a",25),t.bIt("click",function(){t.eBV(T);const u=t.XpG();return t.Njj(u.deletePostEvent())}),t.nrm(14,"lucide-icon",26),t.EFF(15),t.nI1(16,"mytranslate"),t.k0s()(),t.j41(17,"li")(18,"label",27),t.bIt("click",function(u){return t.eBV(T),t.Njj(u.stopPropagation())}),t.j41(19,"div",28),t.nrm(20,"lucide-icon",29),t.EFF(21),t.nI1(22,"mytranslate"),t.k0s(),t.j41(23,"div",30)(24,"input",31),t.bIt("change",function(){t.eBV(T);const u=t.XpG();return t.Njj(u.changeLockCommentStatus())}),t.k0s()()()()()()()()}if(2&f){const T=t.sdS(4),b=t.XpG();t.R7$(),t.Y8G("matMenuTriggerFor",T),t.R7$(),t.Y8G("ngClass",t.lJ4(15,Wt)),t.R7$(7),t.Y8G("ngClass",t.lJ4(16,zt)),t.R7$(),t.SpI(" ",t.bMT(11,9,"lang_auto_sua")," "),t.R7$(4),t.Y8G("ngClass",t.lJ4(17,zt)),t.R7$(),t.SpI(" ",t.bMT(16,11,"lang_auto_xoa")," "),t.R7$(5),t.Y8G("ngClass",t.lJ4(18,zt)),t.R7$(),t.SpI(" ",t.bMT(22,13,"lang_student_comment_lock")," "),t.R7$(3),t.Y8G("formControl",b.isLockComment)}}let de=(()=>{var f;class N extends o.H{editPostEvent(){this.postObj.isShowEditForm=!0,this.changePostObjEvent.emit({actionType:e.UPDATE,postObj:this.postObj})}deletePostEvent(){this.sAztDialogService.open(Et,{width:"700px",data:this.postObj,restoreFocus:!1}).afterClosed().subscribe(u=>{u&&this.changePostObjEvent.emit({actionType:e.DELETE,postObj:this.postObj})})}changeLockCommentStatus(){const b=this.isLockComment.value;this.waitDestroy((b?this.newsService.apiNewsIdLockCommentsPut:this.newsService.apiNewsIdUnlockCommentsPut).call(this.newsService,this.postObj.id).subscribe({next:()=>{const M=b?"lang_student_comment_lock":"lang_student_unlock_comments";this.postObj.isLockComment=b?1:0,this.changePostObjEvent.emit({actionType:e.UPDATE,postObj:this.postObj}),this.showSuccessSnack(M)},error:M=>{this.errorStatusObj(M.error.message,!0)}}))}changeEmotionEventEvent(b){this.postObj=b,this.changePostObjEvent.emit({actionType:e.UPDATE,postObj:this.postObj})}ngOnInit(){super.ngOnInit(),this.isLockComment.setValue(!!this.postObj.isLockComment)}constructor(b,u){super(),this.sAztDialogService=b,this.newsService=u,this.changePostObjEvent=new t.bkB,this.isLockComment=new A.MJ(!1)}}return(f=N).\u0275fac=function(b){return new(b||f)(t.rXU(st.i),t.rXU(at.bH))},f.\u0275cmp=t.VBU({type:f,selectors:[["app-news-view-post"]],inputs:{postObj:"postObj",isStudent:"isStudent"},outputs:{changePostObjEvent:"changePostObjEvent"},features:[t.Vt3],decls:18,vars:13,consts:[["newsEditOrDeleteNews",""],["menuBox",""],[1,"flex","items-center","mb-3"],[1,"w-9","h-9","image-fit"],[3,"nameCreateAvatar","linkAvatar","size"],[1,"ml-3"],[1,"font-medium","whitespace-nowrap"],[1,"text-slate-500","text-xs","whitespace-nowrap","mt-0.5"],[3,"ngTemplateOutlet",4,"ngIf"],[1,"pb-3"],[3,"content","maxLine"],[3,"images"],[1,"mb-3"],[1,"mb-3",3,"changePostObjEvent","postObj"],[4,"ngIf"],[3,"ngTemplateOutlet"],[1,"mb-3",3,"isStudent","postObj"],[1,"ml-auto"],["data-tw-toggle","dropdown",1,"absolute","clickable","p-1","hover:bg-slate-100","dark:hover:bg-darkmode-400",2,"top","10px","right","10px","border-radius","50%",3,"matMenuTriggerFor"],["name","ellipsis","size","20",3,"ngClass"],["xPosition","after"],[1,"dropdown-menu","show","relative","w-56"],[1,"dropdown-content"],["azt-track-service","news-board-5U9HMbLBxY",1,"dropdown-item",3,"click"],["name","square-pen","size","16",3,"ngClass"],["azt-track-service","news-board-35uylGIW_W",1,"dropdown-item","text-danger",3,"click"],["name","trash-2","size","16",3,"ngClass"],["azt-track-service","view-post-HeRBfG3bI","for","commentLock",1,"dropdown-item","cursor-pointer",3,"click"],[1,"flex","items-center"],["name","lock","size","18",3,"ngClass"],[1,"form-check","form-switch","ml-auto"],["id","commentLock","type","checkbox",1,"form-check-input","ml-2",3,"change","formControl"]],template:function(b,u){if(1&b){const M=t.RV6();t.j41(0,"div",2)(1,"div",3),t.nrm(2,"azt-create-avatar",4),t.k0s(),t.j41(3,"div",5)(4,"a",6),t.EFF(5),t.k0s(),t.j41(6,"div",7),t.EFF(7),t.nI1(8,"relativeTime"),t.k0s()()(),t.DNE(9,ce,1,1,"ng-container",8),t.j41(10,"div",9),t.nrm(11,"azt-see-more-multiple-lines",10),t.k0s(),t.nrm(12,"app-list-images-post",11)(13,"hr",12),t.j41(14,"app-news-emotions",13),t.bIt("changePostObjEvent",function(Jt){return t.eBV(M),t.Njj(u.changeEmotionEventEvent(Jt))}),t.k0s(),t.DNE(15,_e,3,2,"div",14)(16,me,25,19,"ng-template",null,0,t.C5r)}if(2&b){let M;t.R7$(2),t.Y8G("nameCreateAvatar",null==u.postObj.user?null:u.postObj.user.fullName)("linkAvatar",null==u.postObj.user?null:u.postObj.user.avatar)("size",36),t.R7$(3),t.SpI("",null==u.postObj.user?null:u.postObj.user.fullName,"\xa0"),t.R7$(2),t.JRh(t.bMT(8,11,u.postObj.createdAt)),t.R7$(2),t.Y8G("ngIf",!u.isStudent),t.R7$(2),t.Y8G("content",u.postObj.content)("maxLine",0==(null!==(M=null==u.postObj.images?null:u.postObj.images.length)&&void 0!==M?M:0)?u.postObj.content.length:10),t.R7$(),t.Y8G("images",u.postObj.images),t.R7$(2),t.Y8G("postObj",u.postObj),t.R7$(),t.Y8G("ngIf",u.postObj.isShowCommentBox)}},dependencies:[l.YU,l.bT,l.T3,it.kk,it.Cp,A.Zm,A.BC,A.l_,dt.p,_t.R,q.WGl,F,ht,Ut,vt.wp,vt.NA],encapsulation:2}),N})();const re=f=>[f],ue=()=>({"zoom-in":!0});function pe(f,N){if(1&f){const T=t.RV6();t.j41(0,"app-new-list-images",13),t.mxI("filesChange",function(u){t.eBV(T);const M=t.XpG();return t.DH7(M.files,u)||(M.files=u),t.Njj(u)}),t.k0s()}if(2&f){const T=t.XpG();t.R50("files",T.files)}}function j(f,N){1&f&&t.nrm(0,"azt-loading-ui",14)}let K=(()=>{var f;class N extends o.H{cancel(){this.postObj.isShowEditForm=!1,this.changePostObjEvent.emit(this.postObj)}saveNewPost(){if(this.contentFormControl.value.trim()){this.initStatusObj();let b={content:this.contentFormControl.value??"",classroomId:this.postObj.id,imageLinks:this.files.map(u=>u.url).filter(this.commonService.notEmpty)};this.waitDestroy(this.newsService.apiNewsIdPut(this.postObj.id,b).subscribe({next:u=>{this.successStatusObj("lang_cms_update_success",!0);let M=[];this.files.forEach($t=>{M.push({id:0,newsId:this.postObj?.id??0,imageLink:$t.url??"",createdAt:void 0})}),this.postObj.isShowEditForm=!1,this.postObj.content=b.content,this.postObj.images=M,this.changePostObjEvent.emit(this.postObj),this.contentFormControl.setValue(""),this.files=[]},error:u=>{this.errorStatusObj(u.error.message,!0)}}))}}handleUploadComplete(b){this.files.push(...b)}ngOnInit(){this.userObj=this.userService.getUserObj(),this.contentFormControl.setValue(this.postObj.content),(this.postObj.images??[]).forEach(b=>{this.files.push({name:"",mimes:"image/jpeg",url:b.imageLink})})}constructor(b,u){super(),this.newsService=b,this.userService=u,this.changePostObjEvent=new t.bkB,this.contentFormControl=new A.MJ("",{nonNullable:!0,validators:[tt.M.noWhiteSpace]}),this.files=[],this.allUploadToCdnMenuTypes=pt.b8,this.allUploadFileTypes=pt.PO}}return(f=N).\u0275fac=function(b){return new(b||f)(t.rXU(at.bH),t.rXU(L.R))},f.\u0275cmp=t.VBU({type:f,selectors:[["app-news-edit-post"]],inputs:{classroomId:"classroomId",postObj:"postObj"},outputs:{changePostObjEvent:"changePostObjEvent"},features:[t.Vt3],decls:21,vars:25,consts:[[1,"flex"],[3,"nameCreateAvatar","linkAvatar","size"],[1,"relative","w-full","ml-3",2,"border-radius","5px"],["matInput","","autoResize","","row","5",1,"border-none",2,"resize","none","height","85px",3,"formControl","placeholder"],[3,"files","filesChange",4,"ngIf"],[1,"text-right","pt-1","pb-1"],[1,"flex","items-center","justify-end","sm:w-auto"],[3,"uploadComplete","uploadToCdnMenu","fileType"],[1,"mr-2","text-success","inline-block","clickable","flex","items-center",2,"vertical-align","middle"],["name","image",2,"width","24px!important","height","24px!important","vertical-align","middle","color","limegreen",3,"matTooltip","ngClass"],["azt-track-service","edit-post-3W8T83tTj_","type","button",1,"btn","btn-secondary","btn-sm","w-22","mr-2",3,"click"],["azt-track-service","edit-post-NaJeb-mmLZ","type","button",1,"btn","btn-primary","btn-sm",3,"click","disabled"],["class","mr-1",4,"ngIf"],[3,"filesChange","files"],[1,"mr-1"]],template:function(b,u){1&b&&(t.j41(0,"div")(1,"div",0),t.nrm(2,"azt-create-avatar",1),t.j41(3,"div",2)(4,"textarea",3),t.nI1(5,"mytranslate"),t.EFF(6,"            "),t.k0s()()(),t.DNE(7,pe,1,1,"app-new-list-images",4),t.j41(8,"div",5)(9,"div",6)(10,"azt-upload-multiple-box",7),t.bIt("uploadComplete",function($t){return u.handleUploadComplete($t)}),t.j41(11,"span",8),t.nrm(12,"lucide-icon",9),t.nI1(13,"mytranslate"),t.k0s()(),t.j41(14,"button",10),t.bIt("click",function(){return u.cancel()}),t.EFF(15),t.nI1(16,"mytranslate"),t.k0s(),t.j41(17,"button",11),t.bIt("click",function(){return u.saveNewPost()}),t.DNE(18,j,1,0,"azt-loading-ui",12),t.EFF(19),t.nI1(20,"mytranslate"),t.k0s()()()()),2&b&&(t.R7$(2),t.Y8G("nameCreateAvatar",u.userObj.fullName)("linkAvatar",u.userObj.avatar)("size",36),t.R7$(2),t.FS9("placeholder",t.bMT(5,14,"lang_business_news_post_content")),t.Y8G("formControl",u.contentFormControl),t.R7$(3),t.Y8G("ngIf",u.files.length),t.R7$(3),t.Y8G("uploadToCdnMenu",u.allUploadToCdnMenuTypes.BUSINESS_NEWS)("fileType",t.eq3(22,re,u.allUploadFileTypes.IMAGE)),t.R7$(2),t.FS9("matTooltip",t.bMT(13,16,"lang_core_tai_anh")),t.Y8G("ngClass",t.lJ4(24,ue)),t.R7$(3),t.SpI(" ",t.bMT(16,18,"lang_cms_common_close_btn")," "),t.R7$(2),t.Y8G("disabled",""==u.contentFormControl.value||u.statusObj.loading),t.R7$(),t.Y8G("ngIf",u.statusObj.loading),t.R7$(),t.SpI(" ",t.bMT(20,20,"lang_business_news_update_post_button")," "))},dependencies:[l.YU,l.bT,Q.fg,m.oV,A.me,A.BC,A.l_,dt.p,V.j,ut.R,W.V,q.WGl,jt,vt.wp],styles:["textarea[_ngcontent-%COMP%]:focus{outline:none;border:none}textarea[_ngcontent-%COMP%]{resize:none;min-height:25px;font-size:14px;width:100%;border:none;padding:0}"]}),N})();function C(f,N){if(1&f){const T=t.RV6();t.j41(0,"div",12)(1,"app-news-add-new-post",13),t.bIt("changePostObjEvent",function(u){t.eBV(T);const M=t.XpG();return t.Njj(M.changePostObj(M.enumNewsPostActionType.ADD_NEW,u))}),t.k0s()()}if(2&f){const T=t.XpG();t.R7$(),t.Y8G("classroomId",T.classroomId)("isSchool",T.isSchoolControl.getRawValue())}}function x(f,N){if(1&f&&(t.j41(0,"div",14),t.nrm(1,"azt-loading-effect",15),t.k0s()),2&f){const T=t.XpG();t.R7$(),t.Y8G("currentStatusObj",T.statusObj)}}function O(f,N){if(1&f){const T=t.RV6();t.qex(0),t.j41(1,"app-news-view-post",19),t.bIt("changePostObjEvent",function(u){t.eBV(T);const M=t.XpG(3);return t.Njj(M.changePostObj(u.actionType,u.postObj))}),t.k0s(),t.bVm()}if(2&f){const T=t.XpG().$implicit,b=t.XpG(2);t.R7$(),t.Y8G("isStudent",b.isStudent)("postObj",T)}}function R(f,N){if(1&f){const T=t.RV6();t.j41(0,"app-news-edit-post",20),t.bIt("changePostObjEvent",function(u){t.eBV(T);const M=t.XpG(3);return t.Njj(M.changePostObj(M.enumNewsPostActionType.UPDATE,u))}),t.k0s()}if(2&f){const T=t.XpG().$implicit,b=t.XpG(2);t.Y8G("postObj",T)("classroomId",b.classroomId)}}function ft(f,N){if(1&f&&(t.j41(0,"div",17),t.DNE(1,O,2,2,"ng-container",18)(2,R,1,2,"ng-template",null,1,t.C5r),t.k0s()),2&f){const T=N.$implicit,b=t.sdS(3);t.R7$(),t.Y8G("ngIf",!T.isShowEditForm)("ngIfElse",b)}}function Ft(f,N){1&f&&(t.j41(0,"div",12)(1,"div",21)(2,"div",22),t.nrm(3,"azt-svg-icon",23),t.j41(4,"p",24),t.EFF(5),t.nI1(6,"mytranslate"),t.k0s()()()()),2&f&&(t.R7$(3),t.Y8G("size",87),t.R7$(2),t.JRh(t.bMT(6,2,"lang_student_news_there_is_no_news")+"!"))}function Gt(f,N){1&f&&t.nrm(0,"azt-loading-ui")}function Bt(f,N){if(1&f){const T=t.RV6();t.j41(0,"button",26),t.nI1(1,"mytranslate"),t.bIt("click",function(){t.eBV(T);const u=t.XpG(3);return t.Njj(u.getNextPage())}),t.nrm(2,"lucide-icon",27),t.k0s()}2&f&&t.FS9("matTooltip",t.bMT(1,1,"lang_auto_hien_ban_ghi_cu_hon"))}function Yt(f,N){if(1&f&&(t.j41(0,"div",12)(1,"div",25),t.DNE(2,Gt,1,0,"azt-loading-ui",18)(3,Bt,3,3,"ng-template",null,2,t.C5r),t.k0s()()),2&f){const T=t.sdS(4),b=t.XpG(2);t.R7$(2),t.Y8G("ngIf",b.sAztNextPaginationService.isLoadingNextPage)("ngIfElse",T)}}function ge(f,N){if(1&f&&t.DNE(0,ft,4,2,"div",16)(1,Ft,7,4,"div",10)(2,Yt,5,2,"div",10),2&f){const T=t.XpG();t.Y8G("ngForOf",T.postObjs),t.R7$(),t.Y8G("ngIf",T.postObjs.length<=0),t.R7$(),t.Y8G("ngIf",T.postObjs.length&&T.sAztNextPaginationService.hasNextPage)}}let se=(()=>{var f;class N extends o.H{selectedViewNewsSchool(b){let u=(this.isStudent?"/student/classroom-details/":"/admin/student/classroom-details/")+this.classroomId+"/2";b?(this.isSchoolControl.setValue(1),this.commonService.myNavigationWithQueryString(u,"?type=1")):(this.isSchoolControl.setValue(0),this.commonService.myNavigationWithQueryString(u,"?type=0")),this.postObjs=[],this.getData(!1)}changePostObj(b,u){switch(b){case e.ADD_NEW:this.postObjs.unshift(u);break;case e.UPDATE:this.postObjs=this.postObjs.map(M=>M.id==u.id?u:M);break;case e.DELETE:this.postObjs=this.postObjs.filter(M=>M.id!=u.id)}}getNextPage(){this.sAztNextPaginationService.setNextPage(),this.getData(!0)}getData(b){var u={size:this.sAztNextPaginationService.itemPerPage,page:this.sAztNextPaginationService.curPage,classroomId:this.classroomId,student:this.isStudent,isSchool:this.isSchoolControl.getRawValue()};b?this.sAztNextPaginationService.setLoading(!0):this.initStatusObj(),this.waitDestroy(this.newsService.apiNewsListPost(u).subscribe({next:M=>{let $t={page:1,size:-1,newsIds:M.list.map(Jt=>Jt.id).filter(this.commonService.notEmpty)};this.waitDestroy(this.newsService.apiNewsEmotionsListPost($t).subscribe({next:Jt=>{let he=this.commonService.arrayToUniqueDictionary(Jt.list??[],le=>le.newsId.toString());M.list.forEach(le=>{this.postObjs.push({...le,hasLoveEmotion:he.hasOwnProperty(le.id),isShowEditForm:!1,isShowCommentBox:!1})}),this.sAztNextPaginationService.setLoading(!1),this.sAztNextPaginationService.setTotalRecord(M.total),this.stopStatusObj()},error:Jt=>{this.errorStatusObj(Jt.error.message,!0)}}))},error:M=>{this.errorStatusObj(M.error.message,!0)}}))}getDataFirstTime(){this.postObjs=[],this.sAztNextPaginationService.resetToFirstPage(),this.getData(!1)}ngOnChanges(){"1"==this.getMyQueryParam("type")&&this.isSchoolControl.setValue(1),this.getDataFirstTime()}ngOnInit(){super.ngOnInit()}constructor(b,u){super(),this.newsService=b,this.sAztNextPaginationService=u,this.isSchoolControl=new A.MJ(0,{nonNullable:!0}),this.postObjs=[],this.enumNewsPostActionType=e}}return(f=N).\u0275fac=function(b){return new(b||f)(t.rXU(at.bH),t.rXU(g.h))},f.\u0275cmp=t.VBU({type:f,selectors:[["app-news-board"]],inputs:{isStudent:"isStudent",classroomId:"classroomId"},features:[t.Jv_([g.h]),t.Vt3,t.OA$],decls:19,vars:16,consts:[["doneLoading",""],["showEditForm",""],["doneLoadNextPage",""],[1,"grid","grid-cols-12"],[1,"col-span-12","font-medium","flex","items-center","mb-3"],[1,"flex","ml-5","items-center"],["azt-track-service","posts-x27NMu5qsN","id","classroom","type","radio",1,"form-check-input","flex-none","ng-valid","ng-dirty","ng-touched",3,"click","value","formControl"],["for","classroom",1,"pl-2","form-check-label"],["azt-track-service","posts-KOM2BXgAQ","id","school","type","radio",1,"form-check-input","flex-none","ng-valid","ng-dirty","ng-touched",3,"click","value","formControl"],["for","school",1,"pl-2","form-check-label"],["class","col-span-12 sm:col-span-10 lg:col-span-8 column-start mb-3",4,"ngIf"],["class","col-span-12 sm:col-span-10 lg:col-span-8",4,"ngIf","ngIfElse"],[1,"col-span-12","sm:col-span-10","lg:col-span-8","column-start","mb-3"],[3,"changePostObjEvent","classroomId","isSchool"],[1,"col-span-12","sm:col-span-10","lg:col-span-8"],[3,"currentStatusObj"],["class","col-span-12 sm:col-span-10 lg:col-span-8 column-start box p-3 mb-3",4,"ngFor","ngForOf"],[1,"col-span-12","sm:col-span-10","lg:col-span-8","column-start","box","p-3","mb-3"],[4,"ngIf","ngIfElse"],[3,"changePostObjEvent","isStudent","postObj"],[3,"changePostObjEvent","postObj","classroomId"],[1,"box","p-3","flex","items-center",2,"min-height","216px"],[1,"text-center","mx-auto"],["type","file-empty",3,"size"],[1,"font-medium","mt-5"],[1,"flex","justify-center"],["azt-track-service","trash-homework-tab-C69nk6waYbG",1,"btn","btn-transparent",3,"click","matTooltip"],["name","chevron-down","size","20"]],template:function(b,u){if(1&b){const M=t.RV6();t.j41(0,"div",3)(1,"div",4)(2,"p"),t.EFF(3),t.nI1(4,"mytranslate"),t.k0s(),t.j41(5,"div",5)(6,"input",6),t.bIt("click",function(){return t.eBV(M),t.Njj(u.selectedViewNewsSchool(!1))}),t.k0s(),t.j41(7,"label",7),t.EFF(8),t.nI1(9,"mytranslate"),t.k0s()(),t.j41(10,"div",5)(11,"input",8),t.bIt("click",function(){return t.eBV(M),t.Njj(u.selectedViewNewsSchool(!0))}),t.k0s(),t.j41(12,"label",9),t.EFF(13),t.nI1(14,"mytranslate"),t.k0s()()(),t.DNE(15,C,2,2,"div",10)(16,x,2,1,"div",11)(17,ge,3,3,"ng-template",null,0,t.C5r),t.k0s()}if(2&b){const M=t.sdS(18);t.R7$(3),t.JRh(t.bMT(4,10,"lang_azt_hien_ban_tin_theo")),t.R7$(3),t.Y8G("value",0)("formControl",u.isSchoolControl),t.R7$(2),t.JRh(t.bMT(9,12,"lang_auto_lop_hoc")),t.R7$(3),t.Y8G("value",1)("formControl",u.isSchoolControl),t.R7$(2),t.JRh(t.bMT(14,14,"lang_azt_truong_hoc")),t.R7$(2),t.Y8G("ngIf",!u.isStudent),t.R7$(),t.Y8G("ngIf",u.statusObj.loading)("ngIfElse",M)}},dependencies:[l.Sq,l.bT,m.oV,A.me,A.Fm,A.BC,A.l_,n.K,ut.R,kt.m,q.WGl,U,de,K,vt.wp],encapsulation:2}),N})()},14505:(Mt,St,r)=>{r.d(St,{h:()=>J});var g=r(54460),o=r(10936),e=r(89163),A=r(65162),t=r(69223),at=r(23047),l=r(15343),m=r(13763),n=r(10123),ut=r(25571),kt=r(44233),q=r(20378),tt=r(5502),pt=r(21656),L=r(70050),Q=r(7050),V=r(91100),W=r(43234),X=r(73100),st=r(48891);let J=(()=>{var et;class jt{}return(et=jt).\u0275fac=function(Tt){return new(Tt||et)},et.\u0275mod=st.$C({type:et}),et.\u0275inj=st.G2t({providers:[{provide:t.vn,useValue:W.c.azt_tiny_mce_script_src}],imports:[A.iI,g.MD,pt.s,q.T_,t.sv,o.YN,o.X1,e.hM,L.L,m.Lk,ut.xv,V.Q,Q.b,n.AC,l.flO.pick(l.Ptg),tt.Id,at.Fr,X.AzotaBusinessModule,kt.An]}),jt})()},66257:(Mt,St,r)=>{r.d(St,{H:()=>g});var g=function(o){return o.none="None",o.asc="Asc",o.desc="Desc",o}(g||{})},48725:(Mt,St,r)=>{r.d(St,{s:()=>o});var g=r(66257);class o{resetSortFieldName(A){this.fieldNameList.forEach(t=>{t.fieldName!==A.fieldName&&(t.typeFieldSort=this.typeFieldSort.none)})}setFieldNameList(A){this.fieldNameList=A}convertDataSort(A){switch(this.resetSortFieldName(A),A.typeFieldSort){case this.typeFieldSort.none:A.typeFieldSort=this.typeFieldSort.asc;break;case this.typeFieldSort.asc:A.typeFieldSort=this.typeFieldSort.desc;break;case this.typeFieldSort.desc:A.typeFieldSort=this.typeFieldSort.none}return{fieldName:A.fieldName,descending:A.typeFieldSort===this.typeFieldSort.desc,ignore:A.typeFieldSort===this.typeFieldSort.none}}constructor(){this.typeFieldSort=g.H,this.fieldNameList=[]}}},49221:(Mt,St,r)=>{r.d(St,{R:()=>q});var g=r(59640),o=r(48891),e=r(54460),A=r(76975);function t(tt,pt){if(1&tt){const L=o.RV6();o.j41(0,"a",5),o.bIt("click",function(){o.eBV(L);const V=o.XpG(2);return o.Njj(V.clickToSeeMore())}),o.EFF(1),o.nI1(2,"mytranslate"),o.k0s()}2&tt&&(o.R7$(),o.JRh(o.bMT(2,1,"lang_cms_common_see_more")))}function at(tt,pt){if(1&tt){const L=o.RV6();o.j41(0,"a",5),o.bIt("click",function(){o.eBV(L);const V=o.XpG(2);return o.Njj(V.clickToShowShortContent())}),o.EFF(1),o.nI1(2,"mytranslate"),o.k0s()}2&tt&&(o.R7$(),o.JRh(o.bMT(2,1,"lang_cms_common_see_short_content")))}function l(tt,pt){if(1&tt&&(o.j41(0,"div"),o.nrm(1,"span",3),o.nI1(2,"safeNormalHtmlContent"),o.DNE(3,t,3,3,"a",4)(4,at,3,3,"a",4),o.k0s()),2&tt){const L=o.XpG();o.R7$(),o.Y8G("innerHTML",o.bMT(2,3,L.showContent),o.npT),o.R7$(2),o.Y8G("ngIf",L.showSeeMoreButton&&L.content.length>L.maxLength),o.R7$(),o.Y8G("ngIf",L.showShortContentButton&&L.content.length>L.maxLength)}}function m(tt,pt){if(1&tt&&(o.nrm(0,"span",10),o.nI1(1,"safeNormalHtmlContent")),2&tt){const L=o.XpG(2);o.Y8G("innerHTML",o.bMT(1,1,L.showContent),o.npT)}}function n(tt,pt){if(1&tt){const L=o.RV6();o.j41(0,"a",5),o.bIt("click",function(){o.eBV(L);const V=o.XpG(2);return o.Njj(V.clickToSeeMore())}),o.EFF(1),o.nI1(2,"mytranslate"),o.k0s()}if(2&tt){const L=o.XpG(2);o.Aen("position: absolute; bottom: 0; right: 0; background-color: "+L.backgroundColor),o.R7$(),o.SpI(" ...",o.bMT(2,3,"lang_cms_common_see_more")," ")}}function ut(tt,pt){if(1&tt){const L=o.RV6();o.j41(0,"a",5),o.bIt("click",function(){o.eBV(L);const V=o.XpG(2);return o.Njj(V.clickToShowShortContent())}),o.EFF(1),o.nI1(2,"mytranslate"),o.k0s()}2&tt&&(o.R7$(),o.JRh(o.bMT(2,1,"lang_cms_common_see_short_content")))}function kt(tt,pt){if(1&tt&&(o.j41(0,"div",6),o.nrm(1,"div",7),o.nI1(2,"safeNormalHtmlContent"),o.nrm(3,"div",7,0),o.nI1(5,"safeNormalHtmlContent"),o.DNE(6,m,2,3,"span",8)(7,n,3,5,"a",9)(8,ut,3,3,"a",4),o.k0s()),2&tt){const L=o.sdS(4),Q=o.XpG();o.R7$(),o.Aen(Q.styleContent),o.Y8G("innerHTML",o.bMT(2,9,Q.showContent),o.npT),o.R7$(2),o.Aen("white-space: pre-line; position: absolute; visibility: hidden; line-height: 20px"),o.Y8G("innerHTML",o.bMT(5,11,Q.showContent),o.npT),o.R7$(3),o.Y8G("ngIf",Q.showShortContentButton),o.R7$(),o.Y8G("ngIf",Q.showSeeMoreButton&&L.offsetHeight>20*Q.maxLine),o.R7$(),o.Y8G("ngIf",Q.showShortContentButton&&L.offsetHeight>20*Q.maxLine)}}let q=(()=>{var tt;class pt extends g.H{clickToShowShortContent(){this.showSeeMoreButton=!0,this.showShortContentButton=!1,this.processSeeMore()}clickToSeeMore(){this.showSeeMoreButton=!1,this.showShortContentButton=!0,this.processSeeMore()}processSeeMore(){let Q=this.commonService.removeTagHtml(this.content);if(this.maxLength&&Q.length>this.maxLength)this.showContent=this.showSeeMoreButton?Q.substring(0,this.maxLength)+"...":this.content;else if(this.maxLine){this.showContent=this.content;var V=(20*this.maxLine).toString();this.styleContent=this.showSeeMoreButton?"white-space: pre-line; max-height: "+V+"px; overflow: hidden; position: relative; line-height: 20px;":"white-space: pre-line; line-height: 20px; visibility: hidden; position: absolute;"}else this.showSeeMoreButton=!1,this.showShortContentButton=!1,this.showContent=this.content;this.showContent=this.showContent+" "}ngOnInit(){this.processSeeMore(),super.ngOnInit()}ngOnChanges(){this.showSeeMoreButton=!0,this.showShortContentButton=!1,this.processSeeMore()}constructor(){super(),this.content="",this.backgroundColor="white",this.styleContent="white-space: pre-line;",this.showContent="",this.showSeeMoreButton=!0,this.showShortContentButton=!1}}return(tt=pt).\u0275fac=function(Q){return new(Q||tt)},tt.\u0275cmp=o.VBU({type:tt,selectors:[["azt-see-more-multiple-lines"]],inputs:{content:"content",maxLength:"maxLength",maxLine:"maxLine",backgroundColor:"backgroundColor"},features:[o.Vt3,o.OA$],decls:2,vars:2,consts:[["contentElementHide",""],[4,"ngIf"],["style","position: relative; white-space: break-spaces",4,"ngIf"],[2,"white-space","pre-line","white-space","break-spaces",3,"innerHTML"],["class","btn-text-primary",3,"click",4,"ngIf"],[1,"btn-text-primary",3,"click"],[2,"position","relative","white-space","break-spaces"],[3,"innerHTML"],["style","white-space: pre-line",3,"innerHTML",4,"ngIf"],["class","btn-text-primary",3,"style","click",4,"ngIf"],[2,"white-space","pre-line",3,"innerHTML"]],template:function(Q,V){1&Q&&o.DNE(0,l,5,5,"div",1)(1,kt,9,13,"div",2),2&Q&&(o.Y8G("ngIf",V.maxLength),o.R7$(),o.Y8G("ngIf",V.maxLine&&!V.maxLength))},dependencies:[e.bT,A.wp,A._y],encapsulation:2}),pt})()},74637:(Mt,St,r)=>{r.d(St,{E:()=>W});var g=r(48891),o=r(59640),e=r(54460),A=r(17818),t=r(15343),at=r(76975);const l=()=>[];function m(X,st){1&X&&(g.j41(0,"span",12),g.EFF(1),g.nI1(2,"mytranslate"),g.k0s()),2&X&&(g.R7$(),g.JRh(g.bMT(2,1,"lang_core_thang")))}function n(X,st){if(1&X&&(g.j41(0,"span",12),g.EFF(1),g.nI1(2,"mytranslate"),g.k0s()),2&X){const J=g.XpG();g.R7$(),g.Lme("",g.bMT(2,2,"lang_core_thang")," ",J.dataFilter.monthSelected,"")}}function ut(X,st){1&X&&(g.j41(0,"span",12),g.EFF(1),g.nI1(2,"mytranslate"),g.k0s()),2&X&&(g.R7$(),g.JRh(g.bMT(2,1,"lang_core_nam")))}function kt(X,st){if(1&X&&(g.j41(0,"span",12),g.EFF(1),g.nI1(2,"mytranslate"),g.k0s()),2&X){const J=g.XpG();g.R7$(),g.Lme("",g.bMT(2,2,"lang_core_nam")," ",J.dataFilter.yearSelected,"")}}function q(X,st){1&X&&(g.j41(0,"span"),g.EFF(1),g.nI1(2,"mytranslate"),g.k0s()),2&X&&(g.R7$(),g.JRh(g.bMT(2,1,"lang_auto_tat_ca")))}function tt(X,st){if(1&X&&(g.j41(0,"span"),g.EFF(1),g.nI1(2,"mytranslate"),g.k0s()),2&X){const J=g.XpG().index;g.R7$(),g.Lme("",g.bMT(2,2,"lang_core_thang")," ",J,"")}}function pt(X,st){if(1&X){const J=g.RV6();g.j41(0,"li",13),g.bIt("click",function(){const jt=g.eBV(J).index,vt=g.XpG();return g.Njj(vt.selectMonth(jt))}),g.DNE(1,q,3,3,"span",14)(2,tt,3,4,"span",14),g.k0s()}if(2&X){const J=st.index,et=g.XpG();g.Y8G("ngClass",et.dataFilter.monthSelected==J?"color-select":""),g.R7$(),g.Y8G("ngIf",0==J),g.R7$(),g.Y8G("ngIf",J>0)}}function L(X,st){1&X&&(g.j41(0,"span"),g.EFF(1),g.nI1(2,"mytranslate"),g.k0s()),2&X&&(g.R7$(),g.JRh(g.bMT(2,1,"lang_auto_tat_ca")))}function Q(X,st){if(1&X&&(g.j41(0,"span"),g.EFF(1),g.nI1(2,"mytranslate"),g.k0s()),2&X){const J=g.XpG().index,et=g.XpG();g.R7$(),g.Lme("",g.bMT(2,2,"lang_core_nam")," ",et.currentDate.getFullYear()-(J-1),"")}}function V(X,st){if(1&X){const J=g.RV6();g.j41(0,"li",15),g.bIt("click",function(){const jt=g.eBV(J).index,vt=g.XpG();return g.Njj(vt.selectYear(jt))}),g.DNE(1,L,3,3,"span",14)(2,Q,3,4,"span",14),g.k0s()}if(2&X){const J=st.index,et=g.XpG();g.Y8G("ngClass",!et.dataFilter.yearSelected||et.currentDate.getFullYear()-(et.dataFilter.yearSelected-1)!=J&&0!=et.dataFilter.yearSelected?"":"color-select"),g.R7$(),g.Y8G("ngIf",0==J),g.R7$(),g.Y8G("ngIf",J>0)}}let W=(()=>{var X;class st extends o.H{selectMonth(et){this.isApply=!0,this.dataFilter.monthSelected=et,this.sendFilter.emit(this.dataFilter)}selectYear(et){this.isApply=!0,this.dataFilter.yearSelected=et>0?this.currentDate.getFullYear()-(et-1):et,this.sendFilter.emit(this.dataFilter)}ngOnInit(){super.ngOnInit()}constructor(){super(),this.sendFilter=new g.bkB,this.isLoading=!1,this.currentDate=new Date,this.isApply=!1,this.dataFilter={monthSelected:void 0,yearSelected:void 0}}}return(X=st).\u0275fac=function(et){return new(et||X)},X.\u0275cmp=g.VBU({type:X,selectors:[["azt-filter-box"]],inputs:{isLoading:"isLoading"},outputs:{sendFilter:"sendFilter"},features:[g.Vt3],decls:22,vars:13,consts:[["filterByMonth","matMenu"],["filterByYear","matMenu"],[1,"flex","items-center","font-medium"],[1,"font-medium","mr-2","color",2,"color","#1e40af"],[1,"border-box","hover","p-1","clickable","mr-1",3,"matMenuTriggerFor"],["class","p-1",4,"ngIf"],["name","chevron-down","size","18"],["xPosition","before"],[1,"dropdown-menu","show","relative"],[1,"dropdown-content","overflow-hidden","overflow-y-auto","h-56"],["azt-track-service","azt-filter-box-0A_xsGZ5B","class","dropdown-item w-max-content w-full clickable",3,"ngClass","click",4,"ngFor","ngForOf"],["azt-track-service","azt-filter-box-orpcyuG7jD","class","dropdown-item w-max-content w-full clickable",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"p-1"],["azt-track-service","azt-filter-box-0A_xsGZ5B",1,"dropdown-item","w-max-content","w-full","clickable",3,"click","ngClass"],[4,"ngIf"],["azt-track-service","azt-filter-box-orpcyuG7jD",1,"dropdown-item","w-max-content","w-full","clickable",3,"click","ngClass"]],template:function(et,jt){if(1&et&&(g.j41(0,"div",2)(1,"div",3),g.EFF(2),g.nI1(3,"mytranslate"),g.k0s(),g.j41(4,"div",4),g.DNE(5,m,3,3,"span",5)(6,n,3,4,"span",5),g.nrm(7,"lucide-icon",6),g.k0s(),g.j41(8,"div",4),g.DNE(9,ut,3,3,"span",5)(10,kt,3,4,"span",5),g.nrm(11,"lucide-icon",6),g.k0s()(),g.j41(12,"mat-menu",7,0)(14,"div",8)(15,"ul",9),g.DNE(16,pt,3,3,"li",10),g.k0s()()(),g.j41(17,"mat-menu",7,1)(19,"div",8)(20,"ul",9),g.DNE(21,V,3,3,"li",11),g.k0s()()()),2&et){const vt=g.sdS(13),Tt=g.sdS(18);g.R7$(2),g.SpI(" ",g.bMT(3,9,"lang_testbank_tested_list_sort"),": "),g.R7$(2),g.Y8G("matMenuTriggerFor",vt),g.R7$(),g.Y8G("ngIf",!jt.dataFilter.monthSelected),g.R7$(),g.Y8G("ngIf",jt.dataFilter.monthSelected&&jt.dataFilter.monthSelected>0),g.R7$(2),g.Y8G("matMenuTriggerFor",Tt),g.R7$(),g.Y8G("ngIf",!jt.dataFilter.yearSelected),g.R7$(),g.Y8G("ngIf",jt.dataFilter.yearSelected&&jt.dataFilter.yearSelected>0),g.R7$(6),g.Y8G("ngForOf",g.lJ4(11,l).constructor(13)),g.R7$(5),g.Y8G("ngForOf",g.lJ4(12,l).constructor(10))}},dependencies:[e.YU,e.Sq,e.bT,A.kk,A.Cp,t.WGl,at.wp],styles:[".w-max-content[_ngcontent-%COMP%]{width:-webkit-fill-available;min-width:max-content}.border-left[_ngcontent-%COMP%]{border-left:1px solid rgb(201,201,201)}.background-powderblue[_ngcontent-%COMP%]{background:#b0e0e6}.hover[_ngcontent-%COMP%]:hover{background:#f5fffa}.color-select[_ngcontent-%COMP%]{background-color:#eef1f6}.border-box[_ngcontent-%COMP%]{border:1px solid #1e40af;padding:2px 5px;border-radius:10px}.box-name[_ngcontent-%COMP%]{background:#d3d3d3}"]}),st})()},16583:(Mt,St,r)=>{r.d(St,{x:()=>Le});var g=r(10936),o=r(59640),e=r(63016),A=r(82653),t=r(48891),at=r(31216),l=r(62095),m=r(50589);let n=(()=>{var d;class E{countChecked(c){var h=0;for(var B in c)!0===c[B]&&(h+=1);return h}getDefaultFilterObj(c){var h=this.localStorageSlug+c;if(this.listFilterObjs[h])return this.listFilterObjs[h];var B=this.getInitFilterObj(),yt=this.browserStorageService.getSimpleStorage(h),At=this.commonService.castJsonToObj(yt??"");return At&&(B=At),B}saveFilterObj(c,h){var B=this.localStorageSlug+c;this.listFilterObjs[B]=h,this.browserStorageService.saveSimpleStorage(B,this.commonService.serializeJson(h))}getInitFilterObj(){return{getHasMark:!1,getNotMarked:!1,getNotDone:!1,getResendAnswer:!1,classroomId:0,studentId:0}}constructor(c,h){this.commonService=c,this.browserStorageService=h,this.listFilterObjs={},this.localStorageSlug="profile_student_filter_v2_"}}return(d=E).\u0275fac=function(c){return new(c||d)(t.KVO(l.R),t.KVO(m.z))},d.\u0275prov=t.jDH({token:d,factory:d.\u0275fac,providedIn:"root"}),E})();var ut=r(51913),kt=r(95624),q=r(54460),tt=r(47712),pt=r(15343),L=r(18718),Q=r(66729),V=r(17818),W=r(76975);const X=()=>({"mr-2":!0});function st(d,E){if(1&d&&(t.j41(0,"span"),t.EFF(1," \xa0 "),t.j41(2,"span",20),t.EFF(3),t.k0s()()),2&d){const p=t.XpG();t.R7$(3),t.JRh(p.totalCustomFilter)}}function J(d,E){if(1&d){const p=t.RV6();t.j41(0,"li")(1,"label",21),t.bIt("click",function(h){return t.eBV(p),t.Njj(h.stopPropagation())}),t.EFF(2),t.nI1(3,"mytranslate"),t.j41(4,"div",9)(5,"input",22),t.bIt("change",function(){t.eBV(p);const h=t.XpG();return h.filterObj.getResendAnswer=!h.filterObj.getResendAnswer,t.Njj(h.changeFilter())}),t.k0s()()()()}if(2&d){const p=t.XpG();t.R7$(2),t.SpI(" ",t.bMT(3,2,"lang_student_profile_filter_get_resend_answer")," "),t.R7$(3),t.Y8G("checked",p.filterObj.getResendAnswer)}}let et=(()=>{var d;class E extends o.H{changeFilter(){this.totalCustomFilter=this.studentProfileFilterService.countChecked(this.filterObj),this.studentProfileFilterService.saveFilterObj(this.filterType,this.filterObj),this.changeFilterEvent.emit(this.filterObj)}clearFilter(){this.filterObj=this.studentProfileFilterService.getInitFilterObj(),this.studentProfileFilterService.saveFilterObj(this.filterType,this.filterObj),this.changeFilter()}ngOnInit(){super.ngOnInit(),this.filterObj=this.studentProfileFilterService.getDefaultFilterObj(this.filterType),this.totalCustomFilter=this.studentProfileFilterService.countChecked(this.filterObj)}constructor(c){super(),this.studentProfileFilterService=c,this.filterType="",this.changeFilterEvent=new t.bkB,this.totalCustomFilter=0}}return(d=E).\u0275fac=function(c){return new(c||d)(t.rXU(n))},d.\u0275cmp=t.VBU({type:d,selectors:[["azt-student-profile-filter-menu"]],inputs:{filterType:"filterType"},outputs:{changeFilterEvent:"changeFilterEvent"},features:[t.Vt3],decls:40,vars:26,consts:[["filterMenu","matMenu"],[1,"btn","btn-sm",3,"matMenuTriggerFor"],["name","filter","size","16",3,"ngClass"],[1,"sm:block"],[4,"ngIf"],["xPosition","before"],[1,"dropdown-menu","show","relative","w-48"],[1,"dropdown-content"],["azt-track-service","filter-menu-SVYEFVdq9z","for","getHasMark",1,"dropdown-item","cursor-pointer",3,"click"],[1,"form-check","form-switch","ml-auto"],["id","getHasMark","type","checkbox",1,"show-code","form-check-input","ml-2",3,"change","checked"],["azt-track-service","filter-menu-OF32qNGQY8","for","getNotMarked",1,"dropdown-item","cursor-pointer",3,"click"],["id","getNotMarked","type","checkbox",1,"show-code","form-check-input","ml-2",3,"change","checked"],["azt-track-service","filter-menu-EpBgopx3Iv","for","getNotDone",1,"dropdown-item","cursor-pointer",3,"click"],["id","getNotDone","type","checkbox",1,"show-code","form-check-input","ml-2",3,"change","checked"],[1,"dropdown-divider"],[1,"flex","p-1"],[1,"btn","btn-secondary","py-1","px-2","ml-auto","mr-2"],["azt-track-service","filter-menu-2gPTdI1ODd",3,"click"],["azt-track-service","filter-menu-cGVj55-Aac",1,"btn","btn-danger","py-1","px-2",3,"click"],[1,"py-1","px-2","rounded-full","text-xs","bg-primary","text-white","cursor-pointer","font-medium"],["azt-track-service","filter-menu-FWtx2ole8G","for","getResendAnswer",1,"dropdown-item","cursor-pointer",3,"click"],["id","getResendAnswer","type","checkbox",1,"show-code","form-check-input","ml-2",3,"change","checked"]],template:function(c,h){if(1&c){const B=t.RV6();t.j41(0,"button",1),t.nrm(1,"lucide-icon",2),t.j41(2,"span",3),t.EFF(3),t.nI1(4,"mytranslate"),t.DNE(5,st,4,1,"span",4),t.k0s()(),t.j41(6,"mat-menu",5,0)(8,"div",6)(9,"ul",7)(10,"li")(11,"label",8),t.bIt("click",function(At){return t.eBV(B),t.Njj(At.stopPropagation())}),t.EFF(12),t.nI1(13,"mytranslate"),t.j41(14,"div",9)(15,"input",10),t.bIt("change",function(){return t.eBV(B),h.filterObj.getHasMark=!h.filterObj.getHasMark,t.Njj(h.changeFilter())}),t.k0s()()()(),t.j41(16,"li")(17,"label",11),t.bIt("click",function(At){return t.eBV(B),t.Njj(At.stopPropagation())}),t.EFF(18),t.nI1(19,"mytranslate"),t.j41(20,"div",9)(21,"input",12),t.bIt("change",function(){return t.eBV(B),h.filterObj.getNotMarked=!h.filterObj.getNotMarked,t.Njj(h.changeFilter())}),t.k0s()()()(),t.j41(22,"li")(23,"label",13),t.bIt("click",function(At){return t.eBV(B),t.Njj(At.stopPropagation())}),t.EFF(24),t.nI1(25,"mytranslate"),t.j41(26,"div",9)(27,"input",14),t.bIt("change",function(){return t.eBV(B),h.filterObj.getNotDone=!h.filterObj.getNotDone,t.Njj(h.changeFilter())}),t.k0s()()()(),t.DNE(28,J,6,4,"li",4),t.j41(29,"li"),t.nrm(30,"hr",15),t.k0s(),t.j41(31,"li")(32,"div",16)(33,"button",17),t.EFF(34),t.nI1(35,"mytranslate"),t.k0s(),t.j41(36,"div",18),t.bIt("click",function(At){return t.eBV(B),t.Njj(At.stopPropagation())}),t.j41(37,"button",19),t.bIt("click",function(){return t.eBV(B),t.Njj(h.clearFilter())}),t.EFF(38),t.nI1(39,"mytranslate"),t.k0s()()()()()()()}if(2&c){const B=t.sdS(7);t.Y8G("matMenuTriggerFor",B),t.R7$(),t.Y8G("ngClass",t.lJ4(25,X)),t.R7$(2),t.SpI(" ",t.bMT(4,13,"lang_testbank_tested_list_sort")," "),t.R7$(2),t.Y8G("ngIf",h.totalCustomFilter>0),t.R7$(7),t.SpI(" ",t.bMT(13,15,"lang_student_profile_filter_get_has_mark")," "),t.R7$(3),t.Y8G("checked",h.filterObj.getHasMark),t.R7$(3),t.SpI(" ",t.bMT(19,17,"lang_student_profile_filter_get_not_marked")," "),t.R7$(3),t.Y8G("checked",h.filterObj.getNotMarked),t.R7$(3),t.SpI(" ",t.bMT(25,19,"exam"==h.filterType?"lang_student_profile_filter_get_not_done_exam":"lang_student_profile_filter_get_not_done_homework")," "),t.R7$(3),t.Y8G("checked",h.filterObj.getNotDone),t.R7$(),t.Y8G("ngIf","homework"==h.filterType),t.R7$(6),t.JRh(t.bMT(35,21,"lang_button_close")),t.R7$(4),t.JRh(t.bMT(39,23,"lang_button_delete"))}},dependencies:[q.YU,q.bT,V.kk,V.Cp,pt.WGl,W.wp],encapsulation:2}),E})();const jt=()=>({"text-pending":!0}),vt=d=>({truncate:d}),Tt=()=>({"max-width":"85%"}),rt=()=>({});function wt(d,E){if(1&d&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"mytranslate"),t.nrm(3,"azt-check-mark",17),t.k0s()),2&d){const p=t.XpG(2).$implicit;t.R7$(),t.SpI(" ",t.bMT(2,2,"lang_point"),": "),t.R7$(2),t.Y8G("mark",p.resultMarkObj.point)}}function Pt(d,E){1&d&&(t.j41(0,"span",18),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&d&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"lang_homework_utils_excel_table_export_not_point")," "))}function U(d,E){if(1&d&&(t.qex(0),t.DNE(1,wt,4,4,"span",13)(2,Pt,3,3,"span",16),t.bVm()),2&d){const p=t.XpG().$implicit;t.R7$(),t.Y8G("ngIf",p.resultMarkObj.confirmedAt),t.R7$(),t.Y8G("ngIf",!p.resultMarkObj.confirmedAt)}}function It(d,E){1&d&&(t.j41(0,"span",19),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&d&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"lang_testbank_statistical_not_exem_yet")," "))}function ct(d,E){if(1&d){const p=t.RV6();t.j41(0,"div",7),t.bIt("click",function(){const h=t.eBV(p).$implicit,B=t.XpG();return t.Njj(B.clickToExamObj(h))}),t.j41(1,"div",8),t.nrm(2,"lucide-icon",9),t.k0s(),t.j41(3,"div",10)(4,"p",11),t.EFF(5),t.k0s(),t.j41(6,"div",12),t.DNE(7,U,3,2,"ng-container",13)(8,It,3,3,"span",14),t.k0s(),t.j41(9,"div",15),t.EFF(10),t.nI1(11,"mytranslate"),t.nI1(12,"formatFullDateTimeWithoutSecondByUserUnitPipe"),t.k0s()()()}if(2&d){const p=E.$implicit,c=E.index,h=t.XpG();t.ZvI("clickable zoom-in flex items-center ",c>0?"mt-3":""," pb-2"),t.R7$(2),t.Y8G("ngClass",t.lJ4(17,jt)),t.R7$(2),t.FS9("matTooltip",p.name),t.Y8G("ngClass",t.eq3(18,vt,!h.isMobileDevice))("ngStyle",h.isMobileDevice?t.lJ4(21,rt):t.lJ4(20,Tt)),t.R7$(),t.Lme("",c+1,". ",p.name,""),t.R7$(2),t.Y8G("ngIf",p.resultMarkObj),t.R7$(),t.Y8G("ngIf",!p.resultMarkObj),t.R7$(2),t.Lme("",t.bMT(11,13,"lang_student_profile_utils_list_exam_created_at"),": ",t.bMT(12,15,p.createdAt),"")}}function Z(d,E){1&d&&(t.j41(0,"div",20),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&d&&(t.R7$(),t.JRh(t.bMT(2,1,"lang_list_null")))}function gt(d,E){if(1&d&&t.nrm(0,"azt-loading-effect",25),2&d){const p=t.XpG(2);t.Y8G("currentStatusObj",p.statusObj)}}function Et(d,E){if(1&d){const p=t.RV6();t.j41(0,"div",21),t.DNE(1,gt,1,1,"azt-loading-effect",22),t.j41(2,"button",23),t.nI1(3,"mytranslate"),t.bIt("click",function(){t.eBV(p);const h=t.XpG();return t.Njj(h.getNextExamResultObjs())}),t.nrm(4,"lucide-icon",24),t.k0s()()}if(2&d){const p=t.XpG();t.R7$(),t.Y8G("ngIf",p.statusObj.loading),t.R7$(),t.FS9("matTooltip",t.bMT(3,2,"lang_student_profile_utils_list_exam_tooltip_view"))}}let it=(()=>{var d;class E extends o.H{clickToExamObj(c){this.isTeacher?c.resultMarkObj?.resultId&&this.permissionService.hasMarkPointPermission("exam",c)?this.commonService.myNavigationWithQueryString("/admin/testbank/test-review/"+c.id+"/"+c.resultMarkObj?.userId+"/"+c.resultMarkObj?.studentId+"/"+(c.resultMarkObj?.resultId??0),"?backto="+encodeURIComponent(this.backToLink)):this.commonService.myNavigationWithQueryString("/admin/testbank/exam-results-list/"+(c.categoryId??0)+"/"+c.id+"/0","?backto="+encodeURIComponent(this.backToLink)):this.commonService.myNavigationWithQueryString(c.resultMarkObj?.resultId?"/test/answer-test/"+c.resultMarkObj?.userId+"/0/"+c.hashId+"/"+(c.resultMarkObj?.resultId??0):"/de-thi/"+c.hashId,"?backto="+encodeURIComponent(this.backToLink))}reInitData(){this.examObjs=[],this.examNextPage="",this.nextPageList=[],this.getNextExamResultObjs()}getNextExamResultObjs(){if(this.initStatusObj(),this.isTqbDomain){const c=this.classroomList.map((h,B)=>{if("last_page"===this.nextPageList[B])return(0,e.of)(void 0);const yt=this.buildFilterObj(h.id,h.studentId,this.nextPageList[B]);return this.studentProfileV2Service.apiStudentProfileV2GetExamResultObjsPost(yt)});(0,A.p)(c).subscribe({next:h=>this.handleExamResultResponses(h),error:()=>this.errorStatusObj("lang_cms_error_lost_connect_to_server",!0)})}else{const c=this.buildFilterObj(this.classroomId,this.studentId,this.examNextPage);this.studentProfileV2Service.apiStudentProfileV2GetExamResultObjsPost(c).subscribe({next:h=>{1==h.success?(this.examObjs=this.examObjs.concat(h.data?.objs??[]),this.examNextPage=h.data?.nextPage??"",this.stopStatusObj()):this.errorStatusObj("lang_auto_khong_load_duoc_du_lieu_lop_hoc",!0)},error:()=>this.errorStatusObj("lang_cms_error_lost_connect_to_server",!0)})}}buildFilterObj(c,h,B){const yt=this.studentProfileFilterService.getDefaultFilterObj("exam");return yt.classroomId=c,yt.studentId=h,yt.nextPage=B??"",yt}handleExamResultResponses(c){this.nextPageList=[],c.forEach(h=>{this.examObjs=this.examObjs.concat(h?.data?.objs??[]),this.nextPageList.push(h?.data?.nextPage?h.data?.nextPage??"":"last_page")}),this.successStatusObj()}ngOnInit(){this.getNextExamResultObjs()}constructor(c,h,B,yt){super(),this.studentProfileV2Service=c,this.studentProfileFilterService=h,this.permissionService=B,this.studentService=yt,this.backToLink="",this.isTeacher=!0,this.classroomList=[],this.examObjs=[],this.examNextPage="",this.nextPageList=[]}}return(d=E).\u0275fac=function(c){return new(c||d)(t.rXU(at.m_),t.rXU(n),t.rXU(ut.p),t.rXU(kt.b0))},d.\u0275cmp=t.VBU({type:d,selectors:[["azt-student-profile-list-exams"]],inputs:{classroomId:"classroomId",studentId:"studentId",backToLink:"backToLink",isTeacher:"isTeacher",classroomList:"classroomList"},features:[t.Vt3],decls:9,vars:7,consts:[[1,"flex","items-center","px-5","py-5","sm:py-3","border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"font-medium","text-base","mr-auto"],[3,"changeFilterEvent","filterType"],[1,"p-5"],["azt-track-service","list-exam-pw607HPZy",3,"class","click",4,"ngFor","ngForOf"],["class","text-center mt-3",4,"ngIf"],["class","mt-2 text-center",4,"ngIf"],["azt-track-service","list-exam-pw607HPZy",3,"click"],[1,"file"],["name","file-check","size","48",3,"ngClass"],[1,"ml-4","content-right"],[1,"font-medium",3,"ngClass","ngStyle","matTooltip"],[1,"text-xs","mt-0.5",2,"font-weight","500"],[4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"text-slate-500","text-xs","mt-0.5"],["class","text-warning",4,"ngIf"],[3,"mark"],[1,"text-warning"],[1,"text-danger"],[1,"text-center","mt-3"],[1,"mt-2","text-center"],[3,"currentStatusObj",4,"ngIf"],["azt-track-service","list-exam-wvCfNB667b",1,"",3,"click","matTooltip"],["name","chevron-down","size","20"],[3,"currentStatusObj"]],template:function(c,h){1&c&&(t.j41(0,"div",0)(1,"h2",1),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s(),t.j41(4,"azt-student-profile-filter-menu",2),t.bIt("changeFilterEvent",function(){return h.reInitData()}),t.k0s()(),t.j41(5,"div",3),t.DNE(6,ct,13,22,"div",4)(7,Z,3,3,"div",5)(8,Et,5,4,"div",6),t.k0s()),2&c&&(t.R7$(2),t.JRh(t.bMT(3,5,"lang_student_profile_utils_list_exam_list_submitted")),t.R7$(2),t.Y8G("filterType","exam"),t.R7$(2),t.Y8G("ngForOf",h.examObjs),t.R7$(),t.Y8G("ngIf",0==h.examObjs.length&&!h.examNextPage),t.R7$(),t.Y8G("ngIf",h.examObjs.length>0))},dependencies:[q.YU,q.Sq,q.bT,q.B3,tt.oV,pt.WGl,L.K,Q.D,et,W.wp,W.bH],styles:[".content[_ngcontent-%COMP%]{background-color:#f9f9f9;border-radius:5px}.box-title[_ngcontent-%COMP%]{border:1px solid rgb(233,232,232);background-color:#fff;border-radius:5px}.content-right[_ngcontent-%COMP%]{width:90%;margin-right:3rem}"]}),E})();var dt=r(47426),_t=r(95670),nt=r(4375),ot=r(44233),Ct=r(89163),Dt=r(33887),Y=r(2915),y=r(52811);function $(d,E){1&d&&t.nrm(0,"azt-loading-ui",11)}let S=(()=>{var d;class E extends Dt._{confirmDelete(){this.initStatusObj(),this.waitDestroy(this.studentService.apiStudentRemoveMappingObjGet(this.studentObj.id??0).subscribe(c=>{1==c.success?(this.btnCloseDialog(!0),this.successStatusObj(),this.successStatusObj("lang_auto_xac_nhan_thanh_cong",!0)):(this.btnCloseDialog(!1),this.errorStatusObj(c.message??"",!0))}))}btnCloseDialog(c){this.dialogRef.close(c)}constructor(c,h,B){super(B,h),this.studentService=c,this.dialogRef=h,this.data=B,this.studentObj=B.studentObj,this.classroomObj=B.classroomObj}}return(d=E).\u0275fac=function(c){return new(c||d)(t.rXU(at.b0),t.rXU(Ct.CP,8),t.rXU(Ct.Vh,8))},d.\u0275cmp=t.VBU({type:d,selectors:[["app-delete-parent"]],features:[t.Vt3],decls:25,vars:19,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-3"],[1,"text-base","font-medium","mr-auto"],[1,"text-danger"],[1,"text-danger",3,"matTooltip"],[1,"text-note"],[1,"p-3","flex","justify-end"],["azt-track-service","delete-parent-OCYQzQEUBJ",1,"btn","w-24","btn-secondary","mr-3",3,"click"],["azt-track-service","delete-parent-q0ZQYEQFkD",1,"btn","w-32","btn-primary",3,"click"],["class","mr-1",4,"ngIf"],[1,"mr-1"]],template:function(c,h){1&c&&(t.j41(0,"div",0)(1,"div",1)(2,"azt-mat-dialog-content")(3,"div",2)(4,"p",3),t.EFF(5),t.nI1(6,"mytranslate"),t.j41(7,"b",4),t.EFF(8),t.k0s(),t.EFF(9),t.nI1(10,"mytranslate"),t.j41(11,"span",5),t.EFF(12),t.k0s(),t.EFF(13,"\xa0 "),t.j41(14,"span",6),t.EFF(15),t.nI1(16,"mytranslate"),t.k0s()()()()(),t.j41(17,"div",7)(18,"button",8),t.bIt("click",function(){return h.btnCloseDialog(!1)}),t.EFF(19),t.nI1(20,"mytranslate"),t.k0s(),t.j41(21,"button",9),t.bIt("click",function(){return h.confirmDelete()}),t.DNE(22,$,1,0,"azt-loading-ui",10),t.EFF(23),t.nI1(24,"mytranslate"),t.k0s()()()),2&c&&(t.R7$(5),t.SpI(" ",t.bMT(6,9,"lang_student_utils_delete_parent_respon_first"),"\xa0 "),t.R7$(3),t.JRh(h.studentObj.fullName),t.R7$(),t.SpI(" ",t.bMT(10,11,"lang_student_utils_delete_parent_respon_last"),"\xa0 "),t.R7$(2),t.FS9("matTooltip",h.classroomObj.name),t.R7$(),t.SpI(" ",h.classroomObj.name,""),t.R7$(3),t.SpI("* ",t.bMT(16,13,"lang_student_utils_delete_parent_reques"),""),t.R7$(4),t.SpI(" ",t.bMT(20,15,"lang_cms_common_close_btn")," "),t.R7$(3),t.Y8G("ngIf",h.statusObj.loading),t.R7$(),t.SpI(" ",t.bMT(24,17,"lang_cms_common_confirm_btn")," "))},dependencies:[q.bT,tt.oV,Y.U,y.R,W.wp],encapsulation:2}),E})();var z=r(14999),lt=r(46723),Ot=r(46899),Lt=r(5800);const Vt=d=>({"pb-5":d}),Ht=()=>[],Xt=()=>({" mr-2 text-primary":!0}),Qt=()=>({" mr-2 text-danger":!0}),qt=()=>({" mr-2 text-warning":!0});function te(d,E){if(1&d&&t.nrm(0,"azt-loading-effect",4),2&d){const p=t.XpG();t.Y8G("currentStatusObj",p.statusObj)}}function ee(d,E){if(1&d){const p=t.RV6();t.j41(0,"button",15),t.bIt("click",function(){t.eBV(p);const h=t.XpG(4);return t.Njj(h.editStudentDialog(h.studentObj))}),t.nrm(1,"lucide-icon",16),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s()}2&d&&(t.R7$(),t.Y8G("ngClass",t.lJ4(4,Xt)),t.R7$(),t.SpI(" ",t.bMT(3,2,"lang_button_edit")," "))}function ne(d,E){if(1&d){const p=t.RV6();t.j41(0,"button",17),t.bIt("click",function(){t.eBV(p);const h=t.XpG(4);return t.Njj(h.deleteStudentDialog(h.studentObj))}),t.nrm(1,"lucide-icon",18),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s()}2&d&&(t.R7$(),t.Y8G("ngClass",t.lJ4(4,Qt)),t.R7$(),t.SpI(" ",t.bMT(3,2,"lang_student_profile_utils_account_student_delete_out_class")," "))}function oe(d,E){if(1&d){const p=t.RV6();t.j41(0,"button",19),t.bIt("click",function(){t.eBV(p);const h=t.XpG(4);return t.Njj(h.deleteParentOfStudentDialog(h.studentObj))}),t.nrm(1,"lucide-icon",20),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s()}2&d&&(t.R7$(),t.Y8G("ngClass",t.lJ4(4,qt)),t.R7$(),t.SpI(" ",t.bMT(3,2,"lang_student_profile_utils_account_student_required_verifie")," "))}function ie(d,E){if(1&d&&(t.j41(0,"div",11),t.DNE(1,ee,4,5,"button",12),t.nI1(2,"editPermission"),t.DNE(3,ne,4,5,"button",13),t.nI1(4,"fullPermission"),t.nI1(5,"editPermission"),t.DNE(6,oe,4,5,"button",14),t.nI1(7,"editPermission"),t.k0s()),2&d){const p=t.XpG(3);t.R7$(),t.Y8G("ngIf",t.i5U(2,3,p.classroomObj,"student")),t.R7$(2),t.Y8G("ngIf",t.i5U(4,6,p.classroomObj,"student")||t.i5U(5,9,p.classroomObj,"student")),t.R7$(3),t.Y8G("ngIf",0!=p.studentObj.parentId&&t.i5U(7,12,p.classroomObj,"student"))}}function ae(d,E){if(1&d){const p=t.RV6();t.j41(0,"button",23),t.bIt("click",function(){t.eBV(p);const h=t.XpG(4);return t.Njj(h.deleteStudentDialog(h.studentObj))}),t.nrm(1,"lucide-icon",18),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s()}2&d&&(t.R7$(),t.Y8G("ngClass",t.lJ4(4,Qt)),t.R7$(),t.SpI(" ",t.bMT(3,2,"lang_student_profile_utils_account_student_delete_out_class")," "))}function F(d,E){if(1&d){const p=t.RV6();t.j41(0,"div",11)(1,"button",21),t.bIt("click",function(){t.eBV(p);const h=t.XpG(3);return t.Njj(h.editStudentDialog(h.studentObj))}),t.nrm(2,"lucide-icon",16),t.EFF(3),t.nI1(4,"mytranslate"),t.k0s(),t.DNE(5,ae,4,5,"button",22),t.nI1(6,"fullPermission"),t.nI1(7,"editPermission"),t.k0s()}if(2&d){const p=t.XpG(3);t.R7$(2),t.Y8G("ngClass",t.lJ4(11,Xt)),t.R7$(),t.SpI(" ",t.bMT(4,3,"lang_button_edit")," "),t.R7$(2),t.Y8G("ngIf",t.i5U(6,5,p.classroomObj,"student")||t.i5U(7,8,p.classroomObj,"student"))}}function mt(d,E){if(1&d&&(t.qex(0),t.j41(1,"div",6)(2,"div",7),t.nrm(3,"azt-student-info-box",8),t.k0s(),t.j41(4,"div",9),t.DNE(5,ie,8,15,"div",10),t.nI1(6,"editPermission"),t.DNE(7,F,8,12,"div",10),t.nI1(8,"editPermission"),t.k0s()(),t.bVm()),2&d){let p;const c=t.XpG(2);t.R7$(3),t.Y8G("name",c.studentObj.fullName)("parentFullName",c.studentObj.parentFullName)("parentUserName",c.studentObj.parentUserName)("parentId",c.studentObj.parentId)("parentPhone",c.studentObj.parentPhone)("phone",c.studentObj.phone)("email",c.studentObj.email)("birthday",c.studentObj.birthday)("avatar",c.studentObj.avatar)("gender",c.studentObj.gender)("schoolName",null==c.studentObj.moreInfo?null:c.studentObj.moreInfo.schoolName)("facebookLink",null==c.studentObj.moreInfo?null:c.studentObj.moreInfo.facebookLink)("identificationNumber",c.studentObj.identificationNumber)("hasUser",1==c.studentObj.isVerified)("classrooms",null!==(p=null==c.studentObj.moreInfo?null:c.studentObj.moreInfo.classrooms)&&void 0!==p?p:t.lJ4(24,Ht))("joinedAt",null==c.studentObj.moreInfo?null:c.studentObj.moreInfo.joinedAt),t.R7$(2),t.Y8G("ngIf",c.isTeacher&&0!=c.studentObj.parentId&&t.i5U(6,18,c.classroomObj,"student")),t.R7$(2),t.Y8G("ngIf",c.isTeacher&&0==c.studentObj.parentId&&t.i5U(8,21,c.classroomObj,"student"))}}function P(d,E){1&d&&(t.j41(0,"div",24)(1,"span",25),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s()()),2&d&&(t.R7$(2),t.JRh(t.bMT(3,1,"lang_profile_student_not_found")))}function w(d,E){if(1&d&&t.DNE(0,mt,9,25,"ng-container",5)(1,P,4,3,"ng-template",null,1,t.C5r),2&d){const p=t.sdS(2),c=t.XpG();t.Y8G("ngIf",c.studentObj)("ngIfElse",p)}}let D=(()=>{var d;class E extends o.H{deleteStudentDialog(c){this.sAztDialogService.open(z.d,{data:{studentObj:c,classroomObj:this.classroomObj},restoreFocus:!1,width:"550px"}).afterClosed().subscribe(B=>{B&&this.commonService.myNavigation(this.paramBackToLink)})}editStudentDialog(c){this.sAztDialogService.open(lt.B,{data:{studentObj:c,classroomObj:this.classroomObj},restoreFocus:!1,width:"550px"}).afterClosed().subscribe(B=>{B&&this.reInitComponentEvent.emit(!0)})}deleteParentOfStudentDialog(c){this.sAztDialogService.open(S,{data:{studentObj:c,classroomObj:this.classroomObj},restoreFocus:!1,width:"550px"}).afterClosed().subscribe(B=>{B&&this.reInitComponentEvent.emit(!0)})}ngOnInit(){super.ngOnInit()}constructor(c){super(),this.sAztDialogService=c,this.classroomList=[],this.backToLink="",this.paramBackToLink="",this.isTeacher=!0,this.reInitComponentEvent=new t.bkB}}return(d=E).\u0275fac=function(c){return new(c||d)(t.rXU(Ot.i))},d.\u0275cmp=t.VBU({type:d,selectors:[["azt-detail-account-student"]],inputs:{classroomId:"classroomId",classroomList:"classroomList",backToLink:"backToLink",paramBackToLink:"paramBackToLink",isTeacher:"isTeacher",studentObj:"studentObj",classroomObj:"classroomObj"},outputs:{reInitComponentEvent:"reInitComponentEvent"},features:[t.Vt3],decls:4,vars:5,consts:[["doneLoading",""],["noStudentObj",""],[1,"intro-y","box","px-5","pt-5",3,"ngClass"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[4,"ngIf","ngIfElse"],[1,"grid","grid-cols-12","border-b","border-slate-200/60","dark:border-darkmode-400","pb-5","-mx-5"],[1,"col-span-12","lg:col-span-6","px-5"],[3,"name","parentFullName","parentUserName","parentId","parentPhone","phone","email","birthday","avatar","gender","schoolName","facebookLink","identificationNumber","hasUser","classrooms","joinedAt"],[1,"col-span-12","lg:col-span-6","mt-6","lg:mt-0","px-5","border-l","border-r","border-slate-200/60","dark:border-darkmode-400","border-t","lg:border-t-0","pt-5","lg:pt-0"],["class","intro-x flex flex-col lg:flex-row py-2",4,"ngIf"],[1,"intro-x","flex","flex-col","lg:flex-row","py-2"],["azt-track-service","detail-account-student-rzLFlIWrx","class","p-3 mr-6 flex rounded-md items-center hover:bg-slate-100 dark:hover:bg-darkmode-400",3,"click",4,"ngIf"],["azt-track-service","detail-account-student-zZpuvJmKGS","class","p-3 mr-6 flex rounded-md items-center hover:bg-slate-100 dark:hover:bg-darkmode-400",3,"click",4,"ngIf"],["azt-track-service","detail-account-student-hml3hBaXHE","class","p-3 mr-6 flex rounded-md items-center hover:bg-slate-100 dark:hover:bg-darkmode-400",3,"click",4,"ngIf"],["azt-track-service","detail-account-student-rzLFlIWrx",1,"p-3","mr-6","flex","rounded-md","items-center","hover:bg-slate-100","dark:hover:bg-darkmode-400",3,"click"],["name","pencil","size","18",3,"ngClass"],["azt-track-service","detail-account-student-zZpuvJmKGS",1,"p-3","mr-6","flex","rounded-md","items-center","hover:bg-slate-100","dark:hover:bg-darkmode-400",3,"click"],["name","trash-2","size","18",3,"ngClass"],["azt-track-service","detail-account-student-hml3hBaXHE",1,"p-3","mr-6","flex","rounded-md","items-center","hover:bg-slate-100","dark:hover:bg-darkmode-400",3,"click"],["name","shield-alert","size","18",3,"ngClass"],["azt-track-service","detail-account-student-WgNDrDRXqF",1,"p-3","mr-6","flex","rounded-md","items-center","hover:bg-slate-100","dark:hover:bg-darkmode-400",3,"click"],["azt-track-service","detail-account-student-njjAOAGlF5","class","p-3 mr-6 flex rounded-md items-center hover:bg-slate-100 dark:hover:bg-darkmode-400",3,"click",4,"ngIf"],["azt-track-service","detail-account-student-njjAOAGlF5",1,"p-3","mr-6","flex","rounded-md","items-center","hover:bg-slate-100","dark:hover:bg-darkmode-400",3,"click"],["role","alert",1,"bg-red-100","border","border-red-400","text-red-700","px-4","py-3","rounded","relative","mb-5"],[1,"block","sm:inline"]],template:function(c,h){if(1&c&&(t.j41(0,"div",2),t.DNE(1,te,1,1,"azt-loading-effect",3)(2,w,3,2,"ng-template",null,0,t.C5r),t.k0s()),2&c){const B=t.sdS(3);t.Y8G("ngClass",t.eq3(3,Vt,!h.studentObj)),t.R7$(),t.Y8G("ngIf",h.statusObj.loading)("ngIfElse",B)}},dependencies:[q.YU,q.bT,pt.WGl,L.K,Lt.B,W.wp,W.gC,W.FV],styles:[".truncate[_ngcontent-%COMP%]{width:90%}  .avt-profile .create-avatar-class{width:-webkit-fill-available!important;height:-webkit-fill-available!important}"]}),E})();var ht=r(71703);function Rt(d,E){if(1&d){const p=t.RV6();t.j41(0,"a",24),t.bIt("click",function(){t.eBV(p);const h=t.XpG();return t.Njj(h.showTotalPointDetail())}),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()}2&d&&(t.R7$(),t.SpI("(",t.bMT(2,1,"lang_auto_xem_chi_tiet"),")"))}function Nt(d,E){if(1&d&&(t.j41(0,"div",14),t.EFF(1),t.k0s()),2&d){const p=t.XpG();t.R7$(),t.JRh(p.avgPoint)}}function Ut(d,E){if(1&d&&(t.j41(0,"div",14),t.EFF(1),t.nI1(2,"number"),t.k0s()),2&d){let p;const c=t.XpG();t.R7$(),t.JRh(t.i5U(2,1,(null!==(p=null==c.attendanceObj?null:c.attendanceObj.averageMark)&&void 0!==p?p:0)/c.classroomList.length,"1.2-2"))}}let Wt=(()=>{var d;class E extends o.H{constructor(c,h){super(),this.studentService=c,this.sAztDialogService=h,this.studentId=0,this.selectClassroomId=0,this.isTeacherRole=!0,this.classroomList=[],this.avgPoint=0}showTotalPointDetail(){this.sAztDialogService.open(ht.V,{width:"700px",restoreFocus:!1,data:{student:this.studentObj,isTeacher:this.isTeacherRole}}).afterClosed().subscribe(c=>{this.getInfoAttendance()})}getInfoAttendance(){if(this.initStatusObj(),this.isTqbDomain){const c=this.classroomList.map(h=>this.studentService.apiStudentsStudentIdProfileGet(h.studentId,h.id));(0,A.p)(c).subscribe({next:h=>{h.forEach(B=>{if(!B)return this.errorStatusObj("lang_cms_error_lost_connect_to_server",!0);this.updateAttendanceObj(B)}),this.successStatusObj()},error:()=>{this.errorStatusObj("lang_cms_error_lost_connect_to_server",!0)}})}else this.waitDestroy(this.studentService.apiStudentsStudentIdProfileGet(this.studentId,this.selectClassroomId).subscribe({next:c=>{if(!c)return this.errorStatusObj("lang_cms_error_lost_connect_to_server",!0);this.attendanceObj=c,this.studentObj=c.student,this.avgPoint=this.studentObj?.averageMark??0,this.successStatusObj()},error:()=>{this.errorStatusObj("lang_cms_error_lost_connect_to_server",!0)}}))}updateAttendanceObj(c){this.attendanceObj={averageMark:(this.attendanceObj?.averageMark??0)+(c.student?.averageMark??0),totalAttend:(this.attendanceObj?.totalAttend??0)+(c?.totalAttend??0),totalAbsence:(this.attendanceObj?.totalAbsence??0)+(c?.totalAbsence??0),totalAbsentPermission:(this.attendanceObj?.totalAbsentPermission??0)+(c?.totalAbsentPermission??0),totalAbsentWithoutPermission:(this.attendanceObj?.totalAbsentWithoutPermission??0)+(c?.totalAbsentWithoutPermission??0),totalReceivedBook:(this.attendanceObj?.totalReceivedBook??0)+(c?.totalReceivedBook??0),totalReceivedDoc:(this.attendanceObj?.totalReceivedDoc??0)+(c?.totalReceivedDoc??0)}}ngOnChanges(){this.getInfoAttendance()}ngOnInit(){super.ngOnInit()}}return(d=E).\u0275fac=function(c){return new(c||d)(t.rXU(kt.b0),t.rXU(Ot.i))},d.\u0275cmp=t.VBU({type:d,selectors:[["azt-detail-attendance"]],inputs:{studentId:"studentId",selectClassroomId:"selectClassroomId",isTeacherRole:"isTeacherRole",classroomList:"classroomList"},features:[t.Vt3,t.OA$],decls:58,vars:22,consts:[[1,"detail-attendance"],[1,"grid","grid-cols-12","gap-5"],[1,"col-span-12"],[1,"box","flex","items-center","p-5"],[1,"box-content","mx-auto","text-center"],[1,"btn","btn-sm","btn-primary-soft","p-1"],[1,"w-6","h-6"],["name","star"],[1,"mt-4"],["class","ml-2 link__hover link__color",3,"click",4,"ngIf"],["class","text-2xl text-primary font-medium",4,"ngIf"],[1,"col-span-12","md:col-span-3"],[1,"box","zoom-in","flex","items-center","p-5"],["name","check","size","24"],[1,"text-2xl","text-primary","font-medium"],[1,"btn","btn-sm","btn-secondary-soft","p-1"],["name","power-off","size","24"],[1,"text-2xl","text-secondary","font-medium"],[1,"btn","btn-sm","btn-pending-soft","p-1"],["name","octagon-alert","size","24"],[1,"text-2xl","text-pending","font-medium"],[1,"btn","btn-sm","btn-danger-soft","p-1"],["name","octagon-x","size","24"],[1,"text-2xl","text-danger","font-medium"],[1,"ml-2","link__hover","link__color",3,"click"]],template:function(c,h){1&c&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"button",5)(6,"div",6),t.nrm(7,"lucide-icon",7),t.k0s()(),t.j41(8,"div",8),t.EFF(9),t.nI1(10,"mytranslate"),t.DNE(11,Rt,3,3,"a",9),t.k0s(),t.DNE(12,Nt,2,1,"div",10)(13,Ut,3,4,"div",10),t.k0s()()(),t.j41(14,"div",11)(15,"div",12)(16,"div",4)(17,"button",5)(18,"div",6),t.nrm(19,"lucide-icon",13),t.k0s()(),t.j41(20,"div",8),t.EFF(21),t.nI1(22,"mytranslate"),t.k0s(),t.j41(23,"div",14),t.EFF(24),t.k0s()()()(),t.j41(25,"div",11)(26,"div",12)(27,"div",4)(28,"button",15)(29,"div",6),t.nrm(30,"lucide-icon",16),t.k0s()(),t.j41(31,"div",8),t.EFF(32),t.nI1(33,"mytranslate"),t.k0s(),t.j41(34,"div",17),t.EFF(35),t.k0s()()()(),t.j41(36,"div",11)(37,"div",12)(38,"div",4)(39,"button",18)(40,"div",6),t.nrm(41,"lucide-icon",19),t.k0s()(),t.j41(42,"div",8),t.EFF(43),t.nI1(44,"mytranslate"),t.k0s(),t.j41(45,"div",20),t.EFF(46),t.k0s()()()(),t.j41(47,"div",11)(48,"div",12)(49,"div",4)(50,"button",21)(51,"div",6),t.nrm(52,"lucide-icon",22),t.k0s()(),t.j41(53,"div",8),t.EFF(54),t.nI1(55,"mytranslate"),t.k0s(),t.j41(56,"div",23),t.EFF(57),t.k0s()()()()()()),2&c&&(t.R7$(9),t.SpI(" ",t.bMT(10,12,"lang_business_diem_tong_ket")," "),t.R7$(2),t.Y8G("ngIf",!h.isTqbDomain),t.R7$(),t.Y8G("ngIf",!h.isTqbDomain),t.R7$(),t.Y8G("ngIf",h.isTqbDomain),t.R7$(8),t.JRh(t.bMT(22,14,"lang_student_number_of_sessions_attended")),t.R7$(3),t.JRh(null==h.attendanceObj?null:h.attendanceObj.totalAttend),t.R7$(8),t.JRh(t.bMT(33,16,"lang_student_number_of_sessions_missed")),t.R7$(3),t.JRh(null==h.attendanceObj?null:h.attendanceObj.totalAbsence),t.R7$(8),t.JRh(t.bMT(44,18,"lang_student_number_of_approved_absences")),t.R7$(3),t.JRh(null==h.attendanceObj?null:h.attendanceObj.totalAbsentPermission),t.R7$(8),t.JRh(t.bMT(55,20,"lang_student_number_of_unauthorized_absences")),t.R7$(3),t.JRh(null==h.attendanceObj?null:h.attendanceObj.totalAbsentWithoutPermission))},dependencies:[q.bT,pt.WGl,q.QX,W.wp],encapsulation:2}),E})();var zt=r(10123);function ce(d,E){if(1&d&&(t.j41(0,"tr")(1,"td",10),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.nI1(7,"formatFullDateTimeWithoutSecondByUserUnitPipe"),t.k0s()()),2&d){const p=E.$implicit,c=E.index;t.R7$(2),t.JRh(c+1),t.R7$(2),t.JRh(p.bookName),t.R7$(2),t.JRh(t.bMT(7,3,p.createdAt))}}function _e(d,E){if(1&d&&(t.qex(0),t.DNE(1,ce,8,5,"tr",9),t.bVm()),2&d){const p=t.XpG();t.R7$(),t.Y8G("ngForOf",p.bookDistributionList)}}function me(d,E){1&d&&(t.j41(0,"tr")(1,"td",11),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s()()),2&d&&(t.R7$(2),t.SpI(" ",t.bMT(3,1,"lang_student_profile_not_data_view")," "))}let de=(()=>{var d;class E extends o.H{getInfoBookDistribution(){this.waitDestroy(this.studentService.apiStudentsStudentIdBooksGet(this.studentId).subscribe(c=>{c?(this.bookDistributionList=c.list,this.totalBookDistribution=c.total):this.errorStatusObj("lang_cms_error_lost_connect_to_server",!0)}))}ngOnInit(){super.ngOnInit(),this.getInfoBookDistribution()}constructor(c){super(),this.studentService=c,this.studentId=0,this.bookDistributionList=[],this.totalBookDistribution=0}}return(d=E).\u0275fac=function(c){return new(c||d)(t.rXU(kt.b0))},d.\u0275cmp=t.VBU({type:d,selectors:[["azt-detail-book-distribution"]],inputs:{studentId:"studentId"},features:[t.Vt3],decls:22,vars:14,consts:[["noDistribution",""],[1,"text-right","mt-4"],[1,"font-medium"],[1,"box","mt-2"],["drag-scroll-item","",1,"table","table-bordered",2,"white-space","initial","display","table"],[1,"bg-slate-100","dark:bg-darkmode-400"],[1,"whitespace-nowrap","text-center",2,"width","30px"],[1,"whitespace-nowrap"],[4,"ngIf","ngIfElse"],[4,"ngFor","ngForOf"],[1,"text-center"],["colspan","3",1,"text-center"]],template:function(c,h){if(1&c&&(t.j41(0,"div",1)(1,"span",2),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s()(),t.j41(4,"div",3)(5,"drag-scroll")(6,"table",4)(7,"thead",5)(8,"tr")(9,"th",6),t.EFF(10),t.nI1(11,"mytranslate"),t.k0s(),t.j41(12,"th",7),t.EFF(13),t.nI1(14,"mytranslate"),t.k0s(),t.j41(15,"th",7),t.EFF(16),t.nI1(17,"mytranslate"),t.k0s()()(),t.j41(18,"tbody"),t.DNE(19,_e,2,1,"ng-container",8)(20,me,4,3,"ng-template",null,0,t.C5r),t.k0s()()()()),2&c){const B=t.sdS(21);t.R7$(2),t.SpI(" ",t.bMT(3,6,"lang_student_total")+": "+h.totalBookDistribution," "),t.R7$(8),t.SpI(" ",t.bMT(11,8,"lang_auto_stt")," "),t.R7$(3),t.SpI(" ",t.bMT(14,10,"lang_core_ten_sach")," "),t.R7$(3),t.SpI(" ",t.bMT(17,12,"lang_auto_thoi_gian")," "),t.R7$(3),t.Y8G("ngIf",h.bookDistributionList.length)("ngIfElse",B)}},dependencies:[q.Sq,q.bT,zt.jd,zt.Ew,W.wp,W.bH],encapsulation:2}),E})();var re=r(23047),ue=r(9280),pe=r(9691),j=r(17776),K=r(19258),C=r(10805);const x=d=>({"width.%":d}),O=d=>({"border-none":d}),R=(d,E,p,c)=>({"bg-orange-600":d,"bg-red-600":E,"bg-green-600":p,"bg-blue-600":c});function ft(d,E){if(1&d&&t.nrm(0,"azt-loading-effect",5),2&d){const p=t.XpG();t.Y8G("currentStatusObj",p.statusObj)}}function Ft(d,E){if(1&d&&(t.j41(0,"span",26),t.EFF(1),t.k0s()),2&d){const p=t.XpG(3).$implicit;t.R7$(),t.JRh(p.averageMark)}}function Gt(d,E){if(1&d&&(t.j41(0,"div",24),t.DNE(1,Ft,2,1,"span",25),t.k0s()),2&d){const p=t.XpG(2).$implicit;t.Y8G("ngStyle",t.eq3(2,x,10*p.averageMark)),t.R7$(),t.Y8G("ngIf",p.averageMark&&p.averageMark>1)}}function Bt(d,E){if(1&d&&(t.j41(0,"div",17)(1,"div",18)(2,"span",19),t.EFF(3),t.nI1(4,"mytranslate"),t.k0s(),t.j41(5,"span",20),t.EFF(6,"0"),t.k0s(),t.j41(7,"div",21),t.DNE(8,Gt,2,4,"div",22),t.k0s(),t.j41(9,"span",23),t.EFF(10,"10"),t.k0s()()()),2&d){const p=t.XpG().$implicit;t.R7$(3),t.JRh(t.bMT(4,2,"lang_auto_diem_trung_binh")),t.R7$(5),t.Y8G("ngIf",p.averageMark)}}function Yt(d,E){1&d&&(t.j41(0,"div",27)(1,"span",28),t.nrm(2,"azt-loading-ui"),t.k0s()())}function ge(d,E){1&d&&(t.qex(0),t.j41(1,"div",30)(2,"span",31),t.EFF(3),t.nI1(4,"mytranslate"),t.k0s()(),t.bVm()),2&d&&(t.R7$(3),t.JRh(t.bMT(4,1,"lang_profile_student_not_support_subject")))}function se(d,E){if(1&d&&t.nrm(0,"coazt-student-skill-chapter",40),2&d){const p=t.XpG(3).$implicit,c=t.XpG(2);t.Y8G("levelId",p.levelId)("subjectId",p.subjectId)("userId",c.studentObj.parentId)}}function f(d,E){if(1&d&&(t.j41(0,"span",26),t.EFF(1),t.k0s()),2&d){const p=t.XpG(2).$implicit;t.R7$(),t.JRh(p.averageMark)}}function N(d,E){if(1&d&&(t.j41(0,"div",53),t.DNE(1,f,2,1,"span",25),t.k0s()),2&d){const p=t.XpG().$implicit;t.Y8G("ngClass",t.ziG(3,R,1==p.id,3==p.id,2==p.id,4==p.id))("ngStyle",t.eq3(8,x,10*p.averageMark)),t.R7$(),t.Y8G("ngIf",p.averageMark>1)}}function T(d,E){if(1&d&&(t.j41(0,"div",43)(1,"div",44)(2,"div",45)(3,"h3",46),t.EFF(4),t.nI1(5,"mytranslate"),t.k0s()(),t.j41(6,"div",47)(7,"h3",46),t.EFF(8),t.nI1(9,"mytranslate"),t.j41(10,"b"),t.EFF(11),t.k0s(),t.EFF(12," / "),t.j41(13,"b"),t.EFF(14),t.k0s(),t.EFF(15),t.nI1(16,"mytranslate"),t.k0s()(),t.j41(17,"div",48)(18,"div",49)(19,"span",50),t.EFF(20,"0"),t.k0s(),t.j41(21,"div",51),t.DNE(22,N,2,10,"div",52),t.k0s(),t.j41(23,"span",23),t.EFF(24,"10"),t.k0s()()()()()),2&d){const p=E.$implicit;t.Y8G("ngClass",t.eq3(13,O,E.last)),t.R7$(4),t.SpI(" ",t.bMT(5,7,p.name)," "),t.R7$(4),t.SpI(" ",t.bMT(9,9,"lang_auto_tra_loi_dung"),":\xa0 "),t.R7$(3),t.JRh(p.totalCorrectQuestion),t.R7$(3),t.JRh(p.totalQuestion),t.R7$(),t.SpI(" \xa0",t.bMT(16,11,"azt_lang_sugg_question")," "),t.R7$(7),t.Y8G("ngIf",p.averageMark)}}function b(d,E){if(1&d&&(t.qex(0),t.j41(1,"div",41)(2,"h4",34),t.EFF(3),t.nI1(4,"mytranslate"),t.k0s()(),t.DNE(5,T,25,15,"div",42),t.bVm()),2&d){const p=t.XpG(3).$implicit;t.R7$(3),t.SpI(" ",t.bMT(4,2,"lang_student_profile_result_by_difficulty_level")," "),t.R7$(2),t.Y8G("ngForOf",p.difficultyDataObjs)}}function u(d,E){if(1&d&&(t.DNE(0,se,1,3,"coazt-student-skill-chapter",32),t.j41(1,"div",33)(2,"h4",34),t.EFF(3),t.nI1(4,"mytranslate"),t.k0s()(),t.j41(5,"div",35)(6,"div",36)(7,"div",37),t.nrm(8,"div",38),t.k0s()()(),t.DNE(9,b,6,4,"ng-container",39)),2&d){const p=t.XpG(2).$implicit,c=t.XpG(2);t.Y8G("ngIf",!c.isTqbDomain),t.R7$(3),t.SpI(" ",t.bMT(4,4,"lang_student_profile_exam_point_by_time")," "),t.R7$(5),t.Y8G("chart",p.chart),t.R7$(),t.Y8G("ngIf",p.difficultyDataObjs&&p.difficultyDataObjs.length&&!c.isTqbDomain)}}function M(d,E){if(1&d&&t.DNE(0,ge,5,3,"ng-container",29)(1,u,10,6,"ng-template",null,2,t.C5r),2&d){const p=t.sdS(2),c=t.XpG().$implicit;t.Y8G("ngIf",c.errorGetData)("ngIfElse",p)}}function $t(d,E){if(1&d){const p=t.RV6();t.qex(0),t.j41(1,"mat-expansion-panel",10),t.bIt("opened",function(){const h=t.eBV(p).index,B=t.XpG(2);return t.Njj(B.getStatisticalById(h))}),t.j41(2,"mat-expansion-panel-header",11)(3,"div",12)(4,"div",13)(5,"h3",14),t.EFF(6),t.nI1(7,"mytranslate"),t.nI1(8,"mytranslate"),t.k0s()(),t.DNE(9,Bt,11,4,"div",15),t.k0s()(),t.DNE(10,Yt,3,0,"div",16)(11,M,3,2,"ng-template",null,1,t.C5r),t.k0s(),t.bVm()}if(2&d){const p=E.$implicit,c=t.sdS(12),h=t.XpG(2);t.R7$(6),t.Lme("",t.bMT(7,5,p.subjectName)," ","("+t.bMT(8,7,p.levelName)+")",""),t.R7$(3),t.Y8G("ngIf",!h.isTqbDomain),t.R7$(),t.Y8G("ngIf",p.isLoading)("ngIfElse",c)}}function Jt(d,E){if(1&d&&(t.j41(0,"div",6)(1,"div",7)(2,"mat-accordion",8),t.DNE(3,$t,13,9,"ng-container",9),t.k0s()()()),2&d){const p=t.XpG();t.R7$(3),t.Y8G("ngForOf",p.levelSubjectObjs)}}let he=(()=>{var d;class E extends o.H{getStatisticalById(c){this.studentObj&&this.levelSubjectObjs.length&&this.levelSubjectObjs[c]&&(this.levelSubjectObjs[c].isLoading=!0,this.levelSubjectObjs[c].errorGetData=!1,this.studentService.apiStudentsStudentIdFieldGet(this.studentObj.id,this.levelSubjectObjs[c].levelId??0,this.levelSubjectObjs[c].subjectId??0).subscribe({next:h=>{h?(this.levelSubjectObjs[c].difficultyDataObjs=h.difficulty??[],this.levelSubjectObjs[c].knowledgeDataObjs=h.knowledge??[],this.levelSubjectObjs[c].chart=this.createChart(h.examResults??[]),this.levelSubjectObjs[c].isLoading=!1,this.levelSubjectObjs[c].errorGetData=!1):(this.levelSubjectObjs[c].isLoading=!1,this.levelSubjectObjs[c].errorGetData=!0,this.stopStatusObj())},error:h=>{this.levelSubjectObjs[c].isLoading=!1,this.levelSubjectObjs[c].errorGetData=!0,this.errorStatusObj(h.error.message??"",!0)}}))}createChart(c){let h=this.commonService.myTranslateInstant("lang_auto_Diem")??"",B=[],yt=[];return c.forEach(Ce=>{B.push(Ce.mark??0),yt.push(this.sAztTimeService.formatFullDateTimeWithoutSecondByUserUnit(Ce.createdAt))}),new re.t1({chart:{type:"line",style:{fontFamily:"Arial"}},title:{style:{wordWrap:"break-word","text-align":"center"},text:"",useHTML:!0},colors:["#2361ae"],credits:{enabled:!1},xAxis:{categories:yt},yAxis:{title:{text:h}},series:[{name:h,type:"line",data:B}]})}getDataSubject(){this.studentObj&&(this.initStatusObj(),this.isBusinessDomain?this.studentService.apiStudentsStudentIdAverageLevelSubjectMarksGet(this.studentObj.id).subscribe({next:c=>{this.levelSubjectObjs=c.list??[],this.getStatisticalById(0),this.stopStatusObj()},error:c=>{this.errorStatusObj(c.error.message,!0)}}):this.examPageResultService.apiExamPageResultListStudentProfileByLevelSubjectsGet(this.studentObj.id).subscribe(c=>{1==c.success&&c.data?(this.levelSubjectObjs=c.data.objs??[],this.getStatisticalById(0),this.stopStatusObj()):this.errorStatusObj(c.message??"",!0)}))}ngOnInit(){super.ngOnInit(),this.getDataSubject()}constructor(c,h,B,yt){super(),this.examPageResultService=c,this.studentService=h,this.sAztTimeService=B,this.studentPracticeService=yt,this.backToLink="",this.paramBackToLink="",this.reInitComponentEvent=new t.bkB,this.levelSubjectObjs=[]}}return(d=E).\u0275fac=function(c){return new(c||d)(t.rXU(ue.TE),t.rXU(kt.b0),t.rXU(pe.F),t.rXU(j.Kw))},d.\u0275cmp=t.VBU({type:d,selectors:[["azt-detail-by-subject-student"]],inputs:{classroomId:"classroomId",studentObj:"studentObj",backToLink:"backToLink",paramBackToLink:"paramBackToLink"},outputs:{reInitComponentEvent:"reInitComponentEvent"},features:[t.Vt3],decls:4,vars:2,consts:[["doneLoading",""],["doneLoadingPage",""],["hasData",""],[1,"intro-y"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400","pb-5","-mx-5"],[1,"px-5"],["multi","",1,"example-headers-align"],[4,"ngFor","ngForOf"],[2,"margin-top","0.75rem",3,"opened"],[1,"pad-mobile"],[1,"grid","grid-cols-12","gap-3","gap-mobile","items-center","w-full","justify-between"],[1,"col-span-12","lg:col-span-3"],[1,"font-medium","mr-3"],["class","col-span-12 lg:col-span-9 text-center",4,"ngIf"],["class","flex justify-center mt-3",4,"ngIf","ngIfElse"],[1,"col-span-12","lg:col-span-9","text-center"],[1,"flex","profile-flr","pr-5",2,"align-items","center"],[1,"text-md",2,"vertical-align","middle","margin-right","15px"],[1,"text-md",2,"vertical-align","middle","margin-right","5px"],[1,"w-avg-profile","h-6","bg-gray-200","dark:bg-gray-700"],["class","h-6 text-blue-100 bg-blue-600 text-right p-0.5 leading-none",3,"ngStyle",4,"ngIf"],[1,"text-md",2,"vertical-align","middle","margin-left","5px"],[1,"h-6","text-blue-100","bg-blue-600","text-right","p-0.5","leading-none",3,"ngStyle"],["class","text-md font-medium mr-2 span-baseline-middle",4,"ngIf"],[1,"text-md","font-medium","mr-2","span-baseline-middle"],[1,"flex","justify-center","mt-3"],[1,"w-6","h-6","inline-block"],[4,"ngIf","ngIfElse"],["role","alert",1,"bg-red-100","border","border-red-400","text-red-700","px-4","py-3","rounded","relative"],[1,"block","sm:inline"],[3,"levelId","subjectId","userId",4,"ngIf"],[1,"w-auto","text-left","bg-gray-200",2,"padding","10px 24px","margin-left","-24px","margin-right","-24px"],[1,"font-medium"],[1,"report-box","intro-x","mt-3"],[1,"h-[400px]"],[1,"chart-center"],[3,"chart"],[4,"ngIf"],[3,"levelId","subjectId","userId"],[1,"w-auto","text-left","bg-gray-200","mt-3",2,"padding","10px 24px","margin-left","-24px","margin-right","-24px"],["class","border-b border-slate-200/60 dark:border-darkmode-400 mt-2 py-3",3,"ngClass",4,"ngFor","ngForOf"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400","mt-2","py-3",3,"ngClass"],[1,"grid","grid-cols-12","gap-2"],[1,"col-span-12","md:col-span-5",2,"align-self","center"],[1,"font-normal","mr-3"],[1,"col-span-12","md:col-span-3",2,"align-self","center"],[1,"col-span-12","md:col-span-4",2,"align-self","center"],[1,"flex","profile-flr",2,"align-items","center"],[1,"text-md","margin-web",2,"vertical-align","middle","margin-right","5px"],[1,"w-full","h-6","bg-gray-200","dark:bg-gray-700"],["class","h-6 text-blue-100 text-right p-0.5 leading-none",3,"ngClass","ngStyle",4,"ngIf"],[1,"h-6","text-blue-100","text-right","p-0.5","leading-none",3,"ngClass","ngStyle"]],template:function(c,h){if(1&c&&(t.j41(0,"div",3),t.DNE(1,ft,1,1,"azt-loading-effect",4)(2,Jt,4,1,"ng-template",null,0,t.C5r),t.k0s()),2&c){const B=t.sdS(3);t.R7$(),t.Y8G("ngIf",h.statusObj.loading)("ngIfElse",B)}},dependencies:[q.YU,q.Sq,q.bT,q.B3,K.BS,K.GK,K.Z2,re.S6,L.K,y.R,C.g,W.wp],styles:[".w-avg-profile[_ngcontent-%COMP%]{width:80%}.span-baseline-middle[_ngcontent-%COMP%]{vertical-align:-webkit-baseline-middle!important;vertical-align:-moz-middle-with-baseline!important}.profile-flr[_ngcontent-%COMP%]{float:right;width:100%}.border-none[_ngcontent-%COMP%]{border:none!important}.margin-web[_ngcontent-%COMP%]{margin-left:auto}@media screen and (max-width: 768px){.w-avg-profile[_ngcontent-%COMP%]{width:40%}.profile-flr[_ngcontent-%COMP%]{float:left;width:100%}.dis-none-mobile[_ngcontent-%COMP%]{display:none!important}.gap-mobile[_ngcontent-%COMP%]{gap:.2rem!important}}"]}),E})();function le(d,E){1&d&&(t.j41(0,"div"),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&d&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"lang_core_huong_dan_chon_vao_bang_va_vuot_sang_trai_de_xem_cac_thong_tin_khac")," "))}function fe(d,E){if(1&d&&(t.j41(0,"tr")(1,"td",11),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.nI1(5,"formatFullDateTimeWithoutSecondByUserUnitPipe"),t.k0s(),t.j41(6,"td"),t.EFF(7),t.k0s(),t.j41(8,"td",11)(9,"span",12),t.EFF(10),t.nI1(11,"mytranslate"),t.k0s()()()),2&d){let p;const c=E.$implicit,h=E.index;t.R7$(2),t.JRh(h+1),t.R7$(2),t.JRh(t.bMT(5,4,null!==(p=c.updatedAt)&&void 0!==p?p:c.createdAt)),t.R7$(3),t.JRh(c.month+"/"+c.year),t.R7$(3),t.SpI(" ",t.bMT(11,6,"lang_student_tuition_fee_paid")," ")}}function be(d,E){if(1&d&&(t.qex(0),t.DNE(1,fe,12,8,"tr",10),t.bVm()),2&d){const p=t.XpG();t.R7$(),t.Y8G("ngForOf",p.historyTuitionFeeList)}}function ve(d,E){1&d&&(t.j41(0,"tr")(1,"td",13),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s()()),2&d&&(t.R7$(2),t.SpI(" ",t.bMT(3,1,"lang_student_profile_not_data_view")," "))}let Ie=(()=>{var d;class E extends o.H{getTuitionFree(){this.initStatusObj(),this.waitDestroy(this.paymentService.apiPaymentStudentIdGet(this.studentId).subscribe(c=>{c?this.historyTuitionFeeList=c.histories:this.errorStatusObj("lang_cms_error_lost_connect_to_server",!0)}))}ngOnInit(){super.ngOnInit(),this.getTuitionFree()}constructor(c){super(),this.paymentService=c,this.studentId=0,this.historyTuitionFeeList=[]}}return(d=E).\u0275fac=function(c){return new(c||d)(t.rXU(kt.WG))},d.\u0275cmp=t.VBU({type:d,selectors:[["azt-detail-tuition-fee"]],inputs:{studentId:"studentId"},features:[t.Vt3],decls:23,vars:15,consts:[["noTuitionFee",""],[1,"detail-attendance"],[4,"ngIf"],[1,"mt-4","box"],["drag-scroll-item","",1,"table","table-bordered",2,"white-space","initial","display","table"],[1,"bg-slate-100","dark:bg-darkmode-400"],[1,"whitespace-nowrap","text-center",2,"width","30px"],[1,"whitespace-nowrap"],[1,"whitespace-nowrap","text-center",2,"min-width","150px"],[4,"ngIf","ngIfElse"],[4,"ngFor","ngForOf"],[1,"text-center"],[1,"ml-2","py-0.5","px-2","rounded-full","text-xs","bg-success","text-white","cursor-pointer","font-medium","ng-star-inserted"],["colspan","4",1,"text-center"]],template:function(c,h){if(1&c&&(t.j41(0,"div",1),t.DNE(1,le,3,3,"div",2),t.j41(2,"div",3)(3,"drag-scroll")(4,"table",4)(5,"thead",5)(6,"tr")(7,"th",6),t.EFF(8),t.nI1(9,"mytranslate"),t.k0s(),t.j41(10,"th",7),t.EFF(11),t.nI1(12,"mytranslate"),t.k0s(),t.j41(13,"th",7),t.EFF(14),t.nI1(15,"mytranslate"),t.k0s(),t.j41(16,"th",8),t.EFF(17),t.nI1(18,"mytranslate"),t.k0s()()(),t.j41(19,"tbody"),t.DNE(20,be,2,1,"ng-container",9)(21,ve,4,3,"ng-template",null,0,t.C5r),t.k0s()()()()()),2&c){const B=t.sdS(22);t.R7$(),t.Y8G("ngIf",h.isMobileDevice||h.isMobileWebView),t.R7$(7),t.SpI(" ",t.bMT(9,7,"lang_auto_stt")," "),t.R7$(3),t.SpI(" ",t.bMT(12,9,"lang_student_payment_time")," "),t.R7$(3),t.SpI(" ",t.bMT(15,11,"lang_student_monthly_tuition_fee")," "),t.R7$(3),t.SpI(" ",t.bMT(18,13,"lang_student_status")," "),t.R7$(3),t.Y8G("ngIf",h.historyTuitionFeeList.length)("ngIfElse",B)}},dependencies:[q.Sq,q.bT,zt.jd,zt.Ew,W.wp,W.bH],encapsulation:2}),E})();const Se=()=>({"text-primary":!0});function je(d,E){if(1&d&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"mytranslate"),t.nrm(3,"azt-check-mark",17),t.k0s()),2&d){const p=t.XpG(2).$implicit;t.R7$(),t.SpI(" ",t.bMT(2,2,"lang_point"),": "),t.R7$(2),t.Y8G("mark",p.resultMarkObj.point)}}function ke(d,E){1&d&&(t.j41(0,"span",18),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&d&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"lang_student_profile_not_mark_result")," "))}function xe(d,E){if(1&d&&(t.j41(0,"span"),t.DNE(1,je,4,4,"span",13)(2,ke,3,3,"span",16),t.k0s()),2&d){const p=t.XpG().$implicit;t.R7$(),t.Y8G("ngIf",p.resultMarkObj.confirmedAt),t.R7$(),t.Y8G("ngIf",!p.resultMarkObj.confirmedAt)}}function Te(d,E){1&d&&(t.j41(0,"span",19),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&d&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"lang_student_profile_no_result")," "))}function Oe(d,E){if(1&d&&(t.j41(0,"span",19),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&d){const p=t.XpG().$implicit;t.R7$(),t.Lme("",t.bMT(2,2,"lang_student_profile_resend_answer_required"),": ",p.resendAnswerObj.resendNote,"")}}function Ee(d,E){if(1&d){const p=t.RV6();t.j41(0,"div",7),t.bIt("click",function(){const h=t.eBV(p).$implicit,B=t.XpG();return t.Njj(B.clickToHomeworkObj(h))}),t.j41(1,"div",8),t.nrm(2,"lucide-icon",9),t.k0s(),t.j41(3,"div",10)(4,"p",11),t.EFF(5),t.k0s(),t.j41(6,"div",12),t.DNE(7,xe,3,2,"span",13)(8,Te,3,3,"span",14)(9,Oe,3,4,"span",14),t.k0s(),t.j41(10,"div",15),t.EFF(11),t.nI1(12,"mytranslate"),t.nI1(13,"formatFullDateTimeWithoutSecondByUserUnitPipe"),t.k0s()()()}if(2&d){const p=E.$implicit,c=E.index;t.ZvI("clickable zoom-in flex items-center ",c>0?"mt-5":""," pb-2"),t.R7$(2),t.Y8G("ngClass",t.lJ4(16,Se)),t.R7$(2),t.FS9("matTooltip",p.name),t.R7$(),t.Lme("",c+1,". ",p.name,""),t.R7$(2),t.Y8G("ngIf",p.resultMarkObj),t.R7$(),t.Y8G("ngIf",!p.resultMarkObj&&!p.resendAnswerObj),t.R7$(),t.Y8G("ngIf",!p.resultMarkObj&&p.resendAnswerObj),t.R7$(2),t.Lme("",t.bMT(12,12,"lang_student_profile_utils_homework_answer_created_at"),": ",t.bMT(13,14,p.createdAt),"")}}function ye(d,E){1&d&&(t.j41(0,"div",20),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&d&&(t.R7$(),t.JRh(t.bMT(2,1,"lang_list_null")))}function Re(d,E){if(1&d&&t.nrm(0,"azt-loading-effect",25),2&d){const p=t.XpG(2);t.Y8G("currentStatusObj",p.statusObj)}}function we(d,E){if(1&d){const p=t.RV6();t.j41(0,"div",21),t.DNE(1,Re,1,1,"azt-loading-effect",22),t.j41(2,"button",23),t.nI1(3,"mytranslate"),t.bIt("click",function(){t.eBV(p);const h=t.XpG();return t.Njj(h.getNextHomeworkAnswerObjs())}),t.nrm(4,"lucide-icon",24),t.k0s()()}if(2&d){const p=t.XpG();t.R7$(),t.Y8G("ngIf",p.statusObj.loading),t.R7$(),t.FS9("matTooltip",t.bMT(3,3,"lang_auto_hien_ban_ghi_cu_hon")),t.Y8G("disabled",!p.homeworkNextPage)}}let Fe=(()=>{var d;class E extends o.H{clickToHomeworkObj(c){this.isTeacher?c.resultMarkObj?.resultId&&this.permissionService.hasMarkPointPermission("homework",c)?this.commonService.myNavigationWithQueryString("/admin/homework/switch-mark-exercise/"+c.resultMarkObj?.resultId+"/"+c.hashId+"/"+(this.studentId??0),"?backto="+encodeURIComponent(this.backToLink)):this.commonService.myNavigationWithQueryString("/admin/testbank/homework-results-list/"+(c.classroomId??0)+"/"+c.id+"/"+c.hashId,"?backto="+encodeURIComponent(this.backToLink)):this.commonService.myNavigationWithQueryString(c.resultMarkObj?.resultId?"/homework/switch-view-homework/"+c.resultMarkObj?.resultId+"/"+c.hashId:"/bai-tap/"+c.hashId,"?backto="+encodeURIComponent(this.backToLink))}reInitData(){this.homeworkObjs=[],this.homeworkNextPage="",this.getNextHomeworkAnswerObjs()}getNextHomeworkAnswerObjs(){this.initStatusObj();var c=this.studentProfileFilterService.getDefaultFilterObj("homework");c.classroomId=this.classroomId,c.studentId=this.studentId,c.nextPage=this.homeworkNextPage,this.studentProfileV2Service.apiStudentProfileV2GetHomeworkAnswerObjsPost(c).subscribe(h=>{1==h.success?(this.homeworkObjs=this.homeworkObjs.concat(h.data?.objs??[]),this.homeworkNextPage=h.data?.nextPage??"",this.stopStatusObj()):this.errorStatusObj("lang_auto_khong_load_duoc_du_lieu_lop_hoc",!0)})}ngOnInit(){this.getNextHomeworkAnswerObjs()}constructor(c,h,B){super(),this.studentProfileV2Service=c,this.studentProfileFilterService=h,this.permissionService=B,this.isTeacher=!0,this.backToLink="",this.homeworkNextPage="",this.homeworkObjs=[]}}return(d=E).\u0275fac=function(c){return new(c||d)(t.rXU(at.m_),t.rXU(n),t.rXU(ut.p))},d.\u0275cmp=t.VBU({type:d,selectors:[["azt-student-profile-list-homeworks"]],inputs:{classroomId:"classroomId",studentId:"studentId",isTeacher:"isTeacher",backToLink:"backToLink"},features:[t.Vt3],decls:9,vars:7,consts:[[1,"flex","items-center","px-5","py-5","sm:py-3","border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"font-medium","text-base","mr-auto"],[3,"changeFilterEvent","filterType"],[1,"p-5"],["azt-track-service","homework-answer-Ksjf2TyzWB",3,"class","click",4,"ngFor","ngForOf"],["class","text-center mt-3",4,"ngIf"],["class","mt-2 text-center",4,"ngIf"],["azt-track-service","homework-answer-Ksjf2TyzWB",3,"click"],[1,"file"],["name","file-text","size","48",3,"ngClass"],[1,"ml-4","content-right"],[1,"truncate","font-medium",2,"max-width","85%",3,"matTooltip"],[1,"text-xs","mt-0.5",2,"font-weight","500"],[4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"text-slate-500","text-xs","mt-0.5"],["class","text-warning",4,"ngIf"],[3,"mark"],[1,"text-warning"],[1,"text-danger"],[1,"text-center","mt-3"],[1,"mt-2","text-center"],[3,"currentStatusObj",4,"ngIf"],["azt-track-service","homework-answer-MWO-mgLYZ_",1,"",3,"click","matTooltip","disabled"],["name","chevron-down","size","20"],[3,"currentStatusObj"]],template:function(c,h){1&c&&(t.j41(0,"div",0)(1,"h2",1),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s(),t.j41(4,"azt-student-profile-filter-menu",2),t.bIt("changeFilterEvent",function(){return h.reInitData()}),t.k0s()(),t.j41(5,"div",3),t.DNE(6,Ee,14,17,"div",4)(7,ye,3,3,"div",5)(8,we,5,5,"div",6),t.k0s()),2&c&&(t.R7$(2),t.JRh(t.bMT(3,5,"lang_student_profile_utils_homework_answer_list_submitted")),t.R7$(2),t.Y8G("filterType","homework"),t.R7$(2),t.Y8G("ngForOf",h.homeworkObjs),t.R7$(),t.Y8G("ngIf",0==h.homeworkObjs.length&&!h.homeworkNextPage),t.R7$(),t.Y8G("ngIf",h.homeworkObjs.length>0&&h.homeworkNextPage))},dependencies:[q.YU,q.Sq,q.bT,tt.oV,pt.WGl,L.K,Q.D,et,W.wp,W.bH],styles:[".content[_ngcontent-%COMP%]{background-color:#f9f9f9;border-radius:5px}.box-title[_ngcontent-%COMP%]{border:1px solid rgb(233,232,232);background-color:#fff;border-radius:5px}.content-right[_ngcontent-%COMP%]{width:90%;margin-right:3rem}"]}),E})();var De=r(43166);function Pe(d,E){if(1&d&&t.nrm(0,"azt-loading-effect",5),2&d){const p=t.XpG();t.Y8G("currentStatusObj",p.statusObj)}}function Me(d,E){if(1&d&&(t.j41(0,"mat-option",26),t.EFF(1),t.k0s()),2&d){const p=E.$implicit;t.Y8G("value",p.id+"-"+p.studentId),t.R7$(),t.SpI(" ",p.name," ")}}function ze(d,E){if(1&d){const p=t.RV6();t.j41(0,"div",20)(1,"mat-form-field",21)(2,"mat-select",22,3),t.bIt("selectionChange",function(h){t.eBV(p);const B=t.XpG(2);return t.Njj(B.selectedClassroom(h))}),t.j41(4,"mat-option"),t.nrm(5,"ngx-mat-select-search",23),t.nI1(6,"mytranslate"),t.nI1(7,"mytranslate"),t.k0s(),t.j41(8,"mat-option",24),t.EFF(9),t.nI1(10,"mytranslate"),t.k0s(),t.DNE(11,Me,2,2,"mat-option",25),t.k0s()()()}if(2&d){const p=t.sdS(3),c=t.XpG(2);t.R7$(2),t.Y8G("formControl",c.select),t.R7$(3),t.FS9("placeholderLabel",t.bMT(6,8,"lang_bot_common_search_by_name")),t.FS9("noEntriesFoundLabel",t.bMT(7,10,"lang_bot_common_search_not_found")),t.Y8G("formControl",p.searchControl),t.R7$(3),t.Y8G("value","")("disabled",!0),t.R7$(),t.SpI("---",t.bMT(10,12,"lang_auto_chon_lop"),"---"),t.R7$(2),t.Y8G("ngForOf",p.filter(c.classroomList,"name"))}}function Ge(d,E){if(1&d&&(t.j41(0,"div",27)(1,"p",18),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s(),t.nrm(4,"azt-detail-attendance",28),t.k0s()),2&d){const p=t.XpG(2);t.R7$(2),t.JRh(t.bMT(3,5,"lang_student_attendance_point_info")),t.R7$(2),t.Y8G("studentId",p.studentId)("isTeacherRole",p.isTeacherDashboard)("selectClassroomId",p.classroomId)("classroomList",p.classroomList)}}function $e(d,E){if(1&d&&(t.j41(0,"div",27)(1,"p",18),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s(),t.nrm(4,"azt-detail-tuition-fee",29),t.k0s()),2&d){const p=t.XpG(2);t.R7$(2),t.JRh(t.bMT(3,2,"lang_student_tuition_fee_info")),t.R7$(2),t.Y8G("studentId",p.studentId)}}function Ne(d,E){if(1&d&&(t.j41(0,"div",27)(1,"p",18),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s(),t.nrm(4,"azt-detail-book-distribution",29),t.k0s()),2&d){const p=t.XpG(2);t.R7$(2),t.JRh(t.bMT(3,2,"lang_student_book_distribution_info")),t.R7$(2),t.Y8G("studentId",p.studentId)}}function Ae(d,E){if(1&d){const p=t.RV6();t.j41(0,"div",6)(1,"div",7)(2,"h3",8),t.EFF(3),t.nI1(4,"mytranslate"),t.k0s(),t.DNE(5,ze,12,14,"div",9),t.k0s(),t.j41(6,"div",10)(7,"azt-detail-account-student",11),t.bIt("reInitComponentEvent",function(){t.eBV(p);const h=t.XpG();return t.Njj(h.reInitOtherComponent())}),t.k0s(),t.j41(8,"div",12)(9,"div",13),t.nrm(10,"azt-student-profile-list-exams",14,1),t.k0s(),t.j41(12,"div",13),t.nrm(13,"azt-student-profile-list-homeworks",15,2),t.k0s()(),t.DNE(15,Ge,5,7,"div",16)(16,$e,5,4,"div",16)(17,Ne,5,4,"div",16),t.j41(18,"div",17)(19,"p",18),t.EFF(20),t.nI1(21,"mytranslate"),t.k0s(),t.j41(22,"azt-detail-by-subject-student",19),t.bIt("reInitComponentEvent",function(){t.eBV(p);const h=t.XpG();return t.Njj(h.reInitOtherComponent())}),t.k0s()()()()}if(2&d){const p=t.XpG();t.R7$(3),t.SpI(" ",t.bMT(4,26,"lang_student_classroom_profile_student")," "),t.R7$(2),t.Y8G("ngIf",!p.isTqbDomain),t.R7$(2),t.Y8G("studentObj",p.studentObj)("classroomObj",p.classroomObj)("classroomList",p.classroomList)("classroomId",p.classroomId)("backToLink",p.backToLink)("paramBackToLink",p.paramBackToLink)("isTeacher",p.isTeacherDashboard),t.R7$(3),t.Y8G("studentId",p.studentId)("isTeacher",p.isTeacherDashboard)("classroomId",p.classroomId)("backToLink",p.backToLink)("classroomList",p.classroomList),t.R7$(3),t.Y8G("studentId",p.studentId)("isTeacher",p.isTeacherDashboard)("classroomId",p.classroomId)("backToLink",p.backToLink),t.R7$(2),t.Y8G("ngIf",p.isBusinessDomain),t.R7$(),t.Y8G("ngIf",p.isBusinessDomain),t.R7$(),t.Y8G("ngIf",p.isBusinessDomain),t.R7$(3),t.JRh(t.bMT(21,28,"lang_student_academic_results_report")),t.R7$(2),t.Y8G("studentObj",p.studentObj)("classroomId",p.classroomId)("backToLink",p.backToLink)("paramBackToLink",p.paramBackToLink)}}let Le=(()=>{var d;class E extends o.H{reInitOtherComponent(c){this.listExam?.reInitData(),this.listHomework?.reInitData(),c&&this.getData()}selectedClassroom(c){let h=c.value.split("-")[0],B=c.value.split("-")[1],yt=this.commonService.getMyQueryParam("backTo");this.myNavigationWithQueryString((this.isTeacherDashboard?"/admin":"")+"/student/profile-student/"+h+"/"+B,yt?"?backTo="+encodeURIComponent(yt):""),this.reInitOtherComponent()}getData(){this.studentProfileV2Service.apiStudentProfileV2GetObjPost({classroomId:this.classroomId,studentId:this.studentId,getHasMark:!0,getNotMarked:!0,getNotDone:!0,getResendAnswer:!0}).subscribe(h=>{1==h.success?(h.data?.studentObj&&h.data?.classroomObj&&h.data.classroomObj.permissionObj&&(this.studentObj=h.data.studentObj,this.classroomObj=h.data.classroomObj),this.stopStatusObj()):this.errorStatusObj("lang_auto_khong_load_duoc_du_lieu_lop_hoc",!0)})}ngOnInit(){super.ngOnInit(),this.initStatusObj(),this.getData()}constructor(c){super(),this.studentProfileV2Service=c,this.select=new g.MJ("",{nonNullable:!0}),this.classroomId=0,this.studentId=0,this.backToLink="",this.paramBackToLink="",this.classroomList=[],this.isTeacherDashboard=!0}}return(d=E).\u0275fac=function(c){return new(c||d)(t.rXU(at.m_))},d.\u0275cmp=t.VBU({type:d,selectors:[["azt-student-profile"]],viewQuery:function(c,h){if(1&c&&(t.GBs(it,5),t.GBs(it,5)),2&c){let B;t.mGM(B=t.lsd())&&(h.listExam=B.first),t.mGM(B=t.lsd())&&(h.listHomework=B.first)}},inputs:{select:"select",classroomId:"classroomId",studentId:"studentId",backToLink:"backToLink",paramBackToLink:"paramBackToLink",classroomList:"classroomList",isTeacherDashboard:"isTeacherDashboard"},features:[t.Vt3],decls:3,vars:2,consts:[["doneLoading",""],["listExam",""],["listHomework",""],["searchInListClassroom","searchInList"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],["id","profileStudent",1,"grid","grid-cols-12","gap-6","mt-5"],[1,"col-span-12","flex","items-center","mb-3","flex-wrap"],[1,"text-xl","font-medium"],["class","ml-5 box","style","font-size: 12px",4,"ngIf"],[1,"col-span-12","lg:col-span-12","2xl:col-span-12"],[3,"reInitComponentEvent","studentObj","classroomObj","classroomList","classroomId","backToLink","paramBackToLink","isTeacher"],[1,"grid","grid-cols-12","gap-6","mt-5"],[1,"intro-y","box","col-span-12","lg:col-span-6"],[3,"studentId","isTeacher","classroomId","backToLink","classroomList"],[3,"studentId","isTeacher","classroomId","backToLink"],["class","mt-5",4,"ngIf"],[1,"mt-4"],[1,"mb-3","text-base","font-medium"],[3,"reInitComponentEvent","studentObj","classroomId","backToLink","paramBackToLink"],[1,"ml-5","box",2,"font-size","12px"],["appearance","outline"],["searchInList","","name","classroom",3,"selectionChange","formControl"],[3,"formControl","placeholderLabel","noEntriesFoundLabel"],[3,"value","disabled"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"mt-5"],[3,"studentId","isTeacherRole","selectClassroomId","classroomList"],[3,"studentId"]],template:function(c,h){if(1&c&&t.DNE(0,Pe,1,1,"azt-loading-effect",4)(1,Ae,23,30,"ng-template",null,0,t.C5r),2&c){const B=t.sdS(2);t.Y8G("ngIf",h.statusObj.loading)("ngIfElse",B)}},dependencies:[q.Sq,q.bT,dt.wT,_t.rl,nt.VO,g.BC,g.l_,ot.U9,L.K,D,Wt,de,he,Ie,Fe,it,De.x,W.wp],encapsulation:2}),E})()}}]);