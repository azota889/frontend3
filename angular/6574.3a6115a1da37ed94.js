"use strict";(self.webpackChunkBalacoClient=self.webpackChunkBalacoClient||[]).push([[6574],{35048:(h,m,s)=>{s.d(m,{w:()=>$});var t=s(26860),_=s(10936),u=s(59640),c=s(27208),d=s(68774),p=s(31216),i=s(54460),g=s(47712),S=s(18718),f=s(2915),C=s(69135),O=s(32099),b=s(73437);function v(e,l){if(1&e&&t.nrm(0,"azt-loading-effect",7),2&e){const n=t.XpG();t.Y8G("currentStatusObj",n.statusObj)}}function D(e,l){if(1&e&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&e){const n=t.XpG(3);t.R7$(1),t.JRh(t.bMT(2,1,"lang_auto_da_chon")+": "+n.totalStudentsSelected)}}function E(e,l){if(1&e&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&e){const n=t.XpG(3);t.R7$(1),t.JRh(n.data.classroomName+(n.totalStudentsSelected?" ("+t.bMT(2,1,"lang_auto_da_chon")+": "+n.totalStudentsSelected+")":""))}}function I(e,l){}function T(e,l){if(1&e&&(t.j41(0,"div")(1,"azt-mat-dialog-content",22),t.DNE(2,I,0,0,"ng-template",23),t.k0s()()),2&e){t.XpG(3);const n=t.sdS(8);t.R7$(1),t.Y8G("defaultHeight",40),t.R7$(1),t.Y8G("ngTemplateOutlet",n)}}function x(e,l){}function j(e,l){if(1&e&&(t.j41(0,"div"),t.DNE(1,x,0,0,"ng-template",23),t.k0s()),2&e){t.XpG(3);const n=t.sdS(8);t.R7$(1),t.Y8G("ngTemplateOutlet",n)}}const A=function(e,l){return{"dark:bg-darkmode-400 bg-slate-100":e,"border-b border-slate-200/60 dark:border-darkmode-400":l}};function z(e,l){if(1&e){const n=t.RV6();t.qex(0),t.j41(1,"div",10)(2,"div",11),t.DNE(3,D,3,3,"span",12),t.DNE(4,E,3,3,"span",12),t.j41(5,"div",13)(6,"azt-search-box",14),t.bIt("onSearch",function(o){t.eBV(n);const r=t.XpG(2);return t.Njj(r.onSearchBox(o.searchObj))}),t.nI1(7,"mytranslate"),t.k0s()()(),t.j41(8,"div",15)(9,"div",16)(10,"input",17),t.bIt("change",function(){t.eBV(n);const o=t.XpG(2);return t.Njj(o.selectAllStudentOfClass())}),t.k0s(),t.j41(11,"label",18),t.EFF(12),t.nI1(13,"mytranslate"),t.k0s()(),t.j41(14,"div",19)(15,"input",20),t.bIt("change",function(){t.eBV(n);const o=t.XpG(2);return t.Njj(o.calculateFormData())}),t.k0s(),t.j41(16,"label",21),t.EFF(17),t.nI1(18,"mytranslate"),t.k0s()()()(),t.DNE(19,T,3,2,"div",12),t.DNE(20,j,2,1,"div",12),t.bVm()}if(2&e){const n=t.XpG(2);t.R7$(1),t.Y8G("ngClass",t.l_i(18,A,n.isDialog,!n.isDialog)),t.R7$(2),t.Y8G("ngIf",!n.isDialog),t.R7$(1),t.Y8G("ngIf",n.isDialog),t.R7$(2),t.Y8G("isServerSearch",!1)("styleInput","form-control-sm ")("placeholder",t.bMT(7,12,"lang_student_classroom_list_detail_search_name_student")),t.R7$(4),t.Y8G("formControl",n.selectAllFormControl),t.R7$(2),t.SpI(" ",t.bMT(13,14,n.selectAllFormControl.value?"lang_remove_all":"lang_select_all")," "),t.R7$(3),t.Y8G("formControl",n.showCheckedFormControl),t.R7$(2),t.SpI(" ",t.bMT(18,16,"lang_testbank_selected_students")," "),t.R7$(2),t.Y8G("ngIf",n.isDialog),t.R7$(1),t.Y8G("ngIf",!n.isDialog)}}function k(e,l){1&e&&(t.j41(0,"div",24)(1,"span"),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s()()),2&e&&(t.R7$(2),t.JRh(t.bMT(3,1,"lang_core_class_has_no_student")))}function R(e,l){if(1&e&&(t.DNE(0,z,21,21,"ng-container",8),t.DNE(1,k,4,3,"ng-template",null,9,t.C5r)),2&e){const n=t.sdS(2),a=t.XpG();t.Y8G("ngIf",a.studentObjs.length>0)("ngIfElse",n)}}function F(e,l){if(1&e){const n=t.RV6();t.j41(0,"div",25)(1,"button",26),t.bIt("click",function(){t.eBV(n);const o=t.XpG();return t.Njj(o.btnCloseDialog())}),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s()()}2&e&&(t.R7$(2),t.SpI(" ",t.bMT(3,1,"lang_cms_common_ok")," "))}function M(e,l){1&e&&(t.qex(0),t.j41(1,"div",24)(2,"span",28),t.EFF(3),t.nI1(4,"mytranslate"),t.k0s()(),t.bVm()),2&e&&(t.R7$(3),t.JRh(t.bMT(4,1,"lang_testbank_no_students_selected")))}function y(e,l){if(1&e){const n=t.RV6();t.j41(0,"div",33)(1,"div",34)(2,"input",35),t.bIt("change",function(){t.eBV(n);const o=t.XpG(4);return t.Njj(o.calculateFormData())}),t.k0s(),t.j41(3,"label",36,37),t.nI1(5,"mytranslate"),t.EFF(6),t.nI1(7,"mytranslate"),t.k0s()()()}if(2&e){const n=t.sdS(4),a=t.XpG().$implicit;t.R7$(2),t.FS9("id","azt-checkbox-student-"+a.id),t.Y8G("formControl",a.isChecked),t.R7$(1),t.FS9("for","azt-checkbox-student-"+a.id),t.Y8G("matTooltip",t.bMT(5,8,a.fullName))("isDisabledTooltip",!1)("matTooltipDisabled",n.isDisabled)("matTooltipShowDelay",500),t.R7$(3),t.SpI(" ",t.bMT(7,10,a.fullName)," ")}}function G(e,l){if(1&e&&(t.qex(0),t.DNE(1,y,8,12,"div",32),t.bVm()),2&e){const n=l.$implicit;t.R7$(1),t.Y8G("ngIf",n.isShowStudent)}}function B(e,l){1&e&&(t.j41(0,"div",24),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&e&&(t.R7$(1),t.SpI(" ",t.bMT(2,1,"lang_student_classroom_list_detail_not_student")," "))}function N(e,l){if(1&e&&(t.j41(0,"div",29),t.DNE(1,G,2,1,"ng-container",30),t.k0s(),t.DNE(2,B,3,3,"div",31)),2&e){const n=t.XpG(2);t.R7$(1),t.Y8G("ngForOf",n.studentObjs),t.R7$(1),t.Y8G("ngIf",0==n.totalStudentsShow)}}function P(e,l){if(1&e&&(t.DNE(0,M,5,3,"ng-container",8),t.DNE(1,N,3,2,"ng-template",null,27,t.C5r)),2&e){const n=t.sdS(2),a=t.XpG();t.Y8G("ngIf",a.totalStudentsSelected<=0&&a.showCheckedFormControl.value)("ngIfElse",n)}}let $=(()=>{var e;class l extends u.H{resetAll(){this.selectAllFormControl.reset(),this.showCheckedFormControl.reset(),this.selectAllStudentOfClass()}btnCloseDialog(){if(this.studentObjs.length<=0)return this.closeBox.emit();let a={classroomId:this.data.classroomId,classroomName:this.data.classroomName,studentIdsSelected:this.studentObjs.filter(o=>o.isChecked.value).map(o=>o.id)};this.closeBox.emit(a)}onSearchBox(a){this.searchContentObj=a,this.calculateFormData()}selectAllStudentOfClass(){this.studentObjs.map(a=>a.isChecked.setValue(this.selectAllFormControl.value)),this.calculateFormData()}calculateFormData(){let a=this.commonService.convertVietnameseToEnglish(this.searchContentObj.searchContent).toLowerCase().trim();this.studentObjs.forEach(o=>{const r=this.commonService.convertVietnameseToEnglish(o.fullName??"").toLowerCase().trim();let w=""==a||r.includes(a);o.isShowStudent=(!this.showCheckedFormControl.value||o.isChecked.value)&&w}),this.totalStudentsSelected=this.studentObjs.filter(o=>o.isChecked.value).length,this.selectAllFormControl.setValue(this.totalStudentsSelected==this.studentObjs.length),this.totalStudentsShow=this.studentObjs.filter(o=>o.isShowStudent).length,this.isDialog||this.btnCloseDialog()}getData(){this.initStatusObj(),this.waitDestroy(this.studentProfileV2Service.apiStudentProfileV2GetObjsByClassroomIdGet(this.data.classroomId).subscribe(a=>{if(!a.success)return this.errorStatusObj(a.message,!0);let o=a.data?.studentObjs??[];o=0==a.data?.classroomObj.sortType?this.sortService.sortFirstNameStudents(this.commonService.myClone(o)??[]):this.sortService.sortArrayByMultipleObjectKeyAsc(this.commonService.myClone(o)??[],"pos","id"),this.initFormData(o),this.stopStatusObj()}))}initFormData(a){this.studentObjs=a.map(o=>({...o,isShowStudent:!0,isChecked:new _.MJ(this.data.studentIdsSelected.includes(o.id),{nonNullable:!0})})),this.calculateFormData()}ngOnInit(){this.getData()}constructor(a,o){super(),this.sortService=a,this.studentProfileV2Service=o,this.selectAllFormControl=new _.MJ(!1,{nonNullable:!0}),this.showCheckedFormControl=new _.MJ(!1,{nonNullable:!0}),this.studentObjs=[],this.totalStudentsSelected=0,this.totalStudentsShow=0,this.searchContentObj=new c.Z,this.isDialog=!0,this.closeBox=new t.bkB}}return(e=l).\u0275fac=function(a){return new(a||e)(t.rXU(d.g),t.rXU(p.m_))},e.\u0275cmp=t.VBU({type:e,selectors:[["azt-select-student"]],inputs:{isDialog:"isDialog",data:"data"},outputs:{closeBox:"closeBox"},features:[t.Vt3],decls:9,vars:3,consts:[["id","selectStudent",1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-0"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],["doneLoading",""],["class","p-3 text-right",4,"ngIf"],["templateSelectStudent",""],[3,"currentStatusObj"],[4,"ngIf","ngIfElse"],["emptyStudents",""],[1,"p-3","flex","flex-col","sm:flex-row","sm:h-auto","sm:items-center",3,"ngClass"],[1,"font-medium","mr-auto"],[4,"ngIf"],[1,"w-full","relative","flex","items-center","mt-2"],[3,"isServerSearch","styleInput","placeholder","onSearch"],[1,"flex","items-center","mt-2","sm:mt-0"],[1,"form-check","mr-3"],["id","selected-all","type","checkbox",1,"form-check-input",3,"formControl","change"],["for","selected-all",1,"form-check-label"],[1,"form-check"],["id","show-student-checked","type","checkbox",1,"form-check-input",3,"formControl","change"],["for","show-student-checked",1,"form-check-label"],[3,"defaultHeight"],[3,"ngTemplateOutlet"],[1,"h-full","flex","items-center","justify-center","p-5"],[1,"p-3","text-right"],["azt-track-service","azt-dialog-warning-3FIn9IaXN",1,"btn","w-24","btn-primary",3,"click"],["checkedBox",""],[1,"mx-auto"],[1,"p-3","grid","grid-cols-12","gap-3"],[4,"ngFor","ngForOf"],["class","h-full flex items-center justify-center p-5",4,"ngIf"],["class","col-span-12 md:col-span-4 mt-2",4,"ngIf"],[1,"col-span-12","md:col-span-4","mt-2"],[1,"azt-checkbox-item"],["type","checkbox",1,"form-check-input",3,"id","formControl","change"],[1,"form-check-label","truncate",2,"vertical-align","middle",3,"matTooltip","isDisabledTooltip","matTooltipDisabled","matTooltipShowDelay","for"],["c","isDisabled"]],template:function(a,o){if(1&a&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2),t.DNE(3,v,1,1,"azt-loading-effect",3),t.DNE(4,R,3,2,"ng-template",null,4,t.C5r),t.k0s()(),t.DNE(6,F,4,3,"div",5),t.k0s(),t.DNE(7,P,3,2,"ng-template",null,6,t.C5r)),2&a){const r=t.sdS(5);t.R7$(3),t.Y8G("ngIf",o.statusObj.loading)("ngIfElse",r),t.R7$(3),t.Y8G("ngIf",o.isDialog)}},dependencies:[i.YU,i.Sq,i.bT,i.T3,g.oV,_.Zm,_.BC,_.l_,S.K,f.U,C.f,O.W,b.wp],encapsulation:2}),l})()},15485:(h,m,s)=>{s.d(m,{l:()=>u});var t=s(71217),_=s(26860);let u=(()=>{var c;class d{constructor(){this.hasDataChanged=new t.t(!1),this.currentMessage=this.hasDataChanged.asObservable()}changeStatus(i){this.hasDataChanged.next(i)}}return(c=d).\u0275fac=function(i){return new(i||c)},c.\u0275prov=_.jDH({token:c,factory:c.\u0275fac,providedIn:"root"}),d})()}}]);