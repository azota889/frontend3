"use strict";(self.webpackChunkBalacoClient=self.webpackChunkBalacoClient||[]).push([[2892],{88135:(Q,T,a)=>{a.d(T,{Y:()=>A});var t=a(29023),r=a(56223),z=a(73445),M=a(23680),e=a(19347),o=a(44683),l=a(13217),d=a(72164),m=a(76359),v=a(84003),I=a(47180),b=a(19743),n=a(65879),k=a(59467),B=a(94690),S=a(90592),y=a(96814),p=a(95545),O=a(67679),P=a(22232),W=a(71646),D=a(50121),U=a(36727);function f(E,F){1&E&&(n.TgZ(0,"div",5)(1,"span",6),n._UZ(2,"azt-loading-ui"),n.qZA()())}function w(E,F){if(1&E&&(n.TgZ(0,"div",29)(1,"div",30),n._UZ(2,"azt-list-classroom-checkbox-new",31),n.qZA()()),2&E){const h=n.oxw(2);n.xp6(2),n.Q6J("form",h.form)("classroomGroupData",h.classroomWithGroup)("examClassroomObjs",h.examClassroomObjs)("permissionName",h.permissionTypes.exam)}}const s=function(E){return{"h-56-important":E}};function u(E,F){if(1&E&&(n.TgZ(0,"div",29)(1,"div",32)(2,"div",33)(3,"h3",34),n._uU(4),n.ALo(5,"mytranslate"),n.qZA()(),n.TgZ(6,"div",35)(7,"ng-scrollbar",36),n._UZ(8,"list-student-checkbox",37),n.qZA()()()()),2&E){const h=n.oxw(2);n.xp6(4),n.hij(" ",n.lcZ(5,9,"lang_test_config_student_list")," "),n.xp6(3),n.Q6J("visibility","hover")("autoHeightDisabled",!1)("ngClass",n.VKq(11,s,h.isMobileWebView)),n.xp6(1),n.Q6J("form",h.form)("formArrayName","studentIds")("objs",h.classroomObjs)("examStudentObjs",h.data.examStudents)("permissionName",h.permissionTypes.exam)}}function i(E,F){1&E&&(n.TgZ(0,"div",38)(1,"div",39),n._uU(2),n.ALo(3,"mytranslate"),n.qZA()()),2&E&&(n.xp6(2),n.hij(" ",n.lcZ(3,1,"lang_testbank_test_config_you_not_yet_student")," "))}function c(E,F){if(1&E){const h=n.EpF();n.TgZ(0,"div",7)(1,"form",8)(2,"div",9)(3,"div",10)(4,"div",11)(5,"div",12),n._uU(6),n.ALo(7,"mytranslate"),n.qZA()(),n.TgZ(8,"div",13)(9,"div",14)(10,"div",15)(11,"input",16),n.NdJ("change",function(){n.CHM(h);const j=n.oxw();return n.KtG(j.clearAllCheckBox(0))}),n.qZA(),n.TgZ(12,"label",17),n._uU(13),n.ALo(14,"mytranslate"),n.qZA()(),n.TgZ(15,"div",18)(16,"input",19),n.NdJ("change",function(){n.CHM(h);const j=n.oxw();return n.KtG(j.clearAllCheckBox(2))}),n.qZA(),n.TgZ(17,"label",20),n._uU(18),n.ALo(19,"mytranslate"),n.qZA()(),n.TgZ(20,"div",21)(21,"input",22),n.NdJ("change",function(){n.CHM(h);const j=n.oxw();return n.KtG(j.clearAllCheckBox(3))}),n.qZA(),n.TgZ(22,"label",23),n._uU(23),n.ALo(24,"mytranslate"),n.qZA()()()(),n.YNc(25,w,3,4,"div",24),n.YNc(26,u,9,13,"div",24),n.YNc(27,i,4,3,"div",25),n.qZA()()()(),n.TgZ(28,"div",26)(29,"button",27),n.NdJ("click",function(){n.CHM(h);const j=n.oxw();return n.KtG(j.closeDialog())}),n._uU(30),n.ALo(31,"mytranslate"),n.qZA(),n.TgZ(32,"button",28),n.NdJ("click",function(){n.CHM(h);const j=n.oxw();return n.KtG(j.savePublishExam("save"))}),n._uU(33),n.ALo(34,"mytranslate"),n.qZA()()}if(2&E){const h=n.oxw();n.xp6(1),n.Q6J("formGroup",h.form),n.xp6(5),n.hij(" ",n.lcZ(7,14,"lang_testbank_test_config_who_tested")," "),n.xp6(5),n.Q6J("value",0),n.xp6(2),n.hij(" ",n.lcZ(14,16,"lang_testbank_test_config_all_people")," "),n.xp6(3),n.Q6J("value",2),n.xp6(2),n.hij(" ",n.lcZ(19,18,"lang_testbank_test_config_assigne_class")," "),n.xp6(3),n.Q6J("value",3),n.xp6(2),n.hij(" ",n.lcZ(24,20,"lang_testbank_test_config_assigne_student")," "),n.xp6(2),n.Q6J("ngIf",2===h.form.controls.whoAllow.value),n.xp6(1),n.Q6J("ngIf",3===h.form.controls.whoAllow.value),n.xp6(1),n.Q6J("ngIf",3===h.form.controls.whoAllow.value&&h.form.controls.studentIds.errors),n.xp6(3),n.hij(" ",n.lcZ(31,22,"lang_auto_huy")," "),n.xp6(2),n.Q6J("disabled",3===h.form.controls.whoAllow.value&&h.form.controls.studentIds.errors||2===h.form.controls.whoAllow.value&&h.form.controls.classroomFormArray.errors),n.xp6(1),n.hij(" ",n.lcZ(34,24,"lang_auto_luu")," ")}}let A=(()=>{class E extends d.e{clearAllCheckBox(h){1==h?this.isSelectClassroom=!1:2==h&&(this.isSelectClassroom=!0)}closeDialog(h){this.dialogRef.close(h)}savePublishExam(h){this.initStatusObj();let Z="publish"===h?1:void 0;var j=this.form.getRawValue();const x=this.sAztClassroomCheckboxService.getClassroomIdsCheckedInGroup(this.form.controls.classroomFormArray);let N=[];3==j.whoAllow&&j.studentIds&&j.studentIds.length?j.studentIds.forEach(L=>{let R={classroomId:L.classroomId??0,assignStudentIds:[]};L.listStudents?.forEach(K=>{K.id&&K.choose&&R.assignStudentIds?.push(K.id)}),R.assignStudentIds?.length&&N?.push(R)}):N=void 0;let _={whoAllow:j.whoAllow,isPublished:Z??void 0,classroomIds:x,assignStudents:N,isSaveConfig:0};var g=this.permissionService.hasEditPermission("exam",this.obj)?this.documentConfigService.apiDocumentConfigSaveExamConfigPost(this.hashId,_):this.documentConfigService.apiDocumentConfigSaveExamDataForConfigClassroomPost(this.hashId,_);this.waitDestroy(g.subscribe(C=>{1==C.success?(this.successStatusObj(),this.showSuccessSnack("lang_auto_luu_thanh_cong"),this.closeDialog(C.data?.obj)):this.errorStatusObj(C.message??"",!0)}))}getExamDataByHashId(h){this.initStatusObj(),this.waitDestroy(this.documentConfigService.apiDocumentConfigGetExamDataForConfigClassroomV2Get(h).subscribe(Z=>{if(1==Z.success){if(null!=Z.data){var x,j=Z.data?.examObj;if(!(x=this.castObj(j)))return;x.limitQuestionGroupsParse=this.commonService.myParseJson(j.limitQuestionGroups??""),this.obj=x,this.hashId=this.obj.hashId??"",this.classroomWithGroup=Z.data.classroomGroupObjs??new Array,this.classroomObjs=this.commonService.concatMultipleArray(Z.data.classroomGroupObjs.map(N=>N.classroomObjs)),this.examClassroomObjs=Z.data.examClassroomObjs??[],this.form.patchValue({whoAllow:this.obj.whoAllow}),this.isSelectClassroom=2==this.obj.whoAllow,this.successStatusObj()}}else this.errorStatusObj(Z.message??"",!0)}))}ngOnInit(){super.ngOnInit(),this.getExamDataByHashId(this.hashId)}constructor(h,Z,j,x,N){super(x,j),this.documentConfigService=h,this.permissionService=Z,this.dialogRef=j,this.data=x,this.sAztClassroomCheckboxService=N,this.permissionTypes=m.y,this.checkDialogFastContent=[],this.prevData="",this.classroomObjs=[],this.examClassroomObjs=[],this.isSelectClassroom=!1,this.hashId="",this.classroomWithGroup=[],this.hashId=x.hashId,this.form=new r.cw({whoAllow:new r.NI(0,{nonNullable:!0}),classroomFormArray:new r.Oe([]),studentIds:new r.Oe([])},{validators:[I.h.classroomInGroupCheckBoxValidator,b.M.studentCheckBoxValidator]})}}return E.\u0275fac=function(h){return new(h||E)(n.Y36(k.C),n.Y36(B.j),n.Y36(e.so,8),n.Y36(e.WI,8),n.Y36(S.f))},E.\u0275cmp=n.Xpm({type:E,selectors:[["config-online-exam-dialog"]],features:[n._Bn([{provide:t.fM,useClass:o.WG,deps:[M.Ad,z.o8]},{provide:t.ab,useFactory:l.hx,deps:[v.D]}]),n.qOj],decls:6,vars:2,consts:[[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-body"],["class","loading flex items-center justify-center",4,"ngIf","ngIfElse"],["doneLoading",""],[1,"loading","flex","items-center","justify-center"],[1,"w-4","h-4","inline-block"],[1,"col-md-12","setting"],[3,"formGroup"],[1,"setting-base"],["id","azt-config-who-allow",1,"grid","grid-cols-12","mt-4"],[1,"col-span-12","lg:col-span-3","pr-2"],[1,"mb-0","font-medium","flex","items-center"],[1,"col-span-12","lg:col-span-9"],[1,"flex","flex-col","sm:flex-row"],[1,"form-check","mr-5"],["id","config-who-all","formControlName","whoAllow","type","radio",1,"form-check-input",3,"value","change"],["for","config-who-all",1,"form-check-label"],[1,"form-check","mt-2","sm:mt-0","mr-5"],["id","config-who-class","formControlName","whoAllow","type","radio",1,"form-check-input",3,"value","change"],["for","config-who-class",1,"form-check-label"],[1,"form-check","mt-2","sm:mt-0"],["id","config-who-student","formControlName","whoAllow","type","radio",1,"form-check-input",3,"value","change"],["for","config-who-student",1,"form-check-label"],["class","col-span-12 mt-4",4,"ngIf"],["class","col-span-12 mt-2",4,"ngIf"],[1,"text-right","mt-4"],["azt-track-service","config-exam-classroom-6-a-m4KztM",1,"btn","w-24","btn-secondary","mr-3",3,"click"],["azt-track-service","config-exam-classroom-brv1ZZTsfLY",1,"btn","w-24","btn-primary",3,"disabled","click"],[1,"col-span-12","mt-4"],[1,"azt-list-classroom"],[3,"form","classroomGroupData","examClassroomObjs","permissionName"],[1,"border","border-slate-200/60","dark:border-darkmode-400","rounded-md","pb-1"],[1,"p-3","bg-slate-100","dark:bg-darkmode-400","flex","items-center"],[1,"mr-auto"],[1,"classroom_list"],["pointerEventsMethod","scrollbar",1,"w-full",3,"visibility","autoHeightDisabled","ngClass"],[3,"form","formArrayName","objs","examStudentObjs","permissionName"],[1,"col-span-12","mt-2"],[1,"text-xs","text-danger"]],template:function(h,Z){if(1&h&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2),n.YNc(3,f,3,0,"div",3),n.YNc(4,c,35,26,"ng-template",null,4,n.W1O),n.qZA()()()),2&h){const j=n.MAs(5);n.xp6(3),n.Q6J("ngIf",Z.statusObj.loading)("ngIfElse",j)}},dependencies:[y.mk,y.O5,p.KC,r._Y,r.Fj,r._,r.JJ,r.JL,r.sg,r.u,r.CE,O.M,P._,W.n,D.V,U.JV],encapsulation:2}),E})()},50121:(Q,T,a)=>{a.d(T,{V:()=>W});var t=a(65879),r=a(56223),z=a(65592),M=a(76359),e=a(47496),o=a(76718),l=a(2783),d=a(4021),m=a(96814),v=a(92596),I=a(37722),b=a(36727);function n(D,U){if(1&D&&(t.TgZ(0,"span",11),t._uU(1),t.ALo(2,"slice"),t.qZA()),2&D){const f=t.oxw().$implicit;t.s9C("matTooltip",f.controls.classroomName.value),t.xp6(1),t.hij(" ",t.Dn7(2,2,f.controls.classroomName.value,0,30)+"..."," ")}}function k(D,U){if(1&D&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&D){const f=t.oxw().$implicit;t.xp6(1),t.hij(" ",f.controls.classroomName.value," ")}}function B(D,U){1&D&&(t.TgZ(0,"span",12),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&D&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_test_config_share")," "))}const S=function(D){return{"text-primary font-medium":D}},y=function(D){return{permissionObj:D}};function p(D,U){if(1&D){const f=t.EpF();t.TgZ(0,"div",4)(1,"div",5),t.NdJ("click",function(){const u=t.CHM(f).$implicit,i=t.oxw(2);return t.KtG(i.showListStudentInClassroomDialog(u.controls.classroomId.value,u.controls.classroomName.value))}),t.TgZ(2,"span",6),t._UZ(3,"lucide-icon",7),t.qZA(),t.YNc(4,n,3,6,"span",8),t.YNc(5,k,2,1,"span",0),t.YNc(6,B,3,3,"span",9),t.ALo(7,"fullPermission"),t.TgZ(8,"span",10),t._uU(9),t.qZA()()()}if(2&D){const f=U.$implicit;t.xp6(1),t.Q6J("ngClass",t.VKq(8,S,f.controls.countSelect.value)),t.xp6(3),t.Q6J("ngIf",f.controls.classroomName.value.length>30),t.xp6(1),t.Q6J("ngIf",f.controls.classroomName.value.length<=30),t.xp6(1),t.Q6J("ngIf",!t.xi3(7,5,t.VKq(10,y,f.controls.permissionObjs.value),"classroom")),t.xp6(3),t.hij(" (",f.controls.countSelect.value+"/"+f.controls.countStudents.value,") ")}}const O=function(){return[]};function P(D,U){if(1&D&&(t.TgZ(0,"div")(1,"form",1)(2,"div",2),t.YNc(3,p,10,12,"div",3),t.qZA()()()),2&D){const f=t.oxw();let w;t.xp6(1),t.Q6J("formGroup",f.form),t.xp6(2),t.Q6J("ngForOf",null!==(w=f.form.controls.studentIds.controls)&&void 0!==w?w:t.DdM(2,O))}}let W=(()=>{class D extends e.Q{initClassroomCheckbox(){this.formArray.clear(),this.objs.forEach(s=>{let u=new r.cw({classroomId:new r.NI(s.id,{nonNullable:!0}),classroomName:new r.NI(s.name,{nonNullable:!0}),permissionObjs:new r.NI(s.permissionObj,{nonNullable:!0}),listStudents:new r.Oe([]),countStudents:new r.NI(s.countStudents,{nonNullable:!0}),loadingStudents:new r.NI(!1,{nonNullable:!0}),selectAll:new r.NI(!1,{nonNullable:!0}),countSelect:new r.NI(0,{nonNullable:!0}),isShowCheckStudent:new r.NI(!1,{nonNullable:!0})});this.formArray.push(u)});let f=this.commonService.uniqueArray(this.examStudentObjs.map(s=>s.classroomId)),w=this.commonService.uniqueArray(this.examStudentObjs.map(s=>s.studentId));for(let s=0;s<f.length;s++)this.getListStudentFromApiAndShow(f[s],w)}getStudentListByClassroomIdFromApi(f){return new z.y(w=>{this.waitDestroy(this.studentProfileV2Service.apiStudentProfileV2GetObjsByClassroomIdGet(f).subscribe(s=>{1==s.success?(w.next(s.data?.studentObjs),w.complete()):(w.next([]),w.complete())}))})}getListStudentFromApiAndShow(f,w){let s=this.formArray.controls.find(u=>u.controls.classroomId.value==f&&!u.controls.listStudents.length);s&&(s.controls.loadingStudents.setValue(!0),this.getStudentListByClassroomIdFromApi(f).subscribe(u=>{u.length&&this.addStudentToFormArr(u,f,w),s?.controls.loadingStudents.setValue(!1)}))}addStudentToFormArr(f,w,s){let u=this.formArray.controls.find(i=>i.controls.classroomId.value==w);u&&(f.forEach(i=>{let c=this.commonService.isExistInArray(s,i.id),A=new r.cw({id:new r.NI(i.id,{nonNullable:!0}),name:new r.NI(i.fullName??"",{nonNullable:!0}),choose:new r.NI(c,{nonNullable:!0})});u?.controls.listStudents.push(A)}),u?.controls.countSelect.setValue(u?.controls.listStudents.value.filter(i=>i.choose).length??0),u?.controls.countSelect.value==u?.controls.listStudents.length&&u.controls.selectAll.setValue(!0))}showListStudentInClassroomDialog(f,w){this.getListStudentFromApiAndShow(f,[]),this.sAztDialogService.open(o.V,{data:{form:this.form,classroomId:f,classroomName:w,permissionName:this.permissionName,formArrayOfStudentIds:this.formArray},width:"1000px",autoFocus:!1})}ngOnInit(){super.ngOnInit(),this.objs.map(f=>f.name=this.commonService.myTranslateInstant(f.name)??""),this.formArray=this.form.controls.studentIds,this.initClassroomCheckbox()}constructor(f,w){super(),this.sAztDialogService=f,this.studentProfileV2Service=w,this.changeCheckboxEvent=new t.vpe,this.formArray=new r.Oe([]),this.objs=[],this.examStudentObjs=[],this.permissionName=M.y.exam,this.listPermissionTypes=M.y}}return D.\u0275fac=function(f){return new(f||D)(t.Y36(l.C),t.Y36(d.LU))},D.\u0275cmp=t.Xpm({type:D,selectors:[["list-student-checkbox"]],inputs:{form:"form",objs:"objs",examStudentObjs:"examStudentObjs",permissionName:"permissionName"},outputs:{changeCheckboxEvent:"changeCheckboxEvent"},features:[t.qOj],decls:1,vars:1,consts:[[4,"ngIf"],[3,"formGroup"],[1,"grid","grid-cols-12","gap-3","p-3"],["class","col-span-12 md:col-span-6 mt-2","formArrayName","studentIds",4,"ngFor","ngForOf"],["formArrayName","studentIds",1,"col-span-12","md:col-span-6","mt-2"],[1,"flex","cursor-pointer","items-center","icon-align-justify",2,"vertical-align","middle",3,"ngClass","click"],[1,"w-4","h-4","inline-block","mr-2"],["name","align-justify"],[3,"matTooltip",4,"ngIf"],["class","ml-2 py-0.5 px-2 rounded-full text-xs bg-primary text-white cursor-pointer font-medium",4,"ngIf"],[1,"ml-2"],[3,"matTooltip"],[1,"ml-2","py-0.5","px-2","rounded-full","text-xs","bg-primary","text-white","cursor-pointer","font-medium"]],template:function(f,w){1&f&&t.YNc(0,P,4,3,"div",0),2&f&&t.Q6J("ngIf",w.form)},dependencies:[m.mk,m.sg,m.O5,v.gM,r._Y,r.JL,r.sg,r.CE,I.Nh5,m.OU,b.JV,b.NK],encapsulation:2}),D})()},76718:(Q,T,a)=>{a.d(T,{V:()=>w});var t=a(19347),r=a(72164),z=a(76359),M=a(63278),e=a(65879);function o(s,u){1&s&&(e.ynx(0),e._uU(1),e.ALo(2,"mytranslate"),e.BQk()),2&s&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_remove_all")," "))}function l(s,u){1&s&&(e._uU(0),e.ALo(1,"mytranslate")),2&s&&e.hij(" ",e.lcZ(1,1,"lang_select_all")," ")}function d(s,u){if(1&s){const i=e.EpF();e.TgZ(0,"div",19)(1,"div",20)(2,"input",21),e.NdJ("change",function(){e.CHM(i);const A=e.oxw(5);return e.KtG(A.selectAllStudentOfClass())}),e.qZA(),e.TgZ(3,"label",22),e.YNc(4,o,3,3,"ng-container",17),e.YNc(5,l,2,3,"ng-template",null,23,e.W1O),e.qZA()(),e.TgZ(7,"div",24),e._UZ(8,"input",25),e.TgZ(9,"label",26),e._uU(10),e.ALo(11,"mytranslate"),e.qZA()()()}if(2&s){const i=e.MAs(6),c=e.oxw(3).$implicit;e.xp6(4),e.Q6J("ngIf",c.controls.selectAll.value)("ngIfElse",i),e.xp6(6),e.hij(" ",e.lcZ(11,3,"lang_testbank_selected_students")," ")}}function m(s,u){1&s&&(e.ynx(0),e.TgZ(1,"div",27)(2,"div",28),e._UZ(3,"azt-loading-ui"),e.qZA()(),e.BQk())}function v(s,u){1&s&&(e.ynx(0),e.TgZ(1,"div",27)(2,"span"),e._uU(3),e.ALo(4,"mytranslate"),e.qZA()(),e.BQk()),2&s&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"lang_core_class_has_no_student")))}function I(s,u){1&s&&(e.ynx(0),e.TgZ(1,"div",27)(2,"span",32),e._uU(3),e.ALo(4,"mytranslate"),e.qZA()(),e.BQk()),2&s&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"lang_testbank_no_students_selected")))}function b(s,u){if(1&s&&(e.TgZ(0,"div",38)(1,"div",39),e._UZ(2,"input",40),e.TgZ(3,"label",41,42),e.ALo(5,"mytranslate"),e._uU(6),e.ALo(7,"mytranslate"),e.qZA()()()),2&s){const i=e.MAs(4),c=e.oxw().$implicit;e.xp6(1),e.Q6J("formGroup",c),e.xp6(1),e.s9C("id","azt-checkbox-student-"+c.controls.id.value),e.xp6(1),e.s9C("for","azt-checkbox-student-"+c.controls.id.value),e.Q6J("matTooltip",e.lcZ(5,8,c.controls.name.value))("isDisabledTooltip",!1)("matTooltipDisabled",i.isDisabled)("matTooltipShowDelay",500),e.xp6(3),e.hij(" ",e.lcZ(7,10,c.controls.name.value)," ")}}function n(s,u){if(1&s&&(e.ynx(0),e.YNc(1,b,8,12,"div",37),e.BQk()),2&s){const i=u.$implicit,c=e.oxw(7).$implicit;e.xp6(1),e.Q6J("ngIf",null==c.controls.isShowCheckStudent||!c.controls.isShowCheckStudent.value||c.controls.isShowCheckStudent.value&&i.controls.choose.value)}}const k=function(){return["name"]};function B(s,u){if(1&s&&(e.TgZ(0,"div",35),e.YNc(1,n,2,1,"ng-container",36),e.ALo(2,"appSearchStudentForm"),e.qZA()),2&s){const i=e.oxw(6).$implicit,c=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",e.Dn7(2,1,i.controls.listStudents.controls,c.searchContentObj.searchContent,e.DdM(5,k)))}}function S(s,u){1&s&&(e.TgZ(0,"div",27),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&s&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_student_classroom_list_detail_not_student")," "))}function y(s,u){if(1&s&&(e.YNc(0,B,3,6,"div",33),e.YNc(1,S,3,3,"div",34),e.ALo(2,"appSearchStudentForm")),2&s){const i=e.oxw(5).$implicit,c=e.oxw(2);e.Q6J("ngIf",i.controls.listStudents.controls.length),e.xp6(1),e.Q6J("ngIf",0==e.Dn7(2,2,i.controls.listStudents.controls,c.searchContentObj.searchContent,e.DdM(6,k)).length)}}function p(s,u){if(1&s&&(e.TgZ(0,"azt-mat-dialog-content",30),e.YNc(1,I,5,3,"ng-container",17),e.YNc(2,y,3,7,"ng-template",null,31,e.W1O),e.qZA()),2&s){const i=e.MAs(3),c=e.oxw(4).$implicit;e.Q6J("defaultHeight",40),e.xp6(1),e.Q6J("ngIf",!c.controls.countSelect.value&&c.controls.isShowCheckStudent.value)("ngIfElse",i)}}function O(s,u){if(1&s&&(e.YNc(0,v,5,3,"ng-container",17),e.YNc(1,p,4,3,"ng-template",null,29,e.W1O)),2&s){const i=e.MAs(2),c=e.oxw(3).$implicit;e.Q6J("ngIf",!c.controls.listStudents.length)("ngIfElse",i)}}function P(s,u){if(1&s){const i=e.EpF();e.TgZ(0,"div",10)(1,"div",11)(2,"div",12)(3,"span"),e._uU(4),e.ALo(5,"mytranslate"),e.qZA(),e.TgZ(6,"div",13)(7,"azt-search-box",14),e.NdJ("onSearch",function(A){e.CHM(i);const E=e.oxw(4);return e.KtG(E.onSearchBox(A.searchObj))}),e.ALo(8,"mytranslate"),e.qZA()()(),e.YNc(9,d,12,5,"div",15),e.qZA(),e.TgZ(10,"div",16),e.YNc(11,m,4,0,"ng-container",17),e.YNc(12,O,3,2,"ng-template",null,18,e.W1O),e.qZA()()}if(2&s){const i=e.MAs(13),c=e.oxw(2).$implicit,A=e.oxw(2);e.Q6J("formGroup",c),e.xp6(4),e.hij(" ",A.data.classroomName+(c.controls.countSelect.value?" ("+e.lcZ(5,8,"lang_auto_da_chon")+": "+c.controls.countSelect.value+")":"")," "),e.xp6(3),e.Q6J("isServerSearch",!1)("styleInput","form-control-sm ")("placeholder",e.lcZ(8,10,"lang_student_classroom_list_detail_search_name_student")),e.xp6(2),e.Q6J("ngIf",c.controls.listStudents.controls.length),e.xp6(2),e.Q6J("ngIf",c.controls.loadingStudents.value)("ngIfElse",i)}}const W=function(s){return{permissionObj:s}};function D(s,u){if(1&s&&(e.TgZ(0,"div"),e.YNc(1,P,14,12,"div",9),e.ALo(2,"createPermission"),e.qZA()),2&s){const i=e.oxw().$implicit,c=e.oxw(2);e.xp6(1),e.Q6J("ngIf",e.xi3(2,1,e.VKq(4,W,i.controls.permissionObjs.value),c.listPermissionTypes[c.data.permissionName]))}}function U(s,u){if(1&s&&(e.ynx(0,7),e.YNc(1,D,3,6,"div",8),e.BQk()),2&s){const i=u.$implicit,c=e.oxw(2);e.xp6(1),e.Q6J("ngIf",i.controls.classroomId.value==c.data.classroomId)}}function f(s,u){if(1&s){const i=e.EpF();e.TgZ(0,"div",1)(1,"div",2)(2,"div",3),e.YNc(3,U,2,1,"ng-container",4),e.qZA()(),e.TgZ(4,"div",5)(5,"button",6),e.NdJ("click",function(){e.CHM(i);const A=e.oxw();return e.KtG(A.btnCloseDialog())}),e._uU(6),e.ALo(7,"mytranslate"),e.qZA()()()}if(2&s){const i=e.oxw();e.xp6(2),e.Q6J("formGroup",i.data.form),e.xp6(1),e.Q6J("ngForOf",i.data.form.controls.studentIds.controls),e.xp6(3),e.hij(" ",e.lcZ(7,3,"lang_auto_dong")," ")}}let w=(()=>{class s extends r.e{btnCloseDialog(){this.dialogRef.close()}selectAllStudentOfClass(){let i=this.formArray.controls.find(c=>c.controls.classroomId.value==this.data.classroomId);if(i){let c=i.controls.selectAll.value;i.controls.listStudents.controls.forEach(A=>{A.controls.choose.setValue(c)}),this.calculateCheckAllAndTotalSelected()}}calculateCheckAllAndTotalSelected(){let i=this.formArray.controls.find(c=>c.controls.classroomId.value==this.data.classroomId);i&&(i?.controls.listStudents.value.filter(E=>E.choose).length??0)!=i.controls.countSelect.value&&(i.controls.countSelect.setValue(i?.controls.listStudents.value.filter(E=>E.choose).length??0),i.controls.selectAll.setValue(i?.controls.countSelect.value==i?.controls.listStudents.length))}onSearchBox(i){this.searchContentObj=i}ngOnInit(){this.formArray.valueChanges.subscribe(()=>{this.calculateCheckAllAndTotalSelected()})}constructor(i,c){super(c,i),this.dialogRef=i,this.data=c,this.listPermissionTypes=z.y,this.searchContentObj=new M.h,this.formArray=c.formArrayOfStudentIds}}return s.\u0275fac=function(i){return new(i||s)(e.Y36(t.so,8),e.Y36(t.WI,8))},s.\u0275cmp=e.Xpm({type:s,selectors:[["azt-list-student-dialog"]],features:[e.qOj],decls:1,vars:1,consts:[["class","box",4,"ngIf"],[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-0",3,"formGroup"],["formArrayName","studentIds",4,"ngFor","ngForOf"],[1,"p-3","text-right"],["azt-track-service","azt-dialog-warning-3FIn9IaXN",1,"btn","w-24","btn-primary",3,"click"],["formArrayName","studentIds"],[4,"ngIf"],[3,"formGroup",4,"ngIf"],[3,"formGroup"],[1,"p-3","bg-slate-100","dark:bg-darkmode-400","flex","flex-col","sm:flex-row","sm:h-auto","sm:items-center"],[1,"font-medium","mr-auto"],[1,"w-full","relative","flex","items-center","mt-2"],[3,"isServerSearch","styleInput","placeholder","onSearch"],["class","flex items-center mt-2 sm:mt-0",4,"ngIf"],[2,"height","320px"],[4,"ngIf","ngIfElse"],["doneLoadStudents",""],[1,"flex","items-center","mt-2","sm:mt-0"],[1,"form-check","mr-3"],["id","selected-all","type","checkbox","formControlName","selectAll",1,"form-check-input",3,"change"],["for","selected-all",1,"form-check-label"],["elseTemplate",""],[1,"form-check"],["id","show-student-checked","type","checkbox","formControlName","isShowCheckStudent",1,"form-check-input"],["for","show-student-checked",1,"form-check-label"],[1,"h-full","flex","items-center","justify-center","p-5"],[1,"w-5","h-5"],["hasStudents",""],[3,"defaultHeight"],["checkedBox",""],[1,"mx-auto"],["class","grid grid-cols-12 gap-3 p-3","formArrayName","listStudents",4,"ngIf"],["class","h-full flex items-center justify-center p-5",4,"ngIf"],["formArrayName","listStudents",1,"grid","grid-cols-12","gap-3","p-3"],[4,"ngFor","ngForOf"],["class","col-span-12 md:col-span-4 mt-2",4,"ngIf"],[1,"col-span-12","md:col-span-4","mt-2"],[1,"azt-checkbox-item",3,"formGroup"],["type","checkbox","formControlName","choose",1,"form-check-input",3,"id"],[1,"form-check-label","truncate",2,"vertical-align","middle",3,"matTooltip","isDisabledTooltip","matTooltipDisabled","matTooltipShowDelay","for"],["c","isDisabled"]],template:function(i,c){1&i&&e.YNc(0,f,8,5,"div",0),2&i&&e.Q6J("ngIf",c.data.form)},encapsulation:2}),s})()},20254:(Q,T,a)=>{a.d(T,{Q:()=>m});var t=a(65592),r=a(36435),z=a(62836),M=a(88135),e=a(20760),o=a(65879),l=a(46558),d=a(2783);let m=(()=>{class v{doExamAction(b,n){switch(n){case e.F.CONFIG_EXAM_CLASSROOM:return this.showConfigExamClassroomDialog(b);case e.F.SHOW_EXAM_DETAIL:this.showExamDetailDialog(b);break;case e.F.SHARE_OFFLINE_RESULT:this.showOfflineShareDialog(b);break;case e.F.COPY_EXAM_LINK:this.copyExamLink()}return this.returnUndefinedOutput()}copyExamLink(){this.commonService.snackSuccess("lang_auto_sao_chep_thanh_cong")}showConfigExamClassroomDialog(b){return new t.y(n=>{this.sAztDialogService.open(M.Y,{width:"900px",data:{hashId:b.examObj.hashId,examStudents:b.examObj?.examStudents??[]},restoreFocus:!1}).afterClosed().subscribe(B=>{B?(n.next({reloadData:!0}),n.complete()):(n.next(void 0),n.complete())})})}showExamDetailDialog(b){let n={obj:{...b.examObj,countQuestion:0,showFrontend:1,editable:!0,allowStudentView:!0},globalLadingPage:b.globalLadingPage,curCateId:b.categoryId,isOnLib:0,isShow:!0,showDelete:!0};this.sAztDialogService.open(z.H,{width:"800px",maxWidth:"90vw",enterAnimationDuration:"0ms",exitAnimationDuration:"0ms",data:n,restoreFocus:!1}).afterClosed().subscribe(B=>{})}showOfflineShareDialog(b){this.sAztDialogService.open(r.h,{width:"1000px",data:{examHashId:b.examObj.hashId,useDialog:!0},restoreFocus:!1})}returnUndefinedOutput(){return new t.y(b=>{b.next(void 0),b.complete()})}constructor(b,n){this.commonService=b,this.sAztDialogService=n}}return v.\u0275fac=function(b){return new(b||v)(o.LFG(l.z),o.LFG(d.C))},v.\u0275prov=o.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})()},27722:(Q,T,a)=>{a.d(T,{d:()=>M});var t=a(25690),r=a(65879),z=a(46558);let M=(()=>{class e{sortExamByColumn(l,d,m){return d==t.H.BY_NAME?this.sortExamByName(l,m):d==t.H.BY_PUBLISH_STATUS?this.sortExamByPublishStatus(l,m):d==t.H.BY_UPDATED_DATE?this.sortExamByDateUpdated(l,m):d==t.H.BY_ATTENDED?this.sortExamByAttended(l,m):this.sortExamByName(l,m)}sortExamByName(l,d){var m=[...l.rootCategoryObjs??[]],v=[...l.rootDocumentObjs??[]];return 1==d?{categoryObjs:this._sortCateByName(m),documentObjs:this._sortDocumentByName(v)}:{categoryObjs:this._sortCateByName(m).reverse(),documentObjs:this._sortDocumentByName(v).reverse()}}sortExamByPublishStatus(l,d){var m=[...l.rootDocumentObjs??[]];return 1==d?{categoryObjs:l.currentCategoryObjs,documentObjs:this._sortDocumentByPublish(m,m?.length)}:{categoryObjs:l.currentCategoryObjs,documentObjs:this._sortDocumentByPublish(m,m?.length).reverse()}}sortExamByDateUpdated(l,d){var m=this.commonService.castObj(l.rootCategoryObjs),v=this.commonService.castObj(l.rootDocumentObjs);return 1==d?{categoryObjs:this._sortCateByDateUpdateExam(m??[]),documentObjs:this._sortDocumentByUpdateTime(v??[])}:{categoryObjs:this._sortCateByDateUpdateExam(m??[]).reverse(),documentObjs:this._sortDocumentByUpdateTime(v??[]).reverse()}}sortExamByAttended(l,d){var m=this.commonService.castObj(l.rootDocumentObjs);return 1==d?{categoryObjs:l.currentCategoryObjs,documentObjs:this._sortDocumentByAttended(m??[])}:{categoryObjs:l.currentCategoryObjs,documentObjs:this._sortDocumentByAttended(m??[]).reverse()}}_sortCateByName(l){return l?.sort((d,m)=>(d.name?.trim()??"").localeCompare(m.name?.trim()??""))??[]}_sortDocumentByName(l){return l?.sort((d,m)=>(d.name?.trim()??"").localeCompare(m.name?.trim()??""))??[]}_sortDocumentByPublish(l,d){let m=[],v=[];for(let I=0;I<(d??0);I++)0==l?.[I].isPublished&&m.push(l[I]),1==l?.[I].isPublished&&v.push(l[I]);return m.concat(v)}_sortCateByDateUpdateExam(l){return l.sort((d,m)=>Number(new Date(d.updatedAt??""))-Number(new Date(m.updatedAt??""))),l}_sortDocumentByUpdateTime(l){return l?.sort((d,m)=>Number(new Date(d.updatedAt??""))-Number(new Date(m.updatedAt??"")))}_sortDocumentByAttended(l){return l?.sort((d,m)=>Number(d.attended)-Number(m.attended))}constructor(l){this.commonService=l}}return e.\u0275fac=function(l){return new(l||e)(r.LFG(z.z))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},20760:(Q,T,a)=>{a.d(T,{F:()=>t});var t=function(r){return r[r.CONFIG_EXAM_CLASSROOM=0]="CONFIG_EXAM_CLASSROOM",r[r.SHOW_EXAM_DETAIL=1]="SHOW_EXAM_DETAIL",r[r.SHARE_OFFLINE_RESULT=2]="SHARE_OFFLINE_RESULT",r[r.COPY_EXAM_LINK=3]="COPY_EXAM_LINK",r}(t||{})},31810:(Q,T,a)=>{a.d(T,{T:()=>t});var t=function(r){return r[r.OFFLINE_CONFIG=0]="OFFLINE_CONFIG",r[r.CONFIG_EXAM=1]="CONFIG_EXAM",r[r.EDIT_EXAM=2]="EDIT_EXAM",r[r.POWER_POINT=3]="POWER_POINT",r[r.STATISTIC=4]="STATISTIC",r[r.TESTED_LIST=5]="TESTED_LIST",r}(t||{})},25690:(Q,T,a)=>{a.d(T,{H:()=>t});var t=function(r){return r[r.BY_NAME=0]="BY_NAME",r[r.BY_PUBLISH_STATUS=1]="BY_PUBLISH_STATUS",r[r.BY_UPDATED_DATE=2]="BY_UPDATED_DATE",r[r.BY_ATTENDED=3]="BY_ATTENDED",r}(t||{})},1028:(Q,T,a)=>{a.d(T,{X:()=>t});var t=function(r){return r[r.multipleChoice=1]="multipleChoice",r[r.essay=3]="essay",r[r.trueFalse=5]="trueFalse",r[r.fill=4]="fill",r}(t||{})},31225:(Q,T,a)=>{a.d(T,{h:()=>t});var t=function(r){return r.COPY="copy",r.CUT="cut",r.DELETE="delete",r}(t||{})},94145:(Q,T,a)=>{a.d(T,{Y:()=>t});var t=function(r){return r[r.EXAM_CATEGORY=0]="EXAM_CATEGORY",r[r.EXAM=1]="EXAM",r}(t||{})},55948:(Q,T,a)=>{a.d(T,{e:()=>M});var t=a(31225),r=a(94145),z=a(65879);let M=(()=>{class e{constructor(){this.clipboardObjs=[]}setActionToClipboard(l,d,m,v){var I={id:l,name:v,type:d,action:m};this.clipboardObjs.filter(n=>n.id==I.id&&n.type==I.type).length>0?this.clipboardObjs.forEach(n=>{n.id==I.id&&n.type==I.type&&(n.action=I.action)}):this.clipboardObjs.push(I)}hasInClipboard(l,d){return this.clipboardObjs.filter(v=>v.id==l&&v.type==d).length>0}hasCopyFolderActionInClipboard(){var l=!1;return this.clipboardObjs.forEach(d=>{d.type==r.Y.EXAM_CATEGORY&&d.action==t.h.COPY&&(l=!0)}),l}getActionOfDocumentObj(l,d){var m=this.clipboardObjs.filter(v=>v.id==l&&v.type==d);if(m&&m.length>0)return m[0].action}removeDocumentInClipboard(l,d){for(var m=0;m<this.clipboardObjs.length;m++)this.clipboardObjs[m].id==l&&this.clipboardObjs[m].type==d&&this.clipboardObjs.splice(m,1)}isPasteToSelfFolder(l){var d=!1;return this.clipboardObjs.forEach(m=>{m.id==l&&m.type==r.Y.EXAM_CATEGORY&&m.action==t.h.COPY&&(d=!0)}),d}getCurrentClipBoard(){return this.clipboardObjs}resetClipBoardAfterPasteOrCancelAllActions(){this.clipboardObjs=[]}}return e.\u0275fac=function(l){return new(l||e)},e.\u0275prov=z.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},19743:(Q,T,a)=>{a.d(T,{M:()=>t});class t{static studentCheckBoxValidator(z){const e=z.controls.whoAllow,o=z.controls.studentIds;return e&&o?3!=e.value||t.countCheckBox(o)>=1?(o.setErrors(null),null):(o.setErrors({studentCheckBoxValidator:!0}),{identityRevealed:!0}):null}static countCheckBox(z){var M=0;return z.value.forEach(e=>{M+=e.listStudents?.filter(o=>o.choose).length??0}),M}}},52467:(Q,T,a)=>{a.d(T,{S:()=>B});var t=a(65879),r=a(1028),z=a(47496),M=a(38228),e=a(96814),o=a(36727);const l=["table"];function d(S,y){if(1&S&&(t.TgZ(0,"td",6),t._uU(1),t.ALo(2,"formatOfflineExamHashIdToNumber"),t.qZA()),2&S){const p=y.$implicit,O=y.index;t.uIk("excelRow",1)("excelColumn",O+1),t.xp6(1),t.hij(" ",t.lcZ(2,3,null==p?null:p.offlineMixQuestionHashId)," ")}}function m(S,y){if(1&S&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&S){const p=t.oxw(2).$implicit,O=t.oxw().$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,p.offlineQuestionObjs[O].answer)," ")}}function v(S,y){1&S&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&S&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_core_essay_question")," "))}function I(S,y){if(1&S&&(t.TgZ(0,"span"),t.YNc(1,m,3,3,"span",7),t.YNc(2,v,3,3,"span",7),t.qZA()),2&S){const p=t.oxw().$implicit,O=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",!(null!=p.offlineQuestionObjs&&null!=p.offlineQuestionObjs[O]&&p.offlineQuestionObjs[O].isEssay)),t.xp6(1),t.Q6J("ngIf",null==p.offlineQuestionObjs||null==p.offlineQuestionObjs[O]?null:p.offlineQuestionObjs[O].isEssay)}}function b(S,y){if(1&S&&(t.TgZ(0,"td",6),t.YNc(1,I,3,2,"span",7),t.qZA()),2&S){const p=y.$implicit,O=y.index,P=t.oxw().$implicit;let W;t.uIk("excelRow",P+2)("excelColumn",O+1),t.xp6(1),t.Q6J("ngIf",(null!==(W=null==p.offlineQuestionObjs?null:p.offlineQuestionObjs.length)&&void 0!==W?W:0)>P)}}const n=function(){return[]};function k(S,y){if(1&S&&(t.TgZ(0,"tr")(1,"td",3),t._uU(2),t.qZA(),t.YNc(3,b,2,3,"td",4),t.qZA()),2&S){const p=y.$implicit,O=t.oxw();let P;t.xp6(1),t.uIk("excelRow",p+2)("excelColumn",0),t.xp6(1),t.hij(" ",p+O.startQuestionIndex," "),t.xp6(1),t.Q6J("ngForOf",null!==(P=null==O.obj?null:O.obj.offlineMixQuestionObjs)&&void 0!==P?P:t.DdM(4,n))}}let B=(()=>{class S extends z.Q{calculateMaxQuestion(){let p=0;return this.obj.offlineMixQuestionObjs&&this.obj.offlineMixQuestionObjs.forEach(O=>{p<(O.offlineQuestionObjs?.length??0)&&(p=O.offlineQuestionObjs?.length??0)}),p}processData(){for(let p=0;p<this.obj.offlineMixQuestionObjs.length;p++)for(let O=0;O<this.obj.offlineMixQuestionObjs[p].offlineQuestionObjs.length;O++)this.obj.offlineMixQuestionObjs[p].offlineQuestionObjs[O].answerType===this.offlineAnswerType.trueFalse&&(this.obj.offlineMixQuestionObjs[p].offlineQuestionObjs[O].answer=this.convertAnswerTrueFalse(this.obj.offlineMixQuestionObjs[p].offlineQuestionObjs[O].answer))}convertAnswerTrueFalse(p){const O=p.split(","),P=this.commonService.myClone(this.answerChoiceMap),W=this.commonService.myTranslateInstant("lang_testbank_correct_answer_to_offline_exam"),D=this.commonService.myTranslateInstant("lang_testbank_wrong_answer_to_offline_exam");return P.map(f=>O.includes(f)?W:D).join("")}ngOnChanges(){this.processData(),this.isExported=!1,this.maxQuestionIndex=this.calculateMaxQuestion(),this.totalExamCode=this.obj.offlineMixQuestionObjs?.length??0}ngAfterViewChecked(){0==this.isExported&&(this.isExported=!0,setTimeout(()=>{this.exportDataDone.emit(this.exportExcelService.exportHtmlTableToExcelBlob(this.table,!0))},0))}constructor(p){super(),this.exportExcelService=p,this.startQuestionIndex=1,this.exportDataDone=new t.vpe,this.maxQuestionIndex=0,this.totalExamCode=0,this.isExported=!1,this.offlineAnswerType=r.X,this.answerChoiceMap=["A","B","C","D"]}}return S.\u0275fac=function(p){return new(p||S)(t.Y36(M.L))},S.\u0275cmp=t.Xpm({type:S,selectors:[["azt-export-excel-for-answersheet"]],viewQuery:function(p,O){if(1&p&&t.Gf(l,5),2&p){let P;t.iGM(P=t.CRH())&&(O.table=P.first)}},inputs:{obj:"obj",startQuestionIndex:"startQuestionIndex"},outputs:{exportDataDone:"exportDataDone"},features:[t.qOj,t.TTD],decls:14,vars:16,consts:[[1,"table","table-bordered",2,"display","none"],["table",""],["rowspan","2","excelStyle",'{"alignment":{"vertical":"center","horizontal":"center","wrapText":true},"font":{"bold":true}}',1,"text-center","azt-excel-cell"],["excelStyle",'{"alignment":{"vertical":"center","horizontal":"center","wrapText":true},"font":{"bold":true}}',1,"text-center","azt-excel-cell"],["class","text-center azt-excel-cell","excelStyle",'{"alignment":{"vertical":"center","horizontal":"center","wrapText":true}}',4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["excelStyle",'{"alignment":{"vertical":"center","horizontal":"center","wrapText":true}}',1,"text-center","azt-excel-cell"],[4,"ngIf"]],template:function(p,O){if(1&p&&(t.TgZ(0,"table",0,1)(2,"tbody")(3,"tr")(4,"td",2),t._uU(5),t.ALo(6,"mytranslate"),t.qZA(),t.TgZ(7,"td",3),t._uU(8),t.ALo(9,"mytranslate"),t.qZA()(),t.TgZ(10,"tr"),t.YNc(11,d,3,5,"td",4),t.qZA(),t.YNc(12,k,4,5,"tr",5),t.ALo(13,"createEmptyArray"),t.qZA()()),2&p){let P;t.xp6(4),t.uIk("excelRow",0)("excelColumn",0),t.xp6(1),t.hij(" ",t.lcZ(6,9,"lang_testbank_answersheet_question_title")," "),t.xp6(2),t.uIk("colspan",O.totalExamCode)("excelRow",0)("excelColumn",1),t.xp6(1),t.hij(" ",t.lcZ(9,11,"lang_auto_ma_de_thi")," "),t.xp6(3),t.Q6J("ngForOf",null!==(P=null==O.obj?null:O.obj.offlineMixQuestionObjs)&&void 0!==P?P:t.DdM(15,n)),t.xp6(1),t.Q6J("ngForOf",t.lcZ(13,13,O.maxQuestionIndex))}},dependencies:[e.sg,e.O5,o.JV,o.Aw,o.ib],encapsulation:2}),S})()},36435:(Q,T,a)=>{a.d(T,{h:()=>w});var t=a(56223),r=a(19347),z=a(72164),M=a(76359),e=a(47180),o=a(65879),l=a(49870),d=a(90592),m=a(96814),v=a(70342),I=a(37722),b=a(67679),n=a(22232),k=a(71646),B=a(36727);function S(s,u){1&s&&(o.TgZ(0,"div",8)(1,"span",9),o._UZ(2,"azt-loading-ui"),o.qZA(),o.TgZ(3,"span",10),o._uU(4,"Loading..."),o.qZA()())}function y(s,u){if(1&s){const i=o.EpF();o.TgZ(0,"div",26)(1,"azt-list-classroom-checkbox-new",27),o.NdJ("changeCheckboxEvent",function(A){o.CHM(i);const E=o.oxw(3);return o.KtG(E.changeStatusOfflineShare(A))}),o.qZA()()}if(2&s){const i=o.oxw(3);o.xp6(1),o.Q6J("form",i.form)("classroomGroupData",i.classroomWithGroup)("shareClassroomIds",i.shareClassroomIds)("permissionName",i.permissionTypes.exam)("defaultCssClass","classroom-box-in-dialog")}}function p(s,u){if(1&s){const i=o.EpF();o.TgZ(0,"div",28),o._UZ(1,"input",29),o.TgZ(2,"button",30),o.NdJ("click",function(){o.CHM(i);const A=o.oxw(3);return o.KtG(A.showCopySuccess())}),o.TgZ(3,"span",31),o._UZ(4,"lucide-icon",32),o.qZA(),o._uU(5),o.ALo(6,"mytranslate"),o.qZA()()}if(2&s){const i=o.oxw(3);o.xp6(1),o.Q6J("value",i.linkCopy),o.xp6(1),o.Q6J("cdkCopyToClipboard",i.copyLinkToClipboard()),o.xp6(3),o.hij(" ",o.lcZ(6,3,"lang_auto_sao_chep")," ")}}function O(s,u){1&s&&(o.TgZ(0,"div",33)(1,"p",34),o._uU(2),o.ALo(3,"mytranslate"),o.qZA()()),2&s&&(o.xp6(2),o.Oqu(o.lcZ(3,1,"lang_auto_chua_duoc_cau_hinh_tra_de_thi")))}function P(s,u){if(1&s){const i=o.EpF();o.ynx(0),o.TgZ(1,"div",14)(2,"div",15)(3,"input",16),o.NdJ("change",function(){o.CHM(i);const A=o.oxw(2);return o.KtG(A.changeStatusOfflineShare(void 0))}),o.qZA(),o.TgZ(4,"label",17),o._uU(5),o.ALo(6,"mytranslate"),o.qZA()(),o.TgZ(7,"div",18)(8,"input",19),o.NdJ("change",function(){o.CHM(i);const A=o.oxw(2);return o.KtG(A.changeStatusOfflineShare(void 0))}),o.qZA(),o.TgZ(9,"label",20),o._uU(10),o.ALo(11,"mytranslate"),o.qZA()(),o.TgZ(12,"div",18)(13,"input",21),o.NdJ("change",function(){o.CHM(i);const A=o.oxw(2);return o.KtG(A.changeStatusOfflineShare(void 0))}),o.qZA(),o.TgZ(14,"label",22),o._uU(15),o.ALo(16,"mytranslate"),o.qZA()()(),o.YNc(17,y,2,5,"div",23),o.YNc(18,p,7,5,"div",24),o.YNc(19,O,4,3,"div",25),o.ALo(20,"fullPermission"),o.BQk()}if(2&s){const i=o.oxw(2);o.xp6(3),o.Q6J("value",0),o.xp6(2),o.Oqu(o.lcZ(6,9,"lang_auto_khong")),o.xp6(3),o.Q6J("value",1),o.xp6(2),o.Oqu(o.lcZ(11,11,"lang_auto_tat_ca_cac_lop")),o.xp6(3),o.Q6J("value",2),o.xp6(2),o.Oqu(o.lcZ(16,13,"lang_auto_tuy_chon_theo_lop")),o.xp6(2),o.Q6J("ngIf",2===i.form.controls.chooseOption.value),o.xp6(1),o.Q6J("ngIf",1===i.form.controls.chooseOption.value||2===i.form.controls.chooseOption.value&&!i.form.controls.classroomFormArray.errors),o.xp6(1),o.Q6J("ngIf",!o.xi3(20,15,i.examWithPermissionObj,"exam"))}}function W(s,u){1&s&&(o.TgZ(0,"div",36)(1,"p",34),o._uU(2),o.ALo(3,"mytranslate"),o.qZA()()),2&s&&(o.xp6(2),o.Oqu(o.lcZ(3,1,"lang_auto_chua_duoc_cau_hinh_tra_de_thi")))}function D(s,u){if(1&s&&(o.YNc(0,W,4,3,"div",35),o.ALo(1,"fullPermission")),2&s){const i=o.oxw(2);o.Q6J("ngIf",!o.xi3(1,1,i.examWithPermissionObj,"exam"))}}function U(s,u){if(1&s&&(o.TgZ(0,"form",11),o.YNc(1,P,21,18,"ng-container",12),o.ALo(2,"fullPermission"),o.YNc(3,D,2,4,"ng-template",null,13,o.W1O),o.qZA()),2&s){const i=o.MAs(4),c=o.oxw();o.Q6J("formGroup",c.form),o.xp6(1),o.Q6J("ngIf",o.xi3(2,3,c.examWithPermissionObj,"exam"))("ngIfElse",i)}}function f(s,u){if(1&s){const i=o.EpF();o.TgZ(0,"div",37)(1,"button",38),o.NdJ("click",function(){o.CHM(i);const A=o.oxw();return o.KtG(A.btnCloseDialog(!1))}),o._uU(2),o.ALo(3,"mytranslate"),o.qZA()()}2&s&&(o.xp6(2),o.hij(" ",o.lcZ(3,1,"lang_auto_dong")," "))}let w=(()=>{class s extends z.e{btnCloseDialog(i){this.dialogRef.close(i)}copyLinkToClipboard(){let i=this.commonService.getCurrentDomain();return this.linkCopy=`${i}/de-thi/${this.examWithPermissionObj?.hashId}?offline=${this.offlineCode}`,this.linkCopy}showCopySuccess(){this.showSuccessSnack("lang_auto_sao_chep_thanh_cong")}getCodeOfflineShare(){this.initStatusObj(),this.waitDestroy(this.offlineShareService.apiOfflineShareGetObjGet(this.examHashId).subscribe(i=>{1==i.success?(this.offlineCode=i.data?.shareHashId??"",this.shareClassroomIds=i.data?.shareClassroomIds??[],this.examWithPermissionObj=i.data?.examObj,this.classroomWithGroup=[{groupObj:{id:-1,name:this.commonService.myTranslateInstant("lang_testbank_share_offline_default_group")},classroomObjs:i.data?.classroomObjs??[]}],this.form.controls.chooseOption.setValue(i.data?.showOfflineResult??0),this.successStatusObj()):this.errorStatusObj(i.message??"",!0)}))}changeStatusOfflineShare(i){if(2==this.form.getRawValue().chooseOption&&this.form.controls.classroomFormArray.errors?.classroomCheckBoxValidatorWithoutWhoAllow)return;let c=this.form.getRawValue().chooseOption;const A=2!=c?[]:this.sAztClassroomCheckboxService.getClassroomIdsCheckedInGroup(this.form.controls.classroomFormArray);this.waitDestroy(this.offlineShareService.apiOfflineShareChangeStatusPost({examHashId:this.examWithPermissionObj?.hashId??"",status:c,classroomIds:A}).subscribe(F=>{1==F.success?this.offlineCode=F.data?.shareHashId??"":this.errorStatusObj(F.message??"",!0)}))}ngAfterContentChecked(){this.changeDetector.detectChanges()}ngOnInit(){super.ngOnInit(),this.getCodeOfflineShare()}constructor(i,c,A,E,F){super(E,A),this.changeDetector=i,this.offlineShareService=c,this.dialogRef=A,this.sAztClassroomCheckboxService=F,this.examHashId="",this.useDialog=!1,this.permissionTypes=M.y,this.offlineCode="",this.linkCopy="",this.examWithPermissionObj=void 0,this.classroomWithGroup=[],this.shareClassroomIds=[],this.examHashId=E.examHashId?E.examHashId:this.examHashId,this.useDialog=E?E.useDialog:this.useDialog,this.form=new t.cw({chooseOption:new t.NI(0,{nonNullable:!0}),whoAllow:new t.NI(0,{nonNullable:!0}),classroomFormArray:new t.Oe([])},{validators:[e.h.classroomInGroupCheckBoxValidatorWithoutWhoAllow]})}}return s.\u0275fac=function(i){return new(i||s)(o.Y36(o.sBO),o.Y36(l.kN),o.Y36(r.so,8),o.Y36(r.WI,8),o.Y36(d.f))},s.\u0275cmp=o.Xpm({type:s,selectors:[["azt-offline-share"]],inputs:{examHashId:"examHashId",useDialog:"useDialog"},features:[o.qOj],decls:11,vars:6,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-3"],[1,"text-base","font-medium"],[1,"p-3","pt-0"],["class","flex justify-center items-center",4,"ngIf","ngIfElse"],["doneLoading",""],["class","text-right mt-3",4,"ngIf"],[1,"flex","justify-center","items-center"],[1,"w-4","h-4","inline-block"],[1,"sr-only","ml-2"],[3,"formGroup"],[4,"ngIf","ngIfElse"],["noFullPermission",""],[1,"flex","flex-col","sm:flex-row","mb-3"],[1,"form-check","mr-8"],["formControlName","chooseOption","id","notAllow","type","radio",1,"form-check-input",3,"value","change"],["for","notAllow",1,"form-check-label"],[1,"form-check","mr-8","mt-2","sm:mt-0"],["formControlName","chooseOption","id","allAllow","type","radio",1,"form-check-input",3,"value","change"],["for","allAllow",1,"form-check-label"],["formControlName","chooseOption","id","customAllow","type","radio",1,"form-check-input",3,"value","change"],["for","customAllow",1,"form-check-label"],["class","azt-list-classroom",4,"ngIf"],["class","azt-copy relative",4,"ngIf"],["class","mt-0",4,"ngIf"],[1,"azt-list-classroom"],[3,"form","classroomGroupData","shareClassroomIds","permissionName","defaultCssClass","changeCheckboxEvent"],[1,"azt-copy","relative"],["type","text","readonly","",1,"form-control","py-3","px-4","border-transparent","bg-slate-100","pr-10","text-primary",2,"padding-right","120px","cursor","pointer",3,"value"],["azt-track-service","practice-detail-isTsISlyAY",1,"btn","btn-outline-primary","absolute","my-auto","inset-y-0","right-0",2,"border-top-left-radius","0","border-bottom-left-radius","0",3,"cdkCopyToClipboard","click"],[1,"w-4","h-4","inline-block","mr-2"],["name","copy"],[1,"mt-0"],[1,"note"],["class","text-center",4,"ngIf"],[1,"text-center"],[1,"text-right","mt-3"],["azt-track-service","azt-offline-share-hrBGx7oL2r",1,"btn","w-24","btn-secondary",3,"click"]],template:function(i,c){if(1&i&&(o.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),o._uU(4),o.ALo(5,"mytranslate"),o.qZA()(),o.TgZ(6,"div",4),o.YNc(7,S,5,0,"div",5),o.YNc(8,U,5,6,"ng-template",null,6,o.W1O),o.YNc(10,f,4,3,"div",7),o.qZA()()()),2&i){const A=o.MAs(9);o.xp6(4),o.Oqu(o.lcZ(5,4,"lang_auto_tra_ket_qua_thi_offline")),o.xp6(3),o.Q6J("ngIf",c.statusObj.loading)("ngIfElse",A),o.xp6(3),o.Q6J("ngIf",c.useDialog)}},dependencies:[m.O5,v.i3,t._Y,t.Fj,t._,t.JJ,t.JL,t.sg,t.u,I.Nh5,b.M,n._,k.n,B.JV,B.NK],encapsulation:2}),s})()},62836:(Q,T,a)=>{a.d(T,{H:()=>j});var t=a(65879),r=a(19347),z=a(72164),M=a(89745),e=a(89156),o=a(10504),l=a(71518),d=a(97151),m=a(92296),v=a(94690),I=a(56260),b=a(3849),n=a(49870),k=a(17997),B=a(96814),S=a(70342),y=a(77988),p=a(92596),O=a(37722),P=a(80034),W=a(34340),D=a(78497),U=a(52467),f=a(71646),w=a(36727);function s(x,N){if(1&x&&(t.TgZ(0,"a",31),t.ALo(1,"mytranslate"),t.TgZ(2,"span",21),t._UZ(3,"lucide-icon",32),t.qZA()()),2&x){t.oxw(2);const _=t.MAs(3);t.s9C("matTooltip",t.lcZ(1,2,"lang_auto_tai_ve")),t.Q6J("matMenuTriggerFor",_)}}function u(x,N){if(1&x){const _=t.EpF();t.TgZ(0,"a",33),t.NdJ("click",function(){t.CHM(_);const C=t.oxw(2);return t.KtG(C.showCopySuccess())}),t.ALo(1,"mytranslate"),t.TgZ(2,"span",5),t._UZ(3,"lucide-icon",34),t.qZA(),t.TgZ(4,"span"),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()()}if(2&x){const _=t.oxw(2);t.s9C("matTooltip",t.lcZ(1,3,"lang_auto_copy_link_de_thi")),t.Q6J("cdkCopyToClipboard",_.copyLinkExam()),t.xp6(5),t.Oqu(t.lcZ(6,5,"lang_auto_copy_link"))}}function i(x,N){1&x&&(t.TgZ(0,"div",35)(1,"span",36),t._UZ(2,"azt-loading-ui"),t.qZA(),t.TgZ(3,"span",37),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()()),2&x&&(t.xp6(4),t.Oqu(t.lcZ(5,1,"lang_auto_dang_chuan_bi_tai_lieu_doing")))}function c(x,N){if(1&x&&(t.TgZ(0,"div",38),t._UZ(1,"div",39),t.ALo(2,"safeAdminHtmlContent"),t.qZA()),2&x){const _=t.oxw(2);t.xp6(1),t.Q6J("innerHtml",t.lcZ(2,1,_.data.headerContent),t.oJD)}}function A(x,N){if(1&x&&t._UZ(0,"azt-loaded-img",40),2&x){const _=t.oxw(2);t.Q6J("imgSrc",_.data.obj.examHeader)}}function E(x,N){if(1&x&&t._UZ(0,"azt-question-standalone-for-preview",42),2&x){const _=t.oxw(),g=_.$implicit,C=_.index,L=t.oxw(2);t.Q6J("examObj",L.examObj)("questionObj",g)("follower",L.followerRenderQuest)("curQuestionIndex",C)("isShowExplain",L.showExplanation)}}function F(x,N){if(1&x&&(t.ynx(0),t.YNc(1,E,1,5,"azt-question-standalone-for-preview",41),t.BQk()),2&x){const _=t.oxw(2);t.xp6(1),t.Q6J("ngIf",_.examObj)}}function h(x,N){if(1&x){const _=t.EpF();t.ynx(0),t.TgZ(1,"div",11)(2,"div",12)(3,"div",13)(4,"div",14)(5,"div",15),t.YNc(6,s,4,4,"a",16),t.YNc(7,u,7,7,"a",17),t.TgZ(8,"button",18),t.NdJ("click",function(){t.CHM(_);const C=t.oxw();return t.KtG(C.showAllExplanation())}),t._uU(9),t.ALo(10,"mytranslate"),t.ALo(11,"mytranslate"),t.qZA()()(),t.TgZ(12,"div",19)(13,"a",20)(14,"span",21),t._UZ(15,"lucide-icon",22),t.qZA()()()(),t.TgZ(16,"azt-mat-dialog-content",23),t.YNc(17,i,6,3,"div",24),t.TgZ(18,"div",25),t._UZ(19,"div",26),t.YNc(20,c,3,3,"div",27),t.YNc(21,A,1,1,"azt-loaded-img",28),t.YNc(22,F,2,1,"ng-container",29),t._UZ(23,"div",30),t.qZA()()()(),t.BQk()}if(2&x){const _=t.oxw();t.xp6(6),t.Q6J("ngIf",!(null!=_.data&&_.data.globalLadingPage||_.data.allowHeader)),t.xp6(1),t.Q6J("ngIf",0==(null==_.data?null:_.data.isOnLib)&&!(null!=_.data&&_.data.globalLadingPage)),t.xp6(2),t.Oqu(_.showExplanation?t.lcZ(10,8,"lang_auto_an_giai_thich"):t.lcZ(11,10,"lang_auto_xem_giai_thich")),t.xp6(7),t.Q6J("defaultHeight",70),t.xp6(1),t.Q6J("ngIf",_.statusObj.loading),t.xp6(3),t.Q6J("ngIf",_.data.allowHeader&&!_.statusObj.loading),t.xp6(1),t.Q6J("ngIf",null==_.data||null==_.data.obj?null:_.data.obj.examHeader),t.xp6(1),t.Q6J("ngForOf",_.questionList)}}function Z(x,N){if(1&x){const _=t.EpF();t.TgZ(0,"azt-export-excel-for-answersheet",43),t.NdJ("exportDataDone",function(C){t.CHM(_);const L=t.oxw();return t.KtG(L.exportDataDone(C))}),t.qZA()}if(2&x){const _=t.oxw();let g;t.Q6J("startQuestionIndex",null!==(g=null==_.examObj?null:_.examObj.startQuestionIndex)&&void 0!==g?g:1)("obj",_.exportExcelData)}}let j=(()=>{class x extends z.e{btnCloseDialog(){this.closeDialog.emit()}copyLinkExam(){return`${this.commonService.getCurrentDomain()}/de-thi/${this.data?.obj?.hashId}`}showCopySuccess(){this.commonService.snackSuccess("lang_auto_sao_chep_thanh_cong")}downloadExam(_){let g=this.commonService.myTranslateInstant("lang_auto_dang_khoi_tao_du_lieu")??"";e.G.openLoadingEffect(`${g}...`);let C={nameSchool:this.printAddInfo.nameSchool??"",nameSubject:this.printAddInfo.nameSubject??""},L=this.printAddInfo.templateType??0;this.data.obj&&(this.data.obj.hideGroupQuestion=0,this.exportSAztDocxService.downloadExam(_,{...this.data.obj,editable:!1,allowStudentView:!0},void 0,void 0,this.cloneQuestionList,C,L,void 0,void 0,void 0,!0).catch(R=>{this.showErrorSnack(R.message)}))}getConfigExam(){this.documentConfigService.apiDocumentConfigGetExamConfigDataV2Get(this.examObj?.hashId??"").subscribe(_=>{if(1==_.success){let g=0,C=0;this.questionList.forEach((L,R)=>{L.labelIndex=R,_.data?.resetQuestionIndex&&L.groupInfo&&L.groupInfo.groupId&&(g!=L.groupInfo.groupId&&(g=L.groupInfo.groupId,C=0),L.labelIndex=C,C++)},this.questionList)}this.successStatusObj()})}getData(_){this.initStatusObj(),this.data?.globalLadingPage?this.examService.apiExamGetGlobalQuestionsIdGet(_?.id??0).subscribe(g=>{const C=this.commonService.castJsonToClassObjs(M.v,JSON.stringify(g.data?.questionObjs||[]))??[];this.followerRenderQuest.setNumQuest(C.length),this.addRoleQuestion(C),this.cloneQuestionList=this.commonService.myClone(C),this.questionList=C,this.examObj=g.data?.examObj,this.getConfigExam()}):this.permissionService.hasViewPermission("exam",_)?this.examService.apiExamGetQuestionsIdGet(_?.id??0).subscribe(g=>{const C=this.commonService.castJsonToClassObjs(M.v,JSON.stringify(g.data?.questionObjs||[]))??[];this.followerRenderQuest.setNumQuest(C.length),this.addRoleQuestion(C),this.cloneQuestionList=this.commonService.myClone(C),this.questionList=C,this.examObj=g.data?.examObj,this.getConfigExam()}):this.showErrorSnack("lang_auto_ban_khong_co_quyen_thuc_thi_chuc_nang_nay")}addRoleQuestion(_){for(let g=0;g<_.length;g++)_[g].isRoleTeacher=!0}downloadExamAnswer(){this.waitDestroy(this.offlineExamExportService.apiOfflineExamExportExportResultOfRawExamGet(this.examObj?.hashId??"").subscribe(_=>{if(_.success){let g=_.data?.obj;g?.offlineMixQuestionObjs&&g.offlineMixQuestionObjs.length>0&&(this.exportExcelData=this.commonService.myClone(g))}else this.errorStatusObj(_.message??"")}))}exportDataDone(_){let g=this.createNameExam("answerexcel",!1);this.shareFileFlutterService.shareFileWithBlob(_,g)}createNameExam(_,g){let C="";C="answersheet"==_?this.printAnswersheetService.exportFileNameOfAnswerSheet(0,this.examObj?.name??"",""):"answerexcel"==_?this.printAnswersheetService.exportFileNameOfAnswerExcelOffline(0,this.examObj?.name??"",""):this.printAnswersheetService.exportFileNameOfExamOffline(0,this.examObj?.name??"","",void 0),g&&(C=this.commonService.replaceAll(C,"_","-")??"");let L=".docx";return L="answersheet"==_?".pdf":L,L="answerexcel"==_?".xlsx":L,C+L}showAllExplanation(){this.showExplanation=!this.showExplanation}ngOnChanges(){this.data?.obj&&this.getData(this.data.obj)}ngOnInit(){this.data?.obj&&this.getData(this.data.obj),super.ngOnInit()}constructor(_,g,C,L,R,K,G,H,J,Y){super(Y,J),this.documentConfigService=_,this.shareFileFlutterService=g,this.baseApiService=C,this.permissionService=L,this.exportSAztDocxService=R,this.examService=K,this.offlineExamExportService=G,this.printAnswersheetService=H,this.dialogRef=J,this.data=Y,this.closeDialog=new t.vpe,this.questionList=[],this.cloneQuestionList=[],this.followerRenderQuest=new o.p,this.printAddInfo={},this.showExplanation=!1}}return x.\u0275fac=function(_){return new(_||x)(t.Y36(l.Cq),t.Y36(d.g),t.Y36(m.V),t.Y36(v.j),t.Y36(I.F),t.Y36(b.O),t.Y36(n.qr),t.Y36(k.H),t.Y36(r.so,8),t.Y36(r.WI,8))},x.\u0275cmp=t.Xpm({type:x,selectors:[["azt-preview-exam"]],outputs:{closeDialog:"closeDialog"},features:[t.qOj,t.TTD],decls:25,vars:14,consts:[[4,"ngIf"],["menuDownload","matMenu"],[1,"dropdown-menu","show","relative","w-72"],[1,"dropdown-content"],["azt-track-service","azt-preview-exam-4UtiW7OU6PC",1,"dropdown-item",3,"click"],[1,"w-4","h-4","mr-2","flex-none"],["name","file-check"],["azt-track-service","azt-preview-exam--mJB2JKFgNu",1,"dropdown-item",3,"click"],["name","file-spreadsheet"],["name","file-text"],[3,"startQuestionIndex","obj","exportDataDone",4,"ngIf"],[1,"az-dialog-info"],[1,"box",2,"overflow-x","hidden"],[1,"flex","items-center","p-2","bg-slate-100","dark:bg-darkmode-400"],[1,"mr-auto"],[1,"flex","items-center","mr-2"],["class","btn btn-sm btn-outline-secondary btn-transparent mr-2",3,"matTooltip","matMenuTriggerFor",4,"ngIf"],["azt-track-service","azt-preview-exam-dgdyLZO48Hq","class","btn btn-sm btn-outline-secondary btn-transparent mr-2",3,"matTooltip","cdkCopyToClipboard","click",4,"ngIf"],[1,"btn","btn-sm","btn-outline-secondary","btn-transparent","mr-2",3,"click"],[1,"ml-auto"],["azt-track-service","azt-preview-exam-y2xqBN7DlGX",1,"btn","btn-transparent","btn-outline-danger","btn-sm",3,"mat-dialog-close"],[1,"w-4","h-4","flex-none"],["name","x"],[1,"mt-3",3,"defaultHeight"],["class","flex justify-center items-center h-40",4,"ngIf"],["id","boxContentQuestion",1,"p-2"],[1,"pt-3"],["class","box p-3 mb-3",4,"ngIf"],["style","display: block","class","mt-5",3,"imgSrc",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"py-5"],[1,"btn","btn-sm","btn-outline-secondary","btn-transparent","mr-2",3,"matTooltip","matMenuTriggerFor"],["name","download"],["azt-track-service","azt-preview-exam-dgdyLZO48Hq",1,"btn","btn-sm","btn-outline-secondary","btn-transparent","mr-2",3,"matTooltip","cdkCopyToClipboard","click"],["name","copy"],[1,"flex","justify-center","items-center","h-40"],[1,"w-4","h-4","inline-block"],[1,"sr-only","ml-2"],[1,"box","p-3","mb-3"],[2,"line-height","1.5",3,"innerHtml"],[1,"mt-5",2,"display","block",3,"imgSrc"],[3,"examObj","questionObj","follower","curQuestionIndex","isShowExplain",4,"ngIf"],[3,"examObj","questionObj","follower","curQuestionIndex","isShowExplain"],[3,"startQuestionIndex","obj","exportDataDone"]],template:function(_,g){1&_&&(t.YNc(0,h,24,12,"ng-container",0),t.ALo(1,"viewPermission"),t.TgZ(2,"mat-menu",null,1)(4,"div",2)(5,"ul",3)(6,"li")(7,"a",4),t.NdJ("click",function(){return g.downloadExam(!1)}),t.TgZ(8,"span",5),t._UZ(9,"lucide-icon",6),t.qZA(),t._uU(10),t.ALo(11,"mytranslate"),t.qZA()(),t.TgZ(12,"li")(13,"a",7),t.NdJ("click",function(){return g.downloadExamAnswer()}),t.TgZ(14,"span",5),t._UZ(15,"lucide-icon",8),t.qZA(),t._uU(16),t.ALo(17,"mytranslate"),t.qZA()(),t.TgZ(18,"li")(19,"a",7),t.NdJ("click",function(){return g.downloadExam(!0)}),t.TgZ(20,"span",5),t._UZ(21,"lucide-icon",9),t.qZA(),t._uU(22),t.ALo(23,"mytranslate"),t.qZA()()()()(),t.YNc(24,Z,1,2,"azt-export-excel-for-answersheet",10)),2&_&&(t.Q6J("ngIf",t.xi3(1,5,null==g.data?null:g.data.obj,"exam")||(null==g.data?null:g.data.globalLadingPage)),t.xp6(10),t.hij(" ",t.lcZ(11,8,"lang_auto_tai_xuong_de_thi")," "),t.xp6(6),t.hij(" ",t.lcZ(17,10,"lang_auto_tai_xuong_dap_an_de_thi")," "),t.xp6(6),t.hij(" ",t.lcZ(23,12,"lang_azt_download_exam_paper_with_detailed_answers")," "),t.xp6(2),t.Q6J("ngIf",null!=g.exportExcelData))},dependencies:[B.sg,B.O5,S.i3,r.ZT,y.VK,y.p6,p.gM,O.Nh5,P.y,W.A,D.R,U.S,f.n,w.JV,w.Tm,w.J7],encapsulation:2}),x})()}}]);