"use strict";(self.webpackChunkBalacoClient=self.webpackChunkBalacoClient||[]).push([[3606],{43166:(S,f,o)=>{o.d(f,{x:()=>e});var g=o(10936),u=o(48891),p=o(53793);let e=(()=>{var i;class m{filter(t,n){return null==t?[]:t=t.filter(r=>this.removeAllSpecialChars((null!=n?r[n]:r).toString()).includes(this.removeAllSpecialChars(this.searchControl.value)))}mergeSchoolLevel(t){let n=[];return t.forEach(r=>null!=r.schoolLevel&&n.push(r.schoolLevel)),n}removeAllSpecialChars(t){return t=(t=this.commonService.myTranslateInstant(t)??t).toLowerCase().trim(),t=this.commonService.convertVietnameseToEnglish(t),t=this.commonService.removeSpecialStringInSearch(t),(t=this.commonService.removeNonAlphabetic(t)).toLowerCase().trim()}constructor(t){this.commonService=t,this.searchControl=new g.MJ("",{nonNullable:!0})}}return(i=m).\u0275fac=function(t){return new(t||i)(u.rXU(p.R))},i.\u0275dir=u.FsC({type:i,selectors:[["","searchInList",""]],exportAs:["searchInList"]}),m})()},37320:(S,f,o)=>{o.d(f,{f:()=>s});var g=o(48891),u=o(53793),p=o(17838),e=o(82040),i=o(18447),m=o(85710),c=o(27035),t=o(5424);class n{addTask(h,l){if(null!=l&&this.baseResultCache.has(l))return this.baseResultCache.get(l).asObservable();const d=new p.m(1);return null!=l&&this.baseResultCache.set(l,d),this.baseTaskQueue$?.next(h.pipe((0,e.M)({next:v=>{!v.success&&null!=l&&this.baseResultCache.delete(l),d.next(v)},error:()=>{null!=l&&this.baseResultCache.delete(l),d.next({success:0,message:"lang_common_error_at_task_queue",data:void 0})}}))),d.asObservable()}resetQueue(){this.stopQueue(),this.baseDestroy$=new i.B,this.baseSubscription=new m.yU,this.initializeQueue()}resetConcurrency(h){this.baseLimitConcurrency!=h&&this.initializeQueue()}initializeQueue(){this.baseTaskQueue$=new i.B;const h=this.baseTaskQueue$.pipe((0,c.Z)(l=>l.pipe((0,t.Q)(this.baseDestroy$)),this.baseLimitConcurrency)).subscribe({next:l=>{},error:l=>{},complete:()=>{}});this.baseSubscription.add(h)}stopQueue(){this.baseDestroy$.next(),this.baseDestroy$.complete(),this.baseSubscription.unsubscribe(),this.baseTaskQueue$=null,this.baseResultCache.clear()}constructor(h=10){this.baseLimitConcurrency=h,this.baseTaskQueue$=null,this.baseDestroy$=new i.B,this.baseSubscription=new m.yU,this.baseResultCache=new Map,this.initializeQueue()}}var r=o(96246),a=o(35810);let s=(()=>{var _;class h extends n{callApiToGuestKnowledge(d,v,T,E){if(""==this.standardQuestionData(v))return T(void 0,void 0,void 0);let A={questionId:d?v.questionId:void 0,text:d?void 0:this.standardQuestionData(v),levelId:v.levelId,subjectId:v.subjectId,ebankId:v.ebankId},y=this.aiService.apiAiPredictQuestionKnowledgePost(A);this.addTask(y,this.sAztEncryptService.createMd5(this.commonService.serializeJson(A))).subscribe(C=>C.success?"vip_required"==C.errorCode?E("lang_core_need_vip_upgrade"):!C.data||C.data.score<this.AI_MIN_SCORE?T(void 0,void 0,void 0):void T(C.data.knowledgeId,C.data.objectiveId,C.data.tagId):E(C.message))}standardQuestionData(d){let v=this.commonService.parseQuestionContent(d.questionContent);return v+=" "+this.commonService.parseQuestionContent(d.answerContents.join(" - ")),v.trim()}constructor(){super(2),this.commonService=(0,g.WQX)(u.R),this.aiService=(0,g.WQX)(r.Ee),this.sAztEncryptService=(0,g.WQX)(a.v),this.AI_MIN_SCORE=2.8}}return(_=h).\u0275fac=function(d){return new(d||_)},_.\u0275prov=g.jDH({token:_,factory:_.\u0275fac,providedIn:"root"}),h})()},34292:(S,f,o)=>{o.d(f,{c:()=>p});var g=o(18447),u=o(48891);let p=(()=>{var e;class i{constructor(){this.checkQuestion=new g.B}listenSetTagEventOfAllQuestions(){return this.checkQuestion}sendSetTagEvent(c){this.checkQuestion.next(c)}}return(e=i).\u0275fac=function(c){return new(c||e)},e.\u0275prov=u.jDH({token:e,factory:e.\u0275fac,providedIn:"root"}),i})()},68106:(S,f,o)=>{o.d(f,{c:()=>m});var g=o(48891),u=o(51698),p=o(88249),e=o(53793),i=o(9280);let m=(()=>{var c;class t{constructor(){this.questionService=(0,g.WQX)(i.wP),this.commonService=(0,g.WQX)(e.R),this.replayCache$=null}callApiSetTagForTrueFalseQuestion(r,a,s){return new u.c(_=>{let h=r.configAnswers.find(d=>d.key==a);this.questionService.apiQuestionUpdateQuestionKnowledgePost({questions:[{questionId:r.id,answers:[{answerKey:a,objectiveId:h?.objectiveId,tag:s?.code??""}]}]}).subscribe(d=>{if(!d)return _.next(!1),_.complete(),this.commonService.snackError("lang_update_question_tag_unsuccessfully");this.commonService.snackSuccess("lang_update_question_tag_successfully"),_.next(!0),_.complete()})})}formatTag(r){return r.map(a=>({...a,showName:this.commonService.getValueOfKeyInObject(a,this.commonService.getCurrentLang()+"Name")??a.enName??"Empty"}))}getQuestionTags(){return this.replayCache$||(this.replayCache$=new u.c(r=>{this.questionService.apiQuestionGetTagsGet().subscribe(a=>{if(!a.success)return this.commonService.snackError(a.message);r.next(a.data?.objs?.filter(s=>"VDC"!=s.code)??[]),r.complete()})}).pipe((0,p.t)(1))),this.replayCache$}findCurrentTag(r,a,s){let _=a.find(l=>this.commonService.compareLowerCase(l.key,s))?.tagId,h=r.find(l=>l.id==_);return h?"azt_lang_tag_"+h.code:""}}return(c=t).\u0275fac=function(r){return new(r||c)},c.\u0275prov=g.jDH({token:c,factory:c.\u0275fac,providedIn:"root"}),t})()},99743:(S,f,o)=>{o.d(f,{I:()=>e});var g=o(48891),u=o(53793),p=o(99927);let e=(()=>{var i;class m{constructor(){this.commonService=(0,g.WQX)(u.R),this.sAztAnswerTypeService=(0,g.WQX)(p._)}changeObjectiveForCommonQuestion(t,n){return t.objectiveId=n.objectiveId,t}changeObjectiveForTrueFalseQuestion(t,n,r){return t.configAnswers.find(a=>a.key==r)||t.configAnswers.push({key:r,objectiveId:n.objectiveId}),t}changeTagForCommonQuestion(t,n){return t.tags=n,t}changeTagForTrueFalseQuestion(t,n,r){let a=this.commonService.getFirstOfArray(r);return t.configAnswers.find(s=>s.key==n)?(t.configAnswers.forEach(s=>{s.key==n&&(s.tagId=a?.id,s.tagName=a?.name,s.tagCode=a?.code)}),t):(t.configAnswers.push({key:n,knowledgeId:void 0,objectiveId:void 0,tagCode:a?.code,tagId:a?.id,tagName:a?.name}),t)}changeTagForCommonQuestView(t,n){return t.tag=n,t}changeTagForTrueFalseQuestView(t,n,r){let a=this.commonService.getFirstOfArray(r);return t.configAnswers||(t.configAnswers=[]),t.configAnswers.find(s=>s.key==n)?(t.configAnswers.forEach(s=>{s.key==n&&(s.tagId=a?.id,s.tagName=a?.name,s.tagCode=a?.code)}),t):(t.configAnswers.push({key:n,knowledgeId:void 0,objectiveId:void 0,tagCode:a?.code,tagId:a?.id,tagName:a?.name}),t)}}return(i=m).\u0275fac=function(t){return new(t||i)},i.\u0275prov=g.jDH({token:i,factory:i.\u0275fac,providedIn:"root"}),m})()},50334:(S,f,o)=>{o.d(f,{C:()=>u});var g=o(59640);class u extends g.H{constructor(){super(...arguments),this.nodeObjs=[]}searchByText(e){this.nodeObjs=(e=this.standardSearchText(e)).trim()?this.doSearchByText(e,this.nodeObjs,[]):this.showAndExpandAll(this.nodeObjs)}expand(e){e.isExpand=!0}collapse(e){e.isExpand=!1}doSearchByText(e,i,m){for(var c of i){c.isShow=!1;let t=this.standardSearchText(c.text);(e.includes(t)||t.includes(e))&&(c.isShow=!0,c.isExpand=!0,m.forEach(n=>{n.isShow=!0,n.isExpand=!0})),c.children.length&&(c.children=this.doSearchByText(e,c.children,m.concat(c)))}return i}showAndExpandAll(e){for(var i of e)i.isShow=!0,i.isExpand=!0,i.children=this.showAndExpandAll(i.children);return e}standardSearchText(e){return e=e.toLowerCase(),e=this.commonService.removeSpecialStringInSearch(e),this.commonService.convertVietnameseToEnglish(e)}}},11002:(S,f,o)=>{o.d(f,{$:()=>e});var g=o(59640),u=o(48891);const p=["*"];let e=(()=>{var i;class m extends g.H{constructor(){super(...arguments),this.colorBackground="",this.defaultHeight="45px",this.fixToTopWidth=0,this.fixToTopTop=0}onWindowScroll(){let t=document.querySelector(".azt-content"),n=document.getElementById("flexed-on-top"),r=document.getElementById("position-dev")?.getBoundingClientRect();if(!t||!n||!r)return;let a=window.pageYOffset,s=r.top,_=s<-50;if(this.fixToTopWidth=r.width,this.fixToTopTop=r.top,_){n.style.position="fixed",n.style.zIndex="9999",n.style.height=this.defaultHeight,n.style.right=this.isMobileWebView?"0":"12px",n.style.background=this.colorBackground,n.style.justifyContent="end";let h=t.getBoundingClientRect().width;this.isMobileDevice?(n.style.top="62px",n.style.padding="6px 15px",n.style.width=(h+32).toString()+"px"):(n.style.top="0",n.style.padding="6px 22px",n.style.width=(h+44).toString()+"px")}else(0==a||0==s)&&(n.style.position="",n.style.top="",n.style.right="",n.style.zIndex="",n.style.height="",n.style.padding="",n.style.background="",n.style.width="",n.style.justifyContent="")}}return(i=m).\u0275fac=(()=>{let c;return function(n){return(c||(c=u.xGo(i)))(n||i)}})(),i.\u0275cmp=u.VBU({type:i,selectors:[["flexed-on-the-top"]],hostBindings:function(t,n){1&t&&u.bIt("scroll",function(a){return n.onWindowScroll(a)},!1,u.tSv)},inputs:{colorBackground:"colorBackground",defaultHeight:"defaultHeight"},features:[u.Vt3],ngContentSelectors:p,decls:3,vars:0,consts:[["id","position-dev"],["id","flexed-on-top",1,"flex","flexed-on-top"]],template:function(t,n){1&t&&(u.NAR(),u.nrm(0,"div",0),u.j41(1,"div",1),u.SdG(2),u.k0s())},encapsulation:2}),m})()},75421:(S,f,o)=>{o.d(f,{u:()=>a});var g=o(10936),u=o(89163),p=o(33887),e=o(48891),i=o(54460),m=o(15343),c=o(76975);const t=()=>({"mr-2 text-danger":!0});function n(s,_){if(1&s&&e.nrm(0,"lucide-icon",10),2&s){const h=e.XpG();e.Y8G("name",h.data.iconName)("ngClass",e.lJ4(2,t))}}function r(s,_){if(1&s&&(e.j41(0,"div",11)(1,"div",3)(2,"span"),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"b"),e.EFF(6),e.k0s(),e.j41(7,"span"),e.EFF(8),e.nI1(9,"mytranslate"),e.k0s()(),e.j41(10,"div",12),e.nrm(11,"input",13),e.k0s()()),2&s){const h=e.XpG();e.R7$(3),e.JRh(e.bMT(4,4,"lang_azt_enter")+" "),e.R7$(3),e.JRh('"'+h.data.textConfirm+'" '),e.R7$(2),e.JRh(e.bMT(9,6,"lang_azt_for_delete_data")),e.R7$(3),e.Y8G("formControl",h.confirmValue)}}let a=(()=>{var s;class _ extends p._{btnCloseDialog(){this.dialogRef.close(!1)}confirmDialog(){this.dialogRef.close(!0)}constructor(l,d){super(d,l),this.dialogRef=l,this.data=d,this.confirmValue=new g.MJ("",{nonNullable:!0})}}return(s=_).\u0275fac=function(l){return new(l||s)(e.rXU(u.CP,8),e.rXU(u.Vh,8))},s.\u0275cmp=e.VBU({type:s,selectors:[["azt-dialog-danger"]],features:[e.Vt3],decls:14,vars:10,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5"],[1,"text-md"],["size","24",3,"name","ngClass",4,"ngIf"],[1,"text-md",3,"innerHtml"],["class","mt-3",4,"ngIf"],[1,"p-3","text-right"],["azt-track-service","azt-dialog-danger-9EJYp6jGzr",1,"btn","w-24","btn-secondary","mr-2",3,"click"],["azt-track-service","azt-dialog-danger-ffMh3NrPRC",1,"btn","w-24","btn-danger",3,"click","disabled"],["size","24",3,"name","ngClass"],[1,"mt-3"],[1,"mt-2"],["type","text",1,"form-control",3,"formControl"]],template:function(l,d){1&l&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),e.DNE(4,n,1,3,"lucide-icon",4),e.nrm(5,"span",5),e.k0s(),e.DNE(6,r,12,8,"div",6),e.k0s()(),e.j41(7,"div",7)(8,"button",8),e.bIt("click",function(){return d.btnCloseDialog()}),e.EFF(9),e.nI1(10,"mytranslate"),e.k0s(),e.j41(11,"button",9),e.bIt("click",function(){return d.confirmDialog()}),e.EFF(12),e.nI1(13,"mytranslate"),e.k0s()()()),2&l&&(e.R7$(4),e.Y8G("ngIf",d.data.iconName),e.R7$(),e.Y8G("innerHtml",d.data.content,e.npT),e.R7$(),e.Y8G("ngIf",d.data.textConfirm),e.R7$(3),e.SpI(" ",e.bMT(10,6,"lang_auto_huy")," "),e.R7$(2),e.Y8G("disabled",d.data.textConfirm&&d.data.textConfirm!==d.confirmValue.value),e.R7$(),e.SpI(" ",e.bMT(13,8,"lang_auto_xac_nhan")," "))},dependencies:[i.YU,i.bT,g.me,g.BC,g.l_,m.WGl,c.wp],encapsulation:2}),_})()}}]);