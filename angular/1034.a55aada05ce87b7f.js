"use strict";(self.webpackChunkBalacoClient=self.webpackChunkBalacoClient||[]).push([[1034],{51034:(k,p,s)=>{s.r(p),s.d(p,{LadingPageModule:()=>Ft});var g=s(54460),c=s(10936),b=s(89163),m=s(65162),G=s(6791),u=s(69223),h=s(15437),_=s(15343),I=s(13763),O=s(25571),A=s(5502),R=s(70050),z=s(7050),P=s(91100),M=s(43234),L=s(46584),B=s(1133),T=s(76627),y=s(59640),$=s(37497),t=s(26860),f=s(9280),w=s(15485),F=s(18350),S=s(36484),N=s(18718),Y=s(22613),X=s(86972),V=s(92274),U=s(45306),W=s(43362),J=s(51221),Q=s(9306),H=s(37581),K=s(92654),Z=s(46899),q=s(30977),tt=s(50589),et=s(31291),at=s(23356),nt=s(47712),ot=s(69135),it=s(94743),v=s(73437);const D=function(a){return{active:a}},st=function(a){return[a]};function rt(a,r){if(1&a&&(t.j41(0,"li",12)(1,"a",13),t.nI1(2,"navigationLocalize"),t.EFF(3),t.nI1(4,"mytranslate"),t.k0s()()),2&a){const e=t.XpG();t.Y8G("ngClass",t.eq3(7,D,2885==e.currentCategoryId||0==e.currentCategoryId)),t.R7$(1),t.Y8G("routerLink",t.eq3(9,st,t.bMT(2,3,"/ladingpage/document-management/0/0/1"))),t.R7$(2),t.SpI(" ",t.bMT(4,5,"azt_lang_core_share_global_azota")," ")}}const lt=function(a){return{clickable:a}},ct=function(a){return{"truncate-bread":a}};function mt(a,r){if(1&a){const e=t.RV6();t.j41(0,"li",14)(1,"a",15),t.bIt("click",function(){const i=t.eBV(e).$implicit,l=t.XpG();return t.Njj(l.backToParentCategoryEvent(i))}),t.j41(2,"span",16,17),t.nI1(4,"mytranslate"),t.j41(5,"span"),t.EFF(6),t.nI1(7,"mytranslate"),t.k0s()()()()}if(2&a){const e=r.$implicit,o=t.sdS(3),n=t.XpG();t.Y8G("ngClass",t.eq3(11,D,e.id==n.currentCategoryId)),t.R7$(1),t.Y8G("ngClass",t.eq3(13,lt,e.id!=n.currentCategoryId)),t.R7$(1),t.FS9("matTooltip",t.bMT(4,7,e.name)),t.Y8G("ngClass",t.eq3(15,ct,e.id!=n.currentCategoryId))("isDisabledTooltip",!1)("matTooltipDisabled",o.isDisabled),t.R7$(4),t.JRh(t.bMT(7,9,e.name))}}function gt(a,r){1&a&&(t.j41(0,"div",18)(1,"div",19),t.nrm(2,"azt-svg-icon",20),t.j41(3,"p",21),t.EFF(4),t.nI1(5,"mytranslate"),t.k0s()()()),2&a&&(t.R7$(2),t.Y8G("size",84),t.R7$(2),t.SpI("",t.bMT(5,2,"lang_not_found_search"),"!"))}function dt(a,r){if(1&a&&(t.qex(0),t.eu8(1,22),t.bVm()),2&a){t.XpG();const e=t.sdS(14);t.R7$(1),t.Y8G("ngTemplateOutlet",e)}}function ut(a,r){1&a&&t.nrm(0,"div",37)}function pt(a,r){1&a&&(t.qex(0),t.nrm(1,"azt-svg-icon",51),t.bVm()),2&a&&(t.R7$(1),t.Y8G("size",24))}function bt(a,r){1&a&&(t.j41(0,"span"),t.nrm(1,"azt-svg-icon",53),t.k0s()),2&a&&(t.R7$(1),t.Y8G("size",24))}function ht(a,r){1&a&&t.nrm(0,"azt-svg-icon",54),2&a&&t.Y8G("size",24)}function _t(a,r){if(1&a&&(t.DNE(0,bt,2,1,"span",45),t.DNE(1,ht,1,1,"ng-template",null,52,t.C5r)),2&a){const e=t.sdS(2),o=t.XpG().$implicit;t.Y8G("ngIf",o.shared)("ngIfElse",e)}}function yt(a,r){1&a&&(t.j41(0,"span",55),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&a&&(t.R7$(1),t.SpI(" ",t.bMT(2,1,"lang_auto_de_chung_azota")," "))}function ft(a,r){1&a&&(t.j41(0,"span",56),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&a&&(t.R7$(1),t.JRh(t.bMT(2,1,"lang_auto_chia_se")))}const vt=function(a,r){return{"w-60":a,"w-52":r}};function xt(a,r){if(1&a){const e=t.RV6();t.j41(0,"div",38)(1,"div",39)(2,"div",40)(3,"div",41)(4,"div",42)(5,"div",43),t.bIt("click",function(){const i=t.eBV(e).$implicit,l=t.XpG(2);return t.Njj(l.handleOpenFolder(i))}),t.j41(6,"div",44),t.DNE(7,pt,2,1,"ng-container",45),t.DNE(8,_t,3,2,"ng-template",null,46,t.C5r),t.k0s(),t.j41(10,"div",47,17),t.nI1(12,"mytranslate"),t.j41(13,"span"),t.EFF(14),t.nI1(15,"mytranslate"),t.k0s()(),t.DNE(16,yt,3,3,"span",48),t.DNE(17,ft,3,3,"span",49),t.k0s()()(),t.nrm(18,"div",50),t.k0s()()()}if(2&a){const e=r.$implicit,o=t.sdS(9),n=t.sdS(11),i=t.XpG(2);t.FS9("id","folder_"+e.id),t.R7$(5),t.Y8G("ngClass",t.l_i(17,vt,-1==e.id,-1!=e.id)),t.R7$(2),t.Y8G("ngIf",1==e.isGlobalAzota)("ngIfElse",o),t.R7$(3),t.FS9("matTooltip",t.bMT(12,13,e.name)),t.Y8G("isDisabledTooltip",!1)("matTooltipDisabled",n.isDisabled),t.R7$(3),t.HbH(i.isMobileWebView&&-1!=e.id?"azt-wv-item-name":""),t.R7$(1),t.JRh(t.bMT(15,15,e.name)),t.R7$(2),t.Y8G("ngIf",-1!=e.id&&1==e.isGlobalAzota),t.R7$(1),t.Y8G("ngIf",-1==e.id)}}function Ct(a,r){1&a&&(t.nrm(0,"lucide-icon",71),t.nI1(1,"mytranslate")),2&a&&t.FS9("matTooltip",t.bMT(1,1,"lang_testbank_folder_and_file_published"))}function Tt(a,r){1&a&&(t.nrm(0,"lucide-icon",72),t.nI1(1,"mytranslate")),2&a&&t.FS9("matTooltip",t.bMT(1,1,"lang_testbank_folder_and_file_published"))}function St(a,r){if(1&a&&(t.j41(0,"span",73),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&a){const e=t.XpG(2).$implicit;t.R7$(1),t.Lme(" ",t.bMT(2,2,"lang_testbank_folder_and_file_number_attended"),": ",e.exam.attended," ")}}function Dt(a,r){1&a&&(t.j41(0,"div",74),t.nrm(1,"azt-svg-icon",75),t.nI1(2,"mytranslate"),t.k0s()),2&a&&(t.R7$(1),t.FS9("matTooltip",t.bMT(2,2,"lang_auto_da_chia_se")),t.Y8G("size",16))}function jt(a,r){if(1&a){const e=t.RV6();t.j41(0,"div",58)(1,"div",59)(2,"div",60)(3,"div")(4,"div",61),t.bIt("click",function(){t.eBV(e);const n=t.XpG().$implicit,i=t.XpG(2);return t.Njj(i.doExamAction(n.exam,i.enumDocumentDoExamActionType.SHOW_EXAM_DETAIL))}),t.j41(5,"div",62),t.DNE(6,Ct,2,3,"lucide-icon",63),t.DNE(7,Tt,2,3,"lucide-icon",64),t.k0s(),t.j41(8,"div",65,17)(10,"span",66),t.EFF(11),t.k0s(),t.DNE(12,St,3,4,"span",67),t.k0s(),t.DNE(13,Dt,3,4,"div",68),t.k0s()(),t.j41(14,"div")(15,"a",69),t.bIt("click",function(){t.eBV(e);const n=t.XpG().$implicit,i=t.XpG(2);return t.Njj(i.doExamAction(n.exam,i.enumDocumentDoExamActionType.SHOW_EXAM_DETAIL))}),t.EFF(16),t.nI1(17,"mytranslate"),t.k0s(),t.j41(18,"a",70),t.bIt("click",function(){t.eBV(e);const n=t.XpG().$implicit,i=t.XpG(2);return t.Njj(i.downLoadExam(n.exam))}),t.nI1(19,"mytranslate"),t.EFF(20),t.nI1(21,"mytranslate"),t.k0s()()()()()}if(2&a){const e=t.sdS(9),o=t.XpG().$implicit,n=t.XpG(2);t.R7$(3),t.ZvI("w-full flex items-center ",n.isMobileWebView?"":"mobile-80vw",""),t.R7$(3),t.Y8G("ngIf",1==o.exam.isPublished),t.R7$(1),t.Y8G("ngIf",1!=o.exam.isPublished),t.R7$(1),t.ZvI("ml-3 ",n.isMobileDevice?"truncate":"mr-5",""),t.FS9("matTooltip",o.exam.name),t.Y8G("isDisabledTooltip",!1)("matTooltipDisabled",e.isDisabled),t.R7$(2),t.ZvI("mb-0 d-block ",n.isMobileWebView?"azt-wv-item-name":"",""),t.R7$(1),t.SpI("",o.exam.name," "),t.R7$(1),t.Y8G("ngIf",n.isMobileWebView),t.R7$(1),t.Y8G("ngIf",o.shared),t.R7$(1),t.ZvI("flex items-center py-1 ",n.isMobileDevice?"mt-2":"",""),t.R7$(2),t.SpI(" ",t.bMT(17,23,"lang_auto_xem_noi_dung_de")," "),t.R7$(2),t.FS9("matTooltip",t.bMT(19,25,"lang_global_azota_download")),t.R7$(2),t.SpI(" ",t.bMT(21,27,"lang_global_azota_download")," ")}}function Et(a,r){if(1&a&&(t.qex(0),t.DNE(1,jt,22,29,"div",57),t.bVm()),2&a){const e=r.$implicit;t.R7$(1),t.Y8G("ngIf",e.exam)}}const kt=function(a,r){return{"overflow-x-auto":a,"overflow-x-visible":r}},j=function(a){return{"min-width":a}},Gt=function(a,r){return{"col-span-4":a,"col-span-12":r}},It=function(a,r){return{"ml-5":a,"ml-3":r}},E=function(a){return{"text-primary stroke-width-2.5":a}},Ot=function(){return{"-mt-2":!0}};function At(a,r){if(1&a){const e=t.RV6();t.j41(0,"form",23)(1,"div",24)(2,"div",25)(3,"div",26)(4,"div",27)(5,"div",28),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.sortDocumentByColumn(n.enumDocumentSortType.BY_NAME,null==n.currentDocumentSortTypeObj?null:n.currentDocumentSortTypeObj.isAscSort))}),t.EFF(6),t.nI1(7,"mytranslate"),t.j41(8,"div",29),t.nrm(9,"lucide-icon",30)(10,"lucide-icon",31),t.k0s()()(),t.DNE(11,ut,1,0,"div",32),t.k0s()(),t.j41(12,"div",33),t.DNE(13,xt,19,20,"div",34),t.DNE(14,Et,2,1,"ng-container",35),t.k0s(),t.nrm(15,"div",36),t.k0s()()}if(2&a){const e=t.XpG();t.Y8G("formGroup",e.form),t.R7$(1),t.Y8G("ngClass",t.l_i(15,kt,!e.isMobileDevice,e.isMobileDevice)),t.R7$(1),t.Y8G("ngStyle",t.eq3(18,j,e.isMobileWebView?"":"1100px")),t.R7$(2),t.Y8G("ngClass",t.l_i(20,Gt,!e.isMobileWebView,e.isMobileWebView)),t.R7$(1),t.Y8G("ngClass",t.l_i(23,It,!e.isMobileWebView,e.isMobileWebView)),t.R7$(1),t.SpI(" ",t.bMT(7,13,"lang_testbank_folder_and_file_name")," "),t.R7$(3),t.Y8G("ngClass",t.eq3(26,E,1==(null==e.currentDocumentSortTypeObj?null:e.currentDocumentSortTypeObj.isAscSort)&&(null==e.currentDocumentSortTypeObj?null:e.currentDocumentSortTypeObj.isColumnSortType)==e.enumDocumentSortType.BY_NAME)),t.R7$(1),t.Y8G("ngClass",t.lJ4(28,Ot))("ngClass",t.eq3(29,E,0==(null==e.currentDocumentSortTypeObj?null:e.currentDocumentSortTypeObj.isAscSort)&&(null==e.currentDocumentSortTypeObj?null:e.currentDocumentSortTypeObj.isColumnSortType)==e.enumDocumentSortType.BY_NAME)),t.R7$(1),t.Y8G("ngIf",!e.isMobileWebView),t.R7$(1),t.Y8G("ngStyle",t.eq3(31,j,e.isMobileWebView?"":"1100px")),t.R7$(1),t.Y8G("ngForOf",e.categoryObjs),t.R7$(1),t.Y8G("ngForOf",e.documentObjs)}}let Rt=(()=>{class a extends y.H{sendReloadData(){this.clipboardService.resetClipBoardAfterPasteOrCancelAllActions(),this.loadApiData.emit(!0)}handleOpenFolder(e){this.goToChildCategoryPage.emit(e)}goBackToAllCategoryPageEvent(){this.goBackToAllCategoryPage.emit()}backToParentCategoryEvent(e){this.backToParentCategory.emit(e)}doExamAction(e,o){this.documentDoExamActionService.doExamAction({categoryId:this.currentCategoryId,examObj:e,globalLadingPage:!0},o).subscribe(i=>{i&&i.reloadData&&this.sendReloadData()})}downLoadExam(e){if(this.userService.isLoginAndNotAnonymous()){let o=[];o.push({id:e.id,type:Q.Y.EXAM,action:J.$.COPY,documentType:"exam"}),this.waitDestroy(this.examCategoryService.apiExamCategoryCopyOrCutOrDeletePost(0,{copyOrCutObjs:o}).subscribe(n=>{if(n&&1==n.success)this.showSuccessSnack("lang_global_azota_download_success"),this.sendReloadData();else if(n.message&&"azota_lang_core_exceed_max_global_copy"==n.message){let i=this.sAztConfigService.getConfig("maxCopyGlobalExam")??20,l=this.commonService.translateToKeyParam(n.message??"",i.toString(),i.toString());this.showErrorSnack(l??"")}else this.showErrorSnack(n.message??"")}))}else this.sAztDialogService.open(H.x,{width:"600px",data:{keyTrans:this.isBusinessDomain?"lang_global_azota_must_login_business":"lang_global_azota_must_login",isShow:!0},restoreFocus:!1})}sortDocumentByColumn(e,o){let i=this.documentSortActionService.sortExamByColumn({rootCategoryObjs:this.rootCategoryObjs,rootDocumentObjs:this.rootDocumentObjs,currentCategoryObjs:this.categoryObjs??[],currentDocumentObjs:this.documentObjs??[]},e,o=null==o||!o);this.categoryObjs=i.categoryObjs,this.documentObjs=i.documentObjs,this.currentDocumentSortTypeObj={isAscSort:o,isColumnSortType:e},this.browserStorageService.saveSimpleSessionStorage("documentSort",JSON.stringify(this.currentDocumentSortTypeObj))}ngOnInit(){this.waitDestroy((0,T.z)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.currentCategoryId=Number(this.commonService.getMyParam(this.activeRoute,"cat_id"))}));let e=this.commonService.myParseJson(this.browserStorageService.getSimpleSessionStorage("documentSort")??"");e&&this.sortDocumentByColumn(e.isColumnSortType,!e.isAscSort)}ngOnDestroy(){super.ngOnDestroy()}constructor(e,o,n,i,l,d,x,C,Nt){super(),this.documentDoExamActionService=e,this.activeRoute=o,this.sAztDialogService=n,this.clipboardService=i,this.browserStorageService=l,this.documentSortActionService=d,this.userService=x,this.sAztConfigService=C,this.examCategoryService=Nt,this.rootCategoryObjs=[],this.rootDocumentObjs=[],this.isShowSearchResult=!1,this.currentPage=0,this.listBreadcrumb=[],this.goBackToAllCategoryPage=new t.bkB,this.backToParentCategory=new t.bkB,this.goToChildCategoryPage=new t.bkB,this.loadApiData=new t.bkB,this.currentDocumentSortTypeObj=void 0,this.enumDocumentSortType=W.N,this.enumDocumentRedirectType=U.d,this.enumDocumentDoExamActionType=V.$,this.currentCategoryId=0,this.totalCheckboxSelected=0,this.shareType="",this.form=new c.gE({clipboardObjs:new c.Yp([]),isSelectAll:new c.MJ(!1,{nonNullable:!0,validators:[c.k0.required]})})}static#t=this.\u0275fac=function(o){return new(o||a)(t.rXU(K.x),t.rXU(m.nX),t.rXU(Z.i),t.rXU(q.g),t.rXU(tt.z),t.rXU(et.n),t.rXU(S.R),t.rXU(at.u),t.rXU(f.Ns))};static#e=this.\u0275cmp=t.VBU({type:a,selectors:[["global-exam-and-category-list"]],inputs:{rootCategoryObjs:"rootCategoryObjs",rootDocumentObjs:"rootDocumentObjs",categoryObjs:"categoryObjs",currentCategory:"currentCategory",documentObjs:"documentObjs",isShowSearchResult:"isShowSearchResult",backToData:"backToData",currentPage:"currentPage",listBreadcrumb:"listBreadcrumb"},outputs:{goBackToAllCategoryPage:"goBackToAllCategoryPage",backToParentCategory:"backToParentCategory",goToChildCategoryPage:"goToChildCategoryPage",loadApiData:"loadApiData"},features:[t.Vt3],decls:15,vars:7,consts:[[1,"azt-file-manager"],[1,"mt-3","mb-3","h-auto","sm:h-10","flex","flex-col","sm:flex-row","items-center"],[1,"mr-auto"],[1,"breadcrumb"],[1,"breadcrumb-item"],["azt-track-service","global-exam-category-list-mLrqTdVRx",3,"click"],["class","breadcrumb-item",3,"ngClass",4,"ngIf"],["class","breadcrumb-item active",3,"ngClass",4,"ngFor","ngForOf"],[1,"table-zone"],["class","box p-5 flex items-center","style","height: 300px;",4,"ngIf"],[4,"ngIf"],["DefaultDocumentTableTpl",""],[1,"breadcrumb-item",3,"ngClass"],["azt-track-service","global-exam-category-list-NdujkQJ24",3,"routerLink"],[1,"breadcrumb-item","active",3,"ngClass"],["azt-track-service","global-exam-category-list-_rMqLAn4k6",3,"ngClass","click"],[3,"ngClass","matTooltip","isDisabledTooltip","matTooltipDisabled"],["c","isDisabled"],[1,"box","p-5","flex","items-center",2,"height","300px"],[1,"text-center","mx-auto"],["type","folder-empty",3,"size"],[1,"font-medium","mt-2"],[3,"ngTemplateOutlet"],[3,"formGroup"],[1,"inbox","box",2,"scroll-snap-type","x mandatory",3,"ngClass"],[1,"p-5","text-slate-500","border-b","border-slate-200/60",3,"ngStyle"],[1,"grid","grid-cols-12","gap-3","items-center","-mx-5","px-5"],[1,"flex","items-center",3,"ngClass"],["azt-track-service","global-exam-category-list-5-CYQgv-EU",1,"inbox__item--sender","flex","items-center","cursor-pointer",3,"ngClass","click"],[1,"flex","items-center","flex-col","ml-2"],["name","chevron-up","size","16",3,"ngClass"],["name","chevron-down","size","16",3,"ngClass"],["class","col-span-8",4,"ngIf"],[1,"azt-table-body",2,"min-height","50vh",3,"ngStyle"],["class","folder-item",3,"id",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"p-5","flex","flex-col","sm:flex-row","items-center","text-center","sm:text-left","text-slate-500"],[1,"col-span-8"],[1,"folder-item",3,"id"],[1,"inbox__item","inline-block","sm:block","hover:shadow-md","text-slate-600","dark:text-slate-500","border-b","border-slate-200/60","dark:border-darkmode-400",2,"cursor","default"],[1,"block","sm:grid","grid-cols-12","gap-3","items-center","px-5","box-exam"],[1,"flex","col-span-12","md:col-span-4",2,"width","80vw","justify-content","space-between"],[1,"flex-none","flex","items-center","w-full"],["azt-track-service","global-exam-category-list-VueJbv5yf5",1,"title-exam","flex","items-center","clickable","sm:w-full",3,"ngClass","click"],[1,"image-fit"],[4,"ngIf","ngIfElse"],["normalCate",""],[1,"truncate","ml-3",3,"matTooltip","isDisabledTooltip","matTooltipDisabled"],["class","whitespace-nowrap ml-2 py-0.5 px-2 rounded-full text-xs bg-info text-white font-medium",4,"ngIf"],["class","whitespace-nowrap ml-2 py-0.5 px-2 rounded-full text-xs bg-primary text-white font-medium",4,"ngIf"],[1,"col-span-8","py-1"],["type","folder-azota",3,"size"],["noShare",""],["type","folder-share",3,"size"],["type","folder",3,"size"],[1,"whitespace-nowrap","ml-2","py-0.5","px-2","rounded-full","text-xs","bg-info","text-white","font-medium"],[1,"whitespace-nowrap","ml-2","py-0.5","px-2","rounded-full","text-xs","bg-primary","text-white","font-medium"],["class","exam-item",4,"ngIf"],[1,"exam-item"],[1,"inbox__item","sm:block","text-slate-600","hover:shadow-md","dark:text-slate-500","border-b","border-slate-200/60","dark:border-darkmode-400",2,"cursor","default"],[1,"px-5","md:flex","block","box-exam"],["azt-track-service","global-exam-category-list-8ugbR7o5-K",1,"title-exam","flex","items-center","clickable",3,"click"],[1,"text-pending","image-fit"],["name","file-check","size","24",3,"matTooltip",4,"ngIf"],["name","file","size","24",3,"matTooltip",4,"ngIf"],[3,"matTooltip","isDisabledTooltip","matTooltipDisabled"],[2,"width","100% !important"],["class","azt-wv-sub-info mx-auto",4,"ngIf"],["class","icon-share ml-2",4,"ngIf"],["azt-track-service","global-exam-category-list--JVXwK7So7",1,"btn","btn-sm","btn-outline-success","mr-2",2,"white-space","nowrap",3,"click"],["azt-track-service","global-exam-category-list-pEOorzBaKX",1,"btn","btn-sm","btn-outline-primary",2,"white-space","nowrap",3,"matTooltip","click"],["name","file-check","size","24",3,"matTooltip"],["name","file","size","24",3,"matTooltip"],[1,"azt-wv-sub-info","mx-auto"],[1,"icon-share","ml-2"],["type","book",2,"padding","3px",3,"size","matTooltip"]],template:function(o,n){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"ol",3)(4,"li",4)(5,"a",5),t.bIt("click",function(){return n.goBackToAllCategoryPageEvent()}),t.EFF(6),t.nI1(7,"mytranslate"),t.k0s()(),t.DNE(8,rt,5,11,"li",6),t.DNE(9,mt,8,17,"li",7),t.k0s()()(),t.j41(10,"div",8),t.DNE(11,gt,6,4,"div",9),t.DNE(12,dt,2,1,"ng-container",10),t.k0s()(),t.DNE(13,At,16,33,"ng-template",null,11,t.C5r)),2&o&&(t.R7$(6),t.SpI(" ",t.bMT(7,5,"lang_auto_tat_ca")," "),t.R7$(2),t.Y8G("ngIf",n.userService.isLogin()),t.R7$(1),t.Y8G("ngForOf",n.listBreadcrumb),t.R7$(2),t.Y8G("ngIf",0==(null==n.categoryObjs?null:n.categoryObjs.length)&&0==(null==n.documentObjs?null:n.documentObjs.length)),t.R7$(1),t.Y8G("ngIf",0!=(null==n.categoryObjs?null:n.categoryObjs.length)||0!=(null==n.documentObjs?null:n.documentObjs.length)))},dependencies:[m.Wk,g.YU,g.Sq,g.bT,g.T3,g.B3,nt.oV,c.qT,c.cb,c.j4,ot.f,it.m,_.WGl,v.F2,v.wp],styles:[".title-exam[_ngcontent-%COMP%]{padding-top:14px;padding-bottom:14px}@media (max-width: 640px){.mobile-80vw[_ngcontent-%COMP%]{width:80vw!important}.title-exam[_ngcontent-%COMP%]{padding-top:0;padding-bottom:0;width:90%!important}.box-exam[_ngcontent-%COMP%]{padding-top:12px;padding-bottom:12px}}"]})}return a})();function zt(a,r){if(1&a&&t.nrm(0,"azt-loading-effect",4),2&a){const e=t.XpG();t.Y8G("currentStatusObj",e.statusObj)}}function Pt(a,r){1&a&&(t.qex(0),t.j41(1,"div",9)(2,"span",10),t.EFF(3),t.nI1(4,"mytranslate"),t.k0s()(),t.bVm()),2&a&&(t.R7$(3),t.JRh(t.bMT(4,1,"lang_global_azota_not_support_student_role")))}const Mt=function(){return[]};function Lt(a,r){if(1&a){const e=t.RV6();t.j41(0,"div",11)(1,"global-exam-and-category-list",12),t.bIt("goToChildCategoryPage",function(n){t.eBV(e);const i=t.XpG(2);return t.Njj(i.goToChildCategoryPage(n))})("goBackToAllCategoryPage",function(){t.eBV(e);const n=t.XpG(2);return t.Njj(n.goBackToAllCategoryPage())})("backToParentCategory",function(n){t.eBV(e);const i=t.XpG(2);return t.Njj(i.backToParentCategory(n))})("loadApiData",function(){t.eBV(e);const n=t.XpG(2);return t.Njj(n.reloadApi())}),t.k0s()(),t.j41(2,"div",13)(3,"div",14)(4,"azt-paging",15),t.bIt("goToPaginationPage",function(n){t.eBV(e);const i=t.XpG(2);return t.Njj(i.goToPage(n))}),t.k0s()(),t.j41(5,"div",16)(6,"p",17),t.EFF(7),t.nI1(8,"number"),t.nI1(9,"mytranslate"),t.k0s()(),t.j41(10,"div",18)(11,"p",17),t.EFF(12),t.nI1(13,"number"),t.nI1(14,"mytranslate"),t.k0s()()()}if(2&a){const e=t.XpG(2);t.R7$(1),t.Y8G("rootCategoryObjs",e.cloneCategoryObjs)("rootDocumentObjs",e.cloneDocumentObjs)("categoryObjs",e.categoryObjs)("documentObjs",e.documentObjs)("backToData",e.backToData)("currentPage",e.pageObj.page)("currentCategory",e.currentCategory)("isShowSearchResult",e.isShowSearchResult)("listBreadcrumb",e.listBreadcrumb||t.lJ4(20,Mt)),t.R7$(3),t.Y8G("pageObj",e.pageObj),t.R7$(3),t.JRh(t.bMT(8,12,e.totalExam)+" "+t.bMT(9,14,"lang_testbank_test_list_document")),t.R7$(5),t.JRh(t.bMT(13,16,e.totalExam)+" "+t.bMT(14,18,"lang_testbank_test_list_document"))}}function Bt(a,r){if(1&a&&(t.j41(0,"div",5)(1,"div",6),t.DNE(2,Pt,5,3,"ng-container",7),t.DNE(3,Lt,15,21,"ng-template",null,8,t.C5r),t.k0s()()),2&a){const e=t.sdS(4),o=t.XpG();t.R7$(2),t.Y8G("ngIf",o.userService.isLogin()&&!o.userService.isTeacherRole()&&!o.userService.isAnonymousRoleOfCurrentUser())("ngIfElse",e)}}const $t=[{path:"",component:(()=>{class a extends y.H{static#t=this.\u0275fac=function(){let e;return function(n){return(e||(e=t.xGo(a)))(n||a)}}();static#e=this.\u0275cmp=t.VBU({type:a,selectors:[["lading-master-page"]],features:[t.Vt3],decls:2,vars:0,consts:[["id","lading-page-layout"]],template:function(o,n){1&o&&(t.j41(0,"div",0),t.nrm(1,"router-outlet"),t.k0s())},dependencies:[m.n3],encapsulation:2})}return a})(),children:[{path:"document-management/0/:cat_id/:page",component:(()=>{class a extends y.H{goToPage(e){this.backToData?this.commonService.myNavigationWithQueryString("/ladingpage/document-management/0/"+this.currentCategoryId+"/"+e,"?data="+this.commonService.serializeJson(this.backToData)):this.commonService.myNavigation("/ladingpage/document-management/0/"+this.currentCategoryId+"/"+e)}resetSearchForm(){this.form.patchValue({searchContent:""}),this.isShowSearchResult=!1}convertExamObj(e){var o=[];return e.forEach(n=>{n.exam&&o.push({name:n.exam.name,updatedAt:n.exam.updatedAt,createdAt:n.exam.createdAt,attended:n.exam.attended,isPublished:n.exam.isPublished,exam:n.exam,shared:n.shared,type:"exam",paths:n.paths,isGlobalAzota:0})}),o}goBackToAllCategoryPage(){var e=this.getFormValue();let o=this.userService.isLogin()&&this.userService.isTeacherRole()?"/admin/testbank":"/ladingpage";e.searchContent?(this.resetSearchForm(),0==this.currentCategoryId?this.getData():this.commonService.myNavigation(o+"/document-management/0/0/1")):this.commonService.myNavigation(o+"/document-management/0/0/1")}backToParentCategory(e){e.id!=this.currentCategoryId&&(this.resetSearchForm(),this.commonService.myNavigationWithQueryString("/ladingpage/document-management/0/"+e.id+"/1",e.shareType?"?data="+this.commonService.serializeJson({shareType:e.shareType,backTo:`/ladingpage/document-management/0/${this.currentCategoryId}/1`,suggest:e.isGlobalAzota>1?1:0,isAztLib:0!=e.isGlobalAzota?1:0}):""))}goToChildCategoryPage(e){this.resetSearchForm(),this.commonService.myNavigationWithQueryString("/ladingpage/document-management/0/"+e.id+"/1",e.shareType?"?data="+this.commonService.serializeJson({shareType:e.shareType,suggest:0!=e.isGlobalAzota?1:0,isAztLib:0!=e.isGlobalAzota?1:0}):"")}getFormValue(){return this.form.getRawValue()}getListParentCategoryObjs(){this.waitDestroy(this.examCategoryService.apiExamCategoryGetGlobalBreadcrumbsGet(this.currentCategoryId).subscribe(e=>{if(e&&1==e.success){var o=[];e.data?.objs&&e.data?.objs.forEach(n=>{o.push({...n,shared:!1,sharedGroups:[],sharedTeachers:[],paths:[]})}),this.listBreadcrumb=o;for(let n=0;n<this.listBreadcrumb?.length;n++)if(this.listBreadcrumb[n].id==this.currentCategoryId){let i="",l=0,d=0;0!=this.listBreadcrumb[n].isGlobalAzota&&(d=1),!this.listBreadcrumb[n].parentId&&this.listBreadcrumb[n].shareType?(i=0!=this.listBreadcrumb[n].isGlobalAzota?"":"user",l=n>1?this.listBreadcrumb[n-1].id??-1:0==n&&0!=this.listBreadcrumb[n].isGlobalAzota?0:this.listBreadcrumb[n].parentId??this.listBreadcrumb[n].tenantId??-1):this.listBreadcrumb[n].parentId&&this.listBreadcrumb[n].shareType?(i=n>1?this.listBreadcrumb[n-1].shareType??"":n<=1&&0!=this.listBreadcrumb[n].isGlobalAzota?this.listBreadcrumb[n].shareType??"":"",l=this.listBreadcrumb[n].parentId??-1):l=this.listBreadcrumb[n].parentId??0;let x=l?`/ladingpage/document-management/0/${l}/1`+(this.backToData?"?data="+this.commonService.serializeJson({shareType:i}):""):"/ladingpage/document-management/0/0/1";this.backToLink=this.commonService.serializeJson({shareType:i,backTo:x,suggest:d})}}else this.showErrorSnack(e.message??"")}))}getData(){var e=Number(this.commonService.getMyParam(this.activeRoute,"page"));let o=this.getFormValue();this.pageObj.setPageNumber(e),this.initStatusObj();let n={categoryId:0!=this.currentCategoryId?this.currentCategoryId:0,documentType:void 0,shareType:this.backToData?.shareType??"",fileType:"exam",classroomId:void 0,name:this.isShowSearchResult?o.searchContent:void 0,suggestExamPurpose:void 0,lite:void 0,getGlobal:1,page:this.pageObj.page,itemPerPage:void 0};this.waitDestroy(this.documentService.apiDocumentsGlobalGet(n.categoryId,n.suggestExamPurpose,n.page,n.itemPerPage).subscribe(i=>{if(i&&1==i.success){var l=this.commonService.castObj(i.data?.documentObjs)??[],d=this.convertExamObj(l);this.documentObjs=d,this.cloneDocumentObjs=d,this.categoryObjs=i.data?.categoryObjs,this.cloneCategoryObjs=i.data?.categoryObjs??[],this.currentCategory=i.data?.currentCategory?{...i.data?.currentCategory,shared:!1,sharedGroups:[],sharedTeachers:[],paths:[]}:void 0,this.totalExam=i.data?.total??0,this.pageObj.setTotalPages(this.totalExam),this.getListParentCategoryObjs(),this.stopStatusObj()}else this.showErrorSnack(i.message??"")}))}reloadApi(){this.getData()}ngOnInit(){this.waitDestroy((0,T.z)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.pageObj.setPageNumber(Number(this.commonService.getMyParam(this.activeRoute,"page"))),this.currentCategoryId=Number(this.commonService.getMyParam(this.activeRoute,"cat_id")),this.backToData=this.commonService.myParseJson(this.commonService.getMyQueryParam("data")??"");let e={shareType:this.backToData?.shareType,suggest:this.backToData?.suggest,backTo:this.backToData?.backTo??(this.userService.isTeacherRole()?"/admin/testbank/document-management/0/0/1":"/student/dashboard")};this.backToLink=this.commonService.serializeJson(e),this.mobileWebviewService.sendSimpleMessage("OPEN_EXAM"),this.aztShareService.currentMessage.subscribe(o=>{this.getData()})})),this.commonService.translateMetaData({title:"lang_testbank_document_list_header_title",description:"lang_testbank_document_list_header_description",image:"lang_cms_test_image"}),super.ngOnInit()}ngOnDestroy(){super.ngOnDestroy()}constructor(e,o,n,i,l,d){super(),this.activeRoute=e,this.examCategoryService=o,this.documentService=n,this.aztShareService=i,this.mobileWebviewService=l,this.userService=d,this.isShowSearchResult=!1,this.totalExam=0,this.recommendExamObjs=[],this.documentObjs=[],this.cloneDocumentObjs=[],this.cloneCategoryObjs=[],this.listBreadcrumb=[],this.currentCategoryId=0,this.backToLink="",this.pageObj=new $.d(24),this.form=new c.gE({searchContent:new c.MJ("",{nonNullable:!0,validators:[c.k0.required]})})}static#t=this.\u0275fac=function(o){return new(o||a)(t.rXU(m.nX),t.rXU(f.Ns),t.rXU(f.DK),t.rXU(w.l),t.rXU(F.f),t.rXU(S.R))};static#e=this.\u0275cmp=t.VBU({type:a,selectors:[["app-global-exam-management-list"]],features:[t.Vt3],decls:5,vars:4,consts:[[3,"layoutName","headerBackToLink"],[1,"container-fluid","mt-3","overflow-hidden"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],["doneLoading",""],[3,"currentStatusObj"],[1,"grid","grid-cols-12","gap-6"],[1,"col-span-12","lg:col-span-12","2xl:col-span-12"],[4,"ngIf","ngIfElse"],["normalTeacherView",""],["role","alert",1,"bg-red-100","border","border-red-400","text-red-700","px-4","py-3","rounded","relative"],[1,"block","sm:inline"],[1,"azt-view-file-manager"],[3,"rootCategoryObjs","rootDocumentObjs","categoryObjs","documentObjs","backToData","currentPage","currentCategory","isShowSearchResult","listBreadcrumb","goToChildCategoryPage","goBackToAllCategoryPage","backToParentCategory","loadApiData"],[1,"azt-document-footer","flex","items-center","flex-col-reverse","sm:flex-row","mt-3"],[1,"mr-0","sm:mr-auto","mt-2"],[3,"pageObj","goToPaginationPage"],[1,"text-right","mt-2","azt-hidden","md:block"],[1,"text-md"],[1,"ml-auto","text-right","-mt-2","block","md:hidden"]],template:function(o,n){if(1&o&&(t.j41(0,"public-layout",0)(1,"div",1),t.DNE(2,zt,1,1,"azt-loading-effect",2),t.DNE(3,Bt,5,2,"ng-template",null,3,t.C5r),t.k0s()()),2&o){const i=t.sdS(4);t.Y8G("layoutName","landing-page")("headerBackToLink",n.userService.isLogin()?n.backToLink:0==n.currentCategoryId?"":n.backToLink),t.R7$(2),t.Y8G("ngIf",n.statusObj.loading)("ngIfElse",i)}},dependencies:[g.bT,N.K,Y.q,X.J,Rt,g.QX,v.wp],encapsulation:2})}return a})()}]}];let wt=(()=>{class a{static#t=this.\u0275fac=function(o){return new(o||a)};static#e=this.\u0275mod=t.$C({type:a});static#a=this.\u0275inj=t.G2t({imports:[m.iI.forChild($t),m.iI,B.XE]})}return a})(),Ft=(()=>{class a{static#t=this.\u0275fac=function(o){return new(o||a)};static#e=this.\u0275mod=t.$C({type:a});static#a=this.\u0275inj=t.G2t({providers:[{provide:u.vn,useValue:M.c.azt_tiny_mce_script_src}],imports:[m.iI,g.MD,L.s,u.sv,wt,c.YN,c.X1,b.hM,R.L,I.Lk,O.xv,P.Q,z.b,_.flO.pick(_.Ptg),A.Id,h.f,G.rc]})}return a})()},15485:(k,p,s)=>{s.d(p,{l:()=>b});var g=s(71217),c=s(26860);let b=(()=>{class m{constructor(){this.hasDataChanged=new g.t(!1),this.currentMessage=this.hasDataChanged.asObservable()}changeStatus(u){this.hasDataChanged.next(u)}static#t=this.\u0275fac=function(h){return new(h||m)};static#e=this.\u0275prov=c.jDH({token:m,factory:m.\u0275fac,providedIn:"root"})}return m})()}}]);