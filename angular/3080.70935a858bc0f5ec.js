(self.webpackChunkBalacoClient=self.webpackChunkBalacoClient||[]).push([[3080],{13080:(F,R,r)=>{"use strict";r.r(R),r.d(R,{QuestionLibraryModule:()=>gn});var u=r(54460),f=r(10936),l=r(89163),y=r(65162),b=r(23047),h=r(15343),v=r(13763),p=r(25571),I=r(44233),g=r(5502),_=r(21656),x=r(70050),m=r(7050),k=r(91100),w=r(1133),C=r(50866),S=r(89121),T=r(59640),e=r(48891),O=r(57686),oe=r(17776),P=r(52909),D=r(52811),se=r(51614),Q=r(96451),re=r(50334),V=r(47712),j=r(76975);const B=t=>({"box p-2 mt-2":t}),Y=t=>({nodeObjs:t}),le=t=>({"padding-left":t}),ce=()=>({"mr-2":!0});function de(t,o){1&t&&e.eu8(0)}function ue(t,o){if(1&t&&(e.j41(0,"div",6)(1,"ng-scrollbar",7,2),e.DNE(3,de,1,0,"ng-container",8),e.k0s()()),2&t){const i=e.XpG(),n=e.sdS(3);e.Y8G("ngClass",e.eq3(3,B,"create"==i.modeView)),e.R7$(),e.Y8G("visibility","hover"),e.R7$(2),e.Y8G("ngTemplateOutlet",n)}}function me(t,o){1&t&&e.eu8(0)}function _e(t,o){if(1&t&&(e.j41(0,"div",9),e.DNE(1,me,1,0,"ng-container",8),e.k0s()),2&t){const i=e.XpG(),n=e.sdS(3);e.Y8G("ngClass",e.eq3(2,B,"create"==i.modeView)),e.R7$(),e.Y8G("ngTemplateOutlet",n)}}function pe(t,o){1&t&&(e.j41(0,"div",12)(1,"h3",13),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()),2&t&&(e.R7$(2),e.JRh(e.bMT(3,1,"lang_create_tree_category_select_level_subject_require")))}function be(t,o){1&t&&(e.j41(0,"div",12)(1,"h3",13),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()),2&t&&(e.R7$(2),e.JRh(e.bMT(3,1,"lang_create_tree_category_select_level_subject_no_data")))}function ge(t,o){1&t&&(e.j41(0,"div",12),e.nrm(1,"azt-loading-ui",14),e.j41(2,"h3",13),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()()),2&t&&(e.R7$(3),e.JRh(e.bMT(4,1,"lang_cms_common_loading")))}function he(t,o){if(1&t&&(e.qex(0),e.DNE(1,pe,4,3,"div",11)(2,be,4,3,"div",11)(3,ge,5,3,"div",11),e.bVm()),2&t){const i=e.XpG(2);e.R7$(),e.Y8G("ngIf",!("structure"==i.modeView||i.loadingKnowledge||i.schoolLevelValue&&i.schoolSubjectValue||i.noDataKnowledge)),e.R7$(),e.Y8G("ngIf",i.noDataKnowledge&&i.schoolLevelValue&&i.schoolSubjectValue&&!i.loadingKnowledge),e.R7$(),e.Y8G("ngIf",!i.nodeObjs.length&&i.loadingKnowledge)}}function fe(t,o){1&t&&e.eu8(0)}function ve(t,o){if(1&t&&(e.j41(0,"div",15),e.DNE(1,fe,1,0,"ng-container",16),e.k0s()),2&t){const i=e.XpG(2),n=e.sdS(5);e.R7$(),e.Y8G("ngTemplateOutlet",n)("ngTemplateOutletContext",e.eq3(2,Y,i.nodeObjs))}}function ye(t,o){if(1&t&&e.DNE(0,he,4,3,"ng-container",10)(1,ve,2,4,"ng-template",null,3,e.C5r),2&t){const i=e.sdS(2),n=e.XpG();e.Y8G("ngIf",!n.nodeObjs.length||!n.schoolLevelValue||!n.schoolSubjectValue||n.noDataKnowledge||n.loadingKnowledge)("ngIfElse",i)}}function ke(t,o){1&t&&e.nrm(0,"lucide-icon",30)}function Ie(t,o){1&t&&e.nrm(0,"lucide-icon",31)}function xe(t,o){if(1&t){const i=e.RV6();e.j41(0,"i",27),e.bIt("click",function(){e.eBV(i);const a=e.XpG().$implicit,s=e.XpG(3);return e.Njj(s.clickToNode(a))}),e.DNE(1,ke,1,0,"lucide-icon",28)(2,Ie,1,0,"lucide-icon",29),e.k0s()}if(2&t){const i=e.XpG().$implicit;e.R7$(),e.Y8G("ngIf",!i.isExpand),e.R7$(),e.Y8G("ngIf",i.isExpand)}}function je(t,o){1&t&&e.nrm(0,"lucide-icon",32),2&t&&e.Y8G("ngClass",e.lJ4(1,ce))}function we(t,o){if(1&t){const i=e.RV6();e.j41(0,"a",33),e.bIt("click",function(a){e.eBV(i);const s=e.XpG().$implicit;return e.XpG(3).goToFrameQuestionList(s),e.Njj(a.stopPropagation())}),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()}if(2&t){const i=e.XpG().$implicit;e.R7$(),e.SpI("(",i.totalQuestion+" "+e.bMT(2,1,"lang_auto_cau_hoi"),")")}}function Te(t,o){if(1&t){const i=e.RV6();e.j41(0,"a",34),e.nI1(1,"mytranslate"),e.bIt("click",function(){e.eBV(i);const a=e.XpG().$implicit,s=e.XpG(3);return e.Njj(s.removeKnowledgeForm(a))}),e.j41(2,"span",35),e.nrm(3,"lucide-icon",36),e.k0s()()}2&t&&e.Y8G("matTooltip",e.bMT(1,1,"lang_auto_xoa"))}function Ce(t,o){1&t&&e.eu8(0)}function Re(t,o){if(1&t&&(e.qex(0),e.j41(1,"div",37),e.DNE(2,Ce,1,0,"ng-container",16),e.k0s(),e.bVm()),2&t){const i=e.XpG().$implicit;e.XpG(3);const n=e.sdS(5);e.R7$(2),e.Y8G("ngTemplateOutlet",n)("ngTemplateOutletContext",e.eq3(2,Y,i.children))}}function Oe(t,o){if(1&t){const i=e.RV6();e.qex(0),e.j41(1,"div",19)(2,"div",20),e.DNE(3,xe,3,2,"i",21),e.j41(4,"label",22),e.bIt("click",function(){const a=e.eBV(i).$implicit,s=e.XpG(3);return e.Njj(s.clickToNode(a))}),e.DNE(5,je,1,2,"lucide-icon",23),e.nrm(6,"span",24),e.nI1(7,"mathJaxContent"),e.nI1(8,"async"),e.nI1(9,"safeContentQuestion"),e.DNE(10,we,3,3,"a",25),e.k0s(),e.DNE(11,Te,4,3,"a",26),e.k0s(),e.DNE(12,Re,3,4,"ng-container",17),e.k0s(),e.bVm()}if(2&t){const i=o.$implicit,n=e.XpG(3);e.R7$(),e.Y8G("hidden",!i.isShow),e.R7$(),e.yjJ("id","node-",i.randomHashId,"-",i.level,"-",i.nodeIndex,""),e.Y8G("ngStyle",e.eq3(18,le,12*i.level+"px")),e.R7$(),e.Y8G("ngIf",i.children.length),e.R7$(2),e.Y8G("ngIf",i.data.id&&("knowledge"==i.typeNode||"objective"==i.typeNode&&!i.children.length)),e.R7$(),e.Y8G("innerHTML",e.bMT(9,16,e.bMT(8,14,e.bMT(7,12,i.text))),e.npT),e.R7$(4),e.Y8G("ngIf","structure"==n.modeView),e.R7$(),e.Y8G("ngIf","create"==n.modeView),e.R7$(),e.Y8G("ngIf",i.isExpand)}}function Se(t,o){if(1&t&&(e.qex(0),e.DNE(1,Oe,13,20,"ng-container",18),e.bVm()),2&t){const i=o.$implicit;e.R7$(),e.Y8G("ngForOf",i)}}function Ee(t,o){if(1&t&&e.DNE(0,Se,2,1,"ng-container",17),2&t){const i=o.nodeObjs,n=e.XpG();e.Y8G("ngIf",n.asTemplateDataObj(i))}}let X=(()=>{var t;class o extends re.C{constructor(){super(...arguments),this.bankId=0,this.noDataKnowledge=!1,this.nodeEmitData=new e.bkB,this.loadingKnowledge=!1,this.nodeObjs=[],this.uuidService=(0,e.WQX)(P.D)}clickToNode(n){n.children.length&&(n.isExpand?this.collapse(n):this.expand(n))}goToFrameQuestionList(n){if("structure"==this.modeView){let a=this.commonService.getCurrentUrlWithoutLocale();this.commonService.myNavigationWithQueryString("/admin/question-library/view-question-list-node/"+this.bankId+"/"+n.data.id,"?backto="+encodeURIComponent(a))}}removeKnowledgeForm(n){this.nodeObjs=this.removeOneNodeById(this.nodeObjs,n),this.nodeEmitData.emit(this.nodeObjs)}asTemplateDataObj(n){return n}standardTreeNodes(n,a){let s=[];return n.forEach((c,d)=>{let E={level:a,typeNode:c.objectiveId?"objective":c.knowledgeId?"knowledge":"",isExpand:0===a,isShow:!0,nodeIndex:d,selected:!1,randomHashId:this.uuidService.getUuid(),text:c.title,data:{...c,children:[]},children:[],totalQuestion:c.totalQuestion??0};E.children=this.standardTreeNodes(c.children,a+1),s.push(E)}),s}removeOneNodeById(n,a){return(n=n.filter(s=>s.randomHashId!=a.randomHashId)).forEach(s=>s.children=this.removeOneNodeById(s.children,a)),n}ngOnInit(){this.loadingKnowledge=!0,this.nodeObjs=this.standardTreeNodes(this.rawNodes,0),this.loadingKnowledge=!1}ngOnChanges(n){n.rawNodes&&(this.loadingKnowledge=!0,this.nodeObjs=this.standardTreeNodes(this.rawNodes,0),this.loadingKnowledge=!1,this.nodeEmitData.emit(this.nodeObjs))}}return(t=o).\u0275fac=(()=>{let i;return function(a){return(i||(i=e.xGo(t)))(a||t)}})(),t.\u0275cmp=e.VBU({type:t,selectors:[["app-question-library-tree-component"]],inputs:{rawNodes:"rawNodes",modeView:"modeView",schoolSubjectValue:"schoolSubjectValue",schoolLevelValue:"schoolLevelValue",useScrollBar:"useScrollBar",bankId:"bankId",noDataKnowledge:"noDataKnowledge"},outputs:{nodeEmitData:"nodeEmitData"},features:[e.Vt3,e.OA$],decls:6,vars:2,consts:[["mainContent",""],["recursiveListTmpl",""],["perfectScroll",""],["showKnowledge",""],["class","relative","style","height: calc(100vh - 250px); overflow-y: auto",3,"ngClass",4,"ngIf"],["class","relative",3,"ngClass",4,"ngIf"],[1,"relative",2,"height","calc(100vh - 250px)","overflow-y","auto",3,"ngClass"],["track","vertical","pointerEventsMethod","scrollbar",3,"visibility"],[4,"ngTemplateOutlet"],[1,"relative",3,"ngClass"],[4,"ngIf","ngIfElse"],["class","mx-auto my-auto text-center midle-box",4,"ngIf"],[1,"mx-auto","my-auto","text-center","midle-box"],[1,"text-slate-500","text-md",2,"font-weight","420"],[1,"mr-2"],["id","list-category-arr",1,"grid","grid-cols-12","gap-1"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"col-span-12",3,"hidden"],[1,"flex","items-center","mt-1","w-full","hover:bg-slate-100","dark:hover:bg-darkmode-400","rounded",3,"id","ngStyle"],["class","mr-2","aria-hidden","true",3,"click",4,"ngIf"],[2,"line-height","1.6",3,"click"],["name","dot","size","14",3,"ngClass",4,"ngIf"],[3,"innerHTML"],["class","link__color ml-2",3,"click",4,"ngIf"],["class","ml-auto btn btn-transparent btn-outline-danger btn-sm text-slate-700 font-medium",3,"matTooltip","click",4,"ngIf"],["aria-hidden","true",1,"mr-2",3,"click"],["name","chevron-right","size","14",4,"ngIf"],["name","chevron-down","size","14",4,"ngIf"],["name","chevron-right","size","14"],["name","chevron-down","size","14"],["name","dot","size","14",3,"ngClass"],[1,"link__color","ml-2",3,"click"],[1,"ml-auto","btn","btn-transparent","btn-outline-danger","btn-sm","text-slate-700","font-medium",3,"click","matTooltip"],[1,"w-4","h-4","flex-none"],["name","x","size","18"],[1,"grid","grid-cols-12","gap-1","w-full","children-tmp"]],template:function(n,a){1&n&&e.DNE(0,ue,4,5,"div",4)(1,_e,2,4,"div",5)(2,ye,3,2,"ng-template",null,0,e.C5r)(4,Ee,1,1,"ng-template",null,1,e.C5r),2&n&&(e.Y8G("ngIf",a.useScrollBar),e.R7$(),e.Y8G("ngIf",!a.useScrollBar))},dependencies:[u.YU,u.Sq,u.bT,u.T3,u.B3,V.oV,g.Yh,D.R,h.WGl,u.Jj,j.wp,j.km,j.ep],encapsulation:2}),o})();function Le(t,o){1&t&&(e.j41(0,"div",10)(1,"div",11),e.nrm(2,"azt-loading-ui",12),e.j41(3,"h3",13),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()()()),2&t&&(e.R7$(4),e.JRh(e.bMT(5,1,"lang_cms_common_loading")))}function Fe(t,o){if(1&t){const i=e.RV6();e.j41(0,"app-question-library-tree-component",14),e.bIt("nodeEmitData",function(a){e.eBV(i);const s=e.XpG();return e.Njj(s.nodeDataEmitted=a)}),e.k0s()}if(2&t){const i=e.XpG();e.Y8G("rawNodes",i.nodeObjsData)("modeView","create")("noDataKnowledge",i.noDataKnowledge)("schoolSubjectValue",i.form.controls.schoolSubject.value)("schoolLevelValue",i.form.controls.schoolLevel.value)("useScrollBar",!0)}}function De(t,o){1&t&&e.nrm(0,"azt-loading-ui",15)}let Qe=(()=>{var t;class o extends T.H{getKnowledgeData(n){let a=this.form.controls.schoolLevel?.value??0,s=this.form.controls.schoolSubject?.value??0,c=this.form.controls.bookIdFormControl?.value??0;this.bookName=n?.bookName??"",s&&a&&(this.loadingData=!0,this.waitDestroy(this.aiElearningService.aiApiV1ElearningGetKnowledgeTreeGet(a,s,void 0,c>0?c:void 0).subscribe({next:d=>{this.loadingData=!1,this.noDataKnowledge=!d.nodes.length,this.nodeObjsData=d.nodes},error:d=>{this.noDataKnowledge=!0,this.loadingData=!1}})))}saveQuestionLibrary(){this.initStatusObj();let c={levelId:this.form.controls.schoolLevel?.value??0,subjectId:this.form.controls.schoolSubject?.value??0,bookId:this.form.controls.bookIdFormControl?.value??0,bookName:this.bookName,nodes:this.getNodeSaveApi()};this.waitDestroy(this.eBanksService.apiEbanksPost(c).subscribe(d=>{if(!d.success)return this.errorStatusObj(d.message,!0);this.successStatusObj("lang_testbank_test_list_create_new_tree_document_success",!0),this.commonService.myNavigation("/admin/question-library/dashboard")}))}getNodeSaveApi(){return this.nodeDataEmitted.map(n=>({name:n.text,suggestModel:n.typeNode,suggestId:n.data.objectiveId??n.data.knowledgeId,children:this.getChildNode(n.children)}))}getChildNode(n){return n.map(a=>({name:a.text,suggestModel:a.data.objectiveId?"objective":a.data.knowledgeId?"knowledge":"",suggestId:a.data.objectiveId??a.data.knowledgeId,children:this.getChildNode(a.children)}))}ngOnInit(){this.backToLink=this.commonService.getMyQueryParam("backto")??"/admin/question-library/dashboard"}constructor(n,a,s){super(),this.eBanksService=n,this.aiElearningService=a,this.uuidService=s,this.backToLink="",this.nodeObjsData=[],this.nodeDataEmitted=[],this.bookName="",this.noDataKnowledge=!1,this.loadingData=!0,this.form=new f.gE({schoolLevel:new f.MJ(0,{nonNullable:!0}),schoolSubject:new f.MJ(0,{nonNullable:!0}),bookIdFormControl:new f.MJ(0,{nonNullable:!0})})}}return(t=o).\u0275fac=function(n){return new(n||t)(e.rXU(O.nd),e.rXU(oe.T5),e.rXU(P.D))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-add-new-question-library"]],features:[e.Vt3],decls:15,vars:16,consts:[["doneLoading",""],[3,"headerBackToLink"],[1,"container-fluid","overflow-hidden"],[1,"text-md","font-bold","mt-3"],[1,"mt-3","box","p-2"],[3,"changeDataEvent","form","removeLevelSubjectWithOtherName","showBookData","layout","useExamSchoolLogData"],["class","box mt-2","style","height: calc(100vh - 250px); overflow-y: auto",4,"ngIf","ngIfElse"],[1,"mt-2","float-right"],["type","button",1,"btn","btn-primary",3,"click","disabled"],["class","mr-1",4,"ngIf"],[1,"box","mt-2",2,"height","calc(100vh - 250px)","overflow-y","auto"],[1,"mx-auto","my-auto","text-center","midle-box"],[1,"mr-2"],[1,"text-slate-500","text-md",2,"font-weight","420"],[3,"nodeEmitData","rawNodes","modeView","noDataKnowledge","schoolSubjectValue","schoolLevelValue","useScrollBar"],[1,"mr-1"]],template:function(n,a){if(1&n){const s=e.RV6();e.j41(0,"teacher-layout",1)(1,"div",2)(2,"h3",3),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"div",4)(6,"config-level-subject-book",5),e.bIt("changeDataEvent",function(d){return e.eBV(s),e.Njj(a.getKnowledgeData(d))}),e.k0s()(),e.DNE(7,Le,6,3,"div",6)(8,Fe,1,6,"ng-template",null,0,e.C5r),e.j41(10,"div",7)(11,"button",8),e.bIt("click",function(){return e.eBV(s),e.Njj(a.saveQuestionLibrary())}),e.DNE(12,De,1,0,"azt-loading-ui",9),e.EFF(13),e.nI1(14,"mytranslate"),e.k0s()()()()}if(2&n){const s=e.sdS(9);e.Y8G("headerBackToLink",a.backToLink),e.R7$(3),e.JRh(e.bMT(4,12,"lang_create_tree_question_library")),e.R7$(3),e.Y8G("form",a.form)("removeLevelSubjectWithOtherName",!0)("showBookData",!0)("layout","label_in_one_line")("useExamSchoolLogData",!0),e.R7$(),e.Y8G("ngIf",a.loadingData)("ngIfElse",s),e.R7$(4),e.Y8G("disabled",a.statusObj.loading||!a.form.controls.schoolLevel.value||!a.form.controls.schoolSubject.value||a.noDataKnowledge),e.R7$(),e.Y8G("ngIf",a.statusObj.loading),e.R7$(),e.SpI(" ",e.bMT(14,14,"lang_create_tree_category_btn")," ")}},dependencies:[u.bT,D.R,se.X,Q.Q,X,j.wp],encapsulation:2}),o})();var Me=r(39712),Ge=r(60531),$e=r(74175),ze=r(80859);const Ae=(t,o,i,n)=>[t,o,i,n],Ne=()=>({"text-primary":!0});let Pe=(()=>{var t;class o extends T.H{importFolder(){}changeFileAction(n){this.file=n,this.startParser(this.file)}startParser(n){this.isFollowLibParser=!0,this.commonService.getTranslate("lang_auto_dang_xu_ly_file_dau_vao_vui_long_doi_trong_giay_lat").subscribe(a=>{this.msgLoading=a}),this.saveAndSwitch(n)}saveAndSwitch(n){this.editorOutputDataService.setFileProcess(n);const s=`/admin/question-library/import-question/${this.bankId}`,c=this.commonService.getMyQueryParam("levelId"),d=this.commonService.getMyQueryParam("subjectId"),E=this.commonService.getMyQueryParam("bookId");this.commonService.myNavigationWithQueryString("/admin/testbank/azota-editor/0",`?backto=${decodeURIComponent(s)}&importQuestion=1&bankId=${this.bankId}&levelId=${c}&subjectId=${d}&bookId=${E}`)}ngOnInit(){super.ngOnInit(),this.bankId=Number(this.commonService.getMyParam(this.activeRoute,"bankId"))}constructor(n,a){super(),this.activeRoute=n,this.editorOutputDataService=a,this.allUploadFileTypes=Me.PO,this.isFollowLibParser=!1,this.msgLoading="",this.bankId=0}}return(t=o).\u0275fac=function(n){return new(n||t)(e.rXU(y.nX),e.rXU(Ge.O))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-import-question"]],features:[e.Vt3],decls:66,vars:82,consts:[[3,"headerBackToLink"],[1,"mt-5"],[1,"flex","items-center","justify-center"],[1,"font-medium","text-lg"],[1,"mx-auto",2,"max-width","800px"],[3,"emitFiles","fileType","limitSize"],["azt-track-service","create-new-document-PuQSKmLC3","id","box-left-file-drop",1,"h-full","cursor-pointer","box","p-5"],[1,"h-full","flex","items-center",2,"min-height","55vh"],[1,"mx-auto","text-center"],[1,"w-16","h-16","flex-none","image-fit","overflow-hidden","mx-auto","upload-box"],["name","cloud-upload","size","64",3,"ngClass"],[1,"mt-3"],[1,"font-medium","text-lg","upload-box"],[1,"text-slate-500","text-xs","mt-1"],["azt-track-service","create-new-document-WauQzqbISx","href","https://docs.azota.vn/docs/huong-dan-su-dung/de-thi/chon-file-keo-tha-file-de-tao-de/","target","_blank",1,"text-primary",3,"click"],[1,"pt-2"],["azt-track-service","create-new-document-FxdEQuAx7G","id","download-link-item",3,"click","dataUrl","target","fileName","fileDescription","classStyle"],["azt-track-service","create-new-document-O5FkqsuTLC","id","download-link-item",3,"click","dataUrl","target","fileName","fileDescription","classStyle"],["id","download-link-item",3,"click","dataUrl","target","fileName","fileDescription","classStyle"],["azt-track-service","create-new-document-cPk0ISITQT","id","download-link-item",3,"click","dataUrl","target","fileName","fileDescription","classStyle"],[1,"mt-3","text-center","font-medium"],[1,"text-center","mt-3"],[1,"btn","btn-primary",3,"click"],["name","folder-input","size","18"],[1,"ml-2"]],template:function(n,a){1&n&&(e.j41(0,"teacher-layout",0)(1,"div",1)(2,"div",2)(3,"div",3),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()()(),e.j41(6,"div",1)(7,"div",4)(8,"azt-upload-single-document-to-editor",5),e.bIt("emitFiles",function(c){return a.changeFileAction(c)}),e.j41(9,"div",6)(10,"div",7)(11,"div",8)(12,"div",9),e.nrm(13,"lucide-icon",10),e.k0s(),e.j41(14,"div",11)(15,"div",12),e.EFF(16),e.nI1(17,"mytranslate"),e.k0s(),e.j41(18,"div",13),e.EFF(19),e.nI1(20,"mytranslate"),e.nrm(21,"br"),e.EFF(22),e.nI1(23,"mytranslate"),e.j41(24,"b"),e.EFF(25),e.nI1(26,"mytranslate"),e.k0s(),e.EFF(27," , "),e.j41(28,"b"),e.EFF(29),e.nI1(30,"mytranslate"),e.k0s(),e.EFF(31),e.nI1(32,"mytranslate"),e.j41(33,"b"),e.EFF(34),e.nI1(35,"mytranslate"),e.k0s(),e.EFF(36),e.nI1(37,"mytranslate"),e.j41(38,"a",14),e.bIt("click",function(c){return c.stopPropagation()}),e.EFF(39),e.nI1(40,"mytranslate"),e.k0s(),e.j41(41,"div",15)(42,"azt-download-link-item",16),e.nI1(43,"convertCdnLinkOfGitHubWithLocale"),e.nI1(44,"mytranslate"),e.bIt("click",function(c){return a.isMobileWebView?"":c.stopPropagation()}),e.k0s(),e.EFF(45," \xa0|\xa0 "),e.j41(46,"azt-download-link-item",17),e.nI1(47,"convertRawLinkOfGitHubWithLocale"),e.nI1(48,"mytranslate"),e.bIt("click",function(c){return a.isMobileWebView?"":c.stopPropagation()}),e.k0s(),e.EFF(49," \xa0|\xa0 "),e.j41(50,"azt-download-link-item",18),e.nI1(51,"convertRawLinkOfGitHubWithLocale"),e.nI1(52,"mytranslate"),e.bIt("click",function(c){return a.isMobileWebView?"":c.stopPropagation()}),e.k0s(),e.EFF(53," \xa0|\xa0 "),e.j41(54,"azt-download-link-item",19),e.nI1(55,"convertRawLinkOfGitHubWithLocale"),e.nI1(56,"mytranslate"),e.bIt("click",function(c){return a.isMobileWebView?"":c.stopPropagation()}),e.k0s()()()()()()()(),e.j41(57,"div",20),e.EFF(58),e.nI1(59,"mytranslate"),e.k0s(),e.j41(60,"div",21)(61,"button",22),e.bIt("click",function(){return a.importFolder()}),e.nrm(62,"lucide-icon",23),e.j41(63,"span",24),e.EFF(64),e.nI1(65,"mytranslate"),e.k0s()()()()()()),2&n&&(e.Y8G("headerBackToLink","/admin/question-library/view-question-library/1"),e.R7$(4),e.SpI(" ",e.bMT(5,36,"lang_azt_enter_questions_into_the_bank")," "),e.R7$(4),e.Y8G("fileType",e.ziG(76,Ae,a.allUploadFileTypes.WORD,a.allUploadFileTypes.AZT,a.allUploadFileTypes.PDF,a.allUploadFileTypes.EXCEL))("limitSize",200),e.R7$(5),e.Y8G("ngClass",e.lJ4(81,Ne)),e.R7$(3),e.JRh(e.bMT(17,38,"lang_auto_chon_file_hoc_keo_tha_file_vao_day")),e.R7$(3),e.SpI(" ",e.bMT(20,40,"lang_auto_azota_support_file_type")," .pdf, .docx, .xlsx. "),e.R7$(3),e.SpI(" ",e.bMT(23,42,"lang_auto_can_upload")," "),e.R7$(3),e.JRh(e.bMT(26,44,"lang_auto_bai_tap")),e.R7$(4),e.JRh(e.bMT(30,46,"lang_auto_de_thi")),e.R7$(2),e.SpI(" ",e.bMT(32,48,"lang_auto_hoac")," "),e.R7$(3),e.JRh(e.bMT(35,50,"lang_auto_bang_dap_an")),e.R7$(2),e.SpI(" ",e.bMT(37,52,"lang_auto_de_cham_offline"),". "),e.R7$(3),e.SpI(" ",e.bMT(40,54,"lang_auto_tim_hieu_them")," "),e.R7$(3),e.Y8G("dataUrl",e.bMT(43,56,"medias_[LANG]/de_mau_azota.zip"))("target","_blank")("fileName",e.bMT(44,58,"lang_testbank_create_document_azota_pdf_model"))("fileDescription","lang_testbank_create_document_azota_pdf_model")("classStyle","text-primary"),e.R7$(4),e.Y8G("dataUrl",e.bMT(47,60,"medias_[LANG]/de_mau_azota.docx?raw=true"))("target","_self")("fileName",e.bMT(48,62,"lang_testbank_create_document_azota_docx_model"))("fileDescription","lang_testbank_create_document_azota_docx_model")("classStyle","text-primary"),e.R7$(4),e.Y8G("dataUrl",e.bMT(51,64,"medias_[LANG]/mau_de_dung_sai_azota_v2.docx?raw=true"))("target","_self")("fileName",e.bMT(52,66,"lang_testbank_create_document_azota_docx_true_false_model"))("fileDescription","lang_testbank_create_document_azota_docx_true_false_model")("classStyle","text-primary"),e.R7$(4),e.Y8G("dataUrl",e.bMT(55,68,"medias_[LANG]/de_mau_azota_excel_v2_5.xlsx?raw=true"))("target","_self")("fileName",e.bMT(56,70,"lang_testbank_create_document_azota_pdf_model"))("fileDescription","lang_testbank_create_document_azota_excel_model")("classStyle","text-primary"),e.R7$(4),e.SpI(" ",e.bMT(59,72,"lang_auto_hoac")," "),e.R7$(6),e.JRh(e.bMT(65,74,"lang_azt_import_from_your_exam_questions")))},dependencies:[u.YU,$e.W,ze.p,Q.Q,h.WGl,j.wp,j.c2,j.V3],encapsulation:2}),o})();var Ve=r(37497),U=r(60833),M=r(18718),Be=r(22613),G=r(94743);const $=t=>[t],q=()=>({"mr-2":!0}),Ye=()=>({backTo:"/admin/question-library/dashboard"});function Xe(t,o){if(1&t&&e.nrm(0,"azt-loading-effect",4),2&t){const i=e.XpG();e.Y8G("currentStatusObj",i.statusObj)}}function Ue(t,o){if(1&t&&(e.j41(0,"div",22)(1,"div",23),e.nI1(2,"navigationLocalize"),e.j41(3,"div",24),e.EFF(4),e.k0s(),e.j41(5,"div",25),e.EFF(6),e.nI1(7,"number"),e.nI1(8,"mytranslate"),e.k0s()()()),2&t){const i=o.$implicit;e.R7$(),e.Y8G("routerLink",e.eq3(10,$,e.bMT(2,4,"/admin/question-library/view-question-library/"+i.id+"/0")))("queryParams",e.lJ4(12,Ye)),e.R7$(3),e.JRh(i.name),e.R7$(2),e.JRh(e.bMT(7,6,i.totalQuestion)+" "+e.bMT(8,8,"lang_notice_question"))}}function qe(t,o){if(1&t){const i=e.RV6();e.qex(0),e.j41(1,"div",6)(2,"div",7)(3,"div",8)(4,"h3",9),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s()(),e.j41(7,"div",10)(8,"button",11),e.nI1(9,"navigationLocalize"),e.nrm(10,"lucide-icon",12),e.EFF(11),e.nI1(12,"mytranslate"),e.k0s()()()(),e.j41(13,"div",13),e.DNE(14,Ue,9,13,"div",14),e.k0s(),e.j41(15,"div",15)(16,"div",16)(17,"div",17)(18,"azt-paging",18),e.bIt("goToPaginationPage",function(a){e.eBV(i);const s=e.XpG(2);return e.Njj(s.goToPage(a))}),e.k0s()(),e.j41(19,"div",19)(20,"p",20),e.EFF(21),e.nI1(22,"mytranslate"),e.k0s()(),e.j41(23,"div",21)(24,"p",20),e.EFF(25),e.nI1(26,"mytranslate"),e.k0s()()()(),e.bVm()}if(2&t){const i=e.XpG(2);e.R7$(5),e.SpI(" ",e.bMT(6,8,"lang_notice_bank_question")," "),e.R7$(3),e.Y8G("routerLink",e.eq3(18,$,e.bMT(9,10,"/admin/question-library/add-new-question-library"))),e.R7$(2),e.Y8G("ngClass",e.lJ4(20,q)),e.R7$(),e.SpI(" ",e.bMT(12,12,"lang_azt_create_a_question_bank")," "),e.R7$(3),e.Y8G("ngForOf",i.ebankList),e.R7$(4),e.Y8G("pageObj",i.pageObj),e.R7$(3),e.JRh(i.totalEbank+" "+e.bMT(22,14,"lang_testbank_test_list_document")),e.R7$(4),e.JRh(i.totalEbank+" "+e.bMT(26,16,"lang_testbank_test_list_document"))}}function Ke(t,o){1&t&&(e.j41(0,"div",26)(1,"p",27),e.nrm(2,"azt-svg-icon",28),e.k0s(),e.j41(3,"p",29),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s(),e.j41(6,"p",30)(7,"button",31),e.nI1(8,"navigationLocalize"),e.nrm(9,"lucide-icon",12),e.EFF(10),e.nI1(11,"mytranslate"),e.k0s()()()),2&t&&(e.R7$(2),e.Y8G("size",82),e.R7$(2),e.SpI(" ",e.bMT(5,5,"lang_azt_you_dont_have_any_question_bank_yet")," "),e.R7$(3),e.Y8G("routerLink",e.eq3(11,$,e.bMT(8,7,"/admin/question-library/add-new-question-library"))),e.R7$(2),e.Y8G("ngClass",e.lJ4(13,q)),e.R7$(),e.SpI(" ",e.bMT(11,9,"lang_azt_create_a_question_bank")," "))}function Je(t,o){if(1&t&&e.DNE(0,qe,27,21,"ng-container",5)(1,Ke,12,14,"ng-template",null,1,e.C5r),2&t){const i=e.sdS(2),n=e.XpG();e.Y8G("ngIf",n.ebankList.length)("ngIfElse",i)}}let K=(()=>{var t;class o extends T.H{getEbankList(){this.initStatusObj(),this.waitDestroy(this.ebankService.apiEbanksListPost({page:this.pageObj.page,size:this.pageObj.pageSize}).subscribe(a=>{if(!a.success)return this.errorStatusObj(a.message,!0);this.ebankList=a.data?.objs??[],this.totalEbank=a.data?.total??0,this.pageObj.setTotalPages(this.totalEbank),this.stopStatusObj()}))}goToPage(n){this.pageObj.setPageNumber(n)}ngOnInit(){super.ngOnInit(),this.getEbankList()}constructor(n){super(),this.ebankService=n,this.ebankList=[],this.totalEbank=0,this.pageObj=new Ve.d(24)}}return(t=o).\u0275fac=function(n){return new(n||t)(e.rXU(U.n))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-question-library-dashboard"]],features:[e.Vt3],decls:4,vars:3,consts:[["doneLoading",""],["emptyQuestionLibrary",""],[3,"headerBackToLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[4,"ngIf","ngIfElse"],[1,"mt-5"],[1,"flex","flex-col-reverse","sm:flex-row","items-center"],[1,"w-full","sm:w-auto","mt-3","sm:mt-0","mr-auto"],[1,"text-xl","font-medium"],[1,"w-full","sm:w-auto","flex"],[1,"btn","btn-primary","shadow-md","ml-2",3,"routerLink"],["name","plus","size","16",3,"ngClass"],[1,"grid","grid-cols-12","mt-5","gap-5"],["class","col-span-12 sm:col-span-6 md:col-span-4 lg:col-span-3",4,"ngFor","ngForOf"],[2,"height","25px"],[1,"flex","items-center","flex-col-reverse","sm:flex-row","mt-3"],[1,"mr-0","sm:mr-auto","mt-2",2,"position","absolute","bottom","10px"],[3,"goToPaginationPage","pageObj"],[1,"text-right","pb-2","azt-hidden","md:block",2,"position","absolute","bottom","10px","right","20px"],[1,"text-md"],[1,"ml-auto","text-right","-mt-2","block","md:hidden"],[1,"col-span-12","sm:col-span-6","md:col-span-4","lg:col-span-3"],[1,"box","p-5","zoom-in","h-full",3,"routerLink","queryParams"],[1,"font-medium"],[1,"mt-3"],[1,"intro-y","empty-trash","flex","flex-col","justify-center","text-center",2,"height","400px"],[1,"text-primary","text-center"],["type","inbox-empty",3,"size"],[1,"text-lg","font-medium","mt-1"],[1,"text-md","text-slate-500","mt-4"],[1,"btn","btn-primary","shadow-md",3,"routerLink"]],template:function(n,a){if(1&n&&(e.j41(0,"teacher-layout",2),e.DNE(1,Xe,1,1,"azt-loading-effect",3)(2,Je,3,2,"ng-template",null,0,e.C5r),e.k0s()),2&n){const s=e.sdS(3);e.Y8G("headerBackToLink","/admin/dashboard"),e.R7$(),e.Y8G("ngIf",a.statusObj.loading)("ngIfElse",s)}},dependencies:[y.Wk,u.YU,u.Sq,u.bT,M.K,Be.q,G.m,Q.Q,h.WGl,u.QX,j.F2,j.wp],encapsulation:2}),o})();var J=r(76627),W=r(25539),H=r(30657),We=r(7908),He=r(9280),Z=r(33887),ee=r(9570);function Ze(t,o){if(1&t&&(e.j41(0,"div",17)(1,"audio",18),e.nrm(2,"source",19),e.nI1(3,"mycdn"),e.nI1(4,"safe"),e.k0s()()),2&t){const i=e.XpG();e.R7$(),e.FS9("id","audio_"+i.data.questionObj.id),e.R7$(),e.Y8G("src",e.bMT(4,4,e.bMT(3,2,i.data.questionObj.attachments[0].url)),e.B4B)}}function et(t,o){if(1&t&&(e.j41(0,"div",22)(1,"b",23),e.EFF(2),e.k0s(),e.j41(3,"div",24),e.nrm(4,"azt-dynamic-hook",10),e.k0s()()),2&t){let i;const n=o.$implicit;e.R7$(2),e.SpI("",null!==(i=n.alpha)&&void 0!==i?i:n.key,"."),e.R7$(2),e.Y8G("content",n.content)}}function tt(t,o){if(1&t&&(e.j41(0,"div",20),e.DNE(1,et,5,2,"div",21),e.k0s()),2&t){const i=e.XpG();e.R7$(),e.Y8G("ngForOf",i.data.questionObj.answers)}}function nt(t,o){if(1&t&&(e.j41(0,"h2",25),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t){const i=e.XpG();e.R7$(),e.Lme(" ",e.bMT(2,2,"lang_auto_dap_an"),": ",i.data.questionObj.answerResult.join(", ")," ")}}function it(t,o){1&t&&(e.j41(0,"span",26),e.nrm(1,"azt-loading-ui"),e.k0s())}let at=(()=>{var t;class o extends Z._{confirmDelete(){this.initStatusObj(),this.waitDestroy(this.eBanksQuestionService.apiEbanksQuestionsDeletePost({questionIds:[this.data.questionObj.id],ebankId:this.data.ebankId}).subscribe(n=>{if(!n.success)return this.errorStatusObj(n.message,!0);this.successStatusObj("lang_cms_delete_success",!0),this.dialogRef.close(!0)}))}btnCloseDialog(){this.dialogRef.close(!1)}constructor(n,a,s){super(s,a),this.eBanksQuestionService=n,this.dialogRef=a,this.data=s}}return(t=o).\u0275fac=function(n){return new(n||t)(e.rXU(O.N8),e.rXU(l.CP,8),e.rXU(l.Vh,8))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-remove-question-library-dialog"]],features:[e.Vt3],decls:28,vars:23,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-3","border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"intro-y","overflow-auto",2,"max-height","calc(100vh - 150px)"],[1,"text-md","mr-auto","font-bold"],[1,"border-t","border-slate-200/60","dark:border-darkmode-400","py-2","mt-2"],[1,"font-medium","text-md","text-center","mb-2"],["class","text-center ml-auto mr-auto mt-2",4,"ngIf"],[1,"question-standalone-label","mt-2"],[1,"tex2jax_process","box-content",2,"width","auto"],[3,"content"],["class","grid grid-cols-12 gap-2 answers mt-3",4,"ngIf"],["class","font-medium text-md text-left text-success my-2 mt-3",4,"ngIf"],[1,"p-3","flex","justify-end"],[1,"btn","w-24","btn-secondary","mr-3",3,"click"],[1,"btn","btn-danger","mw-24",3,"click","disabled"],["class","w-3 mr-2",4,"ngIf"],[1,"text-center","ml-auto","mr-auto","mt-2"],["controls","","preload","true",2,"margin-left","10px","margin-right","10px","max-width","70%",3,"id"],[3,"src"],[1,"grid","grid-cols-12","gap-2","answers","mt-3"],["class","answer col-span-12",4,"ngFor","ngForOf"],[1,"answer","col-span-12"],[1,"answer-label"],[1,"answer-content"],[1,"font-medium","text-md","text-left","text-success","my-2","mt-3"],[1,"w-3","mr-2"]],template:function(n,a){if(1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s(),e.j41(7,"div",5)(8,"h2",6),e.EFF(9),e.nI1(10,"mytranslate"),e.k0s(),e.DNE(11,Ze,5,6,"div",7),e.j41(12,"div",8),e.EFF(13),e.nI1(14,"mytranslate"),e.k0s(),e.j41(15,"div",9),e.nrm(16,"azt-dynamic-hook",10),e.k0s(),e.DNE(17,tt,2,1,"div",11)(18,nt,3,4,"h2",12),e.nI1(19,"isEssayAnswer"),e.k0s()()()(),e.j41(20,"div",13)(21,"button",14),e.bIt("click",function(){return a.btnCloseDialog()}),e.EFF(22),e.nI1(23,"mytranslate"),e.k0s(),e.j41(24,"button",15),e.bIt("click",function(){return a.confirmDelete()}),e.DNE(25,it,2,0,"span",16),e.EFF(26),e.nI1(27,"mytranslate"),e.k0s()()()),2&n){let s;e.R7$(5),e.SpI(" ",e.bMT(6,11,"lang_remove_question_from_library")," "),e.R7$(4),e.SpI(" ",e.bMT(10,13,"lang_auto_noi_dung_cau_hoi")," "),e.R7$(2),e.Y8G("ngIf",a.data.questionObj.attachments&&a.data.questionObj.attachments.length>0),e.R7$(2),e.SpI(" ",e.bMT(14,15,"lang_auto_cau")+" "+((null!=a.data.questionObj.labelIndex?a.data.questionObj.labelIndex:a.data.index)+1)," "),e.R7$(3),e.Y8G("content",null!==(s=a.data.questionObj.content)&&void 0!==s?s:""),e.R7$(),e.Y8G("ngIf",1==a.data.questionObj.answerType&&a.data.questionObj.answers&&a.data.questionObj.answers.length>0),e.R7$(),e.Y8G("ngIf",a.data.questionObj.answerResult&&!e.bMT(19,17,a.data.questionObj)),e.R7$(4),e.SpI(" ",e.bMT(23,19,"lang_auto_dong")," "),e.R7$(2),e.Y8G("disabled",a.statusObj.loading),e.R7$(),e.Y8G("ngIf",a.statusObj.loading),e.R7$(),e.SpI(" ",e.bMT(27,21,"lang_auto_xoa")," ")}},dependencies:[u.Sq,u.bT,D.R,ee.x,j.wp,j.nf,j.JI,j.Zm],styles:[".answer-content[_ngcontent-%COMP%]{display:flex!important;flex-wrap:wrap}.answer-box[_ngcontent-%COMP%]{border-radius:0 0 3px 3px;padding:8px 20px;justify-content:space-between;align-items:center}.answer[_ngcontent-%COMP%]{display:flex;align-items:center}.group-content-of-question-standalone[_ngcontent-%COMP%]{margin-bottom:10px;font-weight:700}.question-standalone-label[_ngcontent-%COMP%]{font-weight:700}.answer-label[_ngcontent-%COMP%]{min-width:20px;min-height:30px;display:flex;align-items:center;justify-content:flex-start;border-radius:50%;border-width:2px;border-style:solid;border-color:transparent}"]}),o})();var ot=r(24793),st=r(1382),z=r(46899),te=r(17818),rt=r(22829),ne=r(34965);const lt=()=>({"mr-2":!0}),ct=t=>({"mb-2":t}),dt=()=>({}),ut=t=>({id:0,name:"",countQuestion:0,showFrontend:0,allowStudentView:!1,editable:!1,permissionObj:t}),ie=t=>({"mr-2":t}),ae=t=>({"padding-mobile":t});function mt(t,o){if(1&t&&e.nrm(0,"azt-loading-effect",5),2&t){const i=e.XpG();e.Y8G("currentStatusObj",i.statusObj)}}function _t(t,o){1&t&&(e.j41(0,"div",10)(1,"h3",11),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()),2&t&&(e.R7$(2),e.JRh(e.bMT(3,1,"lang_question_library_no_question_exist")))}function pt(t,o){if(1&t&&(e.j41(0,"div",32)(1,"div",36)(2,"span"),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()(),e.j41(5,"div",34),e.nrm(6,"azt-dynamic-hook",37),e.k0s()()),2&t){const i=e.XpG().$implicit,n=e.XpG(3);e.Y8G("ngClass",e.eq3(5,ae,n.isMobileDevice)),e.R7$(3),e.JRh(e.bMT(4,3,"lang_auto_huong_dan_giai_upper")),e.R7$(3),e.Y8G("content",i.help)}}function bt(t,o){if(1&t){const i=e.RV6();e.j41(0,"div",17)(1,"div",18),e.nrm(2,"azt-question-standalone-for-analyze-knowledge",19),e.j41(3,"div",20)(4,"button",21),e.nrm(5,"lucide-icon",22),e.k0s()(),e.j41(6,"mat-menu",23,2)(8,"div",24)(9,"ul",25)(10,"li")(11,"a",26),e.bIt("click",function(){const a=e.eBV(i),s=a.$implicit,c=a.index,d=e.XpG(3);return e.Njj(d.showRemoveQuestionDialog(s,c))}),e.j41(12,"span"),e.nrm(13,"lucide-icon",27),e.j41(14,"span",28),e.EFF(15),e.nI1(16,"mytranslate"),e.k0s()()()(),e.j41(17,"li")(18,"a",29),e.bIt("click",function(){const a=e.eBV(i).$implicit,s=e.XpG(3);return e.Njj(s.editQuestionEvent(a))}),e.j41(19,"span"),e.nrm(20,"lucide-icon",30),e.j41(21,"span",28),e.EFF(22),e.nI1(23,"mytranslate"),e.k0s()()()()()()(),e.DNE(24,pt,7,7,"div",31),e.j41(25,"div",32)(26,"div",33)(27,"span"),e.EFF(28),e.nI1(29,"mytranslate"),e.k0s()(),e.j41(30,"div",34)(31,"azt-question-knowledge-unit-for-update",35),e.bIt("selectKnowledgeEmit",function(a){const s=e.eBV(i).$implicit,c=e.XpG(3);return e.Njj(c.selectKnowledgeEmit(a,s))}),e.k0s()()()()()}if(2&t){let i,n,a,s;const c=o.$implicit,d=o.index,E=o.last,N=e.sdS(7),L=e.XpG(3);e.R7$(),e.Y8G("ngClass",e.eq3(26,ct,!E)),e.R7$(),e.Y8G("examObj",e.eq3(29,ut,e.lJ4(28,dt)))("questionObj",c)("modeView","question_lib")("follower",L.followerRenderQuest)("curQuestionIndex",d),e.R7$(2),e.Y8G("matMenuTriggerFor",N),e.R7$(9),e.Y8G("ngClass",e.eq3(31,ie,!L.isMobileDevice)),e.R7$(2),e.JRh(e.bMT(16,20,"lang_auto_xoa_cau_hoi")),e.R7$(5),e.Y8G("ngClass",e.eq3(33,ie,!L.isMobileDevice)),e.R7$(2),e.JRh(e.bMT(23,22,"lang_core_chinh_sua_de_thi")),e.R7$(2),e.Y8G("ngIf",c.help),e.R7$(),e.Y8G("ngClass",e.eq3(35,ae,L.isMobileDevice)),e.R7$(3),e.JRh(e.bMT(29,24,"lang_auto_don_vi_kien_thuc")),e.R7$(3),e.Y8G("knowledgeObjs",L.knowledgeObjs)("questionId",c.id)("levelId",null!==(i=null==L.ebankDataObj?null:L.ebankDataObj.levelId)&&void 0!==i?i:0)("subjectId",null!==(n=null==L.ebankDataObj?null:L.ebankDataObj.subjectId)&&void 0!==n?n:0)("knowledgeId",null!==(a=c.knowledgeId)&&void 0!==a?a:0)("objectiveId",null!==(s=c.objectiveId)&&void 0!==s?s:0)}}function gt(t,o){if(1&t){const i=e.RV6();e.j41(0,"div",12),e.DNE(1,bt,32,37,"div",13),e.k0s(),e.j41(2,"div",14)(3,"button",15),e.bIt("click",function(){e.eBV(i);const a=e.XpG(2);return e.Njj(a.loadMoreQuestion())}),e.EFF(4),e.nI1(5,"mytranslate"),e.nrm(6,"lucide-icon",16),e.k0s()()}if(2&t){const i=e.XpG(2);e.R7$(),e.Y8G("ngForOf",i.questionObjs),e.R7$(2),e.Y8G("disabled",i.totalQuestion<=i.page*i.sizeApi),e.R7$(),e.SpI(" ",e.bMT(5,4,"lang_auto_xem_them")," "),e.R7$(2),e.Y8G("ngClass",e.lJ4(6,lt))}}function ht(t,o){if(1&t&&(e.j41(0,"div",6)(1,"div")(2,"span",7),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"span",8),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()(),e.DNE(8,_t,4,3,"div",9)(9,gt,7,7,"ng-template",null,1,e.C5r),e.k0s()),2&t){let i;const n=e.sdS(10),a=e.XpG();e.R7$(3),e.JRh(null!==(i=null==a.ebankFrameObj?null:a.ebankFrameObj.name)&&void 0!==i?i:e.bMT(4,4,"lang_notice_bank_question")),e.R7$(3),e.SpI("(",a.totalQuestion+" "+e.bMT(7,6,"lang_auto_cau_hoi"),")"),e.R7$(2),e.Y8G("ngIf",!a.questionObjs.length)("ngIfElse",n)}}let ft=(()=>{var t;class o extends T.H{showRemoveQuestionDialog(n,a){this.sAztDialogService.open(at,{width:"750px",data:{questionObj:n,ebankId:this.ebankDataObj?.id??0,index:a},restoreFocus:!1,autoFocus:!1}).afterClosed().subscribe(d=>{d&&(this.initStatusObj(),this.questionObjs=this.questionObjs.filter(E=>E.id!=n.id),this.stopStatusObj())})}editQuestionEvent(n){let a=`/admin/question-library/view-question-list-node/${this.bankId}/${this.frameId}`+(this.backLink?"?backto="+encodeURIComponent(this.backLink):"");window.location.href=this.commonService.getLocalRouter("/admin/testbank/azota-editor/0")+"/"+n.id+"?backto="+encodeURIComponent(a)+"&r="+(n.rawIndex??0)}loadMoreQuestion(){this.page++,this.getDataFrame()}selectKnowledgeEmit(n,a){let s=this.questionObjs.find(c=>c.id==a.id);s&&(s.knowledgeId=n.knowledgeId,s.objectiveId=n.objectiveId,this.checkStructure(n))}checkStructure(n){if(this.structuresObjs.find(c=>n.knowledgeId&&c.id==n.knowledgeId&&"knowledge"==c.typeNode||n.objectiveId&&c.id==n.objectiveId&&"objective"==c.typeNode))return this.calcStructureExamObj();let s=n.objectiveId??n.knowledgeId;s&&(this.structuresObjs.push({id:s,title:n.title,numberOfQuestions:1,typeNode:n.objectiveId?"objective":"knowledge"}),this.calcStructureExamObj())}calcStructureExamObj(){this.structuresObjs.forEach(n=>{n.numberOfQuestions=0,this.questionObjs.forEach(a=>{(a.knowledgeId&&"knowledge"==n.typeNode&&n.id==a.knowledgeId||a.objectiveId&&"objective"==n.typeNode&&n.id==a.objectiveId)&&n.numberOfQuestions++})}),setTimeout(()=>this.structuresObjs=this.structuresObjs.filter(n=>0!=n.numberOfQuestions),0)}initStructureObjs(){this.questionObjs.forEach(n=>{let a=this.sAztKnowledgeObjectiveService.getObjByKnowledgeIdOrObjectiveId(this.knowledgeObjs,n.knowledgeId??0,n.objectiveId??0);a&&this.checkStructure(a)})}getDataFrame(){this.initStatusObj(),this.eBanksQuestionService.apiEbanksQuestionsListPost({ebankId:this.bankId,ebankFrameId:this.frameId,page:this.page,size:this.sizeApi}).subscribe(a=>{if(!a.success)return this.errorStatusObj(a.message,!0);this.ebankDataObj=a.data?.ebank,this.ebankFrameObj=a.data?.ebankFrame;let s=this.commonService.castJsonToClassObjs(W.I,JSON.stringify(a.data?.list));const c=this.changeAnswerResultStatus(s??[]);this.followerRenderQuest.setNumQuest(c.length),this.docxService.replaceCanvasBackgroundTS(c),c.map(d=>d.answerResult??[]),this.questionObjs.push(...c),this.questionService.apiQuestionGetTagsGet().subscribe(d=>{1==d.success&&(this.questionTags=d.data?.objs??[])}),this.totalQuestion=a.data?.total??0,this.sAztKnowledgeObjectiveService.getKnowledgeByApi(this.ebankDataObj?.levelId??0,this.ebankDataObj?.subjectId??0,!1,0,d=>{this.knowledgeObjs=d,this.initStructureObjs()},d=>{}),this.successStatusObj()})}changeAnswerResultStatus(n){var a=[];return n.forEach((s,c)=>{s.index=c,s.isRoleTeacher=!0,s.answers&&s.answerResult?(s.answers.forEach(d=>{d.questionId=s.id,d.checked=!1,d.isTrue=this.checkAnswerResult(d.key??"",s.answerResult)}),a.push(s)):a.push(s)}),a}checkAnswerResult(n,a){return null!=a.find(s=>s==n)}ngOnInit(){this.waitDestroy((0,J.z)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.frameId=Number(this.commonService.getMyParam(this.activeRoute,"frameId")),this.bankId=Number(this.commonService.getMyParam(this.activeRoute,"bankId")),this.backLink=this.commonService.getMyQueryParam("backto")??"/admin/view-question-library/"+this.bankId+"/0",this.getDataFrame()}))}constructor(n,a,s,c,d){super(),this.activeRoute=n,this.sAztQuestionKnowledgeUnitService=a,this.eBanksQuestionService=s,this.docxService=c,this.sAztDialogService=d,this.sAztKnowledgeObjectiveService=(0,e.WQX)(We.n),this.questionService=(0,e.WQX)(He.wP),this.backLink="",this.frameId=0,this.bankId=0,this.page=1,this.sizeApi=50,this.questionTags=[],this.questionObjs=[],this.followerRenderQuest=new H.e,this.totalQuestion=0,this.structuresObjs=[],this.knowledgeObjs=[]}}return(t=o).\u0275fac=function(n){return new(n||t)(e.rXU(y.nX),e.rXU(ot.s),e.rXU(O.N8),e.rXU(st.I),e.rXU(z.i))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-view-list-question-node"]],features:[e.Vt3],decls:4,vars:3,consts:[["doneLoading",""],["showList",""],["mainMenu","matMenu"],[3,"headerBackToLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[1,"container","mx-auto","mt-3",2,"max-width","1000px"],[1,"font-medium"],[1,"ml-3","text-slate-500","text-xs"],["class","box p-3 mt-3",4,"ngIf","ngIfElse"],[1,"box","p-3","mt-3"],[1,"text-slate-500","text-md",2,"font-weight","420"],[1,"box","rounded-none","mt-3",2,"background-color","transparent"],["class","question-standalone-content-box",4,"ngFor","ngForOf"],[1,"mt-3","mx-auto","w-full","text-center"],[1,"btn","btn-transparent","mx-auto",3,"click","disabled"],["name","chevron-down","size","20",3,"ngClass"],[1,"question-standalone-content-box"],[1,"box-service","box","border","border-slate-400","dark:border-darkmode-400","px-3","py-2","relative",3,"ngClass"],[3,"examObj","questionObj","modeView","follower","curQuestionIndex"],[1,"absolute",2,"left","auto","top","10px","right","10px"],[1,"btn","btn-sm","btn-transparent",3,"matMenuTriggerFor"],["name","ellipsis-vertical"],["xPosition","before"],[1,"dropdown-menu","show","relative","w-72"],[1,"dropdown-content"],[1,"dropdown-item","text-danger",2,"align-items","center",3,"click"],["name","trash","size","16",3,"ngClass"],[2,"vertical-align","middle"],[1,"dropdown-item",2,"align-items","center",3,"click"],["name","file-pen-line","size","16",3,"ngClass"],["class","box-help mt-2",3,"ngClass",4,"ngIf"],[1,"box-help","mt-2",3,"ngClass"],[1,"help-title","uppercase"],[1,"tex2jax_process","help-content","text-slate-500"],[3,"selectKnowledgeEmit","knowledgeObjs","questionId","levelId","subjectId","knowledgeId","objectiveId"],[1,"help-title"],[3,"content"]],template:function(n,a){if(1&n&&(e.j41(0,"teacher-layout",3),e.DNE(1,mt,1,1,"azt-loading-effect",4)(2,ht,11,8,"ng-template",null,0,e.C5r),e.k0s()),2&n){const s=e.sdS(3);e.Y8G("headerBackToLink",a.backLink),e.R7$(),e.Y8G("ngIf",a.statusObj.loading)("ngIfElse",s)}},dependencies:[u.YU,u.Sq,u.bT,te.kk,te.Cp,M.K,ee.x,rt.y,ne.Q,Q.Q,h.WGl,j.wp],styles:[".box-service-name[_ngcontent-%COMP%], .box-service-question-name[_ngcontent-%COMP%]{outline:1px solid #ccc;padding:3px 10px!important;border-radius:3px;font-weight:500}.box-service-question-name[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content}.box-service-question[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap}.box-service-question[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child{border-right:none}.box-service-question[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:last-child{border-right:none}.box-help[_ngcontent-%COMP%]{border-top:1px solid #d7d7d7;padding:10px}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]{text-align:center;font-size:11px;margin-top:-20px}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#fff;padding:0 10px;color:#d58e0b}.box-help[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]{font-size:13px;overflow-x:auto;overflow-y:hidden}.custom-cell-knowledge[_ngcontent-%COMP%]{position:absolute;left:10px;top:0;bottom:0}.custom-colums-knowledge[_ngcontent-%COMP%]{height:calc(100vh - 200px);overflow-y:auto}@media screen and (max-width: 768px){.custom-colums-knowledge[_ngcontent-%COMP%]{height:auto!important;overflow-y:hidden}}"]}),o})();var A=r(68323);function vt(t,o){if(1&t&&(e.j41(0,"div",1),e.nrm(1,"div",2),e.k0s()),2&t){const i=e.XpG();e.R7$(),e.Y8G("chart",i.chartSkill)}}let yt=(()=>{var t;class o extends T.H{constructor(){super(...arguments),this.keyTitle="",this.height=300,this.width=250}handleData(){return this.data.filter(a=>0!==a.totalQuestion).map(a=>({name:this.commonService.myTranslateInstant(a.name),y:a.totalQuestion}))}createPieChart(){let n=this.handleData();if(!n.length)return;const a=n.reduce((c,d)=>(d.y??0)>(c.y??0)?d:c,n[0]);n=n.map(c=>c.y===a.y?{...c,sliced:!0,selected:!0}:c);let s=new b.t1({chart:{type:"pie",height:this.height,width:this.width},title:{text:this.commonService.myTranslateInstant(this.keyTitle)},credits:{enabled:!1},series:[{name:this.commonService.myTranslateInstant("lang_core_total_question"),type:"pie",data:n,dataLabels:{enabled:!0,distance:-40,format:"{point.name}: {point.y}",style:{color:"#000000"},filter:{operator:"==",property:"y",value:a.y??0}}}]});this.chartSkill=s}ngOnInit(){this.createPieChart()}}return(t=o).\u0275fac=(()=>{let i;return function(a){return(i||(i=e.xGo(t)))(a||t)}})(),t.\u0275cmp=e.VBU({type:t,selectors:[["app-azt-pie-chart"]],inputs:{keyTitle:"keyTitle",data:"data",height:"height",width:"width"},features:[e.Vt3],decls:1,vars:1,consts:[["class","mb-5",4,"ngIf"],[1,"mb-5"],[3,"chart"]],template:function(n,a){1&n&&e.DNE(0,vt,2,1,"div",0),2&n&&e.Y8G("ngIf",a.chartSkill)},dependencies:[u.bT,b.S6],encapsulation:2}),o})();function kt(t,o){1&t&&(e.j41(0,"div",2),e.nrm(1,"azt-loading-ui",3),e.k0s()),2&t&&(e.R7$(),e.Y8G("size",30))}function It(t,o){1&t&&(e.j41(0,"div",6),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_homework_homework_list_not_found")," "))}function xt(t,o){1&t&&(e.j41(0,"div",14),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_homework_homework_list_not_found")," "))}function jt(t,o){if(1&t&&(e.j41(0,"tr")(1,"td",19)(2,"div",20),e.nrm(3,"azt-create-avatar",21),e.j41(4,"div",22)(5,"h3",11),e.EFF(6),e.k0s(),e.j41(7,"p",23),e.EFF(8),e.k0s()()()(),e.j41(9,"td",19),e.EFF(10),e.k0s()()),2&t){const i=o.$implicit;e.R7$(3),e.Y8G("linkAvatar",i.avatar)("nameCreateAvatar",i.fullName)("size",35),e.R7$(3),e.JRh(i.fullName),e.R7$(2),e.JRh(i.email),e.R7$(2),e.JRh(i.totalQuestion)}}function wt(t,o){if(1&t&&(e.j41(0,"table",15)(1,"thead")(2,"tr")(3,"th",16),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s(),e.j41(6,"th",17),e.EFF(7),e.nI1(8,"mytranslate"),e.k0s()()(),e.j41(9,"tbody"),e.DNE(10,jt,11,6,"tr",18),e.k0s()()),2&t){const i=e.XpG(3);e.R7$(4),e.JRh(e.bMT(5,3,"lang_auto_ho_va_ten")),e.R7$(3),e.JRh(e.bMT(8,5,"S\u1ed1 l\u01b0\u1ee3ng c\xe2u h\u1ecfi")),e.R7$(3),e.Y8G("ngForOf",i.dataAnalytics.members)}}function Tt(t,o){if(1&t&&(e.j41(0,"div")(1,"div",7),e.nrm(2,"app-azt-pie-chart",8)(3,"app-azt-pie-chart",8)(4,"app-azt-pie-chart",8),e.k0s(),e.j41(5,"div",9)(6,"div",10)(7,"p",11),e.EFF(8),e.nI1(9,"mytranslate"),e.k0s()(),e.DNE(10,xt,3,3,"div",12)(11,wt,11,7,"table",13),e.k0s()()),2&t){const i=e.XpG(2);e.R7$(2),e.Y8G("data",i.dataAnalytics.frames)("width",400)("keyTitle","lang_core_so_luong_cau_hoi_theo_cau_truc"),e.R7$(),e.Y8G("data",i.dataAnalytics.tags)("width",400)("keyTitle","lang_core_ty_le_muc_do_kho_cua_cau_hoi"),e.R7$(),e.Y8G("data",i.dataAnalytics.answerTypes)("width",400)("keyTitle","lang_core_ty_le_cac_dang_thuc_cau_hoi"),e.R7$(4),e.JRh(e.bMT(9,12,"lang_core_danh_sach_dong_gop")),e.R7$(2),e.Y8G("ngIf",!i.dataAnalytics.members.length),e.R7$(),e.Y8G("ngIf",i.dataAnalytics.members.length)}}function Ct(t,o){if(1&t&&e.DNE(0,It,3,3,"div",4)(1,Tt,12,14,"div",5),2&t){const i=e.XpG();e.Y8G("ngIf",!i.dataAnalytics),e.R7$(),e.Y8G("ngIf",i.dataAnalytics)}}let Rt=(()=>{var t;class o extends T.H{getData(){this.initStatusObj(),this.ebankService.apiEbanksCountQuestionsGet(this.bankId,void 0).subscribe(n=>n.success?(this.dataAnalytics=n.data,this.dataAnalytics?(this.dataAnalytics.frames=this.dataAnalytics.frames,this.dataAnalytics.answerTypes.forEach(a=>a.name="lang_tool_knowledge_answer_type_"+a.name),this.dataAnalytics.tags=this.dataAnalytics.tags,void this.stopStatusObj()):this.stopStatusObj()):this.errorStatusObj(n.message,!0))}ngOnInit(){this.getData()}constructor(n){super(),this.ebankService=n}}return(t=o).\u0275fac=function(n){return new(n||t)(e.rXU(U.n))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-question-library-analytics-box"]],inputs:{bankId:"bankId"},features:[e.Vt3],decls:3,vars:2,consts:[["doneLoading",""],["class","flex justify-center items-center p-5",4,"ngIf","ngIfElse"],[1,"flex","justify-center","items-center","p-5"],[3,"size"],["class","flex justify-center items-center",4,"ngIf"],[4,"ngIf"],[1,"flex","justify-center","items-center"],[1,"flex","justify-around","mr-5","ml-5"],[3,"data","width","keyTitle"],[1,"w-full"],[1,"flex","justify-between","items-center","pb-2",2,"border-bottom","1px solid #ddd"],[1,"font-medium"],["class","flex justify-center items-center mt-3",4,"ngIf"],["class","table","style","white-space: initial",4,"ngIf"],[1,"flex","justify-center","items-center","mt-3"],[1,"table",2,"white-space","initial"],[1,"whitespace-nowrap"],[1,"whitespace-nowrap","text-center"],[4,"ngFor","ngForOf"],[1,"text-center","capitalize"],[1,"flex","items-center"],[3,"linkAvatar","nameCreateAvatar","size"],[1,"ml-3","text-left"],[1,"text-slate-500","text-xs"]],template:function(n,a){if(1&n&&e.DNE(0,kt,2,1,"div",1)(1,Ct,2,2,"ng-template",null,0,e.C5r),2&n){const s=e.sdS(2);e.Y8G("ngIf",a.statusObj.loading)("ngIfElse",s)}},dependencies:[u.Sq,u.bT,A.p,D.R,yt,j.wp],encapsulation:2}),o})();var Ot=r(60495),St=r(87840),Et=r(3635),Lt=r(46882);function Ft(t,o){1&t&&(e.j41(0,"div",2),e.nrm(1,"azt-loading-ui",3),e.k0s()),2&t&&(e.R7$(),e.Y8G("size",30))}function Dt(t,o){if(1&t){const i=e.RV6();e.j41(0,"tr")(1,"td",10)(2,"div",4),e.nrm(3,"azt-create-avatar",11),e.j41(4,"div",12)(5,"h3",13),e.EFF(6),e.k0s(),e.j41(7,"p",14),e.EFF(8),e.k0s()()()(),e.j41(9,"td",10),e.EFF(10),e.nI1(11,"mytranslate"),e.k0s(),e.j41(12,"td",15)(13,"lucide-icon",16),e.nI1(14,"mytranslate"),e.bIt("click",function(){const a=e.eBV(i).$implicit,s=e.XpG(2);return e.Njj(s.showEditPermissionDialog(a))}),e.k0s()()()}if(2&t){const i=o.$implicit,n=e.XpG(2);e.R7$(3),e.Y8G("nameCreateAvatar",i.fullName)("linkAvatar",i.avatar)("size",35),e.R7$(3),e.JRh(i.fullName),e.R7$(2),e.JRh(i.email),e.R7$(2),e.JRh(e.bMT(11,7,n.checkRole(i.role))),e.R7$(3),e.FS9("matTooltip",e.bMT(14,9,"lang_common_edit"))}}function Qt(t,o){if(1&t){const i=e.RV6();e.j41(0,"div")(1,"div",4)(2,"p"),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"span",5),e.bIt("click",function(){e.eBV(i);const a=e.XpG();return e.Njj(a.showListPeopleWhoWillShare())}),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()(),e.j41(8,"table",6)(9,"thead")(10,"tr")(11,"th",7),e.EFF(12),e.nI1(13,"mytranslate"),e.k0s(),e.j41(14,"th",8),e.EFF(15),e.nI1(16,"mytranslate"),e.k0s(),e.nrm(17,"th"),e.k0s()(),e.j41(18,"tbody"),e.DNE(19,Dt,15,11,"tr",9),e.k0s()()()}if(2&t){const i=e.XpG();e.R7$(3),e.JRh(e.bMT(4,5,"lang_core_danh_sach_thanh_vien")),e.R7$(3),e.SpI("+ ",e.bMT(7,7,"lang_teacher_group_group_add_member"),""),e.R7$(6),e.JRh(e.bMT(13,9,"lang_auto_ho_va_ten")),e.R7$(3),e.JRh(e.bMT(16,11,"Vai tr\xf2")),e.R7$(4),e.Y8G("ngForOf",i.members)}}let Mt=(()=>{var t;class o extends T.H{showListPeopleWhoWillShare(){this.sAztDialogService.open(St.z,{data:{shareDataObj:this.shareDataObj,setData:()=>this.getData()},autoFocus:!1,restoreFocus:!1}).afterClosed().subscribe(a=>{a&&this.getData()})}showEditPermissionDialog(n){let a={fullName:n.fullName,phone:n.phone,email:n.email,avatar:n.avatar,id:n.userId,teamPermissions:this.ebankPermissions.filter(c=>c.code==n.role),allowEditPermission:!0,allowDeletePermission:!0};this.sAztDialogService.open(Ot.A,{data:{teacherObj:a,shareDataObj:this.shareDataObj},restoreFocus:!1}).afterClosed().subscribe(c=>{c&&this.getData()})}checkRole(n){return this.ebankPermissions.find(a=>a.code==n)?.key??"lang_auto_nguoi_xem"}getUserTeachers(n){this.teacherGroupService.apiTeacherGroupGetUserTeachersGet().subscribe(a=>{if(!a.success)return n(a.message);let s=this.shareDataObj.teacherObjs;this.shareDataObj.allTeacherPermissionObjs=a.data?.map(c=>({...c,id:c.teacherId??0,allowEditPermission:!0,allowDeletePermission:!0,teamPermissions:s.find(d=>d.id==c.id)?.teamPermissions??[]}))??[],n(void 0)})}getData(){this.initStatusObj(),this.ebankMemberService.apiEbanksMemberEbankIdGet(this.bankId).subscribe(n=>{if(!n.success)return this.errorStatusObj(n.message,!0);this.members=n.data??[],this.shareDataObj.teacherObjs=this.members?.map(a=>({fullName:a.fullName,phone:a.phone,email:a.email,avatar:a.avatar,id:a.userId,allowEditPermission:!0,allowDeletePermission:!0,teamPermissions:this.ebankPermissions.filter(s=>s.code==a.role)})),this.getUserTeachers(a=>{if(a)return this.errorStatusObj(a,!0);this.stopStatusObj()})})}createShareData(){this.shareDataObj={objectId:this.bankId,objectCode:"EBANK",ebankPermissions:this.ebankPermissions,allGroupPermissionObjs:[],allTeacherPermissionObjs:[],groupObjs:[],teacherObjs:[]}}ngOnInit(){this.initStatusObj(),this.createShareData(),this.getData()}constructor(n,a,s){super(),this.ebankMemberService=n,this.sAztDialogService=a,this.teacherGroupService=s,this.members=[],this.ebankPermissions=[{id:1,key:"lang_auto_chu_so_huu",code:"owner"},{id:2,key:"lang_auto_nguoi_xem",code:"viewer"},{id:3,key:"lang_auto_nguoi_soan_thao",code:"editor"}]}}return(t=o).\u0275fac=function(n){return new(n||t)(e.rXU(Et.V),e.rXU(z.i),e.rXU(Lt.x))},t.\u0275cmp=e.VBU({type:t,selectors:[["coazt-question-library-permission-management"]],inputs:{bankId:"bankId"},features:[e.Vt3],decls:2,vars:2,consts:[["class","p-5 flex justify-center items-center",4,"ngIf"],[4,"ngIf"],[1,"p-5","flex","justify-center","items-center"],[3,"size"],[1,"flex","items-center"],[1,"clickable","ml-3","link-color","clickable","uppercase",3,"click"],[1,"table","mt-2",2,"white-space","initial"],[1,"whitespace-nowrap"],[1,"whitespace-nowrap","text-center"],[4,"ngFor","ngForOf"],[1,"text-center","capitalize"],[3,"nameCreateAvatar","linkAvatar","size"],[1,"ml-3","text-left"],[1,"font-medium"],[1,"text-slate-500","text-xs"],[1,"text-right","capitalize"],["size","20","name","pencil",1,"clickable",3,"click","matTooltip"]],template:function(n,a){1&n&&e.DNE(0,Ft,2,1,"div",0)(1,Qt,20,13,"div",1),2&n&&(e.Y8G("ngIf",a.statusObj.loading),e.R7$(),e.Y8G("ngIf",a.members.length&&!a.statusObj.loading))},dependencies:[u.Sq,u.bT,V.oV,A.p,D.R,h.WGl,j.wp],encapsulation:2}),o})(),Gt=(()=>{var t;class o extends T.H{constructor(){super(...arguments),this.nodeObjsData=[]}convertFrameDataToNode(n){return n.map(a=>({id:a.id,getQuestionKey:"",title:a.name,parentId:a.parentId,children:this.convertFrameDataToNode(a.children),position:a.position,nodeType:1,objectiveId:"objective"==a.suggestModel?a.suggestId:void 0,knowledgeId:"knowledge"==a.suggestModel?a.suggestId:void 0,questions:a.questions.map(s=>({...s,difficultyIndex:0})),totalQuestion:a.totalQuestion}))}ngOnInit(){this.nodeObjsData=this.convertFrameDataToNode(this.bankInfoObj.frames)}}return(t=o).\u0275fac=(()=>{let i;return function(a){return(i||(i=e.xGo(t)))(a||t)}})(),t.\u0275cmp=e.VBU({type:t,selectors:[["app-question-library-structure-box"]],inputs:{bankInfoObj:"bankInfoObj"},features:[e.Vt3],decls:1,vars:6,consts:[[3,"bankId","rawNodes","modeView","schoolSubjectValue","schoolLevelValue","useScrollBar"]],template:function(n,a){1&n&&e.nrm(0,"app-question-library-tree-component",0),2&n&&e.Y8G("bankId",a.bankInfoObj.id)("rawNodes",a.nodeObjsData)("modeView","structure")("schoolSubjectValue",a.bankInfoObj.subjectId)("schoolLevelValue",a.bankInfoObj.levelId)("useScrollBar",!1)},dependencies:[X],encapsulation:2}),o})();var $t=r(34143);function zt(t,o){1&t&&(e.j41(0,"div",2),e.nrm(1,"azt-loading-ui",3),e.k0s()),2&t&&(e.R7$(),e.Y8G("size",30))}function At(t,o){1&t&&(e.j41(0,"div",6),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_homework_homework_list_not_found")," "))}function Nt(t,o){if(1&t){const i=e.RV6();e.j41(0,"a",22),e.bIt("click",function(){e.eBV(i);const a=e.XpG(2).$implicit,s=e.XpG(3);return e.Njj(s.viewActivityLog(a.targetId))}),e.EFF(1),e.k0s()}if(2&t){const i=e.XpG(2).$implicit;e.R7$(),e.JRh(i.addQuestionMeta.sourceName)}}function Pt(t,o){if(1&t&&(e.j41(0,"span",23),e.EFF(1),e.k0s()),2&t){const i=e.XpG(2).$implicit;e.R7$(),e.JRh(i.addQuestionMeta.sourceName)}}function Vt(t,o){if(1&t&&(e.j41(0,"div",17),e.nrm(1,"lucide-icon",18),e.j41(2,"span",19),e.EFF(3),e.nI1(4,"mytranslate"),e.nI1(5,"mytranslate"),e.k0s(),e.DNE(6,Nt,2,1,"a",20)(7,Pt,2,1,"span",21),e.k0s()),2&t){const i=e.XpG().$implicit;e.R7$(3),e.E5c("",e.bMT(4,5,"lang_admin_guide_add_new")," ",i.addQuestionMeta.totalQuestion," ",e.bMT(5,7,"lang_core_cau_hoi_vao"),""),e.R7$(3),e.Y8G("ngIf",i.targetId),e.R7$(),e.Y8G("ngIf",!i.targetId)}}function Bt(t,o){if(1&t&&(e.j41(0,"div",17),e.nrm(1,"azt-svg-icon",24),e.j41(2,"span",19),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"span",23),e.EFF(6),e.k0s()()),2&t){const i=e.XpG().$implicit;e.R7$(),e.Y8G("type","user-cog")("size",14),e.R7$(2),e.JRh(e.bMT(4,4,"lang_core_thay_doi_quyen_cho_tai_khoan")),e.R7$(3),e.JRh(i.changeRoleMemberMeta.fullName)}}function Yt(t,o){if(1&t&&(e.j41(0,"div",17),e.nrm(1,"lucide-icon",25),e.j41(2,"span",19),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"span",23),e.EFF(6),e.k0s()()),2&t){const i=e.XpG().$implicit;e.R7$(3),e.JRh(e.bMT(4,2,"lang_core_them_moi_thanh_vien")),e.R7$(3),e.JRh(i.createMemberMeta.fullName)}}function Xt(t,o){if(1&t&&(e.j41(0,"div",17),e.nrm(1,"lucide-icon",26),e.j41(2,"span",19),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"span",23),e.EFF(6),e.k0s()()),2&t){const i=e.XpG().$implicit;e.R7$(3),e.JRh(e.bMT(4,2,"lang_core_them_moi_ngan_hang_cau_hoi")),e.R7$(3),e.JRh(i.createEbankMeta.name)}}function Ut(t,o){if(1&t&&(e.j41(0,"div",17),e.nrm(1,"lucide-icon",27),e.j41(2,"span",19),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"span",23),e.EFF(6),e.k0s()()),2&t){const i=e.XpG().$implicit;e.R7$(3),e.JRh(e.bMT(4,2,"lang_core_xoa_cau_hoi")),e.R7$(3),e.JRh(i.delQuestionMeta.questionIds.join(", "))}}function qt(t,o){if(1&t&&(e.j41(0,"div",17),e.nrm(1,"lucide-icon",28),e.j41(2,"span",19),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"span",23),e.EFF(6),e.k0s()()),2&t){const i=e.XpG().$implicit;e.R7$(3),e.JRh(e.bMT(4,2,"lang_core_xoa_thanh_vien")),e.R7$(3),e.JRh(i.delMemberMeta.fullName)}}function Kt(t,o){if(1&t&&(e.j41(0,"div",10)(1,"div",11),e.nrm(2,"azt-create-avatar",12),e.j41(3,"div",13)(4,"h3",14),e.EFF(5),e.k0s(),e.DNE(6,Vt,8,9,"div",15)(7,Bt,7,6,"div",15)(8,Yt,7,4,"div",15)(9,Xt,7,4,"div",15)(10,Ut,7,4,"div",15)(11,qt,7,4,"div",15),e.k0s()(),e.j41(12,"p",16),e.EFF(13),e.nI1(14,"relativeTime"),e.k0s()()),2&t){const i=o.$implicit;e.Y8G("ngClass",o.index>0?"mt-5":""),e.R7$(2),e.Y8G("nameCreateAvatar",null==i.creator?null:i.creator.fullName)("linkAvatar",null==i.creator?null:i.creator.avatar)("size",35),e.R7$(3),e.JRh(null==i.creator?null:i.creator.fullName),e.R7$(),e.Y8G("ngIf",i.addQuestionMeta),e.R7$(),e.Y8G("ngIf",i.changeRoleMemberMeta),e.R7$(),e.Y8G("ngIf",i.createMemberMeta),e.R7$(),e.Y8G("ngIf",i.createEbankMeta),e.R7$(),e.Y8G("ngIf",i.delQuestionMeta),e.R7$(),e.Y8G("ngIf",i.delMemberMeta),e.R7$(2),e.JRh(e.bMT(14,12,i.createdAt))}}function Jt(t,o){if(1&t&&(e.j41(0,"div")(1,"div",7),e.nrm(2,"div",8),e.k0s(),e.DNE(3,Kt,15,14,"div",9),e.k0s()),2&t){const i=e.XpG(2);e.R7$(3),e.Y8G("ngForOf",i.ebankAction.actions)}}function Wt(t,o){if(1&t&&e.DNE(0,At,3,3,"div",4)(1,Jt,4,1,"div",5),2&t){const i=e.XpG();e.Y8G("ngIf",!i.ebankAction),e.R7$(),e.Y8G("ngIf",i.ebankAction)}}let Ht=(()=>{var t;class o extends T.H{viewActivityLog(n){this.commonService.myNavigation("/admin/question-library/view-question-activity/"+n)}getData(){this.initStatusObj(),this.ebankActionService.apiEbanksActionListPost({ebankId:this.bankId,page:this.page,limit:this.limit}).subscribe(a=>{if(!a.success)return this.errorStatusObj(a.message,!0);this.ebankAction=a.data,this.stopStatusObj()})}ngOnInit(){this.getData()}constructor(n){super(),this.ebankActionService=n,this.bankId=0,this.page=1,this.limit=20}}return(t=o).\u0275fac=function(n){return new(n||t)(e.rXU($t.H))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-question-library-activity-log"]],inputs:{bankId:"bankId"},features:[e.Vt3],decls:3,vars:2,consts:[["doneLoading",""],["class","p-5 flex justify-center items-center",4,"ngIf","ngIfElse"],[1,"p-5","flex","justify-center","items-center"],[3,"size"],["class","p-5 flex justify-center items-center font-medium text-slate-500",4,"ngIf"],[4,"ngIf"],[1,"p-5","flex","justify-center","items-center","font-medium","text-slate-500"],[1,"box-vertical-line","absolute","flex","justify-center"],[1,"vertical-line"],["class","flex justify-between items-center relative",3,"ngClass",4,"ngFor","ngForOf"],[1,"flex","justify-between","items-center","relative",3,"ngClass"],[1,"flex","items-center"],[3,"nameCreateAvatar","linkAvatar","size"],[1,"ml-2"],[1,"font-medium"],["class","flex items-center text-xs font-medium",4,"ngIf"],[1,"text-xs","text-slate-500"],[1,"flex","items-center","text-xs","font-medium"],["name","file-plus","size","14",1,"text-primary"],[1,"mr-2","ml-2","text-slate-500"],["class","text-primary",3,"click",4,"ngIf"],["class","text-primary",4,"ngIf"],[1,"text-primary",3,"click"],[1,"text-primary"],[1,"text-primary",3,"type","size"],["name","user-plus","size","14",1,"text-primary"],["name","church","size","14",1,"text-primary"],["name","trash-2","size","14",1,"text-danger"],["name","user-minus","size","14",1,"text-danger"]],template:function(n,a){if(1&n&&e.DNE(0,zt,2,1,"div",1)(1,Wt,2,2,"ng-template",null,0,e.C5r),2&n){const s=e.sdS(2);e.Y8G("ngIf",a.statusObj.loading)("ngIfElse",s)}},dependencies:[u.YU,u.Sq,u.bT,A.p,D.R,G.m,h.WGl,j.wp,j.NA],styles:[".vertical-line[_ngcontent-%COMP%]{border-left:2px solid lightgray}.box-vertical-line[_ngcontent-%COMP%]{width:35px;height:calc(100% - 2.5rem);padding-top:35px;padding-bottom:35px}"]}),o})();var Zt=r(27208);const en=()=>({}),tn=(t,o)=>({expandInfo:t,id:0,name:"",countQuestion:0,showFrontend:0,allowStudentView:!1,editable:!1,permissionObj:o});function nn(t,o){1&t&&(e.j41(0,"h2",9),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t&&(e.R7$(),e.JRh(e.bMT(2,1,"lang_remove_question_from_library")))}function an(t,o){if(1&t){const i=e.RV6();e.j41(0,"button",10),e.bIt("click",function(){e.eBV(i);const a=e.XpG();return e.Njj(a.cancelRemoveQuestion())}),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()}if(2&t){const i=e.XpG();e.Y8G("disabled",i.statusObj.loading),e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_cms_common_close_btn")," ")}}function on(t,o){if(1&t){const i=e.RV6();e.j41(0,"button",11),e.bIt("click",function(){e.eBV(i);const a=e.XpG();return e.Njj(a.editQuestion())}),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()}2&t&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_core_sua_cau_hoi")," "))}let sn=(()=>{var t;class o extends Z._{removeQuestion(){this.isConfirm?(this.initStatusObj(),this.waitDestroy(this.eBanksQuestionService.apiEbanksQuestionsDeletePost({questionIds:[this.questionObj.id],ebankId:this.bankId}).subscribe(n=>{1==n.success?(this.successStatusObj("lang_cms_delete_success",!0),this.dialogRef.close(!0)):this.errorStatusObj(n.message??"",!0)}))):this.isConfirm=!0}cancelRemoveQuestion(){this.isConfirm=!1}editQuestion(){let n=`/admin/question-library/view-question-library/${this.bankId}/${this.data.tab}`;window.location.href=this.commonService.getLocalRouter("/admin/testbank/azota-editor/0")+"/"+this.questionObj.id+"?backto="+encodeURIComponent(n)+"&r="+(this.questionObj.rawIndex??0)}ngOnInit(){}constructor(n,a,s){super(a,n),this.dialogRef=n,this.data=a,this.eBanksQuestionService=s,this.followerRenderQuest=new H.e,this.isConfirm=!1,this.bankId=0,this.questionObj=a.questionObj,this.bankId=a.bankId,this.questionObj.groupInfo.isFirstInGroup=!1,this.followerRenderQuest.setNumQuest(0)}}return(t=o).\u0275fac=function(n){return new(n||t)(e.rXU(l.CP,8),e.rXU(l.Vh,8),e.rXU(O.N8))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-question-dialog"]],features:[e.Vt3],decls:12,vars:18,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400","p-3"],["class","text-md mr-auto font-bold mb-2",4,"ngIf"],[1,"box-service","box","border","border-slate-400","dark:border-darkmode-400","px-3","py-2","relative","mb-2"],[3,"examObj","questionObj","modeView","follower","hideQuestionLabel"],[1,"p-3","flex","justify-end"],["class","btn btn-secondary mr-3",3,"disabled","click",4,"ngIf"],[1,"btn","btn-danger",3,"click","disabled"],["class","btn btn-primary ml-3",3,"click",4,"ngIf"],[1,"text-md","mr-auto","font-bold","mb-2"],[1,"btn","btn-secondary","mr-3",3,"click","disabled"],[1,"btn","btn-primary","ml-3",3,"click"]],template:function(n,a){1&n&&(e.j41(0,"div",0)(1,"div",1),e.DNE(2,nn,3,3,"h2",2),e.j41(3,"div",3),e.nrm(4,"azt-question-standalone-for-analyze-knowledge",4),e.nI1(5,"mytranslate"),e.k0s()(),e.j41(6,"div",5),e.DNE(7,an,3,4,"button",6),e.j41(8,"button",7),e.bIt("click",function(){return a.removeQuestion()}),e.EFF(9),e.nI1(10,"mytranslate"),e.k0s(),e.DNE(11,on,3,3,"button",8),e.k0s()()),2&n&&(e.R7$(2),e.Y8G("ngIf",a.isConfirm),e.R7$(2),e.Y8G("examObj",e.l_i(15,tn,e.bMT(5,10,"lang_powerpoint_frontend_chart_question"),e.lJ4(14,en)))("questionObj",a.questionObj)("modeView","question_lib")("follower",a.followerRenderQuest)("hideQuestionLabel",!0),e.R7$(3),e.Y8G("ngIf",a.isConfirm),e.R7$(),e.Y8G("disabled",a.statusObj.loading),e.R7$(),e.SpI(" ",e.bMT(10,12,a.isConfirm?"lang_common_delete":"lang_core_xoa_cau_hoi")," "),e.R7$(2),e.Y8G("ngIf",!a.isConfirm))},dependencies:[u.bT,ne.Q,j.wp],encapsulation:2}),o})();var rn=r(32099);let ln=(()=>{var t;class o extends T.H{onSearchBox(n){if(this.searchContentObj=n,""==this.searchContentObj.searchContent)return;let a=Number(this.searchContentObj.searchContent);if(!a)return this.showErrorSnack("lang_core_ma_cau_hoi_khong_hop_le");this.searchQuestion(a)}searchQuestion(n){this.initStatusObj(),this.ebankQuestionService.apiEbanksQuestionsListPost({ebankId:this.bankId,questionIds:[n],page:1,size:1}).subscribe(s=>{if(!s.success)return this.errorStatusObj(s.message,!0);s.data?.total||this.errorStatusObj("lang_core_ma_cau_hoi_khong_ton_tai",!0);let c=this.commonService.castJsonToClassObjs(W.I,JSON.stringify(s.data?.list));const d=this.changeAnswerResultStatus(c??[]);d.map(N=>N.answerResult??[]);let E=d[0];E&&(this.showQuestion(E),this.successStatusObj())})}changeAnswerResultStatus(n){var a=[];return n.forEach((s,c)=>{s.index=c,s.isRoleTeacher=!0,s.answers&&s.answerResult?(s.answers.forEach(d=>{d.questionId=s.id,d.checked=!1,d.isTrue=this.checkAnswerResult(d.key??"",s.answerResult)}),a.push(s)):a.push(s)}),a}checkAnswerResult(n,a){return null!=a.find(s=>s==n)}showQuestion(n){this.sAztDialogService.open(sn,{data:{questionObj:n,bankId:this.bankId,tab:this.tab},autoFocus:!1,restoreFocus:!1}).afterClosed().subscribe(s=>{s&&(this.searchContentObj.resetSearchContentEvent("NOT_EMIT_EVENT"),this.reloadData.emit(!0))})}constructor(n,a){super(),this.ebankQuestionService=n,this.sAztDialogService=a,this.reloadData=new e.bkB,this.searchContentObj=new Zt.Z}}return(t=o).\u0275fac=function(n){return new(n||t)(e.rXU(O.N8),e.rXU(z.i))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-question-library-search-question-box"]],inputs:{bankId:"bankId",tab:"tab"},outputs:{reloadData:"reloadData"},features:[e.Vt3],decls:2,vars:5,consts:[[3,"onSearch","isServerSearch","isManualSearch","placeholder"]],template:function(n,a){1&n&&(e.j41(0,"azt-search-box",0),e.nI1(1,"mytranslate"),e.bIt("onSearch",function(c){return a.onSearchBox(c.searchObj)}),e.k0s()),2&n&&e.Y8G("isServerSearch",!0)("isManualSearch",!0)("placeholder",e.bMT(1,3,"lang_core_nhap_ma_cau_hoi"))},dependencies:[rn.W,j.wp],encapsulation:2}),o})();function cn(t,o){if(1&t&&e.nrm(0,"azt-loading-effect",3),2&t){const i=e.XpG();e.Y8G("currentStatusObj",i.statusObj)}}function dn(t,o){if(1&t&&(e.j41(0,"span",26),e.EFF(1),e.k0s()),2&t){const i=e.XpG(3);e.R7$(),e.JRh(i.bankInfoObj.actionWaitingRead)}}function un(t,o){if(1&t){const i=e.RV6();e.j41(0,"div",5)(1,"div",6)(2,"p")(3,"span",7),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s(),e.j41(6,"span",8),e.EFF(7),e.nI1(8,"mytranslate"),e.k0s()(),e.j41(9,"app-question-library-search-question-box",9),e.bIt("reloadData",function(){e.eBV(i);const a=e.XpG(2);return e.Njj(a.getDataBank())}),e.k0s()(),e.j41(10,"div",10)(11,"div",11)(12,"div",12),e.bIt("click",function(){e.eBV(i);const a=e.XpG(2);return e.Njj(a.selectTab(0))}),e.nrm(13,"lucide-icon",13),e.EFF(14),e.nI1(15,"mytranslate"),e.k0s(),e.j41(16,"div",14),e.bIt("click",function(){e.eBV(i);const a=e.XpG(2);return e.Njj(a.selectTab(1))}),e.nrm(17,"lucide-icon",15),e.EFF(18),e.nI1(19,"mytranslate"),e.DNE(20,dn,2,1,"span",16),e.k0s(),e.j41(21,"div",14),e.bIt("click",function(){e.eBV(i);const a=e.XpG(2);return e.Njj(a.selectTab(2))}),e.nrm(22,"azt-svg-icon",17),e.EFF(23),e.nI1(24,"mytranslate"),e.k0s(),e.j41(25,"div",18),e.bIt("click",function(){e.eBV(i);const a=e.XpG(2);return e.Njj(a.selectTab(3))}),e.nrm(26,"lucide-icon",19),e.EFF(27),e.nI1(28,"mytranslate"),e.k0s()(),e.j41(29,"div",20)(30,"button",21),e.EFF(31),e.nI1(32,"mytranslate"),e.k0s(),e.j41(33,"button",22),e.bIt("click",function(){e.eBV(i);const a=e.XpG(2);return e.Njj(a.importQuestion())}),e.EFF(34),e.nI1(35,"mytranslate"),e.k0s()()(),e.j41(36,"div",23),e.nrm(37,"app-question-library-structure-box",24)(38,"app-question-library-activity-log",25)(39,"app-question-library-analytics-box",25)(40,"coazt-question-library-permission-management",25),e.k0s()()}if(2&t){const i=e.XpG(2);e.R7$(4),e.JRh(e.bMT(5,29,i.bankInfoObj.name)),e.R7$(3),e.SpI("(",i.bankInfoObj.totalQuestion+" "+e.bMT(8,31,"lang_auto_cau_hoi"),")"),e.R7$(2),e.Y8G("bankId",i.bankId)("tab",i.tab),e.R7$(3),e.HbH(0==i.tab?"btn-tab-select":"text-slate-500"),e.R7$(2),e.SpI(" ",e.bMT(15,33,"lang_core_cau_truc")," "),e.R7$(2),e.HbH(1==i.tab?"btn-tab-select":"text-slate-500"),e.R7$(2),e.SpI(" ",e.bMT(19,35,"lang_core_cac_hoat_dong")," "),e.R7$(2),e.Y8G("ngIf",null==i.bankInfoObj?null:i.bankInfoObj.actionWaitingRead),e.R7$(),e.HbH(2==i.tab?"btn-tab-select":"text-slate-500"),e.R7$(),e.Y8G("type","chart-pie")("size",16),e.R7$(),e.SpI(" ",e.bMT(24,37,"lang_core_phan_tich")," "),e.R7$(2),e.HbH(3==i.tab?"btn-tab-select":"text-slate-500"),e.R7$(2),e.SpI(" ",e.bMT(28,39,"lang_auto_phan_quyen")," "),e.R7$(4),e.JRh(e.bMT(32,41,"lang_core_tao_ma_tran_de_thi")),e.R7$(3),e.SpI("+ ",e.bMT(35,43,"lang_cms_enter_question_description"),""),e.R7$(3),e.Y8G("hidden",0!=i.tab)("bankInfoObj",i.bankInfoObj),e.R7$(),e.Y8G("hidden",1!=i.tab)("bankId",i.bankId),e.R7$(),e.Y8G("hidden",2!=i.tab)("bankId",i.bankId),e.R7$(),e.Y8G("hidden",3!=i.tab)("bankId",i.bankId)}}function mn(t,o){if(1&t&&e.DNE(0,un,41,45,"div",4),2&t){const i=e.XpG();e.Y8G("ngIf",i.bankInfoObj)}}const pn=[{path:"",component:S.z,canActivate:[C.t],children:[{path:"dashboard",component:K},{path:"question-dashboard",component:K},{path:"import-question/:bankId",component:Pe},{path:"view-question-library/:bankId/:tab",component:(()=>{var t;class o extends T.H{selectTab(n){this.tab=n,this.commonService.myNavigation("/admin/question-library/view-question-library/"+this.bankId+"/"+this.tab)}importQuestion(){this.commonService.myNavigation(`/admin/question-library/import-question/${this.bankId}`)}getDataBank(){this.initStatusObj(),this.eBanksService.apiEbanksIdGet(this.bankId,1).subscribe(n=>{if(!n.success)return this.errorStatusObj(n.message,!0);this.bankInfoObj=n.data,this.stopStatusObj()})}ngOnInit(){this.bankId=Number(this.commonService.getMyParam(this.activeRoute,"bankId")),this.backLink=this.commonService.getMyQueryParam("backto")??"/admin/question-library/dashboard",this.getDataBank(),this.waitDestroy((0,J.z)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.tab=Number(this.commonService.getMyParam(this.activeRoute,"tab")),this.tab>3&&this.selectTab(0)}))}constructor(n,a){super(),this.activeRoute=n,this.eBanksService=a,this.backLink="",this.tab=0,this.bankId=0}}return(t=o).\u0275fac=function(n){return new(n||t)(e.rXU(y.nX),e.rXU(O.nd))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-view-bank"]],features:[e.Vt3],decls:4,vars:3,consts:[["doneLoading",""],[3,"headerBackToLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],["class","p-3",4,"ngIf"],[1,"p-3"],[1,"flex","justify-between","items-center"],[1,"font-medium"],[1,"ml-2","text-slate-500","text-xs"],[3,"reloadData","bankId","tab"],[1,"flex","justify-between","mt-5"],[1,"flex","font-medium"],[1,"btn-tab","clickable",3,"click"],["name","list","size","16",1,"mr-2"],[1,"btn-tab","clickable","ml-2",3,"click"],["name","users","size","16",1,"mr-2"],["class","text-xs number-red",4,"ngIf"],[1,"mr-2",3,"type","size"],[1,"btn-tab","clickable","nl-2",3,"click"],["name","settings","size","16",1,"mr-2"],[1,"flex","items-start","mb-2"],[1,"btn","btn-primary"],[1,"btn","btn-primary","ml-3",3,"click"],[1,"box","p-5",2,"border-radius","0rem 0.375rem 0.375rem 0.375rem"],[3,"hidden","bankInfoObj"],[3,"hidden","bankId"],[1,"text-xs","number-red"]],template:function(n,a){if(1&n&&(e.j41(0,"teacher-layout",1),e.DNE(1,cn,1,1,"azt-loading-effect",2)(2,mn,1,1,"ng-template",null,0,e.C5r),e.k0s()),2&n){const s=e.sdS(3);e.Y8G("headerBackToLink",a.backLink),e.R7$(),e.Y8G("ngIf",a.statusObj.loading)("ngIfElse",s)}},dependencies:[u.bT,M.K,G.m,Q.Q,h.WGl,Rt,Mt,Gt,Ht,ln,j.wp],styles:[".btn-tab[_ngcontent-%COMP%]{padding:10px 15px 18px;display:flex;justify-content:center;align-items:center}.btn-tab-select[_ngcontent-%COMP%]{background:#fff;border-top-left-radius:8px;border-top-right-radius:8px}.number-red[_ngcontent-%COMP%]{background:red;border-radius:50%;width:17px;height:17px;color:#fff;font-weight:900;display:flex;justify-content:center;align-items:center;margin:auto auto auto 5px}"]}),o})()},{path:"add-new-question-library",component:Qe},{path:"view-question-list-node/:bankId/:frameId",component:ft}]}];let bn=(()=>{var t;class o{}return(t=o).\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[y.iI.forChild(pn),y.iI,w.XE]}),o})(),gn=(()=>{var t;class o{}return(t=o).\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[y.iI,u.MD,_.s,g.Id,f.YN,f.X1,l.hM,x.L,v.Lk,g.Id,p.xv,k.Q,m.b,h.flO.pick(h.Ptg),I.An,bn,b.Fr]}),o})()},60531:(F,R,r)=>{"use strict";r.d(R,{O:()=>y});var u=r(48891),f=r(50589),l=r(62095);let y=(()=>{var b;class h{setMode(p){this.browserStorageService.saveSimpleStorage("__editor:mode_open",p)}getMode(){var p=this.browserStorageService.getSimpleStorage("__editor:mode_open")||"editor";return this.browserStorageService.removeSimpleStorage("__editor:mode_open"),p}setFileProcess(p){this.file=p}getFirstFile(){let p=this.file;return this.file=void 0,p}setOutputData(p){this.data=p}getOutputData(){return this.data}redirectToConfig(p){this.data.homework&&p.showHomework(),(this.data.exam||this.data.examOffline)&&p.showExam()}setMatrixData(p,I){I?this.matrix=p:this.browserStorageService.saveSimpleStorage("__editor:matrix-data",JSON.stringify(p))}getMatrixData(){var p=this.browserStorageService.getSimpleStorage("__editor:matrix-data");return this.browserStorageService.removeSimpleStorage("__editor:matrix-data"),p?this.commonService.castJsonToObj(p):this.matrix}constructor(p,I){this.browserStorageService=p,this.commonService=I,this.data={}}}return(b=h).\u0275fac=function(p){return new(p||b)(u.KVO(f.z),u.KVO(l.R))},b.\u0275prov=u.jDH({token:b,factory:b.\u0275fac,providedIn:"root"}),h})()},10296:(F,R,r)=>{"use strict";r.d(R,{R:()=>v});var u=r(43277),l=r(18148),y=r(48891),b=r(52509),h=r(62095);let v=(()=>{var p;class I{constructor(_,x){this.mobileWebviewService=_,this.commonService=x}shareFileWithBlob(_,x){if(this.commonService.isMobileWebview(void 0)){l.L.openLoadingEffect(this.commonService.myTranslateInstant("lang_auto_dang_lay_du_lieu_tu_he_thong")??"");let m=new FileReader;m.readAsDataURL(_),m.onloadend=()=>{let k=m.result;"string"==typeof k&&(this.mobileWebviewService.sendShareFileBase64(x,String(k)),l.L.closeLoadingEffect(100))}}else u.saveAs(_,x)}shareFileWithBase64(_,x){this.commonService.isMobileWebview(void 0)?this.mobileWebviewService.sendShareFileBase64(x,_):u.saveAs(_,x)}}return(p=I).\u0275fac=function(_){return new(_||p)(y.KVO(b.f),y.KVO(h.R))},p.\u0275prov=y.jDH({token:p,factory:p.\u0275fac,providedIn:"root"}),I})()},18148:(F,R,r)=>{"use strict";r.d(R,{L:()=>u});let u=(()=>{var f;class l{static openLoadingEffect(b){l.getDomElement().style.display="flex",setTimeout(()=>{l.changeMsgLoadingEffect(b)},50)}static closeLoadingEffect(b){return new Promise(h=>{setTimeout(()=>{const v=l.getDomElement();v&&(v.style.display="none"),h(!0)},b)})}static changeMsgLoadingEffect(b){l.getDomContent().innerText=b}static getDomContent(){return document.getElementById(l.idStatusContent)??document.createElement("span")}static getDomElement(){return document.getElementById(l.idComponent)??this.createDomElement()}static createDomElement(){const b=document.createElement("div");return b.id=l.idComponent,b.setAttribute("style","position: fixed;display: flex;width: 100vw;height: 100%;background: #000000c7;color: #ffffff;font-size: 20px;font-weight: lighter;justify-content: center;align-items: center;cursor: progress;z-index: 9999;top: 0;left: 0;"),b.style.display="none",b.innerHTML=`\n        <div class="text-center" style="height: 85%; overflow-x: auto;">\n            <div class="flex justify-center mt-5">\n                <svg width="20" viewBox="0 0 58 58" xmlns="http://www.w3.org/2000/svg">\n                    <g fill="none" fill-rule="evenodd">\n                        <g transform="translate(2 1)" stroke="currentColor" stroke-width="1.5">\n                            <circle cx="42.601" cy="11.462" r="5" fill-opacity="1" fill="currentColor">\n                                <animate attributeName="fill-opacity" begin="0s" dur="1.3s" values="1;0;0;0;0;0;0;0" calcMode="linear" repeatCount="indefinite"></animate>\n                            </circle>\n                            <circle cx="49.063" cy="27.063" r="5" fill-opacity="0" fill="currentColor">\n                                <animate attributeName="fill-opacity" begin="0s" dur="1.3s" values="0;1;0;0;0;0;0;0" calcMode="linear" repeatCount="indefinite"></animate>\n                            </circle>\n                            <circle cx="42.601" cy="42.663" r="5" fill-opacity="0" fill="currentColor">\n                                <animate attributeName="fill-opacity" begin="0s" dur="1.3s" values="0;0;1;0;0;0;0;0" calcMode="linear" repeatCount="indefinite"></animate>\n                            </circle>\n                            <circle cx="27" cy="49.125" r="5" fill-opacity="0" fill="currentColor">\n                                <animate attributeName="fill-opacity" begin="0s" dur="1.3s" values="0;0;0;1;0;0;0;0" calcMode="linear" repeatCount="indefinite"></animate>\n                            </circle>\n                            <circle cx="11.399" cy="42.663" r="5" fill-opacity="0" fill="currentColor">\n                                <animate attributeName="fill-opacity" begin="0s" dur="1.3s" values="0;0;0;0;1;0;0;0" calcMode="linear" repeatCount="indefinite"></animate>\n                            </circle>\n                            <circle cx="4.938" cy="27.063" r="5" fill-opacity="0" fill="currentColor">\n                                <animate attributeName="fill-opacity" begin="0s" dur="1.3s" values="0;0;0;0;0;1;0;0" calcMode="linear" repeatCount="indefinite"></animate>\n                            </circle>\n                            <circle cx="11.399" cy="11.462" r="5" fill-opacity="0" fill="currentColor">\n                                <animate attributeName="fill-opacity" begin="0s" dur="1.3s" values="0;0;0;0;0;0;1;0" calcMode="linear" repeatCount="indefinite"></animate>\n                            </circle>\n                            <circle cx="27" cy="5" r="5" fill-opacity="0" fill="currentColor">\n                                <animate attributeName="fill-opacity" begin="0s" dur="1.3s" values="0;0;0;0;0;0;0;1" calcMode="linear" repeatCount="indefinite"></animate>\n                            </circle>\n                        </g>\n                    </g>\n                </svg>\n            </div>\n            <div style="margin-top: 10px;position: relative;">\n                <span id="${l.idStatusContent}"></span>\n            </div>\n        </div>`,document.body.appendChild(b),b}}return(f=l).idComponent="azt-status-loading-effect",f.idStatusContent="azt-status-loading-effect-content",l})()},74175:(F,R,r)=>{"use strict";r.d(R,{W:()=>x});var u=r(47947),f=r(59640),l=r(48891),y=r(10296),b=r(62095),h=r(27691),v=r(54460),p=r(76975);const I=["*","*"];function g(m,k){if(1&m){const w=l.RV6();l.qex(0),l.j41(1,"a",2),l.bIt("click",function(){l.eBV(w);const S=l.XpG();return l.Njj(S.shareFileToFlutter())}),l.j41(2,"span"),l.EFF(3),l.nI1(4,"mytranslate"),l.k0s(),l.SdG(5),l.k0s(),l.bVm()}if(2&m){const w=l.XpG();l.R7$(),l.Aen(w.style),l.HbH(w.classStyle),l.FS9("target",w.target),l.R7$(2),l.JRh(l.bMT(4,7,w.fileDescription))}}function _(m,k){if(1&m&&(l.j41(0,"a",3)(1,"span"),l.EFF(2),l.nI1(3,"mytranslate"),l.k0s(),l.SdG(4,1),l.k0s()),2&m){const w=l.XpG();l.Aen(w.style),l.HbH(w.classStyle),l.FS9("href",w.dataUrl,l.B4B),l.FS9("target",w.target),l.FS9("download",w.fileName),l.R7$(2),l.JRh(l.bMT(3,9,w.fileDescription))}}let x=(()=>{var m;class k extends f.H{downloadFile(){return this.http.get(this.dataUrl,{responseType:"blob"}).pipe((0,u.T)(C=>C))}shareFileToFlutter(){this.downloadFile().subscribe(C=>{this.shareFileFlutterService.shareFileWithBlob(C,this.fileName)})}ngOnInit(){super.ngOnInit()}constructor(C,S,T){super(),this.shareFileFlutterService=C,this.commonService=S,this.http=T,this.dataUrl="",this.target="",this.fileName="",this.fileDescription="",this.classStyle="",this.style=""}}return(m=k).\u0275fac=function(C){return new(C||m)(l.rXU(y.R),l.rXU(b.R),l.rXU(h.Qq))},m.\u0275cmp=l.VBU({type:m,selectors:[["azt-download-link-item"]],inputs:{dataUrl:"dataUrl",target:"target",fileName:"fileName",fileDescription:"fileDescription",classStyle:"classStyle",style:"style"},features:[l.Vt3],ngContentSelectors:I,decls:3,vars:2,consts:[["NormalWeb",""],[4,"ngIf","ngIfElse"],[3,"click","target"],[3,"href","target","download"]],template:function(C,S){if(1&C&&(l.NAR(I),l.DNE(0,g,6,9,"ng-container",1)(1,_,5,11,"ng-template",null,0,l.C5r)),2&C){const T=l.sdS(2);l.Y8G("ngIf",S.isMobileWebView)("ngIfElse",T)}},dependencies:[v.bT,p.wp],encapsulation:2}),k})()},89121:(F,R,r)=>{"use strict";r.d(R,{z:()=>y});var u=r(59640),f=r(48891),l=r(65162);let y=(()=>{var b;class h extends u.H{constructor(){super(...arguments),this.id="default-id"}}return(b=h).\u0275fac=(()=>{let v;return function(I){return(v||(v=f.xGo(b)))(I||b)}})(),b.\u0275cmp=f.VBU({type:b,selectors:[["app-common-master-page"]],inputs:{id:"id"},features:[f.Vt3],decls:2,vars:1,consts:[[3,"id"]],template:function(p,I){1&p&&(f.j41(0,"div",0),f.nrm(1,"router-outlet"),f.k0s()),2&p&&f.FS9("id",I.id)},dependencies:[l.n3],encapsulation:2}),h})()},43277:function(F,R){var r,f;void 0!==(f="function"==typeof(r=function(){"use strict";function y(g,_,x){var m=new XMLHttpRequest;m.open("GET",g),m.responseType="blob",m.onload=function(){I(m.response,_,x)},m.onerror=function(){console.error("could not download file")},m.send()}function b(g){var _=new XMLHttpRequest;_.open("HEAD",g,!1);try{_.send()}catch{}return 200<=_.status&&299>=_.status}function h(g){try{g.dispatchEvent(new MouseEvent("click"))}catch{var _=document.createEvent("MouseEvents");_.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),g.dispatchEvent(_)}}var v="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,p=v.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),I=v.saveAs||("object"!=typeof window||window!==v?function(){}:"download"in HTMLAnchorElement.prototype&&!p?function(g,_,x){var m=v.URL||v.webkitURL,k=document.createElement("a");k.download=_=_||g.name||"download",k.rel="noopener","string"==typeof g?(k.href=g,k.origin===location.origin?h(k):b(k.href)?y(g,_,x):h(k,k.target="_blank")):(k.href=m.createObjectURL(g),setTimeout(function(){m.revokeObjectURL(k.href)},4e4),setTimeout(function(){h(k)},0))}:"msSaveOrOpenBlob"in navigator?function(g,_,x){if(_=_||g.name||"download","string"!=typeof g)navigator.msSaveOrOpenBlob(function l(g,_){return typeof _>"u"?_={autoBom:!1}:"object"!=typeof _&&(console.warn("Deprecated: Expected third argument to be a object"),_={autoBom:!_}),_.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(g.type)?new Blob(["\ufeff",g],{type:g.type}):g}(g,x),_);else if(b(g))y(g,_,x);else{var m=document.createElement("a");m.href=g,m.target="_blank",setTimeout(function(){h(m)})}}:function(g,_,x,m){if((m=m||open("","_blank"))&&(m.document.title=m.document.body.innerText="downloading..."),"string"==typeof g)return y(g,_,x);var k="application/octet-stream"===g.type,w=/constructor/i.test(v.HTMLElement)||v.safari,C=/CriOS\/[\d]+/.test(navigator.userAgent);if((C||k&&w||p)&&typeof FileReader<"u"){var S=new FileReader;S.onloadend=function(){var O=S.result;O=C?O:O.replace(/^data:[^;]*;/,"data:attachment/file;"),m?m.location.href=O:location=O,m=null},S.readAsDataURL(g)}else{var T=v.URL||v.webkitURL,e=T.createObjectURL(g);m?m.location=e:location.href=e,m=null,setTimeout(function(){T.revokeObjectURL(e)},4e4)}});v.saveAs=I.saveAs=I,F.exports=I})?r.apply(R,[]):r)&&(F.exports=f)}}]);