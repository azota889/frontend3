(self.webpackChunkBalacoClient=self.webpackChunkBalacoClient||[]).push([[9819],{72626:(E,k,r)=>{"use strict";r.r(k),r.d(k,{QuestionLibraryModule:()=>zo});var m=r(54460),u=r(10936),d=r(89163),g=r(65162),p=r(23047),v=r(15343),y=r(13763),c=r(25571),h=r(44233),_=r(5502),b=r(21656),C=r(70050),f=r(7050),I=r(91100),O=r(1133),T=r(50866),R=r(89121),w=r(59640),e=r(48891),F=r(57686),ve=r(17776),K=r(52909),Q=r(52811),ye=r(51614),G=r(96451),xe=r(50334),A=r(47712),j=r(76975);const J=t=>({"box p-2 mt-2":t}),W=t=>({nodeObjs:t}),Ie=t=>({"padding-left":t}),Ce=()=>({"mr-2":!0});function ke(t,a){1&t&&e.eu8(0)}function je(t,a){if(1&t&&(e.j41(0,"div",7)(1,"ng-scrollbar",8,2),e.DNE(3,ke,1,0,"ng-container",9),e.k0s()()),2&t){const n=e.XpG(),o=e.sdS(3);e.Y8G("ngClass",e.eq3(3,J,"create"==n.modeView)),e.R7$(),e.Y8G("visibility","hover"),e.R7$(2),e.Y8G("ngTemplateOutlet",o)}}function Oe(t,a){1&t&&e.eu8(0)}function we(t,a){if(1&t&&(e.j41(0,"div",10),e.DNE(1,Oe,1,0,"ng-container",9),e.k0s()),2&t){const n=e.XpG(),o=e.sdS(3);e.Y8G("ngClass",e.eq3(2,J,"create"==n.modeView)),e.R7$(),e.Y8G("ngTemplateOutlet",o)}}function Te(t,a){1&t&&(e.j41(0,"div",13)(1,"h3",14),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()),2&t&&(e.R7$(2),e.JRh(e.bMT(3,1,"lang_create_tree_category_select_level_subject_require")))}function Ee(t,a){1&t&&(e.j41(0,"div",13)(1,"h3",14),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()),2&t&&(e.R7$(2),e.JRh(e.bMT(3,1,"lang_create_tree_category_select_level_subject_no_data")))}function Se(t,a){1&t&&(e.j41(0,"div",13),e.nrm(1,"azt-loading-ui",15),e.j41(2,"h3",14),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()()),2&t&&(e.R7$(3),e.JRh(e.bMT(4,1,"lang_cms_common_loading")))}function Re(t,a){if(1&t&&(e.qex(0),e.DNE(1,Te,4,3,"div",12)(2,Ee,4,3,"div",12)(3,Se,5,3,"div",12),e.bVm()),2&t){const n=e.XpG(2);e.R7$(),e.Y8G("ngIf",!("structure"==n.modeView||n.loadingKnowledge||n.schoolLevelValue&&n.schoolSubjectValue||n.noDataKnowledge)),e.R7$(),e.Y8G("ngIf",n.noDataKnowledge&&n.schoolLevelValue&&n.schoolSubjectValue&&!n.loadingKnowledge),e.R7$(),e.Y8G("ngIf",!n.nodeObjs.length&&n.loadingKnowledge)}}function Fe(t,a){1&t&&e.eu8(0)}function Me(t,a){if(1&t&&(e.j41(0,"div",16),e.DNE(1,Fe,1,0,"ng-container",17),e.k0s()),2&t){const n=e.XpG(2),o=e.sdS(5);e.R7$(),e.Y8G("ngTemplateOutlet",o)("ngTemplateOutletContext",e.eq3(2,W,n.nodeObjs))}}function Qe(t,a){if(1&t&&e.DNE(0,Re,4,3,"ng-container",11)(1,Me,2,4,"ng-template",null,3,e.C5r),2&t){const n=e.sdS(2),o=e.XpG();e.Y8G("ngIf",!o.nodeObjs.length||!o.schoolLevelValue||!o.schoolSubjectValue||o.noDataKnowledge||o.loadingKnowledge)("ngIfElse",n)}}function Le(t,a){1&t&&e.nrm(0,"lucide-icon",30)}function De(t,a){1&t&&e.nrm(0,"lucide-icon",31)}function Ge(t,a){if(1&t){const n=e.RV6();e.j41(0,"i",27),e.bIt("click",function(){e.eBV(n);const i=e.XpG().$implicit,s=e.XpG(3);return e.Njj(s.clickToNode(i))}),e.DNE(1,Le,1,0,"lucide-icon",28)(2,De,1,0,"lucide-icon",29),e.k0s()}if(2&t){const n=e.XpG().$implicit;e.R7$(),e.Y8G("ngIf",!n.isExpand),e.R7$(),e.Y8G("ngIf",n.isExpand)}}function ze(t,a){1&t&&e.nrm(0,"lucide-icon",32),2&t&&e.Y8G("ngClass",e.lJ4(1,Ce))}function Ae(t,a){if(1&t){const n=e.RV6();e.qex(0),e.j41(1,"a",33),e.bIt("click",function(i){e.eBV(n);const s=e.XpG(2).$implicit;return e.XpG(3).goToFrameQuestionList(s),e.Njj(i.stopPropagation())}),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.bVm()}if(2&t){const n=e.XpG(2).$implicit;e.R7$(2),e.SpI("(",n.totalQuestion+" "+e.bMT(3,1,"lang_auto_cau_hoi"),")")}}function $e(t,a){if(1&t&&(e.j41(0,"span",34),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t){const n=e.XpG(2).$implicit;e.R7$(),e.SpI("(",n.totalQuestion+" "+e.bMT(2,1,"lang_auto_cau_hoi"),")")}}function Pe(t,a){if(1&t&&(e.qex(0),e.DNE(1,Ae,4,3,"ng-container",11)(2,$e,3,3,"ng-template",null,4,e.C5r),e.bVm()),2&t){const n=e.sdS(3),o=e.XpG().$implicit;e.R7$(),e.Y8G("ngIf",o.totalQuestion>0)("ngIfElse",n)}}function Ne(t,a){if(1&t){const n=e.RV6();e.j41(0,"a",35),e.nI1(1,"mytranslate"),e.bIt("click",function(){e.eBV(n);const i=e.XpG().$implicit,s=e.XpG(3);return e.Njj(s.removeKnowledgeForm(i))}),e.j41(2,"span",36),e.nrm(3,"lucide-icon",37),e.k0s()()}2&t&&e.Y8G("matTooltip",e.bMT(1,1,"lang_auto_xoa"))}function Ye(t,a){1&t&&e.eu8(0)}function Ve(t,a){if(1&t&&(e.qex(0),e.j41(1,"div",38),e.DNE(2,Ye,1,0,"ng-container",17),e.k0s(),e.bVm()),2&t){const n=e.XpG().$implicit;e.XpG(3);const o=e.sdS(5);e.R7$(2),e.Y8G("ngTemplateOutlet",o)("ngTemplateOutletContext",e.eq3(2,W,n.children))}}function qe(t,a){if(1&t){const n=e.RV6();e.qex(0),e.j41(1,"div",20)(2,"div",21),e.DNE(3,Ge,3,2,"i",22),e.j41(4,"label",23),e.bIt("click",function(){const i=e.eBV(n).$implicit,s=e.XpG(3);return e.Njj(s.clickToNode(i))}),e.DNE(5,ze,1,2,"lucide-icon",24),e.nrm(6,"span",25),e.nI1(7,"mathJaxContent"),e.nI1(8,"async"),e.nI1(9,"safeContentQuestion"),e.DNE(10,Pe,4,2,"ng-container",18),e.k0s(),e.DNE(11,Ne,4,3,"a",26),e.k0s(),e.DNE(12,Ve,3,4,"ng-container",18),e.k0s(),e.bVm()}if(2&t){const n=a.$implicit,o=e.XpG(3);e.R7$(),e.Y8G("hidden",!n.isShow),e.R7$(),e.yjJ("id","node-",n.randomHashId,"-",n.level,"-",n.nodeIndex,""),e.Y8G("ngStyle",e.eq3(18,Ie,12*n.level+"px")),e.R7$(),e.Y8G("ngIf",n.children.length),e.R7$(2),e.Y8G("ngIf",n.data.id&&("knowledge"==n.typeNode||"objective"==n.typeNode&&!n.children.length)),e.R7$(),e.Y8G("innerHTML",e.bMT(9,16,e.bMT(8,14,e.bMT(7,12,n.text))),e.npT),e.R7$(4),e.Y8G("ngIf","structure"==o.modeView),e.R7$(),e.Y8G("ngIf","create"==o.modeView),e.R7$(),e.Y8G("ngIf",n.isExpand)}}function Be(t,a){if(1&t&&(e.qex(0),e.DNE(1,qe,13,20,"ng-container",19),e.bVm()),2&t){const n=a.$implicit;e.R7$(),e.Y8G("ngForOf",n)}}function Xe(t,a){if(1&t&&e.DNE(0,Be,2,1,"ng-container",18),2&t){const n=a.nodeObjs,o=e.XpG();e.Y8G("ngIf",o.asTemplateDataObj(n))}}let H=(()=>{var t;class a extends xe.C{constructor(){super(...arguments),this.bankId=0,this.noDataKnowledge=!1,this.nodeEmitData=new e.bkB,this.loadingKnowledge=!1,this.nodeObjs=[],this.uuidService=(0,e.WQX)(K.D)}clickToNode(o){o.children.length&&(o.isExpand?this.collapse(o):this.expand(o))}goToFrameQuestionList(o){if("structure"==this.modeView){let i=this.commonService.getCurrentUrlWithoutLocale();this.commonService.myNavigationWithQueryString("/admin/question-library/view-question-list-node/"+this.bankId+"/"+o.data.id,"?backto="+encodeURIComponent(i))}}removeKnowledgeForm(o){this.nodeObjs=this.removeOneNodeById(this.nodeObjs,o),this.nodeEmitData.emit(this.nodeObjs)}asTemplateDataObj(o){return o}standardTreeNodes(o,i){let s=[];return o.forEach((l,x)=>{let M={level:i,typeNode:l.objectiveId?"objective":l.knowledgeId?"knowledge":"",isExpand:0===i,isShow:!0,nodeIndex:x,selected:!1,randomHashId:this.uuidService.getUuid(),text:l.title,data:{...l,children:[]},children:[],totalQuestion:l.totalQuestion??0};M.children=this.standardTreeNodes(l.children,i+1),s.push(M)}),s}removeOneNodeById(o,i){return(o=o.filter(s=>s.randomHashId!=i.randomHashId)).forEach(s=>s.children=this.removeOneNodeById(s.children,i)),o}ngOnInit(){this.loadingKnowledge=!0,this.nodeObjs=this.standardTreeNodes(this.rawNodes,0),this.loadingKnowledge=!1}ngOnChanges(o){o.rawNodes&&(this.loadingKnowledge=!0,this.nodeObjs=this.standardTreeNodes(this.rawNodes,0),this.loadingKnowledge=!1,this.nodeEmitData.emit(this.nodeObjs))}}return(t=a).\u0275fac=(()=>{let n;return function(i){return(n||(n=e.xGo(t)))(i||t)}})(),t.\u0275cmp=e.VBU({type:t,selectors:[["app-question-library-tree-component"]],inputs:{rawNodes:"rawNodes",modeView:"modeView",schoolSubjectValue:"schoolSubjectValue",schoolLevelValue:"schoolLevelValue",useScrollBar:"useScrollBar",bankId:"bankId",noDataKnowledge:"noDataKnowledge"},outputs:{nodeEmitData:"nodeEmitData"},features:[e.Vt3,e.OA$],decls:6,vars:2,consts:[["mainContent",""],["recursiveListTmpl",""],["perfectScroll",""],["showKnowledge",""],["notHaveQuestion",""],["class","relative","style","height: calc(100vh - 250px); overflow-y: auto",3,"ngClass",4,"ngIf"],["class","relative",3,"ngClass",4,"ngIf"],[1,"relative",2,"height","calc(100vh - 250px)","overflow-y","auto",3,"ngClass"],["track","vertical","pointerEventsMethod","scrollbar",3,"visibility"],[4,"ngTemplateOutlet"],[1,"relative",3,"ngClass"],[4,"ngIf","ngIfElse"],["class","mx-auto my-auto text-center midle-box",4,"ngIf"],[1,"mx-auto","my-auto","text-center","midle-box"],[1,"text-slate-500","text-md",2,"font-weight","420"],[1,"mr-2"],["id","list-category-arr",1,"grid","grid-cols-12","gap-1"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"col-span-12",3,"hidden"],[1,"flex","items-center","mt-1","w-full","hover:bg-slate-100","dark:hover:bg-darkmode-400","rounded",3,"id","ngStyle"],["class","mr-2","aria-hidden","true",3,"click",4,"ngIf"],[2,"line-height","1.6",3,"click"],["name","dot","size","14",3,"ngClass",4,"ngIf"],[3,"innerHTML"],["class","ml-auto btn btn-transparent btn-outline-danger btn-sm text-slate-700 font-medium",3,"matTooltip","click",4,"ngIf"],["aria-hidden","true",1,"mr-2",3,"click"],["name","chevron-right","size","14",4,"ngIf"],["name","chevron-down","size","14",4,"ngIf"],["name","chevron-right","size","14"],["name","chevron-down","size","14"],["name","dot","size","14",3,"ngClass"],[1,"link__color","ml-2",3,"click"],[1,"ml-2",2,"opacity","0.5"],[1,"ml-auto","btn","btn-transparent","btn-outline-danger","btn-sm","text-slate-700","font-medium",3,"click","matTooltip"],[1,"w-4","h-4","flex-none"],["name","x","size","18"],[1,"grid","grid-cols-12","gap-1","w-full","children-tmp"]],template:function(o,i){1&o&&e.DNE(0,je,4,5,"div",5)(1,we,2,4,"div",6)(2,Qe,3,2,"ng-template",null,0,e.C5r)(4,Xe,1,1,"ng-template",null,1,e.C5r),2&o&&(e.Y8G("ngIf",i.useScrollBar),e.R7$(),e.Y8G("ngIf",!i.useScrollBar))},dependencies:[m.YU,m.Sq,m.bT,m.T3,m.B3,A.oV,_.Yh,Q.R,v.WGl,m.Jj,j.wp,j.km,j.ep],encapsulation:2}),a})();function Ue(t,a){1&t&&(e.j41(0,"div",10)(1,"div",11),e.nrm(2,"azt-loading-ui",12),e.j41(3,"h3",13),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()()()),2&t&&(e.R7$(4),e.JRh(e.bMT(5,1,"lang_cms_common_loading")))}function Ke(t,a){if(1&t){const n=e.RV6();e.j41(0,"app-question-library-tree-component",14),e.bIt("nodeEmitData",function(i){e.eBV(n);const s=e.XpG();return e.Njj(s.nodeDataEmitted=i)}),e.k0s()}if(2&t){const n=e.XpG();e.Y8G("rawNodes",n.nodeObjsData)("modeView","create")("noDataKnowledge",n.noDataKnowledge)("schoolSubjectValue",n.form.controls.schoolSubject.value)("schoolLevelValue",n.form.controls.schoolLevel.value)("useScrollBar",!0)}}function Je(t,a){1&t&&e.nrm(0,"azt-loading-ui",15)}let We=(()=>{var t;class a extends w.H{getKnowledgeData(o){let i=this.form.controls.schoolLevel?.value??0,s=this.form.controls.schoolSubject?.value??0,l=this.form.controls.bookIdFormControl?.value??0;this.bookName=o?.bookName??"",s&&i&&(this.loadingData=!0,this.waitDestroy(this.aiElearningService.aiApiV1ElearningGetKnowledgeTreeGet(i,s,void 0,l>0?l:void 0).subscribe({next:x=>{this.loadingData=!1,this.noDataKnowledge=!x.nodes.length,this.nodeObjsData=x.nodes},error:x=>{this.noDataKnowledge=!0,this.loadingData=!1}})))}saveQuestionLibrary(){this.initStatusObj();let l={levelId:this.form.controls.schoolLevel?.value??0,subjectId:this.form.controls.schoolSubject?.value??0,bookId:this.form.controls.bookIdFormControl?.value??0,bookName:this.bookName,nodes:this.getNodeSaveApi()};this.waitDestroy(this.eBanksService.apiEbanksPost(l).subscribe(x=>{if(!x.success)return this.errorStatusObj(x.message,!0);this.successStatusObj("lang_testbank_test_list_create_new_tree_document_success",!0),this.commonService.myNavigation("/admin/question-library/view-question-library/"+x.data?.id+"/0")}))}getNodeSaveApi(){return this.nodeDataEmitted.map(o=>({name:o.text,suggestModel:o.typeNode,suggestId:o.data.objectiveId??o.data.knowledgeId,children:this.getChildNode(o.children)}))}getChildNode(o){return o.map(i=>({name:i.text,suggestModel:i.data.objectiveId?"objective":i.data.knowledgeId?"knowledge":"",suggestId:i.data.objectiveId??i.data.knowledgeId,children:this.getChildNode(i.children)}))}ngOnInit(){this.backToLink=this.commonService.getMyQueryParam("backto")??"/admin/question-library/dashboard"}constructor(o,i,s){super(),this.eBanksService=o,this.aiElearningService=i,this.uuidService=s,this.backToLink="",this.nodeObjsData=[],this.nodeDataEmitted=[],this.bookName="",this.noDataKnowledge=!1,this.loadingData=!0,this.form=new u.gE({schoolLevel:new u.MJ(0,{nonNullable:!0}),schoolSubject:new u.MJ(0,{nonNullable:!0}),bookIdFormControl:new u.MJ(0,{nonNullable:!0})})}}return(t=a).\u0275fac=function(o){return new(o||t)(e.rXU(F.nd),e.rXU(ve.T5),e.rXU(K.D))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-add-new-question-library"]],features:[e.Vt3],decls:15,vars:16,consts:[["doneLoading",""],[3,"headerBackToLink"],[1,"container-fluid","overflow-hidden"],[1,"text-md","font-bold","mt-3"],[1,"mt-3","box","p-2"],[3,"changeDataEvent","form","removeLevelSubjectWithOtherName","showBookData","layout","useExamSchoolLogData"],["class","box mt-2","style","height: calc(100vh - 250px); overflow-y: auto",4,"ngIf","ngIfElse"],[1,"mt-2","float-right"],["type","button",1,"btn","btn-primary",3,"click","disabled"],["class","mr-1",4,"ngIf"],[1,"box","mt-2",2,"height","calc(100vh - 250px)","overflow-y","auto"],[1,"mx-auto","my-auto","text-center","midle-box"],[1,"mr-2"],[1,"text-slate-500","text-md",2,"font-weight","420"],[3,"nodeEmitData","rawNodes","modeView","noDataKnowledge","schoolSubjectValue","schoolLevelValue","useScrollBar"],[1,"mr-1"]],template:function(o,i){if(1&o){const s=e.RV6();e.j41(0,"teacher-layout",1)(1,"div",2)(2,"h3",3),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"div",4)(6,"config-level-subject-book",5),e.bIt("changeDataEvent",function(x){return e.eBV(s),e.Njj(i.getKnowledgeData(x))}),e.k0s()(),e.DNE(7,Ue,6,3,"div",6)(8,Ke,1,6,"ng-template",null,0,e.C5r),e.j41(10,"div",7)(11,"button",8),e.bIt("click",function(){return e.eBV(s),e.Njj(i.saveQuestionLibrary())}),e.DNE(12,Je,1,0,"azt-loading-ui",9),e.EFF(13),e.nI1(14,"mytranslate"),e.k0s()()()()}if(2&o){const s=e.sdS(9);e.Y8G("headerBackToLink",i.backToLink),e.R7$(3),e.JRh(e.bMT(4,12,"lang_create_tree_question_library")),e.R7$(3),e.Y8G("form",i.form)("removeLevelSubjectWithOtherName",!0)("showBookData",!0)("layout","label_in_one_line")("useExamSchoolLogData",!0),e.R7$(),e.Y8G("ngIf",i.loadingData)("ngIfElse",s),e.R7$(4),e.Y8G("disabled",i.statusObj.loading||!i.nodeDataEmitted.length),e.R7$(),e.Y8G("ngIf",i.statusObj.loading),e.R7$(),e.SpI(" ",e.bMT(14,14,"lang_create_tree_category_btn")," ")}},dependencies:[m.bT,Q.R,ye.X,G.Q,H,j.wp],encapsulation:2}),a})();var He=r(39712),Y=r(33887),$=r(51221),S=r(86925),Z=r(37497),Ze=r(30977),et=r(52240),ee=r(24506),te=r(51698),tt=r(62095),V=r(9280);let nt=(()=>{var t;class a{constructor(o,i,s){this.commonService=o,this.examService=i,this.documentService=s,this.currentCountProcess=0,this.totalCountProcess=0,this.currentFolderCount=0,this.totalFolderCount=0,this.listExamObjsSelected=[],this.listQuestionIds=[]}processSelectedObjs(o){return new te.c(i=>{this.totalCountProcess=o.length,this.totalFolderCount=o.filter(s=>s.type==S.Y.EXAM_CATEGORY).length,this.listExamObjsSelected=o.filter(s=>s.type==S.Y.EXAM),this.getAllDataFromCates(o.filter(s=>s.type==S.Y.EXAM_CATEGORY),s=>{this.listExamObjsSelected=this.listExamObjsSelected.concat(...s),this.currentFolderCount==this.totalFolderCount&&this.startGetQuestionOfExam().subscribe(l=>{l&&(i.next(this.listQuestionIds),i.complete())})})})}startGetQuestionOfExam(){return new te.c(o=>{this.listExamObjsSelected.forEach(i=>{i.type==S.Y.EXAM&&this.examService.apiExamGetQuestionsIdGet(i.id??0).subscribe(s=>{s.data&&(this.listQuestionIds=this.listQuestionIds.concat(...s.data?.questionObjs.map(l=>l.id))),this.currentCountProcess++,this.currentCountProcess==this.totalCountProcess&&(o.next(!0),o.complete())})})})}getAllDataFromCates(o,i){if(!o.length)return i([]);o.forEach(s=>{let l={categoryId:s.id,documentType:void 0,shareType:void 0,fileType:void 0,classroomId:void 0,name:void 0,suggestExamPurpose:void 0,lite:1,getGlobal:0,page:1,itemPerPage:-1};this.documentService.apiDocumentsGet(l.categoryId,l.documentType,l.shareType,l.fileType,l.classroomId,l.name,l.suggestExamPurpose,l.lite,l.getGlobal,l.page,l.itemPerPage).subscribe(x=>{let M=[],z=[],Ao=this.commonService.replaceForFolderName(x.data?.currentCategory?.name?x.data?.currentCategory?.name+"_"+x.data?.currentCategory?.id:""),fe=this.commonService.createFolderNameExportFiles([Ao??"IdCate-"+s.id]);x&&1==x.success&&(x.data?.categoryObjs.forEach(D=>{M.push({id:D.id,name:D.name,parentCateName:fe,parentId:s.id,type:S.Y.EXAM_CATEGORY,childs:[]}),this.totalCountProcess++,this.totalFolderCount++}),x.data?.documentObjs.forEach(D=>{D.exam&&(z.push({id:D.exam.id,name:D.exam.name,parentCateName:fe,parentId:s.id,type:S.Y.EXAM,childs:[]}),this.totalCountProcess++)})),this.currentFolderCount++,this.currentCountProcess++,i(z),M.length&&setTimeout(()=>{this.getAllDataFromCates(M,i)},400)})})}}return(t=a).\u0275fac=function(o){return new(o||t)(e.KVO(tt.R),e.KVO(ee.R),e.KVO(V.DK))},t.\u0275prov=e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"}),a})();var ne=r(22613),ot=r(81587),it=r(69135),P=r(94743);const at=t=>({"midle-box":t}),st=t=>({active:t}),rt=t=>({clickable:t}),lt=t=>({"truncate-bread":t}),ct=(t,a)=>({"w-60":t,"w-52":a}),oe=t=>[t],ie=()=>({"text-pending":!0});function dt(t,a){if(1&t&&(e.j41(0,"span",13),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t){const n=e.XpG();e.R7$(),e.SpI("(",e.bMT(2,1,"lang_auto_da_chon")+" "+n.clipboardSelected,")")}}function ut(t,a){1&t&&(e.qex(0),e.nrm(1,"azt-loading-ui",17),e.j41(2,"h3",18),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.bVm()),2&t&&(e.R7$(3),e.JRh(e.bMT(4,1,"lang_cms_common_loading")))}function mt(t,a){if(1&t&&(e.qex(0),e.j41(1,"h3",19),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.j41(4,"h3",20),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s(),e.nrm(7,"azt-loading-ui",21),e.bVm()),2&t){const n=e.XpG(2);e.R7$(2),e.JRh(e.bMT(3,5,"lang_exam_import_processing")),e.R7$(3),e.JRh(e.bMT(6,7,"lang_exam_import_processing_message")),e.R7$(2),e.Y8G("type","progress-circle")("valueProcessing",n.sAztImportMultipleExamFolderService.currentCountProcess)("totalProcessing",n.sAztImportMultipleExamFolderService.totalCountProcess)}}function _t(t,a){if(1&t&&(e.j41(0,"div",14)(1,"div",15),e.DNE(2,ut,5,3,"ng-container",16)(3,mt,8,9,"ng-container",16),e.k0s()()),2&t){const n=e.XpG();e.R7$(),e.Y8G("ngClass",e.eq3(3,at,n.loadingCategory)),e.R7$(),e.Y8G("ngIf",n.loadingCategory),e.R7$(),e.Y8G("ngIf",n.onImport)}}function pt(t,a){if(1&t){const n=e.RV6();e.j41(0,"li",37)(1,"a",38),e.bIt("click",function(){const i=e.eBV(n).$implicit,s=e.XpG(2);return e.Njj(s.gotoFolder(i))}),e.j41(2,"span",39,1),e.nI1(4,"mytranslate"),e.j41(5,"span"),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()()()()}if(2&t){const n=a.$implicit,o=e.sdS(3),i=e.XpG(2);e.Y8G("ngClass",e.eq3(11,st,n.id==i.currentCategoryId)),e.R7$(),e.Y8G("ngClass",e.eq3(13,rt,n.id!=i.currentCategoryId)),e.R7$(),e.FS9("matTooltip",e.bMT(4,7,n.name)),e.Y8G("ngClass",e.eq3(15,lt,n.id!=i.currentCategoryId))("isDisabledTooltip",!1)("matTooltipDisabled",o.isDisabled),e.R7$(4),e.JRh(e.bMT(7,9,n.name))}}function gt(t,a){if(1&t){const n=e.RV6();e.j41(0,"span",28)(1,"input",50),e.bIt("change",function(){e.eBV(n);const i=e.XpG(5);return e.Njj(i.actionValueOfFormInClipboard())}),e.k0s()()}if(2&t){const n=e.XpG().$implicit;e.Y8G("formGroup",n)}}function bt(t,a){if(1&t&&(e.qex(0),e.DNE(1,gt,2,1,"span",49),e.bVm()),2&t){const n=a.$implicit;e.R7$(),e.Y8G("ngIf",n)}}function ht(t,a){if(1&t&&(e.j41(0,"span",48),e.DNE(1,bt,2,1,"ng-container",30),e.k0s()),2&t){const n=e.XpG().$implicit,o=e.XpG(2);e.R7$(),e.Y8G("ngForOf",e.eq3(1,oe,o.getClipboardFormGroupByExamCategory(n)))}}function ft(t,a){1&t&&e.nrm(0,"input",51),2&t&&e.Y8G("disabled",!0)}function vt(t,a){1&t&&(e.j41(0,"span"),e.nrm(1,"azt-svg-icon",52),e.nI1(2,"mytranslate"),e.k0s()),2&t&&(e.R7$(),e.FS9("matTooltip",e.bMT(2,2,"lang_auto_da_chia_se")),e.Y8G("size",24))}function yt(t,a){1&t&&e.nrm(0,"azt-svg-icon",53),2&t&&e.Y8G("size",24)}function xt(t,a){1&t&&(e.j41(0,"span",54),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t&&(e.R7$(),e.JRh(e.bMT(2,1,"lang_auto_chia_se")))}function It(t,a){if(1&t){const n=e.RV6();e.qex(0),e.j41(1,"div",40),e.DNE(2,ht,2,3,"span",41)(3,ft,1,1,"ng-template",null,2,e.C5r),e.k0s(),e.j41(5,"div",42)(6,"div",43),e.bIt("click",function(){const i=e.eBV(n).$implicit,s=e.XpG(2);return e.Njj(s.gotoFolder(i))}),e.j41(7,"div",44),e.DNE(8,vt,3,4,"span",45)(9,yt,1,1,"ng-template",null,3,e.C5r),e.k0s(),e.j41(11,"div",46,1),e.nI1(13,"mytranslate"),e.j41(14,"span"),e.EFF(15),e.nI1(16,"mytranslate"),e.k0s()(),e.DNE(17,xt,3,3,"span",47),e.k0s()(),e.bVm()}if(2&t){const n=a.$implicit,o=e.sdS(4),i=e.sdS(10),s=e.sdS(12),l=e.XpG(2);e.R7$(2),e.Y8G("ngIf",-1!=n.id)("ngIfElse",o),e.R7$(4),e.Y8G("ngClass",e.l_i(17,ct,-1==n.id,-1!=n.id)),e.R7$(2),e.Y8G("ngIf",n.shared)("ngIfElse",i),e.R7$(3),e.FS9("matTooltip",e.bMT(13,13,n.name)),e.Y8G("isDisabledTooltip",!1)("matTooltipDisabled",s.isDisabled),e.R7$(3),e.HbH(l.isMobileWebView&&-1!=n.id?"azt-wv-item-name":""),e.R7$(),e.JRh(e.bMT(16,15,n.name)),e.R7$(2),e.Y8G("ngIf",-1==n.id)}}function Ct(t,a){if(1&t){const n=e.RV6();e.qex(0,28),e.j41(1,"input",50),e.bIt("change",function(){e.eBV(n);const i=e.XpG(4);return e.Njj(i.actionValueOfFormInClipboard())}),e.k0s(),e.bVm()}if(2&t){const n=e.XpG().$implicit;e.Y8G("formGroup",n)}}function kt(t,a){if(1&t&&(e.qex(0),e.DNE(1,Ct,2,1,"ng-container",49),e.bVm()),2&t){const n=a.$implicit;e.R7$(),e.Y8G("ngIf",n)}}function jt(t,a){1&t&&(e.nrm(0,"lucide-icon",60),e.nI1(1,"mytranslate")),2&t&&(e.FS9("matTooltip",e.bMT(1,2,"lang_testbank_folder_and_file_published")),e.Y8G("ngClass",e.lJ4(4,ie)))}function Ot(t,a){1&t&&(e.nrm(0,"lucide-icon",61),e.nI1(1,"mytranslate")),2&t&&(e.FS9("matTooltip",e.bMT(1,2,"lang_testbank_folder_and_file_Unpublished")),e.Y8G("ngClass",e.lJ4(4,ie)))}function wt(t,a){if(1&t&&(e.j41(0,"span",62),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(),e.Lme("",e.bMT(2,2,"lang_testbank_folder_and_file_number_attended"),": ",null==n.exam?null:n.exam.attended,"")}}function Tt(t,a){1&t&&(e.j41(0,"div",63),e.nrm(1,"azt-svg-icon",64),e.nI1(2,"mytranslate"),e.k0s()),2&t&&(e.R7$(),e.FS9("matTooltip",e.bMT(2,2,"lang_auto_da_chia_se")),e.Y8G("size",16))}function Et(t,a){if(1&t&&(e.qex(0),e.j41(1,"div",40)(2,"span",48),e.DNE(3,kt,2,1,"ng-container",30),e.k0s()(),e.j41(4,"div",42)(5,"div",55)(6,"div",44),e.DNE(7,jt,2,5,"lucide-icon",56)(8,Ot,2,5,"lucide-icon",57),e.k0s(),e.j41(9,"div",46,1)(11,"span"),e.EFF(12),e.k0s(),e.DNE(13,wt,3,4,"span",58),e.k0s(),e.DNE(14,Tt,3,4,"div",59),e.k0s()(),e.bVm()),2&t){const n=a.$implicit,o=e.sdS(10),i=e.XpG(2);e.R7$(3),e.Y8G("ngForOf",e.eq3(13,oe,i.getClipboardFormGroupByExam(n.exam))),e.R7$(4),e.Y8G("ngIf",1==(null==n.exam?null:n.exam.isPublished)),e.R7$(),e.Y8G("ngIf",1!=(null==n.exam?null:n.exam.isPublished)),e.R7$(),e.Mz_("matTooltip"," ",i.isMobileWebView?"":null==n.exam?null:n.exam.name,""),e.Y8G("isDisabledTooltip",!1)("matTooltipDisabled",o.isDisabled),e.R7$(2),e.ZvI("mb-0 d-block ",i.isMobileWebView?"azt-wv-item-name":"",""),e.R7$(),e.JRh(null==n.exam?null:n.exam.name),e.R7$(),e.Y8G("ngIf",i.isMobileWebView),e.R7$(),e.Y8G("ngIf",n.shared)}}function St(t,a){if(1&t){const n=e.RV6();e.j41(0,"div",22)(1,"ol",23)(2,"li",24)(3,"a",25),e.bIt("click",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.goBackToAllCategoryPageEvent())}),e.j41(4,"h2",26),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s()()(),e.DNE(7,pt,8,17,"li",27),e.k0s()(),e.j41(8,"div",14)(9,"form",28)(10,"div",29),e.DNE(11,It,18,20,"ng-container",30)(12,Et,15,15,"ng-container",30),e.k0s()()(),e.j41(13,"div",31)(14,"div",32)(15,"azt-paging",33),e.bIt("goToPaginationPage",function(i){e.eBV(n);const s=e.XpG();return e.Njj(s.goToPage(i))}),e.k0s()(),e.j41(16,"div",34)(17,"p",35),e.EFF(18),e.nI1(19,"number"),e.nI1(20,"mytranslate"),e.k0s()(),e.j41(21,"div",36)(22,"p",35),e.EFF(23),e.nI1(24,"number"),e.nI1(25,"mytranslate"),e.k0s()()()}if(2&t){const n=e.XpG();e.R7$(5),e.SpI(" ",e.bMT(6,8,"lang_auto_tat_ca")," "),e.R7$(2),e.Y8G("ngForOf",n.listBreadcrumb),e.R7$(2),e.Y8G("formGroup",n.form),e.R7$(2),e.Y8G("ngForOf",n.categoryObjs),e.R7$(),e.Y8G("ngForOf",n.documentObjs),e.R7$(3),e.Y8G("pageObj",n.pageObj),e.R7$(3),e.JRh(e.bMT(19,10,n.totalExam)+" "+e.bMT(20,12,"lang_testbank_test_list_document")),e.R7$(5),e.JRh(e.bMT(24,14,n.totalExam)+" "+e.bMT(25,16,"lang_testbank_test_list_document"))}}function Rt(t,a){1&t&&(e.j41(0,"span",65),e.nrm(1,"azt-loading-ui"),e.k0s())}let Ft=(()=>{var t;class a extends Y._{confirmImport(){this.onImport=!0,this.dialogRef.disableClose=!0;let o=this.clipboardService.getCurrentClipBoard().filter(s=>s.action==$.$.SELECTED),i=[];this.getFormValue().clipboardObjs.filter(s=>s.checked).forEach(s=>{i.push({id:s.id,name:s.name,parentId:this.currentCategoryId,parentCateName:"",type:s.type,childs:[]})}),o.length&&this.sAztImportMultipleExamFolderService.processSelectedObjs(i).subscribe(s=>{this.dialogRef.disableClose=!1,this.showSuccessSnack("lang_exam_import_finished"),this.dialogRef.close(s)})}btnCloseDialog(){this.dialogRef.close([])}gotoFolder(o){o.id!=this.currentCategoryId&&(this.pageObj.setPageNumber(1),this.currentCategoryId=o.id,this.shareType=o.shareType??"",this.getCategoryObjs())}getClipboardSelectedNotice(){let o=this.form.getRawValue().clipboardObjs.filter(i=>i.checked).length;this.clipboardSelected=o}goToPage(o){this.pageObj.setPageNumber(o),this.getCategoryObjs()}goBackToAllCategoryPageEvent(){this.pageObj.setPageNumber(1),this.currentCategoryId=0,this.shareType="",this.getCategoryObjs()}getCategoryObjs(){this.loadingCategory=!0;let o={categoryId:0!=this.currentCategoryId?this.currentCategoryId:0,documentType:void 0,shareType:this.shareType??"",fileType:"exam",classroomId:void 0,name:"",suggestExamPurpose:void 0,lite:void 0,getGlobal:0,page:this.pageObj.page,itemPerPage:void 0};this.waitDestroy(this.documentService.apiDocumentsGet(o.categoryId,o.documentType,o.shareType,o.fileType,o.classroomId,o.name,o.suggestExamPurpose,o.lite,o.getGlobal,o.page,o.itemPerPage).subscribe(i=>{if(!i.success)return this.showErrorSnack(i.message??""),void(this.loadingCategory=!1);var s=this.commonService.castObj(i.data?.documentObjs)??[],l=this.convertExamObj(s);this.documentObjs=l,this.categoryObjs=i.data?.categoryObjs??[],this.totalExam=i.data?.total??0,this.pageObj.setTotalPages(this.totalExam),this.initFormData(),this.getListParentCategoryObjs()}))}getListParentCategoryObjs(){this.waitDestroy(this.examCategoryService.apiExamCategoryGetBreadcrumbsGet(this.currentCategoryId,this.shareType??"","new").subscribe(o=>{if(!o.success)return this.showErrorSnack(o.message);this.listBreadcrumb=(o.data?.objs??[]).map(i=>({...i,shared:!1,sharedGroups:[],sharedTeachers:[],paths:[]}))}))}convertExamObj(o){var i=[];return o.forEach(s=>{s.exam&&i.push({name:s.exam.name,updatedAt:s.exam.updatedAt,createdAt:s.exam.createdAt,attended:s.exam.attended,isPublished:s.exam.isPublished,exam:s.exam,shared:s.shared,type:"exam",paths:s.paths,isGlobalAzota:0})}),i}getFormValue(){return this.form.getRawValue()}initFormData(){this.categoryObjs&&this.categoryObjs.length>0&&this.categoryObjs.forEach(o=>{if(!o.id)return;let i=this.clipboardService.hasInClipboard(o.id,S.Y.EXAM_CATEGORY),s=new u.gE({id:new u.MJ(o.id,{nonNullable:!0}),name:new u.MJ(o.name??"",{nonNullable:!0}),type:new u.MJ(S.Y.EXAM_CATEGORY,{nonNullable:!0}),action:new u.MJ($.$.SELECTED,{nonNullable:!0}),checked:new u.MJ(i,{nonNullable:!0})});this.form.controls.clipboardObjs.push(s)}),this.documentObjs&&this.documentObjs.length>0&&this.documentObjs.forEach(o=>{if(!o.exam||"exam"!=o.type)return;let i=this.clipboardService.hasInClipboard(o.exam?.id??0,S.Y.EXAM),s=new u.gE({id:new u.MJ(o.exam.id??0,{nonNullable:!0}),name:new u.MJ(o.exam.name??"",{nonNullable:!0}),type:new u.MJ(S.Y.EXAM,{nonNullable:!0}),action:new u.MJ($.$.SELECTED,{nonNullable:!0}),checked:new u.MJ(i,{nonNullable:!0})});this.form.controls.clipboardObjs.push(s)})}getClipboardFormGroupByExamCategory(o){return this.form.controls.clipboardObjs.controls.find(i=>i.controls.id.value==o.id&&i.controls.type.value==S.Y.EXAM_CATEGORY)}getClipboardFormGroupByExam(o){return this.form.controls.clipboardObjs.controls.find(i=>i.controls.id.value==o?.id&&i.controls.type.value==S.Y.EXAM)}actionValueOfFormInClipboard(){this.getFormValue().clipboardObjs.forEach(o=>{if(!o.checked)return this.clipboardService.removeDocumentInClipboard(o.id,o.type);this.clipboardService.setActionToClipboard(o.id,o.type,$.$.SELECTED,o.name)})}ngOnInit(){super.ngOnInit(),this.clipboardService.resetClipBoardAfterPasteOrCancelAllActions(),this.getCategoryObjs(),this.form.valueChanges.subscribe(o=>this.getClipboardSelectedNotice())}constructor(o,i,s,l,x,M,z){super(z,M),this.clipboardService=o,this.documentService=i,this.examService=s,this.sAztImportMultipleExamFolderService=l,this.examCategoryService=x,this.dialogRef=M,this.data=z,this.onImport=!1,this.loadingCategory=!1,this.currentCategoryId=0,this.pageObj=new Z.d(24),this.shareType="",this.totalExam=0,this.documentObjs=[],this.categoryObjs=[],this.clipboardSelected=0,this.listBreadcrumb=[],this.loadingDataTrans=this.commonService.myTranslateInstant("lang_auto_dang_tai_du_lieu")??"\u0110ang t\u1ea3i d\u1eef li\u1ec7u",this.processingDataTrans=this.commonService.myTranslateInstant("lang_auto_dang_xu_ly_du_lieu")??"\u0110ang x\u1eed l\xfd d\u1eef li\u1ec7u ",this.folderTitleTrans=this.commonService.myTranslateInstant("lang_auto_thu_muc")??"Th\u01b0 m\u1ee5c",this.examTitleTrans=this.commonService.myTranslateInstant("lang_auto_de_thi")??"\u0110\u1ec1 thi",this.form=new u.gE({clipboardObjs:new u.Yp([]),isSelectAll:new u.MJ(!1,{nonNullable:!0})})}}return(t=a).\u0275fac=function(o){return new(o||t)(e.rXU(Ze.g),e.rXU(et.D),e.rXU(ee.R),e.rXU(nt),e.rXU(V.Ns),e.rXU(d.CP,8),e.rXU(d.Vh,8))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-import-question-folder-dialog"]],features:[e.Vt3],decls:18,vars:15,consts:[["shownCateObjs",""],["c","isDisabled"],["shareCate",""],["noShare",""],[1,"box"],[1,"p-3","border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"text-md","mr-auto","font-bold"],["class","link__color ml-2 font-normal text-sm",4,"ngIf"],["class","overflow-auto py-2","style","height: 400px",4,"ngIf","ngIfElse"],[1,"p-3","flex","justify-end"],[1,"btn","w-24","btn-secondary","mr-3",3,"click","disabled"],[1,"btn","btn-primary","mw-24",3,"click","disabled"],["class","w-3 mr-2",4,"ngIf"],[1,"link__color","ml-2","font-normal","text-sm"],[1,"overflow-auto","py-2",2,"height","400px"],[1,"mx-auto","my-auto","text-center",3,"ngClass"],[4,"ngIf"],[1,"mr-2"],[1,"text-slate-500","text-md",2,"font-weight","420"],[1,"text-slate-500","text-md","block","mt-1",2,"font-weight","420"],[1,"text-slate-700","text-xs","block","mt-2",2,"font-weight","420"],[1,"mt-2",3,"type","valueProcessing","totalProcessing"],[1,"mr-auto"],[1,"breadcrumb"],[1,"breadcrumb-item","font-medium"],[3,"click"],[1,"text-sm"],["class","breadcrumb-item active",3,"ngClass",4,"ngFor","ngForOf"],[3,"formGroup"],[1,"grid","grid-cols-12","gap-2"],[4,"ngFor","ngForOf"],[1,"azt-document-footer","flex","items-center","flex-col-reverse","sm:flex-row","mt-1"],[1,"mr-0","sm:mr-auto","mt-2"],[3,"goToPaginationPage","pageObj"],[1,"text-right","mt-2","azt-hidden","md:block"],[1,"text-md"],[1,"ml-auto","text-right","-mt-2","block","md:hidden"],[1,"breadcrumb-item","active",3,"ngClass"],[3,"click","ngClass"],[3,"ngClass","matTooltip","isDisabledTooltip","matTooltipDisabled"],[1,"col-span-1","items-center","text-center"],["formArrayName","clipboardObjs",4,"ngIf","ngIfElse"],[1,"col-span-11","items-center"],[1,"title-exam","flex","items-center","clickable","sm:w-full",3,"click","ngClass"],[1,"image-fit"],[4,"ngIf","ngIfElse"],[1,"truncate","ml-3",3,"matTooltip","isDisabledTooltip","matTooltipDisabled"],["class","whitespace-nowrap ml-2 py-0.5 px-2 rounded-full text-xs bg-primary text-white font-medium",4,"ngIf"],["formArrayName","clipboardObjs"],[3,"formGroup",4,"ngIf"],["type","checkbox","formControlName","checked",1,"form-check-input","flex-none",3,"change"],["type","checkbox",1,"form-check-input","flex-none",3,"disabled"],["type","folder-share",3,"size","matTooltip"],["type","folder",3,"size"],[1,"whitespace-nowrap","ml-2","py-0.5","px-2","rounded-full","text-xs","bg-primary","text-white","font-medium"],[1,"title-exam","flex","items-center","clickable","w-52","sm:w-full"],["name","file-check","size","24",3,"matTooltip","ngClass",4,"ngIf"],["name","file","size","24",3,"matTooltip","ngClass",4,"ngIf"],["class","azt-wv-sub-info mx-auto",4,"ngIf"],["class","icon-share ml-2",4,"ngIf"],["name","file-check","size","24",3,"matTooltip","ngClass"],["name","file","size","24",3,"matTooltip","ngClass"],[1,"azt-wv-sub-info","mx-auto"],[1,"icon-share","ml-2"],["type","user-share",2,"padding","3px",3,"size","matTooltip"],[1,"w-3","mr-2"]],template:function(o,i){if(1&o){const s=e.RV6();e.j41(0,"div",4)(1,"div",5)(2,"h2",6),e.EFF(3),e.nI1(4,"mytranslate"),e.DNE(5,dt,3,3,"span",7),e.k0s()(),e.j41(6,"div",5),e.DNE(7,_t,4,5,"div",8)(8,St,26,18,"ng-template",null,0,e.C5r),e.k0s(),e.j41(10,"div",9)(11,"button",10),e.bIt("click",function(){return e.eBV(s),e.Njj(i.btnCloseDialog())}),e.EFF(12),e.nI1(13,"mytranslate"),e.k0s(),e.j41(14,"button",11),e.bIt("click",function(){return e.eBV(s),e.Njj(i.confirmImport())}),e.DNE(15,Rt,2,0,"span",12),e.EFF(16),e.nI1(17,"mytranslate"),e.k0s()()()}if(2&o){const s=e.sdS(9);e.R7$(3),e.SpI(" ",e.bMT(4,9,"lang_select_folder_or_exam_to_import")," "),e.R7$(2),e.Y8G("ngIf",i.clipboardSelected),e.R7$(2),e.Y8G("ngIf",i.loadingCategory||i.onImport)("ngIfElse",s),e.R7$(4),e.Y8G("disabled",i.onImport),e.R7$(),e.SpI(" ",e.bMT(13,11,"lang_auto_huy")," "),e.R7$(2),e.Y8G("disabled",i.onImport),e.R7$(),e.Y8G("ngIf",i.onImport),e.R7$(),e.SpI(" ",e.bMT(17,13,"Import")," ")}},dependencies:[m.YU,m.Sq,m.bT,A.oV,u.qT,u.Zm,u.BC,u.cb,u.j4,u.JD,u.v8,ne.q,ot.t,it.f,Q.R,P.m,v.WGl,m.QX,j.wp],encapsulation:2}),a})();var Mt=r(60531),L=r(46899),Qt=r(74175),Lt=r(80859);const Dt=()=>({"text-pending":!0}),Gt=(t,a)=>[t,a],zt=()=>({"text-primary":!0});let At=(()=>{var t;class a extends w.H{importFolder(){this.sAztDialogService.open(Ft,{width:"950px",data:{ebankId:this.bankId??0},restoreFocus:!1,autoFocus:!1}).afterClosed().subscribe(s=>{s?.length&&console.log(s)})}beforeOpenEditor(o="editor"){this.editorOutputDataService.setMode(o),this.commonService.myNavigationWithQueryString("/admin/testbank/azota-editor/0",`?backto=${decodeURIComponent(`/admin/question-library/choose-import-question-mode/${this.bankId}`)}&importQuestionBankId=${this.bankId}`)}changeFileAction(o){this.file=o,this.startParser(this.file)}startParser(o){this.saveAndSwitch(o)}saveAndSwitch(o){this.editorOutputDataService.setFileProcess(o),this.commonService.myNavigationWithQueryString("/admin/testbank/azota-editor/0",`?backto=${decodeURIComponent(`/admin/question-library/choose-import-question-mode/${this.bankId}`)}&importQuestionBankId=${this.bankId}`)}ngOnInit(){super.ngOnInit(),this.bankId=Number(this.commonService.getMyParam(this.activeRoute,"bankId"))}constructor(o,i,s){super(),this.activeRoute=o,this.editorOutputDataService=i,this.sAztDialogService=s,this.allUploadFileTypes=He.PO,this.bankId=0}}return(t=a).\u0275fac=function(o){return new(o||t)(e.rXU(g.nX),e.rXU(Mt.O),e.rXU(L.i))},t.\u0275cmp=e.VBU({type:t,selectors:[["coazt-choose-import-question-mode"]],features:[e.Vt3],decls:48,vars:49,consts:[[3,"headerBackToLink"],[1,"mt-5"],[1,"flex","items-center","justify-center"],[1,"font-medium","text-lg"],[1,"mx-auto",2,"max-width","800px"],[1,"box","flex","items-center","px-5","py-5","justify-center","zoom-in","mb-3",3,"click"],[1,"w-8","h-8","flex-none","image-fit","overflow-hidden","mr-5"],["name","square-pen","size","32",3,"ngClass"],[1,"text-center"],[3,"emitFiles","fileType","limitSize"],["id","box-left-file-drop",1,"h-full","cursor-pointer","box","p-5"],[1,"h-full","flex","items-center",2,"min-height","20vh"],[1,"mx-auto","text-center"],[1,"w-16","h-16","flex-none","image-fit","overflow-hidden","mx-auto","upload-box"],["name","cloud-upload","size","64",3,"ngClass"],[1,"mt-3"],[1,"font-medium","text-lg","upload-box"],[1,"text-slate-500","text-xs","mt-1"],["azt-track-service","create-new-document-WauQzqbISx","href","https://docs.azota.vn/docs/huong-dan-su-dung/de-thi/chon-file-keo-tha-file-de-tao-de/","target","_blank",1,"text-primary",3,"click"],[1,"pt-2"],["azt-track-service","create-new-document-O5FkqsuTLC","id","download-link-item",3,"click","dataUrl","target","fileName","fileDescription","classStyle"],["id","download-link-item",3,"click","dataUrl","target","fileName","fileDescription","classStyle"],[1,"mt-3","text-center","font-medium"],[1,"text-center","mt-3"],[1,"btn","btn-primary","ml-3",3,"click"],["name","folder-input","size","18"],[1,"ml-2"]],template:function(o,i){1&o&&(e.j41(0,"teacher-layout",0)(1,"div",1)(2,"div",2)(3,"div",3),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()()(),e.j41(6,"div",1)(7,"div",4)(8,"div",5),e.bIt("click",function(){return i.beforeOpenEditor()}),e.j41(9,"div",6),e.nrm(10,"lucide-icon",7),e.k0s(),e.j41(11,"div",8)(12,"div",3),e.EFF(13),e.nI1(14,"mytranslate"),e.k0s()()(),e.j41(15,"azt-upload-single-document-to-editor",9),e.bIt("emitFiles",function(l){return i.changeFileAction(l)}),e.j41(16,"div",10)(17,"div",11)(18,"div",12)(19,"div",13),e.nrm(20,"lucide-icon",14),e.k0s(),e.j41(21,"div",15)(22,"div",16),e.EFF(23),e.nI1(24,"mytranslate"),e.k0s(),e.j41(25,"div",17),e.EFF(26),e.nI1(27,"mytranslate"),e.j41(28,"a",18),e.bIt("click",function(l){return l.stopPropagation()}),e.EFF(29),e.nI1(30,"mytranslate"),e.k0s(),e.j41(31,"div",19)(32,"azt-download-link-item",20),e.nI1(33,"convertRawLinkOfGitHubWithLocale"),e.nI1(34,"mytranslate"),e.bIt("click",function(l){return i.isMobileWebView?"":l.stopPropagation()}),e.k0s(),e.EFF(35," \xa0|\xa0 "),e.j41(36,"azt-download-link-item",21),e.nI1(37,"convertRawLinkOfGitHubWithLocale"),e.nI1(38,"mytranslate"),e.bIt("click",function(l){return i.isMobileWebView?"":l.stopPropagation()}),e.k0s()()()()()()()(),e.j41(39,"div",22),e.EFF(40),e.nI1(41,"mytranslate"),e.k0s(),e.j41(42,"div",23)(43,"button",24),e.bIt("click",function(){return i.importFolder()}),e.nrm(44,"lucide-icon",25),e.j41(45,"span",26),e.EFF(46),e.nI1(47,"mytranslate"),e.k0s()()()()()()),2&o&&(e.Y8G("headerBackToLink","/admin/question-library/view-question-library/"+i.bankId+"/0"),e.R7$(4),e.SpI(" ",e.bMT(5,22,"lang_azt_enter_questions_into_the_bank")," "),e.R7$(6),e.Y8G("ngClass",e.lJ4(44,Dt)),e.R7$(3),e.SpI(" ",e.bMT(14,24,"lang_question_library_import_question_by_manual_editor")," "),e.R7$(2),e.Y8G("fileType",e.l_i(45,Gt,i.allUploadFileTypes.WORD,i.allUploadFileTypes.AZT))("limitSize",200),e.R7$(5),e.Y8G("ngClass",e.lJ4(48,zt)),e.R7$(3),e.JRh(e.bMT(24,26,"lang_auto_chon_file_hoc_keo_tha_file_vao_day")),e.R7$(3),e.SpI(" ",e.bMT(27,28,"lang_auto_azota_support_file_type")," .docx. "),e.R7$(3),e.SpI(" ",e.bMT(30,30,"lang_auto_tim_hieu_them")," "),e.R7$(3),e.Y8G("dataUrl",e.bMT(33,32,"medias_[LANG]/de_mau_azota.docx?raw=true"))("target","_self")("fileName",e.bMT(34,34,"lang_testbank_create_document_azota_docx_model"))("fileDescription","lang_testbank_create_document_azota_docx_model")("classStyle","text-primary"),e.R7$(4),e.Y8G("dataUrl",e.bMT(37,36,"medias_[LANG]/mau_de_dung_sai_azota_v2.docx?raw=true"))("target","_self")("fileName",e.bMT(38,38,"lang_testbank_create_document_azota_docx_true_false_model"))("fileDescription","lang_testbank_create_document_azota_docx_true_false_model")("classStyle","text-primary"),e.R7$(4),e.SpI(" ",e.bMT(41,40,"lang_auto_hoac")," "),e.R7$(6),e.JRh(e.bMT(47,42,"lang_azt_import_from_your_exam_questions")))},dependencies:[m.YU,Qt.W,Lt.p,G.Q,v.WGl,j.wp,j.V3],encapsulation:2}),a})();var ae=r(60833),q=r(18718);const B=t=>[t],se=()=>({"mr-2":!0}),$t=()=>({backTo:"/admin/question-library/dashboard"});function Pt(t,a){if(1&t&&e.nrm(0,"azt-loading-effect",4),2&t){const n=e.XpG();e.Y8G("currentStatusObj",n.statusObj)}}function Nt(t,a){if(1&t&&(e.j41(0,"div",22)(1,"div",23),e.nI1(2,"navigationLocalize"),e.j41(3,"div",24),e.EFF(4),e.k0s(),e.j41(5,"div",25),e.EFF(6),e.nI1(7,"number"),e.nI1(8,"mytranslate"),e.k0s()()()),2&t){const n=a.$implicit;e.R7$(),e.Y8G("routerLink",e.eq3(10,B,e.bMT(2,4,"/admin/question-library/view-question-library/"+n.id+"/0")))("queryParams",e.lJ4(12,$t)),e.R7$(3),e.JRh(n.name),e.R7$(2),e.JRh(e.bMT(7,6,n.totalQuestion)+" "+e.bMT(8,8,"lang_notice_question"))}}function Yt(t,a){if(1&t){const n=e.RV6();e.qex(0),e.j41(1,"div",6)(2,"div",7)(3,"div",8)(4,"h3",9),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s()(),e.j41(7,"div",10)(8,"button",11),e.nI1(9,"navigationLocalize"),e.nrm(10,"lucide-icon",12),e.EFF(11),e.nI1(12,"mytranslate"),e.k0s()()()(),e.j41(13,"div",13),e.DNE(14,Nt,9,13,"div",14),e.k0s(),e.j41(15,"div",15)(16,"div",16)(17,"div",17)(18,"azt-paging",18),e.bIt("goToPaginationPage",function(i){e.eBV(n);const s=e.XpG(2);return e.Njj(s.goToPage(i))}),e.k0s()(),e.j41(19,"div",19)(20,"p",20),e.EFF(21),e.nI1(22,"mytranslate"),e.k0s()(),e.j41(23,"div",21)(24,"p",20),e.EFF(25),e.nI1(26,"mytranslate"),e.k0s()()()(),e.bVm()}if(2&t){const n=e.XpG(2);e.R7$(5),e.SpI(" ",e.bMT(6,8,"lang_notice_bank_question")," "),e.R7$(3),e.Y8G("routerLink",e.eq3(18,B,e.bMT(9,10,"/admin/question-library/add-new-question-library"))),e.R7$(2),e.Y8G("ngClass",e.lJ4(20,se)),e.R7$(),e.SpI(" ",e.bMT(12,12,"lang_azt_create_a_question_bank")," "),e.R7$(3),e.Y8G("ngForOf",n.ebankList),e.R7$(4),e.Y8G("pageObj",n.pageObj),e.R7$(3),e.JRh(n.totalEbank+" "+e.bMT(22,14,"lang_testbank_test_list_document")),e.R7$(4),e.JRh(n.totalEbank+" "+e.bMT(26,16,"lang_testbank_test_list_document"))}}function Vt(t,a){1&t&&(e.j41(0,"div",26)(1,"p",27),e.nrm(2,"azt-svg-icon",28),e.k0s(),e.j41(3,"p",29),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s(),e.j41(6,"p",30)(7,"button",31),e.nI1(8,"navigationLocalize"),e.nrm(9,"lucide-icon",12),e.EFF(10),e.nI1(11,"mytranslate"),e.k0s()()()),2&t&&(e.R7$(2),e.Y8G("size",82),e.R7$(2),e.SpI(" ",e.bMT(5,5,"lang_azt_you_dont_have_any_question_bank_yet")," "),e.R7$(3),e.Y8G("routerLink",e.eq3(11,B,e.bMT(8,7,"/admin/question-library/add-new-question-library"))),e.R7$(2),e.Y8G("ngClass",e.lJ4(13,se)),e.R7$(),e.SpI(" ",e.bMT(11,9,"lang_azt_create_a_question_bank")," "))}function qt(t,a){if(1&t&&e.DNE(0,Yt,27,21,"ng-container",5)(1,Vt,12,14,"ng-template",null,1,e.C5r),2&t){const n=e.sdS(2),o=e.XpG();e.Y8G("ngIf",o.ebankList.length)("ngIfElse",n)}}let Bt=(()=>{var t;class a extends w.H{getEbankList(){this.initStatusObj(),this.waitDestroy(this.ebankService.apiEbanksListPost({page:this.pageObj.page,size:this.pageObj.pageSize}).subscribe(i=>{if(!i.success)return this.errorStatusObj(i.message,!0);this.ebankList=i.data?.objs??[],this.totalEbank=i.data?.total??0,this.pageObj.setTotalPages(this.totalEbank),this.stopStatusObj()}))}goToPage(o){this.pageObj.setPageNumber(o)}ngOnInit(){super.ngOnInit(),this.getEbankList()}constructor(o){super(),this.ebankService=o,this.ebankList=[],this.totalEbank=0,this.pageObj=new Z.d(24)}}return(t=a).\u0275fac=function(o){return new(o||t)(e.rXU(ae.n))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-question-library-dashboard"]],features:[e.Vt3],decls:4,vars:3,consts:[["doneLoading",""],["emptyQuestionLibrary",""],[3,"headerBackToLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[4,"ngIf","ngIfElse"],[1,"mt-5"],[1,"flex","flex-col-reverse","sm:flex-row","items-center"],[1,"w-full","sm:w-auto","mt-3","sm:mt-0","mr-auto"],[1,"text-xl","font-medium"],[1,"w-full","sm:w-auto","flex"],[1,"btn","btn-primary","shadow-md","ml-2",3,"routerLink"],["name","plus","size","16",3,"ngClass"],[1,"grid","grid-cols-12","mt-5","gap-5"],["class","col-span-12 sm:col-span-6 md:col-span-4 lg:col-span-3",4,"ngFor","ngForOf"],[2,"height","25px"],[1,"flex","items-center","flex-col-reverse","sm:flex-row","mt-3"],[1,"mr-0","sm:mr-auto","mt-2",2,"position","absolute","bottom","10px"],[3,"goToPaginationPage","pageObj"],[1,"text-right","pb-2","azt-hidden","md:block",2,"position","absolute","bottom","10px","right","20px"],[1,"text-md"],[1,"ml-auto","text-right","-mt-2","block","md:hidden"],[1,"col-span-12","sm:col-span-6","md:col-span-4","lg:col-span-3"],[1,"box","p-5","zoom-in","h-full",3,"routerLink","queryParams"],[1,"font-medium"],[1,"mt-3"],[1,"intro-y","empty-trash","flex","flex-col","justify-center","text-center",2,"height","400px"],[1,"text-primary","text-center"],["type","inbox-empty",3,"size"],[1,"text-lg","font-medium","mt-1"],[1,"text-md","text-slate-500","mt-4"],[1,"btn","btn-primary","shadow-md",3,"routerLink"]],template:function(o,i){if(1&o&&(e.j41(0,"teacher-layout",2),e.DNE(1,Pt,1,1,"azt-loading-effect",3)(2,qt,3,2,"ng-template",null,0,e.C5r),e.k0s()),2&o){const s=e.sdS(3);e.Y8G("headerBackToLink","/admin/dashboard"),e.R7$(),e.Y8G("ngIf",i.statusObj.loading)("ngIfElse",s)}},dependencies:[g.Wk,m.YU,m.Sq,m.bT,q.K,ne.q,P.m,G.Q,v.WGl,m.QX,j.F2,j.wp],encapsulation:2}),a})();var re=r(76627),le=r(65106),ce=r(25539),N=r(30657),de=r(32639),ue=r(5271),Xt=r(64486),Ut=r(66793),Kt=r(47426),me=r(33220),Jt=r(4375),Wt=r(42789),Ht=r(60780),Zt=r(5955),en=r(58447),tn=r(54313),nn=r(6625),_e=r(9570),on=r(81328);const an=()=>({"mr-1":!0});function sn(t,a){1&t&&e.nrm(0,"azt-loading-ui",3),2&t&&e.Y8G("size",16)}function rn(t,a){1&t&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t&&(e.R7$(),e.JRh(e.bMT(2,1,"long_core_chon_khung_kien_thuc")))}function ln(t,a){if(1&t&&e.nrm(0,"azt-dynamic-hook",9),2&t){const n=e.XpG(2);e.Y8G("content",n.currentKnowledgeTreeNode.name)}}function cn(t,a){if(1&t){const n=e.RV6();e.j41(0,"div",4),e.DNE(1,rn,3,3,"span",5)(2,ln,1,1,"azt-dynamic-hook",6),e.j41(3,"a",7),e.bIt("click",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.openKnowledgeObjectiveTreeNodeDialog())}),e.nrm(4,"lucide-icon",8),e.j41(5,"span"),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()()()}if(2&t){const n=e.XpG();e.R7$(),e.Y8G("ngIf",!n.currentKnowledgeTreeNode),e.R7$(),e.Y8G("ngIf",n.currentKnowledgeTreeNode),e.R7$(2),e.Y8G("ngClass",e.lJ4(6,an)),e.R7$(2),e.JRh(e.bMT(7,4,"lang_auto_sua"))}}let dn=(()=>{var t;class a extends w.H{openKnowledgeObjectiveTreeNodeDialog(){this.sAztDialogService.open(on.y,{data:{bankObj:this.bankObj,selectedObj:{objectiveId:this.objectiveId}},width:"100vw",restoreFocus:!1}).afterClosed().subscribe(i=>{i&&(this.initStatusObj(),this.waitDestroy(this.questionService.apiQuestionUpdateQuestionKnowledgePost({ebankId:this.bankObj.id,questions:[{questionId:this.questionId,knowledgeId:void 0,objectiveId:i.suggestId}]}).subscribe(l=>{if(!l)return this.errorStatusObj("lang_update_question_knowledge_unsuccessfully",!0);this.currentKnowledgeTreeNode=i,this.selectKnowledgeEmit.emit(i),this.successStatusObj("lang_update_question_knowledge_successfully",!0)})))})}ngOnInit(){this.currentKnowledgeTreeNode=this.sAztKnowledgeObjectiveForQuestionLibraryService.getObjBySuggestId(this.bankKnowledgeObjs,this.objectiveId)}constructor(o,i){super(),this.questionService=o,this.sAztDialogService=i,this.sAztKnowledgeObjectiveForQuestionLibraryService=(0,e.WQX)(ue.z),this.selectKnowledgeEmit=new e.bkB}}return(t=a).\u0275fac=function(o){return new(o||t)(e.rXU(V.wP),e.rXU(L.i))},t.\u0275cmp=e.VBU({type:t,selectors:[["azt-question-knowledge-unit-for-question-library-to-update"]],inputs:{bankKnowledgeObjs:"bankKnowledgeObjs",questionId:"questionId",bankObj:"bankObj",objectiveId:"objectiveId"},outputs:{selectKnowledgeEmit:"selectKnowledgeEmit"},features:[e.Vt3],decls:4,vars:2,consts:[["loadingDone",""],[1,"treeview-dd"],["class","ml-3",3,"size",4,"ngIf","ngIfElse"],[1,"ml-3",3,"size"],[1,"flex"],[4,"ngIf"],[3,"content",4,"ngIf"],[1,"ml-2","link__hover","link__color","clickable",2,"display","inline-flex","align-items","center",3,"click"],["name","tags","size","16",3,"ngClass"],[3,"content"]],template:function(o,i){if(1&o&&(e.j41(0,"div",1),e.DNE(1,sn,1,1,"azt-loading-ui",2)(2,cn,8,7,"ng-template",null,0,e.C5r),e.k0s()),2&o){const s=e.sdS(3);e.R7$(),e.Y8G("ngIf",i.statusObj.loading)("ngIfElse",s)}},dependencies:[m.YU,m.bT,v.WGl,Q.R,_e.x,j.wp],styles:["label[_ngcontent-%COMP%]{margin-bottom:0;cursor:pointer}.bi[_ngcontent-%COMP%]{cursor:pointer;margin-right:.3rem}"]}),a})();const un=t=>({"skeleton-box-loading":t}),mn=t=>({"pb-2":t}),pe=t=>({"padding-mobile":t});function _n(t,a){if(1&t&&e.nrm(0,"div",4),2&t){const n=e.XpG();e.Y8G("ngClass",e.eq3(1,un,n.renderConfigObj.isFirstRender))}}function pn(t,a){if(1&t&&e.nrm(0,"azt-test-audio-ui",26),2&t){const n=e.XpG(2);e.Y8G("questionObj",n.questionObj)("isShowList",!0)}}function gn(t,a){if(1&t&&(e.j41(0,"div",27),e.EFF(1),e.nI1(2,"isOfflineExam"),e.nI1(3,"mytranslate"),e.k0s()),2&t){let n;const o=e.XpG(2);e.R7$(),e.Lme(" ",o.customQuestionLabel+" "+((null!=o.questionObj.labelIndex?o.questionObj.labelIndex:o.curQuestionIndex)+(null!==(n=o.examObj.startQuestionIndex)&&void 0!==n?n:1))," ",e.bMT(2,2,o.examObj)?" ("+e.bMT(3,4,"lang_auto_hoi_de_thi_offline")+") ":null," ")}}function bn(t,a){1&t&&(e.j41(0,"div",19),e.EFF(1,"|"),e.k0s())}function hn(t,a){1&t&&(e.j41(0,"div",19),e.EFF(1,"|"),e.k0s())}function fn(t,a){1&t&&(e.j41(0,"div",28),e.nI1(1,"mytranslate"),e.nrm(2,"lucide-icon",29),e.k0s()),2&t&&e.FS9("matTooltip",e.bMT(1,1,"lang_auto_dap_an_cua_cau_hoi_nay_da_duoc_co_dinh"))}function vn(t,a){1&t&&(e.j41(0,"div",19),e.EFF(1,"|"),e.k0s())}function yn(t,a){if(1&t&&(e.j41(0,"div",30)(1,"div",13)(2,"mat-chip-listbox")(3,"mat-chip-option",31),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()()()()),2&t){const n=e.XpG(2);e.R7$(4),e.SpI(" ",e.bMT(5,1,"azt_lang_tag_"+n.questionObj.tags[0].code)," ")}}function xn(t,a){1&t&&(e.j41(0,"div",35)(1,"span",36),e.nrm(2,"azt-loading-ui"),e.k0s()())}function In(t,a){if(1&t&&(e.j41(0,"div",38)(1,"b",39),e.EFF(2),e.nI1(3,"isTrueFalseAnswer"),e.k0s(),e.nrm(4,"azt-dynamic-hook",40),e.k0s()),2&t){let n;const o=a.$implicit,i=e.XpG(5);e.R7$(2),e.JRh(e.bMT(3,2,i.questionObj)?(null!==(n=o.alpha)&&void 0!==n?n:o.key).toLowerCase()+")":(null!==(n=o.alpha)&&void 0!==n?n:o.key)+"."),e.R7$(2),e.Y8G("content",o.content)}}function Cn(t,a){if(1&t&&e.DNE(0,In,5,4,"div",37),2&t){const n=e.XpG(4);e.Y8G("ngForOf",n.questionObj.answers)}}function kn(t,a){if(1&t&&(e.j41(0,"div",33),e.DNE(1,xn,3,0,"div",34)(2,Cn,1,1,"ng-template",null,1,e.C5r),e.k0s()),2&t){const n=e.sdS(3),o=e.XpG(3);e.Y8G("answerSizeManager",0),e.R7$(),e.Y8G("ngIf",o.questionObj.isLoading)("ngIfElse",n)}}function jn(t,a){if(1&t&&(e.qex(0),e.DNE(1,kn,4,3,"div",32),e.nI1(2,"isOneChoiceAnswer"),e.nI1(3,"isTrueFalseAnswer"),e.bVm()),2&t){const n=e.XpG(2);e.R7$(),e.Y8G("ngIf",(e.bMT(2,1,n.questionObj)||e.bMT(3,3,n.questionObj))&&n.questionObj.answers&&n.questionObj.answers.length>0)}}function On(t,a){if(1&t&&(e.j41(0,"div",41)(1,"div",42)(2,"span"),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()(),e.j41(5,"div",43),e.nrm(6,"azt-dynamic-hook",40),e.k0s()()),2&t){const n=e.XpG(2);e.Y8G("ngClass",e.eq3(5,pe,n.isMobileDevice)),e.R7$(3),e.JRh(e.bMT(4,3,"lang_auto_huong_dan_giai_upper")),e.R7$(3),e.Y8G("content",n.questionObj.help)}}function wn(t,a){if(1&t){const n=e.RV6();e.j41(0,"div",41)(1,"div",44)(2,"span"),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()(),e.j41(5,"div",43)(6,"azt-question-knowledge-unit-for-question-library-to-update",45),e.bIt("selectKnowledgeEmit",function(i){e.eBV(n);const s=e.XpG(2);return e.Njj(s.selectKnowledgeEmit.emit(i))}),e.k0s()()()}if(2&t){let n;const o=e.XpG(2);e.Y8G("ngClass",e.eq3(8,pe,o.isMobileDevice)),e.R7$(3),e.JRh(e.bMT(4,6,"lang_auto_don_vi_kien_thuc")),e.R7$(3),e.Y8G("bankObj",o.ebankDataObj)("bankKnowledgeObjs",o.bankKnowledgeObjs)("questionId",o.questionObj.id)("objectiveId",null!==(n=o.questionObj.objectiveId)&&void 0!==n?n:0)}}function Tn(t,a){if(1&t&&(e.j41(0,"div",5)(1,"div",6),e.nrm(2,"azt-question-group-content-box",7),e.j41(3,"div",8),e.DNE(4,pn,1,2,"azt-test-audio-ui",9),e.j41(5,"div",10),e.DNE(6,gn,4,6,"div",11)(7,bn,2,0,"div",12),e.j41(8,"div",13)(9,"mat-select",14)(10,"mat-option",15),e.EFF(11),e.nI1(12,"mytranslate"),e.k0s(),e.j41(13,"mat-option",15),e.EFF(14),e.nI1(15,"mytranslate"),e.k0s(),e.j41(16,"mat-option",15),e.EFF(17),e.nI1(18,"mytranslate"),e.k0s(),e.j41(19,"mat-option",15),e.EFF(20),e.nI1(21,"mytranslate"),e.k0s()()(),e.DNE(22,hn,2,0,"div",12)(23,fn,3,3,"div",16)(24,vn,2,0,"div",12),e.j41(25,"div",17),e.DNE(26,yn,6,3,"div",18),e.k0s(),e.j41(27,"div",19),e.EFF(28,"|"),e.k0s(),e.j41(29,"div",20)(30,"span",21),e.EFF(31),e.nI1(32,"mytranslate"),e.k0s(),e.j41(33,"span",22),e.EFF(34),e.k0s()()(),e.nrm(35,"azt-question-content-box",7),e.DNE(36,jn,4,5,"ng-container",23),e.nI1(37,"isOfflineExam"),e.nrm(38,"azt-question-answer-view-with-simple-result-box-for-teacher",24),e.DNE(39,On,7,7,"div",25)(40,wn,7,10,"div",25),e.k0s()()()),2&t){const n=e.XpG();e.R7$(),e.xc7("font-size","1em")("line-height","1.7")("overflow","auto"),e.Y8G("id","question_render_container_"+n.questionObj.id)("ngClass",e.eq3(49,mn,n.questionObj.attachments.length>0)),e.R7$(),e.Y8G("examObj",n.examObj)("questionObj",n.questionObj)("renderConfigObj",n.renderConfigObj),e.R7$(2),e.Y8G("ngIf",n.questionObj.attachments.length>0),e.R7$(2),e.Y8G("ngIf",!n.hideQuestionLabel),e.R7$(),e.Y8G("ngIf",!n.hideQuestionLabel),e.R7$(2),e.Y8G("ngModel",n.questionObj.answerType)("disabled",!0),e.R7$(),e.Y8G("value",3),e.R7$(),e.SpI(" ",e.bMT(12,37,"lang_testbank_create_exam_width_file_docx_essay")," "),e.R7$(2),e.Y8G("value",1),e.R7$(),e.SpI(" ",e.bMT(15,39,"lang_auto_trac_nghiem")," "),e.R7$(2),e.Y8G("value",4),e.R7$(),e.SpI(" ",e.bMT(18,41,"lang_auto_dien_tu")," "),e.R7$(2),e.Y8G("value",5),e.R7$(),e.SpI("",e.bMT(21,43,"lang_auto_trac_nghiem")," \u0110/S"),e.R7$(2),e.Y8G("ngIf",n.questionObj.isFixAns),e.R7$(),e.Y8G("ngIf",n.questionObj.isFixAns),e.R7$(),e.Y8G("ngIf",n.questionObj.tags&&n.questionObj.tags.length),e.R7$(2),e.Y8G("ngIf",n.questionObj.tags&&n.questionObj.tags.length>0),e.R7$(5),e.SpI("",e.bMT(32,45,"lang_question_library_id_question"),":\xa0"),e.R7$(3),e.JRh(n.questionObj.id),e.R7$(),e.Y8G("examObj",n.examObj)("questionObj",n.questionObj)("renderConfigObj",n.renderConfigObj),e.R7$(),e.Y8G("ngIf",!e.bMT(37,47,n.examObj)),e.R7$(2),e.Y8G("questionObj",n.questionObj),e.R7$(),e.Y8G("ngIf",n.questionObj.help),e.R7$(),e.Y8G("ngIf",n.bankKnowledgeObjs&&n.bankKnowledgeObjs.length&&n.ebankDataObj)}}let X=(()=>{var t;class a extends Xt.I{ngOnInit(){super.ngOnInit();const o=this.commonService.castJsonToObj(this.examObj.expandInfo??"")??void 0;this.customQuestionLabel=o?.label??"C\xe2u";let i=new Ut.C(this.disableLazy,this.disableRender,this.isExport);super.initData(i,this.follower,this.questionObj)}constructor(){super(),this.follower=new N.e,this.bankKnowledgeObjs=[],this.curQuestionIndex=0,this.isShowExplain=!1,this.isExport=!1,this.disableLazy=!1,this.disableRender=!1,this.hideQuestionLabel=!1,this.selectKnowledgeEmit=new e.bkB,this.customQuestionLabel=""}}return(t=a).\u0275fac=function(o){return new(o||t)},t.\u0275cmp=e.VBU({type:t,selectors:[["azt-question-standalone-for-question-library-in-view-mode"]],inputs:{examObj:"examObj",questionObj:"questionObj",follower:"follower",ebankDataObj:"ebankDataObj",bankKnowledgeObjs:"bankKnowledgeObjs",curQuestionIndex:"curQuestionIndex",isShowExplain:"isShowExplain",isExport:"isExport",disableLazy:"disableLazy",disableRender:"disableRender",hideQuestionLabel:"hideQuestionLabel"},outputs:{selectKnowledgeEmit:"selectKnowledgeEmit"},features:[e.Vt3],decls:4,vars:3,consts:[["elementRended",""],["doneLoad",""],["load_effect_lazy","",3,"id"],["class","question-standalone-loader-box",3,"ngClass",4,"ngIf","ngIfElse"],[1,"question-standalone-loader-box",3,"ngClass"],[1,"question-standalone-content-box"],[1,"question-standalone-container","box","border-none",3,"id","ngClass"],[3,"examObj","questionObj","renderConfigObj"],[1,"question-standalone-main-content"],[3,"questionObj","isShowList",4,"ngIf"],[1,"flex","items-center","mb-2"],["class","box-service-question-name",4,"ngIf"],["class","edit-question-header-dr",4,"ngIf"],[1,"first-text"],[3,"ngModel","disabled"],[3,"value"],["class","fix-answer",3,"matTooltip",4,"ngIf"],[1,"edit-question-header-show-tags"],["class","box-service-type no-wrap",4,"ngIf"],[1,"edit-question-header-dr"],[1,"first-text","border-none"],[2,"color","rgba(0, 0, 0, 0.3803921569)"],[1,"font-bold"],[4,"ngIf"],[3,"questionObj"],["class","box-help mt-2",3,"ngClass",4,"ngIf"],[3,"questionObj","isShowList"],[1,"box-service-question-name"],[1,"fix-answer",3,"matTooltip"],["name","pin","size","16"],[1,"box-service-type","no-wrap"],[1,"tag-chip"],["class","row answers",3,"answerSizeManager",4,"ngIf"],[1,"row","answers",3,"answerSizeManager"],["class","col-sm-12 text-center",4,"ngIf","ngIfElse"],[1,"col-sm-12","text-center"],[1,"w-6","h-6","inline-block","mx-auto"],["class","answer col-sm-12 col-md-6",4,"ngFor","ngForOf"],[1,"answer","col-sm-12","col-md-6"],[1,"answer-label"],[3,"content"],[1,"box-help","mt-2",3,"ngClass"],[1,"help-title"],[1,"tex2jax_process","help-content","text-slate-500"],[1,"help-title","uppercase"],[3,"selectKnowledgeEmit","bankObj","bankKnowledgeObjs","questionId","objectiveId"]],template:function(o,i){if(1&o&&(e.j41(0,"div",2),e.DNE(1,_n,1,3,"div",3)(2,Tn,41,51,"ng-template",null,0,e.C5r),e.k0s()),2&o){const s=e.sdS(3);e.Y8G("id","question_render_element_"+i.questionObj.id),e.R7$(),e.Y8G("ngIf",!i.renderConfigObj.isRenderElement)("ngIfElse",s)}},dependencies:[m.YU,m.Sq,m.bT,Kt.wT,me.uI,me.gq,Jt.VO,A.oV,u.BC,u.vS,v.WGl,Wt.N,Ht.c,Zt.C,Q.R,en.y,tn.$,nn.l,_e.x,dn,j.wp,j.st,j.V6,j.FC],styles:['.pr-7[_ngcontent-%COMP%]{padding-right:28px}.w-38px[_ngcontent-%COMP%]{width:38px}.remove-grid[_ngcontent-%COMP%]{display:block!important}.question-standalone-loader-box[_ngcontent-%COMP%]{min-height:50px}  .skeleton-box-loading{width:100%;height:30px;max-width:100%;margin-bottom:5px;display:inline-block}  .skeleton-box-loading:after{position:absolute;top:0;right:0;bottom:0;left:0;transform:translate(-100%);animation:_ngcontent-%COMP%_shimmer 2s infinite;content:""}.question-standalone-box[_ngcontent-%COMP%]{margin-bottom:30px;display:block;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);border-radius:.375rem}.question-standalone-container[_ngcontent-%COMP%]{padding:15px}.question-standalone-for-test-finder[_ngcontent-%COMP%]{border:none;margin-bottom:0;padding:0}.question-standalone-for-test-finder[_ngcontent-%COMP%]   .question-standalone-main-content[_ngcontent-%COMP%]{padding:15px;border:1px solid rgb(228,228,228)}.group-of-question-standalone-for-test-finder[_ngcontent-%COMP%]{padding:15px!important;border:1px solid rgb(228,228,228)!important}.question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid #2262ae!important;outline:3px solid rgba(125,160,201,.65)!important}.group-of-question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid green!important;outline:3px solid rgba(0,193,0,.321)!important}.question-standalone-label[_ngcontent-%COMP%]{font-weight:700}.question-standalone-content-box[_ngcontent-%COMP%]{position:relative}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]{color:#f44336;position:relative;padding-left:20px;display:flex;align-items:center}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]:before{content:"!";position:absolute;left:0;color:#fff;background:#f44336;width:15px;height:15px;text-align:center;border-radius:50%;font-size:smaller;display:flex;justify-content:center;align-items:center}.question-standalone-step-container-box[_ngcontent-%COMP%]{margin-bottom:50px}.group-content-of-question-standalone[_ngcontent-%COMP%]{margin-bottom:10px;font-weight:700}.answer[_ngcontent-%COMP%]{display:flex;align-items:center}.answer-label[_ngcontent-%COMP%]{width:20px;height:30px;min-width:20px;min-height:30px;display:flex;align-items:center;justify-content:flex-start;border-radius:50%;border-width:2px;border-style:solid;border-color:transparent}.answer-box[_ngcontent-%COMP%]{border-radius:0 0 3px 3px;padding:8px 20px;justify-content:space-between;align-items:center}.selected-answer[_ngcontent-%COMP%]{background-color:#f39c12;color:#fff}.answer-content-front[_ngcontent-%COMP%]{display:flex!important;flex-wrap:wrap;width:calc(100% - 30px)}.explainTxt[_ngcontent-%COMP%]{width:125px;font-weight:500;display:flex;align-items:center}#examHeader[_ngcontent-%COMP%]{display:block;border:1px solid #e7e7e7;border-radius:3px;overflow:hidden}.arrow_btn[_ngcontent-%COMP%]{font-size:20px;vertical-align:middle;width:20px;height:20px;color:#fff;margin-left:auto!important;margin-right:auto!important;-webkit-user-select:none;user-select:none}.bottom_action[_ngcontent-%COMP%]{position:fixed;padding:15px;bottom:0;left:0;background:#312e2e;color:#fff;width:100%}.bottom_action[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]{display:block}.btn-ans-result[_ngcontent-%COMP%]{color:#fff;background-color:#f39c12}.show-list[_ngcontent-%COMP%]{max-width:200px}.show-list[_ngcontent-%COMP%]   .show-sheet[_ngcontent-%COMP%]   .listli[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:27px;height:27px;border-radius:50%;border:1px solid #347da5;display:flex;align-items:center;color:#fff;justify-content:center;font-size:12px;cursor:pointer;-webkit-user-select:none;user-select:none}.top_action[_ngcontent-%COMP%]{position:fixed;padding:10px;top:0;left:0;background:#312e2e;color:#fff;width:100%}.scrollSheetMobile[_ngcontent-%COMP%]{max-height:200px;overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.scrollSheetMobile[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.notify-badge[_ngcontent-%COMP%]{position:absolute;right:3px;top:3px;text-align:center;color:#afafaf;padding:0;font-size:20px;cursor:pointer}.attach-container[_ngcontent-%COMP%]{background:#fff;padding:10px 0 0;border-radius:5px;width:83.33%;border:1px solid #e8e8e8}.answer-review[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:50%;border:1px solid rgb(52,125,165);display:flex;align-items:center;color:#fff;justify-content:center;font-size:15px;-webkit-user-select:none;user-select:none}.border-none[_ngcontent-%COMP%]{border:none!important}.bg-question[_ngcontent-%COMP%]{margin-top:15px;padding:15px 10px;background:#fff}.question-pending-part[_ngcontent-%COMP%]{width:100%;height:50px}.pencil-edit[_ngcontent-%COMP%]{position:absolute;top:-5px;right:-5px;width:30px;height:30px;border-radius:50%;text-align:center;background:#a9a9a9;z-index:9999}.pencil-edit[_ngcontent-%COMP%]   .lucide[_ngcontent-%COMP%]{color:#fff;stroke-width:2.5px;height:29px}.margin-question-bar[_ngcontent-%COMP%]{margin-top:calc(3rem + 40px)!important}.sheet-screen[_ngcontent-%COMP%]{max-height:calc(100vh - 140px);overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.sheet-screen[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.box-help[_ngcontent-%COMP%]{border-top:1px solid #d7d7d7;padding:10px 30px 0 0}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]{text-align:center;font-size:11px;margin-top:-20px}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#fff;padding:0 10px;color:#d58e0b}.box-help[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]{font-size:13px;overflow-x:auto;overflow-y:hidden}  .layout{display:grid;margin:20px 0;grid-row-gap:20px}  .layout-4{grid-template-columns:1fr 1fr 1fr 1fr}  .layout-2{grid-template-columns:1fr 1fr}  .layout-1{grid-template-columns:1fr}  .question-standalone-content-box{max-width:100%;overflow-x:auto;overflow-y:hidden}  #boxContentQuestion .question-standalone-container{max-width:800px}@keyframes _ngcontent-%COMP%_shimmer{to{transform:translate(100%)}}@media (max-width: 768px){.answer-content-front[_ngcontent-%COMP%]{justify-content:center}.btn-ans-result[_ngcontent-%COMP%]{margin-right:auto!important}}@media (max-width: 800px){  #boxContentQuestion .question-standalone-container{max-width:calc(90vw - 16px)!important}}',".box-service-question-name[_ngcontent-%COMP%]{outline:1px solid #ccc;padding:3px 10px!important;border-radius:3px;font-weight:500;width:-moz-fit-content;width:fit-content}.edit-question-header-dr[_ngcontent-%COMP%]{color:#607d8b;margin:0 10px}.first-text[_ngcontent-%COMP%]{display:flex;align-items:center;padding:0!important}.first-text[_ngcontent-%COMP%]   marquee[_ngcontent-%COMP%]{width:100px}.first-text[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;margin:0;padding:0;width:100%;display:flex;justify-content:center;align-items:center}@media screen and (max-width: 500px){.edit-question-header-dr[_ngcontent-%COMP%]{margin:0 9px}}"]}),a})();const En=()=>({}),Sn=t=>({id:0,name:"",countQuestion:0,showFrontend:0,allowStudentView:!1,editable:!1,permissionObj:t});function Rn(t,a){1&t&&(e.j41(0,"span",11),e.nrm(1,"azt-loading-ui"),e.k0s())}let ge=(()=>{var t;class a extends Y._{confirmDelete(){this.initStatusObj(),this.waitDestroy(this.eBanksQuestionService.apiEbanksQuestionsDeletePost({questionIds:[this.data.questionObj.id],ebankId:this.data.ebankId}).subscribe(o=>{if(!o.success)return this.errorStatusObj(o.message,!0);this.successStatusObj("lang_cms_delete_success",!0),this.dialogRef.close(!0)}))}btnCloseDialog(){this.dialogRef.close(!1)}constructor(o,i,s){super(s,i),this.eBanksQuestionService=o,this.dialogRef=i,this.data=s,this.followerRenderQuest=new N.e}}return(t=a).\u0275fac=function(o){return new(o||t)(e.rXU(F.N8),e.rXU(d.CP,8),e.rXU(d.Vh,8))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-remove-question-library-dialog"]],features:[e.Vt3],decls:17,vars:18,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-3","border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"intro-y","overflow-auto",2,"max-height","calc(100vh - 150px)"],[1,"text-md","mr-auto","font-bold"],[1,"border-t","border-slate-200/60","dark:border-darkmode-400","py-2","mt-2"],[3,"examObj","questionObj","follower","curQuestionIndex"],[1,"p-3","flex","justify-end"],[1,"btn","w-24","btn-secondary","mr-3",3,"click"],[1,"btn","btn-danger","mw-24",3,"click","disabled"],["class","w-3 mr-2",4,"ngIf"],[1,"w-3","mr-2"]],template:function(o,i){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s(),e.j41(7,"div",5),e.nrm(8,"azt-question-standalone-for-question-library-in-view-mode",6),e.k0s()()()(),e.j41(9,"div",7)(10,"button",8),e.bIt("click",function(){return i.btnCloseDialog()}),e.EFF(11),e.nI1(12,"mytranslate"),e.k0s(),e.j41(13,"button",9),e.bIt("click",function(){return i.confirmDelete()}),e.DNE(14,Rn,2,0,"span",10),e.EFF(15),e.nI1(16,"mytranslate"),e.k0s()()()),2&o&&(e.R7$(5),e.SpI(" ",e.bMT(6,9,"lang_remove_question_from_library")," "),e.R7$(3),e.Y8G("examObj",e.eq3(16,Sn,e.lJ4(15,En)))("questionObj",i.data.questionObj)("follower",i.followerRenderQuest)("curQuestionIndex",i.data.index),e.R7$(3),e.SpI(" ",e.bMT(12,11,"lang_auto_dong")," "),e.R7$(2),e.Y8G("disabled",i.statusObj.loading),e.R7$(),e.Y8G("ngIf",i.statusObj.loading),e.R7$(),e.SpI(" ",e.bMT(16,13,"lang_auto_xoa")," "))},dependencies:[m.bT,Q.R,X,j.wp],styles:[".answer-content[_ngcontent-%COMP%]{display:flex!important;flex-wrap:wrap}.answer-box[_ngcontent-%COMP%]{border-radius:0 0 3px 3px;padding:8px 20px;justify-content:space-between;align-items:center}.answer[_ngcontent-%COMP%]{display:flex;align-items:center}.group-content-of-question-standalone[_ngcontent-%COMP%]{margin-bottom:10px;font-weight:700}.question-standalone-label[_ngcontent-%COMP%]{font-weight:700}.answer-label[_ngcontent-%COMP%]{min-width:20px;min-height:30px;display:flex;align-items:center;justify-content:flex-start;border-radius:50%;border-width:2px;border-style:solid;border-color:transparent}"]}),a})();var be=r(17818);const Fn=()=>({"mr-2":!0}),Mn=t=>({"mb-2":t}),Qn=()=>({}),Ln=t=>({id:0,name:"",countQuestion:0,showFrontend:0,allowStudentView:!1,editable:!1,permissionObj:t}),he=t=>({"mr-2":t});function Dn(t,a){if(1&t&&e.nrm(0,"azt-loading-effect",5),2&t){const n=e.XpG();e.Y8G("currentStatusObj",n.statusObj)}}function Gn(t,a){1&t&&(e.j41(0,"div",11)(1,"h3",12),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()),2&t&&(e.R7$(2),e.JRh(e.bMT(3,1,"lang_question_library_no_question_exist")))}function zn(t,a){if(1&t){const n=e.RV6();e.j41(0,"div",19)(1,"div",20)(2,"azt-question-standalone-for-question-library-in-view-mode",21),e.bIt("selectKnowledgeEmit",function(i){const s=e.eBV(n).$implicit,l=e.XpG(4);return e.Njj(l.selectKnowledgeEmit(i,s))}),e.k0s(),e.j41(3,"div",22)(4,"button",23),e.nrm(5,"lucide-icon",24),e.k0s()(),e.j41(6,"mat-menu",25,2)(8,"div",26)(9,"ul",27)(10,"li")(11,"a",28),e.bIt("click",function(){const i=e.eBV(n),s=i.$implicit,l=i.index,x=e.XpG(4);return e.Njj(x.showRemoveQuestionDialog(s,l))}),e.j41(12,"span"),e.nrm(13,"lucide-icon",29),e.j41(14,"span",30),e.EFF(15),e.nI1(16,"mytranslate"),e.k0s()()()(),e.j41(17,"li")(18,"a",31),e.bIt("click",function(){const i=e.eBV(n).$implicit,s=e.XpG(4);return e.Njj(s.editQuestionEvent(i))}),e.j41(19,"span"),e.nrm(20,"lucide-icon",32),e.j41(21,"span",30),e.EFF(22),e.nI1(23,"mytranslate"),e.k0s()()()()()()()()()}if(2&t){const n=a.$implicit,o=a.index,i=a.last,s=e.sdS(7),l=e.XpG(4);e.R7$(),e.Y8G("ngClass",e.eq3(16,Mn,!i)),e.R7$(),e.Y8G("examObj",e.eq3(19,Ln,e.lJ4(18,Qn)))("questionObj",n)("follower",l.followerRenderQuest)("curQuestionIndex",o)("ebankDataObj",l.ebankDataObj)("bankKnowledgeObjs",l.bankKnowledgeObjs),e.R7$(2),e.Y8G("matMenuTriggerFor",s),e.R7$(9),e.Y8G("ngClass",e.eq3(21,he,!l.isMobileDevice)),e.R7$(2),e.JRh(e.bMT(16,12,"lang_auto_xoa_cau_hoi")),e.R7$(5),e.Y8G("ngClass",e.eq3(23,he,!l.isMobileDevice)),e.R7$(2),e.JRh(e.bMT(23,14,"lang_core_chinh_sua_de_thi"))}}function An(t,a){1&t&&e.nrm(0,"azt-loading-ui",33)}function $n(t,a){if(1&t){const n=e.RV6();e.j41(0,"div",13),e.DNE(1,zn,24,25,"div",14),e.k0s(),e.j41(2,"div",15)(3,"button",16),e.bIt("click",function(){e.eBV(n);const i=e.XpG(3);return e.Njj(i.loadMoreQuestion())}),e.DNE(4,An,1,0,"azt-loading-ui",17),e.EFF(5),e.nI1(6,"mytranslate"),e.nrm(7,"lucide-icon",18),e.k0s()()}if(2&t){const n=e.XpG(3);e.R7$(),e.Y8G("ngForOf",n.questionObjs),e.R7$(2),e.Y8G("disabled",n.questionObjs.length<n.page*n.sizeApi),e.R7$(),e.Y8G("ngIf",n.isLoadingNextPage),e.R7$(),e.SpI(" ",e.bMT(6,5,"lang_auto_xem_them")," "),e.R7$(2),e.Y8G("ngClass",e.lJ4(7,Fn))}}function Pn(t,a){if(1&t&&(e.j41(0,"div",7)(1,"div")(2,"span",8),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"span",9),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()(),e.DNE(8,Gn,4,3,"div",10)(9,$n,8,8,"ng-template",null,1,e.C5r),e.k0s()),2&t){const n=e.sdS(10),o=e.XpG(2);e.R7$(3),e.JRh(e.bMT(4,4,o.ebankFrameObj.name)),e.R7$(3),e.SpI("(",o.questionObjs.length+" "+e.bMT(7,6,"lang_auto_cau_hoi"),")"),e.R7$(2),e.Y8G("ngIf",!o.questionObjs.length)("ngIfElse",n)}}function Nn(t,a){if(1&t&&e.DNE(0,Pn,11,8,"div",6),2&t){const n=e.XpG();e.Y8G("ngIf",n.ebankDataObj&&n.ebankFrameObj)}}let Yn=(()=>{var t;class a extends w.H{showRemoveQuestionDialog(o,i){this.sAztDialogService.open(ge,{width:"750px",data:{questionObj:o,ebankId:this.ebankDataObj?.id??0,index:i},restoreFocus:!1,autoFocus:!1}).afterClosed().subscribe(x=>{x&&(this.questionObjs=this.questionObjs.filter(M=>M.id!=o.id))})}editQuestionEvent(o){let i=`/admin/question-library/view-question-list-node/${this.bankId}/${this.frameId}`+(this.backLink?"?backto="+encodeURIComponent(this.backLink):"");window.location.href=this.commonService.getLocalRouter("/admin/testbank/azota-editor/0")+"/"+o.id+"?backto="+encodeURIComponent(i)+"&r="+(o.rawIndex??0)}loadMoreQuestion(){this.page++,this.getDataFrame(!0)}selectKnowledgeEmit(o,i){let s=this.questionObjs.find(l=>l.id==i.id);s&&(s.objectiveId=o.suggestId)}getDataFrame(o){this.isLoadingNextPage=o,o||this.initStatusObj(),this.eBanksQuestionService.apiEbanksQuestionsListPost({ebankId:this.bankId,ebankFrameId:this.frameId,page:this.page,size:this.sizeApi}).subscribe(s=>{if(this.isLoadingNextPage=!1,!s.success||!s.data?.ebank)return this.errorStatusObj(s.message,!0);this.ebankDataObj={...s.data.ebank,totalQuestion:0,actionWaitingRead:0,frames:[]},this.ebankFrameObj=s.data?.ebankFrame,this.loadQuest(s.data?.list??[],l=>{this.followerRenderQuest.setNumQuest(l.length),this.questionObjs.push(...l),this.successStatusObj()}),this.sAztKnowledgeObjectiveForQuestionLibraryService.getKnowledgeByApi(this.ebankDataObj?.id,(l,x)=>this.bankKnowledgeObjs=l,l=>{})})}loadQuest(o,i){const s=this.commonService.castJsonToClassObjs(ce.I,JSON.stringify(o));this.questionRenderService.parseRenderQuestions(s??[],l=>{},this.configRenderService).then(l=>i(l)).catch(l=>{this.showErrorSnack("lang_auto_de_thi_tai_khong_thanh_cong"),i(s??[])})}ngOnInit(){this.waitDestroy((0,re.z)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.frameId=Number(this.commonService.getMyParam(this.activeRoute,"frameId")),this.bankId=Number(this.commonService.getMyParam(this.activeRoute,"bankId")),this.backLink=this.commonService.getMyQueryParam("backto")??"/admin/question-library/view-question-library/"+this.bankId+"/0",this.getDataFrame(!1)}))}constructor(o,i,s){super(),this.activeRoute=o,this.eBanksQuestionService=i,this.sAztDialogService=s,this.sAztKnowledgeObjectiveForQuestionLibraryService=(0,e.WQX)(ue.z),this.questionRenderService=(0,e.WQX)(de.g),this.configRenderService=new le.y(!0),this.backLink="",this.frameId=0,this.bankId=0,this.page=1,this.sizeApi=50,this.isLoadingNextPage=!1,this.questionObjs=[],this.followerRenderQuest=new N.e,this.bankKnowledgeObjs=[]}}return(t=a).\u0275fac=function(o){return new(o||t)(e.rXU(g.nX),e.rXU(F.N8),e.rXU(L.i))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-view-list-question-node"]],features:[e.Vt3],decls:4,vars:3,consts:[["doneLoading",""],["showList",""],["mainMenu","matMenu"],[3,"headerBackToLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],["class","container mx-auto mt-3","style","max-width: 1000px",4,"ngIf"],[1,"container","mx-auto","mt-3",2,"max-width","1000px"],[1,"font-medium"],[1,"ml-3","text-slate-500","text-xs"],["class","box p-3 mt-3",4,"ngIf","ngIfElse"],[1,"box","p-3","mt-3"],[1,"text-slate-500","text-md",2,"font-weight","420"],[1,"box","rounded-none","mt-3",2,"background-color","transparent"],["class","question-standalone-content-box",4,"ngFor","ngForOf"],[1,"mt-3","mx-auto","w-full","text-center"],[1,"btn","btn-transparent","mx-auto",3,"click","disabled"],["class","mr-1",4,"ngIf"],["name","chevron-down","size","20",3,"ngClass"],[1,"question-standalone-content-box"],[1,"box-service","box","border","border-slate-400","dark:border-darkmode-400","px-3","py-2","relative",3,"ngClass"],[3,"selectKnowledgeEmit","examObj","questionObj","follower","curQuestionIndex","ebankDataObj","bankKnowledgeObjs"],[1,"absolute",2,"left","auto","top","10px","right","10px"],[1,"btn","btn-sm","btn-transparent",3,"matMenuTriggerFor"],["name","ellipsis-vertical"],["xPosition","before"],[1,"dropdown-menu","show","relative","w-72"],[1,"dropdown-content"],[1,"dropdown-item","text-danger",2,"align-items","center",3,"click"],["name","trash","size","16",3,"ngClass"],[2,"vertical-align","middle"],[1,"dropdown-item",2,"align-items","center",3,"click"],["name","file-pen-line","size","16",3,"ngClass"],[1,"mr-1"]],template:function(o,i){if(1&o&&(e.j41(0,"teacher-layout",3),e.DNE(1,Dn,1,1,"azt-loading-effect",4)(2,Nn,1,1,"ng-template",null,0,e.C5r),e.k0s()),2&o){const s=e.sdS(3);e.Y8G("headerBackToLink",i.backLink),e.R7$(),e.Y8G("ngIf",i.statusObj.loading)("ngIfElse",s)}},dependencies:[m.YU,m.Sq,m.bT,be.kk,be.Cp,q.K,Q.R,X,G.Q,v.WGl,j.wp],styles:[".box-service-name[_ngcontent-%COMP%], .box-service-question-name[_ngcontent-%COMP%]{outline:1px solid #ccc;padding:3px 10px!important;border-radius:3px;font-weight:500}.box-service-question-name[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content}.box-service-question[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap}.box-service-question[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child{border-right:none}.box-service-question[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:last-child{border-right:none}.box-help[_ngcontent-%COMP%]{border-top:1px solid #d7d7d7;padding:10px}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]{text-align:center;font-size:11px;margin-top:-20px}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#fff;padding:0 10px;color:#d58e0b}.box-help[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]{font-size:13px;overflow-x:auto;overflow-y:hidden}.custom-cell-knowledge[_ngcontent-%COMP%]{position:absolute;left:10px;top:0;bottom:0}.custom-colums-knowledge[_ngcontent-%COMP%]{height:calc(100vh - 200px);overflow-y:auto}@media screen and (max-width: 768px){.custom-colums-knowledge[_ngcontent-%COMP%]{height:auto!important;overflow-y:hidden}}"]}),a})();var U=r(68323);function Vn(t,a){if(1&t&&(e.j41(0,"div",1),e.nrm(1,"div",2),e.k0s()),2&t){const n=e.XpG();e.R7$(),e.Y8G("chart",n.chartSkill)}}let qn=(()=>{var t;class a extends w.H{constructor(){super(...arguments),this.keyTitle="",this.height=300,this.width=250}handleData(){return this.data.filter(i=>0!==i.totalQuestion).map(i=>({name:this.commonService.myTranslateInstant(i.name),y:i.totalQuestion}))}createPieChart(){let o=this.handleData();if(!o.length)return;const i=o.reduce((l,x)=>(x.y??0)>(l.y??0)?x:l,o[0]);o=o.map(l=>l.y===i.y?{...l,sliced:!0,selected:!0}:l);let s=new p.t1({chart:{type:"pie",height:this.height,width:this.width},title:{text:this.commonService.myTranslateInstant(this.keyTitle)},credits:{enabled:!1},series:[{name:this.commonService.myTranslateInstant("lang_core_total_question"),type:"pie",data:o,dataLabels:{enabled:!0,distance:-40,format:"{point.name}: {point.y}",style:{color:"#000000"},filter:{operator:"==",property:"y",value:i.y??0}}}]});this.chartSkill=s}ngOnInit(){this.createPieChart()}}return(t=a).\u0275fac=(()=>{let n;return function(i){return(n||(n=e.xGo(t)))(i||t)}})(),t.\u0275cmp=e.VBU({type:t,selectors:[["app-azt-pie-chart"]],inputs:{keyTitle:"keyTitle",data:"data",height:"height",width:"width"},features:[e.Vt3],decls:1,vars:1,consts:[["class","mb-5",4,"ngIf"],[1,"mb-5"],[3,"chart"]],template:function(o,i){1&o&&e.DNE(0,Vn,2,1,"div",0),2&o&&e.Y8G("ngIf",i.chartSkill)},dependencies:[m.bT,p.S6],encapsulation:2}),a})();function Bn(t,a){1&t&&(e.j41(0,"div",2),e.nrm(1,"azt-loading-ui",3),e.k0s()),2&t&&(e.R7$(),e.Y8G("size",30))}function Xn(t,a){1&t&&(e.j41(0,"div",6),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_homework_homework_list_not_found")," "))}function Un(t,a){1&t&&(e.j41(0,"div",14),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_homework_homework_list_not_found")," "))}function Kn(t,a){if(1&t&&(e.j41(0,"tr")(1,"td",19)(2,"div",20),e.nrm(3,"azt-create-avatar",21),e.j41(4,"div",22)(5,"h3",11),e.EFF(6),e.k0s(),e.j41(7,"p",23),e.EFF(8),e.k0s()()()(),e.j41(9,"td",19),e.EFF(10),e.k0s()()),2&t){const n=a.$implicit;e.R7$(3),e.Y8G("linkAvatar",n.avatar)("nameCreateAvatar",n.fullName)("size",35),e.R7$(3),e.JRh(n.fullName),e.R7$(2),e.JRh(n.email),e.R7$(2),e.JRh(n.totalQuestion)}}function Jn(t,a){if(1&t&&(e.j41(0,"table",15)(1,"thead")(2,"tr")(3,"th",16),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s(),e.j41(6,"th",17),e.EFF(7),e.nI1(8,"mytranslate"),e.k0s()()(),e.j41(9,"tbody"),e.DNE(10,Kn,11,6,"tr",18),e.k0s()()),2&t){const n=e.XpG(3);e.R7$(4),e.JRh(e.bMT(5,3,"lang_auto_ho_va_ten")),e.R7$(3),e.JRh(e.bMT(8,5,"S\u1ed1 l\u01b0\u1ee3ng c\xe2u h\u1ecfi")),e.R7$(3),e.Y8G("ngForOf",n.dataAnalytics.members)}}function Wn(t,a){if(1&t&&(e.j41(0,"div")(1,"div",7),e.nrm(2,"app-azt-pie-chart",8)(3,"app-azt-pie-chart",8)(4,"app-azt-pie-chart",8),e.k0s(),e.j41(5,"div",9)(6,"div",10)(7,"p",11),e.EFF(8),e.nI1(9,"mytranslate"),e.k0s()(),e.DNE(10,Un,3,3,"div",12)(11,Jn,11,7,"table",13),e.k0s()()),2&t){const n=e.XpG(2);e.R7$(2),e.Y8G("data",n.dataAnalytics.frames)("width",400)("keyTitle","lang_core_so_luong_cau_hoi_theo_cau_truc"),e.R7$(),e.Y8G("data",n.dataAnalytics.tags)("width",400)("keyTitle","lang_core_ty_le_muc_do_kho_cua_cau_hoi"),e.R7$(),e.Y8G("data",n.dataAnalytics.answerTypes)("width",400)("keyTitle","lang_core_ty_le_cac_dang_thuc_cau_hoi"),e.R7$(4),e.JRh(e.bMT(9,12,"lang_core_danh_sach_dong_gop")),e.R7$(2),e.Y8G("ngIf",!n.dataAnalytics.members.length),e.R7$(),e.Y8G("ngIf",n.dataAnalytics.members.length)}}function Hn(t,a){if(1&t&&e.DNE(0,Xn,3,3,"div",4)(1,Wn,12,14,"div",5),2&t){const n=e.XpG();e.Y8G("ngIf",!n.dataAnalytics),e.R7$(),e.Y8G("ngIf",n.dataAnalytics)}}let Zn=(()=>{var t;class a extends w.H{getData(){this.initStatusObj(),this.ebankService.apiEbanksCountQuestionsGet(this.bankId,void 0).subscribe(o=>o.success?(this.dataAnalytics=o.data,this.dataAnalytics?(this.dataAnalytics.frames=this.dataAnalytics.frames,this.dataAnalytics.answerTypes.forEach(i=>i.name="lang_tool_knowledge_answer_type_"+i.name),this.dataAnalytics.tags=this.dataAnalytics.tags,void this.stopStatusObj()):this.stopStatusObj()):this.errorStatusObj(o.message,!0))}ngOnInit(){this.getData()}constructor(o){super(),this.ebankService=o}}return(t=a).\u0275fac=function(o){return new(o||t)(e.rXU(ae.n))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-question-library-analytics-box"]],inputs:{bankId:"bankId"},features:[e.Vt3],decls:3,vars:2,consts:[["doneLoading",""],["class","flex justify-center items-center p-5",4,"ngIf","ngIfElse"],[1,"flex","justify-center","items-center","p-5"],[3,"size"],["class","flex justify-center items-center",4,"ngIf"],[4,"ngIf"],[1,"flex","justify-center","items-center"],[1,"flex","justify-around","mr-5","ml-5"],[3,"data","width","keyTitle"],[1,"w-full"],[1,"flex","justify-between","items-center","pb-2",2,"border-bottom","1px solid #ddd"],[1,"font-medium"],["class","flex justify-center items-center mt-3",4,"ngIf"],["class","table","style","white-space: initial",4,"ngIf"],[1,"flex","justify-center","items-center","mt-3"],[1,"table",2,"white-space","initial"],[1,"whitespace-nowrap"],[1,"whitespace-nowrap","text-center"],[4,"ngFor","ngForOf"],[1,"text-center","capitalize"],[1,"flex","items-center"],[3,"linkAvatar","nameCreateAvatar","size"],[1,"ml-3","text-left"],[1,"text-slate-500","text-xs"]],template:function(o,i){if(1&o&&e.DNE(0,Bn,2,1,"div",1)(1,Hn,2,2,"ng-template",null,0,e.C5r),2&o){const s=e.sdS(2);e.Y8G("ngIf",i.statusObj.loading)("ngIfElse",s)}},dependencies:[m.Sq,m.bT,U.p,Q.R,qn,j.wp],encapsulation:2}),a})();var eo=r(60495),to=r(87840),no=r(3635),oo=r(46882);function io(t,a){1&t&&(e.j41(0,"div",2),e.nrm(1,"azt-loading-ui",3),e.k0s()),2&t&&(e.R7$(),e.Y8G("size",30))}function ao(t,a){if(1&t){const n=e.RV6();e.j41(0,"tr")(1,"td",10)(2,"div",4),e.nrm(3,"azt-create-avatar",11),e.j41(4,"div",12)(5,"h3",13),e.EFF(6),e.k0s(),e.j41(7,"p",14),e.EFF(8),e.k0s()()()(),e.j41(9,"td",10),e.EFF(10),e.nI1(11,"mytranslate"),e.k0s(),e.j41(12,"td",15)(13,"lucide-icon",16),e.nI1(14,"mytranslate"),e.bIt("click",function(){const i=e.eBV(n).$implicit,s=e.XpG(2);return e.Njj(s.showEditPermissionDialog(i))}),e.k0s()()()}if(2&t){const n=a.$implicit,o=e.XpG(2);e.R7$(3),e.Y8G("nameCreateAvatar",n.fullName)("linkAvatar",n.avatar)("size",35),e.R7$(3),e.JRh(n.fullName),e.R7$(2),e.JRh(n.email),e.R7$(2),e.JRh(e.bMT(11,7,o.checkRole(n.role))),e.R7$(3),e.FS9("matTooltip",e.bMT(14,9,"lang_common_edit"))}}function so(t,a){if(1&t){const n=e.RV6();e.j41(0,"div")(1,"div",4)(2,"p"),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"span",5),e.bIt("click",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.showListPeopleWhoWillShare())}),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()(),e.j41(8,"table",6)(9,"thead")(10,"tr")(11,"th",7),e.EFF(12),e.nI1(13,"mytranslate"),e.k0s(),e.j41(14,"th",8),e.EFF(15),e.nI1(16,"mytranslate"),e.k0s(),e.nrm(17,"th"),e.k0s()(),e.j41(18,"tbody"),e.DNE(19,ao,15,11,"tr",9),e.k0s()()()}if(2&t){const n=e.XpG();e.R7$(3),e.JRh(e.bMT(4,5,"lang_core_danh_sach_thanh_vien")),e.R7$(3),e.SpI("+ ",e.bMT(7,7,"lang_teacher_group_group_add_member"),""),e.R7$(6),e.JRh(e.bMT(13,9,"lang_auto_ho_va_ten")),e.R7$(3),e.JRh(e.bMT(16,11,"Vai tr\xf2")),e.R7$(4),e.Y8G("ngForOf",n.members)}}let ro=(()=>{var t;class a extends w.H{showListPeopleWhoWillShare(){this.sAztDialogService.open(to.z,{data:{shareDataObj:this.shareDataObj,setData:()=>this.getData()},autoFocus:!1,restoreFocus:!1}).afterClosed().subscribe(i=>{i&&this.getData()})}showEditPermissionDialog(o){let i={fullName:o.fullName,phone:o.phone,email:o.email,avatar:o.avatar,id:o.userId,teamPermissions:this.ebankPermissions.filter(l=>l.code==o.role),allowEditPermission:!0,allowDeletePermission:!0};this.sAztDialogService.open(eo.A,{data:{teacherObj:i,shareDataObj:this.shareDataObj},restoreFocus:!1}).afterClosed().subscribe(l=>{l&&this.getData()})}checkRole(o){return this.ebankPermissions.find(i=>i.code==o)?.key??"lang_auto_nguoi_xem"}getUserTeachers(o){this.teacherGroupService.apiTeacherGroupGetUserTeachersGet().subscribe(i=>{if(!i.success)return o(i.message);let s=this.shareDataObj.teacherObjs;this.shareDataObj.allTeacherPermissionObjs=i.data?.map(l=>({...l,id:l.teacherId??0,allowEditPermission:!0,allowDeletePermission:!0,teamPermissions:s.find(x=>x.id==l.id)?.teamPermissions??[]}))??[],o(void 0)})}getData(){this.initStatusObj(),this.ebankMemberService.apiEbanksMemberEbankIdGet(this.bankId).subscribe(o=>{if(!o.success)return this.errorStatusObj(o.message,!0);this.members=o.data??[],this.shareDataObj.teacherObjs=this.members?.map(i=>({fullName:i.fullName,phone:i.phone,email:i.email,avatar:i.avatar,id:i.userId,allowEditPermission:!0,allowDeletePermission:!0,teamPermissions:this.ebankPermissions.filter(s=>s.code==i.role)})),this.getUserTeachers(i=>{if(i)return this.errorStatusObj(i,!0);this.stopStatusObj()})})}createShareData(){this.shareDataObj={objectId:this.bankId,objectCode:"EBANK",ebankPermissions:this.ebankPermissions,allGroupPermissionObjs:[],allTeacherPermissionObjs:[],groupObjs:[],teacherObjs:[]}}ngOnInit(){this.initStatusObj(),this.createShareData(),this.getData()}constructor(o,i,s){super(),this.ebankMemberService=o,this.sAztDialogService=i,this.teacherGroupService=s,this.members=[],this.ebankPermissions=[{id:1,key:"lang_auto_chu_so_huu",code:"owner"},{id:2,key:"lang_auto_nguoi_xem",code:"viewer"},{id:3,key:"lang_auto_nguoi_soan_thao",code:"editor"}]}}return(t=a).\u0275fac=function(o){return new(o||t)(e.rXU(no.V),e.rXU(L.i),e.rXU(oo.x))},t.\u0275cmp=e.VBU({type:t,selectors:[["coazt-question-library-permission-management"]],inputs:{bankId:"bankId"},features:[e.Vt3],decls:2,vars:2,consts:[["class","p-5 flex justify-center items-center",4,"ngIf"],[4,"ngIf"],[1,"p-5","flex","justify-center","items-center"],[3,"size"],[1,"flex","items-center"],[1,"clickable","ml-3","link-color","clickable","uppercase",3,"click"],[1,"table","mt-2",2,"white-space","initial"],[1,"whitespace-nowrap"],[1,"whitespace-nowrap","text-center"],[4,"ngFor","ngForOf"],[1,"text-center","capitalize"],[3,"nameCreateAvatar","linkAvatar","size"],[1,"ml-3","text-left"],[1,"font-medium"],[1,"text-slate-500","text-xs"],[1,"text-right","capitalize"],["size","20","name","pencil",1,"clickable",3,"click","matTooltip"]],template:function(o,i){1&o&&e.DNE(0,io,2,1,"div",0)(1,so,20,13,"div",1),2&o&&(e.Y8G("ngIf",i.statusObj.loading),e.R7$(),e.Y8G("ngIf",i.members.length&&!i.statusObj.loading))},dependencies:[m.Sq,m.bT,A.oV,U.p,Q.R,v.WGl,j.wp],encapsulation:2}),a})(),lo=(()=>{var t;class a extends w.H{constructor(){super(...arguments),this.nodeObjsData=[]}convertFrameDataToNode(o){return o.map(i=>({id:i.id,getQuestionKey:"",title:i.name,parentId:i.parentId,children:this.convertFrameDataToNode(i.children),position:i.position,nodeType:1,objectiveId:"objective"==i.suggestModel?i.suggestId:void 0,knowledgeId:"knowledge"==i.suggestModel?i.suggestId:void 0,questions:i.questions.map(s=>({...s,difficultyIndex:0})),totalQuestion:i.totalQuestion}))}ngOnInit(){this.nodeObjsData=this.convertFrameDataToNode(this.bankInfoObj.frames)}}return(t=a).\u0275fac=(()=>{let n;return function(i){return(n||(n=e.xGo(t)))(i||t)}})(),t.\u0275cmp=e.VBU({type:t,selectors:[["app-question-library-structure-box"]],inputs:{bankInfoObj:"bankInfoObj"},features:[e.Vt3],decls:1,vars:6,consts:[[3,"bankId","rawNodes","modeView","schoolSubjectValue","schoolLevelValue","useScrollBar"]],template:function(o,i){1&o&&e.nrm(0,"app-question-library-tree-component",0),2&o&&e.Y8G("bankId",i.bankInfoObj.id)("rawNodes",i.nodeObjsData)("modeView","structure")("schoolSubjectValue",i.bankInfoObj.subjectId)("schoolLevelValue",i.bankInfoObj.levelId)("useScrollBar",!1)},dependencies:[H],encapsulation:2}),a})();var co=r(34143);function uo(t,a){1&t&&(e.j41(0,"div",2),e.nrm(1,"azt-loading-ui",3),e.k0s()),2&t&&(e.R7$(),e.Y8G("size",30))}function mo(t,a){1&t&&(e.j41(0,"div",6),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_homework_homework_list_not_found")," "))}function _o(t,a){if(1&t){const n=e.RV6();e.j41(0,"a",22),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2).$implicit,s=e.XpG(3);return e.Njj(s.viewActivityLog(i.targetId))}),e.EFF(1),e.k0s()}if(2&t){const n=e.XpG(2).$implicit;e.R7$(),e.JRh(n.addQuestionMeta.sourceName)}}function po(t,a){if(1&t&&(e.j41(0,"span",23),e.EFF(1),e.k0s()),2&t){const n=e.XpG(2).$implicit;e.R7$(),e.JRh(n.addQuestionMeta.sourceName)}}function go(t,a){if(1&t&&(e.j41(0,"div",17),e.nrm(1,"lucide-icon",18),e.j41(2,"span",19),e.EFF(3),e.nI1(4,"mytranslate"),e.nI1(5,"mytranslate"),e.k0s(),e.DNE(6,_o,2,1,"a",20)(7,po,2,1,"span",21),e.k0s()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.E5c("",e.bMT(4,5,"lang_admin_guide_add_new")," ",n.addQuestionMeta.totalQuestion," ",e.bMT(5,7,"lang_core_cau_hoi_vao"),""),e.R7$(3),e.Y8G("ngIf",n.targetId),e.R7$(),e.Y8G("ngIf",!n.targetId)}}function bo(t,a){if(1&t&&(e.j41(0,"div",17),e.nrm(1,"azt-svg-icon",24),e.j41(2,"span",19),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"span",23),e.EFF(6),e.k0s()()),2&t){const n=e.XpG().$implicit;e.R7$(),e.Y8G("type","user-cog")("size",14),e.R7$(2),e.JRh(e.bMT(4,4,"lang_core_thay_doi_quyen_cho_tai_khoan")),e.R7$(3),e.JRh(n.changeRoleMemberMeta.fullName)}}function ho(t,a){if(1&t&&(e.j41(0,"div",17),e.nrm(1,"lucide-icon",25),e.j41(2,"span",19),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"span",23),e.EFF(6),e.k0s()()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.JRh(e.bMT(4,2,"lang_core_them_moi_thanh_vien")),e.R7$(3),e.JRh(n.createMemberMeta.fullName)}}function fo(t,a){if(1&t&&(e.j41(0,"div",17),e.nrm(1,"lucide-icon",26),e.j41(2,"span",19),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"span",23),e.EFF(6),e.k0s()()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.JRh(e.bMT(4,2,"lang_core_them_moi_ngan_hang_cau_hoi")),e.R7$(3),e.JRh(n.createEbankMeta.name)}}function vo(t,a){if(1&t&&(e.j41(0,"div",17),e.nrm(1,"lucide-icon",27),e.j41(2,"span",19),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"span",23),e.EFF(6),e.k0s()()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.JRh(e.bMT(4,2,"lang_core_xoa_cau_hoi")),e.R7$(3),e.JRh(null==n.delQuestionMeta||null==n.delQuestionMeta.questionIds?null:n.delQuestionMeta.questionIds.join(", "))}}function yo(t,a){if(1&t&&(e.j41(0,"div",17),e.nrm(1,"lucide-icon",28),e.j41(2,"span",19),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"span",23),e.EFF(6),e.k0s()()),2&t){const n=e.XpG().$implicit;e.R7$(3),e.JRh(e.bMT(4,2,"lang_core_xoa_thanh_vien")),e.R7$(3),e.JRh(n.delMemberMeta.fullName)}}function xo(t,a){if(1&t&&(e.j41(0,"div",10)(1,"div",11),e.nrm(2,"azt-create-avatar",12),e.j41(3,"div",13)(4,"h3",14),e.EFF(5),e.k0s(),e.DNE(6,go,8,9,"div",15)(7,bo,7,6,"div",15)(8,ho,7,4,"div",15)(9,fo,7,4,"div",15)(10,vo,7,4,"div",15)(11,yo,7,4,"div",15),e.k0s()(),e.j41(12,"p",16),e.EFF(13),e.nI1(14,"relativeTime"),e.k0s()()),2&t){const n=a.$implicit;e.Y8G("ngClass",a.index>0?"mt-5":""),e.R7$(2),e.Y8G("nameCreateAvatar",null==n.creator?null:n.creator.fullName)("linkAvatar",null==n.creator?null:n.creator.avatar)("size",35),e.R7$(3),e.JRh(null==n.creator?null:n.creator.fullName),e.R7$(),e.Y8G("ngIf",n.addQuestionMeta),e.R7$(),e.Y8G("ngIf",n.changeRoleMemberMeta),e.R7$(),e.Y8G("ngIf",n.createMemberMeta),e.R7$(),e.Y8G("ngIf",n.createEbankMeta),e.R7$(),e.Y8G("ngIf",null==n.delQuestionMeta?null:n.delQuestionMeta.questionIds),e.R7$(),e.Y8G("ngIf",n.delMemberMeta),e.R7$(2),e.JRh(e.bMT(14,12,n.createdAt))}}function Io(t,a){if(1&t&&(e.j41(0,"div")(1,"div",7),e.nrm(2,"div",8),e.k0s(),e.DNE(3,xo,15,14,"div",9),e.k0s()),2&t){const n=e.XpG(2);e.R7$(3),e.Y8G("ngForOf",n.ebankAction.actions)}}function Co(t,a){if(1&t&&e.DNE(0,mo,3,3,"div",4)(1,Io,4,1,"div",5),2&t){const n=e.XpG();e.Y8G("ngIf",!n.ebankAction),e.R7$(),e.Y8G("ngIf",n.ebankAction)}}let ko=(()=>{var t;class a extends w.H{viewActivityLog(o){this.commonService.myNavigation("/admin/question-library/view-question-activity/"+o)}getData(){this.initStatusObj(),this.ebankActionService.apiEbanksActionListPost({ebankId:this.bankId,page:this.page,limit:this.limit}).subscribe(i=>{if(!i.success)return this.errorStatusObj(i.message,!0);this.ebankAction=i.data,this.stopStatusObj()})}ngOnInit(){this.getData()}constructor(o){super(),this.ebankActionService=o,this.bankId=0,this.page=1,this.limit=20}}return(t=a).\u0275fac=function(o){return new(o||t)(e.rXU(co.H))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-question-library-activity-log"]],inputs:{bankId:"bankId"},features:[e.Vt3],decls:3,vars:2,consts:[["doneLoading",""],["class","p-5 flex justify-center items-center",4,"ngIf","ngIfElse"],[1,"p-5","flex","justify-center","items-center"],[3,"size"],["class","p-5 flex justify-center items-center font-medium text-slate-500",4,"ngIf"],[4,"ngIf"],[1,"p-5","flex","justify-center","items-center","font-medium","text-slate-500"],[1,"box-vertical-line","absolute","flex","justify-center"],[1,"vertical-line"],["class","flex justify-between items-center relative",3,"ngClass",4,"ngFor","ngForOf"],[1,"flex","justify-between","items-center","relative",3,"ngClass"],[1,"flex","items-center"],[3,"nameCreateAvatar","linkAvatar","size"],[1,"ml-2"],[1,"font-medium"],["class","flex items-center text-xs font-medium",4,"ngIf"],[1,"text-xs","text-slate-500"],[1,"flex","items-center","text-xs","font-medium"],["name","file-plus","size","14",1,"text-primary"],[1,"mr-2","ml-2","text-slate-500"],["class","text-primary",3,"click",4,"ngIf"],["class","text-primary",4,"ngIf"],[1,"text-primary",3,"click"],[1,"text-primary"],[1,"text-primary",3,"type","size"],["name","user-plus","size","14",1,"text-primary"],["name","church","size","14",1,"text-primary"],["name","trash-2","size","14",1,"text-danger"],["name","user-minus","size","14",1,"text-danger"]],template:function(o,i){if(1&o&&e.DNE(0,uo,2,1,"div",1)(1,Co,2,2,"ng-template",null,0,e.C5r),2&o){const s=e.sdS(2);e.Y8G("ngIf",i.statusObj.loading)("ngIfElse",s)}},dependencies:[m.YU,m.Sq,m.bT,U.p,Q.R,P.m,v.WGl,j.wp,j.NA],styles:[".vertical-line[_ngcontent-%COMP%]{border-left:2px solid lightgray}.box-vertical-line[_ngcontent-%COMP%]{width:35px;height:calc(100% - 2.5rem);padding-top:35px;padding-bottom:35px}"]}),a})();var jo=r(27208);const Oo=()=>({}),wo=(t,a)=>({expandInfo:t,id:0,name:"",countQuestion:0,showFrontend:0,allowStudentView:!1,editable:!1,permissionObj:a});let To=(()=>{var t;class a extends Y._{btnCloseDialog(){this.dialogRef.close(!1)}showRemoveQuestionDialog(){this.sAztDialogService.open(ge,{width:"750px",data:{questionObj:this.questionObj,ebankId:this.bankId??0,index:1},restoreFocus:!1,autoFocus:!1}).afterClosed().subscribe(s=>{s&&(this.successStatusObj("lang_cms_delete_success",!0),this.dialogRef.close(!0))})}editQuestion(){let o=`/admin/question-library/view-question-library/${this.bankId}/${this.data.tab}`;window.location.href=this.commonService.getLocalRouter("/admin/testbank/azota-editor/0")+"/"+this.questionObj.id+"?backto="+encodeURIComponent(o)+"&r="+(this.questionObj.rawIndex??0)}constructor(o,i){super(i,o),this.dialogRef=o,this.data=i,this.sAztDialogService=(0,e.WQX)(L.i),this.followerRenderQuest=new N.e,this.bankId=0,this.questionObj=i.questionObj,this.bankId=i.bankId}}return(t=a).\u0275fac=function(o){return new(o||t)(e.rXU(d.CP,8),e.rXU(d.Vh,8))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-question-dialog"]],features:[e.Vt3],decls:15,vars:19,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400","p-3"],[1,"box-service","box","border","border-slate-400","dark:border-darkmode-400","px-3","py-2","relative","mb-2"],[3,"examObj","questionObj","follower","hideQuestionLabel"],[1,"p-3","flex","justify-end"],[1,"btn","w-24","btn-secondary","mr-3",3,"click"],[1,"btn","btn-danger",3,"click"],[1,"btn","btn-primary","ml-3",3,"click"]],template:function(o,i){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2),e.nrm(3,"azt-question-standalone-for-question-library-in-view-mode",3),e.nI1(4,"mytranslate"),e.k0s()(),e.j41(5,"div",4)(6,"button",5),e.bIt("click",function(){return i.btnCloseDialog()}),e.EFF(7),e.nI1(8,"mytranslate"),e.k0s(),e.j41(9,"button",6),e.bIt("click",function(){return i.showRemoveQuestionDialog()}),e.EFF(10),e.nI1(11,"mytranslate"),e.k0s(),e.j41(12,"button",7),e.bIt("click",function(){return i.editQuestion()}),e.EFF(13),e.nI1(14,"mytranslate"),e.k0s()()()),2&o&&(e.R7$(3),e.Y8G("examObj",e.l_i(16,wo,e.bMT(4,7,"lang_powerpoint_frontend_chart_question"),e.lJ4(15,Oo)))("questionObj",i.questionObj)("follower",i.followerRenderQuest)("hideQuestionLabel",!0),e.R7$(4),e.SpI(" ",e.bMT(8,9,"lang_auto_dong")," "),e.R7$(3),e.SpI(" ",e.bMT(11,11,"lang_core_xoa_cau_hoi")," "),e.R7$(3),e.SpI(" ",e.bMT(14,13,"lang_core_sua_cau_hoi")," "))},dependencies:[X,j.wp],encapsulation:2}),a})();var Eo=r(32099);let So=(()=>{var t;class a extends w.H{onSearchBox(o){if(this.searchContentObj=o,""==this.searchContentObj.searchContent)return;let i=Number(this.searchContentObj.searchContent);if(!i)return this.showErrorSnack("lang_core_ma_cau_hoi_khong_hop_le");this.searchQuestion(i)}searchQuestion(o){this.initStatusObj(),this.ebankQuestionService.apiEbanksQuestionsListPost({ebankId:this.bankId,questionIds:[o],page:1,size:1}).subscribe(s=>{if(!s.success)return this.errorStatusObj(s.message,!0);this.loadQuest(s.data?.list??[],l=>{let x=this.commonService.getFirstOfArray(l);if(!x)return this.errorStatusObj("lang_core_ma_cau_hoi_khong_ton_tai",!0);this.showQuestionDialog(x),this.successStatusObj()})})}showQuestionDialog(o){this.sAztDialogService.open(To,{width:"750px",data:{questionObj:o,bankId:this.bankId,tab:this.tab},autoFocus:!1,restoreFocus:!1}).afterClosed().subscribe(s=>{s&&(this.searchContentObj.resetSearchContentEvent("NOT_EMIT_EVENT"),this.reloadData.emit(!0))})}loadQuest(o,i){const s=this.commonService.castJsonToClassObjs(ce.I,JSON.stringify(o));this.questionRenderService.parseRenderQuestions(s??[],l=>{},this.configRenderService).then(l=>i(l)).catch(l=>{this.showErrorSnack("lang_auto_de_thi_tai_khong_thanh_cong"),i(s??[])})}constructor(o,i){super(),this.ebankQuestionService=o,this.sAztDialogService=i,this.reloadData=new e.bkB,this.questionRenderService=(0,e.WQX)(de.g),this.configRenderService=new le.y(!0),this.searchContentObj=new jo.Z}}return(t=a).\u0275fac=function(o){return new(o||t)(e.rXU(F.N8),e.rXU(L.i))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-question-library-search-question-box"]],inputs:{bankId:"bankId",tab:"tab"},outputs:{reloadData:"reloadData"},features:[e.Vt3],decls:2,vars:5,consts:[[3,"onSearch","isServerSearch","isManualSearch","placeholder"]],template:function(o,i){1&o&&(e.j41(0,"azt-search-box",0),e.nI1(1,"mytranslate"),e.bIt("onSearch",function(l){return i.onSearchBox(l.searchObj)}),e.k0s()),2&o&&e.Y8G("isServerSearch",!0)("isManualSearch",!0)("placeholder",e.bMT(1,3,"lang_core_nhap_ma_cau_hoi"))},dependencies:[Eo.W,j.wp],encapsulation:2}),a})();function Ro(t,a){if(1&t&&e.nrm(0,"azt-loading-effect",3),2&t){const n=e.XpG();e.Y8G("currentStatusObj",n.statusObj)}}function Fo(t,a){if(1&t&&(e.j41(0,"span",26),e.EFF(1),e.k0s()),2&t){const n=e.XpG(3);e.R7$(),e.JRh(n.bankInfoObj.actionWaitingRead)}}function Mo(t,a){if(1&t){const n=e.RV6();e.j41(0,"div",5)(1,"div",6)(2,"p")(3,"span",7),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s(),e.j41(6,"span",8),e.EFF(7),e.nI1(8,"mytranslate"),e.k0s()(),e.j41(9,"app-question-library-search-question-box",9),e.bIt("reloadData",function(){e.eBV(n);const i=e.XpG(2);return e.Njj(i.getDataBank())}),e.k0s()(),e.j41(10,"div",10)(11,"div",11)(12,"div",12),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2);return e.Njj(i.selectTab(0))}),e.nrm(13,"lucide-icon",13),e.EFF(14),e.nI1(15,"mytranslate"),e.k0s(),e.j41(16,"div",14),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2);return e.Njj(i.selectTab(1))}),e.nrm(17,"lucide-icon",15),e.EFF(18),e.nI1(19,"mytranslate"),e.DNE(20,Fo,2,1,"span",16),e.k0s(),e.j41(21,"div",14),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2);return e.Njj(i.selectTab(2))}),e.nrm(22,"azt-svg-icon",17),e.EFF(23),e.nI1(24,"mytranslate"),e.k0s(),e.j41(25,"div",18),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2);return e.Njj(i.selectTab(3))}),e.nrm(26,"lucide-icon",19),e.EFF(27),e.nI1(28,"mytranslate"),e.k0s()(),e.j41(29,"div",20)(30,"button",21),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2);return e.Njj(i.goToCreateExamMatrix())}),e.EFF(31),e.nI1(32,"mytranslate"),e.k0s(),e.j41(33,"button",22),e.bIt("click",function(){e.eBV(n);const i=e.XpG(2);return e.Njj(i.goToChooseImportQuestionMode())}),e.EFF(34),e.nI1(35,"mytranslate"),e.k0s()()(),e.j41(36,"div",23),e.nrm(37,"app-question-library-structure-box",24)(38,"app-question-library-activity-log",25)(39,"app-question-library-analytics-box",25)(40,"coazt-question-library-permission-management",25),e.k0s()()}if(2&t){const n=e.XpG(2);e.R7$(4),e.JRh(e.bMT(5,29,n.bankInfoObj.name)),e.R7$(3),e.SpI("(",n.bankInfoObj.totalQuestion+" "+e.bMT(8,31,"lang_auto_cau_hoi"),")"),e.R7$(2),e.Y8G("bankId",n.bankId)("tab",n.tab),e.R7$(3),e.HbH(0==n.tab?"btn-tab-select":"text-slate-500"),e.R7$(2),e.SpI(" ",e.bMT(15,33,"lang_core_cau_truc")," "),e.R7$(2),e.HbH(1==n.tab?"btn-tab-select":"text-slate-500"),e.R7$(2),e.SpI(" ",e.bMT(19,35,"lang_core_cac_hoat_dong")," "),e.R7$(2),e.Y8G("ngIf",null==n.bankInfoObj?null:n.bankInfoObj.actionWaitingRead),e.R7$(),e.HbH(2==n.tab?"btn-tab-select":"text-slate-500"),e.R7$(),e.Y8G("type","chart-pie")("size",16),e.R7$(),e.SpI(" ",e.bMT(24,37,"lang_core_phan_tich")," "),e.R7$(2),e.HbH(3==n.tab?"btn-tab-select":"text-slate-500"),e.R7$(2),e.SpI(" ",e.bMT(28,39,"lang_auto_phan_quyen")," "),e.R7$(4),e.JRh(e.bMT(32,41,"lang_core_tao_ma_tran_de_thi")),e.R7$(3),e.SpI("+ ",e.bMT(35,43,"lang_cms_enter_question_description"),""),e.R7$(3),e.Y8G("hidden",0!=n.tab)("bankInfoObj",n.bankInfoObj),e.R7$(),e.Y8G("hidden",1!=n.tab)("bankId",n.bankId),e.R7$(),e.Y8G("hidden",2!=n.tab)("bankId",n.bankId),e.R7$(),e.Y8G("hidden",3!=n.tab)("bankId",n.bankId)}}function Qo(t,a){if(1&t&&e.DNE(0,Mo,41,45,"div",4),2&t){const n=e.XpG();e.Y8G("ngIf",n.bankInfoObj)}}const Do=[{path:"",component:R.z,canActivate:[T.t],children:[{path:"dashboard",component:Bt},{path:"choose-import-question-mode/:bankId",component:At},{path:"view-question-library/:bankId/:tab",component:(()=>{var t;class a extends w.H{selectTab(o){this.tab=o,this.commonService.myNavigation("/admin/question-library/view-question-library/"+this.bankId+"/"+this.tab)}goToChooseImportQuestionMode(){this.commonService.myNavigation(`/admin/question-library/choose-import-question-mode/${this.bankId}`)}goToCreateExamMatrix(){this.myNavigationWithQueryString("/admin/testbank/mix-ebank-template/0/ebank/0",`?bankId=${this.bankId}&levelId=${this.bankInfoObj?.levelId}&subjectId=${this.bankInfoObj?.subjectId}&bookId=${this.bankInfoObj?.bookId}`)}getDataBank(){this.initStatusObj(),this.eBanksService.apiEbanksIdGet(this.bankId,1).subscribe(o=>{if(!o.success)return this.errorStatusObj(o.message,!0);this.bankInfoObj=o.data,this.stopStatusObj()})}ngOnInit(){this.bankId=Number(this.commonService.getMyParam(this.activeRoute,"bankId")),this.backLink=this.commonService.getMyQueryParam("backto")??"/admin/question-library/dashboard",this.getDataBank(),this.waitDestroy((0,re.z)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.tab=Number(this.commonService.getMyParam(this.activeRoute,"tab")),this.tab>3&&this.selectTab(0)}))}constructor(o,i){super(),this.activeRoute=o,this.eBanksService=i,this.backLink="",this.tab=0,this.bankId=0}}return(t=a).\u0275fac=function(o){return new(o||t)(e.rXU(g.nX),e.rXU(F.nd))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-view-bank"]],features:[e.Vt3],decls:4,vars:3,consts:[["doneLoading",""],[3,"headerBackToLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],["class","p-3",4,"ngIf"],[1,"p-3"],[1,"flex","justify-between","items-center"],[1,"font-medium"],[1,"ml-2","text-slate-500","text-xs"],[3,"reloadData","bankId","tab"],[1,"flex","justify-between","mt-5"],[1,"flex","font-medium"],[1,"btn-tab","clickable",3,"click"],["name","list","size","16",1,"mr-2"],[1,"btn-tab","clickable","ml-2",3,"click"],["name","users","size","16",1,"mr-2"],["class","text-xs number-red",4,"ngIf"],[1,"mr-2",3,"type","size"],[1,"btn-tab","clickable","nl-2",3,"click"],["name","settings","size","16",1,"mr-2"],[1,"flex","items-start","mb-2"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-primary","ml-3",3,"click"],[1,"box","p-5",2,"border-radius","0rem 0.375rem 0.375rem 0.375rem"],[3,"hidden","bankInfoObj"],[3,"hidden","bankId"],[1,"text-xs","number-red"]],template:function(o,i){if(1&o&&(e.j41(0,"teacher-layout",1),e.DNE(1,Ro,1,1,"azt-loading-effect",2)(2,Qo,1,1,"ng-template",null,0,e.C5r),e.k0s()),2&o){const s=e.sdS(3);e.Y8G("headerBackToLink",i.backLink),e.R7$(),e.Y8G("ngIf",i.statusObj.loading)("ngIfElse",s)}},dependencies:[m.bT,q.K,P.m,G.Q,v.WGl,Zn,ro,lo,ko,So,j.wp],styles:[".btn-tab[_ngcontent-%COMP%]{padding:10px 15px 18px;display:flex;justify-content:center;align-items:center}.btn-tab-select[_ngcontent-%COMP%]{background:#fff;border-top-left-radius:8px;border-top-right-radius:8px}.number-red[_ngcontent-%COMP%]{background:red;border-radius:50%;width:17px;height:17px;color:#fff;font-weight:900;display:flex;justify-content:center;align-items:center;margin:auto auto auto 5px}"]}),a})()},{path:"add-new-question-library",component:We},{path:"view-question-list-node/:bankId/:frameId",component:Yn}]}];let Go=(()=>{var t;class a{}return(t=a).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[g.iI.forChild(Do),g.iI,O.XE]}),a})(),zo=(()=>{var t;class a{}return(t=a).\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[g.iI,m.MD,b.s,_.Id,u.YN,u.X1,d.hM,C.L,y.Lk,_.Id,c.xv,I.Q,f.b,v.flO.pick(v.Ptg),h.An,Go,p.Fr]}),a})()},60531:(E,k,r)=>{"use strict";r.d(k,{O:()=>g});var m=r(48891),u=r(50589),d=r(62095);let g=(()=>{var p;class v{setMode(c){this.browserStorageService.saveSimpleStorage("__editor:mode_open",c)}getMode(){var c=this.browserStorageService.getSimpleStorage("__editor:mode_open")||"editor";return this.browserStorageService.removeSimpleStorage("__editor:mode_open"),c}setFileProcess(c){this.file=c}getFirstFile(){let c=this.file;return this.file=void 0,c}setOutputData(c){this.data=c}getOutputData(){return this.data}redirectToConfig(c){this.data.homework&&c.showHomework(),(this.data.exam||this.data.examOffline)&&c.showExam()}setMatrixData(c,h){h?this.matrix=c:this.browserStorageService.saveSimpleStorage("__editor:matrix-data",JSON.stringify(c))}getMatrixData(){var c=this.browserStorageService.getSimpleStorage("__editor:matrix-data");return this.browserStorageService.removeSimpleStorage("__editor:matrix-data"),c?this.commonService.castJsonToObj(c):this.matrix}constructor(c,h){this.browserStorageService=c,this.commonService=h,this.data={}}}return(p=v).\u0275fac=function(c){return new(c||p)(m.KVO(u.z),m.KVO(d.R))},p.\u0275prov=m.jDH({token:p,factory:p.\u0275fac,providedIn:"root"}),v})()},43166:(E,k,r)=>{"use strict";r.d(k,{x:()=>g});var m=r(10936),u=r(48891),d=r(62095);let g=(()=>{var p;class v{filter(c,h){return null==c?[]:c=c.filter(_=>this.removeAllSpecialChars((null!=h?_[h]:_).toString()).includes(this.removeAllSpecialChars(this.searchControl.value)))}mergeSchoolLevel(c){let h=[];return c.forEach(_=>null!=_.schoolLevel&&h.push(_.schoolLevel)),h}removeAllSpecialChars(c){return c=(c=this.commonService.myTranslateInstant(c)??c).toLowerCase().trim(),c=this.commonService.convertVietnameseToEnglish(c),c=this.commonService.removeSpecialStringInSearch(c),(c=this.commonService.removeNonAlphabetic(c)).toLowerCase().trim()}constructor(c){this.commonService=c,this.searchControl=new m.MJ("",{nonNullable:!0})}}return(p=v).\u0275fac=function(c){return new(c||p)(u.rXU(d.R))},p.\u0275dir=u.FsC({type:p,selectors:[["","searchInList",""]],exportAs:["searchInList"]}),v})()},51221:(E,k,r)=>{"use strict";r.d(k,{$:()=>m});var m=function(u){return u.COPY="copy",u.CUT="cut",u.DELETE="delete",u.SELECTED="selected",u}(m||{})},86925:(E,k,r)=>{"use strict";r.d(k,{Y:()=>m});var m=function(u){return u[u.EXAM_CATEGORY=0]="EXAM_CATEGORY",u[u.EXAM=1]="EXAM",u}(m||{})},10296:(E,k,r)=>{"use strict";r.d(k,{R:()=>y});var m=r(43277),d=r(18148),g=r(48891),p=r(52509),v=r(62095);let y=(()=>{var c;class h{constructor(b,C){this.mobileWebviewService=b,this.commonService=C}shareFileWithBlob(b,C){if(this.commonService.isMobileWebview(void 0)){d.L.openLoadingEffect(this.commonService.myTranslateInstant("lang_auto_dang_lay_du_lieu_tu_he_thong")??"");let f=new FileReader;f.readAsDataURL(b),f.onloadend=()=>{let I=f.result;"string"==typeof I&&(this.mobileWebviewService.sendShareFileBase64(C,String(I)),d.L.closeLoadingEffect(100))}}else m.saveAs(b,C)}shareFileWithBase64(b,C){this.commonService.isMobileWebview(void 0)?this.mobileWebviewService.sendShareFileBase64(C,b):m.saveAs(b,C)}}return(c=h).\u0275fac=function(b){return new(b||c)(g.KVO(p.f),g.KVO(v.R))},c.\u0275prov=g.jDH({token:c,factory:c.\u0275fac,providedIn:"root"}),h})()},30977:(E,k,r)=>{"use strict";r.d(k,{g:()=>g});var m=r(51221),u=r(86925),d=r(48891);let g=(()=>{var p;class v{constructor(){this.clipboardObjs=[]}setActionToClipboard(c,h,_,b){var C={id:c,name:b,type:h,action:_};this.clipboardObjs.filter(I=>I.id==C.id&&I.type==C.type).length>0?this.clipboardObjs.forEach(I=>{I.id==C.id&&I.type==C.type&&(I.action=C.action)}):this.clipboardObjs.push(C)}hasInClipboard(c,h){return this.clipboardObjs.filter(b=>b.id==c&&b.type==h).length>0}hasCopyFolderActionInClipboard(){var c=!1;return this.clipboardObjs.forEach(h=>{h.type==u.Y.EXAM_CATEGORY&&h.action==m.$.COPY&&(c=!0)}),c}getActionOfDocumentObj(c,h){var _=this.clipboardObjs.filter(b=>b.id==c&&b.type==h);if(_&&_.length>0)return _[0].action}removeDocumentInClipboard(c,h){for(var _=0;_<this.clipboardObjs.length;_++)this.clipboardObjs[_].id==c&&this.clipboardObjs[_].type==h&&this.clipboardObjs.splice(_,1)}isPasteToSelfFolder(c){var h=!1;return this.clipboardObjs.forEach(_=>{_.id==c&&_.type==u.Y.EXAM_CATEGORY&&_.action==m.$.COPY&&(h=!0)}),h}getCurrentClipBoard(){return this.clipboardObjs}resetClipBoardAfterPasteOrCancelAllActions(){this.clipboardObjs=[]}}return(p=v).\u0275fac=function(c){return new(c||p)},p.\u0275prov=d.jDH({token:p,factory:p.\u0275fac,providedIn:"root"}),v})()},18148:(E,k,r)=>{"use strict";r.d(k,{L:()=>m});let m=(()=>{var u;class d{static openLoadingEffect(p){d.getDomElement().style.display="flex",setTimeout(()=>{d.changeMsgLoadingEffect(p)},50)}static closeLoadingEffect(p){return new Promise(v=>{setTimeout(()=>{const y=d.getDomElement();y&&(y.style.display="none"),v(!0)},p)})}static changeMsgLoadingEffect(p){d.getDomContent().innerText=p}static getDomContent(){return document.getElementById(d.idStatusContent)??document.createElement("span")}static getDomElement(){return document.getElementById(d.idComponent)??this.createDomElement()}static createDomElement(){const p=document.createElement("div");return p.id=d.idComponent,p.setAttribute("style","position: fixed;display: flex;width: 100vw;height: 100%;background: #000000c7;color: #ffffff;font-size: 20px;font-weight: lighter;justify-content: center;align-items: center;cursor: progress;z-index: 9999;top: 0;left: 0;"),p.style.display="none",p.innerHTML=`\n        <div class="text-center" style="height: 85%; overflow-x: auto;">\n            <div class="flex justify-center mt-5">\n                <svg width="20" viewBox="0 0 58 58" xmlns="http://www.w3.org/2000/svg">\n                    <g fill="none" fill-rule="evenodd">\n                        <g transform="translate(2 1)" stroke="currentColor" stroke-width="1.5">\n                            <circle cx="42.601" cy="11.462" r="5" fill-opacity="1" fill="currentColor">\n                                <animate attributeName="fill-opacity" begin="0s" dur="1.3s" values="1;0;0;0;0;0;0;0" calcMode="linear" repeatCount="indefinite"></animate>\n                            </circle>\n                            <circle cx="49.063" cy="27.063" r="5" fill-opacity="0" fill="currentColor">\n                                <animate attributeName="fill-opacity" begin="0s" dur="1.3s" values="0;1;0;0;0;0;0;0" calcMode="linear" repeatCount="indefinite"></animate>\n                            </circle>\n                            <circle cx="42.601" cy="42.663" r="5" fill-opacity="0" fill="currentColor">\n                                <animate attributeName="fill-opacity" begin="0s" dur="1.3s" values="0;0;1;0;0;0;0;0" calcMode="linear" repeatCount="indefinite"></animate>\n                            </circle>\n                            <circle cx="27" cy="49.125" r="5" fill-opacity="0" fill="currentColor">\n                                <animate attributeName="fill-opacity" begin="0s" dur="1.3s" values="0;0;0;1;0;0;0;0" calcMode="linear" repeatCount="indefinite"></animate>\n                            </circle>\n                            <circle cx="11.399" cy="42.663" r="5" fill-opacity="0" fill="currentColor">\n                                <animate attributeName="fill-opacity" begin="0s" dur="1.3s" values="0;0;0;0;1;0;0;0" calcMode="linear" repeatCount="indefinite"></animate>\n                            </circle>\n                            <circle cx="4.938" cy="27.063" r="5" fill-opacity="0" fill="currentColor">\n                                <animate attributeName="fill-opacity" begin="0s" dur="1.3s" values="0;0;0;0;0;1;0;0" calcMode="linear" repeatCount="indefinite"></animate>\n                            </circle>\n                            <circle cx="11.399" cy="11.462" r="5" fill-opacity="0" fill="currentColor">\n                                <animate attributeName="fill-opacity" begin="0s" dur="1.3s" values="0;0;0;0;0;0;1;0" calcMode="linear" repeatCount="indefinite"></animate>\n                            </circle>\n                            <circle cx="27" cy="5" r="5" fill-opacity="0" fill="currentColor">\n                                <animate attributeName="fill-opacity" begin="0s" dur="1.3s" values="0;0;0;0;0;0;0;1" calcMode="linear" repeatCount="indefinite"></animate>\n                            </circle>\n                        </g>\n                    </g>\n                </svg>\n            </div>\n            <div style="margin-top: 10px;position: relative;">\n                <span id="${d.idStatusContent}"></span>\n            </div>\n        </div>`,document.body.appendChild(p),p}}return(u=d).idComponent="azt-status-loading-effect",u.idStatusContent="azt-status-loading-effect-content",d})()},50334:(E,k,r)=>{"use strict";r.d(k,{C:()=>u});var m=r(59640);class u extends m.H{constructor(){super(...arguments),this.nodeObjs=[]}searchByText(g){this.nodeObjs=(g=this.standardSearchText(g)).trim()?this.doSearchByText(g,this.nodeObjs,[]):this.showAndExpandAll(this.nodeObjs)}expand(g){g.isExpand=!0}collapse(g){g.isExpand=!1}doSearchByText(g,p,v){for(var y of p){y.isShow=!1;let c=this.standardSearchText(y.text);(g.includes(c)||c.includes(g))&&(y.isShow=!0,y.isExpand=!0,v.forEach(h=>{h.isShow=!0,h.isExpand=!0})),y.children.length&&(y.children=this.doSearchByText(g,y.children,v.concat(y)))}return p}showAndExpandAll(g){for(var p of g)p.isShow=!0,p.isExpand=!0,p.children=this.showAndExpandAll(p.children);return g}standardSearchText(g){return g=g.toLowerCase(),g=this.commonService.removeSpecialStringInSearch(g),this.commonService.convertVietnameseToEnglish(g)}}},74175:(E,k,r)=>{"use strict";r.d(k,{W:()=>C});var m=r(47947),u=r(59640),d=r(48891),g=r(10296),p=r(62095),v=r(27691),y=r(54460),c=r(76975);const h=["*","*"];function _(f,I){if(1&f){const O=d.RV6();d.qex(0),d.j41(1,"a",2),d.bIt("click",function(){d.eBV(O);const R=d.XpG();return d.Njj(R.shareFileToFlutter())}),d.j41(2,"span"),d.EFF(3),d.nI1(4,"mytranslate"),d.k0s(),d.SdG(5),d.k0s(),d.bVm()}if(2&f){const O=d.XpG();d.R7$(),d.Aen(O.style),d.HbH(O.classStyle),d.FS9("target",O.target),d.R7$(2),d.JRh(d.bMT(4,7,O.fileDescription))}}function b(f,I){if(1&f&&(d.j41(0,"a",3)(1,"span"),d.EFF(2),d.nI1(3,"mytranslate"),d.k0s(),d.SdG(4,1),d.k0s()),2&f){const O=d.XpG();d.Aen(O.style),d.HbH(O.classStyle),d.FS9("href",O.dataUrl,d.B4B),d.FS9("target",O.target),d.FS9("download",O.fileName),d.R7$(2),d.JRh(d.bMT(3,9,O.fileDescription))}}let C=(()=>{var f;class I extends u.H{downloadFile(){return this.http.get(this.dataUrl,{responseType:"blob"}).pipe((0,m.T)(T=>T))}shareFileToFlutter(){this.downloadFile().subscribe(T=>{this.shareFileFlutterService.shareFileWithBlob(T,this.fileName)})}ngOnInit(){super.ngOnInit()}constructor(T,R,w){super(),this.shareFileFlutterService=T,this.commonService=R,this.http=w,this.dataUrl="",this.target="",this.fileName="",this.fileDescription="",this.classStyle="",this.style=""}}return(f=I).\u0275fac=function(T){return new(T||f)(d.rXU(g.R),d.rXU(p.R),d.rXU(v.Qq))},f.\u0275cmp=d.VBU({type:f,selectors:[["azt-download-link-item"]],inputs:{dataUrl:"dataUrl",target:"target",fileName:"fileName",fileDescription:"fileDescription",classStyle:"classStyle",style:"style"},features:[d.Vt3],ngContentSelectors:h,decls:3,vars:2,consts:[["NormalWeb",""],[4,"ngIf","ngIfElse"],[3,"click","target"],[3,"href","target","download"]],template:function(T,R){if(1&T&&(d.NAR(h),d.DNE(0,_,6,9,"ng-container",1)(1,b,5,11,"ng-template",null,0,d.C5r)),2&T){const w=d.sdS(2);d.Y8G("ngIf",R.isMobileWebView)("ngIfElse",w)}},dependencies:[y.bT,c.wp],encapsulation:2}),I})()},89121:(E,k,r)=>{"use strict";r.d(k,{z:()=>g});var m=r(59640),u=r(48891),d=r(65162);let g=(()=>{var p;class v extends m.H{constructor(){super(...arguments),this.id="default-id"}}return(p=v).\u0275fac=(()=>{let y;return function(h){return(y||(y=u.xGo(p)))(h||p)}})(),p.\u0275cmp=u.VBU({type:p,selectors:[["app-common-master-page"]],inputs:{id:"id"},features:[u.Vt3],decls:2,vars:1,consts:[[3,"id"]],template:function(c,h){1&c&&(u.j41(0,"div",0),u.nrm(1,"router-outlet"),u.k0s()),2&c&&u.FS9("id",h.id)},dependencies:[d.n3],encapsulation:2}),v})()},43277:function(E,k){var r,u;void 0!==(u="function"==typeof(r=function(){"use strict";function g(_,b,C){var f=new XMLHttpRequest;f.open("GET",_),f.responseType="blob",f.onload=function(){h(f.response,b,C)},f.onerror=function(){console.error("could not download file")},f.send()}function p(_){var b=new XMLHttpRequest;b.open("HEAD",_,!1);try{b.send()}catch{}return 200<=b.status&&299>=b.status}function v(_){try{_.dispatchEvent(new MouseEvent("click"))}catch{var b=document.createEvent("MouseEvents");b.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),_.dispatchEvent(b)}}var y="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,c=y.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),h=y.saveAs||("object"!=typeof window||window!==y?function(){}:"download"in HTMLAnchorElement.prototype&&!c?function(_,b,C){var f=y.URL||y.webkitURL,I=document.createElement("a");I.download=b=b||_.name||"download",I.rel="noopener","string"==typeof _?(I.href=_,I.origin===location.origin?v(I):p(I.href)?g(_,b,C):v(I,I.target="_blank")):(I.href=f.createObjectURL(_),setTimeout(function(){f.revokeObjectURL(I.href)},4e4),setTimeout(function(){v(I)},0))}:"msSaveOrOpenBlob"in navigator?function(_,b,C){if(b=b||_.name||"download","string"!=typeof _)navigator.msSaveOrOpenBlob(function d(_,b){return typeof b>"u"?b={autoBom:!1}:"object"!=typeof b&&(console.warn("Deprecated: Expected third argument to be a object"),b={autoBom:!b}),b.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(_.type)?new Blob(["\ufeff",_],{type:_.type}):_}(_,C),b);else if(p(_))g(_,b,C);else{var f=document.createElement("a");f.href=_,f.target="_blank",setTimeout(function(){v(f)})}}:function(_,b,C,f){if((f=f||open("","_blank"))&&(f.document.title=f.document.body.innerText="downloading..."),"string"==typeof _)return g(_,b,C);var I="application/octet-stream"===_.type,O=/constructor/i.test(y.HTMLElement)||y.safari,T=/CriOS\/[\d]+/.test(navigator.userAgent);if((T||I&&O||c)&&typeof FileReader<"u"){var R=new FileReader;R.onloadend=function(){var F=R.result;F=T?F:F.replace(/^data:[^;]*;/,"data:attachment/file;"),f?f.location.href=F:location=F,f=null},R.readAsDataURL(_)}else{var w=y.URL||y.webkitURL,e=w.createObjectURL(_);f?f.location=e:location.href=e,f=null,setTimeout(function(){w.revokeObjectURL(e)},4e4)}});y.saveAs=h.saveAs=h,E.exports=h})?r.apply(k,[]):r)&&(E.exports=u)}}]);