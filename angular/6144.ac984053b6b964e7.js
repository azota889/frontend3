(self.webpackChunkBalacoClient=self.webpackChunkBalacoClient||[]).push([[6144],{58343:(Zt,K)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.Utils=K.CONST=void 0;class M{static load($){let O=JSON.parse($);Object.assign(this,O)}}K.CONST=M,M.RENDER_SCALE=2,M.LINE_SMALL_HEIGHT=7*M.RENDER_SCALE,M.SPLIT_MARGIN=3*M.RENDER_SCALE,M.INTERSEC_MARGIN=20*M.RENDER_SCALE,M.LINE_MAGIN=2*M.RENDER_SCALE,M.MARGIN_LEFT=2*M.RENDER_SCALE,M.ENABLE_IMAGE_PROCESS=!0,M.STEP_SIZE=2,M.CROP_FULL_WIDTH=!0,M.OVERLAP=.5,M.QUESTION_PATTERN=[],M.QUESTION_PATTERN2=[],M.BREAK_LINE_PATTERN=[],M.SECTION_PATTERN_LOWER=[],M.SECTION_PATTERN_NORMAL=[],M.KICK_PATTERN=[],M.TVCN_CHAR=[],M.HET_PATTERN=[],M.DAPAN_PATTERN=[],M.HUONGDAN_PATTERN=[],M.MULTIPLE_ANS_PATTERN=[],M.DRAW_RESULT="",M.SKIP_CHAR=[],M.FOOTER_PATTERN=[],M.HELP_ANS_PATTERN=[],M.RES_ANS_PATTERN=[],K.Utils=class D{static capitalizeFirstLetter($){return $.charAt(0).toUpperCase()+$.slice(1)}static tagLang($){let O=new Map([["EASY","NB"],["MEDIUM","TH"],["HARD","VD"],["HARDEST","VDC"],["MC","TN"],["FB","\u0110T"],["ES","TL"]]);return O.has($)?O.get($):$}static parseInclude($){var O;let m=$.split("=>"),w=m.length>1?m[1]:-1,L=m[0];L=L.replaceAll(/\[@([CTQGK][\-\d]+):(:(user[_0-9]*)\-)?[^\]]*\]/g,"$1:$3").replaceAll(/\[@(F:[^\]]*)\]/g,"$1").replaceAll(/\[[^\]\d]+(\d+)[^\]\d]+\]/g,"$1").replaceAll(/\[[^\]]+\]/g,"");let mt,I=L.split("."),F=[],N=[],Q=[],j=[],V=[],tt=[],it=[],dt=[],ft=[],yt=new Map([["EASY","NB"],["MEDIUM","TH"],["HARD","VD"],["HARDEST","VDC"],["MC","TN"],["FB","\u0110T"],["ES","TL"]]),St=[];for(let he=I.length-1;he>=0;he--){let xe=I[he].trim();if(/^\d*$/.test(xe)){mt=+xe;continue}let tn=xe.split(",");for(let Ce of tn){let We=Ce.split(":"),_e=We[0],mn=null!==(O=We[1])&&void 0!==O?O:"";if(/^G[\-\d]+$/.test(_e.trim()))F.push(+_e.trim().substring(1));else if(/^Q[\-\d]+$/.test(_e.trim()))Q.push(+_e.trim().substring(1)),dt.push(mn),St.push({type:"QUEST",id:+_e.trim().substring(1)});else if(/^C[\-\d]+$/.test(_e.trim())){let ye=+_e.trim().substring(1);j.push(ye),tt.push(mn),St.push({type:""!=mn?"SHARE":"CATEGORY",id:ye})}else if(/^K[\-\d]+$/.test(_e.trim())){let ye=+_e.trim().substring(1);j.push(ye),tt.push(mn),St.push({type:""!=mn?"SHARE":"KNOWLEDGE",id:ye})}else if(/^T[\-\d]+$/.test(_e.trim()))N.push(+_e.trim().substring(1)),it.push(mn),St.push({type:"EXAM",id:+_e.trim().substring(1),groupIds:F});else if(/^F:/.test(Ce.trim())){let ye=Ce.trim().substring(2);ft.push(yt.has(ye)?yt.get(ye):ye)}}if(St.length>0){if(ft.length>0){let Ce=["TL","TN","\u0110T","ES","MC","FB"];for(let We of St)We.tags=ft.filter(_e=>Ce.indexOf(_e)<0),We.answerTypes=ft.filter(_e=>Ce.indexOf(_e)>=0).map(_e=>"TL"==_e||"ES"==_e?3:"TN"==_e||"MC"==_e?1:4)}break}}return Q.length>0&&(mt=Q.length),V.push(...tt),V.push(...it),V.push(...dt),{paths:St,shareTypes:V,catId:j,examId:N,tag:ft,groupId:F,questId:Q,getNum:mt,idx:w}}static getNumberFromStr($){let O=$.match(/(\d+)/);return O?O[0]:""}static removeAccents($){let O=["a\xe0\u1ea3\xe3\xe1\u1ea1\u0103\u1eb1\u1eb3\u1eb5\u1eaf\u1eb7\xe2\u1ea7\u1ea9\u1eab\u1ea5\u1ead","A\xc0\u1ea2\xc3\xc1\u1ea0\u0102\u1eb0\u1eb2\u1eb4\u1eae\u1eb6\xc2\u1ea6\u1ea8\u1eaa\u1ea4\u1eac","d\u0111","D\u0110","e\xe8\u1ebb\u1ebd\xe9\u1eb9\xea\u1ec1\u1ec3\u1ec5\u1ebf\u1ec7","E\xc8\u1eba\u1ebc\xc9\u1eb8\xca\u1ec0\u1ec2\u1ec4\u1ebe\u1ec6","i\xec\u1ec9\u0129\xed\u1ecb","I\xcc\u1ec8\u0128\xcd\u1eca","o\xf2\u1ecf\xf5\xf3\u1ecd\xf4\u1ed3\u1ed5\u1ed7\u1ed1\u1ed9\u01a1\u1edd\u1edf\u1ee1\u1edb\u1ee3","O\xd2\u1ece\xd5\xd3\u1ecc\xd4\u1ed2\u1ed4\u1ed6\u1ed0\u1ed8\u01a0\u1edc\u1ede\u1ee0\u1eda\u1ee2","u\xf9\u1ee7\u0169\xfa\u1ee5\u01b0\u1eeb\u1eed\u1eef\u1ee9\u1ef1","U\xd9\u1ee6\u0168\xda\u1ee4\u01af\u1eea\u1eec\u1eee\u1ee8\u1ef0","y\u1ef3\u1ef7\u1ef9\xfd\u1ef5","Y\u1ef2\u1ef6\u1ef8\xdd\u1ef4"];for(const m of O){let w=new RegExp("["+m.substring(1)+"]","g");$=$.replace(w,m[0])}return $}static zeroPad($,O){return $=$||2,(new Array($).join("0")+O).slice(-1*$)}}},95970:(Zt,K,M)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.ExamParser=void 0;const D=M(58343),f=M(25873),$=M(64984),O=M(96570),m=M(89094),w=M(75271),y=M(52734),C=M(50023),A=M(65378),E=M(88178),L=M(8377),I=M(9165),F=M(42637);K.ExamParser=class N{constructor(j){this.DEF_QUEST_NAME="c\xe2u ",this.lang="vi",D.CONST.load(j)}setLang(j){this.lang=j,this.DEF_QUEST_NAME="vi"==j?"c\xe2u ":"question "}parse(j,V,tt){var it,dt,mt,ft,yt,St,$t,he,xe,tn,Ce,We;let _e=this.findItems(j,tt);console.log("items",_e);let mn=new Map,ye=[],fe=null,Ue=0,Ye="main",Yn=0,Si=0,bn=[],ri=!0,qi=new Map;for(let Mn=0;Mn<_e.length;Mn++){let ln=_e[Mn],pi=Mn==_e.length-1?void 0:_e[Mn+1],xn=this.getPartInfo(j,ln,pi);if(this.loadText(j,xn),ln.type==A.SectionParser.TYPE_NAME&&"main"==Ye&&(Ue++,ye.push({label:Ue,parts:xn,answers:[],isGroup:!0})),ln.type==C.QuestionParser.TYPE_NAME){if(pi&&pi.type==f.AnswerParser.TYPE_NAME&&pi.pos[2]>0){let Kn;for(let _i=Mn+1;_i<_e.length;_i++)if(_e[_i].type!=f.AnswerParser.TYPE_NAME){Kn=_e[_i];break}xn=this.getPartInfo(j,ln,Kn),this.loadText(j,xn)}let ki=ln.label?+ln.label:0,an=mn.get(ki);an&&"main"!=Ye?(an.help=xn,fe=an):"main"==Ye&&(an={label:ki,olabel:ln.olabel,answers:[],parts:xn},Ue>0&&(an.group=Ue),mn.set(ki,an),ye.push(an),fe=an)}if(ln.type==f.AnswerParser.TYPE_NAME&&fe){let ki=!1;if(xn.length>0){let Gn=j[xn[0].lineIdx].replace(/\|/g,"").trim().match(D.CONST.MULTIPLE_ANS_PATTERN.join("|"));null!=Gn&&Gn.length>0&&(ki=!0)}let an=""==ln.olabel;ln.pos[2]>0&&(xn=[xn[0]],xn[0].e=ln.pos[2],this.loadText(j,xn),an=!0);let Kn={label:null!==(it=ln.label)&&void 0!==it?it:"",isCorrect:"*"==ln.extInfo,parts:an?[xn[0]]:xn,isInline:an,olabel:ln.olabel};fe.answers.push(Kn),fe.isFixAns=an||ki}if(ln.type==y.IncludeParser.TYPE_NAME)if(ln.label&&/\.\d*$/.test(ln.label)){let ki=ln.label.split("."),an=+ki[ki.length-1],Kn=null!==(dt=xn[0].text)&&void 0!==dt?dt:"",_i=null!==(mt=qi.get(Kn))&&void 0!==mt?mt:-1;if(_i++,qi.set(Kn,_i),0==an){Ue++;let ho=Kn+"=>"+_i+"-0",po=[];po.push(...xn),po[0]={lineIdx:xn[0].lineIdx,s:0,b:0,text:ho},ye.push({label:Ue,parts:po,answers:[],isGroup:!0});continue}let t=fe?fe.label:0,Gn=0;for(let ho=0;ho<an;ho++){Gn++;let po=Kn+"=>"+_i+"-"+ho,Pi=[];Pi.push(...xn),Pi[0]={lineIdx:xn[0].lineIdx,s:0,b:0,text:po};let Ke={label:t+Gn,olabel:fe?null===(ft=fe.olabel)||void 0===ft?void 0:ft.replace(/\d+/,t+Gn+""):this.DEF_QUEST_NAME+(t+Gn)+".",answers:[],parts:Pi};mn.set(Ke.label,Ke),ye.push(Ke),fe=Ke}}else if(ln.label&&/\.Q\d+(,Q\d+)*$/.test(ln.label)){let an=ln.label.split(".").pop(),Kn=null!==(yt=an?.split(",").length)&&void 0!==yt?yt:0;for(let _i=0;_i<Kn;_i++){let t={lineIdx:xn[0].lineIdx,s:0,b:0,text:xn[0].text+"=>0-"+_i},Gn=fe?fe.label:0,ho={label:Gn+1,olabel:fe?null===(St=fe.olabel)||void 0===St?void 0:St.replace(/\d+/,Gn+1+""):this.DEF_QUEST_NAME+(Gn+1)+".",answers:[],parts:[t]};mn.set(ho.label,ho),ye.push(ho),fe=ho}}ln.type==w.HuongDanParser.TYPE_NAME&&fe&&(xn.splice(0,1),pi&&pi.type==C.QuestionParser.TYPE_NAME&&pi.label&&!mn.has(+pi.label)||!pi||pi.type==A.SectionParser.TYPE_NAME?"main"==Ye&&(fe.help=xn):"main"==Ye&&(Ye="info",Yn=null!==($t=ln.lineIdx)&&void 0!==$t?$t:0),Yn>0&&0==Si&&(Si=null!==(he=ln.lineIdx)&&void 0!==he?he:0)),(ln.type==m.HetParser.TYPE_NAME||ln.type==O.DapAnParser.TYPE_NAME)&&(Ye="info",Yn=null!==(xe=ln.lineIdx)&&void 0!==xe?xe:0),ln.type==$.DapAnChiTietParser.TYPE_NAME&&ri&&bn.push(ln),ln.type!=$.DapAnChiTietParser.TYPE_NAME&&bn.length>0&&(ri=!1)}let to=new $.DapAnChiTietParser,Tl=to.getAnsMC(j,bn),Mr=new Map;if(Yn>0){let Mn=Si>0?j.slice(Yn,Si):j.slice(Yn);Mr=to.getAnsStr(Mn)}for(const Mn of ye){if(Mn.isGroup)continue;let ln=null!==(tn=Tl.get(Mn.label))&&void 0!==tn?tn:"",pi=null!==(Ce=Mr.get(Mn.label))&&void 0!==Ce?Ce:"",xn="";if(Mn.help&&(xn=null!==(We=to.getAnsFromHelp(Mn.help,j))&&void 0!==We?We:""),Mn.answers.length>0){if(0==Mn.answers.filter(an=>an.isCorrect).length){let an=ln;""==an.trim()&&(an=xn),""==an.trim()&&(an=pi);for(const Kn of Mn.answers)/^[A-H,\s]+$/.test(an)&&an.indexOf(Kn.label)>=0&&(Kn.isCorrect=!0)}}else Mn.strAns=pi}return ye}cleanRes(j){for(const V of j){for(let tt=V.parts.length-1;tt>=0;tt--)""==V.parts[tt].text&&V.parts.splice(tt,1);for(const tt of V.answers)for(let it=tt.parts.length-1;it>=0;it--)""==tt.parts[it].text&&tt.parts.splice(it,1);if(V.help)for(let tt=V.help.length-1;tt>=0;tt--)""==V.help[tt].text&&V.help.splice(tt,1)}}getPartInfo(j,V,tt){var it,dt;let mt=null!==(it=V.lineIdx)&&void 0!==it?it:0,ft=null!==(dt=tt?.lineIdx)&&void 0!==dt?dt:j.length-1;if(mt==ft)return tt?[{lineIdx:mt,b:V.pos[0],s:V.pos[1],e:tt?.pos[0]}]:[{lineIdx:mt,b:V.pos[0],s:V.pos[1]}];{let yt=[];yt.push({lineIdx:mt,b:V.pos[0],s:V.pos[1]});for(let St=mt+1;St<ft;St++)yt.push({lineIdx:St,b:0,s:0});if(tt){let St=tt?.pos[0];""!=j[ft].substring(0,St).replace(/\|/g,"").trim()&&yt.push({lineIdx:ft,b:0,s:0,e:St})}else yt.push({lineIdx:ft,b:0,s:0});return yt}}loadText(j,V){for(const tt of V)tt.text=j[tt.lineIdx].substring(tt.s,tt.e)}findItems(j,V){let tt=["remove:q-s-a => 1","remove:s-s => 0","remove:h-h => 0","remove:h-a => 0","rmdup:a-a => void","remove:q-a:\\d+\\-[^A] => 0","remove:s-a:.+\\-[^A] => 0","remove:a-a:A\\-[^B] => 0","remove:a-a:B\\-[^C] => 0","remove:a-a:C\\-[^D] => 0","remove:a-a:D\\-[^E] => 0","remove:a-a:E\\-[^F] => 0","same:a: => void","same:q:QUESTION_PATTERN,QUESTION_PATTERN2 => void"];V&&(tt=["remove:q-s-a => 1","remove:s-s => 0","remove:h-h => 0","remove:h-a => 0","remove:q-a:\\d+\\-[^A] => 0","remove:s-a:.+\\-[^A] => 0","remove:a-a:A\\-[^AB] => 0","remove:a-a:B\\-[^ABCD] => 0","remove:a-a:C\\-[^ACDE] => 0","remove:a-a:D\\-[^ADEF] => 0","remove:a-a:E\\-[^AEF] => 0","same:a: => void","same:q:QUESTION_PATTERN,QUESTION_PATTERN2 => void"]);let it=[new I.RemoveRule,new E.ModifyAnsRule,new F.SameKindRule,new L.RemoveDupRule],dt=[{parser:new $.DapAnChiTietParser,also:[2]},{parser:new A.SectionParser,from:[0],to:[1],also:[3]},{parser:new C.QuestionParser,from:[0],to:[1],also:[3]},{parser:new f.AnswerParser},{parser:new m.HetParser,to:[2]},{parser:new O.DapAnParser,to:[2],also:[6]},{parser:new w.HuongDanParser},{parser:new y.IncludeParser,from:[0],to:[1]}],mt=[{name:"start",expect:[1,2,7]},{name:"main",expect:[1,2,3,4,5,6,7]},{name:"info",expect:[0,1,2,6]}],ft=mt[0],yt=[],St=0;for(const xe of j)if(""!=xe){for(const tn of ft.expect){let Ce=dt[tn],We=Ce.parser.parse(xe);if(We.length>0){if(We.forEach(_e=>_e.lineIdx=St),yt.push(...We),Ce.parser.TYPE==w.HuongDanParser.TYPE_NAME){let _e=yt.filter(fe=>fe.type==C.QuestionParser.TYPE_NAME).length,mn=yt.filter(fe=>fe.type==w.HuongDanParser.TYPE_NAME).length,ye=yt.filter(fe=>fe.type==O.DapAnParser.TYPE_NAME).length;if(ft.name==mt[1].name&&_e>1&&0==mn){ft=mt[2];let fe=mt[2].expect.indexOf(6);fe>=0&&mt[2].expect.splice(fe,1)}else if(ft.name==mt[2].name){ye>0&&dt[0].parser.off();let fe=mt[2].expect.indexOf(6);fe>=0&&mt[2].expect.splice(fe,1)}}if(Ce.to){let _e=0;for(const mn of Ce.to)(Ce.from&&mt[Ce.from[_e]]==ft||!Ce.from)&&(ft=mt[mn]),_e++}if(Ce.also)for(const _e of Ce.also){let ye=yt[yt.length-1].pos[1],fe=dt[_e].parser.parse(xe.substring(ye));fe.length>0&&(fe.forEach(Ue=>{Ue.lineIdx=St;for(let Ye=0;Ye<Ue.pos.length;Ye++)Ue.pos[Ye]=Ue.pos[Ye]+ye}),yt.push(...fe))}break}}St++}else St++;let $t=[];for(const xe of tt)for(const tn of it){let Ce=tn.load(xe);if(Ce){$t.push(Ce);break}}let he=0;for(;he<yt.length;){for(const xe of $t){let tn=yt.length;if(xe.run(yt,he)){let Ce=tn-yt.length;Ce>0&&(he-=Ce+1);break}}he++}return yt}}},37562:(Zt,K)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.EditorApiService=void 0,K.EditorApiService=class M{}},99230:(Zt,K,M)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.ExamIntellisense=void 0;const D=M(95970),f=M(38469),$=M(50437),O=M(97525),m=M(30091),w=M(42167),y=M(36801);K.ExamIntellisense=class C{constructor(E){this.conf=E,this._lstQuest=[],this._lines=[],this.singleMode=!1,this.exParser=new D.ExamParser(E),this.apiService=null}setSingleMode(E){this.singleMode=E}setLines(E){this._lines=E}setApiService(E){this.apiService=E}parse(E){return this._lstQuest=this.exParser.parse(this._lines,E,!1),this._lstQuest}getAutofillValue(E,L,I){var F;if(0==this._lstQuest.length)return[];if(/^\[?\s*@/.test(this._lines[E].trim()))return[];let Q=[],j=this.getCurPos(E,L),V=j[0],tt=j[1],it=j[2],dt=this._lines[E>0?E-1:0];if(V&&V.parts.length>0&&null!==(F=V.parts[0].text)&&void 0!==F&&F.trim().startsWith("[@"),dt.startsWith("[@")||""==dt.trim())return[];if(tt&&V){let mt="ABCDEFGHIJKLMN",ft=mt.indexOf(tt.label),yt=mt[ft+1]+tt.olabel+" ",St=tt.label+tt.olabel+" ";if(!this.singleMode&&this._lines[tt.parts[0].lineIdx].trim()==St.trim()&&tt.parts[0].lineIdx!=E){let $t=V.parts[0],xe=this._lines[$t.lineIdx].substring($t.b,$t.s).replace(/\d+/,V.label+1+"")+" ";return Q.push(`${tt.parts[0].lineIdx}|0|${St.length}|`),Q.push(`${E}|${L}|${L}|${xe}`),Q}if(tt.label<"D"&&("enter"!=I||E>0&&""!=this._lines[E-1].trim()&&tt.parts[0].lineIdx!=E))return Q.push(`${E}|${L}|${L}|${yt}`),Q;if(!this.singleMode&&tt.label>="D"&&tt.parts[0].lineIdx!=E&&"enter"==I&&E==this._lines.length-1){let $t=V.parts[0],xe=this._lines[$t.lineIdx].substring($t.b,$t.s).replace(/\d+/,V.label+1+"")+" ";return Q.push(`${E}|${L}|${L}|\n${xe}`),Q}}if(!tt&&!it&&V&&"enter"==I&&""==this._lines[E].trim()&&E>0&&""!=this._lines[E-1].trim()){let mt=V.parts[0],ft=this._lines[mt.lineIdx].substring(mt.s).trim();if(this.singleMode||""!=ft)if(0==V.answers.length)Q.push(`${E}|${L}|${L}|A. `);else if(!this.singleMode){let yt=V.parts[0],$t=this._lines[yt.lineIdx].substring(yt.b,yt.s).replace(/\d+/,V.label+1+"")+" ";Q.push(`${E}|${L}|${L}|${$t}`)}return Q}return Q}getSuggestions(E,L,I,F){return new Promise(N=>{var Q,j;let V=null!==(Q=F?.substring(0,L))&&void 0!==Q?Q:"",tt=this.singleMode?[new f.AnsSugg,new O.EndSugg,new $.ChooseSugg]:[new m.IncludeSugg(this.apiService,N),new w.QuestSugg,new f.AnsSugg,new y.SectionSugg,new O.EndSugg,new $.ChooseSugg],it=[],dt=this.getCurPos(E,L),mt=dt[0],ft=dt[1],$t=mt?{type:dt[2]?"h":ft?"a":"q",quest:mt,ansLabel:ft?ft.label:void 0,secLabel:mt.group?null===(j=this._lstQuest.filter(he=>he.isGroup).pop())||void 0===j?void 0:j.parts[0].text:void 0,lineIdx:E,col:L}:void 0;for(let he of tt){let xe=he.run(V,I,$t);if(1==xe.length&&"-1"==xe[0])return;it.push(...xe)}N(it)})}getEditHint(){let L=0,I=[],F=!1;for(const N of this._lstQuest){if(N.isGroup)continue;let Q="",j="A".charCodeAt(0)-1,V=!1;for(const tt of N.answers){if(""==tt.olabel)break;if(Q+=tt.label,!V&&!"ABCDEFGHIJKLMN".startsWith(Q)&&(V=!0),j++,V){let it=tt.parts[0],dt="*"==this._lines[it.lineIdx].substring(it.b,it.b+1)?1:0;I.push(`${it.lineIdx}|${it.b+dt}|${it.b+dt+1}|${String.fromCharCode(j)}`)}}if(!F&&N.label-L<=0&&L>0&&(F=!0),F){let tt=N.parts[0],dt=this._lines[tt.lineIdx].substring(tt.b,tt.s).replace(/\d+/,L+1+"");I.push(`${tt.lineIdx}|${tt.b}|${tt.s}|${dt}`),L++}else L=N.label}return I}getCurPos(E,L){var I,F;let N=!1,Q=null,j=null,V=!1,tt=!1;for(const it of this._lstQuest)if(!it.isGroup){for(const dt of it.parts)if(dt.lineIdx==E){N=!0,Q=it,j=null,it.parts.length>0&&null!==(I=it.parts[0].text)&&void 0!==I&&I.trim().startsWith("[@")&&(tt=!0,N=!1);break}if(tt&&it.parts.length>0&&(null===(F=it.parts[0].text)||void 0===F||!F.trim().startsWith("[@")))break;for(const dt of it.answers)for(const mt of dt.parts)if(mt.lineIdx==E&&mt.s<=L&&(!mt.e||mt.e>=L)){N=!0,Q=it,j=dt;break}if(N)break;if(it.help)for(const dt of it.help)if(dt.lineIdx==E&&dt.s<=L&&(!dt.e||dt.e>=L)){N=!0,Q=it,j=null,V=!0;break}if(N)break}return[Q,j,V]}}},38469:(Zt,K,M)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.AnsSugg=void 0;const D=M(99934);K.AnsSugg=class f extends D.Sugg{run(O,m,w){if(!w||"h"==w.type||/^\[?\s*@/.test(O))return[];let y=w.ansLabel?String.fromCharCode(w.ansLabel.charCodeAt(0)+1)+".":"A.";return[y+"|"+y+" "]}}},50437:(Zt,K,M)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.ChooseSugg=void 0;const D=M(99934);K.ChooseSugg=class f extends D.Sugg{run(O,m,w){if(O!=m||!w)return[];let y=[];if("h"==w.type&&w.quest)for(let C of w.quest.answers)y.push(`azt_lang_sugg_choose ${C.label}|azt_lang_sugg_choose ${C.label}`);return y}}},97525:(Zt,K,M)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.EndSugg=void 0;const D=M(99934);K.EndSugg=class f extends D.Sugg{run(O,m){return O!=m?[]:["azt_lang_sugg_help_unsign|azt_lang_sugg_help\n","azt_lang_sugg_help|azt_lang_sugg_help\n","azt_lang_sugg_ans_table_unsign|azt_lang_sugg_ans_table_upper\n","azt_lang_sugg_ans_table|azt_lang_sugg_ans_table_upper\n","azt_lang_sugg_the_end_short_unsign|azt_lang_sugg_the_end\n","azt_lang_sugg_the_end_short|azt_lang_sugg_the_end\n","azt_lang_sugg_instruction_unsign|azt_lang_sugg_instruction\n","azt_lang_sugg_instruction|azt_lang_sugg_instruction\n"]}}},30091:(Zt,K,M)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.IncludeSugg=void 0;const D=M(58343),f=M(99934);K.IncludeSugg=class $ extends f.Sugg{constructor(m,w){super(),this.apiService=m,this.resolve=w}run(m){let w=m;if(w.startsWith("@[")&&(w=w.substring(1)),/^\[?\s*@/.test(w)&&null!=this.apiService){let y=w.replace("]..","].").split("].").map(tt=>tt.replace("]","").replace("[","").replace("@","").trim()),C=y[y.length-1],A=0,E=!0,L="azt_lang_sugg_random x azt_lang_sugg_question|[azt_lang_sugg_random ${1:2} azt_lang_sugg_question]|snippet",I="azt_lang_sugg_get_all|[ALL]|snippet",F=["azt_lang_sugg_filter: azt_lang_sugg_level azt_lang_sugg_level_easy|[@F:azt_lang_tag_NB].|snippet","azt_lang_sugg_filter: azt_lang_sugg_level azt_lang_sugg_level_medium|[@F:azt_lang_tag_TH].|snippet","azt_lang_sugg_filter: azt_lang_sugg_level azt_lang_sugg_level_hard|[@F:azt_lang_tag_VD].|snippet","azt_lang_sugg_filter: azt_lang_sugg_level azt_lang_sugg_level_hardest|[@F:azt_lang_tag_VDC].|snippet","azt_lang_sugg_filter: azt_lang_sugg_type azt_lang_sugg_type_multiple_choice|[@F:azt_lang_tag_TN].|snippet","azt_lang_sugg_filter: azt_lang_sugg_type azt_lang_sugg_type_fill_blank|[@F:azt_lang_tag_DT].|snippet","azt_lang_sugg_filter: azt_lang_sugg_type azt_lang_sugg_type_essay|[@F:azt_lang_tag_TL].|snippet"],N="",Q="",V=w.matchAll(/\[@C(\d+)::user\-[^\]]*\]/g);for(;;){let tt=V.next();if(tt.done)break;Q="user_"+tt.value[1]}if(y.length>1){C.endsWith(",")&&/^([CTGQH][\-\d]+|F):/.test(C)&&(N=C.substring(0,1),C="");let tt=y[y.length-2];if(tt.startsWith("F:"))return this.resolve([L]),["-1"];if(tt.indexOf(",")>=0){let it=[];return""==N&&it.push(L),it.push(...F),this.resolve(it),["-1"]}if(C.trim().length>0&&!/^[CTGQH][\-\d]+:/.test(C))return this.resolve([]),["-1"];if(!/^[CTGQH][\-\d]+:/.test(tt))return this.resolve([]),["-1"];if(/^C[\-\d]+:/.test(tt)&&(A=+tt.split(":")[0].trim().substring(1),/^C[\-\d]+::user\-/.test(tt)&&(Q="user")),/^T[\-\d]+:/.test(tt)&&(A=+tt.split(":")[0].trim().substring(1),E=!1),/^G[\-\d]+:/.test(tt)){let it=tt.split(":")[1].split("-")[0];return this.resolve(["azt_lang_sugg_get_group_title|[azt_lang_sugg_get_title]|snippet",`azt_lang_sugg_get_all|[azt_lang_sugg_get_title]\n${w}[azt_lang_sugg_get_all ${it} azt_lang_sugg_question]|snippet`,`azt_lang_sugg_random x azt_lang_sugg_question|${"[azt_lang_sugg_get_title]\n"+w+"[azt_lang_sugg_random ${1:2} azt_lang_sugg_question]"}|snippet`]),["-1"]}if(/^Q[\-\d]+:/.test(tt)||/^Q[\-\d]+:/.test(C))return this.resolve([]),["-1"];if(/^H[\-\d]+:/.test(tt)||/^Q[\-\d]+:/.test(C))return this.resolve([]),["-1"]}if(E)return"F"==N?(this.resolve(F),["-1"]):(this.apiService.searchRes(Q,A).then(tt=>{let it="";-1==A&&(it=":user-"),(0==A||-1==A)&&(L="");let dt=tt.map(mt=>{let ft=mt.name;return ft=ft.replaceAll(/[\[\],\.\-]+/g,""),`${ft}|[@${("cat"==mt.type?"C":"T")+mt.id}:${it}${ft}].|${"cat"==mt.type?"folder":"file"}`});""!=L&&""==N&&(dt.push(L),dt.push(...F)),this.resolve(dt)}),["-1"]);if(w.endsWith(".")||w.endsWith(",")){let tt=Math.abs(A);return this.apiService.getQuestion(tt).then(it=>{let dt=it.map(yt=>{let St=("group"==yt.type?"azt_lang_sugg_group_cc ":"azt_lang_sugg_question_cc ")+yt.label,$t=("group"==yt.type?"G":"Q")+yt.id,he="group"==yt.type?".":"",xe=yt.content,tn="group"==yt.type?"class":"function",Ce="group"==yt.type?it.filter(ye=>ye.groupId==yt.id).length+"-":"",We="group"!=yt.type&&yt.groupId?"G"+D.Utils.zeroPad(3,yt.groupId):"G000";return"group"==yt.type&&(We="G"+D.Utils.zeroPad(3,yt.id)),{name:St,code:$t,groupQnum:Ce,posfix:he,icon:tn,sort:`${We}-${"group"==yt.type?"G"+D.Utils.zeroPad(3,yt.id):"Q"+D.Utils.zeroPad(10,yt.id)}`,doc:xe}});dt.sort((yt,St)=>yt.sort>St.sort?1:-1);let mt=dt.map(yt=>`${yt.name}|[@${yt.code}:${yt.groupQnum}${yt.name}]${yt.posfix}|${yt.icon}|${yt.sort}|${yt.doc}`),ft=[];if(""!=L){""==N&&(ft.push(L),ft.push(...F));let yt=I.split("|");yt[1]=dt.map((St,$t)=>(0==$t?"":w)+`[@${St.code}:${St.groupQnum}${St.name}]`+(St.code.startsWith("G")?".[azt_lang_sugg_get_title]":"")).join("\n"),ft.push(yt.join("|"))}ft.push(...mt),"F"==N&&(ft=F),this.resolve(ft)}),["-1"]}return this.resolve([]),["-1"]}return[]}}},42167:(Zt,K,M)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.QuestSugg=void 0;const D=M(58343),f=M(99934);K.QuestSugg=class $ extends f.Sugg{run(m,w,y){var C;if(m!=w)return[];if(!y)return["azt_lang_sugg_question_cc 1. |azt_lang_sugg_question_cc 1. ","azt_lang_sugg_question_cc_unsign 1. |azt_lang_sugg_question_cc 1. ","Question 1. |Question 1. "];let A=null!==(C=y.quest.olabel)&&void 0!==C?C:"azt_lang_sugg_question_cc 1.",E=+D.Utils.getNumberFromStr(A),L=A.replace(/\d+/,E+1+"");return L=y.quest.olabel?D.Utils.capitalizeFirstLetter(L):L,[D.Utils.removeAccents(L)+"|"+L+" ",L+"|"+L+" "]}}},36801:(Zt,K,M)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.SectionSugg=K.toArabic=K.isRoman=K.toRoman=K.BaseNumbers=K.RomanNumber=void 0;const D=M(58343),f=M(99934);class ${constructor(A,E){this.baseUnits=0,this.thousands=0,this.num=A,this.str=E}}function O(C){let A,E;if(C<=0||C>3999)return"";{A=0;let L="";for(C=Math.floor(C);C>0;)E=K.BaseNumbers[A],0===Math.floor(C/E.num)?++A:(L+=E.str,C-=E.num);return L}}function m(C){return/^M{0,4}(CM|CD|D?C{0,3})(XC|XL|L?X{0,3})(IX|IV|V?I{0,3})$/.test(C)}function w(C){let A=C.toUpperCase();if(!m(A))return null;let E=0,L=0;for(;A.length>0&&L<K.BaseNumbers.length;){const I=K.BaseNumbers[L];A.startsWith(I.str)?(E+=I.num,A=A.substring(I.str.length)):L++}return A.length>0?null:E}K.RomanNumber=$,K.BaseNumbers=[new $(1e3,"M"),new $(900,"CM"),new $(500,"D"),new $(400,"CD"),new $(100,"C"),new $(90,"XC"),new $(50,"L"),new $(40,"XL"),new $(10,"X"),new $(9,"IX"),new $(5,"V"),new $(4,"IV"),new $(1,"I")],K.toRoman=O,K.isRoman=m,K.toArabic=w,K.SectionSugg=class y extends f.Sugg{run(A,E,L){var I,F;if(A!=E)return[];if(!L)return["azt_lang_sugg_part_cc 1. |azt_lang_sugg_part_cc 1. ","azt_lang_sugg_part_cc_unsign 1. |azt_lang_sugg_part_cc 1. ","Part 1. |Part 1. "];if("h"==L.type||!L.secLabel)return[];let N="";if(/^(ph\u1ea7n|part)\s*\d+\./.test(L.secLabel.toLowerCase())){let Q=L.secLabel.split("."),j=+D.Utils.getNumberFromStr(Q[0]);N=Q[0].replace(/\d+/,j+1+".")}else if(/^(ph\u1ea7n|part)\s+[ivx]+\./.test(L.secLabel.toLowerCase())){let j=L.secLabel.split(".")[0].split(" "),tt=O((null!==(I=w(j.pop()))&&void 0!==I?I:0)+1);j.push(tt),N=j.join(" ")+"."}else/^[ivx]+\./.test(L.secLabel.toLowerCase())&&(N=O((null!==(F=w(L.secLabel.split(".")[0]))&&void 0!==F?F:0)+1)+".");return[D.Utils.removeAccents(N)+"|"+N+" ",N+"|"+N+" "]}}},99934:(Zt,K)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.Sugg=void 0,K.Sugg=class M{constructor(){this.lang="vi"}setLang(f){this.lang=f}}},80581:function(Zt,K,M){"use strict";var D=this&&this.__createBinding||(Object.create?function($,O,m,w){void 0===w&&(w=m);var y=Object.getOwnPropertyDescriptor(O,m);(!y||("get"in y?!O.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return O[m]}}),Object.defineProperty($,w,y)}:function($,O,m,w){void 0===w&&(w=m),$[w]=O[m]}),f=this&&this.__exportStar||function($,O){for(var m in $)"default"!==m&&!Object.prototype.hasOwnProperty.call(O,m)&&D(O,$,m)};Object.defineProperty(K,"__esModule",{value:!0}),f(M(99230),K),f(M(37562),K),f(M(95970),K),f(M(5181),K),f(M(58343),K)},44103:(Zt,K,M)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.CanvasUtil=void 0;const D=M(58343);class f{static drawPoint(O,m,w){null!=O&&(O.fillStyle=m,O.beginPath(),O.arc(w.left,w.top,5,0,2*Math.PI),O.fill())}static drawBox(O,m,w,y){null!=O&&(y?(O.fillStyle=m,O.beginPath(),O.rect(w.left,w.top,w.width,w.heigh),O.fill()):(O.strokeStyle=m,O.beginPath(),O.rect(w.left,w.top,w.width,w.heigh),O.stroke()))}static drawBox2(O,m,w,y,C){null!=O&&(O.strokeStyle=m,O.beginPath(),O.rect(C[4],C[5],w,y),O.stroke())}static drawLine(O,m,w,y){null!=O&&(O.strokeStyle=m,O.beginPath(),O.moveTo(w,y),O.lineTo(O.canvas.width-10,y),O.stroke())}static drawText(O,m,w,y){null!=O&&(O.font="11px Arial",O.fillStyle=m,O.fillText(y,w[4],w[5]))}static isLineIntersec(O,m){let w=O.transform[5]<=m.transform[5]&&m.transform[5]<=O.transform[5]+O.height,y=m.transform[5]<=O.transform[5]&&O.transform[5]<=m.transform[5]+m.height,C=O.transform[4]<=m.transform[4]&&m.transform[4]<=O.transform[4]+O.width+D.CONST.INTERSEC_MARGIN,A=m.transform[4]<=O.transform[4]&&O.transform[4]<=m.transform[4]+m.width+D.CONST.INTERSEC_MARGIN,E=this.isSameLine(O,m);return(w||y)&&(C||A)&&!E}static isLineVIntersec(O,m){return(O.transform[5]<=m.transform[5]&&m.transform[5]<=O.transform[5]+O.height||m.transform[5]<=O.transform[5]&&O.transform[5]<=m.transform[5]+m.height)&&(O.transform[4]<=m.transform[4]&&m.transform[4]<=O.transform[4]+O.width+D.CONST.INTERSEC_MARGIN||m.transform[4]<=O.transform[4]&&O.transform[4]<=m.transform[4]+m.width+D.CONST.INTERSEC_MARGIN)&&Math.abs(m.transform[4]-O.transform[4])>D.CONST.INTERSEC_MARGIN/2}static isSameLine(O,m){return Math.abs(O.transform[5]+O.height-(m.transform[5]+m.height))<=D.CONST.LINE_MAGIN}static isObjIntersec(O,m){return O.transform[5]<=m.transform[5]&&m.transform[5]<=O.transform[5]+O.height||m.transform[5]<=O.transform[5]&&O.transform[5]<=m.transform[5]+m.height}static isObjFullIntersec(O,m){return(O.transform[5]<=m.transform[5]&&m.transform[5]<=O.transform[5]+O.height||m.transform[5]<=O.transform[5]&&O.transform[5]<=m.transform[5]+m.height)&&(O.transform[4]<=m.transform[4]&&m.transform[4]<=O.transform[4]+O.width||m.transform[4]<=O.transform[4]&&O.transform[4]<=m.transform[4]+m.width)}static isFirstLineOfPage(O,m){return!(O<0||O>=m.length||0!=O&&m[O-1].pageIndex==m[O].pageIndex)}static isLastLineOfPage(O,m){return!(O<0||O>=m.length||O!=m.length-1&&m[O+1].pageIndex==m[O].pageIndex)}static getTopLine(O,m,w){let y=w[m],C=[[D.CONST.STEP_SIZE,D.CONST.OVERLAP],[1,D.CONST.OVERLAP],[1,.3]];for(const A of C){let E=A[0],L=A[1],I=y.transform[5],F=0,N=3*E;if(!f.isFirstLineOfPage(m,w)){let j=f.isSameLine(w[m-1],y);f.isLineIntersec(w[m-1],y)?(I=w[m-1].transform[5]+w[m-1].height,F=w[m-1].transform[5],w[m-1].transform[4]>w[m].transform[4]+2*D.CONST.MARGIN_LEFT?F-=2*D.CONST.MARGIN_LEFT:F+=w[m-1].height*L,E=1,N=w[m].transform[5]+w[m].height/2-I):(F=j&&m-2>=0?w[m-2].transform[5]+w[m-2].height*L:w[m-1].transform[5]+w[m-1].height*L,j&&f.isFirstLineOfPage(m-1,w)&&(F=0))}if(!D.CONST.ENABLE_IMAGE_PROCESS)return[I,0];let Q=!1;for(;I>F;){if(!f.hasColor(O,y.transform[4],I,y.width,E))return[I,0];Q||(Q=!0,I+=N),I-=E}}return[y.transform[5],1]}static arrContains(O,m){for(const w of m)if(w==O)return!0;return!1}static getBottomLine(O,m,w){let y=w[m],C=[[D.CONST.STEP_SIZE,D.CONST.OVERLAP],[1,D.CONST.OVERLAP],[1,.3]];for(const A of C){let E=A[0],L=A[1],I=y.transform[5]+y.height,F=9999,N=3*E;if(!f.isLastLineOfPage(m,w)){let j=f.isSameLine(w[m+1],y);f.isLineIntersec(w[m+1],y)?(I=w[m+1].transform[5],F=w[m+1].transform[5]+w[m+1].height,w[m+1].transform[4]>w[m].transform[4]+2*D.CONST.MARGIN_LEFT?F+=2*D.CONST.MARGIN_LEFT:F-=w[m+1].height*L,N=w[m].transform[5]+w[m].height/2-I):(F=j&&m+2<w.length?w[m+2].transform[5]+w[m+2].height-w[m+2].height*L:w[m+1].transform[5]+w[m+1].height-w[m+1].height*L,j&&f.isLastLineOfPage(m+1,w)&&(F=9999));let V=w[m+1].top;if(V&&I>=V&&!j)return[V,0]}if(!D.CONST.ENABLE_IMAGE_PROCESS)return[I,0];let Q=!1;for(;I<F;){if(!f.hasColor(O,y.transform[4],I,y.width,E))return[I,0];Q||(Q=!0,I-=N),I+=E}}return[y.transform[5]+y.height,1]}static hasColor(O,m,w,y,C){let A=Math.round(m),E=Math.round(A+y),L=Math.round(w),I=Math.round(L+C);for(let V=L;V<I;V++)for(let tt=A;tt<E;tt++){let it=4*(V*O.width+tt);if((O.data[it]+O.data[it+1]+O.data[it+2])/3<150)return!0}return!1}static calIndexPos2(O,m,w,y,C){let A=[],E=0,L=0,I=0,F=0,N=0,Q=0,j=!0,V=!0;for(const mt of O){V=this.isObjIntersec(O[0],mt),F=mt.transform[4],C||(E+=F-I>D.CONST.SPLIT_MARGIN&&""!=mt.str.trim()||N!=mt.transform[5]?1:0),j=F+2*D.CONST.MARGIN_LEFT>=I;let ft=mt.transform[4]+mt.width;if(V&&(I=ft),ft>L&&V&&(L=ft),E+=mt.str.length,E>y&&j&&V){mt.transform.forEach(he=>{A.push(he)}),A[3]=mt.height,A[2]=Q,A[1]=mt.str.length-E+y;let yt=mt.str.substr(0,mt.str.length-E+y+1);if(yt.length==mt.str.length){A[4]=A[4]+mt.width;break}var it=m[mt.fontName].fontFamily,dt=Math.hypot(mt.transform[2],mt.transform[3]);w.font=`${dt}px ${it}`;let St=w.measureText(yt).width,$t=w.measureText(mt.str).width;A[4]=A[4]+mt.width*St/$t;break}V&&(N=mt.transform[5]),Q++}return 0==A.length&&(A=[0,O[O.length-1].length-1,O.length-1,O[0].height,L,O[0].transform[5]]),A}static calIndexPos(O,m,w,y,C){let A=[],E=0,L=0,I=0,F=0,N=0,Q=0,j=!0,V=!0,tt="";for(const ft of O){V=this.isObjIntersec(O[0],ft),F=ft.transform[4],C||(E+=F-I>D.CONST.SPLIT_MARGIN&&""!=ft.str.trim()||N!=ft.transform[5]?1:0,tt+=(F-I>D.CONST.SPLIT_MARGIN&&""!=ft.str.trim()||N!=ft.transform[5]?"|":"")+ft.str),j=F+2*D.CONST.MARGIN_LEFT>=I;let yt=ft.transform[4]+ft.width;if(V&&(I=yt),yt>L&&V&&(L=yt),E+=ft.str.length,E>y&&j&&V){let St=ft.str.substr(0,ft.str.length-E+y);var dt=m[ft.fontName].fontFamily,mt=Math.hypot(ft.transform[2],ft.transform[3]);w.font=`${mt}px ${dt}`;let $t=w.measureText(St).width,he=w.measureText(ft.str).width;ft.transform.forEach(xe=>{A.push(xe)}),A[4]=A[4]+ft.width*$t/he,A[3]=ft.height,A[2]=Q,A[1]=ft.str.length-E+y;break}V&&(N=ft.transform[5]),Q++}return 0==A.length&&(A=[0,O[O.length-1].length-1,O.length-1,O[0].height,L,O[0].transform[5]]),A}static getTextBottom(O,m,w,y){let C=Math.atan2(O[1],O[0]);m.vertical&&(C+=Math.PI/2);const A=Math.hypot(O[2],O[3]),E=A*f.getAscent(m.fontFamily,w,y);let L=O[5],I=0;I=0===C?E:E*Math.cos(C);let F=0*I;return L=O[5]-I-F,[L,A+F]}static getAscent(O,m,w){const A=w.get(O);if(A)return A;m.save(),m.font=`30px ${O}`;const E=m.measureText("");let L=E.fontBoundingBoxAscent,I=Math.abs(E.fontBoundingBoxDescent);if(L){m.restore();const N=L/(L+I);return w.set(O,N),N}m.strokeStyle="red",m.clearRect(0,0,30,30),m.strokeText("g",0,0);let F=m.getImageData(0,0,30,30).data;I=0;for(let N=F.length-1-3;N>=0;N-=4)if(F[N]>0){I=Math.ceil(N/4/30);break}m.clearRect(0,0,30,30),m.strokeText("A",0,30),F=m.getImageData(0,0,30,30).data,L=0;for(let N=0,Q=F.length;N<Q;N+=4)if(F[N]>0){L=30-Math.floor(N/4/30);break}if(m.restore(),L){const N=L/(L+I);return w.set(O,N),N}return w.set(O,.8),.8}static getMaxLineRight(O,m){let w=0;for(const y of m)if(y.pageIndex==O||-1==O){let C=y.transform[4]+y.width;C>w&&(w=C)}return w}static getMinLineLeft(O,m){let w=99999;for(const y of m)if(y.pageIndex==O||-1==O){let C=y.transform[4];C<w&&(w=C)}return w}}K.CanvasUtil=f},85492:(Zt,K,M)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.PdfUtils=void 0;const D=M(58343),f=M(44103);class ${constructor(){let m=document.createElement("canvas");this.tempCanvas=m.getContext("2d"),this.ascentCache=new Map,this.imageCache=[]}loadPdf(m,w){let C={url:URL.createObjectURL(m),cMapPacked:!0,cMapUrl:"/assets/js/pdf-js-v2/cmaps/",disableAutoFetch:!1,disableFontFace:!1,disableRange:!1,disableStream:!1,docBaseUrl:"",enableXfa:!0,fontExtraProperties:!1,isEvalSupported:!0,maxImageSize:-1,pdfBug:!1,standardFontDataUrl:"/assets/js/pdf-js-v2/standard_fonts/",verbosity:1};const A=pdfjsLib.getDocument(C);let E=[],L=this;A.promise.then(function(I){L.optionalContentConfigPromise=I.getOptionalContentConfig();let F=I._pdfInfo.numPages;for(let N=1;N<=F;N++)I.getPage(N).then(Q=>{E.push(Q),E.length==F&&(E=E.sort((j,V)=>j._pageIndex>V._pageIndex?1:-1),w(E))})},function(I){console.error(I)})}getImages(m,w){let y=[];if("function"!=typeof m.objs.getAll)return y;let C=m.objs.getAll(),A=Object.keys(C);for(const E of A)C[E].data.pageIndex=w,y.push(C[E].data);return y}isImageObj(m){return-999==m.transform[0]&&"img"==m.str}getLines(m,w,y,C){let A=C.scale,E=m.items.length;for(let Q=0;Q<E;Q++){let j=m.items[Q];this.isImageObj(j)||(j.transform=$.transform(C.transform,j.transform),j.width=j.width*A),j.transform[4]+j.width>y.canvas.width&&(j.width=y.canvas.width-j.transform[4]-20);let V=this.isImageObj(j)?[j.transform[5],j.height]:f.CanvasUtil.getTextBottom(j.transform,m.styles[j.fontName],this.tempCanvas,this.ascentCache);j.height=V[1];let tt=Math.ceil(V[0]);j.transform[5]=tt}m.items.sort((Q,j)=>1e6*Math.floor(Q.transform[5])-Q.transform[4]<1e6*Math.floor(j.transform[5])-j.transform[4]?-1:1);let F,L=[],I=0;this.imageCache[w]?F=this.imageCache[w]:(F=y.getImageData(0,0,y.canvas.width,y.canvas.height),this.imageCache[w]=F);let N={strLine:"",transform:[],textObjs:[],pageIndex:w,width:0,height:0,txtLength:0};for(let Q=0;Q<E;Q++){let j=m.items[Q];if(this.isImageObj(j))for(let tt=0;tt<E;tt++){let it=m.items[tt];if(!this.isImageObj(it)&&Q!=tt&&f.CanvasUtil.isObjIntersec(j,it)&&""!=it.str.trim()&&!/^[\sA-K\.\|]+$/g.test(it.str)){j.str="";break}}if(f.CanvasUtil.arrContains(j.str.trim(),D.CONST.SKIP_CHAR))continue;let V=Math.floor(j.transform[5]+j.height);0!=I?I-V>=-D.CONST.LINE_MAGIN?this.addTxtToLine(N,j):0!=N.textObjs.length&&(L.push(N),N=this.newLine(j,w),I=Math.floor(N.transform[5]+N.height)):(N=this.newLine(j,w),I=Math.floor(N.transform[5]+N.height))}L.push(N);for(const Q of L)this.calculateSize(Q);this.findAndMergeAnsQuestBlock(L,"ans"),this.findAndMergeAnsQuestBlock(L,"quest"),this.findAndMergeBlock(L),this.mergeIntersecLine(L),this.mergeSmallLine(L,F);for(const Q of L)this.calculateSize(Q);return L}mergeIntersecLine(m){let w=0;for(;w<m.length;){let y=m[w];w++,w<m.length&&f.CanvasUtil.isLineVIntersec(y,m[w])&&(this.mergeLine(y,m[w]),m.splice(w,1),w--)}}findAndSplitQuestAnsLine(m,w,y){let C=0,A=[],E=D.CONST.BREAK_LINE_PATTERN.join("|");for(const L of m){L.top=void 0,L.bottom=void 0;let I=L.strLine.replace(/\|/g,"").trim().match(E);if(null!=I&&I.length>0){let F=/[\s\|\.]+[B\u0412][\s\|]*\./g,N=L.strLine.trim().toUpperCase().match(F);if(null!=N&&N.length>0){let Q=I[0].toUpperCase().indexOf("A");A.push({lineIndex:C,strIndex:Q})}}C++}for(let L=A.length-1;L>=0;L--){let I=A[L].lineIndex;this.splitLine(I,w[m[I].pageIndex],y[m[I].pageIndex],A[L].strIndex,m)}}mergeSmallLine(m,w){let y=0,C=1.2*D.CONST.LINE_SMALL_HEIGHT;for(;y<m.length;){let A=m[y];if(!A||!this.isSmallLine(A)){y++;continue}y-1>=0&&!m[y-1].bottom&&(m[y-1].bottom=f.CanvasUtil.getBottomLine(w,y-1,m)[0]),y+1<m.length&&!m[y+1].top&&(m[y+1].top=f.CanvasUtil.getTopLine(w,y+1,m)[0]);let E=y-1<0?-9999:this.getLineTop(A)-this.getLineBot(m[y-1]),L=y+1>=m.length?-9999:this.getLineTop(m[y+1])-this.getLineBot(A),I=y-1>=0&&m[y-1].transform[4]<=A.transform[4]&&A.transform[4]<=m[y-1].transform[4]+m[y-1].width,F=y+1<m.length&&m[y+1].transform[4]<=A.transform[4]&&A.transform[4]<=m[y+1].transform[4]+m[y+1].width;if(0==y&&L<=C&&F){this.mergeLine(m[y+1],A),m.splice(y,1),y--;continue}if(y==m.length-1&&E<=C&&I){this.mergeLine(m[y-1],A),m.splice(y,1),y--;continue}let N=-1;E>L&&F&&L<=C?N=y+1:E<=L&&I&&E<=C?N=y-1:E<=L&&F&&L<=C?N=y+1:E>L&&I&&E<=C&&(N=y-1),N>=0?(this.mergeLine(m[N],A),m.splice(y,1),y--):y++}}isSmallLine(m){return m.height<D.CONST.LINE_SMALL_HEIGHT}mergeLine(m,w){for(const y of w.textObjs)this.addTxtToLine(m,y)}findAndMergeAnsQuestBlock(m,w){let C=0;for(;C<m.length;){if("ans"==w&&this.isAnsLine(m[C])||"quest"==w&&this.isQuestLine(m[C])){let E=C,L=-1,I=1,F=[];for(;I<=10;){if(E=C+L*I,E<0){L=1,I=1;continue}if(E>=m.length)break;let N=this.isAnsLine(m[E]),Q=N||this.isQuestLine(m[E]),j="ans"==w&&N&&f.CanvasUtil.isSameLine(m[C],m[E]),V=!Q&&f.CanvasUtil.isLineIntersec(m[C],m[E])&&m[E].transform[4]>m[C].transform[4];if((j||V)&&F.push(E),I++,Q&&1==L)break;(I>10||Q)&&-1==L&&(L=1,I=1)}F.sort((N,Q)=>N<Q?1:-1);for(const N of F)for(const Q of m[N].textObjs)this.addTxtToLine(m[C],Q);for(const N of F)m.splice(N,1),N<C&&C--}C++}}findAndMergeBlock(m){let w=0;for(;w<m.length;){if(this.isAnsLine(m[w])||this.isQuestLine(m[w])){w++;continue}let C=w+1;for(;C<m.length&&m[w].pageIndex==m[C].pageIndex;){let A=this.isAnsLine(m[C])||this.isQuestLine(m[C]);if(f.CanvasUtil.isLineIntersec(m[w],m[C])&&!A||f.CanvasUtil.isSameLine(m[w],m[C])){for(const E of m[C].textObjs)this.addTxtToLine(m[w],E);m.splice(C,1),C=w}C++}w++}}isAnsLine(m){let y=m.strLine.trim().match(/[\s\|\.]+[AB\u0412CDEFGHIJK]\s*\./g);return null!=y&&y.length>0}isQuestLine(m){let w=D.CONST.QUESTION_PATTERN.join("|"),y=m.strLine.replace(/\|/g,"").toLowerCase().trim().match(w);return null!=y&&y.length>0}encodeLines(m,w){let y="",C=0;for(const A of w){if(A.height<D.CONST.LINE_SMALL_HEIGHT){C-1>=0&&!w[C-1].bottom&&(w[C-1].bottom=f.CanvasUtil.getBottomLine(m,C-1,w)[0]),C+1<w.length&&!w[C+1].top&&(w[C+1].top=f.CanvasUtil.getTopLine(m,C+1,w)[0]);let E=C-1<0?-9999:this.getLineTop(A)-this.getLineBot(w[C-1]),L=C+1>=w.length?-9999:this.getLineTop(w[C+1])-this.getLineBot(A),I=C-1>=0&&w[C-1].transform[4]<=A.transform[4]&&A.transform[4]+A.width<=w[C-1].transform[4]+w[C-1].width,F=C+1<w.length&&w[C+1].transform[4]<=A.transform[4]&&A.transform[4]+A.width<=w[C+1].transform[4]+w[C+1].width,N=1.2*D.CONST.LINE_SMALL_HEIGHT;Math.abs(E)>=N&&Math.abs(L)>=N?y+="L":y+=-9999==E?"3":-9999==L?"4":E>L&&F?"2":E<=L&&I?"1":E<=L&&F?"2":E>L&&I?"1":"L"}else y+="L";C++}return y}getLineTop(m){return m.top?m.top:m.transform[5]}getLineBot(m){return m.bottom?m.bottom:m.transform[5]+m.height}splitLine(m,w,y,C,A){let E=A[m],L=f.CanvasUtil.calIndexPos(E.textObjs,w,y,C,!0),I=this.newLine(E.textObjs[0],E.pageIndex),F=L[2],N=L[1],Q=E.textObjs[F],j=Q.transform,V={str:Q.str.substr(0,N),width:L[4]-j[4],height:Q.height,fontName:Q.fontName,transform:[j[0],j[1],j[2],j[3],j[4],j[5]]},tt={str:Q.str.substr(N),width:Q.width-V.width,height:Q.height,fontName:Q.fontName,transform:[j[0],j[1],j[2],j[3],L[4],j[5]]},it=E.textObjs;E.textObjs=[],I.textObjs=[];for(let dt=0;dt<it.length;dt++)dt<F?this.addTxtToLine(E,it[dt]):dt>F?this.addTxtToLine(I,it[dt]):(this.addTxtToLine(E,V),this.addTxtToLine(I,tt));return this.calculateSize(E),this.calculateSize(I),m==A.length-1?A.push(I):A.splice(m+1,0,I),I}findAndMergeSmallLine(m,w,y){let C=0,A=m.matchAll(y),E=[];for(;;){let L=A.next();if(L.done)break;let I=L.value[0],F=L.value.index,N=0,Q=[];for(let j=0;j<I.length;j++)"L"==I[j]?N=F+j:Q.push(F+j);for(const j of Q){for(const V of w[j].textObjs)this.addTxtToLine(w[N],V);w[N].top=void 0,w[N].bottom=void 0,E.push(j)}C++}E.sort((L,I)=>L<I?1:-1);for(const L of E)w.splice(L,1);return C}newLine(m,w){let y={strLine:"",transform:[],textObjs:[],pageIndex:w,width:0,height:0,txtLength:0};return y.transform[4]=m.transform[4],y.transform[5]=m.transform[5],y.height=m.height,y.width=m.width,y.txtLength=m.str.length,y.textObjs.push(m),y}addTxtToLine(m,w){w.transform[4]<m.transform[4]&&(m.transform[4]=w.transform[4]),w.transform[5]<m.transform[5]&&(m.transform[5]=w.transform[5]),w.transform[5]+w.height>m.transform[5]+m.height&&(m.height=w.transform[5]+w.height-m.transform[5]),w.transform[4]+w.width>m.transform[4]+m.width&&(m.width=w.transform[4]+w.width-m.transform[4]),m.txtLength+=w.str.length,m.textObjs.push(w);let y=m.transform[4]+m.width,C=m.height;for(const A of m.textObjs)A.transform[4]+A.width>y&&(y=A.transform[4]+A.width),A.transform[5]+A.height>m.transform[5]+C&&(C=A.transform[5]+A.height-m.transform[5]);m.width=y-m.transform[4],m.height=C}static transform(m,w){return pdfjsLib.Util.transform(m,w)}render(m,w,y,C){var A;let E=this,L=m.length;for(let I=0;I<L;I++){let F=document.createElement("div");F.className="pdf-page",F.id="page-"+I,null===(A=document.getElementById(w))||void 0===A||A.appendChild(F),E.renderPage(m[I],y,C)}}calculateSize(m){if(0==m.textObjs.length)return;m.textObjs.sort((Q,j)=>1e6*Math.floor(Q.transform[4])+Q.transform[5]>1e6*Math.floor(j.transform[4])+j.transform[5]?1:-1),m.strLine="";let w=0,y=0,C=0,A=0,E=9999,L=0,I=9999;for(const Q of m.textObjs){let j=f.CanvasUtil.isObjIntersec(m.textObjs[0],Q);C=Q.transform[4];let V=C-y>D.CONST.SPLIT_MARGIN&&""!=Q.str.trim()||A!=Q.transform[5]?"|":"";m.strLine+=V+Q.str,C<I&&(I=C);let tt=Q.transform[4]+Q.width;j&&(y=tt),tt>w&&j&&(w=tt),j&&(A=Q.transform[5]),Q.transform[5]<E&&(E=Q.transform[5]),Q.transform[5]+Q.height>L&&(L=Q.transform[5]+Q.height)}m.transform[4]=I,m.transform[5]=E,m.width=w-I,m.height=L-E,m.transform[0]=E,m.transform[1]=L;let F=D.CONST.TVCN_CHAR,N=m.strLine;for(const Q of F)N=N.replace(new RegExp(Q[0],"g"),Q[1]);m.strLine=N}renderPage(m,w,y){let C=m._pageIndex,A=m.getViewport({scale:w}),E=.8*A.width,L=document.createElement("canvas"),I=document.getElementById("page-"+C);I?.appendChild(L),L.id="canvas"+C;let F=L.getContext("2d",{alpha:!1});L.height=A.height,L.width=A.width,L.style.height=A.height*E/A.width+"px",L.style.width=E+"px",I&&(I.style.width=L.style.width,I.style.height=L.style.height);const Q={canvasContext:F,transform:[1,0,0,1,0,0],viewport:A,annotationMode:pdfjsLib.AnnotationMode.ENABLE_FORMS,optionalContentConfigPromise:this.optionalContentConfigPromise,annotationCanvasMap:new Map,pageColors:{background:"Canvas",foreground:"CanvasText"}};m.render(Q).promise.then(function(){y&&y(F,m._pageIndex,A)})}}K.PdfUtils=$},5181:(Zt,K,M)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.Process=void 0;const D=M(58343),f=M(95970),$=M(31617),O=M(44103),m=M(85492);K.Process=class w{constructor(C){var A,E;this.config=C,D.CONST.load(C);let L=JSON.parse(C);D.CONST.LINE_SMALL_HEIGHT=L.LINE_SMALL_HEIGHT*D.CONST.RENDER_SCALE,D.CONST.SPLIT_MARGIN=L.SPLIT_MARGIN*D.CONST.RENDER_SCALE,D.CONST.INTERSEC_MARGIN=L.INTERSEC_MARGIN*D.CONST.RENDER_SCALE,D.CONST.LINE_MAGIN=L.LINE_MAGIN*D.CONST.RENDER_SCALE,D.CONST.MARGIN_LEFT=L.MARGIN_LEFT*D.CONST.RENDER_SCALE,D.CONST.FOOTER_PATTERN=null!==(A=L.FOOTER_PATTERN)&&void 0!==A?A:["(trang\\s*\\d+)","(Page\\s*\\d+)","(Trang\\s*\\d+)","(TRANG\\s*\\d+)","(^\\d{1,4}$)"],D.CONST.HELP_ANS_PATTERN=null!==(E=L.HELP_ANS_PATTERN)&&void 0!==E?E:["([\\s\\.]*Ch\u1ecdn\\s*([ABCDEFGH]))"]}setUpdateStatusCallback(C){this.updateStatusCallback=C}setOncompleteCallback(C){this.onCompleteCallback=C}getOverview(C){let A=C.filter(j=>j.isGroup).length,E=C.filter(j=>!j.isGroup).length,L=C.filter(j=>j.answers.length>0).length,I=C.filter(j=>!j.isGroup&&0==j.answers.length).length,F=C.filter(j=>j.answers.length>4),N=F.length+"|"+F.map(j=>j.num).join(",");return F=C.filter(j=>j.answers.length<4&&j.answers.length>0),{groupNum:A+"",questNum:E+"",tnNum:L+"",tlNum:I+"",tnGt4:N,tnLt4:F.length+"|"+F.map(j=>j.num).join(",")}}parsePdf(C){let A=new m.PdfUtils;A.loadPdf(C,E=>{const L=E.length;let I=[],F=[],N=document.createElement("div");N.id="hiddenWrapper",N.style.width="1px",N.style.height="1px",N.style.overflow="hidden",N.style.opacity="0",N.style.zIndex="-9999",N.style.position="fixed",N.style.top="0",N.style.left="0",document.body.appendChild(N);let Q=document.createElement("div"),j="canvasWrapper";Q.id=j,N.appendChild(Q);const V=(new Date).getTime();let tt=[];A.render(E,j,D.CONST.RENDER_SCALE,(it,dt,mt)=>{if(null!=it&&(I[dt]=it,F[dt]=mt),tt.push(1),this.updateStatusCallback&&this.updateStatusCallback(`Rendering: ${tt.length}/${L}`),tt.length==L){const ft=(new Date).getTime();this.updateStatusCallback&&this.updateStatusCallback("Render done: "+(ft-V)/1e3+" secs"),this.startAnalyze(I,F,E)}})})}imgToTextObj(C,A){return{str:"img",fontName:A,width:C.paintWidth,height:C.paintHeight,transform:[-999,0,0,0,-C.left,-C.top-C.paintHeight]}}startAnalyze(C,A,E){const L=E.length;let I=[],F=[],N=[],Q=new m.PdfUtils;const j=(new Date).getTime();for(let V=0;V<L;V++){const tt=V;let it=Q.getImages(E[V],tt);E[V].getTextContent().then(dt=>{for(const ft of it)dt.items.push(this.imgToTextObj(ft,dt.items.length>0?dt.items[0].fontName:""));let mt=Q.getLines(dt,tt,C[tt],A[tt]);if(F=F.concat(mt),N[tt]=dt.styles,I.push(1),I.length==L){F.sort((Ce,We)=>1e7*Ce.pageIndex+(Ce.transform.length>0?Ce.transform[5]:0)-(1e7*We.pageIndex+(We.transform.length>0?We.transform[5]:0))),Q.findAndSplitQuestAnsLine(F,N,C);let ft=new $.FooterParser,yt=0;for(const Ce of F){if((F.length-1==yt||yt+1<F.length-1&&Ce.pageIndex!=F[yt+1].pageIndex)&&(Ce.isLastLine=!0),Ce.isLastLine&&ft.parse(Ce.strLine).length>0){Ce.isFooter=!0;let We=O.CanvasUtil.getBottomLine(Q.imageCache[F[yt-1].pageIndex],yt-1,F);Ce.top=We[0]+D.CONST.MARGIN_LEFT}yt++}let St=new f.ExamParser(this.config),$t=F.map(Ce=>Ce.strLine),he=St.parse($t),xe=this.getQuestionInfo(he,F,N,C,Q.imageCache);const tn=(new Date).getTime();this.updateStatusCallback&&this.updateStatusCallback("Analyze done: "+(tn-j)/1e3+" secs"),this.showOnCanvas(xe,C,D.CONST.DRAW_RESULT),this.onCompleteCallback&&this.onCompleteCallback(xe,C)}})}}getPosInfo(C,A,E,L,I,F,N,Q,j){if(!E.top){let it=O.CanvasUtil.getTopLine(I,F,L);E.top=it[0],E.isIntersec=it[1]}if(!E.bottom){let it=O.CanvasUtil.getBottomLine(I,F,L);E.bottom=it[0],E.isIntersec=it[1]}return{str:"",pageIndex:E.pageIndex,lineIndex:F,transform:"a"==C?O.CanvasUtil.calIndexPos2(E.textObjs,Q,N,j?j-1:0):E.transform,startLeft:A>=0?O.CanvasUtil.calIndexPos2(E.textObjs,Q,N,A-1):void 0,type:C}}getQuestionInfo(C,A,E,L,I){let F=[];for(const N of C){let Q=N.parts[0].lineIdx,j=A[Q],V=this.getPosInfo("q",N.parts[0].s,j,A,I[j.pageIndex],Q,L[j.pageIndex],E[j.pageIndex]),tt=null;if(Q=N.parts[N.parts.length-1].lineIdx,N.answers.length>0){let it=N.answers[N.answers.length-1];it.parts.length>0&&(Q=it.parts[it.parts.length-1].lineIdx)}if(Q+=1,Q<A.length&&(j=A[Q],tt=this.getPosInfo("q",-1,j,A,I[j.pageIndex],Q,L[j.pageIndex],E[j.pageIndex])),N.isGroup)F.push({num:N.label,answers:[],remove:this.getQuestRemoveBox(V,A),positions:this.getQuestBoxes(V,A,tt,L[j.pageIndex].canvas.height),isGroup:!0,text:N.parts.map(it=>A[it.lineIdx])});else{let it={num:N.label,answers:[],remove:this.getQuestRemoveBox(V,A),positions:this.getQuestBoxes(V,A,tt,L[j.pageIndex].canvas.height),group:N.group,strAns:N.strAns,isFixAns:N.isFixAns,text:N.parts.map(mt=>A[mt.lineIdx])};F.push(it);let dt=0;for(const mt of N.answers){let ft={pageIndex:it.remove.pageIndex,top:it.remove.top-1,left:it.remove.left-1,width:1,heigh:1};if(mt.parts.length>0){if(Q=mt.parts[0].lineIdx,j=A[Q],1==j.isIntersec&&(it.isFixAns=!0),mt.parts.length>1&&(it.isFixAns=!0),V=this.getPosInfo("a",mt.parts[0].s,j,A,I[j.pageIndex],Q,L[j.pageIndex],E[j.pageIndex],mt.parts[0].b),tt=null,dt<N.answers.length-1){let $t=N.answers[dt+1];Q=$t.parts[0].lineIdx,j=A[Q],tt=this.getPosInfo("a",$t.parts[0].s,j,A,I[j.pageIndex],Q,L[j.pageIndex],E[j.pageIndex],$t.parts[0].b)}else Q=mt.parts[mt.parts.length-1].lineIdx+1,Q<A.length-1&&(j=A[Q],tt=this.getPosInfo("q",-1,j,A,I[j.pageIndex],Q,L[j.pageIndex],E[j.pageIndex]));let yt=this.getAnsRemoveBox(V,A),St={label:mt.label,remove:yt,isCorrect:mt.isCorrect,positions:mt.isInline?[yt]:this.getAnsBoxes(V,A,tt,L[j.pageIndex].canvas.height)};it.answers.push(St)}else it.answers.push({label:mt.label,remove:ft,isCorrect:mt.isCorrect,positions:[ft]});dt++}N.help&&N.help.length>0&&(Q=N.help[0].lineIdx,j=A[Q],V=this.getPosInfo("q",N.help[0].s,j,A,I[j.pageIndex],Q,L[j.pageIndex],E[j.pageIndex]),tt=null,Q=N.help[N.help.length-1].lineIdx+1,Q<A.length&&(j=A[Q],tt=this.getPosInfo("q",-1,j,A,I[j.pageIndex],Q,L[j.pageIndex],E[j.pageIndex])),it.help={num:N.label,remove:this.getQuestRemoveBox(V,A),positions:this.getQuestBoxes(V,A,tt,L[j.pageIndex].canvas.height),text:N.help.map(mt=>A[mt.lineIdx])})}}return F}showHidden(){let C=document.getElementById("hiddenWrapper");C&&(C.style.opacity="1",C.style.width="",C.style.height="",C.style.overflow="",C.style.position="")}showOnCanvas(C,A,E){const L=(new Date).getTime(),I=new Map([["A","rgba(18, 0, 255, 0.4)"],["B","rgba(0, 158, 34, 0.4)"],["C","rgba(50, 50, 50, 0.4)"],["D","rgba(132, 0, 137, 0.4)"],["E","rgba(132, 0, 137, 0.4)"],["F","rgba(132, 0, 137, 0.4)"],["G","rgba(132, 0, 137, 0.4)"],["H","rgba(132, 0, 137, 0.4)"]]);if(E.indexOf("quest")>=0)for(const N of C){for(const Q of N.positions)O.CanvasUtil.drawBox(A[Q.pageIndex],N.isGroup?"black":"red",Q);O.CanvasUtil.drawBox(A[N.remove.pageIndex],"yellow",N.remove);for(const Q of N.answers){for(const j of Q.positions)O.CanvasUtil.drawBox(A[j.pageIndex],I.get(Q.label)+"",j,!0);O.CanvasUtil.drawBox(A[Q.remove.pageIndex],"yellow",Q.remove),Q.isCorrect&&O.CanvasUtil.drawPoint(A[Q.positions[0].pageIndex],"green",Q.positions[0])}if(N.help){for(const Q of N.help.positions)O.CanvasUtil.drawBox(A[Q.pageIndex],"orange",Q);N.help.remove&&O.CanvasUtil.drawBox(A[N.help.remove.pageIndex],"yellow",N.help.remove)}}const F=(new Date).getTime();this.updateStatusCallback&&this.updateStatusCallback("Draw done: "+(F-L)/1e3+" secs")}getAnsRemoveBox(C,A){let E=C.startLeft?C.startLeft[5]-2:A[C.lineIndex].top,L=C.transform[4]-D.CONST.MARGIN_LEFT,I=C.startLeft?C.startLeft[5]+C.startLeft[3]:A[C.lineIndex].bottom;return{pageIndex:C.pageIndex,top:E||20,left:L,heigh:I&&E?I-E:0,width:(C.startLeft?C.startLeft[4]:0)-L}}getAnsBoxes(C,A,E,L){const I=L,F=D.CONST.MARGIN_LEFT;let N=[],Q=A[C.lineIndex].top,j=A[C.lineIndex].bottom;if(!Q||!j)return[];let tt=j,it=C.transform[4]-F,dt=E&&C.lineIndex==E.lineIndex?E.transform[4]-F:A[C.lineIndex].transform[4]+A[C.lineIndex].width+F;if(N.push({pageIndex:C.pageIndex,top:Q,left:it,width:dt-it,heigh:j-Q}),E&&E.lineIndex==C.lineIndex)return N;Q=j,j=I,dt=0;let mt=C.pageIndex,ft=0;for(ft=C.lineIndex+1;ft<A.length;ft++){if(j==I&&O.CanvasUtil.isLastLineOfPage(ft,A)){let St=A[ft].isFooter?A[ft-1]:A[ft];j=St.transform[5]+St.height+20}let yt=A[ft].top;if(ft>C.lineIndex+1&&!A[ft-1].isFooter){let St=A[ft-1].transform[4]+A[ft-1].width+F;St>dt&&(dt=St);let $t=A[ft-1].transform[4]-F;$t<it&&(it=$t)}if(A[ft].isFooter&&yt)ft-C.lineIndex>1?(j=A[ft-1].transform[5]+A[ft-1].height+D.CONST.LINE_MAGIN,it=A[C.lineIndex+1].transform[4]-F):j=A[C.lineIndex].bottom;else if(A[ft].pageIndex>mt&&(j&&j-Q>D.CONST.LINE_SMALL_HEIGHT&&ft-C.lineIndex>1&&N.push({pageIndex:mt,top:Q,left:it,width:dt-it,heigh:j-Q}),Q=20,tt=Q),mt=A[ft].pageIndex,yt){j=yt;break}}if(ft>=A.length&&(ft=A.length-1),ft-C.lineIndex>1&&A[ft-1].transform[5]>tt&&!O.CanvasUtil.isFirstLineOfPage(ft,A)){let yt=20==Q?A[ft].transform[4]:A[C.lineIndex+1].transform[4];if(20!=Q)for(let St=C.lineIndex+2;St<=ft;St++)A[St].transform[4]<yt&&(yt=A[St].transform[4]);j&&j-Q>D.CONST.LINE_SMALL_HEIGHT&&N.push({pageIndex:mt,top:Q,left:yt,width:dt-yt,heigh:j-Q})}E&&"a"==E.type&&E.transform[4]>A[E.lineIndex].transform[4]+10*D.CONST.RENDER_SCALE&&(dt=E.transform[4]-F,Q=A[E.lineIndex].top,it=A[E.lineIndex].transform[4]-F,j=A[E.lineIndex].bottom,Q&&j&&j-Q>D.CONST.LINE_SMALL_HEIGHT&&N.push({pageIndex:mt,top:Q,left:it,width:dt-it,heigh:j-Q}));for(let yt=N.length-1;yt>=1;yt--)N[yt].left-(N[yt-1].left+N[yt-1].width)>=20*D.CONST.RENDER_SCALE&&N.splice(yt,1);return N}getQuestRemoveBox(C,A){let E=C.startLeft?C.startLeft[5]:A[C.lineIndex].top,L=C.transform[4]-D.CONST.MARGIN_LEFT,I=C.startLeft?C.startLeft[5]+C.startLeft[3]:A[C.lineIndex].bottom;return{pageIndex:C.pageIndex,top:E||20,left:L,heigh:I&&E?I-E:0,width:(C.startLeft?C.startLeft[4]:0)-L}}getQuestBoxes(C,A,E,L){let I=L;for(let ft=C.lineIndex;ft<A.length;ft++)if(O.CanvasUtil.isLastLineOfPage(ft,A)){let yt=A[ft].isFooter?A[ft-1]:A[ft];I=yt.transform[5]+yt.height+20;break}let F=[],N=C.pageIndex,Q=E?E.lineIndex:A.length-1,j=A[C.lineIndex].transform[4]-D.CONST.MARGIN_LEFT,V=A[C.lineIndex].top;if(!V)return[];let tt=D.CONST.CROP_FULL_WIDTH?O.CanvasUtil.getMaxLineRight(-1,A)+2*D.CONST.MARGIN_LEFT:A[C.lineIndex].transform[4]+A[C.lineIndex].width+2*D.CONST.MARGIN_LEFT,it=I,dt=N,mt=C.lineIndex+1;for(;mt<=Q;mt++){let ft=A[mt].top;if(mt==A.length-1&&!E&&(ft=A[mt].bottom),!D.CONST.CROP_FULL_WIDTH){let St=A[mt-1].transform[4]+A[mt-1].width+2*D.CONST.MARGIN_LEFT;St>tt&&(tt=St)}let yt=A[mt-1].transform[4]-D.CONST.MARGIN_LEFT;yt<j&&(j=yt),A[mt].isFooter&&ft?it=ft:(A[mt].pageIndex>dt&&(A[mt-1].isFooter||(it=I),F.push({pageIndex:dt,top:V,left:j,width:tt-j,heigh:it-V}),V=20,j=O.CanvasUtil.getMinLineLeft(A[mt].pageIndex,A)-D.CONST.MARGIN_LEFT),dt=A[mt].pageIndex,ft&&(it=ft))}if(mt-=1,!E&&O.CanvasUtil.isLastLineOfPage(mt,A)){let ft=A[mt].isFooter?A[mt-1]:A[mt];it=ft.transform[5]+ft.height+20}return O.CanvasUtil.isFirstLineOfPage(mt,A)||F.push({pageIndex:dt,top:V,left:j,width:tt-j,heigh:it-V}),F}}},25873:(Zt,K,M)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.AnswerParser=void 0;const D=M(74047);class f extends D.Parser{constructor(O){super(),null!=O&&(this.isOn=O),this.TYPE=f.TYPE_NAME}do(O){let m=[],w="|"+O,y=/([\s|.\]]+\*?[A-H][\s|]*[.)])/g,C=this.matchPos(w,y,!1);0==C.length&&(C=this.matchPos(w,y,!0));let A=!1;0==C.length&&/^\|?\s*\*?[A-H\s|]+$/g.test(w)&&(A=!0,C=this.matchPos(w,/\*?[A-H]/g,!1));let E=!1;if(0==C.length&&(A=!0,E=!0,C=this.matchPos(w,/\[\*?[A-H]:[^\]]+\]/g,!1)),C.length>0)for(const L of C){let I=L.index+L.value.length-1,F=-9999,N=L.value.replace(/\*?[\sA-H|]/g,"");E&&(F=L.index+L.value.length-2,L.index=L.index+1,I=L.index+1+(L.value.startsWith("[*")?1:0),N=".");let Q={type:this.TYPE,pos:[L.index-1,I,F]},j=O.substring(Q.pos[0]);!A&&!/^\|?\s*[*A-Himg\s|.]+$/g.test(w)&&j.trim()==L.value.trim()||(Q.label=O.substring(Q.pos[0],Q.pos[0]+1),"*"==Q.label&&(Q.label=O.substring(Q.pos[0]+1,Q.pos[0]+2),Q.extInfo="*"),Q.olabel=N,Q.score=1,""==O.substring(0,Q.pos[0]).replace(/[\s|]/g,"")&&(Q.score=2),m.push(Q))}return m}matchPos(O,m,w){let y=w?O.toUpperCase():O,C=/[\s|.\]]/,A=y.matchAll(m),E=[];for(;;){let L=A.next();if(L.done)break;let I=0;for(let j=L.value.index;j<y.length&&C.test(y[j]);j++)I++;let F=L.value[0].substr(I,1),N=/[[(]\s*(VD|TH|NB|VDC|EASY|MEDIUM|HARD|HARDEST)\s*[\d.]*\s*[)\]]\s*[:.]?/g,Q=/\[![a-z]+:\$\s*\$\]/g;"A"==F&&!y.replace(/\|/g,"").replace(/\[!info:\d+\]/g,"").replace(N,"").replace(Q,"").trim().startsWith("A")||"*A"==F&&!y.replace(/\|/g,"").replace(/\[!info:\d+\]/g,"").replace(N,"").replace(Q,"").trim().startsWith("*A")||E.push({value:L.value[0].substr(I),index:L.value.index+I})}return E}}K.AnswerParser=f,f.TYPE_NAME="answer"},64984:(Zt,K,M)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.DapAnChiTietParser=void 0;const D=M(58343),f=M(74047);class $ extends f.Parser{constructor(m){super(),this.TYPE=$.TYPE_NAME,null!=m&&(this.isOn=m)}do(m){let y=this.cleanLine(m);return/^[0-9ABCDEFGHabcdefgh]+$/g.test(y)&&y.length>=2?[{type:$.TYPE_NAME,pos:[0,0]}]:[]}cleanLine(m){let w=[/\|/g,/[\s.\-:,;![\]@*$()\u2013]+/g,/C\xe2u/g,/\u0110\xe1p\xe1n/g,/\u0110\/A/g,/Question/g,/Questions/g,/question/g,/questions/g],y=m;y=y.replaceAll(/\[![!iucsbp]+:\$(([^$]|\$[^\]])+)\$\]/g,"$1"),y=y.replaceAll(/\[![!iucsbp]+:!!\]/g,"");for(const C of w)y=y.replaceAll(C,"");return y=y.replaceAll("\\n",""),y}getAnsMC(m,w){var y;let C=[];for(const F of w)C.push(m[null!==(y=F.lineIdx)&&void 0!==y?y:0]);let A=C.join(""),E=this.cleanLine(A),L=this.getResultMC(E.toUpperCase()),I=new Map;for(const F of L)I.set(F.num,F.str);return I}getAnsStr(m){let w=m.join("\n");w=w.replaceAll(/\[![!iucsbp]+:\$(([^$]|\$[^\]])+)\$\]/g,"$1"),w=w.replaceAll(/\[![!iucsbp]+:!!\]/g,""),w=w.replaceAll("[*","").replaceAll("*]","");let y=this.getResultStr(w),C=new Map;for(const A of y)C.set(A.num,A.str);return C}getAnsFromHelp(m,w){let y=[];for(const A of m){let E=w[A.lineIdx];E=E.replaceAll(/\[![!iucsbp]+:\$(([^$]|\$[^\]])+)\$\]/g,"$1"),E=E.replaceAll(/\[![!iucsbp]+:!!\]/g,""),y.push(E)}let C=0;for(const A of y){let E=A.trim().match(D.CONST.HELP_ANS_PATTERN.join("|"));if(null!=E)for(const L of E)if(null!=L&&1==L.length)return m.splice(C,1),L;C++}return""}getResultStr(m){let w=[],y=m.replace(/\n/g,"\n"),C=D.CONST.QUESTION_PATTERN.join("|").replace(/\(\^/g,"("),A=y.matchAll(new RegExp(C,"ig"));for(;;){let N=A.next();if(N.done)break;let Q=N.value[0],j=D.Utils.getNumberFromStr(Q);y=y.replace(Q,j+".")}let F,E=D.CONST.RES_ANS_PATTERN.length>0?new RegExp(D.CONST.RES_ANS_PATTERN.join("|"),"g"):/\d+[.-][^|0-9]/g,L=y.matchAll(E),I=-1;for(;;){let N=L.next();if(N.done)break;if(-1==I)I=N.value.index,F=N;else{let Q=y.substr(I,N.value.index-I);w.push(this.toAns(Q,F)),I=N.value.index,F=N}}if(I>=0&&F){let N=y.substr(I);w.push(this.toAns(N,F))}return w}toAns(m,w){let y=w.value[0].length-1;return{num:+w.value[0].substr(0,y-1),str:m.substring(y).replace(/\s+/g," ").trim()}}getResultMC(m){let w=[],y="",C=[],A=!1;for(let E=0;E<m.length;E++){let L=m.charCodeAt(E),I=L>=65&&L<=72;if(I&&""==y)return[];I!=A&&(C.push(y),y=""),A=I,y+=m[E]}""!=y&&C.push(y);for(let E=1;E<C.length;E+=2){let L=0,I=Math.floor(C[E-1].length/C[E].length),F=+C[E-1].substring(L,I),N=F,Q=!1;for(let j=0;j<C[E].length;j++){if(j>=C[E-1].length){Q=!0;break}if(F=+C[E-1].substring(L,L+I),F!=N){Q=!0;break}w.push({num:F,str:C[E][j]}),L+=I,N=F+1,I=N.toString().length}if(Q){w=[];break}}if(0==w.length)for(let E=1;E<C.length;E+=2){let L=+C[E-1];if(E>1&&L!=w[w.length-1].num+1)return[];w.push({num:L,str:C[E]})}return w}}K.DapAnChiTietParser=$,$.TYPE_NAME="chitietdapan"},96570:(Zt,K,M)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.DapAnParser=void 0;const D=M(58343),f=M(74047);class $ extends f.Parser{constructor(m){super(),null!=m&&(this.isOn=m),this.TYPE=$.TYPE_NAME}do(m){return this.match(m,D.CONST.DAPAN_PATTERN)}static getAnsFromHelp(m){for(const w of m){let y=w.replace(/\|/g,"").trim().match(D.CONST.HELP_ANS_PATTERN.join("|"));if(null!=y)for(const C of y)if(null!=C&&1==C.length)return C}return""}}K.DapAnParser=$,$.TYPE_NAME="dapan"},31617:(Zt,K,M)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.FooterParser=void 0;const D=M(58343),f=M(74047);class $ extends f.Parser{constructor(m){super(),null!=m&&(this.isOn=m),this.TYPE=$.TYPE_NAME}do(m){return this.match(m,D.CONST.FOOTER_PATTERN)}}K.FooterParser=$,$.TYPE_NAME="footer"},89094:(Zt,K,M)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.HetParser=void 0;const D=M(58343),f=M(74047);class $ extends f.Parser{constructor(m){super(),null!=m&&(this.isOn=m),this.TYPE=$.TYPE_NAME}do(m){return this.match(m,D.CONST.HET_PATTERN)}}K.HetParser=$,$.TYPE_NAME="end"},75271:(Zt,K,M)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.HuongDanParser=void 0;const D=M(58343),f=M(74047);class $ extends f.Parser{constructor(m){super(),null!=m&&(this.isOn=m),this.TYPE=$.TYPE_NAME}do(m){return this.match(m,D.CONST.HUONGDAN_PATTERN)}}K.HuongDanParser=$,$.TYPE_NAME="huongdan"},52734:(Zt,K,M)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.IncludeParser=void 0;const D=M(74047);class f extends D.Parser{constructor(O){super(),null!=O&&(this.isOn=O),this.TYPE=f.TYPE_NAME}do(O){let m=O.replace(/\|/g,"").trim(),y=/\[@([CTQG]\d+):[^\]]*\]/g,C=/\[@(F:[^\]]*)\]/g,A=/\[[^\]\d]+(\d+)[^\]\d]+\]/g,E=/\[[^\]]+\]/g;if(/^\[@[^!\]]+\]([\.,]\[[^\]!]+\])*$/.test(m)){let L=m;return L=L.replaceAll(y,"$1").replaceAll(C,"$1").replaceAll(A,"$1").replaceAll(E,""),[{type:this.TYPE,pos:[0,0],label:"@@."+L}]}return[]}}K.IncludeParser=f,f.TYPE_NAME="include"},74047:(Zt,K)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.Parser=void 0,K.Parser=class M{constructor(){this.isOn=!0,this.TYPE="default"}on(){this.isOn=!0}off(){this.isOn=!1}parse(f){return this.isOn?this.do(f):[]}match(f,$){let O=f.replace(/\|/g,"").trim().match($.join("|"));return null!=O&&O.length>0?[{type:this.TYPE,pos:[0,0]}]:[]}}},50023:(Zt,K,M)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.QuestionParser=void 0;const D=M(58343),f=M(74047);class $ extends f.Parser{constructor(m){super(),null!=m&&(this.isOn=m),this.TYPE=$.TYPE_NAME}do(m){let w=this.matchPos(m);if(w.value){let y=null;for(let F=w.value.length-1;F>=0;F--)if(w.value[F]){y=w.value[F];break}if(null==y)return[];let C=m.replace(/\|/g,"").toLowerCase().indexOf(y),A=C,E="",L=m.toLowerCase();for((y.endsWith("(")||y.endsWith("["))&&(y=y.substring(0,y.length-1));A<L.length&&("|"!=L[A]&&(E+=L[A]),A++,E!=y););let I={type:this.TYPE,pos:[C,A]};return I.label=this.getNumberFromStr(m.substring(I.pos[0],I.pos[1])),I.olabel=y,[I]}return[]}matchPos(m){let w=m.replace(/\|/g,"").toLowerCase().trim(),y=D.CONST.QUESTION_PATTERN.join("|"),C=w.matchAll(y).next();return C.value||(y=D.CONST.QUESTION_PATTERN2.join("|"),C=w.matchAll(y).next()),C}getNumberFromStr(m){let w=m.match(/(\d+)/);return w?w[0]:""}}K.QuestionParser=$,$.TYPE_NAME="question"},65378:(Zt,K,M)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.SectionParser=void 0;const D=M(58343),f=M(74047);class $ extends f.Parser{constructor(m){super(),null!=m&&(this.isOn=m),this.TYPE=$.TYPE_NAME}do(m){let w=m.replace(/\|/g,"");w=w.replaceAll(/\[![!ibuc]+:\$(([^\$]|\$[^\]])+)\$\]/g,"$1");let y=w.toLowerCase().trim().match(D.CONST.SECTION_PATTERN_LOWER.join("|")),C=null!=y&&y.length>0;return C||(y=w.trim().match(D.CONST.SECTION_PATTERN_NORMAL.join("|")),C=null!=y&&y.length>0),C&&y?[{type:this.TYPE,pos:[0,0],label:w}]:[]}}K.SectionParser=$,$.TYPE_NAME="section"},88178:(Zt,K,M)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.ModifyAnsRule=void 0;const D=M(24672);class f extends D.Rule{constructor(O){super(O??"","modify:")}load(O){let m=new f(O);return""!=m.pattern?m:null}run(O,m){if(""==this.pattern)return!1;if(this.getStack(O,m).endsWith(this.pattern)&&this.checkVal(O,m)){for(const y of this.data){let C=y.split(":"),A=m-+C[0],E=O[A].label;O[A].label=C[1],O[A].err=E+" -> "+C[1]}return!0}return!1}}K.ModifyAnsRule=f},8377:(Zt,K,M)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.RemoveDupRule=void 0;const D=M(24672);class f extends D.Rule{constructor(O){super(O??"","rmdup:")}load(O){let m=new f(O);return""!=m.pattern?m:null}run(O,m){var w,y;if(""==this.pattern)return!1;if(this.getStack(O,m).endsWith(this.pattern)){let A=null!==(w=O[m].score)&&void 0!==w?w:0,E=null!==(y=O[m-1].score)&&void 0!==y?y:0;if(O[m].label==O[m-1].label)return O.splice(A>E?m-1:m,1),!0}return!1}}K.RemoveDupRule=f},9165:(Zt,K,M)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.RemoveRule=void 0;const D=M(24672);class f extends D.Rule{constructor(O){super(O??"","remove:")}load(O){let m=new f(O);return""!=m.pattern?m:null}run(O,m){if(""==this.pattern)return!1;if(this.getStack(O,m).endsWith(this.pattern)&&this.checkVal(O,m)){for(const y of this.data)O.splice(m-+y,1);return!0}return!1}}K.RemoveRule=f},24672:(Zt,K)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.Rule=void 0,K.Rule=class M{constructor(f,$){if(this.TYPE="",this.pattern="",this.valPattern="",this.data=[],this.TYPE=$,!f.startsWith(this.TYPE))return;let m=f.substring(this.TYPE.length).split("=>"),w=m[0].split(":");this.pattern=w[0].trim(),this.valPattern=w.length>1?w[1].trim():"",this.data=m[1].split(",").map(y=>y.trim())}checkVal(f,$){var O;if(""==this.valPattern)return!0;let w=[];for(let C=Math.ceil(this.pattern.length/2);C>0;C--)w.push(null===(O=f[$-C+1].label)||void 0===O?void 0:O.trim());let y=w.join("-");return new RegExp(this.valPattern).test(y)}getStack(f,$){let O="",m=$-10>=0?$-10:0;for(;m<=$;m++)O+="-"+f[m].type[0];return O}}},42637:(Zt,K,M)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.SameKindRule=void 0;const D=M(58343),f=M(96570),$=M(89094),O=M(75271),m=M(24672);class w extends m.Rule{constructor(C){super(C??"","same:")}load(C){let A=new w(C);return""!=A.pattern?A:null}run(C,A){var E,L,I;if(""==this.pattern)return!1;let F=C[A];if(F.type[0]!=this.pattern)return!1;let N=[],Q=[],j="";for(let V=0;V<A;V++){let tt=C[V];(tt.type==$.HetParser.TYPE_NAME||tt.type==f.DapAnParser.TYPE_NAME)&&(j="da"),tt.type==O.HuongDanParser.TYPE_NAME&&"da"==j&&(j="hd")}if("da"==j)return!1;for(let V=A-1;V>=0;V--){let tt=C[V];if(tt.type==$.HetParser.TYPE_NAME||tt.type==f.DapAnParser.TYPE_NAME||"hd"==j&&tt.type==O.HuongDanParser.TYPE_NAME||(tt.type[0]==this.pattern&&tt.olabel&&(N.push(tt.olabel),Q.push(tt.label)),2==N.length))break}if(N.length>=1){let V=N[0],tt=2==N.length?N[1]:V,it=null!==(E=F.olabel)&&void 0!==E?E:"";if("a"==this.pattern&&(""==V&&(V="."),""==tt&&(tt="."),""==it&&(it=".")),""==this.valPattern){if(V==tt&&it!=V)return C.splice(A,1),!0}else{let dt=this.valPattern.split(",");for(const mt of dt){let ft=mt.trim(),St=new RegExp(D.CONST[ft].join("|"));if(St.test(V)&&St.test(tt)&&!St.test(it)&&+(null!==(L=Q[0])&&void 0!==L?L:"0")+1!=+(null!==(I=F.label)&&void 0!==I?I:"0"))return C.splice(A,1),!0}}}return!1}}K.SameKindRule=w},96144:(Zt,K,M)=>{"use strict";M.r(K),M.d(K,{TestbankModule:()=>UY});var D=M(96814),f=M(56223),$=M(19347),O=M(21266),m=M(42273),w=M(42753),y=M(66469),C=M(37722),A=M(21494),E=M(25391),L=M(95545),I=M(29942),F=M(84155),N=M(78217),Q=M(58844),j=M(69862),V=M(22299),tt=M(69623),it=M(65592),dt=M(52572),mt=M(66623);class ft extends tt.EditorApiService{constructor(o,e,i,a,r){super(),this.questionHelper=o,this.apiUploadService=e,this.documentService=i,this.examService=a,this.questionService=r,this.treeData=[],this.treeQuestion=[],this.saveTreeData=[],this.saveTreeQuestion=[]}loadData(o,e){return new Promise(i=>{if(this.saveTreeData.includes(e))i();else{this.saveTreeData.push(e);let a={categoryId:e,documentType:void 0,shareType:""!=o?o:void 0,fileType:"exam_online",classroomId:void 0,name:void 0,suggestExamPurpose:void 0,lite:1,getGlobal:0,page:1,itemPerPage:-1};this.documentService.apiDocumentsGet(a.categoryId,a.documentType,a.shareType,a.fileType,a.classroomId,a.name,a.suggestExamPurpose,a.lite,a.getGlobal,a.page,a.itemPerPage).subscribe(r=>{1===r.success&&r.data&&((r.data.categoryObjs||[]).forEach(c=>{this.treeData.push({id:c.id||0,name:c.name||"",type:"cat",pr:e})}),(r.data.documentObjs||[]).forEach(c=>{c.exam&&this.treeData.push({id:c.exam.id||0,name:c.exam.name||"",type:"test",pr:e})})),i()})}})}loadQuestion(o){return new Promise(e=>{this.saveTreeQuestion.includes(o)?e():(this.saveTreeQuestion.push(o),this.examService.apiExamGetExamWithQuestionObjsIdGet(o).subscribe(i=>{if(1===i.success&&i.data){let r=[];(i.data.questionObjs||[]).forEach(s=>{this.treeQuestion.push({id:s.id||0,label:(s.rawIndex??0)+1,content:this.questionHelper.renderContent(s),groupId:s.groupId,type:"quest",pr:o}),r.includes(s.groupId||0)||r.push(s.groupId||0)}),r.length>1&&r.forEach(s=>{this.treeQuestion.push({id:s,label:s,content:"Nh\xf3m "+(s+1),type:"group",pr:o})}),e()}}))})}searchRes(o,e){return new Promise(i=>{this.loadData(o,e).then(()=>{i(this.treeData.filter(a=>a.pr===e))})})}getQuestion(o){return new Promise(e=>{this.loadQuestion(o).then(()=>{e(this.treeQuestion.filter(i=>i.pr===o))})})}}var yt=M(89745),St=M(47496),$t=M(70731);function he(n,o,e=8,i=[]){if(o<=1)return i.push(n),i;let a=i.push(parseFloat((n/o).toPrecision(e)));return he(n-i[a-1],o-1,e,i)}var xe=M(61713),tn=M(81881),Ce=M(20553);class We{static loadImageToBase64(o,e){return new Promise((i,a)=>{const r=new Image;r.crossOrigin="anonymous",r.setAttribute("count","1"),r.onload=()=>{const s=document.createElement("canvas");s.width=r.width,s.height=r.height,s.getContext("2d")?.drawImage(r,0,0,r.width,r.height,0,0,s.width,s.height);let d=s.toDataURL();i(d)},r.onerror=()=>{const s=r.getAttribute("count");s&&1==Number(s)?(r.src=e.getMyCdn(o),r.setAttribute("count","2")):s&&Number(s)<5?(r.setAttribute("count",s+1),r.src=e.getMyCdn(o)+"?t="+(new Date).getTime()):a(new Error)},r.src=e.getMyCdn(o)})}}class _e{constructor(o,e){this.editorOutputDataService=o,this.commonService=e,this.typeMatrix="user",this.startIndex=0,this.backToLink="",this.title="",this.editor={show:!0},this.examSave={},this.homeworkSave={},this.mathEditor={},this.similarQuest={},this.showErrorsQuests={},this.showInfomationQuests={},this.imageEditor={},this.logConfig={},this.heightContent=600,this.inputMoveToQuestion=!1,this.inputMoveToQuestionValue="1",this.inputMoveToQuestionTooltip=!1}showEditor(){this.disAll(),this.reSetBackToLink(),this.editor.show=!0}showHomework(){this.disAll(),this.backToLink="",this.title=this.commonService.myTranslateInstant("lang_cms_config_homework_title")??"",this.homeworkSave.show=!0}showExam(){this.disAll(),this.title=this.commonService.myTranslateInstant("lang_auto_cau_hinh_de_thi")??"",this.backToLink="",this.examSave.show=!0}disAll(){this.title="",this.examSave.show=!1,this.homeworkSave.show=!1,this.editor.show=!1}reSetBackToLink(){this.title=this.commonService.myTranslateInstant("lang_auto_cong_cu_soan_thao_noi_dung")??"",this.backToLink=this.sourceBackToLink?this.sourceBackToLink:"/admin/testbank/create-new-document/"+(null!=this.cur_cateId?this.cur_cateId:0)}getBackLink(){return this.matrix&&this.matrix.matrix.length>0?(this.editorOutputDataService.setMatrixData(this.matrix,!0),`/admin/testbank/mix-bank-template/${null!=this.cur_cateId?this.cur_cateId:0}/${this.typeMatrix}/0`):this.backToLink}}class mn{constructor(o){this.commonService=o,this.wmf=new WMFConverter}readFileInputEventAsArrayBuffer(o,e){var i=new FileReader;i.onload=function(a){e(a.target.result)},i.readAsArrayBuffer(o)}handleFileSelect(o,e,i,a){let r=this,s=(d,h)=>{if(i){let _=this.commonService.myTranslateInstant("lang_auto_cong_thuc");i(d,h,_)}},c=new $t.Q(30,{function:i?(d,h)=>{if(i){let _=this.commonService.myTranslateInstant("lang_auto_image");i(d,h,_)}}:()=>{}});this.readFileInputEventAsArrayBuffer(o,function(d){azotaDocx.readDocx(d,s).then(function(h){for(let _ of h.data)"img"==_.type&&("image/x-wmf"==_.contentType||"image/x-emf"==_.contentType?c.addTask(r,r.convert,[_]):_.value="data:"+_.contentType+";base64, "+_.value,!_.cssStyle&&_.height&&_.width&&"EMU"==_.measureUnit)&&(_.cssStyle=`width:${+_.width/12700}pt;height:${+_.height/12700}pt;margin-top:0px;`);c.start().then(()=>{let _=new Map,x=0;for(let b of h.data)"img"==b.type&&b.cropInfo&&_.set(x,1),x++;if(e&&0==_.size)e(h);else{x=0;for(let b of h.data){if("img"==b.type&&b.cropInfo){const T=x,P=document.createElement("img");P.src=b.value,P.onload=()=>{r.cropImage(b,P),_.delete(T),0==_.size&&e&&e(h)},P.onerror=()=>{_.delete(T),0==_.size&&e&&e(h)}}x++}}})}).catch(h=>{a&&a(h.message)})})}convert(o){return new Promise(e=>{if("image/x-wmf"==o.contentType)o.value=this.wmf.toPNG("data:"+o.contentType+";base64, "+o.value),e();else{let s=new ToContext2D(0,1),l=this.decodeBase64(o.value);try{FromEMF.Parse(l,s)}catch{}var i=this.scaleCanvas(s.canvas,200,200);o.value=i.toDataURL(),e()}})}decodeBase64(o){return Uint8Array.from(atob(o),function(e){return e.charCodeAt(0)})}scaleCanvas(o,e,i){let a=document.createElement("canvas");return a.width=e,a.height=i,a.getContext("2d")?.drawImage(o,0,0,o.width,o.height,0,0,e,i),a}cropImage(o,e){if(!o.cropInfo)return;let i=o.cropInfo.left?+o.cropInfo.left:0,a=o.cropInfo.top?+o.cropInfo.top:0,r=o.cropInfo.right?+o.cropInfo.right:0,s=o.cropInfo.bottom?+o.cropInfo.bottom:0;if(i+a+r+s==0)return;let l=e.width,c=e.height,d=i*l/1e5,h=a*c/1e5,b=l-r*l/1e5-d,T=c-s*c/1e5-h;const P=document.createElement("canvas");P.width=b,P.height=T,P.getContext("2d")?.drawImage(e,d,h,b,T,0,0,b,T),o.value=P.toDataURL()}}class ye{parse(o){let e=["NB_SOCH","TH_SOCH","VD_SOCH","VDC_SOCH","DIEM"],i=[],a=[],r=[];for(let b of o){r=[];for(let T of b.content){if("POS"==T.indexName&&""!=T.value){let G=T.value.trim();G=G.replaceAll("C",""),r=G.split(",")}if(T.isMerge||""==T.value.trim()||e.indexOf(T.indexName)<0)continue;let P=o.filter(G=>G.obj.id==T.id).map(G=>({id:G.obj.id,type:G.obj.type[0].toUpperCase(),name:G.obj.item,shareType:this.getShareType(G.obj)})),U=T.value;U=U.replace(/\d+/g,"").trim();let q=[T.indexName.split("_")[0]];""!=U?q.push(...U.split(",").map(G=>G.trim())):q.push("TN","DT");let B=tt.Utils.getNumberFromStr(T.value),W={value:B,tag:q,items:[...P],point:0,pos:r.splice(0,B)};for(let G of T.mergeId){let nt=o.filter(At=>At.index==G).map(At=>({id:At.obj.id,type:At.obj.type[0].toUpperCase(),name:At.obj.item,shareType:this.getShareType(At.obj)}));W.items.push(...nt)}"DIEM"==W.tag[0]?a.push(W):i.push(W)}}for(let b of a){let T=0;for(let P of i)b.items.filter(q=>P.items.filter(B=>B.id==q.id).length>0).length>0&&(T+=+P.value);T>0&&(b.point=Math.round(+b.value/10*100/T)/100);for(let P of i)b.items.filter(q=>P.items.filter(B=>B.id==q.id).length>0).length>0&&(P.point=b.point)}let s=[],l=[],c=new Map,d=["NB","TH","VD","VDC"];i.sort((b,T)=>d.indexOf(b.tag[0])-d.indexOf(T.tag[0]));let h=1,_=0;for(let b of i)_+=+b.value;for(let b of i){let T=[],P=b.items.map(W=>{let G="user"==W.shareType?`:${W.shareType}-`:"";return W.name=W.name.replace(/[\[\]]/g,""),`[@${W.type}${W.id}:${G}${W.name}]`}).join(",")+".";T.push(P);let U=b.tag.map(W=>`[@F:azt_lang_tag_${W}]`).join(",");T.push(`${U}.`),T.push("[azt_lang_sugg_random $__d_value__$ azt_lang_sugg_question]");let q=T.join(""),B=+b.value;for(let W=0;W<B;W++)c.set(q+"=>"+W,{d:b.point});for(let W=0;W<B;W++){let G={txt:q.replace("$__d_value__$","1"),idx:b.pos[W]?+b.pos[W].trim():h};b.pos[W]&&G.idx<=_?s.push(G):l.push(G),h++}}s=s.sort((b,T)=>b.idx-T.idx),l=l.sort((b,T)=>b.idx-T.idx);let x=[];for(let b=1;b<=_;b++)s.length>0&&s[0].idx==b?x.push(s.splice(0,1)[0]):l.length>0&&x.push(l.splice(0,1)[0]);return s.length>0&&x.push(...s),l.length>0&&x.push(...l),{text:x.map(b=>b.txt).join("\n"),extra:c}}getShareType(o){let e=o.prNode?.prNode,i="",a=[];for(o.prNode&&a.push(o.prNode.id);e;)i=`[@C${e.id}:-].`+i,a.push(e.id),e=e.prNode;let r="";return 1==a.length&&-1==a[0]&&(r="user"),a.length>1&&-1==a[a.length-1]&&(r="user_"+a[a.length-2]),r}}class fe{process(o){let e=/^\s*#(\d)\s*\[[A-Z0-9\-\[\]\$!:b]+\]/g,i=["NB","TH","VD","VDC"],a=0,r=!1,s=1;for(let l of o){let d=l.matchAll(e).next();if(!d.done){let _=+d.value[1]-1;_<i.length&&(o[a]=l.replace(d.value[0],`C\xe2u ${s++}. (${i[_]})`)),r=!0}r&&"GY"==l.trim()&&(o[a]="L\u1eddi gi\u1ea3i"),a++}}}var Ue=M(8720),Ye=M(92381),Yn=M(34004);class Si extends Ye.N{constructor(){super(...arguments),this.chemBase=["H","He","Li","Be","B","C","N","O","F","Ne","Na","Mg","Al","Si","P","S","Cl","Ar","K","Ca","Sc","Ti","V","Cr","Mn","Fe","Co","Ni","Cu","Zn","Ga","Ge","As","Se","Br","Kr","Rb","Sr","Y","Zr","Nb","Mo","Tc","Ru","Rh","Pd","Ag","Cd","In","Sn","Sb","Te","I","Xe","Cs","Ba","La","Ce","Pr","Nd","Pm","Sm","Eu","Gd","Tb","Dy","Ho","Er","Tm","Yb","Lu","Hf","Ta","W","Re","Os","Ir","Pt","Au","Hg","Tl","Pb","Bi","Po","At","Rn","Fr","Ra","Ac","Th","Pa","U","Np","Pu","Am","Cm","Bk","Cf","Es","Fm","Md","No","Lr","Rf","Db","Sg","Bh","Hs","Mt","Ds","Rg","Cn","Nh","Fl","Mc","Lv","Ts","Og"]}findAttributes(o){const e={content:"",attr:[]};return e.content=o.replace(/(\w+)=["']?((?:.(?!["']?\s+=|\s*\/?[>"']))+.)["']?/g,i=>{const a=(0,Yn.Z)();return e.attr.push({key:a,value:i}),a}),e}processMapException(o,e){return e.forEach(i=>{o=o.replace(i.key,i.value)}),o}render(o,e,i){if(o.trim().startsWith("[@"))return o;const a=this.findAttributes(o);let r=o=a.content,s=this.chemBase.join("|"),l=new RegExp(`(?:[\\s,.:;"'=\u2013\\-\\/\\+\\?<>]|^)\\(?\\d*(${s})+\\d*(${s}|\\d+|\\(|\\))*(?:(?=[\\s,.:;"'=\u2013\\-\\/\\+\\?<>])|\\(\\w+\\)|$)`,"g"),c=r.matchAll(l),d=[];for(;;){let _=c.next();if(_.done)break;let x=0==_.value.index?_.value[0]:_.value[0].substring(1);x.replace("(","").replace(")","").length<=1||d.push({s:0==_.value.index?0:_.value.index+1,len:x.length,val:this.autoFormat(x)})}if(d.sort((_,x)=>_.s>x.s?-1:1),d.filter(_=>/\d+/.test(_.val)).length>0)for(let _ of d)r=r.substring(0,_.s)+"\\("+_.val+"\\)"+r.substring(_.s+_.len);return this.processMapException(r,a.attr)}autoFormat(o){return o.replaceAll(/([^\(])(\d+)/g,"$1_{$2}")}}class bn extends Ye.N{render(o,e,i){return o}revert(o){let e=o;return[["sub",/<sub>([^><]+)<\/sub>/g],["sup",/<sup>([^><]+)<\/sup>/g]].forEach(a=>{e=e.replace(a[1],(r,s)=>`[!${a[0]}:$${s}$]`)}),e}}var ri=M(60723);class qi extends Ye.N{constructor(o){super(),this.cdnService=o}render(o,e,i){if(o.indexOf("[img:")<0)return o;let r=o,s=r.matchAll(/\[img:\$[a-zA-Z0-9_]+\$\]/g);for(;;){let l=s.next();if(l.done)break;let c=l.value[0];const d=c.replace("[img:$","").replace("$]","");if(e){const h=e.find(_=>_.id===d);if(h){const _=document.createElement("img");_.id=d,_.classList.add(0===d.indexOf("af")?"qv_full_a_img":0===d.indexOf("f")?"qv_full_img":"qv_img"),_.crossOrigin="anonymous",_.style.cssText=h.cssStyle??"";let x=ri.G.generateIdRequired(10),b=this.cdnService.getMyCdn(h.link);this.loadingManager.set(x,b),_.onload=()=>{this.loadingManager.delete(x)},_.onerror=()=>{this.loadingManager.delete(x)},_.src=b,r=r.replace(c,_.outerHTML)}}}return r}}var to=M(7468),Tl=M(8897),Mr=M(23353);class Mn extends Ye.N{constructor(o,e,i,a,r,s,l,c,d,h){super(),this.cdnService=o,this.commonService=e,this.callBack=i,this.apiCallbackCache=a,this.editor=r,this.onError=s,this.loadedQuestIds=l,this.apiDataCache=c,this.matrixData=d,this.discoveryService=h,this.getOne=!1,this.trans={err_empty_quest:""},this.trans.err_empty_quest=this.commonService.myTranslateInstant("lang_auto_khong_tai_duoc_cau_hoi_tu_ngan_hang")??""}getSimilar(o,e,i){let a={text:o,maxRate:.99},r=ri.G.generateIdRequired(10);return this.loadingManager.set(r,o),this.discoveryService?.apiDiscoveryQuestionsInfoPost(a).subscribe(s=>{let l=[];1===s.success&&s.data&&s.data.objs&&s.data.objs.length>0&&(l=s.data.objs),this.apiCallbackCache=new Map;let c=0;for(let d of l){let h={i:c,call:this.callBack,err:this.onError};c++;let _=this.apiCallbackCache.get(r);_?_.push(h):this.apiCallbackCache.set(r,[h])}0==l.length&&this.onError&&this.onError("NO_DATA"),setTimeout(()=>{this.processApiResponse(l,r,!1)},400),this.loadingManager.delete(r)}),"Loading...|0"}render(o,e,i){let a=o.split("<br>")[0].trim(),r=a.split("=>"),s=r.length>1?+r[1].split("-")[1]:0,l=r.length>1?+r[1].split("-")[0]:0;if(!this.callBack||!/^\[@[CTGK][\-\d]+:[^\]]+\]([\.,]\[[^\]]+\])+$/.test(r[0].trim())&&!/^\[@Q[\-\d]+:[^\]]+\](\s*,\s*\[@Q[\-\d]+:[^\]]+\])*$/.test(r[0].trim()))return o;let h=r[0]+"=>"+l,_=Tl.Utils.parseInclude(a);if(this.apiDataCache){let q=this.apiDataCache.get(a);if(q&&this.callBack)return setTimeout(()=>{q&&this.callBack&&this.callBack(q)},50),"Loading...|"+_.questId.join(",")}if(this.apiCallbackCache){let U={i:s,call:this.callBack,err:this.onError},q=this.apiCallbackCache.get(h);if(q)return q.push(U),"Loading...|"+_.questId.join(",");this.apiCallbackCache.set(h,[U])}let x=this.loadedQuestIds&&0==_.questId.length?this.loadedQuestIds:[],b=!1;0==_.getNum&&_.groupId.length>0&&(b=!0,_.getNum=1,x=_.questId.length>0?x:[]),this.getOne&&_.getNum&&_.getNum>1&&(_.getNum=1);let T=ri.G.generateIdRequired(10),P=this.matrixData?.filter(U=>U.key==h)[0];if(P)setTimeout(()=>{this.processApiResponse(P?.questions??[],h,b)},400);else{this.loadingManager.set(T,a);let U={exceptQuestionIds:x,matrix:[]};U.matrix?.push({number:_.getNum,key:h,paths:_.paths.map(W=>({type:W.type,id:W.id,groupIds:W.groupIds,tags:W.tags,answerTypes:W.answerTypes}))});let B=U.matrix?.filter(W=>W.paths?.filter(G=>"KNOWLEDGE"==G.type).length??!1).length?i?.apiQuestionsMatrixGlobalPost(U):i?.apiQuestionsMatrixPost(U);B&&B.subscribe(W=>{let G=[];1===W.success&&W.data&&W.data[0]&&W.data[0].questions&&W.data[0].questions.length>0&&(G=W.data[0].questions),setTimeout(()=>{this.processApiResponse(G,h,b)},400),this.loadingManager.delete(T)})}return"Loading...|"+_.questId}setGetOne(o){this.getOne=o}processApiResponse(o,e,i){let a=o??[],r=this.apiCallbackCache?.get(e);if(r)for(const s of r){let l=this.getOne?0:s.i;if(a.length<=l){s.err&&s.err(this.trans.err_empty_quest);continue}let c=a[l];const d=this.commonService.willDeleteParseJson(c.content??"[]"),h={type:"bank",sourceId:c.id};if(d&&d.length>0&&d[0].vMetaEditor&&(h.heightLabel=d[0].vMetaEditor.heightLabel),i){let b=this.commonService.willDeleteParseJson(c.content||"[]"),T="",P={renderedStr:T,label:"",quest:{label:0,isGroup:!0,parts:[],answers:[]},answers:[],isFixGroup:"1"===c.groupType,meta:h};if(1==c.isImage&&b[0].groupUrl){let U=ri.G.generateIdRequired(10);this.loadingManager.set(U,b[0].groupUrl),this.loadImage(b[0].groupUrl,this.cdnService).then(q=>{const B=document.createElement("canvas");B.width=q.width,B.height=q.height,B.getContext("2d")?.drawImage(q,0,0,q.width,q.height);const W=document.createElement("img");W.src=B.toDataURL(),W.classList.add("qv_img-group-content"),P.renderedStr=W.outerHTML,s.call(P),this.loadingManager.delete(U)}).catch(q=>{P.renderedStr="Load image error",s.call(P),this.loadingManager.delete(U)})}else T=b[0].groupContent??"",P.renderedStr=T,s.call(P);this.apiDataCache&&this.apiDataCache.set(e+"-"+s.i,P);continue}let _=4==c.answerType&&c.answerResult?this.commonService.willDeleteParseJson(c.answerResult):[],x="text";if(1===c.isImage&&(x=this.commonService.willDeleteParseJson(c.content||"")[0].url?"image":x),"image"===x){let b=this.commonService.willDeleteParseJson(c.content||""),T=b[0].metaData,P={renderedStr:"",label:"",attachments:c.attachments,quest:{isFixAns:1==c.isFixAns,label:0,parts:[],answers:T&&T.answers?T.answers.map(q=>({label:q.label,isCorrect:-1!==c.answerResult?.indexOf(q.label),parts:[]})):(this.commonService.willDeleteParseJson(c.answerConfig??"").answer??[]).map(q=>({label:q,isCorrect:-1!==c.answerResult?.indexOf(q),parts:[]}))},strAns:_.length>0?_:void 0,answers:[],v:T?"pdf-2-0":"pdf-1-0",id:c.id,meta:h};P.originCorrectAns=P.quest.answers.filter(q=>q.isCorrect).map(q=>q.label).join(),c.tags&&(P.tag=c.tags.map(q=>({id:q.id,code:q.code,viName:q.viName,enName:q.enName})));let U=ri.G.generateIdRequired(10);this.loadingManager.set(U,b[0].url),this.loadImage(b[0].url,this.cdnService).then(q=>{this.processImageQuestion(q,b,P),c.answerMedia?this.loadImageToBase64(c.answerMedia,this.cdnService).then(B=>{P.helpRenderedStr=B,s.call(P)}):s.call(P),this.apiDataCache&&this.apiDataCache.set(e+"-"+s.i,P),this.loadingManager.delete(U)}).catch(q=>{P.renderedStr="Load image error",s.call(P),this.loadingManager.delete(U)})}else{let b=this.commonService.willDeleteParseJson(c.content||"[]"),T=this.commonService.willDeleteParseJson(c.answerConfig||"[]"),P={renderedStr:"",label:"",attachments:c.attachments,quest:{isFixAns:1==c.isFixAns,label:0,parts:[],answers:T?T.map(U=>({label:U.key,isCorrect:-1!==c.answerResult?.indexOf(U.key),parts:[]})):[]},strAns:_.length>0?_:void 0,answers:[],v:"docx",id:c.id,meta:h};P.originCorrectAns=P.quest.answers.filter(U=>U.isCorrect).map(U=>U.label).join(),b.length>0&&(P.renderedStr=b[0].content),c.answerMedia&&(P.helpRenderedStr=c.answerMedia),c.tags&&(P.tag=c.tags.map(U=>({id:U.id,code:U.code,viName:U.viName,enName:U.enName}))),P.answers=P.quest.answers.map((U,q)=>({renderedStr:T[q].content,ans:U})),this.apiDataCache&&this.apiDataCache.set(e+"-"+s.i,P),s.call(P)}}this.apiCallbackCache?.delete(e)}processApiResponseReturnData(o,e,i,a){return new Promise((r,s)=>{let c=(o??[])[0];const d=this.commonService.willDeleteParseJson(c.content??"[]"),h={type:"bank",sourceId:c.id};if(d&&d.length>0&&d[0].vMetaEditor&&(h.heightLabel=d[0].vMetaEditor.heightLabel),i){let b=this.commonService.willDeleteParseJson(c.content||"[]"),T="",P={renderedStr:T,label:"",quest:{label:0,isGroup:!0,olabel:(this.commonService.myTranslateInstant("lang_auto_cau")??"C\xe2u")+" "+a+".",parts:[],answers:[]},answers:[],isFixGroup:"1"===c.groupType,meta:h};if(1==c.isImage&&b[0].groupUrl){let U=ri.G.generateIdRequired(10);this.loadingManager.set(U,b[0].groupUrl),this.loadImage(b[0].groupUrl,this.cdnService).then(q=>{const B=document.createElement("canvas");B.width=q.width,B.height=q.height,B.getContext("2d")?.drawImage(q,0,0,q.width,q.height);const W=document.createElement("img");W.src=B.toDataURL(),W.classList.add("qv_img-group-content"),P.renderedStr=W.outerHTML,r(P)}).catch(q=>{P.renderedStr="Load image error",r(P)})}else T=b[0].groupContent??"",P.renderedStr=T,r(P)}let _=4==c.answerType&&c.answerResult?this.commonService.willDeleteParseJson(c.answerResult):[],x="text";if(1===c.isImage&&(x=this.commonService.willDeleteParseJson(c.content||"")[0].url?"image":x),"image"===x){let b=this.commonService.willDeleteParseJson(c.content||""),T=b[0].metaData,P={renderedStr:"",label:"",attachments:c.attachments,quest:{isFixAns:1==c.isFixAns,label:0,olabel:(this.commonService.myTranslateInstant("lang_auto_cau")??"C\xe2u")+" "+a+".",parts:[],answers:T&&T.answers?T.answers.map(q=>({label:q.label,isCorrect:-1!==c.answerResult?.indexOf(q.label),parts:[]})):(this.commonService.willDeleteParseJson(c.answerConfig??"").answer??[]).map(q=>({label:q,isCorrect:-1!==c.answerResult?.indexOf(q),parts:[]}))},strAns:_.length>0?_:void 0,answers:[],v:T?"pdf-2-0":"pdf-1-0",id:c.id,meta:h};P.originCorrectAns=P.quest.answers.filter(q=>q.isCorrect).map(q=>q.label).join(),c.tags&&(P.tag=c.tags.map(q=>({id:q.id,code:q.code,viName:q.viName,enName:q.enName})));let U=ri.G.generateIdRequired(10);this.loadingManager.set(U,b[0].url),this.loadImage(b[0].url,this.cdnService).then(q=>{this.processImageQuestion(q,b,P),c.answerMedia?this.loadImageToBase64(c.answerMedia,this.cdnService).then(B=>{P.helpRenderedStr=B,r(P)}):r(P),this.loadingManager.delete(U)}).catch(q=>{P.renderedStr="Load image error",this.loadingManager.delete(U)})}else{let b=this.commonService.willDeleteParseJson(c.content||"[]"),T=this.commonService.willDeleteParseJson(c.answerConfig||"[]"),P={renderedStr:"",label:"",attachments:c.attachments,quest:{isFixAns:1==c.isFixAns,olabel:(this.commonService.myTranslateInstant("lang_auto_cau")??"C\xe2u")+" "+a+".",label:0,parts:[],answers:T?T.map(U=>({label:U.key,isCorrect:-1!==c.answerResult?.indexOf(U.key),parts:[]})):[]},strAns:_.length>0?_:void 0,answers:[],v:"docx",id:c.id,meta:h};P.originCorrectAns=P.quest.answers.filter(U=>U.isCorrect).map(U=>U.label).join(),b.length>0&&(P.renderedStr=b[0]),c.answerMedia&&(P.helpRenderedStr=c.answerMedia),c.tags&&(P.tag=c.tags.map(U=>({id:U.id,code:U.code,viName:U.viName,enName:U.enName}))),P.answers=P.quest.answers.map((U,q)=>({renderedStr:T[q].content,ans:U})),r(P)}})}setCallback(o){this.callBack=o}setApiCache(o){this.apiCallbackCache=o}processImageQuestion(o,e,i){const a=e[0].metaData;if(a){const r={x:0,y:0,w:a.question.width,h:a.question.height};let s=a.question.height;a.answers&&a.answers.forEach((c,d)=>{let h="";if(1!==c.width||1!==c.height){const _=this.cropImageWithPos({x:c.x,y:c.y,w:c.width,h:c.height},{x:c.remove.x,y:c.remove.y,w:c.remove.width,h:c.remove.height},o);_.classList.add("qv_ats_image"),s>c.y&&(r.h=c.y,s=c.y),h=_.outerHTML}i.answers.push({renderedStr:h,ans:i.quest.answers[d]})}),r.h<5&&(r.h=1,r.h=1);const l=this.cropImageWithPos(r,{x:a.question.remove.x,y:a.question.remove.y,w:a.question.remove.width,h:a.question.remove.height},o,!0);l.classList.add("qv_qts_image"),i.renderedStr=l.outerHTML,i.meta&&(i.meta.heightLabel=this.calculateHeightLabel(o,a.question.remove))}else i.renderedStr=o.outerHTML}cropImageWithPos(o,e,i,a,r){const s=document.createElement("canvas");s.width=o.w,s.height=o.h;const l=s.getContext("2d"),c=document.createElement("img");l?.drawImage(i,o.x,o.y,o.w,o.h,0,0,o.w,o.h),l&&(l.fillStyle="#fff"),l?.fillRect(e.x-o.x,e.y-o.y,e.w,e.h);const h=Mr.rj.cropCanvas(s,void 0);return r?h:(c.src=h.toDataURL(),c.style.width=h.width*this.ratioImage+"px",c)}calculateHeightLabel(o,e){return this.cropImageWithPos({x:e.x,y:e.y,w:e.width,h:e.height},{x:0,y:0,w:0,h:0},o,!1,!0).height}}class ln extends Ye.N{constructor(o,e){super(),this.mathMap=o,this.commonService=e}render(o,e,i){let a=o,s=a.matchAll(/\[!m:\$(([^\]]|[^\$]\])+)\$\]/g);for(;;){let l=s.next();if(l.done)break;let c=l.value[0],d=l.value[1],h=this.mathMap.get(d),_="";const x=document.createElement("span");x.classList.add("tex2jax_process"),x.classList.add("azt-mathml"),x.id=d,h&&(x.innerHTML=h.str,h.raw&&x.setAttribute("data-azt-math-raw",h.raw)),_=x.outerHTML,a=a.replace(c,_)}return a}}class pi extends Ye.N{render(o,e,i){let a=this.bypassChild(o);return a=a.replaceAll(/\\\)\s*\\\(/g,""),a}bypassChild(o,e="\\(",i="\\)"){if(e.length!==i.length)return"";const a=[];let r=0;for(;;){let c=o.indexOf(e,r);if(-1===c)break;a.push("s_"+c),r=c+1}for(r=0;;){let c=o.indexOf(i,r);if(-1===c)break;a.push("e_"+c),r=c+1}a.sort(function(c,d){return parseInt(c.substr(2))-parseInt(d.substring(2))});let s=[];const l=[];return a.forEach(c=>{if("s"===c.substring(0,1))s.push(parseInt(c.substring(2)));else if(1==s.length)s=[];else{let d=s.pop();if(d){let h=parseInt(c.substring(2));l.push(d),l.push(h)}}}),l.sort(function(c,d){return c-d}).reverse().forEach(c=>{o=o.substring(0,c)+o.substring(c+e.length)}),o}}class xn extends Ye.N{trimWithBr(o){for(o=o.trim();/^<br>|<br>$/.test(o);)o=o.replace(/^<br>|<br>$/,"").trim();return o}render(o){let e=o,i=e.split("<br>"),a=0,r=/\[![!aibucsbphl]+:!!\]/;for(let c of i){if(r.test(c)){let h=c.split(":!!]")[0].split("["),_=h[h.length-1].split(":")[0];i[a]=c.startsWith("[*")?"[* ["+_+":$"+c.replace(r,"$]").substring(2):"["+_+":$"+c.replace(r,"$]")}a++}e=i.join("<br>"),e=e.replaceAll(/\[![!aibucsbphl]+:\$\$\]/g,"");let l=e.matchAll(/\[![!aibucsbphl]+:\$(([^\$]|\$[^\]])+)\$\]/g);for(;;){let c=l.next();if(c.done)break;let d=c.value[0],h=c.value[1],_=d.split(":")[0].split("!");_.shift(),_.filter(x=>"a"==x).length>0&&(h=h.toUpperCase());for(let x=_.length-1;x>=0;x--){let b=_[x];h="hl"==b||"cl"==b?h:`<${b}>${h}</${b}>`}e=e.replace(d,h)}return this.trimWithBr(e)}}class ki extends Ye.N{render(o,e,i){let a=o,r=[[/([^<])-+([^\-><]+)-+>/g,"$1\\( \\xrightarrow[]{$2} \\)"],[/<-+([^\-><]+)-+([^>])/g,"\\( \\xleftarrow[]{$1} \\)$2"],[/([^<])--+>/g,"$1\\( \\longrightarrow \\)"],[/<--+([^>])/g,"\\( \\longleftarrow \\)$1"],[/<-+>/g,"\\( \\longleftrightarrow \\)"],[/([^<])->/g,"$1\\( \\rightarrow \\)"],[/<-([^>])/g,"\\( \\leftarrow \\)$1"]];for(let s of r)a=a.replaceAll(s[0],s[1]);return a}}class an extends Ye.N{render(o,e,i){let r=o.split("<br>"),s=[],l=[];for(let c of r)if(c.trim().startsWith("[*")&&c.trim().endsWith("*]")){let d=c.replaceAll("\\n","<br>").replaceAll("[*","<tr><td>").replaceAll("*]","</td></tr>");d=d.replaceAll("|","</td><td>"),l.push(d)}else l.length>0&&(s.push('<table class="q-table">'+l.join("")+"</table>"),l=[]),s.push(c);return l.length>0&&s.push('<table class="q-table">'+l.join("")+"</table>"),s.join("<br>")}}class Kn extends Ye.N{render(o,e,i){let a=o,s=a.matchAll(/\[\*?[A-H]:[^\]]+\]/g);for(;;){let d=s.next();if(d.done)break;let h=d.value[0],x=h.substring(1,h.length-1).split(":");2==x[0].length&&(x[0]=x[0].substring(1)),a=a.replace(h,`<span class="qv_string_eng_ans" style='cursor: pointer;padding: 0 5px;font-weight: bold;text-decoration: underline;position: relative;height: 40px;display: inline-block;'>${x[1]} <span style='position: absolute;top: 20px;left: 45%;'>${x[0]}</span></span>`)}return a}revert(o,e){let i=o;return i=i.replaceAll(/<span class="qv_string_eng_ans"[^>]+>([^><]+)<span[^>]+>([^><]+)<\/span><\/span>/g,"[$2:$1]"),i=i.replace("["+e+":","[*"+e+":"),i}}let _i=(()=>{class n{}return n.EXAM_FULL=["Ph\u1ea7n 1. TR\u1eaeC NGHI\u1ec6M\nC\xe2u 1. Trong cu\u1ed9c khai th\xe1c thu\u1ed9c \u0111\u1ecba l\u1ea7n th\u1ee9 hai \u1edf \u0110\xf4ng D\u01b0\u01a1ng 1919.1929, th\u1ef1c d\xe2n Ph\xe1p t\u1eadp trung \u0111\u1ea7u t\u01b0 v\xe0o\nA. Ng\xe0nh ch\u1ebf t\u1ea1o m\xe1y.      B. C\xf4ng nghi\u1ec7p luy\u1ec7n kim.\nC. \u0110\u1ed3n \u0111i\u1ec1n cao su.        D. C\xf4ng nghi\u1ec7p h\xf3a ch\u1ea5t.\n\nC\xe2u 2. N\u1ed9i dung n\xe0o sau \u0111\xe2y ph\u1ea3n \xe1nh \u0111\xfang t\xecnh h\xecnh Vi\u1ec7t Nam sau Hi\u1ec7p \u0111\u1ecbnh Gi\u01a1nev\u01a1 n\u0103m 1954 v\u1ec1 \u0110\xf4ng D\u01b0\u01a1ng?\nA. \u0110\u1ea5t n\u01b0\u1edbc t\u1ea1m th\u1eddi b\u1ecb chia c\u1eaft l\xe0m hai mi\u1ec1n Nam, B\u1eafc. \nB. Mi\u1ec1n B\u1eafc ch\u01b0a \u0111\u01b0\u1ee3c gi\u1ea3i ph\xf3ng. \nC. Mi\u1ec1n Nam \u0111\xe3 \u0111\u01b0\u1ee3c gi\u1ea3i ph\xf3ng.\nD. C\u1ea3 n\u01b0\u1edbc \u0111\u01b0\u1ee3c gi\u1ea3i ph\xf3ng v\xe0 ti\u1ebfn l\xean x\xe2y d\u1ef1ng ch\u1ee7 ngh\u0129a x\xe3 h\u1ed9i. \n\nC\xe2u 3. Trong \u0110\xf4ng . Xu\xe2n 1953.1954, b\u1ed9 \u0111\u1ed9i ch\u1ee7 l\u1ef1c Vi\u1ec7t Nam m\u1edf chi\u1ebfn d\u1ecbch ti\u1ebfn c\xf4ng qu\xe2n Ph\xe1p \u1edf\xa0\nA. \u0110\xf4ng Kh\xea.    B. Th\xe1i Nguy\xean.     C. Th\u1ecb x\xe3 Lai Ch\xe2u.     D. Qu\u1ea3ng Tr\u1ecb. \n\nPh\u1ea7n 2. T\u1ef0 LU\u1eacN\nC\xe2u 4. (VDC) T\u1eeb n\u0103m 1952 \u0111\u1ebfn n\u0103m 1973, khoa h\u1ecdc . k\u0129 thu\u1eadt v\xe0 c\xf4ng ngh\u1ec7 c\u1ee7a Nh\u1eadt B\u1ea3n ch\u1ee7 y\u1ebfu t\u1eadp trung v\xe0o l\u0129nh v\u1ef1c.\n\n------H\u1ebeT------\nB\u1ea2NG \u0110\xc1P \xc1N\n1A 2B 3C\nH\u01b0\u1edbng d\u1eabn gi\u1ea3i\nC\xe2u 1 (NB): \nPh\u01b0\u01a1ng ph\xe1p: SGK L\u1ecbch s\u1eed 12, trang 76 \u2013 77. \nC\xe1ch gi\u1ea3i: Trong cu\u1ed9c khai th\xe1c thu\u1ed9c \u0111\u1ecba l\u1ea7n th\u1ee9 hai \u1edf \u0110\xf4ng D\u01b0\u01a1ng (1919-1929), th\u1ef1c d\xe2n Ph\xe1p t\u1eadp trung \u0111\u1ea7u t\u01b0 v\xe0o \u0111\u1ed3n \u0111i\u1ec1n cao su. \nC\xe2u 2 (NB): \nPh\u01b0\u01a1ng ph\xe1p: SGK L\u1ecbch s\u1eed 12, trang 157 - 158. \nC\xe1ch gi\u1ea3i: \u0110\u1ea5t n\u01b0\u1edbc t\u1ea1m th\u1eddi b\u1ecb chia c\u1eaft l\xe0m hai mi\u1ec1n Nam, B\u1eafc l\xe0 n\u1ed9i dung ph\u1ea3n \xe1nh \u0111\xfang t\xecnh h\xecnh Vi\u1ec7t Nam sau Hi\u1ec7p \u0111\u1ecbnh Gi\u01a1nev\u01a1 n\u0103m 1954 v\u1ec1 \u0110\xf4ng D\u01b0\u01a1ng. \nC\xe2u 3 (NB): \nPh\u01b0\u01a1ng ph\xe1p: SGK L\u1ecbch s\u1eed 12, trang 147. \nC\xe1ch gi\u1ea3i: Trong \u0110\xf4ng - Xu\xe2n 1953-1954, b\u1ed9 \u0111\u1ed9i ch\u1ee7 l\u1ef1c Vi\u1ec7t Nam m\u1edf chi\u1ebfn d\u1ecbch ti\u1ebfn c\xf4ng qu\xe2n Ph\xe1p \u1edf th\u1ecb x\xe3 Lai Ch\xe2u. \nC\xe2u 4 (NB): \nPh\u01b0\u01a1ng ph\xe1p: SGK L\u1ecbch s\u1eed 12, trang 54. \nC\xe1ch gi\u1ea3i: T\u1eeb n\u0103m 1952 \u0111\u1ebfn n\u0103m 1973, khoa h\u1ecdc - k\u0129 thu\u1eadt v\xe0 c\xf4ng ngh\u1ec7 c\u1ee7a Nh\u1eadt B\u1ea3n ch\u1ee7 y\u1ebfu t\u1eadp trung v\xe0o l\u0129nh v\u1ef1c s\u1ea3n xu\u1ea5t \u1ee9ng d\u1ee5ng d\xe2n d\u1ee5ng.","Ph\u1ea7n 1. TR\u1eaeC NGHI\u1ec6M\nC\xe2u 1.(VD) Trong cu\u1ed9c khai th\xe1c thu\u1ed9c \u0111\u1ecba l\u1ea7n th\u1ee9 hai \u1edf \u0110\xf4ng D\u01b0\u01a1ng 1919.1929, th\u1ef1c d\xe2n Ph\xe1p t\u1eadp trung \u0111\u1ea7u t\u01b0 v\xe0o\nA. Ng\xe0nh ch\u1ebf t\u1ea1o m\xe1y.      B. C\xf4ng nghi\u1ec7p luy\u1ec7n kim.\nC. \u0110\u1ed3n \u0111i\u1ec1n cao su.        D. C\xf4ng nghi\u1ec7p h\xf3a ch\u1ea5t.\n\nL\u1eddi gi\u1ea3i\nPh\u01b0\u01a1ng ph\xe1p: SGK L\u1ecbch s\u1eed 12, trang 76 \u2013 77. \nC\xe1ch gi\u1ea3i: Trong cu\u1ed9c khai th\xe1c thu\u1ed9c \u0111\u1ecba l\u1ea7n th\u1ee9 hai \u1edf \u0110\xf4ng D\u01b0\u01a1ng (1919-1929), th\u1ef1c d\xe2n Ph\xe1p t\u1eadp trung \u0111\u1ea7u t\u01b0 v\xe0o \u0111\u1ed3n \u0111i\u1ec1n cao su. \nCh\u1ecdn C\n\nC\xe2u 2.(NB) N\u1ed9i dung n\xe0o sau \u0111\xe2y ph\u1ea3n \xe1nh \u0111\xfang t\xecnh h\xecnh Vi\u1ec7t Nam sau Hi\u1ec7p \u0111\u1ecbnh Gi\u01a1nev\u01a1 n\u0103m 1954 v\u1ec1 \u0110\xf4ng D\u01b0\u01a1ng?\nA. \u0110\u1ea5t n\u01b0\u1edbc t\u1ea1m th\u1eddi b\u1ecb chia c\u1eaft l\xe0m hai mi\u1ec1n Nam, B\u1eafc. \nB. Mi\u1ec1n B\u1eafc ch\u01b0a \u0111\u01b0\u1ee3c gi\u1ea3i ph\xf3ng. \nC. Mi\u1ec1n Nam \u0111\xe3 \u0111\u01b0\u1ee3c gi\u1ea3i ph\xf3ng.\nD. C\u1ea3 n\u01b0\u1edbc \u0111\u01b0\u1ee3c gi\u1ea3i ph\xf3ng v\xe0 ti\u1ebfn l\xean x\xe2y d\u1ef1ng ch\u1ee7 ngh\u0129a x\xe3 h\u1ed9i. \n\nL\u1eddi gi\u1ea3i\nPh\u01b0\u01a1ng ph\xe1p: SGK L\u1ecbch s\u1eed 12, trang 157 - 158. \nC\xe1ch gi\u1ea3i: \u0110\u1ea5t n\u01b0\u1edbc t\u1ea1m th\u1eddi b\u1ecb chia c\u1eaft l\xe0m hai mi\u1ec1n Nam, B\u1eafc l\xe0 n\u1ed9i dung ph\u1ea3n \xe1nh \u0111\xfang t\xecnh h\xecnh Vi\u1ec7t Nam sau Hi\u1ec7p \u0111\u1ecbnh Gi\u01a1nev\u01a1 n\u0103m 1954 v\u1ec1 \u0110\xf4ng D\u01b0\u01a1ng. \nCh\u1ecdn A\n\nC\xe2u 3. Trong \u0110\xf4ng . Xu\xe2n 1953.1954, b\u1ed9 \u0111\u1ed9i ch\u1ee7 l\u1ef1c Vi\u1ec7t Nam m\u1edf chi\u1ebfn d\u1ecbch ti\u1ebfn c\xf4ng qu\xe2n Ph\xe1p \u1edf\xa0\nA. \u0110\xf4ng Kh\xea.    B. Th\xe1i Nguy\xean.     C. Th\u1ecb x\xe3 Lai Ch\xe2u.     D. Qu\u1ea3ng Tr\u1ecb.\n\nL\u1eddi gi\u1ea3i\nPh\u01b0\u01a1ng ph\xe1p: SGK L\u1ecbch s\u1eed 12, trang 147. \nC\xe1ch gi\u1ea3i: Trong \u0110\xf4ng - Xu\xe2n 1953-1954, b\u1ed9 \u0111\u1ed9i ch\u1ee7 l\u1ef1c Vi\u1ec7t Nam m\u1edf chi\u1ebfn d\u1ecbch ti\u1ebfn c\xf4ng qu\xe2n Ph\xe1p \u1edf th\u1ecb x\xe3 Lai Ch\xe2u. \nCh\u1ecdn C\n\nPh\u1ea7n 2. T\u1ef0 LU\u1eacN\nC\xe2u 4. T\u1eeb n\u0103m 1952 \u0111\u1ebfn n\u0103m 1973, khoa h\u1ecdc . k\u0129 thu\u1eadt v\xe0 c\xf4ng ngh\u1ec7 c\u1ee7a Nh\u1eadt B\u1ea3n ch\u1ee7 y\u1ebfu t\u1eadp trung v\xe0o l\u0129nh v\u1ef1c.\n\nL\u1eddi gi\u1ea3i\nPh\u01b0\u01a1ng ph\xe1p: SGK L\u1ecbch s\u1eed 12, trang 54. \nC\xe1ch gi\u1ea3i: T\u1eeb n\u0103m 1952 \u0111\u1ebfn n\u0103m 1973, khoa h\u1ecdc - k\u0129 thu\u1eadt v\xe0 c\xf4ng ngh\u1ec7 c\u1ee7a Nh\u1eadt B\u1ea3n ch\u1ee7 y\u1ebfu t\u1eadp trung v\xe0o l\u0129nh v\u1ef1c s\u1ea3n xu\u1ea5t \u1ee9ng d\u1ee5ng d\xe2n d\u1ee5ng.","Mark the letter A, B, C, or D on your answer sheet to indicate the underlined part that needs correction in each of the following questions\n\nQuestion 1.(VD) Every [A:member] of the class [B:were] invited [C:to] the party by [D:the form teacher].\n\nQuestion 2.(NB) For [A:such] a demanding job, you [B:will need] [C:qualifications], soft skills and [D:having full commitment].\n\nQuestion 3. In a restaurant, [A:if we] want to call the water, we can raise our hand and [B:wave it] [C:slight to signal] that we need [D:assistance].\n\nQuestion 4. Manufacturers [A:may use] food additives [B:for preserving], to color, to flavor, or to [C:fortify] [D:foods].\n\n\nQuestion 5. The apple ___ the table.\n\nANSWER KEYS\n1b 2d 3a 4b\n5. on | On | ON","Ph\u1ea7n 1. TR\u1eaeC NGHI\u1ec6M\nC\xe2u 1. Trong cu\u1ed9c khai th\xe1c thu\u1ed9c \u0111\u1ecba l\u1ea7n th\u1ee9 hai \u1edf \u0110\xf4ng D\u01b0\u01a1ng 1919.1929, th\u1ef1c d\xe2n Ph\xe1p t\u1eadp trung \u0111\u1ea7u t\u01b0 v\xe0o\n*A. Ng\xe0nh ch\u1ebf t\u1ea1o m\xe1y.      B. C\xf4ng nghi\u1ec7p luy\u1ec7n kim.\nC. \u0110\u1ed3n \u0111i\u1ec1n cao su.        D. C\xf4ng nghi\u1ec7p h\xf3a ch\u1ea5t.\n\nC\xe2u 2. N\u1ed9i dung n\xe0o sau \u0111\xe2y ph\u1ea3n \xe1nh \u0111\xfang t\xecnh h\xecnh Vi\u1ec7t Nam sau Hi\u1ec7p \u0111\u1ecbnh Gi\u01a1nev\u01a1 n\u0103m 1954 v\u1ec1 \u0110\xf4ng D\u01b0\u01a1ng?\nA. \u0110\u1ea5t n\u01b0\u1edbc t\u1ea1m th\u1eddi b\u1ecb chia c\u1eaft l\xe0m hai mi\u1ec1n Nam, B\u1eafc. \n*B. Mi\u1ec1n B\u1eafc ch\u01b0a \u0111\u01b0\u1ee3c gi\u1ea3i ph\xf3ng. \nC. Mi\u1ec1n Nam \u0111\xe3 \u0111\u01b0\u1ee3c gi\u1ea3i ph\xf3ng.\nD. C\u1ea3 n\u01b0\u1edbc \u0111\u01b0\u1ee3c gi\u1ea3i ph\xf3ng v\xe0 ti\u1ebfn l\xean x\xe2y d\u1ef1ng ch\u1ee7 ngh\u0129a x\xe3 h\u1ed9i. \n\nC\xe2u 3. Trong \u0110\xf4ng . Xu\xe2n 1953.1954, b\u1ed9 \u0111\u1ed9i ch\u1ee7 l\u1ef1c Vi\u1ec7t Nam m\u1edf chi\u1ebfn d\u1ecbch ti\u1ebfn c\xf4ng qu\xe2n\nPh\xe1p \u1edf\xa0\nA. \u0110\xf4ng Kh\xea.    B. Th\xe1i Nguy\xean.     *C. Th\u1ecb x\xe3 Lai Ch\xe2u.     D. Qu\u1ea3ng Tr\u1ecb. \n\nPh\u1ea7n 2. T\u1ef0 LU\u1eacN\nC\xe2u 4. T\u1eeb n\u0103m 1952 \u0111\u1ebfn n\u0103m 1973, khoa h\u1ecdc . k\u0129 thu\u1eadt v\xe0 c\xf4ng ngh\u1ec7 c\u1ee7a Nh\u1eadt B\u1ea3n ch\u1ee7 y\u1ebfu t\u1eadp trung v\xe0o l\u0129nh v\u1ef1c.","Ph\u1ea7n 1. TR\u1eaeC NGHI\u1ec6M\nC\xe2u 1. Trong cu\u1ed9c khai th\xe1c thu\u1ed9c \u0111\u1ecba l\u1ea7n th\u1ee9 hai \u1edf \u0110\xf4ng D\u01b0\u01a1ng 1919.1929, th\u1ef1c d\xe2n Ph\xe1p t\u1eadp trung \u0111\u1ea7u t\u01b0 v\xe0o\n*A. Ng\xe0nh ch\u1ebf t\u1ea1o m\xe1y.      B. C\xf4ng nghi\u1ec7p luy\u1ec7n kim.\nC. \u0110\u1ed3n \u0111i\u1ec1n cao su.        D. C\xf4ng nghi\u1ec7p h\xf3a ch\u1ea5t.\n\nC\xe2u 2. N\u1ed9i dung n\xe0o sau \u0111\xe2y ph\u1ea3n \xe1nh \u0111\xfang t\xecnh h\xecnh Vi\u1ec7t Nam sau Hi\u1ec7p \u0111\u1ecbnh Gi\u01a1nev\u01a1 n\u0103m 1954 v\u1ec1 \u0110\xf4ng D\u01b0\u01a1ng?\nA. \u0110\u1ea5t n\u01b0\u1edbc t\u1ea1m th\u1eddi b\u1ecb chia c\u1eaft l\xe0m hai mi\u1ec1n Nam, B\u1eafc. \n*B. Mi\u1ec1n B\u1eafc ch\u01b0a \u0111\u01b0\u1ee3c gi\u1ea3i ph\xf3ng. \nC. Mi\u1ec1n Nam \u0111\xe3 \u0111\u01b0\u1ee3c gi\u1ea3i ph\xf3ng.\nD. C\u1ea3 n\u01b0\u1edbc \u0111\u01b0\u1ee3c gi\u1ea3i ph\xf3ng v\xe0 ti\u1ebfn l\xean x\xe2y d\u1ef1ng ch\u1ee7 ngh\u0129a x\xe3 h\u1ed9i. \n\nC\xe2u 3. Trong \u0110\xf4ng . Xu\xe2n 1953.1954, b\u1ed9 \u0111\u1ed9i ch\u1ee7 l\u1ef1c Vi\u1ec7t Nam m\u1edf chi\u1ebfn d\u1ecbch ti\u1ebfn c\xf4ng qu\xe2n\nPh\xe1p \u1edf\xa0\nA. \u0110\xf4ng Kh\xea.    B. Th\xe1i Nguy\xean.     *C. Th\u1ecb x\xe3 Lai Ch\xe2u.     D. Qu\u1ea3ng Tr\u1ecb. \n\nPH\u1ea6N II. C\xe2u tr\u1eafc nghi\u1ec7m \u0111\xfang sai. Trong m\u1ed7i \xfd a), b), c), d) \u1edf m\u1ed7i c\xe2u, th\xed sinh ch\u1ecdn \u0111\xfang ho\u1eb7c sai.\nC\xe2u 4. M\u1ed9t cu\u1ed9c thi b\u1eafn cung c\xf3 20 ng\u01b0\u1eddi tham gia. Trong l\u1ea7n b\u1eafn \u0111\u1ea7u ti\xean c\xf3 18 ng\u01b0\u1eddi b\u1eafn tr\xfang m\u1ee5c ti\xeau. Trong l\u1ea7n b\u1eafn th\u1ee9 hai c\xf3 15 ng\u01b0\u1eddi b\u1eafn tr\xfang m\u1ee5c ti\xeau. Trong l\u1ea7n b\u1eafn th\u1ee9 ba ch\u1ec9 c\xf2n 10 ng\u01b0\u1eddi b\u1eafn tr\xfang m\u1ee5c ti\xeau.\n*a) S\u1ed1 ng\u01b0\u1eddi b\u1eafn tr\u01b0\u1ee3t m\u1ee5c ti\xeau trong l\u1ea7n \u0111\u1ea7u ti\xean l\xe0 2.\nb) S\u1ed1 ng\u01b0\u1eddi b\u1eafn tr\u01b0\u1ee3t m\u1ee5c ti\xeau trong l\u1ea7n b\u1eafn th\u1ee9 hai l\xe0 6.\nc) S\u1ed1 ng\u01b0\u1eddi b\u1eafn tr\u01b0\u1ee3t m\u1ee5c ti\xeau trong l\u1ea7n b\u1eafn th\u1ee9 nh\u1ea5t v\xe0 th\u1ee9 hai nhi\u1ec1u nh\u1ea5t l\xe0 8.\n*d) S\u1ed1 ng\u01b0\u1eddi b\u1eafn tr\xfang m\u1ee5c ti\xeau trong c\u1ea3 ba l\u1ea7n b\u1eafn \xedt nh\u1ea5t l\xe0 3.\nC\xe2u 5. L\u1edbp   c\xf3 40 h\u1ecdc sinh, trong \u0111\xf3 c\xf3 27 h\u1ecdc sinh tham gia c\xe2u l\u1ea1c b\u1ed9 b\xf3ng r\u1ed5 v\xe0 25 h\u1ecdc sinh tham gia c\xe2u l\u1ea1c b\u1ed9 b\xf3ng \u0111\xe1.\n*a) S\u1ed1 h\u1ecdc sinh tham gia c\xe2u l\u1ea1c b\u1ed9 b\xf3ng r\u1ed5 ho\u1eb7c tham gia c\xe2u l\u1ea1c b\u1ed9 b\xf3ng \u0111\xe1 nhi\u1ec1u nh\u1ea5t l\xe0 40.\nb) S\u1ed1 h\u1ecdc sinh tham gia c\u1ea3 hai c\xe2u l\u1ea1c b\u1ed9 b\xf3ng r\u1ed5 v\xe0 b\xf3ng \u0111\xe1 \xedt nh\u1ea5t l\xe0 10.\nc) S\u1ed1 h\u1ecdc sinh kh\xf4ng tham gia c\u1ea3 hai c\xe2u l\u1ea1c b\u1ed9 b\xf3ng r\u1ed5 v\xe0 b\xf3ng \u0111\xe1 \xedt nh\u1ea5t l\xe0 1.\nd) S\u1ed1 h\u1ecdc sinh kh\xf4ng tham gia c\u1ea3 hai c\xe2u l\u1ea1c b\u1ed9 b\xf3ng r\u1ed5 v\xe0 b\xf3ng \u0111\xe1 nhi\u1ec1u nh\u1ea5t l\xe0 10.\n\n---------------------------H\u1ebeT------------------------\nB\u1ea3ng \u0111\xe1p \xe1n\n1A 2B 3C\nC\xe2u 4: a)\u0110 b)S c)S d)\u0110\nC\xe2u 5: a)\u0110 b)S c)S d)S"],n.EXAM_FULL_EN=["Question 1.I used to __________ in Germany when I was 7.\nA. to live \nB. live \nC. living \nD. lived\nQuestion 2.She\u2019s used to ____________ late at night.\nA. working \nB. work \nC. to work \nD. worked\nQuestion 3.Mr. Bean has lived in Vietnam for 4 years. He _____________ the hot climate here.\nA. are used to \nB. gets used to \nC. used to \nD. uses to\nQuestion 4.Mai is used to ___________ her house by herself.\nA. clean \nB. cleaning \nC. cleaned \nD. to clean\n------THE END------\nANSWER KEYS\n1B 2A 3B 4B\nInstructions\nQuestion 1. explain for q1\nQuestion 2. explain for q2\nQuestion 3. explain for q3\nQuestion 4. explain for q4","Part 1. Answer from 1 - 2\nQuestion 1.I used to __________ in Germany when I was 7.\nA. to live \nB. live \nC. living \nD. lived\nQuestion 2.She\u2019s used to ____________ late at night.\nA. working \nB. work \nC. to work \nD. worked\nPart 2. Answer from 2 - 4\nQuestion 3.Mr. Bean has lived in Vietnam for 4 years. He _____________ the hot climate here.\nA. are used to \nB. gets used to \nC. used to \nD. uses to\nQuestion 4.Mai is used to ___________ her house by herself.\nA. clean \nB. cleaning \nC. cleaned \nD. to clean\n------THE END------\nANSWER KEYS\n1B 2A 3B 4B\nInstructions\nQuestion 1. explain for q1\nQuestion 2. explain for q2\nQuestion 3. explain for q3\nQuestion 4. explain for q4","Mark the letter A, B, C, or D on your answer sheet to indicate the underlined part that needs correction in each of the following questions\n\nQuestion 1.(VD) Every [A:member] of the class [B:were] invited [C:to] the party by [D:the form teacher].\n\nQuestion 2.(NB) For [A:such] a demanding job, you [B:will need] [C:qualifications], soft skills and [D:having full commitment].\n\nQuestion 3. In a restaurant, [A:if we] want to call the water, we can raise our hand and [B:wave it] [C:slight to signal] that we need [D:assistance].\n\nQuestion 4. Manufacturers [A:may use] food additives [B:for preserving], to color, to flavor, or to [C:fortify] [D:foods].\n\nANSWER KEYS\n1b 2d 3a 4b","Question 1.I used to __________ in Germany when I was 7.\n*A. to live \nB. live \nC. living \nD. lived\nQuestion 2.She\u2019s used to ____________ late at night.\nA. working \n*B. work \nC. to work \nD. worked\nQuestion 3.Mr. Bean has lived in Vietnam for 4 years. He _____________ the hot climate here.\nA. are used to \nB. gets used to \n*C. used to \nD. uses to\nQuestion 4.Mai is used to ___________ her house by herself.\nA. clean \nB. cleaning \nC. cleaned \n*D. to clean\n------THE END------\nInstructions\nQuestion 1. explain for q1\nQuestion 2. explain for q2\nQuestion 3. explain for q3\nQuestion 4. explain for q4","Ph\u1ea7n 1. TR\u1eaeC NGHI\u1ec6M\nC\xe2u 1. Trong cu\u1ed9c khai th\xe1c thu\u1ed9c \u0111\u1ecba l\u1ea7n th\u1ee9 hai \u1edf \u0110\xf4ng D\u01b0\u01a1ng 1919.1929, th\u1ef1c d\xe2n Ph\xe1p t\u1eadp trung \u0111\u1ea7u t\u01b0 v\xe0o\n*A. Ng\xe0nh ch\u1ebf t\u1ea1o m\xe1y.      B. C\xf4ng nghi\u1ec7p luy\u1ec7n kim.\nC. \u0110\u1ed3n \u0111i\u1ec1n cao su.        D. C\xf4ng nghi\u1ec7p h\xf3a ch\u1ea5t.\n\nC\xe2u 2. N\u1ed9i dung n\xe0o sau \u0111\xe2y ph\u1ea3n \xe1nh \u0111\xfang t\xecnh h\xecnh Vi\u1ec7t Nam sau Hi\u1ec7p \u0111\u1ecbnh Gi\u01a1nev\u01a1 n\u0103m 1954 v\u1ec1 \u0110\xf4ng D\u01b0\u01a1ng?\nA. \u0110\u1ea5t n\u01b0\u1edbc t\u1ea1m th\u1eddi b\u1ecb chia c\u1eaft l\xe0m hai mi\u1ec1n Nam, B\u1eafc. \n*B. Mi\u1ec1n B\u1eafc ch\u01b0a \u0111\u01b0\u1ee3c gi\u1ea3i ph\xf3ng. \nC. Mi\u1ec1n Nam \u0111\xe3 \u0111\u01b0\u1ee3c gi\u1ea3i ph\xf3ng.\nD. C\u1ea3 n\u01b0\u1edbc \u0111\u01b0\u1ee3c gi\u1ea3i ph\xf3ng v\xe0 ti\u1ebfn l\xean x\xe2y d\u1ef1ng ch\u1ee7 ngh\u0129a x\xe3 h\u1ed9i. \n\nC\xe2u 3. Trong \u0110\xf4ng . Xu\xe2n 1953.1954, b\u1ed9 \u0111\u1ed9i ch\u1ee7 l\u1ef1c Vi\u1ec7t Nam m\u1edf chi\u1ebfn d\u1ecbch ti\u1ebfn c\xf4ng qu\xe2n\nPh\xe1p \u1edf\xa0\nA. \u0110\xf4ng Kh\xea.    B. Th\xe1i Nguy\xean.     *C. Th\u1ecb x\xe3 Lai Ch\xe2u.     D. Qu\u1ea3ng Tr\u1ecb. \n\nPH\u1ea6N II. C\xe2u tr\u1eafc nghi\u1ec7m \u0111\xfang sai. Trong m\u1ed7i \xfd a), b), c), d) \u1edf m\u1ed7i c\xe2u, th\xed sinh ch\u1ecdn \u0111\xfang ho\u1eb7c sai.\nC\xe2u 4. M\u1ed9t cu\u1ed9c thi b\u1eafn cung c\xf3 20 ng\u01b0\u1eddi tham gia. Trong l\u1ea7n b\u1eafn \u0111\u1ea7u ti\xean c\xf3 18 ng\u01b0\u1eddi b\u1eafn tr\xfang m\u1ee5c ti\xeau. Trong l\u1ea7n b\u1eafn th\u1ee9 hai c\xf3 15 ng\u01b0\u1eddi b\u1eafn tr\xfang m\u1ee5c ti\xeau. Trong l\u1ea7n b\u1eafn th\u1ee9 ba ch\u1ec9 c\xf2n 10 ng\u01b0\u1eddi b\u1eafn tr\xfang m\u1ee5c ti\xeau.\n*a) S\u1ed1 ng\u01b0\u1eddi b\u1eafn tr\u01b0\u1ee3t m\u1ee5c ti\xeau trong l\u1ea7n \u0111\u1ea7u ti\xean l\xe0 2.\nb) S\u1ed1 ng\u01b0\u1eddi b\u1eafn tr\u01b0\u1ee3t m\u1ee5c ti\xeau trong l\u1ea7n b\u1eafn th\u1ee9 hai l\xe0 6.\nc) S\u1ed1 ng\u01b0\u1eddi b\u1eafn tr\u01b0\u1ee3t m\u1ee5c ti\xeau trong l\u1ea7n b\u1eafn th\u1ee9 nh\u1ea5t v\xe0 th\u1ee9 hai nhi\u1ec1u nh\u1ea5t l\xe0 8.\n*d) S\u1ed1 ng\u01b0\u1eddi b\u1eafn tr\xfang m\u1ee5c ti\xeau trong c\u1ea3 ba l\u1ea7n b\u1eafn \xedt nh\u1ea5t l\xe0 3.\nC\xe2u 5. L\u1edbp   c\xf3 40 h\u1ecdc sinh, trong \u0111\xf3 c\xf3 27 h\u1ecdc sinh tham gia c\xe2u l\u1ea1c b\u1ed9 b\xf3ng r\u1ed5 v\xe0 25 h\u1ecdc sinh tham gia c\xe2u l\u1ea1c b\u1ed9 b\xf3ng \u0111\xe1.\n*a) S\u1ed1 h\u1ecdc sinh tham gia c\xe2u l\u1ea1c b\u1ed9 b\xf3ng r\u1ed5 ho\u1eb7c tham gia c\xe2u l\u1ea1c b\u1ed9 b\xf3ng \u0111\xe1 nhi\u1ec1u nh\u1ea5t l\xe0 40.\nb) S\u1ed1 h\u1ecdc sinh tham gia c\u1ea3 hai c\xe2u l\u1ea1c b\u1ed9 b\xf3ng r\u1ed5 v\xe0 b\xf3ng \u0111\xe1 \xedt nh\u1ea5t l\xe0 10.\nc) S\u1ed1 h\u1ecdc sinh kh\xf4ng tham gia c\u1ea3 hai c\xe2u l\u1ea1c b\u1ed9 b\xf3ng r\u1ed5 v\xe0 b\xf3ng \u0111\xe1 \xedt nh\u1ea5t l\xe0 1.\nd) S\u1ed1 h\u1ecdc sinh kh\xf4ng tham gia c\u1ea3 hai c\xe2u l\u1ea1c b\u1ed9 b\xf3ng r\u1ed5 v\xe0 b\xf3ng \u0111\xe1 nhi\u1ec1u nh\u1ea5t l\xe0 10.\n\n---------------------------H\u1ebeT------------------------\nB\u1ea3ng \u0111\xe1p \xe1n\n1A 2B 3C\nC\xe2u 4: a)\u0110 b)S c)S d)\u0110\nC\xe2u 5: a)\u0110 b)S c)S d)S"],n})();var t=M(65879),Gn=M(32965);let ho=(()=>{class n{constructor(e){this.cdnService=e}renderContent(e){const i=JSON.parse(e.questionContent||"{}");if("image"==(e.isImage&&i[0].url?"image":"text"))return`<img width="700" src="${this.cdnService.getMyCdn(i[0].url)}">`;{const r=/@\[\][^@\[\]]+@\[\]/g;let s=`<p>${i[0].content.replace(r,"[h\xecnh]")}</p>`;return JSON.parse(e.answerConfig||"[]").forEach(c=>{s+=`<p><b>${c.key}.</b>${c.content.replace(r,"[h\xecnh]")}</p>`}),s}}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(Gn.E))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var po=M(82228),Pi=M(50749),Ke=M(54),Ku=M(19662),Hs=M(59694),ga=M(78953),mi=M(46558);let xa=(()=>{class n{convertQuestions(e,i,a){return new Promise(r=>{this.reset(),e.forEach(s=>{const l=this.commonService.willDeleteParseJson(s.answerConfig||"[]");s.questionContent?.includes("<img ")&&this.replaceImageCdnInContent(s,"questionContent"),s.questionText?.includes("<img ")&&this.replaceImageCdnInContent(s,"questionText"),s.answerMedia?.includes("<img ")&&this.replaceImageCdnInContent(s,"answerMedia"),s.mediaMeta?.includes("<img ")&&this.replaceImageCdnInContent(s,"mediaMeta"),l.forEach(c=>{c.content.includes("<img ")&&this.replaceImageCdnInContent(c,"content")}),this.actionRunAfterConvert.push(()=>{s.answerConfig=JSON.stringify(l)})}),this.imageMaps.forEach(s=>{this.taskConvertBase64ToCanvas.addTask(this,this.startConvertCanvas,[s])}),this.taskConvertBase64ToCanvas.start().then(s=>{if(s.errs.length>0)a(s.errs,void 0);else{let c=0;const d=[],h=()=>{const _=document.createElement("canvas");_.width=this.sizeDefaultCanvas,_.height=this.sizeDefaultCanvas;const x=_.getContext("2d");x&&(x.fillStyle="white",x.fillRect(0,0,this.sizeDefaultCanvas,this.sizeDefaultCanvas)),d.push({cdn:"",cX:0,cY:0,canvas:_,imgs:[]})};h(),s.datas.forEach((_,x)=>{var b=d[d.length-1];b.cX+_.canvas.width+4>this.sizeDefaultCanvas?(b.cX=4,b.cY+=c+4,c=0):b.cX+=4,b.cY+_.canvas.height>this.sizeDefaultCanvas&&(h(),b=d[d.length-1]);var T=b.canvas.getContext("2d");b.imgs.push({x:b.cX,y:b.cY,width:_.canvas.width,height:_.canvas.height,index:x}),T?.drawImage(_.canvas,0,0,_.canvas.width,_.canvas.height,b.cX,b.cY,_.canvas.width,_.canvas.height),b.cX+=_.canvas.width,c=c<_.canvas.height?_.canvas.height:c}),d[0].imgs.length>0&&d.forEach(_=>{this.taskUploadImage.addTask(this,this.startUploadFile,[_])}),this.taskUploadImage.start().then(_=>{if(_.errs.length>0)a(s.errs,void 0);else{let x=!0;_.datas.forEach(b=>{b.imgs.forEach(T=>{const P=s.datas[T.index];if(P){const U={link:b.cdn,data:{x:T.x,y:T.y,width:T.width,height:T.height}};P.objs.forEach(q=>{if(q[P.path])if(this.commonService.isJson(q[P.path])){const W=this.commonService.willDeleteParseJson(q[P.path]);Object.prototype.hasOwnProperty.call(W,"renderedStr")?(W.renderedStr=W.renderedStr.replace(P.base,`@[]${JSON.stringify(U)}@[]`),q[P.path]=JSON.stringify(W)):q[P.path]=q[P.path].replace(P.base,`@[]${JSON.stringify(U)}@[]`)}else q[P.path]=q[P.path].replace(P.base,`@[]${JSON.stringify(U)}@[]`);else x=!1})}})}),x?(this.actionRunAfterConvert.forEach(b=>{b()}),e.forEach((b,T)=>{let P=this.commonService.willDeleteParseJson(b.mediaMeta||"{}"),U=i[T];const q={id:0,name:b.name,extension:"text",content:b.questionContent,groupContent:P.renderedStr,metaData:{isFixAns:Number(b.isFixAns),forcedFixAns:!1,groupType:b.groupType?Number(b.groupType):void 0}};U&&(q.vMetaEditor=U.meta),b.questionContent=JSON.stringify([q])}),r()):a(s.errs,void 0,!0)}})}})})}reset(){this.imageMaps=[],this.actionRunAfterConvert=[]}replaceImageCdnInContent(e,i){var a=e[i];if(this.commonService.isJson(e[i])){const l=this.commonService.willDeleteParseJson(e[i]);Object.prototype.hasOwnProperty.call(l,"renderedStr")&&(a=l.renderedStr)}let r=a.matchAll(this.pattern_image);for(;;){let l=r.next();if(l.done)break;let c=l.value[0];var s=this.imageMaps.findIndex(d=>d.base===c&&d.path===i);-1===s?this.imageMaps.push({base:c,cdn:"",data:null,objs:[e],path:i,canvas:document.createElement("canvas")}):this.imageMaps[s].objs.push(e)}}startConvertCanvas(e){return new Promise((i,a)=>{const r=new Image;r.crossOrigin="anonymous",r.onload=()=>{let l=1;if(r.width>this.sizeDefaultCanvas&&(l=this.sizeDefaultCanvas/r.width),r.height>this.sizeDefaultCanvas){let d=this.sizeDefaultCanvas/r.height;d<l&&(l=d)}e.canvas.width=r.width*l,e.canvas.height=r.height*l,e.canvas.getContext("2d")?.drawImage(r,0,0,r.width,r.height,0,0,e.canvas.width,e.canvas.height),i(e)},r.onerror=()=>{e.canvas.width=1,e.canvas.height=1;const l=e.canvas.getContext("2d");l&&(l.fillStyle="white",l.fillRect(0,0,1,1)),i(e)};let s=this.pattern_base64.exec(e.base);null!=s?r.src=s[0]:a(new Error("l\u1ed7i regex"))})}startUploadFile(e){return new Promise((i,a)=>{const r=this.dataURLtoFile(e.canvas.toDataURL("image/png",1));(0,xe.hv)(r).then(s=>{this.apiUploadService.uploadToCdnProgressForExamQuestionContent(s).subscribe(l=>{l.type!=j.dt.UploadProgress&&(1==l.success&&l.data?i({...e,cdn:l.data.url||""}):a(new Error(this.commonService.translateToKeyParam("lang_auto_khong_upload_duoc_anh_vui_long_thu_lai_sau_loi",l.message??"none"))))})})})}dataURLtoFile(e){let i=this.getFileName(e);for(var a=e.split(","),r=a[0].match(/:(.*?);/),s=atob(a[1]),l=s.length,c=new Uint8Array(l);l--;)c[l]=s.charCodeAt(l);return new File([c],i,{type:r&&r.length>0?r[1]:"png"})}getFileName(e){var i=e.split("").reverse().join(""),a=i.indexOf(";"),r=i.indexOf("/",a);return i.substring(a,r).split("").reverse().join("")}constructor(e,i){this.commonService=e,this.apiUploadService=i,this.sizeDefaultCanvas=1100,this.actionRunAfterConvert=[],this.imageMaps=[],this.pattern_base64=/data:image[^"'\\]+/i,this.pattern_image=/<img[^>]+data:image[^>]+>/g,this.taskConvertBase64ToCanvas=new $t.Q(50,{function:(a,r)=>{this.callbackBase64ToCanvas&&this.callbackBase64ToCanvas(a,r)}},0),this.taskUploadImage=new $t.Q(10,{function:(a,r)=>{this.callbackUploadImage&&this.callbackUploadImage(a,r)}},0)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(mi.z),t.LFG(po.W))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var ba=M(16287),No=M(88489),Fi=M(2783),tu=M(94126),va=M(87789);let Oo=(()=>{class n{constructor(e,i){this.commonService=e,this.classroomService=i}redirectUrlAddParamClassroom(e,i="",a=[]){const r=this.commonService.getMyQueryParam("classroomId"),s=this.commonService.getMyQueryParam("indexSession");r||s?this.commonService.myNavigationWithQueryString(e,i+this.commonService.getCurrentQueryString(i?"&":"?",a)):this.commonService.myNavigation(e)}redirectUrlAddParamClassroomReload(e){const i=this.commonService.getMyQueryParam("classroomId"),a=this.commonService.getMyQueryParam("indexSession");let r=-1===e.indexOf("?")?"?":"";e=i||a?e+this.commonService.getCurrentQueryString(r):e,window.location.href=this.commonService.getLocalRouter(e)}getBackLinkUrlParamClassroom(e){const i=this.commonService.getMyQueryParam("classroomId");return i?`/admin/student/classroom-details/${i}/3`+this.commonService.getCurrentQueryString("?"):e}getProgramTraining(){const e=Number(this.commonService.getMyQueryParam("classroomId")??"0");return new it.y(i=>{this.classroomService.apiClassroomsClassroomIdProgramsProgramIdGet(e,0).subscribe(a=>{a&&i.next(a)})})}findCurrentAndNextSession(e,i){return e.reduce((r,s,l)=>(r.found&&(r.nextIndex=l,r.nextObj=s,r.found=!1),s.id===i&&(r.currentIndex=l,r.currentObj=s,r.found=l<e.length-1),r),{currentIndex:void 0,currentObj:void 0,nextIndex:void 0,nextObj:void 0,found:!1})}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(mi.z),t.LFG(va.um))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var hr=M(27161);const Wu=["popupConfirm"],mc=["mobileEditor"],Xd=["popupOnlyImageEditor"];function tm(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",29),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.conf.showInfomationQuests.show=!0)}),t.O4$(),t.TgZ(1,"svg",30),t._UZ(2,"circle",31)(3,"line",32)(4,"line",33),t.qZA(),t.kcU(),t.TgZ(5,"span",34),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()()}2&n&&(t.xp6(6),t.Oqu(t.lcZ(7,1,"lang_auto_thong_tin_de_thi")))}function mh(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",35),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.conf.showErrorsQuests.show=!0)}),t.O4$(),t.TgZ(1,"svg",30),t._UZ(2,"path",36)(3,"path",37)(4,"path",38)(5,"path",39),t.qZA(),t.kcU(),t.TgZ(6,"span",34),t._uU(7),t.ALo(8,"replace"),t.ALo(9,"mytranslate"),t.qZA()()}if(2&n){const e=t.oxw(3);t.xp6(7),t.Oqu(t.Dn7(8,1,t.lcZ(9,5,"lang_auto_co_n_loi_khong_the_luu"),"_n_",e.errs.length.toString()))}}const em=function(n){return{height40:n}};function nm(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",40)(1,"div",41)(2,"span",42),t._UZ(3,"lucide-icon",43),t.qZA(),t.TgZ(4,"span",34),t._uU(5),t.ALo(6,"mytranslate"),t.qZA(),t.TgZ(7,"input",44),t.NdJ("ngModelChange",function(a){t.CHM(e);const r=t.oxw(3);return t.KtG(r.conf.inputMoveToQuestionValue=a)})("keyup.enter",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.handleGotoQuestionView())})("focus",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.handleSetStatusTooltipQuestionView(!0))})("focusout",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.handleSetStatusTooltipQuestionView(!1))}),t.qZA(),t.TgZ(8,"button",45),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.handleGotoQuestionView())}),t._uU(9),t.ALo(10,"mytranslate"),t.qZA()()()}if(2&n){const e=t.oxw(3);t.Q6J("ngClass",t.VKq(9,em,!e.conf.inputMoveToQuestion)),t.xp6(5),t.Oqu(t.lcZ(6,5,"lang_testbank_create_exam_width_file_pdf_go_to")),t.xp6(2),t.Q6J("ngModel",e.conf.inputMoveToQuestionValue)("min",1),t.xp6(2),t.Oqu(t.lcZ(10,7,"lang_auto_den"))}}function hc(n,o){if(1&n&&(t.TgZ(0,"div",23),t._UZ(1,"div",24),t.TgZ(2,"div",25),t.YNc(3,tm,8,3,"div",26),t.YNc(4,mh,10,7,"div",27),t.YNc(5,nm,11,11,"div",28),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(3),t.Q6J("ngIf",e.lstQuest.length>0&&0==e.editQuestId),t.xp6(1),t.Q6J("ngIf",e.errs.length>0),t.xp6(1),t.Q6J("ngIf",0==e.editQuestId)}}function Gs(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"div",56)(2,"button",57),t.NdJ("click",function(){const r=t.CHM(e).index,s=t.oxw(4);return t.KtG(!!s.attachFiles&&s.attachFiles.splice(r,1))}),t.TgZ(3,"mat-icon",58),t._uU(4,"close"),t.qZA()(),t.TgZ(5,"span",59),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw(4);return t.KtG(s.onShowFile(r,-1))}),t.TgZ(6,"span",60),t._uU(7),t.qZA()()()()}if(2&n){const e=o.$implicit;t.xp6(6),t.Q6J("title",e.name),t.xp6(1),t.Oqu(e.name)}}function $s(n,o){if(1&n&&(t.TgZ(0,"div",53)(1,"div",54),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.YNc(4,Gs,8,2,"div",55),t.qZA()),2&n){const e=t.oxw(3);t.xp6(2),t.hij(" ",t.lcZ(3,2,"lang_auto_danh_sach_file_dinh_kem")+":"," "),t.xp6(2),t.Q6J("ngForOf",e.attachFiles)}}function Vu(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",61)(1,"question-dropper",62),t.NdJ("onDropFile",function(a){t.CHM(e);const r=t.oxw(3);return t.KtG(r.onDropFile(a))}),t.qZA()()}}function hh(n,o){if(1&n&&(t.TgZ(0,"div",46)(1,"div",47)(2,"div",48)(3,"div",49),t._UZ(4,"azt-dynamic-hook",50),t.qZA(),t.YNc(5,$s,5,4,"div",51),t.YNc(6,Vu,2,0,"div",52),t.qZA()()()),2&n){const e=t.oxw(2);t.xp6(4),t.Q6J("content",e.text),t.xp6(1),t.Q6J("ngIf",e.attachFiles.length>0),t.xp6(1),t.Q6J("ngIf",0==e.editQuestId)}}function ph(n,o){if(1&n&&(t.TgZ(0,"mat-icon",74),t.ALo(1,"mytranslate"),t.ALo(2,"mytranslate"),t._uU(3," push_pin"),t.qZA()),2&n){const e=t.oxw(2).$implicit;t.s9C("matTooltip",e.isFixGroup?t.lcZ(1,1,"lang_auto_cau_hoi_trong_nhom_dang_duoc_co_dinh"):t.lcZ(2,3,"lang_auto_dap_an_trong_cau_hoi_dang_duoc_co_dinh"))}}function eu(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",75)(1,"span",76),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"span",77),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2).$implicit,r=t.oxw(2);return t.KtG(r.setFixGroup(a))}),t._uU(5),t.ALo(6,"mytranslate"),t.ALo(7,"mytranslate"),t.ALo(8,"mytranslate"),t.qZA()()}if(2&n){const e=t.oxw(2).$implicit;t.xp6(2),t.Oqu(t.lcZ(3,3,"tieu_de_nhom")),t.xp6(3),t.AsE(" ",e.isFixGroup?t.lcZ(6,5,"lang_auto_bo_co_dinh"):t.lcZ(7,7,"lang_auto_co_dinh")," ",t.lcZ(8,9,"lang_auto_cau_trong_nhom"),"")}}function _h(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",78)(1,"app-quest-header",79),t.NdJ("onChangeQuest",function(a){t.CHM(e);const r=t.oxw(2).index,s=t.oxw(2);return t.KtG(s.onChangeQuest(a,r))})("onRandomQuest",function(){t.CHM(e);const a=t.oxw(2).index,r=t.oxw(2);return t.KtG(r.onRandomOne(a))})("onApplyAllTag",function(a){t.CHM(e);const r=t.oxw(2).index,s=t.oxw(2);return t.KtG(s.onApplyAllTag(a,r))})("onError",function(a){t.CHM(e);const r=t.oxw(4);return t.KtG(r.commonService.snackError(a))})("onLabelClick",function(a){t.CHM(e);const r=t.oxw(4);return t.KtG(r.editorFocus(a))})("onHotKeyPointSync",function(a){t.CHM(e);const r=t.oxw(2).index,s=t.oxw(2);return t.KtG(s.setPointBelow(a,r))})("onExtraInfo",function(a){t.CHM(e);const r=t.oxw(4);return t.KtG(r.setExtra(a))})("onCut",function(){t.CHM(e);const a=t.oxw(2).$implicit,r=t.oxw(2);return t.KtG(r.onCut(a))})("onDel",function(){t.CHM(e);const a=t.oxw(2).$implicit,r=t.oxw(2);return t.KtG(r.onDel(a))})("onCopy",function(){t.CHM(e);const a=t.oxw(2).$implicit,r=t.oxw(2);return t.KtG(r.onCopy(a))}),t.qZA()()}if(2&n){const e=t.oxw(2),i=e.$implicit,a=e.index,r=t.oxw(2);t.xp6(1),t.Q6J("q",i)("notOnlyQuestEdit",!r.editQuestId)("index",a)("questionTags",r.questionTags)}}function y_(n,o){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.label)}}function Xu(n,o){if(1&n&&(t.TgZ(0,"span"),t.YNc(1,y_,2,1,"span",83),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Q6J("ngIf",e.isCorrect)}}function w_(n,o){if(1&n&&(t.TgZ(0,"div")(1,"span"),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.YNc(4,Xu,2,1,"span",55),t.qZA()),2&n){const e=t.oxw(4).$implicit;t.xp6(2),t.Oqu(t.lcZ(3,2,"lang_auto_dap_an_dung")+":"),t.xp6(2),t.Q6J("ngForOf",e.quest.answers)}}function im(n,o){if(1&n&&(t.TgZ(0,"span",89),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Oqu(e)}}function C_(n,o){if(1&n&&(t.TgZ(0,"div",86)(1,"span",87),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.YNc(4,im,2,1,"span",88),t.qZA()),2&n){const e=t.oxw(4).$implicit;t.xp6(2),t.Oqu(t.lcZ(3,2,"lang_auto_dap_an")+":"),t.xp6(2),t.Q6J("ngForOf",e.strAns)}}function fh(n,o){1&n&&(t.TgZ(0,"span",94),t._UZ(1,"div",95)(2,"div",96),t.qZA())}const pc=function(n){return{"an-true":n}};function T_(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",90),t.YNc(1,fh,3,0,"span",91),t.TgZ(2,"div",92),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw(4).$implicit,l=t.oxw(2);return t.KtG(l.setCorrectAns(s,r.ans))}),t.ALo(3,"mytranslate"),t._uU(4),t.qZA(),t.TgZ(5,"div",93),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw(6);return t.KtG(s.editorFocus(r.ans.parts))}),t._UZ(6,"azt-dynamic-hook",50),t.qZA()()}if(2&n){const e=o.$implicit,i=t.oxw(6);t.xp6(1),t.Q6J("ngIf",e.ans.isCorrect),t.xp6(1),t.s9C("matTooltip",i.showTooltip?t.lcZ(3,7,"lang_auto_cick_de_chon_lam_dap_an_dung"):void 0),t.Q6J("matTooltipPosition","right")("ngClass",t.VKq(9,pc,e.ans.isCorrect)),t.xp6(2),t.hij(" ",e.ans.label," "),t.xp6(1),t.Q6J("ngClass",t.VKq(11,pc,e.ans.isCorrect)),t.xp6(1),t.Q6J("content",e.renderedStr)}}function gh(n,o){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,w_,5,4,"div",83),t.YNc(2,C_,5,4,"div",84),t.YNc(3,T_,7,13,"div",85),t.qZA()),2&n){const e=t.oxw(3).$implicit;t.Gre("box-ans quest-ans-ver-",e.v,""),t.xp6(1),t.Q6J("ngIf","pdf-1-0"==e.v),t.xp6(1),t.Q6J("ngIf",4==e.type&&e.strAns),t.xp6(1),t.Q6J("ngForOf",e.answers)}}const nu=function(n){return{"padding-mobile":n}};function k_(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",97)(1,"div",98)(2,"span"),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()(),t.TgZ(5,"div",99),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(3).$implicit,r=t.oxw(2);return t.KtG(r.editorFocus(a.quest.help))}),t._UZ(6,"azt-dynamic-hook",50),t.qZA()()}if(2&n){const e=t.oxw(3).$implicit,i=t.oxw(2);t.Gre("box-help quest-help-ver-",e.v,""),t.Q6J("ngClass",t.VKq(8,nu,i.isMobile)),t.xp6(3),t.Oqu(t.lcZ(4,6,"lang_auto_huong_dan_giai_upper")),t.xp6(3),t.Q6J("content",e.helpRenderedStr)}}function xh(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",80)(1,"div",81),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2).$implicit,r=t.oxw(2);return t.KtG(r.editorFocus(a.quest.parts))}),t._UZ(2,"azt-dynamic-hook",50),t.qZA(),t.YNc(3,gh,4,6,"div",22),t.YNc(4,k_,7,10,"div",82),t.qZA()}if(2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.Gre("tex2jax_process box-content quest-ver-",e.v,""),t.xp6(1),t.Q6J("content",e.renderedStr),t.xp6(1),t.Q6J("ngIf",!e.quest.isGroup),t.xp6(1),t.Q6J("ngIf",e.helpRenderedStr)}}function bh(n,o){if(1&n&&(t._UZ(0,"div",100),t.ALo(1,"safeContentQuestion")),2&n){const e=t.oxw(2).$implicit;t.Q6J("innerHTML",t.lcZ(1,1,e.err),t.oJD)}}function A_(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",101)(1,"button",102),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2).$implicit,r=t.oxw(2);return t.KtG(r.showFeedbackQuestionDialog(a))}),t.ALo(2,"mytranslate"),t._UZ(3,"lucide-icon",103),t.qZA()()}2&n&&(t.xp6(1),t.s9C("matTooltip",t.lcZ(2,1,"lang_auto_bao_loi")))}function S_(n,o){if(1&n&&(t.TgZ(0,"div",47),t.YNc(1,ph,4,5,"mat-icon",66),t._UZ(2,"div",67),t.ALo(3,"safeContentQuestion"),t.YNc(4,eu,9,11,"div",68),t.YNc(5,_h,2,4,"div",69),t.TgZ(6,"div",70)(7,"div"),t.YNc(8,xh,5,6,"div",71),t.YNc(9,bh,2,3,"div",72),t.qZA()(),t.YNc(10,A_,4,3,"div",73),t.qZA()),2&n){const e=t.oxw().$implicit,i=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.isFixGroup||e.quest.isFixAns),t.xp6(1),t.Q6J("innerHTML",t.lcZ(3,7,i.errorQuestionView.makeErr(e,i.lstQuest)),t.oJD),t.xp6(2),t.Q6J("ngIf",e.quest.isGroup),t.xp6(1),t.Q6J("ngIf",!e.quest.isGroup),t.xp6(3),t.Q6J("ngIf",!e.err),t.xp6(1),t.Q6J("ngIf",e.err),t.xp6(1),t.Q6J("ngIf",e.id&&"azota"==i.type)}}function O_(n,o){1&n&&t._UZ(0,"div",104)}const E_=function(n){return{height:n}};function M_(n,o){if(1&n&&(t.TgZ(0,"div",63),t.YNc(1,S_,11,9,"div",64),t.YNc(2,O_,1,0,"div",65),t.qZA()),2&n){const e=o.$implicit,i=o.index,a=t.oxw(2);t.hYB("id","quest",e.quest.isGroup?"-g":"","-",e.quest.label,""),t.Q6J("ngStyle",t.VKq(6,E_,a.lstQuest.length<a.maxQuestEnableLazy?"auto":e.lazyQuestView&&e.lazyQuestView.curHeight?e.lazyQuestView.curHeight:"200px")),t.uIk("data-idx-quest",i),t.xp6(1),t.Q6J("ngIf",a.lstQuest.length<a.maxQuestEnableLazy||(null==e.lazyQuestView?null:e.lazyQuestView.show)),t.xp6(1),t.Q6J("ngIf",!(a.lstQuest.length<a.maxQuestEnableLazy||null!=e.lazyQuestView&&e.lazyQuestView.show))}}function I_(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",114),t.NdJ("click",function(){t.CHM(e),t.oxw(3);const a=t.MAs(5);return t.KtG(a.click())}),t.O4$(),t.TgZ(1,"svg",30),t._UZ(2,"path",115)(3,"polyline",116)(4,"line",117),t.qZA(),t.kcU(),t.TgZ(5,"span",34),t._uU(6,"Upload File"),t.qZA()()}}function td(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",118),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.openLibrary())}),t.O4$(),t.TgZ(1,"svg",30),t._UZ(2,"line",119)(3,"line",120),t.qZA(),t.kcU(),t.TgZ(4,"span",34),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()()}2&n&&(t.xp6(5),t.hij(" ",t.lcZ(6,1,"lang_auto_chon_tu_ngan_hang")," "))}function L_(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",121),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.openMathEditor())}),t.O4$(),t.TgZ(1,"svg",30),t._UZ(2,"path",122),t.qZA(),t.kcU(),t.TgZ(3,"span",34),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()()}2&n&&(t.xp6(4),t.hij(" ",t.lcZ(5,1,"lang_auto_chen_cong_thuc")," "))}function ed(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",123),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.togglePromptCreateExam())}),t.TgZ(1,"span",124),t._UZ(2,"img",125),t.ALo(3,"convertCdnLinkOfGitHub"),t.qZA(),t.TgZ(4,"span"),t._uU(5," AzotaAI "),t.qZA()()}2&n&&(t.xp6(2),t.Q6J("src",t.lcZ(3,1,"images/azotaAI.png"),t.LSH))}function P_(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",144),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(4);return t.KtG(a.format())}),t.O4$(),t.TgZ(2,"svg",136),t._UZ(3,"rect",145)(4,"rect",146)(5,"path",147),t.qZA(),t.kcU(),t.TgZ(6,"span"),t._uU(7),t.ALo(8,"mytranslate"),t.qZA()()()}2&n&&(t.xp6(7),t.hij(" ",t.lcZ(8,1,"lang_auto_format")," "))}function N_(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",135),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(4);return t.KtG(a.saveLocal())}),t.O4$(),t.TgZ(2,"svg",30),t._UZ(3,"path",115)(4,"polyline",148)(5,"line",149),t.qZA(),t.kcU(),t.TgZ(6,"span"),t._uU(7),t.ALo(8,"mytranslate"),t.qZA()()()}2&n&&(t.xp6(7),t.hij(" ",t.lcZ(8,1,"lang_auto_luu_ve_may")," "))}function Z_(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",126)(1,"button",127),t.O4$(),t.TgZ(2,"svg",128),t._UZ(3,"circle",129)(4,"circle",130)(5,"circle",131),t.qZA()(),t.kcU(),t.TgZ(6,"mat-menu",null,132)(8,"div",133)(9,"ul",134)(10,"li")(11,"a",135),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.randomAllAgain())}),t.O4$(),t.TgZ(12,"svg",136),t._UZ(13,"path",137)(14,"path",138)(15,"path",139)(16,"path",140),t.qZA(),t.kcU(),t.TgZ(17,"span"),t._uU(18),t.ALo(19,"mytranslate"),t.qZA()()(),t.YNc(20,P_,9,3,"li",83),t.YNc(21,N_,9,3,"li",83),t.TgZ(22,"li")(23,"label",141),t.NdJ("click",function(a){return a.stopPropagation()}),t.O4$(),t.TgZ(24,"svg",30),t._UZ(25,"path",122),t.qZA(),t.kcU(),t.TgZ(26,"span"),t._uU(27),t.ALo(28,"mytranslate"),t.qZA(),t.TgZ(29,"div",142)(30,"input",143),t.NdJ("change",function(a){return t.CHM(e),t.oxw(3).onOffChemistry(),t.KtG(a.stopPropagation())}),t.qZA()()()()()()()()}if(2&n){const e=t.MAs(7),i=t.oxw(3);t.xp6(1),t.Q6J("matMenuTriggerFor",e),t.xp6(17),t.hij(" ",t.lcZ(19,6,"lang_auto_lay_ngau_nhien_lai_toan_bo")," "),t.xp6(2),t.Q6J("ngIf","user"==i.type),t.xp6(1),t.Q6J("ngIf",0==i.editQuestId),t.xp6(6),t.hij(" ",t.lcZ(28,8,"lang_core_bat_cong_thuc_hoa_hoc")," "),t.xp6(3),t.Q6J("checked",i.isChemistry)}}function Ua(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",150)(1,"div",151),t._uU(2),t.ALo(3,"mytranslate"),t.TgZ(4,"a",152),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.loadExample(1,a.commonService.getCurrentLang()))}),t._uU(5),t.ALo(6,"mytranslate"),t.qZA(),t._uU(7," | "),t.TgZ(8,"a",153),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.loadExample(2,a.commonService.getCurrentLang()))}),t._uU(9),t.ALo(10,"mytranslate"),t.qZA(),t._uU(11," | "),t.TgZ(12,"a",154),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.loadExample(3,a.commonService.getCurrentLang()))}),t._uU(13),t.ALo(14,"mytranslate"),t.ALo(15,"mytranslate"),t.qZA(),t._uU(16," | "),t.TgZ(17,"a",155),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.loadExample(4,a.commonService.getCurrentLang()))}),t._uU(18),t.ALo(19,"mytranslate"),t.qZA(),t._uU(20," | "),t.TgZ(21,"a",156),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.loadExample(5,a.commonService.getCurrentLang()))}),t._uU(22),t.ALo(23,"mytranslate"),t.ALo(24,"mytranslate"),t.qZA()()()}2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,6,"lang_auto_noi_dung_mau")+": "," "),t.xp6(3),t.Oqu(t.lcZ(6,8,"lang_auto_mau")+" 1"),t.xp6(4),t.Oqu(t.lcZ(10,10,"lang_auto_mau")+" 2"),t.xp6(4),t.Oqu(t.lcZ(14,12,"lang_auto_mau")+" 3 ("+t.lcZ(15,14,"lang_core_there_is_fill_in_the_blank")+")"),t.xp6(5),t.Oqu(t.lcZ(19,16,"lang_auto_mau")+" 4"),t.xp6(4),t.hij("",t.lcZ(23,18,"lang_auto_mau")+" 5("+t.lcZ(24,20,"lang_exam_template_has_true_false")+")"," "))}function vh(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",157)(1,"azt-ai-chat-box",158),t.NdJ("close",function(a){t.CHM(e);const r=t.oxw(3);return t.KtG(r.closeDialogPromptCreateExam(a))})("createQuestion",function(a){t.CHM(e);const r=t.oxw(3);return t.KtG(r.aiCreateQuestion(a))}),t.qZA()()}if(2&n){const e=t.oxw(3);t.xp6(1),t.Q6J("questList",e.lstQuest)}}const om=function(n){return{height:n}};function yh(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"div",105)(2,"div",24),t.YNc(3,I_,7,0,"div",106),t.YNc(4,td,7,3,"div",107),t.YNc(5,L_,6,3,"div",108),t.YNc(6,ed,6,3,"div",109),t.YNc(7,Z_,31,10,"div",110),t.qZA()(),t.TgZ(8,"azt-monaco-editor",111),t.NdJ("onStartProcessFile",function(a){t.CHM(e);const r=t.oxw(2);return t.KtG(r.processFile(a))})("onInit",function(a){t.CHM(e);const r=t.oxw(2);return t.KtG(r.onEditorInitComplete(a))}),t.qZA(),t.YNc(9,Ua,25,22,"div",112),t.YNc(10,vh,2,1,"div",113),t.qZA()}if(2&n){const e=t.oxw(2);t.Gre("relative col-editor tex2jax_ignore ",e.isMobile?"azt-order-1":"",""),t.xp6(3),t.Q6J("ngIf","user"==e.type),t.xp6(1),t.Q6J("ngIf",0==e.editQuestId&&"user"==e.type),t.xp6(1),t.Q6J("ngIf","user"==e.type),t.xp6(1),t.Q6J("ngIf",0==e.editQuestId&&"user"==e.type&&e.willShowAIBox),t.xp6(1),t.Q6J("ngIf",0==e.editQuestId),t.xp6(1),t.Akn(t.VKq(15,om,e.conf.heightContent+"px")),t.Q6J("config",e.aztLangConfig)("readOnly","azota"==e.type)("editorApiService",e.editorApiService),t.xp6(1),t.Q6J("ngIf",0==e.editQuestId),t.xp6(1),t.Q6J("ngIf",e.showPromptCreateExam)}}function iu(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",15)(1,"div",16),t.YNc(2,hc,6,3,"div",17),t.TgZ(3,"div",18),t.NdJ("scroll",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onScrollQuest())})("mousedown",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onMouseDown())})("mouseup",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onMouseUp())}),t.YNc(4,hh,7,3,"div",19),t.YNc(5,M_,3,8,"div",20),t._UZ(6,"div",21),t.qZA()(),t.YNc(7,yh,11,17,"div",22),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Gre("col-questions box bg-slate-100 dark:bg-darkmode-400 rounded-none ",e.isMobile?"azt-order-2":"",""),t.xp6(1),t.Q6J("ngIf",e.lstQuest.length>0),t.xp6(2),t.Q6J("ngIf",""!=e.text||e.attachFiles.length>0),t.xp6(1),t.Q6J("ngForOf",e.lstQuest),t.xp6(2),t.Q6J("ngIf",""!=e.aztLangConfig)}}function am(n,o){if(1&n&&(t.TgZ(0,"div",159)(1,"div",160)(2,"div",161)(3,"span",162),t._UZ(4,"azt-loading-ui"),t.qZA()(),t.TgZ(5,"div",163),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()()()),2&n){const e=t.oxw();t.xp6(6),t.Oqu(t.lcZ(7,1,e.conf.logConfig.msg))}}function vs(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"similar-quest",164),t.NdJ("onClose",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.conf.similarQuest.show=!1)})("onInsert",function(a){t.CHM(e);const r=t.oxw();return t.KtG(r.replaceQuest(a))}),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("inp",e.lstQuestSimilar)}}function wh(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"show-errors-quests",165),t.NdJ("onClose",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.conf.showErrorsQuests.show=!1)}),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("lstErrors",e.errs)}}function kl(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"show-info-quests",166),t.NdJ("onClose",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.conf.showInfomationQuests.show=!1)})("onNextQuestion",function(a){t.CHM(e);const r=t.oxw();return t.KtG(r.onInfoQuestionNexQuestion(a))}),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("lstQuest",e.lstQuest)}}function pr(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"only-image-editor",167),t.NdJ("onClose",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.conf.imageEditor.show=!1)})("onPushImage",function(a){t.CHM(e);const r=t.oxw();return t.KtG(r.onPushImageAction(a))}),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("el_target",e.conf.imageEditor.el)}}function Ba(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",168)(1,"main-config-homework",169),t.NdJ("onBack",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.conf.showEditor())}),t.qZA()()}}function D_(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",170)(1,"app-info-general",171),t.NdJ("onBack",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.conf.showEditor())}),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("listQuestionIdCreateByAI",e.listQuestionIdCreateByAI)}}function Ir(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",170)(1,"azt-config-share-document",172),t.NdJ("onBack",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.conf.showEditor())}),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("type",e.shareTypeDocument.exam)("isCreateQuestionToEditor",!0)}}function ou(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",173)(1,"app-test-finder",174),t.NdJ("closeTestFinder",function(a){t.CHM(e);const r=t.oxw();return t.KtG(r.closeLibrary(a))}),t.qZA()()}}const rm=function(n){return{hiddenIpt:n}};class au{constructor(o){this.commonService=o,this.check=!1}makeErr(o,e,i){const a=this.isFullNoPoint(e);if(!this.check)return;if(!o.quest.isGroup&&(!o.point||o.point<=0)&&!a){let s=this.commonService.myTranslateInstant("lang_auto_vui_long_nhap_diem_cho_cau_hoi"),l=this.commonService.myTranslateInstant("lang_auto_nay");return i?s:`<span class="question-standalone-is-invalid-validation">${s} ${l}</span>`}let r=o.answers.filter(s=>s.ans.isCorrect).length>0;if(1==o.type&&!r){let s=this.commonService.myTranslateInstant("lang_auto_vui_long_nhap_dap_an_cho_cau_hoi"),l=this.commonService.myTranslateInstant("lang_auto_nay");return i?s:`<span class="question-standalone-is-invalid-validation">${s} ${l}</span>`}}makeFirstErr(o){this.check=!0;for(const e of o)if(void 0!==this.makeErr(e,o,void 0))return e}isFullNoPoint(o){return o.filter(e=>!e.point).length===o.length}}let nd=(()=>{class n extends St.Q{handleGotoQuestionView(){this.revealQuest(this.conf.inputMoveToQuestionValue)||this.showErrorSnack(this.commonService.myTranslateInstant("lang_auto_khong_tim_thay_cau_can_di_chuyen_den")??"")}onInfoQuestionNexQuestion(e){this.conf.showInfomationQuests.show=!1,this.conf.inputMoveToQuestionValue=e.toString(),this.handleGotoQuestionView()}handleSetStatusTooltipQuestionView(e){this.conf.inputMoveToQuestionTooltip=e}handleFileDrop(e){""!==this.text?this.onDropFile(e[0]):this.processFile(e[0])}convertPartItem(e){return 0===e.length?"":/^\[@((.)+)\]/g.test(e[0].text??"")?e[0].lineIdx+"_____"+e[0].text?.split("]=>")[0]+"]":""}convertQuestion(e,i,a,r,s){return new Promise(l=>{const c=[];a.answers.forEach(T=>{c.push({key:T.ans.label,content:T.renderedStr})});let h=this.sAztAnswerTypeService.isTrueFalseAnswer({answerType:a.type})?a.answers.filter(T=>!0===T.ans.isCorrect):a.answers.find(T=>!0===T.ans.isCorrect),_="";_=Array.isArray(h)?JSON.stringify(h.map(T=>T.ans.label)):h?JSON.stringify([h.ans.label]):a.strAns&&a.strAns?.length>0?JSON.stringify(a.strAns):void 0;const b={name:this.commonService.myTranslateInstant("lang_auto_cau_hoi_tu_editor")+" "+(r+1),answerType:a.type,categoryId:0,questionContent:a.renderedStr,questionText:a.renderedStr,answerConfig:JSON.stringify(c),groupId:s,answerResult:_,totalQuestion:this.lstQuest.length,version:"4",isFixAns:a.quest.isFixAns?1:0,isImage:1,answerMedia:a.helpRenderedStr,mediaMeta:JSON.stringify(e),metadata:JSON.stringify(a?.meta),groupType:e?.isFixGroup?"1":void 0,tags:a.tag&&a.tag.length?a.tag.map(T=>T.code??""):[],__path:this.convertPartItem(a.quest.parts)};i.exam?.questionObj.listQuestions?.push(b),i.exam?.rootQuests.push(a),a.audio&&(0,xe.F0)(a.audio.type)?a.attachments&&"[]"!==a.attachments?(b.attachments=a.attachments,l()):this.apiUploadService.uploadToCdnProgressForTestbankQuestionAttachment(a.audio).subscribe(T=>{T.type!=j.dt.UploadProgress&&(1==T.success?b.attachments=JSON.stringify([T.data]):this.showErrorSnack("lang_auto_upload_file_audio_that_bai"),l())}):l()})}uploadAttHomeworkFile(e,i,a){return new Promise(r=>{this.apiUploadService.uploadToCdnForHomework(a).subscribe(s=>{1==s.success&&s.data&&(i.push(s.data),i.length===this.attachFiles.length&&e.homework&&(e.homework.files=JSON.stringify(i)),r())})})}uploadFileProcess(e){return new Promise(i=>{this.apiUploadService.uploadToCdnProgressForTestbankDocx(e).subscribe(a=>{a.type!=j.dt.UploadProgress&&(a.success&&a.data?.url?(this.cdnExamFile=a.data?.url??"",this.sendTrackUploadFileToApi(this.cdnExamFile).subscribe(()=>{i()})):i())})})}sendTrackUploadFileToApi(e){return new it.y(i=>{let a={categoryId:this.conf.cur_cateId?Number(this.conf.cur_cateId):void 0,cdnExamFile:e,turnUuid:this.uploadTurnUuid??""};this.examFileService.apiExamFileSaveObjPost(a).subscribe(r=>{i.next(!0),i.complete()})})}saveAction(){if(this.lstQuest.length>0){const e=this.errorQuestionView.makeFirstErr(this.lstQuest);if(null!=e)return this.commonService.snackError(this.errorQuestionView.makeErr(e,this.lstQuest,!0)||""),void this.revealQuest(e.quest.label+"")}this.loadingManager.size>0?this.popupConfirm?.startConfirm("lang_auto_msg_confirm_watting_loading").then(e=>{e&&(this.stopAudio(),this.save())}):(this.stopAudio(),this.save())}parseAzt(e){let i=this;var a=new FileReader;a.readAsText(e,"UTF-8"),a.onload=r=>{let l=JSON.parse(a.result??"");if(!l.text)return i.showErrorSnack("lang_auto_file_khong_dung_dinh_dang"),this.conf.logConfig.status=!1,void(this.conf.logConfig.msg=void 0);i.images=l.imgs,i.mathMap=new Map;for(let c of l.maths)i.mathMap.set(c[0],c[1]);i.extraMap=new Map;for(let c of l.infos)i.extraMap.set(c[0],c[1]);i.aztEditor?._editor.setValue(l.text),this.conf.logConfig.status=!1,this.conf.logConfig.msg=void 0},a.onerror=r=>{i.showErrorSnack("lang_auto_file_khong_dung_dinh_dang"),this.conf.logConfig.status=!1,this.conf.logConfig.msg=void 0}}saveCdn(e){return new Promise(i=>{if(e.exam?.examObj){let a=new Date,r=`user-${this.userService.getUserObj().id}-de-azota-${a.getDate()}${a.getMonth()+1}${a.getFullYear()}-${a.getTime()}.azt`;const s=this.generateFileAzt();if(s){const l=new File([s],r,{type:"text/plain"});this.apiUploadService.uploadToCdnForExamEditor(l).subscribe(c=>{c.type!=j.dt.UploadProgress&&(1==c.success&&c.data&&e.exam?.examObj&&(e.exam.examObj.cdnEditorFile=c.data.url??""),i())})}else i()}else i()})}saveLocal(){let e=new Date,i=`de-azota-${e.getDate()}${e.getMonth()+1}${e.getFullYear()}-${e.getTime()}.azt`;const a=this.generateFileAzt();a&&(window.navigator.msSaveOrOpenBlob?window.navigator.msSaveBlob(a,i):this.commonService.downloadFileByUrl(window.URL.createObjectURL(a),i))}generateFileAzt(){let e=this.aztEditor?._editor.getValue().trim()??"";if(""!=e){let i=[],a=[];for(let l of this.mathMap)i.push(l);for(let l of this.extraMap)a.push(l);let s=JSON.stringify({text:e,imgs:this.images,maths:i,infos:a});return new Blob([s],{type:"text/plain"})}return null}makeExpandInfoObj(){const i=this.lstQuest.map(a=>a.quest.olabel?.replace(/[`~!@#$%^&*()_|+\-=?;:'",.<>\{\}\[\]\\\/]/gi,"").replace(/[0-9 ]/g,"")).filter(a=>a&&a.length>0);return i.length>0?{label:(a=i[0]??this.commonService.myTranslateInstant("lang_auto_cau")??"",a.charAt(0).toUpperCase()+a.slice(1))}:{};var a}save(){if(this.lstQuest.length>0||""!==this.text){let e=this.commonService.myTranslateInstant("lang_auto_dang_xu_ly_du_lieu");this.conf.logConfig.msg=e,this.conf.logConfig.status=!0;const i=new $t.Q(10,{function:(r,s)=>{this.conf.logConfig.msg=`${e} ${Math.floor(r/s*100)}%`}},0),a={};if(this.lstQuest.length>0){this.conf.logConfig.status=!0,this.conf.logConfig.msg="lang_auto_dang_chuan_bi_du_lieu_de_thi";const s=(this.lstQuest[0].quest.isGroup?this.lstQuest[1]:this.lstQuest[0]).quest.label??1;let l,c=[],d=!0;a.exam={examObj:{categoryId:Number(this.conf.cur_cateId),name:this.title.value,startQuestionIndex:s,cdnExamFile:this.cdnExamFile},questionObj:{listQuestions:[]},examConfig:[],rootQuests:[]};const h=this.errorQuestionView.isFullNoPoint(this.lstQuest);let x=he(10,this.lstQuest.filter(b=>!b.quest.isGroup).length);this.lstQuest.forEach((b,T)=>{if(this.sAztAnswerTypeService.isTrueFalseAnswer({answerType:b.type})&&b.answers.forEach(P=>P.ans.label=P.ans.label.toUpperCase()),b.quest.isGroup)l=b,d=!1;else{d||(d=!0,c.push(T-(c.length+1)));let P=this.commonService.myTranslateInstant("lang_auto_cau_hoi_tu_editor"),U=this.parseExtra(b.quest.parts[0].text??""),q=this.extraMap.get(U.id);const B={name:P+" "+(T-c.length+1),point:h?x[T-c.length]??1:b.point??1,oldId:q?.oldId};a.exam?.examConfig.push(B),i.addTask(this,this.convertQuestion,[l,a,b,T-c.length,c.length])}}),0==this.editQuestId&&i.addTask(this,this.saveCdn,[a]),a.exam.examObj.firstInGroupIndexes=JSON.stringify(c),a.exam.examObj.expandInfoObj=this.makeExpandInfoObj()}else if(a.homework={name:this.title.value,content:this.text,deadline:void 0,files:void 0,mustVerified:void 0,whenShowAnswer:void 0,categoryId:void 0,classroomIds:void 0},this.attachFiles.length>0){const r=[];this.attachFiles.forEach(s=>{i.addTask(this,this.uploadAttHomeworkFile,[a,r,s])})}i.start().then(()=>{if(this.editQuestId){let r={exceptQuestionIds:[],matrix:[]};r.matrix?.push({paths:[{type:"QUEST",id:this.editQuestId}],number:1,key:`[@${this.editQuestId}:Question]=>0`}),this.questionService.apiQuestionsMatrixPost(r).subscribe(s=>{if(1==s.success&&s.data&&s.data.length>0&&s.data[0].questions&&1===s.data[0].questions.length){const l=s.data[0].questions[0];if(a.exam?.questionObj.listQuestions&&1==a.exam.questionObj.listQuestions.length){let c=this.commonService.myTranslateInstant("lang_auto_xay_ra_loi_trong_qua_trinh_xu_ly_hinh_anh_cua_de")??"";this.questionSaveService.convertQuestions(a.exam.questionObj.listQuestions,a.exam.rootQuests,(d,h=c)=>{this.conf.logConfig.status=!1,this.conf.logConfig.msg=void 0,this.showErrorSnack(h)}).then(()=>{if(a.exam?.questionObj.listQuestions&&1==a.exam.questionObj.listQuestions.length){const h=a.exam.questionObj.listQuestions[0],_=this.commonService.myParseJson(h.questionContent??""),x=this.commonService.myParseJson(l.content??"");if(!(_&&_[0]&&x&&x[0]))return this.conf.logConfig.msg=void 0,this.conf.logConfig.status=!1,void this.showErrorSnack(s.message??"");Object.prototype.hasOwnProperty.call(x[0],"groupContent")&&(_[0].groupContent=x[0].groupContent),Object.prototype.hasOwnProperty.call(x[0],"groupUrl")&&(_[0].groupContent=`@[]{"link":"${x[0].groupUrl}","data":${JSON.stringify({x:0,y:0,width:-1,height:-1})}}@[]`),Object.prototype.hasOwnProperty.call(x[0],"name")&&(_[0].name=x[0].name),Object.prototype.hasOwnProperty.call(x[0],"id")&&(_[0].id=x[0].id),Object.prototype.hasOwnProperty.call(l,"groupId")&&(h.groupId=l.groupId),Object.prototype.hasOwnProperty.call(l,"groupType")&&(h.groupType=l.groupType),h.questionContent=JSON.stringify(_),delete h.__path,this.questionService.apiQuestionsIdPut(this.editQuestId,{id:h.id??0,groupId:h.groupId??0,name:h.name,metadata:h.metadata,isImage:h.isImage,questionContent:h.questionContent,answerMedia:h.answerMedia,questionText:h.questionText,answerType:h.answerType??1,answerConfig:h.answerConfig,coordinates:h.coordinates,answerResult:h.answerResult,tags:h.tags,mediaId:h.mediaId??0,mediaMeta:h.mediaMeta,attachments:h.attachments,version:h.version,isFixAns:h.isFixAns??0,groupType:h.groupType}).subscribe(b=>{if(this.conf.logConfig.msg=void 0,this.conf.logConfig.status=!1,1==b.success){this.showSuccessSnack("lang_auto_chinh_sua_cau_hoi_thanh_cong");let T=this.conf.getBackLink();this.commonService.myNavigationBySpecialQueryString(T)}else this.showErrorSnack(b.message??"")})}})}}else this.showErrorSnack(s.message??"")})}else this.conf.logConfig.status=!1,this.conf.logConfig.msg=void 0,this.editorOutputDataService.setOutputData(a),this.editorOutputDataService.redirectToConfig(this.conf)})}else this.showErrorSnack("lang_auto_khong_tim_thay_noi_dung_can_luu")}cancelAction(){this.popupConfirm?.startConfirm("lang_auto_confirm_destroy_content").then(e=>{e&&location.reload()})}openLibrary(){this.conf.startLibrary=!0}switchFilePdfProcess(e){this.editorOutputDataService.setFileProcess(e);const a="/admin/testbank/create-file-pdf-ver2/"+(null!=this.conf.cur_cateId?this.conf.cur_cateId:0),r=`?backto=${encodeURIComponent("/admin/testbank/azota-editor/"+(null!=this.conf.cur_cateId?this.conf.cur_cateId:0))}`;this.paramClassroomService.redirectUrlAddParamClassroom(a,r,["backto"])}switchFileXlsxProcess(e){this.editorOutputDataService.setFileProcess(e);const a="/admin/testbank/create-exam-by-excel/"+(null!=this.conf.cur_cateId?this.conf.cur_cateId:0),r=`?backto=${encodeURIComponent("/admin/testbank/azota-editor/"+(null!=this.conf.cur_cateId?this.conf.cur_cateId:0))}`;this.paramClassroomService.redirectUrlAddParamClassroom(a,r,["backto"])}clearData(){this.images=[],this.editedImages=new Map,this.lstQuest=[],this.text="",this.attachFiles=[],this.renderCache=new Map,this.apiCallbackCache=new Map,this.apiDataCache=new Map,this.fillQuestCache=new Map,this.loadingManager=new Map,this.editorParsedData=void 0,this.curQuest=void 0,this.errs=[],this.curMathId=1,this.curExtraId=1,this.mathMap=new Map,this.extraMap=new Map,this.matrixLoadedData=void 0}processFile(e){if(this.editQuestId>0&&!(0,xe.Or)(e.type))return void this.showErrorSnack("lang_chi_co_the_tai_file_anh_vui_long_dam_bao_tai_dung_dinh_dang_anh");this.conf.logConfig.status=!0,this.conf.logConfig.msg="lang_auto_dang_cho_xu_ly_file";let i=e.name.split(".").pop();return"docx"==i?.trim().toLowerCase()?(this.clearData(),this.title=new f.NI(e.name,{nonNullable:!0}),void this.parseDocx(e)):"azt"==i?.trim().toLowerCase()?(this.clearData(),this.title=new f.NI(e.name,{nonNullable:!0}),void this.parseAzt(e)):(0,xe.Or)(e.type)?(this.insertImgFromFile(e),this.conf.logConfig.status=!1,void(this.conf.logConfig.msg=void 0)):void this.fileParser.start(e).then(a=>{"pdf"===a.type?this.switchFilePdfProcess(e):"docx"===a.type?(this.title=new f.NI(e.name,{nonNullable:!0}),this.images=[],a.data.maps.forEach(r=>{this.images.push(r)}),this.aztEditor&&this.aztEditor._editor.setValue(a.data.str.join("\n"))):"xlsx"===a.type?this.switchFileXlsxProcess(e):(this.showErrorSnack("lang_auto_dinh_dang_file_khong_ho_tro_vui_long_tai_file_dot"),this.conf.logConfig.status=!1,this.conf.logConfig.msg=void 0)}).catch(()=>{this.showErrorSnack("lang_auto_dinh_dang_file_khong_ho_tro_vui_long_tai_file_dot"),this.conf.logConfig.status=!1,this.conf.logConfig.msg=void 0})}attachImg(e){let i=this.commonService.myTranslateInstant("lang_auto_nhap_noi_dung");this.aztEditor?._editor.setValue(i),this.onDropFile(e),this.conf.logConfig.status=!1,this.conf.logConfig.msg=void 0}openFile(e){this.processFile(e.target.files[0]),e.target.value=null}parseDocx(e){let i=new mn(this.commonService);this.uploadFileProcess(e).then(()=>{this.isUploadFileDocx=!0}),i.handleFileSelect(e,a=>{this.images=[],this.mathMap.clear();let r=[];for(let _ of a.data)if("img"==_.type)this.images.push({id:_.key,link:_.value,cssStyle:_.cssStyle}),_.cssStyle&&_.cssStyle.split(";").length>2&&r.push([`^\\[img:\\$${_.key}\\$\\]`,`[img:$${_.key}$]\n`]);else if("mathml"==_.type){let x=+_.key.split("_")[1];this.mathMap.set(_.key,{id:x,str:_.value,raw:_.docx,lineIdx:0,startCol:0,endCol:0}),x>this.curMathId&&(this.curMathId=x)}this.curMathId++;let s=[],l=-1;for(let _ of a.lines){if(l++,0==_.length)continue;let x="";if(Array.isArray(_[0])&&Array.isArray(_[_.length-1])&&Array.isArray(_[Math.floor(_.length/2)])){let T=a.data.filter(U=>U.position==l&&"table"==U.type)[0];x=T&&T.borderLeftSize>0||s.length>0&&s[s.length-1].startsWith("[*")?"[* "+_.map(U=>U.map(q=>q.join("").replaceAll("\n","\\n")).join("\\n")).join(" | ")+" *]":_.map(U=>U.map(q=>q.join("").replaceAll("\n","\\n")).join("\\n")).join(" \t ")}else x=_.join("");for(let T of r)x=x.replaceAll(new RegExp(T[0],"g"),T[1]);let b=x.split("\n");for(let T of b)s.push(T)}(new fe).process(s);let d=this.processStyle(s);this.processMath(d),this.lstQuest=[],this.curQuest=void 0,this.aztEditor?.setPosition(1,0);let h=d.join("\n");this.aztEditor?._editor.setValue(h),this.conf.logConfig.status=!1,this.conf.logConfig.msg=void 0},(a,r,s)=>{let l=this.commonService.myTranslateInstant("lang_auto_dang_xu_ly");this.conf.logConfig.msg=`${l} ${s}...(${a}/${r})`},a=>{this.showErrorSnack("lang_auto_dinh_dang_file_khong_ho_tro_vui_long_tai_file_dot"),this.conf.logConfig.status=!1,this.conf.logConfig.msg=void 0})}format(){let i=(this.aztEditor?._editor.getValue()??"").split("\n"),a=i.length,r=i.length>0?i[i.length-1].length:0,s=this.aztEditor?.azotaIntel?.examIntel;s?.setLines(i);let l=s?.parse()??[],c=[],d=[],h=[],_=-999;for(let x of l){if(x.isGroup){let B=x.parts.map(W=>W.text??"").join("\n");c.push(B);continue}-999==_&&(_=x.label-1),x.label-_>1&&(x.olabel=x.olabel?.replace(x.label+"",_+1+""),x.label=_+1);let b=tt.Utils.capitalizeFirstLetter(x.olabel??x.label+"")+" ",T=b+x.parts.map(B=>B.text??"").join("\n"),P=0==x.answers.length||x.answers[0].isInline?void 0:x.answers.map(B=>(B.isCorrect?"   *":"    ")+B.label+". "+B.parts.map(W=>W.text??"").join("\n").trim()).join("\n"),U=x.help?b+x.help.map(B=>B.text??"").join("\n"):void 0,q=x.strAns?b+x.strAns:void 0;c.push(T),P&&c.push(P),U&&d.push(U),q&&h.push(q),_++}if(c.length>0){(h.length>0||d.length>0)&&c.push("----------------------"+this.commonService.myTranslateInstant("azt_lang_sugg_the_end")+"----------------------"),h.length>0&&(c.push(this.commonService.myTranslateInstant("azt_lang_sugg_ans_table")),c.push(...h)),d.length>0&&(c.push(this.commonService.myTranslateInstant("azt_lang_sugg_instruction")),c.push(...d));let x=c.join("\n"),b={startLineNumber:0,endLineNumber:a+100,startColumn:0,endColumn:r+100};this.aztEditor?._editor.executeEdits("",[{range:b,text:x}])}}processMath(e){let i=0;for(let a of e){let r=a.matchAll(this.MATH_PAT);for(;;){let s=r.next();if(s.done)break;let l=s.value[0],d=this.mathMap.get(s.value[1]);d&&(d.lineIdx=i+1,d.startCol=s.value.index+1,d.endCol=d.startCol+l.length)}i++}}processStyle(e){let i=/\[![!aibuchl]+:\$(([^\$]|\$[^\]])+)\$\]/g,a=/^\s*\[\*\s*[AC]\.[^\|]+\|\s*[BD]\..*\*\]\s*$/g,r=[],s=0;for(let T of e){a.test(e[s].replaceAll(i,"$1"))&&(e[s]=e[s].replaceAll("[*","").replaceAll("*]","").replaceAll("|"," ").trim(),T=e[s]);let q,P=T.matchAll(i),U=0;for(;;){let B=P.next();if(B.done)break;let W=B.value[0],G=W.indexOf(":"),nt=W.substring(1,G),ut=B.value.index-U,et=ut+B.value[1].length;q&&ut==q.e&&q.style==nt?q.e=et:(q={lineIdx:s,s:ut,e:et,style:nt},r.push(q)),U+=G+4}e[s]=T.replaceAll(i,"$1"),s++}let l=this.aztEditor?.azotaIntel?.examIntel;l?.setLines(e);let c=l?.parse()??[],d=[],h=new Map,_=0;for(let T of c){_++;for(let P of T.parts)d.push(P);for(let P of T.answers){let U=this.hasStyleAns(e,P.parts[0],r);""!=U&&h.set(`${T.label}-${T.group}-${P.label}-${_}`,U);for(let q of P.parts)d.push(q)}}for(let T of c)if(T.help)for(let P of T.help)d.push(P);this.applyStyle(e,d,r),l?.setLines(e),c=l?.parse()??[];let x=[];_=0;for(let T of c){_++;let P=new Map;if(!(T.answers.filter(U=>U.isCorrect).length>0)){for(let U of T.answers){let q=h.get(`${T.label}-${T.group}-${U.label}-${_}`);q&&""!=q&&P.set(q,P.has(q)?void 0:U.parts[0])}for(let U of P)if(U[1]){x.push(U[1]);break}}}for(let T=x.length-1;T>=0;T--){let P=x[T];e[P.lineIdx]=e[P.lineIdx].substring(0,P.b)+"*"+e[P.lineIdx].substring(P.b)}return e=this.processUnderlineAns(e),c.length>0?e.slice(c[0].parts[0].lineIdx):e}processUnderlineAns(e){let i=/\[[!bichl]*[!u]+[!bichl]*:\$(([^\$]|\$[^\]])+)\$\]/g,a=0,r=[];for(let s of e){if(/^[ABCD\.\s\t\*]+$/.test(s)&&""!=s.trim()&&a>0){let l=s;l=l.replaceAll(/[\s\t\.]+/g,"");let c=l.indexOf("*"),d=0;if(l=l.replaceAll(/[\*]+/g,""),"ABCDEFGH".indexOf(l)>=0){let h=e[a-1].match(i);if(h&&l.length==h.length){for(let x of h)e[a-1]=e[a-1].replace(x,x.replace(/\[[!bichl]*[!u]+[!bichl]*:\$/g,`[${c==d?"*":""}${l.substring(0,1)}:`).replace("$]","]")),r[r.length-1]=e[a-1],l=l.substring(1),d++;a++;continue}}}r.push(s),a++}return r}isRangeIntersec(e,i,a,r){return e<=a&&a<=i||a<=e&&e<=r}hasStyleAns(e,i,a){if(!i)return"";let r=a.filter(l=>l.lineIdx==i.lineIdx&&(l.s<=i.b&&l.e>=i.b||this.isRangeIntersec(l.s,l.e,i.s,i.e??999999)&&""!=e[l.lineIdx].substring(i.s,i.e).trim()&&e[l.lineIdx].substring(l.s,l.e).indexOf(e[l.lineIdx].substring(i.s,i.e).trim())>=0)),s=r&&r.length>0?r.map(l=>l.style).join():"";return s.indexOf("!u")>=0||s.indexOf("!b")>=0||s.indexOf("!hl")>=0||s.indexOf("!cl")>=0?s:""}applyStyle(e,i,a){for(let r=i.length-1;r>=0;r--){let s=i[r],l=a.filter(c=>c.lineIdx==s.lineIdx&&c.e>=s.s);for(let c=l.length-1;c>=0;c--){let d=l[c].s>=s.s?l[c].s:s.s,h=l[c].e<=(s.e??9999999)?l[c].e:s.e,_=l[c].style.replaceAll("!hl","").replaceAll("!cl","");if(d<h&&""!=_){let x=e[s.lineIdx],b=x.substring(d,h);""!=b.trim()&&(e[s.lineIdx]=x.substring(0,d)+"["+_+":$"+b+"$]"+x.substring(h))}}}}setCorrectAns(e,i){let a=[],r=0,s=0;this.editorFocus(i.parts);for(let l of e.answers){let c=l.ans.parts[0];if(!c)continue;let d=this.aztEditor?.getLineText(c.lineIdx+1);c.lineIdx!=s&&(r=0,s=c.lineIdx);let h=d.substring(c.b,c.b+1);this.sAztAnswerTypeService.isTrueFalseAnswer({answerType:e.type})?l.ans.label==i.label&&("*"!=h?(a.push(`${c.lineIdx}|${c.b+r}|${c.b+r}|*`),r++):(a.push(`${c.lineIdx}|${c.b+r}|${c.b+r+1}|`),r--)):("*"==h&&(a.push(`${c.lineIdx}|${c.b+r}|${c.b+r+1}|`),r--),l.ans.label==i.label&&"*"!=h&&(a.push(`${c.lineIdx}|${c.b+r}|${c.b+r}|*`),r++))}this.aztEditor?.runEditAction(a,this.aztEditor._editor,!0),this.showTooltip=!1}closeLibrary(e){this.conf.startLibrary=!1,this.conf.isFirstTime||(this.conf.isFirstTime=!0),e&&this.aztEditor&&this.aztEditor.insertLine(e.join("\n"))}parseTag(e){let a=e.trim(),s=a.matchAll(/^(\[!info:\d+\]\s*)?(\[[iubchl!]+:\$\s*)?[\[\(]\s*(VD|TH|NB|VDC|EASY|MEDIUM|HARD|HARDEST)\s*[\d\.]*\s*[\)\]]/g).next();return s.done?["",a]:(a=a.replace(/[\[\(]\s*(VD|TH|NB|VDC|EASY|MEDIUM|HARD|HARDEST)\s*[\d\.]*\s*[\)\]]\s*[:.]?/g," "),[s.value[3],a])}trimBr(e){return e.replaceAll("<br>","").trim()}parseExtra(e){if(e.startsWith("[@"))return{val:"",idx:0,id:this.trimBr(e)};let r=e.matchAll(/\[!info:\d+\]/g),s="",l=0;for(;;){let d=r.next();if(d.done)break;s=d.value[0],l=d.value.index;break}if(""==s)return{val:"",idx:0,id:"0"};let c=s.replace("[!info:","").replace("]","").trim();return{val:s,idx:l,id:c}}setExtra(e,i=!0){let a=e.q.quest.parts[0],r=this.parseExtra(a.text??"");"0"==r.id&&(r.id=this.curExtraId+"",this.curExtraId++);let s=this.extraMap.get(r.id);if(s||(s={d:e.q.point,audio:e.q.audio,file:void 0,fix:e.q.quest.isFixAns,tag:e.q.tag,replaceIdx:-1},this.extraMap.set(r.id,s)),"point"==e.type&&(s.d=e.data&&e.data>0?e.data:void 0),"audio"==e.type&&(s.audio=e.q.audio?e.q.audio:void 0,s.file=void 0),"fix"==e.type&&(s.fix=e.data?"fix":void 0),"tag"==e.type&&(s.tag=e.data),"replace"==e.type&&(s.replaceIdx=e.data),+r.id>0){let l=`[!info:${r.id}]`,c=a.s+r.idx,d=a.s+r.idx+r.val.length;e.q.quest.isGroup&&""==r.val&&(c=a.s+(a.text?.length??0)+10,d=c),this.aztEditor?.runEditAction([`${a.lineIdx}|${c}|${d}|${l}`],this.aztEditor._editor,i)}return i&&this.aztEditor?.setPosition(a.lineIdx+1,0),r.id}setFixGroup(e){e.isFixGroup=!e.isFixGroup,this.setExtra({q:e,type:"fix",data:e.isFixGroup})}randomAllAgain(){this.apiDataCache.clear(),this.fillQuestCache.clear(),this.apiCallbackCache.clear(),this.renderCache.clear(),this.lastMatrixHash="";let e=this.aztEditor?._editor.getValue().split("\n");this.onEditorChangeValue(e,this.editorParsedData??[])}reRender(){this.editorParsedData&&(this.lstQuest=this.editorParsedData.map((e,i)=>this.renderQuest(e,i)),this.text="")}onApplyAllTag(e,i){this.lstQuest.forEach((a,r)=>{r<=i||a.quest.isGroup||(a.tag=e,this.setExtra({type:"tag",data:e,q:this.lstQuest[r]},r==this.lstQuest.length-1))})}showHover(e,i,a){if(this.lstQuest)for(let r of this.lstQuest){let s=a;if(r.quest.parts[0].lineIdx==e-1&&/\[!info:\d+\]/.test(a)){let l=this.parseExtra(a),c="";if("0"!=l.id){let _=this.extraMap.get(l.id);_&&_.replaceIdx>=0&&(c=this.commonService.myTranslateInstant("lang_core_replace")+": "+_.replaceIdx)}let d=s.indexOf("[")+1,h=s.indexOf("]")+1;if(d<=i&&i<=h){let _=[],x=this.commonService.myTranslateInstant("lang_auto_diem"),b=this.commonService.myTranslateInstant("lang_auto_audio_file"),T=this.commonService.myTranslateInstant("lang_auto_file_dinh_kem"),P=this.commonService.myTranslateInstant("lang_auto_nhan"),U=this.commonService.myTranslateInstant("lang_auto_co_dinh");return r.point&&_.push(`${r.point} ${x}`),r.audio&&_.push(b+": "+r.audio.name),r.attachments&&_.push(T+": "+r.attachments),r.tag&&r.tag.length>0&&_.push(P+": "+r.tag.map(q=>q[this.commonService.getCurrentLang()+"Name"]).join(",")),(r.isFixGroup||r.quest.isFixAns)&&_.push(U),""!=c&&_.push(c),{lineIdx:e,s:d,e:h,text:_.join(", ")}}}}}onEditorChangeValue(e,i){clearTimeout(this.waitId),this.waitId=setTimeout(()=>{this.onEditorChangeValueExec(e,i)},0)}onEditorChangeValueExec(e,i){if(i&&i.length>0){this.errs=[],this.aztEditor?.setError([]),this.editorParsedData=i;let a=this.lstQuest.map((r,s)=>r.lazyQuestView&&r.lazyQuestView.show?{i:s,v:r.lazyQuestView}:{i:-1,v:void 0}).filter(r=>r.i>=0);this.lstQuest=[],this.loadMatrixQuest(this.editorParsedData).then(r=>{this.matrixLoadedData=r,this.lstQuest=i.map((l,c)=>this.renderQuest(l,c));for(let l of a){if(l.i>=this.lstQuest.length)break;this.lstQuest[l.i].lazyQuestView=l.v}i.forEach((l,c)=>{let d=l.answers.filter(h=>h.isCorrect).map(h=>h.label).join();if(d||(d=this.lstQuest[c].originCorrectAns),d||(d=""),"similar"!=this.lstQuest[c].v)for(let h of this.lstQuest[c].answers)h.ans.isCorrect=d.indexOf(h.ans.label)>=0}),this.text="",setTimeout(()=>{this.revealCurrentQuest()},200),this.validate();let s=this.aztEditor?._editor.getValue().split("\n");this.processMath(s)})}else this.lstQuest=[],e&&(this.text=this.renderText(e.join("<br>")))}loadMatrixQuest(e){return new Promise((i,a)=>{let r={exceptQuestionIds:[],matrix:[]},s=new Map;for(let c of e)if(c.parts[0].text?.startsWith("[@")){let d=c.parts[0].text.split("=>"),h=d[0]+"=>"+d[1].split("-")[0];if(s.has(h))continue;s.set(h,!0);let _=tt.Utils.parseInclude(c.parts[0].text);r.matrix?.push({number:_.getNum,key:h,paths:_.paths.map(x=>({type:x.type,id:x.id,groupIds:x.groupIds,tags:x.tags,answerTypes:x.answerTypes}))})}let l=r.matrix?.map(c=>c.key).join(":")??"";l!=this.lastMatrixHash?(this.lastMatrixHash=l,this.apiDataCache.clear(),this.fillQuestCache.clear(),this.apiCallbackCache.clear(),(r.matrix?.filter(h=>h.paths?.filter(_=>"KNOWLEDGE"==_.type).length??!1).length?this.questionService.apiQuestionsMatrixGlobalPost(r):this.questionService.apiQuestionsMatrixPost(r)).subscribe(h=>{i(1===h.success&&h.data?h.data:[])})):i(this.matrixLoadedData?this.matrixLoadedData:[])})}onMobileEditorChange(e){this.mobileEditorContent=e.lines.join("\n"),this.onEditorChangeValue(e.lines,e.data)}onEditorInitComplete(e){if(setTimeout(()=>{const r=!!this.commonService.getMyQueryParam("showAI");this.showPromptCreateExam=r},500),this.aztEditor=e.azotaEditor,this.aztEditor.setLang(this.commonService),this.aztEditor.setHoverCalback((r,s,l)=>this.showHover(r,s,l)),this.aztEditor.onChange((r,s)=>{if(this.editQuestId>0&&s.length>0){this.enableEdit=s.length>1,this.enableEdit&&this.showErrorSnack("lang_auto_khong_the_them_cau_hoi_moi");let l=this.conf.startIndex+1;(s=[s[0]])[0].olabel=s[0].olabel?.replace(s[0].label+"",l+""),s[0].label=l}this.onEditorChangeValue(r,s)}),this.aztEditor.onRefreshInclude((r,s)=>{if(this.timeOutDelayStatus.refresh){let l=Math.floor(((new Date).getTime()-this.timeOutDelayStatus.timeRefresh)/1e3);const c=this.timeOutDelayStatus.limitRefresh-(l>=5?0:l);this.showErrorSnack((this.commonService.myTranslateInstant("lang_auto_limit_time_refresh_question")??"").replace("@",c.toString()))}else{this.timeOutDelayStatus.refresh=!0,this.timeOutDelayStatus.timeRefresh=(new Date).getTime();let l=0;this.matrixLoadedData=[];let c=this.lstQuest.filter(d=>d.quest.parts[0].text?.startsWith(r)&&d.quest.parts[0].lineIdx==s-1).map(d=>d.id??0);for(let d of this.lstQuest){if(d.quest.parts[0].lineIdx==s-1){const h=d.quest.parts[0].text??"",_=l;let x=P=>{this.fillQuest(_,P)},b=P=>{this.fillError(_,P)};this.setExtra({q:this.lstQuest[_],type:"replace",data:-1});let T=new Mn(this.cdnService,this.commonService,x,this.apiCallbackCache,this.aztEditor,b,this.getIncludeIds(c),this.apiDataCache,this.matrixLoadedData);this.apiDataCache.delete(h),T.render(h,this.images,this.questionService)}l++}setTimeout(()=>{this.timeOutDelayStatus.refresh=!1},1e3*this.timeOutDelayStatus.limitRefresh)}}),this.aztEditor.onInsertQuestText((r,s)=>{let l=this.lstQuest.filter(c=>c.quest.parts[0].lineIdx==s-1)[0];if(l){let c=this.getQuestText(l);this.aztEditor?.setPosition(s,0),this.aztEditor?.removeText(s,0,999999,!1),this.aztEditor?.insertAtCurPos(c)}}),this.aztEditor.onInsertDetails((r,s)=>{let l=this.lstQuest.filter(T=>T.quest.parts[0].lineIdx==s-1);if(0==l.length)return;for(let T=0;T<l.length;T++)this.apiDataCache.delete(r+"=>"+T);let c=this.commonService.myTranslateInstant("lang_auto_cau"),d=l.map(T=>`${T.id}: ${c} ${T.quest.label}`),_=(l[0].quest.parts[0].text??"").split("=>")[0],x=l[0].quest.parts[0].text?.split("=>")[1],b=l[l.length-1].quest.parts[0].text?.split("=>")[1];if(x&&b){let T=+x,P=+b,U=_.split("].["),q=U[U.length-1],B=+tt.Utils.getNumberFromStr(q),W=P-T+1;U[U.length-1]=q.replace(" "+B+" "," "+(B-W)+" ");let nt=U.join("].[");for(let At=P+1;At<B;At++){let ut=this.apiDataCache.get(_+"=>"+At);ut&&this.apiDataCache.set(nt+"=>"+(At-W),ut)}for(let At=0;At<T;At++){let ut=this.apiDataCache.get(_+"=>"+At);ut&&this.apiDataCache.set(nt+"=>"+At,ut)}}this.aztEditor?.insertDetails(s,d)}),this.aztEditor.onChangePosition((r,s)=>{this.revealCurrentQuest();let l=this.aztEditor?.getCurLineText(),d=l.matchAll(/\[(!m|img):\$([^\$\]]+)\$\]/g);for(;;){let h=d.next();if(h.done)break;let _=h.value[2];if(h.value.index+1<s&&s<h.value.index+h.value[0].length)if(h.value[0].startsWith("[!m:")){let b=this.mathMap.get(_);if(b){this.openMathEditor(b);break}}else this.actionEditImage(document.getElementById(_))}}),window.addEventListener("paste",r=>{if((this.aztEditor?._editor).hasTextFocus()){let l=r.clipboardData.getData("text/html")+"",c=r.clipboardData.files[0],h=l.matchAll(/<img [^>]*src="([^"]+)"/g);if(c&&c.type.startsWith("image"))return void this.insertImgFromFile(c);for(;;){let _=h.next();if(_.done)break;this.insertImgFromLink(_.value[1])}}}),this.editQuestId>0){this.aztEditor.setSingleMode(!0);let r=this.commonService.myTranslateInstant("lang_auto_cau_hoi");this.aztEditor._editor.setValue(`[@Q${this.editQuestId}:${r}]`)}const i=this.editorOutputDataService.getFirstFile(),a=this.editorOutputDataService.getMatrixData();i?this.processFile(i):a&&this.processMatrixData(a)}insertImgFromBase64(e){let i=0;for(let a of this.images){let r=+a.id.split("_")[1];r>i&&(i=r)}i++,this.images.push({id:"img_"+i,link:e}),this.aztEditor?.insertAtCurPos(`[img:$img_${i}$]`)}insertImgFromLink(e){We.loadImageToBase64(e,this.cdnService).then(i=>{this.insertImgFromBase64(i)})}insertImgFromFile(e){let i=new FileReader;i.onload=()=>{this.insertImgFromBase64(i.result+"")},i.readAsDataURL(e)}processMatrixData(e){let i=new ye;this.conf.matrix=e;let a=i.parse(e.matrix);this.extraMap=a.extra,this.aztEditor?._editor.setValue(this.commonService.translateString(a.text))}revealCurrentQuest(){if(this.isMobile)return;let e=this.aztEditor?.getCurQuest();e?(this.revealQuest((e.isGroup?"g-":"")+e.label,e.isGroup?"end":"start"),this.curQuest=e):this.revealQuest("1")}revealQuest(e,i){let a=document.getElementById("quest-"+e);return!!a&&(a.scrollIntoView({behavior:"auto",block:i??"start"}),a.setAttribute("start_loading","true"),this.onScrollQuest(),!0)}onScrollQuest(){this.isMouseDown||this.checkElementQuestionLazy()}onMouseDown(){this.isMouseDown=!0}onMouseUp(){this.isMouseDown=!1,this.checkElementQuestionLazy()}onRandomOne(e){if(this.timeOutDelayStatus.refresh){let i=Math.floor(((new Date).getTime()-this.timeOutDelayStatus.timeRefresh)/1e3);const a=this.timeOutDelayStatus.limitRefresh-(i>=5?0:i);this.showErrorSnack((this.commonService.myTranslateInstant("lang_auto_limit_time_refresh_question")??"").replace("@",a.toString()))}else{this.timeOutDelayStatus.refresh=!0,this.timeOutDelayStatus.timeRefresh=(new Date).getTime(),this.matrixLoadedData=[];let i=this.lstQuest.map(h=>h.id??0),a=this.lstQuest[e];const r=a.quest.parts[0].text??"",s=this.apiDataCache.get(r);let d=new Mn(this.cdnService,this.commonService,h=>{this.fillQuest(e,h)},this.apiCallbackCache,this.aztEditor,h=>{this.showErrorSnack(h),s&&this.apiDataCache.set(r,s)},i,this.apiDataCache,this.matrixLoadedData);this.apiDataCache.delete(r),this.setExtra({q:a,type:"replace",data:-1}),d.setGetOne(!0),d.render(r,this.images,this.questionService),setTimeout(()=>{this.timeOutDelayStatus.refresh=!1},1e3*this.timeOutDelayStatus.limitRefresh)}}onChangeQuest(e,i){if(this.timeOutDelayStatus.refresh){let a=Math.floor(((new Date).getTime()-this.timeOutDelayStatus.timeRefresh)/1e3);const r=this.timeOutDelayStatus.limitRefresh-(a>=5?0:a);this.showErrorSnack((this.commonService.myTranslateInstant("lang_auto_limit_time_refresh_question")??"").replace("@",r.toString()))}else{this.timeOutDelayStatus.refresh=!0,this.timeOutDelayStatus.timeRefresh=(new Date).getTime();let a=this.lstQuest[i],r=a.renderedStr,s=a.answers.findIndex(l=>l.ans.isCorrect);if(-1!=s){let l=a.answers.map(c=>c.renderedStr);r+="\n"+this.commonService.getCorrectAnsTxt(l,s)}r=this.commonService.parseQuestionContent(r),this.openSimilarSearch(r,i),setTimeout(()=>{this.timeOutDelayStatus.refresh=!1},1e3*this.timeOutDelayStatus.limitRefresh)}}setPointBelow(e,i){for(let a=i;a<this.lstQuest.length;a++)this.lstQuest[a].quest.isGroup||(this.lstQuest[a].point=e,this.setExtra({type:"point",data:e,q:this.lstQuest[a]},a==this.lstQuest.length-1))}editorFocus(e){e&&e.length>0&&this.aztEditor?.goToLine(e[0].lineIdx+1)}onCopy(e,i){let a=this;i||(i="Copy");let r=s=>{let l=tt.Utils.capitalizeFirstLetter(e.quest.olabel??"");navigator.clipboard.writeText(a.getQuestText(e));let c=this.commonService.myTranslateInstant("lang_auto_noi_dung"),d=this.commonService.myTranslateInstant("lang_auto_thanh_cong");a.showSuccessSnack(`${i} ${c} ${l} ${d}`)};document.addEventListener("copy",r),document.execCommand("copy"),document.removeEventListener("copy",r)}onCut(e){let i=this.commonService.myTranslateInstant("lang_auto_cat");this.onCopy(e,i),this.onDel(e,i)}onDel(e,i){let a=[],r=tt.Utils.capitalizeFirstLetter(e.quest.olabel??""),s=this.commonService.myTranslateInstant("lang_auto_xoa");if(i||(i=s),(e.quest.parts[0].text?.indexOf(".[L\u1ea5y ng\u1eabu nhi\xean")??-1)>0||(e.quest.parts[0].text?.indexOf(".[Random")??-1)>0){let l=this.commonService.myTranslateInstant("lang_auto_nam_trong_nhom_lay_ngau_nhien"),c=this.commonService.myTranslateInstant("lang_auto_khong_thanh_cong");return this.showErrorSnack(`${r} ${l}, ${i} ${c}`),-1}a.push(...e.quest.parts.map(l=>l.lineIdx));for(let l of e.quest.answers)a.push(...l.parts.map(c=>c.lineIdx));return e.quest.help&&a.push(...e.quest.help.map(l=>l.lineIdx)),a=a.filter((l,c,d)=>d.indexOf(l)===c),this.aztEditor?.removeLines(a,!0),a[0]}getQuestText(e,i=!0){let a=tt.Utils.capitalizeFirstLetter(e.quest.olabel??"");this.defaultQuestionLabel&&(a=tt.Utils.capitalizeFirstLetter(this.defaultQuestionLabel).trim()+" "+e.quest.label+".");let r=this.curExtraId;i&&(this.curExtraId++,this.extraMap.set(r+"",{oldId:e.id,d:e.point,audio:e.audio,file:e.attachments,fix:e.quest.isFixAns,tag:e.tag}));let l=[`${a}${i?`[!info:${r}]`:""} ${this.formatContent(e.renderedStr)}`],c="";if(e.renderedStr.indexOf('class="qv_string_eng_ans"')<0)for(let x of e.answers)l.push((x.ans.isCorrect?"*":"")+x.ans.label+". "+this.formatContent(x.renderedStr));else c=e.answers.filter(x=>x.ans.isCorrect)[0].ans.label;if(e.quest.strAns){let x=this.commonService.myTranslateInstant("azt_lang_sugg_ans_table_upper")??"";l.push(`${x}\n${e.quest.label}. ${e.quest.strAns}`)}if(e.helpRenderedStr){let x=this.commonService.myTranslateInstant("lang_auto_loi_giai")??"";l.push(x),l.push(this.formatContent(e.helpRenderedStr))}let h=(new Kn).revert(l.join("\n"),c);return h=(new bn).revert(h),h}formatContent(e){let i=document.createElement("div");i.innerHTML=e;let a=i.getElementsByClassName("azt-mathml"),r=i.getElementsByTagName("img");for(let l=a.length-1;l>=0;l--){let c=a[l];if(!c)continue;let d=this.curMathId;this.mathMap.set("mathtype_"+this.curMathId,{id:d,str:c.innerHTML,lineIdx:0,startCol:0,endCol:0}),this.curMathId++;let _=document.createTextNode(`[!m:$mathtype_${d}$]`);i.replaceChild(_,c)}for(let l=r.length-1;l>=0;l--){let c=r[l];if(!c)continue;let d=this.images.length>0?Math.max(...this.images.map(_=>+_.id.split("_")[1]))+1:1;this.images.push({id:"img_"+d,link:c.src,cssStyle:c.style.cssText});let h=document.createTextNode(`[img:$img_${d}$]`);i.replaceChild(h,c)}return i.innerHTML.replaceAll("<br>","\n")}upperFirst(e){return e?e.charAt(0).toUpperCase()+e.slice(1):""}validate(){let e=new Map,i=0;this.errs=this.errs.filter(a=>a.indexOf("Tr\xf9ng c\xe2u h\u1ecfi")<0),this.aztEditor?.setError(this.errs);for(let a of this.lstQuest)"Tr\xf9ng c\xe2u h\u1ecfi"==a.err&&(a.err=void 0),a.id&&(e.has(a.id)&&this.fillError(i,"Tr\xf9ng c\xe2u h\u1ecfi"),e.set(a.id,1),i++)}fillError(e,i){this.lstQuest[e].err=`<span style='color:red'>${i}</span>`;let r=this.lstQuest[e].quest.parts[0].lineIdx+1+"|"+i;-1==this.errs.indexOf(r)&&this.errs.push(r),this.aztEditor?.setError(this.errs)}fillImg(e,i,a,r,s=!1){let l=new RegExp("<div id='"+i+"'[^>]+></div>","g"),c=s&&this.lstQuestSimilar?this.lstQuestSimilar[e]:this.lstQuest[e];c.renderedStr=c.renderedStr.replace(l,a??"");for(let d of c.answers)d.renderedStr=d.renderedStr.replace(l,a??"");if(c.helpRenderedStr&&(c.helpRenderedStr=c.helpRenderedStr.replace(l,a??"")),r)for(let d of r){let h=this.renderCache.get(d);h&&this.renderCache.set(d,h.replace(l,a??""))}if(this.editQuestId>0){let d=this.getQuestText(c);d.indexOf("img-docx")<0&&this.aztEditor?._editor.setValue(d)}}loadSimilar(e,i){if(e){let a=l=>{this.fillQuest(i,l,!0)},r=l=>{"NO_DATA"==l?this.lstQuestSimilar=[]:this.showErrorSnack(l)};this.lstQuestSimilar=void 0,new Mn(this.cdnService,this.commonService,a,void 0,void 0,r,[],void 0,void 0,this.discoveryService).getSimilar(e,this.images,this.questionService)}}fillQuest(e,i,a=!1){let r=this.commonService.myClone(i),s=this.lstQuest[e],l=0;if(a&&(this.lstQuestSimilar||(this.lstQuestSimilar=[]),this.lstQuestSimilar.push(r),l=this.lstQuestSimilar.length-1),s){r.label=s.label,r.point=s.point,r.lazyQuestView=s.lazyQuestView,r.isFixGroup=s.isFixGroup;let c=s.quest.isFixAns||r.quest.isFixAns;if(this.editorParsedData){let x=r.quest.strAns;if(r.quest=this.editorParsedData[e],r.quest.strAns=x,!a){let b=r.quest.answers.filter(T=>T.isCorrect).map(T=>T.label).join();(!b||""==b)&&(b=r.originCorrectAns??"");for(let T of r.answers)T.ans.isCorrect=b.indexOf(T.ans.label)>=0}}if(r.quest.strAns){let x=this.findAnsSplit(r.quest.strAns,this.aztLangConfigObj.STRANS_SPLIT);r.strAns=r.quest.strAns.split(x).map(b=>b.trim())}else r.strAns&&(r.quest.strAns=r.strAns.join("|"));let d=[];d.push(r.renderedStr),d.push(...r.answers.map(x=>x.renderedStr)),d.push(r.helpRenderedStr);let h=(x,b)=>{this.fillImg(a?l:e,x,b,d,a)};r.renderedStr=this.renderStr(r.renderedStr,"link",h,void 0,void 0,!1);for(const x of r.answers)x.renderedStr=this.renderStr(x.renderedStr,"link",h,void 0,void 0,!1);r.helpRenderedStr&&(r.helpRenderedStr=this.renderStr(r.helpRenderedStr,"link",h,void 0,void 0,!1));let _=3;if(r.answers.length>0&&(_=1),0==r.answers.length&&r.quest.strAns&&(_=4),r.type=_,c&&(r.quest.isFixAns=c),r.changeable=/^\[@[CTGK][\-\d]+:[^\]]+\]([\.,]\[[^\]]+\])*\.\[[^@:\]]+\d+[^@:\]]+\]$/.test(r.quest.parts[0].text?.split("=>")[0]??""),a||(this.lstQuest[e]=r),this.editQuestId>0){let x=this.getQuestText(r);x.indexOf("img-docx")<0&&this.aztEditor?._editor.setValue(x)}this.fillQuestCache.set(e+"-"+r.quest.parts[0].text,r),a||this.validate()}}findAnsSplit(e,i){if(!i)return"|";for(let a=0;a<i.length;a++)if(e.indexOf(i[a])>=0)return i[a];return"|"}renderText(e){let i=e;return i=this.renderStr(i,"help",(r,s)=>{let l=new RegExp("<div id='"+r+"'[^>]+></div>","g");i=i.replace(l,s??"")}),i}getLoadedIds(){return this.lstQuest.filter(e=>e.id&&e.id>0).map(e=>e.id??0)}getIncludeIds(e){let a=this.aztEditor?._editor.getValue(),s=a.matchAll(/\[@Q(\d+):[^\]]*\]/g),l=[];for(;;){let d=s.next();if(d.done)break;l.push(+d.value[1])}let c=this.getLoadedIds();return l.push(-1),l.push(...c),l.filter(d=>(e??[]).indexOf(d)<0)}renderStr(e,i,a,r,s,l=!0){let c=this.renderCache.get(e);if(c&&!c.startsWith("Loading...|"))return c;let d=l?e.replaceAll(/<([\/!a-zA-Z])/g,"&lt;$1").replaceAll(/&lt;([ubi])>/g,"<$1>").replaceAll(/&lt;[\/]([ubi])>/g,"</$1>").replaceAll("&lt;br>","<br>").replaceAll("&lt;code>","<code>").replaceAll("&lt;/code>","</code>").replaceAll("<&lt;","&lt;&lt;").replaceAll("<&lt;","&lt;&lt;").replaceAll("<&lt;","&lt;&lt;"):e,h=[new qi(this.cdnService),new Kn,new xn,new ki,new an,new ln(this.mathMap,this.commonService),new pi,new to.$(this.cdnService,this.commonService,this.configRenderService,a),new Mn(this.cdnService,this.commonService,r,this.apiCallbackCache,this.aztEditor,s,this.getIncludeIds(),this.apiDataCache,this.matrixLoadedData)];"link"==i&&(h=[new to.$(this.cdnService,this.commonService,this.configRenderService,a)]),"help"==i&&h.pop(),this.isChemistry&&h.push(new Si);for(const _ of h)_.setLoadingManager(this.loadingManager),d=_.render(d,this.images,this.questionService);return this.renderCache.set(e,d),d}renderQuest(e,i){let a=3;e.answers.length>0&&(a=1),0==e.answers.length&&e.strAns&&(a=4);let r=(P,U)=>{this.fillImg(i,P,U)},s=P=>{this.fillQuest(i,P)},l=P=>{this.fillError(i,P)},c=e.parts.map(P=>P.text??"").join("<br>").trim(),d=this.parseTag(c);""!=d[0]?c=d[1]:e.help&&e.help.length>0&&(d=this.parseTag(e.help[0].text??""));let h=this.parseExtra(c);if("0"!=h.id){let P=this.extraMap.get(h.id);if(P&&P.replaceIdx>=0)return this.lstQuestReplace[P.replaceIdx]}""!=h.val&&(c=c.substring(0,h.idx)+c.substring(h.idx+h.val.length));let _=e.help?e.help.map(P=>P.text??"").join("<br>").trim():void 0,x=this.lstQuest[i],b=this.findAnsSplit(e.strAns??"",this.aztLangConfigObj.STRANS_SPLIT),T={renderedStr:this.renderStr(c,"full",r,s,l),quest:e,type:a,tag:""==d[0]?void 0:[{id:0,code:tt.Utils.tagLang(d[0])}],lazyQuestView:x?x.lazyQuestView:void 0,strAns:e.strAns?e.strAns.split(b).map(P=>P.trim()):void 0,label:this.upperFirst(e.olabel??""),helpRenderedStr:_?this.renderStr(_,"full",r,s,l):void 0,answers:e.answers.map(P=>{let U=P.parts.map(q=>q.text??"").join("<br>").trim();return{renderedStr:this.renderStr(U,"full",r,s,l),ans:P}})};if(T.renderedStr.startsWith("Loading...|")){let P=T.renderedStr.split("|");if(P[1].indexOf(",")<0){let q=+P[1];q>0&&(T.id=q)}T.renderedStr=P[0];let U=this.fillQuestCache.get(i+"-"+e.parts[0].text);U&&(T=U)}if("0"!=h.id){let P=this.extraMap.get(h.id);P&&(T.point=P.d,T.audio=P.audio,T.attachments=P.file,T.isFixGroup=T.quest.isGroup&&P.fix,T.tag=P.tag,T.quest.isFixAns||(T.quest.isFixAns=!T.quest.isGroup&&P.fix))}return this.editableEventObj.addCount(),T}openSimilarSearch(e,i){this.conf.similarQuest.show=!0,this.conf.similarQuest.txt=e,this.conf.similarQuest.idx=i,this.loadSimilar(e,i)}openMathEditor(e){if(!e){let i=this.aztEditor?.getCurPos();e={id:this.curMathId,str:'<math xmlns="http://www.w3.org/1998/Math/MathML"/>',lineIdx:i.lineNumber,startCol:i.column,endCol:i.column}}this.conf.mathEditor.show=!0,this.conf.mathEditor.latex=e}onInsertLatex(e){if(this.conf.mathEditor.show=!1,this.aztEditor&&""!=e.str.trim()){let i="mathtype_"+this.curMathId,a=`[!m:$${i}$]`;this.mathMap.set(i,{id:this.curMathId,str:"\\("+e.str+"\\)",lineIdx:e.lineIdx,startCol:e.startCol,endCol:e.startCol+a.length}),this.aztEditor.removeText(e.lineIdx,e.startCol,e.endCol,!1),this.aztEditor.insertAtCurPos(a),this.curMathId++}}replaceQuest(e){let i=this.conf.similarQuest.idx??0;this.conf.similarQuest.show=!1;let a=this.setExtra({q:this.lstQuest[i],type:"replace",data:this.lstQuestReplace.length});this.lstQuest[i]=e,e.quest.parts[0].text=(+a>0&&!e.quest.parts[0].text?.startsWith("[!info:")?`[!info:${a}] `:"")+e.quest.parts[0].text,this.lstQuestReplace.push(e)}loadExample(e,i){let a="vi"==i?_i.EXAM_FULL:_i.EXAM_FULL_EN;this.aztEditor&&""!=this.aztEditor._editor.getValue().trim()?this.popupConfirm?.startConfirm("lang_auto_azt_edtor_confirm_chang_content").then(r=>{r&&this.aztEditor?._editor.setValue(a[e-1])}):this.aztEditor&&this.aztEditor?._editor.setValue(a[e-1])}onShowFile(e,i){}onDropFile(e){(0,xe.C0)(e.type)?(0,xe.ml)(e.type)?this.showErrorSnack("lang_auto_chua_ho_tro_dinh_dang_video_vui_long_thu_lai"):(0,xe.hv)(e).then(i=>{this.attachFiles.push(i)}):this.showErrorSnack("lang_auto_pleas_upload_file_support")}setupEvent(){this.mapEventElement.push({eventName:"click",className:"img-docx",action:this.actionEditImage,caller:this}),this.mapEventElement.push({eventName:"click",className:"qv_qts_image",action:this.actionEditImage,caller:this}),this.mapEventElement.push({eventName:"click",className:"qv_img-group-content",action:this.actionEditImage,caller:this}),this.mapEventElement.push({eventName:"click",className:"qv_ats_image",action:this.actionEditImage,caller:this}),this.mapEventElement.push({eventName:"click",className:"qv_img",action:this.actionEditImage,caller:this}),this.mapEventElement.push({eventName:"click",className:"azt-mathml",action:this.actionEditMathMl,caller:this})}actionEditImage(e){if(e&&this.images.filter(i=>i.id==e.id).length>0){this.conf.imageEditor.show=!0,this.conf.imageEditor.el=e;let i=this.aztEditor?._editor.getValue().split("\n"),a=0,r=0;for(let s of i)if(a++,r=s.indexOf(`[img:$${e.id}$]`),r>=0)break;setTimeout(()=>{this.aztEditor?.setPosition(a,r+1)},100)}}actionEditMathMl(e){let i=e.id;const a=this.mathMap.get(i);a&&this.aztEditor?._editor.getValue().indexOf(`[!m:$${i}$]`)>=0&&setTimeout(()=>{this.aztEditor?.setPosition(a.lineIdx,a.startCol+1),this.openMathEditor(a)},100)}onPushImageAction(e){if(this.conf.imageEditor.show=!1,e.element&&e.element.id&&this.aztEditor){let i=this.images.filter(c=>c.id==e.element?.id)[0];if(!i)return;let r="img_"+(this.images.length>0?Math.max(...this.images.map(c=>+c.id.split("_")[1]))+1:1),s=`[img:$${r}$]`;this.images.push({id:r,link:e.output,cssStyle:i?.cssStyle});let l=this.aztEditor?.getCurPos();this.aztEditor.removeText(l.lineNumber,l.column,l.column+i.id.length+8,!1),this.aztEditor.insertAtCurPos(s)}}checkElementQuestionLazy(){if(this.lstQuest.length>=this.maxQuestEnableLazy){let e=document.getElementsByClassName("question-standalone-content-box"),i=[];for(let a=0;a<e.length;a++){const r=e[a],s=null!==r.getAttribute("start_loading")&&"true"===r.getAttribute("start_loading"),l=r.getAttribute("data-idx-quest"),c=this.lstQuest[Number(l)];c&&(c.lazyQuestView||(c.lazyQuestView={show:!1}),s&&null!==l?(c.lazyQuestView.show||(c.lazyQuestView.show=!0,c.lazyQuestView.curHeight="auto"),i.push(a)):(c.lazyQuestView.curHeight=r.getBoundingClientRect().height+"px",c.lazyQuestView.show=!1))}0==i.length&&e.length>0&&i.push(e.length-1);for(let a of i)for(let r=a-5>=0?a-5:0;r<=a+5&&r<e.length;r++){const l=e[r].getAttribute("data-idx-quest"),c=this.lstQuest[Number(l)];c&&(c.lazyQuestView||(c.lazyQuestView={show:!1}),null!==l&&(c.lazyQuestView.show||(c.lazyQuestView.show=!0,c.lazyQuestView.curHeight="auto")))}}}checkTypeActionService(){const e=document.getElementById("list-quest-panel");e&&this.mapEventElement.forEach(i=>{const a=e.getElementsByClassName(i.className);for(let r=0;r<a.length;r++){const s=a[r];s.getAttribute("event_"+i.eventName+"_target")||(s.setAttribute("event_"+i.eventName+"_target","true"),s.addEventListener(i.eventName,()=>{i.action.call(i.caller,s)}))}})}showFeedbackQuestionDialog(e){this.sAztDialogService.open(tn.V,{width:"750px",data:{questionObj:{...e,id:e.id??0,answerType:1,answerResult:[],isFixAns:!1,rawIndex:0,statistic:[],powerpointLinks:[],tags:[],examId:0,answers:[],attachments:[]},role:"TEACHER",applyType:"MATRIX_QUESTION"},restoreFocus:!1,autoFocus:!1}).afterClosed().subscribe(a=>{})}onResize(e){this.conf.isCalculatorHeight=!1,this.actionResize()}actionResize(){const e=document.getElementById("toolbar__editor");e&&(this.conf.heightContent=window.innerHeight-e.getBoundingClientRect().height-104,this.isMobile&&(this.conf.heightContent=this.conf.heightContent/2),this.conf.isCalculatorHeight=!0)}onOffChemistry(){this.isChemistry?(this.changeIsChemistry(!1),this.browserStorageService.saveSimpleCloudStorage("IS_CHEMICAL_FORMULA","OFF_CHEMICAL_FORMULA")):(this.changeIsChemistry(!0),this.browserStorageService.saveSimpleCloudStorage("IS_CHEMICAL_FORMULA","ON_CHEMICAL_FORMULA"))}changeIsChemistry(e){this.isChemistry!==e&&(this.isChemistry=e,this.randomAllAgain())}checkChemistry(){"ON_CHEMICAL_FORMULA"==this.browserStorageService.getSimpleStorage("IS_CHEMICAL_FORMULA")&&this.changeIsChemistry(!0)}stopAudio(){window.playMedia&&(window.playMedia.pause(),window.playMedia=void 0)}setupDropFile(){const e=window.jQuery("#list-quest-panel");e&&e.on("drag dragstart dragend dragover dragenter dragleave drop",function(i){i.preventDefault(),i.stopPropagation()}).on("dragover dragenter",function(){e.addClass("is-dragover")}).on("dragleave dragend drop",function(){e.removeClass("is-dragover")}).on("drop",i=>{this.handleFileDrop(i.originalEvent.dataTransfer.files)})}togglePromptCreateExam(){this.showPromptCreateExam=!this.showPromptCreateExam}closeDialogPromptCreateExam(e){this.showPromptCreateExam=!e}aiCreateQuestion(e){this.listQuestionIdCreateByAI=e.map(a=>a.id);const i=this.commonService.castJsonToClassObjs(yt.v,JSON.stringify(e));this.questionRenderService.parseRenderQuestions(i??[],a=>{},this.configRenderService).then(a=>{let r=[];a.forEach((l,c)=>{var d=[];l.tags.forEach(b=>{d.push({id:b.id,questionId:0,code:b.code??"",viName:b.viName??"",enName:b.enName??""})});let h=[{id:l.id,tenantId:l.tenantId,examId:l.examId,categoryId:l.categoryId,metadata:l.metadata,label:(this.lstQuest.length+c).toString(),content:JSON.stringify([l.content]),answerResult:JSON.stringify(l.answerResult),groupId:l.groupId,isImage:l.isImage,answerType:l.answerType,answerConfig:JSON.stringify(l.answers),answerMedia:l.help,isFixAns:l.isFixAns?1:0,groupType:l.groupType,tags:d,attachments:JSON.stringify(l.attachments),version:l.version}];r.push({key:`[@${l.id}:C\xe2u h\u1ecfi]=>0`,questions:h})}),this.timeOutDelayStatus.refresh=!0,this.timeOutDelayStatus.timeRefresh=(new Date).getTime(),this.matrixLoadedData=[],this.matrixLoadedData=r;let s=this.aztEditor?._editor.getValue().trim()+"\n";this.matrixLoadedData.forEach((l,c)=>{let d=this.lstQuest.map(P=>P.id??0);const h=l.key??"",_=this.apiDataCache.get(h);let T=new Mn(this.cdnService,this.commonService,P=>{this.fillQuest(c,P)},this.apiCallbackCache,this.aztEditor,P=>{this.showErrorSnack(P),_&&this.apiDataCache.set(h,_)},d,this.apiDataCache,this.matrixLoadedData);this.apiDataCache.delete(h),T.render(h,this.images,this.questionService),l.questions&&T.processApiResponseReturnData(l.questions,l.key??"",!1,this.lstQuest.filter(P=>!P.quest.isGroup).length+c+1).then(P=>{s+="\n"+this.getQuestText(P)+"\n",this.aztEditor?._editor.setValue(s)})})}).catch(()=>{this.showErrorSnack("lang_auto_de_thi_tai_khong_thanh_cong")})}ngOnInit(){super.ngOnInit(),this.uploadTurnUuid=this.sAztUuidService.getUuid(),this.conf.logConfig.status=!0,this.conf.logConfig.msg="lang_auto_dang_tai_thu_vien",this.isMobile=this.commonService.isMobileOrTable(),this.maxQuestEnableLazy=this.isMobile?1e4:this.maxQuestEnableLazy,this.checkChemistry(),this.waitDestroy((0,dt.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.conf.cur_cateId=this.commonService.getMyParam(this.activeRoute,"cat_id"),this.editQuestId=+(this.commonService.getMyParam(this.activeRoute,"quest_id")??"0"),this.type=this.commonService.getMyQueryParamOrDefault("self","user"),this.defaultQuestionLabel=this.commonService.getMyQueryParam("defaultQuestLabel"),this.conf.typeMatrix=this.type,this.conf.sourceBackToLink=this.commonService.getMyQueryParam("backto"),this.conf.startIndex=Number(this.commonService.getMyQueryParam("r")??"0"),this.isShareDocument=!!this.getMyQueryParam("isShareDocument"),this.conf.reSetBackToLink()})),this.infoService.apiInfoGetConfigObjsGet("CROPPDF_PARAMS,EDITOR_TEMPLATE").subscribe(i=>{this.aztLangConfig=i.CROPPDF_PARAMS,this.aztLangConfigObj=JSON.parse(this.aztLangConfig),this.commonService.loadScriptPromises([{source:this.cdnService.convertCdnLinkOfGitHub("js/mnpaint_bundle.js?v=0.3"),name:"mnpaint_bundle.js"},{source:this.cdnService.registerJsCdn("min.azota_docx_script"),name:"min.azota_docx_script"},{source:this.cdnService.convertCdnLinkOfGitHub("js/SaxonJS2_v2.js"),name:"SaxonJS2_v2.js"},{source:this.cdnService.convertCdnLinkOfGitHub("sprintf.min.js"),name:"sprintf.min.js"},{source:this.cdnService.convertCdnLinkOfGitHub("bundle.js"),name:"bundle.js"},{source:this.cdnService.convertCdnLinkOfGitHub("wmf.v1.js"),name:"wmf.v1.js"},{source:this.cdnService.convertCdnLinkOfGitHub("pdf-js-v3/pdf.js"),name:"pdf-js-v2-pdf.js"},{source:this.cdnService.convertCdnLinkOfGitHub("js/pdf-js-v3/pdf.worker.js"),name:"pdf-js-v2-pdf.worker.js"},{source:this.cdnService.convertCdnLinkOfGitHub("math-editor/mathquill.min.js"),name:"mathquill.min.js"},{source:"https://cdnjs.cloudflare.com/ajax/libs/interact.js/1.10.11/interact.min.js",name:"interact.min.js"},{source:this.cdnService.convertCdnLinkOfGitHub("js/FromEMF.f1.js"),name:"FromEMF.js"},{source:this.cdnService.convertCdnLinkOfGitHub("js/ToContext2D.f1.js"),name:"ToContext2D.js"},{source:this.cdnService.convertCdnLinkOfGitHub("js/UDOC.f1.js"),name:"UDOC.js"}]).then(()=>{this.questionService.apiQuestionGetTagsGet().subscribe(a=>{a.success&&a.data?this.questionTags=a.data.objs??[]:this.showErrorSnack("lang_auto_tai_thu_vien_that_bao_vui_long_load_lai_trang_de_thu_lai"),this.conf.logConfig.status=!1,this.conf.logConfig.msg=void 0,this.fileParser.loadConf(this.aztLangConfig),this.fileParser.init(),this.conf.isConfigInit=!0,"bank"==this.editorOutputDataService.getMode()&&this.openLibrary(),setTimeout(()=>{this.actionResize(),this.setupDropFile()},100)})}).catch(()=>{this.showErrorSnack("lang_auto_tai_thu_vien_that_bao_vui_long_load_lai_trang_de_thu_lai")})});const e=this.getMyQueryParam("sessionId");this.checkExamToProgram=!!e}ngDoCheck(){this.checkTypeActionService()}ngOnDestroy(){super.ngOnDestroy(),this.stopAudio()}constructor(e,i,a,r,s,l,c,d,h,_,x,b,T,P,U,q,B,W,G){super(),this.questionHelper=e,this.apiUploadService=i,this.infoService=a,this.documentService=r,this.examService=s,this.cdnService=l,this.activeRoute=c,this.questionRenderService=d,this.editorOutputDataService=h,this.userService=_,this.questionSaveService=x,this.questionService=b,this.discoveryService=T,this.browserStorageService=P,this.sAztDialogService=U,this.examFileService=q,this.sAztUuidService=B,this.paramClassroomService=W,this.sAztAnswerTypeService=G,this.images=[],this.editedImages=new Map,this.errorQuestionView=new au(this.commonService),this.MATH_PAT=/\[!m:\$([^\$\]]+)\$\]/g,this.title=new f.NI("",{nonNullable:!0}),this.lstQuest=[],this.lstQuestReplace=[],this.text="",this.attachFiles=[],this.aztLangConfig="",this.renderCache=new Map,this.apiCallbackCache=new Map,this.apiDataCache=new Map,this.fillQuestCache=new Map,this.loadingManager=new Map,this.errs=[],this.curMathId=1,this.curExtraId=1,this.mathMap=new Map,this.extraMap=new Map,this.showTooltip=!0,this.questionTags=[],this.mapEventElement=[],this.configRenderService=new Ue.v,this.maxQuestEnableLazy=20,this.isMobile=!1,this.lastMatrixHash="",this.editQuestId=0,this.editableEventObj={isChange:!1,count:0,addCount:function(){this.count++,this.count>2&&(this.isChange=!0)}},this.type="user",this.timeOutDelayStatus={refresh:!1,timeRefresh:0,limitRefresh:5},this.lstSimilar=[],this.enableEdit=!1,this.showPromptCreateExam=!1,this.willShowAIBox=!Ce.N.production||Ce.N.isProdAzotaVn,this.isChemistry=!1,this.listQuestionIdCreateByAI=[],this.uploadTurnUuid=void 0,this.shareTypeDocument=mt.R,this.isShareDocument=!1,this.isUploadFileDocx=!1,this.checkExamToProgram=!1,this.isMouseDown=!1,this.conf=new _e(this.editorOutputDataService,this.commonService),this.editorApiService=new ft(e,i,r,s,b),this.fileParser=new V.uD,this.setupEvent();let nt=this.commonService.myTranslateInstant("lang_auto_dang_xu_ly_hinh_anh_cho_de_thi");this.questionSaveService.callbackBase64ToCanvas=(At,ut)=>{this.conf.logConfig.msg=`${nt} ${Math.floor(At/ut*100*.7)}%`},this.questionSaveService.callbackUploadImage=(At,ut)=>{this.conf.logConfig.msg=`${nt} ${Math.floor(At/ut*100*.3)+70}%`}}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(ho),t.Y36(po.W),t.Y36(Pi.CM),t.Y36(Ke.Zg),t.Y36(Ke.Oe),t.Y36(Gn.E),t.Y36(O.gz),t.Y36(Ku.h),t.Y36(Hs.O),t.Y36(ga.U),t.Y36(xa),t.Y36(Ke.aE),t.Y36(ba.F),t.Y36(No.n),t.Y36(Fi.C),t.Y36(Ke._0),t.Y36(tu.E),t.Y36(Oo),t.Y36(hr.i))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-azota-editor"]],viewQuery:function(e,i){if(1&e&&(t.Gf(Wu,5),t.Gf(mc,5),t.Gf(Xd,5)),2&e){let a;t.iGM(a=t.CRH())&&(i.popupConfirm=a.first),t.iGM(a=t.CRH())&&(i.mobileEditor=a.first),t.iGM(a=t.CRH())&&(i.popupOnlyImageEditor=a.first)}},hostBindings:function(e,i){1&e&&t.NdJ("resize",function(r){return i.onResize(r)},!1,t.Jf7)},features:[t.qOj],decls:17,vars:24,consts:[[3,"headerBackToLink","reloadBacktoLink","checkBackDialog","disableConfirmBtn","confirmTitle","showInput","examName","showConfirmButton","handleBackDialog","handleCancel","handleConfirm"],[1,"main__editor",3,"ngClass"],["class","app-editor",4,"ngIf"],["class","loading-mess",4,"ngIf"],["type","file",1,"hiddenIpt",3,"change"],["fileOpenProcess",""],["popupConfirm",""],[3,"inp","isShow","hidden","onClose","onInsertLatex"],[3,"inp","onClose","onInsert",4,"ngIf"],[3,"lstErrors","onClose",4,"ngIf"],[3,"lstQuest","onClose","onNextQuestion",4,"ngIf"],[3,"el_target","onClose","onPushImage",4,"ngIf"],["class","main__homework-save",4,"ngIf"],["class","main__exam-save",4,"ngIf"],["id","testFinderMask",4,"ngIf"],[1,"app-editor"],["id","list-quest-panel"],["class","toolbar-editor box rounded-none","id","toolbar__question",4,"ngIf"],[1,"main-content",3,"scroll","mousedown","mouseup"],["class","question-standalone-content-box",4,"ngIf"],["class","question-standalone-content-box","load_effect_lazy","",3,"id","ngStyle",4,"ngFor","ngForOf"],[2,"height","250px"],[3,"class",4,"ngIf"],["id","toolbar__question",1,"toolbar-editor","box","rounded-none"],[1,"toolbar-left"],[1,"toolbar-right"],["azt-track-service","azota-editor-CH8a9F4wc","class","toolbar-btn",3,"click",4,"ngIf"],["azt-track-service","azota-editor-UuiDzppsVL","class","toolbar-btn color-danger",3,"click",4,"ngIf"],["class","toolbar-btn",3,"ngClass",4,"ngIf"],["azt-track-service","azota-editor-CH8a9F4wc",1,"toolbar-btn",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-5","h-5","lucide","mr-2"],["cx","12","cy","12","r","10"],["x1","12","x2","12","y1","16","y2","12"],["x1","12","x2","12.01","y1","8","y2","8"],[1,"azt-hidden","md:block"],["azt-track-service","azota-editor-UuiDzppsVL",1,"toolbar-btn","color-danger",3,"click"],["d","M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4"],["d","M14 2v6h6"],["d","m3 12.5 5 5"],["d","m8 12.5-5 5"],[1,"toolbar-btn",3,"ngClass"],[1,"toolbar-btn-input-mode"],[1,"w-5","h-5","inline-block","mr-2"],["name","arrow-up-down"],["type","number","appOnlyNumber","",3,"ngModel","min","ngModelChange","keyup.enter","focus","focusout"],["azt-track-service","azota-editor-EMOtdhqulZ",1,"btn","btn-goto","btn-primary",3,"click"],[1,"question-standalone-content-box"],[1,"box-service","box","border","border-slate-400","dark:border-darkmode-400"],[1,"box-service-content"],[1,"mb-5","tex2jax_process","homework-content"],[3,"content"],["class","box-show-files",4,"ngIf"],["class","box-input-file",4,"ngIf"],[1,"box-show-files"],[1,"box-line"],[4,"ngFor","ngForOf"],[1,"box-file"],["azt-track-service","azota-editor-VmAdzC0JVjO",1,"btn","btn-sm",3,"click"],[2,"font-size","15px","padding-top","5px"],["azt-track-service","azota-editor-YPQZFq3W5pa",3,"click"],[1,"line-file",3,"title"],[1,"box-input-file"],[3,"onDropFile"],["load_effect_lazy","",1,"question-standalone-content-box",3,"id","ngStyle"],["class","box-service box border border-slate-400 dark:border-darkmode-400",4,"ngIf"],["class","skeleton-box-loading h-100 w-100",4,"ngIf"],["class","fix-content",3,"matTooltip",4,"ngIf"],[1,"box-metadata",3,"innerHTML"],["class","group-box-header",4,"ngIf"],["class","box-service-header w-full",4,"ngIf"],[1,"box-service-content","relative"],["class","exam-box",4,"ngIf"],["class","exam-box",3,"innerHTML",4,"ngIf"],["reportQTakeTest","","class","feedback-btn",4,"ngIf"],[1,"fix-content",3,"matTooltip"],[1,"group-box-header"],[1,"title"],["azt-track-service","azota-editor-t2MSjyyGi8_",1,"link-option",3,"click"],[1,"box-service-header","w-full"],[3,"q","notOnlyQuestEdit","index","questionTags","onChangeQuest","onRandomQuest","onApplyAllTag","onError","onLabelClick","onHotKeyPointSync","onExtraInfo","onCut","onDel","onCopy"],[1,"exam-box"],["azt-track-service","azota-editor-sBE9TpjyDRX",3,"click"],[3,"class","ngClass",4,"ngIf"],[4,"ngIf"],["class","mt-4",4,"ngIf"],["class","box-an",4,"ngFor","ngForOf"],[1,"mt-4"],[1,"font-bold"],["class","bag-label",4,"ngFor","ngForOf"],[1,"bag-label"],[1,"box-an"],["class","checkmark",4,"ngIf"],["azt-track-service","azota-editor-KqGja32WPDY",1,"box-an-label",3,"matTooltipPosition","matTooltip","ngClass","click"],["azt-track-service","azota-editor-cZIOwUqdMq6",1,"tex2jax_process","box-an-content",3,"ngClass","click"],[1,"checkmark"],[1,"checkmark_stem"],[1,"checkmark_kick"],[3,"ngClass"],[1,"help-title"],["azt-track-service","azota-editor-K029PsYFgYK",1,"tex2jax_process","help-content","text-slate-500",3,"click"],[1,"exam-box",3,"innerHTML"],["reportQTakeTest","",1,"feedback-btn"],["azt-track-service","azota-editor-QmBorNGdB","matTooltipShowDelay","200",1,"btn","btn-sm","p-1","w-6","h-6",3,"matTooltip","click"],["name","alert-octagon"],[1,"skeleton-box-loading","h-100","w-100"],["id","toolbar__editor",1,"toolbar-editor","box","rounded-none"],["azt-track-service","azota-editor-PYOwtUkbiHX","class","toolbar-btn",3,"click",4,"ngIf"],["azt-track-service","azota-editor-RriKBPZhZhL","class","toolbar-btn",3,"click",4,"ngIf"],["azt-track-service","azota-editor-SevIBYRKYxI","class","toolbar-btn",3,"click",4,"ngIf"],["azt-track-service","azota-editor-Tse343hGe","class","toolbar-btn",3,"click",4,"ngIf"],["class","toolbar-btn",4,"ngIf"],[3,"config","readOnly","editorApiService","onStartProcessFile","onInit"],["class","footer-editor",4,"ngIf"],["class","ai-chat-box",4,"ngIf"],["azt-track-service","azota-editor-PYOwtUkbiHX",1,"toolbar-btn",3,"click"],["d","M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"],["points","17 8 12 3 7 8"],["x1","12","y1","3","x2","12","y2","15"],["azt-track-service","azota-editor-RriKBPZhZhL",1,"toolbar-btn",3,"click"],["x1","12","y1","5","x2","12","y2","19"],["x1","5","y1","12","x2","19","y2","12"],["azt-track-service","azota-editor-SevIBYRKYxI",1,"toolbar-btn",3,"click"],["d","M18 7V4H6l6 8-6 8h12v-3"],["azt-track-service","azota-editor-Tse343hGe",1,"toolbar-btn",3,"click"],[1,"w-6","h-5","inline-block","mr-1"],[1,"w-full","h-full","inline-block",3,"src"],[1,"toolbar-btn"],[1,"btn-transpanrent",3,"matMenuTriggerFor"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-5","h-5","lucide"],["cx","12","cy","12","r","1"],["cx","12","cy","5","r","1"],["cx","12","cy","19","r","1"],["menu","matMenu"],[1,"dropdown-menu","show","w-64","relative"],[1,"dropdown-content"],["azt-track-service","azota-editor-a3UJXgWi4cK",1,"dropdown-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide","mr-2"],["d","M21 2v6h-6"],["d","M3 12a9 9 0 0 1 15-6.7L21 8"],["d","M3 22v-6h6"],["d","M21 12a9 9 0 0 1-15 6.7L3 16"],["azt-track-service","azota-editor-qiMlRVgbu","for","chemistry-switch",1,"dropdown-item","cursor-pointer",3,"click"],[1,"form-check","form-switch","ml-auto"],["id","chemistry-switch","type","checkbox",1,"show-code","form-check-input","ml-2",3,"checked","change"],["azt-track-service","azota-editor-55CS__ezSf3",1,"dropdown-item",3,"click"],["x","6","y","14","width","9","height","6","rx","2"],["x","6","y","4","width","16","height","6","rx","2"],["d","M2 2v20"],["points","7 10 12 15 17 10"],["x1","12","y1","15","x2","12","y2","3"],[1,"footer-editor"],[1,"footer-item"],["azt-track-service","azota-editor-bC2YM9_C3mx",1,"text-primary",3,"click"],["azt-track-service","azota-editor-ENvq0_KzaKp",1,"text-primary",3,"click"],["azt-track-service","azota-editor-lHk43akYxBc",1,"text-primary",3,"click"],["azt-track-service","azota-editor-zb38B_roeqf",1,"text-primary",3,"click"],["azt-track-service","azota-editor-33xcpGogy",1,"text-primary",3,"click"],[1,"ai-chat-box"],[3,"questList","close","createQuestion"],[1,"loading-mess"],[1,"loading-content"],[1,"icon-msg"],[1,"w-4","h-4","inline-block","mr-2"],[1,"text-msg"],[3,"inp","onClose","onInsert"],[3,"lstErrors","onClose"],[3,"lstQuest","onClose","onNextQuestion"],[3,"el_target","onClose","onPushImage"],[1,"main__homework-save"],[3,"onBack"],[1,"main__exam-save"],[3,"listQuestionIdCreateByAI","onBack"],[3,"type","isCreateQuestionToEditor","onBack"],["id","testFinderMask"],[1,"box","border","border-slate-400","dark:border-darkmode-400",3,"closeTestFinder"]],template:function(e,i){if(1&e&&(t.TgZ(0,"editor-layout",0),t.NdJ("handleBackDialog",function(){return i.conf.showEditor()})("handleCancel",function(){return i.cancelAction()})("handleConfirm",function(){return i.saveAction()}),t.TgZ(1,"div",1),t.YNc(2,iu,8,7,"div",2),t.qZA(),t.YNc(3,am,8,3,"div",3),t.TgZ(4,"input",4,5),t.NdJ("change",function(r){return i.openFile(r)}),t.qZA(),t._UZ(6,"editor-confirm",null,6),t.TgZ(8,"mathtype-editor",7),t.NdJ("onClose",function(){return i.conf.mathEditor.show=!1})("onInsertLatex",function(r){return i.onInsertLatex(r)}),t.qZA(),t.YNc(9,vs,1,1,"similar-quest",8),t.YNc(10,wh,1,1,"show-errors-quests",9),t.YNc(11,kl,1,1,"show-info-quests",10),t.YNc(12,pr,1,1,"only-image-editor",11),t.YNc(13,Ba,2,0,"div",12),t.YNc(14,D_,2,1,"div",13),t.YNc(15,Ir,2,2,"div",13),t.YNc(16,ou,2,0,"div",14),t.qZA()),2&e){let a;t.Q6J("headerBackToLink",i.conf.getBackLink())("reloadBacktoLink",i.conf.editor.show)("checkBackDialog",!i.conf.editor.show)("disableConfirmBtn",i.editQuestId>0&&!i.editableEventObj.isChange||i.enableEdit||i.loadingManager.size>0)("confirmTitle",0==i.editQuestId?"lang_auto_tiep_tuc":"lang_button_save")("showInput",i.conf.editor.show&&!i.editQuestId&&!i.checkExamToProgram)("examName",i.title)("showConfirmButton",i.conf.editor.show),t.xp6(1),t.Q6J("ngClass",t.VKq(22,rm,!i.conf.editor.show)),t.xp6(1),t.Q6J("ngIf",i.conf.isConfigInit),t.xp6(1),t.Q6J("ngIf",i.conf.logConfig.status),t.xp6(5),t.Q6J("inp",i.conf.mathEditor.latex)("isShow",null!==(a=i.conf.mathEditor.show)&&void 0!==a&&a)("hidden",!i.conf.mathEditor.show),t.xp6(1),t.Q6J("ngIf",i.conf.similarQuest.show),t.xp6(1),t.Q6J("ngIf",i.conf.showErrorsQuests.show),t.xp6(1),t.Q6J("ngIf",i.conf.showInfomationQuests.show),t.xp6(1),t.Q6J("ngIf",i.conf.imageEditor.show),t.xp6(1),t.Q6J("ngIf",i.conf.homeworkSave.show),t.xp6(1),t.Q6J("ngIf",i.conf.examSave.show&&!i.isShareDocument),t.xp6(1),t.Q6J("ngIf",i.conf.examSave.show&&i.isShareDocument),t.xp6(1),t.Q6J("ngIf",i.conf.startLibrary)}},styles:['#testFinderMask[_ngcontent-%COMP%]{padding:15px;background-color:#00000085;position:fixed;inset:0;z-index:999}#testFinderMask[_ngcontent-%COMP%]   app-test-finder[_ngcontent-%COMP%]{display:block;position:fixed;inset:15px;display:flex;flex-direction:column}.app-editor[_ngcontent-%COMP%]{display:flex;width:100%;height:calc(100vh - 55px);overflow:hidden}.col-questions[_ngcontent-%COMP%], .col-editor[_ngcontent-%COMP%]{width:50%}.col-editor[_ngcontent-%COMP%]{border-left:1px solid #e0e0e0}.toolbar-editor[_ngcontent-%COMP%]{display:flex;--tw-border-opacity: 1;border-bottom:1px solid rgb(var(--color-slate-200)/var(--tw-border-opacity));box-shadow:none;justify-content:space-between}.toolbar-btn[_ngcontent-%COMP%]{position:relative;padding:10px;font-size:13px;border-right:1px solid #e0e0e0;cursor:pointer;display:flex;align-items:center;-webkit-user-select:none;user-select:none;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.2s}.toolbar-btn[_ngcontent-%COMP%]:hover{background-color:#ededed90}.toolbar-btn[_ngcontent-%COMP%]   .toolbar-btn-mode-normal[_ngcontent-%COMP%], .toolbar-btn[_ngcontent-%COMP%]   .toolbar-btn-input-mode[_ngcontent-%COMP%]{display:flex;align-items:center}.toolbar-btn[_ngcontent-%COMP%]   .toolbar-btn-input-mode[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:30px;width:60px;margin-left:10px;font-size:smaller;border-radius:5px}.toolbar-btn[_ngcontent-%COMP%]   .toolbar-btn-input-mode[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none}.toolbar-btn[_ngcontent-%COMP%]   .btn-goto[_ngcontent-%COMP%], .toolbar-btn[_ngcontent-%COMP%]   .btn-cancel[_ngcontent-%COMP%]{height:30px;margin-left:5px}.toolbar-right[_ngcontent-%COMP%]   .toolbar-btn[_ngcontent-%COMP%]{border-right:none;border-left:1px solid #e0e0e0;padding:5px 20px}.toolbar-right[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:0;margin-left:5px}.toolbar-left[_ngcontent-%COMP%], .toolbar-right[_ngcontent-%COMP%]{display:flex}.col-questions[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column}.col-questions[_ngcontent-%COMP%]   .toolbar-editor[_ngcontent-%COMP%]{margin-bottom:10px;box-shadow:#1b1f230a 0 1px,#ffffff40 0 1px inset}.col-questions[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]{height:100%;overflow:auto}.question-standalone-content-box[_ngcontent-%COMP%]{margin:10px}.loading-mess[_ngcontent-%COMP%]{width:100vw;height:100vh;position:fixed;z-index:9;top:0;left:0;display:flex;justify-content:center;align-items:center;background-color:#0006}.loading-content[_ngcontent-%COMP%]{text-align:center;color:#000}.loading-content[_ngcontent-%COMP%]   .text-msg[_ngcontent-%COMP%]{font-size:20px;margin-top:10px;background-color:#f0f8ffa3;padding:10px;border-radius:5px}.icon-msg[_ngcontent-%COMP%]{margin-bottom:10px}.text-msg[_ngcontent-%COMP%]{font-size:20px}.footer-editor[_ngcontent-%COMP%]{border-top:1px solid #e0e0e0;display:flex;align-items:center}.footer-editor[_ngcontent-%COMP%]   .footer-item[_ngcontent-%COMP%]{padding:5px}.footer-editor[_ngcontent-%COMP%]   .footer-link[_ngcontent-%COMP%]{color:#2361ae;cursor:pointer}.footer-editor[_ngcontent-%COMP%]   .footer-sp[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:center;align-items:center}.footer-editor[_ngcontent-%COMP%]   .footer-sp[_ngcontent-%COMP%]:hover   .footer-link-hover[_ngcontent-%COMP%]{display:block}.footer-editor[_ngcontent-%COMP%]   .footer-sp[_ngcontent-%COMP%]   .footer-link-hover[_ngcontent-%COMP%]{cursor:pointer;display:none;position:absolute;width:300px;left:0;top:calc(-25px - 100%);background:antiquewhite;padding:10px;border-radius:5px;box-shadow:#091e4240 0 4px 8px -2px,#091e4214 0 0 0 1px}.footer-editor[_ngcontent-%COMP%]   .footer-sp[_ngcontent-%COMP%]   .footer-link-hover[_ngcontent-%COMP%]:before{content:"";position:absolute;bottom:-6px;left:20px;border-left:10px solid transparent;border-right:10px solid transparent;border-top:10px solid #faebd7}.box-an[_ngcontent-%COMP%]{display:flex;align-items:center;position:relative;cursor:pointer}.box-an[_ngcontent-%COMP%]:hover   .box-an-content[_ngcontent-%COMP%], .box-an[_ngcontent-%COMP%]:hover   .box-an-label[_ngcontent-%COMP%]{outline:1px solid #2462ae}.box-an-label[_ngcontent-%COMP%]{font-weight:700;margin-right:5px;min-width:25px;justify-content:center}.box-an-content[_ngcontent-%COMP%], .box-content[_ngcontent-%COMP%]{padding:5px;outline:1px solid #ccc;border-radius:3px;margin-bottom:5px;align-items:center;overflow-wrap:anywhere;overflow-x:auto;overflow-y:hidden}.box-an-content[_ngcontent-%COMP%]{padding-right:20px}.box-an-label[_ngcontent-%COMP%]{padding:5px;outline:1px solid #ccc;border-radius:3px;margin-bottom:5px;display:flex;align-items:center;overflow-wrap:anywhere}.an-true[_ngcontent-%COMP%]{outline:1px solid #2462ae;color:#2462ae;position:relative}.checkmark[_ngcontent-%COMP%]{position:absolute;left:-25px;display:inline-block;width:22px;height:22px;transform:rotate(45deg)}.checkmark_stem[_ngcontent-%COMP%]{position:absolute;width:3px;height:9px;background-color:#2462ae;left:11px;top:6px}.checkmark_kick[_ngcontent-%COMP%]{position:absolute;width:3px;height:3px;background-color:#2462ae;left:8px;top:12px}.link-tooltip[_ngcontent-%COMP%]{color:#2462ae;cursor:pointer}.box-service-name[_ngcontent-%COMP%], .box-service-question-name[_ngcontent-%COMP%]{outline:1px solid #ccc;padding:3px 10px!important;border-radius:3px;font-weight:500}.box-service-question-name[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content}.box-service-question[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap}.box-service-question[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child{border-right:none}.box-service-question[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:last-child{border-right:none}.box-service-question[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding:0 10px;cursor:pointer;color:#2462ae;border-right:1px solid #ccc}.first-text[_ngcontent-%COMP%]{display:flex;align-items:center}.first-text[_ngcontent-%COMP%]   marquee[_ngcontent-%COMP%]{width:100px}.first-text[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;margin-right:5px;display:flex;justify-content:center;align-items:center}.selection[_ngcontent-%COMP%]{border:1.5px solid #2462ae;box-shadow:#00000073 0 25px 20px -20px}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.inp-point[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:space-between;align-items:center}.inp-point[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:40px;text-align:center;padding:5px;border-radius:5px;outline:1px solid #ccc;border:none}.inp-point[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:1px solid #2262ae;box-shadow:#11111a0d 0 1px,#11111a1a 0 0 8px}.inp-point[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-outer-spin-button, .inp-point[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.inp-point[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}.inp-point[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{border-right:none;text-align:left;padding:0 0 0 10px}.hide[_ngcontent-%COMP%]{display:none!important}  .mat-form-field-underline{display:none}  .question-standalone-is-invalid-validation{color:#f44336;position:relative;padding-left:20px;display:flex;align-items:center;margin-bottom:10px}  .question-standalone-is-invalid-validation:before{content:"!";position:absolute;left:0;color:#fff;background:#f44336;width:15px;height:15px;text-align:center;border-radius:50%;font-size:smaller;display:flex;justify-content:center;align-items:center}.box-service[_ngcontent-%COMP%]{position:relative;margin:10px 0;padding:20px 30px;border-radius:5px;box-shadow:none}.box-service[_ngcontent-%COMP%]:first-child{margin:0 0 10px}.box-service-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:5px}  .img-docx,   .qv_qts_image,   .qv_img-group-content,   .qv_ats_image{cursor:pointer;max-width:100%}  .qv_img-group-content{width:100%}  .qv_full_a_img{cursor:pointer;width:60%}  .qv_full_img{cursor:pointer;width:100%}  .qv_img{cursor:pointer;margin-top:-1px}  .qv_none_image{display:inline-block;color:#2262ae;cursor:pointer}.box-help[_ngcontent-%COMP%]{border-top:1px solid #d7d7d7;margin:15px -30px 0;padding:10px 30px 0}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]{text-align:center;font-size:11px;margin-top:-20px}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#fff;padding:0 10px;color:#d58e0b}.box-help[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]{font-size:13px;overflow-x:auto;overflow-y:hidden}.font-bold[_ngcontent-%COMP%]{font-weight:700}.bag-label[_ngcontent-%COMP%]{border-radius:5px;background:#c0c0c0;padding:4px;font-size:13px;margin-right:5px}.bag-label[_ngcontent-%COMP%]:last-child{margin-right:0}.mt-4[_ngcontent-%COMP%]{margin-top:4px}.mb-5[_ngcontent-%COMP%]{margin-bottom:5px}.box-show-files[_ngcontent-%COMP%]{background:#f0f0f0;border-radius:5px;padding:10px;margin-bottom:3px}.padding-mobile[_ngcontent-%COMP%]{padding-left:5px;padding-right:5px}@media screen and (max-width: 580px){.app-editor[_ngcontent-%COMP%]{flex-direction:column;height:auto;overflow:auto}.col-questions[_ngcontent-%COMP%], .col-editor[_ngcontent-%COMP%]{width:100%}.main__editor[_ngcontent-%COMP%]{overflow-x:hidden}}  .q-table td{border:1px solid #c0c0c0;padding:3px 10px}  .box-content img,   .box-an-content img{max-width:100%}.group-box-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;position:relative;cursor:pointer}.group-box-header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{outline:1px solid #ccc;padding:3px 10px!important;border-radius:3px;font-weight:500}.group-box-header[_ngcontent-%COMP%]   .link-option[_ngcontent-%COMP%]{cursor:pointer;color:#2462ae;margin-left:10px}.fix-content[_ngcontent-%COMP%]{position:absolute;font-size:15px;color:#2361ae;top:0;left:5px;transform:rotate(-45deg)}.lazy_quest[_ngcontent-%COMP%]{width:100%;height:200px}  .skeleton-box-loading{display:inline-block;position:relative;overflow:hidden}  .skeleton-box-loading:after{position:absolute;inset:0;transform:translate(-100%);animation:_ngcontent-%COMP%_shimmer 2s infinite;content:""}@keyframes _ngcontent-%COMP%_shimmer{to{transform:translate(100%)}}  .box-service-content .homework-content{overflow-y:auto}  .box-service-content .azt-mathml{cursor:pointer}  .box-service-content .azt-mathml:hover{background-color:#ebebeb}button.menu[_ngcontent-%COMP%]{text-transform:none!important}.header-file-name[_ngcontent-%COMP%]{width:100%;text-align:center;border:0}.w-100[_ngcontent-%COMP%]{width:100%}.h-100[_ngcontent-%COMP%]{height:100%}.azt-order-1[_ngcontent-%COMP%]{order:1}.azt-order-2[_ngcontent-%COMP%]{order:2}@media screen and (max-width: 768px){.box-an-content[_ngcontent-%COMP%], .box-content[_ngcontent-%COMP%], .box-help[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]{overflow-y:auto}}.toolbar-btn-input-mode[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-outer-spin-button, .toolbar-btn-input-mode[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.toolbar-btn-input-mode[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}  .height40{height:40px!important}.hover-none[_ngcontent-%COMP%]:hover{background-color:transparent!important}.ai-chat-box[_ngcontent-%COMP%]{position:absolute;top:50px;left:50%;transform:translate(-50%);width:85%}']}),n})(),ru=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[D.ez,I.j,f.u5,f.UX,F.Z,w.Z_,L.kb,C.qyJ.pick(C.ciZ),Q.W]}),n})();var Qi=M(69530),_c=M(15828),si=M(43389);function Ys(n,o){1&n&&t._UZ(0,"azt-loading-effect")}function Al(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"img",4),t.NdJ("load",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.answersheetImageLoaded())}),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("src",e.curAnswersheetImage,t.LSH)}}let Lr=(()=>{class n extends St.Q{getAnswersheetImageUrl(e){switch(e.toString()){case"11":return this.cdnService.convertCdnLinkOfGitHubWithCurrentLocale(`medias_[LANG]/preview_images_v5/answer_sheet_a4_v3/answer_sheet_a4_v2_${0!=this.amountTemplateOriginalA4&&this.amountTemplateOriginalA4<=120?parseInt(this.amountTemplateOriginalA4.toString(),10):120}.svg`);case"12":return this.cdnService.convertCdnLinkOfGitHubWithCurrentLocale(`medias_[LANG]/preview_images_v5/answer_sheet_a5/answer_sheet_a5_${0!=this.amountTemplateA5&&this.amountTemplateA5<=50?parseInt(this.amountTemplateA5.toString(),10):50}_full.svg`);case"13":return this.cdnService.convertCdnLinkOfGitHubWithCurrentLocale(`medias_[LANG]/preview_images_v5/answer_sheet_a4_hh_1/answer_sheet_a4_50hh_${0!=this.amountTemplateEssayA4&&this.amountTemplateEssayA4<=50?parseInt(this.amountTemplateEssayA4.toString(),10):50}.png`);case"14":return this.cdnService.convertCdnLinkOfGitHubWithCurrentLocale(`medias_[LANG]/preview_images_v5/answer_sheet_a6_20/answer_sheet_a6_20_${0!=this.amountTemplateA6&&this.amountTemplateA6<=20?parseInt(this.amountTemplateA6.toString(),10):20}_full_a4.svg`);case"15":case"16":case"17":case"18":return this.generateTrueFalseTemplate({answerSheetTemplate:e,amountTemplateTrueFalseA4:this.amountTemplateTrueFalseA4??8,amountTemplateStartTrueFalseA4:this.amountTemplateStartTrueFalseA4??1,amountTemplateMultipleChoiceA4:this.amountTemplateMultipleChoiceA4??40,amountTemplateStartMultipleChoiceA4:this.amountTemplateStartMultipleChoiceA4??1,amountTemplateFillA4:this.amountTemplateFillA4??6,amountTemplateStartFillA4:this.amountTemplateStartFillA4??1})}return""}previewAnswersheetImage(){let a={name:"",mimes:"image/jpeg",url:this.getAnswersheetImageUrl(this.answersheetTemplate),index:0};this.sAztDialogService.open(_c.q,{maxWidth:"100vw",maxHeight:"100vh",height:"100%",width:"100%",data:{fileOption:a,viewFullImageWithScroll:!0,showDownloadIcon:!1},restoreFocus:!1})}generateTrueFalseTemplate(e){if(window.hasOwnProperty("azotaAnswerSheet")){let i=window.azotaAnswerSheet.generateAnswerSheet(e.answerSheetTemplate,Number(e.amountTemplateMultipleChoiceA4),Number(e.amountTemplateStartMultipleChoiceA4),Number(e.amountTemplateTrueFalseA4),Number(e.amountTemplateStartTrueFalseA4),Number(e.amountTemplateFillA4),Number(e.amountTemplateStartFillA4));i=i.replace("<svg",'<svg xmlns="http://www.w3.org/2000/svg"');let a=new Blob([i],{type:"image/svg+xml"});return URL.createObjectURL(a)}return""}answersheetImageLoaded(){this.previewAnswersheetImageLoading=!1,URL.revokeObjectURL(this.curAnswersheetImage)}initImageUrls(){this.previewAnswersheetImageLoading=!0,this.curAnswersheetImage=this.getAnswersheetImageUrl(this.answersheetTemplate)}ngOnChanges(){this.initImageUrls()}ngOnInit(){this.initImageUrls(),super.ngOnInit()}constructor(e,i){super(),this.sAztDialogService=e,this.cdnService=i,this.answersheetTemplate=11,this.amountTemplateOriginalA4=120,this.amountTemplateA5=50,this.amountTemplateA6=20,this.amountTemplateEssayA4=50,this.amountTemplateTrueFalseA4=120,this.amountTemplateStartTrueFalseA4=120,this.amountTemplateMultipleChoiceA4=120,this.amountTemplateStartMultipleChoiceA4=120,this.amountTemplateFillA4=120,this.amountTemplateStartFillA4=120,this.curAnswersheetImage="",this.previewAnswersheetImageLoading=!0}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Fi.C),t.Y36(Gn.E))},n.\u0275cmp=t.Xpm({type:n,selectors:[["preview-answer-sheet-dialog"]],inputs:{answersheetTemplate:"answersheetTemplate",amountTemplateOriginalA4:"amountTemplateOriginalA4",amountTemplateA5:"amountTemplateA5",amountTemplateA6:"amountTemplateA6",amountTemplateEssayA4:"amountTemplateEssayA4",amountTemplateTrueFalseA4:"amountTemplateTrueFalseA4",amountTemplateStartTrueFalseA4:"amountTemplateStartTrueFalseA4",amountTemplateMultipleChoiceA4:"amountTemplateMultipleChoiceA4",amountTemplateStartMultipleChoiceA4:"amountTemplateStartMultipleChoiceA4",amountTemplateFillA4:"amountTemplateFillA4",amountTemplateStartFillA4:"amountTemplateStartFillA4"},features:[t.qOj,t.TTD],decls:5,vars:2,consts:[[1,"flex","mx-auto","w-full","sm:w-3/4",2,"max-height","100%"],["azt-track-service","preivew-answersheet-dialog--hf6Yx84YB",1,"w-full","flex-none","rounded-md","overflow-hidden","clickable","p-2","border","border-slate-200","dark:border-darkmode-400",2,"height","100%",3,"click"],[4,"ngIf","ngIfElse"],["doneLoading",""],[2,"height","auto",3,"src","load"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1),t.NdJ("click",function(){return i.previewAnswersheetImage()}),t.YNc(2,Ys,1,0,"azt-loading-effect",2),t.YNc(3,Al,1,1,"ng-template",null,3,t.W1O),t.qZA()()),2&e){const a=t.MAs(4);t.xp6(2),t.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a)}},dependencies:[D.O5,si.l],encapsulation:2}),n})();var Sl=M(76094),ya=M(49870),ys=M(97151),La=M(85929),Pr=M(37398);class Ks{constructor(o,e){this.shareFileFlutterService=o,this.http=e,this.linkDataFile=""}initPdfData(o){return this.linkDataFile=o,this}createAnswerSheet(){return new it.y(o=>{o.next({success:1,message:"success"}),o.complete()})}exportPdf(o){this.linkDataFile.includes("https:")?this.downloadFile().subscribe(e=>{this.shareFileFlutterService.shareFileWithBlob(e,o)}):this.shareFileFlutterService.shareFileWithBase64(this.linkDataFile,o)}downloadFile(){return this.http.get(this.linkDataFile,{responseType:"blob"}).pipe((0,Pr.U)(o=>o))}}var Ni=M(71002),Ri=Uint8Array,Eo=Uint16Array,Wr=Uint32Array,ws=new Ri([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Ol=new Ri([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),su=new Ri([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),El=function(n,o){for(var e=new Eo(31),i=0;i<31;++i)e[i]=o+=1<<n[i-1];var a=new Wr(e[30]);for(i=1;i<30;++i)for(var r=e[i];r<e[i+1];++r)a[r]=r-e[i]<<5|i;return[e,a]},Ws=El(ws,2),Cs=Ws[0],Vr=Ws[1];Cs[28]=258,Vr[258]=28;for(var Oi=El(Ol,0),yo=Oi[0],Ji=Oi[1],li=new Eo(32768),yi=0;yi<32768;++yi){var Pa=(43690&yi)>>>1|(21845&yi)<<1;li[yi]=((65280&(Pa=(61680&(Pa=(52428&Pa)>>>2|(13107&Pa)<<2))>>>4|(3855&Pa)<<4))>>>8|(255&Pa)<<8)>>>1}var _r=function(n,o,e){for(var i=n.length,a=0,r=new Eo(o);a<i;++a)++r[n[a]-1];var l,s=new Eo(o);for(a=0;a<o;++a)s[a]=s[a-1]+r[a-1]<<1;if(e){l=new Eo(1<<o);var c=15-o;for(a=0;a<i;++a)if(n[a])for(var d=a<<4|n[a],h=o-n[a],_=s[n[a]-1]++<<h,x=_|(1<<h)-1;_<=x;++_)l[li[_]>>>c]=d}else for(l=new Eo(i),a=0;a<i;++a)l[a]=li[s[n[a]-1]++]>>>15-n[a];return l},sa=new Ri(288);for(yi=0;yi<144;++yi)sa[yi]=8;for(yi=144;yi<256;++yi)sa[yi]=9;for(yi=256;yi<280;++yi)sa[yi]=7;for(yi=280;yi<288;++yi)sa[yi]=8;var za=new Ri(32);for(yi=0;yi<32;++yi)za[yi]=5;var Th=_r(sa,9,0),lm=_r(sa,9,1),kh=_r(za,5,0),Uo=_r(za,5,1),fc=function(n){for(var o=n[0],e=1;e<n.length;++e)n[e]>o&&(o=n[e]);return o},la=function(n,o,e){var i=o/8>>0;return(n[i]|n[i+1]<<8)>>>(7&o)&e},lu=function(n,o){var e=o/8>>0;return(n[e]|n[e+1]<<8|n[e+2]<<16)>>>(7&o)},Ml=function(n){return(n/8>>0)+(7&n&&1)},Wo=function(n,o,e){(null==o||o<0)&&(o=0),(null==e||e>n.length)&&(e=n.length);var i=new(n instanceof Eo?Eo:n instanceof Wr?Wr:Ri)(e-o);return i.set(n.subarray(o,e)),i},Nr=function(n,o,e){var i=o/8>>0;n[i]|=e<<=7&o,n[i+1]|=e>>>8},Il=function(n,o,e){var i=o/8>>0;n[i]|=e<<=7&o,n[i+1]|=e>>>8,n[i+2]|=e>>>16},uu=function(n,o){for(var e=[],i=0;i<n.length;++i)n[i]&&e.push({s:i,f:n[i]});var a=e.length,r=e.slice();if(!a)return[new Ri(0),0];if(1==a){var s=new Ri(e[0].s+1);return s[e[0].s]=1,[s,1]}e.sort(function(nt,At){return nt.f-At.f}),e.push({s:-1,f:25001});var l=e[0],c=e[1],d=0,h=1,_=2;for(e[0]={s:-1,f:l.f+c.f,l,r:c};h!=a-1;)l=e[e[d].f<e[_].f?d++:_++],c=e[d!=h&&e[d].f<e[_].f?d++:_++],e[h++]={s:-1,f:l.f+c.f,l,r:c};var x=r[0].s;for(i=1;i<a;++i)r[i].s>x&&(x=r[i].s);var b=new Eo(x+1),T=du(e[h-1],b,0);if(T>o){i=0;var P=0,U=T-o,q=1<<U;for(r.sort(function(At,ut){return b[ut.s]-b[At.s]||At.f-ut.f});i<a;++i){var B=r[i].s;if(!(b[B]>o))break;P+=q-(1<<T-b[B]),b[B]=o}for(P>>>=U;P>0;){var W=r[i].s;b[W]<o?P-=1<<o-b[W]++-1:++i}for(;i>=0&&P;--i){var G=r[i].s;b[G]==o&&(--b[G],++P)}T=o}return[new Ri(b),T]},du=function(n,o,e){return-1==n.s?Math.max(du(n.l,o,e+1),du(n.r,o,e+1)):o[n.s]=e},id=function(n){for(var o=n.length;o&&!n[--o];);for(var e=new Eo(++o),i=0,a=n[0],r=1,s=function(c){e[i++]=c},l=1;l<=o;++l)if(n[l]==a&&l!=o)++r;else{if(!a&&r>2){for(;r>138;r-=138)s(32754);r>2&&(s(r>10?r-11<<5|28690:r-3<<5|12305),r=0)}else if(r>3){for(s(a),--r;r>6;r-=6)s(8304);r>2&&(s(r-3<<5|8208),r=0)}for(;r--;)s(a);r=1,a=n[l]}return[e.subarray(0,i),o]},Bo=function(n,o){for(var e=0,i=0;i<o.length;++i)e+=n[i]*o[i];return e},gc=function(n,o,e){var i=e.length,a=Ml(o+2);n[a]=255&i,n[a+1]=i>>>8,n[a+2]=255^n[a],n[a+3]=255^n[a+1];for(var r=0;r<i;++r)n[a+r+4]=e[r];return 8*(a+4+i)},Ja=function(n,o,e,i,a,r,s,l,c,d,h){Nr(o,h++,e),++a[256];for(var _=uu(a,15),x=_[0],b=_[1],T=uu(r,15),P=T[0],U=T[1],q=id(x),B=q[0],W=q[1],G=id(P),nt=G[0],At=G[1],ut=new Eo(19),et=0;et<B.length;++et)ut[31&B[et]]++;for(et=0;et<nt.length;++et)ut[31&nt[et]]++;for(var vt=uu(ut,7),Nt=vt[0],ot=vt[1],_t=19;_t>4&&!Nt[su[_t-1]];--_t);var Vt,ie,Wt,oe,Mt=d+5<<3,It=Bo(a,sa)+Bo(r,za)+s,Tt=Bo(a,x)+Bo(r,P)+s+14+3*_t+Bo(ut,Nt)+(2*ut[16]+3*ut[17]+7*ut[18]);if(Mt<=It&&Mt<=Tt)return gc(o,h,n.subarray(c,c+d));if(Nr(o,h,1+(Tt<It)),h+=2,Tt<It){Vt=_r(x,b,0),ie=x,Wt=_r(P,U,0),oe=P;var ne=_r(Nt,ot,0);for(Nr(o,h,W-257),Nr(o,h+5,At-1),Nr(o,h+10,_t-4),h+=14,et=0;et<_t;++et)Nr(o,h+3*et,Nt[su[et]]);h+=3*_t;for(var we=[B,nt],at=0;at<2;++at){var kt=we[at];for(et=0;et<kt.length;++et)Nr(o,h,ne[Et=31&kt[et]]),h+=Nt[Et],Et>15&&(Nr(o,h,kt[et]>>>5&127),h+=kt[et]>>>12)}}else Vt=Th,ie=sa,Wt=kh,oe=za;for(et=0;et<l;++et)if(i[et]>255){var Et;Il(o,h,Vt[257+(Et=i[et]>>>18&31)]),h+=ie[Et+257],Et>7&&(Nr(o,h,i[et]>>>23&31),h+=ws[Et]);var Ft=31&i[et];Il(o,h,Wt[Ft]),h+=oe[Ft],Ft>3&&(Il(o,h,i[et]>>>5&8191),h+=Ol[Ft])}else Il(o,h,Vt[i[et]]),h+=ie[i[et]];return Il(o,h,Vt[256]),h+ie[256]},Ah=new Wr([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),cm=new Ri(0),fr=function(n,o,e,i,a){return function(n,o,e,i,a,r){var s=n.length,l=new Ri(i+s+5*(1+Math.floor(s/7e3))+a),c=l.subarray(i,l.length-a),d=0;if(!o||s<8)for(var h=0;h<=s;h+=65535){var _=h+65535;_<s?d=gc(c,d,n.subarray(h,_)):(c[h]=r,d=gc(c,d,n.subarray(h,s)))}else{for(var x=Ah[o-1],b=x>>>13,T=8191&x,P=(1<<e)-1,U=new Eo(32768),q=new Eo(P+1),B=Math.ceil(e/3),W=2*B,G=function(dn){return(n[dn]^n[dn+1]<<B^n[dn+2]<<W)&P},nt=new Wr(25e3),At=new Eo(288),ut=new Eo(32),et=0,vt=0,Nt=(h=0,0),ot=0,_t=0;h<s;++h){var Mt=G(h),It=32767&h,Tt=q[Mt];if(U[It]=Tt,q[Mt]=It,ot<=h){var Vt=s-h;if((et>7e3||Nt>24576)&&Vt>423){d=Ja(n,c,0,nt,At,ut,vt,Nt,_t,h-_t,d),Nt=et=vt=0,_t=h;for(var ie=0;ie<286;++ie)At[ie]=0;for(ie=0;ie<30;++ie)ut[ie]=0}var Wt=2,oe=0,ne=T,we=It-Tt&32767;if(Vt>2&&Mt==G(h-we))for(var at=Math.min(b,Vt)-1,kt=Math.min(32767,h),Et=Math.min(258,Vt);we<=kt&&--ne&&It!=Tt;){if(n[h+Wt]==n[h+Wt-we]){for(var Ft=0;Ft<Et&&n[h+Ft]==n[h+Ft-we];++Ft);if(Ft>Wt){if(Wt=Ft,oe=we,Ft>at)break;var Gt=Math.min(we,Ft-2),le=0;for(ie=0;ie<Gt;++ie){var ee=h-we+ie+32768&32767,Qe=ee-U[ee]+32768&32767;Qe>le&&(le=Qe,Tt=ee)}}}we+=(It=Tt)-(Tt=U[It])+32768&32767}if(oe){nt[Nt++]=268435456|Vr[Wt]<<18|Ji[oe];var Ne=31&Vr[Wt],on=31&Ji[oe];vt+=ws[Ne]+Ol[on],++At[257+Ne],++ut[on],ot=h+Wt,++et}else nt[Nt++]=n[h],++At[n[h]]}}d=Ja(n,c,r,nt,At,ut,vt,Nt,_t,h-_t,d),r||(d=gc(c,d,cm))}return Wo(l,0,i+Ml(d)+a)}(n,null==o.level?6:o.level,null==o.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(n.length)))):12+o.mem,e,i,!a)};function Ei(n,o){void 0===o&&(o={});var e=function(){var n=1,o=0;return{p:function(e){for(var i=n,a=o,r=e.length,s=0;s!=r;){for(var l=Math.min(s+5552,r);s<l;++s)a+=i+=e[s];i%=65521,a%=65521}n=i,o=a},d:function(){return(n>>>8<<16|(255&o)<<8|o>>>8)+2*((255&n)<<23)}}}();e.p(n);var i=fr(n,o,2,4);return function(n,o){var e=o.level,i=0==e?0:e<6?1:9==e?3:2;n[0]=120,n[1]=i<<6|(i?32-2*i:1)}(i,o),function(n,o,e){for(;e;++o)n[o]=e,e>>>=8}(i,i.length-4,e.d()),i}function Dt(n,o){return function(n,o,e){var i=n.length,a=!o||e,r=!e||e.i;e||(e={}),o||(o=new Ri(3*i));var s=function(Gt){var le=o.length;if(Gt>le){var ee=new Ri(Math.max(2*le,Gt));ee.set(o),o=ee}},l=e.f||0,c=e.p||0,d=e.b||0,h=e.l,_=e.d,x=e.m,b=e.n,T=8*i;do{if(!h){e.f=l=la(n,c,1);var P=la(n,c+1,3);if(c+=3,!P){var q=n[(U=Ml(c)+4)-4]|n[U-3]<<8,B=U+q;if(B>i){if(r)throw"unexpected EOF";break}a&&s(d+q),o.set(n.subarray(U,B),d),e.b=d+=q,e.p=c=8*B;continue}if(1==P)h=lm,_=Uo,x=9,b=5;else{if(2!=P)throw"invalid block type";var W=la(n,c,31)+257,G=la(n,c+10,15)+4,nt=W+la(n,c+5,31)+1;c+=14;for(var At=new Ri(nt),ut=new Ri(19),et=0;et<G;++et)ut[su[et]]=la(n,c+3*et,7);c+=3*G;var vt=fc(ut),Nt=(1<<vt)-1;if(!r&&c+nt*(vt+7)>T)break;var ot=_r(ut,vt,1);for(et=0;et<nt;){var U,_t=ot[la(n,c,Nt)];if(c+=15&_t,(U=_t>>>4)<16)At[et++]=U;else{var Mt=0,It=0;for(16==U?(It=3+la(n,c,3),c+=2,Mt=At[et-1]):17==U?(It=3+la(n,c,7),c+=3):18==U&&(It=11+la(n,c,127),c+=7);It--;)At[et++]=Mt}}var Tt=At.subarray(0,W),Vt=At.subarray(W);x=fc(Tt),b=fc(Vt),h=_r(Tt,x,1),_=_r(Vt,b,1)}if(c>T)throw"unexpected EOF"}a&&s(d+131072);for(var ie=(1<<x)-1,Wt=(1<<b)-1,oe=x+b+18;r||c+oe<T;){var ne=(Mt=h[lu(n,c)&ie])>>>4;if((c+=15&Mt)>T)throw"unexpected EOF";if(!Mt)throw"invalid length/literal";if(ne<256)o[d++]=ne;else{if(256==ne){h=null;break}var we=ne-254;ne>264&&(we=la(n,c,(1<<(at=ws[et=ne-257]))-1)+Cs[et],c+=at);var kt=_[lu(n,c)&Wt],Et=kt>>>4;if(!kt)throw"invalid distance";if(c+=15&kt,Vt=yo[Et],Et>3){var at=Ol[Et];Vt+=lu(n,c)&(1<<at)-1,c+=at}if(c>T)throw"unexpected EOF";a&&s(d+131072);for(var Ft=d+we;d<Ft;d+=4)o[d]=o[d-Vt],o[d+1]=o[d+1-Vt],o[d+2]=o[d+2-Vt],o[d+3]=o[d+3-Vt];d=Ft}}e.l=h,e.p=c,e.b=d,h&&(l=1,e.m=x,e.d=_,e.n=b)}while(!l);return d==o.length?o:Wo(o,0,d)}((function(n){if(8!=(15&n[0])||n[0]>>>4>7||(n[0]<<8|n[1])%31)throw"invalid zlib data";if(32&n[1])throw"invalid zlib data: preset dictionaries not supported"}(n),n.subarray(2,-4)),o)}var Dn=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Oh(){Dn.console&&"function"==typeof Dn.console.log&&Dn.console.log.apply(Dn.console,arguments)}var Ui={log:Oh,warn:function(n){Dn.console&&("function"==typeof Dn.console.warn?Dn.console.warn.apply(Dn.console,arguments):Oh.call(null,arguments))},error:function(n){Dn.console&&("function"==typeof Dn.console.error?Dn.console.error.apply(Dn.console,arguments):Oh(n))}};function U_(n,o,e){var i=new XMLHttpRequest;i.open("GET",n),i.responseType="blob",i.onload=function(){Xs(i.response,o,e)},i.onerror=function(){Ui.error("could not download file")},i.send()}function d1(n){var o=new XMLHttpRequest;o.open("HEAD",n,!1);try{o.send()}catch{}return o.status>=200&&o.status<=299}function Eh(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var o=document.createEvent("MouseEvents");o.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(o)}}var wc,Vs,Xs=Dn.saveAs||("object"!==(typeof window>"u"?"undefined":(0,Ni.Z)(window))||window!==Dn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,o,e){var i=Dn.URL||Dn.webkitURL,a=document.createElement("a");a.download=o=o||n.name||"download",a.rel="noopener","string"==typeof n?(a.href=n,a.origin!==location.origin?d1(a.href)?U_(n,o,e):Eh(a,a.target="_blank"):Eh(a)):(a.href=i.createObjectURL(n),setTimeout(function(){i.revokeObjectURL(a.href)},4e4),setTimeout(function(){Eh(a)},0))}:"msSaveOrOpenBlob"in navigator?function(n,o,e){if(o=o||n.name||"download","string"==typeof n)if(d1(n))U_(n,o,e);else{var i=document.createElement("a");i.href=n,i.target="_blank",setTimeout(function(){Eh(i)})}else navigator.msSaveOrOpenBlob((a=n,void 0===(r=e)?r={autoBom:!1}:"object"!==(0,Ni.Z)(r)&&(Ui.warn("Deprecated: Expected third argument to be a object"),r={autoBom:!r}),r.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob([String.fromCharCode(65279),a],{type:a.type}):a),o);var a,r}:function(n,o,e,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),"string"==typeof n)return U_(n,o,e);var a="application/octet-stream"===n.type,r=/constructor/i.test(Dn.HTMLElement)||Dn.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||a&&r)&&"object"===(typeof FileReader>"u"?"undefined":(0,Ni.Z)(FileReader))){var l=new FileReader;l.onloadend=function(){var h=l.result;h=s?h:h.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=h:location=h,i=null},l.readAsDataURL(n)}else{var c=Dn.URL||Dn.webkitURL,d=c.createObjectURL(n);i?i.location=d:location.href=d,i=null,setTimeout(function(){c.revokeObjectURL(d)},4e4)}});function B_(n){var o;n=n||"",this.ok=!1,"#"==n.charAt(0)&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var e=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],i=0;i<e.length;i++){var r=e[i].process,s=e[i].re.exec(n);s&&(o=r(s),this.r=o[0],this.g=o[1],this.b=o[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),d=this.b.toString(16);return 1==l.length&&(l="0"+l),1==c.length&&(c="0"+c),1==d.length&&(d="0"+d),"#"+l+c+d}}function sd(n,o){var e=n[0],i=n[1],a=n[2],r=n[3];e=Na(e,i,a,r,o[0],7,-680876936),r=Na(r,e,i,a,o[1],12,-389564586),a=Na(a,r,e,i,o[2],17,606105819),i=Na(i,a,r,e,o[3],22,-1044525330),e=Na(e,i,a,r,o[4],7,-176418897),r=Na(r,e,i,a,o[5],12,1200080426),a=Na(a,r,e,i,o[6],17,-1473231341),i=Na(i,a,r,e,o[7],22,-45705983),e=Na(e,i,a,r,o[8],7,1770035416),r=Na(r,e,i,a,o[9],12,-1958414417),a=Na(a,r,e,i,o[10],17,-42063),i=Na(i,a,r,e,o[11],22,-1990404162),e=Na(e,i,a,r,o[12],7,1804603682),r=Na(r,e,i,a,o[13],12,-40341101),a=Na(a,r,e,i,o[14],17,-1502002290),e=ca(e,i=Na(i,a,r,e,o[15],22,1236535329),a,r,o[1],5,-165796510),r=ca(r,e,i,a,o[6],9,-1069501632),a=ca(a,r,e,i,o[11],14,643717713),i=ca(i,a,r,e,o[0],20,-373897302),e=ca(e,i,a,r,o[5],5,-701558691),r=ca(r,e,i,a,o[10],9,38016083),a=ca(a,r,e,i,o[15],14,-660478335),i=ca(i,a,r,e,o[4],20,-405537848),e=ca(e,i,a,r,o[9],5,568446438),r=ca(r,e,i,a,o[14],9,-1019803690),a=ca(a,r,e,i,o[3],14,-187363961),i=ca(i,a,r,e,o[8],20,1163531501),e=ca(e,i,a,r,o[13],5,-1444681467),r=ca(r,e,i,a,o[2],9,-51403784),a=ca(a,r,e,i,o[7],14,1735328473),e=Za(e,i=ca(i,a,r,e,o[12],20,-1926607734),a,r,o[5],4,-378558),r=Za(r,e,i,a,o[8],11,-2022574463),a=Za(a,r,e,i,o[11],16,1839030562),i=Za(i,a,r,e,o[14],23,-35309556),e=Za(e,i,a,r,o[1],4,-1530992060),r=Za(r,e,i,a,o[4],11,1272893353),a=Za(a,r,e,i,o[7],16,-155497632),i=Za(i,a,r,e,o[10],23,-1094730640),e=Za(e,i,a,r,o[13],4,681279174),r=Za(r,e,i,a,o[0],11,-358537222),a=Za(a,r,e,i,o[3],16,-722521979),i=Za(i,a,r,e,o[6],23,76029189),e=Za(e,i,a,r,o[9],4,-640364487),r=Za(r,e,i,a,o[12],11,-421815835),a=Za(a,r,e,i,o[15],16,530742520),e=Xo(e,i=Za(i,a,r,e,o[2],23,-995338651),a,r,o[0],6,-198630844),r=Xo(r,e,i,a,o[7],10,1126891415),a=Xo(a,r,e,i,o[14],15,-1416354905),i=Xo(i,a,r,e,o[5],21,-57434055),e=Xo(e,i,a,r,o[12],6,1700485571),r=Xo(r,e,i,a,o[3],10,-1894986606),a=Xo(a,r,e,i,o[10],15,-1051523),i=Xo(i,a,r,e,o[1],21,-2054922799),e=Xo(e,i,a,r,o[8],6,1873313359),r=Xo(r,e,i,a,o[15],10,-30611744),a=Xo(a,r,e,i,o[6],15,-1560198380),i=Xo(i,a,r,e,o[13],21,1309151649),e=Xo(e,i,a,r,o[4],6,-145523070),r=Xo(r,e,i,a,o[11],10,-1120210379),a=Xo(a,r,e,i,o[2],15,718787259),i=Xo(i,a,r,e,o[9],21,-343485551),n[0]=tl(e,n[0]),n[1]=tl(i,n[1]),n[2]=tl(a,n[2]),n[3]=tl(r,n[3])}function fm(n,o,e,i,a,r){return o=tl(tl(o,n),tl(i,r)),tl(o<<a|o>>>32-a,e)}function Na(n,o,e,i,a,r,s){return fm(o&e|~o&i,n,o,a,r,s)}function ca(n,o,e,i,a,r,s){return fm(o&i|e&~i,n,o,a,r,s)}function Za(n,o,e,i,a,r,s){return fm(o^e^i,n,o,a,r,s)}function Xo(n,o,e,i,a,r,s){return fm(e^(o|~i),n,o,a,r,s)}function Cc(n){var o,e=n.length,i=[1732584193,-271733879,-1732584194,271733878];for(o=64;o<=n.length;o+=64)sd(i,Mh(n.substring(o-64,o)));n=n.substring(o-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(o=0;o<n.length;o++)a[o>>2]|=n.charCodeAt(o)<<(o%4<<3);if(a[o>>2]|=128<<(o%4<<3),o>55)for(sd(i,a),o=0;o<16;o++)a[o]=0;return a[14]=8*e,sd(i,a),i}function Mh(n){var o,e=[];for(o=0;o<64;o+=4)e[o>>2]=n.charCodeAt(o)+(n.charCodeAt(o+1)<<8)+(n.charCodeAt(o+2)<<16)+(n.charCodeAt(o+3)<<24);return e}wc=Dn.atob.bind(Dn),Vs=Dn.btoa.bind(Dn);var m1="0123456789abcdef".split("");function Z2(n){for(var o="",e=0;e<4;e++)o+=m1[n>>8*e+4&15]+m1[n>>8*e&15];return o}function D2(n){return String.fromCharCode((255&n)>>0,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function ld(n){return Cc(n).map(D2).join("")}var Ih="5d41402abc4b2a76b9719d911017c592"!=function(n){for(var o=0;o<n.length;o++)n[o]=Z2(n[o]);return n.join("")}(Cc("hello"));function tl(n,o){if(Ih){var e=(65535&n)+(65535&o);return(n>>16)+(o>>16)+(e>>16)<<16|65535&e}return n+o&4294967295}function z_(n,o){var e,i,a;if(n!==e){for(var s=(a=n,new Array(1+(256/n.length>>0)+1).join(a)),l=[],c=0;c<256;c++)l[c]=c;var d=0;for(c=0;c<256;c++){var h=l[c];d=(d+h+s.charCodeAt(c))%256,l[c]=l[d],l[d]=h}e=n,i=l}else l=i;var _=o.length,x=0,b=0,T="";for(c=0;c<_;c++)b=(b+(h=l[x=(x+1)%256]))%256,l[x]=l[b],l[b]=h,s=l[(l[x]+l[b])%256],T+=String.fromCharCode(o.charCodeAt(c)^s);return T}var J_={print:4,modify:8,copy:16,"annot-forms":32};function cd(n,o,e,i){this.v=1,this.r=2;var a=192;n.forEach(function(l){if(void 0!==J_.perm)throw new Error("Invalid permission: "+l);a+=J_[l]}),this.padding="(\xbfN^Nu\x8aAd\0NV\xff\xfa\x01\b..\0\xb6\xd0h>\x80/\f\xa9\xfedSiz";var r=(o+this.padding).substr(0,32),s=(e+this.padding).substr(0,32);this.O=this.processOwnerPassword(r,s),this.P=-(1+(255^a)),this.encryptionKey=ld(r+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(i)).substr(0,5),this.U=z_(this.encryptionKey,this.padding)}function ud(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var o="",e=n.length,i=0;i<e;i++){var a=n.charCodeAt(i);o+=a<33||35===a||37===a||40===a||41===a||47===a||60===a||62===a||91===a||93===a||123===a||125===a||a>126?"#"+("0"+a.toString(16)).slice(-2):n[i]}return o}function ta(n){if("object"!==(0,Ni.Z)(n))throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var o={};this.subscribe=function(e,i,a){if(a=a||!1,"string"!=typeof e||"function"!=typeof i||"boolean"!=typeof a)throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");o.hasOwnProperty(e)||(o[e]={});var r=Math.random().toString(35);return o[e][r]=[i,!!a],r},this.unsubscribe=function(e){for(var i in o)if(o[i][e])return delete o[i][e],0===Object.keys(o[i]).length&&delete o[i],!0;return!1},this.publish=function(e){if(o.hasOwnProperty(e)){var i=Array.prototype.slice.call(arguments,1),a=[];for(var r in o[e]){var s=o[e][r];try{s[0].apply(n,i)}catch(l){Dn.console&&Ui.error("jsPDF PubSub Error",l.message,l)}s[1]&&a.push(r)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return o}}function Do(n){if(!(this instanceof Do))return new Do(n);var o="opacity,stroke-opacity".split(",");for(var e in n)n.hasOwnProperty(e)&&o.indexOf(e)>=0&&(this[e]=n[e]);this.id="",this.objectNumber=-1}function h1(n,o){this.gState=n,this.matrix=o,this.id="",this.objectNumber=-1}function Tc(n,o,e,i,a){if(!(this instanceof Tc))return new Tc(n,o,e,i,a);this.type="axial"===n?2:3,this.coords=o,this.colors=e,h1.call(this,i,a)}function kc(n,o,e,i,a){if(!(this instanceof kc))return new kc(n,o,e,i,a);this.boundingBox=n,this.xStep=o,this.yStep=e,this.stream="",this.cloneIndex=0,h1.call(this,i,a)}function On(n){var o,e="string"==typeof arguments[0]?arguments[0]:"p",i=arguments[1],a=arguments[2],r=arguments[3],s=[],l=1,c=16,d="S",h=null;"object"===(0,Ni.Z)(n=n||{})&&(e=n.orientation,i=n.unit||i,a=n.format||a,r=n.compress||n.compressPdf||r,null!==(h=n.encryption||null)&&(h.userPassword=h.userPassword||"",h.ownerPassword=h.ownerPassword||"",h.userPermissions=h.userPermissions||[]),l="number"==typeof n.userUnit?Math.abs(n.userUnit):1,void 0!==n.precision&&(o=n.precision),void 0!==n.floatPrecision&&(c=n.floatPrecision),d=n.defaultPathOperation||"S"),s=n.filters||(!0===r?["FlateEncode"]:s),i=i||"mm",e=(""+(e||"P")).toLowerCase();var _=n.putOnlyUsedFonts||!1,x={},b={internal:{},__private__:{}};b.__private__.PubSub=ta;var T="1.3",P=b.__private__.getPdfVersion=function(){return T};b.__private__.setPdfVersion=function(Z){T=Z};var U={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};b.__private__.getPageFormats=function(){return U};var q=b.__private__.getPageFormat=function(Z){return U[Z]};a=a||"a4";var W="compat";function G(){this.saveGraphicsState(),Pt(new Fn(hn,0,0,-hn,0,Qd()*hn).toString()+" cm"),this.setFontSize(this.getFontSize()/hn),d="n",W="advanced"}function nt(){this.restoreGraphicsState(),d="S",W="compat"}var At=b.__private__.combineFontStyleAndFontWeight=function(Z,lt){if("bold"==Z&&"normal"==lt||"bold"==Z&&400==lt||"normal"==Z&&"italic"==lt||"bold"==Z&&"italic"==lt)throw new Error("Invalid Combination of fontweight and fontstyle");return lt&&(Z=400==lt||"normal"===lt?"italic"===Z?"italic":"normal":700!=lt&&"bold"!==lt||"normal"!==Z?(700==lt?"bold":lt)+""+Z:"bold"),Z};b.advancedAPI=function(Z){var lt="compat"===W;return lt&&G.call(this),"function"!=typeof Z||(Z(this),lt&&nt.call(this)),this},b.compatAPI=function(Z){var lt="advanced"===W;return lt&&nt.call(this),"function"!=typeof Z||(Z(this),lt&&G.call(this)),this},b.isAdvancedAPI=function(){return"advanced"===W};var ut,et=function(Z){if("advanced"!==W)throw new Error(Z+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},vt=b.roundToPrecision=b.__private__.roundToPrecision=function(Z,lt){var Lt=o||lt;if(isNaN(Z)||isNaN(Lt))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return Z.toFixed(Lt).replace(/0+$/,"")};ut=b.hpf=b.__private__.hpf="number"==typeof c?function(Z){if(isNaN(Z))throw new Error("Invalid argument passed to jsPDF.hpf");return vt(Z,c)}:"smart"===c?function(Z){if(isNaN(Z))throw new Error("Invalid argument passed to jsPDF.hpf");return vt(Z,Z>-1&&Z<1?16:5)}:function(Z){if(isNaN(Z))throw new Error("Invalid argument passed to jsPDF.hpf");return vt(Z,16)};var Nt=b.f2=b.__private__.f2=function(Z){if(isNaN(Z))throw new Error("Invalid argument passed to jsPDF.f2");return vt(Z,2)},ot=b.__private__.f3=function(Z){if(isNaN(Z))throw new Error("Invalid argument passed to jsPDF.f3");return vt(Z,3)},_t=b.scale=b.__private__.scale=function(Z){if(isNaN(Z))throw new Error("Invalid argument passed to jsPDF.scale");return"compat"===W?Z*hn:"advanced"===W?Z:void 0},It=function(Z){return _t(function(Z){return"compat"===W?Qd()-Z:"advanced"===W?Z:void 0}(Z))};b.__private__.setPrecision=b.setPrecision=function(Z){"number"==typeof parseInt(Z,10)&&(o=parseInt(Z,10))};var Tt,Vt="00000000000000000000000000000000",ie=b.__private__.getFileId=function(){return Vt},Wt=b.__private__.setFileId=function(Z){return Vt=void 0!==Z&&/^[a-fA-F0-9]{32}$/.test(Z)?Z.toUpperCase():Vt.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),null!==h&&(Or=new cd(h.userPermissions,h.userPassword,h.ownerPassword,Vt)),Vt};b.setFileId=function(Z){return Wt(Z),this},b.getFileId=function(){return ie()};var oe=b.__private__.convertDateToPDFDate=function(Z){var lt=Z.getTimezoneOffset(),Lt=lt<0?"+":"-",Bt=Math.floor(Math.abs(lt/60)),ae=Math.abs(lt%60),be=[Lt,Et(Bt),"'",Et(ae),"'"].join("");return["D:",Z.getFullYear(),Et(Z.getMonth()+1),Et(Z.getDate()),Et(Z.getHours()),Et(Z.getMinutes()),Et(Z.getSeconds()),be].join("")},ne=b.__private__.convertPDFDateToDate=function(Z){var lt=parseInt(Z.substr(2,4),10),Lt=parseInt(Z.substr(6,2),10)-1,Bt=parseInt(Z.substr(8,2),10),ae=parseInt(Z.substr(10,2),10),be=parseInt(Z.substr(12,2),10),Re=parseInt(Z.substr(14,2),10);return new Date(lt,Lt,Bt,ae,be,Re,0)},we=b.__private__.setCreationDate=function(Z){var lt;if(void 0===Z&&(Z=new Date),Z instanceof Date)lt=oe(Z);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(Z))throw new Error("Invalid argument passed to jsPDF.setCreationDate");lt=Z}return Tt=lt},at=b.__private__.getCreationDate=function(Z){var lt=Tt;return"jsDate"===Z&&(lt=ne(Tt)),lt};b.setCreationDate=function(Z){return we(Z),this},b.getCreationDate=function(Z){return at(Z)};var kt,Et=b.__private__.padd2=function(Z){return("0"+parseInt(Z)).slice(-2)},Ft=b.__private__.padd2Hex=function(Z){return("00"+(Z=Z.toString())).substr(Z.length)},Gt=0,le=[],ee=[],re=0,Qe=[],Ne=[],on=!1,en=ee;b.__private__.setCustomOutputDestination=function(Z){on=!0,en=Z};var pe=function(Z){on||(en=Z)};b.__private__.resetCustomOutputDestination=function(){on=!1,en=ee};var Pt=b.__private__.out=function(Z){return Z=Z.toString(),re+=Z.length+1,en.push(Z),en},wn=b.__private__.write=function(Z){return Pt(1===arguments.length?Z.toString():Array.prototype.join.call(arguments," "))},gn=b.__private__.getArrayBuffer=function(Z){for(var lt=Z.length,Lt=new ArrayBuffer(lt),Bt=new Uint8Array(Lt);lt--;)Bt[lt]=Z.charCodeAt(lt);return Lt},je=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];b.__private__.getStandardFonts=function(){return je};var Ge=n.fontSize||16;b.__private__.setFontSize=b.setFontSize=function(Z){return Ge="advanced"===W?Z/hn:Z,this};var rn,Ve=b.__private__.getFontSize=b.getFontSize=function(){return"compat"===W?Ge:Ge*hn},Cn=n.R2L||!1;b.__private__.setR2L=b.setR2L=function(Z){return Cn=Z,this},b.__private__.getR2L=b.getR2L=function(){return Cn};var Qn,Bn=b.__private__.setZoomMode=function(Z){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(Z))rn=Z;else if(isNaN(Z)){if(-1===[void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(Z))throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+Z+'" is not recognized.');rn=Z}else rn=parseInt(Z,10)};b.__private__.getZoomMode=function(){return rn};var ui,Ci=b.__private__.setPageMode=function(Z){if(-1==[void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(Z))throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+Z+'" is not recognized.');Qn=Z};b.__private__.getPageMode=function(){return Qn};var uo=b.__private__.setLayoutMode=function(Z){if(-1==[void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(Z))throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+Z+'" is not recognized.');ui=Z};b.__private__.getLayoutMode=function(){return ui},b.__private__.setDisplayMode=b.setDisplayMode=function(Z,lt,Lt){return Bn(Z),uo(lt),Ci(Lt),this};var Un={title:"",subject:"",author:"",keywords:"",creator:""};b.__private__.getDocumentProperty=function(Z){if(-1===Object.keys(Un).indexOf(Z))throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Un[Z]},b.__private__.getDocumentProperties=function(){return Un},b.__private__.setDocumentProperties=b.setProperties=b.setDocumentProperties=function(Z){for(var lt in Un)Un.hasOwnProperty(lt)&&Z[lt]&&(Un[lt]=Z[lt]);return this},b.__private__.setDocumentProperty=function(Z,lt){if(-1===Object.keys(Un).indexOf(Z))throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Un[Z]=lt};var vi,hn,Sr,zi,Wl,bo={},Ro={},Jc=[],Vi={},nh={},ia={},Vl={},qu=null,oa=0,$n=[],Xi=new ta(b),ih=n.hotfixes||[],dr={},Hc={},Gc=[],Fn=function Z(lt,Lt,Bt,ae,be,Re){if(!(this instanceof Z))return new Z(lt,Lt,Bt,ae,be,Re);isNaN(lt)&&(lt=1),isNaN(Lt)&&(Lt=0),isNaN(Bt)&&(Bt=0),isNaN(ae)&&(ae=1),isNaN(be)&&(be=0),isNaN(Re)&&(Re=0),this._matrix=[lt,Lt,Bt,ae,be,Re]};Object.defineProperty(Fn.prototype,"sx",{get:function(){return this._matrix[0]},set:function(Z){this._matrix[0]=Z}}),Object.defineProperty(Fn.prototype,"shy",{get:function(){return this._matrix[1]},set:function(Z){this._matrix[1]=Z}}),Object.defineProperty(Fn.prototype,"shx",{get:function(){return this._matrix[2]},set:function(Z){this._matrix[2]=Z}}),Object.defineProperty(Fn.prototype,"sy",{get:function(){return this._matrix[3]},set:function(Z){this._matrix[3]=Z}}),Object.defineProperty(Fn.prototype,"tx",{get:function(){return this._matrix[4]},set:function(Z){this._matrix[4]=Z}}),Object.defineProperty(Fn.prototype,"ty",{get:function(){return this._matrix[5]},set:function(Z){this._matrix[5]=Z}}),Object.defineProperty(Fn.prototype,"a",{get:function(){return this._matrix[0]},set:function(Z){this._matrix[0]=Z}}),Object.defineProperty(Fn.prototype,"b",{get:function(){return this._matrix[1]},set:function(Z){this._matrix[1]=Z}}),Object.defineProperty(Fn.prototype,"c",{get:function(){return this._matrix[2]},set:function(Z){this._matrix[2]=Z}}),Object.defineProperty(Fn.prototype,"d",{get:function(){return this._matrix[3]},set:function(Z){this._matrix[3]=Z}}),Object.defineProperty(Fn.prototype,"e",{get:function(){return this._matrix[4]},set:function(Z){this._matrix[4]=Z}}),Object.defineProperty(Fn.prototype,"f",{get:function(){return this._matrix[5]},set:function(Z){this._matrix[5]=Z}}),Object.defineProperty(Fn.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Fn.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Fn.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Fn.prototype,"isIdentity",{get:function(){return 1===this.sx&&0===this.shy&&0===this.shx&&1===this.sy&&0===this.tx&&0===this.ty}}),Fn.prototype.join=function(Z){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(ut).join(Z)},Fn.prototype.multiply=function(Z){return new Fn(Z.sx*this.sx+Z.shy*this.shx,Z.sx*this.shy+Z.shy*this.sy,Z.shx*this.sx+Z.sy*this.shx,Z.shx*this.shy+Z.sy*this.sy,Z.tx*this.sx+Z.ty*this.shx+this.tx,Z.tx*this.shy+Z.ty*this.sy+this.ty)},Fn.prototype.decompose=function(){var Z=this.sx,lt=this.shy,Lt=this.shx,Bt=this.sy,ae=this.tx,be=this.ty,Re=Math.sqrt(Z*Z+lt*lt),pn=(Z/=Re)*Lt+(lt/=Re)*Bt;Lt-=Z*pn,Bt-=lt*pn;var En=Math.sqrt(Lt*Lt+Bt*Bt);return pn/=En,Z*(Bt/=En)<lt*(Lt/=En)&&(Z=-Z,lt=-lt,pn=-pn,Re=-Re),{scale:new Fn(Re,0,0,En,0,0),translate:new Fn(1,0,0,1,ae,be),rotate:new Fn(Z,lt,-lt,Z,0,0),skew:new Fn(1,0,pn,1,0,0)}},Fn.prototype.toString=function(Z){return this.join(" ")},Fn.prototype.inversed=function(){var Z=this.sx,lt=this.shy,Lt=this.shx,Bt=this.sy,ae=this.tx,be=this.ty,Re=1/(Z*Bt-lt*Lt),pn=Bt*Re,En=-lt*Re,ti=-Lt*Re,di=Z*Re;return new Fn(pn,En,ti,di,-pn*ae-ti*be,-En*ae-di*be)},Fn.prototype.applyToPoint=function(Z){return new r_(Z.x*this.sx+Z.y*this.shx+this.tx,Z.x*this.shy+Z.y*this.sy+this.ty)},Fn.prototype.applyToRectangle=function(Z){var lt=this.applyToPoint(Z),Lt=this.applyToPoint(new r_(Z.x+Z.w,Z.y+Z.h));return new Rg(lt.x,lt.y,Lt.x-lt.x,Lt.y-lt.y)},Fn.prototype.clone=function(){return new Fn(this.sx,this.shy,this.shx,this.sy,this.tx,this.ty)},b.Matrix=Fn;var Xl=b.matrixMult=function(Z,lt){return lt.multiply(Z)},$c=new Fn(1,0,0,1,0,0);b.unitMatrix=b.identityMatrix=$c;var ps=function(Z,lt){if(!nh[Z]){var Lt=(lt instanceof Tc?"Sh":"P")+(Object.keys(Vi).length+1).toString(10);lt.id=Lt,nh[Z]=Lt,Vi[Lt]=lt,Xi.publish("addPattern",lt)}};b.ShadingPattern=Tc,b.TilingPattern=kc,b.addShadingPattern=function(Z,lt){return et("addShadingPattern()"),ps(Z,lt),this},b.beginTilingPattern=function(Z){et("beginTilingPattern()"),m2(Z.boundingBox[0],Z.boundingBox[1],Z.boundingBox[2]-Z.boundingBox[0],Z.boundingBox[3]-Z.boundingBox[1],Z.matrix)},b.endTilingPattern=function(Z,lt){et("endTilingPattern()"),lt.stream=Ne[kt].join("\n"),ps(Z,lt),Xi.publish("endTilingPattern",lt),Gc.pop().restore()};var Z,Qa=b.__private__.newObject=function(){var Z=Oa();return Rs(Z,!0),Z},Oa=b.__private__.newObjectDeferred=function(){return Gt++,le[Gt]=function(){return re},Gt},Rs=function(Z,lt){return lt="boolean"==typeof lt&&lt,le[Z]=re,lt&&Pt(Z+" 0 obj"),Z},Gp=b.__private__.newAdditionalObject=function(){var Z={objId:Oa(),content:""};return Qe.push(Z),Z},Fu=Oa(),tc=Oa(),ec=b.__private__.decodeColorString=function(Z){var lt=Z.split(" ");if(2!==lt.length||"g"!==lt[1]&&"G"!==lt[1])5===lt.length&&("k"===lt[4]||"K"===lt[4])&&(lt=[(1-lt[0])*(1-lt[3]),(1-lt[1])*(1-lt[3]),(1-lt[2])*(1-lt[3]),"r"]);else{var Lt=parseFloat(lt[0]);lt=[Lt,Lt,Lt,"r"]}for(var Bt="#",ae=0;ae<3;ae++)Bt+=("0"+Math.floor(255*parseFloat(lt[ae])).toString(16)).slice(-2);return Bt},nc=b.__private__.encodeColorString=function(Z){var lt;"string"==typeof Z&&(Z={ch1:Z});var Lt=Z.ch1,Bt=Z.ch2,ae=Z.ch3,be=Z.ch4,Re="draw"===Z.pdfColorType?["G","RG","K"]:["g","rg","k"];if("string"==typeof Lt&&"#"!==Lt.charAt(0)){var pn=new B_(Lt);if(pn.ok)Lt=pn.toHex();else if(!/^\d*\.?\d*$/.test(Lt))throw new Error('Invalid color "'+Lt+'" passed to jsPDF.encodeColorString.')}if("string"==typeof Lt&&/^#[0-9A-Fa-f]{3}$/.test(Lt)&&(Lt="#"+Lt[1]+Lt[1]+Lt[2]+Lt[2]+Lt[3]+Lt[3]),"string"==typeof Lt&&/^#[0-9A-Fa-f]{6}$/.test(Lt)){var En=parseInt(Lt.substr(1),16);Lt=En>>16&255,Bt=En>>8&255,ae=255&En}if(void 0===Bt||void 0===be&&Lt===Bt&&Bt===ae)lt="string"==typeof Lt?Lt+" "+Re[0]:2===Z.precision?Nt(Lt/255)+" "+Re[0]:ot(Lt/255)+" "+Re[0];else if(void 0===be||"object"===(0,Ni.Z)(be)){if(be&&!isNaN(be.a)&&0===be.a)return["1.","1.","1.",Re[1]].join(" ");lt="string"==typeof Lt?[Lt,Bt,ae,Re[1]].join(" "):2===Z.precision?[Nt(Lt/255),Nt(Bt/255),Nt(ae/255),Re[1]].join(" "):[ot(Lt/255),ot(Bt/255),ot(ae/255),Re[1]].join(" ")}else lt="string"==typeof Lt?[Lt,Bt,ae,be,Re[2]].join(" "):2===Z.precision?[Nt(Lt),Nt(Bt),Nt(ae),Nt(be),Re[2]].join(" "):[ot(Lt),ot(Bt),ot(ae),ot(be),Re[2]].join(" ");return lt},Yc=b.__private__.getFilters=function(){return s},xl=b.__private__.putStream=function(Z){var lt=(Z=Z||{}).data||"",Lt=Z.filters||Yc(),Bt=Z.alreadyAppliedFilters||[],ae=Z.addLength1||!1,be=lt.length,Re=Z.objectId,pn=function(Er){return Er};if(null!==h&&void 0===Re)throw new Error("ObjectId must be passed to putStream for file encryption");null!==h&&(pn=Or.encryptor(Re,0));var En={};!0===Lt&&(Lt=["FlateEncode"]);var ti=Z.additionalKeyValues||[],di=(En=void 0!==On.API.processDataByFilters?On.API.processDataByFilters(lt,Lt):{data:lt,reverseChain:[]}).reverseChain+(Array.isArray(Bt)?Bt.join(" "):Bt.toString());if(0!==En.data.length&&(ti.push({key:"Length",value:En.data.length}),!0===ae&&ti.push({key:"Length1",value:be})),0!=di.length)if(di.split("/").length-1==1)ti.push({key:"Filter",value:di});else{ti.push({key:"Filter",value:"["+di+"]"});for(var Li=0;Li<ti.length;Li+=1)if("DecodeParms"===ti[Li].key){for(var Ko=[],aa=0;aa<En.reverseChain.split("/").length-1;aa+=1)Ko.push("null");Ko.push(ti[Li].value),ti[Li].value="["+Ko.join(" ")+"]"}}Pt("<<");for(var Ea=0;Ea<ti.length;Ea++)Pt("/"+ti[Ea].key+" "+ti[Ea].value);Pt(">>"),0!==En.data.length&&(Pt("stream"),Pt(pn(En.data)),Pt("endstream"))},Kc=b.__private__.putPage=function(Z){var lt=Z.number,Lt=Z.data,Bt=Z.objId,ae=Z.contentsObjId;Rs(Bt,!0),Pt("<</Type /Page"),Pt("/Parent "+Z.rootDictionaryObjId+" 0 R"),Pt("/Resources "+Z.resourceDictionaryObjId+" 0 R"),Pt("/MediaBox ["+parseFloat(ut(Z.mediaBox.bottomLeftX))+" "+parseFloat(ut(Z.mediaBox.bottomLeftY))+" "+ut(Z.mediaBox.topRightX)+" "+ut(Z.mediaBox.topRightY)+"]"),null!==Z.cropBox&&Pt("/CropBox ["+ut(Z.cropBox.bottomLeftX)+" "+ut(Z.cropBox.bottomLeftY)+" "+ut(Z.cropBox.topRightX)+" "+ut(Z.cropBox.topRightY)+"]"),null!==Z.bleedBox&&Pt("/BleedBox ["+ut(Z.bleedBox.bottomLeftX)+" "+ut(Z.bleedBox.bottomLeftY)+" "+ut(Z.bleedBox.topRightX)+" "+ut(Z.bleedBox.topRightY)+"]"),null!==Z.trimBox&&Pt("/TrimBox ["+ut(Z.trimBox.bottomLeftX)+" "+ut(Z.trimBox.bottomLeftY)+" "+ut(Z.trimBox.topRightX)+" "+ut(Z.trimBox.topRightY)+"]"),null!==Z.artBox&&Pt("/ArtBox ["+ut(Z.artBox.bottomLeftX)+" "+ut(Z.artBox.bottomLeftY)+" "+ut(Z.artBox.topRightX)+" "+ut(Z.artBox.topRightY)+"]"),"number"==typeof Z.userUnit&&1!==Z.userUnit&&Pt("/UserUnit "+Z.userUnit),Xi.publish("putPage",{objId:Bt,pageContext:$n[lt],pageNumber:lt,page:Lt}),Pt("/Contents "+ae+" 0 R"),Pt(">>"),Pt("endobj");var be=Lt.join("\n");return"advanced"===W&&(be+="\nQ"),Rs(ae,!0),xl({data:be,filters:Yc(),objectId:ae}),Pt("endobj"),Bt},oh=b.__private__.putPages=function(){var Z,lt,Lt=[];for(Z=1;Z<=oa;Z++)$n[Z].objId=Oa(),$n[Z].contentsObjId=Oa();for(Z=1;Z<=oa;Z++)Lt.push(Kc({number:Z,data:Ne[Z],objId:$n[Z].objId,contentsObjId:$n[Z].contentsObjId,mediaBox:$n[Z].mediaBox,cropBox:$n[Z].cropBox,bleedBox:$n[Z].bleedBox,trimBox:$n[Z].trimBox,artBox:$n[Z].artBox,userUnit:$n[Z].userUnit,rootDictionaryObjId:Fu,resourceDictionaryObjId:tc}));Rs(Fu,!0),Pt("<</Type /Pages");var Bt="/Kids [";for(lt=0;lt<oa;lt++)Bt+=Lt[lt]+" 0 R ";Pt(Bt+"]"),Pt("/Count "+oa),Pt(">>"),Pt("endobj"),Xi.publish("postPutPages")},$p=function(Z){Xi.publish("putFont",{font:Z,out:Pt,newObject:Qa,putStream:xl}),!0!==Z.isAlreadyPutted&&(Z.objectNumber=Qa(),Pt("<<"),Pt("/Type /Font"),Pt("/BaseFont /"+ud(Z.postScriptName)),Pt("/Subtype /Type1"),"string"==typeof Z.encoding&&Pt("/Encoding /"+Z.encoding),Pt("/FirstChar 32"),Pt("/LastChar 255"),Pt(">>"),Pt("endobj"))},Kp=function(Z){Z.objectNumber=Qa();var lt=[];lt.push({key:"Type",value:"/XObject"}),lt.push({key:"Subtype",value:"/Form"}),lt.push({key:"BBox",value:"["+[ut(Z.x),ut(Z.y),ut(Z.x+Z.width),ut(Z.y+Z.height)].join(" ")+"]"}),lt.push({key:"Matrix",value:"["+Z.matrix.toString()+"]"});var Lt=Z.pages[1].join("\n");xl({data:Lt,additionalKeyValues:lt,objectId:Z.objectNumber}),Pt("endobj")},Tw=function(Z,lt){lt||(lt=21);var Lt=Qa(),Bt=function(Z,lt){var Lt,Bt=[],ae=1/(lt-1);for(Lt=0;Lt<1;Lt+=ae)Bt.push(Lt);Bt.push(1),0!=Z[0].offset&&Z.unshift({offset:0,color:Z[0].color}),1!=Z[Z.length-1].offset&&Z.push({offset:1,color:Z[Z.length-1].color});for(var pn="",En=0,ti=0;ti<Bt.length;ti++){for(Lt=Bt[ti];Lt>Z[En+1].offset;)En++;var di=Z[En].offset,Li=(Lt-di)/(Z[En+1].offset-di),Ko=Z[En].color,aa=Z[En+1].color;pn+=Ft(Math.round((1-Li)*Ko[0]+Li*aa[0]).toString(16))+Ft(Math.round((1-Li)*Ko[1]+Li*aa[1]).toString(16))+Ft(Math.round((1-Li)*Ko[2]+Li*aa[2]).toString(16))}return pn.trim()}(Z.colors,lt),ae=[];ae.push({key:"FunctionType",value:"0"}),ae.push({key:"Domain",value:"[0.0 1.0]"}),ae.push({key:"Size",value:"["+lt+"]"}),ae.push({key:"BitsPerSample",value:"8"}),ae.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ae.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),xl({data:Bt,additionalKeyValues:ae,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Lt}),Pt("endobj"),Z.objectNumber=Qa(),Pt("<< /ShadingType "+Z.type),Pt("/ColorSpace /DeviceRGB");var be="/Coords ["+ut(parseFloat(Z.coords[0]))+" "+ut(parseFloat(Z.coords[1]))+" ";be+=2===Z.type?ut(parseFloat(Z.coords[2]))+" "+ut(parseFloat(Z.coords[3])):ut(parseFloat(Z.coords[2]))+" "+ut(parseFloat(Z.coords[3]))+" "+ut(parseFloat(Z.coords[4]))+" "+ut(parseFloat(Z.coords[5])),Pt(be+="]"),Z.matrix&&Pt("/Matrix ["+Z.matrix.toString()+"]"),Pt("/Function "+Lt+" 0 R"),Pt("/Extend [true true]"),Pt(">>"),Pt("endobj")},kw=function(Z,lt){var Lt=Oa(),Bt=Qa();lt.push({resourcesOid:Lt,objectOid:Bt}),Z.objectNumber=Bt;var ae=[];ae.push({key:"Type",value:"/Pattern"}),ae.push({key:"PatternType",value:"1"}),ae.push({key:"PaintType",value:"1"}),ae.push({key:"TilingType",value:"1"}),ae.push({key:"BBox",value:"["+Z.boundingBox.map(ut).join(" ")+"]"}),ae.push({key:"XStep",value:ut(Z.xStep)}),ae.push({key:"YStep",value:ut(Z.yStep)}),ae.push({key:"Resources",value:Lt+" 0 R"}),Z.matrix&&ae.push({key:"Matrix",value:"["+Z.matrix.toString()+"]"}),xl({data:Z.stream,additionalKeyValues:ae,objectId:Z.objectNumber}),Pt("endobj")},Yx=function(Z){for(var lt in Z.objectNumber=Qa(),Pt("<<"),Z)switch(lt){case"opacity":Pt("/ca "+Nt(Z[lt]));break;case"stroke-opacity":Pt("/CA "+Nt(Z[lt]))}Pt(">>"),Pt("endobj")},_a=function(Z){Rs(Z.resourcesOid,!0),Pt("<<"),Pt("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var Z in Pt("/Font <<"),bo)bo.hasOwnProperty(Z)&&(!1===_||!0===_&&x.hasOwnProperty(Z))&&Pt("/"+Z+" "+bo[Z].objectNumber+" 0 R");Pt(">>")}(),function(){if(Object.keys(Vi).length>0){for(var Z in Pt("/Shading <<"),Vi)Vi.hasOwnProperty(Z)&&Vi[Z]instanceof Tc&&Vi[Z].objectNumber>=0&&Pt("/"+Z+" "+Vi[Z].objectNumber+" 0 R");Xi.publish("putShadingPatternDict"),Pt(">>")}}(),function(Z){if(Object.keys(Vi).length>0){for(var lt in Pt("/Pattern <<"),Vi)Vi.hasOwnProperty(lt)&&Vi[lt]instanceof b.TilingPattern&&Vi[lt].objectNumber>=0&&Vi[lt].objectNumber<Z&&Pt("/"+lt+" "+Vi[lt].objectNumber+" 0 R");Xi.publish("putTilingPatternDict"),Pt(">>")}}(Z.objectOid),function(){if(Object.keys(ia).length>0){var Z;for(Z in Pt("/ExtGState <<"),ia)ia.hasOwnProperty(Z)&&ia[Z].objectNumber>=0&&Pt("/"+Z+" "+ia[Z].objectNumber+" 0 R");Xi.publish("putGStateDict"),Pt(">>")}}(),function(){for(var Z in Pt("/XObject <<"),dr)dr.hasOwnProperty(Z)&&dr[Z].objectNumber>=0&&Pt("/"+Z+" "+dr[Z].objectNumber+" 0 R");Xi.publish("putXobjectDict"),Pt(">>")}(),Pt(">>"),Pt("endobj")},Xx=function(Z){Ro[Z.fontName]=Ro[Z.fontName]||{},Ro[Z.fontName][Z.fontStyle]=Z.id},Lg=function(Z,lt,Lt,Bt,ae){var be={id:"F"+(Object.keys(bo).length+1).toString(10),postScriptName:Z,fontName:lt,fontStyle:Lt,encoding:Bt,isStandardFont:ae||!1,metadata:{}};return Xi.publish("addFont",{font:be,instance:this}),bo[be.id]=be,Xx(be),be.id},_s=b.__private__.pdfEscape=b.pdfEscape=function(Z,lt){return function(Z,lt){var Lt,Bt,ae,be,Re,pn,En,ti,di;if(ae=(lt=lt||{}).sourceEncoding||"Unicode",Re=lt.outputEncoding,(lt.autoencode||Re)&&bo[vi].metadata&&bo[vi].metadata[ae]&&bo[vi].metadata[ae].encoding&&(be=bo[vi].metadata[ae].encoding,!Re&&bo[vi].encoding&&(Re=bo[vi].encoding),!Re&&be.codePages&&(Re=be.codePages[0]),"string"==typeof Re&&(Re=be[Re]),Re)){for(En=!1,pn=[],Lt=0,Bt=Z.length;Lt<Bt;Lt++)(ti=Re[Z.charCodeAt(Lt)])?pn.push(String.fromCharCode(ti)):pn.push(Z[Lt]),pn[Lt].charCodeAt(0)>>8&&(En=!0);Z=pn.join("")}for(Lt=Z.length;void 0===En&&0!==Lt;)Z.charCodeAt(Lt-1)>>8&&(En=!0),Lt--;if(!En)return Z;for(pn=lt.noBOM?[]:[254,255],Lt=0,Bt=Z.length;Lt<Bt;Lt++){if((di=(ti=Z.charCodeAt(Lt))>>8)>>8)throw new Error("Character at position "+Lt+" of string '"+Z+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");pn.push(di),pn.push(ti-(di<<8))}return String.fromCharCode.apply(void 0,pn)}(Z,lt).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Pg=b.__private__.beginPage=function(Z){Ne[++oa]=[],$n[oa]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(Z[0]),topRightY:Number(Z[1])}},e2(oa),pe(Ne[kt])},t2=function(Z,lt){var Lt,Bt,ae;switch(e=lt||e,"string"==typeof Z&&(Lt=q(Z.toLowerCase()),Array.isArray(Lt)&&(Bt=Lt[0],ae=Lt[1])),Array.isArray(Z)&&(Bt=Z[0]*hn,ae=Z[1]*hn),isNaN(Bt)&&(Bt=a[0],ae=a[1]),(Bt>14400||ae>14400)&&(Ui.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Bt=Math.min(14400,Bt),ae=Math.min(14400,ae)),a=[Bt,ae],e.substr(0,1)){case"l":ae>Bt&&(a=[ae,Bt]);break;case"p":Bt>ae&&(a=[ae,Bt])}Pg(a),s2(jg),Pt(oc),0!==Fg&&Pt(Fg+" J"),0!==Qg&&Pt(Qg+" j"),Xi.publish("addPage",{pageNumber:oa})},Iw=function(Z){Z>0&&Z<=oa&&(Ne.splice(Z,1),$n.splice(Z,1),oa--,kt>oa&&(kt=oa),this.setPage(kt))},e2=function(Z){Z>0&&Z<=oa&&(kt=Z)},Lw=b.__private__.getNumberOfPages=b.getNumberOfPages=function(){return Ne.length-1},n2=function(Z,lt,Lt){var Bt,ae=void 0;return Lt=Lt||{},lt=void 0!==lt?lt:bo[vi].fontStyle,Bt=(Z=void 0!==Z?Z:bo[vi].fontName).toLowerCase(),void 0!==Ro[Bt]&&void 0!==Ro[Bt][lt]?ae=Ro[Bt][lt]:void 0!==Ro[Z]&&void 0!==Ro[Z][lt]?ae=Ro[Z][lt]:!1===Lt.disableWarning&&Ui.warn("Unable to look up font label for font '"+Z+"', '"+lt+"'. Refer to getFontList() for available fonts."),ae||Lt.noFallback||null==(ae=Ro.times[lt])&&(ae=Ro.times.normal),ae},Pw=b.__private__.putInfo=function(){var Z=Qa(),lt=function(Bt){return Bt};for(var Lt in null!==h&&(lt=Or.encryptor(Z,0)),Pt("<<"),Pt("/Producer ("+_s(lt("jsPDF "+On.version))+")"),Un)Un.hasOwnProperty(Lt)&&Un[Lt]&&Pt("/"+Lt.substr(0,1).toUpperCase()+Lt.substr(1)+" ("+_s(lt(Un[Lt]))+")");Pt("/CreationDate ("+_s(lt(Tt))+")"),Pt(">>"),Pt("endobj")},Ng=b.__private__.putCatalog=function(Z){var lt=(Z=Z||{}).rootDictionaryObjId||Fu;switch(Qa(),Pt("<<"),Pt("/Type /Catalog"),Pt("/Pages "+lt+" 0 R"),rn||(rn="fullwidth"),rn){case"fullwidth":Pt("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Pt("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Pt("/OpenAction [3 0 R /Fit]");break;case"original":Pt("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Lt=""+rn;"%"===Lt.substr(Lt.length-1)&&(rn=parseInt(rn)/100),"number"==typeof rn&&Pt("/OpenAction [3 0 R /XYZ null null "+Nt(rn)+"]")}switch(ui||(ui="continuous"),ui){case"continuous":Pt("/PageLayout /OneColumn");break;case"single":Pt("/PageLayout /SinglePage");break;case"two":case"twoleft":Pt("/PageLayout /TwoColumnLeft");break;case"tworight":Pt("/PageLayout /TwoColumnRight")}Qn&&Pt("/PageMode /"+Qn),Xi.publish("putCatalog"),Pt(">>"),Pt("endobj")},Nw=b.__private__.putTrailer=function(){Pt("trailer"),Pt("<<"),Pt("/Size "+(Gt+1)),Pt("/Root "+Gt+" 0 R"),Pt("/Info "+(Gt-1)+" 0 R"),null!==h&&Pt("/Encrypt "+Or.oid+" 0 R"),Pt("/ID [ <"+Vt+"> <"+Vt+"> ]"),Pt(">>")},Zw=b.__private__.putHeader=function(){Pt("%PDF-"+T),Pt("%\xba\xdf\xac\xe0")},Dw=b.__private__.putXRef=function(){var Z="0000000000";Pt("xref"),Pt("0 "+(Gt+1)),Pt("0000000000 65535 f ");for(var lt=1;lt<=Gt;lt++)Pt("function"==typeof le[lt]?(Z+le[lt]()).slice(-10)+" 00000 n ":void 0!==le[lt]?(Z+le[lt]).slice(-10)+" 00000 n ":"0000000000 00000 n ")},Qu=b.__private__.buildDocument=function(){Gt=0,re=0,ee=[],le=[],Qe=[],Fu=Oa(),tc=Oa(),pe(ee),Xi.publish("buildDocument"),Zw(),oh(),function(){Xi.publish("putAdditionalObjects");for(var Z=0;Z<Qe.length;Z++){var lt=Qe[Z];Rs(lt.objId,!0),Pt(lt.content),Pt("endobj")}Xi.publish("postPutAdditionalObjects")}(),function(){var Z=[];(function(){for(var Z in bo)bo.hasOwnProperty(Z)&&(!1===_||!0===_&&x.hasOwnProperty(Z))&&$p(bo[Z])})(),function(){var Z;for(Z in ia)ia.hasOwnProperty(Z)&&Yx(ia[Z])}(),function(){for(var Z in dr)dr.hasOwnProperty(Z)&&Kp(dr[Z])}(),function(Z){var lt;for(lt in Vi)Vi.hasOwnProperty(lt)&&(Vi[lt]instanceof Tc?Tw(Vi[lt]):Vi[lt]instanceof kc&&kw(Vi[lt],Z))}(Z),Xi.publish("putResources"),Z.forEach(_a),_a({resourcesOid:tc,objectOid:Number.MAX_SAFE_INTEGER}),Xi.publish("postPutResources")}(),null!==h&&(Or.oid=Qa(),Pt("<<"),Pt("/Filter /Standard"),Pt("/V "+Or.v),Pt("/R "+Or.r),Pt("/U <"+Or.toHexString(Or.U)+">"),Pt("/O <"+Or.toHexString(Or.O)+">"),Pt("/P "+Or.P),Pt(">>"),Pt("endobj")),Pw(),Ng();var Z=re;return Dw(),Nw(),Pt("startxref"),Pt(""+Z),Pt("%%EOF"),pe(Ne[kt]),ee.join("\n")},e_=b.__private__.getBlob=function(Z){return new Blob([gn(Z)],{type:"application/pdf"})},n_=b.output=b.__private__.output=((Z=function(Z,lt){switch("string"==typeof(lt=lt||{})?lt={filename:lt}:lt.filename=lt.filename||"generated.pdf",Z){case void 0:return Qu();case"save":b.save(lt.filename);break;case"arraybuffer":return gn(Qu());case"blob":return e_(Qu());case"bloburi":case"bloburl":if(void 0!==Dn.URL&&"function"==typeof Dn.URL.createObjectURL)return Dn.URL&&Dn.URL.createObjectURL(e_(Qu()))||void 0;Ui.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Lt="",Bt=Qu();try{Lt=Vs(Bt)}catch{Lt=Vs(unescape(encodeURIComponent(Bt)))}return"data:application/pdf;filename="+lt.filename+";base64,"+Lt;case"pdfobjectnewwindow":if("[object Window]"===Object.prototype.toString.call(Dn)){var ae="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",be=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';lt.pdfObjectUrl&&(ae=lt.pdfObjectUrl,be="");var Re='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ae+'"'+be+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(lt)+");<\/script></body></html>",pn=Dn.open();return null!==pn&&pn.document.write(Re),pn}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if("[object Window]"===Object.prototype.toString.call(Dn)){var En='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(lt.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+lt.filename+'" width="500px" height="400px" /></body></html>',ti=Dn.open();if(null!==ti){ti.document.write(En);var di=this;ti.document.documentElement.querySelector("#pdfViewer").onload=function(){ti.document.title=lt.filename,ti.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(di.output("bloburl"))}}return ti}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if("[object Window]"!==Object.prototype.toString.call(Dn))throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Li='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",lt)+'"></iframe></body></html>',Ko=Dn.open();if(null!==Ko&&(Ko.document.write(Li),Ko.document.title=lt.filename),Ko||typeof safari>"u")return Ko;break;case"datauri":case"dataurl":return Dn.document.location.href=this.output("datauristring",lt);default:return null}}).foo=function(){try{return Z.apply(this,arguments)}catch(Bt){var lt=Bt.stack||"";~lt.indexOf(" at ")&&(lt=lt.split(" at ")[1]);var Lt="Error in function "+lt.split("\n")[0].split("<")[0]+": "+Bt.message;if(!Dn.console)throw new Error(Lt);Dn.console.error(Lt,Bt),Dn.alert&&alert(Lt)}},Z.foo.bar=Z,Z.foo),i2=function(Z){return!0===Array.isArray(ih)&&ih.indexOf(Z)>-1};switch(i){case"pt":hn=1;break;case"mm":hn=72/25.4;break;case"cm":hn=72/2.54;break;case"in":hn=72;break;case"px":hn=1==i2("px_scaling")?.75:96/72;break;case"pc":case"em":hn=12;break;case"ex":hn=6;break;default:if("number"!=typeof i)throw new Error("Invalid unit: "+i);hn=i}var Or=null;we(),Wt();var o2=b.__private__.getPageInfo=b.getPageInfo=function(Z){if(isNaN(Z)||Z%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:$n[Z].objId,pageNumber:Z,pageContext:$n[Z]}},Hn=b.__private__.getPageInfoByObjId=function(Z){if(isNaN(Z)||Z%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var lt in $n)if($n[lt].objId===Z)break;return o2(lt)},qw=b.__private__.getCurrentPageInfo=b.getCurrentPageInfo=function(){return{objId:$n[kt].objId,pageNumber:kt,pageContext:$n[kt]}};b.addPage=function(){return t2.apply(this,arguments),this},b.setPage=function(){return e2.apply(this,arguments),pe.call(this,Ne[kt]),this},b.insertPage=function(Z){return this.addPage(),this.movePage(kt,Z),this},b.movePage=function(Z,lt){var Lt,Bt;if(Z>lt){Lt=Ne[Z],Bt=$n[Z];for(var ae=Z;ae>lt;ae--)Ne[ae]=Ne[ae-1],$n[ae]=$n[ae-1];Ne[lt]=Lt,$n[lt]=Bt,this.setPage(lt)}else if(Z<lt){Lt=Ne[Z],Bt=$n[Z];for(var be=Z;be<lt;be++)Ne[be]=Ne[be+1],$n[be]=$n[be+1];Ne[lt]=Lt,$n[lt]=Bt,this.setPage(lt)}return this},b.deletePage=function(){return Iw.apply(this,arguments),this},b.__private__.text=b.text=function(Z,lt,Lt,Bt,ae){var be,Re,pn,En,ti,di,Li,Ko,aa,Ea=(Bt=Bt||{}).scope||this;if("number"==typeof Z&&"number"==typeof lt&&("string"==typeof Lt||Array.isArray(Lt))){var Er=Lt;Lt=lt,lt=Z,Z=Er}if(arguments[3]instanceof Fn?(et("The transform parameter of text() with a Matrix value"),aa=ae):(pn=arguments[4],En=arguments[5],"object"===(0,Ni.Z)(Li=arguments[3])&&null!==Li||("string"==typeof pn&&(En=pn,pn=null),"string"==typeof Li&&(En=Li,Li=null),"number"==typeof Li&&(pn=Li,Li=null),Bt={flags:Li,angle:pn,align:En})),isNaN(lt)||isNaN(Lt)||null==Z)throw new Error("Invalid arguments passed to jsPDF.text");if(0===Z.length)return Ea;var ac,Wa="",Us="number"==typeof Bt.lineHeightFactor?Bt.lineHeightFactor:rh,Uu=Ea.internal.scaleFactor;function h2(Ao){return Ao=Ao.split("\t").join(Array(Bt.TabLen||9).join(" ")),_s(Ao,Li)}function Jg(Ao){for(var So,fa=Ao.concat(),Ra=[],Hu=fa.length;Hu--;)"string"==typeof(So=fa.shift())?Ra.push(So):Array.isArray(Ao)&&(1===So.length||void 0===So[1]&&void 0===So[2])?Ra.push(So[0]):Ra.push([So[0],So[1],So[2]]);return Ra}function Hg(Ao,So){var fa;if("string"==typeof Ao)fa=So(Ao)[0];else if(Array.isArray(Ao)){for(var Ra,Hu,Jd=Ao.concat(),f_=[],_2=Jd.length;_2--;)"string"==typeof(Ra=Jd.shift())?f_.push(So(Ra)[0]):Array.isArray(Ra)&&"string"==typeof Ra[0]&&(Hu=So(Ra[0],Ra[1],Ra[2]),f_.push([Hu[0],Hu[1],Hu[2]]));fa=f_}return fa}var l_=!1,Gg=!0;if("string"==typeof Z)l_=!0;else if(Array.isArray(Z)){var $g=Z.concat();Re=[];for(var c_,fs=$g.length;fs--;)("string"!=typeof(c_=$g.shift())||Array.isArray(c_)&&"string"!=typeof c_[0])&&(Gg=!1);l_=Gg}if(!1===l_)throw new Error('Type of text must be string or Array. "'+Z+'" is not recognized.');"string"==typeof Z&&(Z=Z.match(/[\r?\n]/)?Z.split(/\r\n|\r|\n/g):[Z]);var u_=Ge/Ea.internal.scaleFactor,d_=u_*(Us-1);switch(Bt.baseline){case"bottom":Lt-=d_;break;case"top":Lt+=u_-d_;break;case"hanging":Lt+=u_-2*d_;break;case"middle":Lt+=u_/2-d_}if((di=Bt.maxWidth||0)>0&&("string"==typeof Z?Z=Ea.splitTextToSize(Z,di):"[object Array]"===Object.prototype.toString.call(Z)&&(Z=Z.reduce(function(Ao,So){return Ao.concat(Ea.splitTextToSize(So,di))},[]))),Xi.publish("preProcessText",be={text:Z,x:lt,y:Lt,options:Bt,mutex:{pdfEscape:_s,activeFontKey:vi,fonts:bo,activeFontSize:Ge}}),Z=be.text,pn=(Bt=be.options).angle,aa instanceof Fn||!pn||"number"!=typeof pn)pn&&pn instanceof Fn&&(aa=pn);else{pn*=Math.PI/180,0===Bt.rotationDirection&&(pn=-pn),"advanced"===W&&(pn=-pn);var m_=Math.cos(pn),Yg=Math.sin(pn);aa=new Fn(m_,Yg,-Yg,m_,0,0)}"advanced"!==W||aa||(aa=$c),void 0!==(ti=Bt.charSpace||a_)&&(Wa+=ut(_t(ti))+" Tc\n",this.setCharSpace(this.getCharSpace()||0)),void 0!==(Ko=Bt.horizontalScale)&&(Wa+=ut(100*Ko)+" Tz\n");var gs=-1,$w=void 0!==Bt.renderingMode?Bt.renderingMode:Bt.stroke,Kg=Ea.internal.getCurrentPageInfo().pageContext;switch($w){case 0:case!1:case"fill":gs=0;break;case 1:case!0:case"stroke":gs=1;break;case 2:case"fillThenStroke":gs=2;break;case 3:case"invisible":gs=3;break;case 4:case"fillAndAddForClipping":gs=4;break;case 5:case"strokeAndAddPathForClipping":gs=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":gs=6;break;case 7:case"addToPathForClipping":gs=7}-1!==gs?Wa+=gs+" Tr\n":-1!==(void 0!==Kg.usedRenderingMode?Kg.usedRenderingMode:-1)&&(Wa+="0 Tr\n"),-1!==gs&&(Kg.usedRenderingMode=gs),En=Bt.align||"left";var rc,Wg=Ge*Us,Yw=Ea.internal.pageSize.getWidth(),Kw=bo[vi];ti=Bt.charSpace||a_,di=Bt.maxWidth||0,Li=Object.assign({autoencode:!0,noBOM:!0},Bt.flags);var Rd=[];if("[object Array]"===Object.prototype.toString.call(Z)){var bl;Re=Jg(Z),"left"!==En&&(rc=Re.map(function(Ao){return Ea.getStringUnitWidth(Ao,{font:Kw,charSpace:ti,fontSize:Ge,doKerning:!1})*Ge/Uu}));var sc,Ud=0;if("right"===En){lt-=rc[0],Z=[],fs=Re.length;for(var Vc=0;Vc<fs;Vc++)0===Vc?(sc=Ru(lt),bl=qd(Lt)):(sc=_t(Ud-rc[Vc]),bl=-Wg),Z.push([Re[Vc],sc,bl]),Ud=rc[Vc]}else if("center"===En){lt-=rc[0]/2,Z=[],fs=Re.length;for(var Bu=0;Bu<fs;Bu++)0===Bu?(sc=Ru(lt),bl=qd(Lt)):(sc=_t((Ud-rc[Bu])/2),bl=-Wg),Z.push([Re[Bu],sc,bl]),Ud=rc[Bu]}else if("left"===En){Z=[],fs=Re.length;for(var h_=0;h_<fs;h_++)Z.push(Re[h_])}else{if("justify"!==En)throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');Z=[],fs=Re.length,di=0!==di?di:Yw;for(var lc=0;lc<fs;lc++)bl=0===lc?qd(Lt):-Wg,sc=0===lc?Ru(lt):0,Rd.push(lc<fs-1?ut(_t((di-rc[lc])/(Re[lc].split(" ").length-1))):0),Z.push([Re[lc],sc,bl])}}!0===("boolean"==typeof Bt.R2L?Bt.R2L:Cn)&&(Z=Hg(Z,function(Ao,So,fa){return[Ao.split("").reverse().join(""),So,fa]})),Xi.publish("postProcessText",be={text:Z,x:lt,y:Lt,options:Bt,mutex:{pdfEscape:_s,activeFontKey:vi,fonts:bo,activeFontSize:Ge}}),Z=be.text,ac=be.mutex.isHex||!1;var Vg=bo[vi].encoding;"WinAnsiEncoding"!==Vg&&"StandardEncoding"!==Vg||(Z=Hg(Z,function(Ao,So,fa){return[h2(Ao),So,fa]})),Re=Jg(Z),Z=[];for(var Bd,cc,zu,uh=Array.isArray(Re[0])?1:0,zd="",Xg=function(Ao,So,fa){var Ra="";return fa instanceof Fn?(fa="number"==typeof Bt.angle?Xl(fa,new Fn(1,0,0,1,Ao,So)):Xl(new Fn(1,0,0,1,Ao,So),fa),"advanced"===W&&(fa=Xl(new Fn(1,0,0,-1,0,0),fa)),Ra=fa.join(" ")+" Tm\n"):Ra=ut(Ao)+" "+ut(So)+" Td\n",Ra},vl=0;vl<Re.length;vl++){switch(zd="",uh){case 1:zu=(ac?"<":"(")+Re[vl][0]+(ac?">":")"),Bd=parseFloat(Re[vl][1]),cc=parseFloat(Re[vl][2]);break;case 0:zu=(ac?"<":"(")+Re[vl]+(ac?">":")"),Bd=Ru(lt),cc=qd(Lt)}void 0!==Rd&&void 0!==Rd[vl]&&(zd=Rd[vl]+" Tw\n"),0===vl?Z.push(zd+Xg(Bd,cc,aa)+zu):0===uh?Z.push(zd+zu):1===uh&&Z.push(zd+Xg(Bd,cc,aa)+zu)}Z=Z.join(0===uh?" Tj\nT* ":" Tj\n"),Z+=" Tj\n";var Ju="BT\n/";return Ju+=vi+" "+Ge+" Tf\n",Ju+=ut(Ge*Us)+" TL\n",Ju+=sh+"\n",Ju+=Wa,Ju+=Z,Pt(Ju+="ET"),x[vi]=!0,Ea};var Fw=b.__private__.clip=b.clip=function(Z){return Pt("evenodd"===Z?"W*":"W"),this};b.clipEvenOdd=function(){return Fw("evenodd")},b.__private__.discardPath=b.discardPath=function(){return Pt("n"),this};var Wc=b.__private__.isValidStyle=function(Z){var lt=!1;return-1!==[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(Z)&&(lt=!0),lt};b.__private__.setDefaultPathOperation=b.setDefaultPathOperation=function(Z){return Wc(Z)&&(d=Z),this};var a2=b.__private__.getStyle=b.getStyle=function(Z){var lt=d;switch(Z){case"D":case"S":lt="S";break;case"F":lt="f";break;case"FD":case"DF":lt="B";break;case"f":case"f*":case"B":case"B*":lt=Z}return lt},r2=b.close=function(){return Pt("h"),this};b.stroke=function(){return Pt("S"),this},b.fill=function(Z){return i_("f",Z),this},b.fillEvenOdd=function(Z){return i_("f*",Z),this},b.fillStroke=function(Z){return i_("B",Z),this},b.fillStrokeEvenOdd=function(Z){return i_("B*",Z),this};var i_=function(Z,lt){"object"===(0,Ni.Z)(lt)?Rw(lt,Z):Pt(Z)},Zg=function(Z){null===Z||"advanced"===W&&void 0===Z||(Z=a2(Z),Pt(Z))};function Qw(Z,lt,Lt,Bt,ae){var be=new kc(lt||this.boundingBox,Lt||this.xStep,Bt||this.yStep,this.gState,ae||this.matrix);be.stream=this.stream;var Re=Z+"$$"+this.cloneIndex+++"$$";return ps(Re,be),be}var Rw=function(Z,lt){var Lt=nh[Z.key],Bt=Vi[Lt];if(Bt instanceof Tc)Pt("q"),Pt(Uw(lt)),Bt.gState&&b.setGState(Bt.gState),Pt(Z.matrix.toString()+" cm"),Pt("/"+Lt+" sh"),Pt("Q");else if(Bt instanceof kc){var ae=new Fn(1,0,0,-1,0,Qd());Z.matrix&&(ae=ae.multiply(Z.matrix||$c),Lt=Qw.call(Bt,Z.key,Z.boundingBox,Z.xStep,Z.yStep,ae).id),Pt("q"),Pt("/Pattern cs"),Pt("/"+Lt+" scn"),Bt.gState&&b.setGState(Bt.gState),Pt(lt),Pt("Q")}},Uw=function(Z){switch(Z){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Dg=b.moveTo=function(Z,lt){return Pt(ut(_t(Z))+" "+ut(It(lt))+" m"),this},ah=b.lineTo=function(Z,lt){return Pt(ut(_t(Z))+" "+ut(It(lt))+" l"),this},jd=b.curveTo=function(Z,lt,Lt,Bt,ae,be){return Pt([ut(_t(Z)),ut(It(lt)),ut(_t(Lt)),ut(It(Bt)),ut(_t(ae)),ut(It(be)),"c"].join(" ")),this};b.__private__.line=b.line=function(Z,lt,Lt,Bt,ae){if(isNaN(Z)||isNaN(lt)||isNaN(Lt)||isNaN(Bt)||!Wc(ae))throw new Error("Invalid arguments passed to jsPDF.line");return"compat"===W?this.lines([[Lt-Z,Bt-lt]],Z,lt,[1,1],ae||"S"):this.lines([[Lt-Z,Bt-lt]],Z,lt,[1,1]).stroke()},b.__private__.lines=b.lines=function(Z,lt,Lt,Bt,ae,be){var Re,pn,En,ti,di,Er,Wa,ac;if("number"==typeof Z&&(ac=Lt,Lt=lt,lt=Z,Z=ac),Bt=Bt||[1,1],be=be||!1,isNaN(lt)||isNaN(Lt)||!Array.isArray(Z)||!Array.isArray(Bt)||!Wc(ae)||"boolean"!=typeof be)throw new Error("Invalid arguments passed to jsPDF.lines");for(Dg(lt,Lt),Re=Bt[0],pn=Bt[1],ti=Z.length,Er=lt,Wa=Lt,En=0;En<ti;En++)2===(di=Z[En]).length?ah(Er=di[0]*Re+Er,Wa=di[1]*pn+Wa):jd(di[0]*Re+Er,di[1]*pn+Wa,di[2]*Re+Er,di[3]*pn+Wa,Er=di[4]*Re+Er,Wa=di[5]*pn+Wa);return be&&r2(),Zg(ae),this},b.path=function(Z){for(var lt=0;lt<Z.length;lt++){var Lt=Z[lt],Bt=Lt.c;switch(Lt.op){case"m":Dg(Bt[0],Bt[1]);break;case"l":ah(Bt[0],Bt[1]);break;case"c":jd.apply(this,Bt);break;case"h":r2()}}return this},b.__private__.rect=b.rect=function(Z,lt,Lt,Bt,ae){if(isNaN(Z)||isNaN(lt)||isNaN(Lt)||isNaN(Bt)||!Wc(ae))throw new Error("Invalid arguments passed to jsPDF.rect");return"compat"===W&&(Bt=-Bt),Pt([ut(_t(Z)),ut(It(lt)),ut(_t(Lt)),ut(_t(Bt)),"re"].join(" ")),Zg(ae),this},b.__private__.triangle=b.triangle=function(Z,lt,Lt,Bt,ae,be,Re){if(isNaN(Z)||isNaN(lt)||isNaN(Lt)||isNaN(Bt)||isNaN(ae)||isNaN(be)||!Wc(Re))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Lt-Z,Bt-lt],[ae-Lt,be-Bt],[Z-ae,lt-be]],Z,lt,[1,1],Re,!0),this},b.__private__.roundedRect=b.roundedRect=function(Z,lt,Lt,Bt,ae,be,Re){if(isNaN(Z)||isNaN(lt)||isNaN(Lt)||isNaN(Bt)||isNaN(ae)||isNaN(be)||!Wc(Re))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var pn=4/3*(Math.SQRT2-1);return ae=Math.min(ae,.5*Lt),be=Math.min(be,.5*Bt),this.lines([[Lt-2*ae,0],[ae*pn,0,ae,be-be*pn,ae,be],[0,Bt-2*be],[0,be*pn,-ae*pn,be,-ae,be],[2*ae-Lt,0],[-ae*pn,0,-ae,-be*pn,-ae,-be],[0,2*be-Bt],[0,-be*pn,ae*pn,-be,ae,-be]],Z+ae,lt,[1,1],Re,!0),this},b.__private__.ellipse=b.ellipse=function(Z,lt,Lt,Bt,ae){if(isNaN(Z)||isNaN(lt)||isNaN(Lt)||isNaN(Bt)||!Wc(ae))throw new Error("Invalid arguments passed to jsPDF.ellipse");var be=4/3*(Math.SQRT2-1)*Lt,Re=4/3*(Math.SQRT2-1)*Bt;return Dg(Z+Lt,lt),jd(Z+Lt,lt-Re,Z+be,lt-Bt,Z,lt-Bt),jd(Z-be,lt-Bt,Z-Lt,lt-Re,Z-Lt,lt),jd(Z-Lt,lt+Re,Z-be,lt+Bt,Z,lt+Bt),jd(Z+be,lt+Bt,Z+Lt,lt+Re,Z+Lt,lt),Zg(ae),this},b.__private__.circle=b.circle=function(Z,lt,Lt,Bt){if(isNaN(Z)||isNaN(lt)||isNaN(Lt)||!Wc(Bt))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(Z,lt,Lt,Lt,Bt)},b.setFont=function(Z,lt,Lt){return Lt&&(lt=At(lt,Lt)),vi=n2(Z,lt,{disableWarning:!1}),this};var Bw=b.__private__.getFont=b.getFont=function(){return bo[n2.apply(b,arguments)]};b.__private__.getFontList=b.getFontList=function(){var Z,lt,Lt={};for(Z in Ro)if(Ro.hasOwnProperty(Z))for(lt in Lt[Z]=[],Ro[Z])Ro[Z].hasOwnProperty(lt)&&Lt[Z].push(lt);return Lt},b.addFont=function(Z,lt,Lt,Bt,ae){var be=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&-1!==be.indexOf(arguments[3])?ae=arguments[3]:arguments[3]&&-1==be.indexOf(arguments[3])&&(Lt=At(Lt,Bt)),Lg.call(this,Z,lt,Lt,ae=ae||"Identity-H")};var rh,jg=n.lineWidth||.200025,o_=b.__private__.getLineWidth=b.getLineWidth=function(){return jg},s2=b.__private__.setLineWidth=b.setLineWidth=function(Z){return jg=Z,Pt(ut(_t(Z))+" w"),this};b.__private__.setLineDash=On.API.setLineDash=On.API.setLineDashPattern=function(Z,lt){if(Z=Z||[],lt=lt||0,isNaN(lt)||!Array.isArray(Z))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return Z=Z.map(function(Lt){return ut(_t(Lt))}).join(" "),lt=ut(_t(lt)),Pt("["+Z+"] "+lt+" d"),this};var l2=b.__private__.getLineHeight=b.getLineHeight=function(){return Ge*rh};b.__private__.getLineHeight=b.getLineHeight=function(){return Ge*rh};var c2=b.__private__.setLineHeightFactor=b.setLineHeightFactor=function(Z){return"number"==typeof(Z=Z||1.15)&&(rh=Z),this},u2=b.__private__.getLineHeightFactor=b.getLineHeightFactor=function(){return rh};c2(n.lineHeight);var Ru=b.__private__.getHorizontalCoordinate=function(Z){return _t(Z)},qd=b.__private__.getVerticalCoordinate=function(Z){return"advanced"===W?Z:$n[kt].mediaBox.topRightY-$n[kt].mediaBox.bottomLeftY-_t(Z)},zw=b.__private__.getHorizontalCoordinateString=b.getHorizontalCoordinateString=function(Z){return ut(Ru(Z))},Fd=b.__private__.getVerticalCoordinateString=b.getVerticalCoordinateString=function(Z){return ut(qd(Z))},oc=n.strokeColor||"0 G";b.__private__.getStrokeColor=b.getDrawColor=function(){return ec(oc)},b.__private__.setStrokeColor=b.setDrawColor=function(Z,lt,Lt,Bt){return oc=nc({ch1:Z,ch2:lt,ch3:Lt,ch4:Bt,pdfColorType:"draw",precision:2}),Pt(oc),this};var qg=n.fillColor||"0 g";b.__private__.getFillColor=b.getFillColor=function(){return ec(qg)},b.__private__.setFillColor=b.setFillColor=function(Z,lt,Lt,Bt){return qg=nc({ch1:Z,ch2:lt,ch3:Lt,ch4:Bt,pdfColorType:"fill",precision:2}),Pt(qg),this};var sh=n.textColor||"0 g",Jw=b.__private__.getTextColor=b.getTextColor=function(){return ec(sh)};b.__private__.setTextColor=b.setTextColor=function(Z,lt,Lt,Bt){return sh=nc({ch1:Z,ch2:lt,ch3:Lt,ch4:Bt,pdfColorType:"text",precision:3}),this};var a_=n.charSpace,Hw=b.__private__.getCharSpace=b.getCharSpace=function(){return parseFloat(a_||0)};b.__private__.setCharSpace=b.setCharSpace=function(Z){if(isNaN(Z))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return a_=Z,this};var Fg=0;b.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},b.__private__.setLineCap=b.setLineCap=function(Z){var lt=b.CapJoinStyles[Z];if(void 0===lt)throw new Error("Line cap style of '"+Z+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Fg=lt,Pt(lt+" J"),this};var Qg=0;b.__private__.setLineJoin=b.setLineJoin=function(Z){var lt=b.CapJoinStyles[Z];if(void 0===lt)throw new Error("Line join style of '"+Z+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Qg=lt,Pt(lt+" j"),this},b.__private__.setLineMiterLimit=b.__private__.setMiterLimit=b.setLineMiterLimit=b.setMiterLimit=function(Z){if(Z=Z||0,isNaN(Z))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Pt(ut(_t(Z))+" M"),this},b.GState=Do,b.setGState=function(Z){(Z="string"==typeof Z?ia[Vl[Z]]:d2(null,Z)).equals(qu)||(Pt("/"+Z.id+" gs"),qu=Z)};var d2=function(Z,lt){if(!Z||!Vl[Z]){var Lt=!1;for(var Bt in ia)if(ia.hasOwnProperty(Bt)&&ia[Bt].equals(lt)){Lt=!0;break}if(Lt)lt=ia[Bt];else{var ae="GS"+(Object.keys(ia).length+1).toString(10);ia[ae]=lt,lt.id=ae}return Z&&(Vl[Z]=lt.id),Xi.publish("addGState",lt),lt}};b.addGState=function(Z,lt){return d2(Z,lt),this},b.saveGraphicsState=function(){return Pt("q"),Jc.push({key:vi,size:Ge,color:sh}),this},b.restoreGraphicsState=function(){Pt("Q");var Z=Jc.pop();return vi=Z.key,Ge=Z.size,sh=Z.color,qu=null,this},b.setCurrentTransformationMatrix=function(Z){return Pt(Z.toString()+" cm"),this},b.comment=function(Z){return Pt("#"+Z),this};var r_=function(Z,lt){var Lt=Z||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Lt},set:function(be){isNaN(be)||(Lt=parseFloat(be))}});var Bt=lt||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Bt},set:function(be){isNaN(be)||(Bt=parseFloat(be))}});var ae="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ae},set:function(be){ae=be.toString()}}),this},Rg=function(Z,lt,Lt,Bt){r_.call(this,Z,lt),this.type="rect";var ae=Lt||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ae},set:function(Re){isNaN(Re)||(ae=parseFloat(Re))}});var be=Bt||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return be},set:function(Re){isNaN(Re)||(be=parseFloat(Re))}}),this},Ug=function(){this.page=oa,this.currentPage=kt,this.pages=Ne.slice(0),this.pagesContext=$n.slice(0),this.x=Sr,this.y=zi,this.matrix=Wl,this.width=lh(kt),this.height=Qd(kt),this.outputDestination=en,this.id="",this.objectNumber=-1};Ug.prototype.restore=function(){oa=this.page,$n=this.pagesContext,Ne=this.pages,Sr=this.x,zi=this.y,Wl=this.matrix,Bg(kt=this.currentPage,this.width),zg(kt,this.height),en=this.outputDestination};var m2=function(Z,lt,Lt,Bt,ae){Gc.push(new Ug),oa=kt=0,Ne=[],Sr=Z,zi=lt,Wl=ae,Pg([Lt,Bt])};for(var s_ in b.beginFormObject=function(Z,lt,Lt,Bt,ae){return m2(Z,lt,Lt,Bt,ae),this},b.endFormObject=function(Z){return function(Z){if(Hc[Z])Gc.pop().restore();else{var lt=new Ug,Lt="Xo"+(Object.keys(dr).length+1).toString(10);lt.id=Lt,Hc[Z]=Lt,dr[Lt]=lt,Xi.publish("addFormObject",lt),Gc.pop().restore()}}(Z),this},b.doFormObject=function(Z,lt){var Lt=dr[Hc[Z]];return Pt("q"),Pt(lt.toString()+" cm"),Pt("/"+Lt.id+" Do"),Pt("Q"),this},b.getFormObject=function(Z){var lt=dr[Hc[Z]];return{x:lt.x,y:lt.y,width:lt.width,height:lt.height,matrix:lt.matrix}},b.save=function(Z,lt){return Z=Z||"generated.pdf",(lt=lt||{}).returnPromise=lt.returnPromise||!1,!1===lt.returnPromise?(Xs(e_(Qu()),Z),"function"==typeof Xs.unload&&Dn.setTimeout&&setTimeout(Xs.unload,911),this):new Promise(function(Lt,Bt){try{var ae=Xs(e_(Qu()),Z);"function"==typeof Xs.unload&&Dn.setTimeout&&setTimeout(Xs.unload,911),Lt(ae)}catch(be){Bt(be.message)}})},On.API)On.API.hasOwnProperty(s_)&&("events"===s_&&On.API.events.length?function(Z,lt){var Bt,ae;for(ae=lt.length-1;-1!==ae;ae--)Z.subscribe.apply(Z,[lt[ae][0]].concat("function"==typeof(Bt=lt[ae][1])?[Bt]:Bt))}(Xi,On.API.events):b[s_]=On.API[s_]);var lh=b.getPageWidth=function(Z){return($n[Z=Z||kt].mediaBox.topRightX-$n[Z].mediaBox.bottomLeftX)/hn},Bg=b.setPageWidth=function(Z,lt){$n[Z].mediaBox.topRightX=lt*hn+$n[Z].mediaBox.bottomLeftX},Qd=b.getPageHeight=function(Z){return($n[Z=Z||kt].mediaBox.topRightY-$n[Z].mediaBox.bottomLeftY)/hn},zg=b.setPageHeight=function(Z,lt){$n[Z].mediaBox.topRightY=lt*hn+$n[Z].mediaBox.bottomLeftY};return b.internal={pdfEscape:_s,getStyle:a2,getFont:Bw,getFontSize:Ve,getCharSpace:Hw,getTextColor:Jw,getLineHeight:l2,getLineHeightFactor:u2,getLineWidth:o_,write:wn,getHorizontalCoordinate:Ru,getVerticalCoordinate:qd,getCoordinateString:zw,getVerticalCoordinateString:Fd,collections:{},newObject:Qa,newAdditionalObject:Gp,newObjectDeferred:Oa,newObjectDeferredBegin:Rs,getFilters:Yc,putStream:xl,events:Xi,scaleFactor:hn,pageSize:{getWidth:function(){return lh(kt)},setWidth:function(Z){Bg(kt,Z)},getHeight:function(){return Qd(kt)},setHeight:function(Z){zg(kt,Z)}},encryptionOptions:h,encryption:Or,getEncryptor:function(Z){return null!==h?Or.encryptor(Z,0):function(lt){return lt}},output:n_,getNumberOfPages:Lw,pages:Ne,out:Pt,f2:Nt,f3:ot,getPageInfo:o2,getPageInfoByObjId:Hn,getCurrentPageInfo:qw,getPDFVersion:P,Point:r_,Rectangle:Rg,Matrix:Fn,hasHotfix:i2},Object.defineProperty(b.internal.pageSize,"width",{get:function(){return lh(kt)},set:function(Z){Bg(kt,Z)},enumerable:!0,configurable:!0}),Object.defineProperty(b.internal.pageSize,"height",{get:function(){return Qd(kt)},set:function(Z){zg(kt,Z)},enumerable:!0,configurable:!0}),function(Z){for(var lt=0,Lt=je.length;lt<Lt;lt++){var Bt=Lg.call(this,Z[lt][0],Z[lt][1],Z[lt][2],je[lt][3],!0);!1===_&&(x[Bt]=!0);var ae=Z[lt][0].split("-");Xx({id:Bt,fontName:ae[0],fontStyle:ae[1]||""})}Xi.publish("addFonts",{fonts:bo,dictionary:Ro})}.call(b,je),vi="F1",t2(a,e),Xi.publish("initialized"),b}cd.prototype.lsbFirstWord=function(n){return String.fromCharCode(n>>0&255,n>>8&255,n>>16&255,n>>24&255)},cd.prototype.toHexString=function(n){return n.split("").map(function(o){return("0"+(255&o.charCodeAt(0)).toString(16)).slice(-2)}).join("")},cd.prototype.hexToBytes=function(n){for(var o=[],e=0;e<n.length;e+=2)o.push(String.fromCharCode(parseInt(n.substr(e,2),16)));return o.join("")},cd.prototype.processOwnerPassword=function(n,o){return z_(ld(o).substr(0,5),n)},cd.prototype.encryptor=function(n,o){var e=ld(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&o,o>>8&255)).substr(0,10);return function(i){return z_(e,i)}},Do.prototype.equals=function(n){var o,e="id,objectNumber,equals";if(!n||(0,Ni.Z)(n)!==(0,Ni.Z)(this))return!1;var i=0;for(o in this)if(!(e.indexOf(o)>=0)){if(this.hasOwnProperty(o)&&!n.hasOwnProperty(o)||this[o]!==n[o])return!1;i++}for(o in n)n.hasOwnProperty(o)&&e.indexOf(o)<0&&i--;return 0===i},On.API={events:[]},On.version="2.5.1";var wo=On.API,gu=1,Pl=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},As=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},qn=function(n){return n.toFixed(2)},es=function(n){return n.toFixed(5)};wo.__acroform__={};var Da=function(n,o){n.prototype=Object.create(o.prototype),n.prototype.constructor=n},xu=function(n){return n*gu},el=function(n){var o=new f1,e=fn.internal.getHeight(n)||0,i=fn.internal.getWidth(n)||0;return o.BBox=[0,0,Number(qn(i)),Number(qn(e))],o},j2=wo.__acroform__.setBit=function(n,o){if(n=n||0,o=o||0,isNaN(n)||isNaN(o))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|1<<o},q2=wo.__acroform__.clearBit=function(n,o){if(n=n||0,o=o||0,isNaN(n)||isNaN(o))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&~(1<<o)},F2=wo.__acroform__.getBit=function(n,o){if(isNaN(n)||isNaN(o))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<o?1:0},zo=wo.__acroform__.getBitForPdf=function(n,o){if(isNaN(n)||isNaN(o))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return F2(n,o-1)},Co=wo.__acroform__.setBitForPdf=function(n,o){if(isNaN(n)||isNaN(o))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return j2(n,o-1)},_o=wo.__acroform__.clearBitForPdf=function(n,o){if(isNaN(n)||isNaN(o))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return q2(n,o-1)},p1=wo.__acroform__.calculateCoordinates=function(n,o){var e=o.internal.getHorizontalCoordinate,i=o.internal.getVerticalCoordinate,a=n[0],r=n[1],s=n[2],l=n[3],c={};return c.lowerLeft_X=e(a)||0,c.lowerLeft_Y=i(r+l)||0,c.upperRight_X=e(a+s)||0,c.upperRight_Y=i(r)||0,[Number(qn(c.lowerLeft_X)),Number(qn(c.lowerLeft_Y)),Number(qn(c.upperRight_X)),Number(qn(c.upperRight_Y))]},bt=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var o=[],i=Ac(n,n._V||n.DV),a=n.scope.internal.getFont(n.fontName,n.fontStyle).id;o.push("/Tx BMC"),o.push("q"),o.push("BT"),o.push(n.scope.__private__.encodeColorString(n.color)),o.push("/"+a+" "+qn(i.fontSize)+" Tf"),o.push("1 0 0 1 0 0 Tm"),o.push(i.text),o.push("ET"),o.push("Q"),o.push("EMC");var r=el(n);return r.scope=n.scope,r.stream=o.join("\n"),r}},Ac=function(n,o){var e=0===n.fontSize?n.maxFontSize:n.fontSize,i={text:"",fontSize:""},a=(o=")"==(o="("==o.substr(0,1)?o.substr(1):o).substr(o.length-1)?o.substr(0,o.length-1):o).split(" ");a=a.map(n.multiline?function(ot){return ot.split("\n")}:function(ot){return[ot]});var r=e,s=fn.internal.getHeight(n)||0;s=s<0?-s:s;var ot,l=fn.internal.getWidth(n)||0;l=l<0?-l:l,r++;t:for(;r>0;){o="",r--;var d,h,_=bu("3",n,r).height,x=n.multiline?s-r:(s-_)/2,b=x+=2,T=0,P=0,U=0;if(r<=0){o="(...) Tj\n",o+="% Width of Text: "+bu(o,n,r=12).width+", FieldWidth:"+l+"\n";break}for(var q="",B=0,W=0;W<a.length;W++)if(a.hasOwnProperty(W)){var G=!1;if(1!==a[W].length&&U!==a[W].length-1){if((_+2)*(B+2)+2>s)continue t;q+=a[W][U],G=!0,P=W,W--}else{q=" "==(q+=a[W][U]+" ").substr(q.length-1)?q.substr(0,q.length-1):q;var nt=parseInt(W),At=(ot=nt)+1<a.length&&bu(q+" "+a[ot+1][0],n,r).width<=l-4,ut=W>=a.length-1;if(At&&!ut){q+=" ",U=0;continue}if(At||ut){if(ut)P=nt;else if(n.multiline&&(_+2)*(B+2)+2>s)continue t}else{if(!n.multiline||(_+2)*(B+2)+2>s)continue t;P=nt}}for(var et="",vt=T;vt<=P;vt++){var Nt=a[vt];if(n.multiline){if(vt===P){et+=Nt[U]+" ",U=(U+1)%Nt.length;continue}if(vt===T){et+=Nt[Nt.length-1]+" ";continue}}et+=Nt[0]+" "}switch(et=" "==et.substr(et.length-1)?et.substr(0,et.length-1):et,h=bu(et,n,r).width,n.textAlign){case"right":d=l-h-2;break;case"center":d=(l-h)/2;break;default:d=2}o+=qn(d)+" "+qn(b)+" Td\n",o+="("+Pl(et)+") Tj\n",o+=-qn(d)+" 0 Td\n",b=-(r+2),h=0,T=G?P:P+1,B++,q=""}break}return i.text=o,i.fontSize=r,i},bu=function(n,o,e){var i=o.scope.internal.getFont(o.fontName,o.fontStyle),a=o.scope.getStringUnitWidth(n,{font:i,fontSize:parseFloat(e),charSpace:0})*parseFloat(e);return{height:o.scope.getStringUnitWidth("3",{font:i,fontSize:parseFloat(e),charSpace:0})*parseFloat(e)*1.5,width:a}},ns={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},xi=function(n,o){var e={type:"reference",object:n};void 0===o.internal.getPageInfo(n.page).pageContext.annotations.find(function(i){return i.type===e.type&&i.object===e.object})&&o.internal.getPageInfo(n.page).pageContext.annotations.push(e)},_1=wo.__acroform__.arrayToPdfArray=function(n,o,e){var i=function(s){return s};if(Array.isArray(n)){for(var a="[",r=0;r<n.length;r++)switch(0!==r&&(a+=" "),(0,Ni.Z)(n[r])){case"boolean":case"number":case"object":a+=n[r].toString();break;case"string":"/"!==n[r].substr(0,1)?(void 0!==o&&e&&(i=e.internal.getEncryptor(o)),a+="("+Pl(i(n[r].toString()))+")"):a+=n[r].toString()}return a+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Nl=function(n,o,e){var i=function(a){return a};return void 0!==o&&e&&(i=e.internal.getEncryptor(o)),(n=n||"").toString(),"("+Pl(i(n))+")"},nl=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(void 0===this._objId){if(void 0===this.scope)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};nl.prototype.toString=function(){return this.objId+" 0 R"},nl.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},nl.prototype.getKeyValueListForStream=function(){var n=[],o=Object.getOwnPropertyNames(this).filter(function(r){return"content"!=r&&"appearanceStreamContent"!=r&&"scope"!=r&&"objId"!=r&&"_"!=r.substring(0,1)});for(var e in o)if(!1===Object.getOwnPropertyDescriptor(this,o[e]).configurable){var i=o[e],a=this[i];a&&(Array.isArray(a)?n.push({key:i,value:_1(a,this.objId,this.scope)}):a instanceof nl?(a.scope=this.scope,n.push({key:i,value:a.objId+" 0 R"})):"function"!=typeof a&&n.push({key:i,value:a}))}return n};var f1=function(){nl.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,o=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return o},set:function(e){o=e}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(e){n=e.trim()},get:function(){return n||null}})};Da(f1,nl);var g1=function(){nl.call(this);var n,o=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return o.length>0?o:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return o}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var e=function(i){return i};return this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),"("+Pl(e(n))+")"}},set:function(e){n=e}})};Da(g1,nl);var Ss=function n(){nl.call(this);var o=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return o},set:function(q){if(isNaN(q))throw new Error('Invalid value "'+q+'" for attribute F supplied.');o=q}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!zo(o,3)},set:function(q){this.F=q?Co(o,3):_o(o,3)}});var e=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return e},set:function(q){if(isNaN(q))throw new Error('Invalid value "'+q+'" for attribute Ff supplied.');e=q}});var i=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(0!==i.length)return i},set:function(q){i=void 0!==q?q:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[0])?0:i[0]},set:function(q){i[0]=q}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[1])?0:i[1]},set:function(q){i[1]=q}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[2])?0:i[2]},set:function(q){i[2]=q}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[3])?0:i[3]},set:function(q){i[3]=q}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(q){switch(q){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=q;break;default:throw new Error('Invalid value "'+q+'" for attribute FT supplied.')}}});var r=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!r||r.length<1){if(this instanceof is)return;r="FieldObject"+n.FieldNum++}var q=function(B){return B};return this.scope&&(q=this.scope.internal.getEncryptor(this.objId)),"("+Pl(q(r))+")"},set:function(q){r=q.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return r},set:function(q){r=q}});var s="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return s},set:function(q){s=q}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(q){l=q}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(q){c=q}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return void 0===d?50/gu:d},set:function(q){d=q}});var h="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return h},set:function(q){h=q}});var _="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!_||this instanceof is||this instanceof vu))return Nl(_,this.objId,this.scope)},set:function(q){q=q.toString(),_=q}});var x=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(x)return this instanceof Ca?x:Nl(x,this.objId,this.scope)},set:function(q){q=q.toString(),x=this instanceof Ca?q:"("===q.substr(0,1)?As(q.substr(1,q.length-2)):As(q)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ca?As(x.substr(1,x.length-1)):x},set:function(q){q=q.toString(),x=this instanceof Ca?"/"+q:q}});var b=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(b)return b},set:function(q){this.V=q}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(b)return this instanceof Ca?b:Nl(b,this.objId,this.scope)},set:function(q){q=q.toString(),b=this instanceof Ca?q:"("===q.substr(0,1)?As(q.substr(1,q.length-2)):As(q)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ca?As(b.substr(1,b.length-1)):b},set:function(q){q=q.toString(),b=this instanceof Ca?"/"+q:q}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var T,P=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return P},set:function(q){P=q=!!q}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(T)return T},set:function(q){T=q}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!zo(this.Ff,1)},set:function(q){this.Ff=q?Co(this.Ff,1):_o(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!zo(this.Ff,2)},set:function(q){this.Ff=q?Co(this.Ff,2):_o(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!zo(this.Ff,3)},set:function(q){this.Ff=q?Co(this.Ff,3):_o(this.Ff,3)}});var U=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(null!==U)return U},set:function(q){if(-1===[0,1,2].indexOf(q))throw new Error('Invalid value "'+q+'" for attribute Q supplied.');U=q}}),Object.defineProperty(this,"textAlign",{get:function(){var q;switch(U){case 0:default:q="left";break;case 1:q="center";break;case 2:q="right"}return q},configurable:!0,enumerable:!0,set:function(q){switch(q){case"right":case 2:U=2;break;case"center":case 1:U=1;break;default:U=0}}})};Da(Ss,nl);var dd=function(){Ss.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){n=e}});var o=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return _1(o,this.objId,this.scope)},set:function(e){var i,a;a=[],"string"==typeof(i=e)&&(a=function(r,s,l){l||(l=1);for(var c,d=[];c=s.exec(r);)d.push(c[l]);return d}(i,/\((.*?)\)/g)),o=a}}),this.getOptions=function(){return o},this.setOptions=function(e){o=e,this.sort&&o.sort()},this.addOption=function(e){e=(e=e||"").toString(),o.push(e),this.sort&&o.sort()},this.removeOption=function(e,i){for(i=i||!1,e=(e=e||"").toString();-1!==o.indexOf(e)&&(o.splice(o.indexOf(e),1),!1!==i););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!zo(this.Ff,18)},set:function(e){this.Ff=e?Co(this.Ff,18):_o(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!zo(this.Ff,19)},set:function(e){!0===this.combo&&(this.Ff=e?Co(this.Ff,19):_o(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!zo(this.Ff,20)},set:function(e){e?(this.Ff=Co(this.Ff,20),o.sort()):this.Ff=_o(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!zo(this.Ff,22)},set:function(e){this.Ff=e?Co(this.Ff,22):_o(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!zo(this.Ff,23)},set:function(e){this.Ff=e?Co(this.Ff,23):_o(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!zo(this.Ff,27)},set:function(e){this.Ff=e?Co(this.Ff,27):_o(this.Ff,27)}}),this.hasAppearanceStream=!1};Da(dd,Ss);var gr=function(){dd.call(this),this.fontName="helvetica",this.combo=!1};Da(gr,dd);var md=function(){gr.call(this),this.combo=!0};Da(md,gr);var Lh=function(){md.call(this),this.edit=!0};Da(Lh,md);var Ca=function(){Ss.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!zo(this.Ff,15)},set:function(e){this.Ff=e?Co(this.Ff,15):_o(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!zo(this.Ff,16)},set:function(e){this.Ff=e?Co(this.Ff,16):_o(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!zo(this.Ff,17)},set:function(e){this.Ff=e?Co(this.Ff,17):_o(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!zo(this.Ff,26)},set:function(e){this.Ff=e?Co(this.Ff,26):_o(this.Ff,26)}});var n,o={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(r){return r};if(this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),0!==Object.keys(o).length){var i,a=[];for(i in a.push("<<"),o)a.push("/"+i+" ("+Pl(e(o[i]))+")");return a.push(">>"),a.join("\n")}},set:function(e){"object"===(0,Ni.Z)(e)&&(o=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return o.CA||""},set:function(e){"string"==typeof e&&(o.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(e){n="/"+e}})};Da(Ca,Ss);var Ph=function(){Ca.call(this),this.pushButton=!0};Da(Ph,Ca);var hd=function(){Ca.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(o){n=void 0!==o?o:[]}})};Da(hd,Ca);var is=function(){var n,o;Ss.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(a){n=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return o},set:function(a){o=a}});var e,i={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(l){return l};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var r,s=[];for(r in s.push("<<"),i)s.push("/"+r+" ("+Pl(a(i[r]))+")");return s.push(">>"),s.join("\n")},set:function(a){"object"===(0,Ni.Z)(a)&&(i=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return i.CA||""},set:function(a){"string"==typeof a&&(i.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(a){e=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(a){e="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=fn.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Da(is,Ss),hd.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var o in this.Kids)if(this.Kids.hasOwnProperty(o)){var e=this.Kids[o];e.appearanceStreamContent=n.createAppearanceStream(e.optionName),e.caption=n.getCA()}},hd.prototype.createOption=function(n){var o=new is;return o.Parent=this,o.optionName=n,this.Kids.push(o),U2.call(this.scope,o),o};var Nh=function(){Ca.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=fn.CheckBox.createAppearanceStream()};Da(Nh,Ca);var vu=function(){Ss.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!zo(this.Ff,13)},set:function(o){this.Ff=o?Co(this.Ff,13):_o(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!zo(this.Ff,21)},set:function(o){this.Ff=o?Co(this.Ff,21):_o(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!zo(this.Ff,23)},set:function(o){this.Ff=o?Co(this.Ff,23):_o(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!zo(this.Ff,24)},set:function(o){this.Ff=o?Co(this.Ff,24):_o(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!zo(this.Ff,25)},set:function(o){this.Ff=o?Co(this.Ff,25):_o(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!zo(this.Ff,26)},set:function(o){this.Ff=o?Co(this.Ff,26):_o(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(o){n=o}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(o){Number.isInteger(o)&&(n=o)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Da(vu,Ss);var Zh=function(){vu.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!zo(this.Ff,14)},set:function(n){this.Ff=n?Co(this.Ff,14):_o(this.Ff,14)}}),this.password=!0};Da(Zh,vu);var fn={CheckBox:{createAppearanceStream:function(){return{N:{On:fn.CheckBox.YesNormal},D:{On:fn.CheckBox.YesPushDown,Off:fn.CheckBox.OffPushDown}}},YesPushDown:function(n){var o=el(n);o.scope=n.scope;var e=[],i=n.scope.internal.getFont(n.fontName,n.fontStyle).id,a=n.scope.__private__.encodeColorString(n.color),r=Ac(n,n.caption);return e.push("0.749023 g"),e.push("0 0 "+qn(fn.internal.getWidth(n))+" "+qn(fn.internal.getHeight(n))+" re"),e.push("f"),e.push("BMC"),e.push("q"),e.push("0 0 1 rg"),e.push("/"+i+" "+qn(r.fontSize)+" Tf "+a),e.push("BT"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC"),o.stream=e.join("\n"),o},YesNormal:function(n){var o=el(n);o.scope=n.scope;var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,i=n.scope.__private__.encodeColorString(n.color),a=[],r=fn.internal.getHeight(n),s=fn.internal.getWidth(n),l=Ac(n,n.caption);return a.push("1 g"),a.push("0 0 "+qn(s)+" "+qn(r)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+qn(s-1)+" "+qn(r-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+e+" "+qn(l.fontSize)+" Tf "+i),a.push(l.text),a.push("ET"),a.push("Q"),o.stream=a.join("\n"),o},OffPushDown:function(n){var o=el(n);o.scope=n.scope;var e=[];return e.push("0.749023 g"),e.push("0 0 "+qn(fn.internal.getWidth(n))+" "+qn(fn.internal.getHeight(n))+" re"),e.push("f"),o.stream=e.join("\n"),o}},RadioButton:{Circle:{createAppearanceStream:function(n){var o={D:{Off:fn.RadioButton.Circle.OffPushDown},N:{}};return o.N[n]=fn.RadioButton.Circle.YesNormal,o.D[n]=fn.RadioButton.Circle.YesPushDown,o},getCA:function(){return"l"},YesNormal:function(n){var o=el(n);o.scope=n.scope;var e=[],i=fn.internal.getWidth(n)<=fn.internal.getHeight(n)?fn.internal.getWidth(n)/4:fn.internal.getHeight(n)/4;i=Number((.9*i).toFixed(5));var r=Number((i*fn.internal.Bezier_C).toFixed(5));return e.push("q"),e.push("1 0 0 1 "+es(fn.internal.getWidth(n)/2)+" "+es(fn.internal.getHeight(n)/2)+" cm"),e.push(i+" 0 m"),e.push(i+" "+r+" "+r+" "+i+" 0 "+i+" c"),e.push("-"+r+" "+i+" -"+i+" "+r+" -"+i+" 0 c"),e.push("-"+i+" -"+r+" -"+r+" -"+i+" 0 -"+i+" c"),e.push(r+" -"+i+" "+i+" -"+r+" "+i+" 0 c"),e.push("f"),e.push("Q"),o.stream=e.join("\n"),o},YesPushDown:function(n){var o=el(n);o.scope=n.scope;var e=[],i=fn.internal.getWidth(n)<=fn.internal.getHeight(n)?fn.internal.getWidth(n)/4:fn.internal.getHeight(n)/4;i=Number((.9*i).toFixed(5));var a=Number((2*i).toFixed(5)),r=Number((a*fn.internal.Bezier_C).toFixed(5)),s=Number((i*fn.internal.Bezier_C).toFixed(5));return e.push("0.749023 g"),e.push("q"),e.push("1 0 0 1 "+es(fn.internal.getWidth(n)/2)+" "+es(fn.internal.getHeight(n)/2)+" cm"),e.push(a+" 0 m"),e.push(a+" "+r+" "+r+" "+a+" 0 "+a+" c"),e.push("-"+r+" "+a+" -"+a+" "+r+" -"+a+" 0 c"),e.push("-"+a+" -"+r+" -"+r+" -"+a+" 0 -"+a+" c"),e.push(r+" -"+a+" "+a+" -"+r+" "+a+" 0 c"),e.push("f"),e.push("Q"),e.push("0 g"),e.push("q"),e.push("1 0 0 1 "+es(fn.internal.getWidth(n)/2)+" "+es(fn.internal.getHeight(n)/2)+" cm"),e.push(i+" 0 m"),e.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),e.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),e.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),e.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),e.push("f"),e.push("Q"),o.stream=e.join("\n"),o},OffPushDown:function(n){var o=el(n);o.scope=n.scope;var e=[],i=fn.internal.getWidth(n)<=fn.internal.getHeight(n)?fn.internal.getWidth(n)/4:fn.internal.getHeight(n)/4;i=Number((.9*i).toFixed(5));var a=Number((2*i).toFixed(5)),r=Number((a*fn.internal.Bezier_C).toFixed(5));return e.push("0.749023 g"),e.push("q"),e.push("1 0 0 1 "+es(fn.internal.getWidth(n)/2)+" "+es(fn.internal.getHeight(n)/2)+" cm"),e.push(a+" 0 m"),e.push(a+" "+r+" "+r+" "+a+" 0 "+a+" c"),e.push("-"+r+" "+a+" -"+a+" "+r+" -"+a+" 0 c"),e.push("-"+a+" -"+r+" -"+r+" -"+a+" 0 -"+a+" c"),e.push(r+" -"+a+" "+a+" -"+r+" "+a+" 0 c"),e.push("f"),e.push("Q"),o.stream=e.join("\n"),o}},Cross:{createAppearanceStream:function(n){var o={D:{Off:fn.RadioButton.Cross.OffPushDown},N:{}};return o.N[n]=fn.RadioButton.Cross.YesNormal,o.D[n]=fn.RadioButton.Cross.YesPushDown,o},getCA:function(){return"8"},YesNormal:function(n){var o=el(n);o.scope=n.scope;var e=[],i=fn.internal.calculateCross(n);return e.push("q"),e.push("1 1 "+qn(fn.internal.getWidth(n)-2)+" "+qn(fn.internal.getHeight(n)-2)+" re"),e.push("W"),e.push("n"),e.push(qn(i.x1.x)+" "+qn(i.x1.y)+" m"),e.push(qn(i.x2.x)+" "+qn(i.x2.y)+" l"),e.push(qn(i.x4.x)+" "+qn(i.x4.y)+" m"),e.push(qn(i.x3.x)+" "+qn(i.x3.y)+" l"),e.push("s"),e.push("Q"),o.stream=e.join("\n"),o},YesPushDown:function(n){var o=el(n);o.scope=n.scope;var e=fn.internal.calculateCross(n),i=[];return i.push("0.749023 g"),i.push("0 0 "+qn(fn.internal.getWidth(n))+" "+qn(fn.internal.getHeight(n))+" re"),i.push("f"),i.push("q"),i.push("1 1 "+qn(fn.internal.getWidth(n)-2)+" "+qn(fn.internal.getHeight(n)-2)+" re"),i.push("W"),i.push("n"),i.push(qn(e.x1.x)+" "+qn(e.x1.y)+" m"),i.push(qn(e.x2.x)+" "+qn(e.x2.y)+" l"),i.push(qn(e.x4.x)+" "+qn(e.x4.y)+" m"),i.push(qn(e.x3.x)+" "+qn(e.x3.y)+" l"),i.push("s"),i.push("Q"),o.stream=i.join("\n"),o},OffPushDown:function(n){var o=el(n);o.scope=n.scope;var e=[];return e.push("0.749023 g"),e.push("0 0 "+qn(fn.internal.getWidth(n))+" "+qn(fn.internal.getHeight(n))+" re"),e.push("f"),o.stream=e.join("\n"),o}}},createDefaultAppearanceStream:function(n){var o=n.scope.internal.getFont(n.fontName,n.fontStyle).id,e=n.scope.__private__.encodeColorString(n.color);return"/"+o+" "+n.fontSize+" Tf "+e}};fn.internal={Bezier_C:.551915024494,calculateCross:function(n){var o=fn.internal.getWidth(n),e=fn.internal.getHeight(n),i=Math.min(o,e);return{x1:{x:(o-i)/2,y:(e-i)/2+i},x2:{x:(o-i)/2+i,y:(e-i)/2},x3:{x:(o-i)/2,y:(e-i)/2},x4:{x:(o-i)/2+i,y:(e-i)/2+i}}}},fn.internal.getWidth=function(n){var o=0;return"object"===(0,Ni.Z)(n)&&(o=xu(n.Rect[2])),o},fn.internal.getHeight=function(n){var o=0;return"object"===(0,Ni.Z)(n)&&(o=xu(n.Rect[3])),o};var n,o,U2=wo.addField=function(n){if(function(n,o){if(o.scope=n,void 0!==n.internal&&(void 0===n.internal.acroformPlugin||!1===n.internal.acroformPlugin.isInitialized)){if(Ss.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(ns)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");gu=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new g1,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){var e;(e=n).internal.events.unsubscribe(e.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete e.internal.acroformPlugin.acroFormDictionaryRoot._eventID,e.internal.acroformPlugin.printedOut=!0}),n.internal.events.subscribe("buildDocument",function(){!function(e){e.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var i=e.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in i)if(i.hasOwnProperty(a)){var r=i[a];r.objId=void 0,r.hasAnnotation&&xi(r,e)}}(n)}),n.internal.events.subscribe("putCatalog",function(){!function(e){if(void 0===e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("putCatalogCallback: Root missing.");e.internal.write("/AcroForm "+e.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")}(n)}),n.internal.events.subscribe("postPutPages",function(e){!function(i,a){var r=!i;for(var s in i||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),i=i||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(i.hasOwnProperty(s)){var l=i[s],c=[],d=l.Rect;if(l.Rect&&(l.Rect=p1(l.Rect,a)),a.internal.newObjectDeferredBegin(l.objId,!0),l.DA=fn.createDefaultAppearanceStream(l),"object"===(0,Ni.Z)(l)&&"function"==typeof l.getKeyValueListForStream&&(c=l.getKeyValueListForStream()),l.Rect=d,l.hasAppearanceStream&&!l.appearanceStreamContent){var h=bt(l);c.push({key:"AP",value:"<</N "+h+">>"}),a.internal.acroformPlugin.xForms.push(h)}if(l.appearanceStreamContent){var _="";for(var x in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(x)){var b=l.appearanceStreamContent[x];if(_+="/"+x+" ",_+="<<",Object.keys(b).length>=1||Array.isArray(b)){for(var s in b)if(b.hasOwnProperty(s)){var T=b[s];"function"==typeof T&&(T=T.call(a,l)),_+="/"+s+" "+T+" ",a.internal.acroformPlugin.xForms.indexOf(T)>=0||a.internal.acroformPlugin.xForms.push(T)}}else"function"==typeof(T=b)&&(T=T.call(a,l)),_+="/"+s+" "+T,a.internal.acroformPlugin.xForms.indexOf(T)>=0||a.internal.acroformPlugin.xForms.push(T);_+=">>"}c.push({key:"AP",value:"<<\n"+_+">>"})}a.internal.putStream({additionalKeyValues:c,objectId:l.objId}),a.internal.out("endobj")}r&&function(n,o){for(var e in n)if(n.hasOwnProperty(e)){var i=e,a=n[e];o.internal.newObjectDeferredBegin(a.objId,!0),"object"===(0,Ni.Z)(a)&&"function"==typeof a.putStream&&a.putStream(),delete n[i]}}(a.internal.acroformPlugin.xForms,a)}(e,n)}),n.internal.acroformPlugin.isInitialized=!0}}(this,n),!(n instanceof Ss))throw new Error("Invalid argument passed to jsPDF.addField.");var o;return(o=n).scope.internal.acroformPlugin.printedOut&&(o.scope.internal.acroformPlugin.printedOut=!1,o.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),o.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(o),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};function x1(n){return n.reduce(function(o,e,i){return o[e]=i,o},{})}wo.AcroFormChoiceField=dd,wo.AcroFormListBox=gr,wo.AcroFormComboBox=md,wo.AcroFormEditBox=Lh,wo.AcroFormButton=Ca,wo.AcroFormPushButton=Ph,wo.AcroFormRadioButton=hd,wo.AcroFormCheckBox=Nh,wo.AcroFormTextField=vu,wo.AcroFormPasswordField=Zh,wo.AcroFormAppearance=fn,wo.AcroForm={ChoiceField:dd,ListBox:gr,ComboBox:md,EditBox:Lh,Button:Ca,PushButton:Ph,RadioButton:hd,CheckBox:Nh,TextField:vu,PasswordField:Zh,Appearance:fn},On.AcroForm={ChoiceField:dd,ListBox:gr,ComboBox:md,EditBox:Lh,Button:Ca,PushButton:Ph,RadioButton:hd,CheckBox:Nh,TextField:vu,PasswordField:Zh,Appearance:fn},function(n){n.__addimage__={};var o="UNKNOWN",e={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=n.__addimage__.getImageFileTypeByImageData=function(ot,_t){var Mt,It,Tt,Vt,ie,Wt=o;if("RGBA"===(_t=_t||o)||void 0!==ot.data&&ot.data instanceof Uint8ClampedArray&&"height"in ot&&"width"in ot)return"RGBA";if(At(ot))for(ie in e)for(Tt=e[ie],Mt=0;Mt<Tt.length;Mt+=1){for(Vt=!0,It=0;It<Tt[Mt].length;It+=1)if(void 0!==Tt[Mt][It]&&Tt[Mt][It]!==ot[It]){Vt=!1;break}if(!0===Vt){Wt=ie;break}}else for(ie in e)for(Tt=e[ie],Mt=0;Mt<Tt.length;Mt+=1){for(Vt=!0,It=0;It<Tt[Mt].length;It+=1)if(void 0!==Tt[Mt][It]&&Tt[Mt][It]!==ot.charCodeAt(It)){Vt=!1;break}if(!0===Vt){Wt=ie;break}}return Wt===o&&_t!==o&&(Wt=_t),Wt},a=function ot(_t){for(var Mt=this.internal.write,It=this.internal.putStream,Tt=(0,this.internal.getFilters)();-1!==Tt.indexOf("FlateEncode");)Tt.splice(Tt.indexOf("FlateEncode"),1);_t.objectId=this.internal.newObject();var Vt=[];if(Vt.push({key:"Type",value:"/XObject"}),Vt.push({key:"Subtype",value:"/Image"}),Vt.push({key:"Width",value:_t.width}),Vt.push({key:"Height",value:_t.height}),_t.colorSpace===U.INDEXED?Vt.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(_t.palette.length/3-1)+" "+("sMask"in _t&&void 0!==_t.sMask?_t.objectId+2:_t.objectId+1)+" 0 R]"}):(Vt.push({key:"ColorSpace",value:"/"+_t.colorSpace}),_t.colorSpace===U.DEVICE_CMYK&&Vt.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Vt.push({key:"BitsPerComponent",value:_t.bitsPerComponent}),"decodeParameters"in _t&&void 0!==_t.decodeParameters&&Vt.push({key:"DecodeParms",value:"<<"+_t.decodeParameters+">>"}),"transparency"in _t&&Array.isArray(_t.transparency)){for(var ie="",Wt=0,oe=_t.transparency.length;Wt<oe;Wt++)ie+=_t.transparency[Wt]+" "+_t.transparency[Wt]+" ";Vt.push({key:"Mask",value:"["+ie+"]"})}if(void 0!==_t.sMask&&Vt.push({key:"SMask",value:_t.objectId+1+" 0 R"}),It({data:_t.data,additionalKeyValues:Vt,alreadyAppliedFilters:void 0!==_t.filter?["/"+_t.filter]:void 0,objectId:_t.objectId}),Mt("endobj"),"sMask"in _t&&void 0!==_t.sMask){var at={width:_t.width,height:_t.height,colorSpace:"DeviceGray",bitsPerComponent:_t.bitsPerComponent,decodeParameters:"/Predictor "+_t.predictor+" /Colors 1 /BitsPerComponent "+_t.bitsPerComponent+" /Columns "+_t.width,data:_t.sMask};"filter"in _t&&(at.filter=_t.filter),ot.call(this,at)}if(_t.colorSpace===U.INDEXED){var kt=this.internal.newObject();It({data:et(new Uint8Array(_t.palette)),objectId:kt}),Mt("endobj")}},r=function(){var ot=this.internal.collections.addImage_images;for(var _t in ot)a.call(this,ot[_t])},s=function(){var ot,_t=this.internal.collections.addImage_images,Mt=this.internal.write;for(var It in _t)Mt("/I"+(ot=_t[It]).index,ot.objectId,"0","R")},l=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",r),this.internal.events.subscribe("putXobjectDict",s))},c=function(){var ot=this.internal.collections.addImage_images;return l.call(this),ot},d=function(){return Object.keys(this.internal.collections.addImage_images).length},h=function(ot){return"function"==typeof n["process"+ot.toUpperCase()]},_=function(ot){return"object"===(0,Ni.Z)(ot)&&1===ot.nodeType},x=function(ot,_t){if("IMG"===ot.nodeName&&ot.hasAttribute("src")){var Mt=""+ot.getAttribute("src");if(0===Mt.indexOf("data:image/"))return wc(unescape(Mt).split("base64,").pop());var It=n.loadFile(Mt,!0);if(void 0!==It)return It}if("CANVAS"===ot.nodeName){if(0===ot.width||0===ot.height)throw new Error("Given canvas must have data. Canvas width: "+ot.width+", height: "+ot.height);var Tt;switch(_t){case"PNG":Tt="image/png";break;case"WEBP":Tt="image/webp";break;default:Tt="image/jpeg"}return wc(ot.toDataURL(Tt,1).split("base64,").pop())}},b=function(ot){var _t=this.internal.collections.addImage_images;if(_t)for(var Mt in _t)if(ot===_t[Mt].alias)return _t[Mt]},T=function(ot,_t,Mt){return ot||_t||(ot=-96,_t=-96),ot<0&&(ot=-1*Mt.width*72/ot/this.internal.scaleFactor),_t<0&&(_t=-1*Mt.height*72/_t/this.internal.scaleFactor),0===ot&&(ot=_t*Mt.width/Mt.height),0===_t&&(_t=ot*Mt.height/Mt.width),[ot,_t]},P=function(ot,_t,Mt,It,Tt,Vt){var ie=T.call(this,Mt,It,Tt),Wt=this.internal.getCoordinateString,oe=this.internal.getVerticalCoordinateString,ne=c.call(this);if(Mt=ie[0],It=ie[1],ne[Tt.index]=Tt,Vt){Vt*=Math.PI/180;var we=Math.cos(Vt),at=Math.sin(Vt),kt=function(Ft){return Ft.toFixed(4)},Et=[kt(we),kt(at),kt(-1*at),kt(we),0,0,"cm"]}this.internal.write("q"),Vt?(this.internal.write([1,"0","0",1,Wt(ot),oe(_t+It),"cm"].join(" ")),this.internal.write(Et.join(" ")),this.internal.write([Wt(Mt),"0","0",Wt(It),"0","0","cm"].join(" "))):this.internal.write([Wt(Mt),"0","0",Wt(It),Wt(ot),oe(_t+It),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Tt.index+" Do"),this.internal.write("Q")},U=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var q=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},B=n.__addimage__.sHashCode=function(ot){var _t,Mt,It=0;if("string"==typeof ot)for(Mt=ot.length,_t=0;_t<Mt;_t++)It=(It<<5)-It+ot.charCodeAt(_t),It|=0;else if(At(ot))for(Mt=ot.byteLength/2,_t=0;_t<Mt;_t++)It=(It<<5)-It+ot[_t],It|=0;return It},W=n.__addimage__.validateStringAsBase64=function(ot){(ot=ot||"").toString().trim();var _t=!0;return 0===ot.length&&(_t=!1),ot.length%4!=0&&(_t=!1),!1===/^[A-Za-z0-9+/]+$/.test(ot.substr(0,ot.length-2))&&(_t=!1),!1===/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(ot.substr(-2))&&(_t=!1),_t},G=n.__addimage__.extractImageFromDataUrl=function(ot){var _t=(ot=ot||"").split("base64,"),Mt=null;if(2===_t.length){var It=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(_t[0]);Array.isArray(It)&&(Mt={mimeType:It[1],charset:It[2],data:_t[1]})}return Mt},nt=n.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};n.__addimage__.isArrayBuffer=function(ot){return nt()&&ot instanceof ArrayBuffer};var At=n.__addimage__.isArrayBufferView=function(ot){return nt()&&typeof Uint32Array<"u"&&(ot instanceof Int8Array||ot instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&ot instanceof Uint8ClampedArray||ot instanceof Int16Array||ot instanceof Uint16Array||ot instanceof Int32Array||ot instanceof Uint32Array||ot instanceof Float32Array||ot instanceof Float64Array)},ut=n.__addimage__.binaryStringToUint8Array=function(ot){for(var _t=ot.length,Mt=new Uint8Array(_t),It=0;It<_t;It++)Mt[It]=ot.charCodeAt(It);return Mt},et=n.__addimage__.arrayBufferToBinaryString=function(ot){for(var _t="",Mt=At(ot)?ot:new Uint8Array(ot),It=0;It<Mt.length;It+=8192)_t+=String.fromCharCode.apply(null,Mt.subarray(It,It+8192));return _t};n.addImage=function(){var ot,_t,Mt,It,Tt,Vt,ie,Wt,oe;if("number"==typeof arguments[1]?(_t=o,Mt=arguments[1],It=arguments[2],Tt=arguments[3],Vt=arguments[4],ie=arguments[5],Wt=arguments[6],oe=arguments[7]):(_t=arguments[1],Mt=arguments[2],It=arguments[3],Tt=arguments[4],Vt=arguments[5],ie=arguments[6],Wt=arguments[7],oe=arguments[8]),"object"===(0,Ni.Z)(ot=arguments[0])&&!_(ot)&&"imageData"in ot){var ne=ot;ot=ne.imageData,_t=ne.format||_t||o,Mt=ne.x||Mt||0,It=ne.y||It||0,Tt=ne.w||ne.width||Tt,Vt=ne.h||ne.height||Vt,ie=ne.alias||ie,Wt=ne.compression||Wt,oe=ne.rotation||ne.angle||oe}var we=this.internal.getFilters();if(void 0===Wt&&-1!==we.indexOf("FlateEncode")&&(Wt="SLOW"),isNaN(Mt)||isNaN(It))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var at=vt.call(this,ot,_t,ie,Wt);return P.call(this,Mt,It,Tt,Vt,at,oe),this};var vt=function(ot,_t,Mt,It){var Tt,Vt,ie,oe;if("string"==typeof ot&&i(ot)===o){ot=unescape(ot);var Wt=Nt(ot,!1);(""!==Wt||void 0!==(Wt=n.loadFile(ot,!0)))&&(ot=Wt)}if(_(ot)&&(ot=x(ot,_t)),_t=i(ot,_t),!h(_t))throw new Error("addImage does not support files of type '"+_t+"', please ensure that a plugin for '"+_t+"' support is added.");if((null==(ie=Mt)||0===ie.length)&&(Mt="string"==typeof(oe=ot)||At(oe)?B(oe):At(oe.data)?B(oe.data):null),(Tt=b.call(this,Mt))||(nt()&&(ot instanceof Uint8Array||"RGBA"===_t||(Vt=ot,ot=ut(ot))),Tt=this["process"+_t.toUpperCase()](ot,d.call(this),Mt,function(oe){return oe&&"string"==typeof oe&&(oe=oe.toUpperCase()),oe in n.image_compression?oe:q.NONE}(It),Vt)),!Tt)throw new Error("An unknown error occurred whilst processing the image.");return Tt},Nt=n.__addimage__.convertBase64ToBinaryString=function(ot,_t){var Mt;_t="boolean"!=typeof _t||_t;var It,Tt="";if("string"==typeof ot){It=null!==(Mt=G(ot))?Mt.data:ot;try{Tt=wc(It)}catch(Vt){if(_t)throw W(It)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Vt.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return Tt};n.getImageProperties=function(ot){var _t,Mt,It="";if(_(ot)&&(ot=x(ot)),"string"==typeof ot&&i(ot)===o&&(""===(It=Nt(ot,!1))&&(It=n.loadFile(ot)||""),ot=It),Mt=i(ot),!h(Mt))throw new Error("addImage does not support files of type '"+Mt+"', please ensure that a plugin for '"+Mt+"' support is added.");if(!nt()||ot instanceof Uint8Array||(ot=ut(ot)),!(_t=this["process"+Mt.toUpperCase()](ot)))throw new Error("An unknown error occurred whilst processing the image");return _t.fileType=Mt,_t}}(On.API),
/**
       * @license
       * Copyright (c) 2014 Steven Spungin (TwelveTone LLC)  steven@twelvetone.tv
       *
       * Licensed under the MIT License.
       * http://opensource.org/licenses/mit-license
       */
n=On.API,o=function(e){if(void 0!==e&&""!=e)return!0},On.API.events.push(["addPage",function(e){this.internal.getPageInfo(e.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(e){for(var i,a,r,s=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(e.objId),d=e.pageContext.annotations,h=!1,_=0;_<d.length&&!h;_++)switch((i=d[_]).type){case"link":(o(i.options.url)||o(i.options.pageNumber))&&(h=!0);break;case"reference":case"text":case"freetext":h=!0}if(0!=h){this.internal.write("/Annots [");for(var x=0;x<d.length;x++){i=d[x];var b=this.internal.pdfEscape,T=this.internal.getEncryptor(e.objId);switch(i.type){case"reference":this.internal.write(" "+i.object.objId+" 0 R ");break;case"text":var P=this.internal.newAdditionalObject(),U=this.internal.newAdditionalObject(),q=this.internal.getEncryptor(P.objId),B=i.title||"Note";r="<</Type /Annot /Subtype /Text "+(a="/Rect ["+s(i.bounds.x)+" "+l(i.bounds.y+i.bounds.h)+" "+s(i.bounds.x+i.bounds.w)+" "+l(i.bounds.y)+"] ")+"/Contents ("+b(q(i.contents))+")",r+=" /Popup "+U.objId+" 0 R",r+=" /P "+c.objId+" 0 R",r+=" /T ("+b(q(B))+") >>",P.content=r;var W=P.objId+" 0 R";r="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+s(i.bounds.x+30)+" "+l(i.bounds.y+i.bounds.h)+" "+s(i.bounds.x+i.bounds.w+30)+" "+l(i.bounds.y)+"] ")+" /Parent "+W,i.open&&(r+=" /Open true"),U.content=r+=" >>",this.internal.write(P.objId,"0 R",U.objId,"0 R");break;case"freetext":a="/Rect ["+s(i.bounds.x)+" "+l(i.bounds.y)+" "+s(i.bounds.x+i.bounds.w)+" "+l(i.bounds.y+i.bounds.h)+"] ";var G=i.color||"#000000";r="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+b(T(i.contents))+")",r+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+G+")",r+=" /Border [0 0 0]",this.internal.write(r+=" >>");break;case"link":if(i.options.name){var nt=this.annotations._nameMap[i.options.name];i.options.pageNumber=nt.page,i.options.top=nt.y}else i.options.top||(i.options.top=0);if(a="/Rect ["+i.finalBounds.x+" "+i.finalBounds.y+" "+i.finalBounds.w+" "+i.finalBounds.h+"] ",r="",i.options.url)r="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+b(T(i.options.url))+") >>";else if(i.options.pageNumber)switch(r="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(i.options.pageNumber).objId+" 0 R",i.options.magFactor=i.options.magFactor||"XYZ",i.options.magFactor){case"Fit":r+=" /Fit]";break;case"FitH":r+=" /FitH "+i.options.top+"]";break;case"FitV":i.options.left=i.options.left||0,r+=" /FitV "+i.options.left+"]";break;default:var At=l(i.options.top);i.options.left=i.options.left||0,void 0===i.options.zoom&&(i.options.zoom=0),r+=" /XYZ "+i.options.left+" "+At+" "+i.options.zoom+"]"}""!=r&&this.internal.write(r+=" >>")}}this.internal.write("]")}}]),n.createAnnotation=function(e){var i=this.internal.getCurrentPageInfo();switch(e.type){case"link":this.link(e.bounds.x,e.bounds.y,e.bounds.w,e.bounds.h,e);break;case"text":case"freetext":i.pageContext.annotations.push(e)}},n.link=function(e,i,a,r,s){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(e),y:d(i),w:c(e+a),h:d(i+r)},options:s,type:"link"})},n.textWithLink=function(e,i,a,r){var s,l,c=this.getTextWidth(e),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(void 0!==r.maxWidth){var h=this.splitTextToSize(e,l=r.maxWidth).length;s=Math.ceil(d*h)}else l=c,s=d;return this.text(e,i,a,r),"center"===r.align&&(i-=c/2),"right"===r.align&&(i-=c),this.link(i,(a+=.2*d)-d,l,s,r),c},n.getTextWidth=function(e){var i=this.internal.getFontSize();return this.getStringUnitWidth(e)*i/this.internal.scaleFactor},
/**
       * @license
       * Copyright (c) 2017 Aras Abbasi
       *
       * Licensed under the MIT License.
       * http://opensource.org/licenses/mit-license
       */
function(n){var o={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},e={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},i={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];n.__arabicParser__={};var r=n.__arabicParser__.isInArabicSubstitutionA=function(P){return void 0!==o[P.charCodeAt(0)]},s=n.__arabicParser__.isArabicLetter=function(P){return"string"==typeof P&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(P)},l=n.__arabicParser__.isArabicEndLetter=function(P){return s(P)&&r(P)&&o[P.charCodeAt(0)].length<=2},c=n.__arabicParser__.isArabicAlfLetter=function(P){return s(P)&&a.indexOf(P.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(P){return s(P)&&r(P)&&o[P.charCodeAt(0)].length>=1};var d=n.__arabicParser__.arabicLetterHasFinalForm=function(P){return s(P)&&r(P)&&o[P.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(P){return s(P)&&r(P)&&o[P.charCodeAt(0)].length>=3};var h=n.__arabicParser__.arabicLetterHasMedialForm=function(P){return s(P)&&r(P)&&4==o[P.charCodeAt(0)].length},_=n.__arabicParser__.resolveLigatures=function(P){var U=0,q=e,B="",W=0;for(U=0;U<P.length;U+=1)void 0!==q[P.charCodeAt(U)]?(W++,"number"==typeof(q=q[P.charCodeAt(U)])&&(B+=String.fromCharCode(q),q=e,W=0),U===P.length-1&&(q=e,B+=P.charAt(U-(W-1)),U-=W-1,W=0)):(q=e,B+=P.charAt(U-W),U-=W,W=0);return B};n.__arabicParser__.isArabicDiacritic=function(P){return void 0!==P&&void 0!==i[P.charCodeAt(0)]};var x=n.__arabicParser__.getCorrectForm=function(P,U,q){return s(P)?!1===r(P)?-1:!d(P)||!s(U)&&!s(q)||!s(q)&&l(U)||l(P)&&!s(U)||l(P)&&c(U)||l(P)&&l(U)?0:h(P)&&s(U)&&!l(U)&&s(q)&&d(q)?3:l(P)||!s(q)?1:2:-1},b=function(P){var U=0,q=0,B=0,W="",G="",nt="",At=(P=P||"").split("\\s+"),ut=[];for(U=0;U<At.length;U+=1){for(ut.push(""),q=0;q<At[U].length;q+=1)G=At[U][q-1],nt=At[U][q+1],s(W=At[U][q])?(B=x(W,G,nt),ut[U]+=-1!==B?String.fromCharCode(o[W.charCodeAt(0)][B]):W):ut[U]+=W;ut[U]=_(ut[U])}return ut.join(" ")},T=n.__arabicParser__.processArabic=n.processArabic=function(){var P,U="string"==typeof arguments[0]?arguments[0]:arguments[0].text,q=[];if(Array.isArray(U)){var B=0;for(q=[],B=0;B<U.length;B+=1)Array.isArray(U[B])?q.push([b(U[B][0]),U[B][1],U[B][2]]):q.push([b(U[B])]);P=q}else P=b(U);return"string"==typeof arguments[0]?P:(arguments[0].text=P,arguments[0])};n.events.push(["preProcessText",T])}(On.API),On.API.autoPrint=function(n){var o;return"javascript"===((n=n||{}).variant=n.variant||"non-conform",n.variant)?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){o=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+o+" 0 R")})),this},
/**
       * @license
       * Copyright (c) 2014 Steven Spungin (TwelveTone LLC)  steven@twelvetone.tv
       *
       * Licensed under the MIT License.
       * http://opensource.org/licenses/mit-license
       */
function(n){var o=function(){var e=void 0;Object.defineProperty(this,"pdf",{get:function(){return e},set:function(l){e=l}});var i=150;Object.defineProperty(this,"width",{get:function(){return i},set:function(l){i=isNaN(l)||!1===Number.isInteger(l)||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=i+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(l){a=isNaN(l)||!1===Number.isInteger(l)||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var r=[];Object.defineProperty(this,"childNodes",{get:function(){return r},set:function(l){r=l}});var s={};Object.defineProperty(this,"style",{get:function(){return s},set:function(l){s=l}}),Object.defineProperty(this,"parentNode",{})};o.prototype.getContext=function(e,i){var a;if("2d"!==(e=e||"2d"))return null;for(a in i)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=i[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},o.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new o,this.canvas.pdf=this}])}(On.API),function(n){var o={left:0,top:0,bottom:0,right:0},e=!1,i=function(){void 0===this.internal.__cell__&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},o),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new r,this.internal.__cell__.pages=1},r=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(P){c=P}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(P){d=P}});var h=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return h},set:function(P){h=P}});var _=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return _},set:function(P){_=P}});var x=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return x},set:function(P){x=P}});var b=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return b},set:function(P){b=P}});var T=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return T},set:function(P){T=P}}),this};r.prototype.clone=function(){return new r(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},r.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(c){return i.call(this),this.internal.__cell__.headerFunction="function"==typeof c?c:void 0,this},n.getTextDimensions=function(c,d){i.call(this);var h=(d=d||{}).fontSize||this.getFontSize(),_=d.font||this.getFont(),x=d.scaleFactor||this.internal.scaleFactor,b=0,T=0,P=0,U=this;if(!Array.isArray(c)&&"string"!=typeof c){if("number"!=typeof c)throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var q=d.maxWidth;q>0?"string"==typeof c?c=this.splitTextToSize(c,q):"[object Array]"===Object.prototype.toString.call(c)&&(c=c.reduce(function(W,G){return W.concat(U.splitTextToSize(G,q))},[])):c=Array.isArray(c)?c:[c];for(var B=0;B<c.length;B++)b<(P=this.getStringUnitWidth(c[B],{font:_})*h)&&(b=P);return 0!==b&&(T=c.length),{w:b/=x,h:Math.max((T*h*this.getLineHeightFactor()-h*(this.getLineHeightFactor()-1))/x,0)}},n.cellAddPage=function(){i.call(this),this.addPage();var c=this.internal.__cell__.margins||o;return this.internal.__cell__.lastCell=new r(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var s=n.cell=function(){var c;c=arguments[0]instanceof r?arguments[0]:new r(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),i.call(this);var d=this.internal.__cell__.lastCell,h=this.internal.__cell__.padding,_=this.internal.__cell__.margins||o,x=this.internal.__cell__.tableHeaderRow,b=this.internal.__cell__.printHeaders;return void 0!==d.lineNumber&&(d.lineNumber===c.lineNumber?(c.x=(d.x||0)+(d.width||0),c.y=d.y||0):d.y+d.height+c.height+_.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=_.top,b&&x&&(this.printHeaderRow(c.lineNumber,!0),c.y+=x[0].height)):c.y=d.y+d.height||c.y),void 0!==c.text[0]&&(this.rect(c.x,c.y,c.width,c.height,!0===e?"FD":void 0),"right"===c.align?this.text(c.text,c.x+c.width-h,c.y+h,{align:"right",baseline:"top"}):"center"===c.align?this.text(c.text,c.x+c.width/2,c.y+h,{align:"center",baseline:"top",maxWidth:c.width-h-h}):this.text(c.text,c.x+h,c.y+h,{align:"left",baseline:"top",maxWidth:c.width-h-h})),this.internal.__cell__.lastCell=c,this};n.table=function(c,d,h,_,x){if(i.call(this),!h)throw new Error("No data for PDF table.");var b,T,P,U,q=[],B=[],W=[],G={},nt={},At=[],ut=[],et=(x=x||{}).autoSize||!1,vt=!1!==x.printHeaders,Nt=x.css&&void 0!==x.css["font-size"]?16*x.css["font-size"]:x.fontSize||12,ot=x.margins||Object.assign({width:this.getPageWidth()},o),_t="number"==typeof x.padding?x.padding:3,Mt=x.headerBackgroundColor||"#c8c8c8",It=x.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=vt,this.internal.__cell__.margins=ot,this.internal.__cell__.table_font_size=Nt,this.internal.__cell__.padding=_t,this.internal.__cell__.headerBackgroundColor=Mt,this.internal.__cell__.headerTextColor=It,this.setFontSize(Nt),null==_)B=q=Object.keys(h[0]),W=q.map(function(){return"left"});else if(Array.isArray(_)&&"object"===(0,Ni.Z)(_[0]))for(q=_.map(function(ne){return ne.name}),B=_.map(function(ne){return ne.prompt||ne.name||""}),W=_.map(function(ne){return ne.align||"left"}),b=0;b<_.length;b+=1)nt[_[b].name]=_[b].width*(19.049976/25.4);else Array.isArray(_)&&"string"==typeof _[0]&&(B=q=_,W=q.map(function(){return"left"}));if(et||Array.isArray(_)&&"string"==typeof _[0])for(b=0;b<q.length;b+=1){for(G[U=q[b]]=h.map(function(ne){return ne[U]}),this.setFont(void 0,"bold"),At.push(this.getTextDimensions(B[b],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),T=G[U],this.setFont(void 0,"normal"),P=0;P<T.length;P+=1)At.push(this.getTextDimensions(T[P],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);nt[U]=Math.max.apply(null,At)+_t+_t,At=[]}if(vt){var Tt={};for(b=0;b<q.length;b+=1)Tt[q[b]]={},Tt[q[b]].text=B[b],Tt[q[b]].align=W[b];var Vt=l.call(this,Tt,nt);ut=q.map(function(ne){return new r(c,d,nt[ne],Vt,Tt[ne].text,void 0,Tt[ne].align)}),this.setTableHeaderRow(ut),this.printHeaderRow(1,!1)}var ie=_.reduce(function(ne,we){return ne[we.name]=we.align,ne},{});for(b=0;b<h.length;b+=1){"rowStart"in x&&x.rowStart instanceof Function&&x.rowStart({row:b,data:h[b]},this);var Wt=l.call(this,h[b],nt);for(P=0;P<q.length;P+=1){var oe=h[b][q[P]];"cellStart"in x&&x.cellStart instanceof Function&&x.cellStart({row:b,col:P,data:oe},this),s.call(this,new r(c,d,nt[q[P]],Wt,oe,b+2,ie[q[P]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=d,this};var l=function(c,d){var h=this.internal.__cell__.padding,_=this.internal.__cell__.table_font_size,x=this.internal.scaleFactor;return Object.keys(c).map(function(b){var T=c[b];return this.splitTextToSize(T.hasOwnProperty("text")?T.text:T,d[b]-h-h)},this).map(function(b){return this.getLineHeightFactor()*b.length*_/x+h+h},this).reduce(function(b,T){return Math.max(b,T)},0)};n.setTableHeaderRow=function(c){i.call(this),this.internal.__cell__.tableHeaderRow=c},n.printHeaderRow=function(c,d){if(i.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var h;if(e=!0,"function"==typeof this.internal.__cell__.headerFunction){var _=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new r(_[0],_[1],_[2],_[3],void 0,-1)}this.setFont(void 0,"bold");for(var x=[],b=0;b<this.internal.__cell__.tableHeaderRow.length;b+=1){h=this.internal.__cell__.tableHeaderRow[b].clone(),d&&(h.y=this.internal.__cell__.margins.top||0,x.push(h)),h.lineNumber=c;var T=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),s.call(this,h),this.setTextColor(T)}x.length>0&&this.setTableHeaderRow(x),this.setFont(void 0,"normal"),e=!1}}(On.API);var b1={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},os=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],H_=x1(os),v1=[100,200,300,400,500,600,700,800,900],B2=x1(v1);function G_(n){var r,o=n.family.replace(/"|'/g,"").toLowerCase(),e=b1[r=(r=n.style)||"normal"]?r:"normal",i=function(r){return r?"number"==typeof r?r>=100&&r<=900&&r%100==0?r:400:/^\d00$/.test(r)?parseInt(r):"bold"===r?700:400:400}(n.weight),a=function(r){return"number"==typeof H_[r=r||"normal"]?r:"normal"}(n.stretch);return{family:o,style:e,weight:i,stretch:a,src:n.src||[],ref:n.ref||{name:o,style:[a,e,i].join(" ")}}}function y1(n,o,e,i){var a;for(a=e;a>=0&&a<o.length;a+=i)if(n[o[a]])return n[o[a]];for(a=e;a>=0&&a<o.length;a-=i)if(n[o[a]])return n[o[a]]}var w1={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},$_={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function C1(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function Dh(n){return n.trimLeft()}function gm(n,o){for(var e=0;e<n.length;){if(n.charAt(e)===o)return[n.substring(0,e),n.substring(e+1)];e+=1}return null}function jh(n){var o=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return null===o?null:[o[0],n.substring(o[0].length)]}var qh,Y_,T1,Os=["times"];(function(n){var o,e,i,a,r,s,l,c,d,h=function(at){return this.isStrokeTransparent=(at=at||{}).isStrokeTransparent||!1,this.strokeOpacity=at.strokeOpacity||1,this.strokeStyle=at.strokeStyle||"#000000",this.fillStyle=at.fillStyle||"#000000",this.isFillTransparent=at.isFillTransparent||!1,this.fillOpacity=at.fillOpacity||1,this.font=at.font||"10px sans-serif",this.textBaseline=at.textBaseline||"alphabetic",this.textAlign=at.textAlign||"left",this.lineWidth=at.lineWidth||1,this.lineJoin=at.lineJoin||"miter",this.lineCap=at.lineCap||"butt",this.path=at.path||[],this.transform=void 0!==at.transform?at.transform.clone():new c,this.globalCompositeOperation=at.globalCompositeOperation||"normal",this.globalAlpha=at.globalAlpha||1,this.clip_path=at.clip_path||[],this.currentPoint=at.currentPoint||new s,this.miterLimit=at.miterLimit||10,this.lastPoint=at.lastPoint||new s,this.lineDashOffset=at.lineDashOffset||0,this.lineDash=at.lineDash||[],this.margin=at.margin||[0,0,0,0],this.prevPageLastElemOffset=at.prevPageLastElemOffset||0,this.ignoreClearRect="boolean"!=typeof at.ignoreClearRect||at.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new _(this),o=this.internal.f2,e=this.internal.getCoordinateString,i=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,r=this.internal.getVerticalCoordinate,s=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,d=new h}]);var _=function(at){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var kt=at;Object.defineProperty(this,"pdf",{get:function(){return kt}});var Et=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Et},set:function(pe){Et=!!pe}});var Ft=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Ft},set:function(pe){Ft=!!pe}});var Gt=0;Object.defineProperty(this,"posX",{get:function(){return Gt},set:function(pe){isNaN(pe)||(Gt=pe)}});var le=0;Object.defineProperty(this,"posY",{get:function(){return le},set:function(pe){isNaN(pe)||(le=pe)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(pe){var Pt;"number"==typeof pe?Pt=[pe,pe,pe,pe]:((Pt=new Array(4))[0]=pe[0],Pt[1]=pe.length>=2?pe[1]:Pt[0],Pt[2]=pe.length>=3?pe[2]:Pt[0],Pt[3]=pe.length>=4?pe[3]:Pt[1]),d.margin=Pt}});var ee=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ee},set:function(pe){ee=pe}});var re=0;Object.defineProperty(this,"lastBreak",{get:function(){return re},set:function(pe){re=pe}});var Qe=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Qe},set:function(pe){Qe=pe}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(pe){pe instanceof h&&(d=pe)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(pe){d.path=pe}});var Ne=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ne},set:function(pe){Ne=pe}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(pe){var Pt;Pt=x(pe),this.ctx.fillStyle=Pt.style,this.ctx.isFillTransparent=0===Pt.a,this.ctx.fillOpacity=Pt.a,this.pdf.setFillColor(Pt.r,Pt.g,Pt.b,{a:Pt.a}),this.pdf.setTextColor(Pt.r,Pt.g,Pt.b,{a:Pt.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(pe){var Pt=x(pe);this.ctx.strokeStyle=Pt.style,this.ctx.isStrokeTransparent=0===Pt.a,this.ctx.strokeOpacity=Pt.a,0===Pt.a?this.pdf.setDrawColor(255,255,255):this.pdf.setDrawColor(Pt.r,Pt.g,Pt.b)}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(pe){-1!==["butt","round","square"].indexOf(pe)&&(this.ctx.lineCap=pe,this.pdf.setLineCap(pe))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(pe){isNaN(pe)||(this.ctx.lineWidth=pe,this.pdf.setLineWidth(pe))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(pe){-1!==["bevel","round","miter"].indexOf(pe)&&(this.ctx.lineJoin=pe,this.pdf.setLineJoin(pe))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(pe){isNaN(pe)||(this.ctx.miterLimit=pe,this.pdf.setMiterLimit(pe))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(pe){this.ctx.textBaseline=pe}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(pe){-1!==["right","end","center","left","start"].indexOf(pe)&&(this.ctx.textAlign=pe)}});var on=null,dn=null;Object.defineProperty(this,"fontFaces",{get:function(){return dn},set:function(pe){on=null,dn=pe}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(pe){var Pt;if(this.ctx.font=pe,null!==(Pt=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(pe))){var wn=Pt[1],gn=Pt[3],je=Pt[4],Ge=Pt[6],rn=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(je)[2];je=Math.floor("px"===rn?parseFloat(je)*this.pdf.internal.scaleFactor:"em"===rn?parseFloat(je)*this.pdf.getFontSize():parseFloat(je)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(je);var Ve=function(Un){var vi,hn,Sr=[],zi=Un.trim();if(""===zi)return Os;if(zi in $_)return[$_[zi]];for(;""!==zi;){switch(hn=null,vi=(zi=Dh(zi)).charAt(0)){case'"':case"'":hn=gm(zi.substring(1),vi);break;default:hn=jh(zi)}if(null===hn||(Sr.push(hn[0]),""!==(zi=Dh(hn[1]))&&","!==zi.charAt(0)))return Os;zi=zi.replace(/^,/,"")}return Sr}(Ge);if(this.fontFaces){var Cn=function z2(n,o,e){for(var i=(e=e||{}).defaultFontFamily||"times",a=Object.assign({},w1,e.genericFontFamilies||{}),r=null,s=null,l=0;l<o.length;++l)if(a[(r=G_(o[l])).family]&&(r.family=a[r.family]),n.hasOwnProperty(r.family)){s=n[r.family];break}if(!(s=s||n[i]))throw new Error("Could not find a font-family for the rule '"+C1(r)+"' and default family '"+i+"'.");if(s=function(c,d){if(d[c])return d[c];var h=H_[c],x=y1(d,os,h,h<=H_.normal?-1:1);if(!x)throw new Error("Could not find a matching font-stretch value for "+c);return x}(r.stretch,s),s=function(c,d){if(d[c])return d[c];for(var h=b1[c],_=0;_<h.length;++_)if(d[h[_]])return d[h[_]];throw new Error("Could not find a matching font-style for "+c)}(r.style,s),!(s=function(c,d){if(d[c])return d[c];if(400===c&&d[500])return d[500];if(500===c&&d[400])return d[400];var _=y1(d,v1,B2[c],c<400?-1:1);if(!_)throw new Error("Could not find a matching font-weight for value "+c);return _}(r.weight,s)))throw new Error("Failed to resolve a font for the rule '"+C1(r)+"'.");return s}(function en(pe,Pt){if(null===on){var wn=(gn=pe.getFontList(),je=[],Object.keys(gn).forEach(function(Ge){gn[Ge].forEach(function(rn){var Ve=null;switch(rn){case"bold":Ve={family:Ge,weight:"bold"};break;case"italic":Ve={family:Ge,style:"italic"};break;case"bolditalic":Ve={family:Ge,weight:"bold",style:"italic"};break;case"":case"normal":Ve={family:Ge}}null!==Ve&&(Ve.ref={name:Ge,style:rn},je.push(Ve))})}),je);on=function(gn){for(var je={},Ge=0;Ge<gn.length;++Ge){var rn=G_(gn[Ge]),Ve=rn.family,Cn=rn.stretch,Qn=rn.style,Bn=rn.weight;je[Ve]=je[Ve]||{},je[Ve][Cn]=je[Ve][Cn]||{},je[Ve][Cn][Qn]=je[Ve][Cn][Qn]||{},je[Ve][Cn][Qn][Bn]=rn}return je}(wn.concat(Pt))}var gn,je;return on}(this.pdf,this.fontFaces),Ve.map(function(Un){return{family:Un,stretch:"normal",weight:gn,style:wn}}));this.pdf.setFont(Cn.ref.name,Cn.ref.style)}else{var Qn="";("bold"===gn||parseInt(gn,10)>=700||"bold"===wn)&&(Qn="bold"),"italic"===wn&&(Qn+="italic"),0===Qn.length&&(Qn="normal");for(var Bn="",ui={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Ci=0;Ci<Ve.length;Ci++){if(void 0!==this.pdf.internal.getFont(Ve[Ci],Qn,{noFallback:!0,disableWarning:!0})){Bn=Ve[Ci];break}if("bolditalic"===Qn&&void 0!==this.pdf.internal.getFont(Ve[Ci],"bold",{noFallback:!0,disableWarning:!0}))Bn=Ve[Ci],Qn="bold";else if(void 0!==this.pdf.internal.getFont(Ve[Ci],"normal",{noFallback:!0,disableWarning:!0})){Bn=Ve[Ci],Qn="normal";break}}if(""===Bn)for(var uo=0;uo<Ve.length;uo++)if(ui[Ve[uo]]){Bn=ui[Ve[uo]];break}this.pdf.setFont(Bn=""===Bn?"Times":Bn,Qn)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(pe){this.ctx.globalCompositeOperation=pe}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(pe){this.ctx.globalAlpha=pe}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(pe){this.ctx.lineDashOffset=pe,we.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(pe){this.ctx.lineDash=pe,we.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(pe){this.ctx.ignoreClearRect=!!pe}})};_.prototype.setLineDash=function(at){this.lineDash=at},_.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},_.prototype.fill=function(){G.call(this,"fill",!1)},_.prototype.stroke=function(){G.call(this,"stroke",!1)},_.prototype.beginPath=function(){this.path=[{type:"begin"}]},_.prototype.moveTo=function(at,kt){if(isNaN(at)||isNaN(kt))throw Ui.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Et=this.ctx.transform.applyToPoint(new s(at,kt));this.path.push({type:"mt",x:Et.x,y:Et.y}),this.ctx.lastPoint=new s(at,kt)},_.prototype.closePath=function(){var at=new s(0,0),kt=0;for(kt=this.path.length-1;-1!==kt;kt--)if("begin"===this.path[kt].type&&"object"===(0,Ni.Z)(this.path[kt+1])&&"number"==typeof this.path[kt+1].x){at=new s(this.path[kt+1].x,this.path[kt+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new s(at.x,at.y)},_.prototype.lineTo=function(at,kt){if(isNaN(at)||isNaN(kt))throw Ui.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Et=this.ctx.transform.applyToPoint(new s(at,kt));this.path.push({type:"lt",x:Et.x,y:Et.y}),this.ctx.lastPoint=new s(Et.x,Et.y)},_.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),G.call(this,null,!0)},_.prototype.quadraticCurveTo=function(at,kt,Et,Ft){if(isNaN(Et)||isNaN(Ft)||isNaN(at)||isNaN(kt))throw Ui.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Gt=this.ctx.transform.applyToPoint(new s(Et,Ft)),le=this.ctx.transform.applyToPoint(new s(at,kt));this.path.push({type:"qct",x1:le.x,y1:le.y,x:Gt.x,y:Gt.y}),this.ctx.lastPoint=new s(Gt.x,Gt.y)},_.prototype.bezierCurveTo=function(at,kt,Et,Ft,Gt,le){if(isNaN(Gt)||isNaN(le)||isNaN(at)||isNaN(kt)||isNaN(Et)||isNaN(Ft))throw Ui.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ee=this.ctx.transform.applyToPoint(new s(Gt,le)),re=this.ctx.transform.applyToPoint(new s(at,kt)),Qe=this.ctx.transform.applyToPoint(new s(Et,Ft));this.path.push({type:"bct",x1:re.x,y1:re.y,x2:Qe.x,y2:Qe.y,x:ee.x,y:ee.y}),this.ctx.lastPoint=new s(ee.x,ee.y)},_.prototype.arc=function(at,kt,Et,Ft,Gt,le){if(isNaN(at)||isNaN(kt)||isNaN(Et)||isNaN(Ft)||isNaN(Gt))throw Ui.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(le=!!le,!this.ctx.transform.isIdentity){var ee=this.ctx.transform.applyToPoint(new s(at,kt));at=ee.x,kt=ee.y;var re=this.ctx.transform.applyToPoint(new s(0,Et)),Qe=this.ctx.transform.applyToPoint(new s(0,0));Et=Math.sqrt(Math.pow(re.x-Qe.x,2)+Math.pow(re.y-Qe.y,2))}Math.abs(Gt-Ft)>=2*Math.PI&&(Ft=0,Gt=2*Math.PI),this.path.push({type:"arc",x:at,y:kt,radius:Et,startAngle:Ft,endAngle:Gt,counterclockwise:le})},_.prototype.arcTo=function(at,kt,Et,Ft,Gt){throw new Error("arcTo not implemented.")},_.prototype.rect=function(at,kt,Et,Ft){if(isNaN(at)||isNaN(kt)||isNaN(Et)||isNaN(Ft))throw Ui.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(at,kt),this.lineTo(at+Et,kt),this.lineTo(at+Et,kt+Ft),this.lineTo(at,kt+Ft),this.lineTo(at,kt),this.lineTo(at+Et,kt),this.lineTo(at,kt)},_.prototype.fillRect=function(at,kt,Et,Ft){if(isNaN(at)||isNaN(kt)||isNaN(Et)||isNaN(Ft))throw Ui.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!b.call(this)){var Gt={};"butt"!==this.lineCap&&(Gt.lineCap=this.lineCap,this.lineCap="butt"),"miter"!==this.lineJoin&&(Gt.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(at,kt,Et,Ft),this.fill(),Gt.hasOwnProperty("lineCap")&&(this.lineCap=Gt.lineCap),Gt.hasOwnProperty("lineJoin")&&(this.lineJoin=Gt.lineJoin)}},_.prototype.strokeRect=function(at,kt,Et,Ft){if(isNaN(at)||isNaN(kt)||isNaN(Et)||isNaN(Ft))throw Ui.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");T.call(this)||(this.beginPath(),this.rect(at,kt,Et,Ft),this.stroke())},_.prototype.clearRect=function(at,kt,Et,Ft){if(isNaN(at)||isNaN(kt)||isNaN(Et)||isNaN(Ft))throw Ui.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(at,kt,Et,Ft))},_.prototype.save=function(at){at="boolean"!=typeof at||at;for(var kt=this.pdf.internal.getCurrentPageInfo().pageNumber,Et=0;Et<this.pdf.internal.getNumberOfPages();Et++)this.pdf.setPage(Et+1),this.pdf.internal.out("q");if(this.pdf.setPage(kt),at){this.ctx.fontSize=this.pdf.internal.getFontSize();var Ft=new h(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Ft}},_.prototype.restore=function(at){at="boolean"!=typeof at||at;for(var kt=this.pdf.internal.getCurrentPageInfo().pageNumber,Et=0;Et<this.pdf.internal.getNumberOfPages();Et++)this.pdf.setPage(Et+1),this.pdf.internal.out("Q");this.pdf.setPage(kt),at&&0!==this.ctxStack.length&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},_.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var x=function(at){var kt,Et,Ft,Gt;if(!0===at.isCanvasGradient&&(at=at.getColor()),!at)return{r:0,g:0,b:0,a:0,style:at};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(at))kt=0,Et=0,Ft=0,Gt=0;else{var le=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(at);if(null!==le)kt=parseInt(le[1]),Et=parseInt(le[2]),Ft=parseInt(le[3]),Gt=1;else if(null!==(le=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(at)))kt=parseInt(le[1]),Et=parseInt(le[2]),Ft=parseInt(le[3]),Gt=parseFloat(le[4]);else{if(Gt=1,"string"==typeof at&&"#"!==at.charAt(0)){var ee=new B_(at);at=ee.ok?ee.toHex():"#000000"}4===at.length?(kt=at.substring(1,2),kt+=kt,Et=at.substring(2,3),Et+=Et,Ft=at.substring(3,4),Ft+=Ft):(kt=at.substring(1,3),Et=at.substring(3,5),Ft=at.substring(5,7)),kt=parseInt(kt,16),Et=parseInt(Et,16),Ft=parseInt(Ft,16)}}return{r:kt,g:Et,b:Ft,a:Gt,style:at}},b=function(){return this.ctx.isFillTransparent||0==this.globalAlpha},T=function(){return!(!this.ctx.isStrokeTransparent&&0!=this.globalAlpha)};_.prototype.fillText=function(at,kt,Et,Ft){if(isNaN(kt)||isNaN(Et)||"string"!=typeof at)throw Ui.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Ft=isNaN(Ft)?void 0:Ft,!b.call(this)){var Gt=Wt(this.ctx.transform.rotation);_t.call(this,{text:at,x:kt,y:Et,scale:this.ctx.transform.scaleX,angle:Gt,align:this.textAlign,maxWidth:Ft})}},_.prototype.strokeText=function(at,kt,Et,Ft){if(isNaN(kt)||isNaN(Et)||"string"!=typeof at)throw Ui.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!T.call(this)){Ft=isNaN(Ft)?void 0:Ft;var Gt=Wt(this.ctx.transform.rotation);_t.call(this,{text:at,x:kt,y:Et,scale:this.ctx.transform.scaleX,renderingMode:"stroke",angle:Gt,align:this.textAlign,maxWidth:Ft})}},_.prototype.measureText=function(at){if("string"!=typeof at)throw Ui.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var kt=this.pdf,Et=this.pdf.internal.scaleFactor,Ft=kt.internal.getFontSize(),Gt=kt.getStringUnitWidth(at)*Ft/kt.internal.scaleFactor;return new function(ee){var re=(ee=ee||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return re}}),this}({width:Gt*=Math.round(96*Et/72*1e4)/1e4})},_.prototype.scale=function(at,kt){if(isNaN(at)||isNaN(kt))throw Ui.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Et=new c(at,0,0,kt,0,0);this.ctx.transform=this.ctx.transform.multiply(Et)},_.prototype.rotate=function(at){if(isNaN(at))throw Ui.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var kt=new c(Math.cos(at),Math.sin(at),-Math.sin(at),Math.cos(at),0,0);this.ctx.transform=this.ctx.transform.multiply(kt)},_.prototype.translate=function(at,kt){if(isNaN(at)||isNaN(kt))throw Ui.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Et=new c(1,0,0,1,at,kt);this.ctx.transform=this.ctx.transform.multiply(Et)},_.prototype.transform=function(at,kt,Et,Ft,Gt,le){if(isNaN(at)||isNaN(kt)||isNaN(Et)||isNaN(Ft)||isNaN(Gt)||isNaN(le))throw Ui.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ee=new c(at,kt,Et,Ft,Gt,le);this.ctx.transform=this.ctx.transform.multiply(ee)},_.prototype.setTransform=function(at,kt,Et,Ft,Gt,le){at=isNaN(at)?1:at,kt=isNaN(kt)?0:kt,Et=isNaN(Et)?0:Et,Ft=isNaN(Ft)?1:Ft,Gt=isNaN(Gt)?0:Gt,le=isNaN(le)?0:le,this.ctx.transform=new c(at,kt,Et,Ft,Gt,le)};var P=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};_.prototype.drawImage=function(at,kt,Et,Ft,Gt,le,ee,re,Qe){var Ne=this.pdf.getImageProperties(at),on=1,en=1,dn=1,pe=1;void 0!==Ft&&void 0!==re&&(dn=re/Ft,pe=Qe/Gt,on=Ne.width/Ft*re/Ft,en=Ne.height/Gt*Qe/Gt),void 0===le&&(le=kt,ee=Et,kt=0,Et=0),void 0!==Ft&&void 0===re&&(re=Ft,Qe=Gt),void 0===Ft&&void 0===re&&(re=Ne.width,Qe=Ne.height);for(var Pt,wn=this.ctx.transform.decompose(),gn=Wt(wn.rotate.shx),je=new c,Ge=(je=(je=(je=je.multiply(wn.translate)).multiply(wn.skew)).multiply(wn.scale)).applyToRectangle(new l(le-kt*dn,ee-Et*pe,Ft*on,Gt*en)),rn=U.call(this,Ge),Ve=[],Cn=0;Cn<rn.length;Cn+=1)-1===Ve.indexOf(rn[Cn])&&Ve.push(rn[Cn]);if(W(Ve),this.autoPaging)for(var Qn=Ve[0],Bn=Ve[Ve.length-1],ui=Qn;ui<Bn+1;ui++){this.pdf.setPage(ui);var Ci=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],uo=1===ui?this.posY+this.margin[0]:this.margin[0],vi=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],hn=1===ui?0:this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2]+(ui-2)*vi;if(0!==this.ctx.clip_path.length){var Sr=this.path;Pt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=B(Pt,this.posX+this.margin[3],-hn+uo+this.ctx.prevPageLastElemOffset),nt.call(this,"fill",!0),this.path=Sr}var zi=JSON.parse(JSON.stringify(Ge));zi=B([zi],this.posX+this.margin[3],-hn+uo+this.ctx.prevPageLastElemOffset)[0];var Wl=(ui>Qn||ui<Bn)&&P.call(this);Wl&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ci,vi,null).clip().discardPath()),this.pdf.addImage(at,"JPEG",zi.x,zi.y,zi.w,zi.h,null,null,gn),Wl&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(at,"JPEG",Ge.x,Ge.y,Ge.w,Ge.h,null,null,gn)};var U=function(at,kt,Et){var Ft=[];kt=kt||this.pdf.internal.pageSize.width,Et=Et||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Gt=this.posY+this.ctx.prevPageLastElemOffset;switch(at.type){default:case"mt":case"lt":Ft.push(Math.floor((at.y+Gt)/Et)+1);break;case"arc":Ft.push(Math.floor((at.y+Gt-at.radius)/Et)+1),Ft.push(Math.floor((at.y+Gt+at.radius)/Et)+1);break;case"qct":var le=oe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,at.x1,at.y1,at.x,at.y);Ft.push(Math.floor((le.y+Gt)/Et)+1),Ft.push(Math.floor((le.y+le.h+Gt)/Et)+1);break;case"bct":var ee=ne(this.ctx.lastPoint.x,this.ctx.lastPoint.y,at.x1,at.y1,at.x2,at.y2,at.x,at.y);Ft.push(Math.floor((ee.y+Gt)/Et)+1),Ft.push(Math.floor((ee.y+ee.h+Gt)/Et)+1);break;case"rect":Ft.push(Math.floor((at.y+Gt)/Et)+1),Ft.push(Math.floor((at.y+at.h+Gt)/Et)+1)}for(var re=0;re<Ft.length;re+=1)for(;this.pdf.internal.getNumberOfPages()<Ft[re];)q.call(this);return Ft},q=function(){var at=this.fillStyle,kt=this.strokeStyle,Et=this.font,Ft=this.lineCap,Gt=this.lineWidth,le=this.lineJoin;this.pdf.addPage(),this.fillStyle=at,this.strokeStyle=kt,this.font=Et,this.lineCap=Ft,this.lineWidth=Gt,this.lineJoin=le},B=function(at,kt,Et){for(var Ft=0;Ft<at.length;Ft++)switch(at[Ft].type){case"bct":at[Ft].x2+=kt,at[Ft].y2+=Et;case"qct":at[Ft].x1+=kt,at[Ft].y1+=Et;default:at[Ft].x+=kt,at[Ft].y+=Et}return at},W=function(at){return at.sort(function(kt,Et){return kt-Et})},G=function(at,kt){for(var Et,Ft,Gt=this.fillStyle,le=this.strokeStyle,ee=this.lineCap,re=this.lineWidth,Qe=Math.abs(re*this.ctx.transform.scaleX),Ne=this.lineJoin,on=JSON.parse(JSON.stringify(this.path)),en=JSON.parse(JSON.stringify(this.path)),dn=[],pe=0;pe<en.length;pe++)if(void 0!==en[pe].x)for(var Pt=U.call(this,en[pe]),wn=0;wn<Pt.length;wn+=1)-1===dn.indexOf(Pt[wn])&&dn.push(Pt[wn]);for(var gn=0;gn<dn.length;gn++)for(;this.pdf.internal.getNumberOfPages()<dn[gn];)q.call(this);if(W(dn),this.autoPaging)for(var je=dn[0],Ge=dn[dn.length-1],rn=je;rn<Ge+1;rn++){this.pdf.setPage(rn),this.fillStyle=Gt,this.strokeStyle=le,this.lineCap=ee,this.lineWidth=Qe,this.lineJoin=Ne;var Ve=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Cn=1===rn?this.posY+this.margin[0]:this.margin[0],Bn=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ui=1===rn?0:this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2]+(rn-2)*Bn;if(0!==this.ctx.clip_path.length){var Ci=this.path;Et=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=B(Et,this.posX+this.margin[3],-ui+Cn+this.ctx.prevPageLastElemOffset),nt.call(this,at,!0),this.path=Ci}if(Ft=JSON.parse(JSON.stringify(on)),this.path=B(Ft,this.posX+this.margin[3],-ui+Cn+this.ctx.prevPageLastElemOffset),!1===kt||0===rn){var uo=(rn>je||rn<Ge)&&P.call(this);uo&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ve,Bn,null).clip().discardPath()),nt.call(this,at,kt),uo&&this.pdf.restoreGraphicsState()}this.lineWidth=re}else this.lineWidth=Qe,nt.call(this,at,kt),this.lineWidth=re;this.path=on},nt=function(at,kt){if(("stroke"!==at||kt||!T.call(this))&&("stroke"===at||kt||!b.call(this))){for(var Et,Ft,Gt=[],le=this.path,ee=0;ee<le.length;ee++){var re=le[ee];switch(re.type){case"begin":Gt.push({begin:!0});break;case"close":Gt.push({close:!0});break;case"mt":Gt.push({start:re,deltas:[],abs:[]});break;case"lt":var Qe=Gt.length;if(le[ee-1]&&!isNaN(le[ee-1].x)&&(Et=[re.x-le[ee-1].x,re.y-le[ee-1].y],Qe>0))for(;Qe>=0;Qe--)if(!0!==Gt[Qe-1].close&&!0!==Gt[Qe-1].begin){Gt[Qe-1].deltas.push(Et),Gt[Qe-1].abs.push(re);break}break;case"bct":Gt[Gt.length-1].deltas.push(Et=[re.x1-le[ee-1].x,re.y1-le[ee-1].y,re.x2-le[ee-1].x,re.y2-le[ee-1].y,re.x-le[ee-1].x,re.y-le[ee-1].y]);break;case"qct":Gt[Gt.length-1].deltas.push(Et=[le[ee-1].x+2/3*(re.x1-le[ee-1].x)-le[ee-1].x,le[ee-1].y+2/3*(re.y1-le[ee-1].y)-le[ee-1].y,re.x+2/3*(re.x1-re.x)-le[ee-1].x,re.y+2/3*(re.y1-re.y)-le[ee-1].y,re.x-le[ee-1].x,re.y-le[ee-1].y]);break;case"arc":Gt.push({deltas:[],abs:[],arc:!0}),Array.isArray(Gt[Gt.length-1].abs)&&Gt[Gt.length-1].abs.push(re)}}Ft=kt?null:"stroke"===at?"stroke":"fill";for(var wn=!1,gn=0;gn<Gt.length;gn++)if(Gt[gn].arc)for(var je=Gt[gn].abs,Ge=0;Ge<je.length;Ge++){var rn=je[Ge];"arc"===rn.type?et.call(this,rn.x,rn.y,rn.radius,rn.startAngle,rn.endAngle,rn.counterclockwise,void 0,kt,!wn):Mt.call(this,rn.x,rn.y),wn=!0}else!0===Gt[gn].close?(this.pdf.internal.out("h"),wn=!1):!0!==Gt[gn].begin&&(It.call(this,Gt[gn].deltas,Gt[gn].start.x,Gt[gn].start.y),wn=!0);Ft&&vt.call(this,Ft),kt&&Nt.call(this)}},At=function(at){var kt=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Et=kt*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return at-Et;case"top":return at+kt-Et;case"hanging":return at+kt-2*Et;case"middle":return at+kt/2-Et;default:return at}},ut=function(at){return at+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};_.prototype.createLinearGradient=function(){var at=function(){};return at.colorStops=[],at.addColorStop=function(kt,Et){this.colorStops.push([kt,Et])},at.getColor=function(){return 0===this.colorStops.length?"#000000":this.colorStops[0][1]},at.isCanvasGradient=!0,at},_.prototype.createPattern=function(){return this.createLinearGradient()},_.prototype.createRadialGradient=function(){return this.createLinearGradient()};var et=function(at,kt,Et,Ft,Gt,le,ee,re,Qe){for(var Ne=Vt.call(this,Et,Ft,Gt,le),on=0;on<Ne.length;on++){var en=Ne[on];0===on&&(Qe?ot.call(this,en.x1+at,en.y1+kt):Mt.call(this,en.x1+at,en.y1+kt)),Tt.call(this,at,kt,en.x2,en.y2,en.x3,en.y3,en.x4,en.y4)}re?Nt.call(this):vt.call(this,ee)},vt=function(at){switch(at){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},Nt=function(){this.pdf.clip(),this.pdf.discardPath()},ot=function(at,kt){this.pdf.internal.out(e(at)+" "+i(kt)+" m")},_t=function(at){var kt;switch(at.align){case"right":case"end":kt="right";break;case"center":kt="center";break;default:kt="left"}var Et=this.pdf.getTextDimensions(at.text),Ft=At.call(this,at.y),Gt=ut.call(this,Ft)-Et.h,le=this.ctx.transform.applyToPoint(new s(at.x,Ft)),ee=this.ctx.transform.decompose(),re=new c;re=(re=(re=re.multiply(ee.translate)).multiply(ee.skew)).multiply(ee.scale);for(var Qe,Ne,on,en=this.ctx.transform.applyToRectangle(new l(at.x,Ft,Et.w,Et.h)),dn=re.applyToRectangle(new l(at.x,Gt,Et.w,Et.h)),pe=U.call(this,dn),Pt=[],wn=0;wn<pe.length;wn+=1)-1===Pt.indexOf(pe[wn])&&Pt.push(pe[wn]);if(W(Pt),this.autoPaging)for(var gn=Pt[0],je=Pt[Pt.length-1],Ge=gn;Ge<je+1;Ge++){this.pdf.setPage(Ge);var rn=1===Ge?this.posY+this.margin[0]:this.margin[0],Cn=this.pdf.internal.pageSize.height-this.margin[2],Qn=Cn-this.margin[0],Bn=this.pdf.internal.pageSize.width-this.margin[1],ui=Bn-this.margin[3],Ci=1===Ge?0:this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2]+(Ge-2)*Qn;if(0!==this.ctx.clip_path.length){var uo=this.path;Qe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=B(Qe,this.posX+this.margin[3],-1*Ci+rn),nt.call(this,"fill",!0),this.path=uo}var Un=B([JSON.parse(JSON.stringify(dn))],this.posX+this.margin[3],-Ci+rn+this.ctx.prevPageLastElemOffset)[0];at.scale>=.01&&(Ne=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ne*at.scale),this.lineWidth=(on=this.lineWidth)*at.scale);var vi="text"!==this.autoPaging;if(vi||Un.y+Un.h<=Cn){if(vi||Un.y>=rn&&Un.x<=Bn){var hn=vi?at.text:this.pdf.splitTextToSize(at.text,at.maxWidth||Bn-Un.x)[0],Sr=B([JSON.parse(JSON.stringify(en))],this.posX+this.margin[3],-Ci+rn+this.ctx.prevPageLastElemOffset)[0],zi=vi&&(Ge>gn||Ge<je)&&P.call(this);zi&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ui,Qn,null).clip().discardPath()),this.pdf.text(hn,Sr.x,Sr.y,{angle:at.angle,align:kt,renderingMode:at.renderingMode}),zi&&this.pdf.restoreGraphicsState()}}else Un.y<Cn&&(this.ctx.prevPageLastElemOffset+=Cn-Un.y);at.scale>=.01&&(this.pdf.setFontSize(Ne),this.lineWidth=on)}else at.scale>=.01&&(Ne=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ne*at.scale),this.lineWidth=(on=this.lineWidth)*at.scale),this.pdf.text(at.text,le.x+this.posX,le.y+this.posY,{angle:at.angle,align:kt,renderingMode:at.renderingMode,maxWidth:at.maxWidth}),at.scale>=.01&&(this.pdf.setFontSize(Ne),this.lineWidth=on)},Mt=function(at,kt,Et,Ft){Ft=Ft||0,this.pdf.internal.out(e(at+(Et=Et||0))+" "+i(kt+Ft)+" l")},It=function(at,kt,Et){return this.pdf.lines(at,kt,Et,null,null)},Tt=function(at,kt,Et,Ft,Gt,le,ee,re){this.pdf.internal.out([o(a(Et+at)),o(r(Ft+kt)),o(a(Gt+at)),o(r(le+kt)),o(a(ee+at)),o(r(re+kt)),"c"].join(" "))},Vt=function(at,kt,Et,Ft){for(var Gt=2*Math.PI,le=Math.PI/2;kt>Et;)kt-=Gt;var ee=Math.abs(Et-kt);ee<Gt&&Ft&&(ee=Gt-ee);for(var re=[],Qe=Ft?-1:1,Ne=kt;ee>1e-5;){var on=Ne+Qe*Math.min(ee,le);re.push(ie.call(this,at,Ne,on)),ee-=Math.abs(on-Ne),Ne=on}return re},ie=function(at,kt,Et){var Ft=(Et-kt)/2,Gt=at*Math.cos(Ft),le=at*Math.sin(Ft),ee=Gt,re=-le,Qe=ee*ee+re*re,Ne=Qe+ee*Gt+re*le,on=4/3*(Math.sqrt(2*Qe*Ne)-Ne)/(ee*le-re*Gt),en=ee-on*re,dn=re+on*ee,pe=en,Pt=-dn,wn=Ft+kt,gn=Math.cos(wn),je=Math.sin(wn);return{x1:at*Math.cos(kt),y1:at*Math.sin(kt),x2:en*gn-dn*je,y2:en*je+dn*gn,x3:pe*gn-Pt*je,y3:pe*je+Pt*gn,x4:at*Math.cos(Et),y4:at*Math.sin(Et)}},Wt=function(at){return 180*at/Math.PI},oe=function(at,kt,Et,Ft,Gt,le){var ee=at+.5*(Et-at),re=kt+.5*(Ft-kt),Qe=Gt+.5*(Et-Gt),Ne=le+.5*(Ft-le),on=Math.min(at,Gt,ee,Qe),en=Math.max(at,Gt,ee,Qe),dn=Math.min(kt,le,re,Ne),pe=Math.max(kt,le,re,Ne);return new l(on,dn,en-on,pe-dn)},ne=function(at,kt,Et,Ft,Gt,le,ee,re){var Qe,Ne,on,en,dn,pe,Pt,wn,gn,je,Ge,rn,Ve,Cn,Qn=Et-at,Bn=Ft-kt,ui=Gt-Et,Ci=le-Ft,uo=ee-Gt,Un=re-le;for(Ne=0;Ne<41;Ne++)gn=(Pt=(on=at+(Qe=Ne/40)*Qn)+Qe*((dn=Et+Qe*ui)-on))+Qe*(dn+Qe*(Gt+Qe*uo-dn)-Pt),je=(wn=(en=kt+Qe*Bn)+Qe*((pe=Ft+Qe*Ci)-en))+Qe*(pe+Qe*(le+Qe*Un-pe)-wn),0==Ne?(Ge=gn,rn=je,Ve=gn,Cn=je):(Ge=Math.min(Ge,gn),rn=Math.min(rn,je),Ve=Math.max(Ve,gn),Cn=Math.max(Cn,je));return new l(Math.round(Ge),Math.round(rn),Math.round(Ve-Ge),Math.round(Cn-rn))},we=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var Et=JSON.stringify({lineDash:this.ctx.lineDash,lineDashOffset:this.ctx.lineDashOffset});this.prevLineDash!==Et&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Et)}}})(On.API),
/**
       * @license
       * jsPDF filters PlugIn
       * Copyright (c) 2014 Aras Abbasi
       *
       * Licensed under the MIT License.
       * http://opensource.org/licenses/mit-license
       */
function(n){var o=function(r){var s,l,c,d,h,_,x,b,T,P;for(/[^\x00-\xFF]/.test(r),l=[],c=0,d=(r+=s="\0\0\0\0".slice(r.length%4||4)).length;d>c;c+=4)0!==(h=(r.charCodeAt(c)<<24)+(r.charCodeAt(c+1)<<16)+(r.charCodeAt(c+2)<<8)+r.charCodeAt(c+3))?(_=(h=((h=((h=((h=(h-(P=h%85))/85)-(T=h%85))/85)-(b=h%85))/85)-(x=h%85))/85)%85,l.push(_+33,x+33,b+33,T+33,P+33)):l.push(122);return function(U,q){for(var B=q;B>0;B--)U.pop()}(l,s.length),String.fromCharCode.apply(String,l)+"~>"},e=function(r){var s,l,c,d,h,_=String,x="length",b=255,T="charCodeAt",P="slice",U="replace";for(r[P](-2),r=r[P](0,-2)[U](/\s/g,"")[U]("z","!!!!!"),c=[],d=0,h=(r+=s="uuuuu"[P](r[x]%5||5))[x];h>d;d+=5)l=52200625*(r[T](d)-33)+614125*(r[T](d+1)-33)+7225*(r[T](d+2)-33)+85*(r[T](d+3)-33)+(r[T](d+4)-33),c.push(b&l>>24,b&l>>16,b&l>>8,b&l);return function(q,B){for(var W=B;W>0;W--)q.pop()}(c,s[x]),_.fromCharCode.apply(_,c)},i=function(r){var s=new RegExp(/^([0-9A-Fa-f]{2})+$/);if(-1!==(r=r.replace(/\s/g,"")).indexOf(">")&&(r=r.substr(0,r.indexOf(">"))),r.length%2&&(r+="0"),!1===s.test(r))return"";for(var l="",c=0;c<r.length;c+=2)l+=String.fromCharCode("0x"+(r[c]+r[c+1]));return l},a=function(r){for(var s=new Uint8Array(r.length),l=r.length;l--;)s[l]=r.charCodeAt(l);return(s=Ei(s)).reduce(function(c,d){return c+String.fromCharCode(d)},"")};n.processDataByFilters=function(r,s){var l=0,c=r||"",d=[];for("string"==typeof(s=s||[])&&(s=[s]),l=0;l<s.length;l+=1)switch(s[l]){case"ASCII85Decode":case"/ASCII85Decode":c=e(c),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=o(c),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=i(c),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map(function(h){return("0"+h.charCodeAt().toString(16)).slice(-2)}).join("")+">",d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=a(c),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+s[l]+'" is not implemented')}return{data:c,reverseChain:d.reverse().join(" ")}}}(On.API),
/**
       * @license
       * jsPDF fileloading PlugIn
       * Copyright (c) 2018 Aras Abbasi (aras.abbasi@gmail.com)
       *
       * Licensed under the MIT License.
       * http://opensource.org/licenses/mit-license
       */
function(n){n.loadFile=function(o,e,i){return function(a,r,s){r=!1!==r,s="function"==typeof s?s:function(){};var l=void 0;try{l=function(c,d,h){var _=new XMLHttpRequest,x=0,b=function(T){var P=T.length,U=[],q=String.fromCharCode;for(x=0;x<P;x+=1)U.push(q(255&T.charCodeAt(x)));return U.join("")};if(_.open("GET",c,!d),_.overrideMimeType("text/plain; charset=x-user-defined"),!1===d&&(_.onload=function(){h(200===_.status?b(this.responseText):void 0)}),_.send(null),d&&200===_.status)return b(_.responseText)}(a,r,s)}catch{}return l}(o,e,i)},n.loadImageFile=n.loadFile}(On.API),function(n){function o(){return(Dn.html2canvas?Promise.resolve(Dn.html2canvas):M.e(4456).then(M.t.bind(M,74456,23))).catch(function(s){return Promise.reject(new Error("Could not load html2canvas: "+s))}).then(function(s){return s.default?s.default:s})}function e(){return(Dn.DOMPurify?Promise.resolve(Dn.DOMPurify):M.e(695).then(M.t.bind(M,60695,23))).catch(function(s){return Promise.reject(new Error("Could not load dompurify: "+s))}).then(function(s){return s.default?s.default:s})}var i=function(s){var l=(0,Ni.Z)(s);return"undefined"===l?"undefined":"string"===l||s instanceof String?"string":"number"===l||s instanceof Number?"number":"function"===l||s instanceof Function?"function":s&&s.constructor===Array?"array":s&&1===s.nodeType?"element":"object"===l?"object":"unknown"},a=function(s,l){var c=document.createElement(s);for(var d in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[d]=l.style[d];return c},r=function s(l){var c=Object.assign(s.convert(Promise.resolve()),JSON.parse(JSON.stringify(s.template))),d=s.convert(Promise.resolve(),c);return(d=d.setProgress(1,s,1,[s])).set(l)};(r.prototype=Object.create(Promise.prototype)).constructor=r,r.convert=function(s,l){return s.__proto__=l||r.prototype,s},r.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},r.prototype.from=function(s,l){return this.then(function(){switch(l=l||function(c){switch(i(c)){case"string":return"string";case"element":return"canvas"===c.nodeName.toLowerCase()?"canvas":"element";default:return"unknown"}}(s)){case"string":return this.then(e).then(function(c){return this.set({src:a("div",{innerHTML:s,dompurify:c})})});case"element":return this.set({src:s});case"canvas":return this.set({canvas:s});case"img":return this.set({img:s});default:return this.error("Unknown source type.")}})},r.prototype.to=function(s){switch(s){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},r.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var s={position:"relative",display:"inline-block",width:("number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=function c(d,h){for(var _=3===d.nodeType?document.createTextNode(d.nodeValue):d.cloneNode(!1),x=d.firstChild;x;x=x.nextSibling)!0!==h&&1===x.nodeType&&"SCRIPT"===x.nodeName||_.appendChild(c(x,h));return 1===d.nodeType&&("CANVAS"===d.nodeName?(_.width=d.width,_.height=d.height,_.getContext("2d").drawImage(d,0,0)):"TEXTAREA"!==d.nodeName&&"SELECT"!==d.nodeName||(_.value=d.value),_.addEventListener("load",function(){_.scrollTop=d.scrollTop,_.scrollLeft=d.scrollLeft},!0)),_}(this.prop.src,this.opt.html2canvas.javascriptEnabled);"BODY"===l.tagName&&(s.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:s}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},r.prototype.toCanvas=function(){return this.thenList([function(){return document.body.contains(this.prop.container)||this.toContainer()}]).then(o).then(function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},r.prototype.toContext2d=function(){return this.thenList([function(){return document.body.contains(this.prop.container)||this.toContainer()}]).then(o).then(function(l){var c=this.opt.jsPDF,d=this.opt.fontFaces,h="number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,_=Object.assign({async:!0,allowTaint:!0,scale:h,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete _.onrendered,c.context2d.autoPaging=void 0===this.opt.autoPaging||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=d,d)for(var x=0;x<d.length;++x){var b=d[x],T=b.src.find(function(P){return"truetype"===P.format});T&&c.addFont(T.url,b.ref.name,b.ref.style)}return _.windowHeight=_.windowHeight||0,_.windowHeight=0==_.windowHeight?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):_.windowHeight,c.context2d.save(!0),l(this.prop.container,_)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},r.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var s=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=s})},r.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},r.prototype.output=function(s,l,c){return"img"===(c=c||"pdf").toLowerCase()||"image"===c.toLowerCase()?this.outputImg(s,l):this.outputPdf(s,l)},r.prototype.outputPdf=function(s,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(s,l)})},r.prototype.outputImg=function(s){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(s){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+s+'" is not supported.'}})},r.prototype.save=function(s){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(s?{filename:s}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},r.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},r.prototype.set=function(s){if("object"!==i(s))return this;var l=Object.keys(s||{}).map(function(c){if(c in r.template.prop)return function(){this.prop[c]=s[c]};switch(c){case"margin":return this.setMargin.bind(this,s.margin);case"jsPDF":return function(){return this.opt.jsPDF=s.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,s.pageSize);default:return function(){this.opt[c]=s[c]}}},this);return this.then(function(){return this.thenList(l)})},r.prototype.get=function(s,l){return this.then(function(){var c=s in r.template.prop?this.prop[s]:this.opt[s];return l?l(c):c})},r.prototype.setMargin=function(s){return this.then(function(){switch(i(s)){case"number":s=[s,s,s,s];case"array":if(2===s.length&&(s=[s[0],s[1],s[0],s[1]]),4===s.length)break;default:return this.error("Invalid margin array.")}this.opt.margin=s}).then(this.setPageSize)},r.prototype.setPageSize=function(s){function l(c,d){return Math.floor(c*d/72*96)}return this.then(function(){(s=s||On.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(s.inner={width:s.width-this.opt.margin[1]-this.opt.margin[3],height:s.height-this.opt.margin[0]-this.opt.margin[2]},s.inner.px={width:l(s.inner.width,s.k),height:l(s.inner.height,s.k)},s.inner.ratio=s.inner.height/s.inner.width),this.prop.pageSize=s})},r.prototype.setProgress=function(s,l,c,d){return null!=s&&(this.progress.val=s),null!=l&&(this.progress.state=l),null!=c&&(this.progress.n=c),null!=d&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},r.prototype.updateProgress=function(s,l,c,d){return this.setProgress(s?this.progress.val+s:null,l||null,c?this.progress.n+c:null,d?this.progress.stack.concat(d):null)},r.prototype.then=function(s,l){var c=this;return this.thenCore(s,l,function(d,h){return c.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(_){return c.updateProgress(null,d),_}).then(d,h).then(function(_){return c.updateProgress(1),_})})},r.prototype.thenCore=function(s,l,c){c=c||Promise.prototype.then,s&&(s=s.bind(this)),l&&(l=l.bind(this));var d=-1!==Promise.toString().indexOf("[native code]")&&"Promise"===Promise.name?this:r.convert(Object.assign({},this),Promise.prototype),h=c.call(d,s,l);return r.convert(h,this.__proto__)},r.prototype.thenExternal=function(s,l){return Promise.prototype.then.call(this,s,l)},r.prototype.thenList=function(s){var l=this;return s.forEach(function(c){l=l.thenCore(c)}),l},r.prototype.catch=function(s){s&&(s=s.bind(this));var l=Promise.prototype.catch.call(this,s);return r.convert(l,this)},r.prototype.catchExternal=function(s){return Promise.prototype.catch.call(this,s)},r.prototype.error=function(s){return this.then(function(){throw new Error(s)})},r.prototype.using=r.prototype.set,r.prototype.saveAs=r.prototype.save,r.prototype.export=r.prototype.output,r.prototype.run=r.prototype.then,On.getPageSize=function(s,l,c){if("object"===(0,Ni.Z)(s)){var d=s;s=d.orientation,l=d.unit||l,c=d.format||c}l=l||"mm",c=c||"a4",s=(""+(s||"P")).toLowerCase();var h,_=(""+c).toLowerCase(),x={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":h=1;break;case"mm":h=72/25.4;break;case"cm":h=72/2.54;break;case"in":h=72;break;case"px":h=.75;break;case"pc":case"em":h=12;break;case"ex":h=6;break;default:throw"Invalid unit: "+l}var b,T=0,P=0;if(x.hasOwnProperty(_))T=x[_][1]/h,P=x[_][0]/h;else try{T=c[1],P=c[0]}catch{throw new Error("Invalid format: "+c)}if("p"===s||"portrait"===s)s="p",P>T&&(b=P,P=T,T=b);else{if("l"!==s&&"landscape"!==s)throw"Invalid orientation: "+s;s="l",T>P&&(b=P,P=T,T=b)}return{width:P,height:T,unit:l,k:h,orientation:s}},n.html=function(s,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(G_):null;var c=new r(l);return l.worker?c:c.from(s).doCallback()}}(On.API),On.API.addJS=function(n){return T1=n,this.internal.events.subscribe("postPutResources",function(){qh=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(qh+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Y_=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+T1+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){void 0!==qh&&void 0!==Y_&&this.internal.out("/Names <</JavaScript "+qh+" 0 R>>")}),this},
/**
       * @license
       * Copyright (c) 2014 Steven Spungin (TwelveTone LLC)  steven@twelvetone.tv
       *
       * Licensed under the MIT License.
       * http://opensource.org/licenses/mit-license
       */
function(n){var o;n.events.push(["postPutResources",function(){var e=this,i=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=e.outline.render().split(/\r\n/),r=0;r<a.length;r++){var s=a[r],l=i.exec(s);null!=l&&e.internal.newObjectDeferredBegin(l[1],!1),e.internal.write(s)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,h=[];for(r=0;r<d;r++){var _=e.internal.newObject();h.push(_);var x=e.internal.getPageInfo(r+1);e.internal.write("<< /D["+x.objId+" 0 R /XYZ null null null]>> endobj")}var b=e.internal.newObject();for(e.internal.write("<< /Names [ "),r=0;r<h.length;r++)e.internal.write("(page_"+(r+1)+")"+h[r]+" 0 R");e.internal.write(" ] >>","endobj"),o=e.internal.newObject(),e.internal.write("<< /Dests "+b+" 0 R"),e.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+o+" 0 R"))}]),n.events.push(["initialized",function(){var e=this;e.outline={createNamedDestinations:!1,root:{children:[]}},e.outline.add=function(i,a,r){var s={title:a,options:r,children:[]};return null==i&&(i=this.root),i.children.push(s),s},e.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=e,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},e.outline.genIds_r=function(i){i.id=e.internal.newObjectDeferred();for(var a=0;a<i.children.length;a++)this.genIds_r(i.children[a])},e.outline.renderRoot=function(i){this.objStart(i),this.line("/Type /Outlines"),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1]))),this.line("/Count "+this.count_r({count:0},i)),this.objEnd()},e.outline.renderItems=function(i){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,r=0;r<i.children.length;r++){var s=i.children[r];this.objStart(s),this.line("/Title "+this.makeString(s.title)),this.line("/Parent "+this.makeRef(i)),r>0&&this.line("/Prev "+this.makeRef(i.children[r-1])),r<i.children.length-1&&this.line("/Next "+this.makeRef(i.children[r+1])),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1])));var l=this.count=this.count_r({count:0},s);if(l>0&&this.line("/Count "+l),s.options&&s.options.pageNumber){var c=e.internal.getPageInfo(s.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var d=0;d<i.children.length;d++)this.renderItems(i.children[d])},e.outline.line=function(i){this.ctx.val+=i+"\r\n"},e.outline.makeRef=function(i){return i.id+" 0 R"},e.outline.makeString=function(i){return"("+e.internal.pdfEscape(i)+")"},e.outline.objStart=function(i){this.ctx.val+="\r\n"+i.id+" 0 obj\r\n<<\r\n"},e.outline.objEnd=function(){this.ctx.val+=">> \r\nendobj\r\n"},e.outline.count_r=function(i,a){for(var r=0;r<a.children.length;r++)i.count++,this.count_r(i,a.children[r]);return i.count}}])}(On.API),
/**
       * @license
       *
       * Licensed under the MIT License.
       * http://opensource.org/licenses/mit-license
       */
function(n){var o=[192,193,194,195,196,197,198,199];n.processJPEG=function(e,i,a,r,s,l){var c,d=this.decode.DCT_DECODE,h=null;if("string"==typeof e||this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e)){switch(e=this.__addimage__.isArrayBuffer(e=s||e)?new Uint8Array(e):e,(c=function(_){for(var x,b=256*_.charCodeAt(4)+_.charCodeAt(5),T=_.length,P={width:0,height:0,numcomponents:1},U=4;U<T;U+=2){if(-1!==o.indexOf(_.charCodeAt((U+=b)+1))){x=256*_.charCodeAt(U+5)+_.charCodeAt(U+6),P={width:256*_.charCodeAt(U+7)+_.charCodeAt(U+8),height:x,numcomponents:_.charCodeAt(U+9)};break}b=256*_.charCodeAt(U+2)+_.charCodeAt(U+3)}return P}(e=this.__addimage__.isArrayBufferView(e)?this.__addimage__.arrayBufferToBinaryString(e):e)).numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}h={data:e,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:d,index:i,alias:a}}return h}}(On.API);var Sc,il,Zr,k1,K_,A1=function(){var n,o,e;function i(r){var s,c,d,h,_,x,b,T,P,U,q,B,W;for(this.data=r,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},_=null;;){switch(s=this.readUInt32(),T=function(){var G,nt;for(nt=[],G=0;G<4;++G)nt.push(String.fromCharCode(this.data[this.pos++]));return nt}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(s);break;case"fcTL":_&&this.animation.frames.push(_),this.pos+=4,_={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},h=this.readUInt16(),d=this.readUInt16()||100,_.delay=1e3*h/d,_.disposeOp=this.data[this.pos++],_.blendOp=this.data[this.pos++],_.data=[];break;case"IDAT":case"fdAT":for("fdAT"===T&&(this.pos+=4,s-=4),r=_?.data||this.imgData,q=0;0<=s?q<s:q>s;0<=s?++q:--q)r.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(s),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((P=c-this.transparency.indexed.length)>0)for(B=0;0<=P?B<P:B>P;0<=P?++B:--B)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(s)[0];break;case 2:this.transparency.rgb=this.read(s)}break;case"tEXt":x=(U=this.read(s)).indexOf(0),b=String.fromCharCode.apply(String,U.slice(0,x)),this.text[b]=String.fromCharCode.apply(String,U.slice(x+1));break;case"IEND":return _&&this.animation.frames.push(_),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=4===(W=this.colorType)||6===W,this.pixelBitlength=this.bits*(this.colors+(this.hasAlphaChannel?1:0)),this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=s}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}i.prototype.read=function(r){var s,l;for(l=[],s=0;0<=r?s<r:s>r;0<=r?++s:--s)l.push(this.data[this.pos++]);return l},i.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.decodePixels=function(r){var s=this.pixelBitlength/8,l=new Uint8Array(this.width*this.height*s),c=0,d=this;if(null==r&&(r=this.imgData),0===r.length)return new Uint8Array(0);function h(_,x,b,T){var P,U,q,B,W,G,nt,At,et,vt,Nt,ot,_t,Mt,It,Tt,Vt,ie,Wt,oe,ne=Math.ceil((d.width-_)/b),we=Math.ceil((d.height-x)/T),at=d.width==ne&&d.height==we;for(_t=s*ne,Nt=at?l:new Uint8Array(_t*we),G=r.length,ot=0,U=0;ot<we&&c<G;){switch(r[c++]){case 0:for(B=Tt=0;Tt<_t;B=Tt+=1)Nt[U++]=r[c++];break;case 1:for(B=Vt=0;Vt<_t;B=Vt+=1)P=r[c++],W=B<s?0:Nt[U-s],Nt[U++]=(P+W)%256;break;case 2:for(B=ie=0;ie<_t;B=ie+=1)P=r[c++],q=(B-B%s)/s,Nt[U++]=((Mt=ot&&Nt[(ot-1)*_t+q*s+B%s])+P)%256;break;case 3:for(B=Wt=0;Wt<_t;B=Wt+=1)P=r[c++],q=(B-B%s)/s,W=B<s?0:Nt[U-s],Mt=ot&&Nt[(ot-1)*_t+q*s+B%s],Nt[U++]=(P+Math.floor((W+Mt)/2))%256;break;case 4:for(B=oe=0;oe<_t;B=oe+=1)P=r[c++],q=(B-B%s)/s,0===ot?Mt=It=0:(Mt=Nt[(ot-1)*_t+q*s+B%s],It=q&&Nt[(ot-1)*_t+(q-1)*s+B%s]),nt=(W=B<s?0:Nt[U-s])+Mt-It,At=Math.abs(nt-W),et=Math.abs(nt-Mt),vt=Math.abs(nt-It),Nt[U++]=(P+(At<=et&&At<=vt?W:et<=vt?Mt:It))%256;break;default:throw new Error("Invalid filter algorithm: "+r[c-1])}if(!at){var kt=((x+ot*T)*d.width+_)*s,Et=ot*_t;for(B=0;B<ne;B+=1){for(var Ft=0;Ft<s;Ft+=1)l[kt++]=Nt[Et++];kt+=(b-1)*s}}ot++}}return r=Dt(r),1==d.interlaceMethod?(h(0,0,8,8),h(4,0,8,8),h(0,4,4,8),h(2,0,4,4),h(0,2,2,4),h(1,0,2,2),h(0,1,1,2)):h(0,0,1,1),l},i.prototype.decodePalette=function(){var r,s,l,c,d,h,_,x,b;for(l=this.palette,h=this.transparency.indexed||[],d=new Uint8Array((h.length||0)+l.length),c=0,r=0,s=_=0,x=l.length;_<x;s=_+=3)d[c++]=l[s],d[c++]=l[s+1],d[c++]=l[s+2],d[c++]=null!=(b=h[r++])?b:255;return d},i.prototype.copyToImageData=function(r,s){var l,c,d,h,_,x,b,T,P,U,q;if(c=this.colors,P=null,l=this.hasAlphaChannel,this.palette.length&&(P=null!=(q=this._decodedPalette)?q:this._decodedPalette=this.decodePalette(),c=4,l=!0),T=(d=r.data||r).length,_=P||s,h=x=0,1===c)for(;h<T;)b=P?4*s[h/4]:x,U=_[b++],d[h++]=U,d[h++]=U,d[h++]=U,d[h++]=l?_[b++]:255,x=b;else for(;h<T;)b=P?4*s[h/4]:x,d[h++]=_[b++],d[h++]=_[b++],d[h++]=_[b++],d[h++]=l?_[b++]:255,x=b},i.prototype.decode=function(){var r;return r=new Uint8Array(this.width*this.height*4),this.copyToImageData(r,this.decodePixels()),r};var a=function(){if("[object Window]"===Object.prototype.toString.call(Dn)){try{o=Dn.document.createElement("canvas"),e=o.getContext("2d")}catch{return!1}return!0}return!1};return a(),n=function(r){var s;if(!0===a())return e.width=r.width,e.height=r.height,e.clearRect(0,0,r.width,r.height),e.putImageData(r,0,0),(s=new Image).src=o.toDataURL(),s;throw new Error("This method requires a Browser with Canvas-capability.")},i.prototype.decodeFrames=function(r){var s,l,c,d,h,_,x,b;if(this.animation){for(b=[],l=h=0,_=(x=this.animation.frames).length;h<_;l=++h)c=r.createImageData((s=x[l]).width,s.height),d=this.decodePixels(new Uint8Array(s.data)),this.copyToImageData(c,d),s.imageData=c,b.push(s.image=n(c));return b}},i.prototype.renderFrame=function(r,s){var l,c,d;return l=(c=this.animation.frames)[s],d=c[s-1],0===s&&r.clearRect(0,0,this.width,this.height),1===d?.disposeOp?r.clearRect(d.xOffset,d.yOffset,d.width,d.height):2===d?.disposeOp&&r.putImageData(d.imageData,d.xOffset,d.yOffset),0===l.blendOp&&r.clearRect(l.xOffset,l.yOffset,l.width,l.height),r.drawImage(l.image,l.xOffset,l.yOffset)},i.prototype.animate=function(r){var s,l,c,d,h,_,x=this;return l=0,d=(_=this.animation).numFrames,c=_.frames,h=_.numPlays,(s=function(){var b,T;if(b=l++%d,T=c[b],x.renderFrame(r,b),d>1&&l/d<h)return x.animation._timeout=setTimeout(s,T.delay)})()},i.prototype.stopAnimation=function(){var r;return clearTimeout(null!=(r=this.animation)?r._timeout:void 0)},i.prototype.render=function(r){var s,l;return r._png&&r._png.stopAnimation(),r._png=this,r.width=this.width,r.height=this.height,s=r.getContext("2d"),this.animation?(this.decodeFrames(s),this.animate(s)):(l=s.createImageData(this.width,this.height),this.copyToImageData(l,this.decodePixels()),s.putImageData(l,0,0))},i}();function xm(n){var o=0;if(71!==n[o++]||73!==n[o++]||70!==n[o++]||56!==n[o++]||56!=(n[o++]+1&253)||97!==n[o++])throw new Error("Invalid GIF 87a/89a header.");var e=n[o++]|n[o++]<<8,i=n[o++]|n[o++]<<8,a=n[o++],s=1<<1+(7&a);o++,o++;var l=null,c=null;a>>7&&(l=o,c=s,o+=3*s);var d=!0,h=[],_=0,x=null,b=0,T=null;for(this.width=e,this.height=i;d&&o<n.length;)switch(n[o++]){case 33:switch(n[o++]){case 255:if(11!==n[o]||78==n[o+1]&&69==n[o+2]&&84==n[o+3]&&83==n[o+4]&&67==n[o+5]&&65==n[o+6]&&80==n[o+7]&&69==n[o+8]&&50==n[o+9]&&46==n[o+10]&&48==n[o+11]&&3==n[o+12]&&1==n[o+13]&&0==n[o+16])o+=14,T=n[o++]|n[o++]<<8,o++;else for(o+=12;;){if(!((ot=n[o++])>=0))throw Error("Invalid block size");if(0===ot)break;o+=ot}break;case 249:if(4!==n[o++]||0!==n[o+4])throw new Error("Invalid graphics extension block.");var P=n[o++];_=n[o++]|n[o++]<<8,x=n[o++],!(1&P)&&(x=null),b=P>>2&7,o++;break;case 254:for(;;){if(!((ot=n[o++])>=0))throw Error("Invalid block size");if(0===ot)break;o+=ot}break;default:throw new Error("Unknown graphic control label: 0x"+n[o-1].toString(16))}break;case 44:var U=n[o++]|n[o++]<<8,q=n[o++]|n[o++]<<8,B=n[o++]|n[o++]<<8,W=n[o++]|n[o++]<<8,G=n[o++],nt=G>>6&1,At=1<<1+(7&G),ut=l,et=c,vt=!1;G>>7&&(vt=!0,ut=o,et=At,o+=3*At);var Nt=o;for(o++;;){var ot;if(!((ot=n[o++])>=0))throw Error("Invalid block size");if(0===ot)break;o+=ot}h.push({x:U,y:q,width:B,height:W,has_local_palette:vt,palette_offset:ut,palette_size:et,data_offset:Nt,data_length:o-Nt,transparent_index:x,interlaced:!!nt,delay:_,disposal:b});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+n[o-1].toString(16))}this.numFrames=function(){return h.length},this.loopCount=function(){return T},this.frameInfo=function(_t){if(_t<0||_t>=h.length)throw new Error("Frame index out of range.");return h[_t]},this.decodeAndBlitFrameBGRA=function(_t,Mt){var It=this.frameInfo(_t),Tt=It.width*It.height,Vt=new Uint8Array(Tt);Zl(n,It.data_offset,Vt,Tt);var ie=It.palette_offset,Wt=It.transparent_index;null===Wt&&(Wt=256);var oe=It.width,ne=e-oe,we=oe,at=4*(It.y*e+It.x),kt=4*((It.y+It.height)*e+It.x),Et=at,Ft=4*ne;!0===It.interlaced&&(Ft+=4*e*7);for(var Gt=8,le=0,ee=Vt.length;le<ee;++le){var re=Vt[le];if(0===we&&(we=oe,(Et+=Ft)>=kt&&(Ft=4*ne+4*e*(Gt-1),Et=at+(oe+ne)*(Gt<<1),Gt>>=1)),re===Wt)Et+=4;else{var Qe=n[ie+3*re],Ne=n[ie+3*re+1];Mt[Et++]=n[ie+3*re+2],Mt[Et++]=Ne,Mt[Et++]=Qe,Mt[Et++]=255}--we}},this.decodeAndBlitFrameRGBA=function(_t,Mt){var It=this.frameInfo(_t),Tt=It.width*It.height,Vt=new Uint8Array(Tt);Zl(n,It.data_offset,Vt,Tt);var ie=It.palette_offset,Wt=It.transparent_index;null===Wt&&(Wt=256);var oe=It.width,ne=e-oe,we=oe,at=4*(It.y*e+It.x),kt=4*((It.y+It.height)*e+It.x),Et=at,Ft=4*ne;!0===It.interlaced&&(Ft+=4*e*7);for(var Gt=8,le=0,ee=Vt.length;le<ee;++le){var re=Vt[le];if(0===we&&(we=oe,(Et+=Ft)>=kt&&(Ft=4*ne+4*e*(Gt-1),Et=at+(oe+ne)*(Gt<<1),Gt>>=1)),re===Wt)Et+=4;else{var Ne=n[ie+3*re+1],on=n[ie+3*re+2];Mt[Et++]=n[ie+3*re],Mt[Et++]=Ne,Mt[Et++]=on,Mt[Et++]=255}--we}}}function Zl(n,o,e,i){for(var a=n[o++],r=1<<a,s=r+1,l=s+1,c=a+1,d=(1<<c)-1,h=0,_=0,x=0,b=n[o++],T=new Int32Array(4096),P=null;;){for(;h<16&&0!==b;)_|=n[o++]<<h,h+=8,1===b?b=n[o++]:--b;if(h<c)break;var U=_&d;if(_>>=c,h-=c,U!==r){if(U===s)break;for(var q=U<l?U:P,B=0,W=q;W>r;)W=T[W]>>8,++B;var G=W;if(x+B+(q!==U?1:0)>i)return void Ui.log("Warning, gif stream longer than expected.");e[x++]=G;var nt=x+=B;for(q!==U&&(e[x++]=G),W=q;B--;)e[--nt]=255&(W=T[W]),W>>=8;null!==P&&l<4096&&(T[l++]=P<<8|G,l>=d+1&&c<12&&(++c,d=d<<1|1)),P=U}else l=s+1,d=(1<<(c=a+1))-1,P=null}return x!==i&&Ui.log("Warning, gif stream shorter than expected."),e}function Fh(n){var o,e,i,a,r,s=Math.floor,l=new Array(64),c=new Array(64),d=new Array(64),h=new Array(64),_=new Array(65535),x=new Array(65535),b=new Array(64),T=new Array(64),P=[],U=0,q=7,B=new Array(64),W=new Array(64),G=new Array(64),nt=new Array(256),At=new Array(2048),ut=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],et=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],vt=[0,1,2,3,4,5,6,7,8,9,10,11],Nt=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],ot=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],_t=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Mt=[0,1,2,3,4,5,6,7,8,9,10,11],It=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Tt=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Vt(at,kt){for(var Et=0,Ft=0,Gt=new Array,le=1;le<=16;le++){for(var ee=1;ee<=at[le];ee++)Gt[kt[Ft]]=[],Gt[kt[Ft]][0]=Et,Gt[kt[Ft]][1]=le,Ft++,Et++;Et*=2}return Gt}function ie(at){for(var kt=at[0],Et=at[1]-1;Et>=0;)kt&1<<Et&&(U|=1<<q),Et--,--q<0&&(255==U?(Wt(255),Wt(0)):Wt(U),q=7,U=0)}function Wt(at){P.push(at)}function oe(at){Wt(at>>8&255),Wt(255&at)}function ne(at,kt,Et,Ft,Gt){for(var le,ee=Gt[0],re=Gt[240],Qe=function(je,Ge){var rn,Ve,Cn,Qn,Bn,ui,Ci,uo,Un,vi,hn=0;for(Un=0;Un<8;++Un){var Sr=(rn=je[hn])+(uo=je[hn+7]),zi=rn-uo,Wl=(Ve=je[hn+1])+(Ci=je[hn+6]),bo=Ve-Ci,Ro=(Cn=je[hn+2])+(ui=je[hn+5]),Jc=Cn-ui,Vi=(Qn=je[hn+3])+(Bn=je[hn+4]),nh=Qn-Bn,ia=Sr+Vi,Vl=Sr-Vi,qu=Wl+Ro,oa=Wl-Ro;je[hn]=ia+qu,je[hn+4]=ia-qu;var $n=.707106781*(oa+Vl);je[hn+2]=Vl+$n,je[hn+6]=Vl-$n;var Xi=.382683433*((ia=nh+Jc)-(oa=bo+zi)),ih=.5411961*ia+Xi,dr=1.306562965*oa+Xi,Hc=.707106781*(qu=Jc+bo),Gc=zi+Hc,Fn=zi-Hc;je[hn+5]=Fn+ih,je[hn+3]=Fn-ih,je[hn+1]=Gc+dr,je[hn+7]=Gc-dr,hn+=8}for(hn=0,Un=0;Un<8;++Un){var Xl=(rn=je[hn])+(uo=je[hn+56]),$c=rn-uo,ps=(Ve=je[hn+8])+(Ci=je[hn+48]),Qa=Ve-Ci,Oa=(Cn=je[hn+16])+(ui=je[hn+40]),Rs=Cn-ui,Gp=(Qn=je[hn+24])+(Bn=je[hn+32]),Fu=Qn-Bn,tc=Xl+Gp,ec=Xl-Gp,nc=ps+Oa,Yc=ps-Oa;je[hn]=tc+nc,je[hn+32]=tc-nc;var xl=.707106781*(Yc+ec);je[hn+16]=ec+xl,je[hn+48]=ec-xl;var Kc=.382683433*((tc=Fu+Rs)-(Yc=Qa+$c)),oh=.5411961*tc+Kc,$p=1.306562965*Yc+Kc,Yp=.707106781*(nc=Rs+Qa),Kp=$c+Yp,Wp=$c-Yp;je[hn+40]=Wp+oh,je[hn+24]=Wp-oh,je[hn+8]=Kp+$p,je[hn+56]=Kp-$p,hn++}for(Un=0;Un<64;++Un)b[Un]=(vi=je[Un]*Ge[Un])>0?vi+.5|0:vi-.5|0;return b}(at,kt),Ne=0;Ne<64;++Ne)T[ut[Ne]]=Qe[Ne];var on=T[0]-Et;Et=T[0],0==on?ie(Ft[0]):(ie(Ft[x[le=32767+on]]),ie(_[le]));for(var en=63;en>0&&0==T[en];)en--;if(0==en)return ie(ee),Et;for(var dn,pe=1;pe<=en;){for(var Pt=pe;0==T[pe]&&pe<=en;)++pe;var wn=pe-Pt;if(wn>=16){dn=wn>>4;for(var gn=1;gn<=dn;++gn)ie(re);wn&=15}ie(Gt[(wn<<4)+x[le=32767+T[pe]]]),ie(_[le]),pe++}return 63!=en&&ie(ee),Et}function we(at){at=Math.min(Math.max(at,1),100),r!=at&&(function(kt){for(var Et=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Ft=0;Ft<64;Ft++){var Gt=s((Et[Ft]*kt+50)/100);Gt=Math.min(Math.max(Gt,1),255),l[ut[Ft]]=Gt}for(var le=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ee=0;ee<64;ee++){var re=s((le[ee]*kt+50)/100);re=Math.min(Math.max(re,1),255),c[ut[ee]]=re}for(var Qe=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ne=0,on=0;on<8;on++)for(var en=0;en<8;en++)d[Ne]=1/(l[ut[Ne]]*Qe[on]*Qe[en]*8),h[Ne]=1/(c[ut[Ne]]*Qe[on]*Qe[en]*8),Ne++}(at<50?Math.floor(5e3/at):Math.floor(200-2*at)),r=at)}this.encode=function(at,kt){var Ve,Cn;kt&&we(kt),P=new Array,U=0,q=7,oe(65496),oe(65504),oe(16),Wt(74),Wt(70),Wt(73),Wt(70),Wt(0),Wt(1),Wt(1),Wt(0),oe(1),oe(1),Wt(0),Wt(0),function(){oe(65499),oe(132),Wt(0);for(var Ve=0;Ve<64;Ve++)Wt(l[Ve]);Wt(1);for(var Cn=0;Cn<64;Cn++)Wt(c[Cn])}(),Ve=at.width,Cn=at.height,oe(65472),oe(17),Wt(8),oe(Cn),oe(Ve),Wt(3),Wt(1),Wt(17),Wt(0),Wt(2),Wt(17),Wt(1),Wt(3),Wt(17),Wt(1),function(){oe(65476),oe(418),Wt(0);for(var Ve=0;Ve<16;Ve++)Wt(et[Ve+1]);for(var Cn=0;Cn<=11;Cn++)Wt(vt[Cn]);Wt(16);for(var Qn=0;Qn<16;Qn++)Wt(Nt[Qn+1]);for(var Bn=0;Bn<=161;Bn++)Wt(ot[Bn]);Wt(1);for(var ui=0;ui<16;ui++)Wt(_t[ui+1]);for(var Ci=0;Ci<=11;Ci++)Wt(Mt[Ci]);Wt(17);for(var uo=0;uo<16;uo++)Wt(It[uo+1]);for(var Un=0;Un<=161;Un++)Wt(Tt[Un])}(),oe(65498),oe(12),Wt(3),Wt(1),Wt(0),Wt(2),Wt(17),Wt(3),Wt(17),Wt(0),Wt(63),Wt(0);var Et=0,Ft=0,Gt=0;U=0,q=7,this.encode.displayName="_encode_";for(var le,ee,re,Qe,Ne,on,en,dn,pe,Pt=at.data,gn=at.height,je=4*at.width,Ge=0;Ge<gn;){for(le=0;le<je;){for(Ne=je*Ge+le,en=-1,dn=0,pe=0;pe<64;pe++)on=Ne+(dn=pe>>3)*je+(en=4*(7&pe)),Ge+dn>=gn&&(on-=je*(Ge+1+dn-gn)),le+en>=je&&(on-=le+en-je+4),ee=Pt[on++],re=Pt[on++],Qe=Pt[on++],B[pe]=(At[ee]+At[re+256>>0]+At[Qe+512>>0]>>16)-128,W[pe]=(At[ee+768>>0]+At[re+1024>>0]+At[Qe+1280>>0]>>16)-128,G[pe]=(At[ee+1280>>0]+At[re+1536>>0]+At[Qe+1792>>0]>>16)-128;Et=ne(B,d,Et,o,i),Ft=ne(W,h,Ft,e,a),Gt=ne(G,h,Gt,e,a),le+=32}Ge+=8}if(q>=0){var rn=[];rn[1]=q+1,rn[0]=(1<<q+1)-1,ie(rn)}return oe(65497),new Uint8Array(P)},n=n||50,function(){for(var at=String.fromCharCode,kt=0;kt<256;kt++)nt[kt]=at(kt)}(),o=Vt(et,vt),e=Vt(_t,Mt),i=Vt(Nt,ot),a=Vt(It,Tt),function(){for(var at=1,kt=2,Et=1;Et<=15;Et++){for(var Ft=at;Ft<kt;Ft++)x[32767+Ft]=Et,_[32767+Ft]=[],_[32767+Ft][1]=Et,_[32767+Ft][0]=Ft;for(var Gt=-(kt-1);Gt<=-at;Gt++)x[32767+Gt]=Et,_[32767+Gt]=[],_[32767+Gt][1]=Et,_[32767+Gt][0]=kt-1+Gt;at<<=1,kt<<=1}}(),function(){for(var at=0;at<256;at++)At[at]=19595*at,At[at+256>>0]=38470*at,At[at+512>>0]=7471*at+32768,At[at+768>>0]=-11059*at,At[at+1024>>0]=-21709*at,At[at+1280>>0]=32768*at+8421375,At[at+1536>>0]=-27439*at,At[at+1792>>0]=-5329*at}(),we(n)}function Es(n,o){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!o,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,-1===["BM","BA","CI","CP","IC","PT"].indexOf(this.flag))throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function bm(n){function o(et){if(!et)throw Error("assert :P")}function e(et,vt,Nt){for(var ot=0;4>ot;ot++)if(et[vt+ot]!=Nt.charCodeAt(ot))return!0;return!1}function i(et,vt,Nt,ot,_t){for(var Mt=0;Mt<_t;Mt++)et[vt+Mt]=Nt[ot+Mt]}function a(et,vt,Nt,ot){for(var _t=0;_t<ot;_t++)et[vt+_t]=Nt}function r(et){return new Int32Array(et)}function s(et,vt){for(var Nt=[],ot=0;ot<et;ot++)Nt.push(new vt);return Nt}function l(et,vt){var Nt=[];return function ot(_t,Mt,It){for(var Tt=It[Mt],Vt=0;Vt<Tt&&(_t.push(It.length>Mt+1?[]:new vt),!(It.length<Mt+1));Vt++)ot(_t[Vt],Mt+1,It)}(Nt,0,et),Nt}var c=function(){var et=this;function vt(g,k){for(var R=1<<k-1>>>0;g&R;)R>>>=1;return R?(g&R-1)+R:g}function Nt(g,k,R,Y,st){o(!(Y%R));do{g[k+(Y-=R)]=st}while(0<Y)}function ot(g,k,R,Y,st){if(o(2328>=st),512>=st)var ht=r(512);else if(null==(ht=r(st)))return 0;return function(pt,gt,wt,Ot,Jt,ue){var de,Xt,Ie=gt,ge=1<<wt,Ht=r(16),Kt=r(16);for(o(0!=Jt),o(null!=Ot),o(null!=pt),o(0<wt),Xt=0;Xt<Jt;++Xt){if(15<Ot[Xt])return 0;++Ht[Ot[Xt]]}if(Ht[0]==Jt)return 0;for(Kt[1]=0,de=1;15>de;++de){if(Ht[de]>1<<de)return 0;Kt[de+1]=Kt[de]+Ht[de]}for(Xt=0;Xt<Jt;++Xt)de=Ot[Xt],0<Ot[Xt]&&(ue[Kt[de]++]=Xt);if(1==Kt[15])return(Ot=new _t).g=0,Ot.value=ue[0],Nt(pt,Ie,1,ge,Ot),ge;var Oe,Ze=-1,Me=ge-1,_n=0,Xe=1,Zn=1,sn=1<<wt;for(Xt=0,de=1,Jt=2;de<=wt;++de,Jt<<=1){if(Xe+=Zn<<=1,0>(Zn-=Ht[de]))return 0;for(;0<Ht[de];--Ht[de])(Ot=new _t).g=de,Ot.value=ue[Xt++],Nt(pt,Ie+_n,Jt,sn,Ot),_n=vt(_n,de)}for(de=wt+1,Jt=2;15>=de;++de,Jt<<=1){if(Xe+=Zn<<=1,0>(Zn-=Ht[de]))return 0;for(;0<Ht[de];--Ht[de]){if(Ot=new _t,(_n&Me)!=Ze){for(Ie+=sn,Oe=1<<(Ze=de)-wt;15>Ze&&!(0>=(Oe-=Ht[Ze]));)++Ze,Oe<<=1;ge+=sn=1<<(Oe=Ze-wt),pt[gt+(Ze=_n&Me)].g=Oe+wt,pt[gt+Ze].value=Ie-gt-Ze}Ot.g=de-wt,Ot.value=ue[Xt++],Nt(pt,Ie+(_n>>wt),Jt,sn,Ot),_n=vt(_n,de)}}return Xe!=2*Kt[15]-1?0:ge}(g,k,R,Y,st,ht)}function _t(){this.value=this.g=0}function Mt(){this.value=this.g=0}function It(){this.G=s(5,_t),this.H=r(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=s(fs,Mt)}function Tt(g,k,R,Y){o(null!=g),o(null!=k),o(2147483648>Y),g.Ca=254,g.I=0,g.b=-8,g.Ka=0,g.oa=k,g.pa=R,g.Jd=k,g.Yc=R+Y,g.Zc=4<=Y?R+Y-4+1:R,le(g)}function Vt(g,k){for(var R=0;0<k--;)R|=re(g,128)<<k;return R}function ie(g,k){var R=Vt(g,k);return ee(g)?-R:R}function Wt(g,k,R,Y){var st,ht=0;for(o(null!=g),o(null!=k),o(4294967288>Y),g.Sb=Y,g.Ra=0,g.u=0,g.h=0,4<Y&&(Y=4),st=0;st<Y;++st)ht+=k[R+st]<<8*st;g.Ra=ht,g.bb=Y,g.oa=k,g.pa=R}function oe(g){for(;8<=g.u&&g.bb<g.Sb;)g.Ra>>>=8,g.Ra+=g.oa[g.pa+g.bb]<<m_-8>>>0,++g.bb,g.u-=8;Et(g)&&(g.h=1,g.u=0)}function ne(g,k){if(o(0<=k),!g.h&&k<=d_){var R=kt(g)&u_[k];return g.u+=k,oe(g),R}return g.h=1,g.u=0}function we(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function at(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function kt(g){return g.Ra>>>(g.u&m_-1)>>>0}function Et(g){return o(g.bb<=g.Sb),g.h||g.bb==g.Sb&&g.u>m_}function Ft(g,k){g.u=k,g.h=Et(g)}function Gt(g){g.u>=Yg&&(o(g.u>=Yg),oe(g))}function le(g){o(null!=g&&null!=g.oa),g.pa<g.Zc?(g.I=(g.oa[g.pa++]|g.I<<8)>>>0,g.b+=8):(o(null!=g&&null!=g.oa),g.pa<g.Yc?(g.b+=8,g.I=g.oa[g.pa++]|g.I<<8):g.Ka?g.b=0:(g.I<<=8,g.b+=8,g.Ka=1))}function ee(g){return Vt(g,1)}function re(g,k){var R=g.Ca;0>g.b&&le(g);var Y=g.b,st=R*k>>>8,ht=(g.I>>>Y>st)+0;for(ht?(R-=st,g.I-=st+1<<Y>>>0):R=st+1,Y=R,st=0;256<=Y;)st+=8,Y>>=8;return g.b-=Y=7^st+gs[Y],g.Ca=(R<<Y)-1,ht}function Qe(g,k,R){g[k+0]=R>>24&255,g[k+1]=R>>16&255,g[k+2]=R>>8&255,g[k+3]=R>>0&255}function Ne(g,k){return g[k+0]<<0|g[k+1]<<8}function on(g,k){return Ne(g,k)|g[k+2]<<16}function en(g,k){return Ne(g,k)|Ne(g,k+2)<<16}function dn(g,k){var R=1<<k;return o(null!=g),o(0<k),g.X=r(R),null==g.X?0:(g.Mb=32-k,g.Xa=k,1)}function pe(g,k){o(null!=g),o(null!=k),o(g.Xa==k.Xa),i(k.X,0,g.X,0,1<<k.Xa)}function Pt(){this.X=[],this.Xa=this.Mb=0}function wn(g,k,R,Y){o(null!=R),o(null!=Y);var st=R[0],ht=Y[0];return 0==st&&(st=(g*ht+k/2)/k),0==ht&&(ht=(k*st+g/2)/g),0>=st||0>=ht?0:(R[0]=st,Y[0]=ht,1)}function gn(g,k){return g+(1<<k)-1>>>k}function je(g,k){return((4278255360&g)+(4278255360&k)>>>0&4278255360)+((16711935&g)+(16711935&k)>>>0&16711935)>>>0}function Ge(g,k){et[k]=function(R,Y,st,ht,pt,gt,wt){var Ot;for(Ot=0;Ot<pt;++Ot){var Jt=et[g](gt[wt+Ot-1],st,ht+Ot);gt[wt+Ot]=je(R[Y+Ot],Jt)}}}function rn(){this.ud=this.hd=this.jd=0}function Ve(g,k){return((4278124286&(g^k))>>>1)+(g&k)>>>0}function Cn(g){return 0<=g&&256>g?g:0>g?0:255<g?255:void 0}function Qn(g,k){return Cn(g+(g-k+.5>>1))}function Bn(g,k,R){return Math.abs(k-R)-Math.abs(g-R)}function ui(g,k,R,Y,st,ht,pt){for(Y=ht[pt-1],R=0;R<st;++R)ht[pt+R]=Y=je(g[k+R],Y)}function Ci(g,k,R,Y,st){var ht;for(ht=0;ht<R;++ht){var pt=g[k+ht],gt=pt>>8&255,wt=16711935&(wt=(wt=16711935&pt)+((gt<<16)+gt));Y[st+ht]=(4278255360&pt)+wt>>>0}}function uo(g,k){k.jd=g>>0&255,k.hd=g>>8&255,k.ud=g>>16&255}function Un(g,k,R,Y,st,ht){var pt;for(pt=0;pt<Y;++pt){var gt=k[R+pt],wt=gt>>>8,Ot=gt,Jt=255&(Jt=(Jt=gt>>>16)+((g.jd<<24>>24)*(wt<<24>>24)>>>5));Ot=255&(Ot=(Ot+=(g.hd<<24>>24)*(wt<<24>>24)>>>5)+((g.ud<<24>>24)*(Jt<<24>>24)>>>5)),st[ht+pt]=(4278255360&gt)+(Jt<<16)+Ot}}function vi(g,k,R,Y,st){et[k]=function(ht,pt,gt,wt,Ot,Jt,ue,de,Xt){for(wt=ue;wt<de;++wt)for(ue=0;ue<Xt;++ue)Ot[Jt++]=st(gt[Y(ht[pt++])])},et[g]=function(ht,pt,gt,wt,Ot,Jt,ue){var de=8>>ht.b,Xt=ht.Ea,Ie=ht.K[0],ge=ht.w;if(8>de)for(ht=(1<<ht.b)-1,ge=(1<<de)-1;pt<gt;++pt){var Ht,Kt=0;for(Ht=0;Ht<Xt;++Ht)Ht&ht||(Kt=Y(wt[Ot++])),Jt[ue++]=st(Ie[Kt&ge]),Kt>>=de}else et["VP8LMapColor"+R](wt,Ot,Ie,ge,Jt,ue,pt,gt,Xt)}}function hn(g,k,R,Y,st){for(R=k+R;k<R;){var ht=g[k++];Y[st++]=ht>>16&255,Y[st++]=ht>>8&255,Y[st++]=ht>>0&255}}function Sr(g,k,R,Y,st){for(R=k+R;k<R;){var ht=g[k++];Y[st++]=ht>>16&255,Y[st++]=ht>>8&255,Y[st++]=ht>>0&255,Y[st++]=ht>>24&255}}function zi(g,k,R,Y,st){for(R=k+R;k<R;){var ht=(pt=g[k++])>>16&240|pt>>12&15,pt=pt>>0&240|pt>>28&15;Y[st++]=ht,Y[st++]=pt}}function Wl(g,k,R,Y,st){for(R=k+R;k<R;){var ht=(pt=g[k++])>>16&248|pt>>13&7,pt=pt>>5&224|pt>>3&31;Y[st++]=ht,Y[st++]=pt}}function bo(g,k,R,Y,st){for(R=k+R;k<R;){var ht=g[k++];Y[st++]=ht>>0&255,Y[st++]=ht>>8&255,Y[st++]=ht>>16&255}}function Ro(g,k,R,Y,st,ht){if(0==ht)for(R=k+R;k<R;)Qe(Y,((ht=g[k++])[0]>>24|ht[1]>>8&65280|ht[2]<<8&16711680|ht[3]<<24)>>>0),st+=32;else i(Y,st,g,k,R)}function Jc(g,k){et[k][0]=et[g+"0"],et[k][1]=et[g+"1"],et[k][2]=et[g+"2"],et[k][3]=et[g+"3"],et[k][4]=et[g+"4"],et[k][5]=et[g+"5"],et[k][6]=et[g+"6"],et[k][7]=et[g+"7"],et[k][8]=et[g+"8"],et[k][9]=et[g+"9"],et[k][10]=et[g+"10"],et[k][11]=et[g+"11"],et[k][12]=et[g+"12"],et[k][13]=et[g+"13"],et[k][14]=et[g+"0"],et[k][15]=et[g+"0"]}function Vi(g){return g==Xw||g==t6||g==y2||g==e6}function nh(){this.eb=[],this.size=this.A=this.fb=0}function ia(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Vl(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new nh,this.f.kb=new ia,this.sd=null}function qu(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function oa(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function $n(g){return alert("todo:WebPSamplerProcessPlane"),g.T}function Xi(g,k){var R=g.T,Y=k.ba.f.RGBA,st=Y.eb,ht=Y.fb+g.ka*Y.A,pt=wl[k.ba.S],gt=g.y,wt=g.O,Ot=g.f,Jt=g.N,ue=g.ea,de=g.W,Xt=k.cc,Ie=k.dc,ge=k.Mc,Ht=k.Nc,Kt=g.ka,Oe=g.ka+g.T,Ze=g.U,Me=Ze+1>>1;for(0==Kt?pt(gt,wt,null,null,Ot,Jt,ue,de,Ot,Jt,ue,de,st,ht,null,null,Ze):(pt(k.ec,k.fc,gt,wt,Xt,Ie,ge,Ht,Ot,Jt,ue,de,st,ht-Y.A,st,ht,Ze),++R);Kt+2<Oe;Kt+=2)pt(gt,(wt+=2*g.fa)-g.fa,gt,wt,Xt=Ot,Ie=Jt,ge=ue,Ht=de,Ot,Jt+=g.Rc,ue,de+=g.Rc,st,(ht+=2*Y.A)-Y.A,st,ht,Ze);return wt+=g.fa,g.j+Oe<g.o?(i(k.ec,k.fc,gt,wt,Ze),i(k.cc,k.dc,Ot,Jt,Me),i(k.Mc,k.Nc,ue,de,Me),R--):1&Oe||pt(gt,wt,null,null,Ot,Jt,ue,de,Ot,Jt,ue,de,st,ht+Y.A,null,null,Ze),R}function ih(g,k,R){var Y=g.F,st=[g.J];if(null!=Y){var ht=g.U,pt=k.ba.S,gt=pt==v2||pt==y2;k=k.ba.f.RGBA;var wt=[0],Ot=g.ka;wt[0]=g.T,g.Kb&&(0==Ot?--wt[0]:(--Ot,st[0]-=g.width),g.j+g.ka+g.T==g.o&&(wt[0]=g.o-g.j-Ot));var Jt=k.eb;g=_2(Y,st[0],g.width,ht,wt,Jt,(Ot=k.fb+Ot*k.A)+(gt?0:3),k.A),o(R==wt),g&&Vi(pt)&&Jd(Jt,Ot,gt,ht,wt,k.A)}return 0}function dr(g){var k=g.ma,R=k.ba.S,Y=11>R,st=R==x2||R==b2||R==v2||R==Vw||12==R||Vi(R);if(k.memory=null,k.Ib=null,k.Jb=null,k.Nd=null,!Gg(k.Oa,g,st?11:12))return 0;if(st&&Vi(R)&&Re(),g.da)alert("todo:use_scaling");else{if(Y){if(k.Ib=$n,g.Kb){if(k.memory=r(g.U+2*(R=g.U+1>>1)),null==k.memory)return 0;k.ec=k.memory,k.fc=0,k.cc=k.ec,k.dc=k.fc+g.U,k.Mc=k.cc,k.Nc=k.dc+R,k.Ib=Xi,Re()}}else alert("todo:EmitYUV");st&&(k.Jb=ih,Y&&ae())}if(Y&&!jT){for(g=0;256>g;++g)sK[g]=89858*(g-128)+C2>>w2,uK[g]=-22014*(g-128)+C2,cK[g]=-45773*(g-128),lK[g]=113618*(g-128)+C2>>w2;for(g=e1;g<o6;++g)dK[g-e1]=Us(k=76283*(g-16)+C2>>w2,255),mK[g-e1]=Us(k+8>>4,15);jT=1}return 1}function Hc(g){var k=g.ma,R=g.U,Y=g.T;return o(!(1&g.ka)),0>=R||0>=Y?0:(R=k.Ib(g,k),null!=k.Jb&&k.Jb(g,k,R),k.Dc+=R,1)}function Gc(g){g.ma.memory=null}function Fn(g,k,R,Y){return 47!=ne(g,8)?0:(k[0]=ne(g,14)+1,R[0]=ne(g,14)+1,Y[0]=ne(g,1),0!=ne(g,3)?0:!g.h)}function Xl(g,k){if(4>g)return g+1;var R=g-2>>1;return(2+(1&g)<<R)+ne(k,R)+1}function $c(g,k){return 120<k?k-120:1<=(R=((R=GY[k-1])>>4)*g+(8-(15&R)))?R:1;var R}function ps(g,k,R){var Y=kt(R),st=g[k+=255&Y].g-8;return 0<st&&(Ft(R,R.u+8),Y=kt(R),k+=g[k].value,k+=Y&(1<<st)-1),Ft(R,R.u+g[k].g),g[k].value}function Qa(g,k,R){return R.g+=g.g,R.value+=g.value<<k>>>0,o(8>=R.g),g.g}function Oa(g,k,R){var Y=g.xc;return o((k=0==Y?0:g.vc[g.md*(R>>Y)+(k>>Y)])<g.Wb),g.Ya[k]}function Rs(g,k,R,Y){var st=g.ab,ht=g.c*k,pt=g.C;k=pt+k;var gt=R,wt=Y;for(Y=g.Ta,R=g.Ua;0<st--;){var Ot=g.gc[st],Jt=pt,ue=k,de=gt,Xt=wt,Ie=(wt=Y,gt=R,Ot.Ea);switch(o(Jt<ue),o(ue<=Ot.nc),Ot.hc){case 2:p2(de,Xt,(ue-Jt)*Ie,wt,gt);break;case 0:var ge=Jt,Ht=ue,Kt=wt,Oe=gt,Ze=(sn=Ot).Ea;0==ge&&($w(de,Xt,null,null,1,Kt,Oe),ui(de,Xt+1,0,0,Ze-1,Kt,Oe+1),Xt+=Ze,Oe+=Ze,++ge);for(var Me=1<<sn.b,_n=Me-1,Xe=gn(Ze,sn.b),Zn=sn.K,sn=sn.w+(ge>>sn.b)*Xe;ge<Ht;){var Gi=Zn,ao=sn,ji=1;for(Kg(de,Xt,Kt,Oe-Ze,1,Kt,Oe);ji<Ze;){var Ti=(ji&~_n)+Me;Ti>Ze&&(Ti=Ze),(0,Rd[Gi[ao++]>>8&15])(de,Xt+ +ji,Kt,Oe+ji-Ze,Ti-ji,Kt,Oe+ji),ji=Ti}Xt+=Ze,Oe+=Ze,++ge&_n||(sn+=Xe)}ue!=Ot.nc&&i(wt,gt-Ie,wt,gt+(ue-Jt-1)*Ie,Ie);break;case 1:for(Ie=de,Ht=Xt,Ze=(de=Ot.Ea)-(Oe=de&~(Kt=(Xt=1<<Ot.b)-1)),ge=gn(de,Ot.b),Me=Ot.K,Ot=Ot.w+(Jt>>Ot.b)*ge;Jt<ue;){for(_n=Me,Xe=Ot,Zn=new rn,sn=Ht+Oe,Gi=Ht+de;Ht<sn;)uo(_n[Xe++],Zn),bl(Zn,Ie,Ht,Xt,wt,gt),Ht+=Xt,gt+=Xt;Ht<Gi&&(uo(_n[Xe++],Zn),bl(Zn,Ie,Ht,Ze,wt,gt),Ht+=Ze,gt+=Ze),++Jt&Kt||(Ot+=ge)}break;case 3:if(de==wt&&Xt==gt&&0<Ot.b){for(Ht=wt,de=Ie=gt+(ue-Jt)*Ie-(Oe=(ue-Jt)*gn(Ot.Ea,Ot.b)),Xt=wt,Kt=gt,ge=[],Oe=(Ze=Oe)-1;0<=Oe;--Oe)ge[Oe]=Xt[Kt+Oe];for(Oe=Ze-1;0<=Oe;--Oe)Ht[de+Oe]=ge[Oe];rc(Ot,Jt,ue,wt,Ie,wt,gt)}else rc(Ot,Jt,ue,de,Xt,wt,gt)}gt=Y,wt=R}wt!=R&&i(Y,R,gt,wt,ht)}function Gp(g,k){var R=g.V,Y=g.Ba+g.c*g.C,st=k-g.C;if(o(k<=g.l.o),o(16>=st),0<st){var ht=g.l,pt=g.Ta,gt=g.Ua,wt=ht.width;if(Rs(g,st,R,Y),st=gt=[gt],o((R=g.C)<(Y=k)),o(ht.v<ht.va),Y>ht.o&&(Y=ht.o),R<ht.j){var Ot=ht.j-R;R=ht.j,st[0]+=Ot*wt}if(R>=Y?R=0:(st[0]+=4*ht.v,ht.ka=R-ht.j,ht.U=ht.va-ht.v,ht.T=Y-R,R=1),R){if(gt=gt[0],11>(R=g.ca).S){var Jt=R.f.RGBA,ue=(Y=R.S,st=ht.U,ht=ht.T,Ot=Jt.eb,Jt.A),de=ht;for(Jt=Jt.fb+g.Ma*Jt.A;0<de--;){var Xt=pt,Ie=gt,ge=st,Ht=Ot,Kt=Jt;switch(Y){case g2:sc(Xt,Ie,ge,Ht,Kt);break;case x2:Ud(Xt,Ie,ge,Ht,Kt);break;case Xw:Ud(Xt,Ie,ge,Ht,Kt),Jd(Ht,Kt,0,ge,1,0);break;case ST:h_(Xt,Ie,ge,Ht,Kt);break;case b2:Ro(Xt,Ie,ge,Ht,Kt,1);break;case t6:Ro(Xt,Ie,ge,Ht,Kt,1),Jd(Ht,Kt,0,ge,1,0);break;case v2:Ro(Xt,Ie,ge,Ht,Kt,0);break;case y2:Ro(Xt,Ie,ge,Ht,Kt,0),Jd(Ht,Kt,1,ge,1,0);break;case Vw:Vc(Xt,Ie,ge,Ht,Kt);break;case e6:Vc(Xt,Ie,ge,Ht,Kt),f_(Ht,Kt,ge,1,0);break;case OT:Bu(Xt,Ie,ge,Ht,Kt);break;default:o(0)}gt+=wt,Jt+=ue}g.Ma+=ht}else alert("todo:EmitRescaledRowsYUVA");o(g.Ma<=R.height)}}g.C=k,o(g.C<=g.i)}function Fu(g){var k;if(0<g.ua)return 0;for(k=0;k<g.Wb;++k){var R=g.Ya[k].G,Y=g.Ya[k].H;if(0<R[1][Y[1]+0].g||0<R[2][Y[2]+0].g||0<R[3][Y[3]+0].g)return 0}return 1}function tc(g,k,R,Y,st,ht){if(0!=g.Z){var pt=g.qd,gt=g.rd;for(o(null!=Gd[g.Z]);k<R;++k)Gd[g.Z](pt,gt,Y,st,Y,st,ht),pt=Y,gt=st,st+=ht;g.qd=pt,g.rd=gt}}function ec(g,k){var R=g.l.ma,Y=0==R.Z||1==R.Z?g.l.j:g.C;if(Y=g.C<Y?Y:g.C,o(k<=g.l.o),k>Y){var st=g.l.width,ht=R.ca,pt=R.tb+st*Y,gt=g.V,wt=g.Ba+g.c*Y,Ot=g.gc;o(1==g.ab),o(3==Ot[0].hc),Yw(Ot[0],Y,k,gt,wt,ht,pt),tc(R,Y,k,ht,pt,st)}g.C=g.Ma=k}function nc(g,k,R,Y,st,ht,pt){var gt=g.$/Y,wt=g.$%Y,Ot=g.m,Jt=g.s,ue=R+g.$,de=ue;st=R+Y*st;var Xt=R+Y*ht,Ie=280+Jt.ua,ge=g.Pb?gt:16777216,Ht=0<Jt.ua?Jt.Wa:null,Kt=Jt.wc,Oe=ue<Xt?Oa(Jt,wt,gt):null;o(g.C<ht),o(Xt<=st);var Ze=!1;t:for(;;){for(;Ze||ue<Xt;){var Me=0;if(gt>=ge){var _n=ue-R;o((ge=g).Pb),ge.wd=ge.m,ge.xd=_n,0<ge.s.ua&&pe(ge.s.Wa,ge.s.vb),ge=gt+YY}if(wt&Kt||(Oe=Oa(Jt,wt,gt)),o(null!=Oe),Oe.Qb&&(k[ue]=Oe.qb,Ze=!0),!Ze)if(Gt(Ot),Oe.jc){_n=k;var Xe=ue,Zn=Oe.pd[kt(Me=Ot)&fs-1];o(Oe.jc),256>Zn.g?(Ft(Me,Me.u+Zn.g),_n[Xe]=Zn.value,Me=0):(Ft(Me,Me.u+Zn.g-256),o(256<=Zn.value),Me=Zn.value),0==Me&&(Ze=!0)}else Me=ps(Oe.G[0],Oe.H[0],Ot);if(Ot.h)break;if(Ze||256>Me){if(!Ze)if(Oe.nd)k[ue]=(Oe.qb|Me<<8)>>>0;else{if(Gt(Ot),Ze=ps(Oe.G[1],Oe.H[1],Ot),Gt(Ot),_n=ps(Oe.G[2],Oe.H[2],Ot),Xe=ps(Oe.G[3],Oe.H[3],Ot),Ot.h)break;k[ue]=(Xe<<24|Ze<<16|Me<<8|_n)>>>0}if(Ze=!1,++ue,++wt>=Y&&(wt=0,++gt,null!=pt&&gt<=ht&&!(gt%16)&&pt(g,gt),null!=Ht))for(;de<ue;)Me=k[de++],Ht.X[(506832829*Me&4294967295)>>>Ht.Mb]=Me}else if(280>Me){if(Me=Xl(Me-256,Ot),_n=ps(Oe.G[4],Oe.H[4],Ot),Gt(Ot),_n=$c(Y,_n=Xl(_n,Ot)),Ot.h)break;if(ue-R<_n||st-ue<Me)break t;for(Xe=0;Xe<Me;++Xe)k[ue+Xe]=k[ue+Xe-_n];for(ue+=Me,wt+=Me;wt>=Y;)wt-=Y,++gt,null!=pt&&gt<=ht&&!(gt%16)&&pt(g,gt);if(o(ue<=st),wt&Kt&&(Oe=Oa(Jt,wt,gt)),null!=Ht)for(;de<ue;)Me=k[de++],Ht.X[(506832829*Me&4294967295)>>>Ht.Mb]=Me}else{if(!(Me<Ie))break t;for(Ze=Me-280,o(null!=Ht);de<ue;)Me=k[de++],Ht.X[(506832829*Me&4294967295)>>>Ht.Mb]=Me;Me=ue,o(!(Ze>>>(_n=Ht).Xa)),k[Me]=_n.X[Ze],Ze=!0}Ze||o(Ot.h==Et(Ot))}if(g.Pb&&Ot.h&&ue<st)o(g.m.h),g.a=5,g.m=g.wd,g.$=g.xd,0<g.s.ua&&pe(g.s.vb,g.s.Wa);else{if(Ot.h)break t;pt?.(g,gt>ht?ht:gt),g.a=0,g.$=ue-R}return 1}return g.a=3,0}function Yc(g){o(null!=g),g.vc=null,g.yc=null,g.Ya=null;var k=g.Wa;null!=k&&(k.X=null),g.vb=null,o(null!=g)}function xl(){var g=new Gw;return null==g?null:(g.a=0,g.xb=IT,Jc("Predictor","VP8LPredictors"),Jc("Predictor","VP8LPredictors_C"),Jc("PredictorAdd","VP8LPredictorsAdd"),Jc("PredictorAdd","VP8LPredictorsAdd_C"),p2=Ci,bl=Un,sc=hn,Ud=Sr,Vc=zi,Bu=Wl,h_=bo,et.VP8LMapColor32b=Wg,et.VP8LMapColor8b=Kw,g)}function Kc(g,k,R,Y,st){var ht=1,pt=[g],gt=[k],wt=Y.m,Ot=Y.s,Jt=null,ue=0;t:for(;;){if(R)for(;ht&&ne(wt,1);){var de=pt,Xt=gt,Ie=Y,ge=1,Ht=Ie.m,Kt=Ie.gc[Ie.ab],Oe=ne(Ht,2);if(Ie.Oc&1<<Oe)ht=0;else{switch(Ie.Oc|=1<<Oe,Kt.hc=Oe,Kt.Ea=de[0],Kt.nc=Xt[0],Kt.K=[null],++Ie.ab,o(4>=Ie.ab),Oe){case 0:case 1:Kt.b=ne(Ht,3)+2,ge=Kc(gn(Kt.Ea,Kt.b),gn(Kt.nc,Kt.b),0,Ie,Kt.K),Kt.K=Kt.K[0];break;case 3:var Ze,Me=ne(Ht,8)+1,_n=16<Me?0:4<Me?1:2<Me?2:3;if(de[0]=gn(Kt.Ea,_n),Kt.b=_n,Ze=ge=Kc(Me,1,0,Ie,Kt.K)){var Xe,Zn=Me,sn=Kt,Gi=1<<(8>>sn.b),ao=r(Gi);if(null==ao)Ze=0;else{var ji=sn.K[0],Ti=sn.w;for(ao[0]=sn.K[0][0],Xe=1;Xe<1*Zn;++Xe)ao[Xe]=je(ji[Ti+Xe],ao[Xe-1]);for(;Xe<4*Gi;++Xe)ao[Xe]=0;sn.K[0]=null,sn.K[0]=ao,Ze=1}}ge=Ze;break;case 2:break;default:o(0)}ht=ge}}if(pt=pt[0],gt=gt[0],ht&&ne(wt,1)&&!(ht=1<=(ue=ne(wt,4))&&11>=ue)){Y.a=3;break t}var vo;if(vo=ht)e:{var mo,ii,Ma,xs=Y,Ia=pt,bs=gt,ro=ue,zs=R,Js=xs.m,Va=xs.s,mr=[null],Kr=1,Cl=0,Xc=$Y[ro];n:for(;;){if(zs&&ne(Js,1)){var Xa=ne(Js,3)+2,$u=gn(Ia,Xa),dh=gn(bs,Xa),g_=$u*dh;if(!Kc($u,dh,0,xs,mr))break n;for(mr=mr[0],Va.xc=Xa,mo=0;mo<g_;++mo){var $d=mr[mo]>>8&65535;mr[mo]=$d,$d>=Kr&&(Kr=$d+1)}}if(Js.h)break n;for(ii=0;5>ii;++ii){var ra=ET[ii];!ii&&0<ro&&(ra+=1<<ro),Cl<ra&&(Cl=ra)}var a6=s(Kr*Xc,_t),QT=Kr,RT=s(QT,It);if(null==RT)var k2=null;else o(65536>=QT),k2=RT;var n1=r(Cl);if(null==k2||null==n1||null==a6){xs.a=1;break n}var A2=a6;for(mo=Ma=0;mo<Kr;++mo){var dc=k2[mo],x_=dc.G,b_=dc.H,UT=0,S2=1,BT=0;for(ii=0;5>ii;++ii){ra=ET[ii],x_[ii]=A2,b_[ii]=Ma,!ii&&0<ro&&(ra+=1<<ro);o:{var O2,r6=ra,E2=xs,i1=n1,_K=A2,fK=Ma,s6=0,Yd=E2.m,gK=ne(Yd,1);if(a(i1,0,0,r6),gK){var xK=ne(Yd,1)+1,bK=ne(Yd,1),zT=ne(Yd,0==bK?1:8);i1[zT]=1,2==xK&&(i1[zT=ne(Yd,8)]=1);var M2=1}else{var JT=r(19),HT=ne(Yd,4)+4;if(19<HT){E2.a=3;var I2=0;break o}for(O2=0;O2<HT;++O2)JT[HY[O2]]=ne(Yd,3);var l6=void 0,o1=void 0,GT=E2,vK=JT,L2=r6,$T=i1,c6=0,Kd=GT.m,YT=8,KT=s(128,_t);i:for(;ot(KT,0,7,vK,19);){if(ne(Kd,1)){var yK=2+2*ne(Kd,3);if((l6=2+ne(Kd,yK))>L2)break i}else l6=L2;for(o1=0;o1<L2&&l6--;){Gt(Kd);var WT=KT[0+(127&kt(Kd))];Ft(Kd,Kd.u+WT.g);var v_=WT.value;if(16>v_)$T[o1++]=v_,0!=v_&&(YT=v_);else{var wK=16==v_,VT=v_-16,CK=zY[VT],XT=ne(Kd,BY[VT])+CK;if(o1+XT>L2)break i;for(var TK=wK?YT:0;0<XT--;)$T[o1++]=TK}}c6=1;break i}c6||(GT.a=3),M2=c6}(M2=M2&&!Yd.h)&&(s6=ot(_K,fK,8,i1,r6)),M2&&0!=s6?I2=s6:(E2.a=3,I2=0)}if(0==I2)break n;if(S2&&1==JY[ii]&&(S2=0==A2[Ma].g),UT+=A2[Ma].g,Ma+=I2,3>=ii){var a1,u6=n1[0];for(a1=1;a1<ra;++a1)n1[a1]>u6&&(u6=n1[a1]);BT+=u6}}if(dc.nd=S2,dc.Qb=0,S2&&(dc.qb=(x_[3][b_[3]+0].value<<24|x_[1][b_[1]+0].value<<16|x_[2][b_[2]+0].value)>>>0,0==UT&&256>x_[0][b_[0]+0].value&&(dc.Qb=1,dc.qb+=x_[0][b_[0]+0].value<<8)),dc.jc=!dc.Qb&&6>BT,dc.jc){var P2,Yu=dc;for(P2=0;P2<fs;++P2){var Wd=P2,Vd=Yu.pd[Wd],N2=Yu.G[0][Yu.H[0]+Wd];256<=N2.value?(Vd.g=N2.g+256,Vd.value=N2.value):(Vd.g=0,Vd.value=0,Wd>>=Qa(N2,8,Vd),Wd>>=Qa(Yu.G[1][Yu.H[1]+Wd],16,Vd),Wd>>=Qa(Yu.G[2][Yu.H[2]+Wd],0,Vd),Qa(Yu.G[3][Yu.H[3]+Wd],24,Vd))}}}Va.vc=mr,Va.Wb=Kr,Va.Ya=k2,Va.yc=a6,vo=1;break e}vo=0}if(!(ht=vo)){Y.a=3;break t}if(0<ue){if(Ot.ua=1<<ue,!dn(Ot.Wa,ue)){Y.a=1,ht=0;break t}}else Ot.ua=0;var d6=Y,tk=pt,kK=gt,m6=d6.s,h6=m6.xc;if(d6.c=tk,d6.i=kK,m6.md=gn(tk,h6),m6.wc=0==h6?-1:(1<<h6)-1,R){Y.xb=nK;break t}if(null==(Jt=r(pt*gt))){Y.a=1,ht=0;break t}ht=(ht=nc(Y,Jt,0,pt,gt,gt,null))&&!wt.h;break t}return ht?(null!=st?st[0]=Jt:(o(null==Jt),o(R)),Y.$=0,R||Yc(Ot)):Yc(Ot),ht}function oh(g,k){var R=g.c*g.i,Y=R+k+16*k;return o(g.c<=k),g.V=r(Y),null==g.V?(g.Ta=null,g.Ua=0,g.a=1,0):(g.Ta=g.V,g.Ua=g.Ba+R+k,1)}function $p(g,k){var R=g.C,Y=k-R,st=g.V,ht=g.Ba+g.c*R;for(o(k<=g.l.o);0<Y;){var pt=16<Y?16:Y,gt=g.l.ma,wt=g.l.width,Ot=wt*pt,Jt=gt.ca,ue=gt.tb+wt*R,de=g.Ta,Xt=g.Ua;Rs(g,pt,st,ht),yT(de,Xt,Jt,ue,Ot),tc(gt,R,R+pt,Jt,ue,wt),Y-=pt,st+=pt*g.c,R+=pt}o(R==k),g.C=g.Ma=k}function Yp(){this.ub=this.yd=this.td=this.Rb=0}function Kp(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Wp(){this.Fb=this.Bb=this.Cb=0,this.Zb=r(4),this.Lb=r(4)}function $x(){var g;this.Yb=(function k(R,Y,st){for(var ht=st[Y],pt=0;pt<ht&&(R.push(st.length>Y+1?[]:0),!(st.length<Y+1));pt++)k(R[pt],Y+1,st)}(g=[],0,[3,11]),g)}function Tw(){this.jb=r(3),this.Wc=l([4,8],$x),this.Xc=l([4,17],$x)}function kw(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new r(4),this.od=new r(4)}function Vp(){this.ld=this.La=this.dd=this.tc=0}function Yx(){this.Na=this.la=0}function Aw(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ig(){this.ad=r(384),this.Za=0,this.Ob=r(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Sw(){this.uc=this.M=this.Nb=0,this.wa=Array(new Vp),this.Y=0,this.ya=Array(new Ig),this.aa=0,this.l=new Xp}function Kx(){this.y=r(16),this.f=r(8),this.ea=r(8)}function Ow(){this.cb=this.a=0,this.sc="",this.m=new we,this.Od=new Yp,this.Kc=new Kp,this.ed=new kw,this.Qa=new Wp,this.Ic=this.$c=this.Aa=0,this.D=new Sw,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=s(8,we),this.ia=0,this.pb=s(4,Aw),this.Pa=new Tw,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Kx),this.Hd=0,this.rb=Array(new Yx),this.sb=0,this.wa=Array(new Vp),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ig),this.L=this.aa=0,this.gd=l([4,2],Vp),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Xp(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Ew(){var g=new Ow;return null!=g&&(g.a=0,g.sc="OK",g.cb=0,g.Xb=0,t1||(t1=Xx)),g}function _a(g,k,R){return 0==g.a&&(g.a=k,g.sc=R,g.cb=0),0}function Wx(g,k,R){return 3<=R&&157==g[k+0]&&1==g[k+1]&&42==g[k+2]}function Vx(g,k){if(null==g)return 0;if(g.a=0,g.sc="OK",null==k)return _a(g,2,"null VP8Io passed to VP8GetHeaders()");var R=k.data,Y=k.w,st=k.ha;if(4>st)return _a(g,7,"Truncated header.");var ht=R[Y+0]|R[Y+1]<<8|R[Y+2]<<16,pt=g.Od;if(pt.Rb=!(1&ht),pt.td=ht>>1&7,pt.yd=ht>>4&1,pt.ub=ht>>5,3<pt.td)return _a(g,3,"Incorrect keyframe parameters.");if(!pt.yd)return _a(g,4,"Frame not displayable.");Y+=3,st-=3;var gt=g.Kc;if(pt.Rb){if(7>st)return _a(g,7,"cannot parse picture header");if(!Wx(R,Y,st))return _a(g,3,"Bad code word");gt.c=16383&(R[Y+4]<<8|R[Y+3]),gt.Td=R[Y+4]>>6,gt.i=16383&(R[Y+6]<<8|R[Y+5]),gt.Ud=R[Y+6]>>6,Y+=7,st-=7,g.za=gt.c+15>>4,g.Ub=gt.i+15>>4,k.width=gt.c,k.height=gt.i,k.Da=0,k.j=0,k.v=0,k.va=k.width,k.o=k.height,k.da=0,k.ib=k.width,k.hb=k.height,k.U=k.width,k.T=k.height,a((ht=g.Pa).jb,0,255,ht.jb.length),o(null!=(ht=g.Qa)),ht.Cb=0,ht.Bb=0,ht.Fb=1,a(ht.Zb,0,0,ht.Zb.length),a(ht.Lb,0,0,ht.Lb)}if(pt.ub>st)return _a(g,7,"bad partition length");Tt(ht=g.m,R,Y,pt.ub),Y+=pt.ub,st-=pt.ub,pt.Rb&&(gt.Ld=ee(ht),gt.Kd=ee(ht)),gt=g.Qa;var wt,Ot=g.Pa;if(o(null!=ht),o(null!=gt),gt.Cb=ee(ht),gt.Cb){if(gt.Bb=ee(ht),ee(ht)){for(gt.Fb=ee(ht),wt=0;4>wt;++wt)gt.Zb[wt]=ee(ht)?ie(ht,7):0;for(wt=0;4>wt;++wt)gt.Lb[wt]=ee(ht)?ie(ht,6):0}if(gt.Bb)for(wt=0;3>wt;++wt)Ot.jb[wt]=ee(ht)?Vt(ht,8):255}else gt.Bb=0;if(ht.Ka)return _a(g,3,"cannot parse segment header");if((gt=g.ed).zd=ee(ht),gt.Tb=Vt(ht,6),gt.wb=Vt(ht,3),gt.Pc=ee(ht),gt.Pc&&ee(ht)){for(Ot=0;4>Ot;++Ot)ee(ht)&&(gt.vd[Ot]=ie(ht,6));for(Ot=0;4>Ot;++Ot)ee(ht)&&(gt.od[Ot]=ie(ht,6))}if(g.L=0==gt.Tb?0:gt.zd?1:2,ht.Ka)return _a(g,3,"cannot parse filter header");var Jt=st;if(st=wt=Y,Y=wt+Jt,gt=Jt,g.Xb=(1<<Vt(g.m,2))-1,Jt<3*(Ot=g.Xb))R=7;else{for(wt+=3*Ot,gt-=3*Ot,Jt=0;Jt<Ot;++Jt){var ue=R[st+0]|R[st+1]<<8|R[st+2]<<16;ue>gt&&(ue=gt),Tt(g.Jc[+Jt],R,wt,ue),wt+=ue,gt-=ue,st+=3}Tt(g.Jc[+Ot],R,wt,gt),R=wt<Y?0:5}if(0!=R)return _a(g,R,"cannot parse partitions");for(R=Vt(wt=g.m,7),st=ee(wt)?ie(wt,4):0,Y=ee(wt)?ie(wt,4):0,gt=ee(wt)?ie(wt,4):0,Ot=ee(wt)?ie(wt,4):0,wt=ee(wt)?ie(wt,4):0,Jt=g.Qa,ue=0;4>ue;++ue){if(Jt.Cb){var de=Jt.Zb[ue];Jt.Fb||(de+=R)}else{if(0<ue){g.pb[ue]=g.pb[0];continue}de=R}var Xt=g.pb[ue];Xt.Sc[0]=n6[Us(de+st,127)],Xt.Sc[1]=i6[Us(de+0,127)],Xt.Eb[0]=2*n6[Us(de+Y,127)],Xt.Eb[1]=101581*i6[Us(de+gt,127)]>>16,8>Xt.Eb[1]&&(Xt.Eb[1]=8),Xt.Qc[0]=n6[Us(de+Ot,117)],Xt.Qc[1]=i6[Us(de+wt,127)],Xt.lc=de+wt}if(!pt.Rb)return _a(g,4,"Not a key frame.");for(ee(ht),pt=g.Pa,R=0;4>R;++R){for(st=0;8>st;++st)for(Y=0;3>Y;++Y)for(gt=0;11>gt;++gt)Ot=re(ht,tK[R][st][Y][gt])?Vt(ht,8):VY[R][st][Y][gt],pt.Wc[R][st].Yb[Y][gt]=Ot;for(st=0;17>st;++st)pt.Xc[R][st]=pt.Wc[R][eK[st]]}return g.kc=ee(ht),g.kc&&(g.Bd=Vt(ht,8)),g.cb=1}function Xx(g,k,R,Y,st,ht,pt){var gt=k[st].Yb[R];for(R=0;16>st;++st){if(!re(g,gt[R+0]))return st;for(;!re(g,gt[R+1]);)if(gt=k[++st].Yb[0],R=0,16==st)return 16;var wt=k[st+1].Yb;if(re(g,gt[R+2])){var Ot=g,Jt=0;if(re(Ot,(de=gt)[(ue=R)+3]))if(re(Ot,de[ue+6])){for(gt=0,ue=2*(Jt=re(Ot,de[ue+8]))+(de=re(Ot,de[ue+9+Jt])),Jt=0,de=KY[ue];de[gt];++gt)Jt+=Jt+re(Ot,de[gt]);Jt+=3+(8<<ue)}else re(Ot,de[ue+7])?(Jt=7+2*re(Ot,165),Jt+=re(Ot,145)):Jt=5+re(Ot,159);else Jt=re(Ot,de[ue+4])?3+re(Ot,de[ue+5]):2;gt=wt[2]}else Jt=1,gt=wt[1];wt=pt+WY[st],0>(Ot=g).b&&le(Ot);var ue,de=Ot.b,Xt=(ue=Ot.Ca>>1)-(Ot.I>>de)>>31;--Ot.b,Ot.Ca+=Xt,Ot.Ca|=1,Ot.I-=(ue+1&Xt)<<de,ht[wt]=((Jt^Xt)-Xt)*Y[(0<st)+0]}return 16}function Lg(g){var k=g.rb[g.sb-1];k.la=0,k.Na=0,a(g.zc,0,0,g.zc.length),g.ja=0}function ic(g,k,R,Y,st){g[k+R+32*Y]=-256&(st=g[k+R+32*Y]+(st>>3))?0>st?0:255:st}function t_(g,k,R,Y,st,ht){ic(g,k,0,R,Y+st),ic(g,k,1,R,Y+ht),ic(g,k,2,R,Y-ht),ic(g,k,3,R,Y-st)}function _s(g){return(20091*g>>16)+g}function Pg(g,k,R,Y){var st,ht=0,pt=r(16);for(st=0;4>st;++st){var gt=g[k+0]+g[k+8],wt=g[k+0]-g[k+8],Ot=(35468*g[k+4]>>16)-_s(g[k+12]),Jt=_s(g[k+4])+(35468*g[k+12]>>16);pt[ht+0]=gt+Jt,pt[ht+1]=wt+Ot,pt[ht+2]=wt-Ot,pt[ht+3]=gt-Jt,ht+=4,k++}for(st=ht=0;4>st;++st)gt=(g=pt[ht+0]+4)+pt[ht+8],wt=g-pt[ht+8],Ot=(35468*pt[ht+4]>>16)-_s(pt[ht+12]),ic(R,Y,0,0,gt+(Jt=_s(pt[ht+4])+(35468*pt[ht+12]>>16))),ic(R,Y,1,0,wt+Ot),ic(R,Y,2,0,wt-Ot),ic(R,Y,3,0,gt-Jt),ht++,Y+=32}function t2(g,k,R,Y){var st=g[k+0]+4,ht=35468*g[k+4]>>16,pt=_s(g[k+4]),gt=35468*g[k+1]>>16;t_(R,Y,0,st+pt,g=_s(g[k+1]),gt),t_(R,Y,1,st+ht,g,gt),t_(R,Y,2,st-ht,g,gt),t_(R,Y,3,st-pt,g,gt)}function Iw(g,k,R,Y,st){Pg(g,k,R,Y),st&&Pg(g,k+16,R,Y+4)}function e2(g,k,R,Y){p_(g,k+0,R,Y,1),p_(g,k+32,R,Y+128,1)}function Lw(g,k,R,Y){var st;for(g=g[k+0]+4,st=0;4>st;++st)for(k=0;4>k;++k)ic(R,Y,k,st,g)}function n2(g,k,R,Y){g[k+0]&&cc(g,k+0,R,Y),g[k+16]&&cc(g,k+16,R,Y+4),g[k+32]&&cc(g,k+32,R,Y+128),g[k+48]&&cc(g,k+48,R,Y+128+4)}function Pw(g,k,R,Y){var st,ht=r(16);for(st=0;4>st;++st){var pt=g[k+0+st]+g[k+12+st],gt=g[k+4+st]+g[k+8+st],wt=g[k+4+st]-g[k+8+st],Ot=g[k+0+st]-g[k+12+st];ht[0+st]=pt+gt,ht[8+st]=pt-gt,ht[4+st]=Ot+wt,ht[12+st]=Ot-wt}for(st=0;4>st;++st)pt=(g=ht[0+4*st]+3)+ht[3+4*st],wt=ht[1+4*st]-ht[2+4*st],Ot=g-ht[3+4*st],R[Y+0]=pt+(gt=ht[1+4*st]+ht[2+4*st])>>3,R[Y+16]=Ot+wt>>3,R[Y+32]=pt-gt>>3,R[Y+48]=Ot-wt>>3,Y+=64}function Ng(g,k,R){var Y,st=k-32,ht=Bs,pt=255-g[st-1];for(Y=0;Y<R;++Y){var gt,wt=ht,Ot=pt+g[k-1];for(gt=0;gt<R;++gt)g[k+gt]=wt[Ot+g[st+gt]];k+=32}}function Nw(g,k){Ng(g,k,4)}function Zw(g,k){Ng(g,k,8)}function Dw(g,k){Ng(g,k,16)}function Qu(g,k){var R;for(R=0;16>R;++R)i(g,k+32*R,g,k-32,16)}function e_(g,k){var R;for(R=16;0<R;--R)a(g,k,g[k-1],16),k+=32}function n_(g,k,R){var Y;for(Y=0;16>Y;++Y)a(k,R+32*Y,g,16)}function i2(g,k){var R,Y=16;for(R=0;16>R;++R)Y+=g[k-1+32*R]+g[k+R-32];n_(Y>>5,g,k)}function Or(g,k){var R,Y=8;for(R=0;16>R;++R)Y+=g[k-1+32*R];n_(Y>>4,g,k)}function jw(g,k){var R,Y=8;for(R=0;16>R;++R)Y+=g[k+R-32];n_(Y>>4,g,k)}function o2(g,k){n_(128,g,k)}function Hn(g,k,R){return g+2*k+R+2>>2}function qw(g,k){var R,Y=k-32;for(Y=new Uint8Array([Hn(g[Y-1],g[Y+0],g[Y+1]),Hn(g[Y+0],g[Y+1],g[Y+2]),Hn(g[Y+1],g[Y+2],g[Y+3]),Hn(g[Y+2],g[Y+3],g[Y+4])]),R=0;4>R;++R)i(g,k+32*R,Y,0,Y.length)}function Fw(g,k){var R=g[k-1],Y=g[k-1+32],st=g[k-1+64],ht=g[k-1+96];Qe(g,k+0,16843009*Hn(g[k-1-32],R,Y)),Qe(g,k+32,16843009*Hn(R,Y,st)),Qe(g,k+64,16843009*Hn(Y,st,ht)),Qe(g,k+96,16843009*Hn(st,ht,ht))}function Wc(g,k){var R,Y=4;for(R=0;4>R;++R)Y+=g[k+R-32]+g[k-1+32*R];for(Y>>=3,R=0;4>R;++R)a(g,k+32*R,Y,4)}function a2(g,k){var R=g[k-1+0],Y=g[k-1+32],st=g[k-1+64],ht=g[k-1-32],pt=g[k+0-32],gt=g[k+1-32],wt=g[k+2-32],Ot=g[k+3-32];g[k+0+96]=Hn(Y,st,g[k-1+96]),g[k+1+96]=g[k+0+64]=Hn(R,Y,st),g[k+2+96]=g[k+1+64]=g[k+0+32]=Hn(ht,R,Y),g[k+3+96]=g[k+2+64]=g[k+1+32]=g[k+0+0]=Hn(pt,ht,R),g[k+3+64]=g[k+2+32]=g[k+1+0]=Hn(gt,pt,ht),g[k+3+32]=g[k+2+0]=Hn(wt,gt,pt),g[k+3+0]=Hn(Ot,wt,gt)}function r2(g,k){var R=g[k+1-32],Y=g[k+2-32],st=g[k+3-32],ht=g[k+4-32],pt=g[k+5-32],gt=g[k+6-32],wt=g[k+7-32];g[k+0+0]=Hn(g[k+0-32],R,Y),g[k+1+0]=g[k+0+32]=Hn(R,Y,st),g[k+2+0]=g[k+1+32]=g[k+0+64]=Hn(Y,st,ht),g[k+3+0]=g[k+2+32]=g[k+1+64]=g[k+0+96]=Hn(st,ht,pt),g[k+3+32]=g[k+2+64]=g[k+1+96]=Hn(ht,pt,gt),g[k+3+64]=g[k+2+96]=Hn(pt,gt,wt),g[k+3+96]=Hn(gt,wt,wt)}function i_(g,k){var R=g[k-1+0],Y=g[k-1+32],st=g[k-1+64],ht=g[k-1-32],pt=g[k+0-32],gt=g[k+1-32],wt=g[k+2-32],Ot=g[k+3-32];g[k+0+0]=g[k+1+64]=ht+pt+1>>1,g[k+1+0]=g[k+2+64]=pt+gt+1>>1,g[k+2+0]=g[k+3+64]=gt+wt+1>>1,g[k+3+0]=wt+Ot+1>>1,g[k+0+96]=Hn(st,Y,R),g[k+0+64]=Hn(Y,R,ht),g[k+0+32]=g[k+1+96]=Hn(R,ht,pt),g[k+1+32]=g[k+2+96]=Hn(ht,pt,gt),g[k+2+32]=g[k+3+96]=Hn(pt,gt,wt),g[k+3+32]=Hn(gt,wt,Ot)}function Zg(g,k){var R=g[k+0-32],Y=g[k+1-32],st=g[k+2-32],ht=g[k+3-32],pt=g[k+4-32],gt=g[k+5-32],wt=g[k+6-32],Ot=g[k+7-32];g[k+0+0]=R+Y+1>>1,g[k+1+0]=g[k+0+64]=Y+st+1>>1,g[k+2+0]=g[k+1+64]=st+ht+1>>1,g[k+3+0]=g[k+2+64]=ht+pt+1>>1,g[k+0+32]=Hn(R,Y,st),g[k+1+32]=g[k+0+96]=Hn(Y,st,ht),g[k+2+32]=g[k+1+96]=Hn(st,ht,pt),g[k+3+32]=g[k+2+96]=Hn(ht,pt,gt),g[k+3+64]=Hn(pt,gt,wt),g[k+3+96]=Hn(gt,wt,Ot)}function Qw(g,k){var R=g[k-1+0],Y=g[k-1+32],st=g[k-1+64],ht=g[k-1+96];g[k+0+0]=R+Y+1>>1,g[k+2+0]=g[k+0+32]=Y+st+1>>1,g[k+2+32]=g[k+0+64]=st+ht+1>>1,g[k+1+0]=Hn(R,Y,st),g[k+3+0]=g[k+1+32]=Hn(Y,st,ht),g[k+3+32]=g[k+1+64]=Hn(st,ht,ht),g[k+3+64]=g[k+2+64]=g[k+0+96]=g[k+1+96]=g[k+2+96]=g[k+3+96]=ht}function Rw(g,k){var R=g[k-1+0],Y=g[k-1+32],st=g[k-1+64],ht=g[k-1+96],pt=g[k-1-32],gt=g[k+0-32],wt=g[k+1-32],Ot=g[k+2-32];g[k+0+0]=g[k+2+32]=R+pt+1>>1,g[k+0+32]=g[k+2+64]=Y+R+1>>1,g[k+0+64]=g[k+2+96]=st+Y+1>>1,g[k+0+96]=ht+st+1>>1,g[k+3+0]=Hn(gt,wt,Ot),g[k+2+0]=Hn(pt,gt,wt),g[k+1+0]=g[k+3+32]=Hn(R,pt,gt),g[k+1+32]=g[k+3+64]=Hn(Y,R,pt),g[k+1+64]=g[k+3+96]=Hn(st,Y,R),g[k+1+96]=Hn(ht,st,Y)}function Uw(g,k){var R;for(R=0;8>R;++R)i(g,k+32*R,g,k-32,8)}function Dg(g,k){var R;for(R=0;8>R;++R)a(g,k,g[k-1],8),k+=32}function ah(g,k,R){var Y;for(Y=0;8>Y;++Y)a(k,R+32*Y,g,8)}function jd(g,k){var R,Y=8;for(R=0;8>R;++R)Y+=g[k+R-32]+g[k-1+32*R];ah(Y>>4,g,k)}function Bw(g,k){var R,Y=4;for(R=0;8>R;++R)Y+=g[k+R-32];ah(Y>>3,g,k)}function rh(g,k){var R,Y=4;for(R=0;8>R;++R)Y+=g[k-1+32*R];ah(Y>>3,g,k)}function jg(g,k){ah(128,g,k)}function o_(g,k,R){var Y=g[k-R],st=g[k+0],ht=3*(st-Y)+Ww[1020+g[k-2*R]-g[k+R]],pt=f2[112+(ht+4>>3)];g[k-R]=Bs[255+Y+f2[112+(ht+3>>3)]],g[k+0]=Bs[255+st-pt]}function s2(g,k,R,Y){return yl[255+g[k-2*R]-g[k-R]]>Y||yl[255+g[k+R]-g[k+0]]>Y}function l2(g,k,R,Y){return 4*yl[255+g[k-R]-g[k+0]]+yl[255+g[k-2*R]-g[k+R]]<=Y}function c2(g,k,R,Y,st){var ht=g[k-3*R],pt=g[k-2*R],gt=g[k-R],wt=g[k+0],Ot=g[k+R],Jt=g[k+2*R];return 4*yl[255+gt-wt]+yl[255+pt-Ot]>Y?0:yl[255+g[k-4*R]-ht]<=st&&yl[255+ht-pt]<=st&&yl[255+pt-gt]<=st&&yl[255+g[k+3*R]-Jt]<=st&&yl[255+Jt-Ot]<=st&&yl[255+Ot-wt]<=st}function u2(g,k,R,Y){var st=2*Y+1;for(Y=0;16>Y;++Y)l2(g,k+Y,R,st)&&o_(g,k+Y,R)}function Ru(g,k,R,Y){var st=2*Y+1;for(Y=0;16>Y;++Y)l2(g,k+Y*R,1,st)&&o_(g,k+Y*R,1)}function qd(g,k,R,Y){var st;for(st=3;0<st;--st)u2(g,k+=4*R,R,Y)}function zw(g,k,R,Y){var st;for(st=3;0<st;--st)Ru(g,k+=4,R,Y)}function Fd(g,k,R,Y,st,ht,pt,gt){for(ht=2*ht+1;0<st--;){if(c2(g,k,R,ht,pt))if(s2(g,k,R,gt))o_(g,k,R);else{var wt=g,Ot=k,Jt=R,ue=wt[Ot-2*Jt],de=wt[Ot-Jt],Xt=wt[Ot+0],Ie=wt[Ot+Jt],ge=wt[Ot+2*Jt],Ht=27*(Oe=Ww[1020+3*(Xt-de)+Ww[1020+ue-Ie]])+63>>7,Kt=18*Oe+63>>7,Oe=9*Oe+63>>7;wt[Ot-3*Jt]=Bs[255+wt[Ot-3*Jt]+Oe],wt[Ot-2*Jt]=Bs[255+ue+Kt],wt[Ot-Jt]=Bs[255+de+Ht],wt[Ot+0]=Bs[255+Xt-Ht],wt[Ot+Jt]=Bs[255+Ie-Kt],wt[Ot+2*Jt]=Bs[255+ge-Oe]}k+=Y}}function oc(g,k,R,Y,st,ht,pt,gt){for(ht=2*ht+1;0<st--;){if(c2(g,k,R,ht,pt))if(s2(g,k,R,gt))o_(g,k,R);else{var wt=g,Ot=k,Jt=R,ue=wt[Ot-Jt],de=wt[Ot+0],Xt=wt[Ot+Jt],Ie=f2[112+(4+(ge=3*(de-ue))>>3)],ge=f2[112+(ge+3>>3)],Ht=Ie+1>>1;wt[Ot-2*Jt]=Bs[255+wt[Ot-2*Jt]+Ht],wt[Ot-Jt]=Bs[255+ue+ge],wt[Ot+0]=Bs[255+de-Ie],wt[Ot+Jt]=Bs[255+Xt-Ht]}k+=Y}}function qg(g,k,R,Y,st,ht){Fd(g,k,R,1,16,Y,st,ht)}function sh(g,k,R,Y,st,ht){Fd(g,k,1,R,16,Y,st,ht)}function Jw(g,k,R,Y,st,ht){var pt;for(pt=3;0<pt;--pt)oc(g,k+=4*R,R,1,16,Y,st,ht)}function a_(g,k,R,Y,st,ht){var pt;for(pt=3;0<pt;--pt)oc(g,k+=4,1,R,16,Y,st,ht)}function Hw(g,k,R,Y,st,ht,pt,gt){Fd(g,k,st,1,8,ht,pt,gt),Fd(R,Y,st,1,8,ht,pt,gt)}function Fg(g,k,R,Y,st,ht,pt,gt){Fd(g,k,1,st,8,ht,pt,gt),Fd(R,Y,1,st,8,ht,pt,gt)}function Qg(g,k,R,Y,st,ht,pt,gt){oc(g,k+4*st,st,1,8,ht,pt,gt),oc(R,Y+4*st,st,1,8,ht,pt,gt)}function d2(g,k,R,Y,st,ht,pt,gt){oc(g,k+4,1,st,8,ht,pt,gt),oc(R,Y+4,1,st,8,ht,pt,gt)}function r_(){this.ba=new Vl,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new oa,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Rg(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Ug(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function m2(){this.ua=0,this.Wa=new Pt,this.vb=new Pt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new It,this.yc=new _t}function Gw(){this.xb=this.a=0,this.l=new Xp,this.ca=new Vl,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new at,this.Pb=0,this.wd=new at,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new m2,this.ab=0,this.gc=s(4,Ug),this.Oc=0}function s_(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Xp,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function lh(g,k,R,Y,st,ht,pt){for(g=null==g?0:g[k+0],k=0;k<pt;++k)st[ht+k]=g+R[Y+k]&255,g=st[ht+k]}function Bg(g,k,R,Y,st,ht,pt){var gt;if(null==g)lh(null,null,R,Y,st,ht,pt);else for(gt=0;gt<pt;++gt)st[ht+gt]=g[k+gt]+R[Y+gt]&255}function Qd(g,k,R,Y,st,ht,pt){if(null==g)lh(null,null,R,Y,st,ht,pt);else{var gt,wt=g[k+0],Ot=wt,Jt=wt;for(gt=0;gt<pt;++gt)Ot=Jt+(wt=g[k+gt])-Ot,Jt=R[Y+gt]+(-256&Ot?0>Ot?0:255:Ot)&255,Ot=wt,st[ht+gt]=Jt}}function zg(g,k,R,Y){var st=k.width,ht=k.o;if(o(null!=g&&null!=k),0>R||0>=Y||R+Y>ht)return null;if(!g.Cc){if(null==g.ga){var pt;if(g.ga=new s_,(pt=null==g.ga)||(pt=k.width*k.o,o(0==g.Gb.length),g.Gb=r(pt),g.Uc=0,null==g.Gb?pt=0:(g.mb=g.Gb,g.nb=g.Uc,g.rc=null,pt=1),pt=!pt),!pt){var gt=g.Fa,wt=g.P,Ot=g.qc,Jt=g.mb,ue=g.nb,de=wt+1,Xt=Ot-1,Ie=(pt=g.ga).l;if(o(null!=gt&&null!=Jt&&null!=k),Gd[0]=null,Gd[1]=lh,Gd[2]=Bg,Gd[3]=Qd,pt.ca=Jt,pt.tb=ue,pt.c=k.width,pt.i=k.height,o(0<pt.c&&0<pt.i),1>=Ot)k=0;else if(pt.$a=gt[wt+0]>>0&3,pt.Z=gt[wt+0]>>2&3,pt.Lc=gt[wt+0]>>4&3,wt=gt[wt+0]>>6&3,0>pt.$a||1<pt.$a||4<=pt.Z||1<pt.Lc||wt)k=0;else if(Ie.put=Hc,Ie.ac=dr,Ie.bc=Gc,Ie.ma=pt,Ie.width=k.width,Ie.height=k.height,Ie.Da=k.Da,Ie.v=k.v,Ie.va=k.va,Ie.j=k.j,Ie.o=k.o,pt.$a)t:{o(1==pt.$a),k=xl();e:for(;;){if(null==k){k=0;break t}if(o(null!=pt),pt.mc=k,k.c=pt.c,k.i=pt.i,k.l=pt.l,k.l.ma=pt,k.l.width=pt.c,k.l.height=pt.i,k.a=0,Wt(k.m,gt,de,Xt),!Kc(pt.c,pt.i,1,k,null)||(1==k.ab&&3==k.gc[0].hc&&Fu(k.s)?(pt.ic=1,gt=k.c*k.i,k.Ta=null,k.Ua=0,k.V=r(gt),k.Ba=0,null==k.V?(k.a=1,k=0):k=1):(pt.ic=0,k=oh(k,pt.c)),!k))break e;k=1;break t}pt.mc=null,k=0}else k=Xt>=pt.c*pt.i;pt=!k}if(pt)return null;1!=g.ga.Lc?g.Ga=0:Y=ht-R}o(null!=g.ga),o(R+Y<=ht);t:{if(k=(gt=g.ga).c,ht=gt.l.o,0==gt.$a){if(de=g.rc,Xt=g.Vc,Ie=g.Fa,Ot=g.mb,Jt=g.nb+R*k,o((wt=g.P+1+R*k)<=g.P+g.qc),0!=gt.Z)for(o(null!=Gd[gt.Z]),pt=0;pt<Y;++pt)Gd[gt.Z](de,Xt,Ie,wt,Ot,Jt,k),de=Ot,Xt=Jt,Jt+=k,wt+=k;else for(pt=0;pt<Y;++pt)i(Ot,Jt,Ie,wt,k),de=Ot,Xt=Jt,Jt+=k,wt+=k;g.rc=de,g.Vc=Xt}else{if(o(null!=gt.mc),k=R+Y,o(null!=(pt=gt.mc)),o(k<=pt.i),pt.C>=k)k=1;else if(gt.ic||ae(),gt.ic){gt=pt.V,de=pt.Ba;var ge=pt.i,Ht=(Ie=1,wt=pt.$/(Xt=pt.c),Ot=pt.$%Xt,Jt=pt.m,ue=pt.s,pt.$),Kt=Xt*ge,Oe=Xt*k,Ze=ue.wc,Me=Ht<Oe?Oa(ue,Ot,wt):null;o(Ht<=Kt),o(k<=ge),o(Fu(ue));e:for(;;){for(;!Jt.h&&Ht<Oe;){if(Ot&Ze||(Me=Oa(ue,Ot,wt)),o(null!=Me),Gt(Jt),256>(ge=ps(Me.G[0],Me.H[0],Jt)))gt[de+Ht]=ge,++Ht,++Ot>=Xt&&(Ot=0,++wt<=k&&!(wt%16)&&ec(pt,wt));else{if(!(280>ge)){Ie=0;break e}ge=Xl(ge-256,Jt);var _n,Xe=ps(Me.G[4],Me.H[4],Jt);if(Gt(Jt),!(Ht>=(Xe=$c(Xt,Xe=Xl(Xe,Jt)))&&Kt-Ht>=ge)){Ie=0;break e}for(_n=0;_n<ge;++_n)gt[de+Ht+_n]=gt[de+Ht+_n-Xe];for(Ht+=ge,Ot+=ge;Ot>=Xt;)Ot-=Xt,++wt<=k&&!(wt%16)&&ec(pt,wt);Ht<Oe&&Ot&Ze&&(Me=Oa(ue,Ot,wt))}o(Jt.h==Et(Jt))}ec(pt,wt>k?k:wt);break e}!Ie||Jt.h&&Ht<Kt?(Ie=0,pt.a=Jt.h?5:3):pt.$=Ht,k=Ie}else k=nc(pt,pt.V,pt.Ba,pt.c,pt.i,k,$p);if(!k){Y=0;break t}}R+Y>=ht&&(g.Cc=1),Y=1}if(!Y)return null;if(g.Cc&&(null!=(Y=g.ga)&&(Y.mc=null),g.ga=null,0<g.Ga))return alert("todo:WebPDequantizeLevels"),null}return g.nb+R*st}function Z(g,k,R,Y,st,ht){for(;0<st--;){var pt,gt=g,wt=k+(R?1:0),Ot=g,Jt=k+(R?0:3);for(pt=0;pt<Y;++pt){var ue=Ot[Jt+4*pt];255!=ue&&(gt[wt+4*pt+0]=gt[wt+4*pt+0]*(ue*=32897)>>23,gt[wt+4*pt+1]=gt[wt+4*pt+1]*ue>>23,gt[wt+4*pt+2]=gt[wt+4*pt+2]*ue>>23)}k+=ht}}function lt(g,k,R,Y,st){for(;0<Y--;){var ht;for(ht=0;ht<R;++ht){var pt=g[k+2*ht+0],gt=15&(Ot=g[k+2*ht+1]),wt=4369*gt,Ot=(240&Ot|Ot>>4)*wt>>16;g[k+2*ht+0]=(240&pt|pt>>4)*wt>>16&240|(15&pt|pt<<4)*wt>>16>>4&15,g[k+2*ht+1]=240&Ot|gt}k+=st}}function Lt(g,k,R,Y,st,ht,pt,gt){var wt,Ot,Jt=255;for(Ot=0;Ot<st;++Ot){for(wt=0;wt<Y;++wt){var ue=g[k+wt];ht[pt+4*wt]=ue,Jt&=ue}k+=R,pt+=gt}return 255!=Jt}function Bt(g,k,R,Y,st){var ht;for(ht=0;ht<st;++ht)R[Y+ht]=g[k+ht]>>8}function ae(){Jd=Z,f_=lt,_2=Lt,yT=Bt}function be(g,k,R){et[g]=function(Y,st,ht,pt,gt,wt,Ot,Jt,ue,de,Xt,Ie,ge,Ht,Kt,Oe,Ze){var Me,_n=Ze-1>>1,Xe=gt[wt+0]|Ot[Jt+0]<<16,Zn=ue[de+0]|Xt[Ie+0]<<16;o(null!=Y);var sn=3*Xe+Zn+131074>>2;for(k(Y[st+0],255&sn,sn>>16,ge,Ht),null!=ht&&k(ht[pt+0],255&(sn=3*Zn+Xe+131074>>2),sn>>16,Kt,Oe),Me=1;Me<=_n;++Me){var Gi=gt[wt+Me]|Ot[Jt+Me]<<16,ao=ue[de+Me]|Xt[Ie+Me]<<16,ji=Xe+Gi+Zn+ao+524296,Ti=ji+2*(Gi+Zn)>>3;sn=Ti+Xe>>1,Xe=(ji=ji+2*(Xe+ao)>>3)+Gi>>1,k(Y[st+2*Me-1],255&sn,sn>>16,ge,Ht+(2*Me-1)*R),k(Y[st+2*Me-0],255&Xe,Xe>>16,ge,Ht+(2*Me-0)*R),null!=ht&&(Xe=Ti+ao>>1,k(ht[pt+2*Me-1],255&(sn=ji+Zn>>1),sn>>16,Kt,Oe+(2*Me-1)*R),k(ht[pt+2*Me+0],255&Xe,Xe>>16,Kt,Oe+(2*Me+0)*R)),Xe=Gi,Zn=ao}1&Ze||(k(Y[st+Ze-1],255&(sn=3*Xe+Zn+131074>>2),sn>>16,ge,Ht+(Ze-1)*R),null!=ht&&k(ht[pt+Ze-1],255&(sn=3*Zn+Xe+131074>>2),sn>>16,Kt,Oe+(Ze-1)*R))}}function Re(){wl[g2]=iK,wl[x2]=LT,wl[ST]=oK,wl[b2]=PT,wl[v2]=NT,wl[Vw]=ZT,wl[OT]=aK,wl[Xw]=LT,wl[t6]=PT,wl[y2]=NT,wl[e6]=ZT}function pn(g){return g&~rK?0>g?0:255:g>>DT}function En(g,k){return pn((19077*g>>8)+(26149*k>>8)-14234)}function ti(g,k,R){return pn((19077*g>>8)-(6419*k>>8)-(13320*R>>8)+8708)}function di(g,k){return pn((19077*g>>8)+(33050*k>>8)-17685)}function Li(g,k,R,Y,st){Y[st+0]=En(g,R),Y[st+1]=ti(g,k,R),Y[st+2]=di(g,k)}function Ko(g,k,R,Y,st){Y[st+0]=di(g,k),Y[st+1]=ti(g,k,R),Y[st+2]=En(g,R)}function aa(g,k,R,Y,st){var ht=ti(g,k,R);k=ht<<3&224|di(g,k)>>3,Y[st+0]=248&En(g,R)|ht>>5,Y[st+1]=k}function Ea(g,k,R,Y,st){var ht=240&di(g,k)|15;Y[st+0]=240&En(g,R)|ti(g,k,R)>>4,Y[st+1]=ht}function Er(g,k,R,Y,st){Y[st+0]=255,Li(g,k,R,Y,st+1)}function Wa(g,k,R,Y,st){Ko(g,k,R,Y,st),Y[st+3]=255}function ac(g,k,R,Y,st){Li(g,k,R,Y,st),Y[st+3]=255}function Us(g,k){return 0>g?0:g>k?k:g}function Uu(g,k,R){et[g]=function(Y,st,ht,pt,gt,wt,Ot,Jt,ue){for(var de=Jt+(-2&ue)*R;Jt!=de;)k(Y[st+0],ht[pt+0],gt[wt+0],Ot,Jt),k(Y[st+1],ht[pt+0],gt[wt+0],Ot,Jt+R),st+=2,++pt,++wt,Jt+=2*R;1&ue&&k(Y[st+0],ht[pt+0],gt[wt+0],Ot,Jt)}}function h2(g,k,R){return 0==R?0==g?0==k?6:5:0==k?4:0:R}function Jg(g,k,R,Y,st){switch(g>>>30){case 3:p_(k,R,Y,st,0);break;case 2:Vg(k,R,Y,st);break;case 1:cc(k,R,Y,st)}}function Hg(g,k){var R,Y,st=k.M,ht=k.Nb,pt=g.oc,gt=g.pc+40,wt=g.oc,Ot=g.pc+584,Jt=g.oc,ue=g.pc+600;for(R=0;16>R;++R)pt[gt+32*R-1]=129;for(R=0;8>R;++R)wt[Ot+32*R-1]=129,Jt[ue+32*R-1]=129;for(0<st?pt[gt-1-32]=wt[Ot-1-32]=Jt[ue-1-32]=129:(a(pt,gt-32-1,127,21),a(wt,Ot-32-1,127,9),a(Jt,ue-32-1,127,9)),Y=0;Y<g.za;++Y){var de=k.ya[k.aa+Y];if(0<Y){for(R=-1;16>R;++R)i(pt,gt+32*R-4,pt,gt+32*R+12,4);for(R=-1;8>R;++R)i(wt,Ot+32*R-4,wt,Ot+32*R+4,4),i(Jt,ue+32*R-4,Jt,ue+32*R+4,4)}var Xt=g.Gd,Ie=g.Hd+Y,ge=de.ad,Ht=de.Hc;if(0<st&&(i(pt,gt-32,Xt[Ie].y,0,16),i(wt,Ot-32,Xt[Ie].f,0,8),i(Jt,ue-32,Xt[Ie].ea,0,8)),de.Za){var Kt=pt,Oe=gt-32+16;for(0<st&&(Y>=g.za-1?a(Kt,Oe,Xt[Ie].y[15],4):i(Kt,Oe,Xt[Ie+1].y,0,4)),R=0;4>R;R++)Kt[Oe+128+R]=Kt[Oe+256+R]=Kt[Oe+384+R]=Kt[Oe+0+R];for(R=0;16>R;++R,Ht<<=2)uc[de.Ob[R]](Kt=pt,Oe=gt+qT[R]),Jg(Ht,ge,16*+R,Kt,Oe)}else if(Kt=h2(Y,st,de.Ob[0]),Hd[Kt](pt,gt),0!=Ht)for(R=0;16>R;++R,Ht<<=2)Jg(Ht,ge,16*+R,pt,gt+qT[R]);for(R=de.Gc,Kt=h2(Y,st,de.Dd),Gu[Kt](wt,Ot),Gu[Kt](Jt,ue),Ht=ge,Kt=wt,Oe=Ot,255&(de=R>>0)&&(170&de?Bd(Ht,256,Kt,Oe):zu(Ht,256,Kt,Oe)),de=Jt,Ht=ue,255&(R>>=8)&&(170&R?Bd(ge,320,de,Ht):zu(ge,320,de,Ht)),st<g.Ub-1&&(i(Xt[Ie].y,0,pt,gt+480,16),i(Xt[Ie].f,0,wt,Ot+224,8),i(Xt[Ie].ea,0,Jt,ue+224,8)),Xt=g.sa,Ie=g.ta+16*Y+16*ht*g.R,ge=g.qa,de=g.ra+8*Y+(R=8*ht*g.B),Ht=g.Ha,Kt=g.Ia+8*Y+R,R=0;16>R;++R)i(Xt,Ie+R*g.R,pt,gt+32*R,16);for(R=0;8>R;++R)i(ge,de+R*g.B,wt,Ot+32*R,8),i(Ht,Kt+R*g.B,Jt,ue+32*R,8)}}function l_(g,k,R,Y,st,ht,pt,gt,wt){var Ot=[0],Jt=[0],ue=0,de=null!=wt?wt.kd:0,Xt=wt??new Rg;if(null==g||12>R)return 7;Xt.data=g,Xt.w=k,Xt.ha=R,k=[k],R=[R],Xt.gb=[Xt.gb];t:{var Ie=k,ge=R,Ht=Xt.gb;if(o(null!=g),o(null!=ge),o(null!=Ht),Ht[0]=0,12<=ge[0]&&!e(g,Ie[0],"RIFF")){if(e(g,Ie[0]+8,"WEBP")){Ht=3;break t}var Kt=en(g,Ie[0]+4);if(12>Kt||4294967286<Kt){Ht=3;break t}if(de&&Kt>ge[0]-8){Ht=7;break t}Ht[0]=Kt,Ie[0]+=12,ge[0]-=12}Ht=0}if(0!=Ht)return Ht;for(Kt=0<Xt.gb[0],R=R[0];;){t:{var Oe=g;ge=k,Ht=R;var Ze=Ot,Me=Jt,_n=Ie=[0];if((sn=ue=[ue])[0]=0,8>Ht[0])Ht=7;else{if(!e(Oe,ge[0],"VP8X")){if(10!=en(Oe,ge[0]+4)){Ht=3;break t}if(18>Ht[0]){Ht=7;break t}var Xe=en(Oe,ge[0]+8),Zn=1+on(Oe,ge[0]+12);if(2147483648<=Zn*(Oe=1+on(Oe,ge[0]+15))){Ht=3;break t}null!=_n&&(_n[0]=Xe),null!=Ze&&(Ze[0]=Zn),null!=Me&&(Me[0]=Oe),ge[0]+=18,Ht[0]-=18,sn[0]=1}Ht=0}}if(ue=ue[0],0!=Ht)return Ht;if(ge=!!(2&(Ie=Ie[0])),!Kt&&ue)return 3;if(null!=ht&&(ht[0]=!!(16&Ie)),null!=pt&&(pt[0]=ge),null!=gt&&(gt[0]=0),pt=Ot[0],Ie=Jt[0],ue&&ge&&null==wt){Ht=0;break}if(4>R){Ht=7;break}if(Kt&&ue||!Kt&&!ue&&!e(g,k[0],"ALPH")){R=[R],Xt.na=[Xt.na],Xt.P=[Xt.P],Xt.Sa=[Xt.Sa];t:{Ht=k,Kt=R;var sn=Xt.gb;Ze=Xt.na,Me=Xt.P,_n=Xt.Sa,Zn=22,o(null!=(Xe=g)),o(null!=Kt),Oe=Ht[0];var Gi=Kt[0];for(o(null!=Ze),o(null!=_n),Ze[0]=null,Me[0]=null,_n[0]=0;;){if(Ht[0]=Oe,Kt[0]=Gi,8>Gi){Ht=7;break t}var ao=en(Xe,Oe+4);if(4294967286<ao){Ht=3;break t}var ji=8+ao+1&-2;if(Zn+=ji,0<sn&&Zn>sn){Ht=3;break t}if(!e(Xe,Oe,"VP8 ")||!e(Xe,Oe,"VP8L")){Ht=0;break t}if(Gi[0]<ji){Ht=7;break t}e(Xe,Oe,"ALPH")||(Ze[0]=Xe,Me[0]=Oe+8,_n[0]=ao),Oe+=ji,Gi-=ji}}if(R=R[0],Xt.na=Xt.na[0],Xt.P=Xt.P[0],Xt.Sa=Xt.Sa[0],0!=Ht)break}R=[R],Xt.Ja=[Xt.Ja],Xt.xa=[Xt.xa];t:if(sn=g,Ht=k,Kt=R,Ze=Xt.gb[0],Me=Xt.Ja,_n=Xt.xa,Xe=Ht[0],Oe=!e(sn,Xe,"VP8 "),Zn=!e(sn,Xe,"VP8L"),o(null!=sn),o(null!=Kt),o(null!=Me),o(null!=_n),8>Kt[0])Ht=7;else{if(Oe||Zn){if(sn=en(sn,Xe+4),12<=Ze&&sn>Ze-12){Ht=3;break t}if(de&&sn>Kt[0]-8){Ht=7;break t}Me[0]=sn,Ht[0]+=8,Kt[0]-=8,_n[0]=Zn}else _n[0]=5<=Kt[0]&&47==sn[Xe+0]&&!(sn[Xe+4]>>5),Me[0]=Kt[0];Ht=0}if(R=R[0],Xt.Ja=Xt.Ja[0],Xt.xa=Xt.xa[0],k=k[0],0!=Ht)break;if(4294967286<Xt.Ja)return 3;if(null==gt||ge||(gt[0]=Xt.xa?2:1),pt=[pt],Ie=[Ie],Xt.xa){if(5>R){Ht=7;break}gt=pt,de=Ie,ge=ht,null==g||5>R?g=0:5<=R&&47==g[k+0]&&!(g[k+4]>>5)?(Kt=[0],sn=[0],Ze=[0],Wt(Me=new at,g,k,R),Fn(Me,Kt,sn,Ze)?(null!=gt&&(gt[0]=Kt[0]),null!=de&&(de[0]=sn[0]),null!=ge&&(ge[0]=Ze[0]),g=1):g=0):g=0}else{if(10>R){Ht=7;break}gt=Ie,null==g||10>R||!Wx(g,k+3,R-3)?g=0:(de=g[k+0]|g[k+1]<<8|g[k+2]<<16,ge=16383&(g[k+7]<<8|g[k+6]),g=16383&(g[k+9]<<8|g[k+8]),1&de||3<(de>>1&7)||!(de>>4&1)||de>>5>=Xt.Ja||!ge||!g?g=0:(pt&&(pt[0]=ge),gt&&(gt[0]=g),g=1))}if(!g||(pt=pt[0],Ie=Ie[0],ue&&(Ot[0]!=pt||Jt[0]!=Ie)))return 3;null!=wt&&(wt[0]=Xt,wt.offset=k-wt.w,o(4294967286>k-wt.w),o(wt.offset==wt.ha-R));break}return 0==Ht||7==Ht&&ue&&null==wt?(null!=ht&&(ht[0]|=null!=Xt.na&&0<Xt.na.length),null!=Y&&(Y[0]=pt),null!=st&&(st[0]=Ie),0):Ht}function Gg(g,k,R){var Y=k.width,st=k.height,ht=0,pt=0,gt=Y,wt=st;if(k.Da=null!=g&&0<g.Da,k.Da&&(gt=g.cd,wt=g.bd,ht=g.v,pt=g.j,11>R||(ht&=-2,pt&=-2),0>ht||0>pt||0>=gt||0>=wt||ht+gt>Y||pt+wt>st))return 0;if(k.v=ht,k.j=pt,k.va=ht+gt,k.o=pt+wt,k.U=gt,k.T=wt,k.da=null!=g&&0<g.da,k.da){if(!wn(gt,wt,R=[g.ib],ht=[g.hb]))return 0;k.ib=R[0],k.hb=ht[0]}return k.ob=null!=g&&g.ob,k.Kb=null==g||!g.Sd,k.da&&(k.ob=k.ib<3*Y/4&&k.hb<3*st/4,k.Kb=0),1}function $g(g){if(null==g)return 2;if(11>g.S){var k=g.f.RGBA;k.fb+=(g.height-1)*k.A,k.A=-k.A}else(k=g.f.kb).O+=((g=g.height)-1)*k.fa,k.fa=-k.fa,k.N+=(g-1>>1)*k.Ab,k.Ab=-k.Ab,k.W+=(g-1>>1)*k.Db,k.Db=-k.Db,null!=k.F&&(k.J+=(g-1)*k.lb,k.lb=-k.lb);return 0}function c_(g,k,R,Y){if(null==Y||0>=g||0>=k)return 2;if(null!=R){if(R.Da){var st=R.cd,ht=R.bd,pt=-2&R.v,gt=-2&R.j;if(0>pt||0>gt||0>=st||0>=ht||pt+st>g||gt+ht>k)return 2;g=st,k=ht}if(R.da){if(!wn(g,k,st=[R.ib],ht=[R.hb]))return 2;g=st[0],k=ht[0]}}Y.width=g,Y.height=k;t:{var wt=Y.width,Ot=Y.height;if(g=Y.S,0>=wt||0>=Ot||!(g>=g2&&13>g))g=2;else{if(0>=Y.Rd&&null==Y.sd){pt=ht=st=k=0;var Jt=(gt=wt*FT[g])*Ot;if(11>g||(ht=(Ot+1)/2*(k=(wt+1)/2),12==g&&(pt=(st=wt)*Ot)),null==(Ot=r(Jt+2*ht+pt))){g=1;break t}Y.sd=Ot,11>g?((wt=Y.f.RGBA).eb=Ot,wt.fb=0,wt.A=gt,wt.size=Jt):((wt=Y.f.kb).y=Ot,wt.O=0,wt.fa=gt,wt.Fd=Jt,wt.f=Ot,wt.N=0+Jt,wt.Ab=k,wt.Cd=ht,wt.ea=Ot,wt.W=0+Jt+ht,wt.Db=k,wt.Ed=ht,12==g&&(wt.F=Ot,wt.J=0+Jt+2*ht),wt.Tc=pt,wt.lb=st)}if(k=1,ht=Y.width,pt=Y.height,(st=Y.S)>=g2&&13>st)if(11>st)g=Y.f.RGBA,k&=(gt=Math.abs(g.A))*(pt-1)+ht<=g.size,k&=gt>=ht*FT[st],k&=null!=g.eb;else{g=Y.f.kb,gt=(ht+1)/2,Jt=(pt+1)/2,wt=Math.abs(g.fa),Ot=Math.abs(g.Ab);var ue=Math.abs(g.Db),de=Math.abs(g.lb);k&=wt*(pt-1)+ht<=g.Fd,k&=Ot*(Jt-1)+gt<=g.Cd,k=(k&=ue*(Jt-1)+gt<=g.Ed)&wt>=ht&Ot>=gt&ue>=gt,k&=null!=g.y,k&=null!=g.f,k&=null!=g.ea,12==st&&(k&=de>=ht,k&=de*(pt-1)+ht<=g.Tc,k&=null!=g.F)}else k=0;g=k?0:2}}return 0!=g||null!=R&&R.fd&&(g=$g(Y)),g}var fs=64,u_=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],d_=24,m_=32,Yg=8,gs=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ge("Predictor0","PredictorAdd0"),et.Predictor0=function(){return 4278190080},et.Predictor1=function(g){return g},et.Predictor2=function(g,k,R){return k[R+0]},et.Predictor3=function(g,k,R){return k[R+1]},et.Predictor4=function(g,k,R){return k[R-1]},et.Predictor5=function(g,k,R){return Ve(Ve(g,k[R+1]),k[R+0])},et.Predictor6=function(g,k,R){return Ve(g,k[R-1])},et.Predictor7=function(g,k,R){return Ve(g,k[R+0])},et.Predictor8=function(g,k,R){return Ve(k[R-1],k[R+0])},et.Predictor9=function(g,k,R){return Ve(k[R+0],k[R+1])},et.Predictor10=function(g,k,R){return Ve(Ve(g,k[R-1]),Ve(k[R+0],k[R+1]))},et.Predictor11=function(g,k,R){var Y=k[R+0];return 0>=Bn(Y>>24&255,g>>24&255,(k=k[R-1])>>24&255)+Bn(Y>>16&255,g>>16&255,k>>16&255)+Bn(Y>>8&255,g>>8&255,k>>8&255)+Bn(255&Y,255&g,255&k)?Y:g},et.Predictor12=function(g,k,R){var Y=k[R+0];return(Cn((g>>24&255)+(Y>>24&255)-((k=k[R-1])>>24&255))<<24|Cn((g>>16&255)+(Y>>16&255)-(k>>16&255))<<16|Cn((g>>8&255)+(Y>>8&255)-(k>>8&255))<<8|Cn((255&g)+(255&Y)-(255&k)))>>>0},et.Predictor13=function(g,k,R){var Y=k[R-1];return(Qn((g=Ve(g,k[R+0]))>>24&255,Y>>24&255)<<24|Qn(g>>16&255,Y>>16&255)<<16|Qn(g>>8&255,Y>>8&255)<<8|Qn(g>>0&255,Y>>0&255))>>>0};var $w=et.PredictorAdd0;et.PredictorAdd1=ui,Ge("Predictor2","PredictorAdd2"),Ge("Predictor3","PredictorAdd3"),Ge("Predictor4","PredictorAdd4"),Ge("Predictor5","PredictorAdd5"),Ge("Predictor6","PredictorAdd6"),Ge("Predictor7","PredictorAdd7"),Ge("Predictor8","PredictorAdd8"),Ge("Predictor9","PredictorAdd9"),Ge("Predictor10","PredictorAdd10"),Ge("Predictor11","PredictorAdd11"),Ge("Predictor12","PredictorAdd12"),Ge("Predictor13","PredictorAdd13");var Kg=et.PredictorAdd2;vi("ColorIndexInverseTransform","MapARGB","32b",function(g){return g>>8&255},function(g){return g}),vi("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(g){return g},function(g){return g>>8&255});var p2,rc=et.ColorIndexInverseTransform,Wg=et.MapARGB,Yw=et.VP8LColorIndexInverseTransformAlpha,Kw=et.MapAlpha,Rd=et.VP8LPredictorsAdd=[];Rd.length=16,(et.VP8LPredictors=[]).length=16,(et.VP8LPredictorsAdd_C=[]).length=16,(et.VP8LPredictors_C=[]).length=16;var bl,sc,Ud,Vc,Bu,h_,lc,p_,Vg,Bd,cc,zu,ch,__,uh,zd,Xg,vl,Ju,Ao,So,fa,Ra,Hu,Jd,f_,_2,yT,wT=r(511),CT=r(2041),TT=r(225),kT=r(767),AT=0,Ww=CT,f2=TT,Bs=kT,yl=wT,g2=0,x2=1,ST=2,b2=3,v2=4,Vw=5,OT=6,Xw=7,t6=8,y2=9,e6=10,BY=[2,3,7],zY=[3,3,11],ET=[280,256,256,256,40],JY=[0,1,1,1,0],HY=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],GY=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],$Y=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],YY=8,n6=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],i6=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],t1=null,KY=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],WY=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],MT=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],VY=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],XY=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],tK=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],eK=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Hd=[],uc=[],Gu=[],nK=1,IT=2,Gd=[],wl=[];be("UpsampleRgbLinePair",Li,3),be("UpsampleBgrLinePair",Ko,3),be("UpsampleRgbaLinePair",ac,4),be("UpsampleBgraLinePair",Wa,4),be("UpsampleArgbLinePair",Er,4),be("UpsampleRgba4444LinePair",Ea,2),be("UpsampleRgb565LinePair",aa,2);var iK=et.UpsampleRgbLinePair,oK=et.UpsampleBgrLinePair,LT=et.UpsampleRgbaLinePair,PT=et.UpsampleBgraLinePair,NT=et.UpsampleArgbLinePair,ZT=et.UpsampleRgba4444LinePair,aK=et.UpsampleRgb565LinePair,w2=16,C2=1<<w2-1,e1=-227,o6=482,DT=6,rK=(256<<DT)-1,jT=0,sK=r(256),lK=r(256),cK=r(256),uK=r(256),dK=r(o6-e1),mK=r(o6-e1);Uu("YuvToRgbRow",Li,3),Uu("YuvToBgrRow",Ko,3),Uu("YuvToRgbaRow",ac,4),Uu("YuvToBgraRow",Wa,4),Uu("YuvToArgbRow",Er,4),Uu("YuvToRgba4444Row",Ea,2),Uu("YuvToRgb565Row",aa,2);var qT=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],T2=[0,2,8],hK=[8,7,6,4,4,2,2,2,1,1,1,1];this.WebPDecodeRGBA=function(g,k,R,Y,st){var ht=x2,pt=new r_,gt=new Vl;pt.ba=gt,gt.S=ht,gt.width=[gt.width],gt.height=[gt.height];var wt=gt.width,Ot=gt.height,Jt=new qu;if(null==Jt||null==g)var ue=2;else o(null!=Jt),ue=l_(g,k,R,Jt.width,Jt.height,Jt.Pd,Jt.Qd,Jt.format,null);if(0!=ue?wt=0:(null!=wt&&(wt[0]=Jt.width[0]),null!=Ot&&(Ot[0]=Jt.height[0]),wt=1),wt){gt.width=gt.width[0],gt.height=gt.height[0],null!=Y&&(Y[0]=gt.width),null!=st&&(st[0]=gt.height);t:{if(Y=new Xp,(st=new Rg).data=g,st.w=k,st.ha=R,st.kd=1,k=[0],o(null!=st),(0==(g=l_(st.data,st.w,st.ha,null,null,null,k,null,st))||7==g)&&k[0]&&(g=4),0==(k=g)){if(o(null!=pt),Y.data=st.data,Y.w=st.w+st.offset,Y.ha=st.ha-st.offset,Y.put=Hc,Y.ac=dr,Y.bc=Gc,Y.ma=pt,st.xa){if(null==(g=xl())){pt=1;break t}if(function(de,Xt){var Ie=[0],ge=[0],Ht=[0];e:for(;;){if(null==de)return 0;if(null==Xt)return de.a=2,0;if(de.l=Xt,de.a=0,Wt(de.m,Xt.data,Xt.w,Xt.ha),!Fn(de.m,Ie,ge,Ht)){de.a=3;break e}if(de.xb=IT,Xt.width=Ie[0],Xt.height=ge[0],!Kc(Ie[0],ge[0],1,de,null))break e;return 1}return o(0!=de.a),0}(g,Y)){if(Y=0==(k=c_(Y.width,Y.height,pt.Oa,pt.ba))){e:{Y=g;n:for(;;){if(null==Y){Y=0;break e}if(o(null!=Y.s.yc),o(null!=Y.s.Ya),o(0<Y.s.Wb),o(null!=(R=Y.l)),o(null!=(st=R.ma)),0!=Y.xb){if(Y.ca=st.ba,Y.tb=st.tb,o(null!=Y.ca),!Gg(st.Oa,R,b2)){Y.a=2;break n}if(!oh(Y,R.width)||R.da)break n;if((R.da||Vi(Y.ca.S))&&ae(),11>Y.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),null!=Y.ca.f.kb.F&&ae()),Y.Pb&&0<Y.s.ua&&null==Y.s.vb.X&&!dn(Y.s.vb,Y.s.Wa.Xa)){Y.a=1;break n}Y.xb=0}if(!nc(Y,Y.V,Y.Ba,Y.c,Y.i,R.o,Gp))break n;st.Dc=Y.Ma,Y=1;break e}o(0!=Y.a),Y=0}Y=!Y}Y&&(k=g.a)}else k=g.a}else{if(null==(g=new Ew)){pt=1;break t}if(g.Fa=st.na,g.P=st.P,g.qc=st.Sa,Vx(g,Y)){if(0==(k=c_(Y.width,Y.height,pt.Oa,pt.ba))){if(g.Aa=0,R=pt.Oa,o(null!=(st=g)),null!=R){if(0<(wt=0>(wt=R.Md)?0:100<wt?255:255*wt/100)){for(Ot=Jt=0;4>Ot;++Ot)12>(ue=st.pb[Ot]).lc&&(ue.ia=wt*hK[0>ue.lc?0:ue.lc]>>3),Jt|=ue.ia;Jt&&(alert("todo:VP8InitRandom"),st.ia=1)}st.Ga=R.Id,100<st.Ga?st.Ga=100:0>st.Ga&&(st.Ga=0)}(function Mw(g,k){if(null==g)return 0;if(null==k)return _a(g,2,"NULL VP8Io parameter in VP8Decode().");if(!g.cb&&!Vx(g,k))return 0;if(o(g.cb),null==k.ac||k.ac(k)){k.ob&&(g.L=0);var R=T2[g.L];if(2==g.L?(g.yb=0,g.zb=0):(g.yb=k.v-R>>4,g.zb=k.j-R>>4,0>g.yb&&(g.yb=0),0>g.zb&&(g.zb=0)),g.Va=k.o+15+R>>4,g.Hb=k.va+15+R>>4,g.Hb>g.za&&(g.Hb=g.za),g.Va>g.Ub&&(g.Va=g.Ub),0<g.L){var Y=g.ed;for(R=0;4>R;++R){var st;if(g.Qa.Cb){var ht=g.Qa.Lb[R];g.Qa.Fb||(ht+=Y.Tb)}else ht=Y.Tb;for(st=0;1>=st;++st){var pt=g.gd[R][st],gt=ht;if(Y.Pc&&(gt+=Y.vd[0],st&&(gt+=Y.od[0])),0<(gt=0>gt?0:63<gt?63:gt)){var wt=gt;0<Y.wb&&(wt=4<Y.wb?wt>>2:wt>>1)>9-Y.wb&&(wt=9-Y.wb),1>wt&&(wt=1),pt.dd=wt,pt.tc=2*gt+wt,pt.ld=40<=gt?2:15<=gt?1:0}else pt.tc=0;pt.La=st}}}R=0}else _a(g,6,"Frame setup failed"),R=g.a;if(R=0==R){if(R){g.$c=0,0<g.Aa||(g.Ic=1);t:{Y=4*(wt=g.za);var Ot=32*wt,Jt=wt+1,ue=0<g.L?wt*(0<g.Aa?2:1):0,de=(2==g.Aa?2:1)*wt;if((pt=Y+832+(st=3*(16*(R=g.Ic)+T2[g.L])/2*Ot)+(ht=null!=g.Fa&&0<g.Fa.length?g.Kc.c*g.Kc.i:0))!=pt)R=0;else{if(pt>g.Vb){if(g.Vb=0,g.Ec=r(pt),g.Fc=0,null==g.Ec){R=_a(g,1,"no memory during frame initialization.");break t}g.Vb=pt}gt=g.Fc,g.Ac=pt=g.Ec,g.Bc=gt,gt+=Y,g.Gd=s(Ot,Kx),g.Hd=0,g.rb=s(Jt+1,Yx),g.sb=1,g.wa=ue?s(ue,Vp):null,g.Y=0,g.D.Nb=0,g.D.wa=g.wa,g.D.Y=g.Y,0<g.Aa&&(g.D.Y+=wt),o(!0),g.oc=pt,g.pc=gt,gt+=832,g.ya=s(de,Ig),g.aa=0,g.D.ya=g.ya,g.D.aa=g.aa,2==g.Aa&&(g.D.aa+=wt),g.R=16*wt,g.B=8*wt,wt=(Ot=T2[g.L])*g.R,Ot=Ot/2*g.B,g.sa=pt,g.ta=gt+wt,g.qa=g.sa,g.ra=g.ta+16*R*g.R+Ot,g.Ha=g.qa,g.Ia=g.ra+8*R*g.B+Ot,g.$c=0,gt+=st,g.mb=ht?pt:null,g.nb=ht?gt:null,o(gt+ht<=g.Fc+g.Vb),Lg(g),a(g.Ac,g.Bc,0,Y),R=1}}if(R){if(k.ka=0,k.y=g.sa,k.O=g.ta,k.f=g.qa,k.N=g.ra,k.ea=g.Ha,k.Vd=g.Ia,k.fa=g.R,k.Rc=g.B,k.F=null,k.J=0,!AT){for(R=-255;255>=R;++R)wT[255+R]=0>R?-R:R;for(R=-1020;1020>=R;++R)CT[1020+R]=-128>R?-128:127<R?127:R;for(R=-112;112>=R;++R)TT[112+R]=-16>R?-16:15<R?15:R;for(R=-255;510>=R;++R)kT[255+R]=0>R?0:255<R?255:R;AT=1}lc=Pw,p_=Iw,Bd=e2,cc=Lw,zu=n2,Vg=t2,ch=qg,__=sh,uh=Hw,zd=Fg,Xg=Jw,vl=a_,Ju=Qg,Ao=d2,So=u2,fa=Ru,Ra=qd,Hu=zw,uc[0]=Wc,uc[1]=Nw,uc[2]=qw,uc[3]=Fw,uc[4]=a2,uc[5]=i_,uc[6]=r2,uc[7]=Zg,uc[8]=Rw,uc[9]=Qw,Hd[0]=i2,Hd[1]=Dw,Hd[2]=Qu,Hd[3]=e_,Hd[4]=Or,Hd[5]=jw,Hd[6]=o2,Gu[0]=jd,Gu[1]=Zw,Gu[2]=Uw,Gu[3]=Dg,Gu[4]=rh,Gu[5]=Bw,Gu[6]=jg,R=1}else R=0}R&&(R=function(Xt,Ie){for(Xt.M=0;Xt.M<Xt.Va;++Xt.M){var ge,Ht=Xt.Jc[Xt.M&Xt.Xb],Kt=Xt.m,Oe=Xt;for(ge=0;ge<Oe.za;++ge){var Ze=Kt,Me=Oe,_n=Me.Ac,Xe=Me.Bc+4*ge,Zn=Me.zc,sn=Me.ya[Me.aa+ge];if(sn.$b=Me.Qa.Bb?re(Ze,Me.Pa.jb[0])?2+re(Ze,Me.Pa.jb[2]):re(Ze,Me.Pa.jb[1]):0,Me.kc&&(sn.Ad=re(Ze,Me.Bd)),sn.Za=!re(Ze,145)+0,sn.Za){var Gi=sn.Ob,ao=0;for(Me=0;4>Me;++Me){var ji,Ti=Zn[0+Me];for(ji=0;4>ji;++ji){for(var vo=MT[re(Ze,(Ti=XY[_n[Xe+ji]][Ti])[0])];0<vo;)vo=MT[2*vo+re(Ze,Ti[vo])];_n[Xe+ji]=Ti=-vo}i(Gi,ao,_n,Xe,4),ao+=4,Zn[0+Me]=Ti}}else Ti=re(Ze,156)?re(Ze,128)?1:3:re(Ze,163)?2:0,sn.Ob[0]=Ti,a(_n,Xe,Ti,4),a(Zn,0,Ti,4);sn.Dd=re(Ze,142)?re(Ze,114)?re(Ze,183)?1:3:2:0}if(Oe.m.Ka)return _a(Xt,7,"Premature end-of-partition0 encountered.");for(;Xt.ja<Xt.za;++Xt.ja){if(Oe=Ht,Ze=(Kt=Xt).rb[Kt.sb-1],_n=Kt.rb[Kt.sb+Kt.ja],ge=Kt.ya[Kt.aa+Kt.ja],Xe=Kt.kc?ge.Ad:0)Ze.la=_n.la=0,ge.Za||(Ze.Na=_n.Na=0),ge.Hc=0,ge.Gc=0,ge.ia=0;else{var mo,ii;if(Ze=_n,_n=Oe,Xe=Kt.Pa.Xc,sn=Kt.pb[(Zn=Kt.ya[Kt.aa+Kt.ja]).$b],ao=Kt.rb[Kt.sb-1],Ti=ji=0,a(Me=Zn.ad,Gi=0,0,384),Zn.Za)var Ma=0,xs=Xe[3];else{vo=r(16);var Ia=Ze.Na+ao.Na;if(Ia=t1(_n,Xe[1],Ia,sn.Eb,0,vo,0),Ze.Na=ao.Na=(0<Ia)+0,1<Ia)lc(vo,0,Me,Gi);else{var bs=vo[0]+3>>3;for(vo=0;256>vo;vo+=16)Me[Gi+vo]=bs}Ma=1,xs=Xe[0]}var ro=15&Ze.la,zs=15&ao.la;for(vo=0;4>vo;++vo){var Js=1&zs;for(bs=ii=0;4>bs;++bs)ro=ro>>1|(Js=(Ia=t1(_n,xs,Ia=Js+(1&ro),sn.Sc,Ma,Me,Gi))>Ma)<<7,ii=ii<<2|(3<Ia?3:1<Ia?2:0!=Me[Gi+0]),Gi+=16;ro>>=4,zs=zs>>1|Js<<7,ji=(ji<<8|ii)>>>0}for(xs=ro,Ma=zs>>4,mo=0;4>mo;mo+=2){for(ii=0,ro=Ze.la>>4+mo,zs=ao.la>>4+mo,vo=0;2>vo;++vo){for(Js=1&zs,bs=0;2>bs;++bs)ro=ro>>1|(Js=0<(Ia=t1(_n,Xe[2],Ia=Js+(1&ro),sn.Qc,0,Me,Gi)))<<3,ii=ii<<2|(3<Ia?3:1<Ia?2:0!=Me[Gi+0]),Gi+=16;ro>>=2,zs=zs>>1|Js<<5}Ti|=ii<<4*mo,xs|=ro<<4<<mo,Ma|=(240&zs)<<mo}Ze.la=xs,ao.la=Ma,Zn.Hc=ji,Zn.Gc=Ti,Zn.ia=43690&Ti?0:sn.ia,Xe=!(ji|Ti)}if(0<Kt.L&&(Kt.wa[Kt.Y+Kt.ja]=Kt.gd[ge.$b][ge.Za],Kt.wa[Kt.Y+Kt.ja].La|=!Xe),Oe.Ka)return _a(Xt,7,"Premature end-of-file encountered.")}if(Lg(Xt),Kt=Ie,Oe=1,ge=(Ht=Xt).D,Ze=0<Ht.L&&Ht.M>=Ht.zb&&Ht.M<=Ht.Va,0==Ht.Aa)t:{if(ge.M=Ht.M,ge.uc=Ze,Hg(Ht,ge),Oe=1,ge=(ii=Ht.D).Nb,Ze=(Ti=T2[Ht.L])*Ht.R,Xe=Ht.sa,Zn=Ht.ta-Ze+(vo=16*ge*Ht.R),sn=Ht.qa,Me=Ht.ra-(_n=Ti/2*Ht.B)+(bs=8*ge*Ht.B),Gi=Ht.Ha,ao=Ht.Ia-_n+bs,zs=0==(ro=ii.M),ji=ro>=Ht.Va-1,2==Ht.Aa&&Hg(Ht,ii),ii.uc)for(Js=(Ia=Ht).D.M,o(Ia.D.uc),ii=Ia.yb;ii<Ia.Hb;++ii){xs=Js;var Va=(mr=(ra=Ia).D).Nb,mr=mr.wa[mr.Y+(Ma=ii)],Kr=ra.sa,Cl=ra.ta+16*Va*(mo=ra.R)+16*Ma,Xc=mr.dd,Xa=mr.tc;if(0!=Xa)if(o(3<=Xa),1==ra.L)0<Ma&&fa(Kr,Cl,mo,Xa+4),mr.La&&Hu(Kr,Cl,mo,Xa),0<xs&&So(Kr,Cl,mo,Xa+4),mr.La&&Ra(Kr,Cl,mo,Xa);else{var $u=ra.B,dh=ra.qa,g_=ra.ra+8*Va*$u+8*Ma,$d=ra.Ha,ra=ra.Ia+8*Va*$u+8*Ma;Va=mr.ld,0<Ma&&(__(Kr,Cl,mo,Xa+4,Xc,Va),zd(dh,g_,$d,ra,$u,Xa+4,Xc,Va)),mr.La&&(vl(Kr,Cl,mo,Xa,Xc,Va),Ao(dh,g_,$d,ra,$u,Xa,Xc,Va)),0<xs&&(ch(Kr,Cl,mo,Xa+4,Xc,Va),uh(dh,g_,$d,ra,$u,Xa+4,Xc,Va)),mr.La&&(Xg(Kr,Cl,mo,Xa,Xc,Va),Ju(dh,g_,$d,ra,$u,Xa,Xc,Va))}}if(Ht.ia&&alert("todo:DitherRow"),null!=Kt.put){if(ii=16*ro,ro=16*(ro+1),zs?(Kt.y=Ht.sa,Kt.O=Ht.ta+vo,Kt.f=Ht.qa,Kt.N=Ht.ra+bs,Kt.ea=Ht.Ha,Kt.W=Ht.Ia+bs):(ii-=Ti,Kt.y=Xe,Kt.O=Zn,Kt.f=sn,Kt.N=Me,Kt.ea=Gi,Kt.W=ao),ji||(ro-=Ti),ro>Kt.o&&(ro=Kt.o),Kt.F=null,Kt.J=null,null!=Ht.Fa&&0<Ht.Fa.length&&ii<ro&&(Kt.J=zg(Ht,Kt,ii,ro-ii),Kt.F=Ht.mb,null==Kt.F&&0==Kt.F.length)){Oe=_a(Ht,3,"Could not decode alpha data.");break t}ii<Kt.j&&(Ti=Kt.j-ii,ii=Kt.j,o(!(1&Ti)),Kt.O+=Ht.R*Ti,Kt.N+=Ht.B*(Ti>>1),Kt.W+=Ht.B*(Ti>>1),null!=Kt.F&&(Kt.J+=Kt.width*Ti)),ii<ro&&(Kt.O+=Kt.v,Kt.N+=Kt.v>>1,Kt.W+=Kt.v>>1,null!=Kt.F&&(Kt.J+=Kt.v),Kt.ka=ii-Kt.j,Kt.U=Kt.va-Kt.v,Kt.T=ro-ii,Oe=Kt.put(Kt))}ge+1!=Ht.Ic||ji||(i(Ht.sa,Ht.ta-Ze,Xe,Zn+16*Ht.R,Ze),i(Ht.qa,Ht.ra-_n,sn,Me+8*Ht.B,_n),i(Ht.Ha,Ht.Ia-_n,Gi,ao+8*Ht.B,_n))}if(!Oe)return _a(Xt,6,"Output aborted.")}return 1}(g,k)),null!=k.bc&&k.bc(k),R&=1}return R?(g.cb=0,R):0})(g,Y)||(k=g.a)}}else k=g.a}0==k&&null!=pt.Oa&&pt.Oa.fd&&(k=$g(pt.ba))}pt=k}ht=0!=pt?null:11>ht?gt.f.RGBA.eb:gt.f.kb.y}else ht=null;return ht};var FT=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(et,vt){for(var Nt="",ot=0;ot<4;ot++)Nt+=String.fromCharCode(et[vt++]);return Nt}function h(et,vt){return(et[vt+0]<<0|et[vt+1]<<8|et[vt+2]<<16)>>>0}function _(et,vt){return(et[vt+0]<<0|et[vt+1]<<8|et[vt+2]<<16|et[vt+3]<<24)>>>0}new c;var x=[0],b=[0],T=[],P=new c,U=n,q=function(et,vt){var Nt={},ot=0,_t=!1,Mt=0,It=0;if(Nt.frames=[],!
/** @license
             * Copyright (c) 2017 Dominik Homberger
            Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:
            The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
            THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
            https://webpjs.appspot.com
            WebPRiffParser dominikhlbg@gmail.com
            */
function(kt,Et,Ft,Gt){for(var le=0;le<4;le++)if(kt[Et+le]!="RIFF".charCodeAt(le))return!0;return!1}(et,vt)){var Tt,Vt;for(_(et,vt+=4),vt+=8;vt<et.length;){var ie=d(et,vt),Wt=_(et,vt+=4);vt+=4;var oe=Wt+(1&Wt);switch(ie){case"VP8 ":case"VP8L":void 0===Nt.frames[ot]&&(Nt.frames[ot]={}),(at=Nt.frames[ot]).src_off=_t?It:vt-8,at.src_size=Mt+Wt+8,ot++,_t&&(_t=!1,Mt=0,It=0);break;case"VP8X":(at=Nt.header={}).feature_flags=et[vt];var ne=vt+4;at.canvas_width=1+h(et,ne),at.canvas_height=1+h(et,ne+=3),ne+=3;break;case"ALPH":_t=!0,Mt=oe+8,It=vt-8;break;case"ANIM":(at=Nt.header).bgcolor=_(et,vt),at.loop_count=(Tt=et)[(Vt=ne=vt+4)+0]<<0|Tt[Vt+1]<<8,ne+=2;break;case"ANMF":var we,at;(at=Nt.frames[ot]={}).offset_x=2*h(et,vt),at.offset_y=2*h(et,vt+=3),at.width=1+h(et,vt+=3),at.height=1+h(et,vt+=3),at.duration=h(et,vt+=3),vt+=3,we=et[vt++],at.dispose=1&we,at.blend=we>>1&1}"ANMF"!=ie&&(vt+=oe)}return Nt}}(U,0);q.response=U,q.rgbaoutput=!0,q.dataurl=!1;var B=q.header?q.header:null,W=q.frames?q.frames:null;if(B){B.loop_counter=B.loop_count,x=[B.canvas_height],b=[B.canvas_width];for(var G=0;G<W.length&&0!=W[G].blend;G++);}var nt=W[0],At=P.WebPDecodeRGBA(U,nt.src_off,nt.src_size,b,x);nt.rgba=At,nt.imgwidth=b[0],nt.imgheight=x[0];for(var ut=0;ut<b[0]*x[0]*4;ut++)T[ut]=At[ut];return this.width=b,this.height=x,this.data=T,this}(function(n){var e=function(x,b,T,P){var U=4,q=s;switch(P){case n.image_compression.FAST:U=1,q=r;break;case n.image_compression.MEDIUM:U=6,q=l;break;case n.image_compression.SLOW:U=9,q=c}var B=Ei(x=i(x,b,T,q),{level:U});return n.__addimage__.arrayBufferToBinaryString(B)},i=function(x,b,T,P){for(var U,q,B,W=x.length/b,G=new Uint8Array(x.length+W),nt=h(),At=0;At<W;At+=1){if(U=x.subarray(B=At*b,B+b),P)G.set(P(U,T,q),B+At);else{for(var ut,et=nt.length,vt=[];ut<et;ut+=1)vt[ut]=nt[ut](U,T,q);var Nt=_(vt.concat());G.set(vt[Nt],B+At)}q=U}return G},a=function(x){var b=Array.apply([],x);return b.unshift(0),b},r=function(x,b){var P=[],U=x.length;P[0]=1;for(var q=0;q<U;q+=1)P[q+1]=x[q]-(x[q-b]||0)+256&255;return P},s=function(x,b,T){var U=[],q=x.length;U[0]=2;for(var B=0;B<q;B+=1)U[B+1]=x[B]-(T&&T[B]||0)+256&255;return U},l=function(x,b,T){var q=[],B=x.length;q[0]=3;for(var W=0;W<B;W+=1)q[W+1]=x[W]+256-((x[W-b]||0)+(T&&T[W]||0)>>>1)&255;return q},c=function(x,b,T){var B,W=[],G=x.length;W[0]=4;for(var nt=0;nt<G;nt+=1)B=d(x[nt-b]||0,T&&T[nt]||0,T&&T[nt-b]||0),W[nt+1]=x[nt]-B+256&255;return W},d=function(x,b,T){if(x===b&&b===T)return x;var P=Math.abs(b-T),U=Math.abs(x-T),q=Math.abs(x+b-T-T);return P<=U&&P<=q?x:U<=q?b:T},h=function(){return[a,r,s,l,c]},_=function(x){var b=x.map(function(T){return T.reduce(function(P,U){return P+Math.abs(U)},0)});return b.indexOf(Math.min.apply(null,b))};n.processPNG=function(x,b,T,P){var U,q,B,W,G,nt,At,ut,et,vt,Nt,ot,_t,Mt,It,Tt=this.decode.FLATE_DECODE,Vt="";if(this.__addimage__.isArrayBuffer(x)&&(x=new Uint8Array(x)),this.__addimage__.isArrayBufferView(x)){if(x=(B=new A1(x)).imgData,q=B.bits,U=B.colorSpace,G=B.colors,-1!==[4,6].indexOf(B.colorType)){if(8===B.bits){et=(ut=32==B.pixelBitlength?new Uint32Array(B.decodePixels().buffer):16==B.pixelBitlength?new Uint16Array(B.decodePixels().buffer):new Uint8Array(B.decodePixels().buffer)).length,Nt=new Uint8Array(et*B.colors),vt=new Uint8Array(et);var ie,Wt=B.pixelBitlength-B.bits;for(Mt=0,It=0;Mt<et;Mt++){for(_t=ut[Mt],ie=0;ie<Wt;)Nt[It++]=_t>>>ie&255,ie+=B.bits;vt[Mt]=_t>>>ie&255}}if(16===B.bits){et=(ut=new Uint32Array(B.decodePixels().buffer)).length,Nt=new Uint8Array(et*(32/B.pixelBitlength)*B.colors),vt=new Uint8Array(et*(32/B.pixelBitlength)),ot=B.colors>1,Mt=0,It=0;for(var oe=0;Mt<et;)_t=ut[Mt++],Nt[It++]=_t>>>0&255,ot&&(Nt[It++]=_t>>>16&255,_t=ut[Mt++],Nt[It++]=_t>>>0&255),vt[oe++]=_t>>>16&255;q=8}P!==n.image_compression.NONE?(x=e(Nt,B.width*B.colors,B.colors,P),At=e(vt,B.width,1,P)):(x=Nt,At=vt,Tt=void 0)}if(3===B.colorType&&(U=this.color_spaces.INDEXED,nt=B.palette,B.transparency.indexed)){var ne=B.transparency.indexed,we=0;for(Mt=0,et=ne.length;Mt<et;++Mt)we+=ne[Mt];if((we/=255)==et-1&&-1!==ne.indexOf(0))W=[ne.indexOf(0)];else if(we!==et){for(ut=B.decodePixels(),vt=new Uint8Array(ut.length),Mt=0,et=ut.length;Mt<et;Mt++)vt[Mt]=ne[ut[Mt]];At=e(vt,B.width,1)}}var at=function(kt){var Et;switch(kt){case n.image_compression.FAST:Et=11;break;case n.image_compression.MEDIUM:Et=13;break;case n.image_compression.SLOW:Et=14;break;default:Et=12}return Et}(P);return Tt===this.decode.FLATE_DECODE&&(Vt="/Predictor "+at+" "),Vt+="/Colors "+G+" /BitsPerComponent "+q+" /Columns "+B.width,(this.__addimage__.isArrayBuffer(x)||this.__addimage__.isArrayBufferView(x))&&(x=this.__addimage__.arrayBufferToBinaryString(x)),(At&&this.__addimage__.isArrayBuffer(At)||this.__addimage__.isArrayBufferView(At))&&(At=this.__addimage__.arrayBufferToBinaryString(At)),{alias:T,data:x,index:b,filter:Tt,decodeParameters:Vt,transparency:W,palette:nt,sMask:At,predictor:at,width:B.width,height:B.height,bitsPerComponent:q,colorSpace:U}}}})(On.API),function(n){n.processGIF89A=function(o,e,i,a){var r=new xm(o),s=r.width,l=r.height,c=[];r.decodeAndBlitFrameRGBA(0,c);var d={data:c,width:s,height:l},h=new Fh(100).encode(d,100);return n.processJPEG.call(this,h,e,i,a)},n.processGIF87A=n.processGIF89A}(On.API),Es.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,16===this.bitPP&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=0===this.colors?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var o=0;o<n;o++){var e=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0);this.palette[o]={red:a,green:i,blue:e,quad:r}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Es.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP;this.data=new Uint8Array(this.width*this.height*4),this[n]()}catch(e){Ui.log("bit decode error:"+e)}},Es.prototype.bit1=function(){var n,o=Math.ceil(this.width/8),e=o%4;for(n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,a=0;a<o;a++)for(var r=this.datav.getUint8(this.pos++,!0),s=i*this.width*4+8*a*4,l=0;l<8&&8*a+l<this.width;l++){var c=this.palette[r>>7-l&1];this.data[s+4*l]=c.blue,this.data[s+4*l+1]=c.green,this.data[s+4*l+2]=c.red,this.data[s+4*l+3]=255}0!==e&&(this.pos+=4-e)}},Es.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),o=n%4,e=this.height-1;e>=0;e--){for(var i=this.bottom_up?e:this.height-1-e,a=0;a<n;a++){var r=this.datav.getUint8(this.pos++,!0),s=i*this.width*4+2*a*4,c=15&r,d=this.palette[r>>4];if(this.data[s]=d.blue,this.data[s+1]=d.green,this.data[s+2]=d.red,this.data[s+3]=255,2*a+1>=this.width)break;this.data[s+4]=(d=this.palette[c]).blue,this.data[s+4+1]=d.green,this.data[s+4+2]=d.red,this.data[s+4+3]=255}0!==o&&(this.pos+=4-o)}},Es.prototype.bit8=function(){for(var n=this.width%4,o=this.height-1;o>=0;o--){for(var e=this.bottom_up?o:this.height-1-o,i=0;i<this.width;i++){var a=this.datav.getUint8(this.pos++,!0),r=e*this.width*4+4*i;if(a<this.palette.length){var s=this.palette[a];this.data[r]=s.red,this.data[r+1]=s.green,this.data[r+2]=s.blue,this.data[r+3]=255}else this.data[r]=255,this.data[r+1]=255,this.data[r+2]=255,this.data[r+3]=255}0!==n&&(this.pos+=4-n)}},Es.prototype.bit15=function(){for(var n=this.width%3,o=parseInt("11111",2),e=this.height-1;e>=0;e--){for(var i=this.bottom_up?e:this.height-1-e,a=0;a<this.width;a++){var r=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(r&o)/o*255|0,l=(r>>5&o)/o*255|0,d=r>>15?255:0,h=i*this.width*4+4*a;this.data[h]=(r>>10&o)/o*255|0,this.data[h+1]=l,this.data[h+2]=s,this.data[h+3]=d}this.pos+=n}},Es.prototype.bit16=function(){for(var n=this.width%3,o=parseInt("11111",2),e=parseInt("111111",2),i=this.height-1;i>=0;i--){for(var a=this.bottom_up?i:this.height-1-i,r=0;r<this.width;r++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(s&o)/o*255|0,c=(s>>5&e)/e*255|0,h=a*this.width*4+4*r;this.data[h]=(s>>11)/o*255|0,this.data[h+1]=c,this.data[h+2]=l,this.data[h+3]=255}this.pos+=n}},Es.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var o=this.bottom_up?n:this.height-1-n,e=0;e<this.width;e++){var i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),s=o*this.width*4+4*e;this.data[s]=r,this.data[s+1]=a,this.data[s+2]=i,this.data[s+3]=255}this.pos+=this.width%4}},Es.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var o=this.bottom_up?n:this.height-1-n,e=0;e<this.width;e++){var i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),l=o*this.width*4+4*e;this.data[l]=r,this.data[l+1]=a,this.data[l+2]=i,this.data[l+3]=s}},Es.prototype.getData=function(){return this.data},
/**
       * @license
       * Copyright (c) 2018 Aras Abbasi
       *
       * Licensed under the MIT License.
       * http://opensource.org/licenses/mit-license
       */
function(n){n.processBMP=function(o,e,i,a){var r=new Es(o,!1),s=r.width,l=r.height,c={data:r.getData(),width:s,height:l},d=new Fh(100).encode(c,100);return n.processJPEG.call(this,d,e,i,a)}}(On.API),bm.prototype.getData=function(){return this.data},
/**
       * @license
       * Copyright (c) 2019 Aras Abbasi
       *
       * Licensed under the MIT License.
       * http://opensource.org/licenses/mit-license
       */
function(n){n.processWEBP=function(o,e,i,a){var r=new bm(o,!1),s=r.width,l=r.height,c={data:r.getData(),width:s,height:l},d=new Fh(100).encode(c,100);return n.processJPEG.call(this,d,e,i,a)}}(On.API),On.API.processRGBA=function(n,o,e){for(var i=n.data,a=i.length,r=new Uint8Array(a/4*3),s=new Uint8Array(a/4),l=0,c=0,d=0;d<a;d+=4){var _=i[d+1],x=i[d+2],b=i[d+3];r[l++]=i[d],r[l++]=_,r[l++]=x,s[c++]=b}var T=this.__addimage__.arrayBufferToBinaryString(r);return{alpha:this.__addimage__.arrayBufferToBinaryString(s),data:T,index:o,alias:e,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},On.API.setLanguage=function(n){return void 0===this.internal.languageSettings&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),void 0!=={af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]&&(this.internal.languageSettings.languageCode=n,!1===this.internal.languageSettings.isSubscribed&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},il=(Sc=On.API).getCharWidthsArray=function(n,o){var e,i,a=(o=o||{}).font||this.internal.getFont(),r=o.fontSize||this.internal.getFontSize(),s=o.charSpace||this.internal.getCharSpace(),l=o.widths?o.widths:a.metadata.Unicode.widths,c=l.fof?l.fof:1,d=o.kerning?o.kerning:a.metadata.Unicode.kerning,h=d.fof?d.fof:1,_=!1!==o.doKerning,x=0,b=n.length,T=0,P=l[0]||c,U=[];for(e=0;e<b;e++)i=n.charCodeAt(e),"function"==typeof a.metadata.widthOfString?U.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(i))+s*(1e3/r)||0)/1e3):(x=_&&"object"===(0,Ni.Z)(d[i])&&!isNaN(parseInt(d[i][T],10))?d[i][T]/h:0,U.push((l[i]||P)/c+x)),T=i;return U},Zr=Sc.getStringUnitWidth=function(n,o){var e=(o=o||{}).fontSize||this.internal.getFontSize(),i=o.font||this.internal.getFont(),a=o.charSpace||this.internal.getCharSpace();return Sc.processArabic&&(n=Sc.processArabic(n)),"function"==typeof i.metadata.widthOfString?i.metadata.widthOfString(n,e,a)/e:il.apply(this,arguments).reduce(function(r,s){return r+s},0)},k1=function(n,o,e,i){for(var a=[],r=0,s=n.length,l=0;r!==s&&l+o[r]<e;)l+=o[r],r++;a.push(n.slice(0,r));var c=r;for(l=0;r!==s;)l+o[r]>i&&(a.push(n.slice(c,r)),l=0,c=r),l+=o[r],r++;return c!==r&&a.push(n.slice(c,r)),a},K_=function(n,o,e){e||(e={});var i,a,r,s,l,c,h=[],_=[h],x=e.textIndent||0,b=0,T=0,P=n.split(" "),U=il.apply(this,[" ",e])[0];if(c=-1===e.lineIndent?P[0].length+2:e.lineIndent||0){var q=Array(c).join(" "),B=[];P.map(function(G){(G=G.split(/\s*\n/)).length>1?B=B.concat(G.map(function(nt,At){return(At&&nt.length?"\n":"")+nt})):B.push(G[0])}),P=B,c=Zr.apply(this,[q,e])}for(r=0,s=P.length;r<s;r++){var W=0;if(i=P[r],c&&"\n"==i[0]&&(i=i.substr(1),W=1),x+b+(T=(a=il.apply(this,[i,e])).reduce(function(G,nt){return G+nt},0))>o||W){if(T>o){for(l=k1.apply(this,[i,a,o-(x+b),o]),h.push(l.shift()),h=[l.pop()];l.length;)_.push([l.shift()]);T=a.slice(i.length-(h[0]?h[0].length:0)).reduce(function(G,nt){return G+nt},0)}else h=[i];_.push(h),x=T+c,b=U}else h.push(i),x+=b+T,b=U}return _.map(c?function(G,nt){return(nt?q:"")+G.join(" ")}:function(G){return G.join(" ")})},Sc.splitTextToSize=function(n,o,e){var i,a=(e=e||{}).fontSize||this.internal.getFontSize(),r=function(h){if(h.widths&&h.kerning)return{widths:h.widths,kerning:h.kerning};var _=this.internal.getFont(h.fontName,h.fontStyle);return _.metadata.Unicode?{widths:_.metadata.Unicode.widths||{0:1},kerning:_.metadata.Unicode.kerning||{}}:{font:_.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,e);i=Array.isArray(n)?n:String(n).split(/\r?\n/);var s=1*this.internal.scaleFactor*o/a;r.textIndent=e.textIndent?1*e.textIndent*this.internal.scaleFactor/a:0,r.lineIndent=e.lineIndent;var l,c,d=[];for(l=0,c=i.length;l<c;l++)d=d.concat(K_.apply(this,[i[l],s,r]));return d},function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var o="klmnopqrstuvwxyz",e={},i={},a=0;a<16;a++)e[o[a]]="0123456789abcdef"[a],i["0123456789abcdef"[a]]=o[a];var r=function(_){return"0x"+parseInt(_,10).toString(16)},s=n.__fontmetrics__.compress=function(_){var x,b,T,P,U=["{"];for(var q in _){if(x=_[q],isNaN(parseInt(q,10))?b="'"+q+"'":(q=parseInt(q,10),b=(b=r(q).slice(2)).slice(0,-1)+i[b.slice(-1)]),"number"==typeof x)x<0?(T=r(x).slice(3),P="-"):(T=r(x).slice(2),P=""),T=P+T.slice(0,-1)+i[T.slice(-1)];else{if("object"!==(0,Ni.Z)(x))throw new Error("Don't know what to do with value type "+(0,Ni.Z)(x)+".");T=s(x)}U.push(b+T)}return U.push("}"),U.join("")},l=n.__fontmetrics__.uncompress=function(_){if("string"!=typeof _)throw new Error("Invalid argument passed to uncompress.");for(var x,b,T,P,U={},q=1,B=U,W=[],G="",nt="",At=_.length-1,ut=1;ut<At;ut+=1)"'"==(P=_[ut])?x?(T=x.join(""),x=void 0):x=[]:x?x.push(P):"{"==P?(W.push([B,T]),B={},T=void 0):"}"==P?((b=W.pop())[0][b[1]]=B,T=void 0,B=b[0]):"-"==P?q=-1:void 0===T?e.hasOwnProperty(P)?(G+=e[P],T=parseInt(G,16)*q,q=1,G=""):G+=P:e.hasOwnProperty(P)?(nt+=e[P],B[T]=parseInt(nt,16)*q,q=1,T=void 0,nt=""):nt+=P;return U},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},h={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(_){var x=_.font,b=h.Unicode[x.postScriptName];b&&(x.metadata.Unicode={},x.metadata.Unicode.widths=b.widths,x.metadata.Unicode.kerning=b.kerning);var T=d.Unicode[x.postScriptName];T&&(x.metadata.Unicode.encoding=T,x.encoding=T.codePages[0])}])}(On.API),
/**
       * @license
       * Licensed under the MIT License.
       * http://opensource.org/licenses/mit-license
       */
function(n){var o=function(e){for(var i=e.length,a=new Uint8Array(i),r=0;r<i;r++)a[r]=e.charCodeAt(r);return a};n.API.events.push(["addFont",function(e){var s,l,i=void 0,a=e.font,r=e.instance;if(!a.isStandardFont){if(void 0===r)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if("string"!=typeof(i=!1===r.existsFileInVFS(a.postScriptName)?r.loadFile(a.postScriptName):r.getFileFromVFS(a.postScriptName)))throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");s=a,l=/^\x00\x01\x00\x00/.test(l=i)?o(l):o(wc(l)),s.metadata=n.API.TTFFont.open(l),s.metadata.Unicode=s.metadata.Unicode||{encoding:{},kerning:{},widths:[]},s.metadata.glyIdsUsed=[0]}}])}(On),On.API.addSvgAsImage=function(e,i,a,r,s,l,c,d){if(isNaN(i)||isNaN(a))throw Ui.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(s))throw Ui.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var h=document.createElement("canvas");h.width=r,h.height=s;var _=h.getContext("2d");_.fillStyle="#fff",_.fillRect(0,0,h.width,h.height);var x={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},b=this;return function o(){return(Dn.canvg?Promise.resolve(Dn.canvg):M.e(4153).then(M.bind(M,64153))).catch(function(e){return Promise.reject(new Error("Could not load canvg: "+e))}).then(function(e){return e.default?e.default:e})}().then(function(T){return T.fromString(_,e,x)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(T){return T.render(x)}).then(function(){b.addImage(h.toDataURL("image/jpeg",1),i,a,r,s,c,d)})},On.API.putTotalPages=function(n){var o,e=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(o=new RegExp(n,"g"),e=this.internal.getNumberOfPages()):(o=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),e=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var i=1;i<=this.internal.getNumberOfPages();i++)for(var a=0;a<this.internal.pages[i].length;a++)this.internal.pages[i][a]=this.internal.pages[i][a].replace(o,e);return this},On.API.viewerPreferences=function(n,o){var e;n=n||{},o=o||!1;var i,a,r,s={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(s),c=[],d=0,h=0,_=0;function x(T,P){var U,q=!1;for(U=0;U<T.length;U+=1)T[U]===P&&(q=!0);return q}if(void 0===this.internal.viewerpreferences&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(s)),this.internal.viewerpreferences.isSubscribed=!1),e=this.internal.viewerpreferences.configuration,"reset"===n||!0===o){var b=l.length;for(_=0;_<b;_+=1)e[l[_]].value=e[l[_]].defaultValue,e[l[_]].explicitSet=!1}if("object"===(0,Ni.Z)(n))for(a in n)if(r=n[a],x(l,a)&&void 0!==r){if("boolean"===e[a].type&&"boolean"==typeof r)e[a].value=r;else if("name"===e[a].type&&x(e[a].valueSet,r))e[a].value=r;else if("integer"===e[a].type&&Number.isInteger(r))e[a].value=r;else if("array"===e[a].type){for(d=0;d<r.length;d+=1)if(i=!0,1===r[d].length&&"number"==typeof r[d][0])c.push(String(r[d]-1));else if(r[d].length>1){for(h=0;h<r[d].length;h+=1)"number"!=typeof r[d][h]&&(i=!1);!0===i&&c.push([r[d][0]-1,r[d][1]-1].join(" "))}e[a].value="["+c.join(" ")+"]"}else e[a].value=e[a].defaultValue;e[a].explicitSet=!0}return!1===this.internal.viewerpreferences.isSubscribed&&(this.internal.events.subscribe("putCatalog",function(){var T,P=[];for(T in e)!0===e[T].explicitSet&&P.push("name"===e[T].type?"/"+T+" /"+e[T].value:"/"+T+" "+e[T].value);0!==P.length&&this.internal.write("/ViewerPreferences\n<<\n"+P.join("\n")+"\n>>")}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=e,this},
/** ====================================================================
       * @license
       * jsPDF XMP metadata plugin
       * Copyright (c) 2016 Jussi Utunen, u-jussi@suomi24.fi
       *
       * Permission is hereby granted, free of charge, to any person obtaining
       * a copy of this software and associated documentation files (the
       * "Software"), to deal in the Software without restriction, including
       * without limitation the rights to use, copy, modify, merge, publish,
       * distribute, sublicense, and/or sell copies of the Software, and to
       * permit persons to whom the Software is furnished to do so, subject to
       * the following conditions:
       *
       * The above copyright notice and this permission notice shall be
       * included in all copies or substantial portions of the Software.
       *
       * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
       * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
       * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
       * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
       * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
       * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
       * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
       * ====================================================================
       */
function(n){var o=function(){var i='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),r=unescape(encodeURIComponent(i)),s=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),d=r.length+s.length+l.length+a.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(a+r+s+l+c),this.internal.write("endstream"),this.internal.write("endobj")},e=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(i,a){return void 0===this.internal.__metadata__&&(this.internal.__metadata__={metadata:i,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",e),this.internal.events.subscribe("postPutResources",o)),this}}(On.API),function(n){var o=n.API,e=o.pdfEscape16=function(r,s){for(var l,c=s.metadata.Unicode.widths,d=["","0","00","000","0000"],h=[""],_=0,x=r.length;_<x;++_){if(l=s.metadata.characterToGlyph(r.charCodeAt(_)),s.metadata.glyIdsUsed.push(l),s.metadata.toUnicode[l]=r.charCodeAt(_),-1==c.indexOf(l)&&(c.push(l),c.push([parseInt(s.metadata.widthOfGlyph(l),10)])),"0"==l)return h.join("");l=l.toString(16),h.push(d[4-l.length],l)}return h.join("")},i=function(r){var s,l,c,d,h,_,x;for(h="/CIDInit /ProcSet findresource begin\n12 dict begin\nbegincmap\n/CIDSystemInfo <<\n  /Registry (Adobe)\n  /Ordering (UCS)\n  /Supplement 0\n>> def\n/CMapName /Adobe-Identity-UCS def\n/CMapType 2 def\n1 begincodespacerange\n<0000><ffff>\nendcodespacerange",c=[],_=0,x=(l=Object.keys(r).sort(function(b,T){return b-T})).length;_<x;_++)s=l[_],c.length>=100&&(h+="\n"+c.length+" beginbfchar\n"+c.join("\n")+"\nendbfchar",c=[]),null!=r[s]&&"function"==typeof r[s].toString&&(d=("0000"+r[s].toString(16)).slice(-4),s=("0000"+(+s).toString(16)).slice(-4),c.push("<"+s+"><"+d+">"));return c.length&&(h+="\n"+c.length+" beginbfchar\n"+c.join("\n")+"\nendbfchar\n"),h+"endcmap\nCMapName currentdict /CMap defineresource pop\nend\nend"};o.events.push(["putFont",function(r){!function(s){var l=s.font,c=s.out,d=s.newObject,h=s.putStream;if(l.metadata instanceof n.API.TTFFont&&"Identity-H"===l.encoding){for(var _=l.metadata.Unicode.widths,x=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),b="",T=0;T<x.length;T++)b+=String.fromCharCode(x[T]);var P=d();h({data:b,addLength1:!0,objectId:P}),c("endobj");var U=d();h({data:i(l.metadata.toUnicode),addLength1:!0,objectId:U}),c("endobj");var q=d();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+ud(l.fontName)),c("/FontFile2 "+P+" 0 R"),c("/FontBBox "+n.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var B=d();c("<<"),c("/Type /Font"),c("/BaseFont /"+ud(l.fontName)),c("/FontDescriptor "+q+" 0 R"),c("/W "+n.API.PDFObject.convert(_)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=d(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+U+" 0 R"),c("/BaseFont /"+ud(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+B+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}}(r)}]),o.events.push(["putFont",function(r){!function(s){var l=s.font,c=s.out,d=s.newObject,h=s.putStream;if(l.metadata instanceof n.API.TTFFont&&"WinAnsiEncoding"===l.encoding){for(var _=l.metadata.rawData,x="",b=0;b<_.length;b++)x+=String.fromCharCode(_[b]);var T=d();h({data:x,addLength1:!0,objectId:T}),c("endobj");var P=d();h({data:i(l.metadata.toUnicode),addLength1:!0,objectId:P}),c("endobj");var U=d();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+T+" 0 R"),c("/Flags 96"),c("/FontBBox "+n.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+ud(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=d();for(var q=0;q<l.metadata.hmtx.widths.length;q++)l.metadata.hmtx.widths[q]=parseInt(l.metadata.hmtx.widths[q]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+P+" 0 R/BaseFont/"+ud(l.fontName)+"/FontDescriptor "+U+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}}(r)}]);var a=function(r){var s,l=r.text||"",c=r.x,d=r.y,h=r.options||{},_=r.mutex||{},x=_.pdfEscape,b=_.activeFontKey,T=_.fonts,P=b,U="",q=0,B="",W=T[P].encoding;if("Identity-H"!==T[P].encoding)return{text:l,x:c,y:d,options:h,mutex:_};for(B=l,P=b,Array.isArray(l)&&(B=l[0]),q=0;q<B.length;q+=1)T[P].metadata.hasOwnProperty("cmap")&&(s=T[P].metadata.cmap.unicode.codeMap[B[q].charCodeAt(0)]),s||B[q].charCodeAt(0)<256&&T[P].metadata.hasOwnProperty("Unicode")?U+=B[q]:U+="";var G="";return parseInt(P.slice(1))<14||"WinAnsiEncoding"===W?G=x(U,P).split("").map(function(nt){return nt.charCodeAt(0).toString(16)}).join(""):"Identity-H"===W&&(G=e(U,T[P])),_.isHex=!0,{text:G,x:c,y:d,options:h,mutex:_}};o.events.push(["postProcessText",function(r){var s=r.text||"",l=[],c={text:s,x:r.x,y:r.y,options:r.options,mutex:r.mutex};if(Array.isArray(s)){var d=0;for(d=0;d<s.length;d+=1)Array.isArray(s[d])&&3===s[d].length?l.push([a(Object.assign({},c,{text:s[d][0]})).text,s[d][1],s[d][2]]):l.push(a(Object.assign({},c,{text:s[d]})).text);r.text=l}else r.text=a(Object.assign({},c,{text:s})).text}])}(On),
/**
       * @license
       * jsPDF virtual FileSystem functionality
       *
       * Licensed under the MIT License.
       * http://opensource.org/licenses/mit-license
       */
function(n){var o=function(){return void 0===this.internal.vFS&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(e){return o.call(this),void 0!==this.internal.vFS[e]},n.addFileToVFS=function(e,i){return o.call(this),this.internal.vFS[e]=i,this},n.getFileFromVFS=function(e){return o.call(this),void 0!==this.internal.vFS[e]?this.internal.vFS[e]:null}}(On.API),
/**
       * @license
       * Unicode Bidi Engine based on the work of Alex Shensis (@asthensis)
       * MIT License
       */
function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(i){var a,r,s,l,c,d,h,_=o,x=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],b=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],T={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},P={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},U=["(",")","(","<",">","<","[","]","[","{","}","{","\xab","\xbb","\xab","\u2039","\u203a","\u2039","\u2045","\u2046","\u2045","\u207d","\u207e","\u207d","\u208d","\u208e","\u208d","\u2264","\u2265","\u2264","\u2329","\u232a","\u2329","\ufe59","\ufe5a","\ufe59","\ufe5b","\ufe5c","\ufe5b","\ufe5d","\ufe5e","\ufe5d","\ufe64","\ufe65","\ufe64"],q=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),B=!1,W=0;this.__bidiEngine__={};var G=function(ot){var _t=ot.charCodeAt(),Mt=_t>>8,It=P[Mt];return void 0!==It?_[256*It+(255&_t)]:252===Mt||253===Mt?"AL":q.test(Mt)?"L":8===Mt?"R":"N"},nt=function(ot){for(var _t,Mt=0;Mt<ot.length;Mt++){if("L"===(_t=G(ot.charAt(Mt))))return!1;if("R"===_t)return!0}return!1},At=function(ot,_t,Mt,It){var Tt,Vt,ie,Wt,oe=_t[It];switch(oe){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":B=!1;break;case"N":case"AN":break;case"EN":B&&(oe="AN");break;case"AL":B=!0,oe="R";break;case"WS":case"BN":oe="N";break;case"CS":It<1||It+1>=_t.length||"EN"!==(Tt=Mt[It-1])&&"AN"!==Tt||"EN"!==(Vt=_t[It+1])&&"AN"!==Vt?oe="N":B&&(Vt="AN"),oe=Vt===Tt?Vt:"N";break;case"ES":oe="EN"===(Tt=It>0?Mt[It-1]:"B")&&It+1<_t.length&&"EN"===_t[It+1]?"EN":"N";break;case"ET":if(It>0&&"EN"===Mt[It-1]){oe="EN";break}if(B){oe="N";break}for(ie=It+1,Wt=_t.length;ie<Wt&&"ET"===_t[ie];)ie++;oe=ie<Wt&&"EN"===_t[ie]?"EN":"N";break;case"NSM":if(s&&!l){for(Wt=_t.length,ie=It+1;ie<Wt&&"NSM"===_t[ie];)ie++;if(ie<Wt){var ne=ot[It];if(Tt=_t[ie],(ne>=1425&&ne<=2303||64286===ne)&&("R"===Tt||"AL"===Tt)){oe="R";break}}}oe=It<1||"B"===(Tt=_t[It-1])?"N":Mt[It-1];break;case"B":B=!1,a=!0,oe=W;break;case"S":r=!0,oe="N"}return oe},ut=function(ot,_t,Mt){var It=ot.split("");return Mt&&et(It,Mt,{hiLevel:W}),It.reverse(),_t&&_t.reverse(),It.join("")},et=function(ot,_t,Mt){var It,Tt,Vt,ie,Wt,oe=-1,ne=ot.length,we=0,at=[],kt=W?b:x,Et=[];for(B=!1,a=!1,r=!1,Tt=0;Tt<ne;Tt++)Et[Tt]=G(ot[Tt]);for(Vt=0;Vt<ne;Vt++){if(Wt=we,at[Vt]=At(ot,Et,at,Vt),It=240&(we=kt[Wt][T[at[Vt]]]),_t[Vt]=ie=kt[we&=15][5],It>0)if(16===It){for(Tt=oe;Tt<Vt;Tt++)_t[Tt]=1;oe=-1}else oe=-1;if(kt[we][6])-1===oe&&(oe=Vt);else if(oe>-1){for(Tt=oe;Tt<Vt;Tt++)_t[Tt]=ie;oe=-1}"B"===Et[Vt]&&(_t[Vt]=0),Mt.hiLevel|=ie}r&&function(Ft,Gt,le){for(var ee=0;ee<le;ee++)if("S"===Ft[ee]){Gt[ee]=W;for(var re=ee-1;re>=0&&"WS"===Ft[re];re--)Gt[re]=W}}(Et,_t,ne)},vt=function(ot,_t,Mt,It,Tt){if(!(Tt.hiLevel<ot)){if(1===ot&&1===W&&!a)return _t.reverse(),void(Mt&&Mt.reverse());for(var Vt,ie,Wt,oe,ne=_t.length,we=0;we<ne;){if(It[we]>=ot){for(Wt=we+1;Wt<ne&&It[Wt]>=ot;)Wt++;for(oe=we,ie=Wt-1;oe<ie;oe++,ie--)Vt=_t[oe],_t[oe]=_t[ie],_t[ie]=Vt,Mt&&(Vt=Mt[oe],Mt[oe]=Mt[ie],Mt[ie]=Vt);we=Wt}we++}}},Nt=function(ot,_t,Mt){var It=ot.split(""),Tt={hiLevel:W};return Mt||(Mt=[]),et(It,Mt,Tt),function(Vt,ie,Wt){if(0!==Wt.hiLevel&&h)for(var oe,ne=0;ne<Vt.length;ne++)1===ie[ne]&&(oe=U.indexOf(Vt[ne]))>=0&&(Vt[ne]=U[oe+1])}(It,Mt,Tt),vt(2,It,_t,Mt,Tt),vt(1,It,_t,Mt,Tt),It.join("")};return this.__bidiEngine__.doBidiReorder=function(ot,_t,Mt){if(function(Tt,Vt){if(Vt)for(var ie=0;ie<Tt.length;ie++)Vt[ie]=ie;void 0===l&&(l=nt(Tt)),void 0===d&&(d=nt(Tt))}(ot,_t),s||!c||d)if(s&&c&&l^d)W=l?1:0,ot=ut(ot,_t,Mt);else if(!s&&c&&d)W=l?1:0,ot=Nt(ot,_t,Mt),ot=ut(ot,_t);else if(!s||l||c||d){if(s&&!c&&l^d)ot=ut(ot,_t),l?(W=0,ot=Nt(ot,_t,Mt)):(W=1,ot=Nt(ot,_t,Mt),ot=ut(ot,_t));else if(s&&l&&!c&&d)W=1,ot=Nt(ot,_t,Mt),ot=ut(ot,_t);else if(!s&&!c&&l^d){var It=h;l?(W=1,ot=Nt(ot,_t,Mt),W=0,h=!1,ot=Nt(ot,_t,Mt),h=It):(W=0,ot=Nt(ot,_t,Mt),ot=ut(ot,_t),W=1,h=!1,ot=Nt(ot,_t,Mt),h=It,ot=ut(ot,_t))}}else W=0,ot=Nt(ot,_t,Mt);else W=l?1:0,ot=Nt(ot,_t,Mt);return ot},this.__bidiEngine__.setOptions=function(ot){ot&&(s=ot.isInputVisual,c=ot.isOutputVisual,l=ot.isInputRtl,d=ot.isOutputRtl,h=ot.isSymmetricSwapping)},this.__bidiEngine__.setOptions(i),this.__bidiEngine__};var o=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],e=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(i){var a=i.text,r=i.options||{},s=[];if(r.isInputVisual="boolean"!=typeof r.isInputVisual||r.isInputVisual,e.setOptions(r),"[object Array]"===Object.prototype.toString.call(a)){var l=0;for(s=[],l=0;l<a.length;l+=1)"[object Array]"===Object.prototype.toString.call(a[l])?s.push([e.doBidiReorder(a[l][0]),a[l][1],a[l][2]]):s.push([e.doBidiReorder(a[l])]);i.text=s}else i.text=e.doBidiReorder(a);e.setOptions({isInputVisual:!0})}])}(On),On.API.TTFFont=function(){function n(o){var e;if(this.rawData=o,e=this.contents=new Dl(o),this.contents.pos=4,"ttcf"===e.readString(4))throw new Error("TTCF not supported.");e.pos=0,this.parse(),this.subset=new K2(this),this.registerTTF()}return n.open=function(o){return new n(o)},n.prototype.parse=function(){return this.directory=new ja(this.contents),this.head=new ol(this),this.name=new J2(this),this.cmap=new vm(this),this.toUnicode={},this.hhea=new yu(this),this.maxp=new H2(this),this.hmtx=new G2(this),this.post=new er(this),this.os2=new S1(this),this.loca=new Y2(this),this.glyf=new $2(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,i,a,r;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var s,l,c,d;for(d=[],s=0,l=(c=this.bbox).length;s<l;s++)d.push(Math.round(c[s]*this.scaleFactor));return d}.call(this),this.stemV=0,this.post.exists?(i=255&(a=this.post.italic_angle),32768&(e=a>>16)&&(e=-(1+(65535^e))),this.italicAngle=+(e+"."+i)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=1===(r=this.familyClass)||2===r||3===r||4===r||5===r||7===r,this.isScript=10===this.familyClass,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),0!==this.italicAngle&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(o){var e;return(null!=(e=this.cmap.unicode)?e.codeMap[o]:void 0)||0},n.prototype.widthOfGlyph=function(o){var e;return e=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(o).advance*e},n.prototype.widthOfString=function(o,e,i){var a,r,s,l;for(s=0,r=0,l=(o=""+o).length;0<=l?r<l:r>l;r=0<=l?++r:--r)a=o.charCodeAt(r),s+=this.widthOfGlyph(this.characterToGlyph(a))+i*(1e3/e)||0;return s*(e/1e3)},n.prototype.lineHeight=function(o,e){return null==e&&(e=!1),(this.ascender+(e?this.lineGap:0)-this.decender)/1e3*o},n}();var Ms,Dl=function(){function n(o){this.data=o??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(o){return this.data[this.pos++]=o},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(o){return this.writeByte(o>>>24&255),this.writeByte(o>>16&255),this.writeByte(o>>8&255),this.writeByte(255&o)},n.prototype.readInt32=function(){var o;return(o=this.readUInt32())>=2147483648?o-4294967296:o},n.prototype.writeInt32=function(o){return o<0&&(o+=4294967296),this.writeUInt32(o)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(o){return this.writeByte(o>>8&255),this.writeByte(255&o)},n.prototype.readInt16=function(){var o;return(o=this.readUInt16())>=32768?o-65536:o},n.prototype.writeInt16=function(o){return o<0&&(o+=65536),this.writeUInt16(o)},n.prototype.readString=function(o){var e,i;for(i=[],e=0;0<=o?e<o:e>o;e=0<=o?++e:--e)i[e]=String.fromCharCode(this.readByte());return i.join("")},n.prototype.writeString=function(o){var e,i,a;for(a=[],e=0,i=o.length;0<=i?e<i:e>i;e=0<=i?++e:--e)a.push(this.writeByte(o.charCodeAt(e)));return a},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(o){return this.writeInt16(o)},n.prototype.readLongLong=function(){var o,e,i,a,r,s,l,c;return o=this.readByte(),e=this.readByte(),i=this.readByte(),a=this.readByte(),r=this.readByte(),s=this.readByte(),l=this.readByte(),c=this.readByte(),128&o?-1*(72057594037927940*(255^o)+281474976710656*(255^e)+1099511627776*(255^i)+4294967296*(255^a)+16777216*(255^r)+65536*(255^s)+256*(255^l)+(255^c)+1):72057594037927940*o+281474976710656*e+1099511627776*i+4294967296*a+16777216*r+65536*s+256*l+c},n.prototype.writeLongLong=function(o){var e,i;return e=Math.floor(o/4294967296),i=4294967295&o,this.writeByte(e>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e),this.writeByte(i>>24&255),this.writeByte(i>>16&255),this.writeByte(i>>8&255),this.writeByte(255&i)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(o){return this.writeInt32(o)},n.prototype.read=function(o){var e,i;for(e=[],i=0;0<=o?i<o:i>o;i=0<=o?++i:--i)e.push(this.readByte());return e},n.prototype.write=function(o){var i,a,r;for(r=[],i=0,a=o.length;i<a;i++)r.push(this.writeByte(o[i]));return r},n}(),ja=function(){var n;function o(e){var i,a,r;for(this.scalarType=e.readInt(),this.tableCount=e.readShort(),this.searchRange=e.readShort(),this.entrySelector=e.readShort(),this.rangeShift=e.readShort(),this.tables={},a=0,r=this.tableCount;0<=r?a<r:a>r;a=0<=r?++a:--a)i={tag:e.readString(4),checksum:e.readInt(),offset:e.readInt(),length:e.readInt()},this.tables[i.tag]=i}return o.prototype.encode=function(e){var i,a,s,l,c,d,h,_,x,b,T,P;for(P in b=Object.keys(e).length,c=Math.log(2),_=16*Math.floor(Math.log(b)/c),s=Math.floor(_/c),h=16*b-_,(a=new Dl).writeInt(this.scalarType),a.writeShort(b),a.writeShort(_),a.writeShort(s),a.writeShort(h),d=a.pos+16*b,l=null,T=[],e)for(x=e[P],a.writeString(P),a.writeInt(n(x)),a.writeInt(d),a.writeInt(x.length),T=T.concat(x),"head"===P&&(l=d),d+=x.length;d%4;)T.push(0),d++;return a.write(T),i=2981146554-n(a.data),a.pos=l+8,a.writeUInt32(i),a.data},n=function(e){var i,a,r,s;for(e=Rh.call(e);e.length%4;)e.push(0);for(r=new Dl(e),a=0,i=0,s=e.length;i<s;i=i+=4)a+=r.readUInt32();return 4294967295&a},o}(),W_={}.hasOwnProperty,Is=function(n,o){for(var e in o)W_.call(o,e)&&(n[e]=o[e]);function i(){this.constructor=n}return i.prototype=o.prototype,n.prototype=new i,n.__super__=o.prototype,n};Ms=function(){function n(o){var e;this.file=o,this.exists=!!(e=this.file.directory.tables[this.tag]),e&&(this.offset=e.offset,this.length=e.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n}();var ol=function(n){function o(){return o.__super__.constructor.apply(this,arguments)}return Is(o,Ms),o.prototype.tag="head",o.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},o.prototype.encode=function(e){var i;return(i=new Dl).writeInt(this.version),i.writeInt(this.revision),i.writeInt(this.checkSumAdjustment),i.writeInt(this.magicNumber),i.writeShort(this.flags),i.writeShort(this.unitsPerEm),i.writeLongLong(this.created),i.writeLongLong(this.modified),i.writeShort(this.xMin),i.writeShort(this.yMin),i.writeShort(this.xMax),i.writeShort(this.yMax),i.writeShort(this.macStyle),i.writeShort(this.lowestRecPPEM),i.writeShort(this.fontDirectionHint),i.writeShort(e),i.writeShort(this.glyphDataFormat),i.data},o}(),Qh=function(){function n(o,e){var i,a,r,s,l,c,d,h,_,x,b,T,P,U,q,B,W;switch(this.platformID=o.readUInt16(),this.encodingID=o.readShort(),this.offset=e+o.readInt(),_=o.pos,o.pos=this.offset,this.format=o.readUInt16(),this.length=o.readUInt16(),this.language=o.readUInt16(),this.isUnicode=3===this.platformID&&1===this.encodingID&&4===this.format||0===this.platformID&&4===this.format,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=o.readByte();break;case 4:for(b=o.readUInt16(),x=b/2,o.pos+=6,r=function(){var G,nt;for(nt=[],c=G=0;0<=x?G<x:G>x;c=0<=x?++G:--G)nt.push(o.readUInt16());return nt}(),o.pos+=2,P=function(){var G,nt;for(nt=[],c=G=0;0<=x?G<x:G>x;c=0<=x?++G:--G)nt.push(o.readUInt16());return nt}(),d=function(){var G,nt;for(nt=[],c=G=0;0<=x?G<x:G>x;c=0<=x?++G:--G)nt.push(o.readUInt16());return nt}(),h=function(){var G,nt;for(nt=[],c=G=0;0<=x?G<x:G>x;c=0<=x?++G:--G)nt.push(o.readUInt16());return nt}(),a=(this.length-o.pos+this.offset)/2,l=function(){var G,nt;for(nt=[],c=G=0;0<=a?G<a:G>a;c=0<=a?++G:--G)nt.push(o.readUInt16());return nt}(),c=q=0,W=r.length;q<W;c=++q)for(U=r[c],i=B=T=P[c];T<=U?B<=U:B>=U;i=T<=U?++B:--B)0===h[c]?s=i+d[c]:0!==(s=l[h[c]/2+(i-T)-(x-c)]||0)&&(s+=d[c]),this.codeMap[i]=65535&s}o.pos=_}return n.encode=function(o,e){var i,a,r,s,l,c,d,h,_,x,b,T,P,U,q,B,W,nt,At,ut,et,vt,Nt,ot,_t,Mt,It,Tt,Vt,ie,Wt,oe,ne,we,at,kt,Et,Ft,Gt,le,ee,re,Qe,Ne,on;switch(It=new Dl,s=Object.keys(o).sort(function(en,dn){return en-dn}),e){case"macroman":for(P=0,U=function(){var en=[];for(T=0;T<256;++T)en.push(0);return en}(),B={0:0},r={},Tt=0,oe=s.length;Tt<oe;Tt++)null==B[re=o[a=s[Tt]]]&&(B[re]=++P),r[a]={old:o[a],new:B[o[a]]},U[a]=B[o[a]];return It.writeUInt16(1),It.writeUInt16(0),It.writeUInt32(12),It.writeUInt16(0),It.writeUInt16(262),It.writeUInt16(0),It.write(U),{charMap:r,subtable:It.data,maxGlyphID:P+1};case"unicode":for(_t=[],_=[],W=0,B={},i={},q=d=null,Vt=0,ne=s.length;Vt<ne;Vt++)null==B[nt=o[a=s[Vt]]]&&(B[nt]=++W),i[a]={old:nt,new:B[nt]},l=B[nt]-a,null!=q&&l===d||(q&&_.push(q),_t.push(a),d=l),q=a;for(q&&_.push(q),_.push(65535),_t.push(65535),Nt=2*(vt=_t.length),et=2*Math.pow(Math.log(vt)/Math.LN2,2),x=Math.log(et/2)/Math.LN2,ut=2*vt-et,c=[],At=[],b=[],T=ie=0,we=_t.length;ie<we;T=++ie){if(h=_[T],65535===(ot=_t[T])){c.push(0),At.push(0);break}if(ot-(Mt=i[ot].new)>=32768)for(c.push(0),At.push(2*(b.length+vt-T)),a=Wt=ot;ot<=h?Wt<=h:Wt>=h;a=ot<=h?++Wt:--Wt)b.push(i[a].new);else c.push(Mt-ot),At.push(0)}for(It.writeUInt16(3),It.writeUInt16(1),It.writeUInt32(12),It.writeUInt16(4),It.writeUInt16(16+8*vt+2*b.length),It.writeUInt16(0),It.writeUInt16(Nt),It.writeUInt16(et),It.writeUInt16(x),It.writeUInt16(ut),le=0,at=_.length;le<at;le++)It.writeUInt16(a=_[le]);for(It.writeUInt16(0),ee=0,kt=_t.length;ee<kt;ee++)It.writeUInt16(a=_t[ee]);for(Qe=0,Et=c.length;Qe<Et;Qe++)It.writeUInt16(l=c[Qe]);for(Ne=0,Ft=At.length;Ne<Ft;Ne++)It.writeUInt16(At[Ne]);for(on=0,Gt=b.length;on<Gt;on++)It.writeUInt16(P=b[on]);return{charMap:i,subtable:It.data,maxGlyphID:W+1}}},n}(),vm=function(n){function o(){return o.__super__.constructor.apply(this,arguments)}return Is(o,Ms),o.prototype.tag="cmap",o.prototype.parse=function(e){var i,a,r;for(e.pos=this.offset,this.version=e.readUInt16(),r=e.readUInt16(),this.tables=[],this.unicode=null,a=0;0<=r?a<r:a>r;a=0<=r?++a:--a)i=new Qh(e,this.offset),this.tables.push(i),i.isUnicode&&null==this.unicode&&(this.unicode=i);return!0},o.encode=function(e,i){var a,r;return null==i&&(i="macroman"),a=Qh.encode(e,i),(r=new Dl).writeUInt16(0),r.writeUInt16(1),a.table=r.data.concat(a.subtable),a},o}(),yu=function(n){function o(){return o.__super__.constructor.apply(this,arguments)}return Is(o,Ms),o.prototype.tag="hhea",o.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},o}(),S1=function(n){function o(){return o.__super__.constructor.apply(this,arguments)}return Is(o,Ms),o.prototype.tag="OS/2",o.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var i,a;for(a=[],i=0;i<10;++i)a.push(e.readByte());return a}(),this.charRange=function(){var i,a;for(a=[],i=0;i<4;++i)a.push(e.readInt());return a}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var i,a;for(a=[],i=0;i<2;i=++i)a.push(e.readInt());return a}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},o}(),er=function(n){function o(){return o.__super__.constructor.apply(this,arguments)}return Is(o,Ms),o.prototype.tag="post",o.prototype.parse=function(e){var i,a,r;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var s;for(a=e.readUInt16(),this.glyphNameIndex=[],s=0;0<=a?s<a:s>a;s=0<=a?++s:--s)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],r=[];e.pos<this.offset+this.length;)i=e.readByte(),r.push(this.names.push(e.readString(i)));return r;case 151552:return a=e.readUInt16(),this.offsets=e.read(a);case 262144:return this.map=function(){var l,c,d;for(d=[],s=l=0,c=this.file.maxp.numGlyphs;0<=c?l<c:l>c;s=0<=c?++l:--l)d.push(e.readUInt32());return d}.call(this)}},o}(),V_=function(n,o){this.raw=n,this.length=n.length,this.platformID=o.platformID,this.encodingID=o.encodingID,this.languageID=o.languageID},J2=function(n){function o(){return o.__super__.constructor.apply(this,arguments)}return Is(o,Ms),o.prototype.tag="name",o.prototype.parse=function(e){var i,a,r,s,l,c,d,h,_,x,b;for(e.pos=this.offset,e.readShort(),i=e.readShort(),c=e.readShort(),a=[],s=0;0<=i?s<i:s>i;s=0<=i?++s:--s)a.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+c+e.readShort()});for(d={},s=_=0,x=a.length;_<x;s=++_)e.pos=(r=a[s]).offset,h=e.readString(r.length),l=new V_(h,r),null==d[b=r.nameID]&&(d[b]=[]),d[r.nameID].push(l);this.strings=d,this.copyright=d[0],this.fontFamily=d[1],this.fontSubfamily=d[2],this.uniqueSubfamily=d[3],this.fontName=d[4],this.version=d[5];try{this.postscriptName=d[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=d[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=d[7],this.manufacturer=d[8],this.designer=d[9],this.description=d[10],this.vendorUrl=d[11],this.designerUrl=d[12],this.license=d[13],this.licenseUrl=d[14],this.preferredFamily=d[15],this.preferredSubfamily=d[17],this.compatibleFull=d[18],this.sampleText=d[19]},o}(),H2=function(n){function o(){return o.__super__.constructor.apply(this,arguments)}return Is(o,Ms),o.prototype.tag="maxp",o.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},o}(),G2=function(n){function o(){return o.__super__.constructor.apply(this,arguments)}return Is(o,Ms),o.prototype.tag="hmtx",o.prototype.parse=function(e){var i,a,r,l,c,d;for(e.pos=this.offset,this.metrics=[],i=0,c=this.file.hhea.numberOfMetrics;0<=c?i<c:i>c;i=0<=c?++i:--i)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(r=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var h,_;for(_=[],i=h=0;0<=r?h<r:h>r;i=0<=r?++h:--h)_.push(e.readInt16());return _}(),this.widths=function(){var h,_,x,b;for(b=[],h=0,_=(x=this.metrics).length;h<_;h++)b.push(x[h].advance);return b}.call(this),a=this.widths[this.widths.length-1],d=[],i=l=0;0<=r?l<r:l>r;i=0<=r?++l:--l)d.push(this.widths.push(a));return d},o.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},o}(),Rh=[].slice,$2=function(n){function o(){return o.__super__.constructor.apply(this,arguments)}return Is(o,Ms),o.prototype.tag="glyf",o.prototype.parse=function(){return this.cache={}},o.prototype.glyphFor=function(e){var i,a,r,s,l,c,d,h,_,x;return e in this.cache?this.cache[e]:(i=this.file.contents,a=(s=this.file.loca).indexOf(e),0===(r=s.lengthOf(e))?this.cache[e]=null:(i.pos=this.offset+a,l=(c=new Dl(i.read(r))).readShort(),h=c.readShort(),x=c.readShort(),d=c.readShort(),_=c.readShort(),this.cache[e]=-1===l?new O1(c,h,x,d,_):new ym(c,l,h,x,d,_),this.cache[e]))},o.prototype.encode=function(e,i,a){var r,s,l,c,d;for(l=[],s=[],c=0,d=i.length;c<d;c++)r=e[i[c]],s.push(l.length),r&&(l=l.concat(r.encode(a)));return s.push(l.length),{table:l,offsets:s}},o}(),ym=function(){function n(o,e,i,a,r,s){this.raw=o,this.numberOfContours=e,this.xMin=i,this.yMin=a,this.xMax=r,this.yMax=s,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n}(),O1=function(){function n(o,e,i,a,r){var s,l;for(this.raw=o,this.xMin=e,this.yMin=i,this.xMax=a,this.yMax=r,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],s=this.raw;l=s.readShort(),this.glyphOffsets.push(s.pos),this.glyphIDs.push(s.readUInt16()),32&l;)s.pos+=1&l?4:2,128&l?s.pos+=8:64&l?s.pos+=4:8&l&&(s.pos+=2)}return n.prototype.encode=function(){var o,e,i;for(e=new Dl(Rh.call(this.raw.data)),o=0,i=this.glyphIDs.length;o<i;++o)e.pos=this.glyphOffsets[o];return e.data},n}(),Y2=function(n){function o(){return o.__super__.constructor.apply(this,arguments)}return Is(o,Ms),o.prototype.tag="loca",o.prototype.parse=function(e){var a;return e.pos=this.offset,this.offsets=0===this.file.head.indexToLocFormat?function(){var r,s;for(s=[],a=0,r=this.length;a<r;a+=2)s.push(2*e.readUInt16());return s}.call(this):function(){var r,s;for(s=[],a=0,r=this.length;a<r;a+=4)s.push(e.readUInt32());return s}.call(this)},o.prototype.indexOf=function(e){return this.offsets[e]},o.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},o.prototype.encode=function(e,i){for(var a=new Uint32Array(this.offsets.length),r=0,s=0,l=0;l<a.length;++l)if(a[l]=r,s<i.length&&i[s]==l){++s,a[l]=r;var d=this.offsets[l+1]-this.offsets[l];d>0&&(r+=d)}for(var h=new Array(4*a.length),_=0;_<a.length;++_)h[4*_+3]=255&a[_],h[4*_+2]=(65280&a[_])>>8,h[4*_+1]=(16711680&a[_])>>16,h[4*_]=(4278190080&a[_])>>24;return h},o}(),K2=function(){function n(o){this.font=o,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var o,e,a,r;for(e in a=this.font.cmap.tables[0].codeMap,o={},r=this.subset)o[e]=a[r[e]];return o},n.prototype.glyphsFor=function(o){var e,i,a,r,s,l,c;for(a={},s=0,l=o.length;s<l;s++)a[r=o[s]]=this.font.glyf.glyphFor(r);for(r in e=[],a)null!=(i=a[r])&&i.compound&&e.push.apply(e,i.glyphIDs);if(e.length>0)for(r in c=this.glyphsFor(e))a[r]=i=c[r];return a},n.prototype.encode=function(o,e){var i,a,r,s,c,d,h,_,x,b,T,P,U,q;for(a in i=vm.encode(this.generateCmap(),"unicode"),s=this.glyphsFor(o),b={0:0},q=i.charMap)b[(c=q[a]).old]=c.new;for(T in x=i.maxGlyphID,s)T in b||(b[T]=x++);return h=function(B){var W,G;for(W in G={},B)G[B[W]]=W;return G}(b),_=Object.keys(h).sort(function(B,W){return B-W}),P=function(){var B,W,G;for(G=[],B=0,W=_.length;B<W;B++)G.push(h[_[B]]);return G}(),r=this.font.glyf.encode(s,P,b),d=this.font.loca.encode(r.offsets,P),U={cmap:this.font.cmap.raw(),glyf:r.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(e)},this.font.os2.exists&&(U["OS/2"]=this.font.os2.raw()),this.font.directory.encode(U)},n}();On.API.PDFObject=function(){var n;function o(){}return n=function(e,i){return(Array(i+1).join("0")+e).slice(-i)},o.convert=function(e){var a,r;if(Array.isArray(e))return"["+function(){var l,c,d;for(d=[],l=0,c=e.length;l<c;l++)d.push(o.convert(e[l]));return d}().join(" ")+"]";if("string"==typeof e)return"/"+e;if(e?.isString)return"("+e+")";if(e instanceof Date)return"(D:"+n(e.getUTCFullYear(),4)+n(e.getUTCMonth(),2)+n(e.getUTCDate(),2)+n(e.getUTCHours(),2)+n(e.getUTCMinutes(),2)+n(e.getUTCSeconds(),2)+"Z)";if("[object Object]"==={}.toString.call(e)){for(a in r=["<<"],e)r.push("/"+a+" "+o.convert(e[a]));return r.push(">>"),r.join("\n")}return""+e},o}();const wm=On;var W2=M(28485),E1=M.n(W2),X_=M(16930),M1=M.n(X_),V2=M(47e3),X2=M.n(V2),Uh=function(n){var e,x,o=n,i={a:0,b:0,c:0},a=[];return e=function(x,b){var T,P,U,q,B,W;if(x.test(o))for(P=0,U=(T=o.match(x)).length;P<U;P+=1)i[b]+=1,B=o.indexOf(q=T[P]),a.push({selector:n.substr(B,W=q.length),type:b,index:B,length:W}),o=o.replace(q,Array(W+1).join(" "))},(x=function(U){var q,B,W,G;if(U.test(o))for(B=0,W=(q=o.match(U)).length;B<W;B+=1)o=o.replace(G=q[B],Array(G.length+1).join("A"))})(/\\[0-9A-Fa-f]{6}\s?/g),x(/\\[0-9A-Fa-f]{1,5}\s/g),x(/\\./g),function(){var b,T,P,U,x=/{[^]*/gm;if(x.test(o))for(T=0,P=(b=o.match(x)).length;T<P;T+=1)o=o.replace(U=b[T],Array(U.length+1).join(" "))}(),e(/(\[[^\]]+\])/g,"b"),e(/(#[^\#\s\+>~\.\[:\)]+)/g,"a"),e(/(\.[^\s\+>~\.\[:\)]+)/g,"b"),e(/(::[^\s\+>~\.\[:]+|:first-line|:first-letter|:before|:after)/gi,"c"),e(/(:(?!not|global|local)[\w-]+\([^\)]*\))/gi,"b"),e(/(:(?!not|global|local)[^\s\+>~\.\[:]+)/g,"b"),o=(o=(o=(o=(o=(o=o.replace(/[\*\s\+>~]/g," ")).replace(/[#\.]/g," ")).replace(/:not/g,"    ")).replace(/:local/g,"      ")).replace(/:global/g,"       ")).replace(/[\(\)]/g," "),e(/([^\s\+>~\.\[:]+)/g,"c"),a.sort(function(x,b){return x.index-b.index}),{selector:n,specificity:"0,"+i.a.toString()+","+i.b.toString()+","+i.c.toString(),specificityArray:[0,i.a,i.b,i.c],parts:a}},I1=function(n,o){return(I1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var a in i)i.hasOwnProperty(a)&&(e[a]=i[a])})(n,o)};function Hi(n,o){function e(){this.constructor=n}I1(n,o),n.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)}var Bh=function(){return(Bh=Object.assign||function(n){for(var o,e=1,i=arguments.length;e<i;e++)for(var a in o=arguments[e])Object.prototype.hasOwnProperty.call(o,a)&&(n[a]=o[a]);return n}).apply(this,arguments)};function no(n,o,e,i){return new(e||(e=Promise))(function(a,r){function s(d){try{c(i.next(d))}catch(h){r(h)}}function l(d){try{c(i.throw(d))}catch(h){r(h)}}function c(d){var h;d.done?a(d.value):(h=d.value,h instanceof e?h:new e(function(_){_(h)})).then(s,l)}c((i=i.apply(n,o||[])).next())})}function io(n,o){var e,i,a,r,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function l(c){return function(d){return function(h){if(e)throw new TypeError("Generator is already executing.");for(;s;)try{if(e=1,i&&(a=2&h[0]?i.return:h[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,h[1])).done)return a;switch(i=0,a&&(h=[2&h[0],a.value]),h[0]){case 0:case 1:a=h;break;case 4:return s.label++,{value:h[1],done:!1};case 5:s.label++,i=h[1],h=[0];continue;case 7:h=s.ops.pop(),s.trys.pop();continue;default:if(!((a=(a=s.trys).length>0&&a[a.length-1])||6!==h[0]&&2!==h[0])){s=0;continue}if(3===h[0]&&(!a||h[1]>a[0]&&h[1]<a[3])){s.label=h[1];break}if(6===h[0]&&s.label<a[1]){s.label=a[1],a=h;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(h);break}a[2]&&s.ops.pop(),s.trys.pop();continue}h=o.call(n,s)}catch(_){h=[6,_],i=0}finally{e=a=0}if(5&h[0])throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}([c,d])}}}var Dr=function(){function n(o){if(this.a=void 0,this.r=0,this.g=0,this.b=0,this.simpleColors={},this.colorDefs=[],this.ok=!1,o){for(var e in"#"==o.charAt(0)&&(o=o.substr(1,6)),o=(o=o.replace(/ /g,"")).toLowerCase(),this.simpleColors={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgrey:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",grey:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightslategrey:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"},this.simpleColors)o==e&&(o=this.simpleColors[e]);this.colorDefs=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(c){return[parseInt(c[1]),parseInt(c[2]),parseInt(c[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(c){return[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(c){return[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)]}}];for(var i=0;i<this.colorDefs.length;i++){var r=this.colorDefs[i].process,s=this.colorDefs[i].re.exec(o);if(s){var l=r(s);this.r=l[0],this.g=l[1],this.b=l[2],this.ok=!0}}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b}}return n.prototype.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},n.prototype.toRGBA=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+(this.a||"1")+")"},n.prototype.toHex=function(){var o=this.r.toString(16),e=this.g.toString(16),i=this.b.toString(16);return 1==o.length&&(o="0"+o),1==e.length&&(e="0"+e),1==i.length&&(i="0"+i),"#"+o+e+i},n.prototype.getHelpXML=function(){for(var o=[],e=0;e<this.colorDefs.length;e++)for(var i=this.colorDefs[e].example,a=0;a<i.length;a++)o[o.length]=i[a];for(var r in this.simpleColors)o[o.length]=r;var s=document.createElement("ul");for(s.setAttribute("id","rgbcolor-examples"),e=0;e<o.length;e++)try{var l=document.createElement("li"),c=new n(o[e]),d=document.createElement("div");d.style.cssText="margin: 3px; border: 1px solid black; background:"+c.toHex()+"; color:"+c.toHex(),d.appendChild(document.createTextNode("test"));var h=document.createTextNode(" "+o[e]+" -> "+c.toRGB()+" -> "+c.toHex());l.appendChild(d),l.appendChild(h),s.appendChild(l)}catch{}return s},n}(),nr=function(){function n(o){this.color=o}return n.prototype.getFillData=function(o,e){return no(this,void 0,void 0,function(){return io(this,function(i){return[2,void 0]})})},n}(),L1=function(){function n(){this.xmlSpace="",this.fill=null,this.fillOpacity=1,this.fontFamily="",this.fontSize=16,this.fontStyle="",this.fontWeight="",this.opacity=1,this.stroke=null,this.strokeDasharray=null,this.strokeDashoffset=0,this.strokeLinecap="",this.strokeLinejoin="",this.strokeMiterlimit=4,this.strokeOpacity=1,this.strokeWidth=1,this.alignmentBaseline="",this.textAnchor="",this.visibility="",this.color=null}return n.prototype.clone=function(){var o=new n;return o.xmlSpace=this.xmlSpace,o.fill=this.fill,o.fillOpacity=this.fillOpacity,o.fontFamily=this.fontFamily,o.fontSize=this.fontSize,o.fontStyle=this.fontStyle,o.fontWeight=this.fontWeight,o.opacity=this.opacity,o.stroke=this.stroke,o.strokeDasharray=this.strokeDasharray,o.strokeDashoffset=this.strokeDashoffset,o.strokeLinecap=this.strokeLinecap,o.strokeLinejoin=this.strokeLinejoin,o.strokeMiterlimit=this.strokeMiterlimit,o.strokeOpacity=this.strokeOpacity,o.strokeWidth=this.strokeWidth,o.textAnchor=this.textAnchor,o.alignmentBaseline=this.alignmentBaseline,o.visibility=this.visibility,o.color=this.color,o},n.default=function(){var o=new n;return o.xmlSpace="default",o.fill=new nr(new Dr("rgb(0, 0, 0)")),o.fillOpacity=1,o.fontFamily="times",o.fontSize=16,o.fontStyle="normal",o.fontWeight="normal",o.opacity=1,o.stroke=null,o.strokeDasharray=null,o.strokeDashoffset=0,o.strokeLinecap="butt",o.strokeLinejoin="miter",o.strokeMiterlimit=4,o.strokeOpacity=1,o.strokeWidth=1,o.alignmentBaseline="baseline",o.textAnchor="start",o.visibility="visible",o.color=new Dr("rgb(0, 0, 0)"),o},n}(),jl=function(){function n(o,e){var i,a,r;this.pdf=o,this.svg2pdfParameters=e.svg2pdfParameters,this.attributeState=e.attributeState?e.attributeState.clone():L1.default(),this.viewport=e.viewport,this.refsHandler=e.refsHandler,this.styleSheets=e.styleSheets,this.textMeasure=e.textMeasure,this.transform=null!==(i=e.transform)&&void 0!==i?i:this.pdf.unitMatrix,this.withinClipPath=null!==(a=e.withinClipPath)&&void 0!==a&&a,this.withinUse=null!==(r=e.withinUse)&&void 0!==r&&r}return n.prototype.clone=function(o){var e,i,a,r;return void 0===o&&(o={}),new n(this.pdf,{svg2pdfParameters:this.svg2pdfParameters,attributeState:o.attributeState?o.attributeState.clone():this.attributeState.clone(),viewport:null!==(e=o.viewport)&&void 0!==e?e:this.viewport,refsHandler:this.refsHandler,styleSheets:this.styleSheets,textMeasure:this.textMeasure,transform:null!==(i=o.transform)&&void 0!==i?i:this.transform,withinClipPath:null!==(a=o.withinClipPath)&&void 0!==a?a:this.withinClipPath,withinUse:null!==(r=o.withinUse)&&void 0!==r?r:this.withinUse})},n}(),P1=function(){function n(o){this.renderedElements={},this.idMap=o,this.idPrefix=String(n.instanceCounter++)}return n.prototype.getRendered=function(o,e,i){return no(this,void 0,void 0,function(){var a,r;return io(this,function(s){switch(s.label){case 0:return a=this.generateKey(o,e),this.renderedElements.hasOwnProperty(a)?[2,this.renderedElements[o]]:(r=this.get(o),this.renderedElements[a]=r,[4,i(r)]);case 1:return s.sent(),[2,r]}})})},n.prototype.get=function(o){return this.idMap[E1()(o,{isIdentifier:!0})]},n.prototype.generateKey=function(o,e){return this.idPrefix+"|"+o+"|"+(e||new Dr("rgb(0,0,0)")).toRGBA()},n.instanceCounter=0,n}();function ef(n,o){return Math.atan2(o[1]-n[1],o[0]-n[0])}function N1(n,o){return[2/3*(o[0]-n[0])+n[0],2/3*(o[1]-n[1])+n[1]]}function wu(n){var o=Math.sqrt(n[0]*n[0]+n[1]*n[1]);return[n[0]/o,n[1]/o]}function Cu(n,o){return wu([o[0]-n[0],o[1]-n[1]])}function _d(n,o){return[n[0]+o[0],n[1]+o[1]]}function nf(n,o){var e=n[0],i=n[1];return[o.a*e+o.c*i+o.e,o.b*e+o.d*i+o.f]}var Oc=function(){function n(){this.segments=[]}return n.prototype.moveTo=function(o,e){return this.segments.push(new kn(o,e)),this},n.prototype.lineTo=function(o,e){return this.segments.push(new Ec(o,e)),this},n.prototype.curveTo=function(o,e,i,a,r,s){return this.segments.push(new al(o,e,i,a,r,s)),this},n.prototype.close=function(){return this.segments.push(new Tu),this},n.prototype.transform=function(o){this.segments.forEach(function(e){if(e instanceof kn||e instanceof Ec||e instanceof al){var i=nf([e.x,e.y],o);e.x=i[0],e.y=i[1]}if(e instanceof al){var a=nf([e.x1,e.y1],o),r=nf([e.x2,e.y2],o);e.x1=a[0],e.y1=a[1],e.x2=r[0],e.y2=r[1]}})},n.prototype.draw=function(o){var e=o.pdf;this.segments.forEach(function(i){i instanceof kn?e.moveTo(i.x,i.y):i instanceof Ec?e.lineTo(i.x,i.y):i instanceof al?e.curveTo(i.x1,i.y1,i.x2,i.y2,i.x,i.y):e.close()})},n}(),kn=function(n,o){this.x=n,this.y=o},Ec=function(n,o){this.x=n,this.y=o},al=function(n,o,e,i,a,r){this.x1=n,this.y1=o,this.x2=e,this.y2=i,this.x=a,this.y=r},Tu=function(){};function ql(n,o){return o.split(",").indexOf((n.nodeName||n.tagName).toLowerCase())>=0}function ze(n,o,e,i){var a;return void 0===i&&(i=e),(null===(a=n.style)||void 0===a?void 0:a.getPropertyValue(i))||o.getPropertyValue(n,i)||n.hasAttribute(e)&&n.getAttribute(e)||void 0}function Fl(n,o,e){if("none"===ze(n.element,e.styleSheets,"display"))return!1;var i=o,a=ze(n.element,e.styleSheets,"visibility");return a&&(i="hidden"!==a),i}function ua(n,o,e){var i=Fl(n,o,e);return 0!==n.element.childNodes.length&&(n.children.forEach(function(a){a.isVisible(i,e)&&(i=!0)}),i)}var tb=function(){function n(){this.markers=[]}return n.prototype.addMarker=function(o){this.markers.push(o)},n.prototype.draw=function(o){return no(this,void 0,void 0,function(){var e,i,a,r,s,l,c;return io(this,function(d){switch(d.label){case 0:e=0,d.label=1;case 1:return e<this.markers.length?(a=void 0,r=(i=this.markers[e]).angle,s=i.anchor,l=Math.cos(r),c=Math.sin(r),a=o.pdf.Matrix(l,c,-c,l,s[0],s[1]),a=o.pdf.matrixMult(o.pdf.Matrix(o.attributeState.strokeWidth,0,0,o.attributeState.strokeWidth,0,0),a),a=o.pdf.matrixMult(a,o.transform),o.pdf.saveGraphicsState(),[4,o.refsHandler.getRendered(i.id,null,function(h){return h.apply(o)})]):[3,4];case 2:d.sent(),o.pdf.doFormObject(i.id,a),o.pdf.restoreGraphicsState(),d.label=3;case 3:return e++,[3,1];case 4:return[2]}})})},n}(),Ls=function(n,o,e){this.id=n,this.anchor=o,this.angle=e},Cm=/url\(["']?#([^"']+)["']?\)/,Z1={bottom:"bottom","text-bottom":"bottom",top:"top","text-top":"top",hanging:"hanging",middle:"middle",central:"middle",center:"middle",mathematical:"middle",ideographic:"ideographic",alphabetic:"alphabetic",baseline:"alphabetic"};function rl(n,o){var e;return(e=n&&n.toString().match(/^([\-0-9.]+)em$/))?parseFloat(e[1])*o:(e=n&&n.toString().match(/^([\-0-9.]+)(px|)$/))?parseFloat(e[1]):0}function xr(n){return Z1[n]||"alphabetic"}function da(n){for(var o,e=[],i=/[+-]?(?:(?:\d+\.?\d*)|(?:\d*\.?\d+))(?:[eE][+-]?\d+)?/g;o=i.exec(n);)e.push(parseFloat(o[0]));return e}function Mc(n,o){if("transparent"===n){var e=new Dr("rgb(0,0,0)");return e.a=0,e}if("currentcolor"===n.toLowerCase())return o||new Dr("rgb(0,0,0)");var i=/\s*rgba\(((?:[^,\)]*,){3}[^,\)]*)\)\s*/.exec(n);if(i){var a=da(i[1]),r=new Dr("rgb("+a.slice(0,3).join(",")+")");return r.a=a[3],r}return new Dr(n)}var fd,sl={"sans-serif":"helvetica",verdana:"helvetica",arial:"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",serif:"times",cursive:"times",fantasy:"times"},D1=(fd=wm.version.split("."),2===parseFloat(fd[0])&&3===parseFloat(fd[1]));function zh(n,o){return D1?400==o?"italic"==n?"italic":"normal":700==o&&"italic"!==n?"bold":n+""+o:400==o||"normal"===o?"italic"===n?"italic":"normal":700!=o&&"bold"!==o||"normal"!==n?(700==o?"bold":o)+""+n:"bold"}function Jh(n,o){if("none"===ze(o.element,n.styleSheets,"display"))return[0,0,0,0];var e=[0,0,0,0];return o.children.forEach(function(i){var a=i.getBoundingBox(n);e=[Math.min(e[0],a[0]),Math.min(e[1],a[1]),Math.max(e[0]+e[2],a[0]+a[2])-Math.min(e[0],a[0]),Math.max(e[1]+e[3],a[1]+a[3])-Math.min(e[1],a[1])]}),e}function ku(n,o){var e=parseFloat,i=e(n.getAttribute("x1"))||e(ze(n,o.styleSheets,"x"))||e(ze(n,o.styleSheets,"cx"))-e(ze(n,o.styleSheets,"r"))||0,a=e(n.getAttribute("x2"))||i+e(ze(n,o.styleSheets,"width"))||e(ze(n,o.styleSheets,"cx"))+e(ze(n,o.styleSheets,"r"))||0,r=e(n.getAttribute("y1"))||e(ze(n,o.styleSheets,"y"))||e(ze(n,o.styleSheets,"cy"))-e(ze(n,o.styleSheets,"r"))||0,s=e(n.getAttribute("y2"))||r+e(ze(n,o.styleSheets,"height"))||e(ze(n,o.styleSheets,"cy"))+e(ze(n,o.styleSheets,"r"))||0;return[Math.min(i,a),Math.min(r,s),Math.max(i,a)-Math.min(i,a),Math.max(r,s)-Math.min(r,s)]}function gd(n,o,e,i,a,r,s,l){void 0===l&&(l=!1);var c,d,h=o[0],_=o[1],x=o[2],b=o[3],T=a/x,P=r/b,U=n.getAttribute("preserveAspectRatio");if(U){var q=U.split(" ");"defer"===q[0]&&(q=q.slice(1)),c=q[0],d=q[1]||"meet"}else c="xMidYMid",d="meet";if("none"!==c&&("meet"===d?T=P=Math.min(T,P):"slice"===d&&(T=P=Math.max(T,P))),l)return s.pdf.Matrix(T,0,0,P,0,0);var B=e-h*T,W=i-_*P;c.indexOf("xMid")>=0?B+=(a-x*T)/2:c.indexOf("xMax")>=0&&(B+=a-x*T),c.indexOf("YMid")>=0?W+=(r-b*P)/2:c.indexOf("YMax")>=0&&(W+=r-b*P);var G=s.pdf.Matrix(1,0,0,1,B,W),nt=s.pdf.Matrix(T,0,0,P,0,0);return s.pdf.matrixMult(nt,G)}function Ps(n,o){if(!n||"none"===n)return o.pdf.unitMatrix;for(var e,i,a=/^[\s,]*matrix\(([^)]+)\)\s*/,r=/^[\s,]*translate\(([^)]+)\)\s*/,s=/^[\s,]*rotate\(([^)]+)\)\s*/,l=/^[\s,]*scale\(([^)]+)\)\s*/,c=/^[\s,]*skewX\(([^)]+)\)\s*/,d=/^[\s,]*skewY\(([^)]+)\)\s*/,h=o.pdf.unitMatrix;n.length>0&&n.length!==i;){i=n.length;var _=a.exec(n);if(_&&(e=da(_[1]),h=o.pdf.matrixMult(o.pdf.Matrix(e[0],e[1],e[2],e[3],e[4],e[5]),h),n=n.substr(_[0].length)),_=s.exec(n)){e=da(_[1]);var x=Math.PI*e[0]/180;if(h=o.pdf.matrixMult(o.pdf.Matrix(Math.cos(x),Math.sin(x),-Math.sin(x),Math.cos(x),0,0),h),e[1]||e[2]){var b=o.pdf.Matrix(1,0,0,1,e[1],e[2]),T=o.pdf.Matrix(1,0,0,1,-e[1],-e[2]);h=o.pdf.matrixMult(T,o.pdf.matrixMult(h,b))}n=n.substr(_[0].length)}(_=r.exec(n))&&(e=da(_[1]),h=o.pdf.matrixMult(o.pdf.Matrix(1,0,0,1,e[0],e[1]||0),h),n=n.substr(_[0].length)),(_=l.exec(n))&&((e=da(_[1]))[1]||(e[1]=e[0]),h=o.pdf.matrixMult(o.pdf.Matrix(e[0],0,0,e[1],0,0),h),n=n.substr(_[0].length)),(_=c.exec(n))&&(e=parseFloat(_[1]),e*=Math.PI/180,h=o.pdf.matrixMult(o.pdf.Matrix(1,0,Math.tan(e),1,0,0),h),n=n.substr(_[0].length)),(_=d.exec(n))&&(e=parseFloat(_[1]),e*=Math.PI/180,h=o.pdf.matrixMult(o.pdf.Matrix(1,Math.tan(e),0,1,0,0),h),n=n.substr(_[0].length))}return h}var of=function(){function n(o,e){this.element=o,this.children=e,this.parent=null}return n.prototype.setParent=function(o){this.parent=o},n.prototype.getParent=function(){return this.parent},n.prototype.getBoundingBox=function(o){return"none"===ze(this.element,o.styleSheets,"display")?[0,0,0,0]:this.getBoundingBoxCore(o)},n.prototype.computeNodeTransform=function(o){var e=this.computeNodeTransformCore(o),i=ze(this.element,o.styleSheets,"transform");return i?o.pdf.matrixMult(e,Ps(i,o)):e},n}(),as=function(n){function o(){return null!==n&&n.apply(this,arguments)||this}return Hi(o,n),o.prototype.render=function(e){return Promise.resolve()},o.prototype.getBoundingBoxCore=function(e){return[]},o.prototype.computeNodeTransformCore=function(e){return e.pdf.unitMatrix},o}(of),af=function(n){function o(e,i,a){var r=n.call(this,i,a)||this;return r.pdfGradientType=e,r.contextColor=void 0,r}return Hi(o,n),o.prototype.apply=function(e){return no(this,void 0,void 0,function(){var i,a,r,s,l,c;return io(this,function(d){return(i=this.element.getAttribute("id"))?(a=this.getStops(e.styleSheets),r=0,s=!1,a.forEach(function(h){var _=h.opacity;_&&1!==_&&(r+=_,s=!0)}),s&&(l=new Do({opacity:r/a.length})),c=new Tc(this.pdfGradientType,this.getCoordinates(),a,l),e.pdf.addShadingPattern(i,c),[2]):[2]})})},o.prototype.getStops=function(e){var i=this;if(this.stops)return this.stops;if(void 0===this.contextColor){this.contextColor=null;for(var a=this;a;){var r=ze(a.element,e,"color");if(r){this.contextColor=Mc(r,null);break}a=a.getParent()}}var s=[];return this.children.forEach(function(l){if("stop"===l.element.tagName.toLowerCase()){var c=ze(l.element,e,"color"),d=Mc(ze(l.element,e,"stop-color")||"",c?Mc(c,null):i.contextColor),h=parseFloat(ze(l.element,e,"stop-opacity")||"1");s.push({offset:o.parseGradientOffset(l.element.getAttribute("offset")||"0"),color:[d.r,d.g,d.b],opacity:h})}}),this.stops=s},o.prototype.getBoundingBoxCore=function(e){return ku(this.element,e)},o.prototype.computeNodeTransformCore=function(e){return e.pdf.unitMatrix},o.prototype.isVisible=function(e,i){return ua(this,e,i)},o.parseGradientOffset=function(e){var i=parseFloat(e);return!isNaN(i)&&e.indexOf("%")>=0?i/100:i},o}(as),rf=function(n){function o(e,i){return n.call(this,"axial",e,i)||this}return Hi(o,n),o.prototype.getCoordinates=function(){return[parseFloat(this.element.getAttribute("x1")||"0"),parseFloat(this.element.getAttribute("y1")||"0"),parseFloat(this.element.getAttribute("x2")||"1"),parseFloat(this.element.getAttribute("y2")||"0")]},o}(af),Hh=function(n){function o(e,i){return n.call(this,"radial",e,i)||this}return Hi(o,n),o.prototype.getCoordinates=function(){var e=this.element.getAttribute("cx"),i=this.element.getAttribute("cy"),a=this.element.getAttribute("fx"),r=this.element.getAttribute("fy");return[parseFloat(a||e||"0.5"),parseFloat(r||i||"0.5"),0,parseFloat(e||"0.5"),parseFloat(i||"0.5"),parseFloat(this.element.getAttribute("r")||"0.5")]},o}(af),eb=function(){function n(o,e){this.key=o,this.gradient=e}return n.prototype.getFillData=function(o,e){return no(this,void 0,void 0,function(){var i,a,r;return io(this,function(s){switch(s.label){case 0:return[4,e.refsHandler.getRendered(this.key,null,function(l){return l.apply(new jl(e.pdf,{refsHandler:e.refsHandler,textMeasure:e.textMeasure,styleSheets:e.styleSheets,viewport:e.viewport,svg2pdfParameters:e.svg2pdfParameters}))})];case 1:return s.sent(),this.gradient.element.hasAttribute("gradientUnits")&&"objectboundingbox"!==this.gradient.element.getAttribute("gradientUnits").toLowerCase()?i=e.pdf.unitMatrix:(a=o.getBoundingBox(e),i=e.pdf.Matrix(a[2],0,0,a[3],a[0],a[1])),r=Ps(ze(this.gradient.element,e.styleSheets,"gradientTransform","transform"),e),[2,{key:this.key,matrix:e.pdf.matrixMult(r,i)}]}})})},n}(),j1=function(n){function o(){return null!==n&&n.apply(this,arguments)||this}return Hi(o,n),o.prototype.apply=function(e){return no(this,void 0,void 0,function(){var i,a,r,s,l;return io(this,function(c){switch(c.label){case 0:if(!(i=this.element.getAttribute("id")))return[2];a=this.getBoundingBox(e),r=new kc([a[0],a[1],a[0]+a[2],a[1]+a[3]],a[2],a[3]),e.pdf.beginTilingPattern(r),s=0,l=this.children,c.label=1;case 1:return s<l.length?[4,l[s].render(new jl(e.pdf,{attributeState:e.attributeState,refsHandler:e.refsHandler,styleSheets:e.styleSheets,viewport:e.viewport,svg2pdfParameters:e.svg2pdfParameters,textMeasure:e.textMeasure}))]:[3,4];case 2:c.sent(),c.label=3;case 3:return s++,[3,1];case 4:return e.pdf.endTilingPattern(i,r),[2]}})})},o.prototype.getBoundingBoxCore=function(e){return ku(this.element,e)},o.prototype.computeNodeTransformCore=function(e){return e.pdf.unitMatrix},o.prototype.isVisible=function(e,i){return ua(this,e,i)},o}(as),nb=function(){function n(o,e){this.key=o,this.pattern=e}return n.prototype.getFillData=function(o,e){return no(this,void 0,void 0,function(){var i,a,r,s,l,c,d,h,_,x,b,T;return io(this,function(P){switch(P.label){case 0:return[4,e.refsHandler.getRendered(this.key,null,function(U){return U.apply(new jl(e.pdf,{refsHandler:e.refsHandler,textMeasure:e.textMeasure,styleSheets:e.styleSheets,viewport:e.viewport,svg2pdfParameters:e.svg2pdfParameters}))})];case 1:return P.sent(),i={key:this.key,boundingBox:void 0,xStep:0,yStep:0,matrix:void 0},r=e.pdf.unitMatrix,this.pattern.element.hasAttribute("patternUnits")&&"objectboundingbox"!==this.pattern.element.getAttribute("patternUnits").toLowerCase()||(a=o.getBoundingBox(e),r=e.pdf.Matrix(1,0,0,1,a[0],a[1]),l=this.pattern.getBoundingBox(e),i.boundingBox=[c=l[0]*a[0]||0,d=l[1]*a[1]||0,c+(h=l[2]*a[2]||0),d+(_=l[3]*a[3]||0)],i.xStep=h,i.yStep=_),s=e.pdf.unitMatrix,this.pattern.element.hasAttribute("patternContentUnits")&&"objectboundingbox"===this.pattern.element.getAttribute("patternContentUnits").toLowerCase()&&(a||(a=o.getBoundingBox(e)),s=e.pdf.Matrix(a[2],0,0,a[3],0,0),l=i.boundingBox||this.pattern.getBoundingBox(e),i.boundingBox=[c=l[0]/a[0]||0,d=l[1]/a[1]||0,c+(h=l[2]/a[2]||0),d+(_=l[3]/a[3]||0)],i.xStep=h,i.yStep=_),x=e.pdf.unitMatrix,(b=ze(this.pattern.element,e.styleSheets,"patternTransform","transform"))&&(x=Ps(b,e)),T=e.pdf.matrixMult(T=s,r),T=e.pdf.matrixMult(T,x),T=e.pdf.matrixMult(T,e.transform),i.matrix=T,[2,i]}})})},n}();function Gh(n,o,e){var i=e||o.element,a=ze(i,n.styleSheets,"color");if(a){var r=Mc(a,n.attributeState.color);n.attributeState.color=r.ok?r:new Dr("rgb(0,0,0)")}var s=ze(i,n.styleSheets,"visibility");s&&(n.attributeState.visibility=s);var l=ze(i,n.styleSheets,"fill");l&&(n.attributeState.fill=function q1(n,o){var e=Cm.exec(n);if(e){var i=e[1],a=o.refsHandler.get(i);return a&&(a instanceof rf||a instanceof Hh)?function(s,l,c){var d=l.getStops(c.styleSheets);if(0===d.length)return null;if(1===d.length){var h=d[0].color,_=new Dr;return _.ok=!0,_.r=h[0],_.g=h[1],_.b=h[2],_.a=d[0].opacity,new nr(_)}return new eb(s,l)}(i,a,o):a&&a instanceof j1?new nb(i,a):new nr(new Dr("rgb(0, 0, 0)"))}var r=Mc(n,o.attributeState.color);return r.ok?new nr(r):null}(l,n));var c=ze(i,n.styleSheets,"fill-opacity");c&&(n.attributeState.fillOpacity=parseFloat(c));var d=ze(i,n.styleSheets,"stroke-opacity");d&&(n.attributeState.strokeOpacity=parseFloat(d));var h=ze(i,n.styleSheets,"opacity");h&&(n.attributeState.opacity=parseFloat(h));var _=ze(i,n.styleSheets,"stroke-width");void 0!==_&&""!==_&&(n.attributeState.strokeWidth=Math.abs(parseFloat(_)));var x=ze(i,n.styleSheets,"stroke");if(x)if("none"===x)n.attributeState.stroke=null;else{var b=Mc(x,n.attributeState.color);b.ok&&(n.attributeState.stroke=new nr(b))}var T=ze(i,n.styleSheets,"stroke-linecap");T&&(n.attributeState.strokeLinecap=T);var P=ze(i,n.styleSheets,"stroke-linejoin");P&&(n.attributeState.strokeLinejoin=P);var U=ze(i,n.styleSheets,"stroke-dasharray");if(U){var q=parseInt(ze(i,n.styleSheets,"stroke-dashoffset")||"0");n.attributeState.strokeDasharray=da(U),n.attributeState.strokeDashoffset=q}var B=ze(i,n.styleSheets,"stroke-miterlimit");void 0!==B&&""!==B&&(n.attributeState.strokeMiterlimit=parseFloat(B));var W=i.getAttribute("xml:space");W&&(n.attributeState.xmlSpace=W);var G=ze(i,n.styleSheets,"font-weight");G&&(n.attributeState.fontWeight=G);var nt=ze(i,n.styleSheets,"font-style");nt&&(n.attributeState.fontStyle=nt);var Mt,It,Tt,Vt,ie,Wt,At=ze(i,n.styleSheets,"font-family");if(At){var ut=M1().parse(At);n.attributeState.fontFamily=(It=ut,Tt=n,Vt=zh((Mt=n.attributeState).fontStyle,Mt.fontWeight),ie=Tt.pdf.getFontList(),Wt="",It.some(function(oe){var ne=ie[oe];return ne&&ne.indexOf(Vt)>=0?(Wt=oe,!0):(oe=oe.toLowerCase(),!!sl.hasOwnProperty(oe)&&(Wt=oe,!0))})||(Wt="times"),Wt)}var et=ze(i,n.styleSheets,"font-size");if(et){var vt=n.pdf.getFontSize();n.attributeState.fontSize=rl(et,vt)}var Nt=ze(i,n.styleSheets,"vertical-align")||ze(i,n.styleSheets,"alignment-baseline");if(Nt){var ot=Nt.match(/(baseline|text-bottom|alphabetic|ideographic|middle|central|mathematical|text-top|bottom|center|top|hanging)/);ot&&(n.attributeState.alignmentBaseline=ot[0])}var _t=ze(i,n.styleSheets,"text-anchor");_t&&(n.attributeState.textAnchor=_t)}function sf(n,o,e){var i=1,a=1;i*=n.attributeState.fillOpacity,i*=n.attributeState.opacity,n.attributeState.fill instanceof nr&&void 0!==n.attributeState.fill.color.a&&(i*=n.attributeState.fill.color.a),a*=n.attributeState.strokeOpacity,a*=n.attributeState.opacity,n.attributeState.stroke instanceof nr&&void 0!==n.attributeState.stroke.color.a&&(a*=n.attributeState.stroke.color.a);var r,s,l=i<1,c=a<1;if(ql(e,"use")?(l=!0,c=!0,i*=n.attributeState.fill?1:0,a*=n.attributeState.stroke?1:0):n.withinUse&&(n.attributeState.fill!==o.attributeState.fill?(l=!0,i*=n.attributeState.fill?1:0):l&&!n.attributeState.fill&&(i=0),n.attributeState.stroke!==o.attributeState.stroke?(c=!0,a*=n.attributeState.stroke?1:0):c&&!n.attributeState.stroke&&(a=0)),l||c){var d={};l&&(d.opacity=i),c&&(d["stroke-opacity"]=a),n.pdf.setGState(new Do(d))}if(n.attributeState.fill&&n.attributeState.fill!==o.attributeState.fill&&n.attributeState.fill instanceof nr&&n.attributeState.fill.color.ok&&!ql(e,"text")&&n.pdf.setFillColor(n.attributeState.fill.color.r,n.attributeState.fill.color.g,n.attributeState.fill.color.b),n.attributeState.strokeWidth!==o.attributeState.strokeWidth&&n.pdf.setLineWidth(n.attributeState.strokeWidth),n.attributeState.stroke!==o.attributeState.stroke&&n.attributeState.stroke instanceof nr&&n.pdf.setDrawColor(n.attributeState.stroke.color.r,n.attributeState.stroke.color.g,n.attributeState.stroke.color.b),n.attributeState.strokeLinecap!==o.attributeState.strokeLinecap&&n.pdf.setLineCap(n.attributeState.strokeLinecap),n.attributeState.strokeLinejoin!==o.attributeState.strokeLinejoin&&n.pdf.setLineJoin(n.attributeState.strokeLinejoin),n.attributeState.strokeDasharray===o.attributeState.strokeDasharray&&n.attributeState.strokeDashoffset===o.attributeState.strokeDashoffset||!n.attributeState.strokeDasharray||n.pdf.setLineDashPattern(n.attributeState.strokeDasharray,n.attributeState.strokeDashoffset),n.attributeState.strokeMiterlimit!==o.attributeState.strokeMiterlimit&&n.pdf.setLineMiterLimit(n.attributeState.strokeMiterlimit),n.attributeState.fontFamily!==o.attributeState.fontFamily&&(r=sl.hasOwnProperty(n.attributeState.fontFamily)?sl[n.attributeState.fontFamily]:n.attributeState.fontFamily),n.attributeState.fill&&n.attributeState.fill!==o.attributeState.fill&&n.attributeState.fill instanceof nr&&n.attributeState.fill.color.ok){var h=n.attributeState.fill.color;n.pdf.setTextColor(h.r,h.g,h.b)}n.attributeState.fontWeight===o.attributeState.fontWeight&&n.attributeState.fontStyle===o.attributeState.fontStyle||(s=zh(n.attributeState.fontStyle,n.attributeState.fontWeight)),void 0===r&&void 0===s||(void 0===r&&(r=sl.hasOwnProperty(n.attributeState.fontFamily)?sl[n.attributeState.fontFamily]:n.attributeState.fontFamily),n.pdf.setFont(r,s)),n.attributeState.fontSize!==o.attributeState.fontSize&&n.pdf.setFontSize(n.attributeState.fontSize*n.pdf.internal.scaleFactor)}function lf(n,o,e){var i=Cm.exec(n);if(i)return e.refsHandler.get(i[1])||void 0}function cf(n,o,e){return no(this,void 0,void 0,function(){var i,a;return io(this,function(r){switch(r.label){case 0:return i=e.clone(),o.element.hasAttribute("clipPathUnits")&&"objectboundingbox"===o.element.getAttribute("clipPathUnits").toLowerCase()&&(a=n.getBoundingBox(e),i.transform=e.pdf.matrixMult(e.pdf.Matrix(a[2],0,0,a[3],a[0],a[1]),e.transform)),[4,o.apply(i)];case 1:return r.sent(),[2]}})})}var ir=function(n){function o(){return null!==n&&n.apply(this,arguments)||this}return Hi(o,n),o.prototype.render=function(e){return no(this,void 0,void 0,function(){var i,a,r,s;return io(this,function(l){switch(l.label){case 0:return this.isVisible("hidden"!==e.attributeState.visibility,e)?((i=e.clone()).transform=i.pdf.matrixMult(this.computeNodeTransform(i),e.transform),Gh(i,this),a=ze(this.element,i.styleSheets,"clip-path"),(r=a&&"none"!==a)?(s=lf(a,0,i))?s.isVisible(!0,i)?(i.pdf.saveGraphicsState(),[4,cf(this,s,i)]):[3,2]:[3,4]:[3,5]):[2];case 1:return l.sent(),[3,3];case 2:return[2];case 3:return[3,5];case 4:r=!1,l.label=5;case 5:return i.withinClipPath||i.pdf.saveGraphicsState(),sf(i,e,this.element),[4,this.renderCore(i)];case 6:return l.sent(),i.withinClipPath||i.pdf.restoreGraphicsState(),r&&i.pdf.restoreGraphicsState(),[2]}})})},o}(of),jr=function(n){function o(){return null!==n&&n.apply(this,arguments)||this}return Hi(o,n),o}(ir),Tm=function(n){function o(e,i,a){var r=n.call(this,i,a)||this;return r.cachedPath=null,r.hasMarkers=e,r}return Hi(o,n),o.prototype.renderCore=function(e){return no(this,void 0,void 0,function(){var i;return io(this,function(a){switch(a.label){case 0:return null===(i=this.getCachedPath(e))||0===i.segments.length?[2]:(e.withinClipPath?i.transform(e.transform):e.pdf.setCurrentTransformationMatrix(e.transform),i.draw(e),[4,this.fillOrStroke(e)]);case 1:return a.sent(),this.hasMarkers?[4,this.drawMarkers(e,i)]:[3,3];case 2:a.sent(),a.label=3;case 3:return[2]}})})},o.prototype.getCachedPath=function(e){return this.cachedPath||(this.cachedPath=this.getPath(e))},o.prototype.drawMarkers=function(e,i){return no(this,void 0,void 0,function(){return io(this,function(a){switch(a.label){case 0:return[4,this.getMarkers(i,e).draw(e.clone({transform:e.pdf.unitMatrix}))];case 1:return a.sent(),[2]}})})},o.prototype.fillOrStroke=function(e){return no(this,void 0,void 0,function(){var i,a,r,s,l;return io(this,function(c){switch(c.label){case 0:return e.withinClipPath?[2]:(a=e.attributeState.stroke&&0!==e.attributeState.strokeWidth,(i=e.attributeState.fill)?[4,i.getFillData(this,e)]:[3,2]);case 1:return s=c.sent(),[3,3];case 2:s=void 0,c.label=3;case 3:return r=s,l="evenodd"===ze(this.element,e.styleSheets,"fill-rule"),i&&a||e.withinUse?l?e.pdf.fillStrokeEvenOdd(r):e.pdf.fillStroke(r):i?l?e.pdf.fillEvenOdd(r):e.pdf.fill(r):a?e.pdf.stroke():e.pdf.discardPath(),[2]}})})},o.prototype.getBoundingBoxCore=function(e){var i=this.getCachedPath(e);if(!i||!i.segments.length)return[0,0,0,0];for(var a=Number.POSITIVE_INFINITY,r=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,l=Number.NEGATIVE_INFINITY,c=0,d=0,h=0;h<i.segments.length;h++){var _=i.segments[h];(_ instanceof kn||_ instanceof Ec||_ instanceof al)&&(c=_.x,d=_.y),_ instanceof al?(a=Math.min(a,c,_.x1,_.x2,_.x),s=Math.max(s,c,_.x1,_.x2,_.x),r=Math.min(r,d,_.y1,_.y2,_.y),l=Math.max(l,d,_.y1,_.y2,_.y)):(a=Math.min(a,c),s=Math.max(s,c),r=Math.min(r,d),l=Math.max(l,d))}return[a,r,s-a,l-r]},o.prototype.getMarkers=function(e,i){var a=ze(this.element,i.styleSheets,"marker-start"),r=ze(this.element,i.styleSheets,"marker-mid"),s=ze(this.element,i.styleSheets,"marker-end"),l=new tb;if(a||r||s){s&&(s=uf(s)),a&&(a=uf(a)),r&&(r=uf(r));for(var c=e.segments,d=[1,0],h=void 0,_=!1,x=[1,0],b=!1,T=function(U){var q=c[U],B=a&&(1===U||!(c[U]instanceof kn)&&c[U-1]instanceof kn);B&&c.forEach(function(et,vt){if(!b&&et instanceof Tu&&vt>U){var Nt=c[vt-1];b=(Nt instanceof kn||Nt instanceof Ec||Nt instanceof al)&&Nt}});var W=s&&(U===c.length-1||!(c[U]instanceof kn)&&c[U+1]instanceof kn),G=r&&U>0&&!(1===U&&c[U-1]instanceof kn),nt=c[U-1]||null;if(nt instanceof kn||nt instanceof Ec||nt instanceof al)if(q instanceof al)B&&l.addMarker(new Ls(a,[nt.x,nt.y],ef(b?[b.x,b.y]:[nt.x,nt.y],[q.x1,q.y1]))),W&&l.addMarker(new Ls(s,[q.x,q.y],ef([q.x2,q.y2],[q.x,q.y]))),G&&(h=Cu([nt.x,nt.y],[q.x1,q.y1]),h=nt instanceof kn?h:wu(_d(d,h)),l.addMarker(new Ls(r,[nt.x,nt.y],Math.atan2(h[1],h[0])))),d=Cu([q.x2,q.y2],[q.x,q.y]);else if(q instanceof kn||q instanceof Ec){if(h=Cu([nt.x,nt.y],[q.x,q.y]),B){var At=b?Cu([b.x,b.y],[q.x,q.y]):h;l.addMarker(new Ls(a,[nt.x,nt.y],Math.atan2(At[1],At[0])))}W&&l.addMarker(new Ls(s,[q.x,q.y],Math.atan2(h[1],h[0]))),G&&(At=q instanceof kn?d:nt instanceof kn?h:wu(_d(d,h)),l.addMarker(new Ls(r,[nt.x,nt.y],Math.atan2(At[1],At[0])))),d=h}else q instanceof Tu&&(h=Cu([nt.x,nt.y],[_.x,_.y]),G&&(At=nt instanceof kn?h:wu(_d(d,h)),l.addMarker(new Ls(r,[nt.x,nt.y],Math.atan2(At[1],At[0])))),W&&(At=wu(_d(h,x)),l.addMarker(new Ls(s,[_.x,_.y],Math.atan2(At[1],At[0])))),d=h);else{_=q instanceof kn&&q;var ut=c[U+1];(ut instanceof kn||ut instanceof Ec||ut instanceof al)&&(x=Cu([_.x,_.y],[ut.x,ut.y]))}},P=0;P<c.length;P++)T(P)}return l},o}(jr);function uf(n){var o=Cm.exec(n);return o&&o[1]||void 0}var $h=function(n){function o(e,i){return n.call(this,!0,e,i)||this}return Hi(o,n),o.prototype.getPath=function(e){if(e.withinClipPath||null===e.attributeState.stroke)return null;var i=parseFloat(this.element.getAttribute("x1")||"0"),a=parseFloat(this.element.getAttribute("y1")||"0"),r=parseFloat(this.element.getAttribute("x2")||"0"),s=parseFloat(this.element.getAttribute("y2")||"0");return i||r||a||s?(new Oc).moveTo(i,a).lineTo(r,s):null},o.prototype.computeNodeTransformCore=function(e){return e.pdf.unitMatrix},o.prototype.isVisible=function(e,i){return Fl(this,e,i)},o.prototype.fillOrStroke=function(e){return no(this,void 0,void 0,function(){return io(this,function(i){switch(i.label){case 0:return e.attributeState.fill=null,[4,n.prototype.fillOrStroke.call(this,e)];case 1:return i.sent(),[2]}})})},o}(Tm),Au=function(n){function o(){return null!==n&&n.apply(this,arguments)||this}return Hi(o,n),o.prototype.apply=function(e){return no(this,void 0,void 0,function(){var i,a,r,s,l;return io(this,function(c){switch(c.label){case 0:return this.isVisible("hidden"!==e.attributeState.visibility,e)?((i=e.clone()).transform=i.pdf.unitMatrix,Gh(i,this),(a=ze(this.element,i.styleSheets,"clip-path"))&&"none"!==a&&(r=lf(a,0,i))?r.isVisible(!0,i)?[4,cf(this,r,i)]:[3,2]:[3,3]):[2];case 1:return c.sent(),[3,3];case 2:return[2];case 3:sf(i,e,this.element),s=0,l=this.children,c.label=4;case 4:return s<l.length?[4,l[s].render(i)]:[3,7];case 5:c.sent(),c.label=6;case 6:return s++,[3,4];case 7:return[2]}})})},o.prototype.getBoundingBoxCore=function(e){return Jh(e,this)},o.prototype.isVisible=function(e,i){return ua(this,e,i)},o.prototype.computeNodeTransformCore=function(e){var i=parseFloat(ze(this.element,e.styleSheets,"x")||"0"),a=parseFloat(ze(this.element,e.styleSheets,"y")||"0"),r=this.element.getAttribute("viewBox");if(r){var s=da(r),l=parseFloat(ze(this.element,e.styleSheets,"width")||ze(this.element.ownerSVGElement,e.styleSheets,"width")||r[2]),c=parseFloat(ze(this.element,e.styleSheets,"height")||ze(this.element.ownerSVGElement,e.styleSheets,"height")||r[3]);return gd(this.element,s,i,a,l,c,e)}return e.pdf.Matrix(1,0,0,1,i,a)},o}(as),km=function(n,o){this.width=n,this.height=o},F1=function(n){function o(){return null!==n&&n.apply(this,arguments)||this}return Hi(o,n),o.prototype.renderCore=function(e){return no(this,void 0,void 0,function(){var i,a,r,s,l,c,d,h,_,x,b,T,P;return io(this,function(U){switch(U.label){case 0:return i=parseFloat,(a=this.element.getAttribute("href")||this.element.getAttribute("xlink:href"))?(r=a.substring(1),s=e.refsHandler.get(r),l=ql(s.element,"symbol,svg")&&s.element.hasAttribute("viewBox"),c=i(ze(this.element,e.styleSheets,"x")||"0"),d=i(ze(this.element,e.styleSheets,"y")||"0"),h=void 0,_=void 0,l?(h=i(ze(this.element,e.styleSheets,"width")||ze(s.element,e.styleSheets,"width")||"0"),_=i(ze(this.element,e.styleSheets,"height")||ze(s.element,e.styleSheets,"height")||"0"),c+=i(ze(s.element,e.styleSheets,"x")||"0"),d+=i(ze(s.element,e.styleSheets,"y")||"0"),b=da(s.element.getAttribute("viewBox")),x=gd(s.element,b,c,d,h,_,e)):x=e.pdf.Matrix(1,0,0,1,c,d),T=new jl(e.pdf,{refsHandler:e.refsHandler,styleSheets:e.styleSheets,withinUse:!0,viewport:l?new km(h,_):e.viewport,svg2pdfParameters:e.svg2pdfParameters,textMeasure:e.textMeasure}),[4,e.refsHandler.getRendered(r,P=e.attributeState.color,function(q){return o.renderReferencedNode(q,r,P,T)})]):[2];case 1:return U.sent(),e.pdf.saveGraphicsState(),e.pdf.setCurrentTransformationMatrix(e.transform),l&&"visible"!==ze(s.element,e.styleSheets,"overflow")&&(e.pdf.rect(c,d,h,_),e.pdf.clip().discardPath()),e.pdf.doFormObject(e.refsHandler.generateKey(r,P),x),e.pdf.restoreGraphicsState(),[2]}})})},o.renderReferencedNode=function(e,i,a,r){return no(this,void 0,void 0,function(){var s;return io(this,function(l){switch(l.label){case 0:return s=[(s=e.getBoundingBox(r))[0]-.5*s[2],s[1]-.5*s[3],2*s[2],2*s[3]],r.attributeState.color=a,r.pdf.beginFormObject(s[0],s[1],s[2],s[3],r.pdf.unitMatrix),e instanceof Au?[4,e.apply(r)]:[3,2];case 1:return l.sent(),[3,4];case 2:return[4,e.render(r)];case 3:l.sent(),l.label=4;case 4:return r.pdf.endFormObject(r.refsHandler.generateKey(i,a)),[2]}})})},o.prototype.getBoundingBoxCore=function(e){return ku(this.element,e)},o.prototype.isVisible=function(e,i){return Fl(this,e,i)},o.prototype.computeNodeTransformCore=function(e){return e.pdf.unitMatrix},o}(jr),ib=function(n){function o(e,i){return n.call(this,!1,e,i)||this}return Hi(o,n),o.prototype.getPath=function(e){var i=parseFloat(ze(this.element,e.styleSheets,"width")||"0"),a=parseFloat(ze(this.element,e.styleSheets,"height")||"0");if(!isFinite(i)||i<=0||!isFinite(a)||a<=0)return null;var r=ze(this.element,e.styleSheets,"rx"),s=ze(this.element,e.styleSheets,"ry"),l=Math.min(parseFloat(r||s||"0"),.5*i),c=Math.min(parseFloat(s||r||"0"),.5*a),d=parseFloat(ze(this.element,e.styleSheets,"x")||"0"),h=parseFloat(ze(this.element,e.styleSheets,"y")||"0"),_=4/3*(Math.SQRT2-1);return 0===l&&0===c?(new Oc).moveTo(d,h).lineTo(d+i,h).lineTo(d+i,h+a).lineTo(d,h+a).close():(new Oc).moveTo(d+=l,h).lineTo(d+=i-2*l,h).curveTo(d+l*_,h,d+l,h+(c-c*_),d+=l,h+=c).lineTo(d,h+=a-2*c).curveTo(d,h+c*_,d-l*_,h+c,d-=l,h+=c).lineTo(d+=2*l-i,h).curveTo(d-l*_,h,d-l,h-c*_,d-=l,h-=c).lineTo(d,h+=2*c-a).curveTo(d,h-c*_,d+l*_,h-c,d+=l,h-=c).close()},o.prototype.computeNodeTransformCore=function(e){return e.pdf.unitMatrix},o.prototype.isVisible=function(e,i){return Fl(this,e,i)},o}(Tm),df=function(n){function o(e,i){return n.call(this,!1,e,i)||this}return Hi(o,n),o.prototype.getPath=function(e){var i=this.getRx(e),a=this.getRy(e);if(!isFinite(i)||a<=0||!isFinite(a)||a<=0)return null;var r=parseFloat(ze(this.element,e.styleSheets,"cx")||"0"),s=parseFloat(ze(this.element,e.styleSheets,"cy")||"0"),l=4/3*(Math.SQRT2-1)*i,c=4/3*(Math.SQRT2-1)*a;return(new Oc).moveTo(r+i,s).curveTo(r+i,s-c,r+l,s-a,r,s-a).curveTo(r-l,s-a,r-i,s-c,r-i,s).curveTo(r-i,s+c,r-l,s+a,r,s+a).curveTo(r+l,s+a,r+i,s+c,r+i,s)},o.prototype.computeNodeTransformCore=function(e){return e.pdf.unitMatrix},o.prototype.isVisible=function(e,i){return Fl(this,e,i)},o}(Tm),xd=function(n){function o(e,i){return n.call(this,e,i)||this}return Hi(o,n),o.prototype.getRx=function(e){return parseFloat(ze(this.element,e.styleSheets,"rx")||"0")},o.prototype.getRy=function(e){return parseFloat(ze(this.element,e.styleSheets,"ry")||"0")},o}(df);function bd(n){var o="invisible",e=n.stroke&&0!==n.strokeWidth,i=n.fill;return i&&e?o="fillThenStroke":i?o="fill":e&&(o="stroke"),o}function Q1(n){return n.replace(/[\n\r]/g,"")}function mf(n){return n.replace(/[\t]/g," ")}function hf(n){return n.replace(/ +/g," ")}function Am(n,o,e){switch(ze(n,e.styleSheets,"text-transform")){case"uppercase":return o.toUpperCase();case"lowercase":return o.toLowerCase();default:return o}}var Yh=function(){function n(o,e,i,a){this.textNode=o,this.texts=[],this.textNodes=[],this.contexts=[],this.textAnchor=e,this.originX=i,this.originY=a,this.textMeasures=[]}return n.prototype.setX=function(o){this.originX=o},n.prototype.setY=function(o){this.originY=o},n.prototype.add=function(o,e,i){this.texts.push(e),this.textNodes.push(o),this.contexts.push(i)},n.prototype.rightTrimText=function(){for(var o=this.texts.length-1;o>=0;o--)if("default"===this.contexts[o].attributeState.xmlSpace&&(this.texts[o]=this.texts[o].replace(/\s+$/,"")),this.texts[o].match(/[^\s]/))return!1;return!0},n.prototype.measureText=function(o){for(var e=0;e<this.texts.length;e++)this.textMeasures.push({width:o.textMeasure.measureTextWidth(this.texts[e],this.contexts[e].attributeState),length:this.texts[e].length})},n.prototype.put=function(o,e){var i,a,r,s,l=[],c=[],d=[],h=this.originX,_=this.originY,x=h,b=h;for(i=0;i<this.textNodes.length;i++){a=this.textNodes[i],r=this.contexts[i],s=this.textMeasures[i]||{width:o.textMeasure.measureTextWidth(this.texts[i],this.contexts[i].attributeState),length:this.texts[i].length};var T=h,P=_;if("#text"!==a.nodeName&&!l.includes(a)){l.push(a);var U=n.resolveRelativePositionAttribute(a,"dx");null!==U&&(T+=rl(U,r.attributeState.fontSize));var q=n.resolveRelativePositionAttribute(a,"dy");null!==q&&(P+=rl(q,r.attributeState.fontSize))}c[i]=T,d[i]=P,h=T+s.width+s.length*e,_=P,x=Math.min(x,T),b=Math.max(b,h)}var B=0;switch(this.textAnchor){case"start":B=0;break;case"middle":B=(b-x)/2;break;case"end":B=b-x}for(i=0;i<this.textNodes.length;i++)if(r=this.contexts[i],"#text"===(a=this.textNodes[i]).nodeName||"hidden"!==r.attributeState.visibility){o.pdf.saveGraphicsState(),sf(r,o,a);var W=r.attributeState.alignmentBaseline,G=bd(r.attributeState);o.pdf.text(this.texts[i],c[i]-B,d[i],{baseline:xr(W),angle:o.transform,renderingMode:"fill"===G?void 0:G,charSpace:0===e?void 0:e}),o.pdf.restoreGraphicsState()}return[h,_]},n.resolveRelativePositionAttribute=function(o,e){for(var i,a=o;a&&ql(a,"tspan");){if(a.hasAttribute(e))return a.getAttribute(e);if((null===(i=o.parentElement)||void 0===i?void 0:i.firstChild)!==o)break;a=a.parentElement}return null},n}(),Kh=function(n){function o(){return null!==n&&n.apply(this,arguments)||this}return Hi(o,n),o.prototype.processTSpans=function(e,i,a,r,s,l){for(var c=a.pdf.getFontSize(),d=a.attributeState.xmlSpace,h=!0,_=!1,x=0;x<i.childNodes.length;x++){var b=i.childNodes[x];if(b.textContent){var T=b.textContent;if("#text"===b.nodeName){var P=Q1(T);P=mf(P),"default"===d&&(P=hf(P),h&&P.match(/^\s/)&&(_=!0),P.match(/[^\s]/)&&(h=!1),l.prevText.match(/\s$/)&&(P=P.replace(/^\s+/,"")));var U=Am(i,P,a);s.add(i,U,a),l.prevText=T,l.prevContext=a}else if(!ql(b,"title")&&ql(b,"tspan")){var q=b,B=q.getAttribute("x");if(null!==B){var W=rl(B,c);s=new Yh(this,ze(q,a.styleSheets,"text-anchor")||a.attributeState.textAnchor,W,0),r.push({type:"y",chunk:s})}var G=q.getAttribute("y");if(null!==G){var nt=rl(G,c);s=new Yh(this,ze(q,a.styleSheets,"text-anchor")||a.attributeState.textAnchor,0,nt),r.push({type:"x",chunk:s})}var At=a.clone();Gh(At,e,q),this.processTSpans(e,q,At,r,s,l)}}}return _},o.prototype.renderCore=function(e){return no(this,void 0,void 0,function(){var i,a,r,s,l,c,d,h,_,x,b,P,U,q,B,W,G,nt,At,ut,et,vt;return io(this,function(Nt){if(e.pdf.saveGraphicsState(),i=0,a=0,r=1,s=e.pdf.getFontSize(),l=rl(this.element.getAttribute("x"),s),c=rl(this.element.getAttribute("y"),s),d=rl(this.element.getAttribute("dx"),s),h=rl(this.element.getAttribute("dy"),s),_=parseFloat(this.element.getAttribute("textLength")||"0"),x=e.attributeState.visibility,0===this.element.childElementCount)_t=e.attributeState,ot=mf(ot=Q1(ot=b=this.element.textContent||"")),"default"===_t.xmlSpace&&(ot=hf(ot=ot.trim())),P=Am(this.element,ot,e),i=e.textMeasure.getTextOffset(P,e.attributeState),_>0&&(U=e.textMeasure.measureTextWidth(P,e.attributeState),"default"===e.attributeState.xmlSpace&&b.match(/^\s/)&&(r=0),a=(_-U)/(P.length-r)||0),"visible"===x&&(q=e.attributeState.alignmentBaseline,B=bd(e.attributeState),e.pdf.text(P,l+d-i,c+h,{baseline:xr(q),angle:e.transform,renderingMode:"fill"===B?void 0:B,charSpace:0===a?void 0:a}));else{for(W=[],G=new Yh(this,e.attributeState.textAnchor,l+d,c+h),W.push({type:"",chunk:G}),nt=this.processTSpans(this,this.element,e,W,G,{prevText:" ",prevContext:e}),r=nt?0:1,At=!0,ut=W.length-1;ut>=0;ut--)At&&(At=W[ut].chunk.rightTrimText());_>0&&(et=0,vt=0,W.forEach(function(ot){var _t=ot.chunk;_t.measureText(e),_t.textMeasures.forEach(function(Mt){et+=Mt.width,vt+=Mt.length})}),a=(_-et)/(vt-r)),W.reduce(function(ot,_t){var Mt=_t.type,It=_t.chunk;return"x"===Mt?It.setX(ot[0]):"y"===Mt&&It.setY(ot[1]),It.put(e,a)},[0,0])}var ot,_t;return e.pdf.restoreGraphicsState(),[2]})})},o.prototype.isVisible=function(e,i){return ua(this,e,i)},o.prototype.getBoundingBoxCore=function(e){return ku(this.element,e)},o.prototype.computeNodeTransformCore=function(e){return e.pdf.unitMatrix},o}(jr),pf=function(n){function o(e,i){return n.call(this,!0,e,i)||this}return Hi(o,n),o.prototype.computeNodeTransformCore=function(e){return e.pdf.unitMatrix},o.prototype.isVisible=function(e,i){return Fl(this,e,i)},o.prototype.getPath=function(e){var i,a,r=new(X2())(ze(this.element,e.styleSheets,"d")||"").unshort().unarc().abs(),s=new Oc;return r.iterate(function(l){switch(l[0]){case"M":s.moveTo(l[1],l[2]);break;case"L":s.lineTo(l[1],l[2]);break;case"H":s.lineTo(l[1],a);break;case"V":s.lineTo(i,l[1]);break;case"C":s.curveTo(l[1],l[2],l[3],l[4],l[5],l[6]);break;case"Q":var c=N1([i,a],[l[1],l[2]]),d=N1([l[3],l[4]],[l[1],l[2]]);s.curveTo(c[0],c[1],d[0],d[1],l[3],l[4]);break;case"Z":s.close()}switch(l[0]){case"M":case"L":i=l[1],a=l[2];break;case"H":i=l[1];break;case"V":a=l[1];break;case"C":i=l[5],a=l[6];break;case"Q":i=l[3],a=l[4]}}),s},o}(Tm),Wh=/^\s*data:(([^/,;]+\/[^/,;]+)(?:;([^,;=]+=[^,;=]+))?)?(?:;(base64))?,((?:.|\s)*)$/i,ob=function(n){function o(e,i){var a=n.call(this,e,i)||this;return a.imageLoadingPromise=null,a.imageUrl=a.element.getAttribute("xlink:href")||a.element.getAttribute("href"),a.imageUrl&&(a.imageLoadingPromise=o.fetchImageData(a.imageUrl)),a}return Hi(o,n),o.prototype.renderCore=function(e){return no(this,void 0,void 0,function(){var i,a,r,s,l,c,d,h,_,x,b,T;return io(this,function(P){switch(P.label){case 0:return this.imageLoadingPromise?(e.pdf.setCurrentTransformationMatrix(e.transform),i=parseFloat(ze(this.element,e.styleSheets,"width")||"0"),a=parseFloat(ze(this.element,e.styleSheets,"height")||"0"),r=parseFloat(ze(this.element,e.styleSheets,"x")||"0"),s=parseFloat(ze(this.element,e.styleSheets,"y")||"0"),!isFinite(i)||i<=0||!isFinite(a)||a<=0?[2]:[4,this.imageLoadingPromise]):[2];case 1:return l=P.sent(),c=l.data,0!==(d=l.format).indexOf("svg")?[3,3]:(h=new DOMParser,_=h.parseFromString(c,"image/svg+xml").firstElementChild,(!(x=this.element.getAttribute("preserveAspectRatio"))||x.indexOf("defer")<0||!_.getAttribute("preserveAspectRatio"))&&_.setAttribute("preserveAspectRatio",x||""),_.setAttribute("x",String(r)),_.setAttribute("y",String(s)),_.setAttribute("width",String(i)),_.setAttribute("height",String(a)),[4,Xh(_,b={}).render(new jl(e.pdf,{refsHandler:new P1(b),styleSheets:e.styleSheets,viewport:new km(i,a),svg2pdfParameters:e.svg2pdfParameters,textMeasure:e.textMeasure}))]);case 2:return P.sent(),[2];case 3:T="data:image/"+d+";base64,"+btoa(c);try{e.pdf.addImage(T,"",r,s,i,a)}catch(U){"object"==typeof console&&console.warn&&console.warn("Could not load image "+this.imageUrl+". \n"+U)}P.label=4;case 4:return[2]}})})},o.prototype.getBoundingBoxCore=function(e){return ku(this.element,e)},o.prototype.computeNodeTransformCore=function(e){return e.pdf.unitMatrix},o.prototype.isVisible=function(e,i){return Fl(this,e,i)},o.fetchImageData=function(e){return no(this,void 0,void 0,function(){var i,a,r,l;return io(this,function(c){switch(c.label){case 0:if(!(r=e.match(Wh)))return[3,1];if("image"!==(l=r[2].split("/"))[0])throw new Error("Unsupported image URL: "+e);return a=l[1],i=r[5],"base64"===r[4]?(i=i.replace(/\s/g,""),i=atob(i)):i=decodeURIComponent(i),[3,3];case 1:return[4,o.fetchImage(e)];case 2:i=c.sent(),a=e.substring(e.lastIndexOf(".")+1),c.label=3;case 3:return[2,{data:i,format:a}]}})})},o.fetchImage=function(e){return new Promise(function(i,a){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(){if(200!==r.status)throw new Error("Error "+r.status+": Failed to load image '"+e+"'");for(var s=new Uint8Array(r.response),l="",c=0;c<s.length;c++)l+=String.fromCharCode(s[c]);i(l)},r.onerror=a,r.onabort=a,r.send(null)})},o.getMimeType=function(e){switch(e=e.toLowerCase()){case"jpg":case"jpeg":return"image/jpeg";default:return"image/"+e}},o}(jr),_f=function(n){function o(e,i,a){var r=n.call(this,!0,i,a)||this;return r.closed=e,r}return Hi(o,n),o.prototype.getPath=function(e){if(!this.element.hasAttribute("points")||""===this.element.getAttribute("points"))return null;var i=o.parsePointsString(this.element.getAttribute("points")),a=new Oc;if(i.length<1)return a;a.moveTo(i[0][0],i[0][1]);for(var r=1;r<i.length;r++)a.lineTo(i[r][0],i[r][1]);return this.closed&&a.close(),a},o.prototype.isVisible=function(e,i){return Fl(this,e,i)},o.prototype.computeNodeTransformCore=function(e){return e.pdf.unitMatrix},o.parsePointsString=function(e){for(var i=da(e),a=[],r=0;r<i.length-1;r+=2)a.push([i[r],i[r+1]]);return a},o}(Tm),Vh=function(n){function o(e,i){return n.call(this,!0,e,i)||this}return Hi(o,n),o}(_f),R1=function(n){function o(){return null!==n&&n.apply(this,arguments)||this}return Hi(o,n),o.prototype.render=function(e){return Promise.resolve()},o.prototype.getBoundingBoxCore=function(e){return[0,0,0,0]},o.prototype.computeNodeTransformCore=function(e){return e.pdf.unitMatrix},o.prototype.isVisible=function(e,i){return Fl(this,e,i)},o}(of),ff=function(n){function o(){return null!==n&&n.apply(this,arguments)||this}return Hi(o,n),o.prototype.apply=function(e){return no(this,void 0,void 0,function(){var i,a,r,s,l;return io(this,function(c){switch(c.label){case 0:i=this.computeNodeTransform(e),a=this.getBoundingBox(e),e.pdf.beginFormObject(a[0],a[1],a[2],a[3],i),function(d){var h=d.attributeState,_=d.pdf,x=1,b=1;x*=h.fillOpacity,x*=h.opacity,h.fill instanceof nr&&void 0!==h.fill.color.a&&(x*=h.fill.color.a),b*=h.strokeOpacity,b*=h.opacity,h.stroke instanceof nr&&void 0!==h.stroke.color.a&&(b*=h.stroke.color.a);var T,P={};if(P.opacity=x,P["stroke-opacity"]=b,_.setGState(new Do(P)),h.fill&&h.fill instanceof nr&&h.fill.color.ok?_.setFillColor(h.fill.color.r,h.fill.color.g,h.fill.color.b):_.setFillColor(0,0,0),_.setLineWidth(h.strokeWidth),h.stroke instanceof nr?_.setDrawColor(h.stroke.color.r,h.stroke.color.g,h.stroke.color.b):_.setDrawColor(0,0,0),_.setLineCap(h.strokeLinecap),_.setLineJoin(h.strokeLinejoin),h.strokeDasharray?_.setLineDashPattern(h.strokeDasharray,h.strokeDashoffset):_.setLineDashPattern([],0),_.setLineMiterLimit(h.strokeMiterlimit),T=sl.hasOwnProperty(h.fontFamily)?sl[h.fontFamily]:h.fontFamily,h.fill&&h.fill instanceof nr&&h.fill.color.ok){var U=h.fill.color;_.setTextColor(U.r,U.g,U.b)}else _.setTextColor(0,0,0);var q="";"bold"===h.fontWeight&&(q="bold"),"italic"===h.fontStyle&&(q+="italic"),""===q&&(q="normal"),void 0!==T||void 0!==q?(void 0===T&&(T=sl.hasOwnProperty(h.fontFamily)?sl[h.fontFamily]:h.fontFamily),_.setFont(T,q)):_.setFont("helvetica",q),_.setFontSize(h.fontSize*_.internal.scaleFactor)}(r=new jl(e.pdf,{refsHandler:e.refsHandler,styleSheets:e.styleSheets,viewport:e.viewport,svg2pdfParameters:e.svg2pdfParameters,textMeasure:e.textMeasure})),s=0,l=this.children,c.label=1;case 1:return s<l.length?[4,l[s].render(r)]:[3,4];case 2:c.sent(),c.label=3;case 3:return s++,[3,1];case 4:return e.pdf.endFormObject(this.element.getAttribute("id")),[2]}})})},o.prototype.getBoundingBoxCore=function(e){var i,a=this.element.getAttribute("viewBox");return a&&(i=da(a)),[i&&i[0]||0,i&&i[1]||0,i&&i[2]||parseFloat(this.element.getAttribute("markerWidth")||"3"),i&&i[3]||parseFloat(this.element.getAttribute("markerHeight")||"3")]},o.prototype.computeNodeTransformCore=function(e){var i,a=parseFloat(this.element.getAttribute("refX")||"0"),r=parseFloat(this.element.getAttribute("refY")||"0"),s=this.element.getAttribute("viewBox");if(s){var l=da(s);i=gd(this.element,l,0,0,parseFloat(this.element.getAttribute("markerWidth")||"3"),parseFloat(this.element.getAttribute("markerHeight")||"3"),e,!0),i=e.pdf.matrixMult(e.pdf.Matrix(1,0,0,1,-a,-r),i)}else i=e.pdf.Matrix(1,0,0,1,-a,-r);return i},o.prototype.isVisible=function(e,i){return ua(this,e,i)},o}(as),ab=function(n){function o(e,i){return n.call(this,e,i)||this}return Hi(o,n),o.prototype.getR=function(e){var i;return null!==(i=this.r)&&void 0!==i?i:this.r=parseFloat(ze(this.element,e.styleSheets,"r")||"0")},o.prototype.getRx=function(e){return this.getR(e)},o.prototype.getRy=function(e){return this.getR(e)},o}(df),U1=function(n){function o(e,i){return n.call(this,!1,e,i)||this}return Hi(o,n),o}(_f),ll=function(n){function o(){return null!==n&&n.apply(this,arguments)||this}return Hi(o,n),o.prototype.renderCore=function(e){return no(this,void 0,void 0,function(){var i,a;return io(this,function(r){switch(r.label){case 0:i=0,a=this.children,r.label=1;case 1:return i<a.length?[4,a[i].render(e)]:[3,4];case 2:r.sent(),r.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},o.prototype.getBoundingBoxCore=function(e){return Jh(e,this)},o}(ir),B1=function(n){function o(){return null!==n&&n.apply(this,arguments)||this}return Hi(o,n),o.prototype.isVisible=function(e,i){return ua(this,e,i)},o.prototype.render=function(e){return no(this,void 0,void 0,function(){var i,a,r,s,l;return io(this,function(c){switch(c.label){case 0:return this.isVisible("hidden"!==e.attributeState.visibility,e)?(i=this.getX(e),a=this.getY(e),r=this.getWidth(e),s=this.getHeight(e),e.pdf.saveGraphicsState(),l=e.transform,this.element.hasAttribute("transform")&&(l=e.pdf.matrixMult(Ps(this.element.getAttribute("transform"),e),l)),e.pdf.setCurrentTransformationMatrix(l),e.withinUse||"visible"===ze(this.element,e.styleSheets,"overflow")||e.pdf.rect(i,a,r,s).clip().discardPath(),[4,n.prototype.render.call(this,e.clone({transform:e.pdf.unitMatrix,viewport:e.withinUse?e.viewport:new km(r,s)}))]):[2];case 1:return c.sent(),e.pdf.restoreGraphicsState(),[2]}})})},o.prototype.computeNodeTransform=function(e){return this.computeNodeTransformCore(e)},o.prototype.computeNodeTransformCore=function(e){if(e.withinUse)return e.pdf.unitMatrix;var i,a=this.getX(e),r=this.getY(e),s=this.getViewBox();if(s){var l=this.getWidth(e),c=this.getHeight(e);i=gd(this.element,s,a,r,l,c,e)}else i=e.pdf.Matrix(1,0,0,1,a,r);return i},o.prototype.getWidth=function(e){if(void 0!==this.width)return this.width;var i,a,r=e.svg2pdfParameters;if(this.isOutermostSvg(e))if(null!=r.width)i=r.width;else if(a=ze(this.element,e.styleSheets,"width"))i=parseFloat(a);else{var s=this.getViewBox();if(s&&(null!=r.height||ze(this.element,e.styleSheets,"height"))){var l=s[2]/s[3];i=this.getHeight(e)*l}else i=Math.min(300,e.viewport.width,2*e.viewport.height)}else i=(a=ze(this.element,e.styleSheets,"width"))?parseFloat(a):e.viewport.width;return this.width=i},o.prototype.getHeight=function(e){if(void 0!==this.height)return this.height;var i,a,r=e.svg2pdfParameters;if(this.isOutermostSvg(e))if(null!=r.height)i=r.height;else if(a=ze(this.element,e.styleSheets,"height"))i=parseFloat(a);else{var s=this.getViewBox();if(s){var l=s[2]/s[3];i=this.getWidth(e)/l}else i=Math.min(150,e.viewport.width/2,e.viewport.height)}else i=(a=ze(this.element,e.styleSheets,"height"))?parseFloat(a):e.viewport.height;return this.height=i},o.prototype.getX=function(e){if(void 0!==this.x)return this.x;if(this.isOutermostSvg(e))return this.x=0;var i=ze(this.element,e.styleSheets,"x");return this.x=i?parseFloat(i):0},o.prototype.getY=function(e){if(void 0!==this.y)return this.y;if(this.isOutermostSvg(e))return this.y=0;var i=ze(this.element,e.styleSheets,"y");return this.y=i?parseFloat(i):0},o.prototype.getViewBox=function(){if(void 0!==this.viewBox)return this.viewBox;var e=this.element.getAttribute("viewBox");return this.viewBox=e?da(e):void 0},o.prototype.isOutermostSvg=function(e){return e.svg2pdfParameters.element===this.element},o}(ll),z1=function(n){function o(){return null!==n&&n.apply(this,arguments)||this}return Hi(o,n),o.prototype.isVisible=function(e,i){return ua(this,e,i)},o.prototype.computeNodeTransformCore=function(e){return e.pdf.unitMatrix},o}(ll),rb=function(n){function o(){return null!==n&&n.apply(this,arguments)||this}return Hi(o,n),o.prototype.apply=function(e){return no(this,void 0,void 0,function(){var i,a,r;return io(this,function(s){switch(s.label){case 0:if(!this.isVisible(!0,e))return[2];i=e.pdf.matrixMult(this.computeNodeTransform(e),e.transform),e.pdf.setCurrentTransformationMatrix(i),a=0,r=this.children,s.label=1;case 1:return a<r.length?[4,r[a].render(new jl(e.pdf,{refsHandler:e.refsHandler,styleSheets:e.styleSheets,viewport:e.viewport,withinClipPath:!0,svg2pdfParameters:e.svg2pdfParameters,textMeasure:e.textMeasure}))]:[3,4];case 2:s.sent(),s.label=3;case 3:return a++,[3,1];case 4:return e.pdf.clip().discardPath(),e.pdf.setCurrentTransformationMatrix(i.inversed()),[2]}})})},o.prototype.getBoundingBoxCore=function(e){return Jh(e,this)},o.prototype.isVisible=function(e,i){return ua(this,e,i)},o}(as);function Xh(n,o){var e,i=[];switch(function(r,s){for(var l=[],c=0;c<r.childNodes.length;c++){var d=r.childNodes[c];"#"!==d.nodeName.charAt(0)&&l.push(d)}for(c=0;c<l.length;c++)s(0,l[c])}(n,function(r,s){return i.push(Xh(s,o))}),n.tagName.toLowerCase()){case"a":case"g":e=new z1(n,i);break;case"circle":e=new ab(n,i);break;case"clippath":e=new rb(n,i);break;case"ellipse":e=new xd(n,i);break;case"lineargradient":e=new rf(n,i);break;case"image":e=new ob(n,i);break;case"line":e=new $h(n,i);break;case"marker":e=new ff(n,i);break;case"path":e=new pf(n,i);break;case"pattern":e=new j1(n,i);break;case"polygon":e=new Vh(n,i);break;case"polyline":e=new U1(n,i);break;case"radialgradient":e=new Hh(n,i);break;case"rect":e=new ib(n,i);break;case"svg":e=new B1(n,i);break;case"symbol":e=new Au(n,i);break;case"text":e=new Kh(n,i);break;case"use":e=new F1(n,i);break;default:e=new R1(n,i)}if(null!=o&&e.element.hasAttribute("id")){var a=E1()(e.element.id,{isIdentifier:!0});o[a]=o[a]||e}return e.children.forEach(function(r){return r.setParent(e)}),e}var sb=function(){function n(o,e){this.rootSvg=o,this.loadExternalSheets=e,this.styleSheets=[]}return n.prototype.load=function(){return no(this,void 0,void 0,function(){var o;return io(this,function(e){switch(e.label){case 0:return[4,this.collectStyleSheetTexts()];case 1:return o=e.sent(),this.parseCssSheets(o),[2]}})})},n.prototype.collectStyleSheetTexts=function(){return no(this,void 0,void 0,function(){var o,e,i,a,r;return io(this,function(s){switch(s.label){case 0:if(o=[],this.loadExternalSheets&&this.rootSvg.ownerDocument)for(a=0;a<this.rootSvg.ownerDocument.childNodes.length;a++)"xml-stylesheet"===(e=this.rootSvg.ownerDocument.childNodes[a]).nodeName&&"string"==typeof e.data&&o.push(n.loadSheet(e.data.match(/href=["'].*?["']/)[0].split("=")[1].slice(1,-1)));for(i=this.rootSvg.querySelectorAll("style,link"),a=0;a<i.length;a++)ql(r=i[a],"style")?o.push(r.textContent):this.loadExternalSheets&&ql(r,"link")&&"stylesheet"===r.getAttribute("rel")&&r.hasAttribute("href")&&o.push(n.loadSheet(r.getAttribute("href")));return[4,Promise.all(o)];case 1:return[2,s.sent().filter(function(l){return null!==l})]}})})},n.prototype.parseCssSheets=function(o){for(var e=document.implementation.createHTMLDocument(""),i=0,a=o;i<a.length;i++){var r=a[i],s=e.createElement("style");s.textContent=r,e.body.appendChild(s);var l=s.sheet;if(l instanceof CSSStyleSheet){for(var c=l.cssRules.length-1;c>=0;c--){var d=l.cssRules[c];if(d instanceof CSSStyleRule){var h=d;if(h.selectorText.indexOf(",")>=0){l.deleteRule(c);for(var _=h.cssText.substring(h.selectorText.length),x=n.splitSelectorAtCommas(h.selectorText),b=0;b<x.length;b++)l.insertRule(x[b]+_,c+b)}}else l.deleteRule(c)}this.styleSheets.push(l)}}},n.splitSelectorAtCommas=function(o){for(var e,i=/,|["']/g,a=/[^\\]["]/g,r=/[^\\][']/g,s=[],l="initial",c=-1,d=a,h=0;h<o.length;)switch(l){case"initial":i.lastIndex=h,(e=i.exec(o))?(","===e[0]?(s.push(o.substring(c+1,i.lastIndex-1).trim()),c=i.lastIndex-1):(l="withinQuotes",d='"'===e[0]?a:r),h=i.lastIndex):(s.push(o.substring(c+1).trim()),h=o.length);break;case"withinQuotes":d.lastIndex=h,(e=d.exec(o))&&(h=d.lastIndex,l="initial")}return s},n.loadSheet=function(o){return new Promise(function(e,i){var a=new XMLHttpRequest;a.open("GET",o,!0),a.responseType="text",a.onload=function(){200!==a.status&&i(new Error("Error "+a.status+": Failed to load '"+o+"'")),e(a.responseText)},a.onerror=i,a.onabort=i,a.send(null)}).catch(function(){return null})},n.prototype.getPropertyValue=function(o,e){for(var i=[],a=0,r=this.styleSheets;a<r.length;a++)for(var s=r[a],l=0;l<s.cssRules.length;l++){var c=s.cssRules[l];c.style.getPropertyValue(e)&&o.matches(c.selectorText)&&i.push(c)}if(0!==i.length)return i.reduce(function(d,h){return x=h,1===((b=(_=d).style.getPropertyPriority(e))!==x.style.getPropertyPriority(e)?"important"===b?1:-1:function(n,o){var e,i,a;if("string"==typeof n){if(-1!==n.indexOf(","))throw"Invalid CSS selector";e=Uh(n).specificityArray}else{if(!Array.isArray(n))throw"Invalid CSS selector or specificity array";if(4!==n.filter(function(r){return"number"==typeof r}).length)throw"Invalid specificity array";e=n}if("string"==typeof o){if(-1!==o.indexOf(","))throw"Invalid CSS selector";i=Uh(o).specificityArray}else{if(!Array.isArray(o))throw"Invalid CSS selector or specificity array";if(4!==o.filter(function(r){return"number"==typeof r}).length)throw"Invalid specificity array";i=o}for(a=0;a<4;a+=1){if(e[a]<i[a])return-1;if(e[a]>i[a])return 1}return 0}(_.selectorText,x.selectorText))?d:h;var _,x,b}).style.getPropertyValue(e)||void 0},n}(),lb=function(){function n(){this.measureMethods={}}return n.prototype.getTextOffset=function(o,e){var i=e.textAnchor;if("start"===i)return 0;var a=this.measureTextWidth(o,e),r=0;switch(i){case"end":r=a;break;case"middle":r=a/2}return r},n.prototype.measureTextWidth=function(o,e){return 0===o.length?0:this.getMeasureFunction(e.fontFamily).call(this,o,e.fontFamily,e.fontSize+"px",e.fontStyle,e.fontWeight)},n.prototype.getMeasurementTextNode=function(){if(!this.textMeasuringTextElement){this.textMeasuringTextElement=document.createElementNS("http://www.w3.org/2000/svg","text");var o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.appendChild(this.textMeasuringTextElement),o.style.setProperty("position","absolute"),o.style.setProperty("visibility","hidden"),document.body.appendChild(o)}return this.textMeasuringTextElement},n.prototype.canvasTextMeasure=function(o,e,i,a,r){var s=document.createElement("canvas").getContext("2d");return null!=s?(s.font=[a,r,i,e].join(" "),s.measureText(o).width):0},n.prototype.svgTextMeasure=function(o,e,i,a,r,s){void 0===s&&(s=this.getMeasurementTextNode());var l=s;return l.setAttribute("font-family",e),l.setAttribute("font-size",i),l.setAttribute("font-style",a),l.setAttribute("font-weight",r),l.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),l.textContent=o,l.getBBox().width},n.prototype.getMeasureFunction=function(o){var e=this.measureMethods[o];if(!e){var i=this.canvasTextMeasure(n.testString,o,"16px","normal","normal"),a=this.svgTextMeasure(n.testString,o,"16px","normal","normal");e=Math.abs(i-a)<n.epsilon?this.canvasTextMeasure:this.svgTextMeasure,this.measureMethods[o]=e}return e},n.prototype.cleanupTextMeasuring=function(){if(this.textMeasuringTextElement){var o=this.textMeasuringTextElement.parentNode;o&&document.body.removeChild(o),this.textMeasuringTextElement=void 0}},n.testString="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789!\"$%&/()=?'\\+*-_.:,;^}][{#~|<>",n.epsilon=.1,n}();On.API.svg=function(n,o){return void 0===o&&(o={}),function Ql(n,o,e){var i,a,r;return void 0===e&&(e={}),no(this,void 0,void 0,function(){var s,l,c,d,h,_,x,b,T,P,U;return io(this,function(q){switch(q.label){case 0:return s=null!==(i=e.x)&&void 0!==i?i:0,l=null!==(a=e.y)&&void 0!==a?a:0,c=null!==(r=e.loadExternalStyleSheets)&&void 0!==r&&r,h=new P1(d={}),[4,(_=new sb(n,c)).load()];case 1:return q.sent(),x=new km(o.internal.pageSize.getWidth(),o.internal.pageSize.getHeight()),b=Bh(Bh({},e),{element:n}),T=new lb,P=new jl(o,{refsHandler:h,styleSheets:_,viewport:x,svg2pdfParameters:b,textMeasure:T}),o.advancedAPI(),o.saveGraphicsState(),o.setCurrentTransformationMatrix(o.Matrix(1,0,0,1,s,l)),o.setLineWidth(P.attributeState.strokeWidth),o.setFillColor((U=P.attributeState.fill.color).r,U.g,U.b),o.setFont(P.attributeState.fontFamily),o.setFontSize(P.attributeState.fontSize*o.internal.scaleFactor),[4,Xh(n,d).render(P)];case 2:return q.sent(),o.restoreGraphicsState(),o.compatAPI(),P.textMeasure.cleanupTextMeasuring(),[2,o]}})})}(n,this,o)};let tp=(()=>{class n{constructor(e,i,a,r){this.cdnService=e,this.shareFileFlutterService=i,this.http=a,this.commonService=r}createAnswerSheet(){return new it.y(e=>{this.creator?this.creator.createAnswerSheet().subscribe(i=>{i.success?(e.next({success:1,message:"successful"}),e.complete()):(e.next({success:0,message:i.message}),e.complete())}):(e.next({success:0,message:"Not find creator"}),e.complete())})}createAzotaAnswerSheet_A4(e){const i=new Ks(this.shareFileFlutterService,this.http);return this.creator=i.initPdfData(this.cdnService.convertCdnLinkOfGitHubWithCurrentLocale(`medias_[LANG]/answer_sheet_pdf_v4/answer_sheet_a4_pdf_v3/answer_sheet_a4_v2_${e&&e<=120?parseInt(e.toString(),10):120}.pdf`)),this}createA4AnswerSheet_35hh(e){const i=new Ks(this.shareFileFlutterService,this.http);return this.creator=i.initPdfData(this.cdnService.convertCdnLinkOfGitHubWithCurrentLocale(`medias_[LANG]/answer_sheet_pdf_v4/answer_sheet_a4_hh_1/answer_sheet_a4_50hh_${e&&e<=50?parseInt(e.toString(),10):50}.pdf`)),this}createA5AnswerSheetFullA4_50(e){const i=new Ks(this.shareFileFlutterService,this.http);return this.creator=i.initPdfData(this.cdnService.convertCdnLinkOfGitHubWithCurrentLocale(`medias_[LANG]/answer_sheet_pdf_v4/answer_sheet_a5/answer_sheet_a5_${e&&e<=50?parseInt(e.toString(),10):50}_full.pdf`)),this}createA6AnswerSheetFullA4_20(e){const i=new Ks(this.shareFileFlutterService,this.http);return this.creator=i.initPdfData(this.cdnService.convertCdnLinkOfGitHubWithCurrentLocale(`medias_[LANG]/answer_sheet_pdf_v4/answer_sheet_a6_20/answer_sheet_a6_20_${e&&e<=20?parseInt(e.toString(),10):20}_full_a4.pdf`)),this}createTrueFalseAnswerSheet(){return this}readTTFFile(e){return new it.y(i=>{this.http.get(e,{responseType:"text"}).subscribe(a=>{i.next(a),i.complete()},a=>{console.error("Error reading file:",a),i.next(""),i.complete()})})}addFontToJsPDF(e,i){return new it.y(a=>{let r=0;i.forEach(s=>{this.readTTFFile(s).subscribe(l=>{if(l){let c=s.includes("-italic")?"italic":s.includes("-bolditalic")?"bolditalic":s.includes("-bold.")?"bold":"normal";e.addFileToVFS("Times New Roman "+c+".ttf",l??""),e.addFont("Times New Roman "+c+".ttf","Times New Roman",c)}r++,r==i.length&&(a.next(e),a.complete())})})})}checkAndLoadLibLibAnswersheet(){return new Promise((e,i)=>{Object.prototype.hasOwnProperty.call(window,"azotaAnswerSheet")?e():this.commonService.loadScriptPromises([{source:this.cdnService.registerJsCdn("azota_answer_sheet_script"),name:"azota_answer_sheet_script"}]).then(()=>{e()}).catch(a=>{i(a)})})}downloadTrueFalseAnswerSheet(e,i){return new it.y(a=>{this.checkAndLoadLibLibAnswersheet().then(()=>{let r=window.azotaAnswerSheet.generateAnswerSheet(i.answerSheetTemplate,Number(i.amountTemplateMultipleChoiceA4),Number(i.amountTemplateStartMultipleChoiceA4)??1,Number(i.amountTemplateTrueFalseA4),Number(i.amountTemplateStartTrueFalseA4)??1,Number(i.amountTemplateFillA4),Number(i.amountTemplateStartFillA4)??1);r=r.replace("<svg",'<svg xmlns="http://www.w3.org/2000/svg"');let s=r.indexOf('width="'),l=r.indexOf('height="'),c=r.substring(s+7,r.indexOf('"',s+7)),d=r.substring(l+8,r.indexOf('"',l+8)),h=document.createElement("div");h.innerHTML=r;try{const _=h.firstElementChild;let x=new On(17==i.answerSheetTemplate?"l":"p","pt",[Number(c)+20,Number(d)+10]),b=[this.cdnService.convertCdnLinkOfGitHub("fonts/font-times-new-roman-normal.txt"),this.cdnService.convertCdnLinkOfGitHub("fonts/font-times-new-roman-bold.txt"),this.cdnService.convertCdnLinkOfGitHub("fonts/font-times-new-roman-italic.txt"),this.cdnService.convertCdnLinkOfGitHub("fonts/font-times-new-roman-bolditalic.txt")];this.addFontToJsPDF(x,b).subscribe(T=>{T.svg(_,{width:Number(c),height:Number(d)}).then(()=>{x.save(e+".pdf"),a.next({success:1,message:"successful"}),a.complete()})})}catch{a.next({success:0,message:"lang_core_invalid_data"}),a.complete()}}).catch(()=>{a.next({success:0,message:"lang_core_invalid_data"}),a.complete()})})}exportPdf(e){this.creator&&this.creator.exportPdf(e+".pdf")}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(Gn.E),t.LFG(ys.g),t.LFG(j.eN),t.LFG(mi.z))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Sm=M(17997);let ep=(()=>{class n{constructor(e){this.answerTypeService=e,this.allAnswerSheet=Sl.x}calcExamPart(e,i,a){let r=0,s=0,l=i.find(h=>this.answerTypeService.isOneChoiceAnswer({answerType:h.answerType}));e.controls.amountTemplateMultipleChoiceA4.setValue(l?.totalQuestion??0),r=l?.totalQuestion??0;let c=i.find(h=>this.answerTypeService.isTrueFalseAnswer({answerType:h.answerType}));e.controls.amountTemplateTrueFalseA4.setValue(c?.totalQuestion??0),s=c?.totalQuestion??0,c&&e.controls.answersheetTemplate.setValue(i.find(h=>this.answerTypeService.isEssayAnswer({answerType:h.answerType}))?this.allAnswerSheet.templateTrueFalseEssayA4:this.allAnswerSheet.templateTrueFalseA4);let d=i.find(h=>this.answerTypeService.isFillAnswer({answerType:h.answerType}));return e.controls.amountTemplateFillA4.setValue(d?.totalQuestion??0),d&&e.controls.answersheetTemplate.setValue(i.find(h=>this.answerTypeService.isEssayAnswer({answerType:h.answerType}))?this.allAnswerSheet.templateTrueFalseEssayA4:this.allAnswerSheet.templateTrueFalseA4),a||(e.controls.amountTemplateStartTrueFalseA4.setValue(r+1),e.controls.amountTemplateStartFillA4.setValue(r+s+1)),e}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(hr.i))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function np(n,o){1&n&&t._UZ(0,"azt-loading-effect")}function vd(n,o){1&n&&(t.TgZ(0,"span",53),t._UZ(1,"azt-loading-ui"),t.qZA())}function In(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"input",54),t.NdJ("change",function(a){t.CHM(e);const r=t.oxw(3);return t.KtG(r.changeConfigSubjectMark(a))}),t.qZA()}}function ip(n,o){if(1&n&&(t.TgZ(0,"div",43)(1,"div",44)(2,"div",45)(3,"label",46),t._uU(4),t.ALo(5,"mytranslate"),t.qZA(),t.TgZ(6,"div",47)(7,"div"),t._uU(8),t.ALo(9,"mytranslate"),t.qZA(),t.TgZ(10,"div",48),t._uU(11),t.ALo(12,"mytranslate"),t.qZA()()(),t.TgZ(13,"div",49)(14,"div",50),t.YNc(15,vd,2,0,"span",51),t.YNc(16,In,1,0,"input",52),t.qZA()()()()),2&n){const e=t.oxw(2);t.xp6(4),t.hij(" ",t.lcZ(5,5,"lang_config_create_exam_multiple_component")," "),t.xp6(4),t.hij(" ",t.lcZ(9,7,"lang_config_create_exam_multiple_component_description_120"),""),t.xp6(3),t.hij(" ",t.lcZ(12,9,"lang_config_create_exam_multiple_component_description_80"),""),t.xp6(4),t.Q6J("ngIf",e.loadingSaveConfigMultiple),t.xp6(1),t.Q6J("ngIf",!e.loadingSaveConfigMultiple)}}function gf(n,o){1&n&&(t.TgZ(0,"div",64)(1,"div",65)(2,"a",66),t._UZ(3,"img",67),t.ALo(4,"convertCdnLinkOfGitHub"),t.qZA(),t.TgZ(5,"a",68),t._UZ(6,"img",69),t.ALo(7,"convertCdnLinkOfGitHub"),t.qZA()()()),2&n&&(t.xp6(3),t.Q6J("src",t.lcZ(4,2,"images/google-play-badge.svg"),t.LSH),t.xp6(3),t.Q6J("src",t.lcZ(7,4,"images/2928664.svg"),t.LSH))}function Su(n,o){1&n&&(t.TgZ(0,"p",60),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_su_dung_ma_qr_de_tai_app_azota")," "))}function cb(n,o){1&n&&(t.TgZ(0,"div",64)(1,"div",70)(2,"p",71)(3,"span",72),t._uU(4,"Google Play"),t.qZA(),t._UZ(5,"azt-download-qr-code",73),t.qZA(),t.TgZ(6,"p",74)(7,"span",72),t._uU(8,"App Store"),t.qZA(),t._UZ(9,"azt-download-qr-code",73),t.qZA()()()),2&n&&(t.xp6(5),t.Q6J("fileName","azota_exam_qr_code_google_app")("linkUrl","https://play.google.com/store/apps/details?id=azt.teacher"),t.xp6(4),t.Q6J("fileName","azota_exam_qr_code_app_store")("linkUrl","https://apps.apple.com/vn/app/azota-teacher/id1658231068"))}function xf(n,o){if(1&n&&(t.TgZ(0,"div",55)(1,"div",56)(2,"span",57),t._uU(3," * "),t.qZA(),t._uU(4),t.ALo(5,"mytranslate"),t.qZA(),t.TgZ(6,"div",58)(7,"div",59)(8,"p",60),t._uU(9),t.ALo(10,"mytranslate"),t.qZA(),t.YNc(11,gf,8,6,"div",61),t.qZA(),t.TgZ(12,"div",62),t.YNc(13,Su,3,3,"p",63),t.YNc(14,cb,10,4,"div",61),t.qZA()()()),2&n){const e=t.oxw(2);t.xp6(4),t.hij(" ",t.lcZ(5,5,"lang_core_warning_update_app_mark_ticket_new")," "),t.xp6(5),t.hij(" ",t.lcZ(10,7,"lang_core_tai_app_tai_day")," "),t.xp6(2),t.Q6J("ngIf",!e.isMobileWebView),t.xp6(2),t.Q6J("ngIf",!e.isMobileWebView),t.xp6(1),t.Q6J("ngIf",!e.isMobileWebView)}}function J1(n,o){1&n&&(t.TgZ(0,"span"),t.O4$(),t.TgZ(1,"svg",75),t._UZ(2,"path",76)(3,"polyline",77)(4,"line",78),t.qZA()())}function Ga(n,o){1&n&&(t.TgZ(0,"span",79),t._UZ(1,"azt-loading-ui"),t.qZA())}function ub(n,o){1&n&&(t.TgZ(0,"span",80),t._UZ(1,"azt-loading-ui"),t.qZA())}function db(n,o){1&n&&(t.TgZ(0,"span",81),t._UZ(1,"lucide-icon",82),t.qZA())}const bf=function(n){return[n]};function mb(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",4)(1,"div",5)(2,"h3",6),t._uU(3),t.ALo(4,"mytranslate"),t._UZ(5,"notice-print-a4-paper-box"),t.qZA(),t.TgZ(6,"div",7)(7,"form",8)(8,"div",9)(9,"div",10)(10,"div",11)(11,"div",12)(12,"div",13),t._UZ(13,"app-testbank-choose-answer-sheet",14),t.qZA(),t.YNc(14,ip,17,11,"div",15),t.qZA(),t.TgZ(15,"div",12),t._UZ(16,"preview-answer-sheet-dialog",16),t.qZA()()(),t.YNc(17,xf,15,9,"div",17),t.qZA(),t.TgZ(18,"div",18)(19,"button",19),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.printExamAnswersheet(null==a.dataConfigDocument||null==a.dataConfigDocument.offlineExamObj?null:a.dataConfigDocument.offlineExamObj.hashId))}),t.YNc(20,J1,5,0,"span",20),t.YNc(21,Ga,2,0,"span",21),t.TgZ(22,"span"),t._uU(23),t.ALo(24,"mytranslate"),t.qZA()()()()()(),t.TgZ(25,"div",22)(26,"h3",6),t._uU(27),t.ALo(28,"mytranslate"),t.qZA(),t.TgZ(29,"div",23)(30,"div",24)(31,"div",25)(32,"p",26)(33,"span",27),t._UZ(34,"lucide-icon",28),t.qZA(),t._uU(35),t.ALo(36,"mytranslate"),t.qZA(),t.TgZ(37,"div",29),t._UZ(38,"input",30),t.TgZ(39,"button",31),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.exportExcelForAnswerSheet())}),t.YNc(40,ub,2,0,"span",32),t.YNc(41,db,2,0,"ng-template",null,33,t.W1O),t._uU(43),t.ALo(44,"mytranslate"),t.qZA()()()()()(),t.TgZ(45,"div",22)(46,"h3",6),t._uU(47),t.ALo(48,"mytranslate"),t.qZA(),t.TgZ(49,"div",23)(50,"div",24),t._UZ(51,"numbering-identification",34),t.ALo(52,"mustInClassroom"),t.qZA()()(),t.TgZ(53,"div",35)(54,"div",36)(55,"a",37),t.ALo(56,"navigationLocalize"),t.TgZ(57,"span",38),t._UZ(58,"lucide-icon",39),t.qZA(),t._uU(59),t.ALo(60,"mytranslate"),t.qZA()(),t.TgZ(61,"div",40)(62,"a",41),t.ALo(63,"navigationLocalize"),t.TgZ(64,"span",38),t._UZ(65,"lucide-icon",42),t.qZA(),t._uU(66),t.ALo(67,"mytranslate"),t.qZA()()()()}if(2&n){const e=t.MAs(42),i=t.oxw();let a,r;t.xp6(3),t.hij(" ",t.lcZ(4,37,"lang_auto_in_phieu_tra_loi")," "),t.xp6(4),t.Q6J("formGroup",i.form),t.xp6(6),t.Q6J("form",i.form)("resetQuestionIndex",i.resetQuestionIndex)("formArrayName","answersheetTemplate"),t.xp6(1),t.Q6J("ngIf",i.canUseSubjectMark),t.xp6(2),t.Q6J("answersheetTemplate",i.form.controls.answersheetTemplate.value)("amountTemplateOriginalA4",i.form.controls.amountTemplateOriginalA4.value)("amountTemplateA5",i.form.controls.amountTemplateA5.value)("amountTemplateA6",i.form.controls.amountTemplateA6.value)("amountTemplateEssayA4",i.form.controls.amountTemplateEssayA4.value)("amountTemplateTrueFalseA4",i.form.controls.amountTemplateTrueFalseA4.value)("amountTemplateStartTrueFalseA4",i.form.controls.amountTemplateStartTrueFalseA4.value)("amountTemplateMultipleChoiceA4",i.form.controls.amountTemplateMultipleChoiceA4.value)("amountTemplateStartMultipleChoiceA4",i.form.controls.amountTemplateStartMultipleChoiceA4.value)("amountTemplateFillA4",i.form.controls.amountTemplateFillA4.value)("amountTemplateStartFillA4",i.form.controls.amountTemplateStartFillA4.value),t.xp6(1),t.Q6J("ngIf",!i.isMobileWebView),t.xp6(2),t.Q6J("disabled",11==i.form.controls.answersheetTemplate.value&&i.form.controls.amountTemplateOriginalA4.errors||12==i.form.controls.answersheetTemplate.value&&i.form.controls.amountTemplateA5.errors||14==i.form.controls.answersheetTemplate.value&&i.form.controls.amountTemplateA6.errors||13==i.form.controls.answersheetTemplate.value&&i.form.controls.amountTemplateEssayA4.errors||15==i.form.controls.answersheetTemplate.value&&i.form.controls.amountTemplateTrueFalseA4.errors||15==i.form.controls.answersheetTemplate.value&&i.form.controls.amountTemplateMultipleChoiceA4.errors||15==i.form.controls.answersheetTemplate.value&&i.form.controls.amountTemplateFillA4.errors),t.xp6(1),t.Q6J("ngIf",!i.isLoadingPrintTicket),t.xp6(1),t.Q6J("ngIf",i.isLoadingPrintTicket),t.xp6(2),t.Oqu(t.lcZ(24,39,"lang_auto_tai_phieu_tra_loi")),t.xp6(4),t.hij(" ",t.lcZ(28,41,"lang_auto_dap_an_de_thi_offline")," "),t.xp6(8),t.hij(" ",t.lcZ(36,43,"lang_auto_file_answer_list")," "),t.xp6(3),t.s9C("value",i.createNameExam("answerexcel",!0)),t.xp6(2),t.Q6J("ngIf",i.isLoadingPrintAnswer)("ngIfElse",e),t.xp6(3),t.hij(" ",t.lcZ(44,45,"lang_auto_tai_ve")," "),t.xp6(4),t.hij(" ",t.lcZ(48,47,"lang_auto_danh_so_bao_danh")," "),t.xp6(4),t.Q6J("hashId",null==i.dataConfigDocument||null==i.dataConfigDocument.examObj?null:i.dataConfigDocument.examObj.hashId)("checkStudentCode",t.lcZ(52,49,null==i.dataConfigDocument?null:i.dataConfigDocument.examObj))("styleView",1)("startStudentCode",i.startStudentCode),t.xp6(4),t.Q6J("routerLink",t.VKq(59,bf,t.lcZ(56,51,"/admin/testbank/exam-results-list/"+(null!==(a=null==i.examObj?null:i.examObj.categoryId)&&void 0!==a?a:0)+"/"+(null==i.examObj?null:i.examObj.id)+"/0"))),t.xp6(4),t.hij(" ",t.lcZ(60,53,"lang_auto_quan_ly_danh_sach_da_thi")," "),t.xp6(3),t.Q6J("routerLink",t.VKq(61,bf,t.lcZ(63,55,"/admin/testbank/document-management/0/"+(null!==(r=null==i.examObj?null:i.examObj.categoryId)&&void 0!==r?r:0)+"/1"))),t.xp6(4),t.hij(" ",t.lcZ(67,57,"lang_auto_ve_trang_quan_ly_file")," ")}}function H1(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"azt-export-excel-for-answersheet",83),t.NdJ("exportDataDone",function(a){t.CHM(e);const r=t.oxw();return t.KtG(r.exportDataDone(a))}),t.qZA()}if(2&n){const e=t.oxw();let i;t.Q6J("startQuestionIndex",null!==(i=null==e.examObj?null:e.examObj.startQuestionIndex)&&void 0!==i?i:1)("obj",e.exportExcelData)}}let G1=(()=>{class n extends St.Q{saveConfig(){return new Promise(e=>{let a={subjectMarks:this.form.getRawValue().subjectMarks?1:0,isSaveConfig:0};this.waitDestroy(this.documentConfigService.apiDocumentConfigSaveExamConfigPost(this.examHashId,a).subscribe(r=>{e(1==r.success)}))})}printExamAnswersheet(e){this.isLoadingPrintTicket=!0,this.waitDestroy(this.offlineMixQuestionService.apiOfflineMixQuestionGetObjsGet(this.dataConfigDocument?.examObj?.hashId??"",e??"","").subscribe(i=>{if(i.success){let a=this.getTotalQuestionInMixQuestionObjs(i.data?.mixQuestionObjs??[],i.data?.questionObjs??[]);if(a){const r=a;let s=Number(this.form.controls.answersheetTemplate.value)??this.allAnswerSheet.templateOriginalA4,l=this.getAmountAnswerSheetByTemplate(s),c=this.printAnswersheetService.exportFileNameOfAnswerSheet(0,this.dataConfigDocument?.examObj?.name??"",i.data?.offlineExamObj?.hashId??"");if(s==this.allAnswerSheet.templateTrueFalseA4||s==this.allAnswerSheet.templateTrueFalseEssayA4||s==this.allAnswerSheet.templateTrueFalseA5||s==this.allAnswerSheet.templateTrueFalseA6){let d={answerSheetTemplate:s,amountTemplateTrueFalseA4:this.form.controls.amountTemplateTrueFalseA4.value??8,amountTemplateStartTrueFalseA4:this.form.controls.amountTemplateStartTrueFalseA4.value??1,amountTemplateMultipleChoiceA4:this.form.controls.amountTemplateMultipleChoiceA4.value??40,amountTemplateStartMultipleChoiceA4:this.form.controls.amountTemplateStartMultipleChoiceA4.value??1,amountTemplateFillA4:this.form.controls.amountTemplateFillA4.value??6,amountTemplateStartFillA4:this.form.controls.amountTemplateStartFillA4.value??1};this.answerSheetHelper=this.printAnswersheetService.chooseAnswerSheetTemplate(this.answerSheetHelper,s,r,0,i.data?.maxOfflineMixQuestionHashId,l),this.saveConfig().then(h=>{h?this.answerSheetHelper.downloadTrueFalseAnswerSheet(c,d).subscribe(_=>{_.success||this.errorStatusObj(this.commonService.translateToKeyParam("lang_auto_tao_phieu_loi_vui_long_thu_lai",_.message??"none"),!0)}):this.errorStatusObj(this.commonService.translateToKeyParam("lang_auto_tao_phieu_loi_vui_long_thu_lai",i.message??"none"),!0)}),this.isLoadingPrintTicket=!1}else this.answerSheetHelper=this.printAnswersheetService.chooseAnswerSheetTemplate(this.answerSheetHelper,s,r,0,i.data?.maxOfflineMixQuestionHashId,l),this.answerSheetHelper.createAnswerSheet().subscribe(d=>{1==d.success?this.saveConfig().then(h=>{h?this.answerSheetHelper.exportPdf(c):this.errorStatusObj(this.commonService.translateToKeyParam("lang_auto_tao_phieu_loi_vui_long_thu_lai",i.message??"none"),!0)}):this.errorStatusObj(this.commonService.translateToKeyParam("lang_auto_tao_phieu_loi_vui_long_thu_lai",i.message??"none"),!0),this.isLoadingPrintTicket=!1})}else this.errorStatusObj(i.message??"",!0),this.isLoadingPrintTicket=!1}else this.errorStatusObj(i.message??"",!0),this.isLoadingPrintTicket=!1}))}getAmountAnswerSheetByTemplate(e){switch(Number(e)){case this.allAnswerSheet.templateOriginalA4:return this.form.controls.amountTemplateOriginalA4.value;case this.allAnswerSheet.templateA5Full50:return this.form.controls.amountTemplateA5.value;case this.allAnswerSheet.templateA6Full20:return this.form.controls.amountTemplateA6.value;case this.allAnswerSheet.templateA4Essay:return this.form.controls.amountTemplateEssayA4.value;case this.allAnswerSheet.templateTrueFalseA4:case this.allAnswerSheet.templateTrueFalseA5:case this.allAnswerSheet.templateTrueFalseA6:case this.allAnswerSheet.templateTrueFalseEssayA4:return this.form.controls.amountTemplateTrueFalseA4.value+this.form.controls.amountTemplateFillA4.value+this.form.controls.amountTemplateStartMultipleChoiceA4.value;default:return this.form.controls.amountTemplateOriginalA4.value}}getTotalQuestionInMixQuestionObjs(e,i){if(e.length>0){let a=0;return e.forEach(r=>{let s=this.zipDataService.decodeContentGzip(r?.mixDatas??""),l=this.castJsonToObj(s);a<(l?.length??0)&&(a=l?.length??0)}),a}return i.length>0?i.length:void 0}getExamInfoByHashId(e){this.initStatusObj(),this.waitDestroy(this.documentConfigService.apiDocumentConfigGetExamConfigDataGet(e).subscribe(i=>{1==i.success?(this.dataConfigDocument=i.data,this.canUseSubjectMark=i.data?.canUseSubjectMark??!1,this.examObj=this.dataConfigDocument?.examObj,this.resetQuestionIndex=i.data?.resetQuestionIndex??!0,this.resetQuestionIndex&&(this.form.controls.amountTemplateStartTrueFalseA4=new f.NI(1,{nonNullable:!0,validators:[f.kI.required,f.kI.min(1),f.kI.max(120)]}),this.form.controls.amountTemplateStartFillA4=new f.NI(1,{nonNullable:!0,validators:[f.kI.required,f.kI.min(1),f.kI.max(120)]})),this.dataConfigDocument?.examParts.length&&this.dataConfigDocument?.examParts.length&&(this.form=this.aztCalcExamPartService.calcExamPart(this.form,this.dataConfigDocument?.examParts,this.resetQuestionIndex)),this.form.controls.subjectMarks.setValue(!!this.dataConfigDocument?.examObj?.subjectMarks),this.canUseSubjectMark||this.form.controls.subjectMarks.disable(),this.successStatusObj()):this.errorStatusObj(i.message??"",!0)})),this.examHashId=this.commonService.getMyParam(this.activeRoute,"hash_id")??""}createNameExam(e,i){var a="";a="answersheet"==e?this.printAnswersheetService.exportFileNameOfAnswerSheet(0,this.examObj?.name??"",this.examHashId??""):"answerexcel"==e||"answerdocx"==e?this.printAnswersheetService.exportFileNameOfAnswerExcelOffline(0,this.examObj?.name??"",this.examHashId??""):this.printAnswersheetService.exportFileNameOfExamOffline(0,this.examObj?.name??"",this.examHashId??"",void 0),i&&(a=this.commonService.replaceAll(a,"_","-")??"");var r=".docx";return r="answersheet"==e&&7!=Number(this.form.getRawValue().answersheetTemplate)?".pdf":r,a+("answerexcel"==e?".xlsx":r)}exportExcelForAnswerSheet(){this.isLoadingPrintAnswer=!0;let e=this.commonService.getMyParam(this.activeRoute,"hash_id")??"";this.waitDestroy(this.offlineExamExportService.apiOfflineExamExportExportResultOfAllOfflineMixQuestionHashIdGet(e).subscribe(i=>{if(1==i.success){let a=i.data?.obj;a?.offlineMixQuestionObjs&&a.offlineMixQuestionObjs.length>0?this.exportExcelData=this.commonService.myClone(a):(this.showErrorSnack("lang_auto_chua_co_du_lieu_dap_an_de_offline"),this.isLoadingPrintAnswer=!1)}else this.showErrorSnack(i.message??""),this.isLoadingPrintAnswer=!1}))}exportDataDone(e){let i=this.createNameExam("answerexcel",!1);this.shareFileFlutterService.shareFileWithBlob(e,i),this.isLoadingPrintAnswer=!1}changeConfigSubjectMark(e){if(e.target instanceof HTMLInputElement){this.loadingSaveConfigMultiple=!0;let i=this.form.getRawValue(),a={subjectMarks:i.subjectMarks?1:0,isSaveConfig:0};this.waitDestroy(this.documentConfigService.apiDocumentConfigSaveExamConfigPost(this.examHashId,a).subscribe(r=>{1==r.success?(this.loadingSaveConfigMultiple=!1,this.successStatusObj(i.subjectMarks?"lang_config_create_exam_multiple_component_enable_successfully":"lang_config_create_exam_multiple_component_disable_successfully",!0)):(this.loadingSaveConfigMultiple=!1,this.errorStatusObj(r.message??"",!0),this.form.controls.subjectMarks.setValue(!a.subjectMarks))}))}}ngOnInit(){this.examHashId=this.commonService.getMyParam(this.activeRoute,"hash_id")??"";let e=Number(this.activeRoute.snapshot.paramMap.get("cat_id"))??0,i=this.commonService.getMyQueryParam("backto")??"/admin/testbank/document-management/0/"+(e??0)+"/1";this.backLink=this.paramClassroomService.getBackLinkUrlParamClassroom(i),this.examHashId&&this.getExamInfoByHashId(this.examHashId)}constructor(e,i,a,r,s,l,c,d,h,_){super(),this.offlineMixQuestionService=e,this.shareFileFlutterService=i,this.zipDataService=a,this.answerSheetHelper=r,this.printAnswersheetService=s,this.documentConfigService=l,this.activeRoute=c,this.offlineExamExportService=d,this.paramClassroomService=h,this.aztCalcExamPartService=_,this.backLink="",this.isLoadingPrintTicket=!1,this.examHashId="",this.startStudentCode=1,this.canUseSubjectMark=!1,this.isLoadingPrintAnswer=!1,this.loadingSaveConfigMultiple=!1,this.resetQuestionIndex=!0,this.allAnswerSheet=Sl.x,this.form=new f.cw({answersheetTemplate:new f.NI(this.allAnswerSheet.templateOriginalA4,{nonNullable:!0,validators:[f.kI.required]}),amountTemplateOriginalA4:new f.NI(120,{nonNullable:!0,validators:[f.kI.required,f.kI.min(1),f.kI.max(120)]}),amountTemplateA5:new f.NI(50,{nonNullable:!0,validators:[f.kI.required,f.kI.min(1),f.kI.max(50)]}),amountTemplateA6:new f.NI(20,{nonNullable:!0,validators:[f.kI.required,f.kI.min(1),f.kI.max(20)]}),amountTemplateEssayA4:new f.NI(50,{nonNullable:!0,validators:[f.kI.required,f.kI.min(1),f.kI.max(50)]}),amountTemplateTrueFalseA4:new f.NI(8,{nonNullable:!0,validators:[f.kI.required,f.kI.min(0),f.kI.max(8)]}),amountTemplateStartTrueFalseA4:new f.NI(41,{nonNullable:!0,validators:[f.kI.required,f.kI.min(1),f.kI.max(120)]}),amountTemplateMultipleChoiceA4:new f.NI(40,{nonNullable:!0,validators:[f.kI.required,f.kI.min(0),f.kI.max(40)]}),amountTemplateStartMultipleChoiceA4:new f.NI(1,{nonNullable:!0,validators:[f.kI.required,f.kI.min(1),f.kI.max(120)]}),amountTemplateFillA4:new f.NI(6,{nonNullable:!0,validators:[f.kI.required,f.kI.min(0),f.kI.max(6)]}),amountTemplateStartFillA4:new f.NI(49,{nonNullable:!0,validators:[f.kI.required,f.kI.min(1),f.kI.max(120)]}),subjectMarks:new f.NI({value:!1,disabled:!1},{nonNullable:!0})})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(ya.fs),t.Y36(ys.g),t.Y36(La.a),t.Y36(tp),t.Y36(Sm.H),t.Y36(Ke.Cq),t.Y36(O.gz),t.Y36(ya.qr),t.Y36(Oo),t.Y36(ep))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-config-exam-offline"]],features:[t.qOj],decls:5,vars:4,consts:[[3,"headerBackToLink"],[4,"ngIf","ngIfElse"],["doneLoading",""],[3,"startQuestionIndex","obj","exportDataDone",4,"ngIf"],["id","azt-config-document",1,"azt-config-document","mx-auto","mt-5",2,"max-width","1000px"],[1,"setting-block"],[1,"text-md","uppercase","font-medium"],[1,"box","mt-3"],[3,"formGroup"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5"],[1,"grid","grid-cols-12","gap-5"],[1,"col-span-12","md:col-span-6"],[1,"mt-0"],[3,"form","resetQuestionIndex","formArrayName"],["class","mt-3",4,"ngIf"],[3,"answersheetTemplate","amountTemplateOriginalA4","amountTemplateA5","amountTemplateA6","amountTemplateEssayA4","amountTemplateTrueFalseA4","amountTemplateStartTrueFalseA4","amountTemplateMultipleChoiceA4","amountTemplateStartMultipleChoiceA4","amountTemplateFillA4","amountTemplateStartFillA4"],["class","block-warning p-5",4,"ngIf"],[1,"p-3","text-right"],["azt-track-service","config-exam-offline--sdRHbNg8Am",1,"btn","btn-primary",3,"disabled","click"],[4,"ngIf"],["class","w-4 h-4 inline-block mr-2",4,"ngIf"],[1,"setting-block","mt-5"],[1,"box","mt-2","p-5"],[1,"mt-2","intro-y"],[1,"action-file","mt-3"],[1,"font-medium","flex","items-center"],[1,"inline-block","w-4","h-4","mr-2","text-success"],["name","file-text"],[1,"relative","mt-2","intro-x"],["type","text","readonly","",1,"form-control","py-3","px-4","border-transparent","bg-slate-100","pr-10",2,"padding-right","120px",3,"value"],["azt-track-service","config-exam-offline-O6CEF-iZ3",1,"btn","btn-primary","absolute","my-auto","inset-y-0","right-0",2,"border-top-left-radius","0","border-bottom-left-radius","0",3,"click"],["class","w-4 h-4 mr-2 text-white",4,"ngIf","ngIfElse"],["doneLoadingPrintAnswer",""],[3,"hashId","checkStudentCode","styleView","startStudentCode"],[1,"mt-5","flex","flex-col","sm:flex-row","justify-center","items-center"],[1,"mr-2"],["azt-track-service","config-exam-offline-XpfN8mirJ",1,"btn","btn-outline-primary","btn-transparent",3,"routerLink"],[1,"w-4","h-4","mr-2"],["name","file-spreadsheet"],[1,"w-30"],["azt-track-service","config-exam-offline-o5dAdXmYKG",1,"btn","btn-outline-primary","btn-transparent",3,"routerLink"],["name","folder"],[1,"mt-3"],[1,"grid","grid-cols-12"],[1,"col-span-10","lg:col-span-10"],["for","subject-marks-question",1,"form-label","font-medium"],[1,"leading-relaxed","text-slate-500","text-xs","pr-5"],[1,"mt-0.5"],[1,"col-span-2","lg:col-span-2"],[1,"form-check","form-switch","ml-auto"],["class","show-code ml-auto form-check-input w-5 h-5",4,"ngIf"],["id","subject-marks-question","formControlName","subjectMarks","class","show-code ml-auto form-check-input mr-0 ml-3","type","checkbox",3,"change",4,"ngIf"],[1,"show-code","ml-auto","form-check-input","w-5","h-5"],["id","subject-marks-question","formControlName","subjectMarks","type","checkbox",1,"show-code","ml-auto","form-check-input","mr-0","ml-3",3,"change"],[1,"block-warning","p-5"],[1,"font-medium",2,"font-size","18px"],[1,"text-danger"],[1,"mt-5","flex","flex-col","md:flex-row"],[1,"block","md:mr-10"],[1,"mt-2","font-medium"],["class","grid grid-cols-12 mt-2 ml-auto mr-auto justify-center",4,"ngIf"],[1,"block"],["class","mt-2 font-medium",4,"ngIf"],[1,"grid","grid-cols-12","mt-2","ml-auto","mr-auto","justify-center"],[1,"col-span-12","w-full","self-center","mb-2"],["azt-track-service","config-exam-offline-hLHiZDnMwY","href","https://play.google.com/store/apps/details?id=azt.teacher","target","_blank","rel","noopener",1,"pl-1","pr-1","mb-2","display-inline-block"],["alt","Get it on Google Play","width","150px",1,"play-store-badge",3,"src"],["azt-track-service","config-exam-offline-hD7OkoGz62","href","https://apps.apple.com/vn/app/azota-teacher/id1658231068","target","_blank","rel","noopener",1,"pl-1","pl-1","mb-2","display-inline-block"],["alt","Download on the App Store","width","135px",1,"app-store-badge",3,"src"],[1,"col-span-12","items-center","mb-2"],[1,"px-1","mb-1","py-1","inline-flex","border","border-slate-200","rounded"],[1,"my-auto","font-medium"],[1,"ml-1",3,"fileName","linkUrl"],[1,"ml-2","px-1","py-1","mb-1","inline-flex","border","border-slate-200","rounded"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide","mr-2"],["d","M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"],["points","7 10 12 15 17 10"],["x1","12","y1","15","x2","12","y2","3"],[1,"w-4","h-4","inline-block","mr-2"],[1,"w-4","h-4","mr-2","text-white"],[1,"inline-block","w-4","h-4","mr-2"],["name","download"],[3,"startQuestionIndex","obj","exportDataDone"]],template:function(e,i){if(1&e&&(t.TgZ(0,"teacher-layout",0),t.YNc(1,np,1,0,"azt-loading-effect",1),t.YNc(2,mb,68,63,"ng-template",null,2,t.W1O),t.YNc(4,H1,1,2,"azt-export-excel-for-answersheet",3),t.qZA()),2&e){const a=t.MAs(3);t.Q6J("headerBackToLink",i.backLink),t.xp6(1),t.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a),t.xp6(3),t.Q6J("ngIf",null!=i.exportExcelData)}},encapsulation:2}),n})();var lo=M(72164),Ic=M(78497),oi=M(71646),jt=M(36727);let vf=(()=>{class n extends lo.e{btnCloseDialog(){this.dialogRef.close()}loadImage(){this.loading=!1}ngOnInit(){super.ngOnInit()}constructor(e,i){super(i,e),this.dialogRef=e,this.data=i,this.loading=!0}}return n.\u0275fac=function(e){return new(e||n)(t.Y36($.so,8),t.Y36($.WI))},n.\u0275cmp=t.Xpm({type:n,selectors:[["notice-print-a4-paper-dialog"]],features:[t.qOj],decls:25,vars:14,consts:[[1,"box",2,"max-width","650px"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-3","border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"text-md","font-medium","flex"],[1,"inline-block","w-6","h-6","mr-2","text-pending","flex-none",2,"margin-top","4px"],["name","alert-octagon"],[1,"mb-0","h5"],[1,"p-3"],[1,"font-medium","mb-2"],[1,"text-center","mt-3"],[1,"flex","items-center",2,"max-height","50vh",3,"hidden"],[1,"w-10","h-10","mx-auto"],[2,"max-height","50vh",3,"hidden"],["alt","",1,"h-auto","mx-auto",3,"src","load"],[1,"p-3","text-right"],["azt-track-service","notice-a4-dialog-ObwBAVC1Evd",1,"btn","w-24","btn-primary",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3)(4,"span",4),t._UZ(5,"lucide-icon",5),t.qZA(),t.TgZ(6,"p",6),t._uU(7),t.ALo(8,"mytranslate"),t.qZA()()(),t.TgZ(9,"azt-mat-dialog-content")(10,"div",7)(11,"p",8),t._uU(12),t.ALo(13,"mytranslate"),t.qZA(),t.TgZ(14,"div",9)(15,"div",10)(16,"div",11),t._UZ(17,"azt-loading-ui"),t.qZA()(),t.TgZ(18,"div",12)(19,"img",13),t.NdJ("load",function(){return i.loadImage()}),t.ALo(20,"convertCdnLinkOfGitHubWithLocale"),t.qZA()()()()()(),t.TgZ(21,"div",14)(22,"button",15),t.NdJ("click",function(){return i.btnCloseDialog()}),t._uU(23),t.ALo(24,"mytranslate"),t.qZA()()()),2&e&&(t.xp6(7),t.Oqu(t.lcZ(8,6,"lang_auto_vui_long_cau_hinh_in_theo_mau_A4_nhu_huong_dan_duoi_day")),t.xp6(5),t.hij(" ",t.lcZ(13,8,"lang_core_after_printing_the_answer_sheet_please_check_that")," "),t.xp6(3),t.Q6J("hidden",!i.loading),t.xp6(3),t.Q6J("hidden",i.loading),t.xp6(1),t.Q6J("src",t.lcZ(20,10,"medias_[LANG]/a4_template_answer_sheet.png"),t.LSH),t.xp6(4),t.hij(" ",t.lcZ(24,12,"lang_auto_dong")," "))},dependencies:[Ic.R,oi.n,C.Nh5,jt.JV,jt.Ju],encapsulation:2}),n})(),$1=(()=>{class n extends St.Q{showDialog(){this.sAztDialogService.open(vf,{data:{},restoreFocus:!1})}ngOnInit(){super.ngOnInit()}constructor(e,i){super(),this.sAztDialogService=e,this.commonService=i}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Fi.C),t.Y36(mi.z))},n.\u0275cmp=t.Xpm({type:n,selectors:[["notice-print-a4-paper-box"]],features:[t.qOj],decls:3,vars:3,consts:[["azt-track-service","notice-a4-box-8TXulZreMgV",1,"btn-text-primary","ml-2","font-medium",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"button",0),t.NdJ("click",function(){return i.showDialog()}),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&e&&(t.xp6(1),t.hij("(",t.lcZ(2,1,"lang_testbank_print_a4_notice"),")"))},dependencies:[jt.JV],encapsulation:2}),n})();var yf=M(76718);let hb=(()=>{class n{constructor(e){this.commonService=e}transform(e,i,a){const r=e.map(d=>d.value),l=new jt.om(this.commonService).transform(r,i,a);return e.filter(d=>l.some(h=>d.value.id===h.id))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(mi.z,16))},n.\u0275pipe=t.Yjl({name:"appSearchStudentForm",type:n,pure:!0}),n})();var $a=M(29023),Ou=M(73445),Lc=M(23680),op=M(44683),wf=M(13217),ap=M(76359),br=M(84003),Cf=M(47180),or=M(91765),rp=M(78820),Tf=M(90592),sp=M(71069),vr=M(32296),yd=M(2032),rs=M(64170),Mi=M(92596),oo=M(67679),wd=M(49828);const Y1=["startTime"],cl=["endTime"];function Eu(n,o){1&n&&t._UZ(0,"azt-loading-effect")}function pb(n,o){1&n&&(t.TgZ(0,"div",74),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_vui_long_nhap_ten_bai_tap")," "))}function K1(n,o){1&n&&(t.TgZ(0,"div",75),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_test_config_end_time_bigger_time_star"),". "))}function _b(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"div",76)(2,"div",77),t._UZ(3,"azt-list-classroom-checkbox-new",78),t.qZA()(),t.BQk()),2&n){const e=t.oxw(2);t.xp6(3),t.Q6J("form",e.form)("classroomGroupData",e.classroomWithGroup)("homeworkObj",e.homeworkObj)("permissionName",e.permissionTypes.homework)}}function fb(n,o){if(1&n&&(t.TgZ(0,"div",76)(1,"div",79)(2,"span",80),t._uU(3),t.ALo(4,"mytranslate"),t.qZA(),t.TgZ(5,"span",81),t._uU(6),t.qZA()()()),2&n){const e=t.oxw(2);t.xp6(3),t.hij(" ",t.lcZ(4,2,"lang_auto_da_giao_bai_tap_cho_lop")+": "," "),t.xp6(3),t.hij(" ",null==e.classroomObj?null:e.classroomObj.name," ")}}function gb(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",82),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.saveNewOrConfigHomework(0))}),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()}if(2&n){const e=t.oxw(2);t.Q6J("disabled",e.form.invalid||e.checkDeadLineValid(e.form.controls.homeworkStartDate.value,e.form.controls.homeworkDeadline.value)<=0),t.xp6(1),t.hij(" ",t.lcZ(2,2,"lang_auto_luu_nhap")," ")}}function xb(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",2)(1,"form",3)(2,"div",4)(3,"div",5)(4,"h3",6),t._uU(5),t.ALo(6,"mytranslate"),t.qZA(),t.TgZ(7,"div",7)(8,"div",8)(9,"div",9)(10,"label",10),t._uU(11),t.ALo(12,"mytranslate"),t.qZA()(),t.TgZ(13,"div",9)(14,"div",11),t._UZ(15,"input",12),t.ALo(16,"mytranslate"),t.qZA(),t.YNc(17,pb,3,3,"div",13),t.qZA()(),t.TgZ(18,"div",14)(19,"div",15)(20,"label",16),t._uU(21),t.ALo(22,"mytranslate"),t.O4$(),t.TgZ(23,"svg",17),t.ALo(24,"mytranslate"),t._UZ(25,"circle",18)(26,"line",19)(27,"line",20),t.qZA()()(),t.kcU(),t.TgZ(28,"div",15)(29,"div",21)(30,"div",22)(31,"mat-form-field",23)(32,"input",24),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.openDateTimePicker(1))}),t.ALo(33,"mytranslate"),t.qZA(),t.TgZ(34,"button",25),t.NdJ("click",function(a){return t.CHM(e),t.oxw().openDateTimePicker(1),t.KtG(a.stopPropagation())}),t.O4$(),t.TgZ(35,"svg",26),t._UZ(36,"path",27)(37,"path",28)(38,"path",29)(39,"path",30)(40,"path",31)(41,"path",32),t.qZA()(),t.kcU(),t.TgZ(42,"ngx-mat-datetime-picker",33,34)(44,"ngx-mat-datepicker-actions")(45,"button",35),t._uU(46),t.ALo(47,"mytranslate"),t.qZA(),t.TgZ(48,"button",36),t._uU(49,"OK"),t.qZA()()()()(),t.TgZ(50,"div",22)(51,"mat-form-field",23)(52,"input",37),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.openDateTimePicker(0))}),t.ALo(53,"mytranslate"),t.qZA(),t.TgZ(54,"button",38),t.NdJ("click",function(a){return t.CHM(e),t.oxw().openDateTimePicker(0),t.KtG(a.stopPropagation())}),t.O4$(),t.TgZ(55,"svg",26),t._UZ(56,"path",27)(57,"path",28)(58,"path",29)(59,"path",30)(60,"path",31)(61,"path",32),t.qZA()(),t.kcU(),t.TgZ(62,"ngx-mat-datetime-picker",33,39)(64,"ngx-mat-datepicker-actions")(65,"button",35),t._uU(66),t.ALo(67,"mytranslate"),t.qZA(),t.TgZ(68,"button",36),t._uU(69,"OK"),t.qZA()()()()(),t.TgZ(70,"div",40)(71,"button",41),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.clearTime())}),t.O4$(),t.TgZ(72,"svg",42),t._UZ(73,"path",43)(74,"path",44)(75,"path",45)(76,"path",46),t.qZA(),t._uU(77),t.ALo(78,"mytranslate"),t.qZA()()(),t.kcU(),t.TgZ(79,"div",47)(80,"div",48),t._uU(81),t.ALo(82,"mytranslate"),t.qZA(),t.YNc(83,K1,3,3,"div",49),t.qZA()()(),t.TgZ(84,"div",50)(85,"div",51)(86,"label",52),t._uU(87),t.ALo(88,"mytranslate"),t.qZA()(),t.TgZ(89,"div",53)(90,"div",54)(91,"div",55),t._UZ(92,"input",56),t.TgZ(93,"label",57),t._uU(94),t.ALo(95,"mytranslate"),t.qZA()(),t.TgZ(96,"div",58),t._UZ(97,"input",59),t.TgZ(98,"label",60),t._uU(99),t.ALo(100,"mytranslate"),t.qZA()()()()(),t.TgZ(101,"div",61)(102,"div",51)(103,"label",52),t._uU(104),t.ALo(105,"mytranslate"),t.qZA()(),t.TgZ(106,"div",53)(107,"div",54)(108,"div",55),t._UZ(109,"input",62),t.TgZ(110,"label",63),t._uU(111),t.ALo(112,"mytranslate"),t.qZA()(),t.TgZ(113,"div",58),t._UZ(114,"input",64),t.TgZ(115,"label",65),t._uU(116),t.ALo(117,"mytranslate"),t.qZA()()()()(),t.TgZ(118,"div",66)(119,"div",67)(120,"div",68),t._uU(121),t.ALo(122,"mytranslate"),t.qZA()(),t.YNc(123,_b,4,4,"ng-container",0),t.YNc(124,fb,7,4,"ng-template",null,69,t.W1O),t.qZA()(),t.TgZ(126,"div",70)(127,"div",71),t.YNc(128,gb,3,4,"button",72),t.TgZ(129,"button",73),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.saveNewOrConfigHomework(1))}),t._uU(130),t.ALo(131,"mytranslate"),t.qZA()()()()()()()}if(2&n){const e=t.MAs(43),i=t.MAs(63),a=t.MAs(125),r=t.oxw();let s;t.xp6(1),t.Q6J("formGroup",r.form),t.xp6(4),t.hij(" ",t.lcZ(6,36,"lang_auto_cau_hinh_chung")," "),t.xp6(6),t.hij(" ",t.lcZ(12,38,"lang_auto_ten")," "),t.xp6(4),t.s9C("placeholder",t.lcZ(16,40,"lang_auto_nhap_ten")+" ..."),t.xp6(2),t.Q6J("ngIf",r.form.controls.homeworkName.errors),t.xp6(4),t.hij(" ",t.lcZ(22,42,"lang_testbank_test_config_time_assigne_homework")," "),t.xp6(2),t.s9C("matTooltip",t.lcZ(24,44,"lang_homework_add_home_work_startDate_introduce")),t.xp6(9),t.s9C("placeholder",t.lcZ(33,46,"lang_auto_tu")),t.Q6J("max",r.maxDate)("ngxMatDatetimePicker",e),t.xp6(10),t.Q6J("touchUi",!0),t.xp6(4),t.Oqu(t.lcZ(47,48,"lang_auto_dong")),t.xp6(6),t.s9C("placeholder",t.lcZ(53,50,"lang_auto_den")),t.Q6J("max",r.maxDate)("ngxMatDatetimePicker",i),t.xp6(10),t.Q6J("touchUi",!0),t.xp6(4),t.Oqu(t.lcZ(67,52,"lang_auto_dong")),t.xp6(11),t.hij(" ",t.lcZ(78,54,"lang_auto_dat_lai")," "),t.xp6(4),t.hij("",t.lcZ(82,56,"lang_auto_bo_trong_neu_khong_muon_gioi_han_thoi_gian"),"."),t.xp6(2),t.Q6J("ngIf",r.calculatorTimeValidate(null!==(s=r.form.controls.homeworkDeadline.value)&&void 0!==s?s:"",null!==(s=r.form.controls.homeworkStartDate.value)&&void 0!==s?s:"")<=0),t.xp6(4),t.hij(" ",t.lcZ(88,58,"lang_auto_cho_xem_ket_qua")," "),t.xp6(5),t.Q6J("value",1),t.xp6(2),t.hij(" ",t.lcZ(95,60,"lang_auto_khong")," "),t.xp6(3),t.Q6J("value",0),t.xp6(2),t.hij(" ",t.lcZ(100,62,"lang_auto_co")," "),t.xp6(5),t.hij(" ",t.lcZ(105,64,"lang_auto_dang_nhap_de_nop_bai")," "),t.xp6(5),t.Q6J("value",0),t.xp6(2),t.hij(" ",t.lcZ(112,66,"lang_auto_khong")," "),t.xp6(3),t.Q6J("value",1),t.xp6(2),t.hij(" ",t.lcZ(117,68,"lang_auto_co")," "),t.xp6(5),t.hij(" ",t.lcZ(122,70,"lang_auto_giao_cho_lop")," "),t.xp6(2),t.Q6J("ngIf",2==r.form.controls.whoAllow.value)("ngIfElse",a),t.xp6(5),t.Q6J("ngIf",1!=(null==r.homeworkObj?null:r.homeworkObj.isPublished)),t.xp6(1),t.Q6J("disabled",r.form.invalid||r.checkDeadLineValid(r.form.controls.homeworkStartDate.value,r.form.controls.homeworkDeadline.value)<=0),t.xp6(1),t.hij(" ",t.lcZ(131,72,"lang_auto_xuat_ban")," ")}}let W1=(()=>{class n extends St.Q{redirectBackTo(){this.onBack.emit()}openDateTimePicker(e){1==e?this.startTime&&this.startTime.open():this.endTime&&this.endTime.open()}clearTime(){this.form.controls.homeworkDeadline.setValue(""),this.form.controls.homeworkStartDate.setValue("")}clearTimeStart(){this.form.controls.homeworkStartDate.setValue("")}calculatorTimeValidate(e,i){return""!=e&&""!=i?this.timeService.calculationHomeworkTimeWithZeroSecond(e,i):1}checkDeadLineValid(e,i){return""!=e&&""!=i?this.timeService.getDiffFromTwoDateWithZeroSecond(i,e):1}saveNewOrConfigHomework(e){this.isUpdate?this.updateHomework(e):(this.initStatusObj(),this.homeWorkContent=this.createHomeworkEditorData.homework?.content??"",this.uploadImageOfHomeworkService.replaceImageInContent(this.homeWorkContent).subscribe(i=>{null==i.errorMessage?(this.homeWorkContent=i.content,this.createHomework(e)):(this.showErrorSnack(i.errorMessage),this.stopStatusObj())}))}updateHomework(e){let i=this.form.getRawValue(),a=i.homeworkStartDate?this.timeService.formatDateTimeToPostToServer(i.homeworkStartDate):void 0,r=i.homeworkDeadline?this.timeService.formatDateTimeToPostToServer(i.homeworkDeadline):void 0;const s=this.sAztClassroomCheckboxService.getClassroomIdsCheckedInGroup(this.form.controls.classroomFormArray);this.initStatusObj();let l={name:i.homeworkName,startDate:a,deadline:r,mustVerified:i.mustVerified,whenShowAnswer:i.whenShowAnswer,enableUpdateDeadLine:1,classroomIds:2==i.whoAllow?s:void 0,isPublished:e||(null!=this.homeworkObj?this.homeworkObj.isPublished:0)};this.waitDestroy(this.documentConfigService.apiDocumentConfigSaveHomeworkConfigPost(this.homeworkHashId,l).subscribe(c=>{if(1==c.success){let _=this.commonService.getMyParam(this.activeRoute,"cat_id")??"";var d=[];if(c.data?.objs)for(var h=0;h<c.data.objs.length;h++)d.push(c.data?.objs[h].hashId);let x=`/admin/testbank/config-homework/${_??0}/${this.homeworkHashId}`;this.myNavigationWithQueryString(`/admin/testbank/publish-document/1/${_??0}/${JSON.stringify(d)}`,`?backto=${x}`),this.successStatusObj(l.isPublished?"lang_auto_xuat_ban_thanh_cong":"lang_auto_luu_thanh_cong_chua_xuat_ban",!0)}else this.errorStatusObj(c.message??"",!0)}))}createHomework(e){let i=this.form.getRawValue(),a=i.homeworkStartDate?this.timeService.formatDateTimeToPostToServer(i.homeworkStartDate):void 0,r=i.homeworkDeadline?this.timeService.formatDateTimeToPostToServer(i.homeworkDeadline):void 0;this.homeWorkContent=this.zipDataService.convertContentGzip(this.homeWorkContent);const s=this.sAztClassroomCheckboxService.getClassroomIdsCheckedInGroup(this.form.controls.classroomFormArray);if(this.form.invalid)this.showErrorSnack(s.length<=0?"lang_auto_please_select_classroom":"lang_auto_vui_long_nhap_day_du_thong_tin");else{this.initStatusObj();let l=this.userService.getUserObj(),c=JSON.stringify({type:"homework",id:this.homeworkId,user:l.id}),d={name:i.homeworkName,content:this.homeWorkContent,files:this.createHomeworkEditorData.homework?.files??"",startDate:a,deadline:r,mustVerified:i.mustVerified,whenShowAnswer:i.whenShowAnswer,classroomIds:s,isPublished:e,categoryId:this.commonService.getMyParam(this.activeRoute,"cat_id")?Number(this.commonService.getMyParam(this.activeRoute,"cat_id")):0};this.waitDestroy(this.homeworkService.apiHomeworkSaveObjPost(c,d).subscribe(h=>{if(1==h.success){let b=this.commonService.getMyParam(this.activeRoute,"cat_id")??"";const T=this.getMyQueryParam("classroomId"),P=this.getMyQueryParam("programId"),U=this.getMyQueryParam("sessionId");if(T)if(P&&U){const q=h.data?.objs??[];let B;for(let W=0;W<q.length;W++)q[W].classroomId===Number(T)&&(B=q[W]);this.saveDocumentTrainingCenter(Number(T),Number(P),Number(U),B)}else this.commonService.myNavigation(`/admin/student/classroom-details/${T}/1`);else if(d.isPublished){this.successStatusObj("lang_auto_xuat_ban_thanh_cong",!0);var _=[];if(h.data?.objs)for(var x=0;x<h.data.objs.length;x++)_.push(h.data?.objs[x].hashId);let q=`/admin/testbank/config-homework/${b??0}/${this.homeworkHashId}`;this.myNavigationWithQueryString(`/admin/testbank/publish-document/1/${b??0}/${JSON.stringify(_)}`,`?backto=${q}`)}else this.myNavigationWithQueryString("/admin/testbank/document-management/1/0/1",`?backto=/admin/testbank/config-homework/${b??0}/${this.homeworkHashId}`),this.successStatusObj("lang_auto_luu_thanh_cong_chua_xuat_ban",!0);this.successStatusObj()}else this.errorStatusObj(h.message??"",!0)}))}}getHomework(e){this.initStatusObj(),this.waitDestroy(this.documentConfigService.apiDocumentConfigGetHomeworkConfigDataV2Post(e,[]).subscribe(i=>{if(1==i.success){this.classroomWithGroup=i.data?.classroomGroupObjs??[],this.homeworkObj=i.data?.homeworkObj;let a=this.homeworkObj?.classroomId??0;this.classroomObj=a?this.classroomWithGroup.find(s=>s.classroomObjs.some(l=>l.id===a))?.classroomObjs.find(s=>s.id===a):this.classroomWithGroup.length>0&&this.classroomWithGroup[0].classroomObjs.length>0?this.classroomWithGroup[0].classroomObjs[0]:void 0,this.createHomeworkEditorData=this.isUpdate?this.createHomeworkEditorData:this.editorOutputDataService.getOutputData();let r=this.createHomeworkEditorData.homework?.name??this.homeworkObj?.name??"";setTimeout(()=>{this.form.patchValue({homeworkName:r,homeworkStartDate:null!=this.homeworkObj?.startDate?this.homeworkObj?.startDate.toString():"",homeworkDeadline:null!=this.homeworkObj?.deadline?this.homeworkObj?.deadline.toString():"",mustVerified:1==this.homeworkObj?.mustVerified?1:0,whenShowAnswer:1==this.homeworkObj?.whenShowAnswer?1:0,whoAllow:i.data?.hasStudentAnswers&&this.isUpdate?1:2})},0),this.successStatusObj()}else this.errorStatusObj(i.message??"",!0)}))}saveDocumentTrainingCenter(e,i,a,r){this.classroomService.apiClassroomsClassroomIdSessionsSessionIdDocumentsPost(e,a,{name:r?.name,refId:r?.id,type:"homework"}).subscribe(l=>{l?this.commonService.myNavigationWithQueryString(`/admin/student/classroom-details/${e}/3`,`?sessionId=${a}`):this.stopStatusObj()})}fillDataFormToProgram(){const e=this.getMyQueryParam("sessionId");this.checkExamToProgram=!!e,this.checkExamToProgram&&this.paramClassroomService.getProgramTraining().subscribe(i=>{this.programDetailResponse=i;const a=this.programDetailResponse?.sessions??[],r=a.findIndex(b=>b.id===Number(e)),s=this.commonService.myTranslateInstant("lang_business_homework_session"),l=a[r].fromTime,d=new Date(a[r].fromTime??"").getTime()+432e6,h=r===a.length-1?this.timeService.formatDateTimeFillData(new Date(d).toLocaleString("en-GB")):a[r+1].fromTime,x=(a[r].documents?.filter(b=>"homework"===b.type)).length??1;this.form.controls.homeworkName.setValue(`${s} ${r+1}-${x+1}`),l&&this.form.controls.homeworkStartDate.setValue(l),h&&this.form.controls.homeworkDeadline.setValue(h)})}ngOnInit(){super.ngOnInit(),this.waitDestroy((0,dt.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.homeworkHashId=this.commonService.getMyParam(this.activeRoute,"hash_id")??"",this.homeworkHashId?(this.isUpdate=!0,this.getHomework(this.homeworkHashId)):(this.isUpdate=!1,this.getHomework("add_new"))})),this.fillDataFormToProgram(),this.commonService.translateMetaData({title:"lang_cms__config_title",description:"lang_cms_config_homework_description",image:""})}constructor(e,i,a,r,s,l,c,d,h,_,x){super(),this.activeRoute=e,this.timeService=i,this.documentConfigService=a,this.editorOutputDataService=r,this.homeworkService=s,this.userService=l,this.sAztClassroomCheckboxService=c,this.uploadImageOfHomeworkService=d,this.zipDataService=h,this.classroomService=_,this.paramClassroomService=x,this.onBack=new t.vpe,this.permissionTypes=ap.y,this.homeworkId=0,this.homeworkHashId="",this.isUpdate=!1,this.homeWorkContent="",this.createHomeworkEditorData={},this.maxDate=Ce.N.maxDateTimePicker,this.checkExamToProgram=!1,this.classroomWithGroup=[],this.form=new f.cw({homeworkName:new f.NI("",{nonNullable:!0,validators:[f.kI.required,or._.noWhiteSpace]}),homeworkStartDate:new f.NI("",{nonNullable:!0}),homeworkDeadline:new f.NI("",{nonNullable:!0}),mustVerified:new f.NI(0,{nonNullable:!0}),whoAllow:new f.NI(this.isUpdate?1:2,{nonNullable:!0}),whenShowAnswer:new f.NI(0,{nonNullable:!0}),classroomIds:new f.Oe([]),classroomFormArray:new f.Oe([]),isShowCheckClass:new f.NI(!1,{nonNullable:!0})},{validators:[Cf.h.classroomInGroupCheckBoxValidator]})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(O.gz),t.Y36(br.D),t.Y36(Ke.Cq),t.Y36(Hs.O),t.Y36(rp.Lk),t.Y36(ga.U),t.Y36(Tf.f),t.Y36(sp.Z),t.Y36(La.a),t.Y36(va.um),t.Y36(Oo))},n.\u0275cmp=t.Xpm({type:n,selectors:[["main-config-homework"]],viewQuery:function(e,i){if(1&e&&(t.Gf(Y1,5),t.Gf(cl,5)),2&e){let a;t.iGM(a=t.CRH())&&(i.startTime=a.first),t.iGM(a=t.CRH())&&(i.endTime=a.first)}},outputs:{onBack:"onBack"},features:[t._Bn([{provide:$a.fM,useClass:op.WG,deps:[Lc.Ad,Ou.o8]},{provide:$a.ab,useFactory:wf.hx,deps:[br.D]}]),t.qOj],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["doneLoading",""],[1,"intro-y","mt-5"],[3,"formGroup"],[1,"azt-config-document","mx-auto","px-3",2,"max-width","1100px"],[1,"setting-basic"],[1,"text-md","uppercase","font-medium"],[1,"box","mt-2","p-5"],["id","azt-config-name",1,"grid","grid-cols-12"],[1,"col-span-12","lg:col-span-12"],["for","homework-name",1,"form-label","mb-0","font-medium","flex","items-center"],[1,"setting-input"],["id","homework-name","formControlName","homeworkName","type","text",1,"form-control",3,"placeholder"],["class","text-xs text-danger mt-2",4,"ngIf"],["id","azt-config-time-assignment",1,"grid","grid-cols-12","mt-4"],[1,"col-span-12"],["for","regular-form-1",1,"form-label","mb-0","font-medium","flex","items-center"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","ml-2",3,"matTooltip"],["cx","12","cy","12","r","10"],["x1","12","y1","16","x2","12","y2","12"],["x1","12","y1","8","x2","12.01","y2","8"],[1,"grid","grid-cols-12","gap-3"],[1,"col-span-12","md:col-span-5"],["appearance","outline"],["azt-track-service","main-config-7OYF4TAsq1","matInput","","formControlName","homeworkStartDate","readonly","",3,"placeholder","max","ngxMatDatetimePicker","click"],["azt-track-service","main-config-wVzabbXyPl2","matSuffix","",2,"font-size","18px",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide"],["d","M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5"],["d","M16 2v4"],["d","M8 2v4"],["d","M3 10h5"],["d","M17.5 17.5 16 16.25V14"],["d","M22 16a6 6 0 1 1-12 0 6 6 0 0 1 12 0Z"],[3,"touchUi"],["startTime",""],["mat-raised-button","","color","secondary","ngxMatDatepickerCancel",""],["mat-raised-button","","color","primary","ngxMatDatepickerApply",""],["azt-track-service","main-config-mBwAoax2xyu","matInput","","formControlName","homeworkDeadline","readonly","",3,"placeholder","max","ngxMatDatetimePicker","click"],["azt-track-service","main-config-L6psEhMGCUO","matSuffix","",2,"font-size","18px",3,"click"],["endTime",""],[1,"col-span-6","md:col-span-2"],["azt-track-service","main-config-_41QHswfgPw",1,"btn","btn-outline-secondary","w-full",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","mr-2"],["d","M10 2h4"],["d","M12 14v-4"],["d","M4 13a8 8 0 0 1 8-7 8 8 0 1 1-5.3 14L4 17.6"],["d","M9 17H4v5"],[1,"text-xs","mt-2"],[1,"text-slate-500","mt-1"],["class","text-danger mt-1",4,"ngIf"],["id","azt-config-when-result",1,"grid","grid-cols-12","mt-4"],[1,"col-span-12","lg:col-span-5"],[1,"form-label","mb-0","font-medium","flex","items-center"],[1,"col-span-12","lg:col-span-7"],[1,"flex","flex-col","sm:flex-row"],[1,"form-check","mr-8"],["id","whenShowAnswer-off","type","radio","formControlName","whenShowAnswer",1,"form-check-input",3,"value"],["for","whenShowAnswer-off",1,"form-check-label"],[1,"form-check","mr-8","mt-2","sm:mt-0"],["id","whenShowAnswer-tested","type","radio","formControlName","whenShowAnswer",1,"form-check-input",3,"value"],["for","whenShowAnswer-tested",1,"form-check-label","flex","items-center"],["id","azt-config-login-require",1,"grid","grid-cols-12","mt-4"],["id","mustVerified-off","type","radio","formControlName","mustVerified",1,"form-check-input",3,"value"],["for","mustVerified-off",1,"form-check-label"],["id","mustVerified-tested","type","radio","formControlName","mustVerified",1,"form-check-input",3,"value"],["for","mustVerified-tested",1,"form-check-label","flex","items-center"],["id","azt-config-who-allow",1,"grid","grid-cols-12","mt-4"],[1,"col-span-12","lg:col-span-5","pr-5"],[1,"mb-0","font-medium","flex","items-center"],["elseAllowed",""],[1,"my-5"],[1,"text-right"],["azt-track-service","main-config-xaAyYXPj2ZT","class","btn btn-pending w-24 mr-2",3,"disabled","click",4,"ngIf"],["azt-track-service","main-config-3CEX8CXtLDk",1,"btn","w-24","btn-primary",3,"disabled","click"],[1,"text-xs","text-danger","mt-2"],[1,"text-danger","mt-1"],[1,"col-span-12","mt-4"],[1,"azt-list-classroom"],[3,"form","classroomGroupData","homeworkObj","permissionName"],[1,"bg-slate-100","dark:bg-darkmode-600","rounded-md","p-3"],[1,"text-md"],[1,"text-md","font-medium"],["azt-track-service","main-config-xaAyYXPj2ZT",1,"btn","btn-pending","w-24","mr-2",3,"disabled","click"]],template:function(e,i){if(1&e&&(t.YNc(0,Eu,1,0,"azt-loading-effect",0),t.YNc(1,xb,132,74,"ng-template",null,1,t.W1O)),2&e){const a=t.MAs(2);t.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a)}},dependencies:[D.O5,vr.lW,yd.Nt,rs.KE,rs.R9,Mi.gM,$a.rZ,$a.T$,$a.c_,$a.dW,$a.cL,f._Y,f.Fj,f._,f.JJ,f.JL,f.sg,f.u,si.l,oo.M,wd._,jt.JV],encapsulation:2}),n})();var Ya=M(49671);class V1{static priceValidator(o){const i=o;if("NONE"===i.controls.priceForAction.value)return null;let a=parseInt(i.controls.price.value.replace(/\./g,""),10);return a=isNaN(a)?0:a,a>=1e4?null:(i.controls.price?.setErrors({priceValidator:!0}),{identityRevealed:!0})}}class X1{getExamPriceRequest(){let o=this.price;return"NONE"==this.priceForAction&&this.price<=0&&(o=1e4),{priceForAction:this.priceForAction,price:o}}constructor(o,e){this.priceForAction=o,this.price=e}}var Cd=M(87325),bb=M(11460),vb=M(40687),Om=M(19167),Em=M(26425),kf=M(18727),qr=M(76024);let yb=(()=>{class n{constructor(e,i,a,r){this.el=e,this.renderer=i,this.decimalPipe=a,this.commonService=r,this.currencyChars=new RegExp("[.,]","g")}ngOnInit(){this.format(this.el.nativeElement.value)}onInput(e){this.format(e)}onPaste(e){e.preventDefault(),this.format(e.clipboardData?.getData("text/plain")??"")}format(e){const i=parseInt(String(e).replace(this.currencyChars,"")),a=this.commonService.formatMoney(i.toString());this.renderer.setProperty(this.el.nativeElement,"value",a)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.SBq),t.Y36(t.Qsj),t.Y36(D.JJ),t.Y36(mi.z))},n.\u0275dir=t.lG2({type:n,selectors:[["","currencyFormat",""]],hostBindings:function(e,i){1&e&&t.NdJ("input",function(r){return i.onInput(r.target.value)})("paste",function(r){return i.onPaste(r)})}}),n})();function wb(n,o){1&n&&(t.TgZ(0,"div",23),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_config_enter_price_greater_than_10000_VND")," "))}function t0(n,o){if(1&n&&(t.TgZ(0,"div",17)(1,"div",18)(2,"label",19),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()(),t.TgZ(5,"div",20),t._UZ(6,"input",21),t.YNc(7,wb,3,3,"div",22),t.qZA()()),2&n){const e=t.oxw();t.xp6(3),t.hij(" ",t.lcZ(4,2,"lang_config_enter_price_vnd")," "),t.xp6(4),t.Q6J("ngIf",e.form.controls.price.errors)}}let e0=(()=>{class n extends St.Q{ngOnInit(){super.ngOnInit()}}return n.\u0275fac=function(){let o;return function(i){return(o||(o=t.n5z(n)))(i||n)}}(),n.\u0275cmp=t.Xpm({type:n,selectors:[["config-document-price"]],inputs:{form:"form"},features:[t.qOj],decls:31,vars:23,consts:[[1,"config-document-price"],[3,"formGroup"],[1,"grid","grid-cols-12","gap-4"],[1,"col-span-12","lg:col-span-5"],[1,"font-medium","flex","items-center"],[1,"leading-relaxed","text-slate-500","text-xs","mt-1","pr-5"],["href","https://docs.azota.vn/docs/huong-dan-su-dung/thi-online/cai-dat-gia-khi-hoc-sinh-vao-thi-lam-de/","target","_blank",1,"font-medium","btn-text-primary"],[1,"col-span-12","lg:col-span-7"],[1,"flex","flex-col","sm:flex-row"],[1,"form-check","mr-8"],["id","price-free","type","radio","formControlName","priceForAction",1,"form-check-input",3,"value"],["for","price-free",1,"form-check-label"],["id","price-exam-participation","type","radio","formControlName","priceForAction",1,"form-check-input",3,"value"],["for","price-exam-participation",1,"form-check-label"],["id","price-answer-viewing","type","radio","formControlName","priceForAction",1,"form-check-input",3,"value"],["for","price-answer-viewing",1,"form-check-label"],["class","col-span-12",4,"ngIf"],[1,"col-span-12"],[1,"font-medium"],["for","enter-price",1,"form-label","flex","items-center"],[1,"setting-input"],["type","text","id","enter-price","appOnlyNumber","","currencyFormat","","formControlName","price",1,"form-control"],["class","text-xs text-danger mt-1",4,"ngIf"],[1,"text-xs","text-danger","mt-1"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"form",1)(2,"div",2)(3,"div",3)(4,"label",4),t._uU(5),t.ALo(6,"mytranslate"),t.qZA(),t.TgZ(7,"div",5),t._uU(8),t.ALo(9,"mytranslate"),t.TgZ(10,"a",6),t._uU(11),t.ALo(12,"mytranslate"),t.qZA()()(),t.TgZ(13,"div",7)(14,"div",8)(15,"div",9),t._UZ(16,"input",10),t.TgZ(17,"label",11),t._uU(18),t.ALo(19,"mytranslate"),t.qZA()(),t.TgZ(20,"div",9),t._UZ(21,"input",12),t.TgZ(22,"label",13),t._uU(23),t.ALo(24,"mytranslate"),t.qZA()(),t.TgZ(25,"div",9),t._UZ(26,"input",14),t.TgZ(27,"label",15),t._uU(28),t.ALo(29,"mytranslate"),t.qZA()()()(),t.YNc(30,t0,8,4,"div",16),t.qZA()()()),2&e&&(t.xp6(1),t.Q6J("formGroup",i.form),t.xp6(4),t.hij(" ",t.lcZ(6,11,"lang_config_price_configuration")," "),t.xp6(3),t.hij(" ",t.lcZ(9,13,"lang_config_price_configuration_description")," "),t.xp6(3),t.Oqu(t.lcZ(12,15,"lang_auto_tim_hieu_them")),t.xp6(5),t.Q6J("value","NONE"),t.xp6(2),t.Oqu(t.lcZ(19,17,"lang_config_free")),t.xp6(3),t.Q6J("value","TAKE_TEST"),t.xp6(2),t.Oqu(t.lcZ(24,19,"lang_config_fee_for_exam_participation")),t.xp6(3),t.Q6J("value","SHOW_EXPLAIN"),t.xp6(2),t.Oqu(t.lcZ(29,21,"lang_config_fee_for_answer_viewing")),t.xp6(2),t.Q6J("ngIf","NONE"!==i.form.controls.priceForAction.value))},dependencies:[D.O5,f._Y,f.Fj,f._,f.JJ,f.JL,f.sg,f.u,qr.Y,oo.M,yb,jt.JV],encapsulation:2}),n})();function Cb(n,o){1&n&&t._UZ(0,"azt-loading-effect")}function Tb(n,o){1&n&&(t.TgZ(0,"div",24),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_vui_long_nhap_ten_de_thi")," "))}function kb(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",25)(1,"config-level-subject",26),t.NdJ("sendLogPredictSubject",function(a){t.CHM(e);const r=t.oxw(2);return t.KtG(r.getLogPredictSubject(a))}),t.qZA()()}if(2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("form",e.form)("questionContents",e.questionContent)("schoolLevelObjs",e.schoolLevelObjs)("examSchoolLogObj",e.examSchoolLogObj)}}function Ab(n,o){if(1&n&&(t.TgZ(0,"div",27),t._UZ(1,"config-purpose-exam",28),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("purposeList",e.listPurposeObjs)("form",e.form)}}function Sb(n,o){if(1&n&&(t.TgZ(0,"div",25),t._UZ(1,"config-document-price",29),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("form",e.form)}}function ss(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",3)(1,"form",4)(2,"div",5)(3,"div",6)(4,"h3",7),t._uU(5),t.ALo(6,"mytranslate"),t.qZA(),t.TgZ(7,"div",8)(8,"div",9)(9,"div",10)(10,"label",11),t._uU(11),t.ALo(12,"mytranslate"),t.qZA()(),t.TgZ(13,"div",10)(14,"div",12),t._UZ(15,"input",13),t.ALo(16,"mytranslate"),t.qZA(),t.YNc(17,Tb,3,3,"div",14),t.qZA()(),t.YNc(18,kb,2,4,"div",15),t.YNc(19,Ab,2,2,"div",16),t.YNc(20,Sb,2,1,"div",15),t.TgZ(21,"div",17)(22,"div",10)(23,"label",18),t._uU(24),t.ALo(25,"mytranslate"),t.qZA()(),t.TgZ(26,"div",10)(27,"div",12),t._UZ(28,"textarea",19),t.ALo(29,"mytranslate"),t.qZA()()()(),t.TgZ(30,"div",20)(31,"div",21)(32,"button",22),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.handleDestroy())}),t._uU(33),t.ALo(34,"mytranslate"),t.qZA(),t.TgZ(35,"button",23),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.handleSubmitData())}),t._uU(36),t.ALo(37,"mytranslate"),t.qZA()()()()()()()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("formGroup",e.form),t.xp6(4),t.hij(" ",t.lcZ(6,13,"lang_auto_cau_hinh_chung")," "),t.xp6(6),t.hij(" ",t.lcZ(12,15,"lang_auto_ten")," "),t.xp6(4),t.s9C("placeholder",t.lcZ(16,17,"lang_auto_nhap_ten")+" ..."),t.xp6(2),t.Q6J("ngIf",e.form.controls.generalTitle.errors),t.xp6(1),t.Q6J("ngIf",!e.checkExamToProgram),t.xp6(1),t.Q6J("ngIf",!e.checkExamToProgram),t.xp6(1),t.Q6J("ngIf",!e.isBusinessDomain),t.xp6(4),t.hij(" ",t.lcZ(25,19,"lang_auto_mo_ta")," "),t.xp6(4),t.s9C("placeholder",t.lcZ(29,21,"lang_core_nhap_mo_ta")+" ..."),t.xp6(5),t.hij(" ",t.lcZ(34,23,"lang_auto_huy")," "),t.xp6(2),t.Q6J("disabled",e.form.invalid||(4==e.form.controls.purposeExam.value||8==e.form.controls.purposeExam.value||12==e.form.controls.purposeExam.value)&&""===e.form.controls.purposeNote.value.trim()),t.xp6(1),t.hij(" ",t.lcZ(37,25,"lang_auto_luu")," ")}}function Ob(n,o){if(1&n&&(t.TgZ(0,"div",30)(1,"div",31)(2,"div",32)(3,"span",33),t._UZ(4,"azt-loading-ui"),t.qZA(),t.TgZ(5,"div",34),t._uU(6),t.qZA()()()()),2&n){const e=t.oxw();t.xp6(6),t.Oqu(e.logConfig.msg)}}let Eb=(()=>{class n extends St.Q{processConvertBase64OfMathJaxToCdnUrl(){var e=this;return(0,Ya.Z)(function*(){if(e.dataSave.exam&&e.dataSave.exam.questionObj.listQuestions){let i=[];for(const s of e.dataSave.exam?.questionObj.listQuestions)i.push({categoryId:s.categoryId,groupId:s.groupId,name:s.name??"none",metadata:s.metadata,isImage:s.isImage,questionContent:s.questionContent,answerMedia:s.answerMedia,questionText:s.questionText,answerType:s.answerType,answerConfig:s.answerConfig,coordinates:s.coordinates,answerResult:s.answerResult,totalQuestion:s.totalQuestion,tags:s.tags??[],mediaId:s.mediaId,mediaMeta:s.mediaMeta,attachments:s.attachments,version:s.version,isFixAns:s.isFixAns,groupType:s.groupType,__path:s.__path});let a=(s,l)=>{let c=e.commonService.myTranslateInstant("lang_auto_dang_xu_ly_tep_tin");e.logConfig.msg=`${c} ${Math.floor(s/l*20)+80-1}%`};const r=yield e.sAztSaveProcessService.convertBase64OfMathJaxToCdnUrlInQuestions(i,a);e.lstEncodeQuestions=r}})()}processSaveQuestions(e,i,a){var r=this.lstEncodeQuestions.length;let s=e+100>r?r:e+100,l=this.lstEncodeQuestions.slice(e,s)??[];l.length>0?this.saveQuestionObjs(l,i).then(c=>{if(c.examConfigs&&c.examConfigs.length>0){let d=a.concat(c.examConfigs);this.processSaveQuestions(s,c.indexSaved,d)}else this.countProcess=0,this.logConfig.status=!1,this.logConfig.msg="",this.showErrorSnack("lang_auto_khong_luu_duoc_noi_dung_cau_hoi_trong_de_vui_long_kiem_tra_lai")}):this.saveExamObj(a)}saveExamObj(e){var i=this;if(this.dataSave.exam){let r=!1;this.saveParts=this.saveParts.map(q=>{const B=q.split("_____");return-1!==q.toLocaleLowerCase().indexOf(this.commonService.myTranslateInstant("lang_auto_ngau_nhien")??"ng\u1eabu nhi\xean")&&(r=!0),1===B.length?B[0]:B[1]});let s=this.form.getRawValue(),l=this.userService.getUserObj(),c=JSON.stringify({type:"exam",id:0,user:l.id});if(0==s.purposeExam)return void this.showErrorSnack("lang_testbank_please_choose_purpose_exam");this.dataSave.exam.examObj.scoringMethod="1",this.dataSave.exam.examObj.name=s.generalTitle,this.dataSave.exam.examObj.examConfigs=JSON.stringify(e),this.dataSave.exam.examObj.description=s.generalDescription,this.dataSave.exam.examObj.editorStatus=2,this.dataSave.exam.examObj.metadata=JSON.stringify(this.saveParts),this.dataSave.exam.examObj.isRandomExam=r,this.dataSave.exam.examObj.schoolLevelId=s.schoolLevel,this.dataSave.exam.examObj.schoolSubjectId=s.schoolSubject,this.dataSave.exam.examObj.purposeId=s.purposeExam,this.dataSave.exam.examObj.purposeNote=s.purposeNote;const d=this.getMyQueryParam("classroomId"),h=this.getMyQueryParam("programId"),_=this.getMyQueryParam("sessionId"),x=this.getMyQueryParam("indexSession"),b=this.programDetailResponse?.sessions??[];let T,P;if(this.checkExamToProgram&&b.length){const{currentObj:q,nextIndex:B,nextObj:W}=this.paramClassroomService.findCurrentAndNextSession(b,Number(_)),G=432e6,nt=new Date(q?.fromTime??"").getTime()+G;T=q?.fromTime,P=B?W?.fromTime:this.timeService.formatDateTimeFillData(new Date(nt).toLocaleString("en-GB"))}const U=new X1(this.form.controls.priceForAction.value,this.commonService.formatMoneyToNumber(this.form.controls.price.value)).getExamPriceRequest();var a={id:this.dataSave.exam.examObj.id??0,categoryId:this.dataSave.exam.examObj.categoryId??0,scoringMethod:this.dataSave.exam.examObj.scoringMethod,name:this.dataSave.exam.examObj.name??"",description:this.dataSave.exam.examObj.description,examConfigs:this.dataSave.exam.examObj.examConfigs,suggestions:this.dataSave.exam.examObj.suggestions,labelsUrl:this.dataSave.exam.examObj.labelsUrl,abcdLabelPos:this.dataSave.exam.examObj.abcdLabelPos,questionLabelMap:this.dataSave.exam.examObj.questionLabelMap,firstInGroupIndexes:this.dataSave.exam.examObj.firstInGroupIndexes,totalExam:this.dataSave.exam.examObj.totalExam??0,cdnExamFile:this.dataSave.exam.examObj.cdnExamFile,cdnEditorFile:this.dataSave.exam.examObj.cdnEditorFile,trackEdit:this.dataSave.exam.examObj.trackEdit,examHeader:this.dataSave.exam.examObj.examHeader,expandInfoObj:this.dataSave.exam.examObj.expandInfoObj,cutData:void 0,editorStatus:this.dataSave.exam.examObj.editorStatus,startQuestionIndex:this.dataSave.exam.examObj.startQuestionIndex,metadata:this.dataSave.exam.examObj.metadata,isRandomExam:this.dataSave.exam.examObj.isRandomExam,schoolLevelId:this.dataSave.exam.examObj.schoolLevelId,schoolSubjectId:this.dataSave.exam.examObj.schoolSubjectId,purposeId:this.dataSave.exam.examObj.purposeId,purposeNote:this.dataSave.exam.examObj.purposeNote,predictLogRequestObj:this.predictLogRequestObj,classroomIds:d?[Number(d)]:void 0,startTime:this.checkExamToProgram?T:void 0,endTime:this.checkExamToProgram?P:void 0,isPublished:this.checkExamToProgram?1:void 0,minutes:this.checkExamToProgram?60:void 0,examPriceConfigObj:U};this.examService.apiExamSaveObjPost(a,c).subscribe(function(){var q=(0,Ya.Z)(function*(B){if(B.success){const W=B.data?.obj;let G=[];if(i.dataSave.exam?.examConfig.forEach(nt=>{nt.oldId&&G.push(nt.oldId)}),G.length&&i.listQuestionIdCreateByAI.length){let nt={selectQuestionIds:G,suggestQuestionIds:i.listQuestionIdCreateByAI};yield i.saveLogQuestionsCreateByAI(nt)}if(i.backToLink=`/admin/testbank/azota-editor/${null!=i.cur_cateId?i.cur_cateId:0}`,!i.commonService.isNullUndefinedOrEmpty(x)&&!d)return i.programFormService.ExamExerciseOfProgramToSessionStorage(W?.id??0,W?.name??"","exam"),void(window.location.href=i.commonService.getLocalRouter(`/business/edit-educational-program/${h}?indexSession=${x}`));d?h&&_?i.saveDocumentTrainingCenter(Number(d),Number(h),Number(_),W):window.location.href=i.commonService.getLocalRouter(`/admin/testbank/action-online-offline/${null!=i.cur_cateId?i.cur_cateId:0}/${W?.hashId}?backto=${i.backToLink}&isNewDocument=1&classroomId=${d}`):window.location.href=i.commonService.getLocalRouter(`/admin/testbank/action-online-offline/${null!=i.cur_cateId?i.cur_cateId:0}/${W?.hashId}?backto=${i.backToLink}&isNewDocument=1`)}});return function(B){return q.apply(this,arguments)}}())}}saveQuestionObjs(e,i){return new Promise(a=>{this.questionService.apiQuestionSaveObjsV2Post({listQuestions:e}).subscribe(r=>{if(this.dataSave.exam&&1===r.success&&r.data?.objs){const s=[];r.data.objs.forEach((l,c)=>{const d=this.dataSave.exam?.examConfig.find(_=>_.name==l.name);if(s.push({id:l.id,name:l.name,groupId:l.groupId,scorePerQuestion:d?.point||1,totalQuestion:1,sort:c+i}),e[c]){const _=e[c];if(_.__path&&_.__path.length>0){const x=_.__path.split("=>")[0].trim();this.saveParts.includes(x)||this.saveParts.push(x)}else this.saveParts.push(`[@Q${l.id}: C\xe2u ${c+i+1}]`)}}),a({indexSaved:r.data?.objs?.length+i,examConfigs:s})}else a({indexSaved:i,examConfigs:[]})})})}saveLogQuestionsCreateByAI(e){return new Promise(i=>{this.waitDestroy(this.aiService.apiAiLogQuestionsPost(e).subscribe(a=>{i()}))})}startMainProcessSave(){this.processConvertBase64OfMathJaxToCdnUrl().then(()=>{this.dataSave.exam&&this.dataSave.exam.questionObj&&this.processSaveQuestions(0,0,[])}).catch(e=>{this.logConfig.status=!1,this.logConfig.msg="",this.showErrorSnack(this.commonService.myTranslateInstant("lang_auto_xay_ra_loi_trong_qua_trinh_xu_ly_hinh_anh_cua_de_thi")??""),this.stopStatusObj()})}handleSubmitData(){if(this.logConfig.status)this.commonService.snackError("lang_core_qua_trinh_luu_de_dang_dien_ra");else if(this.logConfig.status=!0,this.logConfig.msg=this.commonService.myTranslateInstant("lang_auto_dang_luu_du_lieu_de_thi")??"",this.countProcess=0,this.dataSave.exam&&this.dataSave.exam.questionObj.listQuestions){const e=this.dataSave.exam.questionObj.listQuestions;let i=this.commonService.myTranslateInstant("lang_auto_xay_ra_loi_trong_qua_trinh_xu_ly_hinh_anh_cua_de_thi")??"";this.questionSaveService.convertQuestions(e,this.dataSave.exam.rootQuests,(a,r=i,s)=>{this.logConfig.status=!1,this.logConfig.msg="",this.showErrorSnack(r),s&&this.stopStatusObj()}).then(()=>{this.startMainProcessSave()})}}handleDestroy(){this.onBack.emit()}getLogPredictSubject(e){this.predictLogRequestObj=e}getSubjectAndLevel(){this.initStatusObj(),this.waitDestroy(this.commonListService.apiCommonListSubjectAndLevelsGet(this.commonService.getBusinessDomainUrl()).subscribe(e=>{1==e.success?(this.examSchoolLogObj=e.data?.examSchoolLogObj,this.schoolLevelObjs=e.data?.schoolLevelSubjectObjs??[],this.getListPurposeExam()):this.errorStatusObj(e.message??"")}))}getListPurposeExam(){this.initStatusObj(),this.waitDestroy(this.commonListService.apiCommonListExamPurposesGet().subscribe(e=>{e.success?(this.listPurposeObjs=e.data?.objs??[],this.successStatusObj()):this.errorStatusObj(e.message??"",!0)}))}saveDocumentTrainingCenter(e,i,a,r){this.classroomService.apiClassroomsClassroomIdSessionsSessionIdDocumentsPost(e,a,{name:r?.name,refId:r?.id,type:"exam"}).subscribe(l=>{l?window.location.href=this.commonService.getLocalRouter(`/admin/student/classroom-details/${e}/3?sessionId=${a}`):this.stopStatusObj()})}constructor(e,i,a,r,s,l,c,d,h,_,x,b,T,P,U,q){super(),this.aiService=e,this.editorOutputDataService=i,this.activeRoute=a,this.questionService=r,this.examService=s,this.userService=l,this.questionSaveService=c,this.commonListService=d,this.partQuestionSearchTextService=h,this.sAztSaveProcessService=_,this.classroomService=x,this.paramClassroomService=b,this.timeService=T,this.browserStorageService=P,this.zipDataService=U,this.programFormService=q,this.listQuestionIdCreateByAI=[],this.onBack=new t.vpe,this.logConfig={},this.cur_cateId=0,this.backToLink="",this.dataSave={},this.newListUrls=[],this.base64ContentCount=0,this.countProcess=0,this.actionRunAfterConvert=[],this.saveParts=[],this.schoolLevelObjs=[],this.questionContent=[],this.listPurposeObjs=[],this.predictLogRequestObj={predictSchoolSubjectId:0,acceptPredictStatus:0,predictByTotalQuestion:0},this.lstEncodeQuestions=[],this.checkExamToProgram=!1,this.questionSaveService.callbackBase64ToCanvas=(B,W)=>{let G=this.commonService.myTranslateInstant("lang_auto_dang_xu_ly_hinh_anh_cho_de_thi");this.logConfig.msg=`${G} ${Math.floor(B/W*50)}%`},this.questionSaveService.callbackUploadImage=(B,W)=>{let G=this.commonService.myTranslateInstant("lang_auto_dang_xu_ly_hinh_anh_cho_de_thi");this.logConfig.msg=`${G} ${Math.floor(B/W*30)+50}%`},this.form=new f.cw({generalTitle:new f.NI("",{nonNullable:!0,validators:[f.kI.required,or._.noWhiteSpace]}),generalDescription:new f.NI("",{nonNullable:!0}),schoolLevel:new f.NI(0,{nonNullable:!0,validators:[f.kI.required,f.kI.min(1)]}),schoolSubject:new f.NI(0,{nonNullable:!0,validators:[f.kI.required,f.kI.min(1)]}),purposeExam:new f.NI(0,{nonNullable:!0,validators:[f.kI.required,f.kI.min(1)]}),purposeNote:new f.NI("",{nonNullable:!0}),price:new f.NI("",{nonNullable:!0}),priceForAction:new f.NI("NONE",{nonNullable:!0})},{validators:[V1.priceValidator]})}fillDataFormToProgram(){const e=this.getMyQueryParam("sessionId"),i=this.getMyQueryParam("indexSession"),a=this.getMyQueryParam("programId");if(i){const r=this.browserStorageService.getSessionStorage(`${this.programFormService.key+a}`);if(r){const s=this.zipDataService.decodeContentGzip(r),l=this.castJsonToObj(s),c=this.commonService.myTranslateInstant("lang_business_exam_session");this.form.controls.generalTitle.setValue(`${c} ${(Number(i)??0)+1}-${l?.sessionFormArray[i].documentObjs.length+1}`),this.form.controls.schoolLevel.setValue(l?.generalFormGroup.schoolLevelId??0),this.form.controls.schoolSubject.setValue(l?.generalFormGroup.schoolSubjectId??0),this.form.controls.purposeExam.setValue(12);const d=this.commonService.myTranslateInstant("lang_business_exam_by_curriculum")??"";this.form.controls.purposeNote.setValue(d)}}else{if(this.checkExamToProgram=!!e,!this.checkExamToProgram)return;this.paramClassroomService.getProgramTraining().subscribe(r=>{this.programDetailResponse=r;const s=this.programDetailResponse?.sessions??[],{currentObj:c}=this.paramClassroomService.findCurrentAndNextSession(s,Number(e)),d=this.commonService.myTranslateInstant("lang_business_exam_session"),_=c?.documents?.filter(b=>"exam"===b.type)?.length??1;this.form.controls.generalTitle.setValue(`${d} ${c?.sort??1}-${_+1}`),this.form.controls.schoolLevel.setValue(this.programDetailResponse?.program?.schoolLevelId??0),this.form.controls.schoolSubject.setValue(this.programDetailResponse?.program?.schoolSubjectId??0),this.form.controls.purposeExam.setValue(12);const x=this.commonService.myTranslateInstant("lang_business_exam_by_curriculum")??"";this.form.controls.purposeNote.setValue(x)})}}ngOnInit(){super.ngOnInit(),this.cur_cateId=this.commonService.getMyParam(this.activeRoute,"cat_id"),this.dataSave=this.editorOutputDataService.getOutputData(),this.fillDataFormToProgram(),this.questionContent=[],this.dataSave.exam?.questionObj.listQuestions?.forEach((a,r)=>{r<25&&this.questionContent.push(this.partQuestionSearchTextService.partQuestionSearchTextByQuestionForm(a))}),this.getSubjectAndLevel();let i=this.dataSave.exam?.examObj.name??this.dataSave.homework?.name??"";i&&this.form.controls.generalTitle.setValue(i)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(ba.pT),t.Y36(Hs.O),t.Y36(O.gz),t.Y36(Ke.aE),t.Y36(Ke.Oe),t.Y36(ga.U),t.Y36(xa),t.Y36(Cd.o7),t.Y36(bb.r),t.Y36(vb.a),t.Y36(va.um),t.Y36(Oo),t.Y36(br.D),t.Y36(No.n),t.Y36(La.a),t.Y36(Om.t))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-info-general"]],inputs:{listQuestionIdCreateByAI:"listQuestionIdCreateByAI"},outputs:{onBack:"onBack"},features:[t.qOj],decls:4,vars:3,consts:[[4,"ngIf","ngIfElse"],["doneLoading",""],["style","width: 100vw; height: 100vh; position: fixed; z-index: 9999; top: 0; left: 0; display: flex; justify-content: center; align-items: center; background-color: rgba(0, 0, 0, 0.4)",4,"ngIf"],[1,"intro-y","mt-8","p-3"],[3,"formGroup"],[1,"mx-auto",2,"max-width","1000px"],[1,"setting-block"],[1,"text-md","uppercase","font-medium"],[1,"box","mt-2","p-5"],["id","azt-config-name",1,"grid","grid-cols-12"],[1,"col-span-12","lg:col-span-12"],["for","general-name",1,"form-label","mb-0","font-medium","flex","items-center"],[1,"setting-input"],["id","general-name","formControlName","generalTitle","type","text",1,"form-control",3,"placeholder"],["class","mt-2 text-danger text-xs fade",4,"ngIf"],["class","mt-4",4,"ngIf"],["class","mt-2",4,"ngIf"],["id","azt-config-desc",1,"grid","grid-cols-12","mt-4"],["for","general-desc",1,"form-label","mb-0","font-medium","flex","items-center"],["id","general-desc","formControlName","generalDescription",1,"form-control","w-full",2,"height","150px",3,"placeholder"],[1,"mt-5"],[1,"text-right"],["azt-track-service","info-general-j9RyDEucWp",1,"btn","btn-secondary","w-24","mr-2",3,"click"],["azt-track-service","info-general-ZAzZ6aTX1b",1,"btn","w-24","btn-primary",3,"disabled","click"],[1,"mt-2","text-danger","text-xs","fade"],[1,"mt-4"],[3,"form","questionContents","schoolLevelObjs","examSchoolLogObj","sendLogPredictSubject"],[1,"mt-2"],[3,"purposeList","form"],[3,"form"],[2,"width","100vw","height","100vh","position","fixed","z-index","9999","top","0","left","0","display","flex","justify-content","center","align-items","center","background-color","rgba(0, 0, 0, 0.4)"],[2,"text-align","center","color","#000000"],[2,"margin-bottom","10px"],[1,"w-4","h-4","inline-block","mr-2"],[2,"font-size","20px","margin-top","10px","background-color","#f0f8ffa3","padding","10px","border-radius","5px"]],template:function(e,i){if(1&e&&(t.YNc(0,Cb,1,0,"azt-loading-effect",0),t.YNc(1,ss,38,27,"ng-template",null,1,t.W1O),t.YNc(3,Ob,7,1,"div",2)),2&e){const a=t.MAs(2);t.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a),t.xp6(3),t.Q6J("ngIf",i.logConfig.status)}},dependencies:[D.O5,f._Y,f.Fj,f.JJ,f.JL,f.sg,f.u,si.l,oo.M,oi.n,Em.Z,kf.u,e0,jt.JV],encapsulation:2}),n})();function o0(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_vui_long_nhap_so_cau")," "))}function Mb(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_vui_long_nhap_so_cau_lon_hon_0")," "))}function Ib(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_please_enter_a_number_less_than_or_equal_to")+" 120"," "))}function Lb(n,o){if(1&n&&(t.TgZ(0,"div",28),t.YNc(1,o0,3,3,"span",0),t.YNc(2,Mb,3,3,"span",0),t.YNc(3,Ib,3,3,"span",0),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.form.controls.amountTemplateOriginalA4.errors.required),t.xp6(1),t.Q6J("ngIf",e.form.controls.amountTemplateOriginalA4.errors.min),t.xp6(1),t.Q6J("ngIf",e.form.controls.amountTemplateOriginalA4.errors.max)}}function Pb(n,o){if(1&n&&(t.TgZ(0,"div",24)(1,"label",25),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t._UZ(4,"input",26),t.YNc(5,Lb,4,3,"div",27),t.qZA()),2&n){const e=t.oxw(2);t.xp6(2),t.hij(" ",t.lcZ(3,3,"lang_auto_nhap_so_cau")," "),t.xp6(2),t.Q6J("value",1),t.xp6(1),t.Q6J("ngIf",e.form.controls.amountTemplateOriginalA4.errors&&(e.form.controls.amountTemplateOriginalA4.dirty||e.form.controls.amountTemplateOriginalA4.touched))}}function Af(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_vui_long_nhap_so_cau")," "))}function Nb(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_vui_long_nhap_so_cau_lon_hon_0")," "))}function Zb(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_please_enter_a_number_less_than_or_equal_to")+" 40"," "))}function Db(n,o){if(1&n&&(t.TgZ(0,"div",28),t.YNc(1,Af,3,3,"span",0),t.YNc(2,Nb,3,3,"span",0),t.YNc(3,Zb,3,3,"span",0),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.form.controls.amountTemplateMultipleChoiceA4.errors.required),t.xp6(1),t.Q6J("ngIf",e.form.controls.amountTemplateMultipleChoiceA4.errors.min),t.xp6(1),t.Q6J("ngIf",e.form.controls.amountTemplateMultipleChoiceA4.errors.max)}}function jb(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_vui_long_nhap_so_cau")," "))}function qb(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_vui_long_nhap_so_cau_lon_hon_0")," "))}function Fb(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_please_enter_a_number_less_than_or_equal_to")+" 8"," "))}function Qb(n,o){if(1&n&&(t.TgZ(0,"div",28),t.YNc(1,jb,3,3,"span",0),t.YNc(2,qb,3,3,"span",0),t.YNc(3,Fb,3,3,"span",0),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.form.controls.amountTemplateTrueFalseA4.errors.required),t.xp6(1),t.Q6J("ngIf",e.form.controls.amountTemplateTrueFalseA4.errors.min),t.xp6(1),t.Q6J("ngIf",e.form.controls.amountTemplateTrueFalseA4.errors.max)}}function Rb(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_vui_long_nhap_so_cau")," "))}function Ub(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_vui_long_nhap_so_cau_lon_hon_0")," "))}function Bb(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_please_enter_a_number_less_than_or_equal_to")+" 6"," "))}function zb(n,o){if(1&n&&(t.TgZ(0,"div",28),t.YNc(1,Rb,3,3,"span",0),t.YNc(2,Ub,3,3,"span",0),t.YNc(3,Bb,3,3,"span",0),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.form.controls.amountTemplateFillA4.errors.required),t.xp6(1),t.Q6J("ngIf",e.form.controls.amountTemplateFillA4.errors.min),t.xp6(1),t.Q6J("ngIf",e.form.controls.amountTemplateFillA4.errors.max)}}function Jb(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",3)(2,"label",29),t._uU(3),t.ALo(4,"mytranslate"),t.qZA(),t.TgZ(5,"input",30),t.NdJ("input",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.changeStartNumberForAnotherTypeQuestion())}),t.qZA(),t.YNc(6,Db,4,3,"div",27),t.qZA(),t.TgZ(7,"div",3)(8,"label",31),t._uU(9),t.ALo(10,"mytranslate"),t.qZA(),t.TgZ(11,"input",32),t.NdJ("input",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.changeStartNumberForAnotherTypeQuestion())}),t.qZA(),t.YNc(12,Qb,4,3,"div",27),t.qZA(),t.TgZ(13,"div",3)(14,"label",33),t._uU(15),t.ALo(16,"mytranslate"),t.qZA(),t._UZ(17,"input",34),t.YNc(18,zb,4,3,"div",27),t.qZA(),t.BQk()}if(2&n){const e=t.oxw(2);t.xp6(3),t.hij(" ",t.lcZ(4,9,"lang_answer_sheet_create_total_multiple_choice_question")," "),t.xp6(2),t.Q6J("value",1),t.xp6(1),t.Q6J("ngIf",e.form.controls.amountTemplateMultipleChoiceA4.errors&&(e.form.controls.amountTemplateMultipleChoiceA4.dirty||e.form.controls.amountTemplateMultipleChoiceA4.touched)),t.xp6(3),t.hij(" ",t.lcZ(10,11,"lang_answer_sheet_create_total_true_false_question")," "),t.xp6(2),t.Q6J("value",1),t.xp6(1),t.Q6J("ngIf",e.form.controls.amountTemplateTrueFalseA4.errors&&(e.form.controls.amountTemplateTrueFalseA4.dirty||e.form.controls.amountTemplateTrueFalseA4.touched)),t.xp6(3),t.hij(" ",t.lcZ(16,13,"lang_answer_sheet_create_total_fill_answer_question")," "),t.xp6(2),t.Q6J("value",1),t.xp6(1),t.Q6J("ngIf",e.form.controls.amountTemplateFillA4.errors&&(e.form.controls.amountTemplateFillA4.dirty||e.form.controls.amountTemplateFillA4.touched))}}function Hb(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_vui_long_nhap_so_cau")," "))}function Gb(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_vui_long_nhap_so_cau_lon_hon_0")," "))}function $b(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_please_enter_a_number_less_than_or_equal_to")+" 50"," "))}function Yb(n,o){if(1&n&&(t.TgZ(0,"div",28),t.YNc(1,Hb,3,3,"span",0),t.YNc(2,Gb,3,3,"span",0),t.YNc(3,$b,3,3,"span",0),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.form.controls.amountTemplateA5.errors.required),t.xp6(1),t.Q6J("ngIf",e.form.controls.amountTemplateA5.errors.min),t.xp6(1),t.Q6J("ngIf",e.form.controls.amountTemplateA5.errors.max)}}function Kb(n,o){if(1&n&&(t.TgZ(0,"div",24)(1,"label",25),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t._UZ(4,"input",35),t.YNc(5,Yb,4,3,"div",27),t.qZA()),2&n){const e=t.oxw(2);t.xp6(2),t.hij(" ",t.lcZ(3,3,"lang_auto_nhap_so_cau")," "),t.xp6(2),t.Q6J("value",1),t.xp6(1),t.Q6J("ngIf",e.form.controls.amountTemplateA5.errors&&(e.form.controls.amountTemplateA5.dirty||e.form.controls.amountTemplateA5.touched))}}function Wb(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_vui_long_nhap_so_cau")," "))}function Vb(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_vui_long_nhap_so_cau_lon_hon_0")," "))}function Xb(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_please_enter_a_number_less_than_or_equal_to")+" 20"," "))}function Sf(n,o){if(1&n&&(t.TgZ(0,"div",28),t.YNc(1,Wb,3,3,"span",0),t.YNc(2,Vb,3,3,"span",0),t.YNc(3,Xb,3,3,"span",0),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.form.controls.amountTemplateA6.errors.required),t.xp6(1),t.Q6J("ngIf",e.form.controls.amountTemplateA6.errors.min),t.xp6(1),t.Q6J("ngIf",e.form.controls.amountTemplateA6.errors.max)}}function a0(n,o){if(1&n&&(t.TgZ(0,"div",24)(1,"label",25),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t._UZ(4,"input",36),t.YNc(5,Sf,4,3,"div",27),t.qZA()),2&n){const e=t.oxw(2);t.xp6(2),t.hij(" ",t.lcZ(3,3,"lang_auto_nhap_so_cau")," "),t.xp6(2),t.Q6J("value",1),t.xp6(1),t.Q6J("ngIf",e.form.controls.amountTemplateA6.errors&&(e.form.controls.amountTemplateA6.dirty||e.form.controls.amountTemplateA6.touched))}}function tv(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_vui_long_nhap_so_cau")," "))}function nv(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_vui_long_nhap_so_cau_lon_hon_0")," "))}function iv(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_please_enter_a_number_less_than_or_equal_to")+" 50"," "))}function ov(n,o){if(1&n&&(t.TgZ(0,"div",28),t.YNc(1,tv,3,3,"span",0),t.YNc(2,nv,3,3,"span",0),t.YNc(3,iv,3,3,"span",0),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.form.controls.amountTemplateEssayA4.errors.required),t.xp6(1),t.Q6J("ngIf",e.form.controls.amountTemplateEssayA4.errors.min),t.xp6(1),t.Q6J("ngIf",e.form.controls.amountTemplateEssayA4.errors.max)}}function av(n,o){if(1&n&&(t.TgZ(0,"div",24)(1,"label",25),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t._UZ(4,"input",37),t.YNc(5,ov,4,3,"div",27),t.qZA()),2&n){const e=t.oxw(2);t.xp6(2),t.hij(" ",t.lcZ(3,3,"lang_auto_nhap_so_cau")," "),t.xp6(2),t.Q6J("value",1),t.xp6(1),t.Q6J("ngIf",e.form.controls.amountTemplateEssayA4.errors&&(e.form.controls.amountTemplateEssayA4.dirty||e.form.controls.amountTemplateEssayA4.touched))}}function rv(n,o){if(1&n&&(t.TgZ(0,"div")(1,"form",1)(2,"div",2),t._uU(3),t.ALo(4,"mytranslate"),t.qZA(),t.TgZ(5,"div",3)(6,"div",4),t._uU(7),t.ALo(8,"mytranslate"),t.qZA(),t.TgZ(9,"div",5)(10,"div",6),t._UZ(11,"input",7),t.TgZ(12,"label",8),t._uU(13),t.ALo(14,"mytranslate"),t.qZA()(),t.YNc(15,Pb,6,5,"div",9),t.TgZ(16,"div",6),t._UZ(17,"input",10),t.TgZ(18,"label",11),t._uU(19),t.ALo(20,"mytranslate"),t.qZA()(),t.TgZ(21,"div",6),t._UZ(22,"input",12),t.TgZ(23,"label",13),t._uU(24),t.ALo(25,"mytranslate"),t.qZA()(),t.TgZ(26,"div",6),t._UZ(27,"input",14),t.TgZ(28,"label",15),t._uU(29),t.ALo(30,"mytranslate"),t.qZA()(),t.TgZ(31,"div",6),t._UZ(32,"input",16),t.TgZ(33,"label",17),t._uU(34),t.ALo(35,"mytranslate"),t.qZA()(),t.YNc(36,Jb,19,15,"ng-container",0),t.TgZ(37,"div",6),t._UZ(38,"input",18),t.TgZ(39,"label",19),t._uU(40),t.ALo(41,"mytranslate"),t.qZA()(),t.YNc(42,Kb,6,5,"div",9),t.TgZ(43,"div",6),t._UZ(44,"input",20),t.TgZ(45,"label",21),t._uU(46),t.ALo(47,"mytranslate"),t.qZA()(),t.YNc(48,a0,6,5,"div",9),t.TgZ(49,"div",6),t._UZ(50,"input",22),t.TgZ(51,"label",23),t._uU(52),t.ALo(53,"mytranslate"),t.qZA()(),t.YNc(54,av,6,5,"div",9),t.qZA()()()()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("formGroup",e.form),t.xp6(2),t.hij(" ",t.lcZ(4,24,"lang_auto_chon_mau_phieu_tra_loi")," "),t.xp6(4),t.hij(" ",t.lcZ(8,26,"lang_auto_mau_co_sbd_ma_de")," "),t.xp6(4),t.Q6J("value",e.allAnswerSheet.templateOriginalA4),t.xp6(2),t.hij(" ",t.lcZ(14,28,"lang_auto_answersheet_mau_a4_azota")," "),t.xp6(2),t.Q6J("ngIf",11==e.form.controls.answersheetTemplate.value),t.xp6(2),t.Q6J("value",e.allAnswerSheet.templateTrueFalseA4),t.xp6(2),t.hij(" ",t.lcZ(20,30,"lang_auto_answersheet_mau_a4_true_false")," "),t.xp6(3),t.Q6J("value",e.allAnswerSheet.templateTrueFalseEssayA4),t.xp6(2),t.hij(" ",t.lcZ(25,32,"lang_auto_answersheet_mau_essay_true_false")," "),t.xp6(3),t.Q6J("value",e.allAnswerSheet.templateTrueFalseA5),t.xp6(2),t.hij(" ",t.lcZ(30,34,"lang_auto_answersheet_mau_a5_true_false")," "),t.xp6(3),t.Q6J("value",e.allAnswerSheet.templateTrueFalseA6),t.xp6(2),t.hij(" ",t.lcZ(35,36,"lang_auto_answersheet_mau_a6_true_false")," "),t.xp6(2),t.Q6J("ngIf",e.form.controls.answersheetTemplate.value==e.allAnswerSheet.templateTrueFalseA4||e.form.controls.answersheetTemplate.value==e.allAnswerSheet.templateTrueFalseEssayA4||e.form.controls.answersheetTemplate.value==e.allAnswerSheet.templateTrueFalseA5||e.form.controls.answersheetTemplate.value==e.allAnswerSheet.templateTrueFalseA6),t.xp6(2),t.Q6J("value",e.allAnswerSheet.templateA5Full50),t.xp6(2),t.hij(" ",t.lcZ(41,38,"lang_auto_answersheet_mau_a5_full_a4_50")," "),t.xp6(2),t.Q6J("ngIf",e.form.controls.answersheetTemplate.value==e.allAnswerSheet.templateA5Full50),t.xp6(2),t.Q6J("value",e.allAnswerSheet.templateA6Full20),t.xp6(2),t.hij(" ",t.lcZ(47,40,"lang_auto_answersheet_mau_a6_full_a4_20")," "),t.xp6(2),t.Q6J("ngIf",e.form.controls.answersheetTemplate.value==e.allAnswerSheet.templateA6Full20),t.xp6(2),t.Q6J("value",e.allAnswerSheet.templateA4Essay),t.xp6(2),t.hij(" ",t.lcZ(53,42,"lang_auto_answersheet_mau_a4_35hh")," "),t.xp6(2),t.Q6J("ngIf",e.form.controls.answersheetTemplate.value==e.allAnswerSheet.templateA4Essay)}}let r0=(()=>{class n extends St.Q{constructor(){super(...arguments),this.formControlName="",this.resetQuestionIndex=!0,this.allAnswerSheet=Sl.x}changeStartNumberForAnotherTypeQuestion(){if(!this.resetQuestionIndex){let e=this.form?.controls.amountTemplateMultipleChoiceA4.value??40,i=this.form?.controls.amountTemplateTrueFalseA4.value??8;this.form?.controls.amountTemplateStartTrueFalseA4.setValue(Number(e)+1),this.form?.controls.amountTemplateStartFillA4.setValue(Number(e)+Number(i)+1),this.form?.updateValueAndValidity()}}}return n.\u0275fac=function(){let o;return function(i){return(o||(o=t.n5z(n)))(i||n)}}(),n.\u0275cmp=t.Xpm({type:n,selectors:[["app-testbank-choose-answer-sheet"]],inputs:{form:"form",formControlName:"formControlName",resetQuestionIndex:"resetQuestionIndex"},features:[t.qOj],decls:1,vars:1,consts:[[4,"ngIf"],[3,"formGroup"],[1,"form-label","font-medium"],[1,"mt-2"],[1,"text-md"],[1,"border","p-2","border-slate-200","dark:border-darkmode-400","rounded","mt-2"],[1,"form-check","mt-2"],["id","sample-1","type","radio","formControlName","answersheetTemplate",1,"form-check-input",3,"value"],["for","sample-1",1,"form-check-label"],["class","mt-2 mb-4",4,"ngIf"],["id","sample-15","type","radio","formControlName","answersheetTemplate",1,"form-check-input",3,"value"],["for","sample-15",1,"form-check-label"],["id","sample-16","type","radio","formControlName","answersheetTemplate",1,"form-check-input",3,"value"],["for","sample-16",1,"form-check-label"],["id","sample-17","type","radio","formControlName","answersheetTemplate",1,"form-check-input",3,"value"],["for","sample-17",1,"form-check-label"],["id","sample-18","type","radio","formControlName","answersheetTemplate",1,"form-check-input",3,"value"],["for","sample-18",1,"form-check-label"],["id","sample-5","type","radio","formControlName","answersheetTemplate",1,"form-check-input",3,"value"],["for","sample-5",1,"form-check-label"],["id","sample-4","type","radio","formControlName","answersheetTemplate",1,"form-check-input",3,"value"],["for","sample-4",1,"form-check-label"],["id","sample-write","type","radio","formControlName","answersheetTemplate",1,"form-check-input",3,"value"],["for","sample-write",1,"form-check-label"],[1,"mt-2","mb-4"],["for","input-sample-0",1,"form-label","font-medium"],["id","input-sample-0","appOnlyNumber","","type","text","formControlName","amountTemplateOriginalA4",1,"form-control",3,"value"],["class","mt-2 text-danger text-xs font-medium",4,"ngIf"],[1,"mt-2","text-danger","text-xs","font-medium"],["for","input-sample-15",1,"form-label","font-medium"],["id","input-sample-15","appOnlyNumber","","type","text","formControlName","amountTemplateMultipleChoiceA4",1,"form-control",3,"value","input"],["for","input-sample-17",1,"form-label","font-medium"],["id","input-sample-17","appOnlyNumber","","type","text","formControlName","amountTemplateTrueFalseA4",1,"form-control",3,"value","input"],["for","input-sample-19",1,"form-label","font-medium"],["id","input-sample-19","appOnlyNumber","","type","text","formControlName","amountTemplateFillA4",1,"form-control",3,"value"],["id","input-sample-0","appOnlyNumber","","type","text","formControlName","amountTemplateA5",1,"form-control",3,"value"],["id","input-sample-0","appOnlyNumber","","type","text","formControlName","amountTemplateA6",1,"form-control",3,"value"],["id","input-sample-0","appOnlyNumber","","type","text","formControlName","amountTemplateEssayA4",1,"form-control",3,"value"]],template:function(e,i){1&e&&t.YNc(0,rv,55,44,"div",0),2&e&&t.Q6J("ngIf",i.form)},dependencies:[D.O5,f._Y,f.Fj,f._,f.JJ,f.JL,f.sg,f.u,qr.Y,oo.M,jt.JV],encapsulation:2}),n})();var sv=M(82481),Pc=M(6990),lv=M(62180),lp=M(9315),cv=M(27921);function uv(n,o){1&n&&(t.TgZ(0,"div",16),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_please_enter_score_greater_than_0")," "))}function dv(n,o){if(1&n&&(t.TgZ(0,"div",10)(1,"div",11)(2,"label",12),t._uU(3),t.ALo(4,"mytranslate"),t.ALo(5,"mytranslate"),t.qZA(),t.TgZ(6,"div",13),t._UZ(7,"input",14),t.qZA()(),t.YNc(8,uv,3,3,"div",15),t.qZA()),2&n){const e=t.oxw();t.xp6(3),t.hij(" ",t.lcZ(4,3,"lang_auto_tong_diem_trac_nghiem")+" ("+e.data.multipleQuestion+" "+t.lcZ(5,5,"lang_testbank_tested_list_question")+")"," "),t.xp6(4),t.Q6J("decimal",!0),t.xp6(1),t.Q6J("ngIf",e.form.controls.multiplePoint.errors&&(e.form.controls.multiplePoint.dirty||e.form.controls.multiplePoint.touched))}}function mv(n,o){1&n&&(t.TgZ(0,"div",16),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_please_enter_score_greater_than_0")," "))}function hv(n,o){if(1&n&&(t.TgZ(0,"div",17)(1,"div",11)(2,"label",18),t._uU(3),t.ALo(4,"mytranslate"),t.ALo(5,"mytranslate"),t.qZA(),t.TgZ(6,"div",13),t._UZ(7,"input",19),t.qZA()(),t.YNc(8,mv,3,3,"div",15),t.qZA()),2&n){const e=t.oxw();t.xp6(3),t.hij(" ",t.lcZ(4,3,"lang_testbank_total_true_false_questions")+" ("+e.data.trueFalseQuestion+" "+t.lcZ(5,5,"lang_testbank_tested_list_question")+")"," "),t.xp6(4),t.Q6J("decimal",!0),t.xp6(1),t.Q6J("ngIf",e.form.controls.trueFalsePoint.errors&&(e.form.controls.trueFalsePoint.dirty||e.form.controls.trueFalsePoint.touched))}}function pv(n,o){1&n&&(t.TgZ(0,"div",16),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_please_enter_score_greater_than_0")," "))}function _v(n,o){if(1&n&&(t.TgZ(0,"div",17)(1,"div",11)(2,"label",20),t._uU(3),t.ALo(4,"mytranslate"),t.ALo(5,"mytranslate"),t.qZA(),t.TgZ(6,"div",13),t._UZ(7,"input",21),t.qZA()(),t.YNc(8,pv,3,3,"div",15),t.qZA()),2&n){const e=t.oxw();t.xp6(3),t.hij(" ",t.lcZ(4,3,"lang_auto_tong_diem_dien_tu")+" ("+e.data.fillQuestion+" "+t.lcZ(5,5,"lang_testbank_tested_list_question")+")"," "),t.xp6(4),t.Q6J("decimal",!0),t.xp6(1),t.Q6J("ngIf",e.form.controls.fillPoint.errors&&(e.form.controls.fillPoint.dirty||e.form.controls.fillPoint.touched))}}function fv(n,o){1&n&&(t.TgZ(0,"div",16),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_please_enter_score_greater_than_0")," "))}function gv(n,o){if(1&n&&(t.TgZ(0,"div",17)(1,"div",11)(2,"label",22),t._uU(3),t.ALo(4,"mytranslate"),t.ALo(5,"mytranslate"),t.qZA(),t.TgZ(6,"div",13),t._UZ(7,"input",23),t.qZA()(),t.YNc(8,fv,3,3,"div",15),t.qZA()),2&n){const e=t.oxw();t.xp6(3),t.hij(" ",t.lcZ(4,3,"lang_auto_tong_diem_tu_luan")+" ("+e.data.essayQuestion+" "+t.lcZ(5,5,"lang_testbank_tested_list_question")+")"," "),t.xp6(4),t.Q6J("decimal",!0),t.xp6(1),t.Q6J("ngIf",e.form.controls.essayPoint.errors&&(e.form.controls.essayPoint.dirty||e.form.controls.essayPoint.touched))}}let Of=(()=>{class n extends lo.e{handleCloseDialog(){this.dialogRef.close()}setPointData(){if(this.form.invalid)return this.form.markAllAsTouched();const e=this.form.getRawValue(),i=this.ensureNumber(e.multiplePoint),a=this.ensureNumber(e.essayPoint),r=this.ensureNumber(e.fillPoint),s=this.ensureNumber(e.trueFalsePoint),l={multiplePoint:i.toString(),essayPoint:a.toString(),fillPoint:r.toString(),trueFalsePoint:s.toString()};this.dialogRef.close(l)}ensureNumber(e){return isNaN(e)?0:Number(e)}addValidateForm(){if(!this.data)return;const e=1e-6;this.data.multipleQuestion&&this.form.controls.multiplePoint.addValidators([f.kI.required,f.kI.min(e)]),this.data.trueFalseQuestion&&this.form.controls.trueFalsePoint.addValidators([f.kI.required,f.kI.min(e)]),this.data.fillQuestion&&this.form.controls.fillPoint.addValidators([f.kI.required,f.kI.min(e)]),this.data.essayQuestion&&this.form.controls.essayPoint.addValidators([f.kI.required,f.kI.min(e)])}ngOnInit(){super.ngOnInit(),this.form.patchValue({multiplePoint:Number(this.data.multiplePoint),essayPoint:Number(this.data.essayPoint),fillPoint:Number(this.data.fillPoint),trueFalsePoint:Number(this.data.trueFalsePoint)}),this.addValidateForm()}constructor(e,i){super(i,e),this.dialogRef=e,this.data=i,this.form=new f.cw({multiplePoint:new f.NI(0,{nonNullable:!0}),trueFalsePoint:new f.NI(0,{nonNullable:!0}),fillPoint:new f.NI(0,{nonNullable:!0}),essayPoint:new f.NI(0,{nonNullable:!0})})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36($.so,8),t.Y36($.WI,8))},n.\u0275cmp=t.Xpm({type:n,selectors:[["azt-split-point"]],features:[t.qOj],decls:18,vars:14,consts:[[1,"box"],[3,"formGroup"],[1,"border-b","border-slate-200","dark:border-darkmode-400","p-3"],[1,"font-medium","text-base"],[1,"p-3","border-b","border-slate-200","dark:border-darkmode-400"],["class","mt-0",4,"ngIf"],["class","mt-4",4,"ngIf"],[1,"p-3","text-right"],[1,"btn","w-24","btn-outline-secondary","mr-3",3,"click"],[1,"btn","w-24","btn-primary",3,"click"],[1,"mt-0"],[1,"flex","items-center"],["for","multiplePoint",1,"font-medium","mr-3"],[1,"ml-auto"],["type","text","formControlName","multiplePoint","id","multiplePoint","appOnlyNumber","",1,"form-control","text-center",2,"width","90px",3,"decimal"],["class","mt-2 text-danger font-medium text-xs",4,"ngIf"],[1,"mt-2","text-danger","font-medium","text-xs"],[1,"mt-4"],["for","scoreMultipleChoice",1,"font-medium","mr-3"],["type","text","formControlName","trueFalsePoint","id","trueFalsePoint","appOnlyNumber","",1,"form-control","text-center",2,"width","90px",3,"decimal"],["for","fillPoint",1,"font-medium","mr-3"],["type","text","formControlName","fillPoint","id","fillPoint","appOnlyNumber","",1,"form-control","text-center",2,"width","90px",3,"decimal"],["for","essayPoint",1,"font-medium","mr-3"],["type","text","formControlName","essayPoint","id","essayPoint","appOnlyNumber","",1,"form-control","text-center",2,"width","90px",3,"decimal"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"form",1)(2,"div",2)(3,"span",3),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()(),t.TgZ(6,"div",4),t.YNc(7,dv,9,7,"div",5),t.YNc(8,hv,9,7,"div",6),t.YNc(9,_v,9,7,"div",6),t.YNc(10,gv,9,7,"div",6),t.qZA(),t.TgZ(11,"div",7)(12,"button",8),t.NdJ("click",function(){return i.handleCloseDialog()}),t._uU(13),t.ALo(14,"mytranslate"),t.qZA(),t.TgZ(15,"button",9),t.NdJ("click",function(){return i.setPointData()}),t._uU(16),t.ALo(17,"mytranslate"),t.qZA()()()()),2&e&&(t.xp6(1),t.Q6J("formGroup",i.form),t.xp6(3),t.hij(" ",t.lcZ(5,8,"lang_testbank_quick_score_distribution")," "),t.xp6(3),t.Q6J("ngIf",i.data.multipleQuestion),t.xp6(1),t.Q6J("ngIf",i.data.trueFalseQuestion),t.xp6(1),t.Q6J("ngIf",i.data.fillQuestion),t.xp6(1),t.Q6J("ngIf",i.data.essayQuestion),t.xp6(3),t.hij(" ",t.lcZ(14,10,"lang_auto_dong")," "),t.xp6(3),t.hij(" ",t.lcZ(17,12,"lang_auto_chia")," "))},dependencies:[D.O5,f._Y,f.Fj,f.JJ,f.JL,f.sg,f.u,qr.Y,oo.M,jt.JV],styles:[".school-info_bg[_ngcontent-%COMP%]{z-index:1000;width:100%;display:flex;left:0;top:0;position:fixed;height:100%;min-height:100vh;background-color:#3c3c3c80}.school-info[_ngcontent-%COMP%]{z-index:1001;top:50%;left:50%;transform:translate(-50%,-50%);position:fixed;max-width:800px;background:#fff;margin-left:auto;margin-right:auto;box-shadow:0 0 13px 3px #00000094}.block-title[_ngcontent-%COMP%]{text-align:center;font-weight:600}.block-body[_ngcontent-%COMP%]{text-align:left}.btn-close[_ngcontent-%COMP%]{transition:all .5s}.btn-close[_ngcontent-%COMP%]:hover{background:#dfe6e9}.input-point[_ngcontent-%COMP%]{margin-left:10px;max-width:100px;border:1px solid #000;border-radius:3px;text-align:center;color:#000;padding:0!important}.btn-config[_ngcontent-%COMP%]{transition:all .5s}.btn-config[_ngcontent-%COMP%]:hover{background:#133864}@media only screen and (max-width: 1024px){.school-info[_ngcontent-%COMP%]{width:95%;max-width:800px}}@media only screen and (max-width: 768px){.school-info[_ngcontent-%COMP%]{width:95%;max-width:700px}}@media only screen and (max-width: 576px){.school-info[_ngcontent-%COMP%]{width:95%;max-width:400px}}@media only screen and (max-width: 380px){.school-info[_ngcontent-%COMP%]{width:95%;max-width:300px}}@media only screen and (max-width: 290px){.school-info[_ngcontent-%COMP%]{width:95%;max-width:250px}}"]}),n})(),cp=(()=>{class n extends lo.e{constructor(e,i){super(i,e),this.dialogRef=e,this.data=i}}return n.\u0275fac=function(e){return new(e||n)(t.Y36($.so,8),t.Y36($.WI,8))},n.\u0275cmp=t.Xpm({type:n,selectors:[["dialog-content-example-dialog"]],features:[t.qOj],decls:21,vars:13,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5"],[1,"text-md","font-medium","flex","items-center"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-6","h-6","mr-2","text-pending"],["points","7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2"],["x1","12","y1","8","x2","12","y2","12"],["x1","12","y1","16","x2","12.01","y2","16"],[1,"mt-2"],[1,"text-xs","text-slate-500","dark:text-slate-400"],[1,"p-3","text-right"],["mat-dialog-close","",1,"btn","w-24","btn-outline-secondary","mr-2"],["azt-track-service","confirm-dialog-PXYIKWeh7vE","cdkFocusInitial","",1,"btn","w-24","btn-primary",3,"mat-dialog-close"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),t.O4$(),t.TgZ(4,"svg",4),t._UZ(5,"polygon",5)(6,"line",6)(7,"line",7),t.qZA(),t._uU(8),t.ALo(9,"mytranslate"),t.qZA(),t.kcU(),t.TgZ(10,"div",8)(11,"p",9),t._uU(12),t.ALo(13,"mytranslate"),t.qZA()()()(),t.TgZ(14,"div",10)(15,"button",11),t._uU(16),t.ALo(17,"mytranslate"),t.qZA(),t.TgZ(18,"button",12),t._uU(19),t.ALo(20,"mytranslate"),t.qZA()()()),2&e&&(t.xp6(8),t.hij(" ",t.lcZ(9,5,i.data.title)," "),t.xp6(4),t.hij(" ",t.lcZ(13,7,i.data.msg)," "),t.xp6(4),t.hij(" ",t.lcZ(17,9,"lang_auto_dong")," "),t.xp6(2),t.Q6J("mat-dialog-close",!0),t.xp6(1),t.hij(" ",t.lcZ(20,11,"lang_auto_xac_nhan")," "))},dependencies:[$.ZT,jt.JV],encapsulation:2}),n})();var up=M(36028),yr=M(22557),Jo=M(30617);function xv(n,o){1&n&&(t.TgZ(0,"mat-icon",15),t._uU(1,"cancel"),t.qZA())}function s0(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"mat-chip-row",13),t.NdJ("removed",function(){const r=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.remove(r))}),t._uU(1),t.YNc(2,xv,2,0,"mat-icon",14),t.qZA()}if(2&n){const e=o.$implicit,i=t.oxw();t.Q6J("removable",i.removable),t.xp6(1),t.hij(" ",e," "),t.xp6(1),t.Q6J("ngIf",i.removable)}}let Ef=(()=>{class n extends lo.e{add(e){const i=(e.value||"").trim();i&&i.split("|").forEach(r=>{this.data.answers.push(r.trim())}),e.input.value=""}remove(e){const i=this.data.answers.indexOf(e);i>=0&&this.data.answers.splice(i,1)}notification(){this.showSuccessSnack("lang_auto_cap_nhap_dap_an_thanh_cong")}constructor(e,i,a){super(i,e),this.dialogRef=e,this.data=i,this.commonService=a,this.separatorKeysCodes=[up.K5],this.selectable=!0,this.removable=!0,this.addOnBlur=!0}}return n.\u0275fac=function(e){return new(e||n)(t.Y36($.so,8),t.Y36($.WI),t.Y36(mi.z))},n.\u0275cmp=t.Xpm({type:n,selectors:[["dialog-answer-question"]],features:[t.qOj],decls:25,vars:24,consts:[[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-body"],[1,"intro"],[1,"text-base","font-medium","mr-auto"],[1,"info"],["appearance","outline",1,"example-chip-list",2,"margin-top","10px"],["chipList",""],[3,"removable","removed",4,"ngFor","ngForOf"],[3,"placeholder","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur","matChipInputTokenEnd"],[1,"text-right","mt-3"],["azt-track-service","dialog-answer-question-SsxKRDN6kND",1,"btn","w-24","btn-secondary","mr-3",3,"mat-dialog-close"],["azt-track-service","dialog-answer-question-1MY4eREqFzD","cdkFocusInitial","","color","warn",1,"btn","w-24","btn-primary",3,"mat-dialog-close","click"],[3,"removable","removed"],["matChipRemove","",4,"ngIf"],["matChipRemove",""]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()(),t.TgZ(7,"div",3)(8,"span",5),t._uU(9),t.ALo(10,"mytranslate"),t.qZA(),t.TgZ(11,"mat-form-field",6)(12,"mat-chip-grid",null,7),t.ALo(14,"mytranslate"),t.YNc(15,s0,3,3,"mat-chip-row",8),t.TgZ(16,"input",9),t.NdJ("matChipInputTokenEnd",function(r){return i.add(r)}),t.ALo(17,"mytranslate"),t.qZA()()()(),t.TgZ(18,"div",10)(19,"button",11),t._uU(20),t.ALo(21,"mytranslate"),t.qZA(),t.TgZ(22,"button",12),t.NdJ("click",function(){return i.notification()}),t._uU(23),t.ALo(24,"mytranslate"),t.qZA()()()()()),2&e){const a=t.MAs(13);t.xp6(5),t.hij(" ",t.lcZ(6,12,"lang_auto_cai_dat_cau_tra_loi_cho_cau_hoi_dien_tu")," "),t.xp6(4),t.hij(" ",t.lcZ(10,14,"lang_auto_answer_question_desc_dot")," "),t.xp6(3),t.uIk("aria-label",t.lcZ(14,16,"lang_auto_dap_an_duoc_cong_nhan")),t.xp6(3),t.Q6J("ngForOf",i.data.answers),t.xp6(1),t.s9C("placeholder",t.lcZ(17,18,"lang_auto_them_dap_an_duoc_cong_nhan")+" ..."),t.Q6J("matChipInputFor",a)("matChipInputSeparatorKeyCodes",i.separatorKeysCodes)("matChipInputAddOnBlur",i.addOnBlur),t.xp6(3),t.Q6J("mat-dialog-close",!1),t.xp6(1),t.hij(" ",t.lcZ(21,20,"lang_auto_huy")," "),t.xp6(2),t.Q6J("mat-dialog-close",!0),t.xp6(1),t.hij(" ",t.lcZ(24,22,"lang_auto_luu")," ")}},dependencies:[D.sg,D.O5,yr.RA,yr.oH,yr.qH,yr.z3,$.ZT,Jo.Hw,rs.KE,jt.JV],encapsulation:2}),n})(),ar=(()=>{class n{static openLoadingEffect(e){var i=document.getElementById(this.idComponent),a=document.getElementById(this.idStatusContent);null!==i&&null!==a&&(a.innerText=e,i.style.display="flex")}static closeLoadingEffect(e){return new Promise(i=>{setTimeout(()=>{var a=document.getElementById(this.idComponent),r=document.getElementById(this.idStatusContent);null!==a&&null!==r&&(a.style.display="none",r.innerText=""),i(!0)},e)})}static changeMsgLoadingEffect(e){var i=document.getElementById(this.idComponent),a=document.getElementById(this.idStatusContent);null!==i&&null!==a&&(a.innerText=e)}ngOnInit(){}constructor(){this.idComponent="status-loading-effect-component",this.idStatusContent="status-loading-effect-component-content"}}return n.idComponent="status-loading-effect-component",n.idStatusContent="status-loading-effect-component-content",n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["status-loading-effect-component"]],decls:7,vars:2,consts:[[1,"loading-effect",2,"display","none","position","fixed","display","flex","width","100vw","height","100%","background","#000000c7","color","#ffffff","font-size","20px","font-weight","lighter","justify-content","center","align-items","center","cursor","progress","z-index","1001","top","0","left","0",3,"id"],[1,"text-center","loading-effect-frame",2,"height","85%","overflow-x","auto"],[1,"flex","justify-center","mt-5"],[1,"w-6","h-6"],[1,"span-status",2,"margin-top","10px","position","relative","animation","animatefadeIn 0.3s"],[3,"id"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),t._UZ(4,"azt-loading-ui"),t.qZA()(),t.TgZ(5,"div",4),t._UZ(6,"span",5),t.qZA()()()),2&e&&(t.Q6J("id",i.idComponent),t.xp6(6),t.Q6J("id",i.idStatusContent))},dependencies:[oi.n],encapsulation:2}),n})();M(77424);const _0={a:"rgb(0, 0, 255, 0.2)",b:"rgb(255, 165, 0, 0.2)",c:"rgb(0, 128, 0, 0.2)",d:"rgb(128, 0, 128, 0.2)",e:"rgb(255, 255, 0, 0.2)",f:"rgb(0, 0, 255, 0.2)",g:"rgb(0, 128, 0, 0.2)",h:"rgb(128, 0, 128, 0.2)"},hp={A:"B",B:"C",C:"D",D:"E",E:"F",F:"G",G:"H"},Fr=100;let Pv=(()=>{class n{getErrorQtns(e){var i=[];for(let a=0;a<e.length;a++)!e[a].isGroup&&0==e[a].answers.length&&(e[a].strAns&&void 0!==e[a].strAns||i.push(e[a].num));return i}sumHighTo(e,i){let a=0,r=i.filter(s=>!s.inactive);for(let s=0;s<e;s++)a+=Math.round(r[s].heigh);return a}maxWidthTo(e,i){let a=[],r=i.filter(s=>!s.inactive);for(let s=0;s<e;s++)a.push(r[s].width);return Math.round(Math.max(...a))}constructor(e){this.commonService=e,this.fillColor=(i,a,r,s,l,c)=>{a.fillStyle=i,a.fillRect(Math.round(r),Math.round(s),Math.round(l),Math.round(c))},this.drawRect=(i,a,r,s,l,c)=>{a.beginPath(),a.lineWidth=1,a.strokeStyle=i,a.rect(Math.round(r),Math.round(s),Math.round(l),Math.round(c)),a.stroke()},this.getSingleImgData=(i,a)=>{if(i.inactive){let r=this.commonService.myTranslateInstant("lang_auto_khong_xac_dinh_duoc_vung_thong_tin")??"";throw this.commonService.snackError(r),new Error(r)}try{let r=document.createElement("canvas");return r.width=0==i.width?2:Math.round(i.width),r.height=0==i.heigh?2:Math.round(i.heigh),r.getContext("2d")?.drawImage(a[i.pageIndex].canvas,Math.round(i.left),Math.round(i.top),r.width,r.height,0,0,r.width,r.height),r.toDataURL("image/png")}catch(r){return console.log(r),"https://via.placeholder.com/300"}},this.getScatteredImgData=(i,a)=>{const r=i.filter(l=>!l.inactive);if(i.filter(l=>l.inactive).length==i.length){let l=this.commonService.myTranslateInstant("lang_auto_khong_xac_dinh_duoc_vung_thong_tin")??"";throw this.commonService.snackError(l),new Error(l)}try{let l=document.createElement("canvas"),c=r.map(_=>_.width);l.width=Math.round(Math.max(...c));let d=0;for(let _=0;_<r.length;_++)d+=r[_].heigh;l.height=Math.round(d);let h=l.getContext("2d");for(let _=0;_<r.length;_++)h?.drawImage(a[r[_].pageIndex].canvas,Math.round(r[_].left),Math.round(r[_].top),Math.round(r[_].width),Math.round(r[_].heigh),0,0==_?0:this.sumHighTo(_,r),Math.round(r[_].width),Math.round(r[_].heigh));return l.toDataURL("image/png")}catch(l){return console.log(l),"https://via.placeholder.com/300"}}}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(mi.z))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Zf=M(7444),f0=M(79998),Nv=M(18750),g0=M(24630),Zv=M(75986),x0=M(55940);let Dv=(()=>{class n{constructor(e){this.ref=e}onInput(e){if(""!=e.target.value){let i=e.target.selectionStart,a=e.target.selectionEnd;if(e.target.value=e.target.value.replace(/[^\d.,]/g,""),""==e.target.value&&(e.target.value="0"),e.target.value.includes(",")&&(e.target.value=e.target.value.replace(",",".")),e.target.setSelectionRange(i,a),e.preventDefault(),!this.lastValue||this.lastValue&&e.target.value.length>0&&this.lastValue!==e.target.value){this.lastValue=this.ref.nativeElement.value=e.target.value;const r=document.createEvent("HTMLEvents");r.initEvent("input",!1,!0),e.target.dispatchEvent(r)}}else e.target.value=""}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.SBq))},n.\u0275dir=t.lG2({type:n,selectors:[["","appReplaceCommas",""]],hostBindings:function(e,i){1&e&&t.NdJ("input",function(r){return i.onInput(r)})}}),n})();var Ta=M(26236);const jv=["myDialogExamInfo"];function qv(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw(2);return t.KtG(s.onHandleGoToQuestion(r))}),t.TgZ(1,"span"),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()}if(2&n){const e=o.$implicit;t.xp6(2),t.Oqu(t.lcZ(3,1,"lang_auto_cau")+" "+e)}}function Mu(n,o){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"td",16),t._uU(5),t.qZA(),t.TgZ(6,"td",17),t.YNc(7,qv,4,3,"button",18),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,3,"lang_auto_tong_so_cau_trac_nghiem")),t.xp6(3),t.Oqu(null==e.examInfo.listMultiple?null:e.examInfo.listMultiple.length),t.xp6(2),t.Q6J("ngForOf",e.examInfo.listMultiple)}}function Jn(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw(2);return t.KtG(s.onHandleGoToQuestion(r))}),t.TgZ(1,"span"),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()}if(2&n){const e=o.$implicit;t.xp6(2),t.Oqu(t.lcZ(3,1,"lang_auto_cau")+" "+e)}}function Fv(n,o){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"td",16),t._uU(5),t.qZA(),t.TgZ(6,"td",17),t.YNc(7,Jn,4,3,"button",18),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,3,"lang_auto_tong_so_cau_tu_luan")),t.xp6(3),t.Oqu(null==e.examInfo.listEssay?null:e.examInfo.listEssay.length),t.xp6(2),t.Q6J("ngForOf",e.examInfo.listEssay)}}function wr(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw(2);return t.KtG(s.onHandleGoToQuestion(r))}),t.TgZ(1,"span"),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()}if(2&n){const e=o.$implicit;t.xp6(2),t.Oqu(t.lcZ(3,1,"lang_auto_cau")+" "+e)}}function Ho(n,o){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"td",16),t._uU(5),t.qZA(),t.TgZ(6,"td",17),t.YNc(7,wr,4,3,"button",18),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,3,"lang_auto_cau_trac_nghiem_dien_tu")),t.xp6(3),t.Oqu(null==e.examInfo.listFill?null:e.examInfo.listFill.length),t.xp6(2),t.Q6J("ngForOf",e.examInfo.listFill)}}function Qv(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw(2);return t.KtG(s.onHandleGoToQuestion(r))}),t.TgZ(1,"span"),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()}if(2&n){const e=o.$implicit;t.xp6(2),t.Oqu(t.lcZ(3,1,"lang_auto_cau")+" "+e)}}function Nc(n,o){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"td",16),t._uU(5),t.qZA(),t.TgZ(6,"td",17),t.YNc(7,Qv,4,3,"button",18),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,3,"lang_testbank_number_of_unanswered_questions")),t.xp6(3),t.Oqu(null==e.examInfo.listUnanswered?null:e.examInfo.listUnanswered.length),t.xp6(2),t.Q6J("ngForOf",e.examInfo.listUnanswered)}}function Rv(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw(3);return t.KtG(s.onHandleGoToQuestion(r))}),t.TgZ(1,"span"),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()}if(2&n){const e=o.$implicit;t.xp6(2),t.Oqu(t.lcZ(3,1,"lang_auto_cau")+" "+e)}}function Uv(n,o){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"td",16),t._uU(5),t.qZA(),t.TgZ(6,"td",17),t.YNc(7,Rv,4,3,"button",18),t.qZA()()),2&n){const e=t.oxw().$implicit;t.xp6(2),t.Oqu(t.lcZ(3,3,"lang_auto_cau_trac_nghiem_co_"+e.key+"_dap_an")),t.xp6(3),t.Oqu(e.value.length),t.xp6(2),t.Q6J("ngForOf",e.value)}}function Bv(n,o){if(1&n&&(t.ynx(0),t.YNc(1,Uv,8,5,"tr",14),t.BQk()),2&n){const e=o.$implicit;t.xp6(1),t.Q6J("ngIf",null==e.value?null:e.value.length)}}let Df=(()=>{class n extends St.Q{constructor(e){super(),this.answerTypeService=e,this.startIndexQuestion=1,this.data={},this.type="edit",this.closeDialog=new t.vpe,this.goToQuestion=new t.vpe,this.questionObjs=[],this.examInfo={},this.isMobile=!1}onKeydownHandler(e){this.closeDialog.emit()}onGlobalClick(e){this.myDialog?.nativeElement.contains(e.target)||this.closeDialog.emit()}btnCloseDialog(e){this.closeDialog.emit(e)}initData(){this.questionObjs=this.data.obj??[],this.filterQuestion()}filterQuestion(){if(this.examInfo.listEssay=[],this.examInfo.listMultiple=[],this.examInfo.listFill=[],this.examInfo.listUnanswered=[],this.examInfo.listQuestionWithTotalAnswer={},"edit"==this.type){let e=0;this.questionObjs.forEach(i=>{e++,this.answerTypeService.isEssayAnswer(i)?null!=i.rawIndex&&this.examInfo.listEssay?.push(i.rawIndex+this.startIndexQuestion):null!=i.rawIndex&&!this.answerTypeService.isFillAnswer(i)&&this.examInfo.listMultiple?.push(i.rawIndex+this.startIndexQuestion),this.answerTypeService.isFillAnswer(i)&&null!=i.rawIndex&&this.examInfo.listFill?.push(i.rawIndex+this.startIndexQuestion),(this.answerTypeService.isOneChoiceAnswer(i)||this.answerTypeService.isMultipleChoiceAnswer(i))&&i.answers&&null!=i.rawIndex&&this.countTotalAnswerOfQuestion(i.answers.length,i.rawIndex+this.startIndexQuestion),!this.answerTypeService.isEssayAnswer(i)&&(!i.answerResult||!i.answerResult.length)&&null!=i.rawIndex&&this.examInfo.listUnanswered?.push(i.rawIndex+this.startIndexQuestion)}),this.examInfo.totalQuestion=e}if("createPDF"==this.type){let e=0;this.questionObjs.forEach(i=>{1==i.tempData.isSelect&&(e++,this.answerTypeService.isEssayAnswer(i.tempData)?null!=i.index&&this.examInfo.listEssay?.push(i.index+this.startIndexQuestion):null!=i.index&&!this.answerTypeService.isFillAnswer(i.tempData)&&this.examInfo.listMultiple?.push(i.index+this.startIndexQuestion),this.answerTypeService.isFillAnswer(i.tempData)&&null!=i.index&&this.examInfo.listFill?.push(i.index+this.startIndexQuestion),(this.answerTypeService.isOneChoiceAnswer(i.tempData)||this.answerTypeService.isMultipleChoiceAnswer(i.tempData))&&i.answers&&null!=i.index&&this.countTotalAnswerOfQuestion(i.answers.length,i.index+this.startIndexQuestion))}),this.examInfo.totalQuestion=e}if("createDocx"==this.type){let e=0;this.questionObjs.forEach(i=>{e++,this.answerTypeService.isEssayAnswer(i.typeQuestion)?null!=i.numberQuestion&&this.examInfo.listEssay?.push(i.numberQuestion):null!=i.numberQuestion&&!this.answerTypeService.isFillAnswer(i.typeQuestion)&&this.examInfo.listMultiple?.push(i.numberQuestion),this.answerTypeService.isFillAnswer(i.typeQuestion)&&null!=i.numberQuestion&&this.examInfo.listFill?.push(i.numberQuestion),(this.answerTypeService.isOneChoiceAnswer(i.typeQuestion)||this.answerTypeService.isMultipleChoiceAnswer(i.typeQuestion))&&i.answers&&null!=i.numberQuestion&&this.countTotalAnswerOfQuestion(i.answers.length,i.numberQuestion)}),this.examInfo.totalQuestion=e}}countTotalAnswerOfQuestion(e,i){this.examInfo.listQuestionWithTotalAnswer&&(this.examInfo.listQuestionWithTotalAnswer?.hasOwnProperty(e)||(this.examInfo.listQuestionWithTotalAnswer[e]=[]),this.examInfo.listQuestionWithTotalAnswer[e].push(i))}onHandleGoToQuestion(e){this.goToQuestion.emit(e),this.btnCloseDialog(!1)}ngOnInit(){super.ngOnInit(),this.isMobile=this.commonService.isMobileOrTable(),this.initData()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(hr.i))},n.\u0275cmp=t.Xpm({type:n,selectors:[["azt-exam-info"]],viewQuery:function(e,i){if(1&e&&t.Gf(jv,5),2&e){let a;t.iGM(a=t.CRH())&&(i.myDialog=a.first)}},hostBindings:function(e,i){1&e&&t.NdJ("keydown.escape",function(r){return i.onKeydownHandler(r)},!1,t.evT)},inputs:{startIndexQuestion:"startIndexQuestion",data:"data",type:"type"},outputs:{closeDialog:"closeDialog",goToQuestion:"goToQuestion"},features:[t.qOj],decls:37,vars:31,consts:[[1,"box-dialog"],[1,"dialog-overlay",3,"click"],["cdkDrag","","cdkDragRootElement",".dialog-drag","cdkDragHandle","",1,"dialog-header",2,"cursor","move"],[1,"dialog-title"],[1,"dialog-close",3,"click"],[2,"overflow","auto","height","65vh"],[1,"px-4"],[1,"quest-info-number"],[1,"quest-info-item"],[1,"table","table-bordered"],[1,"table-header"],[2,"width","35%"],[2,"width","15%"],[2,"width","50%"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"text-center"],[2,"padding-top","0px","padding-bottom","0px"],["class","label-quest-item",3,"click",4,"ngFor","ngForOf"],[1,"label-quest-item",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t.NdJ("click",function(){return i.btnCloseDialog(!1)}),t.qZA(),t.TgZ(2,"div")(3,"div",2)(4,"div",3),t._uU(5),t.ALo(6,"mytranslate"),t.qZA(),t.TgZ(7,"div",4),t.NdJ("click",function(){return i.btnCloseDialog(!1)}),t.TgZ(8,"mat-icon"),t._uU(9,"close"),t.qZA()()(),t.TgZ(10,"div",5)(11,"div",6)(12,"div",7)(13,"p",8),t._uU(14),t.ALo(15,"mytranslate"),t.ALo(16,"lowercase"),t.ALo(17,"mytranslate"),t.qZA()(),t.TgZ(18,"table",9)(19,"thead")(20,"tr",10)(21,"td",11),t._uU(22),t.ALo(23,"mytranslate"),t.qZA(),t.TgZ(24,"td",12),t._uU(25),t.ALo(26,"mytranslate"),t.qZA(),t.TgZ(27,"td",13),t._uU(28),t.ALo(29,"mytranslate"),t.qZA()()(),t.TgZ(30,"tbody"),t.YNc(31,Mu,8,5,"tr",14),t.YNc(32,Fv,8,5,"tr",14),t.YNc(33,Ho,8,5,"tr",14),t.YNc(34,Nc,8,5,"tr",14),t.YNc(35,Bv,2,1,"ng-container",15),t.ALo(36,"keyvalue"),t.qZA()()()()()()),2&e&&(t.xp6(2),t.Gre("box dialog-drag dialog",i.isMobile?"-mobile":"",""),t.xp6(3),t.hij(" ",t.lcZ(6,15,"lang_auto_thong_tin_de_thi")," "),t.xp6(9),t.lnq("",t.lcZ(15,17,"lang_auto_tong_so_cau_trong_de_thi"),": ",i.examInfo.totalQuestion," ",t.lcZ(16,19,t.lcZ(17,21,"lang_auto_cau")),""),t.xp6(8),t.Oqu(t.lcZ(23,23,"lang_auto_thong_tin")),t.xp6(3),t.Oqu(t.lcZ(26,25,"lang_auto_so_luong")),t.xp6(3),t.Oqu(t.lcZ(29,27,"lang_auto_danh_sach_cac_cau")),t.xp6(3),t.Q6J("ngIf",null==i.examInfo.listMultiple?null:i.examInfo.listMultiple.length),t.xp6(1),t.Q6J("ngIf",null==i.examInfo.listEssay?null:i.examInfo.listEssay.length),t.xp6(1),t.Q6J("ngIf",null==i.examInfo.listFill?null:i.examInfo.listFill.length),t.xp6(1),t.Q6J("ngIf",null==i.examInfo.listUnanswered?null:i.examInfo.listUnanswered.length),t.xp6(1),t.Q6J("ngForOf",t.lcZ(36,29,i.examInfo.listQuestionWithTotalAnswer)))},dependencies:[D.sg,D.O5,Ta.Zt,Ta.Bh,Jo.Hw,D.i8,D.Nd,jt.JV],styles:[".box-dialog[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:flex-start;top:0;left:0;width:100vw;height:100vh;position:fixed;z-index:9999}.box-dialog[_ngcontent-%COMP%]   .dialog-overlay[_ngcontent-%COMP%]{top:0;left:0;width:100vw;height:100vh;position:fixed;background-color:#0000004d}.dialog[_ngcontent-%COMP%]{position:absolute;margin-top:10vh;width:800px;box-shadow:#0000003d 0 3px 8px}.dialog[_ngcontent-%COMP%]   .text-center[_ngcontent-%COMP%]{text-align:center!important}@media screen and (max-width: 800px){.dialog[_ngcontent-%COMP%]{width:90vw!important}}.dialog-body[_ngcontent-%COMP%]{padding:10px}.dialog-body[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:top}.dialog-mobile[_ngcontent-%COMP%]{position:absolute;margin-top:7vh;width:95%;box-shadow:#0000003d 0 3px 8px}.dialog-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #d0d0d0;padding:10px}.dialog-title[_ngcontent-%COMP%]{font-weight:700}.dialog-close[_ngcontent-%COMP%]{display:flex;align-items:center;border-radius:50%}.dialog-close[_ngcontent-%COMP%]:hover{background-color:#d0d0d04a;cursor:pointer}.dialog-footer[_ngcontent-%COMP%]{display:flex;padding:10px;border-top:1px solid #d0d0d0;justify-content:space-between;align-items:center}.lst-errs[_ngcontent-%COMP%]   .lst-err-item[_ngcontent-%COMP%]{padding:15px 10px;border-bottom:1px dotted #e0e0e0}.lst-errs[_ngcontent-%COMP%]   .lst-err-item[_ngcontent-%COMP%]:last-child{border-bottom:none!important}.quest-info-item[_ngcontent-%COMP%]{padding:5px 0;text-align:right}.label-quest-item[_ngcontent-%COMP%]{padding:5px;border:1px solid #e0e0e0;border-radius:5px;cursor:pointer;display:block;width:-moz-fit-content;width:fit-content;float:left;margin:5px}.label-quest-item[_ngcontent-%COMP%]:hover{background-color:#eceff1}.table-header[_ngcontent-%COMP%]{text-align:center;font-weight:500}"]}),n})();var b0=M(89310),Td=M(1763);function zv(n,o){1&n&&(t.TgZ(0,"div",10),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_create_exam_width_file_pdf_cropper_edit_explain_error"),"\n"))}function Rl(n,o){1&n&&t._UZ(0,"azt-loading-effect")}let v0=(()=>{class n{constructor(e){this.commonService=e,this.headerPosition={},this.listQuestion=[],this.listCanvas=[],this.applyEdit=new t.vpe,this.listOriginalQuestion=[],this.originalHeaderPostion={},this.loadingAssets=!1,this.isApplying=!1}addHeaderPiece(){let e=document.createElement("div");e.setAttribute("class","box-crop-info header-piece"),e.dataInfo=this.headerPosition,e.style.width=this.headerPosition.width+"px",e.style.height=this.headerPosition.heigh+"px",e.style.left=this.headerPosition.left+"px",e.style.top=this.headerPosition.top+"px";let i=this.headerPosition.pageIndex;document.getElementById("canvas_edit_page_"+i)?.appendChild(e),this.addInteractiveElement(e)}processInfo(){this.addHeaderPiece();for(let e=0;e<this.listQuestion.length;e++){for(let s=0;s<this.listQuestion[e].positions.length;s++){const l=this.listQuestion[e].positions[s];let c=document.createElement("div");if(c.setAttribute("class",`box-crop-info question-piece question-piece-of-${e}`),l.inactive&&c.classList.add("inactive"),c.dataInfo=l,c.style.width=l.width+"px",c.style.height=l.heigh+"px",c.style.left=l.left+"px",c.style.top=l.top+"px",0==s){let _=document.createElement("div");if(_.setAttribute("class",`question-stt question-stt-${e} clickable`),_.textContent=`#${e+1}`,c.appendChild(_),!this.listQuestion[e].isGroup){let x=document.createElement("div");x.setAttribute("class",`question-ans-add question-ans-add-${e} clickable`),x.textContent="+",x.addEventListener("click",()=>{const b=this.listQuestion[e].answers[this.listQuestion[e].answers.length-1].label;let T=document.createElement("div");T.setAttribute("class",`answer-append box-crop-info answer-piece answer-piece-${hp[b].toLowerCase()}`);let P=this.commonService.myTranslateInstant("lang_auto_nhap_dup_chuot_de_an_hien_vung_thong_tin_nay");T.setAttribute("tittle",P);let U={...this.listQuestion[e].answers[this.listQuestion[e].answers.length-1].positions[0],left:this.listQuestion[e].answers[this.listQuestion[e].answers.length-1].positions[0].left+this.listQuestion[e].answers[this.listQuestion[e].answers.length-1].positions[0].width};T.style.width=U.width+"px",T.style.height=U.heigh+"px",T.style.top=U.top+"px",T.style.left=U.left+"px",T.style.backgroundColor=_0[hp[b].toLowerCase()],T.dataInfo=U;let q=document.getElementById("canvas_edit_page_"+U.pageIndex);q?.appendChild(T),this.addInteractiveElement(T);let B=document.createElement("div");B.setAttribute("class","box-crop-info answer-label"),B.setAttribute("tittle",P);let W={...this.listQuestion[e].answers[this.listQuestion[e].answers.length-1].remove,left:U.left,top:U.top};B.style.width=W.width+"px",B.style.height=W.heigh+"px",B.style.top=W.top+"px",B.style.left=W.left+"px",B.dataInfo=W,q?.appendChild(B),this.addInteractiveElement(B)}),c.appendChild(x)}}let d=l.pageIndex;document.getElementById("canvas_edit_page_"+d)?.appendChild(c),this.addInteractiveElement(c)}let i=document.createElement("div");i.setAttribute("class","box-crop-info question-label"),i.dataInfo=this.listQuestion[e].remove,i.style.width=this.listQuestion[e].remove.width+"px",i.style.height=this.listQuestion[e].remove.heigh+"px",i.style.left=this.listQuestion[e].remove.left+"px",i.style.top=this.listQuestion[e].remove.top+"px",this.listQuestion[e].answers.forEach(s=>{s.positions.forEach(h=>{let _=document.createElement("div");_.setAttribute("class",`box-crop-info ${!0===h.inactive?"inactive":""} answer-piece answer-piece-${s.label.toLowerCase()}`);let x=this.commonService.myTranslateInstant("lang_auto_nhap_dup_chuot_de_an_hien_vung_thong_tin_nay");_.setAttribute("tittle",x),_.inactive&&_.classList.add("inactive"),_.dataInfo=h,_.style.width=h.width+"px",_.style.height=h.heigh+"px",_.style.left=h.left+"px",_.style.top=h.top+"px",_.style.backgroundColor=_0[s.label.toLowerCase()];let b=h.pageIndex;document.getElementById("canvas_edit_page_"+b)?.appendChild(_),this.addInteractiveElement(_)});let l=document.createElement("div");l.setAttribute("class","box-crop-info answer-label"),l.dataInfo=s.remove,l.style.width=s.remove.width+"px",l.style.height=s.remove.heigh+"px",l.style.left=s.remove.left+"px",l.style.top=s.remove.top+"px";let c=s.remove.pageIndex;document.getElementById("canvas_edit_page_"+c)?.appendChild(l),this.addInteractiveElement(l)});let a=this.listQuestion[e].remove.pageIndex;document.getElementById("canvas_edit_page_"+a)?.appendChild(i),this.addInteractiveElement(i)}}processRender(){for(let e=0;e<this.listCanvas.length;e++){const i=this.listCanvas[e];let a=document.createElement("div");a.setAttribute("id","canvas_edit_page_"+e),a.classList.add("mb-3"),a.style.width=i.width+"px",a.style.height=i.height+"px",a.style.position="relative",a.style.margin="0 auto",a.style.boxShadow="3px 2px 3px 2px #ccc";let r=document.createElement("canvas"),s=document.createElement("span");s.textContent=`Page ${e+1} of ${this.listCanvas.length}`,s.style.position="absolute",s.style.bottom="10px",s.style.right="10px",s.style.fontSize="12px",s.style.color="#ccc",r.width=i.width,r.height=i.height,a.appendChild(r),a.appendChild(s),r.getContext("2d")?.drawImage(i,0,0,i.width,i.height,0,0,i.width,i.height),document.getElementById("boxEdit")?.appendChild(a);let c=document.getElementById("tipsTrick");c&&(c.style.width=i.width+"px")}}dragMoveListener(e){let i=e.target,a=(parseFloat(i.getAttribute("data-x"))||0)+e.dx,r=(parseFloat(i.getAttribute("data-y"))||0)+e.dy;i.style.top=r+"px",i.style.left=a+"px",i.setAttribute("data-x",a),i.setAttribute("data-y",r),i.dataInfo.left=parseInt(i.style.left),i.dataInfo.top=parseInt(i.style.top)}get invalidPositionsData(){let e=!1;for(let i=0;i<this.listQuestion.length;i++){if(this.listQuestion[i].remove.inactive){e=!0;break}if(this.listQuestion[i].positions.length==this.listQuestion[i].positions.filter(l=>l.inactive).length){e=!0;break}for(let l=0;l<this.listQuestion[i].answers.length;l++)if(this.listQuestion[i].answers[l].positions.length==this.listQuestion[i].answers[l].positions.filter(h=>h.inactive).length){e=!0;break}}return e}addInteractiveElement(e){e.setAttribute("data-x",parseInt(e.style.left)),e.setAttribute("data-y",parseInt(e.style.top)),interact(e).resizable({edges:{left:!0,right:!0,bottom:!0,top:!0},listeners:{move(i){var a=i.target,r=parseFloat(a.getAttribute("data-x"))||0,s=parseFloat(a.getAttribute("data-y"))||0;a.style.width=i.rect.width+"px",a.style.height=i.rect.height+"px",r+=i.deltaRect.left,a.style.top=(s+=i.deltaRect.top)+"px",a.style.left=r+"px",a.setAttribute("data-x",r),a.setAttribute("data-y",s),a.dataInfo.width=parseInt(a.style.width),a.dataInfo.heigh=parseInt(a.style.height),a.dataInfo.left=parseInt(a.style.left),a.dataInfo.top=parseInt(a.style.top)}},modifiers:[interact.modifiers.restrictEdges({outer:"parent"}),interact.modifiers.restrictSize({min:{width:10,height:10}})],inertia:!0}).draggable({listeners:{move:window.dragMoveListener},inertia:!0,modifiers:[interact.modifiers.restrictRect({restriction:"parent",endOnly:!0})]}).on("doubletap",function(i){i.currentTarget.dataInfo.inactive?(i.currentTarget.dataInfo.inactive=!1,i.currentTarget.classList.remove("inactive")):(i.currentTarget.dataInfo.inactive=!0,i.currentTarget.classList.add("inactive")),console.log(i.currentTarget.dataInfo),i.preventDefault()})}handleApply(){this.isApplying=!0,setTimeout(()=>{this.applyEdit.emit({headerPos:this.headerPosition,listQuestion:this.listQuestion})},2e3)}handleCancel(){confirm("Nh\u1eefng \u0111i\u1ec1u ch\u1ec9nh c\u1ee7a b\u1ea1n s\u1ebd b\u1ecb m\u1ea5t, b\u1ea1n c\xf3 ch\u1eafc ch\u1eafn?")&&this.applyEdit.emit()}ngOnInit(){this.listQuestion.length>0&&(this.listOriginalQuestion=Pc.cloneDeep(this.listQuestion),this.originalHeaderPostion=Pc.cloneDeep(this.headerPosition)),this.processRender(),this.processInfo(),this.loadingAssets=!0}ngAfterViewInit(){window.dragMoveListener=this.dragMoveListener}ngOnDestroy(){}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(mi.z))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-cropper-edit"]],inputs:{headerPosition:"headerPosition",listQuestion:"listQuestion",listCanvas:"listCanvas",examHeader:"examHeader"},outputs:{applyEdit:"applyEdit"},decls:19,vars:18,consts:[["style","position: fixed; top: 5px; left: 5px; right: 5px; font-size: 20px; z-index: 9999;","class","alert alert-danger p-2 text-center",4,"ngIf"],["id","mainEditArea",3,"hidden"],["id","buttonArea"],[1,"bb-holder","p-3"],["azt-track-service","cropper-edit-eys6rwcK5W","id","buttonApplys",1,"btn","btn-primary","mr-2",3,"disabled","click"],["azt-track-service","cropper-edit-zfl8meDVvX","id","buttonCancels",1,"btn","btn-secondary",3,"click"],["id","tipsTrick",1,"alert","box","p-2","mt-2","text-center",2,"margin-left","auto","margin-right","auto"],[2,"font-weight","500"],["id","boxEdit"],[4,"ngIf"],[1,"alert","alert-danger","p-2","text-center",2,"position","fixed","top","5px","left","5px","right","5px","font-size","20px","z-index","9999"]],template:function(e,i){1&e&&(t.YNc(0,zv,3,3,"div",0),t.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"button",4),t.NdJ("click",function(){return i.handleApply()}),t._uU(5),t.ALo(6,"mytranslate"),t.ALo(7,"mytranslate"),t.qZA(),t.TgZ(8,"button",5),t.NdJ("click",function(){return i.handleCancel()}),t._uU(9),t.ALo(10,"mytranslate"),t.qZA()()(),t.TgZ(11,"div",6)(12,"b",7),t._uU(13),t.ALo(14,"mytranslate"),t.qZA(),t._uU(15),t.ALo(16,"mytranslate"),t.qZA(),t._UZ(17,"div",8),t.qZA(),t.YNc(18,Rl,1,0,"azt-loading-effect",9)),2&e&&(t.Q6J("ngIf",i.invalidPositionsData),t.xp6(1),t.Q6J("hidden",!i.loadingAssets),t.xp6(3),t.Q6J("disabled",i.isApplying),t.xp6(1),t.hij(" ",i.isApplying?t.lcZ(6,8,"lang_testbank_create_exam_width_file_pdf_cropper_edit_loading_apply"):t.lcZ(7,10,"lang_testbank_create_exam_width_file_pdf_cropper_edit_apply")," "),t.xp6(4),t.Oqu(t.lcZ(10,12,"lang_button_cancel")),t.xp6(4),t.hij("",t.lcZ(14,14,"lang_testbank_create_exam_width_file_pdf_cropper_edit_tips"),": "),t.xp6(2),t.hij("",t.lcZ(16,16,"lang_testbank_create_exam_width_file_pdf_cropper_edit_note_tip")," "),t.xp6(3),t.Q6J("ngIf",!i.loadingAssets))},dependencies:[D.O5,si.l,jt.JV],styles:["#mainEditArea[_ngcontent-%COMP%]{width:1200px;margin:0 auto}#mainEditArea[_ngcontent-%COMP%]   #buttonArea[_ngcontent-%COMP%]{width:100%;text-align:center}"]}),n})();const _p=["hiddenInput"],Io=["iframePdf"],jo=["resizeBar"],y0=["boxLeftFile"],Jv=["parentResize"],Hv=["maskLayer"],fp=function(n){return{color:n}};function Gv(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",48)(1,"div"),t._uU(2,"Trang "),t.TgZ(3,"input",49),t.NdJ("keyup.enter",function(a){t.CHM(e);const r=t.oxw(3);return t.KtG(r.handleEnterPage(a))})("ngModelChange",function(a){t.CHM(e);const r=t.oxw(3);return t.KtG(r.currentPage=a)}),t.qZA(),t._uU(4),t.qZA(),t.TgZ(5,"mat-icon",50),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.changePage("prev"))}),t.ALo(6,"mytranslate"),t._uU(7,"chevron_left"),t.qZA(),t.TgZ(8,"span"),t._uU(9),t.qZA(),t.TgZ(10,"mat-icon",51),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.changePage("next"))}),t.ALo(11,"mytranslate"),t._uU(12,"chevron_right"),t.qZA()()}if(2&n){const e=t.oxw(3);t.xp6(3),t.Q6J("ngModel",e.currentPage),t.xp6(1),t.hij(" / ",e.totalPage,""),t.xp6(1),t.s9C("matTooltip",t.lcZ(6,8,"lang_auto_trang_truoc")),t.Q6J("ngStyle",t.VKq(12,fp,e.topLazyLoad?"inherit":"#595959")),t.xp6(4),t.AsE("",e.startChunkIndex+1,"-",e.startChunkIndex+e.lazyLoadSize>e.questionList.length-1?e.questionList.length:e.startChunkIndex+e.lazyLoadSize,""),t.xp6(1),t.s9C("matTooltip",t.lcZ(11,10,"lang_auto_trang_sau")),t.Q6J("ngStyle",t.VKq(14,fp,e.bottomLazyLoad?"inherit":"#595959"))}}function $v(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"mat-icon",52),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.showAllHelp())}),t.ALo(1,"mytranslate"),t._uU(2," help "),t.qZA()}2&n&&t.s9C("matTooltip",t.lcZ(1,1,"lang_testbank_create_exam_width_file_pdf_show_view_all_explain"))}function Yv(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"mat-icon",53),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.showAllHelp())}),t.ALo(1,"mytranslate"),t._uU(2," help_outlined "),t.qZA()}2&n&&t.s9C("matTooltip",t.lcZ(1,1,"lang_testbank_create_exam_width_file_pdf_hide_view_all_explain"))}function w0(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"mat-option",54),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw(3);return t.KtG(s.handleClickOption(r.index))}),t._uU(1),t.qZA()}if(2&n){const e=o.$implicit,i=t.oxw(3);t.Q6J("value",e.index+i.startQuestion),t.xp6(1),t.hij(" ",e.index+i.startQuestion," ")}}function Mm(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",30)(1,"div",31)(2,"mat-checkbox",32),t.ALo(3,"mytranslate"),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()(),t.YNc(6,Gv,13,16,"div",33),t.TgZ(7,"div")(8,"button",34),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.openDialogSpitPoint())}),t._uU(9),t.ALo(10,"mytranslate"),t.qZA()(),t.TgZ(11,"div",35),t.YNc(12,$v,3,3,"mat-icon",36),t.YNc(13,Yv,3,3,"mat-icon",37),t.TgZ(14,"mat-icon",38),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.openExamInfoDialog())}),t.ALo(15,"mytranslate"),t._uU(16,"info_outline"),t.qZA()(),t.TgZ(17,"div",39)(18,"span"),t._uU(19),t.ALo(20,"mytranslate"),t.qZA(),t.TgZ(21,"form",40)(22,"input",41),t.NdJ("keyup.enter",function(a){t.CHM(e);const r=t.oxw(2);return t.KtG(r.handleEnterQuestion(a))}),t.qZA(),t.TgZ(23,"mat-autocomplete",42,43),t.YNc(25,w0,2,2,"mat-option",44),t.ALo(26,"async"),t.qZA()()(),t._UZ(27,"input",45,46),t.TgZ(29,"button",47),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.editting=!0)}),t._uU(30),t.ALo(31,"mytranslate"),t.qZA()()}if(2&n){const e=t.MAs(24),i=t.oxw(2);t.xp6(2),t.MGl("matTooltip","",t.lcZ(3,13,"lang_testbank_create_exam_width_file_pdf_note_tutorial_Proofreading"),"."),t.Q6J("formControl",i.debuggingMode),t.xp6(2),t.Oqu(t.lcZ(5,15,"lang_testbank_create_exam_width_file_pdf_Proofreading")),t.xp6(2),t.Q6J("ngIf",i.questionList.length>i.limitLazyLoad),t.xp6(3),t.Oqu(t.lcZ(10,17,"lang_split_points")),t.xp6(3),t.Q6J("ngIf",!i.isShowAllHelp),t.xp6(1),t.Q6J("ngIf",i.isShowAllHelp),t.xp6(1),t.s9C("matTooltip",t.lcZ(15,19,"lang_auto_chi_tiet_de_thi")),t.xp6(5),t.hij("",t.lcZ(20,21,"lang_testbank_create_exam_width_file_pdf_go_to"),": "),t.xp6(3),t.Q6J("formControl",i.myControl)("matAutocomplete",e),t.xp6(3),t.Q6J("ngForOf",t.lcZ(26,23,i.filteredOptions)),t.xp6(5),t.Oqu(t.lcZ(31,25,"lang_button_edit"))}}function jf(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"b"),t._uU(2),t.qZA(),t.BQk()),2&n){const e=o.$implicit;t.xp6(2),t.hij("",e,"\xa0")}}function Kv(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",55)(1,"mat-icon",56),t._uU(2,"info_outlined"),t.qZA(),t._uU(3),t.ALo(4,"mytranslate"),t.TgZ(5,"div",57),t.YNc(6,jf,3,1,"ng-container",58),t.qZA(),t._uU(7),t.ALo(8,"mytranslate"),t.TgZ(9,"div",59)(10,"button",60),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.showNote=!1)}),t._uU(11),t.ALo(12,"mytranslate"),t.qZA()()()}if(2&n){const e=t.oxw(2);t.xp6(3),t.hij(" ",t.lcZ(4,4,"lang_testbank_create_exam_width_file_pdf_unrecognizable_one")," "),t.xp6(3),t.Q6J("ngForOf",e.errorQuestions),t.xp6(1),t.hij(" ",t.lcZ(8,6,"lang_testbank_create_exam_width_file_pdf_unrecognizable_twe"),". "),t.xp6(4),t.Oqu(t.lcZ(12,8,"lang_testbank_create_exam_width_file_pdf_understood"))}}function C0(n,o){1&n&&(t.TgZ(0,"span",64),t._uU(1,",\xa0"),t.qZA())}function gp(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"b",62),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw(4);let l;return t.KtG(s.goToQuestionAll(null!==(l=r.index)&&void 0!==l?l:0))}),t.ALo(2,"mytranslate"),t._uU(3),t.ALo(4,"mytranslate"),t.qZA(),t.YNc(5,C0,2,0,"span",63),t.BQk()}if(2&n){const e=o.$implicit,i=o.index,a=t.oxw(4);t.xp6(1),t.s9C("matTooltip",t.lcZ(2,4,"lang_testbank_create_exam_width_file_pdf_click_roll")),t.xp6(2),t.AsE("",t.lcZ(4,6,"lang_testbank_create_exam_width_file_pdf_question")," ",e.question.label,""),t.xp6(2),t.Q6J("ngIf",i<a.invalidTypeQuestionConfig.length-1)}}function Qr(n,o){if(1&n&&(t.ynx(0),t._uU(1),t.ALo(2,"mytranslate"),t.TgZ(3,"div",57),t.YNc(4,gp,6,8,"ng-container",58),t.qZA(),t.BQk()),2&n){const e=t.oxw(3);t.xp6(1),t.hij(" ",t.lcZ(2,2,"lang_testbank_create_exam_width_file_pdf_check_configuration")," "),t.xp6(3),t.Q6J("ngForOf",e.invalidTypeQuestionConfig)}}function kd(n,o){if(1&n&&(t.TgZ(0,"div",61)(1,"mat-icon",56),t._uU(2,"info_outlined"),t.qZA(),t._uU(3),t.ALo(4,"mytranslate"),t.YNc(5,Qr,5,4,"ng-container",2),t.qZA()),2&n){const e=t.oxw(2);t.xp6(3),t.hij(" ",t.lcZ(4,2,"lang_testbank_create_exam_width_file_pdf_cant_save")," "),t.xp6(2),t.Q6J("ngIf",e.invalidTypeQuestionConfig.length>0)}}function Wv(n,o){1&n&&(t.ynx(0),t._uU(1),t.ALo(2,"mytranslate"),t.BQk()),2&n&&(t.xp6(1),t.hij("",t.lcZ(2,1,"lang_testbank_create_exam_width_file_pdf_cont_save"),"."))}function Vv(n,o){if(1&n&&(t.TgZ(0,"div",61)(1,"mat-icon",56),t._uU(2,"info_outlined"),t.qZA(),t.YNc(3,Wv,3,3,"ng-container",2),t.qZA()),2&n){const e=t.oxw(2);t.xp6(3),t.Q6J("ngIf",!e.nameExamInp.value||""==e.nameExamInp.value.trim())}}function Xv(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",65)(1,"div",66)(2,"div")(3,"mat-icon",67),t._uU(4,"cloud_upload"),t.qZA()(),t.TgZ(5,"div"),t._uU(6),t.ALo(7,"mytranslate"),t.qZA(),t.TgZ(8,"div")(9,"azt-download-link-item",68),t.NdJ("click",function(a){t.CHM(e);const r=t.oxw(2);return t.KtG(r.isMobileWebView?"":a.stopPropagation())}),t.ALo(10,"convertCdnLinkOfGitHubWithLocale"),t.ALo(11,"mytranslate"),t.qZA()(),t.TgZ(12,"div")(13,"azt-download-link-item",68),t.NdJ("click",function(a){t.CHM(e);const r=t.oxw(2);return t.KtG(r.isMobileWebView?"":a.stopPropagation())}),t.ALo(14,"convertCdnLinkOfGitHubWithLocale"),t.ALo(15,"mytranslate"),t.qZA()()()()}2&n&&(t.xp6(6),t.Oqu(t.lcZ(7,11,"lang_tutorial_upload_file_exam")),t.xp6(3),t.Akn("color: #5c5c5c"),t.Q6J("dataUrl",t.lcZ(10,13,"medias_[LANG]/de_mau_azota.zip"))("target","_self")("fileName",t.lcZ(11,15,"lang_auto_de_mau_azota_pdf"))("fileDescription","lang_auto_click_vao_day_de_download_de_mau"),t.xp6(4),t.Q6J("dataUrl",t.lcZ(14,17,"medias_[LANG]/de_mau_azota.zip"))("target","_self")("fileName",t.lcZ(15,19,"lang_auto_de_mau_azota_pdf"))("fileDescription","lang_auto_de_mau_azota_pdf"))}function t3(n,o){1&n&&(t.TgZ(0,"div",77),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_testbank_create_exam_width_file_pdf_exam_header_not_select")))}function e3(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",73),t.YNc(1,t3,3,3,"div",74),t.TgZ(2,"mat-icon",75),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.useHeader=!a.useHeader)}),t.ALo(3,"mytranslate"),t.ALo(4,"mytranslate"),t._uU(5,"clear"),t.qZA(),t._UZ(6,"img",76),t.qZA()}if(2&n){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",!e.useHeader),t.xp6(1),t.Q6J("matTooltip",e.useHeader?t.lcZ(3,3,"lang_auto_xoa"):t.lcZ(4,5,"lang_auto_bo_xoa")),t.xp6(4),t.Q6J("src",e.examHeader,t.LSH)}}function T0(n,o){1&n&&(t.TgZ(0,"div",102)(1,"mat-icon",56),t._uU(2,"error"),t.qZA(),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()),2&n&&(t.xp6(3),t.hij(" ",t.lcZ(4,1,"lang_auto_cau_hoi_nay_khong_co_noi_dung_cac_dap_an_abcd_nen_dot")+"!"," "))}function Ul(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"mat-icon",110),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(3).$implicit,r=t.oxw(3);return t.KtG(r.toggleRemoveAllGroup(a.group))}),t.ALo(1,"mytranslate"),t._uU(2,"clear"),t.qZA()}2&n&&t.Q6J("matTooltip",t.lcZ(1,1,"lang_auto_xoa_toan_bo_cau_hoi_trong_nhom"))}function Wn(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"mat-icon",111),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(3).$implicit,r=t.oxw(3);return t.KtG(r.toggleRemoveAllGroup(a.group))}),t.ALo(1,"mytranslate"),t._uU(2,"clear"),t.qZA()}2&n&&t.Q6J("matTooltip",t.lcZ(1,1,"lang_auto_bo_xoa_toan_bo_cau_hoi_trong_nhom"))}function k0(n,o){1&n&&t._UZ(0,"div",77)}function ls(n,o){1&n&&(t.TgZ(0,"div",112),t.ALo(1,"mytranslate"),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()),2&n&&(t.s9C("matTooltip",t.lcZ(1,2,"lang_testbank_create_exam_width_file_pdf_question_not_mix")),t.xp6(2),t.Oqu(t.lcZ(3,4,"lang_testbank_create_exam_width_file_pdf_not_mix")))}function A0(n,o){1&n&&(t.TgZ(0,"div",113),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij("",t.lcZ(2,1,"lang_testbank_create_exam_width_file_pdf_not_mix"),"?"))}function n3(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",103),t.YNc(1,Ul,3,3,"mat-icon",104),t.YNc(2,Wn,3,3,"mat-icon",105),t.YNc(3,k0,1,0,"div",74),t.TgZ(4,"div",106),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2).$implicit,r=t.oxw(3);return t.KtG(r.toggleMixInGroup(a.group))}),t.YNc(5,ls,4,6,"div",107),t.YNc(6,A0,3,3,"div",108),t._UZ(7,"img",109),t.ALo(8,"mytranslate"),t.ALo(9,"mytranslate"),t.qZA()()}if(2&n){const e=t.oxw(2),i=e.index,a=e.$implicit,r=t.oxw(3);t.Q6J("hidden",!r.firstInGroupIndexes.includes(i)),t.xp6(1),t.Q6J("ngIf",r.atLeastOneUse(a.group)),t.xp6(1),t.Q6J("ngIf",!r.atLeastOneUse(a.group)),t.xp6(1),t.Q6J("ngIf",!r.atLeastOneUse(a.group)),t.xp6(1),t.Gre("mb-2 img-group image_group_",a.group,""),t.xp6(1),t.Q6J("ngIf",a.groupType),t.xp6(1),t.Q6J("ngIf",!a.groupType),t.xp6(1),t.s9C("matTooltip",a.groupType?t.lcZ(8,11,"lang_testbank_create_exam_width_file_pdf_click_mix_question"):t.lcZ(9,13,"lang_testbank_create_exam_width_file_pdf_click_pin_question")),t.s9C("src",a.groupUrl,t.LSH)}}function Bi(n,o){1&n&&(t.TgZ(0,"div",77),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_testbank_create_exam_width_file_pdf_question_not_select")))}const qf=function(n,o){return{"width.%":n,"height.%":o}};function S0(n,o){if(1&n&&(t.TgZ(0,"div",121)(1,"div",122),t._UZ(2,"img",123)(3,"img",116),t.qZA()()),2&n){const e=o.$implicit,i=t.oxw(3).$implicit;t.xp6(2),t.Q6J("ngStyle",t.WLB(4,qf,e.remove.width/i.question.width*100,e.remove.height/i.question.height*100))("src",e.remove.url,t.LSH),t.xp6(1),t.Q6J("ngStyle",t.WLB(7,qf,e.width/i.question.width*100,e.height/i.question.height*100))("src",e.url,t.LSH)}}function xp(n,o){if(1&n&&(t.TgZ(0,"div",114)(1,"div",115),t._UZ(2,"img",116),t.qZA(),t.TgZ(3,"div",117),t._UZ(4,"img",118),t.qZA(),t.TgZ(5,"div",119),t.YNc(6,S0,4,10,"div",120),t.qZA()()),2&n){const e=t.oxw(2).$implicit;t.xp6(2),t.Q6J("ngStyle",t.WLB(6,qf,e.question.remove.width/e.question.width*100,e.question.remove.height/e.question.height*100))("src",e.question.remove.url,t.LSH),t.xp6(2),t.Q6J("width",e.question.width)("height",e.question.height)("src",e.question.url,t.LSH),t.xp6(2),t.Q6J("ngForOf",e.answers)}}function i3(n,o){1&n&&t._UZ(0,"div",77)}function o3(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"span",126),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw(3).$implicit,l=t.oxw(3);return t.KtG(l.changeAnswerResult(s,r.label))}),t._uU(1),t.qZA()}if(2&n){const e=o.$implicit,i=t.oxw(3).$implicit;t.Q6J("ngClass",i.tempData.answerResult.includes(e.label)?"btn-ans-result":""),t.xp6(1),t.Oqu(e.label)}}function a3(n,o){if(1&n&&(t.TgZ(0,"div",124)(1,"span",94),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.YNc(4,o3,2,2,"span",125),t.qZA()),2&n){const e=t.oxw(2).$implicit;t.xp6(2),t.hij("",t.lcZ(3,2,"lang_testbank_create_exam_width_file_pdf_answer"),": "),t.xp6(2),t.Q6J("ngForOf",e.answers)}}function r3(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",127)(1,"span",128),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2).index,r=t.oxw(3);return t.KtG(r.setupFillAnswersQuestion(a))}),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()}2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"lang_testbank_create_exam_width_file_pdf_enter_add_answer")," "))}function s3(n,o){1&n&&(t.TgZ(0,"b"),t._uU(1,"\u25b2"),t.qZA())}function l3(n,o){1&n&&(t.TgZ(0,"mat-icon",98),t.ALo(1,"mytranslate"),t._uU(2,"shuffle"),t.qZA()),2&n&&t.s9C("matTooltip",t.lcZ(1,1,"lang_testbank_create_exam_width_file_pdf_keep_stable_answer"))}function c3(n,o){1&n&&(t.TgZ(0,"mat-icon",98),t.ALo(1,"mytranslate"),t._uU(2,"shuffle_on"),t.qZA()),2&n&&t.s9C("matTooltip",t.lcZ(1,1,"lang_testbank_create_exam_width_file_pdf_tutorial_click_mix_question"))}function u3(n,o){1&n&&(t.ynx(0),t._uU(1,"\xa0|\xa0"),t.BQk())}function d3(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"b"),t._uU(2),t.qZA(),t.YNc(3,u3,2,0,"ng-container",2),t.BQk()),2&n){const e=o.$implicit,i=o.index,a=t.oxw(4).$implicit;t.xp6(2),t.Oqu(e),t.xp6(1),t.Q6J("ngIf",i<a.tempData.answerResult.length-1)}}function m3(n,o){if(1&n&&(t.TgZ(0,"div",131),t._uU(1),t.ALo(2,"mytranslate"),t.YNc(3,d3,4,2,"ng-container",58),t.qZA()),2&n){const e=t.oxw(3).$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,2,"lang_testbank_create_exam_width_file_pdf_list_answer"),": "),t.xp6(2),t.Q6J("ngForOf",e.tempData.answerResult)}}function h3(n,o){1&n&&(t.TgZ(0,"div",132)(1,"mat-icon",56),t._uU(2,"info_outlined"),t.qZA(),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()),2&n&&(t.xp6(3),t.hij(" ",t.lcZ(4,1,"lang_testbank_create_exam_width_file_pdf_please_enter_answer")," "))}function p3(n,o){1&n&&(t.TgZ(0,"div",132)(1,"mat-icon",56),t._uU(2,"info_outlined"),t.qZA(),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()),2&n&&(t.xp6(3),t.hij(" ",t.lcZ(4,1,"lang_testbank_create_exam_width_file_pdf_please_enter_point")," "))}function _3(n,o){1&n&&(t.TgZ(0,"div",131)(1,"mat-icon",56),t._uU(2,"info_outlined"),t.qZA(),t._uU(3),t.ALo(4,"mytranslate"),t.TgZ(5,"a",133),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()()),2&n&&(t.xp6(3),t.hij(" ",t.lcZ(4,2,"lang_testbank_create_exam_width_file_pdf_not_identification_answer"),". "),t.xp6(3),t.hij(" ",t.lcZ(7,4,"lang_auto_xem_huong_dan")," "))}function Ff(n,o){1&n&&(t.TgZ(0,"div",132)(1,"mat-icon",56),t._uU(2,"info_outlined"),t.qZA(),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()),2&n&&(t.xp6(3),t.hij(" ",t.lcZ(4,1,"lang_testbank_create_exam_width_file_pdf_note_quizzes")," "))}function f3(n,o){1&n&&(t.TgZ(0,"div",132)(1,"mat-icon",56),t._uU(2,"info_outlined"),t.qZA(),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()),2&n&&(t.xp6(3),t.hij(" ",t.lcZ(4,1,"lang_testbank_create_exam_width_file_pdf_enter_max_point")," "))}function Qf(n,o){1&n&&(t.TgZ(0,"div",132)(1,"mat-icon",56),t._uU(2,"info_outlined"),t.qZA(),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()),2&n&&(t.xp6(3),t.hij(" ",t.lcZ(4,1,"lang_testbank_create_exam_width_file_pdf_please_select_answer")," "))}function g3(n,o){if(1&n&&(t.TgZ(0,"div",136),t._UZ(1,"img",137),t.qZA()),2&n){const e=t.oxw(4).$implicit;t.xp6(1),t.Q6J("src",e.help.url,t.LSH)}}function x3(n,o){1&n&&(t.TgZ(0,"div",138),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_testbank_create_exam_width_file_pdf_not_data_explain")))}function b3(n,o){if(1&n&&(t.ynx(0),t.YNc(1,g3,2,1,"div",134),t.YNc(2,x3,3,3,"ng-template",null,135,t.W1O),t.BQk()),2&n){const e=t.MAs(3),i=t.oxw(3).$implicit;t.xp6(1),t.Q6J("ngIf",i.help.url)("ngIfElse",e)}}function ka(n,o){if(1&n&&(t.ynx(0),t.YNc(1,m3,4,4,"div",129),t.ALo(2,"isFillAnswerByType"),t.YNc(3,h3,5,3,"div",130),t.ALo(4,"isFillAnswerByType"),t.YNc(5,p3,5,3,"div",130),t.YNc(6,_3,8,6,"div",129),t.YNc(7,Ff,5,3,"div",130),t.ALo(8,"isOneChoiceAnswerByType"),t.YNc(9,f3,5,3,"div",130),t.YNc(10,Qf,5,3,"div",130),t.ALo(11,"isOneChoiceAnswerByType"),t.YNc(12,b3,4,2,"ng-container",2),t.BQk()),2&n){const e=t.oxw(2).$implicit,i=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.tempData.answerResult.length>0&&t.lcZ(2,8,e.tempData.answerType)),t.xp6(2),t.Q6J("ngIf",0==e.tempData.answerResult.length&&t.lcZ(4,10,e.tempData.answerType)),t.xp6(2),t.Q6J("ngIf",!e.tempData.point&&!i.isFullNoPoint),t.xp6(1),t.Q6J("ngIf",e.answers.length>0&&1==e.answers[0].width&&1==e.answers[0].height),t.xp6(1),t.Q6J("ngIf",e.answers.length<2&&t.lcZ(8,12,e.tempData.answerType)),t.xp6(2),t.Q6J("ngIf",e.tempData.point<0),t.xp6(1),t.Q6J("ngIf",0==e.tempData.answerResult.length&&t.lcZ(11,14,e.tempData.answerType)),t.xp6(2),t.Q6J("ngIf",e.tempData.isShowHelp)}}function Cr(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",143),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(3).index,r=t.oxw(3);return t.KtG(r.clickUploadFile(a))}),t.TgZ(1,"div",127)(2,"mat-icon",67),t._uU(3,"cloud_upload"),t.qZA(),t.TgZ(4,"p"),t._uU(5),t.ALo(6,"mytranslate"),t.qZA(),t.TgZ(7,"p"),t._uU(8),t.ALo(9,"mytranslate"),t.qZA()()()}2&n&&(t.xp6(5),t.Oqu(t.lcZ(6,2,"lang_testbank_create_exam_width_file_pdf_attach_file_audio")),t.xp6(3),t.hij("",t.lcZ(9,4,"lang_testbank_create_exam_width_file_docx_click_choose_audio"),"."))}function v3(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",146)(1,"audio",147),t._UZ(2,"source",148),t.ALo(3,"mycdn"),t._uU(4," Your browser does not support the audio element. "),t.qZA(),t.TgZ(5,"span",149),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(4).$implicit;return t.KtG(a.tempData.questionMedia=[])}),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()()}if(2&n){const e=o.$implicit;t.xp6(2),t.Q6J("src",t.lcZ(3,2,e.url),t.LSH),t.xp6(4),t.hij(" ",t.lcZ(7,4,"lang_auto_xoa")," ")}}function y3(n,o){if(1&n&&(t.TgZ(0,"div",144),t.YNc(1,v3,8,6,"div",145),t.qZA()),2&n){const e=t.oxw(3).$implicit;t.xp6(1),t.Q6J("ngForOf",e.tempData.questionMedia)}}function w3(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",139)(1,"input",140),t.NdJ("change",function(a){t.CHM(e);const r=t.oxw(2).$implicit,s=t.oxw(3);return t.KtG(s.uploadFileQuestion(r,a))}),t.qZA(),t.YNc(2,Cr,10,6,"div",141),t.YNc(3,y3,2,1,"div",142),t.qZA()}if(2&n){const e=t.oxw(2),i=e.index,a=e.$implicit;t.xp6(1),t.Q6J("id","inputFileQuestion_"+i),t.xp6(1),t.Q6J("ngIf",0===a.tempData.questionMedia.length),t.xp6(1),t.Q6J("ngIf",a.tempData.questionMedia.length>0)}}function O0(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",80),t.YNc(1,T0,5,3,"div",81),t.ALo(2,"isOneChoiceAnswerByType"),t.YNc(3,n3,10,15,"div",82),t.TgZ(4,"div",83)(5,"mat-icon",84),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().index,r=t.oxw(3);return t.KtG(r.changeSelectTempData(a))}),t.ALo(6,"mytranslate"),t.ALo(7,"mytranslate"),t._uU(8,"clear"),t.qZA(),t.YNc(9,Bi,3,3,"div",74),t.YNc(10,xp,7,9,"div",85),t.qZA(),t.TgZ(11,"div",86)(12,"div",87),t.YNc(13,i3,1,0,"div",74),t.TgZ(14,"div",88)(15,"span",89),t._uU(16),t.ALo(17,"mytranslate"),t.qZA(),t.TgZ(18,"select",90),t.NdJ("change",function(a){t.CHM(e);const r=t.oxw().$implicit,s=t.oxw(3);return t.KtG(s.changeTypeQuestion(r,a))}),t.TgZ(19,"option",91),t.ALo(20,"isOneChoiceAnswerByType"),t._uU(21),t.ALo(22,"mytranslate"),t.qZA(),t.TgZ(23,"option",91),t.ALo(24,"isFillAnswerByType"),t._uU(25),t.ALo(26,"mytranslate"),t.qZA(),t.TgZ(27,"option",91),t.ALo(28,"isEssayAnswerByType"),t._uU(29),t.ALo(30,"mytranslate"),t.qZA()()(),t.YNc(31,a3,5,4,"div",92),t.ALo(32,"isOneChoiceAnswerByType"),t.YNc(33,r3,4,3,"div",93),t.ALo(34,"isFillAnswerByType"),t.TgZ(35,"div",88)(36,"span",94),t._uU(37),t.ALo(38,"mytranslate"),t.qZA(),t.TgZ(39,"input",95),t.NdJ("input",function(a){t.CHM(e);const r=t.oxw().$implicit,s=t.oxw(3);return t.KtG(s.changeQuestionPoint(r,a))}),t.qZA()(),t.TgZ(40,"mat-icon",96),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().$implicit,r=t.oxw(3);return t.KtG(r.toggleViewHelp(a))}),t.ALo(41,"mytranslate"),t.ALo(42,"mytranslate"),t._uU(43),t.qZA(),t.TgZ(44,"span",97),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().$implicit;return t.KtG(a.tempData.isShowAttach=!a.tempData.isShowAttach)}),t.TgZ(45,"mat-icon",98),t.ALo(46,"mytranslate"),t._uU(47,"attachment"),t.qZA(),t.YNc(48,s3,2,0,"b",2),t.qZA(),t.TgZ(49,"span",99),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().$implicit,r=t.oxw(3);return t.KtG(r.toogleMixAns(a))}),t.YNc(50,l3,3,3,"mat-icon",100),t.YNc(51,c3,3,3,"mat-icon",100),t.qZA()()(),t.YNc(52,ka,13,16,"ng-container",2),t.YNc(53,w3,4,3,"div",101),t.qZA()}if(2&n){const e=t.oxw(),i=e.index,a=e.$implicit,r=t.oxw(3);t.uIk("id","list-question-box-item-"+i),t.xp6(1),t.Q6J("ngIf",0==a.answers.length&&t.lcZ(2,31,a.tempData.answerType)),t.xp6(2),t.Q6J("ngIf",a.groupUrl),t.xp6(2),t.Q6J("matTooltip",a.tempData.isSelect?t.lcZ(6,33,"lang_auto_xoa"):t.lcZ(7,35,"lang_auto_bo_xoa")),t.xp6(4),t.Q6J("ngIf",!a.tempData.isSelect),t.xp6(1),t.Q6J("ngIf",r.debuggingMode.value),t.xp6(2),t.Q6J("ngClass","")("ngClass","border-result"),t.xp6(1),t.Q6J("ngIf",!a.tempData.isSelect),t.xp6(3),t.Oqu(t.lcZ(17,37,"lang_testbank_create_exam_width_file_pdf_question")+" "+a.question.label),t.xp6(3),t.Q6J("value",1)("selected",t.lcZ(20,39,a.tempData.answerType)),t.xp6(2),t.Oqu(t.lcZ(22,41,"lang_testbank_create_exam_width_file_pdf_select_answer")),t.xp6(2),t.Q6J("value",4)("selected",t.lcZ(24,43,a.tempData.answerType)),t.xp6(2),t.Oqu(t.lcZ(26,45,"lang_testbank_create_exam_width_file_pdf_enter_blank")),t.xp6(2),t.Q6J("value",3)("selected",t.lcZ(28,47,a.tempData.answerType)),t.xp6(2),t.Oqu(t.lcZ(30,49,"lang_testbank_create_exam_width_file_docx_essay")),t.xp6(2),t.Q6J("ngIf",t.lcZ(32,51,a.tempData.answerType)),t.xp6(2),t.Q6J("ngIf",t.lcZ(34,53,a.tempData.answerType)),t.xp6(4),t.hij("",t.lcZ(38,55,"lang_point"),": "),t.xp6(2),t.Q6J("value",a.tempData.point.toString().length>8?a.tempData.point.toFixed(8):a.tempData.point),t.xp6(1),t.s9C("matTooltip",a.tempData.isShowHelp?t.lcZ(41,57,"lang_testbank_create_exam_width_file_pdf_hide_view_explain"):t.lcZ(42,59,"lang_testbank_create_exam_width_file_pdf_show_view_explain")),t.xp6(3),t.hij(" ",a.tempData.isShowHelp?"help":"help_outlined"," "),t.xp6(2),t.s9C("matTooltip",t.lcZ(46,61,"lang_testbank_create_exam_width_file_pdf_attach_file_question")),t.xp6(3),t.Q6J("ngIf",a.tempData.isShowAttach),t.xp6(2),t.Q6J("ngIf",1==a.isFixAns),t.xp6(1),t.Q6J("ngIf",0==a.isFixAns),t.xp6(1),t.Q6J("ngIf",a.tempData.isSelect),t.xp6(1),t.Q6J("ngIf",!0===a.tempData.isShowAttach)}}function C3(n,o){if(1&n&&(t.TgZ(0,"div",78),t.YNc(1,O0,54,63,"div",79),t.qZA()),2&n){const e=o.index,i=t.oxw(3);t.xp6(1),t.Q6J("ngIf",i.questionList.length<=i.limitLazyLoad||e>=i.startChunkIndex&&e<i.startChunkIndex+i.lazyLoadSize)}}function T3(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",150)(1,"div"),t._uU(2,"Trang "),t.TgZ(3,"input",49),t.NdJ("keyup.enter",function(a){t.CHM(e);const r=t.oxw(3);return t.KtG(r.handleEnterPage(a))})("ngModelChange",function(a){t.CHM(e);const r=t.oxw(3);return t.KtG(r.currentPage=a)}),t.qZA(),t._uU(4),t.qZA(),t.TgZ(5,"mat-icon",151),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.changePage("prev"))}),t.ALo(6,"mytranslate"),t._uU(7,"chevron_left"),t.qZA(),t.TgZ(8,"span"),t._uU(9),t.qZA(),t.TgZ(10,"mat-icon",152),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.changePage("next"))}),t.ALo(11,"mytranslate"),t._uU(12,"chevron_right"),t.qZA()()}if(2&n){const e=t.oxw(3);t.xp6(3),t.Q6J("ngModel",e.currentPage),t.xp6(1),t.hij(" / ",e.totalPage,""),t.xp6(1),t.s9C("matTooltip",t.lcZ(6,8,"lang_auto_trang_truoc")),t.Q6J("ngStyle",t.VKq(12,fp,e.topLazyLoad?"inherit":"#595959")),t.xp6(4),t.AsE("",e.startChunkIndex+1,"-",e.startChunkIndex+e.lazyLoadSize>e.questionList.length-1?e.questionList.length:e.startChunkIndex+e.lazyLoadSize,""),t.xp6(1),t.s9C("matTooltip",t.lcZ(11,10,"lang_auto_trang_sau")),t.Q6J("ngStyle",t.VKq(14,fp,e.bottomLazyLoad?"inherit":"#595959"))}}function k3(n,o){if(1&n&&(t.TgZ(0,"div",69),t.YNc(1,e3,7,7,"div",70),t.YNc(2,C3,2,1,"div",71),t.YNc(3,T3,13,16,"div",72),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.examHeader),t.xp6(1),t.Q6J("ngForOf",e.questionList),t.xp6(1),t.Q6J("ngIf",e.questionList.length>e.limitLazyLoad)}}function E0(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",153),t._uU(1),t.ALo(2,"mytranslate"),t._UZ(3,"br"),t._uU(4),t.ALo(5,"mytranslate"),t._UZ(6,"br"),t.TgZ(7,"mat-icon",154),t._uU(8,"report"),t.qZA(),t._UZ(9,"br"),t.TgZ(10,"span",155),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.resetBoxExamQuestions("tryOther"))}),t._uU(11),t.ALo(12,"mytranslate"),t.qZA()()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,3,"lang_testbank_create_exam_width_file_pdf_not_analysis_exam"),". "),t.xp6(3),t.hij(" ",t.lcZ(5,5,"lang_testbank_create_exam_width_file_pdf_contact_admin"),". "),t.xp6(7),t.Oqu(t.lcZ(12,7,"lang_testbank_create_exam_width_file_pdf_create_exam")))}function A3(n,o){if(1&n&&(t.TgZ(0,"div",161)(1,"span",162),t._uU(2),t.qZA()()),2&n){const e=o.$implicit;t.xp6(2),t.Oqu(e)}}function S3(n,o){if(1&n&&(t.TgZ(0,"div",156)(1,"div",157)(2,"div",158),t._UZ(3,"mat-spinner",159),t.qZA(),t.YNc(4,A3,3,1,"div",160),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(3),t.Q6J("strokeWidth",2)("diameter",30),t.xp6(1),t.Q6J("ngForOf",e.arrStatusFileExam)}}function O3(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",163)(1,"app-cropper-edit",164),t.NdJ("applyEdit",function(a){t.CHM(e);const r=t.oxw(2);return t.KtG(r.applyEditEvent(a))}),t.qZA()()}if(2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("listQuestion",e.rootQuestionInfo)("headerPosition",e.rootHeaderPosition)("listCanvas",e.rootCanvases)}}const M0=function(n){return{width:n}};function I0(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",3)(1,"editor-layout",4),t.NdJ("handleConfirm",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.rxjsHandleSaveExam())})("handleCancel",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.resetBoxExamQuestions())}),t.TgZ(2,"div",5)(3,"div",6)(4,"div",7,8)(6,"div",9,10),t._UZ(8,"input",11),t.YNc(9,Mm,32,27,"div",12),t.YNc(10,Kv,13,10,"div",13),t.YNc(11,kd,6,4,"div",14),t.YNc(12,Vv,4,1,"div",14),t.TgZ(13,"div",15),t.YNc(14,Xv,16,21,"div",16),t._UZ(15,"div",17)(16,"div",18),t.YNc(17,k3,4,3,"div",19),t.YNc(18,E0,13,9,"div",20),t.qZA()(),t.TgZ(19,"div",21,22),t.NdJ("mousedown",function(a){t.CHM(e);const r=t.oxw();return t.KtG(r.handleMouseDown(a))}),t.qZA(),t.TgZ(21,"div",23,24),t._UZ(23,"div",25,26)(25,"iframe",27),t.ALo(26,"safe"),t.qZA()()(),t.YNc(27,S3,5,3,"div",28),t.qZA()()(),t.YNc(28,O3,2,3,"ng-template",29)}if(2&n){const e=t.oxw();t.Q6J("hidden",e.editting),t.xp6(1),t.Q6J("headerBackToLink",e.backToLink)("showInput",!0)("showConfirmButton",!0)("examName",e.nameExamInp),t.xp6(5),t.Q6J("ngStyle",t.VKq(19,M0,e.notShowSourceFile?"100%":"calc(60% - 5px)")),t.xp6(3),t.Q6J("ngIf",e.questionList.length>0),t.xp6(1),t.Q6J("ngIf",e.errorQuestions.length>0&&e.showNote),t.xp6(1),t.Q6J("ngIf",e.invalidTypeQuestionConfig.length>0),t.xp6(1),t.Q6J("ngIf",!e.nameExamInp.value||""==e.nameExamInp.value.trim()),t.xp6(2),t.Q6J("ngIf",!e.doneAllProccessTasks),t.xp6(3),t.Q6J("ngIf",e.questionList.length>0&&e.cropperDone),t.xp6(1),t.Q6J("ngIf",e.errAnalyzingPdf),t.xp6(3),t.Q6J("hidden",e.notShowSourceFile),t.xp6(4),t.Q6J("src",t.lcZ(26,17,e.whiteListCurrentExamFileUploadedUrl),t.uOi),t.xp6(2),t.Q6J("ngIf",e.isShowLoadingFileExam),t.xp6(1),t.Q6J("ngIf",e.editting)}}function E3(n,o){if(1&n&&(t.TgZ(0,"div",165),t._uU(1),t.ALo(2,"mytranslate"),t.ALo(3,"mytranslate"),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.lnq(" ",t.lcZ(2,3,"lang_auto_your_current_browser")," ",""+e.currentBrowserInUsed,". ",t.lcZ(3,5,"lang_auto_no_support_browser"),"\n")}}function M3(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"azt-exam-info",166),t.NdJ("closeDialog",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.closeDialogExamInfo())})("goToQuestion",function(a){t.CHM(e);const r=t.oxw();return t.KtG(r.onHandleGoToQuestion(a))}),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("startIndexQuestion",e.startQuestion)("data",e.dataExamInfo)("type","createPDF")}}const Im="exam_questions";let I3=(()=>{class n extends St.Q{get isSupportedBrowser(){let e=this.commonService.getBrowserType().toString();return!(!["chrome","firefox"].includes(e.split(" ")[0].toLowerCase())||parseInt(e.split(" ")[1])<75)}get currentBrowserInUsed(){let e="",i=this.commonService.myTranslateInstant("lang_auto_version");return this.deviceDetectorService.browser&&(e=this.deviceDetectorService.browser+i+this.deviceDetectorService.browser_version),e}atLeastOneUse(e){return this.questionList.filter(i=>i.group===e&&i.tempData.isSelect).length>0}changePage(e){"prev"==e&&(this.topLazyLoad?(this.startChunkIndex-=Fr,this.currentPage--):(this.startChunkIndex=0,this.currentPage=1)),"next"==e&&this.bottomLazyLoad&&(this.startChunkIndex+=Fr,this.currentPage++)}handleMouseDown(e){this.boxLeftFile&&(this.x=e.clientX,this.y=e.clientY,this.leftWidth=this.boxLeftFile.nativeElement.getBoundingClientRect().width,this.maskLayer&&(this.maskLayer.nativeElement.style.width="100%"),this.resizeBar&&this.resizeBar.nativeElement.classList.add("hover"),document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseUp))}_filter(e){return this.questionList}handleEnterQuestion(e){let i=e.target,a=parseInt(i.value);(a<1||a>this.questionList.length)&&(a=1,this.myControl.setValue(this.startQuestion)),this.questionList.length<=500?this.goToQuestionAll(a-1):1==a?(this.startChunkIndex=0,this.currentPage=1,setTimeout(()=>{this.goToQuestionAll(a-1)},1e3)):(this.currentPage=Math.ceil(a/Fr),this.startChunkIndex=(this.currentPage-1)*Fr,setTimeout(()=>{this.goToQuestionAll(a-1)},1e3)),i.blur(),this.hiddenInput&&this.hiddenInput.nativeElement.click()}handleEnterPage(e){let i=e.target,a=parseInt(i.value);a<1||a>this.totalPage?(this.startChunkIndex=0,this.currentPage=1):(this.startChunkIndex=(a-1)*Fr,this.currentPage=a),i.blur()}handleClickOption(e){if(e>=this.startChunkIndex&&e<this.startChunkIndex+Fr)this.goToQuestionAll(e);else{let i=e+1;1==i?(this.startChunkIndex=0,this.currentPage=1,setTimeout(()=>{this.goToQuestionAll(i-1)},1e3)):(this.currentPage=Math.ceil(i/Fr),this.startChunkIndex=(this.currentPage-1)*Fr,setTimeout(()=>{this.goToQuestionAll(i-1)},1e3))}}get totalPage(){return Math.ceil(this.questionList.length/this.lazyLoadSize)}get topLazyLoad(){return this.questionList.length>500&&this.startChunkIndex-Fr>=0}get bottomLazyLoad(){return this.questionList.length>500&&this.startChunkIndex+Fr<=this.questionList.length-1}get placeholderLink(){return this.cdnService.convertCdnLinkOfGitHub("svgs/Img2_dat-01.svg")}get lazyLoadSize(){return Fr}get limitLazyLoad(){return 500}openManualDialog(e){this.sAztDialogService.open(Ad,{width:"1000px",data:{fromButton:e},restoreFocus:!1}).afterClosed().subscribe(a=>{a&&this.browserStorageService.saveStorage("_DONT_SHOW_MANUAL","OK")})}startProcessFile(e){this.nameExamInp.setValue(e.name),this.uploadFilePdf(e),this.processPdf(e)}get totalNumberQuestion(){return this.questionList.filter(e=>e.tempData.isSelect&&!this.answerTypeService.isEssayAnswer(e.tempData)).length}get totalTrueFalseQuestion(){return this.questionList.filter(e=>e.tempData.isSelect&&this.answerTypeService.isOneChoiceAnswer(e.tempData)).length}get totalFillQuestion(){return this.questionList.filter(e=>e.tempData.isSelect&&this.answerTypeService.isFillAnswer(e.tempData)).length}get invalidTypeQuestionConfig(){return this.questionList.filter(e=>e.tempData.isSelect&&(e.tempData.point<0||!isFinite(e.tempData.point)||0==e.tempData.answerResult.length&&this.answerTypeService.isFillAnswer(e.tempData)||0==e.tempData.answerResult.length&&this.answerTypeService.isOneChoiceAnswer(e.tempData)||e.answers.length<2&&this.answerTypeService.isOneChoiceAnswer(e.tempData))||!e.tempData.point&&!this.isFullNoPoint)}get isFullNoPoint(){return this.questionList.filter(e=>!e.tempData.point).length===this.questionList.length}changeQuestionPoint(e,i){for(let a=0;a<this.questionList.length;a++)this.questionList[a].question.label===e.question.label&&(this.questionList[a].tempData.point=Number(i.target.value))}changeAnswerResult(e,i){e.tempData.answerResult=[i]}changeTypeQuestion(e,i){e.tempData.answerType=Number(i.target.value),4==Number(i.target.value)&&(e.tempData.answerResult=[])}uploadFileQuestion(e,i){var a=i.target.files[0];let r=this.commonService.myTranslateInstant("lang_auto_dang_tai_len_tep_tin_dinh_kem_cho_cau_hoi");if(!0===(0,xe.Wg)(a.type))this.arrStatusFileExam=[`${r}  (0%)`],this.isShowLoadingFileExam=!0,this.apiUploadService.uploadToCdnProgressForExamQuestionContent(a).subscribe(s=>{if(s.type!=j.dt.UploadProgress)if(1==s.success){e.tempData.questionMedia.push(s.data);let l=this.commonService.myTranslateInstant("lang_auto_tai_len_thanh_cong")??"";this.arrStatusFileExam=[l],this.isShowLoadingFileExam=!1}else this.showErrorSnack("lang_auto_upload_that_bai");else if(s.loaded&&s.total){let l=Math.round(s.loaded/s.total*100);this.arrStatusFileExam=[`${r} (${l}%)`]}});else{let s=this.commonService.myTranslateInstant("lang_auto_chi_duoc_dinh_kem_tep_tin_mp_3_hoac_wav")??"";this.showErrorSnack(s)}}uploadFilePdf(e){this.apiUploadService.uploadToCdnProgressForTestbankPdf(e).subscribe(i=>{i.type!=j.dt.UploadProgress&&(1==i.success&&i.data?.url?(this.whiteListCurrentExamFileUploadedUrl=i.data?.url??"",this.sendTrackUploadFileToApi(this.whiteListCurrentExamFileUploadedUrl).subscribe(()=>{this.notShowSourceFile=!1})):this.showErrorSnack("lang_auto_upload_that_bai"))})}sendTrackUploadFileToApi(e){return new it.y(i=>{let a={categoryId:this.cur_cateId?Number(this.cur_cateId):void 0,cdnExamFile:e,turnUuid:this.uploadTurnUuid??""};this.examFileService.apiExamFileSaveObjPost(a).subscribe(r=>{i.next(!0),i.complete()})})}clickUploadFile(e){jQuery(`#inputFileQuestion_${e}`).trigger("click")}changeIsSelect(e,i){e.tempData.isSelect=i}setupFillAnswersQuestion(e){var i=this.questionList[e];const a=[...i.tempData.answerResult];this.sAztDialogService.open(Ef,{width:"50%",data:{answers:i.tempData.answerResult},restoreFocus:!1}).afterClosed().subscribe(s=>{!1===s&&(i.tempData.answerResult=a)})}listeningDropFileExam(){var e=this,i=jQuery("#box-left-file-drop");i.on("drag dragstart dragend dragover dragenter dragleave drop",function(a){a.preventDefault(),a.stopPropagation()}).on("dragover dragenter",function(){i.addClass("is-dragover")}).on("dragleave dragend drop",function(){i.removeClass("is-dragover")}).on("drop",function(a){e.nameExamInp.setValue(a.originalEvent.dataTransfer.files[0].name),e.uploadFilePdf(a.originalEvent.dataTransfer.files[0]),e.processPdf(a.originalEvent.dataTransfer.files[0])}),jQuery("#box-left-file-input").change(()=>{e.nameExamInp.setValue(jQuery("#box-left-file-input").get(0).files[0].name),e.uploadFilePdf(jQuery("#box-left-file-input").get(0).files[0]),e.processPdf(jQuery("#box-left-file-input").get(0).files[0])}),jQuery(i).click(()=>{jQuery("#box-left-file-input").trigger("click")})}processPdf(e){let i=this.commonService.myTranslateInstant("lang_auto_dang_tien_hanh_phan_tich");window.startLoading=()=>{this.arrStatusFileExam=[`${i} ...`],this.isShowLoadingFileExam=!0},this.arrStatusFileExam=[`${i} ...`],this.isShowLoadingFileExam=!0,jQuery("#box-left-file-drop").hide();var r=new lv.Process(this.cropPdfConfigParam);r.setUpdateStatusCallback(c=>{c.startsWith("Rendering")?0==this.message.length?this.message.push(c):this.message[this.message.length-1]=c:this.message.push(c)}),r.setOncompleteCallback((c,d)=>{c.length>0?(this.startQuestion=c[0].num,this.myControl.setValue(this.startQuestion),this.labelHolderSize.width=2*d[0].canvas.width,this.rootQuestionInfo=c,this.rootCanvases=d.map(h=>h.canvas),this.rootHeaderPosition={pageIndex:0,top:1,left:c[0].positions[0].left,width:c[0].positions[0].left+c[0].positions[0].width<d[0].canvas.width?c[0].positions[0].width:d[0].canvas.width-c[0].positions[0].left,heigh:c[0].positions[0].top-1},r.showHidden(),this.errorQuestions=this.cropperService.getErrorQtns(c),this.processData()):(this.errAnalyzingPdf=!0,this.isShowLoadingFileExam=!1)}),r.parsePdf(e)}applyEditEvent(e){if(this.questionConfigList=Pc.cloneDeep(this.questionList),e){this.countClickApplyEdit++,this.rootQuestionInfo=e.listQuestion,this.rootHeaderPosition=e.headerPos,this.processData();for(let i=0;i<this.questionList.length;i++)this.questionList[i].isFixAns=this.questionConfigList[i].isFixAns,this.questionList[i].groupType=this.questionConfigList[i].groupType,this.questionList[i].tempData.point=this.questionConfigList[i].tempData.point,this.questionList[i].tempData.answerType=this.questionConfigList[i].tempData.answerType,this.questionList[i].tempData.answerResult=this.questionConfigList[i].tempData.answerResult,this.questionList[i].tempData.isSelect=this.questionConfigList[i].tempData.isSelect,this.questionList[i].tempData.isShowHelp=this.questionConfigList[i].tempData.isShowHelp,this.questionList[i].tempData.isShowAttach=this.questionConfigList[i].tempData.isShowAttach,this.questionList[i].tempData.questionMedia=this.questionConfigList[i].tempData.questionMedia;this.editting=!1,this.showSuccessSnack("lang_auto_chinh_sua_thanh_cong")}else this.editting=!1}cloneCanvas(){let e=this.rootCanvases;for(let i=0;i<e.length;i++){const a=e[i];let r=document.createElement("canvas");r.width=a.width,r.height=a.height;let s=document.createElement("canvas");s.width=a.width,s.height=a.height;let l=r.getContext("2d");l?.drawImage(a,0,0,a.width,a.height,0,0,a.width,a.height);let c=s.getContext("2d");c?.drawImage(a,0,0,a.width,a.height,0,0,a.width,a.height),l&&c&&this.clonedCtxForCreate.push(c)}}processData(){this.questionList=[],this.abcdLabelPos={},this.groupImages={},this.totalInGroupTracking=0,this.questionLabelMap=[],this.groupLengths=[],this.countGroup=0,this.labelsUrls=[],this.labelsBase64s=[],this.firstInGroupIndexes=[],this.clonedCtxForCreate=[],this.cloneCanvas();const e=this.clonedCtxForCreate[0].canvas.width;this.rootQuestionInfo.forEach(ut=>{ut.positions.forEach(et=>{et.width+et.left>e&&(et.width=e-et.left)})});let i=this.rootQuestionInfo,a=this.clonedCtxForCreate;i.forEach(ut=>{ut.remove.heigh=Math.round(ut.remove.heigh),ut.remove.width=Math.round(ut.remove.width),ut.remove.top=Math.round(ut.remove.top),ut.remove.left=Math.round(ut.remove.left),ut.positions.forEach(et=>{et.heigh=Math.round(et.heigh),et.width=Math.round(et.width),et.top=Math.round(et.top),et.left=Math.round(et.left)}),ut.help&&(ut.help.remove&&(ut.help.remove.heigh=Math.round(ut.help.remove.heigh),ut.help.remove.width=Math.round(ut.help.remove.width),ut.help.remove.left=Math.round(ut.help.remove.left),ut.help.remove.top=Math.round(ut.help.remove.top)),ut.help.positions.forEach(et=>{et.heigh=Math.round(et.heigh),et.width=Math.round(et.width),et.top=Math.round(et.top),et.left=Math.round(et.left)})),ut.answers.length>0&&ut.answers.forEach(et=>{et.remove.heigh=Math.round(et.remove.heigh),et.remove.width=Math.round(et.remove.width),et.remove.top=Math.round(et.remove.top),et.remove.left=Math.round(et.remove.left),et.positions.forEach(vt=>{vt.heigh=Math.round(vt.heigh),vt.width=Math.round(vt.width),vt.top=Math.round(vt.top),vt.left=Math.round(vt.left)})})});let r=document.createElement("canvas");r.width=this.labelHolderSize.width,r.height=this.labelHolderSize.height;let s=r.getContext("2d"),l=0,c=s;const d=()=>{s&&(this.labelsBase64s[l]=s.canvas.toDataURL("image/png"),l++,s.clearRect(0,0,s.canvas.width,s.canvas.height)),_.left=0,_.top=0};let h=0,_={left:0,top:0,locate:0};const x=ut=>{_.left=0,_.top+=ut};let b=[];const T=ut=>{let et=!0;for(let vt=0;vt<ut.length;vt++)if(1==ut[vt].remove.width||1==ut[vt].remove.heigh){et=!1;break}return et};i.forEach(ut=>{b.push(ut.answers.length)});for(let ut=0;ut<i.length;ut++)if(T(i[ut].answers)&&i[ut].answers.length==Math.max(...b)){i[ut].answers.forEach(et=>{c?.drawImage(a[et.remove.pageIndex].canvas,et.remove.left,et.remove.top,et.remove.width,et.remove.heigh,_.left,_.top,et.remove.width,et.remove.heigh),this.abcdLabelPos[et.label]={left:_.left,top:_.top},_.left=_.left+et.remove.width+5});break}this.examHeader=this.cropperService.getSingleImgData(this.rootHeaderPosition,a);for(let ut=0;ut<i.length;ut++){let et={isFixAns:i[ut].isFixAns?1:0,forcedFixAns:!!i[ut].isFixAns,groupType:0,original:"",debugView:"",group:i[ut].group,groupUrl:this.groupImages[`image_group_${i[ut].group}`]?this.groupImages[`image_group_${i[ut].group}`]:"",question:{label:i[ut].num,posit:{top:0,left:0,locate:0},url:"",urlExcludeLabelOnly:"",width:1,height:1,remove:{x:1,y:1,width:1,height:1,url:this.cropperService.getSingleImgData(i[ut].remove,a),left:0,top:0}},answers:[],help:{num:i[ut].num,url:""},tempData:{sort:ut,point:0,answerType:1,answerConfig:{},answerResult:[],isShowAttach:!1,questionMedia:[],isSelect:!0,isShowHelp:!1},rootIndex:ut},vt=i[ut].positions;if(et.original=this.cropperService.getScatteredImgData(vt,a),i[ut].isGroup){this.groupLengths.push(this.totalInGroupTracking),this.totalInGroupTracking=0,this.countGroup++,et.isGroup=!0;var P=this.cropperService.getScatteredImgData(i[ut].positions,a);this.groupImages[`image_group_${i[ut].num}`]=P}else{h++,this.totalInGroupTracking++,c&&0!=h&&_.left+i[ut].remove.width>c.canvas.width?(_.left=0,_.top=_.top+this.maxQuestionLabelHeight+5,this.maxQuestionLabelHeight=0,c&&_.top+i[ut].remove.heigh>c.canvas.height&&d(),c?.drawImage(a[i[ut].remove.pageIndex].canvas,i[ut].remove.left,i[ut].remove.top,i[ut].remove.width,i[ut].remove.heigh,_.left,_.top,i[ut].remove.width,i[ut].remove.heigh),et.question.remove.left=_.left,et.question.remove.top=_.top,this.questionLabelMap.push({locate:l,left:_.left,top:_.top,width:i[ut].remove.width,height:i[ut].remove.heigh}),_.left=_.left+i[ut].remove.width+5):(c&&_.top+i[ut].remove.heigh>c.canvas.height&&d(),c?.drawImage(a[i[ut].remove.pageIndex].canvas,i[ut].remove.left,i[ut].remove.top,i[ut].remove.width,i[ut].remove.heigh,_.left,_.top,i[ut].remove.width,i[ut].remove.heigh),et.question.remove.left=_.left,et.question.remove.top=_.top,this.questionLabelMap.push({locate:l,left:_.left,top:_.top,width:i[ut].remove.width,height:i[ut].remove.heigh}),_.left=_.left+i[ut].remove.width+5,i[ut].remove.heigh>this.maxQuestionLabelHeight&&(this.maxQuestionLabelHeight=i[ut].remove.heigh)),this.cropperService.fillColor("#ffffff",a[i[ut].remove.pageIndex],i[ut].remove.left,i[ut].remove.top,i[ut].remove.width,i[ut].remove.heigh),et.question.urlExcludeLabelOnly=1==vt.length?this.cropperService.getSingleImgData(vt[0],a):this.cropperService.getScatteredImgData(vt,a),et.question.remove.x=i[ut].remove.left-vt[0].left,et.question.remove.y=i[ut].remove.top-vt[0].top,et.question.remove.width=i[ut].remove.width,et.question.remove.height=i[ut].remove.heigh,i[ut].answers.length>0?i[ut].answers.forEach(ot=>{let _t={label:ot.label,posit:{left:0,top:0,locate:0},url:"",x:ot.positions[0].left-vt[0].left,y:ot.positions[0].top-vt[0].top,width:1,height:1,remove:{x:ot.remove.left-vt[0].left,y:ot.remove.top-vt[0].top,xAns:ot.remove.left-ot.positions[0].left,yAns:ot.remove.top-ot.positions[0].top,width:ot.remove.width,height:ot.remove.heigh,url:this.cropperService.getSingleImgData(ot.remove,a),left:0,top:0}};if(vt.length>1&&vt[0].pageIndex!==ot.remove.pageIndex&&(_t.remove.y=ot.remove.top-vt[1].top+vt[0].heigh),this.cropperService.fillColor("#ffffff",a[ot.remove.pageIndex],ot.remove.left,ot.remove.top,ot.remove.width,ot.remove.heigh),vt.length>1)for(let Mt=0;Mt<vt.length;Mt++)if(vt[Mt].pageIndex==ot.positions[0].pageIndex){_t.y=0==Mt?ot.positions[0].top-vt[Mt].top:ot.positions[0].top-vt[Mt].top+vt[0].heigh;break}if(ot.isCorrect&&(et.tempData.answerResult=[ot.label]),1==ot.positions.length)_t.url=this.cropperService.getSingleImgData(ot.positions[0],a),_t.width=ot.positions[0].width,_t.height=ot.positions[0].heigh;else{_t.url=this.cropperService.getScatteredImgData(ot.positions,a);let Mt=ot.positions.filter(It=>!It.inactive);_t.width=this.cropperService.maxWidthTo(Mt.length,ot.positions),_t.height=this.cropperService.sumHighTo(Mt.length,ot.positions)}et.answers.push(_t),ot.positions.forEach(Mt=>{this.cropperService.fillColor("#ffffff",a[Mt.pageIndex],Mt.left,Mt.top,Mt.width,Mt.heigh)})}):i[ut].strAns&&void 0!==i[ut].strAns?(et.tempData.answerType=4,et.tempData.answerResult.push(i[ut].strAns||"")):et.tempData.answerType=3;let Nt=i[ut].help;if(Nt&&(Nt.remove&&this.cropperService.fillColor("#ffffff",a[Nt.remove.pageIndex],Nt.remove.left,Nt.remove.top,Nt.remove.width,Nt.remove.heigh),Nt.positions&&Nt.positions.length>0&&(et.help.url=this.cropperService.getScatteredImgData(Nt.positions,a))),1==vt.length)et.question.url=this.cropperService.getSingleImgData(vt[0],a),et.question.width=vt[0].width,et.question.height=vt[0].heigh;else{et.question.url=this.cropperService.getScatteredImgData(vt,a);let ot=vt.filter(_t=>!_t.inactive);et.question.width=this.cropperService.maxWidthTo(ot.length,vt),et.question.height=this.cropperService.sumHighTo(ot.length,vt)}this.questionList.push(et)}}for(let ut=0;ut<this.questionList.length;ut++)this.questionList[ut].tempData.point=this.totalNumberQuestion?Number((this.totalPoint.value??0)/this.totalNumberQuestion):0,this.questionList[ut].index=ut;let U=0;for(let ut=0;ut<this.groupLengths.length;ut++)this.firstInGroupIndexes.push(U+this.groupLengths[ut]),U+=this.groupLengths[ut];const q=()=>{let ut=0,et=[];for(let vt=0;vt<this.questionList.length;vt++)if(this.questionList[vt].answers.length>0)for(let Nt=0;Nt<this.questionList[vt].answers.length;Nt++){let ot=new Image;ot.crossOrigin="anonymous",ot.setAttribute("indexMap",vt.toString()),ot.setAttribute("ansIndexMap",Nt.toString()),et.push(ot),ot.onload=()=>{if(ut++,ut==et.length){let _t=[],Mt=[],It=0;for(let Tt=0;Tt<et.length;Tt++){const Vt=et[Tt];It+=Vt.width+5,It<=this.labelHolderSize.width?Mt.push(Vt):(_t.push(Mt),Mt=[],Mt.push(Vt),It=Vt.width),Tt==et.length-1&&_t.push(Mt)}for(let Tt=0;Tt<_t.length;Tt++){const Vt=_t[Tt];let ie=Vt.map(oe=>oe.height),Wt=Math.max(...ie);for(let oe=0;oe<Vt.length;oe++){const ne=Vt[oe];c&&_.top+ne.height>c?.canvas.height&&d(),c?.drawImage(ne,_.left,_.top);let we=parseInt(ne?.getAttribute("indexMap")),at=parseInt(ne?.getAttribute("ansIndexMap"));this.questionList[we].answers[at].posit.left=_.left,this.questionList[we].answers[at].posit.top=_.top,this.questionList[we].answers[at].posit.locate=l,_.left+=ne.width+5,oe==Vt.length-1&&Tt==_t.length-1&&(this.labelsBase64s[l]=s?.canvas.toDataURL("image/png"))}x(Wt+5)}}},ot.src=this.questionList[vt].answers[Nt].url}};let B=this.questionList.filter(ut=>!this.answerTypeService.isOneChoiceAnswer(ut.tempData)).length;_.left=0,_.top+=this.questionList[this.questionList.length-1].question.remove.height+5;let W=[];for(let ut=0;ut<this.questionList.length;ut++)W.push(ut);let G=[];G=Pc.shuffle(W);let nt=0,At=[];G.forEach(ut=>{let et=new Image;et.crossOrigin="anonymous",et.setAttribute("indexMap",ut.toString()),At.push(et),et.onload=()=>{if(nt++,nt==G.length){let vt=Pc.chunk(At,2);for(let Nt=0;Nt<vt.length;Nt++){const ot=vt[Nt];let _t=ot.map(It=>It.height),Mt=Math.max(..._t);for(let It=0;It<ot.length;It++){const Tt=ot[It];c&&_.top+Tt.height>c?.canvas.height&&d(),c?.drawImage(Tt,_.left,_.top);let Vt=parseInt(Tt?.getAttribute("indexMap"));this.questionList[Vt].question.posit.left=_.left,this.questionList[Vt].question.posit.top=_.top,this.questionList[Vt].question.posit.locate=l,_.left+=Tt.width+5}x(Mt+5)}B==this.questionList.length?this.labelsBase64s[l]=s?.canvas.toDataURL("image/png"):q()}},et.src=this.questionList[ut].question.url}),this.completeCropper()}completeCropper(){this.isShowLoadingFileExam=!1,this.cropperDone=!0,jQuery("#hiddenWrapper").remove();try{this.browserStorageService.getStorage("_DONT_SHOW_MANUAL")||setTimeout(()=>{this.openManualDialog(!1)},2e3)}catch(e){console.log(e)}}toggleViewHelp(e){e.tempData.isShowHelp=!e.tempData.isShowHelp}toogleMixAns(e){e.forcedFixAns?this.commonService.snackError("lang_auto_cau_hoi_nay_phai_co_dinh_dap_an_ban_khong_the_thay_doi"):e.isFixAns=0==e.isFixAns?1:0}toggleMixInGroup(e){for(let i=0;i<this.questionList.length;i++)this.questionList[i].group&&this.questionList[i].group==e&&(1==this.questionList[i].groupType?(this.questionList[i].groupType=0,this.showErrorSnack("lang_auto_nhung_cau_trong_nhom_nay_se_bi_dao_thu_tu_khi_de_thi_bi_dao")):(this.questionList[i].groupType=1,this.showErrorSnack("lang_auto_nhung_cau_trong_nhom_nay_van_giu_nguyen_thu_tukhi_de_thi_bi_dao")))}toggleRemoveAllGroup(e){let i=this.questionList.filter(a=>a.group&&a.group==e);i.filter(a=>a.tempData.isSelect).length>0?i.forEach(a=>{a.tempData.isSelect=!1,this.changePointWhenDeleteQuestion(a.index??0)}):i.forEach(a=>{a.tempData.isSelect=!0,this.changePointWhenDeleteQuestion(a.index??0)})}loadingFileJs(){let e=this.commonService.myTranslateInstant("lang_auto_dang_khoi_tao_cong_cu");this.arrStatusFileExam=[`${e} ...`],this.isShowLoadingFileExam=!0;let i=this.configService.getConfig("dynamicJsVersion");return new Promise(a=>{var r=[{source:this.cdnService.convertCdnLinkOfGitHub(`js/pdf-js-v3/pdf.js?ver=${i}`),name:"pdf-js-v2-pdf.js"},{source:this.cdnService.convertCdnLinkOfGitHub(`js/pdf-js-v3/pdf.worker.js?ver=${i}`),name:"pdf-js-v2-pdf.worker.js"},{source:"https://cdnjs.cloudflare.com/ajax/libs/interact.js/1.10.11/interact.min.js",name:"interact.min.js"}];this.commonService.loadScriptPromises(r).then(s=>{s?(a(!0),this.isShowLoadingFileExam=!1):a(!1)})})}setHeightFullScreen(){var r=jQuery(window).height()-(jQuery("#bxControl").height()+jQuery("#header-app-component").height()+10);jQuery(".box-file-content").height(r)}resetBoxExamQuestions(e){let i=this.commonService.myTranslateInstant("lang_auto_xac_nhan_tao_lai_de_thi")??"",a=this.commonService.myTranslateInstant("lang_auto_hanh_dong_khong_the_hoan_tac")??"";this.confirmDialog(i,a,"400px",()=>{this.commonService.myNavigation("/admin/testbank/create-new-document/"+this.cur_cateId)})}confirmDialog(e,i,a,r){this.sAztDialogService.open(cp,{width:a,data:{title:e,msg:i},restoreFocus:!1}).afterClosed().subscribe(l=>{!0===l&&r()})}handleSaveQuestionError(e){console.log(e),this.isShowLoadingFileExam=!1,this.showErrorSnack("lang_auto_tao_de_khong_thanh_cong_vui_long_thu_lai")}showAllHelp(){this.isShowAllHelp=!this.isShowAllHelp,this.questionList.forEach(e=>{e.tempData.isShowHelp=this.isShowAllHelp})}goToQuestionAll(e,i=150){var a=document.getElementById("list-question-box-item-"+e),r=document.getElementById("list-question-box-viewer");r&&a&&r.scrollTo({top:Number(a.offsetTop-i)})}rxjsHandleSaveExam(){if(this.isShowLoadingFileExam)this.commonService.snackError("lang_core_qua_trinh_luu_de_dang_dien_ra");else if(this.invalidTypeQuestionConfig.length>0||!this.nameExamInp.value||""==this.nameExamInp.value.trim())this.commonService.snackError("lang_testbank_create_exam_width_file_pdf_cant_save_check_err");else{if(this.isFullNoPoint){const s=he(10,this.questionList.length);this.questionList.forEach((l,c)=>{l.tempData.point=s[c]})}this.isShowLoadingFileExam=!0;let i,e=this.commonService.myTranslateInstant("lang_auto_dang_luu_cau_hoi_vao_he_thong");if(this.selects=this.questionList.filter(s=>s.tempData.isSelect),this.arrStatusFileExam=[`${e}: 0/${this.selects.length}`],!Pc.isEmpty(this.groupImages)){let s={};for(const l in this.groupImages)s[l]=this.apiUploadService.reactiveUploadBase64ToCdnWithRetry(Im,this.groupImages[l]);i=(0,lp.D)(s)}const a=()=>{this.rxjsConstructQuestionInfo()},r=()=>{this.uploadParallelLabelsImage(0,5,s=>{s.success?(this.labelsUrls=s.urls,i?i.subscribe(l=>{var c="",d={};for(var h in l){var _=l[h];1==_.success?d[h]=_.data??"":c=_.message??"Unkown error"}""==c?(this.groupImages=d,a()):this.handleSaveQuestionError(c)}):a()):this.handleSaveQuestionError(s.message)})};this.useHeader&&this.examHeader?this.apiUploadService.reactiveUploadBase64ToCdnWithRetry(Im,this.examHeader).subscribe(s=>{1==s.success?(this.examHeader=s.data??"",r()):this.handleSaveQuestionError(s.message)}):(this.examHeader="",r())}}rxjsConstructQuestionInfo(){this.rxJsCallSaveParallelQuestion(0,5,this.selects,e=>{e&&this.rxJsCallApiSaveQuestions(i=>{i&&this.handleSaveAllExam()})})}rxJsCallApiSaveQuestions(e){if(this.newQuestionArrSave.length<=this.limitLazyLoad){var i={listQuestions:this.newQuestionArrSave.sort((a,r)=>a.sortByIndex-r.sortByIndex)};this.questionService.apiQuestionSaveObjsV2Post(i).subscribe(a=>{1==a.success&&(a.data?.objs?.length??0)>0?(a.data?.objs?.forEach((r,s)=>{this.examConfigs.push({id:r.id,name:r.name,groupId:r.groupId,scorePerQuestion:this.selects[s].tempData.point,totalQuestion:1,sort:s})}),e(!0)):(this.handleSaveQuestionError(a.message),e(!1))})}else this.saveVeryLongListQuestions(this.newQuestionArrSave,e)}saveVeryLongListQuestions(e,i){var a=this;return(0,Ya.Z)(function*(){a.newQuestionArrSave.sort((l,c)=>l.sortByIndex-c.sortByIndex);var r=Pc.chunk(a.newQuestionArrSave,Fr);let s=0;try{for(const l of r){let c=yield a.questionService.apiQuestionSaveObjsV2Post({listQuestions:l}).toPromise();if(!(1==c?.success&&(c?.data?.objs?.length??0)>0))throw c?.message;c.data?.objs?.forEach((d,h)=>{let _=Fr*s+h;a.examConfigs.push({id:d.id,name:d.name,groupId:d.groupId,scorePerQuestion:a.selects[_].tempData.point,totalQuestion:1,sort:_})}),s++}i(!0)}catch(l){a.handleSaveQuestionError(l),i(!1)}})()}rxJsCallSaveParallelQuestion(e,i,a,r){for(var s=[],l=0;l<i;l++)(c=e+l)<this.selects.length&&s.push(this.selects[c]);for(var d=0,h=s.length,_=0;_<s.length;_++){var c;this.rxjsProcessSaveOneQuestion(s[_],c=e+_,T=>{T?(d+=1)===h&&this.rxJsCallSaveParallelQuestion(e+h,i,a,r):r(!1)})}h<=0&&r(!0)}uploadParallelLabelsImage(e,i,a){for(var r=[],s=0;s<i;s++)(l=e+s)<this.labelsBase64s.length&&r.push(this.labelsBase64s[l]);for(var c=r.length,d=0,h=0;h<r.length;h++){var l;this.uploadOneLabelsImage(r[h],l=e+h,b=>{b.success?(this.resultUploadBase64Labels.push({index:b.index,url:b.url}),(d+=1)===c&&this.uploadParallelLabelsImage(e+c,i,a)):a({success:!1,message:"Fail to upload labels image to cdn"})})}c<=0&&(this.resultUploadBase64Labels.sort((x,b)=>x.index-b.index),a({success:!0,urls:this.resultUploadBase64Labels.map(x=>x.url)}))}uploadOneLabelsImage(e,i,a){this.apiUploadService.reactiveUploadBase64ToCdnWithRetry(Im,e??"").subscribe(r=>{a(r.success?{success:!0,index:i,url:r.data??""}:{success:!1})})}rxjsProcessSaveOneQuestion(e,i,a){let r=e;this.apiUploadService.reactiveUploadBase64ToCdnWithRetry(Im,r.original).subscribe(s=>{1==s.success?(r.original=s.data??"",this.apiUploadService.reactiveUploadBase64ToCdnWithRetry(Im,r.help.url).subscribe(l=>{if(1==l.success){r.help.url=l.data??"";let d=this.answerTypeService.isOneChoiceAnswer(e.tempData)?e.answers.map(x=>({key:x.label,content:JSON.stringify({...x,label:null,url:null,x:null,y:null,isCorrect:null,remove:null})})):e.tempData.answerConfig,h="";e.answers.length>0&&(h=e.answers.map(x=>({...x,url:null,remove:{...x.remove,url:null}})));let _={name:`[PDFv2] C\xe2u h\u1ecfi t\u1ea1o t\u1ef1 \u0111\u1ed9ng ${e.question.label}`,version:"2",isFixAns:e.isFixAns,groupType:e.groupType.toString(),answerConfig:JSON.stringify(d),answerResult:JSON.stringify(e.tempData.answerResult),answerType:e.tempData.answerType,questionText:"",metaData:"",answerMedia:e.help.url,questionMedia:"",attachments:JSON.stringify(e.tempData.questionMedia),questionContent:JSON.stringify(new Array({$id:0,id:0,name:`[PDFv2] C\xe2u h\u1ecfi t\u1ea1o t\u1ef1 \u0111\u1ed9ng ${e.question.label}`,path:e.original,extension:"png",pimes:null,url:e.original,groupUrl:e.group?this.groupImages[`image_group_${e.group}`]:"",firstInGroupIndexes:null,abcdLabelPos:null,questionLabelMap:null,metaData:{...e,question:{...e.question,url:null,urlExcludeLabelOnly:this.answerTypeService.isOneChoiceAnswer(e.tempData)?null:e.question.urlExcludeLabelOnly,remove:{...e.question.remove,url:null}},answers:h,tempData:null,original:null,debugView:null,isGroup:null,help:null,group:null,groupUrl:null,groupType:null}})),questionTags:JSON.stringify(new Array),tags:[],categoryId:0,groupId:e.group,coordinates:"{}",totalQuestion:1,sortByIndex:i};var c=this.newQuestionArrSave.filter(x=>x.name==_.name);if(!c||0==c.length){this.newQuestionArrSave.push(_),this.countSaveQuestion++;let x=this.commonService.myTranslateInstant("lang_auto_dang_luu_cau_hoi_vao_he_thong");this.arrStatusFileExam=[`${x}: ${this.countSaveQuestion}/${this.selects.length}`]}a(!0)}else this.handleSaveQuestionError(l.message),a(!1)})):(this.handleSaveQuestionError(s.message),a(!1))})}openDialogSpitPoint(){let e=0,i=0,a=0,r=0,s=0,l=0;for(let c=0;c<this.questionList.length;c++)this.questionList[c].tempData.isSelect&&(this.answerTypeService.isOneChoiceAnswer(this.questionList[c].tempData)?(e++,i+=this.questionList[c].tempData.point):this.answerTypeService.isFillAnswer(this.questionList[c].tempData)?(s++,l+=this.questionList[c].tempData.point):(a++,r+=this.questionList[c].tempData.point));if(this.countTrueFalseQuestion=e,this.countFillAnswerQuestion=s,this.dataSpitPoint){let c={multipleQuestion:e,multiplePoint:i.toFixed(4),essayQuestion:a,essayPoint:r.toFixed(4),fillQuestion:s,fillPoint:l.toFixed(4)};this.dataSpitPoint=c,this.sAztDialogService.open(Of,{data:this.dataSpitPoint,width:"500px",restoreFocus:!1}).afterClosed().subscribe(h=>{h&&this.setPointTest(h)})}}setPointTest(e){this.multiplePoint=e.multiplePoint??0,this.essayPoint=e.essayPoint??0,this.fillPoint=e.fillPoint??0;let i=Number(this.parseNumberFixed(Number(e.multiplePoint)/this.totalTrueFalseQuestion,8)),a=Number(this.parseNumberFixed(Number(e.fillPoint)/this.totalFillQuestion,8)),r=0,s=this.questionList.filter(l=>l.tempData.isSelect).length;s-this.totalTrueFalseQuestion-this.totalFillQuestion>0&&(r=Number(e.essayPoint)/(s-this.totalTrueFalseQuestion-this.totalFillQuestion));for(let l=0;l<this.questionList.length;l++)this.questionList[l].tempData.isSelect&&(this.questionList[l].tempData.point=this.answerTypeService.isOneChoiceAnswer(this.questionList[l].tempData)?i.toString().length>8?Number(this.parseNumberFixed(i,8)):i:this.answerTypeService.isFillAnswer(this.questionList[l].tempData)?a.toString().length>8?Number(this.parseNumberFixed(a,8)):a:r.toString().length>8?Number(this.parseNumberFixed(r,8)):r);this.showSuccessSnack("lang_auto_chia_diem_thanh_cong")}parseNumberFixed(e,i){let a=Number(parseFloat(e.toString()).toFixed(i));return isNaN(a)?"0":parseFloat(e.toString()).toFixed(i)}changeSelectTempData(e){this.questionList[e].tempData.isSelect=!this.questionList[e].tempData.isSelect,this.changePointWhenDeleteQuestion(e)}changePointWhenDeleteQuestion(e){let i=Number(this.multiplePoint)/this.totalTrueFalseQuestion,a=Number(this.fillPoint)/this.totalFillQuestion,r=0,s=this.questionList.filter(l=>l.tempData.isSelect).length;0==this.essayPoint&&(this.essayPoint=(s-this.totalTrueFalseQuestion-this.totalFillQuestion)*this.questionList[e].tempData.point),s-this.totalTrueFalseQuestion-this.totalFillQuestion>0&&(r=Number(this.essayPoint)/(s-this.totalTrueFalseQuestion-this.totalFillQuestion));for(let l=0;l<this.questionList.length;l++)this.questionList[l].tempData.isSelect&&(this.questionList[l].tempData.point=this.answerTypeService.isOneChoiceAnswer(this.questionList[l].tempData)?i.toString().length>8?Number(this.parseNumberFixed(i,8)):i:this.answerTypeService.isFillAnswer(this.questionList[l].tempData)?a.toString().length>8?Number(this.parseNumberFixed(a,8)):a:r.toString().length>8?Number(this.parseNumberFixed(r,8)):r)}openExamInfoDialog(){this.dataExamInfo={isShow:!0,obj:this.questionList}}closeDialogExamInfo(){this.dataExamInfo.isShow=!1}onHandleGoToQuestion(e){const i=document.getElementById("list-question-box-item-"+(e-1));i&&i.scrollIntoView()}ngOnInit(){this.uploadTurnUuid=this.sAztUuidService.getUuid(),this.isSupportedBrowser&&(this.waitDestroy((0,dt.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.cur_cateId=this.commonService.getMyParam(this.activeRoute,"cat_id");var e=this.commonService.getMyQueryParam("backto");this.backToLink=e??"/admin/testbank/create-new-document/"+(null!=this.cur_cateId?this.cur_cateId:0),this.infoService.apiInfoGetConfigObjsGet("CROPPDF_PARAMS").subscribe(i=>{this.cropPdfConfigParam=i.CROPPDF_PARAMS,this.loadingFileJs().then(a=>{if(a){const r=this.editorOutputDataService.getFirstFile();r?this.startProcessFile(r):this.redirectService.redirectByUrl(this.commonService.getLocalRouter(this.backToLink)),this.listeningDropFileExam()}})})})),this.filteredOptions=this.myControl.valueChanges.pipe((0,cv.O)(""),(0,Pr.U)(e=>this._filter(e?.toString()||""))),setTimeout(()=>{this.fillDataFormToProgram()},1e3))}saveDocumentTrainingCenter(e,i,a,r){const l=`/admin/testbank/document-management/0/${this.categoriesIdParram}/1`;this.classroomService.apiClassroomsClassroomIdSessionsSessionIdDocumentsPost(e,a,{name:r?.name,refId:r?.id,type:"exam"}).subscribe(c=>{c?this.commonService.myNavigationWithQueryString(`/admin/student/classroom-details/${e}/3`,`?sessionId=${a}`):(this.commonService.myNavigationWithQueryString("/admin/testbank/action-online-offline/"+this.categoriesIdParram+"/"+r?.hashId,`?backto=${encodeURIComponent(l)}`),this.stopStatusObj())})}fillDataFormToProgram(){const e=this.getMyQueryParam("sessionId"),i=this.getMyQueryParam("indexSession"),a=this.getMyQueryParam("programId");if(i){const r=this.browserStorageService.getSessionStorage(`${this.programFormService.key+a}`);if(r){const s=this.zipDataService.decodeContentGzip(r),l=this.castJsonToObj(s),c=this.commonService.myTranslateInstant("lang_business_exam_session");this.nameExamInp.setValue(`${c} ${(Number(i)??0)+1}-${l?.sessionFormArray[i].documentObjs.length+1}`)}}else{if(this.checkExamToProgram=!!e,!this.checkExamToProgram)return;this.paramClassroomService.getProgramTraining().subscribe(r=>{this.programDetailResponse=r;const s=this.programDetailResponse?.sessions??[],{currentObj:c}=this.paramClassroomService.findCurrentAndNextSession(s,Number(e)),d=this.commonService.myTranslateInstant("lang_business_exam_session"),_=c?.documents?.filter(x=>"exam"===x.type)?.length??1;this.nameExamInp.setValue(`${d} ${c?.sort??0}-${_+1}`)})}}ngOnDestroy(){jQuery("#hiddenWrapper").remove()}constructor(e,i,a,r,s,l,c,d,h,_,x,b,T,P,U,q,B,W,G,nt,At,ut){super(),this.cropperService=e,this.activeRoute=i,this.sAztDialogService=a,this.questionService=r,this.apiUploadService=s,this.userService=l,this.infoService=c,this.examService=d,this.configService=h,this.cdnService=_,this.answerTypeService=x,this.redirectService=b,this.editorOutputDataService=T,this.browserStorageService=P,this.deviceDetectorService=U,this.examFileService=q,this.sAztUuidService=B,this.classroomService=W,this.paramClassroomService=G,this.timeService=nt,this.programFormService=At,this.zipDataService=ut,this.x=0,this.y=0,this.leftWidth=0,this.cropperDone=!1,this.startChunkIndex=0,this.currentPage=1,this.editting=!1,this.errAnalyzingPdf=!1,this.categoriesIdParram=+this.commonService.getMyParam(this.activeRoute,"cat_id"),this.whiteListCurrentExamFileUploadedUrl=this.cdnService.convertCdnLinkOfGitHub("images/file_placeholder.jpg"),this.version="v2.0",this.cur_cateId=0,this.backToLink="",this.nameExamInp=new f.NI(""+Date.now(),{nonNullable:!0}),this.totalPoint=new f.NI(10),this.isChangePoint=!1,this.isMixture=!1,this.confirmTotalQuestionChange=!1,this.examConfigs=[],this.newQuestionArrSave=[],this.isChangeQuestionPoint=!1,this.isShowLoadingFileExam=!1,this.arrStatusFileExam=[],this.isShowAllHelp=!1,this.curGotoIndex=new f.NI(0),this.showNote=!0,this.debuggingMode=new f.NI(!0),this.message=[],this.errorQuestions=[],this.doneAllProccessTasks=!1,this.notShowSourceFile=!0,this.questionList=[],this.questionConfigList=[],this.rootQuestionInfo=[],this.rootCanvases=[],this.clonedCtxForCreate=[],this.labelHolderSize={width:3500,height:3500},this.labelsBase64s=[],this.labelsUrls=[],this.resultUploadBase64Labels=[],this.abcdLabelPos={},this.questionLabelMap=[],this.maxQuestionLabelHeight=0,this.examHeader="",this.useHeader=!0,this.selects=[],this.nextIndex=0,this.countGroup=0,this.groupImages={},this.groupLengths=[],this.firstInGroupIndexes=[],this.totalInGroupTracking=0,this.countSaveQuestion=0,this.cropPdfConfigParam="",this.countClickApplyEdit=0,this.dataSpitPoint={},this.countTrueFalseQuestion=0,this.countFillAnswerQuestion=0,this.multiplePoint=10,this.essayPoint=0,this.fillPoint=0,this.dataExamInfo={isShow:!1},this.startQuestion=1,this.uploadTurnUuid=void 0,this.checkExamToProgram=!1,this.handleMouseUp=et=>{this.maskLayer&&(this.maskLayer.nativeElement.style.width="0px"),this.resizeBar&&this.resizeBar.nativeElement.classList.remove("hover"),this.resizeBar?.nativeElement.style.removeProperty("cursor"),document.body.style.removeProperty("cursor"),this.iframePdf?.nativeElement.style.removeProperty("user-select"),this.iframePdf?.nativeElement.style.removeProperty("pointer-events"),this.boxLeftFile?.nativeElement.style.removeProperty("user-select"),this.boxLeftFile?.nativeElement.style.removeProperty("pointer-events"),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp)},this.handleMouseMove=et=>{if(this.parentResize&&this.iframePdf&&this.boxLeftFile){let vt=this.iframePdf.nativeElement,Nt=this.boxLeftFile.nativeElement;const _t=100*(this.leftWidth+(et.clientX-this.x))/this.parentResize.nativeElement.getBoundingClientRect().width;Nt.style.width=`${_t}%`,document.body.style.cursor="col-resize",vt.style.userSelect="none",vt.style.pointerEvents="none",Nt.style.userSelect="none",Nt.style.pointerEvents="none"}},this.myControl=new f.NI(this.startQuestion),this.handleSaveAllExam=()=>{let et=this.commonService.myTranslateInstant("lang_auto_luu_xong_tat_ca_cau_hoi_vao_he_thong")??"",vt=this.commonService.myTranslateInstant("lang_auto_dang_luu_thong_tin_de_thi")??"";this.arrStatusFileExam=[et,`${vt} ...`];let Nt=this.userService.getUserObj(),ot=JSON.stringify({type:"exam",id:0,user:Nt.id});const _t=this.getMyQueryParam("classroomId"),Mt=this.getMyQueryParam("programId"),It=this.getMyQueryParam("sessionId"),Tt=this.getMyQueryParam("indexSession"),Vt=It?.includes("?")?It.slice(0,It.indexOf("?")):It,ie=this.programDetailResponse?.sessions??[],Wt=this.commonService.myTranslateInstant("lang_business_exam_by_curriculum")??"";let oe,ne;if(this.checkExamToProgram&&ie.length){const{currentObj:at,nextIndex:kt,nextObj:Et}=this.paramClassroomService.findCurrentAndNextSession(ie,Number(Vt)),Ft=432e6,Gt=new Date(at?.fromTime??"").getTime()+Ft;oe=at?.fromTime,ne=kt?Et?.fromTime:this.timeService.formatDateTimeFillData(new Date(Gt).toLocaleString("en-GB"))}var we={id:0,categoryId:this.categoriesIdParram,scoringMethod:"1",name:this.nameExamInp.value??"",examConfigs:JSON.stringify(this.examConfigs),suggestions:JSON.stringify([]),labelsUrl:JSON.stringify(this.labelsUrls),abcdLabelPos:JSON.stringify(this.abcdLabelPos),questionLabelMap:JSON.stringify(this.questionLabelMap),firstInGroupIndexes:JSON.stringify(this.firstInGroupIndexes),totalExam:1,cdnExamFile:this.whiteListCurrentExamFileUploadedUrl,trackEdit:this.countClickApplyEdit>0?JSON.stringify({countClickApplyEdit:this.countClickApplyEdit}):"",examHeader:this.examHeader,cutData:this.rootQuestionInfo,editorStatus:4,startQuestionIndex:this.questionList.length>0&&this.questionList[0].question.label>0?this.questionList[0].question.label:1,classroomIds:_t?[Number(_t)]:void 0,startTime:this.checkExamToProgram?oe:void 0,endTime:this.checkExamToProgram?ne:void 0,isPublished:this.checkExamToProgram?1:void 0,minutes:this.checkExamToProgram?60:void 0,purposeId:this.checkExamToProgram?12:void 0,purposeNote:this.checkExamToProgram?Wt:void 0};this.examService.apiExamSaveObjPost(we,ot).subscribe(at=>{if(1==at.success){let kt=this.commonService.myTranslateInstant("lang_auto_luu_de_thi_thanh_cong_dang_chuyen_huong")??"";this.arrStatusFileExam=[`${kt} ...`],setTimeout(()=>{jQuery("html").css("overflow","auto");const Et=this.getMyQueryParam("sessionId"),Ft=`/admin/testbank/document-management/0/${this.categoriesIdParram}/1`;if(!this.commonService.isNullUndefinedOrEmpty(Tt)&&!_t)return this.programFormService.ExamExerciseOfProgramToSessionStorage(at.data?.obj?.id??0,at.data?.obj?.name??"","exam"),void(window.location.href=this.commonService.getLocalRouter(`/business/edit-educational-program/${Mt}?indexSession=${Tt}`));_t?Mt&&Et?this.saveDocumentTrainingCenter(Number(_t),Number(Mt),Number(Vt),at.data?.obj):this.commonService.myNavigationWithQueryString("/admin/testbank/action-online-offline/"+this.categoriesIdParram+"/"+at.data?.obj?.hashId,`?backto=${encodeURIComponent(Ft)}&classroomId=${_t}`):this.commonService.myNavigationWithQueryString("/admin/testbank/action-online-offline/"+this.categoriesIdParram+"/"+at.data?.obj?.hashId,`?backto=${encodeURIComponent(Ft)}`)},1500)}else this.showErrorSnack("lang_auto_tao_de_thi_khong_thanh_cong_vui_long_thu_lai"),this.isShowLoadingFileExam=!1})}}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Pv),t.Y36(O.gz),t.Y36(Fi.C),t.Y36(Ke.aE),t.Y36(po.W),t.Y36(ga.U),t.Y36(Pi.CM),t.Y36(Ke.Oe),t.Y36(Zf.V),t.Y36(Gn.E),t.Y36(hr.i),t.Y36(f0.z),t.Y36(Hs.O),t.Y36(No.n),t.Y36(Nv.x0),t.Y36(Ke._0),t.Y36(tu.E),t.Y36(va.um),t.Y36(Oo),t.Y36(br.D),t.Y36(Om.t),t.Y36(La.a))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-cropper"]],viewQuery:function(e,i){if(1&e&&(t.Gf(_p,5),t.Gf(Io,5),t.Gf(jo,5),t.Gf(y0,5),t.Gf(Jv,5),t.Gf(Hv,5)),2&e){let a;t.iGM(a=t.CRH())&&(i.hiddenInput=a.first),t.iGM(a=t.CRH())&&(i.iframePdf=a.first),t.iGM(a=t.CRH())&&(i.resizeBar=a.first),t.iGM(a=t.CRH())&&(i.boxLeftFile=a.first),t.iGM(a=t.CRH())&&(i.parentResize=a.first),t.iGM(a=t.CRH())&&(i.maskLayer=a.first)}},features:[t.qOj],decls:4,vars:3,consts:[["browserSupported",""],["class","alert alert-danger alert-danger-note p-5","style","font-size: 18px",4,"ngIf","ngIfElse"],[4,"ngIf"],[3,"hidden"],[3,"headerBackToLink","showInput","showConfirmButton","examName","handleConfirm","handleCancel"],["id","box-create-action"],[1,"container-fluid","mt-3"],[1,"flex","w-full"],["parentResize",""],["id","box-left-file",3,"ngStyle"],["boxLeftFile",""],["id","box-left-file-input","type","file","accept","application/pdf",1,"hiddenIpt"],["class","flex justify-between items-center dt-header",4,"ngIf"],["class","p-2 mt-2 mb-2 text-center alert alert-info",4,"ngIf"],["class","p-2 mt-2 mb-2 alert alert-danger text-center alert-danger-note",4,"ngIf"],[1,"box-file-content"],["id","box-left-file-drop","class","box-file-content-file_drop",4,"ngIf"],["id","box-left-file-pdf",1,"box-file-content--viewer",2,"display","none"],["id","box-left-file-canvas",1,"box-file-content--viewer",2,"display","none"],["class","list-question-box","id","list-question-box-viewer","style","width: 100%",4,"ngIf"],["style","width: 100%","class","m-3 pt-5 p-3 alert text-center text-danger",4,"ngIf"],["id","resizeBar",3,"mousedown"],["resizeBar",""],["id","iframePdf",3,"hidden"],["iframePdf",""],[1,"maskLayer"],["maskLayer",""],["frameBorder","0","scrolling","auto","height","100%","width","100%",3,"src"],["class","box-file-content-file_preview--blur_status","style","\n            position: fixed;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100vh;\n            background: #2632386b;\n            color: white;\n            z-index: 999;\n          ",4,"ngIf"],[3,"ngIf"],[1,"flex","justify-between","items-center","dt-header"],[1,"box-control"],["color","primary",1,"example-margin",3,"matTooltip","color","formControl"],["class","pagination",4,"ngIf"],["azt-track-service","create-exam-with-file-pdf-yF9GeAl2MK",1,"btnTotal",3,"click"],[1,"flex"],["azt-track-service","create-exam-with-file-pdf-3v8Xi_AQgI","class","clickable",3,"matTooltip","click",4,"ngIf"],["azt-track-service","create-exam-with-file-pdf-CHv67fED6q","class","clickable",3,"matTooltip","click",4,"ngIf"],["azt-track-service","create-exam-with-file-pdf-8xKwGSyZ8J",1,"clickable","ml-3",3,"matTooltip","click"],[1,"flex","justify-between","items-center"],[1,"form-enter-question","ml-1"],["id","inputQuestionNum","type","number",2,"padding","0",3,"formControl","matAutocomplete","keyup.enter"],["id","cropperFilterQuestion"],["auto","matAutocomplete"],["azt-track-service","create-exam-with-file-pdf-RVT14CTXbp",3,"value","click",4,"ngFor","ngForOf"],["type","hidden"],["hiddenInput",""],["azt-track-service","create-exam-with-file-pdf-E8H8iTfHP6","id","btnEdits","mat-raised-button","",3,"click"],[1,"pagination"],["type","number","name","inputPage","id","",3,"ngModel","keyup.enter","ngModelChange"],["azt-track-service","create-exam-with-file-pdf-j3HtJoLN74",1,"clickable",3,"ngStyle","matTooltip","click"],["azt-track-service","create-exam-with-file-pdf-i02GVPZfkg",1,"clickable",3,"ngStyle","matTooltip","click"],["azt-track-service","create-exam-with-file-pdf-3v8Xi_AQgI",1,"clickable",3,"matTooltip","click"],["azt-track-service","create-exam-with-file-pdf-CHv67fED6q",1,"clickable",3,"matTooltip","click"],["azt-track-service","create-exam-with-file-pdf-RVT14CTXbp",3,"value","click"],[1,"p-2","mt-2","mb-2","text-center","alert","alert-info"],[2,"vertical-align","bottom"],[1,"error-block"],[4,"ngFor","ngForOf"],[1,"text-right","mt-1"],["azt-track-service","create-exam-with-file-pdf-8zeZ9XDtb_",1,"btn","btn-primary","btn-sm",3,"click"],[1,"p-2","mt-2","mb-2","alert","alert-danger","text-center","alert-danger-note"],["azt-track-service","create-exam-with-file-pdf-iQvwZJTrjj",1,"clickable","mt-1",3,"matTooltip","click"],["class","mt-1",4,"ngIf"],[1,"mt-1"],["id","box-left-file-drop",1,"box-file-content-file_drop"],[1,"box-file-content-file_drop--input"],[1,"box-file-content-file_drop--input-icon"],["id","download-link-item",3,"dataUrl","target","fileName","fileDescription","click"],["id","list-question-box-viewer",1,"list-question-box",2,"width","100%"],["id","examHeader","class","mb-4","style","padding: 15px; padding-top: 0",4,"ngIf"],["class","list-question-box-item",4,"ngFor","ngForOf"],["class","pagination mb-5",4,"ngIf"],["id","examHeader",1,"mb-4",2,"padding","15px","padding-top","0"],["class","remove-layer",4,"ngIf"],["azt-track-service","create-exam-with-file-pdf--HD0um3BB54",1,"clear-icon",3,"matTooltip","click"],["alt","",2,"width","100%",3,"src"],[1,"remove-layer"],[1,"list-question-box-item"],["class","w-100 question-wrapper",4,"ngIf"],[1,"w-100","question-wrapper"],["class","alert alert-danger alert-danger-note","style","margin-bottom: -2px",4,"ngIf"],["class","list-question-box-item__img group pt-4 mb-2",3,"hidden",4,"ngIf"],[1,"list-question-box-item__img"],["azt-track-service","create-exam-with-file-pdf-n9OHfjQzIw6",1,"clear-icon",3,"matTooltip","click"],["class","cr-question-pieces",4,"ngIf"],[1,"list-question-box-item__control"],[1,"list-question-box-item__control_flex","position-relative","bg-slate-300","dark:bg-darkmode-400",3,"ngClass"],[1,"flex","items-center"],[2,"font-size","16px","margin-right","10px"],[1,"form-select","form-select-sm",2,"width","110px",3,"change"],[3,"value","selected"],["class","text-center flex items-center",4,"ngIf"],["class","text-center",4,"ngIf"],[2,"font-size","16px"],["appReplaceCommas","","type","text",1,"form-control","inp",3,"value","input"],["azt-track-service","create-exam-with-file-pdf-6YL1FMa2jmG",1,"clickable",3,"matTooltip","click"],["azt-track-service","create-exam-with-file-pdf-bnQZ8KjeH-4",1,"attch-icon","clickable","flex",3,"click"],[1,"box-file-content-file_drop--input-icon",3,"matTooltip"],["azt-track-service","create-exam-with-file-pdf-4SNs7lyxp-f",1,"clickable","flex",3,"click"],["class","box-file-content-file_drop--input-icon",3,"matTooltip",4,"ngIf"],["style","margin-top: -5px; margin-bottom: 5px; border-radius: 5px",4,"ngIf"],[1,"alert","alert-danger","alert-danger-note",2,"margin-bottom","-2px"],[1,"list-question-box-item__img","group","pt-4","mb-2",3,"hidden"],["azt-track-service","create-exam-with-file-pdf-M_eEZPuQIDb","class","clear-icon",3,"matTooltip","click",4,"ngIf"],["azt-track-service","create-exam-with-file-pdf-8l5PAIjnvxI","class","clear-icon",3,"matTooltip","click",4,"ngIf"],["azt-track-service","create-exam-with-file-pdf-9FChZOhg2jy",3,"click"],["class","mixInGroup",3,"matTooltip",4,"ngIf"],["class","mixInGroupNotif",4,"ngIf"],["loading","lazy","clickable","","alt","",3,"matTooltip","src"],["azt-track-service","create-exam-with-file-pdf-M_eEZPuQIDb",1,"clear-icon",3,"matTooltip","click"],["azt-track-service","create-exam-with-file-pdf-8l5PAIjnvxI",1,"clear-icon",3,"matTooltip","click"],[1,"mixInGroup",3,"matTooltip"],[1,"mixInGroupNotif"],[1,"cr-question-pieces"],[1,"cr-question-label","mb-2"],["loading","lazy","alt","",3,"ngStyle","src"],[1,"cr-question","mb-2"],["loading","lazy","alt","",2,"width","100%","height","auto",3,"width","height","src"],[1,"cr-answers"],["class","cr-aswr",4,"ngFor","ngForOf"],[1,"cr-aswr"],[1,"mb-2"],["loading","lazy","alt","",2,"margin-right","10px","margin-bottom","5px",3,"ngStyle","src"],[1,"text-center","flex","items-center"],["azt-track-service","create-exam-with-file-pdf-uE33psGY4hd","class","btn btn-ans",3,"ngClass","click",4,"ngFor","ngForOf"],["azt-track-service","create-exam-with-file-pdf-uE33psGY4hd",1,"btn","btn-ans",3,"ngClass","click"],[1,"text-center"],["azt-track-service","create-exam-with-file-pdf-KOgDIAa3KdB",1,"btnAttQuestion",3,"click"],["class","box p-2 mt-2",4,"ngIf"],["class","alert alert-danger alert-danger-note",4,"ngIf"],[1,"box","p-2","mt-2"],[1,"alert","alert-danger","alert-danger-note"],["azt-track-service","create-exam-with-file-pdf-AlAR7KqulJm","href","https://docs.azota.vn/docs/trung-tam-tro-giup/tao-de-thi/tao-de-thi-khi-cau-hoi-khong-co-dap-an-de-chon/","target","_blank"],["style","margin-bottom: 50px; opacity: 0.8","class","list-question-box-item__img_result",4,"ngIf","ngIfElse"],["noHelp",""],[1,"list-question-box-item__img_result",2,"margin-bottom","50px","opacity","0.8"],[3,"src"],[2,"color","rgb(219, 219, 219)","padding","8px 20px"],[2,"margin-top","-5px","margin-bottom","5px","border-radius","5px"],["type","file","name","",1,"hiddenIpt",3,"id","change"],["azt-track-service","create-exam-with-file-pdf-k47eFWP9HE4","class","dropFileAttachQuestion",3,"click",4,"ngIf"],["class","dropFileAttachQuestion bg-white",4,"ngIf"],["azt-track-service","create-exam-with-file-pdf-k47eFWP9HE4",1,"dropFileAttachQuestion",3,"click"],[1,"dropFileAttachQuestion","bg-white"],["class","preview",4,"ngFor","ngForOf"],[1,"preview"],["controls",""],["type","audio/mpeg",3,"src"],["azt-track-service","create-exam-with-file-pdf-IopYkUBesXC",2,"margin-left","10px","background","#f06292","color","white","padding","0 10px","border-radius","5px","font-size","10px",3,"click"],[1,"pagination","mb-5"],["azt-track-service","create-exam-with-file-pdf-g_6T5-6RWqm",1,"clickable",3,"ngStyle","matTooltip","click"],["azt-track-service","create-exam-with-file-pdf-lPIlOAl7wnQ",1,"clickable",3,"ngStyle","matTooltip","click"],[1,"m-3","pt-5","p-3","alert","text-center","text-danger",2,"width","100%"],[2,"font-size","50px","width","50px","height","50px"],["azt-track-service","create-exam-with-file-pdf-RPU348FbyDo",1,"btn","btn-primary",3,"click"],[1,"box-file-content-file_preview--blur_status",2,"position","fixed","top","0","left","0","width","100%","height","100vh","background","#2632386b","color","white","z-index","999"],[1,"text-center","box-file-content-file_preview--blur_status-frame"],[2,"display","flex","justify-content","center","margin-top","5rem"],["color","accent",3,"strokeWidth","diameter"],["class","span-status","style","font-size: 20px; margin-top: 30px;",4,"ngFor","ngForOf"],[1,"span-status",2,"font-size","20px","margin-top","30px"],[2,"background","#607d8b","padding","10px","border-radius","5px"],[1,"content","relative",2,"border-radius","0"],[3,"listQuestion","headerPosition","listCanvas","applyEdit"],[1,"alert","alert-danger","alert-danger-note","p-5",2,"font-size","18px"],[3,"startIndexQuestion","data","type","closeDialog","goToQuestion"]],template:function(e,i){if(1&e&&(t.YNc(0,I0,29,21,"ng-template",null,0,t.W1O),t.YNc(2,E3,4,7,"div",1),t.YNc(3,M3,2,3,"div",2)),2&e){const a=t.MAs(1);t.xp6(2),t.Q6J("ngIf",!i.isSupportedBrowser)("ngIfElse",a),t.xp6(1),t.Q6J("ngIf",i.dataExamInfo.isShow)}},dependencies:[D.mk,D.sg,D.O5,D.PC,g0.XC,Lc.ey,g0.ZL,vr.lW,Zv.oG,Jo.Hw,x0.Ou,Mi.gM,f._Y,f.YN,f.Kr,f.Fj,f.wV,f.JJ,f.JL,f.On,f.F,f.oH,Dv,Df,b0.P,Td.Z,v0,D.Ov,jt.JV,jt.QN,jt.CR,jt.Ju,jt.XA,jt.MZ,jt.Nk],styles:[".span-status[_ngcontent-%COMP%]{font-size:18px;color:#fff}.box-file-content-file_preview--blur_status[_ngcontent-%COMP%]{left:0;position:absolute;top:0;width:100%;background:rgba(0,0,0,.5882352941);height:100%;padding-top:20%}mat-icon.clear-icon[_ngcontent-%COMP%]{font-size:15px;color:#999;position:absolute;right:5px;z-index:10;top:5px;height:unset;width:unset}mat-icon.clear-icon[_ngcontent-%COMP%]:hover{cursor:pointer}.remove-layer[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;top:0;left:0;z-index:8;background-color:#000000d1;display:flex;justify-content:center;align-items:center;color:#fff;font-size:1em}@keyframes _ngcontent-%COMP%_animatefadeIn{0%{top:0;opacity:0}to{top:0;opacity:1}}#examHeader[_ngcontent-%COMP%]{background:#fff;border-radius:7px;overflow:hidden;position:relative}#box-create-action[_ngcontent-%COMP%]   .box-file[_ngcontent-%COMP%]   .box-control[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:45px;margin-top:-15px}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]{background:inherit;box-shadow:none;height:calc(100vh - 110px);display:flex}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_drop[_ngcontent-%COMP%]{cursor:pointer;width:100%;display:flex;justify-content:center;align-items:center;color:#5c5c5c}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_drop--input[_ngcontent-%COMP%]{text-align:center}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .is-dragover[_ngcontent-%COMP%]{background:#e4e4e4!important}#box-create-action[_ngcontent-%COMP%]   .box-file-content--viewer[_ngcontent-%COMP%]{overflow:auto;position:relative;width:100%}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box[_ngcontent-%COMP%]{overflow-y:scroll;scroll-behavior:smooth;overflow-x:hidden;background:#323639;padding:4px}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item[_ngcontent-%COMP%]{margin-bottom:20px}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item__img[_ngcontent-%COMP%]{position:relative;padding:10px;border-radius:5px 5px 0 0;overflow:hidden;background-color:#fff}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item__img.group[_ngcontent-%COMP%]{border-radius:5px}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item__img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;cursor:default;border:1px solid #c0c0c0}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item__img_result[_ngcontent-%COMP%]{padding:5px 0;background:white;border-radius:0 0 5px 5px;border:1px solid #414548}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item__img_result[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;cursor:default}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item__control_flex[_ngcontent-%COMP%]{display:flex;align-items:center;border-radius:0 0 5px 5px;padding:8px 20px;justify-content:space-between}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item__control_flex[_ngcontent-%COMP%]   .btn-ans[_ngcontent-%COMP%]{background:white;height:30px;width:30px;border-radius:50%;margin-left:5px;color:rgb(var(--color-slate-800)/var(--tw-text-opacity))}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item__control_flex[_ngcontent-%COMP%]   .btn-ans-result[_ngcontent-%COMP%]{display:inline-flex!important;color:#fff;background-color:#f39c12;padding:15px}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item__control_flex[_ngcontent-%COMP%]   .btn-remove[_ngcontent-%COMP%]{background:red;color:#fff;box-shadow:inset 0 0 58px 8px #00000012}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item__control_flex[_ngcontent-%COMP%]   .btn-edit[_ngcontent-%COMP%]{background:#f59c12;color:#fff}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item__control_flex[_ngcontent-%COMP%]   .inp[_ngcontent-%COMP%]{margin-left:10px;width:70px;text-align:center;border:none;height:25px}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item__control_flex[_ngcontent-%COMP%]   .select[_ngcontent-%COMP%]{border:none;height:25px;background-color:#e0e0e0;border-radius:5px;background-position:right 0rem center!important;color:#000;padding:0 5px;padding-right:20px!important;font-size:revert!important}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item__control_flex[_ngcontent-%COMP%]   .select[_ngcontent-%COMP%]:focus-visible{outline:none}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item__control_flex[_ngcontent-%COMP%]   .inp-result[_ngcontent-%COMP%]{margin-left:10px;width:-moz-fit-content;width:fit-content;height:25px;padding:3px 10px;color:#949494;font-size:small}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item[_ngcontent-%COMP%]   .link-merge-image-control[_ngcontent-%COMP%]{margin-bottom:10px;text-align:center;margin-top:-10px}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item[_ngcontent-%COMP%]   .link-merge-image-control[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{cursor:pointer}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item[_ngcontent-%COMP%]   .link-merge-image-control[_ngcontent-%COMP%]:hover{color:#f06292}#box-create-action[_ngcontent-%COMP%]   .inp-name-root[_ngcontent-%COMP%]{position:fixed;top:0;width:55%;left:170px;display:flex;justify-content:center;align-items:center;height:45px}#box-create-action[_ngcontent-%COMP%]   .inp-name-root[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-width:1px;border-style:solid;border-radius:5px;border-color:#d6d6d6;font-weight:500;font-size:13px;text-align:center;width:85%;padding:4px}#box-create-action[_ngcontent-%COMP%]   .inp-name-root[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus-visible{outline:none}#box-create-action[_ngcontent-%COMP%]   .btnAttQuestion[_ngcontent-%COMP%]{background:#f59c12;height:25px;display:flex;align-items:center;padding:0 10px;border-radius:3px;cursor:pointer}#box-create-action[_ngcontent-%COMP%]   .dropFileAttachQuestion[_ngcontent-%COMP%]{display:flex;height:88px;background:#ececec;justify-content:center;align-items:center;border-bottom:1px solid #44beb5;cursor:pointer;border-radius:5px 5px 0 0}#box-create-action[_ngcontent-%COMP%]   .dropFileAttachQuestion[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}#box-create-action[_ngcontent-%COMP%]   .dropFileAttachQuestion[_ngcontent-%COMP%]   audio[_ngcontent-%COMP%]{height:40px}#box-create-action[_ngcontent-%COMP%]   .dropFileAttachQuestion[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{height:80px;background:white;padding:5px;display:flex;justify-content:center;align-items:center;border-radius:3px;margin-left:5px}#box-create-action[_ngcontent-%COMP%]   .dropFileAttachQuestion[_ngcontent-%COMP%]   .preview-box[_ngcontent-%COMP%]{text-align:center}.isShowHelp[_ngcontent-%COMP%]{display:block!important}.question-wrapper[_ngcontent-%COMP%]{position:relative}.question-wrapper[_ngcontent-%COMP%]   .ox-questions-item__control-sub[_ngcontent-%COMP%]{position:absolute;top:2px;right:2px;z-index:10;color:#fff!important;border-radius:50%;width:20px;height:20px;display:flex;align-items:center;justify-content:center}.question-wrapper[_ngcontent-%COMP%]   .ox-questions-item__control-sub[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff;font-size:15px}.img-group[_ngcontent-%COMP%]{position:relative}.img-group[_ngcontent-%COMP%]   .mixInGroupNotif[_ngcontent-%COMP%]{display:none}.img-group[_ngcontent-%COMP%]:hover   .mixInGroupNotif[_ngcontent-%COMP%]{display:block;background-color:#d63031}.mixInGroup[_ngcontent-%COMP%], .mixInGroupNotif[_ngcontent-%COMP%]{position:absolute;width:80px;height:50px;top:-30px;left:-46px;background-color:#d63031d4;transform:rotate(-45deg);color:#fff;font-size:9px;text-align:center;padding-top:30px}.dt-header[_ngcontent-%COMP%]{background:#323639;color:#fff;padding:12px}#examNameInput[_ngcontent-%COMP%]{position:absolute;width:110%;left:-10%;top:-18px;border:1px solid #e0e0e0;border-radius:3px;padding:0 5px;height:36px}#examSaveBtns[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center;position:absolute;z-index:9;width:50%;right:-50%;top:-18px}#examSaveBtns[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]{padding-left:50px;padding-right:50px;background-color:#2361ae}#examSaveBtns[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]:hover{background-color:#1e5395}#examSaveBtns[_ngcontent-%COMP%]   .btn-save.mat-button-disabled[_ngcontent-%COMP%]{background-color:#0000001f}#examSaveBtns[_ngcontent-%COMP%]   .btn-reload[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px}#box-manual[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;align-items:center;position:absolute;z-index:9;width:50%;right:100%;top:-16px}#box-manual[_ngcontent-%COMP%]   #buttonHD[_ngcontent-%COMP%]{color:#2361ae;border:none}.error-block[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center}#btnEdits[_ngcontent-%COMP%]:hover{background-color:#e7e7e7}.pagination[_ngcontent-%COMP%]{min-width:130px;display:flex;align-items:center;justify-content:space-between;max-width:230px;color:#fff}.pagination[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:25px;text-align:center;border:none;background-color:#414548;color:#fff}.pagination.mb-5[_ngcontent-%COMP%]{margin:0 auto}.alert-danger-note[_ngcontent-%COMP%]{display:revert!important;border:1px solid transparent!important;border-radius:.25rem!important;color:#721c24!important;background-color:#f8d7da!important;border-color:#f5c6cb!important}#inputQuestionNum[_ngcontent-%COMP%]{height:22px;width:100%;text-align:center;border:none;margin-left:5px;min-width:30px;max-width:50px;border-radius:3px;color:rgb(var(--color-slate-800)/var(--tw-text-opacity))}#resizeBar[_ngcontent-%COMP%]{width:5px;transition:background-color .5s}#resizeBar[_ngcontent-%COMP%]:hover{background-color:#2262ae;cursor:col-resize}#resizeBar.hover[_ngcontent-%COMP%]{background-color:#2262ae}#iframePdf[_ngcontent-%COMP%]{position:relative;flex:auto}#iframePdf[_ngcontent-%COMP%]   .maskLayer[_ngcontent-%COMP%]{position:absolute;width:0;height:100%;left:0}span.attch-icon[_ngcontent-%COMP%]{position:relative}span.attch-icon[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]{position:absolute;bottom:-12px;left:50%;margin-left:-7px;color:#ececec}"]}),n})(),Ad=(()=>{class n extends lo.e{ngOnInit(){}constructor(e,i){super(i,e),this.dialogRef=e,this.data=i,this.isNotShowAgain=new f.NI(!1)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36($.so,8),t.Y36($.WI,8))},n.\u0275cmp=t.Xpm({type:n,selectors:[["user-manual"]],features:[t.qOj],decls:41,vars:32,consts:[[1,"box","p-5"],[2,"min-height","55vh"],[1,"text-center","mb-2"],[1,"font-medium","text-lg"],[1,"mt-2"],[2,"list-style","inherit","margin","inherit","padding","auto"],["src","assets/images/pdf-debug-v2.png","alt","",1,"mb-2",2,"max-width","100%"],[1,"mb-0"],["align","end"],[1,"flex","items-center","w-full",2,"justify-content","space-between"],[1,"form-check"],["id","is-not-show-again","type","checkbox",1,"form-check-input",3,"formControl"],["for","is-not-show-again",1,"form-check-label"],["azt-track-service","create-exam-with-file-pdf-WfkRk3L46OB",1,"btn","btn-primary","w-24",3,"mat-dialog-close"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"azt-mat-dialog-content")(2,"div",1)(3,"div",2)(4,"span",3),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()(),t.TgZ(7,"div",4)(8,"p"),t._uU(9),t.ALo(10,"mytranslate"),t.qZA(),t.TgZ(11,"p"),t._uU(12),t.ALo(13,"mytranslate"),t.qZA(),t.TgZ(14,"ul",5)(15,"li"),t._uU(16),t.ALo(17,"mytranslate"),t.qZA(),t.TgZ(18,"li"),t._uU(19),t.ALo(20,"mytranslate"),t.qZA(),t.TgZ(21,"li"),t._uU(22),t.ALo(23,"mytranslate"),t.qZA()(),t._UZ(24,"img",6),t.TgZ(25,"p"),t._uU(26),t.ALo(27,"mytranslate"),t.qZA(),t.TgZ(28,"p",7),t._uU(29),t.ALo(30,"mytranslate"),t.qZA()()()(),t.TgZ(31,"mat-dialog-actions",8)(32,"div",9)(33,"div",10),t._UZ(34,"input",11),t.TgZ(35,"label",12),t._uU(36),t.ALo(37,"mytranslate"),t.qZA()(),t.TgZ(38,"button",13),t._uU(39),t.ALo(40,"mytranslate"),t.qZA()()()()),2&e&&(t.xp6(5),t.hij(" ",t.lcZ(6,12,"lang_testbank_create_exam_width_file_pdf_tutorial_pdf")," "),t.xp6(4),t.hij("",t.lcZ(10,14,"lang_testbank_create_exam_width_file_pdf_note_one"),"."),t.xp6(3),t.hij("",t.lcZ(13,16,"lang_testbank_create_exam_width_file_pdf_note_two"),":"),t.xp6(4),t.Oqu(t.lcZ(17,18,"lang_testbank_create_exam_width_file_pdf_label_question")),t.xp6(3),t.Oqu(t.lcZ(20,20,"lang_testbank_create_exam_width_file_pdf_lable_answer")),t.xp6(3),t.Oqu(t.lcZ(23,22,"lang_testbank_create_exam_width_file_pdf_content_area")),t.xp6(4),t.hij("",t.lcZ(27,24,"lang_testbank_create_exam_width_file_pdf_note_three")," "),t.xp6(3),t.hij("",t.lcZ(30,26,"lang_testbank_create_exam_width_file_pdf_note_four"),"."),t.xp6(5),t.Q6J("formControl",i.isNotShowAgain),t.xp6(2),t.hij(" ",t.lcZ(37,28,"lang_testbank_create_exam_width_file_pdf_not_view")," "),t.xp6(2),t.Q6J("mat-dialog-close",i.isNotShowAgain.value),t.xp6(1),t.Oqu(t.lcZ(40,30,"lang_button_close")))},dependencies:[$.ZT,$.H8,f.Wl,f.JJ,f.oH,Ic.R,jt.JV],encapsulation:2}),n})();var L3=M(71026),fo=M(98129),ul=M(89156),P3=M(56260),L0=M(52467),P0=M(97694),Rf=M(4021),N3=M(28079);function Z3(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1," , "),t.qZA())}function D3(n,o){if(1&n&&(t.O4$(),t.kcU(),t.TgZ(0,"span")(1,"span",13),t._uU(2),t.qZA(),t.YNc(3,Z3,2,0,"span",10),t.qZA()),2&n){const e=o.$implicit,i=o.index,a=t.oxw();t.xp6(2),t.hij(' "',e.classroom.name,'" '),t.xp6(1),t.Q6J("ngIf",a.classroomErrorObjs.length>1&&i!==a.classroomErrorObjs.length-1)}}function j3(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.O4$(),t.TgZ(3,"svg",14),t._UZ(4,"polyline",15),t.qZA()()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_xem_chi_tiet_loi")," "))}function q3(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.O4$(),t.TgZ(3,"svg",14),t._UZ(4,"polyline",16),t.qZA()()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_an_xem_chi_tiet_loi")," "))}function F3(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1," , "),t.qZA())}function Q3(n,o){if(1&n&&(t.TgZ(0,"span",29)(1,"span",13),t._uU(2),t.qZA(),t.YNc(3,F3,2,0,"span",10),t.qZA()),2&n){const e=o.$implicit,i=o.index,a=t.oxw(2).$implicit;t.xp6(2),t.hij(' "',e,'" '),t.xp6(1),t.Q6J("ngIf",a.duplicatedStudentCodes&&a.duplicatedStudentCodes.length>1&&i!==a.duplicatedStudentCodes.length-1)}}function R3(n,o){if(1&n&&(t.TgZ(0,"div",27)(1,"span"),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.YNc(4,Q3,4,2,"span",28),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(2),t.hij(" ","- "+t.lcZ(3,2,"lang_auto_so_bao_danh_bi_trung")+": ",""),t.xp6(2),t.Q6J("ngForOf",e.duplicatedStudentCodes)}}function U3(n,o){1&n&&(t.TgZ(0,"div",27),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ","- "+t.lcZ(2,1,"lang_auto_hoc_sinh_khong_co_so_bao_danh")," "))}function B3(n,o){if(1&n&&(t.TgZ(0,"div",24)(1,"div",17)(2,"div",25)(3,"span"),t._uU(4),t.ALo(5,"mytranslate"),t.qZA(),t.TgZ(6,"span",13),t._uU(7),t.qZA()(),t.YNc(8,R3,5,4,"div",26),t.YNc(9,U3,3,3,"div",26),t.qZA()()),2&n){const e=o.$implicit;t.xp6(4),t.hij(" ",t.lcZ(5,4,"lang_auto_cac_loi_so_bao_danh_trong_lop")+" "," "),t.xp6(3),t.hij(" ",'"'+e.classroom.name+'": '," "),t.xp6(1),t.Q6J("ngIf",e.isDuplicatedStudentCode),t.xp6(1),t.Q6J("ngIf",e.isMissingStudentCode)}}function z3(n,o){1&n&&(t.TgZ(0,"span"),t.O4$(),t.TgZ(1,"svg",30),t._UZ(2,"path",31)(3,"path",32)(4,"path",33),t.qZA()())}function J3(n,o){1&n&&(t.TgZ(0,"span",34),t._UZ(1,"azt-loading-ui"),t.qZA())}function H3(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",17)(1,"div",18),t.YNc(2,B3,10,6,"div",19),t.qZA(),t.TgZ(3,"div",20)(4,"button",21),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.getStudentListByClassroomIds(a.classroomIds))}),t.YNc(5,z3,5,0,"span",10),t.YNc(6,J3,2,0,"span",22),t.TgZ(7,"span",23),t._uU(8),t.ALo(9,"mytranslate"),t.qZA()()()()}if(2&n){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.classroomErrorObjs),t.xp6(3),t.Q6J("ngIf",!e.loadingExport),t.xp6(1),t.Q6J("ngIf",e.loadingExport),t.xp6(2),t.hij(" ",t.lcZ(9,4,"lang_auto_tai_danh_sach_hoc_sinh_loi")," ")}}function G3(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"azt-export-excel-for-student-list",35),t.NdJ("exportDataDone",function(a){t.CHM(e);const r=t.oxw();return t.KtG(r.exportStudentListDone(a))}),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("objs",e.exportStudentObjs)("type",1)}}let $3=(()=>{class n extends St.Q{constructor(e,i){super(),this.shareFileFlutterService=e,this.studentProfileV2Service=i,this.classroomErrorObjs=[],this.classroomIds="",this.examId=0,this.checkPostParam=!1,this.showExpandError=!1,this.loadingExport=!1}getStudentListByClassroomIds(e){this.loadingExport=!0,this.waitDestroy(this.studentProfileV2Service.apiStudentProfileV2GetStudentsGet(e,this.checkPostParam?void 0:this.examId).subscribe(i=>{if(i.success){this.exportStudentObjs=i.data;let a=this.exportStudentObjs?.length??0;if(this.exportStudentObjs){let r=[],s=[];this.exportStudentObjs.forEach((l,c,d)=>{r.find(h=>h.identificationNumber===l.identificationNumber)?s.push(l):r.push(l)});for(let l=0;l<a;l++)if(this.exportStudentObjs[l].identificationNumber)for(let c=0;c<s.length;c++)this.exportStudentObjs&&this.exportStudentObjs[l].identificationNumber===s[c].identificationNumber&&(this.exportStudentObjs[l].errorImportIdentification="lang_auto_trung_so_bao_danh");else this.exportStudentObjs[l].errorImportIdentification="lang_auto_khong_co_so_bao_danh"}if(this.exportStudentObjs)for(let r=0;r<a;r++)if(this.exportStudentObjs[r].identificationNumber)for(let s=r+1;s<a;s++)this.exportStudentObjs&&this.exportStudentObjs[r].identificationNumber===this.exportStudentObjs[s].identificationNumber&&(this.exportStudentObjs[r].errorImportIdentification="lang_auto_trung_so_bao_danh");else this.exportStudentObjs[r].errorImportIdentification="lang_auto_khong_co_so_bao_danh"}else this.showErrorSnack(i.message??"");this.loadingExport=!1}))}exportStudentListDone(e){let i=this.commonService.createFileNameExportFile(["list-student","danh-sach-hoc-sinh"])+".xlsx";this.shareFileFlutterService.shareFileWithBlob(e,i)}toggleExpandErrors(){this.showExpandError=!this.showExpandError}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(ys.g),t.Y36(Rf.LU))},n.\u0275cmp=t.Xpm({type:n,selectors:[["azt-errors-identification"]],inputs:{classroomErrorObjs:"classroomErrorObjs",classroomIds:"classroomIds",examId:"examId",checkPostParam:"checkPostParam"},features:[t.qOj],decls:18,vars:11,consts:[[1,"azt-error-block"],[1,"flex","text-pending"],[1,"text-lg"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","icon-name","alert-triangle","data-lucide","alert-triangle",1,"lucide","lucide-alert-triangle","w-6","h-6","mr-2","flex-none"],["d","M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z"],["x1","12","y1","9","x2","12","y2","13"],["x1","12","y1","17","x2","12.01","y2","17"],[4,"ngFor","ngForOf"],[1,"mt-2","error-detail"],["azt-track-service","azt-errors-identification-ZElYECOq3mc",1,"btn-text-primary","font-medium",3,"click"],[4,"ngIf"],["class","mt-2",4,"ngIf"],[3,"objs","type","exportDataDone",4,"ngIf"],[1,"font-medium"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide"],["points","6 9 12 15 18 9"],["points","18 15 12 9 6 15"],[1,"mt-2"],[1,"alert","alert-outline-danger","show"],["class","text-md",4,"ngFor","ngForOf"],[1,"mt-3"],["azt-track-service","azt-errors-identification-85xomF_be8D",1,"btn-text-primary","font-medium",3,"click"],["class","w-5 h-5 inline-block mr-2",4,"ngIf"],[1,"text-primary"],[1,"text-md"],[1,"az-error-title"],["class","mt-1 text-xs",4,"ngIf"],[1,"mt-1","text-xs"],["class","text-danger",4,"ngFor","ngForOf"],[1,"text-danger"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-5","h-5","lucide","mr-2"],["d","M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"],["d","M12 12v9"],["d","m8 17 4 4 4-4"],[1,"w-5","h-5","inline-block","mr-2"],[3,"objs","type","exportDataDone"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t.O4$(),t.TgZ(3,"svg",3),t._UZ(4,"path",4)(5,"line",5)(6,"line",6),t.qZA(),t._uU(7),t.ALo(8,"mytranslate"),t.YNc(9,D3,4,2,"span",7),t._uU(10),t.ALo(11,"mytranslate"),t.qZA()(),t.kcU(),t.TgZ(12,"div",8)(13,"button",9),t.NdJ("click",function(){return i.toggleExpandErrors()}),t.YNc(14,j3,5,3,"span",10),t.YNc(15,q3,5,3,"span",10),t.qZA(),t.YNc(16,H3,10,6,"div",11),t.qZA()(),t.YNc(17,G3,1,2,"azt-export-excel-for-student-list",12)),2&e&&(t.xp6(7),t.hij(" ",t.lcZ(8,7,"lang_auto_so_bao_danh_cua_hoc_sinh_trong_lop")," "),t.xp6(2),t.Q6J("ngForOf",i.classroomErrorObjs),t.xp6(1),t.hij(" ",t.lcZ(11,9,"lang_auto_dang_bi_trung_hoac_bi_thieu")," "),t.xp6(4),t.Q6J("ngIf",!i.showExpandError),t.xp6(1),t.Q6J("ngIf",i.showExpandError),t.xp6(1),t.Q6J("ngIf",i.showExpandError),t.xp6(1),t.Q6J("ngIf",i.exportStudentObjs))},dependencies:[D.sg,D.O5,N3.S,oi.n,jt.JV],encapsulation:2}),n})();function Y3(n,o){1&n&&(t.TgZ(0,"div",2)(1,"span",3),t._UZ(2,"azt-loading-ui"),t.qZA()())}function K3(n,o){1&n&&(t.TgZ(0,"p",11),t.O4$(),t.TgZ(1,"svg",12),t._UZ(2,"path",13)(3,"polyline",14)(4,"path",15)(5,"rect",16)(6,"path",17),t.qZA(),t._uU(7),t.ALo(8,"mytranslate"),t.qZA()),2&n&&(t.xp6(7),t.hij(" ",t.lcZ(8,1,"lang_auto_file_danh_sach_so_bao_danh")," "))}function W3(n,o){1&n&&(t.TgZ(0,"span",23),t._UZ(1,"azt-loading-ui"),t.qZA())}function V3(n,o){1&n&&(t.O4$(),t.TgZ(0,"svg",24),t._UZ(1,"path",25)(2,"polyline",26)(3,"line",27),t.qZA())}function X3(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",18),t._UZ(1,"input",19),t.TgZ(2,"button",20),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.printStudentCode())}),t.YNc(3,W3,2,0,"span",21),t.YNc(4,V3,4,0,"ng-template",null,22,t.W1O),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()()}if(2&n){const e=t.MAs(5),i=t.oxw(3);t.xp6(1),t.s9C("value",i.createExportStudentCodeName(!1)),t.xp6(2),t.Q6J("ngIf",i.isLoadingPrintCodeStudent)("ngIfElse",e),t.xp6(3),t.hij(" ",t.lcZ(7,4,"lang_auto_tai_ve")," ")}}const ty=function(n){return{"text-left":n}};function ey(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",28)(1,"button",29),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.clickNumbering())}),t.O4$(),t.TgZ(2,"svg",24),t._UZ(3,"path",30)(4,"path",31)(5,"path",32)(6,"path",33),t.qZA(),t._uU(7),t.ALo(8,"mytranslate"),t.qZA()()}if(2&n){const e=t.oxw(3);t.Q6J("ngClass",t.VKq(4,ty,1==e.styleView)),t.xp6(7),t.hij(" ",t.lcZ(8,2,"lang_auto_danh_lai_sbd")," ")}}function ny(n,o){if(1&n&&(t.TgZ(0,"div",5),t.YNc(1,K3,9,3,"p",8),t.YNc(2,X3,8,6,"div",9),t.YNc(3,ey,9,6,"div",10),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!e.checkNumbering),t.xp6(1),t.Q6J("ngIf",!e.checkNumbering),t.xp6(1),t.Q6J("ngIf",!e.checkNumbering)}}function iy(n,o){1&n&&(t.TgZ(0,"div",40),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_ban_chua_chon_lop_vui_long_chon_lop_de_in_so_bao_danh")," "))}function oy(n,o){1&n&&(t.TgZ(0,"span",23),t._UZ(1,"azt-loading-ui"),t.qZA())}function Uf(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",41)(1,"button",42),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.destroyConfig())}),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"button",43),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.savePrintExam())}),t.YNc(5,oy,2,0,"span",44),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()()}if(2&n){const e=t.oxw(3);t.xp6(2),t.hij(" ",t.lcZ(3,4,"lang_auto_huy")," "),t.xp6(2),t.Q6J("disabled",e.form.invalid||!e.validFormIdentify),t.xp6(1),t.Q6J("ngIf",e.loadingConfig),t.xp6(1),t.hij(" ",t.lcZ(7,6,"lang_auto_tiep_tuc")," ")}}function N0(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",45),t._UZ(1,"azt-errors-identification",46),t.TgZ(2,"div",47),t._uU(3),t.ALo(4,"mytranslate"),t.qZA(),t.TgZ(5,"div",48)(6,"button",49),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.backToChooseClassroom())}),t._uU(7),t.ALo(8,"mytranslate"),t.qZA(),t.TgZ(9,"button",50),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.openAutomaticIdentification())}),t._uU(10),t.ALo(11,"mytranslate"),t.qZA()()()}if(2&n){const e=t.oxw(3);let i;t.xp6(1),t.Q6J("classroomErrorObjs",e.classroomErrorObjs)("classroomIds",e.classroomIds)("examId",null!==(i=null==e.examObj?null:e.examObj.id)&&void 0!==i?i:0)("checkPostParam",e.checkPostParam),t.xp6(2),t.hij(" ",t.lcZ(4,7,"lang_auto_vui_long_click_vao_sua_sbd_dot")," "),t.xp6(4),t.hij(" ",t.lcZ(8,9,"lang_auto_huy")," "),t.xp6(3),t.hij(" ",t.lcZ(11,11,"lang_auto_sua_sbd")," ")}}function Z0(n,o){if(1&n&&(t.YNc(0,iy,3,3,"div",34),t.TgZ(1,"div",35),t._UZ(2,"azt-list-classroom-checkbox-new",36),t.qZA(),t.TgZ(3,"div",37),t.YNc(4,Uf,8,8,"div",38),t.YNc(5,N0,12,13,"div",39),t.qZA()),2&n){const e=t.oxw(2);t.Q6J("ngIf",""!==e.msgError&&(null==e.form.controls.classroomIds.errors?null:e.form.controls.classroomIds.errors.classroomCheckBoxValidator)&&0===e.classroomErrorObjs.length),t.xp6(2),t.Q6J("form",e.form)("classroomGroupData",e.classroomWithGroup)("examClassroomObjs",e.examClassroomObjs)("permissionName",e.permissionTypes.exam),t.xp6(2),t.Q6J("ngIf",0===e.classroomErrorObjs.length),t.xp6(1),t.Q6J("ngIf",e.classroomErrorObjs.length>0)}}function ay(n,o){if(1&n&&(t.TgZ(0,"form",4)(1,"div",5),t.YNc(2,ny,4,3,"div",6),t.YNc(3,Z0,6,7,"ng-template",null,7,t.W1O),t.qZA()()),2&n){const e=t.MAs(4),i=t.oxw();t.Q6J("formGroup",i.form),t.xp6(2),t.Q6J("ngIf",!i.checkNumbering)("ngIfElse",e)}}let D0=(()=>{class n extends St.Q{createExportStudentCodeName(e){var i=this.printAnswersheetService.exportFileNameOfStudentCode(1,this.examObj?.name??"",this.examObj?.hashId??"");return e&&(i=this.commonService.replaceAll(i,"_","-")??""),i}clickNumbering(){this.checkNumbering=!0}showInputAdvanceSetting(){this.showAdvanceSetting=!this.showAdvanceSetting}backToChooseClassroom(){this.classroomErrorObjs=[],this.msgError="",this.msgErrorTwo=""}destroyConfig(){this.checkNumbering=!1,this.classroomErrorObjs=[],this.msgError="",this.msgErrorTwo=""}savePrintExam(){this.loadingConfig=!0,this.classroomErrorObjs=[];const e=this.sAztClassroomCheckboxService.getClassroomIdsCheckedInGroup(this.form.controls.classroomFormArray);0===e.length&&this.examClassroomObjs.forEach(a=>{a.classroomId&&e.push(a.classroomId)}),this.classroomIds=e.toString(),this.offlineStudentCodeService.apiOfflineStudentCodeSetStudentCodesPost({classroomIds:e,examHashId:this.hashId??""}).subscribe(a=>{if(1==a.success)this.stopStatusObj(),this.checkDownloadSBD=!0,this.checkNumbering=!1,this.loadingConfig=!1,this.getExamDataByHashId(this.hashId??""),this.msgErrorTwo="";else{let r=a?.data?.classrooms??[];for(let s=0;s<r.length;s++){const l=r[s];(l.isDuplicatedStudentCode||l.isMissingStudentCode)&&this.classroomErrorObjs.push(l)}this.loadingConfig=!1,this.msgErrorTwo=a.message??""}this.checkPostParam=!0})}printStudentCode(){this.isLoadingPrintCodeStudent=!0,this.waitDestroy(this.offlineStudentCodeService.apiOfflineStudentCodeCreateStudentCodesGet(this.hashId).subscribe(e=>{if(1==e.success)this.printAnswersheetService.printStudentCode(this.examObj,e?.data?.objs??[]),this.isLoadingPrintCodeStudent=!1,this.checkNumbering=!1,this.msgError="",this.classroomErrorObjs=[];else{let i=e?.data?.examClassroomConfig?.classrooms??[],a=[];for(let r=0;r<i.length;r++){const s=i[r];(s.isDuplicatedStudentCode||s.isMissingStudentCode)&&this.classroomErrorObjs.push(s),a.push(s.classroom?.id)}this.classroomIds=a.toString(),this.isLoadingPrintCodeStudent=!1,this.checkNumbering=!0,this.msgError=e.message??""}this.checkPostParam=!1}))}calcMaxIndexInput(){const e=this.sAztClassroomCheckboxService.getClassroomIdsCheckedInGroup(this.form.controls.classroomFormArray);let i=999999;return this.classroomWithGroup.forEach(a=>{a.classroomObjs.forEach(r=>{this.commonService.isExistInArray(e,r.id)&&(i-=r.countStudents??0)})}),i}checkValidFormIdentify(e){this.validFormIdentify=e.target instanceof HTMLInputElement&&Number(e.target.value)<=this.calcMaxIndexInput()}getExamDataByHashId(e){this.initStatusObj(),this.waitDestroy(this.documentConfigService.apiDocumentConfigGetExamConfigDataV2Get(e).subscribe(i=>{1==i.success?null!=i.data&&(this.examObj=i.data.examObj,this.classroomWithGroup=i.data.classroomGroupObjs??new Array,this.examClassroomObjs=i.data.examClassroomObjs??[],this.successStatusObj()):this.errorStatusObj(i.message??"",!0)}))}openAutomaticIdentification(){const e=this.sAztClassroomCheckboxService.getClassroomIdsCheckedInGroup(this.form.controls.classroomFormArray);0===e.length&&this.examClassroomObjs.forEach(a=>{a.classroomId&&e.push(a.classroomId)});const i=this.getMyQueryParam("classroomId");!e.length&&i&&e.push(Number(i)),this.waitDestroy(this.studentProfileV2Service.apiStudentProfileV2GetStudentsGet(e.toString()).subscribe(a=>{a.success&&(this.totalStudent=a.data?.length??0,this.sAztDialogService.open(P0.G,{data:{classroomWithGroup:[],type:2,listCheckBox:e,totalStudent:this.totalStudent},restoreFocus:!1,width:"800px"}).afterClosed().subscribe(s=>{s&&this.savePrintExam()}))}))}automaticNumberingCodeByClassroomId(e){this.loadingConfig=!0,this.offlineStudentCodeService.apiOfflineStudentCodeSetStudentCodesPost({classroomIds:[e],examHashId:this.hashId??""}).subscribe(a=>{if(1==a.success)this.stopStatusObj(),this.checkDownloadSBD=!0,this.checkNumbering=!1,this.loadingConfig=!1,this.getExamDataByHashId(this.hashId??""),this.msgErrorTwo="";else{let r=a?.data?.classrooms??[];for(let s=0;s<r.length;s++){const l=r[s];(l.isDuplicatedStudentCode||l.isMissingStudentCode)&&this.classroomErrorObjs.push(l)}this.loadingConfig=!1,this.msgErrorTwo=a.message??""}this.checkPostParam=!0})}ngOnInit(){super.ngOnInit();const e=this.getMyQueryParam("classroomId");this.hashId&&this.getExamDataByHashId(this.hashId),e&&this.automaticNumberingCodeByClassroomId(Number(e)),super.ngOnInit()}constructor(e,i,a,r,s,l){super(),this.documentConfigService=e,this.sAztDialogService=i,this.offlineStudentCodeService=a,this.printAnswersheetService=r,this.sAztClassroomCheckboxService=s,this.studentProfileV2Service=l,this.hashId="",this.styleView=0,this.checkStudentCode=!1,this.startStudentCode=1,this.examObj=void 0,this.permissionTypes=ap.y,this.checkNumbering=!1,this.checkDownloadSBD=!1,this.examClassroomObjs=[],this.isLoadingPrintCodeStudent=!1,this.loadingConfig=!1,this.showAdvanceSetting=!1,this.validFormIdentify=!0,this.classroomErrorObjs=[],this.classroomIds="",this.msgError="",this.msgErrorTwo="",this.totalStudent=0,this.checkPostParam=!1,this.classroomWithGroup=[],this.form=new f.cw({classroomIds:new f.Oe([]),classroomFormArray:new f.Oe([]),startIdentifyIndex:new f.NI(this.startStudentCode,{nonNullable:!0,validators:[f.kI.min(1),f.kI.max(999999),f.kI.pattern(/^[0-9]*$/)]}),whoAllow:new f.NI(2,{nonNullable:!0}),isShowCheckClass:new f.NI(!1,{nonNullable:!0})},{validators:[Cf.h.classroomCheckBoxValidator]})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Ke.Cq),t.Y36(Fi.C),t.Y36(ya.MH),t.Y36(Sm.H),t.Y36(Tf.f),t.Y36(Rf.LU))},n.\u0275cmp=t.Xpm({type:n,selectors:[["numbering-identification"]],inputs:{hashId:"hashId",styleView:"styleView",checkStudentCode:"checkStudentCode",startStudentCode:"startStudentCode"},features:[t.qOj],decls:3,vars:2,consts:[["class","w-full flex",4,"ngIf","ngIfElse"],["doneLoading",""],[1,"w-full","flex"],[1,"w-4","h-4","inline-block"],[3,"formGroup"],[1,"app"],["class","app",4,"ngIf","ngIfElse"],["numbering",""],["class","font-medium flex items-center intro-x",4,"ngIf"],["class","relative mt-2 intro-x",4,"ngIf"],["class","mt-3",3,"ngClass",4,"ngIf"],[1,"font-medium","flex","items-center","intro-x"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","mr-2","text-success"],["d","M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4"],["points","14 2 14 8 20 8"],["d","M10 12h2v6"],["x","2","y","12","width","4","height","6"],["d","M10 18h4"],[1,"relative","mt-2","intro-x"],["type","text","readonly","",1,"form-control","py-3","px-4","border-transparent","bg-slate-100","pr-10",2,"padding-right","120px",3,"value"],["azt-track-service","numbering-identification-mO_7BlXNpZ8",1,"btn","btn-primary","absolute","my-auto","inset-y-0","right-0",2,"border-top-left-radius","0","border-bottom-left-radius","0",3,"click"],["class","w-4 h-4 inline-block mr-2",4,"ngIf","ngIfElse"],["donePrintCodeLoading",""],[1,"w-4","h-4","inline-block","mr-2"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","mr-2"],["d","M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"],["points","7 10 12 15 17 10"],["x1","12","y1","15","x2","12","y2","3"],[1,"mt-3",3,"ngClass"],["azt-track-service","numbering-identification-GfouPhXkxs2",1,"btn","btn-outline-secondary",3,"click"],["d","M21 2v6h-6"],["d","M3 12a9 9 0 0 1 15-6.7L21 8"],["d","M3 22v-6h6"],["d","M21 12a9 9 0 0 1-15 6.7L3 16"],["class","text-danger font-medium mb-4",4,"ngIf"],[1,"azt-list-classroom"],[3,"form","classroomGroupData","examClassroomObjs","permissionName"],[1,"grid","grid-cols-12","gap-2","justify-between","numbering-identification"],["class","col-span-12 items-center text-right mt-3",4,"ngIf"],["class","col-span-12 mt-3",4,"ngIf"],[1,"text-danger","font-medium","mb-4"],[1,"col-span-12","items-center","text-right","mt-3"],["azt-track-service","numbering-identification-EaHzWOF-ZYD",1,"btn","btn-secondary","mr-2",3,"click"],["azt-track-service","numbering-identification-422NanET_rP",1,"btn","btn-primary-soft",3,"disabled","click"],["class","w-4 h-4 inline-block mr-2",4,"ngIf"],[1,"col-span-12","mt-3"],[3,"classroomErrorObjs","classroomIds","examId","checkPostParam"],[1,"mt-3","font-medium"],[1,"mt-3"],["azt-track-service","numbering-identification-yx-KGOCvWTN",1,"btn","btn-secondary","mr-2",3,"click"],["azt-track-service","numbering-identification-_Mu1PflxZjE",1,"btn","btn-primary",3,"click"]],template:function(e,i){if(1&e&&(t.YNc(0,Y3,3,0,"div",0),t.YNc(1,ay,5,3,"ng-template",null,1,t.W1O)),2&e){const a=t.MAs(2);t.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a)}},dependencies:[D.mk,D.O5,f._Y,f.JL,f.sg,wd._,$3,oi.n,jt.JV],encapsulation:2}),n})();function ry(n,o){1&n&&t._UZ(0,"azt-loading-effect")}function Bf(n,o){1&n&&(t.TgZ(0,"span",30),t._UZ(1,"azt-loading-ui"),t.qZA())}function sy(n,o){1&n&&(t.TgZ(0,"span",31),t._UZ(1,"lucide-icon",32),t.qZA())}function ly(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",27),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.printPdfExam(!1,a.offlineExamObj.hashId,""))}),t.YNc(1,Bf,2,0,"span",28),t.YNc(2,sy,2,0,"ng-template",null,29,t.W1O),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()}if(2&n){const e=t.MAs(3),i=t.oxw(2);t.xp6(1),t.Q6J("ngIf",i.loadingObj.downloadExam)("ngIfElse",e),t.xp6(3),t.hij(" ",t.lcZ(5,3,"lang_auto_tai_ve")," ")}}function cy(n,o){1&n&&(t.TgZ(0,"span",33),t._UZ(1,"azt-loading-ui"),t.qZA())}function Tr(n,o){1&n&&(t.TgZ(0,"span",31),t._UZ(1,"lucide-icon",32),t.qZA())}function zf(n,o){1&n&&(t.TgZ(0,"span",33),t._UZ(1,"azt-loading-ui"),t.qZA())}function uy(n,o){1&n&&(t.TgZ(0,"span",31),t._UZ(1,"lucide-icon",32),t.qZA())}function dy(n,o){1&n&&(t.TgZ(0,"span",30),t._UZ(1,"azt-loading-ui"),t.qZA())}function my(n,o){1&n&&(t.TgZ(0,"span",31),t._UZ(1,"lucide-icon",32),t.qZA())}function hy(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",34),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.printPdfExam(!0,a.offlineExamObj.hashId,""))}),t.YNc(1,dy,2,0,"span",28),t.YNc(2,my,2,0,"ng-template",null,29,t.W1O),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()}if(2&n){const e=t.MAs(3),i=t.oxw(2);t.xp6(1),t.Q6J("ngIf",i.loadingObj.downloadExam)("ngIfElse",e),t.xp6(3),t.hij(" ",t.lcZ(5,3,"lang_auto_tai_ve")," ")}}function Jf(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"azt-export-excel-for-answersheet",35),t.NdJ("exportDataDone",function(a){t.CHM(e);const r=t.oxw(2);return t.KtG(r.exportDataDone(a))}),t.qZA()}if(2&n){const e=t.oxw(2);let i;t.Q6J("startQuestionIndex",null!==(i=e.examObj.startQuestionIndex)&&void 0!==i?i:1)("obj",e.exportExcelData)}}function py(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5)(4,"span",6),t._UZ(5,"lucide-icon",7),t.qZA(),t._uU(6),t.ALo(7,"mytranslate"),t.qZA(),t._UZ(8,"div",8),t.qZA(),t.TgZ(9,"div",9),t._UZ(10,"input",10),t.YNc(11,ly,6,5,"button",11),t.qZA()(),t.TgZ(12,"div",12)(13,"p",13)(14,"span",14),t._UZ(15,"lucide-icon",15),t.qZA(),t._uU(16),t.ALo(17,"mytranslate"),t._UZ(18,"notice-print-a4-paper-box"),t.qZA(),t.TgZ(19,"div",9),t._UZ(20,"input",10),t.TgZ(21,"button",16),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.printExamAnswersheet(a.offlineExamObj.hashId))}),t.YNc(22,cy,2,0,"span",17),t.YNc(23,Tr,2,0,"ng-template",null,18,t.W1O),t._uU(25),t.ALo(26,"mytranslate"),t.qZA()()(),t.TgZ(27,"div",12)(28,"p",13)(29,"span",19),t._UZ(30,"lucide-icon",20),t.qZA(),t._uU(31),t.ALo(32,"mytranslate"),t.qZA(),t.TgZ(33,"div",9),t._UZ(34,"input",10),t.TgZ(35,"button",21),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.exportExcelForAnswerSheet())}),t.YNc(36,zf,2,0,"span",17),t.YNc(37,uy,2,0,"ng-template",null,22,t.W1O),t._uU(39),t.ALo(40,"mytranslate"),t.qZA()()(),t.TgZ(41,"div",3)(42,"div",4)(43,"div",5)(44,"span",6),t._UZ(45,"lucide-icon",7),t.qZA(),t._uU(46),t.ALo(47,"mytranslate"),t.qZA()(),t.TgZ(48,"div",9),t._UZ(49,"input",10),t.YNc(50,hy,6,5,"button",23),t.qZA()(),t.TgZ(51,"div",12)(52,"div",24),t._UZ(53,"numbering-identification",25),t.ALo(54,"mustInClassroom"),t.qZA()()(),t.YNc(55,Jf,1,2,"azt-export-excel-for-answersheet",26)}if(2&n){const e=t.MAs(24),i=t.MAs(38),a=t.oxw();t.xp6(6),t.hij(" ",t.lcZ(7,20,"lang_auto_file_de_thi")," "),t.xp6(4),t.s9C("value",a.createNameExam("exam",!0)),t.xp6(1),t.Q6J("ngIf",0==a.showFormAddInformation),t.xp6(5),t.hij(" ",t.lcZ(17,22,"lang_auto_file_phieu_tra_loi")," "),t.xp6(4),t.s9C("value",a.createNameExam("answersheet",!0)),t.xp6(2),t.Q6J("ngIf",a.loadingObj.downloadAnswerSheet)("ngIfElse",e),t.xp6(3),t.hij(" ",t.lcZ(26,24,"lang_auto_tai_ve")," "),t.xp6(6),t.hij(" ",t.lcZ(32,26,"lang_auto_file_answer_list")," "),t.xp6(3),t.s9C("value",a.createNameExam("answerexcel",!0)),t.xp6(2),t.Q6J("ngIf",a.isLoadingPrintAnswer)("ngIfElse",i),t.xp6(3),t.hij(" ",t.lcZ(40,28,"lang_auto_tai_ve")," "),t.xp6(7),t.hij(" ",t.lcZ(47,30,"lang_auto_file_de_thi_kem_dap_an")," "),t.xp6(3),t.s9C("value",a.createNameExam("answerdocx",!0)),t.xp6(1),t.Q6J("ngIf",0==a.showFormAddInformation),t.xp6(3),t.Q6J("hashId",a.examObj.hashId)("checkStudentCode",t.lcZ(54,32,a.examObj))("startStudentCode",a.startStudentCode),t.xp6(2),t.Q6J("ngIf",null!=a.exportExcelData)}}let bp=(()=>{class n extends St.Q{closeChangeInformation(e){this.showFormAddInformation=!1,e&&this.printPdfExam(!1,this.offlineExamObj.hashId,"")}createNameExam(e,i){var a="";a="answersheet"==e?this.printAnswersheetService.exportFileNameOfAnswerSheet(0,this.examObj.name??"",this.offlineExamObj?.hashId??""):"answerexcel"==e||"answerdocx"==e?this.printAnswersheetService.exportFileNameOfAnswerExcelOffline(0,this.examObj.name??"",this.offlineExamObj?.hashId??""):this.printAnswersheetService.exportFileNameOfExamOffline(0,this.examObj.name??"",this.offlineExamObj?.hashId??"",void 0),i&&(a=this.commonService.replaceAll(a,"_","-")??"");var r=".docx";return r="answersheet"==e&&7!=this.offlineExamObj.answersheetTemplate?".pdf":r,a+("answerexcel"==e?".xlsx":r)}getAmountQuestionPartByType(e,i){return e.find(a=>a.answerType==i)?.totalQuestion??0}printExamAnswersheet(e){this.loadingObj.downloadAnswerSheet=!0,this.waitDestroy(this.offlineMixQuestionService.apiOfflineMixQuestionGetObjsGet(this?.examObj?.hashId??"",e??"","").subscribe(i=>{if(i.success){let a=this.getTotalQuestionInMixQuestionObjs(i.data?.mixQuestionObjs??[],i.data?.questionObjs??[]);if(a){const r=a;let s=i.data?.offlineExamObj?.answersheetTemplate??0,l=i?.data?.offlineExamObj?.totalQuestionOfAnswersheet??void 0,c=this.createNameExam("answersheet",!1);if(s==this.allAnswerSheet.templateTrueFalseA4||s==this.allAnswerSheet.templateTrueFalseEssayA4||s==this.allAnswerSheet.templateTrueFalseA5||s==this.allAnswerSheet.templateTrueFalseA6){let d={answerSheetTemplate:s,amountTemplateTrueFalseA4:this.getAmountQuestionPartByType(i.data?.offlineExamPartObjs??[],5)??8,amountTemplateStartTrueFalseA4:i?.data?.resetQuestionIndex?1:41,amountTemplateMultipleChoiceA4:this.getAmountQuestionPartByType(i.data?.offlineExamPartObjs??[],1)??40,amountTemplateStartMultipleChoiceA4:1,amountTemplateFillA4:this.getAmountQuestionPartByType(i.data?.offlineExamPartObjs??[],4)??6,amountTemplateStartFillA4:i?.data?.resetQuestionIndex?1:49};this.answerSheetHelper=this.printAnswersheetService.chooseAnswerSheetTemplate(this.answerSheetHelper,s,r,0,i.data?.maxOfflineMixQuestionHashId,l),this.answerSheetHelper.downloadTrueFalseAnswerSheet(c,d).subscribe(h=>{h.success||this.errorStatusObj(this.commonService.translateToKeyParam("lang_auto_tao_phieu_loi_vui_long_thu_lai",h.message??"none"),!0)}),this.loadingObj.downloadAnswerSheet=!1}else this.answerSheetHelper=this.printAnswersheetService.chooseAnswerSheetTemplate(this.answerSheetHelper,s,r,0,i.data?.maxOfflineMixQuestionHashId,l),this.answerSheetHelper.createAnswerSheet().subscribe(d=>{1==d.success?this.answerSheetHelper.exportPdf(c):this.errorStatusObj(i.message??"",!0),this.loadingObj.downloadAnswerSheet=!1})}else this.errorStatusObj(i.message??"",!0),this.loadingObj.downloadAnswerSheet=!1}else this.errorStatusObj(i.message??"",!0),this.loadingObj.downloadAnswerSheet=!1}))}getTotalQuestionInMixQuestionObjs(e,i){if(e.length>0){let a=0;return e.forEach(r=>{let s=this.zipDataService.decodeContentGzip(r?.mixDatas??""),l=this.castJsonToObj(s);a<(l?.length??0)&&(a=l?.length??0)}),a}return i.length>0?i.length:void 0}printPdfExam(e,i,a){ul.G.openLoadingEffect(this.commonService.myTranslateInstant("lang_auto_dang_lay_du_lieu_tu_he_thong")??""),this.waitDestroy(this.offlineMixQuestionService.apiOfflineMixQuestionListMixExamQuestionsGet(this.examObj.hashId,i).subscribe(r=>{if(r.success)if(ul.G.changeMsgLoadingEffect(this.commonService.myTranslateInstant("lang_auto_dang_xu_ly_du_lieu")??""),r.data?.offlineExamMixQuestions){let s={nameSchool:"",nameSubject:""};this.examPrintInfoObj?.status&&(s={nameSchool:this.examPrintInfoObj?.schoolName??"",nameSubject:this.examPrintInfoObj?.subject??""});let l=this.tableAnswerDownload.value?2:0;if(1==r.data?.offlineExamMixQuestions.length){let c=this.commonService.castJsonToClassObjs(yt.v,JSON.stringify(r.data?.offlineExamMixQuestions[0].mixQuestions??[]))??[];this.exportSAztDocxService.downloadExam(e,r.data.exam??{},r.data?.offlineExam,r.data?.offlineExamMixQuestions[0],c,s,l,d=>ul.G.closeLoadingEffect(d),d=>{ul.G.changeMsgLoadingEffect(d)},void 0,!0).then().catch(d=>{this.showErrorSnack(d.message)})}else this.exportSAztDocxService.downloadExamObjs(e,r.data.exam??{},r.data?.offlineExam,r.data?.offlineExamMixQuestions,s,l,c=>ul.G.closeLoadingEffect(c),c=>{ul.G.changeMsgLoadingEffect(c)},void 0,!0).then().catch(c=>{this.showErrorSnack(c.message)})}else ul.G.closeLoadingEffect(10),this.showErrorSnack("lang_auto_khong_co_du_lieu_dao_de");else this.errorStatusObj(r.message??"",!0),ul.G.closeLoadingEffect(10)}))}exportExcelForAnswerSheet(){this.isLoadingPrintAnswer=!0;let e=this.commonService.getMyParam(this.activeRoute,"hash_id")??"";this.waitDestroy(this.offlineExamExportService.apiOfflineExamExportExportResultOfAllOfflineMixQuestionHashIdGet(e).subscribe(i=>{if(1==i.success){let a=i.data?.obj;a?.offlineMixQuestionObjs&&a.offlineMixQuestionObjs.length>0?this.exportExcelData=this.commonService.myClone(a):(this.showErrorSnack("lang_auto_chua_co_du_lieu_dap_an_de_offline"),this.isLoadingPrintAnswer=!1)}else this.showErrorSnack(i.message??""),this.isLoadingPrintAnswer=!1}))}exportDataDone(e){let i=this.createNameExam("answerexcel",!1);this.shareFileFlutterService.shareFileWithBlob(e,i),this.isLoadingPrintAnswer=!1}ngOnInit(){var e=[{source:this.cdnService.convertCdnLinkOfGitHub("almo/opencv.js"),name:"opencv_crop_white.js"}];this.commonService.loadScriptPromises(e).then(()=>{this.isLoadingLib=!1}),super.ngOnInit()}constructor(e,i,a,r,s,l,c,d,h){super(),this.shareFileFlutterService=e,this.activeRoute=i,this.printAnswersheetService=a,this.offlineMixQuestionService=r,this.answerSheetHelper=s,this.zipDataService=l,this.cdnService=c,this.exportSAztDocxService=d,this.offlineExamExportService=h,this.startStudentCode=1,this.loadingObj={},this.isLoadingLib=!0,this.isLoadingPrintAnswer=!1,this.showFormAddInformation=!1,this.tableAnswerDownload=new f.NI(!1),this.allAnswerSheet=Sl.x}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(ys.g),t.Y36(O.gz),t.Y36(Sm.H),t.Y36(ya.fs),t.Y36(tp),t.Y36(La.a),t.Y36(Gn.E),t.Y36(P3.F),t.Y36(ya.qr))},n.\u0275cmp=t.Xpm({type:n,selectors:[["print-history-box"]],inputs:{examObj:"examObj",offlineExamObj:"offlineExamObj",startStudentCode:"startStudentCode",examPrintInfoObj:"examPrintInfoObj"},features:[t.qOj],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["doneLoading",""],[1,"action-history"],[1,"action-file","mt-4"],[1,"font-medium","flex","flex-col","md:flex-row","md:items-center"],[1,"mr-auto","flex","items-center"],[1,"inline-block","w-4","h-4","text-pending","mr-2"],["name","file-check"],[1,"form-check","mt-1","md:mt-0"],[1,"relative","mt-2","intro-x"],["type","text","readonly","",1,"form-control","py-3","px-4","border-transparent","bg-slate-100","pr-10",2,"padding-right","120px",3,"value"],["azt-track-service","print_history-031D9RFdQh","class","btn btn-primary absolute my-auto inset-y-0 right-0","style","border-top-left-radius: 0; border-bottom-left-radius: 0",3,"click",4,"ngIf"],[1,"action-file","mt-3"],[1,"font-medium","flex","items-center"],[1,"inline-block","w-4","h-4","mr-2","text-danger"],["name","file-spreadsheet"],["azt-track-service","print_history-XPpw6jKuAiS",1,"btn","btn-primary","absolute","my-auto","inset-y-0","right-0",2,"border-top-left-radius","0","border-bottom-left-radius","0",3,"click"],["class","w-4 h-4 mr-2 text-white",4,"ngIf","ngIfElse"],["doneAnswerSheetLoading",""],[1,"inline-block","w-4","h-4","mr-2","text-success"],["name","file-text"],["azt-track-service","print_history-2VQtAklEkvH",1,"btn","btn-primary","absolute","my-auto","inset-y-0","right-0",2,"border-top-left-radius","0","border-bottom-left-radius","0",3,"click"],["doneLoadingPrintAnswer",""],["azt-track-service","print_history-yYG9YXhT8","class","btn btn-primary absolute my-auto inset-y-0 right-0","style","border-top-left-radius: 0; border-bottom-left-radius: 0",3,"click",4,"ngIf"],[1,"intro-x"],[3,"hashId","checkStudentCode","startStudentCode"],[3,"startQuestionIndex","obj","exportDataDone",4,"ngIf"],["azt-track-service","print_history-031D9RFdQh",1,"btn","btn-primary","absolute","my-auto","inset-y-0","right-0",2,"border-top-left-radius","0","border-bottom-left-radius","0",3,"click"],["class","w-4 h-4 text-white mr-2",4,"ngIf","ngIfElse"],["doneExamLoading",""],[1,"w-4","h-4","text-white","mr-2"],[1,"inline-block","w-4","h-4","mr-2"],["name","download"],[1,"w-4","h-4","mr-2","text-white"],["azt-track-service","print_history-yYG9YXhT8",1,"btn","btn-primary","absolute","my-auto","inset-y-0","right-0",2,"border-top-left-radius","0","border-bottom-left-radius","0",3,"click"],[3,"startQuestionIndex","obj","exportDataDone"]],template:function(e,i){if(1&e&&(t.YNc(0,ry,1,0,"azt-loading-effect",0),t.YNc(1,py,56,34,"ng-template",null,1,t.W1O)),2&e){const a=t.MAs(2);t.Q6J("ngIf",i.isLoadingLib&&null!=i.examObj&&null!=i.offlineExamObj)("ngIfElse",a)}},dependencies:[D.O5,si.l,L0.S,oi.n,C.Nh5,D0,$1,jt.JV,jt.EZ],encapsulation:2}),n})();function _y(n,o){1&n&&t._UZ(0,"azt-loading-effect")}function fy(n,o){1&n&&(t.TgZ(0,"div",33)(1,"h3",34),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"span",35),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()()),2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,2,"lang_auto_tao_de_thanh_cong")," \u{1f44f} "),t.xp6(3),t.hij(" ",t.lcZ(6,4,"lang_auto_vui_long_chon_cac_hinh_thuc_ben_duoi")," "))}function gy(n,o){if(1&n&&t._UZ(0,"print-history-box",38),2&n){const e=t.oxw(3);t.Q6J("examObj",e.examObj)("offlineExamObj",e.offlineExamObj)("examPrintInfoObj",e.examPrintInfoObj)("startStudentCode",e.startStudentCode)}}function xy(n,o){if(1&n&&(t.TgZ(0,"div",11)(1,"h3",36),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.YNc(4,gy,1,4,"print-history-box",37),t.qZA()),2&n){const e=t.oxw(2);t.xp6(2),t.hij(" ",t.lcZ(3,2,"lang_auto_du_lieu_gan_nhat")," "),t.xp6(2),t.Q6J("ngIf",e.examObj&&e.offlineExamObj)}}function j0(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",39)(1,"h3",6),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"div",7)(5,"span",8),t._UZ(6,"lucide-icon",9),t.qZA(),t._uU(7),t.ALo(8,"mytranslate"),t.TgZ(9,"a",40),t._uU(10),t.ALo(11,"mytranslate"),t.qZA()(),t.TgZ(12,"div",11)(13,"button",41),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.redirectPowerpoint())}),t.TgZ(14,"span",13),t._UZ(15,"lucide-icon",42),t.qZA(),t._uU(16),t.ALo(17,"mytranslate"),t.qZA(),t.TgZ(18,"p",15),t._uU(19),t.ALo(20,"mytranslate"),t.qZA()()()}2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,5,"lang_auto_chen_vao_powerpoint")," "),t.xp6(5),t.hij(" ",t.lcZ(8,7,"lang_auto_chen_noi_dung_cau_hoi_vao_slide_powerpoint_hoc_sinh_co_the_tuong_tac_dot")," "),t.xp6(3),t.Oqu(t.lcZ(11,9,"lang_auto_xem_huong_dan_tai_day")),t.xp6(6),t.hij(" ",t.lcZ(17,11,"lang_auto_chen_vao_powerpoint")," "),t.xp6(3),t.hij(" ",t.lcZ(20,13,"lang_auto_comment_powerpoint_guild")," "))}function by(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",3),t.YNc(1,fy,7,6,"div",4),t.TgZ(2,"div",5)(3,"h3",6),t._uU(4),t.ALo(5,"mytranslate"),t.qZA(),t.TgZ(6,"div",7)(7,"span",8),t._UZ(8,"lucide-icon",9),t.qZA(),t._uU(9),t.ALo(10,"mytranslate"),t.TgZ(11,"a",10),t._uU(12),t.ALo(13,"mytranslate"),t.qZA()(),t.TgZ(14,"div",11)(15,"button",12),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.redirectConfigTestOnline())}),t.TgZ(16,"span",13),t._UZ(17,"lucide-icon",14),t.qZA(),t._uU(18),t.ALo(19,"mytranslate"),t.qZA(),t.TgZ(20,"p",15),t._uU(21),t.ALo(22,"mytranslate"),t.TgZ(23,"a",16),t._uU(24),t.ALo(25,"mytranslate"),t.qZA()()()(),t.TgZ(26,"div",17)(27,"h3",6),t._uU(28),t.ALo(29,"mytranslate"),t.qZA(),t.TgZ(30,"div",7)(31,"span",8),t._UZ(32,"lucide-icon",9),t.qZA(),t._uU(33),t.ALo(34,"mytranslate"),t.TgZ(35,"a",18),t._uU(36),t.ALo(37,"mytranslate"),t.qZA()(),t.TgZ(38,"div",11)(39,"div",19)(40,"button",20),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.openDialogExamPrintTicket())}),t.TgZ(41,"span",13),t._UZ(42,"lucide-icon",21),t.qZA(),t.TgZ(43,"span",22),t._uU(44),t.ALo(45,"mytranslate"),t.ALo(46,"mytranslate"),t.qZA()(),t.TgZ(47,"p",15),t._uU(48),t.ALo(49,"mytranslate"),t.qZA()()(),t.YNc(50,xy,5,4,"div",23),t.qZA(),t.YNc(51,j0,21,15,"div",24),t.ALo(52,"fullPermission"),t.TgZ(53,"div",25)(54,"div",26)(55,"a",27),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.getRouterLinkToExamResult())}),t.TgZ(56,"span",28),t._UZ(57,"lucide-icon",29),t.qZA(),t._uU(58),t.ALo(59,"mytranslate"),t.qZA()(),t.TgZ(60,"div",30)(61,"a",31),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.backToDocumentManager())}),t.TgZ(62,"span",28),t._UZ(63,"lucide-icon",32),t.qZA(),t._uU(64),t.ALo(65,"mytranslate"),t.qZA()()()()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.isNewDocument),t.xp6(3),t.hij(" ",t.lcZ(5,17,"lang_auto_online")," "),t.xp6(5),t.hij(" ",t.lcZ(10,19,"lang_auto_copy_link_gui_cho_hoc_sinh_hoc_sinh_truy_cap_link_de_lam_bai_va_nop_bai_online_ho_tro_ca_trac_nghiem_va_tu_luan")," "),t.xp6(3),t.Oqu(t.lcZ(13,21,"lang_auto_tim_hieu_them")),t.xp6(6),t.hij(" ",t.lcZ(19,23,"lang_auto_cai_dat_lam_bai_online")," "),t.xp6(3),t.hij(" ",t.lcZ(22,25,"lang_auto_thiet_lap_thoi_gian_lam_bai_giam_sat_tu_dong_tao_de_con_cho_phep_xem_diem_doing_xuat_ban_de_tao_link_gui_cho_hoc_sinh_lam_bai_va_nop_bai")," "),t.xp6(3),t.Oqu(t.lcZ(25,27,"lang_auto_tim_hieu_them")),t.xp6(4),t.hij(" ",t.lcZ(29,29,"lang_auto_offline")," "),t.xp6(5),t.hij(" ",t.lcZ(34,31,"lang_auto_in_de_cho_hoc_sinh_lam_tren_giay_scan_hoac_chup_anh_bai_lam_cua_hoc_sinh_va_upload_len_azota_de_cham_tu_dong_hoc_sinh_cung_co_the_tu_chup_lai_bai_lam_cua_minh_va_nop_tren_azota")," "),t.xp6(3),t.Oqu(t.lcZ(37,33,"lang_auto_tim_hieu_them")),t.xp6(8),t.AsE("",t.lcZ(45,35,"lang_auto_in_de_upper")," ",t.lcZ(46,37,"lang_auto_-_co_phieu_tra_loi_trac_nghiem_rieng"),""),t.xp6(4),t.hij(" ",t.lcZ(49,39,"lang_auto_xuat_file_pdf_chua_cac_de_thi_da_duoc_dao_thu_tu_cau_hoi_va_dap_an_tu_de_goc_kem_theo_mot_file_pdf_chua_mau_phieu_tra_loi_trac_nghiem_theo_mau_tuy_chon")," "),t.xp6(2),t.Q6J("ngIf",null==e.offlineExamObj?null:e.offlineExamObj.hashId),t.xp6(1),t.Q6J("ngIf",t.xi3(52,41,e.examObj,"exam")),t.xp6(7),t.hij(" ",t.lcZ(59,44,"lang_auto_quan_ly_danh_sach_da_thi")," "),t.xp6(6),t.hij(" ",t.lcZ(65,46,"lang_auto_ve_trang_quan_ly_file")," ")}}let vy=(()=>{class n extends St.Q{redirectConfigTestOnline(){const e=`/admin/testbank/config-exam-online/${this.examObj?.categoryId??0}/${this.examObj?.hashId}`,i=`/admin/testbank/action-online-offline/${this.examObj?.categoryId??0}/${this.examObj?.hashId}?backto=${this.paramBackToLink}`,a=this.commonService.getMyQueryParam("classroomId"),r=this.commonService.getMyQueryParam("indexSession");a||r?this.paramClassroomService.redirectUrlAddParamClassroom(e,`?backto=${encodeURIComponent(i)}`,["backto"]):this.myNavigationWithQueryString(e,`?backto=${i}`)}openDialogExamPrintTicket(){let e=`/admin/testbank/action-online-offline/${this.examObj?.categoryId??0}/${this.examObj?.hashId}?backto=`+this.paramBackToLink;this.myNavigationWithQueryString(`/admin/testbank/print-exam-and-ticket/${this.examObj?.categoryId??0}/${this.examObj?.hashId}`,`?backto=${e}`)}redirectPowerpoint(){let e=`/admin/testbank/action-online-offline/${this.examObj?.categoryId??0}/${this.examObj?.hashId}?backto=`+this.paramBackToLink;this.myNavigationWithQueryString(`/admin/testbank/powerpoint/${this.examObj?.categoryId??0}/${this.examObj?.id}`,`?backto=${e}`)}getRouterLinkToExamResult(){let e=this.getBackData(this.backToLink,!1);this.myNavigationWithQueryString("/admin/testbank/exam-results-list/"+(this.examObj?.categoryId??0)+"/"+this.examObj?.id+"/0",e?"?"+e:"")}getBackData(e,i){let a="";if(e.includes("backto")){let r=e.substring(e.lastIndexOf("backto"));a=r.includes("shareType")&&i?r.substring(r.lastIndexOf("data")):r}else a=e.includes("shareType")&&i?e.substring(e.lastIndexOf("data")):"backto="+e;return a}backToDocumentManager(){let e=this.getBackData(this.backToLink,!0);var i=this.commonService.getMyParam(this.activeRoute,"cat_id")??"";this.myNavigationWithQueryString(`/admin/testbank/document-management/0/${i}/1`,e?"?"+decodeURIComponent(e):"")}getExamInfoByHashId(e){this.initStatusObj(),this.waitDestroy(this.documentConfigService.apiDocumentConfigGetExamConfigDataGet(e).subscribe(i=>{1==i.success?(this.dataConfigDocument=i.data,i.data&&i.data?.examObj&&(this.examObj=i.data.examObj,this.offlineExamObj=i.data.offlineExamObj,this.examPrintInfoObj=i.data.examPrintInfoObj),this.successStatusObj()):this.errorStatusObj(i.message??"",!0)}))}constructor(e,i,a){super(),this.activeRoute=e,this.documentConfigService=i,this.paramClassroomService=a,this.backToLink="",this.paramBackToLink="",this.returnToLink="",this.examHashId="",this.isNewDocument=!1,this.startStudentCode=1}ngOnInit(){let e=this.commonService.getMyQueryParam("isNewDocument")??"";this.isNewDocument="1"==e.toString();var i=this.commonService.getMyParam(this.activeRoute,"cat_id")??"";this.paramBackToLink=this.commonService.getMyQueryParam("backto")??"",this.examHashId=this.commonService.getMyParam(this.activeRoute,"hash_id")??"",this.backToLink=this.paramBackToLink?this.paramBackToLink:`/admin/testbank/document-management/0/${i??0}/1`,this.returnToLink=`/admin/testbank/action-online-offline/${i??0}/${this.examHashId}?backto=`+this.paramBackToLink,this.getExamInfoByHashId(this.examHashId),this.commonService.translateMetaData({title:"lang_cms_action_online_offline_title",description:"lang_cms_action_online_offline_description",image:""}),super.ngOnInit()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(O.gz),t.Y36(Ke.Cq),t.Y36(Oo))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-action-online-offline"]],features:[t.qOj],decls:4,vars:3,consts:[[3,"headerBackToLink"],[4,"ngIf","ngIfElse"],["doneLoading",""],[1,"intro-y","action-document","mx-auto","mt-8",2,"max-width","1000px"],["class","action-heading mb-4",4,"ngIf"],[1,"action-online"],[1,"text-md","uppercase","font-medium"],[1,"text-md","mt-1"],[1,"w-4","h-4","mr-1","inline-block",2,"vertical-align","sub"],["name","info"],["azt-track-service","action-online-offline-9sByNv80IwU","href","https://docs.azota.vn/docs/huong-dan-su-dung/thi-online/cau-hinh-thi-online/","target","_blank","rel","noopener noreferrer",1,"text-primary","font-medium"],[1,"box","mt-3","p-5"],["azt-track-service","action-online-offline-Ow1f0tm7-at",1,"btn","btn-outline-primary",3,"click"],[1,"w-5","h-5","mr-2"],["name","cog"],[1,"text-xs","mt-2","text-slate-500"],["azt-track-service","action-online-offline-McQDzOjO9G-","href","https://docs.azota.vn/docs/huong-dan-su-dung/thi-online/cau-hinh-thi-online/","target","_blank","rel","noopener noreferrer",1,"text-primary","font-medium"],[1,"action-offline","mt-8"],["azt-track-service","action-online-offline-yRjklKAot9b","href","https://docs.azota.vn/docs/huong-dan-su-dung/thi-offline/gioi-thieu-tinh-nang-thi-offline/","target","_blank","rel","noopener noreferrer",1,"text-primary","font-medium"],[1,"azt-offline-print"],["azt-track-service","action-online-offline-IIO1TsHmgjr",1,"btn","btn-outline-primary",3,"click"],["name","printer"],[1,"mr-1"],["class","box mt-3 p-5",4,"ngIf"],["class","action-online mt-8",4,"ngIf"],[1,"mt-5","flex","flex-col","sm:flex-row","justify-center","items-center"],[1,"mr-2"],["azt-track-service","action-online-offline-ftSDs5DiFWa",1,"btn","btn-outline-primary","btn-transparent",3,"click"],[1,"w-4","h-4","mr-2"],["name","file-spreadsheet"],[1,"w-30"],["azt-track-service","action-online-offline-A6xAK9qc23J",1,"btn","btn-outline-primary","btn-transparent",3,"click"],["name","folder"],[1,"action-heading","mb-4"],[1,"text-md","font-medium","mb-1"],[1,"text-md"],[1,"text-md","font-medium","flex","items-center"],[3,"examObj","offlineExamObj","examPrintInfoObj","startStudentCode",4,"ngIf"],[3,"examObj","offlineExamObj","examPrintInfoObj","startStudentCode"],[1,"action-online","mt-8"],["azt-track-service","action-online-offline-gcTAKBJcf3U","href","https://www.youtube.com/watch?v=FpcOtHNGMCQ&ab_channel=Azota","target","_blank","rel","noopener noreferrer",1,"text-primary","font-medium"],["azt-track-service","action-online-offline-sbrNKGia_Tt",1,"btn","btn-outline-primary",3,"click"],["name","sidebar"]],template:function(e,i){if(1&e&&(t.TgZ(0,"teacher-layout",0),t.YNc(1,_y,1,0,"azt-loading-effect",1),t.YNc(2,by,66,48,"ng-template",null,2,t.W1O),t.qZA()),2&e){const a=t.MAs(3);t.Q6J("headerBackToLink",i.backToLink),t.xp6(1),t.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a)}},dependencies:[D.O5,si.l,fo._,C.Nh5,bp,jt.JV,jt.NK],encapsulation:2}),n})();var yy=M(26306),Lm=M(28861);class Iu{static customDateTimeValidator(o){const a=o.controls.endTime;let r=o.controls.startTime.value,s=a.value;return r&&s?Iu.calculationHomeworkTimeWithZeroSecond(r,s)>0?(a?.setErrors(null),null):(a?.setErrors({customDateTimeValidator:!0}),{identityRevealed:!0}):(a?.setErrors(null),null)}static calculationHomeworkTimeWithZeroSecond(o,e){let i=new Date(o),a=new Date(1e3*Iu.getSecondOfDateWithZeroSecond(i)),r=e?new Date(e):new Date,s=new Date(1e3*Iu.getSecondOfDateWithZeroSecond(r));return a.getTime()-s.getTime()>0?Math.floor((a.getTime()-s.getTime())/1e3):-1}static getSecondOfDateWithZeroSecond(o){var e=o.getSeconds();return Math.floor(o.getTime()/1e3)-e}}var wy=M(19743),Hf=M(62836),Pm=M(63120);let Cy=(()=>{class n extends lo.e{constructor(e,i){super(i,e),this.dialogRef=e,this.data=i}btnCloseDialog(e){this.dialogRef.close(e)}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)(t.Y36($.so,8),t.Y36($.WI,8))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-confirm-change-mode"]],features:[t.qOj],decls:22,vars:13,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-0"],[1,"text-md","font-medium","flex","items-center","p-3","pb-0"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-6","h-6","mr-2","text-pending"],["points","7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2"],["x1","12","y1","8","x2","12","y2","12"],["x1","12","y1","16","x2","12.01","y2","16"],[1,"mt-1"],[3,"defaultHeight"],[1,"text-xs","text-slate-500","dark:text-slate-400","p-3","pt-0"],[1,"p-3","text-right"],["azt-track-service","confirm-change-mode-GE57Kezd_",1,"btn","w-24","mr-2","btn-secondary",3,"click"],["azt-track-service","confirm-change-mode-n7HOfipb2c",1,"btn","w-24","btn-primary",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),t.O4$(),t.TgZ(4,"svg",4),t._UZ(5,"polygon",5)(6,"line",6)(7,"line",7),t.qZA(),t._uU(8),t.ALo(9,"mytranslate"),t.qZA(),t.kcU(),t.TgZ(10,"div",8)(11,"azt-mat-dialog-content",9)(12,"div",10),t._uU(13),t.ALo(14,"mytranslate"),t.qZA()()()()(),t.TgZ(15,"div",11)(16,"button",12),t.NdJ("click",function(){return i.btnCloseDialog(!1)}),t._uU(17),t.ALo(18,"mytranslate"),t.qZA(),t.TgZ(19,"button",13),t.NdJ("click",function(){return i.btnCloseDialog(!0)}),t._uU(20),t.ALo(21,"mytranslate"),t.qZA()()()),2&e&&(t.xp6(8),t.hij(" ",t.lcZ(9,5,"lang_auto_canh_bao")," "),t.xp6(3),t.Q6J("defaultHeight",60),t.xp6(2),t.hij(" ",t.lcZ(14,7,"lang_testbank_warning_change_mode_config")+"?"," "),t.xp6(4),t.hij(" ",t.lcZ(18,9,"lang_auto_dong")," "),t.xp6(3),t.hij(" ",t.lcZ(21,11,"lang_auto_xac_nhan")," "))},dependencies:[Ic.R,jt.JV],encapsulation:2}),n})();var q0=M(28368),Ty=M(59467),ky=M(61325),vp=M(98525);function Ay(n,o){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw().index;t.xp6(1),t.hij("",e+1,".")}}function Sy(n,o){1&n&&(t.TgZ(0,"span"),t._UZ(1,"input",57),t.qZA())}function Oy(n,o){1&n&&(t.TgZ(0,"span"),t._UZ(1,"input",58),t.qZA())}function Ey(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",49)(1,"div",50),t.YNc(2,Ay,2,1,"span",38),t.YNc(3,Sy,2,0,"span",38),t.YNc(4,Oy,2,0,"span",38),t.TgZ(5,"span",51)(6,"input",52),t.NdJ("change",function(a){const s=t.CHM(e).index,l=t.oxw(2).index,c=t.oxw();return t.KtG(c.changeInfoContent(a,l,s))}),t.ALo(7,"mytranslate"),t.qZA()(),t.TgZ(8,"a",53),t.NdJ("click",function(){const r=t.CHM(e).index,s=t.oxw(2).index,l=t.oxw();return t.KtG(l.removeContent(s,r))}),t.O4$(),t.TgZ(9,"svg",54),t._UZ(10,"line",55)(11,"line",56),t.qZA()()()()}if(2&n){const e=o.$implicit,i=t.oxw(2).$implicit;t.xp6(2),t.Q6J("ngIf",3==i.type),t.xp6(1),t.Q6J("ngIf",2==i.type),t.xp6(1),t.Q6J("ngIf",1==i.type),t.xp6(2),t.s9C("placeholder",""==e?t.lcZ(7,5,"lang_testbank_test_config_request_enter_name"):""),t.s9C("value",""!=e&&null!=e?e:"")}}function My(n,o){1&n&&(t.TgZ(0,"span"),t.O4$(),t.TgZ(1,"svg",40),t._UZ(2,"rect",59)(3,"line",60)(4,"line",61),t.qZA()())}function Iy(n,o){1&n&&(t.TgZ(0,"span"),t.O4$(),t.TgZ(1,"svg",40),t._UZ(2,"circle",62)(3,"line",60)(4,"line",61),t.qZA()())}function Ly(n,o){1&n&&(t.TgZ(0,"span"),t.O4$(),t.TgZ(1,"svg",40),t._UZ(2,"circle",62)(3,"line",60)(4,"line",61),t.qZA()())}function Py(n,o){if(1&n){const e=t.EpF();t.O4$(),t.kcU(),t.TgZ(0,"div",34),t.YNc(1,Ey,12,7,"div",35),t.TgZ(2,"div",36)(3,"button",37),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().index,r=t.oxw();return t.KtG(r.addMoreContent(a))}),t.YNc(4,My,5,0,"span",38),t.YNc(5,Iy,5,0,"span",38),t.YNc(6,Ly,5,0,"span",38),t._uU(7),t.ALo(8,"mytranslate"),t.qZA(),t.TgZ(9,"button",39),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().index,r=t.oxw();return t.KtG(r.addFastContent(a))}),t.O4$(),t.TgZ(10,"svg",40),t._UZ(11,"line",9)(12,"line",10),t.qZA(),t._uU(13),t.ALo(14,"mytranslate"),t.qZA()(),t.kcU(),t.TgZ(15,"div",41)(16,"div",42)(17,"div",43)(18,"textarea",44),t.NdJ("change",function(a){t.CHM(e);const r=t.oxw().index,s=t.oxw();return t.KtG(s.changeDataFastContent(a,r))}),t.qZA()(),t.TgZ(19,"div",45),t._uU(20),t.ALo(21,"mytranslate"),t.qZA(),t.TgZ(22,"div",46)(23,"button",47),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.closeDialogFastContent())}),t._uU(24),t.ALo(25,"mytranslate"),t.qZA(),t.TgZ(26,"button",48),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().index,r=t.oxw();return t.KtG(r.changeInfoFastContent(r.infoContentFast[a],a))}),t._uU(27),t.ALo(28,"mytranslate"),t.qZA()()()()()}if(2&n){const e=t.oxw(),i=e.$implicit,a=e.index,r=t.oxw();t.xp6(1),t.Q6J("ngForOf",i.contents),t.xp6(3),t.Q6J("ngIf",1==i.type),t.xp6(1),t.Q6J("ngIf",2==i.type),t.xp6(1),t.Q6J("ngIf",3==i.type),t.xp6(1),t.hij(" ",t.lcZ(8,10,"lang_testbank_test_config_more_options")," "),t.xp6(6),t.hij(" ",t.lcZ(14,12,"lang_testbank_test_config_quick_add")," "),t.xp6(2),t.Q6J("ngClass",r.checkDialogFastContent[a]?"":"hiddenIpt"),t.xp6(5),t.hij(" * ",t.lcZ(21,14,"lang_testbank_test_config_note")," "),t.xp6(4),t.hij(" ",t.lcZ(25,16,"lang_button_cancel")," "),t.xp6(3),t.hij(" ",t.lcZ(28,18,"lang_button_confirm")," ")}}const Ny=function(n){return{"mb-5":n}},Zy=function(n){return{"border-danger":n}};function Dy(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",12)(1,"div",13)(2,"div",14)(3,"div",15)(4,"div",16),t._uU(5),t.ALo(6,"mytranslate"),t.qZA(),t.TgZ(7,"input",17),t.NdJ("change",function(a){const s=t.CHM(e).index,l=t.oxw();return t.KtG(l.changeInfoTitle(a,s))}),t.ALo(8,"mytranslate"),t.ALo(9,"mytranslate"),t.qZA()()(),t.TgZ(10,"div",18)(11,"mat-form-field",19)(12,"mat-select",20),t.NdJ("selectionChange",function(a){const s=t.CHM(e).index,l=t.oxw();return t.KtG(l.changeTypeField(a,s))}),t.TgZ(13,"mat-option",21),t._uU(14),t.ALo(15,"mytranslate"),t.qZA(),t.TgZ(16,"mat-option",22),t._uU(17),t.ALo(18,"mytranslate"),t.qZA(),t.TgZ(19,"mat-option",23),t._uU(20),t.ALo(21,"mytranslate"),t.qZA(),t.TgZ(22,"mat-option",24),t._uU(23),t.ALo(24,"mytranslate"),t.qZA()()()(),t.TgZ(25,"div",25)(26,"button",26),t.NdJ("click",function(){const r=t.CHM(e).index,s=t.oxw();return t.KtG(s.removeFields(r))}),t.ALo(27,"mytranslate"),t.O4$(),t.TgZ(28,"svg",27),t._UZ(29,"path",28)(30,"path",29)(31,"path",30)(32,"line",31)(33,"line",32),t.qZA()()()(),t.YNc(34,Py,29,20,"div",33),t.qZA()}if(2&n){const e=o.$implicit,i=o.index,a=t.oxw();t.xp6(1),t.Q6J("ngClass",t.VKq(32,Ny,i!==a.infoFields.length-1)),t.xp6(4),t.AsE(" ",t.lcZ(6,16,"lang_testbank_test_config_information")," ",i+1," "),t.xp6(2),t.s9C("placeholder",e.error?t.lcZ(8,18,"lang_testbank_test_config_request_enter_name"):t.lcZ(9,20,"lang_testbank_test_config_enter_Information_you_want_student_enter")),t.Q6J("ngClass",t.VKq(34,Zy,e.error))("readonly",0===i&&!a.isBusinessDomain)("value",e.title),t.xp6(5),t.s9C("value",e.type),t.Q6J("disabled",0===i&&!a.isBusinessDomain),t.xp6(2),t.hij(" ",t.lcZ(15,22,"lang_testbank_test_config_reply_short"),""),t.xp6(3),t.hij("",t.lcZ(18,24,"lang_testbank_test_config_checkbox")," "),t.xp6(3),t.Oqu(t.lcZ(21,26,"lang_testbank_test_config_quiz")),t.xp6(3),t.hij(" ",t.lcZ(24,28,"lang_testbank_test_config_drop_down_menu"),""),t.xp6(3),t.s9C("matTooltip",t.lcZ(27,30,"lang_testbank_test_config_delete_information")),t.Q6J("disabled",0===i&&!a.isBusinessDomain),t.xp6(8),t.Q6J("ngIf",0!=e.type)}}function jy(n,o){1&n&&(t.TgZ(0,"div",63),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_config_exam_info_student_error")," "))}let qy=(()=>{class n extends St.Q{removeFields(e){this.infoFields.splice(e,1)}addNewFields(e){let i="";this.commonService.myTranslate(["lang_auto_thong_tin"]).subscribe(r=>{i=r.lang_auto_thong_tin}),this.infoFields.push({type:0,title:i+" "+((this.infoFields?this.infoFields.length:0)+1),contents:[]})}changeTypeField(e,i){this.infoFields[i].type!=e.value&&(this.infoFields[i].type=Number(e.value),this.infoFields[i].error=!1,this.checkValidInfo.emit())}changeInfoTitle(e,i){e.target.value&&""==e.target.value?(this.formInfoInvalid=!0,this.infoFields[i].error=!0,this.infoFields[i].title=e.target.value):(this.formInfoInvalid=!1,this.infoFields[i].error=!1,this.infoFields[i].title=e.target.value)}changeInfoContent(e,i,a){e.target.value&&""!=e.target.value?(this.infoFields[i].contents[a]=e.target.value,this.formInfoInvalid=!1):(this.infoFields[i].contents[a]=e.target.value,this.formInfoInvalid=!0)}removeContent(e,i){this.infoFields[e].contents?.splice(i,1),this.checkValidInfo.emit()}addMoreContent(e,i){let a="";this.commonService.myTranslate(["lang_auto_tuy_chon"]).subscribe(s=>{a=s.lang_auto_tuy_chon});let r=this.infoFields[e].contents?this.infoFields[e].contents.length:0;this.infoFields[e].contents&&Array.isArray(this.infoFields[e].contents)||(this.infoFields[e].contents=new Array),this.infoFields[e].contents.push(a+" "+(r+1)),this.checkValidInfo.emit()}addFastContent(e){this.indexContent=e,this.checkDialogFastContent[this.indexContent]=!0}changeDataFastContent(e,i){e.target.value&&(this.infoContentFast[i]=e.target.value,e.target.value="")}closeDialogFastContent(){this.checkDialogFastContent[this.indexContent]=!1}changeInfoFastContent(e,i){if(""!=e){let a=e.split("\n");a=a.map(r=>r.trim()),a=a.filter(r=>""!=r),this.infoFields[i].contents||(this.infoFields[i].contents=new Array),this.infoFields[i].contents=this.infoFields[i].contents.concat(a)}this.checkDialogFastContent[i]=!1}ngOnInit(){super.ngOnInit()}constructor(e){super(),this.commonService=e,this.infoFields=[],this.formInfoInvalid=!1,this.infoFieldsChange=new t.vpe,this.formInfoInvalidChange=new t.vpe,this.checkValidInfo=new t.vpe,this.infoContentFast=[],this.indexContent=0,this.checkDialogFastContent=[]}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(mi.z))},n.\u0275cmp=t.Xpm({type:n,selectors:[["test-config-online-student-info"]],inputs:{infoFields:"infoFields",formInfoInvalid:"formInfoInvalid"},outputs:{infoFieldsChange:"infoFieldsChange",formInfoInvalidChange:"formInfoInvalidChange",checkValidInfo:"checkValidInfo"},features:[t.qOj],decls:18,vars:11,consts:[[1,"border","border-slate-200/60","dark:border-darkmode-400","rounded-md","pb-1"],[1,"p-3","bg-slate-100","dark:bg-darkmode-400","flex","items-center"],[1,"mr-auto"],[1,"p-5"],["class","info-field",4,"ngFor","ngForOf"],["class","text-xs text-danger mt-1",4,"ngIf"],[1,"mt-3"],["azt-track-service","config-student-info-FlktZt6AJN",1,"btn","btn-primary","mr-3",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","mr-2","lucide"],["x1","12","y1","5","x2","12","y2","19"],["x1","5","y1","12","x2","19","y2","12"],[1,"inline-block","ml-3","leading-relaxed","text-slate-500","text-xs"],[1,"info-field"],[1,"grid","grid-cols-12","gap-5",3,"ngClass"],[1,"col-span-12","md:col-span-7"],[1,"input-group"],[1,"input-group-text","whitespace-nowrap"],["type","text",1,"form-control",3,"ngClass","readonly","placeholder","value","change"],[1,"col-span-8","md:col-span-3"],["appearance","outline"],[3,"value","disabled","selectionChange"],["value","0"],["value","1"],["value","2"],["value","3"],[1,"col-span-4","md:col-span-2","text-right"],["azt-track-service","config-student-info-DEsxAq2B3",1,"btn","btn-secondary",3,"disabled","matTooltip","click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide"],["d","M3 6h18"],["d","M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"],["d","M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"],["x1","10","y1","11","x2","10","y2","17"],["x1","14","y1","11","x2","14","y2","17"],["class","info-content",4,"ngIf"],[1,"info-content"],["class","py-2",4,"ngFor","ngForOf"],[1,"py-2","flex","mb-3"],["azt-track-service","config-student-info-NVQjKt97Fu",1,"btn","btn-secondary","btn-sm","mr-2",3,"click"],[4,"ngIf"],["azt-track-service","config-student-info-OcHEB-Morx",1,"btn","btn-secondary","btn-sm",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","mr-2"],[1,"azt-fast-content",3,"ngClass"],[1,"azt-fast","p-4"],[1,"dialog-content"],["rows","4",1,"form-control",3,"change"],[1,"leading-relaxed","text-slate-500","text-xs","mt-2"],[1,"text-right","my-4"],["azt-track-service","config-student-info-8-eIbBQm3W",1,"btn","btn-outline-secondary","btn-sm","mr-2",3,"click"],["azt-track-service","config-student-info-2A5hJbaAWL",1,"btn","btn-primary","btn-sm",3,"click"],[1,"py-2"],[1,"flex","items-center"],[1,"w-full","mx-2"],["type","text",1,"form-control",2,"border","none","box-shadow","none",3,"placeholder","value","change"],["azt-track-service","config-student-info-QGYSvwSMLT",1,"btn","btn-primary","rounded-full",2,"padding","2px",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4"],["x1","18","y1","6","x2","6","y2","18"],["x1","6","y1","6","x2","18","y2","18"],["type","radio","disabled","",1,"form-check-input","cursor-default"],["type","checkbox","disabled","",1,"form-check-input","cursor-default"],["x","3","y","3","width","18","height","18","rx","2","ry","2"],["x1","12","y1","8","x2","12","y2","16"],["x1","8","y1","12","x2","16","y2","12"],["cx","12","cy","12","r","10"],[1,"text-xs","text-danger","mt-1"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h3",2),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()(),t.TgZ(5,"div",3),t.YNc(6,Dy,35,36,"div",4),t.YNc(7,jy,3,3,"div",5),t.qZA()(),t.TgZ(8,"div",6)(9,"button",7),t.NdJ("click",function(){return i.addNewFields("")}),t.O4$(),t.TgZ(10,"svg",8),t._UZ(11,"line",9)(12,"line",10),t.qZA(),t._uU(13),t.ALo(14,"mytranslate"),t.qZA(),t.kcU(),t.TgZ(15,"span",11),t._uU(16),t.ALo(17,"mytranslate"),t.qZA()()),2&e&&(t.xp6(3),t.hij(" ",t.lcZ(4,5,"lang_testbank_test_config_configuration")," "),t.xp6(3),t.Q6J("ngForOf",i.infoFields),t.xp6(1),t.Q6J("ngIf",i.formInfoInvalid),t.xp6(6),t.hij(" ",t.lcZ(14,7,"lang_testbank_test_config_add_information")," "),t.xp6(3),t.hij(" *",t.lcZ(17,9,"lang_testbank_test_config_click_add_information"),". "))},dependencies:[D.mk,D.sg,D.O5,Lc.ey,rs.KE,vp.gD,Mi.gM,jt.JV],encapsulation:2}),n})();var u=M(10504),p=M(92296),S=M(94690),J=M(3849),rt=M(34340);function Ct(n,o){1&n&&(t.TgZ(0,"div",16)(1,"span",17),t._UZ(2,"azt-loading-ui"),t.qZA(),t.TgZ(3,"span",18),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()()),2&n&&(t.xp6(4),t.Oqu(t.lcZ(5,1,"lang_auto_dang_chuan_bi_tai_lieu_doing")))}function qt(n,o){if(1&n&&t._UZ(0,"azt-question-standalone-for-preview",20),2&n){const e=t.oxw(2),i=e.$implicit,a=e.index,r=t.oxw(2);t.Q6J("examObj",r.examObj)("questionObj",i)("follower",r.followerRenderQuest)("curQuestionIndex",a)}}function Ut(n,o){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,qt,1,4,"azt-question-standalone-for-preview",19),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.examObj)}}function te(n,o){if(1&n&&(t.ynx(0),t.YNc(1,Ut,2,1,"div",0),t.BQk()),2&n){const e=o.$implicit,i=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.groupId===i.data.groupId||(null==e.groupInfo?null:e.groupInfo.groupId)===i.data.groupId)}}function Ae(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),t._UZ(5,"div",5),t.qZA(),t.TgZ(6,"div",6)(7,"a",7)(8,"span",8),t._UZ(9,"lucide-icon",9),t.qZA()()()(),t.TgZ(10,"azt-mat-dialog-content",10),t.YNc(11,Ct,6,3,"div",11),t.TgZ(12,"div",12),t._UZ(13,"div",13),t.YNc(14,te,2,1,"ng-container",14),t._UZ(15,"div",15),t.qZA()()()(),t.BQk()),2&n){const e=t.oxw();t.xp6(11),t.Q6J("ngIf",e.statusObj.loading),t.xp6(3),t.Q6J("ngForOf",e.questionList)}}let Se=(()=>{class n extends lo.e{getData(e){this.initStatusObj(),this.permissionService.hasViewPermission("exam",e)?this.examService.apiExamGetQuestionsIdGet(e?.id??0).subscribe(i=>{const a=this.commonService.castJsonToClassObjs(yt.v,JSON.stringify(i.data?.questionObjs||[]))??[];this.followerRenderQuest.setNumQuest(a.length),this.addRoleQuestion(a),this.questionList=a,this.examObj=i.data?.examObj,this.successStatusObj()}):this.showErrorSnack("lang_auto_ban_khong_co_quyen_thuc_thi_chuc_nang_nay")}addRoleQuestion(e){for(let i=0;i<e.length;i++)e[i].isRoleTeacher=!0}ngOnInit(){this.data?.obj&&this.getData(this.data.obj),super.ngOnInit()}constructor(e,i,a,r,s){super(s,r),this.baseApiService=e,this.permissionService=i,this.examService=a,this.dialogRef=r,this.data=s,this.questionList=[],this.followerRenderQuest=new u.p}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p.V),t.Y36(S.j),t.Y36(J.O),t.Y36($.so,8),t.Y36($.WI,8))},n.\u0275cmp=t.Xpm({type:n,selectors:[["azt-preview-group-of-exam"]],features:[t.qOj],decls:2,vars:4,consts:[[4,"ngIf"],[1,"az-dialog-info"],[1,"box",2,"overflow-x","hidden"],[1,"flex","items-center","p-2","bg-slate-100","dark:bg-darkmode-400"],[1,"mr-auto"],[1,"flex","items-center","mr-2"],[1,"ml-auto"],["azt-track-service","azt-preview-exam-y2xqBN7DlGX",1,"btn","btn-transparent","btn-outline-danger","btn-sm",3,"mat-dialog-close"],[1,"w-4","h-4","flex-none"],["name","x"],[1,"mt-3"],["class","flex justify-center items-center h-40",4,"ngIf"],["id","boxContentQuestion",1,"p-2"],[1,"pt-3"],[4,"ngFor","ngForOf"],[1,"py-5"],[1,"flex","justify-center","items-center","h-40"],[1,"w-4","h-4","inline-block"],[1,"sr-only","ml-2"],[3,"examObj","questionObj","follower","curQuestionIndex",4,"ngIf"],[3,"examObj","questionObj","follower","curQuestionIndex"]],template:function(e,i){1&e&&(t.YNc(0,Ae,16,2,"ng-container",0),t.ALo(1,"viewPermission")),2&e&&t.Q6J("ngIf",t.xi3(1,1,null==i.data?null:i.data.obj,"exam"))},dependencies:[D.sg,D.O5,$.ZT,C.Nh5,rt.A,Ic.R,oi.n,jt.JV,jt.J7],encapsulation:2}),n})();const Pe=function(n){return{paddingCustomQuestion:n}};function nn(n,o){if(1&n&&(t.TgZ(0,"div",12)(1,"p",13),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&n){const e=t.oxw(2);t.Q6J("ngClass",t.VKq(4,Pe,1==(null==e.form.controls.isCreateSubTest?null:e.form.controls.isCreateSubTest.value)&&e.isGroupMixQuestion&&e.examGroupInfos.length>1)),t.xp6(2),t.hij(" ",t.lcZ(3,2,"lang_auto_nhap_so_luong_cau")," ")}}const yn=function(n){return{"is-invalid":n}};function Ln(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",14)(1,"div",15)(2,"div",16)(3,"div",17)(4,"input",18),t.NdJ("input",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.validWhenChangeLimitMixQuestionValue())}),t.qZA()(),t.TgZ(5,"div",19)(6,"button",20),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.changesMixQuestionGroupType())}),t._uU(7),t.ALo(8,"mytranslate"),t.qZA()()()()()}if(2&n){const e=t.oxw(2);t.xp6(4),t.Q6J("ngClass",t.VKq(5,yn,e.formControlLimitMixQuestion.invalid||e.checkValidateCountQuestion)),t.xp6(2),t.Q6J("disabled",e.examGroupInfos.length<=1),t.xp6(1),t.hij(" ",t.lcZ(8,3,"lang_testbank_test_config_get_with_group")," ")}}const Vn=function(n){return{"border-danger":n}};function Pn(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"input",48),t.NdJ("input",function(){t.CHM(e);const a=t.oxw().$implicit,r=t.oxw(3);return t.KtG(r.validateWhenChangeGroupValue(a.controls.groupId))})("keydown",function(a){t.CHM(e);const r=t.oxw().$implicit,s=t.oxw(3);return t.KtG(s.triggerCtrlEnter(a,r.controls.groupId))}),t.qZA()}if(2&n){const e=t.oxw().$implicit,i=t.oxw(3);t.Q6J("ngClass",t.VKq(1,Vn,!e.valid||!i.totalTakeQuestion))}}function hi(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"input",49),t.NdJ("input",function(){t.CHM(e);const a=t.oxw().$implicit,r=t.oxw(3);return t.KtG(r.validateWhenChangeGroupValue(a.controls.groupId))}),t.qZA()}if(2&n){const e=t.oxw().$implicit,i=t.oxw(3);t.Q6J("ngClass",t.VKq(1,Vn,!e.valid||!i.totalTakeQuestion))}}function bi(n,o){1&n&&t._UZ(0,"input",50)}function Rr(n,o){1&n&&(t.TgZ(0,"div",51),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_please_enter_score")," "))}function rr(n,o){1&n&&(t.TgZ(0,"div",51),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_please_enter_score_greater_than_0")," "))}function Ur(n,o){1&n&&(t.TgZ(0,"div",52),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_the_number_of_sentences_in_the_group_equal_to_0_points_will_not_be_counted")," "))}function Go(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",32),t.ynx(1,1),t.TgZ(2,"div",33)(3,"p",34),t._uU(4),t.ALo(5,"mytranslate"),t.ALo(6,"mytranslate"),t.qZA(),t.TgZ(7,"button",35),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw(3);return t.KtG(s.previewGroupExam(r.controls.groupId.value))}),t.TgZ(8,"span",36),t.ALo(9,"mytranslate"),t._UZ(10,"lucide-icon",37),t.qZA()()(),t.TgZ(11,"div",38),t.YNc(12,Pn,1,3,"input",39),t.YNc(13,hi,1,3,"input",40),t.YNc(14,bi,1,0,"input",41),t.TgZ(15,"div",42)(16,"div",43),t.ALo(17,"mytranslate"),t._UZ(18,"label",44),t._uU(19),t.ALo(20,"mytranslate"),t.qZA(),t.TgZ(21,"input",45),t.NdJ("input",function(){const r=t.CHM(e).$implicit,s=t.oxw(3);return t.KtG(s.validateWhenChangeGroupValue(r.controls.groupId))}),t.qZA()()(),t.YNc(22,Rr,3,3,"div",46),t.YNc(23,rr,3,3,"div",46),t.YNc(24,Ur,3,3,"div",47),t.BQk(),t.qZA()}if(2&n){const e=o.$implicit,i=o.index;let a,r,s;t.xp6(1),t.Q6J("formGroup",e),t.xp6(3),t.HOy(" ",t.lcZ(5,20,"lang_testbank_test_config_group")," ",i+1," (",e.controls.maxQuestion.value," ",t.lcZ(6,22,"lang_testbank_test_config_question"),") "),t.xp6(4),t.s9C("matTooltip",t.lcZ(9,24,"lang_auto_xem_chi_tiet")),t.Q6J("matTooltipShowDelay",1e3),t.xp6(4),t.Q6J("ngIf",1!=e.controls.isFixed.value),t.xp6(1),t.Q6J("ngIf",1!=e.controls.isFixed.value),t.xp6(1),t.Q6J("ngIf",1==e.controls.isFixed.value),t.xp6(2),t.s9C("matTooltip",t.lcZ(17,26,"lang_core_enter_total_group_score")),t.Q6J("matTooltipShowDelay",1e3)("matTooltipDisabled",0!==i),t.xp6(2),t.s9C("for","total_group_score_"+(i+1)),t.xp6(1),t.hij(" ",t.lcZ(20,28,"lang_auto_Diem")," "),t.xp6(2),t.s9C("id","total_group_score_"+(i+1)),t.Q6J("decimal",!0),t.xp6(1),t.Q6J("ngIf",(null!==(a=e.controls.totalQuestion.value)&&void 0!==a?a:0)>0&&!e.controls.totalGroupScore.value&&"0"!==(null==e.controls.totalGroupScore.value?null:e.controls.totalGroupScore.value.toString())),t.xp6(1),t.Q6J("ngIf",(null!==(r=e.controls.totalQuestion.value)&&void 0!==r?r:0)>0&&"0"===(null==e.controls.totalGroupScore.value?null:e.controls.totalGroupScore.value.toString())),t.xp6(1),t.Q6J("ngIf",0==e.controls.totalQuestion.value&&"0"!==(null!==(s=e.controls.totalGroupScore.value)&&void 0!==s?s:0).toString())}}function Ns(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",21)(1,"div",22)(2,"div",23),t._uU(3),t.ALo(4,"mytranslate"),t.TgZ(5,"span"),t._uU(6),t.ALo(7,"mytranslate"),t.qZA(),t.TgZ(8,"div",24),t._uU(9),t.ALo(10,"mytranslate"),t.qZA()(),t.TgZ(11,"div",25)(12,"a",26),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.changesMixQuestionGroupType())}),t._uU(13),t.ALo(14,"mytranslate"),t.qZA()()(),t.TgZ(15,"div",27)(16,"ng-scrollbar",28)(17,"div",29),t.ynx(18,30),t.YNc(19,Go,25,30,"div",31),t.BQk(),t.qZA()()()()}if(2&n){const e=t.oxw(2);t.xp6(3),t.hij(" ",t.lcZ(4,9,"lang_auto_so_luong_cau_hoi_can_lay")," "),t.xp6(3),t.lnq("(",e.totalTakeQuestion,"/",e.obj.countQuestion," ",t.lcZ(7,11,"lang_auto_cau_brackets"),""),t.xp6(3),t.hij(" ",t.lcZ(10,13,"lang_testbank_total_score_entered")+": "+e.totalPoint," "),t.xp6(4),t.hij(" ",t.lcZ(14,15,"lang_testbank_test_config_cancel_get_with_group")," "),t.xp6(3),t.Q6J("visibility","hover")("autoHeightDisabled",!1),t.xp6(3),t.Q6J("ngForOf",e.formArrayGroupInfos.controls)}}function Bl(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t._UZ(3,"br"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_vui_long_khong_bo_trong")," "))}function F0(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t._UZ(3,"br"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_vui_long_nhap_lon_hon_0")," "))}function ek(n,o){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.ALo(3,"mytranslate"),t._UZ(4,"br"),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.lnq(" ",t.lcZ(2,3,"lang_auto_vui_long_nhap_nho_hon_tong_so_cau")," (",e.obj.countQuestion," ",t.lcZ(3,5,"lang_auto_cau_brackets")," ")}}function nk(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t._UZ(3,"br"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_vui_long_nhap_nho_hon_hoac_bang_120")," "))}function ik(n,o){if(1&n&&(t.TgZ(0,"div",53),t.YNc(1,Bl,4,3,"span",54),t.YNc(2,F0,4,3,"span",54),t.YNc(3,ek,5,7,"span",54),t.YNc(4,nk,4,3,"span",54),t.qZA()),2&n){const e=t.oxw(2);let i,a;t.xp6(1),t.Q6J("ngIf",!e.form.controls.limitMixQuestion.value),t.xp6(1),t.Q6J("ngIf",e.form.controls.limitMixQuestion.value&&e.form.controls.limitMixQuestion.value<=0),t.xp6(1),t.Q6J("ngIf",(null!==(i=e.form.controls.limitMixQuestion.value)&&void 0!==i?i:0)>(null!==(i=e.obj.countQuestion)&&void 0!==i?i:0)),t.xp6(1),t.Q6J("ngIf",e.fromPrintOffline&&(null!==(a=e.form.controls.limitMixQuestion.value)&&void 0!==a?a:0)<e.totalTakeQuestion&&(null!==(a=e.form.controls.limitMixQuestion.value)&&void 0!==a?a:0)>120)}}function ok(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t._UZ(3,"br"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_vui_long_khong_nhap_qua_so_cau_toi_da_trong_nhom")," "))}function ak(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t._UZ(3,"br"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_vui_long_nhap_tong_so_cau_cua_cac_nhom_lon_hon_0")," "))}function rk(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t._UZ(3,"br"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_vui_long_nhap_tong_so_cac_cau_cua_cac_nhom_lon_hon_tong_so_cau")," "))}function sk(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_vui_long_nhap_tong_so_cau_cua_cac_nhom_nho_nhon_hoac_bang_120")," "))}function lk(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t._UZ(3,"br"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_vui_long_khong_bo_trong")," "))}function ck(n,o){if(1&n&&(t.TgZ(0,"div",53),t.YNc(1,ok,4,3,"span",54),t.YNc(2,ak,4,3,"span",54),t.YNc(3,rk,4,3,"span",54),t.YNc(4,sk,3,3,"span",54),t.YNc(5,lk,4,3,"span",54),t.qZA()),2&n){const e=t.oxw(2);let i,a,r;t.xp6(1),t.Q6J("ngIf",e.totalTakeQuestion&&!(e.totalTakeQuestion>(null!==(i=e.obj.countQuestion)&&void 0!==i?i:0))),t.xp6(1),t.Q6J("ngIf",!e.totalTakeQuestion),t.xp6(1),t.Q6J("ngIf",e.totalTakeQuestion>(null!==(a=e.obj.countQuestion)&&void 0!==a?a:0)),t.xp6(1),t.Q6J("ngIf",e.fromPrintOffline&&e.totalTakeQuestion<(null!==(r=e.obj.countQuestion)&&void 0!==r?r:0)&&(null!==(r=e.obj.countQuestion)&&void 0!==r?r:0)>120),t.xp6(1),t.Q6J("ngIf",e.checkEmpty)}}function uk(n,o){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.ALo(3,"mytranslate"),t.ALo(4,"mytranslate"),t.ALo(5,"mytranslate"),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.gL8(" ",t.lcZ(2,6,"lang_testbank_test_config_enter_bigger_number_question_permanent")," (",e.minLimitMixQuestion," ",t.lcZ(3,8,"lang_testbank_test_config_question"),"), ",t.lcZ(4,10,"lang_testbank_test_config_less_number_question_upload")," (",e.obj.countQuestion," ",t.lcZ(5,12,"lang_testbank_test_config_question"),"). ")}}function dk(n,o){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.ALo(3,"mytranslate"),t.ALo(4,"mytranslate"),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.HOy(" ",t.lcZ(2,4,"lang_testbank_test_config_enter_repuest_bigger_0"),", ",t.lcZ(3,6,"lang_testbank_test_config_less_number_question_upload")," (",e.obj.countQuestion," ",t.lcZ(4,8,"lang_testbank_test_config_question"),"). ")}}function mk(n,o){if(1&n&&(t.TgZ(0,"span",58),t._uU(1),t.ALo(2,"mytranslate"),t.ALo(3,"mytranslate"),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.lnq(" ",t.lcZ(2,3,"lang_testbank_test_config_validate_number_question_enter")," (",e.obj.countQuestion," ",t.lcZ(3,5,"lang_testbank_test_config_question"),"). ")}}function hk(n,o){if(1&n&&(t.TgZ(0,"div",55),t.YNc(1,uk,6,14,"span",54),t.YNc(2,dk,5,10,"span",54),t.YNc(3,mk,4,7,"span",56),t.TgZ(4,"a",57),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",1==(null==e.form.controls.mixQuestion?null:e.form.controls.mixQuestion.value)&&e.minLimitMixQuestion>1&&!e.isGroupMixQuestion),t.xp6(1),t.Q6J("ngIf",1==(null==e.form.controls.mixQuestion?null:e.form.controls.mixQuestion.value)&&1==e.minLimitMixQuestion&&!e.isGroupMixQuestion),t.xp6(1),t.Q6J("ngIf",1==(null==e.form.controls.mixQuestion?null:e.form.controls.mixQuestion.value)&&e.isGroupMixQuestion),t.xp6(2),t.hij(" ",t.lcZ(6,4,"lang_auto_tim_hieu_them")," ")}}function pk(n,o){1&n&&(t.TgZ(0,"div",59)(1,"p",60),t._uU(2),t.ALo(3,"mytranslate"),t.ALo(4,"mytranslate"),t.TgZ(5,"a",61),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()()()),2&n&&(t.xp6(2),t.AsE(" ",t.lcZ(3,3,"lang_auto_de_con_duoc_tao_tu_mot_luong_cau_hoi_duoc_lay_ngau_nhien_trong_de_goc_vi_du_de_goc_co_1000_cau_hoi")," ",t.lcZ(4,5,"lang_auto_ban_co_the_chi_in_40_cau_ngau_nhien_trong_1000_cau_hoi_do")," "),t.xp6(4),t.hij(" ",t.lcZ(7,7,"lang_auto_tim_hieu_them")," "))}function _k(n,o){if(1&n&&(t.TgZ(0,"div",12)(1,"p",13),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&n){const e=t.oxw(2);t.Q6J("ngClass",t.VKq(4,Pe,1==(null==e.form.controls.isCreateSubTest?null:e.form.controls.isCreateSubTest.value)&&e.isGroupMixQuestion&&e.examGroupInfos.length>1)),t.xp6(2),t.hij(" ",t.lcZ(3,2,"lang_testbank_enter_the_total_score_for_subtopics")," ")}}function fk(n,o){1&n&&(t.TgZ(0,"div",51),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_please_enter_total_score")," "))}function gk(n,o){1&n&&(t.TgZ(0,"div",51),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_please_enter_a_total_score_greater_than_0")," "))}function xk(n,o){if(1&n&&(t.TgZ(0,"div",14)(1,"div",15)(2,"div",16)(3,"div",62),t._UZ(4,"input",63),t.YNc(5,fk,3,3,"div",46),t.YNc(6,gk,3,3,"div",46),t.qZA()()()()),2&n){const e=t.oxw(2);t.xp6(4),t.Q6J("decimal",!0),t.xp6(1),t.Q6J("ngIf",!(null!=e.form.controls.totalPointQuestionNoGroup&&e.form.controls.totalPointQuestionNoGroup.value)&&"0"!==(null==e.form.controls.totalPointQuestionNoGroup||null==e.form.controls.totalPointQuestionNoGroup.value?null:e.form.controls.totalPointQuestionNoGroup.value.toString())),t.xp6(1),t.Q6J("ngIf","0"===(null==e.form.controls.totalPointQuestionNoGroup||null==e.form.controls.totalPointQuestionNoGroup.value?null:e.form.controls.totalPointQuestionNoGroup.value.toString())||0===(null==e.form.controls.totalPointQuestionNoGroup?null:e.form.controls.totalPointQuestionNoGroup.value))}}const bk=function(n,o){return{"md:col-span-9 setting-form-input-default-style":n,"col-md-12 setting-form-input-with-no-left-column":o}},vk=function(n,o){return{"md:col-span-9 setting-form-input-default-style mt-4":n,"col-span-12 mt-2 setting-form-input-with-no-left-column":o}};function yk(n,o){if(1&n&&(t.ynx(0,1),t.TgZ(1,"div",2),t.YNc(2,nn,4,6,"div",3),t.TgZ(3,"div",4)(4,"div",5),t.YNc(5,Ln,9,7,"div",6),t.YNc(6,Ns,20,17,"div",7),t.YNc(7,ik,5,4,"div",8),t.YNc(8,ck,6,5,"div",8),t.YNc(9,hk,7,6,"div",9),t.YNc(10,pk,8,9,"div",10),t.qZA()(),t.YNc(11,_k,4,6,"div",3),t.TgZ(12,"div",11),t.YNc(13,xk,7,3,"div",6),t.qZA()(),t.BQk()),2&n){const e=t.oxw();t.Q6J("formGroup",e.form),t.xp6(2),t.Q6J("ngIf",!e.fromPrintOffline),t.xp6(1),t.Q6J("ngClass",t.WLB(12,bk,!e.fromPrintOffline,e.fromPrintOffline)),t.xp6(2),t.Q6J("ngIf",!e.isGroupMixQuestion),t.xp6(1),t.Q6J("ngIf",e.isGroupMixQuestion&&e.examGroupInfos.length>1),t.xp6(1),t.Q6J("ngIf",e.checkValidateCountQuestion&&!e.isGroupMixQuestion&&e.form.controls.limitMixQuestion),t.xp6(1),t.Q6J("ngIf",e.checkValidateCountQuestion&&e.isGroupMixQuestion),t.xp6(1),t.Q6J("ngIf",!e.fromPrintOffline),t.xp6(1),t.Q6J("ngIf",e.fromPrintOffline),t.xp6(1),t.Q6J("ngIf",!e.isGroupMixQuestion),t.xp6(1),t.Q6J("ngClass",t.WLB(15,vk,!e.fromPrintOffline,e.fromPrintOffline)),t.xp6(1),t.Q6J("ngIf",!e.isGroupMixQuestion)}}let y6=(()=>{class n extends St.Q{emitDataToParent(){this.isGroupMixQuestionChange.emit(this.isGroupMixQuestion),this.checkValidateCountQuestionChange.emit(this.checkValidateCountQuestion),this.totalTakeQuestionChange.emit(this.totalTakeQuestion)}changeIsGroupMixQuestion(e){this.isGroupMixQuestion=e,this.emitDataToParent()}changeCheckValidateCountQuestion(e){this.checkValidateCountQuestion=e,this.emitDataToParent()}changeTotalTakeQuestion(e){this.totalTakeQuestion=e}changesMixQuestionGroupType(){this.changeIsGroupMixQuestion(!this.isGroupMixQuestion),this.isGroupMixQuestion?this._validGroupMixQuestionValue():this.validWhenChangeLimitMixQuestionValue()}setFormQuestion(e,i){let a=this.formArrayGroupInfos.getRawValue(),r=this._getGroupMixQuestionValue(e),s=this._countNullMixQuestionValue();if(null!=r){if(this.commonService.isMobileOrTable())for(let l=0;l<a.length;l++)0==a[l].isFixed&&a[l].groupId!=e&&s>0&&(a[l].totalQuestion=Number(r>a[l].maxQuestion?a[l].maxQuestion:r));else for(let l=0;l<a.length;l++)0==a[l].isFixed&&a[l].groupId!=e&&i&&(a[l].totalQuestion=Number(r>a[l].maxQuestion?a[l].maxQuestion:r));this.formArrayGroupInfos.setValue(a),this.changeTotalTakeQuestion(this._countTotalQuestionInMixGroup()),this.totalPoint=this._countTotalPointInMixGroup()}this.isGroupMixQuestion&&this._validGroupMixQuestionValue()}validateWhenChangeGroupValue(e){setTimeout(()=>{this.setFormQuestion(e.value,!1)},1500),this.isGroupMixQuestion&&this._validGroupMixQuestionValue()}_validGroupMixQuestionValue(){let e=this._countNullMixQuestionValue();if(this.changeTotalTakeQuestion(this._countTotalQuestionInMixGroup()),this.totalPoint=this._countTotalPointInMixGroup(),this.checkEmpty=!1,e)return this.changeCheckValidateCountQuestion(!0),this.checkEmpty=!0,!1;if(this.isGroupMixQuestion){let i=this.formArrayGroupInfos.getRawValue();for(let a=0;a<i.length;a++){let r=i[a].totalQuestion;if(r&&r>i[a].maxQuestion)return this.changeCheckValidateCountQuestion(!0),!1}}return this.totalTakeQuestion>(this.obj.countQuestion??0)||this.fromPrintOffline&&this.totalTakeQuestion>120||this.totalTakeQuestion<1||this.totalTakeQuestion<this.minLimitMixQuestion?(this.changeCheckValidateCountQuestion(!0),!1):!(this.totalTakeQuestion>=this.minLimitMixQuestion&&this.totalTakeQuestion<=(this.obj.countQuestion??0)&&(this.changeCheckValidateCountQuestion(!1),1))}validWhenChangeLimitMixQuestionValue(){var e=this.form.controls.limitMixQuestion?.value??null;return null!=e?(this.hasChangeValueLimitQuestion.emit(e),Number.isInteger(Number(e))?e>(this.obj.countQuestion??0)||this.fromPrintOffline&&e>120||e<1||e<this.minLimitMixQuestion?(this.changeCheckValidateCountQuestion(!0),!1):(e>=this.minLimitMixQuestion&&e<=(this.obj.countQuestion??0)&&this.changeCheckValidateCountQuestion(!1),!0):(this.changeCheckValidateCountQuestion(!0),!1)):(this.changeCheckValidateCountQuestion(!0),!1)}resetFormQuestionGroup(){let e=this.formArrayGroupInfos.getRawValue();for(let i=0;i<e.length;i++)0===e[i].isFixed&&(e[i].totalQuestion=void 0);this.changeCheckValidateCountQuestion(!0),this.formArrayGroupInfos.setValue(e)}triggerCtrlEnter(e,i){e.ctrlKey&&"Enter"===e.code&&(this.setFormQuestion(i.value,!0),e.preventDefault())}enableTooltip(){this.isTooltipPoint=!0}disableTooltip(){this.isTooltipPoint=!1}_createMixGroupFormArray(e){this.formArrayGroupInfos.clear(),e.forEach(i=>{let a=new f.cw({groupId:new f.NI(i.groupId,{nonNullable:!0}),isFixed:new f.NI(i.isFixed,{nonNullable:!0}),totalQuestion:new f.NI(i.limitQuestion??0,{nonNullable:!0,validators:[f.kI.min(0),f.kI.max(i.totalQuestion??0)]}),maxQuestion:new f.NI(i.totalQuestion,{nonNullable:!0}),totalGroupScore:new f.NI(i.totalGroupScore,{nonNullable:!0,validators:[f.kI.min(0)]}),error:new f.NI(!1,{nonNullable:!0})});this.formArrayGroupInfos?.push(a),this.totalTakeQuestion+=Number(i.limitQuestion)??0})}_convertExamGroupInfos(e,i,a,r){let s=[],l=0,c=[];return r?.objs&&(c=Object.keys(r?.objs).map(function(d){return r?.objs[d]})),e.forEach((d,h)=>{let _=0;for(let x=l;x<l+c?.[h];x++)_+=r?.marks[x]??0;l+=c?.[h]??0,_=Math.round(100*_)/100,a?s.push({...d,limitQuestion:d.totalQuestion,totalGroupScore:_}):i&&i.hasOwnProperty(d.groupId??-1)&&s.push({...d,limitQuestion:i[d.groupId??-1],totalGroupScore:_})}),s}_getGroupMixQuestionValue(e){let a,i=this.formArrayGroupInfos.getRawValue();for(let r=0;r<i.length;r++)i[r].groupId==e&&(a=i[r].totalQuestion);return a}_countNullMixQuestionValue(){let e=this.formArrayGroupInfos.getRawValue(),i=0;for(let a=0;a<e.length;a++)null==e[a].totalQuestion&&i++;return i}_countTotalQuestionInMixGroup(){let e=this.formArrayGroupInfos.getRawValue();var i=0;for(let a=0;a<e.length;a++){let r=e[a].totalQuestion;r&&r>0&&(i+=Number(r))}return i}_countTotalPointInMixGroup(){let e=this.formArrayGroupInfos.getRawValue();var i=0;for(let a=0;a<e.length;a++){let r=e[a].totalGroupScore;r&&r>0&&(i+=Number(r))}return this.commonService.parseNumberFixed(i,2)}_checkNullData(){return this.form&&this.form?.controls.groupInfos&&this.form.controls.limitMixQuestion&&(this.formArrayGroupInfos=this.form.controls.groupInfos,this.formControlLimitMixQuestion=this.form.controls.limitMixQuestion),!!(this.form&&this.formArrayGroupInfos&&this.formControlLimitMixQuestion&&null!=this.obj&&null!=this.minLimitMixQuestion&&null!=this.examGroupInfos&&null!=this.isGroupMixQuestion&&null!=this.checkValidateCountQuestion)}_initGroupData(){this.examGroupInfos.length>0&&(1==this.obj.mixQuestionGroupInfoWithMarkObj?.status?(this.changeIsGroupMixQuestion(!0),this._createMixGroupFormArray(this._convertExamGroupInfos(this.examGroupInfos,this.obj.mixQuestionGroupInfoWithMarkObj.objs,!1,this.obj.mixQuestionGroupInfoWithMarkObj))):null!=this.obj.limitQuestionGroups&&0==this.obj.mixQuestionGroupInfoWithMarkObj?.status?(this.changeIsGroupMixQuestion(!1),this._createMixGroupFormArray(this._convertExamGroupInfos(this.examGroupInfos,this.obj.mixQuestionGroupInfoWithMarkObj.objs,!1,void 0))):this._createMixGroupFormArray(this._convertExamGroupInfos(this.examGroupInfos,{},!0,void 0)),this.isGroupMixQuestion?this._validGroupMixQuestionValue():this.validWhenChangeLimitMixQuestionValue())}previewGroupExam(e){let i={obj:{...this.obj,attended:0},curCateId:this.obj.categoryId??0,isOnLib:0,isShow:!0,showDelete:!1,groupId:e};this.sAztDialogService.open(Se,{width:"800px",maxWidth:"90vw",enterAnimationDuration:"0ms",exitAnimationDuration:"0ms",data:i,restoreFocus:!1})}ngOnInit(){super.ngOnInit(),this.isNotNullData=this._checkNullData(),this.isNotNullData&&this._initGroupData()}constructor(e){super(),this.sAztDialogService=e,this.fromPrintOffline=!1,this.isGroupMixQuestion=!1,this.isGroupMixQuestionChange=new t.vpe,this.checkValidateCountQuestion=!1,this.checkValidateCountQuestionChange=new t.vpe,this.totalTakeQuestion=0,this.totalTakeQuestionChange=new t.vpe,this.hasChangeValueLimitQuestion=new t.vpe,this.isNotNullData=!1,this.isTooltipPoint=!1,this.totalPoint=0,this.checkEmpty=!1}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Fi.C))},n.\u0275cmp=t.Xpm({type:n,selectors:[["test-config-online-mix-question"]],inputs:{fromPrintOffline:"fromPrintOffline",form:"form",obj:"obj",minLimitMixQuestion:"minLimitMixQuestion",examGroupInfos:"examGroupInfos"},outputs:{isGroupMixQuestionChange:"isGroupMixQuestionChange",checkValidateCountQuestionChange:"checkValidateCountQuestionChange",totalTakeQuestionChange:"totalTakeQuestionChange",hasChangeValueLimitQuestion:"hasChangeValueLimitQuestion"},features:[t.qOj],decls:1,vars:1,consts:[[3,"formGroup",4,"ngIf"],[3,"formGroup"],["id","exam-get-mix-question",1,"grid","grid-cols-12","grap-5"],["class","col-span-12 md:col-span-3",3,"ngClass",4,"ngIf"],[1,"col-span-12","mt-2",3,"ngClass"],[1,"setting-block-create-sub","w-100"],["class","setting-block-mix-v1",4,"ngIf"],["class","border border-slate-200/60 dark:border-darkmode-400 rounded-md pb-1",4,"ngIf"],["class","col-span-12 mt-2 text-xs text-danger fade",4,"ngIf"],["class","col-span-12 leading-relaxed text-slate-500 text-xs px-0 mt-1",4,"ngIf"],["class","col-span-12 px-0 mt-2",4,"ngIf"],[3,"ngClass"],[1,"col-span-12","md:col-span-3",3,"ngClass"],[1,"font-medium","mt-5"],[1,"setting-block-mix-v1"],[1,"not-group"],[1,"grid","grid-cols-12","gap-3"],[1,"col-span-6","md:col-span-8","lg:col-span-9"],["type","text","appOnlyNumber","","formControlName","limitMixQuestion",1,"form-control",3,"ngClass","input"],[1,"col-span-6","md:col-span-4","lg:col-span-3"],["azt-track-service","config-mix-question-__RjMpaOvxg",1,"btn","btn-secondary","px-1","w-full",3,"disabled","click"],[1,"border","border-slate-200/60","dark:border-darkmode-400","rounded-md","pb-1"],[1,"p-3","bg-slate-100","dark:bg-darkmode-400","flex","flex-col","md:flex-row","md:items-center"],[1,"mr-auto"],[1,"mt-1"],[1,"flex"],["azt-track-service","config-mix-question-Bo6mIaGCJ9M",1,"btn","btn-sm","btn-outline-danger","mt-2","md:mt-0",3,"click"],[1,"mix_question_list"],["pointerEventsMethod","scrollbar",3,"visibility","autoHeightDisabled"],[1,"grid","grid-cols-12","gap-5","mb-5","p-3"],["formArrayName","groupInfos"],["class","col-span-12 md:col-span-6 lg:col-span-4 mt-1 shadow rounded-md p-1",4,"ngFor","ngForOf"],[1,"col-span-12","md:col-span-6","lg:col-span-4","mt-1","shadow","rounded-md","p-1"],[1,"flex","items-center","mb-1"],[1,"pb-0","text-left",2,"font-size","13.5px"],[1,"btn","btn-outline-secondary","btn-sm","btn-transparent","ml-2","p-0",3,"click"],[1,"w-5","h-5","inline-block",3,"matTooltip","matTooltipShowDelay"],["name","eye"],[1,"flex","items-center"],["class","azt-hidden md:block form-control","type","text","appOnlyNumber","","onwheel","return false;","formControlName","totalQuestion","style"," width: 50%;",3,"ngClass","input","keydown",4,"ngIf"],["class","block md:hidden form-control","type","text","appOnlyNumber","","onwheel","return false;","formControlName","totalQuestion","style"," width: 50%;",3,"ngClass","input",4,"ngIf"],["style"," width: 50%;","type","text","class","form-control","readonly","","formControlName","totalQuestion",4,"ngIf"],[1,"input-group","ml-2"],[1,"input-group-text",3,"matTooltip","matTooltipShowDelay","matTooltipDisabled"],[3,"for"],["type","text","appOnlyNumber","","formControlName","totalGroupScore",1,"form-control",3,"id","decimal","input"],["class","mt-2 text-danger text-xs",4,"ngIf"],["class","mt-2 text-pending text-xs",4,"ngIf"],["type","text","appOnlyNumber","","onwheel","return false;","formControlName","totalQuestion",1,"azt-hidden","md:block","form-control",2,"width","50%",3,"ngClass","input","keydown"],["type","text","appOnlyNumber","","onwheel","return false;","formControlName","totalQuestion",1,"block","md:hidden","form-control",2,"width","50%",3,"ngClass","input"],["type","text","readonly","","formControlName","totalQuestion",1,"form-control",2,"width","50%"],[1,"mt-2","text-danger","text-xs"],[1,"mt-2","text-pending","text-xs"],[1,"col-span-12","mt-2","text-xs","text-danger","fade"],[4,"ngIf"],[1,"col-span-12","leading-relaxed","text-slate-500","text-xs","px-0","mt-1"],["class","clearfix pt-1 text-left",4,"ngIf"],["href","https://docs.azota.vn/docs/huong-dan-su-dung/de-thi/tao-de-con/","target","_blank",1,"text-primary","font-medium"],[1,"clearfix","pt-1","text-left"],[1,"col-span-12","px-0","mt-2"],[1,"text-slate-500","text-xs"],["azt-track-service","config-mix-question-bbIjXerrNkY","href","https://docs.azota.vn/docs/huong-dan-su-dung/de-thi/tao-de-con/","target","_blank",1,"text-primary","font-medium"],[1,"col-span-12"],["type","text","appOnlyNumber","","formControlName","totalPointQuestionNoGroup",1,"form-control",3,"decimal"]],template:function(e,i){1&e&&t.YNc(0,yk,14,18,"ng-container",0),2&e&&t.Q6J("ngIf",i.isNotNullData)},dependencies:[D.mk,D.sg,D.O5,Mi.gM,L.KC,f.Fj,f.JJ,f.JL,f.sg,f.u,f.CE,qr.Y,oo.M,C.Nh5,jt.JV],encapsulation:2}),n})();var wk=M(50121);const Ck=["startTime"],Tk=["endTime"];function kk(n,o){1&n&&t._UZ(0,"azt-loading-effect")}function Ak(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_configuration_type_exam_description")," "))}function Sk(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.TgZ(3,"span",67),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,2,"lang_testbank_configuration_type_practice_description")," "),t.xp6(3),t.hij("\xa0",t.lcZ(5,4,"lang_testbank_configuration_type_practice_note"),""))}function Ok(n,o){1&n&&(t.TgZ(0,"div",68),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_vui_long_nhap_thoi_gian")," "))}function Ek(n,o){1&n&&(t.TgZ(0,"div",93),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_test_config_end_time_bigger_time_star"),". "))}function Mk(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",69)(1,"div",6)(2,"label",70),t._uU(3),t.ALo(4,"mytranslate"),t.TgZ(5,"span",28),t.ALo(6,"mytranslate"),t._UZ(7,"lucide-icon",29),t.qZA()()(),t.TgZ(8,"div",6)(9,"div",71)(10,"div",72)(11,"mat-form-field",73)(12,"input",74),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.openDateTimePicker(1))}),t.ALo(13,"mytranslate"),t.qZA(),t.TgZ(14,"button",75),t.NdJ("click",function(a){return t.CHM(e),t.oxw(2).openDateTimePicker(1),t.KtG(a.stopPropagation())}),t.TgZ(15,"span",76),t._UZ(16,"lucide-icon",77),t.qZA()(),t.TgZ(17,"ngx-mat-datetime-picker",78,79)(19,"ngx-mat-datepicker-actions")(20,"button",80),t._uU(21),t.ALo(22,"mytranslate"),t.qZA(),t.TgZ(23,"button",81),t._uU(24,"OK"),t.qZA()()()()(),t.TgZ(25,"div",72)(26,"mat-form-field",73)(27,"input",82),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.openDateTimePicker(0))}),t.ALo(28,"mytranslate"),t.qZA(),t.TgZ(29,"button",83),t.NdJ("click",function(a){return t.CHM(e),t.oxw(2).openDateTimePicker(0),t.KtG(a.stopPropagation())}),t.TgZ(30,"span",76),t._UZ(31,"lucide-icon",77),t.qZA()(),t.TgZ(32,"ngx-mat-datetime-picker",78,84)(34,"ngx-mat-datepicker-actions")(35,"button",80),t._uU(36),t.ALo(37,"mytranslate"),t.qZA(),t.TgZ(38,"button",81),t._uU(39,"OK"),t.qZA()()()()(),t.TgZ(40,"div",85)(41,"button",86),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.clearTime())}),t.TgZ(42,"span",87),t._UZ(43,"lucide-icon",88),t.qZA(),t._uU(44),t.ALo(45,"mytranslate"),t.qZA()()(),t.TgZ(46,"div",89)(47,"div",90),t._uU(48),t.ALo(49,"mytranslate"),t.qZA(),t.TgZ(50,"div",91),t._uU(51),t.ALo(52,"mytranslate"),t.qZA(),t.YNc(53,Ek,3,3,"div",92),t.qZA()()()}if(2&n){const e=t.MAs(18),i=t.MAs(33),a=t.oxw(2);let r;t.xp6(3),t.hij(" ",t.lcZ(4,16,"lang_testbank_test_config_time_assign_exam")," "),t.xp6(2),t.s9C("matTooltip",t.lcZ(6,18,"lang_auto_hoc_sinh_lam_bai_online_chi_duoc_lam_bai_vao_thoi_gian_giao_de")),t.xp6(7),t.s9C("placeholder",t.lcZ(13,20,"lang_auto_tu")),t.Q6J("max",a.maxDate)("ngxMatDatetimePicker",e),t.xp6(5),t.Q6J("touchUi",!0),t.xp6(4),t.Oqu(t.lcZ(22,22,"lang_auto_dong")),t.xp6(6),t.s9C("placeholder",t.lcZ(28,24,"lang_auto_den")),t.Q6J("max",a.maxDate)("ngxMatDatetimePicker",i),t.xp6(5),t.Q6J("touchUi",!0),t.xp6(4),t.Oqu(t.lcZ(37,26,"lang_auto_dong")),t.xp6(8),t.hij(" ",t.lcZ(45,28,"lang_auto_dat_lai")," "),t.xp6(4),t.hij("",t.lcZ(49,30,"lang_testbank_test_config_tutorial_time_assigne_exam"),"."),t.xp6(3),t.hij("",t.lcZ(52,32,"lang_auto_bo_trong_neu_khong_muon_gioi_han_thoi_gian"),"."),t.xp6(2),t.Q6J("ngIf",a.calculatorTimeValidate(null!==(r=a.form.controls.endTime.value)&&void 0!==r?r:"",null!==(r=a.form.controls.startTime.value)&&void 0!==r?r:"")<=0)}}function Ik(n,o){1&n&&(t.TgZ(0,"div",94),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_lua_chon_nay_cho_phep_nhung_hoc_sinh_khong_dang_ky_dang_nhap_tai_khoang_van_co_the_tham_gia_thi")," "))}function Lk(n,o){if(1&n&&(t.TgZ(0,"div",95)(1,"div",96),t._UZ(2,"azt-list-classroom-checkbox-new",97),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(2),t.Q6J("form",e.form)("classroomGroupData",e.classroomWithGroup)("examClassroomObjs",e.examClassroomObjs)("permissionName",e.permissionTypes.exam)}}function Pk(n,o){1&n&&(t.TgZ(0,"div",98)(1,"div",99),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"lang_testbank_test_config_you_not_yet_student")," "))}function Nk(n,o){1&n&&(t.TgZ(0,"div",100)(1,"div",39)(2,"label",101),t._uU(3),t.ALo(4,"mytranslate"),t.qZA(),t.TgZ(5,"div",102)(6,"span"),t._uU(7),t.ALo(8,"mytranslate"),t.qZA()()(),t.TgZ(9,"div",103)(10,"div",30),t._UZ(11,"input",104),t.ALo(12,"mytranslate"),t.qZA()()()),2&n&&(t.xp6(3),t.hij(" ",t.lcZ(4,3,"lang_testbank_test_config_limit_listing_audio")," "),t.xp6(4),t.Oqu(t.lcZ(8,5,"lang_testbank_test_config_empty_if_not_limit_listen")),t.xp6(4),t.MGl("placeholder"," ",t.lcZ(12,7,"lang_auto_nhap_so_luot_nghe")+" ...",""))}function Zk(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",126)(1,"test-config-online-student-info",127),t.NdJ("infoFieldsChange",function(a){t.CHM(e);const r=t.oxw(3);return t.KtG(r.infoFields=a)})("formInfoInvalidChange",function(a){t.CHM(e);const r=t.oxw(3);return t.KtG(r.formInfoInvalid=a)})("checkValidInfo",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.checkValidInfoField())}),t.qZA()()}if(2&n){const e=t.oxw(3);t.xp6(1),t.Q6J("infoFields",e.infoFields)("formInfoInvalid",e.formInfoInvalid)}}function Dk(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",61)(1,"div",105)(2,"div",22)(3,"span"),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()(),t.TgZ(6,"div",8)(7,"div",106)(8,"div",39)(9,"label",107),t._uU(10),t.ALo(11,"mytranslate"),t.qZA()(),t.TgZ(12,"div",39)(13,"div",30),t._UZ(14,"input",108),t.TgZ(15,"div",32),t._uU(16),t.ALo(17,"mytranslate"),t.qZA()()()(),t.TgZ(18,"div",109)(19,"div",39)(20,"label",110),t._uU(21),t.ALo(22,"mytranslate"),t.qZA()(),t.TgZ(23,"div",103)(24,"div",30),t._UZ(25,"input",111),t.ALo(26,"mytranslate"),t.qZA()()(),t.TgZ(27,"div",112)(28,"div",39)(29,"label",37),t._uU(30),t.ALo(31,"mytranslate"),t.qZA()(),t.TgZ(32,"div",103)(33,"div",40)(34,"div",113),t._UZ(35,"input",114),t.TgZ(36,"label",115),t._uU(37),t.ALo(38,"mytranslate"),t.qZA()(),t.TgZ(39,"div",116),t._UZ(40,"input",117),t.TgZ(41,"label",118),t._uU(42),t.ALo(43,"mytranslate"),t.TgZ(44,"span",28),t.ALo(45,"mytranslate"),t._UZ(46,"lucide-icon",29),t.qZA()()(),t.TgZ(47,"div",47),t._UZ(48,"input",119),t.TgZ(49,"label",120),t._uU(50),t.ALo(51,"mytranslate"),t.TgZ(52,"span",28),t.ALo(53,"mytranslate"),t._UZ(54,"lucide-icon",29),t.qZA()()()()()(),t.TgZ(55,"div",109)(56,"div",121)(57,"label",122),t._uU(58),t.ALo(59,"mytranslate"),t.qZA(),t.TgZ(60,"div",102),t._uU(61),t.ALo(62,"mytranslate"),t.qZA()(),t.TgZ(63,"div",12)(64,"div",123)(65,"input",124),t.NdJ("change",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.changeEnterInfoControl())}),t.qZA()()(),t.YNc(66,Zk,2,2,"div",125),t.qZA()()()()}if(2&n){const e=t.oxw(2);t.xp6(4),t.Oqu(t.lcZ(5,14,"lang_testbank_config_security_setting")),t.xp6(6),t.hij(" ",t.lcZ(11,16,"lang_testbank_tested_list_number_quizzes")," "),t.xp6(6),t.hij("*",t.lcZ(17,18,"lang_testbank_config_take_test_count_des"),""),t.xp6(5),t.hij(" ",t.lcZ(22,20,"lang_testbank_test_config_password_exam")," "),t.xp6(4),t.s9C("placeholder",t.lcZ(26,22,"lang_auto_nhap_mat_khau")+" ..."),t.xp6(5),t.hij(" ",t.lcZ(31,24,"lang_testbank_test_config_automatic_monitoring")," "),t.xp6(7),t.hij(" ",t.lcZ(38,26,"lang_testbank_test_config_off")," "),t.xp6(5),t.hij(" ",t.lcZ(43,28,"lang_auto_giam_sat_thoat_man_hinh")," "),t.xp6(2),t.s9C("matTooltip",t.lcZ(45,30,"lang_auto_azota_se_ghi_lai_cac_lan_hoc_sinh_thoat_dot")),t.xp6(6),t.hij(" ",t.lcZ(51,32,"lang_auto_giam_sat_nang_cao")," "),t.xp6(2),t.s9C("matTooltip",t.lcZ(53,34,"lang_auto_thuong_su_dung_cho_cac_ky_thi_doi_hoi_bao_mat_cao_hoc_sinh_can_dot")),t.xp6(6),t.hij(" ",t.lcZ(59,36,"lang_testbank_test_config_verify_profile_student")," "),t.xp6(3),t.hij(" ",t.lcZ(62,38,"lang_auto_khi_hoc_sinh_vao_lam_bai_se_phai_khai_bao_them_cac_thong_tin_dot")," "),t.xp6(5),t.Q6J("ngIf",1==e.form.controls.enterInfo.value)}}function jk(n,o){1&n&&(t.TgZ(0,"div",109)(1,"div",121)(2,"label",133),t._uU(3),t.ALo(4,"mytranslate"),t.qZA(),t.TgZ(5,"div",102),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()(),t.TgZ(8,"div",12)(9,"div",131),t._UZ(10,"input",134),t.qZA()()()),2&n&&(t.xp6(3),t.hij(" ",t.lcZ(4,2,"lang_auto_lay_ngau_nhien_theo_ma_tran_de")," "),t.xp6(3),t.hij(" ",t.lcZ(7,4,"lang_auto_de_thi_duoc_tao_tu_ma_tran_de_khi_bat_tinh_nang_nay_dot")," "))}function qk(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",109)(1,"div",121)(2,"label",135),t._uU(3),t.ALo(4,"mytranslate"),t.qZA(),t.TgZ(5,"div",102),t._uU(6),t.ALo(7,"mytranslate"),t.TgZ(8,"a",136),t._uU(9),t.ALo(10,"mytranslate"),t.qZA()()(),t.TgZ(11,"div",12)(12,"div",40)(13,"div",131)(14,"input",137),t.NdJ("change",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.disableCheckValidateCountQuestion())}),t.qZA()()()()()}2&n&&(t.xp6(3),t.hij(" ",t.lcZ(4,3,"lang_auto_dao_cau_hoi_va_dap_an")," "),t.xp6(3),t.hij(" ",t.lcZ(7,5,"lang_auto_system_auto_mix_question_by_group")," "),t.xp6(3),t.hij(" ",t.lcZ(10,7,"lang_auto_tim_hieu_them")," "))}function Fk(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"test-config-online-mix-question",143),t.NdJ("isGroupMixQuestionChange",function(a){t.CHM(e);const r=t.oxw(5);return t.KtG(r.isGroupMixQuestion=a)})("checkValidateCountQuestionChange",function(a){t.CHM(e);const r=t.oxw(5);return t.KtG(r.checkValidateCountQuestion=a)}),t.qZA()}if(2&n){const e=t.oxw(5);t.Q6J("form",e.form)("obj",e.obj)("minLimitMixQuestion",e.minLimitMixQuestion)("examGroupInfos",e.examGroupInfos)}}function Qk(n,o){if(1&n&&(t.TgZ(0,"div",141),t.YNc(1,Fk,1,4,"test-config-online-mix-question",142),t.qZA()),2&n){const e=t.oxw(4);t.xp6(1),t.Q6J("ngIf",e.obj)}}function Rk(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",109)(1,"div",121)(2,"label",138),t._uU(3),t.ALo(4,"mytranslate"),t.qZA(),t.TgZ(5,"div",102),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()(),t.TgZ(8,"div",12)(9,"div",131)(10,"input",139),t.NdJ("change",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.disableCheckValidateCountQuestion())}),t.qZA()()(),t.YNc(11,Qk,2,1,"div",140),t.qZA()}if(2&n){const e=t.oxw(3);t.xp6(3),t.hij(" ",t.lcZ(4,4,"lang_auto_tao_de_con")," "),t.xp6(3),t.hij(" ",t.lcZ(7,6,"lang_auto_tao_de_con_tu_mot_luong_cau_hoi_ngau_nhien_trong_de_goc_dot")," "),t.xp6(4),t.Q6J("disabled",0==e.form.controls.mixQuestion.value),t.xp6(1),t.Q6J("ngIf",1==e.form.controls.isCreateSubTest.value&&1==e.form.controls.mixQuestion.value)}}function Uk(n,o){if(1&n&&(t.TgZ(0,"div",112)(1,"div",121)(2,"label",144),t._uU(3),t.ALo(4,"mytranslate"),t.qZA(),t.TgZ(5,"div",102),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()(),t.TgZ(8,"div",12)(9,"div",131),t._UZ(10,"input",145),t.qZA()()()),2&n){const e=t.oxw(3);t.xp6(3),t.hij(" ",t.lcZ(4,3,"lang_auto_co_dinh_cau_hoi_trong_de_con")," "),t.xp6(3),t.hij(" ",t.lcZ(7,5,"lang_auto_khi_bat_chuc_nang_nay_he_thong_se_tu_dong_dao_cac_cau_hoi_dot")," "),t.xp6(4),t.Q6J("disabled",!e.form.controls.isCreateSubTest.value)}}function Bk(n,o){if(1&n&&(t.TgZ(0,"div",105)(1,"div",22)(2,"span"),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()(),t.TgZ(5,"div",8),t.YNc(6,jk,11,6,"div",128),t.YNc(7,qk,15,9,"div",128),t.YNc(8,Rk,12,8,"div",128),t.YNc(9,Uk,11,7,"div",129),t.TgZ(10,"div",109)(11,"div",121)(12,"label",130),t._uU(13),t.ALo(14,"mytranslate"),t.qZA(),t.TgZ(15,"div",102),t._uU(16),t.ALo(17,"mytranslate"),t.qZA()(),t.TgZ(18,"div",12)(19,"div",131),t._UZ(20,"input",132),t.qZA()()()()()),2&n){const e=t.oxw(2);t.xp6(3),t.Oqu(t.lcZ(4,7,"lang_testbank_test_config_mix_question_and_answer")),t.xp6(3),t.Q6J("ngIf",e.enableRandomQuestion),t.xp6(1),t.Q6J("ngIf",!e.form.controls.isRandomQuestion.value&&e.enableRandomQuestion||!e.enableRandomQuestion),t.xp6(1),t.Q6J("ngIf",!e.form.controls.isRandomQuestion.value&&0!=e.form.controls.mixQuestion.value),t.xp6(1),t.Q6J("ngIf",!e.form.controls.isRandomQuestion.value&&0!=e.form.controls.mixQuestion.value&&e.form.controls.isCreateSubTest.value),t.xp6(4),t.hij(" ",t.lcZ(14,9,"lang_auto_an_cau_hoi_nhom")," "),t.xp6(3),t.hij(" ",t.lcZ(17,11,"lang_auto_he_thong_se_an_di_phan_tieu_de_cua_moi_nhom_cau_hoi_co_trong_de_thi")," ")}}function zk(n,o){1&n&&(t.TgZ(0,"span",163),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_test_config_note_validate_show_point")," "))}function Jk(n,o){if(1&n&&(t.TgZ(0,"span",163),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n){const e=t.oxw(4);t.xp6(1),t.AsE(" ",t.lcZ(2,2,"lang_testbank_test_config_all_done"),": ",e.calculateTime(e.form.controls.endTime.value,e.form.controls.minutes.value)," ")}}function Hk(n,o){1&n&&(t.TgZ(0,"span",163),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_test_config_note_validate_show_point")," "))}function Gk(n,o){if(1&n&&(t.TgZ(0,"span",163),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n){const e=t.oxw(4);t.xp6(1),t.AsE(" ",t.lcZ(2,2,"lang_testbank_test_config_all_done"),": ",e.calculateTime(e.form.controls.endTime.value,e.form.controls.minutes.value)," ")}}function $k(n,o){1&n&&(t.TgZ(0,"div",167),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_test_config_please_enter_score_greater_than_0")," "))}function Yk(n,o){if(1&n&&(t.TgZ(0,"div",109)(1,"div",39)(2,"label",164),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()(),t.TgZ(5,"div",103)(6,"div",30),t._UZ(7,"input",165),t.ALo(8,"mytranslate"),t.qZA(),t.YNc(9,$k,3,3,"div",166),t.qZA()()),2&n){const e=t.oxw(4);t.xp6(3),t.hij(" ",t.lcZ(4,4,"lang_testbank_config_point_reached_to_show_answer")," "),t.xp6(4),t.s9C("placeholder",t.lcZ(8,6,"lang_auto_nhap_so_diem")),t.Q6J("decimal",!0),t.xp6(2),t.Q6J("ngIf","3"==e.form.controls.whenShowAnswer.value&&!e.numberParse(e.form.controls.viewAnswerResultMinMark.value))}}function Kk(n,o){if(1&n&&(t.TgZ(0,"div",105)(1,"div",22)(2,"span"),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()(),t.TgZ(5,"div",8)(6,"div",146)(7,"div",39)(8,"label",37),t._uU(9),t.ALo(10,"mytranslate"),t.qZA(),t.TgZ(11,"div",102),t.YNc(12,zk,3,3,"span",147),t.YNc(13,Jk,3,4,"span",147),t.qZA()(),t.TgZ(14,"div",103)(15,"div",40)(16,"div",113),t._UZ(17,"input",148),t.TgZ(18,"label",149),t._uU(19),t.ALo(20,"mytranslate"),t.qZA()(),t.TgZ(21,"div",116),t._UZ(22,"input",150),t.TgZ(23,"label",151),t._uU(24),t.ALo(25,"mytranslate"),t.qZA()(),t.TgZ(26,"div",47),t._UZ(27,"input",152),t.TgZ(28,"label",153),t._uU(29),t.ALo(30,"mytranslate"),t.qZA()()()()(),t.TgZ(31,"div",154)(32,"div",39)(33,"label",37),t._uU(34),t.ALo(35,"mytranslate"),t.qZA(),t.TgZ(36,"div",102),t.YNc(37,Hk,3,3,"span",147),t.YNc(38,Gk,3,4,"span",147),t.qZA()(),t.TgZ(39,"div",103)(40,"div",40)(41,"div",113),t._UZ(42,"input",155),t.TgZ(43,"label",156),t._uU(44),t.ALo(45,"mytranslate"),t.qZA()(),t.TgZ(46,"div",116),t._UZ(47,"input",157),t.TgZ(48,"label",158),t._uU(49),t.ALo(50,"mytranslate"),t.qZA()(),t.TgZ(51,"div",116),t._UZ(52,"input",159),t.TgZ(53,"label",160),t._uU(54),t.ALo(55,"mytranslate"),t.qZA()(),t.TgZ(56,"div",47),t._UZ(57,"input",161),t.TgZ(58,"label",162),t._uU(59),t.ALo(60,"mytranslate"),t.qZA()()()()(),t.YNc(61,Yk,10,8,"div",128),t.qZA()()),2&n){const e=t.oxw(3);t.xp6(3),t.Oqu(t.lcZ(4,15,"lang_testbank_config_show_point_and_answer_setting")),t.xp6(6),t.hij(" ",t.lcZ(10,17,"lang_auto_cho_xem_diem")," "),t.xp6(3),t.Q6J("ngIf","1"==e.form.controls.whenShowResult.value&&(!e.form.controls.endTime.value||e.form.controls.minutes.value<=0)),t.xp6(1),t.Q6J("ngIf","1"==e.form.controls.whenShowResult.value&&e.form.controls.endTime.value&&e.form.controls.minutes.value>0),t.xp6(6),t.hij(" ",t.lcZ(20,19,"lang_auto_khong")," "),t.xp6(5),t.hij(" ",t.lcZ(25,21,"lang_auto_khi_lam_bai_xong")," "),t.xp6(5),t.hij(" ",t.lcZ(30,23,"lang_auto_khi_tat_ca_thi_xong")," "),t.xp6(5),t.hij(" ",t.lcZ(35,25,"lang_auto_cho_xem_dap_an")," "),t.xp6(3),t.Q6J("ngIf","1"==e.form.controls.whenShowAnswer.value&&(!e.form.controls.endTime.value||e.form.controls.minutes.value<=0)),t.xp6(1),t.Q6J("ngIf","1"==e.form.controls.whenShowAnswer.value&&e.form.controls.endTime.value&&e.form.controls.minutes.value>0),t.xp6(6),t.hij(" ",t.lcZ(45,27,"lang_auto_khong")," "),t.xp6(5),t.hij(" ",t.lcZ(50,29,"lang_auto_khi_lam_bai_xong")," "),t.xp6(5),t.hij(" ",t.lcZ(55,31,"lang_auto_khi_tat_ca_thi_xong")," "),t.xp6(5),t.hij(" ",t.lcZ(60,33,"lang_testbank_config_show_exam_when_reach_custom_point")," "),t.xp6(2),t.Q6J("ngIf","3"==e.form.controls.whenShowAnswer.value)}}function Wk(n,o){if(1&n&&(t.TgZ(0,"div",61),t.YNc(1,Kk,62,35,"div",62),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.showPointAndAnswerSetting)}}function Vk(n,o){if(1&n&&(t.TgZ(0,"div",61)(1,"div",105)(2,"div",8)(3,"div",168),t._UZ(4,"config-document-price",169),t.qZA()()()()),2&n){const e=t.oxw(2);t.xp6(4),t.Q6J("form",e.form)}}const Xk=function(){return{standalone:!0}};function tA(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",109)(1,"div",6)(2,"editor",172,173),t.NdJ("ngModelChange",function(a){t.CHM(e);const r=t.oxw(3);return t.KtG(r.contentHeader=a)}),t.qZA()()()}if(2&n){const e=t.oxw(3);t.xp6(2),t.Q6J("ngModel",e.contentHeader)("ngModelOptions",t.DdM(3,Xk))("init",e.initDataEditor)}}function eA(n,o){if(1&n&&(t.TgZ(0,"div",61)(1,"div",170)(2,"div",22)(3,"span"),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()(),t.TgZ(6,"div",8)(7,"div",106)(8,"div",121)(9,"label",11),t._uU(10),t.ALo(11,"mytranslate"),t.qZA(),t.TgZ(12,"div",102),t._uU(13),t.ALo(14,"mytranslate"),t.qZA()(),t.TgZ(15,"div",12)(16,"div",131),t._UZ(17,"input",171),t.qZA()()(),t.YNc(18,tA,4,4,"div",128),t.qZA()()()),2&n){const e=t.oxw(2);t.xp6(4),t.Oqu(t.lcZ(5,4,"lang_student_classroom_list_other")),t.xp6(6),t.hij(" ",t.lcZ(11,6,"lang_testbank_configuration_add_header_title")," "),t.xp6(3),t.hij(" ",t.lcZ(14,8,"lang_testbank_configuration_add_header_description")," "),t.xp6(5),t.Q6J("ngIf",e.form.controls.allowHeader.value)}}function nA(n,o){1&n&&(t.TgZ(0,"span",76),t._UZ(1,"azt-loading-ui"),t.qZA())}function iA(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",174),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.savePublishExam(0))}),t.YNc(1,nA,2,0,"span",66),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()}if(2&n){const e=t.oxw(2);t.Q6J("disabled",e.checkDisableBtnSaveOrPublish()),t.xp6(1),t.Q6J("ngIf",e.statusObj.loading),t.xp6(1),t.hij(" ",t.lcZ(3,3,"lang_auto_luu_nhap")," ")}}function oA(n,o){1&n&&(t.TgZ(0,"span",76),t._UZ(1,"azt-loading-ui"),t.qZA())}const w6=function(n){return{"text-white font-medium":n}},aA=function(n){return{transform:n}},rA=function(n){return{"h-56-important":n}};function sA(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",4)(1,"div",5)(2,"div",6)(3,"div",7)(4,"div",8)(5,"div",9)(6,"div",10)(7,"label",11),t._uU(8),t.ALo(9,"mytranslate"),t.qZA()(),t.TgZ(10,"div",12)(11,"div",13)(12,"label",14),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.confirmChangeMode())}),t._uU(13),t.ALo(14,"mytranslate"),t.qZA(),t.TgZ(15,"label",15),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.confirmChangeMode())}),t._uU(16),t.ALo(17,"mytranslate"),t.qZA(),t._UZ(18,"span",16),t.qZA()(),t.TgZ(19,"div",17)(20,"div",18),t.YNc(21,Ak,3,3,"span",19),t.YNc(22,Sk,6,6,"span",19),t.qZA()()()()(),t.TgZ(23,"div",20)(24,"div",21)(25,"div",22)(26,"span"),t._uU(27),t.ALo(28,"mytranslate"),t.qZA()(),t.TgZ(29,"div",8),t._UZ(30,"config-level-subject",23),t.TgZ(31,"div",24),t._UZ(32,"config-purpose-exam",25),t.qZA(),t.TgZ(33,"div",26)(34,"div",6)(35,"label",27),t._uU(36),t.ALo(37,"mytranslate"),t.TgZ(38,"span",28),t.ALo(39,"mytranslate"),t._UZ(40,"lucide-icon",29),t.qZA()()(),t.TgZ(41,"div",6)(42,"div",30),t._UZ(43,"input",31),t.ALo(44,"mytranslate"),t.TgZ(45,"div",32),t._uU(46),t.ALo(47,"mytranslate"),t.qZA(),t.YNc(48,Ok,3,3,"div",33),t.qZA()()(),t.YNc(49,Mk,54,34,"div",34),t.TgZ(50,"div",35)(51,"div",36)(52,"label",37),t._uU(53),t.ALo(54,"mytranslate"),t.qZA(),t.YNc(55,Ik,3,3,"div",38),t.qZA(),t.TgZ(56,"div",39)(57,"div",40)(58,"div",41)(59,"input",42),t.NdJ("change",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.clearAllCheckBox(0))}),t.qZA(),t.TgZ(60,"label",43),t._uU(61),t.ALo(62,"mytranslate"),t.qZA()(),t.TgZ(63,"div",44)(64,"input",45),t.NdJ("change",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.clearAllCheckBox(2))}),t.qZA(),t.TgZ(65,"label",46),t._uU(66),t.ALo(67,"mytranslate"),t.qZA()(),t.TgZ(68,"div",47)(69,"input",48),t.NdJ("change",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.clearAllCheckBox(3))}),t.qZA(),t.TgZ(70,"label",49),t._uU(71),t.ALo(72,"mytranslate"),t.qZA()()()(),t.YNc(73,Lk,3,4,"div",50),t.TgZ(74,"div",51)(75,"div",52)(76,"div",53)(77,"h3",54),t._uU(78),t.ALo(79,"mytranslate"),t.qZA()(),t.TgZ(80,"div",55)(81,"ng-scrollbar",56),t._UZ(82,"list-student-checkbox",57),t.qZA()()()(),t.YNc(83,Pk,4,3,"div",58),t.qZA(),t.YNc(84,Nk,13,9,"div",59),t.qZA()()(),t.YNc(85,Dk,67,40,"div",60),t.TgZ(86,"div",61),t.YNc(87,Bk,21,13,"div",62),t.qZA(),t.YNc(88,Wk,2,1,"div",60),t.YNc(89,Vk,5,1,"div",60),t.YNc(90,eA,19,10,"div",60),t.TgZ(91,"div",63),t.YNc(92,iA,4,5,"button",64),t.TgZ(93,"button",65),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.savePublishExam(1))}),t.YNc(94,oA,2,0,"span",66),t._uU(95),t.ALo(96,"mytranslate"),t.qZA()()()()()}if(2&n){const e=t.oxw();t.xp6(8),t.hij(" ",t.lcZ(9,48,"lang_testbank_configuration_type")," "),t.xp6(4),t.Q6J("ngClass",t.VKq(76,w6,!e.form.controls.allowTestingEachQuestion.value)),t.xp6(1),t.hij(" ",t.lcZ(14,50,"lang_testbank_exam")," "),t.xp6(2),t.Q6J("ngClass",t.VKq(78,w6,e.form.controls.allowTestingEachQuestion.value)),t.xp6(1),t.hij(" ",t.lcZ(17,52,"lang_testbank_practice")," "),t.xp6(2),t.Q6J("ngStyle",t.VKq(80,aA,e.form.controls.allowTestingEachQuestion.value?"translateX(100%)":"none")),t.xp6(3),t.Q6J("ngIf",!e.form.controls.allowTestingEachQuestion.value),t.xp6(1),t.Q6J("ngIf",e.form.controls.allowTestingEachQuestion.value),t.xp6(5),t.Oqu(t.lcZ(28,54,"lang_auto_cau_hinh_chung")),t.xp6(3),t.Q6J("form",e.form)("schoolLevelObjs",e.schoolLevelObjs),t.xp6(2),t.Q6J("form",e.form)("purposeList",e.listPurposeObjs),t.xp6(4),t.hij(" ",t.lcZ(37,56,"lang_testbank_test_config_time_test_minutes")," "),t.xp6(2),t.s9C("matTooltip",t.lcZ(39,58,"lang_auto_thoi_gian_lam_bai_cua_hoc_sinh")),t.xp6(5),t.s9C("placeholder",t.lcZ(44,60,"lang_auto_nhap_thoi_gian")+" ..."),t.xp6(3),t.hij(" ",t.lcZ(47,62,"lang_testbank_test_config_enter_0_unlimited_time")," "),t.xp6(2),t.Q6J("ngIf",e.form.controls.minutes.errors),t.xp6(1),t.Q6J("ngIf",!e.form.controls.allowTestingEachQuestion.value),t.xp6(4),t.hij(" ",t.lcZ(54,64,"lang_testbank_test_config_who_tested")," "),t.xp6(2),t.Q6J("ngIf",0==e.form.controls.whoAllow.value),t.xp6(4),t.Q6J("value",0),t.xp6(2),t.hij(" ",t.lcZ(62,66,"lang_testbank_test_config_all_people")," "),t.xp6(3),t.Q6J("value",2),t.xp6(2),t.hij(" ",t.lcZ(67,68,"lang_testbank_test_config_assigne_class")," "),t.xp6(3),t.Q6J("value",3),t.xp6(2),t.hij(" ",t.lcZ(72,70,"lang_testbank_test_config_assigne_student")," "),t.xp6(2),t.Q6J("ngIf",2==e.form.controls.whoAllow.value),t.xp6(1),t.Q6J("hidden",3==e.form.controls.whoAllow.value),t.xp6(4),t.hij(" ",t.lcZ(79,72,"lang_testbank_click_on_the_class_to_select_students")," "),t.xp6(3),t.Q6J("visibility","hover")("autoHeightDisabled",!1)("ngClass",t.VKq(82,rA,e.isMobileWebView)),t.xp6(1),t.Q6J("form",e.form)("objs",e.classroomObjs)("examStudentObjs",e.examStudents)("permissionName",e.permissionTypes.exam),t.xp6(1),t.Q6J("ngIf",3==e.form.controls.whoAllow.value&&e.form.controls.studentIds.errors),t.xp6(1),t.Q6J("ngIf",e.isHasAudio),t.xp6(1),t.Q6J("ngIf",!e.form.controls.allowTestingEachQuestion.value),t.xp6(2),t.Q6J("ngIf",e.showShuffleSetting),t.xp6(1),t.Q6J("ngIf",!e.form.controls.allowTestingEachQuestion.value),t.xp6(1),t.Q6J("ngIf",!e.form.controls.allowTestingEachQuestion.value&&!e.isBusinessDomain),t.xp6(1),t.Q6J("ngIf",!e.form.controls.allowTestingEachQuestion.value),t.xp6(2),t.Q6J("ngIf",0==(null==e.obj?null:e.obj.isPublished)),t.xp6(1),t.Q6J("disabled",e.checkDisableBtnSaveOrPublish()),t.xp6(1),t.Q6J("ngIf",e.statusObj.loading),t.xp6(1),t.hij(" ",t.lcZ(96,74,"lang_auto_xuat_ban")," ")}}let lA=(()=>{class n extends St.Q{changModeView(e){this.modeView=e,document.getElementById(e)?.scrollIntoView({behavior:"smooth"})}getGroupMixInfosSubmit(e){let i={},a=[];return e.forEach(s=>{if(!i.hasOwnProperty(s.groupId)){i[s.groupId]=s.totalQuestion??0;let l=[],c=Number(s.totalGroupScore)/Number(s.totalQuestion);for(let d=0;d<(s.totalQuestion??0);d++)l.push(c);a=a.concat(l)}}),{status:this.isGroupMixQuestion?1:0,objs:i,marks:a}}getMixInfoSubmit(e,i){let a=Number(i)/Number(e),r=new Array(Number(e)).fill(a);return{limitMixQuestion:Number(e),marks:r}}clearTime(){this.form.controls.startTime.setValue(""),this.form.controls.endTime.setValue("")}calculateTime(e,i){let a=new Date(e).getTime()+60*i*1e3;return this.timeService.formatFullDateTimeByUserUnit(a)}calculatorTimeValidate(e,i){return""!=e&&""!=i?this.timeService.calculationHomeworkTimeWithZeroSecond(e,i):1}checkInfosField(e){let i="",a="",r="";if(this.commonService.myTranslate(["lang_auto_ho_va_ten"]).subscribe(s=>{i=s.lang_auto_ho_va_ten}),this.commonService.myTranslate(["lang_auto_lop"]).subscribe(s=>{a=s.lang_auto_lop}),this.commonService.myTranslate(["lang_auto_truong"]).subscribe(s=>{r=s.lang_auto_truong}),null==e||""==e)this.infoFields.push({type:0,title:i,contents:[]}),this.infoFields.push({type:0,title:a,contents:[]}),this.infoFields.push({type:0,title:r,contents:[]});else{let s=this.commonService.myParseJson(e);this.infoFields=s??[]}}checkValidInfoField(){for(let e=0;e<this.infoFields.length;e++)if(0!=this.infoFields[e].type){if(!(this.infoFields[e].contents&&this.infoFields[e].contents.length>0)){this.formInfoInvalid=!0,this.infoFields[e].error=!0;break}{let i=this.infoFields[e].contents.filter(a=>""==a);if(i&&i.length>0){this.formInfoInvalid=!0,this.infoFields[e].error=!0;break}this.formInfoInvalid=!1}}else this.formInfoInvalid=!1}changeEnterInfoControl(){this.form.controls.enterInfo.value?this.checkValidInfoField():this.formInfoInvalid=!1}clearAllCheckBox(e){2==e?this.isSelectClassroom=!0:3==e||(this.isSelectClassroom=!1)}toggleSecuritySetting(){this.showSecuritySetting=!this.showSecuritySetting,this.saveToggleSetting()}toggleShuffleSetting(){this.showShuffleSetting=!this.showShuffleSetting,this.saveToggleSetting()}togglePointAndAnswerSetting(){this.showPointAndAnswerSetting=!this.showPointAndAnswerSetting,this.saveToggleSetting()}togglePracticeSetting(){this.showPracticeSetting=!this.showPracticeSetting,this.saveToggleSetting()}saveToggleSetting(){let e={showSecuritySetting:this.showSecuritySetting,showShuffleSetting:this.showShuffleSetting,showPointAndAnswerSetting:this.showPointAndAnswerSetting,showPracticeSetting:this.showPracticeSetting};this.browserStorageService.saveSimpleStorage("config_toggle_setting_"+this.obj?.hashId,this.commonService.serializeJson(e))}redirectBackTo(){this.myNavigationBySpecialQueryString(this.backToLink)}numberParse(e){return Number(e)}checkDisableBtnSaveOrPublish(){return!!(this.checkValidateCountQuestion||this.formInfoInvalid||this.form.controls.classroomIds.errors||this.form.controls.studentIds.errors||0==this.form.controls.schoolLevel.value||0==this.form.controls.schoolSubject.value||"3"==this.form.controls.whenShowAnswer.value&&!this.numberParse(this.form.controls.viewAnswerResultMinMark.value)&&!this.form.controls.allowTestingEachQuestion.value)}disableCheckValidateCountQuestion(){this.form.controls.mixQuestion.value||(this.form.controls.isCreateSubTest.setValue(!1),this.checkValidateCountQuestion=!1)}callApiToSaveExam(e){let i=Number(this.commonService.getMyParam(this.activeRoute,"cat_id"))??0;this.form.controls.isRandomQuestion.value&&(this.form.controls.mixQuestion.setValue(0),this.form.controls.isCreateSubTest.setValue(!1));let a=this.form.getRawValue();const r=this.tagNameCtrl.value;if(r?.trim()&&this.tagNames.push(r.trim()),this.form.controls.price.errors)return void this.showErrorSnack("lang_config_enter_price_greater_than_10000_VND");if(this.calculatorTimeValidate(a.endTime??"",a.startTime??"")<0&&!a.allowTestingEachQuestion)return void this.showErrorSnack("lang_testbank_test_config_end_time_bigger_time_star");if(("1"==a.whenShowAnswer||"1"==a.whenShowResult)&&(!a.endTime||a.minutes<=0)&&!a.allowTestingEachQuestion)return void this.showErrorSnack("lang_auto_vui_long_nhap_thoi_gian_giao_de_va_thoi_gian_lam_bai_khi_chon_khi_tat_ca_thi_xong");if(isNaN(Number(a.minutes))||null==a.minutes)return void this.showErrorSnack("lang_auto_vui_long_nhap_thoi_gian");if(0==a.purposeExam)return void this.showErrorSnack("lang_testbank_please_choose_purpose_exam");if((4==a.purposeExam||8==a.purposeExam||12==a.purposeExam)&&""===a.purposeNote?.trim())return void this.showErrorSnack("lang_testbank_please_enter_purpose_create_exam");let s=a.startTime?this.timeService.formatDateTimeWithTimezoneAndZeroSecondToPostToServer(a.startTime):void 0,l=a.endTime?this.timeService.formatDateTimeWithTimezoneAndZeroSecondToPostToServer(a.endTime):void 0;a.isTakeTestOnce=a.isTakeTestOnce,a.limitAudio=a.limitAudio>0?a.limitAudio:0,a.mixQuestion=a.mixQuestion?1:0,a.limitMixQuestion=a.limitMixQuestion&&a.limitMixQuestion>0?a.limitMixQuestion:0;let c=this.getGroupMixInfosSubmit(a.groupInfos),d=this.getMixInfoSubmit(a.limitMixQuestion??0,a.totalPointQuestionNoGroup),h=a.isCreateSubTest&&1==a.mixQuestion?2:a.mixQuestion;if(a.enterInfo?this.checkValidInfoField():this.formInfoInvalid=!1,a.isCreateSubTest||(this.checkValidateCountQuestion=!1),(this.formInfoInvalid||this.checkValidateCountQuestion)&&!a.allowTestingEachQuestion)return void this.showErrorSnack("lang_auto_loi_hay_chac_chan_ban_da_dien_du_thong_tin");if(this.form.controls.classroomIds.errors)return void this.showErrorSnack("lang_auto_please_select_classroom");const _=this.sAztClassroomCheckboxService.getClassroomIdsCheckedInGroup(this.form.controls.classroomFormArray);if(a.isCreateSubTest&&this.isGroupMixQuestion){let U=!1;if(this.form.controls.groupInfos.controls.forEach(q=>null==q.controls.totalQuestion.value?(this.showErrorSnack("lang_core_not_valid_mix_group_question"),void(U=!0)):null==q.controls.totalGroupScore.value||0==Number(q.controls.totalGroupScore.value)&&Number(q.controls.totalQuestion.value)>0?(this.showErrorSnack("lang_testbank_please_enter_all_correct_information"),void(U=!0)):void 0),U)return}if(a.isCreateSubTest&&!this.isGroupMixQuestion&&0==a.totalPointQuestionNoGroup)return void this.showErrorSnack("lang_testbank_please_enter_all_correct_information");let x=[];3==a.whoAllow&&a.studentIds&&a.studentIds.length?a.studentIds.forEach(U=>{let q={classroomId:U.classroomId??0,assignStudentIds:[]};U.listStudents?.forEach(B=>{B.id&&B.choose&&q.assignStudentIds?.push(B.id)}),q.assignStudentIds?.length&&x?.push(q)}):x=void 0,this.initStatusObj();const b=new X1(this.form.controls.priceForAction.value,this.commonService.formatMoneyToNumber(this.form.controls.price.value)).getExamPriceRequest();let T={minutes:Number(a.minutes),password:a.password,startTime:s,endTime:l,whenShowAnswer:Number(a.whenShowAnswer),whenShowResult:Number(a.whenShowResult),onlyDisplayCorrectOrWrongQuestion:a.onlyTrueWrong?1:0,viewAnswerResultMinMark:a.viewAnswerResultMinMark?Number(a.viewAnswerResultMinMark):0,whoAllow:a.whoAllow,isPublished:e??void 0,autoMonitor:Number(a.autoMonitor),limitAudio:a.limitAudio,tags:this.tagNames,isTakeTestOnce:a.isTakeTestOnce?a.isTakeTestOnce:0,mixQuestion:h,fixMixQuestion:a.fixMixQuestion?1:0,mixQuestionNotInGroupInfoWithMarkObj:d,isRandomQuestion:this.enableRandomQuestion?a.isRandomQuestion?1:0:void 0,enterInfo:a.enterInfo?1:0,classroomIds:_,infoFieldsV2:JSON.stringify(this.infoFields),isSaveConfig:1,hideGroupQuestion:a.hideGroupQuestion?1:0,mixQuestionGroupInfoWithMarkObj:c,schoolLevelId:Number(a.schoolLevel),schoolSubjectId:Number(a.schoolSubject),purposeId:Number(a.purposeExam),purposeNote:a.purposeNote,allowTestingEachQuestion:a.allowTestingEachQuestion?1:0,mustCorrectToMoveOn:a.mustCorrectToMoveOn?1:0,showQuestionHelp:a.allowTestingEachQuestion?1:0,assignStudents:x,header:a.allowHeader?this.contentHeader:void 0,allowHeader:a.allowHeader?1:0,examPriceConfigObj:b};this.waitDestroy(this.documentConfigService.apiDocumentConfigSaveExamConfigPost(this.hashId,T).subscribe(P=>{if(1==P.success){const U=this.getMyQueryParam("classroomId"),q=this.getMyQueryParam("programId"),B=this.getMyQueryParam("sessionId");if(U){const W=q?3:1;this.commonService.myNavigationWithQueryString(`/admin/student/classroom-details/${U}/${W}`,1===W?"":"?sessionId="+B)}else if(e){let W=`/admin/testbank/config-exam-online/${i??0}/${this.obj?.hashId}?backto=`+encodeURIComponent(this.backToLink);this.commonService.myNavigationWithQueryString(`/admin/testbank/publish-document/0/${i??0}/${this.obj?.hashId}`,"?backto="+encodeURIComponent(W))}else{let W=this.backToLink.includes("shareType");this.commonService.myNavigation(`/admin/testbank/document-management/0/${W?0:i??0}/1`)}this.successStatusObj()}else this.errorStatusObj(P.message??"",!0)}))}savePublishExam(e){this.form.controls.allowHeader.value?this.uploadImageOfExamService.replaceImageInContent(Pm.j6.EXAM_EDITOR,this.contentHeader).subscribe(i=>{null==i.errorMessage?(this.contentHeader=i.content,this.callApiToSaveExam(e)):(this.showErrorSnack(i.errorMessage),this.stopStatusObj())}):this.callApiToSaveExam(e)}openDateTimePicker(e){1==e?this.startTime&&this.startTime.open():this.endTime&&this.endTime.open()}removeSelectedDate(e){1==e?this.form.controls.startTime.setValue("0"):this.form.controls.endTime.setValue("0")}confirmChangeMode(){this.hasTestingExamResult?this.sAztDialogService.open(Cy,{width:"500px"}).afterClosed().subscribe(i=>{i&&this.form.controls.allowTestingEachQuestion.setValue(0==this.form.controls.allowTestingEachQuestion.value?1:0)}):this.form.controls.allowTestingEachQuestion.setValue(0==this.form.controls.allowTestingEachQuestion.value?1:0)}callMultipleApi(e){const i=this.documentConfigService.apiDocumentConfigGetExamConfigDataV2Get(e),a=this.commonListService.apiCommonListSubjectAndLevelsGet(this.commonService.getBusinessDomainUrl()),r=this.commonListService.apiCommonListExamPurposesGet();return(0,dt.a)([i,a,r]).pipe((0,Pr.U)(([s,l,c])=>{if(!s.success)throw(new Lm.g).getSimpleErrorMessage(s.code,s.message).toError();if(!l.success)throw(new Lm.g).getSimpleErrorMessage(l.code,l.message).toError();if(!c.success)throw(new Lm.g).getSimpleErrorMessage(c.code,c.message).toError();return{examResponse:s.data,schoolLevelAndSubjectResponse:l.data,examPurposeResponse:c.data?.objs??[]}}),(0,yy.K)(s=>{throw s}))}getExamDataByHashId(e){this.initStatusObj(),this.waitDestroy(this.callMultipleApi(e).subscribe({next:i=>{if(null==i.examResponse?.examObj)return this.stopStatusObj();let a=i.examResponse.examObj,r=this.castObj(a);r&&(r.limitQuestionGroupsParse=this.commonService.myParseJson(a.limitQuestionGroups??""),this.obj=r),this.hasGroupQuestion=!!i.examResponse.hasGroupQuestion,this.minLimitMixQuestion=i.examResponse.minLimitMixQuestion??0,this.examGroupInfos=i.examResponse.examGroupInfos&&i.examResponse.examGroupInfos.length>0?i.examResponse.examGroupInfos:this.examGroupInfos,this.enableRandomQuestion=i.examResponse.enableRandomQuestion??!1;let s=i.examResponse.examObj.mixQuestionNotInGroupInfoWithMarkObj?.marks?.reduce((T,P)=>T+P,0);if(s=Math.round(100*(s??1))/100,this.classroomWithGroup=i.examResponse.classroomGroupObjs??new Array,this.classroomObjs=this.commonService.concatMultipleArray(i.examResponse.classroomGroupObjs.map(T=>T.classroomObjs)),this.examStudents=i.examResponse.examStudents??new Array,this.examClassroomObjs=i.examResponse.examClassroomObjs??[],this.listPurposeObjs=i.examPurposeResponse,i.examResponse.examTagObjs)for(let T=0;T<i.examResponse.examTagObjs.length;T++)this.tagNames.push(i.examResponse.examTagObjs[T].name??"");if(i.examResponse.allTagObjs)for(let T=0;T<i.examResponse.allTagObjs.length;T++)this.allTagNames.push(i.examResponse.allTagObjs[T].name??"");this.schoolLevelObjs=i.schoolLevelAndSubjectResponse?.schoolLevelSubjectObjs??[];let l=this.obj?.schoolLevelId?this.obj?.schoolLevelId:i.examResponse.examSchoolLogObj?.lastSchoolLevelId??0,c=this.obj?.schoolSubjectId?this.obj?.schoolSubjectId:i.examResponse.examSchoolLogObj?.lastSchoolSubjectId??0;this.hashId=this.obj?.hashId??"",this.isHasAudio=i.examResponse.isHasAudio??0;let d=2==this.obj?.mixQuestion,h=1==this.obj?.mixQuestion||2==this.obj?.mixQuestion?1:this.obj?.mixQuestion;this.isSelectClassroom=2==this.obj?.whoAllow,this.hasTestingExamResult=i.examResponse.hasTestingExamResult,this.form.patchValue({schoolLevel:l,schoolSubject:c,purposeExam:i.examResponse.purposeId??0,purposeNote:i.examResponse.purposeNote??"",isTakeTestOnce:this.obj?.isTakeTestOnce,password:this.obj?.password,priceForAction:i.examResponse.examPriceConfigObj?.priceForAction??"NONE",price:this.commonService.formatMoney(i.examResponse.examPriceConfigObj?.price.toString()??""),autoMonitor:this.obj?.autoMonitor?.toString()??"0",minutes:Number(this.obj?.minutes??0),startTime:this.obj?.startTime?this.obj.startTime.toString():"",endTime:this.obj?.endTime?this.obj.endTime.toString():"",whenShowAnswer:this.obj?.whenShowAnswer?.toString(),whenShowResult:this.obj?.whenShowResult?.toString(),onlyTrueWrong:!!i.examResponse.onlyDisplayCorrectOrWrongQuestion,viewAnswerResultMinMark:Number(i.examResponse.viewAnswerResultMinMark)??0,whoAllow:this.obj?.whoAllow??0,mixQuestion:h,isRandomQuestion:1===this.obj?.isRandomQuestion,isCreateSubTest:d,limitMixQuestion:this.obj?.limitMixQuestion,totalPointQuestionNoGroup:s,fixMixQuestion:1==this.obj?.fixMixQuestion,hideGroupQuestion:1==this.obj?.hideGroupQuestion,limitAudio:null!=this.obj?.limitAudio?Number(this.obj?.limitAudio):0,enterInfo:0!=this.obj?.enterInfo,allowTestingEachQuestion:i.examResponse.allowTestingEachQuestion,mustCorrectToMoveOn:i.examResponse.mustCorrectToMoveOn,showQuestionHelp:i.examResponse.showQuestionHelp,allowHeader:!!i.examResponse.allowHeader}),this.contentHeader=i.examResponse.header??"";let b=this.commonService.myParseJson(this.browserStorageService.getSimpleStorage("config_toggle_setting_"+this.obj?.hashId)??"");b&&(this.showSecuritySetting=b.showSecuritySetting,this.showShuffleSetting=b.showShuffleSetting,this.showPointAndAnswerSetting=b.showPointAndAnswerSetting,this.showPracticeSetting=b.showPracticeSetting),this.checkInfosField(this.obj?.infoFieldsV2??""),this.successStatusObj()},error:i=>{this.errorStatusObj(i.error.message,!0)}}))}previewTakeExam(){if(null==this.obj)return;const e={obj:{...this.obj,attended:0},curCateId:this.obj?.categoryId?this.obj?.categoryId:0,isOnLib:0,isShow:!0,allowHeader:this.form.controls.allowHeader.value,headerContent:this.contentHeader,showDelete:!1};this.sAztDialogService.open(Hf.H,{width:"800px",maxWidth:"90vw",enterAnimationDuration:"0ms",exitAnimationDuration:"0ms",data:e,restoreFocus:!1}).afterClosed().subscribe(a=>{})}ngOnInit(){super.ngOnInit(),this.form.valueChanges.subscribe(s=>{let l=JSON.stringify(s);l!=this.prevData&&(this.prevData=l,this.form.patchValue(s))}),this.commonService.translateMetaData({title:"lang_cms__config_title",description:"lang_cms_test_config_online_description",image:""});let e=Number(this.commonService.getMyParam(this.activeRoute,"cat_id"))??0,i=this.commonService.getMyParam(this.activeRoute,"hash_id")??"",a=this.commonService.getMyQueryParam("backto")??"";this.backToLink=a||`/admin/testbank/document-management/0/${e}/1`,this.initDataEditor=this.sAztTinyMceService.initConfigForTeacherWithUploadImageBox(Pm.j6.EXAM_EDITOR),this.getExamDataByHashId(i),this.getMyQueryParam("classroomId")&&setTimeout(()=>{this.form.controls.whoAllow.setValue(2)},1e3)}constructor(e,i,a,r,s,l,c,d,h){super(),this.sAztTinyMceService=e,this.activeRoute=i,this.timeService=a,this.documentConfigService=r,this.sAztClassroomCheckboxService=s,this.browserStorageService=l,this.sAztDialogService=c,this.uploadImageOfExamService=d,this.commonListService=h,this.permissionTypes=ap.y,this.backToLink="",this.hashId="",this.prevData="",this.isSelectClassroom=!1,this.showSecuritySetting=!0,this.showShuffleSetting=!0,this.showPointAndAnswerSetting=!0,this.showPracticeSetting=!0,this.tagNameCtrl=new f.NI("",{nonNullable:!0}),this.tagNames=[],this.allTagNames=[],this.classroomObjs=[],this.examClassroomObjs=[],this.examStudents=[],this.isGroupMixQuestion=!1,this.checkValidateCountQuestion=!1,this.hasGroupQuestion=!1,this.minLimitMixQuestion=0,this.examGroupInfos=[],this.enableRandomQuestion=!1,this.schoolLevelObjs=[],this.infoFields=[],this.formInfoInvalid=!1,this.isHasAudio=0,this.modeView="general",this.listPurposeObjs=[],this.hasTestingExamResult=!1,this.contentHeader="",this.maxDate=Ce.N.maxDateTimePicker,this.classroomWithGroup=[],this.form=new f.cw({schoolLevel:new f.NI(0,{nonNullable:!0,validators:[f.kI.required,f.kI.min(1)]}),schoolSubject:new f.NI(0,{nonNullable:!0,validators:[f.kI.required,f.kI.min(1)]}),purposeExam:new f.NI(0,{nonNullable:!0,validators:[f.kI.required]}),purposeNote:new f.NI("",{nonNullable:!0}),minutes:new f.NI(60,{nonNullable:!0,validators:[f.kI.required,f.kI.min(0)]}),isTakeTestOnce:new f.NI(0,{nonNullable:!0,validators:[f.kI.min(0)]}),autoMonitor:new f.NI("0",{nonNullable:!0}),password:new f.NI("",{nonNullable:!0}),startTime:new f.NI(Date(),{nonNullable:!0}),endTime:new f.NI(Date(),{nonNullable:!0,validators:[f.kI.required]}),whenShowAnswer:new f.NI("0",{nonNullable:!0}),whenShowResult:new f.NI("0",{nonNullable:!0}),onlyTrueWrong:new f.NI(!1,{nonNullable:!0}),viewAnswerResultMinMark:new f.NI(0,{nonNullable:!0}),whoAllow:new f.NI(0,{nonNullable:!0}),classroomIds:new f.Oe([]),classroomFormArray:new f.Oe([]),studentIds:new f.Oe([]),mixQuestion:new f.NI(0,{nonNullable:!0}),isCreateSubTest:new f.NI(!1,{nonNullable:!0}),limitMixQuestion:new f.NI(void 0,{nonNullable:!0,validators:[f.kI.required]}),totalPointQuestionNoGroup:new f.NI(10,{nonNullable:!0,validators:[f.kI.required]}),groupInfos:new f.Oe([]),fixMixQuestion:new f.NI(!1,{nonNullable:!0}),isRandomQuestion:new f.NI(!1,{nonNullable:!0}),enterInfo:new f.NI(!1,{nonNullable:!0}),limitAudio:new f.NI(0,{nonNullable:!0,validators:[f.kI.min(0)]}),hideGroupQuestion:new f.NI(1===this.obj?.isRandomQuestion,{nonNullable:!0}),price:new f.NI("",{nonNullable:!0}),priceForAction:new f.NI("NONE",{nonNullable:!0}),allowTestingEachQuestion:new f.NI(0,{nonNullable:!0}),mustCorrectToMoveOn:new f.NI(0,{nonNullable:!0}),showQuestionHelp:new f.NI(1,{nonNullable:!0}),allowHeader:new f.NI(!1,{nonNullable:!0}),contentHeader:new f.NI("",{nonNullable:!0}),isShowCheckClass:new f.NI(!1,{nonNullable:!0})},{validators:[Iu.customDateTimeValidator,Cf.h.classroomInGroupCheckBoxValidator,wy.M.studentCheckBoxValidator,V1.priceValidator]})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(q0.y),t.Y36(O.gz),t.Y36(br.D),t.Y36(Ty.C),t.Y36(Tf.f),t.Y36(No.n),t.Y36(Fi.C),t.Y36(ky.$),t.Y36(Cd.o7))},n.\u0275cmp=t.Xpm({type:n,selectors:[["test-config-online"]],viewQuery:function(e,i){if(1&e&&(t.Gf(Ck,5),t.Gf(Tk,5)),2&e){let a;t.iGM(a=t.CRH())&&(i.startTime=a.first),t.iGM(a=t.CRH())&&(i.endTime=a.first)}},features:[t._Bn([{provide:$a.fM,useClass:op.WG,deps:[Lc.Ad,Ou.o8]},{provide:$a.ab,useFactory:wf.hx,deps:[br.D]}]),t.qOj],decls:5,vars:4,consts:[[3,"headerBackToLink"],[3,"formGroup"],[4,"ngIf","ngIfElse"],["doneLoading",""],["id","azt-config-document",1,"azt-config-document","mx-auto","mt-5",2,"max-width","1150px"],[1,"grid","grid-cols-12","gap-5","mt-5"],[1,"col-span-12"],["id","mode",1,"box","p-5","mt-5"],[1,"p-0"],[1,"grid","grid-cols-12","items-center"],[1,"col-span-5","lg:col-span-5"],["for","mode-configuration",1,"form-label","font-medium","flex","items-center"],[1,"col-span-2","lg:col-span-7"],[1,"switch-wrapper"],["for","test",3,"ngClass","click"],["for","train",3,"ngClass","click"],[1,"highlighter",3,"ngStyle"],[1,"col-span-12","lg:col-span-12"],[1,"leading-relaxed","text-slate-500","mt-2","pr-5"],[4,"ngIf"],[1,"setting-basic"],["id","general",1,"box","p-5","mt-5"],[1,"flex","items-center","border-b","border-slate-200/60","pb-5","mb-5","text-base","font-medium","dark:border-darkmode-400"],[3,"form","schoolLevelObjs"],[1,"config-purpose-exam","mt-3"],[3,"form","purposeList"],["id","azt-config-time-minutes",1,"grid","grid-cols-12","mt-4"],["for","document-time-minutes",1,"form-label","font-medium","flex","items-center"],[1,"w-4","h-4","inline-block","ml-2",3,"matTooltip"],["name","info"],[1,"setting-input"],["id","document-time-minutes","appOnlyNumber","","formControlName","minutes","type","text",1,"form-control",3,"placeholder"],[1,"text-xs","text-slate-500","mt-1"],["class","text-xs text-danger mt-1",4,"ngIf"],["class","grid grid-cols-12 mt-4","id","azt-config-time-assignment",4,"ngIf"],["id","azt-config-who-allow",1,"grid","grid-cols-12","mt-4"],[1,"col-span-12","lg:col-span-5","pr-5"],[1,"form-label","font-medium","flex","items-center"],["class","leading-relaxed text-slate-500 text-xs mt-2",4,"ngIf"],[1,"col-span-12","lg:col-span-5"],[1,"flex","flex-col","sm:flex-row"],[1,"form-check","mr-10"],["id","config-who-all","formControlName","whoAllow","type","radio",1,"form-check-input",3,"value","change"],["for","config-who-all",1,"form-check-label"],[1,"form-check","mr-10","mt-2","sm:mt-0"],["id","config-who-class","formControlName","whoAllow","type","radio",1,"form-check-input",3,"value","change"],["for","config-who-class",1,"form-check-label"],[1,"form-check","mt-2","sm:mt-0"],["id","config-who-student","formControlName","whoAllow","type","radio",1,"form-check-input",3,"value","change"],["for","config-who-student",1,"form-check-label"],["class","col-span-12 mt-4",4,"ngIf"],[1,"col-span-12","mt-4",3,"hidden"],[1,"border","border-slate-200/60","dark:border-darkmode-400","rounded-md","pb-1"],[1,"p-3","bg-slate-100","dark:bg-darkmode-400","flex","items-center"],[1,"mr-auto"],[1,"classroom_list"],["pointerEventsMethod","scrollbar",1,"w-full",3,"visibility","autoHeightDisabled","ngClass"],[3,"form","objs","examStudentObjs","permissionName"],["class","col-span-12 mt-2",4,"ngIf"],["class","grid grid-cols-12 mt-4","id","exam-audio",4,"ngIf"],["class","setting-advanced mt-5",4,"ngIf"],[1,"setting-advanced","mt-5"],["class","box p-5 mt-3",4,"ngIf"],[1,"flex","justify-end","mt-5"],["azt-track-service","config-exam-online-w_k87Co86T","class","btn w-24 btn-pending mr-2",3,"disabled","click",4,"ngIf"],["azt-track-service","config-exam-online-IJPSsthNNv",1,"btn","w-24","btn-primary",3,"disabled","click"],["class","w-4 h-4 inline-block",4,"ngIf"],[1,"leading-relaxed","text-pending"],[1,"text-xs","text-danger","mt-1"],["id","azt-config-time-assignment",1,"grid","grid-cols-12","mt-4"],["for","regular-form-1",1,"form-label","font-medium","flex","items-center"],[1,"grid","grid-cols-12","gap-3"],[1,"col-span-12","md:col-span-5"],["appearance","outline"],["azt-track-service","config-exam-online-zpjNTbf42S","matInput","","formControlName","startTime","readonly","",3,"placeholder","max","ngxMatDatetimePicker","click"],["azt-track-service","config-exam-online-WIIkPQrzu5","matSuffix","",2,"font-size","18px",3,"click"],[1,"w-4","h-4","inline-block"],["name","calendar-clock"],[3,"touchUi"],["startTime",""],["mat-raised-button","","color","secondary","ngxMatDatepickerCancel",""],["mat-raised-button","","color","primary","ngxMatDatepickerApply",""],["azt-track-service","config-exam-online-NFd3Eq4Vq9","matInput","","formControlName","endTime","readonly","",3,"placeholder","max","ngxMatDatetimePicker","click"],["azt-track-service","config-exam-online-2LQ7XbEP9P","matSuffix","",2,"font-size","18px",3,"click"],["endTime",""],[1,"col-span-6","md:col-span-2"],["azt-track-service","config-exam-online-ceMErvp9Ni",1,"btn","btn-outline-secondary","w-full",3,"click"],[1,"w-4","h-4","inline-block","mr-2"],["name","timer-reset"],[1,"text-xs","mt-2"],[1,"text-slate-500"],[1,"text-slate-500","mt-1"],["class","text-danger mt-1",4,"ngIf"],[1,"text-danger","mt-1"],[1,"leading-relaxed","text-slate-500","text-xs","mt-2"],[1,"col-span-12","mt-4"],[1,"azt-list-classroom"],[3,"form","classroomGroupData","examClassroomObjs","permissionName"],[1,"col-span-12","mt-2"],[1,"text-xs","text-danger"],["id","exam-audio",1,"grid","grid-cols-12","mt-4"],["for","config-audio",1,"form-label","mt-2","mb-0","font-medium","flex","items-center"],[1,"leading-relaxed","text-slate-500","text-xs","mt-2","pr-5"],[1,"col-span-12","lg:col-span-7"],["type","text","id","config-audio","appOnlyNumber","","formControlName","limitAudio",1,"form-control",3,"placeholder"],[1,"box","p-5","mt-3"],[1,"grid","grid-cols-12"],["for","config-once-test",1,"form-label","mt-2","font-medium","flex","items-center"],["id","config-once-test","appOnlyNumber","","formControlName","isTakeTestOnce","type","text",1,"form-control"],[1,"grid","grid-cols-12","mt-4"],["for","config-password",1,"form-label","mt-2","font-medium","flex","items-center"],["type","text","id","config-password","formControlName","password","type","text","autocapitalize","none",1,"form-control",3,"placeholder"],[1,"grid","grid-cols-12","mt-5"],[1,"form-check","mr-8"],["id","automatic-off","type","radio","formControlName","autoMonitor","value","0",1,"form-check-input"],["for","automatic-off",1,"form-check-label"],[1,"form-check","mr-8","mt-2","sm:mt-0"],["id","automatic-exit-monitor","type","radio","formControlName","autoMonitor","value","1",1,"form-check-input"],["for","automatic-exit-monitor",1,"form-check-label","flex","items-center"],["id","automatic-advanced","type","radio","formControlName","autoMonitor","value","3",1,"form-check-input"],["for","automatic-advanced",1,"form-check-label","flex","items-center"],[1,"col-span-10","lg:col-span-5"],["for","config-verify-student",1,"form-label","font-medium","flex","items-center"],[1,"setting-input","form-switch","ml-"],["id","config-verify-student","formControlName","enterInfo","type","checkbox",1,"show-code","form-check-input",3,"change"],["class","intro-y col-span-12 mt-5",4,"ngIf"],[1,"intro-y","col-span-12","mt-5"],[3,"infoFields","formInfoInvalid","infoFieldsChange","formInfoInvalidChange","checkValidInfo"],["class","grid grid-cols-12 mt-4",4,"ngIf"],["class","grid grid-cols-12 mt-5",4,"ngIf"],["for","config-hide-group-header",1,"form-label","font-medium","flex","items-center"],[1,"setting-input","form-switch"],["id","config-hide-group-header","formControlName","hideGroupQuestion","type","checkbox",1,"show-code","form-check-input"],["for","config-random-matrix-question",1,"form-label","font-medium","flex","items-center"],["id","config-random-matrix-question","formControlName","isRandomQuestion","type","checkbox",1,"show-code","form-check-input"],["for","config-mix-question",1,"form-label","mb-0","font-medium","flex","items-center"],["azt-track-service","config-exam-online-vrhIU4hchP","href","https://docs.azota.vn/docs/huong-dan-su-dung/thi-online/dao-cau-hoi-va-dap-an/","target","_blank",1,"text-primary","font-medium"],["id","config-mix-question","formControlName","mixQuestion","type","checkbox",1,"show-code","form-check-input",3,"change"],["for","config-create-sub",1,"form-label","font-medium","flex","items-center"],["id","config-create-sub","formControlName","isCreateSubTest","type","checkbox",1,"show-code","form-check-input",3,"disabled","change"],["class","col-span-12 mt-4 intro-y",4,"ngIf"],[1,"col-span-12","mt-4","intro-y"],["formArrayGroupInfosName","groupInfos","formControlLimitMixQuestionName","limitMixQuestion",3,"form","obj","minLimitMixQuestion","examGroupInfos","isGroupMixQuestionChange","checkValidateCountQuestionChange",4,"ngIf"],["formArrayGroupInfosName","groupInfos","formControlLimitMixQuestionName","limitMixQuestion",3,"form","obj","minLimitMixQuestion","examGroupInfos","isGroupMixQuestionChange","checkValidateCountQuestionChange"],["for","config-fix-mix",1,"form-label","font-medium","flex","items-center"],["id","config-fix-mix","formControlName","fixMixQuestion","type","checkbox",1,"show-code","form-check-input",3,"disabled"],["id","whenShowResult-block",1,"grid","grid-cols-12","mt-4"],["class","clearfix pt-1",4,"ngIf"],["id","whenShowResult-off","type","radio","formControlName","whenShowResult","value","2",1,"form-check-input"],["for","whenShowResult-off",1,"form-check-label"],["id","whenShowResult-tested","type","radio","formControlName","whenShowResult","value","0",1,"form-check-input"],["for","whenShowResult-tested",1,"form-check-label","flex","items-center"],["id","whenShowResult-advanced","type","radio","formControlName","whenShowResult","value","1",1,"form-check-input"],["for","whenShowResult-advanced",1,"form-check-label","flex","items-center"],["id","whenShowAnswer-block",1,"grid","grid-cols-12","mt-4"],["id","whenShowAnswer-off","type","radio","formControlName","whenShowAnswer","value","2",1,"form-check-input"],["for","whenShowAnswer-off",1,"form-check-label"],["id","whenShowAnswer-tested","type","radio","formControlName","whenShowAnswer","value","0",1,"form-check-input"],["for","whenShowAnswer-tested",1,"form-check-label","flex","items-center"],["id","whenShowAnswer-advanced","type","radio","formControlName","whenShowAnswer","value","1",1,"form-check-input"],["for","whenShowAnswer-advanced",1,"form-check-label","flex","items-center"],["id","whenShowAnswer-advanced-2","type","radio","formControlName","whenShowAnswer","value","3",1,"form-check-input"],["for","whenShowAnswer-advanced-2",1,"form-check-label","flex","items-center"],[1,"clearfix","pt-1"],["for","show-answer-reached-point",1,"form-label","mt-2","font-medium","flex","items-center"],["type","text","id","show-answer-reached-point","appOnlyNumber","","formControlName","viewAnswerResultMinMark","type","text",1,"form-control",3,"decimal","placeholder"],["class","text-xs text-danger mt-2",4,"ngIf"],[1,"text-xs","text-danger","mt-2"],[1,"mt-4"],[3,"form"],[1,"box","p-5","mt-5"],["type","checkbox","formControlName","allowHeader",1,"show-code","form-check-input"],["apiKey","q2b0xww12b2xbx637vp80iafuvwuc9zkep6qoceo62ba6qcs",3,"ngModel","ngModelOptions","init","ngModelChange"],["tinyEditor",""],["azt-track-service","config-exam-online-w_k87Co86T",1,"btn","w-24","btn-pending","mr-2",3,"disabled","click"]],template:function(e,i){if(1&e&&(t.TgZ(0,"teacher-layout",0)(1,"form",1),t.YNc(2,kk,1,0,"azt-loading-effect",2),t.YNc(3,sA,97,84,"ng-template",null,3,t.W1O),t.qZA()()),2&e){const a=t.MAs(4);t.Q6J("headerBackToLink",i.backToLink),t.xp6(1),t.Q6J("formGroup",i.form),t.xp6(1),t.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a)}},dependencies:[D.mk,D.O5,D.PC,vr.lW,yd.Nt,rs.KE,rs.R9,Mi.gM,$a.rZ,$a.T$,$a.c_,$a.dW,$a.cL,L.KC,w.PG,f._Y,f.Fj,f.Wl,f._,f.JJ,f.JL,f.On,f.sg,f.u,si.l,qr.Y,oo.M,wd._,oi.n,Em.Z,kf.u,e0,fo._,C.Nh5,qy,y6,wk.V,jt.JV],styles:[".header-list-class[_ngcontent-%COMP%]{display:flex}@media screen and (max-width: 550px){.header-list-class[_ngcontent-%COMP%]{display:block}.toggle-select-class[_ngcontent-%COMP%]{margin-top:10px;justify-content:space-between}}"]}),n})(),C6=(()=>{class n extends St.Q{redirectBackTo(){this.myNavigationBySpecialQueryString(this.backToLink)}ngOnInit(){this.waitDestroy((0,dt.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{let e=this.commonService.getMyParam(this.activeRoute,"cat_id")??"";this.homeworkHashId=this.commonService.getMyParam(this.activeRoute,"hash_id")??"",this.backToLink=this.commonService.getMyQueryParam("backto")??"";let i=this.commonService.getMyQueryParam("backto");this.backToLink=i??`/admin/testbank/document-management/1/${e??0}/1`})),this.commonService.translateMetaData({title:"lang_cms__config_title",description:"lang_cms_config_homework_description",image:""}),super.ngOnInit()}constructor(e){super(),this.activeRoute=e,this.backToLink="",this.homeworkHashId=""}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(O.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-config-homework"]],features:[t.qOj],decls:2,vars:1,consts:[[3,"headerBackToLink"],[3,"onBack"]],template:function(e,i){1&e&&(t.TgZ(0,"teacher-layout",0)(1,"main-config-homework",1),t.NdJ("onBack",function(){return i.redirectBackTo()}),t.qZA()()),2&e&&t.Q6J("headerBackToLink",i.backToLink)},dependencies:[fo._,W1]}),n})();var Fy=M(73311);let cA=(()=>{class n extends St.Q{constructor(e){super(),this.activeRoute=e,this.linkCopy="",this.offlineCode="",this.hasOfflineExam=!1,this.checkValueInput=!1,this.classroomObjs=[],this.isCheckAll=!1,this.shareClassroomIds=[],this.classIdsNotPermission=[],this.hashId="",this.cateId=""}ngOnInit(){this.hashId=this.commonService.getMyParam(this.activeRoute,"hash_id")??"0",super.ngOnInit()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(O.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-config-share-offline-result"]],features:[t.qOj],decls:1,vars:2,consts:[[3,"examHashId","useDialog"]],template:function(e,i){1&e&&t._UZ(0,"azt-offline-share",0),2&e&&t.Q6J("examHashId",i.hashId)("useDialog",!1)},dependencies:[Fy.h],styles:[".school-info_bg[_ngcontent-%COMP%]{background:#fff;height:100vh}.block-note[_ngcontent-%COMP%]{padding:5px}.note[_ngcontent-%COMP%]{color:#acacac}.btn-close[_ngcontent-%COMP%]{transition:all .5s}.btn-close[_ngcontent-%COMP%]:hover{background:#dfe6e9}mat-radio-group[_ngcontent-%COMP%]{margin:10px 5px;width:90%;display:flex;justify-content:space-between}.block-title[_ngcontent-%COMP%]{text-align:center;font-size:18px;font-weight:500}.block-main-classroom[_ngcontent-%COMP%]{padding:10px;border:1px solid #908e8e;border-radius:5px;height:200px;overflow:hidden}.classroom-header[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:15px}.btn-copy[_ngcontent-%COMP%]{border-radius:5px;transition:all .5s;text-transform:inherit}.btn-copy[_ngcontent-%COMP%]:hover:not([disabled]){background:#16236c}"]}),n})();var cs=function(n){return n[n.create=0]="create",n[n.excel=1]="excel",n[n.updateExam=2]="updateExam",n[n.updateExamCode=3]="updateExamCode",n}(cs||{}),uA=M(93283),Gf=M(1028);function dA(n,o){1&n&&(t.TgZ(0,"div",20),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_please_enter_score_greater_than_0")," "))}function mA(n,o){if(1&n&&(t.TgZ(0,"div",14)(1,"div",15)(2,"label",16),t._uU(3),t.ALo(4,"mytranslate"),t.ALo(5,"mytranslate"),t.ALo(6,"mytranslate"),t.qZA(),t.TgZ(7,"div",17),t._UZ(8,"input",18),t.qZA()(),t.YNc(9,dA,3,3,"div",19),t.qZA()),2&n){const e=t.oxw(2);t.xp6(3),t.hij(" ",t.lcZ(4,3,"azt_lang_sugg_part_cc")+" "+t.lcZ(5,5,"azt_lang_sugg_type_multiple_choice")+" ("+e.data.totalMultipleChoice+" "+t.lcZ(6,7,"lang_testbank_tested_list_question")+")"," "),t.xp6(5),t.Q6J("decimal",!0),t.xp6(1),t.Q6J("ngIf",e.form.controls.scoreMultipleChoice.errors&&(e.form.controls.scoreMultipleChoice.dirty||e.form.controls.scoreMultipleChoice.touched))}}function hA(n,o){1&n&&(t.TgZ(0,"div",20),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_please_enter_score_greater_than_0")," "))}function pA(n,o){if(1&n&&(t.TgZ(0,"div",8)(1,"div",15)(2,"label",21),t._uU(3),t.ALo(4,"mytranslate"),t.ALo(5,"mytranslate"),t.ALo(6,"mytranslate"),t.qZA(),t.TgZ(7,"div",17),t._UZ(8,"input",22),t.qZA()(),t.YNc(9,hA,3,3,"div",19),t.qZA()),2&n){const e=t.oxw(2);t.xp6(3),t.hij(" ",t.lcZ(4,3,"azt_lang_sugg_part_cc")+" "+t.lcZ(5,5,"lang_testbank_true_false_quiz")+" ("+e.data.totalTrueFalse+" "+t.lcZ(6,7,"lang_testbank_tested_list_question")+")"," "),t.xp6(5),t.Q6J("decimal",!0),t.xp6(1),t.Q6J("ngIf",e.form.controls.scoreTrueFalse.errors&&(e.form.controls.scoreTrueFalse.dirty||e.form.controls.scoreTrueFalse.touched))}}function _A(n,o){1&n&&(t.TgZ(0,"div",20),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_please_enter_score_greater_than_0")," "))}function fA(n,o){if(1&n&&(t.TgZ(0,"div",8)(1,"div",15)(2,"label",23),t._uU(3),t.ALo(4,"mytranslate"),t.ALo(5,"mytranslate"),t.ALo(6,"mytranslate"),t.qZA(),t.TgZ(7,"div",17),t._UZ(8,"input",24),t.qZA()(),t.YNc(9,_A,3,3,"div",19),t.qZA()),2&n){const e=t.oxw(2);t.xp6(3),t.hij(" ",t.lcZ(4,3,"azt_lang_sugg_part_cc")+" "+t.lcZ(5,5,"lang_testbank_fill_number")+" ("+e.data.totalFill+" "+t.lcZ(6,7,"lang_testbank_tested_list_question")+")"," "),t.xp6(5),t.Q6J("decimal",!0),t.xp6(1),t.Q6J("ngIf",e.form.controls.scoreFill.errors&&(e.form.controls.scoreFill.dirty||e.form.controls.scoreFill.touched))}}function gA(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_testbank_please_enter_score_greater_than_0")))}function xA(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_core_vui_long_nhap_diem_tu_luan_nho_hon_10")))}function bA(n,o){if(1&n&&(t.TgZ(0,"div",20),t.YNc(1,gA,3,3,"span",27),t.YNc(2,xA,3,3,"span",27),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.form.controls.scoreEssay.errors.required||e.form.controls.scoreEssay.errors.min),t.xp6(1),t.Q6J("ngIf",e.form.controls.scoreEssay.errors.max)}}function vA(n,o){if(1&n&&(t.TgZ(0,"div",8)(1,"div",15)(2,"label",25),t._uU(3),t.ALo(4,"mytranslate"),t.ALo(5,"mytranslate"),t.ALo(6,"mytranslate"),t.qZA(),t.TgZ(7,"div",17),t._UZ(8,"input",26),t.qZA()(),t.YNc(9,bA,3,2,"div",19),t.qZA()),2&n){const e=t.oxw(2);t.xp6(3),t.hij(" ",t.lcZ(4,3,"azt_lang_sugg_part_cc")+" "+t.lcZ(5,5,"azt_lang_sugg_type_essay")+" ("+e.data.totalEssay+" "+t.lcZ(6,7,"lang_testbank_tested_list_question")+")"," "),t.xp6(5),t.Q6J("decimal",!0),t.xp6(1),t.Q6J("ngIf",e.form.controls.scoreEssay.errors&&(e.form.controls.scoreEssay.dirty||e.form.controls.scoreEssay.touched))}}function yA(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",1)(1,"form",2)(2,"div",3)(3,"span",4),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()(),t.TgZ(6,"div",5),t.YNc(7,mA,10,9,"div",6),t.YNc(8,pA,10,9,"div",7),t.YNc(9,fA,10,9,"div",7),t.YNc(10,vA,10,9,"div",7),t.TgZ(11,"div",8)(12,"span",9),t._uU(13),t.ALo(14,"mytranslate"),t.qZA(),t.TgZ(15,"span",10),t._uU(16),t.ALo(17,"mytranslate"),t.qZA()()(),t.TgZ(18,"div",11)(19,"button",12),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.handleCloseDialog())}),t._uU(20),t.ALo(21,"mytranslate"),t.qZA(),t.TgZ(22,"button",13),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.handelScoreDistribution())}),t._uU(23),t.ALo(24,"mytranslate"),t.qZA()()()()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("formGroup",e.form),t.xp6(3),t.hij(" ",t.lcZ(5,10,"lang_testbank_quick_score_distribution")," "),t.xp6(3),t.Q6J("ngIf",e.data.totalMultipleChoice),t.xp6(1),t.Q6J("ngIf",e.data.totalTrueFalse),t.xp6(1),t.Q6J("ngIf",e.data.totalFill),t.xp6(1),t.Q6J("ngIf",e.data.totalEssay),t.xp6(3),t.hij(" ",t.lcZ(14,12,"lang_homework_mark_exercise_utils_note")+": "," "),t.xp6(3),t.hij(" ",t.lcZ(17,14,"lang_testbank_reallocate_scores_when_adding_a_new_section")," "),t.xp6(4),t.hij(" ",t.lcZ(21,16,"lang_auto_dong")," "),t.xp6(3),t.hij(" ",t.lcZ(24,18,"lang_cms_common_confirm_btn")," ")}}let wA=(()=>{class n extends lo.e{handleCloseDialog(){this.dialogRef.close()}handelScoreDistribution(){if(this.form.invalid)return this.form.markAllAsTouched();this.dialogRef.close({scoreMultipleChoice:this.form.controls.scoreMultipleChoice.value,totalMultipleChoice:this.data?.totalMultipleChoice??0,scoreTrueFalse:this.form.controls.scoreTrueFalse.value,totalTrueFalse:this.data?.totalTrueFalse??0,scoreFill:this.form.controls.scoreFill.value,totalFill:this.data?.totalFill??0,scoreEssay:this.form.controls.scoreEssay.value,totalEssay:this.data?.totalEssay??0})}addValidateForm(){if(!this.data)return;const e=1e-6;this.data.totalMultipleChoice&&this.form.controls.scoreMultipleChoice.addValidators([f.kI.required,f.kI.min(e)]),this.data.totalTrueFalse&&this.form.controls.scoreTrueFalse.addValidators([f.kI.required,f.kI.min(e)]),this.data.totalFill&&this.form.controls.scoreFill.addValidators([f.kI.required,f.kI.min(e)]),this.data.totalEssay&&this.form.controls.scoreEssay.addValidators([f.kI.required,f.kI.min(e),f.kI.max(9.99)])}ngOnInit(){super.ngOnInit(),this.addValidateForm()}constructor(e,i){super(i,e),this.dialogRef=e,this.data=i,this.form=new f.cw({scoreMultipleChoice:new f.NI(i?.scoreMultipleChoice??0,{nonNullable:!0}),scoreTrueFalse:new f.NI(i?.scoreTrueFalse??0,{nonNullable:!0}),scoreFill:new f.NI(i?.scoreFill??0,{nonNullable:!0}),scoreEssay:new f.NI(i?.scoreEssay??0,{nonNullable:!0})})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36($.so,8),t.Y36($.WI,8))},n.\u0275cmp=t.Xpm({type:n,selectors:[["quick-score-distribution"]],features:[t.qOj],decls:1,vars:1,consts:[["class","box",4,"ngIf"],[1,"box"],[3,"formGroup"],[1,"border-b","border-slate-200","dark:border-darkmode-400","p-3"],[1,"font-medium","text-base"],[1,"p-3","border-b","border-slate-200","dark:border-darkmode-400"],["class","mt-0",4,"ngIf"],["class","mt-4",4,"ngIf"],[1,"mt-4"],[1,"text-pending","font-medium","text-xs"],[1,"font-medium","text-xs"],[1,"p-3","text-right"],[1,"btn","btn-outline-secondary","mr-3","w-24",3,"click"],[1,"btn","btn-primary","w-24",3,"click"],[1,"mt-0"],[1,"flex","items-center"],["for","scoreMultipleChoice",1,"font-medium","mr-3"],[1,"ml-auto"],["type","text","formControlName","scoreMultipleChoice","id","scoreMultipleChoice","appOnlyNumber","",1,"form-control","text-center",2,"width","90px",3,"decimal"],["class","mt-2 text-danger font-medium text-xs",4,"ngIf"],[1,"mt-2","text-danger","font-medium","text-xs"],["for","scoreTrueFalse",1,"font-medium","mr-3"],["type","text","formControlName","scoreTrueFalse","id","scoreTrueFalse","appOnlyNumber","",1,"form-control","text-center",2,"width","90px",3,"decimal"],["for","scoreFill",1,"font-medium","mr-3"],["type","text","formControlName","scoreFill","id","scoreFill","appOnlyNumber","",1,"form-control","text-center",2,"width","90px",3,"decimal"],["for","azt_lang_sugg_type_essay",1,"font-medium","mr-3"],["type","text","formControlName","scoreEssay","id","azt_lang_sugg_type_essay","appOnlyNumber","",1,"form-control","text-center",2,"width","90px",3,"decimal"],[4,"ngIf"]],template:function(e,i){1&e&&t.YNc(0,yA,25,20,"div",0),2&e&&t.Q6J("ngIf",i.data)},dependencies:[D.O5,f._Y,f.Fj,f.JJ,f.JL,f.sg,f.u,qr.Y,oo.M,jt.JV],encapsulation:2}),n})();var Q0=function(n){return n.init="init",n.emptyAll="emptyAll",n.success="success",n}(Q0||{});let Nm=(()=>{class n{createItemAnswer(e,i,a){return new f.cw({answerType:new f.NI(i??1,{nonNullable:!0,validators:[f.kI.required]}),answer:new f.NI(this.getDefaultValueAnswerByPartType(i??1),{nonNullable:!0,validators:[f.kI.required]}),point:new f.NI(a,{nonNullable:!0,validators:[f.kI.required]}),isEssay:new f.NI(e,{nonNullable:!0})})}createItemAnswerWithValue(e,i,a,r,s){return new f.cw({answerType:new f.NI(i??1,{nonNullable:!0,validators:[f.kI.required]}),answer:new f.NI(r??"",{nonNullable:!0,validators:[f.kI.required,or._.noWhiteSpace,f.kI.maxLength(4)]}),point:new f.NI(a,{nonNullable:!0,validators:[f.kI.required]}),isEssay:new f.NI(e,{nonNullable:!0}),questionId:new f.NI(s,{nonNullable:!0})})}createExamPart(e,i,a,r){return new f.cw({examPartType:new f.NI(e,{nonNullable:!0,validators:[f.kI.required]}),scoreQuestion:new f.NI(a,{nonNullable:!0,validators:[f.kI.required,f.kI.min(1e-7)]}),totalQuestion:new f.NI(i,{nonNullable:!0,validators:[f.kI.required,f.kI.max(this.maxQuestion)]}),colTotalItem:new f.NI(Math.ceil(i/this.colAnswerList),{nonNullable:!0}),startLabelIndex:new f.NI(r,{nonNullable:!0,validators:[f.kI.required]}),emptyAnswer:new f.NI(this.typeEmptyAnswer.init,{nonNullable:!0}),answerList:this.createAnswerListByType(e,i,a)})}createAnswerListByType(e,i,a){const r=new f.Oe([]);let s=a/i;s=this.commonService.parseNumberFixed(s,this.toFixTotalPoint);for(let l=0;l<i;l++)r.push(this.createItemAnswer(!1,e,s));return r}getDefaultValueAnswerByPartType(e){return{[this.offlineAnswerType.fill]:"",[this.offlineAnswerType.multipleChoice]:"",[this.offlineAnswerType.essay]:this.essayAnswer,[this.offlineAnswerType.trueFalse]:this.defaultTrueFalse}[e]||""}convertAnswerByType(e,i){return e===this.offlineAnswerType.trueFalse?i.split("").map((a,r)=>"F"===a?"":this.answerChoiceMap[r]).join(""):i}convertAnswerTrueFalse(e){const i=e.split(",");return this.commonService.myClone(this.answerChoiceMap).map(s=>i.includes(s)?"T":"F").join("")}getAllExamPartTypeInExamCode(e){return e.value.map(a=>a.examPartType).join("")}initExamPartType(){this.examPartTypeList=[{id:1,index:0,key:"azt_lang_sugg_type_multiple_choice",desc:"Multiple-choice"},{id:5,index:1,key:"lang_testbank_true_false_quiz",desc:"True/false quiz"},{id:4,index:2,key:"lang_testbank_fill_number",desc:"Fill number"},{id:3,index:3,key:"azt_lang_sugg_type_essay",desc:"Essay"}]}constructor(e){this.commonService=e,this.colAnswerList=4,this.toFixTotalPoint=8,this.offlineAnswerType=Gf.X,this.essayAnswer="TL",this.defaultTrueFalse="UUUU",this.maxQuestion=120,this.typeEmptyAnswer=Q0,this.answerChoiceMap=["A","B","C","D"],this.answerTrueFalseMap=[{labelSubQuestion:"a",labelTrue:"T",labelFalse:"F"},{labelSubQuestion:"b",labelTrue:"T",labelFalse:"F"},{labelSubQuestion:"c",labelTrue:"T",labelFalse:"F"},{labelSubQuestion:"d",labelTrue:"T",labelFalse:"F"}],this.examPartTypeList=[],this.initExamPartType()}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(mi.z))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac}),n})();var Zm=M(74104),Ii=M(77988);let TA=(()=>{class n{constructor(e){this.commonService=e}transform(e){return this.commonService.parseNumberFixed(e,8)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(mi.z,16))},n.\u0275pipe=t.Yjl({name:"roundScoreQuestion",type:n,pure:!0}),n})(),kA=(()=>{class n{constructor(e){this.offlineExamPartService=e}transform(e){return this.offlineExamPartService.examPartTypeList.find(a=>a.id===e)?.key??""}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Nm,16))},n.\u0275pipe=t.Yjl({name:"getExamPartTypeById",type:n,pure:!0}),n})();function AA(n,o){1&n&&(t.TgZ(0,"div",25),t._UZ(1,"azt-loading-ui"),t.qZA())}function SA(n,o){if(1&n&&(t.TgZ(0,"div",9),t._uU(1),t.ALo(2,"roundScoreQuestion"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,e.controls.scoreQuestion.value/e.controls.totalQuestion.value),"")}}function OA(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",26)(1,"button",27),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().index,r=t.oxw(2);return t.KtG(r.removeOfflineExamPart(a))}),t.TgZ(2,"div",25),t._UZ(3,"lucide-icon",28),t.qZA()()()}if(2&n){const e=t.oxw().index,i=t.oxw(2);t.xp6(1),t.Q6J("disabled",0===e&&1===i.examCodeGroup.controls.offlineExamPart.controls.length)}}function EA(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",38),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw().index,l=t.oxw().index,c=t.oxw(2).$implicit,d=t.oxw(2);return t.KtG(d.chooseAnswerQuestion(c,s+l*c.controls.colTotalItem.value,r))}),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.BQk()}if(2&n){const e=o.$implicit,i=t.oxw().$implicit;t.xp6(1),t.Q6J("ngClass",i.value.answer==e?"btn-primary":""),t.xp6(1),t.hij(" ",t.lcZ(3,2,e)," ")}}function MA(n,o){if(1&n&&(t.TgZ(0,"div",33)(1,"div",34)(2,"div",35)(3,"div",36),t._uU(4),t.qZA()(),t.YNc(5,EA,4,4,"ng-container",37),t.qZA()()),2&n){const e=o.$implicit,i=o.index,a=t.oxw().index,r=t.oxw(2).$implicit,s=t.oxw(2);t.xp6(1),t.Q6J("formGroup",e),t.xp6(3),t.hij(" ",i+1+a*r.controls.colTotalItem.value+(s.form.controls.isResetLabelQuestionPart.value?0:r.controls.startLabelIndex.value)+" "," "),t.xp6(1),t.Q6J("ngForOf",s.offlineExamPartService.answerChoiceMap)}}function IA(n,o){if(1&n&&(t.TgZ(0,"div",31),t.YNc(1,MA,6,3,"div",32),t.qZA()),2&n){const e=o.index,i=t.oxw(2).$implicit;t.xp6(1),t.Q6J("ngForOf",i.controls.answerList.controls.slice(e*i.controls.colTotalItem.value,e*i.controls.colTotalItem.value+i.controls.colTotalItem.value))}}function LA(n,o){if(1&n&&(t.TgZ(0,"div",29),t.YNc(1,IA,2,1,"div",30),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",e.controls.answerList.controls.slice(0,e.controls.answerList.controls.length/e.controls.colTotalItem.value%1==0?e.controls.answerList.controls.length/e.controls.colTotalItem.value:e.controls.answerList.controls.length/e.controls.colTotalItem.value+1))}}function PA(n,o){if(1&n&&(t.TgZ(0,"div",41)(1,"div",42)(2,"div",43)(3,"div",44),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()(),t.TgZ(6,"button",45),t._uU(7),t.ALo(8,"mytranslate"),t.qZA()()()),2&n){const e=o.$implicit,i=o.index,a=t.oxw(2).$implicit,r=t.oxw(2);t.xp6(1),t.Q6J("formGroup",e),t.xp6(3),t.hij(" ",t.lcZ(5,3,"lang_auto_cau")+" "+(i+1+(r.form.controls.isResetLabelQuestionPart.value?0:a.controls.startLabelIndex.value))+" "," "),t.xp6(3),t.hij(" ",t.lcZ(8,5,"lang_offline_question_type_essay")," ")}}function NA(n,o){if(1&n&&(t.TgZ(0,"div",39),t.YNc(1,PA,9,7,"div",40),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",e.controls.answerList.controls)}}const Qy=function(n){return{"border-danger":n}};function ZA(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",41)(1,"div",42)(2,"div",43)(3,"div",44),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()(),t.TgZ(6,"input",46),t.NdJ("input",function(){t.CHM(e);const a=t.oxw(2),r=a.$implicit,s=a.index,l=t.oxw(2);return t.KtG(l.changeAnswerFill(r,s))}),t.qZA()()()}if(2&n){const e=o.$implicit,i=o.index,a=t.oxw(2).$implicit,r=t.oxw(2);t.xp6(1),t.Q6J("formGroup",e),t.xp6(3),t.hij(" ",t.lcZ(5,7,"lang_auto_cau")+" "+(i+1+(r.form.controls.isResetLabelQuestionPart.value?0:a.controls.startLabelIndex.value))+" "," "),t.xp6(2),t.Q6J("decimal",!0)("decimalSeparator",",")("maxLength",4)("allowNegatives",!0)("ngClass",t.VKq(9,Qy,e.controls.answer.errors))}}function DA(n,o){if(1&n&&(t.TgZ(0,"div",39),t.YNc(1,ZA,7,11,"div",40),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",e.controls.answerList.controls)}}const T6=function(n){return{"btn-primary":n}};function jA(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",52)(1,"span",53),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"button",54),t.NdJ("click",function(){const a=t.CHM(e),r=a.index,s=a.$implicit,l=t.oxw().index,c=t.oxw(2).$implicit,d=t.oxw(2);return t.KtG(d.chooseAnswerTrueFalse(c,l,r,s.labelTrue))}),t._uU(5),t.ALo(6,"mytranslate"),t.qZA(),t.TgZ(7,"button",55),t.NdJ("click",function(){const a=t.CHM(e),r=a.index,s=a.$implicit,l=t.oxw().index,c=t.oxw(2).$implicit,d=t.oxw(2);return t.KtG(d.chooseAnswerTrueFalse(c,l,r,s.labelFalse))}),t._uU(8),t.ALo(9,"mytranslate"),t.qZA()()}if(2&n){const e=o.$implicit,i=o.index,a=t.oxw().$implicit;t.xp6(2),t.Oqu(t.lcZ(3,5,e.labelSubQuestion)+")"),t.xp6(2),t.Q6J("ngClass",t.VKq(11,T6,a.controls.answer.value.split("")[i]===e.labelTrue)),t.xp6(1),t.hij(" ",t.lcZ(6,7,"lang_auto_dung")," "),t.xp6(2),t.Q6J("ngClass",t.VKq(13,T6,a.controls.answer.value.split("")[i]===e.labelFalse)),t.xp6(1),t.hij(" ",t.lcZ(9,9,"lang_auto_sai")," ")}}function qA(n,o){if(1&n&&(t.TgZ(0,"div",49)(1,"div",42)(2,"div",43)(3,"div",44),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()(),t.TgZ(6,"div",50),t.YNc(7,jA,10,15,"div",51),t.qZA()()()),2&n){const e=o.$implicit,i=o.index,a=t.oxw(2).$implicit,r=t.oxw(2);t.xp6(1),t.Q6J("formGroup",e),t.xp6(3),t.hij(" ",t.lcZ(5,3,"lang_auto_cau")+" "+(i+1+(r.form.controls.isResetLabelQuestionPart.value?0:a.controls.startLabelIndex.value))+" "," "),t.xp6(3),t.Q6J("ngForOf",r.offlineExamPartService.answerTrueFalseMap)}}function FA(n,o){if(1&n&&(t.TgZ(0,"div",47),t.YNc(1,qA,8,5,"div",48),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",e.controls.answerList.controls)}}function QA(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",6)(1,"form",1)(2,"div",7)(3,"div",8)(4,"div",9),t._uU(5),t.ALo(6,"mytranslate"),t.qZA(),t.TgZ(7,"div",10)(8,"span",11),t._uU(9),t.ALo(10,"mytranslate"),t.ALo(11,"getExamPartTypeById"),t.qZA()()(),t.TgZ(12,"div",12)(13,"div",9),t._uU(14),t.ALo(15,"mytranslate"),t.qZA(),t.TgZ(16,"div",13)(17,"input",14),t.NdJ("selectionChange",function(){const r=t.CHM(e).$implicit,s=t.oxw(2);return t.KtG(s.changeExamPartType(r,r.controls.examPartType.value))})("input",function(){const a=t.CHM(e),r=a.$implicit,s=a.index,l=t.oxw(2);return t.KtG(l.changeTotalQuestionInExamPart(r,s))}),t.qZA()()(),t.TgZ(18,"div",12)(19,"div",9),t._uU(20),t.ALo(21,"mytranslate"),t.qZA(),t.TgZ(22,"div",13)(23,"input",15),t.NdJ("input",function(){const r=t.CHM(e).$implicit,s=t.oxw(2);return t.KtG(s.changeScoreQuestionInExamPart(r))}),t.qZA()()(),t.TgZ(24,"div",16)(25,"div",17),t._uU(26),t.ALo(27,"mytranslate"),t.qZA(),t.YNc(28,AA,2,0,"div",18),t.YNc(29,SA,3,3,"ng-template",null,19,t.W1O),t.qZA(),t.YNc(31,OA,4,1,"div",20),t.qZA(),t.TgZ(32,"div",21),t.YNc(33,LA,2,1,"div",22),t.YNc(34,NA,2,1,"div",23),t.YNc(35,DA,2,1,"div",23),t.YNc(36,FA,2,1,"div",24),t.qZA()()()}if(2&n){const e=o.$implicit,i=t.MAs(30),a=t.oxw(2);t.xp6(1),t.Q6J("formGroup",e),t.xp6(4),t.hij(" ",t.lcZ(6,17,"azt_lang_sugg_part_cc")," "),t.xp6(4),t.hij(" ",t.lcZ(10,19,t.lcZ(11,21,e.controls.examPartType.value))," "),t.xp6(5),t.hij(" ",t.lcZ(15,23,"lang_auto_so_luong_cau_hoi")," "),t.xp6(3),t.Q6J("max",120)("ngClass",t.VKq(29,Qy,e.controls.totalQuestion.errors)),t.xp6(3),t.hij(" ",t.lcZ(21,25,"lang_auto_tong_diem")," "),t.xp6(3),t.Q6J("decimal",!0)("ngClass",t.VKq(31,Qy,e.controls.scoreQuestion.errors||e.controls.scoreQuestion.value>=10&&e.controls.examPartType.value===a.offlineAnswerType.essay)),t.xp6(3),t.hij("",t.lcZ(27,27,"lang_testbank_points_per_question")+": "," "),t.xp6(2),t.Q6J("ngIf",e.controls.totalQuestion.errors||e.controls.scoreQuestion.errors)("ngIfElse",i),t.xp6(3),t.Q6J("ngIf",a.type===a.typeScreenCreateOfflineExam.create||a.type===a.typeScreenCreateOfflineExam.excel||!a.examCodeGroup.controls.isUpdate.value),t.xp6(2),t.Q6J("ngIf",e.controls.examPartType.value===a.offlineAnswerType.multipleChoice),t.xp6(1),t.Q6J("ngIf",e.controls.examPartType.value===a.offlineAnswerType.essay),t.xp6(1),t.Q6J("ngIf",e.controls.examPartType.value===a.offlineAnswerType.fill),t.xp6(1),t.Q6J("ngIf",e.controls.examPartType.value===a.offlineAnswerType.trueFalse)}}function RA(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"button",63),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw(3);return t.KtG(s.addOfflineExamPart(s.examCodeGroup.controls.offlineExamPart.controls.length-1,r.id))}),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()}if(2&n){const e=o.$implicit,i=t.oxw(3);t.xp6(1),t.Q6J("disabled",i.examCodeGroup.controls.examPartTypeExists.value.includes(e.id.toString())),t.xp6(1),t.hij(" ",t.lcZ(3,2,e.key)," ")}}function UA(n,o){if(1&n&&(t.TgZ(0,"div",56)(1,"button",57)(2,"div",58),t._UZ(3,"lucide-icon",59),t.qZA(),t._uU(4),t.ALo(5,"mytranslate"),t.qZA(),t.TgZ(6,"mat-menu",null,60)(8,"div",61)(9,"ul",62),t.YNc(10,RA,4,4,"li",37),t.qZA()()()()),2&n){const e=t.MAs(7),i=t.oxw(2);t.xp6(1),t.Q6J("matMenuTriggerFor",e)("disabled",4===i.examCodeGroup.controls.offlineExamPart.controls.length),t.xp6(3),t.hij(" ",t.lcZ(5,4,"lang_testbank_add_section")," "),t.xp6(6),t.Q6J("ngForOf",i.offlineExamPartService.examPartTypeList)}}function BA(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"form",1)(2,"div",2)(3,"form",1)(4,"div",3),t.YNc(5,QA,37,33,"div",4),t.YNc(6,UA,11,6,"div",5),t.qZA()()()(),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("formGroup",e.form),t.xp6(2),t.Q6J("formGroup",e.examCodeGroup),t.xp6(2),t.Q6J("ngForOf",e.examCodeGroup.controls.offlineExamPart.controls),t.xp6(1),t.Q6J("ngIf",e.type===e.typeScreenCreateOfflineExam.create||e.type===e.typeScreenCreateOfflineExam.excel)}}let zA=(()=>{class n extends St.Q{chooseAnswerQuestion(e,i,a){e.controls.answerList.controls[i].controls.answer.setValue(a),this.getEmptyAnswerExamCode(e),this.setInfoFinalExamCode()}chooseAnswerTrueFalse(e,i,a,r){const s=e.controls.answerList.controls[i];let l=s.controls.answer.value.split("");l[a]||(l=["U","U","U","U"]),l[a]=r;const c=l.join("");s.controls.answer.setValue(c),this.setInfoFinalExamCode(),this.getEmptyAnswerExamCode(e)}changeAnswerFill(e,i){this.getEmptyAnswerExamCode(e)}changeTotalQuestionInExamPart(e,i){const a=Number(e.controls.totalQuestion.value);if(!a)return this.showErrorSnack("lang_core_total_too_small");if(a>this.offlineExamPartService.maxQuestion)return this.showErrorSnack("lang_core_exam_exceed_max_questions");const r=Number(e.controls.scoreQuestion.value),s=e.controls.examPartType.value;e.controls.colTotalItem.patchValue(Math.ceil(a/this.offlineExamPartService.colAnswerList)),e.setControl("answerList",this.offlineExamPartService.createAnswerListByType(s,a,r)),this.infoCodeExamLast&&(e.controls.answerList.controls.forEach((l,c)=>{l.controls.answer.patchValue((s===this.offlineAnswerType.essay?this.offlineExamPartService.essayAnswer:this.infoCodeExamLast?.offlineExamPart?.[i].answerList?.[c]?.answer)??"")}),this.updateStartIndexLabelExamPart(),this.getEmptyAnswerExamCode(e))}changeScoreQuestionInExamPart(e){if(e.controls.scoreQuestion.errors)return this.showErrorSnack("lang_testbank_please_enter_score_greater_than_0");if(e.controls.scoreQuestion.value>=10&&e.controls.examPartType.value===this.offlineAnswerType.essay)return this.showErrorSnack("lang_core_vui_long_nhap_diem_tu_luan_nho_hon_10");let i=Number(e.controls.scoreQuestion.value)/Number(e.controls.totalQuestion.value);i=this.commonService.parseNumberFixed(i,this.offlineExamPartService.toFixTotalPoint),e.controls.answerList.controls.map(a=>a.controls.point.patchValue(i,{emitEvent:!1})),this.setInfoFinalExamCode()}changeExamPartType(e,i){e.patchValue({answerList:e.controls.answerList.value.map(a=>({answerType:i,answer:this.offlineExamPartService.getDefaultValueAnswerByPartType(i)}))}),this.setInfoFinalExamCode()}removeOfflineExamPart(e){this.examCodeGroup.controls.offlineExamPart.removeAt(e),this.examCodeGroup.controls.examPartTypeExists.setValue(this.offlineExamPartService.getAllExamPartTypeInExamCode(this.examCodeGroup.controls.offlineExamPart)),this.updateStartIndexLabelExamPart(),this.setInfoFinalExamCode()}addOfflineExamPart(e,i){this.examCodeGroup.controls.offlineExamPart.push(this.offlineExamPartService.createExamPart(i,8,8,this.examCodeGroup.controls.offlineExamPart.controls[e].controls.totalQuestion.value??0)),this.examCodeGroup.controls.examPartTypeExists.setValue(this.offlineExamPartService.getAllExamPartTypeInExamCode(this.examCodeGroup.controls.offlineExamPart)),this.sortExamPart(),this.updateStartIndexLabelExamPart(),this.getEmptyAnswerExamCode(this.examCodeGroup.controls.offlineExamPart.controls[e]),this.setInfoFinalExamCode()}setInfoFinalExamCode(){this.infoCodeExamLast=this.examCodeGroup.getRawValue(),this.sendInfoFinalExamCode.emit(this.infoCodeExamLast)}updateStartIndexLabelExamPart(){this.examCodeGroup.controls.offlineExamPart.controls.forEach((e,i)=>{const a=this.examCodeGroup.controls.offlineExamPart.controls[i-1]?Number(this.examCodeGroup.controls.offlineExamPart.controls[i-1].controls.startLabelIndex.value)+Number(this.examCodeGroup.controls.offlineExamPart.controls[i-1].controls.totalQuestion.value):0;e.controls.startLabelIndex.setValue(a)})}getEmptyAnswerExamCode(e){let a=[];if(e.controls.answerList.controls.forEach((r,s)=>{if(""===r.controls.answer.value||r.controls.answer.value.includes("U")||r.controls.answer.errors){const l=this.form.controls.isResetLabelQuestionPart.value?s+1:s+1+Number(e.controls.startLabelIndex.value);a.push(l)}}),0===a.length)e.controls.emptyAnswer.setValue(this.typeEmptyAnswer.success);else{let r=a.join(", ");e.controls.emptyAnswer.setValue(r)}}disableControlInExamPart(e){e.controls.totalQuestion.disable(),e.controls.examPartType.disable()}getIndexByExamPartType(e){return{[this.offlineAnswerType.multipleChoice]:0,[this.offlineAnswerType.trueFalse]:1,[this.offlineAnswerType.fill]:2,[this.offlineAnswerType.essay]:3}[e]||0}sortExamPart(){const e=this.examCodeGroup.controls.offlineExamPart;e.setValue(e.getRawValue().sort((i,a)=>this.getIndexByExamPartType(i.examPartType)-this.getIndexByExamPartType(a.examPartType)))}constructor(e){super(),this.offlineExamPartService=e,this.type=cs.create,this.sendInfoFinalExamCode=new t.vpe,this.examPartTypeList=[],this.offlineAnswerType=Gf.X,this.typeEmptyAnswer=Q0,this.typeScreenCreateOfflineExam=cs}ngOnInit(){super.ngOnInit(),this.updateStartIndexLabelExamPart(),this.examCodeGroup.controls.offlineExamPart.controls.forEach(e=>{this.getEmptyAnswerExamCode(e),(this.type===this.typeScreenCreateOfflineExam.updateExam||this.type===this.typeScreenCreateOfflineExam.updateExamCode)&&this.examCodeGroup.controls.isUpdate.value&&this.disableControlInExamPart(e)}),this.setInfoFinalExamCode()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Nm))},n.\u0275cmp=t.Xpm({type:n,selectors:[["offline-exam-part"]],inputs:{form:"form",examCodeGroup:"examCodeGroup",type:"type"},outputs:{sendInfoFinalExamCode:"sendInfoFinalExamCode"},features:[t._Bn([Nm]),t.qOj],decls:1,vars:1,consts:[[4,"ngIf"],[3,"formGroup"],["formArrayName","examCodeList"],["formArrayName","offlineExamPart"],["class","p-3",4,"ngFor","ngForOf"],["class","p-3 mt-5",4,"ngIf"],[1,"p-3"],[1,"box","p-3","border","border-slate-200","dark:border-darkmode-400","flex","flex-col","md:flex-row","md:items-center"],[1,"flex","items-center","mr-5"],[1,"font-medium"],[1,"ml-1"],[1,"font-medium",2,"text-transform","lowercase"],[1,"flex","items-center","mr-5","mt-3","md:mt-0"],[1,"ml-2"],["type","text","appOnlyNumber","","formControlName","totalQuestion",1,"form-control","form-control-sm",2,"width","4rem","text-align","center",3,"max","ngClass","selectionChange","input"],["type","text","formControlName","scoreQuestion","appOnlyNumber","",1,"form-control","form-control-sm",2,"width","4rem","text-align","center",3,"decimal","ngClass","input"],[1,"flex","items-center","mt-5","md:mt-0"],[1,"font-medium","mr-2"],["class","w-4 h-4",4,"ngIf","ngIfElse"],["noErrors",""],["class","ml-auto",4,"ngIf"],[1,"mt-3","mb-6"],["class","grid grid-cols-12",4,"ngIf"],["class","grid grid-cols-12 gap-5",4,"ngIf"],["class","grid grid-cols-10 gap-5",4,"ngIf"],[1,"w-4","h-4"],[1,"ml-auto"],[1,"btn","btn-outline-danger","btn-transparent",3,"disabled","click"],["name","x"],[1,"grid","grid-cols-12"],["class","col-span-12 lg:col-span-3","formArrayName","answerList",4,"ngFor","ngForOf"],["formArrayName","answerList",1,"col-span-12","lg:col-span-3"],["class","app-item mt-2",4,"ngFor","ngForOf"],[1,"app-item","mt-2"],[1,"answer-item","flex","items-center","mb-6","mt-1",3,"formGroup"],[1,"flex","items-center"],[1,"block-title","font-medium","w-6","mr-2"],[4,"ngFor","ngForOf"],["azt-track-service","create-manual-offline-exam-zhsV08DEqon",1,"btn","rounded-full","mr-2",2,"height","35px","line-height","35px","font-weight","400",3,"ngClass","click"],[1,"grid","grid-cols-12","gap-5"],["class","col-span-6 md:col-span-3 lg:col-span-2",4,"ngFor","ngForOf"],[1,"col-span-6","md:col-span-3","lg:col-span-2"],[1,"answer-item",3,"formGroup"],[1,"flex","items-center","mb-2"],[1,"block-title","font-medium","mr-2"],[1,"btn","rounded-md","mr-2","btn-outline-primary",2,"height","35px","line-height","35px","font-weight","400","width","100px"],["type","text","appOnlyNumber","","formControlName","answer","placeholder","...",1,"form-control","form-control-sm","text-center",2,"height","35px","width","100px",3,"decimal","decimalSeparator","maxLength","allowNegatives","ngClass","input"],[1,"grid","grid-cols-10","gap-5"],["class","col-span-12 sm:col-span-5 lg:col-span-2",4,"ngFor","ngForOf"],[1,"col-span-12","sm:col-span-5","lg:col-span-2"],[1,"mt-0"],["class","flex items-center mt-3",4,"ngFor","ngForOf"],[1,"flex","items-center","mt-3"],[1,"font-medium","mr-3"],[1,"btn","rounded-md","mr-3",2,"height","35px","line-height","35px","width","50px","font-weight","400",3,"ngClass","click"],[1,"btn","rounded-md",2,"height","35px","line-height","35px","width","50px","font-weight","400",3,"ngClass","click"],[1,"p-3","mt-5"],[1,"btn","btn-sm","btn-primary-soft",3,"matMenuTriggerFor","disabled"],[1,"w-4","h-4","mr-2"],["name","plus"],["menuAddExamPart","matMenu"],[1,"dropdown-menu","show","relative","w-64"],[1,"dropdown-content"],[1,"dropdown-item","font-medium","cursor-pointer","w-full",3,"disabled","click"]],template:function(e,i){1&e&&t.YNc(0,BA,7,4,"ng-container",0),2&e&&t.Q6J("ngIf",i.examCodeGroup)},dependencies:[D.mk,D.sg,D.O5,Ii.VK,Ii.p6,f._Y,f.Fj,f.JJ,f.JL,f.sg,f.u,f.CE,qr.Y,oo.M,oi.n,C.Nh5,jt.JV,TA,kA],encapsulation:2}),n})();function JA(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"azt_lang_sugg_type_multiple_choice")+": "," "))}function HA(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_true_false_quiz")+": "," "))}function GA(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_fill_number")+": "," "))}function $A(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"azt_lang_sugg_type_essay")+": "," "))}function YA(n,o){1&n&&(t.TgZ(0,"div",9),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_core_vui_long_nhap_dau_du_dap_an_cau_hoi")," "))}function KA(n,o){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.ALo(3,"mytranslate"),t.qZA()),2&n){const e=t.oxw(3).$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_core_nhap_thieu_dap_an_tu_cau")+" "+e.emptyAnswer.split(", ")[0]+" "+t.lcZ(3,3,"lang_core_den_cau")+" "+e.emptyAnswer.split(", ")[e.emptyAnswer.split(", ").length-1]," ")}}function WA(n,o){if(1&n&&(t._uU(0),t.ALo(1,"mytranslate")),2&n){const e=t.oxw(3).$implicit;t.hij(" ",t.lcZ(1,1,"lang_core_nhung_cau_chua_nhap_dap_an")+": "+e.emptyAnswer," ")}}function VA(n,o){if(1&n&&(t.TgZ(0,"div",9),t.YNc(1,KA,4,5,"span",10),t.YNc(2,WA,2,3,"ng-template",null,11,t.W1O),t.qZA()),2&n){const e=t.MAs(3),i=t.oxw(2).$implicit;t.xp6(1),t.Q6J("ngIf",i.emptyAnswer.split(", ").length>10)("ngIfElse",e)}}function XA(n,o){if(1&n&&(t.TgZ(0,"div",5)(1,"div",6),t._uU(2),t.ALo(3,"mytranslate"),t.YNc(4,JA,3,3,"span",7),t.YNc(5,HA,3,3,"span",7),t.YNc(6,GA,3,3,"span",7),t.YNc(7,$A,3,3,"span",7),t.qZA(),t.YNc(8,YA,3,3,"div",8),t.YNc(9,VA,4,2,"div",8),t.qZA()),2&n){const e=t.oxw().$implicit,i=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,7,"azt_lang_sugg_part_cc")+" "," "),t.xp6(2),t.Q6J("ngIf",e.examPartType===i.offlineAnswerType.multipleChoice),t.xp6(1),t.Q6J("ngIf",e.examPartType===i.offlineAnswerType.trueFalse),t.xp6(1),t.Q6J("ngIf",e.examPartType===i.offlineAnswerType.fill),t.xp6(1),t.Q6J("ngIf",e.examPartType===i.offlineAnswerType.essay),t.xp6(1),t.Q6J("ngIf",e.emptyAnswer===i.typeEmptyAnswer.emptyAll),t.xp6(1),t.Q6J("ngIf",e.emptyAnswer&&e.emptyAnswer!==i.typeEmptyAnswer.emptyAll&&e.emptyAnswer!==i.typeEmptyAnswer.success)}}function tS(n,o){if(1&n&&(t.ynx(0),t.YNc(1,XA,10,9,"div",4),t.BQk()),2&n){const e=o.$implicit,i=t.oxw();t.xp6(1),t.Q6J("ngIf",e.emptyAnswer!==i.typeEmptyAnswer.init&&e.emptyAnswer!==i.typeEmptyAnswer.success)}}let eS=(()=>{class n extends St.Q{constructor(){super(...arguments),this.offlineAnswerType=Gf.X,this.typeEmptyAnswer=Q0}}return n.\u0275fac=function(){let o;return function(i){return(o||(o=t.n5z(n)))(i||n)}}(),n.\u0275cmp=t.Xpm({type:n,selectors:[["error-exam-code"]],inputs:{form:"form",examCodeGroup:"examCodeGroup"},features:[t.qOj],decls:5,vars:3,consts:[[3,"formGroup"],["formArrayName","examCodeList"],[1,"error-exam-code"],[4,"ngFor","ngForOf"],["class","flex items-center mt-2",4,"ngIf"],[1,"flex","items-center","mt-2"],[1,"font-medium","text-xs","mr-2"],[4,"ngIf"],["class","text-xs font-medium text-danger",4,"ngIf"],[1,"text-xs","font-medium","text-danger"],[4,"ngIf","ngIfElse"],["showIndexQuestion",""]],template:function(e,i){1&e&&(t.TgZ(0,"form",0)(1,"div",1)(2,"form",0)(3,"div",2),t.YNc(4,tS,2,1,"ng-container",3),t.qZA()()()()),2&e&&(t.Q6J("formGroup",i.form),t.xp6(2),t.Q6J("formGroup",i.examCodeGroup),t.xp6(2),t.Q6J("ngForOf",i.examCodeGroup.controls.offlineExamPart.getRawValue()))},dependencies:[D.sg,D.O5,f._Y,f.JL,f.sg,f.CE,jt.JV],encapsulation:2}),n})();function nS(n,o){1&n&&(t.TgZ(0,"div",28)(1,"span"),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&n&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"lang_auto_vui_long_nhap_ten_de_thi")))}function iS(n,o){1&n&&(t.ynx(0),t.TgZ(1,"div",29)(2,"span",30),t._UZ(3,"azt-loading-ui"),t.qZA()(),t.BQk())}function oS(n,o){if(1&n&&(t.TgZ(0,"div",31),t._UZ(1,"config-level-subject",32),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("form",e.form)("schoolLevelObjs",e.schoolLevelObjs)}}const aS=function(n){return{"text-danger":n}};function rS(n,o){if(1&n&&(t.TgZ(0,"span",36),t.ALo(1,"numberFloat"),t._uU(2),t.ALo(3,"formatOfflineExamHashIdToNumber"),t.ALo(4,"mytranslate"),t.qZA()),2&n){const e=t.oxw(),i=e.$implicit,a=e.index,r=t.oxw(2);t.Q6J("ngClass",t.VKq(8,aS,(i.invalid||i.controls.checkDuplicateError.value&&null!=i.controls.examCode.value&&r.codeExamDuplicateList.includes(t.lcZ(1,2,i.controls.examCode.value.toString())))&&r.selected.value!==a)),t.xp6(2),t.hij(" ",null!=i.controls.examCode.value?t.lcZ(3,4,i.controls.examCode.value):t.lcZ(4,6,"lang_core_chua_nhap_ma_de")," ")}}function sS(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"input",50),t.NdJ("input",function(){t.CHM(e);const a=t.oxw(2).$implicit,r=t.oxw(2);return t.KtG(r.checkDuplicateCode(a))}),t.ALo(1,"mytranslate"),t.qZA()}2&n&&(t.s9C("placeholder",t.lcZ(1,2,"lang_auto_nhap_ma_de")+"..."),t.Q6J("maxlength",3))}function lS(n,o){if(1&n&&(t.TgZ(0,"span",51),t._uU(1),t.ALo(2,"formatOfflineExamHashIdToNumber"),t.qZA()),2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,e.controls.examCode.value)," ")}}function cS(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_vui_long_nhap_ma_de")," "))}function uS(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.ALo(3,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.AsE(" ",t.lcZ(2,2,"lang_auto_ma_de_phai_la_so_tu_1"),"",t.lcZ(3,4,"lang_auto_-999_va_toi_da_3_ky_tu")," "))}function dS(n,o){if(1&n&&(t.TgZ(0,"div",28),t.YNc(1,cS,3,3,"span",52),t.YNc(2,uS,4,6,"span",52),t.qZA()),2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.Q6J("ngIf",e.controls.examCode.errors.required),t.xp6(1),t.Q6J("ngIf",e.controls.examCode.errors.min||e.controls.examCode.errors.max||e.controls.examCode.errors.maxlength)}}function mS(n,o){1&n&&(t.TgZ(0,"div",28)(1,"span"),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"lang_auto_vui_long_khong_nhap_trung_ma_de")," "))}function hS(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",43)(1,"button",53),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2).index,r=t.oxw(2);return t.KtG(r.removeItemCodeExam(a))}),t.TgZ(2,"span",23),t._UZ(3,"lucide-icon",54),t.qZA()()()}if(2&n){const e=t.oxw(2).index,i=t.oxw(2);t.xp6(1),t.Q6J("disabled",0===e&&1===i.form.controls.examCodeList.controls.length)}}function pS(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",37)(1,"div",38),t._UZ(2,"error-exam-code",39),t.qZA(),t.TgZ(3,"div",40)(4,"div",41)(5,"div",42)(6,"h3",43)(7,"span",44),t._uU(8),t.ALo(9,"mytranslate"),t.qZA(),t.YNc(10,sS,2,4,"input",45),t.YNc(11,lS,3,3,"ng-template",null,46,t.W1O),t.qZA(),t.YNc(13,dS,3,2,"div",12),t.YNc(14,mS,4,3,"div",12),t.ALo(15,"numberFloat"),t.qZA(),t.YNc(16,hS,4,1,"div",47),t.qZA(),t.TgZ(17,"div",48)(18,"offline-exam-part",49),t.NdJ("sendInfoFinalExamCode",function(a){t.CHM(e);const r=t.oxw(3);return t.KtG(r.setInfoFinalExamCode(a))}),t.qZA()()()()}if(2&n){const e=t.MAs(12),i=t.oxw().$implicit,a=t.oxw(2);t.Q6J("formGroup",i),t.xp6(2),t.Q6J("form",a.form)("examCodeGroup",i),t.xp6(6),t.hij(" ",t.lcZ(9,12,"lang_auto_ma_de")," "),t.xp6(2),t.Q6J("ngIf",a.type===a.typeScreenCreateOfflineExam.create||a.type===a.typeScreenCreateOfflineExam.excel||!i.controls.isUpdate.value)("ngIfElse",e),t.xp6(3),t.Q6J("ngIf",i.controls.examCode.errors&&(i.controls.examCode.touched||i.controls.examCode.dirty)),t.xp6(1),t.Q6J("ngIf",i.controls.checkDuplicateError.value&&null!=i.controls.examCode.value&&a.codeExamDuplicateList.includes(t.lcZ(15,14,i.controls.examCode.value.toString()))),t.xp6(2),t.Q6J("ngIf",a.type===a.typeScreenCreateOfflineExam.create||a.type===a.typeScreenCreateOfflineExam.excel||!i.controls.isUpdate.value),t.xp6(2),t.Q6J("form",a.form)("examCodeGroup",i)("type",a.type)}}function _S(n,o){if(1&n&&(t.TgZ(0,"mat-tab",33),t.YNc(1,rS,5,10,"ng-template",34),t.YNc(2,pS,19,16,"div",35),t.qZA()),2&n){const e=o.index,i=t.oxw(2);t.xp6(2),t.Q6J("ngIf",i.selected.value===e)}}function fS(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",7)(2,"div",8)(3,"div",9)(4,"label",10),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()(),t.TgZ(7,"div",9),t._UZ(8,"input",11),t.ALo(9,"mytranslate"),t.YNc(10,nS,4,3,"div",12),t.qZA()(),t.YNc(11,iS,4,0,"ng-container",2),t.YNc(12,oS,2,2,"ng-template",null,13,t.W1O),t.TgZ(14,"div",14)(15,"div",15),t._UZ(16,"input",16),t.qZA(),t.TgZ(17,"label",17),t._uU(18),t.ALo(19,"mytranslate"),t.qZA()(),t.TgZ(20,"div",14)(21,"button",18),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.openQuickScoreDialog())}),t._uU(22),t.ALo(23,"mytranslate"),t.qZA()(),t.TgZ(24,"div",19)(25,"div",20),t._uU(26),t.ALo(27,"mytranslate"),t.qZA(),t.TgZ(28,"div",21)(29,"button",22),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.addItemExamCode())}),t.TgZ(30,"span",23),t._UZ(31,"lucide-icon",24),t.qZA(),t.TgZ(32,"span",25),t._uU(33),t.ALo(34,"mytranslate"),t.qZA()()()(),t.TgZ(35,"mat-tab-group",26),t.NdJ("selectedIndexChange",function(a){t.CHM(e);const r=t.oxw();return t.KtG(r.selected.setValue(a))}),t.YNc(36,_S,3,1,"mat-tab",27),t.qZA()(),t.BQk()}if(2&n){const e=t.MAs(13),i=t.oxw();t.xp6(5),t.hij(" ",t.lcZ(6,11,"lang_auto_ten_de")," "),t.xp6(3),t.s9C("placeholder",t.lcZ(9,13,"lang_auto_nhap_ten_de")+" ..."),t.xp6(2),t.Q6J("ngIf",i.form.controls.examName.errors&&(i.form.controls.examName.dirty||i.form.controls.examName.touched)),t.xp6(1),t.Q6J("ngIf",i.loadingSubjectLevel)("ngIfElse",e),t.xp6(7),t.hij(" ",t.lcZ(19,15,"lang_testbank_sections_starting_from_question_1")," "),t.xp6(4),t.hij(" ",t.lcZ(23,17,"lang_testbank_quick_score_distribution")," "),t.xp6(4),t.hij(" ",t.lcZ(27,19,"lang_core_danh_sach_ma_de")," "),t.xp6(7),t.Oqu(t.lcZ(34,21,"lang_auto_them_ma_de")),t.xp6(2),t.Q6J("selectedIndex",i.selected.value),t.xp6(1),t.Q6J("ngForOf",i.form.controls.examCodeList.controls)}}function gS(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"div",56)(2,"h3",43)(3,"span",44),t._uU(4),t.ALo(5,"mytranslate"),t.qZA(),t.TgZ(6,"span",51),t._uU(7),t.ALo(8,"formatOfflineExamHashIdToNumber"),t.qZA()()(),t.TgZ(9,"div",56)(10,"div",48)(11,"offline-exam-part",49),t.NdJ("sendInfoFinalExamCode",function(a){t.CHM(e);const r=t.oxw(2);return t.KtG(r.setInfoFinalExamCode(a))}),t.qZA()()()()}if(2&n){const e=o.$implicit,i=t.oxw(2);t.xp6(4),t.hij(" ",t.lcZ(5,5,"lang_auto_ma_de")," "),t.xp6(3),t.hij(" ",t.lcZ(8,7,e.controls.examCode.value)," "),t.xp6(4),t.Q6J("form",i.form)("examCodeGroup",e)("type",i.type)}}function xS(n,o){if(1&n&&t.YNc(0,gS,12,9,"div",55),2&n){const e=t.oxw();t.Q6J("ngForOf",e.form.controls.examCodeList.controls)}}const bS=function(n,o){return{"mt-3":n,"mt-10":o}};let R0=(()=>{class n extends St.Q{setInfoFinalExamCode(e){this.infoFinalExamCode=e}checkDuplicateCode(e){let a=this.form.controls.examCodeList.controls.map(s=>Number(s.controls.examCode.value)?Number(s.controls.examCode.value):void 0);a=a.filter(s=>void 0!==s);let r=a.some((s,l)=>a.indexOf(s)!=l);this.codeExamDuplicateList=a.filter((s,l)=>a.indexOf(s)!==l),e.controls.checkDuplicateError.setValue(r)}addItemExamCode(){const e=this.form.controls.examCodeList;e.push(this.createItemCodeExam());const r=e.controls[e.controls.length-1];this.infoFinalExamCode?.offlineExamPart?.length&&(this.infoFinalExamCode.offlineExamPart.forEach(s=>{r.controls.offlineExamPart.push(this.offlineExamPartService.createExamPart(s.examPartType??this.offlineAnswerType.multipleChoice,s.totalQuestion??10,s.scoreQuestion??10,s.startLabelIndex??0))}),this.selected.setValue(e.controls.length-1))}resetCreateExam(){let e=Number(this.commonService.getMyParam(this.activeRoute,"cat_id"))??0;this.confirmDialog("lang_auto_msg_close_confirm_dialog_title","lang_auto_msg_close_confirm_dialog_desc","480px",()=>{const i=this.commonService.getMyQueryParam("backto")??`/admin/testbank/create-new-document/${e}`;this.myNavigation(i)})}removeItemCodeExam(e){const i=this.form.controls.examCodeList;let a=i.controls[e],r=`${this.commonService.myTranslateInstant("lang_auto_ban_co_chac_chan_muon_so_ma_de")} <b>${a.controls.examCode.value??""}</b>`;this.sAztDialogService.open(uA.s,{data:{content:r},restoreFocus:!1,width:"500px"}).afterClosed().subscribe(l=>{l&&(i.removeAt(e),this.oldAnswerList.splice(e,1),this.showSuccessSnack("lang_auto_xoa_ma_de_thanh_cong"))})}confirmDialog(e,i,a,r){this.sAztDialogService.open(cp,{width:a,data:{title:e,msg:i},restoreFocus:!1}).afterClosed().subscribe(l=>{l&&r()})}handleSaveQuestionAndExam(){if(this.form.invalid)return this.showErrorSnack("lang_auto_vui_long_nhap_day_du_thong_tin"),void this.form.markAllAsTouched();let e=this.processDataQuestion();this.handleSaveData.emit(e)}openQuickScoreDialog(){if(this.type===cs.create){let i=new f.Oe([]);this.form.controls.examCodeList.controls.forEach(a=>{i.controls.length<a.controls.offlineExamPart.controls.length&&(i=a.controls.offlineExamPart)}),this.setDefaultQuickScore(i)}this.sAztDialogService.open(wA,{width:"500px",data:this.quickScore}).afterClosed().subscribe(i=>{i&&(this.quickScore={...i},this.fillScoreExamPart(this.quickScore))})}fillScoreExamPart(e){this.form.controls.examCodeList.controls.forEach(i=>{i.controls.offlineExamPart.controls.forEach(a=>{switch(a.controls.examPartType.value){case this.offlineAnswerType.multipleChoice:a.controls.scoreQuestion.setValue(e.scoreMultipleChoice);break;case this.offlineAnswerType.trueFalse:a.controls.scoreQuestion.setValue(e.scoreTrueFalse);break;case this.offlineAnswerType.fill:a.controls.scoreQuestion.setValue(e.scoreFill);break;case this.offlineAnswerType.essay:a.controls.scoreQuestion.setValue(e.scoreEssay)}let r=Number(a.controls.scoreQuestion.value)/Number(a.controls.totalQuestion.value);r=this.commonService.parseNumberFixed(r,this.offlineExamPartService.toFixTotalPoint),a.controls.answerList.controls.forEach(s=>{s.controls.point.setValue(r,{emitEvent:!1})})})})}initCodeExam(){const e=this.form.controls.examCodeList;e.push(this.createItemCodeExam()),e.controls[0].controls.offlineExamPart.push(this.offlineExamPartService.createExamPart(this.offlineAnswerType.multipleChoice,8,8,0)),this.selected.setValue(0),this.form.updateValueAndValidity()}createItemCodeExam(){return new f.cw({examCode:new f.NI(void 0,{nonNullable:!0,validators:[f.kI.required,f.kI.min(1),f.kI.max(999),f.kI.maxLength(3),or._.noWhiteSpace]}),examPartTypeExists:new f.NI(`${this.offlineAnswerType.multipleChoice}`,{nonNullable:!0}),checkDuplicateError:new f.NI(!1,{nonNullable:!0}),offlineExamPart:new f.Oe([]),isUpdate:new f.NI(!1,{nonNullable:!0})})}processDataQuestion(){return this.form.controls.examCodeList.controls.map(i=>{const a=[],r=[];return i.controls.offlineExamPart.controls.forEach(s=>{const l={answerType:Number(s.controls.examPartType.value),totalQuestion:Number(s.controls.totalQuestion.value),totalMark:Number(s.controls.scoreQuestion.value)};r.push(l),s.controls.answerList.controls.forEach(c=>{const d={answerType:c.controls.answerType.value,questionId:c?.controls?.questionId?.value,answer:this.offlineExamPartService.convertAnswerByType(c.controls.answerType.value,c.controls.answer.value),scorePerQuestion:Number(c.controls.point.value),isEssay:c.controls.answer.value===this.offlineExamPartService.essayAnswer};a.push(d)})}),{offlineMixQuestionHashId:Number(i.controls.examCode.value),offlineQuestionObjs:a,isUpdate:i?.controls?.isUpdate?.value,offlineMixQuestionId:i?.controls?.offlineMixQuestionId?.value,examPart:{parts:r}}})}processDataExamOffline(){if(!this.dataExamOffline)return;const e=this.form.controls.examCodeList;let i=new f.Oe([]);this.dataExamOffline.updateOfflineMixQuestionObjs.forEach((a,r)=>{const l=this.processDataExamPartCode(a.offlineQuestionObjs,r);i.controls.length<l.length&&(i=l),e.push(new f.cw({examCode:new f.NI(a.offlineMixQuestionHashId,{nonNullable:!0,validators:[f.kI.required,f.kI.min(1),f.kI.max(999),f.kI.maxLength(3)]}),examPartTypeExists:new f.NI(this.offlineExamPartService.getAllExamPartTypeInExamCode(l),{nonNullable:!0}),isUpdate:new f.NI(!0,{nonNullable:!0}),checkDuplicateError:new f.NI(!1,{nonNullable:!0}),offlineMixQuestionId:new f.NI(a.offlineMixQuestionId,{nonNullable:!0}),offlineExamPart:l}))}),this.setDefaultQuickScore(i)}processDataOfflineExamByExcel(){if(!this.form||!this.dataExamOfflineByExcel)return;const e=this.form.controls.examCodeList;let i=new f.Oe([]);this.dataExamOfflineByExcel.excelOfflineMixQuestionObjs.forEach((a,r)=>{const l=this.processDataExamPartCode(a.excelOfflineQuestionObjs,r);i.controls.length<l.length&&(i=l),e.push(new f.cw({examCode:new f.NI(a.offlineMixQuestionHashId,{nonNullable:!0,validators:[f.kI.required,f.kI.min(1),f.kI.max(999),f.kI.maxLength(3)]}),examPartTypeExists:new f.NI(this.offlineExamPartService.getAllExamPartTypeInExamCode(l),{nonNullable:!0}),checkDuplicateError:new f.NI(!1,{nonNullable:!0}),isUpdate:new f.NI(!1,{nonNullable:!0}),offlineExamPart:l}))}),this.setDefaultQuickScore(i)}updateExamPart(e,i,a,r,s){e.controls.answerList.push(this.offlineExamPartService.createItemAnswerWithValue(!1,i,a,r,s)),e.controls.totalQuestion.patchValue((e.controls.totalQuestion.value??0)+1,{emitEvent:!1}),e.controls.scoreQuestion.patchValue((e.controls.scoreQuestion.value??0)+a,{emitEvent:!1})}createFullExamPartCode(){return new f.Oe([this.offlineExamPartService.createExamPart(this.offlineAnswerType.multipleChoice,0,0,0),this.offlineExamPartService.createExamPart(this.offlineAnswerType.trueFalse,0,0,0),this.offlineExamPartService.createExamPart(this.offlineAnswerType.fill,0,0,0),this.offlineExamPartService.createExamPart(this.offlineAnswerType.essay,0,0,0)])}removeAndUpdateValueExamPart(e){for(let i=e.controls.length-1;i>=0;i--){const a=e.controls[i];a.controls.totalQuestion.value?(a.controls.scoreQuestion.patchValue(Number(a.controls.scoreQuestion.value.toFixed(2))),a.controls.colTotalItem.patchValue(Math.ceil(a.controls.totalQuestion.value/this.offlineExamPartService.colAnswerList)),e.controls[i+1]&&e.controls[i+1].controls.startLabelIndex.patchValue(a.controls.totalQuestion.value)):e.removeAt(i)}return e}processDataExamPartCode(e,i){let a=this.createFullExamPartCode();return e.forEach(r=>{switch(r.answerType){case this.offlineAnswerType.multipleChoice:this.updateExamPart(a.controls[0],r.answerType,r.scorePerQuestion,r.answer,r?.questionId);break;case this.offlineAnswerType.trueFalse:const s=this.type===cs.excel?r.answer:this.offlineExamPartService.convertAnswerTrueFalse(r.answer);this.updateExamPart(a.controls[1],r.answerType,r.scorePerQuestion,s,r?.questionId);break;case this.offlineAnswerType.fill:this.updateExamPart(a.controls[2],r.answerType,r.scorePerQuestion,r.answer,r?.questionId);break;case this.offlineAnswerType.essay:this.updateExamPart(a.controls[3],r.answerType,r.scorePerQuestion,this.offlineExamPartService.essayAnswer,r?.questionId)}}),a=this.removeAndUpdateValueExamPart(a),a}getGradeAndSubjectObj(){this.loadingSubjectLevel=!0,this.waitDestroy(this.commonListService.apiCommonListSubjectAndLevelsGet(this.commonService.getBusinessDomainUrl()).subscribe(e=>{1==e.success?(this.schoolLevelObjs=e.data?.schoolLevelSubjectObjs??[],this.form.patchValue({schoolLevel:e.data?.examSchoolLogObj?.lastSchoolLevelId??null??0,schoolSubject:e.data?.examSchoolLogObj?.lastSchoolSubjectId??null??0}),this.successStatusObj()):this.errorStatusObj(e.message??""),this.loadingSubjectLevel=!1}))}setDefaultQuickScore(e){this.resetQuickScore(),e.controls.forEach(i=>{const r=i.controls.scoreQuestion.value,s=i.controls.totalQuestion.value;switch(i.controls.examPartType.value){case this.offlineAnswerType.multipleChoice:this.quickScore.scoreMultipleChoice=r,this.quickScore.totalMultipleChoice=s;break;case this.offlineAnswerType.trueFalse:this.quickScore.scoreTrueFalse=r,this.quickScore.totalTrueFalse=s;break;case this.offlineAnswerType.fill:this.quickScore.scoreFill=r,this.quickScore.totalFill=s;break;case this.offlineAnswerType.essay:this.quickScore.scoreEssay=r,this.quickScore.totalEssay=s}})}resetQuickScore(){this.quickScore={scoreMultipleChoice:0,totalMultipleChoice:0,scoreTrueFalse:0,totalTrueFalse:0,scoreFill:0,totalFill:0,scoreEssay:0,totalEssay:0}}ngOnInit(){switch(super.ngOnInit(),this.getGradeAndSubjectObj(),this.type){case cs.create:this.initCodeExam();break;case cs.excel:this.processDataOfflineExamByExcel();break;case cs.updateExam:case cs.updateExamCode:this.processDataExamOffline()}}constructor(e,i,a,r){super(),this.sAztDialogService=e,this.activeRoute=i,this.commonListService=a,this.offlineExamPartService=r,this.type=cs.create,this.handleSaveData=new t.vpe,this.schoolLevelObjs=[],this.codeExamDuplicateList=[],this.oldAnswerList=[],this.typeScreenCreateOfflineExam=cs,this.selected=new f.NI(0,{nonNullable:!0}),this.loadingSubjectLevel=!1,this.examPartTypeList=[],this.offlineAnswerType=Gf.X,this.quickScore={scoreMultipleChoice:0,totalMultipleChoice:0,scoreTrueFalse:0,totalTrueFalse:0,scoreFill:0,totalFill:0,scoreEssay:0,totalEssay:0}}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Fi.C),t.Y36(O.gz),t.Y36(Cd.o7),t.Y36(Nm))},n.\u0275cmp=t.Xpm({type:n,selectors:[["ui-create-offline-exam"]],inputs:{form:"form",type:"type",dataExamOffline:"dataExamOffline",dataExamOfflineByExcel:"dataExamOfflineByExcel"},outputs:{handleSaveData:"handleSaveData"},features:[t._Bn([Nm]),t.qOj],decls:13,vars:15,consts:[[3,"formGroup"],[1,"box",3,"ngClass"],[4,"ngIf","ngIfElse"],["isUpdateExamCode",""],[1,"p-3","text-right"],["azt-track-service","create-manual-offline-exam-tlbe3XqUg",1,"btn","btn-secondary","w-24","mr-2",3,"click"],["azt-track-service","create-manual-offline-exam-VV_VzsR7QrJ",1,"btn","btn-primary","w-24",3,"click"],[1,"border-b","border-slate-200","dark:border-darkmode-400","p-4"],[1,"grid","grid-cols-12"],[1,"col-span-12"],["for","document-name",1,"form-label","mb-0","mt-2","flex","items-center","font-medium"],["id","document-name","formControlName","examName","type","text",1,"form-control",3,"placeholder"],["class","mt-2 text-xs font-medium text-danger",4,"ngIf"],["doneLoadingSubjectLevel",""],[1,"mt-4","flex","items-center"],[1,"setting-input","form-switch","mr-3"],["type","checkbox","id","isResetLabelQuestionPart","formControlName","isResetLabelQuestionPart",1,"show-code","form-check-input"],["for","isResetLabelQuestionPart",1,"font-medium","flex","items-center"],[1,"btn","btn-primary-soft",3,"click"],[1,"mt-5","mb-3","flex","items-center"],[1,"font-medium","text-lg","mr-auto"],[1,"ml-2"],["azt-track-service","create-manual-offline-exam-5qKruBeS5Vi",1,"btn","btn-success","text-white",3,"click"],[1,"w-4","h-4","inline-block"],["name","plus"],[1,"text-white"],[3,"selectedIndex","selectedIndexChange"],["formArrayName","examCodeList","class","tab-title",4,"ngFor","ngForOf"],[1,"mt-2","text-xs","font-medium","text-danger"],[1,"mt-4","flex","items-center",2,"height","66px"],[1,"mx-auto","w-8","h-8"],[1,"mt-4"],[3,"form","schoolLevelObjs"],["formArrayName","examCodeList",1,"tab-title"],["mat-tab-label",""],["class","mt-3",3,"formGroup",4,"ngIf"],[3,"ngClass"],[1,"mt-3",3,"formGroup"],[1,"mt-2","mb-3"],[3,"form","examCodeGroup"],[1,"border","border-slate-200/60","dark:border-darkmode-400","rounded-md","pb-1"],[1,"p-3","bg-slate-100","dark:bg-darkmode-400","flex","items-center"],[1,"mr-auto"],[1,"flex","items-center"],[1,"font-medium"],["type","text","appOnlyNumber","","formControlName","examCode","class","form-control form-control-sm w-20 sm:ml-2","style","width: 7rem; text-align: center",3,"maxlength","placeholder","input",4,"ngIf","ngIfElse"],["isUpdate",""],["class","flex items-center",4,"ngIf"],[1,"offline-exam-part"],[3,"form","examCodeGroup","type","sendInfoFinalExamCode"],["type","text","appOnlyNumber","","formControlName","examCode",1,"form-control","form-control-sm","w-20","sm:ml-2",2,"width","7rem","text-align","center",3,"maxlength","placeholder","input"],[1,"font-medium","ml-2"],[4,"ngIf"],["azt-track-service","create-manual-offline-exam-ZLcxiYuHZw9",1,"btn","btn-sm","btn-outline-danger",3,"disabled","click"],["name","trash-2"],[4,"ngFor","ngForOf"],[1,"border-b","border-slate-200","dark:border-darkmode-400","p-3"]],template:function(e,i){if(1&e&&(t.TgZ(0,"form",0)(1,"div",1),t.YNc(2,fS,37,23,"ng-container",2),t.YNc(3,xS,1,1,"ng-template",null,3,t.W1O),t.TgZ(5,"div",4)(6,"button",5),t.NdJ("click",function(){return i.resetCreateExam()}),t._uU(7),t.ALo(8,"mytranslate"),t.qZA(),t.TgZ(9,"button",6),t.NdJ("click",function(){return i.handleSaveQuestionAndExam()}),t._uU(10),t.ALo(11,"mytranslate"),t.ALo(12,"mytranslate"),t.qZA()()()()),2&e){const a=t.MAs(4);t.Q6J("formGroup",i.form),t.xp6(1),t.Q6J("ngClass",t.WLB(12,bS,!i.isMobileWebView,i.isMobileWebView)),t.xp6(1),t.Q6J("ngIf",i.type!==i.typeScreenCreateOfflineExam.updateExamCode)("ngIfElse",a),t.xp6(5),t.hij(" ",t.lcZ(8,6,"lang_auto_huy")," "),t.xp6(3),t.hij(" ",i.type===i.typeScreenCreateOfflineExam.updateExam||i.type===i.typeScreenCreateOfflineExam.updateExamCode?t.lcZ(11,8,"lang_auto_cap_nhat"):t.lcZ(12,10,"lang_auto_luu")," ")}},dependencies:[D.mk,D.sg,D.O5,Zm.uD,Zm.uX,Zm.SP,f._Y,f.Fj,f.Wl,f.JJ,f.JL,f.nD,f.sg,f.u,f.CE,qr.Y,oo.M,oi.n,Em.Z,C.Nh5,zA,eS,jt.JV,jt.N7,jt.Aw],encapsulation:2}),n})();function vS(n,o){1&n&&t._UZ(0,"azt-loading-effect")}function yS(n,o){if(1&n&&(t.TgZ(0,"p"),t._uU(1),t.ALo(2,"mytranslate"),t.TgZ(3,"b"),t._uU(4),t.qZA(),t._uU(5," - "),t.TgZ(6,"span"),t._uU(7),t.ALo(8,"mytranslate"),t.qZA()()),2&n){const e=o.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,3,"lang_auto_ma_de_loi"),": "),t.xp6(3),t.Oqu(e.rawOfflineMixQuestionHashId),t.xp6(3),t.hij(" ",t.lcZ(8,5,e.error)," ")}}function wS(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",7)(1,"div",8)(2,"div",9)(3,"p",10),t._uU(4),t.ALo(5,"mytranslate"),t.ALo(6,"mytranslate"),t.qZA(),t.TgZ(7,"div",11)(8,"button",12),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.showErrorBlock=!1)}),t.ALo(9,"mytranslate"),t.TgZ(10,"span",13),t._UZ(11,"lucide-icon",14),t.qZA()()()(),t.TgZ(12,"div",15),t.YNc(13,yS,9,7,"p",16),t.qZA()()()}if(2&n){const e=t.oxw(2);t.xp6(4),t.lnq("",t.lcZ(5,5,"lang_testbank_there_is")," ",e.excelErrorObjs.length," ",t.lcZ(6,7,"lang_testbank_error_in_the_excel_file"),""),t.xp6(4),t.s9C("matTooltip",t.lcZ(9,9,"lang_auto_dong")),t.xp6(5),t.Q6J("ngForOf",e.excelErrorObjs)}}function CS(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",3)(1,"h3",4),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.YNc(4,wS,14,11,"div",5),t.TgZ(5,"ui-create-offline-exam",6),t.NdJ("handleSaveData",function(a){t.CHM(e);const r=t.oxw();return t.KtG(r.handleSaveQuestionAndExam(a))}),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,5,"lang_cms_create_exam_by_excel_title")," "),t.xp6(2),t.Q6J("ngIf",e.excelErrorObjs.length>0&&e.showErrorBlock),t.xp6(1),t.Q6J("form",e.form)("type",e.type)("dataExamOfflineByExcel",e.dataExamOfflineExcel)}}let TS=(()=>{class n extends St.Q{onFileSelected(e){this.file=e?e[0]:this.file,this.file&&["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel"].includes(this.file.type)?this.processFile():(this.showErrorSnack("lang_auto_vui_long_chon_dung_tep_tin_excel"),this.redirectService.redirectByUrl(this.commonService.getLocalRouter(this.backToLink)))}processFile(){this.initStatusObj();let e=Number(this.commonService.getMyParam(this.activeRoute,"cat_id"))??0;this.waitDestroy(this.offlineExamParserV2Service.apiOfflineExamParserV2ParserExcelV2PostForm(e,this.file).subscribe(i=>{1==i.success?(this.dataExamOfflineExcel.excelOfflineMixQuestionObjs=i.data?.excelOfflineMixQuestionObjs??[],this.dataExamOfflineExcel.orcLogId=i.data?.orcLogId??-1,this.excelErrorObjs=i.data?.errors??[],this.successStatusObj()):(this.errorStatusObj(i.message??"",!0),this.redirectService.redirectByUrl(this.commonService.getLocalRouter(this.backToLink)))}))}handleSaveQuestionAndExam(e){let a={resetQuestionIndex:!0,categoryId:this.categoryId,schoolLevelId:this.form.controls.schoolLevel.value,schoolSubjectId:this.form.controls.schoolSubject.value,name:this.form.controls.examName.value,orcLogId:-6,offlineMixQuestionObjs:e};this.initStatusObj(),this.waitDestroy(this.offlineExamCreatorV2Service.apiOfflineExamCreatorV2CreateExamObjPost(a).subscribe(r=>{if(r.success){this.showSuccessSnack("lang_auto_tao_de_thi_thanh_cong");const s=this.getMyQueryParam("classroomId"),l=this.getMyQueryParam("programId"),c=this.getMyQueryParam("sessionId"),d=this.getMyQueryParam("indexSession");if(!this.commonService.isNullUndefinedOrEmpty(d)&&!s)return this.programFormService.ExamExerciseOfProgramToSessionStorage(r.data?.obj?.id??0,r.data?.obj?.name??"","exam"),void(window.location.href=this.commonService.getLocalRouter(`/business/edit-educational-program/${l}?indexSession=${d}`));if(s)if(l&&c){const h=c.includes("?")?c.slice(0,c.indexOf("?")):c;this.saveDocumentTrainingCenter(Number(s),Number(l),Number(h),r.data?.obj)}else window.location.href=this.commonService.getLocalRouter(`/admin/testbank/config-exam-offline/${this.categoryId}/${r.data?.obj?.hashId}?classroomId=${s}`);else window.location.href=this.commonService.getLocalRouter(`/admin/testbank/config-exam-offline/${this.categoryId}/${r.data?.obj?.hashId}`)}else this.errorStatusObj(r.message??"")}))}saveDocumentTrainingCenter(e,i,a,r){this.classroomService.apiClassroomsClassroomIdSessionsSessionIdDocumentsPost(e,a,{name:r?.name,refId:r?.id,type:"exam"}).subscribe(l=>{l?window.location.href=this.commonService.getLocalRouter(`/admin/testbank/config-exam-offline/${this.categoryId}/${r?.hashId}?classroomId=${e}&programId=${i}&sessionId=${a}`):this.stopStatusObj()})}ngOnInit(){super.ngOnInit(),this.categoryId=Number(this.commonService.getMyParam(this.activeRoute,"cat_id"))??0;var e=this.commonService.getMyQueryParam("backto");this.backToLink=e??"/admin/testbank/create-new-document/"+(null!=this.categoryId?this.categoryId:0),this.commonService.translateMetaData({title:"lang_cms_create_exam_by_excel_title",description:"lang_cms_create_exam_by_excel_description",image:"lang_cms_test_image"}),this.form.valueChanges.subscribe(a=>{let r=JSON.stringify(a);r!=this.prevData&&(this.prevData=r,this.form.patchValue(a))});const i=this.editorOutputDataService.getFirstFile();i?this.onFileSelected([i]):this.redirectService.redirectByUrl(this.commonService.getLocalRouter(this.backToLink))}constructor(e,i,a,r,s,l,c){super(),this.editorOutputDataService=e,this.activeRoute=i,this.offlineExamParserV2Service=a,this.offlineExamCreatorV2Service=r,this.redirectService=s,this.classroomService=l,this.programFormService=c,this.backToLink="",this.prevData="",this.categoryId=0,this.type=cs.excel,this.excelErrorObjs=[],this.showErrorBlock=!0,this.dataExamOfflineExcel={name:"",schoolLevelId:1,schoolSubjectId:1,orcLogId:-1,offlineMixQuestionObjs:[],excelOfflineMixQuestionObjs:[],errors:[],resetQuestionIndex:!1},this.form=new f.cw({examName:new f.NI("",{nonNullable:!0,validators:[f.kI.required,or._.noWhiteSpace]}),isResetLabelQuestionPart:new f.NI(!0,{nonNullable:!0,validators:[f.kI.required]}),examCodeList:new f.Oe([]),schoolLevel:new f.NI(0,{nonNullable:!0,validators:[f.kI.required]}),schoolSubject:new f.NI(0,{nonNullable:!0,validators:[f.kI.required]})})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Hs.O),t.Y36(O.gz),t.Y36(ya.Xe),t.Y36(ya.Jt),t.Y36(f0.z),t.Y36(va.um),t.Y36(Om.t))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-create-by-excel"]],features:[t.qOj],decls:4,vars:3,consts:[[3,"headerBackToLink"],[4,"ngIf","ngIfElse"],["doneLoading",""],[1,"mt-5","mx-auto",2,"max-width","1200px"],[1,"text-lg","font-medium"],["class","col-md-12 mb-4 mt-2",4,"ngIf"],[3,"form","type","dataExamOfflineByExcel","handleSaveData"],[1,"col-md-12","mb-4","mt-2"],[1,"alert","alert-outline-danger","show","mb-2"],[1,"flex","items-center"],[1,"font-medium","text-lg"],[1,"ml-auto"],["azt-track-service","create-exam-by-excel-HGchE1J84tS",1,"btn-azt-secodary-icon",3,"matTooltip","click"],[1,"w-4","h-4","inline-block"],["name","x"],[1,"mt-3"],[4,"ngFor","ngForOf"]],template:function(e,i){if(1&e&&(t.TgZ(0,"teacher-layout",0),t.YNc(1,vS,1,0,"azt-loading-effect",1),t.YNc(2,CS,6,7,"ng-template",null,2,t.W1O),t.qZA()),2&e){const a=t.MAs(3);t.Q6J("headerBackToLink",i.backToLink),t.xp6(1),t.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a)}},dependencies:[D.sg,D.O5,Mi.gM,si.l,fo._,C.Nh5,R0,jt.JV],encapsulation:2}),n})(),kS=(()=>{class n extends St.Q{constructor(e,i,a,r){super(),this.activeRoute=e,this.offlineExamCreatorV2Service=i,this.classroomService=a,this.programFormService=r,this.backToLink="",this.prevData="",this.categoryId=0,this.form=new f.cw({examName:new f.NI("",{nonNullable:!0,validators:[f.kI.required,or._.noWhiteSpace]}),examCodeList:new f.Oe([]),schoolLevel:new f.NI(0,{nonNullable:!0,validators:[f.kI.required]}),schoolSubject:new f.NI(0,{nonNullable:!0,validators:[f.kI.required]}),isResetLabelQuestionPart:new f.NI(!0,{nonNullable:!0,validators:[f.kI.required]})})}handleSaveQuestionAndExam(e){const a={categoryId:this.categoryId,schoolLevelId:this.form.controls.schoolLevel.value,schoolSubjectId:this.form.controls.schoolSubject.value,name:this.form.controls.examName.value,orcLogId:-5,resetQuestionIndex:this.form.controls.isResetLabelQuestionPart?.value??!0,offlineMixQuestionObjs:e};this.initStatusObj(),this.waitDestroy(this.offlineExamCreatorV2Service.apiOfflineExamCreatorV2CreateExamObjPost(a).subscribe(r=>{if(r.success){this.showSuccessSnack("lang_auto_tao_de_thi_thanh_cong");const s=this.getMyQueryParam("classroomId"),l=this.getMyQueryParam("programId"),c=this.getMyQueryParam("sessionId"),d=this.getMyQueryParam("indexSession");if(!this.commonService.isNullUndefinedOrEmpty(d))return this.programFormService.ExamExerciseOfProgramToSessionStorage(r.data?.obj?.id??0,r.data?.obj?.name??"","exam"),void this.commonService.myNavigationWithQueryString(`/business/edit-educational-program/${l}`,`?indexSession=${d}`);s?l&&c?this.saveDocumentTrainingCenter(Number(s),Number(l),Number(c),r.data?.obj):this.commonService.myNavigationWithQueryString(`/admin/testbank/config-exam-offline/${this.categoryId}/${r.data?.obj?.hashId}`,`?classroomId=${s}`):this.commonService.myNavigation(`/admin/testbank/config-exam-offline/${this.categoryId}/${r.data?.obj?.hashId}`)}else this.errorStatusObj(r.message??"",!0)}))}saveDocumentTrainingCenter(e,i,a,r){this.classroomService.apiClassroomsClassroomIdSessionsSessionIdDocumentsPost(e,a,{name:r?.name,refId:r?.id,type:"exam"}).subscribe(l=>{l?this.commonService.myNavigationWithQueryString(`/admin/testbank/config-exam-offline/${this.categoryId}/${r?.hashId}`,`?classroomId=${e}&programId=${i}&sessionId=${a}`):this.stopStatusObj()})}ngOnInit(){this.categoryId=Number(this.commonService.getMyParam(this.activeRoute,"cat_id"))??0,this.backToLink=this.commonService.getMyQueryParam("backto")??`/admin/testbank/create-new-document/${this.categoryId}`,this.commonService.translateMetaData({title:"lang_cms_create_exam_by_hand_title",description:"lang_cms_create_exam_by_hand_description",image:"lang_cms_test_image"}),this.form.valueChanges.subscribe(e=>{let i=JSON.stringify(e);i!=this.prevData&&(this.prevData=i,this.form.patchValue(e))}),super.ngOnInit()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(O.gz),t.Y36(ya.Jt),t.Y36(va.um),t.Y36(Om.t))},n.\u0275cmp=t.Xpm({type:n,selectors:[["create-manual-offline-exam"]],features:[t.qOj],decls:6,vars:5,consts:[[3,"headerBackToLink"],[1,"mt-5","mx-auto",2,"max-width","1200px"],[1,"text-xl","font-medium"],[3,"form","handleSaveData"]],template:function(e,i){1&e&&(t.TgZ(0,"teacher-layout",0)(1,"div",1)(2,"h3",2),t._uU(3),t.ALo(4,"mytranslate"),t.qZA(),t.TgZ(5,"ui-create-offline-exam",3),t.NdJ("handleSaveData",function(r){return i.handleSaveQuestionAndExam(r)}),t.qZA()()()),2&e&&(t.Q6J("headerBackToLink",i.backToLink),t.xp6(3),t.hij(" ",t.lcZ(4,3,"lang_auto_nhap_tay_dap_an")," "),t.xp6(2),t.Q6J("form",i.form))},dependencies:[fo._,R0,jt.JV],encapsulation:2}),n})();var AS=M(7827);function SS(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",32)(1,"div",50),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.beforeOpenEditorShowAI())}),t.TgZ(2,"div",51),t._UZ(3,"img",52),t.ALo(4,"convertCdnLinkOfGitHub"),t.qZA(),t.TgZ(5,"div",38)(6,"div",39),t._uU(7),t.ALo(8,"mytranslate"),t.qZA()()(),t.TgZ(9,"div",40)(10,"span"),t._uU(11),t.ALo(12,"mytranslate"),t.qZA(),t.TgZ(13,"a",41),t._uU(14),t.ALo(15,"mytranslate"),t.qZA()()()}2&n&&(t.xp6(3),t.Q6J("src",t.lcZ(4,4,"images/azotaAI.png"),t.LSH),t.xp6(4),t.hij(" ",t.lcZ(8,6,"lang_testbank_create_custom_exam_with_azota_ai")," "),t.xp6(4),t.hij("",t.lcZ(12,8,"lang_testbank_use_ai_technology_for_births_for_automated_on_demand_exams"),"\xa0"),t.xp6(3),t.Oqu(t.lcZ(15,10,"lang_auto_tim_hieu_them")))}function OS(n,o){1&n&&t._UZ(0,"div",53)}let ES=(()=>{class n extends St.Q{redirectToMixBank(){this.paramClassroomService.redirectUrlAddParamClassroom(`/admin/testbank/mix-bank-template/${this.categoryId?this.categoryId:0}/user/0`)}redirectToCreateExamOfflineByHand(){this.paramClassroomService.redirectUrlAddParamClassroom(`/admin/testbank/create-manual-offline-exam/${this.categoryId?this.categoryId:0}`)}redirectToBack(){this.commonService.myNavigation("/testbank")}beforeOpenEditor(e="editor"){this.editorOutputDataService.setMode(e),this.paramClassroomService.redirectUrlAddParamClassroomReload(`/admin/testbank/azota-editor/${this.categoryId?this.categoryId:0}`)}beforeOpenEditorShowAI(e="editor"){this.editorOutputDataService.setMode(e),this.paramClassroomService.redirectUrlAddParamClassroomReload(`/admin/testbank/azota-editor/${this.categoryId?this.categoryId:0}?showAI=1`)}saveAndSwitch(e){this.editorOutputDataService.setFileProcess(e),this.paramClassroomService.redirectUrlAddParamClassroom(`/admin/testbank/azota-editor/${this.categoryId?this.categoryId:0}`)}startParser(e){this.isFollowLibParser=!0,this.commonService.getTranslate("lang_auto_dang_xu_ly_file_dau_vao_vui_long_doi_trong_giay_lat").subscribe(i=>{this.msgLoading=i}),this.saveAndSwitch(e)}changeFileAction(e){if(this.file=void 0,null!==e)for(let i in e)"length"!=i&&"item"!=i&&((0,xe.D_)(e[i].type)||(0,xe._4)(e[i].type)||(0,xe.Or)(e[i].type)||e[i].name.toLowerCase().endsWith(".azt")?(0,xe.EO)(e[i].size)<=200?(this.file=e[i],this.isChooseFile=!0):this.showErrorSnack("lang_auto_vui_long_chon_file_khong_qua_200_mb"):this.showErrorSnack("lang_auto_dinh_dang_file_khong_ho_tro_vui_long_tai_file_dot"));this.file&&(this.getFileIcon(),this.startParser(this.file))}onDrop(e){try{this.changeFileAction(e)}catch(i){alert(i)}}getFileIcon(){const e=["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel"];this.file&&((0,xe.D_)(this.file.type??"")&&!e.includes(this.file.type??"")?this.fileIcon="images/word-icon.png":(0,xe._4)(this.file.type??"")?this.fileIcon="images/pdf-icon.png":(0,xe.Or)(this.file.type??"")?this.fileIcon="images/jpg-icon.png":this.file.type&&e.includes(this.file.type)&&(this.fileIcon="images/excel.png")),this.fileIcon="images/documents.png"}ngOnInit(){this.waitDestroy((0,dt.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.categoryId=Number(this.commonService.getMyParam(this.activeRoute,"cat_id"));let e=this.commonService.getMyQueryParam("backto")??"";this.backToLink=e||"/admin/testbank/document-management/0/"+(null!=this.categoryId?this.categoryId:0)+"/1"})),this.commonService.translateMetaData({title:"lang_cms_test_create_new_title",description:"lang_cms_test_create_new_description",image:"lang_cms_test_image"}),super.ngOnInit()}constructor(e,i,a){super(),this.activeRoute=e,this.editorOutputDataService=i,this.paramClassroomService=a,this.categoryId=0,this.backToLink="",this.isChooseFile=!1,this.isFollowLibParser=!1,this.fileParser=new V.uD,this.isInitConf=!1,this.fileIcon="",this.msgLoading="",this.willShowAIBox=!Ce.N.production||Ce.N.isProdAzotaVn,this.selectFile=r=>{let c=r.target.files;try{this.changeFileAction(c)}catch(d){alert(d)}},this.form=new f.cw({file:new f.NI("",{nonNullable:!0,validators:[f.kI.required]})})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(O.gz),t.Y36(Hs.O),t.Y36(Oo))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-create-new-document"]],features:[t.qOj],decls:115,vars:91,consts:[[3,"headerBackToLink"],[1,"intro-y","flex","items-center","mt-5"],[1,"text-lg","font-medium","mr-auto"],[1,"intro-y","chat","grid","grid-cols-12","gap-5","mt-5","create-new-document-main"],[1,"intro-y","col-span-12","lg:col-span-8"],[3,"formGroup","hidden"],["type","file","id","box-left-file-input","formControlName","file",1,"form-control","file-input",3,"change"],["fileSelect",""],["azt-track-service","create-new-document-PuQSKmLC3","id","box-left-file-drop",1,"h-full","cursor-pointer","box","p-5",3,"appDropZone","click"],[1,"h-full","flex","items-center"],[1,"mx-auto","text-center"],[1,"w-16","h-16","flex-none","image-fit","overflow-hidden","mx-auto","upload-box"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"w-16","h-16","text-primary"],["fill-rule","evenodd","d","M4.406 1.342A5.53 5.53 0 0 1 8 0c2.69 0 4.923 2 5.166 4.579C14.758 4.804 16 6.137 16 7.773 16 9.569 14.502 11 12.687 11H10a.5.5 0 0 1 0-1h2.688C13.979 10 15 8.988 15 7.773c0-1.216-1.02-2.228-2.313-2.228h-.5v-.5C12.188 2.825 10.328 1 8 1a4.53 4.53 0 0 0-2.941 1.1c-.757.652-1.153 1.438-1.153 2.055v.448l-.445.049C2.064 4.805 1 5.952 1 7.318 1 8.785 2.23 10 3.781 10H6a.5.5 0 0 1 0 1H3.781C1.708 11 0 9.366 0 7.318c0-1.763 1.266-3.223 2.942-3.593.143-.863.698-1.723 1.464-2.383z"],["fill-rule","evenodd","d","M7.646 4.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 5.707V14.5a.5.5 0 0 1-1 0V5.707L5.354 7.854a.5.5 0 1 1-.708-.708l3-3z"],[1,"mt-3"],[1,"font-medium","text-lg","upload-box"],[1,"text-slate-500","text-xs","mt-1"],["azt-track-service","create-new-document-WauQzqbISx","href","https://docs.azota.vn/docs/huong-dan-su-dung/de-thi/chon-file-keo-tha-file-de-tao-de/","target","_blank",1,"text-primary",3,"click"],[1,"pt-2"],["azt-track-service","create-new-document-FxdEQuAx7G","id","download-link-item",3,"dataUrl","target","fileName","fileDescription","classStyle","click"],["azt-track-service","create-new-document-O5FkqsuTLC","id","download-link-item",3,"dataUrl","target","fileName","fileDescription","classStyle","click"],["azt-track-service","create-new-document-cPk0ISITQT","id","download-link-item",3,"dataUrl","target","fileName","fileDescription","classStyle","click"],["role","alert",1,"alert","alert-secondary-soft","mt-3","p-2"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","icon-name","alert-circle","data-lucide","alert-circle",1,"lucide","lucide-alert-circle","w-6","h-6","mr-2"],["cx","12","cy","12","r","10"],["x1","12","y1","8","x2","12","y2","12"],["x1","12","y1","16","x2","12.01","y2","16"],[1,"col-span-12","lg:col-span-4"],["id","profile","role","tabpanel","aria-labelledby","profile-tab",1,"tab-pane"],[1,"pr-1"],["class","block-azt mb-5",4,"ngIf"],[1,"block-azt","mb-5"],["azt-track-service","create-new-document-eWSFP-ZUFW",1,"box","flex","items-center","px-5","py-5","zoom-in",3,"click"],[1,"w-8","h-8","flex-none","image-fit","overflow-hidden","mr-5"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"w-8","h-8","text-pending"],["d","M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"],["fill-rule","evenodd","d","M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z"],[1,"text-center"],[1,"font-medium","text-lg"],[1,"text-slate-500","text-xs","mt-2"],["azt-track-service","create-new-document-ZQ2mrymJc","href","https://docs.azota.vn/docs/huong-dan-su-dung/de-thi/tu-soan-de/","target","_blank",1,"text-primary"],["azt-track-service","create-new-document-KJvjOB4efQ",1,"box","flex","items-center","px-5","py-5","zoom-in",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"w-8","h-8","text-success"],["d","M8.277.084a.5.5 0 0 0-.554 0l-7.5 5A.5.5 0 0 0 .5 6h1.875v7H1.5a.5.5 0 0 0 0 1h13a.5.5 0 1 0 0-1h-.875V6H15.5a.5.5 0 0 0 .277-.916l-7.5-5zM12.375 6v7h-1.25V6h1.25zm-2.5 0v7h-1.25V6h1.25zm-2.5 0v7h-1.25V6h1.25zm-2.5 0v7h-1.25V6h1.25zM8 4a1 1 0 1 1 0-2 1 1 0 0 1 0 2zM.5 15a.5.5 0 0 0 0 1h15a.5.5 0 1 0 0-1H.5z"],["azt-track-service","create-new-document-MC5alRfKcY","href","https://docs.azota.vn/docs/huong-dan-su-dung/de-thi/tao-de-tu-ma-tran-de/","target","_blank",1,"text-primary"],["azt-track-service","create-new-document-PDK9L9LPGj",1,"box","flex","items-center","px-5","py-5","zoom-in",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"w-8","h-8","text-warning"],["d","M6.75 1a.75.75 0 0 1 .75.75V8a.5.5 0 0 0 1 0V5.467l.086-.004c.317-.012.637-.008.816.027.134.027.294.096.448.182.077.042.15.147.15.314V8a.5.5 0 0 0 1 0V6.435l.106-.01c.316-.024.584-.01.708.04.118.046.3.207.486.43.081.096.15.19.2.259V8.5a.5.5 0 1 0 1 0v-1h.342a1 1 0 0 1 .995 1.1l-.271 2.715a2.5 2.5 0 0 1-.317.991l-1.395 2.442a.5.5 0 0 1-.434.252H6.118a.5.5 0 0 1-.447-.276l-1.232-2.465-2.512-4.185a.517.517 0 0 1 .809-.631l2.41 2.41A.5.5 0 0 0 6 9.5V1.75A.75.75 0 0 1 6.75 1zM8.5 4.466V1.75a1.75 1.75 0 1 0-3.5 0v6.543L3.443 6.736A1.517 1.517 0 0 0 1.07 8.588l2.491 4.153 1.215 2.43A1.5 1.5 0 0 0 6.118 16h6.302a1.5 1.5 0 0 0 1.302-.756l1.395-2.441a3.5 3.5 0 0 0 .444-1.389l.271-2.715a2 2 0 0 0-1.99-2.199h-.581a5.114 5.114 0 0 0-.195-.248c-.191-.229-.51-.568-.88-.716-.364-.146-.846-.132-1.158-.108l-.132.012a1.26 1.26 0 0 0-.56-.642 2.632 2.632 0 0 0-.738-.288c-.31-.062-.739-.058-1.05-.046l-.048.002zm2.094 2.025z"],["class","loading",4,"ngIf"],["azt-track-service","create-new-document-xS3E2vP1e",1,"box","flex","items-center","px-5","py-5","zoom-in",3,"click"],[1,"w-9","h-8","flex-none","image-fit","overflow-hidden","mr-5"],[1,"w-full","h-full","inline-block",3,"src"],[1,"loading"]],template:function(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"teacher-layout",0)(1,"div",1)(2,"h3",2),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()(),t.TgZ(5,"div",3)(6,"div",4)(7,"form",5)(8,"input",6,7),t.NdJ("change",function(s){return i.selectFile(s)}),t.qZA()(),t.TgZ(10,"div",8),t.NdJ("appDropZone",function(s){return i.onDrop(s)})("click",function(){t.CHM(a);const s=t.MAs(9);return t.KtG(s.click())}),t.TgZ(11,"div",9)(12,"div",10)(13,"div",11),t.O4$(),t.TgZ(14,"svg",12),t._UZ(15,"path",13)(16,"path",14),t.qZA()(),t.kcU(),t.TgZ(17,"div",15)(18,"div",16),t._uU(19),t.ALo(20,"mytranslate"),t.qZA(),t.TgZ(21,"div",17),t._uU(22),t.ALo(23,"mytranslate"),t._UZ(24,"br"),t._uU(25),t.ALo(26,"mytranslate"),t.TgZ(27,"b"),t._uU(28),t.ALo(29,"mytranslate"),t.qZA(),t._uU(30,", "),t.TgZ(31,"b"),t._uU(32),t.ALo(33,"mytranslate"),t.qZA(),t._uU(34),t.ALo(35,"mytranslate"),t.TgZ(36,"b"),t._uU(37),t.ALo(38,"mytranslate"),t.qZA(),t._uU(39),t.ALo(40,"mytranslate"),t.TgZ(41,"a",18),t.NdJ("click",function(s){return s.stopPropagation()}),t._uU(42),t.ALo(43,"mytranslate"),t.qZA(),t.TgZ(44,"div",19)(45,"azt-download-link-item",20),t.NdJ("click",function(s){return i.isMobileWebView?"":s.stopPropagation()}),t.ALo(46,"convertCdnLinkOfGitHubWithLocale"),t.ALo(47,"mytranslate"),t.qZA(),t._uU(48,"\xa0|\xa0 "),t.TgZ(49,"azt-download-link-item",21),t.NdJ("click",function(s){return i.isMobileWebView?"":s.stopPropagation()}),t.ALo(50,"convertRawLinkOfGitHubWithLocale"),t.ALo(51,"mytranslate"),t.qZA(),t._uU(52,"\xa0|\xa0 "),t.TgZ(53,"azt-download-link-item",22),t.NdJ("click",function(s){return i.isMobileWebView?"":s.stopPropagation()}),t.ALo(54,"convertRawLinkOfGitHubWithLocale"),t.ALo(55,"mytranslate"),t.qZA()()()(),t.TgZ(56,"div",23),t.O4$(),t.TgZ(57,"svg",24),t._UZ(58,"circle",25)(59,"line",26)(60,"line",27),t.qZA(),t._uU(61),t.ALo(62,"mytranslate"),t.kcU(),t.TgZ(63,"b"),t._uU(64,".docx"),t.qZA(),t._uU(65,". "),t.qZA()()()()(),t.TgZ(66,"div",28)(67,"div",29)(68,"div",30),t.YNc(69,SS,16,12,"div",31),t.ALo(70,"async"),t.ALo(71,"allowFeatureForUserBySchoolSubject"),t.TgZ(72,"div",32)(73,"div",33),t.NdJ("click",function(){return i.beforeOpenEditor()}),t.TgZ(74,"div",34),t.O4$(),t.TgZ(75,"svg",35),t._UZ(76,"path",36)(77,"path",37),t.qZA()(),t.kcU(),t.TgZ(78,"div",38)(79,"div",39),t._uU(80),t.ALo(81,"mytranslate"),t.qZA()()(),t.TgZ(82,"div",40)(83,"span"),t._uU(84),t.ALo(85,"mytranslate"),t.qZA(),t.TgZ(86,"a",41),t._uU(87),t.ALo(88,"mytranslate"),t.qZA()()(),t.TgZ(89,"div",32)(90,"div",42),t.NdJ("click",function(){return i.redirectToMixBank()}),t.TgZ(91,"div",34),t.O4$(),t.TgZ(92,"svg",43),t._UZ(93,"path",44),t.qZA()(),t.kcU(),t.TgZ(94,"div",38)(95,"div",39),t._uU(96),t.ALo(97,"mytranslate"),t.qZA()()(),t.TgZ(98,"div",40)(99,"span"),t._uU(100),t.ALo(101,"mytranslate"),t.qZA(),t.TgZ(102,"a",45),t._uU(103),t.ALo(104,"mytranslate"),t.qZA()()(),t.TgZ(105,"div",32)(106,"div",46),t.NdJ("click",function(){return i.redirectToCreateExamOfflineByHand()}),t.TgZ(107,"div",34),t.O4$(),t.TgZ(108,"svg",47),t._UZ(109,"path",48),t.qZA()(),t.kcU(),t.TgZ(110,"div",38)(111,"div",39),t._uU(112),t.ALo(113,"mytranslate"),t.qZA()()()()()()()(),t.YNc(114,OS,1,0,"div",49),t.qZA()}2&e&&(t.Q6J("headerBackToLink",i.backToLink),t.xp6(3),t.hij(" ",t.lcZ(4,38,"lang_auto_tao_de_moi")," "),t.xp6(4),t.Q6J("formGroup",i.form)("hidden",!0),t.xp6(12),t.Oqu(t.lcZ(20,40,"lang_auto_chon_file_hoc_keo_tha_file_vao_day")),t.xp6(3),t.hij(" ",t.lcZ(23,42,"lang_auto_azota_support_file_type")," .pdf, .docx, .xlsx. "),t.xp6(3),t.hij("",t.lcZ(26,44,"lang_auto_can_upload")," "),t.xp6(3),t.Oqu(t.lcZ(29,46,"lang_auto_bai_tap")),t.xp6(4),t.Oqu(t.lcZ(33,48,"lang_auto_de_thi")),t.xp6(2),t.hij(" ",t.lcZ(35,50,"lang_auto_hoac")," "),t.xp6(3),t.Oqu(t.lcZ(38,52,"lang_auto_bang_dap_an")),t.xp6(2),t.hij(" ",t.lcZ(40,54,"lang_auto_de_cham_offline"),". "),t.xp6(3),t.hij(" ",t.lcZ(43,56,"lang_auto_tim_hieu_them")," "),t.xp6(3),t.Q6J("dataUrl",t.lcZ(46,58,"medias_[LANG]/de_mau_azota.zip"))("target","_blank")("fileName",t.lcZ(47,60,"lang_testbank_create_document_azota_pdf_model"))("fileDescription","lang_testbank_create_document_azota_pdf_model")("classStyle","text-primary"),t.xp6(4),t.Q6J("dataUrl",t.lcZ(50,62,"medias_[LANG]/de_mau_azota.docx?raw=true"))("target","_self")("fileName",t.lcZ(51,64,"lang_testbank_create_document_azota_docx_model"))("fileDescription","lang_testbank_create_document_azota_docx_model")("classStyle","text-primary"),t.xp6(4),t.Q6J("dataUrl",t.lcZ(54,66,"medias_[LANG]/de_mau_azota_excel_v2_4.xlsx?raw=true"))("target","_self")("fileName",t.lcZ(55,68,"lang_testbank_create_document_azota_pdf_model"))("fileDescription","lang_testbank_create_document_azota_excel_model")("classStyle","text-primary"),t.xp6(8),t.hij(" ",t.lcZ(62,70,"lang_auto_azota_best_support_file_type")+" "," "),t.xp6(8),t.Q6J("ngIf",i.willShowAIBox||t.lcZ(70,72,t.xi3(71,74,"",32))),t.xp6(11),t.hij(" ",t.lcZ(81,77,"lang_auto_tu_soan_de_tren_azota")," "),t.xp6(4),t.hij("",t.lcZ(85,79,"lang_auto_su_dung_trinh_soan_thao_de_cua_azota_chinh_sua_tu_cac_mau_co_san_hoac_copy_and_paste_tu_cac_nguon_khac_nhau"),"\xa0"),t.xp6(3),t.Oqu(t.lcZ(88,81,"lang_auto_tim_hieu_them")),t.xp6(9),t.hij(" ",t.lcZ(97,83,"lang_auto_tao_ma_tran_de_thi")," "),t.xp6(4),t.hij("",t.lcZ(101,85,"lang_auto_azota_se_sinh_ngau_nhien_de_moi_tu_cac_chuyen_de_so_luong_cau_trong_moi_chuyen_de_cac_muc_do_kho_de_ma_nguoi_dung_lua_chon"),"\xa0"),t.xp6(3),t.Oqu(t.lcZ(104,87,"lang_auto_tim_hieu_them")),t.xp6(9),t.hij(" ",t.lcZ(113,89,"lang_auto_nhap_tay_dap_an")," "),t.xp6(2),t.Q6J("ngIf",i.isFollowLibParser))},dependencies:[D.O5,f._Y,f.Fj,f.JJ,f.JL,f.sg,f.u,oo.M,b0.P,AS.i,fo._,D.Ov,jt.JV,jt.Bo,jt.Ju,jt.jw,jt.vJ],encapsulation:2}),n})();function MS(n,o){1&n&&t._UZ(0,"azt-loading-effect")}function IS(n,o){if(1&n&&(t.TgZ(0,"div",4)(1,"div",5)(2,"h3",6),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()(),t.TgZ(5,"div",7)(6,"h3",8),t._uU(7),t.ALo(8,"mytranslate"),t.qZA(),t.TgZ(9,"div",9),t._UZ(10,"input",10),t.TgZ(11,"a",11),t.O4$(),t.TgZ(12,"svg",12),t._UZ(13,"path",13)(14,"polyline",14)(15,"line",15),t.qZA(),t._uU(16),t.ALo(17,"mytranslate"),t.qZA()()()()),2&n){const e=t.oxw();t.xp6(3),t.hij("",t.lcZ(4,5,"lang_testbank_create_wibsite_result_header_title")," \u{1f389}"),t.xp6(4),t.hij(" ",t.lcZ(8,7,"lang_testbank_create_wibsite_result_address")," "),t.xp6(3),t.s9C("value",e.linkExerciseExist),t.xp6(1),t.Q6J("href",e.linkExerciseExist,t.LSH),t.xp6(5),t.hij(" ",t.lcZ(17,9,"lang_testbank_create_wibsite_result_Access")," ")}}let LS=(()=>{class n extends St.Q{getExamDataById(){this.status_obj={loading:!0,error:!1},this.waitDestroy(this.examService.apiExamGetWebsiteInfoGet().subscribe(e=>{1==e.success?(this.obj=e.data?.obj,this.linkExerciseExist=`${e.data?.obj?.value}`,this.status_obj={loading:!1,error:!1}):(this.showErrorSnack(e.message??""),this.status_obj={loading:!1,error:!0})}))}ngOnInit(){(0,dt.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.getExamDataById(),this.backToLink="/admin/testbank/create-website"}),this.commonService.translateMetaData({title:"lang_cms_test_create_website_result_title",description:"lang_cms_test_create_website_result_description",image:"lang_cms_test_image"}),super.ngOnInit()}constructor(e,i){super(),this.activeRoute=e,this.examService=i,this.status_obj={loading:!1,error:!1},this.linkExerciseExist="",this.backToLink=""}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(O.gz),t.Y36(Ke.Oe))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-create-website-result"]],features:[t.qOj],decls:5,vars:3,consts:[[3,"headerBackToLink"],[1,"py-5","mt-8"],[4,"ngIf","ngIfElse"],["doneLoading",""],[1,"intro-y","mt-8"],[1,"flex","items-center","justify-center"],[1,"text-lg","font-medium"],[1,"box","mx-auto","mt-5","p-3",2,"max-width","560px"],[1,"text-md","font-medium"],[1,"azt-copy","relative","mt-3","intro-x"],["type","text","readonly","",1,"form-control","py-3","px-4","border-transparent","bg-slate-100","pr-10",2,"padding-right","120px",3,"value"],["azt-track-service","create-website-result-F_Qjh-7fxPs","target","_blank",1,"btn","btn-outline-primary","absolute","my-auto","inset-y-0","right-0",2,"border-top-left-radius","0","border-bottom-left-radius","0",3,"href"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","mr-2","lucide"],["d","M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"],["points","15 3 21 3 21 9"],["x1","10","y1","14","x2","21","y2","3"]],template:function(e,i){if(1&e&&(t.TgZ(0,"teacher-layout",0)(1,"div",1),t.YNc(2,MS,1,0,"azt-loading-effect",2),t.YNc(3,IS,18,11,"ng-template",null,3,t.W1O),t.qZA()()),2&e){const a=t.MAs(4);t.Q6J("headerBackToLink",i.backToLink),t.xp6(2),t.Q6J("ngIf",i.status_obj.loading)("ngIfElse",a)}},dependencies:[D.O5,si.l,fo._,jt.JV],styles:[".content-box[_ngcontent-%COMP%]{border-width:0px;background-color:#fff;box-sizing:border-box;border-width:1px;border-style:solid;border-color:#dcdcdc;border-radius:4px;box-shadow:none}.click-to-href[_ngcontent-%COMP%], .click-to-href[_ngcontent-%COMP%]:hover{color:#5f5f5f!important}@media only screen and (max-width: 992px){.box[_ngcontent-%COMP%]{width:60%}}@media only screen and (max-width: 768px){.box[_ngcontent-%COMP%]{width:80%}}@media only screen and (max-width: 576px){.box[_ngcontent-%COMP%]{width:90%}}@media only screen and (max-width: 380px){.box[_ngcontent-%COMP%]{width:95%}}"]}),n})();function PS(n,o){1&n&&t._UZ(0,"azt-loading-effect")}function NS(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",52),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.handleRunScriptIframe())}),t.O4$(),t.TgZ(1,"svg",32),t._UZ(2,"path",53)(3,"path",54),t.qZA(),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()}2&n&&(t.xp6(4),t.hij(" ",t.lcZ(5,1,"lang_button_edit")," "))}function ZS(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",55),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.handleCancelEdit())}),t.O4$(),t.TgZ(1,"svg",32),t._UZ(2,"path",56)(3,"polyline",57)(4,"line",58)(5,"line",59),t.qZA(),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()}2&n&&(t.xp6(6),t.hij(" ",t.lcZ(7,1,"lang_button_cancel")," "))}function DS(n,o){1&n&&(t.TgZ(0,"div",60),t.O4$(),t.TgZ(1,"svg",32),t._UZ(2,"circle",61)(3,"line",62)(4,"line",63),t.qZA(),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()),2&n&&(t.xp6(5),t.hij(" ",t.lcZ(6,1,"lang_auto_click_vao_tung_doan_text_ma_ban_muon_sua")," "))}function jS(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"a",64),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.handleRunScriptIframe())}),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()}2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_button_edit")))}function qS(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"a",65),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.handleCancelEdit())}),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()}2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_button_cancel")))}function FS(n,o){1&n&&(t.TgZ(0,"div",66),t.O4$(),t.TgZ(1,"svg",32),t._UZ(2,"circle",61)(3,"line",62)(4,"line",63),t.qZA(),t.kcU(),t.TgZ(5,"span"),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()()),2&n&&(t.xp6(6),t.hij("",t.lcZ(7,1,"lang_auto_click_vao_tung_doan_text_ma_ban_muon_sua")," "))}function QS(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6)(4,"div",7)(5,"h3",8),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()(),t.TgZ(8,"div",9)(9,"h3",10)(10,"button",11),t._uU(11),t.ALo(12,"mytranslate"),t.qZA()(),t.TgZ(13,"mat-menu",null,12)(15,"div",13)(16,"div",14),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.handleClickTemplate("templateExample"))}),t.TgZ(17,"div",15),t._UZ(18,"img",16),t.ALo(19,"convertCdnLinkOfGitHub"),t.qZA(),t.TgZ(20,"h4"),t._uU(21,"Landing Teacher"),t.qZA()()()()()()(),t.TgZ(22,"div",17)(23,"div",18)(24,"div",19)(25,"button",20),t.O4$(),t.TgZ(26,"svg",21),t._UZ(27,"line",22)(28,"line",23)(29,"line",24),t.qZA()(),t.kcU(),t.TgZ(30,"mat-menu",null,25)(32,"div",26)(33,"ul",27)(34,"li"),t.YNc(35,NS,6,3,"button",28),t.qZA(),t.TgZ(36,"li"),t.YNc(37,ZS,8,3,"button",29),t.qZA(),t.TgZ(38,"li"),t._UZ(39,"hr",30),t.qZA(),t.TgZ(40,"li")(41,"button",31),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.handleSaveTemplate())}),t.O4$(),t.TgZ(42,"svg",32),t._UZ(43,"path",33)(44,"polyline",34)(45,"polyline",35),t.qZA(),t._uU(46),t.ALo(47,"mytranslate"),t.qZA()()()()()()(),t.kcU(),t.TgZ(48,"div",36)(49,"div",37),t.YNc(50,DS,7,3,"div",38),t.YNc(51,jS,3,3,"a",39),t.TgZ(52,"a",40),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.handleSaveTemplate())}),t._uU(53),t.ALo(54,"mytranslate"),t.qZA(),t.YNc(55,qS,3,3,"a",41),t.qZA()()(),t.TgZ(56,"div",42),t.YNc(57,FS,8,3,"div",43),t.qZA()(),t.TgZ(58,"div",44)(59,"div",45)(60,"div",46)(61,"div",47)(62,"div",48),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.handleClickTemplate("templateExample"))}),t.TgZ(63,"div",15),t._UZ(64,"img",16),t.ALo(65,"convertCdnLinkOfGitHub"),t.qZA(),t.TgZ(66,"h4"),t._uU(67,"Landing Teacher"),t.qZA()()()()(),t.TgZ(68,"div",49)(69,"div",50),t._UZ(70,"iframe",51),t.ALo(71,"safe"),t.qZA()()()()}if(2&n){const e=t.MAs(14),i=t.MAs(31),a=t.oxw();t.xp6(6),t.Oqu(t.lcZ(7,21,"lang_testbank_create_wibsite_Sampling")),t.xp6(4),t.Q6J("matMenuTriggerFor",e),t.xp6(1),t.hij(" ",t.lcZ(12,23,"lang_testbank_create_wibsite_Sampling")," "),t.xp6(5),t.Gre("template-item ","templateExample"==a.templateName?"previewed":"",""),t.xp6(2),t.Q6J("src",t.lcZ(19,25,"templates/templateExample/template_2_feature.png"),t.LSH),t.xp6(7),t.Q6J("matMenuTriggerFor",i),t.xp6(10),t.Q6J("ngIf",!a.isEditable),t.xp6(2),t.Q6J("ngIf",a.isEditable),t.xp6(9),t.hij(" ",t.lcZ(47,27,"lang_button_save")," "),t.xp6(4),t.Q6J("ngIf",a.isEditable),t.xp6(1),t.Q6J("ngIf",!a.isEditable),t.xp6(2),t.Oqu(t.lcZ(54,29,"lang_button_save")),t.xp6(2),t.Q6J("ngIf",a.isEditable),t.xp6(2),t.Q6J("ngIf",a.isEditable),t.xp6(5),t.Gre("template-item ","templateExample"==a.templateName?"previewed":"",""),t.xp6(2),t.Q6J("src",t.lcZ(65,31,"templates/templateExample/template_2_feature.png"),t.LSH),t.xp6(6),t.Q6J("src",t.lcZ(71,33,a.whiteListWebsiteTemplateIframeSrc),t.uOi)}}let RS=(()=>{class n extends St.Q{handleClickTemplate(e){this.whiteListWebsiteTemplateIframeSrc="/assets/templates/"+e+"/index.html",this.templateName=e}handleCancelEdit(){this.isEditable=!1,window.location.reload()}handleRunScriptIframe(){this.isEditable=!0;const e=document.getElementById("websiteTemplateIframe"),i=e?e.contentWindow:null;i&&i.eval(`\n        // *** INSERT THE SCRIPT TAG TO HEAD ***\n        // ---------------------------------------\n        var scriptExist=document.getElementById('ladi');\n        if(!scriptExist){console.log('Script Exist');\n        var script=document.createElement('script');\n        var att=document.createAttribute('src');\n        var attId=document.createAttribute('id');\n        att.value='${this.cdnService.convertCdnLinkOfGitHub("templates/common/ladipage.v4.js")}';\n        attId.value='ladi'; script.setAttributeNode(att);\n        script.setAttributeNode(attId);\n\n        document.head.appendChild(script);}\n        `)}getWebsiteUrl(){this.initStatusObj(),this.waitDestroy(this.userSettingService.apiUserSettingGetMyDomainGet().subscribe(e=>{1==e.success?(e.data?.obj&&e.data?.obj.value?(this.websiteUrl=e.data.obj.value,this.websiteUrl=this.websiteUrl):this.websiteUrl=this.commonService.getLocalRouter(this.commonService.getCurrentDomain()+"/en/test/category/"+this.userService.getUserObj().id+"/0/1"),this.successStatusObj()):this.errorStatusObj(e.message??"",!0)}))}handleSaveTemplate(){const e=document.getElementById("websiteTemplateIframe"),i=e?e.contentWindow:null;if(i){i.eval("\n        // *** REMOVE LADI JS SCRIPT TAG ***\n        // ---------------------------------\n        const myScript = document.getElementById('ladi');\n        if(myScript){myScript.remove();}\n\n        // *** REMOVE INPUT FILE TAG  ***\n        // ------------------------------\n        var inputFiles = document.querySelectorAll('.tpl-input-file');\n        inputFiles.forEach(input=>{jQuery(input).unwrap(); input.remove();});\n\n        // *** REMOVE demo test iframe  ***\n        var demoTestIMG = document.getElementById('demo_test_iframe');\n        if(demoTestIMG){demoTestIMG.remove();}\n        \n        // *** CHANGE ALL CONTENTEDITABLE TO FALSE ***\n        // -------------------------------------------\n        var editables=document.querySelectorAll('[contentEditable=true]');\n        editables.forEach(e=>{e.setAttribute('contentEditable','false');});\n        "),this.isLoading=!0;var a=i.document.body.outerHTML;this.apiUploadService.commonUploadLadiPageFile(a,this.templateName,a.length).subscribe(r=>{r.type!=j.dt.UploadProgress&&(1==r.success&&r?.data?.url?this.userSettingService.apiUserSettingSaveMyDomainPost({path:r?.data?.url}).subscribe(s=>{1==s.success?this.commonService.myNavigation("/admin/testbank/create-website-result"):(this.isLoading=!1,this.showErrorSnack("lang_auto_luu_website_template_khong_thanh_cong"))}):(this.isLoading=!1,this.showErrorSnack("lang_auto_luu_website_template_khong_thanh_cong")))})}}ngOnInit(){(0,dt.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.backToLink="/admin/dashboard",this.getWebsiteUrl()}),this.commonService.translateMetaData({title:"lang_cms_test_create_website_title",description:"lang_cms_test_create_website_description",image:"lang_cms_test_image"}),super.ngOnInit()}constructor(e,i,a,r,s){super(),this.userSettingService=e,this.cdnService=i,this.activeRoute=a,this.userService=r,this.apiUploadService=s,this.isLoading=!1,this.isEditable=!1,this.templateName="templateExample",this.whiteListWebsiteTemplateIframeSrc="/assets/templates/"+this.templateName+"/index.html",this.websiteUrl="",this.backToLink=""}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Cd.fi),t.Y36(Gn.E),t.Y36(O.gz),t.Y36(ga.U),t.Y36(po.W))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-create-website"]],features:[t.qOj],decls:4,vars:3,consts:[[3,"headerBackToLink"],[4,"ngIf","ngIfElse"],["doneLoading",""],[1,"container-builder","container-fluid","mt-3","pb-mb-80"],[1,"grid","grid-cols-12","gap-3","button-row","justify-between","mb-4"],[1,"col-span-4",2,"align-self","center"],[1,"button-bar","mb-0"],[1,"azt-hidden","lg:block"],[1,"text-md","font-medium",2,"padding-top","10px","padding-left","10px"],[1,"block","xl:hidden"],[1,"text-md","font-medium"],[1,"btn","btn-secondary",3,"matMenuTriggerFor"],["choose","matMenu"],[1,"box","dialog-landing"],["azt-track-service","create-website-m7o0z0tNGZ",3,"click"],[1,"tpl-avatar"],["alt","",3,"src"],[1,"col-span-8","pt-0","pb-0","text-right","w-full"],[1,"flex","justify-end","sm:hidden"],[1,"button-bar","flex","justify-end"],[1,"btn","btn-outline-secondary",3,"matMenuTriggerFor"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-5","h-5","lucide"],["x1","4","y1","12","x2","20","y2","12"],["x1","4","y1","6","x2","20","y2","6"],["x1","4","y1","18","x2","20","y2","18"],["reorder","matMenu"],[1,"dropdown-menu","w-56","show","relative","p-3"],[1,"dropdown-content"],["azt-track-service","create-website-KcLlwJbhLJ","class","dropdown-item w-full",3,"click",4,"ngIf"],["azt-track-service","create-website-hPK4dUWUNk","class","dropdown-item w-full",3,"click",4,"ngIf"],[1,"dropdown-divider","border-slate-200","dark:border-darkmode-400"],["azt-track-service","create-website-kAw_1A0pwF",1,"dropdown-item","w-full",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide","mr-2"],["d","M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"],["points","17 21 17 13 7 13 7 21"],["points","7 3 7 8 15 8"],[1,"azt-hidden","sm:block"],[1,"button-bar","justify-end"],["class","alert alert-info mr-3 mb-0 items-center flex p-2",4,"ngIf"],["azt-track-service","create-website-5leCyaUy9M","class","btn btn-secondary mr-2 w-20",3,"click",4,"ngIf"],["azt-track-service","create-website-JeQ8h6dSA5",1,"btn","btn-primary","w-20",3,"click"],["azt-track-service","create-website-tA2OLuQh7rU","class","btn btn-secondary ml-2 w-20",3,"click",4,"ngIf"],[1,"col-span-12","block","sm:hidden"],["class","alert alert-info mr-1 mb-0 items-center flex text-left p-2",4,"ngIf"],[1,"grid","grid-cols-12","gap-3","content-row"],[1,"col-span-2","azt-hidden","lg:block"],[1,"list-template"],[1,"wrap-layer"],["azt-track-service","create-website-bnKcSD98XWU",3,"click"],[1,"col","col-span-12","sm:col-span-12","md:col-span-10"],[1,"wrap-layer","w-full"],["id","websiteTemplateIframe","frameborder","0",2,"width","100%","height","100%",3,"src"],["azt-track-service","create-website-KcLlwJbhLJ",1,"dropdown-item","w-full",3,"click"],["d","M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"],["d","M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"],["azt-track-service","create-website-hPK4dUWUNk",1,"dropdown-item","w-full",3,"click"],["d","M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],["points","14 2 14 8 20 8"],["x1","9.5","y1","12.5","x2","14.5","y2","17.5"],["x1","14.5","y1","12.5","x2","9.5","y2","17.5"],[1,"alert","alert-info","mr-3","mb-0","items-center","flex","p-2"],["cx","12","cy","12","r","10"],["x1","12","y1","16","x2","12","y2","12"],["x1","12","y1","8","x2","12.01","y2","8"],["azt-track-service","create-website-5leCyaUy9M",1,"btn","btn-secondary","mr-2","w-20",3,"click"],["azt-track-service","create-website-tA2OLuQh7rU",1,"btn","btn-secondary","ml-2","w-20",3,"click"],[1,"alert","alert-info","mr-1","mb-0","items-center","flex","text-left","p-2"]],template:function(e,i){if(1&e&&(t.TgZ(0,"teacher-layout",0),t.YNc(1,PS,1,0,"azt-loading-effect",1),t.YNc(2,QS,72,35,"ng-template",null,2,t.W1O),t.qZA()),2&e){const a=t.MAs(3);t.Q6J("headerBackToLink","/admin/dashboard"),t.xp6(1),t.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a)}},dependencies:[D.O5,Ii.VK,Ii.p6,si.l,fo._,jt.JV,jt.CR,jt.Bo],styles:[".container-builder[_ngcontent-%COMP%]{height:calc(100vh - 72px);overflow:hidden;display:flex;flex-direction:column}.container-builder[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col-2[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:15px;height:38px;display:flex;justify-content:center;align-items:center}.container-builder[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]   .col-content[_ngcontent-%COMP%]{background:white;padding:15px;flex:auto;border:1px solid #ececec;border-radius:3px}.container-builder[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   #websiteTemplateIframe[_ngcontent-%COMP%]{width:100%;height:100%;overflow:hidden}.container-builder[_ngcontent-%COMP%]   .content-row[_ngcontent-%COMP%]{flex:auto;overflow:hidden}.container-builder[_ngcontent-%COMP%]   .content-row[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]   .wrap-layer[_ngcontent-%COMP%]{width:100%;height:100%;background-color:#fff;padding:15px;border:1px solid #ccc;border-radius:3px}.container-builder[_ngcontent-%COMP%]   .content-row[_ngcontent-%COMP%]   .col.list-template[_ngcontent-%COMP%]{padding-right:0}.container-builder[_ngcontent-%COMP%]   .content-row[_ngcontent-%COMP%]   .col.list-template[_ngcontent-%COMP%]   .wrap-layer[_ngcontent-%COMP%]{overflow-y:auto}.container-builder[_ngcontent-%COMP%]   .list-template[_ngcontent-%COMP%]{height:100%}.button-bar[_ngcontent-%COMP%]{display:flex;align-items:center}.button-bar[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{flex:auto;margin-bottom:0;text-align:center}.template-item[_ngcontent-%COMP%]:hover{cursor:pointer}.template-item[_ngcontent-%COMP%]:hover   .tpl-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:scale(1.2)}.template-item[_ngcontent-%COMP%]   .tpl-avatar[_ngcontent-%COMP%]{width:100%;height:0;padding-top:66.6666666667%;position:relative;overflow:hidden}.template-item[_ngcontent-%COMP%]   .tpl-avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;height:auto;width:100%;top:0;left:0;transition:all .5s}.template-item[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-weight:500;margin-top:3px}[_ngcontent-%COMP%]::-webkit-scrollbar{width:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#fff}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#999999;border-radius:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#414141}.dialog-landing[_ngcontent-%COMP%]{width:280px;padding:20px}"]}),n})();var Ry=M(6050),U0=M(63278),$f=function(n){return n[n.ADD_FOLDER=0]="ADD_FOLDER",n[n.EDIT_FOLDER=1]="EDIT_FOLDER",n}($f||{}),US=M(45123),BS=M(72428),B0=M(23433),k6=M(49042);function zS(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_cms_utils_folder_name_validate_255")," "))}function JS(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_cms_utils_folder_name_required")," "))}function HS(n,o){if(1&n&&(t.TgZ(0,"div",12),t.YNc(1,zS,3,3,"span",13),t.YNc(2,JS,3,3,"span",13),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.form.controls.folderName.errors.maxLength),t.xp6(1),t.Q6J("ngIf",e.form.controls.folderName.errors.noWhiteSpace)}}function GS(n,o){1&n&&(t.O4$(),t.TgZ(0,"svg",14)(1,"g",15)(2,"g",16)(3,"circle",17),t._UZ(4,"animate",18),t.qZA(),t.TgZ(5,"circle",19),t._UZ(6,"animate",20),t.qZA(),t.TgZ(7,"circle",21),t._UZ(8,"animate",22),t.qZA(),t.TgZ(9,"circle",23),t._UZ(10,"animate",24),t.qZA(),t.TgZ(11,"circle",25),t._UZ(12,"animate",26),t.qZA(),t.TgZ(13,"circle",27),t._UZ(14,"animate",28),t.qZA(),t.TgZ(15,"circle",29),t._UZ(16,"animate",30),t.qZA(),t.TgZ(17,"circle",31),t._UZ(18,"animate",32),t.qZA()()()())}let $S=(()=>{class n extends lo.e{confirmAction(){var e=this.form.getRawValue();this.initStatusObj(),this.form.valid&&1==this.data.type&&this.waitDestroy(this.examCategoryService.apiExamCategorySaveObjPost({name:e.folderName,parentId:this.data.categoryId??0}).subscribe(a=>{1==a.success?(this.btnCloseDialog(!0),this.successStatusObj("lang_cms_utils_create_folder_success",!0)):(this.btnCloseDialog(!1),this.errorStatusObj(a.message??"",!0))}))}btnCloseDialog(e){this.dialogRef.close(e||!1)}ngOnInit(){super.ngOnInit()}constructor(e,i,a){super(a,i),this.examCategoryService=e,this.dialogRef=i,this.data=a,this.form=new f.cw({folderName:new f.NI("",{nonNullable:!0,validators:[f.kI.required,f.kI.maxLength(255),or._.noWhiteSpace]})})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Ke.F1),t.Y36($.so,8),t.Y36($.WI))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-create-folder"]],features:[t.qOj],decls:19,vars:16,consts:[[1,"box"],[3,"formGroup"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-3"],[1,"text-md","font-medium","flex","items-center"],[1,"mt-2"],["type","text","formControlName","folderName",1,"form-control",3,"placeholder","enterKey"],["class","text-danger text-xs fade mt-2",4,"ngIf"],[1,"p-3","text-right"],["azt-track-service","create-folder-dialog-o4xZcHZdWw",1,"btn","btn-secondary","w-24","mr-2",3,"click"],["azt-track-service","create-folder-dialog-mbrsr9XCgZ",1,"btn","w-24","btn-primary",3,"disabled","click"],["width","20","viewBox","0 0 58 58","xmlns","http://www.w3.org/2000/svg","class","w-4 h-4 ml-2",4,"ngIf"],[1,"text-danger","text-xs","fade","mt-2"],[4,"ngIf"],["width","20","viewBox","0 0 58 58","xmlns","http://www.w3.org/2000/svg",1,"w-4","h-4","ml-2"],["fill","none","fill-rule","evenodd"],["transform","translate(2 1)","stroke","white","stroke-width","1.5"],["cx","42.601","cy","11.462","r","5","fill-opacity","1","fill","white"],["attributeName","fill-opacity","begin","0s","dur","1.3s","values","1;0;0;0;0;0;0;0","calcMode","linear","repeatCount","indefinite"],["cx","49.063","cy","27.063","r","5","fill-opacity","0","fill","white"],["attributeName","fill-opacity","begin","0s","dur","1.3s","values","0;1;0;0;0;0;0;0","calcMode","linear","repeatCount","indefinite"],["cx","42.601","cy","42.663","r","5","fill-opacity","0","fill","white"],["attributeName","fill-opacity","begin","0s","dur","1.3s","values","0;0;1;0;0;0;0;0","calcMode","linear","repeatCount","indefinite"],["cx","27","cy","49.125","r","5","fill-opacity","0","fill","white"],["attributeName","fill-opacity","begin","0s","dur","1.3s","values","0;0;0;1;0;0;0;0","calcMode","linear","repeatCount","indefinite"],["cx","11.399","cy","42.663","r","5","fill-opacity","0","fill","white"],["attributeName","fill-opacity","begin","0s","dur","1.3s","values","0;0;0;0;1;0;0;0","calcMode","linear","repeatCount","indefinite"],["cx","4.938","cy","27.063","r","5","fill-opacity","0","fill","white"],["attributeName","fill-opacity","begin","0s","dur","1.3s","values","0;0;0;0;0;1;0;0","calcMode","linear","repeatCount","indefinite"],["cx","11.399","cy","11.462","r","5","fill-opacity","0","fill","white"],["attributeName","fill-opacity","begin","0s","dur","1.3s","values","0;0;0;0;0;0;1;0","calcMode","linear","repeatCount","indefinite"],["cx","27","cy","5","r","5","fill-opacity","0","fill","white"],["attributeName","fill-opacity","begin","0s","dur","1.3s","values","0;0;0;0;0;0;0;1","calcMode","linear","repeatCount","indefinite"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"form",1)(2,"div",2)(3,"div",3)(4,"h3",4),t._uU(5),t.ALo(6,"mytranslate"),t.qZA(),t.TgZ(7,"div",5)(8,"input",6),t.NdJ("enterKey",function(){return i.confirmAction()}),t.ALo(9,"mytranslate"),t.qZA(),t.YNc(10,HS,3,2,"div",7),t.qZA()()(),t.TgZ(11,"div",8)(12,"button",9),t.NdJ("click",function(){return i.btnCloseDialog(!1)}),t._uU(13),t.ALo(14,"mytranslate"),t.qZA(),t.TgZ(15,"button",10),t.NdJ("click",function(){return i.confirmAction()}),t.YNc(16,GS,19,0,"svg",11),t._uU(17),t.ALo(18,"mytranslate"),t.qZA()()()()),2&e&&(t.xp6(1),t.Q6J("formGroup",i.form),t.xp6(4),t.hij(" ",t.lcZ(6,8,"lang_cms_utils_create_folder")," "),t.xp6(3),t.s9C("placeholder",t.lcZ(9,10,"lang_cms_utils_folder_name")),t.xp6(2),t.Q6J("ngIf",i.form.controls.folderName.errors&&i.form.controls.folderName.dirty),t.xp6(3),t.hij(" ",t.lcZ(14,12,"lang_auto_huy")," "),t.xp6(2),t.Q6J("disabled",i.statusObj.loading||i.form.invalid),t.xp6(1),t.Q6J("ngIf",i.statusObj.loading),t.xp6(1),t.hij(" ",t.lcZ(18,14,"lang_auto_luu")," "))},dependencies:[D.O5,f._Y,f.Fj,f.JJ,f.JL,f.sg,f.u,oo.M,k6.Y,jt.JV],encapsulation:2}),n})();function YS(n,o){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_cms_utils_folder_name_validate_255")," "))}function KS(n,o){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_cms_utils_folder_name_required")," "))}function WS(n,o){if(1&n&&(t.TgZ(0,"div",12),t.YNc(1,YS,3,3,"div",13),t.YNc(2,KS,3,3,"div",13),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.form.controls.folderName.errors.maxlength),t.xp6(1),t.Q6J("ngIf",e.form.controls.folderName.errors.noWhiteSpace)}}function VS(n,o){1&n&&(t.TgZ(0,"span",14),t._UZ(1,"azt-loading-ui"),t.qZA())}let XS=(()=>{class n extends lo.e{confirmAction(){var e=this.form.getRawValue();this.initStatusObj(),this.form.valid&&1==this.data.type&&this.waitDestroy(this.examCategoryService.apiExamCategoryUpdateObjPost({id:this.data.obj?.id,name:e.folderName,parentId:0}).subscribe(a=>{1==a.success?(this.btnCloseDialog(!0),this.successStatusObj("lang_cms_utils_update_folder_success",!0)):(this.btnCloseDialog(!1),this.errorStatusObj(a.message??"",!0))}))}btnCloseDialog(e){this.dialogRef.close(e)}ngOnInit(){this.data.obj&&(this.form=new f.cw({folderName:new f.NI(this.data.obj.name,{nonNullable:!0,validators:[f.kI.required,or._.noWhiteSpace]})})),super.ngOnInit()}constructor(e,i,a){super(a,i),this.examCategoryService=e,this.dialogRef=i,this.data=a,this.typeString="",this.type=0,this.form=new f.cw({folderName:new f.NI("",{nonNullable:!0,validators:[f.kI.required,or._.noWhiteSpace]})})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Ke.F1),t.Y36($.so,8),t.Y36($.WI,8))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-update-folder"]],features:[t.qOj],decls:20,vars:16,consts:[[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-body"],[1,"intro"],[1,"text-base","font-medium","mr-auto"],[1,"form-horizontal","text-center",3,"formGroup"],["type","text","formControlName","folderName",1,"form-control","mt-2",3,"placeholder"],["class","alert alert-danger",4,"ngIf"],[1,"flex","justify-end","mt-3"],["azt-track-service","update-folder-dialog--iPi41TKU",1,"btn","w-20","btn-secondary","mr-2",3,"click"],["azt-track-service","update-folder-dialog-84k7o8Ic_c",1,"btn","btn-primary",3,"disabled","click"],["class","w-4 h-4 inline-block mr-2",4,"ngIf"],[1,"alert","alert-danger"],[4,"ngIf"],[1,"w-4","h-4","inline-block","mr-2"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()(),t.TgZ(7,"div",3)(8,"form",5),t._UZ(9,"input",6),t.ALo(10,"mytranslate"),t.YNc(11,WS,3,2,"div",7),t.qZA()(),t.TgZ(12,"div",8)(13,"button",9),t.NdJ("click",function(){return i.btnCloseDialog(!1)}),t._uU(14),t.ALo(15,"mytranslate"),t.qZA(),t.TgZ(16,"button",10),t.NdJ("click",function(){return i.confirmAction()}),t.YNc(17,VS,2,0,"span",11),t._uU(18),t.ALo(19,"mytranslate"),t.qZA()()()()()),2&e&&(t.xp6(5),t.Oqu(t.lcZ(6,8,"lang_cms_utils_update_folder")),t.xp6(3),t.Q6J("formGroup",i.form),t.xp6(1),t.s9C("placeholder",t.lcZ(10,10,"lang_cms_utils_folder_name")),t.xp6(2),t.Q6J("ngIf",i.form.controls.folderName.errors&&i.form.controls.folderName.dirty),t.xp6(3),t.hij(" ",t.lcZ(15,12,"lang_cms_common_close_btn")," "),t.xp6(2),t.Q6J("disabled",i.statusObj.loading||i.form.invalid),t.xp6(1),t.Q6J("ngIf",i.statusObj.loading),t.xp6(1),t.hij(" ",t.lcZ(19,14,"lang_cms_common_confirm_btn")," "))},dependencies:[D.O5,f._Y,f.Fj,f.JJ,f.JL,f.sg,f.u,oo.M,oi.n,jt.JV],encapsulation:2}),n})(),tO=(()=>{class n{doExamCategoryAction(e,i){switch(i){case $f.ADD_FOLDER:return this.showAddFolderDialog(e);case $f.EDIT_FOLDER:return this.showEditFolderDialog(e)}}showAddFolderDialog(e){return new it.y(i=>{this.sAztDialogService.open($S,{width:"600px",enterAnimationDuration:"0ms",exitAnimationDuration:"0ms",data:{categoryId:e.categoryId,type:1,isShow:!0},restoreFocus:!1}).afterClosed().subscribe(s=>{s?(i.next({reloadData:!0}),i.complete()):(i.next({reloadData:!1}),i.complete())})})}showEditFolderDialog(e){return new it.y(i=>{e.examCategoryObj?this.sAztDialogService.open(XS,{data:{obj:e.examCategoryObj,categoryId:0,type:1,isShow:!0},restoreFocus:!1,width:"550px"}).afterClosed().subscribe(s=>{s?(i.next({reloadData:!0}),i.complete()):(i.next({reloadData:!1}),i.complete())}):(i.next({reloadData:!1}),i.complete())})}constructor(e){this.sAztDialogService=e}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(Fi.C))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Uy=M(83306),yp=M(23655);function eO(n,o){1&n&&(t.TgZ(0,"div"),t.Hsn(1),t.qZA())}const nO=["*"];let iO=(()=>{class n extends St.Q{checkPermissionCallApi(){this.waitDestroy(this.testMarketQuestionService.apiTestMarketQuestionsPermissionGet(this.applyType).subscribe(e=>{1==e.success?(this.hasPermission=e.data?.obj??!1,this.successStatusObj()):this.errorStatusObj(e.message??"")}))}ngOnInit(){this.checkPermissionCallApi()}constructor(e){super(),this.testMarketQuestionService=e,this.applyType="",this.hasPermission=!1}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(yp.Q_))},n.\u0275cmp=t.Xpm({type:n,selectors:[["azt-permission-checking"]],inputs:{applyType:"applyType"},features:[t.qOj],ngContentSelectors:nO,decls:1,vars:1,consts:[[4,"ngIf"]],template:function(e,i){1&e&&(t.F$t(),t.YNc(0,eO,2,0,"div",0)),2&e&&t.Q6J("ngIf",i.hasPermission)},dependencies:[D.O5],encapsulation:2}),n})();var Yf=M(25368),zl=M(31225),sr=M(94145),oO=M(20760),Dm=M(31810),aO=M(25690),A6=M(55948),rO=M(16007);function sO(n,o){if(1&n&&t._UZ(0,"mat-progress-bar",8),2&n){const e=t.oxw();t.Q6J("value",100*(e.totalDocumentObjs>0?e.totalSavedObjs/e.totalDocumentObjs:0))("bufferValue",100)}}let lO=(()=>{class n extends lo.e{askBeforeCloseWindow(e){return!this.onProcessCopy||(e.returnValue=!1)}confirmDialog(e,i,a,r){this.sAztDialogService.open(cp,{width:a,data:{title:e,msg:i},restoreFocus:!1}).afterClosed().subscribe(l=>{r(!0===l)})}onNoClick(){this.stopProcess=!0,this.confirmDialog("lang_auto_huy_copy","lang_auto_ban_co_chac_chan_muon_huy_tien_trinh_copy_khong","400px",e=>{e?this.closeDialog(!0):(this.stopProcess=!1,this.closeDialog(!1))})}closeDialog(e){e&&(this.onProcessCopy=!1,this.dialogRef.close(e))}getDocumentToCopy(){this.stopProcess=!1,this.onProcessCopy=!0,this.totalSavedObjs=0,this.totalDocumentObjs=0;let e=this.clipboardService.getCurrentClipBoard();var i=[],a=[];e.forEach(r=>{r.action==zl.h.COPY&&(r.type==sr.Y.EXAM_CATEGORY?i.push({fromCategoryId:r.id??0,fromCategoryName:r.name??"",fromCategoryObjs:void 0,fromDocumentObjs:void 0,parentOfNewCategoryId:this.data.copyToCateId??0,toNewCategoryId:void 0}):a.push(r))}),a.length>0&&i.push({fromCategoryId:0,fromCategoryName:"",fromCategoryObjs:[],fromDocumentObjs:a,parentOfNewCategoryId:0,toNewCategoryId:this.data.copyToCateId??0}),i.length>0?this._copyChildCategoryObjs(!0,this.commonService.myClone(i),0,{},r=>{r?(this.showErrorSnack(r),this.closeDialog(!1)):this._copyChildCategoryObjs(!1,this.commonService.myClone(i),0,{},s=>{s?(this.showErrorSnack(s),this.closeDialog(!1)):this.closeDialog(!0)})}):this.closeDialog(!1)}_copyOneCategoryObj(e,i,a,r){if(null==i.toNewCategoryId)e?(i.toNewCategoryId=0,this._copyOneCategoryObj(e,i,a,r)):this._createNewFolderOnNewCate(i,(l,c)=>{c?r(this.commonService.translateToKeyParam(c," "+i.fromCategoryName)):(a[l]=1,i.toNewCategoryId=l,this._copyOneCategoryObj(e,i,a,r))});else if(null==i.fromCategoryObjs)this._getDocumentOfChildFolder(a,i,(l,c,d)=>{d?r(this.commonService.translateToKeyParam(d," "+i.fromCategoryName)):(i.fromCategoryObjs=l,i.fromDocumentObjs=c,this._copyOneCategoryObj(e,i,a,r))});else if(i.fromDocumentObjs&&i.fromDocumentObjs.length>0)if(e)this.totalDocumentObjs+=i.fromDocumentObjs?.length??0,i.fromDocumentObjs=[],this._copyOneCategoryObj(e,i,a,r);else{var s=[];i.fromDocumentObjs.forEach(l=>{s.push({id:l.id,type:l.type,action:l.action})}),this._callSaveCopyDocument(i.toNewCategoryId,s,0,10,l=>{i.fromDocumentObjs=[],this._copyOneCategoryObj(e,i,a,r)})}else i.fromCategoryObjs.length>0?this._copyChildCategoryObjs(e,i.fromCategoryObjs,0,a,r):r(void 0)}_copyChildCategoryObjs(e,i,a=0,r,s){this.onProcessCopy&&i.length>a?this._copyOneCategoryObj(e,i[a],r,l=>{l?s(l):setTimeout(()=>{this._copyChildCategoryObjs(e,i,a+1,r,s)},100)}):s(void 0)}_getDocumentOfChildFolder(e,i,a){var r=function(s,l){let c=s?.categoryObjs??[],d=s?.documentObjs??[],h=[],_=[];c.forEach(x=>{e.hasOwnProperty(x.id??0)||h.push({fromCategoryId:x.id??0,fromCategoryName:x.name??"",fromCategoryObjs:void 0,fromDocumentObjs:void 0,parentOfNewCategoryId:i.toNewCategoryId??0,toNewCategoryId:void 0})}),d.forEach(x=>{x.exam&&_.push({id:x.exam.id??0,name:x.exam.name??"",type:sr.Y.EXAM,action:zl.h.COPY})}),l(h,_,void 0)};if(this.cacheApiResponseByCategoryIds.hasOwnProperty(i.fromCategoryId))r(this.cacheApiResponseByCategoryIds[i.fromCategoryId],a);else{let s={categoryId:i.fromCategoryId,documentType:void 0,shareType:void 0,fileType:void 0,classroomId:void 0,name:void 0,suggestExamPurpose:void 0,lite:1,getGlobal:0,page:1,itemPerPage:-1};this.documentService.apiDocumentsGet(s.categoryId,s.documentType,s.shareType,s.fileType,s.classroomId,s.name,s.suggestExamPurpose,s.lite,s.getGlobal,s.page,s.itemPerPage).subscribe(l=>{l&&1==l.success?(this.cacheApiResponseByCategoryIds[i.fromCategoryId]=l.data,r(l.data,a)):a([],[],l.message??"lang_cms_error_to_get_folder_data")})}}_createNewFolderOnNewCate(e,i){this.waitDestroy(this.examCategoryService.apiExamCategorySaveObjPost({name:e.fromCategoryName,parentId:e.parentOfNewCategoryId}).subscribe(r=>{1==r.success?i(r.data?.obj?.id??0,r.data?.obj?.id?void 0:"lang_cms_error_to_create_folder"):i(0,r.message)}))}_callSaveCopyDocument(e,i,a,r=10,s){if(this.stopProcess)this.onProcessCopy?setTimeout(()=>{this._callSaveCopyDocument(e,i,a,r,s)},100):s(void 0);else if(this.onProcessCopy){var l=i.slice(a,a+r);l.length>0?this.waitDestroy(this.examCategoryService.apiExamCategoryCopyOrCutOrDeletePost(e,{copyOrCutObjs:l}).subscribe(c=>{c&&1==c.success?(a+=l.length,this.totalSavedObjs+=l.length,setTimeout(()=>{this._callSaveCopyDocument(e,i,a,r,s)},100)):s(c.message)})):s(void 0)}else s(void 0)}ngOnInit(){this.getDocumentToCopy(),this.dialogRef.backdropClick().subscribe(e=>{this.onNoClick()})}constructor(e,i,a,r,s,l){super(l,s),this.examCategoryService=e,this.clipboardService=i,this.documentService=a,this.sAztDialogService=r,this.dialogRef=s,this.data=l,this.onProcessCopy=!0,this.stopProcess=!1,this.totalSavedObjs=0,this.totalDocumentObjs=0,this.cacheApiResponseByCategoryIds={}}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Ke.F1),t.Y36(A6.e),t.Y36(Ke.Zg),t.Y36(Fi.C),t.Y36($.so),t.Y36($.WI))},n.\u0275cmp=t.Xpm({type:n,selectors:[["copy-folder-dialog"]],hostBindings:function(e,i){1&e&&t.NdJ("beforeunload",function(r){return i.askBeforeCloseWindow(r)},!1,t.Jf7)},features:[t.qOj],decls:13,vars:10,consts:[[1,"box",2,"max-width","500px"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5"],[1,"text-md","font-medium","flex","items-center"],[1,"mt-3"],["mode","determinate",3,"value","bufferValue",4,"ngIf"],[1,"p-3","text-right"],["azt-track-service","copy-folder-dialog-IxIj_JqXunF",1,"btn","btn-secondary","w-24","mr-2",3,"click"],["mode","determinate",3,"value","bufferValue"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),t._uU(4),t.ALo(5,"mytranslate"),t.ALo(6,"mytranslate"),t.qZA(),t.TgZ(7,"div",4),t.YNc(8,sO,1,2,"mat-progress-bar",5),t.qZA()()(),t.TgZ(9,"div",6)(10,"button",7),t.NdJ("click",function(){return i.onNoClick()}),t._uU(11),t.ALo(12,"mytranslate"),t.qZA()()()),2&e&&(t.xp6(4),t.AsE(" ",t.lcZ(5,4,"lang_auto_he_thong_dang_copy_du_lieu"),"",t.lcZ(6,6,"lang_auto__vui_long_khong_tai_lai_trang")," "),t.xp6(4),t.Q6J("ngIf",i.onProcessCopy),t.xp6(3),t.hij(" ",t.lcZ(12,8,"lang_auto_huy")," "))},dependencies:[D.O5,rO.pW,jt.JV],styles:[".btn-hover[_ngcontent-%COMP%]:hover{background-color:#cbc8c8}"]}),n})();var cO=M(96573);function uO(n,o){if(1&n&&(t.TgZ(0,"div",20)(1,"span",10),t._uU(2),t.ALo(3,"mytranslate"),t._UZ(4,"azt-see-more-content",21),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,3,"lang_auto_thu_muc"),":\xa0 "),t.xp6(2),t.Q6J("content",e.folderNames)("maxLength",200)}}function dO(n,o){if(1&n&&(t.TgZ(0,"div",20)(1,"span",10),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t._uU(4,"\xa0"),t.TgZ(5,"span",10),t._UZ(6,"azt-see-more-content",21),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.hij("",t.lcZ(3,3,"lang_auto_only_de_thi"),":"),t.xp6(4),t.Q6J("content",e.examNames)("maxLength",200)}}let mO=(()=>{class n extends lo.e{onNoClick(){this.dialogRef.close(!1)}onAccept(){this.dialogRef.close(!0)}constructor(e,i){super(i,e),this.dialogRef=e,this.data=i,this.enumDocumentType=sr.Y,this.folderNames="",this.examNames="",this.folderNames=i.clipboardObjs.filter(a=>a.type==sr.Y.EXAM_CATEGORY).map(a=>this.commonService.myTranslateInstant(a.name)).join(", "),this.examNames=i.clipboardObjs.filter(a=>a.type==sr.Y.EXAM).map(a=>a.name).join(", ")}}return n.\u0275fac=function(e){return new(e||n)(t.Y36($.so),t.Y36($.WI))},n.\u0275cmp=t.Xpm({type:n,selectors:[["multiple-delete-confirm"]],features:[t.qOj],decls:39,vars:25,consts:[[1,"box","w-72","sm:w-80"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5"],[1,"text-md","font-medium","flex","items-center","mb-2"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-6","h-6","mr-2","text-danger"],["d","M3 6h18"],["d","M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"],["d","M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"],["x1","10","y1","11","x2","10","y2","17"],["x1","14","y1","11","x2","14","y2","17"],[1,"font-medium"],[1,"contentBoxNmae"],[3,"defaultHeight"],[1,"p-2","w-64","sm:w-full"],["class","text-slate-500 dark:text-slate-400 mb-2",4,"ngIf"],[1,"text-xs","text-slate-500","dark:text-slate-400"],[2,"text-transform","lowercase"],[1,"p-3","text-right"],["azt-track-service","multiple-delete-dialog-NgJ73bNleKj",1,"btn","btn-secondary","w-24","mr-2",3,"click"],["azt-track-service","multiple-delete-dialog-zU2F66X2jAh",1,"btn","w-24","btn-danger",3,"click"],[1,"text-slate-500","dark:text-slate-400","mb-2"],[3,"content","maxLength"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),t.O4$(),t.TgZ(4,"svg",4),t._UZ(5,"path",5)(6,"path",6)(7,"path",7)(8,"line",8)(9,"line",9),t.qZA(),t.kcU(),t.TgZ(10,"span"),t._uU(11),t.ALo(12,"mytranslate"),t.TgZ(13,"span",10),t._uU(14),t.qZA(),t._uU(15),t.ALo(16,"mytranslate"),t.qZA()(),t.TgZ(17,"div",11)(18,"azt-mat-dialog-content",12)(19,"div",13),t.YNc(20,uO,5,5,"div",14),t.YNc(21,dO,7,5,"div",14),t.TgZ(22,"p",15)(23,"span"),t._uU(24),t.ALo(25,"mytranslate"),t.qZA(),t.TgZ(26,"span",16),t._uU(27),t.ALo(28,"mytranslate"),t.qZA(),t.TgZ(29,"span"),t._uU(30),t.ALo(31,"mytranslate"),t.qZA()()()()()()(),t.TgZ(32,"div",17)(33,"button",18),t.NdJ("click",function(){return i.onNoClick()}),t._uU(34),t.ALo(35,"mytranslate"),t.qZA(),t.TgZ(36,"button",19),t.NdJ("click",function(){return i.onAccept()}),t._uU(37),t.ALo(38,"mytranslate"),t.qZA()()()),2&e&&(t.xp6(11),t.hij(" ",t.lcZ(12,11,"lang_auto_ban_co_chac_chan_muon_xoa"),"\xa0"),t.xp6(3),t.Oqu(i.data.clipboardObjs.length),t.xp6(1),t.hij("\xa0",t.lcZ(16,13,"lang_auto_tai_lieu_vua_chon")," "),t.xp6(3),t.Q6J("defaultHeight",70),t.xp6(2),t.Q6J("ngIf",""!=i.folderNames),t.xp6(1),t.Q6J("ngIf",""!=i.examNames),t.xp6(3),t.Oqu(t.lcZ(25,15,"lang_auto_khi_xac_nhan")+", "),t.xp6(3),t.hij("",t.lcZ(28,17,"lang_auto_tai_lieu"),"\xa0"),t.xp6(3),t.Oqu(t.lcZ(31,19,"lang_auto_se_duoc_chuyen_vao_thung_rac_ban_co_the_dot")),t.xp6(4),t.hij(" ",t.lcZ(35,21,"lang_cms_common_close_btn")," "),t.xp6(3),t.hij(" ",t.lcZ(38,23,"lang_cms_common_confirm_btn")," "))},dependencies:[D.O5,cO.c,Ic.R,jt.JV],encapsulation:2}),n})();var hO=M(20254),pO=M(27722),wp=M(45468);let _O=(()=>{class n{redirectByAction(e,i,a){switch(i){case Dm.T.OFFLINE_CONFIG:this.goToOfflineConfigPage(e);break;case Dm.T.CONFIG_EXAM:this.goToConfigExamPage(e);break;case Dm.T.EDIT_EXAM:this.goToEditExamPage(e);break;case Dm.T.POWER_POINT:this.goToPowerPointPage(e);break;case Dm.T.STATISTIC:this.goToStatisticPage(e);break;case Dm.T.TESTED_LIST:this.goToTestedListPage(e,a)}}goToOfflineConfigPage(e){let i=`/admin/testbank/document-management/0/${e.categoryId}/${e.currentPage}`+(e.backToData?.shareType?"?data="+this.commonService.serializeJson({shareType:e.backToData?.shareType}):"");this.commonService.myNavigationWithQueryString("/admin/testbank/action-online-offline/"+e.categoryId+"/"+e.examObj.hashId,"?backto="+encodeURIComponent(i))}goToConfigExamPage(e){let i=`/admin/testbank/document-management/0/${e.categoryId}/${e.currentPage}`+(e.backToData?.shareType?"?data="+this.commonService.serializeJson({shareType:e.backToData?.shareType}):"");this.homeworkExamService.isOfflineExam(e.examObj)?this.commonService.myNavigationWithQueryString("/admin/testbank/config-exam-offline/"+e.categoryId+"/"+e.examObj.hashId,"?backto="+encodeURIComponent(i)):this.commonService.myNavigationWithQueryString("/admin/testbank/action-online-offline/"+e.categoryId+"/"+e.examObj.hashId,"?backto="+encodeURIComponent(i))}goToEditExamPage(e){let i=`/admin/testbank/document-management/0/${e.categoryId}/${e.currentPage}`+(e.backToData?.shareType?"?data="+this.commonService.serializeJson({shareType:e.backToData?.shareType}):"");this.commonService.myNavigationWithQueryString((e.examObj.orcLogId??0)<0?"/admin/testbank/update-offline-exam/"+e.categoryId+"/"+e.examObj.hashId:"/admin/testbank/update-exam/"+e.categoryId+"/"+e.examObj.id,"?backto="+encodeURIComponent(i))}goToPowerPointPage(e){let i=`/admin/testbank/document-management/0/${e.categoryId}/${e.currentPage}`+(e.backToData?.shareType?"?data="+this.commonService.serializeJson({shareType:e.backToData?.shareType}):"");this.commonService.myNavigationWithQueryString("/admin/testbank/powerpoint/"+e.categoryId+"/"+e.examObj.id,"?backto="+encodeURIComponent(i))}goToStatisticPage(e){let i=`/admin/testbank/document-management/0/${e.categoryId}/${e.currentPage}`+(e.backToData?.shareType?"?data="+this.commonService.serializeJson({shareType:e.backToData?.shareType}):"");this.commonService.myNavigationWithQueryString(`/admin/testbank/statistic/${e.examObj.categoryId?e.examObj.categoryId:0}/${e.examObj.id}`,"?backto="+encodeURIComponent(i))}goToTestedListPage(e,i){let a=`/admin/testbank/document-management/0/${e.categoryId}/${e.currentPage}`+(e.backToData?.shareType?"?data="+this.commonService.serializeJson({shareType:e.backToData?.shareType}):"");i?this.commonService.myNavigationToNewTab("/admin/testbank/exam-results-list/"+e.categoryId+"/"+e.examObj.id+"/0","?backto="+encodeURIComponent(a)):this.commonService.myNavigationWithQueryString("/admin/testbank/exam-results-list/"+e.categoryId+"/"+e.examObj.id+"/0","?backto="+encodeURIComponent(a))}constructor(e,i){this.commonService=e,this.homeworkExamService=i}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(mi.z),t.LFG(wp.v))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Cp=M(70342),Jl=M(93523),z0=M(71299);const By=function(n){return{active:n}},fO=function(n){return{clickable:n}},zy=function(n){return{"truncate-bread":n}};function gO(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"li",37)(1,"a",38),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.backToParentCategoryEvent(r))}),t.TgZ(2,"span",39,40),t.ALo(4,"mytranslate"),t.TgZ(5,"span"),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()()()()}if(2&n){const e=o.$implicit,i=t.MAs(3),a=t.oxw();t.Q6J("ngClass",t.VKq(11,By,e.id==a.currentCategoryId)),t.xp6(1),t.Q6J("ngClass",t.VKq(13,fO,e.id!=a.currentCategoryId)),t.xp6(1),t.s9C("matTooltip",t.lcZ(4,7,e.name)),t.Q6J("ngClass",t.VKq(15,zy,e.id!=a.currentCategoryId))("isDisabledTooltip",!1)("matTooltipDisabled",i.isDisabled),t.xp6(4),t.Oqu(t.lcZ(7,9,e.name))}}const xO=function(n){return{"w-full":n}};function bO(n,o){if(1&n&&(t.TgZ(0,"span",50),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n){const e=t.oxw(2);t.Q6J("ngClass",t.VKq(5,xO,e.isMobileDevice||e.isMobileWebView)),t.xp6(1),t.AsE("",t.lcZ(2,3,"lang_auto_da_chon")," ",e.totalCheckboxSelected,"")}}function vO(n,o){if(1&n){const e=t.EpF();t.O4$(),t.kcU(),t.TgZ(0,"button",51),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.acceptCutAllDocumentObjs(void 0,void 0))}),t.O4$(),t.TgZ(1,"svg",20),t._UZ(2,"polyline",52)(3,"polyline",53)(4,"polyline",54)(5,"polyline",55)(6,"line",56)(7,"line",57),t.qZA(),t._uU(8),t.ALo(9,"mytranslate"),t.qZA()}2&n&&(t.xp6(8),t.hij(" ",t.lcZ(9,1,"lang_auto_cut")," "))}function yO(n,o){if(1&n){const e=t.EpF();t.O4$(),t.kcU(),t.TgZ(0,"button",58),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.handlePasteDataToFolder(a.currentCategoryId))}),t.O4$(),t.TgZ(1,"svg",59),t._UZ(2,"rect",60)(3,"path",61),t.qZA(),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()}2&n&&(t.xp6(4),t.hij(" ",t.lcZ(5,1,"lang_auto_paste")," "))}function wO(n,o){if(1&n){const e=t.EpF();t.O4$(),t.kcU(),t.TgZ(0,"button",62),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.acceptDeleteAllDocumentObjs(void 0,void 0))}),t.O4$(),t.TgZ(1,"svg",20),t._UZ(2,"path",63)(3,"path",64)(4,"path",65)(5,"line",66)(6,"line",67),t.qZA(),t._uU(7),t.ALo(8,"mytranslate"),t.qZA()}2&n&&(t.xp6(7),t.hij(" ",t.lcZ(8,1,"lang_auto_xoa")," "))}function CO(n,o){if(1&n&&(t.O4$(),t.kcU(),t.TgZ(0,"button",68),t.O4$(),t.TgZ(1,"svg",69),t._UZ(2,"circle",70)(3,"circle",71)(4,"circle",72),t.qZA()()),2&n){t.oxw(2);const e=t.MAs(19);t.Q6J("matMenuTriggerFor",e)}}const TO=function(n){return{"justify-between":n}};function kO(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",41),t.YNc(1,bO,3,7,"span",42),t.TgZ(2,"button",43),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.acceptCopyAllDocumentObjs(void 0,void 0))}),t.O4$(),t.TgZ(3,"svg",20),t._UZ(4,"rect",44)(5,"path",45),t.qZA(),t._uU(6),t.ALo(7,"mytranslate"),t.qZA(),t.YNc(8,vO,10,3,"button",46),t.YNc(9,yO,6,3,"button",47),t.YNc(10,wO,9,3,"button",48),t.YNc(11,CO,5,1,"button",49),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("ngClass",t.VKq(9,TO,e.isMobileDevice||e.isMobileWebView)),t.xp6(1),t.Q6J("ngIf",e.totalCheckboxSelected>0),t.xp6(5),t.hij(" ",t.lcZ(7,7,"lang_auto_copy")," "),t.xp6(2),t.Q6J("ngIf",!e.shareType||"owner"==e.shareType),t.xp6(1),t.Q6J("ngIf",e.hasCopyOrCutInClipboard()&&e.checkCurrentCatePastePermission()),t.xp6(1),t.Q6J("ngIf",!e.shareType||"owner"==e.shareType),t.xp6(1),t.Q6J("ngIf",!(null!=e.currentCategory&&e.currentCategory.isGlobalAzota))}}function AO(n,o){1&n&&(t.TgZ(0,"div",73)(1,"div",74),t.O4$(),t.TgZ(2,"svg",75),t._UZ(3,"path",76)(4,"path",77)(5,"path",78)(6,"path",79),t.qZA(),t.kcU(),t.TgZ(7,"p",80),t._uU(8),t.ALo(9,"mytranslate"),t.qZA()()()),2&n&&(t.xp6(8),t.hij("",t.lcZ(9,1,"lang_not_found_search"),"!"))}function SO(n,o){if(1&n&&(t.ynx(0),t.GkF(1,81),t.BQk()),2&n){const e=t.oxw(),i=t.MAs(17),a=t.MAs(15);t.xp6(1),t.Q6J("ngTemplateOutlet",e.isShowSearchResult?i:a)}}function OO(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"input",98),t.NdJ("change",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.selectOrUnselectAllDocumentObjs())}),t.qZA(),t.BQk()}}const Zc=function(n){return{"text-primary stroke-width-2.5":n}};function EO(n,o){if(1&n){const e=t.EpF();t.O4$(),t.kcU(),t.TgZ(0,"div",99)(1,"div",100),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.sortDocumentByColumn(a.enumDocumentSortType.BY_ATTENDED,null==a.currentDocumentSortTypeObj?null:a.currentDocumentSortTypeObj.isAscSort))}),t.TgZ(2,"span",101),t._uU(3),t.ALo(4,"mytranslate"),t.TgZ(5,"div",88),t.O4$(),t.TgZ(6,"svg",89),t._UZ(7,"polyline",90),t.qZA(),t.TgZ(8,"svg",91),t._UZ(9,"polyline",92),t.qZA()()()()()}if(2&n){const e=t.oxw(2);t.xp6(3),t.hij(" ",t.lcZ(4,3,"lang_testbank_folder_and_file_number_attended")," "),t.xp6(3),t.Q6J("ngClass",t.VKq(5,Zc,1==(null==e.currentDocumentSortTypeObj?null:e.currentDocumentSortTypeObj.isAscSort)&&(null==e.currentDocumentSortTypeObj?null:e.currentDocumentSortTypeObj.isColumnSortType)==e.enumDocumentSortType.BY_ATTENDED)),t.xp6(2),t.Q6J("ngClass",t.VKq(7,Zc,0==(null==e.currentDocumentSortTypeObj?null:e.currentDocumentSortTypeObj.isAscSort)&&(null==e.currentDocumentSortTypeObj?null:e.currentDocumentSortTypeObj.isColumnSortType)==e.enumDocumentSortType.BY_ATTENDED))}}function MO(n,o){if(1&n){const e=t.EpF();t.O4$(),t.kcU(),t.TgZ(0,"div",99)(1,"div",102)(2,"div",103),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.sortDocumentByColumn(a.enumDocumentSortType.BY_PUBLISH_STATUS,null==a.currentDocumentSortTypeObj?null:a.currentDocumentSortTypeObj.isAscSort))}),t._uU(3),t.ALo(4,"mytranslate"),t.TgZ(5,"div",88),t.O4$(),t.TgZ(6,"svg",89),t._UZ(7,"polyline",90),t.qZA(),t.TgZ(8,"svg",91),t._UZ(9,"polyline",92),t.qZA()()()()()}if(2&n){const e=t.oxw(2);t.xp6(3),t.hij(" ",t.lcZ(4,3,"lang_testbank_folder_and_file_status")," "),t.xp6(3),t.Q6J("ngClass",t.VKq(5,Zc,1==(null==e.currentDocumentSortTypeObj?null:e.currentDocumentSortTypeObj.isAscSort)&&(null==e.currentDocumentSortTypeObj?null:e.currentDocumentSortTypeObj.isColumnSortType)==e.enumDocumentSortType.BY_PUBLISH_STATUS)),t.xp6(2),t.Q6J("ngClass",t.VKq(7,Zc,0==(null==e.currentDocumentSortTypeObj?null:e.currentDocumentSortTypeObj.isAscSort)&&(null==e.currentDocumentSortTypeObj?null:e.currentDocumentSortTypeObj.isColumnSortType)==e.enumDocumentSortType.BY_PUBLISH_STATUS))}}function IO(n,o){1&n&&(t.O4$(),t.kcU(),t.TgZ(0,"div",99)(1,"div",104),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"lang_testbank_folder_and_file_delivery_for")," "))}function LO(n,o){if(1&n){const e=t.EpF();t.O4$(),t.kcU(),t.TgZ(0,"div",99)(1,"div",105),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.sortDocumentByColumn(a.enumDocumentSortType.BY_UPDATED_DATE,null==a.currentDocumentSortTypeObj?null:a.currentDocumentSortTypeObj.isAscSort))}),t.TgZ(2,"div",106),t._uU(3),t.ALo(4,"mytranslate"),t.qZA(),t.TgZ(5,"div",88),t.O4$(),t.TgZ(6,"svg",89),t._UZ(7,"polyline",90),t.qZA(),t.TgZ(8,"svg",91),t._UZ(9,"polyline",92),t.qZA()()()()}if(2&n){const e=t.oxw(2);t.xp6(3),t.hij(" ",t.lcZ(4,3,"lang_testbank_folder_and_file_time_update")," "),t.xp6(3),t.Q6J("ngClass",t.VKq(5,Zc,1==(null==e.currentDocumentSortTypeObj?null:e.currentDocumentSortTypeObj.isAscSort)&&(null==e.currentDocumentSortTypeObj?null:e.currentDocumentSortTypeObj.isColumnSortType)==e.enumDocumentSortType.BY_UPDATED_DATE)),t.xp6(2),t.Q6J("ngClass",t.VKq(7,Zc,0==(null==e.currentDocumentSortTypeObj?null:e.currentDocumentSortTypeObj.isAscSort)&&(null==e.currentDocumentSortTypeObj?null:e.currentDocumentSortTypeObj.isColumnSortType)==e.enumDocumentSortType.BY_UPDATED_DATE))}}function PO(n,o){1&n&&(t.ynx(0),t._UZ(1,"input",124),t.BQk())}function NO(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"span",82)(1,"input",129),t.NdJ("change",function(){t.CHM(e);const a=t.oxw(6);return t.KtG(a.removeValueOfFormInClipboard())}),t.qZA()()}if(2&n){const e=t.oxw().$implicit;t.Q6J("formGroup",e)}}function ZO(n,o){if(1&n&&(t.ynx(0),t.YNc(1,NO,2,1,"span",128),t.BQk()),2&n){const e=o.$implicit;t.xp6(1),t.Q6J("ngIf",e)}}const S6=function(n){return[n]};function DO(n,o){if(1&n&&(t.TgZ(0,"span",127),t.YNc(1,ZO,2,1,"ng-container",96),t.qZA()),2&n){const e=t.oxw(2).$implicit,i=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",t.VKq(1,S6,i.getClipboardFormGroupByExamCategory(e)))}}function jO(n,o){1&n&&t._UZ(0,"input",124)}function qO(n,o){if(1&n&&(t.YNc(0,DO,2,3,"span",125),t.ALo(1,"fullPermission"),t.YNc(2,jO,1,0,"ng-template",null,126,t.W1O)),2&n){const e=t.MAs(3),i=t.oxw().$implicit;t.Q6J("ngIf",-1!=i.id&&t.xi3(1,2,i,"exam"))("ngIfElse",e)}}function FO(n,o){1&n&&(t.ynx(0),t.O4$(),t.TgZ(1,"svg",130)(2,"g",131),t._UZ(3,"path",132)(4,"path",133)(5,"path",134)(6,"path",135),t.qZA()(),t.BQk())}function QO(n,o){1&n&&(t.TgZ(0,"span"),t.O4$(),t.TgZ(1,"svg",137),t.ALo(2,"mytranslate"),t._UZ(3,"path",138)(4,"path",139)(5,"path",140),t.qZA()()),2&n&&(t.xp6(1),t.s9C("matTooltip",t.lcZ(2,1,"lang_auto_da_chia_se")))}function RO(n,o){1&n&&(t.O4$(),t.TgZ(0,"svg",141),t._UZ(1,"path",142),t.qZA())}function UO(n,o){if(1&n&&(t.YNc(0,QO,6,3,"span",113),t.YNc(1,RO,2,0,"ng-template",null,136,t.W1O)),2&n){const e=t.MAs(2),i=t.oxw().$implicit;t.Q6J("ngIf",i.shared)("ngIfElse",e)}}function BO(n,o){1&n&&(t.TgZ(0,"span",143),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_de_chung_azota")," "))}function zO(n,o){1&n&&(t.TgZ(0,"span",144),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_auto_chia_se")))}function JO(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",145),t.NdJ("click",function(a){t.CHM(e);const r=t.oxw().$implicit,s=t.oxw(2),l=t.MAs(39);return t.KtG(s.onContextMenu(a,r,l))}),t.O4$(),t.TgZ(1,"svg",146),t._UZ(2,"circle",70)(3,"circle",71)(4,"circle",72),t.qZA()()}if(2&n){const e=t.oxw().$implicit;t.Q6J("disabled",!e.id||e.id<0||"user"==e.shareType)}}function HO(n,o){1&n&&(t.TgZ(0,"div",147),t._UZ(1,"div",148),t.qZA())}function GO(n,o){1&n&&(t.TgZ(0,"div",147),t._UZ(1,"div",102),t.qZA())}function $O(n,o){1&n&&(t.TgZ(0,"div",147),t._UZ(1,"div",149),t.qZA())}function YO(n,o){if(1&n&&(t.TgZ(0,"div",150)(1,"div",151)(2,"span",152),t._uU(3),t.ALo(4,"mytranslate"),t.qZA(),t._uU(5),t.ALo(6,"formatFullDateTimeWithoutSecondByUserUnitPipe"),t.qZA()()),2&n){const e=t.oxw().$implicit;t.xp6(3),t.hij("",t.lcZ(4,2,"lang_testbank_folder_and_file_time_update"),":\xa0"),t.xp6(2),t.hij("",t.lcZ(6,4,e.updatedAt)," ")}}const O6=function(n){return{opacity:n}},J0=function(n){return{"border-b":n}},Tp=function(n,o){return{"col-span-4":n,"col-span-12":o}},E6=function(n,o){return{"w-60":n,"w-52":o}};function KO(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",107)(1,"div",108)(2,"div",109)(3,"div",110)(4,"div",111)(5,"div",112),t.YNc(6,PO,2,0,"ng-container",113),t.YNc(7,qO,4,5,"ng-template",null,114,t.W1O),t.qZA(),t.TgZ(9,"div",115),t.NdJ("mouseup",function(a){const s=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(2===a.button||l.handleOpenFolder(s,1===a.button))}),t.TgZ(10,"div",116),t.YNc(11,FO,7,0,"ng-container",113),t.YNc(12,UO,3,2,"ng-template",null,117,t.W1O),t.qZA(),t.TgZ(14,"div",118,40),t.ALo(16,"mytranslate"),t.TgZ(17,"span"),t._uU(18),t.ALo(19,"mytranslate"),t.qZA()(),t.YNc(20,BO,3,3,"span",119),t.YNc(21,zO,3,3,"span",120),t.qZA()(),t.YNc(22,JO,5,1,"button",121),t.qZA(),t.YNc(23,HO,2,0,"div",122),t.YNc(24,GO,2,0,"div",122),t.YNc(25,$O,2,0,"div",122),t.YNc(26,YO,7,6,"div",123),t.qZA()()()}if(2&n){const e=o.$implicit,i=o.last,a=t.MAs(8),r=t.MAs(13),s=t.MAs(15),l=t.oxw(2),c=t.MAs(52),d=t.MAs(39);t.s9C("id","folder_"+e.id),t.Q6J("ngStyle",t.VKq(29,O6,l.isSelectedExamCategoryInClipboard(e)?"0.6":"1"))("contextMenu",!e.id||e.id<0||"user"==e.shareType?c:d)("contextMenuValue",e),t.xp6(1),t.Q6J("ngClass",t.VKq(31,J0,l.categoryObjs&&(24!=l.categoryObjs.length||24==l.categoryObjs.length&&!i))),t.xp6(2),t.Q6J("ngClass",t.WLB(33,Tp,!l.isMobileWebView,l.isMobileWebView)),t.xp6(3),t.Q6J("ngIf",1==e.isGlobalAzota)("ngIfElse",a),t.xp6(3),t.Q6J("ngClass",t.WLB(36,E6,-1==e.id,-1!=e.id)),t.xp6(2),t.Q6J("ngIf",1==e.isGlobalAzota)("ngIfElse",r),t.xp6(3),t.s9C("matTooltip",t.lcZ(16,25,e.name)),t.Q6J("isDisabledTooltip",!1)("matTooltipDisabled",s.isDisabled),t.xp6(3),t.Tol(l.isMobileWebView&&-1!=e.id?"azt-wv-item-name":""),t.xp6(1),t.Oqu(t.lcZ(19,27,e.name)),t.xp6(2),t.Q6J("ngIf",-1!=e.id&&1==e.isGlobalAzota),t.xp6(1),t.Q6J("ngIf",-1==e.id),t.xp6(1),t.Q6J("ngIf",l.isMobileDevice&&-1!=e.id&&1!=e.isGlobalAzota),t.xp6(1),t.Q6J("ngIf",!l.isMobileWebView),t.xp6(1),t.Q6J("ngIf",!l.isMobileWebView),t.xp6(1),t.Q6J("ngIf",!l.isMobileWebView),t.xp6(1),t.Q6J("ngIf",!l.isMobileWebView&&-1!=e.id&&1!=e.isGlobalAzota)}}function WO(n,o){if(1&n){const e=t.EpF();t.ynx(0,82),t.TgZ(1,"input",166),t.NdJ("change",function(){t.CHM(e);const a=t.oxw(6);return t.KtG(a.removeValueOfFormInClipboard())}),t.qZA(),t.BQk()}if(2&n){const e=t.oxw().$implicit;t.Q6J("formGroup",e)}}function VO(n,o){if(1&n&&(t.ynx(0),t.YNc(1,WO,2,1,"ng-container",128),t.BQk()),2&n){const e=o.$implicit;t.xp6(1),t.Q6J("ngIf",e)}}function XO(n,o){if(1&n&&(t.TgZ(0,"span",127),t.YNc(1,VO,2,1,"ng-container",96),t.qZA()),2&n){const e=t.oxw(2).$implicit,i=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",t.VKq(1,S6,i.getClipboardFormGroupByExam(e.exam)))}}function tE(n,o){1&n&&t._UZ(0,"input",167),2&n&&t.Q6J("disabled",!0)}function eE(n,o){1&n&&(t.O4$(),t.TgZ(0,"svg",168),t.ALo(1,"mytranslate"),t._UZ(2,"path",169)(3,"polyline",170)(4,"path",171),t.qZA()),2&n&&t.s9C("matTooltip",t.lcZ(1,1,"lang_testbank_folder_and_file_published"))}function nE(n,o){1&n&&(t.O4$(),t.TgZ(0,"svg",168),t.ALo(1,"mytranslate"),t._UZ(2,"path",169)(3,"polyline",170),t.qZA()),2&n&&t.s9C("matTooltip",t.lcZ(1,1,"lang_testbank_folder_and_file_Unpublished"))}function iE(n,o){if(1&n&&(t.TgZ(0,"span",172),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.AsE(" ",t.lcZ(2,2,"lang_testbank_folder_and_file_number_attended"),": ",e.exam.attended," ")}}function oE(n,o){1&n&&(t.TgZ(0,"div",173),t.O4$(),t.TgZ(1,"svg",174),t.ALo(2,"mytranslate"),t._UZ(3,"path",175)(4,"path",176)(5,"path",177),t.qZA()()),2&n&&(t.xp6(1),t.s9C("matTooltip",t.lcZ(2,1,"lang_auto_da_chia_se")))}function aE(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",178),t.NdJ("click",function(a){t.CHM(e);const r=t.oxw(2).$implicit,s=t.oxw(2),l=t.MAs(42);return t.KtG(s.onContextMenu(a,r.exam,l))}),t.O4$(),t.TgZ(1,"svg",146),t._UZ(2,"circle",70)(3,"circle",71)(4,"circle",72),t.qZA()()}}function rE(n,o){if(1&n&&(t.TgZ(0,"div",150)(1,"div",179)(2,"span",180)(3,"span",181),t._uU(4),t.ALo(5,"mytranslate"),t.qZA(),t._uU(6),t.qZA()()()),2&n){const e=t.oxw(2).$implicit;t.xp6(4),t.hij("",t.lcZ(5,2,"lang_testbank_folder_and_file_number_attended"),":\xa0"),t.xp6(2),t.hij("",e.exam.attended," ")}}function sE(n,o){if(1&n&&(t.TgZ(0,"div",150)(1,"div",111)(2,"span",182)(3,"span")(4,"span",181),t._uU(5),t.ALo(6,"mytranslate"),t.qZA(),t._uU(7),t.ALo(8,"mytranslate"),t.ALo(9,"mytranslate"),t.qZA()()()()),2&n){const e=t.oxw(2).$implicit;t.xp6(5),t.hij("",t.lcZ(6,2,"lang_testbank_folder_and_file_status"),":\xa0"),t.xp6(2),t.Oqu(1==e.exam.isPublished?t.lcZ(8,4,"lang_testbank_folder_and_file_published"):t.lcZ(9,6,"lang_testbank_folder_and_file_Unpublished"))}}function lE(n,o){if(1&n&&(t.TgZ(0,"span",186,40),t._uU(2),t.ALo(3,"slice"),t.qZA()),2&n){const e=t.MAs(1),i=t.oxw(3).$implicit,a=t.oxw(2);t.Q6J("matTooltip",a.getClassroomName(i.exam.classrooms).join(", "))("isDisabledTooltip",!1)("matTooltipDisabled",e.isDisabled),t.xp6(2),t.Oqu(a.getClassroomName(i.exam.classrooms).join(", ").length>100?t.Dn7(3,4,a.getClassroomName(i.exam.classrooms).join(", "),0,100)+"..":a.getClassroomName(i.exam.classrooms).join(", "))}}function cE(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_auto_tat_ca_moi_nguoi")))}function uE(n,o){if(1&n&&(t.TgZ(0,"div",183)(1,"div",184)(2,"span",181),t._uU(3),t.ALo(4,"mytranslate"),t.qZA(),t.TgZ(5,"span",182),t.YNc(6,lE,4,8,"span",185),t.YNc(7,cE,3,3,"span",11),t.qZA()()()),2&n){const e=t.oxw(2).$implicit;t.xp6(3),t.hij("",t.lcZ(4,3,"lang_testbank_folder_and_file_delivery_for"),":\xa0"),t.xp6(3),t.Q6J("ngIf",e.exam.classrooms&&e.exam.classrooms.length>0),t.xp6(1),t.Q6J("ngIf",!e.exam.classrooms||0==e.exam.classrooms.length)}}function dE(n,o){if(1&n&&(t.TgZ(0,"div",150)(1,"div",151)(2,"span",152),t._uU(3),t.ALo(4,"mytranslate"),t.qZA(),t._uU(5),t.ALo(6,"formatFullDateTimeWithoutSecondByUserUnitPipe"),t.qZA()()),2&n){const e=t.oxw(2).$implicit;t.xp6(3),t.hij("",t.lcZ(4,2,"lang_testbank_folder_and_file_time_update"),":\xa0"),t.xp6(2),t.hij("",t.lcZ(6,4,e.exam.updatedAt)," ")}}function mE(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",154)(1,"div",155)(2,"div",156)(3,"div",110)(4,"div",111)(5,"div",112),t.YNc(6,XO,2,3,"span",125),t.ALo(7,"fullPermission"),t.ALo(8,"copyPermission"),t.YNc(9,tE,1,1,"ng-template",null,157,t.W1O),t.qZA(),t.TgZ(11,"div",158),t.NdJ("mouseup",function(a){t.CHM(e);const r=t.oxw().$implicit,s=t.oxw(2);return t.KtG(2===a.button||s.redirectByDocumentAction(r.exam,s.enumDocumentRedirectType.TESTED_LIST,1===a.button))}),t.TgZ(12,"div",159),t.YNc(13,eE,5,3,"svg",160),t.YNc(14,nE,4,3,"svg",161),t.qZA(),t.TgZ(15,"div",118,40)(17,"span"),t._uU(18),t.qZA(),t.YNc(19,iE,3,4,"span",162),t.qZA(),t.YNc(20,oE,6,3,"div",163),t.qZA()(),t.YNc(21,aE,5,0,"button",164),t.qZA(),t.YNc(22,rE,7,4,"div",123),t.YNc(23,sE,10,8,"div",123),t.YNc(24,uE,8,5,"div",165),t.YNc(25,dE,7,6,"div",123),t.qZA()()()}if(2&n){const e=t.MAs(10),i=t.MAs(16),a=t.oxw(),r=a.$implicit,s=a.last,l=t.oxw(2),c=t.MAs(52),d=t.MAs(42);t.Q6J("ngStyle",t.VKq(29,O6,l.isSelectedExamInClipboard(r.exam)?"0.6":"1"))("contextMenu",!r.exam||l.commonService.isEmptyObj(r.exam.permissionObj)?c:d)("contextMenuValue",r.exam),t.xp6(1),t.Q6J("ngClass",t.VKq(31,J0,!s)),t.xp6(2),t.Q6J("ngClass",t.WLB(33,Tp,!l.isMobileWebView,l.isMobileWebView)),t.xp6(3),t.Q6J("ngIf",t.xi3(7,23,r.exam,"exam")||t.xi3(8,26,r.exam,"exam"))("ngIfElse",e),t.xp6(7),t.Q6J("ngIf",1==r.exam.isPublished),t.xp6(1),t.Q6J("ngIf",1!=r.exam.isPublished),t.xp6(1),t.s9C("matTooltip",r.exam.name),t.Q6J("isDisabledTooltip",!1)("matTooltipDisabled",i.isDisabled),t.xp6(2),t.Gre("mb-0 d-block ",l.isMobileWebView?"azt-wv-item-name":"",""),t.xp6(1),t.Oqu(r.exam.name),t.xp6(1),t.Q6J("ngIf",l.isMobileWebView),t.xp6(1),t.Q6J("ngIf",r.shared),t.xp6(1),t.Q6J("ngIf",l.isMobileDevice&&null!=r.exam.permissionObj),t.xp6(1),t.Q6J("ngIf",!l.isMobileWebView),t.xp6(1),t.Q6J("ngIf",!l.isMobileWebView),t.xp6(1),t.Q6J("ngIf",!l.isMobileWebView),t.xp6(1),t.Q6J("ngIf",!l.isMobileWebView)}}function hE(n,o){if(1&n&&(t.ynx(0),t.YNc(1,mE,26,36,"div",153),t.BQk()),2&n){const e=o.$implicit;t.xp6(1),t.Q6J("ngIf",e.exam)}}const M6=function(n,o){return{"overflow-x-auto":n,"overflow-x-visible":o}},H0=function(n){return{"min-width":n}},I6=function(n,o){return{"ml-5":n,"ml-3":o}};function pE(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"form",82)(1,"div",83)(2,"div",84)(3,"div",85)(4,"div",86),t.YNc(5,OO,2,0,"ng-container",11),t.ALo(6,"editPermission"),t.TgZ(7,"div",87),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.sortDocumentByColumn(a.enumDocumentSortType.BY_NAME,null==a.currentDocumentSortTypeObj?null:a.currentDocumentSortTypeObj.isAscSort))}),t._uU(8),t.ALo(9,"mytranslate"),t.TgZ(10,"div",88),t.O4$(),t.TgZ(11,"svg",89),t._UZ(12,"polyline",90),t.qZA(),t.TgZ(13,"svg",91),t._UZ(14,"polyline",92),t.qZA()()()(),t.YNc(15,EO,10,9,"div",93),t.YNc(16,MO,10,9,"div",93),t.YNc(17,IO,4,3,"div",93),t.YNc(18,LO,10,9,"div",93),t.qZA()(),t.kcU(),t.TgZ(19,"div",94),t.YNc(20,KO,27,39,"div",95),t.YNc(21,hE,2,1,"ng-container",96),t.qZA(),t._UZ(22,"div",97),t.qZA()()}if(2&n){const e=t.oxw();t.Q6J("formGroup",e.form),t.xp6(1),t.Q6J("ngClass",t.WLB(21,M6,!e.isMobileDevice,e.isMobileDevice)),t.xp6(1),t.Q6J("ngStyle",t.VKq(24,H0,e.isMobileWebView?"":"1100px")),t.xp6(2),t.Q6J("ngClass",t.WLB(26,Tp,!e.isMobileWebView,e.isMobileWebView)),t.xp6(1),t.Q6J("ngIf",-1!=e.currentCategoryId&&!(null!=e.currentCategory&&e.currentCategory.isGlobalAzota)||t.xi3(6,16,e.currentCategory,"category")),t.xp6(2),t.Q6J("ngClass",t.WLB(29,I6,!e.isMobileWebView,e.isMobileWebView)),t.xp6(1),t.hij(" ",t.lcZ(9,19,"lang_testbank_folder_and_file_name")," "),t.xp6(3),t.Q6J("ngClass",t.VKq(32,Zc,1==(null==e.currentDocumentSortTypeObj?null:e.currentDocumentSortTypeObj.isAscSort)&&(null==e.currentDocumentSortTypeObj?null:e.currentDocumentSortTypeObj.isColumnSortType)==e.enumDocumentSortType.BY_NAME)),t.xp6(2),t.Q6J("ngClass",t.VKq(34,Zc,0==(null==e.currentDocumentSortTypeObj?null:e.currentDocumentSortTypeObj.isAscSort)&&(null==e.currentDocumentSortTypeObj?null:e.currentDocumentSortTypeObj.isColumnSortType)==e.enumDocumentSortType.BY_NAME)),t.xp6(2),t.Q6J("ngIf",!e.isMobileWebView),t.xp6(1),t.Q6J("ngIf",!e.isMobileWebView),t.xp6(1),t.Q6J("ngIf",!e.isMobileWebView),t.xp6(1),t.Q6J("ngIf",!e.isMobileWebView),t.xp6(1),t.Q6J("ngStyle",t.VKq(36,H0,e.isMobileWebView?"":"1100px")),t.xp6(1),t.Q6J("ngForOf",e.categoryObjs),t.xp6(1),t.Q6J("ngForOf",e.documentObjs)}}const Jy=function(n,o){return{"col-span-8":n,"col-span-12":o}};function _E(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",84)(1,"div",85)(2,"div",86)(3,"div",189),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.sortDocumentByColumn(a.enumDocumentSortType.BY_NAME,null==a.currentDocumentSortTypeObj?null:a.currentDocumentSortTypeObj.isAscSort))}),t._uU(4),t.ALo(5,"mytranslate"),t.TgZ(6,"div",88),t.O4$(),t.TgZ(7,"svg",89),t._UZ(8,"polyline",90),t.qZA(),t.TgZ(9,"svg",91),t._UZ(10,"polyline",92),t.qZA()()()(),t.kcU(),t.TgZ(11,"div",190)(12,"div",191)(13,"span",101),t._uU(14),t.ALo(15,"mytranslate"),t.qZA()()()()()}if(2&n){const e=t.oxw(2);t.Q6J("ngStyle",t.VKq(12,H0,e.isMobileWebView?"":"1100px")),t.xp6(2),t.Q6J("ngClass",t.WLB(14,Tp,!e.isMobileWebView,e.isMobileWebView)),t.xp6(1),t.Q6J("ngClass",t.WLB(17,I6,!e.isMobileWebView,e.isMobileWebView)),t.xp6(1),t.hij(" ",t.lcZ(5,8,"lang_testbank_folder_and_file_name")," "),t.xp6(3),t.Q6J("ngClass",t.VKq(20,Zc,1==(null==e.currentDocumentSortTypeObj?null:e.currentDocumentSortTypeObj.isAscSort)&&(null==e.currentDocumentSortTypeObj?null:e.currentDocumentSortTypeObj.isColumnSortType)==e.enumDocumentSortType.BY_NAME)),t.xp6(2),t.Q6J("ngClass",t.VKq(22,Zc,0==(null==e.currentDocumentSortTypeObj?null:e.currentDocumentSortTypeObj.isAscSort)&&(null==e.currentDocumentSortTypeObj?null:e.currentDocumentSortTypeObj.isColumnSortType)==e.enumDocumentSortType.BY_NAME)),t.xp6(2),t.Q6J("ngClass",t.WLB(24,Jy,!e.isMobileWebView,e.isMobileWebView)),t.xp6(3),t.hij(" ",t.lcZ(15,10,"lang_testbank_folder_and_file_paths")," ")}}function fE(n,o){1&n&&(t.TgZ(0,"span"),t.O4$(),t.TgZ(1,"svg",137),t.ALo(2,"mytranslate"),t._UZ(3,"path",138)(4,"path",139)(5,"path",140),t.qZA()()),2&n&&(t.xp6(1),t.s9C("matTooltip",t.lcZ(2,1,"lang_auto_da_chia_se")))}function gE(n,o){1&n&&(t.O4$(),t.TgZ(0,"svg",141),t._UZ(1,"path",142),t.qZA())}function xE(n,o){1&n&&(t.TgZ(0,"span",144),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_auto_chia_se")))}function bE(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",197),t.NdJ("click",function(a){t.CHM(e);const r=t.oxw().$implicit,s=t.oxw(2),l=t.MAs(39);return t.KtG(s.onContextMenu(a,r,l))}),t.O4$(),t.TgZ(1,"svg",146),t._UZ(2,"circle",70)(3,"circle",71)(4,"circle",72),t.qZA()()}if(2&n){const e=t.oxw().$implicit;t.Q6J("disabled",!e.id||e.id<0||"user"==e.shareType)}}function vE(n,o){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,e.name)," ")}}function yE(n,o){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.name," ")}}const wE=function(n){return{cursor:n}};function CE(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"li",202)(1,"a",203),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw(4);return t.KtG("DOC"!=r.type&&s.goToBreadPath(r))}),t.TgZ(2,"span",39,40),t.ALo(4,"mytranslate"),t.YNc(5,vE,3,3,"span",11),t.YNc(6,yE,2,1,"span",11),t.qZA()()()}if(2&n){const e=o.$implicit,i=t.MAs(3),a=t.oxw(2).$implicit;t.Q6J("ngClass",t.VKq(10,By,e.id!=a.id)),t.xp6(1),t.Q6J("ngStyle",t.VKq(12,wE,"DOC"!=e.type?"pointer":"default")),t.xp6(1),t.s9C("matTooltip",t.lcZ(4,8,e.name)),t.Q6J("ngClass",t.VKq(14,zy,e.id!=a.id))("isDisabledTooltip",!1)("matTooltipDisabled",i.isDisabled),t.xp6(3),t.Q6J("ngIf",-1==e.id),t.xp6(1),t.Q6J("ngIf",-1!=e.id)}}function TE(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"ol",198)(2,"li",199)(3,"a",200),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.goBackToAllCategoryPageEvent())}),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()(),t.YNc(6,CE,7,16,"li",201),t.qZA(),t.BQk()}if(2&n){const e=t.oxw().$implicit;t.xp6(4),t.hij(" ",t.lcZ(5,2,"lang_auto_tat_ca")," "),t.xp6(2),t.Q6J("ngForOf",e.paths)}}function kE(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",192)(1,"div",193)(2,"div",194)(3,"div",110)(4,"div",111)(5,"div",195),t.NdJ("mouseup",function(a){const s=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(2===a.button||l.handleOpenFolder(s,1===a.button))}),t.TgZ(6,"div",116),t.YNc(7,fE,6,3,"span",113),t.YNc(8,gE,2,0,"ng-template",null,136,t.W1O),t.qZA(),t.TgZ(10,"div",118,40),t.ALo(12,"mytranslate"),t.TgZ(13,"span"),t._uU(14),t.ALo(15,"mytranslate"),t.qZA()(),t.YNc(16,xE,3,3,"span",120),t.qZA()(),t.YNc(17,bE,5,1,"button",196),t.qZA(),t.TgZ(18,"div",190),t.YNc(19,TE,7,4,"ng-container",11),t.qZA()()()()}if(2&n){const e=o.$implicit,i=o.last,a=t.MAs(9),r=t.MAs(11),s=t.oxw(2),l=t.MAs(52),c=t.MAs(39);t.s9C("id","folder_"+e.id),t.Q6J("contextMenu",!e.id||e.id<0||"user"==e.shareType?l:c)("contextMenuValue",e),t.xp6(1),t.Q6J("ngClass",t.VKq(23,J0,s.categoryObjs&&(24!=s.categoryObjs.length||24==s.categoryObjs.length&&!i))),t.xp6(2),t.Q6J("ngClass",t.WLB(25,Tp,!s.isMobileWebView,s.isMobileWebView)),t.xp6(2),t.Q6J("ngClass",t.WLB(28,E6,-1==e.id,-1!=e.id)),t.xp6(2),t.Q6J("ngIf",e.shared)("ngIfElse",a),t.xp6(3),t.s9C("matTooltip",t.lcZ(12,19,e.name)),t.Q6J("isDisabledTooltip",!1)("matTooltipDisabled",r.isDisabled),t.xp6(3),t.Tol(s.isMobileWebView&&-1!=e.id?"azt-wv-item-name":""),t.xp6(1),t.Oqu(t.lcZ(15,21,e.name)),t.xp6(2),t.Q6J("ngIf",-1==e.id),t.xp6(1),t.Q6J("ngIf",s.isMobileDevice&&-1!=e.id),t.xp6(1),t.Q6J("ngClass",t.WLB(31,Jy,!s.isMobileWebView,s.isMobileWebView)),t.xp6(1),t.Q6J("ngIf",null==e.paths?null:e.paths.length)}}function AE(n,o){1&n&&(t.O4$(),t.TgZ(0,"svg",168),t.ALo(1,"mytranslate"),t._UZ(2,"path",169)(3,"polyline",170)(4,"path",171),t.qZA()),2&n&&t.s9C("matTooltip",t.lcZ(1,1,"lang_testbank_folder_and_file_published"))}function SE(n,o){1&n&&(t.O4$(),t.TgZ(0,"svg",168),t.ALo(1,"mytranslate"),t._UZ(2,"path",169)(3,"polyline",170),t.qZA()),2&n&&t.s9C("matTooltip",t.lcZ(1,1,"lang_testbank_folder_and_file_Unpublished"))}function OE(n,o){if(1&n&&(t.TgZ(0,"span",172),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.AsE(" ",t.lcZ(2,2,"lang_testbank_folder_and_file_number_attended"),": ",e.exam.attended," ")}}function EE(n,o){1&n&&(t.TgZ(0,"div",173),t.O4$(),t.TgZ(1,"svg",174),t.ALo(2,"mytranslate"),t._UZ(3,"path",175)(4,"path",176)(5,"path",177),t.qZA()()),2&n&&(t.xp6(1),t.s9C("matTooltip",t.lcZ(2,1,"lang_auto_da_chia_se")))}function ME(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",211),t.NdJ("click",function(a){t.CHM(e);const r=t.oxw(2).$implicit,s=t.oxw(2),l=t.MAs(42);return t.KtG(s.onContextMenu(a,r.exam,l))}),t.O4$(),t.TgZ(1,"svg",146),t._UZ(2,"circle",70)(3,"circle",71)(4,"circle",72),t.qZA()()}}function IE(n,o){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,e.name)," ")}}function LE(n,o){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.name," ")}}const PE=function(n){return{"max-width":"100%",display:"block",cursor:n}};function NE(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"li",202)(1,"a",213),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw(5);return t.KtG("DOC"!=r.type&&s.goToBreadPath(r))}),t.TgZ(2,"span",39,40),t.ALo(4,"mytranslate"),t.YNc(5,IE,3,3,"span",11),t.YNc(6,LE,2,1,"span",11),t.qZA()()()}if(2&n){const e=o.$implicit,i=t.MAs(3),a=t.oxw(3).$implicit;t.Q6J("ngClass",t.VKq(11,By,e.id!=a.exam.id)),t.xp6(1),t.Akn(t.VKq(13,PE,e.id!=a.exam.id?"pointer":"default")),t.xp6(1),t.s9C("matTooltip",t.lcZ(4,9,e.name)),t.Q6J("ngClass",t.VKq(15,zy,e.id!=a.exam.id))("isDisabledTooltip",!1)("matTooltipDisabled",i.isDisabled),t.xp6(3),t.Q6J("ngIf",-1==e.id),t.xp6(1),t.Q6J("ngIf",-1!=e.id)}}function ZE(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"ol",198)(2,"li",199)(3,"a",212),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(4);return t.KtG(a.goBackToAllCategoryPageEvent())}),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()(),t.YNc(6,NE,7,17,"li",201),t.qZA(),t.BQk()}if(2&n){const e=t.oxw(2).$implicit;t.xp6(4),t.hij(" ",t.lcZ(5,2,"lang_auto_tat_ca")," "),t.xp6(2),t.Q6J("ngForOf",e.paths)}}function DE(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",205)(1,"div",206)(2,"div",207)(3,"div",110)(4,"div",208),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().$implicit,r=t.oxw(2);return t.KtG(r.redirectByDocumentAction(a.exam,r.enumDocumentRedirectType.TESTED_LIST))}),t.TgZ(5,"div",209)(6,"div",159),t.YNc(7,AE,5,3,"svg",160),t.YNc(8,SE,4,3,"svg",161),t.qZA(),t.TgZ(9,"div",118,40)(11,"span"),t._uU(12),t.qZA(),t.YNc(13,OE,3,4,"span",162),t.qZA(),t.YNc(14,EE,6,3,"div",163),t.qZA()(),t.YNc(15,ME,5,0,"button",210),t.qZA(),t.TgZ(16,"div",190),t.YNc(17,ZE,7,4,"ng-container",11),t.qZA()()()()}if(2&n){const e=t.MAs(10),i=t.oxw(),a=i.$implicit,r=i.last,s=t.oxw(2),l=t.MAs(52),c=t.MAs(42);t.s9C("id","exam_"+a.exam.id),t.Q6J("contextMenu",!a.exam||s.commonService.isEmptyObj(a.exam.permissionObj)?l:c)("contextMenuValue",a.exam),t.xp6(1),t.Q6J("ngClass",t.VKq(19,J0,!r)),t.xp6(2),t.Q6J("ngClass",t.WLB(21,Tp,!s.isMobileWebView,s.isMobileWebView)),t.xp6(4),t.Q6J("ngIf",1==a.exam.isPublished),t.xp6(1),t.Q6J("ngIf",1!=a.exam.isPublished),t.xp6(1),t.s9C("matTooltip",a.exam.name),t.Q6J("isDisabledTooltip",!1)("matTooltipDisabled",e.isDisabled),t.xp6(2),t.Gre("mb-0 d-block ",s.isMobileWebView?"azt-wv-item-name":"",""),t.xp6(1),t.Oqu(a.exam.name),t.xp6(1),t.Q6J("ngIf",s.isMobileWebView),t.xp6(1),t.Q6J("ngIf",a.shared),t.xp6(1),t.Q6J("ngIf",s.isMobileDevice&&null!=a.exam.permissionObj),t.xp6(1),t.Q6J("ngClass",t.WLB(24,Jy,!s.isMobileWebView,s.isMobileWebView)),t.xp6(1),t.Q6J("ngIf",null==a.paths?null:a.paths.length)}}function jE(n,o){if(1&n&&(t.ynx(0),t.YNc(1,DE,18,27,"div",204),t.BQk()),2&n){const e=o.$implicit;t.xp6(1),t.Q6J("ngIf",e.exam)}}function qE(n,o){if(1&n&&(t.TgZ(0,"div",83)(1,"div",94),t.YNc(2,_E,16,27,"div",187),t.YNc(3,kE,20,34,"div",188),t.YNc(4,jE,2,1,"ng-container",96),t.qZA(),t._UZ(5,"div",97),t.qZA()),2&n){const e=t.oxw();t.Q6J("ngClass",t.WLB(5,M6,!e.isMobileDevice,e.isMobileDevice)),t.xp6(1),t.Q6J("ngStyle",t.VKq(8,H0,e.isMobileWebView?"":"1100px")),t.xp6(1),t.Q6J("ngIf",!e.isMobileDevice),t.xp6(1),t.Q6J("ngForOf",e.categoryObjs),t.xp6(1),t.Q6J("ngForOf",e.documentObjs)}}function FE(n,o){if(1&n&&t._UZ(0,"azt-share",217),2&n){const e=t.oxw(2).$implicit;t.Q6J("objectCodeType",4)("objectCode","CATEGORY")("objectId",e.id)("categoryWithPermissionObj",e)}}function QE(n,o){1&n&&(t.TgZ(0,"li"),t._UZ(1,"hr",218),t.qZA())}function RE(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",219),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2).$implicit,r=t.oxw();return t.KtG(r.handleEditFolder(a))}),t.O4$(),t.TgZ(2,"svg",220),t._UZ(3,"path",221)(4,"path",222),t.qZA(),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()()}2&n&&(t.xp6(5),t.hij(" ",t.lcZ(6,1,"lang_button_edit")," "))}function UE(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",223),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2).$implicit,r=t.oxw();return t.KtG(r.acceptCopyAllDocumentObjs(void 0,a))}),t.O4$(),t.TgZ(2,"svg",59),t._UZ(3,"path",224)(4,"path",225),t.qZA(),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()()}2&n&&(t.xp6(5),t.hij(" ",t.lcZ(6,1,"lang_auto_copy")," "))}function BE(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",226),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2).$implicit,r=t.oxw();return t.KtG(r.acceptCutAllDocumentObjs(void 0,a))}),t.O4$(),t.TgZ(2,"svg",59),t._UZ(3,"polyline",52)(4,"polyline",53)(5,"polyline",54)(6,"polyline",55)(7,"line",56)(8,"line",57),t.qZA(),t._uU(9),t.ALo(10,"mytranslate"),t.qZA()()}2&n&&(t.xp6(9),t.hij(" ",t.lcZ(10,1,"lang_auto_cut")," "))}function zE(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",227),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2).$implicit,r=t.oxw();return t.KtG(r.handlePasteDataToFolder(a.id))}),t.O4$(),t.TgZ(2,"svg",59),t._UZ(3,"rect",60)(4,"path",61),t.qZA(),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()()}2&n&&(t.xp6(5),t.hij(" ",t.lcZ(6,1,"lang_auto_paste")," "))}function JE(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",228),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.cancelAllActionOfDocumentObjs())}),t.O4$(),t.TgZ(2,"svg",59),t._UZ(3,"circle",26)(4,"line",229)(5,"line",230),t.qZA(),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()()}2&n&&(t.xp6(6),t.hij(" ",t.lcZ(7,1,"lang_auto_huy_copycut")," "))}function HE(n,o){1&n&&(t.TgZ(0,"li"),t._UZ(1,"hr",218),t.qZA())}function GE(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",231),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2).$implicit,r=t.oxw();return t.KtG(r.acceptDeleteAllDocumentObjs(void 0,a))}),t.O4$(),t.TgZ(2,"svg",232),t._UZ(3,"path",63)(4,"path",64)(5,"path",65)(6,"line",66)(7,"line",67),t.qZA(),t._uU(8),t.ALo(9,"mytranslate"),t.qZA()()}2&n&&(t.xp6(8),t.hij(" ",t.lcZ(9,1,"lang_button_delete")," "))}function $E(n,o){if(1&n&&(t.TgZ(0,"div",215)(1,"ul",17)(2,"li"),t.YNc(3,FE,1,4,"azt-share",216),t.ALo(4,"sharePermission"),t.qZA(),t.YNc(5,QE,2,0,"li",11),t.ALo(6,"fullPermission"),t.YNc(7,RE,7,3,"li",11),t.ALo(8,"editPermission"),t.YNc(9,UE,7,3,"li",11),t.ALo(10,"copyPermission"),t.YNc(11,BE,11,3,"li",11),t.ALo(12,"deletePermission"),t.YNc(13,zE,7,3,"li",11),t.ALo(14,"editPermission"),t.YNc(15,JE,8,3,"li",11),t.ALo(16,"editPermission"),t.YNc(17,HE,2,0,"li",11),t.ALo(18,"fullPermission"),t.YNc(19,GE,10,3,"li",11),t.ALo(20,"deletePermission"),t.qZA()()),2&n){const e=t.oxw().$implicit,i=t.oxw();t.xp6(3),t.Q6J("ngIf",t.xi3(4,9,e,"category")),t.xp6(2),t.Q6J("ngIf",t.xi3(6,12,e,"category")),t.xp6(2),t.Q6J("ngIf",t.xi3(8,15,e,"category")),t.xp6(2),t.Q6J("ngIf",t.xi3(10,18,e,"category")),t.xp6(2),t.Q6J("ngIf",t.xi3(12,21,e,"category")),t.xp6(2),t.Q6J("ngIf",t.xi3(14,24,1==i.hasCopyOrCutInClipboard()&&!i.checkPasteFunc(e.id)&&e,"category")),t.xp6(2),t.Q6J("ngIf",t.xi3(16,27,i.hasCopyOrCutInClipboard()&&e,"category")),t.xp6(2),t.Q6J("ngIf",t.xi3(18,30,e,"category")),t.xp6(2),t.Q6J("ngIf",t.xi3(20,33,e,"category"))}}function YE(n,o){1&n&&(t.YNc(0,$E,21,36,"div",214),t.ALo(1,"editPermission")),2&n&&t.Q6J("ngIf",t.xi3(1,1,o.$implicit,"category"))}function KE(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",237),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2).$implicit,r=t.oxw();return t.KtG(r.doExamAction(a,r.enumDocumentDoExamActionType.SHOW_EXAM_DETAIL))}),t.O4$(),t.TgZ(2,"svg",232),t._UZ(3,"circle",26)(4,"line",238)(5,"line",239),t.qZA(),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()()}2&n&&(t.xp6(6),t.hij(" ",t.lcZ(7,1,"lang_auto_xem_noi_dung_de")," "))}function WE(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",240),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2).$implicit,r=t.oxw();return t.KtG(r.redirectByDocumentAction(a,r.enumDocumentRedirectType.TESTED_LIST))}),t.O4$(),t.TgZ(2,"svg",232),t._UZ(3,"path",241)(4,"circle",242)(5,"path",243)(6,"path",244),t.qZA(),t._uU(7),t.ALo(8,"mytranslate"),t.qZA()()}2&n&&(t.xp6(7),t.hij(" ",t.lcZ(8,1,"lang_auto_danh_sach_da_lam")," "))}function VE(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",245),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2).$implicit,r=t.oxw();return t.KtG(r.doExamAction(a,r.enumDocumentDoExamActionType.COPY_EXAM_LINK))}),t.O4$(),t.TgZ(2,"svg",232),t._UZ(3,"path",246)(4,"path",247),t.qZA(),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()()}if(2&n){const e=t.oxw(2).$implicit,i=t.oxw();t.xp6(1),t.Q6J("cdkCopyToClipboard",i.getExamTestLink(e)),t.xp6(4),t.hij(" ",t.lcZ(6,2,"lang_auto_copy_link")," ")}}function XE(n,o){1&n&&(t.TgZ(0,"li"),t._UZ(1,"hr",218),t.qZA())}function tM(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",248),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2).$implicit,r=t.oxw();return t.KtG(r.redirectByDocumentAction(a,r.enumDocumentRedirectType.CONFIG_EXAM))}),t.O4$(),t.TgZ(2,"svg",59),t._UZ(3,"path",249)(4,"path",250)(5,"path",251)(6,"path",252)(7,"path",253)(8,"path",254)(9,"path",255)(10,"path",256)(11,"path",257)(12,"path",258)(13,"path",259)(14,"path",260)(15,"path",261)(16,"path",262),t.qZA(),t._uU(17),t.ALo(18,"mytranslate"),t.qZA()()}2&n&&(t.xp6(17),t.hij(" ",t.lcZ(18,1,"lang_auto_cai_dat")," "))}function eM(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",263),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(3).$implicit,r=t.oxw();return t.KtG(r.redirectByDocumentAction(a,r.enumDocumentRedirectType.EDIT_EXAM))}),t.O4$(),t.TgZ(2,"svg",59),t._UZ(3,"path",264)(4,"path",265),t.qZA(),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()()}2&n&&(t.xp6(5),t.hij(" ",t.lcZ(6,1,"lang_testbank_folder_and_file_edit")," "))}function nM(n,o){if(1&n&&(t.ynx(0),t.YNc(1,eM,7,3,"li",11),t.ALo(2,"isOfflineExamWithCustomMixMark"),t.ALo(3,"editPermission"),t.BQk()),2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,e)&&t.xi3(3,3,e,"exam"))}}function iM(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",266),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(3).$implicit,r=t.oxw();return t.KtG(r.redirectByDocumentAction(a,r.enumDocumentRedirectType.EDIT_EXAM))}),t.O4$(),t.TgZ(2,"svg",59),t._UZ(3,"path",264)(4,"path",265),t.qZA(),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()()}2&n&&(t.xp6(5),t.hij(" ",t.lcZ(6,1,"lang_testbank_folder_and_file_edit")," "))}function oM(n,o){if(1&n&&(t.YNc(0,iM,7,3,"li",11),t.ALo(1,"editPermission")),2&n){const e=t.oxw(2).$implicit;t.Q6J("ngIf",t.xi3(1,1,e,"exam"))}}function aM(n,o){1&n&&(t.ynx(0),t.O4$(),t.TgZ(1,"svg",59),t._UZ(2,"polyline",268),t.qZA(),t._uU(3),t.ALo(4,"mytranslate"),t.BQk()),2&n&&(t.xp6(3),t.hij(" ",t.lcZ(4,1,"lang_testbank_folder_and_file_publish")," "))}function rM(n,o){1&n&&(t.ynx(0),t.O4$(),t.TgZ(1,"svg",59),t._UZ(2,"line",269)(3,"line",270),t.qZA(),t._uU(4),t.ALo(5,"mytranslate"),t.BQk()),2&n&&(t.xp6(4),t.hij(" ",t.lcZ(5,1,"lang_auto_huy_xuat_ban")," "))}function sM(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",267),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2).$implicit,r=t.oxw();return t.KtG(r.changePublishStatus(a,void 0,1==a.isPublished?0:1))}),t.YNc(2,aM,5,3,"ng-container",11),t.YNc(3,rM,6,3,"ng-container",11),t.qZA()()}if(2&n){const e=t.oxw(2).$implicit;t.xp6(2),t.Q6J("ngIf",0==e.isPublished),t.xp6(1),t.Q6J("ngIf",1==e.isPublished)}}function lM(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",271),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2).$implicit,r=t.oxw();return t.KtG(r.redirectByDocumentAction(a,r.enumDocumentRedirectType.STATISTIC))}),t.O4$(),t.TgZ(2,"svg",59),t._UZ(3,"path",272)(4,"path",273),t.qZA(),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()()}2&n&&(t.xp6(5),t.hij(" ",t.lcZ(6,1,"lang_auto_thong_ke")," "))}function cM(n,o){1&n&&(t.TgZ(0,"li"),t._UZ(1,"hr",218),t.qZA())}function uM(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",274),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(3).$implicit,r=t.oxw();return t.KtG(r.acceptCopyAllDocumentObjs(a,void 0))}),t.O4$(),t.TgZ(2,"svg",20),t._UZ(3,"rect",44)(4,"path",45),t.qZA(),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()()}2&n&&(t.xp6(5),t.hij(" ",t.lcZ(6,1,"lang_auto_copy")," "))}function dM(n,o){if(1&n&&(t.ynx(0),t.YNc(1,uM,7,3,"li",11),t.ALo(2,"copyPermission"),t.ALo(3,"isOfflineExamWithCustomMixMark"),t.BQk()),2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.Q6J("ngIf",t.xi3(2,1,t.lcZ(3,4,e)&&e,"exam"))}}function mM(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",275),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(3).$implicit,r=t.oxw();return t.KtG(r.acceptCopyAllDocumentObjs(a,void 0))}),t.O4$(),t.TgZ(2,"svg",20),t._UZ(3,"rect",44)(4,"path",45),t.qZA(),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()()}2&n&&(t.xp6(5),t.hij(" ",t.lcZ(6,1,"lang_auto_copy")," "))}function hM(n,o){if(1&n&&(t.YNc(0,mM,7,3,"li",11),t.ALo(1,"copyPermission")),2&n){const e=t.oxw(2).$implicit;t.Q6J("ngIf",t.xi3(1,1,e,"exam"))}}function pM(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",276),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2).$implicit,r=t.oxw();return t.KtG(r.acceptCutAllDocumentObjs(a,void 0))}),t.O4$(),t.TgZ(2,"svg",20),t._UZ(3,"polyline",52)(4,"polyline",53)(5,"polyline",54)(6,"polyline",55)(7,"line",56)(8,"line",57),t.qZA(),t._uU(9),t.ALo(10,"mytranslate"),t.qZA()()}2&n&&(t.xp6(9),t.hij(" ",t.lcZ(10,1,"lang_auto_cut")," "))}function _M(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",277),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2).$implicit,r=t.oxw();return t.KtG(r.acceptDeleteAllDocumentObjs(a,void 0))}),t.O4$(),t.TgZ(2,"svg",20),t._UZ(3,"path",63)(4,"path",64)(5,"path",65)(6,"line",66)(7,"line",67),t.qZA(),t._uU(8),t.ALo(9,"mytranslate"),t.qZA()()}2&n&&(t.xp6(8),t.hij(" ",t.lcZ(9,1,"lang_button_delete")," "))}function fM(n,o){1&n&&(t.TgZ(0,"li"),t._UZ(1,"hr",218),t.qZA())}const gM=function(n){return{"padding-bottom":n}};function xM(n,o){if(1&n&&(t.TgZ(0,"div",234)(1,"ul",17),t.ALo(2,"viewPermission"),t.ALo(3,"globalCopyPermission"),t.YNc(4,KE,8,3,"li",11),t.ALo(5,"viewPermission"),t.ALo(6,"globalCopyPermission"),t.YNc(7,WE,9,3,"li",11),t.ALo(8,"configAndViewPermission"),t.ALo(9,"configAndMarkPermission"),t.ALo(10,"viewPermission"),t.ALo(11,"configPermission"),t.ALo(12,"globalCopyPermission"),t.YNc(13,VE,7,4,"li",11),t.ALo(14,"viewPermission"),t.ALo(15,"configPermission"),t.ALo(16,"isOfflineExam"),t.ALo(17,"globalCopyPermission"),t.YNc(18,XE,2,0,"li",11),t.ALo(19,"editPermission"),t.ALo(20,"configPermission"),t.ALo(21,"globalCopyPermission"),t.YNc(22,tM,19,3,"li",11),t.ALo(23,"editPermission"),t.YNc(24,nM,4,6,"ng-container",113),t.ALo(25,"isOfflineExam"),t.YNc(26,oM,2,4,"ng-template",null,235,t.W1O),t.YNc(28,sM,4,2,"li",11),t.ALo(29,"editPermission"),t.YNc(30,lM,7,3,"li",11),t.ALo(31,"statisticalPermission"),t.ALo(32,"globalCopyPermission"),t.YNc(33,cM,2,0,"li",11),t.ALo(34,"copyPermission"),t.ALo(35,"fullPermission"),t.ALo(36,"deletePermission"),t.ALo(37,"globalCopyPermission"),t.YNc(38,dM,4,6,"ng-container",113),t.ALo(39,"isOfflineExam"),t.YNc(40,hM,2,4,"ng-template",null,236,t.W1O),t.YNc(42,pM,11,3,"li",11),t.ALo(43,"fullPermission"),t.YNc(44,_M,10,3,"li",11),t.ALo(45,"deletePermission"),t.YNc(46,fM,2,0,"li",11),t.ALo(47,"configPermission"),t.ALo(48,"globalCopyPermission"),t.qZA()()),2&n){const e=t.MAs(27),i=t.MAs(41),a=t.oxw().$implicit;t.xp6(1),t.Akn(t.VKq(104,gM,t.xi3(2,17,a,"exam")||!t.xi3(3,20,a,"exam")?"46px":"7px")),t.xp6(3),t.Q6J("ngIf",t.xi3(5,23,a,"exam")||t.xi3(6,26,a,"exam")),t.xp6(3),t.Q6J("ngIf",t.xi3(8,29,a,"exam")||t.xi3(9,32,a,"exam")||t.xi3(10,35,a,"exam")||t.xi3(11,38,a,"exam")||!t.xi3(12,41,a,"exam")),t.xp6(6),t.Q6J("ngIf",(t.xi3(14,44,a,"exam")||t.xi3(15,47,a,"exam"))&&!t.lcZ(16,50,a)||!t.xi3(17,52,a,"exam")),t.xp6(5),t.Q6J("ngIf",t.xi3(19,55,a,"exam")||t.xi3(20,58,a,"exam")||!t.xi3(21,61,a,"exam")),t.xp6(4),t.Q6J("ngIf",t.xi3(23,64,a,"exam")),t.xp6(2),t.Q6J("ngIf",t.lcZ(25,67,a))("ngIfElse",e),t.xp6(4),t.Q6J("ngIf",t.xi3(29,69,a,"exam")),t.xp6(2),t.Q6J("ngIf",t.xi3(31,72,a,"exam")||!t.xi3(32,75,a,"exam")),t.xp6(3),t.Q6J("ngIf",t.xi3(34,78,a,"exam")||t.xi3(35,81,a,"exam")||t.xi3(36,84,a,"exam")||!t.xi3(37,87,a,"exam")),t.xp6(5),t.Q6J("ngIf",t.lcZ(39,90,a.orcLogId))("ngIfElse",i),t.xp6(4),t.Q6J("ngIf",t.xi3(43,92,a,"exam")),t.xp6(2),t.Q6J("ngIf",t.xi3(45,95,a,"exam")),t.xp6(2),t.Q6J("ngIf",t.xi3(47,98,a,"exam")||!t.xi3(48,101,a,"exam"))}}function bM(n,o){1&n&&t.YNc(0,xM,49,106,"div",233),2&n&&t.Q6J("ngIf",null!=o.$implicit.permissionObj)}function vM(n,o){1&n&&(t.TgZ(0,"li")(1,"a",280),t._uU(2),t.ALo(3,"mytranslate"),t.O4$(),t.TgZ(4,"svg",281),t._UZ(5,"polyline",282),t.qZA()()()),2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"lang_auto_xem_them")," "))}function yM(n,o){if(1&n&&(t.TgZ(0,"div",279)(1,"ul",17),t.YNc(2,vM,6,3,"li",11),t.ALo(3,"configPermission"),t.qZA()()),2&n){const e=t.oxw().$implicit;t.xp6(2),t.Q6J("ngIf",t.xi3(3,1,e,"exam"))}}function wM(n,o){1&n&&(t.YNc(0,yM,4,4,"div",278),t.ALo(1,"configPermission")),2&n&&t.Q6J("ngIf",t.xi3(1,1,o.$implicit,"exam"))}function CM(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",284),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().$implicit,r=t.oxw();return t.KtG(r.redirectByDocumentAction(a,r.enumDocumentRedirectType.POWER_POINT))}),t.O4$(),t.TgZ(2,"svg",232),t._UZ(3,"path",285)(4,"polygon",286),t.qZA(),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()()}2&n&&(t.xp6(5),t.hij(" ",t.lcZ(6,1,"lang_testbank_folder_and_file_insert_into_powerpoint")," "))}function TM(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",287),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().$implicit,r=t.oxw();return t.KtG(r.doExamAction(a,r.enumDocumentDoExamActionType.CONFIG_EXAM_CLASSROOM))}),t.O4$(),t.TgZ(2,"svg",232),t._UZ(3,"rect",288)(4,"path",289),t.qZA(),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()()}2&n&&(t.xp6(5),t.hij(" ",t.lcZ(6,1,"lang_testbank_folder_and_file_configuration_class")," "))}function kM(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",290),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().$implicit,r=t.oxw();return t.KtG(r.doExamAction(a,r.enumDocumentDoExamActionType.SHARE_OFFLINE_RESULT))}),t.O4$(),t.TgZ(2,"svg",232),t._UZ(3,"path",291)(4,"polyline",170)(5,"path",292)(6,"path",293),t.qZA(),t._uU(7),t.ALo(8,"mytranslate"),t.qZA()()}2&n&&(t.xp6(7),t.hij(" ",t.lcZ(8,1,"lang_auto_tra_ket_qua_thi_offline")," "))}function AM(n,o){if(1&n&&(t.TgZ(0,"div",283)(1,"ul",17),t.YNc(2,CM,7,3,"li",11),t.ALo(3,"fullPermission"),t.YNc(4,TM,7,3,"li",11),t.ALo(5,"configPermission"),t.YNc(6,kM,9,3,"li",11),t.ALo(7,"fullPermission"),t.qZA()()),2&n){const e=o.$implicit;t.xp6(2),t.Q6J("ngIf",t.xi3(3,3,e,"exam")),t.xp6(2),t.Q6J("ngIf",t.xi3(5,6,e,"exam")),t.xp6(2),t.Q6J("ngIf",t.xi3(7,9,e,"exam"))}}function SM(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",294),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.handlePasteDataToFolder(a.currentCategoryId))}),t.O4$(),t.TgZ(2,"svg",59),t._UZ(3,"rect",60)(4,"path",61),t.qZA(),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()()}2&n&&(t.xp6(5),t.hij(" ",t.lcZ(6,1,"lang_auto_paste")," "))}function OM(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",295),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.cancelAllActionOfDocumentObjs())}),t.O4$(),t.TgZ(2,"svg",59),t._UZ(3,"circle",26)(4,"line",229)(5,"line",230),t.qZA(),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()()}2&n&&(t.xp6(6),t.hij(" ",t.lcZ(7,1,"lang_auto_huy_copycut")," "))}function EM(n,o){if(1&n&&(t.TgZ(0,"div",215)(1,"ul",17),t.YNc(2,SM,7,3,"li",11),t.YNc(3,OM,8,3,"li",11),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",e.hasCopyOrCutInClipboard()&&e.checkCurrentCatePastePermission()),t.xp6(1),t.Q6J("ngIf",e.hasCopyOrCutInClipboard())}}let MM=(()=>{class n extends St.Q{checkCurrentCatePastePermission(){return 0==this.currentCategoryId||this.permissionService.hasEditPermission("category",this.currentCategory)}checkPasteFunc(e){return this.clipboardService.isPasteToSelfFolder(e)}sendReloadData(){this.clipboardService.resetClipBoardAfterPasteOrCancelAllActions(),this.loadApiData.emit(!0)}hasCopyOrCutInClipboard(){return null!=this.clipboardService.getCurrentClipBoard().find(i=>i.action==zl.h.COPY||i.action==zl.h.CUT)}handleOpenFolder(e,i){e.mouseWheel=!!i,this.goToChildCategoryPage.emit(e)}handleEditFolder(e){this.showEditFolderDialog.emit(e)}handleDeleteMultipleDocument(){this.changeHiddenStatusObj.emit(!0);var e=[];this.getFormValue().clipboardObjs.filter(i=>i.checked).forEach(i=>{e.push({id:i.id,type:i.type,action:zl.h.DELETE,documentType:"exam"})}),this.waitDestroy(this.examCategoryService.apiExamCategoryCopyOrCutOrDeletePost(0,{copyOrCutObjs:e}).subscribe(i=>{i&&1==i.success?(this.clipboardService.resetClipBoardAfterPasteOrCancelAllActions(),this.showSuccessSnack("lang_auto_xoa_tai_lieu_thanh_cong"),this.sendReloadData(),this.changeHiddenStatusObj.emit(!1)):(this.showErrorSnack(i.message??""),this.changeHiddenStatusObj.emit(!1))}))}handlePasteDataToFolder(e){if(-1==e)this.showErrorSnack("lang_auto_khong_duoc_paste_vao_thu_muc_de_thi_duoc_chia_se");else if(this.clipboardService.hasCopyFolderActionInClipboard())this.clipboardService.isPasteToSelfFolder(e)?this.showErrorSnack("lang_auto_khong_duoc_paste_vao_thu_muc_ban_dang_muon_copy"):this.sAztDialogService.open(lO,{disableClose:!0,width:"350px",data:{copyToCateId:e},restoreFocus:!1}).afterClosed().subscribe(s=>{!0===s&&(this.clipboardService.resetClipBoardAfterPasteOrCancelAllActions(),this.showSuccessSnack("lang_auto_dan_du_lieu_thanh_cong"),this.sendReloadData())});else{var i=[];this.clipboardService.getCurrentClipBoard().filter(r=>r.action==zl.h.COPY||r.action==zl.h.CUT).forEach(r=>{i.push({id:r.id,type:r.type,action:r.action,documentType:"exam"})}),this.changeHiddenStatusObj.emit(!0),this.waitDestroy(this.examCategoryService.apiExamCategoryCopyOrCutOrDeletePost(e,{copyOrCutObjs:i}).subscribe(r=>{if(r&&1==r.success)this.clipboardService.resetClipBoardAfterPasteOrCancelAllActions(),this.showSuccessSnack("lang_auto_dan_du_lieu_thanh_cong"),this.sendReloadData(),this.changeHiddenStatusObj.emit(!1);else{if(r.message&&"azota_lang_core_exceed_max_global_copy"==r.message){let s=this.sAztConfigService.getConfig("maxCopyGlobalExam")??20,l=this.commonService.translateToKeyParam(r.message??"",s.toString(),s.toString());this.showErrorSnack(l??"")}else this.showErrorSnack(r.message??"");this.changeHiddenStatusObj.emit(!1)}}))}}changePublishStatus(e,i,a){this.changeHiddenStatusObj.emit(!0),this.selectCurrentItem(e,i);let r=this.getFormValue().clipboardObjs.filter(l=>l.checked);var s={ids:r.filter(l=>l.type==sr.Y.EXAM).map(l=>l.id),categoryIds:r.filter(l=>l.type==sr.Y.EXAM_CATEGORY).map(l=>l.id),status:a};this.examService.apiExamPublishExamsPost(s).subscribe(l=>{1==l.success?this.successStatusObj(1==a?"lang_auto_xuat_ban_thanh_cong":"lang_auto_huy_xuat_ban_thanh_cong",!0):this.errorStatusObj(1==a?"lang_core_xuat_ban_de_thi_khong_thanh_cong":"lang_core_huy_xuat_ban_de_thi_khong_thanh_cong",!0),this.sendReloadData(),this.changeHiddenStatusObj.emit(!1)})}selectOrUnselectAllDocumentObjs(){this.form.controls.clipboardObjs.controls.forEach(e=>{e.controls.checked.setValue(this.getFormValue().isSelectAll)}),this.form.controls.isSelectAll.value||this.removeValueOfFormInClipboard()}acceptCopyAllDocumentObjs(e,i){this.selectCurrentItem(e,i),this.setValueOfFormToClipboard(zl.h.COPY);let a=this.getTotalSelectedItem(),r=this.commonService.myTranslateInstant("lang_auto_copy_thanh_cong"),s=this.commonService.myTranslateInstant("lang_auto_tai_lieu");this.showSuccessSnack(r+" "+a+" "+s)}acceptCutAllDocumentObjs(e,i){this.selectCurrentItem(e,i),this.setValueOfFormToClipboard(zl.h.CUT);let a=this.getTotalSelectedItem(),r=this.commonService.myTranslateInstant("lang_auto_cut_thanh_cong"),s=this.commonService.myTranslateInstant("lang_auto_tai_lieu");this.showSuccessSnack(r+" "+a+" "+s)}acceptDeleteAllDocumentObjs(e,i){this.selectCurrentItem(e,i);let a=this.getFormValue().clipboardObjs.filter(s=>s.checked);this.sAztDialogService.open(mO,{data:{clipboardObjs:a},restoreFocus:!1}).afterClosed().subscribe(s=>{!0===s&&this.handleDeleteMultipleDocument()})}cancelAllActionOfDocumentObjs(){this.clipboardService.resetClipBoardAfterPasteOrCancelAllActions(),this.form.controls.clipboardObjs.controls.forEach(e=>{e.controls.checked.setValue(!1)})}getClipboardFormGroupByExamCategory(e){return this.form.controls.clipboardObjs.controls.find(a=>a.getRawValue().id==e.id&&a.getRawValue().type==sr.Y.EXAM_CATEGORY)}isSelectedExamCategoryInClipboard(e){var i=this.getClipboardFormGroupByExamCategory(e);return i?.getRawValue().checked??!1}getClipboardFormGroupByExam(e){return this.form.controls.clipboardObjs.controls.find(a=>a.getRawValue().id==e.id&&a.getRawValue().type==sr.Y.EXAM)}isSelectedExamInClipboard(e){var i=this.getClipboardFormGroupByExam(e);return i?.getRawValue().checked??!1}removeValueOfFormInClipboard(){let e=this.getFormValue().clipboardObjs.filter(i=>i.checked)?.length??0;this.getFormValue().clipboardObjs.filter(i=>!i.checked).forEach(i=>{this.clipboardService.removeDocumentInClipboard(i.id,i.type)}),e&&e==this.getFormValue().clipboardObjs.length?this.form.controls.isSelectAll.setValue(!0):this.form.controls.isSelectAll.setValue(!1)}setValueOfFormToClipboard(e){this.clipboardService.resetClipBoardAfterPasteOrCancelAllActions(),this.getFormValue().clipboardObjs.filter(i=>i.checked).forEach(i=>{this.clipboardService.setActionToClipboard(i.id,i.type,e,i.name)})}selectCurrentItem(e,i){null!=e?.id&&this.form.controls.clipboardObjs.controls.filter(r=>r.getRawValue().id==e.id&&r.getRawValue().type==sr.Y.EXAM).forEach(r=>{r.controls.checked.setValue(!0)}),null!=i?.id&&this.form.controls.clipboardObjs.controls.filter(s=>s.getRawValue().id==i.id&&s.getRawValue().type==sr.Y.EXAM_CATEGORY).forEach(s=>{s.controls.checked.setValue(!0)})}getFormValue(){return this.form.getRawValue()}initFormData(){this.shareType=this.backToData?.shareType??"",this.categoryObjs&&this.categoryObjs.length>0&&this.categoryObjs.forEach(e=>{if(e.id&&e.id>0&&!e.isGlobalAzota){let i=this.clipboardService.hasInClipboard(e.id,sr.Y.EXAM_CATEGORY),a=new f.cw({id:new f.NI(e.id,{nonNullable:!0}),name:new f.NI(e.name??"",{nonNullable:!0}),type:new f.NI(sr.Y.EXAM_CATEGORY,{nonNullable:!0}),action:new f.NI(this.clipboardService.getActionOfDocumentObj(e.id,sr.Y.EXAM_CATEGORY)??zl.h.COPY,{nonNullable:!0}),checked:new f.NI(i,{nonNullable:!0})});i&&this.totalCheckboxSelected++,this.form.controls.clipboardObjs.push(a)}}),this.documentObjs&&this.documentObjs.length>0&&this.documentObjs.forEach(e=>{if("exam"==e.type&&e.exam){let i=this.clipboardService.hasInClipboard(e.exam?.id??0,sr.Y.EXAM),a=new f.cw({id:new f.NI(e.exam.id??0,{nonNullable:!0}),name:new f.NI(e.exam.name??"",{nonNullable:!0}),type:new f.NI(sr.Y.EXAM,{nonNullable:!0}),action:new f.NI(this.clipboardService.getActionOfDocumentObj(e.exam?.id??0,sr.Y.EXAM)??zl.h.COPY,{nonNullable:!0}),checked:new f.NI(i,{nonNullable:!0})});this.form.controls.clipboardObjs.push(a)}})}getTotalSelectedItem(){return this.totalCheckboxSelected=this.form.getRawValue().clipboardObjs.filter(e=>e.checked).length,this.totalCheckboxSelected}getClassroomName(e){let i=[];return e.forEach(a=>{a.name&&!this.commonService.isExistInArray(i,a.name)&&i.push(a.name)}),i}getExamTestLink(e){return`${this.commonService.getCurrentDomain()}/de-thi/${e.hashId}`}goBackToAllCategoryPageEvent(){this.goBackToAllCategoryPage.emit()}backToParentCategoryEvent(e){this.backToParentCategory.emit(e)}goToBreadPath(e){var i={id:e.id,name:e.name??"",parentId:e.parentId,shareType:e.shareType,tenantId:e.tenantId,type:Number(e.type),countExam:0,permissionObj:{},isGlobalAzota:0};this.backToParentCategory.emit(i)}doExamAction(e,i){this.documentDoExamActionService.doExamAction({categoryId:this.currentCategoryId,examObj:e},i).subscribe(r=>{r&&r.reloadData&&this.sendReloadData()})}redirectByDocumentAction(e,i,a){e?.isGlobalAzota||this.documentRedirectActionService.redirectByAction({examObj:e,categoryId:this.currentCategoryId,currentPage:this.currentPage,backToData:this.backToData},i,a)}sortDocumentByColumn(e,i){let r=this.documentSortActionService.sortExamByColumn({rootCategoryObjs:this.rootCategoryObjs,rootDocumentObjs:this.rootDocumentObjs,currentCategoryObjs:this.categoryObjs??[],currentDocumentObjs:this.documentObjs??[]},e,i=null==i||!i);this.categoryObjs=r.categoryObjs,this.documentObjs=r.documentObjs,this.currentDocumentSortTypeObj={isAscSort:i,isColumnSortType:e},this.browserStorageService.saveSimpleSessionStorage("documentSort",JSON.stringify(this.currentDocumentSortTypeObj))}onContextMenu(e,i,a){e&&a&&(this.contextMenuService.show(a,{value:i,x:e?.clientX+15,y:e?.clientY+15}),e?.preventDefault(),e?.stopPropagation())}ngOnInit(){this.waitDestroy((0,dt.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.currentCategoryId=Number(this.commonService.getMyParam(this.activeRoute,"cat_id")),this.initFormData()})),this.form.valueChanges.subscribe(i=>{this.getTotalSelectedItem()});let e=this.commonService.myParseJson(this.browserStorageService.getSimpleSessionStorage("documentSort")??"");e&&this.sortDocumentByColumn(e.isColumnSortType,!e.isAscSort)}ngAfterViewInit(){this.contextMenuService.closeAll()}ngOnDestroy(){super.ngOnDestroy()}constructor(e,i,a,r,s,l,c,d,h,_,x,b){super(),this.documentDoExamActionService=e,this.contextMenuService=i,this.activeRoute=a,this.sAztDialogService=r,this.clipboardService=s,this.browserStorageService=l,this.documentSortActionService=c,this.documentRedirectActionService=d,this.examCategoryService=h,this.permissionService=_,this.sAztConfigService=x,this.examService=b,this.rootCategoryObjs=[],this.rootDocumentObjs=[],this.isShowSearchResult=!1,this.currentPage=0,this.listBreadcrumb=[],this.goBackToAllCategoryPage=new t.vpe,this.backToParentCategory=new t.vpe,this.goToChildCategoryPage=new t.vpe,this.loadApiData=new t.vpe,this.changeHiddenStatusObj=new t.vpe,this.showEditFolderDialog=new t.vpe,this.currentDocumentSortTypeObj=void 0,this.enumDocumentSortType=aO.H,this.enumDocumentRedirectType=Dm.T,this.enumDocumentDoExamActionType=oO.F,this.currentCategoryId=0,this.totalCheckboxSelected=0,this.shareType="",this.form=new f.cw({clipboardObjs:new f.Oe([]),isSelectAll:new f.NI(!1,{nonNullable:!0,validators:[f.kI.required]})})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(hO.Q),t.Y36(m.Lk),t.Y36(O.gz),t.Y36(Fi.C),t.Y36(A6.e),t.Y36(No.n),t.Y36(pO.d),t.Y36(_O),t.Y36(Ke.F1),t.Y36(S.j),t.Y36(Zf.V),t.Y36(Ke.Oe))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-exam-and-exam-category-list"]],inputs:{rootCategoryObjs:"rootCategoryObjs",rootDocumentObjs:"rootDocumentObjs",categoryObjs:"categoryObjs",currentCategory:"currentCategory",documentObjs:"documentObjs",isShowSearchResult:"isShowSearchResult",backToData:"backToData",currentPage:"currentPage",listBreadcrumb:"listBreadcrumb"},outputs:{goBackToAllCategoryPage:"goBackToAllCategoryPage",backToParentCategory:"backToParentCategory",goToChildCategoryPage:"goToChildCategoryPage",loadApiData:"loadApiData",changeHiddenStatusObj:"changeHiddenStatusObj",showEditFolderDialog:"showEditFolderDialog"},features:[t.qOj],decls:53,vars:17,consts:[[1,"azt-file-manager"],[1,"mt-5","mb-5","h-auto","flex","flex-col","sm:flex-row","items-center"],[1,"mr-auto"],[1,"breadcrumb"],[1,"breadcrumb-item","font-medium"],["azt-track-service","folder-and-file-new-F58H12G9GB-",3,"click"],[1,"text-lg"],["class","breadcrumb-item active",3,"ngClass",4,"ngFor","ngForOf"],["class","flex flex-wrap items-center mt-3 sm:mt-0 mr-auto sm:mr-0",3,"ngClass",4,"ngIf"],[1,"table-zone",3,"contextMenu"],["class","box p-5 flex items-center","style","height: 300px;",4,"ngIf"],[4,"ngIf"],["DefaultDocumentTableTpl",""],["DocumentSearchResultTableTpl",""],["xPosition","before"],["publishUnPublishMenu","matMenu"],[1,"dropdown-menu","w-56","show","relative"],[1,"dropdown-content"],["azt-track-service","folder-and-file-new-nfNbs0mOU",3,"click"],["azt-track-service","class-list-1UlnYstZqkD",1,"dropdown-item","w-full"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","mr-2"],["d","M2 9V5c0-1.1.9-2 2-2h3.93a2 2 0 0 1 1.66.9l.82 1.2a2 2 0 0 0 1.66.9H20a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-1"],["d","M2 13h10"],["d","m9 16 3-3-3-3"],["azt-track-service","folder-and-file-new-_o5A8FSGtM",3,"click"],["azt-track-service","class-list-WQiM5XgRgUI",1,"dropdown-item","w-full"],["cx","12","cy","12","r","10"],["d","m15 9-6 6"],["d","m9 9 6 6"],["basicMenuExamCategory",""],["contextMenuItem",""],["basicMenuExamFile",""],["contextMenuItem","",3,"subMenu"],["subMenuMove",""],[3,"disabled"],["basicMenuAll",""],["disableMenu",""],[1,"breadcrumb-item","active",3,"ngClass"],["azt-track-service","folder-and-file-new-emN2AGc-y20",3,"ngClass","click"],[3,"ngClass","matTooltip","isDisabledTooltip","matTooltipDisabled"],["c","isDisabled"],[1,"flex","flex-wrap","items-center","mt-3","sm:mt-0","mr-auto","sm:mr-0",3,"ngClass"],["class","inline-block mr-2",3,"ngClass",4,"ngIf"],["azt-track-service","folder-and-file-new-T9QAf4VC0BP",1,"btn","btn-sm","btn-primary","mr-2",3,"click"],["x","9","y","9","width","13","height","13","rx","2","ry","2"],["d","M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"],["azt-track-service","folder-and-file-new-8Vfp-RcsPEP","class","btn btn-sm btn-primary mr-2",3,"click",4,"ngIf"],["azt-track-service","folder-and-file-new-9lzP1Y2bSWF","class","btn btn-sm btn-primary mr-2",3,"click",4,"ngIf"],["azt-track-service","folder-and-file-new-UOsQbpqqgFT","class","btn btn-sm btn-primary",3,"click",4,"ngIf"],["azt-track-service","folder-and-file-new-UOsQbpqqgFT","style","background-color: white;","class","btn btn-sm btn-light ml-2 block",3,"matMenuTriggerFor",4,"ngIf"],[1,"inline-block","mr-2",3,"ngClass"],["azt-track-service","folder-and-file-new-8Vfp-RcsPEP",1,"btn","btn-sm","btn-primary","mr-2",3,"click"],["points","5 9 2 12 5 15"],["points","9 5 12 2 15 5"],["points","15 19 12 22 9 19"],["points","19 9 22 12 19 15"],["x1","2","y1","12","x2","22","y2","12"],["x1","12","y1","2","x2","12","y2","22"],["azt-track-service","folder-and-file-new-9lzP1Y2bSWF",1,"btn","btn-sm","btn-primary","mr-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","mr-2","lucide"],["x","8","y","2","width","8","height","4","rx","1","ry","1"],["d","M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"],["azt-track-service","folder-and-file-new-UOsQbpqqgFT",1,"btn","btn-sm","btn-primary",3,"click"],["d","M3 6h18"],["d","M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"],["d","M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"],["x1","10","y1","11","x2","10","y2","17"],["x1","14","y1","11","x2","14","y2","17"],["azt-track-service","folder-and-file-new-UOsQbpqqgFT",1,"btn","btn-sm","btn-light","ml-2","block",2,"background-color","white",3,"matMenuTriggerFor"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4"],["cx","12","cy","12","r","1"],["cx","12","cy","5","r","1"],["cx","12","cy","19","r","1"],[1,"box","p-5","flex","items-center",2,"height","300px"],[1,"text-center","mx-auto"],["width","84","height","84","viewBox","0 0 84 84","fill","none","xmlns","http://www.w3.org/2000/svg"],["d","M38.5 70H14C12.1435 70 10.363 69.2625 9.05025 67.9497C7.7375 66.637 7 64.8565 7 63V17.5C7 13.65 10.15 10.5 14 10.5H27.755C28.9079 10.506 30.0416 10.7966 31.0552 11.3462C32.0687 11.8957 32.9309 12.6871 33.565 13.65L36.435 17.85C37.0691 18.8129 37.9313 19.6043 38.9448 20.1538C39.9584 20.7034 41.092 20.994 42.245 21H70C71.8565 21 73.637 21.7375 74.9497 23.0503C76.2625 24.363 77 26.1435 77 28V42","stroke","#1F64E7","stroke-width","2.5","stroke-linecap","round","stroke-linejoin","round"],["d","M59.5 70C65.299 70 70 65.299 70 59.5C70 53.701 65.299 49 59.5 49C53.701 49 49 53.701 49 59.5C49 65.299 53.701 70 59.5 70Z","stroke","#1F64E7","stroke-width","2.5","stroke-linecap","round","stroke-linejoin","round"],["d","M73.5 73.5L68.25 68.25","stroke","#1F64E7","stroke-width","2.5","stroke-linecap","round","stroke-linejoin","round"],["d","M16 26V44.3184M16 50V54.7432V50Z","stroke","#75A4FE","stroke-width","2.5","stroke-linecap","round","stroke-linejoin","round"],[1,"font-medium","mt-2"],[3,"ngTemplateOutlet"],[3,"formGroup"],[1,"inbox","box",2,"scroll-snap-type","x mandatory",3,"ngClass"],[1,"p-5","text-slate-500","border-b","border-slate-200/60",3,"ngStyle"],[1,"grid","grid-cols-12","gap-3","items-center","-mx-5","px-5"],[1,"flex","items-center",3,"ngClass"],["azt-track-service","folder-and-file-new-Fh5Xeywt4Vl",1,"inbox__item--sender","flex","items-center","cursor-pointer",3,"ngClass","click"],[1,"flex","items-center","flex-col","ml-2"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4",3,"ngClass"],["points","18 15 12 9 6 15"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","-mt-2",3,"ngClass"],["points","6 9 12 15 18 9"],["class","col-span-2",4,"ngIf"],[1,"azt-table-body",2,"min-height","50vh",3,"ngStyle"],["class","folder-item",3,"ngStyle","id","contextMenu","contextMenuValue",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"p-5","flex","flex-col","sm:flex-row","items-center","text-center","sm:text-left","text-slate-500"],["type","checkbox","formControlName","isSelectAll",1,"form-check-input",3,"change"],[1,"col-span-2"],["azt-track-service","folder-and-file-new-bTOV6xW1dIT",1,"flex-none","flex","items-center","mr-5","cursor-pointer",3,"click"],[1,"flex","mx-auto"],[1,"w-40"],["azt-track-service","folder-and-file-new-C81T6Hn4LB6",1,"flex-none","flex","items-center","mr-5","cursor-pointer",3,"click"],[1,"lg:w-auto","ml-auto"],["azt-track-service","folder-and-file-new-0OUTvRkSwMy",1,"flex","items-center","cursor-pointer","pl-10",3,"click"],[1,"whitespace-nowrap"],[1,"folder-item",3,"ngStyle","id","contextMenu","contextMenuValue"],[1,"inbox__item","inline-block","sm:block","hover:shadow-md","text-slate-600","dark:text-slate-500","border-slate-200/60","dark:border-darkmode-400",2,"cursor","default",3,"ngClass"],[1,"block","sm:grid","grid-cols-12","gap-3","items-center","px-5","box-exam"],[1,"flex",2,"width","80vw","justify-content","space-between",3,"ngClass"],[1,"flex-none","flex","items-center"],[1,"flex","items-center"],[4,"ngIf","ngIfElse"],["normalCateCheckbox",""],["azt-track-service","folder-and-file-new-UCBI7ziYKss",1,"title-exam","flex","items-center","clickable","sm:w-full","ml-3",3,"ngClass","mouseup"],[1,"image-fit"],["normalCate",""],[1,"truncate","ml-3",3,"matTooltip","isDisabledTooltip","matTooltipDisabled"],["class","whitespace-nowrap ml-2 py-0.5 px-2 rounded-full text-xs bg-info text-white font-medium",4,"ngIf"],["class","whitespace-nowrap ml-2 py-0.5 px-2 rounded-full text-xs bg-primary text-white font-medium",4,"ngIf"],["azt-track-service","folder-and-file-new-Um2GE1qOYAg","class","btn btn-transparent btn-outline-secondary p-1 mr-2",3,"disabled","click",4,"ngIf"],["class","azt-hidden sm:block col-span-2",4,"ngIf"],["class","col-span-2 py-1",4,"ngIf"],["type","checkbox","disabled","",1,"form-check-input"],["formArrayName","clipboardObjs",4,"ngIf","ngIfElse"],["shareFolder",""],["formArrayName","clipboardObjs"],[3,"formGroup",4,"ngIf"],["type","checkbox","formControlName","checked",1,"form-check-input","flex-none",3,"change"],["xmlns","http://www.w3.org/2000/svg","version","1.0","fill","currentColor","width","16","height","16","viewBox","0 0 250.000000 250.000000","preserveAspectRatio","xMidYMid meet",1,"w-6","h-6","bi","bi-folder-fill"],["transform","translate(0.000000,250.000000) scale(0.100000,-0.100000)","fill","#485569","stroke","none"],["d","M305 2329 c-86 -20 -181 -113 -213 -208 -7 -19 -12 -78 -12 -133 0 -80 -4 -106 -21 -139 -30 -61 -33 -120 -15 -316 32 -335 45 -478 61 -668 30 -350 48 -409 148 -485 97 -73 68 -71 1023 -68 l849 3 49 23 c76 35 132 86 161 148 28 58 34 100 60 389 8 94 22 242 30 330 51 546 52 560 16 640 -32 73 -111 147 -181 170 -14 4 -200 11 -415 14 -466 7 -432 -2 -595 157 -72 70 -123 111 -160 128 l-55 26 -345 -1 c-190 -1 -363 -5 -385 -10z m735 -166 c40 -25 136 -120 129 -127 -2 -3 -214 -6 -469 -7 l-465 -1 3 23 c10 64 66 121 132 133 14 2 162 3 330 3 295 -2 306 -3 340 -24z m293 -395 c75 -23 116 -75 290 -378 222 -386 211 -363 211 -440 1 -107 -63 -201 -161 -236 -55 -19 -791 -19 -846 0 -57 21 -100 58 -132 117 -24 45 -30 65 -29 119 0 77 -11 54 211 440 171 297 215 355 285 377 46 15 123 15 171 1z"],["d","M1175 1641 c-17 -10 -39 -31 -50 -47 -21 -32 -85 -144 -85 -149 0 -2 18 -1 40 2 48 7 117 -17 148 -50 11 -12 58 -87 104 -167 83 -143 85 -145 122 -148 32 -3 43 2 77 36 36 36 39 44 39 93 0 50 -7 67 -83 199 -107 187 -126 215 -158 234 -37 22 -117 20 -154 -3z"],["d","M1044 1396 c-42 -19 -65 -51 -173 -240 -101 -177 -109 -207 -69 -277 31 -56 67 -69 193 -69 l106 0 -20 26 c-30 38 -44 90 -37 137 4 26 40 100 96 197 81 139 88 156 76 174 -36 55 -114 78 -172 52z"],["d","M1603 1153 c-6 -15 -23 -43 -37 -60 -42 -50 -101 -63 -292 -63 -180 0 -182 -1 -191 -68 -4 -27 1 -50 16 -80 35 -69 49 -72 303 -72 204 0 226 2 255 20 42 25 63 68 63 127 0 39 -9 64 -45 128 -57 100 -60 103 -72 68z"],["noShare",""],["width","16","height","16","viewBox","0 0 16 16","fill","currentColor","xmlns","http://www.w3.org/2000/svg",1,"w-6","h-6","bi","bi-folder-fill",3,"matTooltip"],["d","M9.63852 2H13.62C14.7961 2 15.7183 3.00984 15.6118 4.18107L14.9755 11.1811C14.8818 12.2112 14.0181 13 12.9837 13H2.63653C1.60212 13 0.738391 12.2112 0.64474 11.1811L0.00837643 4.18107C-0.0356793 3.69646 0.0963746 3.23948 0.349653 2.87023L0.310097 2C0.310097 0.895431 1.20553 0 2.3101 0H5.98167C6.5121 0 7.02081 0.210714 7.39588 0.585787L8.22431 1.41421C8.59938 1.78929 9.10809 2 9.63852 2ZM1.31657 2.11964C1.52937 2.04231 1.75945 2 2.00016 2H7.39588L6.68878 1.29289C6.50124 1.10536 6.24689 1 5.98167 1H2.3101C1.76412 1 1.32033 1.43755 1.31027 1.98112L1.31657 2.11964Z","fill","currentColor"],["d","M2.5 12C2.5 12 2 12 2 11.5C2 11 2.5 9.5 5 9.5C7.5 9.5 8 11 8 11.5C8 12 7.5 12 7.5 12H2.5Z","fill","white"],["d","M5 9C5.82843 9 6.5 8.32843 6.5 7.5C6.5 6.67157 5.82843 6 5 6C4.17157 6 3.5 6.67157 3.5 7.5C3.5 8.32843 4.17157 9 5 9Z","fill","white"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"w-6","h-6","bi","bi-folder-fill"],["d","M9.828 3h3.982a2 2 0 0 1 1.992 2.181l-.637 7A2 2 0 0 1 13.174 14H2.825a2 2 0 0 1-1.991-1.819l-.637-7a1.99 1.99 0 0 1 .342-1.31L.5 3a2 2 0 0 1 2-2h3.672a2 2 0 0 1 1.414.586l.828.828A2 2 0 0 0 9.828 3zm-8.322.12C1.72 3.042 1.95 3 2.19 3h5.396l-.707-.707A1 1 0 0 0 6.172 2H2.5a1 1 0 0 0-1 .981l.006.139z"],[1,"whitespace-nowrap","ml-2","py-0.5","px-2","rounded-full","text-xs","bg-info","text-white","font-medium"],[1,"whitespace-nowrap","ml-2","py-0.5","px-2","rounded-full","text-xs","bg-primary","text-white","font-medium"],["azt-track-service","folder-and-file-new-Um2GE1qOYAg",1,"btn","btn-transparent","btn-outline-secondary","p-1","mr-2",3,"disabled","click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-5","h-5","lucide"],[1,"azt-hidden","sm:block","col-span-2"],[1,"flex-none","flex","items-center","mr-5"],[1,"w-80"],[1,"col-span-2","py-1"],[1,"inbox__item--time","whitespace-nowrap","ml-auto","pl-10"],[1,"sm:hidden"],["class","exam-item",3,"ngStyle","contextMenu","contextMenuValue",4,"ngIf"],[1,"exam-item",3,"ngStyle","contextMenu","contextMenuValue"],[1,"inbox__item","sm:block","text-slate-600","hover:shadow-md","dark:text-slate-500","border-slate-200/60","dark:border-darkmode-400",2,"cursor","default",3,"ngClass"],["azt-track-service","folder-and-file-new-aOxsvSWNL",1,"block","sm:grid","grid-cols-12","gap-3","items-center","px-5","box-exam"],["shareExam",""],["azt-track-service","folder-and-file-new-1sDCbpyZRKl",1,"title-exam","flex","items-center","clickable","ml-3","w-52","sm:w-full",3,"mouseup"],[1,"w-6","h-6","image-fit"],["class","w-6 h-6 text-pending","xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",3,"matTooltip",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","class","w-6 h-6 text-pending","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",3,"matTooltip",4,"ngIf"],["class","azt-wv-sub-info mx-auto",4,"ngIf"],["class","icon-share ml-2",4,"ngIf"],["azt-track-service","folder-and-file-new-VLcxoWQErXD","class","btn btn-transparent btn-outline-secondary p-1 mr-2",3,"click",4,"ngIf"],["class","col-span-2 pt-1",4,"ngIf"],["azt-track-service","folder-and-file-new-KfYanxx5uS","type","checkbox","formControlName","checked",1,"form-check-input","flex-none",3,"change"],["type","checkbox",1,"form-check-input","flex-none",3,"disabled"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-6","h-6","text-pending",3,"matTooltip"],["d","M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],["points","14 2 14 8 20 8"],["d","m9 15 2 2 4-4"],[1,"azt-wv-sub-info","mx-auto"],[1,"icon-share","ml-2"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"w-4","h-4","lucide","text-slate-200","dark:text-darkmode-400",2,"padding","3px",3,"matTooltip"],["d","M7 14s-1 0-1-1 1-4 5-4 5 3 5 4-1 1-1 1H7zm4-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"],["fill-rule","evenodd","d","M5.216 14A2.238 2.238 0 0 1 5 13c0-1.355.68-2.75 1.936-3.72A6.325 6.325 0 0 0 5 9c-4 0-5 3-5 4s1 1 1 1h4.216z"],["d","M4.5 8a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5z"],["azt-track-service","folder-and-file-new-VLcxoWQErXD",1,"btn","btn-transparent","btn-outline-secondary","p-1","mr-2",3,"click"],[1,"flex-none","block","sm:flex","items-center","mr-5"],[1,"inbox__item--highlight","mx-auto"],[1,"sm:hidden","pl-10"],[1,"inbox__item--highlight"],[1,"col-span-2","pt-1"],[1,"w-72","sm:w-full","truncate"],[3,"matTooltip","isDisabledTooltip","matTooltipDisabled",4,"ngIf"],[3,"matTooltip","isDisabledTooltip","matTooltipDisabled"],["class","p-5 text-slate-500 border-b border-slate-200/60",3,"ngStyle",4,"ngIf"],["class","folder-item",3,"id","contextMenu","contextMenuValue",4,"ngFor","ngForOf"],["azt-track-service","folder-and-file-new-d3FNMrhtn",1,"inbox__item--sender","flex","items-center","cursor-pointer",3,"ngClass","click"],[3,"ngClass"],[1,"flex-none","flex","items-center","mr-5","cursor-pointer"],[1,"folder-item",3,"id","contextMenu","contextMenuValue"],[1,"inbox__item","inline-block","sm:block","text-slate-600","dark:text-slate-500","border-slate-200/60","dark:border-darkmode-400",2,"cursor","default",3,"ngClass"],[1,"block","sm:grid","grid-cols-12","gap-3","items-center","px-3","py-3"],["azt-track-service","folder-and-file-new-LEqGYkiB5A",1,"flex","items-center","clickable","sm:w-full","ml-3",2,"max-width","370px",3,"ngClass","mouseup"],["azt-track-service","folder-and-file-new-SpIrsSy8AO","class","btn btn-transparent btn-outline-secondary p-1 mr-2",3,"disabled","click",4,"ngIf"],["azt-track-service","folder-and-file-new-SpIrsSy8AO",1,"btn","btn-transparent","btn-outline-secondary","p-1","mr-2",3,"disabled","click"],[1,"breadcrumb","flex","flex-wrap","wrapLineBreadcumb","mt-2",2,"line-height","1.25rem","margin-left","5px"],[1,"breadcrumb-item","active"],["azt-track-service","folder-and-file-new-6Dvcjt22Hl",1,"ml-2",3,"click"],["class","breadcrumb-item",3,"ngClass",4,"ngFor","ngForOf"],[1,"breadcrumb-item",3,"ngClass"],["azt-track-service","folder-and-file-new-SGhP4bd0pB",1,"truncate","w-64","sm:w-auto",2,"max-width","100%","display","block",3,"ngStyle","click"],["class","exam-item",3,"id","contextMenu","contextMenuValue",4,"ngIf"],[1,"exam-item",3,"id","contextMenu","contextMenuValue"],[1,"inbox__item","sm:block","text-slate-600","dark:text-slate-500","border-slate-200/60","dark:border-darkmode-400",3,"ngClass"],[1,"block","sm:grid","grid-cols-12","gap-3","items-center","px-3","py-3",2,"cursor","default"],["azt-track-service","exam-and-exam-category-list-CxKJx5uxw",1,"flex-none","flex","items-center",2,"cursor","pointer",3,"click"],[1,"flex","items-center","clickable","ml-3","w-52","sm:w-full",2,"max-width","370px"],["azt-track-service","folder-and-file-new-21AjY4IME3","class","btn btn-transparent btn-outline-secondary p-1 mr-2",3,"click",4,"ngIf"],["azt-track-service","folder-and-file-new-21AjY4IME3",1,"btn","btn-transparent","btn-outline-secondary","p-1","mr-2",3,"click"],["azt-track-service","folder-and-file-new-FGP7Q6Rvcl",1,"ml-2",3,"click"],["azt-track-service","folder-and-file-new-QqjAwW1BnH",1,"truncate","w-64","sm:w-auto",3,"click"],["class","dropdown-menu show w-60 relative p-3",4,"ngIf"],[1,"dropdown-menu","show","w-60","relative","p-3"],[3,"objectCodeType","objectCode","objectId","categoryWithPermissionObj",4,"ngIf"],[3,"objectCodeType","objectCode","objectId","categoryWithPermissionObj"],[1,"dropdown-divider","border-slate-200","dark:border-darkmode-400"],["azt-track-service","folder-and-file-new-dngdKwgVYql",1,"dropdown-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","mr-2"],["d","M8.42 10.61a2.1 2.1 0 1 1 2.97 2.97L5.95 19 2 20l.99-3.95 5.43-5.44Z"],["d","M2 11.5V5c0-1.1.9-2 2-2h3.93a2 2 0 0 1 1.66.9l.82 1.2a2 2 0 0 0 1.66.9H20a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-9.5"],["azt-track-service","folder-and-file-new-dMvAkRVjW8P",1,"dropdown-item",3,"click"],["d","M8 17h12a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3.93a2 2 0 0 1-1.66-.9l-.82-1.2a2 2 0 0 0-1.66-.9H8a2 2 0 0 0-2 2v9c0 1.1.9 2 2 2Z"],["d","M2 8v11c0 1.1.9 2 2 2h14"],["azt-track-service","folder-and-file-new-Eqyg7w3RWjc",1,"dropdown-item",3,"click"],["azt-track-service","folder-and-file-new-hh3aACvDlTx",1,"dropdown-item",3,"click"],["azt-track-service","folder-and-file-new-dpksjYyWqXr",1,"dropdown-item",3,"click"],["x1","15","y1","9","x2","9","y2","15"],["x1","9","y1","9","x2","15","y2","15"],["azt-track-service","folder-and-file-new-73z5tojbR5l",1,"dropdown-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide","mr-2"],["class","dropdown-menu w-60 show relative p-3","style"," margin-bottom: -48px;",4,"ngIf"],[1,"dropdown-menu","w-60","show","relative","p-3",2,"margin-bottom","-48px"],["isOnlineExam",""],["isOnlineExamCopy",""],["azt-track-service","folder-and-file-new-saSjFTRviTc",1,"dropdown-item",3,"click"],["x1","12","y1","16","x2","12","y2","12"],["x1","12","y1","8","x2","12.01","y2","8"],["azt-track-service","folder-and-file-new-0TxDH9uhI5N",1,"dropdown-item",3,"click"],["d","M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"],["cx","9","cy","7","r","4"],["d","M22 21v-2a4 4 0 0 0-3-3.87"],["d","M16 3.13a4 4 0 0 1 0 7.75"],["azt-track-service","folder-and-file-new-Yrb2Iei9P3i",1,"dropdown-item",3,"cdkCopyToClipboard","click"],["d","M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"],["d","M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"],["azt-track-service","folder-and-file-new-imOSjqX7qwB",1,"dropdown-item",3,"click"],["d","M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z"],["d","M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z"],["d","M12 2v2"],["d","M12 22v-2"],["d","m17 20.66-1-1.73"],["d","M11 10.27 7 3.34"],["d","m20.66 17-1.73-1"],["d","m3.34 7 1.73 1"],["d","M14 12h8"],["d","M2 12h2"],["d","m20.66 7-1.73 1"],["d","m3.34 17 1.73-1"],["d","m17 3.34-1 1.73"],["d","m11 13.73-4 6.93"],["azt-track-service","folder-and-file-new-Rw0wdgMyIG",1,"dropdown-item",3,"click"],["d","M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"],["d","M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"],["azt-track-service","folder-and-file-new-yU7FoiHf8nE",1,"dropdown-item",3,"click"],["azt-track-service","folder-and-file-new-IFDWsvZh0l2",1,"dropdown-item",3,"click"],["points","20 6 9 17 4 12"],["x1","18","y1","6","x2","6","y2","18"],["x1","6","y1","6","x2","18","y2","18"],["azt-track-service","folder-and-file-new-nI3PRUcmMOn",1,"dropdown-item",3,"click"],["d","M3 3v18h18"],["d","m19 9-5 5-4-4-3 3"],["azt-track-service","folder-and-file-new-oIFmeRUYHl",1,"dropdown-item",3,"click"],["azt-track-service","folder-and-file-new-f1MqcshOTmu",1,"dropdown-item",3,"click"],["azt-track-service","folder-and-file-new-z4nXVrVuy-s",1,"dropdown-item",3,"click"],["azt-track-service","folder-and-file-new-LM51mwt6vZ2",1,"dropdown-item",3,"click"],["class","dropdown-menu show relative p-3","style","margin-top: -28px",4,"ngIf"],[1,"dropdown-menu","show","relative","p-3",2,"margin-top","-28px"],[1,"dropdown-item",2,"cursor","default"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide","ml-auto"],["points","9 18 15 12 9 6"],[1,"dropdown-menu","show","w-56","relative",2,"margin-left","-5px"],["azt-track-service","folder-and-file-new-PIBIuTYB0c1",1,"dropdown-item",3,"click"],["d","M5 17H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-1"],["points","12 15 17 21 7 21 12 15"],["azt-track-service","folder-and-file-new-1pfCD5AevZz",1,"dropdown-item",3,"click"],["x","2","y","7","width","20","height","14","rx","2","ry","2"],["d","M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"],["azt-track-service","folder-and-file-new-U8OX6yR8aix",1,"dropdown-item",3,"click"],["d","M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4"],["d","M2 15h10"],["d","m9 18 3-3-3-3"],["azt-track-service","folder-and-file-new-wPbmJ8sZGAH",1,"dropdown-item",3,"click"],["azt-track-service","folder-and-file-new-or8esZsCIRc",1,"dropdown-item",3,"click"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"ol",3)(4,"li",4)(5,"a",5),t.NdJ("click",function(){return i.goBackToAllCategoryPageEvent()}),t.TgZ(6,"h2",6),t._uU(7),t.ALo(8,"mytranslate"),t.qZA()()(),t.YNc(9,gO,8,17,"li",7),t.qZA()(),t.YNc(10,kO,12,11,"div",8),t.qZA(),t.TgZ(11,"div",9),t.YNc(12,AO,10,3,"div",10),t.YNc(13,SO,2,1,"ng-container",11),t.qZA()(),t.YNc(14,pE,23,38,"ng-template",null,12,t.W1O),t.YNc(16,qE,6,10,"ng-template",null,13,t.W1O),t.TgZ(18,"mat-menu",14,15)(20,"div",16)(21,"ul",17)(22,"li",18),t.NdJ("click",function(){return i.changePublishStatus(void 0,void 0,1)}),t.TgZ(23,"button",19),t.O4$(),t.TgZ(24,"svg",20),t._UZ(25,"path",21)(26,"path",22)(27,"path",23),t.qZA(),t._uU(28),t.ALo(29,"mytranslate"),t.qZA()(),t.kcU(),t.TgZ(30,"li",24),t.NdJ("click",function(){return i.changePublishStatus(void 0,void 0,0)}),t.TgZ(31,"button",25),t.O4$(),t.TgZ(32,"svg",20),t._UZ(33,"circle",26)(34,"path",27)(35,"path",28),t.qZA(),t._uU(36),t.ALo(37,"mytranslate"),t.qZA()()()()(),t.kcU(),t.TgZ(38,"context-menu",null,29),t.YNc(40,YE,2,4,"ng-template",30),t.qZA(),t.TgZ(41,"context-menu",null,31),t.YNc(43,bM,1,1,"ng-template",30),t.YNc(44,wM,2,4,"ng-template",32),t.TgZ(45,"context-menu",null,33),t.YNc(47,AM,8,12,"ng-template",30),t.qZA()(),t.TgZ(48,"context-menu",34,35),t.YNc(50,EM,4,2,"ng-template",30),t.qZA(),t._UZ(51,"context-menu",34,36)),2&e){const a=t.MAs(46),r=t.MAs(49);t.xp6(7),t.hij(" ",t.lcZ(8,11,"lang_auto_tat_ca")," "),t.xp6(2),t.Q6J("ngForOf",i.listBreadcrumb),t.xp6(1),t.Q6J("ngIf",-1!=i.currentCategoryId&&(i.totalCheckboxSelected>0||i.hasCopyOrCutInClipboard())),t.xp6(1),t.Q6J("contextMenu",r),t.xp6(1),t.Q6J("ngIf",0==(null==i.categoryObjs?null:i.categoryObjs.length)&&0==(null==i.documentObjs?null:i.documentObjs.length)),t.xp6(1),t.Q6J("ngIf",0!=(null==i.categoryObjs?null:i.categoryObjs.length)||0!=(null==i.documentObjs?null:i.documentObjs.length)),t.xp6(15),t.hij(" ",t.lcZ(29,13,"lang_auto_xuat_ban")," "),t.xp6(8),t.hij(" ",t.lcZ(37,15,"lang_testbank_offline_test_cancel_publish")," "),t.xp6(8),t.Q6J("subMenu",a),t.xp6(4),t.Q6J("disabled",!i.hasCopyOrCutInClipboard()),t.xp6(3),t.Q6J("disabled",!0)}},dependencies:[D.mk,D.sg,D.O5,D.tP,D.PC,Cp.i3,Ii.VK,Ii.p6,Mi.gM,f._Y,f.Wl,f.JJ,f.JL,f.sg,f.u,f.CE,oo.M,Jl.Q,z0.y,m.lB,m.GI,m.n5,D.OU,jt.JV,jt.NK,jt.Pf,jt.Z_,jt.J7,jt.k$,jt.k4,jt.PA,jt.Az,jt.xS,jt.CL,jt.Fb,jt.CP,jt.$n,jt.O7],styles:[".title-exam[_ngcontent-%COMP%]{max-width:370px;padding-top:14px;padding-bottom:14px}@media (max-width: 640px){.title-exam[_ngcontent-%COMP%]{padding-top:0;padding-bottom:0}.box-exam[_ngcontent-%COMP%]{padding-top:12px;padding-bottom:12px}}"]}),n})();function IM(n,o){1&n&&(t.O4$(),t.TgZ(0,"svg",12),t._UZ(1,"path",13)(2,"polyline",14)(3,"line",15)(4,"line",16)(5,"line",17),t.qZA())}function LM(n,o){1&n&&(t.O4$(),t.TgZ(0,"svg",12),t._UZ(1,"path",13)(2,"polyline",14),t.qZA())}function PM(n,o){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,IM,6,0,"svg",11),t.YNc(2,LM,3,0,"svg",11),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",1==(null==e.dataObj.homework?null:e.dataObj.homework.isPublished)),t.xp6(1),t.Q6J("ngIf",1!=(null==e.dataObj.homework?null:e.dataObj.homework.isPublished))}}function NM(n,o){1&n&&(t.O4$(),t.TgZ(0,"svg",20),t.ALo(1,"mytranslate"),t._UZ(2,"path",13)(3,"polyline",14)(4,"path",21),t.qZA()),2&n&&t.s9C("matTooltip",t.lcZ(1,1,"lang_testbank_folder_and_file_published"))}function ZM(n,o){1&n&&(t.O4$(),t.TgZ(0,"svg",22),t.ALo(1,"mytranslate"),t._UZ(2,"path",13)(3,"polyline",14),t.qZA()),2&n&&t.s9C("matTooltip",t.lcZ(1,1,"lang_testbank_folder_and_file_Unpublished"))}function DM(n,o){if(1&n&&(t.YNc(0,NM,5,3,"svg",18),t.YNc(1,ZM,4,3,"svg",19)),2&n){const e=t.oxw();t.Q6J("ngIf",1==(null==e.dataObj.exam?null:e.dataObj.exam.isPublished)),t.xp6(1),t.Q6J("ngIf",1!=(null==e.dataObj.exam?null:e.dataObj.exam.isPublished))}}function jM(n,o){if(1&n&&(t.TgZ(0,"div",7),t._uU(1),t.ALo(2,"mytranslate"),t.ALo(3,"formatFullDateTimeWithoutSecondByUserUnitPipe"),t.ALo(4,"mytranslate"),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.AsE(" ",t.lcZ(2,2,"lang_auto_thoi_gian_nop_bai"),": ",e.dataObj.deadline?t.lcZ(3,4,e.dataObj.deadline):t.lcZ(4,6,"lang_auto_khong_thoi_han")," ")}}function qM(n,o){if(1&n&&(t.TgZ(0,"div",7),t._uU(1),t.ALo(2,"mytranslate"),t.ALo(3,"mytranslate"),t.ALo(4,"mytranslate"),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.AsE(" ",t.lcZ(2,2,"lang_auto_thoi_gian_lam_bai"),": ",null!=e.dataObj.exam&&e.dataObj.exam.minutes?(null==e.dataObj.exam?null:e.dataObj.exam.minutes)+" "+t.lcZ(3,4,"lang_auto_phut"):t.lcZ(4,6,"lang_auto_khong_thoi_han")," ")}}function FM(n,o){if(1&n&&(t.TgZ(0,"span",23),t.ALo(1,"mytranslate"),t._uU(2),t.TgZ(3,"span",24),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()()),2&n){const e=t.oxw();t.s9C("matTooltip",t.lcZ(1,3,"lang_auto_luot_lam")),t.xp6(2),t.hij(" ",e.dataObj.submitted+" "," "),t.xp6(2),t.Oqu(t.lcZ(5,5,"lang_auto_luot_lam"))}}function QM(n,o){if(1&n&&(t.TgZ(0,"span",23),t.ALo(1,"mytranslate"),t._uU(2),t.TgZ(3,"span",24),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()()),2&n){const e=t.oxw();t.s9C("matTooltip",t.lcZ(1,3,"lang_auto_da_nop")),t.xp6(2),t.hij(" ",e.dataObj.submitted+"/"+e.dataObj.total+" "," "),t.xp6(2),t.Oqu(t.lcZ(5,5,"lang_auto_da_nop"))}}const RM=function(n){return{"bg-slate-100 dark:bg-darkmode-400":n}};let L6=(()=>{class n extends St.Q{ngOnInit(){super.ngOnInit()}constructor(e){super(),this.commonService=e,this.dataObj={},this.showByClass=!1,this.viewType=""}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(mi.z))},n.\u0275cmp=t.Xpm({type:n,selectors:[["azt-file-item"]],inputs:{dataObj:"dataObj",showByClass:"showByClass",viewType:"viewType"},features:[t.qOj],decls:19,vars:19,consts:[[1,"box","p-2","flex","items-center","zoom-in",3,"ngClass"],[1,"flex-none","image-fit","rounded-md","overflow-hidden"],[4,"ngIf","ngIfElse"],["ExamIcon",""],[1,"ml-4","mr-auto","w-2/3"],[1,"font-medium","truncate",3,"matTooltip","isDisabledTooltip","matTooltipDisabled"],["c","isDisabled"],[1,"text-slate-500","text-xs","mt-0.5"],["class","text-slate-500 text-xs mt-0.5",4,"ngIf"],[1,"py-1","px-2","rounded-full","text-xs","bg-success","text-white","cursor-pointer","font-medium"],[3,"matTooltip",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","class","w-10 h-10 lucide text-primary","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-10","h-10","lucide","text-primary"],["d","M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],["points","14 2 14 8 20 8"],["x1","16","y1","13","x2","8","y2","13"],["x1","16","y1","17","x2","8","y2","17"],["x1","10","y1","9","x2","8","y2","9"],["class","w-10 h-10 text-pending lucide","xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",3,"matTooltip",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","class","w-10 h-10 lucide text-pending","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",3,"matTooltip",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-10","h-10","text-pending","lucide",3,"matTooltip"],["d","m9 15 2 2 4-4"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-10","h-10","lucide","text-pending",3,"matTooltip"],[3,"matTooltip"],[1,"hiddenIpt"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,PM,3,2,"div",2),t.YNc(3,DM,2,2,"ng-template",null,3,t.W1O),t.qZA(),t.TgZ(5,"div",4)(6,"div",5,6),t._uU(8),t.qZA(),t.TgZ(9,"div",7)(10,"span"),t._uU(11),t.ALo(12,"mytranslate"),t.ALo(13,"formatFullDateTimeWithoutSecondByUserUnitPipe"),t.qZA()(),t.YNc(14,jM,5,8,"div",8),t.YNc(15,qM,5,8,"div",8),t.qZA(),t.TgZ(16,"div",9),t.YNc(17,FM,6,7,"span",10),t.YNc(18,QM,6,7,"span",10),t.qZA()()),2&e){const a=t.MAs(4),r=t.MAs(7);t.Q6J("ngClass",t.VKq(17,RM,"classroom"==i.viewType)),t.xp6(2),t.Q6J("ngIf","homework"==i.dataObj.type)("ngIfElse",a),t.xp6(4),t.s9C("matTooltip",i.dataObj.name),t.Q6J("isDisabledTooltip",!1)("matTooltipDisabled",r.isDisabled),t.xp6(2),t.hij(" ",i.dataObj.name," "),t.xp6(3),t.AsE("",t.lcZ(12,13,"lang_auto_ngay_tao"),": ",t.lcZ(13,15,i.dataObj.createdAt),""),t.xp6(3),t.Q6J("ngIf","homework"==i.dataObj.type),t.xp6(1),t.Q6J("ngIf","exam"==i.dataObj.type),t.xp6(2),t.Q6J("ngIf","exam"==i.dataObj.type),t.xp6(1),t.Q6J("ngIf","homework"==i.dataObj.type)}},dependencies:[D.mk,D.O5,Mi.gM,Jl.Q,jt.JV,jt.$n],encapsulation:2}),n})();function UM(n,o){1&n&&(t.TgZ(0,"span",2),t._UZ(1,"azt-loading-ui"),t.qZA())}const P6=function(n){return[n]},N6=function(n){return{backto:n}};function BM(n,o){if(1&n&&(t.TgZ(0,"div",10)(1,"a",11),t.ALo(2,"navigationLocalize"),t._UZ(3,"azt-file-item",12),t.qZA()()),2&n){const e=o.$implicit,i=t.oxw(4);let a;t.xp6(1),t.Q6J("routerLink",t.VKq(5,P6,t.lcZ(2,3,"/admin/testbank/exam-results-list/"+(null!==(a=null==e.exam?null:e.exam.categoryId)&&void 0!==a?a:0)+"/"+(null==e.exam?null:e.exam.id)+"/0")))("queryParams",t.VKq(7,N6,"/admin/testbank/document-management/0/"+i.categoryId+"/1")),t.xp6(2),t.Q6J("dataObj",e)}}function zM(n,o){if(1&n&&(t.TgZ(0,"div",8),t.YNc(1,BM,4,9,"div",9),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.Q6J("ngForOf",e.recommendDocumentObjs)}}function JM(n,o){if(1&n&&(t.TgZ(0,"div",10)(1,"a",13),t.ALo(2,"navigationLocalize"),t._UZ(3,"azt-file-item",12),t.qZA()()),2&n){const e=o.$implicit,i=t.oxw(4);t.xp6(1),t.Q6J("routerLink",t.VKq(5,P6,t.lcZ(2,3,"/admin/testbank/homework-results-list/"+(null==e.homework?null:e.homework.classroomId)+"/"+(null==e.homework?null:e.homework.id)+"/"+(null==e.homework?null:e.homework.hashId))))("queryParams",t.VKq(7,N6,"/admin/testbank/document-management/1/"+i.categoryId+"/1")),t.xp6(2),t.Q6J("dataObj",e)}}function HM(n,o){if(1&n&&(t.TgZ(0,"div",8),t.YNc(1,JM,4,9,"div",9),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.Q6J("ngForOf",e.recommendDocumentObjs)}}function GM(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"div",4)(2,"div",5)(3,"h2",6),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()(),t.YNc(6,zM,2,1,"div",7),t.YNc(7,HM,2,1,"div",7),t.qZA(),t.BQk()),2&n){const e=t.oxw(2);t.xp6(4),t.hij(" ",t.lcZ(5,3,"lang_auto_duoc_de_xuat")," "),t.xp6(2),t.Q6J("ngIf","exam"==e.type),t.xp6(1),t.Q6J("ngIf","homework"==e.type)}}function $M(n,o){if(1&n&&t.YNc(0,GM,8,5,"ng-container",3),2&n){const e=t.oxw();t.Q6J("ngIf",e.recommendDocumentObjs.length>0)}}let Z6=(()=>{class n extends St.Q{convertRecommendDocumentObjs(e,i){var a=[];return e.forEach(r=>{"exam"===i&&r.exam?a.push({id:r.exam.id,hashId:r.exam.hashId,name:r.exam.name,type:"exam",createdAt:r.exam.createdAt,submitted:r.exam.attended,exam:r.exam}):"homework"===i&&r.homework&&a.push({id:r.homework.id,hashId:r.homework.hashId,name:r.homework.name,type:"homework",createdAt:r.homework.createdAt,submitted:r.homework.count,total:r.homework.totalStudent,homework:r.homework})}),a}getRecommendDocumentObjs(e){const i={categoryId:this.categoryId?this.categoryId:void 0,documentType:"file",shareType:"owner",fileType:e,classroomId:void 0,name:void 0,suggestExamPurpose:void 0,lite:void 0,getGlobal:0,page:1,itemPerPage:4};this.initStatusObj(),this.waitDestroy(this.documentService.apiDocumentsGet(i.categoryId,i.documentType,i.shareType,i.fileType,i.classroomId,i.name,i.suggestExamPurpose,i.lite,i.getGlobal,i.page,i.itemPerPage).subscribe(a=>{a&&1==a.success?(this.recommendDocumentObjs=this.convertRecommendDocumentObjs(a.data?.documentObjs??[],e),this.stopStatusObj()):this.showErrorSnack(a.message??"")}))}ngOnInit(){this.getRecommendDocumentObjs(this.type)}constructor(e,i){super(),this.commonService=e,this.documentService=i,this.recommendDocumentObjs=[],this.categoryId=0}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(mi.z),t.Y36(Ke.Zg))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-document-recommend-list"]],inputs:{type:"type"},features:[t.qOj],decls:3,vars:2,consts:[["class","w-8 h-8 inline-block mt-3",4,"ngIf","ngIfElse"],["doneLoading",""],[1,"w-8","h-8","inline-block","mt-3"],[4,"ngIf"],[1,"intro-y"],[1,"flex","items-center","mt-5"],[1,"text-lg","font-medium","truncate","mr-5"],["class","grid grid-cols-12 gap-6 mt-5",4,"ngIf"],[1,"grid","grid-cols-12","gap-6","mt-5"],["class","col-span-12 md:col-span-6 lg:col-span-4 xl:col-span-3",4,"ngFor","ngForOf"],[1,"col-span-12","md:col-span-6","lg:col-span-4","xl:col-span-3"],["azt-track-service","document-management-UHo7sIsZSVk",3,"routerLink","queryParams"],[3,"dataObj"],[3,"routerLink","queryParams"]],template:function(e,i){if(1&e&&(t.YNc(0,UM,2,0,"span",0),t.YNc(1,$M,1,1,"ng-template",null,1,t.W1O)),2&e){const a=t.MAs(2);t.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a)}},dependencies:[O.rH,D.sg,D.O5,L6,oi.n,jt.Jy,jt.JV],encapsulation:2}),n})();function YM(n,o){1&n&&t._UZ(0,"azt-loading-effect")}function KM(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"azt-permission-checking",32)(2,"button",33),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.goToMatrixExamPage())}),t.ALo(3,"editPermission"),t.O4$(),t.TgZ(4,"svg",34),t._UZ(5,"line",35)(6,"line",36)(7,"line",37)(8,"line",38)(9,"line",39)(10,"polygon",40),t.qZA(),t._uU(11),t.ALo(12,"mytranslate"),t.qZA()(),t.BQk()}if(2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("applyType","MATRIX_QUESTION"),t.xp6(1),t.Q6J("disabled",e.currentCategoryId&&!t.xi3(3,3,e.currentCategory,"category")),t.xp6(9),t.hij(" ",t.lcZ(12,6,"lang_testbank_test_list_create_new_from_matrix_bank")," ")}}function WM(n,o){if(1&n){const e=t.EpF();t.O4$(),t.kcU(),t.TgZ(0,"div",41)(1,"button",42),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.goToSyncExamByFolderPage(a.currentCategoryId))}),t.O4$(),t.TgZ(2,"svg",43),t._UZ(3,"path",44)(4,"path",45)(5,"path",46),t.qZA()()()}}function VM(n,o){1&n&&(t.O4$(),t.kcU(),t.ynx(0),t._UZ(1,"app-document-recommend-list",47),t.BQk()),2&n&&(t.xp6(1),t.Q6J("type","exam"))}function XM(n,o){1&n&&(t.O4$(),t.kcU(),t._UZ(0,"azt-loading-effect"))}const t8=function(){return[]};function e8(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"app-exam-and-exam-category-list",48),t.NdJ("goToChildCategoryPage",function(a){t.CHM(e);const r=t.oxw(2);return t.KtG(r.goToChildCategoryPage(a))})("showEditFolderDialog",function(a){t.CHM(e);const r=t.oxw(2);return t.KtG(r.showEditFolderDialog(a))})("goBackToAllCategoryPage",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.goBackToAllCategoryPage())})("backToParentCategory",function(a){t.CHM(e);const r=t.oxw(2);return t.KtG(r.backToParentCategory(a))})("loadApiData",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.reloadApi())})("changeHiddenStatusObj",function(a){t.CHM(e);const r=t.oxw(2);return t.KtG(r.changeHiddenStatusObj(a))}),t.qZA()}if(2&n){const e=t.oxw(2);t.Q6J("rootCategoryObjs",e.cloneCategoryObjs)("rootDocumentObjs",e.cloneDocumentObjs)("categoryObjs",e.categoryObjs)("documentObjs",e.documentObjs)("backToData",e.backToData)("currentPage",e.pageObj.page)("currentCategory",e.currentCategory)("isShowSearchResult",e.isShowSearchResult)("listBreadcrumb",e.listBreadcrumb||t.DdM(9,t8))}}const n8=function(n,o){return{"md:col-span-3":n,"md:col-span-4":o}};function i8(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8)(4,"azt-search-box",9),t.NdJ("onSearch",function(a){t.CHM(e);const r=t.oxw();return t.KtG(r.searchDocument(a.searchObj))}),t.ALo(5,"mytranslate"),t.qZA()(),t.TgZ(6,"div",10)(7,"div",11),t.YNc(8,KM,13,8,"ng-container",12),t.ALo(9,"showFeatureWhenIsNotBusinessDomain"),t.ALo(10,"async"),t.ALo(11,"allowFeatureBusinessForUser"),t.qZA(),t.TgZ(12,"div",13)(13,"button",14),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.goToCreateExamPage(a.currentCategoryId))}),t.ALo(14,"editPermission"),t.O4$(),t.TgZ(15,"svg",15),t._UZ(16,"line",16)(17,"line",17),t.qZA(),t._uU(18),t.ALo(19,"mytranslate"),t.qZA()(),t.kcU(),t.TgZ(20,"div",13)(21,"button",18),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.showAddFolderDialog())}),t.ALo(22,"editPermission"),t.O4$(),t.TgZ(23,"svg",19),t._UZ(24,"path",20)(25,"line",21)(26,"line",22),t.qZA(),t._uU(27),t.ALo(28,"mytranslate"),t.qZA()(),t.YNc(29,WM,6,0,"div",23),t.qZA()(),t.YNc(30,VM,2,1,"ng-container",12),t.YNc(31,XM,1,0,"azt-loading-effect",2),t.kcU(),t.TgZ(32,"div",24),t.YNc(33,e8,1,10,"ng-template",null,25,t.W1O),t.qZA(),t.TgZ(35,"div",26)(36,"div",27)(37,"azt-paging",28),t.NdJ("goToPaginationPage",function(a){t.CHM(e);const r=t.oxw();return t.KtG(r.goToPage(a))}),t.qZA()(),t.TgZ(38,"div",29)(39,"p",30),t._uU(40),t.ALo(41,"number"),t.ALo(42,"mytranslate"),t.qZA()(),t.TgZ(43,"div",31)(44,"p",30),t._uU(45),t.ALo(46,"number"),t.ALo(47,"mytranslate"),t.qZA()()()()()}if(2&n){const e=t.MAs(34),i=t.oxw();t.Q6J("hidden",!0===i.hiddenStatus.isHidden),t.xp6(4),t.Q6J("isServerSearch",!0)("placeholder",t.lcZ(5,17,"lang_auto_tim_kiem"))("searchContentObj",i.searchContentObj),t.xp6(3),t.Q6J("ngClass",t.WLB(45,n8,i.userService.isTestMarketAdminRole(),!i.userService.isTestMarketAdminRole())),t.xp6(1),t.Q6J("ngIf",t.lcZ(9,19,"")||t.lcZ(10,21,t.Dn7(11,23,"","azota_question_library",!1))),t.xp6(5),t.Q6J("disabled",i.currentCategoryId&&!t.xi3(14,27,i.currentCategory,"category")),t.xp6(5),t.hij(" ",t.lcZ(19,30,"lang_testbank_test_list_create_new")," "),t.xp6(3),t.Q6J("disabled",i.currentCategoryId&&!t.xi3(22,32,i.currentCategory,"category")),t.xp6(6),t.hij(" ",t.lcZ(28,35,"lang_auto_tao_thu_muc")," "),t.xp6(2),t.Q6J("ngIf",i.userService.isTestMarketAdminRole()),t.xp6(1),t.Q6J("ngIf",!i.currentCategoryId),t.xp6(1),t.Q6J("ngIf",i.searchContentObj.isLoading)("ngIfElse",e),t.xp6(6),t.Q6J("pageObj",i.pageObj),t.xp6(3),t.Oqu(t.lcZ(41,37,i.totalExam)+" "+t.lcZ(42,39,"lang_testbank_test_list_document")),t.xp6(5),t.Oqu(t.lcZ(46,41,i.totalExam)+" "+t.lcZ(47,43,"lang_testbank_test_list_document"))}}let o8=(()=>{class n extends St.Q{goToPage(e){this.backToData?this.commonService.myNavigationWithQueryString("/admin/testbank/document-management/0/"+this.currentCategoryId+"/"+e,"?data="+this.commonService.serializeJson(this.backToData)):this.commonService.myNavigation("/admin/testbank/document-management/0/"+this.currentCategoryId+"/"+e)}resetSearchForm(){this.searchContentObj.searchContent="",this.isShowSearchResult=!1}convertExamObj(e){var i=[];return e.forEach(a=>{a.exam&&i.push({name:a.exam.name,updatedAt:a.exam.updatedAt,createdAt:a.exam.createdAt,attended:a.exam.attended,isPublished:a.exam.isPublished,exam:a.exam,shared:a.shared,type:"exam",paths:a.paths,isGlobalAzota:0})}),i}showAddFolderDialog(){this.documentDoExamCategoryActionService.doExamCategoryAction({categoryId:this.currentCategoryId,examCategoryObj:void 0},$f.ADD_FOLDER).subscribe(e=>{e?.reloadData&&this.getData()})}showEditFolderDialog(e){this.documentDoExamCategoryActionService.doExamCategoryAction({categoryId:0,examCategoryObj:e},$f.EDIT_FOLDER).subscribe(i=>{i?.reloadData&&this.getData()})}goBackToAllCategoryPage(){this.searchContentObj.searchContent?(this.resetSearchForm(),0==this.currentCategoryId?this.getData():this.commonService.myNavigation("/admin/testbank/document-management/0/0/1")):this.commonService.myNavigation("/admin/testbank/document-management/0/0/1")}backToParentCategory(e){e.id!=this.currentCategoryId&&(this.resetSearchForm(),this.commonService.myNavigationWithQueryString("/admin/testbank/document-management/0/"+e.id+"/1",e.shareType?"?data="+this.commonService.serializeJson({shareType:e.shareType,backTo:`/admin/testbank/document-management/0/${this.currentCategoryId}/1`,suggest:e.isGlobalAzota>1?1:0,isAztLib:0!=e.isGlobalAzota?1:0}):""))}goToChildCategoryPage(e){if(this.resetSearchForm(),0!=e.isGlobalAzota)e.mouseWheel?this.commonService.myNavigationToNewTab("/ladingpage/document-management/0/0/1",""):this.commonService.myNavigationWithQueryString("/ladingpage/document-management/0/0/1","");else if(e.shareType){let i={shareType:e.shareType,suggest:0!=e.isGlobalAzota?1:0,isAztLib:0!=e.isGlobalAzota?1:0};e.mouseWheel?this.commonService.myNavigationToNewTab("/admin/testbank/document-management/0/"+e.id+"/1","?data="+this.commonService.serializeJson(i)):this.commonService.myNavigationWithQueryString("/admin/testbank/document-management/0/"+e.id+"/1","?data="+this.commonService.serializeJson(i))}else e.mouseWheel?this.commonService.myNavigationToNewTab("/admin/testbank/document-management/0/"+e.id+"/1",""):this.commonService.myNavigationWithQueryString("/admin/testbank/document-management/0/"+e.id+"/1","")}goToCreateExamPage(e){let i=`/admin/testbank/document-management/0/${this.currentCategoryId}/${this.pageObj.page}`+(this.backToData?.shareType?"?data="+this.commonService.serializeJson({shareType:this.backToData?.shareType,suggest:this.backToData?.suggest}):"");this.commonService.myNavigationWithQueryString("/admin/testbank/create-new-document/"+(e??0),"?backto="+encodeURIComponent(i))}goToMatrixExamPage(){let e=`/admin/testbank/document-management/0/${this.currentCategoryId}/${this.pageObj.page}`+(this.backToData?.shareType?"?data="+this.commonService.serializeJson({shareType:this.backToData?.shareType,suggest:this.backToData?.suggest}):"");this.commonService.myNavigationWithQueryString("/admin/testbank/matrix-list/"+this.currentCategoryId+"/1","?backto="+encodeURIComponent(e))}goToSyncExamByFolderPage(e){let i=`/admin/testbank/document-management/0/${this.currentCategoryId}/${this.pageObj.page}`+(this.backToData?.shareType?"?data="+this.commonService.serializeJson({shareType:this.backToData?.shareType,suggest:this.backToData?.suggest}):"");this.commonService.myNavigationWithQueryString("/admin/testbank/sync-folder/"+(e??0),"?backto="+encodeURIComponent(i))}getListParentCategoryObjs(){this.waitDestroy(this.examCategoryService.apiExamCategoryGetBreadcrumbsGet(this.currentCategoryId,this.backToData?.shareType??"","new").subscribe(e=>{if(e&&1==e.success){var i=[];e.data?.objs&&e.data?.objs.forEach(a=>{i.push({...a,shared:!1,sharedGroups:[],sharedTeachers:[],paths:[]})}),this.listBreadcrumb=i;for(let a=0;a<this.listBreadcrumb?.length;a++)if(this.listBreadcrumb[a].id==this.currentCategoryId){let r="",s=0,l=0;0!=this.listBreadcrumb[a].isGlobalAzota&&(l=1),!this.listBreadcrumb[a].parentId&&this.listBreadcrumb[a].shareType?(r=0!=this.listBreadcrumb[a].isGlobalAzota?"":"user",s=a>1?this.listBreadcrumb[a-1].id??-1:0==a&&0!=this.listBreadcrumb[a].isGlobalAzota?0:this.listBreadcrumb[a].parentId??this.listBreadcrumb[a].tenantId??-1):this.listBreadcrumb[a].parentId&&this.listBreadcrumb[a].shareType?(r=a>1?this.listBreadcrumb[a-1].shareType??"":a<=1&&0!=this.listBreadcrumb[a].isGlobalAzota?this.listBreadcrumb[a].shareType??"":"",s=this.listBreadcrumb[a].parentId??-1):s=this.listBreadcrumb[a].parentId??0;let c=s?`/admin/testbank/document-management/0/${s}/1`+(this.backToData?"?data="+this.commonService.serializeJson({shareType:r}):""):"/admin/testbank/document-management/0/0/1";this.backToLink=this.commonService.serializeJson({shareType:r,backTo:c,suggest:l})}}else this.showErrorSnack(e.message??"")}))}getClassroomName(e){var i=[];return e.forEach(a=>{a.name&&!this.commonService.isExistInArray(i,a.name)&&i.push(a.name)}),i}searchDocument(e){this.searchContentObj=e,this.isShowSearchResult=!!this.searchContentObj.searchContent,this.pageObj.setPageNumber(1),this.searchContentObj.setLoading(!0);let i={categoryId:0!=this.currentCategoryId?this.currentCategoryId:0,documentType:void 0,shareType:this.backToData?.shareType??"",fileType:"exam",classroomId:void 0,name:this.searchContentObj.searchContent,suggestExamPurpose:void 0,lite:void 0,getGlobal:1,page:this.pageObj.page,itemPerPage:void 0};this.waitDestroy(this.documentService.apiDocumentsGet(i.categoryId,i.documentType,i.shareType,i.fileType,i.classroomId,i.name,i.suggestExamPurpose,i.lite,i.getGlobal,i.page,i.itemPerPage).subscribe(a=>{if(a&&1==a.success){var r=this.convertExamObj(a.data?.documentObjs??[]);this.documentObjs=r,this.cloneDocumentObjs=r,this.categoryObjs=a.data?.categoryObjs,this.cloneCategoryObjs=a.data?.categoryObjs??[],this.totalExam=a.data?.total??0,this.pageObj.setTotalPages(this.totalExam),this.stopStatusObj(),this.searchContentObj.setLoading(!1)}else this.showErrorSnack(a.message??""),this.searchContentObj.setLoading(!1)}))}getData(){var e=Number(this.commonService.getMyParam(this.activeRoute,"page"));this.pageObj.setPageNumber(e>0?e:1),this.searchContentObj.searchContent?this.searchContentObj.setLoading(!0):this.initStatusObj();let i={categoryId:0!=this.currentCategoryId?this.currentCategoryId:0,documentType:void 0,shareType:this.backToData?.shareType??"",fileType:"exam",classroomId:void 0,name:this.isShowSearchResult?this.searchContentObj.searchContent:void 0,suggestExamPurpose:void 0,lite:void 0,getGlobal:1,page:this.pageObj.page,itemPerPage:void 0};this.waitDestroy(this.documentService.apiDocumentsGet(i.categoryId,i.documentType,i.shareType,i.fileType,i.classroomId,i.name,i.suggestExamPurpose,i.lite,i.getGlobal,i.page,i.itemPerPage).subscribe(a=>{if(a&&1==a.success){var r=this.commonService.castObj(a.data?.documentObjs)??[],s=this.convertExamObj(r);this.documentObjs=s,this.cloneDocumentObjs=s,this.categoryObjs=a.data?.categoryObjs,this.cloneCategoryObjs=a.data?.categoryObjs??[],this.currentCategory=a.data?.currentCategory?{...a.data?.currentCategory,shared:!1,sharedGroups:[],sharedTeachers:[],paths:[]}:void 0,this.totalExam=a.data?.total??0,this.pageObj.setTotalPages(this.totalExam),this.getListParentCategoryObjs(),this.searchContentObj.setLoading(!1),this.stopStatusObj()}else this.searchContentObj.setLoading(!1),this.showErrorSnack(a.message??"")}))}reloadApi(){this.getData()}changeHiddenStatusObj(e){e?this.hiddenStatusObj():this.removeHiddenStatusObj()}ngOnInit(){this.waitDestroy((0,dt.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.pageObj.setPageNumber(Number(this.commonService.getMyParam(this.activeRoute,"page"))),this.currentCategoryId=Number(this.commonService.getMyParam(this.activeRoute,"cat_id")),this.backToData=this.commonService.myParseJson(this.commonService.getMyQueryParam("data")??""),this.backToLink=this.commonService.serializeJson({shareType:this.backToData?.shareType,suggest:this.backToData?.suggest,backTo:this.backToData?.backTo??(null!=this.currentCategoryId&&0!=this.currentCategoryId?"/admin/testbank/document-management/0/0/1":"/admin/dashboard")}),this.mobileWebviewService.sendSimpleMessage("OPEN_EXAM"),this.aztShareService.currentMessage.subscribe(i=>{this.getData()})})),this.commonService.translateMetaData({title:"lang_testbank_document_list_header_title",description:"lang_testbank_document_list_header_description",image:"lang_cms_test_image"}),super.ngOnInit()}ngOnDestroy(){super.ngOnDestroy()}constructor(e,i,a,r,s,l,c){super(),this.activeRoute=e,this.examCategoryService=i,this.documentService=a,this.aztShareService=r,this.mobileWebviewService=s,this.userService=l,this.documentDoExamCategoryActionService=c,this.isShowSearchResult=!1,this.totalExam=0,this.documentObjs=[],this.cloneDocumentObjs=[],this.cloneCategoryObjs=[],this.listBreadcrumb=[],this.currentCategoryId=0,this.backToLink="",this.searchContentObj=new U0.h,this.pageObj=new Ry.m(24)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(O.gz),t.Y36(Ke.F1),t.Y36(US.Z),t.Y36(BS.b),t.Y36(B0.r),t.Y36(ga.U),t.Y36(tO))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-document-exam-management-list"]],features:[t.qOj],decls:6,vars:4,consts:[[3,"headerBackToLink"],[1,"container-fluid","mt-5","overflow-hidden",3,"contextmenu"],[4,"ngIf","ngIfElse"],[3,"hidden"],["doneLoading",""],[1,"grid","grid-cols-12","gap-6",3,"hidden"],[1,"col-span-12","lg:col-span-12","2xl:col-span-12"],[1,"flex","flex-col-reverse","sm:flex-row","items-center"],[1,"w-full","sm:w-auto","mr-auto","mt-3","sm:mt-0"],[3,"isServerSearch","placeholder","searchContentObj","onSearch"],[1,"w-full","sm:w-auto","grid","grid-cols-12","gap-2"],[1,"col-span-12","lg:col-span-6",3,"ngClass"],[4,"ngIf"],[1,"col-span-12","md:col-span-4","lg:col-span-3"],["azt-track-service","document-management-PLy5-QC0gDH",1,"btn","btn-success","text-white","shadow-md","w-full",3,"disabled","click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-6","mr-2"],["x1","12","y1","5","x2","12","y2","19"],["x1","5","y1","12","x2","19","y2","12"],["azt-track-service","document-management-Pe6lKHXLhm_",1,"btn","btn-primary","shadow-md","w-full","block",3,"disabled","click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-6","mr-2"],["d","M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z"],["x1","12","y1","10","x2","12","y2","16"],["x1","9","y1","13","x2","15","y2","13"],["class","col-span-2 md:col-span-1",4,"ngIf"],[1,"azt-view-file-manager"],["doneLoadingSearch",""],[1,"azt-document-footer","flex","items-center","flex-col-reverse","sm:flex-row","mt-3"],[1,"mr-0","sm:mr-auto","mt-2"],[3,"pageObj","goToPaginationPage"],[1,"text-right","mt-2","azt-hidden","md:block"],[1,"text-md"],[1,"ml-auto","text-right","-mt-2","block","md:hidden"],[3,"applyType"],["azt-track-service","document-management-vOye2ZDtJ",1,"btn","btn-info","text-white","shadow-md","w-full",3,"disabled","click"],["xmlns","http://www.w3.org/2000/svg","width","20","height","24","viewBox","0 0 20 20","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"mr-2"],["x1","3","y1","22","x2","21","y2","22"],["x1","6","y1","18","x2","6","y2","11"],["x1","10","y1","18","x2","10","y2","11"],["x1","14","y1","18","x2","14","y2","11"],["x1","18","y1","18","x2","18","y2","11"],["points","12 2 20 7 4 7"],[1,"col-span-2","md:col-span-1"],["azt-track-service","document-management-FeigO5kRW",1,"btn","btn-danger","shadow-md","w-full",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-6"],["d","M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"],["d","M12 12v9"],["d","m16 16-4-4-4 4"],[3,"type"],[3,"rootCategoryObjs","rootDocumentObjs","categoryObjs","documentObjs","backToData","currentPage","currentCategory","isShowSearchResult","listBreadcrumb","goToChildCategoryPage","showEditFolderDialog","goBackToAllCategoryPage","backToParentCategory","loadApiData","changeHiddenStatusObj"]],template:function(e,i){if(1&e&&(t.TgZ(0,"teacher-layout",0)(1,"div",1),t.NdJ("contextmenu",function(){return!1}),t.YNc(2,YM,1,0,"azt-loading-effect",2),t._UZ(3,"azt-loading-effect",3),t.YNc(4,i8,48,48,"ng-template",null,4,t.W1O),t.qZA()()),2&e){const a=t.MAs(5);t.Q6J("headerBackToLink",i.backToLink),t.xp6(2),t.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a),t.xp6(1),t.Q6J("hidden",!0!==i.hiddenStatus.isHidden)}},dependencies:[D.mk,D.O5,si.l,Uy.L,iO,Yf.W,fo._,MM,Z6,D.Ov,D.JJ,jt.JV,jt.Pf,jt.J8,jt.O0],encapsulation:2}),n})();function a8(n,o){1&n&&(t.TgZ(0,"span",14),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_auto_chia_se")))}const r8=function(n){return[n]},s8=function(n){return{backto:n}};function l8(n,o){if(1&n&&(t.TgZ(0,"div",17)(1,"a",18),t.ALo(2,"navigationLocalize"),t._UZ(3,"azt-file-item",19),t.qZA()()),2&n){const e=o.$implicit,i=t.oxw(3);t.xp6(1),t.Q6J("routerLink",t.VKq(7,r8,t.lcZ(2,5,"/admin/testbank/homework-results-list/"+(null==e.homework?null:e.homework.classroomId)+"/"+(null==e.homework?null:e.homework.id)+"/"+(null==e.homework?null:e.homework.hashId))))("queryParams",t.VKq(9,s8,"/admin/testbank/document-management/1/"+i.currentCategoryId+"/1")),t.xp6(2),t.Q6J("dataObj",e)("showByClass",!0)("viewType","classroom")}}function c8(n,o){if(1&n&&(t.TgZ(0,"div")(1,"div",15),t.YNc(2,l8,4,11,"div",16),t.qZA()()),2&n){const e=t.oxw().$implicit;t.xp6(2),t.Q6J("ngForOf",e.recommendExamObjs)}}function u8(n,o){1&n&&(t.TgZ(0,"div",20),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_homework_classroom_list_not_found_homework")))}const d8=function(n){return{cursor:n}};function m8(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",3)(1,"div",4)(2,"div",5)(3,"a",6,7),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.goToClassroomDetailPage(r))}),t._uU(5),t.ALo(6,"mytranslate"),t.qZA(),t.YNc(7,a8,3,3,"span",8),t.ALo(8,"fullPermission"),t.TgZ(9,"div",9)(10,"button",10),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.viewAllDocumentObjsOfClassroom(r))}),t._uU(11),t.ALo(12,"mytranslate"),t.qZA()()(),t.TgZ(13,"div",11),t.YNc(14,c8,3,1,"div",12),t.YNc(15,u8,3,3,"ng-template",null,13,t.W1O),t.qZA()()()}if(2&n){const e=o.$implicit,i=t.MAs(4),a=t.MAs(16);t.xp6(3),t.s9C("matTooltip",e.name),t.Q6J("ngStyle",t.VKq(16,d8,e.id?"pointer":"default"))("isDisabledTooltip",!1)("matTooltipDisabled",i.isDisabled),t.xp6(2),t.hij(" ",t.lcZ(6,9,e.name)," "),t.xp6(2),t.Q6J("ngIf",!t.xi3(8,11,e,"classroom")),t.xp6(4),t.hij(" ",t.lcZ(12,14,"lang_auto_xem_tat_ca")," "),t.xp6(3),t.Q6J("ngIf",e.recommendExamObjs&&e.recommendExamObjs.length>0)("ngIfElse",a)}}let h8=(()=>{class n extends St.Q{goToClassroomDetailPage(e){e.id&&this.commonService.myNavigationWithQueryString("/admin/student/classroom-details/"+e.id+"/0","?backto="+encodeURIComponent(`/admin/testbank/document-management/1/${this.currentCategoryId}/${this.currentPage}`))}viewAllDocumentObjsOfClassroom(e){this.commonService.myNavigationWithQueryString("/admin/student/classroom-details/"+e.id+"/1","?backto="+encodeURIComponent(`/admin/testbank/document-management/1/${this.currentCategoryId}/${this.currentPage}`))}ngOnInit(){this.waitDestroy((0,dt.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.currentCategoryId=Number(this.commonService.getMyParam(this.activeRoute,"cat_id")),this.currentPage=Number(this.commonService.getMyParam(this.activeRoute,"page"))})),this.commonService.translateMetaData({title:"lang_testbank_document_list_header_title",description:"lang_testbank_document_list_header_description",image:"lang_cms_test_image"})}ngOnDestroy(){super.ngOnDestroy()}constructor(e){super(),this.activeRoute=e,this.classroomWithHomeworkObjs=[],this.currentCategoryId=0,this.currentPage=0}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(O.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-document-classroom-list"]],inputs:{classroomWithHomeworkObjs:"classroomWithHomeworkObjs"},features:[t.qOj],decls:3,vars:1,consts:[["id","contentent-view-2"],[1,"grid","grid-cols-12","gap-6"],["class","col-span-12 sm:col-span-6 lg:col-span-4 2xl:col-span-3",4,"ngFor","ngForOf"],[1,"col-span-12","sm:col-span-6","lg:col-span-4","2xl:col-span-3"],[1,"box",2,"height","100%"],[1,"flex","items-center","p-2","border-b","border-slate-200/60","dark:border-darkmode-400"],["azt-track-service","folder-and-classes-b2nw0JUA5LF",1,"font-medium","truncate","text-md",2,"max-width","40%",3,"ngStyle","matTooltip","isDisabledTooltip","matTooltipDisabled","click"],["c","isDisabled"],["class","ml-2 py-0.5 px-2 rounded-full text-xs bg-primary text-white cursor-pointer font-medium",4,"ngIf"],[1,"ml-auto"],["azt-track-service","folder-and-classes-jpGtWYvPZzj",1,"btn","btn-outline-primary","btn-transparent","p-2",3,"click"],[1,"p-3"],[4,"ngIf","ngIfElse"],["noDocumentData",""],[1,"ml-2","py-0.5","px-2","rounded-full","text-xs","bg-primary","text-white","cursor-pointer","font-medium"],[1,"grid","grid-cols-12","gap-3"],["class","col-span-12",4,"ngFor","ngForOf"],[1,"col-span-12"],["azt-track-service","folder-and-classes-M4tBKNEyrqt",3,"routerLink","queryParams"],[3,"dataObj","showByClass","viewType"],[1,"box","py-3","text-center"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,m8,17,18,"div",2),t.qZA()()),2&e&&(t.xp6(2),t.Q6J("ngForOf",i.classroomWithHomeworkObjs))},dependencies:[O.rH,D.sg,D.O5,D.PC,Mi.gM,L6,Jl.Q,jt.Jy,jt.JV,jt.NK],encapsulation:2}),n})();function p8(n,o){1&n&&t._UZ(0,"azt-loading-effect")}function _8(n,o){1&n&&t._UZ(0,"azt-loading-effect")}function f8(n,o){if(1&n&&t._UZ(0,"app-document-classroom-list",26),2&n){const e=t.oxw(2);t.Q6J("classroomWithHomeworkObjs",e.classroomWithHomeworkObjs)}}function g8(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",4)(1,"div",5)(2,"div",6)(3,"div",7)(4,"azt-search-box",8),t.NdJ("onSearch",function(a){t.CHM(e);const r=t.oxw();return t.KtG(r.searchClassroom(a.searchObj))}),t.ALo(5,"mytranslate"),t.qZA()(),t.TgZ(6,"div",9),t._UZ(7,"div",10),t.TgZ(8,"div",11)(9,"button",12),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.redirectToCreateHomeworkPage(a.currentCategoryId))}),t.O4$(),t.TgZ(10,"svg",13),t._UZ(11,"line",14)(12,"line",15),t.qZA(),t._uU(13),t.ALo(14,"mytranslate"),t.qZA()()()(),t.kcU(),t._UZ(15,"app-document-recommend-list",16),t.TgZ(16,"div",17)(17,"h3",18),t._uU(18),t.ALo(19,"mytranslate"),t.qZA(),t.YNc(20,_8,1,0,"azt-loading-effect",2),t.YNc(21,f8,1,1,"ng-template",null,19,t.W1O),t.qZA(),t.TgZ(23,"div",20)(24,"div",21)(25,"azt-paging",22),t.NdJ("goToPaginationPage",function(a){t.CHM(e);const r=t.oxw();return t.KtG(r.goToPage(a))}),t.qZA()(),t.TgZ(26,"div",23)(27,"p",24),t._uU(28),t.ALo(29,"number"),t.ALo(30,"mytranslate"),t.qZA()(),t.TgZ(31,"div",25)(32,"p",24),t._uU(33),t.ALo(34,"number"),t.ALo(35,"mytranslate"),t.qZA()()()()()}if(2&n){const e=t.MAs(22),i=t.oxw();t.xp6(4),t.Q6J("isServerSearch",!0)("placeholder",t.lcZ(5,11,"lang_testbank_test_list_search_class"))("searchContentObj",i.searchContentObj),t.xp6(9),t.hij(" ",t.lcZ(14,13,"lang_auto_tao_bai_tap")," "),t.xp6(2),t.Q6J("type","homework"),t.xp6(3),t.Oqu(t.lcZ(19,15,"lang_auto_tat_ca")),t.xp6(2),t.Q6J("ngIf",i.searchContentObj.isLoading)("ngIfElse",e),t.xp6(5),t.Q6J("pageObj",i.pageObj),t.xp6(3),t.Oqu(t.lcZ(29,17,i.totalExam)+" "+t.lcZ(30,19,"lang_testbank_test_list_classes")),t.xp6(5),t.Oqu(t.lcZ(34,21,i.totalExam)+" "+t.lcZ(35,23,"lang_testbank_test_list_classes"))}}let x8=(()=>{class n extends St.Q{convertHomeworkObjs(e){var i=[];return e.forEach(a=>{i.length<this.maxItemToShow&&a.homework&&i.push({id:a.homework.id,hashId:a.homework.hashId,classroomId:a.homework.classroomId,name:a.homework.name,type:"homework",createdAt:a.homework.createdAt,deadline:a.homework.deadline,submitted:a.homework.count,total:a.homework.totalStudent,homework:a.homework})}),i}parseHomeworkObjs(e){var i=[];return e.forEach(a=>{a.recommendExamObjs=this.convertHomeworkObjs(a.documentObjs??[]),i.push(a)}),i}goToPage(e){this.backToData?this.commonService.myNavigationWithQueryString("/admin/testbank/document-management/1/"+this.currentCategoryId+"/"+e,"?data="+this.commonService.serializeJson(this.backToData)):this.commonService.myNavigation("/admin/testbank/document-management/1/"+this.currentCategoryId+"/"+e)}redirectToCreateHomeworkPage(e){let i=`/admin/testbank/document-management/1/${this.currentCategoryId}/${this.pageObj.page}`+(this.backToData?.shareType?"?data="+this.commonService.serializeJson({shareType:this.backToData?.shareType}):"");this.commonService.myNavigationWithQueryString("/admin/homework/add-new-homework/"+(e??0),"?backto="+encodeURIComponent(i))}getClassroomWithWithHomeworkObjs(){let e=Number(this.commonService.getMyParam(this.activeRoute,"page"));this.pageObj.setPageNumber(e),this.searchContentObj.searchContent?this.searchContentObj.isLoading=!0:this.initStatusObj(),this.documentService.apiDocumentsClassroomsGet(void 0,"homework",this.searchContentObj.searchContent?this.searchContentObj.searchContent:void 0,this.pageObj.page,this.pageObj.pageSize,2).subscribe(i=>{i&&1==i.success?(this.classroomWithHomeworkObjs=this.parseHomeworkObjs(i.data?.classrooms??[]),this.totalExam=i.data?.total??0,this.pageObj.setTotalPages(this.totalExam),this.successStatusObj(),this.searchContentObj.setLoading(!1)):(this.errorStatusObj(i.message??"",!0),this.searchContentObj.setLoading(!1))})}searchClassroom(e){this.searchContentObj=e,this.pageObj.setPageNumber(1),this.searchContentObj.setLoading(!0),this.documentService.apiDocumentsClassroomsGet(void 0,"homework",this.searchContentObj.searchContent,this.pageObj.page,this.pageObj.pageSize,2).subscribe(i=>{i&&1==i.success?(this.classroomWithHomeworkObjs=this.parseHomeworkObjs(i.data?.classrooms??[]),this.totalExam=i.data?.total??0,this.pageObj.setTotalPages(this.totalExam),this.successStatusObj(),this.searchContentObj.setLoading(!1)):(this.errorStatusObj(i.message??"",!0),this.searchContentObj.setLoading(!1))})}ngOnInit(){this.waitDestroy((0,dt.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.currentCategoryId=Number(this.commonService.getMyParam(this.activeRoute,"cat_id")),this.pageObj.setPageNumber(Number(this.commonService.getMyParam(this.activeRoute,"page"))),this.backToData=this.commonService.myParseJson(this.commonService.getMyQueryParam("data")??""),this.backToLink=this.commonService.serializeJson({shareType:this.backToData?.shareType,backTo:this.backToData?.backTo??(null!=this.currentCategoryId&&0!=this.currentCategoryId?"/admin/testbank/document-management/1/0/1":"/admin/dashboard")}),this.mobileWebviewService.sendSimpleMessage("OPEN_HOMEWORK"),this.getClassroomWithWithHomeworkObjs()})),this.waitDestroy(this.router.events.subscribe(e=>{e instanceof O.m2&&(this.currentCategoryId=Number(this.commonService.getMyParam(this.activeRoute,"cat_id")),this.pageObj.setPageNumber(Number(this.commonService.getMyParam(this.activeRoute,"page"))),this.backToData=this.commonService.myParseJson(this.commonService.getMyQueryParam("data")??""),this.backToLink=this.commonService.serializeJson({shareType:this.backToData?.shareType,backTo:this.backToData?.backTo??(null!=this.currentCategoryId&&0!=this.currentCategoryId?"/admin/testbank/document-management/1/0/1":"/admin/dashboard")}),this.getClassroomWithWithHomeworkObjs())})),this.commonService.translateMetaData({title:"lang_testbank_document_list_header_title",description:"lang_testbank_document_list_header_description",image:"lang_cms_test_image"}),super.ngOnInit()}ngOnDestroy(){super.ngOnDestroy()}constructor(e,i,a,r){super(),this.activeRoute=e,this.documentService=i,this.router=a,this.mobileWebviewService=r,this.maxItemToShow=2,this.classroomWithHomeworkObjs=[],this.totalExam=0,this.currentCategoryId=0,this.backToLink="",this.searchContentObj=new U0.h,this.pageObj=new Ry.m(24)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(O.gz),t.Y36(Ke.Zg),t.Y36(O.F0),t.Y36(B0.r))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-document-homework-list"]],features:[t.qOj],decls:5,vars:3,consts:[[3,"headerBackToLink"],[1,"container-fluid","mt-5","overflow-hidden",3,"contextmenu"],[4,"ngIf","ngIfElse"],["doneLoading",""],[1,"grid","grid-cols-12","gap-6"],[1,"col-span-12","lg:col-span-12","2xl:col-span-12"],[1,"flex","flex-col-reverse","sm:flex-row","items-center"],[1,"w-full","sm:w-auto","mr-auto","mt-3","sm:mt-0"],[3,"isServerSearch","placeholder","searchContentObj","onSearch"],[1,"w-full","sm:w-auto","grid","grid-cols-12","gap-2"],[1,"col-span-12","md:col-span-8"],[1,"col-span-12","md:col-span-4"],["azt-track-service","document-management-pW981emsf6c",1,"btn","btn-success","text-white","shadow-md","w-full",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-6","mr-2"],["x1","12","y1","5","x2","12","y2","19"],["x1","5","y1","12","x2","19","y2","12"],[3,"type"],[1,"azt-view-classroom","mt-5",2,"min-height","calc(100vh - 250px)"],[1,"mb-5","text-lg","font-medium"],["doneLoadingSearch",""],[1,"azt-document-footer","flex","items-center","flex-col-reverse","sm:flex-row","mt-3"],[1,"mr-0","sm:mr-auto","mt-2"],[3,"pageObj","goToPaginationPage"],[1,"text-right","mt-2","azt-hidden","md:block"],[1,"text-md"],[1,"ml-auto","text-right","-mt-2","block","md:hidden"],[3,"classroomWithHomeworkObjs"]],template:function(e,i){if(1&e&&(t.TgZ(0,"teacher-layout",0)(1,"div",1),t.NdJ("contextmenu",function(){return!1}),t.YNc(2,p8,1,0,"azt-loading-effect",2),t.YNc(3,g8,36,25,"ng-template",null,3,t.W1O),t.qZA()()),2&e){const a=t.MAs(4);t.Q6J("headerBackToLink",i.backToLink),t.xp6(2),t.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a)}},dependencies:[D.O5,si.l,Uy.L,Yf.W,fo._,h8,Z6,D.JJ,jt.JV],encapsulation:2}),n})();var Sd=M(45337);function b8(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",27)(1,"div",28)(2,"input",29),t.NdJ("change",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onChangeClassroomOption())}),t.qZA(),t.TgZ(3,"label",30),t.ALo(4,"mytranslate"),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()()()}if(2&n){const e=o.$implicit;t.xp6(1),t.Q6J("formGroup",e),t.xp6(1),t.MGl("id","select-classroom-export_excel__",e.controls.id.value,""),t.xp6(1),t.MGl("for","select-classroom-export_excel__",e.controls.id.value,""),t.Q6J("matTooltip",t.lcZ(4,5,e.controls.name.value)),t.xp6(2),t.Oqu(t.lcZ(6,7,e.controls.name.value))}}function v8(n,o){1&n&&(t.TgZ(0,"span",31),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij("* ",t.lcZ(2,1,"lang_testbank_excel_select_at_least_classroom_to_export_excel"),""))}function y8(n,o){1&n&&(t.TgZ(0,"div")(1,"div",12)(2,"span",31),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()()()),2&n&&(t.xp6(3),t.hij("* ",t.lcZ(4,1,"lang_testbank_excel_select_no_classroom_export"),""))}let w8=(()=>{class n extends lo.e{confirmAction(){let e=[];this.form.controls.listClassroom.controls.forEach(a=>{const r=a.controls.id;a.controls.choose.value&&!this.commonService.isExistInArray(e,r.value)&&e.push(r.value)}),e.length?this.dialogRef.close(e):this.dialogRef.close()}setChangeSelectAll(){const e=this.form.controls.selectAll;if(e){e.setValue(!e.value);const i=this.form.controls.listClassroom;i&&(i.controls.forEach(a=>{a.controls.choose.setValue(e.value)}),this.countClassroomSelect++),e.value||(this.countClassroomSelect=0)}}onChangeClassroomOption(){const e=this.form.controls.listClassroom;let i=!0,a=0;e&&e.controls.forEach(s=>{!1===s.controls.choose.value?i=!1:a++});const r=this.form.controls.selectAll;r&&r.setValue(i),this.countClassroomSelect=a}setupArrayClassroom(){const e=this.form.controls.listClassroom;e&&e.clear(),this.data.classroomDataObjs.forEach(i=>{let a=i.classObj;if(a){let r=new f.cw({id:new f.NI(a.id,{nonNullable:!0}),name:new f.NI(a.name,{nonNullable:!0}),choose:new f.NI(!1,{nonNullable:!0})});e.push(r)}})}checkTypeTable(){return"lastTime"==this.data.exportType?"lang_auto_last_time":"firstTime"==this.data.exportType?"lang_auto_first_time":"highest"==this.data.exportType?"lang_auto_highest":"allTime"==this.data.exportType?"lang_auto_allTime":"lang_auto_last_time"}ngOnInit(){super.ngOnInit(),this.data.classroomDataObjs.length>0&&this.setupArrayClassroom(),this.exportTitle=this.checkTypeTable()}constructor(e,i){super(e,i),this.data=e,this.dialogRef=i,this.countClassroomSelect=0,this.exportTitle="",this.form=new f.cw({listClassroom:new f.Oe([]),selectAll:new f.NI(!1,{nonNullable:!0})})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36($.WI),t.Y36($.so,8))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-select-classroom-export-excel"]],features:[t.qOj],decls:39,vars:26,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"box-header","bg-slate-100","dark:bg-darkmode-400"],[1,"header-left"],[1,"header-right"],["azt-track-service","select-student-export-sMT2Np4C_Vf",1,"btn","btn-transparent","btn-outline-danger","btn-sm",3,"mat-dialog-close"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide"],["x1","18","y1","6","x2","6","y2","18"],["x1","6","y1","6","x2","18","y2","18"],[1,"box-content"],[3,"formGroup","hidden"],[3,"hidden"],[1,"col-span-12","mt-2","px-3"],[1,"font-medium","flex","items-center"],[1,"col-span-12","mt-2","mb-2","px-3","pt-0"],[1,"form-check","mr-10"],["id","select-all-students","type","checkbox",1,"form-check-input",3,"checked","change"],["for","select-all-students",1,"form-check-label"],[1,"box-students"],["pointerEventsMethod","scrollbar",2,"width","100%","height","100%",3,"visibility"],[1,"grid","grid-cols-12","p-3",2,"align-items","center"],["class","col-span-12 md:col-span-4 mt-2","formArrayName","listClassroom",4,"ngFor","ngForOf"],["class","err-color",4,"ngIf"],[4,"ngIf"],[1,"p-3","text-right"],["azt-track-service","select-student-export-H_SWYi6hbiY",1,"btn","w-24","btn-secondary","mr-3",3,"mat-dialog-close"],["azt-track-service","select-student-export-FAs4GdQImfT",1,"btn","w-24","btn-primary",3,"disabled","click"],["formArrayName","listClassroom",1,"col-span-12","md:col-span-4","mt-2"],[1,"form-check","mr-10",3,"formGroup"],["formControlName","choose","type","checkbox",1,"form-check-input",3,"id","change"],[1,"form-check-label","truncate",3,"matTooltip","for"],[1,"err-color"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),t._uU(4),t.ALo(5,"mytranslate"),t.ALo(6,"mytranslate"),t.qZA(),t.TgZ(7,"div",4)(8,"a",5),t.O4$(),t.TgZ(9,"svg",6),t._UZ(10,"line",7)(11,"line",8),t.qZA()()()(),t.kcU(),t.TgZ(12,"div",9)(13,"form",10)(14,"div",11)(15,"div",12)(16,"div",13),t._uU(17),t.ALo(18,"mytranslate"),t.qZA()(),t.TgZ(19,"div",14)(20,"div",15)(21,"input",16),t.NdJ("change",function(){return i.setChangeSelectAll()}),t.qZA(),t.TgZ(22,"label",17),t._uU(23),t.ALo(24,"mytranslate"),t.qZA()()(),t.TgZ(25,"div",18)(26,"ng-scrollbar",19)(27,"div",20),t.YNc(28,b8,7,9,"div",21),t.qZA()()(),t.TgZ(29,"div",12),t.YNc(30,v8,3,3,"span",22),t.qZA()()(),t.YNc(31,y8,5,3,"div",23),t.qZA(),t.TgZ(32,"div",24)(33,"a",25),t._uU(34),t.ALo(35,"mytranslate"),t.qZA(),t.TgZ(36,"button",26),t.NdJ("click",function(){return i.confirmAction()}),t._uU(37),t.ALo(38,"mytranslate"),t.qZA()()()()),2&e&&(t.xp6(4),t.Oqu(t.lcZ(5,14,"lang_testbank_excel_select_classroom_export")+t.lcZ(6,16,i.exportTitle)),t.xp6(9),t.Q6J("formGroup",i.form)("hidden",0===i.data.classroomDataObjs.length),t.xp6(1),t.Q6J("hidden",0===i.form.controls.listClassroom.controls.length),t.xp6(3),t.hij("",t.lcZ(18,18,"lang_testbank_excel_select_classroom_to_export_excel"),":"),t.xp6(4),t.Q6J("checked",i.form.controls.selectAll.value),t.xp6(2),t.Oqu(t.lcZ(24,20,i.form.controls.selectAll.value?"lang_auto_bo_chon_tat_ca":"lang_auto_chon_tat_ca")),t.xp6(3),t.Q6J("visibility","hover"),t.xp6(2),t.Q6J("ngForOf",i.form.controls.listClassroom.controls),t.xp6(2),t.Q6J("ngIf",0===i.countClassroomSelect),t.xp6(1),t.Q6J("ngIf",0===i.data.classroomDataObjs.length),t.xp6(3),t.hij(" ",t.lcZ(35,22,"lang_cms_common_close_btn")," "),t.xp6(2),t.Q6J("disabled",!i.countClassroomSelect),t.xp6(1),t.hij(" ",t.lcZ(38,24,"lang_cms_common_confirm_btn")," "))},dependencies:[D.sg,D.O5,$.ZT,Mi.gM,L.KC,f._Y,f.Wl,f.JJ,f.JL,f.sg,f.u,f.CE,oo.M,jt.JV],styles:[".box[_ngcontent-%COMP%]{max-width:800px}.box-content[_ngcontent-%COMP%]{padding:10px}.box-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px 20px;border-radius:.375rem}.err-color[_ngcontent-%COMP%]{color:#f44336;font-size:small;font-weight:500}.note-color[_ngcontent-%COMP%]{font-size:small;font-weight:500}.truncate[_ngcontent-%COMP%]{display:inline-block;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;max-width:150px}.more-info-color[_ngcontent-%COMP%]{color:rgb(var(--color-primary));cursor:pointer}.text-only-class[_ngcontent-%COMP%]{color:#546e7a;margin-left:5px;font-weight:400}.box-students[_ngcontent-%COMP%]{height:15vh;overflow:hidden}.box-classrooms[_ngcontent-%COMP%]{height:10vh;overflow:hidden}.box-min-classrooms[_ngcontent-%COMP%]{height:45px}.box-max-classrooms[_ngcontent-%COMP%]{height:15vh;overflow:hidden}"]}),n})();var Kf=M(88131);let Hy=(()=>{class n{constructor(e){this.browserStorageService=e,this.global_data_filter={}}getCustomFilter(e,i){let a="";switch(e){case"exam":a="saveFilterExam_"+i;break;case"homework":a="saveFilterHomework_"+i}return this.global_data_filter[a]}setCustomFilter(e,i,a){let r="";switch(i){case"exam":r="saveFilterExam_"+a,this.global_data_filter[r]="",e.isMarked&&(this.global_data_filter[r]+="isMarked "),e.isNotMarked&&(this.global_data_filter[r]+="isNotMarked "),e.isOnTest&&(this.global_data_filter[r]+="isOnTest "),e.isNotTested&&(this.global_data_filter[r]+="isNotTested ");break;case"homework":r="saveFilterHomework_"+a,this.global_data_filter[r]="",e.isMarked&&(this.global_data_filter[r]+="isMarked "),e.isSubmitted&&(this.global_data_filter[r]+="isSubmitted "),e.isNotSubmit&&(this.global_data_filter[r]+="isNotSubmit "),e.mustReSubmit&&(this.global_data_filter[r]+="mustReSubmit ")}}removeCustomFilter(e,i){let a="";switch(e){case"exam":a="saveFilterExam_"+i,this.global_data_filter[a]="";break;case"homework":a="saveFilterHomework_"+i,this.global_data_filter[a]=""}}getStatusSideNav(e){return this.browserStorageService.getSimpleStorage("statusSideNav_"+e)??""}removeStatusSideNav(e){this.browserStorageService.removeSimpleStorage("statusSideNav_"+e)}saveStatusSideNav(e,i){this.browserStorageService.saveSimpleStorage("statusSideNav_"+e,i?"open":"close")}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(No.n))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Wf=M(7289),Gy=M(88632);let C8=(()=>{class n{constructor(e,i,a,r,s,l){this.commonService=e,this.examPageResultService=i,this.permissionService=a,this.globalService=r,this.browserStorageService=s,this.gzipHelper=l}getTestedUserObjs(e,i,a){return this.globalService.startIntervalFunc(e),this.getTestedOfExamResult(e,i,"default",a)}getTestedOfExamResult(e,i,a,r){return new it.y(s=>{let l="tested_list_result_v2_"+i,c=this.browserStorageService.getSimpleStorage(l)??"",d=this.gzipHelper.resultContentSupport(c),h=d&&this.commonService.willDeleteParseJson(d)?this.commonService.willDeleteParseJson(d):void 0;r&&h?(s.next({status:200,success:1,data:h,message:"successful"}),s.complete()):this.examPageResultService.apiExamPageResultGetObjV3Get(i).subscribe(_=>{if(1==_.success){let b=_.data?.examObj,T=_.data?.classrooms??[],P=_.data?.totalAttended??0,U=_.data?.examCreatorObj,q=_.data?.offlineExamObj,B=_.data?.hasEssayQuestion,W=_.data?.offlineMixQuestionObjs,G=_.data?.canResetStudentCode,nt=_.data?.hasCreateStudentCode,At=_.data?.examStudentObjs,ut=_.data?.fileTypeStr??"";if(this.permissionService.hasViewExamPermission("exam",b)||this.permissionService.hasConfigAndMarkClassroomPermission("exam",b)){let et=[];if(T.length>0)for(let Nt=0;Nt<T.length;Nt++){let ot={id:T[Nt].id,name:T[Nt].name??"lang_auto_tu_do",totalTested:T[Nt].totalTested,countStudents:T[Nt].totalRegister??0,countSubmitted:T[Nt].totalTested},_t=[];(-1!=ot.id||-1==ot.id&&(ot.countStudents||ot.totalTested))&&et.push({classObj:{...ot,teacherId:0,showAddStudent:0,grade:0},results:_t})}let vt={studentsInClassResults:et.length>0?et:[],studentsNotInClassResults:[],totalAttended:P,totalUsers:0,examCreatorObj:U,offlineMixQuestionObjs:W,examObj:b,examStudents:At,hasEssayQuestion:B,offlineExamObj:q,canResetStudentCode:G,hasCreateStudentCode:nt,fileTypeStr:ut,errorConfigClassroomPermission:_.data?.errorConfigClassroomPermission,errorMessage:_.data?.errorMessage};if("export_tool"!=e){(this.browserStorageService.getSizeOfStorageByKey("tested_list_result_v2")>2||this.browserStorageService.getSizeOfStorage()>4.5)&&this.browserStorageService.removeSimpleStorageByKey("tested_list_result_v2");let Nt=this.gzipHelper.zipBigContent(JSON.stringify(vt));this.browserStorageService.saveSimpleStorage(l,Nt)}s.next({status:200,success:1,data:vt,message:"successful"}),s.complete()}else s.next({status:200,success:1,data:{studentsInClassResults:[],studentsNotInClassResults:[],totalAttended:P,totalUsers:0,examCreatorObj:U,offlineMixQuestionObjs:W,examObj:b,examStudents:At,hasEssayQuestion:B,offlineExamObj:q,canResetStudentCode:G,hasCreateStudentCode:nt,fileTypeStr:_.data?.fileTypeStr,errorConfigClassroomPermission:_.data?.errorConfigClassroomPermission,errorMessage:_.data?.errorMessage,maxGroupId:0},message:"successful"}),s.complete()}else s.next({status:_.code,success:0,data:null,message:_.message??""}),s.complete()})})}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(mi.z),t.LFG(Ke.DR),t.LFG(S.j),t.LFG(Wf.q),t.LFG(No.n),t.LFG(Gy.n))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var D6=M(67517),j6=M(59024),G0=M(67428);let $y=(()=>{class n{getDefaultFilterObj(){var e=this._getInitFilterObj(),i=this.commonService.castJsonToObj(this.browserStorageService.getSimpleStorage(this.localStorageSlug)??"");return i&&(e=i),e}clearFilter(){return this.filterObj=this._getInitFilterObj(),this.saveFilterObj(),this.filterObj}saveFilterObj(){this.browserStorageService.saveSimpleStorage(this.localStorageSlug,this.commonService.serializeJson(this.filterObj)),this.totalCustomFilter=this._countChecked(this.filterObj)}_countChecked(e){var i=0;for(var a in e)!0===e[a]&&(i+=1);return i}_getInitFilterObj(){return{isMarked:!1,isNotMarked:!1,isOnTest:!1,isNotSubmit:!1,isNotTested:!1}}constructor(e,i){this.commonService=e,this.browserStorageService=i,this.totalCustomFilter=0,this.localStorageSlug="testbank_exam_result_filter_v2",this.filterObj=this.getDefaultFilterObj(),this.totalCustomFilter=this._countChecked(this.filterObj)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(mi.z),t.LFG(No.n))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var T8=M(4779),dl=M(32651);function k8(n,o){if(1&n&&(t.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"span",5),t._UZ(4,"azt-loading-ui"),t.qZA()(),t.TgZ(5,"div",6),t._UZ(6,"div",7),t.qZA()()()),2&n){const e=t.oxw();t.xp6(6),t.Q6J("innerHTML",e.msg,t.oJD)}}let $0=(()=>{class n extends St.Q{constructor(e){super(),this.commonService=e,this.show=!1,this.msg=""}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(mi.z))},n.\u0275cmp=t.Xpm({type:n,selectors:[["azt-export-docx-loading-box"]],inputs:{show:"show",msg:"msg",percent:"percent"},features:[t.qOj],decls:2,vars:1,consts:[[1,"export-docx-frame"],["class","loading-box",4,"ngIf"],[1,"loading-box"],[1,"loading-box-wrapper"],[2,"margin-bottom","10px"],[1,"w-4","h-4","inline-block"],[1,"loading-box-lines"],[1,"loading-box-lines-content",3,"innerHTML"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.YNc(1,k8,7,1,"div",1),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf",i.show))},dependencies:[D.O5,oi.n],styles:[".export-docx-frame[_ngcontent-%COMP%]   .loading-box[_ngcontent-%COMP%]{width:100vw;height:100vh;position:fixed;z-index:9999;top:0;left:0;display:flex;justify-content:center;background-color:#000c}.export-docx-frame[_ngcontent-%COMP%]   .loading-box[_ngcontent-%COMP%]   .loading-box-wrapper[_ngcontent-%COMP%]{margin-top:100px;text-align:center;color:#fafafa;font-weight:400}.export-docx-frame[_ngcontent-%COMP%]   .loading-box[_ngcontent-%COMP%]   .loading-box-lines[_ngcontent-%COMP%]{font-size:20px;margin-top:10px;background-color:#fafafa;color:#000;height:-moz-fit-content;height:fit-content;width:500px;border-radius:5px}@media screen and (max-width: 520px){.export-docx-frame[_ngcontent-%COMP%]   .loading-box[_ngcontent-%COMP%]   .loading-box-wrapper[_ngcontent-%COMP%]{padding:10px}.export-docx-frame[_ngcontent-%COMP%]   .loading-box[_ngcontent-%COMP%]   .loading-box-lines[_ngcontent-%COMP%]{width:100%}}.export-docx-frame[_ngcontent-%COMP%]   .loading-box[_ngcontent-%COMP%]   .loading-box-lines-content[_ngcontent-%COMP%]{padding:20px}  .export-docx-frame .loading-box .loading-box-lines p{padding-top:10px}  .export-docx-frame .loading-box .loading-box-lines p:first-child{padding-top:0}"]}),n})();var Yy=M(38228);const A8=["TABLE"];function S8(n,o){if(1&n&&(t.TgZ(0,"th",6),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n){const e=t.oxw();t.uIk("excelWidth",15)("excelRow",5)("excelColumn",15)("excelStyle",e.styleThNormal),t.xp6(1),t.Oqu(t.lcZ(2,5,"lang_testbank_tested_list_essay_score"))}}function O8(n,o){if(1&n&&(t.TgZ(0,"th",6),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n){const e=o.index,i=t.oxw(2);t.uIk("excelWidth",15)("excelRow",5)("excelColumn",(i.hasEssayQuestion?17:16)+e)("excelStyle",i.styleThNormal),t.xp6(1),t.Oqu(t.lcZ(2,5,"lang_combine_exam_component")+(e+1))}}function E8(n,o){if(1&n&&(t.ynx(0),t.YNc(1,O8,3,7,"th",9),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.createFakeArr(3))}}function M8(n,o){if(1&n&&(t.TgZ(0,"th",6),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n){const e=o.$implicit,i=o.index,a=t.oxw(2);t.uIk("excelWidth",10)("excelRow",5)("excelColumn",(a.hasEssayQuestion?17:16)+(a.examObj.subjectMarks?3:0)+i)("excelStyle",a.styleThNormal),t.xp6(1),t.AsE("",t.lcZ(2,6,"lang_testbank_test_config_group"),"\xa0",e<9?"0"+(e+1):e+1,"")}}function I8(n,o){if(1&n&&(t.ynx(0),t.YNc(1,M8,3,8,"th",9),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.createFakeArr(e.maxGroupQuestion))}}function L8(n,o){if(1&n&&(t.TgZ(0,"th",6),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n){const e=o.index,i=t.oxw();let a;t.uIk("excelWidth",8)("excelRow",5)("excelColumn",i.getCurrentColumnIndexForExcel(1)+(e+2))("excelStyle",i.styleThNormal),t.xp6(1),t.AsE("",t.lcZ(2,6,"lang_testbank_tested_list_question"),"\xa0",e+(null!==(a=i.examObj.startQuestionIndex)&&void 0!==a?a:0)<9?"0"+(e+(null!==(a=i.examObj.startQuestionIndex)&&void 0!==a?a:1)):e+(null!==(a=i.examObj.startQuestionIndex)&&void 0!==a?a:1),"")}}function P8(n,o){if(1&n&&(t.TgZ(0,"td",13),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;let i;t.xp6(1),t.Oqu(e.countEssayQuestion&&e.countEssayQuestion>0?(null!==(i=e.totalQuestion)&&void 0!==i?i:0)-(null!==(i=e.rightAnswer)&&void 0!==i?i:0)-e.countEssayQuestion:(null!==(i=e.totalQuestion)&&void 0!==i?i:0)-(null!==(i=e.rightAnswer)&&void 0!==i?i:0))}}function N8(n,o){1&n&&(t.TgZ(0,"td",13),t._uU(1,"0"),t.qZA())}function Z8(n,o){if(1&n&&(t.TgZ(0,"td",13),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n){const e=t.oxw().$implicit,i=t.oxw(2);t.xp6(1),t.Oqu(null!=e.essayMark?e.essayMark:t.lcZ(2,1,i.checkStatusStudent(e)))}}function D8(n,o){if(1&n&&(t.TgZ(0,"th",13),t._uU(1),t.qZA()),2&n){const e=o.index,i=t.oxw(3).$implicit;t.xp6(1),t.hij(" ",null!=(null==i.subjectMarkValues?null:i.subjectMarkValues[e])?null==i.subjectMarkValues?null:i.subjectMarkValues[e]:""," ")}}function j8(n,o){if(1&n&&(t.ynx(0),t.YNc(1,D8,2,1,"th",15),t.BQk()),2&n){const e=t.oxw(4);t.xp6(1),t.Q6J("ngForOf",e.createFakeArr(3))}}function q8(n,o){1&n&&(t.TgZ(0,"th",13),t._uU(1),t.qZA()),2&n&&(t.xp6(1),t.Oqu(""))}function F8(n,o){if(1&n&&t.YNc(0,q8,2,1,"th",15),2&n){const e=t.oxw(4);t.Q6J("ngForOf",e.createFakeArr(3))}}function Q8(n,o){if(1&n&&(t.ynx(0),t.YNc(1,j8,2,1,"ng-container",16),t.YNc(2,F8,1,1,"ng-template",null,17,t.W1O),t.BQk()),2&n){const e=t.MAs(3),i=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",null==i.subjectMarkValues?null:i.subjectMarkValues.length)("ngIfElse",e)}}function R8(n,o){if(1&n&&(t.TgZ(0,"th",13),t._uU(1),t.ALo(2,"number"),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,e.point,"1.2-2"))}}function U8(n,o){1&n&&(t.TgZ(0,"th",13),t._uU(1),t.qZA()),2&n&&(t.xp6(1),t.Oqu(""))}function B8(n,o){if(1&n&&(t.ynx(0),t.YNc(1,U8,2,1,"th",15),t.BQk()),2&n){const e=t.oxw(3).$implicit,i=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",i.createFakeArr(i.maxGroupQuestion-e.groupPoints.length))}}function z8(n,o){if(1&n&&(t.ynx(0),t.YNc(1,R8,3,4,"th",15),t.YNc(2,B8,2,1,"ng-container",8),t.BQk()),2&n){const e=t.oxw(2).$implicit,i=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.groupPoints),t.xp6(1),t.Q6J("ngIf",e.groupPoints.length<i.maxGroupQuestion)}}function J8(n,o){1&n&&t._UZ(0,"th",13)}function H8(n,o){if(1&n&&t.YNc(0,J8,1,0,"th",15),2&n){const e=t.oxw(4);t.Q6J("ngForOf",e.createFakeArr(e.maxGroupQuestion))}}function G8(n,o){if(1&n&&(t.ynx(0),t.YNc(1,z8,3,2,"ng-container",16),t.YNc(2,H8,1,1,"ng-template",null,18,t.W1O),t.BQk()),2&n){const e=t.MAs(3),i=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",i.groupPoints&&i.groupPoints.length>0)("ngIfElse",e)}}function $8(n,o){if(1&n&&(t.TgZ(0,"td",13),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Oqu(e)}}function Y8(n,o){if(1&n&&(t.TgZ(0,"td",13),t._uU(1),t.qZA(),t.TgZ(2,"td",13),t._uU(3),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Oqu(e.key),t.xp6(2),t.Oqu(e.value)}}function K8(n,o){if(1&n&&(t.TgZ(0,"tr")(1,"td",12),t._uU(2),t.qZA(),t.TgZ(3,"td",13),t._uU(4),t.qZA(),t.TgZ(5,"td",13),t._uU(6),t.ALo(7,"formatOnlyDateByUserUnitPipe"),t.qZA(),t.TgZ(8,"td",13),t._uU(9),t.ALo(10,"mytranslate"),t.ALo(11,"mytranslate"),t.qZA(),t.TgZ(12,"td",13),t._uU(13),t.ALo(14,"formatStudentCodeToNumber"),t.qZA(),t.TgZ(15,"td",13),t._uU(16),t.ALo(17,"formatOfflineExamHashIdToNumber"),t.qZA(),t.TgZ(18,"td",13),t._uU(19),t.qZA(),t.TgZ(20,"td",13),t._uU(21),t.qZA(),t.TgZ(22,"td",13),t._uU(23),t.ALo(24,"formatFullDateTimeByUserUnitPipe"),t.qZA(),t.TgZ(25,"td",13),t._uU(26),t.ALo(27,"formatFullDateTimeByUserUnitPipe"),t.qZA(),t.TgZ(28,"td",13),t._uU(29),t.qZA(),t.TgZ(30,"td",13),t._uU(31),t.qZA(),t.TgZ(32,"td",13),t._uU(33),t.qZA(),t.YNc(34,P8,2,1,"td",14),t.YNc(35,N8,2,0,"td",14),t.TgZ(36,"td",13),t._uU(37),t.ALo(38,"mytranslate"),t.qZA(),t.YNc(39,Z8,3,3,"td",14),t.TgZ(40,"td",13),t._uU(41),t.qZA(),t.YNc(42,Q8,4,2,"ng-container",8),t.YNc(43,G8,4,2,"ng-container",8),t.TgZ(44,"td",13),t._uU(45),t.qZA(),t.TgZ(46,"td",13),t._uU(47),t.qZA(),t.YNc(48,$8,2,1,"td",15),t.YNc(49,Y8,4,2,"ng-template",10),t.qZA()),2&n){const e=o.$implicit,i=t.oxw().$implicit,a=t.oxw();let r,s,l,c;t.xp6(2),t.Oqu(e.fullName),t.xp6(2),t.Oqu(null==i.classObj?null:i.classObj.name),t.xp6(2),t.Oqu(t.lcZ(7,24,e.birthday)),t.xp6(3),t.Oqu(0==e.gender?t.lcZ(10,26,"lang_gender_female"):1==e.gender?t.lcZ(11,28,"lang_gender_male"):""),t.xp6(4),t.Oqu(e.identificationNumber?t.xi3(14,30,e.identificationNumber,6):""),t.xp6(3),t.Oqu(e.offlineMixQuestionHashId?t.xi3(17,33,e.offlineMixQuestionHashId,3):""),t.xp6(3),t.Oqu(e.testedTime),t.xp6(2),t.Oqu(e.totalTestTime?e.totalTestTime:e.totalExamResultObjs),t.xp6(2),t.Oqu(t.lcZ(24,36,null!==(r=e.startedTest)&&void 0!==r?r:"")),t.xp6(3),t.Oqu(t.lcZ(27,38,null!==(s=e.createdAt)&&void 0!==s?s:"")),t.xp6(3),t.Oqu(null==e.startedTest?"":a.calculationTime(e.startedTest,null!==(l=e.createdAt)&&void 0!==l?l:"")),t.xp6(2),t.Oqu(null==e.startedTest?"":a.calculationTimeOnlyMinutes(e.startedTest,null!==(c=e.createdAt)&&void 0!==c?c:"")),t.xp6(2),t.Oqu(e.rightAnswer),t.xp6(1),t.Q6J("ngIf",!e.isNotTested&&!e.isOnTest),t.xp6(1),t.Q6J("ngIf",e.isNotTested||e.isOnTest),t.xp6(2),t.Oqu(null!=e.trueFalseMark?e.trueFalseMark:t.lcZ(38,40,a.checkStatusStudent(e))),t.xp6(2),t.Q6J("ngIf",a.hasEssayQuestion),t.xp6(2),t.Oqu(e.mark),t.xp6(1),t.Q6J("ngIf",a.examObj.subjectMarks),t.xp6(1),t.Q6J("ngIf",a.maxGroupQuestion>0),t.xp6(2),t.Oqu(null==e.eventTracks?null:e.eventTracks.exitCount),t.xp6(2),t.Oqu(null==e.eventTracks?null:e.eventTracks.blurCount),t.xp6(1),t.Q6J("ngForOf",e.answerMixObjs),t.xp6(1),t.Q6J("ngForOf",e.inforsParse)}}const W8=function(){return[]};function V8(n,o){if(1&n&&(t.TgZ(0,"tr")(1,"td",6),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()(),t.YNc(4,K8,50,42,"tr",11),t._UZ(5,"tr")),2&n){const e=o.$implicit,i=t.oxw();let a;t.xp6(1),t.uIk("excelStyle",i.styleTdNormal)("colspan",i.getCurrentColumnIndexForExcel(2)+2),t.xp6(1),t.Oqu(t.lcZ(3,4,"lang_testbank_tested_list_class")+" - "+(null==e.classObj?null:e.classObj.name)),t.xp6(2),t.Q6J("ngForOf",i.checkSortListStudent(null!==(a=null==e.classObj?null:e.classObj.sortType)&&void 0!==a?a:0,e.results||t.DdM(6,W8)))}}function X8(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"tr")(2,"td",6),t._uU(3),t.ALo(4,"mytranslate"),t.ALo(5,"mytranslate"),t.qZA()(),t.BQk()),2&n){const e=t.oxw(2);t.xp6(2),t.uIk("excelStyle",e.styleTdNormal)("colspan",e.getCurrentColumnIndexForExcel(2)+2),t.xp6(1),t.Oqu(t.lcZ(4,3,"lang_testbank_tested_list_class")+" - "+t.lcZ(5,5,"lang_auto_tu_do"))}}function tI(n,o){if(1&n&&(t.TgZ(0,"td",13),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;let i;t.xp6(1),t.Oqu(e.countEssayQuestion&&e.countEssayQuestion>0?(null!==(i=e.totalQuestion)&&void 0!==i?i:0)-(null!==(i=e.rightAnswer)&&void 0!==i?i:0)-e.countEssayQuestion:(null!==(i=e.totalQuestion)&&void 0!==i?i:0)-(null!==(i=e.rightAnswer)&&void 0!==i?i:0))}}function eI(n,o){1&n&&(t.TgZ(0,"td",13),t._uU(1,"0"),t.qZA())}function nI(n,o){if(1&n&&(t.TgZ(0,"td",13),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n){const e=t.oxw().$implicit,i=t.oxw(2);t.xp6(1),t.Oqu(null!=e.essayMark?e.essayMark:t.lcZ(2,1,i.checkStatusStudent(e)))}}function iI(n,o){if(1&n&&(t.TgZ(0,"th",13),t._uU(1),t.qZA()),2&n){const e=o.index,i=t.oxw(3).$implicit;t.xp6(1),t.hij(" ",null!=(null==i.subjectMarkValues?null:i.subjectMarkValues[e])?null==i.subjectMarkValues?null:i.subjectMarkValues[e]:""," ")}}function oI(n,o){if(1&n&&(t.ynx(0),t.YNc(1,iI,2,1,"th",15),t.BQk()),2&n){const e=t.oxw(4);t.xp6(1),t.Q6J("ngForOf",e.createFakeArr(3))}}function aI(n,o){1&n&&(t.TgZ(0,"th",13),t._uU(1),t.qZA()),2&n&&(t.xp6(1),t.Oqu(""))}function rI(n,o){if(1&n&&t.YNc(0,aI,2,1,"th",15),2&n){const e=t.oxw(4);t.Q6J("ngForOf",e.createFakeArr(3))}}function sI(n,o){if(1&n&&(t.ynx(0),t.YNc(1,oI,2,1,"ng-container",16),t.YNc(2,rI,1,1,"ng-template",null,17,t.W1O),t.BQk()),2&n){const e=t.MAs(3),i=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",null==i.subjectMarkValues?null:i.subjectMarkValues.length)("ngIfElse",e)}}function lI(n,o){if(1&n&&(t.TgZ(0,"th",13),t._uU(1),t.ALo(2,"number"),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Oqu(t.xi3(2,1,e.point,"1.2-2"))}}function cI(n,o){1&n&&(t.TgZ(0,"th",13),t._uU(1),t.qZA()),2&n&&(t.xp6(1),t.Oqu(""))}function uI(n,o){if(1&n&&(t.ynx(0),t.YNc(1,cI,2,1,"th",15),t.BQk()),2&n){const e=t.oxw(3).$implicit,i=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",i.createFakeArr(i.maxGroupQuestion-e.groupPoints.length))}}function dI(n,o){if(1&n&&(t.ynx(0),t.YNc(1,lI,3,4,"th",15),t.YNc(2,uI,2,1,"ng-container",8),t.BQk()),2&n){const e=t.oxw(2).$implicit,i=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.groupPoints),t.xp6(1),t.Q6J("ngIf",e.groupPoints.length<i.maxGroupQuestion)}}function mI(n,o){1&n&&t._UZ(0,"th",13)}function hI(n,o){if(1&n&&t.YNc(0,mI,1,0,"th",15),2&n){const e=t.oxw(4);t.Q6J("ngForOf",e.createFakeArr(e.maxGroupQuestion))}}function pI(n,o){if(1&n&&(t.ynx(0),t.YNc(1,dI,3,2,"ng-container",16),t.YNc(2,hI,1,1,"ng-template",null,19,t.W1O),t.BQk()),2&n){const e=t.MAs(3),i=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",i.groupPoints&&i.groupPoints.length>0)("ngIfElse",e)}}function _I(n,o){if(1&n&&(t.TgZ(0,"td",13),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Oqu(e)}}function fI(n,o){if(1&n&&(t.TgZ(0,"td",13),t._uU(1),t.qZA(),t.TgZ(2,"td",13),t._uU(3),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Oqu(e.key),t.xp6(2),t.Oqu(e.value)}}function gI(n,o){if(1&n&&(t.TgZ(0,"tr")(1,"td",12),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"td",13),t._uU(5),t.ALo(6,"mytranslate"),t.qZA(),t.TgZ(7,"td",13),t._uU(8),t.ALo(9,"formatOnlyDateByUserUnitPipe"),t.qZA(),t.TgZ(10,"td",13),t._uU(11),t.ALo(12,"mytranslate"),t.ALo(13,"mytranslate"),t.qZA(),t.TgZ(14,"td",13),t._uU(15),t.ALo(16,"formatStudentCodeToNumber"),t.qZA(),t.TgZ(17,"td",13),t._uU(18),t.ALo(19,"formatOfflineExamHashIdToNumber"),t.qZA(),t.TgZ(20,"td",13),t._uU(21),t.qZA(),t.TgZ(22,"td",13),t._uU(23),t.qZA(),t.TgZ(24,"td",13),t._uU(25),t.ALo(26,"formatFullDateTimeByUserUnitPipe"),t.qZA(),t.TgZ(27,"td",13),t._uU(28),t.ALo(29,"formatFullDateTimeByUserUnitPipe"),t.qZA(),t.TgZ(30,"td",13),t._uU(31),t.qZA(),t.TgZ(32,"td",13),t._uU(33),t.qZA(),t.TgZ(34,"td",13),t._uU(35),t.qZA(),t.YNc(36,tI,2,1,"td",14),t.YNc(37,eI,2,0,"td",14),t.TgZ(38,"td",13),t._uU(39),t.ALo(40,"mytranslate"),t.qZA(),t.YNc(41,nI,3,3,"td",14),t.TgZ(42,"td",13),t._uU(43),t.qZA(),t.YNc(44,sI,4,2,"ng-container",8),t.YNc(45,pI,4,2,"ng-container",8),t.TgZ(46,"td",13),t._uU(47),t.qZA(),t.TgZ(48,"td",13),t._uU(49),t.qZA(),t.YNc(50,_I,2,1,"td",15),t.YNc(51,fI,4,2,"ng-template",10),t.qZA()),2&n){const e=o.$implicit,i=t.oxw(2);let a,r,s,l;t.xp6(2),t.Oqu(e.fullName||t.lcZ(3,24,"lang_auto_thi_sinh_thi_offline")+e.resultId),t.xp6(3),t.Oqu(t.lcZ(6,26,"lang_auto_tu_do")),t.xp6(3),t.Oqu(t.lcZ(9,28,e.birthday)),t.xp6(3),t.Oqu(0==e.gender?t.lcZ(12,30,"lang_gender_female"):1==e.gender?t.lcZ(13,32,"lang_gender_male"):""),t.xp6(4),t.Oqu(e.identificationNumber?t.xi3(16,34,e.identificationNumber,6):""),t.xp6(3),t.Oqu(e.offlineMixQuestionHashId?t.xi3(19,37,e.offlineMixQuestionHashId,3):""),t.xp6(3),t.Oqu(e.testedTime),t.xp6(2),t.Oqu(e.totalTestTime?e.totalTestTime:e.totalExamResultObjs),t.xp6(2),t.Oqu(t.lcZ(26,40,null!==(a=e.startedTest)&&void 0!==a?a:"")),t.xp6(3),t.Oqu(t.lcZ(29,42,null!==(r=e.createdAt)&&void 0!==r?r:"")),t.xp6(3),t.Oqu(null==e.startedTest?"":i.calculationTime(e.startedTest,null!==(s=e.createdAt)&&void 0!==s?s:"")),t.xp6(2),t.Oqu(null==e.startedTest?"":i.calculationTimeOnlyMinutes(e.startedTest,null!==(l=e.createdAt)&&void 0!==l?l:"")),t.xp6(2),t.Oqu(e.rightAnswer),t.xp6(1),t.Q6J("ngIf",!e.isNotTested&&!e.isOnTest),t.xp6(1),t.Q6J("ngIf",e.isNotTested||e.isOnTest),t.xp6(2),t.Oqu(null!=e.trueFalseMark?e.trueFalseMark:t.lcZ(40,44,i.checkStatusStudent(e))),t.xp6(2),t.Q6J("ngIf",i.hasEssayQuestion),t.xp6(2),t.Oqu(e.mark),t.xp6(1),t.Q6J("ngIf",i.examObj.subjectMarks),t.xp6(1),t.Q6J("ngIf",i.maxGroupQuestion>0),t.xp6(2),t.Oqu(null==e.eventTracks?null:e.eventTracks.exitCount),t.xp6(2),t.Oqu(null==e.eventTracks?null:e.eventTracks.blurCount),t.xp6(1),t.Q6J("ngForOf",e.answerMixObjs),t.xp6(1),t.Q6J("ngForOf",e.inforsParse)}}function xI(n,o){if(1&n&&(t.ynx(0),t.YNc(1,X8,6,7,"ng-container",8),t.YNc(2,gI,52,46,"tr",11),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.dataScoreByClass.length),t.xp6(1),t.Q6J("ngForOf",e.dataScore)}}let bI=(()=>{class n extends St.Q{getCurrentColumnIndexForExcel(e){let i=this.hasEssayQuestion?17:16;return this.examObj.subjectMarks&&(i+=3),this.maxGroupQuestion>0&&(i+=this.maxGroupQuestion),1==e||2==e&&(i+=1,this.totalQuestion&&(i+=this.totalQuestion)),i}exportToExcel(){let e=this.examObj.hasOwnProperty("name")?this.commonService.createFileNameExportFile([this.examObj.name??"",this.tableType,"-ScoreSheet"])+".xlsx":this.commonService.createFileNameExportFile([this.tableType,"ScoreSheet"])+".xlsx";this.exportExcelService.exportHtmlTableToExcelStyleOnlyHeaderRow(this.TABLE,!0,e,5)}createFakeArr(e){let i=[];for(let a=0;a<e;a++)i.push(a);return i}checkStatusStudent(e){return e.isNotMarked?"lang_auto_chua_cham":e.isOnTest?"lang_auto_dang_thi":e.isNotSubmit?"lang_auto_chua_nop_bai":e.isNotTested?"lang_auto_chua_thi":""}checkTypeTable(){return"lastTime"==this.tableType?"lang_auto_last_time":"firstTime"==this.tableType?"lang_auto_first_time":"highest"==this.tableType?"lang_auto_highest":"allTime"==this.tableType?"lang_auto_allTime":"lang_auto_last_time"}calculationTime(e,i){return this.timeService.calculationTimeExamTested(e,i)}calculationTimeOnlyMinutes(e,i){return this.timeService.calculationTimeOnlyMinutes(e,i)}checkSortListStudent(e,i){return this.isSortByMark?this.sortService.sortMarkDESC(this.commonService.myClone(i),this.hasEssayQuestion):this.isSortByTime?this.sortService.sortTimeDESC(this.commonService.myClone(i)):0==e||this.isSortByName?this.sortService.sortFirstNameStudents(this.commonService.myClone(i)):this.sortService.sortArrayByMultipleObjectKeyAsc(this.commonService.myClone(i),"pos","id")}constructor(e,i,a){super(),this.timeService=e,this.sortService=i,this.exportExcelService=a,this.dataScore=[],this.dataScoreByClass=[],this.exportQuestionObjs=[],this.tableType="lastTime",this.hasEssayQuestion=!1,this.countEssayQuestion=0,this.totalQuestion=0,this.maxGroupQuestion=0,this.isSortByMark=!1,this.isSortByTime=!1,this.isSortByName=!1,this.currentDate=new Date,this.styleThNormal='{"border": {"top": { "style": "thin", "color": { "rgb": "ff3c8dbc" } },"bottom": { "style": "thin", "color": { "rgb": "ff3c8dbc" } }, "left": { "style": "thin", "color": { "rgb": "ffffffff" } }, "right": { "style": "thin", "color": { "rgb": "ffffffff" } } },"alignment":{"vertical":"center","horizontal":"center","wrapText":true},"font":{"bold":true,"color":{"rgb":"ffffffff"}},"fill":{"patternType":"solid","fgColor":{"rgb":"2361ae"}}}',this.styleTdNormal='{"alignment":{"vertical":"center","horizontal":"center", "wrapText":true},"font":{"bold":false,"color":{"rgb":"000000"}}}'}ngOnDestroy(){super.ngOnDestroy()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(br.D),t.Y36(Kf.V),t.Y36(Yy.L))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-excel-score-sheet"]],viewQuery:function(e,i){if(1&e&&t.Gf(A8,5),2&e){let a;t.iGM(a=t.CRH())&&(i.TABLE=a.first)}},inputs:{examObj:"examObj",dataScore:"dataScore",dataScoreByClass:"dataScoreByClass",exportQuestionObjs:"exportQuestionObjs",tableType:"tableType",hasEssayQuestion:"hasEssayQuestion",countEssayQuestion:"countEssayQuestion",totalQuestion:"totalQuestion",maxGroupQuestion:"maxGroupQuestion",isSortByMark:"isSortByMark",isSortByTime:"isSortByTime",isSortByName:"isSortByName"},features:[t.qOj],decls:108,vars:170,consts:[["azt-track-service","excel-score-sheet-b3JV23esL",1,"table","table-bordered","hiddenIpt",3,"id","click"],["TABLE",""],[1,"thead-dark"],["colspan","10"],["colspan","3"],["colspan","2"],[1,"border-table","azt-excel-cell"],["class","border-table azt-excel-cell",4,"ngIf"],[4,"ngIf"],["class","border-table azt-excel-cell",4,"ngFor","ngForOf"],["ngFor","",3,"ngForOf"],[4,"ngFor","ngForOf"],[1,"border-table",2,"width","150px"],[1,"border-table"],["class","border-table",4,"ngIf"],["class","border-table",4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],["NoSubjectMarkValues",""],["NoGroupPoints",""],["NoGroupPointsFree",""]],template:function(e,i){1&e&&(t.TgZ(0,"table",0,1),t.NdJ("click",function(){return i.exportToExcel()}),t.TgZ(2,"thead",2)(3,"tr")(4,"th",3),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()(),t.TgZ(7,"tr")(8,"th",4),t._uU(9),t.ALo(10,"mytranslate"),t.qZA(),t.TgZ(11,"th",5),t._uU(12),t.ALo(13,"mytranslate"),t.qZA(),t.TgZ(14,"th",4),t._uU(15),t.ALo(16,"mytranslate"),t.qZA(),t.TgZ(17,"th",5),t._uU(18),t.qZA()(),t.TgZ(19,"tr")(20,"th",4),t._uU(21),t.ALo(22,"mytranslate"),t.qZA(),t.TgZ(23,"th",4),t._uU(24),t.ALo(25,"mytranslate"),t.qZA()(),t.TgZ(26,"tr")(27,"th",3),t._uU(28),t.ALo(29,"mytranslate"),t.ALo(30,"formatOnlyDateByUserUnitPipe"),t.qZA()(),t.TgZ(31,"tr"),t._UZ(32,"th"),t.qZA(),t.TgZ(33,"tr")(34,"th",6),t._uU(35),t.ALo(36,"mytranslate"),t.qZA(),t.TgZ(37,"th",6),t._uU(38),t.ALo(39,"mytranslate"),t.qZA(),t.TgZ(40,"th",6),t._uU(41),t.ALo(42,"mytranslate"),t.qZA(),t.TgZ(43,"th",6),t._uU(44),t.ALo(45,"mytranslate"),t.qZA(),t.TgZ(46,"th",6),t._uU(47),t.ALo(48,"mytranslate"),t.qZA(),t.TgZ(49,"th",6),t._uU(50),t.ALo(51,"mytranslate"),t.qZA(),t.TgZ(52,"th",6),t._uU(53),t.ALo(54,"mytranslate"),t.qZA(),t.TgZ(55,"th",6),t._uU(56),t.ALo(57,"mytranslate"),t.qZA(),t.TgZ(58,"th",6),t._uU(59),t.ALo(60,"mytranslate"),t.qZA(),t.TgZ(61,"th",6),t._uU(62),t.ALo(63,"mytranslate"),t.qZA(),t.TgZ(64,"th",6),t._uU(65),t.ALo(66,"mytranslate"),t.qZA(),t.TgZ(67,"th",6),t._uU(68),t.ALo(69,"mytranslate"),t.qZA(),t.TgZ(70,"th",6),t._uU(71),t.ALo(72,"mytranslate"),t.qZA(),t.TgZ(73,"th",6),t._uU(74),t.ALo(75,"mytranslate"),t.qZA(),t.TgZ(76,"th",6),t._uU(77),t.ALo(78,"mytranslate"),t.qZA(),t.YNc(79,S8,3,7,"th",7),t.TgZ(80,"th",6),t._uU(81),t.ALo(82,"mytranslate"),t.qZA(),t.YNc(83,E8,2,1,"ng-container",8),t.YNc(84,I8,2,1,"ng-container",8),t.TgZ(85,"th",6),t._uU(86),t.ALo(87,"mytranslate"),t.qZA(),t.TgZ(88,"th",6),t._uU(89),t.ALo(90,"mytranslate"),t.qZA(),t.YNc(91,L8,3,8,"th",9),t.TgZ(92,"th",6),t._uU(93),t.ALo(94,"mytranslate"),t.qZA()()(),t.TgZ(95,"tbody"),t.YNc(96,V8,6,7,"ng-template",10),t.YNc(97,xI,3,2,"ng-container",8),t._UZ(98,"tr"),t.TgZ(99,"tr"),t._UZ(100,"td")(101,"td")(102,"td")(103,"td"),t.TgZ(104,"td",5),t._uU(105),t.ALo(106,"mytranslate"),t.qZA(),t._UZ(107,"td"),t.qZA()()()),2&e&&(t.MGl("id","table_",i.tableType,""),t.xp6(5),t.AsE("",t.lcZ(6,114,"lang_testbank_tested_list_subject_exam"),": ",i.examObj.name,""),t.xp6(4),t.hij("",t.lcZ(10,116,"lang_testbank_tested_list_time_exam"),":"),t.xp6(3),t.AsE("",i.examObj.minutes," ",t.lcZ(13,118,"lang_testbank_tested_list_minute"),""),t.xp6(3),t.hij("",t.lcZ(16,120,"lang_testbank_tested_list_total_question"),":"),t.xp6(3),t.Oqu(2==i.examObj.mixQuestion?i.examObj.limitMixQuestion:i.examObj.countQuestion),t.xp6(3),t.hij("",t.lcZ(22,122,"lang_auto_kieu_export"),":"),t.xp6(3),t.Oqu(t.lcZ(25,124,i.checkTypeTable())),t.xp6(4),t.AsE("",t.lcZ(29,126,"lang_testbank_tested_list_time_export"),": ",t.lcZ(30,128,i.currentDate),""),t.xp6(6),t.uIk("excelWidth",25)("excelRow",5)("excelColumn",0)("excelStyle",i.styleThNormal),t.xp6(1),t.Oqu(t.lcZ(36,130,"lang_first_and_last_name")),t.xp6(2),t.uIk("excelWidth",20)("excelRow",5)("excelColumn",1)("excelStyle",i.styleThNormal),t.xp6(1),t.Oqu(t.lcZ(39,132,"lang_testbank_tested_list_class")),t.xp6(2),t.uIk("excelWidth",15)("excelRow",5)("excelColumn",2)("excelStyle",i.styleThNormal),t.xp6(1),t.Oqu(t.lcZ(42,134,"lang_birthday")),t.xp6(2),t.uIk("excelWidth",10)("excelRow",5)("excelColumn",3)("excelStyle",i.styleThNormal),t.xp6(1),t.Oqu(t.lcZ(45,136,"lang_gender")),t.xp6(2),t.uIk("excelWidth",15)("excelRow",5)("excelColumn",4)("excelStyle",i.styleThNormal),t.xp6(1),t.Oqu(t.lcZ(48,138,"lang_auto_so_bao_danh")),t.xp6(2),t.uIk("excelWidth",10)("excelRow",5)("excelColumn",5)("excelStyle",i.styleThNormal),t.xp6(1),t.Oqu(t.lcZ(51,140,"lang_auto_ma_de_thi")),t.xp6(2),t.uIk("excelWidth",10)("excelRow",5)("excelColumn",6)("excelStyle",i.styleThNormal),t.xp6(1),t.Oqu(t.lcZ(54,142,"lang_testbank_tested_tested_time_exams")),t.xp6(2),t.uIk("excelWidth",10)("excelRow",5)("excelColumn",7)("excelStyle",i.styleThNormal),t.xp6(1),t.Oqu(t.lcZ(57,144,"lang_testbank_tested_list_number_exams")),t.xp6(2),t.uIk("excelWidth",20)("excelRow",5)("excelColumn",8)("excelStyle",i.styleThNormal),t.xp6(1),t.Oqu(t.lcZ(60,146,"lang_testbank_tested_list_time_start")),t.xp6(2),t.uIk("excelWidth",20)("excelRow",5)("excelColumn",9)("excelStyle",i.styleThNormal),t.xp6(1),t.Oqu(t.lcZ(63,148,"lang_testbank_tested_list_time_end")),t.xp6(2),t.uIk("excelWidth",15)("excelRow",5)("excelColumn",10)("excelStyle",i.styleThNormal),t.xp6(1),t.Oqu(t.lcZ(66,150,"lang_testbank_tested_list_time_homework")),t.xp6(2),t.uIk("excelWidth",15)("excelRow",5)("excelColumn",11)("excelStyle",i.styleThNormal),t.xp6(1),t.Oqu(t.lcZ(69,152,"lang_testbank_tested_list_time_homework_only_minutes")),t.xp6(2),t.uIk("excelWidth",15)("excelRow",5)("excelColumn",12)("excelStyle",i.styleThNormal),t.xp6(1),t.Oqu(t.lcZ(72,154,"lang_testbank_tested_list_number_success")),t.xp6(2),t.uIk("excelWidth",15)("excelRow",5)("excelColumn",13)("excelStyle",i.styleThNormal),t.xp6(1),t.Oqu(t.lcZ(75,156,"lang_testbank_tested_list_error")),t.xp6(2),t.uIk("excelWidth",15)("excelRow",5)("excelColumn",14)("excelStyle",i.styleThNormal),t.xp6(1),t.Oqu(t.lcZ(78,158,"lang_testbank_tested_list_test_score")),t.xp6(2),t.Q6J("ngIf",i.hasEssayQuestion),t.xp6(1),t.uIk("excelWidth",15)("excelRow",5)("excelColumn",i.hasEssayQuestion?16:15)("excelStyle",i.styleThNormal),t.xp6(1),t.Oqu(t.lcZ(82,160,"lang_testbank_tested_list_total_point")),t.xp6(2),t.Q6J("ngIf",i.examObj.subjectMarks),t.xp6(1),t.Q6J("ngIf",i.maxGroupQuestion>0),t.xp6(1),t.uIk("excelWidth",15)("excelRow",5)("excelColumn",i.getCurrentColumnIndexForExcel(1))("excelStyle",i.styleThNormal),t.xp6(1),t.Oqu(t.lcZ(87,162,"lang_testbank_tested_list_exit_full_screen")),t.xp6(2),t.uIk("excelWidth",15)("excelRow",5)("excelColumn",i.getCurrentColumnIndexForExcel(1)+1)("excelStyle",i.styleThNormal),t.xp6(1),t.Oqu(t.lcZ(90,164,"lang_testbank_tested_list_exit_brower")),t.xp6(2),t.Q6J("ngForOf",i.createFakeArr(i.totalQuestion)),t.xp6(1),t.uIk("excelWidth",50)("excelRow",5)("excelColumn",i.getCurrentColumnIndexForExcel(2)+1)("excelStyle",i.styleThNormal),t.xp6(1),t.Oqu(t.lcZ(94,166,"lang_testbank_tested_list_additional_information")),t.xp6(3),t.Q6J("ngForOf",i.dataScoreByClass),t.xp6(1),t.Q6J("ngIf",i.dataScore.length),t.xp6(8),t.hij("",t.lcZ(106,168,"lang_testbank_tested_list_teacher_confirmed"),":"))},dependencies:[D.sg,D.O5,D.JJ,jt.JV,jt.gw,jt.Aw,jt.YK,jt.a5],encapsulation:2}),n})();class vI{constructor(){this.x=0,this.y=0}toBase64String(){return(new Zs).writeCvPoint2u(this).toBase64String()}}class kp{constructor(){this.x=0,this.y=0}toBase64String(){return(new Zs).writeCvPoint2f(this).toBase64String()}}class Ky{constructor(){this.x=0,this.y=0,this.width=0,this.height=0}toBase64String(){return(new Zs).writeCvRect2f(this).toBase64String()}}class yI{constructor(){this.center=new kp,this.filled=!1}toBase64String(){return(new Zs).writeAnswerCircle(this).toBase64String()}}class Y0{constructor(){this.rows=0,this.cols=0,this.radius=0,this.answers=[]}toBase64String(){return(new Zs).writeTableAnswer(this).toBase64String()}}class q6{constructor(){this.top=new kp,this.left=new kp,this.bottom=new kp,this.right=new kp}toBase64String(){return(new Zs).writeResultRect(this).toBase64String()}}class wI{constructor(){this.id=0,this.region=new Ky}toBase64String(){return(new Zs).writeCropRegion(this).toBase64String()}}class CI{constructor(){this.existed=!1,this.image=[],this.answer=0,this.answerRegion=new Ky}toBase64String(){return(new Zs).writeHandwrittenRect(this).toBase64String()}}class TI{constructor(){this.type=0,this.errorCode=0,this.paperCorner=new q6,this.studentId=new Y0,this.examId=new Y0,this.answerTable=new Y0,this.imageWidth=0,this.imageHeight=0,this.imageSize=0,this.examIdNum=0,this.teacherScore=0,this.cropRegion=[],this.answersHandwritten=[],this.teacherScoreTb=[]}toBase64String(){return(new Zs).writeResultOutput(this).toBase64String()}}class kI{constructor(){this.imageType=0,this.templateType=0,this.imageWidth=0,this.imageHeight=0,this.imageLength=0,this.numOfQuestion=0}toBase64String(){return(new Zs).writeAnswerSheetInput(this).toBase64String()}}class F6{constructor(){this.position=0,this.x=0,this.y=0,this.filledCols=0,this.rows=0}toBase64String(){return(new Zs).writeSmallAnswerCircle(this).toBase64String()}}class Ap{constructor(){this.rows=0,this.cols=0,this.radius=0,this.answers=[]}toBase64String(){return(new Zs).writeSmallTableAnswer(this).toBase64String()}}class Q6{constructor(){this.studentId=new Ap,this.examId=new Ap,this.answerTable=new Ap}toBase64String(){return(new Zs).writeDrawData(this).toBase64String()}}class AI{constructor(o){this.bytes=o,this.cursor=0,this.length=o.byteLength}updateCursor(o){if(this.cursor=this.cursor+o,this.cursor>=this.length)throw new Error("Overflow InputStreaming")}parseUchar(){let o=this.bytes[this.cursor];return this.updateCursor(1),o}parseInt(){let o=this.bytes.buffer.slice(this.cursor,this.cursor+4);return this.updateCursor(4),new DataView(o).getInt32(0)}parseDouble(){let o=this.bytes.buffer.slice(this.cursor,this.cursor+8);return this.updateCursor(8),new DataView(o).getFloat64(0,!0)}parseString(){let o=new TextDecoder("utf-8"),e=this.cursor,i=this.bytes[this.cursor];for(;0!=i;)this.updateCursor(1),i=this.bytes[this.cursor];let a=this.bytes.slice(e,this.cursor),r=o.decode(a);return this.updateCursor(1),r}parseBool(){let o=this.bytes[this.cursor];return this.updateCursor(1),o>0}parseCvPoint2u(){let o=new vI;return o.x=this.parseUchar(),o.y=this.parseUchar(),o}parseCvPoint2f(){let o=new kp;return o.x=this.parseDouble(),o.y=this.parseDouble(),o}parseCvRect2f(){let o=new Ky;return o.x=this.parseDouble(),o.y=this.parseDouble(),o.width=this.parseDouble(),o.height=this.parseDouble(),o}parseAnswerCircle(){let o=new yI;return o.center=this.parseCvPoint2f(),o.filled=this.parseBool(),o}parseTableAnswer(){let o=new Y0,e=0;o.rows=this.parseInt(),o.cols=this.parseInt(),o.radius=this.parseInt(),e=this.parseInt();for(let i=0;i<e;i++)o.answers.push(this.parseAnswerCircle());return o}parseResultRect(){let o=new q6;return o.top=this.parseCvPoint2f(),o.left=this.parseCvPoint2f(),o.bottom=this.parseCvPoint2f(),o.right=this.parseCvPoint2f(),o}parseCropRegion(){let o=new wI;return o.id=this.parseInt(),o.region=this.parseCvRect2f(),o}parseHandwrittenRect(){let o=new CI,e=0;o.existed=this.parseBool(),e=this.parseInt();for(let i=0;i<e;i++)o.image.push(this.parseUchar());return o.answer=this.parseInt(),o.answerRegion=this.parseCvRect2f(),o}parseResultOutput(){let o=new TI,e=0;o.type=this.parseInt(),o.errorCode=this.parseInt(),o.paperCorner=this.parseResultRect(),o.studentId=this.parseTableAnswer(),o.examId=this.parseTableAnswer(),o.answerTable=this.parseTableAnswer(),o.imageWidth=this.parseInt(),o.imageHeight=this.parseInt(),o.imageSize=this.parseInt(),o.examIdNum=this.parseInt(),o.teacherScore=this.parseDouble(),e=this.parseInt();for(let i=0;i<e;i++)o.cropRegion.push(this.parseCropRegion());e=this.parseInt();for(let i=0;i<e;i++)o.answersHandwritten.push(this.parseHandwrittenRect());e=this.parseInt();for(let i=0;i<e;i++)o.teacherScoreTb.push(this.parseAnswerCircle());return o}parseAnswerSheetInput(){let o=new kI;return o.imageType=this.parseInt(),o.templateType=this.parseInt(),o.imageWidth=this.parseInt(),o.imageHeight=this.parseInt(),o.imageLength=this.parseInt(),o.numOfQuestion=this.parseInt(),o}parseSmallAnswerCircle(){let o=new F6;return o.position=this.parseUchar(),o.x=this.parseUchar(),o.y=this.parseUchar(),o.filledCols=this.parseUchar(),o.rows=this.parseUchar(),o}parseSmallTableAnswer(){let o=new Ap,e=0;o.rows=this.parseUchar(),o.cols=this.parseUchar(),o.radius=this.parseUchar(),e=this.parseInt();for(let i=0;i<e;i++)o.answers.push(this.parseSmallAnswerCircle());return o}parseDrawData(){let o=new Q6;return o.studentId=this.parseSmallTableAnswer(),o.examId=this.parseSmallTableAnswer(),o.answerTable=this.parseSmallTableAnswer(),o}}const Lu=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"];class Zs{constructor(){this.bytes=[]}writeUchar(o){return this.bytes.push(o),this}writeUint8Array(o){for(let e=0;e<o.length;e++)this.bytes.push(o[e]);return this}writeArrayBuffer(o){let e=new Uint8Array(o);return this.writeUint8Array(e),this}writeInt(o){let e=new ArrayBuffer(4);return new DataView(e).setUint32(0,o,!1),this.writeArrayBuffer(e),this}writeDouble(o){let e=new ArrayBuffer(8);return new DataView(e).setFloat64(0,o,!0),this.writeArrayBuffer(e),this}writeString(o){let i=(new TextEncoder).encode(o);return this.writeUint8Array(i),this.writeUchar(0),this}writeBool(o){return this.writeUchar(o?1:0),this}toBase64String(){return function SI(n){let e,o="",i=n.length;for(e=2;e<i;e+=3)o+=Lu[n[e-2]>>2],o+=Lu[(3&n[e-2])<<4|n[e-1]>>4],o+=Lu[(15&n[e-1])<<2|n[e]>>6],o+=Lu[63&n[e]];return e===i+1&&(o+=Lu[n[e-2]>>2],o+=Lu[(3&n[e-2])<<4],o+="=="),e===i&&(o+=Lu[n[e-2]>>2],o+=Lu[(3&n[e-2])<<4|n[e-1]>>4],o+=Lu[(15&n[e-1])<<2],o+="="),o}(new Uint8Array(this.bytes))}writeCvPoint2u(o){return this.writeUchar(o.x),this.writeUchar(o.y),this}writeCvPoint2f(o){return this.writeDouble(o.x),this.writeDouble(o.y),this}writeCvRect2f(o){return this.writeDouble(o.x),this.writeDouble(o.y),this.writeDouble(o.width),this.writeDouble(o.height),this}writeAnswerCircle(o){return this.writeCvPoint2f(o.center),this.writeBool(o.filled),this}writeTableAnswer(o){this.writeInt(o.rows),this.writeInt(o.cols),this.writeInt(o.radius),this.writeInt(o.answers.length);for(let e of o.answers)this.writeAnswerCircle(e);return this}writeResultRect(o){return this.writeCvPoint2f(o.top),this.writeCvPoint2f(o.left),this.writeCvPoint2f(o.bottom),this.writeCvPoint2f(o.right),this}writeCropRegion(o){return this.writeInt(o.id),this.writeCvRect2f(o.region),this}writeHandwrittenRect(o){this.writeBool(o.existed),this.writeInt(o.image.length);for(let e of o.image)this.writeUchar(e);return this.writeInt(o.answer),this.writeCvRect2f(o.answerRegion),this}writeResultOutput(o){this.writeInt(o.type),this.writeInt(o.errorCode),this.writeResultRect(o.paperCorner),this.writeTableAnswer(o.studentId),this.writeTableAnswer(o.examId),this.writeTableAnswer(o.answerTable),this.writeInt(o.imageWidth),this.writeInt(o.imageHeight),this.writeInt(o.imageSize),this.writeInt(o.examIdNum),this.writeDouble(o.teacherScore),this.writeInt(o.cropRegion.length);for(let e of o.cropRegion)this.writeCropRegion(e);this.writeInt(o.answersHandwritten.length);for(let e of o.answersHandwritten)this.writeHandwrittenRect(e);this.writeInt(o.teacherScoreTb.length);for(let e of o.teacherScoreTb)this.writeAnswerCircle(e);return this}writeAnswerSheetInput(o){return this.writeInt(o.imageType),this.writeInt(o.templateType),this.writeInt(o.imageWidth),this.writeInt(o.imageHeight),this.writeInt(o.imageLength),this.writeInt(o.numOfQuestion),this}writeSmallAnswerCircle(o){return this.writeUchar(o.position),this.writeUchar(o.x),this.writeUchar(o.y),this.writeUchar(o.filledCols),this.writeUchar(o.rows),this}writeSmallTableAnswer(o){this.writeUchar(o.rows),this.writeUchar(o.cols),this.writeUchar(o.radius),this.writeInt(o.answers.length);for(let e of o.answers)this.writeSmallAnswerCircle(e);return this}writeDrawData(o){return this.writeSmallTableAnswer(o.studentId),this.writeSmallTableAnswer(o.examId),this.writeSmallTableAnswer(o.answerTable),this}}const OI=["fileInput"],EI=["fileInputMobile"];function MI(n,o){1&n&&(t.TgZ(0,"p",17),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_auto_he_thong_dang_tai_cong_cu_doing")))}function II(n,o){1&n&&(t.TgZ(0,"span",23),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_auto_dang_quet_bai_tu_phieu_scan_doing")))}function LI(n,o){1&n&&(t.TgZ(0,"span",23),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_quet_thanh_cong")," "))}function PI(n,o){1&n&&(t.TgZ(0,"span",23),t._uU(1),t.ALo(2,"mytranslate"),t.TgZ(3,"span",24),t._UZ(4,"azt-loading-ui"),t.qZA()()),2&n&&(t.xp6(1),t.hij("",t.lcZ(2,1,"lang_auto_he_thong_dang_luu_bai_vui_long_khong_thoat_trinh_duyet"),"\xa0"))}function NI(n,o){1&n&&(t.TgZ(0,"span",23),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_cham_thanh_cong")," "))}function ZI(n,o){1&n&&(t.TgZ(0,"span",23),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_cham_khong_thanh_cong")," "))}function DI(n,o){if(1&n&&(t.TgZ(0,"b",25),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.AsE("",e.doneFileScan-e.uploadFileScanError.length,"/",e.totalFileScan,"")}}function jI(n,o){if(1&n&&(t.TgZ(0,"b",25),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.AsE("",e.saveSuccessCount,"/",e.totalFileScan,"")}}function qI(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"p",26)(1,"a",27),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.showStudentList())}),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()}2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"lang_auto_xem_danh_sach")," "))}function FI(n,o){if(1&n&&(t.TgZ(0,"div",18)(1,"p",19),t.YNc(2,II,3,3,"span",20),t.YNc(3,LI,3,3,"span",20),t.YNc(4,PI,5,3,"span",20),t.YNc(5,NI,3,3,"span",20),t.YNc(6,ZI,3,3,"span",20),t.YNc(7,DI,2,2,"b",21),t.YNc(8,jI,2,2,"b",21),t.qZA(),t.YNc(9,qI,4,3,"p",22),t.qZA()),2&n){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",e.scanningStatus.isScanning),t.xp6(1),t.Q6J("ngIf",e.scanningStatus.isScanDone&&!e.scanningStatus.isSavingDone&&!e.scanningStatus.isSaving&&!e.scanningStatus.isSavingFail),t.xp6(1),t.Q6J("ngIf",e.scanningStatus.isSaving),t.xp6(1),t.Q6J("ngIf",e.scanningStatus.isSavingDone),t.xp6(1),t.Q6J("ngIf",e.scanningStatus.isSavingFail),t.xp6(1),t.Q6J("ngIf",!e.scanningStatus.isSavingDone&&e.totalFileScan>0),t.xp6(1),t.Q6J("ngIf",e.scanningStatus.isSavingDone&&e.totalFileScan>0),t.xp6(1),t.Q6J("ngIf",e.scanningStatus.isSavingDone)}}function QI(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",18)(1,"p",28),t._uU(2),t.ALo(3,"mytranslate"),t.TgZ(4,"b",29),t._uU(5),t.qZA(),t._uU(6," file. \xa0"),t.qZA(),t.TgZ(7,"a",30),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.showScanFalseFiles())}),t._uU(8),t.ALo(9,"mytranslate"),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(2),t.hij("",t.lcZ(3,4,"lang_auto_da_xay_ra_loi_scan_o")," "),t.xp6(3),t.AsE("",e.uploadFileScanError.length,"/",e.totalFileScan," "),t.xp6(3),t.hij(" ",t.lcZ(9,6,"lang_auto_xem_chi_tiet")," ")}}function RI(n,o){if(1&n&&(t.TgZ(0,"p",28),t._uU(1),t.ALo(2,"mytranslate"),t.ALo(3,"mytranslate"),t.qZA()),2&n){const e=o.$implicit,i=t.oxw(2);t.xp6(1),t.HOy(" ",t.lcZ(2,4,"lang_auto_ma_de"),": ",i.replaceDigit(e.offlineMixquestionHashId,!1)," ",t.lcZ(3,6,"lang_auto_-_so_bao_danh"),": ",i.replaceDigit(e.studentCode,!0)," ")}}function UI(n,o){if(1&n&&(t.TgZ(0,"div",31)(1,"p",28),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"div",32),t.YNc(5,RI,4,8,"p",33),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,2,"lang_auto_du_lieu_luu_loi"),":"),t.xp6(3),t.Q6J("ngForOf",e.invalidDataCallMarkObjs)}}function BI(n,o){1&n&&(t.TgZ(0,"p",35),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_scan_file_support_v2")))}function zI(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",39),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.selectFileClick())}),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_chon_thu_muc_file_scan")," "))}function JI(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",34)(1,"p",35),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.YNc(4,BI,3,3,"p",36),t.YNc(5,zI,3,3,"button",37),t.TgZ(6,"button",38),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.selectFileClick(!0))}),t._uU(7),t.ALo(8,"mytranslate"),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,4,"lang_auto_cham_diem_tu_phieu_tra_loi_trac_nghiem_cua_hoc_sinh")),t.xp6(2),t.Q6J("ngIf",!e.isMobileWebView),t.xp6(1),t.Q6J("ngIf",!e.isMobile),t.xp6(2),t.hij(" ",t.lcZ(8,6,"lang_auto_chon_thu_muc_file_scan_mobile")," ")}}function HI(n,o){1&n&&(t.TgZ(0,"p",35),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_scan_file_support_v2")))}function GI(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",45)(1,"button",46),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.selectFileClick())}),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()}2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"lang_auto_chon_thu_muc_file_scan")," "))}const $I=function(n){return{"pl-0":n}};function YI(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",40)(1,"p",35),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.YNc(4,HI,3,3,"p",36),t.TgZ(5,"div",41),t.YNc(6,GI,4,3,"div",42),t.TgZ(7,"div",43)(8,"button",44),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.selectFileClick(!0))}),t._uU(9),t.ALo(10,"mytranslate"),t.qZA()()()()}if(2&n){const e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,5,"lang_auto_cham_diem_tu_phieu_tra_loi_trac_nghiem_cua_hoc_sinh")),t.xp6(2),t.Q6J("ngIf",!e.isMobileWebView),t.xp6(2),t.Q6J("ngIf",!e.isMobile),t.xp6(1),t.Q6J("ngClass",t.VKq(9,$I,!e.isMobile)),t.xp6(2),t.hij(" ",t.lcZ(10,7,"lang_auto_chon_thu_muc_file_scan_mobile")," ")}}function KI(n,o){1&n&&(t.TgZ(0,"mat-icon",52),t._uU(1,"double_arrow"),t.qZA())}function WI(n,o){if(1&n&&(t.TgZ(0,"div",47)(1,"div",48),t._UZ(2,"div",49),t.YNc(3,KI,2,0,"mat-icon",50),t._UZ(4,"div",51),t.qZA()()),2&n){const e=t.oxw();t.xp6(3),t.Q6J("ngIf",e.doneFileScan>0)}}function VI(n,o){1&n&&t._UZ(0,"azt-loading-effect")}function XI(n,o){if(1&n&&(t.TgZ(0,"div",11)(1,"div",12),t._UZ(2,"div",13)(3,"div",14),t.qZA()()),2&n){const e=t.oxw().index;t.xp6(2),t.s9C("id","processFileScan"+e),t.xp6(1),t.s9C("id","doneFileScan"+e)}}function t7(n,o){if(1&n&&(t.TgZ(0,"div",9)(1,"p"),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.YNc(4,XI,4,2,"div",10),t.qZA()),2&n){const e=o.$implicit,i=o.index,a=t.oxw(2);t.xp6(2),t.AsE("",i+1,".\xa0",t.lcZ(3,3,a.getErrorCode(e.errorMessage?e.errorMessage:"")),""),t.xp6(2),t.Q6J("ngIf",e.img_in||e.img_out)}}function e7(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",2)(1,"div",3)(2,"div",4)(3,"h3",5),t._uU(4),t.ALo(5,"mytranslate"),t.qZA(),t.YNc(6,t7,5,5,"div",6),t.TgZ(7,"div",7)(8,"button",8),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onNoClick())}),t._uU(9),t.ALo(10,"mytranslate"),t.qZA()()()()()}if(2&n){const e=t.oxw();t.xp6(4),t.hij(" ",t.lcZ(5,3,"lang_auto_anh_scan_loi")," "),t.xp6(2),t.Q6J("ngForOf",e.data),t.xp6(3),t.hij(" ",t.lcZ(10,5,"lang_auto_dong")," ")}}const Wy=".has-bg[_ngcontent-%COMP%]{background:inherit;background-color:#f1f1f1;box-sizing:border-box;border-width:1px;border-style:solid;border-color:#dfdfdf;border-radius:4px;box-shadow:none}.btn-custom-file-scan[_ngcontent-%COMP%]{display:block;background:#2361ae!important;color:#fff!important;transition:all .5s}.link__color[_ngcontent-%COMP%]{color:#0eafc0!important}.link__hover[_ngcontent-%COMP%]:hover{color:#0a8f9e!important}.status_saving[_ngcontent-%COMP%]{position:fixed;z-index:9999;top:0;left:0;width:100%;height:100%;background-color:#0000007b}.scan-file-content[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;width:100%;transform:translate(-50%,-50%)}.scan-file-body[_ngcontent-%COMP%]{width:100%;height:100%;position:relative;max-height:70vh}@media (max-width: 820px){.btn-custom-file-scan[_ngcontent-%COMP%]{padding:0 10px}}@media (max-width: 768px){.scan-file-body[_ngcontent-%COMP%]{height:calc(100vh - 250px);position:relative}.scan-file-content[_ngcontent-%COMP%]{transform:none!important;top:0;left:0;height:100%}.arrow_icon[_ngcontent-%COMP%]{margin-left:5px!important;width:100%!important}}";function n7(n,o){1&n&&(t.TgZ(0,"div",3)(1,"p",9),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&n&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"lang_auto_khong_the_tao_de_thi_offline_voi_de_dang_docx")))}function i7(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",3)(1,"p",9),t._uU(2),t.ALo(3,"mytranslate"),t.TgZ(4,"a",10),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.redirectToCreateOfflineTest())}),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()()()}2&n&&(t.xp6(2),t.hij("",t.lcZ(3,2,"lang_testbank_tested_list_no_exam_offline_scan"),"\xa0 "),t.xp6(3),t.Oqu(t.lcZ(6,4,"lang_testbank_test_list_scan_tutorial_click_here")))}const us=100,o7=["lang_auto_khong_trang_giay_nao_duoc_tim_thay","lang_auto_trang_giay_qua_nho_camera_dat_qua_xa_trang_giay","lang_auto_khong_nhan_dien_duoc_loai_mau_nao_trong_trang_giay","","lang_auto_khong_tim_thay_duoc_bang_dap_an","lang_auto_bang_dap_an_qua_xa_camera","lang_auto_ma_de_loi_sai_cau_truc_bang_viet_tay","lang_auto_danh_sach_anh_tra_ra_bi_thieu","lang_auto_qua_trinh_nhan_dien_ma_de_loi"];let a7=(()=>{class n extends St.Q{selectFileClick(e){this.hasExamOffline?this.permissionService.hasMarkPointPermission("exam",this.examObj)?this.loadedJs?this.fileInput&&(this.doneFileScan=0,this.doneFileScanMarked=0,this.saveSuccessCount=0,this.totalFileScan=0,this.totalFileScanMarked=0,this.arrDataCallMarkObjs=[],this.listMapStudentCodeAndExamId=[],this.uploadFileScanError=[],this.invalidDataCallMarkObjs=[],this.isSelectedFile=!1,this.scanningStatus={isSaving:!1,isScanDone:!1,isScanning:!1,isSavingDone:!1,isSavingFail:!1},this.fileInputMobile&&e?(this.fileInputMobile.nativeElement.value=null,this.fileInputMobile.nativeElement.click(),this.firstTimeScan=!0):(this.fileInput.nativeElement.value=null,this.fileInput.nativeElement.click(),this.firstTimeScan=!0)):this.loadingFileJs().then(()=>{this.loadingFileJS=!1,this.fileInput&&(this.doneFileScan=0,this.saveSuccessCount=0,this.totalFileScan=0,this.totalFileScanMarked=0,this.doneFileScanMarked=0,this.arrDataCallMarkObjs=[],this.listMapStudentCodeAndExamId=[],this.uploadFileScanError=[],this.invalidDataCallMarkObjs=[],this.isSelectedFile=!1,this.scanningStatus={isSaving:!1,isScanDone:!1,isScanning:!1,isSavingDone:!1,isSavingFail:!1},this.fileInputMobile&&e?(this.fileInputMobile.nativeElement.value=null,this.fileInputMobile.nativeElement.click(),this.firstTimeScan=!0):(this.fileInput.nativeElement.value=null,this.fileInput.nativeElement.click(),this.firstTimeScan=!0))}).catch(i=>{this.loadingFileJS=!1,this.showErrorSnack(this.commonService.myTranslateInstant(i.message)??"")}):this.showErrorSnack("lang_auto_ban_khong_co_quyen_thuc_thi_chuc_nang_nay"):this.examOfflineMessage&&""!=this.examOfflineMessage?this.showErrorSnack(this.examOfflineMessage):this.sAztDialogService.open(s7,{width:"60vw",restoreFocus:!1,data:{examObj:this.examObj,backToLink:this.backToLink}}).afterClosed().subscribe(a=>{})}getFileLocal(e){var i=new FileReader;i.onload=()=>{if(i.result&&"string"!=typeof i.result){var r=new Uint8Array(i.result);this.totalFileScan++,this.isSelectedFile=!0,this.scanningStatus.isScanning=!0,this.addQueueFileScan(r)}},i.readAsArrayBuffer(e)}addQueueFileScan(e){this.queueUploadFileScan.push(e),this.processQueueFileScan()}processQueueFileScan(){if(!this.isProcessingFileScan&&0!=this.queueUploadFileScan.length&&!this.isSaving){var e=this.queueUploadFileScan.shift();e&&this.processImg(e)}}processImg(e){var i=this;return(0,Ya.Z)(function*(){i.isProcessingFileScan=!0;try{if(null!=typeof imgsdk&&window.hasOwnProperty("imgsdk")){yield imgsdk.init();var a=i.userService.getUserObj(),r=yield imgsdk.processAnswerSheet({src:e,width:720,height:1280,token:i.tokenScan,uid:a.id?.toString()});r&&(i.doneFileScan++,r.Result&&(r.page=new AI(r.Result).parseResultOutput())),0==i.queueUploadFileScan.length&&(i.scanningStatus.isScanning=!1,i.scanningStatus.isScanDone=!0),(0!=r.code||i.existStudentCodeAndExamId(i.convertStringToNumber(r.StudentId),i.convertStringToNumber(r.ExamId)))&&(0!=r.code?r.errorMessage=o7[r.code-1]??"process_scan_false":i.existStudentCodeAndExamId(i.convertStringToNumber(r.StudentId),i.convertStringToNumber(r.ExamId))&&(r.errorMessage="exist_exam_id_and_student_code"),r.img_in&&i.uploadFileToCdn(r.img_in,0,!0),i.uploadFileScanError.push(r)),i.addQueueSaveMarkObj(r),i.showOutput(r)}}catch{}i.isProcessingFileScan=!1,i.processQueueFileScan()})()}showOutput(e){var i=document.getElementById("processFileScan"),a=document.getElementById("doneFileScan");i&&a&&(i.innerHTML="",a.innerHTML="",e.img_in.width=144,e.img_in.height=207,i.appendChild(e.img_in),e.img_out&&(e.img_out.width=144,e.img_out.height=207,e.img_out.style.marginLeft=this.isMobile?"20px":"30px",e.img_out.style.display="inline",e.img_out.style.verticalAlign="middle",a.appendChild(e.img_out)))}addQueueSaveMarkObj(e){e&&(this.queueSaveMarkObj.push(e),this.totalFileScanMarked++),this.isSaving||this.processQueueSaveMarkObj()}processQueueSaveMarkObj(){if(!this.isProcessingSaveMark&&0!=this.queueSaveMarkObj.length&&!this.isSaving){var e=this.queueSaveMarkObj.shift();e&&this.processSaveMarkObj(e)}}callSaveMarkObj(e){this.waitDestroy(this.offlineExamResultService.apiOfflineExamResultMarkObjsV2Post(this.examObj.hashId??"",this.removeObjScanToSaveObjs(this.arrDataCallMarkObjs)).subscribe(i=>{if(i&&1==i.success){var a=i.data?.studentCodeToSuccessIds??{};this.firstSuccessResultId.emit(i.data?.firstSuccessResultId),i.data?.invalidData&&i.data?.invalidData.length>0&&(this.invalidDataCallMarkObjs=[...this.invalidDataCallMarkObjs,...i.data?.invalidData]),Object.keys(a).length>0?this.getUrlForImgScan(a,e).then(r=>{this.updateImgUrlForScan(r,e)}):e?(this.arrDataCallMarkObjs.splice(0,us),this.doneFileScanMarked=0,this.isSaving=!1,this.moreThanMaxSaved++,this.scanningStatus.isScanDone?this.processQueueSaveMarkObj():this.processQueueFileScan()):(this.scanningStatus.isSaving=!1,this.saveSuccessCount?this.scanningStatus.isSavingDone=!0:(this.scanningStatus.isSavingFail=!0,this.showErrorSnack("lang_auto_he_thong_khong_tim_thay_de_thi_hoac_danh_sach_hs_vui_long_kiem_tra_lai_tep_tin_tai_len")))}else e?(this.arrDataCallMarkObjs.splice(0,us),this.doneFileScanMarked=0,this.isSaving=!1,this.moreThanMaxSaved++,this.scanningStatus.isScanDone?this.processQueueSaveMarkObj():this.processQueueFileScan()):(this.scanningStatus.isSaving=!1,this.saveSuccessCount?this.scanningStatus.isSavingDone=!0:(this.scanningStatus.isSavingFail=!0,this.showErrorSnack("lang_auto_he_thong_khong_tim_thay_de_thi_hoac_danh_sach_hs_vui_long_kiem_tra_lai_tep_tin_tai_len")))}))}removeObjScanToSaveObjs(e){for(var i=[],a=e.length<us?e.length:us,r=0;r<a;r++)i.push({index:e[r].index,studentCode:e[r].studentCode,offlineMixquestionHashId:e[r].offlineMixquestionHashId,studentCodeLength:e[r].studentCodeLength,offlineMixquestionHashIdLength:e[r].offlineMixquestionHashIdLength,images:e[r].images,imagesData:e[r].imagesData,nameImages:e[r].nameImages,templateType:e[r].templateType,nameImagesData:"",rawStudentCode:0,rawOfflineMixQuestionHashId:0,isSuccess:!0});return i}getNamePosForStudent(){return new Promise(e=>{if(this.arrDataCallMarkObjs.length>0){for(var i=this.arrDataCallMarkObjs.length<=us?this.arrDataCallMarkObjs.length:us,a=0;a<i;a++)if(this.arrDataCallMarkObjs[a].objScan.page.cropRegion.length>0){let r=document.createElement("canvas");r.setAttribute("id","nameImage_"+a);const s=r.getContext("2d");let l=this.arrDataCallMarkObjs[a].objScan.page.cropRegion[0].region.x??210,c=this.arrDataCallMarkObjs[a].objScan.page.cropRegion[0].region.y??210,d=this.arrDataCallMarkObjs[a].objScan.page.cropRegion[0].region.width??250,h=this.arrDataCallMarkObjs[a].objScan.page.cropRegion[0].region.height??50;r.width=d,r.height=h,s?.drawImage(this.arrDataCallMarkObjs[a].objScan.img_out,l,c,d,h,0,0,d,h);let _=r.toDataURL("image/jpeg",.9);this.arrDataCallMarkObjs[a].nameImages={url:_,width:r.width,height:r.height,position:{x:0,y:0,width:d,height:h}}}e()}else e()})}getUrlForImgScan(e,i){return new Promise((a,r)=>{var s=[];for(var l in e)if(e.hasOwnProperty(l)){var c=this.arrDataCallMarkObjs.filter(_=>_.index?.toString()==l);let h=0;if(c&&c.length>0){var d=(_,x,b)=>{this.uploadFileToCdn(_,x,b).then(T=>{T.imgUrl?(s.push({id:T.id,images:{url:T.imgUrl,width:c[0].objScan.img_out.naturalWidth<720?720:c[0].objScan.img_out.naturalWidth,height:c[0].objScan.img_out.naturalHeight<1038?1038:c[0].objScan.img_out.naturalHeight}}),s.length==Object.keys(e).length&&a(s)):(h++,h<=2?setTimeout(()=>{d(_,x,b)},300):i?(this.arrDataCallMarkObjs.splice(0,us),this.doneFileScanMarked=0,this.isSaving=!1,this.moreThanMaxSaved++,this.scanningStatus.isScanDone?this.processQueueSaveMarkObj():this.processQueueFileScan()):(this.scanningStatus.isSaving=!1,this.saveSuccessCount?this.scanningStatus.isSavingDone=!0:(this.scanningStatus.isSavingFail=!0,this.showErrorSnack("lang_file_scan_error_get_url"))))})};d(c[0].objScan.img_out,e[l],!1)}}})}updateImgUrlForScan(e,i){this.waitDestroy(this.offlineExamResultService.apiOfflineExamResultUpdateImagesPost(this.examObj.hashId??"",e).subscribe(a=>{a&&1==a.success?(this.saveSuccessCount+=e.length,i?(this.arrDataCallMarkObjs.splice(0,us),this.doneFileScanMarked=0,this.isSaving=!1,this.moreThanMaxSaved++,this.scanningStatus.isScanDone?this.processQueueSaveMarkObj():this.processQueueFileScan()):(this.scanningStatus.isSaving=!1,this.scanningStatus.isSavingFail=!1,this.scanningStatus.isSavingDone=!0,this.showSuccessSnack("lang_auto_luu_thanh_cong")),this.saveStudentMarkEmit.emit(!0)):(i&&(this.isSaving=!1,this.scanningStatus.isScanDone?this.processQueueSaveMarkObj():this.processQueueFileScan()),this.scanningStatus.isSaving=!1,this.saveSuccessCount?this.scanningStatus.isSavingDone=!0:this.scanningStatus.isSavingFail=!0,this.showErrorSnack(a.message??""))}))}uploadFileToCdn(e,i,a){return new Promise(r=>{this.drawImgOutToCanvas(e).then(s=>{s?a?this.uploadApiService.uploadToCdnForFileScanError(s,this.examObj.hashId??"").subscribe(l=>{r(l&&1==l.success?{id:i,imgUrl:l.data?.url??""}:{id:i,imgUrl:""})}):this.uploadApiService.uploadToCdnForFileScanExamOffline(s).subscribe(l=>{r(l&&1==l.success?{id:i,imgUrl:l.data?.url??""}:{id:i,imgUrl:""})}):r({id:i,imgUrl:""})}).catch(s=>{r({id:i,imgUrl:""})})})}drawImgOutToCanvas(e){return new Promise((i,a)=>{var r=document.createElement("canvas");try{r.width=e.naturalWidth,r.height=e.naturalHeight,r.getContext("2d")?.drawImage(e,0,0,r.width,r.height),r.toBlob(l=>{let d=(new Date).getTime();var h=this.commonService.getRandomNumber(1e6,9999999);const _=new File([l],`azo_file_scan_${h}_${d}.jpeg`,{type:"image/jpeg"});i(_)},"image/jpeg",.9)}catch(s){a(s)}})}replaceDigit(e,i){var a=e.toString(),r=6;for(i||(r=3);a.length<r;)a="0"+a;return a}convertStringToNumber(e){for(var i=e.split(","),a="",r=0,s=0;s<i.length;s++)""!=i[s]?a+=i[s]:r++;return""!=a&&r<=1?parseInt(a,10):0}getScanFilePos(e){var i={version:"2.0"};return i.resultFilledPos=this.convertScanResult(e),JSON.stringify(i)}convertScanResult(e){let i=new Q6;return i.examId=this.convertTableAnswerToSmallTableAnswer(e.examId),i.studentId=this.convertTableAnswerToSmallTableAnswer(e.studentId),i.answerTable=this.convertTableAnswerToSmallTableAnswer(e.answerTable),i.toBase64String()}convertTableAnswerToSmallTableAnswer(e){let i=new Ap;if(i.cols=e.cols,i.rows=e.rows,0==e.cols&&e.answers.length>0)return new Ap;i.radius=e.radius,i.answers=[];let a=e.answers;for(var r=0;r<a.length;r++){let c=a[r],d=new F6;var s=Math.floor(c.center.x),l=Math.floor(c.center.y);d.position=16*Math.floor(s/256)+Math.floor(l/256),d.x=s%256,d.y=l%256,d.filledCols=128*(c.filled?1:0)+r%e.cols,d.rows=Math.floor(r/e.cols),i.answers.push(d)}return i}existStudentCodeAndExamId(e,i){var a=0;if(0!=e&&0!=i)for(var r=0;r<this.listMapStudentCodeAndExamId.length;r++)if(this.listMapStudentCodeAndExamId[r].studentCode==e&&this.listMapStudentCodeAndExamId[r].examId==i){a++;break}return a>0}getScanAnswerContent(e){return e?e.split(","):[]}showScanFalseFiles(){this.sAztDialogService.open(r7,{width:"80vw",data:this.uploadFileScanError,restoreFocus:!1}).afterClosed().subscribe(i=>{})}showStudentList(){this.openSelectFile=!1,this.showStudentMarkEmit.emit(!0)}askBeforeCloseWindow(e){return!this.scanningStatus.isSaving||(e.returnValue=!1)}loadingFileJs(){var e=this;return this.loadingFileJS=!0,new Promise((i,a)=>{var r=[{source:this.cdnService.registerJsCdn("min.imgsdk"),name:"min.imgsdk"},{source:this.cdnService.registerJsCdn("min.imgsdk_loader"),name:"min.imgsdk_loader"}];this.commonService.loadScriptPromises(r).then((0,Ya.Z)(function*(){setTimeout(()=>{window.hasOwnProperty("imgsdk")?typeof imgsdk<"u"&&imgsdk?i(!0):a(new Error("lang_core_lib_not_load")):(e.countRetryLoadJS++,e.countRetryLoadJS>3?a(new Error("lang_core_lib_not_load")):i(e.loadingFileJs()))},1e3)})).catch(s=>{a(new Error("lang_core_lib_not_load"))})})}ngOnChanges(){this.openSelectFile&&this.selectFileClick()}ngOnInit(){this.openSelectFile&&this.selectFileClick(),this.isMobile=this.commonService.isMobileOrTable(),super.ngOnInit()}ngOnDestroy(){super.ngOnDestroy()}constructor(e,i,a,r,s,l){var c;super(),c=this,this.offlineExamResultService=e,this.userService=i,this.cdnService=a,this.uploadApiService=r,this.permissionService=s,this.sAztDialogService=l,this.openSelectFile=!1,this.loadedJs=!1,this.hasExamOffline=!1,this.tokenScan="",this.examOfflineMessage="",this.backToLink="",this.saveStudentMarkEmit=new t.vpe,this.showStudentMarkEmit=new t.vpe,this.firstSuccessResultId=new t.vpe,this.scanningStatus={isSaving:!1,isSavingDone:!1,isScanDone:!1,isScanning:!1,isSavingFail:!1},this.loadingFileJS=!1,this.isSelectedFile=!1,this.firstTimeScan=!0,this.isMobile=!1,this.queueUploadFileScan=[],this.uploadFileScanError=[],this.isProcessingFileScan=!1,this.doneFileScan=0,this.totalFileScan=0,this.queueSaveMarkObj=[],this.listMapStudentCodeAndExamId=[],this.isProcessingSaveMark=!1,this.doneFileScanMarked=0,this.totalFileScanMarked=0,this.saveSuccessCount=0,this.arrDataCallMarkObjs=[],this.invalidDataCallMarkObjs=[],this.countRetryLoadJS=0,this.isSaving=!1,this.moreThanMaxSaved=0,this.selectFileDirectory=function(){var d=(0,Ya.Z)(function*(h){let b=h.target.files;try{let q=0;var T=[];for(var P in b)if("length"!=P&&"item"!=P){var U=b[P];U.webkitRelativePath.indexOf("._")<0&&(U.webkitRelativePath.indexOf(".jpg")>0||U.webkitRelativePath.indexOf(".png")>0||U.webkitRelativePath.indexOf(".tiff")>0||U.webkitRelativePath.indexOf(".tif")>0||U.webkitRelativePath.indexOf(".jpeg")>0)?T.push(U):q++}!b||!b.length||q>=b?.length?c.showErrorSnack("lang_auto_thu_muc_co_anh_khong_dung_dinh_dang_ho_tro_jpg_png_tiff_va_jpeg_brackets_vui_long_kiem_tra_lai"):(T.forEach(B=>{c.getFileLocal(B)}),c.firstTimeScan=!1)}catch(q){console.log(q)}});return function(h){return d.apply(this,arguments)}}(),this.selectFile=function(){var d=(0,Ya.Z)(function*(h){let b=h.target.files;try{let q=0,B=!1;var T=[];for(var P in b)if("length"!=P&&"item"!=P){var U=b[P];U.name.indexOf("._")<0&&(U.name.indexOf(".jpg")>0||U.name.indexOf(".png")>0||U.name.indexOf(".tiff")>0||U.name.indexOf(".tif")>0||U.name.indexOf(".jpeg")>0)?T.push(U):((U.name.indexOf(".heic")>0||U.name.indexOf(".heif")>0)&&(B=!0),q++)}!b||q>=b?.length?c.showErrorSnack(B?"lang_auto_file_chon_co_heic_khong_dung_dinh_dang_ho_tro_jpg_png_tiff_va_jpeg_brackets_vui_long_kiem_tra_lai":"lang_auto_file_chon_co_anh_khong_dung_dinh_dang_ho_tro_jpg_png_tiff_va_jpeg_brackets_vui_long_kiem_tra_lai"):(T.forEach(W=>{c.getFileLocal(W)}),c.firstTimeScan=!1)}catch(q){console.log(q)}});return function(h){return d.apply(this,arguments)}}(),this.processSaveMarkObj=function(){var d=(0,Ya.Z)(function*(h){c.isProcessingSaveMark=!0;try{if(h.page){var _={offlineMixquestionHashId:c.convertStringToNumber(h.ExamId),studentCode:c.convertStringToNumber(h.StudentId),studentCodeLength:h.StudentId?h.StudentId.split(",").length-1:0,offlineMixquestionHashIdLength:h.ExamId?h.ExamId.split(",").length-1:0,images:{url:"",width:h.img_out.naturalWidth<720?720:h.img_out.naturalWidth,height:h.img_out.naturalHeight<1038?1038:h.img_out.naturalHeight},imagesData:{content:c.getScanAnswerContent(h.Answers),pos:c.getScanFilePos(h.page)},templateType:h.page.type,objScan:h,nameImagesData:"",rawStudentCode:0,rawOfflineMixQuestionHashId:0,isSuccess:!0};0==h.code&&!c.existStudentCodeAndExamId(_.studentCode??0,_.offlineMixquestionHashId??0)&&(c.listMapStudentCodeAndExamId.push({studentCode:_.studentCode??0,examId:_.offlineMixquestionHashId??0}),_.index=c.arrDataCallMarkObjs.length,c.arrDataCallMarkObjs.push(_)),c.doneFileScanMarked++}let x=c.totalFileScan-c.uploadFileScanError.length;c.totalFileScan<=us&&c.scanningStatus.isScanDone&&c.doneFileScanMarked>=x?(c.scanningStatus.isSaving=!0,c.getNamePosForStudent().then(()=>{c.callSaveMarkObj()})):c.doneFileScanMarked>=us?c.isSaving||(c.isSaving=!0,c.getNamePosForStudent().then(()=>{c.callSaveMarkObj(!0)})):x>us&&x%us>0&&c.doneFileScanMarked==x-us*c.moreThanMaxSaved&&c.moreThanMaxSaved==Math.floor(x/us)?(c.scanningStatus.isSaving=!0,c.getNamePosForStudent().then(()=>{c.callSaveMarkObj()})):(c.isSaving||(c.scanningStatus.isScanDone?c.processQueueSaveMarkObj():c.processQueueFileScan()),console.log("processQueueSaveMarkObj",c.totalFileScan+"|"+c.scanningStatus.isScanDone+"|"+c.doneFileScanMarked+"|"+(c.totalFileScan-c.uploadFileScanError.length)+"|"+c.uploadFileScanError.length,c.saveSuccessCount)),c.isProcessingSaveMark=!1}catch(x){throw x}});return function(h){return d.apply(this,arguments)}}(),this.form=new f.cw({fileScanner:new f.NI("",{nonNullable:!0}),fileScannerMobile:new f.NI("",{nonNullable:!0})})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(ya.$4),t.Y36(ga.U),t.Y36(Gn.E),t.Y36(po.W),t.Y36(S.j),t.Y36(Fi.C))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-file-scan-offline-exam-new"]],viewQuery:function(e,i){if(1&e&&(t.Gf(OI,5),t.Gf(EI,5)),2&e){let a;t.iGM(a=t.CRH())&&(i.fileInput=a.first),t.iGM(a=t.CRH())&&(i.fileInputMobile=a.first)}},hostBindings:function(e,i){1&e&&t.NdJ("beforeunload",function(r){return i.askBeforeCloseWindow(r)},!1,t.Jf7)},inputs:{openSelectFile:"openSelectFile",examObj:"examObj",loadedJs:"loadedJs",hasExamOffline:"hasExamOffline",tokenScan:"tokenScan",examOfflineMessage:"examOfflineMessage",backToLink:"backToLink"},outputs:{saveStudentMarkEmit:"saveStudentMarkEmit",showStudentMarkEmit:"showStudentMarkEmit",firstSuccessResultId:"firstSuccessResultId"},features:[t.qOj,t.TTD],decls:18,vars:9,consts:[[1,"absolute","h-full","w-full","bg-white","dark:bg-darkmode-600","top-0","left-0","z-50"],[1,"scan-file-body"],[1,"scan-file-content"],[3,"formGroup","hidden"],["type","file","formControlName","fileScanner","webkitdirectory","","multiple","",1,"form-control",3,"change"],["fileInput",""],["type","file","formControlName","fileScannerMobile","accept","image/*","multiple","",1,"form-control",3,"change"],["fileInputMobile",""],[1,"mx-auto","px-4"],[1,"grid","grid-cols-12","gap-2"],[1,"col-span-12","md:col-span-5","self-center"],["class","h5",4,"ngIf"],["class","flex items-center",4,"ngIf"],["class","items-center",4,"ngIf"],["class","col-span-12 md:col-span-7 self-center text-center",4,"ngIf"],["class","col-span-12 md:col-span-12 align-self-center text-center",4,"ngIf"],["class","col-span-12 md:col-span-7 self-center text-right",4,"ngIf"],[1,"h5"],[1,"flex","items-center"],[1,"h6"],["class","mb-1 mr-1","style","font-weight: 400;",4,"ngIf"],["style","font-size: 15px; font-weight: 550;",4,"ngIf"],["class","ml-2",4,"ngIf"],[1,"mb-1","mr-1",2,"font-weight","400"],[1,"w-4","h-4","inline-block"],[2,"font-size","15px","font-weight","550"],[1,"ml-2"],["azt-track-service","file-scan-offline-UDkBx5P8HR",1,"link__color","link__hover",3,"click"],[1,"mb-0",2,"font-size","14px","font-weight","400"],[2,"color","#DD0000","font-size","15px"],["azt-track-service","file-scan-offline-Y3xSQzwONg",1,"link__color","link__hover",3,"click"],[1,"items-center"],[1,"items-center",2,"max-height","150px","overflow-y","auto"],["class","mb-0","style","font-size: 14px; font-weight: 400",4,"ngFor","ngForOf"],[1,"col-span-12","md:col-span-7","self-center","text-center"],[1,"mb-1",2,"font-size","14px"],["class","mb-1","style","font-size: 14px;",4,"ngIf"],["azt-track-service","file-scan-offline-qiMkHN-W1j","mat-raised-button","","class","btn-custom-file-scan","style","text-transform: none; margin-left: auto!important; margin-right: auto!important;",3,"click",4,"ngIf"],["azt-track-service","file-scan-offline-rLjSHvBSxk","mat-raised-button","",1,"btn-custom-file-scan",2,"text-transform","none","margin-left","auto!important","margin-right","auto!important","margin-top","0.75rem!important",3,"click"],["azt-track-service","file-scan-offline-qiMkHN-W1j","mat-raised-button","",1,"btn-custom-file-scan",2,"text-transform","none","margin-left","auto!important","margin-right","auto!important",3,"click"],[1,"col-span-12","md:col-span-12","align-self-center","text-center"],[1,"flex","flex-col","md:flex-row","mx-auto",2,"justify-content","center"],["class","mt-3 mr-3",4,"ngIf"],[1,"mt-3",3,"ngClass"],["azt-track-service","file-scan-offline-QP5Xn4YbcL",1,"btn","btn-primary",2,"text-transform","none",3,"click"],[1,"mt-3","mr-3"],["azt-track-service","file-scan-offline-rjEiLoTin7",1,"btn","btn-primary",2,"text-transform","none",3,"click"],[1,"col-span-12","md:col-span-7","self-center","text-right"],[1,"inline-flex","w-full","items-center","justify-end"],["id","processFileScan"],["style","vertical-align: middle; margin-left: 30px; color: #2361ae",4,"ngIf"],["id","doneFileScan"],[2,"vertical-align","middle","margin-left","30px","color","#2361ae"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"form",3)(4,"input",4,5),t.NdJ("change",function(r){return i.selectFileDirectory(r)}),t.qZA(),t.TgZ(6,"input",6,7),t.NdJ("change",function(r){return i.selectFile(r)}),t.qZA()(),t.TgZ(8,"div",8)(9,"div",9)(10,"div",10),t.YNc(11,MI,3,3,"p",11),t.YNc(12,FI,10,8,"div",12),t.YNc(13,QI,10,8,"div",12),t.YNc(14,UI,6,4,"div",13),t.qZA(),t.YNc(15,JI,9,8,"div",14),t.YNc(16,YI,11,11,"div",15),t.YNc(17,WI,5,1,"div",16),t.qZA()()()()()),2&e&&(t.xp6(3),t.Q6J("formGroup",i.form)("hidden",!0),t.xp6(8),t.Q6J("ngIf",i.loadingFileJS),t.xp6(1),t.Q6J("ngIf",i.isSelectedFile),t.xp6(1),t.Q6J("ngIf",i.uploadFileScanError.length>0),t.xp6(1),t.Q6J("ngIf",i.invalidDataCallMarkObjs.length>0),t.xp6(1),t.Q6J("ngIf",(i.scanningStatus.isSavingDone||i.scanningStatus.isSavingFail)&&!i.scanningStatus.isSaving&&!i.firstTimeScan),t.xp6(1),t.Q6J("ngIf",i.firstTimeScan),t.xp6(1),t.Q6J("ngIf",i.isSelectedFile&&!i.scanningStatus.isSavingDone&&!i.scanningStatus.isSavingFail))},dependencies:[D.mk,D.sg,D.O5,vr.lW,Jo.Hw,f._Y,f.Fj,f.JJ,f.JL,f.sg,f.u,oo.M,oi.n,jt.JV],styles:[Wy]}),n})(),r7=(()=>{class n extends lo.e{constructor(e,i){super(i,e),this.dialogRef=e,this.data=i,this.isMobile=!1}getErrorCode(e){return"not_found_exam_id"==e?"lang_auto_khong_quet_duoc_ma_de":"not_found_student_code"==e?"lang_auto_khong_quet_duoc_so_bao_danh_hoc_sinh":"exist_exam_id_and_student_code"==e?"lang_auto_ma_de_ma_hoc_sinh_khong_ton_tai_dot":"process_scan_false"==e?"lang_auto_loi_trong_qua_tring_scan_khong_hien_thi_anh_ket_qua":e}processData(){this.data.forEach((e,i)=>{var a=document.getElementById("processFileScan"+i),r=document.getElementById("doneFileScan"+i);a&&r&&(e.img_in.width=.7*e.img_in.naturalWidth,e.img_in.style.height="auto",e.img_in.style.maxWidth="60%",e.img_in.classList.add("img-fluid"),a.appendChild(e.img_in),e.img_out&&(e.img_out.width=.7*e.img_in.naturalWidth,e.img_out.classList.add("img-fluid"),e.img_out.style.marginLeft=this.isMobile?"5px":"15px",e.img_out.style.display="inline",e.img_out.style.verticalAlign="middle"))})}onNoClick(){this.dialogRef.close(!1)}ngAfterViewInit(){var e=document.getElementById("processFileScan0");document.getElementById("doneFileScan0")&&e&&this.processData()}ngOnInit(){this.isMobile=this.commonService.isMobileOrTable(),super.ngOnInit()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36($.so),t.Y36($.WI))},n.\u0275cmp=t.Xpm({type:n,selectors:[["scan-false-dialog-new"]],features:[t.qOj],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["doneLoading",""],[1,"box","w-full"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5",2,"max-height","calc(100vh - 200px)","overflow-y","auto"],[1,"text-xl","font-medium","items-center","my-2"],["class","mt-2 mx-auto",4,"ngFor","ngForOf"],[1,"p-3","text-right"],["azt-track-service","file-scan-offline-QIrwUMpnlE",1,"btn","w-24","btn-secondary",3,"click"],[1,"mt-2","mx-auto"],["class","text-center",4,"ngIf"],[1,"text-center"],[1,"inline-flex","w-full","items-center"],[1,"w-full","border","border-slate-200/60","rounded","mx-auto",3,"id"],[3,"id"]],template:function(e,i){if(1&e&&(t.YNc(0,VI,1,0,"azt-loading-effect",0),t.YNc(1,e7,11,7,"ng-template",null,1,t.W1O)),2&e){const a=t.MAs(2);t.Q6J("ngIf",1==i.statusObj.loading)("ngIfElse",a)}},dependencies:[D.sg,D.O5,si.l,jt.JV],styles:[Wy]}),n})(),s7=(()=>{class n extends lo.e{constructor(e,i,a){super(a,i),this.permissionService=e,this.dialogRef=i,this.data=a}redirectToCreateOfflineTest(){this.permissionService.hasFullPermission("exam",this.data.examObj)?(this.commonService.myNavigationWithQueryString(`/admin/testbank/action-online-offline/${this.data.examObj?.categoryId?this.data.examObj?.categoryId:0}/${this.data.examObj?.hashId}`,"?backto="+encodeURIComponent(this.data.backToLink??"")),this.dialogRef.close(!1)):this.showErrorSnack("lang_auto_ban_khong_co_quyen_tao_bai_thi_offline_cho_de_thi_nay")}onNoClick(){this.dialogRef.close(!1)}ngOnInit(){super.ngOnInit()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(S.j),t.Y36($.so),t.Y36($.WI))},n.\u0275cmp=t.Xpm({type:n,selectors:[["no-exam-offline-dialog"]],features:[t.qOj],decls:19,vars:15,consts:[[1,"box","w-full"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5",2,"max-height","calc(100vh - 200px)","overflow-y","auto"],[1,"mt-1","text-center"],[1,"text-medium","font-bold"],[1,"mt-2"],["class","mt-1 text-center",4,"ngIf"],[1,"p-3","text-right"],["azt-track-service","file-scan-offline-tvKJ1-tcNU","mat-raised-button","","color","basic",3,"click"],[1,"h6",2,"font-size","13px","color","#ACACAC"],["azt-track-service","file-scan-offline-_MOe_cWXcO",1,"link__color","link__hover",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"p",4),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()(),t.TgZ(7,"div",5)(8,"p"),t._uU(9),t.ALo(10,"mytranslate"),t.qZA()(),t.YNc(11,n7,4,3,"div",6),t.ALo(12,"isDocxOnly"),t.YNc(13,i7,7,6,"div",6),t.ALo(14,"isPdfOnly"),t.TgZ(15,"div",7)(16,"button",8),t.NdJ("click",function(){return i.onNoClick()}),t._uU(17),t.ALo(18,"mytranslate"),t.qZA()()()()()),2&e&&(t.xp6(5),t.Oqu(t.lcZ(6,5,"lang_auto_cham_diem_thi_offline")),t.xp6(4),t.hij(" * ",t.lcZ(10,7,"lang_auto_note_use_case_file_scan_in_exam_offline")," "),t.xp6(2),t.Q6J("ngIf",t.lcZ(12,9,i.data.examObj)),t.xp6(2),t.Q6J("ngIf",t.lcZ(14,11,i.data.examObj)),t.xp6(4),t.Oqu(t.lcZ(18,13,"lang_auto_dong")))},dependencies:[D.O5,vr.lW,jt.JV,jt.mB,jt.FC],styles:[Wy]}),n})();var R6=M(88135);function l7(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij("\xa0",t.lcZ(2,1,"lang_auto_de_thi"),""))}function c7(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij("\xa0",t.lcZ(2,1,"lang_auto_bai_tap"),""))}function u7(n,o){if(1&n&&(t.TgZ(0,"span",20),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(e.data.examObj.name)}}function d7(n,o){if(1&n&&(t.TgZ(0,"span",20),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(e.data.homeworkObj.name)}}function m7(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_auto_de_thi")+" "))}function h7(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_auto_bai_tap")+" "))}function p7(n,o){if(1&n&&(t.TgZ(0,"span",20),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(e.data.examObj.name+" ")}}function _7(n,o){if(1&n&&(t.TgZ(0,"span",20),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Oqu(e.data.homeworkObj.name+" ")}}function f7(n,o){1&n&&(t.TgZ(0,"span",21),t._UZ(1,"azt-loading-ui"),t.qZA())}let Vy=(()=>{class n extends lo.e{confirmDelete(){this.data.examObj?this.waitDestroy(this.examService.apiExamDeleteObjIdGet(Number(this.data.examObj?.id)).subscribe(e=>{1==e.success?(this.dialogRef.close(!0),this.showSuccessSnack("lang_cms_delete_success")):(this.btnCloseDialog(),this.showErrorSnack(e.message??""))})):this.data.homeworkObj&&this.waitDestroy(this.homeworkService.apiHomeworkDeleteObjGet(this.data.homeworkObj.hashId??"").subscribe(e=>{1==e.success?(this.dialogRef.close(!0),this.showSuccessSnack("lang_cms_delete_success")):(this.btnCloseDialog(),this.showErrorSnack(e.message??""))}))}btnCloseDialog(){this.dialogRef.close()}ngOnInit(){super.ngOnInit()}constructor(e,i,a,r){super(r,a),this.examService=e,this.homeworkService=i,this.dialogRef=a,this.data=r}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Ke.Oe),t.Y36(rp.Lk),t.Y36($.so,8),t.Y36($.WI,8))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-delete-dialog"]],features:[t.qOj],decls:41,vars:25,consts:[[1,"box",2,"max-width","600px"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5"],[1,"text-md","flex"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-6","h-6","mr-2","text-danger","flex-none"],["d","M3 6h18"],["d","M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"],["d","M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"],["x1","10","y1","11","x2","10","y2","17"],["x1","14","y1","11","x2","14","y2","17"],[1,""],[2,"text-transform","lowercase"],[4,"ngIf"],["class","font-medium",4,"ngIf"],[1,"mt-2"],[1,"text-xs","text-slate-500","dark:text-slate-400"],[1,"p-3","text-right"],["azt-track-service","delete-dialog-K2F22n8QsM",1,"btn","btn-secondary","w-24","mr-2",3,"click"],["azt-track-service","delete-dialog-6IvYAh7dZl",1,"btn","w-32","btn-danger",3,"disabled","click"],["class","w-4 h-4 inline-block mr-2",4,"ngIf"],[1,"font-medium"],[1,"w-4","h-4","inline-block","mr-2"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),t.O4$(),t.TgZ(4,"svg",4),t._UZ(5,"path",5)(6,"path",6)(7,"path",7)(8,"line",8)(9,"line",9),t.qZA(),t.kcU(),t.TgZ(10,"div")(11,"span",10),t._uU(12),t.ALo(13,"mytranslate"),t.qZA(),t.TgZ(14,"span",11),t.YNc(15,l7,3,3,"span",12),t.YNc(16,c7,3,3,"span",12),t.qZA(),t._uU(17,": "),t.YNc(18,u7,2,1,"span",13),t.YNc(19,d7,2,1,"span",13),t.qZA()(),t.TgZ(20,"div",14)(21,"p",15)(22,"span"),t._uU(23),t.ALo(24,"mytranslate"),t.qZA(),t.TgZ(25,"span",11),t.YNc(26,m7,3,3,"span",12),t.YNc(27,h7,3,3,"span",12),t.qZA(),t.YNc(28,p7,2,1,"span",13),t.YNc(29,_7,2,1,"span",13),t.TgZ(30,"span"),t._uU(31),t.ALo(32,"mytranslate"),t.qZA()()()()(),t.TgZ(33,"div",16)(34,"button",17),t.NdJ("click",function(){return i.btnCloseDialog()}),t._uU(35),t.ALo(36,"mytranslate"),t.qZA(),t.TgZ(37,"button",18),t.NdJ("click",function(){return i.confirmDelete()}),t.YNc(38,f7,2,0,"span",19),t._uU(39),t.ALo(40,"mytranslate"),t.qZA()()()),2&e&&(t.xp6(12),t.Oqu(t.lcZ(13,15,"lang_auto_ban_co_chac_chan_muon_xoa")),t.xp6(3),t.Q6J("ngIf",i.data.examObj),t.xp6(1),t.Q6J("ngIf",i.data.homeworkObj),t.xp6(2),t.Q6J("ngIf",i.data.examObj),t.xp6(1),t.Q6J("ngIf",i.data.homeworkObj),t.xp6(4),t.Oqu(t.lcZ(24,17,"lang_auto_khi_xac_nhan")+", "),t.xp6(3),t.Q6J("ngIf",i.data.examObj),t.xp6(1),t.Q6J("ngIf",i.data.homeworkObj),t.xp6(1),t.Q6J("ngIf",i.data.examObj),t.xp6(1),t.Q6J("ngIf",i.data.homeworkObj),t.xp6(2),t.Oqu(t.lcZ(32,19,"lang_auto_se_duoc_chuyen_vao_thung_rac_ban_co_the_dot")),t.xp6(4),t.hij(" ",t.lcZ(36,21,"lang_cms_common_close_btn")," "),t.xp6(2),t.Q6J("disabled",i.statusObj.loading),t.xp6(1),t.Q6J("ngIf",i.statusObj.loading),t.xp6(1),t.hij(" ",t.lcZ(40,23,"lang_cms_common_confirm_btn")," "))},dependencies:[D.O5,oi.n,jt.JV],encapsulation:2}),n})();var Sp=M(96368),g7=M(92219),Vf=M(37783);function x7(n,o){if(1&n&&(t.O4$(),t.kcU(),t._UZ(0,"span",6),t.ALo(1,"translateToKeyParam"),t.ALo(2,"number")),2&n){const e=t.oxw(2);let i;t.Q6J("innerHTML",t.xi3(1,1,"lang_testbank_tested_price_to_take_test",null!==(i=t.lcZ(2,4,e.examPriceConfigObj.price))&&void 0!==i?i:""),t.oJD)}}function b7(n,o){if(1&n&&(t.O4$(),t.kcU(),t._UZ(0,"span",6),t.ALo(1,"translateToKeyParam"),t.ALo(2,"number")),2&n){const e=t.oxw(2);let i;t.Q6J("innerHTML",t.xi3(1,1,"lang_testbank_tested_price_to_show_explain",null!==(i=t.lcZ(2,4,e.examPriceConfigObj.price))&&void 0!==i?i:""),t.oJD)}}function v7(n,o){if(1&n&&(t.ynx(0),t.O4$(),t.TgZ(1,"svg",1),t._UZ(2,"path",2)(3,"path",3)(4,"path",4),t.qZA(),t.YNc(5,x7,3,6,"span",5),t.YNc(6,b7,3,6,"span",5),t.BQk()),2&n){const e=t.oxw();t.xp6(5),t.Q6J("ngIf","TAKE_TEST"==e.examPriceConfigObj.priceForAction),t.xp6(1),t.Q6J("ngIf","SHOW_EXPLAIN"==e.examPriceConfigObj.priceForAction)}}let y7=(()=>{class n extends St.Q{getData(){this.initStatusObj(),this.waitDestroy(this.documentConfigService.apiDocumentConfigGetExamConfigDataGet(this.examObj.hashId??"").subscribe(e=>{e.success?(this.examPriceConfigObj=e.data?.examPriceConfigObj,this.successStatusObj()):this.errorStatusObj(e.message??"",!0)}))}ngOnInit(){super.ngOnInit(),this.getData()}constructor(e){super(),this.documentConfigService=e}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Ke.Cq))},n.\u0275cmp=t.Xpm({type:n,selectors:[["testbank-exam-price-box"]],inputs:{examObj:"examObj"},features:[t.qOj],decls:1,vars:1,consts:[[4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-layers","w-4","h-4","mr-2"],["d","M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z"],["d","M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8"],["d","M12 18V6"],["class","text-sm",3,"innerHTML",4,"ngIf"],[1,"text-sm",3,"innerHTML"]],template:function(e,i){1&e&&t.YNc(0,v7,7,2,"ng-container",0),2&e&&t.Q6J("ngIf",i.examPriceConfigObj&&"NONE"!=i.examPriceConfigObj.priceForAction)},dependencies:[D.O5,D.JJ,jt.UE],encapsulation:2}),n})();function w7(n,o){if(1&n&&t._UZ(0,"testbank-exam-price-box",31),2&n){const e=t.oxw();t.Q6J("examObj",e.initData.examObj)}}const Xf=function(n){return{opacity:n}};function C7(n,o){if(1&n){const e=t.EpF();t.O4$(),t.kcU(),t.TgZ(0,"li",36),t.ALo(1,"viewPermission"),t.TgZ(2,"a",66),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.handleReturnOfflineShare(a.initData.examObj))}),t.O4$(),t.TgZ(3,"svg",67),t._UZ(4,"path",68)(5,"polyline",22)(6,"path",69)(7,"path",70),t.qZA(),t._uU(8),t.ALo(9,"mytranslate"),t.qZA()()}if(2&n){const e=t.oxw(2);t.Q6J("ngStyle",t.VKq(7,Xf,t.xi3(1,2,e.initData.examObj,"exam")?"1":"0.5")),t.xp6(8),t.hij(" ",t.lcZ(9,5,"lang_auto_tra_ket_qua_thi_offline")," ")}}function T7(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",71),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.openDialogExamConfig("whoAllow"))}),t.O4$(),t.TgZ(1,"svg",12),t._UZ(2,"path",72)(3,"path",73),t.qZA(),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()}2&n&&(t.xp6(4),t.hij(" ",t.lcZ(5,1,"lang_auto_sua")," "))}function k7(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",76)(1,"a",77,4),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().$implicit,r=t.oxw(3);return t.KtG(r.redirectToClassDetail(a))}),t._uU(3),t.qZA()()}if(2&n){const e=t.MAs(2),i=t.oxw().$implicit;t.xp6(1),t.s9C("matTooltip",null==i.classObj?null:i.classObj.name),t.Q6J("isDisabledTooltip",!1)("matTooltipDisabled",e.isDisabled),t.xp6(2),t.hij(" ",null==i.classObj?null:i.classObj.name," ")}}function A7(n,o){if(1&n&&(t.ynx(0),t.YNc(1,k7,4,4,"div",75),t.BQk()),2&n){const e=o.$implicit;let i;t.xp6(1),t.Q6J("ngIf",(null!==(i=null==e.classObj?null:e.classObj.id)&&void 0!==i?i:0)>0)}}function S7(n,o){if(1&n&&(t.ynx(0),t.YNc(1,A7,2,1,"ng-container",74),t.BQk()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.initData.studentsInClassResults)}}function O7(n,o){1&n&&(t.TgZ(0,"div",78)(1,"a",79),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"lang_auto_tat_ca_moi_nguoi")," "))}function E7(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",80),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.redirectToUpdateExam())}),t.O4$(),t.TgZ(1,"svg",12),t._UZ(2,"path",72)(3,"path",73),t.qZA(),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()}2&n&&(t.xp6(4),t.hij(" ",t.lcZ(5,1,"lang_auto_sua")," "))}function M7(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",81),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.openDialogExamDetail())}),t.O4$(),t.TgZ(1,"svg",82),t._UZ(2,"path",83)(3,"polyline",22)(4,"line",84)(5,"line",85)(6,"line",86),t.qZA(),t._uU(7),t.ALo(8,"mytranslate"),t.qZA()}2&n&&(t.xp6(7),t.hij(" ",t.lcZ(8,1,"lang_auto_xem_chi_tiet")," "))}function I7(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",32)(1,"h3",33),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"div",34)(5,"ul",35)(6,"li",36),t.ALo(7,"editPermission"),t.TgZ(8,"a",37),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.redirectToActionOnlOff())}),t.O4$(),t.TgZ(9,"svg",12),t._UZ(10,"path",38)(11,"circle",39),t.qZA(),t._uU(12),t.ALo(13,"mytranslate"),t.qZA()(),t.kcU(),t.TgZ(14,"li",36),t.ALo(15,"statisticalPermission"),t.TgZ(16,"a",40),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.redirectToStatistical())}),t.O4$(),t.TgZ(17,"svg",41),t._UZ(18,"path",42)(19,"path",43),t.qZA(),t._uU(20),t.ALo(21,"mytranslate"),t.qZA()(),t.kcU(),t.TgZ(22,"li",36),t.ALo(23,"viewPermission"),t.TgZ(24,"a",44),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.openVideoMonitor())}),t.O4$(),t.TgZ(25,"svg",12),t._UZ(26,"circle",45)(27,"circle",46)(28,"path",47)(29,"path",48),t.qZA(),t._uU(30),t.ALo(31,"mytranslate"),t.qZA()(),t.YNc(32,C7,10,9,"li",49),t.kcU(),t.TgZ(33,"li",36),t.ALo(34,"deletePermission"),t.TgZ(35,"a",50),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.openDeleteExam())}),t.O4$(),t.TgZ(36,"svg",12),t._UZ(37,"path",51)(38,"path",52)(39,"path",53)(40,"line",54)(41,"line",55),t.qZA(),t._uU(42),t.ALo(43,"mytranslate"),t.qZA()()()()(),t.kcU(),t.TgZ(44,"div",56)(45,"div",57)(46,"h3",33),t._uU(47),t.ALo(48,"mytranslate"),t.qZA(),t.YNc(49,T7,6,3,"button",58),t.ALo(50,"editPermission"),t.ALo(51,"configPermission"),t.qZA(),t.TgZ(52,"div",59),t.YNc(53,S7,2,1,"ng-container",60),t.YNc(54,O7,4,3,"ng-template",null,61,t.W1O),t.qZA()(),t.TgZ(56,"div",62)(57,"div",57)(58,"h3",33),t._uU(59),t.ALo(60,"mytranslate"),t.qZA(),t.YNc(61,E7,6,3,"button",63),t.ALo(62,"editPermission"),t.qZA(),t.TgZ(63,"div",64),t.YNc(64,M7,9,3,"button",65),t.ALo(65,"viewPermission"),t.qZA()()}if(2&n){const e=t.MAs(55),i=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,17,"lang_auto_menu")," "),t.xp6(4),t.Q6J("ngStyle",t.VKq(55,Xf,t.xi3(7,19,i.initData.examObj,"exam")?"1":"0.5")),t.xp6(6),t.hij(" ",t.lcZ(13,22,"lang_auto_cai_dat")," "),t.xp6(2),t.Q6J("ngStyle",t.VKq(57,Xf,t.xi3(15,24,i.initData.examObj,"exam")?"1":"0.5")),t.xp6(6),t.hij(" ",t.lcZ(21,27,"lang_auto_thong_ke")," "),t.xp6(2),t.Q6J("ngStyle",t.VKq(59,Xf,t.xi3(23,29,i.initData.examObj,"exam")?"1":"0.5")),t.xp6(8),t.hij(" ",t.lcZ(31,32,"lang_auto_giam_sat_nang_cao")," "),t.xp6(2),t.Q6J("ngIf",!i.isNotTestedYet),t.xp6(1),t.Q6J("ngStyle",t.VKq(61,Xf,t.xi3(34,34,i.initData.examObj,"exam")?"1":"0.5")),t.xp6(9),t.hij(" ",t.lcZ(43,37,"lang_auto_xoa")," "),t.xp6(5),t.hij(" ",t.lcZ(48,39,"lang_auto_giao_cho")," "),t.xp6(2),t.Q6J("ngIf",t.xi3(50,41,i.initData.examObj,"exam")||t.xi3(51,44,i.initData.examObj,"exam")),t.xp6(4),t.Q6J("ngIf",2==(null==i.initData.examObj?null:i.initData.examObj.whoAllow)||3==(null==i.initData.examObj?null:i.initData.examObj.whoAllow))("ngIfElse",e),t.xp6(6),t.hij(" ",t.lcZ(60,47,"lang_auto_noi_dung")," "),t.xp6(2),t.Q6J("ngIf",t.xi3(62,49,i.initData.examObj,"exam")),t.xp6(3),t.Q6J("ngIf",t.xi3(65,52,i.initData.examObj,"exam"))}}function L7(n,o){1&n&&(t.TgZ(0,"span"),t.O4$(),t.TgZ(1,"svg",87),t._UZ(2,"polyline",88),t.qZA()())}function P7(n,o){1&n&&(t.TgZ(0,"span"),t.O4$(),t.TgZ(1,"svg",87),t._UZ(2,"polyline",89),t.qZA()())}let N7=(()=>{class n extends St.Q{toggleShowActions(){this.isShowActions=!this.isShowActions}copyLinkToClipboard(){return this.linkExam}showCopySuccess(){this.showSuccessSnack("lang_auto_sao_chep_thanh_cong")}openDialogWaring(e){this.commonService.getTranslate(e).subscribe(i=>{this.sAztDialogService.open(Sp.C,{width:"600px",data:{isShow:!0,content:i},restoreFocus:!1})})}openDeleteExam(){this.permissionService.hasDeletePermission("exam",this.initData.examObj)?this.sAztDialogService.open(Vy,{data:{examObj:this.initData.examObj,isShow:!0},restoreFocus:!1}).afterClosed().subscribe(r=>{r&&this.commonService.myNavigation("/admin/testbank/document-management/0/0/1")}):this.openDialogWaring("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay")}openDialogExamConfig(e){this.sAztDialogService.open(R6.Y,{width:"900px",data:{hashId:this.initData.examObj?.hashId,examStudents:this.examStudents},restoreFocus:!1}).afterClosed().subscribe(a=>{a&&(this.initData.examObj={...a},this.reloadApi.emit())})}openDialogExamDetail(){if(this.permissionService.hasViewPermission("exam",this.initData.examObj)){var i={obj:{...this.initData.examObj},curCateId:this.initData.examObj?.categoryId?this.initData.examObj?.categoryId:0,isOnLib:0,isShow:!0};this.sAztDialogService.open(Hf.H,{width:"800px",maxWidth:"90vw",enterAnimationDuration:"0ms",exitAnimationDuration:"0ms",data:i,restoreFocus:!1}).afterClosed().subscribe(r=>{})}else this.openDialogWaring("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay")}handleReturnOfflineShare(e){e?this.permissionService.hasViewPermission("exam",e)?this.sAztDialogService.open(Fy.h,{width:"600px",data:{examHashId:e.hashId,useDialog:!0},restoreFocus:!1}):this.showErrorSnack("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay"):this.showErrorSnack("lang_core_invalid_data")}redirectToActionOnlOff(){if(this.permissionService.hasEditPermission("exam",this.initData.examObj)){let i=`/admin/testbank/exam-results-list/${this.initData.examObj?.categoryId??0}/${this.initData.examObj?.id}/0`,a=this.commonService.getMyQueryParam("backto")??"";a&&(i=`/admin/testbank/exam-results-list/${this.initData.examObj?.categoryId??0}/${this.initData.examObj?.id}/0?backto=`+encodeURIComponent(a)),this.myNavigationWithQueryString(`/admin/testbank/action-online-offline/${this.initData.examObj?.categoryId??0}/${this.initData.examObj?.hashId}`,`?backto=${encodeURIComponent(i)}`)}else this.openDialogWaring("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay")}redirectConfigExamOnline(){if(this.permissionService.hasEditPermission("exam",this.initData.examObj)){let i=`/admin/testbank/exam-results-list/${this.initData.examObj?.categoryId??0}/${this.initData.examObj?.id}/0`,a=this.commonService.getMyQueryParam("backto")??"";a&&(i=`/admin/testbank/exam-results-list/${this.initData.examObj?.categoryId??0}/${this.initData.examObj?.id}/0?backto=`+encodeURIComponent(a)),this.myNavigationWithQueryString(`/admin/testbank/config-exam-online/${this.initData.examObj?.categoryId??0}/${this.initData.examObj?.hashId}`,`?backto=${encodeURIComponent(i)}`)}else this.openDialogWaring("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay")}redirectToStatistical(){if(this.permissionService.hasStatisticalPermission("exam",this.initData.examObj)){let i=`/admin/testbank/exam-results-list/${this.initData.examObj?.categoryId??0}/${this.initData.examObj?.id}/0`,a=this.commonService.getMyQueryParam("backto")??"";a&&(i=`/admin/testbank/exam-results-list/${this.initData.examObj?.categoryId??0}/${this.initData.examObj?.id}/0?backto=`+encodeURIComponent(a)),this.commonService.myNavigationWithQueryString(`/admin/testbank/statistic/${this.initData.examObj?.categoryId?this.initData.examObj.categoryId:0}/${this.initData.examObj?.id}`,"?backto="+encodeURIComponent(i))}else this.openDialogWaring("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay")}openVideoMonitor(){if(3!=this.initData.examObj?.autoMonitor?this.permissionService.hasFullPermission("exam",this.initData.examObj)&&this.permissionService.hasViewPermission("exam",this.initData.examObj)?this.openDialogWaring("lang_auto_chua_bat_giam_sat_moi"):this.openDialogWaring("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay"):-1==this.currentSelectedClassroomId&&this.openDialogWaring("lang_auto_khong_giam_sat_lop_tu_do"),3==this.initData.examObj?.autoMonitor&&this.permissionService.hasViewPermission("exam",this.initData.examObj)&&-1!=this.currentSelectedClassroomId&&this.monitorService.checkValidForSetUpMonitor()){var i=this.userService.getUserObj();typeof aztExam<"u"&&aztExam&&(aztExam.ver=this.monitorService.getMNoteVer(),aztExam.showMonitorTeacher)&&aztExam.showMonitorTeacher({user:{token:i.rememberToken,userid:i.id,username:i.fullName},config:{domainApi:Ce.N.auto_testbank_base_api+"/api/",urlGetPublicForLive:"S3space/get_public_upload_url_for_live",urlGetListFileForLive:"S3space/get_list_files_for_live",urlGetTokenForLive:"S3space/get_token_for_live",urlExamResultGetLastExamResultOfStudentId:"ExamLivestream/GetLastExamResultOfStudentId"},roomid:this.initData.examObj?.hashId,examid:this.initData.examObj?.id,userlist:this.userList,examconfig:this.initData.examObj,firebaseApp:this.fireStoreService,filetypeStr:this.initData.fileTypeStr})}}redirectToClassDetail(e){let i=`/admin/testbank/exam-results-list/${this.initData.examObj?.categoryId??0}/${this.initData.examObj?.id}/0`,a=this.commonService.getMyQueryParam("backto")??"";a&&(i=`/admin/testbank/exam-results-list/${this.initData.examObj?.categoryId??0}/${this.initData.examObj?.id}/0?backto=`+encodeURIComponent(a)),this.myNavigationWithQueryString(`/admin/student/classroom-details/${e.classObj?.id}/0`,`?backto=${i}`)}toggleFullDescription(){this.checkFullDescription=!this.checkFullDescription}redirectToUpdateExam(){let e=`/admin/testbank/exam-results-list/${this.initData.examObj?.categoryId??0}/${this.initData.examObj?.id}/0`,i=this.commonService.getMyQueryParam("backto")??"";i&&(e=`/admin/testbank/exam-results-list/${this.initData.examObj?.categoryId??0}/${this.initData.examObj?.id}/0?backto=`+encodeURIComponent(i)),this.myNavigationWithQueryString(`/admin/testbank/update-exam/${this.initData.examObj?.categoryId??0}/${this.initData.examObj?.id}`,`?backto=${encodeURIComponent(e)}`)}constructor(e,i,a,r,s){super(),this.sAztDialogService=e,this.permissionService=i,this.monitorService=a,this.userService=r,this.fireStoreService=s,this.initData={studentsNotInClassResults:[]},this.userList=[],this.isNotTestedYet=!1,this.currentSelectedClassroomId=-1,this.examStudents=[],this.reloadApi=new t.vpe,this.isShowActions=!0,this.linkExam="",this.nextPage="",this.loadingObj={},this.allQuestionObjs=[],this.dataMixQuestionObjs=[],this.offlineMixQuestionObjs=[],this.isLoadingLib=!1,this.checkFullDescription=!1}ngOnInit(){let e=this.commonService.getCurrentDomain();this.linkExam=`${e}/de-thi/${this.initData.examObj?.hashId}`,super.ngOnInit()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Fi.C),t.Y36(S.j),t.Y36(j6.G),t.Y36(ga.U),t.Y36(g7.j))},n.\u0275cmp=t.Xpm({type:n,selectors:[["menu-online-test"]],inputs:{initData:"initData",userList:"userList",isNotTestedYet:"isNotTestedYet",currentSelectedClassroomId:"currentSelectedClassroomId",examStudents:"examStudents"},outputs:{reloadApi:"reloadApi"},features:[t.qOj],decls:49,vars:32,consts:[[1,"box","p-3",2,"min-height","80vh"],[1,"document-info"],[1,"flex","md:items-center","flex-col","md:flex-row"],[1,"text-md","font-medium","truncate","mr-auto",3,"matTooltip","isDisabledTooltip","matTooltipDisabled"],["c","isDisabled"],[1,"w-auto","flex",2,"min-width","135px"],["azt-track-service","menu-online-test-e8RvVr3HPMz",1,"btn","btn-sm","btn-outline-primary",3,"cdkCopyToClipboard","click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-file","w-4","h-4","mr-2"],["x","9","y","9","width","13","height","13","rx","2","ry","2"],["d","M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"],[1,"pl-2","ml-2",3,"fileName","linkUrl"],[1,"flex","items-center","mt-2"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","mr-2"],["x","3","y","4","width","18","height","18","rx","2","ry","2"],["x1","16","y1","2","x2","16","y2","6"],["x1","8","y1","2","x2","8","y2","6"],["x1","3","y1","10","x2","21","y2","10"],[1,"text-sm"],["d","M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"],["cx","12","cy","7","r","4"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-layers","w-4","h-4","mr-2"],["d","M4 13.5V4a2 2 0 0 1 2-2h8.5L20 7.5V20a2 2 0 0 1-2 2h-5.5"],["points","14 2 14 8 20 8"],["d","M10.42 12.61a2.1 2.1 0 1 1 2.97 2.97L7.95 21 4 22l.99-3.95 5.43-5.44Z"],[3,"examObj",4,"ngIf"],[1,"flex","mt-2"],[3,"objectCodeType","objectCode","objectId","examWithPermissionObj"],[3,"ngIf"],[1,"mt-2","text-center"],["azt-track-service","menu-online-test-JuzsQFkbn-n",1,"btn","btn-sm","btn-transparent","btn-outline-secondary",3,"click"],[4,"ngIf"],[3,"examObj"],[1,"azt-document-menu","mt-4"],[1,"text-md","font-bold"],[1,"dropdown-menu","show","relative","w-full","mt-2"],[1,"dropdown-content","bg-slate-100","dark:bg-darkmode-600"],[3,"ngStyle"],["azt-track-service","menu-online-test-gvg0oBjKoz0",1,"dropdown-item",3,"click"],["d","M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"],["cx","12","cy","12","r","3"],["azt-track-service","menu-online-test--xkt2Oho69C",1,"dropdown-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","mr-2","lucide"],["d","M3 3v18h18"],["d","m19 9-5 5-4-4-3 3"],["azt-track-service","menu-online-test-SyHOcHV1qRi",1,"dropdown-item",3,"click"],["cx","12","cy","10","r","8"],["cx","12","cy","10","r","3"],["d","M7 22h10"],["d","M12 22v-4"],[3,"ngStyle",4,"ngIf"],["azt-track-service","menu-online-test-353h1DUlYNc",1,"dropdown-item","text-danger",3,"click"],["d","M3 6h18"],["d","M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"],["d","M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"],["x1","10","y1","11","x2","10","y2","17"],["x1","14","y1","11","x2","14","y2","17"],[1,"azt-document-who","mt-4"],[1,"flex","items-center"],["azt-track-service","menu-online-test-B-MAROi1YQ-","class","btn btn-outline-primary btn-sm btn-transparent ml-auto",3,"click",4,"ngIf"],[1,"grid","grid-cols-12","gap-3","rounded-md","mt-1"],[4,"ngIf","ngIfElse"],["noClassroom",""],[1,"azt-document-content","mt-4"],["azt-track-service","menu-online-test-IOoMXZJczdx","class","btn btn-outline-primary btn-sm btn-transparent ml-auto",3,"click",4,"ngIf"],[1,"mt-2"],["azt-track-service","menu-online-test-WA9SAv4z5tk","class","btn-text-primary font-medium",3,"click",4,"ngIf"],["azt-track-service","menu-online-test-A5ZKlgHQbp",1,"dropdown-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide","mr-2"],["d","M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4"],["d","M2 15h10"],["d","m9 18 3-3-3-3"],["azt-track-service","menu-online-test-B-MAROi1YQ-",1,"btn","btn-outline-primary","btn-sm","btn-transparent","ml-auto",3,"click"],["d","M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"],["d","M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"],[4,"ngFor","ngForOf"],["class","col-span-6 md:col-span-4 2lg:col-span-3",4,"ngIf"],[1,"col-span-6","md:col-span-4","2lg:col-span-3"],["azt-track-service","menu-online-test-z2H-5NP7SkD",1,"btn","btn-outline-secondary","block","truncate","w-full",3,"matTooltip","isDisabledTooltip","matTooltipDisabled","click"],[1,"col-span-12","md:col-span-6"],[1,"btn","btn-outline-secondary","block","cursor-default","w-full"],["azt-track-service","menu-online-test-IOoMXZJczdx",1,"btn","btn-outline-primary","btn-sm","btn-transparent","ml-auto",3,"click"],["azt-track-service","menu-online-test-WA9SAv4z5tk",1,"btn-text-primary","font-medium",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","mr-2"],["d","M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],["x1","16","y1","13","x2","8","y2","13"],["x1","16","y1","17","x2","8","y2","17"],["x1","10","y1","9","x2","8","y2","9"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-5","h-5"],["points","18 15 12 9 6 15"],["points","6 9 12 15 18 9"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3,4),t._uU(5),t.qZA(),t.TgZ(6,"div",5)(7,"button",6),t.NdJ("click",function(){return i.showCopySuccess()}),t.O4$(),t.TgZ(8,"svg",7),t._UZ(9,"rect",8)(10,"path",9),t.qZA(),t._uU(11),t.ALo(12,"mytranslate"),t.qZA(),t.kcU(),t._UZ(13,"azt-download-qr-code",10),t.qZA()(),t.TgZ(14,"div",11),t.O4$(),t.TgZ(15,"svg",12),t._UZ(16,"rect",13)(17,"line",14)(18,"line",15)(19,"line",16),t.qZA(),t.kcU(),t.TgZ(20,"span",17),t._uU(21),t.ALo(22,"mytranslate"),t.ALo(23,"formatFullDateTimeWithoutSecondByUserUnitPipe"),t.qZA()(),t.TgZ(24,"div",11),t.O4$(),t.TgZ(25,"svg",12),t._UZ(26,"path",18)(27,"circle",19),t.qZA(),t.kcU(),t.TgZ(28,"span",17),t._uU(29),t.ALo(30,"mytranslate"),t.qZA()(),t.TgZ(31,"div",11),t.O4$(),t.TgZ(32,"svg",20),t._UZ(33,"path",21)(34,"polyline",22)(35,"path",23),t.qZA(),t.kcU(),t.TgZ(36,"span",17),t._uU(37),t.ALo(38,"mytranslate"),t.ALo(39,"number"),t.qZA()(),t.TgZ(40,"div",11),t.YNc(41,w7,1,1,"testbank-exam-price-box",24),t.qZA(),t.TgZ(42,"div",25),t._UZ(43,"azt-share",26),t.qZA()(),t.YNc(44,I7,66,63,"ng-template",27),t.TgZ(45,"div",28)(46,"button",29),t.NdJ("click",function(){return i.toggleShowActions()}),t.YNc(47,L7,3,0,"span",30),t.YNc(48,P7,3,0,"span",30),t.qZA()()()),2&e){const a=t.MAs(4);let r;t.xp6(3),t.s9C("matTooltip",null==i.initData.examObj?null:i.initData.examObj.name),t.s9C("matTooltip",null==i.initData.examObj?null:i.initData.examObj.name),t.Q6J("isDisabledTooltip",!1)("matTooltipDisabled",a.isDisabled),t.xp6(2),t.hij(" ",null==i.initData.examObj?null:i.initData.examObj.name," "),t.xp6(2),t.Q6J("cdkCopyToClipboard",i.copyLinkToClipboard()),t.xp6(4),t.hij(" ",t.lcZ(12,20,"lang_auto_copy_link")," "),t.xp6(2),t.Q6J("fileName","azota_exam_qr_code_"+(null==i.initData.examObj?null:i.initData.examObj.hashId))("linkUrl",i.copyLinkToClipboard()),t.xp6(8),t.hij(" ",t.lcZ(22,22,"lang_testbank_tested_list_date_create")+": "+t.lcZ(23,24,null==i.initData.examObj?null:i.initData.examObj.createdAt)," "),t.xp6(8),t.hij(" ",t.lcZ(30,26,"lang_auto_nguoi_tao")+": "+(null==i.initData.examCreatorObj?null:i.initData.examCreatorObj.fullName)," "),t.xp6(8),t.hij(" ",t.lcZ(38,28,"lang_testbank_tested_list_number_quizzes")+": "+(i.initData.totalAttended?i.initData.totalAttended:t.lcZ(39,30,0))," "),t.xp6(4),t.Q6J("ngIf",i.initData.examObj),t.xp6(2),t.Q6J("objectCodeType",3)("objectCode","EXAM")("objectId",null!==(r=null==i.initData.examObj?null:i.initData.examObj.id)&&void 0!==r?r:0)("examWithPermissionObj",i.initData.examObj),t.xp6(1),t.Q6J("ngIf",i.isShowActions),t.xp6(3),t.Q6J("ngIf",i.isShowActions),t.xp6(1),t.Q6J("ngIf",!i.isShowActions)}},dependencies:[D.sg,D.O5,D.PC,Cp.i3,Mi.gM,Vf.W,Jl.Q,z0.y,y7,D.JJ,jt.JV,jt.Pf,jt.Z_,jt.J7,jt.PA,jt.CP,jt.$n],encapsulation:2}),n})();const Xy=function(n){return{"btn-primary":n}};function Z7(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",14),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.changeViewHashId(r))}),t._uU(2),t.ALo(3,"formatOfflineExamHashIdToNumber"),t.qZA(),t.BQk()}if(2&n){const e=o.$implicit,i=t.oxw();t.xp6(1),t.Q6J("ngClass",t.VKq(4,Xy,(null==e?null:e.offlineMixQuestionHashId)==i.curOfflineMixQuestionObj.offlineMixQuestionHashId)),t.xp6(1),t.hij(" ",t.lcZ(3,2,null==e?null:e.offlineMixQuestionHashId)," ")}}function D7(n,o){1&n&&(t.TgZ(0,"span",20),t._uU(1),t.ALo(2,"mytranslate"),t.ALo(3,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"azt_lang_sugg_part_cc")+" "+t.lcZ(3,3,"azt_lang_sugg_type_multiple_choice")," "))}function j7(n,o){1&n&&(t.TgZ(0,"span",20),t._uU(1),t.ALo(2,"mytranslate"),t.ALo(3,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"azt_lang_sugg_part_cc")+" "+t.lcZ(3,3,"lang_testbank_true_false_quiz")," "))}function q7(n,o){1&n&&(t.TgZ(0,"span",20),t._uU(1),t.ALo(2,"mytranslate"),t.ALo(3,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"azt_lang_sugg_part_cc")+" "+t.lcZ(3,3,"lang_testbank_fill_number")," "))}function F7(n,o){1&n&&(t.TgZ(0,"span",20),t._uU(1),t.ALo(2,"mytranslate"),t.ALo(3,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"azt_lang_sugg_part_cc")+" "+t.lcZ(3,3,"azt_lang_sugg_type_essay")," "))}function Q7(n,o){if(1&n&&(t.TgZ(0,"div",23)(1,"button",24),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&n){const e=o.$implicit,i=o.index;t.xp6(2),t.hij(" ",i+1+"-"+t.lcZ(3,1,null==e?null:e.answer)," ")}}function R7(n,o){if(1&n&&(t.TgZ(0,"div",21),t.YNc(1,Q7,4,3,"div",22),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",e.offlineAnswerList)}}function U7(n,o){if(1&n&&(t.TgZ(0,"div",32)(1,"span",33),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"button",34),t._uU(5),t.ALo(6,"mytranslate"),t.qZA(),t.TgZ(7,"button",35),t._uU(8),t.ALo(9,"mytranslate"),t.qZA()()),2&n){const e=o.$implicit,i=o.index,a=t.oxw().$implicit;t.xp6(2),t.Oqu(t.lcZ(3,5,e.labelSubQuestion)+")"),t.xp6(2),t.Q6J("ngClass",t.VKq(11,Xy,a.answer.split("")[i]===e.labelTrue)),t.xp6(1),t.hij(" ",t.lcZ(6,7,"lang_auto_dung")," "),t.xp6(2),t.Q6J("ngClass",t.VKq(13,Xy,a.answer.split("")[i]===e.labelFalse)),t.xp6(1),t.hij(" ",t.lcZ(9,9,"lang_auto_sai")," ")}}function B7(n,o){if(1&n&&(t.TgZ(0,"div",27)(1,"div",28)(2,"div",29),t._uU(3),t.ALo(4,"mytranslate"),t.qZA(),t.TgZ(5,"div",30),t.YNc(6,U7,10,15,"div",31),t.qZA()()()),2&n){const e=o.index,i=t.oxw(2).$implicit,a=t.oxw();t.xp6(3),t.hij(" ",t.lcZ(4,2,"lang_auto_cau")+" "+(e+1+(a.data.resetQuestionIndex?0:i.startLabelIndex))," "),t.xp6(3),t.Q6J("ngForOf",a.offlineExamPartService.answerTrueFalseMap)}}function z7(n,o){if(1&n&&(t.TgZ(0,"div",25),t.YNc(1,B7,7,4,"div",26),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",e.offlineAnswerList)}}function J7(n,o){if(1&n&&(t.TgZ(0,"div")(1,"div",29),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"button",24),t._uU(5),t.qZA()()),2&n){const e=t.oxw(),i=e.index,a=e.$implicit,r=t.oxw(2).$implicit,s=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,2,"lang_auto_cau")+" "+(i+1+(s.data.resetQuestionIndex?0:r.startLabelIndex))," "),t.xp6(3),t.hij(" ",a.answer," ")}}function H7(n,o){if(1&n&&(t.TgZ(0,"div",37),t.YNc(1,J7,6,4,"div",38),t.qZA()),2&n){const e=t.oxw(2).$implicit,i=t.oxw();t.xp6(1),t.Q6J("ngIf",e.answerPartType===i.offlineAnswerType.fill)}}function G7(n,o){if(1&n&&(t.TgZ(0,"div",25),t.YNc(1,H7,2,1,"div",36),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",e.offlineAnswerList)}}function $7(n,o){if(1&n&&(t.TgZ(0,"div")(1,"div",29),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"button",24),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()()),2&n){const e=t.oxw().index,i=t.oxw(2).$implicit,a=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,2,"lang_auto_cau")+" "+(e+1+(a.data.resetQuestionIndex?0:i.startLabelIndex))," "),t.xp6(3),t.hij(" ",t.lcZ(6,4,"lang_core_essay_question")," ")}}function Y7(n,o){if(1&n&&(t.TgZ(0,"div",37),t.YNc(1,$7,7,6,"div",38),t.qZA()),2&n){const e=t.oxw(2).$implicit,i=t.oxw();t.xp6(1),t.Q6J("ngIf",e.answerPartType===i.offlineAnswerType.essay)}}function K7(n,o){if(1&n&&(t.TgZ(0,"div",25),t.YNc(1,Y7,2,1,"div",36),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",e.offlineAnswerList)}}function W7(n,o){if(1&n&&(t.TgZ(0,"div")(1,"div",15),t.YNc(2,D7,4,5,"span",16),t.YNc(3,j7,4,5,"span",16),t.YNc(4,q7,4,5,"span",16),t.YNc(5,F7,4,5,"span",16),t.qZA(),t.TgZ(6,"div",17),t.YNc(7,R7,2,1,"div",18),t.YNc(8,z7,2,1,"div",19),t.YNc(9,G7,2,1,"div",19),t.YNc(10,K7,2,1,"div",19),t.qZA()()),2&n){const e=o.$implicit,i=t.oxw();t.xp6(2),t.Q6J("ngIf",e.answerPartType===i.offlineAnswerType.multipleChoice),t.xp6(1),t.Q6J("ngIf",e.answerPartType===i.offlineAnswerType.trueFalse),t.xp6(1),t.Q6J("ngIf",e.answerPartType===i.offlineAnswerType.fill),t.xp6(1),t.Q6J("ngIf",e.answerPartType===i.offlineAnswerType.essay),t.xp6(2),t.Q6J("ngIf",e.answerPartType===i.offlineAnswerType.multipleChoice),t.xp6(1),t.Q6J("ngIf",e.answerPartType===i.offlineAnswerType.trueFalse),t.xp6(1),t.Q6J("ngIf",e.answerPartType===i.offlineAnswerType.fill),t.xp6(1),t.Q6J("ngIf",e.answerPartType===i.offlineAnswerType.essay)}}function V7(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",39)(1,"button",40),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.closeDialog())}),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()}2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"lang_auto_dong")," "))}const X7=function(){return[]};let U6=(()=>{class n extends lo.e{closeDialog(){this.isDialog&&this.dialogRef.close()}changeViewHashId(e){this.curOfflineMixQuestionObj=e,this.checkTotalQuestion()}checkTotalQuestion(){this.totalQuestionAnswer=this.curOfflineMixQuestionObj.offlineQuestionObjs?.length??0}updateCodeExam(){let e=this.commonService.getMyQueryParam("backto")??"";e&&e.includes("shareType")&&(this.backToLink=this.backToLink+"?backto="+encodeURIComponent(e)),this.myNavigationWithQueryString(`/admin/testbank/update-offline-exam-code/${this.examObj.categoryId??0}/${this.examObj.hashId}/${this.curOfflineMixQuestionObj.offlineMixQuestionId}`,`?backto=${encodeURIComponent(this.backToLink)}`),this.closeDialog()}ngOnInit(){this.checkTotalQuestion()}processData(e){const i={},a=[];e.offlineQuestionObjs.forEach(r=>{let s=i[r.answerType??0];s||(s={startLabelIndex:0,answerPartType:r.answerType??0,offlineAnswerList:[]},i[r.answerType??0]=s,a.push(s)),r.answerType==this.offlineAnswerType.trueFalse&&(r.answer=this.offlineExamPartService.convertAnswerTrueFalse(r.answer)),s.offlineAnswerList.push(r)}),this.offlineAnswerByPartList=a.filter(r=>r.offlineAnswerList.length>0),this.offlineAnswerByPartList.forEach((r,s)=>{s>0&&(r.startLabelIndex=this.offlineAnswerByPartList[s-1].startLabelIndex+this.offlineAnswerByPartList[s-1].offlineAnswerList.length)})}constructor(e,i,a){super(i,e),this.dialogRef=e,this.data=i,this.offlineExamPartService=a,this.isDialog=!1,this.totalQuestionAnswer=0,this.offlineAnswerType=Gf.X,this.offlineAnswerByPartList=[],i&&(this.isDialog=i.isDialog,this.offlineExportObj=i.offlineExportObj,this.curOfflineMixQuestionObj=i.curOfflineMixQuestionObj,this.processData(this.curOfflineMixQuestionObj),this.backToLink=i.backToLink,this.examObj=this.offlineExportObj.examObj)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36($.so,8),t.Y36($.WI,8),t.Y36(Nm))},n.\u0275cmp=t.Xpm({type:n,selectors:[["preview-offline-exam"]],inputs:{isDialog:"isDialog",offlineExportObj:"offlineExportObj",curOfflineMixQuestionObj:"curOfflineMixQuestionObj",backToLink:"backToLink"},features:[t._Bn([Nm]),t.qOj],decls:25,vars:19,consts:[[1,"box","py-4","px-4"],[1,"flex","items-center","mt-2"],[1,"text-md","font-medium","inline-block","mr-2"],[4,"ngFor","ngForOf"],[1,"btn","btn-outline-primary","btn-sm","btn-transparent","ml-auto",3,"click"],[1,"w-4","h-4","inline-block","mr-2"],["name","edit"],[1,"border","border-slate-200","dark:border-darkmode-400","mt-4","overflow-auto",2,"height","50vh"],["pointerEventsMethod","scrollbar",3,"visibility","autoHeightDisabled"],[1,"text-md","px-3","mt-3"],[1,"inline-block","ml-1"],[1,"lowercase"],[1,"p-3",2,"padding-right","0"],["class","text-right mt-4",4,"ngIf"],["azt-track-service","preview-offline-exam-Lnr2h-iZa9H",1,"btn","inline-block","border","border-slate-200","dark:border-darkmode-400","p-1","mr-2","text-center","w-12",3,"ngClass","click"],[1,"mt-5","mb-3"],["class","font-medium",4,"ngIf"],[1,"mt-4"],["class","flex items-center flex-wrap",4,"ngIf"],["class","grid grid-cols-12 gap-3 pr-3",4,"ngIf"],[1,"font-medium"],[1,"flex","items-center","flex-wrap"],["class","mr-3 mb-3 block-answer-offline h-full",4,"ngFor","ngForOf"],[1,"mr-3","mb-3","block-answer-offline","h-full"],[1,"btn","btn-sm","w-full","h-full"],[1,"grid","grid-cols-12","gap-3","pr-3"],["class","col-span-12 sm:col-span-4 lg:col-span-3",4,"ngFor","ngForOf"],[1,"col-span-12","sm:col-span-4","lg:col-span-3"],[1,"answer-item"],[1,"block-title","font-medium","text-xs","mr-3","mb-1"],[1,"mt-2"],["class","flex items-center mt-3",4,"ngFor","ngForOf"],[1,"flex","items-center","mt-3"],[1,"font-medium","mr-3"],[1,"btn","btn-sm","rounded-md","mr-3",2,"height","30px","line-height","30px","width","50px","font-weight","400",3,"ngClass"],[1,"btn","btn-sm","rounded-md",2,"height","30px","line-height","30px","width","50px","font-weight","400",3,"ngClass"],["class","col-span-6 md:col-span-3 lg:col-span-2",4,"ngFor","ngForOf"],[1,"col-span-6","md:col-span-3","lg:col-span-2"],[4,"ngIf"],[1,"text-right","mt-4"],["azt-track-service","preview-offline-exam-pMnvQqQQGlC",1,"btn","btn-outline-secondary","w-24",3,"click"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"span",2),t._uU(3),t.ALo(4,"mytranslate"),t.qZA(),t.YNc(5,Z7,4,6,"ng-container",3),t.TgZ(6,"button",4),t.NdJ("click",function(){return i.updateCodeExam()}),t.TgZ(7,"span",5),t._UZ(8,"lucide-icon",6),t.qZA(),t._uU(9),t.ALo(10,"mytranslate"),t.qZA()(),t.TgZ(11,"div",7)(12,"ng-scrollbar",8)(13,"p",9),t._uU(14),t.ALo(15,"mytranslate"),t.TgZ(16,"span",10),t._uU(17),t.TgZ(18,"span",11),t._uU(19),t.ALo(20,"mytranslate"),t.qZA(),t._uU(21," ) "),t.qZA()(),t.TgZ(22,"div",12),t.YNc(23,W7,11,8,"div",3),t.qZA()()(),t.YNc(24,V7,4,3,"div",13),t.qZA()),2&e){let a;t.xp6(3),t.hij(" ",t.lcZ(4,10,"lang_auto_ma_de")+": "," "),t.xp6(2),t.Q6J("ngForOf",null!==(a=null==i.offlineExportObj?null:i.offlineExportObj.offlineMixQuestionObjs)&&void 0!==a?a:t.DdM(18,X7)),t.xp6(4),t.hij(" ",t.lcZ(10,12,"lang_auto_sua")," "),t.xp6(3),t.Q6J("visibility","hover")("autoHeightDisabled",!1),t.xp6(2),t.hij(" ",t.lcZ(15,14,"lang_auto_bang_dap_an")," "),t.xp6(3),t.hij(" (",i.totalQuestionAnswer," "),t.xp6(2),t.Oqu(t.lcZ(20,16,"lang_auto_cau")),t.xp6(4),t.Q6J("ngForOf",i.offlineAnswerByPartList),t.xp6(1),t.Q6J("ngIf",i.isDialog)}},dependencies:[D.mk,D.sg,D.O5,L.KC,C.Nh5,jt.JV,jt.Aw],encapsulation:2}),n})();function tL(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"a",38),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.openDeleteExam())}),t.O4$(),t.TgZ(1,"svg",6),t._UZ(2,"path",39)(3,"path",40)(4,"path",41)(5,"line",42)(6,"line",43),t.qZA(),t._uU(7),t.ALo(8,"mytranslate"),t.qZA()}2&n&&(t.xp6(7),t.hij(" ",t.lcZ(8,1,"lang_auto_xoa")," "))}function eL(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"a",44),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.redirectToSettingExamOffline())}),t.O4$(),t.TgZ(1,"svg",6),t._UZ(2,"path",45)(3,"circle",46),t.qZA(),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()}2&n&&(t.xp6(4),t.hij(" ",t.lcZ(5,1,"lang_auto_cai_dat")," "))}function nL(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"a",47),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.redirectToStatistical())}),t.O4$(),t.TgZ(1,"svg",48),t._UZ(2,"path",49)(3,"path",50),t.qZA(),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()}2&n&&(t.xp6(4),t.hij(" ",t.lcZ(5,1,"lang_auto_thong_ke")," "))}function iL(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",51),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.handleReturnOfflineShare(a.initData.examObj))}),t.O4$(),t.TgZ(2,"svg",52),t._UZ(3,"path",53)(4,"polyline",16)(5,"path",54)(6,"path",55),t.qZA(),t._uU(7),t.ALo(8,"mytranslate"),t.qZA()()}2&n&&(t.xp6(7),t.hij(" ",t.lcZ(8,1,"lang_auto_tra_ket_qua_thi_offline")," "))}function oL(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",56),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.openDialogExamConfig("whoAllow"))}),t.O4$(),t.TgZ(1,"svg",6),t._UZ(2,"path",57)(3,"path",58),t.qZA(),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()}2&n&&(t.xp6(4),t.hij(" ",t.lcZ(5,1,"lang_auto_sua")," "))}function aL(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",61)(1,"a",62),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().$implicit,r=t.oxw(3);return t.KtG(r.redirectToClassDetail(a))}),t._uU(2),t.qZA()()}if(2&n){const e=t.oxw().$implicit;t.xp6(1),t.s9C("matTooltip",null==e.classObj?null:e.classObj.name),t.xp6(1),t.hij(" ",null==e.classObj?null:e.classObj.name," ")}}function rL(n,o){if(1&n&&(t.ynx(0),t.YNc(1,aL,3,2,"div",60),t.BQk()),2&n){const e=o.$implicit;let i;t.xp6(1),t.Q6J("ngIf",(null!==(i=null==e.classObj?null:e.classObj.id)&&void 0!==i?i:0)>0)}}function sL(n,o){if(1&n&&(t.ynx(0),t.YNc(1,rL,2,1,"ng-container",59),t.BQk()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.initData.studentsInClassResults)}}function lL(n,o){1&n&&(t.TgZ(0,"div",63)(1,"a",64),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"lang_auto_tat_ca_moi_nguoi")," "))}function cL(n,o){1&n&&(t.ynx(0),t.TgZ(1,"div",65)(2,"div",66)(3,"span",67),t._UZ(4,"azt-loading-ui"),t.qZA()()(),t.BQk())}function uL(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",71),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.redirectToAddCodeExam())}),t.TgZ(1,"span",72),t._UZ(2,"lucide-icon",73),t.qZA(),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()}2&n&&(t.xp6(3),t.hij(" ",t.lcZ(4,1,"lang_auto_sua")," "))}function dL(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",75)(1,"button",76),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw(4);return t.KtG(s.openDialogPreview(r))}),t.O4$(),t.TgZ(2,"svg",77),t._UZ(3,"path",78)(4,"polyline",16)(5,"line",79)(6,"line",80)(7,"line",81),t.qZA(),t._uU(8),t.ALo(9,"mytranslate"),t.ALo(10,"formatOfflineExamHashIdToNumber"),t.qZA()()}if(2&n){const e=o.$implicit;t.xp6(8),t.AsE(" ",t.lcZ(9,2,"lang_auto_ma_de")," ",t.xi3(10,4,e.offlineMixQuestionHashId,3)," ")}}const mL=function(){return[]};function hL(n,o){if(1&n&&(t.ynx(0),t.YNc(1,dL,11,7,"div",74),t.BQk()),2&n){const e=t.oxw(3);let i;t.xp6(1),t.Q6J("ngForOf",null!==(i=null==e.offlineExportObj?null:e.offlineExportObj.offlineMixQuestionObjs)&&void 0!==i?i:t.DdM(1,mL))}}function pL(n,o){}function _L(n,o){if(1&n&&(t.TgZ(0,"div",65)(1,"div",2)(2,"h3",26),t._uU(3),t.ALo(4,"mytranslate"),t.qZA(),t.YNc(5,uL,5,3,"button",68),t.ALo(6,"editPermission"),t.ALo(7,"isOfflineExamWithCustomMixMark"),t.qZA(),t.TgZ(8,"div",69),t.YNc(9,hL,2,2,"ng-container",35),t.YNc(10,pL,0,0,"ng-template",null,70,t.W1O),t.qZA()()),2&n){const e=t.MAs(11),i=t.oxw(2);t.xp6(3),t.hij(" ",t.lcZ(4,4,"lang_auto_noi_dung")," "),t.xp6(2),t.Q6J("ngIf",t.xi3(6,6,i.initData.examObj,"exam")&&t.lcZ(7,9,i.initData.examObj)),t.xp6(4),t.Q6J("ngIf",(null==i.offlineExportObj||null==i.offlineExportObj.offlineMixQuestionObjs?null:i.offlineExportObj.offlineMixQuestionObjs.length)&&!i.loadingApi)("ngIfElse",e)}}function fL(n,o){if(1&n&&(t.TgZ(0,"div",25)(1,"h3",26),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"div",27)(5,"ul",28)(6,"li"),t.YNc(7,tL,9,3,"a",29),t.ALo(8,"deletePermission"),t.qZA(),t.TgZ(9,"li"),t.YNc(10,eL,6,3,"a",30),t.ALo(11,"editPermission"),t.qZA(),t.TgZ(12,"li"),t.YNc(13,nL,6,3,"a",31),t.ALo(14,"statisticalPermission"),t.qZA(),t.YNc(15,iL,9,3,"li",23),t.ALo(16,"viewPermission"),t.qZA()()(),t.TgZ(17,"div",32)(18,"div",2)(19,"h3",26),t._uU(20),t.ALo(21,"mytranslate"),t.qZA(),t.YNc(22,oL,6,3,"button",33),t.ALo(23,"editPermission"),t.ALo(24,"configPermission"),t.qZA(),t.TgZ(25,"div",34),t.YNc(26,sL,2,1,"ng-container",35),t.YNc(27,lL,4,3,"ng-template",null,36,t.W1O),t.qZA()(),t.YNc(29,cL,5,0,"ng-container",35),t.YNc(30,_L,12,11,"ng-template",null,37,t.W1O)),2&n){const e=t.MAs(28),i=t.MAs(31),a=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,11,"lang_auto_menu")," "),t.xp6(5),t.Q6J("ngIf",t.xi3(8,13,a.initData.examObj,"exam")),t.xp6(3),t.Q6J("ngIf",t.xi3(11,16,a.initData.examObj,"exam")),t.xp6(3),t.Q6J("ngIf",t.xi3(14,19,a.initData.examObj,"exam")),t.xp6(2),t.Q6J("ngIf",!a.isNotTestedYet&&t.xi3(16,22,a.initData.examObj,"exam")),t.xp6(5),t.hij(" ",t.lcZ(21,25,"lang_auto_giao_cho")," "),t.xp6(2),t.Q6J("ngIf",t.xi3(23,27,a.initData.examObj,"exam")||t.xi3(24,30,a.initData.examObj,"exam")),t.xp6(4),t.Q6J("ngIf",2==(null==a.initData.examObj?null:a.initData.examObj.whoAllow)||3==(null==a.initData.examObj?null:a.initData.examObj.whoAllow))("ngIfElse",e),t.xp6(3),t.Q6J("ngIf",a.statusObj.loading)("ngIfElse",i)}}function gL(n,o){1&n&&(t.TgZ(0,"span"),t.O4$(),t.TgZ(1,"svg",82),t._UZ(2,"polyline",83),t.qZA()())}function xL(n,o){1&n&&(t.TgZ(0,"span"),t.O4$(),t.TgZ(1,"svg",82),t._UZ(2,"polyline",84),t.qZA()())}function bL(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"azt-preview-exam",85),t.NdJ("closeDialog",function(a){t.CHM(e);const r=t.oxw();return t.KtG(r.closeDialogPreviewExam(a))}),t.qZA()}}let vL=(()=>{class n extends St.Q{toggleShowActions(){this.isShowActions=!this.isShowActions}openDialogExamConfig(e){this.sAztDialogService.open(R6.Y,{width:"900px",data:{hashId:this.initData.examObj?.hashId,examStudents:this.examStudents},restoreFocus:!1}).afterClosed().subscribe(a=>{a&&(this.initData.examObj={...a,editable:!0,allowStudentView:!0,permissionObj:{}},this.reloadApi.emit())})}openDialogPreview(e){if(this.offlineExportObj&&this.initData.examObj&&this.offlineExportObj.offlineMixQuestionObjs?.length){let i=this.commonService.myClone(this.offlineExportObj);i.offlineMixQuestionObjs=new Array,i.offlineMixQuestionObjs.push(e),this.sAztDialogService.open(U6,{width:"766px",data:{isDialog:!0,offlineExportObj:i,curOfflineMixQuestionObj:e,backToLink:`/admin/testbank/exam-results-list/${i.examObj?.categoryId??0}/${i.examObj?.id}/0`,resetQuestionIndex:this.offlineExportObj.resetQuestionIndex??!0},restoreFocus:!1})}}openDialogWaring(e){this.commonService.getTranslate(e).subscribe(i=>{this.sAztDialogService.open(Sp.C,{data:{isShow:!0,content:i},restoreFocus:!1,width:"500px"})})}closeDialogPreviewExam(e){this.examDetailDialog={obj:void 0,isShow:!1}}openDeleteExam(){this.permissionService.hasViewPermission("exam",this.initData.examObj)?this.sAztDialogService.open(Vy,{data:{examObj:this.initData.examObj,isShow:!0},restoreFocus:!1}).afterClosed().subscribe(r=>{r&&this.commonService.myNavigation("/admin/testbank/document-management/0/0/1")}):this.commonService.getTranslate("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay").subscribe(i=>{this.openDialogWaring("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay")})}closeDeleteExam(e){e?(this.dataDeleteDialog={obj:void 0,type:0,isShow:!1},this.commonService.myNavigation("/admin/testbank/document-management/0/0/1")):this.dataDeleteDialog={obj:void 0,type:0,isShow:!1}}handleReturnOfflineShare(e){e?this.permissionService.hasViewPermission("exam",e)?this.sAztDialogService.open(Fy.h,{width:"600px",data:{examHashId:e.hashId,useDialog:!0},restoreFocus:!1}):this.showErrorSnack("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay"):this.showErrorSnack("lang_core_invalid_data")}redirectToSettingExamOffline(){if(this.permissionService.hasEditPermission("exam",this.initData.examObj)){let i=`/admin/testbank/exam-results-list/${this.initData.examObj?.categoryId??0}/${this.initData.examObj?.id}/0`,a=this.commonService.getMyQueryParam("backto")??"";a&&(i=`/admin/testbank/exam-results-list/${this.initData.examObj?.categoryId??0}/${this.initData.examObj?.id}/0?backto=`+encodeURIComponent(a)),this.myNavigationWithQueryString(`/admin/testbank/config-exam-offline/${this.initData.examObj?.categoryId??0}/${this.initData.examObj?.hashId}`,`?backto=${encodeURIComponent(i)}`)}else this.openDialogWaring("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay")}redirectToStatistical(){if(this.permissionService.hasStatisticalPermission("exam",this.initData.examObj)){let i=`/admin/testbank/exam-results-list/${this.initData.examObj?.categoryId??0}/${this.initData.examObj?.id}/0`,a=this.commonService.getMyQueryParam("backto")??"";a&&(i=`/admin/testbank/exam-results-list/${this.initData.examObj?.categoryId??0}/${this.initData.examObj?.id}/0?backto=`+encodeURIComponent(a)),this.commonService.myNavigationWithQueryString(`/admin/testbank/statistic/${this.initData.examObj?.categoryId?this.initData.examObj.categoryId:0}/${this.initData.examObj?.id}`,"?backto="+encodeURIComponent(i))}else this.openDialogWaring("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay")}redirectToClassDetail(e){let i=`/admin/testbank/exam-results-list/${this.initData.examObj?.categoryId??0}/${this.initData.examObj?.id}/0`,a=this.commonService.getMyQueryParam("backto")??"";a&&(i=`/admin/testbank/exam-results-list/${this.initData.examObj?.categoryId??0}/${this.initData.examObj?.id}/0?backto=`+encodeURIComponent(a)),this.myNavigationWithQueryString(`/admin/student/classroom-details/${e.classObj?.id}/0`,`?backto=${i}`)}redirectToAddCodeExam(){let e=`/admin/testbank/exam-results-list/${this.initData.examObj?.categoryId??0}/${this.initData.examObj?.id}/0`,i=this.commonService.getMyQueryParam("backto")??"";i&&(e=`/admin/testbank/exam-results-list/${this.initData.examObj?.categoryId??0}/${this.initData.examObj?.id}/0?backto=`+encodeURIComponent(i)),this.myNavigationWithQueryString(`/admin/testbank/update-offline-exam/${this.initData.examObj?.categoryId??0}/${this.initData.examObj?.hashId}`,`?backto=${encodeURIComponent(e)}`)}getAnswerOffline(e){this.initStatusObj(),this.waitDestroy(this.offlineExamExportService.apiOfflineExamExportExportResultOfAllOfflineMixQuestionHashIdGet(e).subscribe(i=>{1==i.success?(this.offlineExportObj=i.data?.obj,this.successStatusObj()):this.errorStatusObj(i.message??"",!0)}))}constructor(e,i,a){super(),this.sAztDialogService=e,this.offlineExamExportService=i,this.permissionService=a,this.initData={studentsNotInClassResults:[]},this.isNotTestedYet=!1,this.loadingApi=!0,this.examStudents=[],this.reloadApi=new t.vpe,this.examDetailDialog={obj:void 0,curCateId:-1,isOnLib:-1,isShow:!1},this.dataDeleteDialog={obj:void 0,type:0,isShow:!1},this.linkExam="",this.isShowActions=!0,this.dataDialogWarning={isShow:!1,content:""}}ngOnInit(){super.ngOnInit();let e=this.commonService.getCurrentDomain();this.linkExam=`${e}/de-thi/${this.initData.examObj?.hashId}`}ngOnChanges(){!this.loadingApi&&this.initData.examObj?.hashId&&this.getAnswerOffline(this.initData.examObj?.hashId)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Fi.C),t.Y36(ya.qr),t.Y36(S.j))},n.\u0275cmp=t.Xpm({type:n,selectors:[["menu-offline-test"]],inputs:{initData:"initData",isNotTestedYet:"isNotTestedYet",loadingApi:"loadingApi",examStudents:"examStudents"},outputs:{reloadApi:"reloadApi"},features:[t.qOj,t.TTD],decls:40,vars:26,consts:[[1,"box","p-3","h-full","lg:h-auto",2,"min-height","80vh"],[1,"document-info"],[1,"flex","items-center"],[1,"text-md","font-medium","truncate","mr-auto","mt-2",2,"max-width","90%",3,"matTooltip","isDisabledTooltip","matTooltipDisabled"],["c","isDisabled"],[1,"flex","items-center","mt-2"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","mr-2"],["x","3","y","4","width","18","height","18","rx","2","ry","2"],["x1","16","y1","2","x2","16","y2","6"],["x1","8","y1","2","x2","8","y2","6"],["x1","3","y1","10","x2","21","y2","10"],[1,"text-sm"],["d","M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"],["cx","12","cy","7","r","4"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-layers","w-4","h-4","mr-2"],["d","M4 13.5V4a2 2 0 0 1 2-2h8.5L20 7.5V20a2 2 0 0 1-2 2h-5.5"],["points","14 2 14 8 20 8"],["d","M10.42 12.61a2.1 2.1 0 1 1 2.97 2.97L7.95 21 4 22l.99-3.95 5.43-5.44Z"],[1,"flex","mt-2"],[3,"objectCodeType","objectCode","objectId","examWithPermissionObj"],[3,"ngIf"],[1,"mt-2","text-center"],["azt-track-service","menu-offline-test-C7d866E60NA",1,"btn","btn-sm","btn-transparent","btn-outline-secondary",3,"click"],[4,"ngIf"],[3,"closeDialog",4,"ngIf"],[1,"azt-document-menu","mt-4"],[1,"text-md","font-bold"],[1,"dropdown-menu","show","relative","w-full","mt-2"],[1,"dropdown-content","bg-slate-100","dark:bg-darkmode-600"],["azt-track-service","menu-offline-test-v0ibVgHaHZp","class","dropdown-item text-danger",3,"click",4,"ngIf"],["azt-track-service","menu-offline-test-boVa6dq1W1j","class","dropdown-item",3,"click",4,"ngIf"],["azt-track-service","menu-offline-test-C_QDr7XeJG-","class","dropdown-item",3,"click",4,"ngIf"],[1,"azt-document-who","mt-4"],["azt-track-service","menu-offline-test-l07YIWF2M_z","class","btn btn-outline-primary btn-sm btn-transparent ml-auto",3,"click",4,"ngIf"],[1,"grid","grid-cols-12","gap-3","rounded-md","mt-1"],[4,"ngIf","ngIfElse"],["noClassroom",""],["doneLoading",""],["azt-track-service","menu-offline-test-v0ibVgHaHZp",1,"dropdown-item","text-danger",3,"click"],["d","M3 6h18"],["d","M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"],["d","M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"],["x1","10","y1","11","x2","10","y2","17"],["x1","14","y1","11","x2","14","y2","17"],["azt-track-service","menu-offline-test-boVa6dq1W1j",1,"dropdown-item",3,"click"],["d","M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"],["cx","12","cy","12","r","3"],["azt-track-service","menu-offline-test-C_QDr7XeJG-",1,"dropdown-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","mr-2","lucide"],["d","M3 3v18h18"],["d","m19 9-5 5-4-4-3 3"],["azt-track-service","menu-offline-test-yp0Mu41Mr",1,"dropdown-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide","mr-2"],["d","M4 22h14a2 2 0 0 0 2-2V7.5L14.5 2H6a2 2 0 0 0-2 2v4"],["d","M2 15h10"],["d","m9 18 3-3-3-3"],["azt-track-service","menu-offline-test-l07YIWF2M_z",1,"btn","btn-outline-primary","btn-sm","btn-transparent","ml-auto",3,"click"],["d","M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"],["d","M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"],[4,"ngFor","ngForOf"],["class","col-span-4 2lg:col-span-3",4,"ngIf"],[1,"col-span-4","2lg:col-span-3"],["azt-track-service","menu-offline-test-4CoI06cv-3-",1,"btn","btn-outline-secondary","block","truncate","w-full",3,"matTooltip","click"],[1,"col-span-12","md:col-span-6"],[1,"btn","btn-outline-secondary","block","cursor-default","w-full"],[1,"azt-document-list-code","mt-4"],[1,"mt-4","flex","items-center",2,"height","66px"],[1,"mx-auto","w-8","h-8"],["azt-track-service","menu-offline-test-Q_qGX1X8E2W","class","btn btn-outline-primary btn-sm btn-transparent ml-auto",3,"click",4,"ngIf"],[1,"grid","grid-cols-12","gap-3","mt-3"],["noExamOffline",""],["azt-track-service","menu-offline-test-Q_qGX1X8E2W",1,"btn","btn-outline-primary","btn-sm","btn-transparent","ml-auto",3,"click"],[1,"w-4","h-4","inline-block","mr-2"],["name","edit"],["class","col-span-6",4,"ngFor","ngForOf"],[1,"col-span-6"],["azt-track-service","menu-offline-test-Md6K9sfq64w",1,"btn-text-primary","font-medium",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","mr-2"],["d","M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],["x1","16","y1","13","x2","8","y2","13"],["x1","16","y1","17","x2","8","y2","17"],["x1","10","y1","9","x2","8","y2","9"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-5","h-5"],["points","18 15 12 9 6 15"],["points","6 9 12 15 18 9"],[3,"closeDialog"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3,4),t._uU(5),t.qZA()(),t.TgZ(6,"div",5),t.O4$(),t.TgZ(7,"svg",6),t._UZ(8,"rect",7)(9,"line",8)(10,"line",9)(11,"line",10),t.qZA(),t.kcU(),t.TgZ(12,"span",11),t._uU(13),t.ALo(14,"mytranslate"),t.ALo(15,"formatFullDateTimeWithoutSecondByUserUnitPipe"),t.qZA()(),t.TgZ(16,"div",5),t.O4$(),t.TgZ(17,"svg",6),t._UZ(18,"path",12)(19,"circle",13),t.qZA(),t.kcU(),t.TgZ(20,"span",11),t._uU(21),t.ALo(22,"mytranslate"),t.qZA()(),t.TgZ(23,"div",5),t.O4$(),t.TgZ(24,"svg",14),t._UZ(25,"path",15)(26,"polyline",16)(27,"path",17),t.qZA(),t.kcU(),t.TgZ(28,"span",11),t._uU(29),t.ALo(30,"mytranslate"),t.ALo(31,"number"),t.qZA()(),t.TgZ(32,"div",18),t._UZ(33,"azt-share",19),t.qZA()(),t.YNc(34,fL,32,33,"ng-template",20),t.TgZ(35,"div",21)(36,"button",22),t.NdJ("click",function(){return i.toggleShowActions()}),t.YNc(37,gL,3,0,"span",23),t.YNc(38,xL,3,0,"span",23),t.qZA()()(),t.YNc(39,bL,1,0,"azt-preview-exam",24)),2&e){const a=t.MAs(4);let r;t.xp6(3),t.s9C("matTooltip",null==i.initData.examObj?null:i.initData.examObj.name),t.s9C("matTooltip",null==i.initData.examObj?null:i.initData.examObj.name),t.Q6J("isDisabledTooltip",!1)("matTooltipDisabled",a.isDisabled),t.xp6(2),t.hij(" ",null==i.initData.examObj?null:i.initData.examObj.name," "),t.xp6(8),t.hij(" ",t.lcZ(14,16,"lang_testbank_tested_list_date_create")+": "+t.lcZ(15,18,null==i.initData.examObj?null:i.initData.examObj.createdAt)," "),t.xp6(8),t.hij(" ",t.lcZ(22,20,"lang_auto_nguoi_tao")+": "+(null==i.initData.examCreatorObj?null:i.initData.examCreatorObj.fullName)," "),t.xp6(8),t.hij(" ",t.lcZ(30,22,"lang_testbank_tested_list_number_quizzes")+": "+(i.initData.totalAttended?i.initData.totalAttended:t.lcZ(31,24,0))," "),t.xp6(4),t.Q6J("objectCodeType",3)("objectCode","EXAM")("objectId",null!==(r=null==i.initData.examObj?null:i.initData.examObj.id)&&void 0!==r?r:0)("examWithPermissionObj",i.initData.examObj),t.xp6(1),t.Q6J("ngIf",i.isShowActions),t.xp6(3),t.Q6J("ngIf",i.isShowActions),t.xp6(1),t.Q6J("ngIf",!i.isShowActions),t.xp6(1),t.Q6J("ngIf",i.examDetailDialog.isShow)}},dependencies:[D.sg,D.O5,Mi.gM,Hf.H,Jl.Q,oi.n,z0.y,C.Nh5,D.JJ,jt.JV,jt.Pf,jt.Z_,jt.J7,jt.PA,jt.Fb,jt.Aw,jt.CP,jt.$n],encapsulation:2}),n})();function yL(n,o){if(1&n&&(t.O4$(),t.kcU(),t.TgZ(0,"span",23)(1,"span",24),t._uU(2),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.Oqu(e.examResultFilterService.totalCustomFilter)}}function wL(n,o){if(1&n&&(t.TgZ(0,"span"),t._uU(1,"\xa0"),t.TgZ(2,"span",27),t._uU(3),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(3),t.Oqu(e.examResultFilterService.totalCustomFilter)}}function CL(n,o){if(1&n&&(t.O4$(),t.kcU(),t.TgZ(0,"span",25),t._uU(1),t.ALo(2,"mytranslate"),t.YNc(3,wL,4,1,"span",26),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij(" ",t.lcZ(2,2,"lang_testbank_tested_list_sort")," "),t.xp6(2),t.Q6J("ngIf",e.examResultFilterService.totalCustomFilter>0)}}let TL=(()=>{class n extends St.Q{changeFilter(){this.examResultFilterService.saveFilterObj(),this.changeFilterEvent.emit(this.examResultFilterService.filterObj)}clearFilter(){this.examResultFilterService.clearFilter(),this.changeFilter()}ngOnInit(){super.ngOnInit()}constructor(e){super(),this.examResultFilterService=e,this.changeFilterEvent=new t.vpe}}return n.\u0275fac=function(e){return new(e||n)(t.Y36($y))},n.\u0275cmp=t.Xpm({type:n,selectors:[["testbank-exam-result-filter-menu"]],outputs:{changeFilterEvent:"changeFilterEvent"},features:[t.qOj],decls:44,vars:25,consts:[[1,"btn","btn-sm","relative",3,"matMenuTriggerFor"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-search","w-4","h-4","mr-0","md:mr-1"],["points","22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"],["class","sm:hidden tooltip w-4 h-4 flex items-center justify-center absolute rounded-full bg-primary right-0 top-0 -mr-2 -mt-2",4,"ngIf"],["class","azt-hidden sm:block",4,"ngIf"],["xPosition","before"],["filterMenu","matMenu"],[1,"dropdown-menu","show","relative","w-64"],[1,"dropdown-content"],["azt-track-service","filter-menu-Csh-AtPhLM","for","isMarked",1,"dropdown-item","cursor-pointer",3,"click"],[1,"form-check","form-switch","ml-auto"],["id","isMarked","type","checkbox",1,"show-code","form-check-input","ml-2",3,"checked","change"],["azt-track-service","filter-menu-jvAvKjPSPr","for","isNotMarked",1,"dropdown-item","cursor-pointer",3,"click"],["id","isNotMarked","type","checkbox",1,"show-code","form-check-input","ml-2",3,"checked","change"],["azt-track-service","filter-menu-WpYAtInmdW","for","isOnTest",1,"dropdown-item","cursor-pointer",3,"click"],["id","isOnTest","type","checkbox",1,"show-code","form-check-input","ml-2",3,"checked","change"],["azt-track-service","filter-menu-qExv_PlJpt","for","isNotTested",1,"dropdown-item","cursor-pointer",3,"click"],["id","isNotTested","type","checkbox",1,"show-code","form-check-input","ml-2",3,"checked","change"],[1,"dropdown-divider"],[1,"flex","p-1"],[1,"btn","btn-secondary","py-1","px-2","ml-auto","mr-2"],["azt-track-service","filter-menu-ezDcdMX5-k",3,"click"],["azt-track-service","filter-menu-B7m4rnfcVw1",1,"btn","btn-danger","py-1","px-2",3,"click"],[1,"sm:hidden","tooltip","w-4","h-4","flex","items-center","justify-center","absolute","rounded-full","bg-primary","right-0","top-0","-mr-2","-mt-2"],[1,"rounded-full","bg-primary","text-white","cursor-pointer","font-medium"],[1,"azt-hidden","sm:block"],[4,"ngIf"],[1,"py-1","px-2","rounded-full","text-xs","bg-primary","text-white","cursor-pointer","font-medium"]],template:function(e,i){if(1&e&&(t.TgZ(0,"button",0),t.O4$(),t.TgZ(1,"svg",1),t._UZ(2,"polygon",2),t.qZA(),t.YNc(3,yL,3,1,"span",3),t.YNc(4,CL,4,4,"span",4),t.qZA(),t.kcU(),t.TgZ(5,"mat-menu",5,6)(7,"div",7)(8,"ul",8)(9,"li")(10,"label",9),t.NdJ("click",function(r){return r.stopPropagation()}),t._uU(11),t.ALo(12,"mytranslate"),t.TgZ(13,"div",10)(14,"input",11),t.NdJ("change",function(){return i.examResultFilterService.filterObj.isMarked=!i.examResultFilterService.filterObj.isMarked,i.changeFilter()}),t.qZA()()()(),t.TgZ(15,"li")(16,"label",12),t.NdJ("click",function(r){return r.stopPropagation()}),t._uU(17),t.ALo(18,"mytranslate"),t.TgZ(19,"div",10)(20,"input",13),t.NdJ("change",function(){return i.examResultFilterService.filterObj.isNotMarked=!i.examResultFilterService.filterObj.isNotMarked,i.changeFilter()}),t.qZA()()()(),t.TgZ(21,"li")(22,"label",14),t.NdJ("click",function(r){return r.stopPropagation()}),t._uU(23),t.ALo(24,"mytranslate"),t.TgZ(25,"div",10)(26,"input",15),t.NdJ("change",function(){return i.examResultFilterService.filterObj.isOnTest=!i.examResultFilterService.filterObj.isOnTest,i.changeFilter()}),t.qZA()()()(),t.TgZ(27,"li")(28,"label",16),t.NdJ("click",function(r){return r.stopPropagation()}),t._uU(29),t.ALo(30,"mytranslate"),t.TgZ(31,"div",10)(32,"input",17),t.NdJ("change",function(){return i.examResultFilterService.filterObj.isNotTested=!i.examResultFilterService.filterObj.isNotTested,i.changeFilter()}),t.qZA()()()(),t.TgZ(33,"li"),t._UZ(34,"hr",18),t.qZA(),t.TgZ(35,"li")(36,"div",19)(37,"button",20),t._uU(38),t.ALo(39,"mytranslate"),t.qZA(),t.TgZ(40,"div",21),t.NdJ("click",function(r){return r.stopPropagation()}),t.TgZ(41,"button",22),t.NdJ("click",function(){return i.clearFilter()}),t._uU(42),t.ALo(43,"mytranslate"),t.qZA()()()()()()()),2&e){const a=t.MAs(6);t.Q6J("matMenuTriggerFor",a),t.xp6(3),t.Q6J("ngIf",i.examResultFilterService.totalCustomFilter>0),t.xp6(1),t.Q6J("ngIf",!i.isMobileWebView),t.xp6(7),t.hij(" ",t.lcZ(12,13,"lang_testbank_tested_list_show_student_marking")," "),t.xp6(3),t.Q6J("checked",i.examResultFilterService.filterObj.isMarked),t.xp6(3),t.hij(" ",t.lcZ(18,15,"lang_testbank_tested_list_student_not_marking")," "),t.xp6(3),t.Q6J("checked",i.examResultFilterService.filterObj.isNotMarked),t.xp6(3),t.hij(" ",t.lcZ(24,17,"lang_testbank_tested_list_show_student_taking_exam")," "),t.xp6(3),t.Q6J("checked",i.examResultFilterService.filterObj.isOnTest),t.xp6(3),t.hij(" ",t.lcZ(30,19,"lang_testbank_tested_list_show_student_not_yet_exam")," "),t.xp6(3),t.Q6J("checked",i.examResultFilterService.filterObj.isNotTested),t.xp6(6),t.Oqu(t.lcZ(39,21,"lang_button_close")),t.xp6(4),t.Oqu(t.lcZ(43,23,"lang_button_delete"))}},dependencies:[D.O5,Ii.VK,Ii.p6,jt.JV],encapsulation:2}),n})();var tg=M(72358),kL=M(30073),B6=M(41894),z6=M(4565),AL=M(81899),Od=M(98445);function SL(n,o){1&n&&t._UZ(0,"azt-loading-effect")}function OL(n,o){1&n&&(t.TgZ(0,"span",22),t._UZ(1,"azt-loading-ui"),t.qZA())}const EL=function(n){return{paddingLeft:n}},ML=function(n,o){return{"font-medium text-primary":n,clickable:o}};function IL(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"mat-tree-node",14)(1,"button",15)(2,"mat-icon",16),t._uU(3),t.qZA()(),t.TgZ(4,"div",17),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw(2);return t.KtG("user"!=r.shareType&&s.clickToDocumentObj(r))}),t.TgZ(5,"span"),t.O4$(),t.TgZ(6,"svg",18),t._UZ(7,"path",19),t.qZA()(),t.kcU(),t.TgZ(8,"span",20),t._uU(9),t.ALo(10,"mytranslate"),t.qZA(),t.YNc(11,OL,2,0,"span",21),t.qZA()()}if(2&n){const e=o.$implicit,i=t.oxw(2);t.Q6J("hidden","cate"!=e.type)("ngStyle",t.VKq(10,EL,15*e.level+"px")),t.xp6(1),t.Q6J("disabled",e.isLoading),t.uIk("aria-label","Toggle "+e.item),t.xp6(2),t.hij(" ",i.treeControl.isExpanded(e)?"expand_more":"chevron_right"," "),t.xp6(1),t.Q6J("ngClass",t.WLB(12,ML,(null==i.curNode?null:i.curNode.id)===e.id,"user"!=e.shareType)),t.xp6(5),t.hij(" ",t.lcZ(10,8,e.item)," "),t.xp6(2),t.Q6J("ngIf",e.isLoading)}}function LL(n,o){if(1&n&&(t.TgZ(0,"ng-scrollbar",10)(1,"div",11)(2,"mat-tree",12),t.YNc(3,IL,12,15,"mat-tree-node",13),t.qZA()()()),2&n){const e=t.oxw();t.Q6J("visibility","hover"),t.xp6(2),t.Q6J("dataSource",e.commonDataSourceProcess)("treeControl",e.treeControl),t.xp6(1),t.Q6J("matTreeNodeDefWhen",e.hasChild)}}function PL(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_testbank_forward_exam_result_please_choose_category")))}let NL=(()=>{class n extends lo.e{clickToDocumentObj(e){this.commonDataSourceProcess._database.lastNodeSelected=this.commonDataSourceProcess.findLastTreeNodeSelected(e,[]),this.curNode=e}forwardExamResult(e){this.initStatusObj(),this.waitDestroy(this.examService.apiExamSubmitExamPost({examResultIds:[this.data.obj.resultId??0],categoryId:e.id}).subscribe(a=>{a.success?(this.successStatusObj("lang_testbank_forward_exam_result_successfully",!0),this.btnCloseDialog()):this.errorStatusObj(a.message,!0)}))}btnCloseDialog(){this.dialogRef.close()}get commonDataSourceProcess(){return this.userCategoriesDataSource}initData(){this.initStatusObj();let e=this.commonService.myTranslateInstant("lang_loading_data");this.logConfig.status=!0,this.logConfig.msg=e,this.commonDataSourceProcess._database.initialData(-1,void 0).then(i=>{this.commonDataSourceProcess.data=i,this.commonDataSourceProcess.toggleLastNode(this.commonDataSourceProcess._database.lastNodeSelected,0,void 0,a=>{a&&this.clickToDocumentObj(a),this.stopStatusObj()})})}ngOnInit(){super.ngOnInit(),this.initData()}constructor(e,i,a,r,s){super(s,r),this.examService=e,this.userCategoriesDatabase=i,this.azotaKnowledgeDatabaseService=a,this.dialogRef=r,this.data=s,this.logConfig={},this.getLevel=l=>l.level,this.isExpandable=l=>l.expandable,this.hasChild=(l,c)=>c.expandable,this.treeControl=new B6.C2(this.getLevel,this.isExpandable),this.userCategoriesDataSource=new z6.n(this.treeControl,i)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Ke.Oe),t.Y36(z6.$),t.Y36(AL.J),t.Y36($.so,8),t.Y36($.WI,8))},n.\u0275cmp=t.Xpm({type:n,selectors:[["forward-exam-result-dialog"]],features:[t.qOj],decls:15,vars:10,consts:[[1,"p-2","bg-white",2,"min-width","min(1000px, 100vw)"],[1,"box","p-2","border","border-slate-200","dark:border-darkmode-400","mb-2",2,"height","350px"],[4,"ngIf","ngIfElse"],["doneLoading",""],[1,"flex","flex-col-reverse","sm:flex-row","items-center"],[1,"w-full","sm:w-auto","mr-auto","mt-3","sm:mt-0","text-danger"],[4,"ngIf"],[1,"w-full","sm:w-auto"],["azt-track-service","forward-exam-result-box-xFTHK3IjJE",1,"btn","btn-secondary","w-24","mr-2",3,"click"],["azt-track-service","forward-exam-result-box-EH3SM3HfX5",1,"btn","btn-success","text-white","shadow-md",3,"disabled","click"],["track","vertical","pointerEventsMethod","scrollbar",1,"w-full",3,"visibility"],[1,"pr-2"],[3,"dataSource","treeControl"],[3,"hidden","ngStyle",4,"matTreeNodeDef","matTreeNodeDefWhen"],[3,"hidden","ngStyle"],["mat-icon-button","","matTreeNodeToggle","",3,"disabled"],[1,"mat-icon-rtl-mirror"],["azt-track-service","forward-exam-result-box-B5pmbMayL",1,"title-box",3,"ngClass","click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"w-6","h-6","mr-2","text-slate-600","dark:text-slate-500"],["d","M9.828 3h3.982a2 2 0 0 1 1.992 2.181l-.637 7A2 2 0 0 1 13.174 14H2.825a2 2 0 0 1-1.991-1.819l-.637-7a1.99 1.99 0 0 1 .342-1.31L.5 3a2 2 0 0 1 2-2h3.672a2 2 0 0 1 1.414.586l.828.828A2 2 0 0 0 9.828 3zm-8.322.12C1.72 3.042 1.95 3 2.19 3h5.396l-.707-.707A1 1 0 0 0 6.172 2H2.5a1 1 0 0 0-1 .981l.006.139z"],[1,"text-matrix-title"],["class","w-4 h-4 inline-block ml-2",4,"ngIf"],[1,"w-4","h-4","inline-block","ml-2"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,SL,1,0,"azt-loading-effect",2),t.YNc(3,LL,4,4,"ng-template",null,3,t.W1O),t.qZA(),t.TgZ(5,"div",4)(6,"div",5),t.YNc(7,PL,3,3,"span",6),t.qZA(),t.TgZ(8,"div",7)(9,"button",8),t.NdJ("click",function(){return i.btnCloseDialog()}),t._uU(10),t.ALo(11,"mytranslate"),t.qZA(),t.TgZ(12,"button",9),t.NdJ("click",function(){return i.curNode&&i.forwardExamResult(i.curNode)}),t._uU(13),t.ALo(14,"mytranslate"),t.qZA()()()()),2&e){const a=t.MAs(4);t.xp6(2),t.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a),t.xp6(5),t.Q6J("ngIf",!i.curNode),t.xp6(3),t.hij(" ",t.lcZ(11,6,"lang_cms_common_close_btn")," "),t.xp6(2),t.Q6J("disabled",!i.curNode),t.xp6(1),t.hij(" ",t.lcZ(14,8,"lang_testbank_forward_exam_result_confirm")," ")}},dependencies:[D.mk,D.O5,D.PC,vr.RK,Jo.Hw,Od.fQ,Od.eu,Od.gi,Od.uo,L.KC,si.l,oi.n,jt.JV],encapsulation:2}),n})();var t4=M(85904),e4=M(43614);const ZL=["student",""];function DL(n,o){1&n&&(t.TgZ(0,"span",26),t.ALo(1,"mytranslate"),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()),2&n&&(t.s9C("matTooltip",t.lcZ(1,2,"lang_auto_hoc_sinh_nay_da_thoat_ra_khoi_man_hinh_thi_khi_chua_het_gio_ma_khong_an_nut_nop_bai_giao_vien_yeu_cau_hoc_sinh_quay_lai_bai_thi_de_an_nut_xac_nhan_nop_muon_sau_do_phuc_khao_de_ghi_nhan_ket_qua_bai_thi")),t.xp6(2),t.hij(" ",t.lcZ(3,4,"lang_auto_dang_thi_brackets")," "))}function jL(n,o){1&n&&(t.TgZ(0,"span",26),t.ALo(1,"mytranslate"),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()),2&n&&(t.s9C("matTooltip",t.lcZ(1,2,"lang_auto_hoc_sinh_nay_da_thoat_ra_khoi_man_hinh_thi_khi_chua_het_gio_ma_khong_an_nut_nop_bai_giao_vien_yeu_cau_hoc_sinh_quay_lai_bai_thi_de_an_nut_xac_nhan_nop_muon_sau_do_phuc_khao_de_ghi_nhan_ket_qua_bai_thi")),t.xp6(2),t.hij(" ",t.lcZ(3,4,"lang_auto_chua_nop_bai_brackets")," "))}function qL(n,o){if(1&n&&(t.TgZ(0,"div",23)(1,"span",24),t._uU(2),t.qZA(),t.YNc(3,DL,4,6,"span",25),t.YNc(4,jL,4,6,"span",25),t.qZA()),2&n){const e=t.oxw();t.xp6(2),t.Oqu(e.student.fullName),t.xp6(1),t.Q6J("ngIf",0==e.student.status&&(e.student.isMarked||e.student.isNotMarked)),t.xp6(1),t.Q6J("ngIf",-1==e.student.status&&(e.student.isMarked||e.student.isNotMarked))}}function FL(n,o){if(1&n&&t._UZ(0,"img",27),2&n){const e=t.oxw();t.Q6J("nameImages",e.student.nameImages)}}function QL(n,o){1&n&&(t.TgZ(0,"span",28),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_test_result_not_marked_essay")))}function RL(n,o){1&n&&(t.TgZ(0,"span",29),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_auto_dang_thi")))}function UL(n,o){1&n&&(t.TgZ(0,"span",30),t.ALo(1,"mytranslate"),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()),2&n&&(t.s9C("matTooltip",t.lcZ(1,2,"lang_auto_hoc_sinh_nay_da_thoat_ra_khoi_man_hinh_thi_khi_chua_het_gio_ma_khong_an_nut_nop_bai_giao_vien_yeu_cau_hoc_sinh_quay_lai_bai_thi_de_an_nut_xac_nhan_nop_muon_sau_do_phuc_khao_de_ghi_nhan_ket_qua_bai_thi")),t.xp6(2),t.hij(" ",t.lcZ(3,4,"lang_auto_chua_nop_bai")," "))}function BL(n,o){1&n&&(t.TgZ(0,"span",31),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_auto_chua_thi")))}function zL(n,o){1&n&&(t.TgZ(0,"span",32),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_point")+": "," "))}function JL(n,o){if(1&n&&(t.TgZ(0,"span",33),t._uU(1),t.qZA()),2&n){const e=t.oxw();let i;t.xp6(1),t.hij(" ",null!==(i=e.student.mark)&&void 0!==i?i:0," ")}}function HL(n,o){1&n&&(t.TgZ(0,"span",32),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_combine_exam")+": "," "))}function GL(n,o){if(1&n&&(t.TgZ(0,"span",33),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.student.subjectMarkValues.join(" | ")," ")}}function $L(n,o){if(1&n&&(t.TgZ(0,"div",8)(1,"div",9),t.YNc(2,HL,3,3,"span",14),t.YNc(3,GL,2,1,"span",15),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",e.student.isMarked),t.xp6(1),t.Q6J("ngIf",e.student.isMarked)}}function YL(n,o){1&n&&(t.TgZ(0,"div",34),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_thoi_gian_lam_bai")+":"," "))}function KL(n,o){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij(" ",e.timeService.calculationTimeExamTested(e.student.startedTest||void 0,e.student.createdAt||void 0)," ")}}function WL(n,o){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij(" ",e.timeService.calculationTimeExamTested(e.student.startedTest||void 0)," ")}}function VL(n,o){1&n&&(t.TgZ(0,"p",38),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_so_tep_tin_da_nop")+": "," "))}function XL(n,o){if(1&n&&(t.TgZ(0,"p",39),t._uU(1),t.qZA()),2&n){const e=t.oxw(2);let i;t.xp6(1),t.hij(" ",null!==(i=null==e.student.filesParse?null:e.student.filesParse.length)&&void 0!==i?i:0," ")}}function t9(n,o){if(1&n&&(t.TgZ(0,"div",35),t.YNc(1,VL,3,3,"p",36),t.YNc(2,XL,2,1,"p",37),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.student.isMarked||e.student.isNotMarked),t.xp6(1),t.Q6J("ngIf",e.student.isMarked||e.student.isNotMarked)}}function e9(n,o){if(1&n&&(t.TgZ(0,"div",19),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.timeService.calculationTime(e.student.createdAt||void 0)+" "+t.lcZ(2,1,"lang_auto_truoc")," ")}}function n9(n,o){if(1&n&&(t.TgZ(0,"div",35)(1,"p",38),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.YNc(4,e9,3,3,"div",40),t.qZA()),2&n){const e=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,2,"lang_auto_thoi_gian_nop_bai")+": "," "),t.xp6(2),t.Q6J("ngIf",e.student.isMarked||e.student.isNotMarked)}}function i9(n,o){if(1&n&&(t.TgZ(0,"div",35)(1,"p",38),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"p",39),t._uU(5),t.ALo(6,"formatOfflineExamHashIdToNumber"),t.qZA()()),2&n){const e=t.oxw();let i;t.xp6(2),t.hij("",t.lcZ(3,2,"lang_auto_ma_de_thi"),":"),t.xp6(3),t.hij(" ",t.xi3(6,4,null!==(i=e.student.offlineMixQuestionHashId)&&void 0!==i?i:0,3)," ")}}function o9(n,o){if(1&n&&(t.TgZ(0,"div",35)(1,"p",38),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"p",39),t._uU(5),t.ALo(6,"formatStudentCodeToNumber"),t.qZA()()),2&n){const e=t.oxw();let i;t.xp6(2),t.hij(" ",t.lcZ(3,2,"lang_testbank_offline_student_identification")+": "," "),t.xp6(3),t.hij(" ",t.xi3(6,4,null!==(i=e.student.studentCode)&&void 0!==i?i:0,6)," ")}}function a9(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"span",49),t.NdJ("click",function(a){t.CHM(e);const r=t.oxw(2);return t.KtG(r.handleForwardExamResult(a,r.student))}),t.O4$(),t.TgZ(2,"svg",50),t._UZ(3,"polyline",51)(4,"path",52),t.qZA(),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()()}2&n&&(t.xp6(5),t.hij(" ",t.lcZ(6,1,"lang_testbank_forward_exam_result_menu")," "))}function r9(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"span",53),t.NdJ("click",function(a){t.CHM(e);const r=t.oxw(2);return t.KtG(r.handleRemoveExamResult(a))}),t.O4$(),t.TgZ(2,"svg",54),t._UZ(3,"polyline",55)(4,"path",56),t.qZA(),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()()}2&n&&(t.xp6(5),t.hij(" ",t.lcZ(6,1,"lang_testbank_remove_offline_result")," "))}function s9(n,o){if(1&n&&(t.TgZ(0,"div",41)(1,"div",42),t.NdJ("click",function(i){return i.preventDefault(),i.stopPropagation()}),t.TgZ(2,"span",43),t._UZ(3,"lucide-icon",44),t.qZA()(),t.TgZ(4,"mat-menu",45,46)(6,"div",47)(7,"ul",48),t.YNc(8,a9,7,3,"li",20),t.YNc(9,r9,7,3,"li",20),t.qZA()()()()),2&n){const e=t.MAs(5),i=t.oxw();t.xp6(1),t.Q6J("matMenuTriggerFor",e),t.xp6(7),t.Q6J("ngIf",i.showForwardResult&&i.student.resultId),t.xp6(1),t.Q6J("ngIf",i.student.isOffline)}}const l9=function(n){return[n]},c9=function(n){return{backto:n}},u9=function(n,o){return{"zoom-in":n,"flex items-center":o}},d9=function(n){return{"border-b border-slate-200 dark:border-darkmode-400":n}};let m9=(()=>{class n extends St.Q{handleSelectExamResult(){this.onHandleSelect.emit()}handleRemoveExamResult(e){this.sAztDialogService.open(kL.z,{data:{examHashId:this.examHashId??"",examResultId:this.student.resultId??0},restoreFocus:!1}).afterClosed().subscribe(a=>{a&&this.onHandleRemove.emit()})}handleForwardExamResult(e,i){this.sAztDialogService.open(NL,{data:{obj:i},restoreFocus:!1}).afterClosed().subscribe(r=>{r&&this.onHandleRemove.emit()})}constructor(e,i,a){super(),this.configService=e,this.timeService=i,this.sAztDialogService=a,this.hasEssayQuestion=!1,this.onHandleRemove=new t.vpe,this.onHandleSelect=new t.vpe,this.showForwardResult=!Ce.N.production||"1"==this.configService.getConfig("allowForwardResult")}ngOnInit(){super.ngOnInit()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Zf.V),t.Y36(br.D),t.Y36(Fi.C))},n.\u0275cmp=t.Xpm({type:n,selectors:[["testbank-exam-result-student-exam-result-box","student",""]],inputs:{student:"student",examHashId:"examHashId",examId:"examId",backLink:"backLink",hasEssayQuestion:"hasEssayQuestion"},outputs:{onHandleRemove:"onHandleRemove",onHandleSelect:"onHandleSelect"},features:[t.qOj],attrs:ZL,decls:28,vars:35,consts:[["azt-track-service","student_exam_result_box-exJlVgNrtS",1,"py-3",3,"routerLink","queryParams"],[1,"rounded-md","bg-slate-100","dark:bg-darkmode-300",2,"min-height","85px","height","100%","position","relative",3,"ngClass"],["azt-track-service","student_exam_result_box-sBts0o9YG",1,"flex","items-center","p-3","student-exam-result-up",3,"ngClass"],[1,"w-12","h-10","image-fit","lg:mr-1"],[3,"linkAvatar","nameCreateAvatar","size"],[1,"ml-2","text-left","mt-0",2,"width","calc(100% - 3.5rem)"],["class","azt-student-name flex items-center","style","flex-wrap: wrap",4,"ngIf"],["appDrawNameImage","","class","mb-1 img-name-fluid",3,"nameImages",4,"ngIf"],[1,"flex","items-center","mt-1"],[1,"mr-auto","text-xs","mr-2"],["class","text-pending font-medium",4,"ngIf"],["class","text-danger",4,"ngIf"],["class","text-danger",3,"matTooltip",4,"ngIf"],["class","text-slate-500",4,"ngIf"],["class","text-slate-500 font-medium",4,"ngIf"],["class","text-black font-medium",4,"ngIf"],["class","flex items-center mt-1",4,"ngIf"],[1,"flex","items-center","px-3","py-2"],["class","text-slate-500 mr-auto text-xs mr-2",4,"ngIf"],[1,"text-slate-500","text-right","text-xs","font-medium"],[4,"ngIf"],["class","flex items-center px-3 pb-2",4,"ngIf"],["class","ml-auto absolute top-0 right-0 mt-1 mr-1",4,"ngIf"],[1,"azt-student-name","flex","items-center",2,"flex-wrap","wrap"],[1,"font-medium","mr-2"],["class","text-xs text-danger text-right",3,"matTooltip",4,"ngIf"],[1,"text-xs","text-danger","text-right",3,"matTooltip"],["appDrawNameImage","",1,"mb-1","img-name-fluid",3,"nameImages"],[1,"text-pending","font-medium"],[1,"text-danger"],[1,"text-danger",3,"matTooltip"],[1,"text-slate-500"],[1,"text-slate-500","font-medium"],[1,"text-black","font-medium"],[1,"text-slate-500","mr-auto","text-xs","mr-2"],[1,"flex","items-center","px-3","pb-2"],["class","mr-auto text-xs text-slate-500",4,"ngIf"],["class","text-xs text-slate-500 font-medium",4,"ngIf"],[1,"mr-auto","text-xs","text-slate-500"],[1,"text-xs","text-slate-500","font-medium"],["class","text-slate-500 text-right text-xs font-medium",4,"ngIf"],[1,"ml-auto","absolute","top-0","right-0","mt-1","mr-1"],["azt-track-service","student_exam_result_box-kNnrnaXhr",1,"clickable","flex","items-center","hover:bg-gray","dark:hover:bg-darkmode-400","rounded-md","p-1",3,"matMenuTriggerFor","click"],[1,"w-5","h-5","text-slate-500","inline-block"],["name","more-horizontal"],["xPosition","before"],["classroomMenuBox",""],[1,"dropdown-menu","show","relative","w-56"],[1,"dropdown-content"],["azt-track-service","student_exam_result_box-MzACwlQ5Mr",1,"clickable","dropdown-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-forward","w-4","h-4","mr-2"],["points","15 17 20 12 15 7"],["d","M4 18v-2a4 4 0 0 1 4-4h12"],["azt-track-service","student_exam_result_box-BqLEkIno8d",1,"clickable","dropdown-item","text-danger",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","icon-name","trash","data-lucide","trash",1,"lucide","lucide-trash","w-4","h-4","mr-2"],["points","3 6 5 6 21 6"],["d","M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"]],template:function(e,i){if(1&e&&(t.TgZ(0,"a",0),t.ALo(1,"navigationLocalize"),t.TgZ(2,"div",1)(3,"div",2)(4,"div",3),t._UZ(5,"azt-create-avatar",4),t.qZA(),t.TgZ(6,"div",5),t.YNc(7,qL,5,3,"div",6),t.YNc(8,FL,1,1,"img",7),t.TgZ(9,"div",8)(10,"div",9),t.YNc(11,QL,3,3,"span",10),t.YNc(12,RL,3,3,"span",11),t.YNc(13,UL,4,6,"span",12),t.YNc(14,BL,3,3,"span",13),t.YNc(15,zL,3,3,"span",14),t.YNc(16,JL,2,1,"span",15),t.qZA()(),t.YNc(17,$L,4,2,"div",16),t.qZA()(),t.TgZ(18,"div",17),t.YNc(19,YL,3,3,"div",18),t.TgZ(20,"div",19),t.YNc(21,KL,2,1,"span",20),t.YNc(22,WL,2,1,"span",20),t.qZA()(),t.YNc(23,t9,3,2,"div",21),t.YNc(24,n9,5,4,"div",21),t.YNc(25,i9,7,7,"div",21),t.YNc(26,o9,7,7,"div",21),t.YNc(27,s9,10,3,"div",22),t.qZA()()),2&e){let a,r;t.Q6J("routerLink",t.VKq(26,l9,t.lcZ(1,24,"/admin/testbank/test-review/"+i.examId+"/"+i.student.userId+"/"+i.student.studentId+"/"+(null!==(a=i.student.resultId)&&void 0!==a?a:0))))("queryParams",t.VKq(28,c9,i.backLink)),t.xp6(2),t.Q6J("ngClass",t.WLB(30,u9,i.student.resultId,i.student.isNotTested&&!i.student.resultId)),t.xp6(1),t.Q6J("ngClass",t.VKq(33,d9,i.student.resultId)),t.xp6(2),t.Q6J("linkAvatar",null!==(r=i.student.avatar)&&void 0!==r?r:"")("nameCreateAvatar",i.student.fullName)("size",40),t.xp6(2),t.Q6J("ngIf",!i.student.nameImages||i.commonService.convertStringToNumber(i.student.id)>0),t.xp6(1),t.Q6J("ngIf",i.student.nameImages&&i.commonService.convertStringToNumber(i.student.studentId)<=0),t.xp6(3),t.Q6J("ngIf",i.student.isNotMarked),t.xp6(1),t.Q6J("ngIf",i.student.isOnTest),t.xp6(1),t.Q6J("ngIf",i.student.isNotSubmit),t.xp6(1),t.Q6J("ngIf",i.student.isNotTested),t.xp6(1),t.Q6J("ngIf",i.student.isMarked),t.xp6(1),t.Q6J("ngIf",i.student.isMarked),t.xp6(1),t.Q6J("ngIf",i.student.isMarked&&i.student.subjectMarkValues&&i.student.subjectMarkValues.length),t.xp6(2),t.Q6J("ngIf",!i.student.isNotTested),t.xp6(2),t.Q6J("ngIf",i.student.isMarked||i.student.isNotMarked),t.xp6(1),t.Q6J("ngIf",i.student.isOnTest||i.student.isNotSubmit),t.xp6(1),t.Q6J("ngIf",i.hasEssayQuestion),t.xp6(1),t.Q6J("ngIf",i.student.isMarked||i.student.isNotMarked),t.xp6(1),t.Q6J("ngIf",i.student.isOffline),t.xp6(1),t.Q6J("ngIf",i.student.isOffline),t.xp6(1),t.Q6J("ngIf",i.showForwardResult&&i.student.resultId||i.student.isOffline)}},dependencies:[O.rH,D.mk,D.O5,Ii.VK,Ii.p6,Mi.gM,t4.g,e4.L,C.Nh5,jt.Jy,jt.JV,jt.gw,jt.Aw],encapsulation:2}),n})();function h9(n,o){if(1&n&&t.GkF(0,10),2&n){t.oxw();const e=t.MAs(14);t.Q6J("ngTemplateOutlet",e)}}function p9(n,o){1&n&&t._UZ(0,"azt-loading-effect")}function _9(n,o){if(1&n&&(t.TgZ(0,"div",13),t.GkF(1,10),t.qZA()),2&n){t.oxw(2);const e=t.MAs(16);t.xp6(1),t.Q6J("ngTemplateOutlet",e)}}function f9(n,o){if(1&n&&(t.TgZ(0,"div",16)(1,"div",17),t.GkF(2,10),t.qZA(),t._UZ(3,"azt-scroll-to-top-bottom",18),t.qZA()),2&n){t.oxw(3);const e=t.MAs(12);t.xp6(2),t.Q6J("ngTemplateOutlet",e),t.xp6(1),t.Q6J("isScrollToTop",!0)}}function g9(n,o){1&n&&(t.TgZ(0,"div",19)(1,"p",20),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&n&&(t.xp6(2),t.hij("",t.lcZ(3,1,"lang_not_found_search"),"!"))}function x9(n,o){if(1&n&&(t.TgZ(0,"div"),t.GkF(1,10),t.YNc(2,f9,4,2,"div",14),t.YNc(3,g9,4,3,"div",15),t.qZA()),2&n){const e=t.oxw(2),i=t.MAs(8);t.xp6(1),t.Q6J("ngTemplateOutlet",i),t.xp6(1),t.Q6J("ngIf",!e.noDataSearch),t.xp6(1),t.Q6J("ngIf",e.noDataSearch)}}function b9(n,o){if(1&n&&(t.YNc(0,_9,2,1,"div",11),t.YNc(1,x9,4,3,"div",12)),2&n){const e=t.oxw();t.Q6J("ngIf",e.isNotTestedYet&&!e.noDataSearch),t.xp6(1),t.Q6J("ngIf",!e.isNotTestedYet&&e.obj)}}const J6=function(n){return{"col-span-2":n}};function v9(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",24)(1,"button",25),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.selectClassroomToShowEvent(null==a.examResultObjsOfSelectedClassroom.classObj?null:a.examResultObjsOfSelectedClassroom.classObj.id))}),t.TgZ(2,"span",26),t.ALo(3,"mytranslate"),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()()()}if(2&n){const e=t.oxw(2);t.Q6J("ngClass",t.VKq(8,J6,e.isOpenSideNav)),t.xp6(2),t.Q6J("matTooltip",t.lcZ(3,4,null==e.examResultObjsOfSelectedClassroom.classObj?null:e.examResultObjsOfSelectedClassroom.classObj.name)+" ("+e.examResultObjsOfSelectedClassroom.countSubmitted+"/"+(null==e.examResultObjsOfSelectedClassroom.classObj?null:e.examResultObjsOfSelectedClassroom.classObj.countStudents)+")")("matTooltipPosition","above"),t.xp6(2),t.hij(" ",t.lcZ(5,6,null==e.examResultObjsOfSelectedClassroom.classObj?null:e.examResultObjsOfSelectedClassroom.classObj.name)+" ("+e.examResultObjsOfSelectedClassroom.countSubmitted+"/"+(null==e.examResultObjsOfSelectedClassroom.classObj?null:e.examResultObjsOfSelectedClassroom.classObj.countStudents)+")"," ")}}const y9=function(n){return{active:n}};function w9(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",24)(1,"button",27),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2).$implicit,r=t.oxw(2);return t.KtG(r.selectClassroomToShowEvent(null==a.classObj?null:a.classObj.id))}),t.TgZ(2,"span",26),t.ALo(3,"mytranslate"),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()()()}if(2&n){const e=t.oxw(2).$implicit,i=t.oxw(2);t.Q6J("ngClass",t.VKq(9,J6,i.isOpenSideNav)),t.xp6(1),t.Q6J("ngClass",t.VKq(11,y9,(null==i.examResultObjsOfSelectedClassroom.classObj?null:i.examResultObjsOfSelectedClassroom.classObj.id)==(null==e.classObj?null:e.classObj.id))),t.xp6(1),t.Q6J("matTooltip",t.lcZ(3,5,null==e.classObj?null:e.classObj.name)+" ("+e.countSubmitted+"/"+(null==e.classObj?null:e.classObj.countStudents)+")")("matTooltipPosition","above"),t.xp6(2),t.hij(" ",t.lcZ(5,7,null==e.classObj?null:e.classObj.name)+" ("+e.countSubmitted+"/"+(null==e.classObj?null:e.classObj.countStudents)+")"," ")}}function C9(n,o){if(1&n&&(t.ynx(0),t.YNc(1,w9,6,13,"div",22),t.BQk()),2&n){const e=t.oxw().$implicit,i=t.oxw(2);let a;t.xp6(1),t.Q6J("ngIf",e.indexCounter<i.showNumberClassroom||e.indexCounter<=i.showNumberClassroom&&(null!==(a=i.examResultObjsOfSelectedClassroom.indexCounter)&&void 0!==a?a:0)<=i.showNumberClassroom)}}function T9(n,o){if(1&n&&(t.ynx(0),t.YNc(1,C9,2,1,"ng-container",12),t.BQk()),2&n){const e=o.$implicit;t.xp6(1),t.Q6J("ngIf",null!=e.indexCounter)}}function k9(n,o){if(1&n&&t.GkF(0,10),2&n){t.oxw(2);const e=t.MAs(10);t.Q6J("ngTemplateOutlet",e)}}function A9(n,o){if(1&n&&(t.TgZ(0,"div",21),t.YNc(1,v9,6,10,"div",22),t.YNc(2,T9,2,1,"ng-container",23),t.YNc(3,k9,1,1,"ng-container",1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null!=e.examResultObjsOfSelectedClassroom.indexCounter&&e.examResultObjsOfSelectedClassroom.indexCounter>e.showNumberClassroom),t.xp6(1),t.Q6J("ngForOf",e.examResultObjsByClassroom),t.xp6(1),t.Q6J("ngIf",e.examResultObjsByClassroom.length>e.showNumberClassroom+1)}}function S9(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",36),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2).$implicit,r=t.oxw(2);return t.KtG(r.selectClassroomToShowEvent(null==a.classObj?null:a.classObj.id))}),t.TgZ(2,"span",37),t.ALo(3,"mytranslate"),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()()()}if(2&n){const e=t.oxw(2).$implicit;t.xp6(2),t.Q6J("matTooltip",t.lcZ(3,3,null==e.classObj?null:e.classObj.name)+" ("+e.countSubmitted+"/"+(null==e.classObj?null:e.classObj.countStudents)+")")("matTooltipPosition","left"),t.xp6(2),t.hij(" ",t.lcZ(5,5,null==e.classObj?null:e.classObj.name)+" ("+e.countSubmitted+"/"+(null==e.classObj?null:e.classObj.countStudents)+")"," ")}}function O9(n,o){if(1&n&&(t.ynx(0),t.YNc(1,S9,6,7,"li",12),t.BQk()),2&n){const e=t.oxw().$implicit,i=t.oxw(2);let a;t.xp6(1),t.Q6J("ngIf",e.indexCounter>i.showNumberClassroom||e.indexCounter>=i.showNumberClassroom&&(null!==(a=i.examResultObjsOfSelectedClassroom.indexCounter)&&void 0!==a?a:0)>i.showNumberClassroom)}}function E9(n,o){if(1&n&&(t.ynx(0),t.YNc(1,O9,2,1,"ng-container",12),t.BQk()),2&n){const e=o.$implicit,i=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null!=e.indexCounter&&(null==i.examResultObjsOfSelectedClassroom.classObj?null:i.examResultObjsOfSelectedClassroom.classObj.id)!=(null==e.classObj?null:e.classObj.id))}}const M9=function(n){return{"shadow-md":n}};function I9(n,o){if(1&n&&(t.TgZ(0,"div",28)(1,"button",29)(2,"span"),t._uU(3),t.ALo(4,"mytranslate"),t.qZA(),t.O4$(),t.TgZ(5,"svg",30),t._UZ(6,"polyline",31),t.qZA()(),t.kcU(),t.TgZ(7,"mat-menu",null,32)(9,"div",33)(10,"ng-scrollbar",34)(11,"ul",35),t.YNc(12,E9,2,1,"ng-container",23),t.qZA()()()()()),2&n){const e=t.MAs(8),i=t.oxw();t.xp6(1),t.Q6J("matMenuTriggerFor",e),t.xp6(2),t.Oqu(t.lcZ(4,5,"lang_auto_xem_them")),t.xp6(6),t.Q6J("ngClass",t.VKq(7,M9,i.examResultObjsByClassroom.length>=12)),t.xp6(1),t.Q6J("visibility","hover"),t.xp6(2),t.Q6J("ngForOf",i.examResultObjsByClassroom)}}function L9(n,o){1&n&&t._UZ(0,"azt-loading-effect")}const P9=function(n){return{"lg:col-span-3":n}};function N9(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",42)(1,"testbank-exam-result-student-exam-result-box",43),t.NdJ("onHandleSelect",function(){const r=t.CHM(e).$implicit,s=t.oxw(3);return t.KtG(s.handleSelectExamResult(r))})("onHandleRemove",function(){const r=t.CHM(e).index,s=t.oxw(3);return t.KtG(s.handleRemoveExamResult(r))}),t.qZA()()}if(2&n){const e=o.$implicit,i=t.oxw(3);t.Q6J("ngClass",t.VKq(6,P9,!i.isOpenSideNav&&!i.isMobile)),t.xp6(1),t.Q6J("student",e)("examHashId",null==i.obj?null:i.obj.hashId)("examId",null==i.obj?null:i.obj.id)("backLink",i.backToLink)("hasEssayQuestion",i.hasEssayQuestion)}}function Z9(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",44)(1,"div",45)(2,"button",46),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.selectPageWithClassroomId())}),t._uU(3),t.ALo(4,"mytranslate"),t.O4$(),t.TgZ(5,"svg",47),t._UZ(6,"polyline",31),t.qZA()()()()}2&n&&(t.xp6(3),t.hij(" ",t.lcZ(4,1,"lang_auto_xem_them"),"\xa0 "))}function D9(n,o){if(1&n&&(t.TgZ(0,"div",39),t.YNc(1,N9,2,8,"div",40),t.YNc(2,Z9,7,3,"div",41),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.lstStudentResults),t.xp6(1),t.Q6J("ngIf",e.canNextPage||e.checkShowLoadMore(-1==(null==e.examResultObjsOfSelectedClassroom.classObj?null:e.examResultObjsOfSelectedClassroom.classObj.id)?e.examResultObjsByPage.length:null==e.examResultObjsOfSelectedClassroom.results?null:e.examResultObjsOfSelectedClassroom.results.length))}}function j9(n,o){if(1&n&&(t.YNc(0,L9,1,0,"azt-loading-effect",3),t.YNc(1,D9,3,2,"ng-template",null,38,t.W1O)),2&n){const e=t.MAs(2),i=t.oxw();t.Q6J("ngIf",i.loadingResultList)("ngIfElse",e)}}function q9(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"a",51),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.showSelectFileScan())}),t.O4$(),t.TgZ(1,"svg",52),t._UZ(2,"path",53)(3,"circle",54),t.qZA(),t.kcU(),t.TgZ(4,"span"),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()()}if(2&n){const e=t.oxw(2);t.xp6(5),t.Oqu(t.lcZ(6,1,e.isMobileWebView?"lang_auto_cham_off":"lang_auto_cham_file_scan"))}}function F9(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"a",55),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.showSelectFileScan())}),t.O4$(),t.TgZ(1,"svg",52),t._UZ(2,"line",56)(3,"path",57)(4,"path",58)(5,"path",59),t.qZA(),t.kcU(),t.TgZ(6,"span"),t._uU(7),t.ALo(8,"mytranslate"),t.qZA()()}2&n&&(t.xp6(7),t.Oqu(t.lcZ(8,1,"lang_auto_huy_cham_file_scan")))}function Q9(n,o){if(1&n&&(t.TgZ(0,"p",48),t._uU(1),t.qZA(),t.YNc(2,q9,7,3,"a",49),t.YNc(3,F9,9,3,"a",50)),2&n){const e=t.oxw();t.xp6(1),t.hij(" ",e.headerTitle," "),t.xp6(1),t.Q6J("ngIf",e.isMobileWebView&&!e.showFileScan&&!e.isNotTestedYet),t.xp6(1),t.Q6J("ngIf",e.isMobileWebView&&e.showFileScan)}}function R9(n,o){1&n&&t._UZ(0,"div")}function U9(n,o){1&n&&(t._uU(0),t.ALo(1,"mytranslate")),2&n&&t.hij(" ",t.lcZ(1,1,"lang_auto_note_scan_file_in_student_exam_result_for_online_and_offline_exam_no_scan")," ")}function B9(n,o){if(1&n&&(t.TgZ(0,"div",68),t.YNc(1,R9,1,0,"div",3),t.ALo(2,"isOfflineExam"),t.YNc(3,U9,2,3,"ng-template",null,69,t.W1O),t.qZA()),2&n){const e=t.MAs(4),i=t.oxw(2);t.xp6(1),t.Q6J("ngIf",t.lcZ(2,2,i.obj))("ngIfElse",e)}}function z9(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",80)(1,"a",81),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.showSelectFileScan())}),t.O4$(),t.TgZ(2,"svg",74),t._UZ(3,"path",53)(4,"circle",54),t.qZA(),t.kcU(),t.TgZ(5,"span"),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()()()}if(2&n){const e=t.oxw(3);t.xp6(6),t.Oqu(t.lcZ(7,1,e.isMobileWebView?"lang_auto_cham_off":"lang_auto_cham_file_scan"))}}function J9(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",70),t.YNc(1,z9,8,3,"div",71),t.TgZ(2,"div",72)(3,"a",73),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.showCopySuccess())}),t.O4$(),t.TgZ(4,"svg",74),t._UZ(5,"circle",75)(6,"circle",76)(7,"circle",77)(8,"line",78)(9,"line",79),t.qZA(),t.kcU(),t.TgZ(10,"span"),t._uU(11),t.ALo(12,"mytranslate"),t.qZA()()()()}if(2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.isMobileWebView),t.xp6(2),t.Q6J("cdkCopyToClipboard",e.copyLinkToClipboard()),t.xp6(8),t.Oqu(t.lcZ(12,3,"lang_auto_copy_link_de_thi"))}}function H9(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",83)(1,"a",84),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.showSelectFileScan())}),t.O4$(),t.TgZ(2,"svg",74),t._UZ(3,"path",53)(4,"circle",54),t.qZA(),t.kcU(),t.TgZ(5,"span"),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()()()}if(2&n){const e=t.oxw(3);t.xp6(6),t.Oqu(t.lcZ(7,1,e.isMobileWebView?"lang_auto_cham_off":"lang_auto_cham_file_scan"))}}function G9(n,o){if(1&n&&t.YNc(0,H9,8,3,"div",82),2&n){const e=t.oxw(2);t.Q6J("ngIf",e.isMobileWebView)}}function $9(n,o){1&n&&(t.TgZ(0,"p",85),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_auto_hoac")))}function Y9(n,o){1&n&&(t.TgZ(0,"p",86),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_tai_app_azota_de_cham_bai_bang_camera_cua_dien_thoai_tai_app_tai_day")," "))}function K9(n,o){1&n&&(t.TgZ(0,"div",87)(1,"div",88)(2,"a",89),t._UZ(3,"img",90),t.ALo(4,"convertCdnLinkOfGitHub"),t.qZA(),t.TgZ(5,"a",91),t._UZ(6,"img",92),t.ALo(7,"convertCdnLinkOfGitHub"),t.qZA()()()),2&n&&(t.xp6(3),t.Q6J("src",t.lcZ(4,2,"images/google-play-badge.svg"),t.LSH),t.xp6(3),t.Q6J("src",t.lcZ(7,4,"images/2928664.svg"),t.LSH))}function W9(n,o){1&n&&(t.ynx(0),t.TgZ(1,"p",85),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"p",93),t._uU(5),t.ALo(6,"mytranslate"),t.qZA(),t.TgZ(7,"div",87)(8,"div",94)(9,"p",95)(10,"span",96),t._uU(11,"Google Play"),t.qZA(),t._UZ(12,"azt-download-qr-code",97),t.qZA(),t.TgZ(13,"p",98)(14,"span",96),t._uU(15,"App Store"),t.qZA(),t._UZ(16,"azt-download-qr-code",97),t.qZA()()(),t.BQk()),2&n&&(t.xp6(2),t.Oqu(t.lcZ(3,6,"lang_auto_hoac")),t.xp6(3),t.hij(" ",t.lcZ(6,8,"lang_auto_su_dung_ma_qr_de_tai_app_azota")," "),t.xp6(7),t.Q6J("fileName","azota_exam_qr_code_google_app")("linkUrl","https://play.google.com/store/apps/details?id=azt.teacher"),t.xp6(4),t.Q6J("fileName","azota_exam_qr_code_app_store")("linkUrl","https://apps.apple.com/vn/app/azota-teacher/id1658231068"))}function V9(n,o){if(1&n&&(t.TgZ(0,"div",60)(1,"h3",61),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.YNc(4,B9,5,4,"div",62),t.YNc(5,J9,13,5,"div",63),t.ALo(6,"isOfflineExam"),t.YNc(7,G9,1,1,"ng-template",null,64,t.W1O),t.YNc(9,$9,3,3,"p",65),t.ALo(10,"isOfflineExam"),t.YNc(11,Y9,3,3,"p",66),t.YNc(12,K9,8,6,"div",67),t.YNc(13,W9,17,10,"ng-container",12),t.qZA()),2&n){const e=t.MAs(8),i=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,8,"lang_auto_chua_co_du_lieu_nop_bai")),t.xp6(2),t.Q6J("ngIf",!i.isMobileWebView),t.xp6(1),t.Q6J("ngIf",!t.lcZ(6,10,i.obj))("ngIfElse",e),t.xp6(4),t.Q6J("ngIf",!i.isMobileWebView&&!t.lcZ(10,12,i.obj)),t.xp6(2),t.Q6J("ngIf",!i.isMobileWebView),t.xp6(1),t.Q6J("ngIf",!i.isMobileWebView),t.xp6(1),t.Q6J("ngIf",!i.isMobile)}}const X9=function(n){return{"py-2":n}},tP=["*"];let eP=(()=>{class n extends St.Q{copyLinkToClipboard(){return`${this.commonService.getCurrentDomain()}/de-thi/${this.obj?.hashId}`}showCopySuccess(){this.showSuccessSnack("lang_auto_sao_chep_thanh_cong")}showSelectFileScan(){this.isMobileWebView?this.mobileWebviewService.sendMarkOfflineExamObj(this.obj?.hashId??""):(this.showFileScan=!this.showFileScan,this.notTestedOpenFileScan.emit(this.showFileScan))}selectPageEvent(e){this.examResultObjsByPage=[],this.curPage=e;let a=this.examResultObjsByClassroom.find(r=>-1==r.classObj?.id);if(a&&a.results?.length){let r=a.results??[];this.totalPage=Math.ceil(r.length/100),this.examResultObjsByPage=r}setTimeout(()=>{this.scrollToPosition(this.currentScrollPosition)},100)}selectPageWithClassroomId(){this.curPage+=1,this.selectPageClassroomEmitter.emit({classroomId:this.currentClassroomId,page:this.curPage})}ngAfterViewInit(){this.scrollbarRef&&this.scrollbarRef.scrolled.subscribe(e=>{e.target&&e.target instanceof HTMLElement&&(this.currentScrollPosition=e.target.scrollTop)})}scrollToPosition(e){try{this.scrollbarRef&&this.scrollbarRef.scrollTo({top:e})}catch{}}checkShowLoadMore(e){return!!e&&e%this.sizePage==0}selectClassroomToShowEvent(e){this.currentClassroomId=e??-1,this.initDataForClassroom(),this.selectTabClassroomEmitter.emit(e)}findClassroomIdByExamResultId(e,i){for(var a of e)for(var r of a.results??[])if(r.id?.toString()==i.toString()&&a.classObj?.id)return a.classObj.id}findClassroomDataByClassroomId(e,i){for(var a of e)if(a.classObj?.id?.toString()==i)return a;return e.length>0?e[0]:void 0}initDataForClassroom(){this.currentClassroomId||(this.currentClassroomId=(this.mustShownResultId??this.examResultObjsByClassroom?.[0].classObj?.id)||-1);var i=this.findClassroomDataByClassroomId(this.examResultObjsByClassroom,this.currentClassroomId.toString());i&&(this.examResultObjsOfSelectedClassroom=i)}handleSelectExamResult(e){e.resultId&&this.commonService.myNavigationWithQueryString(`/admin/testbank/test-review/${this.obj?.id}/${e.userId}/${e.studentId}/${e.resultId??0}`,`?backto=${this.backToLink}`,!0)}handleRemoveExamResult(e){this.removeOfflineResultEmitter.emit(!0)}ngOnChanges(e){if(e.examResultObjsByClassroom){if(this.mustShownResultId){var i=this.findClassroomIdByExamResultId(this.examResultObjsByClassroom,this.mustShownResultId);this.currentClassroomId=i??this.currentClassroomId}this.initDataForClassroom(),this.selectPageEvent(this.curPage)}this.scrollbarRef&&this.scrollbarRef.scrolled.subscribe(a=>{a.target&&a.target instanceof HTMLElement&&(this.currentScrollPosition=a.target.scrollTop)})}ngOnInit(){this.examResultObjsByClassroom.length&&(this.initDataForClassroom(),this.selectPageEvent(this.curPage)),super.ngOnInit()}get lstStudentResults(){return(-1==this.examResultObjsOfSelectedClassroom.classObj?.id?this.examResultObjsByPage:this.examResultObjsOfSelectedClassroom.results)??[]}constructor(e,i,a){super(),this.timeService=e,this.examResultFilterService=i,this.mobileWebviewService=a,this.noDataSearch=!1,this.isOpenSideNav=!0,this.isMobile=!1,this.backToLink="",this.scanLoading=!1,this.showFileScan=!1,this.mustShownResultId=0,this.headerTitle="",this.notTestedOpenFileScan=new t.vpe,this.selectTabClassroomEmitter=new t.vpe,this.selectPageClassroomEmitter=new t.vpe,this.removeOfflineResultEmitter=new t.vpe,this.obj=void 0,this.examResultObjsByClassroom=[],this.isNotTestedYet=!1,this.hasEssayQuestion=!1,this.loadingResultList=!1,this.currentClassroomId=0,this.canNextPage=!1,this.examResultObjsOfSelectedClassroom={},this.showNumberClassroom=(this.isMobile?1:3)-1,this.examResultObjsByPage=[],this.totalPage=0,this.curPage=1,this.sizePage=100,this.currentScrollPosition=0}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(br.D),t.Y36($y),t.Y36(B0.r))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-student-exam-result-v2"]],viewQuery:function(e,i){if(1&e&&t.Gf(L.KC,5),2&e){let a;t.iGM(a=t.CRH())&&(i.scrollbarRef=a.first)}},inputs:{noDataSearch:"noDataSearch",isOpenSideNav:"isOpenSideNav",isMobile:"isMobile",backToLink:"backToLink",scanLoading:"scanLoading",showFileScan:"showFileScan",mustShownResultId:"mustShownResultId",headerTitle:"headerTitle",obj:"obj",examResultObjsByClassroom:"examResultObjsByClassroom",isNotTestedYet:"isNotTestedYet",hasEssayQuestion:"hasEssayQuestion",loadingResultList:"loadingResultList",currentClassroomId:"currentClassroomId",canNextPage:"canNextPage"},outputs:{notTestedOpenFileScan:"notTestedOpenFileScan",selectTabClassroomEmitter:"selectTabClassroomEmitter",selectPageClassroomEmitter:"selectPageClassroomEmitter",removeOfflineResultEmitter:"removeOfflineResultEmitter"},features:[t.qOj,t.TTD],ngContentSelectors:tP,decls:17,vars:6,consts:[[1,"flex","items-center","mt-5","mb-5"],[3,"ngTemplateOutlet",4,"ngIf"],[1,"box","mt-2","relative",2,"min-height","90vh",3,"ngClass"],[4,"ngIf","ngIfElse"],["noLoading",""],["showClassroomTabTmp",""],["seeMoreTabOnWebTmp",""],["showExamResultInOneClassroom",""],["examResultHeaderTmp",""],["notTestYetTmp",""],[3,"ngTemplateOutlet"],["class","scrollable-content flex items-center",4,"ngIf"],[4,"ngIf"],[1,"scrollable-content","flex","items-center"],["class","azt-student-list scrollable-content relative",4,"ngIf"],["class","text-center mt-5",4,"ngIf"],[1,"azt-student-list","scrollable-content","relative"],[1,"p-3"],[3,"isScrollToTop"],[1,"text-center","mt-5"],[1,"h4"],[1,"nav","nav-link-tabs","grid","grid-cols-12","grap-3","p-2"],["class","col-span-6 md:col-span-3 nav-item",3,"ngClass",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"col-span-6","md:col-span-3","nav-item",3,"ngClass"],["azt-track-service","student-exam-result-new-MSaafbzaB",1,"active","nav-link","w-full","py-1",3,"click"],[1,"truncate",3,"matTooltip","matTooltipPosition"],["azt-track-service","student-exam-result-new-_LwxxkAKE2",1,"nav-link","w-full","py-1",3,"ngClass","click"],[1,"col-span-6","md:col-span-3","nav-item"],[1,"nav-link","flex","items-center","w-full","py-1",2,"border","none","justify-content","center",3,"matMenuTriggerFor"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide","ml-2"],["points","6 9 12 15 18 9"],["listActiveMenu","matMenu"],[1,"dropdown-menu","show","relative","w-60",2,"height","450px",3,"ngClass"],["pointerEventsMethod","scrollbar",3,"visibility"],[1,"dropdown-content"],["azt-track-service","student-exam-result-new-UODUmv0qb5",1,"dropdown-item",3,"click"],[1,"truncate","w-52",3,"matTooltip","matTooltipPosition"],["doneLoadList",""],[1,"grid","grid-cols-12","gap-3",2,"margin-bottom","85px"],["class","col-span-12 sm:col-span-6 lg:col-span-4 2xl:col-span-3",3,"ngClass",4,"ngFor","ngForOf"],["class","col-span-12 mt-2",4,"ngIf"],[1,"col-span-12","sm:col-span-6","lg:col-span-4","2xl:col-span-3",3,"ngClass"],[1,"w-full",3,"student","examHashId","examId","backLink","hasEssayQuestion","onHandleSelect","onHandleRemove"],[1,"col-span-12","mt-2"],[1,"text-center","mt-3"],["azt-track-service","student-exam-result-new-QpFPWsrS4","mat-button","",1,"btn","btn-outline-secondary","btn-transparent",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],[1,"text-md","font-medium","mr-auto"],["azt-track-service","student-exam-result-new-YugzQx7amV","style","height: 43px;font-size: 13px;","class","btn btn-pending-soft btn-sm",3,"click",4,"ngIf"],["azt-track-service","student-exam-result-new-UfMbOZaVPI","class","btn btn-pending-soft btn-sm",3,"click",4,"ngIf"],["azt-track-service","student-exam-result-new-YugzQx7amV",1,"btn","btn-pending-soft","btn-sm",2,"height","43px","font-size","13px",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","mr-2","lucide"],["d","M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z"],["cx","12","cy","13","r","3"],["azt-track-service","student-exam-result-new-UfMbOZaVPI",1,"btn","btn-pending-soft","btn-sm",3,"click"],["x1","2","y1","2","x2","22","y2","22"],["d","M7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16"],["d","M9.5 4h5L17 7h3a2 2 0 0 1 2 2v7.5"],["d","M14.121 15.121A3 3 0 1 1 9.88 10.88"],[1,"text-center","mt-3","mx-auto","p-3",2,"max-width","28rem"],[1,"font-medium","text-lg"],["class","mt-3 mx-auto",4,"ngIf"],["class","flex flex-col md:flex-row mx-auto",4,"ngIf","ngIfElse"],["OfflineExam",""],["class","h5 mt-2 font-medium",4,"ngIf"],["class","mt-2 ml-auto mr-auto w-4/5",4,"ngIf"],["class","grid grid-cols-12 mt-2 ml-auto mr-auto justify-center",4,"ngIf"],[1,"mt-3","mx-auto"],["notOfflineExam",""],[1,"flex","flex-col","md:flex-row","mx-auto"],["class","mt-3 lg:mr-auto",4,"ngIf"],[1,"mt-3","lg:mx-auto"],["azt-track-service","student-exam-result-new-9Vqr3K2yC9",1,"btn","btn-secondary-soft",3,"cdkCopyToClipboard","click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide","mr-2"],["cx","18","cy","5","r","3"],["cx","6","cy","12","r","3"],["cx","18","cy","19","r","3"],["x1","8.59","y1","13.51","x2","15.42","y2","17.49"],["x1","15.41","y1","6.51","x2","8.59","y2","10.49"],[1,"mt-3","lg:mr-auto"],["azt-track-service","student-exam-result-new-Kn62V1VJ1o",1,"btn","btn-secondary-soft",3,"click"],["class","mt-3 lg:ml-auto",4,"ngIf"],[1,"mt-3","lg:ml-auto"],["azt-track-service","student-exam-result-new-xsQoGzCGKe",1,"btn","btn-secondary-soft",3,"click"],[1,"h5","mt-2","font-medium"],[1,"mt-2","ml-auto","mr-auto","w-4/5"],[1,"grid","grid-cols-12","mt-2","ml-auto","mr-auto","justify-center"],[1,"col-span-12","w-full","self-center","mb-2"],["azt-track-service","student-exam-result-new-OSvgGR80G","href","https://play.google.com/store/apps/details?id=azt.teacher","target","_blank","rel","noopener",1,"pl-1","pr-1","mb-2","display-inline-block"],["alt","Get it on Google Play","width","150px",1,"play-store-badge",3,"src"],["azt-track-service","student-exam-result-new-bJncs5ICRt","href","https://apps.apple.com/vn/app/azota-teacher/id1658231068","target","_blank","rel","noopener",1,"pl-1","pl-1","mb-2","display-inline-block"],["alt","Download on the App Store","width","135px",1,"app-store-badge",3,"src"],[1,"mt-2","ml-auto","mr-auto","w-80"],[1,"col-span-12","items-center","mb-2"],[1,"px-1","mb-1","py-1","inline-flex","border","border-slate-200","rounded"],[1,"my-auto"],[1,"ml-1",3,"fileName","linkUrl"],[1,"ml-2","px-1","py-1","mb-1","inline-flex","border","border-slate-200","rounded"]],template:function(e,i){if(1&e&&(t.F$t(),t.TgZ(0,"div",0),t.YNc(1,h9,1,1,"ng-container",1),t.qZA(),t.TgZ(2,"div",2),t.Hsn(3),t.YNc(4,p9,1,0,"azt-loading-effect",3),t.YNc(5,b9,2,2,"ng-template",null,4,t.W1O),t.qZA(),t.YNc(7,A9,4,3,"ng-template",null,5,t.W1O),t.YNc(9,I9,13,9,"ng-template",null,6,t.W1O),t.YNc(11,j9,3,2,"ng-template",null,7,t.W1O),t.YNc(13,Q9,4,3,"ng-template",null,8,t.W1O),t.YNc(15,V9,14,14,"ng-template",null,9,t.W1O)),2&e){const a=t.MAs(6);t.xp6(1),t.Q6J("ngIf",i.obj),t.xp6(1),t.Q6J("ngClass",t.VKq(4,X9,!i.showFileScan)),t.xp6(2),t.Q6J("ngIf",i.scanLoading)("ngIfElse",a)}},dependencies:[D.mk,D.sg,D.O5,D.tP,Cp.i3,vr.lW,Ii.VK,Ii.p6,Mi.gM,L.KC,si.l,Vf.W,tg.M,m9,jt.JV,jt.CL,jt.Bo],encapsulation:2}),n})();const nP=["drawer"];function iP(n,o){1&n&&t._UZ(0,"azt-loading-effect")}function oP(n,o){1&n&&t._UZ(0,"status-loading-effect-component")}function aP(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"menu-offline-test",52),t.NdJ("reloadApi",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.reloadApi())}),t.qZA(),t.BQk()}if(2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("initData",e.initDataTestedList)("examStudents",e.examStudents)("loadingApi",e.statusObj.loading)("isNotTestedYet",e.isNotTestedYet)}}function rP(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"menu-online-test",53),t.NdJ("reloadApi",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.reloadApi())}),t.qZA()}if(2&n){const e=t.oxw(2);t.Q6J("initData",e.initDataTestedList)("examStudents",e.examStudents)("currentSelectedClassroomId",e.currentSelectClassroomId)("isNotTestedYet",e.isNotTestedYet)("userList",e.allUserObjsForMonitorModule)}}function sP(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",54),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.sAztMatDrawerService.openDrawer())}),t.ALo(1,"mytranslate"),t.O4$(),t.TgZ(2,"svg",44),t._UZ(3,"rect",55)(4,"path",56)(5,"path",57),t.qZA()()}2&n&&t.s9C("matTooltip",t.lcZ(1,1,"lang_auto_mo_menu"))}function lP(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",58),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.sAztMatDrawerService.closeDrawer())}),t.ALo(1,"mytranslate"),t.O4$(),t.TgZ(2,"svg",44),t._UZ(3,"rect",55)(4,"path",56)(5,"path",59),t.qZA()()}2&n&&t.s9C("matTooltip",t.lcZ(1,1,"lang_auto_dong_menu"))}function cP(n,o){1&n&&(t.TgZ(0,"div",60)(1,"div",61)(2,"p",62),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()()()),2&n&&(t.xp6(3),t.hij("",t.lcZ(4,1,"lang_not_found_search"),"!"))}function uP(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"app-file-scan-offline-exam-new",65),t.NdJ("saveStudentMarkEmit",function(a){t.CHM(e);const r=t.oxw(3);return t.KtG(r.scanMarkObjs(a))})("firstSuccessResultId",function(a){t.CHM(e);const r=t.oxw(3);return t.KtG(r.foundClassOfSuccessScanResult(a))})("showStudentMarkEmit",function(a){t.CHM(e);const r=t.oxw(3);return t.KtG(r.closeScanFile(a))}),t.qZA()}if(2&n){const e=t.oxw(3);t.Q6J("backToLink",e.backFromStudentView)("examObj",e.examObj)("loadedJs",e.loadedJs)("tokenScan",e.tokenScanExamOffline)("hasExamOffline",e.hasExamOffline)("examOfflineMessage",e.examOfflineMessage)}}function dP(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"app-student-exam-result-v2",63),t.NdJ("removeOfflineResultEmitter",function(a){t.CHM(e);const r=t.oxw(2);return t.KtG(r.afterRemoveOfflineResult(a))})("selectTabClassroomEmitter",function(a){t.CHM(e);const r=t.oxw(2);return t.KtG(r.selectTabClassroomShow(a))})("selectPageClassroomEmitter",function(a){t.CHM(e);const r=t.oxw(2);return t.KtG(r.selectPageClassroomShow(a))})("notTestedOpenFileScan",function(a){t.CHM(e);const r=t.oxw(2);return t.KtG(r.openFileScan(a))}),t.YNc(1,uP,1,6,"app-file-scan-offline-exam-new",64),t.qZA()}if(2&n){const e=t.oxw(2);t.Q6J("noDataSearch",e.noDataSearch)("backToLink",e.backFromStudentView)("examResultObjsByClassroom",e.allViewExamResultObjsOfStudentByClassroom)("isNotTestedYet",e.isNotTestedYet)("isOpenSideNav",e.sAztMatDrawerService.isOpenSideNav)("hasEssayQuestion",e.hasEssayQuestion)("showFileScan",e.showFileScan)("obj",e.examObj)("scanLoading",e.scanLoading)("isMobile",e.isMobileDevice)("currentClassroomId",e.currentSelectClassroomId)("headerTitle",e.headerTitle)("mustShownResultId",e.mustShownResultId)("loadingResultList",e.loadingResultList)("canNextPage",e.canNextPage),t.xp6(1),t.Q6J("ngIf",e.showFileScan&&e.examObj)}}function mP(n,o){if(1&n&&t._UZ(0,"app-excel-score-sheet",66),2&n){const e=t.oxw(2);t.Q6J("dataScore",e.highestMark)("dataScoreByClass",e.dataExportHighestMark)("maxGroupQuestion",e.maxGroupQuestion)("examObj",e.examObj)("totalQuestion",e.totalExamQuestion)("exportQuestionObjs",e.exportQuestionObjs)("tableType","highest")("isSortByMark",e.form.controls.isSortByMarkDesc.value)("isSortByTime",e.form.controls.isSortByTimeDesc.value)("isSortByName",e.form.controls.isSortByNameAsc.value)("hasEssayQuestion",e.hasEssayQuestion)("countEssayQuestion",e.countEssayQuestion)}}function hP(n,o){if(1&n&&t._UZ(0,"app-excel-score-sheet",66),2&n){const e=t.oxw(2);t.Q6J("dataScore",e.exportToExcelObjs)("dataScoreByClass",e.dataExportLastTime)("maxGroupQuestion",e.maxGroupQuestion)("examObj",e.examObj)("totalQuestion",e.totalExamQuestion)("exportQuestionObjs",e.exportQuestionObjs)("tableType","lastTime")("isSortByMark",e.form.controls.isSortByMarkDesc.value)("isSortByTime",e.form.controls.isSortByTimeDesc.value)("isSortByName",e.form.controls.isSortByNameAsc.value)("hasEssayQuestion",e.hasEssayQuestion)("countEssayQuestion",e.countEssayQuestion)}}function pP(n,o){if(1&n&&t._UZ(0,"app-excel-score-sheet",66),2&n){const e=t.oxw(2);t.Q6J("dataScore",e.firstMark)("dataScoreByClass",e.dataExportFirstTime)("maxGroupQuestion",e.maxGroupQuestion)("examObj",e.examObj)("totalQuestion",e.totalExamQuestion)("exportQuestionObjs",e.exportQuestionObjs)("tableType","firstTime")("isSortByMark",e.form.controls.isSortByMarkDesc.value)("isSortByTime",e.form.controls.isSortByTimeDesc.value)("isSortByName",e.form.controls.isSortByNameAsc.value)("hasEssayQuestion",e.hasEssayQuestion)("countEssayQuestion",e.countEssayQuestion)}}function _P(n,o){if(1&n&&t._UZ(0,"app-excel-score-sheet",66),2&n){const e=t.oxw(2);t.Q6J("dataScore",e.allTimeMark)("dataScoreByClass",e.dataExportAllTime)("maxGroupQuestion",e.maxGroupQuestion)("examObj",e.examObj)("totalQuestion",e.totalExamQuestion)("exportQuestionObjs",e.exportQuestionObjs)("tableType","allTime")("isSortByMark",e.form.controls.isSortByMarkDesc.value)("isSortByTime",e.form.controls.isSortByTimeDesc.value)("isSortByName",e.form.controls.isSortByNameAsc.value)("hasEssayQuestion",e.hasEssayQuestion)("countEssayQuestion",e.countEssayQuestion)}}const fP=function(n,o){return{"w-85":n,"w-30":o}},gP=function(n){return{"azt-mobile-draw-left":n}},xP=function(n){return{"ml-30":n}},bP=function(n){return{"ml-5":n}},vP=function(n){return{"px-0":n}};function yP(n,o){if(1&n){const e=t.EpF();t._UZ(0,"azt-export-docx-loading-box",25),t.YNc(1,oP,1,0,"status-loading-effect-component",8),t.TgZ(2,"div",26)(3,"mat-drawer-container",27)(4,"mat-drawer",28,29),t.NdJ("closedStart",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.changeStatusNav())})("openedChange",function(a){t.CHM(e);const r=t.oxw();return t.KtG(r.sAztMatDrawerService.openedChange(a))}),t.TgZ(6,"div",30),t.YNc(7,aP,2,4,"ng-container",1),t.YNc(8,rP,1,5,"ng-template",null,31,t.W1O),t.qZA()(),t.TgZ(10,"mat-drawer-content",32)(11,"div",33)(12,"div",34),t.YNc(13,sP,6,3,"button",35),t.YNc(14,lP,6,3,"button",36),t.TgZ(15,"div",37)(16,"div",38)(17,"azt-search-box",39),t.NdJ("onSearch",function(a){t.CHM(e);const r=t.oxw();return t.KtG(r.search(a.searchObj))}),t.ALo(18,"mytranslate"),t.qZA()(),t.TgZ(19,"div",40)(20,"testbank-exam-result-filter-menu",41),t.NdJ("changeFilterEvent",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.changeFilterEvent())}),t.qZA()(),t.TgZ(21,"div",42)(22,"button",43),t.O4$(),t.TgZ(23,"svg",44),t._UZ(24,"line",45)(25,"line",46)(26,"line",47),t.qZA()()()()(),t.kcU(),t.TgZ(27,"div",48),t.YNc(28,cP,5,3,"div",49),t.YNc(29,dP,2,16,"ng-template",null,50,t.W1O),t.qZA()(),t.YNc(31,mP,1,12,"app-excel-score-sheet",51),t.YNc(32,hP,1,12,"app-excel-score-sheet",51),t.YNc(33,pP,1,12,"app-excel-score-sheet",51),t.YNc(34,_P,1,12,"app-excel-score-sheet",51),t.qZA()()()}if(2&n){const e=t.MAs(9),i=t.MAs(30),a=t.oxw(),r=t.MAs(5);t.Q6J("msg",a.exportResultService.keyLoading)("show",a.exportResultService.isLoading)("percent",a.exportResultService.percent),t.xp6(1),t.Q6J("ngIf",a.exportLoading),t.xp6(2),t.Q6J("hasBackdrop",a.sAztMatDrawerService.hasBackdrop),t.xp6(1),t.s9C("opened",a.sAztMatDrawerService.isOpenSideNav?"true":"false"),t.Q6J("ngClass",t.WLB(29,fP,a.isMobileDevice,!a.isMobileDevice))("mode",a.sAztMatDrawerService.mode),t.xp6(2),t.Q6J("ngClass",t.VKq(32,gP,a.isMobileDevice)),t.xp6(1),t.Q6J("ngIf",a.isOfflineExam)("ngIfElse",e),t.xp6(3),t.Q6J("ngClass",t.VKq(34,xP,!a.isMobileDevice&&a.sAztMatDrawerService.isOpenSideNav)),t.xp6(1),t.Q6J("ngClass",t.VKq(36,bP,!a.isMobileDevice&&a.sAztMatDrawerService.isOpenSideNav)),t.xp6(2),t.Q6J("ngIf",!a.sAztMatDrawerService.isOpenSideNav||a.isMobileDevice),t.xp6(1),t.Q6J("ngIf",a.sAztMatDrawerService.isOpenSideNav&&!a.isMobileDevice),t.xp6(3),t.Q6J("isServerSearch",!0)("placeholder",t.lcZ(18,27,"lang_testbank_tested_list_search"))("searchContentObj",a.searchContentObj)("styleInput",a.styleInput),t.xp6(5),t.Q6J("matMenuTriggerFor",r),t.xp6(5),t.Q6J("ngClass",t.VKq(38,vP,a.isMobileDevice||!a.sAztMatDrawerService.isOpenSideNav)),t.xp6(1),t.Q6J("ngIf",a.noDataSearch&&0==a.allViewExamResultObjsOfStudentByClassroom.length&&0!=a.allRawExamResultObjsOfStudentByClassroom.length)("ngIfElse",i),t.xp6(3),t.Q6J("ngIf",a.examObj),t.xp6(1),t.Q6J("ngIf",a.examObj),t.xp6(1),t.Q6J("ngIf",a.examObj),t.xp6(1),t.Q6J("ngIf",a.examObj)}}function wP(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",67),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.exportToExcel("lastTime"))}),t.O4$(),t.TgZ(2,"svg",68),t._UZ(3,"path",69)(4,"polyline",70)(5,"line",71),t.qZA(),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()()}2&n&&(t.xp6(6),t.hij(" ",t.lcZ(7,1,"lang_testbank_tested_list_export_excel_last_exam")," "))}function CP(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",72),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.exportToExcel("highest"))}),t.O4$(),t.TgZ(2,"svg",68),t._UZ(3,"path",69)(4,"polyline",70)(5,"line",71),t.qZA(),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()()}2&n&&(t.xp6(6),t.hij(" ",t.lcZ(7,1,"lang_testbank_tested_list_export_excel_highest_point")," "))}function TP(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",73),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.exportToExcel("firstTime"))}),t.O4$(),t.TgZ(2,"svg",68),t._UZ(3,"path",69)(4,"polyline",70)(5,"line",71),t.qZA(),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()()}2&n&&(t.xp6(6),t.hij(" ",t.lcZ(7,1,"lang_testbank_tested_list_export_excel_first_time_score")," "))}function kP(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",74),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.exportToExcel("allTime"))}),t.O4$(),t.TgZ(2,"svg",68),t._UZ(3,"path",69)(4,"polyline",70)(5,"line",71),t.qZA(),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()()}2&n&&(t.xp6(6),t.hij(" ",t.lcZ(7,1,"lang_testbank_tested_list_export_excel_all_exam")," "))}function AP(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",75),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.exportToPDF())}),t.O4$(),t.TgZ(2,"svg",76),t._UZ(3,"path",77)(4,"polyline",78)(5,"line",79)(6,"line",80)(7,"line",81),t.qZA(),t._uU(8),t.ALo(9,"mytranslate"),t.qZA()()}2&n&&(t.xp6(8),t.hij(" ",t.lcZ(9,1,"lang_testbank_tested_list_export_pdf_last")," "))}function SP(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",82),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.exportToPDF("highest"))}),t.O4$(),t.TgZ(2,"svg",76),t._UZ(3,"path",77)(4,"polyline",78)(5,"line",79)(6,"line",80)(7,"line",81),t.qZA(),t._uU(8),t.ALo(9,"mytranslate"),t.qZA()()}2&n&&(t.xp6(8),t.hij(" ",t.lcZ(9,1,"lang_testbank_tested_list_export_pdf_point_bigger")," "))}function OP(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",83),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.exportToPDF("first"))}),t.O4$(),t.TgZ(2,"svg",76),t._UZ(3,"path",77)(4,"polyline",78)(5,"line",79)(6,"line",80)(7,"line",81),t.qZA(),t._uU(8),t.ALo(9,"mytranslate"),t.qZA()()}2&n&&(t.xp6(8),t.hij(" ",t.lcZ(9,1,"lang_testbank_tested_list_export_pdf_fisrt")," "))}let EP=(()=>{class n extends St.Q{set drawer(e){this.sAztMatDrawerService.resizeDrawerHeight(!0,e)}changeStatusNav(){this.isMobileDevice&&(document.body.style.overflow="auto")}saveStatusSideNav(){this.examFilterService.saveStatusSideNav("exam",this.sAztMatDrawerService.isOpenSideNav)}removeStatusSideNav(){this.examFilterService.removeStatusSideNav("exam")}getStatusSideNav(){if(window.innerWidth>980){let e=this.examFilterService.getStatusSideNav("exam");e&&"close"==e?this.sAztMatDrawerService.closeDrawer():this.sAztMatDrawerService.openDrawer()}}_viewDataBySortSearchAndFilter(){let e=this.commonService.myClone(this.allRawExamResultObjsOfStudentByClassroom);var i=this.sAztExamResultListSortService._getCurrentSortTypeOfSetting();e=this.sAztExamResultListSortService._sortExamResultObjsBySettingObjByClassroom(e,this.hasEssayQuestion,i),this.allViewExamResultObjsOfStudentByClassroom=e,this.loadingResultList=!1}search(e){this.searchContentObj=e,this.getStudentResultByPage(1,!0)}changeFilterEvent(){this.allViewExamResultObjsOfStudentByClassroom=[],this.loadingResultList=!0,this.getCounterStudentOfClassroomFiltered().subscribe(e=>{this.getStudentResultByPage(1)})}getCounterStudentOfClassroomFiltered(){return new it.y(e=>{let a,r,i=this.examResultFilterService.getDefaultFilterObj();i&&(i.isMarked&&(a=1),i.isNotMarked&&(a=0),i.isMarked&&i.isNotMarked&&(a=2),i.isOnTest&&(r=0),i.isNotTested&&(r=-1),i.isOnTest&&i.isNotTested&&(r=2)),this.examPageResultService.apiExamPageResultListExamClassroomsGet(this.examId,r,a).subscribe(s=>{s.success&&s.data?.objs&&s.data?.objs.length?(s.data?.objs.forEach(l=>{this.allRawExamResultObjsOfStudentByClassroom.forEach(c=>{c.classObj?.id==l.id&&(0==l.totalTested&&(c.results=[]),c.countSubmitted=l.totalTested)},this.allRawExamResultObjsOfStudentByClassroom)}),e.next(!0),e.complete()):(e.next(!1),e.complete(),this.stopStatusObj())})})}changeSortEvent(e){let i=!1;"isSortByNameAsc"==e&&this.form.controls.isSortByNameAsc.value&&(this.form.controls.isSortByNameAsc.setValue(!1),this.form.controls.isSortByMarkDesc.setValue(!1),this.form.controls.isSortByTimeDesc.setValue(!1),this.form.controls.isSortByNameAsc.setValue(!0),i=!0),"isSortByMarkDesc"==e&&this.form.controls.isSortByMarkDesc.value&&(this.form.controls.isSortByNameAsc.setValue(!1),this.form.controls.isSortByMarkDesc.setValue(!1),this.form.controls.isSortByTimeDesc.setValue(!1),this.form.controls.isSortByMarkDesc.setValue(!0),i=!0),"isSortByTimeDesc"==e&&this.form.controls.isSortByTimeDesc.value&&(this.form.controls.isSortByNameAsc.setValue(!1),this.form.controls.isSortByMarkDesc.setValue(!1),this.form.controls.isSortByTimeDesc.setValue(!1),this.form.controls.isSortByTimeDesc.setValue(!0),i=!0),i?this.sAztExamResultListSortService._saveSortTypeOfSetting(e):this.sAztExamResultListSortService._removeSortTypeOfSetting(),this._viewDataBySortSearchAndFilter()}processDataForExcel(e){var i=[];return e.forEach(a=>{a.results=this.mapQuestionWithAnswerForExportExcel(this.sortService.sortFirstNameStudents(a.results??new Array),this.exportQuestionObjs),a.results=this.sAztExamResultListSortService._changeExamResultStatusForOneClassroom(this.parseInfoFieldForStudentObjsInExportExcel(a.results),this.hasEssayQuestion),i.push(a)}),i}isNewInfoFieldFormatInExportExcel(e){var i=!1;if(null!=e)for(var a=0;a<e.length;a++)if(e[a].hasOwnProperty("contents")){i=!0;break}return i}parseInfoFieldForStudentObjsInExportExcel(e){var i=[];for(let s=0;s<e.length;s++){var a=this.commonService.myParseJson(e[s].infors??"")??[];if(this.isNewInfoFieldFormatInExportExcel(a))if(null!=a){var r=new Array;a.forEach(l=>{l.contents&&1==l.contents.length?r.push({key:l.title,value:l.contents[0]}):l.contents&&l.contents.length>1&&r.push({key:l.title,value:l.contents.join(", ")})}),e[s].inforsParse=r}else e[s].inforsParse=new Array;else e[s].inforsParse=this.commonService.myParseJson(e[s].infors??"")??[];i.push(e[s])}return i}mapQuestionWithAnswerForExportExcel(e,i){var a=[];return e.forEach(r=>{if(""!=r.answers&&null!=r.answers&&"[]"!=r.answers){var s=this.commonService.willDeleteParseJson(r.answers),l=[];i.forEach(c=>{for(var d={QuestionId:c.questionId,Answer:"",index:c.sort},h=0;h<s.length;h++)if(s[h].QuestionId==c.questionId&&s[h].AnswerContent&&s[h].AnswerContent.length>0){d.Answer=s[h].AnswerContent[0].Content;break}l.push(d)}),a.push({...r,results:l})}else l=[],i.forEach(d=>{l.push({QuestionId:d.questionId,Answer:"",index:d.sort})}),a.push({...r,results:l})}),a}exportToExcel(e){this.sAztDialogService.open(w8,{data:{classroomDataObjs:this.allViewExamResultObjsOfStudentByClassroom,exportType:e},restoreFocus:!1,width:"750px"}).afterClosed().subscribe(i=>{if(i){let a="";this.commonService.myTranslate(["lang_auto_dang_khoi_tao_du_lieu"]).subscribe(r=>{a=r.lang_auto_dang_khoi_tao_du_lieu}),this.exportLoading=!0,ar.openLoadingEffect(a),"lastTime"==e?this.waitDestroy(this.testedListApiService.getTestedLastMark("export_tool",this.examId,i).subscribe(r=>{Array.isArray(r)||1!=r.success?(this.showErrorSnack(r.message??""),ar.closeLoadingEffect(10),this.exportLoading=!1):(this.commonService.myTranslate(["lang_auto_tap_tin_dang_duoc_tai_xuong"]).subscribe(s=>{a=s.lang_auto_tap_tin_dang_duoc_tai_xuong}),ar.changeMsgLoadingEffect(a),this.exportQuestionObjs=r.data?.questionObjs??[],this.totalExamQuestion=r.data?.totalQuestion??0,this.exportToExcelObjs=r.data?.studentsNotInClassResults??[],this.hasEssayQuestion=r.data?.hasEssayQuestion??!1,this.maxGroupQuestion=r.data?.maxGroupId??0,this.exportToExcelObjs=this.mapQuestionWithAnswerForExportExcel(this.form.controls?.isSortByMarkDesc?.value?this.sortService.sortMarkDESC(r.data?.studentsNotInClassResults??[],this.hasEssayQuestion):this.form.controls?.isSortByTimeDesc?.value?this.sortService.sortTimeDESC(r.data?.studentsNotInClassResults??[]):this.sortService.sortFirstNameStudents(r.data?.studentsNotInClassResults??[]),r.data?.questionObjs??[]),this.exportToExcelObjs=this.sAztExamResultListSortService._changeExamResultStatusForOneClassroom(this.parseInfoFieldForStudentObjsInExportExcel(this.exportToExcelObjs),this.hasEssayQuestion),this.dataExportLastTime=this.processDataForExcel(r.data?.studentsInClassResults??[]),setTimeout(()=>{document.getElementById("table_"+e)?.click(),ar.closeLoadingEffect(10),this.exportLoading=!1},1e4),this.successStatusObj())})):"highest"==e?this.waitDestroy(this.testedListApiService.getTestedHighestMark("export_tool",this.examId,i).subscribe(r=>{1==r.success?(this.commonService.myTranslate(["lang_auto_tap_tin_dang_duoc_tai_xuong"]).subscribe(s=>{a=s.lang_auto_tap_tin_dang_duoc_tai_xuong}),ar.changeMsgLoadingEffect(a),this.exportQuestionObjs=r.data?.questionObjs??[],this.totalExamQuestion=r.data?.totalQuestion??0,this.highestMark=r.data?.studentsNotInClassResults??[],this.hasEssayQuestion=r.data?.hasEssayQuestion??!1,this.maxGroupQuestion=r.data?.maxGroupId??0,this.highestMark=this.mapQuestionWithAnswerForExportExcel(this.form.controls?.isSortByMarkDesc?.value?this.sortService.sortMarkDESC(r.data?.studentsNotInClassResults??[],this.hasEssayQuestion):this.form.controls?.isSortByTimeDesc?.value?this.sortService.sortTimeDESC(r.data?.studentsNotInClassResults??[]):this.sortService.sortFirstNameStudents(r.data?.studentsNotInClassResults??[]),r.data?.questionObjs??[]),this.highestMark=this.sAztExamResultListSortService._changeExamResultStatusForOneClassroom(this.parseInfoFieldForStudentObjsInExportExcel(this.highestMark),this.hasEssayQuestion),this.dataExportHighestMark=this.processDataForExcel(r.data?.studentsInClassResults??[]),setTimeout(()=>{document.getElementById("table_"+e)?.click(),ar.closeLoadingEffect(10),this.exportLoading=!1},1e3),this.successStatusObj()):(this.showErrorSnack(r.message??""),ar.closeLoadingEffect(10),this.exportLoading=!1)})):"firstTime"==e?this.waitDestroy(this.testedListApiService.getTestedFirstMark("export_tool",this.examId,i).subscribe(r=>{1==r.success?(this.commonService.myTranslate(["lang_auto_tap_tin_dang_duoc_tai_xuong"]).subscribe(s=>{a=s.lang_auto_tap_tin_dang_duoc_tai_xuong}),ar.changeMsgLoadingEffect(a),this.exportQuestionObjs=r.data?.questionObjs??[],this.totalExamQuestion=r.data?.totalQuestion??0,this.firstMark=r.data?.studentsNotInClassResults??[],this.hasEssayQuestion=r.data?.hasEssayQuestion??!1,this.maxGroupQuestion=r.data?.maxGroupId??0,this.firstMark=this.mapQuestionWithAnswerForExportExcel(this.form.controls?.isSortByMarkDesc?.value?this.sortService.sortMarkDESC(r.data?.studentsNotInClassResults??[],this.hasEssayQuestion):this.form.controls?.isSortByTimeDesc?.value?this.sortService.sortTimeDESC(r.data?.studentsNotInClassResults??[]):this.sortService.sortFirstNameStudents(r.data?.studentsNotInClassResults??[]),r.data?.questionObjs??[]),this.firstMark=this.sAztExamResultListSortService._changeExamResultStatusForOneClassroom(this.parseInfoFieldForStudentObjsInExportExcel(this.firstMark),this.hasEssayQuestion),this.dataExportFirstTime=this.processDataForExcel(r.data?.studentsInClassResults??[]),setTimeout(()=>{document.getElementById("table_"+e)?.click(),ar.closeLoadingEffect(10),this.exportLoading=!1},1e3),this.successStatusObj()):(this.showErrorSnack(r.message??""),ar.closeLoadingEffect(10),this.exportLoading=!1)})):"allTime"==e&&this.waitDestroy(this.testedListApiService.getTestedAllResult("export_tool",this.examId,i).subscribe(r=>{1==r.success?(this.commonService.myTranslate(["lang_auto_tap_tin_dang_duoc_tai_xuong"]).subscribe(s=>{a=s.lang_auto_tap_tin_dang_duoc_tai_xuong}),ar.changeMsgLoadingEffect(a),this.exportQuestionObjs=r.data?.questionObjs??[],this.totalExamQuestion=r.data?.totalQuestion??0,this.allTimeMark=r.data?.studentsNotInClassResults??[],this.maxGroupQuestion=r.data?.maxGroupId??0,this.allTimeMark=this.mapQuestionWithAnswerForExportExcel(this.form.controls?.isSortByMarkDesc?.value?this.sortService.sortMarkDESC(r.data?.studentsNotInClassResults??[],this.hasEssayQuestion):this.form.controls?.isSortByTimeDesc?.value?this.sortService.sortTimeDESC(r.data?.studentsNotInClassResults??[]):this.sortService.sortFirstNameStudents(r.data?.studentsNotInClassResults??[]),r.data?.questionObjs??[]),this.allTimeMark=this.sAztExamResultListSortService._changeExamResultStatusForOneClassroom(this.parseInfoFieldForStudentObjsInExportExcel(this.allTimeMark),this.hasEssayQuestion),this.dataExportAllTime=this.processDataForExcel(r.data?.studentsInClassResults??[]),setTimeout(()=>{document.getElementById("table_"+e)?.click(),ar.closeLoadingEffect(10),this.exportLoading=!1},1e3),this.successStatusObj()):(this.showErrorSnack(r.message??""),ar.closeLoadingEffect(10),this.exportLoading=!1)}))}})}exportToPDF(e){this.exportResultService.processClasses(this.examObj?.id??0,e).then(()=>{}).catch(i=>{this.commonService.snackError("string"==typeof i?i:i.message)})}scanMarkObjs(e){e&&(this.scanLoading=!0,this.allRawExamResultObjsOfStudentByClassroom=[],this.allViewExamResultObjsOfStudentByClassroom=[],this.getData())}closeScanFile(e){e&&(this.showFileScan=!1,0==this.allViewExamResultObjsOfStudentByClassroom.length&&this.selectTabClassroomShow(-1))}openFileScan(e){this.showFileScan=!(!e||!this.loadedJs)&&e}checkHasExamOffline(e){this.offlineExamResultService.apiOfflineExamResultHasOfflineExamGet(e).subscribe(i=>{1==i.success?i.data?.value&&this.homeworkExamService.isPdfExam(this.examObj)?(this.hasExamOffline=!0,this.tokenScanExamOffline=i.data?.value):(this.hasExamOffline=!1,this.tokenScanExamOffline=""):(this.hasExamOffline=!1,this.examOfflineMessage=i.message??""),setTimeout(()=>{this.changeHeaderTitle(),this.stopStatusObj()},this.commonService.getRandomNumber(200,1e3))})}foundClassOfSuccessScanResult(e){e&&(this.mustShownResultId=e)}parseAllUserObjsForMonitorModule(e){let i=this.sAztExamResultListSortService._changeExamResultStatusForAllClassroom(e,this.hasEssayQuestion,!0),a=[];return i.forEach(r=>{r.results&&r.results.length>0&&r.classObj?.id==this.currentSelectClassroomId&&r.results.forEach(s=>{var c={userid:s.userId,studentid:s.studentId,username:null,studentname:s.fullName,status:s.isOnTest?1:s.isNotMarked?2:s.isMarked?3:0};this.commonService.isExistInArray(a,c)||a.push(c)})}),a}changeHeaderTitle(){var e=0,i=0;this.allRawExamResultObjsOfStudentByClassroom.forEach(a=>{e+=a.classObj?.countStudents??0,i+=a.classObj?.totalTested??0}),this.totalSubmitted=i,this.totalStudents=e,this.commonService.getTranslate("lang_auto_danh_sach_da_thi").subscribe(a=>{this.headerTitle=a+" ("+this.totalSubmitted+"/"+this.totalStudents+")"})}reloadApi(){this.browserStorageService.removeSimpleSessionStorage("exam_results_shown_class_"+this.examObj?.hashId),this.headerTitle="",this.allRawExamResultObjsOfStudentByClassroom=[],this.allViewExamResultObjsOfStudentByClassroom=[],this.loadingResultList=!0,this.getData()}selectTabClassroomShow(e){this.currentSelectClassroomId=e,this.getStudentResultByPage(1)}selectPageClassroomShow(e){this.currentSelectClassroomId=e.classroomId??-1,this.getStudentResultByPage(e.page??1)}getStudentResultByPage(e,i){let s,l,a=this.examResultFilterService.getDefaultFilterObj(),r=this.examResultFilterService.totalCustomFilter;a&&(a.isMarked&&(s=1),a.isNotMarked&&(s=0),a.isMarked&&a.isNotMarked&&(s=2),a.isOnTest&&(l=0),a.isNotTested&&(l=-1),a.isOnTest&&a.isNotTested&&(l=2)),this.examPageResultService.apiExamPageResultListResultsGet(this.examId,this.currentSelectClassroomId,this.searchContentObj.searchContent?this.searchContentObj.searchContent:void 0,l,s,1,this.sizePage*e).subscribe(c=>{if(c.success&&c.data?.objs&&c.data?.objs.length){this.allRawExamResultObjsOfStudentByClassroom.forEach(_=>{_.classObj?.id==this.currentSelectClassroomId&&(_.results=this.convertStudentResults(c.data?.objs??[]))},this.allRawExamResultObjsOfStudentByClassroom),this.allRawExamResultObjsOfStudentByClassroom=this.sAztExamResultListSortService._changeExamResultStatusForAllClassroom(this.allRawExamResultObjsOfStudentByClassroom,this.hasEssayQuestion,!0),this.checkHasExamOffline(this.examObj?.hashId??""),this.canNextPage=c.data.next??!1,this.scanLoading=!1,this.isNotTestedYet=!1,(i||""!=this.searchContentObj.searchContent)&&(this.examResultFilterService.clearFilter(),this._viewDataBySortSearchAndFilter(),this.noDataSearch=!1),r?this.getCounterStudentOfClassroomFiltered().subscribe(_=>{this._viewDataBySortSearchAndFilter()}):this._viewDataBySortSearchAndFilter(),-1!=this.currentSelectClassroomId&&(this.allUserObjsForMonitorModule=this.parseAllUserObjsForMonitorModule(this.allRawExamResultObjsOfStudentByClassroom));let h={classroomId:this.currentSelectClassroomId,page:e};this.browserStorageService.saveSimpleSessionStorage("exam_tested_list_v3_classroom_list_shown_"+this.examObj?.hashId,this.commonService.serializeJson(h)),this.successStatusObj()}else i||""!=this.searchContentObj.searchContent?(this.allViewExamResultObjsOfStudentByClassroom=[],this.noDataSearch=!0):-1!=this.currentSelectClassroomId&&this.currentSelectClassroomId||r?(this.isNotTestedYet=!1,this.allRawExamResultObjsOfStudentByClassroom=this.sAztExamResultListSortService._changeExamResultStatusForAllClassroom(this.allRawExamResultObjsOfStudentByClassroom,this.hasEssayQuestion,!0)):this.isNotTestedYet=!0,r?(this.allViewExamResultObjsOfStudentByClassroom=[],this.getCounterStudentOfClassroomFiltered().subscribe(d=>{this._viewDataBySortSearchAndFilter()})):this._viewDataBySortSearchAndFilter(),this.checkHasExamOffline(this.examObj?.hashId??""),this.canNextPage=!1,this.scanLoading=!1,this.stopStatusObj()})}convertStudentResults(e){let i=[];return e.forEach(a=>{let r={id:a.studentId,resultId:a.id,studentId:a.studentId,classroomIds:[a.classroomId??-1],userId:a.userId,fullName:a.attendeeName,nameImages:a.attendeeNameImage,birthday:a.attendeeBirthDay,mark:a.mark,startedTest:a.startedTest,confirmedAt:a.confirmedAt,status:a.testStatus,createdAt:a.createdAt,avatar:a.attendeeAvatar,isOffline:a.isOffline,subjectMarkValues:a.subjectMarks,studentCode:a.studentCode,offlineMixQuestionHashId:a.rawOfflineMixQuestionId,filesParse:this.commonService.myParseJson(a.files??""),totalExamResultObjs:0};i.push(r)}),i}afterRemoveOfflineResult(e){e&&this.reloadApi()}getData(){this.testedListApiNewService.getTestedUserObjs("tested_list",this.examId,!1).subscribe(e=>{if(1==e.success){this.initDataTestedList=e.data??{studentsNotInClassResults:[]},this.examObj=e.data?.examObj,this.maxGroupQuestion=e.data?.maxGroupId??0;let i=this.commonService.getMyQueryParam("backto")??"";if(this.backToLink=i||"/admin/testbank/document-management/0/"+(null!=this.cateId?this.cateId:0)+"/1",this.examStudents=e.data?.examStudents??[],this.isOfflineExam=this.homeworkExamService.isOfflineExam(this.examObj),this.countEssayQuestion=this.sAztExamResultListSortService._counterTotalEssayOfQuestionObjs(e.data?.questionObjs??[]),this.hasEssayQuestion=e.data?.hasEssayQuestion??!1,e.data?.studentsInClassResults&&e.data?.studentsInClassResults.length>0){this.allRawExamResultObjsOfStudentByClassroom=e.data?.studentsInClassResults;let a=this.commonService.myParseJson(this.browserStorageService.getSimpleSessionStorage("exam_tested_list_v3_classroom_list_shown_"+this.examObj?.hashId)??"")??{};this.currentSelectClassroomId=a&&a.classroomId&&this.findClassroomDataByClassroomId(this.allRawExamResultObjsOfStudentByClassroom,a.classroomId.toString())?a.classroomId:e.data?.studentsInClassResults[0].classObj?.id??-1,this.getStudentResultByPage(1)}else this.checkHasExamOffline(this.examObj?.hashId??""),this.isNotTestedYet=!0,this.scanLoading=!1,this.successStatusObj()}else if(this.scanLoading=!1,this.isNotTestedYet=!0,e.data&&e.data.errorConfigClassroomPermission)this.examObj=e.data.examObj,this.checkHasExamOffline(this.examObj?.hashId??""),this.stopStatusObj();else{let i=this.commonService.getMyQueryParam("backto")??"";this.backToLink=i||"/admin/testbank/document-management/0/"+(null!=this.cateId?this.cateId:0)+"/1",this.showErrorSnack(e.message??"")}})}findClassroomDataByClassroomId(e,i){for(var a of e)if(a.classObj?.id?.toString()==i)return!0;return!1}loadingFileJs(){var e=this;return new Promise((i,a)=>{var r=[{source:this.monitorService.getTmpVersionMonitor(),name:"listactive.js"},{source:this.cdnService.registerJsCdn("min.imgsdk"),name:"min.imgsdk"},{source:this.cdnService.registerJsCdn("min.imgsdk_loader"),name:"min.imgsdk_loader"}];this.commonService.loadScriptPromises(r).then((0,Ya.Z)(function*(){setTimeout(()=>{window.hasOwnProperty("imgsdk")?typeof imgsdk<"u"&&imgsdk?i(!0):a(new Error("lang_core_lib_not_load")):(e.countRetryLoadJS++,e.countRetryLoadJS>3?a(new Error("lang_core_lib_not_load")):e.loadingFileJs())},1e3)})).catch(s=>{a(new Error("lang_core_lib_not_load"))})})}ngOnInit(){this.initStatusObj(),this.getStatusSideNav(),(0,dt.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.cateId=Number(this.activeRoute.snapshot.paramMap.get("cat_id"))??0,this.examId=Number(this.activeRoute.snapshot.paramMap.get("id"))??0,this.resultId=Number(this.activeRoute.snapshot.paramMap.get("result_id"))??0;let e=this.commonService.getMyQueryParam("backto")??"";this.backFromStudentView=`/admin/testbank/exam-results-list/${this.cateId}/${this.examId}/${this.resultId}`,e&&(this.backFromStudentView=`/admin/testbank/exam-results-list/${this.cateId}/${this.examId}/${this.resultId}?backto=`+encodeURIComponent(e)),this.loadingFileJs().then(()=>{this.loadedJs=!0,this.getData()}).catch(i=>{this.loadedJs=!1,this.showErrorSnack(this.commonService.myTranslateInstant(i.message)??"")})}),this.commonService.translateMetaData({title:"lang_cms_test_tested_list_title",description:"lang_cms_test_tested_list_description",image:"lang_cms_test_image"}),this.waitDestroy(this.mobileWebviewService.getTestbankReloadTestedListSubscriber().subscribe(()=>{this.scanMarkObjs(!0)})),super.ngOnInit()}ngOnDestroy(){this.globalService.stopIntervalFunc("tested_list"),document.body.style.overflow="auto",super.ngOnDestroy()}constructor(e,i,a,r,s,l,c,d,h,_,x,b,T,P,U,q,B,W){super(),this.sortService=e,this.examFilterService=i,this.examPageResultService=a,this.testedListApiNewService=r,this.testedListApiService=s,this.offlineExamResultService=l,this.homeworkExamService=c,this.globalService=d,this.activeRoute=h,this.monitorService=_,this.cdnService=x,this.exportResultService=b,this.examResultFilterService=T,this.sAztExamResultListSortService=P,this.sAztDialogService=U,this.mobileWebviewService=q,this.browserStorageService=B,this.sAztMatDrawerService=W,this.dataExportFirstTime=[],this.dataExportHighestMark=[],this.dataExportLastTime=[],this.dataExportAllTime=[],this.exportQuestionObjs=[],this.exportToExcelObjs=[],this.highestMark=[],this.firstMark=[],this.allTimeMark=[],this.exportLoading=!1,this.initDataTestedList={studentsNotInClassResults:[]},this.allUserObjsForMonitorModule=[],this.examStudents=[],this.allRawExamResultObjsOfStudentByClassroom=[],this.allViewExamResultObjsOfStudentByClassroom=[],this.examId=0,this.cateId=0,this.backToLink="",this.backFromStudentView="",this.sizePage=100,this.maxGroupQuestion=0,this.isNotTestedYet=!1,this.hasEssayQuestion=!1,this.countEssayQuestion=0,this.totalStudents=0,this.totalSubmitted=0,this.headerTitle="",this.noDataSearch=!1,this.totalExamQuestion=0,this.loadingResultList=!1,this.canNextPage=!1,this.showFileScan=!1,this.hasExamOffline=!1,this.examOfflineMessage="",this.tokenScanExamOffline="",this.scanLoading=!1,this.isOfflineExam=!1,this.resultId=0,this.currentDate=new Date,this.mustShownResultId=0,this.loadedJs=!1,this.countRetryLoadJS=0,this.currentSelectClassroomId=-1,this.searchContentObj=new U0.h,this.styleInput="py-1",this.form=new f.cw({isSortByNameAsc:new f.NI(this.sAztExamResultListSortService._getSortTypeOfSetting("isSortByNameAsc"),{nonNullable:!0}),isSortByMarkDesc:new f.NI(this.sAztExamResultListSortService._getSortTypeOfSetting("isSortByMarkDesc"),{nonNullable:!0}),isSortByTimeDesc:new f.NI(this.sAztExamResultListSortService._getSortTypeOfSetting("isSortByTimeDesc"),{nonNullable:!0})})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Kf.V),t.Y36(Hy),t.Y36(Ke.DR),t.Y36(C8),t.Y36(D6.X),t.Y36(ya.$4),t.Y36(wp.v),t.Y36(Wf.q),t.Y36(O.gz),t.Y36(j6.G),t.Y36(Gn.E),t.Y36(G0.U),t.Y36($y),t.Y36(T8.K),t.Y36(Fi.C),t.Y36(B0.r),t.Y36(No.n),t.Y36(Sd.T))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-exam-result-list-new"]],viewQuery:function(e,i){if(1&e&&t.Gf(nP,5),2&e){let a;t.iGM(a=t.CRH())&&(i.drawer=a.first)}},features:[t._Bn([Sd.T]),t.qOj],decls:62,vars:41,consts:[[3,"headerBackToLink"],[4,"ngIf","ngIfElse"],["doneLoading",""],["xPosition","before"],["mainMenu","matMenu"],[1,"dropdown-menu","show","relative","w-72"],[3,"formGroup"],[1,"dropdown-content"],[4,"ngIf"],["azt-track-service","exam-result-list-new-20jmo8LMYqG","for","isSortByName",1,"dropdown-item","cursor-pointer",3,"click"],[1,"flex","items-center"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"flex-none","w-4","h-4","mr-2","lucide"],["d","M11 5h4"],["d","M11 9h7"],["d","M11 13h10"],["d","m3 17 3 3 3-3"],["d","M6 18V4"],[1,"form-check","form-switch","ml-auto"],["id","isSortByName","type","checkbox","formControlName","isSortByNameAsc",1,"show-code","form-check-input","ml-2",3,"change"],["azt-track-service","exam-result-list-new-PlRPlXkXka5","for","isSortByMarkDesc",1,"dropdown-item","cursor-pointer",3,"click"],["d","M11 5h10"],["d","M11 13h4"],["id","isSortByMarkDesc","type","checkbox","formControlName","isSortByMarkDesc",1,"show-code","form-check-input","ml-2",3,"change"],["azt-track-service","exam-result-list-new-gV0jdKgcvAo","for","isSortByTimeDesc",1,"dropdown-item","cursor-pointer",3,"click"],["id","isSortByTimeDesc","type","checkbox","formControlName","isSortByTimeDesc",1,"show-code","form-check-input","ml-2",3,"change"],[3,"msg","show","percent"],[1,"azt-exam-result-list"],[1,"azt-drawer-container","mt-5",3,"hasBackdrop"],[3,"ngClass","mode","opened","closedStart","openedChange"],["drawer",""],[1,"azt-draw-left",2,"overflow-x","hidden",3,"ngClass"],["onlineExam",""],[3,"ngClass"],[1,"azt-drawer-content",3,"ngClass"],[1,"flex","box","sm:h-auto","rounded-md","border","border-slate-200/60","dark:border-darkmode-400","p-2","text-slate-500","mb-2"],["azt-track-service","exam-result-list-new-o479Z6DA7","class","btn btn-sm mr-2",3,"matTooltip","click",4,"ngIf"],["azt-track-service","exam-result-list-new-0py_X_1wx7","class","btn btn-sm mr-2",3,"matTooltip","click",4,"ngIf"],[1,"relative","flex","ml-auto"],[1,"mr-2"],[3,"isServerSearch","placeholder","searchContentObj","styleInput","onSearch"],[1,"filter","mr-2"],[3,"changeFilterEvent"],[1,"menu"],[1,"btn","btn-sm",3,"matMenuTriggerFor"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-menu","w-4","h-4"],["x1","4","y1","12","x2","20","y2","12"],["x1","4","y1","6","x2","20","y2","6"],["x1","4","y1","18","x2","20","y2","18"],[1,"container-fluid","app-content","pr-0",3,"ngClass"],["class","box-content py-2 mt-2",4,"ngIf","ngIfElse"],["allStudentOrStudentFilterBySearchKey",""],[3,"dataScore","dataScoreByClass","maxGroupQuestion","examObj","totalQuestion","exportQuestionObjs","tableType","isSortByMark","isSortByTime","isSortByName","hasEssayQuestion","countEssayQuestion",4,"ngIf"],[3,"initData","examStudents","loadingApi","isNotTestedYet","reloadApi"],[3,"initData","examStudents","currentSelectedClassroomId","isNotTestedYet","userList","reloadApi"],["azt-track-service","exam-result-list-new-o479Z6DA7",1,"btn","btn-sm","mr-2",3,"matTooltip","click"],["x","3","y","3","width","18","height","18","rx","2","ry","2"],["d","M9 3v18"],["d","m14 9 3 3-3 3"],["azt-track-service","exam-result-list-new-0py_X_1wx7",1,"btn","btn-sm","mr-2",3,"matTooltip","click"],["d","m16 15-3-3 3-3"],[1,"box-content","py-2","mt-2"],[1,"text-center","mt-5"],[1,"h4"],[3,"noDataSearch","backToLink","examResultObjsByClassroom","isNotTestedYet","isOpenSideNav","hasEssayQuestion","showFileScan","obj","scanLoading","isMobile","currentClassroomId","headerTitle","mustShownResultId","loadingResultList","canNextPage","removeOfflineResultEmitter","selectTabClassroomEmitter","selectPageClassroomEmitter","notTestedOpenFileScan"],[3,"backToLink","examObj","loadedJs","tokenScan","hasExamOffline","examOfflineMessage","saveStudentMarkEmit","firstSuccessResultId","showStudentMarkEmit",4,"ngIf"],[3,"backToLink","examObj","loadedJs","tokenScan","hasExamOffline","examOfflineMessage","saveStudentMarkEmit","firstSuccessResultId","showStudentMarkEmit"],[3,"dataScore","dataScoreByClass","maxGroupQuestion","examObj","totalQuestion","exportQuestionObjs","tableType","isSortByMark","isSortByTime","isSortByName","hasEssayQuestion","countEssayQuestion"],["azt-track-service","exam-result-list-new-esmVBDKJjs",1,"dropdown-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide","mr-2","flex-none"],["d","M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"],["points","7 10 12 15 17 10"],["x1","12","y1","15","x2","12","y2","3"],["azt-track-service","exam-result-list-new-dlmCFDcvLN",1,"dropdown-item",3,"click"],["azt-track-service","exam-result-list-new-IJMCAvs_Zj",1,"dropdown-item",3,"click"],["azt-track-service","exam-result-list-new-zKngslcUte",1,"dropdown-item",3,"click"],["azt-track-service","exam-result-list-new-GFRfEkklS3",1,"dropdown-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"flex-none","w-4","h-4","mr-2"],["d","M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],["points","14 2 14 8 20 8"],["x1","16","y1","13","x2","8","y2","13"],["x1","16","y1","17","x2","8","y2","17"],["x1","10","y1","9","x2","8","y2","9"],["azt-track-service","exam-result-list-new-CFoSFfiD7N0",1,"dropdown-item",3,"click"],["azt-track-service","exam-result-list-new-K6OMK-6lFqk",1,"dropdown-item",3,"click"]],template:function(e,i){if(1&e&&(t.TgZ(0,"teacher-layout",0),t.YNc(1,iP,1,0,"azt-loading-effect",1),t.YNc(2,yP,35,40,"ng-template",null,2,t.W1O),t.qZA(),t.TgZ(4,"mat-menu",3,4)(6,"div",5)(7,"form",6)(8,"ul",7),t.YNc(9,wP,8,3,"li",8),t.ALo(10,"viewPermission"),t.YNc(11,CP,8,3,"li",8),t.ALo(12,"viewPermission"),t.YNc(13,TP,8,3,"li",8),t.ALo(14,"viewPermission"),t.YNc(15,kP,8,3,"li",8),t.ALo(16,"viewPermission"),t.YNc(17,AP,10,3,"li",8),t.ALo(18,"viewPermission"),t.YNc(19,SP,10,3,"li",8),t.ALo(20,"viewPermission"),t.YNc(21,OP,10,3,"li",8),t.ALo(22,"viewPermission"),t.TgZ(23,"li")(24,"label",9),t.NdJ("click",function(r){return r.stopPropagation()}),t.TgZ(25,"span",10),t.O4$(),t.TgZ(26,"svg",11),t._UZ(27,"path",12)(28,"path",13)(29,"path",14)(30,"path",15)(31,"path",16),t.qZA(),t._uU(32),t.ALo(33,"mytranslate"),t.qZA(),t.kcU(),t.TgZ(34,"div",17)(35,"input",18),t.NdJ("change",function(){return i.changeSortEvent("isSortByNameAsc")}),t.qZA()()()(),t.TgZ(36,"li")(37,"label",19),t.NdJ("click",function(r){return r.stopPropagation()}),t.TgZ(38,"span",10),t.O4$(),t.TgZ(39,"svg",11),t._UZ(40,"path",20)(41,"path",13)(42,"path",21)(43,"path",15)(44,"path",16),t.qZA(),t._uU(45),t.ALo(46,"mytranslate"),t.qZA(),t.kcU(),t.TgZ(47,"div",17)(48,"input",22),t.NdJ("change",function(){return i.changeSortEvent("isSortByMarkDesc")}),t.qZA()()()(),t.TgZ(49,"li")(50,"label",23),t.NdJ("click",function(r){return r.stopPropagation()}),t.TgZ(51,"span",10),t.O4$(),t.TgZ(52,"svg",11),t._UZ(53,"path",20)(54,"path",13)(55,"path",21)(56,"path",15)(57,"path",16),t.qZA(),t._uU(58),t.ALo(59,"mytranslate"),t.qZA(),t.kcU(),t.TgZ(60,"div",17)(61,"input",24),t.NdJ("change",function(){return i.changeSortEvent("isSortByTimeDesc")}),t.qZA()()()()()()()()),2&e){const a=t.MAs(3);t.Q6J("headerBackToLink",i.backToLink),t.xp6(1),t.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a),t.xp6(6),t.Q6J("formGroup",i.form),t.xp6(2),t.Q6J("ngIf",t.xi3(10,14,i.examObj,"exam")),t.xp6(2),t.Q6J("ngIf",t.xi3(12,17,i.examObj,"exam")),t.xp6(2),t.Q6J("ngIf",t.xi3(14,20,i.examObj,"exam")),t.xp6(2),t.Q6J("ngIf",t.xi3(16,23,i.examObj,"exam")),t.xp6(2),t.Q6J("ngIf",t.xi3(18,26,i.examObj,"exam")),t.xp6(2),t.Q6J("ngIf",t.xi3(20,29,i.examObj,"exam")),t.xp6(2),t.Q6J("ngIf",t.xi3(22,32,i.examObj,"exam")),t.xp6(11),t.hij(" ",t.lcZ(33,35,"lang_testbank_tested_list_sort_name")," "),t.xp6(13),t.hij(" ",t.lcZ(46,37,"lang_testbank_tested_list_sort_point")," "),t.xp6(13),t.hij(" ",t.lcZ(59,39,"lang_testbank_tested_list_sort_time")," ")}},dependencies:[D.mk,D.O5,Ii.VK,Ii.p6,dl.jA,dl.kh,dl.LW,Mi.gM,f._Y,f.Wl,f.JJ,f.JL,f.sg,f.u,si.l,oo.M,$0,Yf.W,fo._,bI,a7,N7,vL,ar,TL,eP,jt.JV,jt.J7],encapsulation:2}),n})(),H6=(()=>{class n{getDefaultFilterObj(){var e=this._getInitFilterObj(),i=this.commonService.castJsonToObj(this.browserStorageService.getSimpleStorage(this.localStorageSlug)??"");return i&&(e=i),e}clearFilter(){return this.filterObj=this._getInitFilterObj(),this.saveFilterObj(),this.filterObj}saveFilterObj(){this.browserStorageService.saveSimpleStorage(this.localStorageSlug,this.commonService.serializeJson(this.filterObj)),this.totalCustomFilter=this._countChecked(this.filterObj)}_countChecked(e){var i=0;for(var a in e)!0===e[a]&&(i+=1);return i}_getInitFilterObj(){return{isSubmitted:!1,isNotSubmit:!1,isMarked:!1,mustReSubmit:!1}}constructor(e,i){this.commonService=e,this.browserStorageService=i,this.totalCustomFilter=0,this.localStorageSlug="testbank_homework_result_filter_v2",this.filterObj=this.getDefaultFilterObj(),this.totalCustomFilter=this._countChecked(this.filterObj)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(mi.z),t.LFG(No.n))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var n4=M(51261);function MP(n,o){1&n&&(t.TgZ(0,"div",3)(1,"span",4),t._UZ(2,"azt-loading-ui"),t.qZA()())}function IP(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",5)(1,"form",6)(2,"div",7)(3,"div",8)(4,"h3",9),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()(),t.TgZ(7,"div",10),t._UZ(8,"editor",11),t.qZA()()()(),t.TgZ(9,"div",12)(10,"button",13),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.closeDialog())}),t._uU(11),t.ALo(12,"mytranslate"),t.qZA(),t.TgZ(13,"button",14),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.saveHomework())}),t._uU(14),t.ALo(15,"mytranslate"),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("formGroup",e.form),t.xp6(4),t.hij(" ",t.lcZ(6,5,"lang_auto_noi_dung")," "),t.xp6(3),t.Q6J("init",e.initDataEditor),t.xp6(3),t.hij(" ",t.lcZ(12,7,"lang_auto_huy")," "),t.xp6(3),t.hij(" ",t.lcZ(15,9,"lang_auto_luu")," ")}}let LP=(()=>{class n extends lo.e{closeDialog(){this.dialogRef.close()}saveHomework(){if(this.initStatusObj(),this.form.invalid)this.showErrorSnack("lang_auto_vui_long_nhap_day_du_thong_tin");else{var i=this.form.getRawValue().homeworkDescription;this.uploadImageOfHomeworkService.replaceImageInContent(i).subscribe(a=>{if(null==a.errorMessage){let l={content:this.zipDataService.convertContentGzip(a.content)};this.waitDestroy(this.documentConfigService.apiDocumentConfigSaveHomeworkConfigPost(this.homeworkHashId,l).subscribe(c=>{1==c.success?(c.data&&c.data.objs&&this.data.callback(c.data.objs[0]),this.closeDialog(),this.showSuccessSnack("lang_auto_luu_thanh_cong")):this.errorStatusObj(c.message??"",!0)}))}else this.showErrorSnack(a.errorMessage),this.stopStatusObj()})}}getHomework(e){this.initStatusObj(),this.waitDestroy(this.documentConfigService.apiDocumentConfigGetHomeworkConfigDataPost(e,[]).subscribe(i=>{if(1==i.success){this.homeworkObj=i.data?.homeworkObj;let a=this.homeworkObj?.content?this.zipDataService.decodeContentGzip(this.homeworkObj?.content):"";this.form.patchValue({homeworkDescription:a}),this.successStatusObj()}else this.errorStatusObj(i.message??"",!0)}))}ngOnChanges(){this.initDataEditor=this.sAztTinyMceService.initConfigForTeacher()}ngOnInit(){this.initDataEditor=this.sAztTinyMceService.initConfigForTeacher(),super.ngOnInit()}constructor(e,i,a,r,s,l){super(l,s),this.sAztTinyMceService=e,this.zipDataService=i,this.documentConfigService=a,this.uploadImageOfHomeworkService=r,this.dialogRef=s,this.data=l,this.permissionTypes=ap.y,this.homeworkId=0,this.homeworkHashId="",this.homeworkObj=void 0,this.initDataEditor={},this.homeworkHashId=l.hashId,this.getHomework(this.homeworkHashId),this.form=new f.cw({homeworkDescription:new f.NI("",{nonNullable:!0})})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(q0.y),t.Y36(La.a),t.Y36(Ke.Cq),t.Y36(sp.Z),t.Y36($.so,8),t.Y36($.WI,8))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-config-homework"]],features:[t._Bn([{provide:$a.fM,useClass:op.WG,deps:[Lc.Ad,Ou.o8]},{provide:$a.ab,useFactory:wf.hx,deps:[br.D]}]),t.qOj,t.TTD],decls:4,vars:2,consts:[[1,"box"],["class","azt-icon-loading text-center p-5",4,"ngIf","ngIfElse"],["doneLoading",""],[1,"azt-icon-loading","text-center","p-5"],[1,"w-4","h-4","inline-block"],[1,"setting","p-3"],[3,"formGroup"],["id","document-desc"],[1,"setting-label-textarea"],[1,"text-md","font-medium"],[1,"mt-2"],["formControlName","homeworkDescription","apiKey","q2b0xww12b2xbx637vp80iafuvwuc9zkep6qoceo62ba6qcs",3,"init"],[1,"p-3","text-right"],["azt-track-service","config-homework-dialog-lVvTPghlWFp",1,"btn","btn-secondary","w-24","mr-2",3,"click"],["azt-track-service","config-homework-dialog-DfiuQtfSx_I",1,"btn","w-24","btn-primary",3,"click"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0),t.YNc(1,MP,3,0,"div",1),t.YNc(2,IP,16,11,"ng-template",null,2,t.W1O),t.qZA()),2&e){const a=t.MAs(3);t.xp6(1),t.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a)}},dependencies:[D.O5,w.PG,f._Y,f.JJ,f.JL,f.sg,f.u,oo.M,oi.n,jt.JV],encapsulation:2}),n})(),PP=(()=>{class n extends lo.e{constructor(e,i){super(i,e),this.dialogRef=e,this.data=i}handleCloseDialog(){this.dialogRef.close(!1)}handleConfirmDialog(){this.dialogRef.close(!0)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36($.so),t.Y36($.WI))},n.\u0275cmp=t.Xpm({type:n,selectors:[["testbank-homework-delete-dialog"]],features:[t.qOj],decls:23,vars:12,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5"],[1,"text-md","font-medium","flex","items-center"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-6","h-6","mr-2","text-danger"],["d","M3 6h18"],["d","M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"],["d","M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"],["x1","10","y1","11","x2","10","y2","17"],["x1","14","y1","11","x2","14","y2","17"],[1,"mt-2"],[1,"text-xs","text-slate-500","dark:text-slate-400"],[1,"p-3","text-right"],["azt-track-service","delete-dialog-Bb7ymz69OiI",1,"btn","btn-secondary","w-24","mr-2",3,"click"],["azt-track-service","delete-dialog-5Ii165wkYxm",1,"btn","w-24","btn-danger",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),t.O4$(),t.TgZ(4,"svg",4),t._UZ(5,"path",5)(6,"path",6)(7,"path",7)(8,"line",8)(9,"line",9),t.qZA(),t._uU(10),t.ALo(11,"mytranslate"),t.qZA(),t.kcU(),t.TgZ(12,"div",10)(13,"p",11),t._uU(14),t.ALo(15,"mytranslate"),t.qZA()()()(),t.TgZ(16,"div",12)(17,"button",13),t.NdJ("click",function(){return i.handleCloseDialog()}),t._uU(18),t.ALo(19,"mytranslate"),t.qZA(),t.TgZ(20,"button",14),t.NdJ("click",function(){return i.handleConfirmDialog()}),t._uU(21),t.ALo(22,"mytranslate"),t.qZA()()()),2&e&&(t.xp6(10),t.hij(" ",t.lcZ(11,4,"lang_auto_ban_co_chac_chan_muon_xoa")+" ?"," "),t.xp6(4),t.hij(" ",t.lcZ(15,6,"lang_auto_ban_muon_xoa_file")+" "+i.data.name," "),t.xp6(4),t.hij(" ",t.lcZ(19,8,"lang_auto_dong")," "),t.xp6(3),t.hij(" ",t.lcZ(22,10,"lang_auto_xac_nhan")," "))},dependencies:[jt.JV],encapsulation:2}),n})();var Op=M(44345),NP=M(32443);function ZP(n,o){if(1&n&&(t.TgZ(0,"div",10)(1,"span",7),t._UZ(2,"lucide-icon",11),t.qZA(),t.TgZ(3,"span",12),t._uU(4),t.ALo(5,"mytranslate"),t.ALo(6,"formatFullDateTimeWithoutSecondByUserUnitPipe"),t.qZA()()),2&n){const e=t.oxw();t.xp6(4),t.hij(" ",t.lcZ(5,1,"lang_auto_bat_dau")+": "+t.lcZ(6,3,e.initData.homeworkObj.startDate)," ")}}function DP(n,o){if(1&n&&t._UZ(0,"azt-share",22),2&n){const e=t.oxw();t.Q6J("objectCodeType",2)("objectCode","HOMEWORK")("objectId",e.initData.homeworkObj.id)("homeworkWithPermissionObj",e.initData.homeworkObj)}}function jP(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",48)(2,"a",49),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.redirectToClassroomDetail())}),t._uU(3),t.qZA()(),t.BQk()}if(2&n){const e=t.oxw(2);t.xp6(2),t.s9C("matTooltip",e.initData.classroomObj.name),t.xp6(1),t.hij(" ",e.initData.classroomObj.name," ")}}function qP(n,o){1&n&&(t.TgZ(0,"div",48)(1,"a",50),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"lang_auto_tat_ca_moi_nguoi")," "))}function FP(n,o){1&n&&(t.TgZ(0,"button",51)(1,"span",7),t._UZ(2,"lucide-icon",52),t.qZA(),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()),2&n&&(t.xp6(3),t.hij(" ",t.lcZ(4,1,"lang_auto_them_file")," "))}function QP(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",55),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw(3);return t.KtG(s.onShowFile(r,-1))}),t.TgZ(2,"span",7),t._UZ(3,"lucide-icon",56),t.qZA(),t.TgZ(4,"span",57),t._uU(5),t.qZA()(),t.TgZ(6,"button",58),t.NdJ("click",function(){const r=t.CHM(e).index,s=t.oxw(3);return t.KtG(s.removeFile(r))}),t.ALo(7,"mytranslate"),t.TgZ(8,"span",59),t._UZ(9,"lucide-icon",60),t.qZA()(),t.BQk()}if(2&n){const e=o.$implicit;t.xp6(4),t.s9C("matTooltip",e.name),t.xp6(1),t.hij(" ",e.name," "),t.xp6(1),t.s9C("matTooltip",t.lcZ(7,3,"lang_auto_xoa"))}}function RP(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"div",53),t.YNc(2,QP,10,5,"ng-container",54),t.qZA(),t.BQk()),2&n){const e=t.oxw(2);t.xp6(2),t.Q6J("ngForOf",e.formHomework.files)}}function UP(n,o){1&n&&(t.TgZ(0,"p",61),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_chua_co_file_dinh_kem")," "))}function BP(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",62),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.openConfigDialog())}),t.TgZ(1,"span",7),t._UZ(2,"lucide-icon",63),t.qZA(),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()}2&n&&(t.xp6(3),t.hij(" ",t.lcZ(4,1,"lang_auto_sua")," "))}function zP(n,o){if(1&n&&(t.TgZ(0,"div",64),t._UZ(1,"azt-dynamic-hook",65),t.qZA()),2&n){const e=t.oxw(2);let i;t.xp6(1),t.Q6J("content",null!==(i=e.initData.homeworkObj.content)&&void 0!==i?i:"")}}function JP(n,o){1&n&&(t.TgZ(0,"p",66),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_chua_co_noi_dung")," "))}const G6=function(n){return{opacity:n}},HP=function(n){return[n]};function GP(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",23)(1,"h3",24),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"div",25)(5,"ul",26)(6,"li",27),t.ALo(7,"editPermission"),t.TgZ(8,"a",28),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.redirectToSetting())}),t.TgZ(9,"span",7),t._UZ(10,"lucide-icon",29),t.qZA(),t._uU(11),t.ALo(12,"mytranslate"),t.qZA()(),t.TgZ(13,"li",27),t.ALo(14,"deletePermission"),t.TgZ(15,"a",30),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.openDeleteHomeworkDialog())}),t.TgZ(16,"span",7),t._UZ(17,"lucide-icon",31),t.qZA(),t._uU(18),t.ALo(19,"mytranslate"),t.qZA()()()()(),t.TgZ(20,"div",32)(21,"div",33)(22,"h3",24),t._uU(23),t.ALo(24,"mytranslate"),t.qZA()(),t.TgZ(25,"div",34),t.YNc(26,jP,4,2,"ng-container",35),t.YNc(27,qP,4,3,"ng-template",null,36,t.W1O),t.qZA()(),t.TgZ(29,"div",37)(30,"div",38)(31,"h3",24),t._uU(32),t.ALo(33,"mytranslate"),t.qZA(),t.TgZ(34,"azt-upload-multiple-box",39),t.NdJ("uploadComplete",function(a){t.CHM(e);const r=t.oxw();return t.KtG(r.handleUploadComplete(a))}),t.YNc(35,FP,5,3,"button",40),t.ALo(36,"editPermission"),t.ALo(37,"configPermission"),t.qZA()(),t.TgZ(38,"div",41),t._uU(39),t.ALo(40,"mytranslate"),t.qZA(),t.YNc(41,RP,3,1,"ng-container",35),t.YNc(42,UP,3,3,"ng-template",null,42,t.W1O),t.qZA(),t.TgZ(44,"div",43)(45,"div",33)(46,"h3",24),t._uU(47),t.ALo(48,"mytranslate"),t.qZA(),t.YNc(49,BP,5,3,"button",44),t.ALo(50,"editPermission"),t.ALo(51,"configPermission"),t.qZA(),t.TgZ(52,"div",45),t.YNc(53,zP,2,1,"div",46),t.YNc(54,JP,3,3,"p",47),t.qZA()()}if(2&n){const e=t.MAs(28),i=t.MAs(43),a=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,21,"lang_auto_menu")," "),t.xp6(4),t.Q6J("ngStyle",t.VKq(53,G6,t.xi3(7,23,a.initData.homeworkObj,"homework")?"1":"0.5")),t.xp6(5),t.hij(" ",t.lcZ(12,26,"lang_auto_cai_dat")," "),t.xp6(2),t.Q6J("ngStyle",t.VKq(55,G6,t.xi3(14,28,a.initData.homeworkObj,"homework")?"1":"0.5")),t.xp6(5),t.hij(" ",t.lcZ(19,31,"lang_auto_xoa")," "),t.xp6(5),t.hij(" ",t.lcZ(24,33,"lang_auto_giao_cho")," "),t.xp6(3),t.Q6J("ngIf",a.initData.classroomObj)("ngIfElse",e),t.xp6(6),t.hij(" ",t.lcZ(33,35,"lang_auto_file_dinh_kem")," "),t.xp6(2),t.Q6J("uploadToCdnMenu",a.allUploadToCdnMenuTypes.HOMEWORK)("fileType",t.VKq(57,HP,a.allUploadFileTypes.SYNTHETIC))("notSupportedFile",a.notSupportedFile.WMV)("isDisabled",a.checkAction),t.xp6(1),t.Q6J("ngIf",t.xi3(36,37,a.initData.homeworkObj,"exam")||t.xi3(37,40,a.initData.homeworkObj,"exam")),t.xp6(4),t.hij(" ",t.lcZ(40,43,"lang_auto_ho_tro_file_dinh_danh_anh_pdf_work_excel_audio_hoac_video")," "),t.xp6(2),t.Q6J("ngIf",null==a.formHomework.files?null:a.formHomework.files.length)("ngIfElse",i),t.xp6(6),t.hij(" ",t.lcZ(48,45,"lang_auto_noi_dung")," "),t.xp6(2),t.Q6J("ngIf",t.xi3(50,47,a.initData.homeworkObj,"homework")||t.xi3(51,50,a.initData.homeworkObj,"homework")),t.xp6(4),t.Q6J("ngIf",null==a.initData.homeworkObj?null:a.initData.homeworkObj.content),t.xp6(1),t.Q6J("ngIf",!(null!=a.initData.homeworkObj&&a.initData.homeworkObj.content))}}let $P=(()=>{class n extends St.Q{toggleShowActions(){this.isShowActions=!this.isShowActions}showCopySuccess(){this.showSuccessSnack("lang_auto_sao_chep_thanh_cong_duong_dan_nop_bai")}copyLinkToClipboard(e){return`${this.commonService.getCurrentDomain()}/bai-tap/${e}`}handleUploadComplete(e){this.formHomework.files?.push(...e);let i={files:JSON.stringify(this.formHomework.files)};this.waitDestroy(this.documentConfigService.apiDocumentConfigSaveHomeworkConfigPost(this.initData.homeworkObj?.hashId??"",i).subscribe(a=>{1==a.success?this.showSuccessSnack("lang_auto_them_file_thanh_cong"):this.errorStatusObj(a.message??"",!0)}))}removeFile(e){this.sAztDialogService.open(PP,{width:"400px",data:this.formHomework.files?.[e],restoreFocus:!1}).afterClosed().subscribe(a=>{if(a){this.formHomework.files?.splice(e,1);let r={files:JSON.stringify(this.formHomework.files)};this.waitDestroy(this.documentConfigService.apiDocumentConfigSaveHomeworkConfigPost(this.initData.homeworkObj?.hashId??"",r).subscribe(s=>{1==s.success?this.showSuccessSnack("lang_auto_xoa_file_thanh_cong"):this.errorStatusObj(s.message??"",!0)}))}})}onShowFile(e,i){let a={...e,index:i};this.sAztDialogService.open(_c.q,{maxWidth:"100vw",maxHeight:"100vh",height:"100%",width:"100%",data:{fileOption:a},restoreFocus:!1})}redirectToClassroomDetail(){let e=`/admin/testbank/homework-results-list/${this.initData.homeworkObj?.categoryId??0}/${this.initData.homeworkObj?.id}/${this.initData.homeworkObj?.hashId}`,i=this.commonService.getMyQueryParam("backto")??"";i&&i.includes("shareType")&&(e=`/admin/testbank/homework-results-list/${this.initData.homeworkObj?.categoryId??0}/${this.initData.homeworkObj?.id}/${this.initData.homeworkObj?.hashId}?backto=`+encodeURIComponent(i)),this.myNavigationWithQueryString(`/admin/student/classroom-details/${this.initData.classroomObj?.id}/0`,`?backto=${e}`)}redirectToSetting(){if(this.checkAction){let e=`/admin/testbank/homework-results-list/${this.initData.homeworkObj?.categoryId??0}/${this.initData.homeworkObj?.id}/${this.initData.homeworkObj?.hashId}`,i=this.commonService.getMyQueryParam("backto")??"";i&&i.includes("shareType")&&(e=`/admin/testbank/homework-results-list/${this.initData.homeworkObj?.categoryId??0}/${this.initData.homeworkObj?.id}/${this.initData.homeworkObj?.hashId}?backto=`+encodeURIComponent(i)),this.myNavigationWithQueryString(`/admin/testbank/config-homework/${this.initData.homeworkObj?.categoryId??0}/${this.initData.homeworkObj?.hashId}`,`?backto=${e}`)}else this.openDialogWaring("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay")}openDialogWaring(e){this.commonService.getTranslate(e).subscribe(i=>{this.sAztDialogService.open(Sp.C,{data:{isShow:!0,content:i},restoreFocus:!1,width:"500px"})})}openDeleteHomeworkDialog(){this.checkAction?this.sAztDialogService.open(Vy,{data:{homeworkObj:this.initData.homeworkObj,isShow:!0},restoreFocus:!1}).afterClosed().subscribe(a=>{a&&this.commonService.myNavigation("/admin/testbank/document-management/1/0/1")}):this.openDialogWaring("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay")}openConfigDialog(){this.sAztDialogService.open(LP,{width:"850px",data:{callback:this.callbackConfigDialog.bind(this),showConfig:{description:!0},hashId:this.initData.homeworkObj?.hashId??""},restoreFocus:!1})}callbackConfigDialog(e){this.initData.homeworkObj&&(this.initData.homeworkObj.name=e.name??"",this.initData.homeworkObj.content=this.zipDataService.decodeContentGzip(e.content??""),this.formHomework.content=this.initData.homeworkObj.content.length>100?this.initData.homeworkObj.content.slice(0,100)+"...":this.initData.homeworkObj.content)}processData(){this.initData.homeworkObj&&(this.formHomework.files=this.commonService.myParseJson(this.initData.homeworkObj.files??"")??[],this.initData.homeworkObj.content=this.zipDataService.decodeContentGzip(this.initData.homeworkObj.content??""),this.formHomework.content=this.initData.homeworkObj.content.length>100?this.initData.homeworkObj.content.slice(0,100)+"...":this.initData.homeworkObj.content)}ngOnInit(){this.checkAction=this.permissionService.hasEditPermission("homework",this.initData.homeworkObj),this.processData(),super.ngOnInit()}constructor(e,i,a,r,s){super(),this.sAztDialogService=e,this.apiUploadService=i,this.documentConfigService=a,this.zipDataService=r,this.permissionService=s,this.isShowActions=!0,this.formHomework={files:[],content:""},this.checkAction=!0,this.allUploadToCdnMenuTypes=Pm.j6,this.allUploadFileTypes=Pm.AZ,this.notSupportedFile=Pm.lN}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Fi.C),t.Y36(po.W),t.Y36(Ke.Cq),t.Y36(La.a),t.Y36(S.j))},n.\u0275cmp=t.Xpm({type:n,selectors:[["menu-homework"]],inputs:{initData:"initData"},features:[t.qOj],decls:38,vars:27,consts:[[1,"box","p-3"],[1,"document-info"],[1,"flex","md:items-center","flex-col","md:flex-row"],[1,"text-md","font-medium","truncate","mr-auto",2,"max-width","60%",3,"matTooltip","isDisabledTooltip","matTooltipDisabled"],["c","isDisabled"],[1,"w-auto","mt-2","lg:mt-0","flex","items-center"],["azt-track-service","menu-homework-eI2NNVUSUY1",1,"btn","btn-sm","btn-outline-primary",3,"cdkCopyToClipboard","click"],[1,"w-4","h-4","mr-2"],["name","copy"],[1,"ml-1",3,"fileName","linkUrl"],[1,"flex","items-center","mt-2"],["name","calendar"],[1,"text-sm"],["class","flex items-center mt-2",4,"ngIf"],["name","calendar-off"],[1,"text-sm","inline-block","ml-1"],[1,"flex","mt-2"],[3,"ngIf"],[1,"mt-2","text-center"],["azt-track-service","menu-homework-uD4Lx8Z-l-r",1,"btn","btn-sm","btn-transparent","btn-outline-secondary",3,"click"],[1,"w-5","h-5","inline-block"],[3,"name"],[3,"objectCodeType","objectCode","objectId","homeworkWithPermissionObj"],[1,"azt-document-menu","mt-4"],[1,"text-md","font-bold"],[1,"dropdown-menu","show","relative","w-full","mt-2"],[1,"dropdown-content","bg-slate-100","dark:bg-darkmode-600"],[3,"ngStyle"],["azt-track-service","menu-homework--_M1HhvAdpz",1,"dropdown-item",3,"click"],["name","settings"],["azt-track-service","menu-homework-2OnoCiN1dtn",1,"dropdown-item","text-danger",3,"click"],["name","trash-2"],[1,"azt-document-who","mt-4"],[1,"flex","items-center"],[1,"grid","grid-cols-12","gap-3","rounded-md","mt-1"],[4,"ngIf","ngIfElse"],["noClassroom",""],[1,"azt-document-file","mt-4"],[1,"flex","items-center","justify-between"],[2,"display","inline-block",3,"uploadToCdnMenu","fileType","notSupportedFile","isDisabled","uploadComplete"],["azt-track-service","menu-homework-nZbwE5HD5ts","class","btn btn-outline-primary btn-sm btn-transparent ml-auto",4,"ngIf"],[1,"leading-relaxed","text-slate-500","text-xs"],["noFile",""],[1,"azt-document-content","mt-4"],["azt-track-service","menu-homework-TNawByu5aUA","class","btn btn-outline-primary btn-sm btn-transparent ml-auto",3,"click",4,"ngIf"],[1,"azt-document-desc","mt-2"],["id","description_content","class","description text-left",4,"ngIf"],["class","text-md text-center",4,"ngIf"],[1,"col-span-12","md:col-span-6"],["azt-track-service","menu-homework-zV31SFaqVqP",1,"btn","btn-outline-secondary","block","truncate","w-full",3,"matTooltip","click"],[1,"btn","btn-outline-secondary","block","cursor-default","w-full"],["azt-track-service","menu-homework-nZbwE5HD5ts",1,"btn","btn-outline-primary","btn-sm","btn-transparent","ml-auto"],["name","upload"],[1,"app-block-detail","mt-2"],[4,"ngFor","ngForOf"],["azt-track-service","menu-homework-qPLF48TFcWr",1,"btn-text-primary",2,"width","85%",3,"click"],["name","file-text"],[1,"truncate",2,"width","75%","text-align","left",3,"matTooltip"],["azt-track-service","menu-homework-8wcAt-Fpoyn",1,"btn","btn-transparent",3,"matTooltip","click"],[1,"w-4","h-4"],["name","x"],[1,"text-md","text-center","mt-3"],["azt-track-service","menu-homework-TNawByu5aUA",1,"btn","btn-outline-primary","btn-sm","btn-transparent","ml-auto",3,"click"],["name","pencil"],["id","description_content",1,"description","text-left"],[3,"content"],[1,"text-md","text-center"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3,4),t._uU(5),t.qZA(),t.TgZ(6,"div",5)(7,"button",6),t.NdJ("click",function(){return i.showCopySuccess()}),t.TgZ(8,"span",7),t._UZ(9,"lucide-icon",8),t.qZA(),t._uU(10),t.ALo(11,"mytranslate"),t.qZA(),t._UZ(12,"azt-download-qr-code",9),t.qZA()(),t.TgZ(13,"div",10)(14,"span",7),t._UZ(15,"lucide-icon",11),t.qZA(),t.TgZ(16,"span",12),t._uU(17),t.ALo(18,"mytranslate"),t.ALo(19,"formatFullDateTimeWithoutSecondByUserUnitPipe"),t.qZA()(),t.YNc(20,ZP,7,5,"div",13),t.TgZ(21,"div",10)(22,"span",7),t._UZ(23,"lucide-icon",14),t.qZA(),t.TgZ(24,"span",12),t._uU(25),t.ALo(26,"mytranslate"),t.qZA(),t.TgZ(27,"span",15),t._uU(28),t.ALo(29,"formatFullDateTimeWithoutSecondByUserUnitPipe"),t.ALo(30,"mytranslate"),t.qZA()(),t.TgZ(31,"div",16),t.YNc(32,DP,1,4,"ng-template",17),t.qZA()(),t.YNc(33,GP,55,59,"ng-template",17),t.TgZ(34,"div",18)(35,"button",19),t.NdJ("click",function(){return i.toggleShowActions()}),t.TgZ(36,"span",20),t._UZ(37,"lucide-icon",21),t.qZA()()()()),2&e){const a=t.MAs(4);t.xp6(3),t.s9C("matTooltip",i.initData.homeworkObj.name),t.Q6J("isDisabledTooltip",!1)("matTooltipDisabled",a.isDisabled),t.xp6(2),t.hij(" ",i.initData.homeworkObj.name," "),t.xp6(2),t.Q6J("cdkCopyToClipboard",i.copyLinkToClipboard(i.initData.homeworkObj.hashId)),t.xp6(3),t.hij(" ",t.lcZ(11,15,"lang_auto_copy_link")," "),t.xp6(2),t.Q6J("fileName","azota_submit_homework_qrcode_"+i.initData.homeworkObj.hashId)("linkUrl",i.copyLinkToClipboard(i.initData.homeworkObj.hashId)),t.xp6(5),t.hij(" ",t.lcZ(18,17,"lang_testbank_tested_list_date_create")+": "+t.lcZ(19,19,i.initData.homeworkObj.createdAt)," "),t.xp6(3),t.Q6J("ngIf",null==i.initData.homeworkObj?null:i.initData.homeworkObj.startDate),t.xp6(5),t.hij(" ",t.lcZ(26,21,"lang_auto_han_cuoi")+": "," "),t.xp6(3),t.hij(" ",i.initData.homeworkObj.deadline?t.lcZ(29,23,i.initData.homeworkObj.deadline):t.lcZ(30,25,"lang_auto_khong_thoi_han")," "),t.xp6(4),t.Q6J("ngIf",i.initData.homeworkObj.id),t.xp6(1),t.Q6J("ngIf",i.isShowActions),t.xp6(4),t.s9C("name",i.isShowActions?"chevron-up":"chevron-down")}},dependencies:[D.sg,D.O5,D.PC,Cp.i3,Mi.gM,Vf.W,Jl.Q,z0.y,Op.O,NP.B,C.Nh5,jt.JV,jt.Pf,jt.Z_,jt.PA,jt.$n],encapsulation:2}),n})();const YP=["TABLE"];function KP(n,o){if(1&n&&(t.TgZ(0,"tr")(1,"td",4),t._uU(2),t.qZA(),t.TgZ(3,"td",4),t._uU(4),t.ALo(5,"formatOnlyDateByUserUnitPipe"),t.qZA(),t.TgZ(6,"td",7),t._uU(7),t.ALo(8,"mytranslate"),t.ALo(9,"mytranslate"),t.qZA(),t.TgZ(10,"td",4),t._uU(11),t.ALo(12,"mytranslate"),t.ALo(13,"mytranslate"),t.ALo(14,"mytranslate"),t.qZA(),t.TgZ(15,"td",4),t._UZ(16,"span",8),t.qZA()()),2&n){const e=o.$implicit,i=o.index,a=t.oxw();t.xp6(1),t.uIk("excelWidth",30)("excelRow",5+i)("excelColumn",0)("excelStyle",a.styleTdNormal),t.xp6(1),t.Oqu(e.fullName),t.xp6(1),t.uIk("excelWidth",15)("excelRow",5+i)("excelColumn",1)("excelStyle",a.styleTdNormal),t.xp6(1),t.Oqu(t.lcZ(5,25,e.birthday)),t.xp6(2),t.uIk("excelWidth",15)("excelRow",5+i)("excelColumn",2)("excelStyle",a.styleTdNormal),t.xp6(1),t.Oqu(0==e.gender?t.lcZ(8,27,"lang_gender_female"):1==e.gender?t.lcZ(9,29,"lang_gender_male"):""),t.xp6(3),t.uIk("excelWidth",15)("excelRow",5+i)("excelColumn",3)("excelStyle",a.styleTdNormal),t.xp6(1),t.Oqu(e.isMarked?a.checkPoint(e.point?e.point:0):e.mustReSubmit?t.lcZ(12,31,"lang_homework_utils_excel_table_export_must_resubmit"):e.isNotSubmit?t.lcZ(13,33,"lang_homework_utils_excel_table_export_not_submit"):t.lcZ(14,35,"lang_homework_utils_excel_table_export_not_point")),t.xp6(4),t.uIk("excelWidth",30)("excelRow",5+i)("excelColumn",4)("excelStyle",a.styleTdNormal),t.xp6(1),t.Q6J("innerHTML",a.getComment(e.answer),t.oJD)}}let WP=(()=>{class n extends St.Q{exportToExcel(){let e=this.homeworkObj.hasOwnProperty("name")?this.commonService.createFileNameExportFile([this.homeworkObj.name??""])+"-ScoreSheet.xlsx":this.commonService.createFileNameExportFile(["ScoreSheet"])+".xlsx",i=this.exportExcelService.exportHtmlTableToExcelBlob(this.TABLE,!0);this.shareFileFlutterService.shareFileWithBlob(i,e)}checkPoint(e){let i=this.commonService.myTranslateInstant("lang_auto_dat")??"",a=this.commonService.myTranslateInstant("lang_auto_chua_dat")??"",r=this.commonService.myTranslateInstant("lang_auto_hoan_thanh")??"",s=this.commonService.myTranslateInstant("lang_auto_chua_hoan_thanh")??"",l=this.commonService.myTranslateInstant("lang_auto_hoan_thanh_tot")??"";switch(e){case 1e3:return i;case 1001:return a;case 2e3:return r;case 2001:return s;case 3e3:return l;default:return e}}getComment(e){var i="";return null!=e&&e.result&&(i=this.commonService.willDeleteParseJson(e.result).comment),this.commonService.removeTagHtml(i)}ngOnInit(){super.ngOnInit()}constructor(e,i){super(),this.shareFileFlutterService=e,this.exportExcelService=i,this.studentLists=[],this.tableType="homework",this.currentDate=new Date,this.styleTdNormal='{"alignment":{"vertical":"center","horizontal":"center", "wrapText":true},"font":{"bold":false,"color":{"rgb":"000000"}}}',this.styleTdNormalLeft='{"alignment":{"vertical":"center","horizontal":"left", "wrapText":true},"font":{"bold":false,"color":{"rgb":"000000"}}}',this.styleTdError='{"alignment":{"vertical":"center","horizontal":"center", "wrapText":true},"font":{"bold":false,"color":{"rgb":"f10000"}}}',this.styleTdErrorLeft='{"alignment":{"vertical":"center","horizontal":"left", "wrapText":true},"font":{"bold":false,"color":{"rgb":"f10000"}}}',this.styleThNormal='{"alignment":{"vertical":"center","horizontal":"center","wrapText":true},"font":{"bold":true,"color":{"rgb":"ffffffff"}},"fill":{"patternType":"solid","fgColor":{"rgb":"2361ae"}}}',this.styleTdNotNumberNormal='{"alignment":{"vertical":"center","horizontal":"center", "wrapText":true},"font":{"bold":false,"color":{"rgb":"000000"}},"isText":"1"}',this.styleTdNotNumberError='{"alignment":{"vertical":"center","horizontal":"center", "wrapText":true},"font":{"bold":false,"color":{"rgb":"f10000"}},"isText":"1"}'}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(ys.g),t.Y36(Yy.L))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-excel-export"]],viewQuery:function(e,i){if(1&e&&t.Gf(YP,5),2&e){let a;t.iGM(a=t.CRH())&&(i.TABLE=a.first)}},inputs:{studentLists:"studentLists",homeworkObj:"homeworkObj",tableType:"tableType"},features:[t.qOj],decls:44,vars:54,consts:[["azt-track-service","excel-table-export-ZXUlfEPdCW2",1,"table","table-bordered","hiddenIpt",3,"id","click"],["TABLE",""],[1,"thead-dark"],["colspan","10"],[1,"border-table","azt-excel-cell"],[4,"ngFor","ngForOf"],["colspan","2",1,"border-table","azt-excel-cell"],[1,"azt-excel-cell"],[3,"innerHTML"]],template:function(e,i){1&e&&(t.TgZ(0,"table",0,1),t.NdJ("click",function(){return i.exportToExcel()}),t.TgZ(2,"thead",2)(3,"tr")(4,"th",3),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()(),t.TgZ(7,"tr"),t._UZ(8,"th"),t.qZA(),t.TgZ(9,"tr")(10,"th",3),t._uU(11),t.ALo(12,"mytranslate"),t.ALo(13,"formatOnlyDateByUserUnitPipe"),t.qZA()(),t.TgZ(14,"tr"),t._UZ(15,"th"),t.qZA(),t.TgZ(16,"tr")(17,"th",4),t._uU(18),t.ALo(19,"mytranslate"),t.qZA(),t.TgZ(20,"th",4),t._uU(21),t.ALo(22,"mytranslate"),t.qZA(),t.TgZ(23,"th",4),t._uU(24),t.ALo(25,"mytranslate"),t.qZA(),t.TgZ(26,"th",4),t._uU(27),t.ALo(28,"mytranslate"),t.qZA(),t.TgZ(29,"th",4),t._uU(30),t.ALo(31,"mytranslate"),t.qZA()()(),t.TgZ(32,"tbody"),t.YNc(33,KP,17,37,"tr",5),t._UZ(34,"tr"),t.TgZ(35,"tr"),t._UZ(36,"td")(37,"td")(38,"td"),t.TgZ(39,"td",6),t._uU(40),t.ALo(41,"mytranslate"),t.qZA(),t._UZ(42,"td")(43,"td"),t.qZA()()()),2&e&&(t.MGl("id","table_",i.tableType,""),t.xp6(5),t.AsE("",t.lcZ(6,36,"lang_homework_utils_excel_table_export_homework"),": ",i.homeworkObj.name,""),t.xp6(6),t.AsE("",t.lcZ(12,38,"lang_homework_utils_excel_table_export_time_export_result"),": ",t.lcZ(13,40,i.currentDate),""),t.xp6(6),t.uIk("excelWidth",30)("excelRow",4)("excelColumn",0)("excelStyle",i.styleThNormal),t.xp6(1),t.Oqu(t.lcZ(19,42,"lang_first_and_last_name")),t.xp6(2),t.uIk("excelWidth",15)("excelRow",4)("excelColumn",1)("excelStyle",i.styleThNormal),t.xp6(1),t.Oqu(t.lcZ(22,44,"lang_birthday")),t.xp6(2),t.uIk("excelWidth",15)("excelRow",4)("excelColumn",2)("excelStyle",i.styleThNormal),t.xp6(1),t.Oqu(t.lcZ(25,46,"lang_gender")),t.xp6(2),t.uIk("excelWidth",15)("excelRow",4)("excelColumn",3)("excelStyle",i.styleThNormal),t.xp6(1),t.Oqu(t.lcZ(28,48,"lang_point")),t.xp6(2),t.uIk("excelWidth",30)("excelRow",4)("excelColumn",4)("excelStyle",i.styleThNormal),t.xp6(1),t.Oqu(t.lcZ(31,50,"lang_homework_utils_excel_table_export_comment")),t.xp6(3),t.Q6J("ngForOf",i.studentLists),t.xp6(6),t.uIk("excelWidth",15)("excelRow",6+i.studentLists.length)("excelColumn",2)("excelStyle",i.styleThNormal),t.xp6(1),t.hij("",t.lcZ(41,52,"lang_homework_utils_excel_table_export_verifil_teacher"),": "))},dependencies:[D.sg,jt.JV,jt.YK],encapsulation:2}),n})();var VP=M(91675);const XP=["student",""];function tN(n,o){1&n&&(t.TgZ(0,"span",14),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_auto_chua_cham")))}function eN(n,o){1&n&&(t.TgZ(0,"span",15),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_auto_chua_nop")))}function nN(n,o){1&n&&(t.TgZ(0,"span",16),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_da_yeu_cau_nop_lai"),""))}function iN(n,o){1&n&&(t.TgZ(0,"span",16),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_point")+": "))}function oN(n,o){if(1&n&&(t.TgZ(0,"span",17),t._UZ(1,"azt-check-mark",18),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("mark",e.student.point)}}function aN(n,o){if(1&n&&(t.TgZ(0,"div",19),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij(" ",e.timeService.calculationTime(e.student.createdAt||void 0)+" "+t.lcZ(2,1,"lang_auto_truoc")," ")}}function rN(n,o){1&n&&(t.TgZ(0,"p",23),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_so_tep_tin_da_nop")+":"," "))}function sN(n,o){if(1&n&&(t.TgZ(0,"div",20),t.YNc(1,rN,3,3,"p",21),t.TgZ(2,"p",22),t._uU(3),t.qZA()()),2&n){const e=t.oxw();let i;t.xp6(1),t.Q6J("ngIf",e.student.isMarked||e.student.isSubmitted),t.xp6(2),t.hij(" ",null!==(i=null==e.student.answerFileObjs?null:e.student.answerFileObjs.length)&&void 0!==i?i:0," ")}}const lN=function(n){return{"zoom-in":n}};let cN=(()=>{class n extends St.Q{constructor(e){super(),this.timeService=e}ngOnInit(){super.ngOnInit()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(br.D))},n.\u0275cmp=t.Xpm({type:n,selectors:[["testbank-homework-result-student-exam-result-box","student",""]],inputs:{student:"student"},features:[t.qOj],attrs:XP,decls:16,vars:15,consts:[[1,"flex","items-center","p-3","rounded-md","h-full","bg-slate-100","dark:bg-darkmode-300",2,"min-height","85px",3,"ngClass"],[1,"w-12","h-10","image-fit","lg:mr-1"],[3,"linkAvatar","nameCreateAvatar","size"],[1,"ml-2","text-left","mt-0","w-full"],[1,"azt-student-name"],[1,"font-medium",3,"isDisabledTooltip"],[1,"flex","mt-1"],[1,"mr-auto","text-xs","mr-2"],["class","text-pending",4,"ngIf"],["class","text-danger",4,"ngIf"],["class","text-slate-500",4,"ngIf"],["class","text-black font-medium",4,"ngIf"],["class","text-slate-500 text-xs",4,"ngIf"],["class","flex items-center mb-1",4,"ngIf"],[1,"text-pending"],[1,"text-danger"],[1,"text-slate-500"],[1,"text-black","font-medium"],[3,"mark"],[1,"text-slate-500","text-xs"],[1,"flex","items-center","mb-1"],["class","mr-auto text-xs text-slate-500",4,"ngIf"],[1,"text-xs","text-slate-500"],[1,"mr-auto","text-xs","text-slate-500"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"azt-create-avatar",2),t.qZA(),t.TgZ(3,"div",3)(4,"div",4)(5,"span",5),t._uU(6),t.qZA()(),t.TgZ(7,"div",6)(8,"div",7),t.YNc(9,tN,3,3,"span",8),t.YNc(10,eN,3,3,"span",9),t.YNc(11,nN,3,3,"span",10),t.YNc(12,iN,3,3,"span",10),t.YNc(13,oN,2,1,"span",11),t.qZA(),t.YNc(14,aN,3,3,"div",12),t.qZA(),t.YNc(15,sN,4,2,"div",13),t.qZA()()),2&e){let a;t.Q6J("ngClass",t.VKq(13,lN,!(i.student.isNotSubmit&&i.student.mustReSubmit))),t.xp6(2),t.Q6J("linkAvatar",null!==(a=i.student.avatar)&&void 0!==a?a:"")("nameCreateAvatar",i.student.fullName)("size",40),t.xp6(3),t.Q6J("isDisabledTooltip",!1),t.xp6(1),t.hij(" ",i.student.fullName," "),t.xp6(3),t.Q6J("ngIf",i.student.isSubmitted),t.xp6(1),t.Q6J("ngIf",i.student.isNotSubmit),t.xp6(1),t.Q6J("ngIf",i.student.mustReSubmit),t.xp6(1),t.Q6J("ngIf",i.student.isMarked),t.xp6(1),t.Q6J("ngIf",i.student.isMarked),t.xp6(1),t.Q6J("ngIf",null!=i.student.createdAt),t.xp6(1),t.Q6J("ngIf",i.student.isMarked||i.student.isSubmitted)}},dependencies:[D.mk,D.O5,t4.g,VP.B,Jl.Q,jt.JV],encapsulation:2}),n})();function uN(n,o){if(1&n&&(t.TgZ(0,"div",4),t.GkF(1,5),t.qZA()),2&n){t.oxw();const e=t.MAs(4);t.xp6(1),t.Q6J("ngTemplateOutlet",e)}}function dN(n,o){if(1&n&&t._UZ(0,"testbank-homework-result-student-exam-result-box",13),2&n){const e=t.oxw().$implicit;t.Q6J("student",e)}}const mN=function(n){return{"lg:col-span-3":n}},hN=function(n){return[n]},pN=function(n){return{backto:n}};function _N(n,o){if(1&n&&(t.TgZ(0,"div",10)(1,"div",11)(2,"a",12),t.ALo(3,"navigationLocalize"),t._UZ(4,"testbank-homework-result-student-exam-result-box",13),t.qZA()(),t.YNc(5,dN,1,1,"ng-template",null,14,t.W1O),t.qZA()),2&n){const e=o.$implicit,i=t.oxw(2);let a;t.Q6J("ngClass",t.VKq(6,mN,!i.isOpenSideNav&&!i.isMobile)),t.xp6(2),t.Q6J("routerLink",t.VKq(8,hN,t.lcZ(3,4,"/admin/homework/switch-mark-exercise/"+(null!==(a=null==e||null==e.answer?null:e.answer.id)&&void 0!==a?a:0)+"/"+i.obj.hashId+"/"+e.id)))("queryParams",t.VKq(10,pN,i.backToLink)),t.xp6(2),t.Q6J("student",e)}}function fN(n,o){if(1&n&&(t.TgZ(0,"div")(1,"div",6)(2,"div",7)(3,"div",8),t.YNc(4,_N,7,12,"div",9),t.qZA()()()()),2&n){const e=t.oxw();t.xp6(4),t.Q6J("ngForOf",e.studentLists)}}function gN(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",15)(1,"p",16),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"p",17),t._uU(5),t.ALo(6,"mytranslate"),t.ALo(7,"mytranslate"),t.ALo(8,"mytranslate"),t.qZA(),t.TgZ(9,"a",18),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.showCopySuccess())}),t.O4$(),t.TgZ(10,"svg",19),t._UZ(11,"circle",20)(12,"circle",21)(13,"circle",22)(14,"line",23)(15,"line",24),t.qZA(),t.kcU(),t.TgZ(16,"span"),t._uU(17),t.ALo(18,"mytranslate"),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,6,"lang_auto_chua_co_du_lieu_nop_bai")),t.xp6(3),t.lnq("",t.lcZ(6,8,"lang_auto_neu_chua_gui_link_nop_bai_cho_hoc_sinh_vui_long_bam"),' "',t.lcZ(7,10,"lang_auto_copy_link_bai_tap"),'" ',t.lcZ(8,12,"lang_auto_ben_duoi_va_gui_cho_hoc_sinh_de_nop_bai"),""),t.xp6(4),t.Q6J("cdkCopyToClipboard",e.copyLinkHomeWorkToClipboard()),t.xp6(8),t.Oqu(t.lcZ(18,14,"lang_auto_copy_link_bai_tap"))}}let xN=(()=>{class n extends St.Q{copyLinkHomeWorkToClipboard(){return`${this.commonService.getCurrentDomain()}/bai-tap/${this.obj.hashId}`}showCopySuccess(){this.showSuccessSnack("lang_auto_sao_chep_thanh_cong")}constructor(e){super(),this.timeService=e,this.isOpenSideNav=!0,this.backToLink="",this.studentLists=[],this.isNotTestedYet=!1,this.isMobile=this.commonService.isMobileOrTable()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(br.D))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-student-homework-result"]],inputs:{isOpenSideNav:"isOpenSideNav",backToLink:"backToLink",obj:"obj",studentLists:"studentLists",isNotTestedYet:"isNotTestedYet"},features:[t.qOj],decls:5,vars:2,consts:[[1,"box","mt-2","relative"],["class","scrollable-content flex items-center",4,"ngIf"],[4,"ngIf"],["isNotTestedYetTmp",""],[1,"scrollable-content","flex","items-center"],[3,"ngTemplateOutlet"],[1,"azt-student-list"],[1,"mt-5","p-3"],[1,"grid","grid-cols-12","gap-3",2,"margin-bottom","85px"],["class","col-span-12 sm:col-span-6 lg:col-span-4 2xl:col-span-3",3,"ngClass",4,"ngFor","ngForOf"],[1,"col-span-12","sm:col-span-6","lg:col-span-4","2xl:col-span-3",3,"ngClass"],[1,"h-full"],["azt-track-service","student-homework-result-p_58RoCuYW9",3,"routerLink","queryParams"],[3,"student"],["answerIdNull",""],[1,"text-center","mt-5","mx-auto",2,"max-width","28rem"],[1,"text-lg"],[1,"mt-2","mx-auto"],["azt-track-service","student-homework-result-GcOiOvgvvW2",1,"mt-2","btn","btn-secondary-soft",3,"cdkCopyToClipboard","click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","mr-2","lucide"],["cx","18","cy","5","r","3"],["cx","6","cy","12","r","3"],["cx","18","cy","19","r","3"],["x1","8.59","y1","13.51","x2","15.42","y2","17.49"],["x1","15.41","y1","6.51","x2","8.59","y2","10.49"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.YNc(1,uN,2,1,"div",1),t.YNc(2,fN,5,1,"div",2),t.qZA(),t.YNc(3,gN,19,16,"ng-template",null,3,t.W1O)),2&e&&(t.xp6(1),t.Q6J("ngIf",i.isNotTestedYet),t.xp6(1),t.Q6J("ngIf",!i.isNotTestedYet))},dependencies:[O.rH,D.mk,D.sg,D.O5,D.tP,Cp.i3,cN,jt.Jy,jt.JV],encapsulation:2}),n})();function bN(n,o){if(1&n&&(t.O4$(),t.kcU(),t.TgZ(0,"span",23)(1,"span",24),t._uU(2),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.Oqu(e.homeworkResultFilterService.totalCustomFilter)}}function vN(n,o){if(1&n&&(t.TgZ(0,"span"),t._uU(1,"\xa0"),t.TgZ(2,"span",27),t._uU(3),t.qZA()()),2&n){const e=t.oxw(2);t.xp6(3),t.Oqu(e.homeworkResultFilterService.totalCustomFilter)}}function yN(n,o){if(1&n&&(t.O4$(),t.kcU(),t.TgZ(0,"span",25),t._uU(1),t.ALo(2,"mytranslate"),t.YNc(3,vN,4,1,"span",26),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij(" ",t.lcZ(2,2,"lang_testbank_tested_list_sort")," "),t.xp6(2),t.Q6J("ngIf",e.homeworkResultFilterService.totalCustomFilter>0)}}let wN=(()=>{class n extends St.Q{changeFilter(){this.homeworkResultFilterService.saveFilterObj(),this.changeFilterEvent.emit(this.homeworkResultFilterService.filterObj)}clearFilter(){this.homeworkResultFilterService.clearFilter(),this.changeFilter()}ngOnInit(){super.ngOnInit()}constructor(e){super(),this.homeworkResultFilterService=e,this.changeFilterEvent=new t.vpe}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(H6))},n.\u0275cmp=t.Xpm({type:n,selectors:[["testbank-homework-result-filter-menu"]],outputs:{changeFilterEvent:"changeFilterEvent"},features:[t.qOj],decls:44,vars:25,consts:[[1,"btn","btn-sm","relative",3,"matMenuTriggerFor"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-search","w-4","h-4","mr-0","md:mr-1"],["points","22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"],["class","sm:hidden tooltip w-4 h-4 flex items-center justify-center absolute rounded-full bg-primary right-0 top-0 -mr-2 -mt-2",4,"ngIf"],["class","azt-hidden sm:block",4,"ngIf"],["xPosition","before"],["filterMenu","matMenu"],[1,"dropdown-menu","show","relative","w-64"],[1,"dropdown-content"],["azt-track-service","filter-menu-IuO864aLwuv","for","isSubmitted",1,"dropdown-item","cursor-pointer",3,"click"],[1,"form-check","form-switch","ml-auto"],["id","isSubmitted","type","checkbox",1,"show-code","form-check-input","ml-2",3,"checked","change"],["azt-track-service","filter-menu-up7nJngmzVG","for","isNotSubmit",1,"dropdown-item","cursor-pointer",3,"click"],["id","isNotSubmit","type","checkbox",1,"show-code","form-check-input","ml-2",3,"checked","change"],["azt-track-service","filter-menu-UMBRazW55_8","for","isMarked",1,"dropdown-item","cursor-pointer",3,"click"],["id","isMarked","type","checkbox",1,"show-code","form-check-input","ml-2",3,"checked","change"],["azt-track-service","filter-menu-ZcOfEctFCTF","for","mustReSubmit",1,"dropdown-item","cursor-pointer",3,"click"],["id","mustReSubmit","type","checkbox",1,"show-code","form-check-input","ml-2",3,"checked","change"],[1,"dropdown-divider"],[1,"flex","p-1"],[1,"btn","btn-secondary","py-1","px-2","ml-auto","mr-2"],["azt-track-service","filter-menu-QejPhqaKsKg",3,"click"],["azt-track-service","filter-menu-e-_PwZJaZjq",1,"btn","btn-danger","py-1","px-2",3,"click"],[1,"sm:hidden","tooltip","w-4","h-4","flex","items-center","justify-center","absolute","rounded-full","bg-primary","right-0","top-0","-mr-2","-mt-2"],[1,"rounded-full","bg-primary","text-white","cursor-pointer","font-medium"],[1,"azt-hidden","sm:block"],[4,"ngIf"],[1,"py-1","px-2","rounded-full","text-xs","bg-primary","text-white","cursor-pointer","font-medium"]],template:function(e,i){if(1&e&&(t.TgZ(0,"button",0),t.O4$(),t.TgZ(1,"svg",1),t._UZ(2,"polygon",2),t.qZA(),t.YNc(3,bN,3,1,"span",3),t.YNc(4,yN,4,4,"span",4),t.qZA(),t.kcU(),t.TgZ(5,"mat-menu",5,6)(7,"div",7)(8,"ul",8)(9,"li")(10,"label",9),t.NdJ("click",function(r){return r.stopPropagation()}),t._uU(11),t.ALo(12,"mytranslate"),t.TgZ(13,"div",10)(14,"input",11),t.NdJ("change",function(){return i.homeworkResultFilterService.filterObj.isSubmitted=!i.homeworkResultFilterService.filterObj.isSubmitted,i.changeFilter()}),t.qZA()()()(),t.TgZ(15,"li")(16,"label",12),t.NdJ("click",function(r){return r.stopPropagation()}),t._uU(17),t.ALo(18,"mytranslate"),t.TgZ(19,"div",10)(20,"input",13),t.NdJ("change",function(){return i.homeworkResultFilterService.filterObj.isNotSubmit=!i.homeworkResultFilterService.filterObj.isNotSubmit,i.changeFilter()}),t.qZA()()()(),t.TgZ(21,"li")(22,"label",14),t.NdJ("click",function(r){return r.stopPropagation()}),t._uU(23),t.ALo(24,"mytranslate"),t.TgZ(25,"div",10)(26,"input",15),t.NdJ("change",function(){return i.homeworkResultFilterService.filterObj.isMarked=!i.homeworkResultFilterService.filterObj.isMarked,i.changeFilter()}),t.qZA()()()(),t.TgZ(27,"li")(28,"label",16),t.NdJ("click",function(r){return r.stopPropagation()}),t._uU(29),t.ALo(30,"mytranslate"),t.TgZ(31,"div",10)(32,"input",17),t.NdJ("change",function(){return i.homeworkResultFilterService.filterObj.mustReSubmit=!i.homeworkResultFilterService.filterObj.mustReSubmit,i.changeFilter()}),t.qZA()()()(),t.TgZ(33,"li"),t._UZ(34,"hr",18),t.qZA(),t.TgZ(35,"li")(36,"div",19)(37,"button",20),t._uU(38),t.ALo(39,"mytranslate"),t.qZA(),t.TgZ(40,"div",21),t.NdJ("click",function(r){return r.stopPropagation()}),t.TgZ(41,"button",22),t.NdJ("click",function(){return i.clearFilter()}),t._uU(42),t.ALo(43,"mytranslate"),t.qZA()()()()()()()),2&e){const a=t.MAs(6);t.Q6J("matMenuTriggerFor",a),t.xp6(3),t.Q6J("ngIf",i.homeworkResultFilterService.totalCustomFilter>0),t.xp6(1),t.Q6J("ngIf",!i.isMobileWebView),t.xp6(7),t.hij(" ",t.lcZ(12,13,"lang_homework_homework_score_list_sort_student_not_marking")," "),t.xp6(3),t.Q6J("checked",i.homeworkResultFilterService.filterObj.isSubmitted),t.xp6(3),t.hij(" ",t.lcZ(18,15,"lang_homework_homework_score_list_sort_student_not_yet_paid")," "),t.xp6(3),t.Q6J("checked",i.homeworkResultFilterService.filterObj.isNotSubmit),t.xp6(3),t.hij(" ",t.lcZ(24,17,"lang_homework_homework_score_list_sort_mark")," "),t.xp6(3),t.Q6J("checked",i.homeworkResultFilterService.filterObj.isMarked),t.xp6(3),t.hij(" ",t.lcZ(30,19,"lang_homework_homework_score_list_sort_student_resubmit")," "),t.xp6(3),t.Q6J("checked",i.homeworkResultFilterService.filterObj.mustReSubmit),t.xp6(6),t.Oqu(t.lcZ(39,21,"lang_button_close")),t.xp6(4),t.Oqu(t.lcZ(43,23,"lang_button_delete"))}},dependencies:[D.O5,Ii.VK,Ii.p6,jt.JV],encapsulation:2}),n})();const CN=["drawer"];function TN(n,o){1&n&&t._UZ(0,"azt-loading-effect")}function kN(n,o){if(1&n&&(t.TgZ(0,"div",37)(1,"span"),t.O4$(),t.TgZ(2,"svg",38),t._UZ(3,"circle",39)(4,"line",40)(5,"line",41),t.qZA()(),t.kcU(),t.TgZ(6,"span"),t._uU(7),t.ALo(8,"mytranslate"),t.ALo(9,"mytranslate"),t.qZA()()),2&n){const e=t.oxw(3);t.xp6(7),t.AsE("",t.lcZ(8,2,"lang_homework_homework_score_list_not_search_data"),"! ",t.lcZ(9,4,"lang_core_not_found_classroom_or_homework"==e.errorMessage?"lang_homework_homework_score_list_class_maybe_delete":""),"")}}function AN(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",72),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(4);return t.KtG(a.sAztMatDrawerService.openDrawer())}),t.ALo(1,"mytranslate"),t.O4$(),t.TgZ(2,"svg",60),t._UZ(3,"rect",73)(4,"path",74)(5,"path",75),t.qZA()()}2&n&&t.s9C("matTooltip",t.lcZ(1,1,"lang_auto_mo_menu"))}function SN(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",76),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(4);return t.KtG(a.sAztMatDrawerService.closeDrawer())}),t.ALo(1,"mytranslate"),t.O4$(),t.TgZ(2,"svg",60),t._UZ(3,"rect",73)(4,"path",74)(5,"path",77),t.qZA()()}2&n&&t.s9C("matTooltip",t.lcZ(1,1,"lang_auto_dong_menu"))}function ON(n,o){1&n&&(t.TgZ(0,"div",78)(1,"div",79)(2,"p",80),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()()()),2&n&&(t.xp6(3),t.hij("",t.lcZ(4,1,"lang_not_found_search"),"!"))}function EN(n,o){if(1&n&&t._UZ(0,"app-student-homework-result",81),2&n){const e=t.oxw(4);t.Q6J("backToLink",e.backToLink)("studentLists",e.studentHaveSortAndSearchByNameObjs)("isNotTestedYet",0==e.rawStudentObjs.length)("isOpenSideNav",e.sAztMatDrawerService.isOpenSideNav)("obj",e.homeworkObj)}}const MN=function(n,o){return{"w-85":n,"w-30":o}},IN=function(n){return{"azt-mobile-draw-left":n}},LN=function(n){return{"ml-30":n}},PN=function(n){return{"ml-5":n}},NN=function(n){return{"px-0":n}},ZN=function(n){return[n]};function DN(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"mat-drawer-container",42)(1,"mat-drawer",43,44),t.NdJ("closedStart",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.changeStatusNav())}),t.TgZ(3,"div",45),t._UZ(4,"menu-homework",46),t.qZA()(),t.TgZ(5,"mat-drawer-content",47)(6,"div",48)(7,"div",49),t.YNc(8,AN,6,3,"button",50),t.YNc(9,SN,6,3,"button",51),t.TgZ(10,"div",52)(11,"flexed-on-the-top",53)(12,"div",54)(13,"azt-search-box",55),t.NdJ("onSearch",function(a){t.CHM(e);const r=t.oxw(3);return t.KtG(r.search(a.searchObj))}),t.ALo(14,"mytranslate"),t.qZA()(),t.TgZ(15,"div",56)(16,"testbank-homework-result-filter-menu",57),t.NdJ("changeFilterEvent",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.changeFilterEvent())}),t.qZA()(),t.TgZ(17,"div",58)(18,"button",59),t.O4$(),t.TgZ(19,"svg",60),t._UZ(20,"line",61)(21,"line",62)(22,"line",63),t.qZA()()()()()(),t.kcU(),t.TgZ(23,"div",64)(24,"div",65)(25,"div",66)(26,"p",67),t._uU(27),t.ALo(28,"mytranslate"),t.TgZ(29,"a",68),t.ALo(30,"navigationLocalize"),t._uU(31),t.qZA()()()(),t.YNc(32,ON,5,3,"div",69),t.YNc(33,EN,1,5,"ng-template",null,70,t.W1O),t.qZA()(),t._UZ(35,"app-excel-export",71),t.qZA()()}if(2&n){const e=t.MAs(34),i=t.oxw(3),a=t.MAs(5);t.Q6J("hasBackdrop",i.sAztMatDrawerService.hasBackdrop),t.xp6(1),t.s9C("opened",i.sAztMatDrawerService.isOpenSideNav?"true":"false"),t.Q6J("ngClass",t.WLB(32,MN,i.isMobileDevice,!i.isMobileDevice))("mode",i.sAztMatDrawerService.mode),t.xp6(2),t.Q6J("ngClass",t.VKq(35,IN,i.isMobileDevice)),t.xp6(1),t.Q6J("initData",i.initDataHomework),t.xp6(1),t.Q6J("ngClass",t.VKq(37,LN,!i.isMobileDevice&&i.sAztMatDrawerService.isOpenSideNav)),t.xp6(1),t.Q6J("ngClass",t.VKq(39,PN,!i.isMobileDevice&&i.sAztMatDrawerService.isOpenSideNav)),t.xp6(2),t.Q6J("ngIf",!i.sAztMatDrawerService.isOpenSideNav||i.isMobileDevice),t.xp6(1),t.Q6J("ngIf",i.sAztMatDrawerService.isOpenSideNav&&!i.isMobileDevice),t.xp6(2),t.Q6J("colorBackground","white"),t.xp6(2),t.Q6J("isServerSearch",!0)("placeholder",t.lcZ(14,26,"lang_homework_homework_score_list_search"))("searchContentObj",i.searchContentObj)("styleInput",i.styleInput),t.xp6(5),t.Q6J("matMenuTriggerFor",a),t.xp6(5),t.Q6J("ngClass",t.VKq(41,NN,i.isMobileDevice||!i.sAztMatDrawerService.isOpenSideNav)),t.xp6(4),t.hij("",t.lcZ(28,28,"lang_homework_homework_score_list_list_submit_class"),": "),t.xp6(2),t.Q6J("routerLink",t.VKq(43,ZN,t.lcZ(30,30,"/admin/student/classroom-details/"+i.classroomId+"/0"))),t.xp6(2),t.AsE(" ",null==i.classroomObj?null:i.classroomObj.name," (",i.initDataHomework.homeworkObj.count+"/"+i.initDataHomework.studentObjs.length,") "),t.xp6(1),t.Q6J("ngIf",0!=i.rawStudentObjs.length&&0==i.studentHaveSortAndSearchByNameObjs.length)("ngIfElse",e),t.xp6(3),t.Q6J("studentLists",i.studentHaveSortAndSearchByNameObjs)("homeworkObj",i.homeworkObj)("tableType","homework")}}function jN(n,o){1&n&&t._UZ(0,"div",82)}function qN(n,o){if(1&n&&(t.TgZ(0,"div"),t._UZ(1,"azt-export-docx-loading-box",32),t.TgZ(2,"div",33),t.YNc(3,kN,10,6,"div",34),t.YNc(4,DN,36,45,"mat-drawer-container",35),t.qZA(),t.YNc(5,jN,1,0,"div",36),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("msg",e.exportResultService.keyLoading)("show",e.exportResultService.isLoading)("percent",e.exportResultService.percent),t.xp6(2),t.Q6J("ngIf",""!=e.errorMessage),t.xp6(1),t.Q6J("ngIf",""==e.errorMessage),t.xp6(1),t.Q6J("ngIf",1==e.isMobileDevice)}}function FN(n,o){if(1&n&&(t.YNc(0,qN,6,6,"div",30),t._UZ(1,"azt-scroll-to-top-bottom",31)),2&n){const e=t.oxw();t.Q6J("ngIf",e.homeworkObj),t.xp6(1),t.Q6J("isScrollToTop",!0)}}let QN=(()=>{class n extends St.Q{set drawer(e){this.sAztMatDrawerService.resizeDrawerHeight(!0,e)}changeStatusNav(){this.isMobileDevice&&(document.body.style.overflow="auto")}saveStatusSideNav(){this.examFilterService.saveStatusSideNav("homework",this.sAztMatDrawerService.isOpenSideNav)}getStatusSideNav(){if(window.innerWidth>980){let e=this.examFilterService.getStatusSideNav("homework");e&&"close"==e?this.sAztMatDrawerService.closeDrawer():this.sAztMatDrawerService.openDrawer()}else this.sAztMatDrawerService.closeDrawer()}exportToExcel(e){setTimeout(()=>{document.getElementById("table_"+e)?.click()},1e3)}exportToPDF(){this.exportResultService.processHomeworks(Number(this.homeworkId),this.homeworkHashId).then(()=>{}).catch(e=>{this.commonService.snackError("string"==typeof e?e:e.message)})}_isSortedByTimeDesc(){return!!this.browserStorageService.getSimpleStorage(this.sortByStorageKey)}_sortStudentObjs(e){var i=this._isSortedByTimeDesc(),a=this.classroomObj?.sortType??0;return i?this.sortService.sortTimeDESC(e):0==a?this.sortService.sortFirstNameStudents(e):this.sortService.sortArrayByMultipleObjectKeyAsc(e,"pos","id")}_searchStudentObjsByName(e,i){i=this.commonService.convertVietnameseToEnglish(i);var a=[];for(let s=0;s<e.length;s++)-1!=this.commonService.convertVietnameseToEnglish(e[s].fullName??"").toLowerCase().indexOf(i.toLowerCase())&&a.push(e[s]);return a}_getStudentObjByFilterObj(e,i){return i.isSubmitted||i.isNotSubmit||i.isMarked||i.mustReSubmit?e.filter(r=>i.isSubmitted&&1==r.isSubmitted||i.isNotSubmit&&1==r.isNotSubmit||i.isMarked&&1==r.isMarked||i.mustReSubmit&&1==r.mustReSubmit):e}_viewDataBySortSearchAndFilter(){var e=this.homeworkResultFilterService.getDefaultFilterObj(),i=this._getStudentObjByFilterObj(this.rawStudentObjs,e),a=this.searchContentObj.searchContent;""!=a&&(i=this._searchStudentObjsByName(i,a)),i=this._sortStudentObjs(i),this.studentHaveSortAndSearchByNameObjs=i}search(e){this.searchContentObj=e,this.homeworkResultFilterService.clearFilter(),this._viewDataBySortSearchAndFilter()}sortByTimeDesc(){this.form.controls.sortByTimeDesc.value?this.browserStorageService.saveSimpleStorage(this.sortByStorageKey,"sort_by_time_desc"):this.browserStorageService.removeSimpleStorage(this.sortByStorageKey),this._viewDataBySortSearchAndFilter()}changeFilterEvent(){this.searchContentObj.searchContent="",this._viewDataBySortSearchAndFilter()}addStatusToStudentObjs(e){for(var i=[],a=0;a<e.length;a++){i.push({...e?.[a],index:a}),e[a].confirmedAt&&e[a].confirmedAt&&i[a].index==a?i[a].isMarked=!0:null==e[a].answer||e[a].confirmedAt||i[a].index!=a?null==e[a].answer&&null!=e[a].answerHistory&&i[a].index==a?i[a].mustReSubmit=!0:i[a].isNotSubmit=!0:i[a].isSubmitted=!0;let r=e[a].answer?.files??"";r.includes("<z>:")&&(r=this.zipDataService.decodeContentGzip(r)),i[a].answerFileObjs=this.castJsonToObj(r)}return i}parseHomeworkData(e){var i=this.castObj(e);return i?.files&&(i.fileObjs=this.commonService.myParseJson(i.files)),i&&this.zipDataService.convertHomeworkObj(i),i}getData(){this.initStatusObj(),this.waitDestroy(this.answerService.apiAnswerGetStudentsHomeworkGet(this.homeworkHashId).subscribe(e=>{if(1==e.success){if(e.data){this.errorMessage="",this.zipDataService.convertStudentsHomeworkObj(e.data?.studentObjs),this.initDataHomework=e.data,this.rawStudentObjs=this.addStatusToStudentObjs(e.data?.studentObjs??new Array),this.homeworkObj=this.parseHomeworkData(e.data?.homeworkObj??{}),this.classroomObj=e.data?.classroomObj??{},this.classroomId=this.classroomObj.id??0,this.categoryId=this.homeworkObj?.categoryId??0;let i=this.commonService.getMyQueryParam("backto")??"";this.backToLink="/admin/testbank/homework-results-list/"+this.categoryId+"/"+this.homeworkId+"/"+this.homeworkHashId,i&&i.includes("shareType")&&(this.backToLink=`/admin/testbank/homework-results-list/${this.categoryId}/${this.homeworkId}/${this.homeworkHashId}?backto=`+encodeURIComponent(i)),this.paramBackToLink=i||`/admin/testbank/document-management/1/${this.categoryId}/1`,this.changeFilterEvent()}this.successStatusObj()}else this.errorMessage=e.message??"",this.errorStatusObj(this.errorMessage,!0)}))}ngOnInit(){this.getStatusSideNav(),(0,dt.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.homeworkId=this.activeRoute.snapshot.paramMap.get("id")??"",this.homeworkHashId=this.commonService.getMyParam(this.activeRoute,"hash_id")??"",this.categoryId=Number(this.activeRoute.snapshot.paramMap.get("cat_id"))??0,this.getData()}),this.commonService.translateMetaData({title:"lang_cms_homework_submit_list_title",description:"lang_cms_homework_submit_list_description",image:"lang_cms_homework_image"}),super.ngOnInit()}ngOnDestroy(){document.body.style.overflow="auto",super.ngOnDestroy()}constructor(e,i,a,r,s,l,c,d,h){super(),this.activeRoute=e,this.answerService=i,this.zipDataService=a,this.sortService=r,this.browserStorageService=s,this.examFilterService=l,this.exportResultService=c,this.homeworkResultFilterService=d,this.sAztMatDrawerService=h,this.backToLink="",this.paramBackToLink="",this.homeworkId="",this.homeworkHashId="",this.categoryId=0,this.classroomId=0,this.rawStudentObjs=[],this.studentHaveSortAndSearchByNameObjs=[],this.errorMessage="",this.sortByStorageKey="homework_list_sort_by",this.searchContentObj=new U0.h,this.styleInput="py-1",this.form=new f.cw({sortByTimeDesc:new f.NI(this._isSortedByTimeDesc(),{nonNullable:!0})})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(O.gz),t.Y36(rp.P6),t.Y36(La.a),t.Y36(Kf.V),t.Y36(No.n),t.Y36(Hy),t.Y36(G0.U),t.Y36(H6),t.Y36(Sd.T))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-homework-result-list"]],viewQuery:function(e,i){if(1&e&&t.Gf(CN,5),2&e){let a;t.iGM(a=t.CRH())&&(i.drawer=a.first)}},features:[t._Bn([Sd.T]),t.qOj],decls:40,vars:13,consts:[[3,"headerBackToLink"],[4,"ngIf","ngIfElse"],["doneLoading",""],["xPosition","before"],["mainMenu","matMenu"],[1,"dropdown-menu","show","relative","w-72"],[1,"dropdown-content"],["azt-track-service","homework-result-list-UoAbuGB6VrG",1,"dropdown-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide","mr-2"],["d","M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"],["points","7 10 12 15 17 10"],["x1","12","y1","15","x2","12","y2","3"],["azt-track-service","homework-result-list-PxxtOkbgmqm",1,"dropdown-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","mr-2"],["d","M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],["points","14 2 14 8 20 8"],["x1","16","y1","13","x2","8","y2","13"],["x1","16","y1","17","x2","8","y2","17"],["x1","10","y1","9","x2","8","y2","9"],["azt-track-service","homework-result-list-mTV5aEMDlSD","for","isSortByTimeDESC",1,"dropdown-item","cursor-pointer",3,"click"],[1,"flex","items-center"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","mr-2","lucide"],["d","M11 5h10"],["d","M11 9h7"],["d","M11 13h4"],["d","m3 17 3 3 3-3"],["d","M6 18V4"],[1,"form-check","form-switch","ml-auto"],[3,"formGroup"],["id","isSortByTimeDESC","type","checkbox","formControlName","sortByTimeDesc",1,"show-code","form-check-input","ml-2",3,"change"],[4,"ngIf"],[3,"isScrollToTop"],[3,"msg","show","percent"],[1,"azt-homework-result-list","container-fluid"],["class","intro-y col-span-11 alert alert-danger alert-dismissible show flex items-center mb-6",4,"ngIf"],["class","azt-drawer-container mt-5",3,"hasBackdrop",4,"ngIf"],["class","py-4",4,"ngIf"],[1,"intro-y","col-span-11","alert","alert-danger","alert-dismissible","show","flex","items-center","mb-6"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","icon-name","info","data-lucide","info",1,"lucide","w-4","h-4","mr-2"],["cx","12","cy","12","r","10"],["x1","12","y1","16","x2","12","y2","12"],["x1","12","y1","8","x2","12.01","y2","8"],[1,"azt-drawer-container","mt-5",3,"hasBackdrop"],[3,"ngClass","mode","opened","closedStart"],["drawer",""],[1,"azt-draw-left",2,"overflow-x","hidden",3,"ngClass"],[3,"initData"],[2,"overflow-x","hidden",3,"ngClass"],[1,"azt-drawer-content",3,"ngClass"],[1,"flex","box","sm:h-auto","rounded-md","border","border-slate-200/60","dark:border-darkmode-400","p-2","text-slate-500","mb-2"],["azt-track-service","homework-result-list-Ej_zMayVTN_","class","btn btn-sm mr-2",3,"matTooltip","click",4,"ngIf"],["azt-track-service","homework-result-list-hYOFjZmUAjh","class","btn btn-sm mr-2",3,"matTooltip","click",4,"ngIf"],[1,"relative","flex","ml-auto"],[3,"colorBackground"],[1,"mr-2"],[3,"isServerSearch","placeholder","searchContentObj","styleInput","onSearch"],[1,"filter","mr-2"],[3,"changeFilterEvent"],[1,"menu"],[1,"btn","btn-sm",3,"matMenuTriggerFor"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-menu","w-4","h-4"],["x1","4","y1","12","x2","20","y2","12"],["x1","4","y1","6","x2","20","y2","6"],["x1","4","y1","18","x2","20","y2","18"],[1,"container-fluid","content-zone","pr-0",3,"ngClass"],[1,"row","mt-5","align-items-center","mx-auto",2,"width","100%"],[1,"col-10","p-0","text-left"],[1,"h6",2,"font-weight","400","font-size","14px"],["azt-track-service","homework-result-list-Fk1Yij7NXbZ",1,"clickable","link-stu",3,"routerLink"],["class","box-content py-2",4,"ngIf","ngIfElse"],["allStudentOrStudentFilterBySearchKey",""],[3,"studentLists","homeworkObj","tableType"],["azt-track-service","homework-result-list-Ej_zMayVTN_",1,"btn","btn-sm","mr-2",3,"matTooltip","click"],["x","3","y","3","width","18","height","18","rx","2","ry","2"],["d","M9 3v18"],["d","m14 9 3 3-3 3"],["azt-track-service","homework-result-list-hYOFjZmUAjh",1,"btn","btn-sm","mr-2",3,"matTooltip","click"],["d","m16 15-3-3 3-3"],[1,"box-content","py-2"],[1,"text-center","mt-5"],[1,"h4"],[3,"backToLink","studentLists","isNotTestedYet","isOpenSideNav","obj"],[1,"py-4"]],template:function(e,i){if(1&e&&(t.TgZ(0,"teacher-layout",0),t.YNc(1,TN,1,0,"azt-loading-effect",1),t.YNc(2,FN,2,2,"ng-template",null,2,t.W1O),t.qZA(),t.TgZ(4,"mat-menu",3,4)(6,"div",5)(7,"ul",6)(8,"li")(9,"a",7),t.NdJ("click",function(){return i.exportToExcel("homework")}),t.O4$(),t.TgZ(10,"svg",8),t._UZ(11,"path",9)(12,"polyline",10)(13,"line",11),t.qZA(),t._uU(14),t.ALo(15,"mytranslate"),t.qZA()(),t.kcU(),t.TgZ(16,"li")(17,"a",12),t.NdJ("click",function(){return i.exportToPDF()}),t.O4$(),t.TgZ(18,"svg",13),t._UZ(19,"path",14)(20,"polyline",15)(21,"line",16)(22,"line",17)(23,"line",18),t.qZA(),t._uU(24),t.ALo(25,"mytranslate"),t.qZA()(),t.kcU(),t.TgZ(26,"li")(27,"label",19),t.NdJ("click",function(r){return r.stopPropagation()}),t.TgZ(28,"span",20),t.O4$(),t.TgZ(29,"svg",21),t._UZ(30,"path",22)(31,"path",23)(32,"path",24)(33,"path",25)(34,"path",26),t.qZA(),t._uU(35),t.ALo(36,"mytranslate"),t.qZA(),t.kcU(),t.TgZ(37,"div",27)(38,"form",28)(39,"input",29),t.NdJ("change",function(){return i.sortByTimeDesc()}),t.qZA()()()()()()()()),2&e){const a=t.MAs(3);t.Q6J("headerBackToLink",i.paramBackToLink),t.xp6(1),t.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a),t.xp6(13),t.hij(" ",t.lcZ(15,7,"lang_homework_homework_score_list_export_excel")," "),t.xp6(10),t.hij(" ",t.lcZ(25,9,"lang_homework_homework_score_list_export_pdf")," "),t.xp6(11),t.hij(" ",t.lcZ(36,11,"lang_testbank_tested_list_sort_time")," "),t.xp6(3),t.Q6J("formGroup",i.form)}},dependencies:[O.rH,D.mk,D.O5,Ii.VK,Ii.p6,dl.jA,dl.kh,dl.LW,Mi.gM,f._Y,f.Wl,f.JJ,f.JL,f.sg,f.u,si.l,oo.M,tg.M,$0,n4.s,Yf.W,fo._,$P,WP,xN,wN,jt.Jy,jt.JV],encapsulation:2}),n})();function RN(n,o){1&n&&t._UZ(0,"azt-loading-effect")}function UN(n,o){if(1&n&&(t.TgZ(0,"div",22),t._UZ(1,"print-history-box",23),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.Q6J("examObj",e.examObj)("offlineExamObj",e.offlineExamObj)("startStudentCode",e.startStudentCode)("examPrintInfoObj",e.examPrintInfoObj)}}const $6=function(n){return[n]};function BN(n,o){if(1&n&&(t.TgZ(0,"div",4)(1,"div",5)(2,"h3",6),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()(),t.TgZ(5,"div",7),t.YNc(6,UN,2,4,"div",8),t.qZA(),t.TgZ(7,"div",9)(8,"div",10)(9,"a",11),t.ALo(10,"navigationLocalize"),t.O4$(),t.TgZ(11,"svg",12),t._UZ(12,"path",13)(13,"polyline",14)(14,"path",15)(15,"path",16)(16,"path",17)(17,"path",18),t.qZA(),t._uU(18),t.ALo(19,"mytranslate"),t.qZA()(),t.kcU(),t.TgZ(20,"div",19)(21,"a",20),t.ALo(22,"navigationLocalize"),t.O4$(),t.TgZ(23,"svg",12),t._UZ(24,"path",21),t.qZA(),t._uU(25),t.ALo(26,"mytranslate"),t.qZA()()()()),2&n){const e=t.oxw(2);let i,a;t.xp6(3),t.hij(" ",t.lcZ(4,6,"lang_auto_tao_file_thanh_cong")," \u{1f44f} "),t.xp6(3),t.Q6J("ngIf",e.offlineExamObj&&(null==e.offlineExamObj?null:e.offlineExamObj.hashId)),t.xp6(3),t.Q6J("routerLink",t.VKq(16,$6,t.lcZ(10,8,"/admin/testbank/exam-results-list/"+(null!==(i=e.examObj.categoryId)&&void 0!==i?i:0)+"/"+e.examObj.id+"/0"))),t.xp6(9),t.hij(" ",t.lcZ(19,10,"lang_auto_quan_ly_danh_sach_da_thi")," "),t.xp6(3),t.Q6J("routerLink",t.VKq(18,$6,t.lcZ(22,12,"/admin/testbank/document-management/0/"+(e.backToLink.includes("shareType")?0:null!==(a=e.examObj.categoryId)&&void 0!==a?a:0)+"/1"))),t.xp6(4),t.hij(" ",t.lcZ(26,14,"lang_auto_ve_trang_quan_ly_file")," ")}}function zN(n,o){if(1&n&&t.YNc(0,BN,27,20,"div",3),2&n){const e=t.oxw();t.Q6J("ngIf",e.examObj)}}let JN=(()=>{class n extends St.Q{redirectToDocumentManager(){this.myNavigation(`/admin/testbank/document-management/0/${this.examObj?.categoryId??0}/1`)}redirectToTestResultList(){this.myNavigation(`/admin/testbank/exam-results-list/${this.examObj?.categoryId??0}/${this.examObj?.id}/0`)}getExamInfo(e,i){this.initStatusObj(),this.waitDestroy(this.documentConfigService.apiDocumentConfigGetExamConfigDataGet(e,i).subscribe(a=>{1==a.success?(a.data?.examObj&&a.data.offlineExamObj&&(this.examObj=a.data.examObj,this.offlineExamObj=a.data.offlineExamObj,this.examPrintInfoObj=a.data.examPrintInfoObj),this.successStatusObj()):this.errorStatusObj(a.message??"",!0)}))}ngOnInit(){let e=this.commonService.getMyParam(this.activeRoute,"hash_id")??"",i=this.commonService.getMyParam(this.activeRoute,"cat_id")??"";this.offlineHashId=this.commonService.getMyParam(this.activeRoute,"offline_hash_id")??"",this.getExamInfo(e,this.offlineHashId);let a=this.commonService.getMyQueryParam("backto");this.backToLink=a??`/admin/testbank/document-management/0/${i}/1`,this.commonService.translateMetaData({title:"lang_cms_download_print_data_title",description:"lang_cms_download_print_data_description",image:""}),super.ngOnInit()}constructor(e,i){super(),this.documentConfigService=e,this.activeRoute=i,this.backToLink="",this.offlineHashId="",this.startStudentCode=1}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Ke.Cq),t.Y36(O.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-download-file-print"]],features:[t._Bn([D.uU]),t.qOj],decls:4,vars:3,consts:[[3,"headerBackToLink"],[4,"ngIf","ngIfElse"],["doneLoading",""],["class","intro-y action-document mx-auto mt-8","style","max-width: 700px",4,"ngIf"],[1,"intro-y","action-document","mx-auto","mt-8",2,"max-width","700px"],[1,"action-heading","mb-4"],[1,"text-lg","font-medium","mb-1"],[1,"action-offline","mt-5"],["class","box mt-3 p-5",4,"ngIf"],[1,"mt-5","flex","flex-col","sm:flex-row","justify-center","items-center"],[1,"mr-2"],["azt-track-service","download-file-print-KZ0pTIEXewD",1,"btn","btn-outline-primary","btn-transparent",3,"routerLink"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","mr-2"],["d","M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],["points","14 2 14 8 20 8"],["d","M8 13h2"],["d","M8 17h2"],["d","M14 13h2"],["d","M14 17h2"],[1,"w-30"],["azt-track-service","download-file-print-O-UfiBIC5BM",1,"btn","btn-outline-primary","btn-transparent",3,"routerLink"],["d","M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z"],[1,"box","mt-3","p-5"],[3,"examObj","offlineExamObj","startStudentCode","examPrintInfoObj"]],template:function(e,i){if(1&e&&(t.TgZ(0,"teacher-layout",0),t.YNc(1,RN,1,0,"azt-loading-effect",1),t.YNc(2,zN,1,1,"ng-template",null,2,t.W1O),t.qZA()),2&e){const a=t.MAs(3);t.Q6J("headerBackToLink",i.backToLink),t.xp6(1),t.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a)}},dependencies:[O.rH,D.O5,si.l,fo._,bp,jt.Jy,jt.JV],styles:[".app[_ngcontent-%COMP%]{margin-top:100px}.app-block[_ngcontent-%COMP%]{max-width:750px;margin:0 auto}.app-head[_ngcontent-%COMP%]{text-align:center}.app-title[_ngcontent-%COMP%]{font-size:14px;font-weight:500;margin-bottom:0}.app-main[_ngcontent-%COMP%]{margin-top:40px}.app-copy[_ngcontent-%COMP%]{display:flex;justify-content:center;position:relative;width:630px;margin:0 auto}.btn-export[_ngcontent-%COMP%]{transition:all .5s;background:#2361ae}.btn-export[_ngcontent-%COMP%]:hover:enabled{background:#122e50}.app-content[_ngcontent-%COMP%]{border:none;outline:none;background:#fff;border-radius:5px;box-shadow:#00000012 0 0 5px;height:70px;box-sizing:border-box;padding:15px 20px;font-size:18px;color:#2361ae;width:100%;display:flex;align-items:center}.app-content-icon[_ngcontent-%COMP%]{margin-right:15px}.app-main-bottom[_ngcontent-%COMP%]{margin:30px auto 0;text-align:center;max-width:630px}.btn-text[_ngcontent-%COMP%]{border:none;text-transform:uppercase;background:transparent;color:#2361ae}.app-footer[_ngcontent-%COMP%]{margin-top:40px;margin-bottom:100px;text-align:center}.app-footer[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#babbbc;font-size:18px}.btn-copy[_ngcontent-%COMP%]{position:absolute;display:flex;background:#2361ae;align-items:center;right:0;height:100%;width:134px;border:none;padding:22px 23px;color:#fff;border-top-left-radius:0;border-bottom-left-radius:0;transition:all .5s}.btn-copy[_ngcontent-%COMP%]:hover{background:#184479}.btn-copy[_ngcontent-%COMP%]   .text-copy[_ngcontent-%COMP%]{margin-left:15px;text-transform:initial;font-size:16px}.btn-copy[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{width:30px;height:30px;font-size:30px}.truncate[_ngcontent-%COMP%]{width:70%}@media screen and (max-width: 768px){.app-copy[_ngcontent-%COMP%]{max-width:630px;width:auto}.btn-copy[_ngcontent-%COMP%]{right:0;width:auto}.app-content[_ngcontent-%COMP%]{padding-left:15px;padding-right:140px}}"]}),n})(),HN=(()=>{class n{static generate(e){const i=n._DEFAULT;if(void 0!==e)for(const a in i)Object.hasOwnProperty.call(i,a)&&Object.prototype.hasOwnProperty.call(e,a)&&(i[a]=e[a]);return i}}return n._DEFAULT={is_select_cell:!0,is_select_row:!0},n})();class ds{constructor(o,e,i,a,r,s,l){this.commonService=o,this.noteAction=e,this.questionService=i,this.callbackOnChange=l,this.name="table_matrix",this.class_active="select",this.first_matrix=null,this.last_matrix=null,this.max_row=0,this.max_col=0,this.menuElement=null,this.list=[],this.menuMode=[],this.lstNode=[],this.isErrSum=!1,this.statusDisable=!1,this.table__main=a,this.table__element=r,this.option=s,this.flag=!1,this.flag_right=!1,this.flag_shift=!1,this.flag_un_merge=!1,this.flag_merge=!1,this.list=[],this.startAddEvent(),this.setupMenuMode(),window.addEventListener("mouseup",()=>{this.endCheck()})}get isErrNumPos(){return this.lstNode.filter(o=>o.content.filter(e=>e.isErr).length>0).length>0}setDisable(o){this.statusDisable=o,this.reBuild()}pushNode(o){return o={...o},new Promise(e=>{if(this.statusDisable)e();else{const i=this.pushTrElement(o);i&&this.reqCheck(i).then(()=>{e()})}})}getResult(){return this.lstNode.length>0?this.lstNode.map(o=>(o.content=o.content.map(e=>({...e,value:"POS"===e.indexName?e.value.replace("&nbsp;","").trim().toUpperCase():this.getResultOfString(e.value)})),o)):[]}resetAndPushList(o){return new Promise(e=>{this.lstNode=o.map(a=>{if("knowledge"===a.obj.type&&a.obj.item.endsWith(")")&&(a.obj.item=a.obj.item.substring(0,a.obj.item.lastIndexOf("(")),a.obj.prNode&&a.obj.prNode.item.endsWith(")")&&(a.obj.prNode.item=a.obj.prNode.item.substring(0,a.obj.prNode.item.lastIndexOf("(")))),a.content.length!==this.colName().length){const r=this.colName();let s=a.content.map(l=>l.indexName);r.forEach((l,c)=>{s.includes(l)||a.content.unshift(this.createEmptyContentWithName(c,a.content[0].id))}),a.content=a.content.map(l=>({...l,index:this.colNameToIndex(l.indexName)}))}return a.content=a.content.map(r=>(r.totalTL=0,r.totalTN=0,r.tempTotalTL=0,r.tempTotalTN=0,r)),a});const i=new $t.Q(2);this.lstNode.forEach(a=>{i.addTask(this,this.reqCheck,[a])}),i.start().then(()=>{this.lstNode.forEach(a=>{a.content.forEach(r=>{r.mergeId.length>0&&(r.tempTotalTL=r.totalTL,r.tempTotalTN=r.totalTN,r.mergeId.forEach(s=>{const l=this.lstNode.findIndex(c=>c.index===s);-1!==l&&this.lstNode[l].content[r.index]&&(r.totalTL+=this.lstNode[l].content[r.index].totalTL,r.totalTN+=this.lstNode[l].content[r.index].totalTN)}))})}),this.reBuild(),e()})})}getSumQuestion(){let o=0;return this.lstNode.forEach(e=>{const i=this.sumParamOfColName(e.content,"SOCH_TL"),a=this.sumParamOfColName(e.content,"SOCH_TN");o+=i+a}),o}sumParamOfColName(o,e){const i={SOCH_TN:0,SOCH_TL:0,TGP:0};return o.forEach(a=>{a.indexName.indexOf("SOCH")>0&&(-1!==a.value.toUpperCase().indexOf("TL")?i.SOCH_TL+=ds.selectNumberOfString(a.value)??0:i.SOCH_TN+=ds.selectNumberOfString(a.value)??0),a.indexName.indexOf("TGP")>0&&(i.TGP+=ds.selectNumberOfString(a.value)??0)}),i[e]}reqCheck(o){return new Promise(e=>{let i,a,r;"test"===o.obj.type&&(a=o.obj.id.toString(),o.obj.shareType=o.obj.prNode?o.obj.prNode.shareType:void 0),"cate"===o.obj.type&&(i=o.obj.id.toString(),"-1"===i&&(o.obj.shareType="user")),"knowledge"===o.obj.type&&(r=o.obj.id.toString());let s=this.commonService.myTranslateInstant("lang_auto_don_vi")??"",l=this.commonService.myTranslateInstant("lang_auto_khong_tim_thay_cau_hoi_duoc_gan_nhan");this.questionService.apiQuestionsSummarizeTagsTypesGet(i,a,void 0,void 0,o.obj.shareType,r).subscribe(c=>{o.disLoading=!0,1===c.success&&c.data?0===c.data.reduce((h,_)=>h+(_.total??0),0)?(o.obj.item=this.commonService.myTranslateInstant(o.obj.item)??"",this.noteAction(s+': "'+o.obj.item+'":'+l,!0),o.content.forEach(h=>{h.disabled=!0})):o.content.forEach(h=>{const _=c.data?.map(T=>({answerType:T.answerType,tags:T.tags?.filter(P=>P.code==h.indexName.split("_")[0])})),x=_?.find(T=>3===T.answerType),b=_?.find(T=>1===T.answerType||4===T.answerType);h.totalTL=x?.tags?.reduce((T,P)=>T+(P.total??0),0)??0,h.totalTN=b?.tags?.reduce((T,P)=>T+(P.total??0),0)??0}):(this.noteAction(s+': "'+o.obj.item+'":'+l,!0),o.content.forEach(d=>{d.disabled=!0})),this.reBuild(),e()})})}getResultOfString(o){o=o.replace("&nbsp;","").trim().toUpperCase();let e=!1;const i=ds.selectNumberOfString(o);return i?(["TN","TL"].forEach(a=>{-1!==o.indexOf(a)&&(e=!0,o=i.toString()+a)}),e?o:i.toString()):""}pushChangeEvent(){this.callbackOnChange&&this.callbackOnChange(this.lstNode)}startAddEvent(){if(this.getMatrixTable(),this.statusDisable)return;const o=c=>{this.startCheck(c)},e=c=>(c.preventDefault(),this.startRightCheck(c),!1),i=c=>{this.flag&&(c.preventDefault(),this.moveCheck(c.target))},a=c=>{this.validateInput(c)},r=c=>{this.checkHotKey(c)},s=c=>{this.checkHotKeyEnd(c)};for(let c=0;c<this.max_row;c++)for(let d=0;d<this.max_col;d++){const h=this.getElWithMatrix(d,c);h&&h.classList.contains("edit-item-tb")&&(h.setAttribute("row_index",c.toString()),h.setAttribute("col_index",d.toString()),h.addEventListener("mousedown",o),h.addEventListener("contextmenu",e,!1),h.addEventListener("mouseover",i),h.addEventListener("input",a),h.addEventListener("keydown",r),h.addEventListener("keyup",s))}const l=document.getElementsByClassName("tb-matrix-editor-trash-node");Array.from(l).forEach(c=>{c.addEventListener("click",()=>{const d=this.getNodeWithElement(c);if(d){if(d.isMergeCate){const h=this.getRootMerge(d,"Cate");h&&h.numMergeCate--}else if(d.numMergeCate>1){const h=this.lstNode[this.lstNode.indexOf(d)+1];h&&(h.isMergeCate=!1,h.numMergeCate=d.numMergeCate-1)}d.content.forEach(h=>{if(h.isMerge){const _=this.findContentRootOfMerge(h,d.index);_&&_.mergeId.splice(_.mergeId.indexOf(d.index),1)}else if(h.mergeId.length>0){const _=this.findContentNextMerge(h);_&&(h.mergeId.splice(0,1),_.isMerge=!1,_.mergeId=h.mergeId)}}),this.lstNode.splice(this.lstNode.indexOf(d),1)}this.reBuild()})})}findContentRootOfMerge(o,e){let i;return this.lstNode.forEach(a=>{a.content.forEach(r=>{r.index==o.index&&r.mergeId.includes(e)&&(i=r)})}),i}findContentNextMerge(o){const e=this.lstNode.find(i=>i.index==o.mergeId[0]);if(e&&e.content[o.index])return e.content[o.index]}checkHotKeyEnd(o){return 16===o.keyCode&&(o.preventDefault(),this.list.length>1&&this.openMenu("select")),!1}checkHotKey(o){const e=(r,s)=>{if(this.flag_shift&&s){const l=this.getElWithMatrix(r.cell,r.row);l&&(0===this.list.length&&this.checkList(o.target),this.checkList(l))}else this.removeAllList(),this.focusMatrix(r);return!1},i=0===this.list.length?o.target:this.list[this.list.length-1],a=this.getMatrixEl(i);return 40===o.keyCode?(o.preventDefault(),e({...a,row:a.row+1},this.option.is_select_row)):38===o.keyCode?(o.preventDefault(),e({...a,row:a.row-i.rowSpan},this.option.is_select_row)):37===o.keyCode?(o.preventDefault(),e({row:a.row-i.rowSpan+1,cell:a.cell-1},this.option.is_select_cell)):39===o.keyCode?(o.preventDefault(),e({row:a.row-i.rowSpan+1,cell:a.cell+1},this.option.is_select_cell)):13===o.keyCode?(o.preventDefault(),this.flag_un_merge?(this.startUnMergeAction(),!1):this.flag_merge?(this.startMergeAction(),!1):this.flag_shift?(this.startRightCheck(o),!1):e({...a,row:a.row+1},this.option.is_select_row)):(16===o.keyCode&&(o.preventDefault(),this.flag_shift=!0),!1)}focusMatrix(o){const e=this.getElWithMatrix(o.cell,o.row);e&&e.focus()}startRightCheck(o){const e=o.target;e.rowSpan>1&&(this.flag_right=!0,this.flag=!1,this.list=[e],this.openMenu("right"),this.flag_un_merge=!0)}startCheck(o){this.removeAllList(),this.flag=!0,this.checkList(o.target)}moveCheck(o){this.toggleCursor(!0),this.checkList(o)}endCheck(){this.flag_right||(this.toggleCursor(!1),this.flag=!1,this.stepMenu()||this.removeAllList())}checkList(o){0===this.list.length?this.first_matrix=this.getMatrixEl(o):this.last_matrix=this.getMatrixEl(o),this.getList(),this.loopList(),this.flag_merge=!0}removeAllList(){this.closeMenu(),this.removeSelectList(),this.first_matrix=null,this.last_matrix=null,this.flag=!1,this.flag_right=!1,this.flag_shift=!1,this.flag_un_merge=!1,this.flag_merge=!1}getMatrixEl(o){return{cell:Number(o.getAttribute("col_index")),row:Number(o.getAttribute("row_index"))}}getMatrixTable(){this.table__element.innerHTML=this.table__element.innerHTML,this.max_row=this.table__element.rows.length,this.max_col=16}getList(){if(this.removeSelectList(),this.first_matrix&&this.last_matrix){let o=0,e=0,i=0,a=0;this.first_matrix.cell<this.last_matrix.cell?(o=this.first_matrix.cell,e=this.last_matrix.cell):(o=this.last_matrix.cell,e=this.first_matrix.cell),this.first_matrix.row<this.last_matrix.row?(i=this.first_matrix.row,a=this.last_matrix.row):(i=this.last_matrix.row,a=this.first_matrix.row);for(let r=o;r<=e;r++)for(let s=i;s<=a;s++){let l=!1;this.option.is_select_cell&&this.option.is_select_row?l=!0:this.option.is_select_row?o===e&&(l=!0):i===a&&(l=!0),l?this.pushList(this.getElWithMatrix(r,s)):this.endCheck()}}else this.first_matrix&&this.pushList(this.getElWithMatrix(this.first_matrix.cell,this.first_matrix.row))}loopList(){this.list.forEach(o=>{o.classList.add(this.class_active)})}getElWithMatrix(o,e){var a,r,s,l,c,d,h,i=[];for(h=0;h<this.table__element.rows.length;h++)for(a=this.table__element.rows[h],d=0;d<a.cells.length;d++){for(r=a.cells[d],s=d;i[h]&&i[h][s];++s);for(l=s;l<s+r.colSpan;++l)for(c=h;c<h+r.rowSpan;++c)i[c]||(i[c]=[]),i[c][l]=!0;if(s<=o&&o<s+r.colSpan&&h<=e&&e<h+r.rowSpan)return r}}pushList(o){o&&this.list.push(o)}removeSelectList(){this.list.forEach(o=>{o.classList.remove(this.class_active)}),this.list=[]}toggleCursor(o){document.body.style.cursor=o?"crosshair":"auto"}setupMenuMode(){this.menuMode.push({id:"__merge",mode:"select",action:this.startMergeAction}),this.menuMode.push({id:"__un_merge",mode:"right",action:this.startUnMergeAction})}generateMenu(o){this.menuElement||(this.menuElement=document.getElementById("menu__excel_editor"),this.menuMode.forEach(e=>{const i=document.getElementById(this.menuElement?.id+e.id);i&&i.addEventListener("click",a=>{e.action.call(this)})})),this.menuMode.forEach(e=>{const i=document.getElementById(this.menuElement?.id+e.id);i&&(i.style.display=e.mode===o?"flex":"none")})}stepMenu(){return this.list.length>1&&(this.openMenu("select"),!0)}openMenu(o){if(this.list.length>0){this.generateMenu(o);const e=this.getPosWithParent(this.list[this.list.length-1]);this.menuElement&&(this.menuElement.style.top=e.top+Math.floor(e.height/2)+"px",this.menuElement.style.left=e.left+Math.floor(e.width/2)+"px",this.menuElement.style.display="block")}}closeMenu(){this.menuElement&&(this.menuElement.style.display="none")}getPosWithParent(o){const e=this.table__main.getBoundingClientRect(),i=o.getBoundingClientRect();return{top:i.top-e.top,left:i.left-e.left,width:i.width,height:i.height}}startMergeAction(){let o;var e,i;for(let r=0;r<this.list.length;r++){const s=this.list[r];if(s){const l=this.getNodeWithElement(s);if(l){const c=this.getContentOfNodeWithElement(s,l);c&&(0===r?(o=this.getMatrixEl(s),i=l,(e=c).tempTotalTL=e.totalTL,e.tempTotalTN=e.totalTN):s.parentElement&&e&&(e.mergeId.push(l.index),c.isMerge=!0,c.value=""))}}}let a=[];if(i&&e&&e.mergeId.length>0){const r=[i];e.mergeId.forEach(s=>{const l=this.getNodeWithIndex(s);l&&r.push(l)}),a=this.getLstNodeParent(r)}if(e&&a.length>0)for(let r=0;r<this.list.length;r++){const s=this.list[r];if(s){const l=this.getNodeWithElement(s);if(l&&a.filter(c=>c.obj.id===l.obj.id).length>0){const c=this.getContentOfNodeWithElement(s,l);c&&0!==r&&(e.totalTL+=c.totalTL,e.totalTN+=c.totalTN)}}}this.reBuild(),o&&this.focusMatrix(o)}startUnMergeAction(){const o=this.list[0],e=this.getMatrixEl(o),i=this.getNodeWithElement(o);if(i){const a=this.getContentOfNodeWithElement(o,i);a&&(a.totalTL=a.tempTotalTL,a.totalTN=a.tempTotalTN,a.mergeId.forEach(r=>{const s=this.lstNode.find(l=>l.index==r);if(s){const l=s.content[a.index];l&&(l.isMerge=!1)}}),a.mergeId=[])}this.reBuild(),this.focusMatrix(e)}getCellOfCNode(o,e){for(let i=0;i<this.table__element.rows.length;i++){const a=this.table__element.rows[i];if(a.getAttribute("data-index")===o.index)for(let r=0;r<a.cells.length;r++){const s=a.cells[r];if(s.getAttribute("data-index")===e.index.toString())return s}}}getNodeWithElement(o){if(o.parentElement&&"TR"==o.parentElement.tagName.toUpperCase()){const e=o.parentElement.getAttribute("data-index");if(e){const i=e;return this.lstNode.find(a=>a.index===i)}}}getNodeWithIndex(o){return this.lstNode.find(e=>e.index===o)}isChildWithMatrix(o,e){if(o.obj.prNode)for(var i=this.commonService.myClone(o.obj.prNode);i;){if(e.includes(i.id))return!0;i=i.prNode}return!1}getLstNodeParent(o){const e=[],i=[];return o.forEach(a=>{e.push(a.obj.id)}),o.forEach(a=>{this.isChildWithMatrix(a,e)||0===i.filter(r=>r.obj.id===a.obj.id).length&&i.push(a)}),i}getContentOfNodeWithElement(o,e){const i=o.getAttribute("data-index");if(i&&i?.length>0)return e.content[parseInt(i)]}selectNumberWithElement(o){return ds.selectNumberOfString(o.innerText)}static selectNumberOfString(o){var e=o.replace(/([0-9]+)T/g,"$1");if(!isNaN(Number(e)))return Number(e);var i=o.replace(/([0-9]+)TL/g,"$1");if(!isNaN(Number(i)))return Number(i);var a=o.replace(/([0-9]+)TN/g,"$1");if(!isNaN(Number(a)))return Number(a);var r=o.replace(/([0-9]+)%/g,"$1");return isNaN(Number(r))?void 0:Number(r)}validateInput(o){const e=o.target,a=this.getNodeWithElement(e)?.content.find(l=>l.indexName===e.getAttribute("data-name"));if(0===(e.getAttribute("data-name")??"").indexOf("POS")&&(e.classList.remove("border-err"),e.classList.remove("common-warning-item")),0==e.innerText.length)return a&&0===(e.getAttribute("data-name")??"").indexOf("POS")&&(a.isErr=!1),void this.pushValueWithElement(e);if(e.innerText=e.innerText.replace(/(\r\n|\n|\r)/gm,"").trim().toUpperCase(),-1!==(e.getAttribute("data-name")??"").indexOf("_SOCH")&&(null==this.selectNumberWithElement(e)||e.innerText.includes(".")||e.innerText.includes(","))&&(e.innerHTML="&nbsp;",this.snackErrElement(e)),-1!==(e.getAttribute("data-name")??"").indexOf("_TGP")&&isNaN(Number(e.innerText))&&(e.innerHTML="&nbsp;",this.snackErrElement(e)),0===(e.getAttribute("data-name")??"").indexOf("DIEM")){let l=e.innerText.replace("%","");isNaN(Number(l))?(e.innerHTML="&nbsp;",this.snackErrElement(e)):e.innerText=l}if(0===(e.getAttribute("data-name")??"").indexOf("POS")){const l=Number(e.getAttribute("data-total-input-number"));this.getNoteValidatePos(l,e.innerText,a).isErr&&(this.snackErrElement(e,!1),e.classList.add("common-warning-item"))}""==e.innerText&&(e.innerHTML="&nbsp;");const r=window.getSelection(),s=document.createRange();r.removeAllRanges(),s.selectNodeContents(e),s.collapse(!1),r.addRange(s),e.focus(),this.pushValueWithElement(e)}pushValueWithElement(o){const e=this.getNodeWithElement(o);if(e){const i=this.getContentOfNodeWithElement(o,e);i&&(i.value=o.innerText+("DIEM"===i.indexName?"%":""),this.isNodeWarning(i)?o.classList.add(...this.getWarMsg(i).split(" ")):o.classList.remove("warning-item","wn-empty","wn-over-tn","wn-over-tl"))}this.sumAll()}sumAll(){let o=" ".repeat(this.colName().length).split("").map(()=>0);this.lstNode.forEach(r=>{r.content.forEach(s=>{if(["SOCH_TN","SOCH_TL","TGP"].includes(s.indexName)){s.value=this.sumParamOfColName(r.content,s.indexName).toString();const l=this.getCellOfCNode(r,s);l&&(l.innerText=s.value)}void 0!==o[s.index]&&!s.isMerge&&0!==s.index&&(o[s.index]+=ds.selectNumberOfString(s.value)??0)})});var e="";o.forEach((r,s)=>{s===o.length-1?(this.isErrSum=Number(r)>100,e+=`<td class="text-center">${r>0?r.toString()+"%":""}</td>`):e+=0===s?'<td class="text-center"></td>':`<td class="text-center">${r>0?r.toString():""}</td>`});const a=`<tr class="dis-item-tb"><td colspan="4" class="text-center">${this.commonService.myTranslateInstant("lang_auto_tong")}</td>${e}</tr>`;this.table__element.tFoot&&(this.table__element.tFoot.innerHTML=a),this.lstNode.forEach(r=>{r.content.forEach(s=>{if("POS"===s.indexName){let l=this.countTotalNumQuestRow(r);const c=document.getElementById(`total_input_number_${s.index}${s.id}`);if(c){c.classList.remove("border-err"),c.classList.remove("common-warning-item"),c.setAttribute("data-total-input-number",l.toString());let d=this.getNoteValidatePos(l,s.value,s);c.setAttribute("common-note-trans",d.str),d.isErr&&(this.snackErrElement(c,!1),c.classList.add("common-warning-item"))}}})})}indexToColName(o){return this.colName()[o]??""}colNameToIndex(o){return this.colName().findIndex(e=>e===o)}colName(){return["POS","NB_SOCH","NB_TGP","TH_SOCH","TH_TGP","VD_SOCH","VD_TGP","VDC_SOCH","VDC_TGP","SOCH_TN","SOCH_TL","TGP","DIEM"]}snackErrElement(o,e=!0){let i=this.commonService.myTranslateInstant("lang_auto_du_lieu_nhap_vao_khong_hop_le")??"";this.noteAction(i,!0),o.classList.add("border-err"),e&&setTimeout(()=>{o.classList.remove("border-err")},1200)}hiddenNoteEmpty(){if(0===this.lstNode.length){let o=this.commonService.myTranslateInstant("lang_auto_matrix_content_text");this.table__element.tBodies[0].innerHTML=`<tr class="text-center"><td colspan="17">${o}</td></tr>`}}getRootMerge(o,e){let i=this.lstNode.findIndex(a=>a.index===o.index);for(let a=i;a>=0;a--)if(!this.lstNode[a]["isMerge"+e])return this.lstNode[a];return o}createEmptyContentWithName(o,e){return{totalTL:0,totalTN:0,tempTotalTL:0,tempTotalTN:0,indexName:this.indexToColName(o),index:o,id:e,value:"&nbsp;",mergeId:[],isErr:!1}}pushTrElement(o){var e=!1;if(this.lstNode.length>0){const a=this.lstNode[this.lstNode.length-1];if(a.obj.id===o.id)return;const r=this.getRootMerge(a,"Cate");(e=a.obj.prNode?.id===o.prNode?.id)&&r.numMergeCate++}const i={numMergeCate:1,isMergeCate:e,index:this.generateIdRequired(10),obj:o,content:" ".repeat(this.colName().length).split("").map((a,r)=>this.createEmptyContentWithName(r,o.id))};return this.lstNode.push(i),this.reBuild(),i}getNoteValidatePos(o,e,i){let a={str:this.commonService.myTranslateInstant("lang_auto_validate_empty")??"",isErr:!1};const r=this.commonService.myTranslateInstant("lang_auto_khong_qua")??"",s=this.commonService.myTranslateInstant("lang_auto_du")??"",l=e.replace("&nbsp;","").trim().toUpperCase();if(0===l.length)return i&&(i.isErr=!1),a;let c=l.split(",").map(d=>d.trim());if(!/^[C0-9,]+$/g.test(l)||l.includes(",,")||l.includes("CC")||c.length!==c.filter(d=>""!==d&&0!==Number(d)).length)return a.isErr=!0,i&&(i.isErr=!0),a.str=this.commonService.myTranslateInstant("lang_auto_validate_format")??"",a;if(!a.isErr){if(0===c.length)return i&&(i.isErr=!1),a;c.forEach(d=>{a.isErr=!/C([0-9]+)$/.test(d)&&!/([0-9]+)$/.test(d),a.isErr&&(a.str=this.commonService.myTranslateInstant("lang_auto_validate_format")??"")})}if(!a.isErr){const d=[];c.forEach(_=>{const x=Number(_.replace("C",""));d.includes(x)&&(a.isErr=!0,a.str=this.commonService.myTranslateInstant("lang_auto_validate_exits")??""),d.push(x)});let h=!1;this.lstNode.map(_=>_.content.find(x=>"POS"===x.indexName&&x.id!==i?.id)?.value.split(",").filter(x=>"&nbsp;"!==x).map(x=>Number(x.replace("C","")))).forEach(_=>{_&&_.forEach(x=>{d.includes(x)&&(h=!0)})}),h&&(a.isErr=!0,a.str=this.commonService.myTranslateInstant("lang_auto_validate_exits")??"")}return a.isErr||(a.isErr=c.length!==o,a.isErr&&(a.str=(this.commonService.myTranslateInstant("lang_auto_validate_number")??"").replace("${2}",c.length.toString()).replace("${3}",c.length>o?r:s).replace("${1}",o.toString()))),i&&(i.isErr=c.length!==o),a}reBuild(){let o;this.removeAllList();const e=[];var i="";this.lstNode.forEach((a,r)=>{var s="";s+=`<td class="dis-item-tb text-center">${r+1}</td>`,!a.isMergeCate&&a.obj.prNode&&(a.obj.prNode.item=this.commonService.myTranslateInstant(a.obj.prNode.item)??"",o=this.generateIdRequired(10),e.push(o),s+=`<td id="${o}" rowSpan="${a.numMergeCate}" class="dis-item-tb text-center">${a.obj.prNode.item}</td>`),a.obj.item=this.commonService.myTranslateInstant(a.obj.item)??"",o=this.generateIdRequired(10),e.push(o),s+=`<td id="${o}" class="dis-item-tb text-center" colSpan="${a.obj.prNode?1:2}">${a.obj.item}</td>`,s+='<td class="dis-item-tb text-center tb-matrix-editor-trash-node"><i class="fa fa-trash"></i></td>',a.content.forEach(l=>{if(["SOCH_TN","SOCH_TL","TGP"].includes(l.indexName))s+=`<td data-index="${l.index}" class="dis-item-tb text-center">${l.value}</td>`;else if("POS"===l.indexName){let c=this.countTotalNumQuestRow(a),d=this.getNoteValidatePos(c,l.value,l);s+=`<td id="total_input_number_${l.index}${l.id}" data-total-input-number="${c}" col-name="${this.getNameCol(l.indexName)}" data-name="${l.indexName}" data-index="${l.index}" class="${this.isNoteEditTable(l)?"note-edit-item-tb":""} ${this.getWarMsg(l)} edit-item-tb text-center common-note-item" common-note-trans="${d.str}" ${this.statusDisable?"":'contenteditable="true"'} ${l.mergeId.length>0?'rowSpan="'+(l.mergeId.length+1)+'"':""}>${l.value}</td>`}else if(!l.isMerge)if(a.disLoading){let c=this.commonService.myTranslateInstant("lang_auto_hien_co_trac_nghiem")??"",d=this.commonService.myTranslateInstant("lang_auto_tu_luan")??"",h=this.commonService.myTranslateInstant("lang_auto_khong_co_cau_hoi_nao")??"",_=this.commonService.myTranslateInstant("lang_auto_khong_du_cau_hoi")??"",x=_+" "+this.commonService.myTranslateInstant("lang_auto_cau_TL")?.toLowerCase(),b=_+" "+this.commonService.myTranslateInstant("lang_auto_trac_nghiem")?.toLowerCase();s+=`<td col-name="${this.getNameCol(l.indexName)}" num-tl="${l.totalTL??0}" num-tn="${l.totalTN??0}" data-name="${l.indexName}" first-trans="${c}" last-trans="${d}" over-question-trans-tl="${x}" over-question-trans-tn="${b}" empty-question-trans="${h}" data-index="${l.index}" class="${this.isNoteEditTable(l)?"note-edit-item-tb":""} ${this.getWarMsg(l)} edit-item-tb text-center ${l.value&&!l.indexName.endsWith("_TGP")&&(l.value.includes(".")||l.value.includes(","))?"border-err":""}" ${this.statusDisable?"":'contenteditable="true"'} ${l.mergeId.length>0?'rowSpan="'+(l.mergeId.length+1)+'"':""}>${l.value}</td>`}else s+=`<td data-name="${l.indexName}" data-index="${l.index}" class="text-center" ${l.mergeId.length>0?'rowSpan="'+(l.mergeId.length+1)+'"':""}><i class="fa fa-spinner fa-spin"></i></td>`}),i+=`<tr data-index="${a.index}">${s}</tr>`}),this.table__element.tBodies[0].innerHTML=i,this.sumAll(),this.startAddEvent(),this.hiddenNoteEmpty(),this.pushChangeEvent(),e.forEach(a=>{const r=document.getElementById(a);r&&this.commonService.convertMathJaxContent(r.innerHTML).then(s=>{r.innerHTML=s})})}countTotalNumQuestRow(o){let e=0;return o.content.filter(i=>["SOCH_TN","SOCH_TL"].includes(i.indexName)).forEach(i=>{e+=Number(i.value??"0")}),e}isNodeWarning(o){let e=!o.value.includes("TL");const i=ds.selectNumberOfString(o.value)??0;return this.isNoteEditTable(o)&&(0===o.totalTL&&0===o.totalTN||e&&i>o.totalTN||!e&&i>o.totalTL||!o.totalTL&&!o.totalTN)}getWarMsg(o){let e=!o.value.includes("TL");const i=ds.selectNumberOfString(o.value)??0;if(this.isNoteEditTable(o)){if(0===o.totalTL&&0===o.totalTN||!o.totalTL&&!o.totalTN)return"warning-item wn-empty";if(e&&i>o.totalTN)return"warning-item wn-over-tn";if(!e&&i>o.totalTL)return"warning-item wn-over-tl"}return""}isNoteEditTable(o){return o.indexName.includes("SOCH")&&o.indexName.indexOf("SOCH")>0}getNameCol(o){let e=this.commonService.myTranslateInstant("lang_auto_nhan_biet")??"",i=this.commonService.myTranslateInstant("lang_auto_thong_hieu")??"",a=this.commonService.myTranslateInstant("lang_auto_van_dung")??"",r=this.commonService.myTranslateInstant("lang_auto_van_dung_cao")??"";return 0===o.indexOf("NB")?e:0===o.indexOf("TH")?i:0===o.indexOf("VDC")?a:0===o.indexOf("VD")?r:""}generateIdRequired(o){let e="";for(let r=0;r<o;r++)e+="abcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(36*Math.random()));return Math.floor(Date.now()/1e3)+e}}let GN=(()=>{class n{constructor(e,i){this.gzipHelper=e,this.commonService=i}pushRankToMatrixBeauty(e,i,a){let r=e.ranks.find(s=>s.name===i);r?r.numQuest+=a:e.ranks.push({name:i,numQuest:a})}makeBeautyMatrixObj(e){const i={id:e.id,name:e.name??"",numberQuest:0,ranks:[],knowledge:[]};let a=this.gzipHelper.resultContentSupport(e.content??"");const r=this.commonService.castJsonToObj(a);return r&&r.forEach(s=>{const l=s.content.find(b=>"NB_SOCH"===b.indexName);l&&this.pushRankToMatrixBeauty(i,this.commonService.myTranslateInstant("azt_lang_tag_NB")??"NB",ds.selectNumberOfString(l.value)??0);const c=s.content.find(b=>"TH_SOCH"===b.indexName);c&&this.pushRankToMatrixBeauty(i,this.commonService.myTranslateInstant("azt_lang_tag_TH")??"TH",ds.selectNumberOfString(c.value)??0);const d=s.content.find(b=>"VD_SOCH"===b.indexName);d&&this.pushRankToMatrixBeauty(i,this.commonService.myTranslateInstant("azt_lang_tag_VD")??"VD",ds.selectNumberOfString(d.value)??0);const h=s.content.find(b=>"VDC_SOCH"===b.indexName);h&&this.pushRankToMatrixBeauty(i,this.commonService.myTranslateInstant("azt_lang_tag_VDC")??"VDC",ds.selectNumberOfString(h.value)??0);const _=s.content.find(b=>"SOCH_TN"===b.indexName),x=s.content.find(b=>"SOCH_TL"===b.indexName);_&&x&&(isNaN(Number(_.value))||(i.numberQuest+=Number(_.value)),isNaN(Number(x.value))||(i.numberQuest+=Number(x.value))),s.obj.item.endsWith(")")&&(s.obj.item=s.obj.item.substring(0,s.obj.item.lastIndexOf("("))),i.knowledge.push(s.obj.item)}),i}getBeautyMatrixObjs(e){let i=[];return e.forEach(a=>{i.push(this.makeBeautyMatrixObj(a))}),i}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(Gy.n),t.LFG(mi.z))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var $N=M(7516),YN=M(43242);function KN(n,o){if(1&n&&(t.ynx(0),t._uU(1),t.BQk()),2&n){const e=o.$implicit,i=o.index;t.xp6(1),t.hij(" ",e.numQuest>0?(0==i?"":", ")+e.name+"("+e.numQuest+")":""," ")}}function WN(n,o){if(1&n&&(t.TgZ(0,"li",13),t._UZ(1,"azt-dynamic-hook",14),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("content",e)}}function VN(n,o){if(1&n&&(t.ynx(0),t.YNc(1,WN,2,1,"li",12),t.BQk()),2&n){const e=o.index;t.xp6(1),t.Q6J("ngIf",e<=2)}}function XN(n,o){1&n&&(t.TgZ(0,"div",15),t._uU(1," ... "),t.qZA())}function tZ(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",2)(1,"div",3),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.clickToMatrix(r.id))}),t.TgZ(2,"div",4)(3,"h2",5,6),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()(),t.TgZ(7,"div",7)(8,"h2",8)(9,"b"),t._uU(10),t.ALo(11,"mytranslate"),t.qZA(),t._uU(12),t.qZA()(),t.TgZ(13,"div",7)(14,"h2",8)(15,"b"),t._uU(16),t.ALo(17,"mytranslate"),t.qZA(),t.YNc(18,KN,2,1,"ng-container",9),t.qZA()(),t.TgZ(19,"div",7)(20,"h2",8)(21,"b"),t._uU(22),t.ALo(23,"mytranslate"),t.qZA(),t.TgZ(24,"ul",10),t.YNc(25,VN,2,1,"ng-container",9),t.qZA()()(),t.YNc(26,XN,2,0,"div",11),t.qZA()()}if(2&n){const e=o.$implicit,i=t.MAs(4);t.xp6(3),t.s9C("matTooltip",e.name),t.Q6J("isDisabledTooltip",!1)("matTooltipDisabled",i.isDisabled),t.xp6(2),t.hij(" ",t.lcZ(6,11,e.name)," "),t.xp6(5),t.hij("",t.lcZ(11,13,"lang_matrix_list_total_question"),":"),t.xp6(2),t.hij(" ",e.numberQuest," "),t.xp6(4),t.hij("",t.lcZ(17,15,"lang_matrix_list_level_list"),":"),t.xp6(2),t.Q6J("ngForOf",e.ranks),t.xp6(4),t.hij("",t.lcZ(23,17,"lang_auto_don_vi_kien_thuc"),":"),t.xp6(3),t.Q6J("ngForOf",e.knowledge),t.xp6(1),t.Q6J("ngIf",e.knowledge.length>3)}}let eZ=(()=>{class n extends St.Q{clickToMatrix(e){e&&this.chooseMatrix.emit(e)}ngOnInit(){super.ngOnInit()}constructor(){super(),this.matrixList=[],this.chooseMatrix=new t.vpe}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["exam-matrix-info-box"]],inputs:{matrixList:"matrixList"},outputs:{chooseMatrix:"chooseMatrix"},features:[t.qOj],decls:2,vars:1,consts:[[1,"grid","grid-cols-12","gap-4"],["class","col-span-12 md:col-span-6 lg:col-span-4 box",4,"ngFor","ngForOf"],[1,"col-span-12","md:col-span-6","lg:col-span-4","box"],["azt-track-service","exam-matrix-info-box-61G2BIhvtR",1,"p-3","exam-matrix-info-box",3,"click"],[1,"text-left","w-full",2,"align-self","center"],[1,"intro-x","font-bold","text-lg","truncate",2,"vertical-align","middle",3,"matTooltip","isDisabledTooltip","matTooltipDisabled"],["c","isDisabled"],[1,"text-left","w-full","mt-1",2,"align-self","center"],[1,"intro-x","text-md",2,"vertical-align","middle"],[4,"ngFor","ngForOf"],[1,"px-1",2,"overflow","hidden"],["class","text-left w-full pb-1","style","align-self: center;",4,"ngIf"],["style","list-style: circle; list-style-position: inside;",4,"ngIf"],[2,"list-style","circle","list-style-position","inside"],[3,"content"],[1,"text-left","w-full","pb-1",2,"align-self","center"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.YNc(1,tZ,27,19,"div",1),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngForOf",i.matrixList))},dependencies:[D.sg,D.O5,Mi.gM,Jl.Q,Op.O,jt.JV],encapsulation:2}),n})();function nZ(n,o){1&n&&t._UZ(0,"azt-loading-effect")}function iZ(n,o){if(1&n&&(t.TgZ(0,"button",19),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,e.desc)," ")}}function oZ(n,o){if(1&n&&(t.TgZ(0,"button",20),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,e.desc)," ")}}function aZ(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",16),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw(3);return t.KtG(s.addSubject(r))}),t.YNc(1,iZ,3,3,"button",17),t.YNc(2,oZ,3,3,"button",18),t.qZA()}if(2&n){const e=o.$implicit;t.xp6(1),t.Q6J("ngIf",e.isChoose),t.xp6(1),t.Q6J("ngIf",!e.isChoose)}}function rZ(n,o){1&n&&(t.TgZ(0,"mat-label"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_auto_chon_mon")))}function sZ(n,o){if(1&n&&(t.TgZ(0,"mat-option",30),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",e.id),t.xp6(1),t.Oqu(e.name)}}function lZ(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",21)(1,"div",22)(2,"p",23),t._uU(3),t.qZA()(),t.TgZ(4,"div",24)(5,"div",25)(6,"mat-form-field",26),t.YNc(7,rZ,3,3,"mat-label",27),t.TgZ(8,"mat-select",28),t.NdJ("ngModelChange",function(a){const s=t.CHM(e).$implicit;return t.KtG(s.subjectsIds=a)})("ngModelChange",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.backUpObjData())}),t.YNc(9,sZ,2,2,"mat-option",29),t.qZA()()()()()}if(2&n){const e=o.$implicit,i=t.oxw(3);let a;t.xp6(3),t.Oqu(null==e.class?null:e.class.desc),t.xp6(4),t.Q6J("ngIf",!e.subjectsIds||!e.subjectsIds.length),t.xp6(1),t.Q6J("ngModel",e.subjectsIds),t.xp6(1),t.Q6J("ngForOf",i.multiChooseLevelSubjectService.valueSubjectSurvey[null!==(a=null==e.class?null:e.class.value)&&void 0!==a?a:0])}}function cZ(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8)(4,"h3",9),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()(),t.TgZ(7,"div",10)(8,"button",11),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.nextStep())}),t._uU(9),t.ALo(10,"mytranslate"),t.qZA()()()(),t.TgZ(11,"h3",12),t._uU(12),t.ALo(13,"mytranslate"),t.qZA(),t.TgZ(14,"div",13),t.YNc(15,aZ,3,2,"div",14),t.qZA(),t.TgZ(16,"h3",12),t._uU(17),t.ALo(18,"mytranslate"),t.qZA(),t.TgZ(19,"div",7),t.YNc(20,lZ,10,4,"div",15),t.qZA()()}if(2&n){const e=t.oxw(2);t.xp6(5),t.hij(" ",t.lcZ(6,7,"lang_matrix_list_teacher_choose_subject_and_grade")," "),t.xp6(3),t.Q6J("disabled",!e.checkValidChooseGradeAndSubject(e.dataObjs)),t.xp6(1),t.hij(" ",t.lcZ(10,9,"lang_auto_tiep_tuc")," "),t.xp6(3),t.hij(" ",t.lcZ(13,11,"lang_auto_khoi_day")," "),t.xp6(3),t.Q6J("ngForOf",e.multiChooseLevelSubjectService.valueSurvey),t.xp6(2),t.hij(" ",t.lcZ(18,13,"lang_auto_mon_day")," "),t.xp6(3),t.Q6J("ngForOf",e.dataObjs)}}function uZ(n,o){1&n&&(t.O4$(),t.kcU(),t.ynx(0),t.TgZ(1,"div",40)(2,"h3",41),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()(),t.BQk()),2&n&&(t.xp6(3),t.hij(" ",t.lcZ(4,1,"lang_matrix_list_not_have_suggestion")," "))}function dZ(n,o){if(1&n){const e=t.EpF();t.O4$(),t.kcU(),t.ynx(0),t.TgZ(1,"h3",12),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"exam-matrix-info-box",42),t.NdJ("chooseMatrix",function(a){t.CHM(e);const r=t.oxw(3);return t.KtG(r.gotoEditMatrix(a))}),t.qZA(),t.BQk()}if(2&n){const e=t.oxw(3);t.xp6(2),t.hij(" ",t.lcZ(3,2,"lang_matrix_list_suggestion")," "),t.xp6(2),t.Q6J("matrixList",e.matrixSuggestList)}}function mZ(n,o){if(1&n){const e=t.EpF();t.O4$(),t.kcU(),t.ynx(0),t.TgZ(1,"h3",12),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"exam-matrix-info-box",42),t.NdJ("chooseMatrix",function(a){t.CHM(e);const r=t.oxw(3);return t.KtG(r.gotoEditMatrix(a))}),t.qZA(),t.BQk()}if(2&n){const e=t.oxw(3);t.xp6(2),t.hij(" ",t.lcZ(3,2,"lang_matrix_list_owner_matrix")," "),t.xp6(2),t.Q6J("matrixList",e.matrixOwnerList)}}function hZ(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",31)(4,"h3",32),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()(),t.TgZ(7,"div",10)(8,"button",33),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.createNewMatrix())}),t.O4$(),t.TgZ(9,"svg",34),t._UZ(10,"line",35)(11,"line",36),t.qZA(),t._uU(12),t.ALo(13,"mytranslate"),t.qZA()()()(),t.YNc(14,uZ,5,3,"ng-container",27),t.YNc(15,dZ,5,4,"ng-container",27),t.YNc(16,mZ,5,4,"ng-container",27),t.kcU(),t.TgZ(17,"div",37)(18,"div",38)(19,"azt-paging",39),t.NdJ("goToPaginationPage",function(a){t.CHM(e);const r=t.oxw(2);return t.KtG(r.goToPage(a))}),t.qZA()()()()}if(2&n){const e=t.oxw(2);t.xp6(5),t.hij(" ",t.lcZ(6,6,"lang_matrix_list_choose_below_to_create_exam")," "),t.xp6(7),t.hij(" ",t.lcZ(13,8,"lang_matrix_list_create_new_matrix")," "),t.xp6(2),t.Q6J("ngIf",!e.matrixSuggestList.length&&!e.matrixOwnerList.length),t.xp6(1),t.Q6J("ngIf",e.matrixSuggestList.length>0),t.xp6(1),t.Q6J("ngIf",e.matrixOwnerList.length>0),t.xp6(3),t.Q6J("pageObj",e.pageObj)}}function pZ(n,o){if(1&n&&(t.TgZ(0,"div",3),t.YNc(1,cZ,21,15,"div",4),t.YNc(2,hZ,20,10,"div",4),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",1==e.step),t.xp6(1),t.Q6J("ngIf",2==e.step)}}let _Z=(()=>{class n extends St.Q{backUpObjData(){this.oldDataObjs=this.dataObjs}addSubject(e){e.isChoose=!e.isChoose,this.commonService.isExistInArray(this.classroomGrade,e)?this.classroomGrade=this.classroomGrade.filter(r=>r.value!=e.value):this.classroomGrade.push(e),this.dataObjs=[];let i=this.oldDataObjs.length,a=this.classroomGrade.length;for(let r=0;r<a;r++)if(this.dataObjs[r]={class:this.classroomGrade[r],subjectsIds:[]},i>0)for(let l=0;l<i;l++)this.dataObjs[r]&&this.oldDataObjs[l]&&this.dataObjs[r].class?.value==this.oldDataObjs[l].class?.value&&(this.dataObjs[r]=this.oldDataObjs[l])}checkValidChooseGradeAndSubject(e){let i=!0;return e.length?e.forEach(a=>{(!a.subjectsIds||!a.subjectsIds.length)&&(i=!1)}):i=!1,i}nextStep(){let e=[];for(let i=0;i<this.dataObjs.length;i++)if(this.dataObjs[i].subjectsIds&&Array.isArray(this.dataObjs[i].subjectsIds)){let a=this.dataObjs[i].subjectsIds??[];if(a.length)for(let r=0;r<a.length;r++)e.push({classId:this.dataObjs[i].class?.value??0,subjectId:a[r]})}e.length>0?(this.initStatusObj(),this.surveyConfigService.apiSurveyConfigSaveSurvey3Post({objs:e}).subscribe(i=>{i&&1==i.success?(this.step=2,this.getData()):this.errorStatusObj("lang_auto_khong_load_duoc_du_lieu",!0)})):this.errorStatusObj("lang_matrix_list_choose_grade_and_subject_fail",!0)}chooseAgain(){this.step=1,this.getGradeAndSubjectObj()}goToPage(e){this.commonService.myNavigationWithQueryString("/admin/testbank/matrix-list/"+this.curCate+"/"+e,"?backto="+encodeURIComponent(this.backToLink))}goToHome(){this.commonService.myNavigation("/admin/dashboard")}createNewMatrix(){this.commonService.myNavigationWithQueryString("/admin/testbank/mix-bank-template/"+this.curCate+"/azota/0","?backto="+encodeURIComponent("/admin/testbank/matrix-list/"+this.curCate+"/"+this.pageObj.page))}gotoEditMatrix(e){this.commonService.myNavigationWithQueryString("/admin/testbank/mix-bank-template/"+this.curCate+"/azota/"+e,"?backto="+encodeURIComponent("/admin/testbank/matrix-list/"+this.curCate+"/"+this.pageObj.page))}getSuggestionMatrix(){this.waitDestroy(this.examBank.apiExamBanksGet("knowledge","global",1,3).subscribe(e=>{e&&1==e.success?(this.matrixSuggestList=this.editorSAztCommonService.getBeautyMatrixObjs(e.data?.banks??[]),this.successStatusObj()):this.errorStatusObj(e.message??"",!0)}))}getGradeAndSubjectObj(){this.initStatusObj(),this.waitDestroy(this.commonListService.apiCommonListSubjectAndLevelsGet(this.commonService.getBusinessDomainUrl()).subscribe(e=>{1==e.success?(this.multiChooseLevelSubjectService.processDataSchoolAndLevel(e.data?.schoolLevelSubjectObjs??[]),this.successStatusObj()):this.errorStatusObj(e.message??"")}))}getData(){this.waitDestroy(this.examBank.apiExamBanksGet("knowledge","own",this.pageObj.page,this.pageObj.pageSize).subscribe(e=>{if(e&&1==e.success){this.matrixOwnerList=this.editorSAztCommonService.getBeautyMatrixObjs(e.data?.banks??[]);let i=e.data?.total??1;this.totalOwnerMatrix=i,this.pageObj.setTotalPages(i),this.getSuggestionMatrix()}else this.errorStatusObj(e.message??"",!0)}))}checkSurveySubmitted(){this.initStatusObj(),this.surveyConfigService.apiSurveyConfigGetSurvey3Get().subscribe(e=>{e&&1==e.success?e.data?.objs?.length&&e.data?.objs?.length>0?(this.step=2,this.getData()):this.getGradeAndSubjectObj():this.errorStatusObj("lang_auto_khong_load_duoc_du_lieu",!0)})}ngOnInit(){(0,dt.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{let e=this.commonService.getMyQueryParam("backto");this.backToLink=e??"/admin/testbank/document-management/0/0/1",this.pageObj.setPageNumber(Number(this.commonService.getMyParam(this.activeRoute,"page"))),this.curCate=Number(this.commonService.getMyParam(this.activeRoute,"cate")),this.checkSurveySubmitted()}),this.commonService.translateMetaData({title:"lang_matrix_list_title",description:"lang_matrix_list_description",image:""}),super.ngOnInit()}constructor(e,i,a,r,s,l,c){super(),this.activeRoute=e,this.examBank=i,this.editorSAztCommonService=a,this.documentConfigService=r,this.surveyConfigService=s,this.multiChooseLevelSubjectService=l,this.commonListService=c,this.matrixOwnerList=[],this.matrixSuggestList=[],this.backToLink="",this.curCate=0,this.totalOwnerMatrix=0,this.step=1,this.dataObjs=[],this.oldDataObjs=[],this.classroomGrade=[],this.pageObj=new Ry.m(12)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(O.gz),t.Y36(Ke.SP),t.Y36(GN),t.Y36(Ke.Cq),t.Y36(Pi.XG),t.Y36($N.X),t.Y36(YN.o))},n.\u0275cmp=t.Xpm({type:n,selectors:[["test-config-online"]],features:[t.qOj],decls:4,vars:3,consts:[[3,"headerBackToLink"],[4,"ngIf","ngIfElse"],["doneLoading",""],[1,"container-fluid","py-5"],["class","block-cols-12-full m-0",4,"ngIf"],[1,"block-cols-12-full","m-0"],[1,"action-heading","mb-4"],[1,"grid","grid-cols-12","gap-3"],[1,"col-span-12","md:col-span-6","text-left",2,"align-self","center"],[1,"text-lg","font-medium",2,"vertical-align","middle"],[1,"col-span-12","md:col-span-6","text-right"],["azt-track-service","azota-matrix-list-jSDqGYuTf",1,"btn","btn-info","text-white","shadow-md","mr-2",3,"disabled","click"],[1,"text-lg","font-bold","mt-3","mb-3"],[1,"grid","grid-cols-10","gap-3",2,"max-width","620px"],["azt-track-service","azota-matrix-list-idyray5dXY","class","col-span-10 md:col-span-2 text-left",3,"click",4,"ngFor","ngForOf"],["class","col-span-12 md:col-span-4",4,"ngFor","ngForOf"],["azt-track-service","azota-matrix-list-idyray5dXY",1,"col-span-10","md:col-span-2","text-left",3,"click"],["class","btn btn-secondary shadow-md mr-2 w-full selected-border-box",4,"ngIf"],["class","btn btn-secondary shadow-md mr-2 w-full",4,"ngIf"],[1,"btn","btn-secondary","shadow-md","mr-2","w-full","selected-border-box"],[1,"btn","btn-secondary","shadow-md","mr-2","w-full"],[1,"col-span-12","md:col-span-4"],[1,"text-left"],[1,"text-md","font-medium"],[1,"grid","grid-cols-12","mt-2"],[1,"col-span-12"],["appearance","outline"],[4,"ngIf"],["multiple","",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"col-span-12","md:col-span-6","text-left"],[1,"text-lg","font-bold",2,"vertical-align","middle"],["azt-track-service","azota-matrix-list-h4LcenZp7K",1,"btn","btn-info","text-white","shadow-md","mr-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","mr-2"],["x1","12","y1","5","x2","12","y2","19"],["x1","5","y1","12","x2","19","y2","12"],[1,"col-span-12","flex","flex-wrap","sm:flex-row","sm:flex-nowrap","items-center","mt-5"],[1,"w-full","sm:w-auto","sm:mr-auto"],[3,"pageObj","goToPaginationPage"],[1,"text-center","mx-auto","w-full","py-5"],[1,"text-md","mx-auto","alert","alert-danger"],[3,"matrixList","chooseMatrix"]],template:function(e,i){if(1&e&&(t.TgZ(0,"teacher-layout",0),t.YNc(1,nZ,1,0,"azt-loading-effect",1),t.YNc(2,pZ,3,2,"ng-template",null,2,t.W1O),t.qZA()),2&e){const a=t.MAs(3);t.Q6J("headerBackToLink",i.backToLink),t.xp6(1),t.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a)}},dependencies:[D.sg,D.O5,Lc.ey,rs.KE,rs.hX,vp.gD,f.JJ,f.On,si.l,Uy.L,fo._,eZ,jt.JV],encapsulation:2}),n})();var fZ=M(10217),gZ=M(77757);function xZ(n,o){1&n&&t._UZ(0,"azt-loading-effect")}function bZ(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",3)(1,"div",4)(2,"button",5),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.startExport())}),t.TgZ(3,"span",6),t._UZ(4,"lucide-icon",7),t.qZA(),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()()()}2&n&&(t.xp6(5),t.hij(" ",t.lcZ(6,1,"lang_testbank_export_exam_result_button")," "))}let vZ=(()=>{class n extends St.Q{startExport(){this.initStatusObj(),this.waitDestroy(this.examResultReportService.apiExamResultReportExportExamResultToExcelGet().subscribe(e=>{if(e.data?.value){let a=this.commonService.createFileNameExportFile(["export-exam-result"])+".xlsx";var i=this.sAztMyPdfService.b64toFile(e.data.value,a,"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet");fZ.saveAs(i,a),this.successStatusObj("lang_testbank_export_exam_result_success",!0)}else this.errorStatusObj("lang_testbank_export_exam_result_error",!0)}))}ngOnInit(){this.commonService.translateMetaData({title:"lang_cms_export_exam_result_title",description:"lang_cms_export_exam_result_description",image:""}),super.ngOnInit()}constructor(e,i){super(),this.examResultReportService=e,this.sAztMyPdfService=i,this.backToLink="/admin/dashboard"}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Ke.eO),t.Y36(gZ.z))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-export-exam-result"]],features:[t._Bn([D.uU]),t.qOj],decls:4,vars:3,consts:[[3,"headerBackToLink"],[4,"ngIf","ngIfElse"],["doneLoading",""],[1,"intro-y","action-document","mx-auto","mt-8"],[1,"text-center"],[1,"btn","btn-success","text-white","shadow-md",3,"click"],[1,"w-4","h-4","mr-2","inline-block"],["name","download"]],template:function(e,i){if(1&e&&(t.TgZ(0,"teacher-layout",0),t.YNc(1,xZ,1,0,"azt-loading-effect",1),t.YNc(2,bZ,7,3,"ng-template",null,2,t.W1O),t.qZA()),2&e){const a=t.MAs(3);t.Q6J("headerBackToLink",i.backToLink),t.xp6(1),t.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a)}},dependencies:[D.O5,si.l,fo._,C.Nh5,jt.JV],encapsulation:2}),n})(),yZ=(()=>{class n extends St.Q{redirectToDonate(){this.commonService.myNavigation("/admin/testbank/donate")}}return n.\u0275fac=function(){let o;return function(i){return(o||(o=t.n5z(n)))(i||n)}}(),n.\u0275cmp=t.Xpm({type:n,selectors:[["app-testbank"]],features:[t.qOj],decls:2,vars:0,consts:[["id","testbank-layout"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"router-outlet"),t.qZA())},dependencies:[O.lC],styles:[".header-container[_ngcontent-%COMP%]{border-bottom-left-radius:3px;border-bottom-right-radius:3px;box-shadow:#a997973d 0 1px 7px}.btn-donate[_ngcontent-%COMP%]{background:transparent;border:none;text-transform:inherit;font-size:14px;color:#3c8dbc;display:flex;justify-content:center;align-items:center;margin-right:15px;transition:all .5s}.btn-donate[_ngcontent-%COMP%]:hover{color:#204e69}.btn-donate[_ngcontent-%COMP%]:hover   .donate-icon[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_bounce 1.2s 2s 8}.donate-icon[_ngcontent-%COMP%]{margin-right:5px;animation:_ngcontent-%COMP%_bounce 1.2s 2s 8}@keyframes _ngcontent-%COMP%_bounce{0%,20%,53%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1);transform:translateZ(0)}40%,43%{animation-timing-function:cubic-bezier(.755,.05,.855,.06);transform:translate3d(0,-14px,0) scaleY(1.1) rotate(-15deg)}70%{animation-timing-function:cubic-bezier(.755,.05,.855,.06);transform:translate3d(0,-7px,0) scaleY(1.05) rotate(15deg)}80%{transition-timing-function:cubic-bezier(.215,.61,.355,1);transform:translateZ(0) scaleY(.95) rotate(0)}90%{transform:translate3d(0,-2px,0) scaleY(1.02) rotate(0)}}@media screen and (max-width: 768px){.donate-title[_ngcontent-%COMP%]{display:none}.btn-donate[_ngcontent-%COMP%]{margin-right:0}}"]}),n})();var Y6=M(63019),K6=M(65619),V0=M(41019);let wZ=(()=>{class n{initialData(e,i){return this.schoolLevelId=e,this.schoolSubjectId=i,new Promise(a=>{this.apiLeechData(void 0).then(r=>{a(r.map(s=>new V0.Z(s.id,s.pr,s.type,void 0,s.name,0,!s.isLeaf,!1,void 0,s.isLeaf)))}).catch(()=>{a([])})})}apiLeechData(e){return new Promise(i=>{const a=[];this.testMarketQuestionService.apiTestMarketQuestionsKnowledgeGet(this.schoolLevelId,this.schoolSubjectId,e).subscribe(r=>{1===r.success&&r.data&&(r.data.objs||[]).forEach(l=>{a.push({pr:e??0,id:l.id??0,name:l.name?l.name:"",type:"knowledge",isLeaf:l.isLeaf??!1})}),i(a)})})}constructor(e){this.testMarketQuestionService=e,this.schoolLevelId=0,this.schoolSubjectId=0}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(yp.Q_))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class CZ{get data(){return this.dataChange.value}set data(o){this._treeControl.dataNodes=o,this.dataChange.next(o)}connect(o){return this._treeControl.expansionModel.changed.subscribe(e=>{(e.added||e.removed)&&this.handleTreeControl(e)}),(0,Y6.T)(o.viewChange,this.dataChange).pipe((0,Pr.U)(()=>this.data))}disconnect(o){}handleTreeControl(o){o.added&&o.added.forEach(e=>this.toggleNode(e,!0)),o.removed&&o.removed.slice().reverse().forEach(e=>this.toggleNode(e,!1))}toggleNode(o,e){if("knowledge"!==o.type)return;const i=this.data.indexOf(o);if(e)o.isLoading=!0,this._database.apiLeechData(o.id).then(a=>{const r=a.map(s=>new V0.Z(s.id,s.pr,s.type,void 0,s.name,o.level+1,!s.isLeaf,!1,o,s.isLeaf));this.data.splice(i+1,0,...r),this.dataChange.next(this.data),o.isLoading=!1});else{let a=0;for(let r=i+1;r<this.data.length&&this.data[r].level>o.level;r++,a++);this.data.splice(i+1,a),this.dataChange.next(this.data)}}constructor(o,e){this._treeControl=o,this._database=e,this.dataChange=new K6.X([])}}let TZ=(()=>{class n{constructor(e){this.documentService=e}initialData(){return new Promise(e=>{this.apiLeechData(0).then(i=>{e(i.map(a=>new V0.Z(a.id,a.pr,a.type,a.shareType,a.name,0,"cate"===a.type,a.isLeaf)))})})}apiLeechData(e,i){return new Promise(a=>{const r=[];let s={categoryId:e,documentType:void 0,shareType:i,fileType:void 0,classroomId:void 0,name:void 0,suggestExamPurpose:void 0,lite:1,getGlobal:0,page:1,itemPerPage:-1};this.documentService.apiDocumentsGet(s.categoryId,s.documentType,s.shareType,s.fileType,s.classroomId,s.name,s.suggestExamPurpose,s.lite,s.getGlobal,s.page,s.itemPerPage).subscribe(l=>{1===l.success&&l.data&&((l.data.categoryObjs||[]).forEach(h=>{r.push({pr:e,id:h.id??0,name:h.name??"",type:"cate",shareType:h.shareType,isLeaf:!1})}),(l.data.documentObjs||[]).forEach(h=>{h.exam&&r.push({pr:e,id:h.exam.id??0,name:h.exam.name??"",type:"test",shareType:void 0,isLeaf:!0})})),a(r)})})}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(Ke.Zg))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class kZ{get data(){return this.dataChange.value}set data(o){this._treeControl.dataNodes=o,this.dataChange.next(o)}constructor(o,e){this._treeControl=o,this._database=e,this.dataChange=new K6.X([])}connect(o){return this._treeControl.expansionModel.changed.subscribe(e=>{(e.added||e.removed)&&this.handleTreeControl(e)}),(0,Y6.T)(o.viewChange,this.dataChange).pipe((0,Pr.U)(()=>this.data))}disconnect(o){}handleTreeControl(o){o.added&&o.added.forEach(e=>this.toggleNode(e,!0)),o.removed&&o.removed.slice().reverse().forEach(e=>this.toggleNode(e,!1))}toggleNode(o,e){if("cate"!==o.type)return;const i=this.data.indexOf(o);if(e)o.isLoading=!0,this._database.apiLeechData(o.id,o.shareType).then(a=>{const r=a.map(s=>new V0.Z(s.id,s.pr,s.type,s.shareType,s.name,o.level+1,"cate"===s.type,!1,o));this.data.splice(i+1,0,...r),this.dataChange.next(this.data),o.isLoading=!1});else{let a=0;for(let r=i+1;r<this.data.length&&this.data[r].level>o.level;r++,a++);this.data.splice(i+1,a),this.dataChange.next(this.data)}}}const AZ=["tableMain"],SZ=["table_mix_bank_template"];function OZ(n,o){1&n&&t._UZ(0,"azt-loading-effect")}function EZ(n,o){if(1&n&&(t.TgZ(0,"option",75),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n){const e=o.$implicit,i=t.oxw(3);t.Q6J("value",null==e.schoolLevel?null:e.schoolLevel.id)("selected",(null==e.schoolLevel?null:e.schoolLevel.id)==i.formSchoolInfo.controls.schoolLevel.value),t.xp6(1),t.hij(" ",t.lcZ(2,3,null==e.schoolLevel?null:e.schoolLevel.key)," ")}}function MZ(n,o){if(1&n&&(t.TgZ(0,"option",75),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n){const e=o.$implicit,i=t.oxw(3);t.Q6J("value",e.id)("selected",e.id==i.formSchoolInfo.controls.schoolSubject.value),t.xp6(1),t.hij(" ",t.lcZ(2,3,e.key)," ")}}function IZ(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"form",68)(1,"label",69),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"select",70),t.NdJ("change",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.changeSchoolLevelAndSubject(!0,a.formSchoolInfo.controls.schoolLevel.value,a.formSchoolInfo.controls.schoolSubject.value))}),t.TgZ(5,"option",71),t._uU(6),t.ALo(7,"mytranslate"),t.qZA(),t.YNc(8,EZ,3,5,"option",72),t.qZA(),t.TgZ(9,"label",73),t._uU(10),t.ALo(11,"mytranslate"),t.qZA(),t.TgZ(12,"select",74),t.NdJ("change",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.changeSchoolLevelAndSubject(!1,a.formSchoolInfo.controls.schoolLevel.value,a.formSchoolInfo.controls.schoolSubject.value))}),t.TgZ(13,"option",71),t._uU(14),t.ALo(15,"mytranslate"),t.qZA(),t.YNc(16,MZ,3,5,"option",72),t.qZA()()}if(2&n){const e=t.oxw(2);t.Q6J("formGroup",e.formSchoolInfo),t.xp6(2),t.hij(" ",t.lcZ(3,9,"lang_auto_lop_hoc")," "),t.xp6(3),t.Q6J("selected",0==e.formSchoolInfo.controls.schoolLevel.value),t.xp6(1),t.hij(" ",t.lcZ(7,11,"lang_auto_---chon_khoi"),"--- "),t.xp6(2),t.Q6J("ngForOf",e.schoolLevelSubjectObjs),t.xp6(2),t.hij(" ",t.lcZ(11,13,"lang_auto_mon_hoc")," "),t.xp6(3),t.Q6J("selected",0==e.formSchoolInfo.controls.schoolSubject.value),t.xp6(1),t.hij(" ",t.lcZ(15,15,"lang_auto_---chon_mon"),"--- "),t.xp6(2),t.Q6J("ngForOf",e.schoolSubjectObjs)}}function LZ(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"li"),t._UZ(1,"hr",76),t.TgZ(2,"a",77),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw(2);return t.KtG(s.changeExamBank(r))}),t._uU(3),t.qZA()()}if(2&n){const e=o.$implicit;t.xp6(3),t.Oqu(e.name)}}function PZ(n,o){1&n&&(t.TgZ(0,"span"),t.O4$(),t.TgZ(1,"svg",84),t._UZ(2,"path",85),t.qZA()())}function NZ(n,o){1&n&&(t.TgZ(0,"span"),t.O4$(),t.TgZ(1,"svg",86),t._UZ(2,"path",87)(3,"polyline",88)(4,"path",89),t.qZA()())}function ZZ(n,o){1&n&&(t.TgZ(0,"span"),t.O4$(),t.TgZ(1,"svg",90),t._UZ(2,"path",87)(3,"polyline",88)(4,"line",91)(5,"line",92)(6,"line",93),t.qZA()())}const W6=function(n){return{paddingLeft:n}},V6=function(n,o){return{"tb-active":n,"d-none":o}};function DZ(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"mat-tree-node",78),t.ALo(1,"compareString"),t._UZ(2,"button",79),t.TgZ(3,"div",80),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw(2);return t.KtG(null==s.tableEditor?null:s.tableEditor.pushNode(r))}),t.YNc(4,PZ,3,0,"span",81),t.YNc(5,NZ,5,0,"span",81),t.YNc(6,ZZ,7,0,"span",81),t.TgZ(7,"span",82),t._UZ(8,"azt-dynamic-hook",83),t.qZA()()()}if(2&n){const e=o.$implicit,i=t.oxw(2);t.Q6J("ngStyle",t.VKq(9,W6,15*e.level+"px"))("ngClass",t.WLB(11,V6,i.exitsTables.includes(e.id),!t.xi3(1,6,e.item,i.filterContent))),t.xp6(4),t.Q6J("ngIf","cate"===e.type&&"knowledge"!==e.type||"knowledge"===e.type&&!e.isLeaf),t.xp6(1),t.Q6J("ngIf","cate"!==e.type&&"knowledge"!==e.type),t.xp6(1),t.Q6J("ngIf","knowledge"===e.type&&e.isLeaf),t.xp6(2),t.Q6J("content",e.item)}}function jZ(n,o){1&n&&(t.TgZ(0,"span"),t.O4$(),t.TgZ(1,"svg",84),t._UZ(2,"path",85),t.qZA()())}function qZ(n,o){1&n&&(t.TgZ(0,"span"),t.O4$(),t.TgZ(1,"svg",99),t._UZ(2,"path",87)(3,"polyline",88)(4,"path",89),t.qZA()())}function FZ(n,o){1&n&&(t.TgZ(0,"span",100),t._UZ(1,"azt-loading-ui"),t.qZA())}function QZ(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"mat-tree-node",78),t.ALo(1,"compareString"),t.TgZ(2,"button",94)(3,"mat-icon",95),t._uU(4),t.qZA()(),t.TgZ(5,"div",96),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw(2);return t.KtG(null==s.tableEditor?null:s.tableEditor.pushNode(r))}),t.YNc(6,jZ,3,0,"span",81),t.YNc(7,qZ,5,0,"span",81),t.TgZ(8,"span",97),t._UZ(9,"azt-dynamic-hook",83),t.qZA(),t.YNc(10,FZ,2,0,"span",98),t.qZA()()}if(2&n){const e=o.$implicit,i=t.oxw(2);t.Q6J("ngStyle",t.VKq(12,W6,15*e.level+"px"))("ngClass",t.WLB(14,V6,i.exitsTables.includes(e.id),!t.xi3(1,9,e.item,i.filterContent))),t.xp6(2),t.Q6J("disabled",e.isLoading),t.uIk("aria-label","Toggle "+e.item),t.xp6(2),t.hij(" ",i.treeControl.isExpanded(e)?"expand_more":"chevron_right"," "),t.xp6(2),t.Q6J("ngIf","cate"===e.type&&"knowledge"!==e.type||"knowledge"===e.type&&!e.isLeaf),t.xp6(1),t.Q6J("ngIf","cate"!==e.type&&"knowledge"!==e.type||"knowledge"===e.type&&e.isLeaf),t.xp6(2),t.Q6J("content",e.item),t.xp6(1),t.Q6J("ngIf",e.isLoading)}}function RZ(n,o){if(1&n&&(t.TgZ(0,"div",101)(1,"div",102)(2,"div",103)(3,"span",104),t._UZ(4,"azt-loading-ui"),t.qZA()(),t.TgZ(5,"div",105),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()()()),2&n){const e=t.oxw(2);t.xp6(6),t.Oqu(t.lcZ(7,1,e.logConfig.msg))}}const UZ=function(n){return{"has-err":n}},BZ=function(n){return{"shadow-md":n}};function zZ(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",3)(1,"div",3),t.YNc(2,IZ,17,17,"form",4),t.qZA(),t.TgZ(3,"div",5)(4,"div",6)(5,"div",7)(6,"form",8),t._UZ(7,"input",9),t.ALo(8,"mytranslate"),t.qZA()()(),t.TgZ(9,"button",10),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.downloadTableMixBank())}),t.O4$(),t.TgZ(10,"svg",11)(11,"g",12)(12,"g",13),t._UZ(13,"path",14),t.qZA()()(),t._uU(14),t.ALo(15,"mytranslate"),t.qZA(),t.kcU(),t.TgZ(16,"button",15),t._uU(17),t.ALo(18,"mytranslate"),t.TgZ(19,"mat-icon"),t._uU(20,"expand_more"),t.qZA()(),t.TgZ(21,"mat-menu",null,16)(23,"div",17)(24,"ng-scrollbar",18)(25,"ul",19)(26,"li")(27,"a",20),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.createNew())}),t._uU(28),t.ALo(29,"mytranslate"),t.qZA()(),t.YNc(30,LZ,4,1,"li",21),t.qZA()()()()()(),t.TgZ(31,"div",22)(32,"div",23)(33,"div",24)(34,"ng-scrollbar",25)(35,"mat-tree",26),t.YNc(36,DZ,9,14,"mat-tree-node",27),t.YNc(37,QZ,11,17,"mat-tree-node",28),t.qZA()()(),t.TgZ(38,"div",29)(39,"input",30),t.NdJ("ngModelChange",function(a){t.CHM(e);const r=t.oxw();return t.KtG(r.filterContent=a)}),t.ALo(40,"mytranslate"),t.qZA()()(),t.TgZ(41,"div",31)(42,"div",32,33)(44,"table",34,35)(46,"thead",36)(47,"tr",37)(48,"td",38),t._uU(49),t.ALo(50,"mytranslate"),t.qZA(),t.TgZ(51,"td",38),t._uU(52),t.ALo(53,"mytranslate"),t.qZA(),t.TgZ(54,"td",39),t._uU(55),t.ALo(56,"mytranslate"),t.qZA(),t.TgZ(57,"td",40),t._uU(58),t.ALo(59,"mytranslate"),t.qZA(),t.TgZ(60,"td",41),t._uU(61),t.ALo(62,"mytranslate"),t.qZA(),t.TgZ(63,"td",42),t._uU(64),t.ALo(65,"mytranslate"),t.qZA(),t.TgZ(66,"td",38),t._uU(67,"%"),t._UZ(68,"br"),t._uU(69),t.ALo(70,"mytranslate"),t._UZ(71,"br"),t._uU(72),t.ALo(73,"mytranslate"),t.qZA()(),t.TgZ(74,"tr",37)(75,"td",43),t._uU(76),t.ALo(77,"mytranslate"),t.qZA(),t.TgZ(78,"td",43),t._uU(79),t.ALo(80,"mytranslate"),t.qZA(),t.TgZ(81,"td",43),t._uU(82),t.ALo(83,"mytranslate"),t.qZA(),t.TgZ(84,"td",43),t._uU(85),t.ALo(86,"mytranslate"),t.qZA(),t.TgZ(87,"td",43),t._uU(88),t.ALo(89,"mytranslate"),t.qZA(),t.TgZ(90,"td",44),t._uU(91),t.ALo(92,"mytranslate"),t.qZA()(),t.TgZ(93,"tr",37)(94,"td"),t._uU(95),t.ALo(96,"mytranslate"),t.qZA(),t.TgZ(97,"td"),t._uU(98),t.ALo(99,"mytranslate"),t.qZA(),t.TgZ(100,"td"),t._uU(101),t.ALo(102,"mytranslate"),t.qZA(),t.TgZ(103,"td"),t._uU(104),t.ALo(105,"mytranslate"),t.qZA(),t.TgZ(106,"td"),t._uU(107),t.ALo(108,"mytranslate"),t.qZA(),t.TgZ(109,"td"),t._uU(110),t.ALo(111,"mytranslate"),t.qZA(),t.TgZ(112,"td"),t._uU(113),t.ALo(114,"mytranslate"),t.qZA(),t.TgZ(115,"td"),t._uU(116),t.ALo(117,"mytranslate"),t.qZA(),t.TgZ(118,"td"),t._uU(119),t.ALo(120,"mytranslate"),t.qZA(),t.TgZ(121,"td"),t._uU(122),t.ALo(123,"mytranslate"),t.qZA()()(),t.TgZ(124,"tbody")(125,"tr",45)(126,"td",46),t._uU(127),t.ALo(128,"mytranslate"),t.qZA()()(),t.TgZ(129,"tfoot",36)(130,"tr",47)(131,"td",48),t._uU(132),t.ALo(133,"mytranslate"),t.qZA(),t._UZ(134,"td")(135,"td")(136,"td")(137,"td")(138,"td")(139,"td")(140,"td")(141,"td")(142,"td")(143,"td")(144,"td")(145,"td")(146,"td"),t.qZA()()(),t.TgZ(147,"div",49),t._uU(148),t.ALo(149,"mytranslate"),t._UZ(150,"br"),t._uU(151),t.ALo(152,"mytranslate"),t._UZ(153,"br"),t._uU(154),t.ALo(155,"mytranslate"),t.TgZ(156,"a",50),t._uU(157),t.ALo(158,"mytranslate"),t.qZA(),t._UZ(159,"br"),t._uU(160),t.ALo(161,"mytranslate"),t._UZ(162,"br"),t.qZA(),t.TgZ(163,"div",51)(164,"li",52),t.O4$(),t.TgZ(165,"svg",53),t._UZ(166,"path",54)(167,"path",55)(168,"path",56)(169,"path",57)(170,"path",58)(171,"path",59),t.qZA(),t.kcU(),t.TgZ(172,"span",60),t._uU(173),t.ALo(174,"mytranslate"),t.qZA()(),t.TgZ(175,"li",61),t.O4$(),t.TgZ(176,"svg",62),t._UZ(177,"path",63)(178,"path",55)(179,"path",64)(180,"path",65)(181,"path",66),t.qZA(),t.kcU(),t.TgZ(182,"span",60),t._uU(183),t.ALo(184,"mytranslate"),t.qZA()()()()()(),t.YNc(185,RZ,8,3,"div",67)}if(2&n){const e=t.MAs(22),i=t.oxw();t.xp6(2),t.Q6J("ngIf","azota"===i.selfRequestData),t.xp6(4),t.Q6J("formGroup",i.matrixTableForm),t.xp6(1),t.s9C("placeholder",t.lcZ(8,52,"lang_auto_nhap_ten_ma_tran")+"..."),t.Q6J("readonly",i.isDisableEditor)("ngClass",t.VKq(128,UZ,i.checkName&&(!i.matrixTableForm.controls.blackSelectName.value||0===i.matrixTableForm.controls.blackSelectName.value.trim().length))),t.xp6(7),t.hij(" ",t.lcZ(15,54,"lang_homework_homework_score_list_export_excel")," "),t.xp6(2),t.Q6J("matMenuTriggerFor",e),t.xp6(1),t.hij(" ",t.lcZ(18,56,"lang_auto_danh_sach_da_tao")," "),t.xp6(6),t.Q6J("ngClass",t.VKq(130,BZ,i.banks.length>=10)),t.xp6(1),t.Q6J("visibility","hover"),t.xp6(4),t.hij(" + ",t.lcZ(29,58,"lang_testbank_create_new_matrix")," "),t.xp6(2),t.Q6J("ngForOf",i.banks),t.xp6(4),t.Q6J("visibility","hover"),t.xp6(1),t.Q6J("dataSource",i.commonDataSourceProcess)("treeControl",i.treeControl),t.xp6(2),t.Q6J("matTreeNodeDefWhen",i.hasChild),t.xp6(2),t.s9C("placeholder",t.lcZ(40,60,"lang_auto_loc_theo_ten")),t.Q6J("ngModel",i.filterContent),t.xp6(10),t.hij(" ",t.lcZ(50,62,"lang_auto_STT")," "),t.xp6(3),t.hij(" ",t.lcZ(53,64,"lang_auto_noi_dung_kien_thuc")," "),t.xp6(3),t.hij(" ",t.lcZ(56,66,"lang_auto_don_vi_kien_thuc")," "),t.xp6(3),t.hij(" ",t.lcZ(59,68,"lang_auto_cau_trong_de_minh_hoa")," "),t.xp6(3),t.hij(" ",t.lcZ(62,70,"lang_auto_muc_do_nhan_biet")," "),t.xp6(3),t.hij(" ",t.lcZ(65,72,"lang_auto_tong")," "),t.xp6(5),t.hij(" ",t.lcZ(70,74,"lang_auto_tong")," "),t.xp6(3),t.Oqu(t.lcZ(73,76,"lang_auto_diem")),t.xp6(4),t.hij(" ",t.lcZ(77,78,"lang_auto_nhan_biet")," "),t.xp6(3),t.Oqu(t.lcZ(80,80,"lang_auto_thong_hieu")),t.xp6(3),t.Oqu(t.lcZ(83,82,"lang_auto_van_dung")),t.xp6(3),t.Oqu(t.lcZ(86,84,"lang_auto_van_dung_cao")),t.xp6(3),t.Oqu(t.lcZ(89,86,"lang_auto_so_ch")),t.xp6(3),t.Oqu(t.lcZ(92,88,"lang_auto_thoi_gian_phut")),t.xp6(4),t.Oqu(t.lcZ(96,90,"lang_auto_so_ch")),t.xp6(3),t.Oqu(t.lcZ(99,92,"lang_auto_thoi_gian_phut")),t.xp6(3),t.Oqu(t.lcZ(102,94,"lang_auto_so_ch")),t.xp6(3),t.Oqu(t.lcZ(105,96,"lang_auto_thoi_gian_phut")),t.xp6(3),t.Oqu(t.lcZ(108,98,"lang_auto_so_ch")),t.xp6(3),t.Oqu(t.lcZ(111,100,"lang_auto_thoi_gian_phut")),t.xp6(3),t.Oqu(t.lcZ(114,102,"lang_auto_so_ch")),t.xp6(3),t.Oqu(t.lcZ(117,104,"lang_auto_thoi_gian_phut")),t.xp6(3),t.Oqu(t.lcZ(120,106,"lang_auto_TN")),t.xp6(3),t.Oqu(t.lcZ(123,108,"lang_auto_TL")),t.xp6(5),t.hij(" ",t.lcZ(128,110,"lang_auto_chon_cac_noi_dung_kien_thuc_o_cay_thu_muc_ben_cac_de_them_vao_ma_tran")," "),t.xp6(5),t.hij(" ",t.lcZ(133,112,"lang_auto_tong")," "),t.xp6(16),t.hij(" * ",t.lcZ(149,114,"lang_auto_nhap_tl_vao_sau_so_luong_cau_can_lay_de_chi_lay_cau_tu_luan"),""),t.xp6(3),t.hij(" * ",t.lcZ(152,116,"lang_auto_viet_tat_ch_cau_hoi_tl_tu_luan_dot"),""),t.xp6(3),t.hij(" * ",t.lcZ(155,118,"lang_auto_ban_can_gan_nhan_muc_do_nhan_biet_cho_cac_cau_hoi_trong_dot")," "),t.xp6(3),t.hij(" ",t.lcZ(158,120,"lang_auto_tim_hieu_them")," "),t.xp6(3),t.hij(" * ",t.lcZ(161,122,"lang_auto_nhap_vi_tri_trong_de_note")," "),t.xp6(13),t.Oqu(t.lcZ(174,124,"lang_auto_gop_cac_o_da_chon")),t.xp6(10),t.hij(" ",t.lcZ(184,126,"lang_auto_huy_gop_o_da_chon")," "),t.xp6(2),t.Q6J("ngIf",i.logConfig.status)}}let JZ=(()=>{class n extends St.Q{set tableMain(e){this.tableIsAlready||(this.tableIsAlready=!0,this.initTableEditor(e))}downloadTableMixBank(){if(this.table_mix_bank_template){ul.G.openLoadingEffect(this.commonService.myTranslateInstant("lang_auto_dang_lay_du_lieu_tu_he_thong")??"");var e=this.exportExcelService.exportHtmlTableToExcelBlob(this.table_mix_bank_template,!0);let i=this.commonService.createFileNameExportFile(["lang_matrix_list_total_matrix_"+(this.matrixTableForm.getRawValue().blackSelectName??"")+(this.matrixTableForm.getRawValue().blankSelectId??"")])+".xlsx";this.shareFileFlutterService.shareFileWithBlob(e,i),ul.G.closeLoadingEffect(200)}}initTableEditor(e){const i=e.nativeElement;this.tableEditor=new ds(this.commonService,(r,s,l)=>{s?l&&this.showErrorSnack(r):this.showSuccessSnack(r)},this.questionService,i,i.firstElementChild,HN.generate({is_select_cell:!1}),r=>{this.exitsTables=[],r.forEach(s=>{this.exitsTables.push(s.obj.id)})}),this.curExamBankId?this.setMatrixNodeToTable(r=>{}):this.setCacheMatrixDataInLocalStorageToTable(r=>{})}setMatrixNodeToTable(e){this.tableEditor?.setDisable(this.isDisableEditor),this.tableEditor?.resetAndPushList(this.curMatrixNodeObjs).then(()=>{e(!0)})}setCacheMatrixDataInLocalStorageToTable(e){const i=this.editorOutputDataService.getMatrixData();i&&i.matrix.length>0&&i.response.type===this.selfRequestData?this.applyExamBankData(i.response,i.matrix,a=>{e(!0)}):e(!0)}changeSchoolLevelAndSubject(e,i,a){this.startLoading(),e&&(this.schoolSubjectObjs=this.schoolLevelSubjectObjs.find(s=>s.schoolLevel?.id==i)?.schoolSubjectObjs??[],a=this.schoolLevelSubjectObjs.find(s=>s.schoolLevel?.id==i)?.schoolSubjectObjs.find(s=>s.id==a)?a:this.schoolSubjectObjs[0]?this.schoolSubjectObjs[0].id:0),this.tableEditor?.resetAndPushList([]),this.getKnowledgeBySchoolLevelAndSubject(!0,i,a,r=>{this.stopLoading()})}changeExamBank(e){this.commonService.myNavigationWithQueryString(`/admin/testbank/mix-bank-template/${this.categoryId}/${this.selfRequestData}/${e.id}`,this.commonService.getCurrentQueryString("?"))}cancelChangeContent(){location.reload()}saveAction(){const e=this.tableEditor?.getResult();if(this.tableEditor?.isErrSum)return this.showErrorSnack("lang_auto_vui_long_nhap_tong_%_diem_khong_qua_100%");if(this.tableEditor&&this.tableEditor.isErrNumPos)return this.showErrorSnack("lang_auto_vui_long_nhap_vi_tri_cau_hoi_hop_le");if("azota"===this.selfRequestData&&this.tableEditor&&this.tableEditor.getSumQuestion()>120)return this.showErrorSnack("lang_auto_limit_matrix_bank_question");let i=this.matrixTableForm.controls.blackSelectName.value?.trim();if(!i)return this.showErrorSnack("lang_auto_vui_long_nhap_ten_ma_tran_de_thi");if(!e||!e.length)return this.showErrorSnack("lang_auto_khong_tim_thay_du_lieu_ma_tran");if(this.isDisableEditor)return this.actionRedirect(e);this.startLoading("lang_auto_dang_chuan_bi_cau_hoi_cho_ma_tran_vua_tao");let a=this.matrixTableForm.controls.blankSelectId.value??0,r={name:i,content:this.gzipHelper.zipBigContent(JSON.stringify(e)),type:this.typeRequestData,levelId:this.formSchoolInfo.controls.schoolLevel.value?this.formSchoolInfo.controls.schoolLevel.value:void 0,subjectId:this.formSchoolInfo.controls.schoolSubject.value?this.formSchoolInfo.controls.schoolSubject.value:void 0};a?this.examBankService.apiExamBanksIdPut(a,r).subscribe(s=>{s.success?this.actionRedirect(e):this.showErrorSnack("lang_auto_khong_the_thay_doi_ma_tran_de_thi")}):this.examBankService.apiExamBanksPost(r).subscribe(s=>{s.success?this.actionRedirect(e):this.showErrorSnack("lang_auto_khong_the_luu_ma_tran_de_thi")})}createNew(){this.matrixTableForm.controls.blackSelectName.setValue(null),this.matrixTableForm.controls.blankSelectId.setValue(null),this.tableEditor?.resetAndPushList([])}actionRedirect(e){this.startLoading(),this.editorOutputDataService.setMatrixData({matrix:e,response:{id:Number(this.matrixTableForm.controls.blankSelectId.value),name:this.matrixTableForm.controls.blackSelectName.value??"",type:this.selfRequestData,editable:!this.isDisableEditor,createdAt:new Date,updatedAt:new Date}});let i=`/admin/testbank/azota-editor/${this.categoryId?this.categoryId:0}`;i="azota"===this.selfRequestData?i+"?self=azota":i,this.paramClassroomService.redirectUrlAddParamClassroomReload(i)}get commonDataSourceProcess(){return"user"===this.selfRequestData?this.userCategoriesDataSource:"azota"===this.selfRequestData?this.azotaKnowledgeDataSource:this.userCategoriesDataSource}get typeRequestData(){return"user"===this.selfRequestData?"matrix":"azota"===this.selfRequestData?"knowledge":"matrix"}startLoading(e="lang_loading_data"){let i=this.commonService.myTranslateInstant(e);this.logConfig.status=!0,this.logConfig.msg=i}stopLoading(){this.logConfig.status=!1,this.logConfig.msg=void 0}getSchoolLevelAndSubject(e){if(this.schoolLevelSubjectObjs.length>0)return e(!0);this.testMarketQuestionService.apiTestMarketQuestionsSubjectLevelsGet().subscribe(i=>{i.success?(this.schoolLevelSubjectObjs=i.data?.schoolLevelSubjectObjs??[],e(!0)):(this.errorStatusObj(i.message,!0),e(!1))})}getListExamBanks(e){if(this.banks.length>0)return e(!0);this.examBankService.apiExamBanksGet(this.typeRequestData).subscribe(i=>{i.success?(this.banks=i.data?.banks??[],e(!0)):(this.errorStatusObj(i.message,!0),e(!1))})}getExamBankById(e,i){this.examBankService.apiExamBanksIdGet(e).subscribe(a=>{if(a.success){let r=this.gzipHelper.resultContentSupport(a.data?.content??"");const s=this.commonService.castJsonToObj(r);if(!a.data||!s)return i(!1,void 0,[]),this.errorStatusObj("lang_core_not_found_obj",!0);i(!0,a.data,s)}else i(!1,void 0,[]),this.errorStatusObj(a.message??"",!0)})}applyExamBankData(e,i,a){this.curMatrixNodeObjs=i,this.isDisableEditor=!e.editable,this.matrixTableForm.controls.blankSelectId.setValue(e.id),this.matrixTableForm.controls.blackSelectName.setValue(e.name),this.getKnowledgeBySchoolLevelAndSubject(!1,e.levelId??0,e.subjectId??0,r=>{if(!r)return a(!1);this.setMatrixNodeToTable(a)})}getKnowledgeBySchoolLevelAndSubject(e,i,a,r){if("user"==this.selfRequestData){if(this.commonDataSourceProcess.data.length)return r(!0);this.commonDataSourceProcess._database.initialData(i,a).then(s=>{this.commonDataSourceProcess.data=s,r(!0)})}else{let s=this.schoolLevelSubjectObjs.find(c=>c.schoolLevel?.id==i),l=s?.schoolSubjectObjs.find(c=>c.id==a);if(s&&s.schoolLevel?.id&&l){let c=this.formSchoolInfo.getRawValue();if(!e&&i==c.schoolLevel&&a==c.schoolSubject)return r(!0);this.schoolSubjectObjs=this.schoolLevelSubjectObjs.find(d=>d.schoolLevel?.id==i)?.schoolSubjectObjs??[],this.formSchoolInfo.controls.schoolLevel.setValue(i),this.formSchoolInfo.controls.schoolSubject.setValue(a),this.commonDataSourceProcess._database.initialData(i,a).then(d=>{this.commonDataSourceProcess.data=d,r(!0)})}else this.formSchoolInfo.controls.schoolLevel.setValue(0),this.formSchoolInfo.controls.schoolSubject.setValue(0),this.schoolSubjectObjs=[],this.commonDataSourceProcess.data=[],r(!0)}}initData(){this.startLoading(),this.getSchoolLevelAndSubject(e=>{if(!e)return this.stopLoading();this.getListExamBanks(i=>{if(!i)return this.stopLoading();if(this.curExamBankId)this.getExamBankById(this.curExamBankId,(a,r,s)=>{if(!a||!r)return this.stopLoading();this.applyExamBankData(r,s,l=>{if(!l)return this.stopLoading();this.stopLoading()})});else{let a=this.schoolLevelSubjectObjs.length-1,r=this.schoolLevelSubjectObjs[a]?this.schoolLevelSubjectObjs[a].schoolLevel?.id??0:0,s=this.schoolLevelSubjectObjs.find(l=>l.schoolLevel?.id==r)?.schoolSubjectObjs[0]?.id??0;this.getKnowledgeBySchoolLevelAndSubject(!1,r,s,l=>{this.stopLoading()})}})})}ngOnInit(){super.ngOnInit(),this.waitDestroy((0,dt.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.categoryId=Number(this.commonService.getMyParamOrDefault(this.activeRoute,"cat_id","0")),this.selfRequestData=this.commonService.getMyParamOrDefault(this.activeRoute,"mode_name","user"),this.curExamBankId=Number(this.commonService.getMyParamOrDefault(this.activeRoute,"matrix_id","0"));let e=this.commonService.getMyQueryParam("backto");this.backToLink=e??"/admin/testbank/create-new-document/"+this.categoryId,this.initData()}))}constructor(e,i,a,r,s,l,c,d,h,_,x){super(),this.userCategoriesDatabase=e,this.azotaKnowledgeDatabaseService=i,this.editorOutputDataService=a,this.activeRoute=r,this.examBankService=s,this.questionService=l,this.gzipHelper=c,this.paramClassroomService=d,this.testMarketQuestionService=h,this.exportExcelService=_,this.shareFileFlutterService=x,this.tableIsAlready=!1,this.schoolLevelSubjectObjs=[],this.schoolSubjectObjs=[],this.banks=[],this.curExamBankObj=void 0,this.curMatrixNodeObjs=[],this.backToLink="",this.categoryId=0,this.curExamBankId=0,this.exitsTables=[],this.logConfig={},this.filterContent="",this.selfRequestData="user",this.isDisableEditor=!1,this.checkName=!1,this.getLevel=b=>b.level,this.isExpandable=b=>b.expandable,this.hasChild=(b,T)=>T.expandable,this.treeControl=new B6.C2(this.getLevel,this.isExpandable),this.userCategoriesDataSource=new kZ(this.treeControl,e),this.azotaKnowledgeDataSource=new CZ(this.treeControl,i),this.matrixTableForm=new f.cw({blankSelectId:new f.NI(null),blackSelectName:new f.NI(null)}),this.formSchoolInfo=new f.cw({schoolLevel:new f.NI(0,{nonNullable:!0}),schoolSubject:new f.NI(0,{nonNullable:!0})})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(TZ),t.Y36(wZ),t.Y36(Hs.O),t.Y36(O.gz),t.Y36(Ke.SP),t.Y36(Ke.aE),t.Y36(Gy.n),t.Y36(Oo),t.Y36(yp.Q_),t.Y36(Yy.L),t.Y36(ys.g))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-mix-bank-template"]],viewQuery:function(e,i){if(1&e&&(t.Gf(AZ,5,t.SBq),t.Gf(SZ,5)),2&e){let a;t.iGM(a=t.CRH())&&(i.tableMain=a.first),t.iGM(a=t.CRH())&&(i.table_mix_bank_template=a.first)}},features:[t.qOj],decls:4,vars:4,consts:[[3,"headerBackToLink","showConfirmButton","handleCancel","handleConfirm"],[4,"ngIf","ngIfElse"],["doneLoading",""],[1,"header-mix-bank"],["class","header-fx-item",3,"formGroup",4,"ngIf"],[1,"header-fx-item","d-block"],[1,"bank-name-block"],[1,"name-block"],[1,"input",3,"formGroup"],["formControlName","blackSelectName","type","text",1,"form-control",3,"readonly","placeholder","ngClass"],["azt-track-service","mix-bank-template-1PEX2I_fl",1,"btn","btn-primary","btn-sm","mr-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","x","0px","y","0px","width","24","height","24","viewBox","0,0,256,256",1,"mr-1"],["fill","#ffffff","fill-rule","nonzero","stroke","none","stroke-width","1","stroke-linecap","butt","stroke-linejoin","miter","stroke-miterlimit","10","stroke-dasharray","","stroke-dashoffset","0","font-family","none","font-weight","none","font-size","none","text-anchor","none",2,"mix-blend-mode","normal"],["transform","scale(10.66667,10.66667)"],["d","M12,3l-10,2v14l10,2zM14,5v2h2v2h-2v2h2v2h-2v2h2v2h-2v2h7c0.552,0 1,-0.448 1,-1v-12c0,-0.552 -0.448,-1 -1,-1zM18,7h2v2h-2zM4.17578,8.29688h1.77734l0.92383,2.21484c0.075,0.181 0.13145,0.39091 0.18945,0.62891h0.02539c0.033,-0.143 0.10017,-0.36148 0.20117,-0.64648l1.0293,-2.19727h1.62109l-1.93555,3.66992l1.99219,3.73633h-1.72852l-1.11328,-2.41406c-0.042,-0.085 -0.09181,-0.25614 -0.13281,-0.49414h-0.01562c-0.025,0.114 -0.07539,0.28467 -0.15039,0.51367l-1.12305,2.39453h-1.73633l2.06055,-3.70703zM18,11h2v2h-2zM18,15h2v2h-2z"],[1,"btn","btn-outline-secondary","btn-sm",3,"matMenuTriggerFor"],["historyMatrix","matMenu"],[1,"dropdown-menu","show","relative","w-72",2,"height","450px",3,"ngClass"],["pointerEventsMethod","scrollbar",3,"visibility"],[1,"dropdown-content","mt-0"],["azt-track-service","mix-bank-template-qYcpBwTiaO",1,"dropdown-item","uppercase","font-medium",3,"click"],[4,"ngFor","ngForOf"],[1,"main-mix-blank","bg-white","dark:bg-darkmode-400"],[1,"col-tree"],[1,"col-tree-main","pr-3"],["track","all","pointerEventsMethod","scrollbar",3,"visibility"],[3,"dataSource","treeControl"],[3,"ngStyle","ngClass",4,"matTreeNodeDef"],[3,"ngStyle","ngClass",4,"matTreeNodeDef","matTreeNodeDefWhen"],[1,"filler-node","bg-white","dark:bg-darkmode-400"],["type","text",1,"form-control",3,"ngModel","placeholder","ngModelChange"],[1,"col-table"],["id","table_main",1,"table-main"],["tableMain",""],["id","table__element"],["table_mix_bank_template",""],[2,"color","#2a3545"],[1,"header-tb"],["rowspan","3"],["rowspan","3","colspan","2"],["rowspan","3","colspan","1"],["colspan","8"],["colspan","3"],["colspan","2"],["rowspan","2"],["id","tr__empty-length",1,"text-center","text-slate-500","dark:text-slate-200"],["colspan","17"],[1,"dis-item-tb"],["colspan","4",1,"text-center"],[1,"ins-info"],["azt-track-service","mix-bank-template-uenTko-_UV","href","https://docs.azota.vn/docs/huong-dan-su-dung/de-thi/tao-de-tu-ma-tran-de","target","_blank",1,"text-primary"],["id","menu__excel_editor",1,"menu-excel"],["id","menu__excel_editor__merge",2,"display","none"],["width","25px","viewBox","0, 0, 2048, 2048","focusable","false"],["type","path","d","M 1536 973 l -256 256 l -72 -73 l 132 -132 h -734 l 132 132 l -72 73 l -256 -256 l 256 -256 l 72 72 l -132 133 h 734 l -132 -133 l 72 -72 m 563 -615 v 1741 h -1741 v -1741 m 103 308 h 717 v -205 h -717 m 717 1536 v -205 h -717 v 205 m 1536 -205 h -717 v 205 h 717 m 0 -1229 h -1536 v 922 h 1536 m 0 -1229 h -717 v 205 h 717 z",2,"fill","rgba(250, 250, 250, 1)"],["type","path","d","M 154 1792 v -1638 h 1638 v 1638 z",2,"fill","rgba(250, 250, 250, 1)"],["type","path","d","M 1024 410 h -102 v -205 h 102 m 0 1536 h -102 v -205 h 102 z",2,"fill","rgba(121, 119, 116, 1)"],["type","path","d","M 1843 102 v 1741 h -1741 v -1741 m 103 1639 h 1536 v -1536 h -1536 z",2,"fill","rgba(58, 58, 56, 1)"],["type","path","d","M 1843 410 v 1126 h -1741 v -1126 m 103 1024 h 1536 v -922 h -1536 z",2,"fill","rgba(30, 139, 205, 1)"],["type","path","d","M 1536 973 l -256 256 l -72 -73 l 132 -132 h -734 l 132 132 l -72 73 l -256 -256 l 256 -256 l 72 72 l -132 133 h 734 l -132 -133 l 72 -72 z",2,"fill","rgba(30, 139, 205, 1)"],[1,"menu-content"],["id","menu__excel_editor__un_merge",2,"display","none"],["width","25px","viewBox","0,0,2048,2048","focusable","false"],["type","path","d","M 1843 102 v 1741 h -1741 v -1741 m 103 512 h 717 v -409 h -717 m 1229 1024 h 307 v -512 h -307 m -103 0 h -307 v 512 h 307 m -819 -512 h -307 v 512 h 307 m 102 0 h 308 v -512 h -308 m 308 1024 v -410 h -717 v 410 m 1536 -410 h -717 v 410 h 717 m 0 -1127 v -409 h -717 v 409 z"],["type","path","d","M 1024 1331 v 410 h -102 v -410 m 0 -614 v -512 h 102 v 512 z",2,"fill","rgba(121, 119, 116, 1)"],["type","path","d","M 1843 102 v 1741 h -1741 v -1741 m 1639 103 h -1536 v 1536 h 1536 z",2,"fill","rgba(58, 58, 56, 1)"],["type","path","d","M 1843 614 v 717 h -1741 v -717 m 410 615 v -512 h -307 v 512 m 717 0 v -512 h -308 v 512 m 717 0 v -512 h -307 v 512 m 717 -512 h -307 v 512 h 307 z",2,"fill","rgba(30, 139, 205, 1)"],["class","loading-mess",4,"ngIf"],[1,"header-fx-item",3,"formGroup"],["for","",1,"mr-2","flex-none",2,"width","55px"],["formControlName","schoolLevel",1,"form-select","form-select-sm",3,"change"],["value","0","disabled","",3,"selected"],[3,"value","selected",4,"ngFor","ngForOf"],["for","",1,"ml-2","mr-2","flex-none",2,"width","55px"],["formControlName","schoolSubject",1,"form-select","form-select-sm",3,"change"],[3,"value","selected"],[1,"mx-1","border-slate-200","dark:border-darkmode-400"],["azt-track-service","mix-bank-template-8PSLx-wsAL",1,"dropdown-item",3,"click"],[3,"ngStyle","ngClass"],["mat-icon-button","","disabled",""],["azt-track-service","mix-bank-template-wg2qiwIfQ",1,"title-box","flex",2,"cursor","pointer","align-items","center",3,"click"],[4,"ngIf"],[1,"text-matrix-title","ml-3",2,"word-break","break-all"],[3,"content"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"w-6","h-6","mr-2","text-slate-600","dark:text-slate-500"],["d","M9.828 3h3.982a2 2 0 0 1 1.992 2.181l-.637 7A2 2 0 0 1 13.174 14H2.825a2 2 0 0 1-1.991-1.819l-.637-7a1.99 1.99 0 0 1 .342-1.31L.5 3a2 2 0 0 1 2-2h3.672a2 2 0 0 1 1.414.586l.828.828A2 2 0 0 0 9.828 3zm-8.322.12C1.72 3.042 1.95 3 2.19 3h5.396l-.707-.707A1 1 0 0 0 6.172 2H2.5a1 1 0 0 0-1 .981l.006.139z"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","aria-describedby","cdk-describedby-message-serverApp-1-31","cdk-describedby-host","serverApp-1",1,"mr-0","w-6","h-6","text-pending","mr-2"],["d","M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],["points","14 2 14 8 20 8"],["d","m9 15 2 2 4-4"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["x1","16","y1","13","x2","8","y2","13"],["x1","16","y1","17","x2","8","y2","17"],["x1","10","y1","9","x2","8","y2","9"],["mat-icon-button","","matTreeNodeToggle","",3,"disabled"],[1,"mat-icon-rtl-mirror"],["azt-track-service","mix-bank-template-dDNwOKdL6l",1,"title-box",2,"cursor","pointer",3,"click"],[1,"text-matrix-title"],["class","w-4 h-4 inline-block ml-2",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","aria-describedby","cdk-describedby-message-serverApp-1-31","cdk-describedby-host","serverApp-1",1,"mat-tooltip-trigger","w-6","h-6","text-pending","ng-star-inserted"],[1,"w-4","h-4","inline-block","ml-2"],[1,"loading-mess"],[1,"loading-content"],[1,"icon-msg"],[1,"w-4","h-4","inline-block","mr-2"],[1,"text-msg"]],template:function(e,i){if(1&e&&(t.TgZ(0,"editor-layout",0),t.NdJ("handleCancel",function(){return i.cancelChangeContent()})("handleConfirm",function(){return i.saveAction()}),t.YNc(1,OZ,1,0,"azt-loading-effect",1),t.YNc(2,zZ,186,132,"ng-template",null,2,t.W1O),t.qZA()),2&e){const a=t.MAs(3);t.Q6J("headerBackToLink",i.backToLink)("showConfirmButton",!0),t.xp6(1),t.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a)}},dependencies:[D.mk,D.sg,D.O5,D.PC,vr.RK,Jo.Hw,Ii.VK,Ii.p6,Od.fQ,Od.eu,Od.gi,Od.uo,L.KC,f._Y,f.YN,f.Kr,f.Fj,f.EJ,f.JJ,f.JL,f.On,f.sg,f.u,si.l,oo.M,oi.n,Op.O,Td.Z,jt.JV,jt.Tu],styles:['.header-mix-bank[_ngcontent-%COMP%]{padding:5px 20px;display:flex;flex-wrap:wrap;justify-content:space-between;align-items:center}.header-mix-bank[_ngcontent-%COMP%]   .bank-his-matrix[_ngcontent-%COMP%]{height:-moz-fit-content;height:fit-content;display:flex;justify-content:center;align-items:center}.header-mix-bank[_ngcontent-%COMP%]   .name-block[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;align-items:center}.header-mix-bank[_ngcontent-%COMP%]   .name-block[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{margin-right:10px}.header-mix-bank[_ngcontent-%COMP%]   .name-block[_ngcontent-%COMP%]   .has-err[_ngcontent-%COMP%]{border:1px solid red!important}.header-mix-bank[_ngcontent-%COMP%]   .name-block[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:500px;padding:5px 10px;border-radius:5px;margin-right:15px}.header-mix-bank[_ngcontent-%COMP%]   .header-fx-item[_ngcontent-%COMP%]{display:flex;align-items:center}.btn-save[_ngcontent-%COMP%]{background-color:#2361ae;line-height:30px;margin-top:5px;text-transform:none}.btn-save[_ngcontent-%COMP%]:hover{background-color:#2e8cff}.btn-save.mat-button-disabled[_ngcontent-%COMP%]{background-color:#0000001f}.btn-cancel[_ngcontent-%COMP%]{background-color:#d0d0d0;line-height:30px;margin-top:5px;text-transform:none}.btn-cancel[_ngcontent-%COMP%]:hover{background-color:#a3a3a3}.btn-cancel.mat-button-disabled[_ngcontent-%COMP%]{background-color:#0000001f}.loading-mess[_ngcontent-%COMP%]{width:100vw;height:100vh;position:fixed;z-index:9;top:0;left:0;display:flex;justify-content:center;align-items:center;background-color:#0006}.loading-content[_ngcontent-%COMP%]{text-align:center;color:#000}.loading-content[_ngcontent-%COMP%]   .text-msg[_ngcontent-%COMP%]{font-size:20px;margin-top:10px;background-color:#f0f8ffa3;padding:10px;border-radius:5px}  .main-mix-blank{width:100%;height:calc(100vh - 115px);display:flex}  .main-mix-blank .col-tree{position:relative;height:100%;overflow:hidden;width:25%;border-right:1px dotted #7f7f7f}  .main-mix-blank .col-tree-main{overflow:hidden;height:calc(100% - 54px)}  .main-mix-blank .col-tree .filler-node{position:sticky;bottom:0;padding:10px;border-top:1px dotted #e0e0e0}  .main-mix-blank .col-tree .filler-node input{width:100%;padding:5px 10px}  .main-mix-blank .col-tree mat-tree-node mat-icon{color:#37474f;width:30px}  .main-mix-blank .col-tree mat-tree-node string{width:100%;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;overflow:hidden;cursor:pointer}  .main-mix-blank .col-tree mat-tree-node .icon--folder{color:#ff9800}  .main-mix-blank .col-tree mat-tree-node .icon--article{color:#2196f3}  .main-mix-blank .col-tree mat-tree-node:hover mat-icon{color:#3f51b5}  .main-mix-blank .col-tree mat-tree-node:hover span{color:#3f51b5}  .main-mix-blank .col-tree .tb-active mat-icon{color:#3f51b5}  .main-mix-blank .col-tree .tb-active span{color:#3f51b5}  .main-mix-blank .col-table{width:75%;margin:20px 0;padding:0 20px;overflow:auto}  .main-mix-blank .table-main{position:relative}  .main-mix-blank .table-main td,   .main-mix-blank .table-main th{box-shadow:1px 1px #000 inset;-webkit-user-select:none;user-select:none}  .main-mix-blank .table-main table{position:relative;border-right:1px solid #000;border-bottom:1px solid #000;width:100%}  .main-mix-blank .table-main table thead{position:sticky;top:0;z-index:2}  .main-mix-blank .table-main table tfoot{position:sticky;bottom:0;box-shadow:0 1px #000 inset}  .main-mix-blank .table-main td{padding:10px}  .main-mix-blank .table-main .note-edit-item-tb:before{position:absolute;z-index:3;width:-moz-fit-content;width:fit-content;display:block;background:#fff59d;padding:5px;border-radius:5px;color:#263238;width:200px;top:0;right:0;transform:translate(-5px,calc(-100% - 5px));box-shadow:#00000005 0 1px 3px,#1b1f2326 0 0 0 1px}  .main-mix-blank .table-main .note-edit-item-tb:focus-visible:before{content:attr(first-trans) ": " attr(num-tn) "; " attr(last-trans) ": " attr(num-tl) "";white-space:pre-wrap}  .main-mix-blank .table-main .warning-item:after,   .main-mix-blank .table-main .common-warning-item:after{content:"\\e000";position:absolute;font-family:Material Icons;color:#ff9800;font-size:12px;top:0;right:3px;opacity:.5}  .main-mix-blank .table-main .warning-item:hover:after,   .main-mix-blank .table-main .common-warning-item:after{cursor:pointer}  .main-mix-blank .table-main .common-warning-item:after{color:red;font-size:15px;top:2px}  .main-mix-blank .table-main .common-note-item:hover:before{content:attr(common-note-trans);position:absolute;background:#fff59d;z-index:3;color:#000;width:200px;top:0;right:0;transform:translate(-5px,calc(-100% - 5px));padding:5px;border-radius:5px;box-shadow:#00000005 0 1px 3px,#1b1f2326 0 0 0 1px;display:block}  .main-mix-blank .table-main .wn-empty:hover:before{content:attr(empty-question-trans);background:#ff9800;z-index:3;color:#fff}  .main-mix-blank .table-main .wn-over-tn:hover:before{content:attr(over-question-trans-tn);background:#ff9800;z-index:3;color:#fff}  .main-mix-blank .table-main .wn-over-tl:hover:before{content:attr(over-question-trans-tl);background:#ff9800;z-index:3;color:#fff}  .main-mix-blank .table-main .edit-item-tb{text-align:center;position:relative}  .main-mix-blank .table-main .edit-item-tb:focus-visible{background-color:#fff;color:#000}  .main-mix-blank .table-main .header-tb{background-color:#c8e6c9;text-align:center;font-weight:600}  .main-mix-blank .table-main .header-tb td:hover{background-color:#c8e6c9}  .main-mix-blank .table-main .dis-item-tb{background-color:#cfd8dc;color:#2a3545}  .main-mix-blank .table-main .dis-item-tb td:hover{background-color:#cfd8dc!important}  .main-mix-blank .table-main .dis-item-tb:hover{background-color:#cfd8dc!important}  .main-mix-blank .table-main .text-center{text-align:center}  .main-mix-blank .table-main .no-background{background:#fff!important}  .main-mix-blank .table-main .no-background:hover{background:#fff!important}  .main-mix-blank .table-main table .select{background:#c7e5ff!important}  .main-mix-blank .table-main .menu-excel{display:none;width:-moz-fit-content;width:fit-content;background:#fff;border:1px solid #3f51b5;position:absolute;box-shadow:#00000059 0 5px 15px}  .main-mix-blank .table-main .menu-excel li{padding:10px;list-style:none;display:flex;justify-content:space-between;align-items:center;cursor:pointer}  .main-mix-blank .table-main .menu-excel li:hover{background:rgba(200,230,201,.231372549)}  .main-mix-blank .table-main .menu-excel li svg{margin-right:10px}  .main-mix-blank .table-main .border-err{border:1px solid #f44336!important;outline:1px solid #f44336!important}  .main-mix-blank .table-main .tb-matrix-editor-trash-node{cursor:pointer;width:20px}  .main-mix-blank .table-main .tb-matrix-editor-trash-node:hover{color:#f44336}  .main-mix-blank .table-main thead td{font-weight:400}.header-mix-bank[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .menu-item[_ngcontent-%COMP%]{text-transform:none}.ins-info[_ngcontent-%COMP%]{padding-top:15px;font-style:italic}@media (max-width: 768px){.bank-name-block[_ngcontent-%COMP%], .input[_ngcontent-%COMP%]{width:100%}.input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%!important;margin-bottom:5px}.main-mix-blank[_ngcontent-%COMP%]{flex-wrap:wrap;height:100%!important}.col-tree[_ngcontent-%COMP%]{width:100%!important;height:50vh!important;padding:10px 10px 0;--tw-border-opacity: 1;border:1px solid;border-color:rgb(var(--color-slate-200)/var(--tw-border-opacity))}.col-tree[_ngcontent-%COMP%]   .filler-node[_ngcontent-%COMP%]{padding:5px!important}.col-table[_ngcontent-%COMP%]{width:calc(100vw - 20px)!important;padding-bottom:30px}}.text-matrix-title[_ngcontent-%COMP%]{cursor:pointer;text-align:justify}.d-none[_ngcontent-%COMP%]{display:none!important}@media (max-width: 640px){.d-block[_ngcontent-%COMP%]{display:block!important}.name-block[_ngcontent-%COMP%]{width:90vw}}']}),n})();function HZ(n,o){1&n&&t._UZ(0,"azt-loading-effect")}function GZ(n,o){if(1&n&&t._UZ(0,"preview-offline-exam",7),2&n){const e=t.oxw(3);t.Q6J("isDialog",!1)("offlineExportObj",e.offlineExportObj)("curOfflineMixQuestionObj",e.offlineExportObj.offlineMixQuestionObjs[0])("backToLink",e.backToLink)}}function $Z(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"h3",4),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"div",5),t.YNc(5,GZ,1,4,"preview-offline-exam",6),t.qZA(),t.BQk()),2&n){const e=t.oxw(2);t.xp6(2),t.hij(" ",t.lcZ(3,2,"lang_auto_dap_an_de_thi_offline")," "),t.xp6(3),t.Q6J("ngIf",e.offlineExportObj&&e.offlineExportObj.offlineMixQuestionObjs&&e.offlineExportObj.offlineMixQuestionObjs[0])}}function YZ(n,o){1&n&&(t.TgZ(0,"div",8)(1,"div",9),t.O4$(),t.TgZ(2,"svg",10),t._UZ(3,"path",11)(4,"path",12)(5,"path",13)(6,"path",14)(7,"path",15)(8,"path",16),t.qZA()(),t.kcU(),t.TgZ(9,"div",17),t._uU(10),t.ALo(11,"mytranslate"),t.qZA()()),2&n&&(t.xp6(10),t.hij(" ",t.lcZ(11,1,"lang_auto_khong_co_du_lieu_dap_an_de_thi")," "))}function KZ(n,o){if(1&n&&(t.TgZ(0,"div",2),t.YNc(1,$Z,6,4,"ng-container",0),t.YNc(2,YZ,12,3,"ng-template",null,3,t.W1O),t.qZA()),2&n){const e=t.MAs(3),i=t.oxw();t.xp6(1),t.Q6J("ngIf",null==i.offlineExportObj||null==i.offlineExportObj.offlineMixQuestionObjs?null:i.offlineExportObj.offlineMixQuestionObjs.length)("ngIfElse",e)}}let WZ=(()=>{class n extends St.Q{getData(){this.initStatusObj();let e=this.getMyParam(this.activeRoute,"hash_id")??"";this.waitDestroy(this.offlineExamExportService.apiOfflineExamExportExportResultOfAllOfflineMixQuestionHashIdGet(e).subscribe(i=>{1==i.success?(this.offlineExportObj=i.data?.obj,this.backToLink=`/admin/testbank/offline-answer-list/${this.offlineExportObj?.examObj?.categoryId??0}/${this.offlineExportObj?.examObj?.hashId}`,this.successStatusObj()):this.errorStatusObj(i.message??"",!0)}))}changeViewHashId(e){this.indexHashId=e}replace3DigitExamCode(e){for(var i=e.toString();i.length<3;)i="0"+i;return i}ngOnInit(){this.getData(),super.ngOnInit()}constructor(e,i){super(),this.activeRoute=e,this.offlineExamExportService=i,this.indexHashId=0}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(O.gz),t.Y36(ya.qr))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-offline-answer-list"]],features:[t.qOj],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["doneLoading",""],[1,"mt-8","mx-auto",2,"max-width","1200px"],["noDataAnswer",""],[1,"font-medium","text-center"],[1,"mt-4"],[3,"isDialog","offlineExportObj","curOfflineMixQuestionObj","backToLink",4,"ngIf"],[3,"isDialog","offlineExportObj","curOfflineMixQuestionObj","backToLink"],[1,"empty-block","mt-10"],[1,"icon-empty","flex"],["width","87","height","102","viewBox","0 0 87 102","fill","none","xmlns","http://www.w3.org/2000/svg",1,"mx-auto"],["fill-rule","evenodd","clip-rule","evenodd","d","M66.6719 13.9999L75.9738 81.8427L76.8095 88.649C77.0787 90.8417 75.5194 92.8374 73.3268 93.1066L14.7665 100.297C12.5739 100.566 10.5781 99.0069 10.3089 96.8142L1.29312 23.3867C1.1585 22.2904 1.93813 21.2925 3.03447 21.1579C3.0414 21.157 3.04832 21.1562 3.05526 21.1554L7.91363 20.6104M11.8422 20.1698L16.4292 19.6552Z","fill","white"],["d","M67.9103 13.8302C67.8165 13.1462 67.186 12.6678 66.5021 12.7615C65.8181 12.8553 65.3397 13.4858 65.4335 14.1697L67.9103 13.8302ZM75.9738 81.8427L77.2144 81.6903C77.2137 81.6845 77.213 81.6787 77.2122 81.6729L75.9738 81.8427ZM76.8095 88.649L78.0502 88.4967L76.8095 88.649ZM73.3268 93.1066L73.4791 94.3473L73.3268 93.1066ZM14.7665 100.297L14.9189 101.538L14.7665 100.297ZM10.3089 96.8142L11.5496 96.6619L10.3089 96.8142ZM3.05526 21.1554L3.1946 22.3976L3.05526 21.1554ZM8.05297 21.8527C8.73902 21.7757 9.23279 21.1572 9.15584 20.4711C9.07888 19.7851 8.46034 19.2913 7.77428 19.3682L8.05297 21.8527ZM11.7028 18.9276C11.0168 19.0045 10.523 19.6231 10.5999 20.3091C10.6769 20.9952 11.2954 21.4889 11.9815 21.412L11.7028 18.9276ZM16.5685 20.8974C17.2546 20.8205 17.7484 20.2019 17.6714 19.5159C17.5945 18.8298 16.9759 18.3361 16.2899 18.413L16.5685 20.8974ZM65.4335 14.1697L74.7354 82.0125L77.2122 81.6729L67.9103 13.8302L65.4335 14.1697ZM74.7331 81.995L75.5688 88.8013L78.0502 88.4967L77.2144 81.6903L74.7331 81.995ZM75.5688 88.8013C75.7539 90.3088 74.6819 91.6809 73.1744 91.866L73.4791 94.3473C76.357 93.994 78.4035 91.3745 78.0502 88.4967L75.5688 88.8013ZM73.1744 91.866L14.6142 99.0563L14.9189 101.538L73.4791 94.3473L73.1744 91.866ZM14.6142 99.0563C13.1067 99.2414 11.7347 98.1694 11.5496 96.6619L9.0682 96.9666C9.42156 99.8445 12.041 101.891 14.9189 101.538L14.6142 99.0563ZM11.5496 96.6619L2.5338 23.2344L0.0524334 23.539L9.0682 96.9666L11.5496 96.6619ZM2.5338 23.2344C2.48332 22.8232 2.77568 22.449 3.18681 22.3986L2.88213 19.9172C1.10059 20.1359 -0.166313 21.7575 0.0524334 23.539L2.5338 23.2344ZM3.18681 22.3986C3.1894 22.3982 3.192 22.3979 3.1946 22.3976L2.91592 19.9132C2.90465 19.9145 2.89339 19.9158 2.88213 19.9172L3.18681 22.3986ZM3.1946 22.3976L8.05297 21.8527L7.77428 19.3682L2.91592 19.9132L3.1946 22.3976ZM11.9815 21.412L16.5685 20.8974L16.2899 18.413L11.7028 18.9276L11.9815 21.412Z","fill","#1F64E7"],["fill-rule","evenodd","clip-rule","evenodd","d","M64.14 18.2692L72.5596 79.7529L73.3169 85.9212C73.5609 87.9083 72.1669 89.7146 70.2033 89.9557L17.7613 96.3948C15.7978 96.6359 14.0082 95.2204 13.7642 93.2333L5.61416 26.8568C5.47955 25.7605 6.25918 24.7626 7.35551 24.628L13.8431 23.8314","fill","#E8F0FE"],["d","M23.6719 1.25H69.2286C69.9577 1.25 70.6569 1.5395 71.1726 2.05485L84.6158 15.4898C85.1319 16.0056 85.4219 16.7053 85.4219 17.4349V80C85.4219 81.5188 84.1907 82.75 82.6719 82.75H23.6719C22.1531 82.75 20.9219 81.5188 20.9219 80V4C20.9219 2.48122 22.1531 1.25 23.6719 1.25Z","fill","white","stroke","#1F64E7","stroke-width","2.5"],["d","M69.6719 2.40283V14C69.6719 15.6569 71.015 17 72.6719 17H80.6055","stroke","#1F64E7","stroke-width","2.5","stroke-linecap","round","stroke-linejoin","round"],["d","M31 17H57M31 29H74M31 42H74M31 55H74M31 68H57","stroke","#75A4FE","stroke-width","2.5","stroke-linecap","round","stroke-linejoin","round"],[1,"text-center","font-medium","mt-4"]],template:function(e,i){if(1&e&&(t.YNc(0,HZ,1,0,"azt-loading-effect",0),t.YNc(1,KZ,4,2,"ng-template",null,1,t.W1O)),2&e){const a=t.MAs(2);t.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a)}},dependencies:[D.O5,si.l,U6,jt.JV],encapsulation:2}),n})();var X6=M(33024),VZ=M(24465);const XZ=function(n){return{"box-select":n}},tD=function(n){return{active:n}};function eD(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",2)(1,"img",3),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.ChooseTemplate(r.id?r.id:0))}),t.ALo(2,"mycdn"),t.qZA()()}if(2&n){const e=o.$implicit,i=t.oxw();t.Q6J("ngClass",t.VKq(5,XZ,i.template_selected_id===e.id)),t.xp6(1),t.s9C("src",t.lcZ(2,3,e.thumb),t.LSH),t.Q6J("ngClass",t.VKq(7,tD,i.template_selected_id===e.id))}}let nD=(()=>{class n extends St.Q{constructor(){super(...arguments),this.templates=[],this.template_selected_id=0,this.change_template=new t.vpe}ChooseTemplate(e){e!==this.template_selected_id&&this.change_template.emit(e)}}return n.\u0275fac=function(){let o;return function(i){return(o||(o=t.n5z(n)))(i||n)}}(),n.\u0275cmp=t.Xpm({type:n,selectors:[["app-choose-question-form"]],inputs:{templates:"templates",template_selected_id:"template_selected_id"},outputs:{change_template:"change_template"},features:[t.qOj],decls:4,vars:4,consts:[[1,"box-title","bg-slate-900","dark:bg-darkmode-400"],["class","box-item",3,"ngClass",4,"ngFor","ngForOf"],[1,"box-item",3,"ngClass"],["azt-track-service","choose-question-form-Irw33xRlJC","alt","",1,"noChooseTemplate",3,"ngClass","src","click"]],template:function(e,i){1&e&&(t.TgZ(0,"p",0),t._uU(1),t.ALo(2,"mytranslate"),t.qZA(),t.YNc(3,eD,3,9,"div",1)),2&e&&(t.xp6(1),t.Oqu(t.lcZ(2,2,"lang_auto_chon_mau_hien_thi_cau_hoi_upper")),t.xp6(2),t.Q6J("ngForOf",i.templates))},dependencies:[D.mk,D.sg,jt.JV,jt.QN],styles:['.box-title[_ngcontent-%COMP%]{text-align:center;font-size:large;padding:10px;border-radius:5px 5px 0 0;background:rgb(var(--color-primary));color:#fff;font-weight:500}.box-item[_ngcontent-%COMP%]{cursor:pointer;margin:10px;position:relative}.box-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:10px}.box-select[_ngcontent-%COMP%]:before{content:"";background:rgb(var(--color-primary));width:15px;height:15px;position:absolute;border-radius:50%;top:5px;left:5px}.active[_ngcontent-%COMP%]{border:2px solid rgb(var(--color-primary));box-shadow:#091e4240 0 4px 8px -2px,#091e4214 0 0 0 1px}']}),n})();var iD=M(87974),oD=M(14041),aD=M(67757),rD=M(72969);const sD=["left_element_box"],lD=["right_element_box"];function cD(n,o){1&n&&(t.O4$(),t.kcU(),t.TgZ(0,"span")(1,"span",24),t._UZ(2,"azt-loading-ui"),t.qZA()())}function uD(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",31),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw(4);return t.KtG(s.redirectShowDetail(r))}),t._uU(2),t.ALo(3,"mytranslate"),t.ALo(4,"formatFullDateTimeWithoutSecondByUserUnitPipe"),t.qZA()()}if(2&n){const e=o.$implicit;t.xp6(2),t.AsE(" ",t.lcZ(3,2,"lang_testbank_powerpoint_date")," ",t.lcZ(4,4,e.createdAt)," ")}}function dD(n,o){if(1&n&&(t.O4$(),t.kcU(),t.TgZ(0,"div",25)(1,"span"),t._uU(2),t.ALo(3,"mytranslate"),t.ALo(4,"mytranslate"),t.qZA(),t.TgZ(5,"a",26),t._uU(6),t.ALo(7,"mytranslate"),t.qZA(),t.TgZ(8,"mat-menu",null,27)(10,"div",28)(11,"ul",29),t.YNc(12,uD,5,6,"li",30),t.qZA()()()()),2&n){const e=t.MAs(9),i=t.oxw(3);t.xp6(2),t.lnq("",t.lcZ(3,6,"lang_testbank_powerpoint_used")," ",(null==i.examObj?null:i.examObj.powerpointLinks)&&(null==i.examObj||null==i.examObj.powerpointLinks?null:i.examObj.powerpointLinks.length)," ",t.lcZ(4,8,"lang_testbank_powerpoint_times"),""),t.xp6(3),t.Q6J("matMenuTriggerFor",e),t.xp6(1),t.Oqu(t.lcZ(7,10,"lang_testbank_powerpoint_see_detail")),t.xp6(6),t.Q6J("ngForOf",null==i.examObj?null:i.examObj.powerpointLinks)}}function mD(n,o){1&n&&(t.O4$(),t.kcU(),t.TgZ(0,"span")(1,"span",24),t._UZ(2,"azt-loading-ui"),t.qZA()())}function hD(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",43),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw(5);return t.KtG(s.redirectShowDetail(r))}),t._uU(2),t.ALo(3,"mytranslate"),t.ALo(4,"formatFullDateTimeWithoutSecondByUserUnitPipe"),t.qZA()()}if(2&n){const e=o.$implicit;t.xp6(2),t.AsE(" ",t.lcZ(3,2,"lang_testbank_powerpoint_date")," ",t.lcZ(4,4,e.createdAt)," ")}}function pD(n,o){if(1&n&&(t.O4$(),t.kcU(),t.TgZ(0,"div",41)(1,"span"),t._uU(2),t.ALo(3,"mytranslate"),t.ALo(4,"mytranslate"),t.qZA(),t.TgZ(5,"a",26),t._uU(6),t.ALo(7,"mytranslate"),t.qZA(),t.TgZ(8,"mat-menu",null,42)(10,"div",28)(11,"ul",29),t.YNc(12,hD,5,6,"li",30),t.qZA()()()()),2&n){const e=t.MAs(9),i=t.oxw().$implicit;t.xp6(2),t.lnq("",t.lcZ(3,6,"lang_testbank_powerpoint_used")," ",i.powerpointLinks.length," ",t.lcZ(4,8,"lang_testbank_powerpoint_times"),""),t.xp6(3),t.Q6J("matMenuTriggerFor",e),t.xp6(1),t.Oqu(t.lcZ(7,10,"lang_testbank_powerpoint_see_detail")),t.xp6(6),t.Q6J("ngForOf",i.powerpointLinks)}}function _D(n,o){if(1&n&&t._UZ(0,"azt-template-one",44),2&n){const e=t.oxw(),a=e.index;t.Q6J("questionObj",e.$implicit)("indexQuestion",a)("isAnswer",!0)}}function fD(n,o){if(1&n&&t._UZ(0,"azt-template-two",44),2&n){const e=t.oxw(),a=e.index;t.Q6J("questionObj",e.$implicit)("indexQuestion",a)("isAnswer",!0)}}function gD(n,o){if(1&n&&t._UZ(0,"azt-template-three",44),2&n){const e=t.oxw(),a=e.index;t.Q6J("questionObj",e.$implicit)("indexQuestion",a)("isAnswer",!0)}}function xD(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",32)(1,"div",33)(2,"div",34)(3,"div",35),t._uU(4),t.ALo(5,"mytranslate"),t.qZA(),t.TgZ(6,"button",36),t.NdJ("click",function(){const r=t.CHM(e).index,s=t.oxw(3);return t.KtG(s.generateLinkAction(r))}),t.O4$(),t.TgZ(7,"svg",15),t._UZ(8,"rect",16)(9,"path",17),t.qZA(),t._uU(10),t.ALo(11,"mytranslate"),t.YNc(12,mD,3,0,"span",18),t.qZA()(),t.YNc(13,pD,13,12,"div",37),t.qZA(),t.kcU(),t.TgZ(14,"div",38)(15,"container-element",39),t.YNc(16,_D,1,3,"azt-template-one",40),t.YNc(17,fD,1,3,"azt-template-two",40),t.YNc(18,gD,1,3,"azt-template-three",40),t.qZA()()()}if(2&n){const e=o.$implicit,i=o.index,a=t.oxw(3);t.xp6(4),t.AsE("",t.lcZ(5,9,"lang_testbank_powerpoint_question")," ",i+1,""),t.xp6(6),t.hij(" ",t.lcZ(11,11,"lang_testbank_powerpoint_copy_link_question")," "),t.xp6(2),t.Q6J("ngIf",e.isLoading&&!0===e.isLoading),t.xp6(1),t.Q6J("ngIf",0!=(null==e.powerpointLinks?null:e.powerpointLinks.length)),t.xp6(2),t.Q6J("ngSwitch",null==a.templateObj?null:a.templateObj.id),t.xp6(1),t.Q6J("ngSwitchCase",1),t.xp6(1),t.Q6J("ngSwitchCase",2),t.xp6(1),t.Q6J("ngSwitchCase",3)}}function bD(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",9,10)(2,"div",11)(3,"div",12)(4,"div",13),t._uU(5),t.qZA(),t.TgZ(6,"button",14),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.generateLinkAction())}),t.O4$(),t.TgZ(7,"svg",15),t._UZ(8,"rect",16)(9,"path",17),t.qZA(),t._uU(10),t.ALo(11,"mytranslate"),t.YNc(12,cD,3,0,"span",18),t.qZA()(),t.YNc(13,dD,13,12,"div",19),t.qZA(),t.kcU(),t.TgZ(14,"div")(15,"button",20),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.redirectToYTB())}),t._UZ(16,"img",21),t.ALo(17,"convertCdnLinkOfGitHub"),t._uU(18),t.ALo(19,"mytranslate"),t.qZA()(),t.TgZ(20,"div",22),t.YNc(21,xD,19,13,"div",23),t.qZA()()}if(2&n){const e=t.oxw(2);t.xp6(5),t.Oqu(null==e.examObj?null:e.examObj.name),t.xp6(5),t.hij(" ",t.lcZ(11,7,"lang_testbank_powerpoint_copy_link_exam")," "),t.xp6(2),t.Q6J("ngIf",(null==e.examObj?null:e.examObj.isLoading)&&!0===(null==e.examObj?null:e.examObj.isLoading)),t.xp6(1),t.Q6J("ngIf",(null==e.examObj?null:e.examObj.powerpointLinks)&&0!=(null==e.examObj||null==e.examObj.powerpointLinks?null:e.examObj.powerpointLinks.length)),t.xp6(3),t.Q6J("src",t.lcZ(17,9,"images/iconYoutube.svg"),t.LSH),t.xp6(2),t.hij(" ",t.lcZ(19,11,"lang_testbank_powerpoint_see_tutorial")," "),t.xp6(3),t.Q6J("ngForOf",e.questionObjs)}}function vD(n,o){if(1&n&&(t.TgZ(0,"div",45)(1,"div",11)(2,"div",12)(3,"div",13),t._uU(4),t.qZA()(),t.TgZ(5,"div",46)(6,"div",47),t._UZ(7,"img",48),t.ALo(8,"convertCdnLinkOfGitHub"),t._uU(9),t.ALo(10,"mytranslate"),t.qZA()()(),t.TgZ(11,"div",22)(12,"div",49),t._uU(13),t.ALo(14,"mytranslate"),t.qZA()()()),2&n){const e=t.oxw(2);t.xp6(4),t.Oqu(null==e.examObj?null:e.examObj.name),t.xp6(3),t.Q6J("src",t.lcZ(8,4,"images/iconYoutube.svg"),t.LSH),t.xp6(2),t.hij(" ",t.lcZ(10,6,"lang_testbank_powerpoint_see_tutorial")," "),t.xp6(4),t.Oqu(t.lcZ(14,8,"lang_testbank_powerpoint_note_toturial"))}}function yD(n,o){1&n&&(t.TgZ(0,"div",45)(1,"div",22)(2,"div",50)(3,"span",51),t._UZ(4,"azt-loading-ui"),t.qZA(),t.TgZ(5,"span",52),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()()()()),2&n&&(t.xp6(6),t.hij(" ",t.lcZ(7,1,"lang_testbank_powerpoint_data_sample"),""))}function wD(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",3)(1,"div",4,5)(3,"app-choose-question-form",6),t.NdJ("change_template",function(a){t.CHM(e);const r=t.oxw();return t.KtG(r.changeTemplate(a))}),t.qZA()(),t.YNc(4,bD,22,13,"div",7),t.YNc(5,vD,15,10,"div",8),t.YNc(6,yD,8,3,"div",8),t.qZA()}if(2&n){const e=t.oxw();t.xp6(3),t.Q6J("templates",e.templatesObjs),t.xp6(1),t.Q6J("ngIf",e.isSupport&&e.isLoading),t.xp6(1),t.Q6J("ngIf",!e.isSupport&&e.isLoading),t.xp6(1),t.Q6J("ngIf",!e.isLoading)}}function CD(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",53),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.isShowVideo=!1)}),t.TgZ(1,"div",54)(2,"div",55)(3,"div",56),t._uU(4),t.ALo(5,"mytranslate"),t.qZA(),t.TgZ(6,"div",57)(7,"mat-icon",58),t._uU(8,"close"),t.qZA()()(),t.TgZ(9,"div",59),t._UZ(10,"azt-video-embed",60),t.qZA()()()}2&n&&(t.xp6(4),t.Oqu(t.lcZ(5,4,"lang_testbank_powerpoint_video_tutorial")),t.xp6(6),t.Akn("width:560px;height:315px;"),t.Q6J("cdnLink","https://www.youtube.com/embed/FpcOtHNGMCQ"))}let TD=(()=>{class n extends St.Q{generateLinkAction(e){this.examObj&&(void 0!==e?this.questionObjs?.forEach(i=>{this.questionObjs?.[e].id===i.id&&(i.isLoading=!0)}):this.examObj={...this.examObj,isLoading:!0},this.powerPointLinkService.apiPowerPointLinkGenerateLinkObjPost({examId:void 0!==e?0:this.exam_id,questionId:void 0!==e?this.questionObjs?.[e].id:0,templateId:this.templateObj?.id??0}).subscribe(i=>{if(1==i.success){this.showSuccessSnack("lang_auto_copy_link_thanh_cong");const a=document.createElement("textarea");if(a.value=`${Ce.N.base_embed_link}/embed_ppt/?link_id=${i.data?.obj?.id}&hash_class=${i.data?.obj?.hashCode}`,a.value=a.value.replace(/(^\w+:|^)\/\//,""),a.setAttribute("readonly",""),a.style.position="absolute",a.style.left="-9999px",document.body.appendChild(a),a.select(),document.execCommand("copy"),document.body.removeChild(a),!this.examObj)return;void 0!==e?(this.mergeLinks(this.questionObjs?.[e].powerpointLinks,i.data?.obj),this.questionObjs?.forEach(r=>{this.questionObjs?.[e].id===r.id&&(r.isLoading=!1)})):(this.mergeLinks(this.examObj?.powerpointLinks,i.data?.obj),this.examObj={...this.examObj,isLoading:!1})}else this.commonService.snackError("lang_auto_copy_link_that_bai_he_thong_khong_the_tao_link_cho_noi_dung_nay")}))}mergeLinks(e,i){for(let a=0;a<(e?.length??0);a++)if(e?.[a].id===i?.id)return;i&&e?.push(i)}redirectShowDetail(e){this.commonService.myNavigation(`/powerpoint/embed/${e.id}/${e.hashCode}`)}changeTemplate(e){this.getDataPowerPoint(e)}redirectToYTB(){window.open("https://www.youtube.com/watch?v=FpcOtHNGMCQ")}getDataPowerPoint(e){this.powerPointLinkService.apiPowerPointLinkGetObjGet(this.exam_id,e).subscribe(i=>{if(1==i.success){if(null!=i.data){this.templatesObjs=i.data?.templatesObjs,this.templateObj=i.data?.templateObj,this.examObj=i.data?.examObj;let a=this.commonService.castJsonToClassObjs(X6.x,JSON.stringify(i.data?.questionObjs));this.questionObjs=this.homeworkExamService.changeDataQuestions(a??[])??[]}else this.isViewQuestion=!0;this.isSupport=this.homeworkExamService.isOnlyTrueFalseQuestionInList(this.questionObjs),i.data?.examObj&&this.powerpointExamService.convert(this.questionObjs,i.data?.examObj),this.isLoading=!0}else this.isViewQuestion=!0,this.showErrorSnack(i.message??""),this.isLoading=!0})}addEventElement(){document.addEventListener("scroll",()=>{this.left_element_box&&this.right_element_box&&(window.innerWidth>=1e3?(this.left_element_box.nativeElement.getBoundingClientRect().top<=-10&&(this.left_element_box.nativeElement.classList.remove("content__downtoup"),this.left_element_box.nativeElement.classList.add("content__fixed"),this.right_element_box.nativeElement.classList.add("content__rfixed")),this.right_element_box.nativeElement.getBoundingClientRect().top>=0&&(this.left_element_box.nativeElement.classList.remove("content__fixed"),this.left_element_box.nativeElement.classList.add("content__downtoup"),this.right_element_box.nativeElement.classList.remove("content__rfixed"))):(this.left_element_box.nativeElement.classList.remove("content__fixed"),this.left_element_box.nativeElement.classList.remove("content__downtoup"),this.right_element_box.nativeElement.classList.remove("content__rfixed")))})}ngOnInit(){this.commonService.translateMetaData({title:"lang_cms_question_powerpoint_title",description:"lang_cms_question_powerpoint_description",image:"lang_cms_test_image"}),this.waitDestroy((0,dt.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.exam_id=Number(this.commonService.getMyParam(this.activeRoute,"exam_id")),this.cat_id=Number(this.commonService.getMyParam(this.activeRoute,"cat_id")),this.backToLink=this.commonService.getMyQueryParam("backto")??"/admin/testbank/document-management/0/"+(this.cat_id??0)+"/1"})),this.getDataPowerPoint(),this.addEventElement(),super.ngOnInit()}constructor(e,i,a,r){super(),this.activeRoute=e,this.powerPointLinkService=i,this.homeworkExamService=a,this.powerpointExamService=r,this.backToLink="",this.exam_id=0,this.cat_id=0,this.questionObjs=[],this.isLoading=!1,this.isSupport=!1,this.isViewQuestion=!1,this.widthView=0,this.isShowVideo=!1}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(O.gz),t.Y36(Ke.WZ),t.Y36(wp.v),t.Y36(VZ.q))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-create-powerpoint-link"]],viewQuery:function(e,i){if(1&e&&(t.Gf(sD,5),t.Gf(lD,5)),2&e){let a;t.iGM(a=t.CRH())&&(i.left_element_box=a.first),t.iGM(a=t.CRH())&&(i.right_element_box=a.first)}},features:[t.qOj],decls:3,vars:3,consts:[[3,"headerBackToLink"],["class","azt-ppt-content",4,"ngIf"],["azt-track-service","powerpoint-bN85gjV08DU","class","popup__video",3,"click",4,"ngIf"],[1,"azt-ppt-content"],[1,"left","box"],["left_element_box",""],[3,"templates","change_template"],["class","right box",4,"ngIf"],["class","right",4,"ngIf"],[1,"right","box"],["right_element_box",""],[1,"right__header"],[1,"right__header_lview"],[1,"right__header__exam_title"],["azt-track-service","powerpoint-N-aYwfOOF_",1,"btn","btn-outline-primary","btn-sm",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide","mr-2"],["x","9","y","9","width","13","height","13","rx","2","ry","2"],["d","M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"],[4,"ngIf"],["class","right__header_cview ml-2",4,"ngIf"],["azt-track-service","powerpoint-Zd6K5twMof",1,"btn-text-primary","ml-2",3,"click"],["alt","",1,"mr-2",3,"src"],[1,"right__content"],["class","right__content__question_item",4,"ngFor","ngForOf"],[1,"w-4","h-4","inline-block"],[1,"right__header_cview","ml-2"],[1,"btn","btn-outline-secondary","btn-sm",3,"matMenuTriggerFor"],["detailLinksExam","matMenu"],[1,"dropdown-menu","show","relative","w-56"],[1,"dropdown-content"],[4,"ngFor","ngForOf"],["azt-track-service","powerpoint-32OdBjI0q1",1,"dropdown-item",3,"click"],[1,"right__content__question_item"],[1,"right__content__question_item__header"],[1,"right__content__question_item__header_lview"],[1,"right__content__question_item__title"],["azt-track-service","powerpoint-UsKaxl1tor",1,"btn","btn-outline-primary","btn-sm",3,"click"],["class","right__content__question_item__header_rview",4,"ngIf"],[1,"right__content__question_item__content"],[3,"ngSwitch"],[3,"questionObj","indexQuestion","isAnswer",4,"ngSwitchCase"],[1,"right__content__question_item__header_rview"],["detailLinks","matMenu"],["azt-track-service","powerpoint-MYsWxijcXF",1,"dropdown-item",3,"click"],[3,"questionObj","indexQuestion","isAnswer"],[1,"right"],[1,"right__header_rview"],[1,"right__header__video"],["alt","",3,"src"],[1,"right__content_noti"],[1,"text-center","m-5"],[1,"w-4","h-4","inline-block","mr-2"],[1,"right__content_loading"],["azt-track-service","powerpoint-bN85gjV08DU",1,"popup__video",3,"click"],[1,"popup__video_box"],[1,"popup__video__header"],[1,"popup__video__header--title"],[1,"popup__video__header--close"],[1,"d-flex"],[1,"popup__video__video"],[3,"cdnLink"]],template:function(e,i){1&e&&(t.TgZ(0,"editor-layout",0),t.YNc(1,wD,7,4,"div",1),t.YNc(2,CD,11,6,"div",2),t.qZA()),2&e&&(t.Q6J("headerBackToLink",i.backToLink),t.xp6(1),t.Q6J("ngIf",0==i.isViewQuestion),t.xp6(1),t.Q6J("ngIf",i.isShowVideo))},dependencies:[D.sg,D.O5,D.RF,D.n9,Jo.Hw,Ii.VK,Ii.p6,nD,iD.f,oD.j,aD.e,oi.n,rD.f,Td.Z,jt.JV,jt.Bo,jt.$n],styles:[".azt-ppt-content[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:space-between;padding-top:10px;padding-bottom:40px}.azt-ppt-content__fixed[_ngcontent-%COMP%]{position:fixed;top:0;animation:_ngcontent-%COMP%_dropdownboxelement .5s}.azt-ppt-content__downtoup[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_downtoupboxelement .5s}.azt-ppt-content__rfixed[_ngcontent-%COMP%]{margin-left:380px!important}.azt-ppt-content[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{width:350px;height:100%;margin:10px}.azt-ppt-content[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{margin:10px;width:calc(100% - 340px);border-width:1px;border-style:solid;border-radius:5px;padding:10px}.azt-ppt-content[_ngcontent-%COMP%]   .right__content[_ngcontent-%COMP%]{padding-bottom:80px}.azt-ppt-content[_ngcontent-%COMP%]   .right__header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:20px}.azt-ppt-content[_ngcontent-%COMP%]   .right__header_lview[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.azt-ppt-content[_ngcontent-%COMP%]   .right__header_cview[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-right:10px}.azt-ppt-content[_ngcontent-%COMP%]   .right__header_cview[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:10px}.azt-ppt-content[_ngcontent-%COMP%]   .right__header__exam_title[_ngcontent-%COMP%]{max-width:350px;font-weight:700;margin:0 10px}.azt-ppt-content[_ngcontent-%COMP%]   .right__header__video[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer}.azt-ppt-content[_ngcontent-%COMP%]   .right__header__video[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-right:10px}.azt-ppt-content[_ngcontent-%COMP%]   .right__content__question_item__header[_ngcontent-%COMP%]{margin:20px 10px;display:flex;justify-content:space-between;align-items:center}.azt-ppt-content[_ngcontent-%COMP%]   .right__content__question_item__header_lview[_ngcontent-%COMP%], .azt-ppt-content[_ngcontent-%COMP%]   .right__content__question_item__header_rview[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.azt-ppt-content[_ngcontent-%COMP%]   .right__content__question_item__header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:10px}.azt-ppt-content[_ngcontent-%COMP%]   .right__content__question_item__title[_ngcontent-%COMP%]{font-weight:700;margin-right:10px;font-size:20px}.azt-ppt-content[_ngcontent-%COMP%]   .right__content_noti[_ngcontent-%COMP%]{text-align:center;font-size:20px;margin:50px}.azt-ppt-content[_ngcontent-%COMP%]   .right__content_loading[_ngcontent-%COMP%]{font-size:20px}.azt-ppt-content__btn[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;text-transform:uppercase;padding:6px 15px;border-radius:5px;cursor:pointer}.popup__video[_ngcontent-%COMP%]{position:fixed;z-index:999;width:100vw;height:100vh;top:0;left:0;display:flex;justify-content:center;align-items:center}.popup__video__header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:15px;border-radius:10px 10px 0 0}.popup__video__header--title[_ngcontent-%COMP%]{font-size:18px}.popup__video__header--close[_ngcontent-%COMP%]{cursor:pointer}.popup__video[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{border-radius:0 0 10px 10px}@keyframes _ngcontent-%COMP%_dropdownboxelement{0%{top:-10px}50%{top:40px}60%{top:10px}to{top:0}}@keyframes _ngcontent-%COMP%_downtoupboxelement{0%{padding-top:40px}to{padding-top:auto}}@media screen and (max-width: 925px){.content[_ngcontent-%COMP%]{display:block;width:100%;height:auto}.left[_ngcontent-%COMP%], .right[_ngcontent-%COMP%]{width:auto!important}.right__header[_ngcontent-%COMP%]{row-gap:10px}.right__header__exam_title[_ngcontent-%COMP%]{max-width:100%!important}.popup__video[_ngcontent-%COMP%]{align-items:flex-start}.popup__video_box[_ngcontent-%COMP%]{width:95%}.popup__video__header[_ngcontent-%COMP%]{margin-top:50px}.popup__video[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{width:100%}}@media screen and (max-width: 1199px) and (min-width: 926px){.view-screen-destop[_ngcontent-%COMP%]{display:none!important}.view-screen-phone[_ngcontent-%COMP%]{display:block!important}}@media screen and (max-width: 890px) and (min-width: 551px){.view-screen-destop[_ngcontent-%COMP%]{display:none!important}.view-screen-phone[_ngcontent-%COMP%]{display:block!important}}@media screen and (max-width: 550px){.right__content__question_item__header[_ngcontent-%COMP%]{display:grid!important;row-gap:10px}.right__header[_ngcontent-%COMP%]{display:grid!important;row-gap:10px;align-items:center!important;justify-content:space-between!important;align-content:center!important}.right__header__exam_title[_ngcontent-%COMP%]{max-width:50%!important}}"]}),n})();class Dc{static objectLength(o){return Object.keys(o).length}static removeKeyInObject(o,e){for(var i in o)e.hasOwnProperty(i)&&delete o[i];return o}}var ED=M(41385),MD=M(1566);function ID(n,o){1&n&&t._UZ(0,"azt-loading-effect")}function LD(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_vui_long_nhap_so_luong_de_dao")," "))}function PD(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_so_luong_de_phai_lon_hon_0")," "))}function ND(n,o){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.AsE(" ",t.lcZ(2,2,"lang_auto_so_luong_de_phai_nho_hon"),"\xa0",e.limitMaxMixQuestionHashId," ")}}function ZD(n,o){if(1&n&&(t.TgZ(0,"div",37),t.YNc(1,LD,3,3,"span",24),t.YNc(2,PD,3,3,"span",24),t.YNc(3,ND,3,4,"span",24),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==e.form.controls.numberExam||null==e.form.controls.numberExam.errors?null:e.form.controls.numberExam.errors.required),t.xp6(1),t.Q6J("ngIf",null==e.form.controls.numberExam||null==e.form.controls.numberExam.errors?null:e.form.controls.numberExam.errors.min),t.xp6(1),t.Q6J("ngIf",null==e.form.controls.numberExam||null==e.form.controls.numberExam.errors?null:e.form.controls.numberExam.errors.max)}}function DD(n,o){1&n&&(t.TgZ(0,"div",37)(1,"small",38),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"lang_testbank_offline_test_cannot_be_reversed"),". "))}function jD(n,o){1&n&&(t.TgZ(0,"div",37)(1,"span"),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"lang_auto_de_thi_qua_120_cau_vui_long_tao_de_con_duoi_120_cau_de_in_de"),". "))}function qD(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"a",40),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.redirectToUpdateExam())}),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()}2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_testbank_link_to_update_exam")))}function FD(n,o){if(1&n&&(t.TgZ(0,"div",37)(1,"span"),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.YNc(4,qD,3,3,"a",39),t.qZA()),2&n){const e=t.oxw(2);t.xp6(2),t.hij(" ",t.lcZ(3,2,"lang_testbank_offline_test_not_print_exam_have_answer")+" "+e.dataConfigDocument.allowMaxAnswerChoices,". "),t.xp6(2),t.Q6J("ngIf",!(null!=e.examObj&&e.examObj.isRandomQuestion))}}function QD(n,o){if(1&n&&(t.TgZ(0,"p",44,45),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()),2&n){const e=t.MAs(1),i=t.oxw(3);t.s9C("matTooltip",i.pagePrintExamCodeWithString),t.Q6J("isDisabledTooltip",!1)("matTooltipDisabled",e.isDisabled),t.xp6(2),t.AsE(" ",t.lcZ(3,5,"lang_testbank_print_exam_custom_offline_mix_question_hash_id_will_create"),"\xa0",i.pagePrintExamCodeWithString," ")}}function RD(n,o){if(1&n&&(t.TgZ(0,"span")(1,"span",46),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"span",46),t._uU(5),t.ALo(6,"mytranslate"),t.ALo(7,"mytranslate"),t.qZA()()),2&n){const e=t.oxw(4);t.xp6(2),t.hij(" ",t.lcZ(3,5,"lang_testbank_print_exam_custom_input_offline_mix_question_hash_id_count_invalid")," "),t.xp6(3),t.HOy(" ",t.lcZ(6,7,"lang_testbank_print_exam_custom_input_offline_mix_question_hash_id_count_invalid_real"),"\xa0",null==e.form.controls.inputOfflineMixQuestionHashId||null==e.form.controls.inputOfflineMixQuestionHashId.errors?null:e.form.controls.inputOfflineMixQuestionHashId.errors.countReal," \xa0|\xa0 ",t.lcZ(7,9,"lang_testbank_print_exam_custom_input_offline_mix_question_hash_id_count_invalid_you"),"\xa0",null==e.form.controls.inputOfflineMixQuestionHashId||null==e.form.controls.inputOfflineMixQuestionHashId.errors?null:e.form.controls.inputOfflineMixQuestionHashId.errors.countOfCode," ")}}function UD(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_print_exam_custom_input_offline_mix_question_hash_id_format_invalid")," "))}function BD(n,o){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n){const e=t.oxw(4);t.xp6(1),t.AsE(" ",t.lcZ(2,2,"lang_testbank_print_exam_custom_offline_mix_question_hash_id_duplicated_invalid"),"\xa0",null==e.form.controls.inputOfflineMixQuestionHashId||null==e.form.controls.inputOfflineMixQuestionHashId.errors||null==e.form.controls.inputOfflineMixQuestionHashId.errors.duplicatedCustomHashIds?null:e.form.controls.inputOfflineMixQuestionHashId.errors.duplicatedCustomHashIds.join(", ")," ")}}function zD(n,o){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n){const e=t.oxw(4);t.xp6(1),t.AsE(" ",t.lcZ(2,2,"lang_testbank_print_exam_custom_input_offline_mix_question_hash_id_min_invalid"),"\xa0",null==e.form.controls.inputOfflineMixQuestionHashId||null==e.form.controls.inputOfflineMixQuestionHashId.errors?null:e.form.controls.inputOfflineMixQuestionHashId.errors.minOfStart," ")}}function JD(n,o){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n){const e=t.oxw(4);t.xp6(1),t.AsE(" ",t.lcZ(2,2,"lang_testbank_print_exam_custom_input_offline_mix_question_hash_id_max_invalid"),"\xa0",null==e.form.controls.inputOfflineMixQuestionHashId||null==e.form.controls.inputOfflineMixQuestionHashId.errors?null:e.form.controls.inputOfflineMixQuestionHashId.errors.maxOfStart," ")}}function HD(n,o){if(1&n&&(t.TgZ(0,"div",37),t.YNc(1,RD,8,11,"span",24),t.YNc(2,UD,3,3,"span",24),t.YNc(3,BD,3,4,"span",24),t.YNc(4,zD,3,4,"span",24),t.YNc(5,JD,3,4,"span",24),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",null==e.form.controls.inputOfflineMixQuestionHashId||null==e.form.controls.inputOfflineMixQuestionHashId.errors?null:e.form.controls.inputOfflineMixQuestionHashId.errors.countOfflineMixQuestionHashIdInvalid),t.xp6(1),t.Q6J("ngIf",null==e.form.controls.inputOfflineMixQuestionHashId||null==e.form.controls.inputOfflineMixQuestionHashId.errors?null:e.form.controls.inputOfflineMixQuestionHashId.errors.formatOfflineMixQuestionHashIdInvalid),t.xp6(1),t.Q6J("ngIf",null==e.form.controls.inputOfflineMixQuestionHashId||null==e.form.controls.inputOfflineMixQuestionHashId.errors?null:e.form.controls.inputOfflineMixQuestionHashId.errors.duplicatedCustomOfflineMixQuestionHashIdInvalid),t.xp6(1),t.Q6J("ngIf",null==e.form.controls.inputOfflineMixQuestionHashId||null==e.form.controls.inputOfflineMixQuestionHashId.errors?null:e.form.controls.inputOfflineMixQuestionHashId.errors.minOfflineMixQuestionHashIdInvalid),t.xp6(1),t.Q6J("ngIf",null==e.form.controls.inputOfflineMixQuestionHashId||null==e.form.controls.inputOfflineMixQuestionHashId.errors?null:e.form.controls.inputOfflineMixQuestionHashId.errors.maxOfflineMixQuestionHashIdInvalid)}}function GD(n,o){if(1&n&&(t.ynx(0),t._UZ(1,"input",41),t.ALo(2,"mytranslate"),t.TgZ(3,"div",42),t.YNc(4,QD,4,7,"p",43),t.qZA(),t.YNc(5,HD,6,5,"div",14),t.BQk()),2&n){const e=t.oxw(2);t.xp6(1),t.s9C("placeholder",t.lcZ(2,3,"lang_testbank_print_exam_custom_input_offline_mix_question_hash_id_placeholder")),t.xp6(3),t.Q6J("ngIf",!(null!=e.form.controls.numberExam&&e.form.controls.numberExam.errors||null!=e.form.controls.inputOfflineMixQuestionHashId&&e.form.controls.inputOfflineMixQuestionHashId.errors||""==e.pagePrintExamCodeWithString)),t.xp6(1),t.Q6J("ngIf",!(null!=e.form.controls.numberExam&&e.form.controls.numberExam.errors)&&(null==e.form.controls.inputOfflineMixQuestionHashId?null:e.form.controls.inputOfflineMixQuestionHashId.errors))}}function $D(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",9)(1,"div",10)(2,"div",29)(3,"div",47)(4,"div",48)(5,"label",49),t._uU(6),t.ALo(7,"mytranslate"),t.qZA(),t.TgZ(8,"div",50),t._uU(9),t.ALo(10,"mytranslate"),t.qZA()(),t.TgZ(11,"div",51)(12,"div",31)(13,"input",52),t.NdJ("change",function(a){t.CHM(e);const r=t.oxw(2);return t.KtG(r.changeRandomQuestionConfig(a))}),t.qZA()()()()()()()}2&n&&(t.xp6(6),t.hij(" ",t.lcZ(7,2,"lang_auto_lay_ngau_nhien_theo_ma_tran_de")," "),t.xp6(3),t.hij(" ",t.lcZ(10,4,"lang_auto_de_thi_duoc_tao_tu_ma_tran_de_khi_bat_tinh_nang_nay_dot")," "))}function YD(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",9)(1,"div",10)(2,"div",29)(3,"div",16)(4,"div",48)(5,"label",53),t._uU(6),t.ALo(7,"mytranslate"),t.qZA(),t.TgZ(8,"div",54),t._uU(9),t.ALo(10,"mytranslate"),t.qZA()(),t.TgZ(11,"div",51)(12,"div",31)(13,"input",55),t.NdJ("change",function(a){t.CHM(e);const r=t.oxw(2);return t.KtG(r.changeCreateSubTestConfig(a))}),t.qZA()()()()()()()}2&n&&(t.xp6(6),t.hij(" ",t.lcZ(7,2,"lang_auto_tao_de_con")," "),t.xp6(3),t.hij(" ",t.lcZ(10,4,"lang_auto_tao_de_con_tu_mot_luong_cau_hoi_ngau_nhien_trong_de_goc_dot")," "))}function KD(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",56)(1,"test-config-online-mix-question",57),t.NdJ("isGroupMixQuestionChange",function(a){t.CHM(e);const r=t.oxw(2);return t.KtG(r.isGroupMixQuestion=a)})("checkValidateCountQuestionChange",function(a){t.CHM(e);const r=t.oxw(2);return t.KtG(r.checkValidateCountQuestion=a)})("hasChangeValueLimitQuestion",function(a){t.CHM(e);const r=t.oxw(2);return t.KtG(r.changeLimitQuestionNonGroup(a))})("totalTakeQuestionChange",function(a){t.CHM(e);const r=t.oxw(2);return t.KtG(r.changeLimitQuestionInGroup(a))}),t.qZA()()}if(2&n){const e=t.oxw(2);let i;t.Q6J("hidden",(null==e.form.controls.isRandomQuestion?null:e.form.controls.isRandomQuestion.value)||!(1==(null==e.form.controls.isCreateSubTest?null:e.form.controls.isCreateSubTest.value)&&1==(null!==(i=null==e.form.controls.mixQuestion?null:e.form.controls.mixQuestion.value)&&void 0!==i?i:0))),t.xp6(1),t.Q6J("fromPrintOffline",!0)("form",e.form)("obj",e.obj)("minLimitMixQuestion",e.minLimitMixQuestion)("examGroupInfos",e.examGroupInfos)}}function WD(n,o){1&n&&(t.TgZ(0,"span",64),t._UZ(1,"azt-loading-ui"),t.qZA())}function VD(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"input",65),t.NdJ("change",function(a){t.CHM(e);const r=t.oxw(3);return t.KtG(r.changeConfigSubjectMark(a))}),t.qZA()}}function XD(n,o){if(1&n&&(t.TgZ(0,"div",9)(1,"div",10)(2,"div",29)(3,"div",47)(4,"div",58)(5,"label",59),t._uU(6),t.ALo(7,"mytranslate"),t.qZA(),t.TgZ(8,"div",50)(9,"div"),t._uU(10),t.ALo(11,"mytranslate"),t.qZA(),t.TgZ(12,"div",60),t._uU(13),t.ALo(14,"mytranslate"),t.qZA(),t.TgZ(15,"div",60),t._uU(16),t.ALo(17,"mytranslate"),t.qZA()()(),t.TgZ(18,"div",61)(19,"div",31),t.YNc(20,WD,2,0,"span",62),t.YNc(21,VD,1,0,"input",63),t.qZA()()()()()()),2&n){const e=t.oxw(2);t.xp6(6),t.hij(" ",t.lcZ(7,6,"lang_config_create_exam_multiple_component")," "),t.xp6(4),t.hij(" ",t.lcZ(11,8,"lang_config_create_exam_multiple_component_description_120"),""),t.xp6(3),t.hij(" ",t.lcZ(14,10,"lang_config_create_exam_multiple_component_description_80"),""),t.xp6(3),t.hij(" ",t.lcZ(17,12,"lang_testbank_in_case_users_create_subtopics_other_than_120_or_80_sentences_this_function_will_automatically_turn_off"),""),t.xp6(4),t.Q6J("ngIf",e.loadingSaveConfigMultiple),t.xp6(1),t.Q6J("ngIf",!e.loadingSaveConfigMultiple)}}const tj=function(n){return{hiddenIpt:n}};function ej(n,o){if(1&n&&(t.TgZ(0,"div",66),t._UZ(1,"add-info-print",67),t.qZA()),2&n){const e=t.oxw(2);t.Q6J("ngClass",t.VKq(3,tj,!(null!=e.form.controls.addInfoPrint&&e.form.controls.addInfoPrint.value))),t.xp6(1),t.Q6J("form",e.form)("examPrintInfoObj",e.examPrintInfoObj)}}function nj(n,o){1&n&&(t.TgZ(0,"div",76)(1,"div",77)(2,"a",78),t._UZ(3,"img",79),t.ALo(4,"convertCdnLinkOfGitHub"),t.qZA(),t.TgZ(5,"a",80),t._UZ(6,"img",81),t.ALo(7,"convertCdnLinkOfGitHub"),t.qZA()()()),2&n&&(t.xp6(3),t.Q6J("src",t.lcZ(4,2,"images/google-play-badge.svg"),t.LSH),t.xp6(3),t.Q6J("src",t.lcZ(7,4,"images/2928664.svg"),t.LSH))}function ij(n,o){1&n&&(t.TgZ(0,"p",73),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_su_dung_ma_qr_de_tai_app_azota")," "))}function oj(n,o){1&n&&(t.TgZ(0,"div",76)(1,"div",82)(2,"p",83)(3,"span",84),t._uU(4,"Google Play"),t.qZA(),t._UZ(5,"azt-download-qr-code",85),t.qZA(),t.TgZ(6,"p",86)(7,"span",84),t._uU(8,"App Store"),t.qZA(),t._UZ(9,"azt-download-qr-code",85),t.qZA()()()),2&n&&(t.xp6(5),t.Q6J("fileName","azota_exam_qr_code_google_app")("linkUrl","https://play.google.com/store/apps/details?id=azt.teacher"),t.xp6(4),t.Q6J("fileName","azota_exam_qr_code_app_store")("linkUrl","https://apps.apple.com/vn/app/azota-teacher/id1658231068"))}function aj(n,o){if(1&n&&(t.TgZ(0,"div",68)(1,"div",69)(2,"span",70),t._uU(3," * "),t.qZA(),t._uU(4),t.ALo(5,"mytranslate"),t.qZA(),t.TgZ(6,"div",71)(7,"div",72)(8,"p",73),t._uU(9),t.ALo(10,"mytranslate"),t.qZA(),t.YNc(11,nj,8,6,"div",74),t.qZA(),t.TgZ(12,"div",46),t.YNc(13,ij,3,3,"p",75),t.YNc(14,oj,10,4,"div",74),t.qZA()()()),2&n){const e=t.oxw(2);t.xp6(4),t.hij(" ",t.lcZ(5,5,"lang_core_warning_update_app_mark_ticket_new")," "),t.xp6(5),t.hij(" ",t.lcZ(10,7,"lang_core_tai_app_tai_day")," "),t.xp6(2),t.Q6J("ngIf",!e.isMobileWebView),t.xp6(2),t.Q6J("ngIf",!e.isMobileWebView),t.xp6(1),t.Q6J("ngIf",!e.isMobileWebView)}}function rj(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",3)(1,"h3",4),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"div",5)(5,"form",6)(6,"div",7)(7,"div",8)(8,"div",9)(9,"div",10)(10,"div",11)(11,"label",12),t._uU(12),t.ALo(13,"mytranslate"),t.qZA(),t._UZ(14,"input",13),t.ALo(15,"mytranslate"),t.YNc(16,ZD,4,3,"div",14),t.YNc(17,DD,4,3,"div",14),t.YNc(18,jD,4,3,"div",14),t.YNc(19,FD,5,4,"div",14),t.qZA(),t.TgZ(20,"div",15)(21,"div",16)(22,"div",17)(23,"label",18),t._uU(24),t.ALo(25,"mytranslate"),t.TgZ(26,"span",19),t.ALo(27,"mytranslate"),t._UZ(28,"lucide-icon",20),t.qZA()()(),t.TgZ(29,"div",21)(30,"div",22),t._UZ(31,"input",23),t.qZA()()(),t.YNc(32,GD,6,5,"ng-container",24),t.qZA(),t.TgZ(33,"div",15),t._UZ(34,"app-testbank-choose-answer-sheet",25),t.qZA()(),t.TgZ(35,"div",10),t._UZ(36,"preview-answer-sheet-dialog",26),t.qZA()(),t.YNc(37,$D,14,6,"div",27),t.YNc(38,YD,14,6,"div",27),t.YNc(39,KD,2,6,"div",28),t.YNc(40,XD,22,14,"div",27),t.TgZ(41,"div",9)(42,"div",10)(43,"div",29)(44,"div",16)(45,"div",17)(46,"label",30),t._uU(47),t.ALo(48,"mytranslate"),t.qZA()(),t.TgZ(49,"div",21)(50,"div",31),t._UZ(51,"input",32),t.qZA()()()(),t.YNc(52,ej,2,5,"div",33),t.qZA()()(),t.YNc(53,aj,15,9,"div",34),t.qZA(),t.TgZ(54,"div",35)(55,"button",36),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.savePrintConfigObj())}),t._uU(56),t.ALo(57,"mytranslate"),t.qZA()()()()()}if(2&n){const e=t.oxw();let i;t.xp6(2),t.hij(" ",t.lcZ(3,34,"lang_auto_in_de_co_phieu_tra_loi_trac_nghiem_rieng")," "),t.xp6(3),t.Q6J("formGroup",e.form),t.xp6(7),t.hij(" ",t.lcZ(13,36,"lang_auto_so_luong_de_dao")," "),t.xp6(2),t.s9C("placeholder",t.lcZ(15,38,"lang_auto_nhap_so_luong_de_dao")),t.xp6(2),t.Q6J("ngIf",(null==e.form.controls.numberExam?null:e.form.controls.numberExam.dirty)&&(null==e.form.controls.numberExam?null:e.form.controls.numberExam.errors)),t.xp6(1),t.Q6J("ngIf",0===(null==e.dataConfigDocument?null:e.dataConfigDocument.canMixQuestion)&&(null!==(i=null==e.form.controls.numberExam?null:e.form.controls.numberExam.value)&&void 0!==i?i:0)>1),t.xp6(1),t.Q6J("ngIf",1===(null==e.dataConfigDocument?null:e.dataConfigDocument.exceedMaxQuestions)),t.xp6(1),t.Q6J("ngIf",e.dataConfigDocument&&e.dataConfigDocument.maxAnswerChoices&&e.dataConfigDocument.maxAnswerChoices>4),t.xp6(5),t.hij(" ",t.lcZ(25,40,"lang_testbank_print_exam_custom_input_offline_mix_question_hash_id")," "),t.xp6(2),t.s9C("matTooltip",t.lcZ(27,42,"lang_testbank_print_exam_custom_input_offline_mix_question_hash_id_tooltip")),t.xp6(6),t.Q6J("ngIf",null==e.form.controls.allowCustomInputOfflineMixQuestionHashId?null:e.form.controls.allowCustomInputOfflineMixQuestionHashId.value),t.xp6(2),t.Q6J("form",e.form)("resetQuestionIndex",e.resetQuestionIndex)("formArrayName","answersheetTemplate"),t.xp6(2),t.Q6J("answersheetTemplate",e.form.controls.answersheetTemplate.value)("amountTemplateOriginalA4",e.form.controls.amountTemplateOriginalA4.value)("amountTemplateA5",e.form.controls.amountTemplateA5.value)("amountTemplateA6",e.form.controls.amountTemplateA6.value)("amountTemplateEssayA4",e.form.controls.amountTemplateEssayA4.value)("amountTemplateTrueFalseA4",e.form.controls.amountTemplateTrueFalseA4.value)("amountTemplateStartTrueFalseA4",e.form.controls.amountTemplateStartTrueFalseA4.value)("amountTemplateMultipleChoiceA4",e.form.controls.amountTemplateMultipleChoiceA4.value)("amountTemplateStartMultipleChoiceA4",e.form.controls.amountTemplateStartMultipleChoiceA4.value)("amountTemplateFillA4",e.form.controls.amountTemplateFillA4.value)("amountTemplateStartFillA4",e.form.controls.amountTemplateStartFillA4.value),t.xp6(1),t.Q6J("ngIf",e.enableRandomQuestion),t.xp6(1),t.Q6J("ngIf",!(null!=e.form.controls.isRandomQuestion&&e.form.controls.isRandomQuestion.value)),t.xp6(1),t.Q6J("ngIf",e.obj),t.xp6(1),t.Q6J("ngIf",e.canUseSubjectMark),t.xp6(7),t.hij(" ",t.lcZ(48,44,"lang_core_them_thong_tin")," "),t.xp6(5),t.Q6J("ngIf",e.examPrintInfoObj),t.xp6(1),t.Q6J("ngIf",!e.isMobileWebView),t.xp6(2),t.Q6J("disabled",e.checkValidateCountQuestion&&1==(null==e.form.controls.isCreateSubTest?null:e.form.controls.isCreateSubTest.value)||11==e.form.controls.answersheetTemplate.value&&e.form.controls.amountTemplateOriginalA4.errors||12==e.form.controls.answersheetTemplate.value&&e.form.controls.amountTemplateA5.errors||13==e.form.controls.answersheetTemplate.value&&e.form.controls.amountTemplateEssayA4.errors||14==e.form.controls.answersheetTemplate.value&&e.form.controls.amountTemplateA6.errors||15==e.form.controls.answersheetTemplate.value&&e.form.controls.amountTemplateTrueFalseA4.errors||15==e.form.controls.answersheetTemplate.value&&e.form.controls.amountTemplateMultipleChoiceA4.errors||15==e.form.controls.answersheetTemplate.value&&e.form.controls.amountTemplateFillA4.errors||1==(null==e.form.controls.isCreateSubTest?null:e.form.controls.isCreateSubTest.value)&&e.isGroupMixQuestion&&e.totalTakeQuestion>120||1==(null==e.form.controls.isCreateSubTest?null:e.form.controls.isCreateSubTest.value)&&e.isGroupMixQuestion&&0==e.totalTakeQuestion||e.dataConfigDocument&&void 0!==e.dataConfigDocument.maxAnswerChoices&&e.dataConfigDocument.maxAnswerChoices>4||(null==e.form.controls.numberExam?null:e.form.controls.numberExam.errors)||(null==e.form.controls.allowCustomInputOfflineMixQuestionHashId?null:e.form.controls.allowCustomInputOfflineMixQuestionHashId.value)&&(null==e.form.controls.inputOfflineMixQuestionHashId?null:e.form.controls.inputOfflineMixQuestionHashId.errors)),t.xp6(1),t.hij(" ",t.lcZ(57,46,"lang_auto_in_de_and_phieu")," ")}}let sj=(()=>{class n extends St.Q{get pagePrintExamCodeWithString(){const e=this.makeExamCodeWithInput();return e?`(${e.map(i=>this.formatAnswerSheetService.formatOfflineExamHashIdToNumber(i,3)).join(", ")})`:""}makeExamCodeWithInput(){if(this.form.controls.numberExam?.errors||this.form.controls.inputOfflineMixQuestionHashId?.errors)return;const e=this.commonService.examExtractNumbers(this.form.controls.numberExam?.value??1,this.form.controls.inputOfflineMixQuestionHashId?.value??"");return e.susses?e.data:void 0}getOfflineMixQuestionHashIdsWillCreated(e,i){e=Number(e),i=Number(i);let a=[];if(e>0&&i>0){let r=this.formatAnswerSheetService.getOfflineMixQuestionHashIdsFromStart(e,i);for(let s=0;s<r.length;s++)a.push(this.formatAnswerSheetService.formatOfflineExamHashIdToNumber(r[s],3))}return a.length>0?"("+a.join(", ")+")":""}getGroupMixInfosSubmit(e){let i={},a=[];return e.forEach(s=>{if(!i.hasOwnProperty(s.groupId)){i[s.groupId]=s.totalQuestion??0;let l=[],c=Number(s.totalGroupScore)/Number(s.totalQuestion);for(let d=0;d<(s.totalQuestion??0);d++)l.push(c);a=a.concat(l)}}),{status:this.isGroupMixQuestion?1:0,objs:i,marks:a}}getMixInfoSubmit(e,i){let a=Number(i)/Number(e),r=new Array(Number(e)).fill(a);return{limitMixQuestion:Number(e),marks:r}}startCreateOfflineExamData(){this.isLoadingPrintTest=!0;let e=Number(this.form.controls.numberExam?.value),a=this.form.controls.answersheetTemplate?Number(this.form.controls.answersheetTemplate.value):this.allAnswerSheet.templateOriginalA4,r=this.makeExamCodeWithInput(),s=this.getAmountAnswerSheetByTemplate(a),l={examHashId:this.examObj?.hashId??"",total:e,examTemplate:0,answersheetTemplate:a,totalQuestionOfAnswerSheet:s,customOfflineMixQuestionHashId:r??[],examParts:[{answerType:1,totalQuestion:this.form.controls.amountTemplateMultipleChoiceA4?Number(this.form.controls.amountTemplateMultipleChoiceA4.value):40},{answerType:4,totalQuestion:this.form.controls.amountTemplateFillA4?Number(this.form.controls.amountTemplateFillA4.value):6},{answerType:5,totalQuestion:this.form.controls.amountTemplateTrueFalseA4?Number(this.form.controls.amountTemplateTrueFalseA4.value):8}]};this.waitDestroy(this.offlineExamService.apiOfflineExamCreateExamObjPost(l).subscribe(c=>{if(c.success){if(c.data?.obj){let d=c.data.obj,_=`/admin/testbank/print-exam-and-ticket/${this.commonService.getMyParam(this.activeRoute,"cat_id")??"0"}/${this.examHashId}?backto=${encodeURIComponent(this.backToLink)}`;this.myNavigationWithQueryString(`/admin/testbank/download-file-print/${this.examObj?.categoryId??0}/${d.examHashId}/${d.hashId}`,`?backto=${encodeURIComponent(_)}`)}this.successStatusObj(),this.isLoadingPrintTest=!1}else this.errorStatusObj(c.message??"",!0),this.isLoadingPrintTest=!1}))}getAmountAnswerSheetByTemplate(e){switch(Number(e)){case this.allAnswerSheet.templateOriginalA4:return this.form.controls.amountTemplateOriginalA4.value;case this.allAnswerSheet.templateA5Full50:return this.form.controls.amountTemplateA5.value;case this.allAnswerSheet.templateA6Full20:return this.form.controls.amountTemplateA6.value;case this.allAnswerSheet.templateA4Essay:return this.form.controls.amountTemplateEssayA4.value;case this.allAnswerSheet.templateTrueFalseA4:case this.allAnswerSheet.templateTrueFalseA5:case this.allAnswerSheet.templateTrueFalseA6:case this.allAnswerSheet.templateTrueFalseEssayA4:return this.form.controls.amountTemplateTrueFalseA4.value+this.form.controls.amountTemplateFillA4.value+this.form.controls.amountTemplateStartMultipleChoiceA4.value;default:return this.form.controls.amountTemplateOriginalA4.value}}changeRandomQuestionConfig(e){e.target instanceof HTMLInputElement&&e.target.checked&&(this.form.controls.subjectMarks.enable(),this.form.controls.isCreateSubTest?.setValue(!1))}changeConfigSubjectMark(e){if(e.target instanceof HTMLInputElement){this.loadingSaveConfigMultiple=!0;let i=this.form.getRawValue(),a={subjectMarks:i.subjectMarks?1:0,isSaveConfig:0};this.waitDestroy(this.documentConfigService.apiDocumentConfigSaveExamConfigPost(this.examHashId,a).subscribe(r=>{1==r.success?(this.loadingSaveConfigMultiple=!1,this.successStatusObj(i.subjectMarks?"lang_config_create_exam_multiple_component_enable_successfully":"lang_config_create_exam_multiple_component_disable_successfully",!0)):(this.loadingSaveConfigMultiple=!1,this.errorStatusObj(r.message??"",!0),this.form.controls.subjectMarks.setValue(!a.subjectMarks))}))}}changeCreateSubTestConfig(e){e.target instanceof HTMLInputElement&&(e.target.checked?(120!=this.form.controls.limitMixQuestion?.value&&80!=this.form.controls.limitMixQuestion?.value||this.isGroupMixQuestion&&120!=this.totalTakeQuestion&&80!=this.totalTakeQuestion)&&(this.form.controls.subjectMarks.setValue(!1),this.form.controls.subjectMarks.disable()):this.form.controls.subjectMarks.enable())}changeLimitQuestionNonGroup(e){this.isGroupMixQuestion||this.disableSubjectMarksConfig(e)}changeLimitQuestionInGroup(e){this.totalTakeQuestion=e,this.isGroupMixQuestion&&this.disableSubjectMarksConfig(e)}disableSubjectMarksConfig(e){this.form.controls.isCreateSubTest?.value&&120!=e&&80!=e||!this.canUseSubjectMark?(this.form.controls.subjectMarks.setValue(!1),this.form.controls.subjectMarks.disable()):this.form.controls.subjectMarks.enable()}savePrintConfigObj(){this.initStatusObj(),this.form.controls.isRandomQuestion?.value&&this.form.controls.isCreateSubTest?.setValue(!1);let e=this.form.getRawValue();e.limitMixQuestion=e.limitMixQuestion?e.limitMixQuestion:0;let i=e.isCreateSubTest?2:2==this.dataConfigDocument?.examObj?.mixQuestion?1:void 0,a=e.groupInfos?this.getGroupMixInfosSubmit(e.groupInfos):void 0,s={mixQuestion:i,mixQuestionNotInGroupInfoWithMarkObj:e.totalPointQuestionNoGroup?this.getMixInfoSubmit(e.limitMixQuestion,e.totalPointQuestionNoGroup):void 0,mixQuestionGroupInfoWithMarkObj:a,subjectMarks:e.subjectMarks?1:0,isRandomQuestion:this.enableRandomQuestion?e.isRandomQuestion?1:0:void 0,isSaveConfig:0};this.waitDestroy(this.documentConfigService.apiDocumentConfigSaveExamConfigPost(this.examObj?.hashId??"",s).subscribe(l=>{1==l.success?(this.startCreateOfflineExamData(),this.addInfoPrint()):this.errorStatusObj(l.message??"",!0)}))}getExamInfoByHashId(e){this.initStatusObj(),this.waitDestroy(this.documentConfigService.apiDocumentConfigGetExamConfigDataGet(e).subscribe(i=>{1==i.success?(this.dataConfigDocument=i.data,this.canUseSubjectMark=i.data?.canUseSubjectMark??!1,this.resetQuestionIndex=i.data?.resetQuestionIndex??!0,this.resetQuestionIndex&&(this.form.controls.amountTemplateStartTrueFalseA4=new f.NI(1,{nonNullable:!0,validators:[f.kI.required,f.kI.min(1),f.kI.max(120)]}),this.form.controls.amountTemplateStartFillA4=new f.NI(1,{nonNullable:!0,validators:[f.kI.required,f.kI.min(1),f.kI.max(120)]})),this.dataConfigDocument&&this.initData(this.dataConfigDocument),this.successStatusObj()):this.errorStatusObj(i.message??"",!0)}))}initData(e){let a,i=e?.examObj,r=this.defaultMaxMixQuestionHashId-(e?.totalUsedMixQuestionHashId??0);if(a=this.castObj(i),null==a)return;a.limitQuestionGroupsParse=this.commonService.myParseJson(i.limitQuestionGroups??""),this.obj=a,this.examObj=e.examObj??{},this.examPrintInfoObj=e.examPrintInfoObj,this.enableRandomQuestion=e.enableRandomQuestion??!1,this.examPrintInfoObj?.status&&this.form.controls.addInfoPrint?.setValue(!0),this.limitMaxMixQuestionHashId=r>this.defaultMaxCreateMixExamOneTime?this.defaultMaxCreateMixExamOneTime:r;let s=e.examObj?.mixQuestionNotInGroupInfoWithMarkObj?.marks?.reduce((l,c)=>l+c,0);s=Math.round(100*(s??1))/100,this.form.controls.limitMixQuestion?.setValue(this.obj.limitMixQuestion),this.form.controls.isCreateSubTest?.setValue(2==this.obj.mixQuestion),this.form.controls.numberExam?.addValidators(f.kI.max(this.limitMaxMixQuestionHashId)),this.form.controls.answersheetTemplate.setValue(e.offlineExamObj?.answersheetTemplate?e.offlineExamObj?.answersheetTemplate:this.allAnswerSheet.templateOriginalA4),this.form.addValidators(function SD(n,o){return e=>{var a=e.controls.inputOfflineMixQuestionHashId,r=e.controls.numberExam;if(a&&a.value&&r&&""!=r.value.toString().trim()){var s=mi.z.stcExamExtractNumbers(Number(r.value),a.value),c=s.data.filter(function(x){return-1!=o.indexOf(x)});if(s.data.length>0&&c.length>0){for(var d=[],h=0;h<c.length;h++)d.push(n.formatOfflineExamHashIdToNumber(c[h],3));return a.setErrors({duplicatedCustomOfflineMixQuestionHashIdInvalid:!0,duplicatedCustomHashIds:d}),{identityRevealed:!0}}}var _=a.errors??{};return _=Dc.removeKeyInObject(_,{duplicatedCustomOfflineMixQuestionHashIdInvalid:!0,duplicatedCustomHashIds:[]}),Dc.objectLength(_)<=0?a.setErrors(null):a.setErrors(_),null}}(this.formatAnswerSheetService,e.offlineMixQuestionHashIdsUsed??[])),this.form.addValidators(function kD(){return n=>{const o=n;var e=o.controls.inputOfflineMixQuestionHashId;if(e&&""!=e.value.trim()){var i=o.controls.numberExam;if(!i||""==i.value.toString().trim())return e.setErrors({countOfflineMixQuestionHashIdInvalid:!0,countOfCode:0,countReal:0}),{identityRevealed:!0};var a=Number(i.value),r=mi.z.stcExamExtractNumbers(a,e.value);if(r.susses&&r.data.length!=a)return e.setErrors({countOfflineMixQuestionHashIdInvalid:!0,countOfCode:a,countReal:r.data.length}),{identityRevealed:!0}}var s=e.errors??{};return s=Dc.removeKeyInObject(s,{countOfflineMixQuestionHashIdInvalid:!0,countOfCode:0,countReal:0}),Dc.objectLength(s)<=0?e.setErrors(null):e.setErrors(s),null}}()),this.form.addValidators(function AD(){return n=>{var e=n.controls.inputOfflineMixQuestionHashId,i=n.controls.numberExam;if(e&&""!=e.value.trim()&&i&&""!=i.value.toString().trim()){var a=mi.z.stcExamExtractNumbers(Number(i.value),e.value);if(!a.susses)return e.setErrors({formatOfflineMixQuestionHashIdInvalid:!0}),{identityRevealed:!0};if(0===a.data.length||a.data.filter(s=>s<0).length>0)return e.setErrors({formatOfflineMixQuestionHashIdInvalid:!0}),{identityRevealed:!0}}var r=e.errors??{};return r=Dc.removeKeyInObject(r,{formatOfflineMixQuestionHashIdInvalid:!0}),Dc.objectLength(r)<=0?e.setErrors(null):e.setErrors(r),null}}()),this.form.addValidators(function OD(n,o){return e=>{var a=e.controls.inputOfflineMixQuestionHashId,r=e.controls.numberExam;if(a&&""!=a.value.trim()&&r&&""!=r.value.toString().trim()){var s=mi.z.stcExamExtractNumbers(Number(r.value),a.value);if(s.susses)for(let d=0;d<s.data.length;d++){if(s.data[d]<n)return a.setErrors({minOfflineMixQuestionHashIdInvalid:!0,minOfStart:n}),{identityRevealed:!0};if(s.data[d]>o){let h=o;return"special"===s.msg&&(h=h-Number(r.value)+1),a.setErrors({maxOfflineMixQuestionHashIdInvalid:!0,maxOfStart:h}),{identityRevealed:!0}}}}var l=a.errors??{};l=Dc.removeKeyInObject(l,{minOfflineMixQuestionHashIdInvalid:!0,minOfStart:0}),Dc.objectLength(l)<=0?a.setErrors(null):a.setErrors(l);var c=a.errors??{};return c=Dc.removeKeyInObject(c,{maxOfflineMixQuestionHashIdInvalid:!0,maxOfStart:0}),Dc.objectLength(c)<=0?a.setErrors(null):a.setErrors(c),null}}(1,999)),this.form.controls.schoolName?.setValue(e.examPrintInfoObj?.schoolName),this.form.controls.subjectName?.setValue(e.examPrintInfoObj?.subject),this.form.controls.isRandomQuestion?.setValue(1==this.obj.isRandomQuestion),this.form.controls.subjectMarks.setValue(!!this.examObj.subjectMarks),this.form.controls.totalPointQuestionNoGroup?.setValue(s),this.dataConfigDocument?.examParts.length&&(this.form=this.aztCalcExamPartService.calcExamPart(this.form,this.dataConfigDocument?.examParts,this.resetQuestionIndex)),this.hasGroupQuestion=!!e.hasGroupQuestion,this.minLimitMixQuestion=e.minLimitMixQuestion??0,this.examGroupInfos=e.examGroupInfos&&e.examGroupInfos.length>0?e.examGroupInfos:this.examGroupInfos}addInfoPrint(){this.waitDestroy(this.documentConfigService.apiDocumentConfigSaveExamPrintInfoObjPost(this.examHashId,{schoolName:this.form.controls.schoolName?.value,subject:this.form.controls.subjectName?.value,status:this.form.controls.addInfoPrint?.value?1:0}).subscribe(i=>{i.success||this.errorStatusObj(i.message??"")}))}redirectToUpdateExam(){const i=`/admin/testbank/print-exam-and-ticket/${this.commonService.getMyParam(this.activeRoute,"cat_id")??"0"}/${this.examHashId}?backto=${encodeURIComponent(this.backToLink)}`;this.myNavigationWithQueryString(`/admin/testbank/update-exam/${this.examObj?.categoryId??0}/${this.examObj?.id}`,`?backto=${encodeURIComponent(i)}`)}ngOnInit(){this.examHashId=this.commonService.getMyParam(this.activeRoute,"hash_id")??"";let e=this.commonService.getMyParam(this.activeRoute,"cat_id")??"",i=this.commonService.getMyQueryParam("backto")??"";this.backToLink=i||`/admin/testbank/action-online-offline/${e??0}/${this.examHashId}`,this.getExamInfoByHashId(this.examHashId),super.ngOnInit()}constructor(e,i,a,r,s){super(),this.offlineExamService=e,this.documentConfigService=i,this.formatAnswerSheetService=a,this.aztCalcExamPartService=r,this.activeRoute=s,this.backToLink="",this.isLoadingPrintTest=!1,this.isGroupMixQuestion=!1,this.checkValidateCountQuestion=!1,this.totalTakeQuestion=0,this.hasGroupQuestion=!1,this.examGroupInfos=[],this.minLimitMixQuestion=0,this.enableRandomQuestion=!1,this.defaultMaxCreateMixExamOneTime=100,this.defaultMaxMixQuestionHashId=999,this.limitMaxMixQuestionHashId=999,this.examHashId="",this.loadingSaveConfigMultiple=!1,this.canUseSubjectMark=!1,this.resetQuestionIndex=!0,this.allAnswerSheet=Sl.x,this.form=new f.cw({numberExam:new f.NI(1,{nonNullable:!0,validators:[f.kI.required,f.kI.min(1)]}),isCreateSubTest:new f.NI(!1,{nonNullable:!0}),mixQuestion:new f.NI(1,{nonNullable:!0}),groupInfos:new f.Oe([]),limitMixQuestion:new f.NI(void 0,{nonNullable:!0}),totalPointQuestionNoGroup:new f.NI(10,{nonNullable:!0}),answersheetTemplate:new f.NI(this.allAnswerSheet.templateOriginalA4,{nonNullable:!0,validators:[f.kI.required]}),amountTemplateOriginalA4:new f.NI(120,{nonNullable:!0,validators:[f.kI.required,f.kI.min(1),f.kI.max(120)]}),amountTemplateA5:new f.NI(50,{nonNullable:!0,validators:[f.kI.required,f.kI.min(1),f.kI.max(50)]}),amountTemplateA6:new f.NI(20,{nonNullable:!0,validators:[f.kI.required,f.kI.min(1),f.kI.max(20)]}),amountTemplateEssayA4:new f.NI(50,{nonNullable:!0,validators:[f.kI.required,f.kI.min(1),f.kI.max(50)]}),amountTemplateTrueFalseA4:new f.NI(8,{nonNullable:!0,validators:[f.kI.required,f.kI.min(0),f.kI.max(8)]}),amountTemplateStartTrueFalseA4:new f.NI(41,{nonNullable:!0,validators:[f.kI.required,f.kI.min(1),f.kI.max(120)]}),amountTemplateMultipleChoiceA4:new f.NI(40,{nonNullable:!0,validators:[f.kI.required,f.kI.min(1),f.kI.max(40)]}),amountTemplateStartMultipleChoiceA4:new f.NI(1,{nonNullable:!0,validators:[f.kI.required,f.kI.min(1),f.kI.max(120)]}),amountTemplateFillA4:new f.NI(6,{nonNullable:!0,validators:[f.kI.required,f.kI.min(0),f.kI.max(6)]}),amountTemplateStartFillA4:new f.NI(49,{nonNullable:!0,validators:[f.kI.required,f.kI.min(1),f.kI.max(120)]}),allowCustomInputOfflineMixQuestionHashId:new f.NI(!1,{nonNullable:!0,validators:[f.kI.required]}),inputOfflineMixQuestionHashId:new f.NI("",{nonNullable:!0}),addInfoPrint:new f.NI(!1,{nonNullable:!0}),schoolName:new f.NI("",{nonNullable:!0}),subjectName:new f.NI("",{nonNullable:!0}),isRandomQuestion:new f.NI(!1,{nonNullable:!0}),subjectMarks:new f.NI({value:!1,disabled:!1},{nonNullable:!0})})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(ya.vv),t.Y36(Ke.Cq),t.Y36(ED.j),t.Y36(ep),t.Y36(O.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-print-exam-and-ticket"]],features:[t.qOj],decls:4,vars:3,consts:[[3,"headerBackToLink"],[4,"ngIf","ngIfElse"],["doneLoading",""],["id","azt-config-document",1,"azt-config-document","mx-auto","mt-5",2,"max-width","1000px"],[1,"text-md","uppercase","font-medium"],[1,"box","mt-3"],[3,"formGroup"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5"],[1,"grid","grid-cols-12","gap-5"],[1,"col-span-12","md:col-span-6"],[1,"mt-0"],[1,"form-label","font-medium"],["type","text","appOnlyNumber","","formControlName","numberExam",1,"form-control",3,"placeholder"],["class","text-xs text-danger fade mt-2",4,"ngIf"],[1,"mt-4"],[1,"grid","grid-cols-12","items-center"],[1,"col-span-10","lg:col-span-5"],["for","allow-input-start-offline-mix-question-hash-id",1,"form-check-label","ml-0","azt-ml-0","mr-2","flex","items-center","font-medium"],[1,"w-4","h-4","ml-2","inline-block",3,"matTooltip"],["name","info"],[1,"col-span-2","lg:col-span-7","flex"],[1,"form-check","form-switch","mb-3","ml-auto"],["id","allow-input-start-offline-mix-question-hash-id","formControlName","allowCustomInputOfflineMixQuestionHashId","type","checkbox",1,"show-code","form-check-input"],[4,"ngIf"],[3,"form","resetQuestionIndex","formArrayName"],[3,"answersheetTemplate","amountTemplateOriginalA4","amountTemplateA5","amountTemplateA6","amountTemplateEssayA4","amountTemplateTrueFalseA4","amountTemplateStartTrueFalseA4","amountTemplateMultipleChoiceA4","amountTemplateStartMultipleChoiceA4","amountTemplateFillA4","amountTemplateStartFillA4"],["class","grid grid-cols-12 gap-5",4,"ngIf"],["class","mt-3",3,"hidden",4,"ngIf"],[1,"mt-5"],["for","add-info-print",1,"form-label","font-medium"],[1,"form-check","form-switch","ml-auto"],["id","add-info-print","formControlName","addInfoPrint","type","checkbox",1,"show-code","form-check-input","mr-0","ml-3"],[3,"ngClass",4,"ngIf"],["class","block-warning p-5",4,"ngIf"],[1,"p-3","text-right"],["azt-track-service","print-exam-and-ticket-PVsGtKGXRK",1,"btn","btn-primary",3,"disabled","click"],[1,"text-xs","text-danger","fade","mt-2"],[1,"text-note","text-danger"],["azt-track-service","print-exam-and-ticket-8BU0T1lQl","class","btn-text-primary inline-flex font-medium",3,"click",4,"ngIf"],["azt-track-service","print-exam-and-ticket-8BU0T1lQl",1,"btn-text-primary","inline-flex","font-medium",3,"click"],["type","text","formControlName","inputOfflineMixQuestionHashId",1,"form-control",3,"placeholder"],[1,"col-span-12","px-0","mt-2"],["class","text-slate-500 text-xs truncate",3,"matTooltip","isDisabledTooltip","matTooltipDisabled",4,"ngIf"],[1,"text-slate-500","text-xs","truncate",3,"matTooltip","isDisabledTooltip","matTooltipDisabled"],["c","isDisabled"],[1,"block"],[1,"grid","grid-cols-12"],[1,"col-span-10","lg:col-span-7"],["for","config-matrix-question",1,"form-label","font-medium"],[1,"leading-relaxed","text-slate-500","text-xs","pr-5"],[1,"col-span-2","lg:col-span-5"],["id","config-matrix-question","formControlName","isRandomQuestion","type","checkbox",1,"show-code","ml-auto","form-check-input","mr-0","ml-3",3,"change"],["for","create-sub-exam",1,"form-label","font-medium"],[1,"leading-relaxed","text-slate-500","text-xs","mt-2","pr-5"],["id","create-sub-exam","formControlName","isCreateSubTest","type","checkbox",1,"show-code","ml-auto","form-check-input","mr-0","ml-3",3,"change"],[1,"mt-3",3,"hidden"],["formArrayGroupInfosName","groupInfos","formControlLimitMixQuestionName","limitMixQuestion",3,"fromPrintOffline","form","obj","minLimitMixQuestion","examGroupInfos","isGroupMixQuestionChange","checkValidateCountQuestionChange","hasChangeValueLimitQuestion","totalTakeQuestionChange"],[1,"col-span-10","lg:col-span-10"],["for","subject-marks-question",1,"form-label","font-medium"],[1,"mt-0.5"],[1,"col-span-2","lg:col-span-2"],["class","w-5 h-5 inline-block mr-2",4,"ngIf"],["id","subject-marks-question","formControlName","subjectMarks","class","show-code ml-auto form-check-input mr-0 ml-3","type","checkbox",3,"change",4,"ngIf"],[1,"w-5","h-5","inline-block","mr-2"],["id","subject-marks-question","formControlName","subjectMarks","type","checkbox",1,"show-code","ml-auto","form-check-input","mr-0","ml-3",3,"change"],[3,"ngClass"],[3,"form","examPrintInfoObj"],[1,"block-warning","p-5"],[1,"font-medium",2,"font-size","18px"],[1,"text-danger"],[1,"mt-5","flex","flex-col","md:flex-row"],[1,"block","md:mr-10"],[1,"mt-2","font-medium"],["class","grid grid-cols-12 mt-2 ml-auto mr-auto justify-center",4,"ngIf"],["class","mt-2 font-medium",4,"ngIf"],[1,"grid","grid-cols-12","mt-2","ml-auto","mr-auto","justify-center"],[1,"col-span-12","w-full","self-center","mb-2"],["azt-track-service","print-exam-and-ticket-AVrdnS9P7","href","https://play.google.com/store/apps/details?id=azt.teacher","target","_blank","rel","noopener",1,"pl-1","pr-1","mb-2","display-inline-block"],["alt","Get it on Google Play","width","150px",1,"play-store-badge",3,"src"],["azt-track-service","print-exam-and-ticket-ZrLBZdsFfU","href","https://apps.apple.com/vn/app/azota-teacher/id1658231068","target","_blank","rel","noopener",1,"pl-1","pl-1","mb-2","display-inline-block"],["alt","Download on the App Store","width","135px",1,"app-store-badge",3,"src"],[1,"col-span-12","items-center","mb-2"],[1,"px-1","mb-1","py-1","inline-flex","border","border-slate-200","rounded"],[1,"my-auto","font-medium"],[1,"ml-1",3,"fileName","linkUrl"],[1,"ml-2","px-1","py-1","mb-1","inline-flex","border","border-slate-200","rounded"]],template:function(e,i){if(1&e&&(t.TgZ(0,"teacher-layout",0),t.YNc(1,ID,1,0,"azt-loading-effect",1),t.YNc(2,rj,58,48,"ng-template",null,2,t.W1O),t.qZA()),2&e){const a=t.MAs(3);t.Q6J("headerBackToLink",i.backToLink),t.xp6(1),t.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a)}},dependencies:[D.mk,D.O5,Mi.gM,f._Y,f.Fj,f.Wl,f.JJ,f.JL,f.sg,f.u,f.CE,si.l,Vf.W,qr.Y,oo.M,Jl.Q,MD.z,oi.n,fo._,C.Nh5,y6,Lr,r0,jt.JV,jt.Bo],encapsulation:2}),n})();function lj(n,o){1&n&&t._UZ(0,"azt-loading-effect")}function cj(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",25)(1,"h3",26),t._uU(2),t.qZA(),t.TgZ(3,"div",27),t._UZ(4,"input",28),t.TgZ(5,"button",29),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.showCopySuccess())}),t.O4$(),t.TgZ(6,"svg",12),t._UZ(7,"rect",30)(8,"path",31),t.qZA(),t._uU(9),t.ALo(10,"mytranslate"),t.qZA()()()}if(2&n){const e=o.$implicit,i=t.oxw(3);let a;t.xp6(2),t.hij(" ",null==e.classObj?null:e.classObj.name," "),t.xp6(2),t.Q6J("value",e.linkDocument),t.xp6(1),t.Q6J("cdkCopyToClipboard",i.copyLinkToClipboard(null!==(a=e.linkDocument)&&void 0!==a?a:"")),t.xp6(4),t.hij(" ",t.lcZ(10,4,"lang_auto_sao_chep")," ")}}function uj(n,o){if(1&n&&(t.TgZ(0,"div",22)(1,"h3",23),t._uU(2),t.qZA(),t.YNc(3,cj,11,6,"div",24),t.qZA()),2&n){const e=t.oxw(2);t.xp6(2),t.hij(" ",null==e.homeworkObj?null:e.homeworkObj.name," "),t.xp6(1),t.Q6J("ngForOf",e.listLinkDocument)}}function dj(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",22)(1,"h3",23),t._uU(2),t.qZA(),t.TgZ(3,"div",32),t._UZ(4,"input",33),t.TgZ(5,"button",34),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.showCopySuccess())}),t.O4$(),t.TgZ(6,"svg",12),t._UZ(7,"rect",30)(8,"path",31),t.qZA(),t._uU(9),t.ALo(10,"mytranslate"),t.qZA()()()}if(2&n){const e=t.oxw(2);t.xp6(2),t.hij(" ",null==e.examObj?null:e.examObj.name," "),t.xp6(2),t.Q6J("value",e.linkDocument),t.xp6(1),t.Q6J("cdkCopyToClipboard",e.copyLinkToClipboard(e.linkDocument)),t.xp6(4),t.hij(" ",t.lcZ(10,4,"lang_auto_sao_chep")," ")}}function mj(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",35)(1,"p",36),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"p",26),t._uU(5),t.ALo(6,"mytranslate"),t.qZA(),t.TgZ(7,"div",37)(8,"code",38)(9,"span"),t._uU(10,"<"),t.TgZ(11,"span"),t._uU(12,"iframe"),t.qZA(),t._uU(13,"\xa0 "),t.TgZ(14,"span"),t._uU(15,"width"),t.qZA(),t._uU(16,"="),t.TgZ(17,"span"),t._uU(18,'"100%"'),t.qZA(),t._uU(19,"\xa0 "),t.TgZ(20,"span"),t._uU(21,"height"),t.qZA(),t._uU(22,"="),t.TgZ(23,"span"),t._uU(24,'"900"'),t.qZA(),t._uU(25,"\xa0 "),t.TgZ(26,"span"),t._uU(27,"src"),t.qZA(),t._uU(28,"="),t.TgZ(29,"span"),t._uU(30),t.qZA(),t._uU(31,"\xa0 "),t.TgZ(32,"span"),t._uU(33,"title"),t.qZA(),t._uU(34,"="),t.TgZ(35,"span"),t._uU(36),t.qZA(),t._uU(37,"\xa0 "),t.TgZ(38,"span"),t._uU(39,"frameborder"),t.qZA(),t._uU(40,"="),t.TgZ(41,"span"),t._uU(42,'"0"'),t.qZA(),t._uU(43,"\xa0 "),t.TgZ(44,"span"),t._uU(45,"allow"),t.qZA(),t._uU(46,"="),t.TgZ(47,"span"),t._uU(48,'"accelerometer;autoplay;clipboard-write;encrypted-media; gyroscope; picture-in-picture"'),t.qZA(),t._uU(49,"\xa0 "),t.TgZ(50,"span"),t._uU(51,"allowfullscreen"),t.qZA(),t._uU(52,">"),t.qZA(),t._uU(53,"\xa0 "),t.TgZ(54,"span"),t._uU(55,"</"),t.TgZ(56,"span"),t._uU(57,"iframe"),t.qZA(),t._uU(58,">"),t.qZA()()(),t.TgZ(59,"div",39)(60,"button",40),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.showCopySuccess())}),t.O4$(),t.TgZ(61,"svg",41),t._UZ(62,"path",42)(63,"polyline",14),t.qZA(),t._uU(64),t.ALo(65,"mytranslate"),t.qZA()()()}if(2&n){const e=t.oxw(2);t.xp6(2),t.hij(" ",t.lcZ(3,6,"lang_testbank_publish_result_had_website"),"? "),t.xp6(3),t.hij(" ",t.lcZ(6,8,"lang_testbank_publish_result_note_tutorial")," "),t.xp6(25),t.hij('"',e.linkDocument,'"'),t.xp6(6),t.hij('"',null==e.examObj?null:e.examObj.name,'"'),t.xp6(24),t.Q6J("cdkCopyToClipboard",e.copyLinkToIframe()),t.xp6(4),t.hij(" ",t.lcZ(65,10,"lang_auto_sao_chep_ma_nhung")," ")}}function hj(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",3)(1,"div",4)(2,"h3",5),t._uU(3),t.ALo(4,"mytranslate"),t.ALo(5,"mytranslate"),t.ALo(6,"mytranslate"),t.ALo(7,"mytranslate"),t.qZA()(),t.TgZ(8,"p",6),t._uU(9),t.ALo(10,"mytranslate"),t.qZA(),t.YNc(11,uj,4,2,"div",7),t.YNc(12,dj,11,6,"div",7),t.YNc(13,mj,66,12,"div",8),t.TgZ(14,"div",9)(15,"div",10)(16,"a",11),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.getRouterLinkByType())}),t.O4$(),t.TgZ(17,"svg",12),t._UZ(18,"path",13)(19,"polyline",14)(20,"path",15)(21,"path",16)(22,"path",17)(23,"path",18),t.qZA(),t._uU(24),t.ALo(25,"mytranslate"),t.qZA()(),t.kcU(),t.TgZ(26,"div",19)(27,"a",20),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.backToDocumentManager())}),t.O4$(),t.TgZ(28,"svg",12),t._UZ(29,"path",21),t.qZA(),t._uU(30),t.ALo(31,"mytranslate"),t.qZA()()()()}if(2&n){const e=t.oxw();t.xp6(3),t.hij(" ",1==e.type?null!=e.homeworkObj&&e.homeworkObj.isPublished?t.lcZ(4,7,"lang_auto_xuat_ban_thanh_cong"):t.lcZ(5,9,"lang_auto_da_luu_thanh_cong_chua_xuat_ban"):null!=e.examObj&&e.examObj.isPublished?t.lcZ(6,11,"lang_auto_xuat_ban_thanh_cong"):t.lcZ(7,13,"lang_auto_da_luu_thanh_cong_chua_xuat_ban")," \u{1f389} "),t.xp6(6),t.hij(" ",t.lcZ(10,15,"lang_auto_copy_link_ben_duoi_va_gui_cho_hoc_sinh_hoc_sinh_truy_cap_link_de_lam_bai_va_nop_bai")," "),t.xp6(2),t.Q6J("ngIf",1==e.type),t.xp6(1),t.Q6J("ngIf",0==e.type),t.xp6(1),t.Q6J("ngIf",0==e.type),t.xp6(11),t.hij(" ",t.lcZ(25,17,"lang_auto_quan_ly_danh_sach_da_thi")," "),t.xp6(6),t.hij(" ",t.lcZ(31,19,"lang_auto_ve_trang_quan_ly_file")," ")}}let pj=(()=>{class n extends St.Q{constructor(e,i){super(),this.documentConfigService=e,this.activeRoute=i,this.backToLink="",this.linkDocument="",this.listLinkDocument=[],this.linkIframeDocument="",this.successListHomework=[],this.type=0}createLinkHomeworkObjs(e,i){var a=[];let r=this.commonService.getCurrentDomain();return e.forEach(s=>{var l=i.filter(d=>d.id==s.classroomId);if(l&&l.length>0)a.push({classObj:l[0],homeworkObj:s,linkDocument:`${r}/bai-tap/${s.hashId}`});else{var c={id:0,name:this.commonService.myTranslateInstant("lang_auto_tu_do")??"",teacherId:0,countStudents:0,showAddStudent:0,grade:0,isShareClassroom:!1,isWaitingConfirm:0,permissionObj:{},teamPermissions:[]};a.push({classObj:c,homeworkObj:s,linkDocument:`${r}/bai-tap/${s.hashId}`})}}),a}getHomeworkInfoByHashId(e){var i=this.commonService.myParseJson(e);this.initStatusObj(),this.waitDestroy(this.documentConfigService.apiDocumentConfigGetHomeworkConfigDataPost(i?.[0]??"",i).subscribe(a=>{if(1==a.success){this.homeworkObj=a.data?.homeworkObj,this.successListHomework=a.data?.successHomeworkObjs??[],this.listLinkDocument=this.createLinkHomeworkObjs(a.data?.successHomeworkObjs??[],a.data?.classroomObjs??[]);let r=this.commonService.getCurrentDomain();this.linkDocument=`${r}/bai-tap/${this.homeworkObj?.hashId}`,this.successStatusObj()}else this.errorStatusObj(a.message??"",!0)}))}getExamInfoByHashId(e){this.initStatusObj(),this.waitDestroy(this.documentConfigService.apiDocumentConfigGetExamConfigDataGet(e).subscribe(i=>{if(1==i.success){this.examObj=i.data?.examObj;let a=this.commonService.getCurrentDomain();this.linkDocument=`${a}/de-thi/${this.examObj?.hashId}`,this.linkIframeDocument=`<iframe width="100%" height="900" src="${this.linkDocument}"  title="${this.examObj?.name}" frameborder="0" allow="accelerometer;autoplay;clipboard-write;encrypted-media; gyroscope; picture-in-picture" allowfullscreen> </iframe>`,this.successStatusObj()}else this.errorStatusObj(i.message??"",!0)}))}copyLinkToClipboard(e){return e}copyLinkToIframe(){return this.linkIframeDocument}showCopySuccess(){this.showSuccessSnack("lang_auto_sao_chep_thanh_cong")}getRouterLinkByType(){let e=this.getBackData(this.backToLink,!1);this.myNavigationWithQueryString(1==this.type?"/admin/testbank/homework-results-list/"+this.homeworkObj?.classroomId+"/"+this.homeworkObj?.id+"/"+this.homeworkObj?.hashId:"/admin/testbank/exam-results-list/"+(this.examObj?.categoryId??0)+"/"+this.examObj?.id+"/0",e?"?"+decodeURIComponent(e):"")}getBackData(e,i){let a="";if(e.includes("backto")){let r=e.substring(e.lastIndexOf("backto"));r.includes("shareType")&&(a=i?r.substring(r.lastIndexOf("data")):r)}return a}backToDocumentManager(){let e=this.getBackData(this.backToLink,!0);this.myNavigationWithQueryString(1==this.type?"/admin/testbank/document-management/1/0/1":`/admin/testbank/document-management/0/${this.examObj?.categoryId??0}/1`,e?"?"+decodeURIComponent(e):"")}ngOnInit(){let e=this.commonService.getMyQueryParam("backto"),i=this.commonService.getMyParam(this.activeRoute,"hash_id")??"";this.type=Number(this.commonService.getMyParam(this.activeRoute,"type"))??0,1==this.type?this.getHomeworkInfoByHashId(i):this.getExamInfoByHashId(i),this.backToLink=e??"/admin/testbank/document-management/0/0/1",this.commonService.translateMetaData({title:"lang_cms_publish_document_title",description:"lang_cms_publish_document_description",image:""}),super.ngOnInit()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Ke.Cq),t.Y36(O.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-publish-document"]],features:[t.qOj],decls:4,vars:3,consts:[[3,"headerBackToLink"],[4,"ngIf","ngIfElse"],["doneLoading",""],[1,"intro-y","mt-8"],[1,"flex","items-center","justify-center"],[1,"text-lg","font-medium"],[1,"text-md","text-center"],["class","box mx-auto mt-5 p-3","style","max-width: 560px",4,"ngIf"],["class","box p-3 text-center mt-5 intro-x mx-auto","style","max-width: 560px;",4,"ngIf"],[1,"mt-5","flex","flex-col","sm:flex-row","justify-center","items-center"],[1,"mr-2"],["azt-track-service","publish-document-WN-MSecHgq",1,"btn","btn-outline-primary","btn-transparent",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","mr-2"],["d","M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],["points","14 2 14 8 20 8"],["d","M8 13h2"],["d","M8 17h2"],["d","M14 13h2"],["d","M14 17h2"],[1,"w-30"],["azt-track-service","publish-document-zSqq-4hFwf",1,"btn","btn-outline-primary","btn-transparent",3,"click"],["d","M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z"],[1,"box","mx-auto","mt-5","p-3",2,"max-width","560px"],[1,"text-md","font-medium"],["class","mt-4",4,"ngFor","ngForOf"],[1,"mt-4"],[1,"text-md"],[1,"azt-copy","relative","mt-2","intro-x"],["type","text","readonly","",1,"form-control","py-3","px-4","border-transparent","bg-slate-100","pr-10",2,"padding-right","120px",3,"value"],["azt-track-service","publish-document-pWkyuGbsV",1,"btn","btn-outline-primary","absolute","my-auto","inset-y-0","right-0",2,"border-top-left-radius","0","border-bottom-left-radius","0",3,"cdkCopyToClipboard","click"],["x","9","y","9","width","13","height","13","rx","2","ry","2"],["d","M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"],[1,"azt-copy","relative","mt-5","intro-x"],["type","text","readonly","",1,"form-control","py-3","px-4","border-transparent","bg-slate-100","pr-10","text-primary",2,"padding-right","120px","cursor","pointer",3,"value"],["azt-track-service","publish-document-OwwIaPHrMx",1,"btn","btn-outline-primary","absolute","my-auto","inset-y-0","right-0",2,"border-top-left-radius","0","border-bottom-left-radius","0",3,"cdkCopyToClipboard","click"],[1,"box","p-3","text-center","mt-5","intro-x","mx-auto",2,"max-width","560px"],[1,"tex-md"],[1,"overflow-y-auto","mt-3","rounded-md","text-left","border","border-slate-200","dark:border-darkmode-300","p-3"],[1,"whitespace-nowrap",2,"padding","1rem"],[1,"text-right","mt-3"],["azt-track-service","publish-document--zJK66x3oF",1,"copy-code","btn","py-1","mr-auto","px-2","btn-outline-secondary",3,"cdkCopyToClipboard","click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","icon-name","file","data-lucide","file",1,"lucide","lucide-file","w-4","h-4","mr-2"],["d","M14.5 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V7.5L14.5 2z"]],template:function(e,i){if(1&e&&(t.TgZ(0,"teacher-layout",0),t.YNc(1,lj,1,0,"azt-loading-effect",1),t.YNc(2,hj,32,21,"ng-template",null,2,t.W1O),t.qZA()),2&e){const a=t.MAs(3);t.Q6J("headerBackToLink",i.backToLink),t.xp6(1),t.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a)}},dependencies:[D.sg,D.O5,Cp.i3,si.l,fo._,jt.JV],encapsulation:2}),n})(),_j=(()=>{class n{constructor(e,i,a){this.globalService=e,this.commonService=i,this.examPageResultService=a}getExamStatisticObjs(e,i,a){return this.globalService.startIntervalFunc(e),this.getExamAndQuestionObjsForStatistic(e,i,a??0)}getExamAndQuestionObjsForStatistic(e,i,a){return new it.y(r=>{this.examPageResultService.apiExamPageResultGetObjV2Get(i,a).subscribe(s=>{if(1==s.success){var l=s.data?.serverSecond??0,c=s.data?.examObj;let _=s.data?.totalQuestion??c?.countQuestion;var d=s.data?.classroomWithAvatarAndStudentObjs??new Array,h=this.commonService.castJsonToClassObjs(yt.v,JSON.stringify(s.data?.questionObjs))??new Array;this.getAllExamMarksObjsForStatistic(e,[],i,"",x=>{if(1==x.success){var b=[],T={};x.resultObjs?.forEach(P=>{P.examResultObjs&&P.examResultObjs.length>0&&P.examResultObjs.forEach(U=>{b.push(U.id??0),T.hasOwnProperty(U.id??0)||(T[U.id??0]=U)})}),this.getAllAnswerObjsForStatistic(b,i,P=>{if(1==P.success){var U=[];d.forEach(W=>{W.classroomObj&&U.push(W.classroomObj)});var q=[];P.resultObjs?.forEach(W=>{if(W.id&&T.hasOwnProperty(W.id)){var G={...T[W.id],correctQuestionIds:W.correctQuestionIds,wrongQuestionIds:W.wrongQuestionIds,resultQuestionIds:W.resultQuestionIds};q.push(G)}}),h.length>0?(r.next({status:200,success:1,data:{examObj:c,classroomObjs:U,totalQuestion:_,classroomObjsWithStudentObjs:d,questionObjs:h,resultQuestionObjs:q,resultObjs:x.resultObjs??[],curServerTime:l,totalAttended:s.data?.totalAttended},message:"successful"}),r.complete()):(r.next({status:200,success:0,data:null,message:"lang_core_there_are_no_question_in_exam"}),r.complete())}else r.next({status:P.code,success:0,data:null,message:P.message??""}),r.complete()})}else r.next({status:x.code,success:0,data:null,message:x.message??""}),r.complete()})}else r.next({status:s.code,success:0,data:null,message:s.message??""}),r.complete()})})}getAllExamMarksObjsForStatistic(e,i,a,r,s){this.examPageResultService.apiExamPageResultGetObjsV2Get(a,"statistic",r).subscribe(l=>{1==l.success?(l.data?.objs&&i.push(...l.data.objs),l.data?.nextPage?this.globalService.isStopIntervalFunc(e)?s({code:200,resultObjs:i,success:1,message:"successful"}):setTimeout(()=>{this.getAllExamMarksObjsForStatistic(e,i,a,l.data?.nextPage??"",s)},300):s({code:200,resultObjs:i,success:1,message:"successful"})):s({code:l.code,resultObjs:[],success:0,message:l.message??""})})}getAllAnswerObjsForStatistic(e,i,a){this.examPageResultService.apiExamPageResultGetQuestionStatisticByExamResultIdsPost(i,{examResultIds:e}).subscribe(r=>{if(1==r.success){var s=[];r.data?.objs&&s.push(...r.data.objs),a({code:200,resultObjs:s,success:1,message:"successful"})}else a({code:r.code,resultObjs:void 0,success:0,message:r.message??""})})}findExamResultOfStudent(e,i){var a=[];return e.length>1?e.forEach(r=>{r.testStatus&&(r.studentId==i||null==r.studentId)&&a.push(r)}):1==e.length&&(e[0].studentId==i||null==e[0].studentId)&&a.push(e[0]),a}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(Wf.q),t.LFG(mi.z),t.LFG(Ke.DR))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class X0 extends yt.v{constructor(){super(...arguments),this.countTested=0,this.countTrue=0,this.countNotAnswer=0,this.countAttended=0,this.countFalse=0,this.studentWhoFalse=[],this.studentWhoNotAnswer=[]}}class t5{constructor(){this.listResult=[],this.listQuestions=[]}}var tx=M(20137);function fj(n,o){1&n&&(t.TgZ(0,"div",5)(1,"h3",6),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"div",7),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()()),2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,2,"lang_auto_bang_ty_le_dung_sai")," "),t.xp6(3),t.hij("",t.lcZ(6,4,"lang_testbank_statistical_cant_data_statistics"),"."))}function gj(n,o){1&n&&(t.TgZ(0,"div",8)(1,"h3",6),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"lang_auto_bang_ty_le_dung_sai")," "))}const xj=function(n){return{active:n}};function bj(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"li",17),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw(3);return t.KtG(s.handleChangeClassStatistic(r))}),t.TgZ(1,"button",18),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()}if(2&n){const e=o.$implicit,i=t.oxw(3);let a;t.xp6(1),t.Q6J("ngClass",t.VKq(4,xj,i.idClassObj==e.id)),t.xp6(1),t.hij(" ",t.lcZ(3,2,null!==(a=e.name)&&void 0!==a?a:"lang_auto_thi_sinh_tu_do")," ")}}function vj(n,o){if(1&n&&(t.TgZ(0,"ul",15),t.YNc(1,bj,4,6,"li",16),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.classroomObjs)}}function yj(n,o){1&n&&(t.TgZ(0,"div",19)(1,"span",20),t._UZ(2,"azt-loading-ui"),t.qZA()())}function wj(n,o){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"replace"),t.ALo(3,"number"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij("",t.Dn7(2,1,t.xi3(3,5,(e.countNotAnswer+e.countFalse)/e.countAttended*100,"1.0-2"),",","."),"%")}}function Cj(n,o){1&n&&(t.TgZ(0,"div"),t._uU(1,"0%"),t.qZA())}function Tj(n,o){if(1&n&&t._UZ(0,"img",62),2&n){const e=t.oxw().$implicit;t.Q6J("nameImages",e.nameImages)}}function kj(n,o){1&n&&(t.TgZ(0,"span",65),t._uU(1," , "),t.qZA())}function Aj(n,o){if(1&n&&(t.TgZ(0,"span",63),t._uU(1),t.ALo(2,"mytranslate"),t.qZA(),t.YNc(3,kj,2,0,"span",64)),2&n){const e=t.oxw(),i=e.$implicit,a=e.index,r=t.oxw(2).$implicit;let s;t.xp6(1),t.Oqu(null!==(s=i.fullName)&&void 0!==s?s:t.lcZ(2,2,"lang_auto_thi_sinh_thi_offline")+"_"+i.studentId),t.xp6(2),t.Q6J("ngIf",a!=r.studentWhoFalse.length-1)}}const Sj=function(){return{}};function Oj(n,o){if(1&n&&(t.ynx(0),t.YNc(1,Tj,1,1,"img",60),t.YNc(2,Aj,4,4,"ng-template",null,61,t.W1O),t.BQk()),2&n){const e=o.$implicit,i=t.MAs(3),a=t.oxw(5);let r;t.xp6(1),t.Q6J("ngIf",e.nameImages&&!a.commonService.isEmptyObj(null!==(r=e.nameImages)&&void 0!==r?r:t.DdM(2,Sj)))("ngIfElse",i)}}function Ej(n,o){if(1&n&&(t.ynx(0),t.YNc(1,Oj,4,3,"ng-container",43),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",e.studentWhoFalse)}}function Mj(n,o){1&n&&(t._uU(0),t.ALo(1,"mytranslate")),2&n&&t.hij(" ",t.lcZ(1,1,"lang_testbank_statistical_student_not_show_who_wrong")," ")}function Ij(n,o){if(1&n&&t._UZ(0,"img",62),2&n){const e=t.oxw().$implicit;t.Q6J("nameImages",e.nameImages)}}function Lj(n,o){1&n&&(t.TgZ(0,"span",65),t._uU(1," , "),t.qZA())}function Pj(n,o){if(1&n&&(t.TgZ(0,"span",63),t._uU(1),t.ALo(2,"mytranslate"),t.qZA(),t.YNc(3,Lj,2,0,"span",64)),2&n){const e=t.oxw(),i=e.$implicit,a=e.index,r=t.oxw(2).$implicit;let s;t.xp6(1),t.Oqu(null!==(s=i.fullName)&&void 0!==s?s:t.lcZ(2,2,"lang_auto_thi_sinh_thi_offline")+"_"+i.studentId),t.xp6(2),t.Q6J("ngIf",a!=r.studentWhoNotAnswer.length-1)}}function Nj(n,o){if(1&n&&(t.ynx(0),t.YNc(1,Ij,1,1,"img",60),t.YNc(2,Pj,4,4,"ng-template",null,61,t.W1O),t.BQk()),2&n){const e=o.$implicit,i=t.MAs(3),a=t.oxw(5);t.xp6(1),t.Q6J("ngIf",e.nameImages&&!a.commonService.isEmptyObj(e.nameImages))("ngIfElse",i)}}function Zj(n,o){if(1&n&&(t.ynx(0),t.YNc(1,Nj,4,2,"ng-container",43),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",e.studentWhoNotAnswer)}}function Dj(n,o){1&n&&(t._uU(0),t.ALo(1,"mytranslate")),2&n&&t.hij(" ",t.lcZ(1,1,"lang_testbank_statistical_student_not_show_who_wrong")," ")}function jj(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"td")(2,"div",25)(3,"span",49),t._uU(4),t.qZA()()(),t.TgZ(5,"td")(6,"div",50)(7,"span",49),t._uU(8),t.ALo(9,"mytranslate"),t.qZA(),t.TgZ(10,"button",51),t.NdJ("click",function(a){const r=t.CHM(e),s=r.$implicit,l=r.index,c=t.oxw(3),d=t.MAs(4);return t.KtG(c.onContextMenu(a,s,l,d))}),t.O4$(),t.TgZ(11,"svg",52),t._UZ(12,"path",53)(13,"circle",54),t.qZA()()()(),t.kcU(),t.TgZ(14,"td",55),t._uU(15),t.qZA(),t.TgZ(16,"td",55),t._uU(17),t.qZA(),t.TgZ(18,"td",55),t._uU(19),t.qZA(),t.TgZ(20,"td",55),t._uU(21),t.qZA(),t.TgZ(22,"td",55),t._uU(23),t.qZA(),t.TgZ(24,"td",55),t.YNc(25,wj,4,8,"div",56),t.YNc(26,Cj,2,0,"div",56),t.qZA(),t.TgZ(27,"td",55),t.YNc(28,Ej,2,1,"ng-container",57),t.YNc(29,Mj,2,3,"ng-template",null,58,t.W1O),t.qZA(),t.TgZ(31,"td",55),t.YNc(32,Zj,2,1,"ng-container",57),t.YNc(33,Dj,2,3,"ng-template",null,59,t.W1O),t.qZA()()}if(2&n){const e=o.$implicit,i=o.index,a=t.MAs(30),r=t.MAs(34);t.xp6(4),t.Oqu(i+1),t.xp6(4),t.AsE("",t.lcZ(9,14,"lang_testbank_statistical_question")," ",e.id,""),t.xp6(7),t.Oqu(e.countAttended),t.xp6(2),t.Oqu(e.countTested),t.xp6(2),t.Oqu(e.countNotAnswer),t.xp6(2),t.Oqu(e.countTrue),t.xp6(2),t.Oqu(e.countFalse),t.xp6(2),t.Q6J("ngIf",0!=e.countAttended),t.xp6(1),t.Q6J("ngIf",0==e.countAttended),t.xp6(2),t.Q6J("ngIf",e.studentWhoFalse.length<=50)("ngIfElse",a),t.xp6(4),t.Q6J("ngIf",e.studentWhoNotAnswer.length<=50)("ngIfElse",r)}}function qj(n,o){1&n&&(t.TgZ(0,"span",66),t._UZ(1,"azt-loading-ui"),t.qZA())}function Fj(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",21)(1,"table",22)(2,"thead",23)(3,"tr")(4,"th",24)(5,"div",25),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()(),t.TgZ(8,"th",26)(9,"div",27),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.toggleSortIDQuestion())}),t._uU(10),t.ALo(11,"mytranslate"),t.O4$(),t.TgZ(12,"svg",28),t._UZ(13,"polyline",29)(14,"line",30)(15,"polyline",31)(16,"line",32),t.qZA()()(),t.kcU(),t.TgZ(17,"th",33)(18,"div",34),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.toggleSortStudentCountAttended())}),t._uU(19),t.ALo(20,"mytranslate"),t.O4$(),t.TgZ(21,"svg",28),t._UZ(22,"polyline",29)(23,"line",30)(24,"polyline",31)(25,"line",32),t.qZA()()(),t.kcU(),t.TgZ(26,"th",33)(27,"div",35),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.toggleSortStudentCountTested())}),t._uU(28),t.ALo(29,"mytranslate"),t.O4$(),t.TgZ(30,"svg",28),t._UZ(31,"polyline",29)(32,"line",30)(33,"polyline",31)(34,"line",32),t.qZA()()(),t.kcU(),t.TgZ(35,"th",33)(36,"div",36),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.toggleSortStudentCountNotAnswer())}),t._uU(37),t.ALo(38,"mytranslate"),t.O4$(),t.TgZ(39,"svg",28),t._UZ(40,"polyline",29)(41,"line",30)(42,"polyline",31)(43,"line",32),t.qZA()()(),t.kcU(),t.TgZ(44,"th",33)(45,"div",37),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.toggleSortStudentCountTrue())}),t._uU(46),t.ALo(47,"mytranslate"),t.O4$(),t.TgZ(48,"svg",28),t._UZ(49,"polyline",29)(50,"line",30)(51,"polyline",31)(52,"line",32),t.qZA()()(),t.kcU(),t.TgZ(53,"th",33)(54,"div",38),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.toggleSortStudentCountFalse())}),t._uU(55),t.ALo(56,"mytranslate"),t.O4$(),t.TgZ(57,"svg",28),t._UZ(58,"polyline",29)(59,"line",30)(60,"polyline",31)(61,"line",32),t.qZA()()(),t.kcU(),t.TgZ(62,"th",39)(63,"div",40),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.toggleSortFalse())}),t._uU(64),t.ALo(65,"mytranslate"),t.O4$(),t.TgZ(66,"svg",28),t._UZ(67,"polyline",29)(68,"line",30)(69,"polyline",31)(70,"line",32),t.qZA()()(),t.kcU(),t.TgZ(71,"th",41)(72,"span"),t._uU(73),t.ALo(74,"mytranslate"),t.qZA()(),t.TgZ(75,"th",42)(76,"span"),t._uU(77),t.ALo(78,"mytranslate"),t.qZA()()()(),t.TgZ(79,"tbody"),t.YNc(80,jj,35,16,"tr",43),t.qZA()(),t.TgZ(81,"div",44)(82,"button",45),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);let r;return t.KtG(a.getDataForClassroomStatistical(null!==(r=a.idClassObj)&&void 0!==r?r:-1,!0))}),t.YNc(83,qj,2,0,"span",46),t._uU(84),t.ALo(85,"mytranslate"),t.O4$(),t.TgZ(86,"svg",47),t._UZ(87,"polyline",48),t.qZA()()()()}if(2&n){const e=t.oxw(2);t.xp6(6),t.hij(" ",t.lcZ(7,14,"lang_auto_STT")," "),t.xp6(4),t.hij(" ",t.lcZ(11,16,"lang_testbank_statistical_questions")," "),t.xp6(9),t.hij(" ",t.lcZ(20,18,"lang_testbank_statistical_total_number_exam")," "),t.xp6(9),t.hij(" ",t.lcZ(29,20,"lang_testbank_statistical_number_student_did")," "),t.xp6(9),t.hij(" ",t.lcZ(38,22,"lang_testbank_statistical_number_student_do_not")," "),t.xp6(9),t.hij(" ",t.lcZ(47,24,"lang_testbank_statistical_number_student_right")," "),t.xp6(9),t.hij(" ",t.lcZ(56,26,"lang_testbank_statistical_number_student_wrong")," "),t.xp6(9),t.hij(" ",t.lcZ(65,28,"lang_testbank_statistical_student_not_done")," "),t.xp6(9),t.hij(" ",t.lcZ(74,30,"lang_testbank_statistical_student_who_wrong")," "),t.xp6(4),t.hij(" ",t.lcZ(78,32,"lang_testbank_statistical_student_who_not_answer")," "),t.xp6(3),t.Q6J("ngForOf",e.listQuestion),t.xp6(2),t.Q6J("disabled",e.isLoadMore||e.countTotalQuestion<50*e.page),t.xp6(1),t.Q6J("ngIf",e.isLoadMore),t.xp6(1),t.hij(" ",t.lcZ(85,34,"lang_auto_xem_them"),"\xa0 ")}}function Qj(n,o){if(1&n&&(t.TgZ(0,"div",9)(1,"div",10),t.YNc(2,vj,2,1,"ul",11),t.TgZ(3,"div",12),t.YNc(4,yj,3,0,"div",13),t.YNc(5,Fj,88,36,"div",14),t.qZA()()()),2&n){const e=t.oxw();t.xp6(2),t.Q6J("ngIf",e.classroomObjs&&e.classroomObjs.length>0),t.xp6(2),t.Q6J("ngIf",e.changeClassLoading),t.xp6(1),t.Q6J("ngIf",!e.changeClassLoading)}}function Rj(n,o){if(1&n&&t._UZ(0,"azt-question-standalone-for-preview",69),2&n){const e=t.oxw().$implicit,i=t.oxw();t.Q6J("hideQuestionLabel",!0)("follower",i.followerRenderQuest)("examObj",i.examObj)("questionObj",e.questionObj)("curQuestionIndex",e.questionIndex)}}function Uj(n,o){if(1&n&&(t.TgZ(0,"div",67),t.YNc(1,Rj,1,5,"azt-question-standalone-for-preview",68),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.examObj)}}let Bj=(()=>{class n extends St.Q{onContextMenu(e,i,a,r){e&&(this.contextMenuService.show(r,{value:{questionObj:i,questionIndex:a},x:e?.clientX+15,y:e?.clientY+15}),e?.preventDefault(),e?.stopPropagation())}countEssayQuestion(){let e=0;return this.questionObjs.forEach(i=>{this.answerTypeService.isEssayAnswer(i)&&e++}),e}readyData(e){this.listQuestion=e,this.isCheckData=0==this.listQuestion.length,this.followerRenderQuest.setNumQuest(this.listQuestion.length),this.cloneListQuestion=this.commonService.myClone(this.listQuestion),this.isSortFalse&&(this.listQuestion=this.listQuestion.sort((i,a)=>i.countAttended>0&&a.countAttended>0?(a.countNotAnswer+a.countFalse)/a.countAttended*100-(i.countNotAnswer+i.countFalse)/i.countAttended*100:0)),this.changeClassLoading=!1,this.isLoadMore=!1,this.doneLoadingEmit.emit(!0),this.successStatusObj()}getListQuestionStatistic(){if(this.dataStatistical){let e=this.dataStatistical;this.examObj.id=e.id,this.examObj.name=e.name??"";let i=this.commonService.castJsonToClassObjs(t5,JSON.stringify(e.classrooms));this.classroomObjs=i??[],this.getDataForClassroomStatistical(this.idClassObj?this.idClassObj:this.classroomObjs[0].id??-1,!1)}else this.doneLoadingEmit.emit(!1)}getDataForClassroomStatistical(e,i){i?(this.isLoadMore=!0,this.page+=1):(this.initStatusObj(),this.countTotalQuestion=0),this.idClassObj=e,this.examPageResultService.apiExamPageResultListQuestionStatisticGet(this.examObj?.id??0,e,this.page,50).subscribe(a=>{if(a.success&&a.data){let r=[];a.data.objs?.forEach((s,l)=>{let c=this.commonService.castJsonToClassObj(X0,JSON.stringify(s.question))??new X0;c.countAttended=s.totalTest??0,c.countTrue=s.totalCorrect??0,c.countNotAnswer=s.totalNotAnswered??0,c.countTested=s.totalAnswered??0,c.countFalse=s.totalWrong??0,c.countTrue=s.totalCorrect??0,c.indexQuestion=l,c.studentWhoFalse=s.wrongStudents??[],c.studentWhoNotAnswer=s.notAnsweredStudents??[],this.questionObjs.push(c)}),this.docxService.replaceCanvasBackgroundTS(this.questionObjs),this.questionObjs.forEach(s=>{(this.answerTypeService.isOneChoiceAnswer(s)||this.answerTypeService.isFillAnswer(s)||this.answerTypeService.isTrueFalseAnswer(s))&&r.push(s),this.countTotalQuestion++}),(!a.data.objs||!a.data.objs.length)&&(this.countTotalQuestion=50*this.page-1),this.readyData(r)}else this.doneLoadingEmit.emit(!1),this.isLoadMore=!1,this.showErrorSnack(a.message??"")})}handleChangeClassStatistic(e){this.idClassObj=e.id,this.page=1,this.changeClassLoading=!0,this.questionObjs=[],this.getDataForClassroomStatistical(this.idClassObj??-1,!1)}toggleSortFalse(){this.checkSortType.ratioTrueFalse=!this.checkSortType.ratioTrueFalse,this.checkSortType.ratioTrueFalse?(this.isSortFalse=!0,this.listQuestion=this.listQuestion.sort((e,i)=>(i.countAttended>0?(i.countNotAnswer+i.countFalse)/i.countAttended*100:0)-(e.countAttended>0?(e.countNotAnswer+e.countFalse)/e.countAttended*100:0))):this.listQuestion=this.listQuestion.sort((e,i)=>(i.countAttended>0?(i.countNotAnswer+i.countFalse)/i.countAttended*100:0)-(e.countAttended>0?(e.countNotAnswer+e.countFalse)/e.countAttended*100:0)).reverse()}toggleSortIndexQuestion(){this.checkSortType.numberIndex=!this.checkSortType.numberIndex,this.listQuestion=this.checkSortType.numberIndex?this.commonService.myClone(this.cloneListQuestion):this.commonService.myClone(this.cloneListQuestion).reverse()}toggleSortIDQuestion(){this.checkSortType.idQuestion=!this.checkSortType.idQuestion,this.checkSortType.idQuestion?this.listQuestion.sort((e,i)=>(e.id??0)-(i.id??0)):this.listQuestion.sort((e,i)=>(e.id??0)-(i.id??0)).reverse()}toggleSortStudentCountAttended(){this.checkSortType.totalStudentExam=!this.checkSortType.totalStudentExam,this.checkSortType.totalStudentExam?this.listQuestion.sort((e,i)=>e.countAttended-i.countAttended):this.listQuestion.sort((e,i)=>e.countAttended-i.countAttended).reverse()}toggleSortStudentCountTested(){this.checkSortType.countTested=!this.checkSortType.countTested,this.checkSortType.countTested?this.listQuestion.sort((e,i)=>e.countTested-i.countTested):this.listQuestion.sort((e,i)=>e.countTested-i.countTested).reverse()}toggleSortStudentCountNotAnswer(){this.checkSortType.countNotAnswer=!this.checkSortType.countNotAnswer,this.checkSortType.countNotAnswer?this.listQuestion.sort((e,i)=>e.countNotAnswer-i.countNotAnswer):this.listQuestion.sort((e,i)=>e.countNotAnswer-i.countNotAnswer).reverse()}toggleSortStudentCountTrue(){this.checkSortType.countTrue=!this.checkSortType.countTrue,this.checkSortType.countTrue?this.listQuestion.sort((e,i)=>e.countTrue-i.countTrue):this.listQuestion.sort((e,i)=>e.countTrue-i.countTrue).reverse()}toggleSortStudentCountFalse(){this.checkSortType.countFalse=!this.checkSortType.countFalse,this.checkSortType.countFalse?this.listQuestion.sort((e,i)=>e.countFalse-i.countFalse):this.listQuestion.sort((e,i)=>e.countFalse-i.countFalse).reverse()}ngOnChanges(){this.dataStatistical&&!this.commonService.isEmptyObj(this.dataStatistical)&&this.getListQuestionStatistic()}ngOnInit(){this.dataStatistical&&!this.commonService.isEmptyObj(this.dataStatistical)&&this.getListQuestionStatistic(),super.ngOnInit()}constructor(e,i,a,r){super(),this.contextMenuService=e,this.docxService=i,this.answerTypeService=a,this.examPageResultService=r,this.viewType=-1,this.doneLoadingEmit=new t.vpe,this.idClassObj=0,this.listQuestion=[],this.examObj={id:0,name:"",countQuestion:0,showFrontend:0,editable:!1,permissionObj:{},allowStudentView:!1},this.isCheckData=!1,this.changeClassLoading=!1,this.isMobile=this.commonService.isMobileOrTable(),this.isSortFalse=!1,this.cloneListQuestion=[],this.followerRenderQuest=new u.p,this.classroomObjs=[],this.questionObjs=[],this.checkSortType={ratioTrueFalse:!1,numberIndex:!0,totalStudentExam:!1,countTested:!1,countFalse:!1,countNotAnswer:!1,countTrue:!1,idQuestion:!1},this.countTotalQuestion=0,this.page=1,this.isLoadMore=!1}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(m.Lk),t.Y36(tx.n),t.Y36(hr.i),t.Y36(Ke.DR))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-list-question-new"]],inputs:{viewType:"viewType",dataStatistical:"dataStatistical"},outputs:{doneLoadingEmit:"doneLoadingEmit"},features:[t.qOj,t.TTD],decls:6,vars:3,consts:[["class","intro-y block items-center",4,"ngIf"],["class","intro-y block sm:flex items-center",4,"ngIf"],["class","report-box intro-x mt-5",4,"ngIf"],["popUp",""],["contextMenuItem",""],[1,"intro-y","block","items-center"],[1,"text-lg","font-medium","truncate","mr-5"],[1,"p-3","m-3","text-center","alert","text-slate-500","font-medium"],[1,"intro-y","block","sm:flex","items-center"],[1,"report-box","intro-x","mt-5"],[1,"box","p-5"],["class","nav nav-link-tabs","style","overflow-x: auto","role","tablist",4,"ngIf"],[1,"tab-content","mt-5","overflow-x-auto","overflow-y-hidden"],["class","flex justify-center pb-5",4,"ngIf"],["id","example-tab-5","class","tab-pane leading-relaxed active","role","tabpanel","aria-labelledby","example-5-tab",4,"ngIf"],["role","tablist",1,"nav","nav-link-tabs",2,"overflow-x","auto"],["azt-track-service","list-question-AxJI5shrt6","id","example-5-tab","class","nav-item flex-1 dz-clickable","role","presentation",3,"click",4,"ngFor","ngForOf"],["azt-track-service","list-question-AxJI5shrt6","id","example-5-tab","role","presentation",1,"nav-item","flex-1","dz-clickable",3,"click"],["data-tw-toggle","pill","data-tw-target","#example-tab-5","type","button","role","tab","aria-controls","example-tab-5","aria-selected","true",1,"nav-link","w-full","py-2",3,"ngClass"],[1,"flex","justify-center","pb-5"],[1,"w-4","h-4","inline-block"],["id","example-tab-5","role","tabpanel","aria-labelledby","example-5-tab",1,"tab-pane","leading-relaxed","active"],[1,"intro-x","table","table-bordered"],[1,"bg-slate-100","dark:bg-darkmode-400"],[1,"whitespace-nowrap",2,"padding","10px","width","20px"],[1,"text-center"],[1,"whitespace-nowrap",2,"padding","10px","width","120px"],["azt-track-service","list-question-kkZu13iI5D",1,"flex","items-center","dz-clickable",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-5","h-5","ml-1","inline-block","flex-none"],["points","11 17 7 21 3 17"],["x1","7","y1","21","x2","7","y2","9"],["points","21 7 17 3 13 7"],["x1","17","y1","15","x2","17","y2","3"],[1,"w-30",2,"padding","10px","width","110px"],["azt-track-service","list-question-xrD2etExg-",1,"flex","items-center","dz-clickable",3,"click"],["azt-track-service","list-question-y6cuGZ-SC8",1,"flex","items-center","dz-clickable",3,"click"],["azt-track-service","list-question-seyRna-GRR",1,"flex","items-center","dz-clickable",3,"click"],["azt-track-service","list-question-LND-UYgzgn",1,"flex","items-center","clickable",3,"click"],["azt-track-service","list-question-kM4o8UGqyP",1,"flex","items-center","clickable",3,"click"],[1,"w-30",2,"padding","10px","width","150px"],["azt-track-service","list-question-X1HptCCAQA",1,"flex","items-center","clickable",3,"click"],[1,"whitespace-nowrap",2,"text-align","center","vertical-align","middle","width","20.5vw"],[1,"whitespace-nowrap",2,"text-align","center","vertical-align","middle","width","18.5vw"],[4,"ngFor","ngForOf"],[1,"text-center","mt-3"],["azt-track-service","list-question-xwuEU3k_LH","mat-button","",1,"btn","btn-outline-secondary","btn-transparent",3,"disabled","click"],["class","w-4 h-4 inline-block mr-2",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["points","6 9 12 15 18 9"],[1,"text-md"],[1,"flex","items-center","relative"],["azt-track-service","list-question-1b7d1GbqkQ",1,"btn-transparent","ml-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-5","h-5"],["d","M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"],["cx","12","cy","12","r","3"],[2,"text-align","center","vertical-align","middle"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["notShowWhoFalse",""],["notShowWhoNotAnswer",""],["appDrawNameImage","","class","img-fluid","loading","lazy","class","img-name-fluid","style","margin: 1px auto; max-width: 100%; height: auto; display: block",3,"nameImages",4,"ngIf","ngIfElse"],["showName",""],["appDrawNameImage","","loading","lazy",1,"img-name-fluid",2,"margin","1px auto","max-width","100%","height","auto","display","block",3,"nameImages"],[1,"mb-0"],["class","mr-1",4,"ngIf"],[1,"mr-1"],[1,"w-4","h-4","inline-block","mr-2"],[1,"box",2,"margin-right","10%"],["style","margin-bottom: 0px",3,"hideQuestionLabel","follower","examObj","questionObj","curQuestionIndex",4,"ngIf"],[2,"margin-bottom","0px",3,"hideQuestionLabel","follower","examObj","questionObj","curQuestionIndex"]],template:function(e,i){1&e&&(t.YNc(0,fj,7,6,"div",0),t.YNc(1,gj,4,3,"div",1),t.YNc(2,Qj,6,3,"div",2),t.TgZ(3,"context-menu",null,3),t.YNc(5,Uj,2,1,"ng-template",4),t.qZA()),2&e&&(t.Q6J("ngIf",1==i.isCheckData),t.xp6(1),t.Q6J("ngIf",1!=i.isCheckData),t.xp6(1),t.Q6J("ngIf",1!=i.isCheckData))},dependencies:[D.mk,D.sg,D.O5,vr.lW,e4.L,rt.A,oi.n,m.GI,m.n5,D.JJ,jt.JV,jt.qY],styles:[".table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center;vertical-align:middle}"]}),n})();function zj(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"li",9)(1,"button",10),t.NdJ("click",function(){const r=t.CHM(e).index,s=t.oxw();return t.KtG(s.chooseTapClass(r))}),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()}if(2&n){const e=o.$implicit,i=o.index,a=t.oxw();t.xp6(1),t.Gre("nav-link w-full py-2 ",a.indexClassInArray==i?"active":"",""),t.xp6(1),t.hij(" ",t.lcZ(3,4,null==e.classObj?null:e.classObj.name)," ")}}function Jj(n,o){1&n&&(t.TgZ(0,"div",11)(1,"span",12),t._UZ(2,"azt-loading-ui"),t.qZA(),t.TgZ(3,"span",13),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()()),2&n&&(t.xp6(4),t.hij("",t.lcZ(5,1,"lang_cms_common_loading"),"..."))}function Hj(n,o){1&n&&(t.TgZ(0,"span",26),t._UZ(1,"azt-loading-ui"),t.qZA())}const e5=function(n){return{"rotated-icon":n}};function Gj(n,o){if(1&n&&(t.O4$(),t.TgZ(0,"svg",27),t._UZ(1,"polyline",28)(2,"line",29)(3,"polyline",30)(4,"line",31),t.qZA()),2&n){const e=t.oxw(2);t.Q6J("ngClass",t.VKq(1,e5,2==e.checkSortObj.fullName))}}function $j(n,o){1&n&&(t.TgZ(0,"span",26),t._UZ(1,"azt-loading-ui"),t.qZA())}function Yj(n,o){if(1&n&&(t.O4$(),t.TgZ(0,"svg",27),t._UZ(1,"polyline",28)(2,"line",29)(3,"polyline",30)(4,"line",31),t.qZA()),2&n){const e=t.oxw(2);t.Q6J("ngClass",t.VKq(1,e5,2==e.checkSortObj.point))}}function Kj(n,o){1&n&&(t.TgZ(0,"tbody")(1,"tr")(2,"td",32)(3,"p",33),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()()()()),2&n&&(t.xp6(4),t.hij("",t.lcZ(5,1,"lang_testbank_statistical_cant_had_student"),"."))}function Wj(n,o){if(1&n&&(t.TgZ(0,"td",38),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.fullName)}}function Vj(n,o){if(1&n&&(t.TgZ(0,"td",38),t._UZ(1,"img",42),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("nameImages",e.nameImages)}}function Xj(n,o){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"formatOnlyDateByUserUnitPipe"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,e.birthday))}}function tq(n,o){1&n&&(t._uU(0),t.ALo(1,"mytranslate")),2&n&&t.hij(" ",t.lcZ(1,1,"lang_testbank_statistical_student_cant_enter_birthday"),". ")}function eq(n,o){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_statistical_not_mark")," "))}function nq(n,o){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_statistical_exam_progress")," "))}function iq(n,o){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_statistical_exam_not_submit")," "))}function oq(n,o){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_statistical_not_exem_yet")," "))}function aq(n,o){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.mark," ")}}function rq(n,o){if(1&n&&(t.TgZ(0,"tr")(1,"td",38),t._uU(2),t.qZA(),t.YNc(3,Wj,2,1,"td",39),t.YNc(4,Vj,2,1,"td",39),t.TgZ(5,"td",38),t.YNc(6,Xj,3,3,"div",23),t.YNc(7,tq,2,3,"ng-template",null,40,t.W1O),t.qZA(),t.TgZ(9,"td",41),t.YNc(10,eq,3,3,"div",34),t.YNc(11,nq,3,3,"div",34),t.YNc(12,iq,3,3,"div",34),t.YNc(13,oq,3,3,"div",34),t.YNc(14,aq,2,1,"div",34),t.qZA()()),2&n){const e=o.$implicit,i=o.index,a=t.MAs(8);t.xp6(2),t.Oqu(i+1),t.xp6(1),t.Q6J("ngIf",!e.nameImages||!e.nameImages.url),t.xp6(1),t.Q6J("ngIf",e.nameImages&&e.nameImages.url),t.xp6(2),t.Q6J("ngIf",null!=e.birthday)("ngIfElse",a),t.xp6(4),t.Q6J("ngIf",e.isNotMarked),t.xp6(1),t.Q6J("ngIf",e.isOnTest),t.xp6(1),t.Q6J("ngIf",e.isNotSubmit),t.xp6(1),t.Q6J("ngIf",e.isNotTested),t.xp6(1),t.Q6J("ngIf",e.isMarked)}}function sq(n,o){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"replace"),t.ALo(3,"number"),t.qZA()),2&n){const e=t.oxw(4);let i;t.xp6(1),t.hij(" ",t.Dn7(2,1,t.xi3(3,5,null!==(i=e.statisticObj[e.indexClassInArray].avgMark)&&void 0!==i?i:0,"1.0-2"),",",".")," ")}}function lq(n,o){if(1&n&&(t.TgZ(0,"tbody"),t.YNc(1,rq,15,10,"tr",35),t.TgZ(2,"tr",36)(3,"td",37),t._uU(4),t.ALo(5,"mytranslate"),t.qZA(),t.TgZ(6,"td",38),t.YNc(7,sq,4,8,"div",34),t.qZA()()()),2&n){const e=t.oxw(3);t.xp6(1),t.Q6J("ngForOf",null==e.statisticObj[e.indexClassInArray]?null:e.statisticObj[e.indexClassInArray].studentsWithMark),t.xp6(3),t.Oqu(t.lcZ(5,3,"lang_testbank_statistical_avg_max_point")),t.xp6(3),t.Q6J("ngIf",e.statisticObj.length>0&&e.statisticObj[e.indexClassInArray])}}function cq(n,o){if(1&n&&t.YNc(0,lq,8,5,"tbody",34),2&n){const e=t.oxw(2);t.Q6J("ngIf",e.indexClassInArray>-1)}}function uq(n,o){1&n&&(t.TgZ(0,"span",48),t._UZ(1,"azt-loading-ui"),t.qZA())}function dq(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",43)(1,"button",44),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.showMore(a.indexClassInArray))}),t.YNc(2,uq,2,0,"span",45),t._uU(3),t.ALo(4,"mytranslate"),t.O4$(),t.TgZ(5,"svg",46),t._UZ(6,"polyline",47),t.qZA()()()}if(2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("disabled",e.loadingChangeClassroom||!e.enableNextPage),t.xp6(1),t.Q6J("ngIf",e.loadingChangeClassroom),t.xp6(1),t.hij(" ",t.lcZ(4,3,"lang_auto_xem_them"),"\xa0 ")}}function mq(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",14)(1,"table",15)(2,"thead",16)(3,"tr")(4,"th",17)(5,"div",18),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()(),t.TgZ(8,"th",17)(9,"div",19),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.sortFullNameStudent(a.indexClassInArray))}),t._uU(10),t.ALo(11,"mytranslate"),t.YNc(12,Hj,2,0,"span",20),t.YNc(13,Gj,5,3,"svg",21),t.qZA()(),t.TgZ(14,"th",17)(15,"div",18),t._uU(16),t.ALo(17,"mytranslate"),t.qZA()(),t.TgZ(18,"th",17)(19,"div",22),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.sortStudentByPoint(a.indexClassInArray))}),t._uU(20),t.ALo(21,"mytranslate"),t.YNc(22,$j,2,0,"span",20),t.YNc(23,Yj,5,3,"svg",21),t.qZA()()()(),t.YNc(24,Kj,6,3,"tbody",23),t.YNc(25,cq,1,1,"ng-template",null,24,t.W1O),t.qZA(),t.YNc(27,dq,7,5,"div",25),t.qZA()}if(2&n){const e=t.MAs(26),i=t.oxw();t.xp6(6),t.hij(" ",t.lcZ(7,11,"lang_auto_STT")," "),t.xp6(4),t.hij(" ",t.lcZ(11,13,"lang_first_and_last_name")," "),t.xp6(2),t.Q6J("ngIf",i.loadingOrder),t.xp6(1),t.Q6J("ngIf",!i.loadingOrder),t.xp6(3),t.hij(" ",t.lcZ(17,15,"lang_birthday")," "),t.xp6(4),t.hij(" ",t.lcZ(21,17,"lang_point")," "),t.xp6(2),t.Q6J("ngIf",i.loadingOrder),t.xp6(1),t.Q6J("ngIf",!i.loadingOrder),t.xp6(1),t.Q6J("ngIf",i.indexClassInArray>-1&&i.statisticObj.length>0&&0==(null==i.statisticObj[i.indexClassInArray].studentsWithMark?null:i.statisticObj[i.indexClassInArray].studentsWithMark.length)||-1==i.indexClassInArray&&0==i.freeStudentList.length)("ngIfElse",e),t.xp6(3),t.Q6J("ngIf",i.getStudentLength())}}let hq=(()=>{class n extends St.Q{chooseTapClass(e,i,a,r){this.indexClassInArray!=e&&(this.page=1,this.indexClassInArray=e),i&&(this.loadingChangeClassroom=!0,this.page++),a&&(this.loadingOrder=!0),this.statisticObj[e]&&this.statisticObj[e].classObj?.id?this.examPageResultService.apiExamPageResultListTranscriptsGet(this.examObj?.id??0,this.statisticObj[e].classObj?.id,void 0,void 0,1,50*this.page,a??void 0,r??void 0).subscribe(s=>{s.success&&s.data?(this.statisticObj[e].studentsWithMark=this.convertStudentResults(s.data.obj?.results??[]),this.statisticObj[e].avgMark=s.data.obj?.averageMark??0,this.enableNextPage=s.data.obj?.next??!1,this.readyData(e,!!a),a&&(this.loadingOrder=!1),i?this.loadingChangeClassroom=!1:this.doneLoadingEmit.emit(!0)):(a&&(this.loadingOrder=!1),i?this.loadingChangeClassroom=!1:this.doneLoadingEmit.emit(!1))}):i||a?this.loadingChangeClassroom=!1:this.doneLoadingEmit.emit(!1)}showMore(e){this.checkSortObj.fullName?this.chooseTapClass(e,!0,"fullname",1==this.checkSortObj.fullName?"asc":"desc"):this.checkSortObj.point?this.chooseTapClass(e,!0,"mark",1==this.checkSortObj.point?"asc":"desc"):this.chooseTapClass(e,!0)}convertStudentResults(e){let i=[];return e.forEach(a=>{let r={id:a.studentId?.toString(),resultId:a.id,userId:a.userId,fullName:a.attendeeName,nameImages:a.attendeeNameImage,birthday:a.attendeeBirthDay,mark:a.mark,startedTest:a.startedTest,confirmedAt:a.confirmedAt,status:a.testStatus,createdAt:a.createdAt};i.push(r)}),i}getStudentLength(){return this.statisticObj[this.indexClassInArray]&&this.statisticObj[this.indexClassInArray].studentsWithMark?this.statisticObj[this.indexClassInArray].studentsWithMark?.length??0:0}getDataStatistic(){if(this.initStatusObj(),this.dataStatistical){let e=this.dataStatistical;this.examObj.id=e.id,this.examObj.name=e.name??"",e.classrooms?(e.classrooms.forEach(i=>{let a={classObj:{...i,teacherId:0,countStudents:0,showAddStudent:0,grade:0,name:i.name??"lang_auto_tu_do"},studentsWithMark:[]};this.statisticObj.push(a)}),this.chooseTapClass(0)):this.doneLoadingEmit.emit(!1)}else this.doneLoadingEmit.emit(!1)}readyData(e,i){let a=this.commonService.myClone(this.statisticObj[e].studentsWithMark)??[];if(this.statisticObj[e].studentsWithMark=this.checkStatusStudent(this.statisticObj[e].classObj&&0==this.statisticObj[e].classObj?.sortType?i?a:this.sortService.sortFirstNameStudents(a):i?a:this.sortService.sortArrayByMultipleObjectKeyAsc(a,"pos","id")),this.statisticObj[e].studentsWithMark)for(let r=0;r<(this.statisticObj[e].studentsWithMark?.length??0);r++)this.statisticObj[e].studentsWithMark[r].isMarked||(this.statisticObj[e].studentsWithMark[r].mark=-1);this.doneLoadingEmit.emit(!0),this.successStatusObj()}checkStatusStudent(e){var i=[];return e.forEach(a=>{a.confirmedAt&&""!=a.confirmedAt&&a.resultId&&a.resultId>0?a.isMarked=!0:a.resultId&&a.resultId>0&&(!a.confirmedAt||""==a.confirmedAt)?a.isNotMarked=!0:a.resultId&&0!=a.resultId||!a.startedTest||""==a.startedTest||0!=a.status?a.resultId&&0!=a.resultId||!a.startedTest||""==a.startedTest||-1!=a.status?null==a.startedTest&&(a.isNotTested=!0):a.isNotSubmit=!0:a.isOnTest=!0,i.push(a)}),i}calcAvgClassroomMark(e){var i=0,a=0;return e.forEach(r=>{r.isMarked&&(i++,a+=r.mark??0)}),i>0?(a/i).toFixed(2):0}goToStudentList(e){let i=`/admin/testbank/statistic/${this.examObj?.categoryId??0}/${this.examObj?.id}`;this.commonService.myNavigationWithQueryString(`/admin/student/classroom-details/${e.classObj?.id}/0`,"?backto="+encodeURIComponent(i))}sortFullNameStudent(e){this.checkSortObj.fullName=0==this.checkSortObj.fullName||2==this.checkSortObj.fullName?1:2,this.checkSortObj.fullName?(this.checkSortObj.point=0,this.chooseTapClass(e,!1,"fullname",1==this.checkSortObj.fullName?"asc":"desc")):this.chooseTapClass(e,!1)}sortStudentByPoint(e){this.checkSortObj.point=0==this.checkSortObj.point||2==this.checkSortObj.point?1:2,this.checkSortObj.point?(this.checkSortObj.fullName=0,this.chooseTapClass(e,!1,"mark",1==this.checkSortObj.point?"asc":"desc")):this.chooseTapClass(e,!1)}_sortByPoint(e){return e.sort((i,a)=>Number(i.mark)-Number(a.mark)),e}constructor(e,i,a){super(),this.sortService=e,this.globalService=i,this.examPageResultService=a,this.viewType=-1,this.doneLoadingEmit=new t.vpe,this.examId=0,this.indexClassInArray=0,this.statisticObj=[],this.statisticObjClone=[],this.isCheckData=!1,this.hasEssayQuestion=!1,this.examObj={id:0,name:"",countQuestion:0,showFrontend:0,editable:!1,permissionObj:{},allowStudentView:!1},this.freeStudentList=[],this.checkSortObj={numberIndex:!1,fullName:0,point:0},this.loadingChangeClassroom=!1,this.loadingOrder=!1,this.page=1,this.enableNextPage=!0}ngOnChanges(){this.dataStatistical&&!this.commonService.isEmptyObj(this.dataStatistical)&&this.getDataStatistic()}ngOnInit(){this.dataStatistical&&!this.commonService.isEmptyObj(this.dataStatistical)&&this.getDataStatistic(),super.ngOnInit()}ngOnDestroy(){this.globalService.stopIntervalFunc("statistic_score"),super.ngOnDestroy()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Kf.V),t.Y36(Wf.q),t.Y36(Ke.DR))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-table-score-new"]],inputs:{viewType:"viewType",dataStatistical:"dataStatistical"},outputs:{doneLoadingEmit:"doneLoadingEmit"},features:[t.qOj,t.TTD],decls:11,vars:6,consts:[[1,"intro-y","block","sm:flex","items-center"],[1,"text-lg","font-medium","truncate","mr-5"],[1,"report-box","intro-x","mt-5"],[1,"box","p-5"],["role","tablist",1,"nav","nav-link-tabs",2,"overflow-x","auto"],["id","example-5-tab","class","nav-item flex-1","role","presentation",4,"ngFor","ngForOf"],[1,"tab-content","overflow-x-auto","mt-5",2,"overflow-y","hidden"],["class","flex justify-center pb-5",4,"ngIf"],["id","example-tab-5","class","tab-pane leading-relaxed active","role","tabpanel","aria-labelledby","example-5-tab",4,"ngIf"],["id","example-5-tab","role","presentation",1,"nav-item","flex-1"],["azt-track-service","table-score-ZNru2_q8UiD","data-tw-toggle","pill","data-tw-target","#example-tab-5","type","button","role","tab","aria-controls","example-tab-5","aria-selected","true",3,"click"],[1,"flex","justify-center","pb-5"],[1,"w-4","h-4","inline-block"],[1,"sr-only","ml-2"],["id","example-tab-5","role","tabpanel","aria-labelledby","example-5-tab",1,"tab-pane","leading-relaxed","active"],[1,"intro-x","table","table-bordered"],[1,"bg-slate-100","dark:bg-darkmode-400"],[1,"whitespace-nowrap"],[1,"flex","items-center","justify-center"],["azt-track-service","table-score-1KLvUodz_gh",1,"flex","items-center","justify-center",3,"click"],["class","w-5 h-5 ml-1",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","class","w-5 h-5 ml-1 inline-block","style","cursor: pointer","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",3,"ngClass",4,"ngIf"],["azt-track-service","table-score-ItfC-iAX4HX",1,"flex","items-center","justify-center",3,"click"],[4,"ngIf","ngIfElse"],["table",""],["class","text-center mt-3",4,"ngIf"],[1,"w-5","h-5","ml-1"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-5","h-5","ml-1","inline-block",2,"cursor","pointer",3,"ngClass"],["points","11 17 7 21 3 17"],["x1","7","y1","21","x2","7","y2","9"],["points","21 7 17 3 13 7"],["x1","17","y1","15","x2","17","y2","3"],["colspan","4"],[1,"text-center","font-weight-bold","p-0","m-0"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"font-medium","text-center"],["colspan","3",2,"text-align","center","vertical-align","middle"],[2,"text-align","center","vertical-align","middle"],["style","text-align: center; vertical-align: middle",4,"ngIf"],["birthday",""],[1,"text-center",2,"text-align","center","vertical-align","middle"],["appDrawNameImage","","loading","lazy",1,"img-name-fluid",3,"nameImages"],[1,"text-center","mt-3"],["azt-track-service","table-score-RqXWm0zMM","mat-button","",1,"btn","btn-outline-secondary","btn-transparent",3,"disabled","click"],["class","w-4 h-4 inline-block mr-2",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["points","6 9 12 15 18 9"],[1,"w-4","h-4","inline-block","mr-2"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"h3",1),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()(),t.TgZ(4,"div",2)(5,"div",3)(6,"ul",4),t.YNc(7,zj,4,6,"li",5),t.qZA(),t.TgZ(8,"div",6),t.YNc(9,Jj,6,3,"div",7),t.YNc(10,mq,28,19,"div",8),t.qZA()()()),2&e&&(t.xp6(2),t.hij(" ",t.lcZ(3,4,"lang_auto_bang_diem")," "),t.xp6(5),t.Q6J("ngForOf",i.statisticObj),t.xp6(2),t.Q6J("ngIf",i.loadingChangeClassroom),t.xp6(1),t.Q6J("ngIf",!i.loadingChangeClassroom))},dependencies:[D.mk,D.sg,D.O5,vr.lW,e4.L,oi.n,D.JJ,jt.JV,jt.qY,jt.YK],styles:["td[_ngcontent-%COMP%]{vertical-align:middle!important}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:center;vertical-align:middle!important}.link-stu[_ngcontent-%COMP%]:hover{color:#007bff}.block-center[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.sort-icon[_ngcontent-%COMP%]{margin-top:4px;margin-left:4px}th[_ngcontent-%COMP%]{background:#2361ae;color:#fff;font-weight:400}.text-weight-500[_ngcontent-%COMP%]{font-weight:500}"]}),n})();var $e=M(70937),pq=M(72643);function _q(n,o){1&n&&(t.O4$(),t.TgZ(0,"svg",19),t._UZ(1,"path",20)(2,"polyline",21)(3,"path",22)(4,"path",23)(5,"path",24)(6,"path",25),t.qZA())}function fq(n,o){1&n&&(t.TgZ(0,"span",26),t._UZ(1,"azt-loading-ui"),t.qZA())}function gq(n,o){1&n&&(t.TgZ(0,"div",27),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_testbank_statistical_export_file_excel_success")))}function xq(n,o){1&n&&(t.TgZ(0,"div",28),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_testbank_statistical_export_file_excel_error")))}let bq=(()=>{class n extends St.Q{exportExcel(){let e=this.form.getRawValue();if(0==e.statisticalCheck&&0==e.listQuestionCheck&&0==e.tableScoreCheck){let i=this.commonService.myTranslateInstant("lang_auto_khong_the_de_trong_tat_ca_cac_lua_chon_dot");alert(i)}else this.loadingDownload=!0,this.isExportSuccess=void 0,this.getData(this.examId).then(i=>{setTimeout(()=>{if(1==i){e.statisticalCheck&&this.AddStatisticToSheet(this.Statistic.statisticClass??[],this.Statistic.statisticNoClass??[]),e.tableScoreCheck&&this.AddTableScoreToSheet(this.TableScore.statisticClass??[],this.TableScore.statisticNoClass??[]),e.listQuestionCheck&&this.AddListQuestionToSheet(this.ListQuest.attended??0,this.ListQuest.listQuestions??[],this.ListQuest.listClassStatistic??[]);try{var a;if(a=null!=this.examObj?this.commonService.createFileNameExportFile(["Thong ke de thi",this.examObj.name??""])+".xlsx":this.commonService.createFileNameExportFile(["Thong ke de thi"])+".xlsx",this.commonService.isMobileWebview(void 0)){var r=$e.write(this.wb,{bookType:"xlsx",bookSST:!0,type:"array"});const l=new Blob([r],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});this.shareFileFlutterService.shareFileWithBlob(l,a)}else $e.writeFile(this.wb,a);this.isExportSuccess=!0,this.loadingDownload=!1,this.wb=$e.utils.book_new()}catch(s){console.log(s),this.isExportSuccess=!1,this.loadingDownload=!1,this.wb=$e.utils.book_new()}}else this.isExportSuccess=!1,this.loadingDownload=!1,this.wb=$e.utils.book_new()},0)})}AddStatisticToSheet(e,i){let a=this.commonService.myTranslateInstant("lang_auto_lop")??"",r=this.commonService.myTranslateInstant("lang_auto_so_hoc_sinh")??"",s=this.commonService.myTranslateInstant("lang_auto_tren_tb")??"(>5)",l=this.commonService.myTranslateInstant("lang_auto_dang_ky")??"",c=this.commonService.myTranslateInstant("lang_auto_du_thi")??"",d=this.commonService.myTranslateInstant("lang_auto_amount")??"",_=1,x=$e.utils.json_to_sheet([{A:a,B:r,C:"",D:"<1",E:"",F:"<2",G:"",H:"<3",I:"",J:"<4",K:"",L:"<5",M:"",N:"<6",O:"",P:"<7",Q:"",R:"<8",S:"",T:"<9",U:"",V:"<=10",W:"",X:s+"(>= 5)",Y:""},{A:"",B:l,C:c,D:d,E:"%",F:d,G:"%",H:d,I:"%",J:d,K:"%",L:d,M:"%",N:d,O:"%",P:d,Q:"%",R:d,S:"%",T:d,U:"%",V:d,W:"%",X:d,Y:"%"}],{skipHeader:!0});const b_e_c=24;for(let G=0;G<=b_e_c;++G)x[$e.utils.encode_cell({c:G,r:0})].s=this.style_header;if(null==e&&null==i){let G=this.commonService.myTranslateInstant("lang_auto_chua_co_du_lieu_thong_ke")??"";$e.utils.sheet_add_json(x,[{A:G}],{skipHeader:!0,origin:-1})}else{e?.forEach(vt=>{null!=vt.classObj&&($e.utils.sheet_add_json(x,[{A:vt.classObj.name,B:vt.registerCount,C:vt.testedCount,D:vt.markPercent[0].count,E:this._decimalPipe.transform(vt.markPercent[0].percent,"1.0-2"),F:vt.markPercent[1].count,G:this._decimalPipe.transform(vt.markPercent[1].percent,"1.0-2"),H:vt.markPercent[2].count,I:this._decimalPipe.transform(vt.markPercent[2].percent,"1.0-2"),J:vt.markPercent[3].count,K:this._decimalPipe.transform(vt.markPercent[3].percent,"1.0-2"),L:vt.markPercent[4].count,M:this._decimalPipe.transform(vt.markPercent[4].percent,"1.0-2"),N:vt.markPercent[5].count,O:this._decimalPipe.transform(vt.markPercent[5].percent,"1.0-2"),P:vt.markPercent[6].count,Q:this._decimalPipe.transform(vt.markPercent[6].percent,"1.0-2"),R:vt.markPercent[7].count,S:this._decimalPipe.transform(vt.markPercent[7].percent,"1.0-2"),T:vt.markPercent[8].count,U:this._decimalPipe.transform(vt.markPercent[8].percent,"1.0-2"),V:vt.markPercent[9].count,W:this._decimalPipe.transform(vt.markPercent[9].percent,"1.0-2"),X:vt.markPercent[10].count,Y:this._decimalPipe.transform(vt.markPercent[10].percent,"1.0-2")}],{skipHeader:!0,origin:-1}),_++)}),i?.forEach(vt=>{if((vt.registerCount??0)>0){let Nt=this.commonService.myTranslateInstant("lang_auto_thi_sinh_tu_do");$e.utils.sheet_add_json(x,[{A:Nt,B:vt.registerCount,C:vt.testedCount,D:vt.markPercent[0].count,E:this._decimalPipe.transform(vt.markPercent[0].percent,"1.0-2"),F:vt.markPercent[1].count,G:this._decimalPipe.transform(vt.markPercent[1].percent,"1.0-2"),H:vt.markPercent[2].count,I:this._decimalPipe.transform(vt.markPercent[2].percent,"1.0-2"),J:vt.markPercent[3].count,K:this._decimalPipe.transform(vt.markPercent[3].percent,"1.0-2"),L:vt.markPercent[4].count,M:this._decimalPipe.transform(vt.markPercent[4].percent,"1.0-2"),N:vt.markPercent[5].count,O:this._decimalPipe.transform(vt.markPercent[5].percent,"1.0-2"),P:vt.markPercent[6].count,Q:this._decimalPipe.transform(vt.markPercent[6].percent,"1.0-2"),R:vt.markPercent[7].count,S:this._decimalPipe.transform(vt.markPercent[7].percent,"1.0-2"),T:vt.markPercent[8].count,U:this._decimalPipe.transform(vt.markPercent[8].percent,"1.0-2"),V:vt.markPercent[9].count,W:this._decimalPipe.transform(vt.markPercent[9].percent,"1.0-2"),X:vt.markPercent[10].count,Y:this._decimalPipe.transform(vt.markPercent[10].percent,"1.0-2")}],{skipHeader:!0,origin:-1}),_++}});let G=this.totalPoint(e,i),nt=this.totalPercent(e,i),At=this.totalStudentRegister(e,i),ut=this.totalStudentTakeExam(e,i),et=this.commonService.myTranslateInstant("lang_auto_tong_upper");$e.utils.sheet_add_json(x,[{A:et,B:At,C:ut,D:G[0],E:this._decimalPipe.transform(nt[0],"1.0-2"),F:G[1],G:this._decimalPipe.transform(nt[1],"1.0-2"),H:G[2],I:this._decimalPipe.transform(nt[2],"1.0-2"),J:G[3],K:this._decimalPipe.transform(nt[3],"1.0-2"),L:G[4],M:this._decimalPipe.transform(nt[4],"1.0-2"),N:G[5],O:this._decimalPipe.transform(nt[5],"1.0-2"),P:G[6],Q:this._decimalPipe.transform(nt[6],"1.0-2"),R:G[7],S:this._decimalPipe.transform(nt[7],"1.0-2"),T:G[8],U:this._decimalPipe.transform(nt[8],"1.0-2"),V:G[9],W:this._decimalPipe.transform(nt[9],"1.0-2"),X:G[10],Y:this._decimalPipe.transform(nt[10],"1.0-2")}],{skipHeader:!0,origin:-1}),_++}x["!cols"]=[{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9},{width:9}],x["!rows"]=[{hpt:28},{hpt:27}],x["!merges"]=[{s:{r:0,c:1},e:{r:0,c:2}},{s:{r:0,c:3},e:{r:0,c:4}},{s:{r:0,c:5},e:{r:0,c:6}},{s:{r:0,c:7},e:{r:0,c:8}},{s:{r:0,c:9},e:{r:0,c:10}},{s:{r:0,c:11},e:{r:0,c:12}},{s:{r:0,c:13},e:{r:0,c:14}},{s:{r:0,c:15},e:{r:0,c:16}},{s:{r:0,c:17},e:{r:0,c:18}},{s:{r:0,c:19},e:{r:0,c:20}},{s:{r:0,c:21},e:{r:0,c:22}},{s:{r:0,c:23},e:{r:0,c:24}}];let q_s_c=0,q_e_c=24,q_e_r=_-1,B_s_c=0,B_e_c=24;for(let G=1;G<=q_e_r;++G)for(let nt=q_s_c;nt<=q_e_c;++nt)x[$e.utils.encode_cell({c:nt,r:G})].s=this.style_body;for(let G=B_s_c;G<=B_e_c;++G)x[$e.utils.encode_cell({c:G,r:_})].s=this.style_footer;let W=this.commonService.myTranslateInstant("lang_auto_thong_ke_pho_diem");$e.utils.book_append_sheet(this.wb,x,W&&W?.length>31?W?.substring(0,27)+"...":W)}AddTableScoreToSheet(e,i){var a;let r=this.commonService.myTranslateInstant("lang_auto_stt")??"",s=this.commonService.myTranslateInstant("lang_auto_ho_va_ten")??"",l=this.commonService.myTranslateInstant("lang_auto_gioi_tinh")??"",c=this.commonService.myTranslateInstant("lang_auto_ngay_sinh")??"",d=this.commonService.myTranslateInstant("lang_point")??"",h=this.commonService.myTranslateInstant("lang_auto_cau"),_=this.commonService.myTranslateInstant("lang_combine_exam_component")??"";if(0==e.length&&0==i.length){let q=this.commonService.myTranslateInstant("lang_auto_chua_co_hoc_sinh_thanh_gia_lam_de"),B=this.commonService.myTranslateInstant("lang_auto_bang_diem");a=$e.utils.json_to_sheet([{A:q,B:"",C:"",D:"",E:""}],{skipHeader:!0}),$e.utils.book_append_sheet(this.wb,a,B&&B?.length>31?B?.substring(0,27)+"...":B)}else{var x=[{width:8},{width:22},{width:34},{width:13},{width:13}];for(let B=0;B<this.limitQuestions;B++)x.push({width:13});var b=[{s:{r:0,c:0},e:{r:0,c:4}}],T=0,P=[],U=[];if(a=$e.utils.json_to_sheet([{A:""}],{skipHeader:!0}),0!=e.length&&e.forEach(B=>{let W=[{A:B.classObj?.name,B:"",C:"",D:"",E:""},{A:r,B:s,C:c,D:l,E:d}],G=5,nt=0,At=0;this.examObj?.subjectMarks&&(W[0]={...W[0],F:"",G:"",H:""},W[1]={...W[1],F:_+"1",G:_+"2",H:_+"3"},G+=3);for(let et=0;et<this.limitQuestions;et++){G>=26&&(G=0,nt++);let vt="";0==nt&&0==At?vt=this.keyColExcelArr[G]:(nt>26&&(nt=1,At++),At>0&&(vt+=this.keyColExcelArr[At-1]),vt+=this.keyColExcelArr[nt-1]+""+this.keyColExcelArr[G]),W[0][vt]="",W[1][vt]=h+" "+(et+(this.examObj?.startQuestionIndex??0)<9?"0"+(et+(this.examObj?.startQuestionIndex??1)):et+(this.examObj?.startQuestionIndex??1)),G++}if(P.push(T+=2),b.push({s:{r:T-1,c:0},e:{r:T-1,c:4}}),a=$e.utils.sheet_add_json(a,W,{skipHeader:!0,origin:-1}),0==B.studentsWithMark?.length){let vt=[{A:this.commonService.myTranslateInstant("lang_auto_chua_co_hoc_sinh_du_thi"),B:"",C:"",D:"",E:""}];b.push({s:{r:T+1,c:0},e:{r:T+1,c:4}}),$e.utils.sheet_add_json(a,vt,{skipHeader:!0,origin:-1}),T++}else{let et=this.commonService.myTranslateInstant("lang_auto_chua_cham")??"",vt=this.commonService.myTranslateInstant("lang_auto_dang_thi")??"",Nt=this.commonService.myTranslateInstant("lang_auto_chua_nop_bai")??"",ot=this.commonService.myTranslateInstant("lang_auto_chua_thi")??"",_t=this.commonService.myTranslateInstant("lang_auto_hoc_sinh_chua_nhap_ngay_sinh")??"",Mt=this.commonService.myTranslateInstant("lang_auto_nam")??"",It=this.commonService.myTranslateInstant("lang_auto_nu")??"";B.studentsWithMark?.forEach((Tt,Vt)=>{let Wt,ie=this.timeService.formatOnlyDateByUserUnit(Tt.birthday)?this.timeService.formatOnlyDateByUserUnit(Tt.birthday):void 0;Wt=Tt.isNotMarked?et:Tt.isOnTest?vt:Tt.isNotSubmit?Nt:Tt.isNotTested?ot:Tt.mark??"",T++;let oe=[{A:Vt+1,B:Tt.fullName,C:null==Tt.birthday?_t:`${ie}`,D:`${1==Tt.gender?Mt:It}`,E:`${Wt}`}],ne=5;if(this.examObj?.subjectMarks){let we={};we=Tt.subjectMarks?{F:Tt.subjectMarks[0],G:Tt.subjectMarks[1],H:Tt.subjectMarks[2]}:{F:"",G:"",H:""},oe[0]={...oe[0],...we},ne+=3}if(Tt.answeredQuestions){let we=0,at=0;for(let kt=0;kt<Tt.answeredQuestions?.length;kt++){ne>=26&&(ne=0,we++);let Et="";0==we&&0==at?Et=this.keyColExcelArr[ne]:(we>26&&(we=1,at++),at>0&&(Et+=this.keyColExcelArr[at-1]),Et+=this.keyColExcelArr[we-1]+""+this.keyColExcelArr[ne]),oe[0][Et]=this.checkAnswerQuestionTableExport(Tt.answeredQuestions[kt]),ne++}}$e.utils.sheet_add_json(a,oe,{skipHeader:!0,origin:-1})})}let ut=this.commonService.myTranslateInstant("lang_auto_diem_trung_binh")??"";$e.utils.sheet_add_json(a,[{A:ut,B:"",C:"",D:"",E:this.calcAvgClassroomMark(B.studentsWithMark??[])}],{skipHeader:!0,origin:-1}),U.push(T+1),b.push({s:{r:(T+=3)-2,c:0},e:{r:T-2,c:3}}),$e.utils.sheet_add_json(a,[{A:"",B:"",C:"",D:"",E:""},{A:"",B:"",C:"",D:"",E:""}],{skipHeader:!0,origin:-1})}),0!=i.length){let B=this.commonService.myTranslateInstant("lang_auto_danh_sach_hoc_sinh_da_tham_gia_nhung_chua_chon_lop"),W=[{A:B,B:"",C:"",D:"",E:""},{A:r,B:s,C:c,D:l,E:d}],G=5,nt=0,At=0;this.examObj?.subjectMarks&&(W[0]={...W[0],F:"",G:"",H:""},W[1]={...W[1],F:_+"1",G:_+"2",H:_+"3"},G+=3);for(let ut=0;ut<this.limitQuestions;ut++){G>=26&&(G=0,nt++);let et="";0==nt&&0==At?et=this.keyColExcelArr[G]:(nt>26&&(nt=1,At++),At>0&&(et+=this.keyColExcelArr[At-1]),et+=this.keyColExcelArr[nt-1]+""+this.keyColExcelArr[G]),W[0][et]="",W[1][et]=h+" "+(ut+(this.examObj?.startQuestionIndex??0)<9?"0"+(ut+(this.examObj?.startQuestionIndex??1)):ut+(this.examObj?.startQuestionIndex??1)),G++}if(b.push({s:{r:(T+=2)-1,c:0},e:{r:T-1,c:4}}),P.push(T),a=$e.utils.sheet_add_json(a,W,{skipHeader:!0,origin:-1}),null==i)B=this.commonService.myTranslateInstant("lang_auto_chua_co_hoc_sinh_du_thi"),$e.utils.sheet_add_json(a,[{A:B,B:"",C:"",D:"",E:""},{A:"",B:"",C:"",D:"",E:""},{A:"",B:"",C:"",D:"",E:""}],{skipHeader:!0,origin:-1});else{let ut=1,et=this.commonService.myTranslateInstant("lang_auto_chua_cham")??"",vt=this.commonService.myTranslateInstant("lang_auto_dang_thi")??"",Nt=this.commonService.myTranslateInstant("lang_auto_chua_nop_bai")??"",ot=this.commonService.myTranslateInstant("lang_auto_chua_thi")??"",_t=this.commonService.myTranslateInstant("lang_auto_hoc_sinh_chua_nhap_ngay_sinh")??"",Mt=this.commonService.myTranslateInstant("lang_auto_nam")??"",It=this.commonService.myTranslateInstant("lang_auto_nu")??"";Object.keys(i).forEach(Vt=>{let oe,ie=i[Vt],Wt=this.timeService.formatOnlyDateByUserUnit(ie.birthday)?this.timeService.formatOnlyDateByUserUnit(ie.birthday):void 0;oe=ie.isNotMarked?et:ie.isOnTest?vt:ie.isNotSubmit?Nt:ie.isNotTested?ot:ie.mark??"";let ne=[{A:ut,B:ie.fullName,C:null==Wt?_t:`${Wt}`,D:`${1==ie.gender?Mt:It}`,E:oe}],we=5;if(this.examObj?.subjectMarks){let at={};at=ie.subjectMarks?{F:ie.subjectMarks[0],G:ie.subjectMarks[1],H:ie.subjectMarks[2]}:{F:"",G:"",H:""},ne[0]={...ne[0],...at},we+=3}if(ie.answeredQuestions){let at=0,kt=0;for(let Et=0;Et<ie.answeredQuestions?.length;Et++){we>=26&&(we=0,at++);let Ft="";0==at&&0==kt?Ft=this.keyColExcelArr[we]:(at>26&&(at=1,kt++),kt>0&&(Ft+=this.keyColExcelArr[kt-1]),Ft+=this.keyColExcelArr[at-1]+""+this.keyColExcelArr[we]),ne[0][Ft]=this.checkAnswerQuestionTableExport(ie.answeredQuestions[Et]),we++}}$e.utils.sheet_add_json(a,ne,{skipHeader:!0,origin:-1}),ut++,T++});let Tt=this.commonService.myTranslateInstant("lang_auto_diem_trung_binh")??"";$e.utils.sheet_add_json(a,[{A:Tt,B:"",C:"",D:"",E:this.calcAvgClassroomMark(i)}],{skipHeader:!0,origin:-1}),U.push(T+1),b.push({s:{r:T+=1,c:0},e:{r:T,c:3}}),$e.utils.sheet_add_json(a,[{A:"",B:"",C:"",D:"",E:""},{A:"",B:"",C:"",D:"",E:""}],{skipHeader:!0,origin:-1})}}a["!cols"]=x,a["!merges"]=b;for(let B=0;B<P.length;B++){a[$e.utils.encode_cell({c:0,r:P[B]-1})].s={alignment:{vertical:"center",horizontal:"center"},font:{bold:!0}},a[$e.utils.encode_cell({c:1,r:P[B]-1})].s={alignment:{vertical:"center",horizontal:"center"},font:{bold:!0}},a[$e.utils.encode_cell({c:2,r:P[B]-1})].s={alignment:{vertical:"center",horizontal:"center"},font:{bold:!0}},a[$e.utils.encode_cell({c:3,r:P[B]-1})].s={alignment:{vertical:"center",horizontal:"center"},font:{bold:!0}},a[$e.utils.encode_cell({c:4,r:P[B]-1})].s={alignment:{vertical:"center",horizontal:"center"},font:{bold:!0}},a[$e.utils.encode_cell({c:0,r:P[B]})].s=this.style_header,a[$e.utils.encode_cell({c:1,r:P[B]})].s=this.style_header,a[$e.utils.encode_cell({c:2,r:P[B]})].s=this.style_header,a[$e.utils.encode_cell({c:3,r:P[B]})].s=this.style_header,a[$e.utils.encode_cell({c:4,r:P[B]})].s=this.style_header,a[$e.utils.encode_cell({c:0,r:U[B]})].s=this.style_footer,a[$e.utils.encode_cell({c:1,r:U[B]})].s=this.style_footer,a[$e.utils.encode_cell({c:2,r:U[B]})].s=this.style_footer,a[$e.utils.encode_cell({c:3,r:U[B]})].s=this.style_footer,a[$e.utils.encode_cell({c:4,r:U[B]})].s=this.style_footer;for(let G=0;G<this.limitQuestions+(this.examObj?.subjectMarks?3:0);G++)a[$e.utils.encode_cell({c:4,r:P[B]-1})]&&(a[$e.utils.encode_cell({c:4,r:P[B]-1})].s={alignment:{vertical:"center",horizontal:"center"},font:{bold:!0}}),a[$e.utils.encode_cell({c:5+G,r:P[B]})]&&(a[$e.utils.encode_cell({c:5+G,r:P[B]})].s=this.style_header),a[$e.utils.encode_cell({c:5+G,r:U[B]})]&&(a[$e.utils.encode_cell({c:5+G,r:U[B]})].s=this.style_footer);let W={s:{c:0,r:P[B]+1},e:{c:4+this.limitQuestions+(this.examObj?.subjectMarks?3:0),r:U[B]}};for(let G=W.s.r;G<=W.e.r;++G)for(let nt=W.s.c;nt<=W.e.c;++nt)a[$e.utils.encode_cell({c:nt,r:G})]&&(a[$e.utils.encode_cell({c:nt,r:G})].s=this.style_body)}let q=this.commonService.myTranslateInstant("lang_auto_bang_diem");$e.utils.book_append_sheet(this.wb,a,q&&q?.length>31?q?.substring(0,27)+"...":q)}}AddListQuestionToSheet(e,i,a){var r,s=0,l=[{s:{r:0,c:0},e:{r:0,c:8}}],d=[],h=[];if(r=$e.utils.json_to_sheet([{A:""}],{skipHeader:!0}),0==e){let _=this.commonService.myTranslateInstant("lang_auto_chua_co_du_lieu_thong_ke"),x=this.commonService.myTranslateInstant("lang_auto_bang_ty_le_dung_sai_export"),b=[{A:_,B:"",C:"",D:"",E:"",F:"",G:"",H:"",I:""}];s++,d.push(s),l.push({s:{r:s-1,c:0},e:{r:s-1,c:8}}),r=$e.utils.sheet_add_json(r,b,{skipHeader:!0,origin:-1}),$e.utils.book_append_sheet(this.wb,r,x&&x?.length>31?x?.substring(0,27)+"...":x)}else{let _=this.commonService.myTranslateInstant("lang_auto_cau_hoi"),x=this.commonService.myTranslateInstant("lang_auto_tong_so_hs_du_thi"),b=this.commonService.myTranslateInstant("lang_auto_so_hs_da_lam"),T=this.commonService.myTranslateInstant("lang_auto_so_hs_chua_lam"),P=this.commonService.myTranslateInstant("lang_auto_so_hs_lam_dung"),U=this.commonService.myTranslateInstant("lang_auto_so_hs_lam_sai"),q=this.commonService.myTranslateInstant("lang_auto_ty_le_hoc_sinh_khong_hoan_thanh_cau"),B=this.commonService.myTranslateInstant("lang_auto_danh_sach_hoc_sinh_lam_sai"),W=this.commonService.myTranslateInstant("lang_testbank_statistical_student_who_not_answer"),G=this.commonService.myTranslateInstant("lang_auto_thong_ke_theo_cau_hoi"),nt=this.commonService.myTranslateInstant("lang_auto_cau");a.length>0&&a.forEach(et=>{let vt=[{A:et.name,B:"",C:"",D:"",E:"",F:"",G:"",H:"",I:""},{A:_,B:x,C:b,D:T,E:P,F:U,G:q,H:B,I:W}];if(d.push(s+=2),l.push({s:{r:s-1,c:0},e:{r:s-1,c:8}}),r=$e.utils.sheet_add_json(r,vt,{skipHeader:!0,origin:-1}),0==et.listQuestions?.length){let ot=[{A:this.commonService.myTranslateInstant("lang_auto_chua_co_du_lieu_thong_ke"),B:"",C:"",D:"",E:"",F:"",G:"",H:"",I:""}];s++,l.push({s:{r:s+1,c:0},e:{r:s+1,c:8}}),$e.utils.sheet_add_json(r,ot,{skipHeader:!0,origin:-1})}else et.listQuestions?.forEach((Nt,ot)=>{let Mt=[{A:`${nt} ${Nt.id}`,B:Nt.countAttended,C:Nt.countTested,D:Nt.countNotAnswer,E:Nt.countTrue,F:Nt.countFalse,G:0!=Nt.countAttended?`${((Nt.countNotAnswer+Nt.countFalse)/Nt.countAttended*100).toFixed(2)}%`:"0%",H:this.getNameStudentWhoFalse(Nt.studentWhoFalse).join(", "),I:this.getNameStudentWhoFalse(Nt.studentWhoNotAnswer).join(", ")}];$e.utils.sheet_add_json(r,Mt,{skipHeader:!0,origin:-1}),s++});h.push(s),s+=2,$e.utils.sheet_add_json(r,[{A:"",B:"",C:"",D:"",E:"",F:"",G:"",H:"",I:""},{A:"",B:"",C:"",D:"",E:"",F:"",G:"",H:"",I:""}],{skipHeader:!0,origin:-1})});let At=[{A:G,B:"",C:"",D:"",E:"",F:"",G:"",H:"",I:""},{A:_,B:x,C:b,D:T,E:P,F:U,G:q,H:B,I:W}];l.push({s:{r:(s+=2)-1,c:0},e:{r:s-1,c:8}}),d.push(s),r=$e.utils.sheet_add_json(r,At,{skipHeader:!0,origin:-1}),i.forEach((et,vt)=>{$e.utils.sheet_add_json(r,[{A:`${nt} ${et.id}`,B:et.countAttended,C:et.countTested,D:et.countNotAnswer,E:et.countTrue,F:et.countFalse,G:0!=et.countAttended?`${((et.countNotAnswer+et.countFalse)/et.countAttended*100).toFixed(2)}%`:"0%",H:this.getNameStudentWhoFalse(et.studentWhoFalse).join(", "),I:this.getNameStudentWhoFalse(et.studentWhoNotAnswer).join(", ")}],{skipHeader:!0,origin:-1}),s++}),h.push(s),$e.utils.sheet_add_json(r,[{A:"",B:"",C:"",D:"",E:"",F:"",G:"",H:"",I:""},{A:"",B:"",C:"",D:"",E:"",F:"",G:"",H:"",I:""}],{skipHeader:!0,origin:-1}),r["!cols"]=[{wch:15.25},{wch:10.63},{wch:6.25},{wch:8.25},{wch:9},{wch:7.25},{wch:16.75},{wch:60},{wch:60}],r["!merges"]=l;for(let et=0;et<d.length;et++){r[$e.utils.encode_cell({c:0,r:d[et]-1})].s={alignment:{vertical:"center",horizontal:"center"},font:{bold:!0}},r[$e.utils.encode_cell({c:1,r:d[et]-1})].s={alignment:{vertical:"center",horizontal:"center"},font:{bold:!0}},r[$e.utils.encode_cell({c:2,r:d[et]-1})].s={alignment:{vertical:"center",horizontal:"center"},font:{bold:!0}},r[$e.utils.encode_cell({c:3,r:d[et]-1})].s={alignment:{vertical:"center",horizontal:"center"},font:{bold:!0}},r[$e.utils.encode_cell({c:4,r:d[et]-1})].s={alignment:{vertical:"center",horizontal:"center"},font:{bold:!0}},r[$e.utils.encode_cell({c:5,r:d[et]-1})].s={alignment:{vertical:"center",horizontal:"center"},font:{bold:!0}},r[$e.utils.encode_cell({c:6,r:d[et]-1})].s={alignment:{vertical:"center",horizontal:"center"},font:{bold:!0}},r[$e.utils.encode_cell({c:7,r:d[et]-1})].s={alignment:{vertical:"center",horizontal:"center"},font:{bold:!0}},r[$e.utils.encode_cell({c:8,r:d[et]-1})].s={alignment:{vertical:"center",horizontal:"center"},font:{bold:!0}},r[$e.utils.encode_cell({c:0,r:d[et]})].s=this.style_header,r[$e.utils.encode_cell({c:1,r:d[et]})].s=this.style_header,r[$e.utils.encode_cell({c:2,r:d[et]})].s=this.style_header,r[$e.utils.encode_cell({c:3,r:d[et]})].s=this.style_header,r[$e.utils.encode_cell({c:4,r:d[et]})].s=this.style_header,r[$e.utils.encode_cell({c:5,r:d[et]})].s=this.style_header,r[$e.utils.encode_cell({c:6,r:d[et]})].s=this.style_header,r[$e.utils.encode_cell({c:7,r:d[et]})].s=this.style_header,r[$e.utils.encode_cell({c:8,r:d[et]})].s=this.style_header;let vt={s:{c:0,r:d[et]+1},e:{c:8,r:h[et]}};for(let Nt=vt.s.r;Nt<=vt.e.r;++Nt)for(let ot=vt.s.c;ot<=vt.e.c;++ot)r[$e.utils.encode_cell({c:ot,r:Nt})].s=this.style_body}let ut=this.commonService.myTranslateInstant("lang_auto_bang_ty_le_dung_sai_export");$e.utils.book_append_sheet(this.wb,r,ut&&ut?.length>31?ut?.substring(0,27)+"...":ut)}}getNameStudentWhoFalse(e){var i=[];return e.forEach(a=>{a.fullName&&i.push(a.fullName)}),i.length>50?[this.commonService.myTranslateInstant("lang_testbank_statistical_student_not_show_who_wrong")??""]:i}checkStatusStudent(e,i){var a=[];return e.forEach(r=>{r.confirmedAt&&""!=r.confirmedAt&&r.resultId&&r.resultId>0?r.isMarked=!0:r.resultId&&r.resultId>0&&(!r.confirmedAt||""==r.confirmedAt)?r.isNotMarked=!0:r.resultId&&0!=r.resultId||!r.startedTest||""==r.startedTest||0!=r.status?r.resultId&&0!=r.resultId||!r.startedTest||""==r.startedTest||-1!=r.status?null==r.startedTest&&(r.isNotTested=!0):r.isNotSubmit=!0:r.isOnTest=!0,a.push(r)}),a}totalPercent(e,i){var a=[0,0,0,0,0,0,0,0,0,0,0,0];let r=0;for(let s=0;s<e.length;s++)e[s]&&(r+=e[s].testedCount??0,a[0]+=e[s].markPercent[0].count??0,a[1]+=e[s].markPercent[1].count??0,a[2]+=e[s].markPercent[2].count??0,a[3]+=e[s].markPercent[3].count??0,a[4]+=e[s].markPercent[4].count??0,a[5]+=e[s].markPercent[5].count??0,a[6]+=e[s].markPercent[6].count??0,a[7]+=e[s].markPercent[7].count??0,a[8]+=e[s].markPercent[8].count??0,a[9]+=e[s].markPercent[9].count??0,a[10]+=e[s].markPercent[10].count??0);for(let s=0;s<i.length;s++)i[s]&&(r+=i[s].testedCount??0,a[0]+=i[s].markPercent[0].count??0,a[1]+=i[s].markPercent[1].count??0,a[2]+=i[s].markPercent[2].count??0,a[3]+=i[s].markPercent[3].count??0,a[4]+=i[s].markPercent[4].count??0,a[5]+=i[s].markPercent[5].count??0,a[6]+=i[s].markPercent[6].count??0,a[7]+=i[s].markPercent[7].count??0,a[8]+=i[s].markPercent[8].count??0,a[9]+=i[s].markPercent[9].count??0,a[10]+=i[s].markPercent[10].count??0);for(let s=0;s<a.length;s++)a[s]=100*a[s]/r;return a}totalPoint(e,i){let a=[0,0,0,0,0,0,0,0,0,0,0];for(let r=0;r<e.length;r++)a[0]+=e[r].markPercent[0].count??0,a[1]+=e[r].markPercent[1].count??0,a[2]+=e[r].markPercent[2].count??0,a[3]+=e[r].markPercent[3].count??0,a[4]+=e[r].markPercent[4].count??0,a[5]+=e[r].markPercent[5].count??0,a[6]+=e[r].markPercent[6].count??0,a[7]+=e[r].markPercent[7].count??0,a[8]+=e[r].markPercent[8].count??0,a[9]+=e[r].markPercent[9].count??0,a[10]+=e[r].markPercent[10].count??0;for(let r=0;r<i.length;r++)a[0]+=i[r].markPercent[0].count??0,a[1]+=i[r].markPercent[1].count??0,a[2]+=i[r].markPercent[2].count??0,a[3]+=i[r].markPercent[3].count??0,a[4]+=i[r].markPercent[4].count??0,a[5]+=i[r].markPercent[5].count??0,a[6]+=i[r].markPercent[6].count??0,a[7]+=i[r].markPercent[7].count??0,a[8]+=i[r].markPercent[8].count??0,a[9]+=i[r].markPercent[9].count??0,a[10]+=i[r].markPercent[10].count??0;return a}totalStudentRegister(e,i){var a=0;for(let r=0;r<e.length;r++)a+=e[r].registerCount??0;for(let r=0;r<i.length;r++)a+=i[r].registerCount??0;return a}totalStudentTakeExam(e,i){var a=0;for(let r=0;r<e.length;r++)a+=e[r].testedCount??0;for(let r=0;r<i.length;r++)a+=i[r].testedCount??0;return a}calcAvgClassroomMark(e){var i=0,a=0;return e.forEach(r=>{r.isMarked&&(i++,a+=r.mark??0)}),i>0?(a/i).toFixed(2):0}convertStatisticalAllQuestion(e){var i=e.data?.questionObjs&&e.data.questionObjs.length>0?e.data.questionObjs:new Array,a=[];a=this.commonService.castJsonToClassObjs(X0,JSON.stringify(i))??[];var r=e.data?.resultQuestionObjs&&e.data?.resultQuestionObjs.length>0?e.data.resultQuestionObjs:new Array,s=this.dictionaryService.getDictionaryByGroupFieldTS(r,"userId"),l=[];this.examObj=e.data?.examObj;var c=e.data?.resultObjs&&e.data.resultObjs.length>0?e.data.resultObjs:new Array,d={},h=[],_={};e.data?.classroomObjsWithStudentObjs?.forEach(U=>{U.classroomObj&&U.studentObjs&&U.studentObjs.forEach(q=>{if(q.parentId){this.commonService.isExistInArray(h,q.parentId)||h.push(q.parentId);var B=this.statisticalApiService.findExamResultOfStudent(s[q.parentId]??[],q.id??"0");if(B.length>0){var W=B[B.length-1],G=q.parentId+"_"+(q.id?q.id:0)+"_"+W.id;d.hasOwnProperty(G)||(d[G]=q),_.hasOwnProperty(G)||(_[G]=W)}}})}),c.forEach(U=>{if(U.parentId&&s.hasOwnProperty(U.parentId??0)&&!this.commonService.isExistInArray(h,U.parentId??"0")){var q=s[U.parentId][s[U.parentId].length-1];let W=this.commonService.myTranslateInstant("lang_auto_thi_sinh_thi_offline");U.fullName=U.fullName??W+"_"+q.id;var B=U.parentId+"_"+(U.id??0)+"_"+q.id;d.hasOwnProperty(B)||(d[B]=U),_.hasOwnProperty(B)||(_[B]=q)}});for(var x=0;x<a.length;x++)(this.answerTypeService.isOneChoiceAnswer(a[x])||this.answerTypeService.isFillAnswer(a[x]))&&(a[x].countFalse=0,a[x].countNotAnswer=0,a[x].countTested=0,a[x].countAttended=0,a[x].countTrue=0,a[x].indexQuestion=x,a[x].studentWhoFalse=[],a[x].studentWhoNotAnswer=[]);for(var b in _)if(_.hasOwnProperty(b))for(x=0;x<a.length;x++)if(this.answerTypeService.isOneChoiceAnswer(a[x])||this.answerTypeService.isFillAnswer(a[x])){var T=_[b],P=d.hasOwnProperty(b)?d[b]:void 0;T.correctQuestionIds&&this.commonService.isExistInArray(T.correctQuestionIds,a[x].id)&&(a[x].countTrue++,a[x].countTested++),T.wrongQuestionIds&&this.commonService.isExistInArray(T.wrongQuestionIds,a[x].id)&&(a[x].countFalse++,a[x].countTested++,this.commonService.isExistInArray(a[x].studentWhoFalse,{studentId:P?.id??"0",parentId:P?.parentId,fullName:P?.fullName,nameImages:P?.nameImages})||a[x].studentWhoFalse?.push({studentId:P?.id??"0",parentId:P?.parentId,fullName:P?.fullName,nameImages:P?.nameImages})),T.resultQuestionIds&&this.commonService.isExistInArray(T.resultQuestionIds,a[x].id)&&a[x].countAttended++,this.commonService.isExistInArray(T.resultQuestionIds,a[x].id)&&!this.commonService.isExistInArray(T.correctQuestionIds,a[x].id)&&!this.commonService.isExistInArray(T.wrongQuestionIds,a[x].id)&&(a[x].countNotAnswer++,this.commonService.isExistInArray(a[x].studentWhoNotAnswer,{studentId:P?.id??"0",parentId:P?.parentId,fullName:P?.fullName,nameImages:P?.nameImages})||a[x].studentWhoNotAnswer?.push({studentId:P?.id??"0",parentId:P?.parentId,fullName:P?.fullName,nameImages:P?.nameImages}))}return a.forEach(U=>{(this.answerTypeService.isOneChoiceAnswer(U)||this.answerTypeService.isFillAnswer(U))&&l.push(U)}),l}getData(e){var i=this;return(0,Ya.Z)(function*(){return new Promise((a,r)=>{let s=0,l=0,c=i.form.getRawValue();1==c.statisticalCheck&&0==i.statisticalLoaded&&s++,1==c.listQuestionCheck&&0==i.listQuestionLoaded&&s++,1==c.tableScoreCheck&&0==i.tableScoreLoaded&&s++,0==s&&a(!0),i.statisticalApiService.getExamStatisticObjs("statistic_export_excel",e,1).subscribe(d=>{if(1==c.statisticalCheck&&0==i.statisticalLoaded){if(1==d.success&&d.data){var h=d.data.classroomObjsWithStudentObjs&&d.data.classroomObjsWithStudentObjs.length>0?d.data.classroomObjsWithStudentObjs:new Array,_=d.data.resultObjs&&d.data.resultObjs.length>0?d.data.resultObjs:new Array,x=i.testedListApiService.mergeStudentWithAvatar(_??[]),b=[],T=[],P=i.dictionaryService.getDictionaryByFieldTS(x,"parentId");if(i.examObj=d.data.examObj,h.length>0){var U=[],q=[];h.forEach(Et=>{var Ft=[],Gt=[],le=0;Et.studentObjs?.forEach(Ne=>{U.push(Ne.parentId??"0");var on=Ne.parentId??"0";if(P.hasOwnProperty(on)&&(Array.isArray(Ne.examResultObjs)||(Ne.examResultObjs=[]),Ne.examResultObjs=i.statisticalApiService.findExamResultOfStudent(Ne.examResultObjs?.concat(P[on].examResultObjs??[])??[],Ne.id??"0")),Ne.examResultObjs&&Ne.examResultObjs.length>0){var en=Ne.examResultObjs[Ne.examResultObjs.length-1];en.testStatus&&(en.totalEssayQuestion?en.confirmedAt&&Gt.push(en):Gt.push(en))}le++});for(var ee=i.homeworkExamService.countMarks(Gt),re=0;re<ee.length;re++)Ft.push({key:10==re?"Avg":9==re?"<= 10":"<"+(re+1),count:ee[re],percent:i.homeworkExamService.calcPercent(ee[re],Gt.length)});b.push({classObj:Et.classroomObj,registerCount:le,testedCount:Gt.length>0?Gt.length:0,markPercent:Ft})});var B=[],W=[];x.forEach(Et=>{if(!i.commonService.isExistInArray(U,Et.parentId??"0")&&Et.examResultObjs&&Et.examResultObjs.length>0){var Ft=i.statisticalApiService.findExamResultOfStudent(Et.examResultObjs,Et.id??"0");if(Ft.length>0){var Gt=Ft[Ft.length-1];Gt.testStatus&&(Gt.totalEssayQuestion?Gt.confirmedAt&&W.push(Gt):W.push(Gt),q.push(Et.parentId??"0"))}}});for(var G=i.homeworkExamService.countMarks(W),nt=0;nt<G.length;nt++)B.push({key:10==nt?"Avg":9==nt?"<= 10":"<"+(nt+1),count:G[nt],percent:i.homeworkExamService.calcPercent(G[nt],W.length)});W.length>0&&T.push({classObj:void 0,registerCount:q.length>0?q.length:0,testedCount:W.length>0?W.length:0,markPercent:B})}else{var ut=[],et=[],vt=[];for(x.forEach(Ft=>{if(Ft.examResultObjs&&Ft.examResultObjs.length>0){var Gt=i.statisticalApiService.findExamResultOfStudent(Ft.examResultObjs,Ft.id??"0");if(Gt.length>0){var le=Gt[Gt.length-1];le.testStatus&&(le.totalEssayQuestion?le.confirmedAt&&et.push(le):et.push(le),vt.push(Ft.parentId??"0"))}}}),G=i.homeworkExamService.countMarks(et),nt=0;nt<G.length;nt++)ut.push({key:10==nt?"Avg":9==nt?"<= 10":"<"+(nt+1),count:G[nt],percent:i.homeworkExamService.calcPercent(G[nt],et.length)});et.length>0&&T.push({classObj:void 0,registerCount:vt.length>0?vt.length:0,testedCount:et.length>0?et.length:0,markPercent:ut})}i.Statistic={statisticClass:b,statisticNoClass:T},i.statisticalLoaded=!0}else i.showErrorSnack(d.message??"");l++,l==s&&a(!0)}if(1==c.listQuestionCheck&&0==i.listQuestionLoaded){if(1==d.success&&d.data){_=d.data.resultObjs&&d.data.resultObjs.length>0?d.data.resultObjs:new Array,x=i.testedListApiService.mergeStudentWithAvatar(_??[]);var Nt=i.commonService.castJsonToClassObjs(t5,JSON.stringify(d.data.classroomObjs))??[],ot={};d.data.classroomObjsWithStudentObjs?.forEach(ee=>{ee.classroomObj&&ee.studentObjs&&(ot.hasOwnProperty(ee.classroomObj?.id??0)||(ot[ee.classroomObj?.id??0]=ee.studentObjs))});for(var _t=d.data.questionObjs&&d.data.questionObjs.length>0?d.data.questionObjs:new Array,Mt=d.data?.resultQuestionObjs&&d.data?.resultQuestionObjs.length>0?d.data.resultQuestionObjs:new Array,It=i.dictionaryService.getDictionaryByGroupFieldTS(Mt,"userId"),Tt=(U=[],0);Tt<Nt.length;Tt++)ot.hasOwnProperty(Nt[Tt].id??0)&&(Nt[Tt].students=ot[Nt[Tt].id??0]),Nt[Tt].students?.forEach(ee=>{if(ee.parentId&&!i.commonService.isExistInArray(U,ee.parentId)&&U.push(ee.parentId),ee.parentId&&It.hasOwnProperty(ee.parentId)&&!i.commonService.isExistInArray(Nt[Tt].listResult,It[ee.parentId][0])){var re=i.statisticalApiService.findExamResultOfStudent(It[ee.parentId],ee.id??"0");re.length>0&&Nt[Tt].listResult?.push(re[re.length-1])}});var Vt=!1,ie={id:-1,name:i.commonService.myTranslateInstant("lang_auto_thi_sinh_tu_do"),userTested:[],listResult:[],listQuestions:[]};x.forEach(ee=>{if(!i.commonService.isExistInArray(U,ee.parentId??"0")){if(ee.parentId&&It.hasOwnProperty(ee.parentId??0)){var re=i.statisticalApiService.findExamResultOfStudent(It[ee.parentId],ee.id??"0");if(re.length>0){var Qe=re[re.length-1];ie.listResult.push(Qe);let Ne=i.commonService.myTranslateInstant("lang_auto_thi_sinh_thi_offline");ee.fullName=ee.fullName??Ne+"_"+Qe.id,ie.userTested?.push(ee)}}Vt=!0}}),Vt&&Nt.push(ie);var Wt=0;for(nt=0;nt<Nt.length;nt++){var oe=[];oe=i.commonService.castJsonToClassObjs(X0,JSON.stringify(_t))??[];for(var ne=0;ne<oe.length;ne++)(i.answerTypeService.isOneChoiceAnswer(oe[ne])||i.answerTypeService.isFillAnswer(oe[ne])||i.answerTypeService.isTrueFalseAnswer(oe[ne]))&&(oe[ne].indexQuestion=ne,Nt[nt].listQuestions.push(oe[ne]));var we=i.dictionaryService.getDictionaryByGroupFieldTS(Nt[nt].listResult??[],"userId");for(var at in we)if(we.hasOwnProperty(at)){Wt++;var kt=-1==Nt[nt].id?Nt[nt].userTested?.filter(re=>re.parentId==we[at][0].userId):Nt[nt].students?.filter(re=>re.parentId==we[at][0].userId);for(Tt=0;Tt<Nt[nt].listQuestions.length;Tt++)(i.answerTypeService.isOneChoiceAnswer(Nt[nt].listQuestions[Tt])||i.answerTypeService.isFillAnswer(Nt[nt].listQuestions[Tt])||i.answerTypeService.isTrueFalseAnswer(Nt[nt].listQuestions[Tt]))&&(we[at][0].correctQuestionIds&&i.commonService.isExistInArray(we[at][0].correctQuestionIds,Nt[nt].listQuestions[Tt].id)&&(Nt[nt].listQuestions[Tt].countTrue++,Nt[nt].listQuestions[Tt].countTested++),we[at][0].wrongQuestionIds&&i.commonService.isExistInArray(we[at][0].wrongQuestionIds,Nt[nt].listQuestions[Tt].id)&&(Nt[nt].listQuestions[Tt].countFalse++,Nt[nt].listQuestions[Tt].countTested++,kt&&kt.length>0&&(i.commonService.isExistInArray(Nt[nt].listQuestions[Tt].studentWhoFalse,{studentId:kt[0].id,parentId:kt[0].parentId,fullName:kt[0].fullName,nameImages:kt[0].nameImages})||Nt[nt].listQuestions[Tt].studentWhoFalse?.push({studentId:kt[0].id,parentId:kt[0].parentId,fullName:kt[0].fullName,nameImages:kt[0].nameImages}))),we[at][0].resultQuestionIds&&i.commonService.isExistInArray(we[at][0].resultQuestionIds,Nt[nt].listQuestions[Tt].id)&&Nt[nt].listQuestions[Tt].countAttended++,i.commonService.isExistInArray(we[at][0].resultQuestionIds,Nt[nt].listQuestions[Tt].id)&&!i.commonService.isExistInArray(we[at][0].correctQuestionIds,Nt[nt].listQuestions[Tt].id)&&!i.commonService.isExistInArray(we[at][0].wrongQuestionIds,Nt[nt].listQuestions[Tt].id)&&(Nt[nt].listQuestions[Tt].countNotAnswer++,kt&&kt.length>0&&(i.commonService.isExistInArray(Nt[nt].listQuestions[Tt].studentWhoNotAnswer,{studentId:kt[0].id,parentId:kt[0].parentId,fullName:kt[0].fullName,nameImages:kt[0].nameImages})||Nt[nt].listQuestions[Tt].studentWhoNotAnswer?.push({studentId:kt[0].id,parentId:kt[0].parentId,fullName:kt[0].fullName,nameImages:kt[0].nameImages}))))}}i.ListQuest={attended:Wt,listQuestions:i.convertStatisticalAllQuestion(d),listClassStatistic:Nt},i.listQuestionLoaded=!0}else i.showErrorSnack(d.message??"");l++,l==s&&a(!0)}if(1==c.tableScoreCheck&&0==i.tableScoreLoaded){if(1==d.success&&d.data){i.examObj=d.data?.examObj,i.limitQuestions=i.examObj?.countQuestion??0;let Et=i.homeworkExamService.hasEssayInExam(i.examObj),Ft=d.data.classroomObjsWithStudentObjs&&d.data.classroomObjsWithStudentObjs.length>0?d.data.classroomObjsWithStudentObjs:new Array,Gt=d.data?.resultObjs&&d.data?.resultObjs.length>0?d.data.resultObjs:new Array,le=i.testedListApiService.mergeStudentWithAvatar(Gt??[]),ee=[],re={};le?.forEach(dn=>{let pe=dn.parentId??"0";re.hasOwnProperty(pe)?re[pe].push(...dn.examResultObjs??[]):re[pe]=dn.examResultObjs??[],ee=ee.concat(re[pe])});let Qe=[],Ne=[],on=[],en=[];i.homeworkExamService.mustInClassroom(i.examObj)&&Ft.length>0&&Ft.forEach(dn=>{let pe=[];dn.studentObjs?.forEach(Pt=>{let wn;en.push(Pt.parentId??"0");let gn=Pt.parentId??"0";re.hasOwnProperty(gn)&&(Array.isArray(Pt.examResultObjs)||(Pt.examResultObjs=[]),Pt.examResultObjs=i.statisticalApiService.findExamResultOfStudent(re[gn],Pt.id??"0")),Pt.examResultObjs&&Pt.examResultObjs.length&&(Pt.examResultObjs.length>1?Pt.examResultObjs.forEach(Ci=>{Ci.testStatus&&(wn=Ci)}):wn=Pt.examResultObjs[0]);let je=wn?.testStatus??0,Ge=wn?.mark?wn.mark:0,rn=wn?.id&&je>0?wn.id:0,Ve=wn?.startedTest?wn.startedTest:null,Cn=wn?.confirmedAt?wn.confirmedAt:null,Qn=wn?.answeredQuestions&&je?wn.answeredQuestions:[],Bn=wn?.subjectMarks?wn.subjectMarks:void 0,ui={...Pt,userId:Pt.userId?.toString(),subjectMarks:Bn,mark:Ge,resultId:rn,startedTest:Ve,confirmedAt:Cn,status:je,answeredQuestions:Qn};pe.push(ui)}),Qe.push({classObj:dn.classroomObj,studentsWithMark:pe})}),Gt.forEach(dn=>{let pe;if(!i.commonService.isExistInArray(en,dn.parentId??"0")){dn.examResultObjs&&dn.examResultObjs.length&&(dn.examResultObjs&&dn.examResultObjs.length>1?dn.examResultObjs.forEach(Bn=>{Bn.testStatus&&(pe=Bn)}):pe=dn.examResultObjs[0]);let Pt=pe?.testStatus??0,wn=pe?.mark?pe.mark:0,gn=pe?.id&&Pt>0?pe.id:0,je=pe?.startedTest?pe.startedTest:null,Ge=pe?.confirmedAt?pe.confirmedAt:null,rn=pe?.answeredQuestions&&Pt?pe.answeredQuestions:[],Ve=pe?.subjectMarks?pe.subjectMarks:void 0,Cn={...dn,userId:dn.userId?.toString(),subjectMarks:Ve,mark:wn,resultId:gn,startedTest:je,confirmedAt:Ge,nameImages:dn.nameImages,nameImage:"",status:Pt,answeredQuestions:rn},Qn=i.commonService.myTranslateInstant("lang_auto_thi_sinh_thi_offline");Cn.fullName=Cn.fullName??Qn+"_"+gn,on.push(Cn)}}),Ne=on;for(let dn of Qe)dn.studentsWithMark=i.checkStatusStudent(dn.classObj&&0==dn.classObj.sortType?i.sortService.sortFirstNameStudents(dn.studentsWithMark??[]):i.sortService.sortArrayByMultipleObjectKeyAsc(i.commonService.myClone(dn.studentsWithMark)??[],"pos","id"),Et);i.TableScore={statisticClass:Qe,statisticNoClass:i.checkStatusStudent(i.sortService.sortFirstNameStudents(Ne),Et)},i.tableScoreLoaded=!0}else i.showErrorSnack(d.message??"");l++,l==s&&a(!0)}})})})()}getObjKeyLength(e){return Object.keys(e).length}checkAnswerQuestionTableExport(e){let i="";return i=e.correct&&!e.isEssay?"lang_auto_dung":e.correct&&e.isEssay?"lang_auto_cau_TL":"lang_auto_sai",this.commonService.myTranslateInstant(i)??""}constructor(e,i,a,r,s,l,c,d,h,_,x){super(),this.statisticalApiService=e,this.testedListApiService=i,this.activeRoute=a,this.sortService=r,this.homeworkExamService=s,this.globalService=l,this._decimalPipe=c,this.dictionaryService=d,this.answerTypeService=h,this.shareFileFlutterService=_,this.timeService=x,this.viewType=-1,this.keyColExcelArr=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],this.examId=-1,this.limitQuestions=0,this.loadingDownload=!1,this.isExportSuccess=void 0,this.isOnApp=!1,this.style_first={border:{top:{style:"thin",color:{rgb:"ff3c8dbc"}},bottom:{style:"thin",color:{rgb:"ff3c8dbc"}},left:{style:"thin",color:{rgb:"ffffffff"}},right:{style:"thin",color:{rgb:"ffffffff"}},diagonal:{style:"thin",color:{rgb:"ffffffff"}},diagonalDown:!0},alignment:{vertical:"center",horizontal:"left",wrapText:!0},font:{sz:11,bold:!0,color:{rgb:"ffffffff"}},fill:{patternType:"solid",fgColor:{rgb:"ff3c8dbc"}}},this.style_header={border:{top:{style:"thin",color:{rgb:"ff3c8dbc"}},bottom:{style:"thin",color:{rgb:"ff3c8dbc"}},left:{style:"thin",color:{rgb:"ffffffff"}},right:{style:"thin",color:{rgb:"ffffffff"}}},alignment:{vertical:"center",horizontal:"center",wrapText:!0},font:{sz:11,bold:!0,color:{rgb:"ffffffff"}},fill:{patternType:"solid",fgColor:{rgb:"2361ae"}}},this.style_body={border:{top:{style:"thin",color:{rgb:"ff757575"}},bottom:{style:"thin",color:{rgb:"ff757575"}},left:{style:"thin",color:{rgb:"ff757575"}},right:{style:"thin",color:{rgb:"ff757575"}}},alignment:{vertical:"center",horizontal:"center",wrapText:!0}},this.style_footer={border:{top:{style:"thin",color:{rgb:"ff757575"}},bottom:{style:"thin",color:{rgb:"ff757575"}},left:{style:"thin",color:{rgb:"ff757575"}},right:{style:"thin",color:{rgb:"ff757575"}}},alignment:{vertical:"center",horizontal:"center",wrapText:!0},font:{sz:11,bold:!0},fill:{patternType:"solid",fgColor:{rgb:"ffffffff"}}},this.statisticalLoaded=!1,this.listQuestionLoaded=!1,this.tableScoreLoaded=!1,this.wb=$e.utils.book_new(),this.Statistic={},this.ListQuest={},this.TableScore={},this.form=new f.cw({statisticalCheck:new f.NI(!0,{nonNullable:!0}),listQuestionCheck:new f.NI(!0,{nonNullable:!0}),tableScoreCheck:new f.NI(!0,{nonNullable:!0})})}ngOnInit(){this.waitDestroy((0,dt.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.examId=Number(this.commonService.getMyParam(this.activeRoute,"id"))??0,this.isOnApp=this.isMobileWebView})),super.ngOnInit()}ngOnDestroy(){this.globalService.stopIntervalFunc("statistic_export_excel1"),this.globalService.stopIntervalFunc("statistic_export_excel2"),this.globalService.stopIntervalFunc("statistic_export_excel3"),super.ngOnDestroy()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(_j),t.Y36(D6.X),t.Y36(O.gz),t.Y36(Kf.V),t.Y36(wp.v),t.Y36(Wf.q),t.Y36(D.JJ),t.Y36(pq.k),t.Y36(hr.i),t.Y36(ys.g),t.Y36(br.D))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-export-excel-new"]],inputs:{viewType:"viewType"},features:[t.qOj],decls:33,vars:20,consts:[[1,"intro-y","flex","items-center"],[1,"text-lg","font-medium","truncate","mr-5"],[1,"report-box","intro-y","mt-3"],[3,"formGroup"],[1,"box","p-5"],[1,"text-slate-500","border-b","border-slate-200","flex","mb-2","pb-2"],[1,"form-check","mt-2"],["name","statistical","formControlName","statisticalCheck","id","checkbox-switch-1","type","checkbox",1,"form-check-input"],["for","checkbox-switch-1",1,"form-check-label"],["id","checkbox-switch-2","name","listquestion","formControlName","listQuestionCheck","type","checkbox",1,"form-check-input"],["for","checkbox-switch-2",1,"form-check-label"],["id","checkbox-switch-3","name","tablescore","formControlName","tableScoreCheck","type","checkbox","value","",1,"form-check-input"],["for","checkbox-switch-3",1,"form-check-label"],[1,"mt-3"],["azt-track-service","export-excel-_De31aTGuF",1,"btn","btn-outline-primary","shadow-md",3,"click"],["xmlns","http://www.w3.org/2000/svg","class","lucide w-4 h-4 mr-2","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",4,"ngIf"],["class","w-4 h-4 inline-block mr-2",4,"ngIf"],["class","col-md-8 mt-4","style","color: rgb(87, 141, 32);",4,"ngIf"],["class","col-md-8 mt-4","style","color: rgb(204, 49, 80);",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","mr-2"],["d","M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"],["points","14 2 14 8 20 8"],["d","M8 13h3"],["d","M8 17h3"],["d","M14 13h3"],["d","M14 17h3"],[1,"w-4","h-4","inline-block","mr-2"],[1,"col-md-8","mt-4",2,"color","rgb(87, 141, 32)"],[1,"col-md-8","mt-4",2,"color","rgb(204, 49, 80)"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"h3",1),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()(),t.TgZ(4,"div",2)(5,"form",3)(6,"div",4)(7,"div",5)(8,"div",6),t._UZ(9,"input",7),t.TgZ(10,"label",8),t._uU(11),t.ALo(12,"mytranslate"),t.qZA()()(),t.TgZ(13,"div",5)(14,"div",6),t._UZ(15,"input",9),t.TgZ(16,"label",10),t._uU(17),t.ALo(18,"mytranslate"),t.qZA()()(),t.TgZ(19,"div",5)(20,"div",6),t._UZ(21,"input",11),t.TgZ(22,"label",12),t._uU(23),t.ALo(24,"mytranslate"),t.qZA()()(),t.TgZ(25,"div",13)(26,"button",14),t.NdJ("click",function(){return i.exportExcel()}),t.YNc(27,_q,7,0,"svg",15),t.YNc(28,fq,2,0,"span",16),t._uU(29),t.ALo(30,"mytranslate"),t.qZA(),t.YNc(31,gq,3,3,"div",17),t.YNc(32,xq,3,3,"div",18),t.qZA()()()()),2&e&&(t.xp6(2),t.hij(" ",t.lcZ(3,10,"lang_testbank_statistical_export_data_to_excel")," "),t.xp6(3),t.Q6J("formGroup",i.form),t.xp6(6),t.hij(" ",t.lcZ(12,12,"lang_testbank_statistical_score_spectrum_statistics")," "),t.xp6(6),t.hij(" ",t.lcZ(18,14,"lang_testbank_statistical_statistics_right_wrong")," "),t.xp6(6),t.hij(" ",t.lcZ(24,16,"lang_testbank_statistical_transcript")," "),t.xp6(4),t.Q6J("ngIf",1!=i.loadingDownload),t.xp6(1),t.Q6J("ngIf",i.loadingDownload),t.xp6(1),t.hij(" ",t.lcZ(30,18,"lang_testbank_statistical_export_file_excel")," "),t.xp6(2),t.Q6J("ngIf",!i.isOnApp&&!0===i.isExportSuccess),t.xp6(1),t.Q6J("ngIf",!i.isOnApp&&!1===i.isExportSuccess))},dependencies:[D.O5,f._Y,f.Wl,f.JJ,f.JL,f.sg,f.u,oo.M,oi.n,jt.JV],styles:["td[_ngcontent-%COMP%]{vertical-align:center!important}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{vertical-align:unset!important}.bg-blue-color[_ngcontent-%COMP%]{background-color:#3c8dbc;color:#fff}hr.solid[_ngcontent-%COMP%]{border-top:1px solid #bbb}input[type=checkbox].export-checkbox[_ngcontent-%COMP%]{width:19px;height:19px;vertical-align:middle}input[type=checkbox].export-checkbox[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]{color:#252525;padding-top:1rem;padding-bottom:.5rem;padding-right:.5rem}input[type=checkbox].export-checkbox[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;width:19px;height:19px;margin:-2px 10px 0 0;vertical-align:middle;cursor:pointer}input[type=checkbox].export-checkbox[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]{margin-left:.5rem}@media only screen and (max-width: 720px){.export-block[_ngcontent-%COMP%]{text-align:center}}"]}),n})();function vq(n,o){1&n&&(t.TgZ(0,"div",2)(1,"div",3)(2,"h3",4),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()(),t.TgZ(5,"div",5),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()()),2&n&&(t.xp6(3),t.hij(" ",t.lcZ(4,2,"lang_auto_bieu_do_pho_diem")," "),t.xp6(3),t.hij("",t.lcZ(7,4,"lang_testbank_statistical_cant_data_statistics"),"."))}function yq(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"td",54),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().$implicit,r=t.oxw(2);return t.KtG(r.goToStudentList(a))}),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()}if(2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.lcZ(2,1,e.classObj.name))}}function wq(n,o){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.registerCount)}}function Cq(n,o){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.testedCount)}}function Tq(n,o){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.markPercent[0].count)}}function kq(n,o){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.ALo(2,"replace"),t.ALo(3,"number"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.Dn7(2,1,t.xi3(3,5,e.markPercent[0].percent,"1.0-2"),",","."))}}function Aq(n,o){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.markPercent[1].count)}}function Sq(n,o){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.ALo(2,"replace"),t.ALo(3,"number"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.Dn7(2,1,t.xi3(3,5,e.markPercent[1].percent,"1.0-2"),",","."))}}function Oq(n,o){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.markPercent[2].count)}}function Eq(n,o){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.ALo(2,"replace"),t.ALo(3,"number"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.Dn7(2,1,t.xi3(3,5,e.markPercent[2].percent,"1.0-2"),",","."))}}function Mq(n,o){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.markPercent[3].count)}}function Iq(n,o){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.ALo(2,"replace"),t.ALo(3,"number"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.Dn7(2,1,t.xi3(3,5,e.markPercent[3].percent,"1.0-2"),",","."))}}function Lq(n,o){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.markPercent[4].count)}}function Pq(n,o){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.ALo(2,"replace"),t.ALo(3,"number"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.Dn7(2,1,t.xi3(3,5,e.markPercent[4].percent,"1.0-2"),",","."))}}function Nq(n,o){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.markPercent[5].count)}}function Zq(n,o){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.ALo(2,"replace"),t.ALo(3,"number"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.Dn7(2,1,t.xi3(3,5,e.markPercent[5].percent,"1.0-2"),",","."))}}function Dq(n,o){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.markPercent[6].count)}}function jq(n,o){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.ALo(2,"replace"),t.ALo(3,"number"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.Dn7(2,1,t.xi3(3,5,e.markPercent[6].percent,"1.0-2"),",","."))}}function qq(n,o){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.markPercent[7].count)}}function Fq(n,o){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.ALo(2,"replace"),t.ALo(3,"number"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.Dn7(2,1,t.xi3(3,5,e.markPercent[7].percent,"1.0-2"),",","."))}}function Qq(n,o){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.markPercent[8].count)}}function Rq(n,o){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.ALo(2,"replace"),t.ALo(3,"number"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.Dn7(2,1,t.xi3(3,5,e.markPercent[8].percent,"1.0-2"),",","."))}}function Uq(n,o){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.markPercent[9].count)}}function Bq(n,o){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.ALo(2,"replace"),t.ALo(3,"number"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.Dn7(2,1,t.xi3(3,5,e.markPercent[9].percent,"1.0-2"),",","."))}}function zq(n,o){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.markPercent[10].count)}}function Jq(n,o){if(1&n&&(t.TgZ(0,"td",51),t._uU(1),t.ALo(2,"replace"),t.ALo(3,"number"),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(t.Dn7(2,1,t.xi3(3,5,e.markPercent[10].percent,"1.0-2"),",","."))}}function Hq(n,o){if(1&n&&(t.TgZ(0,"tr"),t.YNc(1,yq,3,3,"td",52),t.YNc(2,wq,2,1,"td",53),t.YNc(3,Cq,2,1,"td",53),t.YNc(4,Tq,2,1,"td",53),t.YNc(5,kq,4,8,"td",53),t.YNc(6,Aq,2,1,"td",53),t.YNc(7,Sq,4,8,"td",53),t.YNc(8,Oq,2,1,"td",53),t.YNc(9,Eq,4,8,"td",53),t.YNc(10,Mq,2,1,"td",53),t.YNc(11,Iq,4,8,"td",53),t.YNc(12,Lq,2,1,"td",53),t.YNc(13,Pq,4,8,"td",53),t.YNc(14,Nq,2,1,"td",53),t.YNc(15,Zq,4,8,"td",53),t.YNc(16,Dq,2,1,"td",53),t.YNc(17,jq,4,8,"td",53),t.YNc(18,qq,2,1,"td",53),t.YNc(19,Fq,4,8,"td",53),t.YNc(20,Qq,2,1,"td",53),t.YNc(21,Rq,4,8,"td",53),t.YNc(22,Uq,2,1,"td",53),t.YNc(23,Bq,4,8,"td",53),t.YNc(24,zq,2,1,"td",53),t.YNc(25,Jq,4,8,"td",53),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj),t.xp6(1),t.Q6J("ngIf",null!=e.classObj)}}function Gq(n,o){if(1&n&&(t.TgZ(0,"div",6)(1,"div",3)(2,"h3",4),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()(),t.TgZ(5,"div",7)(6,"div",8)(7,"div",9)(8,"div",10)(9,"h3",11),t._uU(10),t.qZA(),t.TgZ(11,"div",12)(12,"div",13),t.O4$(),t.TgZ(13,"svg",14),t._UZ(14,"path",15)(15,"circle",16)(16,"polyline",17),t.qZA(),t._uU(17),t.ALo(18,"mytranslate"),t.qZA(),t.kcU(),t.TgZ(19,"div",18)(20,"div",19),t._uU(21),t.qZA()()(),t.TgZ(22,"div",12)(23,"div",13),t.O4$(),t.TgZ(24,"svg",14),t._UZ(25,"path",15)(26,"circle",16)(27,"line",20)(28,"line",21),t.qZA(),t._uU(29),t.ALo(30,"mytranslate"),t.qZA(),t.kcU(),t.TgZ(31,"div",18)(32,"div",19),t._uU(33),t.qZA(),t.TgZ(34,"div",22),t._uU(35),t.ALo(36,"replace"),t.ALo(37,"number"),t.qZA()()(),t.TgZ(38,"div",12)(39,"div",13),t.O4$(),t.TgZ(40,"svg",14),t._UZ(41,"path",23)(42,"path",24)(43,"path",25),t.qZA(),t._uU(44),t.ALo(45,"mytranslate"),t.qZA(),t.kcU(),t.TgZ(46,"div",18)(47,"div",19),t._uU(48),t.qZA()()()()(),t.TgZ(49,"div",26)(50,"div",27)(51,"p",28),t._uU(52),t.ALo(53,"mytranslate"),t.qZA(),t.TgZ(54,"div",18)(55,"span",19),t._uU(56),t.ALo(57,"replace"),t.ALo(58,"number"),t.qZA()()(),t.TgZ(59,"div",29)(60,"p",28),t._uU(61),t.ALo(62,"mytranslate"),t.qZA(),t.TgZ(63,"div",18)(64,"span",19),t._uU(65),t.qZA(),t.TgZ(66,"div",22),t._uU(67),t.ALo(68,"replace"),t.ALo(69,"number"),t.qZA()()(),t.TgZ(70,"div",27)(71,"p",30),t._uU(72),t.ALo(73,"mytranslate"),t.qZA(),t.TgZ(74,"div",18)(75,"span",19),t._uU(76),t.qZA(),t.TgZ(77,"div",31),t._uU(78),t.ALo(79,"replace"),t.ALo(80,"number"),t.qZA()()(),t.TgZ(81,"div",27)(82,"p",30),t._uU(83),t.ALo(84,"mytranslate"),t.qZA(),t.TgZ(85,"div",18)(86,"span",19),t._uU(87),t.qZA(),t.TgZ(88,"div",32),t._uU(89),t.ALo(90,"replace"),t.ALo(91,"number"),t.qZA()()()()()()(),t.TgZ(92,"div",33),t._UZ(93,"app-export-excel-new",34),t.qZA(),t.TgZ(94,"div",2)(95,"div",3)(96,"h3",4),t._uU(97),t.ALo(98,"mytranslate"),t.qZA()(),t.TgZ(99,"div",35)(100,"div",36)(101,"div",37)(102,"div",38),t._UZ(103,"div",39),t.qZA()()()()(),t.TgZ(104,"div",2)(105,"div",3)(106,"h3",4),t._uU(107),t.ALo(108,"mytranslate"),t.qZA()(),t.TgZ(109,"div",40)(110,"div",41)(111,"table",42)(112,"thead",43)(113,"tr")(114,"th",44),t._uU(115),t.ALo(116,"mytranslate"),t.qZA(),t.TgZ(117,"th",45),t._uU(118),t.ALo(119,"mytranslate"),t.qZA(),t.TgZ(120,"th",45),t._uU(121,"< 1"),t.qZA(),t.TgZ(122,"th",45),t._uU(123,"< 2"),t.qZA(),t.TgZ(124,"th",45),t._uU(125,"< 3"),t.qZA(),t.TgZ(126,"th",45),t._uU(127,"< 4"),t.qZA(),t.TgZ(128,"th",45),t._uU(129,"< 5"),t.qZA(),t.TgZ(130,"th",45),t._uU(131,"< 6"),t.qZA(),t.TgZ(132,"th",45),t._uU(133,"< 7"),t.qZA(),t.TgZ(134,"th",45),t._uU(135,"< 8"),t.qZA(),t.TgZ(136,"th",45),t._uU(137,"< 9"),t.qZA(),t.TgZ(138,"th",45),t._uU(139,"<= 10"),t.qZA(),t.TgZ(140,"th",45),t._uU(141),t.ALo(142,"mytranslate"),t.qZA()()(),t.TgZ(143,"tbody",46)(144,"tr"),t._UZ(145,"td"),t.TgZ(146,"td",47),t._uU(147),t.ALo(148,"mytranslate"),t.qZA(),t.TgZ(149,"td",47),t._uU(150),t.ALo(151,"mytranslate"),t.qZA(),t.TgZ(152,"td",48),t._uU(153),t.ALo(154,"mytranslate"),t.qZA(),t.TgZ(155,"td",48),t._uU(156,"%"),t.qZA(),t.TgZ(157,"td",48),t._uU(158),t.ALo(159,"mytranslate"),t.qZA(),t.TgZ(160,"td",48),t._uU(161,"%"),t.qZA(),t.TgZ(162,"td",48),t._uU(163),t.ALo(164,"mytranslate"),t.qZA(),t.TgZ(165,"td",48),t._uU(166,"%"),t.qZA(),t.TgZ(167,"td",48),t._uU(168),t.ALo(169,"mytranslate"),t.qZA(),t.TgZ(170,"td",48),t._uU(171,"%"),t.qZA(),t.TgZ(172,"td",48),t._uU(173),t.ALo(174,"mytranslate"),t.qZA(),t.TgZ(175,"td",48),t._uU(176,"%"),t.qZA(),t.TgZ(177,"td",48),t._uU(178),t.ALo(179,"mytranslate"),t.qZA(),t.TgZ(180,"td",48),t._uU(181,"%"),t.qZA(),t.TgZ(182,"td",48),t._uU(183),t.ALo(184,"mytranslate"),t.qZA(),t.TgZ(185,"td",48),t._uU(186,"%"),t.qZA(),t.TgZ(187,"td",48),t._uU(188),t.ALo(189,"mytranslate"),t.qZA(),t.TgZ(190,"td",48),t._uU(191,"%"),t.qZA(),t.TgZ(192,"td",48),t._uU(193),t.ALo(194,"mytranslate"),t.qZA(),t.TgZ(195,"td",48),t._uU(196,"%"),t.qZA(),t.TgZ(197,"td",48),t._uU(198),t.ALo(199,"mytranslate"),t.qZA(),t.TgZ(200,"td",48),t._uU(201,"%"),t.qZA(),t.TgZ(202,"td",48),t._uU(203),t.ALo(204,"mytranslate"),t.qZA(),t.TgZ(205,"td",48),t._uU(206,"%"),t.qZA()(),t.YNc(207,Hq,26,25,"tr",49),t.TgZ(208,"tr",50)(209,"td",51),t._uU(210),t.ALo(211,"mytranslate"),t.qZA(),t.TgZ(212,"td",51),t._uU(213),t.qZA(),t.TgZ(214,"td",51),t._uU(215),t.qZA(),t.TgZ(216,"td",51),t._uU(217),t.qZA(),t.TgZ(218,"td",51),t._uU(219),t.ALo(220,"replace"),t.ALo(221,"number"),t.qZA(),t.TgZ(222,"td",51),t._uU(223),t.qZA(),t.TgZ(224,"td",51),t._uU(225),t.ALo(226,"replace"),t.ALo(227,"number"),t.qZA(),t.TgZ(228,"td",51),t._uU(229),t.qZA(),t.TgZ(230,"td",51),t._uU(231),t.ALo(232,"replace"),t.ALo(233,"number"),t.qZA(),t.TgZ(234,"td",51),t._uU(235),t.qZA(),t.TgZ(236,"td",51),t._uU(237),t.ALo(238,"replace"),t.ALo(239,"number"),t.qZA(),t.TgZ(240,"td",51),t._uU(241),t.qZA(),t.TgZ(242,"td",51),t._uU(243),t.ALo(244,"replace"),t.ALo(245,"number"),t.qZA(),t.TgZ(246,"td",51),t._uU(247),t.qZA(),t.TgZ(248,"td",51),t._uU(249),t.ALo(250,"replace"),t.ALo(251,"number"),t.qZA(),t.TgZ(252,"td",51),t._uU(253),t.qZA(),t.TgZ(254,"td",51),t._uU(255),t.ALo(256,"replace"),t.ALo(257,"number"),t.qZA(),t.TgZ(258,"td",51),t._uU(259),t.qZA(),t.TgZ(260,"td",51),t._uU(261),t.ALo(262,"replace"),t.ALo(263,"number"),t.qZA(),t.TgZ(264,"td",51),t._uU(265),t.qZA(),t.TgZ(266,"td",51),t._uU(267),t.ALo(268,"replace"),t.ALo(269,"number"),t.qZA(),t.TgZ(270,"td",51),t._uU(271),t.qZA(),t.TgZ(272,"td",51),t._uU(273),t.ALo(274,"replace"),t.ALo(275,"number"),t.qZA(),t.TgZ(276,"td",51),t._uU(277),t.qZA(),t.TgZ(278,"td",51),t._uU(279),t.ALo(280,"replace"),t.ALo(281,"number"),t.qZA()()()()()()()),2&n){const e=t.oxw();let i;t.xp6(3),t.hij(" ",t.lcZ(4,66,"lang_auto_chi_so_co_ban")," "),t.xp6(7),t.hij(" ",e.examCommonStatistical.name," "),t.xp6(7),t.hij(" ",t.lcZ(18,68,"lang_auto_so_nguoi_dang_ky_thi")," "),t.xp6(4),t.Oqu(e.examCommonStatistical.totalRegister),t.xp6(8),t.hij(" ",t.lcZ(30,70,"lang_auto_so_nguoi_thi")," "),t.xp6(4),t.Oqu(e.examCommonStatistical.totalNotComplete),t.xp6(2),t.hij("",null!==(i=t.Dn7(36,72,t.xi3(37,76,e.examCommonStatistical.totalNotComplete/e.examCommonStatistical.totalRegister*100,"1.0-2"),",","."))&&void 0!==i?i:0,"%"),t.xp6(9),t.hij(" ",t.lcZ(45,79,"lang_auto_tong_luot_lam")," "),t.xp6(4),t.Oqu(e.examCommonStatistical.totalAttendee),t.xp6(4),t.hij(" ",t.lcZ(53,81,"lang_auto_diem_trung_binh")," "),t.xp6(4),t.Oqu(t.Dn7(57,83,t.xi3(58,87,e.examCommonStatistical.averageMark,"1.0-2"),",",".")),t.xp6(5),t.hij(" ",t.lcZ(62,90,"lang_auto_so_hoc_sinh_dat_diem")+" <1"," "),t.xp6(4),t.Oqu(e.examCommonStatistical.totalLte1),t.xp6(2),t.hij("",t.Dn7(68,92,t.xi3(69,96,100*e.examCommonStatistical.totalLte1/(e.examCommonStatistical.totalRegister-e.examCommonStatistical.totalNotComplete),"1.0-2"),",","."),"%"),t.xp6(5),t.Oqu(t.lcZ(73,99,"lang_auto_so_hoc_sinh_dat_diem")+"(>=5)"),t.xp6(4),t.Oqu(e.examCommonStatistical.totalGte5),t.xp6(2),t.hij("",t.Dn7(79,101,t.xi3(80,105,100*e.examCommonStatistical.totalGte5/(e.examCommonStatistical.totalRegister-e.examCommonStatistical.totalNotComplete),"1.0-2"),",","."),"%"),t.xp6(5),t.hij(" ",t.lcZ(84,108,"lang_auto_moc_diem_co_nhieu_hoc_sinh_dat_duoc_nhat")," "),t.xp6(4),t.Oqu(e.examCommonStatistical.markPopular),t.xp6(2),t.hij("",t.Dn7(90,110,t.xi3(91,114,e.examCommonStatistical.totalPopular/(e.examCommonStatistical.totalRegister-e.examCommonStatistical.totalNotComplete)*100,"1.0-2"),",","."),"%"),t.xp6(4),t.Q6J("viewType",e.viewType),t.xp6(4),t.hij(" ",t.lcZ(98,117,"lang_auto_bieu_do_pho_diem")," "),t.xp6(6),t.Q6J("chart",e.chart),t.xp6(4),t.hij(" ",t.lcZ(108,119,"lang_auto_bang_tan_so")," "),t.xp6(8),t.Oqu(t.lcZ(116,121,"lang_testbank_statistical_class")),t.xp6(3),t.Oqu(t.lcZ(119,123,"lang_testbank_statistical_number_student")),t.xp6(23),t.hij("",t.lcZ(142,125,"lang_testbank_statistical_on_tb")," (>= 5)"),t.xp6(6),t.Oqu(t.lcZ(148,127,"lang_button_register")),t.xp6(3),t.Oqu(t.lcZ(151,129,"lang_testbank_statistical_join_exam")),t.xp6(3),t.Oqu(t.lcZ(154,131,"lang_auto_amount")),t.xp6(5),t.Oqu(t.lcZ(159,133,"lang_auto_amount")),t.xp6(5),t.Oqu(t.lcZ(164,135,"lang_auto_amount")),t.xp6(5),t.Oqu(t.lcZ(169,137,"lang_auto_amount")),t.xp6(5),t.Oqu(t.lcZ(174,139,"lang_auto_amount")),t.xp6(5),t.Oqu(t.lcZ(179,141,"lang_auto_amount")),t.xp6(5),t.Oqu(t.lcZ(184,143,"lang_auto_amount")),t.xp6(5),t.Oqu(t.lcZ(189,145,"lang_auto_amount")),t.xp6(5),t.Oqu(t.lcZ(194,147,"lang_auto_amount")),t.xp6(5),t.Oqu(t.lcZ(199,149,"lang_auto_amount")),t.xp6(5),t.Oqu(t.lcZ(204,151,"lang_auto_amount")),t.xp6(4),t.Q6J("ngForOf",e.statistic),t.xp6(3),t.Oqu(t.lcZ(211,153,"lang_testbank_statistical_total")),t.xp6(3),t.Oqu(e.countStudentRegister),t.xp6(2),t.Oqu(e.countStudentTakeExam),t.xp6(2),t.Oqu(e.markPointOne),t.xp6(2),t.Oqu(t.Dn7(220,155,t.xi3(221,159,e.markPercentOne,"1.0-2"),",",".")),t.xp6(4),t.Oqu(e.markPointTwo),t.xp6(2),t.Oqu(t.Dn7(226,162,t.xi3(227,166,e.markPercentTwo,"1.0-2"),",",".")),t.xp6(4),t.Oqu(e.markPointThree),t.xp6(2),t.Oqu(t.Dn7(232,169,t.xi3(233,173,e.markPercentThree,"1.0-2"),",",".")),t.xp6(4),t.Oqu(e.markPointFour),t.xp6(2),t.Oqu(t.Dn7(238,176,t.xi3(239,180,e.markPercentFour,"1.0-2"),",",".")),t.xp6(4),t.Oqu(e.markPointFive),t.xp6(2),t.Oqu(t.Dn7(244,183,t.xi3(245,187,e.markPercentFive,"1.0-2"),",",".")),t.xp6(4),t.Oqu(e.markPointSix),t.xp6(2),t.Oqu(t.Dn7(250,190,t.xi3(251,194,e.markPercentSix,"1.0-2"),",",".")),t.xp6(4),t.Oqu(e.markPointSeven),t.xp6(2),t.Oqu(t.Dn7(256,197,t.xi3(257,201,e.markPercentSeven,"1.0-2"),",",".")),t.xp6(4),t.Oqu(e.markPointEight),t.xp6(2),t.Oqu(t.Dn7(262,204,t.xi3(263,208,e.markPercentEight,"1.0-2"),",",".")),t.xp6(4),t.Oqu(e.markPointNine),t.xp6(2),t.Oqu(t.Dn7(268,211,t.xi3(269,215,e.markPercentNine,"1.0-2"),",",".")),t.xp6(4),t.Oqu(e.markPointTen),t.xp6(2),t.Oqu(t.Dn7(274,218,t.xi3(275,222,e.markPercentTen,"1.0-2"),",",".")),t.xp6(4),t.Oqu(e.markPointAvg),t.xp6(2),t.Oqu(t.Dn7(280,225,t.xi3(281,229,e.markPercentAvg,"1.0-2"),",","."))}}let $q=(()=>{class n extends St.Q{getDataStatistic(){if(this.initStatusObj(),this.dataStatistical){let e={id:this.dataStatistical.id??0,categoryId:this.dataStatistical.categoryId??0,name:this.dataStatistical.name??"",totalRegister:this.dataStatistical.totalRegister??0,totalNotComplete:this.dataStatistical.totalNotComplete??0,totalAttendee:this.dataStatistical.totalAttendee??0,averageMark:this.dataStatistical.averageMark??0,markPopular:this.dataStatistical.markPopular??0,totalPopular:this.dataStatistical.totalPopular??0,totalLte1:this.dataStatistical.totalLte1??0,totalGte5:this.dataStatistical.totalGte5??0};this.examCommonStatistical=e,this.examPageResultService.apiExamPageResultGetExamClassroomFrequencyMarkGet(e.id).subscribe(i=>{if(i.success&&i.data){let a=[];i.data.objs?.forEach(r=>{let s={classObj:{id:r.classroomId,name:r.classroomName??"lang_testbank_statistical_freelance_contestant",teacherId:0,showAddStudent:0,countStudents:0,grade:0},registerCount:r.totalRegister,testedCount:r.totalAttendee,markPercent:this.calcMarkPerCentForClassroom(r.marks??[],r.totalAttendee??0)};a.push(s)}),this.readyData(a)}else this.doneLoadingEmit.emit(!1),this.showErrorSnack(i.message??"")})}else this.doneLoadingEmit.emit(!1)}readyData(e){this.statistic=e,this.totalStudentRegister(this.statistic),this.totalStudentTakeExam(this.statistic),this.totalPercent(this.statistic),this.totalPoint(this.statistic),this.createChart(),this.doneLoadingEmit.emit(!0),this.successStatusObj()}calcMarkPerCentForClassroom(e,i){let a=[],r=0;for(let l=1;l<=10;l++){let c={key:"",count:0,percent:0};if(e[l-1]){let d=e[l-1];0==d.fromMark&&1==d.toMark?c.key="<1":1==d.fromMark&&2==d.toMark?c.key="<2":2==d.fromMark&&3==d.toMark?c.key="<3":3==d.fromMark&&4==d.toMark?c.key="<4":4==d.fromMark&&5==d.toMark?c.key="<5":5==d.fromMark&&6==d.toMark?(c.key="<6",r+=d.total??0):6==d.fromMark&&7==d.toMark?(c.key="<7",r+=d.total??0):7==d.fromMark&&8==d.toMark?(c.key="<8",r+=d.total??0):8==d.fromMark&&9==d.toMark?(c.key="<9",r+=d.total??0):(c.key="<=10",r+=d.total??0),c.count=d.total??0,c.percent=this.homeworkExamService.calcPercent(d.total,i)}else c.key="<"+l;a.push(c)}let s={key:"Avg",count:r,percent:this.homeworkExamService.calcPercent(r,i)};return a.push(s),a}createChart(){let e=this.commonService.myTranslateInstant("lang_auto_thong_ke_diem_thi")??"",i=this.commonService.myTranslateInstant("lang_auto_so_luong")??"",r=new y.kL({chart:{type:"column",style:{fontFamily:"Arial"}},colors:["#2361ae"],title:{style:{wordWrap:"break-word","text-align":"center"},text:e+"_"+this.examCommonStatistical.name,useHTML:!0},credits:{enabled:!1},xAxis:{categories:["< 1","< 2","< 3","< 4","< 5","< 6","< 7","< 8","< 9","<= 10"]},yAxis:{title:{text:""}},plotOptions:{series:{dataLabels:{enabled:!0,align:"center"}}},series:[{name:i,type:"column",data:[this.markPointOne,this.markPointTwo,this.markPointThree,this.markPointFour,this.markPointFive,this.markPointSix,this.markPointSeven,this.markPointEight,this.markPointNine,this.markPointTen]}]});this.chart=r}totalPercent(e){var i=0,a=0,r=0,s=0,l=0,c=0,d=0,h=0,_=0,x=0,b=0,T=0;for(let P=0;P<e.length;P++)e[P]&&(T+=e[P].testedCount??0,i+=e[P].markPercent[0].count??0,a+=e[P].markPercent[1].count??0,r+=e[P].markPercent[2].count??0,s+=e[P].markPercent[3].count??0,l+=e[P].markPercent[4].count??0,c+=e[P].markPercent[5].count??0,d+=e[P].markPercent[6].count??0,h+=e[P].markPercent[7].count??0,_+=e[P].markPercent[8].count??0,x+=e[P].markPercent[9].count??0,b+=e[P].markPercent[10].count??0);this.markPercentOne=100*i/T,this.markPercentTwo=100*a/T,this.markPercentThree=100*r/T,this.markPercentFour=100*s/T,this.markPercentFive=100*l/T,this.markPercentSix=100*c/T,this.markPercentSeven=100*d/T,this.markPercentEight=100*h/T,this.markPercentNine=100*_/T,this.markPercentTen=100*x/T,this.markPercentAvg=100*b/T}totalPoint(e){var i=0,a=0,r=0,s=0,l=0,c=0,d=0,h=0,_=0,x=0,b=0;for(let T=0;T<e.length;T++)e[T]&&(i+=e[T].markPercent[0].count??0,a+=e[T].markPercent[1].count??0,r+=e[T].markPercent[2].count??0,s+=e[T].markPercent[3].count??0,l+=e[T].markPercent[4].count??0,c+=e[T].markPercent[5].count??0,d+=e[T].markPercent[6].count??0,h+=e[T].markPercent[7].count??0,_+=e[T].markPercent[8].count??0,x+=e[T].markPercent[9].count??0,b+=e[T].markPercent[10].count??0);this.markPointOne=i,this.markPointTwo=a,this.markPointThree=r,this.markPointFour=s,this.markPointFive=l,this.markPointSix=c,this.markPointSeven=d,this.markPointEight=h,this.markPointNine=_,this.markPointTen=x,this.markPointAvg=b}totalStudentRegister(e){var i=0;for(let a=0;a<e.length;a++)i+=e[a].registerCount??0;this.countStudentRegister=i}totalStudentTakeExam(e){var i=0;for(let a=0;a<e.length;a++)i+=e[a].testedCount??0;this.countStudentTakeExam=i}goToStudentList(e){e.classObj?.id&&e.classObj?.id>0&&this.commonService.myNavigationWithQueryString(`/admin/student/classroom-details/${e.classObj.id}/0`,"?backto="+encodeURIComponent(`/admin/testbank/statistic/${this.examCommonStatistical.categoryId??0}/${this.examCommonStatistical.id}`))}ngOnChanges(){this.dataStatistical&&!this.commonService.isEmptyObj(this.dataStatistical)&&this.getDataStatistic()}ngOnInit(){this.dataStatistical&&!this.commonService.isEmptyObj(this.dataStatistical)&&this.getDataStatistic(),super.ngOnInit()}constructor(e,i){super(),this.homeworkExamService=e,this.examPageResultService=i,this.viewType=-1,this.doneLoadingEmit=new t.vpe,this.chart=new y.kL,this.examId=-1,this.statistic=[],this.examCommonStatistical={id:0,categoryId:0,name:"",totalRegister:0,totalNotComplete:0,totalAttendee:0,averageMark:0,markPopular:0,totalPopular:0,totalLte1:0,totalGte5:0},this.totalAttended=0,this.markPointOne=0,this.markPointTwo=0,this.markPointThree=0,this.markPointFour=0,this.markPointFive=0,this.markPointSix=0,this.markPointSeven=0,this.markPointEight=0,this.markPointNine=0,this.markPointTen=0,this.markPointAvg=0,this.markPercentOne=0,this.markPercentTwo=0,this.markPercentThree=0,this.markPercentFour=0,this.markPercentFive=0,this.markPercentSix=0,this.markPercentSeven=0,this.markPercentEight=0,this.markPercentNine=0,this.markPercentTen=0,this.markPercentAvg=0,this.countStudentRegister=0,this.countStudentTakeExam=0,this.freeStudentCount=0,this.freeStudentTakeTest=0,this.freeStudentList=[]}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(wp.v),t.Y36(Ke.DR))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-statistical-point-new"]],inputs:{viewType:"viewType",dataStatistical:"dataStatistical"},outputs:{doneLoadingEmit:"doneLoadingEmit"},features:[t.qOj,t.TTD],decls:3,vars:2,consts:[["class","col-span-12",4,"ngIf","ngIfElse"],["statisticIO",""],[1,"col-span-12"],[1,"intro-y","block","sm:flex","items-center"],[1,"text-lg","font-medium","truncate","mr-5"],[1,"p-3","m-3","text-center","alert","text-slate-500","font-medium"],[1,"col-span-12","lg:col-span-8","xl:col-span-8"],[1,"report-box","intro-y","mt-3"],[1,"box","sm:flex"],[1,"flex-1","p-5"],[1,"text-3xl"],[1,"text-lg","font-medium"],[1,"mt-3"],[1,"text-slate-500","text-xs","uppercase","flex","items-center"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","mr-2"],["d","M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"],["cx","9","cy","7","r","4"],["points","16 11 18 13 22 9"],[1,"mt-1.5","flex","items-center"],[1,"text-base"],["x1","17","y1","8","x2","22","y2","13"],["x1","22","y1","8","x2","17","y2","13"],[1,"report-box__indicator","bg-danger","tooltip","cursor-pointer","ml-2"],["d","M20 19.5v.5a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8.5L18 5.5"],["d","M8 18h1"],["d","M18.42 9.61a2.1 2.1 0 1 1 2.97 2.97L16.95 17 13 18l.99-3.95 4.43-4.44Z"],[1,"p-5","flex","flex-col","justify-center","flex-1","border-t","sm:border-t-0","sm:border-l","border-slate-200","dark:border-darkmode-300","border-dashed"],[1,"static-info-item"],[1,"text-slate-500","text-xs","uppercase"],[1,"static-info-item","mt-5"],[1,"text-slate-500","text-xs","mt-5","uppercase"],[1,"report-box__indicator","bg-warning","tooltip","cursor-pointer","ml-2"],[1,"report-box__indicator","bg-primary","tooltip","cursor-pointer","ml-2"],[1,"col-span-12","lg:col-span-8","xl:col-span-4"],[3,"viewType"],[1,"report-box","intro-x","mt-3"],[1,"box","p-5"],[1,"h-[400px]"],[1,"chart-center"],[3,"chart"],[1,"report-box","intro-x","mt-5"],[1,"box","p-5","overflow-x-auto"],[1,"table","table-bordered"],[1,"bg-slate-100","dark:bg-darkmode-400"],[1,"whitespace-nowrap",2,"text-align","center","vertical-align","middle"],["colspan","2",1,"whitespace-nowrap",2,"text-align","center","vertical-align","middle"],[1,"text-center"],[2,"text-align","center","vertical-align","middle"],[2,"padding","9.5px !important","text-align","center","vertical-align","middle"],[4,"ngFor","ngForOf"],[1,"font-medium"],[2,"padding","9.5px !important"],["azt-track-service","statistical-point-H1Y1HbVLKAS","style","padding: 9.5px !important; cursor: pointer;",3,"click",4,"ngIf"],["style","padding: 9.5px !important",4,"ngIf"],["azt-track-service","statistical-point-H1Y1HbVLKAS",2,"padding","9.5px !important","cursor","pointer",3,"click"]],template:function(e,i){if(1&e&&(t.YNc(0,vq,8,6,"div",0),t.YNc(1,Gq,282,232,"ng-template",null,1,t.W1O)),2&e){const a=t.MAs(2);t.Q6J("ngIf",i.statistic&&0!=i.statistic.length&&i.freeStudentList&&0!=i.freeStudentList.length)("ngIfElse",a)}},dependencies:[D.sg,D.O5,y.Dm,bq,D.JJ,jt.JV,jt.qY],styles:["td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{vertical-align:middle!important}.bg-blue-color[_ngcontent-%COMP%]{background-color:#2361ae;color:#fff}.color-white[_ngcontent-%COMP%]{color:#fff}.table-border-slim[_ngcontent-%COMP%]{border:none!important}.table-bordered[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table-bordered[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:.5px solid #dee2e6!important}.border-top-none[_ngcontent-%COMP%]{border-top:none!important}.border-left-none[_ngcontent-%COMP%]{border-left:none!important}.border-right-none[_ngcontent-%COMP%]{border-right:none}.border-right-bold[_ngcontent-%COMP%]{border-right:1px solid #dee2e6!important}.table-responsive[_ngcontent-%COMP%]::-webkit-scrollbar{background-color:#fff;width:16px}.table-responsive[_ngcontent-%COMP%]::-webkit-scrollbar-track{background-color:#fff}.table-responsive[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#babac0;border-radius:16px;border:4px solid #fff}.table-responsive[_ngcontent-%COMP%]::-webkit-scrollbar-button{display:none}.block-total[_ngcontent-%COMP%]{font-weight:700;color:#000;background:#fff}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center;vertical-align:middle}@media screen and (max-width: 768px){.table-responsive[_ngcontent-%COMP%]{display:block}}"]}),n})();function Yq(n,o){1&n&&t._UZ(0,"azt-loading-effect")}const Kq=function(n){return{hiddenIpt:n}};let Wq=(()=>{class n extends St.Q{getDataStatistical(){this.initStatusObj(),this.examPageResultService.apiExamPageResultGetExamInfoGet(this.examId).subscribe(e=>{1==e.success&&e.data?this.examInfoForStatistical=e.data??{}:(this.showErrorSnack(e.message??""),this.stopStatusObj())})}doneLoadingFunc(e){this.doneLoadCount++,this.doneLoadCount>=3&&this.stopStatusObj()}ngOnInit(){this.commonService.translateMetaData({title:"lang_cms_test_statistical_title",description:"lang_cms_test_statistical_description",image:"lang_cms_test_image"});let e=this.commonService.getMyParam(this.activeRoute,"cat_id")??"",i=this.commonService.getMyParam(this.activeRoute,"id")??"";this.backToLink=this.commonService.getMyQueryParam("backto")?this.commonService.getMyQueryParam("backto")??"":`/admin/testbank/exam-results-list/${e}/${i}/0`,this.waitDestroy((0,dt.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.examId=Number(this.commonService.getMyParam(this.activeRoute,"id"))??0,this.getDataStatistical()})),super.ngOnInit()}constructor(e,i){super(),this.examPageResultService=e,this.activeRoute=i,this.backToLink="",this.viewType=1,this.examId=0,this.doneLoadCount=0}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Ke.DR),t.Y36(O.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-statistical-new"]],features:[t.qOj],decls:8,vars:12,consts:[[3,"headerBackToLink"],[1,"statistical","mx-auto","mt-5"],[4,"ngIf"],[1,"grid","grid-cols-12","gap-6",3,"ngClass"],[1,"col-span-12","grid","grid-cols-12","gap-6",3,"viewType","dataStatistical","doneLoadingEmit"],[1,"col-span-12",3,"viewType","dataStatistical","doneLoadingEmit"],[3,"isScrollToTop"]],template:function(e,i){1&e&&(t.TgZ(0,"teacher-layout",0)(1,"div",1),t.YNc(2,Yq,1,0,"azt-loading-effect",2),t.TgZ(3,"div",3)(4,"app-statistical-point-new",4),t.NdJ("doneLoadingEmit",function(r){return i.doneLoadingFunc(r)}),t.qZA(),t.TgZ(5,"app-list-question-new",5),t.NdJ("doneLoadingEmit",function(r){return i.doneLoadingFunc(r)}),t.qZA(),t.TgZ(6,"app-table-score-new",5),t.NdJ("doneLoadingEmit",function(r){return i.doneLoadingFunc(r)}),t.qZA()(),t._UZ(7,"azt-scroll-to-top-bottom",6),t.qZA()()),2&e&&(t.Q6J("headerBackToLink",i.backToLink),t.xp6(2),t.Q6J("ngIf",i.statusObj.loading),t.xp6(1),t.Q6J("ngClass",t.VKq(10,Kq,i.statusObj.loading)),t.xp6(1),t.Q6J("viewType",i.viewType)("dataStatistical",i.examInfoForStatistical),t.xp6(1),t.Q6J("viewType",i.viewType)("dataStatistical",i.examInfoForStatistical),t.xp6(1),t.Q6J("viewType",i.viewType)("dataStatistical",i.examInfoForStatistical),t.xp6(1),t.Q6J("isScrollToTop",!0))},dependencies:[D.mk,D.O5,si.l,tg.M,fo._,Bj,hq,$q],encapsulation:2}),n})();var Ep=M(17738),Vq=M(80581);class Xq{process(o){let e=["(^c\xe2u\\s*\\d{1,4}[^0-9])","(^ca\u0302u\\s*\\d{1,4}[^0-9])","(^c\xa9u\\s*\\d{1,4}[^0-9])","(^ca\u201au\\s*\\d{1,4}[^0-9])","(^b\xe0i\\s*\\d{1,4}[^0-9])","(^ba\u0300i\\s*\\d{1,4}[^0-9])","(^cau\\s*\\d{1,4}[^0-9])","(^bai\\s*\\d{1,4}[^0-9])","(^question\\s*\\d{1,4}[^0-9])","(^questions\\s*\\d{1,4}[^0-9])","(^\\[\\d{1,4}\\][^0-9])","(^\\d+\\s*\\(nb\\))","(^\\d+\\s*\\(th\\))","(^\\d+\\s*\\(vd\\))","(^\\d+\\s*\\(vdc\\))","(^c\xe2u\\s*\\d{1,4}[\\s\\.:]*$)","(^ca\u0302u\\s*\\d{1,4}[\\s\\.:]*$)","(^c\xa9u\\s*\\d{1,4}[\\s\\.:]*$)","(^ca\u201au\\s*\\d{1,4}[\\s\\.:]*$)","(^b\xe0i\\s*\\d{1,4}[\\s\\.:]*$)","(^ba\u0300i\\s*\\d{1,4}[\\s\\.:]*$)","(^cau\\s*\\d{1,4}[\\s\\.:]*$)","(^bai\\s*\\d{1,4}[\\s\\.:]*$)","(^questions\\s*\\d{1,4}[\\s\\.:]*$)","(^question\\s*\\d{1,4}[\\s\\.:]*$)"],i=["(^(\\d+\\s*\\.)\\s*[\\.0-9])","(^(\\d+\\s*\\.)\\s*\\(\\s*\\d+\\s*\\))","(^(\\d+\\s*\\.)\\s*[^\\s]\\s*[^\\s0-9])","(^\\d+\\s*\\.\\s*$)"],a=["(H\u01af\u1edaNG\\s*D\u1eaaN)","(\u01af\u1edaNG\\s*D\u1eaaN\\s*GI\u1ea2I\\s*CHI)","(GI\u1ea2I\\s*TH\xcdCH\\s*CHI\\s*TI\u1ebeT)","(H\u01b0\u1edbng\\s*d\u1eabn\\s*gi\u1ea3i)","(L\u1eddi\\s*gi\u1ea3i)","(L\u1edcI\\s*GI\u1ea2I)","(GI\u1ea2I\\s*CHI\\s*TI\u1ebeT)","(HD:)","(GLOSSARY)"],r=0,s=[],l=[];for(let d of o){let h=this.do(d,e,i);null!=h?(s.push({idx:r,val:Vq.Utils.capitalizeFirstLetter(h.olabel)}),l.push("q")):(h=this.match(d,a),null!=h&&l.push("h")),r++}if(l.join("-").startsWith("q-h-q-h")){let d=1;for(let h of s)o[h.idx]=o[h.idx].replace(h.val,h.val.replace(/\d+/g,d+"")),d++}}do(o,e,i){let a=this.matchPos(o,e,i);if(a.value){let r=null;for(let _=a.value.length-1;_>=0;_--)if(a.value[_]){r=a.value[_];break}if(null==r)return null;let s=o.replace(/\|/g,"").toLowerCase().indexOf(r),l=s,c="",d=o.toLowerCase();for((r.endsWith("(")||r.endsWith("["))&&(r=r.substring(0,r.length-1));l<d.length&&("|"!=d[l]&&(c+=d[l]),l++,c!=r););return{pos:[s,l],olabel:r}}return null}matchPos(o,e,i){let a=o.replace(/\|/g,"").toLowerCase().trim(),r=e.join("|"),s=a.matchAll(r).next();return s.value||(r=i.join("|"),s=a.matchAll(r).next()),s}match(o,e){let i=o.replace(/\|/g,"").trim().match(e.join("|"));return null!=i&&i.length>0?{pos:[0,0],olabel:""}:null}}let tF=(()=>{class n{constructor(e,i,a,r,s,l,c,d,h){this.commonService=e,this.cdnService=i,this.infoService=a,this.questionService=r,this.examCategoryService=s,this.apiUploadService=l,this.userService=c,this.questionSaveService=d,this.examService=h,this.saveParts=[],this.cropPdfParams="",this.configRenderService=new Ue.v,this.apiCallbackCache=new Map,this.apiDataCache=new Map,this.loadingManager=new Map,this.MATH_PAT=/\[!m:\$([^\$\]]+)\$\]/g}init(){return new Promise((e,i)=>{this.commonService.loadScriptPromises([{source:this.cdnService.convertCdnLinkOfGitHub("js/mnpaint_bundle.js?v=0.3"),name:"mnpaint_bundle.js"},{source:this.cdnService.registerJsCdn("min.azota_docx_script"),name:"min.azota_docx_script"},{source:this.cdnService.convertCdnLinkOfGitHub("js/SaxonJS2_v2.js"),name:"SaxonJS2_v2.js"},{source:this.cdnService.convertCdnLinkOfGitHub("sprintf.min.js"),name:"sprintf.min.js"},{source:this.cdnService.convertCdnLinkOfGitHub("bundle.js"),name:"bundle.js"},{source:this.cdnService.convertCdnLinkOfGitHub("wmf.v1.js"),name:"wmf.v1.js"},{source:this.cdnService.convertCdnLinkOfGitHub("math-editor/mathquill.min.js"),name:"mathquill.min.js"},{source:"https://cdnjs.cloudflare.com/ajax/libs/interact.js/1.10.11/interact.min.js",name:"interact.min.js"},{source:this.cdnService.convertCdnLinkOfGitHub("js/FromEMF.f1.js"),name:"FromEMF.js"},{source:this.cdnService.convertCdnLinkOfGitHub("js/ToContext2D.f1.js"),name:"ToContext2D.js"},{source:this.cdnService.convertCdnLinkOfGitHub("js/UDOC.f1.js"),name:"UDOC.js"}]).then(()=>{this.infoService.apiInfoGetConfigObjsGet("CROPPDF_PARAMS").subscribe(a=>{this.cropPdfParams=a.CROPPDF_PARAMS,e()})}).catch(a=>{i(a)})})}hasStyleAns(e,i,a){if(!i)return"";let r=a.filter(s=>s.lineIdx==i.lineIdx&&s.s<=i.b&&s.e>=i.b);for(let s of r)if(s.style.indexOf("!u")>=0||s.style.indexOf("!b")>=0||s.style.indexOf("!hl")>=0)return s.style;return""}applyStyle(e,i,a){for(let r=i.length-1;r>=0;r--){let s=i[r],l=a.filter(c=>c.lineIdx==s.lineIdx&&c.e>=s.s);for(let c=l.length-1;c>=0;c--){let d=l[c].s>=s.s?l[c].s:s.s,h=l[c].e<=(s.e??9999999)?l[c].e:s.e,_=l[c].style.replaceAll("!hl","");if(d<h&&""!=_){let x=e[s.lineIdx],b=x.substring(d,h);""!=b.trim()&&(e[s.lineIdx]=x.substring(0,d)+"["+_+":$"+b+"$]"+x.substring(h))}}}}processUnderlineAns(e){let i=/\[[!bihl]*[!u]+[!bihl]*:\$(([^\$]|\$[^\]])+)\$\]/g,a=0,r=[];for(let s of e){if(/^[ABCD\.\s\t\*]+$/.test(s)&&""!=s.trim()&&a>0){let l=s;l=l.replaceAll(/[\s\t\.]+/g,"");let c=l.indexOf("*"),d=0;if(l=l.replaceAll(/[\*]+/g,""),"ABCDEFGH".indexOf(l)>=0){let h=e[a-1].match(i);if(h&&l.length==h.length){for(let x of h)e[a-1]=e[a-1].replace(x,x.replace(/\[[!bihl]*[!u]+[!bihl]*:\$/g,`[${c==d?"*":""}${l.substring(0,1)}:`).replace("$]","]")),r[r.length-1]=e[a-1],l=l.substring(1),d++;a++;continue}}}r.push(s),a++}return r}processStyle(e){let i=/\[![!ibuchl]+:\$(([^\$]|\$[^\]])+)\$\]/g,a=/^\s*\[\*\s*[AC]\.[^\|]+\|\s*[BD]\..*\*\]\s*$/g,r=[],s=0;for(let T of e){if(a.test(e[s].replaceAll(i,"$1"))&&(e[s]=e[s].replaceAll("[*","").replaceAll("*]","").replaceAll("|"," ").trim(),T=e[s]),T){let q,P=T.matchAll(i),U=0;for(;;){let B=P.next();if(B.done)break;let W=B.value[0],G=W.indexOf(":"),nt=W.substring(1,G),ut=B.value.index-U,et=ut+B.value[1].length;q&&ut==q.e&&q.style==nt?q.e=et:(q={lineIdx:s,s:ut,e:et,style:nt},r.push(q)),U+=G+4}e[s]=T.replaceAll(i,"$1")}s++}const l=new tt.ExamIntellisense(this.cropPdfParams);l.setLines(e);let c=l.parse(),d=[],h=new Map,_=0;for(let T of c){_++;for(let P of T.parts)d.push(P);for(let P of T.answers){let U=this.hasStyleAns(e,P.parts[0],r);""!=U&&h.set(`${T.label}-${T.group}-${P.label}-${_}`,U);for(let q of P.parts)d.push(q)}}for(let T of c)if(T.help)for(let P of T.help)d.push(P);this.applyStyle(e,d,r),l.setLines(e),c=l.parse()??[];let x=[];_=0;for(let T of c){_++;let P=new Map;if(!(T.answers.filter(U=>U.isCorrect).length>0)){for(let U of T.answers){let q=h.get(`${T.label}-${T.group}-${U.label}-${_}`);q&&""!=q&&P.set(q,P.has(q)?void 0:U.parts[0])}for(let U of P)if(U[1]){x.push(U[1]);break}}}for(let T=x.length-1;T>=0;T--){let P=x[T];e[P.lineIdx]=e[P.lineIdx].substring(0,P.b)+"*"+e[P.lineIdx].substring(P.b)}return e=this.processUnderlineAns(e),c.length>0?e.slice(c[0].parts[0].lineIdx):e}processMath(e,i){let a=0;for(let r of e){let s=r.matchAll(this.MATH_PAT);for(;;){let l=s.next();if(l.done)break;let c=l.value[0],h=i.get(l.value[1]);h&&(h.lineIdx=a+1,h.startCol=l.value.index+1,h.endCol=h.startCol+c.length)}a++}}getIncludeIds(e,i){return[]}renderStr(e,i,a,r,s,l,c,d,h=!0){let _=h?r.replaceAll(/<([\/!a-zA-Z])/g,"&lt;$1").replaceAll(/&lt;([ubi])>/g,"<$1>").replaceAll(/&lt;[\/]([ubi])>/g,"</$1>").replaceAll("&lt;br>","<br>").replaceAll("<&lt;","&lt;&lt;").replaceAll("<&lt;","&lt;&lt;").replaceAll("<&lt;","&lt;&lt;"):r,x=[new Si,new qi(this.cdnService),new Kn,new xn,new ki,new an,new ln(i,this.commonService),new pi,new to.$(this.cdnService,this.commonService,this.configRenderService,l),new Mn(this.cdnService,this.commonService,c,this.apiCallbackCache,this.aztEditor,d,this.getIncludeIds(e),this.apiDataCache,this.matrixLoadedData)];"link"==s&&(x=[new to.$(this.cdnService,this.commonService,this.configRenderService,l)]),"help"==s&&x.pop();for(const b of x)b.setLoadingManager(this.loadingManager),_=b.render(_,a,this.questionService);return _}upperFirst(e){return e?e.charAt(0).toUpperCase()+e.slice(1):""}parseExtra(e){if(e.startsWith("[@"))return{val:"",idx:0,id:e};let r=e.matchAll(/\[!info:\d+\]/g),s="",l=0;for(;;){let d=r.next();if(d.done)break;s=d.value[0],l=d.value.index;break}if(""==s)return{val:"",idx:0,id:"0"};let c=s.replace("[!info:","").replace("]","").trim();return{val:s,idx:l,id:c}}fillImg(e,i,a,r){let s=new RegExp("<div id='"+a+"'[^>]+></div>","g"),l=e[i];l.renderedStr=l.renderedStr.replace(s,r??"");for(let c of l.answers)c.renderedStr=c.renderedStr.replace(s,r??"");l.helpRenderedStr&&(l.helpRenderedStr=l.helpRenderedStr.replace(s,r??""))}fillError(e,i,a){e[i].err=`<span style='color:red'>${a}</span>`}renderQuest(e,i,a,r,s,l){return new Promise(c=>{let d=3;r.answers.length>0&&(d=1),0==r.answers.length&&r.strAns&&(d=4);let h=(q,B)=>{console.log("nvanh fill image ",e.length,q,B),this.fillImg(e,s,q,B)},_=q=>{console.log("nvanh fill quest ",s,q)},x=q=>{this.fillError(e,s,q)},b=r.parts.map(q=>q.text??"").join("<br>").trim(),T=this.parseExtra(b);""!=T.val&&(b=b.substring(0,T.idx)+b.substring(T.idx+T.val.length));let P=r.help?r.help.map(q=>q.text??"").join("<br>").trim():void 0,U={renderedStr:this.renderStr(e,i,a,b,"full",h,_,x),quest:r,type:d,strAns:r.strAns?r.strAns.split(/[\|]/).map(q=>q.trim()):void 0,label:this.upperFirst(r.olabel??""),helpRenderedStr:P?this.renderStr(e,i,a,P,"full",h,_,x):void 0,answers:r.answers.map(q=>{let B=q.parts.map(W=>W.text??"").join("<br>").trim();return{renderedStr:this.renderStr(e,i,a,B,"full",h,_,x),ans:q}})};if(U.renderedStr.startsWith("Loading...|")){let q=U.renderedStr.split("|");if(q[1].indexOf(",")<0){let B=+q[1];B>0&&(U.id=B)}U.renderedStr=q[0]}e[s]=U,l&&l(U),c(U)})}getLstQuestWithFile(e,i,a){return new Promise((r,s)=>{const l=new mn(this.commonService),c=[],d=new Map,h=[],_=[];let x=1;l.handleFileSelect(e,b=>{for(let G of b.data)if("img"==G.type)c.push({id:G.key,link:G.value,cssStyle:G.cssStyle}),G.cssStyle&&G.cssStyle.split(";").length>2&&h.push([`^\\[img:\\$${G.key}\\$\\]`,`[img:$${G.key}$]\n`]);else if("mathml"==G.type){let nt=+G.key.split("_")[1];d.set(G.key,{id:nt,str:G.value,raw:G.docx,lineIdx:0,startCol:0,endCol:0}),nt>x&&(x=nt)}x++;for(let G of b.lines){if(0==G.length)continue;let nt="";nt=Array.isArray(G[0])&&Array.isArray(G[G.length-1])&&Array.isArray(G[Math.floor(G.length/2)])?"[* "+G.map(ut=>ut.map(et=>et.join("").replaceAll("\n","\\n")).join("\\n")).join(" | ")+" *]":G.join("");for(let ut of h)nt=nt.replaceAll(new RegExp(ut[0],"g"),ut[1]);let At=nt.split("\n");for(let ut of At)_.push(ut)}(new fe).process(_);let P=this.processStyle(_);this.processMath(P,d),(new Xq).process(P);const q=new tt.ExamIntellisense(this.cropPdfParams);q.setLines(P);let B=q.parse();const W=new $t.Q(2);for(let G=0;G<B.length;G++)W.addTask(this,this.renderQuest,[i,d,c,B[G],G,a]);W.start().then(G=>{setTimeout(()=>{r({lstQuest:i,mathMap:d,images:c})},10*c.length)})})})}createFolder(e,i){return new Promise((a,r)=>{this.examCategoryService.apiExamCategorySaveObjPost({name:e,parentId:i}).subscribe(l=>{1==l.success?a(l.data??{}):r(new Error(l.message))})})}convertPartItem(e){return 0===e.length?"":/^\[@((.)+)\]/g.test(e[0].text??"")?e[0].lineIdx+"_____"+e[0].text?.split("]=>")[0]+"]":""}convertQuestion(e,i,a,r,s,l){return new Promise((c,d)=>{const h=[];r.answers.forEach(T=>{h.push({key:T.ans.label,content:T.renderedStr})});let _=r.answers.find(T=>!0===T.ans.isCorrect);const b={name:this.commonService.myTranslateInstant("lang_auto_cau_hoi_tu_editor")+" "+(s+1),answerType:r.type,categoryId:0,questionContent:r.renderedStr,questionText:r.renderedStr,answerConfig:JSON.stringify(h),groupId:l,answerResult:_?JSON.stringify([_.ans.label]):r.strAns&&r.strAns?.length>0?JSON.stringify(r.strAns):void 0,totalQuestion:e.length,version:"4",isFixAns:r.quest.isFixAns?1:0,isImage:1,answerMedia:r.helpRenderedStr,mediaMeta:JSON.stringify(i),groupType:i?.isFixGroup?"1":void 0,tags:r.tag&&r.tag.length?r.tag.map(T=>T.code??""):[],__path:this.convertPartItem(r.quest.parts)};a.exam?.questionObj.listQuestions?.push(b),a.exam?.rootQuests.push(r),r.audio&&(0,xe.F0)(r.audio.type)?r.attachments&&"[]"!==r.attachments?(b.attachments=r.attachments,c()):this.apiUploadService.uploadToCdnProgressForTestbankQuestionAttachment(r.audio).subscribe(T=>{T.type!=j.dt.UploadProgress&&(1==T.success?b.attachments=JSON.stringify([T.data]):d(new Error("lang_auto_upload_file_audio_that_bai")),c())}):c()})}generateFileAzt(e){let i=this.aztEditor?._editor.getValue().trim()??"";if(""!=i){let a=[],r=[];for(let c of e.mathMap)a.push(c);let l=JSON.stringify({text:i,imgs:e.images,maths:a,infos:r});return new Blob([l],{type:"text/plain"})}return null}saveCdn(e,i){return new Promise(a=>{if(i.exam?.examObj){let r=new Date,s=`user-${this.userService.getUserObj().id}-de-azota-${r.getDate()}${r.getMonth()+1}${r.getFullYear()}-${r.getTime()}.azt`;const l=this.generateFileAzt(e);if(l){const c=new File([l],s,{type:"text/plain"});this.apiUploadService.uploadToCdnForExamEditor(c).subscribe(d=>{d.type!=j.dt.UploadProgress&&(1==d.success&&d.data&&i.exam?.examObj&&(i.exam.examObj.cdnEditorFile=d.data.url??""),a())})}else a()}else a()})}makeExpandInfoObj(e){const a=e.map(r=>r.quest.olabel?.replace(/[`~!@#$%^&*()_|+\-=?;:'",.<>\{\}\[\]\\\/]/gi,"").replace(/[0-9 ]/g,"")).filter(r=>r&&r.length>0);return a.length>0?{label:(r=a[0]??this.commonService.myTranslateInstant("lang_auto_cau")??"",r.charAt(0).toUpperCase()+r.slice(1))}:{};var r}uploadFileProcess(e,i){return new Promise(a=>{e?this.apiUploadService.uploadToCdnProgressForTestbankDocx(e).subscribe(r=>{r.type!=j.dt.UploadProgress&&(1==r.success&&i.exam&&(i.exam.examObj.cdnExamFile=r.data?.url??""),a())}):a()})}saveQuestionObjs(e,i,a){return new Promise(r=>{this.questionService.apiQuestionSaveObjsV2Post({listQuestions:i}).subscribe(s=>{if(e.exam&&1===s.success&&s.data?.objs){const l=[];s.data.objs.forEach((c,d)=>{const h=e.exam?.examConfig.find(x=>x.name==c.name);if(l.push({id:c.id,name:c.name,groupId:c.groupId,scorePerQuestion:h?.point||1,totalQuestion:1,sort:d+a}),i[d]){const x=i[d];x.__path&&x.__path.length>0?this.saveParts.includes(x.__path)||this.saveParts.push(x.__path):this.saveParts.push(`[@Q${c.id}: C\xe2u ${d+a+1}]`)}}),r({indexSaved:s.data?.objs?.length+a,examConfigs:l})}else r({indexSaved:a,examConfigs:[]})})})}processSaveQuestions(e,i,a,r,s){if(i.exam?.questionObj&&i.exam?.questionObj.listQuestions){var l=i.exam?.questionObj.listQuestions.length;let d=a+100>l?l:a+100;var c=i.exam?.questionObj.listQuestions.slice(a,d)??[];let h=[];for(const _ of c)h.push({categoryId:_.categoryId,groupId:_.groupId,name:_.name??"none",metadata:_.metadata,isImage:_.isImage,questionContent:_.questionContent,answerMedia:_.answerMedia,questionText:_.questionText,answerType:_.answerType,answerConfig:_.answerConfig,coordinates:_.coordinates,answerResult:_.answerResult,totalQuestion:_.totalQuestion,tags:_.tags??[],mediaId:_.mediaId,mediaMeta:_.mediaMeta,attachments:_.attachments,version:_.version,isFixAns:_.isFixAns,groupType:_.groupType});h.length>0?this.saveQuestionObjs(i,h,r).then(_=>{if(_.examConfigs&&_.examConfigs.length>0){let x=s.concat(_.examConfigs);this.processSaveQuestions(e,i,d,_.indexSaved,x)}}):this.saveExamObj(e,i,s)}}saveExamObj(e,i,a){if(i.exam){let s=!1;this.saveParts=this.saveParts.map(h=>{const _=h.split("_____");return-1!==h.indexOf("ng\u1eabu nhi\xean")&&(s=!0),1===_.length?_[0]:_[1]});let l={...this.formSubjectAndClassroom,generalTitle:i.exam?.examObj.name,generalDescription:""},c=this.userService.getUserObj(),d=JSON.stringify({type:"exam",id:0,user:c.id});i.exam.examObj.scoringMethod="1",i.exam.examObj.name=l.generalTitle,i.exam.examObj.examConfigs=JSON.stringify(a),i.exam.examObj.description=l.generalDescription,i.exam.examObj.editorStatus=2,i.exam.examObj.metadata=JSON.stringify(this.saveParts),i.exam.examObj.isRandomExam=s,i.exam.examObj.schoolLevelId=l.schoolLevel,i.exam.examObj.schoolSubjectId=l.schoolSubject,this.examService.apiExamSaveObjPost({id:i.exam.examObj.id??0,categoryId:i.exam.examObj.categoryId,scoringMethod:i.exam.examObj.scoringMethod,name:i.exam.examObj.name??"",description:i.exam.examObj.description,examConfigs:i.exam.examObj.examConfigs,suggestions:i.exam.examObj.suggestions,labelsUrl:i.exam.examObj.labelsUrl,abcdLabelPos:i.exam.examObj.abcdLabelPos,questionLabelMap:i.exam.examObj.questionLabelMap,firstInGroupIndexes:i.exam.examObj.firstInGroupIndexes,totalExam:i.exam.examObj.totalExam??0,cdnExamFile:i.exam.examObj.cdnExamFile,cdnEditorFile:i.exam.examObj.cdnEditorFile,trackEdit:i.exam.examObj.trackEdit,examHeader:i.exam.examObj.examHeader,expandInfoObj:i.exam.examObj.expandInfoObj,cutData:void 0,editorStatus:i.exam.examObj.editorStatus,startQuestionIndex:i.exam.examObj.startQuestionIndex,metadata:i.exam.examObj.metadata,isRandomExam:i.exam.examObj.isRandomExam,schoolLevelId:i.exam.examObj.schoolLevelId,schoolSubjectId:i.exam.examObj.schoolSubjectId,purposeId:i.exam.examObj.purposeId,purposeNote:i.exam.examObj.purposeNote},d).subscribe(h=>{e()})}}saveExam(e,i,a){return new Promise(r=>{if(e.result){const s=new $t.Q(10,{function:(b,T)=>{const P=this.commonService.myTranslateInstant("lang_auto_dang_luu_du_lieu_de_thi");a.pushMsg(`${P}: ${Math.floor(b/T*100)}%`)}}),l={};let h,_=[],x=!0;l.exam={examObj:{categoryId:i,name:e.file.name,startQuestionIndex:(e.result.lstQuest[0].quest.isGroup?e.result.lstQuest[1]:e.result.lstQuest[0]).quest.label??1},questionObj:{listQuestions:[]},examConfig:[],rootQuests:[]},s.addTask(this,this.uploadFileProcess,[e.file,l]),e.result.lstQuest.forEach((b,T)=>{if(b.quest.isGroup)h=b,x=!1;else{x||(x=!0,_.push(T-(_.length+1)));const U={name:this.commonService.myTranslateInstant("lang_auto_cau_hoi_tu_editor")+" "+(T-_.length+1),point:1};l.exam?.examConfig.push(U),s.addTask(this,this.convertQuestion,[e.result?.lstQuest,h,l,b,T-_.length,_.length])}}),s.addTask(this,this.saveCdn,[e.result,l]),l.exam.examObj.firstInGroupIndexes=JSON.stringify(_),l.exam.examObj.expandInfoObj=this.makeExpandInfoObj(e.result.lstQuest),l.exam.examObj.description="",s.start().then(()=>{a.pushMsg("\u0110ang l\u01b0u ..."),console.log("nvanh save ",l),this.questionSaveService.convertQuestions(l.exam?.questionObj.listQuestions??[],l.exam?.rootQuests??[],(T,P="",U)=>{a.remove(),r()}).then(()=>{this.saveParts=[],this.processSaveQuestions(()=>{a.remove(),r()},l,0,0,[])}),r()})}else r()})}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(mi.z),t.LFG(Gn.E),t.LFG(Pi.CM),t.LFG(Ke.aE),t.LFG(Ke.F1),t.LFG(po.W),t.LFG(ga.U),t.LFG(xa),t.LFG(Ke.Oe))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),eF=(()=>{class n{reset(){this.logger=new Ep.O}cancel(){return new Promise(e=>{this.treeDataFolders.pushActionCancel(0).then(()=>{this.logger.remove(),e()})})}init(e,i){return new Promise((a,r)=>{this.logger=new Ep.O(!0,this.commonService.myTranslateInstant("lang_loading_data")),this.treeDataFolders=new ex,this.treeDataFolders.parentId=e,this.treeDataFolders.pushActionCancel(1),this.treeDataFolders.pushActionRunner(!0),this.syncQuestionTestBankService.formSubjectAndClassroom=i,this.syncQuestionTestBankService.init().then(()=>{a()}).catch(s=>{r(s)})})}push(e){this.treeDataFolders.push(e)}start(){this.logger.pushMsg(this.commonService.myTranslateInstant("lang_auto_dang_xu_ly_du_lieu")??"");const e=new $t.Q(1);this.treeDataFolders.pushTaskDocument(e,this.syncQuestionTestBankService,this.logger),e.start().then(i=>{this.logger.remove()})}getListQuestion(){this.logger.pushMsg(this.commonService.myTranslateInstant("lang_auto_dang_xu_ly_du_lieu")??"");const e=new $t.Q(1);this.treeDataFolders.pushTaskDocument(e,this.syncQuestionTestBankService,this.logger)}constructor(e,i){this.syncQuestionTestBankService=e,this.commonService=i,this.logger=new Ep.O,this.treeDataFolders=new ex}get keyLoading(){return this.logger.lines}get isLoading(){return this.logger.run??!1}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(tF),t.LFG(mi.z))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class ex{push(o){const e=o.webkitRelativePath.split("/"),i=e.shift();if(""===this.name&&(this.name=i??"root"),1===e.length)return void this.documents.push({file:o});e.pop();let a=this;e.forEach(r=>{a=this.getOrCreateObject(r,a)}),a.documents.push({file:o})}pushTaskDocument(o,e,i){o.addTask(this,this.syncFolderAction,[e,i],this.name),this.documents.forEach(a=>{o.addTask(this,this.processDocument,[a,e,i],a.file.name)}),this.children.forEach(a=>{a.pushTaskDocument(o,e,i)})}syncActionDocument(o,e,i){return new Promise(a=>{if(1===this.getStatusAction()&&this.checkName(this.makeName(i.file.name)))if(i.result&&i.result.lstQuest.filter(r=>r.answers.length>2).length>0){const r=new Ep.O(!0,"\u0110ang l\u01b0u \u0111\u1ec1 thi "+i.file.name);e.pushChild(r),o.saveExam(i,this.folderId,r).then(()=>{this.saveName(this.makeName(i.file.name)),r.remove(),a()})}else a();else a()})}syncFolderAction(o,e){return new Promise(i=>{if(1===this.getStatusAction()&&this.checkName(this.makeName()))if(-1===this.folderId){const a=new Ep.O(!0,"\u0110ang t\u1ea1o th\u01b0 m\u1ee5c "+this.name);e.pushChild(a),-1!==this.parentId?o.createFolder(this.name,this.parentId).then(r=>{this.folderId=r.obj?.id??-1,this.children.forEach(s=>{s.parentId=this.folderId}),this.saveName(this.makeName()),this.saveFolderId(this.makeName(),this.folderId),a.remove(),i()}).catch(()=>{this.folderId=-1,a.remove(),i()}):(a.remove(),i())}else i();else 1===this.getStatusAction()&&(this.folderId=this.getFolderId(this.makeName()),this.children.forEach(a=>{a.parentId=this.folderId})),i()})}processDocument(o,e,i){return new Promise((a,r)=>{if(1===this.getStatusAction()&&this.checkName(this.makeName(o.file.name))){const s=new Ep.O(!0,"\u0110ang x\u1eed l\xfd t\u1ec7p tin "+o.file.name);i.pushChild(s),e.getLstQuestWithFile(o.file,[]).then(c=>{o.result=c,c.lstQuest.filter(d=>d.answers.length>2).length>0&&(s.pushMsg("\u0110ang l\u01b0u \u0111\u1ec1 thi "+o.file.name),this.syncActionDocument(e,i,o).then(()=>{s.remove(),a()}))})}else a()})}getOrCreateObject(o,e){let i=e.children.find(a=>a.name===o);return i||(i=new ex(o),i.parentName=e.parentName+"/"+e.name,e.children.push(i)),i}saveName(o){const e=this.makeObjSave();e.save_names.push(o),this.setObjSave(e)}saveFolderId(o,e){const i=this.makeObjSave();i.folder_save.push({name:o,value:e}),this.setObjSave(i)}checkName(o){return!this.makeObjSave().save_names.includes(o)}makeName(o){return o?this.parentName+"_"+this.name+"_"+o:this.parentName+"_"+this.name}getFolderId(o){return this.makeObjSave().folder_save.find(i=>i.name===o)?.value??0}pushActionCancel(o){return new Promise(e=>{const i=this.makeObjSave();if(i.status=o,this.setObjSave(i),0===o){const a=setInterval(()=>{this.makeObjSave().isRun||(clearInterval(a),e())},100)}else e()})}pushActionRunner(o){const e=this.makeObjSave();e.isRun=o,this.setObjSave(e)}getStatusAction(){const o=this.makeObjSave().status;return 0===o&&this.pushActionRunner(!1),o}makeObjSave(){const o=window.localStorage.getItem(this.LOCAL_STORAGE_KEY);return o?JSON.parse(o):new nF}setObjSave(o){window.localStorage.setItem(this.LOCAL_STORAGE_KEY,JSON.stringify(o))}constructor(o){this.parentName="",this.parentId=-1,this.folderId=-1,this.name="",this.documents=[],this.children=[],this.LOCAL_STORAGE_KEY="NVANH_TOOL_SYNC_ACTION",o&&(this.name=o)}}class nF{constructor(){this.status=1,this.save_names=[],this.folder_save=[],this.isRun=!0}}var iF=M(27118);const oF=["drawer"];function aF(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",18),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.handleCancelSync())}),t._uU(1," Hu\u1ef7 "),t.qZA()}}function rF(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",38),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.sAztMatDrawerService.openDrawer())}),t.ALo(1,"mytranslate"),t.O4$(),t.TgZ(2,"svg",39),t._UZ(3,"rect",40)(4,"path",41)(5,"path",42),t.qZA()()}2&n&&t.s9C("matTooltip",t.lcZ(1,1,"lang_auto_mo_menu"))}function sF(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",43),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.sAztMatDrawerService.closeDrawer())}),t.ALo(1,"mytranslate"),t.O4$(),t.TgZ(2,"svg",39),t._UZ(3,"rect",40)(4,"path",41)(5,"path",44),t.qZA()()}2&n&&t.s9C("matTooltip",t.lcZ(1,1,"lang_auto_dong_menu"))}const lF=function(n){return{"ml-5":n}};function cF(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",19)(1,"div",20),t.YNc(2,rF,6,3,"button",21),t.YNc(3,sF,6,3,"button",22),t.qZA(),t._UZ(4,"config-level-subject",23),t.TgZ(5,"div",11)(6,"p",24),t._uU(7),t.ALo(8,"mytranslate"),t.qZA()(),t.TgZ(9,"div",25)(10,"div",26)(11,"div",27)(12,"input",28,29),t.NdJ("change",function(a){t.CHM(e);const r=t.oxw();return t.KtG(r.handleEventChangeFolder(a))}),t.qZA(),t.TgZ(14,"div",30)(15,"div",31)(16,"div")(17,"span",15),t._UZ(18,"lucide-icon",32),t.qZA(),t.TgZ(19,"span",33),t._uU(20),t.ALo(21,"mytranslate"),t.qZA()()()(),t.TgZ(22,"div",34)(23,"span",35),t._uU(24),t.ALo(25,"mytranslate"),t.qZA()(),t.TgZ(26,"div",34)(27,"a",36),t.NdJ("click",function(){t.CHM(e);const a=t.MAs(13);return t.KtG(a.click())}),t.TgZ(28,"span",15),t._UZ(29,"lucide-icon",37),t.qZA(),t.TgZ(30,"span"),t._uU(31),t.ALo(32,"mytranslate"),t.qZA()()()()()()()}if(2&n){const e=t.oxw();t.Q6J("ngClass",t.VKq(18,lF,!e.isMobileDevice&&e.sAztMatDrawerService.isOpenSideNav)),t.xp6(2),t.Q6J("ngIf",!e.sAztMatDrawerService.isOpenSideNav||e.isMobileDevice),t.xp6(1),t.Q6J("ngIf",e.sAztMatDrawerService.isOpenSideNav&&!e.isMobileDevice),t.xp6(1),t.Q6J("form",e.form)("schoolLevelObjs",e.schoolLevelObjs)("examSchoolLogObj",e.examSchoolLogObj),t.xp6(3),t.hij(" ",t.lcZ(8,10,"lang_core_auto_tool_sync_chon_thu_muc")," "),t.xp6(13),t.hij(" ",t.lcZ(21,12,"lang_core_auto_tool_sync_keo_tha")," "),t.xp6(4),t.hij(" ",t.lcZ(25,14,"lang_core_auto_tool_sync_hoac")," "),t.xp6(7),t.Oqu(t.lcZ(32,16,"lang_core_auto_tool_sync_chon_thu_muc_can_sync"))}}const uF=function(n,o){return{"w-85":n,"w-30":o}},dF=function(n){return{"azt-mobile-draw-left":n}};let mF=(()=>{class n extends St.Q{set drawer(e){this.sAztMatDrawerService.resizeDrawerHeight(!1,e)}changeStatusNav(){this.isMobileDevice&&(document.body.style.overflow="auto")}saveStatusSideNav(){this.examFilterService.saveStatusSideNav("exam_sync_folder",this.sAztMatDrawerService.isOpenSideNav)}removeStatusSideNav(){this.examFilterService.removeStatusSideNav("exam_sync_folder")}getStatusSideNav(){if(window.innerWidth>980){let e=this.examFilterService.getStatusSideNav("exam_sync_folder");e&&"close"==e?this.sAztMatDrawerService.closeDrawer():this.sAztMatDrawerService.openDrawer()}}mainProcessFiles(e){const i=Number(this.activeRoute.snapshot.paramMap.get("cat_id"))??0,a=this.form.getRawValue();this.syncTestbankService.init(i,a).then(()=>{e.forEach(r=>{(0,xe.D_)(r.type)&&r.name.includes("docx")&&this.syncTestbankService.push(r)}),this.syncTestbankService.start()})}handleEventChangeFolder(e){e.target.files&&this.mainProcessFiles([...e.target.files]),e.target.value=""}handleCancelSync(){this.syncTestbankService.cancel().then(()=>{})}ngOnInit(){super.ngOnInit(),this.userService.isTestMarketAdminRole()?this.waitDestroy(this.commonListService.apiCommonListSubjectAndLevelsGet(this.commonService.getBusinessDomainUrl()).subscribe(e=>{1==e.success?(this.examSchoolLogObj=e.data?.examSchoolLogObj,this.schoolLevelObjs=e.data?.schoolLevelSubjectObjs??[],this.isLoadForm=!0):this.errorStatusObj(e.message??"")})):this.commonService.myNavigation("/admin/dashboard")}constructor(e,i,a,r,s,l){super(),this.examFilterService=e,this.syncTestbankService=i,this.activeRoute=a,this.userService=r,this.sAztMatDrawerService=s,this.commonListService=l,this.backToLink="/admin/dashboard",this.aztConfigCropParam="",this.isLoadForm=!1,this.schoolLevelObjs=[],this.form=new f.cw({generalDescription:new f.NI("",{nonNullable:!0}),schoolLevel:new f.NI(0,{nonNullable:!0,validators:[f.kI.required,f.kI.min(1)]}),schoolSubject:new f.NI(0,{nonNullable:!0,validators:[f.kI.required,f.kI.min(1)]})})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Hy),t.Y36(eF),t.Y36(O.gz),t.Y36(ga.U),t.Y36(Sd.T),t.Y36(Cd.o7))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-sync-folder"]],viewQuery:function(e,i){if(1&e&&t.Gf(oF,5),2&e){let a;t.iGM(a=t.CRH())&&(i.drawer=a.first)}},features:[t._Bn([Sd.T]),t.qOj],decls:23,vars:25,consts:[[3,"headerBackToLink"],[1,"container-fluid","mt-3","overflow-hidden",3,"contextmenu"],["azt-track-service","sync-folder-I_srCKgqJ","class","cancel","style","z-index: 999999999999;position: fixed;padding: 5px 20px;border-radius: 5px;border: 1px solid #cfd8dc;background: #eceff1;top: 50px;left: 50%;cursor: pointer;",3,"click",4,"ngIf"],[3,"msg","show","percent"],[1,"azt-drawer-container","mt-5",3,"hasBackdrop"],[3,"ngClass","mode","opened","closedStart"],["drawer",""],[1,"azt-draw-left",3,"ngClass"],["pointerEventsMethod","scrollbar",3,"visibility"],[1,"box","p-3","h-full","lg:h-auto","mb-10",2,"height","80vh"],[1,"document-info"],[1,"flex","items-center"],["matTooltip","\u0110\u1ed3ng b\u1ed9 th\u01b0 m\u1ee5c",1,"text-md","font-medium","truncate","mr-auto","mt-2",3,"isDisabledTooltip","matTooltipDisabled"],["c","isDisabled"],[1,"text-md","mt-2"],[1,"w-4","h-4","mr-1","inline-block",2,"vertical-align","sub"],["name","info"],["class","azt-drawer-content",3,"ngClass",4,"ngIf"],["azt-track-service","sync-folder-I_srCKgqJ",1,"cancel",2,"z-index","999999999999","position","fixed","padding","5px 20px","border-radius","5px","border","1px solid #cfd8dc","background","#eceff1","top","50px","left","50%","cursor","pointer",3,"click"],[1,"azt-drawer-content",3,"ngClass"],[1,"flex","box","sm:h-auto","rounded-md","border","border-slate-200/60","dark:border-darkmode-400","p-2","text-slate-500","mb-2"],["azt-track-service","sync-folder-SS5UgcvZq","class","btn btn-sm mr-2",3,"matTooltip","click",4,"ngIf"],["azt-track-service","sync-folder-q_c8tTVOYm","class","btn btn-sm mr-2",3,"matTooltip","click",4,"ngIf"],[3,"form","schoolLevelObjs","examSchoolLogObj"],[1,"text-md","font-medium","mr-auto","ng-star-inserted"],[1,"box","mt-2","relative","py-2",2,"height","62vh"],[1,"h-100","flex","items-center","justify-center",2,"height","100%"],[1,"text-center"],["type","file","webkitdirectory","",2,"display","none",3,"change"],["folderInputDirectory",""],["appDragDrop","",1,"xl:mt-0","flex-1","border-2","border-dashed","dark:border-darkmode-400","rounded-md"],[1,"flex","items-center","justify-center","text-center","cursor-pointer","relative",2,"width","400px","height","200px"],["name","folder-input"],[1,"text-primary","mr-1"],[1,"mt-3","lg:mr-auto"],[1,"text-md"],["azt-track-service","sync-folder-AgaqXySbDm",1,"btn","btn-secondary-soft",3,"click"],["name","folder-up"],["azt-track-service","sync-folder-SS5UgcvZq",1,"btn","btn-sm","mr-2",3,"matTooltip","click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-menu","w-4","h-4"],["x","3","y","3","width","18","height","18","rx","2","ry","2"],["d","M9 3v18"],["d","m14 9 3 3-3 3"],["azt-track-service","sync-folder-q_c8tTVOYm",1,"btn","btn-sm","mr-2",3,"matTooltip","click"],["d","m16 15-3-3 3-3"]],template:function(e,i){if(1&e&&(t.TgZ(0,"teacher-layout",0)(1,"div",1),t.NdJ("contextmenu",function(){return!1}),t.YNc(2,aF,2,0,"div",2),t._UZ(3,"azt-export-docx-loading-box",3),t.TgZ(4,"mat-drawer-container",4)(5,"mat-drawer",5,6),t.NdJ("closedStart",function(){return i.changeStatusNav()}),t.TgZ(7,"div",7)(8,"ng-scrollbar",8)(9,"div",9)(10,"div",10)(11,"div",11)(12,"h3",12,13),t._uU(14),t.ALo(15,"mytranslate"),t.qZA()(),t.TgZ(16,"div",14)(17,"span",15),t._UZ(18,"lucide-icon",16),t.qZA(),t._uU(19),t.ALo(20,"mytranslate"),t.qZA()()()()()(),t.TgZ(21,"mat-drawer-content"),t.YNc(22,cF,33,20,"div",17),t.qZA()()()()),2&e){const a=t.MAs(13);t.Q6J("headerBackToLink",i.backToLink),t.xp6(2),t.Q6J("ngIf",i.syncTestbankService.isLoading),t.xp6(1),t.Q6J("msg",i.syncTestbankService.keyLoading)("show",i.syncTestbankService.isLoading)("percent",0),t.xp6(1),t.Q6J("hasBackdrop",i.sAztMatDrawerService.hasBackdrop),t.xp6(1),t.s9C("opened",i.sAztMatDrawerService.isOpenSideNav?"true":"false"),t.Q6J("ngClass",t.WLB(20,uF,i.isMobileDevice,!i.isMobileDevice))("mode",i.sAztMatDrawerService.mode),t.xp6(2),t.Q6J("ngClass",t.VKq(23,dF,i.isMobileDevice)),t.xp6(1),t.Q6J("visibility","hover"),t.xp6(4),t.Q6J("isDisabledTooltip",!1)("matTooltipDisabled",a.isDisabled),t.xp6(2),t.hij(" ",t.lcZ(15,16,"lang_core_auto_tool_sync_huong_dan_dong_bo")," "),t.xp6(5),t.hij(" ",t.lcZ(20,18,"lang_core_auto_tool_sync_huong_dan_dong_bo_description")," "),t.xp6(3),t.Q6J("ngIf",i.isLoadForm)}},dependencies:[D.mk,D.O5,dl.jA,dl.kh,dl.LW,Mi.gM,L.KC,iF.N,Jl.Q,$0,Em.Z,fo._,C.Nh5,jt.JV],encapsulation:2}),n})();var hF=M(75270),pF=M(18224),_F=M(49649),i5=M(80034),fF=M(1103);function gF(n,o){if(1&n&&(t.TgZ(0,"div",3),t._UZ(1,"azt-student-info-box",4),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("name",e.studentObj.fullName)("parentFullName",e.studentObj.parentFullName)("parentId",e.studentObj.parentId)("parentPhone",e.studentObj.parentPhone)("phone",e.studentObj&&10==(null==e.studentObj.phone?null:e.studentObj.phone.length)?e.studentObj.phone:"")("email",e.studentObj.email)("avatar",e.studentObj.avatar)("gender",e.studentObj.gender)("birthday",e.studentObj.birthday)("joinedAt",e.studentObj.joinedAt)("classrooms",e.studentObj.classrooms)("facebookLink",e.studentObj.facebookLink)("schoolName",e.studentObj.schoolName)("hasUser",!0)("showPhone",e.showPhone)("nameImages",e.studentObj.nameImages)("identificationNumber",e.studentObj.identificationNumber)}}let xF=(()=>{class n extends St.Q{returnTooltip(){return null==this.studentObj?.parentPhone?"ID: "+this.studentObj?.parentId+" - Phone: "+this.userService.anonymousPhone(this.studentObj?.phone??""):"ID: "+this.studentObj.parentId+" - Phone: "+this.userService.anonymousPhone(this.studentObj.parentPhone)+" - Name: "+this.studentObj.parentFullName}ngOnInit(){super.ngOnInit()}constructor(e){super(),this.userService=e,this.showPhone=!this.isBusinessDomain}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(ga.U))},n.\u0275cmp=t.Xpm({type:n,selectors:[["azt-basic-info-box"]],inputs:{studentObj:"studentObj",showPhone:"showPhone"},features:[t.qOj],decls:3,vars:1,consts:[[1,"flex","flex-1","items-center","justify-start"],[1,"w-full"],["class","font-medium text-md",4,"ngIf"],[1,"font-medium","text-md"],[3,"name","parentFullName","parentId","parentPhone","phone","email","avatar","gender","birthday","joinedAt","classrooms","facebookLink","schoolName","hasUser","showPhone","nameImages","identificationNumber"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,gF,2,17,"div",2),t.qZA()()),2&e&&(t.xp6(2),t.Q6J("ngIf",i.studentObj))},dependencies:[D.O5,fF.a],encapsulation:2}),n})();var bF=M(9409),vF=M(25541),yF=M(29578),wF=M(67898),CF=M(6598);function TF(n,o){1&n&&t._UZ(0,"azt-loading-effect")}function kF(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"azt-mat-dialog-content",3)(1,"div",4),t._UZ(2,"azt-test-result-tracking",5),t.qZA()(),t.TgZ(3,"div",6)(4,"button",7),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.dialogRef.close())}),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()()}if(2&n){const e=t.oxw();let i;t.Q6J("defaultHeight",70),t.xp6(2),t.Q6J("startQuestionIndex",null!==(i=null==e.examObj?null:e.examObj.startQuestionIndex)&&void 0!==i?i:1)("dataResultObjs",e.dataResultObjs)("dataScrollObjs",e.dataScrollObjs),t.xp6(3),t.hij(" ",t.lcZ(6,5,"lang_auto_thoat")," ")}}let AF=(()=>{class n extends lo.e{getData(e,i,a,r){this.initStatusObj(),this.waitDestroy(this.examResultTrackService.apiExamResultTrackGetObjGet(e,i,a,r).subscribe(s=>{if(1==s.success){this.examObj=s.data?.examObj;var l=this.castJsonToObj(this.zipDataService.decodeContentGzip(s?.data?.examResultTrackObj?.trackData??""));l&&([this.dataResultObjs,this.dataScrollObjs]=this.sAztTestResultTrackingService.processData(l)),this.successStatusObj()}else this.errorStatusObj(s.message??"",!0);this.isLoading=!1}))}ngOnInit(){this.commonService.translateMetaData({title:"lang_auto_chi_tite_qua_trinh_lam_trac_nghiem",description:"lang_auto_chi_tite_qua_trinh_lam_trac_nghiem",image:"lang_cms_test_image"});let e=this.data.examIdParam??0,i=parseInt(this.data.examResultIdParam?.toString()??"0",10);this.getData(e,this.data.userIdParam??"",this.data.studentIdParam??"",i),super.ngOnInit()}constructor(e,i,a,r,s){super(s,r),this.examResultTrackService=e,this.zipDataService=i,this.sAztTestResultTrackingService=a,this.dialogRef=r,this.data=s,this.dataResultObjs=[],this.dataScrollObjs=[],this.backToLink="",this.isLoading=!0}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Ke.UR),t.Y36(La.a),t.Y36(wF.W),t.Y36($.so,8),t.Y36($.WI,8))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-test-result-tracking"]],features:[t.qOj],decls:4,vars:2,consts:[[1,"box","scroll-menu-test",2,"height","calc(100vh - 200px)","min-height","75vh"],[4,"ngIf","ngIfElse"],["doneLoading",""],[3,"defaultHeight"],[1,"p-3"],[3,"startQuestionIndex","dataResultObjs","dataScrollObjs"],[1,"mt-2","pb-2","px-3","text-right","absolute","bottom-0","right-0"],["azt-track-service","azt-dialog-danger-9EJYp6jGzr",1,"btn","w-24","btn-secondary",3,"click"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0),t.YNc(1,TF,1,0,"azt-loading-effect",1),t.YNc(2,kF,7,7,"ng-template",null,2,t.W1O),t.qZA()),2&e){const a=t.MAs(3);t.xp6(1),t.Q6J("ngIf",i.isLoading)("ngIfElse",a)}},dependencies:[D.O5,si.l,CF.r,Ic.R,jt.JV],styles:[".container-fluid[_ngcontent-%COMP%]{background-color:#fff;width:100vh;max-height:95vh;padding:.5rem 1.25rem 1.25rem;overflow-y:auto}"]}),n})();function SF(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_auto_xac_nhan_chon_ket_qua_trac_nghiem")))}function OF(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_auto_xac_nhan_chon_ket_qua_tu_luan")))}function EF(n,o){if(1&n&&(t.TgZ(0,"span",13),t._uU(1),t.ALo(2,"mytranslate"),t.ALo(3,"formatFullDateTimeWithoutSecondByUserUnitPipe"),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.lnq(" ",t.lcZ(2,3,"lang_auto_lan")," ",e.data.index," - ",t.lcZ(3,5,1e3*e.data.createdAt)," ")}}function MF(n,o){if(1&n&&(t.TgZ(0,"span",13),t._uU(1),t.ALo(2,"mytranslate"),t.ALo(3,"formatFullDateTimeWithoutSecondByUserUnitPipe"),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.lnq(" ",t.lcZ(2,3,"lang_auto_lan")," ",e.data.index," - ",t.lcZ(3,5,1e3*e.data.createdAt)," ")}}function IF(n,o){1&n&&(t.TgZ(0,"span",14),t._UZ(1,"azt-loading-ui"),t.qZA())}let o5=(()=>{class n extends lo.e{btnCloseDialog(e){this.dialogRef.close(e)}constructor(e,i){super(i,e),this.dialogRef=e,this.data=i}}return n.\u0275fac=function(e){return new(e||n)(t.Y36($.so,8),t.Y36($.WI,8))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-confirm-history"]],features:[t.qOj],decls:23,vars:18,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5"],[1,"text-center"],[2,"font-weight","450","font-size","14px"],[4,"ngIf"],["style","font-weight: 450; font-size: 15px; color: #ff0024",4,"ngIf"],[1,"mt-2"],[1,"text-xs","text-slate-500","dark:text-slate-400"],[1,"flex","justify-end","my-3","p-3"],["azt-track-service","dialog-confirm-action-0FalsTWUHN",1,"btn","w-24","btn-secondary","mr-3",3,"click"],["azt-track-service","dialog-confirm-action-weCfaxHnGJ",1,"btn","w-32","btn-primary",3,"disabled","click"],["class","w-4 h-4 inline-block mr-2",4,"ngIf"],[2,"font-weight","450","font-size","15px","color","#ff0024"],[1,"w-4","h-4","inline-block","mr-2"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"p",4),t.YNc(5,SF,3,3,"span",5),t.YNc(6,OF,3,3,"span",5),t.YNc(7,EF,4,7,"span",6),t.YNc(8,MF,4,7,"span",6),t._uU(9),t.ALo(10,"mytranslate"),t.qZA()(),t.TgZ(11,"div",7)(12,"p",8),t._uU(13),t.ALo(14,"mytranslate"),t.qZA()()()(),t.TgZ(15,"div",9)(16,"button",10),t.NdJ("click",function(){return i.btnCloseDialog(void 0)}),t._uU(17),t.ALo(18,"mytranslate"),t.qZA(),t.TgZ(19,"button",11),t.NdJ("click",function(){return i.btnCloseDialog(i.data)}),t.YNc(20,IF,2,0,"span",12),t._uU(21),t.ALo(22,"mytranslate"),t.qZA()()()),2&e&&(t.xp6(5),t.Q6J("ngIf",10!=i.data.type),t.xp6(1),t.Q6J("ngIf",10==i.data.type),t.xp6(1),t.Q6J("ngIf",10!=i.data.type),t.xp6(1),t.Q6J("ngIf",10==i.data.type),t.xp6(1),t.hij(" ",t.lcZ(10,10,"lang_auto_lam_ket_qua_phuc_khao_cho_hoc_sinh_nay")," "),t.xp6(4),t.hij(" ",t.lcZ(14,12,"lang_auto_de_tra_loi_cau_hoi_tu_luan_ban_co_the_lam_truc_tiep_dot")," "),t.xp6(4),t.hij(" ",t.lcZ(18,14,"lang_auto_dong")," "),t.xp6(2),t.Q6J("disabled",i.statusObj.loading),t.xp6(1),t.Q6J("ngIf",i.statusObj.loading),t.xp6(1),t.hij(" ",t.lcZ(22,16,"lang_cms_common_confirm_btn")," "))},dependencies:[D.O5,oi.n,jt.JV,jt.$n],encapsulation:2}),n})();function LF(n,o){1&n&&(t.TgZ(0,"div",2),t._UZ(1,"azt-loading-effect"),t.qZA())}function PF(n,o){1&n&&t._UZ(0,"th")}function NF(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"span")(1,"span",17),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw(5);return t.KtG(s.onShowFile(r))}),t._uU(2),t.qZA()()}if(2&n){const e=o.$implicit;t.xp6(2),t.Oqu(e.name)}}function ZF(n,o){if(1&n&&(t.ynx(0),t.YNc(1,NF,3,1,"span",13),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",e.fileObjs)}}function DF(n,o){1&n&&(t._uU(0),t.ALo(1,"mytranslate")),2&n&&t.hij(" ",t.lcZ(1,1,"lang_auto_khong_co_file")," ")}function jF(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"td")(1,"button",18),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(),r=a.$implicit,s=a.index,l=t.oxw(3);return t.KtG(l.openDialogConfirm(r,s))}),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()}if(2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("disabled",!(null!=e.fileObjs&&e.fileObjs.length)),t.xp6(1),t.Oqu(t.lcZ(3,2,"lang_auto_phuc_khao"))}}function qF(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"tr")(2,"td"),t._uU(3),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.ALo(6,"formatFullDateTimeWithoutSecondByUserUnitPipe"),t.qZA(),t.TgZ(7,"td",14),t.YNc(8,ZF,2,1,"ng-container",15),t.YNc(9,DF,2,3,"ng-template",null,16,t.W1O),t.qZA(),t.YNc(11,jF,4,4,"td",12),t.qZA(),t.BQk()),2&n){const e=o.$implicit,i=o.index,a=t.MAs(10),r=t.oxw(3);t.xp6(3),t.Oqu(i+1),t.xp6(2),t.Oqu(t.lcZ(6,5,e.createdAt)),t.xp6(3),t.Q6J("ngIf",null==e.fileObjs?null:e.fileObjs.length)("ngIfElse",a),t.xp6(3),t.Q6J("ngIf",!r.isFrontEnd)}}function FF(n,o){if(1&n&&(t.TgZ(0,"table",11)(1,"tr")(2,"th"),t._uU(3),t.ALo(4,"mytranslate"),t.qZA(),t.TgZ(5,"th"),t._uU(6),t.ALo(7,"mytranslate"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"File"),t.qZA(),t.YNc(10,PF,1,0,"th",12),t.qZA(),t.YNc(11,qF,12,7,"ng-container",13),t.qZA()),2&n){const e=t.oxw(2);t.xp6(3),t.Oqu(t.lcZ(4,4,"lang_auto_STT")),t.xp6(3),t.Oqu(t.lcZ(7,6,"lang_auto_thoi_gian")),t.xp6(4),t.Q6J("ngIf",!e.isFrontEnd),t.xp6(1),t.Q6J("ngForOf",e.objs)}}function QF(n,o){1&n&&(t.TgZ(0,"div",19),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_auto_khong_co_du_lieu")))}function RF(n,o){1&n&&(t.TgZ(0,"div",20)(1,"div",21)(2,"span",22),t._UZ(3,"azt-loading-ui"),t.qZA(),t.TgZ(4,"span",23),t._uU(5,"Loading..."),t.qZA()()())}function UF(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",24)(1,"button",25),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.getNextPage())}),t.ALo(2,"mytranslate"),t.TgZ(3,"mat-icon"),t._uU(4,"keyboard_arrow_down"),t.qZA()()()}if(2&n){const e=t.oxw(2);t.xp6(1),t.s9C("matTooltip",t.lcZ(2,2,"lang_auto_xem_them")),t.Q6J("disabled",e.disableBtn)}}function BF(n,o){if(1&n&&(t.TgZ(0,"div",3)(1,"div",4)(2,"div",5),t.YNc(3,FF,12,8,"table",6),t.YNc(4,QF,3,3,"ng-template",null,7,t.W1O),t.qZA()(),t.TgZ(6,"div",8),t.YNc(7,RF,6,0,"div",9),t.YNc(8,UF,5,4,"div",10),t.qZA()()),2&n){const e=t.MAs(5),i=t.oxw();t.xp6(3),t.Q6J("ngIf",i.objs.length>0)("ngIfElse",e),t.xp6(4),t.Q6J("ngIf",i.isLoadMore),t.xp6(1),t.Q6J("ngIf",!i.isLoadMore)}}let zF=(()=>{class n extends St.Q{btnCloseDialog(){this.closeDialog.emit(!1)}confirmData(e){this.initStatusObj(),this.examResultHistoryLogService.apiExamResultHistoryLogAcceptFileObjGet(e.examId,this.data.resultObj.id??0,e.userId,e.id).subscribe(i=>{1==i.success?(this.successStatusObj(),this.showSuccessSnack("lang_auto_phuc_khao_file_bai_lam_thanh_cong"),this.closeDialog.emit(!0)):(this.errorStatusObj(i.message??"",!0),this.closeDialog.emit(!1))})}openDialogConfirm(e,i){let a=e.createdAt?new Date(e.createdAt).getTime()/1e3:0;this.sAztDialogService.open(o5,{data:{isShow:!0,index:i+1,type:10,createdAt:a,examId:e.examId??0,userId:e.userId??0,id:e.id??0},restoreFocus:!1}).afterClosed().subscribe(l=>{l&&this.confirmData(l)})}onShowFile(e){let i={...e,index:-1};this.sAztDialogService.open(_c.q,{maxWidth:"100vw",maxHeight:"100vh",height:"100%",width:"100%",data:{fileOption:i},restoreFocus:!1})}convertFileObjs(e){for(var i=[],a=0;a<e.length;a++){var r=this.castObj(e[a]);r?.files&&(r.fileObjs=this.castJsonToObj(r.files)),i.push(e[a])}return i}getNextPage(){this.getObjs(this.curPage)}getObjs(e){""==e&&this.initStatusObj(),this.isLoadMore=!0,this.examResultHistoryLogService.apiExamResultHistoryLogGetFileObjsGet(this.data.examObj.id??0,this.data.resultObj.id??0,this.data.resultObj.userId?.toString(),e).subscribe(i=>{1==i.success?(this.isLoadMore=!1,this.curPage=i.data?.nextPage??"",i.data?.objs&&i.data.objs.length>0&&(this.objs=this.objs.concat(this.convertFileObjs(i.data.objs))),i.data?.nextPage||(this.disableBtn=!0),this.successStatusObj()):(this.isLoadMore=!1,this.errorStatusObj(i.message??"",!0))})}ngOnInit(){this.getObjs(""),this.offset=(new Date).getTimezoneOffset(),super.ngOnInit()}constructor(e,i){super(),this.examResultHistoryLogService=e,this.sAztDialogService=i,this.isFrontEnd=!1,this.closeDialog=new t.vpe,this.IAztTestbankMarkEssayDialogConfirmData={type:0,isShow:!1},this.objs=[],this.isLoadMore=!1,this.curPage="",this.offset=0,this.disableBtn=!1}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Ke.ml),t.Y36(Fi.C))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-result-history-essay"]],inputs:{data:"data",isFrontEnd:"isFrontEnd"},outputs:{closeDialog:"closeDialog"},features:[t.qOj],decls:3,vars:2,consts:[["class","block-table-v2",4,"ngIf","ngIfElse"],["doneLoading",""],[1,"block-table-v2"],[1,"block-table"],[1,"mt-3","mb-2"],[1,"table-responsive"],["class","table table-bordered","id","tracktable",4,"ngIf","ngIfElse"],["noData",""],[1,"row","my-1","m-2"],["class","col-md-12",4,"ngIf"],["class","col-md-12 text-center",4,"ngIf"],["id","tracktable",1,"table","table-bordered"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"text-left"],[4,"ngIf","ngIfElse"],["noFiles",""],["azt-track-service","essay-qvqBong5nt",1,"preview-file",3,"click"],["azt-track-service","essay-CT8RATAJF6",1,"btn","btn-primary",3,"disabled","click"],[1,"alert","alert-info","p-2"],[1,"col-md-12"],[1,"d-flex","justify-content-center","mt-3"],[1,"w-4","h-4","inline-block"],[1,"sr-only","ml-2"],[1,"col-md-12","text-center"],["azt-track-service","essay-TB1XoFOuoU","mat-button","",1,"btn-all-add",3,"matTooltip","disabled","click"]],template:function(e,i){if(1&e&&(t.YNc(0,LF,2,0,"div",0),t.YNc(1,BF,9,4,"ng-template",null,1,t.W1O)),2&e){const a=t.MAs(2);t.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a)}},dependencies:[D.sg,D.O5,vr.lW,Jo.Hw,Mi.gM,si.l,oi.n,jt.JV,jt.$n],encapsulation:2}),n})();var JF=M(6711);function HF(n,o){1&n&&(t.TgZ(0,"div",2),t._UZ(1,"azt-loading-effect"),t.qZA())}function GF(n,o){1&n&&t._UZ(0,"th")}function $F(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1,"\xa0|\xa0"),t.qZA())}function YF(n,o){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.YNc(2,$F,2,0,"span",12),t.qZA()),2&n){const e=o.$implicit,i=o.index,a=t.oxw(2),r=a.index,s=a.$implicit,l=t.oxw(2).$implicit;let c;t.xp6(1),t.hij(" ",e.content+(r!=(null!==(c=null==l.dataObj.answers?null:l.dataObj.answers.length)&&void 0!==c?c:0)-1&&i==s.answerContent.length-1?", ":"")," "),t.xp6(1),t.Q6J("ngIf",i!=s.answerContent.length-1)}}function KF(n,o){if(1&n&&(t.TgZ(0,"span")(1,"span"),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.YNc(4,YF,3,2,"span",13),t.qZA()),2&n){const e=t.oxw(),i=e.index,a=e.$implicit;t.xp6(2),t.AsE("",t.lcZ(3,3,"lang_auto_cau")," ",i+1,":\xa0"),t.xp6(2),t.Q6J("ngForOf",a.answerContent)}}function WF(n,o){if(1&n&&(t.TgZ(0,"span"),t.YNc(1,KF,5,5,"span",12),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Q6J("ngIf",e.answerContent.length>0)}}function VF(n,o){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,WF,2,1,"span",13),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",e.dataObj.answers)}}function XF(n,o){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_auto_chua_chon_dap_an")))}function tQ(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"td")(1,"button",15),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(),r=a.$implicit,s=a.index,l=t.oxw(3);return t.KtG(l.openDialogConfirm(r,s))}),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()}if(2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("disabled",!(null!=e.dataObj.answers&&e.dataObj.answers.length)),t.xp6(1),t.Oqu(t.lcZ(3,2,"lang_auto_phuc_khao"))}}function eQ(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"tr")(2,"td"),t._uU(3),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.ALo(6,"formatFullDateTimeTimezoneWithoutSecondByUserUnitPipe"),t.qZA(),t.TgZ(7,"td",14),t.YNc(8,VF,2,1,"div",12),t.YNc(9,XF,3,3,"div",12),t.qZA(),t.YNc(10,tQ,4,4,"td",12),t.qZA(),t.BQk()),2&n){const e=o.$implicit,i=o.index,a=t.oxw(3);t.xp6(3),t.Oqu(i+1),t.xp6(2),t.Oqu(t.lcZ(6,5,1e3*(e.secondTime?e.secondTime:0))),t.xp6(3),t.Q6J("ngIf",null==e.dataObj||null==e.dataObj.answers?null:e.dataObj.answers.length),t.xp6(1),t.Q6J("ngIf",!(null!=e.dataObj&&null!=e.dataObj.answers&&e.dataObj.answers.length)),t.xp6(1),t.Q6J("ngIf",!a.isFrontEnd)}}function nQ(n,o){if(1&n&&(t.TgZ(0,"table",11)(1,"tr")(2,"th"),t._uU(3),t.ALo(4,"mytranslate"),t.qZA(),t.TgZ(5,"th"),t._uU(6),t.ALo(7,"mytranslate"),t.qZA(),t.TgZ(8,"th"),t._uU(9),t.ALo(10,"mytranslate"),t.qZA(),t.YNc(11,GF,1,0,"th",12),t.qZA(),t.YNc(12,eQ,11,7,"ng-container",13),t.qZA()),2&n){const e=t.oxw(2);t.xp6(3),t.Oqu(t.lcZ(4,5,"lang_auto_STT")),t.xp6(3),t.Oqu(t.lcZ(7,7,"lang_auto_thoi_gian")),t.xp6(3),t.Oqu(t.lcZ(10,9,"lang_auto_dap_an_chon")),t.xp6(2),t.Q6J("ngIf",!e.isFrontEnd),t.xp6(1),t.Q6J("ngForOf",e.objs)}}function iQ(n,o){1&n&&(t.TgZ(0,"div",16),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_auto_khong_co_du_lieu")))}function oQ(n,o){1&n&&(t.TgZ(0,"div",17)(1,"div",18)(2,"span",19),t._UZ(3,"azt-loading-ui"),t.qZA(),t.TgZ(4,"span",20),t._uU(5,"Loading..."),t.qZA()()())}function aQ(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",21)(1,"button",22),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.getNextPage())}),t.ALo(2,"mytranslate"),t.TgZ(3,"mat-icon"),t._uU(4,"keyboard_arrow_down"),t.qZA()()()}if(2&n){const e=t.oxw(2);t.xp6(1),t.s9C("matTooltip",t.lcZ(2,2,"lang_auto_xem_them")),t.Q6J("disabled",e.disableBtn)}}function rQ(n,o){if(1&n&&(t.TgZ(0,"div",3)(1,"div",4)(2,"div",5),t.YNc(3,nQ,13,11,"table",6),t.YNc(4,iQ,3,3,"ng-template",null,7,t.W1O),t.qZA()(),t.TgZ(6,"div",8),t.YNc(7,oQ,6,0,"div",9),t.YNc(8,aQ,5,4,"div",10),t.qZA()()),2&n){const e=t.MAs(5),i=t.oxw();t.xp6(3),t.Q6J("ngIf",i.objs.length>0)("ngIfElse",e),t.xp6(4),t.Q6J("ngIf",i.isLoadMore),t.xp6(1),t.Q6J("ngIf",!i.isLoadMore)}}let sQ=(()=>{class n extends St.Q{convertGzipResultObjs(e){for(var i=[],a=0;a<e.length;a++){var r=this.castObj(e[a]);if(r){var s=this.zipDataService.decodeContentGzip(r?.datas??"");r.dataObj=this.castJsonToObj(s)??{},i.push(r)}}return i}convertRawToMixForAnswerObjs(e){for(var i=0;i<e.length;i++){var a=e[i].dataObj?.answers;if(a){for(var r=0;r<a.length;r++)a[r].answerContent.length&&(a[r].answerContent[0].content=this.findAlphaOfAnswerContent(a[r].answerContent[0].content,a[r].questionId));e[i].dataObj.answers=a}}return e}findAlphaOfAnswerContent(e,i){let a="";for(let s=0;s<this.questionObjs.length;s++)if(this.questionObjs[s].id==i){if(this.questionAnswerConfigService.isTrueFalseQuestion(this.questionObjs[s].answerType??0)){var r=this.questionObjs[s].answerConfigParse?.filter(l=>l.key==e&&l.questionId==i);r&&r.length>0&&(a=r[0].alpha??r[0].key??"");break}a=e}return a}getQuestionData(e,i){this.examResultHistoryLogService.apiExamResultHistoryLogGetAllExamQuestionObjsGet(e,this.data.resultObj.id??0).subscribe(a=>{if(1==a.success){let r=this.commonService.castJsonToClassObjs(X6.x,JSON.stringify(a.data?.objs));this.questionObjs=this.questionAnswerConfigService.changeQuestionContent(r??[],!0),i(!0)}else this.errorStatusObj(a.message??"",!0),i(!1)})}btnCloseDialog(){this.closeDialog.emit(!1)}confirmData(e){this.initStatusObj(),this.examResultHistoryLogService.apiExamResultHistoryLogAcceptResultObjGet(e.examId,this.data.resultObj.id??0,e.userId,e.id).subscribe(i=>{1==i.success?(this.successStatusObj(),this.showSuccessSnack("lang_auto_phuc_khao_du_lieu_bai_lam_thanh_cong"),this.closeDialog.emit(!0)):(this.errorStatusObj(i.message??"",!0),this.closeDialog.emit(!1))})}openDialogConfirm(e,i){this.sAztDialogService.open(o5,{data:{isShow:!0,index:i+1,type:11,createdAt:e.secondTime??0,examId:e.examId??0,userId:e.userId??0,id:e.id??0},restoreFocus:!1}).afterClosed().subscribe(s=>{s&&this.confirmData(s)})}getNextPage(){this.getObjs(this.curPage)}getObjs(e){""==e&&this.initStatusObj(),this.isLoadMore=!0,this.getQuestionData(this.data.examObj.id??0,i=>{i?this.examResultHistoryLogService.apiExamResultHistoryLogGetResultObjsGet(this.data.examObj.id??0,this.data.resultObj.id??0,this.data.resultObj.userId?.toString(),this.curPage).subscribe(a=>{if(1==a.success){if(a.data?.objs&&a.data.objs.length>0){var r=this.convertGzipResultObjs(a.data.objs);r=this.convertRawToMixForAnswerObjs(r),this.objs=this.objs.concat(r)}this.curPage=a.data?.nextPage??"",a.data?.nextPage||(this.disableBtn=!0),this.isLoadMore=!1,this.successStatusObj()}else this.isLoadMore=!1,this.errorStatusObj(a.message??"",!0)}):(this.stopStatusObj(),this.isLoadMore=!0)})}ngOnInit(){this.getObjs(this.curPage),this.offset=(new Date).getTimezoneOffset(),super.ngOnInit()}constructor(e,i,a,r){super(),this.examResultHistoryLogService=e,this.zipDataService=i,this.questionAnswerConfigService=a,this.sAztDialogService=r,this.isFrontEnd=!1,this.closeDialog=new t.vpe,this.objs=[],this.curPage="",this.offset=0,this.disableBtn=!1,this.questionObjs=[],this.isLoadMore=!1}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Ke.ml),t.Y36(La.a),t.Y36(JF.U),t.Y36(Fi.C))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-result-history-true-false"]],inputs:{data:"data",isFrontEnd:"isFrontEnd"},outputs:{closeDialog:"closeDialog"},features:[t.qOj],decls:3,vars:2,consts:[["class","block-table-v2",4,"ngIf","ngIfElse"],["doneLoading",""],[1,"block-table-v2"],[1,"block-table"],[1,"mt-3","mb-2"],[1,"table-responsive"],["class","table table-bordered","id","tracktable",4,"ngIf","ngIfElse"],["noData",""],[1,"row","my-1","m-2"],["class","col-md-12",4,"ngIf"],["class","col-md-12 text-center",4,"ngIf"],["id","tracktable",1,"table","table-bordered"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"text-left"],["azt-track-service","truefalse-XnX_QRUEsZ0",1,"btn","btn-primary",3,"disabled","click"],[1,"alert","alert-info","p-2"],[1,"col-md-12"],[1,"d-flex","justify-content-center","mt-3"],[1,"w-4","h-4","inline-block"],[1,"sr-only","ml-2"],[1,"col-md-12","text-center"],["azt-track-service","truefalse-RDGSarfASfG","mat-button","",1,"btn-all-add",3,"matTooltip","disabled","click"]],template:function(e,i){if(1&e&&(t.YNc(0,HF,2,0,"div",0),t.YNc(1,rQ,9,4,"ng-template",null,1,t.W1O)),2&e){const a=t.MAs(2);t.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a)}},dependencies:[D.sg,D.O5,vr.lW,Jo.Hw,Mi.gM,si.l,oi.n,jt.JV,jt.hc],encapsulation:2}),n})();function lQ(n,o){if(1&n&&(t.TgZ(0,"div",9)(1,"span",10),t._UZ(2,"azt-create-avatar",11),t.qZA(),t.TgZ(3,"span",12),t._uU(4),t.qZA(),t._uU(5,"\xa0-\xa0 "),t.TgZ(6,"span",13),t._uU(7),t.ALo(8,"mytranslate"),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.Q6J("linkAvatar",e.dataHistory.studentObj.avatar)("nameCreateAvatar",e.dataHistory.studentObj.fullName)("size",30),t.xp6(2),t.hij(" ",e.dataHistory.studentObj.fullName,""),t.xp6(3),t.Oqu(t.lcZ(8,5,"lang_auto_chuc_nang_nay_duoc_su_dung_khi_giao_vien_chap_nhan_phuc_khao_diem_cho_nhung_truong_hop_thi_sinh_nop_bai_muon_hoac_chua_dong_bo_het_du_lieu_bai_thi"))}}function cQ(n,o){1&n&&(t.TgZ(0,"div",9)(1,"span",13),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&n&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"lang_auto_chuc_nang_nay_duoc_su_dung_khi_giao_vien_chap_nhan_phuc_khao_diem_cho_nhung_truong_hop_thi_sinh_nop_bai_muon_hoac_chua_dong_bo_het_du_lieu_bai_thi")))}function uQ(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"mat-tab",14),t.ALo(1,"mytranslate"),t.TgZ(2,"azt-mat-dialog-content")(3,"app-result-history-true-false",15),t.NdJ("closeDialog",function(a){t.CHM(e);const r=t.oxw();return t.KtG(r.btnCloseDialog(a))}),t.qZA()()()}if(2&n){const e=t.oxw();t.s9C("label",t.lcZ(1,3,"lang_auto_du_lieu_bai_lam")),t.xp6(3),t.Q6J("data",e.dataHistory)("isFrontEnd",e.isFrontEnd)}}function dQ(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"mat-tab",14),t.ALo(1,"mytranslate"),t.TgZ(2,"azt-mat-dialog-content")(3,"app-result-history-essay",16),t.NdJ("closeDialog",function(a){t.CHM(e);const r=t.oxw(2);return t.KtG(r.btnCloseDialog(a))}),t.qZA()()()}if(2&n){const e=t.oxw(2);t.s9C("label",t.lcZ(1,3,"lang_auto_file_bai_lam")),t.xp6(3),t.Q6J("isFrontEnd",e.isFrontEnd)("data",e.dataHistory)}}function mQ(n,o){if(1&n&&(t.ynx(0),t.YNc(1,dQ,4,5,"mat-tab",4),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==(null==e.dataHistory.resultObj?null:e.dataHistory.resultObj.files)||""==(null==e.dataHistory.resultObj?null:e.dataHistory.resultObj.files)||"[]"==(null==e.dataHistory.resultObj?null:e.dataHistory.resultObj.files))}}let hQ=(()=>{class n extends lo.e{btnCloseDialog(e){this.dialogRef.close(e)}constructor(e,i){super(i,e),this.dialogRef=e,this.isFrontEnd=!1,this.dataHistory={...i.dataHistory},this.isFrontEnd=i.isFrontEnd}}return n.\u0275fac=function(e){return new(e||n)(t.Y36($.so,8),t.Y36($.WI,8))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-result-history"]],features:[t.qOj],decls:13,vars:10,consts:[[1,"box"],[1,"px-5","pt-5"],["class","flex items-center",4,"ngIf"],["mat-align-tabs","start","dynamicHeight","",1,"mt-3",2,"height","60vh",3,"selectedIndex"],[3,"label",4,"ngIf"],[4,"ngIf"],["align","end"],[1,"text-right","p-3"],["azt-track-service","result-history-mkCSltAT1",1,"btn","w-24","btn","btn-secondary",3,"click"],[1,"flex","items-center"],[1,"stdimg","align-self-center"],[3,"linkAvatar","nameCreateAvatar","size"],[1,"ml-3"],[1,"text-danger"],[3,"label"],[2,"width","100%",3,"data","isFrontEnd","closeDialog"],[2,"width","100%",3,"isFrontEnd","data","closeDialog"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,lQ,9,7,"div",2),t.YNc(3,cQ,4,3,"div",2),t.TgZ(4,"mat-tab-group",3),t.YNc(5,uQ,4,5,"mat-tab",4),t.YNc(6,mQ,2,1,"ng-container",5),t.ALo(7,"hasEssayInExam"),t.qZA()(),t.TgZ(8,"mat-dialog-actions",6)(9,"div",7)(10,"button",8),t.NdJ("click",function(){return i.btnCloseDialog(!1)}),t._uU(11),t.ALo(12,"mytranslate"),t.qZA()()()()),2&e&&(t.xp6(2),t.Q6J("ngIf",!i.isFrontEnd),t.xp6(1),t.Q6J("ngIf",i.isFrontEnd),t.xp6(1),t.Q6J("selectedIndex",0),t.xp6(1),t.Q6J("ngIf","[]"==(null==i.dataHistory.resultObj?null:i.dataHistory.resultObj.answers)),t.xp6(1),t.Q6J("ngIf",t.lcZ(7,6,i.dataHistory.examObj)),t.xp6(5),t.hij(" ",t.lcZ(12,8,"lang_auto_dong")," "))},dependencies:[D.O5,$.H8,Zm.uX,Zm.SP,t4.g,zF,sQ,Ic.R,jt.JV,jt.VI],encapsulation:2}),n})();var pQ=M(72269);function _Q(n,o){if(1&n&&(t.TgZ(0,"div",12),t._uU(1),t.ALo(2,"mytranslate"),t.TgZ(3,"b"),t._uU(4),t.ALo(5,"number"),t.qZA()()),2&n){const e=o.$implicit,i=o.index,a=t.oxw(2);t.xp6(1),t.hij(" ",t.lcZ(2,2,"lang_combine_exam_component")+(i+1),":\xa0 "),t.xp6(3),t.Oqu(e+(a.totalMarkSubject?"/"+t.xi3(5,4,a.totalMarkSubject/a.totalSubject,"1.0-2"):""))}}function fQ(n,o){if(1&n&&(t.ynx(0),t.YNc(1,_Q,6,7,"div",11),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",null==e.examResultObj?null:e.examResultObj.subjectMarkValues)}}function gQ(n,o){if(1&n&&(t.TgZ(0,"span",14),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.lnq("(",e.examResultObj.rightAnswer,"/",e.examResultObj.totalQuestion-e.essayQuestionObjs.length,"\xa0",t.lcZ(2,3,"lang_auto_cau_brackets"),"")}}function xQ(n,o){if(1&n&&(t.TgZ(0,"div",12),t._uU(1),t.ALo(2,"mytranslate"),t.ALo(3,"mytranslate"),t.YNc(4,gQ,3,5,"span",13),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.AsE(" ",t.lcZ(2,3,"lang_auto_trac_nghiem"),": ",null!=e.examResultObj.trueFalseMark?e.examResultObj.trueFalseMark:t.lcZ(3,5,"lang_auto_chua_co_diem")," "),t.xp6(3),t.Q6J("ngIf",null!=(null==e.examResultObj?null:e.examResultObj.rightAnswer))}}function bQ(n,o){if(1&n&&t.YNc(0,xQ,5,7,"div",10),2&n){const e=t.oxw();t.Q6J("ngIf",e.trueFalseChoiceQuestionObjs.length>0&&e.examResultObj&&e.examResultObj.totalQuestion)}}function vQ(n,o){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.ALo(3,"mytranslate"),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.HOy("",t.lcZ(2,4,"lang_auto_tu_luan"),": ",null==e.examResultObj?null:e.examResultObj.essayMark," (",e.essayQuestionObjs.length," ",t.lcZ(3,6,"lang_auto_cau_brackets"),"")}}function yQ(n,o){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.TgZ(3,"span",16),t._uU(4),t.ALo(5,"mytranslate"),t.qZA(),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.hij(" ",t.lcZ(2,4,"lang_auto_tu_luan"),": "),t.xp6(3),t.Oqu(t.lcZ(5,6,"lang_auto_chua_cham")),t.xp6(2),t.AsE(" (",e.essayQuestionObjs.length," ",t.lcZ(7,8,"lang_auto_cau_brackets")," ")}}function wQ(n,o){if(1&n&&(t.TgZ(0,"div",12),t.YNc(1,vQ,4,8,"span",15),t.YNc(2,yQ,8,10,"span",15),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.examResultObj?null:e.examResultObj.confirmedAt),t.xp6(1),t.Q6J("ngIf",!(null!=e.examResultObj&&e.examResultObj.confirmedAt))}}function CQ(n,o){if(1&n&&(t.TgZ(0,"div",12),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.AsE("",t.lcZ(2,2,"lang_auto_so_file_da_nop"),": ",e.files.length,"")}}function TQ(n,o){if(1&n&&(t.TgZ(0,"div",12),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.AsE("",t.lcZ(2,2,"lang_auto_so_lan_thoat_man_hinh"),": ",e.examTracks.exitFullScreen,"")}}function kQ(n,o){if(1&n&&(t.TgZ(0,"div",12),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.AsE("",t.lcZ(2,2,"lang_auto_so_lan_thoat_trinh_duyet"),": ",e.examTracks.blurWindow,"")}}function AQ(n,o){if(1&n&&(t.TgZ(0,"div",12)(1,"span",17),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.AsE("",t.lcZ(3,2,"lang_auto_giao_vien_cham"),": ",null==e.markedByObj?null:e.markedByObj.fullName,"")}}function SQ(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",12),t._uU(1),t.ALo(2,"mytranslate"),t.TgZ(3,"button",18),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.clickResultTrack())}),t.O4$(),t.TgZ(4,"svg",19),t._UZ(5,"path",20)(6,"polyline",21)(7,"circle",22)(8,"path",23),t.qZA()()()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_xem_chi_tiet_qua_trinh_lam_bai"),": "))}function OQ(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",12),t._uU(1),t.ALo(2,"mytranslate"),t.TgZ(3,"button",24),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.showResultInfors())}),t.O4$(),t.TgZ(4,"svg",25),t._UZ(5,"circle",26)(6,"path",27)(7,"path",28)(8,"path",29),t.qZA()()()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_show_infos_test_submit"),": "))}function EQ(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",12),t._uU(1),t.ALo(2,"mytranslate"),t.TgZ(3,"button",30),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.openResultHistoryReview())}),t.O4$(),t.TgZ(4,"svg",31),t._UZ(5,"path",32)(6,"path",33)(7,"path",34),t.qZA()()()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_phuc_khao"),": "))}let MQ=(()=>{class n extends St.Q{get checkHasType1Question(){let e=!1;for(let i=0;i<(this.questionObjs?.length??0);i++)if(this.answerTypeService.isOneChoiceAnswer(this.questionObjs?.[i])){e=!0;break}return e}checkShowIconHistory(){let e=!1;return this.historyExamResultObjs&&this.historyExamResultObjs.length>0&&(e=!0),this.homeworkExamService.isOnlyTrueFalse(this.examObj)?!(!e||!this.homeworkExamService.checkEmptyAnswerExamAll(this.examResultObj)):!(!e||""!=this.examResultObj?.files&&null!=this.examResultObj?.files&&!this.homeworkExamService.checkEmptyAnswerExamAll(this.examResultObj))}openResultHistoryReview(){this.sAztDialogService.open(hQ,{data:{dataHistory:{examObj:this.examObj,resultObj:this.examResultObj,studentObj:this.studentObj},isFrontEnd:!1},restoreFocus:!1}).afterClosed().subscribe(a=>{a&&window.location.reload()})}showResultInfors(){this.sAztDialogService.open(pQ.p,{width:"600px",data:this.resultInfos,restoreFocus:!1})}clickResultTrack(){this.sAztDialogService.open(AF,{width:"750px",data:{examResultIdParam:this.examResultIdParam,examIdParam:this.examObj?.id,userIdParam:this.userIdParam,studentIdParam:this.studentIdParam},restoreFocus:!1})}ngOnInit(){super.ngOnInit(),this.totalSubject=this.examResultObj?.subjectMarkValues?.length??3,this.totalMarkSubject=this.examResultObj?.examResultStatisticObj?.examQuestionStatisticObj?.totalMark??0}constructor(e,i,a){super(),this.answerTypeService=e,this.homeworkExamService=i,this.sAztDialogService=a,this.essayQuestionObjs=[],this.trueFalseChoiceQuestionObjs=[],this.files=[],this.historyExamResultObjs=[],this.resultInfos=[],this.totalSubject=3,this.totalMarkSubject=30}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(hr.i),t.Y36(wp.v),t.Y36(Fi.C))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-testbank-test-review-show-detail-info-for-teacher"]],inputs:{examResultIdParam:"examResultIdParam",userIdParam:"userIdParam",studentIdParam:"studentIdParam",examIdParam:"examIdParam",studentObj:"studentObj",examObj:"examObj",examResultObj:"examResultObj",markedByObj:"markedByObj",questionObjs:"questionObjs",essayQuestionObjs:"essayQuestionObjs",trueFalseChoiceQuestionObjs:"trueFalseChoiceQuestionObjs",files:"files",historyExamResultObjs:"historyExamResultObjs",examTracks:"examTracks",resultInfos:"resultInfos"},features:[t.qOj],decls:25,vars:17,consts:[[1,"info-exam-online"],[1,"rounded-md","bg-slate-200","dark:bg-darkmode-400","p-3",2,"border-bottom-left-radius","0","border-bottom-right-radius","0"],[1,"flex","items-center"],[1,"text-md"],[1,"info-exam-body","rounded-md","border","border-slate-200/60","dark:border-darkmode-400","p-2",2,"border-top-left-radius","0","border-top-right-radius","0"],[1,"font-medium","flex","items-center"],[1,"mr-3"],[1,"text-lg"],[4,"ngIf","ngIfElse"],["showNormalMark",""],["class","flex items-center mt-2",4,"ngIf"],["class","flex items-center mt-2",4,"ngFor","ngForOf"],[1,"flex","items-center","mt-2"],["class","ml-2",4,"ngIf"],[1,"ml-2"],[4,"ngIf"],[1,"text-pending"],[1,"mr-2"],["azt-track-service","show-detail-info-box-for-teacher--xrnTJmA5SE",1,"btn-text-primary","ml-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-5","h-5"],["d","M16 22h2c.5 0 1-.2 1.4-.6.4-.4.6-.9.6-1.4V7.5L14.5 2H6c-.5 0-1 .2-1.4.6C4.2 3 4 3.5 4 4v3"],["points","14 2 14 8 20 8"],["cx","8","cy","16","r","6"],["d","M9.5 17.5 8 16.25V14"],["azt-track-service","show-detail-info-box-for-teacher-setZE9eOS5A",1,"btn-text-primary","ml-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide"],["cx","12","cy","12","r","10"],["d","M17 12h.01"],["d","M12 12h.01"],["d","M7 12h.01"],["azt-track-service","show-detail-info-box-for-teacher-IF9N08gpe_f",1,"btn-text-primary","ml-3",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-5","h-5","lucide"],["d","M3 3v5h5"],["d","M3.05 13A9 9 0 1 0 6 5.3L3 8"],["d","M12 7v5l4 2"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3)(4,"span"),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()()()(),t.TgZ(7,"div",4)(8,"div",5)(9,"span",6),t._uU(10),t.ALo(11,"mytranslate"),t.qZA(),t.TgZ(12,"span",7),t._uU(13),t.qZA()(),t.YNc(14,fQ,2,1,"ng-container",8),t.YNc(15,bQ,1,1,"ng-template",null,9,t.W1O),t.YNc(17,wQ,3,2,"div",10),t.YNc(18,CQ,3,4,"div",10),t.YNc(19,TQ,3,4,"div",10),t.YNc(20,kQ,3,4,"div",10),t.YNc(21,AQ,4,4,"div",10),t.YNc(22,SQ,9,3,"div",10),t.YNc(23,OQ,9,3,"div",10),t.YNc(24,EQ,8,3,"div",10),t.qZA()()),2&e){const a=t.MAs(16);let r;t.xp6(5),t.Oqu(t.lcZ(6,13,"lang_auto_thong_tin_chi_tiet")),t.xp6(5),t.hij("",t.lcZ(11,15,"lang_auto_diem_cuoi"),":"),t.xp6(3),t.Oqu((null==i.examResultObj?null:i.examResultObj.mark)+(i.totalMarkSubject?"/"+i.totalMarkSubject:"")),t.xp6(1),t.Q6J("ngIf",(null==i.examObj?null:i.examObj.subjectMarks)&&(null==i.examResultObj||null==i.examResultObj.subjectMarkValues?null:i.examResultObj.subjectMarkValues.length))("ngIfElse",a),t.xp6(3),t.Q6J("ngIf",i.essayQuestionObjs.length),t.xp6(1),t.Q6J("ngIf",i.essayQuestionObjs.length),t.xp6(1),t.Q6J("ngIf",i.examTracks&&0!=(null==i.examObj?null:i.examObj.autoMonitor)),t.xp6(1),t.Q6J("ngIf",i.examTracks&&0!=(null==i.examObj?null:i.examObj.autoMonitor)),t.xp6(1),t.Q6J("ngIf",null==i.examResultObj?null:i.examResultObj.confirmedAt),t.xp6(1),t.Q6J("ngIf",i.checkHasType1Question&&i.trueFalseChoiceQuestionObjs.length>0&&(null==i.examResultObj?null:i.examResultObj.totalQuestion)),t.xp6(1),t.Q6J("ngIf",i.resultInfos.length),t.xp6(1),t.Q6J("ngIf",i.checkShowIconHistory()&&(null!==(r=null==i.examResultObj?null:i.examResultObj.userId)&&void 0!==r?r:0)>0)}},dependencies:[D.sg,D.O5,D.JJ,jt.JV],encapsulation:2}),n})();function IQ(n,o){if(1&n&&(t.TgZ(0,"div",6)(1,"button",7),t._uU(2),t.ALo(3,"mytranslate"),t.TgZ(4,"span",8),t._uU(5),t.qZA()()()),2&n){const e=t.oxw(),i=t.MAs(2);t.xp6(1),t.Q6J("matMenuTriggerFor",i),t.xp6(1),t.hij(" ",t.lcZ(3,3,"lang_auto_xem_cac_lan_thi_")," "),t.xp6(3),t.hij("(",e.historyExamResultObjs.length,")")}}function LQ(n,o){1&n&&(t.TgZ(0,"li"),t._UZ(1,"hr",14),t.qZA())}const PQ=function(n){return{"bg-slate-100 dark:bg-darkmode-300":n}};function NQ(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",9),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.getAndProcessAnswers(r.id))}),t.TgZ(2,"div",10)(3,"div",11),t._uU(4),t.ALo(5,"mytranslate"),t.ALo(6,"mytranslate"),t.qZA(),t.TgZ(7,"div",12),t._uU(8),t.ALo(9,"formatFullDateTimeWithoutSecondByUserUnitPipe"),t.ALo(10,"formatOnlyTimeByUserUnitPipe"),t.qZA(),t.TgZ(11,"div",12),t._uU(12),t.ALo(13,"mytranslate"),t.qZA()()()(),t.YNc(14,LQ,2,0,"li",13)}if(2&n){const e=o.$implicit,i=o.index,a=t.oxw();t.xp6(1),t.Q6J("ngClass",t.VKq(20,PQ,e.id===a.examResultIdParam)),t.xp6(3),t.HOy(" ",t.lcZ(5,10,"lang_auto_lan")," ",a.historyExamResultObjs.length-i," [",t.lcZ(6,12,"lang_auto_diem")," ",e.mark,"] "),t.xp6(4),t.AsE("",t.lcZ(9,14,e.startedTest)," - ",t.lcZ(10,16,e.createdAt),""),t.xp6(4),t.AsE("",t.lcZ(13,18,"lang_auto_thoi_gian_lam_bai"),": ",a.calculateTime(e.startedTest,e.createdAt),""),t.xp6(2),t.Q6J("ngIf",i!=a.historyExamResultObjs.length-1)}}let ZQ=(()=>{class n extends St.Q{getAndProcessAnswers(e){var i=this.commonService.getLocalRouter("/admin/testbank/test-review/"+this.examIdParam+"/"+this.userIdParam+"/"+this.studentIdParam+"/"+(e??0))+"?backto="+encodeURIComponent(this.backToLink);window.location.href=i.toString()}calculateTime(e,i){return this.timeService.calculationTimeExamTested(e,i)}ngOnInit(){super.ngOnInit()}constructor(e){super(),this.timeService=e,this.historyExamResultObjs=[],this.backToLink=""}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(br.D))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-testbank-test-review-exam-result-history"]],inputs:{historyExamResultObjs:"historyExamResultObjs",backToLink:"backToLink",examResultIdParam:"examResultIdParam",userIdParam:"userIdParam",studentIdParam:"studentIdParam",examIdParam:"examIdParam"},features:[t.qOj],decls:6,vars:2,consts:[["class","history-exam mt-3",4,"ngIf"],["yPosition","above"],["menuTimeTest","matMenu"],[1,"dropdown-menu","show","w-56","relative",2,"overflow-y","auto","max-height","calc(100vh - 250px)","box-shadow","0px 3px 10px #00000017"],[1,"dropdown-content",2,"margin-top","0"],["ngFor","",3,"ngForOf"],[1,"history-exam","mt-3"],[1,"btn","btn-outline-secondary","block","w-full",3,"matMenuTriggerFor"],[1,"ml-2"],["azt-track-service","exam-result-history-6Kv3ed2IY6",1,"dropdown-item","mb-2",3,"ngClass","click"],[1,"once-tested"],[1,"font-medium"],[1,"text-xs","text-slate-600","dark:text-slate-300","mt-1"],[4,"ngIf"],[1,"dropdown-divider","border-slate-200","dark:border-darkmode-400"]],template:function(e,i){1&e&&(t.YNc(0,IQ,6,5,"div",0),t.TgZ(1,"mat-menu",1,2)(3,"div",3)(4,"ul",4),t.YNc(5,NQ,15,22,"ng-template",5),t.qZA()()()),2&e&&(t.Q6J("ngIf",i.historyExamResultObjs),t.xp6(5),t.Q6J("ngForOf",i.historyExamResultObjs))},dependencies:[D.mk,D.sg,D.O5,Ii.VK,Ii.p6,jt.JV,jt.$n,jt.Ez],encapsulation:2}),n})(),DQ=(()=>{class n extends St.Q{clickExportPdf(){this.essayQuestionObjs.length>0&&!this.examResultObj?.confirmedAt?this.showErrorSnack("lang_auto_ban_chi_co_the_tai_file_pdf_khi_cham_xong_tu_luan"):this.exportResultService.processUser(Number(this.examIdParam??0),Number(this.examResultIdParam??0),this.userIdParam,this.studentIdParam).then(()=>{}).catch(e=>{this.commonService.snackError("string"==typeof e?e:e.message)})}getBackData(e,i){let a="";if(e.includes("backto")){let r=e.substring(e.lastIndexOf("backto"));r.includes("shareType")&&(a=i?r.substring(r.lastIndexOf("data")):r)}return a}redirectToTestedList(){let e=this.commonService.getMyQueryParam("backto"),i=this.getBackData(e??"",!1);this.commonService.myNavigationWithQueryString("/admin/testbank/exam-results-list/"+(this.examObj?.categoryId??0)+"/"+this.examIdParam+"/0",i?"?"+decodeURIComponent(i):"")}ngOnInit(){super.ngOnInit()}constructor(e){super(),this.exportResultService=e,this.essayQuestionObjs=[]}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(G0.U))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-testbank-test-review-export-pdf-menu"]],inputs:{examResultIdParam:"examResultIdParam",userIdParam:"userIdParam",studentIdParam:"studentIdParam",examIdParam:"examIdParam",examObj:"examObj",examResultObj:"examResultObj",essayQuestionObjs:"essayQuestionObjs"},features:[t.qOj],decls:29,vars:7,consts:[[1,"menu","ml-2"],[1,"btn","btn-sm",3,"matMenuTriggerFor"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-menu","w-4","h-4"],["x1","4","y1","12","x2","20","y2","12"],["x1","4","y1","6","x2","20","y2","6"],["x1","4","y1","18","x2","20","y2","18"],["xPosition","before"],["mainMenu","matMenu"],[1,"dropdown-menu","show","relative","w-72"],[1,"dropdown-content"],["azt-track-service","export-pdf-menu-box-55F1itGQin",1,"dropdown-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4","mr-2"],["d","M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"],["points","7 10 12 15 17 10"],["x1","12","y1","15","x2","12","y2","3"],["azt-track-service","export-pdf-menu-box-LA2X4vBtnx",1,"dropdown-item",3,"click"],["x","8","y","2","width","8","height","4","rx","1","ry","1"],["d","M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"],["d","M12 11h4"],["d","M12 16h4"],["d","M8 11h.01"],["d","M8 16h.01"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"button",1),t.O4$(),t.TgZ(2,"svg",2),t._UZ(3,"line",3)(4,"line",4)(5,"line",5),t.qZA()()(),t.kcU(),t.TgZ(6,"mat-menu",6,7)(8,"div",8)(9,"ul",9)(10,"li")(11,"a",10),t.NdJ("click",function(){return i.clickExportPdf()}),t.O4$(),t.TgZ(12,"svg",11),t._UZ(13,"path",12)(14,"polyline",13)(15,"line",14),t.qZA(),t._uU(16),t.ALo(17,"mytranslate"),t.qZA()(),t.kcU(),t.TgZ(18,"li")(19,"a",15),t.NdJ("click",function(){return i.redirectToTestedList()}),t.O4$(),t.TgZ(20,"svg",11),t._UZ(21,"rect",16)(22,"path",17)(23,"path",18)(24,"path",19)(25,"path",20)(26,"path",21),t.qZA(),t._uU(27),t.ALo(28,"mytranslate"),t.qZA()()()()()),2&e){const a=t.MAs(7);t.xp6(1),t.Q6J("matMenuTriggerFor",a),t.xp6(15),t.hij(" ",t.lcZ(17,3,"lang_auto_tai_bai_lam_duoi_dang_pdf")," "),t.xp6(11),t.hij(" ",t.lcZ(28,5,"lang_auto_danh_sach_da_thi")," ")}},dependencies:[Ii.VK,Ii.p6,jt.JV],encapsulation:2}),n})(),jQ=(()=>{class n extends St.Q{hasNext(){var e=-1;if(this.testedUserObjs){for(var i=0;i<this.testedUserObjs.length;i++)if(this.testedUserObjs[i].userId==this.userIdParam&&this.testedUserObjs[i].studentId==this.studentIdParam){e=i;break}return e<this.testedUserObjs.length-1}return!1}hasPrev(){var e=-1;if(this.testedUserObjs){for(var i=0;i<this.testedUserObjs.length;i++)if(this.testedUserObjs[i].userId==this.userIdParam&&this.testedUserObjs[i].studentId==this.studentIdParam){e=i;break}return e>0}return!1}handleNavigate(e){this.initStatusObj();let i=0;i=this.historyExamResultObjs.length?this.historyExamResultObjs[0].id??this.examResultIdParam??0:this.examResultIdParam??0,this.waitDestroy(this.examPageResultService.apiExamPageResultGetNextResultGet(i,this.classroomId,"next"==e?1:0).subscribe(a=>{if(1==a.success&&a.data){var r=a.data.userId?.toString(),s=a.data.studentId?.toString(),l=a.data.id?.toString(),c=this.commonService.getLocalRouter("/admin/testbank/test-review/"+this.examIdParam+"/"+r+"/"+s+"/"+(l??0))+"?backto="+encodeURIComponent(this.backToLink);window.location.href=c.toString(),this.successStatusObj()}else this.showErrorSnack(a.message??""),this.stopStatusObj()}))}ngOnInit(){super.ngOnInit(),this.waitDestroy((0,dt.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.backToLink=this.commonService.getMyQueryParam("backto")??"",this.examResultIdParam=Number(this.activeRoute.snapshot.paramMap.get("result_id")),this.userIdParam=this.activeRoute.snapshot.paramMap.get("user_id")??void 0,this.studentIdParam=this.activeRoute.snapshot.paramMap.get("student_id")??void 0,this.examIdParam=this.activeRoute.snapshot.paramMap.get("exam_id")??void 0}))}constructor(e,i){super(),this.examPageResultService=e,this.activeRoute=i,this.classroomId=0,this.historyExamResultObjs=[],this.backToLink=""}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Ke.DR),t.Y36(O.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-testbank-test-review-show-next-back-button"]],inputs:{testedUserObjs:"testedUserObjs",classroomId:"classroomId",historyExamResultObjs:"historyExamResultObjs"},features:[t.qOj],decls:9,vars:6,consts:[[1,"p-3"],["azt-track-service","show-next-back-box-_0g3eIKk5Q",1,"btn","btn-sm","btn-secondary-soft","mr-2",3,"matTooltip","click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4"],["points","15 18 9 12 15 6"],["azt-track-service","show-next-back-box-gLJelBC71K",1,"btn","btn-sm","btn-secondary-soft",3,"matTooltip","click"],["points","9 18 15 12 9 6"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"button",1),t.NdJ("click",function(){return i.handleNavigate("prev")}),t.ALo(2,"mytranslate"),t.O4$(),t.TgZ(3,"svg",2),t._UZ(4,"polyline",3),t.qZA()(),t.kcU(),t.TgZ(5,"button",4),t.NdJ("click",function(){return i.handleNavigate("next")}),t.ALo(6,"mytranslate"),t.O4$(),t.TgZ(7,"svg",2),t._UZ(8,"polyline",5),t.qZA()()()),2&e&&(t.xp6(1),t.s9C("matTooltip",t.lcZ(2,2,"lang_auto_hoc_sinh_truoc_do")),t.xp6(4),t.s9C("matTooltip",t.lcZ(6,4,"lang_auto_hoc_sinh_tiep_theo")))},dependencies:[Mi.gM,jt.JV],encapsulation:2}),n})();var qQ=M(51614);const FQ=["drawer"];function QQ(n,o){1&n&&(t.TgZ(0,"div",5),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_chua_co_du_lieu_nop_bai")," "))}function RQ(n,o){1&n&&(t.TgZ(0,"div")(1,"div",32),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"lang_auto_thi_sinh_chua_thi_lan_nao")," "))}function UQ(n,o){if(1&n&&t._UZ(0,"app-testbank-show-offline-result",35),2&n){const e=t.oxw(3);t.Q6J("backToLink",e.backToLink)("examResultIdParam",e.examResultIdParam)("userIdParam",e.userIdParam)("studentIdParam",e.studentIdParam)("examIdParam",e.examIdParam)("essayExam",!!e.essayQuestionObjs.length)("examObj",e.examObj)("offlineMarkObj",null==e.initDataResult||null==e.initDataResult.data?null:e.initDataResult.data.offlineMarkObj)("offlineMixQuestionObj",null==e.initDataResult||null==e.initDataResult.data?null:e.initDataResult.data.offlineMixQuestionObj)("isDeletableExamResultObj",null==e.initDataResult||null==e.initDataResult.data?null:e.initDataResult.data.isDeletableExamResultObj)}}const i4=function(){return[]};function BQ(n,o){if(1&n&&(t._UZ(0,"app-testbank-test-review-show-detail-info-for-teacher",33),t.YNc(1,UQ,1,10,"app-testbank-show-offline-result",27),t._UZ(2,"app-testbank-test-review-exam-result-history",34)),2&n){const e=t.oxw(2);let i,a;t.Q6J("examResultIdParam",e.examResultIdParam)("userIdParam",e.userIdParam)("studentIdParam",e.studentIdParam)("examIdParam",e.examIdParam)("studentObj",e.studentObj)("examObj",e.examObj)("examResultObj",e.examResultObj)("markedByObj",null==e.initDataResult||null==e.initDataResult.data?null:e.initDataResult.data.markedByObj)("questionObjs",e.questionObjs)("essayQuestionObjs",e.essayQuestionObjs)("trueFalseChoiceQuestionObjs",e.trueFalseChoiceQuestionObjs)("files",e.files)("historyExamResultObjs",null!==(i=null==e.initDataResult||null==e.initDataResult.data?null:e.initDataResult.data.historyExamResultObjs)&&void 0!==i?i:t.DdM(22,i4))("examTracks",null==e.initDataResult||null==e.initDataResult.data?null:e.initDataResult.data.examTracks)("resultInfos",e.resultInfos),t.xp6(1),t.Q6J("ngIf",!e.isMobileWebView),t.xp6(1),t.Q6J("historyExamResultObjs",null!==(a=null==e.initDataResult||null==e.initDataResult.data?null:e.initDataResult.data.historyExamResultObjs)&&void 0!==a?a:t.DdM(23,i4))("backToLink",e.backToLink)("examResultIdParam",e.examResultIdParam)("userIdParam",e.userIdParam)("studentIdParam",e.studentIdParam)("examIdParam",e.examIdParam)}}function zQ(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",36),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.sAztMatDrawerService.openDrawer())}),t.ALo(1,"mytranslate"),t.O4$(),t.TgZ(2,"svg",37),t._UZ(3,"rect",38)(4,"path",39)(5,"path",40),t.qZA()()}2&n&&t.s9C("matTooltip",t.lcZ(1,1,"lang_auto_mo_menu"))}function JQ(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",41),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.sAztMatDrawerService.closeDrawer())}),t.ALo(1,"mytranslate"),t.O4$(),t.TgZ(2,"svg",37),t._UZ(3,"rect",38)(4,"path",39)(5,"path",42),t.qZA()()}2&n&&t.s9C("matTooltip",t.lcZ(1,1,"lang_auto_dong_menu"))}function HQ(n,o){if(1&n&&t._UZ(0,"app-testbank-show-offline-result",35),2&n){const e=t.oxw(2);t.Q6J("backToLink",e.backToLink)("examResultIdParam",e.examResultIdParam)("userIdParam",e.userIdParam)("studentIdParam",e.studentIdParam)("examIdParam",e.examIdParam)("essayExam",!!e.essayQuestionObjs.length)("examObj",e.examObj)("offlineMarkObj",null==e.initDataResult||null==e.initDataResult.data?null:e.initDataResult.data.offlineMarkObj)("offlineMixQuestionObj",null==e.initDataResult||null==e.initDataResult.data?null:e.initDataResult.data.offlineMixQuestionObj)("isDeletableExamResultObj",null==e.initDataResult||null==e.initDataResult.data?null:e.initDataResult.data.isDeletableExamResultObj)}}function GQ(n,o){if(1&n&&t._UZ(0,"azt-loaded-img",50),2&n){const e=t.oxw(3);t.Q6J("imgSrc",null==e.examObj?null:e.examObj.examHeader)}}function $Q(n,o){if(1&n&&(t.TgZ(0,"div",51),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n){const e=t.oxw(3);t.xp6(1),t.AsE("",t.lcZ(2,2,"lang_auto_tong_so_cau_dung")," ",null==e.examResultObj?null:e.examResultObj.rightAnswer,".")}}function YQ(n,o){if(1&n&&(t.TgZ(0,"div",51),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n){const e=t.oxw(3);let i;t.xp6(1),t.AsE("",t.lcZ(2,2,"lang_auto_tong_so_cau_sai")," ",(null!==(i=null==e.examResultObj?null:e.examResultObj.totalQuestion)&&void 0!==i?i:0)-e.essayQuestionObjs.length-(null!==(i=null==e.examResultObj?null:e.examResultObj.rightAnswer)&&void 0!==i?i:0),".")}}const KQ=function(n,o){return{correct:n,incorrect:o}};function WQ(n,o){if(1&n&&t._UZ(0,"azt-question-standalone-for-teacher-at-review-page",53),2&n){const e=t.oxw(),i=e.$implicit,a=e.index,r=t.oxw(3);t.Q6J("follower",r.followerRenderQuest)("examObj",r.examObj)("questionObj",i)("curQuestionIndex",a)("userAnswersObj",r.userAnswersObj)("currentTab","multiple_choice_tab")("orgExamObjs",r.orgExamObjs)("ngClass",t.WLB(8,KQ,null==i?null:i.correctAnswer,!i.correctAnswer))}}function VQ(n,o){if(1&n&&t.YNc(0,WQ,1,11,"azt-question-standalone-for-teacher-at-review-page",52),2&n){const e=t.oxw(3);t.Q6J("ngIf",e.examObj)}}function XQ(n,o){if(1&n&&(t.TgZ(0,"mat-tab",43),t.ALo(1,"mytranslate"),t.TgZ(2,"div")(3,"div",44)(4,"ng-scrollbar",45)(5,"div",46),t.YNc(6,GQ,1,1,"azt-loaded-img",47),t.YNc(7,$Q,3,4,"div",48),t.YNc(8,YQ,3,4,"div",48),t.YNc(9,VQ,1,1,"ng-template",49),t.qZA()()()()()),2&n){const e=t.oxw(2);t.s9C("label",t.lcZ(1,10,"lang_auto_trac_nghiem")),t.xp6(2),t.Tol(e.viewOption),t.xp6(2),t.Q6J("visibility","hover")("disabled",e.isMobileDevice),t.xp6(2),t.Q6J("ngIf",null==e.examObj?null:e.examObj.examHeader),t.xp6(1),t.Q6J("ngIf","viewRight"==e.viewOption),t.xp6(1),t.Q6J("ngIf","viewWrong"==e.viewOption),t.xp6(1),t.Q6J("ngForOf",e.questionObjs)}}function tR(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"azt-mark-essay-new",58),t.NdJ("saveResultEvent",function(a){t.CHM(e);const r=t.oxw(3);return t.KtG(r.saveResultEvent(a))}),t.qZA(),t.BQk()}if(2&n){const e=t.oxw(3);let i;t.xp6(1),t.Q6J("curSelectedTab",e.curSelectedTab)("examObj",e.examObj)("showForTeacher",!0)("questions",e.essayQuestionObjs)("files",e.files)("userAnswersObj",e.userAnswersObj)("examResultObj",e.examResultObj)("resultID",null!==(i=e.examResultIdParam)&&void 0!==i?i:0)("orgExamObjs",e.orgExamObjs)("changeSelectedTab",e.changeSelectedTab)("orgExamObjs",e.orgExamObjs)}}function eR(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"azt-mark-essay",59),t.NdJ("saveResultEvent",function(a){t.CHM(e);const r=t.oxw(3);return t.KtG(r.saveResultEvent(a))}),t.qZA()}if(2&n){const e=t.oxw(3);let i;t.Q6J("showForTeacher",!0)("examObj",e.examObj)("questions",e.essayQuestionObjs)("files",e.files)("examResultObj",e.examResultObj)("userAnswersObj",e.userAnswersObj)("resultID",null!==(i=e.examResultIdParam)&&void 0!==i?i:0)("iframeViewMode","edit")("hasLoadedData",e.hasLoadedData)("orgExamObjs",e.orgExamObjs)}}function nR(n,o){if(1&n&&(t.TgZ(0,"mat-tab",54),t.ALo(1,"mytranslate"),t.TgZ(2,"div",55)(3,"div",56),t.YNc(4,tR,2,11,"ng-container",14),t.YNc(5,eR,1,10,"ng-template",null,57,t.W1O),t.qZA()()()),2&n){const e=t.MAs(6),i=t.oxw(2);t.s9C("label",t.lcZ(1,3,"lang_auto_tu_luan")),t.xp6(4),t.Q6J("ngIf",i.checkMarkNote)("ngIfElse",e)}}const iR=function(n,o){return{"w-85":n,"w-25":o}},oR=function(n){return{"azt-mobile-draw-left":n}},aR=function(n){return{"ml-25":n}},rR=function(n){return{"ml-5":n}};function sR(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"mat-drawer-container",6)(1,"mat-drawer",7,8),t.NdJ("closedStart",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.changeStatusNav())}),t.TgZ(3,"div",9)(4,"div",10)(5,"div",11),t._UZ(6,"azt-basic-info-box",12),t.qZA(),t.TgZ(7,"div",13),t.YNc(8,RQ,4,3,"div",14),t.YNc(9,BQ,3,24,"ng-template",null,15,t.W1O),t.qZA(),t._UZ(11,"app-testbank-test-review-show-next-back-button",16),t.qZA()()(),t.TgZ(12,"mat-drawer-content",17)(13,"div",18)(14,"div",19)(15,"div",20),t.YNc(16,zQ,6,3,"button",21),t.YNc(17,JQ,6,3,"button",22),t.TgZ(18,"div",23),t._uU(19),t.qZA(),t.TgZ(20,"div",24),t.GkF(21,25),t._UZ(22,"app-testbank-test-review-export-pdf-menu",26),t.qZA()(),t.YNc(23,HQ,1,10,"app-testbank-show-offline-result",27),t.TgZ(24,"div",28)(25,"mat-tab-group",29),t.NdJ("selectedTabChange",function(a){t.CHM(e);const r=t.oxw();return t.KtG(r.onTabChanged(a))})("selectedIndexChange",function(a){t.CHM(e);const r=t.oxw();return t.KtG(r.curSelectedTab=a)}),t.YNc(26,XQ,10,12,"mat-tab",30),t.YNc(27,nR,7,5,"mat-tab",31),t.qZA()()()()()()}if(2&n){const e=t.MAs(10),i=t.oxw(),a=t.MAs(5);let r,s;t.Q6J("hasBackdrop",i.sAztMatDrawerService.hasBackdrop),t.xp6(1),t.s9C("opened",i.sAztMatDrawerService.isOpenSideNav?"true":"false"),t.Q6J("ngClass",t.WLB(30,iR,i.isMobileDevice,!i.isMobileDevice))("mode",i.sAztMatDrawerService.mode),t.xp6(2),t.Q6J("ngClass",t.VKq(33,oR,i.isMobileDevice)),t.xp6(3),t.Q6J("studentObj",i.studentObj)("showPhone",!0),t.xp6(2),t.Q6J("ngIf",0===(null==i.initDataResult||null==i.initDataResult.data||null==i.initDataResult.data.historyExamResultObjs?null:i.initDataResult.data.historyExamResultObjs.length))("ngIfElse",e),t.xp6(3),t.Q6J("testedUserObjs",i.testedUserObjs)("classroomId",null!==(r=null==i.classroomObj?null:i.classroomObj.id)&&void 0!==r?r:-1)("historyExamResultObjs",null!==(s=null==i.initDataResult||null==i.initDataResult.data?null:i.initDataResult.data.historyExamResultObjs)&&void 0!==s?s:t.DdM(35,i4)),t.xp6(1),t.Q6J("ngClass",t.VKq(36,aR,!i.isMobileDevice&&i.sAztMatDrawerService.isOpenSideNav)),t.xp6(1),t.Q6J("ngClass",t.VKq(38,rR,!i.isMobileDevice&&i.sAztMatDrawerService.isOpenSideNav)),t.xp6(3),t.Q6J("ngIf",!i.sAztMatDrawerService.isOpenSideNav||i.isMobileDevice),t.xp6(1),t.Q6J("ngIf",i.sAztMatDrawerService.isOpenSideNav&&!i.isMobileDevice),t.xp6(1),t.s9C("matTooltip",null==i.examObj?null:i.examObj.name),t.xp6(1),t.hij(" ",null==i.examObj?null:i.examObj.name," "),t.xp6(2),t.Q6J("ngTemplateOutlet",a),t.xp6(1),t.Q6J("examResultIdParam",i.examResultIdParam)("userIdParam",i.userIdParam)("studentIdParam",i.studentIdParam)("examIdParam",i.examIdParam)("examObj",i.examObj)("examResultObj",i.examResultObj)("essayQuestionObjs",i.essayQuestionObjs),t.xp6(1),t.Q6J("ngIf",i.isMobileWebView),t.xp6(2),t.Q6J("selectedIndex",i.curSelectedTab),t.xp6(1),t.Q6J("ngIf",i.trueFalseChoiceQuestionObjs.length>0),t.xp6(1),t.Q6J("ngIf",i.essayQuestionObjs.length>0&&i.examObj&&i.examResultObj)}}function lR(n,o){1&n&&(t.TgZ(0,"button",76)(1,"span",77),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"lang_auto_sai")," "))}function cR(n,o){1&n&&(t.TgZ(0,"button",78)(1,"span",77),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"lang_auto_dung")," "))}function uR(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",60),t.YNc(1,lR,4,3,"button",61),t.YNc(2,cR,4,3,"button",62),t.TgZ(3,"button",63),t.O4$(),t.TgZ(4,"svg",64),t._UZ(5,"polygon",65),t.qZA(),t.kcU(),t.TgZ(6,"span",66),t._uU(7),t.ALo(8,"mytranslate"),t.qZA()()(),t.TgZ(9,"mat-menu",67,68)(11,"div",69)(12,"ul",70)(13,"li")(14,"label",71),t._uU(15),t.ALo(16,"mytranslate"),t.TgZ(17,"div",72)(18,"input",73),t.NdJ("change",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onChangeViewOption("viewRight"))})("click",function(a){return a.stopPropagation()}),t.qZA()()()(),t.TgZ(19,"li")(20,"label",74),t._uU(21),t.ALo(22,"mytranslate"),t.TgZ(23,"div",72)(24,"input",75),t.NdJ("change",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onChangeViewOption("viewWrong"))})("click",function(a){return a.stopPropagation()}),t.qZA()()()()()()()}if(2&n){const e=t.MAs(10),i=t.oxw();t.xp6(1),t.Q6J("ngIf","viewWrong"===i.viewOption),t.xp6(1),t.Q6J("ngIf","viewRight"===i.viewOption),t.xp6(1),t.Q6J("matMenuTriggerFor",e),t.xp6(4),t.hij(" ",t.lcZ(8,8,"lang_testbank_tested_list_sort")," "),t.xp6(8),t.hij(" ",t.lcZ(16,10,"lang_auto_cau_dung")," "),t.xp6(3),t.Q6J("checked","viewRight"==i.viewOption),t.xp6(3),t.hij(" ",t.lcZ(22,12,"lang_auto_cau_sai")," "),t.xp6(3),t.Q6J("checked","viewWrong"==i.viewOption)}}let dR=(()=>{class n extends St.Q{set drawer(e){this.sAztMatDrawerService.resizeDrawerHeight(!0,e)}openDialogWaring(e){this.commonService.getTranslate(e).subscribe(i=>{this.sAztDialogService.open(Sp.C,{data:{isShow:!0,content:i},restoreFocus:!1,width:"500px"})})}onResize(e){this.isMobileDevice=e.target.innerWidth<980,this.sAztMatDrawerService.changeToMobileMode(this.isMobileDevice)}changeStatusNav(){this.isMobileDevice&&(document.body.style.overflow="auto")}onChangeViewOption(e){this.viewOption=this.viewOption==e?"viewAll":e}onTabChanged(e){this.matTabGroupIndex=e.index,this.changeSelectedTab=!0}saveResultEvent(e){e&&this.examResultService.apiExamResultGetLastResultGet(Number(this.examIdParam),this.userIdParam??"",this.studentIdParam??"",this.examResultIdParam??0).subscribe(i=>{1==i.success?(this.examResultObj=i?.data?.examResultObj,this.orgExamObjs=i.data?.orgExamObjs??[],this.initDataResult?.data?.markedByObj&&(this.initDataResult.data.markedByObj.fullName=i.data?.markedByObj?.fullName??"",this.initDataResult.data.markedByObj.avatar=i.data?.markedByObj?.avatar)):this.errorStatusObj(i.message??"",!0)})}processConvertData(e){if(e.data){this.studentObj=this.testReviewService.mapStudentObjWithTestedObj(e.data,this.testedUserObjs,this.studentObj),this.examObj=e?.data?.examObj,this.examResultObj=e?.data?.examResultObj,this.files=this.commonService.myParseJson(this.examResultObj?.files??"")??[],this.resultInfos=this.commonService.willDeleteParseJson(this.examResultObj?.infors??"")??[],this.classroomObj=e?.data?.classroomObj;const i=this.commonService.castJsonToClassObjs(yt.v,JSON.stringify(e.data.questionObjs??[]));this.followerRenderQuest.setNumQuest(i?.length||0),this.questionObjs=i,this.questionObjs?.forEach(s=>{s.correctAnswer=this.commonService.isExistInArray(e?.data?.correctQuestionIds,s.id),s.isRoleTeacher=!0}),this.docxService.replaceCanvasBackgroundTS(this.questionObjs??[]),this.questionObjs=this.testReviewService.addIndexLabelToQuestionObjs(this.questionObjs),this.essayQuestionObjs=this.testReviewService.getEssayQuestionObjs(this.questionObjs),this.trueFalseChoiceQuestionObjs=this.testReviewService.getTrueFalseQuestionObjs(this.questionObjs),0==this.trueFalseChoiceQuestionObjs.length&&(this.curSelectedTab=1),this.userAnswersObj=this.testReviewService.convertAnswersArr(this.castJsonToObj(e.data.examResultObj?.answers??"")??[]),this.getQuestionCanFeedback(),this.hasLoadedData=!0;const a=this.envService.getVersionMarkNote(this.envService.getEnvValue("classliveUrl")??""),r=1e6;if(this.examResultObj?.result){const s=this.castJsonToObj(this.examResultObj?.result??"");this.checkMarkNote=!(!s||!s.urlDataMark)}else this.checkMarkNote=a>r}}getQuestionCanFeedback(){let e=[];Array.isArray(this.questionObjs)&&(this.questionObjs.forEach(i=>{i.id&&!this.commonService.isExistInArray(e,i.id)&&e.push(i.id)}),this.waitDestroy(this.testMarketFeedbackService.apiTestMarketFeedbacksQuestionsGet(this.examObj?.id,e.join(",")).subscribe(i=>{if(1==i.success){if(i.data?.objs?.length){let a=i.data?.objs??[];if(Array.isArray(this.questionObjs))for(let r=0;r<this.questionObjs.length;r++)a.forEach(s=>{this.questionObjs&&this.questionObjs[r].id==s.questionId&&(this.questionObjs[r].enableFeedback=s.allowFeedback)})}this.successStatusObj()}else this.errorStatusObj(i.message??"",!0)})))}getOrgExamObjs(){this.examResultService.apiExamResultGetLastResultGet(Number(this.examIdParam),this.userIdParam??"",this.studentIdParam??"",this.examResultIdParam??0).subscribe(e=>{1==e.success?this.orgExamObjs=e.data?.orgExamObjs??[]:this.errorStatusObj(e.message??"",!0)})}ngDoCheck(){this.questionContentHeight=Number(document.getElementById("draw-left-container")?.offsetHeight)?Number(document.getElementById("draw-left-container")?.offsetHeight)-104+"px":"100vh",this.cd.detectChanges()}ngOnInit(){this.waitDestroy((0,dt.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.backToLink=this.commonService.getMyQueryParam("backto")??"",this.cur_cateId=this.commonService.getMyParam(this.activeRoute,"cat_id")??"0",this.examResultIdParam=Number(this.activeRoute.snapshot.paramMap.get("result_id")),this.userIdParam=this.activeRoute.snapshot.paramMap.get("user_id")??void 0,this.studentIdParam=this.activeRoute.snapshot.paramMap.get("student_id")??void 0,this.examIdParam=this.activeRoute.snapshot.paramMap.get("exam_id")??void 0,this.initDataResult&&this.processConvertData(this.initDataResult)})),this.getOrgExamObjs(),this.answerBoxService.switchEssayTabMessage.subscribe(e=>{e&&(this.curSelectedTab=1,setTimeout(()=>{window.scroll(0,0)},0))}),super.ngOnInit()}constructor(e,i,a,r,s,l,c,d,h,_,x){super(),this.sAztDialogService=e,this.cd=i,this.activeRoute=a,this.docxService=r,this.envService=s,this.testReviewService=l,this.examResultService=c,this.testMarketFeedbackService=d,this.answerBoxService=h,this.exportResultService=_,this.sAztMatDrawerService=x,this.curSelectedTab=0,this.questionContentHeight="100vh",this.backToLink="",this.examResultIdParam=0,this.cur_cateId="0",this.viewOption="viewAll",this.matTabGroupIndex=0,this.userAnswersObj={},this.files=[],this.resultInfos=[],this.essayQuestionObjs=[],this.trueFalseChoiceQuestionObjs=[],this.orgExamObjs=[],this.followerRenderQuest=new u.p,this.hasLoadedData=!1,this.checkMarkNote=!1,this.changeSelectedTab=!1}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Fi.C),t.Y36(t.sBO),t.Y36(O.gz),t.Y36(tx.n),t.Y36(hF.h),t.Y36(pF.t),t.Y36(Ke.kS),t.Y36(yp.nC),t.Y36(_F.z),t.Y36(G0.U),t.Y36(Sd.T))},n.\u0275cmp=t.Xpm({type:n,selectors:[["azt-test-review-for-teacher"]],viewQuery:function(e,i){if(1&e&&t.Gf(FQ,5),2&e){let a;t.iGM(a=t.CRH())&&(i.drawer=a.first)}},inputs:{initDataResult:"initDataResult",testedUserObjs:"testedUserObjs"},features:[t._Bn([Sd.T]),t.qOj],decls:7,vars:5,consts:[[1,"azt-result-list",3,"resize"],["class","p-3 m-3 text-center alert text-slate-500 font-medium",4,"ngIf","ngIfElse"],["hasResult",""],["showCorrectIncorrectFilterTpl",""],[3,"msg","show","percent"],[1,"p-3","m-3","text-center","alert","text-slate-500","font-medium"],[1,"azt-drawer-container","mt-5",2,"height","auto",3,"hasBackdrop"],[3,"ngClass","mode","opened","closedStart"],["drawer",""],["id","draw-left-container",1,"azt-draw-left",2,"overflow-x","hidden",3,"ngClass"],[1,"box",2,"min-height","calc(100vh - 40px)"],[1,"info-user","border-b","border-slate-200/60","dark:border-darkmode-400","p-3"],[1,"relative",3,"studentObj","showPhone"],[1,"p-3","sm:pb-0"],[4,"ngIf","ngIfElse"],["allReadyTested",""],[3,"testedUserObjs","classroomId","historyExamResultObjs"],[3,"ngClass"],[1,"azt-drawer-content","azt-test-review-for-teacher-new","relative",3,"ngClass"],[1,"p-0","slide-main"],[1,"flex","box","sm:h-auto","items-center","rounded-md","border","border-slate-200/60","dark:border-darkmode-400","p-2","text-slate-500","mb-5"],["azt-track-service","test-review-for-teacher-DvCY4Jj0cWz","class","btn btn-sm mr-2",3,"matTooltip","click",4,"ngIf"],["azt-track-service","test-review-for-teacher-olVLKKM8hCQ","class","btn btn-sm mr-2",3,"matTooltip","click",4,"ngIf"],[1,"truncate","font-medium","mx-auto","text-slate-600","dark:text-slate-300",2,"max-width","50%",3,"matTooltip"],[1,"relative","flex"],[3,"ngTemplateOutlet"],[3,"examResultIdParam","userIdParam","studentIdParam","examIdParam","examObj","examResultObj","essayQuestionObjs"],[3,"backToLink","examResultIdParam","userIdParam","studentIdParam","examIdParam","essayExam","examObj","offlineMarkObj","offlineMixQuestionObj","isDeletableExamResultObj",4,"ngIf"],[1,"box","flex-1"],[3,"selectedIndex","selectedTabChange","selectedIndexChange"],[3,"label",4,"ngIf"],["id","tabEssay",3,"label",4,"ngIf"],[1,"flex","justify-center"],[3,"examResultIdParam","userIdParam","studentIdParam","examIdParam","studentObj","examObj","examResultObj","markedByObj","questionObjs","essayQuestionObjs","trueFalseChoiceQuestionObjs","files","historyExamResultObjs","examTracks","resultInfos"],[3,"historyExamResultObjs","backToLink","examResultIdParam","userIdParam","studentIdParam","examIdParam"],[3,"backToLink","examResultIdParam","userIdParam","studentIdParam","examIdParam","essayExam","examObj","offlineMarkObj","offlineMixQuestionObj","isDeletableExamResultObj"],["azt-track-service","test-review-for-teacher-DvCY4Jj0cWz",1,"btn","btn-sm","mr-2",3,"matTooltip","click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-menu","w-4","h-4"],["x","3","y","3","width","18","height","18","rx","2","ry","2"],["d","M9 3v18"],["d","m14 9 3 3-3 3"],["azt-track-service","test-review-for-teacher-olVLKKM8hCQ",1,"btn","btn-sm","mr-2",3,"matTooltip","click"],["d","m16 15-3-3 3-3"],[3,"label"],[1,"azt-student-list","scrollable-content"],["pointerEventsMethod","scrollbar",2,"height","calc(100vh - 166px)","width","100%",3,"visibility","disabled"],[1,"p-3",2,"padding-bottom","80px"],["style","display: block","class","mb-1",3,"imgSrc",4,"ngIf"],["class","p-2 font-bold",4,"ngIf"],["ngFor","",3,"ngForOf"],[1,"mb-1",2,"display","block",3,"imgSrc"],[1,"p-2","font-bold"],["class","relative",3,"follower","examObj","questionObj","curQuestionIndex","userAnswersObj","currentTab","orgExamObjs","ngClass",4,"ngIf"],[1,"relative",3,"follower","examObj","questionObj","curQuestionIndex","userAnswersObj","currentTab","orgExamObjs","ngClass"],["id","tabEssay",3,"label"],["id","markEssay"],[1,"p-3",2,"padding-bottom","20px"],["isFrameMark",""],[3,"curSelectedTab","examObj","showForTeacher","questions","files","userAnswersObj","examResultObj","resultID","orgExamObjs","changeSelectedTab","saveResultEvent"],[3,"showForTeacher","examObj","questions","files","examResultObj","userAnswersObj","resultID","iframeViewMode","hasLoadedData","orgExamObjs","saveResultEvent"],[1,"filter","flex"],["class","btn btn-sm btn-danger mx-2","style","cursor: default; padding: 6px 4px;",4,"ngIf"],["class","btn btn-sm btn-success mx-2","style","cursor: default; padding: 6px 4px;",4,"ngIf"],[1,"btn","btn-sm",3,"matMenuTriggerFor"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-search","w-4","h-4","mr-1"],["points","22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"],[1,"azt-hidden","md:block"],["xPosition","before"],["filterMenu","matMenu"],[1,"dropdown-menu","show","relative","w-64"],[1,"dropdown-content"],["for","viewRight",1,"dropdown-item","cursor-pointer"],[1,"form-check","form-switch","ml-auto"],["azt-track-service","test-review-for-teacher-Pz5-Lg4oM39","id","viewRight","type","checkbox",1,"show-code","form-check-input","ml-2",3,"checked","change","click"],["for","viewWrong",1,"dropdown-item","cursor-pointer"],["azt-track-service","test-review-for-teacher-l9jNq9CQL6R","id","viewWrong","type","checkbox",1,"show-code","form-check-input","ml-2",3,"checked","change","click"],[1,"btn","btn-sm","btn-danger","mx-2",2,"cursor","default","padding","6px 4px"],[1,"azt-hidden","text-white","md:block"],[1,"btn","btn-sm","btn-success","mx-2",2,"cursor","default","padding","6px 4px"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0),t.NdJ("resize",function(r){return i.onResize(r)},!1,t.Jf7),t.YNc(1,QQ,3,3,"div",1),t.YNc(2,sR,28,40,"ng-template",null,2,t.W1O),t.qZA(),t.YNc(4,uR,25,14,"ng-template",null,3,t.W1O),t._UZ(6,"azt-export-docx-loading-box",4)),2&e){const a=t.MAs(3);t.xp6(1),t.Q6J("ngIf",!(null!=i.initDataResult&&null!=i.initDataResult.data&&i.initDataResult.data.examResultObj||null!=i.initDataResult&&null!=i.initDataResult.data&&i.initDataResult.data.historyExamResultObjs))("ngIfElse",a),t.xp6(5),t.Q6J("msg",i.exportResultService.keyLoading)("show",i.exportResultService.isLoading)("percent",i.exportResultService.percent)}},dependencies:[D.mk,D.sg,D.O5,D.tP,Ii.VK,Ii.p6,dl.jA,dl.kh,dl.LW,Zm.uX,Zm.SP,Mi.gM,i5.y,xF,bF.a,$0,vF.Y,L.KC,yF.S,MQ,ZQ,DQ,jQ,qQ.C,jt.JV],styles:[".edit-question-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;border-radius:5px;margin-bottom:-8px}.edit-question-header-right[_ngcontent-%COMP%]{display:flex;align-items:center}.edit-question-header-tag[_ngcontent-%COMP%], .edit-question-header-content[_ngcontent-%COMP%]{margin:10px 10px 18px;padding:5px}.edit-question-header-tag[_ngcontent-%COMP%]:hover, .edit-question-header-content[_ngcontent-%COMP%]:hover{background:rgba(35,97,174,.1803921569);border-radius:5px}.edit-question-header-dr[_ngcontent-%COMP%]{color:#607d8b;margin:0 10px}.edit-question-header-content[_ngcontent-%COMP%]{cursor:pointer}.edit-question-header-point[_ngcontent-%COMP%]{text-align:right}#test_review_container[_ngcontent-%COMP%]{background:#ecf0f5;flex:auto;padding-top:15px}.w-70[_ngcontent-%COMP%]{width:70%}.pos-menu[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%);right:0}.pos-menu-v2[_ngcontent-%COMP%]{position:absolute;top:-2%;right:0}#tester-info[_ngcontent-%COMP%]::-webkit-scrollbar{background-color:#fff;width:16px}#tester-info[_ngcontent-%COMP%]::-webkit-scrollbar-track{background-color:#fff}#tester-info[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#babac0;border-radius:16px;border:4px solid #fff}#tester-info[_ngcontent-%COMP%]::-webkit-scrollbar-button{display:none}#tester-info[_ngcontent-%COMP%]{width:300px;padding:15px;background-color:#fff;margin:0 auto;position:sticky;top:10px;max-height:calc(100vh - 10px);overflow-x:hidden;display:flex;flex-direction:column;max-width:100%;border-radius:3px;border:1px solid #f1f1f1}#short_cut_mobile[_ngcontent-%COMP%]{display:none}#fullPoint[_ngcontent-%COMP%]{border:1px solid #f1f1f1;background-color:#fafafa;padding:10px;margin-top:15px}#fullPoint[_ngcontent-%COMP%]   .point[_ngcontent-%COMP%]{font-weight:500;font-size:130%}.list-time[_ngcontent-%COMP%]{list-style:none;background-color:#fff;margin:0 10px;padding:10px}.list-time[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:10px}.list-time[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{margin-bottom:0}.list-time[_ngcontent-%COMP%]   li.select[_ngcontent-%COMP%]{font-weight:500}.btn-times[_ngcontent-%COMP%]{display:block;transition:all .5s;background:#fafafa;width:100%}.tested-times[_ngcontent-%COMP%]{margin-top:15px}.tested-times[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{border:1px solid #f1f1f1;background-color:#fafafa;padding:10px}.tested-times[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;border:1px solid #f1f1f1;border-top:none;margin-bottom:0;background-color:#fff;padding:10px}.tested-times[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:10px}.tested-times[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{margin-bottom:0}.tested-times[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.select[_ngcontent-%COMP%]{font-weight:500}.tested-times[_ngcontent-%COMP%]:last-child{flex:auto;overflow:auto}.fading_layer[_ngcontent-%COMP%]{position:absolute;z-index:9;background-color:#ffffffe3;width:100%;height:100%;top:0;left:0;padding-top:200px;text-align:center;color:#a9a9a9;font-size:16px}#filterWrap[_ngcontent-%COMP%]{position:absolute;right:0;top:0}.button-show-error[_ngcontent-%COMP%]:hover, .button-show-success[_ngcontent-%COMP%]:hover{background-color:#d8d8d8;color:#00f}.button-show-all[_ngcontent-%COMP%]:hover{color:#00f}.viewWrong[_ngcontent-%COMP%]   .correct[_ngcontent-%COMP%], .viewRight[_ngcontent-%COMP%]   .incorrect[_ngcontent-%COMP%]{display:none}.menu-button-filter[_ngcontent-%COMP%]{font-size:12px;font-weight:400!important;border:1px solid rgba(234,234,234,.8901960784);border-radius:3px;text-transform:none;padding-right:6px;padding-bottom:3px;color:#414141;line-height:20px;background:whitesmoke}#mbTestContent[_ngcontent-%COMP%]{position:relative}#mbTestContent[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{display:none;position:absolute;top:12px;color:#646464;z-index:100}#test_review_container.toggleNavInfo[_ngcontent-%COMP%]   #col_std_info[_ngcontent-%COMP%]{left:0}#close_button[_ngcontent-%COMP%]{color:red;position:absolute;right:5px;top:5px}@media screen and (max-width: 320px){#tester-info[_ngcontent-%COMP%]{width:100%}}@media screen and (max-width: 480px){#mbTestContent[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{display:inline-block}#boxQAButtons[_ngcontent-%COMP%]{position:fixed;right:20px;z-index:99999999999999;bottom:10px;background-color:#fff;border:1px solid #a3a3a3;padding:5px;border-radius:4px}#test_review_container[_ngcontent-%COMP%]{padding-top:0}#col_std_info[_ngcontent-%COMP%]{position:fixed;top:0;left:-100%;z-index:99999;background:rgba(0,0,0,.6117647059);bottom:0;padding:0;transition:all .5s}#short_cut_mobile[_ngcontent-%COMP%]{display:flex;font-weight:500;font-size:18px;justify-content:space-between;color:#4a4a4a}#header-app-component[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:last-child{padding-left:0!important}#tester-info[_ngcontent-%COMP%]{margin:0;position:relative;height:100%;max-height:unset;top:0}}.btn-copy[_ngcontent-%COMP%]{font-size:14px;transition:all .5s;border:none;background:transparent;text-transform:inherit;padding-left:0;color:#00b2c3}.btn-copy[_ngcontent-%COMP%]:hover{color:#047781}@media screen and (max-width: 768px){#tester-info[_ngcontent-%COMP%]{height:auto}#col_examContent_wrap[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{right:13px}#col_examContent_wrap[_ngcontent-%COMP%] > mat-icon.prev_icon[_ngcontent-%COMP%]{left:13px}}@media screen and (max-width: 1600px){#col_examContent_wrap[_ngcontent-%COMP%]{width:100%}}.icon-click-show-button[_ngcontent-%COMP%]{position:absolute;top:0;right:0;background:lightgrey;font-size:25px;text-align:center;height:auto;width:30px;padding:3px 0;border-radius:3px}"]}),n})();function mR(n,o){1&n&&t._UZ(0,"azt-loading-effect")}function hR(n,o){if(1&n&&t._UZ(0,"azt-test-review-for-teacher",3),2&n){const e=t.oxw();t.Q6J("initDataResult",e.initDataLastResultExam)("testedUserObjs",e.testedUserObjs)}}let pR=(()=>{class n extends St.Q{openResultHistoryReview(e){this.examResultHistoryDialog=e}closeResultHistoryReview(e){e&&location.reload(),this.examResultHistoryDialog=void 0}onShowFile(e){this.isShowPreviewFile=!0,this.previewFile=e}onFileClose(){this.isShowPreviewFile=!1,this.previewFile=void 0}getAndProcessData(){this.initStatusObj();let e=Number(this.activeRoute.snapshot.paramMap.get("exam_id")),i=this.activeRoute.snapshot.paramMap.get("user_id")??"",a=this.activeRoute.snapshot.paramMap.get("student_id")??"",r=Number(this.activeRoute.snapshot.paramMap.get("result_id"));this.examResultService.apiExamResultGetLastResultGet(e,i,a,r??0).subscribe(s=>{1==s.success?(this.initDataLastResultExam=s,this.headerTitle=s?.data?.examObj?.name??"",this.translateMetaTitle(s.data?.examObj?.name),this.successStatusObj()):this.errorStatusObj(s.message??"",!0)})}translateMetaTitle(e){this.commonService.getTranslate("lang_auto_cham_de_thi").subscribe(i=>{this.commonService.translateMetaData({title:i+" "+e,description:i+e,image:"lang_cms_test_image"})})}ngOnInit(){let e=Number(this.activeRoute.snapshot.paramMap.get("exam_id")),i=this.commonService.getMyQueryParam("backto");this.backToLink=i||"/admin/testbank/exam-results-list/"+(this.initDataLastResultExam?.data?.examObj?.categoryId?this.initDataLastResultExam?.data?.examObj?.categoryId:0)+"/"+e+"/0",this.getAndProcessData(),super.ngOnInit()}constructor(e,i){super(),this.activeRoute=e,this.examResultService=i,this.headerTitle="",this.examResultHistoryDialog=void 0,this.isShowPreviewFile=!1,this.backToLink=""}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(O.gz),t.Y36(Ke.kS))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-test-review"]],features:[t.qOj],decls:4,vars:3,consts:[[3,"headerBackToLink"],[4,"ngIf","ngIfElse"],["doneLoading",""],[3,"initDataResult","testedUserObjs"]],template:function(e,i){if(1&e&&(t.TgZ(0,"teacher-layout",0),t.YNc(1,mR,1,0,"azt-loading-effect",1),t.YNc(2,hR,1,2,"ng-template",null,2,t.W1O),t.qZA()),2&e){const a=t.MAs(3);t.Q6J("headerBackToLink",i.backToLink),t.xp6(1),t.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a)}},dependencies:[D.O5,si.l,dR,fo._],encapsulation:2}),n})(),_R=(()=>{class n extends lo.e{constructor(e,i,a){super(a,i),this.trashService=e,this.dialogRef=i,this.data=a}onConfirmClick(e){this.dialogRef.close(e)}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Cd.d),t.Y36($.so),t.Y36($.WI))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-remove-dialog"]],features:[t.qOj],decls:22,vars:10,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5"],[1,"flex","items-center","text-md","font-medium"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-help-circle"],["cx","12","cy","12","r","10"],["d","M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"],["d","M12 17h.01"],[1,"ml-1"],[1,"mt-2"],[1,"text-xs","text-slate-500","dark:text-slate-400"],[1,"p-3","text-right"],[1,"text-right","mt-3"],["azt-track-service","remove-dialog-Vubm0SlK4B",1,"btn","w-24","btn-secondary","mr-3",3,"click"],["azt-track-service","remove-dialog-ZL8r-ixWHP",1,"btn","w-24","btn-primary",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),t.O4$(),t.TgZ(4,"svg",4),t._UZ(5,"circle",5)(6,"path",6)(7,"path",7),t.qZA(),t.kcU(),t.TgZ(8,"span",8),t._uU(9),t.ALo(10,"mytranslate"),t.qZA()(),t.TgZ(11,"div",9)(12,"p",10),t._uU(13),t.qZA()()()(),t.TgZ(14,"div",11)(15,"div",12)(16,"button",13),t.NdJ("click",function(){return i.onConfirmClick(!1)}),t._uU(17),t.ALo(18,"mytranslate"),t.qZA(),t.TgZ(19,"button",14),t.NdJ("click",function(){return i.onConfirmClick(!0)}),t._uU(20),t.ALo(21,"mytranslate"),t.qZA()()()()),2&e&&(t.xp6(9),t.Oqu(t.lcZ(10,4,"lang_cms_common_confirm_cancel")),t.xp6(4),t.hij(" ",i.data.content," "),t.xp6(4),t.hij(" ",t.lcZ(18,6,"lang_auto_huy")," "),t.xp6(3),t.hij(" ",t.lcZ(21,8,"lang_auto_xac_nhan")," "))},dependencies:[jt.JV],encapsulation:2}),n})(),a5=(()=>{class n extends lo.e{ngOnInit(){this.expandInfoParse=this.data,super.ngOnInit()}saveConfig(){this.form.getRawValue().labelQuestion&&this.form.getRawValue().labelQuestion.length>0?this.dialogRef.close({label:this.form.getRawValue().labelQuestion}):this.dialogRef.close({label:void 0})}constructor(e,i){super(i,e),this.dialogRef=e,this.data=i,this.expandInfoParse=i,this.form=new f.cw({labelQuestion:new f.NI(this.expandInfoParse.label??"C\xe2u",{nonNullable:!0})})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36($.so,8),t.Y36($.WI,8))},n.\u0275cmp=t.Xpm({type:n,selectors:[["azt-expand-info"]],features:[t.qOj],decls:30,vars:13,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5"],[1,"intro"],[1,"text-base","font-medium","mr-auto"],[1,"form-horizontal",3,"formGroup"],[1,"row","mt-3"],[1,"col-md-12"],[1,"col-md-12","mt-2"],["formControlName","labelQuestion",1,"bg-gray-50","border","border-gray-300","text-gray-900","text-sm","rounded-lg","focus:ring-blue-500","focus:border-blue-500","block","w-full","p-2.5","dark:bg-gray-700","dark:border-gray-600","dark:placeholder-gray-400","dark:text-white","dark:focus:ring-blue-500","dark:focus:border-blue-500"],["value","C\xe2u"],["value","Question"],["value","B\xe0i"],[1,"p-3","text-right"],[1,"text-right","mt-3"],["azt-track-service","remove-dialog-Vubm0SlK4B",1,"btn","w-24","btn-secondary","mr-3",3,"click"],["azt-track-service","remove-dialog-ZL8r-ixWHP",1,"btn","w-24","btn-primary",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()(),t.TgZ(7,"div",3)(8,"form",5)(9,"div",6)(10,"div",7)(11,"p"),t._uU(12),t.ALo(13,"mytranslate"),t.qZA()(),t.TgZ(14,"div",8)(15,"select",9)(16,"option",10),t._uU(17,"C\xe2u"),t.qZA(),t.TgZ(18,"option",11),t._uU(19,"Question"),t.qZA(),t.TgZ(20,"option",12),t._uU(21,"B\xe0i"),t.qZA()()()()()()()(),t.TgZ(22,"div",13)(23,"div",14)(24,"button",15),t.NdJ("click",function(){return i.dialogRef.close()}),t._uU(25),t.ALo(26,"mytranslate"),t.qZA(),t.TgZ(27,"button",16),t.NdJ("click",function(){return i.saveConfig()}),t._uU(28),t.ALo(29,"mytranslate"),t.qZA()()()()),2&e&&(t.xp6(5),t.Oqu(t.lcZ(6,5,"lang_core_exam_config_question_label")),t.xp6(3),t.Q6J("formGroup",i.form),t.xp6(4),t.Oqu(t.lcZ(13,7,"lang_core_exam_config_question_label_description")),t.xp6(13),t.hij(" ",t.lcZ(26,9,"lang_auto_dong")," "),t.xp6(3),t.hij(" ",t.lcZ(29,11,"lang_auto_luu")," "))},dependencies:[f._Y,f.YN,f.Kr,f.EJ,f.JJ,f.JL,f.sg,f.u,oo.M,jt.JV],styles:[".label-info_bg[_ngcontent-%COMP%]{z-index:1000;width:100%;display:flex;left:0;top:0;position:fixed;height:100%;min-height:100vh;background-color:#3c3c3c80}.label-info[_ngcontent-%COMP%]{max-width:400px;border-radius:.375rem;z-index:1001;top:50%;left:50%;transform:translate(-50%,-50%);position:fixed;background:#fff;margin-left:auto;margin-right:auto;box-shadow:0 0 13px 3px #00000094}.block-title[_ngcontent-%COMP%]{text-align:center;font-weight:600}.block-body[_ngcontent-%COMP%]{text-align:left}.btn-close[_ngcontent-%COMP%]{transition:all .5s}.btn-close[_ngcontent-%COMP%]:hover{background:#dfe6e9}.input-point[_ngcontent-%COMP%]{margin-left:10px;max-width:100px;border:1px solid #000;border-radius:3px;text-align:center;color:#000;padding:0!important}.btn-config[_ngcontent-%COMP%]{transition:all .5s}.btn-config[_ngcontent-%COMP%]:hover{background:#133864}@media only screen and (max-width: 1024px){.label-info[_ngcontent-%COMP%]{width:95%;max-width:800px}}@media only screen and (max-width: 768px){.label-info[_ngcontent-%COMP%]{width:95%;max-width:700px}}@media only screen and (max-width: 576px){.label-info[_ngcontent-%COMP%]{width:95%;max-width:400px}}@media only screen and (max-width: 380px){.label-info[_ngcontent-%COMP%]{width:95%;max-width:300px}}@media only screen and (max-width: 290px){.label-info[_ngcontent-%COMP%]{width:95%;max-width:250px}}"]}),n})();function fR(n,o){if(1&n&&(t.TgZ(0,"div",17)(1,"audio",18),t._UZ(2,"source",19),t.ALo(3,"safe"),t.ALo(4,"mycdn"),t.qZA()()),2&n){const e=t.oxw();t.xp6(1),t.s9C("id","audio_"+e.data.questionObj.id),t.xp6(1),t.Q6J("src",t.lcZ(3,2,t.lcZ(4,4,e.data.questionObj.attachments[0].url)),t.LSH)}}function gR(n,o){if(1&n&&(t.TgZ(0,"div",22)(1,"b",23),t._uU(2),t.qZA(),t.TgZ(3,"div",24),t._UZ(4,"azt-dynamic-hook",10),t.qZA()()),2&n){const e=o.$implicit;let i;t.xp6(2),t.hij("",null!==(i=e.alpha)&&void 0!==i?i:e.key,"."),t.xp6(2),t.Q6J("content",e.content)}}function xR(n,o){if(1&n&&(t.TgZ(0,"div",20),t.YNc(1,gR,5,2,"div",21),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.data.questionObj.answers)}}function bR(n,o){if(1&n&&(t.TgZ(0,"h2",25),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.AsE(" ",t.lcZ(2,2,"lang_auto_dap_an"),": ",e.data.questionObj.answerResult.join(", ")," ")}}function vR(n,o){1&n&&(t.TgZ(0,"span",26),t._UZ(1,"azt-loading-ui"),t.qZA())}let r5=(()=>{class n extends lo.e{confirmDelete(){this.onDelete=!0,this.waitDestroy(this.examService.apiExamDeleteExamQuestionExamIdQuestionIdDelete(this.data.examId,this.data.questionObj.id).subscribe(e=>{1==e.success?(this.successStatusObj("lang_cms_delete_success",!0),this.onDelete=!1,this.dialogRef.close(!0)):(this.errorStatusObj(e.message??"",!0),this.onDelete=!1,this.dialogRef.close(!1))}))}btnCloseDialog(){this.dialogRef.close(!1)}get customQuestionLabel(){const e=this.commonService.castJsonToObj(this.data.examObj?.expandInfo??"")??void 0;return e?.label?e.label:"C\xe2u"}ngOnInit(){super.ngOnInit()}constructor(e,i,a){super(a,i),this.examService=e,this.dialogRef=i,this.data=a,this.onDelete=!1}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Ke.Oe),t.Y36($.so,8),t.Y36($.WI,8))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-remove-question-dialog"]],features:[t.qOj],decls:29,vars:26,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-3","border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"intro-y","overflow-auto",2,"max-height","calc(100vh - 150px)"],[1,"text-md","mr-auto","font-bold"],[1,"border-t","border-slate-200/60","dark:border-darkmode-400","py-2","mt-2"],[1,"font-medium","text-md","text-center","mb-2"],["class","text-center ml-auto mr-auto mt-2",4,"ngIf"],[1,"question-standalone-label","mt-2"],[1,"tex2jax_process","box-content",2,"width","auto"],[3,"content"],["class","grid grid-cols-12 gap-2 answers mt-3",4,"ngIf"],["class","font-medium text-md text-left text-success my-2 mt-3",4,"ngIf"],[1,"p-3","flex","justify-end"],[1,"btn","w-24","btn-secondary","mr-3",3,"click"],[1,"btn","btn-primary","mw-24",3,"disabled","click"],["class","w-3 mr-2",4,"ngIf"],[1,"text-center","ml-auto","mr-auto","mt-2"],["controls","","preload","true",2,"margin-left","10px","margin-right","10px","max-width","70%",3,"id"],[3,"src"],[1,"grid","grid-cols-12","gap-2","answers","mt-3"],["class","answer col-span-12",4,"ngFor","ngForOf"],[1,"answer","col-span-12"],[1,"answer-label"],[1,"answer-content"],[1,"font-medium","text-md","text-left","text-success","my-2","mt-3"],[1,"w-3","mr-2"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),t._uU(5),t.ALo(6,"mytranslate"),t.qZA(),t.TgZ(7,"div",5)(8,"h2",6),t._uU(9),t.ALo(10,"mytranslate"),t.qZA(),t.YNc(11,fR,5,6,"div",7),t.TgZ(12,"div",8),t._uU(13),t.ALo(14,"isOfflineExam"),t.ALo(15,"mytranslate"),t.qZA(),t.TgZ(16,"div",9),t._UZ(17,"azt-dynamic-hook",10),t.qZA(),t.YNc(18,xR,2,1,"div",11),t.YNc(19,bR,3,4,"h2",12),t.ALo(20,"isEssayAnswer"),t.qZA()()()(),t.TgZ(21,"div",13)(22,"button",14),t.NdJ("click",function(){return i.btnCloseDialog()}),t._uU(23),t.ALo(24,"mytranslate"),t.qZA(),t.TgZ(25,"button",15),t.NdJ("click",function(){return i.confirmDelete()}),t.YNc(26,vR,2,0,"span",16),t._uU(27),t.ALo(28,"mytranslate"),t.qZA()()()),2&e){let a,r;t.xp6(5),t.hij(" ",t.lcZ(6,12,"lang_remove_question_from_exam")," "),t.xp6(4),t.hij(" ",t.lcZ(10,14,"lang_auto_noi_dung_cau_hoi")," "),t.xp6(2),t.Q6J("ngIf",i.data.questionObj.attachments&&i.data.questionObj.attachments.length>0),t.xp6(2),t.AsE(" ",i.customQuestionLabel+" "+(i.data.index+(null!==(a=null==i.data.examObj?null:i.data.examObj.startQuestionIndex)&&void 0!==a?a:1))," ",t.lcZ(14,16,i.data.examObj)?" ("+t.lcZ(15,18,"lang_auto_hoi_de_thi_offline")+") ":null," "),t.xp6(4),t.Q6J("content",null!==(r=i.data.questionObj.content)&&void 0!==r?r:""),t.xp6(1),t.Q6J("ngIf",1==i.data.questionObj.answerType&&i.data.questionObj.answers&&i.data.questionObj.answers.length>0),t.xp6(1),t.Q6J("ngIf",i.data.questionObj.answerResult&&i.data.questionObj.isRoleTeacher&&!t.lcZ(20,20,i.data.questionObj)),t.xp6(4),t.hij(" ",t.lcZ(24,22,"lang_auto_dong")," "),t.xp6(2),t.Q6J("disabled",i.onDelete),t.xp6(1),t.Q6J("ngIf",i.onDelete),t.xp6(1),t.hij(" ",t.lcZ(28,24,"lang_auto_xoa")," ")}},dependencies:[D.sg,D.O5,oi.n,Op.O,jt.JV,jt.QN,jt.CR,jt.CL,jt.eH],styles:[".answer-content[_ngcontent-%COMP%]{display:flex!important;flex-wrap:wrap}.answer-box[_ngcontent-%COMP%]{border-radius:0 0 3px 3px;padding:8px 20px;justify-content:space-between;align-items:center}.answer[_ngcontent-%COMP%]{display:flex;align-items:center}.group-content-of-question-standalone[_ngcontent-%COMP%]{margin-bottom:10px;font-weight:700}.question-standalone-label[_ngcontent-%COMP%]{font-weight:700}.answer-label[_ngcontent-%COMP%]{min-width:20px;min-height:30px;display:flex;align-items:center;justify-content:flex-start;border-radius:50%;border-width:2px;border-style:solid;border-color:transparent}"]}),n})();var s5=M(98603),l5=M(36621),c5=M(94603),o4=M(99413),u5=M(25229),d5=M(42242),yR=M(52319),m5=M(4803),h5=M(15422),p5=M(63529),wR=M(35524);function CR(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",9),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(),r=a.$implicit,s=a.index,l=t.oxw(2);let c;return t.KtG(l.setAnswerOnUpdate(l.questionObj.id,r,2,!1,null!==(c=l.questionObj.scorePerQuestion)&&void 0!==c?c:0,s))}),t._uU(1),t.qZA()}if(2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.key," ")}}function TR(n,o){if(1&n&&(t.TgZ(0,"button",10),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.key," ")}}function kR(n,o){if(1&n&&(t.ynx(0),t.YNc(1,CR,2,1,"button",7),t.YNc(2,TR,2,1,"button",8),t.BQk()),2&n){const e=o.$implicit;t.xp6(1),t.Q6J("ngIf",!e.isTrue),t.xp6(1),t.Q6J("ngIf",e.isTrue)}}function AR(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"a",11),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.showExplainBox())}),t._uU(1),t.ALo(2,"mytranslate"),t.ALo(3,"mytranslate"),t.qZA()}if(2&n){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.isShowExplain?t.lcZ(2,1,"lang_auto_an_giai_thich"):t.lcZ(3,3,"lang_auto_xem_giai_thich")," ")}}const _5=function(n){return{"mb-0":n}};function SR(n,o){if(1&n&&(t.TgZ(0,"div",2)(1,"div",3),t.YNc(2,kR,3,2,"ng-container",4),t.qZA(),t.TgZ(3,"div",5),t.YNc(4,AR,4,5,"a",6),t.qZA()()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngClass",t.VKq(3,_5,e.isMobileDevice)),t.xp6(1),t.Q6J("ngForOf",e.questionObj.answers),t.xp6(2),t.Q6J("ngIf",e.questionObj.help)}}function OR(n,o){1&n&&(t.TgZ(0,"div",16)(1,"button",17),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"button",18),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()()),2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,2,"lang_auto_dung")," "),t.xp6(3),t.hij(" ",t.lcZ(6,4,"lang_auto_sai")," "))}function ER(n,o){1&n&&(t.TgZ(0,"div",19)(1,"button",18),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"button",17),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()()),2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,2,"lang_auto_dung")," "),t.xp6(3),t.hij(" ",t.lcZ(6,4,"lang_auto_sai")," "))}function MR(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"div",12)(2,"span",13),t._uU(3),t.qZA(),t.YNc(4,OR,7,6,"div",14),t.YNc(5,ER,7,6,"div",15),t.qZA(),t.BQk()),2&n){const e=o.$implicit;t.xp6(3),t.hij(" ",e.key,". "),t.xp6(1),t.Q6J("ngIf",e.isTrue),t.xp6(1),t.Q6J("ngIf",!e.isTrue)}}function IR(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"a",11),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.showExplainBox())}),t._uU(1),t.ALo(2,"mytranslate"),t.ALo(3,"mytranslate"),t.qZA()}if(2&n){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.isShowExplain?t.lcZ(2,1,"lang_auto_an_giai_thich"):t.lcZ(3,3,"lang_auto_xem_giai_thich")," ")}}function LR(n,o){if(1&n&&(t.TgZ(0,"div",2)(1,"div",3),t.YNc(2,MR,6,3,"ng-container",4),t.qZA(),t.TgZ(3,"div",5),t.YNc(4,IR,4,5,"a",6),t.qZA()()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngClass",t.VKq(3,_5,e.isMobileDevice)),t.xp6(1),t.Q6J("ngForOf",e.questionObj.answers),t.xp6(2),t.Q6J("ngIf",e.questionObj.help)}}function PR(n,o){1&n&&(t.TgZ(0,"mat-icon",30),t._uU(1,"cancel"),t.qZA())}function NR(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"mat-chip-row",28),t.NdJ("removed",function(){const r=t.CHM(e).$implicit,s=t.oxw(2);return t.KtG(s.removeAnswerType4(s.questionObj.id,r))}),t._uU(1),t.YNc(2,PR,2,0,"mat-icon",29),t.qZA()}if(2&n){const e=o.$implicit,i=t.oxw(2);t.Q6J("removable",i.removable),t.xp6(1),t.hij(" ",e," "),t.xp6(1),t.Q6J("ngIf",i.removable)}}function ZR(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",5)(1,"a",11),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.showExplainBox())}),t._uU(2),t.ALo(3,"mytranslate"),t.ALo(4,"mytranslate"),t.qZA()()}if(2&n){const e=t.oxw(2);t.xp6(2),t.hij(" ",e.isShowExplain?t.lcZ(3,1,"lang_auto_an_giai_thich"):t.lcZ(4,3,"lang_auto_xem_giai_thich")," ")}}const DR=function(n){return{width:n}},jR=function(n){return{"on-change":n}};function qR(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",20)(1,"div",21)(2,"mat-form-field",22)(3,"span",23),t._uU(4),t.ALo(5,"mytranslate"),t.ALo(6,"mytranslate"),t.qZA(),t.TgZ(7,"mat-chip-grid",null,24),t.ALo(9,"mytranslate"),t.YNc(10,NR,3,3,"mat-chip-row",25),t.TgZ(11,"input",26),t.NdJ("matChipInputTokenEnd",function(a){t.CHM(e);const r=t.oxw();return t.KtG(r.setAnswerType4(r.questionObj.id,a))}),t.ALo(12,"mytranslate"),t.qZA()()()(),t.YNc(13,ZR,5,5,"div",27),t.qZA()}if(2&n){const e=t.MAs(8),i=t.oxw();t.xp6(1),t.Akn(t.VKq(19,DR,i.questionObj.help?"80%":"100%")),t.xp6(1),t.Q6J("ngClass",t.VKq(21,jR,i.questionObj.onChanges)),t.xp6(2),t.hij(" ",i.questionObj.onChanges?t.lcZ(5,11,"lang_testbank_update_exam_changed_answer"):t.lcZ(6,13,"lang_testbank_update_exam_list_recognize_answer")," "),t.xp6(3),t.uIk("aria-label",t.lcZ(9,15,"lang_testbank_update_exam_recognize_answer")),t.xp6(3),t.Q6J("ngForOf",i.questionObj.answerResult),t.xp6(1),t.s9C("placeholder",t.lcZ(12,17,"lang_testbank_update_exam_add_answer")),t.Q6J("matChipInputFor",e)("matChipInputSeparatorKeyCodes",i.separatorKeysCodes)("matChipInputAddOnBlur",i.addOnBlur),t.xp6(2),t.Q6J("ngIf",i.questionObj.help)}}const FR=function(){return{width:"80%"}};function QR(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",20),t._UZ(1,"div",21),t.TgZ(2,"div",5)(3,"a",11),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.showExplainBox())}),t._uU(4),t.ALo(5,"mytranslate"),t.ALo(6,"mytranslate"),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(1),t.Akn(t.DdM(7,FR)),t.xp6(3),t.hij(" ",e.isShowExplain?t.lcZ(5,3,"lang_auto_an_giai_thich"):t.lcZ(6,5,"lang_auto_xem_giai_thich")," ")}}let RR=(()=>{class n extends St.Q{constructor(){super(...arguments),this.isShowExplain=!1,this.setAnswerOnUpdateEmit=new t.vpe,this.setAnswerType4UpdateEmit=new t.vpe,this.removeAnswerType4Emit=new t.vpe,this.isShowExplainChange=new t.vpe,this.removable=!0,this.addOnBlur=!0,this.separatorKeysCodes=[up.K5]}showExplainBox(){this.isShowExplainChange.emit(!this.isShowExplain)}setAnswerOnUpdate(e,i,a,r,s,l){this.setAnswerOnUpdateEmit.emit({idQuestion:e,event:i,type:a,isImage:r,score:s,index:l??0})}removeAnswerType4(e,i){this.removeAnswerType4Emit.emit({questionId:e,answerObj:i})}setAnswerType4(e,i){this.setAnswerType4UpdateEmit.emit({questionId:e,event:i})}}return n.\u0275fac=function(){let o;return function(i){return(o||(o=t.n5z(n)))(i||n)}}(),n.\u0275cmp=t.Xpm({type:n,selectors:[["azt-question-answer-edit-box"]],inputs:{isShowExplain:"isShowExplain",questionObj:"questionObj"},outputs:{setAnswerOnUpdateEmit:"setAnswerOnUpdateEmit",setAnswerType4UpdateEmit:"setAnswerType4UpdateEmit",removeAnswerType4Emit:"removeAnswerType4Emit",isShowExplainChange:"isShowExplainChange"},features:[t.qOj],decls:8,vars:12,consts:[["class","box pt-3 pb-3 pl-4 pr-4 flex items-center border-t border-slate-200 dark:border-darkmode-400","style","margin-top: -5px; border-top-left-radius: 0; border-top-right-radius: 0; box-shadow: none",4,"ngIf"],["class","box p-3 border-t flex border-slate-200 dark:border-darkmode-400","style","margin-top: -5px; border-top-left-radius: 0; border-top-right-radius: 0; box-shadow: none",4,"ngIf"],[1,"box","pt-3","pb-3","pl-4","pr-4","flex","items-center","border-t","border-slate-200","dark:border-darkmode-400",2,"margin-top","-5px","border-top-left-radius","0","border-top-right-radius","0","box-shadow","none"],[1,"list-answer","mt-auto","mb-auto",3,"ngClass"],[4,"ngFor","ngForOf"],[1,"ml-auto"],["azt-track-service","azt-standalone-question-4zQT3eCoTDc","class","btn btn-transparent","style","user-select: none",3,"click",4,"ngIf"],["azt-track-service","azt-standalone-question-FISnl1ZDo9-","class","btn rounded-full mr-2","style","width: 35px; height: 35px; line-height: 35px",3,"click",4,"ngIf"],["class","btn btn-pending rounded-full mr-2","style","width: 35px; height: 35px; line-height: 35px",4,"ngIf"],["azt-track-service","azt-standalone-question-FISnl1ZDo9-",1,"btn","rounded-full","mr-2",2,"width","35px","height","35px","line-height","35px",3,"click"],[1,"btn","btn-pending","rounded-full","mr-2",2,"width","35px","height","35px","line-height","35px"],["azt-track-service","azt-standalone-question-4zQT3eCoTDc",1,"btn","btn-transparent",2,"user-select","none",3,"click"],[1,"flex","items-center","mt-2"],[1,"mr-2"],["class","flex mr-2",4,"ngIf"],["class","flex",4,"ngIf"],[1,"flex","mr-2"],[1,"btn","btn-pending","rounded-full","mr-2",2,"width","40px","height","40px","line-height","35px","cursor","default"],[1,"btn","rounded-full","mr-2",2,"width","40px","height","40px","line-height","35px","cursor","default"],[1,"flex"],[1,"box","p-3","border-t","flex","border-slate-200","dark:border-darkmode-400",2,"margin-top","-5px","border-top-left-radius","0","border-top-right-radius","0","box-shadow","none"],[1,"list-answer","mt-auto","mb-auto","align-self-center"],["appearance","outline",1,"example-chip-list","w-100","bg-white",2,"border-radius","5px","color","#000",3,"ngClass"],[2,"font-size","14px","font-weight","450"],["chipList",""],[3,"removable","removed",4,"ngFor","ngForOf"],[3,"placeholder","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur","matChipInputTokenEnd"],["class","ml-auto",4,"ngIf"],[3,"removable","removed"],["matChipRemove","",4,"ngIf"],["matChipRemove",""]],template:function(e,i){1&e&&(t.YNc(0,SR,5,5,"div",0),t.ALo(1,"isOneChoiceAnswer"),t.YNc(2,LR,5,5,"div",0),t.ALo(3,"isTrueFalseAnswer"),t.YNc(4,qR,14,23,"div",1),t.ALo(5,"isFillAnswer"),t.YNc(6,QR,7,8,"div",1),t.ALo(7,"isEssayAnswer")),2&e&&(t.Q6J("ngIf",t.lcZ(1,4,i.questionObj)),t.xp6(2),t.Q6J("ngIf",t.lcZ(3,6,i.questionObj)),t.xp6(2),t.Q6J("ngIf",t.lcZ(5,8,i.questionObj)),t.xp6(2),t.Q6J("ngIf",i.questionObj.help&&t.lcZ(7,10,i.questionObj)))},dependencies:[D.mk,D.sg,D.O5,yr.RA,yr.oH,yr.qH,yr.z3,Jo.Hw,rs.KE,jt.JV,jt.Uy,jt.eH,jt.ck,jt.rp],styles:['.pr-7[_ngcontent-%COMP%]{padding-right:28px}.w-38px[_ngcontent-%COMP%]{width:38px}.remove-grid[_ngcontent-%COMP%]{display:block!important}.question-standalone-loader-box[_ngcontent-%COMP%]{min-height:50px}  .skeleton-box-loading{width:100%;height:30px;max-width:100%;margin-bottom:5px;display:inline-block}  .skeleton-box-loading:after{position:absolute;inset:0;transform:translate(-100%);animation:_ngcontent-%COMP%_shimmer 2s infinite;content:""}.question-standalone-box[_ngcontent-%COMP%]{margin-bottom:30px;display:block;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 rgba(0, 0, 0, 0)),var(--tw-ring-shadow, 0 0 rgba(0, 0, 0, 0)),var(--tw-shadow);border-radius:.375rem}.question-standalone-container[_ngcontent-%COMP%]{padding:15px}.question-standalone-for-test-finder[_ngcontent-%COMP%]{border:none;margin-bottom:0;padding:0}.question-standalone-for-test-finder[_ngcontent-%COMP%]   .question-standalone-main-content[_ngcontent-%COMP%]{padding:15px;border:1px solid rgb(228,228,228)}.group-of-question-standalone-for-test-finder[_ngcontent-%COMP%]{padding:15px!important;border:1px solid rgb(228,228,228)!important}.question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid #2262AE!important;outline:3px solid rgba(125,160,201,.65)!important}.group-of-question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid green!important;outline:3px solid rgba(0,193,0,.321)!important}.question-standalone-container[_ngcontent-%COMP%]:hover   .prev_question_btn[_ngcontent-%COMP%], .question-standalone-container[_ngcontent-%COMP%]:hover   .next_question_btn[_ngcontent-%COMP%]{visibility:visible}.question-standalone-label[_ngcontent-%COMP%]{font-weight:700}.question-standalone-content-box[_ngcontent-%COMP%]{position:relative}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]{color:#f44336;position:relative;padding-left:20px;display:flex;align-items:center}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]:before{content:"!";position:absolute;left:0;color:#fff;background:#f44336;width:15px;height:15px;text-align:center;border-radius:50%;font-size:smaller;display:flex;justify-content:center;align-items:center}.question-standalone-step-container-box[_ngcontent-%COMP%]{margin-bottom:50px}.group-content-of-question-standalone[_ngcontent-%COMP%]{margin-bottom:10px;font-weight:700}.answer[_ngcontent-%COMP%]{display:flex;align-items:center}.answer-label[_ngcontent-%COMP%]{width:20px;height:30px;min-width:20px;min-height:30px;display:flex;align-items:center;justify-content:flex-start;border-radius:50%;border-width:2px;border-style:solid;border-color:transparent}.answer-box[_ngcontent-%COMP%]{border-radius:0 0 3px 3px;padding:8px 20px;justify-content:space-between;align-items:center}.selected-answer[_ngcontent-%COMP%]{background-color:#f39c12;color:#fff}.answer-content-front[_ngcontent-%COMP%]{display:flex!important;flex-wrap:wrap;width:calc(100% - 30px)}.explainTxt[_ngcontent-%COMP%]{width:125px;font-weight:500;display:flex;align-items:center}#examHeader[_ngcontent-%COMP%]{display:block;border:1px solid #e7e7e7;border-radius:3px;overflow:hidden}.next_question_btn[_ngcontent-%COMP%]{position:absolute;right:10px;top:35%;padding:.35rem .45rem;background-color:#a3a5a670;border-radius:50%;visibility:hidden}.prev_question_btn[_ngcontent-%COMP%]{position:absolute;left:10px;top:35%;padding:.35rem .45rem;background-color:#a3a5a670;border-radius:50%;visibility:hidden}.prev_question_btn[_ngcontent-%COMP%]:hover, .next_question_btn[_ngcontent-%COMP%]:hover{visibility:visible}.arrow_btn[_ngcontent-%COMP%]{font-size:20px;vertical-align:middle;width:20px;height:20px;color:#fff;margin-left:auto!important;margin-right:auto!important;-webkit-user-select:none;user-select:none}.bottom_action[_ngcontent-%COMP%]{position:fixed;padding:15px;bottom:0;left:0;background:#312e2e;color:#fff;width:100%}.bottom_action[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]{display:block}.btn-ans-result[_ngcontent-%COMP%]{color:#fff;background-color:#f39c12}.show-list[_ngcontent-%COMP%]{max-width:200px}.show-list[_ngcontent-%COMP%]   .show-sheet[_ngcontent-%COMP%]   .listli[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:27px;height:27px;border-radius:50%;border:1px solid #347da5;display:flex;align-items:center;color:#fff;justify-content:center;font-size:12px;cursor:pointer;-webkit-user-select:none;user-select:none}.top_action[_ngcontent-%COMP%]{position:fixed;padding:10px;top:0;left:0;background:#312e2e;color:#fff;width:100%}.scrollSheetMobile[_ngcontent-%COMP%]{max-height:200px;overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.scrollSheetMobile[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.notify-badge[_ngcontent-%COMP%]{position:absolute;right:3px;top:3px;text-align:center;color:#afafaf;padding:0;font-size:20px;cursor:pointer}.attach-container[_ngcontent-%COMP%]{background:#fff;padding:10px 0 0;border-radius:5px;width:83.33%;border:1px solid #e8e8e8}.answer-review[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:50%;border:1px solid rgb(52,125,165);display:flex;align-items:center;color:#fff;justify-content:center;font-size:15px;-webkit-user-select:none;user-select:none}.border-none[_ngcontent-%COMP%]{border:none!important}.bg-question[_ngcontent-%COMP%]{margin-top:15px;padding:15px 10px;background:#fff}.question-pending-part[_ngcontent-%COMP%]{width:100%;height:50px}.pencil-edit[_ngcontent-%COMP%]{position:absolute;top:-5px;right:-5px;width:30px;height:30px;border-radius:50%;text-align:center;background:darkgrey;z-index:9999}.pencil-edit[_ngcontent-%COMP%]   .lucide[_ngcontent-%COMP%]{color:#fff;stroke-width:2.5px;height:29px}.margin-question-bar[_ngcontent-%COMP%]{margin-top:calc(3rem + 40px)!important}.sheet-screen[_ngcontent-%COMP%]{max-height:calc(100vh - 140px);overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.sheet-screen[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}  .layout{display:grid;margin:20px 0;grid-row-gap:20px}  .layout-4{grid-template-columns:1fr 1fr 1fr 1fr}  .layout-2{grid-template-columns:1fr 1fr}  .layout-1{grid-template-columns:1fr}  .question-standalone-content-box{max-width:100%;overflow-x:auto;overflow-y:hidden}  #boxContentQuestion .question-standalone-container{max-width:800px}@keyframes _ngcontent-%COMP%_shimmer{to{transform:translate(100%)}}@media (max-width: 768px){.answer-content-front[_ngcontent-%COMP%]{justify-content:center}.btn-ans-result[_ngcontent-%COMP%]{margin-right:auto!important}}@media (max-width: 800px){  #boxContentQuestion .question-standalone-container{max-width:calc(90vw - 16px)!important}}']}),n})();const UR=function(n){return{"skeleton-box-loading":n}};function BR(n,o){if(1&n&&t._UZ(0,"div",3),2&n){const e=t.oxw();t.Q6J("ngClass",t.VKq(1,UR,e.renderConfigObj.isFirstRender))}}function zR(n,o){if(1&n&&t._UZ(0,"azt-test-audio-ui",15),2&n){const e=t.oxw(2);t.Q6J("questionObj",e.questionObj)("isShowList",!0)}}function JR(n,o){1&n&&(t.TgZ(0,"span",16),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_vui_long_nhap_dap_an_cho_cau_hoi")," "))}const HR=function(n){return{"pb-2":n}};function GR(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",4)(1,"div",5),t._UZ(2,"azt-question-group-content-box",6),t.TgZ(3,"div",7),t.YNc(4,zR,1,2,"azt-test-audio-ui",8),t.YNc(5,JR,3,3,"span",9),t.TgZ(6,"div",10),t._UZ(7,"azt-question-label-box",11)(8,"azt-question-action-box",12),t.qZA(),t._UZ(9,"azt-question-content-box",6)(10,"azt-question-answer-view-content-box",6),t.qZA()(),t.TgZ(11,"azt-question-answer-edit-box",13),t.NdJ("isShowExplainChange",function(a){t.CHM(e);const r=t.oxw();return t.KtG(r.isShowExplain=a)})("setAnswerOnUpdateEmit",function(a){t.CHM(e);const r=t.oxw();return t.KtG(r.setAnswerOnUpdateEmit.emit(a))})("setAnswerType4UpdateEmit",function(a){t.CHM(e);const r=t.oxw();return t.KtG(r.setAnswerType4UpdateEmit.emit(a))})("removeAnswerType4Emit",function(a){t.CHM(e);const r=t.oxw();return t.KtG(r.removeAnswerType4Emit.emit(a))}),t.qZA(),t._UZ(12,"azt-question-explain-box",14),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.Udp("font-size","1em")("line-height","1.7")("overflow","auto"),t.Q6J("id","question_render_container_"+e.questionObj.id)("ngClass",t.VKq(34,HR,e.questionObj.attachments.length>0)),t.xp6(1),t.Q6J("examObj",e.examObj)("questionObj",e.questionObj)("renderConfigObj",e.renderConfigObj),t.xp6(2),t.Q6J("ngIf",e.questionObj.attachments.length>0),t.xp6(1),t.Q6J("ngIf",e.isInvalidValidation),t.xp6(2),t.Q6J("examObj",e.examObj)("questionObj",e.questionObj)("renderConfigObj",e.renderConfigObj)("curQuestionIndex",e.curQuestionIndex),t.xp6(1),t.Q6J("showForTeacher",!0)("examObj",e.examObj)("questionObj",e.questionObj)("renderConfigObj",e.renderConfigObj)("curQuestionIndex",e.curQuestionIndex)("orgExamObjs",e.orgExamObjs),t.xp6(1),t.Q6J("examObj",e.examObj)("questionObj",e.questionObj)("renderConfigObj",e.renderConfigObj),t.xp6(1),t.Q6J("examObj",e.examObj)("questionObj",e.questionObj)("renderConfigObj",e.renderConfigObj),t.xp6(1),t.Q6J("isShowExplain",e.isShowExplain)("questionObj",e.questionObj),t.xp6(1),t.Q6J("isShowExplain",e.isShowExplain)("questionObj",e.questionObj)("renderConfigObj",e.renderConfigObj)}}let f5=(()=>{class n extends l5.R{ngOnInit(){super.ngOnInit();let e=new c5.m(!1,!1,!1);super.initData(e,this.follower,this.questionObj)}constructor(){super(),this.follower=new u.p,this.curQuestionIndex=0,this.orgExamObjs=[],this.isShowExplain=!1,this.isInvalidValidation=!1,this.setAnswerOnUpdateEmit=new t.vpe,this.setAnswerType4UpdateEmit=new t.vpe,this.removeAnswerType4Emit=new t.vpe}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["azt-question-standalone-for-update"]],inputs:{examObj:"examObj",questionObj:"questionObj",follower:"follower",curQuestionIndex:"curQuestionIndex",orgExamObjs:"orgExamObjs",isShowExplain:"isShowExplain",isInvalidValidation:"isInvalidValidation"},outputs:{setAnswerOnUpdateEmit:"setAnswerOnUpdateEmit",setAnswerType4UpdateEmit:"setAnswerType4UpdateEmit",removeAnswerType4Emit:"removeAnswerType4Emit"},features:[t.qOj],decls:4,vars:3,consts:[["load_effect_lazy","",1,"question-standalone-box",3,"id"],["class","question-standalone-loader-box",3,"ngClass",4,"ngIf","ngIfElse"],["elementRended",""],[1,"question-standalone-loader-box",3,"ngClass"],[1,"question-standalone-content-box"],[1,"question-standalone-container","box","border-none",3,"id","ngClass"],[3,"examObj","questionObj","renderConfigObj"],[1,"question-standalone-main-content"],[3,"questionObj","isShowList",4,"ngIf"],["class","question-standalone-is-invalid-validation mb-2",4,"ngIf"],[1,"flex","items-center","justify-between"],[3,"examObj","questionObj","renderConfigObj","curQuestionIndex"],[3,"showForTeacher","examObj","questionObj","renderConfigObj","curQuestionIndex","orgExamObjs"],[3,"isShowExplain","questionObj","isShowExplainChange","setAnswerOnUpdateEmit","setAnswerType4UpdateEmit","removeAnswerType4Emit"],[2,"display","block",3,"isShowExplain","questionObj","renderConfigObj"],[3,"questionObj","isShowList"],[1,"question-standalone-is-invalid-validation","mb-2"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0),t.YNc(1,BR,1,3,"div",1),t.YNc(2,GR,13,36,"ng-template",null,2,t.W1O),t.qZA()),2&e){const a=t.MAs(3);t.Q6J("id","question_render_element_"+i.questionObj.id),t.xp6(1),t.Q6J("ngIf",!i.renderConfigObj.isRenderElement)("ngIfElse",a)}},dependencies:[D.mk,D.O5,o4.C,u5.T,d5.J,yR.w,m5.S,h5.L,p5.w,wR.P,RR,jt.JV],styles:['.pr-7[_ngcontent-%COMP%]{padding-right:28px}.w-38px[_ngcontent-%COMP%]{width:38px}.remove-grid[_ngcontent-%COMP%]{display:block!important}.question-standalone-loader-box[_ngcontent-%COMP%]{min-height:50px}  .skeleton-box-loading{width:100%;height:30px;max-width:100%;margin-bottom:5px;display:inline-block}  .skeleton-box-loading:after{position:absolute;inset:0;transform:translate(-100%);animation:_ngcontent-%COMP%_shimmer 2s infinite;content:""}.question-standalone-box[_ngcontent-%COMP%]{margin-bottom:30px;display:block;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 rgba(0, 0, 0, 0)),var(--tw-ring-shadow, 0 0 rgba(0, 0, 0, 0)),var(--tw-shadow);border-radius:.375rem}.question-standalone-container[_ngcontent-%COMP%]{padding:15px}.question-standalone-for-test-finder[_ngcontent-%COMP%]{border:none;margin-bottom:0;padding:0}.question-standalone-for-test-finder[_ngcontent-%COMP%]   .question-standalone-main-content[_ngcontent-%COMP%]{padding:15px;border:1px solid rgb(228,228,228)}.group-of-question-standalone-for-test-finder[_ngcontent-%COMP%]{padding:15px!important;border:1px solid rgb(228,228,228)!important}.question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid #2262AE!important;outline:3px solid rgba(125,160,201,.65)!important}.group-of-question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid green!important;outline:3px solid rgba(0,193,0,.321)!important}.question-standalone-container[_ngcontent-%COMP%]:hover   .prev_question_btn[_ngcontent-%COMP%], .question-standalone-container[_ngcontent-%COMP%]:hover   .next_question_btn[_ngcontent-%COMP%]{visibility:visible}.question-standalone-label[_ngcontent-%COMP%]{font-weight:700}.question-standalone-content-box[_ngcontent-%COMP%]{position:relative}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]{color:#f44336;position:relative;padding-left:20px;display:flex;align-items:center}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]:before{content:"!";position:absolute;left:0;color:#fff;background:#f44336;width:15px;height:15px;text-align:center;border-radius:50%;font-size:smaller;display:flex;justify-content:center;align-items:center}.question-standalone-step-container-box[_ngcontent-%COMP%]{margin-bottom:50px}.group-content-of-question-standalone[_ngcontent-%COMP%]{margin-bottom:10px;font-weight:700}.answer[_ngcontent-%COMP%]{display:flex;align-items:center}.answer-label[_ngcontent-%COMP%]{width:20px;height:30px;min-width:20px;min-height:30px;display:flex;align-items:center;justify-content:flex-start;border-radius:50%;border-width:2px;border-style:solid;border-color:transparent}.answer-box[_ngcontent-%COMP%]{border-radius:0 0 3px 3px;padding:8px 20px;justify-content:space-between;align-items:center}.selected-answer[_ngcontent-%COMP%]{background-color:#f39c12;color:#fff}.answer-content-front[_ngcontent-%COMP%]{display:flex!important;flex-wrap:wrap;width:calc(100% - 30px)}.explainTxt[_ngcontent-%COMP%]{width:125px;font-weight:500;display:flex;align-items:center}#examHeader[_ngcontent-%COMP%]{display:block;border:1px solid #e7e7e7;border-radius:3px;overflow:hidden}.next_question_btn[_ngcontent-%COMP%]{position:absolute;right:10px;top:35%;padding:.35rem .45rem;background-color:#a3a5a670;border-radius:50%;visibility:hidden}.prev_question_btn[_ngcontent-%COMP%]{position:absolute;left:10px;top:35%;padding:.35rem .45rem;background-color:#a3a5a670;border-radius:50%;visibility:hidden}.prev_question_btn[_ngcontent-%COMP%]:hover, .next_question_btn[_ngcontent-%COMP%]:hover{visibility:visible}.arrow_btn[_ngcontent-%COMP%]{font-size:20px;vertical-align:middle;width:20px;height:20px;color:#fff;margin-left:auto!important;margin-right:auto!important;-webkit-user-select:none;user-select:none}.bottom_action[_ngcontent-%COMP%]{position:fixed;padding:15px;bottom:0;left:0;background:#312e2e;color:#fff;width:100%}.bottom_action[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]{display:block}.btn-ans-result[_ngcontent-%COMP%]{color:#fff;background-color:#f39c12}.show-list[_ngcontent-%COMP%]{max-width:200px}.show-list[_ngcontent-%COMP%]   .show-sheet[_ngcontent-%COMP%]   .listli[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:27px;height:27px;border-radius:50%;border:1px solid #347da5;display:flex;align-items:center;color:#fff;justify-content:center;font-size:12px;cursor:pointer;-webkit-user-select:none;user-select:none}.top_action[_ngcontent-%COMP%]{position:fixed;padding:10px;top:0;left:0;background:#312e2e;color:#fff;width:100%}.scrollSheetMobile[_ngcontent-%COMP%]{max-height:200px;overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.scrollSheetMobile[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.notify-badge[_ngcontent-%COMP%]{position:absolute;right:3px;top:3px;text-align:center;color:#afafaf;padding:0;font-size:20px;cursor:pointer}.attach-container[_ngcontent-%COMP%]{background:#fff;padding:10px 0 0;border-radius:5px;width:83.33%;border:1px solid #e8e8e8}.answer-review[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:50%;border:1px solid rgb(52,125,165);display:flex;align-items:center;color:#fff;justify-content:center;font-size:15px;-webkit-user-select:none;user-select:none}.border-none[_ngcontent-%COMP%]{border:none!important}.bg-question[_ngcontent-%COMP%]{margin-top:15px;padding:15px 10px;background:#fff}.question-pending-part[_ngcontent-%COMP%]{width:100%;height:50px}.pencil-edit[_ngcontent-%COMP%]{position:absolute;top:-5px;right:-5px;width:30px;height:30px;border-radius:50%;text-align:center;background:darkgrey;z-index:9999}.pencil-edit[_ngcontent-%COMP%]   .lucide[_ngcontent-%COMP%]{color:#fff;stroke-width:2.5px;height:29px}.margin-question-bar[_ngcontent-%COMP%]{margin-top:calc(3rem + 40px)!important}.sheet-screen[_ngcontent-%COMP%]{max-height:calc(100vh - 140px);overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.sheet-screen[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}  .layout{display:grid;margin:20px 0;grid-row-gap:20px}  .layout-4{grid-template-columns:1fr 1fr 1fr 1fr}  .layout-2{grid-template-columns:1fr 1fr}  .layout-1{grid-template-columns:1fr}  .question-standalone-content-box{max-width:100%;overflow-x:auto;overflow-y:hidden}  #boxContentQuestion .question-standalone-container{max-width:800px}@keyframes _ngcontent-%COMP%_shimmer{to{transform:translate(100%)}}@media (max-width: 768px){.answer-content-front[_ngcontent-%COMP%]{justify-content:center}.btn-ans-result[_ngcontent-%COMP%]{margin-right:auto!important}}@media (max-width: 800px){  #boxContentQuestion .question-standalone-container{max-width:calc(90vw - 16px)!important}}']}),n})();function $R(n,o){if(1&n&&t._UZ(0,"azt-loaded-img",1),2&n){const e=t.oxw();t.Q6J("imgSrc",e.examObj.examHeader)}}let g5=(()=>{class n extends St.Q{}return n.\u0275fac=function(){let o;return function(i){return(o||(o=t.n5z(n)))(i||n)}}(),n.\u0275cmp=t.Xpm({type:n,selectors:[["azt-exam-header-box"]],inputs:{examObj:"examObj"},features:[t.qOj],decls:1,vars:1,consts:[["style","display: block",3,"imgSrc",4,"ngIf"],[2,"display","block",3,"imgSrc"]],template:function(e,i){1&e&&t.YNc(0,$R,1,1,"azt-loaded-img",0),2&e&&t.Q6J("ngIf",i.examObj.examHeader)},dependencies:[D.O5,i5.y],encapsulation:2}),n})(),x5=(()=>{class n extends St.Q{constructor(){super(...arguments),this.content=""}ngOnInit(){document.body.style.overflow="hidden",super.ngOnInit()}ngOnDestroy(){document.body.style.overflow="auto"}}return n.\u0275fac=function(){let o;return function(i){return(o||(o=t.n5z(n)))(i||n)}}(),n.\u0275cmp=t.Xpm({type:n,selectors:[["azt-loading-handle-data"]],inputs:{content:"content"},features:[t.qOj],decls:10,vars:3,consts:[[1,"box-loading-handle-data"],[1,"box-body"],[1,"text-center","py-4"],["version","1.1","id","jobing-j-drawit","id","Layer_1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","x","0px","y","0px","viewBox","0 0 109 92.9",0,"xml","space","preserve",1,"w-12","mx-auto",2,"enable-background","new 0 0 109 92.9"],["d","M90.8,52c3.5,6.2,7.1,11.7,9.8,17.7c4.4,9.7-2.9,20.7-13.8,20.9c-11.8,0.2-23.7,0.2-35.5,0 c-11-0.1-17.6-12.2-12-21.7c0.4-0.8,1.8-1.4,2.7-1.4c9.9-0.1,19.7-0.1,29.6-0.1c9.8,0,15.9-4.6,18.7-14C90.4,53.2,90.5,52.9,90.8,52 z",1,"azt-svg-loading","jobing-j"],["d","M39.6,90.3c-6.8,0-13.8,0.8-20.5-0.2c-9.7-1.4-15-12.8-10.3-21.3c5.9-10.9,12.1-21.6,18.5-32.2 c5.5-9,18.6-8.7,24.2,0.2c0.7,1.1,0.8,1.9,0.1,3.1C46.7,48.3,42,57,36.8,65.3c-5.3,8.4-3.8,18.8,2.5,24.6 C39.5,89.9,39.5,90.2,39.6,90.3z",1,"azt-svg-loading","jobing-j"],["d","M32.5,27.3c3.3-5.7,6.1-11,9.4-16c5.9-9.1,19.4-9.2,25.1,0c6.5,10.4,12.6,21,18.3,31.7 c4.8,9-1.5,19.9-11.5,20.7c-1.6,0.1-2.6-0.2-3.5-1.8c-4.8-8.6-9.8-17.1-14.7-25.6c-4.7-8.3-12.5-11.6-21.7-9.2 C33.6,27.1,33.3,27.1,32.5,27.3z",1,"azt-svg-loading","jobing-j"],[1,"note","text-center","font-medium"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t.O4$(),t.TgZ(3,"svg",3),t._UZ(4,"path",4)(5,"path",5)(6,"path",6),t.qZA()(),t.kcU(),t.TgZ(7,"div",7),t._uU(8),t.ALo(9,"mytranslate"),t.qZA()()()),2&e&&(t.xp6(8),t.Oqu(t.lcZ(9,1,i.content)+"..."))},dependencies:[jt.JV],styles:[".box-loading-handle-data[_ngcontent-%COMP%]{height:100vh;width:100%;position:absolute;top:0;right:0;background:rgba(240,248,255,.3019607843);display:flex;align-items:center;justify-content:center;z-index:999}"]}),n})();const b5="azt-dispatch-change-editor";class v5{constructor(o,e){this.editor=o,this.config=e}loadScript(o,e,i){return new Promise(a=>{((n,o)=>{n.execCommand("aztLoadScriptSource",!1,o)})(this.editor,{name:o,url:e,mode:i,callback:a})})}loadMultipleScript(o){return new Promise(e=>{((n,o)=>{n.execCommand("aztLoadMultipleScriptSource",!1,o)})(this.editor,{lst:o,callback:e})})}loadStyle(o,e,i){return((n,o)=>{n.execCommand("aztLoadStyleSource",!1,o)})(this.editor,{name:o,content:e,mode:i})}hiddenSuggestionMenu(o){return((n,o)=>{n.execCommand("aztHiddenSuggestionActionMenu",!1,o)})(this.editor,o)}addOneSuggestionMenu(o,e,i,a,r){return((n,o)=>{n.execCommand("aztAddSuggestionActionMenu",!1,o)})(this.editor,{name:o,callback:e,svgIcon:i,hidden:a,hiddenOnExcuse:r})}openOneSuggestionMenu(o){return((n,o)=>{n.execCommand("aztOpenOneSuggestionActionMenu",!1,o)})(this.editor,o)}hiddenOneSuggestionMenu(o){return((n,o)=>{n.execCommand("aztHiddenOneSuggestionActionMenu",!1,o)})(this.editor,o)}setContentPlaceholder(o){return((n,o)=>{n.execCommand("aztSetContentPlaceholderActionMenu",!1,o)})(this.editor,o)}pushJsonContent(o,e){return this.editor.fire("azt-dispatch-push-json-content",{name:o,content:e})}static replaceTranslateService(o){Object.prototype.hasOwnProperty.call(window,"aztEditorFnsTranslateService")||(window.aztEditorFnsTranslateService=o)}translate(o,e){return window.aztEditorFnsTranslateService?window.aztEditorFnsTranslateService(o,e):e??o}listenChangeEditor(o,e){this.editor.on(b5,i=>{o.includes(i.dispatch_name)&&e(i.dispatch_name)})}dispatchChangeEditor(o){this.editor.fire(b5,{dispatch_name:o})}getConfig(o){return this.config.getByKey(o)}setConfig(o,e){this.config[o]=e,this.editor.fire("azt-dispatch-change-config",{name:o})}}var cU=M(1458),uU=M.n(cU),y5=M(95277);let dU=(()=>{class n{constructor(e,i,a){this.infoService=e,this.commonService=i,this.sAZTranslateService=a,this.configs=Ce.N.editor_local_setting,v5.replaceTranslateService((r,s)=>this.sAZTranslateService.myTranslateInstant(r)??s??r)}init(){var e=this;return new Promise(function(){var i=(0,Ya.Z)(function*(a,r){try{if(e.configs)return a();yield e.initConfig(),a()}catch(s){r(s)}});return function(a,r){return i.apply(this,arguments)}}())}initConfig(){return new Promise(e=>{this.infoService.apiInfoGetConfigObjsGet("EDITOR_V3_CONFIG").subscribe(i=>{this.configs=this.commonService.castJsonToObj(i.EDITOR_V3_CONFIG),e()})})}replaceMathMlToAztMathHook(e){return(e=e.replace(/<span class="tex2jax_process azt-mathml"[^>]*>\\\((.*?)\\\)<\/span>/gi,'<azt-math data-latex="$1"></azt-math>')).replace(/<span class=\"tex2jax_process azt-mathml\"[^>]*><![^>]*>[^<]*(<math\b[^>]*>[\s\S]*?<\/math>)[^<]*<\/span>/gi,(i,a)=>`<azt-math data-latex="${uU().convert(a)}"></azt-math>`)}replaceQvStringEngAns(e){return e.replace(/(<span class=\"qv_string_eng_ans\") (style='[^\']*'[^>]*)(>[^\<]*)<span style='[^\']*'>([a-zA-Z])<\/span>(<\/span>)/gi,'$1 data-index-answer="$4"$3$5')}replaceImageContentToElement(e){return e.replace(/@\[\]({.*?\})@\[\]/g,(i,a)=>{const r=JSON.parse(a);return`<azt-image data-link="${r.link}" data-x="${r.data.x}" data-y="${r.data.y}" data-width="${r.data.width}" data-height="${r.data.height}"></azt-image>`})}processTextFromJson(e){return new y5.m(this,e).pipeline(this.replaceMathMlToAztMathHook).pipeline(this.replaceImageContentToElement).pipeline(this.replaceQvStringEngAns).value}replaceCodeContentToSave(e){return e.replace(/<code processing="true" content="([^\"]*)"[^>]*>(.*)<\/code>/g,"<code>$1</code>")}replaceMathMlContentToSave(e){return(e=e.replace(/<azt-math data-latex="([^"]*)"[^>]*>(.*)<\/azt-math>/g,'<span class="tex2jax_process azt-mathml">\\($1\\)</span>')).replace(/<span class="[^"]*" data-latex="([^"]*)"[^>]*>(.*)<\/span>/g,'<span class="tex2jax_process azt-mathml">\\($1\\)</span>')}replaceBrContentToSave(e){return this.commonService.replaceAll(e,'<br data-mce-bogus="1">',"")??""}processFirstTextFromOutput(e){return new y5.m(this,e).pipeline(this.replaceCodeContentToSave).pipeline(this.replaceMathMlContentToSave).pipeline(this.replaceBrContentToSave).value}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(Pi.CM),t.LFG(mi.z),t.LFG(s5.W))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const mU=function(){return{standalone:!0}};function hU(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"editor",1),t.NdJ("ngModelChange",function(a){t.CHM(e);const r=t.oxw();return t.KtG(r.question_html_content=a)})("onInit",function(a){t.CHM(e);const r=t.oxw();return t.KtG(r.handleEditorInit(a))}),t.qZA()}if(2&n){const e=t.oxw();let i;t.Q6J("ngModelOptions",t.DdM(4,mU))("ngModel",e.question_html_content)("apiKey",null!==(i=null==e.manager.configs?null:e.manager.configs.tiny_mce_key)&&void 0!==i?i:"")("init",e.config)}}let pU=(()=>{class n extends St.Q{constructor(e,i){super(),this.manager=e,this.commonService=i,this.changeContentEditor=new t.vpe,this.changeImageEditor=new t.vpe,this.question_html_content="",this.isInitEditor=!0}onChangeNote(){return this.question_html_content.includes("azt-question-multiple-choice-answers")||this.question_html_content.includes("qv_string_eng_ans")?this.exportQuestionMultipleChoiceFromEditor():this.exportQuestionEssayFromEditor()}exportQuestionEssayFromEditor(){const e=new $t.Q(5),i=this.commonService.myClone(this.question);var a,r;e.addTask(this,()=>new Promise(s=>{this.editor?.fire("azt-question-essay--export",{callback:l=>{a={content:this.manager.processFirstTextFromOutput(l.content)},s()}})})),e.addTask(this,()=>new Promise(s=>{this.editor?.fire("azt-helper-question--export",{callback:l=>{r=this.manager.processFirstTextFromOutput(l),s()}})})),e.start().then(()=>{i&&(i.help=r,i.content=a.content,this.changeContentEditor.emit(i))})}exportQuestionMultipleChoiceFromEditor(){const e=new $t.Q(5),i=this.commonService.myClone(this.question);var a,r;e.addTask(this,()=>new Promise(s=>{this.editor?.fire("azt-question-multiple-choice--export",{callback:l=>{a={content:this.manager.processFirstTextFromOutput(l.content),answers:l.answers.map(c=>({...c,content:this.manager.processFirstTextFromOutput(c.content)}))},s()}})})),e.addTask(this,()=>new Promise(s=>{this.editor?.fire("azt-helper-question--export",{callback:l=>{r=this.manager.processFirstTextFromOutput(l),s()}})})),e.start().then(()=>{i&&(i.help=r,i.content=a.content,i.answers=a.answers,i.answers.length===this.question?.answers.length&&this.changeContentEditor.emit(i))})}ngOnInit(){super.ngOnInit(),this.manager.init().then(()=>{this.isInitEditor=!1})}handleEditorInit(e){this.editor=e.editor,function lU(n){return new Promise(o=>{n.on("azt-dispatch-setup-api",e=>{o(new v5(n,e.config))})})}(this.editor).then(i=>{if(i.setConfig("lock_the_answer",!0),i.setConfig("many_multiple_choice_answers_are_correct",!0),1===this.question?.answerType){const a={content:this.manager.processTextFromJson(this.question?.content??""),answers:this.question?.answers.map(r=>({key:r.key,content:this.manager.processTextFromJson(r.content),isTrue:r.isTrue})),help:this.manager.processTextFromJson(this.question?.help??"")};i.pushJsonContent("QUESTION_MULTIPLE_CHOICE_JSON",a)}if(4===this.question?.answerType){const a={content:this.manager.processTextFromJson(this.question?.content??""),answers:this.question?.answerResult,help:this.manager.processTextFromJson(this.question?.help??"")};i.pushJsonContent("QUESTION_FILL_EMPTY_JSON",a)}i.listenChangeEditor(["content","image"],a=>{switch(a){case"content":return this.onChangeNote();case"image":return this.changeImageEditor.emit()}})})}get config(){if(!this.manager.configs)return{};const e=`${this.manager.configs?.base_init.plugins} ${this.manager.configs.external_plugins.map(r=>r.name).join(" ")}`,i={},a={};return this.manager.configs.external_plugins.forEach(r=>{i[r.name]=r.load_url,a[`${this.commonService.replaceAll(r.name,"-","_")}_settings`]=r.settings}),{...this.manager.configs?.base_init,plugins:e,external_plugins:i,...a}}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(dU),t.Y36(mi.z))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-azt-editor-v3"]],inputs:{question:"question"},outputs:{changeContentEditor:"changeContentEditor",changeImageEditor:"changeImageEditor"},features:[t.qOj],decls:1,vars:1,consts:[[3,"ngModelOptions","ngModel","apiKey","init","ngModelChange","onInit",4,"ngIf"],[3,"ngModelOptions","ngModel","apiKey","init","ngModelChange","onInit"]],template:function(e,i){1&e&&t.YNc(0,hU,1,5,"editor",0),2&e&&t.Q6J("ngIf",!i.isInitEditor)},dependencies:[D.O5,f.JJ,f.On,w.PG],styles:[".tox-tinymce{border:none!important;border-radius:0 0 5px 5px!important}"]}),n})();const _U=["downPage"];function fU(n,o){1&n&&t._UZ(0,"azt-loading-effect")}function gU(n,o){1&n&&(t.TgZ(0,"span",43),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_testbank_create_exam_width_file_pdf_go_to")))}function xU(n,o){1&n&&(t.TgZ(0,"div",44),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_tested_list_teacher_confirmed")," "))}function bU(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",45)(1,"div",46)(2,"span",47),t._uU(3),t.ALo(4,"mytranslate"),t.qZA(),t.TgZ(5,"input",48),t.NdJ("keyup.enter",function(){t.CHM(e);const a=t.oxw(4);return t.KtG(a.actionNextToQuestion())})("ngModelChange",function(a){t.CHM(e);const r=t.oxw(4);return t.KtG(r.nexToQuestionConf.value=a)})("focus",function(){t.CHM(e);const a=t.oxw(4);return t.KtG(a.toggleTooltipNextToQuestion(!0))})("focusout",function(){t.CHM(e);const a=t.oxw(4);return t.KtG(a.toggleTooltipNextToQuestion(!1))}),t.qZA(),t.TgZ(6,"button",49),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(4);return t.KtG(a.actionNextToQuestion())}),t._uU(7),t.ALo(8,"mytranslate"),t.qZA()(),t.TgZ(9,"div")(10,"button",50),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(4);return t.KtG(a.openDialogSpitPoint())}),t._uU(11),t.ALo(12,"mytranslate"),t.qZA()()()}if(2&n){const e=t.oxw(4);t.xp6(3),t.Oqu(t.lcZ(4,5,"lang_testbank_create_exam_width_file_pdf_go_to")),t.xp6(2),t.Q6J("min",1)("ngModel",e.nexToQuestionConf.value),t.xp6(2),t.Oqu(t.lcZ(8,7,"lang_auto_den")),t.xp6(4),t.Oqu(t.lcZ(12,9,"lang_testbank_update_exam_split_points"))}}function vU(n,o){1&n&&(t.TgZ(0,"span",57),t._uU(1,",\xa0"),t.qZA())}function yU(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"b",55),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw(6);let l;return t.KtG(s.goToQuestionAll(null!==(l=r.index)&&void 0!==l?l:0))}),t.ALo(2,"mytranslate"),t._uU(3),t.ALo(4,"mytranslate"),t.qZA(),t.YNc(5,vU,2,0,"span",56),t.BQk()}if(2&n){const e=o.$implicit,i=o.index,a=t.oxw(6);let r;t.xp6(1),t.s9C("matTooltip",t.lcZ(2,4,"lang_testbank_create_exam_width_file_pdf_click_roll")),t.xp6(2),t.AsE("",t.lcZ(4,6,"lang_testbank_create_exam_width_file_pdf_question")," ",(null!==(r=e.index)&&void 0!==r?r:0)+1,""),t.xp6(2),t.Q6J("ngIf",i<a.invalidTypeQuestionConfig.length-1)}}function wU(n,o){if(1&n&&(t.ynx(0),t._uU(1),t.ALo(2,"mytranslate"),t.TgZ(3,"div",53),t.YNc(4,yU,6,8,"ng-container",54),t.qZA(),t.BQk()),2&n){const e=t.oxw(5);t.xp6(1),t.hij(" ",t.lcZ(2,2,"lang_testbank_create_exam_width_file_pdf_check_configuration")," "),t.xp6(3),t.Q6J("ngForOf",e.invalidTypeQuestionConfig)}}function CU(n,o){if(1&n&&(t.TgZ(0,"div",51)(1,"mat-icon",52),t._uU(2,"info_outlined"),t.qZA(),t._uU(3),t.ALo(4,"mytranslate"),t.YNc(5,wU,5,4,"ng-container",3),t.qZA()),2&n){const e=t.oxw(4);t.xp6(3),t.hij(" ",t.lcZ(4,2,"lang_testbank_create_exam_width_file_pdf_cant_save")," "),t.xp6(2),t.Q6J("ngIf",e.invalidTypeQuestionConfig.length>0)}}function TU(n,o){1&n&&(t.TgZ(0,"span",61),t._uU(1,"|"),t.qZA())}function kU(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"a",59),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw(5);return t.KtG(s.onShowFile(r))}),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.YNc(4,TU,2,0,"span",60),t.BQk()}if(2&n){const e=o.index,i=t.oxw(5);t.xp6(2),t.AsE("",t.lcZ(3,3,"lang_testbank_update_exam_image")," ",e+1,""),t.xp6(2),t.Q6J("ngIf",e<i.cropperData.length-1)}}function AU(n,o){if(1&n&&(t.TgZ(0,"div",58),t._uU(1),t.ALo(2,"mytranslate"),t.YNc(3,kU,5,5,"ng-container",54),t.qZA()),2&n){const e=t.oxw(4);t.xp6(1),t.hij(" ",t.lcZ(2,2,"lang_testbank_update_exam_data_split_exam"),": "),t.xp6(2),t.Q6J("ngForOf",e.cropperData)}}function SU(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",79),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(5);return t.KtG(a.cancelEditQuest())}),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()}2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_cms_common_close_btn")," "))}function OU(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"button",80),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(5);return t.KtG(a.onSaveEditOnlyQuest())}),t._UZ(1,"lucide-icon",81),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()}if(2&n){const e=t.oxw(5);t.Q6J("disabled",!e.editorInsideTargetObj.event.content),t.xp6(2),t.hij(" ",t.lcZ(3,2,"lang_student_classroom_list_update")," ")}}function EU(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"lucide-icon",97),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(3).$implicit,r=t.oxw(4);return t.KtG(r.showFeedbackQuestionDialog(a))}),t.ALo(1,"mytranslate"),t.qZA()}2&n&&t.s9C("matTooltip",t.lcZ(1,1,"lang_auto_bao_loi"))}function MU(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",98)(1,"button",99),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(3).$implicit,r=t.oxw(4);return t.KtG(r.showFeedbackQuestionDialog(a))}),t.ALo(2,"mytranslate"),t._UZ(3,"lucide-icon",100),t.qZA()()}2&n&&(t.xp6(1),t.s9C("matTooltip",t.lcZ(2,1,"lang_auto_bao_loi")))}function IU(n,o){if(1&n&&(t.ynx(0),t.YNc(1,EU,2,3,"lucide-icon",95),t.YNc(2,MU,4,3,"div",96),t.TgZ(3,"div",83),t._uU(4,"|"),t.qZA(),t.BQk()),2&n){const e=t.oxw(6);t.xp6(1),t.Q6J("ngIf",e.isMobile),t.xp6(1),t.Q6J("ngIf",!e.isMobile)}}function LU(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"lucide-icon",101),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2),r=a.$implicit,s=a.index,l=t.oxw(4);return t.KtG(l.removeQuestion(r,s))}),t.ALo(1,"mytranslate"),t.qZA()}2&n&&t.s9C("matTooltip",t.lcZ(1,1,"lang_auto_xoa"))}function PU(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"button",102),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2),r=a.$implicit,s=a.index,l=t.oxw(4);return t.KtG(l.removeQuestion(r,s))}),t.ALo(2,"mytranslate"),t._UZ(3,"lucide-icon",103),t.qZA()()}2&n&&(t.xp6(1),t.s9C("matTooltip",t.lcZ(2,1,"lang_auto_xoa")))}function NU(n,o){1&n&&(t.TgZ(0,"div",104),t.ALo(1,"mytranslate"),t.O4$(),t.TgZ(2,"svg",105),t._UZ(3,"line",106)(4,"path",107),t.qZA()()),2&n&&t.s9C("matTooltip",t.lcZ(1,1,"lang_auto_dap_an_cua_cau_hoi_nay_da_duoc_co_dinh"))}function ZU(n,o){1&n&&(t.TgZ(0,"div",83),t._uU(1,"|"),t.qZA())}function DU(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",108)(1,"div",109)(2,"mat-chip-listbox")(3,"mat-chip-option",110),t.NdJ("removed",function(){t.CHM(e);const a=t.oxw(2).$implicit,r=t.oxw(4);return t.KtG(r.setTag(a))}),t._uU(4),t.ALo(5,"mytranslate"),t.TgZ(6,"button",111)(7,"mat-icon",112),t._uU(8,"cancel"),t.qZA()()()()()()}if(2&n){const e=t.oxw(2).$implicit;t.xp6(4),t.hij(" ",t.lcZ(5,1,"azt_lang_tag_"+e.tags[0].code)," ")}}function jU(n,o){1&n&&(t.TgZ(0,"div",83),t._uU(1,"|"),t.qZA())}function qU(n,o){1&n&&(t.O4$(),t.kcU(),t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_teacher_set_tags")))}function FU(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",122),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw(3).$implicit,l=t.oxw(4);return t.KtG(l.setTag(s,r))}),t._uU(2),t.qZA()()}if(2&n){const e=o.$implicit,i=t.oxw(7);let a;t.xp6(2),t.hij(" ",null!==(a=e[i.commonService.getCurrentLang()+"Name"])&&void 0!==a?a:e.enName," ")}}const a4=function(n){return{"mr-1":n}};function QU(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",113)(1,"button",114),t.O4$(),t.TgZ(2,"svg",90),t._UZ(3,"path",115)(4,"path",116)(5,"path",117),t.qZA(),t.YNc(6,qU,3,3,"span",3),t.qZA(),t.kcU(),t.TgZ(7,"mat-menu",null,118)(9,"div",119)(10,"ul",7),t.YNc(11,FU,3,1,"li",54),t.TgZ(12,"li"),t._UZ(13,"hr",120),t.qZA(),t.TgZ(14,"li")(15,"button",121),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2).$implicit,r=t.oxw(4);return t.KtG(r.applyTagAll(a))}),t._uU(16),t.ALo(17,"mytranslate"),t.qZA()()()()()()}if(2&n){const e=t.MAs(8),i=t.oxw(2).$implicit,a=t.oxw(4);t.xp6(1),t.Q6J("matMenuTriggerFor",e),t.xp6(1),t.Q6J("ngClass",t.VKq(8,a4,!a.isMobile)),t.xp6(4),t.Q6J("ngIf",!a.isMobile),t.xp6(5),t.Q6J("ngForOf",a.questionTags),t.xp6(4),t.Q6J("disabled",!i.tags),t.xp6(1),t.hij(" ",t.lcZ(17,6,"lang_teacher_apply_all_tags")," ")}}function RU(n,o){1&n&&(t.TgZ(0,"div",83),t._uU(1,"|"),t.qZA())}function UU(n,o){1&n&&(t.O4$(),t.kcU(),t.TgZ(0,"span",123),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_teacher_edit_content_exam")))}function BU(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_update_exam_original_question")))}function zU(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",124),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2).$implicit,r=t.oxw(4);return t.KtG(r.goToOriginalQuestion(a))}),t.TgZ(2,"span",125),t._UZ(3,"lucide-icon",126),t.qZA(),t.YNc(4,BU,3,3,"span",3),t.qZA(),t.TgZ(5,"div",83),t._uU(6,"|"),t.qZA(),t.BQk()}if(2&n){const e=t.oxw(6);t.xp6(2),t.Q6J("ngClass",t.VKq(2,a4,!e.isMobile)),t.xp6(2),t.Q6J("ngIf",!e.isMobile)}}function JU(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.YNc(1,IU,5,2,"ng-container",3),t.ynx(2),t.YNc(3,LU,2,3,"lucide-icon",82),t.YNc(4,PU,4,3,"div",3),t.TgZ(5,"div",83),t._uU(6,"|"),t.qZA(),t.BQk(),t.YNc(7,NU,5,3,"div",84),t.YNc(8,ZU,2,0,"div",85),t.TgZ(9,"div",86),t.YNc(10,DU,9,3,"div",87),t.qZA(),t.YNc(11,jU,2,0,"div",85),t.YNc(12,QU,18,10,"div",88),t.YNc(13,RU,2,0,"div",85),t.TgZ(14,"div",89),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().$implicit,r=t.oxw(4);return t.KtG(r.startEditQuest(a))}),t.TgZ(15,"span"),t.O4$(),t.TgZ(16,"svg",90),t._UZ(17,"path",91)(18,"polyline",92)(19,"path",93),t.qZA(),t.YNc(20,UU,3,3,"span",94),t.qZA()(),t.kcU(),t.TgZ(21,"div",83),t._uU(22,"|"),t.qZA(),t.YNc(23,zU,7,4,"ng-container",3),t.BQk()}if(2&n){const e=t.oxw().$implicit,i=t.oxw(4);t.xp6(1),t.Q6J("ngIf",e.enableFeedback),t.xp6(2),t.Q6J("ngIf",i.isMobile),t.xp6(1),t.Q6J("ngIf",!i.isMobile),t.xp6(3),t.Q6J("ngIf",e.isFixAns),t.xp6(1),t.Q6J("ngIf",e.isFixAns),t.xp6(2),t.Q6J("ngIf",e.tags&&e.tags.length>0),t.xp6(1),t.Q6J("ngIf",e.tags&&e.tags.length>0),t.xp6(1),t.Q6J("ngIf",i.questionTags.length>0),t.xp6(1),t.Q6J("ngIf",i.questionTags.length>0),t.xp6(3),t.Q6J("ngClass",t.VKq(12,a4,!i.isMobile)),t.xp6(4),t.Q6J("ngIf",!i.isMobile),t.xp6(3),t.Q6J("ngIf",e.orgQuestionObj&&e.orgQuestionObj.orgExamId)}}function HU(n,o){1&n&&t._UZ(0,"div")}function GU(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"app-azt-editor-v3",128),t.NdJ("changeContentEditor",function(a){t.CHM(e);const r=t.oxw(6);return t.KtG(r.onChangeContentEditor(a))})("changeImageEditor",function(){t.CHM(e);const a=t.oxw(6);return t.KtG(a.editorInsideTargetObj.event.image=!0)}),t.qZA()}if(2&n){const e=t.oxw(6);t.Q6J("question",e.editorInsideTargetObj.quest)}}function $U(n,o){if(1&n&&t.YNc(0,GU,1,1,"app-azt-editor-v3",127),2&n){const e=t.oxw(5);t.Q6J("ngIf",e.editorInsideTargetObj)}}function YU(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"azt-question-standalone-for-update",129,77),t.NdJ("setAnswerType4UpdateEmit",function(a){t.CHM(e);const r=t.oxw(5);return t.KtG(r.setAnswerType4(a))})("removeAnswerType4Emit",function(a){t.CHM(e);const r=t.oxw(5);return t.KtG(r.removeAnswerType4(a))})("setAnswerOnUpdateEmit",function(a){t.CHM(e);const r=t.oxw(5);return t.KtG(r.setAnswer(a))}),t.qZA()}if(2&n){const e=t.oxw(),i=e.$implicit,a=e.index,r=t.oxw(4);t.Q6J("examObj",r.examObj)("questionObj",i)("follower",r.followerRenderQuest)("curQuestionIndex",a)("isShowExplain",r.defaultShowResultMedia)("isInvalidValidation",r.invalidValidationQuestionIds.includes(i.id))}}function KU(n,o){if(1&n&&(t.TgZ(0,"div",132),t._UZ(1,"img",133),t.ALo(2,"mycdn"),t.qZA()),2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.s9C("src",t.lcZ(2,1,e.answerMedia),t.LSH)}}function WU(n,o){if(1&n&&(t.TgZ(0,"div",132)(1,"div",134),t._UZ(2,"span",135),t.qZA()()),2&n){const e=t.oxw(2).$implicit;t.xp6(2),t.Q6J("innerHtml",e.answerMedia,t.oJD)}}function VU(n,o){if(1&n&&(t.TgZ(0,"div",130),t.YNc(1,KU,3,3,"div",131),t.YNc(2,WU,3,1,"div",131),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",1==e.isImage),t.xp6(1),t.Q6J("ngIf",0==e.isImage)}}const XU=function(n){return{editable:n}},tB=function(n){return{"d-none":n}},eB=function(n){return{"error-border":n}};function nB(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",62)(1,"div",63)(2,"div",64)(3,"div",65)(4,"div",66),t.YNc(5,SU,3,3,"button",67),t.YNc(6,OU,4,4,"button",68),t.qZA(),t._UZ(7,"div",69),t.TgZ(8,"div",70),t.YNc(9,JU,24,14,"ng-container",3),t.ALo(10,"isOfflineExam"),t.TgZ(11,"div",71)(12,"span",72),t._uU(13),t.ALo(14,"mytranslate"),t.qZA(),t.TgZ(15,"input",73),t.NdJ("input",function(a){const s=t.CHM(e).$implicit,l=t.oxw(4);return t.KtG(l.setScore(a,s.id))}),t.qZA()()()(),t.TgZ(16,"div",74),t.YNc(17,HU,1,0,"div",75),t.YNc(18,$U,1,1,"ng-template",null,76,t.W1O),t.YNc(20,YU,2,6,"ng-template",null,77,t.W1O),t.qZA()(),t.YNc(22,VU,3,2,"div",78),t.qZA()()}if(2&n){const e=o.$implicit,i=o.index,a=t.MAs(19),r=t.MAs(21),s=t.oxw(4);let l;t.Q6J("ngClass",t.VKq(20,XU,s.editorInsideTargetObj&&s.editorInsideTargetObj.quest.id===e.id)),t.uIk("id","questViewBoxByLabel"+e.rawIndex),t.xp6(1),t.s9C("id","question_view_"+e.id),t.xp6(1),t.s9C("id","question_"+i),t.xp6(3),t.Q6J("ngIf",s.editorInsideTargetObj&&s.editorInsideTargetObj.quest.id===e.id),t.xp6(1),t.Q6J("ngIf",s.editorInsideTargetObj&&s.editorInsideTargetObj.quest.id===e.id),t.xp6(3),t.Q6J("ngIf",!t.lcZ(10,16,s.examObj)),t.xp6(3),t.Q6J("ngClass",t.VKq(22,tB,s.isMobile)),t.xp6(1),t.hij("",t.lcZ(14,18,"lang_testbank_update_exam_point"),":"),t.xp6(2),t.s9C("value",s.isDivinePointForQuestion?s.parseNumberFixed(null!==(l=e.scorePerQuestion)&&void 0!==l?l:0,8):e.scorePerQuestion),t.Q6J("ngClass",t.VKq(24,eB,null==e.scorePerQuestion||e.scorePerQuestion<0))("decimal",!0),t.xp6(2),t.Q6J("ngIf",s.editorInsideTargetObj&&s.editorInsideTargetObj.quest.id===e.id)("ngIfThen",a)("ngIfElse",r),t.xp6(5),t.Q6J("ngIf",e.showResultMedia)}}function iB(n,o){1&n&&t._UZ(0,"azt-loading-handle-data",136),2&n&&t.Q6J("content","lang_testbank_export_pdf_by_user_processing")}function oB(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",12)(2,"div",13,14),t._UZ(4,"input",15),t.TgZ(5,"flexed-on-the-top",16)(6,"div",17)(7,"div",18),t.YNc(8,gU,3,3,"span",19),t.TgZ(9,"input",20),t.NdJ("keyup.enter",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.actionNextToQuestion())})("ngModelChange",function(a){t.CHM(e);const r=t.oxw(3);return t.KtG(r.nexToQuestionConf.value=a)})("focus",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.toggleTooltipNextToQuestion(!0))})("focusout",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.toggleTooltipNextToQuestion(!1))}),t.qZA(),t.TgZ(10,"button",21),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.actionNextToQuestion())}),t._uU(11),t.ALo(12,"mytranslate"),t.qZA()(),t.TgZ(13,"div",22)(14,"button",23),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.openDialogSpitPoint())}),t._uU(15),t.ALo(16,"mytranslate"),t.qZA(),t.TgZ(17,"button",24),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.goBack())}),t._uU(18),t.ALo(19,"mytranslate"),t.qZA(),t.TgZ(20,"button",25),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.handleSubmitSaveExam())}),t._uU(21),t.ALo(22,"mytranslate"),t.qZA()()()(),t.TgZ(23,"button",24),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.goBack())}),t._uU(24),t.ALo(25,"mytranslate"),t.qZA(),t.TgZ(26,"button",25),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.handleSubmitSaveExam())}),t._uU(27),t.ALo(28,"mytranslate"),t.qZA(),t.TgZ(29,"button",26),t.O4$(),t.TgZ(30,"svg",27),t._UZ(31,"circle",28)(32,"circle",29)(33,"circle",30),t.qZA()()(),t.kcU(),t.TgZ(34,"div",31)(35,"div",32)(36,"div",33),t.YNc(37,xU,3,3,"div",34),t.YNc(38,bU,13,11,"div",35),t.YNc(39,CU,6,4,"div",36),t.YNc(40,AU,4,4,"div",37),t.TgZ(41,"div",38),t._UZ(42,"azt-exam-header-box",39),t.YNc(43,nB,23,26,"div",40),t.qZA()()()(),t._UZ(44,"azt-scroll-to-top-bottom",41),t.qZA(),t.YNc(45,iB,1,1,"azt-loading-handle-data",42),t.BQk()}if(2&n){const e=t.oxw(3),i=t.MAs(7);t.xp6(4),t.Q6J("formControl",e.nameExamInp),t.xp6(1),t.Q6J("hidden",e.fixToTopTop>=-100)("colorBackground","#f0f8ffe8"),t.xp6(3),t.Q6J("ngIf",!e.isMobile),t.xp6(1),t.Q6J("min",1)("ngModel",e.nexToQuestionConf.value),t.xp6(2),t.Oqu(t.lcZ(12,23,"lang_auto_den")),t.xp6(4),t.Oqu(t.lcZ(16,25,"lang_testbank_update_exam_split_points")),t.xp6(3),t.Oqu(t.lcZ(19,27,"lang_button_cancel")),t.xp6(2),t.Q6J("disabled",""===e.nameExamInp.value.trim()||e.nameExamInp.errors||e.invalidTypeQuestionConfig.length>0),t.xp6(1),t.Oqu(t.lcZ(22,29,"lang_button_save")),t.xp6(3),t.Oqu(t.lcZ(25,31,"lang_button_cancel")),t.xp6(2),t.Q6J("disabled",""===e.nameExamInp.value.trim()||e.nameExamInp.errors||e.invalidTypeQuestionConfig.length>0),t.xp6(1),t.Oqu(t.lcZ(28,33,"lang_button_save")),t.xp6(2),t.Q6J("matMenuTriggerFor",i),t.xp6(8),t.Q6J("ngIf",0===e.questionObjs.length),t.xp6(1),t.Q6J("ngIf",e.questionObjs.length>0),t.xp6(1),t.Q6J("ngIf",e.invalidTypeQuestionConfig.length>0),t.xp6(1),t.Q6J("ngIf",e.cropperData&&e.cropperData.length>0),t.xp6(2),t.Q6J("examObj",e.examObj),t.xp6(1),t.Q6J("ngForOf",e.questionObjs),t.xp6(1),t.Q6J("isScrollToTop",!0),t.xp6(1),t.Q6J("ngIf",e.isLoadingSave)}}function aB(n,o){1&n&&(t.TgZ(0,"div",137)(1,"span",138),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"lang_testbank_update_exam_not_access_rights"),"! "))}function rB(n,o){if(1&n&&(t.ynx(0),t.YNc(1,oB,46,35,"ng-container",1),t.ALo(2,"editPermission"),t.YNc(3,aB,4,3,"ng-template",null,11,t.W1O),t.BQk()),2&n){const e=t.MAs(4),i=t.oxw(2);t.xp6(1),t.Q6J("ngIf",t.xi3(2,2,i.examObj,"exam"))("ngIfElse",e)}}function sB(n,o){if(1&n&&t.YNc(0,rB,5,5,"ng-container",3),2&n){const e=t.oxw();t.Q6J("ngIf",e.examObj)}}function lB(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"azt-exam-info",139),t.NdJ("closeDialog",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.closeDialogExamInfo())})("goToQuestion",function(a){t.CHM(e);const r=t.oxw();return t.KtG(r.onHandleGoToQuestion(a))}),t.qZA()()}if(2&n){const e=t.oxw();let i;t.xp6(1),t.Q6J("startIndexQuestion",null!==(i=null==e.examObj?null:e.examObj.startQuestionIndex)&&void 0!==i?i:1)("data",e.dataExamInfo)}}let cB=(()=>{class n extends St.Q{onWindowScroll(){let e=document.getElementById("np-name-root");window.pageYOffset>30?e?.classList.add("fixToolBar"):e?.classList.remove("fixToolBar"),this.downPageElement&&(this.fixToTopTop=this.downPageElement.nativeElement.getBoundingClientRect().top)}cancelEditQuest(){if(this.editorInsideTargetObj){if(this.editorInsideTargetObj.event.content)return void this.sAztDialogService.open(_R,{width:"600px",data:{content:this.sAztTranslateService.myTranslateInstant("lang_cms_common_confirm_cancel_edit")},restoreFocus:!1}).afterClosed().subscribe(i=>{i&&(this.editorInsideTargetObj=void 0)});this.editorInsideTargetObj=void 0}}startEditQuest(e){this.editorInsideTargetObj={quest:e,event:{}}}confirmProcessQuest(e){return new Promise(i=>{let a=this.commonService.myTranslateInstant("lang_auto_xay_ra_loi_trong_qua_trinh_xu_ly_hinh_anh_cua_de")??"";i(this.questionSaveService.convertQuestions([e],[],(r,s=a)=>{this.isLoadingSave=!1,this.showErrorSnack(s)}))})}onSaveEditOnlyQuest(){if(!this.editorInsideTargetObj?.out)return void this.errorStatusObj("Kh\xf4ng t\xecm th\u1ea5y d\u1eef li\u1ec7u c\u1ea7n l\u01b0u");const e=this.editorInsideTargetObj.out;this.isLoadingSave=!0;const i={id:e.id,groupId:e.groupInfo?.groupId??0,name:"C\xe2u h\u1ecfi t\u1ea1o t\u1eeb editor m\u1edbi",isImage:1,questionContent:e.content,answerMedia:e.help,questionText:e.questionText,answerType:e.answerType,answerConfig:JSON.stringify(e.answers.map(a=>({key:a.key,content:a.content}))),answerResult:JSON.stringify(e.answers.filter(a=>a.isTrue).map(a=>a.key)),tags:e.tags.map(a=>a.code??""),version:"4",mediaId:e.mediaId??0,isFixAns:e.isFixAns?1:0,groupType:e.groupType,mediaMeta:JSON.stringify({renderedStr:e.groupInfo?.groupContent})};this.confirmProcessQuest(i).then(()=>{this.questionService.apiQuestionsIdPut(e.id,{id:0,groupId:i.groupId??0,name:i.name,metadata:i.metadata,isImage:i.isImage,questionContent:i.questionContent,answerMedia:i.answerMedia,questionText:i.questionText,answerType:i.answerType??1,answerConfig:i.answerConfig,coordinates:i.coordinates,answerResult:i.answerResult,tags:i.tags,mediaId:i.mediaId??0,mediaMeta:"",attachments:i.attachments,version:i.version,isFixAns:i.isFixAns??0,groupType:i.groupType}).subscribe(r=>{1==r.success?(this.showSuccessSnack("lang_auto_chinh_sua_cau_hoi_thanh_cong"),document.location.reload()):this.showErrorSnack(r.message??"")})})}setValidationToQuestionId(e,i){this.invalidValidationQuestionIds.includes(e)?i||(this.invalidValidationQuestionIds=this.invalidValidationQuestionIds.filter(a=>a!=e)):i&&this.invalidValidationQuestionIds.push(e)}scrollDown(){let e=document.getElementById("azt-layout");e&&e.scrollIntoView()}openDialogWaring(e){this.commonService.getTranslate(e).subscribe(i=>{this.sAztDialogService.open(Sp.C,{data:{isShow:!0,content:i},restoreFocus:!1,width:"500px"})})}setTag(e,i){e.tags=i?[i]:[]}applyTagAll(e){for(let a=this.questionObjs.indexOf(e)+1;a<this.questionObjs.length;a++)this.questionObjs[a].tags=e.tags}openDialogConfigExpandInfo(){this.sAztDialogService.open(a5,{data:this.expandInfoParse,restoreFocus:!1}).afterClosed().subscribe(i=>{this.closeDialogConfigExpandInfo(i)})}closeDialogConfigExpandInfo(e){void 0!==e&&(this.expandInfoParse=e,this.handleSubmitSaveExam())}openDialogSpitPoint(){let e=this.trueFalseCounter(this.questionObjs),i=this.fillAnswerCounter(this.questionObjs),a=this.questionObjs.length-e-i,r={multipleQuestion:e,multiplePoint:parseFloat(this.maxPointCounter(this.questionObjs)).toFixed(4),fillQuestion:i,fillPoint:parseFloat(this.maxPointFillAnswerCounter(this.questionObjs)).toFixed(4),essayQuestion:a,essayPoint:parseFloat(this.essayPointCounter(this.questionObjs)).toFixed(4)};this.sAztDialogService.open(Of,{data:r,width:"500px",restoreFocus:!1}).afterClosed().subscribe(l=>{l&&this.setPointTest(l)})}removeQuestion(e,i){this.sAztDialogService.open(r5,{width:"750px",data:{questionObj:e,examObj:this.examObj,examId:this.examId,index:i},restoreFocus:!1,autoFocus:!1}).afterClosed().subscribe(s=>{s&&this.getData()})}showFeedbackQuestionDialog(e){this.sAztDialogService.open(tn.V,{width:"750px",data:{questionObj:e,role:"TEACHER",applyType:"MATRIX_QUESTION"},restoreFocus:!1,autoFocus:!1}).afterClosed().subscribe(r=>{})}get invalidTypeQuestionConfig(){return this.questionObjs.filter(e=>null==e.scorePerQuestion||e.scorePerQuestion<0||!isFinite(e.scorePerQuestion??0)||!e.answerResult?.length&&this.answerTypeService.isFillAnswer(e))}goToQuestionAll(e,i=150){var a=document.getElementById("question_"+e);a&&a.scrollIntoView()}enableScroll(){window.onscroll=()=>{}}disableScroll(){let e=window.pageYOffset||document.documentElement.scrollLeft,i=window.pageXOffset||document.documentElement.scrollTop;window.onscroll=()=>{window.scrollTo(e,i)}}onShowFile(e){var i=this.sAztDialogService.open(_c.q,{maxWidth:"100vw",maxHeight:"100vh",height:"100%",width:"100%",data:{fileOption:{url:e}},restoreFocus:!1});this.disableScroll(),i.afterClosed().subscribe(a=>{a&&this.enableScroll()})}goBack(){this.commonService.myNavigationBySpecialQueryString(this.backToLink)}showAllResultQuestion(){this.defaultShowResultMedia=!this.defaultShowResultMedia}convertData(e){for(var i=[],a=0;a<e.length;a++)e[a].content&&i.push(e[a].content);return JSON.stringify(i)}keepAnswerResult(e){for(var i=[],a=0;a<e.length;a++)i.push({id:e[a].id??0,answerResult:JSON.stringify(e[a].answerResult),scorePerQuestion:e[a].scorePerQuestion??0,tags:e[a].tags?.map(r=>r.code??"")});return i}handleSubmitSaveExam(){if(!0!==this.isLoadingSave)if(this.examObj&&this.permissionService.hasEditPermission("exam",this.examObj)){let e=!1,i=0;this.questionObjs.forEach(a=>{3!=a.answerType&&0==a.answerResult?.length?(this.setValidationToQuestionId(a.id,!0),e=!0,document.getElementById("question_"+i)?.scrollIntoView()):this.setValidationToQuestionId(a.id,!1),i++}),this.newAnswerList.length>0?this.newAnswerList.forEach(a=>{var r=this.questionObjs.filter(s=>s.id==a.id);null!=r&&r.length>0&&!this.answerTypeService.isFillAnswer(r[0])&&a.answerResultParse&&a.answerResultParse.length>0&&(a.answerResult=this.convertData(a.answerResultParse??[]),a.tags=r[0].tags?.map(s=>s.code??""))}):this.newAnswerList=this.keepAnswerResult(this.questionObjs),e?this.showErrorSnack("lang_auto_vui_long_nhap_dap_an_cho_cau_hoi"):(this.isLoadingSave=!0,this.waitDestroy(this.questionService.apiQuestionUpdateAnswerResultsWithExamNamePost({examId:this.examId,examName:this.nameExamInp.value,answerResults:this.newAnswerList,expandInfoObj:this.expandInfoParse}).subscribe(r=>{1==r.success?(this.newAnswerList=new Array,this.examObj&&(this.examObj.expandInfo=this.serializeJson(this.expandInfoParse)),this.successStatusObj("lang_cms_update_success",!0),this.isLoadingSave=!1):(this.newAnswerList=new Array,this.errorStatusObj(r.message??"",!0),this.isLoadingSave=!1)})))}else this.showErrorSnack("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay")}setAnswer(e){var i=this.newAnswerList.filter(l=>l.id==e.idQuestion);if(null!=e.index&&1==e.type){var a={id:e.idQuestion,answerResultParse:[{index:e.index,content:e.isImage?e.event.content:e.event.key}],scorePerQuestion:e.score,answerResult:"",tags:[]};if(i&&i.length>0)for(var r=0;r<this.newAnswerList.length;r++)this.newAnswerList[r].id==a.id&&(this.newAnswerList[r].answerResultParse?.push(a.answerResultParse?.[0]??{}),this.newAnswerList[r].answerResult=JSON.stringify(this.newAnswerList[r].answerResultParse));else a.answerResult=JSON.stringify(a.answerResultParse),this.newAnswerList.push(a);this.changeStatusAnswer(a,e.index,!0,e.isImage)}else if(null!=e.index&&2==e.type){var s={id:e.idQuestion,answerResult:JSON.stringify([{index:e.index,content:e.isImage?e.event.content:e.event.key}]),answerResultParse:[{index:e.index,content:e.isImage?e.event.content:e.event.key}],scorePerQuestion:e.score,tags:[]};if(i&&i.length>0)for(r=0;r<this.newAnswerList.length;r++)this.newAnswerList[r].id==s.id&&(this.newAnswerList[r].answerResult=s.answerResult,this.newAnswerList[r].answerResultParse=s.answerResultParse);else this.newAnswerList.push(s);this.changeStatusAnswer(s,e.index,!1,e.isImage)}}setAnswerType4(e){const i=(e.event.value||"").trim();if(i){var a=this.newAnswerList.filter(r=>r.id==e.questionId);this.questionObjs.forEach(r=>{if(r.id==e.questionId){i.split("|").forEach(c=>{r.answerResult?.push(c.trim())}),r.onChanges=!0;var s={id:r.id,answerResult:JSON.stringify(r.answerResult),scorePerQuestion:r.scorePerQuestion??0,tags:r.tags?.map(c=>c.code??"")};null!=a&&a.length>0?this.newAnswerList.forEach(c=>{c.id==e.questionId&&(c.answerResult=JSON.stringify(r.answerResult))}):this.newAnswerList.push(s)}})}this.questionObjs.forEach(r=>{this.setValidationToQuestionId(r.id,3!=r.answerType&&0==r.answerResult?.length)}),e.event.input.value=""}removeAnswerType4(e){var i=this.newAnswerList.filter(a=>a.id==e.questionId);this.questionObjs.forEach(a=>{if(a.id==e.questionId){var r=a.answerResult?.indexOf(e.answerObj)??0;if(r>=0){a.answerResult?.splice(r,1);var s={id:a.id,answerResult:JSON.stringify(a.answerResult),scorePerQuestion:a.scorePerQuestion??0,tags:a.tags?.map(l=>l.code??"")};null!=i&&i.length>0?this.newAnswerList.forEach(l=>{l.id==e.questionId&&(l.answerResult=JSON.stringify(a.answerResult))}):this.newAnswerList.push(s)}}})}changeStatusAnswer(e,i,a,r){a||this.questionObjs.forEach(s=>{if(s.id==e.id&&s.answers&&s.answers.length>0){for(var l=0;l<s.answers.length;l++)s.answers[l].isTrue=!1;s.answers[i].isTrue=!0}})}setPointTest(e){let i=Number(e?.multiplePoint)/this.countTrueFalseQuestion,a=Number(e?.fillPoint)/this.countFillAnswerQuestion,r=0;this.questionObjs.length-this.countTrueFalseQuestion-this.countFillAnswerQuestion>0&&(r=Number(e?.essayPoint)/(this.questionObjs.length-this.countTrueFalseQuestion-this.countFillAnswerQuestion));for(let s=0;s<this.questionObjs.length;s++){let l=!1;if(this.answerTypeService.isOneChoiceAnswer(this.questionObjs[s])){this.questionObjs[s].scorePerQuestion=Number(this.parseNumberFixed(i,8));for(let c=0;c<this.newAnswerList.length;c++)if(this.newAnswerList[c].id==this.questionObjs[s].id){this.newAnswerList[c].scorePerQuestion=Number(this.parseNumberFixed(i,8)),l=!0;break}}else if(this.answerTypeService.isEssayAnswer(this.questionObjs[s])){this.questionObjs[s].scorePerQuestion=Number(this.parseNumberFixed(r,8));for(let c=0;c<this.newAnswerList.length;c++)if(this.newAnswerList[c].id==this.questionObjs[s].id){this.newAnswerList[c].scorePerQuestion=Number(this.parseNumberFixed(r,8)),l=!0;break}}else if(this.answerTypeService.isFillAnswer(this.questionObjs[s])){this.questionObjs[s].scorePerQuestion=Number(this.parseNumberFixed(a,8));for(let c=0;c<this.newAnswerList.length;c++)if(this.newAnswerList[c].id==this.questionObjs[s].id){this.newAnswerList[c].scorePerQuestion=Number(this.parseNumberFixed(a,8)),l=!0;break}}if(!l){let c={id:this.questionObjs[s].id??0,answerResult:JSON.stringify(this.questionObjs[s].answerResult),scorePerQuestion:this.questionObjs[s].scorePerQuestion??0,tags:[]};this.newAnswerList.push(c)}}this.showSuccessSnack("lang_auto_chia_diem_thanh_cong")}setPointQuestion(){var e=this.form.getRawValue();if(e.totalQuestion<=this.countTrueFalseQuestion+this.countFillAnswerQuestion){this.invalidTotalQuestion=!1;var i=Number(e.maxScore)/e.totalQuestion;this.questionObjs.forEach(a=>{if(this.answerTypeService.isOneChoiceAnswer(a)||this.answerTypeService.isFillAnswer(a)){a.scorePerQuestion=i;for(var r=0;r<this.newAnswerList.length;r++)if(this.newAnswerList[r].id==a.id){this.newAnswerList[r].scorePerQuestion=i;break}}}),this.isDivinePointForQuestion=!0,this.showSuccessSnack("lang_auto_chia_diem_thanh_cong")}else this.invalidTotalQuestion=!0,this.showErrorSnack("lang_auto_so_cau_ban_nhap_da_vuot_qua_so_cau_trac_nghiem_trong_de_thi")}setScore(e,i){for(let r=0;r<this.questionObjs.length;r++){let s=isNaN(parseFloat(e.target.value))?void 0:parseFloat(e.target.value);if(this.questionObjs[r]&&this.questionObjs[r].id==i&&(this.questionObjs[r].scorePerQuestion=s,this.newAnswerList.length>0)){let l=!1;for(var a=0;a<this.newAnswerList.length;a++)if(this.newAnswerList[a].id==this.questionObjs[r].id){this.newAnswerList[a].scorePerQuestion=s??0,l=!0;break}if(!l){let c=Array.isArray(this.questionObjs[r].answerResult)&&this.questionObjs[r].answerResult?.length?this.questionObjs[r].answerResult?.[0]:"";this.newAnswerList.push({id:this.questionObjs[r].id??0,answerResult:JSON.stringify(this.questionObjs[r].answerResult),answerResultParse:[{content:c}],scorePerQuestion:parseFloat(e.target.value),tags:[]})}}}}trueFalseCounter(e){var i=0;return e.forEach(a=>{this.answerTypeService.isOneChoiceAnswer(a)&&i++}),i}fillAnswerCounter(e){var i=0;return e.forEach(a=>{this.answerTypeService.isFillAnswer(a)&&i++}),i}maxPointCounter(e){var i=0;return e.forEach(a=>{this.answerTypeService.isOneChoiceAnswer(a)&&(i+=a.scorePerQuestion??0)}),this.parseNumberFixed(i,4)}maxPointFillAnswerCounter(e){var i=0;return e.forEach(a=>{this.answerTypeService.isFillAnswer(a)&&(i+=a.scorePerQuestion??0)}),this.parseNumberFixed(i,4)}essayPointCounter(e){var i=0;return e.forEach(a=>{!this.answerTypeService.isOneChoiceAnswer(a)&&!this.answerTypeService.isFillAnswer(a)&&(i+=a.scorePerQuestion??0)}),i.toString()}parseNumberFixed(e,i){let a=Number(parseFloat(e.toString()).toFixed(i));return isNaN(a)?"0":parseFloat(e.toString()).toFixed(i)}convertErrsResultQuestions(){for(let e=0;e<this.questionObjs.length;e++)null===this.questionObjs[e].answerResult&&(this.questionObjs[e].answerResult=[])}changeAnswerResultStatus(e){var i=[];let a=0;return e.forEach(r=>{if(r.index=a,r.isRoleTeacher=!0,a++,r.answers&&r.answerResult)for(let s=0;s<r.answers.length;s++)r.answers[s].questionId=r.id,r.answers[s].checked=!1,r.answers[s].isTrue=!!this.checkAnswerResult(r.answers[s].key??"",r.answerResult);i.push(r)}),i}checkAnswerResult(e,i){var a=!1;for(var r in i){if(i[r]==e){a=!0;break}a=!1}return a}getQuestionCanFeedback(){let e=[];this.questionObjs.forEach(i=>{i.id&&!this.commonService.isExistInArray(e,i.id)&&e.push(i.id)}),this.waitDestroy(this.testMarketFeedbackService.apiTestMarketFeedbacksQuestionsGet(this.examId,e.join(",")).subscribe(i=>{if(1==i.success&&i.data?.objs?.length){let a=i.data?.objs??[];for(let r=0;r<this.questionObjs.length;r++)a.forEach(s=>{this.questionObjs[r].id==s.questionId&&(this.questionObjs[r].enableFeedback=s.allowFeedback)});this.successStatusObj(),setTimeout(()=>{this.scrollToQuestion()},200),setTimeout(()=>{this.scrollToQuestion()},500)}else this.errorStatusObj(i.message??"",!0)}))}goToOriginalQuestion(e){const i=`/admin/testbank/update-exam/${this.examObj?.categoryId??0}/${this.examObj?.id}`+(this.backToLink?"?backto="+encodeURIComponent(this.backToLink):"");this.myNavigationWithQueryString(`/admin/testbank/update-exam/${e.orgQuestionObj?.orgCategoryId}/${e.orgQuestionObj?.orgExamId}`,`?backto=${encodeURIComponent(i)}&questionId=${e.orgQuestionObj?.orgQuestionId}`)}getData(){this.initStatusObj(),this.waitDestroy(this.examService.apiExamGetQuestionsIdGet(this.examId,1).subscribe(i=>{if(1==i.success){this.examObj=i.data?.examObj,this.expandInfoParse=this.commonService.castJsonToObj(this.examObj?.expandInfo??"{}")??{},this.firstInGroupIndexes=this.commonService.myParseJson(this.examObj?.firstInGroupIndexes??"")??[],this.nameExamInp.setValue(this.examObj?.name??"");let a=this.commonService.castJsonToClassObjs(yt.v,JSON.stringify(i.data?.questionObjs));const r=this.changeAnswerResultStatus(a??[]);this.followerRenderQuest.setNumQuest(r.length);const s=i.data?.orgQuestionObjs??[];this.questionObjs=r;for(let l=0;l<this.questionObjs.length;l++)for(let c=0;c<s.length;c++)s[c].questionId===this.questionObjs[l].id&&(this.questionObjs[l].orgQuestionObj=s[c]);this.cropperData=this.commonService.myParseJson(this.examObj?.labelsUrl??"")??[],this.docxService.replaceCanvasBackgroundTS(this.questionObjs),this.countTrueFalseQuestion=this.trueFalseCounter(this.questionObjs),this.countFillAnswerQuestion=this.fillAnswerCounter(this.questionObjs),this.convertErrsResultQuestions(),setTimeout(()=>{this.getQuestionCanFeedback()},200),this.form=new f.cw({maxScore:new f.NI(this.maxPointCounter(this.questionObjs),{nonNullable:!0,validators:[f.kI.required]}),totalQuestion:new f.NI(this.trueFalseCounter(this.questionObjs),{nonNullable:!0,validators:[f.kI.required]})}),this.questionService.apiQuestionGetTagsGet().subscribe(l=>{1==l.success&&l.data&&(this.questionTags=l.data.objs??[])})}else this.showErrorSnack(i.message??"")}))}openExamInfoDialog(){this.dataExamInfo={isShow:!0,obj:this.questionObjs}}closeDialogExamInfo(){this.dataExamInfo.isShow=!1}toggleStartNextToQuestion(){this.nexToQuestionConf.showInput=!this.nexToQuestionConf.showInput}toggleTooltipNextToQuestion(e){this.nexToQuestionConf.showTooltip=e}actionNextToQuestion(){if(void 0===this.nexToQuestionConf.value)return;const e=document.getElementById("questViewBoxByLabel"+(this.nexToQuestionConf.value-1));e?e.scrollIntoView():this.showErrorSnack(this.commonService.myTranslateInstant("lang_auto_khong_tim_thay_cau_can_di_chuyen_den")??"")}scrollToQuestion(){const e=this.commonService.getMyQueryParam("questionId"),i=document.getElementById("question_view_"+e);i&&i.scrollIntoView()}onHandleGoToQuestion(e){let i=this.questionObjs?.[e-1]?.id??0;if(i){const a=document.getElementById("question_view_"+i);if(!a)return;a.scrollIntoView()}}ngOnInit(){this.waitDestroy((0,dt.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.cur_cateId=Number(this.commonService.getMyParam(this.activeRoute,"cat_id"))??0,this.examId=Number(this.commonService.getMyParam(this.activeRoute,"id"))??0;var e=this.commonService.getMyQueryParam("backto");this.backToLink=e||"/admin/testbank/document-management/0/"+(null!=this.cur_cateId?this.cur_cateId:0)+"/1",this.getData()})),this.commonService.translateMetaData({title:"lang_cms_test_update_exam_title",description:"lang_cms_test_update_exam_description",image:"lang_cms_test_image"}),super.ngOnInit()}constructor(e,i,a,r,s,l,c,d,h,_){super(),this.sAztDialogService=e,this.questionService=i,this.questionSaveService=a,this.examService=r,this.activeRoute=s,this.permissionService=l,this.docxService=c,this.answerTypeService=d,this.testMarketFeedbackService=h,this.sAztTranslateService=_,this.questionTags=[],this.questionObjs=[],this.followerRenderQuest=new u.p,this.defaultShowResultMedia=!1,this.cur_cateId=0,this.examId=0,this.firstInGroupIndexes=[],this.nameExamInp=new f.NI("",{nonNullable:!0,validators:[or._.noWhiteSpace]}),this.newAnswerList=[],this.isMobile=this.commonService.isMobileOrTable(),this.backToLink="",this.countTrueFalseQuestion=0,this.countFillAnswerQuestion=0,this.invalidTotalQuestion=!1,this.isDivinePointForQuestion=!1,this.separatorKeysCodes=[up.K5],this.selectable=!0,this.removable=!0,this.addOnBlur=!0,this.isLoadingSave=!1,this.dataExamInfo={isShow:!1},this.expandInfoParse={},this.nexToQuestionConf={value:1,showInput:!1,showTooltip:!1},this.invalidValidationQuestionIds=[],this.fixToTopTop=0,this.form=new f.cw({maxScore:new f.NI("",{nonNullable:!0,validators:[f.kI.required]}),totalQuestion:new f.NI(0,{nonNullable:!0,validators:[f.kI.required]})})}onChangeContentEditor(e){this.editorInsideTargetObj&&(this.editorInsideTargetObj.out=e,this.editorInsideTargetObj.event.content=!0)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Fi.C),t.Y36(Ke.aE),t.Y36(xa),t.Y36(Ke.Oe),t.Y36(O.gz),t.Y36(S.j),t.Y36(tx.n),t.Y36(hr.i),t.Y36(yp.nC),t.Y36(s5.W))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-update-exam"]],viewQuery:function(e,i){if(1&e&&t.Gf(_U,5),2&e){let a;t.iGM(a=t.CRH())&&(i.downPageElement=a.first)}},hostBindings:function(e,i){1&e&&t.NdJ("scroll",function(r){return i.onWindowScroll(r)},!1,t.Jf7)},features:[t.qOj],decls:24,vars:21,consts:[[3,"headerTitle","headerBackToLink"],[4,"ngIf","ngIfElse"],["doneLoading",""],[4,"ngIf"],["xPosition","before"],["filterMenu","matMenu"],[1,"dropdown-menu","show","relative","w-64"],[1,"dropdown-content"],["azt-track-service","view-share-question-okOXhhqB2o",1,"dropdown-item","cursor-pointer",3,"click"],["azt-track-service","view-share-question-wBBhYqj6qo",1,"dropdown-item","cursor-pointer",3,"click"],["azt-track-service","view-share-question-gm18o_AtnP",1,"dropdown-item","cursor-pointer",3,"click"],["noPermission",""],["id","box-create-action",1,"simple-exam-box"],["id","down-page",1,"flex",2,"width","100%","margin","20px auto"],["downPage",""],["type","text",1,"inputMobile","form-control","mr-2",3,"formControl"],[3,"hidden","colorBackground"],[1,"flex",2,"justify-content","space-between","width","100%"],[1,"next-to-question","rounded"],["class","font-medium ml-1","style","width: auto",4,"ngIf"],["appOnlyNumber","","type","number",1,"input-control-fix-top","inputMobile","form-control",3,"min","ngModel","keyup.enter","ngModelChange","focus","focusout"],["azt-track-service","update-exam-Z2-pIpbAtb",1,"btn","btn-set-score","mr-1",2,"height","30px",3,"click"],[1,"flex"],["azt-track-service","update-exam-VpkBJtDTEr",1,"btn","btn-set-score","mr-2",3,"click"],["azt-track-service","update-exam-Z_5jMqg7e",1,"btn","btn-reload","mr-2",3,"click"],["azt-track-service","update-exam-SzWhHAfWm",1,"btn","btn-save",3,"disabled","click"],["azt-track-service","update-exam-SzWhHAfWm",1,"btn","btn-filter","ml-2",3,"matMenuTriggerFor"],["_ngcontent-ng-c2390875836","","xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-more-vertical","w-5","h-5","text-slate-500"],["_ngcontent-ng-c2390875836","","cx","12","cy","12","r","1"],["_ngcontent-ng-c2390875836","","cx","19","cy","12","r","1"],["_ngcontent-ng-c2390875836","","cx","5","cy","12","r","1"],[1,"container-fluid","mb-5","mt-3"],[1,"block-cols-12-full","m-0"],["id","box-left-file",1,"box-file",2,"width","100%"],["class","box-control text-center",4,"ngIf"],["class","flex","style","justify-content: space-between; align-items: center",4,"ngIf"],["class","p-2 mt-2 mb-2 alert alert-danger text-center","style","align-items: center",4,"ngIf"],["id","box-cropper-data","class","mt-3",4,"ngIf"],[1,"list-question-box","mt-3"],[1,"mb-1",3,"examObj"],["class","list-question-box-item mb-2","style","position: relative",3,"ngClass",4,"ngFor","ngForOf"],[3,"isScrollToTop"],[3,"content",4,"ngIf"],[1,"font-medium","ml-1",2,"width","auto"],[1,"box-control","text-center"],[1,"flex",2,"justify-content","space-between","align-items","center"],[1,"next-to-question","rounded","shadow","py-1","px-2",2,"display","inline-block"],[1,"font-medium",2,"width","auto"],["appOnlyNumber","","type","number",1,"inputMobile","form-control",2,"width","80px","text-align","left","padding","10px",3,"min","ngModel","keyup.enter","ngModelChange","focus","focusout"],["azt-track-service","update-exam-Z2-pIpbAtb",1,"btn","btn-next-to-question",3,"click"],["azt-track-service","update-exam-VpkBJtDTEr",1,"btn","btn-set-score",3,"click"],[1,"p-2","mt-2","mb-2","alert","alert-danger","text-center",2,"align-items","center"],[2,"vertical-align","bottom"],[1,"error-block"],[4,"ngFor","ngForOf"],["azt-track-service","update-exam-CZTBs2UHWQ",1,"clickable","mt-1","ml-1",3,"matTooltip","click"],["class","mt-1",4,"ngIf"],[1,"mt-1"],["id","box-cropper-data",1,"mt-3"],["azt-track-service","update-exam--rL2wEApLv",1,"text-primary",3,"click"],["class","mx-1","style","color: #6c6c6c",4,"ngIf"],[1,"mx-1",2,"color","#6c6c6c"],[1,"list-question-box-item","mb-2",2,"position","relative",3,"ngClass"],[1,"w-100",3,"id"],[3,"id"],[1,"edit-question-header","box"],[1,"edit-question-header-left"],["azt-track-service","update-exam-editor-SYwtBjaMF","class","btn btn-sm p-1 pl-5 pr-5","matTooltipShowDelay","200",3,"click",4,"ngIf"],["azt-track-service","update-exam-editor-ssFa83VHZf","class","btn btn-sm editor-btn-flex p-1 pl-5 pr-5 ml-1 btn-azt-primary","matTooltipShowDelay","200",3,"disabled","click",4,"ngIf"],[1,"edit-question-header-center"],[1,"edit-question-header-right"],[1,"edit-question-header-point"],[2,"font-weight","500",3,"ngClass"],["type","text","appOnlyNumber","",1,"point-input","form-control",3,"ngClass","decimal","value","input"],[1,"card","question-card","mb-0","relative","box-shadow-none"],[4,"ngIf","ngIfThen","ngIfElse"],["aztEditorQuest",""],["normalQuestStandalone",""],["class","card question-card","style","box-shadow: none",4,"ngIf"],["azt-track-service","update-exam-editor-SYwtBjaMF","matTooltipShowDelay","200",1,"btn","btn-sm","p-1","pl-5","pr-5",3,"click"],["azt-track-service","update-exam-editor-ssFa83VHZf","matTooltipShowDelay","200",1,"btn","btn-sm","editor-btn-flex","p-1","pl-5","pr-5","ml-1","btn-azt-primary",3,"disabled","click"],["name","save",1,"mr-1",2,"display","flex","width","12px !important"],["style","width: 16px !important; height: 16px !important;","name","trash-2",3,"matTooltip","click",4,"ngIf"],[1,"edit-question-header-dr"],["class","fix-answer",3,"matTooltip",4,"ngIf"],["class","edit-question-header-dr",4,"ngIf"],[1,"edit-question-header-show-tags"],["class","box-service-type no-wrap",4,"ngIf"],["class","edit-question-header-tag",4,"ngIf"],["azt-track-service","update-exam-N7CP3yfuUp",1,"edit-question-header-content",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4",3,"ngClass"],["d","M4 13.5V4a2 2 0 0 1 2-2h8.5L20 7.5V20a2 2 0 0 1-2 2h-5.5"],["points","14 2 14 8 20 8"],["d","M10.42 12.61a2.1 2.1 0 1 1 2.97 2.97L7.95 21 4 22l.99-3.95 5.43-5.44Z"],["class","",4,"ngIf"],["style","width: 16px !important; height: 16px !important;","name","alert-octagon",3,"matTooltip","click",4,"ngIf"],["reportQTakeTest","",4,"ngIf"],["name","alert-octagon",2,"width","16px !important","height","16px !important",3,"matTooltip","click"],["reportQTakeTest",""],["azt-track-service","update-exam-5Q2j_re4X","matTooltipShowDelay","200",1,"btn","btn-sm","p-1","w-6","h-6",3,"matTooltip","click"],["name","alert-octagon"],["name","trash-2",2,"width","16px !important","height","16px !important",3,"matTooltip","click"],["azt-track-service","update-exam-QNh0Wct6N","matTooltipShowDelay","200",1,"btn","btn-sm","p-1","w-6","h-6",3,"matTooltip","click"],["name","trash-2"],[1,"fix-answer",3,"matTooltip"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide"],["x1","12","y1","17","x2","12","y2","22"],["d","M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z"],[1,"box-service-type","no-wrap"],[1,"first-text"],[1,"tag-chip",3,"removed"],["matChipRemove",""],[2,"font-size","15px"],[1,"edit-question-header-tag"],[3,"matMenuTriggerFor"],["d","M9 5H2v7l6.29 6.29c.94.94 2.48.94 3.42 0l3.58-3.58c.94-.94.94-2.48 0-3.42L9 5Z"],["d","M6 9.01V9"],["d","m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19"],["tags","matMenu"],[1,"dropdown-menu","show","relative","w-56"],[1,"dropdown-divider","border-slate-200","dark:border-darkmode-400"],["azt-track-service","update-exam-CZZ0b_rCyN",1,"dropdown-item","w-full",3,"disabled","click"],["azt-track-service","update-exam-mQam8bsKT2",1,"dropdown-item",3,"click"],[1,""],["azt-track-service","update-exam-Va0keXkLs",1,"edit-question-header-content","flex","items-center",3,"click"],[1,"w-4","h-4","inline-block",3,"ngClass"],["name","file-clock"],[3,"question","changeContentEditor","changeImageEditor",4,"ngIf"],[3,"question","changeContentEditor","changeImageEditor"],[1,"mb-0","relative","overflow-hidden",3,"examObj","questionObj","follower","curQuestionIndex","isShowExplain","isInvalidValidation","setAnswerType4UpdateEmit","removeAnswerType4Emit","setAnswerOnUpdateEmit"],[1,"card","question-card",2,"box-shadow","none"],["class","card-body pt-1 pb-1 pl-0 pr-0 MW-800",4,"ngIf"],[1,"card-body","pt-1","pb-1","pl-0","pr-0","MW-800"],["alt","question media",1,"img-fluid","img_respon",3,"src"],[1,"contentDocx",2,"max-width","80%","margin-left","10%"],[3,"innerHtml"],[3,"content"],[1,"alert","alert-danger","flex-center-box"],[1,"title-no-permission"],[3,"startIndexQuestion","data","closeDialog","goToQuestion"]],template:function(e,i){if(1&e&&(t.TgZ(0,"teacher-layout",0),t.ALo(1,"mytranslate"),t.YNc(2,fU,1,0,"azt-loading-effect",1),t.YNc(3,sB,1,1,"ng-template",null,2,t.W1O),t.qZA(),t.YNc(5,lB,2,2,"div",3),t.TgZ(6,"mat-menu",4,5)(8,"div",6)(9,"ul",7)(10,"li")(11,"span",8),t.NdJ("click",function(){return i.openDialogConfigExpandInfo()}),t._uU(12),t.ALo(13,"mytranslate"),t.qZA()(),t.TgZ(14,"li")(15,"span",9),t.NdJ("click",function(){return i.showAllResultQuestion()}),t._uU(16),t.ALo(17,"mytranslate"),t.ALo(18,"mytranslate"),t.ALo(19,"mytranslate"),t.qZA()(),t.TgZ(20,"li")(21,"span",10),t.NdJ("click",function(){return i.openExamInfoDialog()}),t._uU(22),t.ALo(23,"mytranslate"),t.qZA()()()()()),2&e){const a=t.MAs(4);t.Q6J("headerTitle",t.lcZ(1,9,"lang_testbank_update_exam_exam"))("headerBackToLink",i.backToLink),t.xp6(2),t.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a),t.xp6(3),t.Q6J("ngIf",i.dataExamInfo.isShow),t.xp6(7),t.hij(" ",t.lcZ(13,11,"lang_core_exam_config_question_label")," "),t.xp6(4),t.AsE(" ",0==i.defaultShowResultMedia?t.lcZ(17,13,"lang_testbank_update_exam_show"):t.lcZ(18,15,"lang_testbank_update_exam_hide")," ",t.lcZ(19,17,"lang_testbank_update_exam_explain")," "),t.xp6(6),t.hij(" ",t.lcZ(23,19,"lang_auto_thong_tin_de_thi")," ")}},dependencies:[D.mk,D.sg,D.O5,yr.z2,yr.iO,yr.qH,Jo.Hw,Ii.VK,Ii.p6,Mi.gM,f.Fj,f.wV,f.JJ,f.qQ,f.On,f.oH,si.l,qr.Y,Df,tg.M,f5,g5,n4.s,x5,pU,fo._,C.Nh5,jt.JV,jt.QN,jt.Pf,jt.CL],styles:["#box-create-action[_ngcontent-%COMP%]   #resizeBox[_ngcontent-%COMP%]{margin-left:50%;width:10px;position:fixed;height:100vh;cursor:col-resize}#box-create-action[_ngcontent-%COMP%]   #resizeBox[_ngcontent-%COMP%]   .resizeContent[_ngcontent-%COMP%]{height:100vh;width:10px}#box-create-action[_ngcontent-%COMP%]   .inp-name-root[_ngcontent-%COMP%]{position:fixed;top:0;width:70%;left:15%;display:flex;justify-content:center;align-items:center;height:45px}#box-create-action[_ngcontent-%COMP%]   .inp-name-root[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;font-weight:500;color:#555;text-align:center;width:100%}#box-create-action[_ngcontent-%COMP%]   .box-control[_ngcontent-%COMP%]{justify-content:left;align-items:center}#box-create-action[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]{background:#4050b5;color:#fff;padding-left:20px;padding-right:20px;font-size:small;transition:all .5s}#box-create-action[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]:hover{background:#133864}#box-create-action[_ngcontent-%COMP%]   .btn-filter[_ngcontent-%COMP%]{color:#4050b5;background:white;padding-left:5px;padding-right:5px;font-size:small;transition:all .5s}#box-create-action[_ngcontent-%COMP%]   .btn-filter[_ngcontent-%COMP%]:hover{background:#e9e9e9}#box-create-action[_ngcontent-%COMP%]   .btn-set-score[_ngcontent-%COMP%]{text-transform:initial;background:#2361ae;color:#fff;font-size:small;transition:all .5s}#box-create-action[_ngcontent-%COMP%]   .btn-set-quest-label[_ngcontent-%COMP%]{text-transform:initial;background:#2361ae;color:#fff;font-size:small;transition:all .5s;margin-right:10px}#box-create-action[_ngcontent-%COMP%]   .btn-next-to-question[_ngcontent-%COMP%]{text-transform:initial;background:#2361ae;color:#fff;font-size:small;transition:all .5s}#box-create-action[_ngcontent-%COMP%]   .btn-set-score[_ngcontent-%COMP%]:hover, #box-create-action[_ngcontent-%COMP%]   .btn-set-quest-label[_ngcontent-%COMP%]:hover, #box-create-action[_ngcontent-%COMP%]   .btn-next-to-question[_ngcontent-%COMP%]:hover{background:#133864}#box-create-action[_ngcontent-%COMP%]   .btn-show[_ngcontent-%COMP%]{text-transform:initial;background:#fff;border:1px solid #eee;color:#000;font-size:small;transition:all .5s}#box-create-action[_ngcontent-%COMP%]   .btn-show[_ngcontent-%COMP%]{background:#eee}#box-create-action[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{background:#9e9e9e;color:#fff;padding:5px 20px;font-size:small;text-align:center;width:100%}#box-create-action[_ngcontent-%COMP%]   .btn-reload[_ngcontent-%COMP%]{background:#fff;color:#000;padding-left:20px;padding-right:20px;font-size:small;text-align:center;transition:all .5}#box-create-action[_ngcontent-%COMP%]   .btn-reload[_ngcontent-%COMP%]:hover{background:#eee}#box-create-action[_ngcontent-%COMP%]   .box-file[_ngcontent-%COMP%]{width:50%}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;color:#5c5c5c;overflow-y:auto}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview--blur_status[_ngcontent-%COMP%]{position:fixed;display:flex;width:100vw;height:100%;background:rgba(0,0,0,.7803921569);color:#fff;font-size:20px;font-weight:lighter;justify-content:center;align-items:center;cursor:progress;z-index:100;top:0;left:0}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview--blur_status-frame[_ngcontent-%COMP%]{height:85%;overflow-x:auto}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview--blur_status[_ngcontent-%COMP%]   .span-status[_ngcontent-%COMP%]{margin-top:10px;position:relative;animation:_ngcontent-%COMP%_animatefadeIn .3s}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .list-question-box[_ngcontent-%COMP%]{padding:0 20px 100px;background:rgb(244,244,244)}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .list-question-box-item[_ngcontent-%COMP%]{padding-top:20px}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .list-question-box-item__img[_ngcontent-%COMP%]{padding:10px 0;background:white;border-radius:5px 5px 0 0;cursor:ns-resize}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .list-question-box-item__img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;cursor:default}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .list-question-box-item__img_result[_ngcontent-%COMP%]{padding:10px;background:white;border-radius:0 0 5px 5px}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .list-question-box-item__img_result[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .list-question-box-item__control[_ngcontent-%COMP%]   .border-result[_ngcontent-%COMP%]{border-radius:0!important}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .list-question-box-item__control_flex[_ngcontent-%COMP%]{display:flex;align-items:center;background:#43bfb6;border-radius:0 0 5px 5px;color:#fff;padding:8px 20px;justify-content:space-between}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .list-question-box-item__control_flex[_ngcontent-%COMP%]   .btn-ans[_ngcontent-%COMP%]{background:white;height:25px;width:25px;border-radius:50%;display:inline-block;padding:0!important;margin-left:10px}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .list-question-box-item__control_flex[_ngcontent-%COMP%]   .btn-ans-result[_ngcontent-%COMP%]{color:#fff;background-color:#f39c12}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .list-question-box-item__control_flex[_ngcontent-%COMP%]   .btn-remove[_ngcontent-%COMP%]{background:red;color:#fff;box-shadow:inset 0 0 58px 8px #00000012}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .list-question-box-item__control_flex[_ngcontent-%COMP%]   .btn-edit[_ngcontent-%COMP%]{background:#f59c12;color:#fff}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .list-question-box-item__control_flex[_ngcontent-%COMP%]   .inp[_ngcontent-%COMP%]{margin-left:10px;width:50px;border:none;height:25px;background-color:#e0e0e0}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .list-question-box-item__control_flex[_ngcontent-%COMP%]   .inp-result[_ngcontent-%COMP%]{margin-left:10px;width:-moz-fit-content;width:fit-content;height:25px;padding:3px 10px;color:#949494;font-size:small}#box-create-action[_ngcontent-%COMP%]   #box-viewer-create-result[_ngcontent-%COMP%]{cursor:cell!important}#box-create-action[_ngcontent-%COMP%]   .pdf__view[_ngcontent-%COMP%]{display:block;border:none}#box-create-action[_ngcontent-%COMP%]   .box-control-crop[_ngcontent-%COMP%]{position:absolute;top:-15px;left:10px;z-index:10}#box-create-action[_ngcontent-%COMP%]   .box-control-crop-btn[_ngcontent-%COMP%]{width:25px;height:25px;display:flex;justify-content:center;align-items:center}#box-create-action[_ngcontent-%COMP%]   .crop_action[_ngcontent-%COMP%]{position:fixed;z-index:10;background:#e2e2e2;padding:9px 5px;border-radius:0 0 5px;display:grid}#box-create-action[_ngcontent-%COMP%]   .crop_preview[_ngcontent-%COMP%]{position:fixed;z-index:3;background:gainsboro;display:flex;justify-content:center;align-items:center;padding:10px}#box-create-action[_ngcontent-%COMP%]   .crop_preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;cursor:all-scroll}#box-create-action[_ngcontent-%COMP%]   .d-none[_ngcontent-%COMP%]{display:none!important}#box-create-action[_ngcontent-%COMP%]   .link-merge-image-control[_ngcontent-%COMP%]{margin-bottom:10px;text-align:center;margin-top:-10px}#box-create-action[_ngcontent-%COMP%]   .link-merge-image-control[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{cursor:pointer}#box-create-action[_ngcontent-%COMP%]   .link-merge-image-control[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]:hover{color:#f06292}#box-create-action[_ngcontent-%COMP%]   .cursor-all-scroll[_ngcontent-%COMP%]{cursor:all-scroll!important}#box-create-action[_ngcontent-%COMP%]   .btn-save-fixed[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:45px}@keyframes _ngcontent-%COMP%_animatefadeIn{0%{top:0;opacity:0}to{top:0;opacity:1}}#box-create-action[_ngcontent-%COMP%]   .box-file[_ngcontent-%COMP%]   .box-control[_ngcontent-%COMP%]{display:flex;justify-content:left;align-items:center}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]{background:inherit;background-color:#fff;border-width:1px;border-style:solid;border-color:#d6d6d6;border-radius:5px;box-shadow:none;height:300px;display:flex}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_drop[_ngcontent-%COMP%]{cursor:pointer;width:100%;display:flex;justify-content:center;align-items:center;color:#5c5c5c}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_drop--input[_ngcontent-%COMP%]{text-align:center}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .is-dragover[_ngcontent-%COMP%]{background:#e4e4e4!important}#box-create-action[_ngcontent-%COMP%]   .box-file-content--viewer[_ngcontent-%COMP%]{overflow:auto;position:relative;width:100%}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item[_ngcontent-%COMP%]:first-child{padding-top:0!important}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box[_ngcontent-%COMP%]{background:rgb(244,244,244)}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item[_ngcontent-%COMP%]{padding-top:20px}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item__img[_ngcontent-%COMP%]{padding:5px 0;background:white;border-radius:5px 5px 0 0;cursor:ns-resize;border:1px solid #2361ae}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item__img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;cursor:default}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item__img_result[_ngcontent-%COMP%]{padding:5px 0;cursor:ns-resize;background:white;border-radius:0 0 5px 5px;border:1px solid #2361ae}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item__img_result[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;cursor:default}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item__control[_ngcontent-%COMP%]   .border-result[_ngcontent-%COMP%]{border-radius:0!important}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item__control_flex[_ngcontent-%COMP%]{display:flex;align-items:center;background:#2361ae;border-radius:0 0 5px 5px;color:#fff;padding:8px 20px;justify-content:space-between}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item__control_flex[_ngcontent-%COMP%]   .btn-ans[_ngcontent-%COMP%]{background:white;height:25px;width:25px;border-radius:50%;display:inline-block;padding:0!important;margin-left:10px}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item__control_flex[_ngcontent-%COMP%]   .btn-ans-result[_ngcontent-%COMP%]{color:#fff;background-color:#f39c12}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item__control_flex[_ngcontent-%COMP%]   .btn-remove[_ngcontent-%COMP%]{background:red;color:#fff;box-shadow:inset 0 0 58px 8px #00000012}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item__control_flex[_ngcontent-%COMP%]   .btn-edit[_ngcontent-%COMP%]{background:#f59c12;color:#fff}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item__control_flex[_ngcontent-%COMP%]   .inp[_ngcontent-%COMP%]{margin-left:10px;width:50px;border:none;height:25px;background-color:#e0e0e0}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item__control_flex[_ngcontent-%COMP%]   .inp-result[_ngcontent-%COMP%]{margin-left:10px;width:-moz-fit-content;width:fit-content;height:25px;padding:3px 10px;color:#949494;font-size:small}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item[_ngcontent-%COMP%]   .link-merge-image-control[_ngcontent-%COMP%]{margin-bottom:10px;text-align:center;margin-top:-10px}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item[_ngcontent-%COMP%]   .link-merge-image-control[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{cursor:pointer}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item[_ngcontent-%COMP%]   .link-merge-image-control[_ngcontent-%COMP%]:hover{color:#f06292}#box-create-action[_ngcontent-%COMP%]   .inp-name-root[_ngcontent-%COMP%]{position:fixed;z-index:110;top:0;left:15%;display:flex;justify-content:center;align-items:center;height:45px}#box-create-action[_ngcontent-%COMP%]   .inp-name-root[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-width:1px;border-style:solid;border-radius:5px;border-color:#d6d6d6;font-weight:500;font-size:13px;text-align:center;width:50%;padding:4px}#box-create-action[_ngcontent-%COMP%]   .inp-name-root[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus-visible{outline:none}.inputMobile[_ngcontent-%COMP%]{border-width:1px;border-style:solid;border-radius:5px;font-weight:500;font-size:13px;text-align:center;width:100%;padding:4px;height:38px}.inputMobile[_ngcontent-%COMP%]:focus-visible{outline:none}.fixToolBar[_ngcontent-%COMP%]{width:100%!important;left:0!important;background-color:#fff}.fixToolBar[_ngcontent-%COMP%]   .marginInput[_ngcontent-%COMP%]{width:70%!important;margin-left:5%!important}.fixToolBar[_ngcontent-%COMP%]   .btn-save-fixed[_ngcontent-%COMP%]{right:5%!important}.btn-primary-icon[_ngcontent-%COMP%]{transition:all .3s}.btn-primary-icon[_ngcontent-%COMP%]:hover{background:#000}.ng-binding[_ngcontent-%COMP%]{font-size:24px;font-weight:400}.no-answered[_ngcontent-%COMP%]{background:#273044}.dot-example[_ngcontent-%COMP%]   .__choice[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:50%;border:1px solid #ffd300;background-color:#ffd300;display:inline-flex}.answer-box[_ngcontent-%COMP%]{background:#2361ae;color:#fff;border-bottom-left-radius:3px;border-bottom-right-radius:3px;padding:8px 20px;max-width:100%;display:flex!important;flex-wrap:wrap;justify-content:space-between}.chip_question[_ngcontent-%COMP%]{background-color:#ffd300;color:#fff!important}.point-input[_ngcontent-%COMP%]{border-width:1px;border-style:solid;border-radius:5px;font-weight:500;font-size:13px;text-align:center;width:60px;padding:4px;margin-left:5px}input[_ngcontent-%COMP%]::-webkit-outer-spin-button, input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.on-change[_ngcontent-%COMP%]{border:3px solid #25df5a}.btn-detail[_ngcontent-%COMP%]{color:#2361ae}.btn-detail[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#2361ae}@media (max-width: 768px){.answer-box[_ngcontent-%COMP%]{justify-content:center}.list-question-box[_ngcontent-%COMP%]{margin-bottom:30px;scrollbar-width:none;-ms-overflow-style:none}.list-question-box[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.list-question-box[_ngcontent-%COMP%]   .point-input[_ngcontent-%COMP%]{width:60px}}.error-border[_ngcontent-%COMP%]{border:1px solid #ff4757!important}.error-border[_ngcontent-%COMP%]:focus{border:1px solid #ff4757!important}.edit-question-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:40px;padding:10px;border-radius:5px;margin-bottom:-8px}.edit-question-header-right[_ngcontent-%COMP%]{display:flex;align-items:center}.edit-question-header-tag[_ngcontent-%COMP%], .edit-question-header-content[_ngcontent-%COMP%]{padding:5px}.edit-question-header-tag[_ngcontent-%COMP%]:hover, .edit-question-header-content[_ngcontent-%COMP%]:hover{background:rgba(35,97,174,.1803921569);border-radius:5px}.edit-question-header-dr[_ngcontent-%COMP%]{color:#607d8b;margin:0 10px}.edit-question-header-content[_ngcontent-%COMP%]{cursor:pointer}.edit-question-header-point[_ngcontent-%COMP%]{text-align:right}.first-text[_ngcontent-%COMP%]{display:flex;align-items:center}.first-text[_ngcontent-%COMP%]   marquee[_ngcontent-%COMP%]{width:100px}.first-text[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;margin:0;padding:0;width:100%;display:flex;justify-content:center;align-items:center}.tag-chip[_ngcontent-%COMP%]{min-height:20px;font-size:12px}.fix-group[_ngcontent-%COMP%]{position:absolute;width:80px;height:50px;top:-21px;left:-36px;background-color:#d63031d4;transform:rotate(-45deg);color:#fff;font-size:9px;text-align:center;padding-top:30px}.justify-btn-block[_ngcontent-%COMP%]{justify-content:flex-end}@media screen and (max-width: 768px){.justify-btn-block[_ngcontent-%COMP%]{margin-top:5px;justify-content:flex-start}}.next-to-question[_ngcontent-%COMP%]{display:flex;align-items:center}.next-to-question[_ngcontent-%COMP%]   .btn-next-to-question-cancel[_ngcontent-%COMP%]{margin-left:10px}.next-to-question[_ngcontent-%COMP%]   .inputMobile[_ngcontent-%COMP%]{margin-right:10px}.next-to-question[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:100px;margin-right:10px}@media screen and (max-width: 500px){.edit-question-header-tag[_ngcontent-%COMP%], .edit-question-header-content[_ngcontent-%COMP%]{padding:5px 0}.btn-reload[_ngcontent-%COMP%], .btn-save[_ngcontent-%COMP%]{padding:.35rem .75rem!important}.btn-filter[_ngcontent-%COMP%]{padding-top:.35rem!important;padding-bottom:.35rem!important}.next-to-question[_ngcontent-%COMP%]{background:none!important}.inputMobile[_ngcontent-%COMP%], .btn-set-score[_ngcontent-%COMP%]{height:33px!important}.edit-question-header-dr[_ngcontent-%COMP%]{margin:0 9px}}.box-shadow-none[_ngcontent-%COMP%]{box-shadow:none}.editable[_ngcontent-%COMP%]   .question-card[_ngcontent-%COMP%]{position:relative;border:1.5px solid #1e40b0;box-shadow:#0000003d 0 3px 8px;padding:30px 0 0;background:#fff;margin:10px 0;border-radius:5px}.edit-question-header-left[_ngcontent-%COMP%], .editor-btn-flex[_ngcontent-%COMP%]{display:flex;align-items:center}.input-control-fix-top[_ngcontent-%COMP%]{width:70px;text-align:left;padding:10px;height:30px;margin-right:-1px}"]}),n})();const uB=["downPage"];function dB(n,o){1&n&&t._UZ(0,"azt-loading-effect")}function mB(n,o){1&n&&(t.TgZ(0,"span",44),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_testbank_create_exam_width_file_pdf_go_to")))}function hB(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",40),t.YNc(1,mB,3,3,"span",41),t.TgZ(2,"input",42),t.NdJ("keyup.enter",function(){t.CHM(e);const a=t.oxw(5);return t.KtG(a.actionNextToQuestion())})("ngModelChange",function(a){t.CHM(e);const r=t.oxw(5);return t.KtG(r.nexToQuestionConf.value=a)})("focus",function(){t.CHM(e);const a=t.oxw(5);return t.KtG(a.toggleTooltipNextToQuestion(!0))})("focusout",function(){t.CHM(e);const a=t.oxw(5);return t.KtG(a.toggleTooltipNextToQuestion(!1))}),t.qZA(),t.TgZ(3,"button",43),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(5);return t.KtG(a.actionNextToQuestion())}),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()()}if(2&n){const e=t.oxw(5);t.xp6(1),t.Q6J("ngIf",e.fixToTopWidth>500),t.xp6(1),t.Q6J("min",1)("ngModel",e.nexToQuestionConf.value),t.xp6(2),t.Oqu(t.lcZ(5,4,"lang_auto_den"))}}function pB(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",45)(1,"button",46),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(5);return t.KtG(a.openDialogSpitPoint())}),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"button",17),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(5);return t.KtG(a.goBack())}),t._uU(5),t.ALo(6,"mytranslate"),t.qZA(),t.TgZ(7,"button",18),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(5);return t.KtG(a.handleSubmitSaveExam())}),t._uU(8),t.ALo(9,"mytranslate"),t.qZA()()}if(2&n){const e=t.oxw(5);t.xp6(2),t.Oqu(t.lcZ(3,4,"lang_testbank_update_exam_split_points")),t.xp6(3),t.Oqu(t.lcZ(6,6,"lang_button_cancel")),t.xp6(2),t.Q6J("disabled",""===e.nameExamInp.value.trim()||e.nameExamInp.errors||e.invalidTypeQuestionConfig.length>0),t.xp6(1),t.Oqu(t.lcZ(9,8,"lang_button_save"))}}function _B(n,o){if(1&n&&(t.TgZ(0,"flexed-on-the-top",36)(1,"div",37),t.YNc(2,hB,6,6,"div",38),t.YNc(3,pB,10,10,"div",39),t.qZA()()),2&n){const e=t.oxw(4);t.Q6J("colorBackground","#f0f8ffe8"),t.xp6(2),t.Q6J("ngIf",e.fixToTopTop<0),t.xp6(1),t.Q6J("ngIf",e.fixToTopTop<0)}}function fB(n,o){1&n&&(t.TgZ(0,"div",47),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_tested_list_teacher_confirmed")," "))}function gB(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",48)(1,"div",49)(2,"span",50),t._uU(3),t.ALo(4,"mytranslate"),t.qZA(),t.TgZ(5,"input",51),t.NdJ("keyup.enter",function(){t.CHM(e);const a=t.oxw(4);return t.KtG(a.actionNextToQuestion())})("ngModelChange",function(a){t.CHM(e);const r=t.oxw(4);return t.KtG(r.nexToQuestionConf.value=a)})("focus",function(){t.CHM(e);const a=t.oxw(4);return t.KtG(a.toggleTooltipNextToQuestion(!0))})("focusout",function(){t.CHM(e);const a=t.oxw(4);return t.KtG(a.toggleTooltipNextToQuestion(!1))}),t.qZA(),t.TgZ(6,"button",52),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(4);return t.KtG(a.actionNextToQuestion())}),t._uU(7),t.ALo(8,"mytranslate"),t.qZA()(),t.TgZ(9,"div")(10,"button",53),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(4);return t.KtG(a.openDialogSpitPoint())}),t._uU(11),t.ALo(12,"mytranslate"),t.qZA()()()}if(2&n){const e=t.oxw(4);t.xp6(3),t.Oqu(t.lcZ(4,5,"lang_testbank_create_exam_width_file_pdf_go_to")),t.xp6(2),t.Q6J("min",1)("ngModel",e.nexToQuestionConf.value),t.xp6(2),t.Oqu(t.lcZ(8,7,"lang_auto_den")),t.xp6(4),t.Oqu(t.lcZ(12,9,"lang_testbank_update_exam_split_points"))}}function xB(n,o){1&n&&(t.TgZ(0,"span",60),t._uU(1,",\xa0"),t.qZA())}function bB(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"b",58),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw(6);let l;return t.KtG(s.goToQuestionAll(null!==(l=r.index)&&void 0!==l?l:0))}),t.ALo(2,"mytranslate"),t._uU(3),t.ALo(4,"mytranslate"),t.qZA(),t.YNc(5,xB,2,0,"span",59),t.BQk()}if(2&n){const e=o.$implicit,i=o.index,a=t.oxw(6);let r;t.xp6(1),t.s9C("matTooltip",t.lcZ(2,4,"lang_testbank_create_exam_width_file_pdf_click_roll")),t.xp6(2),t.AsE("",t.lcZ(4,6,"lang_testbank_create_exam_width_file_pdf_question")," ",(null!==(r=e.index)&&void 0!==r?r:0)+1,""),t.xp6(2),t.Q6J("ngIf",i<a.invalidTypeQuestionConfig.length-1)}}function vB(n,o){if(1&n&&(t.ynx(0),t._uU(1),t.ALo(2,"mytranslate"),t.TgZ(3,"div",56),t.YNc(4,bB,6,8,"ng-container",57),t.qZA(),t.BQk()),2&n){const e=t.oxw(5);t.xp6(1),t.hij(" ",t.lcZ(2,2,"lang_testbank_create_exam_width_file_pdf_check_configuration")," "),t.xp6(3),t.Q6J("ngForOf",e.invalidTypeQuestionConfig)}}function yB(n,o){if(1&n&&(t.TgZ(0,"div",54)(1,"mat-icon",55),t._uU(2,"info_outlined"),t.qZA(),t._uU(3),t.ALo(4,"mytranslate"),t.YNc(5,vB,5,4,"ng-container",3),t.qZA()),2&n){const e=t.oxw(4);t.xp6(3),t.hij(" ",t.lcZ(4,2,"lang_testbank_create_exam_width_file_pdf_cant_save")," "),t.xp6(2),t.Q6J("ngIf",e.invalidTypeQuestionConfig.length>0)}}function wB(n,o){1&n&&(t.TgZ(0,"span",64),t._uU(1,"|"),t.qZA())}function CB(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"a",62),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw(5);return t.KtG(s.onShowFile(r))}),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.YNc(4,wB,2,0,"span",63),t.BQk()}if(2&n){const e=o.index,i=t.oxw(5);t.xp6(2),t.AsE("",t.lcZ(3,3,"lang_testbank_update_exam_image")," ",e+1,""),t.xp6(2),t.Q6J("ngIf",e<i.cropperData.length-1)}}function TB(n,o){if(1&n&&(t.TgZ(0,"div",61),t._uU(1),t.ALo(2,"mytranslate"),t.YNc(3,CB,5,5,"ng-container",57),t.qZA()),2&n){const e=t.oxw(4);t.xp6(1),t.hij(" ",t.lcZ(2,2,"lang_testbank_update_exam_data_split_exam"),": "),t.xp6(2),t.Q6J("ngForOf",e.cropperData)}}function kB(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"lucide-icon",93),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(3).$implicit,r=t.oxw(4);return t.KtG(r.showFeedbackQuestionDialog(a))}),t.ALo(1,"mytranslate"),t.qZA()}2&n&&t.s9C("matTooltip",t.lcZ(1,1,"lang_auto_bao_loi"))}function AB(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",94)(1,"button",95),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(3).$implicit,r=t.oxw(4);return t.KtG(r.showFeedbackQuestionDialog(a))}),t.ALo(2,"mytranslate"),t._UZ(3,"lucide-icon",96),t.qZA()()}2&n&&(t.xp6(1),t.s9C("matTooltip",t.lcZ(2,1,"lang_auto_bao_loi")))}function SB(n,o){if(1&n&&(t.ynx(0),t.YNc(1,kB,2,3,"lucide-icon",91),t.YNc(2,AB,4,3,"div",92),t.TgZ(3,"div",79),t._uU(4,"|"),t.qZA(),t.BQk()),2&n){const e=t.oxw(6);t.xp6(1),t.Q6J("ngIf",e.isMobile),t.xp6(1),t.Q6J("ngIf",!e.isMobile)}}function OB(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"lucide-icon",97),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2),r=a.$implicit,s=a.index,l=t.oxw(4);return t.KtG(l.removeQuestion(r,s))}),t.ALo(1,"mytranslate"),t.qZA()}2&n&&t.s9C("matTooltip",t.lcZ(1,1,"lang_auto_xoa"))}function EB(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"button",98),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2),r=a.$implicit,s=a.index,l=t.oxw(4);return t.KtG(l.removeQuestion(r,s))}),t.ALo(2,"mytranslate"),t._UZ(3,"lucide-icon",99),t.qZA()()}2&n&&(t.xp6(1),t.s9C("matTooltip",t.lcZ(2,1,"lang_auto_xoa")))}function MB(n,o){1&n&&(t.TgZ(0,"div",100),t.ALo(1,"mytranslate"),t.O4$(),t.TgZ(2,"svg",101),t._UZ(3,"line",102)(4,"path",103),t.qZA()()),2&n&&t.s9C("matTooltip",t.lcZ(1,1,"lang_auto_dap_an_cua_cau_hoi_nay_da_duoc_co_dinh"))}function IB(n,o){1&n&&(t.TgZ(0,"div",79),t._uU(1,"|"),t.qZA())}function LB(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",104)(1,"div",105)(2,"mat-chip-listbox")(3,"mat-chip-option",106),t.NdJ("removed",function(){t.CHM(e);const a=t.oxw(2).$implicit,r=t.oxw(4);return t.KtG(r.setTag(a))}),t._uU(4),t.ALo(5,"mytranslate"),t.TgZ(6,"button",107)(7,"mat-icon",108),t._uU(8,"cancel"),t.qZA()()()()()()}if(2&n){const e=t.oxw(2).$implicit;t.xp6(4),t.hij(" ",t.lcZ(5,1,"azt_lang_tag_"+e.tags[0].code)," ")}}function PB(n,o){1&n&&(t.TgZ(0,"div",79),t._uU(1,"|"),t.qZA())}function NB(n,o){1&n&&(t.O4$(),t.kcU(),t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_teacher_set_tags")))}function ZB(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"li")(1,"a",118),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw(3).$implicit,l=t.oxw(4);return t.KtG(l.setTag(s,r))}),t._uU(2),t.qZA()()}if(2&n){const e=o.$implicit,i=t.oxw(7);let a;t.xp6(2),t.hij(" ",null!==(a=e[i.commonService.getCurrentLang()+"Name"])&&void 0!==a?a:e.enName," ")}}const r4=function(n){return{"mr-1":n}};function DB(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",109)(1,"button",110),t.O4$(),t.TgZ(2,"svg",86),t._UZ(3,"path",111)(4,"path",112)(5,"path",113),t.qZA(),t.YNc(6,NB,3,3,"span",3),t.qZA(),t.kcU(),t.TgZ(7,"mat-menu",null,114)(9,"div",115)(10,"ul",7),t.YNc(11,ZB,3,1,"li",57),t.TgZ(12,"li"),t._UZ(13,"hr",116),t.qZA(),t.TgZ(14,"li")(15,"button",117),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2).$implicit,r=t.oxw(4);return t.KtG(r.applyTagAll(a))}),t._uU(16),t.ALo(17,"mytranslate"),t.qZA()()()()()()}if(2&n){const e=t.MAs(8),i=t.oxw(2).$implicit,a=t.oxw(4);t.xp6(1),t.Q6J("matMenuTriggerFor",e),t.xp6(1),t.Q6J("ngClass",t.VKq(8,r4,!a.isMobile)),t.xp6(4),t.Q6J("ngIf",!a.isMobile),t.xp6(5),t.Q6J("ngForOf",a.questionTags),t.xp6(4),t.Q6J("disabled",!i.tags),t.xp6(1),t.hij(" ",t.lcZ(17,6,"lang_teacher_apply_all_tags")," ")}}function jB(n,o){1&n&&(t.TgZ(0,"div",79),t._uU(1,"|"),t.qZA())}function qB(n,o){1&n&&(t.O4$(),t.kcU(),t.TgZ(0,"span",119),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_teacher_edit_content_exam")))}function FB(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_update_exam_original_question")))}function QB(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",120),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2).$implicit,r=t.oxw(4);return t.KtG(r.goToOriginalQuestion(a))}),t.TgZ(2,"span",121),t._UZ(3,"lucide-icon",122),t.qZA(),t.YNc(4,FB,3,3,"span",3),t.qZA(),t.TgZ(5,"div",79),t._uU(6,"|"),t.qZA(),t.BQk()}if(2&n){const e=t.oxw(6);t.xp6(2),t.Q6J("ngClass",t.VKq(2,r4,!e.isMobile)),t.xp6(2),t.Q6J("ngIf",!e.isMobile)}}function RB(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.YNc(1,SB,5,2,"ng-container",3),t.ynx(2),t.YNc(3,OB,2,3,"lucide-icon",78),t.YNc(4,EB,4,3,"div",3),t.TgZ(5,"div",79),t._uU(6,"|"),t.qZA(),t.BQk(),t.YNc(7,MB,5,3,"div",80),t.YNc(8,IB,2,0,"div",81),t.TgZ(9,"div",82),t.YNc(10,LB,9,3,"div",83),t.qZA(),t.YNc(11,PB,2,0,"div",81),t.YNc(12,DB,18,10,"div",84),t.YNc(13,jB,2,0,"div",81),t.TgZ(14,"div",85),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().$implicit,r=t.oxw(4);return t.KtG(r.editQuestion(a))}),t.TgZ(15,"span"),t.O4$(),t.TgZ(16,"svg",86),t._UZ(17,"path",87)(18,"polyline",88)(19,"path",89),t.qZA(),t.YNc(20,qB,3,3,"span",90),t.qZA()(),t.kcU(),t.TgZ(21,"div",79),t._uU(22,"|"),t.qZA(),t.YNc(23,QB,7,4,"ng-container",3),t.BQk()}if(2&n){const e=t.oxw().$implicit,i=t.oxw(4);t.xp6(1),t.Q6J("ngIf",e.enableFeedback),t.xp6(2),t.Q6J("ngIf",i.isMobile),t.xp6(1),t.Q6J("ngIf",!i.isMobile),t.xp6(3),t.Q6J("ngIf",e.isFixAns),t.xp6(1),t.Q6J("ngIf",e.isFixAns),t.xp6(2),t.Q6J("ngIf",e.tags&&e.tags.length>0),t.xp6(1),t.Q6J("ngIf",e.tags&&e.tags.length>0),t.xp6(1),t.Q6J("ngIf",i.questionTags.length>0),t.xp6(1),t.Q6J("ngIf",i.questionTags.length>0),t.xp6(3),t.Q6J("ngClass",t.VKq(12,r4,!i.isMobile)),t.xp6(4),t.Q6J("ngIf",!i.isMobile),t.xp6(3),t.Q6J("ngIf",e.orgQuestionObj&&e.orgQuestionObj.orgExamId)}}function UB(n,o){if(1&n&&(t.TgZ(0,"div",125),t._UZ(1,"img",126),t.ALo(2,"mycdn"),t.qZA()),2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.s9C("src",t.lcZ(2,1,e.answerMedia),t.LSH)}}function BB(n,o){if(1&n&&(t.TgZ(0,"div",125)(1,"div",127),t._UZ(2,"span",128),t.qZA()()),2&n){const e=t.oxw(2).$implicit;t.xp6(2),t.Q6J("innerHtml",e.answerMedia,t.oJD)}}function zB(n,o){if(1&n&&(t.TgZ(0,"div",123),t.YNc(1,UB,3,3,"div",124),t.YNc(2,BB,3,1,"div",124),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",1==e.isImage),t.xp6(1),t.Q6J("ngIf",0==e.isImage)}}const JB=function(n){return{"d-none":n}},HB=function(n){return{"error-border":n}};function GB(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",65)(1,"div",66)(2,"div",67)(3,"div",68),t._UZ(4,"div",69)(5,"div",70),t.TgZ(6,"div",71),t.YNc(7,RB,24,14,"ng-container",3),t.ALo(8,"isOfflineExam"),t.TgZ(9,"div",72)(10,"span",73),t._uU(11),t.ALo(12,"mytranslate"),t.qZA(),t.TgZ(13,"input",74),t.NdJ("input",function(a){const s=t.CHM(e).$implicit,l=t.oxw(4);return t.KtG(l.setScore(a,s.id))}),t.qZA()()()(),t.TgZ(14,"div",75)(15,"azt-question-standalone-for-update",76),t.NdJ("setAnswerType4UpdateEmit",function(a){t.CHM(e);const r=t.oxw(4);return t.KtG(r.setAnswerType4(a))})("removeAnswerType4Emit",function(a){t.CHM(e);const r=t.oxw(4);return t.KtG(r.removeAnswerType4(a))})("setAnswerOnUpdateEmit",function(a){t.CHM(e);const r=t.oxw(4);return t.KtG(r.setAnswer(a))}),t.qZA()()(),t.YNc(16,zB,3,2,"div",77),t.qZA()()}if(2&n){const e=o.$implicit,i=o.index,a=t.oxw(4);let r;t.uIk("id","questViewBoxByLabel"+e.rawIndex),t.xp6(1),t.s9C("id","question_view_"+e.id),t.xp6(1),t.s9C("id","question_"+i),t.xp6(5),t.Q6J("ngIf",!t.lcZ(8,16,a.examObj)),t.xp6(3),t.Q6J("ngClass",t.VKq(20,JB,a.isMobile)),t.xp6(1),t.hij("",t.lcZ(12,18,"lang_testbank_update_exam_point"),":"),t.xp6(2),t.s9C("value",a.isDivinePointForQuestion?a.parseNumberFixed(null!==(r=e.scorePerQuestion)&&void 0!==r?r:0,8):e.scorePerQuestion),t.Q6J("ngClass",t.VKq(22,HB,null==e.scorePerQuestion||e.scorePerQuestion<0))("decimal",!0),t.xp6(2),t.Q6J("examObj",a.examObj)("questionObj",e)("follower",a.followerRenderQuest)("curQuestionIndex",i)("isShowExplain",a.defaultShowResultMedia)("isInvalidValidation",a.invalidValidationQuestionIds.includes(e.id)),t.xp6(1),t.Q6J("ngIf",e.showResultMedia)}}function $B(n,o){1&n&&t._UZ(0,"azt-loading-handle-data",129),2&n&&t.Q6J("content","lang_testbank_export_pdf_by_user_processing")}function YB(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",12)(2,"div",13,14),t._UZ(4,"input",15),t.YNc(5,_B,4,3,"flexed-on-the-top",16),t.TgZ(6,"button",17),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.goBack())}),t._uU(7),t.ALo(8,"mytranslate"),t.qZA(),t.TgZ(9,"button",18),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(3);return t.KtG(a.handleSubmitSaveExam())}),t._uU(10),t.ALo(11,"mytranslate"),t.qZA(),t.TgZ(12,"button",19),t.O4$(),t.TgZ(13,"svg",20),t._UZ(14,"circle",21)(15,"circle",22)(16,"circle",23),t.qZA()()(),t.kcU(),t.TgZ(17,"div",24)(18,"div",25)(19,"div",26),t.YNc(20,fB,3,3,"div",27),t.YNc(21,gB,13,11,"div",28),t.YNc(22,yB,6,4,"div",29),t.YNc(23,TB,4,4,"div",30),t.TgZ(24,"div",31),t._UZ(25,"azt-exam-header-box",32),t.YNc(26,GB,17,24,"div",33),t.qZA()()()(),t._UZ(27,"azt-scroll-to-top-bottom",34),t.qZA(),t.YNc(28,$B,1,1,"azt-loading-handle-data",35),t.BQk()}if(2&n){const e=t.oxw(3),i=t.MAs(6);t.xp6(4),t.Q6J("formControl",e.nameExamInp),t.xp6(1),t.Q6J("ngIf",e.fixToTopTop<2),t.xp6(2),t.Oqu(t.lcZ(8,14,"lang_button_cancel")),t.xp6(2),t.Q6J("disabled",""===e.nameExamInp.value.trim()||e.nameExamInp.errors||e.invalidTypeQuestionConfig.length>0),t.xp6(1),t.Oqu(t.lcZ(11,16,"lang_button_save")),t.xp6(2),t.Q6J("matMenuTriggerFor",i),t.xp6(8),t.Q6J("ngIf",0===e.questionObjs.length),t.xp6(1),t.Q6J("ngIf",e.questionObjs.length>0),t.xp6(1),t.Q6J("ngIf",e.invalidTypeQuestionConfig.length>0),t.xp6(1),t.Q6J("ngIf",e.cropperData&&e.cropperData.length>0),t.xp6(2),t.Q6J("examObj",e.examObj),t.xp6(1),t.Q6J("ngForOf",e.questionObjs),t.xp6(1),t.Q6J("isScrollToTop",!0),t.xp6(1),t.Q6J("ngIf",e.isLoadingSave)}}function KB(n,o){1&n&&(t.TgZ(0,"div",130)(1,"span",131),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"lang_testbank_update_exam_not_access_rights"),"! "))}function WB(n,o){if(1&n&&(t.ynx(0),t.YNc(1,YB,29,18,"ng-container",1),t.ALo(2,"editPermission"),t.YNc(3,KB,4,3,"ng-template",null,11,t.W1O),t.BQk()),2&n){const e=t.MAs(4),i=t.oxw(2);t.xp6(1),t.Q6J("ngIf",t.xi3(2,2,i.examObj,"exam"))("ngIfElse",e)}}function VB(n,o){if(1&n&&t.YNc(0,WB,5,5,"ng-container",3),2&n){const e=t.oxw();t.Q6J("ngIf",e.examObj)}}function XB(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div")(1,"azt-exam-info",132),t.NdJ("closeDialog",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.closeDialogExamInfo())})("goToQuestion",function(a){t.CHM(e);const r=t.oxw();return t.KtG(r.onHandleGoToQuestion(a))}),t.qZA()()}if(2&n){const e=t.oxw();let i;t.xp6(1),t.Q6J("startIndexQuestion",null!==(i=null==e.examObj?null:e.examObj.startQuestionIndex)&&void 0!==i?i:1)("data",e.dataExamInfo)}}let tz=(()=>{class n extends St.Q{setValidationToQuestionId(e,i){this.invalidValidationQuestionIds.includes(e)?i||(this.invalidValidationQuestionIds=this.invalidValidationQuestionIds.filter(a=>a!=e)):i&&this.invalidValidationQuestionIds.push(e)}onWindowScroll(){let e=document.getElementById("np-name-root");window.pageYOffset>30?e?.classList.add("fixToolBar"):e?.classList.remove("fixToolBar"),this.downPageElement&&(this.fixToTopWidth=this.downPageElement.nativeElement.getBoundingClientRect().width,this.fixToTopTop=this.downPageElement.nativeElement.getBoundingClientRect().top)}scrollDown(){let e=document.getElementById("azt-layout");e&&e.scrollIntoView()}editQuestion(e){if(this.examObj?.editable){let i=`/admin/testbank/update-exam/${null!=this.cur_cateId?this.cur_cateId:0}/${this.examId}`+(this.backToLink?"?backto="+encodeURIComponent(this.backToLink):"");window.location.href=this.commonService.getLocalRouter("/admin/testbank/azota-editor/"+(null!=this.cur_cateId?this.cur_cateId:0))+"/"+e.id+"?backto="+encodeURIComponent(i)+"&r="+((e.rawIndex??0)+(this.examObj?.startQuestionIndex??1)-1)+(this.expandInfoParse.label?"&defaultQuestLabel="+this.expandInfoParse.label:"")}else this.openDialogWaring("lang_auto_not_edit_content_question")}openDialogWaring(e){this.commonService.getTranslate(e).subscribe(i=>{this.sAztDialogService.open(Sp.C,{data:{isShow:!0,content:i},restoreFocus:!1,width:"500px"})})}setTag(e,i){e.tags=i?[i]:[]}applyTagAll(e){for(let a=this.questionObjs.indexOf(e)+1;a<this.questionObjs.length;a++)this.questionObjs[a].tags=e.tags}openDialogConfigExpandInfo(){this.sAztDialogService.open(a5,{data:this.expandInfoParse,restoreFocus:!1}).afterClosed().subscribe(i=>{this.closeDialogConfigExpandInfo(i)})}closeDialogConfigExpandInfo(e){void 0!==e&&(this.expandInfoParse=e,this.handleSubmitSaveExam())}openDialogSpitPoint(){let e=this.oneChoiceCounter(this.questionObjs),i=this.fillAnswerCounter(this.questionObjs),a=this.questionObjs.length-e-i,r={multipleQuestion:e,multiplePoint:parseFloat(this.maxPointCounter(this.questionObjs)).toFixed(4),fillQuestion:i,fillPoint:parseFloat(this.maxPointFillAnswerCounter(this.questionObjs)).toFixed(4),essayQuestion:a,essayPoint:parseFloat(this.essayPointCounter(this.questionObjs)).toFixed(4)};this.sAztDialogService.open(Of,{data:r,width:"500px",restoreFocus:!1}).afterClosed().subscribe(l=>{l&&this.setPointTest(l)})}removeQuestion(e,i){this.sAztDialogService.open(r5,{width:"750px",data:{questionObj:e,examObj:this.examObj,examId:this.examId,index:i},restoreFocus:!1,autoFocus:!1}).afterClosed().subscribe(s=>{s&&this.getData()})}showFeedbackQuestionDialog(e){this.sAztDialogService.open(tn.V,{width:"750px",data:{questionObj:e,role:"TEACHER",applyType:"MATRIX_QUESTION"},restoreFocus:!1,autoFocus:!1}).afterClosed().subscribe(r=>{})}get invalidTypeQuestionConfig(){return this.questionObjs.filter(e=>null==e.scorePerQuestion||e.scorePerQuestion<0||!isFinite(e.scorePerQuestion??0)||!e.answerResult?.length&&this.answerTypeService.isFillAnswer(e))}goToQuestionAll(e,i=150){var a=document.getElementById("question_"+e);a&&a.scrollIntoView()}enableScroll(){window.onscroll=()=>{}}disableScroll(){let e=window.pageYOffset||document.documentElement.scrollLeft,i=window.pageXOffset||document.documentElement.scrollTop;window.onscroll=()=>{window.scrollTo(e,i)}}onShowFile(e){var i=this.sAztDialogService.open(_c.q,{maxWidth:"100vw",maxHeight:"100vh",height:"100%",width:"100%",data:{fileOption:{url:e}},restoreFocus:!1});this.disableScroll(),i.afterClosed().subscribe(a=>{a&&this.enableScroll()})}goBack(){this.commonService.myNavigationBySpecialQueryString(this.backToLink)}showAllResultQuestion(){this.defaultShowResultMedia=!this.defaultShowResultMedia}convertData(e){for(var i=[],a=0;a<e.length;a++)e[a].content&&i.push(e[a].content);return JSON.stringify(i)}keepAnswerResult(e){for(var i=[],a=0;a<e.length;a++)i.push({id:e[a].id??0,answerResult:JSON.stringify(e[a].answerResult),scorePerQuestion:e[a].scorePerQuestion??0,tags:e[a].tags?.map(r=>r.code??"")});return i}handleSubmitSaveExam(){if(!0!==this.isLoadingSave)if(this.examObj&&this.permissionService.hasEditPermission("exam",this.examObj)){let e=!1,i=0;this.questionObjs.forEach(a=>{3!=a.answerType&&0==a.answerResult?.length?(this.setValidationToQuestionId(a.id,!0),e=!0,document.getElementById("question_"+i)?.scrollIntoView()):this.setValidationToQuestionId(a.id,!1),i++}),this.newAnswerList.length>0?this.newAnswerList.forEach(a=>{var r=this.questionObjs.filter(s=>s.id==a.id);null!=r&&r.length>0&&!this.answerTypeService.isFillAnswer(r[0])&&a.answerResultParse&&a.answerResultParse.length>0&&(a.answerResult=this.convertData(a.answerResultParse??[]),a.tags=r[0].tags?.map(s=>s.code??""))}):this.newAnswerList=this.keepAnswerResult(this.questionObjs),e?this.showErrorSnack("lang_auto_vui_long_nhap_dap_an_cho_cau_hoi"):(this.isLoadingSave=!0,this.waitDestroy(this.questionService.apiQuestionUpdateAnswerResultsWithExamNamePost({examId:this.examId,examName:this.nameExamInp.value,answerResults:this.newAnswerList,expandInfoObj:this.expandInfoParse}).subscribe(r=>{1==r.success?(this.newAnswerList=new Array,this.examObj&&(this.examObj.expandInfo=this.serializeJson(this.expandInfoParse)),this.successStatusObj("lang_cms_update_success",!0),this.isLoadingSave=!1):(this.newAnswerList=new Array,this.errorStatusObj(r.message??"",!0),this.isLoadingSave=!1)})))}else this.showErrorSnack("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay")}setAnswer(e){var i=this.newAnswerList.filter(c=>c.id==e.idQuestion);if(null!=e.index&&1==e.type){var a={id:e.idQuestion,answerResultParse:[{index:e.index,content:e.isImage?e.event.content:e.event.key}],scorePerQuestion:e.score,answerResult:"",tags:[]};if(i&&i.length>0)for(var r=0;r<this.newAnswerList.length;r++)this.newAnswerList[r].id==a.id&&(this.newAnswerList[r].answerResultParse?.push(a.answerResultParse?.[0]??{}),this.newAnswerList[r].answerResult=JSON.stringify(this.newAnswerList[r].answerResultParse));else a.answerResult=JSON.stringify(a.answerResultParse),this.newAnswerList.push(a);this.changeStatusAnswer(a,e.index,!0,e.isImage)}else if(null!=e.index&&2==e.type){var s={id:e.idQuestion,answerResult:JSON.stringify([{index:e.index,content:e.isImage?e.event.content:e.event.key}]),answerResultParse:[{index:e.index,content:e.isImage?e.event.content:e.event.key}],scorePerQuestion:e.score,tags:[]};if(i&&i.length>0)for(r=0;r<this.newAnswerList.length;r++)this.newAnswerList[r].id==s.id&&(this.newAnswerList[r].answerResult=s.answerResult,this.newAnswerList[r].answerResultParse=s.answerResultParse);else this.newAnswerList.push(s);this.changeStatusAnswer(s,e.index,!1,e.isImage)}else if(null!=e.index&&5==e.type){let c=[],d=this.questionObjs.find(h=>h.id==e.idQuestion)?.answerResult;e.event.isTrue?c=d?.filter(h=>h!=(e.isImage?e.event.content:e.event.key))??[]:(d?.push(e.isImage?e.event.content:e.event.key),c=d??[]);var l={id:e.idQuestion,answerResult:JSON.stringify([{index:e.index,content:JSON.stringify(c)}]),answerResultParse:[{index:e.index,content:JSON.stringify(c)}],scorePerQuestion:e.score,tags:[]};if(i&&i.length>0)for(r=0;r<this.newAnswerList.length;r++)this.newAnswerList[r].id==l.id&&(this.newAnswerList[r].answerResult=l.answerResult,this.newAnswerList[r].answerResultParse=l.answerResultParse);else this.newAnswerList.push(l);this.changeStatusTrueFalseAnswer(l,c)}}setAnswerType4(e){const i=(e.event.value||"").trim();if(i){var a=this.newAnswerList.filter(r=>r.id==e.questionId);this.questionObjs.forEach(r=>{if(r.id==e.questionId){i.split("|").forEach(c=>{r.answerResult?.push(c.trim())}),r.onChanges=!0;var s={id:r.id,answerResult:JSON.stringify(r.answerResult),scorePerQuestion:r.scorePerQuestion??0,tags:r.tags?.map(c=>c.code??"")};null!=a&&a.length>0?this.newAnswerList.forEach(c=>{c.id==e.questionId&&(c.answerResult=JSON.stringify(r.answerResult))}):this.newAnswerList.push(s)}})}this.questionObjs.forEach(r=>{this.setValidationToQuestionId(r.id,3!=r.answerType&&0==r.answerResult?.length)}),e.event.input.value=""}removeAnswerType4(e){var i=this.newAnswerList.filter(a=>a.id==e.questionId);this.questionObjs.forEach(a=>{if(a.id==e.questionId){var r=a.answerResult?.indexOf(e.answerObj)??0;if(r>=0){a.answerResult?.splice(r,1);var s={id:a.id,answerResult:JSON.stringify(a.answerResult),scorePerQuestion:a.scorePerQuestion??0,tags:a.tags?.map(l=>l.code??"")};null!=i&&i.length>0?this.newAnswerList.forEach(l=>{l.id==e.questionId&&(l.answerResult=JSON.stringify(a.answerResult))}):this.newAnswerList.push(s)}}})}changeStatusTrueFalseAnswer(e,i){this.questionObjs.forEach(a=>{a.id==e.id&&a.answers&&a.answers.length>0&&a.answers.map(r=>r.isTrue=i.includes(r.key))})}changeStatusAnswer(e,i,a,r){a||this.questionObjs.forEach(s=>{if(s.id==e.id&&s.answers&&s.answers.length>0){for(var l=0;l<s.answers.length;l++)s.answers[l].isTrue=!1;s.answers[i].isTrue=!0}})}setPointTest(e){let i=Number(e?.multiplePoint)/this.countTrueFalseQuestion,a=Number(e?.fillPoint)/this.countFillAnswerQuestion,r=0;this.questionObjs.length-this.countTrueFalseQuestion-this.countFillAnswerQuestion>0&&(r=Number(e?.essayPoint)/(this.questionObjs.length-this.countTrueFalseQuestion-this.countFillAnswerQuestion));for(let s=0;s<this.questionObjs.length;s++){let l=!1;if(this.answerTypeService.isOneChoiceAnswer(this.questionObjs[s])){this.questionObjs[s].scorePerQuestion=Number(this.parseNumberFixed(i,8));for(let c=0;c<this.newAnswerList.length;c++)if(this.newAnswerList[c].id==this.questionObjs[s].id){this.newAnswerList[c].scorePerQuestion=Number(this.parseNumberFixed(i,8)),l=!0;break}}else if(this.answerTypeService.isEssayAnswer(this.questionObjs[s])){this.questionObjs[s].scorePerQuestion=Number(this.parseNumberFixed(r,8));for(let c=0;c<this.newAnswerList.length;c++)if(this.newAnswerList[c].id==this.questionObjs[s].id){this.newAnswerList[c].scorePerQuestion=Number(this.parseNumberFixed(r,8)),l=!0;break}}else if(this.answerTypeService.isFillAnswer(this.questionObjs[s])){this.questionObjs[s].scorePerQuestion=Number(this.parseNumberFixed(a,8));for(let c=0;c<this.newAnswerList.length;c++)if(this.newAnswerList[c].id==this.questionObjs[s].id){this.newAnswerList[c].scorePerQuestion=Number(this.parseNumberFixed(a,8)),l=!0;break}}if(!l){let c={id:this.questionObjs[s].id??0,answerResult:JSON.stringify(this.questionObjs[s].answerResult),scorePerQuestion:this.questionObjs[s].scorePerQuestion??0,tags:[]};this.newAnswerList.push(c)}}this.showSuccessSnack("lang_auto_chia_diem_thanh_cong")}setPointQuestion(){var e=this.form.getRawValue();if(e.totalQuestion<=this.countTrueFalseQuestion+this.countFillAnswerQuestion){this.invalidTotalQuestion=!1;var i=Number(e.maxScore)/e.totalQuestion;this.questionObjs.forEach(a=>{if(this.answerTypeService.isOneChoiceAnswer(a)||this.answerTypeService.isFillAnswer(a)){a.scorePerQuestion=i;for(var r=0;r<this.newAnswerList.length;r++)if(this.newAnswerList[r].id==a.id){this.newAnswerList[r].scorePerQuestion=i;break}}}),this.isDivinePointForQuestion=!0,this.showSuccessSnack("lang_auto_chia_diem_thanh_cong")}else this.invalidTotalQuestion=!0,this.showErrorSnack("lang_auto_so_cau_ban_nhap_da_vuot_qua_so_cau_trac_nghiem_trong_de_thi")}setScore(e,i){for(let r=0;r<this.questionObjs.length;r++){let s=isNaN(parseFloat(e.target.value))?void 0:parseFloat(e.target.value);if(this.questionObjs[r]&&this.questionObjs[r].id==i&&(this.questionObjs[r].scorePerQuestion=s,this.newAnswerList.length>0)){let l=!1;for(var a=0;a<this.newAnswerList.length;a++)if(this.newAnswerList[a].id==this.questionObjs[r].id){this.newAnswerList[a].scorePerQuestion=s??0,l=!0;break}if(!l){let c=Array.isArray(this.questionObjs[r].answerResult)&&this.questionObjs[r].answerResult?.length?this.questionObjs[r].answerResult?.[0]:"";this.newAnswerList.push({id:this.questionObjs[r].id??0,answerResult:JSON.stringify(this.questionObjs[r].answerResult),answerResultParse:[{content:c}],scorePerQuestion:parseFloat(e.target.value),tags:[]})}}}}oneChoiceCounter(e){return e.filter(i=>this.answerTypeService.isOneChoiceAnswer(i)).length}trueFalseCounter(e){return e.filter(i=>this.answerTypeService.isTrueFalseAnswer(i)).length}fillAnswerCounter(e){return e.filter(i=>this.answerTypeService.isFillAnswer(i)).length}maxPointCounter(e){var i=0;return e.forEach(a=>{this.answerTypeService.isOneChoiceAnswer(a)&&(i+=a.scorePerQuestion??0)}),this.parseNumberFixed(i,4)}maxPointFillAnswerCounter(e){var i=0;return e.forEach(a=>{this.answerTypeService.isFillAnswer(a)&&(i+=a.scorePerQuestion??0)}),this.parseNumberFixed(i,4)}essayPointCounter(e){var i=0;return e.forEach(a=>{!this.answerTypeService.isOneChoiceAnswer(a)&&!this.answerTypeService.isFillAnswer(a)&&(i+=a.scorePerQuestion??0)}),i.toString()}parseNumberFixed(e,i){let a=Number(parseFloat(e.toString()).toFixed(i));return isNaN(a)?"0":parseFloat(e.toString()).toFixed(i)}convertErrsResultQuestions(){for(let e=0;e<this.questionObjs.length;e++)null===this.questionObjs[e].answerResult&&(this.questionObjs[e].answerResult=[])}changeAnswerResultStatus(e){var i=[];let a=0;return e.forEach(r=>{if(r.index=a,r.isRoleTeacher=!0,a++,r.answers&&r.answerResult)for(let s=0;s<r.answers.length;s++)r.answers[s].questionId=r.id,r.answers[s].checked=!1,r.answers[s].isTrue=!!this.checkAnswerResult(r.answers[s].key??"",r.answerResult);i.push(r)}),i}checkAnswerResult(e,i){var a=!1;for(var r in i){if(i[r]==e){a=!0;break}a=!1}return a}getQuestionCanFeedback(){let e=[];this.questionObjs.forEach(i=>{i.id&&!this.commonService.isExistInArray(e,i.id)&&e.push(i.id)}),this.waitDestroy(this.testMarketFeedbackService.apiTestMarketFeedbacksQuestionsGet(this.examId,e.join(",")).subscribe(i=>{if(1==i.success&&i.data?.objs?.length){let a=i.data?.objs??[];for(let r=0;r<this.questionObjs.length;r++)a.forEach(s=>{this.questionObjs[r].id==s.questionId&&(this.questionObjs[r].enableFeedback=s.allowFeedback)});this.successStatusObj(),setTimeout(()=>{this.scrollToQuestion()},200),setTimeout(()=>{this.scrollToQuestion()},500)}else this.errorStatusObj(i.message??"",!0)}))}goToOriginalQuestion(e){const i=`/admin/testbank/update-exam/${this.examObj?.categoryId??0}/${this.examObj?.id}`+(this.backToLink?"?backto="+encodeURIComponent(this.backToLink):"");this.myNavigationWithQueryString(`/admin/testbank/update-exam/${e.orgQuestionObj?.orgCategoryId}/${e.orgQuestionObj?.orgExamId}`,`?backto=${encodeURIComponent(i)}&questionId=${e.orgQuestionObj?.orgQuestionId}`)}getData(){this.initStatusObj(),this.waitDestroy(this.examService.apiExamGetQuestionsIdGet(this.examId,1).subscribe(i=>{if(1==i.success){this.examObj=i.data?.examObj,this.expandInfoParse=this.commonService.castJsonToObj(this.examObj?.expandInfo??"{}")??{},this.firstInGroupIndexes=this.commonService.myParseJson(this.examObj?.firstInGroupIndexes??"")??[],this.nameExamInp.setValue(this.examObj?.name??"");let a=this.commonService.castJsonToClassObjs(yt.v,JSON.stringify(i.data?.questionObjs));const r=this.changeAnswerResultStatus(a??[]);this.followerRenderQuest.setNumQuest(r.length);const s=i.data?.orgQuestionObjs??[];this.questionObjs=r;for(let l=0;l<this.questionObjs.length;l++)for(let c=0;c<s.length;c++)s[c].questionId===this.questionObjs[l].id&&(this.questionObjs[l].orgQuestionObj=s[c]);this.cropperData=this.commonService.myParseJson(this.examObj?.labelsUrl??"")??[],this.docxService.replaceCanvasBackgroundTS(this.questionObjs),this.countTrueFalseQuestion=this.oneChoiceCounter(this.questionObjs),this.countFillAnswerQuestion=this.fillAnswerCounter(this.questionObjs),this.convertErrsResultQuestions(),setTimeout(()=>{this.getQuestionCanFeedback()},200),this.form=new f.cw({maxScore:new f.NI(this.maxPointCounter(this.questionObjs),{nonNullable:!0,validators:[f.kI.required]}),totalQuestion:new f.NI(this.oneChoiceCounter(this.questionObjs),{nonNullable:!0,validators:[f.kI.required]})}),this.questionService.apiQuestionGetTagsGet().subscribe(l=>{1==l.success&&(this.questionTags=l.data?.objs??[])})}else this.showErrorSnack(i.message??"")}))}openExamInfoDialog(){this.dataExamInfo={isShow:!0,obj:this.questionObjs}}closeDialogExamInfo(){this.dataExamInfo.isShow=!1}toggleStartNextToQuestion(){this.nexToQuestionConf.showInput=!this.nexToQuestionConf.showInput}toggleTooltipNextToQuestion(e){this.nexToQuestionConf.showTooltip=e}actionNextToQuestion(){if(void 0===this.nexToQuestionConf.value)return;const e=document.getElementById("questViewBoxByLabel"+(this.nexToQuestionConf.value-1));e?e.scrollIntoView():this.showErrorSnack(this.commonService.myTranslateInstant("lang_auto_khong_tim_thay_cau_can_di_chuyen_den")??"")}scrollToQuestion(){const e=this.commonService.getMyQueryParam("questionId"),i=document.getElementById("question_view_"+e);i&&i.scrollIntoView()}onHandleGoToQuestion(e){let i=this.questionObjs?.[e-1]?.id??0;if(i){const a=document.getElementById("question_view_"+i);if(!a)return;a.scrollIntoView()}}ngOnInit(){this.waitDestroy((0,dt.a)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.cur_cateId=Number(this.commonService.getMyParam(this.activeRoute,"cat_id"))??0,this.examId=Number(this.commonService.getMyParam(this.activeRoute,"id"))??0;var e=this.commonService.getMyQueryParam("backto");this.backToLink=e||"/admin/testbank/document-management/0/"+(null!=this.cur_cateId?this.cur_cateId:0)+"/1",this.getData()})),this.commonService.translateMetaData({title:"lang_cms_test_update_exam_title",description:"lang_cms_test_update_exam_description",image:"lang_cms_test_image"}),super.ngOnInit()}constructor(e,i,a,r,s,l,c,d){super(),this.sAztDialogService=e,this.questionService=i,this.examService=a,this.activeRoute=r,this.permissionService=s,this.docxService=l,this.answerTypeService=c,this.testMarketFeedbackService=d,this.questionTags=[],this.questionObjs=[],this.followerRenderQuest=new u.p,this.defaultShowResultMedia=!1,this.cur_cateId=0,this.examId=0,this.firstInGroupIndexes=[],this.nameExamInp=new f.NI("",{nonNullable:!0,validators:[or._.noWhiteSpace]}),this.newAnswerList=[],this.isMobile=this.commonService.isMobileOrTable(),this.backToLink="",this.countTrueFalseQuestion=0,this.countFillAnswerQuestion=0,this.invalidTotalQuestion=!1,this.isDivinePointForQuestion=!1,this.separatorKeysCodes=[up.K5],this.selectable=!0,this.removable=!0,this.addOnBlur=!0,this.isLoadingSave=!1,this.dataExamInfo={isShow:!1},this.expandInfoParse={},this.nexToQuestionConf={value:1,showInput:!1,showTooltip:!1},this.invalidValidationQuestionIds=[],this.fixToTopWidth=0,this.fixToTopTop=0,this.form=new f.cw({maxScore:new f.NI("",{nonNullable:!0,validators:[f.kI.required]}),totalQuestion:new f.NI(0,{nonNullable:!0,validators:[f.kI.required]})})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Fi.C),t.Y36(Ke.aE),t.Y36(Ke.Oe),t.Y36(O.gz),t.Y36(S.j),t.Y36(tx.n),t.Y36(hr.i),t.Y36(yp.nC))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-update-exam"]],viewQuery:function(e,i){if(1&e&&t.Gf(uB,5),2&e){let a;t.iGM(a=t.CRH())&&(i.downPageElement=a.first)}},hostBindings:function(e,i){1&e&&t.NdJ("scroll",function(r){return i.onWindowScroll(r)},!1,t.Jf7)},features:[t.qOj],decls:23,vars:18,consts:[[3,"headerBackToLink"],[4,"ngIf","ngIfElse"],["doneLoading",""],[4,"ngIf"],["xPosition","before"],["filterMenu","matMenu"],[1,"dropdown-menu","show","relative","w-64"],[1,"dropdown-content"],["azt-track-service","view-share-question-okOXhhqB2o",1,"dropdown-item","cursor-pointer",3,"click"],["azt-track-service","view-share-question-wBBhYqj6qo",1,"dropdown-item","cursor-pointer",3,"click"],["azt-track-service","view-share-question-gm18o_AtnP",1,"dropdown-item","cursor-pointer",3,"click"],["noPermission",""],["id","box-create-action",1,"simple-exam-box"],["id","down-page",1,"flex",2,"width","100%","margin","20px auto"],["downPage",""],["type","text",1,"inputMobile","form-control","mr-2",3,"formControl"],[3,"colorBackground",4,"ngIf"],["azt-track-service","update-exam-Z_5jMqg7e",1,"btn","btn-reload","mr-2",3,"click"],["azt-track-service","update-exam-SzWhHAfWm",1,"btn","btn-save",3,"disabled","click"],["azt-track-service","update-exam-SzWhHAfWm",1,"btn","btn-filter","ml-2",3,"matMenuTriggerFor"],["_ngcontent-ng-c2390875836","","xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-more-vertical","w-5","h-5","text-slate-500"],["_ngcontent-ng-c2390875836","","cx","12","cy","12","r","1"],["_ngcontent-ng-c2390875836","","cx","19","cy","12","r","1"],["_ngcontent-ng-c2390875836","","cx","5","cy","12","r","1"],[1,"container-fluid","mb-5","mt-3"],[1,"block-cols-12-full","m-0"],["id","box-left-file",1,"box-file",2,"width","100%"],["class","box-control text-center",4,"ngIf"],["class","flex","style","justify-content: space-between; align-items: center",4,"ngIf"],["class","p-2 mt-2 mb-2 alert alert-danger text-center","style","align-items: center",4,"ngIf"],["id","box-cropper-data","class","mt-3",4,"ngIf"],[1,"list-question-box","mt-3"],[1,"mb-1",3,"examObj"],["class","list-question-box-item mb-2","style","position: relative",4,"ngFor","ngForOf"],[3,"isScrollToTop"],[3,"content",4,"ngIf"],[3,"colorBackground"],[1,"flex",2,"justify-content","space-between","width","100%"],["class","next-to-question rounded flex items-center bg-white",4,"ngIf"],["class","flex",4,"ngIf"],[1,"next-to-question","rounded","flex","items-center","bg-white"],["class","font-medium ml-1","style","width: auto",4,"ngIf"],["appOnlyNumber","","type","number",1,"inputMobile","form-control",2,"width","70px","text-align","left","padding","10px","height","30px","margin-right","-1px",3,"min","ngModel","keyup.enter","ngModelChange","focus","focusout"],["azt-track-service","update-exam-Z2-pIpbAtb",1,"btn","btn-set-score","ml-1",2,"height","30px",3,"click"],[1,"font-medium","ml-1",2,"width","auto"],[1,"flex"],["azt-track-service","update-exam-VpkBJtDTEr",1,"btn","btn-set-score","mr-2",3,"click"],[1,"box-control","text-center"],[1,"flex",2,"justify-content","space-between","align-items","center"],[1,"next-to-question","rounded","shadow","py-1","px-2",2,"display","inline-block"],[1,"font-medium",2,"width","auto"],["appOnlyNumber","","type","number",1,"inputMobile","form-control",2,"width","80px","text-align","left","padding","10px",3,"min","ngModel","keyup.enter","ngModelChange","focus","focusout"],["azt-track-service","update-exam-Z2-pIpbAtb",1,"btn","btn-next-to-question",3,"click"],["azt-track-service","update-exam-VpkBJtDTEr",1,"btn","btn-set-score",3,"click"],[1,"p-2","mt-2","mb-2","alert","alert-danger","text-center",2,"align-items","center"],[2,"vertical-align","bottom"],[1,"error-block"],[4,"ngFor","ngForOf"],["azt-track-service","update-exam-CZTBs2UHWQ",1,"clickable","mt-1","ml-1",3,"matTooltip","click"],["class","mt-1",4,"ngIf"],[1,"mt-1"],["id","box-cropper-data",1,"mt-3"],["azt-track-service","update-exam--rL2wEApLv",1,"text-primary",3,"click"],["class","mx-1","style","color: #6c6c6c",4,"ngIf"],[1,"mx-1",2,"color","#6c6c6c"],[1,"list-question-box-item","mb-2",2,"position","relative"],[1,"w-100",3,"id"],[3,"id"],[1,"edit-question-header","box"],[1,"edit-question-header-left"],[1,"edit-question-header-center"],[1,"edit-question-header-right"],[1,"edit-question-header-point"],[2,"font-weight","500",3,"ngClass"],["type","text","appOnlyNumber","",1,"point-input","form-control",3,"ngClass","decimal","value","input"],[1,"card","question-card","mb-0","relative",2,"box-shadow","none"],[1,"mb-0","relative","overflow-hidden",3,"examObj","questionObj","follower","curQuestionIndex","isShowExplain","isInvalidValidation","setAnswerType4UpdateEmit","removeAnswerType4Emit","setAnswerOnUpdateEmit"],["class","card question-card","style","box-shadow: none",4,"ngIf"],["style","width: 16px !important; height: 16px !important;","name","trash-2",3,"matTooltip","click",4,"ngIf"],[1,"edit-question-header-dr"],["class","fix-answer",3,"matTooltip",4,"ngIf"],["class","edit-question-header-dr",4,"ngIf"],[1,"edit-question-header-show-tags"],["class","box-service-type no-wrap",4,"ngIf"],["class","edit-question-header-tag",4,"ngIf"],["azt-track-service","update-exam-N7CP3yfuUp",1,"edit-question-header-content",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","w-4","h-4",3,"ngClass"],["d","M4 13.5V4a2 2 0 0 1 2-2h8.5L20 7.5V20a2 2 0 0 1-2 2h-5.5"],["points","14 2 14 8 20 8"],["d","M10.42 12.61a2.1 2.1 0 1 1 2.97 2.97L7.95 21 4 22l.99-3.95 5.43-5.44Z"],["class","",4,"ngIf"],["style","width: 16px !important; height: 16px !important;","name","alert-octagon",3,"matTooltip","click",4,"ngIf"],["reportQTakeTest","",4,"ngIf"],["name","alert-octagon",2,"width","16px !important","height","16px !important",3,"matTooltip","click"],["reportQTakeTest",""],["azt-track-service","update-exam-5Q2j_re4X","matTooltipShowDelay","200",1,"btn","btn-sm","p-1","w-6","h-6",3,"matTooltip","click"],["name","alert-octagon"],["name","trash-2",2,"width","16px !important","height","16px !important",3,"matTooltip","click"],["azt-track-service","update-exam-QNh0Wct6N","matTooltipShowDelay","200",1,"btn","btn-sm","p-1","w-6","h-6",3,"matTooltip","click"],["name","trash-2"],[1,"fix-answer",3,"matTooltip"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide"],["x1","12","y1","17","x2","12","y2","22"],["d","M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z"],[1,"box-service-type","no-wrap"],[1,"first-text"],[1,"tag-chip",3,"removed"],["matChipRemove",""],[2,"font-size","15px"],[1,"edit-question-header-tag"],[3,"matMenuTriggerFor"],["d","M9 5H2v7l6.29 6.29c.94.94 2.48.94 3.42 0l3.58-3.58c.94-.94.94-2.48 0-3.42L9 5Z"],["d","M6 9.01V9"],["d","m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19"],["tags","matMenu"],[1,"dropdown-menu","show","relative","w-56"],[1,"dropdown-divider","border-slate-200","dark:border-darkmode-400"],["azt-track-service","update-exam-CZZ0b_rCyN",1,"dropdown-item","w-full",3,"disabled","click"],["azt-track-service","update-exam-mQam8bsKT2",1,"dropdown-item",3,"click"],[1,""],["azt-track-service","update-exam-Va0keXkLs",1,"edit-question-header-content","flex","items-center",3,"click"],[1,"w-4","h-4","inline-block",3,"ngClass"],["name","file-clock"],[1,"card","question-card",2,"box-shadow","none"],["class","card-body pt-1 pb-1 pl-0 pr-0 MW-800",4,"ngIf"],[1,"card-body","pt-1","pb-1","pl-0","pr-0","MW-800"],["alt","question media",1,"img-fluid","img_respon",3,"src"],[1,"contentDocx",2,"max-width","80%","margin-left","10%"],[3,"innerHtml"],[3,"content"],[1,"alert","alert-danger","flex-center-box"],[1,"title-no-permission"],[3,"startIndexQuestion","data","closeDialog","goToQuestion"]],template:function(e,i){if(1&e&&(t.TgZ(0,"teacher-layout",0),t.YNc(1,dB,1,0,"azt-loading-effect",1),t.YNc(2,VB,1,1,"ng-template",null,2,t.W1O),t.qZA(),t.YNc(4,XB,2,2,"div",3),t.TgZ(5,"mat-menu",4,5)(7,"div",6)(8,"ul",7)(9,"li")(10,"span",8),t.NdJ("click",function(){return i.openDialogConfigExpandInfo()}),t._uU(11),t.ALo(12,"mytranslate"),t.qZA()(),t.TgZ(13,"li")(14,"span",9),t.NdJ("click",function(){return i.showAllResultQuestion()}),t._uU(15),t.ALo(16,"mytranslate"),t.ALo(17,"mytranslate"),t.ALo(18,"mytranslate"),t.qZA()(),t.TgZ(19,"li")(20,"span",10),t.NdJ("click",function(){return i.openExamInfoDialog()}),t._uU(21),t.ALo(22,"mytranslate"),t.qZA()()()()()),2&e){const a=t.MAs(3);t.Q6J("headerBackToLink",i.backToLink),t.xp6(1),t.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a),t.xp6(3),t.Q6J("ngIf",i.dataExamInfo.isShow),t.xp6(7),t.hij(" ",t.lcZ(12,8,"lang_core_exam_config_question_label")," "),t.xp6(4),t.AsE(" ",0==i.defaultShowResultMedia?t.lcZ(16,10,"lang_testbank_update_exam_show"):t.lcZ(17,12,"lang_testbank_update_exam_hide")," ",t.lcZ(18,14,"lang_testbank_update_exam_explain")," "),t.xp6(6),t.hij(" ",t.lcZ(22,16,"lang_auto_thong_tin_de_thi")," ")}},dependencies:[D.mk,D.sg,D.O5,yr.z2,yr.iO,yr.qH,Jo.Hw,Ii.VK,Ii.p6,Mi.gM,f.Fj,f.wV,f.JJ,f.qQ,f.On,f.oH,si.l,qr.Y,Df,tg.M,f5,g5,n4.s,x5,fo._,C.Nh5,jt.JV,jt.QN,jt.Pf,jt.CL],styles:["#box-create-action[_ngcontent-%COMP%]   #resizeBox[_ngcontent-%COMP%]{margin-left:50%;width:10px;position:fixed;height:100vh;cursor:col-resize}#box-create-action[_ngcontent-%COMP%]   #resizeBox[_ngcontent-%COMP%]   .resizeContent[_ngcontent-%COMP%]{height:100vh;width:10px}#box-create-action[_ngcontent-%COMP%]   .inp-name-root[_ngcontent-%COMP%]{position:fixed;top:0;width:70%;left:15%;display:flex;justify-content:center;align-items:center;height:45px}#box-create-action[_ngcontent-%COMP%]   .inp-name-root[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;font-weight:500;color:#555;text-align:center;width:100%}#box-create-action[_ngcontent-%COMP%]   .box-control[_ngcontent-%COMP%]{justify-content:left;align-items:center}#box-create-action[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]{background:#4050b5;color:#fff;padding-left:20px;padding-right:20px;font-size:small;transition:all .5s}#box-create-action[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]:hover{background:#133864}#box-create-action[_ngcontent-%COMP%]   .btn-filter[_ngcontent-%COMP%]{color:#4050b5;background:white;padding-left:5px;padding-right:5px;font-size:small;transition:all .5s}#box-create-action[_ngcontent-%COMP%]   .btn-filter[_ngcontent-%COMP%]:hover{background:#e9e9e9}#box-create-action[_ngcontent-%COMP%]   .btn-set-score[_ngcontent-%COMP%]{text-transform:initial;background:#2361ae;color:#fff;font-size:small;transition:all .5s}#box-create-action[_ngcontent-%COMP%]   .btn-set-quest-label[_ngcontent-%COMP%]{text-transform:initial;background:#2361ae;color:#fff;font-size:small;transition:all .5s;margin-right:10px}#box-create-action[_ngcontent-%COMP%]   .btn-next-to-question[_ngcontent-%COMP%]{text-transform:initial;background:#2361ae;color:#fff;font-size:small;transition:all .5s}#box-create-action[_ngcontent-%COMP%]   .btn-set-score[_ngcontent-%COMP%]:hover, #box-create-action[_ngcontent-%COMP%]   .btn-set-quest-label[_ngcontent-%COMP%]:hover, #box-create-action[_ngcontent-%COMP%]   .btn-next-to-question[_ngcontent-%COMP%]:hover{background:#133864}#box-create-action[_ngcontent-%COMP%]   .btn-show[_ngcontent-%COMP%]{text-transform:initial;background:#fff;border:1px solid #eee;color:#000;font-size:small;transition:all .5s}#box-create-action[_ngcontent-%COMP%]   .btn-show[_ngcontent-%COMP%]{background:#eee}#box-create-action[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{background:#9e9e9e;color:#fff;padding:5px 20px;font-size:small;text-align:center;width:100%}#box-create-action[_ngcontent-%COMP%]   .btn-reload[_ngcontent-%COMP%]{background:#fff;color:#000;padding-left:20px;padding-right:20px;font-size:small;text-align:center;transition:all .5}#box-create-action[_ngcontent-%COMP%]   .btn-reload[_ngcontent-%COMP%]:hover{background:#eee}#box-create-action[_ngcontent-%COMP%]   .box-file[_ngcontent-%COMP%]{width:50%}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;color:#5c5c5c;overflow-y:auto}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview--blur_status[_ngcontent-%COMP%]{position:fixed;display:flex;width:100vw;height:100%;background:rgba(0,0,0,.7803921569);color:#fff;font-size:20px;font-weight:lighter;justify-content:center;align-items:center;cursor:progress;z-index:100;top:0;left:0}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview--blur_status-frame[_ngcontent-%COMP%]{height:85%;overflow-x:auto}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview--blur_status[_ngcontent-%COMP%]   .span-status[_ngcontent-%COMP%]{margin-top:10px;position:relative;animation:_ngcontent-%COMP%_animatefadeIn .3s}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .list-question-box[_ngcontent-%COMP%]{padding:0 20px 100px;background:rgb(244,244,244)}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .list-question-box-item[_ngcontent-%COMP%]{padding-top:20px}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .list-question-box-item__img[_ngcontent-%COMP%]{padding:10px 0;background:white;border-radius:5px 5px 0 0;cursor:ns-resize}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .list-question-box-item__img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;cursor:default}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .list-question-box-item__img_result[_ngcontent-%COMP%]{padding:10px;background:white;border-radius:0 0 5px 5px}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .list-question-box-item__img_result[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .list-question-box-item__control[_ngcontent-%COMP%]   .border-result[_ngcontent-%COMP%]{border-radius:0!important}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .list-question-box-item__control_flex[_ngcontent-%COMP%]{display:flex;align-items:center;background:#43bfb6;border-radius:0 0 5px 5px;color:#fff;padding:8px 20px;justify-content:space-between}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .list-question-box-item__control_flex[_ngcontent-%COMP%]   .btn-ans[_ngcontent-%COMP%]{background:white;height:25px;width:25px;border-radius:50%;display:inline-block;padding:0!important;margin-left:10px}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .list-question-box-item__control_flex[_ngcontent-%COMP%]   .btn-ans-result[_ngcontent-%COMP%]{color:#fff;background-color:#f39c12}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .list-question-box-item__control_flex[_ngcontent-%COMP%]   .btn-remove[_ngcontent-%COMP%]{background:red;color:#fff;box-shadow:inset 0 0 58px 8px #00000012}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .list-question-box-item__control_flex[_ngcontent-%COMP%]   .btn-edit[_ngcontent-%COMP%]{background:#f59c12;color:#fff}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .list-question-box-item__control_flex[_ngcontent-%COMP%]   .inp[_ngcontent-%COMP%]{margin-left:10px;width:50px;border:none;height:25px;background-color:#e0e0e0}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_preview[_ngcontent-%COMP%]   .list-question-box-item__control_flex[_ngcontent-%COMP%]   .inp-result[_ngcontent-%COMP%]{margin-left:10px;width:-moz-fit-content;width:fit-content;height:25px;padding:3px 10px;color:#949494;font-size:small}#box-create-action[_ngcontent-%COMP%]   #box-viewer-create-result[_ngcontent-%COMP%]{cursor:cell!important}#box-create-action[_ngcontent-%COMP%]   .pdf__view[_ngcontent-%COMP%]{display:block;border:none}#box-create-action[_ngcontent-%COMP%]   .box-control-crop[_ngcontent-%COMP%]{position:absolute;top:-15px;left:10px;z-index:10}#box-create-action[_ngcontent-%COMP%]   .box-control-crop-btn[_ngcontent-%COMP%]{width:25px;height:25px;display:flex;justify-content:center;align-items:center}#box-create-action[_ngcontent-%COMP%]   .crop_action[_ngcontent-%COMP%]{position:fixed;z-index:10;background:#e2e2e2;padding:9px 5px;border-radius:0 0 5px;display:grid}#box-create-action[_ngcontent-%COMP%]   .crop_preview[_ngcontent-%COMP%]{position:fixed;z-index:3;background:gainsboro;display:flex;justify-content:center;align-items:center;padding:10px}#box-create-action[_ngcontent-%COMP%]   .crop_preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;cursor:all-scroll}#box-create-action[_ngcontent-%COMP%]   .d-none[_ngcontent-%COMP%]{display:none!important}#box-create-action[_ngcontent-%COMP%]   .link-merge-image-control[_ngcontent-%COMP%]{margin-bottom:10px;text-align:center;margin-top:-10px}#box-create-action[_ngcontent-%COMP%]   .link-merge-image-control[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{cursor:pointer}#box-create-action[_ngcontent-%COMP%]   .link-merge-image-control[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]:hover{color:#f06292}#box-create-action[_ngcontent-%COMP%]   .cursor-all-scroll[_ngcontent-%COMP%]{cursor:all-scroll!important}#box-create-action[_ngcontent-%COMP%]   .btn-save-fixed[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:45px}@keyframes _ngcontent-%COMP%_animatefadeIn{0%{top:0;opacity:0}to{top:0;opacity:1}}#box-create-action[_ngcontent-%COMP%]   .box-file[_ngcontent-%COMP%]   .box-control[_ngcontent-%COMP%]{display:flex;justify-content:left;align-items:center}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]{background:inherit;background-color:#fff;border-width:1px;border-style:solid;border-color:#d6d6d6;border-radius:5px;box-shadow:none;height:300px;display:flex}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_drop[_ngcontent-%COMP%]{cursor:pointer;width:100%;display:flex;justify-content:center;align-items:center;color:#5c5c5c}#box-create-action[_ngcontent-%COMP%]   .box-file-content-file_drop--input[_ngcontent-%COMP%]{text-align:center}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .is-dragover[_ngcontent-%COMP%]{background:#e4e4e4!important}#box-create-action[_ngcontent-%COMP%]   .box-file-content--viewer[_ngcontent-%COMP%]{overflow:auto;position:relative;width:100%}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item[_ngcontent-%COMP%]:first-child{padding-top:0!important}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box[_ngcontent-%COMP%]{background:rgb(244,244,244)}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item[_ngcontent-%COMP%]{padding-top:20px}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item__img[_ngcontent-%COMP%]{padding:5px 0;background:white;border-radius:5px 5px 0 0;cursor:ns-resize;border:1px solid #2361ae}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item__img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;cursor:default}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item__img_result[_ngcontent-%COMP%]{padding:5px 0;cursor:ns-resize;background:white;border-radius:0 0 5px 5px;border:1px solid #2361ae}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item__img_result[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;cursor:default}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item__control[_ngcontent-%COMP%]   .border-result[_ngcontent-%COMP%]{border-radius:0!important}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item__control_flex[_ngcontent-%COMP%]{display:flex;align-items:center;background:#2361ae;border-radius:0 0 5px 5px;color:#fff;padding:8px 20px;justify-content:space-between}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item__control_flex[_ngcontent-%COMP%]   .btn-ans[_ngcontent-%COMP%]{background:white;height:25px;width:25px;border-radius:50%;display:inline-block;padding:0!important;margin-left:10px}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item__control_flex[_ngcontent-%COMP%]   .btn-ans-result[_ngcontent-%COMP%]{color:#fff;background-color:#f39c12}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item__control_flex[_ngcontent-%COMP%]   .btn-remove[_ngcontent-%COMP%]{background:red;color:#fff;box-shadow:inset 0 0 58px 8px #00000012}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item__control_flex[_ngcontent-%COMP%]   .btn-edit[_ngcontent-%COMP%]{background:#f59c12;color:#fff}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item__control_flex[_ngcontent-%COMP%]   .inp[_ngcontent-%COMP%]{margin-left:10px;width:50px;border:none;height:25px;background-color:#e0e0e0}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item__control_flex[_ngcontent-%COMP%]   .inp-result[_ngcontent-%COMP%]{margin-left:10px;width:-moz-fit-content;width:fit-content;height:25px;padding:3px 10px;color:#949494;font-size:small}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item[_ngcontent-%COMP%]   .link-merge-image-control[_ngcontent-%COMP%]{margin-bottom:10px;text-align:center;margin-top:-10px}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item[_ngcontent-%COMP%]   .link-merge-image-control[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{cursor:pointer}#box-create-action[_ngcontent-%COMP%]   .box-file-content[_ngcontent-%COMP%]   .list-question-box-item[_ngcontent-%COMP%]   .link-merge-image-control[_ngcontent-%COMP%]:hover{color:#f06292}#box-create-action[_ngcontent-%COMP%]   .inp-name-root[_ngcontent-%COMP%]{position:fixed;z-index:110;top:0;left:15%;display:flex;justify-content:center;align-items:center;height:45px}#box-create-action[_ngcontent-%COMP%]   .inp-name-root[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-width:1px;border-style:solid;border-radius:5px;border-color:#d6d6d6;font-weight:500;font-size:13px;text-align:center;width:50%;padding:4px}#box-create-action[_ngcontent-%COMP%]   .inp-name-root[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus-visible{outline:none}.inputMobile[_ngcontent-%COMP%]{border-width:1px;border-style:solid;border-radius:5px;font-weight:500;font-size:13px;text-align:center;width:100%;padding:4px;height:38px}.inputMobile[_ngcontent-%COMP%]:focus-visible{outline:none}.fixToolBar[_ngcontent-%COMP%]{width:100%!important;left:0!important;background-color:#fff}.fixToolBar[_ngcontent-%COMP%]   .marginInput[_ngcontent-%COMP%]{width:70%!important;margin-left:5%!important}.fixToolBar[_ngcontent-%COMP%]   .btn-save-fixed[_ngcontent-%COMP%]{right:5%!important}.btn-primary-icon[_ngcontent-%COMP%]{transition:all .3s}.btn-primary-icon[_ngcontent-%COMP%]:hover{background:#000}.listda[_ngcontent-%COMP%]{margin-top:30px;padding-left:20px}.ng-binding[_ngcontent-%COMP%]{font-size:24px;font-weight:400}.listli[_ngcontent-%COMP%]{padding:0;margin:0 5px 0 0;display:inline-block}.listli[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:50%;border:1px solid rgb(52,125,165);display:flex;align-items:center;color:#fff;justify-content:center;font-size:15px;cursor:pointer}.no-answered[_ngcontent-%COMP%]{background:#273044}.dot-example[_ngcontent-%COMP%]   .__choice[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:50%;border:1px solid #ffd300;background-color:#ffd300;display:inline-flex}.answer-box[_ngcontent-%COMP%]{background:#2361ae;color:#fff;border-bottom-left-radius:3px;border-bottom-right-radius:3px;padding:8px 20px;max-width:100%;display:flex!important;flex-wrap:wrap;justify-content:space-between}.chip_question[_ngcontent-%COMP%]{background-color:#ffd300;color:#fff!important}.point-input[_ngcontent-%COMP%]{border-width:1px;border-style:solid;border-radius:5px;font-weight:500;font-size:13px;text-align:center;width:60px;padding:4px;margin-left:5px}input[_ngcontent-%COMP%]::-webkit-outer-spin-button, input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.on-change[_ngcontent-%COMP%]{border:3px solid #25df5a}input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}.btn-detail[_ngcontent-%COMP%]{color:#2361ae}.btn-detail[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#2361ae}@media (max-width: 768px){.answer-box[_ngcontent-%COMP%]{justify-content:center}.list-question-box[_ngcontent-%COMP%]{margin-bottom:30px;scrollbar-width:none;-ms-overflow-style:none}.list-question-box[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.list-question-box[_ngcontent-%COMP%]   .point-input[_ngcontent-%COMP%]{width:60px}}.error-border[_ngcontent-%COMP%]{border:1px solid #ff4757!important}.error-border[_ngcontent-%COMP%]:focus{border:1px solid #ff4757!important}.edit-question-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:40px;padding:10px;border-radius:5px;margin-bottom:-8px}.edit-question-header-right[_ngcontent-%COMP%]{display:flex;align-items:center}.edit-question-header-tag[_ngcontent-%COMP%], .edit-question-header-content[_ngcontent-%COMP%]{padding:5px}.edit-question-header-tag[_ngcontent-%COMP%]:hover, .edit-question-header-content[_ngcontent-%COMP%]:hover{background:rgba(35,97,174,.1803921569);border-radius:5px}.edit-question-header-dr[_ngcontent-%COMP%]{color:#607d8b;margin:0 10px}.edit-question-header-content[_ngcontent-%COMP%]{cursor:pointer}.edit-question-header-point[_ngcontent-%COMP%]{text-align:right}.first-text[_ngcontent-%COMP%]{display:flex;align-items:center}.first-text[_ngcontent-%COMP%]   marquee[_ngcontent-%COMP%]{width:100px}.first-text[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;margin:0;padding:0;width:100%;display:flex;justify-content:center;align-items:center}.tag-chip[_ngcontent-%COMP%]{min-height:20px;font-size:12px}.fix-group[_ngcontent-%COMP%]{position:absolute;width:80px;height:50px;top:-21px;left:-36px;background-color:#d63031d4;transform:rotate(-45deg);color:#fff;font-size:9px;text-align:center;padding-top:30px}.justify-btn-block[_ngcontent-%COMP%]{justify-content:flex-end}@media screen and (max-width: 768px){.justify-btn-block[_ngcontent-%COMP%]{margin-top:5px;justify-content:flex-start}}.next-to-question[_ngcontent-%COMP%]{display:flex;align-items:center}.next-to-question[_ngcontent-%COMP%]   .btn-next-to-question-cancel[_ngcontent-%COMP%]{margin-left:10px}.next-to-question[_ngcontent-%COMP%]   .inputMobile[_ngcontent-%COMP%]{margin-right:10px}.next-to-question[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:100px;margin-right:10px}@media screen and (max-width: 500px){.edit-question-header-tag[_ngcontent-%COMP%], .edit-question-header-content[_ngcontent-%COMP%]{padding:5px 0}.btn-reload[_ngcontent-%COMP%], .btn-save[_ngcontent-%COMP%]{padding:.35rem .75rem!important}.btn-filter[_ngcontent-%COMP%]{padding-top:.35rem!important;padding-bottom:.35rem!important}.next-to-question[_ngcontent-%COMP%]{background:none!important}.inputMobile[_ngcontent-%COMP%], .btn-set-score[_ngcontent-%COMP%]{height:33px!important}.edit-question-header-dr[_ngcontent-%COMP%]{margin:0 9px}}"]}),n})();function ez(n,o){1&n&&t._UZ(0,"azt-loading-effect")}function nz(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",3)(1,"h3",4),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"ui-create-offline-exam",5),t.NdJ("handleSaveData",function(a){t.CHM(e);const r=t.oxw();return t.KtG(r.handleUpdateQuestionAndExam(a))}),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,4,"lang_core_update_exam_offline_title")," "),t.xp6(2),t.Q6J("form",e.form)("type",e.type)("dataExamOffline",e.dataExamOffline)}}let iz=(()=>{class n extends St.Q{constructor(e,i){super(),this.activeRoute=e,this.offlineExamCreatorV2Service=i,this.dataExamOffline={updateOfflineMixQuestionObjs:[],addOfflineMixQuestionObjs:[],schoolLevelId:1,schoolSubjectId:1,name:"",examHashId:""},this.backToLink="",this.prevData="",this.type=cs.updateExamCode,this.form=new f.cw({examName:new f.NI("",{nonNullable:!0,validators:[f.kI.required,or._.noWhiteSpace]}),examCodeList:new f.Oe([]),schoolLevel:new f.NI(0,{nonNullable:!0,validators:[f.kI.required]}),isResetLabelQuestionPart:new f.NI(!0,{nonNullable:!0,validators:[f.kI.required]}),schoolSubject:new f.NI(0,{nonNullable:!0,validators:[f.kI.required]})})}handleUpdateQuestionAndExam(e){let i=[],a=[],r=this.commonService.getMyParam(this.activeRoute,"hash_id")??"";e.forEach(l=>{if(l.isUpdate){const c=[];l.offlineQuestionObjs.forEach(h=>{c.push({questionId:h.questionId??0,answer:h.answer,answerType:h.answerType,scorePerQuestion:h.scorePerQuestion,isEssay:h.isEssay})}),i.push({offlineMixQuestionId:l.offlineMixQuestionId??0,offlineMixQuestionHashId:l.offlineMixQuestionHashId,examPart:l.examPart,offlineQuestionObjs:c})}else a.push({offlineMixQuestionHashId:l.offlineMixQuestionHashId,examPart:l.examPart,offlineQuestionObjs:l.offlineQuestionObjs})}),this.waitDestroy(this.offlineExamCreatorV2Service.apiOfflineExamCreatorV2UpdateExamObjPost({examHashId:r,schoolLevelId:this.form.controls.schoolLevel.value,schoolSubjectId:this.form.controls.schoolSubject.value,name:this.form.controls.examName.value,updateOfflineMixQuestionObjs:i,addOfflineMixQuestionObjs:a}).subscribe(l=>{if(l.success){this.successStatusObj(),this.showSuccessSnack("lang_testbank_successful_exam_update");const c=this.getMyQueryParam("backto")??"admin/testbank/document-management/0/0/1";this.myNavigation(c)}else this.errorStatusObj(l.message??"",!0)}))}getData(){this.initStatusObj();let e=this.commonService.getMyParam(this.activeRoute,"hash_id")??"",i=Number(this.commonService.getMyParam(this.activeRoute,"offline_id"))??0;this.waitDestroy(this.offlineExamCreatorV2Service.apiOfflineExamCreatorV2GetInitExamInfoToUpdateOneOfflineMixQuestionIdGet(e,i).subscribe(a=>{if(a.success){const r=a.data?.updateOfflineExamRequest;r&&(this.dataExamOffline.updateOfflineMixQuestionObjs=r.updateOfflineMixQuestionObjs??[],this.dataExamOffline.schoolLevelId=r.schoolLevelId,this.dataExamOffline.examHashId=e,this.dataExamOffline.schoolSubjectId=r.schoolSubjectId,this.dataExamOffline.name=r.name,this.form.controls.examName.setValue(r.name),this.form.controls.schoolLevel.setValue(r.schoolLevelId),this.form.controls.schoolSubject.setValue(r.schoolSubjectId),this.form.controls.isResetLabelQuestionPart.setValue(r.resetQuestionIndex??!0)),this.successStatusObj()}else this.errorStatusObj(a.message??"",!0)}))}ngOnInit(){super.ngOnInit();let e=Number(this.commonService.getMyParam(this.activeRoute,"cat_id"))??0;this.backToLink=this.commonService.getMyQueryParam("backto")??`/admin/testbank/create-new-document/${e}`,this.commonService.translateMetaData({title:"lang_core_update_exam_offline_title",description:"lang_core_update_exam_offline_title",image:"lang_cms_test_image"}),this.form.valueChanges.subscribe(i=>{let a=JSON.stringify(i);a!=this.prevData&&(this.prevData=a,this.form.patchValue(i))}),this.getData()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(O.gz),t.Y36(ya.Jt))},n.\u0275cmp=t.Xpm({type:n,selectors:[["update-offline-exam-code"]],features:[t.qOj],decls:4,vars:3,consts:[[3,"headerBackToLink"],[4,"ngIf","ngIfElse"],["doneLoading",""],[1,"mt-5","mx-auto",2,"max-width","1200px"],[1,"text-xl","font-medium"],[3,"form","type","dataExamOffline","handleSaveData"]],template:function(e,i){if(1&e&&(t.TgZ(0,"teacher-layout",0),t.YNc(1,ez,1,0,"azt-loading-effect",1),t.YNc(2,nz,5,6,"ng-template",null,2,t.W1O),t.qZA()),2&e){const a=t.MAs(3);t.Q6J("headerBackToLink",i.backToLink),t.xp6(1),t.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a)}},dependencies:[D.O5,si.l,fo._,R0,jt.JV],encapsulation:2}),n})();function oz(n,o){1&n&&t._UZ(0,"azt-loading-effect")}function az(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",3)(1,"h3",4),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"ui-create-offline-exam",5),t.NdJ("handleSaveData",function(a){t.CHM(e);const r=t.oxw();return t.KtG(r.handleUpdateQuestionAndExam(a))}),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(2),t.hij(" ",t.lcZ(3,4,"lang_core_update_exam_offline")," "),t.xp6(2),t.Q6J("form",e.form)("type",e.type)("dataExamOffline",e.dataExamOffline)}}let rz=(()=>{class n extends St.Q{handleUpdateQuestionAndExam(e){let i=[],a=[],r=this.commonService.getMyParam(this.activeRoute,"hash_id")??"";e.forEach((l,c)=>{if(l.isUpdate){const d=[];l.offlineQuestionObjs.forEach(_=>{d.push({questionId:_.questionId??0,answer:_.answer,answerType:_.answerType,scorePerQuestion:_.scorePerQuestion,isEssay:_.isEssay})}),i.push({offlineMixQuestionId:l.offlineMixQuestionId??0,offlineMixQuestionHashId:l.offlineMixQuestionHashId,examPart:l.examPart,offlineQuestionObjs:d})}else a.push({offlineMixQuestionHashId:l.offlineMixQuestionHashId,examPart:l.examPart,offlineQuestionObjs:l.offlineQuestionObjs})}),this.waitDestroy(this.offlineExamCreatorV2Service.apiOfflineExamCreatorV2UpdateExamObjPost({examHashId:r,schoolLevelId:this.form.controls.schoolLevel.value,schoolSubjectId:this.form.controls.schoolSubject.value,name:this.form.controls.examName.value,resetQuestionIndex:this.form.controls.isResetLabelQuestionPart.value,updateOfflineMixQuestionObjs:i,addOfflineMixQuestionObjs:a}).subscribe(l=>{if(l.success){this.successStatusObj(),this.showSuccessSnack("lang_testbank_successful_exam_update");const c=this.getMyQueryParam("backto")??"admin/testbank/document-management/0/0/1";this.myNavigation(c)}else this.errorStatusObj(l.message??"",!0)}))}getData(){this.initStatusObj();let e=this.commonService.getMyParam(this.activeRoute,"hash_id")??"";this.waitDestroy(this.offlineExamCreatorV2Service.apiOfflineExamCreatorV2GetInitExamInfoToUpdateGet(e).subscribe(i=>{if(i.success){const a=i.data?.updateOfflineExamRequest;a&&(this.dataExamOffline.updateOfflineMixQuestionObjs=a.updateOfflineMixQuestionObjs??[],this.dataExamOffline.schoolLevelId=a.schoolLevelId,this.dataExamOffline.examHashId=e,this.dataExamOffline.schoolSubjectId=a.schoolSubjectId,this.dataExamOffline.name=a.name,this.form.controls.examName.setValue(a.name),this.form.controls.schoolLevel.setValue(a.schoolLevelId),this.form.controls.schoolSubject.setValue(a.schoolSubjectId),this.form.controls.isResetLabelQuestionPart.setValue(a.resetQuestionIndex??!0)),this.successStatusObj()}else this.errorStatusObj(i.message??"",!0)}))}ngOnInit(){super.ngOnInit();let e=Number(this.commonService.getMyParam(this.activeRoute,"cat_id"))??0;this.backToLink=this.commonService.getMyQueryParam("backto")??`/admin/testbank/create-new-document/${e}`,this.commonService.translateMetaData({title:"lang_core_update_exam_offline",description:"lang_core_update_exam_offline",image:"lang_cms_test_image"}),this.form.valueChanges.subscribe(i=>{let a=JSON.stringify(i);a!=this.prevData&&(this.prevData=a,this.form.patchValue(i))}),this.getData()}constructor(e,i){super(),this.activeRoute=e,this.offlineExamCreatorV2Service=i,this.dataExamOffline={updateOfflineMixQuestionObjs:[],addOfflineMixQuestionObjs:[],schoolLevelId:1,schoolSubjectId:1,name:"",examHashId:""},this.backToLink="",this.prevData="",this.type=cs.updateExam,this.form=new f.cw({examName:new f.NI("",{nonNullable:!0,validators:[f.kI.required,or._.noWhiteSpace]}),examCodeList:new f.Oe([]),schoolLevel:new f.NI(0,{nonNullable:!0,validators:[f.kI.required]}),isResetLabelQuestionPart:new f.NI(!0,{nonNullable:!0,validators:[f.kI.required]}),schoolSubject:new f.NI(0,{nonNullable:!0,validators:[f.kI.required]})})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(O.gz),t.Y36(ya.Jt))},n.\u0275cmp=t.Xpm({type:n,selectors:[["update-offline-exam"]],features:[t.qOj],decls:4,vars:3,consts:[[3,"headerBackToLink"],[4,"ngIf","ngIfElse"],["doneLoading",""],[1,"mt-5","mx-auto",2,"max-width","1200px"],[1,"text-xl","font-medium"],[3,"form","type","dataExamOffline","handleSaveData"]],template:function(e,i){if(1&e&&(t.TgZ(0,"teacher-layout",0),t.YNc(1,oz,1,0,"azt-loading-effect",1),t.YNc(2,az,5,6,"ng-template",null,2,t.W1O),t.qZA()),2&e){const a=t.MAs(3);t.Q6J("headerBackToLink",i.backToLink),t.xp6(1),t.Q6J("ngIf",i.statusObj.loading)("ngIfElse",a)}},dependencies:[D.O5,si.l,fo._,R0,jt.JV],encapsulation:2}),n})();const sz=[{path:"",component:yZ,canActivate:[L3.v],children:[{path:"create-new-document/:cat_id",component:ES},{path:"azota-editor/:cat_id",component:nd},{path:"azota-editor/:cat_id/:quest_id",component:nd},{path:"mix-bank-template/:cat_id/:mode_name/:matrix_id",component:JZ},{path:"sync-folder/:cat_id",component:mF},{path:"document-management/0/:cat_id/:page",component:o8},{path:"document-management/1/:cat_id/:page",component:x8},{path:"action-online-offline/:cat_id/:hash_id",component:vy},{path:"print-exam-and-ticket/:cat_id/:hash_id",component:sj},{path:"config-exam-offline/:cat_id/:hash_id",component:G1},{path:"config-exam-online/:cat_id/:hash_id",component:lA},{path:"config-homework/:cat_id/:hash_id",component:C6},{path:"config-homework/:cat_id",component:C6},{path:"download-file-print/:cat_id/:hash_id/:offline_hash_id",component:JN},{path:"exam-results-list/:cat_id/:id/:result_id",component:EP},{path:"publish-document/:type/:cat_id/:hash_id",component:pj},{path:"homework-results-list/:cat_id/:id/:hash_id",component:QN},{path:"create-file-pdf-ver2/:cat_id",component:I3},{path:"create-exam-by-excel/:cat_id",component:TS},{path:"create-manual-offline-exam/:cat_id",component:kS},{path:"test-review/:exam_id/:user_id/:student_id/:result_id",component:pR},{path:"statistic/:cat_id/:id",component:Wq},{path:"update-exam/:cat_id/:id",component:tz},{path:"update-exam-editor/:cat_id/:id",component:cB},{path:"update-offline-exam-code/:cat_id/:hash_id/:offline_id",component:iz},{path:"update-offline-exam/:cat_id/:hash_id",component:rz},{path:"create-website",component:RS},{path:"create-website-result",component:LS},{path:"powerpoint/:cat_id/:exam_id",component:TD},{path:"config-share-offline-result/:cat_id/:hash_id",component:cA},{path:"offline-answer-list/:cat_id/:hash_id",component:WZ},{path:"matrix-list/:cate/:page",component:_Z},{path:"export-exam-result",component:vZ}]}];let lz=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[O.Bz.forChild(sz),O.Bz,sv.fQ]}),n})();var eg=function(n){return n[n.Folder=1]="Folder",n[n.File=2]="File",n[n.Group=3]="Group",n[n.Question=4]="Question",n}(eg||{}),w5=M(73157);let C5=(()=>{class n{getQuestionIdsAndQuestionGroupIdSelected(){this.questionIdsSelected=this.examFinderModel.selectedQuestionObjs.map(e=>e.id),this.questionGroupIdsSelected=null!=this.examFinderModel.selectedGroupId?[this.examFinderModel.selectedGroupId]:[]}pushDataToFirstLevel(e,i){return this.resetModel(),this.examFinderModel.isFirstTimeToLoadData=!1,this.examFinderModel.levelObjs.push({levelId:this.examFinderModel.levelObjs.length,categoryObjs:e,documentObjs:i,currentCategoryObj:void 0,currentDocumentObj:void 0}),this.reCalculateCurrentSelected(),this.examFinderModel}getCurrentLevelPathObjs(){let e=[];return this.examFinderModel.levelObjs.forEach(i=>{i.currentCategoryObj?e.push({type:eg.Folder,id:i.currentCategoryObj.id,name:i.currentCategoryObj.name,shareType:i.currentCategoryObj.shareType}):i.currentDocumentObj?.exam&&e.push({type:eg.File,id:i.currentDocumentObj.exam.id,name:i.currentDocumentObj.exam.name,shareType:void 0})}),e}selectCategoryObjInOneLevel(e,i){let a=this.examFinderModel.levelObjs.find(r=>r.levelId==e.levelId);if(a){let r=this.examFinderModel.levelObjs.filter(l=>l.levelId<e.levelId);a.currentCategoryObj=i,a.currentDocumentObj=void 0,r.push(a),r.push({levelId:r.length,categoryObjs:[],documentObjs:[],currentCategoryObj:void 0,currentDocumentObj:void 0}),this.examFinderModel.levelObjs=r,this.removeSelectedDocumentInModel(),this.reCalculateCurrentSelected()}return this.examFinderModel}pushCategoryData(e,i,a,r){let s=this.examFinderModel.levelObjs.find(l=>l.levelId==e.levelId);if(s&&s.currentCategoryObj?.id==i.id){let l=this.examFinderModel.levelObjs.filter(c=>c.levelId<=e.levelId);l.push({levelId:l.length,categoryObjs:a,documentObjs:r,currentCategoryObj:void 0,currentDocumentObj:void 0}),this.examFinderModel.levelObjs=l,this.removeSelectedDocumentInModel(),this.reCalculateCurrentSelected(),setTimeout(()=>{this.scrollToTarget({parentId:"grid-parent",targetId:"col-last"})},1e3)}return this.examFinderModel}clearSelectedQuestionAndQuestionGroup(){this.examFinderModel.selectedGroupId=void 0,this.examFinderModel.selectedQuestionObjs=[],this.questionTypeSelectedObjs=[],this.questionTagSelectedObjs=[],this.reCalculateCurrentSelected()}selectDocumentObjInOneLevel(e,i){let a=this.examFinderModel.levelObjs.find(r=>r.levelId==e.levelId);if(a&&i.exam){let r=this.examFinderModel.levelObjs.filter(s=>s.levelId<e.levelId);a.currentCategoryObj=void 0,a.currentDocumentObj=i,r.push(a),this.examFinderModel.levelObjs=r,this.removeSelectedDocumentInModel(),this.reCalculateCurrentSelected()}return this.examFinderModel}pushQuestionData(e,i,a,r){let s=this.examFinderModel.levelObjs.find(l=>l.levelId==e.levelId);if(s&&s.currentDocumentObj?.exam?.id==i.exam?.id){let l=this.examFinderModel.levelObjs.filter(c=>c.levelId<=e.levelId);this.examFinderModel.levelObjs=l,this.removeSelectedDocumentInModel(),this.examFinderModel.currentQuestionObjs=r,this.reCalculateCurrentSelected(),setTimeout(()=>{this.scrollToTarget({parentId:"grid-parent",targetId:"col-last"})},1e3)}return this.examFinderModel}handleGetAllQuestionStringCode(){if(this.examFinderModel.selectedQuestionObjs.length<=0){let e=this.examFinderModel.selectedGroupId;this.examFinderModel.selectedQuestionObjs=null!=e?this.examFinderModel.currentQuestionObjs.filter(i=>i.groupInfo?.groupId==e):this.examFinderModel.currentQuestionObjs}this.reCalculateCurrentSelected()}handSelectOneQuestionId(e){if(this.examFinderModel.selectedQuestionObjs.find(r=>r.id==e))this.examFinderModel.selectedQuestionObjs=this.examFinderModel.selectedQuestionObjs.filter(r=>r.id!=e);else{var a=this.examFinderModel.currentQuestionObjs.find(r=>r.id==e);a&&this.examFinderModel.selectedQuestionObjs.push(a)}this.reCalculateCurrentSelected()}handSelectQuestionGroupId(e){this.examFinderModel.selectedGroupId=this.examFinderModel.selectedGroupId==e?void 0:e,this.reCalculateCurrentSelected()}getDefaultFinderModel(){return{isFirstTimeToLoadData:!0,levelObjs:[],currentQuestionObjs:[],isShowQuestionObjs:!1,selectedGroupId:void 0,selectedQuestionObjs:[],hasSelectedItem:!1}}convertDocumentFile(e){var i=[];return e.forEach(a=>{a.exam&&i.push({name:a.exam.name,updatedAt:a.exam.updatedAt,attended:a.exam.attended,isPublished:a.exam.isPublished,exam:a.exam,type:"exam",shared:!1,paths:[],isGlobalAzota:0})}),i}scrollToTarget({parentId:e,targetId:i}){let a=document.getElementById(e),s=document.getElementById(i)?.offsetLeft;a?.scrollTo({left:s})}removeSelectedDocumentInModel(){this.examFinderModel.currentQuestionObjs=[],this.examFinderModel.selectedGroupId=void 0,this.examFinderModel.selectedQuestionObjs=[],this.examFinderModel.isShowQuestionObjs=!1}resetModel(){this.examFinderModel=this.getDefaultFinderModel()}reCalculateCurrentSelected(){let i=this.commonService.myClone(this.examFinderModel.levelObjs).reverse().find(a=>a.currentDocumentObj||a.currentCategoryObj);this.examFinderModel.hasSelectedItem=null!=i,this.examFinderModel.isShowQuestionObjs=null!=i?.currentDocumentObj,this.examFinderModel.currentDocumentObj=i?.currentDocumentObj?.exam?{...i.currentDocumentObj.exam,countQuestion:0,showFrontend:1,editable:!0,allowStudentView:!0}:void 0,this.getQuestionIdsAndQuestionGroupIdSelected()}constructor(e,i){this.testFinderSupportService=e,this.commonService=i,this.questionTagSelectedObjs=[],this.questionTypeSelectedObjs=[],this.questionIdsSelected=[],this.questionGroupIdsSelected=[],this.examFinderModel=this.getDefaultFinderModel(),this.testFinderSupportService.listenQuestionGroupSelectedEvent().subscribe(a=>{this.handSelectQuestionGroupId(a)}),this.testFinderSupportService.listenQuestionSelectedEvent().subscribe(a=>{this.handSelectOneQuestionId(a)})}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(w5.c),t.LFG(mi.z))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function cz(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"mat-option",4),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.changeSelection(r,s.isSelectedOptions(r.key)))}),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()}if(2&n){const e=o.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",t.lcZ(2,2,e.value)," ")}}const uz=function(){return["new-select-design-panel"]};let dz=(()=>{class n extends St.Q{isSelectedOptions(e){return null!=this.form.getRawValue().selectControl.find(i=>i.key==e)}get currentPlaceHolder(){let e=this.getCurrentSelected();return e.length>0?this.commonService.translateToKeyParam("lang_testbank_exam_finder_total_item_selected",e.length.toString()):this.commonService.myTranslateInstant(this.placeHolderKey)??""}get currentSelectValue(){let e=this.getCurrentSelected();return this.isSelectAll()?this.commonService.translateToKeyParam("lang_testbank_exam_finder_all_item_selected",e.length.toString()):e.map(i=>i.value).join(", ")}get haveSelected(){return this.getCurrentSelected().length>0}getCurrentSelected(){return this.form.getRawValue().selectControl.filter(e=>e.key!=this.ALL_KEY)}isSelectAll(){return this.getCurrentSelected().length==this.currentOptions.length-1}changeSelection(e,i){if(e.key==this.ALL_KEY)this.form.controls.selectControl.setValue(i?this.currentOptions:[]);else{let a=this.getCurrentSelected().map(r=>r.key);this.form.controls.selectControl.setValue(a.length==this.currentOptions.length-1?this.currentOptions:this.currentOptions.filter(r=>a.includes(r.key)))}}ngOnInit(){this.currentOptions="QUESTION_TAG"==this.listCheckboxType?this.questionTagList:this.questionTypeList,this.placeHolderKey="QUESTION_TAG"==this.listCheckboxType?"lang_auto_select_tag":"lang_auto_select_type";let e="QUESTION_TAG"==this.listCheckboxType?this.testFinderService.questionTagSelectedObjs:this.testFinderService.questionTypeSelectedObjs;this.form.controls.selectControl.setValue(this.currentOptions.filter(i=>e.map(a=>a.key).includes(i.key))),this.form.valueChanges.subscribe(i=>{let a=this.getCurrentSelected();"QUESTION_TAG"==this.listCheckboxType?this.testFinderService.questionTagSelectedObjs=a:"QUESTION_TYPE"==this.listCheckboxType&&(this.testFinderService.questionTypeSelectedObjs=a),this.selectedEvent.emit(a)}),super.ngOnInit()}constructor(e){super(),this.testFinderService=e,this.selectedEvent=new t.vpe,this.ALL_KEY="ALL_KEY",this.questionTagList=[{key:this.ALL_KEY,value:"lang_auto_tat_ca"},{key:"NB",value:"Nh\u1eadn bi\u1ebft"},{key:"TH",value:"Th\xf4ng hi\u1ec3u"},{key:"VD",value:"V\u1eadn d\u1ee5ng"},{key:"VDC",value:"V\u1eadn d\u1ee5ng cao"}],this.questionTypeList=[{key:this.ALL_KEY,value:"lang_auto_tat_ca"},{key:"TN",value:"Tr\u1eafc nghi\u1ec7m"},{key:"TL",value:"T\u1ef1 lu\u1eadn"},{key:"\u0110T",value:"\u0110i\u1ec1n t\u1eeb"}],this.currentOptions=[],this.placeHolderKey="",this.form=new f.cw({selectControl:new f.NI([],{nonNullable:!0})})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(C5))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-select-search-dropdown"]],inputs:{listCheckboxType:"listCheckboxType"},outputs:{selectedEvent:"selectedEvent"},features:[t.qOj],decls:7,vars:8,consts:[[1,"new-select-design",3,"formGroup"],["appearance","outline"],["formControlName","selectControl","multiple","true",3,"ngClass","panelClass","disableOptionCentering","placeholder"],["azt-track-service","filter-multiple-select-kKzEUQdMs8l",3,"value","click",4,"ngFor","ngForOf"],["azt-track-service","filter-multiple-select-kKzEUQdMs8l",3,"value","click"]],template:function(e,i){1&e&&(t.TgZ(0,"form",0)(1,"mat-form-field",1)(2,"mat-select",2)(3,"mat-select-trigger")(4,"span"),t._uU(5),t.qZA()(),t.YNc(6,cz,3,4,"mat-option",3),t.qZA()()()),2&e&&(t.Q6J("formGroup",i.form),t.xp6(2),t.Q6J("ngClass",i.haveSelected?"custom-selected-text":"")("panelClass",t.DdM(7,uz))("disableOptionCentering",!0)("placeholder",i.currentPlaceHolder),t.xp6(3),t.Oqu(i.currentSelectValue),t.xp6(1),t.Q6J("ngForOf",i.currentOptions))},dependencies:[D.mk,D.sg,Lc.ey,rs.KE,vp.gD,vp.$L,f._Y,f.JJ,f.JL,f.sg,f.u,oo.M,jt.JV],styles:[".search-input[_ngcontent-%COMP%]{border:none!important;outline:none!important}.new-select-design[_ngcontent-%COMP%]{padding:0!important}form[_ngcontent-%COMP%]{display:flex;flex-direction:column}mat-label[_ngcontent-%COMP%]{display:block;font-size:14px;font-weight:700;color:#63738a}input[_ngcontent-%COMP%]{font-size:16px}.se-search[_ngcontent-%COMP%]{color:#008cff;font-size:22px}ngk-icon[_ngcontent-%COMP%]{cursor:pointer;fill:#0000008a}.mat-option.mat-option-disabled[_ngcontent-%COMP%]{color:#000!important}.no-results[_ngcontent-%COMP%]{display:block;line-height:1;font-size:14px;margin:1rem;text-align:center}.search-option[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;padding:15px 10px}.search-option[_ngcontent-%COMP%]   .ngk-search-icon[_ngcontent-%COMP%], .search-option[_ngcontent-%COMP%]   .se-search[_ngcontent-%COMP%]{margin-right:10px;margin-left:-16px}.search-option[_ngcontent-%COMP%]   .ngk-clear-icon[_ngcontent-%COMP%]{align-self:flex-end;margin-right:-16px}mat-error[_ngcontent-%COMP%]{color:#d6312b;margin-top:5px;font-size:16px}.custom-selected-text[_ngcontent-%COMP%]  .mat-select-placeholder{color:#000!important;opacity:1!important}"]}),n})();const mz=function(n){return{"skeleton-box-loading":n}};function hz(n,o){if(1&n&&t._UZ(0,"div",3),2&n){const e=t.oxw();t.Q6J("ngClass",t.VKq(1,mz,e.renderConfigObj.isFirstRender))}}function pz(n,o){if(1&n&&t._UZ(0,"azt-test-audio-ui",12),2&n){const e=t.oxw(2);t.Q6J("questionObj",e.questionObj)("isShowList",!0)}}const _z=function(n){return{"pb-2":n}},fz=function(n){return{"question-standalone-has-selected":n}};function gz(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",4)(1,"div",5),t._UZ(2,"azt-question-group-content-box",6),t.TgZ(3,"div",7),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.handleSelect(a.questionObj))}),t.YNc(4,pz,1,2,"azt-test-audio-ui",8),t.TgZ(5,"div",9),t._UZ(6,"azt-question-label-box",10),t.qZA(),t._UZ(7,"azt-question-content-box",11)(8,"azt-question-answer-view-content-box",11),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(1),t.Udp("font-size","1em")("line-height","1.7"),t.Q6J("id","question_render_container_"+e.questionObj.id)("ngClass",t.VKq(23,_z,e.questionObj.attachments.length>0)),t.xp6(1),t.Q6J("examObj",e.examObj)("questionObj",e.questionObj)("renderConfigObj",e.renderConfigObj)("questionGroupIdsSelected",e.questionGroupIdsSelected)("isTestFinderModule",!0),t.xp6(1),t.Q6J("ngClass",t.VKq(25,fz,!!e.questionIdsSelected.includes(e.questionObj.id))),t.xp6(1),t.Q6J("ngIf",e.questionObj.attachments.length>0),t.xp6(2),t.Q6J("examObj",e.examObj)("questionObj",e.questionObj)("renderConfigObj",e.renderConfigObj)("curQuestionIndex",e.curQuestionIndex),t.xp6(1),t.Q6J("examObj",e.examObj)("questionObj",e.questionObj)("renderConfigObj",e.renderConfigObj),t.xp6(1),t.Q6J("examObj",e.examObj)("questionObj",e.questionObj)("renderConfigObj",e.renderConfigObj)}}let xz=(()=>{class n extends l5.R{handleSelect(e){this.testFinderSupportService.sendQuestionSelectedEvent(e.id)}ngOnInit(){super.ngOnInit();let e=new c5.m(!1,!1,!1);super.initData(e,this.follower,this.questionObj)}constructor(e){super(),this.testFinderSupportService=e,this.follower=new u.p,this.curQuestionIndex=0,this.questionIdsSelected=[],this.questionGroupIdsSelected=[]}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(w5.c))},n.\u0275cmp=t.Xpm({type:n,selectors:[["azt-question-standalone-for-test-finder"]],inputs:{examObj:"examObj",questionObj:"questionObj",follower:"follower",curQuestionIndex:"curQuestionIndex",questionIdsSelected:"questionIdsSelected",questionGroupIdsSelected:"questionGroupIdsSelected"},features:[t.qOj],decls:4,vars:3,consts:[["load_effect_lazy","",1,"question-standalone-box",3,"id"],["class","question-standalone-loader-box",3,"ngClass",4,"ngIf","ngIfElse"],["elementRended",""],[1,"question-standalone-loader-box",3,"ngClass"],[1,"question-standalone-content-box"],[1,"question-standalone-container","box","question-standalone-for-test-finder",3,"id","ngClass"],[3,"examObj","questionObj","renderConfigObj","questionGroupIdsSelected","isTestFinderModule"],[1,"question-standalone-main-content","clickable",3,"ngClass","click"],[3,"questionObj","isShowList",4,"ngIf"],[1,"flex","items-center","justify-between"],[3,"examObj","questionObj","renderConfigObj","curQuestionIndex"],[3,"examObj","questionObj","renderConfigObj"],[3,"questionObj","isShowList"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0),t.YNc(1,hz,1,3,"div",1),t.YNc(2,gz,9,27,"ng-template",null,2,t.W1O),t.qZA()),2&e){const a=t.MAs(3);t.Q6J("id","question_render_element_"+i.questionObj.id),t.xp6(1),t.Q6J("ngIf",!i.renderConfigObj.isRenderElement)("ngIfElse",a)}},dependencies:[D.mk,D.O5,o4.C,u5.T,d5.J,m5.S,h5.L,p5.w],styles:['.pr-7[_ngcontent-%COMP%]{padding-right:28px}.w-38px[_ngcontent-%COMP%]{width:38px}.remove-grid[_ngcontent-%COMP%]{display:block!important}.question-standalone-loader-box[_ngcontent-%COMP%]{min-height:50px}  .skeleton-box-loading{width:100%;height:30px;max-width:100%;margin-bottom:5px;display:inline-block}  .skeleton-box-loading:after{position:absolute;inset:0;transform:translate(-100%);animation:_ngcontent-%COMP%_shimmer 2s infinite;content:""}.question-standalone-box[_ngcontent-%COMP%]{margin-bottom:30px;display:block;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 rgba(0, 0, 0, 0)),var(--tw-ring-shadow, 0 0 rgba(0, 0, 0, 0)),var(--tw-shadow);border-radius:.375rem}.question-standalone-container[_ngcontent-%COMP%]{padding:15px}.question-standalone-for-test-finder[_ngcontent-%COMP%]{border:none;margin-bottom:0;padding:0}.question-standalone-for-test-finder[_ngcontent-%COMP%]   .question-standalone-main-content[_ngcontent-%COMP%]{padding:15px;border:1px solid rgb(228,228,228)}.group-of-question-standalone-for-test-finder[_ngcontent-%COMP%]{padding:15px!important;border:1px solid rgb(228,228,228)!important}.question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid #2262AE!important;outline:3px solid rgba(125,160,201,.65)!important}.group-of-question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid green!important;outline:3px solid rgba(0,193,0,.321)!important}.question-standalone-container[_ngcontent-%COMP%]:hover   .prev_question_btn[_ngcontent-%COMP%], .question-standalone-container[_ngcontent-%COMP%]:hover   .next_question_btn[_ngcontent-%COMP%]{visibility:visible}.question-standalone-label[_ngcontent-%COMP%]{font-weight:700}.question-standalone-content-box[_ngcontent-%COMP%]{position:relative}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]{color:#f44336;position:relative;padding-left:20px;display:flex;align-items:center}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]:before{content:"!";position:absolute;left:0;color:#fff;background:#f44336;width:15px;height:15px;text-align:center;border-radius:50%;font-size:smaller;display:flex;justify-content:center;align-items:center}.question-standalone-step-container-box[_ngcontent-%COMP%]{margin-bottom:50px}.group-content-of-question-standalone[_ngcontent-%COMP%]{margin-bottom:10px;font-weight:700}.answer[_ngcontent-%COMP%]{display:flex;align-items:center}.answer-label[_ngcontent-%COMP%]{width:20px;height:30px;min-width:20px;min-height:30px;display:flex;align-items:center;justify-content:flex-start;border-radius:50%;border-width:2px;border-style:solid;border-color:transparent}.answer-box[_ngcontent-%COMP%]{border-radius:0 0 3px 3px;padding:8px 20px;justify-content:space-between;align-items:center}.selected-answer[_ngcontent-%COMP%]{background-color:#f39c12;color:#fff}.answer-content-front[_ngcontent-%COMP%]{display:flex!important;flex-wrap:wrap;width:calc(100% - 30px)}.explainTxt[_ngcontent-%COMP%]{width:125px;font-weight:500;display:flex;align-items:center}#examHeader[_ngcontent-%COMP%]{display:block;border:1px solid #e7e7e7;border-radius:3px;overflow:hidden}.next_question_btn[_ngcontent-%COMP%]{position:absolute;right:10px;top:35%;padding:.35rem .45rem;background-color:#a3a5a670;border-radius:50%;visibility:hidden}.prev_question_btn[_ngcontent-%COMP%]{position:absolute;left:10px;top:35%;padding:.35rem .45rem;background-color:#a3a5a670;border-radius:50%;visibility:hidden}.prev_question_btn[_ngcontent-%COMP%]:hover, .next_question_btn[_ngcontent-%COMP%]:hover{visibility:visible}.arrow_btn[_ngcontent-%COMP%]{font-size:20px;vertical-align:middle;width:20px;height:20px;color:#fff;margin-left:auto!important;margin-right:auto!important;-webkit-user-select:none;user-select:none}.bottom_action[_ngcontent-%COMP%]{position:fixed;padding:15px;bottom:0;left:0;background:#312e2e;color:#fff;width:100%}.bottom_action[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]{display:block}.btn-ans-result[_ngcontent-%COMP%]{color:#fff;background-color:#f39c12}.show-list[_ngcontent-%COMP%]{max-width:200px}.show-list[_ngcontent-%COMP%]   .show-sheet[_ngcontent-%COMP%]   .listli[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:27px;height:27px;border-radius:50%;border:1px solid #347da5;display:flex;align-items:center;color:#fff;justify-content:center;font-size:12px;cursor:pointer;-webkit-user-select:none;user-select:none}.top_action[_ngcontent-%COMP%]{position:fixed;padding:10px;top:0;left:0;background:#312e2e;color:#fff;width:100%}.scrollSheetMobile[_ngcontent-%COMP%]{max-height:200px;overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.scrollSheetMobile[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.notify-badge[_ngcontent-%COMP%]{position:absolute;right:3px;top:3px;text-align:center;color:#afafaf;padding:0;font-size:20px;cursor:pointer}.attach-container[_ngcontent-%COMP%]{background:#fff;padding:10px 0 0;border-radius:5px;width:83.33%;border:1px solid #e8e8e8}.answer-review[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:50%;border:1px solid rgb(52,125,165);display:flex;align-items:center;color:#fff;justify-content:center;font-size:15px;-webkit-user-select:none;user-select:none}.border-none[_ngcontent-%COMP%]{border:none!important}.bg-question[_ngcontent-%COMP%]{margin-top:15px;padding:15px 10px;background:#fff}.question-pending-part[_ngcontent-%COMP%]{width:100%;height:50px}.pencil-edit[_ngcontent-%COMP%]{position:absolute;top:-5px;right:-5px;width:30px;height:30px;border-radius:50%;text-align:center;background:darkgrey;z-index:9999}.pencil-edit[_ngcontent-%COMP%]   .lucide[_ngcontent-%COMP%]{color:#fff;stroke-width:2.5px;height:29px}.margin-question-bar[_ngcontent-%COMP%]{margin-top:calc(3rem + 40px)!important}.sheet-screen[_ngcontent-%COMP%]{max-height:calc(100vh - 140px);overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.sheet-screen[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}  .layout{display:grid;margin:20px 0;grid-row-gap:20px}  .layout-4{grid-template-columns:1fr 1fr 1fr 1fr}  .layout-2{grid-template-columns:1fr 1fr}  .layout-1{grid-template-columns:1fr}  .question-standalone-content-box{max-width:100%;overflow-x:auto;overflow-y:hidden}  #boxContentQuestion .question-standalone-container{max-width:800px}@keyframes _ngcontent-%COMP%_shimmer{to{transform:translate(100%)}}@media (max-width: 768px){.answer-content-front[_ngcontent-%COMP%]{justify-content:center}.btn-ans-result[_ngcontent-%COMP%]{margin-right:auto!important}}@media (max-width: 800px){  #boxContentQuestion .question-standalone-container{max-width:calc(90vw - 16px)!important}}']}),n})();function bz(n,o){if(1&n&&t._UZ(0,"azt-question-standalone-for-test-finder",3),2&n){const e=t.oxw(),i=e.$implicit,a=e.index,r=t.oxw();t.Q6J("examObj",r.exam)("hidden",!i.isShow)("follower",r.followerRenderQuest)("questionObj",i)("curQuestionIndex",a)("questionIdsSelected",r.questionIdsSelected)("questionGroupIdsSelected",r.questionGroupIdsSelected)}}function vz(n,o){if(1&n&&(t.ynx(0),t.YNc(1,bz,1,7,"azt-question-standalone-for-test-finder",2),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.exam)}}let yz=(()=>{class n extends St.Q{getTagsOfQuestion(e){let i=[];return e.tags?.forEach(a=>{a.code&&i.push(a.code)}),i}getFilterTagValue(e){let i=[];return e.forEach(a=>{i.push(a.key)}),i}getFilterTypeValue(e){let i=[];return e.forEach(a=>{"TN"==a.key?(i.push(1),i.push(2)):"TL"==a.key?i.push(3):"\u0110T"==a.key&&i.push(4)}),i}checkValidTagQuestion(e,i){let a=!1;return e.forEach(r=>{this.commonService.isExistInArray(i,r)&&(a=!0)}),a}ngOnChanges(){let e=this.getFilterTagValue(this.filterTag),i=this.getFilterTypeValue(this.filterType);for(let a=0;a<this.questionList.length;a++){let r=this.getTagsOfQuestion(this.questionList[a]);this.questionList[a].isShow=e.length>0&&!i.length?!!this.checkValidTagQuestion(r,e):i.length>0&&!e.length?!!this.commonService.isExistInArray(i,this.questionList[a].answerType):!(e.length>0&&i.length>0)||!!this.checkValidTagQuestion(r,e)&&!!this.commonService.isExistInArray(i,this.questionList[a].answerType)}}ngOnInit(){this.followerRenderQuest.setNumQuest(this.questionList.length),this.questionList.forEach(e=>e.isRoleTeacher=!0),super.ngOnInit()}constructor(e){super(),this.commonService=e,this.questionList=[],this.filterTag=[],this.filterType=[],this.questionIdsSelected=[],this.questionGroupIdsSelected=[],this.followerRenderQuest=new u.p}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(mi.z))},n.\u0275cmp=t.Xpm({type:n,selectors:[["azt-preview-list-question"]],inputs:{exam:"exam",questionList:"questionList",filterTag:"filterTag",filterType:"filterType",questionIdsSelected:"questionIdsSelected",questionGroupIdsSelected:"questionGroupIdsSelected"},features:[t.qOj,t.TTD],decls:2,vars:1,consts:[["id","boxContentQuestion"],[4,"ngFor","ngForOf"],[3,"examObj","hidden","follower","questionObj","curQuestionIndex","questionIdsSelected","questionGroupIdsSelected",4,"ngIf"],[3,"examObj","hidden","follower","questionObj","curQuestionIndex","questionIdsSelected","questionGroupIdsSelected"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.YNc(1,vz,2,1,"ng-container",1),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngForOf",i.questionList))},dependencies:[D.sg,D.O5,xz],encapsulation:2}),n})();const wz=["colItem"],Cz=["resizeBarH"],Tz=["aztColResizable",""];function kz(n,o){1&n&&(t.TgZ(0,"div",6)(1,"div",2),t.Hsn(2,1),t.qZA()())}const Az=[[["","colLeftContent",""]],[["","colRightContent",""]]],Sz=function(n){return{width:n}},Oz=["[colLeftContent]","[colRightContent]"];let Ez=(()=>{class n extends St.Q{constructor(){super(...arguments),this.hasColRight=!1,this.width=0,this.x=0,this.y=0,this.leftWidth=0,this.handleMouseUp=e=>{this.resizeBarH&&this.resizeBarH.nativeElement.classList.remove("hover"),this.resizeBarH?.nativeElement.style.removeProperty("cursor"),document.body.style.removeProperty("cursor"),this.colItem?.nativeElement.style.removeProperty("user-select"),this.colItem?.nativeElement.style.removeProperty("pointer-events"),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp)},this.handleMouseMove=e=>{if(this.colItem){let i=this.colItem.nativeElement;i.style.width=`${this.leftWidth+(e.clientX-this.x)}px`,i.style.userSelect="none",i.style.pointerEvents="none",document.body.style.cursor="col-resize"}}}handleMouseDown(e){this.colItem&&(this.x=e.clientX,this.y=e.clientY,this.leftWidth=this.colItem.nativeElement.getBoundingClientRect().width,this.resizeBarH&&this.resizeBarH.nativeElement.classList.add("hover"),document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseUp))}}return n.\u0275fac=function(){let o;return function(i){return(o||(o=t.n5z(n)))(i||n)}}(),n.\u0275cmp=t.Xpm({type:n,selectors:[["","aztColResizable",""]],viewQuery:function(e,i){if(1&e&&(t.Gf(wz,5),t.Gf(Cz,5)),2&e){let a;t.iGM(a=t.CRH())&&(i.colItem=a.first),t.iGM(a=t.CRH())&&(i.resizeBarH=a.first)}},inputs:{hasColRight:"hasColRight",width:"width"},features:[t.qOj],attrs:Tz,ngContentSelectors:Oz,decls:7,vars:4,consts:[[1,"col-item","border-r","border-slate-400","dark:border-darkmode-400",3,"ngStyle"],["colItem",""],[1,"col-content"],[1,"resize-bar","resize-bar-h",3,"mousedown"],["resizeBarH",""],["class","col-right",4,"ngIf"],[1,"col-right"]],template:function(e,i){1&e&&(t.F$t(Az),t.TgZ(0,"div",0,1)(2,"div",2),t.Hsn(3),t.qZA(),t.TgZ(4,"div",3,4),t.NdJ("mousedown",function(r){return i.handleMouseDown(r)}),t.qZA()(),t.YNc(6,kz,3,0,"div",5)),2&e&&(t.Q6J("ngStyle",t.VKq(2,Sz,i.hasColRight?"60%":i.width?i.width+"px":"100%")),t.xp6(6),t.Q6J("ngIf",i.hasColRight))},dependencies:[D.O5,D.PC],styles:[".col-item[_ngcontent-%COMP%]{min-width:150px;min-height:150px;height:100%;position:relative}.col-item[_ngcontent-%COMP%]   .resize-bar[_ngcontent-%COMP%]{position:absolute;background-color:transparent}.col-item[_ngcontent-%COMP%]   .resize-bar[_ngcontent-%COMP%]:hover{background-color:#2262ae;cursor:col-resize}.col-item[_ngcontent-%COMP%]   .resize-bar.hover[_ngcontent-%COMP%]{background-color:#2262ae}.col-item[_ngcontent-%COMP%]   .resize-bar.resize-bar-h[_ngcontent-%COMP%]{width:3px;right:0;top:0;bottom:0}.col-right[_ngcontent-%COMP%]{flex:auto}.col-content[_ngcontent-%COMP%]{height:100%;padding:10px;overflow-y:auto;overflow-x:hidden}"]}),n})();function Mz(n,o){1&n&&(t.TgZ(0,"span",23),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_auto_chia_se")))}const T5=function(n,o){return{selected:n,last:o}};function Iz(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",17),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw(2).$implicit,l=t.oxw(2);return t.KtG(l.clickToCategoryObj(s,r))}),t.O4$(),t.TgZ(1,"svg",18),t._UZ(2,"path",19),t.qZA(),t.kcU(),t.TgZ(3,"span",20),t.ALo(4,"mytranslate"),t.TgZ(5,"span"),t._uU(6),t.ALo(7,"mytranslate"),t.qZA()(),t.YNc(8,Mz,3,3,"span",21),t._UZ(9,"mat-spinner",22),t.qZA()}if(2&n){const e=o.$implicit,i=t.oxw(2),a=i.$implicit;t.Q6J("ngClass",t.WLB(10,T5,a.currentCategoryObj&&a.currentCategoryObj.id==e.id,i.last&&a.currentCategoryObj&&a.currentCategoryObj.id==e.id)),t.xp6(3),t.Q6J("title",t.lcZ(4,6,e.name)),t.xp6(3),t.Oqu(t.lcZ(7,8,e.name)),t.xp6(2),t.Q6J("ngIf",-1==e.id),t.xp6(1),t.Q6J("strokeWidth",2)("diameter",24)}}function Lz(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",24),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw(2).$implicit,l=t.oxw(2);return t.KtG(l.clickToDocumentObj(s,r))}),t.TgZ(1,"div",25),t.O4$(),t.TgZ(2,"svg",26),t._UZ(3,"path",27),t.qZA()(),t.kcU(),t.TgZ(4,"span",20),t._uU(5),t.qZA(),t._UZ(6,"mat-spinner",22),t.qZA()}if(2&n){const e=o.$implicit,i=t.oxw(2),a=i.$implicit;t.Q6J("ngClass",t.WLB(5,T5,a.currentDocumentObj&&a.currentDocumentObj.exam&&a.currentDocumentObj.exam.id==(null==e.exam?null:e.exam.id),i.last&&a.currentDocumentObj&&a.currentDocumentObj.exam&&a.currentDocumentObj.exam.id==(null==e.exam?null:e.exam.id))),t.xp6(4),t.Q6J("title",e.name),t.xp6(1),t.Oqu(e.name),t.xp6(1),t.Q6J("strokeWidth",2)("diameter",24)}}function Pz(n,o){if(1&n&&(t.TgZ(0,"div",13)(1,"div",14),t.YNc(2,Iz,10,13,"div",15),t.YNc(3,Lz,7,8,"div",16),t.qZA()()),2&n){const e=t.oxw(),i=e.last,a=e.$implicit,r=t.oxw(2);t.Q6J("width",300)("id",!r.testFinderService.examFinderModel.isShowQuestionObjs&&i?"col-last":""),t.xp6(2),t.Q6J("ngForOf",a.categoryObjs),t.xp6(1),t.Q6J("ngForOf",a.documentObjs)}}function Nz(n,o){1&n&&t._UZ(0,"azt-loading-effect")}function Zz(n,o){1&n&&(t.TgZ(0,"div",31),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_auto_thu_muc_trong")))}function Dz(n,o){if(1&n&&(t.TgZ(0,"div",28)(1,"div",14),t.YNc(2,Nz,1,0,"azt-loading-effect",29),t.YNc(3,Zz,3,3,"ng-template",null,30,t.W1O),t.qZA()()),2&n){const e=t.MAs(4),i=t.oxw(3);t.Q6J("id",i.testFinderService.examFinderModel.isShowQuestionObjs?"":"col-last")("width",300),t.xp6(2),t.Q6J("ngIf",i.isLoadingSubData)("ngIfElse",e)}}function jz(n,o){if(1&n&&(t.ynx(0),t.YNc(1,Pz,4,4,"div",11),t.YNc(2,Dz,5,4,"ng-template",null,12,t.W1O),t.BQk()),2&n){const e=o.$implicit,i=t.MAs(3);t.xp6(1),t.Q6J("ngIf",e.categoryObjs.length>0||e.documentObjs.length>0)("ngIfElse",i)}}function qz(n,o){1&n&&t._UZ(0,"azt-loading-effect")}function Fz(n,o){if(1&n&&t._UZ(0,"azt-preview-list-question",35),2&n){const e=t.oxw(4);t.Q6J("exam",e.testFinderService.examFinderModel.currentDocumentObj)("questionList",e.testFinderService.examFinderModel.currentQuestionObjs)("filterTag",e.questionTag)("filterType",e.questionType)("questionIdsSelected",e.testFinderService.questionIdsSelected)("questionGroupIdsSelected",e.testFinderService.questionGroupIdsSelected)}}function Qz(n,o){if(1&n&&t.YNc(0,Fz,1,6,"azt-preview-list-question",34),2&n){const e=t.oxw(3);t.Q6J("ngIf",e.testFinderService.examFinderModel.currentDocumentObj&&e.testFinderService.examFinderModel.currentQuestionObjs)}}function Rz(n,o){if(1&n&&(t.TgZ(0,"div",32)(1,"div",33),t.YNc(2,qz,1,0,"azt-loading-effect",29),t.YNc(3,Qz,1,1,"ng-template",null,30,t.W1O),t.qZA()()),2&n){const e=t.MAs(4),i=t.oxw(2);t.xp6(2),t.Q6J("ngIf",i.isLoadingSubData)("ngIfElse",e)}}function Uz(n,o){if(1&n&&(t.ynx(0),t.YNc(1,jz,4,2,"ng-container",9),t.YNc(2,Rz,5,2,"div",10),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.testFinderService.examFinderModel.levelObjs),t.xp6(1),t.Q6J("ngIf",e.testFinderService.examFinderModel.isShowQuestionObjs)}}function Bz(n,o){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.TgZ(3,"b"),t._uU(4),t.qZA()()),2&n){const e=t.oxw();t.xp6(1),t.hij(" ",t.lcZ(2,2,"lang_auto_so_cau_da_chon"),":\xa0"),t.xp6(3),t.Oqu(e.testFinderService.examFinderModel.selectedQuestionObjs.length)}}function zz(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"span",39),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.toggleTooltip())}),t._uU(1),t.qZA()}if(2&n){const e=t.oxw(2);t.xp6(1),t.hij(" ",e.getTooltipText," ")}}function Jz(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",36),t.YNc(1,zz,2,1,"span",37),t.TgZ(2,"span"),t._uU(3),t.ALo(4,"mytranslate"),t.qZA(),t.TgZ(5,"input",38),t.NdJ("focus",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.showTooltip=!0)})("keyup.enter",function(a){t.CHM(e);const r=t.oxw();return t.KtG(r.enterToFireChooseButton(a))})("ngModelChange",function(a){t.CHM(e);const r=t.oxw();return t.KtG(r.totalRandomQuestion=a)}),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.showTooltip&&e.testFinderService.examFinderModel.hasSelectedItem),t.xp6(2),t.Oqu(t.lcZ(4,3,"lang_auto_nhap_so_cau_can_lay")),t.xp6(2),t.Q6J("ngModel",e.totalRandomQuestion)}}const Hz=function(n){return{loading:n}};let Gz=(()=>{class n extends St.Q{cleanName(e){let i=e;return i=i.replaceAll(/[\[\],\.\-]+/g,""),i}replaceFilterCodeStr(e){let i="";return e.forEach((a,r)=>{r<e.length-1?a.includes("[@F:")?i+=a+",":i+=a+".":i.includes("[@F:")?(i=i.substring(0,i.lastIndexOf(",")),i+="."+a):i+=a}),i}get getTooltipText(){let e=this.commonService.myTranslateInstant("lang_auto_lay_ngau_nhien_so_cau_hoi_o")??"",i=this.commonService.myTranslateInstant("lang_auto_nhom_thuong")?.toUpperCase()??"",a=this.commonService.myTranslateInstant("lang_auto_thu_muc_thuong")?.toUpperCase()??"",r=this.commonService.myTranslateInstant("lang_auto_de_thi_thuong")?.toUpperCase()??"",s=this.commonService.myTranslateInstant("lang_auto_dang_chon")??"",l=e+" ";return l+=null!=this.testFinderService.examFinderModel.selectedGroupId?i:this.testFinderService.examFinderModel.isShowQuestionObjs?" "+r:a,l+=" "+s,l}get totalQuestionSelected(){return this.testFinderService.examFinderModel.selectedQuestionObjs.length}closeDialog(e){this.testFinderService.clearSelectedQuestionAndQuestionGroup(),this.closeTestFinder.emit(e)}toggleTooltip(){this.showTooltip=!this.showTooltip}changeTypeQuestion(e){this.questionType=e}changeTagQuestion(e){this.questionTag=e}enterToFireChooseButton(e){this.testFinderService.examFinderModel.selectedQuestionObjs.length<=0||this.statusObj.loading||this.clickToChooseButton()}clickToChooseButton(){this.totalRandomQuestion<=0&&(this.testFinderService.handleGetAllQuestionStringCode(),this.testFinderService.examFinderModel.selectedQuestionObjs.length<=0)?this.showErrorSnack("lang_auto_ban_can_nhap_so_luong_it_nhat_1_cau"):this.testFinderService.examFinderModel.selectedQuestionObjs.length>0?this.handleSelectDirectQuestionObjs():this.handleSelectRandomQuestionInCategoryObj()}handleSelectDirectQuestionObjs(){let e=this.commonService.myTranslateInstant("lang_auto_nhom")??"",i=this.commonService.myTranslateInstant("lang_auto_lay_tieu_de")??"",a=[],r=[],s=this.testFinderService.getCurrentLevelPathObjs(),c=this.testFinderService.examFinderModel.currentQuestionObjs;this.testFinderService.examFinderModel.selectedQuestionObjs.forEach(d=>{let h=[...s];null!=d.groupInfo?.groupId&&h.push({id:d.groupInfo.groupId,type:eg.Group,name:`${d.groupInfo.groupId}`,shareType:void 0,questionGroupId:d.groupInfo.groupId}),h.push({id:d.id,type:eg.Question,name:`${d.sourceLabel??"T\xean c\xe2u h\u1ecfi"}`,shareType:void 0});let x,_=[];for(let b=0;b<h.length;b++){const T=h[b];let P=this.commonService.myTranslateInstant(this.cleanName(T.name))??this.cleanName(T.name);if(1==T.type&&_.push(`[@C${T.id}:${(T.shareType&&"user"===T.shareType?`:${T.shareType}-`:null)??""}${P}]`),2==T.type&&_.push(`[@T${T.id}:${P}]`),3==T.type&&null!=T.questionGroupId){x=T.questionGroupId;let q=c.filter(B=>B.groupInfo?.groupId&&B.groupInfo?.groupId==x).length;q&&_.push(`[@G${P}:${q}-${e} ${P}]`)}4==T.type&&_.push(`[@Q${T.id}:${P.replace("[PDFv2] ","")}]`)}if(null!=x&&!r.includes(x)){let b=[..._];b[b.length-1]=`[${i}]`,a.push(b.join(".")),r.push(x)}a.push(_.join("."))}),this.closeDialog(a)}handleSelectRandomQuestionInCategoryObj(){let e=this.commonService.myTranslateInstant("lang_auto_nhom")??"",i=this.commonService.myTranslateInstant("lang_auto_cau_thuong")??"",a=this.commonService.myTranslateInstant("lang_auto_lay_ngau_nhien")??"",r=[];this.testFinderService.getCurrentLevelPathObjs().forEach(h=>{let _=this.commonService.myTranslateInstant(this.cleanName(h.name))??this.cleanName(h.name);1==h.type&&r.push(`[@C${h.id}:${(h.shareType&&"user"===h.shareType?`:${h.shareType}-`:null)??""}${_}]`),2==h.type&&r.push(`[@T${h.id}:${_}]`)}),this.questionType.length>0&&this.questionType.forEach(h=>{r.push(`[@F:${h.key}]`)}),this.questionTag.length>0&&this.questionTag.forEach(h=>{r.push(`[@F:${h.key}]`)});let c=this.testFinderService.examFinderModel.selectedGroupId;if(c){let h=this.testFinderService.examFinderModel.currentQuestionObjs.filter(_=>_.groupInfo?.groupId==c).length;r.push(`[@G${c}:${h}-${e} ${c}]`),r.push(`[${a} ${this.totalRandomQuestion} ${i}]`)}else r.push(`[${a} ${this.totalRandomQuestion} ${i}]`);let d=this.replaceFilterCodeStr(r);this.closeDialog([d])}clickToCategoryObj(e,i){if(e.currentCategoryObj?.id==i.id)return;this.testFinderService.selectCategoryObjInOneLevel(e,i),this.isLoadingSubData=!0,this.showTooltip=!0,this.destroyAllSubs();let a={categoryId:i.id,documentType:void 0,shareType:i.shareType,fileType:"exam_online",classroomId:void 0,name:void 0,suggestExamPurpose:void 0,lite:1,getGlobal:0,page:1,itemPerPage:-1};this.waitDestroy(this.documentService.apiDocumentsGet(a.categoryId,a.documentType,a.shareType,a.fileType,a.classroomId,a.name,a.suggestExamPurpose,a.lite,a.getGlobal,a.page,a.itemPerPage).subscribe(r=>{if(1==r.success){var s=r.data?.categoryObjs??[],l=this.testFinderService.convertDocumentFile(r.data?.documentObjs??[]);this.testFinderService.pushCategoryData(e,i,s,l)}else this.errorStatusObj(r.message,!0);this.isLoadingSubData=!1}))}clickToDocumentObj(e,i){!i.exam?.id||e.currentDocumentObj?.exam?.id==i.exam?.id||(this.testFinderService.selectDocumentObjInOneLevel(e,i),this.isLoadingSubData=!0,this.showTooltip=!0,this.destroyAllSubs(),this.waitDestroy(this.examService.apiExamGetQuestionsIdGet(i.exam.id).subscribe(a=>{if(a.success&&a.data?.examObj){let r={...a.data?.examObj,attended:0},s=this.commonService.castObj(a.data?.questionObjs)??[];this.testFinderService.pushQuestionData(e,i,r,s)}else this.errorStatusObj(a.message,!0);this.isLoadingSubData=!1})))}loadInitData(){this.initStatusObj(),this.waitDestroy(this.documentService.apiDocumentsGet(0,undefined,undefined,"exam_online",undefined,undefined,undefined,1,0,1,-1).subscribe(i=>{if(1==i.success){var a=this.testFinderService.convertDocumentFile(i.data?.documentObjs??[]);this.testFinderService.pushDataToFirstLevel(i.data?.categoryObjs??[],a),this.stopStatusObj()}else this.errorStatusObj(i.message,!0)}))}ngOnInit(){this.testFinderService.examFinderModel.isFirstTimeToLoadData&&this.loadInitData(),super.ngOnInit()}constructor(e,i,a){super(),this.testFinderService=e,this.documentService=i,this.examService=a,this.closeTestFinder=new t.vpe,this.questionType=this.testFinderService.questionTypeSelectedObjs,this.questionTag=this.testFinderService.questionTagSelectedObjs,this.totalRandomQuestion=0,this.isLoadingSubData=!1,this.showTooltip=!0}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(C5),t.Y36(Ke.Zg),t.Y36(Ke.Oe))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-test-finder"]],outputs:{closeTestFinder:"closeTestFinder"},features:[t.qOj],decls:18,vars:18,consts:[["azt-track-service","test-finder-De2lZomoHz6",1,"close-button","clickable",3,"matTooltip","click"],["id","grid-parent",1,"grid-parent",3,"ngClass"],[4,"ngIf"],["id","examSaveBtns",1,"bg-slate-200","dark:bg-darkmode-400"],[1,"left","test-finder"],[2,"margin-left","3px",3,"listCheckboxType","selectedEvent"],[1,"right"],["class","random",4,"ngIf"],["azt-track-service","test-finder-cpsVY9x_hjE",1,"btn","btn-primary","w-24","ml-3",3,"disabled","click"],[4,"ngFor","ngForOf"],["class","preview-pane","id","col-last",4,"ngIf"],["aztColResizable","",3,"width","id",4,"ngIf","ngIfElse"],["emptyCol",""],["aztColResizable","",3,"width","id"],["colLeftContent",""],["azt-track-service","test-finder-s_cSxPWj6","class","doc-item doc-item-cate clickable pb-2 pt-2","style","border-radius: 0.375rem;",3,"ngClass","click",4,"ngFor","ngForOf"],["azt-track-service","test-finder-1CILmbro_M","class","doc-item doc-item-file clickable pb-2 pt-2","style","border-radius: 0.375rem;",3,"ngClass","click",4,"ngFor","ngForOf"],["azt-track-service","test-finder-s_cSxPWj6",1,"doc-item","doc-item-cate","clickable","pb-2","pt-2",2,"border-radius","0.375rem",3,"ngClass","click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"w-6","h-6","mr-3","pl-1","text-slate-600","dark:text-slate-500"],["d","M9.828 3h3.982a2 2 0 0 1 1.992 2.181l-.637 7A2 2 0 0 1 13.174 14H2.825a2 2 0 0 1-1.991-1.819l-.637-7a1.99 1.99 0 0 1 .342-1.31L.5 3a2 2 0 0 1 2-2h3.672a2 2 0 0 1 1.414.586l.828.828A2 2 0 0 0 9.828 3zm-8.322.12C1.72 3.042 1.95 3 2.19 3h5.396l-.707-.707A1 1 0 0 0 6.172 2H2.5a1 1 0 0 0-1 .981l.006.139z"],[1,"cat-name",3,"title"],["class","whitespace-nowrap ml-2 py-0.5 px-2 rounded-full text-xs bg-primary text-white font-medium",4,"ngIf"],["color","accent",3,"strokeWidth","diameter"],[1,"whitespace-nowrap","ml-2","py-0.5","px-2","rounded-full","text-xs","bg-primary","text-white","font-medium"],["azt-track-service","test-finder-1CILmbro_M",1,"doc-item","doc-item-file","clickable","pb-2","pt-2",2,"border-radius","0.375rem",3,"ngClass","click"],[1,"file-icon","pl-1"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"w-6","h-6","mr-1","text-pending"],["d","M9.293 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4.707A1 1 0 0 0 13.707 4L10 .293A1 1 0 0 0 9.293 0zM9.5 3.5v-2l3 3h-2a1 1 0 0 1-1-1zm1.354 4.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 1 1 .708-.708L7.5 9.793l2.646-2.647a.5.5 0 0 1 .708.708z"],["aztColResizable","",3,"id","width"],[4,"ngIf","ngIfElse"],["doneLoading",""],[1,"text-center","alert","alert-info"],["id","col-last",1,"preview-pane"],[1,"preview-content"],[3,"exam","questionList","filterTag","filterType","questionIdsSelected","questionGroupIdsSelected",4,"ngIf"],[3,"exam","questionList","filterTag","filterType","questionIdsSelected","questionGroupIdsSelected"],[1,"random"],["azt-track-service","test-finder-ZvOINp82Nc","class","qv_tooltip",3,"click",4,"ngIf"],["type","text","appOnlyNumber","","name","random","id","random",1,"form-control",3,"ngModel","focus","keyup.enter","ngModelChange"],["azt-track-service","test-finder-ZvOINp82Nc",1,"qv_tooltip",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"mat-icon",0),t.NdJ("click",function(){return i.closeDialog(void 0)}),t.ALo(1,"mytranslate"),t._uU(2,"close"),t.qZA(),t.TgZ(3,"div",1),t.YNc(4,Uz,3,2,"ng-container",2),t.qZA(),t.TgZ(5,"div",3)(6,"form",4)(7,"b"),t._uU(8),t.ALo(9,"mytranslate"),t.qZA(),t.TgZ(10,"app-select-search-dropdown",5),t.NdJ("selectedEvent",function(r){return i.changeTagQuestion(r)}),t.qZA(),t.TgZ(11,"app-select-search-dropdown",5),t.NdJ("selectedEvent",function(r){return i.changeTypeQuestion(r)}),t.qZA()(),t.TgZ(12,"div",6),t.YNc(13,Bz,5,4,"span",2),t.YNc(14,Jz,6,5,"div",7),t.TgZ(15,"button",8),t.NdJ("click",function(){return i.clickToChooseButton()}),t._uU(16),t.ALo(17,"mytranslate"),t.qZA()()()),2&e&&(t.s9C("matTooltip",t.lcZ(1,10,"lang_auto_dong")),t.xp6(3),t.Q6J("ngClass",t.VKq(16,Hz,i.statusObj.loading)),t.xp6(1),t.Q6J("ngIf",i.testFinderService.examFinderModel.levelObjs.length>0),t.xp6(4),t.hij("",t.lcZ(9,12,"lang_testbank_tested_list_sort"),": "),t.xp6(2),t.Q6J("listCheckboxType","QUESTION_TAG"),t.xp6(1),t.Q6J("listCheckboxType","QUESTION_TYPE"),t.xp6(2),t.Q6J("ngIf",i.testFinderService.examFinderModel.selectedQuestionObjs.length>0),t.xp6(1),t.Q6J("ngIf",i.testFinderService.examFinderModel.selectedQuestionObjs.length<=0),t.xp6(1),t.Q6J("disabled",!i.testFinderService.examFinderModel.hasSelectedItem||i.statusObj.loading),t.xp6(1),t.hij(" ",t.lcZ(17,14,"lang_auto_chon")," "))},dependencies:[D.mk,D.sg,D.O5,Jo.Hw,x0.Ou,Mi.gM,f._Y,f.Fj,f.JJ,f.JL,f.On,f.F,si.l,qr.Y,dz,yz,Ez,jt.JV],styles:['.close-button[_ngcontent-%COMP%]{position:absolute;right:5px;top:5px;color:#9c9c9c;z-index:10}.close-button[_ngcontent-%COMP%]:hover{color:#747474;cursor:pointer}.grid-parent[_ngcontent-%COMP%]{min-width:300;width:100%;min-height:150px;height:100%;display:flex;flex-wrap:nowrap;overflow-y:auto;position:relative}.grid-parent[_ngcontent-%COMP%]   .doc-item[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;align-items:center}.grid-parent[_ngcontent-%COMP%]   .doc-item.doc-item-cate[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:orange;margin-right:5px;width:40px;height:40px;min-width:40px;font-size:40px}.grid-parent[_ngcontent-%COMP%]   .doc-item.doc-item-cate[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{margin-left:5px;padding:5px}.grid-parent[_ngcontent-%COMP%]   .doc-item.doc-item-file[_ngcontent-%COMP%]   .file-icon[_ngcontent-%COMP%]{margin-right:5px;position:relative}.grid-parent[_ngcontent-%COMP%]   .doc-item.doc-item-file[_ngcontent-%COMP%]   .file-icon[_ngcontent-%COMP%]   .examTableIconObj[_ngcontent-%COMP%]{position:absolute;top:3px;left:5px;width:20px;background-image:url(https://cdn.jsdelivr.net/gh/azota889/storage_public/azota_assets/images/titlePublishExam.png);background-position:top;background-size:cover;overflow:hidden;height:20px}.grid-parent[_ngcontent-%COMP%]   .doc-item.selected[_ngcontent-%COMP%]{background-color:#2361ae}.grid-parent[_ngcontent-%COMP%]   .doc-item.selected[_ngcontent-%COMP%]   .cat-name[_ngcontent-%COMP%]{color:#fff}.grid-parent[_ngcontent-%COMP%]   .doc-item.selected.last[_ngcontent-%COMP%]{background-color:#2361ae}.grid-parent[_ngcontent-%COMP%]   .doc-item[_ngcontent-%COMP%]   .cat-name[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.grid-parent[_ngcontent-%COMP%]   .doc-item[_ngcontent-%COMP%]:hover{background-color:#7497c2}.grid-parent[_ngcontent-%COMP%]   .preview-pane[_ngcontent-%COMP%]{flex:1;min-width:800px;padding:15px;overflow-y:auto}.grid-parent[_ngcontent-%COMP%]   .preview-pane[_ngcontent-%COMP%]   .preview-content[_ngcontent-%COMP%]{width:100%;max-width:700px;height:100%;margin:0 auto}.grid-parent[_ngcontent-%COMP%]   .preview-pane[_ngcontent-%COMP%]   .preview-content[_ngcontent-%COMP%]   .question-item[_ngcontent-%COMP%]{border:1px solid rgb(231,231,231)}#examSaveBtns[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;height:50px}#examSaveBtns[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{padding-left:15px;flex:auto;display:flex;flex-wrap:wrap;align-items:center}#examSaveBtns[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{flex:auto;display:flex;justify-content:right;align-items:center;padding-right:15px}#examSaveBtns[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:35px;border:1px solid #eeeeee;margin-left:5px;padding:5px;width:100px}#examSaveBtns[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .random[_ngcontent-%COMP%]{display:flex;align-items:center}#examSaveBtns[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .random[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{color:#18a2b8;margin-right:.25rem}#examSaveBtns[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]{padding-left:50px;padding-right:50px;background-color:#2361ae}#examSaveBtns[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]:hover{background-color:#1e5395}#examSaveBtns[_ngcontent-%COMP%]   .btn-save.mat-button-disabled[_ngcontent-%COMP%]{background-color:#0000001f}.form-field-custom[_ngcontent-%COMP%]{background-color:#0000000a;border:1px solid rgba(206,212,218,.6980392157);border-radius:.25rem;margin-left:5px;width:auto!important}mat-spinner[_ngcontent-%COMP%]{display:none}@media screen and (max-width: 570px){#examSaveBtns[_ngcontent-%COMP%]{flex-wrap:wrap;height:auto;padding-top:5px;padding-bottom:5px}#examSaveBtns[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px;display:block;margin-bottom:5px;flex-wrap:wrap;align-items:center}#examSaveBtns[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   .random[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{flex:none}#examSaveBtns[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:80px!important}#examSaveBtns[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]{padding-right:30px;padding-left:30px}}.qv_tooltip[_ngcontent-%COMP%]{bottom:47px;right:110px;display:flex;font-size:11px;justify-content:space-between;position:absolute;z-index:999;background:#faebd7;padding:5px 10px;border-radius:5px;font-weight:500;color:#000;box-shadow:#091e4240 0 4px 8px -2px,#091e4214 0 0 0 1px}.qv_tooltip[_ngcontent-%COMP%]:before{content:"";position:absolute;top:29px;left:298px;border-left:10px solid transparent;border-right:10px solid transparent;border-top:10px solid #faebd7}']}),n})();var $z=M(92438),Yz=M(94960);const Kz=["editorContainer"];let Wz=(()=>{class n{initMonacoAction(){return new Promise(e=>{const i="assets/monaco-editor/min/vs";"object"!=typeof window.monaco?(this.loaderScript.type="text/javascript",this.loaderScript.setAttribute("async","false"),this.loaderScript.src=`${i}/loader.js`,this.loaderScript.addEventListener("load",()=>{window.require.config({paths:{vs:`${i}`}}),window.require(["vs/editor/editor.main"],()=>{e()})}),document.body.appendChild(this.loaderScript)):e()})}ngAfterViewInit(){this.initMonacoAction().then(()=>{this.initMonaco()})}ngAfterViewChecked(){this.drawer.isOpened()||setTimeout(()=>{this._editor&&this._editor.layout()},100)}constructor(e,i,a,r,s,l){this.drawer=e,this.cdnService=i,this.documentService=a,this.examService=r,this.infoService=s,this.commonService=l,this.loaderScript=document.createElement("script"),this.config="",this.onInit=new t.vpe,this.returnImageMap=new t.vpe}ngOnDestroy(){this._windowResizeSubscription&&this._windowResizeSubscription.unsubscribe(),this._editor&&(this._editor.dispose(),this._editor=void 0),this.loaderScript.parentNode&&this.loaderScript.parentNode.removeChild(this.loaderScript)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Yz.h),t.Y36(Gn.E),t.Y36(Ke.Zg),t.Y36(Ke.Oe),t.Y36(Pi.CM),t.Y36(mi.z))},n.\u0275cmp=t.Xpm({type:n,selectors:[["ng-component"]],viewQuery:function(e,i){if(1&e&&t.Gf(Kz,7),2&e){let a;t.iGM(a=t.CRH())&&(i._editorContainer=a.first)}},inputs:{config:"config"},outputs:{onInit:"onInit",returnImageMap:"returnImageMap"},decls:0,vars:0,template:function(e,i){},encapsulation:2}),n})();class ng{constructor(o){this.name=o}}class Vz extends ng{run(o){let e=o.getModel(),i=o.getSelection(),a={startLineNumber:i.startLineNumber,endLineNumber:i.endLineNumber,startColumn:i.startColumn,endColumn:i.endColumn},r=e.getValueInRange(a);o.executeEdits("",[{range:a,text:`<code>${r}</code>`}]),o.setPosition({lineNumber:i.endLineNumber,column:i.startColumn+6+r.length})}}class Xz extends ng{run(o){let e=o.getPosition();o.executeEdits("",[{range:{startLineNumber:e.lineNumber,endLineNumber:e.lineNumber,startColumn:e.column,endColumn:e.column},text:"________"}]),o.setPosition({lineNumber:e.lineNumber,column:e.column+8})}}class tJ extends ng{run(o){let e=o.getModel(),i=o.getSelection(),a={startLineNumber:i.startLineNumber,endLineNumber:i.endLineNumber,startColumn:i.startColumn,endColumn:i.endColumn},r=e.getValueInRange(a);o.executeEdits("",[{range:a,text:`\\( ${r} \\)`}]),o.setPosition({lineNumber:i.endLineNumber,column:i.startColumn+3+r.length})}}class s4 extends ng{constructor(o,e){super(o),this.tag=e}run(o){let e=o.getModel(),i=o.getSelection(),a={startLineNumber:i.startLineNumber,endLineNumber:i.endLineNumber,startColumn:i.startColumn,endColumn:i.endColumn},r=e.getValueInRange(a),s=r;r.indexOf(`!${this.tag}`)>=0?(s=s.replaceAll(`!${this.tag}`,""),s=s.replaceAll(/\[:\$(([^\$]|\$[^\]])+)\$\]/g,"$1")):s=r.startsWith("[!")?`[!${this.tag}`+r.substring(1):`[!${this.tag}:$${r}$]`,o.executeEdits("",[{range:a,text:s}])}}class eJ extends ng{run(o){let e=o.getSelection(),i=o.getModel(),a={startLineNumber:e.startLineNumber,endLineNumber:e.endLineNumber,startColumn:e.startColumn,endColumn:e.endColumn},r=i.getValueInRange(a);/^\[\*?[A-H]:[^\]]+\]$/.test(r)?(r=r.substring(r.indexOf(":")+1,r.length-2),o.executeEdits("",[{range:a,text:r}])):o.executeEdits("",[{range:a,text:`[A:${r}]`}])}}class nJ{constructor(){this.placeHolderRemoved=!1,this.decorations=[],this.parseChange=!0,this.hasError=!1}setIntellisense(o){this.azotaIntel=o}setSingleMode(o){this.azotaIntel?.setSingleMode(o)}setLang(o){this.lang=o,this.azotaIntel?.setLang(o)}registerPlugin(o,e){this._editor&&this._editor.addAction({id:o.name,label:o.name,keybindings:[this.monaco.KeyMod.CtrlCmd|e],contextMenuGroupId:"navigation",contextMenuOrder:1.5,run:function(i){o.run(i)}})}getCurLine(){return this._editor.getPosition().lineNumber}getCurLineText(){let o=this._editor.getPosition().lineNumber;return this._editor.getModel().getLineContent(o)}getLineText(o){return this._editor.getModel().getLineContent(o)}getCurQuest(){if(this.azotaIntel){let o=this.getCurLine()-1;return this.azotaIntel.getCurPos(o,50)[0]}}goToLine(o){this._editor.focus(),this._editor.setPosition({lineNumber:o,column:0}),this._editor.revealLineNearTop(o+1)}setPosition(o,e){let i={lineNumber:o,column:e};this._editor.focus(),this._editor.setPosition(i),this._editor.revealPositionNearTop(i)}insertDetails(o,e){let i=this.getLineText(o),r=[],s=i.replaceAll(/\s+/g," ").split("].[");s.splice(s.length-1);let l=s.join("].[")+"]";for(const c of e)r.push(l+`.[@Q${c}]`);if(r.length>0){let c=r.join("\n");this._editor.executeEdits("",[{range:{startLineNumber:o,endLineNumber:o,startColumn:0,endColumn:i.length+2},text:c}]),this._editor.setSelection({startLineNumber:o,endLineNumber:o,startColumn:0,endColumn:0})}}setError(o){this.hasError=o.length>0;let e=[],i=this._editor.getModel();for(const a of o){let r=a.split("|"),s=+r[0],l=r[1],c=i.getLineContent(s);e.push({startLineNumber:s,endLineNumber:s,startColumn:0,endColumn:c.length+1,message:l})}this.monaco.editor.setModelMarkers(i,"",e)}init(o,e,i,a){i&&this.setLang(i);let r=this;this.monaco=o;let s="azota",l=o.languages.getLanguages().filter(B=>B.id==s),c=l&&l.length>0;c||(o.languages.register({id:s}),o.languages.setMonarchTokensProvider(s,{operators:["=",">","<","!","~","?",":","==","<=",">=","!=","&&","||","++","--","+","-","*","/","&","|","^","%","<<",">>",">>>","+=","-=","*=","/=","&=","|=","^=","%=","<<=",">>=",">>>="],symbols:/[=><!~?:&|+\-*\/\^%]+/,tokenizer:{root:[[/^\s*C\xe2u\s*\d+/,"question-label"],[/^\s*Question\s*\d+/,"question-label"],[/\s+\*?[A-Ha-h][\.\)]/,"answer-label"],[/^\s*\*?[A-Ha-h][\.\)]/,"answer-label"],[/\[[^\]]+\]/,"expression"],[/^\s*L\u1eddi gi\u1ea3i\s*$/,"token"],[/^\s*GLOSSARY\s*$/,"token"],[/^\s*B\u1ea2NG \u0110\xc1P \xc1N\s*$/,"token"],[/^\s*B\u1ea3ng \u0111\xe1p \xe1n\s*$/,"token"],[/^\s*\-+H\u1ebeT\-+\s*$/,"token"],[/^\s*H\u01b0\u1edbng d\u1eabn gi\u1ea3i\s*$/,"token"],[/^\s*H\u01af\u1edaNG D\u1eaaN GI\u1ea2I\s*$/,"token"],[/^\s*Ch\u1ecdn\s*[A-Ha-h]\s*$/,"choose"],[/^\s*Answer keys\s*$/,"token"],[/^\s*ANSWER KEYS\s*$/,"token"],[/^\s*Answer key\s*$/,"token"],[/^\s*ANSWER KEY\s*$/,"token"],[/^\s*Answer Section\s*$/,"token"],[/^\s*\-+THE END\-+\s*$/,"token"],[/^\s*\-+END\-+\s*$/,"token"],[/^\s*Instructions\s*$/,"token"],[/^\s*INSTRUCTIONS\s*$/,"token"],[/^\s*Choose\s*[A-Ha-h]\s*$/,"choose"],[/^[IVX]+\s*[\.:].*$/,"section"],[/^Section+\s*[\dA-K]+[\.:].*$/,"section"],[/^Part+\s*[\dA-KVX]+[\.:].*$/,"section"],[/^Ph\u1ea7n+\s*[\dA-KVX]+[\.:].*$/,"section"],[/\\[a-z][a-z0-9]+/,"latex"],[/@symbols/,{cases:{"@operators":"operator","@default":""}}],{include:"@whitespace"},["[{}()\\[\\]]","@brackets"],["#+\\d","number.arg"],["\\-?(?:\\d+(?:\\.\\d+)?|\\.\\d+)\\s*(?:em|ex|pt|pc|sp|cm|mm|in)","number.len"]],whitespace:[["[ \\t\\r\\n]+","white"],["%.*$","comment"]]}}));let d="dark"==localStorage.getItem("mode_ui");var B;o.editor.defineTheme("azotaTheme",{base:d?"vs-dark":"vs",inherit:!0,rules:[{token:"question-label",foreground:d?"569cd6":"3437eb",fontStyle:"bold"},{token:"answer-label",foreground:d?"FF6464":"ff0000",fontStyle:"bold"},{token:"expression",foreground:"ab2428"},{token:"operator",foreground:"ab2428"},{token:"latex",foreground:"3437eb"},{token:"keyword",foreground:"2504da"},{token:"keyword.predefined",foreground:"2504da"},{token:"token",foreground:"8f4106",fontStyle:"bold"},{token:"choose",foreground:"000000",fontStyle:"bold"},{token:"section",foreground:"000000",fontStyle:"bold"}],colors:{"editor.foreground":d?"#d4d4d4":"#000000","editor.background":d?"#25304C":"#ffffff"}}),c||(o.languages.setLanguageConfiguration(s,{brackets:[["{","}"],["[","]"],["(",")"],["\\(","\\)"],["[*","*]"]]}),o.languages.registerCompletionItemProvider(s,{triggerCharacters:["@",".",","],provideCompletionItems:(B=(0,Ya.Z)(function*(W,G){if(!r.azotaIntel)return{suggestions:[]};let nt=W.getWordUntilPosition(G),At=W.getLineContent(G.lineNumber);return{suggestions:(yield r.azotaIntel.getSuggestions(G.lineNumber-1,G.column-1,nt.word,At)).map(et=>{let ot,Mt,vt=et.split("|"),Nt=o.languages.CompletionItemKind.Text,_t=vt[0];if(vt.length>2){switch(vt[2]){case"file":Nt=o.languages.CompletionItemKind.File,_t="2"+vt[0];break;case"folder":Nt=o.languages.CompletionItemKind.Folder,_t="1"+vt[0];break;case"class":Nt=o.languages.CompletionItemKind.Class,_t="3"+vt[3];break;case"function":Nt=o.languages.CompletionItemKind.Function,_t="3"+vt[3];break;case"snippet":Nt=o.languages.CompletionItemKind.Module,ot=o.languages.CompletionItemInsertTextRule.InsertAsSnippet,_t="0"}Mt={id:"editor.action.triggerSuggest",title:""}}return{label:vt[0],kind:Nt,insertText:vt[1],insertTextRules:ot,sortText:_t,command:Mt,documentation:{supportHtml:!0,value:vt[4]}}})}}),function(G,nt){return B.apply(this,arguments)})}));let _=o.editor.create(e,{theme:"azotaTheme",language:s,wordBasedSuggestions:!1,minimap:{enabled:!1},overviewRulerLanes:0,wordWrap:"on",tabSize:4,readOnly:a}),x=_.getModel();_.onMouseDown(function(B){"slider active"!=B.target.element.className&&(r.onChangePosCalback&&B.target.position&&r.onChangePosCalback(B.target.position.lineNumber,B.target.position.column),_.focus())});let b={domNode:null,getId:function(){return"my.content.widget"},getDomNode:function(){return this.domNode||this.domNode||(this.domNode=document.createElement("div"),this.domNode.innerHTML=r.lang?.myTranslateInstant("azt_lang_enter_at_to_choose_from_bank")??"Nh\u1eadp @ \u0111\u1ec3 ch\xe8n t\u1eeb ng\xe2n h\xe0ng c\xe1 nh\xe2n",this.domNode.style.color="grey",this.domNode.style.width="250px"),this.domNode},getPosition:function(){return{position:{lineNumber:1,column:2},preference:[o.editor.ContentWidgetPositionPreference.BELOW]}}};_.addContentWidget(b),x.onDidChangeContent(B=>{let G=x.getValue().replaceAll("\r","").split("\n");this.placeHolderRemoved||(_.removeContentWidget(b),this.placeHolderRemoved=!0);let nt=B.changes[0].range.startLineNumber,At=nt<=G.length?x.getLineContent(nt):"";At.startsWith("@[@")&&this.runEditAction([B.changes[0].range.startLineNumber-1+"|0|3|[@"],_,!1),At.endsWith(".,")&&this.runEditAction([`${B.changes[0].range.startLineNumber-1}|${At.length-2}|${At.length}|,`],_,!1),this.azotaIntel&&this.parseChange?this.azotaIntel.onChange({startLineNumber:B.changes[0].range.startLineNumber,endLineNumber:B.changes[0].range.endLineNumber,startColumn:B.changes[0].range.startColumn,endColumn:B.changes[0].range.endColumn,text:B.changes[0].text},r,this.onChangeCalback):this.parseChange&&this.onChangeCalback&&this.onChangeCalback(G,null)});let T=_.addCommand(0,function(B,W,G){if(r.onInsertDetailsCb){let nt=G.replaceAll(/\s+/g," ").trim();r.onInsertDetailsCb(nt,W)}},""),P=_.addCommand(0,function(B,W,G){if(r.onRefreshCalback){let nt=G.replaceAll(/\s+/g," ").trim();r.onRefreshCalback(nt,W)}},""),U=_.addCommand(0,function(B,W,G){if(r.onInsertQuestTextCb){let nt=G.replaceAll(/\s+/g," ").trim();r.onInsertQuestTextCb(nt,W)}},""),q=new Map;return a||(q.set("insertDirectQuest",T),q.set("insertQuestText",U)),q.set("randomAgain",P),c||o.languages.registerCodeLensProvider(s,{provideCodeLenses:function(B,W){let G=B.getValue().split("\n");return r.azotaIntel?{lenses:r.azotaIntel.getCodeLens(G).map(At=>{let ut=At.split("|"),et=+ut[0]+1;return{range:{startLineNumber:et,startColumn:1,endLineNumber:et,endColumn:1},id:ut[1],command:{id:q.get(ut[1]),title:ut[2],arguments:[et,ut[4]],tooltip:ut[3]}}}),dispose:()=>{}}:{lenses:[],dispose:()=>{}}}}),_.onKeyUp(B=>{if(B.keyCode==o.KeyCode.Enter&&r.runCommand("enter",_),B.keyCode==o.KeyCode.Tab){let W=_.getPosition(),G=x.getLineContent(W.lineNumber);W.column>G.length&&r.runCommand("tab",_)}}),_.onKeyDown(B=>{if(B.keyCode==o.KeyCode.Backspace){let W=_.getSelection();if(W.startLineNumber!=W.endLineNumber||W.startColumn!=W.endColumn)return;let G=_.getPosition(),At=x.getValueInRange({startLineNumber:G.lineNumber,endLineNumber:G.lineNumber,startColumn:G.column-1,endColumn:G.column}),ut={startLineNumber:G.lineNumber,endLineNumber:G.lineNumber,startColumn:0,endColumn:G.column};if("]"==At){let ot=x.getValueInRange(ut).lastIndexOf("[")+2;return ut.startColumn=ot,void _.executeEdits("",[{range:ut,text:""}])}let et=x.getLineContent(G.lineNumber).trim(),vt=[/^C\xe2u\s\d+[\.:]$/,/^Question\s\d+[\.:]$/,/^[A-H]\.$/];if(G.column>et.length){let Nt=!1;for(const ot of vt)if(ot.test(et)){Nt=!0;break}if(Nt)return void _.executeEdits("",[{range:ut,text:"\n"}])}}}),_.onDidPaste(B=>{this.pastePosition=B}),o.languages.registerHoverProvider("azota",{provideHover:function(B,W){if(r.onHoverCalback){let G=r.onHoverCalback(W.lineNumber,W.column,B.getLineContent(W.lineNumber));return G?{range:new o.Range(G.lineIdx,G.s,G.lineIdx,G.e),contents:[{supportHtml:!0,value:G.text}]}:void 0}}}),this._editor=_,_.addCommand(o.KeyMod.CtrlCmd|o.KeyCode.Enter,function(){}),this.registerPlugin(new Xz(this.lang?.myTranslateInstant("azt_lang_menu_fill_blank")??"\u0110i\u1ec1n v\xe0o ch\u1ed7 tr\u1ed1ng"),o.KeyCode.Period),this.registerPlugin(new eJ(this.lang?.myTranslateInstant("azt_lang_menu_find_mistake")??"\u0110\xe1p \xe1n t\xecm l\u1ed7i sai"),o.KeyCode.KeyD),this.registerPlugin(new tJ(this.lang?.myTranslateInstant("azt_lang_menu_enter_latex")??"Nh\u1eadp latex"),o.KeyCode.KeyL),this.registerPlugin(new s4(this.lang?.myTranslateInstant("azt_lang_menu_italic")??"In nghi\xeang","i"),o.KeyCode.KeyI),this.registerPlugin(new s4(this.lang?.myTranslateInstant("azt_lang_menu_bold")??"In \u0111\u1eadm","b"),o.KeyCode.KeyB),this.registerPlugin(new s4(this.lang?.myTranslateInstant("azt_lang_menu_underline")??"G\u1ea1ch ch\xe2n","u"),o.KeyCode.KeyU),this.registerPlugin(new Vz(this.lang?.myTranslateInstant("azt_lang_menu_enter_code")??"Hi\u1ec3n th\u1ecb d\u1ea1ng code block"),o.KeyCode.KeyS),setTimeout(()=>{this._editor.focus()},200),_}setHoverCalback(o){this.onHoverCalback=o}onChange(o){this.onChangeCalback=o}onChangePosition(o){this.onChangePosCalback=o}onRefreshInclude(o){this.onRefreshCalback=o}onInsertDetails(o){this.onInsertDetailsCb=o}onInsertQuestText(o){this.onInsertQuestTextCb=o}updateLine(o,e,i,a){this._editor.executeEdits("",[{range:{startLineNumber:o,endLineNumber:o,startColumn:e,endColumn:i},text:a}])}insertLine(o){let e=this._editor.getPosition(),a=this._editor.getModel().getLineContent(e.lineNumber),r=a+"\n"+o;this._editor.executeEdits("",[{range:{startLineNumber:e.lineNumber,endLineNumber:e.lineNumber,startColumn:0,endColumn:a.length+1},text:r.trim()}]);let l=e.lineNumber+r.split("\n").length;this._editor.setSelection({startLineNumber:l,endLineNumber:l,startColumn:0,endColumn:0}),this._editor.focus()}removeLines(o,e){let i=this.parseChange;this.parseChange=!1;for(let a=o.length-1;a>=0;a--){let r=o[a],s={startLineNumber:r+1,endLineNumber:r+2,startColumn:0,endColumn:0};0==a&&e&&(this.parseChange=!0),this._editor.executeEdits("",[{range:s,text:""}])}this.parseChange=i}removeText(o,e,i,a){let r={startLineNumber:o,endLineNumber:o,startColumn:e,endColumn:i},s=this.parseChange;this.parseChange=a,this._editor.executeEdits("",[{range:r,text:""}]),this.parseChange=s}getCurPos(){return this._editor.getPosition()}insertAtCurPos(o){let e=this._editor.getPosition();this._editor.executeEdits("",[{range:{startLineNumber:e.lineNumber,endLineNumber:e.lineNumber,startColumn:e.column,endColumn:e.column},text:o}]);let a=e.lineNumber,r=e.column+o.length;return this._editor.setSelection({startLineNumber:a,endLineNumber:a,startColumn:r,endColumn:r}),this._editor.focus(),{lineIdx:a,startCol:e.column,endCol:r}}runEditAction(o,e,i,a){this.parseChange=!1;let r="",s=0;for(const l of o){let c=l.split("|"),d=+c[0]+1,x=c[3],b={startLineNumber:d,endLineNumber:d,startColumn:+c[1]+1,endColumn:+c[2]+1};if(s==o.length-1&&i&&!a&&(this.parseChange=!0),s==o.length-1&&a&&(x+="|"),e.executeEdits("",[{range:b,text:x}]),s==o.length-1&&a){this.parseChange=i??!1,b.startColumn=b.startColumn+x.length-1,b.endColumn=b.startColumn+1;let T=x.split("\n");T.length>1&&(b.startLineNumber=d+T.length-1,b.endLineNumber=b.startLineNumber,b.startColumn=T[T.length-1].length,b.endColumn=b.startColumn+1),e.executeEdits("",[{range:b,text:""}])}r=x,s++}return this.parseChange=!0,r}runCommand(o,e){let i=e.getPosition(),a=this.azotaIntel?.getAutofillValue(i.lineNumber-1,i.column-1,o);if(!a||0==a.length)return;let r=this.runEditAction(a,e,!0,!0),l=e.getModel().getLineCount(),c=r.split("\n").length,h={lineNumber:i.lineNumber+(i.lineNumber+c-1==l&&"enter"==o?c:0),column:("enter"==o?0:i.column)+r.length};e.setPosition(h),this.onChangePosCalback&&this.onChangePosCalback(h.lineNumber,h.column)}zeroPad(o,e){return o=o||2,(new Array(o).join("0")+e).slice(-1*o)}}class iJ{constructor(o,e){this.examIntel=new tt.ExamIntellisense(o),this.examIntel.setApiService(e),this.apiService=e}setSingleMode(o){this.examIntel.setSingleMode(o)}setLang(o){this.lang=o}getSuggestions(o,e,i,a){return new Promise(r=>{this.examIntel.getSuggestions(o,e,i,a).then(s=>{r(this.translate(s))})})}getAutofillValue(o,e,i){return this.translate(this.examIntel.getAutofillValue(o,e,i))}getCurPos(o,e){return this.examIntel.getCurPos(o,e)}getCodeLens(o){let e=[],i=0;for(const h of o)/^\[@[CTGK][\-\d]+:[^\]]+\]([\.,]\[[^\]]+\])*\.\[[^@:\]]+\d+[^@:\]]+\]$/.test(h.trim())?(e.push(`${i}|insertDirectQuest|azt_lang_editor_insert_direct|azt_lang_editor_insert_direct_desc|${h.trim()}`),e.push(`${i}|randomAgain|azt_lang_editor_random_again|azt_lang_editor_random_again_desc|${h.trim()}`)):/\[@Q\d+:[^\]]*\]$/.test(h.trim())&&e.push(`${i}|insertQuestText|azt_lang_editor_insert_quest_text|azt_lang_editor_insert_quest_text_desc|${h.trim()}`),i++;return this.translate(e)}getApiService(){return this.apiService}onChange(o,e,i){if(1!=o.text.length||"\n"==o.text)this.notiChange(e,i);else{let a=e._editor.getValue().replaceAll("\r",""),r=a.split("\n"),s=0;a.length>1e5&&(s=200*a.length/1e5),this.examIntel.setLines(r),clearTimeout(this.waitId),this.waitId=setTimeout(()=>{this.notiChange(e,i)},s)}}onMobileChange(o,e){let i=o.split("\n"),a=400;o.length>1e5&&(a=400*o.length/1e5),this.examIntel.setLines(i),clearTimeout(this.waitId),this.waitId=setTimeout(()=>{let r=this.examIntel.parse();e&&e(i,r)},a)}translate(o){let e=[];for(let i of o)e.push(this.lang?.translateString(i)??i);return e}notiChange(o,e){let i=o._editor.getValue().replaceAll("\r",""),a=i.split("\n");this.examIntel.setLines(a);let r=this.examIntel.parse(),s=this.examIntel.getEditHint();s&&o.runEditAction(s,o._editor),o.parseChange=!0,s.length>0&&(i=o._editor.getValue(),a=i.split("\n"),this.examIntel.setLines(a),r=this.examIntel.parse()),e&&e(a,r)}}let oJ=(()=>{class n extends Wz{constructor(){super(...arguments),this.onStartProcessFile=new t.vpe,this.onSwitchFilePdf=new t.vpe}setupDropFile(){const e=jQuery("#frame_monaco_editor");e&&e.on("drag dragstart dragend dragover dragenter dragleave drop",function(i){i.preventDefault(),i.stopPropagation()}).on("dragover dragenter",function(){e.addClass("is-dragover")}).on("dragleave dragend drop",function(){e.removeClass("is-dragover")}).on("drop",i=>{this.onStartProcessFile.emit(i.originalEvent.dataTransfer.files[0])})}initMonaco(){let e=new nJ;this.editorApiService&&(e.setIntellisense(new iJ(this.config,this.editorApiService)),this._editor=e.init(monaco,this._editorContainer.nativeElement,this.commonService,this.readOnly),this._windowResizeSubscription&&this._windowResizeSubscription.unsubscribe(),this._windowResizeSubscription=(0,$z.R)(window,"resize").subscribe(()=>this._editor.layout()),this.setupDropFile(),this.onInit.emit({azotaEditor:e}))}}return n.\u0275fac=function(){let o;return function(i){return(o||(o=t.n5z(n)))(i||n)}}(),n.\u0275cmp=t.Xpm({type:n,selectors:[["azt-monaco-editor"]],inputs:{editorApiService:"editorApiService",readOnly:"readOnly"},outputs:{onStartProcessFile:"onStartProcessFile",onSwitchFilePdf:"onSwitchFilePdf"},features:[t._Bn([{provide:f.JU,useExisting:(0,t.Gpc)(()=>n),multi:!0}]),t.qOj],decls:4,vars:0,consts:[["id","frame_monaco_editor"],[1,"editor-container"],["editorContainer",""],[1,"file-drop-background"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"div",1,2)(3,"div",3),t.qZA())},styles:["[_nghost-%COMP%]{display:block}.editor-container[_ngcontent-%COMP%]{width:100%;height:100%}#frame_monaco_editor[_ngcontent-%COMP%]{height:100%;position:relative}.file-drop-background[_ngcontent-%COMP%]{display:none;position:absolute;top:0;left:0;width:100%;height:100%;background-color:#00000029;justify-content:center;align-items:center;color:#fff}"]}),n})();var aJ=M(54901),rJ=Object.defineProperty,sJ=Object.defineProperties,lJ=Object.getOwnPropertyDescriptors,k5=Object.getOwnPropertySymbols,cJ=Object.prototype.hasOwnProperty,uJ=Object.prototype.propertyIsEnumerable,A5=(n,o,e)=>o in n?rJ(n,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[o]=e,Ee=(n,o)=>{for(var e in o||(o={}))cJ.call(o,e)&&A5(n,e,o[e]);if(k5)for(var e of k5(o))uJ.call(o,e)&&A5(n,e,o[e]);return n},ei=(n,o)=>sJ(n,lJ(o));function qa(n){return Array.isArray(n)}function Ds(){return"window"in globalThis&&"document"in globalThis}function S5(){if(!Ds())throw new Error("<math-field> is an interactive component that needs to run in a browser environment\nIf you are using nextjs, see https://nextjs.org/docs/advanced-features/dynamic-import#with-no-ssr")}function O5(){return"matchMedia"in globalThis?globalThis.matchMedia("(any-pointer: coarse)").matches:"ontouchstart"in globalThis||navigator.maxTouchPoints>0}function l4(){return"function"==typeof navigator.vibrate}function Mp(){var n,o;if(!Ds())return"other";let e=null!=(o=null==(n=navigator.userAgentData)?void 0:n.platform)?o:navigator.platform;return/^mac/i.test(e)?5===navigator.maxTouchPoints?"ios":"macos":/^win/i.test(e)?"windows":/android/i.test(navigator.userAgent)?"android":/iphone|ipod|ipad/i.test(navigator.userAgent)?"ios":/\bcros\b/i.test(navigator.userAgent)?"chromeos":"other"}function E5(){if(!Ds())return!0;if(/firefox/i.test(navigator.userAgent)){let n=navigator.userAgent.match(/firefox\/(\d+)/i);return!!n&&parseInt(n[1])>=78}if(/trident/i.test(navigator.userAgent))return!1;if(/edge/i.test(navigator.userAgent)){let n=navigator.userAgent.match(/edg\/(\d+)/i);return!!n&&parseInt(n[1])>=79}return!0}var go={strings:{en:{"keyboard.tooltip.functions":"Functions","keyboard.tooltip.symbols":"Symbols","keyboard.tooltip.greek":"Greek Letters","keyboard.tooltip.command":"LaTeX Command Mode","keyboard.tooltip.numeric":"Numeric","keyboard.tooltip.roman":"Roman Letters","tooltip.copy to clipboard":"Copy to Clipboard","tooltip.cut to clipboard":"Cut to Clipboard","tooltip.paste from clipboard":"Paste from Clipboard","tooltip.redo":"Redo","tooltip.toggle virtual keyboard":"Toggle Virtual Keyboard","tooltip.undo":"Undo","menu.insert matrix":"Insert Matrix","menu.insert vector":"Insert Vector","submenu.array.matrix delimiters":"Matrix Delimiters","menu.array.add row above":"Add Row After","menu.array.add row below":"Add Row Before","menu.array.add column after":"Add Column After","menu.array.add column before":"Add Column Before","menu.array.delete row":"Delete Row","menu.array.delete rows":"Delete Selected Rows","menu.array.delete column":"Delete Column","menu.array.delete columns":"Delete Selected Columns","submenu.array.insert separator":"Insert Separator","menu.insert table":"Insert Table","submenu.table style":"Table Style"},ar:{"keyboard.tooltip.functions":"\u0645\u0647\u0627\u0645","keyboard.tooltip.symbols":"\u062d\u0631\u0641 \u0627\u0648 \u0631\u0645\u0632","keyboard.tooltip.greek":"\u062d\u0631\u0648\u0641 \u064a\u0648\u0646\u0627\u0646\u064a\u0629","keyboard.tooltip.command":"\u062d\u0627\u0644\u0629 \u062a\u0644\u0642\u064a \u0627\u0644\u0623\u0648\u0627\u0645\u0631 \u0627\u0644\u0644\u0627\u062a\u0643","keyboard.tooltip.numeric":"\u0627\u0644\u0631\u0642\u0645\u064a\u0629","keyboard.tooltip.roman":"\u0631\u0645\u0648\u0632 \u0627\u0644\u0627\u062d\u0631\u0641 \u0627\u0644\u0631\u0648\u0645\u0627\u0646\u064a\u0629","tooltip.copy to clipboard":"\u0646\u0633\u062e \u0625\u0644\u0649 \u0627\u0644\u062d\u0627\u0641\u0638\u0629","tooltip.redo":"\u0627\u0644\u0625\u0639\u0627\u062f\u0629","tooltip.toggle virtual keyboard":"\u062a\u0628\u062f\u064a\u0644 \u0644\u0648\u062d\u0629 \u0627\u0644\u0645\u0641\u0627\u062a\u064a\u062d \u0627\u0644\u0625\u0641\u062a\u0631\u0627\u0636\u064a\u0629","tooltip.undo":"\u0625\u0644\u063a\u0627\u0621","menu.insert matrix":"\u0623\u062f\u062e\u0644 \u0627\u0644\u0645\u0635\u0641\u0648\u0641\u0629","menu.insert vector":"\u0623\u062f\u062e\u0644 \u0645\u062a\u062c\u0647","submenu.array.matrix delimiters":"\u0645\u062d\u062f\u062f\u0627\u062a \u0627\u0644\u0645\u0635\u0641\u0648\u0641\u0629","menu.array.add row above":"\u0623\u0636\u0641 \u0635\u0641\u064b\u0627 \u0628\u0639\u062f \u0630\u0644\u0643","menu.array.add row below":"\u0623\u0636\u0641 \u0627\u0644\u0635\u0641 \u0642\u0628\u0644","menu.array.add column after":"\u0623\u0636\u0641 \u0627\u0644\u0639\u0645\u0648\u062f \u0628\u0639\u062f \u0630\u0644\u0643","menu.array.add column before":"\u0623\u0636\u0641 \u0627\u0644\u0639\u0645\u0648\u062f \u0642\u0628\u0644","menu.array.delete row":"\u0627\u062d\u0630\u0641 \u0635\u0641","menu.array.delete rows":"\u062d\u0630\u0641 \u0627\u0644\u0635\u0641\u0648\u0641 \u0627\u0644\u0645\u062d\u062f\u062f\u0629","menu.array.delete column":"\u062d\u0630\u0641 \u0627\u0644\u0639\u0645\u0648\u062f","menu.array.delete columns":"\u062d\u0630\u0641 \u0627\u0644\u0623\u0639\u0645\u062f\u0629 \u0627\u0644\u0645\u062d\u062f\u062f\u0629","submenu.array.insert separator":"\u0623\u062f\u062e\u0644 \u0641\u0627\u0635\u0644","menu.insert table":"\u0625\u062f\u0631\u0627\u062c \u062c\u062f\u0648\u0644","submenu.table style":"\u0646\u0645\u0637 \u0627\u0644\u062c\u062f\u0648\u0644"},bg:{"keyboard.tooltip.functions":"\u0424\u0443\u043d\u043a\u0446\u0438\u0438","keyboard.tooltip.symbols":"\u0421\u0438\u043c\u0432\u043e\u043b\u0438","keyboard.tooltip.greek":"\u0413\u0440\u044a\u0446\u043a\u0438 \u0431\u0443\u043a\u0432\u0438","keyboard.tooltip.command":"\u041a\u043e\u043c\u0430\u043d\u0434\u0435\u043d \u0440\u0435\u0436\u0438\u043c \u043d\u0430 \u043b\u0430\u0442\u0435\u043a\u0441","keyboard.tooltip.numeric":"\u0427\u0438\u0441\u043b\u043e\u0432\u0438","keyboard.tooltip.roman":"\u0420\u0438\u043c\u0441\u043a\u0438 \u0431\u0443\u043a\u0432\u0438","tooltip.copy to clipboard":"\u041a\u043e\u043f\u0438\u0440\u0430\u043d\u0435 \u0432 \u043a\u043b\u0438\u043f\u0431\u043e\u0440\u0434\u0430","tooltip.redo":"\u041f\u043e\u0432\u0442\u043e\u0440\u043d\u043e","tooltip.toggle virtual keyboard":"\u041f\u0440\u0435\u0432\u043a\u043b\u044e\u0447\u0432\u0430\u043d\u0435 \u043d\u0430 \u0432\u0438\u0440\u0442\u0443\u0430\u043b\u043d\u0430 \u043a\u043b\u0430\u0432\u0438\u0430\u0442\u0443\u0440\u0430","tooltip.undo":"\u041e\u0442\u043c\u044f\u043d\u0430","menu.insert matrix":"\u0412\u043c\u044a\u043a\u0432\u0430\u043d\u0435 \u043d\u0430 \u043c\u0430\u0442\u0440\u0438\u0446\u0430","menu.insert vector":"\u0412\u043c\u044a\u043a\u0432\u0430\u043d\u0435 \u043d\u0430 \u0432\u0435\u043a\u0442\u043e\u0440","submenu.array.matrix delimiters":"\u041c\u0430\u0442\u0440\u0438\u0447\u043d\u0438 \u0440\u0430\u0437\u0434\u0435\u043b\u0438\u0442\u0435\u043b\u0438","menu.array.add row above":"\u0414\u043e\u0431\u0430\u0432\u044f\u043d\u0435 \u043d\u0430 \u0440\u0435\u0434 \u0441\u043b\u0435\u0434","menu.array.add row below":"\u0414\u043e\u0431\u0430\u0432\u044f\u043d\u0435 \u043d\u0430 \u0440\u0435\u0434 \u043f\u0440\u0435\u0434\u0438","menu.array.add column after":"\u0414\u043e\u0431\u0430\u0432\u044f\u043d\u0435 \u043d\u0430 \u043a\u043e\u043b\u043e\u043d\u0430 \u0441\u043b\u0435\u0434","menu.array.add column before":"\u0414\u043e\u0431\u0430\u0432\u044f\u043d\u0435 \u043d\u0430 \u043a\u043e\u043b\u043e\u043d\u0430 \u043f\u0440\u0435\u0434\u0438","menu.array.delete row":"\u0418\u0437\u0442\u0440\u0438\u0432\u0430\u043d\u0435 \u043d\u0430 \u0440\u0435\u0434\u0430","menu.array.delete rows":"\u0418\u0437\u0442\u0440\u0438\u0432\u0430\u043d\u0435 \u043d\u0430 \u0438\u0437\u0431\u0440\u0430\u043d\u0438\u0442\u0435 \u0440\u0435\u0434\u043e\u0432\u0435","menu.array.delete column":"\u0418\u0437\u0442\u0440\u0438\u0432\u0430\u043d\u0435 \u043d\u0430 \u043a\u043e\u043b\u043e\u043d\u0430","menu.array.delete columns":"\u0418\u0437\u0442\u0440\u0438\u0432\u0430\u043d\u0435 \u043d\u0430 \u0438\u0437\u0431\u0440\u0430\u043d\u0438\u0442\u0435 \u043a\u043e\u043b\u043e\u043d\u0438","submenu.array.insert separator":"\u041f\u043e\u0441\u0442\u0430\u0432\u0435\u0442\u0435 \u0440\u0430\u0437\u0434\u0435\u043b\u0438\u0442\u0435\u043b","menu.insert table":"\u0412\u043c\u044a\u043a\u0432\u0430\u043d\u0435 \u043d\u0430 \u0442\u0430\u0431\u043b\u0438\u0446\u0430","submenu.table style":"\u0422\u0430\u0431\u043b\u0438\u0447\u0435\u043d \u0441\u0442\u0438\u043b"},bs:{"keyboard.tooltip.functions":"Funkcije","keyboard.tooltip.symbols":"Simboli","keyboard.tooltip.greek":"Gr\u010dka slova","keyboard.tooltip.command":"LaTeX naredbeni na\u010din","keyboard.tooltip.numeric":"Numeri\u010dki","keyboard.tooltip.roman":"Rimska slova","tooltip.copy to clipboard":"Kopirati u clipboard","tooltip.redo":"Ponovi","tooltip.toggle virtual keyboard":"Uklju\u010di / isklju\u010di virtualnu tipkovnicu","tooltip.undo":"Poni\u0161ti","menu.insert matrix":"Umetni matricu","menu.insert vector":"Umetni vektor","submenu.array.matrix delimiters":"Matri\u010dni razdjelnici","menu.array.add row above":"Dodaj redak nakon","menu.array.add row below":"Dodaj red prije","menu.array.add column after":"Dodaj stupac nakon","menu.array.add column before":"Dodaj stupac prije","menu.array.delete row":"Izbri\u0161i red","menu.array.delete rows":"Izbri\u0161i odabrane redove","menu.array.delete column":"Izbri\u0161i stupac","menu.array.delete columns":"Izbri\u0161i odabrane stupce","submenu.array.insert separator":"Umetni separator","menu.insert table":"Ubaci tabelu","submenu.table style":"Stil tabele"},cs:{"keyboard.tooltip.functions":"Funkce","keyboard.tooltip.symbols":"Symboly","keyboard.tooltip.greek":"\u0158eck\xe9 dopisy","keyboard.tooltip.command":"P\u0159\xedkazov\xfd re\u017eim LaTeX","keyboard.tooltip.numeric":"\u010c\xedseln\xe9","keyboard.tooltip.roman":"\u0158\xedmsk\xe9 dopisy","tooltip.copy to clipboard":"Zkop\xedrovat do schr\xe1nky","tooltip.redo":"P\u0159ed\u011blat","tooltip.toggle virtual keyboard":"P\u0159epnout virtu\xe1ln\xed kl\xe1vesnici","tooltip.undo":"Vr\xe1tit","menu.insert matrix":"Vlo\u017ete matici","menu.insert vector":"Vlo\u017eit vektor","submenu.array.matrix delimiters":"Odd\u011blova\u010de matic","menu.array.add row above":"P\u0159idat \u0159\xe1dek za","menu.array.add row below":"P\u0159idat \u0159\xe1dek p\u0159ed","menu.array.add column after":"P\u0159idat sloupec za","menu.array.add column before":"P\u0159idat sloupec d\u0159\xedve","menu.array.delete row":"Odstranit \u0159\xe1dek","menu.array.delete rows":"Odstranit vybran\xe9 \u0159\xe1dky","menu.array.delete column":"Odstranit sloupec","menu.array.delete columns":"Odstranit vybran\xe9 sloupce","submenu.array.insert separator":"Vlo\u017ete odd\u011blova\u010d","menu.insert table":"Vlo\u017eit tabulku","submenu.table style":"Styl tabulky"},da:{"keyboard.tooltip.functions":"Funktioner","keyboard.tooltip.symbols":"Symboler","keyboard.tooltip.greek":"Gr\xe6ske bogstaver","keyboard.tooltip.command":"LaTeX kommandotilstand","keyboard.tooltip.numeric":"Numerisk","keyboard.tooltip.roman":"Romerske breve","tooltip.copy to clipboard":"Kopier til udklipsholder","tooltip.redo":"Gentag igen","tooltip.toggle virtual keyboard":"Skift virtuelt tastatur","tooltip.undo":"Fortryd","menu.insert matrix":"Inds\xe6t matrix","menu.insert vector":"Inds\xe6t vektor","submenu.array.matrix delimiters":"Matrixafgr\xe6nsere","menu.array.add row above":"Tilf\xf8j r\xe6kke efter","menu.array.add row below":"Tilf\xf8j r\xe6kke f\xf8r","menu.array.add column after":"Tilf\xf8j kolonne efter","menu.array.add column before":"Tilf\xf8j kolonne f\xf8r","menu.array.delete row":"Slet r\xe6kke","menu.array.delete rows":"Slet valgte r\xe6kker","menu.array.delete column":"Slet kolonne","menu.array.delete columns":"Slet valgte kolonner","submenu.array.insert separator":"Inds\xe6t separator","menu.insert table":"Inds\xe6t tabel","submenu.table style":"Tabelstil"},de:{"keyboard.tooltip.functions":"Funktionen","keyboard.tooltip.symbols":"Symbole","keyboard.tooltip.greek":"Griechische Buchstaben","keyboard.tooltip.command":"LaTeX-Befehlsmodus","keyboard.tooltip.numeric":"Numerisch","keyboard.tooltip.roman":"R\xf6mische Buchstaben","tooltip.copy to clipboard":"In die Zwischenablage kopieren","tooltip.redo":"Wiederholen","tooltip.toggle virtual keyboard":"Virtuelle Tastatur umschalten","tooltip.undo":"Widerrufen","menu.insert matrix":"Matrix einf\xfcgen","menu.insert vector":"Vektor einf\xfcgen","submenu.array.matrix delimiters":"Matrixtrennzeichen","menu.array.add row above":"Zeile hinzuf\xfcgen nach","menu.array.add row below":"Zeile hinzuf\xfcgen vor","menu.array.add column after":"Spalte hinzuf\xfcgen nach","menu.array.add column before":"Spalte hinzuf\xfcgen vor","menu.array.delete row":"Zeile l\xf6schen","menu.array.delete rows":"Ausgew\xe4hlte Zeilen l\xf6schen","menu.array.delete column":"Spalte l\xf6schen","menu.array.delete columns":"Ausgew\xe4hlte Spalten l\xf6schen","submenu.array.insert separator":"Trennzeichen einf\xfcgen","menu.insert table":"Tabelle einf\xfcgen","submenu.table style":"Tabellenstil"},el:{"keyboard.tooltip.functions":"\u03c3\u03c5\u03bd\u03b1\u03c1\u03c4\u03ae\u03c3\u03b5\u03b9\u03c2","keyboard.tooltip.symbols":"\u03c3\u03cd\u03bc\u03b2\u03bf\u03bb\u03b1","keyboard.tooltip.greek":"\u03b5\u03bb\u03bb\u03b7\u03bd\u03b9\u03ba\u03ac \u03b3\u03c1\u03ac\u03bc\u03bc\u03b1\u03c4\u03b1","keyboard.tooltip.command":"\u039b\u03b5\u03b9\u03c4\u03bf\u03c5\u03c1\u03b3\u03af\u03b1 \u03b5\u03bd\u03c4\u03bf\u03bb\u03ce\u03bd LaTeX","keyboard.tooltip.numeric":"\u0391\u03c1\u03b9\u03b8\u03bc\u03b7\u03c4\u03b9\u03ba\u03cc\u03c2","keyboard.tooltip.roman":"\u03a1\u03c9\u03bc\u03b1\u03ca\u03ba\u03ac \u03b3\u03c1\u03ac\u03bc\u03bc\u03b1\u03c4\u03b1","tooltip.copy to clipboard":"\u0391\u03bd\u03c4\u03b9\u03b3\u03c1\u03b1\u03c6\u03ae \u03c3\u03c4\u03bf \u03c0\u03c1\u03cc\u03c7\u03b5\u03b9\u03c1\u03bf","tooltip.redo":"\u039e\u03b1\u03bd\u03b1\u03ba\u03ac\u03bd\u03c9","tooltip.toggle virtual keyboard":"\u0395\u03bd\u03b1\u03bb\u03bb\u03b1\u03b3\u03ae \u03b5\u03b9\u03ba\u03bf\u03bd\u03b9\u03ba\u03bf\u03cd \u03c0\u03bb\u03b7\u03ba\u03c4\u03c1\u03bf\u03bb\u03bf\u03b3\u03af\u03bf\u03c5","tooltip.undo":"\u039e\u03b5\u03ba\u03ac\u03bd\u03c9","menu.insert matrix":"\u0395\u03b9\u03c3\u03b1\u03b3\u03c9\u03b3\u03ae Matrix","menu.insert vector":"\u0395\u03b9\u03c3\u03b1\u03b3\u03c9\u03b3\u03ae \u03b4\u03b9\u03b1\u03bd\u03cd\u03c3\u03bc\u03b1\u03c4\u03bf\u03c2","submenu.array.matrix delimiters":"\u039f\u03c1\u03b9\u03bf\u03b8\u03ad\u03c4\u03b5\u03c2 Matrix","menu.array.add row above":"\u03a0\u03c1\u03bf\u03c3\u03b8\u03ae\u03ba\u03b7 \u03c3\u03b5\u03b9\u03c1\u03ac\u03c2 \u03bc\u03b5\u03c4\u03ac","menu.array.add row below":"\u03a0\u03c1\u03bf\u03c3\u03b8\u03ae\u03ba\u03b7 \u03c3\u03b5\u03b9\u03c1\u03ac\u03c2 \u03c0\u03c1\u03b9\u03bd","menu.array.add column after":"\u03a0\u03c1\u03bf\u03c3\u03b8\u03ae\u03ba\u03b7 \u03c3\u03c4\u03ae\u03bb\u03b7\u03c2 \u03bc\u03b5\u03c4\u03ac","menu.array.add column before":"\u03a0\u03c1\u03bf\u03c3\u03b8\u03ae\u03ba\u03b7 \u03c3\u03c4\u03ae\u03bb\u03b7\u03c2 \u03c0\u03c1\u03b9\u03bd","menu.array.delete row":"\u0394\u03b9\u03b1\u03b3\u03c1\u03b1\u03c6\u03ae \u03c3\u03b5\u03b9\u03c1\u03ac\u03c2","menu.array.delete rows":"\u0394\u03b9\u03b1\u03b3\u03c1\u03b1\u03c6\u03ae \u03b5\u03c0\u03b9\u03bb\u03b5\u03b3\u03bc\u03ad\u03bd\u03c9\u03bd \u03c3\u03b5\u03b9\u03c1\u03ce\u03bd","menu.array.delete column":"\u0394\u03b9\u03b1\u03b3\u03c1\u03b1\u03c6\u03ae \u03c3\u03c4\u03ae\u03bb\u03b7\u03c2","menu.array.delete columns":"\u0394\u03b9\u03b1\u03b3\u03c1\u03b1\u03c6\u03ae \u03b5\u03c0\u03b9\u03bb\u03b5\u03b3\u03bc\u03ad\u03bd\u03c9\u03bd \u03c3\u03c4\u03b7\u03bb\u03ce\u03bd","submenu.array.insert separator":"\u0395\u03b9\u03c3\u03b1\u03b3\u03c9\u03b3\u03ae \u03b4\u03b9\u03b1\u03c7\u03c9\u03c1\u03b9\u03c3\u03c4\u03b9\u03ba\u03bf\u03cd","menu.insert table":"\u0395\u03b9\u03c3\u03b1\u03b3\u03c9\u03b3\u03ae \u03c0\u03af\u03bd\u03b1\u03ba\u03b1","submenu.table style":"\u03a3\u03c4\u03c5\u03bb \u03c0\u03af\u03bd\u03b1\u03ba\u03b1"},es:{"keyboard.tooltip.functions":"Funciones","keyboard.tooltip.symbols":"S\xedmbolos","keyboard.tooltip.greek":"Letras griegas","keyboard.tooltip.command":"Modo Comando LaTeX","keyboard.tooltip.numeric":"Num\xe9rico","keyboard.tooltip.roman":"Letras romanas","tooltip.copy to clipboard":"Copiar al portapapeles","tooltip.redo":"Rehacer","tooltip.toggle virtual keyboard":"Alternar teclado virtual","tooltip.undo":"Deshacer","menu.insert matrix":"A\xf1adir Matriz","menu.insert vector":"A\xf1adir vector","submenu.array.matrix delimiters":"Delimitadores de Matriz","menu.array.add row above":"A\xf1adir L\xednea Antes","menu.array.add row below":"A\xf1adir L\xednea Despues","menu.array.add column after":"A\xf1adir Columna Despues","menu.array.add column before":"A\xf1adir Columna Antes","menu.array.delete row":"Borrar L\xednea","menu.array.delete rows":"Borrar L\xedneas Seleccionadas","menu.array.delete column":"Borrar Columna","menu.array.delete columns":"Borrar Columnas Seleccionadas","submenu.array.insert separator":"Insertar un Separador","menu.insert table":"Insertar Tabla","submenu.table style":"Estilo de Tabla"},et:{"keyboard.tooltip.functions":"Funktsioonid","keyboard.tooltip.symbols":"S\xfcmbolid","keyboard.tooltip.greek":"Kreeka kirjad","keyboard.tooltip.command":"LaTeXi k\xe4sure\u017eiim","keyboard.tooltip.numeric":"Numbriline","keyboard.tooltip.roman":"Rooma kirjad","tooltip.copy to clipboard":"Kopeerida l\xf5ikelauale","tooltip.redo":"Tee uuesti","tooltip.toggle virtual keyboard":"L\xfclitage sisse virtuaalne klaviatuur","tooltip.undo":"V\xf5ta tagasi","menu.insert matrix":"Sisesta maatriks","menu.insert vector":"Sisesta vektor","submenu.array.matrix delimiters":"Maatriksi eraldajad","menu.array.add row above":"Lisa rida p\xe4rast","menu.array.add row below":"Lisa rida enne","menu.array.add column after":"Lisa veerg p\xe4rast","menu.array.add column before":"Lisa veerg enne","menu.array.delete row":"Kustuta rida","menu.array.delete rows":"Kustuta valitud read","menu.array.delete column":"Kustuta veerg","menu.array.delete columns":"Kustuta valitud veerud","submenu.array.insert separator":"Sisestage eraldaja","menu.insert table":"Sisesta tabeli","submenu.table style":"Tabeli stiilis"},fa:{"keyboard.tooltip.functions":"\u062a\u0648\u0627\u0628\u0639","keyboard.tooltip.symbols":"\u0646\u0645\u0627\u062f\u0647\u0627","keyboard.tooltip.greek":"\u062d\u0631\u0648\u0641 \u06cc\u0648\u0646\u0627\u0646\u06cc","keyboard.tooltip.command":"\u062d\u0627\u0644\u062a \u062f\u0633\u062a\u0648\u0631 \u0644\u0627\u062a\u06a9","keyboard.tooltip.numeric":"\u0639\u062f\u062f\u06cc","keyboard.tooltip.roman":"\u062d\u0631\u0648\u0641 \u0631\u0648\u0645\u06cc","tooltip.copy to clipboard":"\u06a9\u067e\u06cc \u0628\u0647 \u06a9\u0644\u06cc\u067e\u0628\u0648\u0631\u062f","tooltip.redo":"\u0628\u0627\u0632\u06af\u0634\u062a \u0628\u0647 \u0628\u0639\u062f","tooltip.toggle virtual keyboard":"\u0646\u0645\u0627\u06cc\u0634/\u0646\u0647\u0641\u062a\u0646 \u06a9\u06cc\u0628\u0648\u0631\u062f \u0645\u062c\u0627\u0632\u06cc","tooltip.undo":"\u0628\u0627\u0632\u06af\u0634\u062a \u0628\u0647 \u0642\u0628\u0644","menu.insert matrix":"\u0645\u0627\u062a\u0631\u06cc\u0633 \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f","menu.insert vector":"\u062f\u0631\u062c \u0628\u0631\u062f\u0627\u0631","submenu.array.matrix delimiters":"\u0645\u0631\u0632\u0647\u0627\u06cc \u0645\u0627\u062a\u0631\u06cc\u0633","menu.array.add row above":"\u0628\u0639\u062f \u0627\u0632 \u0622\u0646 \u0631\u062f\u06cc\u0641 \u0627\u0636\u0627\u0641\u0647 \u06a9\u0646\u06cc\u062f","menu.array.add row below":"\u0631\u062f\u06cc\u0641 \u0631\u0627 \u0642\u0628\u0644 \u0627\u0636\u0627\u0641\u0647 \u06a9\u0646\u06cc\u062f","menu.array.add column after":"\u0627\u0636\u0627\u0641\u0647 \u06a9\u0631\u062f\u0646 \u0633\u062a\u0648\u0646 \u0628\u0639\u062f","menu.array.add column before":"\u0633\u062a\u0648\u0646 \u0642\u0628\u0644 \u0631\u0627 \u0627\u0636\u0627\u0641\u0647 \u06a9\u0646\u06cc\u062f","menu.array.delete row":"\u0631\u062f\u06cc\u0641 \u0631\u0627 \u062d\u0630\u0641 \u06a9\u0646\u06cc\u062f","menu.array.delete rows":"\u0631\u062f\u06cc\u0641 \u0647\u0627\u06cc \u0627\u0646\u062a\u062e\u0627\u0628 \u0634\u062f\u0647 \u0631\u0627 \u062d\u0630\u0641 \u06a9\u0646\u06cc\u062f","menu.array.delete column":"\u062d\u0630\u0641 \u0633\u062a\u0648\u0646","menu.array.delete columns":"\u0633\u062a\u0648\u0646 \u0647\u0627\u06cc \u0627\u0646\u062a\u062e\u0627\u0628 \u0634\u062f\u0647 \u0631\u0627 \u062d\u0630\u0641 \u06a9\u0646\u06cc\u062f","submenu.array.insert separator":"\u062f\u0631\u062c \u062c\u062f\u0627 \u06a9\u0646\u0646\u062f\u0647","menu.insert table":"\u0642\u0631\u0627\u0631 \u062f\u0627\u062f\u0646 \u062c\u062f\u0648\u0644","submenu.table style":"\u0633\u0628\u06a9 \u0645\u06cc\u0632"},fi:{"keyboard.tooltip.functions":"Toiminnot","keyboard.tooltip.symbols":"Symbolit","keyboard.tooltip.greek":"Kreikkalaiset kirjeet","keyboard.tooltip.command":"LaTeX-komentotila","keyboard.tooltip.numeric":"Numeerinen","keyboard.tooltip.roman":"Roomalaiset kirjeet","tooltip.copy to clipboard":"Kopioi leikep\xf6yd\xe4lle","tooltip.redo":"Tee uudelleen","tooltip.toggle virtual keyboard":"Vaihda virtuaalin\xe4pp\xe4imist\xf6","tooltip.undo":"Kumoa","menu.insert matrix":"Lis\xe4\xe4 matriisi","menu.insert vector":"Lis\xe4\xe4 vektori","submenu.array.matrix delimiters":"Matriisin erottimet","menu.array.add row above":"Lis\xe4\xe4 rivi j\xe4lkeen","menu.array.add row below":"Lis\xe4\xe4 rivi ennen","menu.array.add column after":"Lis\xe4\xe4 sarake j\xe4lkeen","menu.array.add column before":"Lis\xe4\xe4 sarake ennen","menu.array.delete row":"Poista rivi","menu.array.delete rows":"Poista valitut rivit","menu.array.delete column":"Poista sarake","menu.array.delete columns":"Poista valitut sarakkeet","submenu.array.insert separator":"Aseta erotin","menu.insert table":"Lis\xe4\xe4 taulukko","submenu.table style":"Taulukon tyyli"},fr:{"keyboard.tooltip.functions":"Fonctions","keyboard.tooltip.symbols":"Symboles","keyboard.tooltip.greek":"Lettres grecques","keyboard.tooltip.command":"Mode de commandes LaTeX","keyboard.tooltip.numeric":"Num\xe9rique","keyboard.tooltip.roman":"Lettres romaines","tooltip.copy to clipboard":"Copier dans le presse-papiers","tooltip.redo":"R\xe9tablir","tooltip.toggle virtual keyboard":"Afficher/Masquer le clavier virtuel","tooltip.undo":"Annuler","menu.insert matrix":"Ins\xe9rer une Matrice","menu.insert vector":"Ins\xe9rer un Vecteur","submenu.array.matrix delimiters":"D\xe9limiteurs de la Matrice","menu.array.add row above":"Ajouter une Ligne Avant","menu.array.add row below":"Ajouter une Ligne Apr\xe8s","menu.array.add column before":"Ajouter une Colonne Avant","menu.array.add column after":"Ajouter une Colonne Apr\xe8s","menu.array.delete row":"Enlever une Ligne","menu.array.delete rows":"Enlever les Lignes S\xe9lection\xe9es","menu.array.delete column":"Enlever une Colone","menu.array.delete columns":"Enlever les Colonnes S\xe9lection\xe9es","submenu.array.insert separator":"Ins\xe9rer un S\xe9parateur","menu.insert table":"Ins\xe9rer une Table","submenu.table style":"Style de la  Table"},ga:{"keyboard.tooltip.functions":"Feidhmeanna","keyboard.tooltip.symbols":"Siombail\xed","keyboard.tooltip.greek":"Litreacha na Gr\xe9ige","keyboard.tooltip.command":"M\xf3d Ord\xfa LaTeX","keyboard.tooltip.numeric":"Uimhri\xfail","keyboard.tooltip.roman":"Litreacha R\xf3mh\xe1nacha","tooltip.copy to clipboard":"C\xf3ipe\xe1il chuig an Ghearrthaisce","tooltip.redo":"Athdh\xe9an","tooltip.toggle virtual keyboard":"M\xe9archl\xe1ir F\xedor\xfail a Fh\xe1il","tooltip.undo":"Cealaigh","menu.insert matrix":"Cuir isteach Maitr\xeds","menu.insert vector":"Cuir isteach Veicteoir","submenu.array.matrix delimiters":"Delimiters Maitr\xeds","menu.array.add row above":"Cuir Rae Tar \xe9is","menu.array.add row below":"Cuir Rae Roimh","menu.array.add column after":"Cuir Col\xfan Tar \xe9is","menu.array.add column before":"Cuir Col\xfan Roimh","menu.array.delete row":"Scrios Rae","menu.array.delete rows":"Scrios Sraitheanna Roghnaithe","menu.array.delete column":"Scrios Col\xfan","menu.array.delete columns":"Scrios Col\xfain Roghnaithe","submenu.array.insert separator":"Cuir Deighilteoir isteach","menu.insert table":"Ions\xe1igh T\xe1bla","submenu.table style":"St\xedl T\xe1bla"},he:{"keyboard.tooltip.functions":"\u05e4\u05d5\u05e0\u05e7\u05e6\u05d9\u05d5\u05ea","keyboard.tooltip.symbols":"\u05e1\u05de\u05dc\u05d9\u05dd","keyboard.tooltip.greek":"\u05d0\u05d5\u05ea\u05d9\u05d5\u05ea \u05d9\u05d5\u05d5\u05e0\u05d9\u05d5\u05ea","keyboard.tooltip.command":"\u05de\u05e6\u05d1 \u05e4\u05e7\u05d5\u05d3\u05d4 \u05dc\u05d8\u05e7\u05e1","keyboard.tooltip.numeric":"\u05de\u05e1\u05e4\u05e8\u05d9","keyboard.tooltip.roman":"\u05de\u05db\u05ea\u05d1\u05d9\u05dd \u05e8\u05d5\u05de\u05d9\u05d9\u05dd","tooltip.copy to clipboard":"\u05d4\u05e2\u05ea\u05e7 \u05dc\u05dc\u05d5\u05d7","tooltip.redo":"\u05dc\u05b7\u05e2\u05b2\u05e9\u05c2\u05d5\u05b9\u05ea \u05e9\u05c1\u05d5\u05bc\u05d1","tooltip.toggle virtual keyboard":"\u05d4\u05d7\u05dc\u05e3 \u05d0\u05ea \u05d4\u05de\u05e7\u05dc\u05d3\u05ea \u05d4\u05d5\u05d5\u05d9\u05e8\u05d8\u05d5\u05d0\u05dc\u05d9\u05ea","tooltip.undo":"\u05dc\u05d1\u05d8\u05dc","menu.insert matrix":"\u05d4\u05db\u05e0\u05e1 \u05de\u05d8\u05e8\u05d9\u05e7\u05e1","menu.insert vector":"\u05d4\u05db\u05e0\u05e1 \u05d5\u05e7\u05d8\u05d5\u05e8","submenu.array.matrix delimiters":"\u05de\u05e4\u05e8\u05d9\u05d3\u05d9 \u05de\u05d8\u05e8\u05d9\u05e7\u05e1","menu.array.add row above":"\u05d4\u05d5\u05e1\u05e3 \u05e9\u05d5\u05e8\u05d4 \u05d0\u05d7\u05e8\u05d9","menu.array.add row below":"\u05d4\u05d5\u05e1\u05e3 \u05e9\u05d5\u05e8\u05d4 \u05dc\u05e4\u05e0\u05d9","menu.array.add column after":"\u05d4\u05d5\u05e1\u05e3 \u05e2\u05de\u05d5\u05d3\u05d4 \u05d0\u05d7\u05e8\u05d9","menu.array.add column before":"\u05d4\u05d5\u05e1\u05e3 \u05e2\u05de\u05d5\u05d3\u05d4 \u05dc\u05e4\u05e0\u05d9","menu.array.delete row":"\u05de\u05d7\u05e7 \u05e9\u05d5\u05e8\u05d4","menu.array.delete rows":"\u05de\u05d7\u05e7 \u05e9\u05d5\u05e8\u05d5\u05ea \u05e9\u05e0\u05d1\u05d7\u05e8\u05d5","menu.array.delete column":"\u05de\u05d7\u05e7 \u05e2\u05de\u05d5\u05d3\u05d4","menu.array.delete columns":"\u05de\u05d7\u05e7 \u05e2\u05de\u05d5\u05d3\u05d5\u05ea \u05e9\u05e0\u05d1\u05d7\u05e8\u05d5","submenu.array.insert separator":"\u05d4\u05db\u05e0\u05e1 \u05de\u05e4\u05e8\u05d9\u05d3","menu.insert table":"\u05d4\u05db\u05e0\u05e1 \u05d8\u05d1\u05dc\u05d4","submenu.table style":"\u05d8\u05d1\u05dc\u05d4 \u05e1\u05b4\u05d2\u05b0\u05e0\u05d5\u05b9\u05df"},hr:{"keyboard.tooltip.functions":"Funkcije","keyboard.tooltip.symbols":"Simboli","keyboard.tooltip.greek":"Gr\u010dka slova","keyboard.tooltip.command":"LaTeX naredbeni na\u010din","keyboard.tooltip.numeric":"Numeri\u010dki","keyboard.tooltip.roman":"Rimska slova","tooltip.copy to clipboard":"Kopirati u me\u0111uspremnik","tooltip.redo":"Ponovi","tooltip.toggle virtual keyboard":"Uklju\u010di / isklju\u010di virtualnu tipkovnicu","tooltip.undo":"Poni\u0161ti","menu.insert matrix":"Umetni matricu","menu.insert vector":"Umetni vektor","submenu.array.matrix delimiters":"Matri\u010dni razdjelnici","menu.array.add row above":"Dodaj redak nakon","menu.array.add row below":"Dodaj redak prije","menu.array.add column after":"Dodaj stupac nakon","menu.array.add column before":"Dodaj stupac prije","menu.array.delete row":"Izbri\u0161i redak","menu.array.delete rows":"Izbri\u0161i odabrane retke","menu.array.delete column":"Izbri\u0161i stupac","menu.array.delete columns":"Izbri\u0161i odabrane stupce","submenu.array.insert separator":"Umetni separator","menu.insert table":"Umetni tablicu","submenu.table style":"Stil tabele"},id:{"keyboard.tooltip.functions":"Fungsi","keyboard.tooltip.symbols":"Simbol","keyboard.tooltip.greek":"Huruf Yunani","keyboard.tooltip.command":"Mode Perintah LaTeX","keyboard.tooltip.numeric":"Numerik","keyboard.tooltip.roman":"Surat Romawi","tooltip.copy to clipboard":"Menyalin ke clipboard","tooltip.redo":"Mengulangi","tooltip.toggle virtual keyboard":"Alihkan Keyboard Virtual","tooltip.undo":"Membuka","menu.insert matrix":"Sisipkan Matriks","menu.insert vector":"Sisipkan Vektor","submenu.array.matrix delimiters":"Pembatas Matriks","menu.array.add row above":"Tambahkan Baris Setelah","menu.array.add row below":"Tambahkan Baris Sebelumnya","menu.array.add column after":"Tambahkan Kolom Setelah","menu.array.add column before":"Tambahkan Kolom Sebelumnya","menu.array.delete row":"Hapus Baris","menu.array.delete rows":"Hapus Baris yang Dipilih","menu.array.delete column":"Hapus Kolom","menu.array.delete columns":"Hapus Kolom yang Dipilih","submenu.array.insert separator":"Sisipkan Pemisah","menu.insert table":"Sisipkan Tabel","submenu.table style":"Gaya Tabel"},hi:{"keyboard.tooltip.functions":"\u0915\u093e\u0930\u094d\u092f\u094b\u0902","keyboard.tooltip.symbols":"\u092a\u094d\u0930\u0924\u0940\u0915","keyboard.tooltip.greek":"\u0917\u094d\u0930\u0940\u0915 \u0905\u0915\u094d\u0937\u0930","keyboard.tooltip.command":"\u0932\u093e\u091f\u0947\u0915\u094d\u0938 \u0915\u092e\u093e\u0902\u0921 \u092e\u094b\u0921","keyboard.tooltip.numeric":"\u0938\u0902\u0916\u094d\u092f\u093e\u0924\u094d\u092e\u0915","keyboard.tooltip.roman":"\u0930\u094b\u092e\u0928 \u092a\u0924\u094d\u0930","tooltip.copy to clipboard":"\u0915\u094d\u0932\u093f\u092a\u092c\u094b\u0930\u094d\u0921 \u092a\u0930 \u0915\u0949\u092a\u0940 \u0915\u0930\u0947\u0902","tooltip.redo":"\u092b\u093f\u0930 \u0938\u0947 \u0915\u0930\u0947\u0902","tooltip.toggle virtual keyboard":"\u0935\u0930\u094d\u091a\u0941\u0905\u0932 \u0915\u0940\u092c\u094b\u0930\u094d\u0921 \u091f\u0949\u0917\u0932 \u0915\u0930\u0947\u0902","tooltip.undo":"\u092a\u0942\u0930\u094d\u0935\u0935\u0924","menu.insert matrix":"\u092e\u0948\u091f\u094d\u0930\u093f\u0915\u094d\u0938 \u0921\u093e\u0932\u0947\u0902","menu.insert vector":"\u0935\u0947\u0915\u094d\u091f\u0930 \u0921\u093e\u0932\u0947\u0902","submenu.array.matrix delimiters":"\u092e\u0948\u091f\u094d\u0930\u093f\u0915\u094d\u0938 \u0938\u0940\u092e\u093e\u0902\u0915\u0915","menu.array.add row above":"\u092c\u093e\u0926 \u092e\u0947\u0902 \u092a\u0902\u0915\u094d\u0924\u093f \u091c\u094b\u0921\u093c\u0947\u0902","menu.array.add row below":"\u092a\u0939\u0932\u0947 \u092a\u0902\u0915\u094d\u0924\u093f \u091c\u094b\u0921\u093c\u0947\u0902","menu.array.add column after":"\u092c\u093e\u0926 \u092e\u0947\u0902 \u0915\u0949\u0932\u092e \u091c\u094b\u0921\u093c\u0947\u0902","menu.array.add column before":"\u092a\u0939\u0932\u0947 \u0915\u0949\u0932\u092e \u091c\u094b\u0921\u093c\u0947\u0902","menu.array.delete row":"\u092a\u0902\u0915\u094d\u0924\u093f \u0915\u094b \u0939\u091f\u093e\u090f\u0902","menu.array.delete rows":"\u091a\u092f\u0928\u093f\u0924 \u092a\u0902\u0915\u094d\u0924\u093f\u092f\u094b\u0902 \u0915\u094b \u0939\u091f\u093e\u090f\u0902","menu.array.delete column":"\u0915\u0949\u0932\u092e \u0939\u091f\u093e\u090f\u0902","menu.array.delete columns":"\u091a\u092f\u0928\u093f\u0924 \u0915\u0949\u0932\u092e \u0939\u091f\u093e\u090f\u0902","submenu.array.insert separator":"\u0935\u093f\u092d\u093e\u091c\u0915 \u0921\u093e\u0932\u0947\u0902","menu.insert table":"\u091f\u0947\u092c\u0932 \u0907\u0902\u0938\u0930\u094d\u091f \u0915\u0930\u0947\u0902","submenu.table style":"\u091f\u0947\u092c\u0932 \u0938\u094d\u091f\u093e\u0907\u0932"},hu:{"keyboard.tooltip.functions":"Funkci\xf3k","keyboard.tooltip.symbols":"Szimb\xf3lumok","keyboard.tooltip.greek":"G\xf6r\xf6g levelek","keyboard.tooltip.command":"LaTeX Parancs m\xf3d","keyboard.tooltip.numeric":"Numerikus","keyboard.tooltip.roman":"R\xf3mai levelek","tooltip.copy to clipboard":"M\xe1solja a v\xe1g\xf3lapra","tooltip.redo":"\xdajra","tooltip.toggle virtual keyboard":"V\xe1lt\xe1s a virtu\xe1lis billenty\u0171zetre","tooltip.undo":"Visszavon\xe1s","menu.insert matrix":"Helyezze be a M\xe1trixot","menu.insert vector":"Vektor besz\xfar\xe1sa","submenu.array.matrix delimiters":"M\xe1trixhat\xe1rol\xf3k","menu.array.add row above":"Sor hozz\xe1ad\xe1sa ut\xe1n","menu.array.add row below":"Add Add Sor el\u0151tt","menu.array.add column after":"Oszlop hozz\xe1ad\xe1sa ut\xe1n","menu.array.add column before":"Add oszlop el\u0151tt","menu.array.delete row":"Sor t\xf6rl\xe9se","menu.array.delete rows":"Kijel\xf6lt sorok t\xf6rl\xe9se","menu.array.delete column":"Oszlop t\xf6rl\xe9se","menu.array.delete columns":"A kijel\xf6lt oszlopok t\xf6rl\xe9se","submenu.array.insert separator":"Helyezze be az elv\xe1laszt\xf3t","menu.insert table":"Helyezze be a t\xe1bl\xe1zatot","submenu.table style":"T\xe1bl\xe1zatos st\xedlus"},it:{"keyboard.tooltip.functions":"Funzioni","keyboard.tooltip.symbols":"Simboli","keyboard.tooltip.greek":"Lettere greche","keyboard.tooltip.command":"Modalit\xe0 di comando LaTeX","keyboard.tooltip.numeric":"Numerico","keyboard.tooltip.roman":"Lettere romane","tooltip.copy to clipboard":"Copia negli appunti","tooltip.redo":"Rifare","tooltip.toggle virtual keyboard":"Attiva / disattiva la tastiera virtuale","tooltip.undo":"Disfare","menu.insert matrix":"Inserisci una Matrice","menu.insert vector":"Inserisci Vettore","submenu.array.matrix delimiters":"Delimitatori di Matrice","menu.array.add row above":"Aggiungi una Riga Prima","menu.array.add row below":"Aggiungi una Riga Dopo","menu.array.add column before":"Aggiungi una Colonna Prima","menu.array.add column after":"Aggiungi una Colonna Dopo","menu.array.delete row":"Rimuovi una Riga","menu.array.delete rows":"Rimuovi le Righe Selezionate","menu.array.delete column":"Rimuovi una Colonna","menu.array.delete columns":"Rimuovi le Colonne Selezionate","submenu.array.insert separator":"Inserisci un Separatore","menu.insert table":"Inserisci Tabella","submenu.table style":"Stile tabella"},is:{"keyboard.tooltip.functions":"A\xf0ger\xf0ir","keyboard.tooltip.symbols":"T\xe1kn","keyboard.tooltip.greek":"Gr\xedsk br\xe9f","keyboard.tooltip.command":"LaTeX stj\xf3rnunarstilling","keyboard.tooltip.numeric":"T\xf6lulegt","keyboard.tooltip.roman":"R\xf3mversk br\xe9f","tooltip.copy to clipboard":"Afrita\xf0u \xe1 klemmuspjald","tooltip.redo":"Endurtaka","tooltip.toggle virtual keyboard":"Skiptu um s\xfdndarlyklabor\xf0","tooltip.undo":"Afturkalla","menu.insert matrix":"Settu fylki inn","menu.insert vector":"Settu inn Vector","submenu.array.matrix delimiters":"Matrix afm\xf6rkun","menu.array.add row above":"B\xe6ta vi\xf0 r\xf6\xf0 \xe1 eftir","menu.array.add row below":"B\xe6ta vi\xf0 r\xf6\xf0 \xe1\xf0ur","menu.array.add column after":"B\xe6ta vi\xf0 d\xe1lki \xe1 eftir","menu.array.add column before":"B\xe6ta vi\xf0 d\xe1lki \xe1\xf0ur","menu.array.delete row":"Ey\xf0a r\xf6\xf0","menu.array.delete rows":"Ey\xf0a v\xf6ldum l\xednum","menu.array.delete column":"Ey\xf0a d\xe1lki","menu.array.delete columns":"Ey\xf0a v\xf6ldum d\xe1lkum","submenu.array.insert separator":"Settu skiljuna \xed","menu.insert table":"Settu inn t\xf6flu","submenu.table style":"T\xf6flu st\xedl"},ja:{"keyboard.tooltip.functions":"\u95a2\u6570","keyboard.tooltip.symbols":"\u30b7\u30f3\u30dc\u30eb","keyboard.tooltip.greek":"\u30ae\u30ea\u30b7\u30e3\u6587\u5b57","keyboard.tooltip.command":"\u30e9\u30c6\u30c3\u30af\u30b9\u30b3\u30de\u30f3\u30c9\u30e2\u30fc\u30c9","keyboard.tooltip.numeric":"\u6570\u5024","keyboard.tooltip.roman":"\u30ed\u30fc\u30de\u5b57","tooltip.copy to clipboard":"\u30af\u30ea\u30c3\u30d7\u30dc\u30fc\u30c9\u306b\u30b3\u30d4\u30fc","tooltip.redo":"\u3084\u308a\u76f4\u3057","tooltip.toggle virtual keyboard":"\u4eee\u60f3\u30ad\u30fc\u30dc\u30fc\u30c9\u306e\u5207\u308a\u66ff\u3048","tooltip.undo":"\u5143\u306b\u623b\u3059","menu.insert matrix":"\u30de\u30c8\u30ea\u30c3\u30af\u30b9\u3092\u633f\u5165","menu.insert vector":"\u30d9\u30af\u30c8\u30eb\u3092\u633f\u5165","submenu.array.matrix delimiters":"\u884c\u5217\u533a\u5207\u308a\u6587\u5b57","menu.array.add row above":"\u5f8c\u306b\u884c\u3092\u8ffd\u52a0","menu.array.add row below":"\u524d\u306b\u884c\u3092\u8ffd\u52a0","menu.array.add column after":"\u5f8c\u306b\u5217\u3092\u8ffd\u52a0","menu.array.add column before":"\u524d\u306b\u5217\u3092\u8ffd\u52a0","menu.array.delete row":"\u884c\u3092\u524a\u9664","menu.array.delete rows":"\u9078\u629e\u3057\u305f\u884c\u3092\u524a\u9664\u3059\u308b","menu.array.delete column":"\u5217\u3092\u524a\u9664","menu.array.delete columns":"\u9078\u629e\u3057\u305f\u5217\u3092\u524a\u9664\u3059\u308b","submenu.array.insert separator":"\u30bb\u30d1\u30ec\u30fc\u30bf\u30fc\u3092\u633f\u5165","menu.insert table":"\u30c6\u30fc\u30d6\u30eb\u3092\u633f\u5165","submenu.table style":"\u30c6\u30fc\u30d6\u30eb\u30b9\u30bf\u30a4\u30eb"},ko:{"keyboard.tooltip.functions":"\uae30\ub2a5","keyboard.tooltip.symbols":"\uae30\ud638","keyboard.tooltip.greek":"\uadf8\ub9ac\uc2a4 \ubb38\uc790","keyboard.tooltip.command":"\uc720\uc561 \uba85\ub839 \ubaa8\ub4dc","keyboard.tooltip.numeric":"\uc22b\uc790","keyboard.tooltip.roman":"\ub85c\ub9c8 \ubb38\uc790","tooltip.copy to clipboard":"\ud074\ub9bd \ubcf4\ub4dc\uc5d0 \ubcf5\uc0ac","tooltip.redo":"\ub2e4\uc2dc \ud558\ub2e4","tooltip.toggle virtual keyboard":"\uac00\uc0c1 \ud0a4\ubcf4\ub4dc \uc804\ud658","tooltip.undo":"\uc2e4\ud589 \ucde8\uc18c","menu.insert matrix":"\ub9e4\ud2b8\ub9ad\uc2a4 \uc0bd\uc785","menu.insert vector":"\ubca1\ud130 \uc0bd\uc785","submenu.array.matrix delimiters":"\ud589\ub82c \uad6c\ubd84 \uae30\ud638","menu.array.add row above":"\ub4a4\uc5d0 \ud589 \ucd94\uac00","menu.array.add row below":"\uc55e\uc5d0 \ud589 \ucd94\uac00","menu.array.add column after":"\ub4a4\uc5d0 \uc5f4 \ucd94\uac00","menu.array.add column before":"\uc55e\uc5d0 \uc5f4 \ucd94\uac00","menu.array.delete row":"\ud589 \uc0ad\uc81c","menu.array.delete rows":"\uc120\ud0dd\ud55c \ud589 \uc0ad\uc81c","menu.array.delete column":"\uc5f4 \uc0ad\uc81c","menu.array.delete columns":"\uc120\ud0dd\ud55c \uc5f4 \uc0ad\uc81c","submenu.array.insert separator":"\uad6c\ubd84\uc790 \uc0bd\uc785","menu.insert table":"\ud45c \uc0bd\uc785","submenu.table style":"\ud14c\uc774\ube14 \uc2a4\ud0c0\uc77c"},lv:{"keyboard.tooltip.functions":"Funkcijas","keyboard.tooltip.symbols":"Simboli","keyboard.tooltip.greek":"Grie\u0137u burti","keyboard.tooltip.command":"LaTeX komandu re\u017e\u012bms","keyboard.tooltip.numeric":"Ciparu skaitlis","keyboard.tooltip.roman":"Romie\u0161u v\u0113stules","tooltip.copy to clipboard":"Kop\u0113t starpliktuv\u0113","tooltip.redo":"P\u0101rtais\u012bt","tooltip.toggle virtual keyboard":"P\u0101rsl\u0113gt virtu\u0101lo tastat\u016bru","tooltip.undo":"Atsaukt","menu.insert matrix":"Ievietojiet matricu","menu.insert vector":"Ievietot vektoru","submenu.array.matrix delimiters":"Matricas norobe\u017eot\u0101ji","menu.array.add row above":"Pievienot rindu p\u0113c","menu.array.add row below":"Pievienot rindu pirms","menu.array.add column after":"Pievienot kolonnu p\u0113c","menu.array.add column before":"Pievienot kolonnu pirms","menu.array.delete row":"Dz\u0113st rindu","menu.array.delete rows":"Dz\u0113st atlas\u012bt\u0101s rindas","menu.array.delete column":"Dz\u0113st kolonnu","menu.array.delete columns":"Dz\u0113st atlas\u012bt\u0101s kolonnas","submenu.array.insert separator":"Ievietojiet atdal\u012bt\u0101ju","menu.insert table":"Ievietojiet tabulu","submenu.table style":"Galda stils"},lt:{"keyboard.tooltip.functions":"Funkcijos","keyboard.tooltip.symbols":"Simboliai","keyboard.tooltip.greek":"Graiki\u0161kos raid\u0117s","keyboard.tooltip.command":"LaTeX komand\u0173 re\u017eimas","keyboard.tooltip.numeric":"Skaitmeninis","keyboard.tooltip.roman":"Romos lai\u0161kai","tooltip.copy to clipboard":"Nukopijuoti \u012f i\u0161karpin\u0119","tooltip.redo":"Perdaryti","tooltip.toggle virtual keyboard":"Perjungti virtuali\u0105j\u0105 klaviat\u016br\u0105","tooltip.undo":"At\u0161aukti","menu.insert matrix":"Ievietojiet matricu","menu.insert vector":"Ievietot vektoru","submenu.array.matrix delimiters":"Matricas norobe\u017eot\u0101ji","menu.array.add row above":"Pievienot rindu p\u0113c","menu.array.add row below":"Pievienot rindu pirms","menu.array.add column after":"Pievienot kolonnu p\u0113c","menu.array.add column before":"Pievienot kolonnu pirms","menu.array.delete row":"Dz\u0113st rindu","menu.array.delete rows":"Dz\u0113st atlas\u012bt\u0101s rindas","menu.array.delete column":"Dz\u0113st kolonnu","menu.array.delete columns":"Dz\u0113st atlas\u012bt\u0101s kolonnas","submenu.array.insert separator":"Ievietojiet atdal\u012bt\u0101ju","menu.insert table":"Ievietojiet tabulu","submenu.table style":"Tabulas stili"},lu:{"keyboard.tooltip.functions":"Funktiounen","keyboard.tooltip.symbols":"Symboler","keyboard.tooltip.greek":"Griichesch Br\xe9iwer","keyboard.tooltip.command":"LaTeX Kommando Modus","keyboard.tooltip.numeric":"Numeresch","keyboard.tooltip.roman":"R\xe9imesch Br\xe9iwer","tooltip.copy to clipboard":"Kop\xe9iert op Clipboard","tooltip.redo":"Nees nei maachen","tooltip.toggle virtual keyboard":"Wiesselt Virtuell Tastatur","tooltip.undo":"Undoen","menu.insert matrix":"Matrix asetzen","menu.insert vector":"Insert Vector","submenu.array.matrix delimiters":"Matrix Ofgrenzer","menu.array.add row above":"Dob\xe4izemaachen Rei No","menu.array.add row below":"F\xfc\xfcgt Rei vir","menu.array.add column after":"Dob\xe4izemaachen Kolonn No","menu.array.add column before":"Kolonn derb\xe4i Virun","menu.array.delete row":"Rad l\xe4schen","menu.array.delete rows":"L\xe4scht Ausgewielte Reien","menu.array.delete column":"L\xe4scht Kolonn","menu.array.delete columns":"L\xe4scht Ausgewielte Kolonnen","submenu.array.insert separator":"Insert Separator","menu.insert table":"D\xebsch anzeginn","submenu.table style":"D\xebsch Style"},nl:{"keyboard.tooltip.functions":"Functies","keyboard.tooltip.symbols":"Symbolen","keyboard.tooltip.greek":"Griekse letters","keyboard.tooltip.command":"LaTeX commando mode","keyboard.tooltip.numeric":"Numeriek","keyboard.tooltip.roman":"Romeinse letters","tooltip.copy to clipboard":"Kopi\xebren naar klembord","tooltip.redo":"Opnieuw","tooltip.toggle virtual keyboard":"Schakel naar virtueel toetsenbord","tooltip.undo":"Ongedaan maken","menu.insert matrix":"Matrix invoegen","menu.insert vector":"Vector invoegen","submenu.array.matrix delimiters":"Matrixscheidingstekens","menu.array.add row above":"Rij toevoegen na","menu.array.add row below":"Rij toevoegen eerder","menu.array.add column after":"Kolom toevoegen na","menu.array.add column before":"Kolom toevoegen voor","menu.array.delete row":"Verwijder rij","menu.array.delete rows":"Geselecteerde rijen verwijderen","menu.array.delete column":"Kolom verwijderen","menu.array.delete columns":"Geselecteerde kolommen verwijderen","submenu.array.insert separator":"Scheidingsteken invoegen","menu.insert table":"Tabel invoegen","submenu.table style":"Tabelstijl"},no:{"keyboard.tooltip.functions":"Funksjoner","keyboard.tooltip.symbols":"Symboler","keyboard.tooltip.greek":"Greske bokstaver","keyboard.tooltip.command":"LaTeX kommandomodus","keyboard.tooltip.numeric":"Numerisk","keyboard.tooltip.roman":"Romerske bokstaver","tooltip.copy to clipboard":"Kopiere til utklippstavle","tooltip.redo":"Gj\xf8re om","tooltip.toggle virtual keyboard":"Bytt virtuelt tastatur","tooltip.undo":"Angre","menu.insert matrix":"Sett inn matrise","menu.insert vector":"Sett inn vektor","submenu.array.matrix delimiters":"Matrix avgrensere","menu.array.add row above":"Legg til rad etter","menu.array.add row below":"Legg til rad f\xf8r","menu.array.add column after":"Legg til kolonne etter","menu.array.add column before":"Legg til kolonne f\xf8r","menu.array.delete row":"Slett rad","menu.array.delete rows":"Slett valgte rader","menu.array.delete column":"Slett kolonne","menu.array.delete columns":"Slett valgte kolonner","submenu.array.insert separator":"Sett inn skilletegn","menu.insert table":"Sett inn tabell","submenu.table style":"Tabellstil"},mk:{"keyboard.tooltip.functions":"\u0424\u0443\u043d\u043a\u0446\u0438\u0438","keyboard.tooltip.symbols":"\u0421\u0438\u043c\u0431\u043e\u043b\u0438","keyboard.tooltip.greek":"\u0413\u0440\u0447\u043a\u0438 \u0431\u0443\u043a\u0432\u0438","keyboard.tooltip.command":"\u0420\u0435\u0436\u0438\u043c \u043d\u0430 \u043a\u043e\u043c\u0430\u043d\u0434\u0430 \u0432\u043e \u043b\u0430\u0442\u0435\u043a\u0441","keyboard.tooltip.numeric":"\u041d\u0443\u043c\u0435\u0440\u0438\u0447\u043a\u0438","keyboard.tooltip.roman":"\u0420\u0438\u043c\u0441\u043a\u0438 \u043f\u0438\u0441\u043c\u0430","tooltip.copy to clipboard":"\u041a\u043e\u043f\u0438\u0440\u0430\u0458\u0442\u0435 \u0432\u043e \u043a\u043b\u0438\u043f\u0431\u043e\u0440\u0434","tooltip.redo":"\u041f\u043e\u0432\u0442\u043e\u0440\u043d\u043e","tooltip.toggle virtual keyboard":"\u0412\u043a\u043b\u0443\u0447\u0435\u0442\u0435 \u0458\u0430 \u0432\u0438\u0440\u0442\u0443\u0435\u043b\u043d\u0430\u0442\u0430 \u0442\u0430\u0441\u0442\u0430\u0442\u0443\u0440\u0430","tooltip.undo":"\u0412\u0440\u0430\u0442\u0438","menu.insert matrix":"\u0412\u043c\u0435\u0442\u043d\u0435\u0442\u0435 \u043c\u0430\u0442\u0440\u0438\u0446\u0430","menu.insert vector":"\u0412\u043c\u0435\u0442\u043d\u0438 \u0432\u0435\u043a\u0442\u043e\u0440","submenu.array.matrix delimiters":"\u0420\u0430\u0437\u0433\u0440\u0430\u043d\u0438\u0447\u0443\u0432\u0430\u0447\u0438 \u043d\u0430 \u043c\u0430\u0442\u0440\u0438\u0446\u0430","menu.array.add row above":"\u0414\u043e\u0434\u0430\u0434\u0435\u0442\u0435 \u0440\u0435\u0434 \u043f\u043e\u0441\u043b\u0435","menu.array.add row below":"\u0414\u043e\u0434\u0430\u0434\u0438 \u0440\u0435\u0434 \u043f\u0440\u0435\u0434 \u0442\u043e\u0430","menu.array.add column after":"\u0414\u043e\u0434\u0430\u0434\u0435\u0442\u0435 \u043a\u043e\u043b\u043e\u043d\u0430 \u043f\u043e\u0441\u043b\u0435","menu.array.add column before":"\u0414\u043e\u0434\u0430\u0434\u0435\u0442\u0435 \u043a\u043e\u043b\u043e\u043d\u0430 \u043f\u0440\u0435\u0434 \u0442\u043e\u0430","menu.array.delete row":"\u0418\u0437\u0431\u0440\u0438\u0448\u0438 \u0433\u043e \u0440\u0435\u0434\u043e\u0442","menu.array.delete rows":"\u0418\u0437\u0431\u0440\u0438\u0448\u0435\u0442\u0435 \u0433\u0438 \u0438\u0437\u0431\u0440\u0430\u043d\u0438\u0442\u0435 \u0440\u0435\u0434\u043e\u0432\u0438","menu.array.delete column":"\u0418\u0437\u0431\u0440\u0438\u0448\u0438 \u0458\u0430 \u043a\u043e\u043b\u043e\u043d\u0430\u0442\u0430","menu.array.delete columns":"\u0418\u0437\u0431\u0440\u0438\u0448\u0438 \u0458\u0430 \u043a\u043e\u043b\u043e\u043d\u0430\u0442\u0430","submenu.array.insert separator":"\u0412\u043c\u0435\u0442\u043d\u0435\u0442\u0435 \u0441\u0435\u043f\u0430\u0440\u0430\u0442\u043e\u0440","menu.insert table":"\u0412\u043c\u0435\u0442\u043d\u0438 \u0442\u0430\u0431\u0435\u043b\u0430","submenu.table style":"\u0422\u0430\u0431\u0435\u043b\u0430 \u0441\u0442\u0438\u043b"},pl:{"keyboard.tooltip.functions":"Funkcje","keyboard.tooltip.symbols":"Symbolika","keyboard.tooltip.greek":"Litery greckie","keyboard.tooltip.command":"Tryb polece\u0144 LaTeX","keyboard.tooltip.numeric":"Numeryczne","keyboard.tooltip.roman":"Litery rzymskie","tooltip.copy to clipboard":"Kopiuj do Schowka","tooltip.redo":"Przywr\xf3\u0107","tooltip.toggle virtual keyboard":"Prze\u0142\u0105cz wirtualn\u0105 klawiatur\u0119","tooltip.undo":"Cofnij","menu.insert matrix":"Wstaw macierz","menu.insert vector":"Wstaw wektor","submenu.array.matrix delimiters":"Ograniczniki macierzy","menu.array.add row above":"Dodaj wiersz po","menu.array.add row below":"Dodaj wiersz przed","menu.array.add column after":"Dodaj kolumn\u0119 po","menu.array.add column before":"Dodaj kolumn\u0119 przed","menu.array.delete row":"Usu\u0144 wiersz","menu.array.delete rows":"Usu\u0144 wybrane wiersze","menu.array.delete column":"Usu\u0144 kolumn\u0119","menu.array.delete columns":"Usu\u0144 wybrane kolumny","submenu.array.insert separator":"Wstaw separator","menu.insert table":"Wype\u0142nij tabel\u0119","submenu.table style":"Styl tabel\u0119"},pt:{"keyboard.tooltip.functions":"Functions","keyboard.tooltip.symbols":"S\xedmbolos","keyboard.tooltip.greek":"Letras gregas","keyboard.tooltip.command":"Modo de Comando LaTeX","keyboard.tooltip.numeric":"Num\xe9rico","keyboard.tooltip.roman":"Letras romanas","tooltip.copy to clipboard":"Copiar para \xe1rea de transfer\xeancia","tooltip.redo":"Refazer","tooltip.toggle virtual keyboard":"Alternar teclado virtual","tooltip.undo":"Desfazer","menu.insert matrix":"Inserir Matriz","menu.insert vector":"Inserir vetor","submenu.array.matrix delimiters":"Delimitadores de matriz","menu.array.add row above":"Adicionar linha depois","menu.array.add row below":"Adicionar linha antes","menu.array.add column after":"Adicionar coluna depois","menu.array.add column before":"Adicionar coluna antes","menu.array.delete row":"Excluir linha","menu.array.delete rows":"Excluir linhas selecionadas","menu.array.delete column":"Apagar Coluna","menu.array.delete columns":"Excluir Colunas Selecionadas","submenu.array.insert separator":"Inserir Separador","menu.insert table":"Insira a tabela","submenu.table style":"Estilo tabela"},ro:{"keyboard.tooltip.functions":"Func\u021bii","keyboard.tooltip.symbols":"Simboluri","keyboard.tooltip.greek":"Scrisori grece\u0219ti","keyboard.tooltip.command":"Modul de comand\u0103 latex","keyboard.tooltip.numeric":"Numeric","keyboard.tooltip.roman":"Scrisori romane","tooltip.copy to clipboard":"Copia\u021bi \xeen clipboard","tooltip.redo":"A reface","tooltip.toggle virtual keyboard":"Comuta\u021bi tastatura virtual\u0103","tooltip.undo":"Anula","menu.insert matrix":"Introduce\u021bi Matrix","menu.insert vector":"Insera\u021bi Vector","submenu.array.matrix delimiters":"Delimitatori de matrice","menu.array.add row above":"Ad\u0103uga\u021bi r\xe2ndul dup\u0103","menu.array.add row below":"Ad\u0103uga\u021bi r\xe2ndul \xeenainte","menu.array.add column after":"Ad\u0103uga\u021bi o coloan\u0103 dup\u0103","menu.array.add column before":"Ad\u0103uga\u021bi o coloan\u0103 \xeenainte","menu.array.delete row":"\u0218terge\u021bi r\xe2ndul","menu.array.delete rows":"\u0218terge\u021bi r\xe2ndurile selectate","menu.array.delete column":"\u0218terge\u021bi coloana","menu.array.delete columns":"\u0218terge\u021bi coloanele selectate","submenu.array.insert separator":"Introduce\u021bi separatorul","menu.insert table":"Introduce\u021bi tabelul","submenu.table style":"Table style"},ru:{"keyboard.tooltip.functions":"\u0424\u0443\u043d\u043a\u0446\u0438\u0438","keyboard.tooltip.symbols":"\u0421\u0438\u043c\u0432\u043e\u043b\u044b","keyboard.tooltip.greek":"\u0413\u0440\u0435\u0447\u0435\u0441\u043a\u0438\u0435 \u0431\u0443\u043a\u0432\u044b","keyboard.tooltip.command":"\u0420\u0435\u0436\u0438\u043c \u043a\u043e\u043c\u0430\u043d\u0434\u043d\u043e\u0439 \u0441\u0442\u0440\u043e\u043a\u0438 \u041b\u0430\u0442\u0435\u043a\u0441","keyboard.tooltip.numeric":"\u0447\u0438\u0441\u043b\u043e\u0432\u043e\u0439","keyboard.tooltip.roman":"\u041b\u0430\u0442\u0438\u043d\u0441\u043a\u0438\u0435 \u0431\u0443\u043a\u0432\u044b","tooltip.copy to clipboard":"\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0432 \u0431\u0443\u0444\u0435\u0440 \u043e\u0431\u043c\u0435\u043d\u0430","tooltip.redo":"\u043f\u0435\u0440\u0435\u0434\u0435\u043b\u044b\u0432\u0430\u0442\u044c","tooltip.toggle virtual keyboard":"\u041f\u0435\u0440\u0435\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0432\u0438\u0440\u0442\u0443\u0430\u043b\u044c\u043d\u0443\u044e \u043a\u043b\u0430\u0432\u0438\u0430\u0442\u0443\u0440\u0443","tooltip.undo":"\u0440\u0430\u0441\u0441\u0442\u0435\u0433\u0438\u0432\u0430\u0442\u044c","menu.insert matrix":"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043c\u0430\u0442\u0440\u0438\u0446\u0443","menu.insert vector":"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0432\u0435\u043a\u0442\u043e\u0440","submenu.array.matrix delimiters":"\u041c\u0430\u0442\u0440\u0438\u0447\u043d\u044b\u0435 \u0440\u0430\u0437\u0434\u0435\u043b\u0438\u0442\u0435\u043b\u0438","menu.array.add row above":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u0442\u0440\u043e\u043a\u0443 \u043f\u043e\u0441\u043b\u0435","menu.array.add row below":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u0442\u0440\u043e\u043a\u0443 \u043f\u0435\u0440\u0435\u0434","menu.array.add column after":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u0442\u043e\u043b\u0431\u0435\u0446 \u043f\u043e\u0441\u043b\u0435","menu.array.add column before":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u0442\u043e\u043b\u0431\u0435\u0446 \u043f\u0435\u0440\u0435\u0434","menu.array.delete row":"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u0442\u0440\u043e\u043a\u0443","menu.array.delete rows":"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435 \u0441\u0442\u0440\u043e\u043a\u0438","menu.array.delete column":"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u0442\u043e\u043b\u0431\u0435\u0446","menu.array.delete columns":"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435 \u0441\u0442\u043e\u043b\u0431\u0446\u044b","submenu.array.insert separator":"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0440\u0430\u0437\u0434\u0435\u043b\u0438\u0442\u0435\u043b\u044c","menu.insert table":"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0442\u0430\u0431\u043b\u0438\u0446\u0443","submenu.table style":"\u0422\u0430\u0431\u043b\u0438\u0447\u043d\u044b\u0439 \u0441\u0442\u0438\u043b\u044c"},sk:{"keyboard.tooltip.functions":"Functions","keyboard.tooltip.symbols":"Symboly","keyboard.tooltip.greek":"Gr\xe9cke listy","keyboard.tooltip.command":"Pr\xedkazov\xfd re\u017eim LaTeX","keyboard.tooltip.numeric":"Numerick\xe9","keyboard.tooltip.roman":"R\xedmske listy","tooltip.copy to clipboard":"Skop\xedrova\u0165 do schr\xe1nky","tooltip.redo":"Znova","tooltip.toggle virtual keyboard":"Prepn\xfa\u0165 virtu\xe1lnu kl\xe1vesnicu","tooltip.undo":"Vr\xe1tenie sp\xe4\u0165","menu.insert matrix":"Vlo\u017ete maticu","menu.insert vector":"Vlo\u017ete vektor","submenu.array.matrix delimiters":"Odde\u013eova\u010de mat\xedc","menu.array.add row above":"Pridajte riadok za","menu.array.add row below":"Pridajte riadok pred","menu.array.add column after":"Prida\u0165 st\u013apec za","menu.array.add column before":"Pridajte st\u013apec predt\xfdm","menu.array.delete row":"Odstr\xe1ni\u0165 riadok","menu.array.delete rows":"Odstr\xe1ni\u0165 vybrat\xe9 riadky","menu.array.delete column":"Odstr\xe1ni\u0165 st\u013apec","menu.array.delete columns":"Odstr\xe1ni\u0165 vybrat\xe9 st\u013apce","submenu.array.insert separator":"Vlo\u017ete odde\u013eova\u010d","menu.insert table":"Vlo\u017ete tabu\u013eku","submenu.table style":"\u0160t\xfdl tabu\u013eky"},sl:{"keyboard.tooltip.functions":"Funkcije","keyboard.tooltip.symbols":"Simboli","keyboard.tooltip.greek":"Gr\u0161ka pisma","keyboard.tooltip.command":"Ukazni na\u010din LaTeX","keyboard.tooltip.numeric":"\u0160tevilsko","keyboard.tooltip.roman":"Rimska pisma","tooltip.copy to clipboard":"Kopirati v odlo\u017ei\u0161\u010de","tooltip.redo":"Ponovi","tooltip.toggle virtual keyboard":"Preklop navidezne tipkovnice","tooltip.undo":"Razveljavi","menu.insert matrix":"Vstavi matrico","menu.insert vector":"Vstavi vektor","submenu.array.matrix delimiters":"Matri\u010dni lo\u010devalniki","menu.array.add row above":"Dodaj vrstico po","menu.array.add row below":"Dodaj vrstico prej","menu.array.add column after":"Dodaj stolpec po","menu.array.add column before":"Dodaj stolpec prej","menu.array.delete row":"Izbri\u0161i vrstico","menu.array.delete rows":"Izbri\u0161i izbrane vrstice","menu.array.delete column":"Izbri\u0161i stolpec","menu.array.delete columns":"Izbri\u0161i izbrane stolpce","submenu.array.insert separator":"Vstavi lo\u010dilo","menu.insert table":"Vstavi tabelo","submenu.table style":"Tabela slog"},sq:{"keyboard.tooltip.functions":"Funksione","keyboard.tooltip.symbols":"Simbolet","keyboard.tooltip.greek":"Letrat Greke","keyboard.tooltip.command":"Modaliteti i komand\xebs latex","keyboard.tooltip.numeric":"Numerike","keyboard.tooltip.roman":"Letrat romake","tooltip.copy to clipboard":"Kopjoni n\xeb Clipboard","tooltip.redo":"Riparo","tooltip.toggle virtual keyboard":"Aktivizo tastier\xebn virtuale","tooltip.undo":"Zhb\xebj","menu.insert matrix":"Vendosni Matric\xebn","menu.insert vector":"Vendos vektorin","submenu.array.matrix delimiters":"P\xebrcaktuesit e matric\xebs","menu.array.add row above":"Shto Rreshtin Pas","menu.array.add row below":"Shto Rreshtin Para","menu.array.add column after":"Shto kolon\xebn pas","menu.array.add column before":"Shto kolon\xebn para","menu.array.delete row":"Fshi Rreshtin","menu.array.delete rows":"Fshi rreshtat e zgjedhur","menu.array.delete column":"Fshi kolon\xebn","menu.array.delete columns":"Fshi kolonat e zgjedhura","submenu.array.insert separator":"Vendos Ndar\xebsin","menu.insert table":"Vendos tabel\xebn","submenu.table style":"Stili tabel\xebn"},sr:{"keyboard.tooltip.functions":"\u0424\u0443\u043d\u043a\u0446\u0438\u0458\u0435","keyboard.tooltip.symbols":"\u0421\u0438\u043c\u0431\u043e\u043b\u0438","keyboard.tooltip.greek":"\u0413\u0440\u0435\u0435\u043a \u041b\u0435\u0442\u0442\u0435\u0440\u0441","keyboard.tooltip.command":"\u041b\u0430\u0422\u0435\u041a\u0441 \u043a\u043e\u043c\u0430\u043d\u0434\u043d\u0438 \u0440\u0435\u0436\u0438\u043c","keyboard.tooltip.numeric":"\u041d\u0443\u043c\u0435\u0440\u0438\u0447\u043a\u0438","keyboard.tooltip.roman":"\u0420\u0438\u043c\u0441\u043a\u0430 \u043f\u0438\u0441\u043c\u0430","tooltip.copy to clipboard":"\u041a\u043e\u043f\u0438\u0440\u0430\u0458\u0442\u0435 \u0443 \u043c\u0435\u0452\u0443\u0441\u043f\u0440\u0435\u043c\u043d\u0438\u043a","tooltip.redo":"\u041f\u043e\u043d\u043e\u0432\u0438","tooltip.toggle virtual keyboard":"\u0423\u043a\u0459\u0443\u0447\u0438 / \u0438\u0441\u043a\u0459\u0443\u0447\u0438 \u0432\u0438\u0440\u0442\u0443\u0435\u043b\u043d\u0443 \u0442\u0430\u0441\u0442\u0430\u0442\u0443\u0440\u0443","tooltip.undo":"\u041e\u043f\u043e\u0437\u043e\u0432\u0438","menu.insert matrix":"\u0423\u043c\u0435\u0442\u043d\u0438 \u043c\u0430\u0442\u0440\u0438\u0446\u0443","menu.insert vector":"\u0423\u043c\u0435\u0442\u043d\u0438 \u0432\u0435\u043a\u0442\u043e\u0440","submenu.array.matrix delimiters":"\u041c\u0430\u0442\u0440\u0438\u043a \u0414\u0435\u043b\u0438\u043c\u0438\u0442\u0435\u0440\u0441","menu.array.add row above":"\u0414\u043e\u0434\u0430\u0458 \u0440\u0435\u0434 \u043f\u043e\u0441\u043b\u0435","menu.array.add row below":"\u0414\u043e\u0434\u0430\u0458 \u0440\u0435\u0434 \u043f\u0440\u0435","menu.array.add column after":"\u0414\u043e\u0434\u0430\u0458 \u043a\u043e\u043b\u043e\u043d\u0443 \u043f\u043e\u0441\u043b\u0435","menu.array.add column before":"\u0414\u043e\u0434\u0430\u0458 \u043a\u043e\u043b\u043e\u043d\u0443 \u043f\u0440\u0435","menu.array.delete row":"\u0418\u0437\u0431\u0440\u0438\u0448\u0438 \u0440\u0435\u0434","menu.array.delete rows":"\u0418\u0437\u0431\u0440\u0438\u0448\u0438 \u0438\u0437\u0430\u0431\u0440\u0430\u043d\u0435 \u0440\u0435\u0434\u043e\u0432\u0435","menu.array.delete column":"\u0418\u0437\u0431\u0440\u0438\u0448\u0438 \u043a\u043e\u043b\u043e\u043d\u0443","menu.array.delete columns":"\u0418\u0437\u0431\u0440\u0438\u0448\u0438 \u0438\u0437\u0430\u0431\u0440\u0430\u043d\u0435 \u043a\u043e\u043b\u043e\u043d\u0435","submenu.array.insert separator":"\u0423\u043c\u0435\u0442\u043d\u0438 \u0441\u0435\u043f\u0430\u0440\u0430\u0442\u043e\u0440","menu.insert table":"\u0423\u0431\u0430\u0446\u0438 \u0442\u0430\u0431\u0435\u043b\u0443","submenu.table style":"\u0422\u0430\u0431\u0435\u043b\u0430\u0440\u043d\u0438 \u0441\u0442\u0438\u043b"},sv:{"keyboard.tooltip.functions":"Funktioner","keyboard.tooltip.symbols":"Symboler","keyboard.tooltip.greek":"Grekiska bokst\xe4ver","keyboard.tooltip.command":"LaTeX kommandol\xe4ge","keyboard.tooltip.numeric":"Numerisk","keyboard.tooltip.roman":"Romerska bokst\xe4ver","tooltip.copy to clipboard":"Kopiera till Urklipp","tooltip.redo":"G\xf6ra om","tooltip.toggle virtual keyboard":"V\xe4xla virtuellt tangentbord","tooltip.undo":"\xc5ngra","menu.insert matrix":"S\xe4tt in matris","menu.insert vector":"Infoga vektor","submenu.array.matrix delimiters":"Matrisavgr\xe4nsare","menu.array.add row above":"L\xe4gg till rad efter","menu.array.add row below":"L\xe4gg till rad f\xf6re","menu.array.add column after":"L\xe4gg till kolumn efter","menu.array.add column before":"L\xe4gg till kolumn f\xf6re","menu.array.delete row":"Radera rad","menu.array.delete rows":"Ta bort valda rader","menu.array.delete column":"Ta bort kolumn","menu.array.delete columns":"Ta bort valda kolumner","submenu.array.insert separator":"S\xe4tt i separator","menu.insert table":"Infoga tabell","submenu.table style":"Tabellstil"},th:{"keyboard.tooltip.functions":"\u0e1f\u0e31\u0e07\u0e01\u0e4c\u0e0a\u0e31\u0e48\u0e19","keyboard.tooltip.symbols":"\u0e2a\u0e31\u0e0d\u0e25\u0e31\u0e01\u0e29\u0e13\u0e4c","keyboard.tooltip.greek":"\u0e2d\u0e31\u0e01\u0e29\u0e23\u0e01\u0e23\u0e35\u0e01","keyboard.tooltip.command":"\u0e42\u0e2b\u0e21\u0e14\u0e04\u0e33\u0e2a\u0e31\u0e48\u0e07 \u0e19\u0e49\u0e33\u0e22\u0e32\u0e07","keyboard.tooltip.numeric":"\u0e15\u0e31\u0e27\u0e40\u0e25\u0e02","keyboard.tooltip.roman":"\u0e2d\u0e31\u0e01\u0e29\u0e23\u0e42\u0e23\u0e21\u0e31\u0e19","tooltip.copy to clipboard":"\u0e04\u0e31\u0e14\u0e25\u0e2d\u0e01\u0e44\u0e1b\u0e17\u0e35\u0e48\u0e04\u0e25\u0e34\u0e1b\u0e1a\u0e2d\u0e23\u0e4c\u0e14","tooltip.redo":"\u0e17\u0e33\u0e0b\u0e49\u0e33","tooltip.toggle virtual keyboard":"\u0e2a\u0e25\u0e31\u0e1a\u0e41\u0e1b\u0e49\u0e19\u0e1e\u0e34\u0e21\u0e1e\u0e4c\u0e40\u0e2a\u0e21\u0e37\u0e2d\u0e19","tooltip.undo":"\u0e40\u0e25\u0e34\u0e01\u0e17\u0e33","menu.insert matrix":"\u0e41\u0e17\u0e23\u0e01\u0e40\u0e21\u0e17\u0e23\u0e34\u0e01\u0e0b\u0e4c","menu.insert vector":"\u0e41\u0e17\u0e23\u0e01\u0e40\u0e27\u0e01\u0e40\u0e15\u0e2d\u0e23\u0e4c","submenu.array.matrix delimiters":"\u0e15\u0e31\u0e27\u0e04\u0e31\u0e48\u0e19\u0e40\u0e21\u0e17\u0e23\u0e34\u0e01\u0e0b\u0e4c","menu.array.add row above":"\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e41\u0e16\u0e27\u0e2b\u0e25\u0e31\u0e07","menu.array.add row below":"\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e41\u0e16\u0e27\u0e01\u0e48\u0e2d\u0e19","menu.array.add column after":"\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e04\u0e2d\u0e25\u0e31\u0e21\u0e19\u0e4c\u0e2b\u0e25\u0e31\u0e07","menu.array.add column before":"\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e04\u0e2d\u0e25\u0e31\u0e21\u0e19\u0e4c\u0e01\u0e48\u0e2d\u0e19","menu.array.delete row":"\u0e25\u0e1a\u0e41\u0e16\u0e27","menu.array.delete rows":"\u0e25\u0e1a\u0e41\u0e16\u0e27\u0e17\u0e35\u0e48\u0e40\u0e25\u0e37\u0e2d\u0e01","menu.array.delete column":"\u0e25\u0e1a\u0e04\u0e2d\u0e25\u0e31\u0e21\u0e19\u0e4c","menu.array.delete columns":"\u0e25\u0e1a\u0e04\u0e2d\u0e25\u0e31\u0e21\u0e19\u0e4c\u0e17\u0e35\u0e48\u0e40\u0e25\u0e37\u0e2d\u0e01","submenu.array.insert separator":"\u0e15\u0e31\u0e27\u0e04\u0e31\u0e48\u0e19\u0e41\u0e17\u0e23\u0e01","menu.insert table":"\u0e41\u0e17\u0e23\u0e01\u0e15\u0e32\u0e23\u0e32\u0e07","submenu.table style":"\u0e2a\u0e44\u0e15\u0e25\u0e4c\u0e15\u0e32\u0e23\u0e32\u0e07"},tr:{"keyboard.tooltip.functions":"Fonksiyonlar","keyboard.tooltip.symbols":"Semboller","keyboard.tooltip.greek":"Yunan harfleri","keyboard.tooltip.command":"LaTeX Komut Modu","keyboard.tooltip.numeric":"Say\u0131sal","keyboard.tooltip.roman":"Roma Harfleri","tooltip.copy to clipboard":"Panoya kopyala","tooltip.redo":"Yeniden yap","tooltip.toggle virtual keyboard":"Sanal Klavyeyi A\xe7/Kapat","tooltip.undo":"Geri alma","menu.insert matrix":"Matris Ekle","menu.insert vector":"Vekt\xf6r Ekle","submenu.array.matrix delimiters":"Matris S\u0131n\u0131rlay\u0131c\u0131lar","menu.array.add row above":"Sat\u0131rdan Sonra Ekle","menu.array.add row below":"\xd6nce Sat\u0131r Ekle","menu.array.add column after":"Sonra S\xfctun Ekle","menu.array.add column before":"\xd6nce S\xfctun Ekle","menu.array.delete row":"S\u0131ray\u0131 sil","menu.array.delete rows":"Se\xe7ili Sat\u0131rlar\u0131 Sil","menu.array.delete column":"S\xfctunu Sil","menu.array.delete columns":"Se\xe7ili S\xfctunlar\u0131 Sil","submenu.array.insert separator":"Ay\u0131r\u0131c\u0131 Ekle","menu.insert table":"Tablo Ekle","submenu.table style":"Tablo Stili"},uk:{"keyboard.tooltip.functions":"\u0424\u0443\u043d\u043a\u0446\u0456\u0457","keyboard.tooltip.symbols":"\u0421\u0438\u043c\u0432\u043e\u043b\u0438","keyboard.tooltip.greek":"\u0413\u0440\u0435\u0446\u044c\u043a\u0456 \u043b\u0456\u0442\u0435\u0440\u0438","keyboard.tooltip.command":"\u041a\u043e\u043c\u0430\u043d\u0434\u043d\u0438\u0439 \u0440\u0435\u0436\u0438\u043c \u043b\u0430\u0442\u0435\u043a\u0441\u0443","keyboard.tooltip.numeric":"\u0427\u0438\u0441\u043b\u043e\u0432\u0438\u0439","keyboard.tooltip.roman":"\u0420\u0438\u043c\u0441\u044c\u043a\u0456 \u043b\u0456\u0442\u0435\u0440\u0438","tooltip.copy to clipboard":"\u041a\u043e\u043f\u0456\u044e\u0432\u0430\u0442\u0438 \u0432 \u0431\u0443\u0444\u0435\u0440 \u043e\u0431\u043c\u0456\u043d\u0443","tooltip.redo":"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0438","tooltip.toggle virtual keyboard":"\u041f\u0435\u0440\u0435\u043a\u043b\u044e\u0447\u0438\u0442\u0438 \u0432\u0456\u0440\u0442\u0443\u0430\u043b\u044c\u043d\u0443 \u043a\u043b\u0430\u0432\u0456\u0430\u0442\u0443\u0440\u0443","tooltip.undo":"\u0421\u043a\u0430\u0441\u0443\u0432\u0430\u0442\u0438","menu.insert matrix":"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u0438 \u043c\u0430\u0442\u0440\u0438\u0446\u044e","menu.insert vector":"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u0438 \u0432\u0435\u043a\u0442\u043e\u0440","submenu.array.matrix delimiters":"\u041c\u0430\u0442\u0440\u0438\u0447\u043d\u0456 \u0440\u043e\u0437\u0434\u0456\u043b\u044c\u043d\u0438\u043a\u0438","menu.array.add row above":"\u0414\u043e\u0434\u0430\u0442\u0438 \u0440\u044f\u0434\u043e\u043a \u043f\u0456\u0441\u043b\u044f","menu.array.add row below":"\u0414\u043e\u0434\u0430\u0442\u0438 \u0440\u044f\u0434\u043e\u043a \u0434\u043e","menu.array.add column after":"\u0414\u043e\u0434\u0430\u0442\u0438 \u0441\u0442\u043e\u0432\u043f\u0435\u0446\u044c \u043f\u0456\u0441\u043b\u044f","menu.array.add column before":"\u0414\u043e\u0434\u0430\u0442\u0438 \u0441\u0442\u043e\u0432\u043f\u0435\u0446\u044c \u043f\u0435\u0440\u0435\u0434","menu.array.delete row":"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u0440\u044f\u0434\u043e\u043a","menu.array.delete rows":"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u0432\u0438\u0431\u0440\u0430\u043d\u0456 \u0440\u044f\u0434\u043a\u0438","menu.array.delete column":"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u0441\u0442\u043e\u0432\u043f\u0435\u0446\u044c","menu.array.delete columns":"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u0432\u0438\u0431\u0440\u0430\u043d\u0456 \u0441\u0442\u043e\u0432\u043f\u0446\u0456","submenu.array.insert separator":"\u0412\u0441\u0442\u0430\u0432\u0442\u0435 \u0440\u043e\u0437\u0434\u0456\u043b\u044c\u043d\u0438\u043a","menu.insert table":"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u0438 \u0442\u0430\u0431\u043b\u0438\u0446\u044e","submenu.table style":"\u0421\u0442\u0438\u043b\u044c \u0442\u0430\u0431\u043b\u0438\u0446\u0456"},vi:{"keyboard.tooltip.functions":"Ch\u1ee9c n\u0103ng","keyboard.tooltip.symbols":"K\xfd hi\u1ec7u","keyboard.tooltip.greek":"Ch\u1eef Hy L\u1ea1p","keyboard.tooltip.command":"Ch\u1ebf \u0111\u1ed9 l\u1ec7nh LaTeX","keyboard.tooltip.numeric":"S\u1ed1","keyboard.tooltip.roman":"Ch\u1eef c\xe1i La m\xe3","tooltip.copy to clipboard":"Sao ch\xe9p v\xe0o clipboard","tooltip.redo":"L\xe0m l\u1ea1i","tooltip.toggle virtual keyboard":"Chuy\u1ec3n \u0111\u1ed5i b\xe0n ph\xedm \u1ea3o","tooltip.undo":"Ho\xe0n t\xe1c","menu.insert matrix":"Ch\xe8n ma tr\u1eadn","menu.insert vector":"Insert Vector","submenu.array.matrix delimiters":"D\u1ea5u ph\xe2n c\xe1ch ma tr\u1eadn","menu.array.add row above":"Th\xeam h\xe0ng sau","menu.array.add row below":"Th\xeam h\xe0ng tr\u01b0\u1edbc","menu.array.add column after":"Th\xeam c\u1ed9t sau","menu.array.add column before":"Th\xeam c\u1ed9t tr\u01b0\u1edbc","menu.array.delete row":"X\xf3a h\xe0ng","menu.array.delete rows":"X\xf3a h\xe0ng \u0111\xe3 ch\u1ecdn","menu.array.delete column":"X\xf3a c\u1ed9t","menu.array.delete columns":"X\xf3a c\xe1c c\u1ed9t \u0111\xe3 ch\u1ecdn","submenu.array.insert separator":"Ch\xe8n d\u1ea5u ph\xe2n c\xe1ch","menu.insert table":"Ch\xe8n b\u1ea3ng","submenu.table style":"Ki\u1ec3u b\u1ea3ng"},zh_cn:{"keyboard.tooltip.functions":"\u804c\u80fd","keyboard.tooltip.symbols":"\u7b26\u53f7","keyboard.tooltip.greek":"\u5e0c\u814a\u5b57\u6bcd","keyboard.tooltip.command":"\u4e73\u80f6 \u547d\u4ee4\u6a21\u5f0f","keyboard.tooltip.numeric":"\u6570\u5b57","keyboard.tooltip.roman":"\u7f57\u9a6c\u5b57\u6bcd","tooltip.copy to clipboard":"\u590d\u5236\u5230\u526a\u8d34\u677f","tooltip.redo":"\u91cd\u505a","tooltip.toggle virtual keyboard":"\u5207\u6362\u865a\u62df\u952e\u76d8","tooltip.undo":"\u64a4\u6d88","menu.insert matrix":"\u63d2\u5165\u77e9\u9635","menu.insert vector":"\u63d2\u5165\u5411\u91cf","submenu.array.matrix delimiters":"\u77e9\u9635\u5206\u9694\u7b26","menu.array.add row above":"\u5728\u540e\u9762\u6dfb\u52a0\u884c","menu.array.add row below":"\u5728\u524d\u9762\u6dfb\u52a0\u884c","menu.array.add column after":"\u5728\u540e\u9762\u6dfb\u52a0\u5217r","menu.array.add column before":"\u5728\u524d\u9762\u6dfb\u52a0\u5217","menu.array.delete row":"\u5220\u9664\u884c","menu.array.delete rows":"\u5220\u9664\u9009\u5b9a\u884c","menu.array.delete column":"\u5220\u9664\u5217","menu.array.delete columns":"\u5220\u9664\u9009\u5b9a\u7684\u5217","submenu.array.insert separator":"\u63d2\u5165\u5206\u9694\u7b26","menu.insert table":"\u63d2\u5165\u8868\u683c","submenu.table style":"\u8868\u683c\u6837\u5f0f"},zh_tw:{"keyboard.tooltip.functions":"\u8077\u80fd","keyboard.tooltip.symbols":"\u7b26\u865f","keyboard.tooltip.greek":"\u5e0c\u81d8\u5b57\u6bcd","keyboard.tooltip.command":"\u4e73\u81a0\u547d\u4ee4\u6a21\u5f0f","keyboard.tooltip.numeric":"\u6578\u5b57","keyboard.tooltip.roman":"\u7f85\u99ac\u5b57\u6bcd","tooltip.copy to clipboard":"\u8907\u88fd\u5230\u526a\u8cbc\u677f","tooltip.redo":"\u91cd\u505a","tooltip.toggle virtual keyboard":"\u5207\u63db\u865b\u64ec\u9375\u76e4","tooltip.undo":"\u64a4\u6d88","menu.insert matrix":"\u63d2\u5165\u77e9\u9663","menu.insert vector":"\u63d2\u5165\u5411\u91cf","submenu.array.matrix delimiters":"\u77e9\u9663\u5206\u9694\u7b26","menu.array.add row above":"\u5728\u5f8c\u9762\u6dfb\u52a0\u884c","menu.array.add row below":"\u5728\u524d\u9762\u6dfb\u52a0\u884c","menu.array.add column after":"\u5728\u5f8c\u9762\u6dfb\u52a0\u5217","menu.array.add column before":"\u5728\u524d\u9762\u6dfb\u52a0\u5217","menu.array.delete row":"\u522a\u9664\u884c","menu.array.delete rows":"\u522a\u9664\u9078\u5b9a\u884c","menu.array.delete column":"\u522a\u9664\u5217","menu.array.delete columns":"\u522a\u9664\u9078\u5b9a\u7684\u5217","submenu.array.insert separator":"\u63d2\u5165\u5206\u9694\u7b26","menu.insert table":"\u63d2\u5165\u8868\u683c","submenu.table style":"\u8868\u683c\u6a23\u5f0f"}},_locale:"",get locale(){return go._locale||(go._locale=Ds()?navigator.language.slice(0,5):"en"),go._locale},set locale(n){go._locale=n},merge(n,o){if(n&&o){let e=go._locale;go.locale=n,go.strings[n]=Ee(Ee({},go.strings[n]),o),go.locale=e}else if(n&&!o)for(let e of Object.keys(n))go.merge(e,n[e])}};function jm(n){if(void 0===n)return;let o=go.locale.slice(0,2),e="";return go.strings[go.locale]&&(e=go.strings[go.locale][n]),!e&&go.strings[o]&&(e=go.strings[o][n]),e||(e=go.strings.en[n]),e||void 0}var mJ={m0:"#3F3D99",m1:"#993D71",m2:"#998B3D",m3:"#3D9956",m4:"#3D5A99",m5:"#993D90",m6:"#996D3D",m7:"#43993D",m8:"#3D7999",m9:"#843D99"},hJ={blue:"#0072BD",orange:"#D95319",yellow:"#EDB120",purple:"#7E2F8E",green:"#77AC30",cyan:"#4DBEEE",red:"#A2142F"},nx={red:"#fbbbb6",orange:"#ffe0c2",yellow:"#fff1c2",lime:"#d0e8b9",green:"#bceac4",teal:"#b9f1f1",blue:"#b6d9fb",indigo:"#d1c2f0",purple:"#e3baf8",magenta:"#f9c8e0",black:"#353535","dark-grey":"#8C8C8C",grey:"#D0D0D0","light-grey":"#F0F0F0",white:"#ffffff"},ix={red:"#d7170b",orange:"#fe8a2b",yellow:"#ffc02b",lime:"#63b215",green:"#21ba3a",teal:"#17cfcf",blue:"#0d80f2",indigo:"#63c",purple:"#a219e6",magenta:"#eb4799",black:"#000","dark-grey":"#666",grey:"#A6A6A6","light-grey":"#d4d5d2",white:"#ffffff"},M5={Red:"red",Orange:"orange",Yellow:"yellow",LimeGreen:"lime",Green:"green",TealBlue:"teal",Blue:"blue",Violet:"indigo",Purple:"purple",Magenta:"magenta",Black:"black",Gray:"grey",White:"white"},pJ={Apricot:"#FBB982",Aquamarine:"#00B5BE",Bittersweet:"#C04F17",Black:"#221E1F",Blue:"#2D2F92",BlueGreen:"#00B3B8",BlueViolet:"#473992",BrickRed:"#B6321C",Brown:"#792500",BurntOrange:"#F7921D",CadetBlue:"#74729A",CarnationPink:"#F282B4",Cerulean:"#00A2E3",CornflowerBlue:"#41B0E4",Cyan:"#00AEEF",Dandelion:"#FDBC42",DarkOrchid:"#A4538A",Emerald:"#00A99D",ForestGreen:"#009B55",Fuchsia:"#8C368C",Goldenrod:"#FFDF42",Gray:"#949698",Green:"#00A64F",GreenYellow:"#DFE674",JungleGreen:"#00A99A",Lavender:"#F49EC4",Limegreen:"#8DC73E",Magenta:"#EC008C",Mahogany:"#A9341F",Maroon:"#AF3235",Melon:"#F89E7B",MidnightBlue:"#006795",Mulberry:"#A93C93",NavyBlue:"#006EB8",OliveGreen:"#3C8031",Orange:"#F58137",OrangeRed:"#ED135A",Orchid:"#AF72B0",Peach:"#F7965A",Periwinkle:"#7977B8",PineGreen:"#008B72",Plum:"#92268F",ProcessBlue:"#00B0F0",Purple:"#99479B",RawSienna:"#974006",Red:"#ED1B23",RedOrange:"#F26035",RedViolet:"#A1246B",Rhodamine:"#EF559F",RoyalBlue:"#0071BC",RoyalPurple:"#613F99",RubineRed:"#ED017D",Salmon:"#F69289",SeaGreen:"#3FBC9D",Sepia:"#671800",SkyBlue:"#46C5DD",SpringGreen:"#C6DC67",Tan:"#DA9D76",TealBlue:"#00AEB3",Thistle:"#D883B7",Turquoise:"#00B4CE",Violet:"#58429B",VioletRed:"#EF58A0",White:"#FFFFFF",WildStrawberry:"#EE2967",Yellow:"#FFF200",YellowGreen:"#98CC70",YellowOrange:"#FAA21A"};function ox(n){var o,e,i,a,r,s;let c,d,h,l=n.split("!"),_=255,x=255,b=255,T=-1,P=l.length>0&&l[0].startsWith("-");P&&(l[0]=l[0].slice(1));for(let U=0;U<l.length;U++){c=_,d=x,h=b;let q=null==(o=l[U].trim().match(/^([A-Za-z\d]+)/))?void 0:o[1],B=q?.toLowerCase(),W=q&&null!=(s=null!=(r=null!=(a=null!=(i=null!=(e=ix[B])?e:ix[M5[q]])?i:hJ[q])?a:pJ[q])?r:mJ[q])?s:l[U].trim(),G=W.match(/^#([\da-f]{2})([\da-f]{2})([\da-f]{2})$/i);if(null!=G&&G[1]&&G[2]&&G[3])_=Math.max(0,Math.min(255,Number.parseInt(G[1],16))),x=Math.max(0,Math.min(255,Number.parseInt(G[2],16))),b=Math.max(0,Math.min(255,Number.parseInt(G[3],16)));else if(G=W.match(/^#([\da-f]{3})$/i),null!=G&&G[1]){let nt=Number.parseInt(G[1][0],16),At=Number.parseInt(G[1][1],16),ut=Number.parseInt(G[1][2],16);_=Math.max(0,Math.min(255,16*nt+nt)),x=Math.max(0,Math.min(255,16*At+At)),b=Math.max(0,Math.min(255,16*ut+ut))}else{if(G=W.match(/^rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i),!(null!=G&&G[1]&&G[2]&&G[3]))return;_=Math.max(0,Math.min(255,Number.parseInt(G[1]))),x=Math.max(0,Math.min(255,Number.parseInt(G[2]))),b=Math.max(0,Math.min(255,Number.parseInt(G[3])))}T>=0&&(_=(1-T)*_+T*c,x=(1-T)*x+T*d,b=(1-T)*b+T*h,T=-1),U+1<l.length&&(T=Math.max(0,Math.min(100,Number.parseInt(l[++U])))/100)}return T>=0&&(_=T*_+(1-T)*c,x=T*x+(1-T)*d,b=T*b+(1-T)*h),P&&(_=255-_,x=255-x,b=255-b),"#"+("00"+Math.round(_).toString(16)).slice(-2)+("00"+Math.round(x).toString(16)).slice(-2)+("00"+Math.round(b).toString(16)).slice(-2)}function c4(n){var o,e;return n=n.trim(),null!=(e=null!=(o=nx[n.toLowerCase()])?o:nx[M5[n]])?e:ox(n)}function u4(n,o,e){return e<0&&(e+=6),e>=6&&(e-=6),e<1?(o-n)*e+n:e<3?o:e<4?(o-n)*(4-e)+n:n}function d4(n){return n<0?0:n>255?255:Math.round(n)}function I5(n){let o=function _J(n){if(!n||"#"!==n[0])return;let o;return(n=n.slice(1)).length<=4?(o={r:parseInt(n[0]+n[0],16),g:parseInt(n[1]+n[1],16),b:parseInt(n[2]+n[2],16)},4===n.length&&(o.a=parseInt(n[3]+n[3],16)/255)):(o={r:parseInt(n[0]+n[1],16),g:parseInt(n[2]+n[3],16),b:parseInt(n[4]+n[5],16)},8===n.length&&(o.a=parseInt(n[6]+n[7],16)/255)),o&&void 0===o.a&&(o.a=1),o}(n);if(!o)return n;let{h:e,s:i,l:a}=function xJ(n){let{r:o,g:e,b:i}=n;o/=255,e/=255,i/=255;let l,c,a=Math.min(o,e,i),r=Math.max(o,e,i),s=r-a;r===a?l=0:o===r?l=(e-i)/s:e===r?l=2+(i-o)/s:i===r&&(l=4+(o-e)/s),l=Math.min(60*l,360),l<0&&(l+=360);let d=(a+r)/2;return c=r===a?0:d<=.5?s/(r+a):s/(2-r-a),{h:l,s:c,l:d}}(o);return i+=.1,a-=.1,function gJ(n){let{r:o,g:e,b:i}=n,a=((1<<24)+(d4(o)<<16)+(d4(e)<<8)+d4(i)).toString(16).slice(1);return a[0]===a[1]&&a[2]===a[3]&&a[4]===a[5]&&a[6]===a[7]&&(a=a[0]+a[2]+a[4]),"#"+a}(function fJ(n){let[o,e,i]=[n.h,n.s,n.l];o=(o+360)%360/60,i=Math.max(0,Math.min(i,1)),e=Math.max(0,Math.min(e,1));let a=i<=.5?i*(e+1):i+e-i*e,r=2*i-a;return{r:Math.round(255*u4(r,a,o+2)),g:Math.round(255*u4(r,a,o)),b:Math.round(255*u4(r,a,o-2))}}({h:e,s:i,l:a}))}var jc={},ax={60:"\\lt",62:"\\gt",111:"o",38:"\\&",123:"\\lbrace",125:"\\rbrace",91:"\\lbrack",93:"\\rbrack",58:"\\colon",160:"~",172:"\\neg",183:"\\cdot",188:"\\frac{1}{4}",189:"\\frac{1}{2}",190:"\\frac{3}{4}",8304:"^{0}",8305:"^{i}",185:"^{1}",178:"^{2}",179:"^{3}",8224:"\\dagger",8225:"\\ddagger",8230:"\\ldots",8308:"^{4}",8309:"^{5}",8310:"^{6}",8311:"^{7}",8312:"^{8}",8313:"^{9}",8314:"^{+}",8315:"^{-}",8316:"^{=}",8319:"^{n}",8320:"_{0}",8321:"_{1}",8322:"_{2}",8323:"_{3}",8324:"_{4}",8325:"_{5}",8326:"_{6}",8327:"_{7}",8328:"_{8}",8329:"_{9}",8330:"_{+}",8331:"_{-}",8332:"_{=}",8336:"_{a}",8337:"_{e}",8338:"_{o}",8339:"_{x}",8242:"\\prime",39:"\\prime",8592:"\\gets",8594:"\\to",9651:"\\triangle",9661:"\\triangledown",8715:"\\owns",8727:"\\ast",8739:"\\vert",8741:"\\Vert",8743:"\\land",8744:"\\lor",8901:"\\cdot",8904:"\\bowtie",8800:"\\ne",8804:"\\le",8805:"\\ge",8869:"\\bot",10231:"\\biconditional",10232:"\\impliedby",10233:"\\implies",10234:"\\iff",8450:"\\mathbb{C}",8469:"\\mathbb{N}",8473:"\\mathbb{P}",8474:"\\mathbb{Q}",8477:"\\mathbb{R}",8484:"\\mathbb{Z}",8461:"\\mathbb{H}",8476:"\\Re",8465:"\\Im",42:"\\ast",11036:"\\square",9633:"\\square",8720:"\\coprod",8716:"\\not\\ni",9671:"\\diamond",8846:"\\uplus",8851:"\\sqcap",8852:"\\sqcup",8768:"\\wr",8750:"\\oint",8226:"\\textbullet",8722:"-",978:"\\Upsilon"},qc={},m4={},wJ={iff:"\\;\u27fa\\;",nicefrac:"^{#1}\\!\\!/\\!_{#2}",rd:"\\mathrm{d}",rD:"\\mathrm{D}",doubleStruckCapitalN:"\\mathbb{N}",doubleStruckCapitalR:"\\mathbb{R}",doubleStruckCapitalQ:"\\mathbb{Q}",doubleStruckCapitalZ:"\\mathbb{Z}",doubleStruckCapitalP:"\\mathbb{P}",scriptCapitalE:"\\mathscr{E}",scriptCapitalH:"\\mathscr{H}",scriptCapitalL:"\\mathscr{L}",gothicCapitalC:"\\mathfrak{C}",gothicCapitalH:"\\mathfrak{H}",gothicCapitalI:"\\mathfrak{I}",gothicCapitalR:"\\mathfrak{R}",imaginaryI:"\\mathrm{i}",imaginaryJ:"\\mathrm{j}",exponentialE:"\\mathrm{e}",differentialD:"\\mathrm{d}",capitalDifferentialD:"\\mathrm{D}","braket.sty":{package:{bra:"\\mathinner{\\langle{#1}|}",ket:"\\mathinner{|{#1}\\rangle}",braket:"\\mathinner{\\langle{#1}\\rangle}",set:"\\mathinner{\\lbrace #1 \\rbrace}",Bra:"\\left\\langle #1\\right|",Ket:"\\left|#1\\right\\rangle",Braket:"\\left\\langle{#1}\\right\\rangle",Set:"\\left\\lbrace #1 \\right\\rbrace"}},"amsmath.sty":{package:{varGamma:"\\mathit{\\Gamma}",varDelta:"\\mathit{\\Delta}",varTheta:"\\mathit{\\Theta}",varLambda:"\\mathit{\\Lambda}",varXi:"\\mathit{\\Xi}",varPi:"\\mathit{\\Pi}",varSigma:"\\mathit{\\Sigma}",varUpsilon:"\\mathit{\\Upsilon}",varPhi:"\\mathit{\\Phi}",varPsi:"\\mathit{\\Psi}",varOmega:"\\mathit{\\Omega}",pmod:{def:"\\quad(\\operatorname{mod}\\ #1)",args:1,expand:!1},mod:{def:"\\quad\\operatorname{mod}\\,\\,#1",args:1,expand:!1},bmod:{def:"\\;\\mathbin{\\operatorname{mod }}",expand:!1}},expand:!1},"texvc.sty":{package:{darr:"\\downarrow",dArr:"\\Downarrow",Darr:"\\Downarrow",lang:"\\langle",rang:"\\rangle",uarr:"\\uparrow",uArr:"\\Uparrow",Uarr:"\\Uparrow",N:"\\mathbb{N}",R:"\\mathbb{R}",Z:"\\mathbb{Z}",alef:"\\aleph",alefsym:"\\aleph",Alpha:"\\mathrm{A}",Beta:"\\mathrm{B}",bull:"\\bullet",Chi:"\\mathrm{X}",clubs:"\\clubsuit",cnums:"\\mathbb{C}",Complex:"\\mathbb{C}",Dagger:"\\ddagger",diamonds:"\\diamondsuit",empty:"\\emptyset",Epsilon:"\\mathrm{E}",Eta:"\\mathrm{H}",exist:"\\exists",harr:"\\leftrightarrow",hArr:"\\Leftrightarrow",Harr:"\\Leftrightarrow",hearts:"\\heartsuit",image:"\\Im",infin:"\\infty",Iota:"\\mathrm{I}",isin:"\\in",Kappa:"\\mathrm{K}",larr:"\\leftarrow",lArr:"\\Leftarrow",Larr:"\\Leftarrow",lrarr:"\\leftrightarrow",lrArr:"\\Leftrightarrow",Lrarr:"\\Leftrightarrow",Mu:"\\mathrm{M}",natnums:"\\mathbb{N}",Nu:"\\mathrm{N}",Omicron:"\\mathrm{O}",plusmn:"\\pm",rarr:"\\rightarrow",rArr:"\\Rightarrow",Rarr:"\\Rightarrow",real:"\\Re",reals:"\\mathbb{R}",Reals:"\\mathbb{R}",Rho:"\\mathrm{P}",sdot:"\\cdot",sect:"\\S",spades:"\\spadesuit",sub:"\\subset",sube:"\\subseteq",supe:"\\supseteq",Tau:"\\mathrm{T}",thetasym:"\\vartheta",weierp:"\\wp",Zeta:"\\mathrm{Z}"},expand:!1}},Pu={" ":32,"\\#":35,"\\&":38,"\\$":36,"\\%":37,"\\_":95,"\\euro":8364,"\\maltese":10016,"\\{":123,"\\}":125,"\\nobreakspace":160,"\\ldots":8230,"\\textellipsis":8230,"\\backslash":92,"`":8216,"'":8217,"``":8220,"''":8221,"\\degree":176,"\\textasciicircum":94,"\\textasciitilde":126,"\\textasteriskcentered":42,"\\textbackslash":92,"\\textbraceleft":123,"\\textbraceright":125,"\\textbullet":8226,"\\textdollar":36,"\\textsterling":163,"\\textdagger":8224,"\\textdaggerdbl":8225,"\u2013":8211,"\u2014":8212,"\u2018":8216,"\u2019":8217,"\u201c":8220,"\u201d":8221,'"':8221,"\\ss":223,"\\ae":230,"\\oe":339,"\\AE":198,"\\OE":338,"\\O":216,"\\i":305,"\\j":567,"\\aa":229,"\\AA":197},CJ=/[\w!@*()-=+{}[\]\\';:?/.,~<>`|$%#&^" ]/,TJ=E5()?new RegExp("\\p{Letter}","u"):/[a-zA-Z\u0430\u0410\u0431\u0411\u0432\u0412\u0433\u0413\u0434\u0414\u0435\u0415\u0451\u0401\u0436\u0416\u0437\u0417\u0438\u0418\u0439\u0419\u043a\u041a\u043b\u041b\u043c\u041c\u043d\u041d\u043e\u041e\u043f\u041f\u0440\u0420\u0441\u0421\u0442\u0422\u0443\u0423\u0444\u0424\u0445\u0425\u0446\u0426\u0447\u0427\u0448\u0428\u0449\u0429\u044a\u042a\u044b\u042b\u044c\u042c\u044d\u042d\u044e\u042e\u044f\u0104\u0105\u0106\u0107\u0118\u0119\u0141\u0142\u0143\u0144\xd3\xf3\u015a\u015b\u0179\u017a\u017b\u017c\xe0\xe2\xe4\xf4\xe9\xe8\xeb\xea\xef\xee\xe7\xf9\xfb\xfc\xff\xe6\u0153\xc0\xc2\xc4\xd4\xc9\xc8\xcb\xca\xcf\xce\u0178\xc7\xd9\xdb\xdc\xc6\u0152\xf6\xdf\xd6\u1e9e\xec\xed\xf2\xfa\xcc\xcd\xd2\xda\xe1\xf1\xc1\xd1]/,rx=E5()?new RegExp("[0-9\\p{Letter}]","u"):/[\da-zA-Z\u0430\u0410\u0431\u0411\u0432\u0412\u0433\u0413\u0434\u0414\u0435\u0415\u0451\u0401\u0436\u0416\u0437\u0417\u0438\u0418\u0439\u0419\u043a\u041a\u043b\u041b\u043c\u041c\u043d\u041d\u043e\u041e\u043f\u041f\u0440\u0420\u0441\u0421\u0442\u0422\u0443\u0423\u0444\u0424\u0445\u0425\u0446\u0426\u0447\u0427\u0448\u0428\u0449\u0429\u044a\u042a\u044b\u042b\u044c\u042c\u044d\u042d\u044e\u042e\u044f\u0104\u0105\u0106\u0107\u0118\u0119\u0141\u0142\u0143\u0144\xd3\xf3\u015a\u015b\u0179\u017a\u017b\u017c\xe0\xe2\xe4\xf4\xe9\xe8\xeb\xea\xef\xee\xe7\xf9\xfb\xfc\xff\xe6\u0153\xc0\xc2\xc4\xd4\xc9\xc8\xcb\xca\xcf\xce\u0178\xc7\xd9\xdb\xdc\xc6\u0152\xf6\xdf\xd6\u1e9e\xec\xed\xf2\xfa\xcc\xcd\xd2\xda\xe1\xf1\xc1\xd1]/;function h4(n,o,e="mord",i){void 0!==o&&(jc[n]={definitionType:"symbol",type:e,variant:i,codepoint:o},ax[o]||(ax[o]=n),Pu[n]||(Pu[n]=o))}function Ka(n,o,e){if("string"!=typeof n)for(let[i,a,r,s]of n)h4(i,a,r??o,s??e);else for(let i=0;i<n.length;i++){let a=n.charAt(i);h4(a,a.codePointAt(0))}}function L5(n,o){for(let e=n;e<=o;e++)h4(String.fromCodePoint(e),e)}function sx(n,o){if(void 0===o)return"";if("math"===n&&ax[o])return ax[o];if("text"===n){let e=Object.keys(Pu).find(i=>Pu[i]===o);if(!e){let i=o.toString(16);e="^".repeat(i.length)+i}return e}return String.fromCodePoint(o)}var ux,p4={119893:8462,119965:8492,119968:8496,119969:8497,119971:8459,119972:8464,119975:8466,119976:8499,119981:8475,119994:8495,119996:8458,120004:8500,120070:8493,120075:8460,120076:8465,120085:8476,120093:8488,120122:8450,120127:8461,120133:8469,120135:8473,120136:8474,120137:8477,120145:8484},P5=[{start:119808,len:26,offset:65,style:"bold"},{start:119834,len:26,offset:97,style:"bold"},{start:119860,len:26,offset:65,style:"italic"},{start:119886,len:26,offset:97,style:"italic"},{start:119912,len:26,offset:65,style:"bolditalic"},{start:119938,len:26,offset:97,style:"bolditalic"},{start:119964,len:26,offset:65,variant:"script"},{start:119990,len:26,offset:97,variant:"script"},{start:120016,len:26,offset:65,variant:"script",style:"bold"},{start:120042,len:26,offset:97,variant:"script",style:"bold"},{start:120068,len:26,offset:65,variant:"fraktur"},{start:120094,len:26,offset:97,variant:"fraktur"},{start:120172,len:26,offset:65,variant:"fraktur",style:"bold"},{start:120198,len:26,offset:97,variant:"fraktur",style:"bold"},{start:120120,len:26,offset:65,variant:"double-struck"},{start:120146,len:26,offset:97,variant:"double-struck"},{start:120224,len:26,offset:65,variant:"sans-serif"},{start:120250,len:26,offset:97,variant:"sans-serif"},{start:120276,len:26,offset:65,variant:"sans-serif",style:"bold"},{start:120302,len:26,offset:97,variant:"sans-serif",style:"bold"},{start:120328,len:26,offset:65,variant:"sans-serif",style:"italic"},{start:120354,len:26,offset:97,variant:"sans-serif",style:"italic"},{start:120380,len:26,offset:65,variant:"sans-serif",style:"bolditalic"},{start:120406,len:26,offset:97,variant:"sans-serif",style:"bolditalic"},{start:120432,len:26,offset:65,variant:"monospace"},{start:120458,len:26,offset:97,variant:"monospace"},{start:120488,len:25,offset:913,style:"bold"},{start:120514,len:25,offset:945,style:"bold"},{start:120546,len:25,offset:913,style:"italic"},{start:120572,len:25,offset:945,style:"italic"},{start:120604,len:25,offset:913,style:"bolditalic"},{start:120630,len:25,offset:945,style:"bolditalic"},{start:120662,len:25,offset:913,variant:"sans-serif",style:"bold"},{start:120688,len:25,offset:945,variant:"sans-serif",style:"bold"},{start:120720,len:25,offset:913,variant:"sans-serif",style:"bolditalic"},{start:120746,len:25,offset:945,variant:"sans-serif",style:"bolditalic"},{start:120782,len:10,offset:48,variant:"main",style:"bold"},{start:120792,len:10,offset:48,variant:"double-struck"},{start:120803,len:10,offset:48,variant:"sans-serif"},{start:120812,len:10,offset:48,variant:"sans-serif",style:"bold"},{start:120822,len:10,offset:48,variant:"monospace"}];function N5(n){let o="auto",e=n.match(/:([^=]+)/);return e&&(o=e[1].trim()),o}function lx(n){if(!n)return[];let o=[],e=n.split("]");if(e[0].startsWith("[")){o.push({isOptional:!0,type:N5(e[0].slice(1))});for(let i=1;i<=e.length;i++)o.push(...lx(e[i]))}else if(e=n.split("}"),e[0].startsWith("{")){o.push({isOptional:!1,type:N5(e[0].slice(1))});for(let i=1;i<=e.length;i++)o.push(...lx(e[i]))}return o}function Z5(n){if(!n)return"";let o="",e=!0;for(let i of n)"string"==typeof i.value?o+=i.value:e=!1;return e?o:""}function cx(n,o,e,i=!1){"string"==typeof n&&(n=[n]);let r={tabular:i,params:lx(o),createAtom:e};for(let s of n)m4[s]=r}function Fc(n,o,e){cx(n,o,e,!0)}function Te(n,o,e){var i,a;e||(e={});let r={definitionType:"function",params:lx(o),ifMode:e.ifMode,isFunction:null!=(i=e.isFunction)&&i,applyMode:e.applyMode,infix:null!=(a=e.infix)&&a,createAtom:e.createAtom,applyStyle:e.applyStyle};if("string"==typeof n)qc["\\"+n]=r;else for(let s of n)qc["\\"+s]=r}function _4(n){return ux||(ux=f4(wJ)),n?f4(Ee(Ee({},ux),n)):ux}function D5(n,o){var e,i,a,r;if("string"==typeof n){let s=0,l=n;return/(^|[^\\])#1/.test(l)&&(s=1),/(^|[^\\])#2/.test(l)&&(s=2),/(^|[^\\])#3/.test(l)&&(s=3),/(^|[^\\])#4/.test(l)&&(s=4),/(^|[^\\])#5/.test(l)&&(s=5),/(^|[^\\])#6/.test(l)&&(s=6),/(^|[^\\])#7/.test(l)&&(s=7),/(^|[^\\])#8/.test(l)&&(s=8),/(^|[^\\])#9/.test(l)&&(s=9),{expand:null==(e=o?.expand)||e,captureSelection:null==(i=o?.captureSelection)||i,args:s,def:l}}return Ee({expand:null==(a=o?.expand)||a,captureSelection:null==(r=o?.captureSelection)||r,args:0},n)}function f4(n){if(!n)return{};let o={};for(let e of Object.keys(n)){let i=n[e];if(null==i)delete o[e];else if("object"==typeof i&&"package"in i)for(let a of Object.keys(i.package))o[a]=D5(i.package[a],{expand:i.expand,captureSelection:i.captureSelection});else o[e]=D5(i)}return o}var Rt=[0,.69444,0,0],cn=[0,.61111,0,0],Nn=[.25,.75,0,0],jn=[0,.44444,0,0],Rn=[0,.68611,0,0],Xn=[.19444,.69444,0,0],ai=[0,.68333,0,0],ci=[0,.68889,0,0],Ai=[0,.69141,0,0],wi=[0,0,0,0],qo=[0,.64444,0,0],Aa=[0,.69224,0,0],Sa=[.19444,.44444,0,0],lr=[.65002,1.15,0,0],kr=[0,.55556,0,0],Br=[.35001,.85,0,0],zr=[1.25003,1.75,0,0],Jr=[.95003,1.45,0,0],ms=[0,.75,0,0],hs=[0,.47534,0,0],ml=[.25001,.75,0,0],hl=[.55001,1.05,0,0],g4=[.16667,.68889,0,0],pl=[.08167,.58167,0,0],MJ={"AMS-Regular":{32:wi,65:ci,66:ci,67:ci,68:ci,69:ci,70:ci,71:ci,72:ci,73:ci,74:g4,75:ci,76:ci,77:ci,78:ci,79:g4,80:ci,81:g4,82:ci,83:ci,84:ci,85:ci,86:ci,87:ci,88:ci,89:ci,90:ci,107:ci,160:wi,165:[0,.675,.025,0],174:[.15559,.69224,0,0],240:ci,295:ci,710:[0,.825,0,0],732:[0,.9,0,0],770:[0,.825,0,0],771:[0,.9,0,0],989:pl,1008:[0,.43056,.04028,0],8245:[0,.54986,0,0],8463:ci,8487:ci,8498:ci,8502:ci,8503:ci,8504:ci,8513:ci,8592:[-.03598,.46402,0,0],8594:[-.03598,.46402,0,0],8602:[-.13313,.36687,0,0],8603:[-.13313,.36687,0,0],8606:[.01354,.52239,0,0],8608:[.01354,.52239,0,0],8610:[.01354,.52239,0,0],8611:[.01354,.52239,0,0],8619:[0,.54986,0,0],8620:[0,.54986,0,0],8621:[-.13313,.37788,0,0],8622:[-.13313,.36687,0,0],8624:Aa,8625:Aa,8630:[0,.43056,0,0],8631:[0,.43056,0,0],8634:[.08198,.58198,0,0],8635:[.08198,.58198,0,0],8638:[.19444,.69224,0,0],8639:[.19444,.69224,0,0],8642:[.19444,.69224,0,0],8643:[.19444,.69224,0,0],8644:[.1808,.675,0,0],8646:[.1808,.675,0,0],8647:[.1808,.675,0,0],8648:[.19444,.69224,0,0],8649:[.1808,.675,0,0],8650:[.19444,.69224,0,0],8651:[.01354,.52239,0,0],8652:[.01354,.52239,0,0],8653:[-.13313,.36687,0,0],8654:[-.13313,.36687,0,0],8655:[-.13313,.36687,0,0],8666:[.13667,.63667,0,0],8667:[.13667,.63667,0,0],8669:[-.13313,.37788,0,0],8672:[-.064,.437,0,0],8674:[-.064,.437,0,0],8705:[0,.825,0,0],8708:ci,8709:pl,8717:[0,.43056,0,0],8722:[-.03598,.46402,0,0],8724:[.08198,.69224,0,0],8726:pl,8733:Aa,8736:Aa,8737:Aa,8738:[.03517,.52239,0,0],8739:pl,8740:[.25142,.74111,0,0],8741:pl,8742:[.25142,.74111,0,0],8756:Aa,8757:Aa,8764:[-.13313,.36687,0,0],8765:[-.13313,.37788,0,0],8769:[-.13313,.36687,0,0],8770:[-.03625,.46375,0,0],8774:[.30274,.79383,0,0],8776:[-.01688,.48312,0,0],8778:pl,8782:[.06062,.54986,0,0],8783:[.06062,.54986,0,0],8785:[.08198,.58198,0,0],8786:[.08198,.58198,0,0],8787:[.08198,.58198,0,0],8790:Aa,8791:[.22958,.72958,0,0],8796:[.08198,.91667,0,0],8806:[.25583,.75583,0,0],8807:[.25583,.75583,0,0],8808:[.25142,.75726,0,0],8809:[.25142,.75726,0,0],8812:[.25583,.75583,0,0],8814:[.20576,.70576,0,0],8815:[.20576,.70576,0,0],8816:[.30274,.79383,0,0],8817:[.30274,.79383,0,0],8818:[.22958,.72958,0,0],8819:[.22958,.72958,0,0],8822:[.1808,.675,0,0],8823:[.1808,.675,0,0],8828:[.13667,.63667,0,0],8829:[.13667,.63667,0,0],8830:[.22958,.72958,0,0],8831:[.22958,.72958,0,0],8832:[.20576,.70576,0,0],8833:[.20576,.70576,0,0],8840:[.30274,.79383,0,0],8841:[.30274,.79383,0,0],8842:[.13597,.63597,0,0],8843:[.13597,.63597,0,0],8847:[.03517,.54986,0,0],8848:[.03517,.54986,0,0],8858:[.08198,.58198,0,0],8859:[.08198,.58198,0,0],8861:[.08198,.58198,0,0],8862:[0,.675,0,0],8863:[0,.675,0,0],8864:[0,.675,0,0],8865:[0,.675,0,0],8872:Aa,8873:Aa,8874:Aa,8876:ci,8877:ci,8878:ci,8879:ci,8882:[.03517,.54986,0,0],8883:[.03517,.54986,0,0],8884:[.13667,.63667,0,0],8885:[.13667,.63667,0,0],8888:[0,.54986,0,0],8890:[.19444,.43056,0,0],8891:[.19444,.69224,0,0],8892:[.19444,.69224,0,0],8901:[0,.54986,0,0],8903:pl,8905:pl,8906:pl,8907:Aa,8908:Aa,8909:[-.03598,.46402,0,0],8910:[0,.54986,0,0],8911:[0,.54986,0,0],8912:[.03517,.54986,0,0],8913:[.03517,.54986,0,0],8914:[0,.54986,0,0],8915:[0,.54986,0,0],8916:Aa,8918:[.0391,.5391,0,0],8919:[.0391,.5391,0,0],8920:[.03517,.54986,0,0],8921:[.03517,.54986,0,0],8922:[.38569,.88569,0,0],8923:[.38569,.88569,0,0],8926:[.13667,.63667,0,0],8927:[.13667,.63667,0,0],8928:[.30274,.79383,0,0],8929:[.30274,.79383,0,0],8934:[.23222,.74111,0,0],8935:[.23222,.74111,0,0],8936:[.23222,.74111,0,0],8937:[.23222,.74111,0,0],8938:[.20576,.70576,0,0],8939:[.20576,.70576,0,0],8940:[.30274,.79383,0,0],8941:[.30274,.79383,0,0],8994:[.19444,.69224,0,0],8995:[.19444,.69224,0,0],9416:[.15559,.69224,0,0],9484:Aa,9488:Aa,9492:[0,.37788,0,0],9496:[0,.37788,0,0],9585:[.19444,.68889,0,0],9586:[.19444,.74111,0,0],9632:[0,.675,0,0],9633:[0,.675,0,0],9650:[0,.54986,0,0],9651:[0,.54986,0,0],9654:[.03517,.54986,0,0],9660:[0,.54986,0,0],9661:[0,.54986,0,0],9664:[.03517,.54986,0,0],9674:[.11111,.69224,0,0],9733:[.19444,.69224,0,0],10003:Aa,10016:Aa,10731:[.11111,.69224,0,0],10846:[.19444,.75583,0,0],10877:[.13667,.63667,0,0],10878:[.13667,.63667,0,0],10885:[.25583,.75583,0,0],10886:[.25583,.75583,0,0],10887:[.13597,.63597,0,0],10888:[.13597,.63597,0,0],10889:[.26167,.75726,0,0],10890:[.26167,.75726,0,0],10891:[.48256,.98256,0,0],10892:[.48256,.98256,0,0],10901:[.13667,.63667,0,0],10902:[.13667,.63667,0,0],10933:[.25142,.75726,0,0],10934:[.25142,.75726,0,0],10935:[.26167,.75726,0,0],10936:[.26167,.75726,0,0],10937:[.26167,.75726,0,0],10938:[.26167,.75726,0,0],10949:[.25583,.75583,0,0],10950:[.25583,.75583,0,0],10955:[.28481,.79383,0,0],10956:[.28481,.79383,0,0],57350:pl,57351:pl,57352:pl,57353:[0,.43056,.04028,0],57356:[.25142,.75726,0,0],57357:[.25142,.75726,0,0],57358:[.41951,.91951,0,0],57359:[.30274,.79383,0,0],57360:[.30274,.79383,0,0],57361:[.41951,.91951,0,0],57366:[.25142,.75726,0,0],57367:[.25142,.75726,0,0],57368:[.25142,.75726,0,0],57369:[.25142,.75726,0,0],57370:[.13597,.63597,0,0],57371:[.13597,.63597,0,0]},"Caligraphic-Regular":{32:wi,65:[0,.68333,0,.19445],66:[0,.68333,.03041,.13889],67:[0,.68333,.05834,.13889],68:[0,.68333,.02778,.08334],69:[0,.68333,.08944,.11111],70:[0,.68333,.09931,.11111],71:[.09722,.68333,.0593,.11111],72:[0,.68333,.00965,.11111],73:[0,.68333,.07382,0],74:[.09722,.68333,.18472,.16667],75:[0,.68333,.01445,.05556],76:[0,.68333,0,.13889],77:[0,.68333,0,.13889],78:[0,.68333,.14736,.08334],79:[0,.68333,.02778,.11111],80:[0,.68333,.08222,.08334],81:[.09722,.68333,0,.11111],82:[0,.68333,0,.08334],83:[0,.68333,.075,.13889],84:[0,.68333,.25417,0],85:[0,.68333,.09931,.08334],86:[0,.68333,.08222,0],87:[0,.68333,.08222,.08334],88:[0,.68333,.14643,.13889],89:[.09722,.68333,.08222,.08334],90:[0,.68333,.07944,.13889],160:wi},"Fraktur-Regular":{32:wi,33:Ai,34:Ai,38:Ai,39:Ai,40:[.24982,.74947,0,0],41:[.24982,.74947,0,0],42:[0,.62119,0,0],43:[.08319,.58283,0,0],44:[0,.10803,0,0],45:[.08319,.58283,0,0],46:[0,.10803,0,0],47:[.24982,.74947,0,0],48:hs,49:hs,50:hs,51:[.18906,.47534,0,0],52:[.18906,.47534,0,0],53:[.18906,.47534,0,0],54:Ai,55:[.18906,.47534,0,0],56:Ai,57:[.18906,.47534,0,0],58:hs,59:[.12604,.47534,0,0],61:[-.13099,.36866,0,0],63:Ai,65:Ai,66:Ai,67:Ai,68:Ai,69:Ai,70:[.12604,.69141,0,0],71:Ai,72:[.06302,.69141,0,0],73:Ai,74:[.12604,.69141,0,0],75:Ai,76:Ai,77:Ai,78:Ai,79:Ai,80:[.18906,.69141,0,0],81:[.03781,.69141,0,0],82:Ai,83:Ai,84:Ai,85:Ai,86:Ai,87:Ai,88:Ai,89:[.18906,.69141,0,0],90:[.12604,.69141,0,0],91:[.24982,.74947,0,0],93:[.24982,.74947,0,0],94:Ai,97:hs,98:Ai,99:hs,100:[0,.62119,0,0],101:hs,102:[.18906,.69141,0,0],103:[.18906,.47534,0,0],104:[.18906,.69141,0,0],105:Ai,106:Ai,107:Ai,108:Ai,109:hs,110:hs,111:hs,112:[.18906,.52396,0,0],113:[.18906,.47534,0,0],114:hs,115:hs,116:[0,.62119,0,0],117:hs,118:[0,.52396,0,0],119:[0,.52396,0,0],120:[.18906,.47534,0,0],121:[.18906,.47534,0,0],122:[.18906,.47534,0,0],160:wi,8216:Ai,8217:Ai,58112:[0,.62119,0,0],58113:[0,.62119,0,0],58114:[.18906,.69141,0,0],58115:[.18906,.69141,0,0],58116:[.18906,.47534,0,0],58117:Ai,58118:[0,.62119,0,0],58119:hs},"Main-Bold":{32:wi,33:Rt,34:Rt,35:Xn,36:[.05556,.75,0,0],37:[.05556,.75,0,0],38:Rt,39:Rt,40:Nn,41:Nn,42:ms,43:[.13333,.63333,0,0],44:[.19444,.15556,0,0],45:jn,46:[0,.15556,0,0],47:Nn,48:qo,49:qo,50:qo,51:qo,52:qo,53:qo,54:qo,55:qo,56:qo,57:qo,58:jn,59:Sa,60:[.08556,.58556,0,0],61:[-.10889,.39111,0,0],62:[.08556,.58556,0,0],63:Rt,64:Rt,65:Rn,66:Rn,67:Rn,68:Rn,69:Rn,70:Rn,71:Rn,72:Rn,73:Rn,74:Rn,75:Rn,76:Rn,77:Rn,78:Rn,79:Rn,80:Rn,81:[.19444,.68611,0,0],82:Rn,83:Rn,84:Rn,85:Rn,86:[0,.68611,.01597,0],87:[0,.68611,.01597,0],88:Rn,89:[0,.68611,.02875,0],90:Rn,91:Nn,92:Nn,93:Nn,94:Rt,95:[.31,.13444,.03194,0],97:jn,98:Rt,99:jn,100:Rt,101:jn,102:[0,.69444,.10903,0],103:[.19444,.44444,.01597,0],104:Rt,105:Rt,106:Xn,107:Rt,108:Rt,109:jn,110:jn,111:jn,112:Sa,113:Sa,114:jn,115:jn,116:[0,.63492,0,0],117:jn,118:[0,.44444,.01597,0],119:[0,.44444,.01597,0],120:jn,121:[.19444,.44444,.01597,0],122:jn,123:Nn,124:Nn,125:Nn,126:[.35,.34444,0,0],160:wi,163:Rt,168:Rt,172:jn,176:Rt,177:[.13333,.63333,0,0],184:[.17014,0,0,0],198:Rn,215:[.13333,.63333,0,0],216:[.04861,.73472,0,0],223:Rt,230:jn,247:[.13333,.63333,0,0],248:[.09722,.54167,0,0],305:jn,338:Rn,339:jn,567:Sa,710:Rt,711:[0,.63194,0,0],713:[0,.59611,0,0],714:Rt,715:Rt,728:Rt,729:Rt,730:Rt,732:Rt,733:Rt,915:Rn,916:Rn,920:Rn,923:Rn,926:Rn,928:Rn,931:Rn,933:Rn,934:Rn,936:Rn,937:Rn,8211:[0,.44444,.03194,0],8212:[0,.44444,.03194,0],8216:Rt,8217:Rt,8220:Rt,8221:Rt,8224:Xn,8225:Xn,8242:kr,8407:[0,.72444,.15486,0],8463:Rt,8465:Rt,8467:Rt,8472:Sa,8476:Rt,8501:Rt,8592:[-.10889,.39111,0,0],8593:Xn,8594:[-.10889,.39111,0,0],8595:Xn,8596:[-.10889,.39111,0,0],8597:Nn,8598:Xn,8599:Xn,8600:Xn,8601:Xn,8636:[-.10889,.39111,0,0],8637:[-.10889,.39111,0,0],8640:[-.10889,.39111,0,0],8641:[-.10889,.39111,0,0],8656:[-.10889,.39111,0,0],8657:Xn,8658:[-.10889,.39111,0,0],8659:Xn,8660:[-.10889,.39111,0,0],8661:Nn,8704:Rt,8706:[0,.69444,.06389,0],8707:Rt,8709:[.05556,.75,0,0],8711:Rn,8712:[.08556,.58556,0,0],8715:[.08556,.58556,0,0],8722:[.13333,.63333,0,0],8723:[.13333,.63333,0,0],8725:Nn,8726:Nn,8727:[-.02778,.47222,0,0],8728:[-.02639,.47361,0,0],8729:[-.02639,.47361,0,0],8730:[.18,.82,0,0],8733:jn,8734:jn,8736:Aa,8739:Nn,8741:Nn,8743:kr,8744:kr,8745:kr,8746:kr,8747:[.19444,.69444,.12778,0],8764:[-.10889,.39111,0,0],8768:Xn,8771:[.00222,.50222,0,0],8776:[.02444,.52444,0,0],8781:[.00222,.50222,0,0],8801:[.00222,.50222,0,0],8804:[.19667,.69667,0,0],8805:[.19667,.69667,0,0],8810:[.08556,.58556,0,0],8811:[.08556,.58556,0,0],8826:[.08556,.58556,0,0],8827:[.08556,.58556,0,0],8834:[.08556,.58556,0,0],8835:[.08556,.58556,0,0],8838:[.19667,.69667,0,0],8839:[.19667,.69667,0,0],8846:kr,8849:[.19667,.69667,0,0],8850:[.19667,.69667,0,0],8851:kr,8852:kr,8853:[.13333,.63333,0,0],8854:[.13333,.63333,0,0],8855:[.13333,.63333,0,0],8856:[.13333,.63333,0,0],8857:[.13333,.63333,0,0],8866:Rt,8867:Rt,8868:Rt,8869:Rt,8900:[-.02639,.47361,0,0],8901:[-.02639,.47361,0,0],8902:[-.02778,.47222,0,0],8968:Nn,8969:Nn,8970:Nn,8971:Nn,8994:[-.13889,.36111,0,0],8995:[-.13889,.36111,0,0],9651:Xn,9657:[-.02778,.47222,0,0],9661:Xn,9667:[-.02778,.47222,0,0],9711:Xn,9824:[.12963,.69444,0,0],9825:[.12963,.69444,0,0],9826:[.12963,.69444,0,0],9827:[.12963,.69444,0,0],9837:ms,9838:Xn,9839:Xn,10216:Nn,10217:Nn,10815:Rn,10927:[.19667,.69667,0,0],10928:[.19667,.69667,0,0],57376:Xn},"Main-BoldItalic":{32:wi,33:[0,.69444,.11417,0],34:[0,.69444,.07939,0],35:[.19444,.69444,.06833,0],37:[.05556,.75,.12861,0],38:[0,.69444,.08528,0],39:[0,.69444,.12945,0],40:[.25,.75,.15806,0],41:[.25,.75,.03306,0],42:[0,.75,.14333,0],43:[.10333,.60333,.03306,0],44:[.19444,.14722,0,0],45:[0,.44444,.02611,0],46:[0,.14722,0,0],47:[.25,.75,.15806,0],48:[0,.64444,.13167,0],49:[0,.64444,.13167,0],50:[0,.64444,.13167,0],51:[0,.64444,.13167,0],52:[.19444,.64444,.13167,0],53:[0,.64444,.13167,0],54:[0,.64444,.13167,0],55:[.19444,.64444,.13167,0],56:[0,.64444,.13167,0],57:[0,.64444,.13167,0],58:[0,.44444,.06695,0],59:[.19444,.44444,.06695,0],61:[-.10889,.39111,.06833,0],63:[0,.69444,.11472,0],64:[0,.69444,.09208,0],65:Rn,66:[0,.68611,.0992,0],67:[0,.68611,.14208,0],68:[0,.68611,.09062,0],69:[0,.68611,.11431,0],70:[0,.68611,.12903,0],71:[0,.68611,.07347,0],72:[0,.68611,.17208,0],73:[0,.68611,.15681,0],74:[0,.68611,.145,0],75:[0,.68611,.14208,0],76:Rn,77:[0,.68611,.17208,0],78:[0,.68611,.17208,0],79:[0,.68611,.09062,0],80:[0,.68611,.0992,0],81:[.19444,.68611,.09062,0],82:[0,.68611,.02559,0],83:[0,.68611,.11264,0],84:[0,.68611,.12903,0],85:[0,.68611,.17208,0],86:[0,.68611,.18625,0],87:[0,.68611,.18625,0],88:[0,.68611,.15681,0],89:[0,.68611,.19803,0],90:[0,.68611,.14208,0],91:[.25,.75,.1875,0],93:[.25,.75,.09972,0],94:[0,.69444,.06709,0],95:[.31,.13444,.09811,0],97:[0,.44444,.09426,0],98:[0,.69444,.07861,0],99:[0,.44444,.05222,0],100:[0,.69444,.10861,0],101:[0,.44444,.085,0],102:[.19444,.69444,.21778,0],103:[.19444,.44444,.105,0],104:[0,.69444,.09426,0],105:[0,.69326,.11387,0],106:[.19444,.69326,.1672,0],107:[0,.69444,.11111,0],108:[0,.69444,.10861,0],109:[0,.44444,.09426,0],110:[0,.44444,.09426,0],111:[0,.44444,.07861,0],112:[.19444,.44444,.07861,0],113:[.19444,.44444,.105,0],114:[0,.44444,.11111,0],115:[0,.44444,.08167,0],116:[0,.63492,.09639,0],117:[0,.44444,.09426,0],118:[0,.44444,.11111,0],119:[0,.44444,.11111,0],120:[0,.44444,.12583,0],121:[.19444,.44444,.105,0],122:[0,.44444,.13889,0],126:[.35,.34444,.11472,0],160:wi,168:[0,.69444,.11473,0],176:Rt,184:[.17014,0,0,0],198:[0,.68611,.11431,0],216:[.04861,.73472,.09062,0],223:[.19444,.69444,.09736,0],230:[0,.44444,.085,0],248:[.09722,.54167,.09458,0],305:[0,.44444,.09426,0],338:[0,.68611,.11431,0],339:[0,.44444,.085,0],567:[.19444,.44444,.04611,0],710:[0,.69444,.06709,0],711:[0,.63194,.08271,0],713:[0,.59444,.10444,0],714:[0,.69444,.08528,0],715:Rt,728:[0,.69444,.10333,0],729:[0,.69444,.12945,0],730:Rt,732:[0,.69444,.11472,0],733:[0,.69444,.11472,0],915:[0,.68611,.12903,0],916:Rn,920:[0,.68611,.09062,0],923:Rn,926:[0,.68611,.15092,0],928:[0,.68611,.17208,0],931:[0,.68611,.11431,0],933:[0,.68611,.10778,0],934:[0,.68611,.05632,0],936:[0,.68611,.10778,0],937:[0,.68611,.0992,0],8211:[0,.44444,.09811,0],8212:[0,.44444,.09811,0],8216:[0,.69444,.12945,0],8217:[0,.69444,.12945,0],8220:[0,.69444,.16772,0],8221:[0,.69444,.07939,0]},"Main-Italic":{32:wi,33:[0,.69444,.12417,0],34:[0,.69444,.06961,0],35:[.19444,.69444,.06616,0],37:[.05556,.75,.13639,0],38:[0,.69444,.09694,0],39:[0,.69444,.12417,0],40:[.25,.75,.16194,0],41:[.25,.75,.03694,0],42:[0,.75,.14917,0],43:[.05667,.56167,.03694,0],44:[.19444,.10556,0,0],45:[0,.43056,.02826,0],46:[0,.10556,0,0],47:[.25,.75,.16194,0],48:[0,.64444,.13556,0],49:[0,.64444,.13556,0],50:[0,.64444,.13556,0],51:[0,.64444,.13556,0],52:[.19444,.64444,.13556,0],53:[0,.64444,.13556,0],54:[0,.64444,.13556,0],55:[.19444,.64444,.13556,0],56:[0,.64444,.13556,0],57:[0,.64444,.13556,0],58:[0,.43056,.0582,0],59:[.19444,.43056,.0582,0],61:[-.13313,.36687,.06616,0],63:[0,.69444,.1225,0],64:[0,.69444,.09597,0],65:ai,66:[0,.68333,.10257,0],67:[0,.68333,.14528,0],68:[0,.68333,.09403,0],69:[0,.68333,.12028,0],70:[0,.68333,.13305,0],71:[0,.68333,.08722,0],72:[0,.68333,.16389,0],73:[0,.68333,.15806,0],74:[0,.68333,.14028,0],75:[0,.68333,.14528,0],76:ai,77:[0,.68333,.16389,0],78:[0,.68333,.16389,0],79:[0,.68333,.09403,0],80:[0,.68333,.10257,0],81:[.19444,.68333,.09403,0],82:[0,.68333,.03868,0],83:[0,.68333,.11972,0],84:[0,.68333,.13305,0],85:[0,.68333,.16389,0],86:[0,.68333,.18361,0],87:[0,.68333,.18361,0],88:[0,.68333,.15806,0],89:[0,.68333,.19383,0],90:[0,.68333,.14528,0],91:[.25,.75,.1875,0],93:[.25,.75,.10528,0],94:[0,.69444,.06646,0],95:[.31,.12056,.09208,0],97:[0,.43056,.07671,0],98:[0,.69444,.06312,0],99:[0,.43056,.05653,0],100:[0,.69444,.10333,0],101:[0,.43056,.07514,0],102:[.19444,.69444,.21194,0],103:[.19444,.43056,.08847,0],104:[0,.69444,.07671,0],105:[0,.65536,.1019,0],106:[.19444,.65536,.14467,0],107:[0,.69444,.10764,0],108:[0,.69444,.10333,0],109:[0,.43056,.07671,0],110:[0,.43056,.07671,0],111:[0,.43056,.06312,0],112:[.19444,.43056,.06312,0],113:[.19444,.43056,.08847,0],114:[0,.43056,.10764,0],115:[0,.43056,.08208,0],116:[0,.61508,.09486,0],117:[0,.43056,.07671,0],118:[0,.43056,.10764,0],119:[0,.43056,.10764,0],120:[0,.43056,.12042,0],121:[.19444,.43056,.08847,0],122:[0,.43056,.12292,0],126:[.35,.31786,.11585,0],160:wi,168:[0,.66786,.10474,0],176:Rt,184:[.17014,0,0,0],198:[0,.68333,.12028,0],216:[.04861,.73194,.09403,0],223:[.19444,.69444,.10514,0],230:[0,.43056,.07514,0],248:[.09722,.52778,.09194,0],338:[0,.68333,.12028,0],339:[0,.43056,.07514,0],710:[0,.69444,.06646,0],711:[0,.62847,.08295,0],713:[0,.56167,.10333,0],714:[0,.69444,.09694,0],715:Rt,728:[0,.69444,.10806,0],729:[0,.66786,.11752,0],730:Rt,732:[0,.66786,.11585,0],733:[0,.69444,.1225,0],915:[0,.68333,.13305,0],916:ai,920:[0,.68333,.09403,0],923:ai,926:[0,.68333,.15294,0],928:[0,.68333,.16389,0],931:[0,.68333,.12028,0],933:[0,.68333,.11111,0],934:[0,.68333,.05986,0],936:[0,.68333,.11111,0],937:[0,.68333,.10257,0],8211:[0,.43056,.09208,0],8212:[0,.43056,.09208,0],8216:[0,.69444,.12417,0],8217:[0,.69444,.12417,0],8220:[0,.69444,.1685,0],8221:[0,.69444,.06961,0],8463:ci},"Main-Regular":{32:wi,33:Rt,34:Rt,35:Xn,36:[.05556,.75,0,0],37:[.05556,.75,0,0],38:Rt,39:Rt,40:Nn,41:Nn,42:ms,43:[.08333,.58333,0,0],44:[.19444,.10556,0,0],45:[0,.43056,0,0],46:[0,.10556,0,0],47:Nn,48:qo,49:qo,50:qo,51:qo,52:qo,53:qo,54:qo,55:qo,56:qo,57:qo,58:[0,.43056,0,0],59:[.19444,.43056,0,0],60:[.0391,.5391,0,0],61:[-.13313,.36687,0,0],62:[.0391,.5391,0,0],63:Rt,64:Rt,65:ai,66:ai,67:ai,68:ai,69:ai,70:ai,71:ai,72:ai,73:ai,74:ai,75:ai,76:ai,77:ai,78:ai,79:ai,80:ai,81:[.19444,.68333,0,0],82:ai,83:ai,84:ai,85:ai,86:[0,.68333,.01389,0],87:[0,.68333,.01389,0],88:ai,89:[0,.68333,.025,0],90:ai,91:Nn,92:Nn,93:Nn,94:Rt,95:[.31,.12056,.02778,0],97:[0,.43056,0,0],98:Rt,99:[0,.43056,0,0],100:Rt,101:[0,.43056,0,0],102:[0,.69444,.07778,0],103:[.19444,.43056,.01389,0],104:Rt,105:[0,.66786,0,0],106:[.19444,.66786,0,0],107:Rt,108:Rt,109:[0,.43056,0,0],110:[0,.43056,0,0],111:[0,.43056,0,0],112:[.19444,.43056,0,0],113:[.19444,.43056,0,0],114:[0,.43056,0,0],115:[0,.43056,0,0],116:[0,.61508,0,0],117:[0,.43056,0,0],118:[0,.43056,.01389,0],119:[0,.43056,.01389,0],120:[0,.43056,0,0],121:[.19444,.43056,.01389,0],122:[0,.43056,0,0],123:Nn,124:Nn,125:Nn,126:[.35,.31786,0,0],160:wi,163:Rt,167:Xn,168:[0,.66786,0,0],172:[0,.43056,0,0],176:Rt,177:[.08333,.58333,0,0],182:Xn,184:[.17014,0,0,0],198:ai,215:[.08333,.58333,0,0],216:[.04861,.73194,0,0],223:Rt,230:[0,.43056,0,0],247:[.08333,.58333,0,0],248:[.09722,.52778,0,0],305:[0,.43056,0,0],338:ai,339:[0,.43056,0,0],567:[.19444,.43056,0,0],710:Rt,711:[0,.62847,0,0],713:[0,.56778,0,0],714:Rt,715:Rt,728:Rt,729:[0,.66786,0,0],730:Rt,732:[0,.66786,0,0],733:Rt,915:ai,916:ai,920:ai,923:ai,926:ai,928:ai,931:ai,933:ai,934:ai,936:ai,937:ai,8211:[0,.43056,.02778,0],8212:[0,.43056,.02778,0],8216:Rt,8217:Rt,8220:Rt,8221:Rt,8224:Xn,8225:Xn,8230:[0,.12,0,0],8242:kr,8407:[0,.71444,.15382,0],8463:ci,8465:Rt,8467:[0,.69444,0,.11111],8472:[.19444,.43056,0,.11111],8476:Rt,8501:Rt,8592:[-.13313,.36687,0,0],8593:Xn,8594:[-.13313,.36687,0,0],8595:Xn,8596:[-.13313,.36687,0,0],8597:Nn,8598:Xn,8599:Xn,8600:Xn,8601:Xn,8614:[.011,.511,0,0],8617:[.011,.511,0,0],8618:[.011,.511,0,0],8636:[-.13313,.36687,0,0],8637:[-.13313,.36687,0,0],8640:[-.13313,.36687,0,0],8641:[-.13313,.36687,0,0],8652:[.011,.671,0,0],8656:[-.13313,.36687,0,0],8657:Xn,8658:[-.13313,.36687,0,0],8659:Xn,8660:[-.13313,.36687,0,0],8661:Nn,8704:Rt,8706:[0,.69444,.05556,.08334],8707:Rt,8709:[.05556,.75,0,0],8711:ai,8712:[.0391,.5391,0,0],8715:[.0391,.5391,0,0],8722:[.08333,.58333,0,0],8723:[.08333,.58333,0,0],8725:Nn,8726:Nn,8727:[-.03472,.46528,0,0],8728:[-.05555,.44445,0,0],8729:[-.05555,.44445,0,0],8730:[.2,.8,0,0],8733:[0,.43056,0,0],8734:[0,.43056,0,0],8736:Aa,8739:Nn,8741:Nn,8743:kr,8744:kr,8745:kr,8746:kr,8747:[.19444,.69444,.11111,0],8764:[-.13313,.36687,0,0],8768:Xn,8771:[-.03625,.46375,0,0],8773:[-.022,.589,0,0],8776:[-.01688,.48312,0,0],8781:[-.03625,.46375,0,0],8784:[-.133,.67,0,0],8801:[-.03625,.46375,0,0],8804:[.13597,.63597,0,0],8805:[.13597,.63597,0,0],8810:[.0391,.5391,0,0],8811:[.0391,.5391,0,0],8826:[.0391,.5391,0,0],8827:[.0391,.5391,0,0],8834:[.0391,.5391,0,0],8835:[.0391,.5391,0,0],8838:[.13597,.63597,0,0],8839:[.13597,.63597,0,0],8846:kr,8849:[.13597,.63597,0,0],8850:[.13597,.63597,0,0],8851:kr,8852:kr,8853:[.08333,.58333,0,0],8854:[.08333,.58333,0,0],8855:[.08333,.58333,0,0],8856:[.08333,.58333,0,0],8857:[.08333,.58333,0,0],8866:Rt,8867:Rt,8868:Rt,8869:Rt,8872:[.249,.75,0,0],8900:[-.05555,.44445,0,0],8901:[-.05555,.44445,0,0],8902:[-.03472,.46528,0,0],8904:[.005,.505,0,0],8942:[.03,.9,0,0],8943:[-.19,.31,0,0],8945:[-.1,.82,0,0],8968:Nn,8969:Nn,8970:Nn,8971:Nn,8994:[-.14236,.35764,0,0],8995:[-.14236,.35764,0,0],9136:[.244,.744,0,0],9137:[.244,.744,0,0],9651:Xn,9657:[-.03472,.46528,0,0],9661:Xn,9667:[-.03472,.46528,0,0],9711:Xn,9824:[.12963,.69444,0,0],9825:[.12963,.69444,0,0],9826:[.12963,.69444,0,0],9827:[.12963,.69444,0,0],9837:ms,9838:Xn,9839:Xn,10216:Nn,10217:Nn,10222:[.244,.744,0,0],10223:[.244,.744,0,0],10229:[.011,.511,0,0],10230:[.011,.511,0,0],10231:[.011,.511,0,0],10232:[.024,.525,0,0],10233:[.024,.525,0,0],10234:[.024,.525,0,0],10236:[.011,.511,0,0],10815:ai,10927:[.13597,.63597,0,0],10928:[.13597,.63597,0,0],57376:Xn},"Math-BoldItalic":{32:wi,48:jn,49:jn,50:jn,51:Sa,52:Sa,53:Sa,54:qo,55:Sa,56:qo,57:Sa,65:Rn,66:[0,.68611,.04835,0],67:[0,.68611,.06979,0],68:[0,.68611,.03194,0],69:[0,.68611,.05451,0],70:[0,.68611,.15972,0],71:Rn,72:[0,.68611,.08229,0],73:[0,.68611,.07778,0],74:[0,.68611,.10069,0],75:[0,.68611,.06979,0],76:Rn,77:[0,.68611,.11424,0],78:[0,.68611,.11424,0],79:[0,.68611,.03194,0],80:[0,.68611,.15972,0],81:[.19444,.68611,0,0],82:[0,.68611,.00421,0],83:[0,.68611,.05382,0],84:[0,.68611,.15972,0],85:[0,.68611,.11424,0],86:[0,.68611,.25555,0],87:[0,.68611,.15972,0],88:[0,.68611,.07778,0],89:[0,.68611,.25555,0],90:[0,.68611,.06979,0],97:jn,98:Rt,99:jn,100:Rt,101:jn,102:[.19444,.69444,.11042,0],103:[.19444,.44444,.03704,0],104:Rt,105:[0,.69326,0,0],106:[.19444,.69326,.0622,0],107:[0,.69444,.01852,0],108:[0,.69444,.0088,0],109:jn,110:jn,111:jn,112:Sa,113:[.19444,.44444,.03704,0],114:[0,.44444,.03194,0],115:jn,116:[0,.63492,0,0],117:jn,118:[0,.44444,.03704,0],119:[0,.44444,.02778,0],120:jn,121:[.19444,.44444,.03704,0],122:[0,.44444,.04213,0],160:wi,915:[0,.68611,.15972,0],916:Rn,920:[0,.68611,.03194,0],923:Rn,926:[0,.68611,.07458,0],928:[0,.68611,.08229,0],931:[0,.68611,.05451,0],933:[0,.68611,.15972,0],934:Rn,936:[0,.68611,.11653,0],937:[0,.68611,.04835,0],945:jn,946:[.19444,.69444,.03403,0],947:[.19444,.44444,.06389,0],948:[0,.69444,.03819,0],949:jn,950:[.19444,.69444,.06215,0],951:[.19444,.44444,.03704,0],952:[0,.69444,.03194,0],953:jn,954:jn,955:Rt,956:Sa,957:[0,.44444,.06898,0],958:[.19444,.69444,.03021,0],959:jn,960:[0,.44444,.03704,0],961:Sa,962:[.09722,.44444,.07917,0],963:[0,.44444,.03704,0],964:[0,.44444,.13472,0],965:[0,.44444,.03704,0],966:Sa,967:Sa,968:[.19444,.69444,.03704,0],969:[0,.44444,.03704,0],977:Rt,981:Xn,982:[0,.44444,.03194,0],1009:Sa,1013:jn,57649:jn,57911:Sa},"Math-Italic":{32:wi,48:[0,.43056,0,0],49:[0,.43056,0,0],50:[0,.43056,0,0],51:[.19444,.43056,0,0],52:[.19444,.43056,0,0],53:[.19444,.43056,0,0],54:qo,55:[.19444,.43056,0,0],56:qo,57:[.19444,.43056,0,0],65:[0,.68333,0,.13889],66:[0,.68333,.05017,.08334],67:[0,.68333,.07153,.08334],68:[0,.68333,.02778,.05556],69:[0,.68333,.05764,.08334],70:[0,.68333,.13889,.08334],71:[0,.68333,0,.08334],72:[0,.68333,.08125,.05556],73:[0,.68333,.07847,.11111],74:[0,.68333,.09618,.16667],75:[0,.68333,.07153,.05556],76:[0,.68333,0,.02778],77:[0,.68333,.10903,.08334],78:[0,.68333,.10903,.08334],79:[0,.68333,.02778,.08334],80:[0,.68333,.13889,.08334],81:[.19444,.68333,0,.08334],82:[0,.68333,.00773,.08334],83:[0,.68333,.05764,.08334],84:[0,.68333,.13889,.08334],85:[0,.68333,.10903,.02778],86:[0,.68333,.22222,0],87:[0,.68333,.13889,0],88:[0,.68333,.07847,.08334],89:[0,.68333,.22222,0],90:[0,.68333,.07153,.08334],97:[0,.43056,0,0],98:Rt,99:[0,.43056,0,.05556],100:[0,.69444,0,.16667],101:[0,.43056,0,.05556],102:[.19444,.69444,.10764,.16667],103:[.19444,.43056,.03588,.02778],104:Rt,105:[0,.65952,0,0],106:[.19444,.65952,.05724,0],107:[0,.69444,.03148,0],108:[0,.69444,.01968,.08334],109:[0,.43056,0,0],110:[0,.43056,0,0],111:[0,.43056,0,.05556],112:[.19444,.43056,0,.08334],113:[.19444,.43056,.03588,.08334],114:[0,.43056,.02778,.05556],115:[0,.43056,0,.05556],116:[0,.61508,0,.08334],117:[0,.43056,0,.02778],118:[0,.43056,.03588,.02778],119:[0,.43056,.02691,.08334],120:[0,.43056,0,.02778],121:[.19444,.43056,.03588,.05556],122:[0,.43056,.04398,.05556],160:wi,915:[0,.68333,.13889,.08334],916:[0,.68333,0,.16667],920:[0,.68333,.02778,.08334],923:[0,.68333,0,.16667],926:[0,.68333,.07569,.08334],928:[0,.68333,.08125,.05556],931:[0,.68333,.05764,.08334],933:[0,.68333,.13889,.05556],934:[0,.68333,0,.08334],936:[0,.68333,.11,.05556],937:[0,.68333,.05017,.08334],945:[0,.43056,.0037,.02778],946:[.19444,.69444,.05278,.08334],947:[.19444,.43056,.05556,0],948:[0,.69444,.03785,.05556],949:[0,.43056,0,.08334],950:[.19444,.69444,.07378,.08334],951:[.19444,.43056,.03588,.05556],952:[0,.69444,.02778,.08334],953:[0,.43056,0,.05556],954:[0,.43056,0,0],955:Rt,956:[.19444,.43056,0,.02778],957:[0,.43056,.06366,.02778],958:[.19444,.69444,.04601,.11111],959:[0,.43056,0,.05556],960:[0,.43056,.03588,0],961:[.19444,.43056,0,.08334],962:[.09722,.43056,.07986,.08334],963:[0,.43056,.03588,0],964:[0,.43056,.1132,.02778],965:[0,.43056,.03588,.02778],966:[.19444,.43056,0,.08334],967:[.19444,.43056,0,.05556],968:[.19444,.69444,.03588,.11111],969:[0,.43056,.03588,0],977:[0,.69444,0,.08334],981:[.19444,.69444,0,.08334],982:[0,.43056,.02778,0],1009:[.19444,.43056,0,.08334],1013:[0,.43056,0,.05556],57649:[0,.43056,0,.02778],57911:[.19444,.43056,0,.08334]},"SansSerif-Bold":{32:wi,33:Rt,34:Rt,35:Xn,36:[.05556,.75,0,0],37:[.05556,.75,0,0],38:Rt,39:Rt,40:Nn,41:Nn,42:ms,43:[.11667,.61667,0,0],44:[.10556,.13056,0,0],45:[0,.45833,0,0],46:[0,.13056,0,0],47:Nn,48:Rt,49:Rt,50:Rt,51:Rt,52:Rt,53:Rt,54:Rt,55:Rt,56:Rt,57:Rt,58:[0,.45833,0,0],59:[.10556,.45833,0,0],61:[-.09375,.40625,0,0],63:Rt,64:Rt,65:Rt,66:Rt,67:Rt,68:Rt,69:Rt,70:Rt,71:Rt,72:Rt,73:Rt,74:Rt,75:Rt,76:Rt,77:Rt,78:Rt,79:Rt,80:Rt,81:[.10556,.69444,0,0],82:Rt,83:Rt,84:Rt,85:Rt,86:[0,.69444,.01528,0],87:[0,.69444,.01528,0],88:Rt,89:[0,.69444,.0275,0],90:Rt,91:Nn,93:Nn,94:Rt,95:[.35,.10833,.03056,0],97:[0,.45833,0,0],98:Rt,99:[0,.45833,0,0],100:Rt,101:[0,.45833,0,0],102:[0,.69444,.07639,0],103:[.19444,.45833,.01528,0],104:Rt,105:Rt,106:Xn,107:Rt,108:Rt,109:[0,.45833,0,0],110:[0,.45833,0,0],111:[0,.45833,0,0],112:[.19444,.45833,0,0],113:[.19444,.45833,0,0],114:[0,.45833,.01528,0],115:[0,.45833,0,0],116:[0,.58929,0,0],117:[0,.45833,0,0],118:[0,.45833,.01528,0],119:[0,.45833,.01528,0],120:[0,.45833,0,0],121:[.19444,.45833,.01528,0],122:[0,.45833,0,0],126:[.35,.34444,0,0],160:wi,168:Rt,176:Rt,180:Rt,184:[.17014,0,0,0],305:[0,.45833,0,0],567:[.19444,.45833,0,0],710:Rt,711:[0,.63542,0,0],713:[0,.63778,0,0],728:Rt,729:Rt,730:Rt,732:Rt,733:Rt,915:Rt,916:Rt,920:Rt,923:Rt,926:Rt,928:Rt,931:Rt,933:Rt,934:Rt,936:Rt,937:Rt,8211:[0,.45833,.03056,0],8212:[0,.45833,.03056,0],8216:Rt,8217:Rt,8220:Rt,8221:Rt},"SansSerif-Italic":{32:wi,33:[0,.69444,.05733,0],34:[0,.69444,.00316,0],35:[.19444,.69444,.05087,0],36:[.05556,.75,.11156,0],37:[.05556,.75,.03126,0],38:[0,.69444,.03058,0],39:[0,.69444,.07816,0],40:[.25,.75,.13164,0],41:[.25,.75,.02536,0],42:[0,.75,.11775,0],43:[.08333,.58333,.02536,0],44:[.125,.08333,0,0],45:[0,.44444,.01946,0],46:[0,.08333,0,0],47:[.25,.75,.13164,0],48:[0,.65556,.11156,0],49:[0,.65556,.11156,0],50:[0,.65556,.11156,0],51:[0,.65556,.11156,0],52:[0,.65556,.11156,0],53:[0,.65556,.11156,0],54:[0,.65556,.11156,0],55:[0,.65556,.11156,0],56:[0,.65556,.11156,0],57:[0,.65556,.11156,0],58:[0,.44444,.02502,0],59:[.125,.44444,.02502,0],61:[-.13,.37,.05087,0],63:[0,.69444,.11809,0],64:[0,.69444,.07555,0],65:Rt,66:[0,.69444,.08293,0],67:[0,.69444,.11983,0],68:[0,.69444,.07555,0],69:[0,.69444,.11983,0],70:[0,.69444,.13372,0],71:[0,.69444,.11983,0],72:[0,.69444,.08094,0],73:[0,.69444,.13372,0],74:[0,.69444,.08094,0],75:[0,.69444,.11983,0],76:Rt,77:[0,.69444,.08094,0],78:[0,.69444,.08094,0],79:[0,.69444,.07555,0],80:[0,.69444,.08293,0],81:[.125,.69444,.07555,0],82:[0,.69444,.08293,0],83:[0,.69444,.09205,0],84:[0,.69444,.13372,0],85:[0,.69444,.08094,0],86:[0,.69444,.1615,0],87:[0,.69444,.1615,0],88:[0,.69444,.13372,0],89:[0,.69444,.17261,0],90:[0,.69444,.11983,0],91:[.25,.75,.15942,0],93:[.25,.75,.08719,0],94:[0,.69444,.0799,0],95:[.35,.09444,.08616,0],97:[0,.44444,.00981,0],98:[0,.69444,.03057,0],99:[0,.44444,.08336,0],100:[0,.69444,.09483,0],101:[0,.44444,.06778,0],102:[0,.69444,.21705,0],103:[.19444,.44444,.10836,0],104:[0,.69444,.01778,0],105:[0,.67937,.09718,0],106:[.19444,.67937,.09162,0],107:[0,.69444,.08336,0],108:[0,.69444,.09483,0],109:[0,.44444,.01778,0],110:[0,.44444,.01778,0],111:[0,.44444,.06613,0],112:[.19444,.44444,.0389,0],113:[.19444,.44444,.04169,0],114:[0,.44444,.10836,0],115:[0,.44444,.0778,0],116:[0,.57143,.07225,0],117:[0,.44444,.04169,0],118:[0,.44444,.10836,0],119:[0,.44444,.10836,0],120:[0,.44444,.09169,0],121:[.19444,.44444,.10836,0],122:[0,.44444,.08752,0],126:[.35,.32659,.08826,0],160:wi,168:[0,.67937,.06385,0],176:Rt,184:[.17014,0,0,0],305:[0,.44444,.04169,0],567:[.19444,.44444,.04169,0],710:[0,.69444,.0799,0],711:[0,.63194,.08432,0],713:[0,.60889,.08776,0],714:[0,.69444,.09205,0],715:Rt,728:[0,.69444,.09483,0],729:[0,.67937,.07774,0],730:Rt,732:[0,.67659,.08826,0],733:[0,.69444,.09205,0],915:[0,.69444,.13372,0],916:Rt,920:[0,.69444,.07555,0],923:Rt,926:[0,.69444,.12816,0],928:[0,.69444,.08094,0],931:[0,.69444,.11983,0],933:[0,.69444,.09031,0],934:[0,.69444,.04603,0],936:[0,.69444,.09031,0],937:[0,.69444,.08293,0],8211:[0,.44444,.08616,0],8212:[0,.44444,.08616,0],8216:[0,.69444,.07816,0],8217:[0,.69444,.07816,0],8220:[0,.69444,.14205,0],8221:[0,.69444,.00316,0]},"SansSerif-Regular":{32:wi,33:Rt,34:Rt,35:Xn,36:[.05556,.75,0,0],37:[.05556,.75,0,0],38:Rt,39:Rt,40:Nn,41:Nn,42:ms,43:[.08333,.58333,0,0],44:[.125,.08333,0,0],45:jn,46:[0,.08333,0,0],47:Nn,48:[0,.65556,0,0],49:[0,.65556,0,0],50:[0,.65556,0,0],51:[0,.65556,0,0],52:[0,.65556,0,0],53:[0,.65556,0,0],54:[0,.65556,0,0],55:[0,.65556,0,0],56:[0,.65556,0,0],57:[0,.65556,0,0],58:jn,59:[.125,.44444,0,0],61:[-.13,.37,0,0],63:Rt,64:Rt,65:Rt,66:Rt,67:Rt,68:Rt,69:Rt,70:Rt,71:Rt,72:Rt,73:Rt,74:Rt,75:Rt,76:Rt,77:Rt,78:Rt,79:Rt,80:Rt,81:[.125,.69444,0,0],82:Rt,83:Rt,84:Rt,85:Rt,86:[0,.69444,.01389,0],87:[0,.69444,.01389,0],88:Rt,89:[0,.69444,.025,0],90:Rt,91:Nn,93:Nn,94:Rt,95:[.35,.09444,.02778,0],97:jn,98:Rt,99:jn,100:Rt,101:jn,102:[0,.69444,.06944,0],103:[.19444,.44444,.01389,0],104:Rt,105:[0,.67937,0,0],106:[.19444,.67937,0,0],107:Rt,108:Rt,109:jn,110:jn,111:jn,112:Sa,113:Sa,114:[0,.44444,.01389,0],115:jn,116:[0,.57143,0,0],117:jn,118:[0,.44444,.01389,0],119:[0,.44444,.01389,0],120:jn,121:[.19444,.44444,.01389,0],122:jn,126:[.35,.32659,0,0],160:wi,168:[0,.67937,0,0],176:Rt,184:[.17014,0,0,0],305:jn,567:Sa,710:Rt,711:[0,.63194,0,0],713:[0,.60889,0,0],714:Rt,715:Rt,728:Rt,729:[0,.67937,0,0],730:Rt,732:[0,.67659,0,0],733:Rt,915:Rt,916:Rt,920:Rt,923:Rt,926:Rt,928:Rt,931:Rt,933:Rt,934:Rt,936:Rt,937:Rt,8211:[0,.44444,.02778,0],8212:[0,.44444,.02778,0],8216:Rt,8217:Rt,8220:Rt,8221:Rt},"Script-Regular":{32:wi,65:[0,.7,.22925,0],66:[0,.7,.04087,0],67:[0,.7,.1689,0],68:[0,.7,.09371,0],69:[0,.7,.18583,0],70:[0,.7,.13634,0],71:[0,.7,.17322,0],72:[0,.7,.29694,0],73:[0,.7,.19189,0],74:[.27778,.7,.19189,0],75:[0,.7,.31259,0],76:[0,.7,.19189,0],77:[0,.7,.15981,0],78:[0,.7,.3525,0],79:[0,.7,.08078,0],80:[0,.7,.08078,0],81:[0,.7,.03305,0],82:[0,.7,.06259,0],83:[0,.7,.19189,0],84:[0,.7,.29087,0],85:[0,.7,.25815,0],86:[0,.7,.27523,0],87:[0,.7,.27523,0],88:[0,.7,.26006,0],89:[0,.7,.2939,0],90:[0,.7,.24037,0],160:wi},"Size1-Regular":{32:wi,40:Br,41:Br,47:Br,91:Br,92:Br,93:Br,123:Br,125:Br,160:wi,710:[0,.72222,0,0],732:[0,.72222,0,0],770:[0,.72222,0,0],771:[0,.72222,0,0],8214:[-99e-5,.601,0,0],8593:[1e-5,.6,0,0],8595:[1e-5,.6,0,0],8657:[1e-5,.6,0,0],8659:[1e-5,.6,0,0],8719:ml,8720:ml,8721:ml,8730:Br,8739:[-.00599,.606,0,0],8741:[-.00599,.606,0,0],8747:[.30612,.805,.19445,0],8748:[.306,.805,.19445,0],8749:[.306,.805,.19445,0],8750:[.30612,.805,.19445,0],8896:ml,8897:ml,8898:ml,8899:ml,8968:Br,8969:Br,8970:Br,8971:Br,9168:[-99e-5,.601,0,0],10216:Br,10217:Br,10752:ml,10753:ml,10754:ml,10756:ml,10758:ml},"Size2-Regular":{32:wi,40:lr,41:lr,47:lr,91:lr,92:lr,93:lr,123:lr,125:lr,160:wi,710:ms,732:ms,770:ms,771:ms,8719:hl,8720:hl,8721:hl,8730:lr,8747:[.86225,1.36,.44445,0],8748:[.862,1.36,.44445,0],8749:[.862,1.36,.44445,0],8750:[.86225,1.36,.44445,0],8896:hl,8897:hl,8898:hl,8899:hl,8968:lr,8969:lr,8970:lr,8971:lr,10216:lr,10217:lr,10752:hl,10753:hl,10754:hl,10756:hl,10758:hl},"Size3-Regular":{32:wi,40:Jr,41:Jr,47:Jr,91:Jr,92:Jr,93:Jr,123:Jr,125:Jr,160:wi,710:ms,732:ms,770:ms,771:ms,8730:Jr,8968:Jr,8969:Jr,8970:Jr,8971:Jr,10216:Jr,10217:Jr},"Size4-Regular":{32:wi,40:zr,41:zr,47:zr,91:zr,92:zr,93:zr,123:zr,125:zr,160:wi,710:[0,.825,0,0],732:[0,.825,0,0],770:[0,.825,0,0],771:[0,.825,0,0],8730:zr,8968:zr,8969:zr,8970:zr,8971:zr,9115:[.64502,1.155,0,0],9116:[1e-5,.6,0,0],9117:[.64502,1.155,0,0],9118:[.64502,1.155,0,0],9119:[1e-5,.6,0,0],9120:[.64502,1.155,0,0],9121:[.64502,1.155,0,0],9122:[-99e-5,.601,0,0],9123:[.64502,1.155,0,0],9124:[.64502,1.155,0,0],9125:[-99e-5,.601,0,0],9126:[.64502,1.155,0,0],9127:[1e-5,.9,0,0],9128:lr,9129:[.90001,0,0,0],9130:[0,.3,0,0],9131:[1e-5,.9,0,0],9132:lr,9133:[.90001,0,0,0],9143:[.88502,.915,0,0],10216:zr,10217:zr,57344:[-.00499,.605,0,0],57345:[-.00499,.605,0,0],57680:[0,.12,0,0],57681:[0,.12,0,0],57682:[0,.12,0,0],57683:[0,.12,0,0]},"Typewriter-Regular":{32:wi,33:cn,34:cn,35:cn,36:[.08333,.69444,0,0],37:[.08333,.69444,0,0],38:cn,39:cn,40:[.08333,.69444,0,0],41:[.08333,.69444,0,0],42:[0,.52083,0,0],43:[-.08056,.53055,0,0],44:[.13889,.125,0,0],45:[-.08056,.53055,0,0],46:[0,.125,0,0],47:[.08333,.69444,0,0],48:cn,49:cn,50:cn,51:cn,52:cn,53:cn,54:cn,55:cn,56:cn,57:cn,58:[0,.43056,0,0],59:[.13889,.43056,0,0],60:[-.05556,.55556,0,0],61:[-.19549,.41562,0,0],62:[-.05556,.55556,0,0],63:cn,64:cn,65:cn,66:cn,67:cn,68:cn,69:cn,70:cn,71:cn,72:cn,73:cn,74:cn,75:cn,76:cn,77:cn,78:cn,79:cn,80:cn,81:[.13889,.61111,0,0],82:cn,83:cn,84:cn,85:cn,86:cn,87:cn,88:cn,89:cn,90:cn,91:[.08333,.69444,0,0],92:[.08333,.69444,0,0],93:[.08333,.69444,0,0],94:cn,95:[.09514,0,0,0],96:cn,97:[0,.43056,0,0],98:cn,99:[0,.43056,0,0],100:cn,101:[0,.43056,0,0],102:cn,103:[.22222,.43056,0,0],104:cn,105:cn,106:[.22222,.61111,0,0],107:cn,108:cn,109:[0,.43056,0,0],110:[0,.43056,0,0],111:[0,.43056,0,0],112:[.22222,.43056,0,0],113:[.22222,.43056,0,0],114:[0,.43056,0,0],115:[0,.43056,0,0],116:[0,.55358,0,0],117:[0,.43056,0,0],118:[0,.43056,0,0],119:[0,.43056,0,0],120:[0,.43056,0,0],121:[.22222,.43056,0,0],122:[0,.43056,0,0],123:[.08333,.69444,0,0],124:[.08333,.69444,0,0],125:[.08333,.69444,0,0],126:cn,127:cn,160:wi,176:cn,184:[.19445,0,0,0],305:[0,.43056,0,0],567:[.22222,.43056,0,0],711:[0,.56597,0,0],713:[0,.56555,0,0],714:cn,715:cn,728:cn,730:cn,770:cn,771:cn,776:cn,915:cn,916:cn,920:cn,923:cn,926:cn,928:cn,931:cn,933:cn,934:cn,936:cn,937:cn,8216:cn,8217:cn,8242:cn,9251:[.11111,.21944,0,0]}},IJ=/[\u3040-\u309F]|[\u30A0-\u30FF]|[\u4E00-\u9FAF]|[\uAC00-\uD7AF]/,Hl=.25,qm=.431,j5={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[qm,qm,qm],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[Hl,Hl,Hl],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04]},x4=[0,.5,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],Fm=5,q5={"\xa0":" ","\u200b":" ",\u00c5:"A",\u00c7:"C",\u00d0:"D",\u00de:"o",\u00e5:"a",\u00e7:"c",\u00f0:"d",\u00fe:"o",\u0410:"A",\u0411:"B",\u0412:"B",\u0413:"F",\u0414:"A",\u0415:"E",\u0416:"K",\u0417:"3",\u0418:"N",\u0419:"N",\u041a:"K",\u041b:"N",\u041c:"M",\u041d:"H",\u041e:"O",\u041f:"N",\u0420:"P",\u0421:"C",\u0422:"T",\u0423:"y",\u0424:"O",\u0425:"X",\u0426:"U",\u0427:"h",\u0428:"W",\u0429:"W",\u042a:"B",\u042b:"X",\u042c:"B",\u042d:"3",\u042e:"X",\u042f:"R",\u0430:"a",\u0431:"b",\u0432:"a",\u0433:"r",\u0434:"y",\u0435:"e",\u0436:"m",\u0437:"e",\u0438:"n",\u0439:"n",\u043a:"n",\u043b:"n",\u043c:"m",\u043d:"n",\u043e:"o",\u043f:"n",\u0440:"p",\u0441:"c",\u0442:"o",\u0443:"y",\u0444:"b",\u0445:"x",\u0446:"n",\u0447:"n",\u0448:"w",\u0449:"w",\u044a:"a",\u044b:"m",\u044c:"a",\u044d:"e",\u044e:"m",\u044f:"r"};function Qm(n,o){void 0===n&&(n=77);let e=MJ[o][n];if(e)return{defaultMetrics:!1,depth:e[0],height:e[1],italic:e[2],skew:e[3]};if(11034===n)return{defaultMetrics:!0,depth:.2,height:.8,italic:0,skew:0};let i=String.fromCodePoint(n);if(i in q5)n=q5[i].codePointAt(0);else if(IJ.test(i))return n=77,{defaultMetrics:!0,depth:.2,height:.9,italic:0,skew:0};return{defaultMetrics:!0,depth:.2,height:.7,italic:0,skew:0}}var Ed=class{constructor(n,o,e){this.id=n,this.sizeDelta=o,this.cramped=e;let i={"-4":2,"-3":1,0:0}[o];this.metrics=Object.keys(j5).reduce((a,r)=>ei(Ee({},a),{[r]:j5[r][i]}),{})}getFontSize(n){return Math.max(1,n+this.sizeDelta)}get sup(){return cr[[0,1,0,1,2,3,2,3][this.id]]}get sub(){return cr[[0,0,0,0,2,2,2,2][this.id]]}get fracNum(){return cr[[0,1,0,1,2,3,4,5][this.id]]}get fracDen(){return cr[[0,0,0,0,2,2,4,4][this.id]]}get cramp(){return cr[[0,0,2,2,4,4,6,6][this.id]]}get isTight(){return this.sizeDelta<0}},cr={7:new Ed(7,0,!1),6:new Ed(6,0,!0),5:new Ed(5,0,!1),4:new Ed(4,0,!0),3:new Ed(3,-3,!1),2:new Ed(2,-3,!0),1:new Ed(1,-4,!1),0:new Ed(0,-4,!0)};function Qc(n,o){return null===n?0:function PJ(n,o){var e;if(!n)return 0;let i={pt:1,mm:7227/2540,cm:7227/254,ex:35271/8192,px:3/4,em:10,bp:1.00375,dd:1238/1157,pc:12,in:72.27,mu:10/18}[null!=(e=n.unit)?e:"pt"];if(Number.isFinite(o)){let a=10**o;return Math.round(n.dimension/10*i*a)/a}return n.dimension*i}(n,o)/10}function y4(n){var o;return`${n.dimension}${null!=(o=n.unit)?o:"pt"}`}cr.displaystyle=cr[7],cr.textstyle=cr[5],cr.scriptstyle=cr[3],cr.scriptscriptstyle=cr[1];var ni=class{constructor(n,o,e){var i,a,r,s,l,c;n instanceof ni&&(this.parent=n),n instanceof ni||(this.registers=null!=(i=n.registers)?i:{}),this.isPhantom=null!=(s=null!=(r=o?.isPhantom)?r:null==(a=this.parent)?void 0:a.isPhantom)&&s;let h,d=Ee({},n);if(o&&(o.letterShapeStyle&&"auto"!==o.letterShapeStyle&&(d.letterShapeStyle=o.letterShapeStyle),o.color&&"none"!==o.color&&(d.color=o.color),o.backgroundColor&&"none"!==o.backgroundColor&&(d.backgroundColor=o.backgroundColor),o.fontSize&&"auto"!==o.fontSize&&o.fontSize!==(null==(l=this.parent)?void 0:l._size)&&(this._size=o.fontSize)),this.letterShapeStyle=null!=(c=d.letterShapeStyle)?c:"tex",this.color=d.color,this.backgroundColor=d.backgroundColor,"string"==typeof e){if(n instanceof ni)switch(e){case"cramp":h=n.mathstyle.cramp;break;case"superscript":h=n.mathstyle.sup;break;case"subscript":h=n.mathstyle.sub;break;case"numerator":h=n.mathstyle.fracNum;break;case"denominator":h=n.mathstyle.fracDen}switch(e){case"textstyle":h=cr.textstyle;break;case"displaystyle":h=cr.displaystyle;break;case"scriptstyle":h=cr.scriptstyle;break;case"scriptscriptstyle":h=cr.scriptscriptstyle}}this._mathstyle=h,this.atomIdsSettings=n.atomIdsSettings,this.renderPlaceholder=d.renderPlaceholder}get mathstyle(){let n=this._mathstyle,o=this.parent;for(;!n;)n=o._mathstyle,o=o.parent;return n}getRegister(n){var o;return null!=(o=this.registers)&&o[n]?this.registers[n]:this.parent?this.parent.getRegister(n):void 0}getRegisterAsGlue(n){var o;if(null!=(o=this.registers)&&o[n]){let e=this.registers[n];return"object"==typeof e&&"glue"in e?e:"object"==typeof e&&"dimension"in e?{glue:{dimension:e.dimension}}:"number"==typeof e?{glue:{dimension:e}}:void 0}if(this.parent)return this.parent.getRegisterAsGlue(n)}getRegisterAsEm(n){return Qc(this.getRegisterAsDimension(n))}getRegisterAsDimension(n){var o;if(null!=(o=this.registers)&&o[n]){let e=this.registers[n];return"object"==typeof e&&"glue"in e?e.glue:"object"==typeof e&&"dimension"in e?e:"number"==typeof e?{dimension:e}:void 0}if(this.parent)return this.parent.getRegisterAsDimension(n)}setRegister(n,o){void 0!==o?this.registers[n]=o:delete this.registers[n]}setGlobalRegister(n,o){let e=this;for(;e.parent;)e.setRegister(n,void 0),e=e.parent;e.setRegister(n,o)}get size(){let n=this._size,o=this.parent;for(;!n;)n=o._size,o=o.parent;return n}makeID(){if(!this.atomIdsSettings)return;if(this.atomIdsSettings.overrideID)return this.atomIdsSettings.overrideID;if("number"!=typeof this.atomIdsSettings.seed)return Date.now().toString(36).slice(-2)+Math.floor(1e5*Math.random()).toString(36);let n=this.atomIdsSettings.seed.toString(36);return this.atomIdsSettings.seed+=1,n}scale(n){return n*this.effectiveFontSize}get scalingFactor(){return this.parent?this.effectiveFontSize/this.parent.effectiveFontSize:1}get isDisplayStyle(){return 7===this.mathstyle.id||6===this.mathstyle.id}get isCramped(){return this.mathstyle.cramped}get isTight(){return this.mathstyle.isTight}get effectiveFontSize(){return x4[Math.max(1,this.size+this.mathstyle.sizeDelta)]}get computedColor(){let n=this.color,o=this.parent;return!n&&o&&(n=o.color,o=o.parent),n??""}get computedBackgroundColor(){let n=this.backgroundColor,o=this.parent;return!n&&o&&(n=o.backgroundColor,o=o.parent),n??""}get metrics(){return this.mathstyle.metrics}},w4={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},C4={widehat1:[1062,239,.24],widehat2:[2364,300,.3],widehat3:[2364,360,.36],widehat4:[2364,420,.42],widecheck1:[1062,239,.24],widecheck2:[2364,300,.3],widecheck3:[2364,360,.36],widecheck4:[2364,420,.42],widetilde1:[600,260,.26],widetilde2:[1033,286,.286],widetilde3:[2339,306,.306],widetilde4:[2340,312,.34],overarc:[1061,159,.3],underarc:[1061,159,.3]},F5={doubleleftarrow:"M262 157\nl10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3\n 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28\n 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5\nc2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5\n 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87\n-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7\n-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z\nm8 0v40h399730v-40zm0 194v40h399730v-40z",doublerightarrow:"M399738 392l\n-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5\n 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88\n-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68\n-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18\n-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782\nc-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3\n-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z",leftarrow:"M400000 241H110l3-3c68.7-52.7 113.7-120\n 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8\n-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247\nc-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208\n 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3\n 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202\n l-3-3h399890zM100 241v40h399900v-40z",leftbrace:"M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117\n-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7\n 5-6 9-10 13-.7 1-7.3 1-20 1H6z",leftbraceunder:"M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13\n 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688\n 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7\n-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z",overarc:"M529 0c179 0 524 115 524 115 5 1 9 5 9 10 0 1-1 2-1 3l-4 22c-1 5-5 9-11 9h-2s-338-93-512-92c-174 0-513 92-513 92h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13 0 0 342-115 520-115z",underarc:"m 529 160\n  c -179 0 -524 -115 -524 -115\n  c -5 -1 -9 -5 -9 -10\n  c 0 -1 1 -2 1 -3\n  l 4 -22\n  c 1 -5 5 -9 11 -9\n  h 2\n  s 338 93 512 92\n  c 174 0 513 -92 513 -92\n  h 2\n  c 5 0 9 4 11 9\n  l 5 22\n  c 1 6 -2 12 -8 13\n  c 0 0 -342 115 -520 115\n  z\n  ",leftgroup:"M400000 80\nH435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0\n 435 0h399565z",leftgroupunder:"M400000 262\nH435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219\n 435 219h399565z",leftharpoon:"M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3\n-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5\n-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7\n-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z",leftharpoonplus:"M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5\n 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3\n-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7\n-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z\nm0 0v40h400000v-40z",leftharpoondown:"M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333\n 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5\n 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667\n-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z",leftharpoondownplus:"M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12\n 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7\n-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0\nv40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z",lefthook:"M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5\n-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3\n-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21\n 71.5 23h399859zM103 281v-40h399897v40z",leftlinesegment:"M40 281 V428 H0 V94 H40 V241 H400000 v40z\nM40 281 V428 H0 V94 H40 V241 H400000 v40z",leftmapsto:"M40 281 V448H0V74H40V241H400000v40z\nM40 281 V448H0V74H40V241H400000v40z",leftToFrom:"M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23\n-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8\nc28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3\n 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z",longequal:"M0 50 h400000 v40H0z m0 194h40000v40H0z\nM0 50 h400000 v40H0z m0 194h40000v40H0z",midbrace:"M200428 334\nc-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14\n-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7\n 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11\n 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z",midbraceunder:"M199572 214\nc100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14\n 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3\n 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0\n-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z",oiintSize1:"M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6\n-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z\nm368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8\n60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z",oiintSize2:"M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8\n-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z\nm502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2\nc0 110 84 276 504 276s502.4-166 502.4-276z",oiiintSize1:"M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6\n-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z\nm525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0\n85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z",oiiintSize2:"M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8\n-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z\nm770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1\nc0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z",rightarrow:"M0 241v40h399891c-47.3 35.3-84 78-110 128\n-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20\n 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7\n 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85\n-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5\n-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67\n 151.7 139 205zm0 0v40h399900v-40z",rightbrace:"M400000 542l\n-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5\ns-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1\nc124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z",rightbraceunder:"M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3\n 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237\n-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z",rightgroup:"M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0\n 3-1 3-3v-38c-76-158-257-219-435-219H0z",rightgroupunder:"M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18\n 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z",rightharpoon:"M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3\n-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2\n-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58\n 69.2 92 94.5zm0 0v40h399900v-40z",rightharpoonplus:"M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11\n-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7\n 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z\nm0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z",rightharpoondown:"M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8\n 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5\n-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95\n-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z",rightharpoondownplus:"M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8\n 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3\n 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3\n-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z\nm0-194v40h400000v-40zm0 0v40h400000v-40z",righthook:"M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3\n 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0\n-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21\n 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z",rightlinesegment:"M399960 241 V94 h40 V428 h-40 V281 H0 v-40z\nM399960 241 V94 h40 V428 h-40 V281 H0 v-40z",rightToFrom:"M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23\n 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32\n-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142\n-167z M100 147v40h399900v-40zM0 341v40h399900v-40z",twoheadleftarrow:"M0 167c68 40\n 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69\n-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3\n-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19\n-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101\n 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z",twoheadrightarrow:"M400000 167\nc-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3\n 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42\n 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333\n-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70\n 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z",widetilde1:"M200 55.538c-77 0-168 73.953-177 73.953-3 0-7\n-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0\n 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0\n 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128\n-68.267.847-113-73.952-191-73.952z",widetilde2:"M344 55.266c-142 0-300.638 81.316-311.5 86.418\n-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9\n 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114\nc1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751\n 181.476 676 181.476c-149 0-189-126.21-332-126.21z",widetilde3:"M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457\n-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0\n 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697\n 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696\n -338 0-409-156.573-744-156.573z",widetilde4:"M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345\n-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409\n 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9\n 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409\n -175.236-744-175.236z",vec:"M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5\n3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11\n10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63\n-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1\n-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59\nH213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359\nc-16-25.333-24-45-24-59z",widehat1:"M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22\nc-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z",widehat2:"M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z",widehat3:"M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z",widehat4:"M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10\n-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z",widecheck1:"M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,\n-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z",widecheck2:"M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z",widecheck3:"M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z",widecheck4:"M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,\n-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z",baraboveleftarrow:"M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202\nc4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5\nc-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130\ns-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47\n121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6\ns2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11\nc0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z\nM100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z",rightarrowabovebar:"M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32\n-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0\n13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39\n-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5\n-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5\n-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67\n151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z",baraboveshortleftharpoon:"M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11\nc1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17\nc2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21\nc-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40\nc-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z\nM0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z",rightharpoonaboveshortbar:"M0,241 l0,40c399126,0,399993,0,399993,0\nc4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,\n-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6\nc-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z\nM0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z",shortbaraboveleftharpoon:"M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11\nc1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,\n1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,\n-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z\nM93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z",shortrightharpoonabovebar:"M53,241l0,40c398570,0,399437,0,399437,0\nc4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,\n-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6\nc-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z\nM500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z"},ag=class{constructor(n){ag._registry[n]=this}static createAtom(n,o,e,i){return ag._registry[n].createAtom(o,e,i)}static serialize(n,o){return ag._registry[n[0].mode].serialize(n,o)}static applyStyle(n,o,e){return ag._registry[n].applyStyle(o,e)}},Md=ag;function fl(n,o){let a,e=[],i=[];for(let r of n)if("first"!==r.type&&r.style){let s;"variant"===o?(s=r.style.variant,r.style.variantStyle&&"up"!==r.style.variantStyle&&(s+="-"+r.style.variantStyle)):"cssClass"===o?"group"===r.type&&(s=r.customClass):s=r.style[o],s===a?i.push(r):(i.length>0&&e.push(i),i=[r],a=s)}return i.length>0&&e.push(i),e}Md._registry={};var qJ=["","chem","mord","mbin","mop","mrel","mopen","mclose","mpunct","minner","spacing","first","latex","composition","error","placeholder","supsub","none","mathfield"],QJ={mord:{mop:3,mbin:4,mrel:5,minner:3},mop:{mord:3,mop:3,rel:5,minner:3},mbin:{mord:4,mop:4,mopen:4,minner:4},mrel:{mord:5,mop:5,mopen:5,minner:5},mclose:{mop:3,mbin:4,mrel:5,minner:3},mpunct:{mord:3,mop:3,mrel:3,mopen:3,mpunct:3,minner:3},minner:{mord:3,mop:3,mbin:4,mrel:5,mopen:3,mpunct:3,minner:3}},RJ={mord:{mop:3},mop:{mord:3,mop:3},mclose:{mop:3},minner:{mop:3}};function rg(n,o){if("string"==typeof n)return n;if("number"==typeof n){Number.isFinite(n);let e=Math.ceil(100*n)/100;return 0===e?"0":e.toString()+(o??"")}return""}var Be=class{constructor(n,o){var e,i,a,r,s,l;if("number"==typeof n?this.value=String.fromCodePoint(n):"string"==typeof n?this.value=n:qa(n)?this.children=n.filter(d=>null!==d):n&&n instanceof Be&&(this.children=[n]),this.type=null!=(e=o?.type)?e:"",this.isSelected=!1,this.isTight=null!=(i=o?.isTight)&&i,this.newList=null!=(a=o?.newList)&&a,null!=o&&o.properties)for(let d of Object.keys(o.properties))this.setStyle(d,o.properties[d]);null!=o&&o.attributes&&(this.attributes=o.attributes),this.classes=null!=(r=o?.classes)?r:"";let c=o?.fontFamily||"Main-Regular";if(null!=o&&o.style&&this.value&&(c=Md.applyStyle(null!=(s=o.mode)?s:"math",this,o.style)||"Main-Regular"),this.height=0,this.depth=0,this.skew=0,this.italic=0,this.maxFontSize=0,"latex"===this.type)this.height=.8,this.depth=.2;else if("number"==typeof n){let d=Qm(n,c);this.height=d.height,this.depth=d.depth,this.skew=d.skew,this.italic=d.italic}else if(this.value){this.height=-1/0,this.depth=-1/0,this.skew=-1/0,this.italic=-1/0;for(let d=0;d<this.value.length;d++){let h=Qm(this.value.codePointAt(d),c||"Main-Regular");this.height=Math.max(this.height,h.height),this.depth=Math.max(this.depth,h.depth),this.skew=h.skew,this.italic=h.italic}}else if(this.children&&this.children.length>0)if(1===this.children.length){let d=this.children[0];this.height=d.height,this.depth=d.depth,this.maxFontSize=d.maxFontSize,this.skew=d.skew,this.italic=d.italic}else{let d=-1/0,h=-1/0,_=0;for(let x of this.children)x.height>d&&(d=x.height),x.depth>h&&(h=x.depth),_=Math.max(_,null!=(l=x.maxFontSize)?l:0);this.height=d,this.depth=h,this.maxFontSize=_}void 0!==o?.height&&(this.height=o.height),void 0!==o?.depth&&(this.depth=o.depth),void 0!==o?.maxFontSize&&(this.maxFontSize=o.maxFontSize)}set atomID(n){void 0===n||0===n.length||(this.attributes||(this.attributes={}),this.attributes["data-atom-id"]=n)}selected(n){if(this.isSelected!==n&&(this.isSelected=n,this.children))for(let o of this.children)o.selected(n)}setStyle(n,o,e){if(void 0===o)return;let i=rg(o,e);i.length>0&&(this.cssProperties||(this.cssProperties={}),this.cssProperties[n]=i)}setTop(n){Number.isFinite(n)&&Math.abs(n)>.01&&(this.cssProperties||(this.cssProperties={}),this.cssProperties.top=rg(n,"em"),this.height-=n,this.depth+=n)}get left(){var n;return null!=(n=this.cssProperties)&&n["margin-left"]?Number.parseFloat(this.cssProperties["margin-left"]):0}set left(n){Number.isFinite(n)&&(0===n?this.cssProperties&&delete this.cssProperties["margin-left"]:(this.cssProperties||(this.cssProperties={}),this.cssProperties["margin-left"]=rg(n,"em")))}set right(n){Number.isFinite(n)&&(0===n?this.cssProperties&&delete this.cssProperties["margin-right"]:(this.cssProperties||(this.cssProperties={}),this.cssProperties["margin-right"]=rg(n,"em")))}set width(n){Number.isFinite(n)&&(0===n?this.cssProperties&&delete this.cssProperties.width:(this.cssProperties||(this.cssProperties={}),this.cssProperties.width=rg(n,"em")))}wrap(n,o){let e=n.parent;if(!e)return this;n.isPhantom&&this.setStyle("opacity",0);let i=n.computedColor;i===e.computedColor&&(i=""),this.setStyle("color",i);let s,a=n.effectiveFontSize===e.effectiveFontSize?void 0:n.effectiveFontSize,r=n.computedBackgroundColor;if(this.isSelected&&(r=I5(r)),r===e.computedBackgroundColor&&(r=""),!(a||r||o&&(o.classes||o.type)))return this;r?(s=Id(this,o),s.selected(this.isSelected),s.setStyle("background-color",r),s.setStyle("display","inline-block")):s=new Be(this,o);let l=n.scalingFactor;return 1!==l&&(s.setStyle("font-size",100*l,"%"),s.height*=l,s.depth*=l,s.italic*=l,s.skew*=l),s}wrapSelect(n){if(!this.isSelected)return this;if(!n.parent)return this;let o=I5(n.computedBackgroundColor),e=Id(this);return e.selected(!0),e.setStyle("background-color",o),e.setStyle("display","inline-block"),e}toMarkup(){var n,o,e;let i=null!=(n=this.value)?n:"";if(this.children)for(let l of this.children)i+=l.toMarkup();let a=this.classes.split(" ");a.push(null!=(o={latex:"ML__latex",placeholder:"ML__placeholder",error:"ML__error"}[this.type])?o:""),"latex"===this.caret&&a.push("ML__latex-caret");let r=1===a.length?a[0]:a.filter((l,c,d)=>l.length>0&&d.indexOf(l)===c).join(" "),s="";if(i.length>0&&"\u200b"!==i||r.length>0||this.cssId||this.htmlData||this.htmlStyle||this.attributes||this.cssProperties||this.svgBody||this.svgOverlay){let l="";if(this.cssId&&(l+=` id="${this.cssId.replace(/ /g,"-")}" `),this.htmlData){let d=this.htmlData.split(",");for(let h of d){let _=h.match(/([^=]+)=(.+$)/);if(_){let x=_[1].trim().replace(/ /g,"-");x&&(l+=` data-${x}="${_[2]}" `)}else{let x=h.trim().replace(/ /g,"-");x&&(l+=` data-${x} `)}}}if(this.htmlStyle){let d=this.htmlStyle.split(";"),h="";for(let _ of d){let x=_.match(/([^=]+):(.+$)/);if(x){let b=x[1].trim().replace(/ /g,"-");b&&(h+=`${b}:${x[2]};`)}}h&&(l+=` style="${h}"`)}if(this.attributes&&(l+=" "+Object.keys(this.attributes).map(d=>`${d}="${this.attributes[d]}"`).join(" ")),r.length>0&&(l+=` class="${r}"`),this.cssProperties){let d=Object.keys(this.cssProperties).map(h=>`${h}:${this.cssProperties[h]}`).join(";");d.length>0&&(l+=` style="${d}"`)}let c="";this.svgBody?c=function ZJ(n){if(C4[n]){let[d,h,_]=C4[n];return`<span style="display:inline-block;height:${_/2}em;min-width:0"><span class="stretchy" style="height:${_}em"><svg width="100%" height="${_}em" viewBox="0 0 ${d} ${h}" preserveAspectRatio="none" ><path fill="currentcolor" d="${F5[n]}"></path></svg></span></span>`}let r,s,[o,e,i,a]=w4[n],l=i/1e3;3===o.length?(r=["slice-1-of-3","slice-2-of-3","slice-3-of-3"],s=["xMinYMin","xMidYMin","xMaxYMin"]):2===o.length?(r=["slice-1-of-2","slice-2-of-2"],s=["xMinYMin","xMaxYMin"]):(r=["slice-1-of-1"],s=[a]);let c=o.map((d,h)=>`<span class="${r[h]}" style=height:${l}em><svg width=400em height=${l}em viewBox="0 0 400000 ${i}" preserveAspectRatio="${s[h]} slice"><path fill="currentcolor" d="${F5[d]}"></path></svg></span>`).join("");return`<span style="display:inline-block;height:${l}em;min-width:${e}em;">${c}</span>`}(this.svgBody):this.svgOverlay&&(c='<span style="',c+="display: inline-block;",c+=`height:${this.height+this.depth}em;`,c+=`vertical-align:${this.depth}em;`,c+='">',c+=i,c+="</span>",c+='<svg style="position:absolute;overflow:overlay;',c+=`height:${this.height+this.depth}em;`,null!=(e=this.cssProperties)&&e.padding?(c+=`top:${this.cssProperties.padding}em;`,c+=`left:${this.cssProperties.padding}em;`,c+=`width:calc(100% - 2 * ${this.cssProperties.padding}em );`):c+="top:0;left:0;width:100%;",c+="z-index:2;",c+='"',this.svgStyle&&(c+=` style="${this.svgStyle}"`),c+=`>${this.svgOverlay}</svg>`),s=`<span${l}>${i}${c}</span>`}return"text"===this.caret?s+='<span class="ML__text-caret"></span>':"math"===this.caret&&(s+='<span class="ML__caret"></span>'),s}tryCoalesceWith(n){if(this.type!==n.type||!/ML__text/.test(this.classes)&&!["mord","mbin","mrel"].includes(this.type)||this.svgBody||!this.value||n.svgBody||!n.value)return!1;if(this.children&&this.children.length>0||n.children&&n.children.length>0)return!1;let i=this.cssProperties?Object.keys(this.cssProperties).length:0;if(i!==(n.cssProperties?Object.keys(n.cssProperties).length:0))return!1;if(i>0)for(let l of Object.keys(this.cssProperties))if(this.cssProperties[l]!==n.cssProperties[l])return!1;let r=this.classes.trim().replace(/\s+/g," ").split(" "),s=n.classes.trim().replace(/\s+/g," ").split(" ");if(r.length!==s.length)return!1;r.sort(),s.sort();for(let[l,c]of r.entries())if("vertical-separator"===c||c!==s[l])return!1;return this.value+=n.value,this.height=Math.max(this.height,n.height),this.depth=Math.max(this.depth,n.depth),this.maxFontSize=Math.max(this.maxFontSize,n.maxFontSize),this.italic=n.italic,!0}};function T4(n){if(!n||0===n.length)return[];n[0].children=T4(n[0].children);let o=[n[0]];for(let e=1;e<n.length;e++)o[o.length-1].tryCoalesceWith(n[e])||(n[e].children=T4(n[e].children),o.push(n[e]));return o}function mx(n){return n.children&&(n.children=T4(n.children)),n}function Q5(n,o,e){o.newList&&(n=null);let i=o.type;if("first"===i)return null;if("spacing"===i)return n;if(e(n,o),o.children){let a=null;(void 0===i||0===i.length)&&(a=n);for(let r of o.children)a=Q5(a,r,e);(void 0===i||0===i.length)&&(n=a)}return"supsub"!==i&&void 0!==i&&i.length>0&&(n=o),n}function R5(n,o){n&&Q5(null,n,o)}function Pp(n,o=1){return function UJ(n){R5(n,(o,e)=>{"mbin"===e.type&&(!o||/first|none|mbin|mop|mrel|mopen|mpunct/.test(o.type))&&(e.type="mord"),o&&"mbin"===o.type&&/mrel|mclose|mpunct|placeholder/.test(e.type)&&(o.type="mord")})}(n),function BJ(n,o){R5(n,(e,i)=>{var a,r,s,l;let c=null!=(a=e?.type)?a:"none",d=i.isTight?null!=(r=RJ[c])?r:null:null!=(s=QJ[c])?s:null,h=d&&null!=(l=d[i.type])?l:0;h&&(i.left+=o*(h/18))})}(n,o),n}function Id(n,o){if(!n)return new Be(null,o);let e=new Be(null,{classes:"ML__strut"});e.setStyle("height",Math.max(0,n.height),"em");let i=[e];if(0!==n.depth){let a=new Be(null,{classes:"ML__strut--bottom"});a.setStyle("height",n.height+n.depth,"em"),a.setStyle("vertical-align",-n.depth,"em"),i.push(a)}return i.push(n),new Be(i,o)}function hx(n){let o=function DJ(n){return w4[n]?w4[n][2]/1e3:C4[n][2]}(n)/2,e=new Be(null,{height:o+.166,depth:o-.166,maxFontSize:0});return e.svgBody=n,e}var _x,ma=class extends Be{constructor(n,o){var e;let[i,a,r]=function HJ(n){var o;let[e,i]=function JJ(n){if("individualShift"in n){let o=n.individualShift,e=o[0],i=[e],a=-e.shift-e.box.depth,r=a;for(let s=1;s<o.length;s++){let l=o[s],c=-l.shift-r-l.box.depth;r+=c,i.push(c-(e.box.height+e.box.depth)),i.push(l),e=l}return[i,a]}if("top"in n){let o=n.top;for(let e of n.children)o-="number"==typeof e?e:e.box.height+e.box.depth;return[n.children,o]}if("bottom"in n)return[n.children,-n.bottom];if("firstBaseline"in n){let o=n.firstBaseline[0];if("number"==typeof o)throw new Error("First child must be an element.");return[n.firstBaseline,-o.box.depth]}if("shift"in n){let o=n.children[0];if("number"==typeof o)throw new Error("First child must be an element.");return[n.children,-o.box.depth-n.shift]}return[null,0]}(n);if(!e)return[[],0,0];let a=0;for(let b of e)if("number"!=typeof b){let T=b.box;a=Math.max(a,T.maxFontSize,T.height)}a+=2;let r=new Be(null,{classes:"pstrut"});r.setStyle("height",a,"em");let s=[],l=i,c=i,d=i;for(let b of e){if("number"==typeof b)d+=b;else{let T=b.box,P=null!=(o=b.classes)?o:[],U=new Be([r,T],{classes:P.join(" "),style:b.style});U.setStyle("top",-a-d-T.depth,"em"),b.marginLeft&&U.setStyle("margin-left",b.marginLeft,"em"),b.marginRight&&U.setStyle("margin-right",b.marginRight,"em"),s.push(U),d+=T.height+T.depth}l=Math.min(l,d),c=Math.max(c,d)}let h=new Be(s,{classes:"vlist"});if(h.setStyle("height",c,"em"),l>=0)return[[new Be(h,{classes:"vlist-r"})],c,-l];let _=new Be(new Be(null),{classes:"vlist"});_.setStyle("height",-l,"em");let x=new Be(8203,{classes:"vlist-s",maxFontSize:0,height:0,depth:0});return[[new Be([h,x],{classes:"vlist-r"}),new Be(_,{classes:"vlist-r"})],c,-l]}(n);super(1===i.length?i[0]:i,{classes:(null!=(e=o?.classes)?e:"")+" vlist-t"+(2===i.length?" vlist-t2":""),height:a,depth:r,type:o?.type})}},px=8205,YJ=[[px,1],[65038,2],[127995,5],[129456,4],[917536,96]],U5=[127462,127487];function B5(n){var o;if(void 0===_x){_x={};for(let e of YJ)for(let i=e[0];i<=e[0]+e[1]-1;i++)_x[i]=!0}return null!=(o=_x[n])&&o}function KJ(n){return n>=U5[0]&&n<=U5[1]}function z5(n){if(/^[\u0020-\u00FF]*$/.test(n))return n;let o=[],e=function $J(n){let o=[];for(let e=0;e<n.length;e++){let i=n.charCodeAt(e);if(13===i&&10===n.charCodeAt(e+1)&&(i=10,e++),(13===i||12===i)&&(i=10),0===i&&(i=65533),i>=55296&&i<=56319){let a=n.charCodeAt(e+1);a>=56320&&a<=57343&&(i=65536+1024*(i-55296)+(a-56320),e++)}o.push(i)}return o}(n),i=0;for(;i<e.length;){let a=e[i++],r=e[i];if(r===px){let s=i-1;for(i+=2;e[i]===px;)i+=2;o.push(String.fromCodePoint(...e.slice(s,i-s+1)))}else if(B5(r)){let s=i-1;for(;B5(e[i]);)i+=e[i]===px?2:1;o.push(String.fromCodePoint(...e.slice(s,2*i-s-1)))}else KJ(a)?(i+=1,o.push(String.fromCodePoint(...e.slice(i-2,2)))):o.push(String.fromCodePoint(a))}return o}var WJ=class{constructor(n){this.s=z5(n),this.pos=0,this.obeyspaces=!1}end(){return this.pos>=this.s.length}get(){return this.pos<this.s.length?this.s[this.pos++]:""}peek(){return this.s[this.pos]}match(n){let o=n.exec("string"==typeof this.s?this.s.slice(this.pos):this.s.slice(this.pos).join(""));return null!=o&&o[0]?(this.pos+=o[0].length,o[0]):""}next(){if(this.end())return null;if(!this.obeyspaces&&this.match(/^[ \f\n\r\t\v\u00A0\u2028\u2029]+/)||this.obeyspaces&&this.match(/^[ \f\n\r\t\v\u00A0\u2028\u2029]/))return"<space>";let n=this.get();if("\\"===n){if(!this.end()){let o=this.match(/^[a-zA-Z\*]+/);if(o)this.match(/^[ \f\n\r\t\v\u00A0\u2028\u2029]*/);else if(o=this.get()," "===o)return"<space>";return"\\"+o}}else{if("{"===n)return"<{>";if("}"===n)return"<}>";if("^"===n){if("^"===this.peek()){this.get();let o=this.match(/^(\^(\^(\^(\^[\da-f])?[\da-f])?[\da-f])?[\da-f])?[\da-f]{2}/);if(o)return String.fromCodePoint(Number.parseInt(o.slice(o.lastIndexOf("^")+1),16))}return n}if("#"===n){if(!this.end()){let o=!1;return/[\d?@]/.test(this.peek())&&(o=!0,this.pos+1<this.s.length)&&(o=/[^\dA-Za-z]/.test(this.s[this.pos+1])),o?"#"+this.get():"#"}}else if("$"===n)return"$"===this.peek()?(this.get(),"<$$>"):"<$>"}return n}};function VJ(n,o){var e,i,a,r;let s=[],l=n.next();if(l&&"\\relax"!==l)if("\\noexpand"===l)l=n.next(),l&&s.push(l);else if("\\obeyspaces"===l)n.obeyspaces=!0;else if("\\space"===l||"~"===l)s.push("<space>");else if("\\bgroup"===l)s.push("<{>");else if("\\egroup"===l)s.push("<}>");else if("\\string"===l){if(l=n.next(),l)if(l.startsWith("\\"))for(let c of l)s.push("\\"===c?"\\backslash":c);else"<{>"===l?s.push("\\{"):"<space>"===l?s.push("~"):"<}>"===l&&s.push("\\}")}else if("\\csname"===l){for(;"<space>"===n.peek();)n.next();let c="",d=!1,h=[];do{if(0===h.length)if(/^#[\d?@]$/.test(n.peek())){let _=n.get().slice(1);h=Np(null!=(i=null!=(e=o?.(_))?e:o?.("?"))?i:"\\placeholder{}",o),l=h[0]}else l=n.next(),h=l?[l]:[];d=0===h.length,!d&&"\\endcsname"===l&&(d=!0,h.shift()),d||(d="<$>"===l||"<$$>"===l||"<{>"===l||"<}>"===l||"string"==typeof l&&l.length>1&&l.startsWith("\\")),d||(c+=h.shift())}while(!d);c&&s.push("\\"+c),s.push(...h)}else if("\\endcsname"!==l)if(l.length>1&&l.startsWith("#")){let c=l.slice(1);s.push(...Np(null!=(r=null!=(a=o?.(c))?a:o?.("?"))?r:"\\placeholder{}",o))}else s.push(l);return s}function Np(n,o=null){let e=[],i="";for(let s of n.toString().split(/\r?\n/)){i&&e.push(i),i=" ";let l=s.match(/((?:\\%)|[^%])*/);null!==l&&e.push(l[0])}let a=new WJ(e.join("")),r=[];do{r.push(...VJ(a,o))}while(!a.end());return r}function Fo(n){let o="",e=[];for(let i of n)i&&(/[a-zA-Z\*]/.test(i[0])&&e.push(o),e.push(i),/\\[a-zA-Z]+\*?[\"\'][^\ ]+$/.test(i)&&e.push(" "),o=/\\[a-zA-Z]+\*?$/.test(i)?" ":"");return e.join("")}function sg(n){return Fo(n.map(o=>{var e;return null!=(e={"<space>":" ","<$$>":"$$","<$>":"$","<{>":"{","<}>":"}"}[o])?e:o}))}var tH=class extends Be{constructor(n,o,e){super(null,e),this.mathfield=o,this.htmlData=`placeholder-id="${n}" `;let i=function XJ(n){return Id(Pp(n.model.root.render(new ni({registers:n.registers},{fontSize:Fm,letterShapeStyle:n.options.letterShapeStyle},"inline-math"===n.options.defaultMode?"textstyle":"displaystyle")),n.options.horizontalSpacingScale),{classes:"ML__mathlive",attributes:{translate:"no","aria-hidden":"true"}})}(o._mathfield);this.height=i.height,this.depth=i.depth}toMarkup(){let n=[],o=this.classes.split(" "),e=1===o.length?o[0]:o.filter((a,r,s)=>a.length>0&&s.indexOf(a)===r).join(" ");if(this.cssId&&n.push(`id="${this.cssId.replace(/ /g,"-")}"`),this.htmlData){let a=this.htmlData.split(",");for(let r of a){let s=r.match(/([^=]+)=(.+$)/);if(s){let l=s[1].trim().replace(/ /g,"-");l&&n.push(`data-${l}=${s[2]}`)}else{let l=r.trim().replace(/ /g,"-");l&&n.push(`data-${l}`)}}}if(this.htmlStyle){let a=this.htmlStyle.split(";"),r="";for(let s of a){let l=s.match(/([^=]+):(.+$)/);if(l){let c=l[1].trim().replace(/ /g,"-");c&&(r+=`${c}:${l[2]};`)}}r&&n.push(`style="${r}"`)}this.attributes&&n.push(...Object.keys(this.attributes).map(a=>`${a}="${this.attributes[a]}"`)),e.length>0&&n.push(`class="${e}"`);let i=this.mathfield;return n.push(`style="display:inline-block; width:${i.clientWidth}px; height:${i.clientHeight}px;" `),`<span ${n.join(" ")}></span>`}},Rm=["above","body","below","superscript","subscript"];function Um(n){return"string"==typeof n&&Rm.includes(n)}function fx(n){return void 0!==n&&Array.isArray(n)&&2===n.length}var Gl=class{constructor(n,o,e){var i,a,r,s,l,c;this.id=void 0,this.verbatimLatex=void 0,this._isDirty=!1,this._changeCounter=0,this.subsupPlacement=void 0,this.explicitSubsupPlacement=!1,this.skipBoundary=!1,this.captureSelection=!1,this.type=n,this.context=o,"string"==typeof e?.value&&(this.value=e.value),this.command=null!=(a=null!=(i=e?.command)?i:this.value)?a:"",this.mode=null!=(r=e?.mode)?r:"math",this.isFunction=null!=(s=e?.isFunction)&&s,this.subsupPlacement=e?.limits,this.style=null!=(l=e?.style)?l:{},this.displayContainsHighlight=null!=(c=e?.displayContainsHighlight)&&c,null!=e&&e.serialize&&(Gl.customSerializer[e.command]=e.serialize)}static createBox(n,o,e){var i,a,r;if(!o)return null;let s=function eH(n){let o,e=[],i=[];for(let a of n)if(o||a.style){let r=a.computedStyle;o&&r.color===o.color&&r.backgroundColor===o.backgroundColor&&r.fontSize===o.fontSize?i.push(a):(i.length>0&&e.push(i),i=[a],o=r)}else i.push(a);return i.length>0&&e.push(i),e}(o);if(1===s.length){let d=s[0];return k4(n,d,d[0].style?ei(Ee({},e),{style:{color:d[0].style.color,backgroundColor:d[0].style.backgroundColor,fontSize:d[0].style.fontSize}}):e)}let l=[],c=e?.newList;for(let d of s){let _=k4(new ni(n,{color:null==(i=d[0].style)?void 0:i.color,backgroundColor:null==(a=d[0].style)?void 0:a.backgroundColor,fontSize:null==(r=d[0].style)?void 0:r.fontSize}),d,{newList:c});_&&(c=!1,l.push(_))}return 0===l.length?null:1!==l.length||null!=e&&e.classes||null!=e&&e.type?new Be(l,{classes:e?.classes,type:e?.type,newList:e?.newList}).wrap(n):l[0].wrap(n)}static serialize(n,o){return qa(n)?Zp(n,o):"number"==typeof n||"boolean"==typeof n?n.toString():"string"==typeof n?n.replace(/\s/g,"~"):void 0===n?"":o.expandMacro||"string"!=typeof n.verbatimLatex?n.command&&Gl.customSerializer[n.command]?Gl.customSerializer[n.command](n,o):n.serialize(o):n.verbatimLatex}static commonAncestor(n,o){if(n===o||n.parent===o.parent)return n.parent;let e=new WeakSet,{parent:i}=n;for(;i;)e.add(i),i=i.parent;for(i=o.parent;i;){if(e.has(i))return i;i=i.parent}}static fromJson(n,o){let e=new Gl(n.type,o,n);for(let i of Rm)n[i]&&e.setChildren(n[i],i);return e}toJson(){let n={type:this.type};if("math"!==this.mode&&(n.mode=this.mode),this.command&&this.command!==this.value&&(n.command=this.command),void 0!==this.value&&(n.value=this.value),this.style&&Object.keys(this.style).length>0&&(n.style=Ee({},this.style)),void 0!==this.verbatimLatex&&(n.verbatimLatex=this.verbatimLatex),this.subsupPlacement&&(n.subsupPlacement=this.subsupPlacement),this.explicitSubsupPlacement&&(n.explicitSubsupPlacement=!0),this.isFunction&&(n.isFunction=!0),this.displayContainsHighlight&&(n.displayContainsHighlight=!0),this.isExtensibleSymbol&&(n.isExtensibleSymbol=!0),this.skipBoundary&&(n.skipBoundary=!0),this.captureSelection&&(n.captureSelection=!0),this._branches)for(let o of Object.keys(this._branches))this._branches[o]&&(n[o]=this._branches[o].filter(e=>"first"!==e.type).map(e=>e.toJson()));return n}get changeCounter(){return this._changeCounter}get isDirty(){return this._isDirty}set isDirty(n){if(this._isDirty=n,n){this._changeCounter++,this.verbatimLatex=void 0,this._children=void 0;let{parent:o}=this;for(;o;)o._isDirty=!0,o._changeCounter++,o.verbatimLatex=void 0,o._children=void 0,o=o.parent}}serialize(n){var o;return this.body&&this.command?Fo([this.command,"{",this.bodyToLatex(n),"}",this.supsubToLatex(n)]):this.body?Fo([this.bodyToLatex(n),this.supsubToLatex(n)]):this.value&&"\u200b"!==this.value?null!=(o=this.command)?o:function SJ(n,o){var e;if("text"===n)return null!=(e=sx(n,o.codePointAt(0)))?e:o;let i;if(i=sx(n,o.codePointAt(0)),i)return i;let r=function kJ(n){var o;if((n<119808||n>120831)&&(n<8448||n>8527))return{char:String.fromCodePoint(n)};for(let e in p4)if(p4[e]===n){n=null!=(o=e.codePointAt(0))?o:0;break}for(let e of P5)if(n>=e.start&&n<e.start+e.len)return{char:String.fromCodePoint(n-e.start+e.offset),variant:e.variant,style:e.style};return{char:String.fromCodePoint(n)}}(o.codePointAt(0));return r.style||r.variant?(i=r.char,r.variant&&(i="\\"+r.variant+"{"+i+"}"),"bold"===r.style?i="\\mathbf{"+i+"}":"italic"===r.style?i="\\mathit{"+i+"}":"bolditalic"===r.style&&(i="\\mathbfit{"+i+"}"),"\\mathord{"+i+"}"):""}(this.mode,this.value):""}bodyToLatex(n){return Zp(this.body,n)}aboveToLatex(n){return Zp(this.above,n)}belowToLatex(n){return Zp(this.below,n)}supsubToLatex(n){let o="";if(void 0!==this.branch("subscript")){let e=Zp(this.subscript,n);o+=0===e.length?"_{}":1===e.length?"_"+e:`_{${e}}`}if(void 0!==this.branch("superscript")){let e=Zp(this.superscript,n);o+=0===e.length?"^{}":1===e.length?"\u2032"===e?"^\\prime ":"\u2033"===e?"^\\doubleprime ":"^"+e:`^{${e}}`}return o}get treeDepth(){let n=1,o=this.parent;for(;o;)o=o.parent,n+=1;return n}get inCaptureSelection(){let n=!1,o=this;for(;o;){if(o.captureSelection){n=!0;break}o=o.parent}return n}branch(n){if(Um(n)&&this._branches)return this._branches[n]}get branches(){if(!this._branches)return[];let n=[];for(let o of Rm)this._branches[o]&&n.push(o);return n}createBranch(n){return Um(n),Um(n)?(this._branches?this._branches[n]||(this._branches[n]=[this.makeFirstAtom(n)]):this._branches={[n]:[this.makeFirstAtom(n)]},this.isDirty=!0,this._branches[n]):[]}get row(){return fx(this.treeBranch)?this.treeBranch[0]:-1}get col(){return fx(this.treeBranch)?this.treeBranch[1]:-1}get body(){var n;return null==(n=this._branches)?void 0:n.body}set body(n){this.setChildren(n,"body")}get superscript(){var n;return null==(n=this._branches)?void 0:n.superscript}set superscript(n){this.setChildren(n,"superscript")}get subscript(){var n;return null==(n=this._branches)?void 0:n.subscript}set subscript(n){this.setChildren(n,"subscript")}get above(){var n;return null==(n=this._branches)?void 0:n.above}set above(n){this.setChildren(n,"above")}get below(){var n;return null==(n=this._branches)?void 0:n.below}set below(n){this.setChildren(n,"below")}get computedStyle(){var n;if(!this.parent)return Ee({},null!=(n=this.style)?n:{});let o=void 0!==this.style.verbatimColor,e=void 0!==this.style.verbatimBackgroundColor,i=Ee(Ee({},this.parent.computedStyle),this.style);return delete i.variant,delete i.variantStyle,e||delete i.verbatimBackgroundColor,o||delete i.verbatimColor,i}applyStyle(n){this.isDirty=!0,this.style=Ee(Ee({},this.style),n),"none"===this.style.fontFamily&&delete this.style.fontFamily,"auto"===this.style.fontShape&&delete this.style.fontShape,"auto"===this.style.fontSeries&&delete this.style.fontSeries,"none"===this.style.color&&(delete this.style.color,delete this.style.verbatimColor),"none"===this.style.backgroundColor&&(delete this.style.backgroundColor,delete this.style.verbatimBackgroundColor),"auto"===this.style.fontSize&&delete this.style.fontSize;for(let o of this.children)o.applyStyle(n)}getInitialBaseElement(){let o;return this.hasEmptyBranch("body")||(o=this.body[1].getInitialBaseElement()),o??this}getFinalBaseElement(){return this.hasEmptyBranch("body")?this:this.body[this.body.length-1].getFinalBaseElement()}isCharacterBox(){if("leftright"===this.type)return!1;let n=this.getInitialBaseElement();return/mord/.test(n.type)}hasEmptyBranch(n){let o=this.branch(n);return!o||1===o.length}setChildren(n,o){if(!n||(Um(o),!Um(o)))return;let i=[this.makeFirstAtom(o),...n];this._branches?this._branches[o]=i:this._branches={[o]:i};for(let a of n)a.parent=this,a.treeBranch=o;this.isDirty=!0}makeFirstAtom(n){let o=new Gl("first",this.context,{mode:this.mode});return o.parent=this,o.treeBranch=n,o}addChild(n,o){this.createBranch(o).push(n),this.isDirty=!0,n.parent=this,n.treeBranch=o}addChildBefore(n,o){let e=this.createBranch(o.treeBranch);e.splice(e.indexOf(o),0,n),this.isDirty=!0,n.parent=this,n.treeBranch=o.treeBranch}addChildAfter(n,o){let e=this.createBranch(o.treeBranch);e.splice(e.indexOf(o)+1,0,n),this.isDirty=!0,n.parent=this,n.treeBranch=o.treeBranch}addChildren(n,o){for(let e of n)this.addChild(e,o)}addChildrenAfter(n,o){let e=this.createBranch(o.treeBranch);e.splice(e.indexOf(o)+1,0,...n),this.isDirty=!0;for(let i of n)i.parent=this,i.treeBranch=o.treeBranch;return n[n.length-1]}removeBranch(n){let o=this.branch(n);if(Um(n)&&(this._branches[n]=void 0),!o)return[];for(let e of o)e.parent=void 0,e.treeBranch=void 0;return o.shift(),this.isDirty=!0,o}removeChild(n){if("first"===n.type)return;let o=this.branch(n.treeBranch),e=o.indexOf(n);o.splice(e,1),this.isDirty=!0,n.parent=void 0,n.treeBranch=void 0}get siblings(){return"root"===this.type?[]:this.parent.branch(this.treeBranch)}get firstSibling(){return this.siblings[0]}get lastSibling(){let{siblings:n}=this;return n[n.length-1]}get isFirstSibling(){return this===this.firstSibling}get isLastSibling(){return this===this.lastSibling}get hasNoSiblings(){return 1===this.siblings.length}get leftSibling(){let n=this.parent.branch(this.treeBranch);return n[n.indexOf(this)-1]}get rightSibling(){let n=this.parent.branch(this.treeBranch);return n[n.indexOf(this)+1]}get hasChildren(){return!!(this._branches&&this.children.length>0)}get firstChild(){return this.children[0]}get lastChild(){let{children:n}=this;return n[n.length-1]}get children(){if(this._children)return this._children;if(!this._branches)return[];let n=[];for(let o of Rm)if(this._branches[o])for(let e of this._branches[o])n.push(...e.children),n.push(e);return this._children=n,n}render(n,o){if("first"===this.type&&!n.atomIdsSettings)return null;let e=new ni(n,this.style),i="";"root"===this.type&&(i+=" ML__base"),this.isSelected&&(i+=" ML__selected");let a=this.createBox(e,{classes:i,newList:!0===o?.newList||"first"===this.type});return a?(!this.subsupPlacement&&(this.superscript||this.subscript)&&(a=this.attachSupsub(e,{base:a})),a.wrap(e)):null}attachSupsub(n,o){var e,i;let a=o.base,r=this.superscript,s=this.subscript;if(!r&&!s)return a;let l=null,c=null,d=null!=(e=o.isCharacterBox)?e:this.isCharacterBox(),h=0;if(r){let U=new ni(n,void 0,"superscript");l=Gl.createBox(U,r,{newList:!0}),d||(h=a.height-n.metrics.supDrop*U.scalingFactor)}let x,_=0;if(s){let U=new ni(n,void 0,"subscript");c=Gl.createBox(U,s,{newList:!0}),d||(_=a.depth+n.metrics.subDrop*U.scalingFactor)}x=n.isDisplayStyle?n.metrics.sup1:n.isCramped?n.metrics.sup3:n.metrics.sup2;let b=.05/n.scalingFactor,T=null;if(c&&l){h=Math.max(h,x,l.depth+.25*n.metrics.xHeight),_=Math.max(_,n.metrics.sub2);let U=n.metrics.defaultRuleThickness;if(h-l.depth-(c.height-_)<4*U){_=4*U-(h-l.depth)+c.height;let B=.8*n.metrics.xHeight-(h-l.depth);B>0&&(h+=B,_-=B)}T=new ma({individualShift:[{box:c,shift:_,marginLeft:this.isExtensibleSymbol&&a.italic?-a.italic:0},{box:l,shift:-h}]}).wrap(n)}else c&&!l?(_=Math.max(_,n.metrics.sub1,c.height-.3448),T=new ma({shift:_,children:[{box:c,marginRight:b,marginLeft:this.isCharacterBox()?-(null!=(i=a.italic)?i:0):0}]})):!c&&l&&(h=Math.max(h,x,l.depth+.10775),T=new ma({shift:-h,children:[{box:l,marginRight:b}]}),T.wrap(n));let P=new Be(T,{classes:"msubsup"+(this.isSelected?" ML__selected":"")});return this.caret&&(P.caret=this.caret),new Be([a,P],{type:o.type})}attachLimits(n,o){var e;let i=this.superscript?Gl.createBox(new ni(n,this.style,"superscript"),this.superscript,{newList:!0}):null,a=this.subscript?Gl.createBox(new ni(n,this.style,"subscript"),this.subscript,{newList:!0}):null;return i||a?function GJ(n,o){var e,i,a,r,s;let l=n.metrics,c=new Be(o.base),d=null!=(e=o.baseShift)?e:0,h=null!=(i=o.slant)?i:0,_=0,x=0;o.above&&(_=null!=(a=o.aboveShift)?a:Math.max(l.bigOpSpacing1,l.bigOpSpacing3-o.above.depth)),o.below&&(x=null!=(r=o.belowShift)?r:Math.max(l.bigOpSpacing2,l.bigOpSpacing4-o.below.height));let b=null;return b=o.below&&o.above?new ma({bottom:l.bigOpSpacing5+o.below.height+o.below.depth+x+c.depth+d,children:[l.bigOpSpacing5,{box:o.below,marginLeft:-h,classes:["ML__center"]},x,{box:c,classes:["ML__center"]},_,{box:o.above,marginLeft:h,classes:["ML__center"]},l.bigOpSpacing5]}).wrap(n):o.below&&!o.above?new ma({top:c.height-d,children:[l.bigOpSpacing5,{box:o.below,marginLeft:-h,classes:["ML__center"]},x,{box:c,classes:["ML__center"]}]}).wrap(n):!o.below&&o.above?new ma({bottom:c.depth+d,children:[{box:c,classes:["ML__center"]},_,{box:o.above,marginLeft:h,classes:["ML__center"]},l.bigOpSpacing5]}).wrap(n):new ma({bottom:c.depth+d,children:[{box:c},l.bigOpSpacing5]}).wrap(n),new Be(b,{type:null!=(s=o.type)?s:"mop"})}(n,ei(Ee({},o),{above:i,below:a,type:null!=(e=o?.type)?e:"mop"})):o.base.wrap(n)}bind(n,o){if(!o||n.isPhantom||"\u200b"===this.value)return o;let e=this.parent;for(;e&&!e.captureSelection;)e=e.parent;return null!=e&&e.captureSelection||(this.id||(this.id=n.makeID()),o.atomID=this.id),o}createMathfieldBox(n,o,e){let a=new tH(e,o,{type:"mathfield",mode:this.mode,maxFontSize:n.scalingFactor,style:ei(Ee({variant:"normal"},this.style),{letterShapeStyle:n.letterShapeStyle,fontSize:Math.max(1,n.size+n.mathstyle.sizeDelta)}),classes:""});return n.isTight&&(a.isTight=!0),("math"!==this.mode||"main"===this.style.variant)&&(a.italic=0),a.right=a.italic,this.bind(n,a),Id(a,{type:"mord"})}createBox(n,o){var e,i,a;let r=null!=(e=this.value)?e:this.body,s=function FJ(n){return qJ.includes(n)}(this.type)?this.type:void 0,l=null!=(i=o?.classes)?i:"";"text"===this.mode&&(l+=" ML__text");let c="string"==typeof r||void 0===r?new Be(r??null,{type:s,mode:this.mode,maxFontSize:n.scalingFactor,style:ei(Ee({variant:"normal"},this.style),{letterShapeStyle:n.letterShapeStyle,fontSize:Math.max(1,n.size+n.mathstyle.sizeDelta)}),classes:l,newList:o?.newList}):null!=(a=Gl.createBox(n,r,{type:s,mode:this.mode,style:this.style,classes:l,newList:o?.newList}))?a:new Be(null);return n.isTight&&(c.isTight=!0),("math"!==this.mode||"main"===this.style.variant)&&(c.italic=0),c.right=c.italic,this.bind(n,c),this.caret&&!this.superscript&&!this.subscript&&(c.caret=this.caret),c}isDigit(){var n;return"mord"===this.type&&this.value?/^[\d,.]$/.test(this.value):"group"===this.type&&2===(null==(n=this.body)?void 0:n.length)&&"first"===this.body[0].type&&","===this.body[1].value}asDigit(){var n;return"mord"===this.type&&this.value&&/^[\d,.]$/.test(this.value)?this.value:"group"===this.type&&2===(null==(n=this.body)?void 0:n.length)&&"first"===this.body[0].type&&","===this.body[1].value?".":""}},ke=Gl;function Zp(n,o){if(!n||0===n.length)return"";if("first"===n[0].type){if(1===n.length)return"";n=n.slice(1)}return 0===n.length?"":Fo(fl(n,"cssClass").map(e=>Fo(fl(e,"color").map(i=>Fo(function jJ(n){let o=[],e=[],i="NONE";for(let a of n)"first"!==a.type&&(a.mode!==i?(e.length>0&&o.push(e),e=[a],i=a.mode):e.push(a));return e.length>0&&o.push(e),o}(i).map(a=>Md.serialize(a,o)))))))}function k4(n,o,e){var i,a,r,s,l;function c(T){return"text"===T.mode}if(!o||0===o.length)return null;let b,d=new ni(n,e?.style),h=!(null!=(i=d.atomIdsSettings)&&i.groupNumbers),_=[],x=null!=(a=e?.newList)&&a;if(1===o.length){let T=o[0],P=T.render(d,{newList:x});P&&(h&&T.isSelected&&P.selected(!0),_=[P])}else{let T="",P=!0;for(let U of o){null!=(r=d.atomIdsSettings)&&r.groupNumbers&&T&&(P&&U.isDigit()||!P&&c(U))&&(d.atomIdsSettings.overrideID=T);let q=U.render(d,{newList:x});d.atomIdsSettings&&(d.atomIdsSettings.overrideID=void 0),q&&(x="group"===U.type&&!U.boxType,null!=(s=d.atomIdsSettings)&&s.groupNumbers&&((U.isDigit()||c(U))&&(!T||P!==U.isDigit())&&(P=U.isDigit(),T=null!=(l=U.id)?l:""),T&&(!(U.isDigit()||c(U))||!U.hasEmptyBranch("superscript")||!U.hasEmptyBranch("subscript"))&&(T="")),h&&U.isSelected&&q.selected(!0),_.push(q))}}return 0===_.length?null:(e||d.isTight||_.length>1?(b=new Be(_,Ee({isTight:d.isTight},e??{})),b.isSelected=_.every(T=>T.isSelected)):b=_[0],b.wrap(d).wrap(n))}ke.customSerializer={};var lg=class extends ke{constructor(n,o,e,i){super("accent",e,{command:n,style:i.style}),i.accentChar?this.accent=i.accentChar:this.svgAccent=i?.svgAccent,this.body=o,this.skipBoundary=!0}static fromJson(n,o){return new lg(n.command,n.body,o,{accentChar:n.accentChar,svgAccent:n.svgAccent,style:n.style})}toJson(){return ei(Ee({},super.toJson()),{accentChar:this.accent,svgAccent:this.svgAccent})}render(n){var o;let e=new ni(n,this.style,"cramp"),i=null!=(o=ke.createBox(e,this.body))?o:new Be(null),a=0;!this.hasEmptyBranch("body")&&2===this.body.length&&this.body[1].isCharacterBox()&&(a=i.skew);let s,r=Math.min(i.height,qm);if(this.svgAccent)s=hx(this.svgAccent),r=e.metrics.bigOpSpacing1-r;else if(this.accent){let c=new Be(this.accent,{fontFamily:"Main-Regular"});c.italic=0;let d=8407===this.accent?" ML__accent-vec":"";s=new Be(new Be(c),{classes:"ML__accent-body"+d})}s=new ma({shift:0,children:[{box:new Be(i)},-r,{box:s,marginLeft:i.left+2*a,classes:["ML__center"]}]});let l=new Be(s,{newList:!0,type:"mord"});return this.caret&&(l.caret=this.caret),this.bind(e,l.wrap(e)),this.attachSupsub(e,{base:l})}},cg={"(":")","{":"}","[":"]","|":"|","\\lbrace":"\\rbrace","\\lparen":"\\rparen","\\{":"\\}","\\langle":"\\rangle","\\lfloor":"\\rfloor","\\lceil":"\\rceil","\\vert":"\\vert","\\lvert":"\\rvert","\\Vert":"\\Vert","\\lVert":"\\rVert","\\lbrack":"\\rbrack","\\ulcorner":"\\urcorner","\\llcorner":"\\lrcorner","\\lgroup":"\\rgroup","\\lmoustache":"\\rmoustache"},J5=Object.fromEntries(Object.entries(cg).map(([n,o])=>[o,n]));function gx(n){var o;return null!=(o={"[":91,"]":93,"(":40,")":41,"\\mid":8739,"|":8739,"\u2223":8739,"\u2225":8741,"\\|":8739,"\\{":123,"\\}":125,"\\lbrace":123,"\\rbrace":125,"\\lparen":40,"\\rparen":41,"\\lbrack":91,"\\rbrack":93,"\\vert":8739,"\\lvert":8739,"\\mvert":8739,"\\rvert":8739,"\\Vert":8741,"\\lVert":8741,"\\mVert":8741,"\\rVert":8741,"\\parallel":8741,"\\shortparallel":8741,"\\langle":10216,"\\rangle":10217,"\\lfloor":8970,"\\rfloor":8971,"\\lceil":8968,"\\rceil":8969,"\\ulcorner":9484,"\\urcorner":9488,"\\llcorner":9492,"\\lrcorner":9496,"\\lgroup":10222,"\\rgroup":10223,"\\lmoustache":9136,"\\rmoustache":9137,"\\surd":8730}[n])?o:n.codePointAt(0)}function H5(n,o,e,i,a){let r=new ni(i,a?.style,"textstyle"),s=new Be(gx(n),{fontFamily:"Size"+o+"-Regular",classes:"ML__delim-size"+o}).wrap(r);return e&&s.setTop((1-r.scalingFactor)*Hl),s}function G5(n,o,e,i,a){var r;let s,l,c,d;s=c=d=gx(n),l=null;let h="Size1-Regular";"\\vert"===n||"\\lvert"===n||"\\rvert"===n||"\\mvert"===n||"\\mid"===n?c=s=d=8739:"\\Vert"===n||"\\lVert"===n||"\\rVert"===n||"\\mVert"===n||"\\|"===n?c=s=d=8741:"\\uparrow"===n?c=d=9168:"\\Uparrow"===n?c=d=8214:"\\downarrow"===n?s=c=9168:"\\Downarrow"===n?s=c=8214:"\\updownarrow"===n?(s=8593,c=9168,d=8595):"\\Updownarrow"===n?(s=8657,c=8214,d=8659):"["===n||"\\lbrack"===n?(s=9121,c=9122,d=9123,h="Size4-Regular"):"]"===n||"\\rbrack"===n?(s=9124,c=9125,d=9126,h="Size4-Regular"):"\\lfloor"===n||"\u230a"===n?(c=s=9122,d=9123,h="Size4-Regular"):"\\lceil"===n||"\u2308"===n?(s=9121,c=d=9122,h="Size4-Regular"):"\\rfloor"===n||"\u230b"===n?(c=s=9125,d=9126,h="Size4-Regular"):"\\rceil"===n||"\u2309"===n?(s=9124,c=d=9125,h="Size4-Regular"):"("===n||"\\lparen"===n?(s=9115,c=9116,d=9117,h="Size4-Regular"):")"===n||"\\rparen"===n?(s=9118,c=9119,d=9120,h="Size4-Regular"):"\\{"===n||"\\lbrace"===n?(s=9127,l=9128,d=9129,c=9130,h="Size4-Regular"):"\\}"===n||"\\rbrace"===n?(s=9131,l=9132,d=9133,c=9130,h="Size4-Regular"):"\\lgroup"===n||"\u27ee"===n?(s=9127,d=9129,c=9130,h="Size4-Regular"):"\\rgroup"===n||"\u27ef"===n?(s=9131,d=9133,c=9130,h="Size4-Regular"):"\\lmoustache"===n||"\u23b0"===n?(s=9127,d=9133,c=9130,h="Size4-Regular"):"\\rmoustache"===n||"\u23b1"===n?(s=9131,d=9129,c=9130,h="Size4-Regular"):"\\surd"===n?(s=57345,d=9143,c=57344,h="Size4-Regular"):"\\ulcorner"===n?(s=9484,c=d=32):"\\urcorner"===n?(s=9488,c=d=32):"\\llcorner"===n?(d=9492,c=s=32):"\\lrcorner"===n&&(s=9496,c=s=32);let _=Qm(s,h),x=_.height+_.depth,b=Qm(c,h),T=b.height+b.depth,P=Qm(d,h),U=P.height+P.depth,q=0,B=1;if(null!==l){let Mt=Qm(l,h);q=Mt.height+Mt.depth,B=2}let W=x+U+q,G=Math.max(0,Math.ceil((o-W)/(B*T))),At=Hl;e&&(At*=i.scalingFactor);let ut=(W+G*B*T)/2-At,et=.008,vt=[];vt.push({box:new Be(d,{fontFamily:h})}),vt.push(-et);let Nt=new Be(c,{fontFamily:h});if(null===l)for(let Mt=0;Mt<G;Mt++)vt.push({box:Nt});else{for(let Mt=0;Mt<G;Mt++)vt.push({box:Nt});vt.push(-et),vt.push({box:new Be(l,{fontFamily:h})}),vt.push(-et);for(let Mt=0;Mt<G;Mt++)vt.push({box:Nt})}vt.push(-et),vt.push({box:new Be(s,{fontFamily:h})});let ot="";"Size1-Regular"===h?ot=" delim-size1":"Size4-Regular"===h&&(ot=" delim-size4");let _t=new ma({bottom:ut,children:vt},{classes:ot});return new Be(_t,ei(Ee({},a??{}),{classes:(null!=(r=a?.classes)?r:"")+" ML__delim-mult"}))}var $5=new Set(["(",")","\\lparen","\\rparen","[","]","\\lbrack","\\rbrack","\\{","\\}","\\lbrace","\\rbrace","\\lfloor","\\rfloor","\\lceil","\\rceil","\\surd","\u230a","\u230b","\u2308","\u2309"]),iH=new Set(["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\mvert","\\mid","\\lgroup","\\rgroup","\\lmoustache","\\rmoustache","\u27ee","\u27ef","\u23b0","\u23b1"]),Y5=new Set(["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"]),oH=[0,1.2,1.8,2.4,3],rH=[{type:"small",mathstyle:"scriptscriptstyle"},{type:"small",mathstyle:"scriptstyle"},{type:"small",mathstyle:"textstyle"},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],sH=[{type:"small",mathstyle:"scriptscriptstyle"},{type:"small",mathstyle:"scriptscriptstyle"},{type:"small",mathstyle:"textstyle"},{type:"stack"}],lH=[{type:"small",mathstyle:"scriptscriptstyle"},{type:"small",mathstyle:"scriptstyle"},{type:"small",mathstyle:"textstyle"},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}];function cH(n){return"small"===n.type?"Main-Regular":"large"===n.type?"Size"+n.size+"-Regular":"Size4-Regular"}function xx(n,o,e,i,a,r){var s;if(!o||0===o.length||"."===o)return Bm(a,n,n);let l;"<"===o||"\\lt"===o?o="\\langle":(">"===o||"\\gt"===o)&&(o="\\rangle"),l=Y5.has(o)?rH:$5.has(o)?lH:sH;let c=function uH(n,o,e,i){for(let r={"-4":0,"-3":1,0:2}[i.mathstyle.sizeDelta];r<e.length&&"stack"!==e[r].type;r++){let s=Qm(n,cH(e[r]));if(s.defaultMetrics)return{type:"small",mathstyle:"scriptstyle"};let l=s.height+s.depth;if("small"===e[r].type&&("scriptscriptstyle"===e[r].mathstyle?l*=x4[Math.max(1,i.size-2)]:"scriptstyle"===e[r].mathstyle&&(l*=x4[Math.max(1,i.size-1)])),l>o)return e[r]}return e[e.length-1]}(gx(o),e,l,a),d=new ni(a,r?.style,c.mathstyle);return"small"===c.type?function nH(n,o,e,i){let a=new Be(gx(n),{fontFamily:"Main-Regular"}).wrap(o,i);return e&&a.setTop((1-o.scalingFactor)*Hl),a}(o,d,i,{type:n,classes:"ML__small-delim "+(null!=(s=r?.classes)?s:"")}):"large"===c.type?H5(o,c.size,i,d,ei(Ee({},r),{type:n})):G5(o,e,i,d,ei(Ee({},r),{type:n}))}function ug(n,o,e,i,a,r){if("."===o)return Bm(a,n,r?.classes);let s=Hl*a.scalingFactor,d=Math.max(e-s,i+s);return xx(n,o,Math.max(d/500*901,2*d-.5),!0,a,r)}function Bm(n,o,e){let i=new ni(n,void 0,"textstyle");return new Be(null,{classes:" nulldelimiter "+(e??""),type:o}).wrap(i)}var js=class extends ke{constructor(n,o,e){var i,a,r,s;super("overunder",o,{command:n,serialize:e.serialize,style:e.style}),this.skipBoundary=null==(i=e.skipBoundary)||i,this.subsupPlacement=e.supsubPlacement,this.body=e.body,this.svgAbove=e.svgAbove,this.svgBelow=e.svgBelow,this.svgBody=e.svgBody,this.above=e.above,this.below=e.below,this.boxType=null!=(a=e.boxType)?a:"mord",this.paddedBody=null!=(r=e.paddedBody)&&r,this.paddedLabels=null!=(s=e.paddedLabels)&&s}static fromJson(n,o){return new js(n.command,o,n)}toJson(){let n={};return this.skipBoundary||(n.skipBoundary=!1),this.subsupPlacement&&(n.subsupPlacement=this.subsupPlacement),this.svgAbove&&(n.svgAbove=this.svgAbove),this.svgBelow&&(n.svgBelow=this.svgBelow),this.svgBody&&(n.svgBody=this.svgBody),"mord"!==this.boxType&&(n.boxType=this.boxType),this.paddedBody&&(n.paddedBody=!0),this.paddedLabels&&(n.paddedLabels=!0),Ee(Ee({},super.toJson()),n)}render(n){let o=this.svgBody?hx(this.svgBody):ke.createBox(n,this.body,{newList:!0}),e=new ni(n,this.style,"scriptstyle"),i=null;this.svgAbove?i=hx(this.svgAbove):this.above&&(i=ke.createBox(e,this.above,{newList:!0}));let a=null;this.svgBelow?a=hx(this.svgBelow):this.below&&(a=ke.createBox(e,this.below,{newList:!0})),this.paddedBody&&(o=new Be([Bm(n,"mopen"),o,Bm(n,"mclose")],{newList:!0}));let r=function dH(n,o){if(!o.base)return null;if(!o.above&&!o.below){let l=new Be(o.base,{type:o.type});return l.setStyle("position","relative"),l}let e=0;o.above&&(e=-o.above.depth+n.metrics.bigOpSpacing2);let i=null,a=o.base,s=["ML__center"];return o.paddedAboveBelow&&s.push("ML__label_padding"),o.below&&o.above?i=new ma({bottom:n.metrics.bigOpSpacing5+o.below.height+o.below.depth+a.depth+0,children:[n.metrics.bigOpSpacing5,{box:o.below,classes:s},{box:a,classes:["ML__center"]},e,{box:o.above,classes:s},n.metrics.bigOpSpacing5]}):o.below?i=new ma({top:a.height-0,children:[n.metrics.bigOpSpacing5,{box:o.below,classes:s},{box:a,classes:["ML__center"]}]}):o.above&&(i=new ma({bottom:a.depth+0,children:[{box:a,classes:["ML__center"]},e,{box:o.above,classes:s},n.metrics.bigOpSpacing5]})),new Be(i,{type:o.type})}(n,{base:o,above:i,below:a,type:"mbin"===this.boxType||"mrel"===this.boxType?this.boxType:"mord",paddedAboveBelow:this.paddedLabels});return r?(r="over-under"===this.subsupPlacement?this.attachLimits(n,{base:r,type:r.type}):this.attachSupsub(n,{base:r}),this.caret&&(r.caret=this.caret),this.bind(n,r)):null}},Fa=class extends ke{constructor(n,o,e){var i,r,s;super("group",o,{command:e?.command,mode:null!=(i=e?.mode)?i:"math",serialize:e?.serialize,style:e?.style}),this.body=n,this.mathstyleName=e?.mathstyleName,this.latexOpen=e?.latexOpen,this.latexClose=e?.latexClose,this.cssId=e?.cssId,this.htmlData=e?.htmlData,this.htmlStyle=e?.htmlStyle,this.customClass=e?.customClass,this.boxType=e?.boxType,this.skipBoundary=!0,this.captureSelection=null!=(r=e?.captureSelection)&&r,this.changeMode=null!=(s=e?.changeMode)&&s,this.displayContainsHighlight=!1,n&&1===n.length&&","===n[0].command&&(this.captureSelection=!0)}static fromJson(n,o){return new Fa(n.body,o,n)}toJson(){let n={};return this.mathstyleName&&(n.mathstyleName=this.mathstyleName),this.latexOpen&&(n.latexOpen=this.latexOpen),this.latexClose&&(n.latexClose=this.latexClose),this.cssId&&(n.cssId=this.cssId),this.htmlData&&(n.htmlData=this.htmlData),this.htmlStyle&&(n.htmlStyle=this.htmlStyle),this.customClass&&(n.customClass=this.customClass),this.boxType&&(n.boxType=this.boxType),this.captureSelection&&(n.captureSelection=!0),this.changeMode&&(n.changeMode=!0),Ee(Ee({},super.toJson()),n)}render(n){let o=new ni(n,this.style,this.mathstyleName),e=ke.createBox(o,this.body,{type:this.boxType,classes:this.customClass,mode:this.mode,style:{backgroundColor:this.style.backgroundColor},newList:!this.boxType});return e?(this.cssId&&(e.cssId=this.cssId),this.htmlData&&(e.htmlData=this.htmlData),this.htmlStyle&&(e.htmlStyle=this.htmlStyle),this.caret&&(e.caret=this.caret),this.bind(n,e)):null}serialize(n){let o=this.bodyToLatex(n);return"string"==typeof this.latexOpen&&(o=this.latexOpen+o+this.latexClose),this.htmlData&&(o=`\\htmlData{${this.htmlData}}{${o}}`),this.htmlStyle&&(o=`\\htmlStyle{${this.htmlStyle}}{${o}}`),this.customClass&&(o=`\\class{${this.customClass}}{${o}}`),this.cssId&&(o=`\\cssId{${this.cssId}}{${o}}`),o}},zm=class extends ke{constructor(n,o,e,i){super("spacing",e,{command:n,style:o}),this.width=i}static fromJson(n,o){return new zm(n.command,n.style,o,n.width)}toJson(){let n={};return this.width&&(n.width=this.width),Ee(Ee({},super.toJson()),n)}render(n){var o;let e;if(this.width)e=new Be(null,{classes:"mspace"}),e.left=function NJ(n){return Qc(n.glue)}(this.width);else{let i=null!=(o={"\\qquad":"qquad","\\quad":"quad","\\enspace":"enspace","\\;":"thickspace","\\:":"mediumspace","\\,":"thinspace","\\!":"negativethinspace"}[this.command])?o:"mediumspace";e=new Be(null,{classes:i})}return e=this.bind(n,e),this.caret&&(e.caret=this.caret),e}serialize(n){var o;let e=null!=(o=this.command)?o:"";return"\\hspace"===this.command||"\\hspace*"===this.command?Number.isFinite(this.width)?e+=`{${this.width}em'}`:e+="{0pt}":Number.isFinite(this.width)&&(e+=` ${this.width}em`),e}},ur=class extends ke{constructor(n,o,e,i){super("leftright",e,{style:i.style,displayContainsHighlight:!0}),this.variant=n,this.body=o,this.leftDelim=i.leftDelim,this.rightDelim=i.rightDelim}static fromJson(n,o){var e;return new ur(null!=(e=n.variant)?e:"",n.body,o,n)}toJson(){let n=super.toJson();return this.variant&&(n.variant=this.variant),this.leftDelim&&(n.leftDelim=this.leftDelim),this.rightDelim&&(n.rightDelim=this.rightDelim),n}serialize(n){var o,e;let i=this.matchingRightDelim();return Fo("left...right"===this.variant?["\\left"+(null!=(o=this.leftDelim)?o:"."),this.bodyToLatex(n),"\\right"+i]:"mleft...mright"===this.variant?["\\mleft"+(null!=(e=this.leftDelim)?e:"."),this.bodyToLatex(n),"\\mright"+i]:[this.leftDelim&&"."!==this.leftDelim?this.leftDelim:"",this.bodyToLatex(n),i])}matchingRightDelim(){var n,o;if(this.rightDelim&&"?"!==this.rightDelim)return this.rightDelim;let e=null!=(n=this.leftDelim)?n:".";return null!=(o=cg[e])?o:e}render(n){var o,e,i;let a=new ni(n,this.style),r=new ni(n,this.style,"textstyle"),s=null!=(o=ke.createBox(a,this.body,{newList:!0}))?o:new Be(null,{newList:!0}),l=s.height/r.scalingFactor,c=s.depth/r.scalingFactor,d=[];if(this.leftDelim&&d.push(this.bind(r,ug("mopen",this.leftDelim,l,c,r,{classes:"ML__open"+(this.containsCaret?" ML__contains-caret":""),mode:this.mode,style:this.style}))),s){if(s.children)for(let x=0;x<s.children.length;x++){let b=s.children[x];if(b.delim){let T=b.caret;s.children[x]=this.bind(a,ug("minner",b.delim,l,c,a)),s.children[x].caret=T}}d.push(s)}if(this.rightDelim){let x=this.containsCaret?" ML__contains-caret":"",b=this.rightDelim;"?"===b&&(this.context.smartFence?(b=this.matchingRightDelim(),x+=" ML__smart-fence__close"):b="."),d.push(this.bind(r,ug("mclose",b,l,c,r,{classes:x+" ML__close",mode:this.mode,style:this.style})))}let h=null!=(i="mleft...mright"===this.variant||(null==(e=this.leftSibling)?void 0:e.isFunction))&&i,_=new Be(d,{type:h?"mclose":"minner",classes:"left-right"});return this.caret&&(_.caret=this.caret),this.bind(a,_.wrap(a))}},dg=class extends ke{constructor(n,o){super("msubsup",n,{style:o?.style})}static fromJson(n,o){let e=new dg(o,n);for(let i of Rm)n[i]&&e.setChildren(n[i],i);return e}toJson(){return super.toJson()}render(n){var o;let e=this.leftSibling,i=new ni(n,{isPhantom:!0}),a=null!=(o=e.render(i))?o:new Be(null),r=new Be(null,{height:a.height,depth:a.depth});return this.attachSupsub(n,{base:r,isCharacterBox:e.isCharacterBox(),type:"supsub"})}serialize(n){return this.supsubToLatex(n)}},$o=class extends ke{constructor(n,o){var e;let i=o?.value||n.placeholderSymbol;super("placeholder",n,{mode:null!=(e=o?.mode)?e:"math",style:o?.style,value:i,command:"\\placeholder"}),this.captureSelection=!0,this.placeholderId=o?.placeholderId,null!=o&&o.default&&(this.defaultValue=o?.default)}static fromJson(n,o){return new $o(o,n)}toJson(){let n=super.toJson();return this.placeholderId&&(n.placeholderId=this.placeholderId),this.value===this.context.placeholderSymbol&&delete n.value,this.defaultValue&&(n.defaultValue=this.defaultValue.map(o=>o.toJson())),n}render(n){if("function"==typeof n.renderPlaceholder)return n.renderPlaceholder(n,this);let o="";return this.caret&&(o+="ML__placeholder-selected "),this.isSelected&&(o+=" ML__selected "),this.createBox(n,{classes:o})}serialize(n){var o;let e=null!=(o=this.value)?o:"";return e===this.context.placeholderSymbol&&(e=""),`\\placeholder${this.placeholderId?`[${this.placeholderId}]`:""}${this.defaultValue?`[${ke.serialize(this.defaultValue,n)}]`:""}{${e}}`}},A4=class extends ke{constructor(n,o){super("error",o,{value:n,command:n,mode:"math"}),this.verbatimLatex=n}static fromJson(n,o){return new A4(n.command,o)}toJson(){return super.toJson()}render(n){let o=this.createBox(n,{classes:"ML__error"});return this.caret&&(o.caret=this.caret),o}},S4=class extends ke{constructor(n,o,e){var i,a;super("macro",o,{command:n}),this.body=e.body,this.captureSelection=void 0===e.captureSelection?!e.args:e.captureSelection,this.macroArgs=null!=(i=e.args)?i:"",this.expand=null!=(a=e.expand)&&a}static fromJson(n,o){return new S4(n.command,o,n)}toJson(){let n=super.toJson();return this.expand&&(n.expand=!0),void 0!==this.captureSelection&&(n.captureSelection=this.captureSelection),this.macroArgs&&(n.args=this.macroArgs),n}serialize(n){return n.expandMacro&&this.expand?this.bodyToLatex(n):this.command+this.macroArgs}render(n){let o=ke.createBox(n,this.body);return o?(this.caret&&(o.caret=this.caret),this.bind(n,o)):null}},Dp=class extends ke{constructor(n,o,e,i){super("text",i,{command:n,mode:"text",displayContainsHighlight:!0}),this.value=o,this.verbatimLatex=o,this.applyStyle(e)}static fromJson(n,o){return new Dp(n.command,n.value,n.style,o)}toJson(){return super.toJson()}render(n){let o=this.createBox(n);return this.caret&&(o.caret=this.caret),o}serialize(n){var o;return null!=(o=this.verbatimLatex)?o:sx("text",this.value.codePointAt(0))}};function bx(n){return!/^<({|}|\$|\$\$|space)>$/.test(n)}var vx=class{constructor(n,o,e){var i,a,r,s,l,c;this.index=0,this.endCount=0,this.tokens=n,this.context=o,this.errors=[],this.args=null!=(i=e.args)?i:null,this.smartFence=null!=(a=e.smartFence)?a:o.smartFence,this._currentParsingContext={parent:void 0,mathlist:[],style:null!=(r=e.style)?r:{},parseMode:null!=(s=e.parseMode)?s:"math",mathstyle:null!=(l=e.mathstyle)?l:"displaystyle",registers:null!=(c=e.registers)?c:o.registers,tabular:!1}}get currentContext(){return this._currentParsingContext}get rootContext(){let n=this._currentParsingContext;for(;n.parent;)n=n.parent;return n}beginContext(n){var o,e,i;let a={parent:this.currentContext,mathlist:[],style:Ee({},this.currentContext.style),parseMode:null!=(o=n?.mode)?o:this.currentContext.parseMode,mathstyle:null!=(e=n?.mathstyle)?e:this.currentContext.mathstyle,registers:null,tabular:null!=(i=n?.tabular)&&i};this._currentParsingContext=a}endContext(){this._currentParsingContext=this._currentParsingContext.parent}onError(n){this.errors.push(Ee({before:sg(this.tokens.slice(this.index,this.index+10)),after:sg(this.tokens.slice(Math.max(0,this.index-10),this.index))},n))}get mathlist(){return this.currentContext.mathlist}set mathlist(n){this.currentContext.mathlist=n}get parseMode(){return this.currentContext.parseMode}set parseMode(n){this.currentContext.parseMode=n}get tabularMode(){return this.currentContext.tabular}get style(){let n=this.currentContext;for(;n;){if(n.style)return n.style;n=n.parent}return{}}set style(n){this.currentContext.style=n}getRegister(n){var o,e,i;if(n.startsWith("global "))return null!=(e=null==(o=this.rootContext.registers)?void 0:o[n.slice(7)])?e:0;let a=this.currentContext;for(;a;){if(null!=(i=a.registers)&&i[n])return a.registers[n];a=a.parent}return 0}setRegister(n,o){var e;if(n.startsWith("global ")){n=n.slice(7);let i=this.currentContext;for(;i;)null!=(e=i.registers)&&e[n]&&delete i.registers[n],i=i.parent;this.rootContext.registers[n]=o}else this.currentContext.registers||(this.currentContext.registers={}),this.currentContext.registers[n]=o}end(){return this.endCount++,this.index>=this.tokens.length||this.endCount>1e3}get(){return this.endCount=0,this.index<this.tokens.length?this.tokens[this.index++]:""}peek(){return this.tokens[this.index]}match(n){return this.tokens[this.index]===n&&(this.index++,!0)}lastSubsupAtom(){let n;return this.mathlist.length>0&&(n=this.mathlist[this.mathlist.length-1],"msubsup"===n.type||void 0!==n.subsupPlacement)||(n=new dg(this.context,{style:this.style}),this.mathlist.push(n)),n}hasPattern(n){return n.test(this.tokens[this.index])}hasInfixCommand(){var n;let{index:o}=this;if(o<this.tokens.length&&this.tokens[o].startsWith("\\")){let e=this.context.getDefinition(this.tokens[o],this.parseMode);return!(!e||"symbol"===e.definitionType||e.ifMode&&!e.ifMode.includes(this.parseMode))&&null!=(n=e.infix)&&n}return!1}matchColumnSeparator(){let{index:n}=this;return!(!this.tabularMode||"&"!==this.tokens[n]||(this.index++,0))}matchRowSeparator(){let{index:n}=this;return!(!this.tabularMode||"\\\\"!==this.tokens[n]&&"\\cr"!==this.tokens[n]||(this.index++,0))}placeholder(){var n;let o=null==(n=this.args)?void 0:n.call(this,"?");return o?Gr(o,this.context,{parseMode:this.parseMode,mathstyle:"textstyle"}):[new $o(this.context,{mode:this.parseMode,style:this.style})]}matchWhitespace(){let n=!1;for(;this.match("<space>");)n=!0;return n}skipUntilToken(n){let o=this.tokens[this.index];for(;o&&o!==n;)o=this.tokens[++this.index];o===n&&this.index++}skipFiller(){let n=!1;do{let o=this.matchWhitespace(),e=this.match("\\relax");n=!o&&!e}while(!n)}matchKeyword(n){let o=this.index,e=this.end(),i="";for(;!e;){let r=this.get();bx(r)?(i+=r,e=this.end()||i.length>=n.length):e=!0}let a=n.toUpperCase()===i.toUpperCase();return a||(this.index=o),a}scanString(){let n="";for(;!this.end();)if(this.match("<space>"))n+=" ";else{let o=this.peek();if("]"===o)break;if(bx(o))n+=this.get();else{if(!o.startsWith("\\"))break;this.onError({code:"unbalanced-braces"}),n+=this.get()}}return n}scanBalancedString(){let n="",o=this.end(),e=1;for(;!o;){if(this.match("<space>"))n+=" ";else{let i=this.get();"<{>"===i?(n+="{",e+=1):"<}>"===i?(e-=1,e>0?n+="}":this.index-=1):n+="<$>"===i?"$":"<$$>"===i?"$$":i}o=0===e||this.end()}return n}matchLiteralArg(){var n;let o="";if(this.match("<{>")){let e=1;for(;e>0&&!this.end();){let i=this.get();"<}>"===i?(e-=1,e>0&&(o+="}")):"<{>"===i?(e+=1,o+="{"):o+=null!=(n={"<space>":" ","<$$>":"$$","<$>":"$"}[i])?n:i}}return o}scanNumber(n=!0){var o,e;let i=!1,a=this.peek();for(;"<space>"===a||"+"===a||"-"===a;)this.get(),"-"===a&&(i=!i),a=this.peek();n=!!n;let r=10,s=/\d/;if(this.match("'"))r=8,s=/[0-7]/,n=!0;else if(this.match('"')||this.match("x"))r=16,s=/[\dA-F]/,n=!0;else if(this.match("`"))return a=this.get(),a?a.startsWith("\\")&&2===a.length?(i?-1:1)*(null!=(o=a.codePointAt(1))?o:0):(i?-1:1)*(null!=(e=a.codePointAt(0))?e:0):null;let l="";for(;this.hasPattern(s);)l+=this.get();if(!n&&(this.match(".")||this.match(",")))for(l+=".";this.hasPattern(s);)l+=this.get();let c=n?Number.parseInt(l,r):Number.parseFloat(l);return Number.isNaN(c)?null:i?-c:c}scanDimen(){var n,o,e;let a,i=this.scanNumber(!1);if(null===i){if(null==(n=this.peek())||!n.startsWith("\\"))return null;i=1}return this.matchWhitespace(),this.matchKeyword("pt")?a={dimension:i,unit:"pt"}:this.matchKeyword("mm")?a={dimension:i,unit:"mm"}:this.matchKeyword("cm")?a={dimension:i,unit:"cm"}:this.matchKeyword("ex")?a={dimension:i,unit:"ex"}:this.matchKeyword("px")?a={dimension:i,unit:"px"}:this.matchKeyword("em")?a={dimension:i,unit:"em"}:this.matchKeyword("bp")?a={dimension:i,unit:"bp"}:this.matchKeyword("dd")?a={dimension:i,unit:"dd"}:this.matchKeyword("pc")?a={dimension:i,unit:"pc"}:this.matchKeyword("in")?a={dimension:i,unit:"in"}:this.matchKeyword("mu")?a={dimension:i,unit:"mu"}:null!=(o=this.peek())&&o.startsWith("\\")?(a=null!=(e=yx(this.getRegister(this.get().slice(1)),this.context))?e:{dimension:0},a.dimension*=i):(this.match("\\relax")||this.onError({code:"missing-unit"}),a={dimension:i,unit:"pt"}),a}scanGlue(){let n=this.scanDimen();if(null===n)return null;let o={glue:n};return this.matchWhitespace(),this.match("\\relax")||(this.matchKeyword("plus")&&this.scanDimen(),this.matchWhitespace(),this.match("\\relax"))||(this.matchWhitespace(),this.matchKeyword("minus")&&this.scanDimen()),o}scanColspec(){this.matchWhitespace();let n=[];for(;!this.end()&&"<}>"!==this.peek()&&"]"!==this.peek();){let o=this.get();"c"===o||"r"===o||"l"===o?n.push({align:o}):"|"===o?n.push({separator:"solid"}):":"===o?n.push({separator:"dashed"}):"@"===o&&(this.match("<{>")&&(this.beginContext({mode:"math"}),n.push({gap:this.parse(e=>"<}>"===e)}),this.endContext()),this.match("<}>")||this.onError({code:"unbalanced-braces"}))}return n}parseModeSet(){let n="";if(this.match("\\(")&&(n="\\)"),!n&&this.match("\\[")&&(n="\\]"),!n)return null;this.beginContext({mode:"math",mathstyle:"\\)"===n?"textstyle":"displaystyle"});let o=new Fa(this.parse(e=>e===n),this.context,{mathstyleName:"\\)"===n?"textstyle":"displaystyle",latexOpen:"\\]"===n?"\\[":"\\(",latexClose:n,boxType:"mord"});return this.match(n)||this.onError({code:"unbalanced-mode-shift"}),this.endContext(),o.hasEmptyBranch("body")?null:o}parseModeShift(){let n="";if(this.match("<$>")&&(n="<$>"),!n&&this.match("<$$>")&&(n="<$$>"),!n)return null;this.beginContext({mode:"math",mathstyle:"textstyle"});let o=new Fa(this.parse(e=>e===n),this.context,{mathstyleName:"<$>"===n?"textstyle":"displaystyle",latexOpen:"<$>"===n?"$ ":"$$ ",latexClose:"<$>"===n?" $":" $$"});return this.match(n)||this.onError({code:"unbalanced-mode-shift"}),this.endContext(),o.hasEmptyBranch("body")?null:o}parseEnvironment(){if(!this.match("\\begin"))return null;let n=this.parseArgument("string");if(!n)return null;let o=function OJ(n){var o;return null!=(o=m4[n])?o:null}(n);if(!o)return this.onError({code:"unknown-environment",arg:n}),null;let e=[];if(o.params)for(let l of o.params)if(l.isOptional)e.push(this.parseOptionalArgument(l.type));else{let c=this.parseArgument(l.type);c||this.onError({code:"missing-argument",arg:n}),e.push(c)}this.beginContext({tabular:o.tabular});let i=[],a=[],r=[],s=!1;do{if(this.end()&&(this.onError({code:"unbalanced-environment",arg:n}),s=!0),!s&&this.match("\\end")&&(this.parseArgument("string")!==n&&this.onError({code:"unbalanced-environment",arg:n}),s=!0),!s)if(this.matchColumnSeparator())r.push(this.mathlist),this.mathlist=[];else if(this.matchRowSeparator()){r.push(this.mathlist),this.mathlist=[];let l=null;this.matchWhitespace(),this.match("[")&&(l=this.scanDimen(),this.matchWhitespace(),this.match("]")),a.push(l??{dimension:0}),i.push(r),r=[]}else this.mathlist.push(...this.parse(l=>"<}>"===l||"&"===l||"\\end"===l||"\\cr"===l||"\\\\"===l))}while(!s);return r.push(this.mathlist),r.length>0&&i.push(r),this.endContext(),o.createAtom(this.context,n,i,a,e)}parse(n){this.beginContext(),n||(n=l=>"<}>"===l);let s,o="",e=null,i=[],a=null,r=this.mathlist;for(this.mathlist=[];!this.end()&&!n(this.peek());)this.hasInfixCommand()&&!o?(o=this.get(),e=this.context.getDefinition(o,"math"),e&&(i=this.parseArguments(e)[1]),a=this.mathlist,this.mathlist=[]):this.parseToken();return o?(i.unshift(this.mathlist),this.mathlist=r,a&&i.unshift(a),s=[e.createAtom(o,i,this.style,this.context)]):(s=this.mathlist,this.mathlist=r),this.endContext(),s}parseGroup(){if(!this.match("<{>"))return null;let n=new Fa(this.parse(o=>"<}>"===o),this.context,{mode:this.parseMode,latexOpen:"{",latexClose:"}"});return this.match("<}>")||this.onError({code:"unbalanced-braces"}),n}scanSmartFence(){if(this.matchWhitespace(),!this.match("("))return null;this.beginContext();let n=1;for(;!this.end()&&0!==n;)this.match("(")&&(n+=1),this.match(")")&&(n-=1),0!==n&&this.parseToken();0===n&&this.match(")");let o=new ur("",this.mathlist,this.context,{leftDelim:"(",rightDelim:0===n?")":"?"});return this.endContext(),o}scanDelim(){this.matchWhitespace();let n=this.get();if(!n)return this.onError({code:"unexpected-end-of-string"}),null;let o=".";(n.startsWith("\\")||bx(n))&&(o=n);let e=this.context.getDefinition(o,"math");return e?"function"===e.definitionType&&e.ifMode&&!e.ifMode.includes(this.parseMode)?(this.onError({code:"unexpected-delimiter",arg:o}),null):"symbol"===e.definitionType&&("mopen"===e.type||"mclose"===e.type)||/^(\.|\?|\||<|>|\\vert|\\Vert|\\\||\\surd|\\uparrow|\\downarrow|\\Uparrow|\\Downarrow|\\updownarrow|\\Updownarrow|\\mid|\\mvert|\\mVert)$/.test(o)?o:(this.onError({code:"unexpected-delimiter",arg:o}),null):(this.onError({code:"unknown-command",arg:o}),null)}parseLeftRight(){var n;if(this.match("\\right")||this.match("\\mright"))return this.onError({code:"unbalanced-braces"}),null;let o="\\right";if(!this.match("\\left")){if(!this.match("\\mleft"))return null;o="\\mright"}let e=this.scanDelim();if(!e)return null;for(this.beginContext();!this.end()&&!this.match(o);)this.parseToken();let i=this.mathlist;this.endContext();let a=null!=(n=this.scanDelim())?n:".";return new ur("\\right"===o?"left...right":"mleft...mright",i,this.context,{leftDelim:e,rightDelim:a,style:this.style})}parseSupSub(){if("math"!==this.parseMode)return!1;let n=this.peek();if("^"!==n&&"_"!==n&&"'"!==n)return!1;for(;"^"===n||"_"===n||"'"===n;){if(this.match("'"))this.match("'")?this.lastSubsupAtom().addChild(new ke("mord",this.context,{command:"\\doubleprime",mode:"math",value:"\u2032\u2032"}),"superscript"):this.lastSubsupAtom().addChild(new ke("mord",this.context,{command:"\\prime",mode:"math",value:"\u2032"}),"superscript");else if(this.match("^")||this.match("_")){let o=this.parseArgument("math");o?this.lastSubsupAtom().addChildren(o,"_"===n?"subscript":"superscript"):this.lastSubsupAtom().createBranch("_"===n?"subscript":"superscript")}n=this.peek()}return!0}parseLimits(){let n=this.match("\\limits"),o=!n&&this.match("\\nolimits"),e=!o&&!n&&this.match("\\displaylimits");if(!n&&!o&&!e)return!1;let i=this.mathlist.length>0?this.mathlist[this.mathlist.length-1]:null;return!(null===i||"mop"!==i.type||(n?(i.subsupPlacement="over-under",i.explicitSubsupPlacement=!0,0):o?(i.subsupPlacement="adjacent",i.explicitSubsupPlacement=!0,0):!e||(i.subsupPlacement="auto",i.explicitSubsupPlacement=!0,0)))}parseArguments(n){if(null==n||!n.params)return[void 0,[]];let o,e=[],i=n.infix?2:0;for(;i<n.params.length;){let a=n.params[i];if("rest"===a.type)e.push(this.parse(r=>"<}>"===r||"&"===r||"\\end"===r||"\\cr"===r||"\\\\"===r));else if(a.isOptional)e.push(this.parseOptionalArgument(a.type));else if(a.type.endsWith("*"))o=a.type.slice(0,-1);else{let r=this.parseArgument(a.type);if(null!==r)e.push(r);else switch(this.onError({code:"missing-argument"}),a.type){case"number":e.push(0);break;case"dimen":e.push({dimension:0,unit:"pt"});break;case"glue":e.push({glue:{dimension:0,unit:"pt"}});break;case"string":case"balanced-string":e.push("");break;case"delim":e.push(".");break;case"colspec":e.push("llllllllll");break;default:e.push(this.placeholder())}}i+=1}return[o,e]}parseArgument(n){var o,e;this.skipFiller(),"auto"===n&&(n=this.parseMode);let i=null,a="<{>"===this.peek();if(!a){if("delim"===n)return null!=(o=this.scanDelim())?o:".";if("text"===n||"math"===n){this.beginContext();let s=this.parseSimpleToken();return this.endContext(),s}}if(a&&this.get(),"text"===n||"math"===n){this.beginContext({mode:n});do{this.mathlist.push(...this.parse())}while(!this.match("<}>")&&!this.end())}else if(this.beginContext(),"string"===n?i=this.scanString():"balanced-string"===n?i=this.scanBalancedString():"number"===n?i=this.scanNumber():"colspec"===n?i=this.scanColspec():"dimen"===n?i=this.scanDimen():"glue"===n?i=this.scanGlue():"delim"===n&&(i=null!=(e=this.scanDelim())?e:"."),a&&this.skipUntilToken("<}>"),null===i)return this.endContext(),null;let r=this.mathlist;return this.endContext(),i??r}parseOptionalArgument(n){var o,e;if(n="auto"===n?this.parseMode:n,this.matchWhitespace(),!this.match("["))return null;let i=null;for(;!this.end()&&!this.match("]");)if("string"===n)i=this.scanString();else if("number"===n)i=this.scanNumber();else if("dimen"===n)i=this.scanDimen();else if("glue"===n)i=this.scanGlue();else if("colspec"===n)i=this.scanColspec();else if("bbox"===n){let a=this.scanString().toLowerCase().trim().split(/,(?![^(]*\)(?:(?:[^(]*\)){2})*[^"]*$)/),r={};for(let s of a){let l=null==(e=(o=this.context).backgroundColorMap)?void 0:e.call(o,s);if(l)r.backgroundcolor=l;else{let c=s.match(/^\s*([\d.]+)\s*([a-z]{2})/);if(c)r.padding=c[0];else{let d=s.match(/^\s*border\s*:\s*(.*)/);d&&(r.border=d[1])}}}i=r}else"math"===n&&(this.beginContext({mode:"math"}),i=this.mathlist.concat(this.parse(a=>"]"===a)),this.endContext());return i}parseCommand(n){var o,e,i,a,r,s,l;if("\\placeholder"===n){let _=this.parseOptionalArgument("string"),x=this.parseOptionalArgument("math"),b=null!=(o=this.parseArgument("string"))?o:void 0;return[new $o(this.context,{mode:this.parseMode,placeholderId:_,value:b,default:x,style:this.style})]}let c=null;if("\\char"===n){let _=this.index,x=Math.floor(null!=(e=this.scanNumber(!0))?e:Number.NaN);(!Number.isFinite(x)||x<0||x>1114111)&&(x=10067);let b="\\char"+sg(this.tokens.slice(_,this.index));return c=new ke("math"===this.parseMode?"mord":"text",this.context,{command:"\\char",mode:this.parseMode,value:String.fromCodePoint(x),serialize:()=>b}),c.verbatimLatex=b,[c]}if("\\hskip"===n||"\\kern"===n){let _=this.scanGlue();return _?[new zm(n,this.style,this.context,_)]:null}if(c=this.scanMacro(n),c)return[c];let d=this.context.getDefinition(n,this.parseMode);if(!d)return this.onError({code:"unknown-command",arg:n}),[new A4(n,this.context)];let h=this.index;if("symbol"===d.definitionType){let _=Ee({},this.style);d.variant&&(_.variant=d.variant),c=new ke(null!=(i=d.type)?i:"mop",this.context,{command:n,style:_,value:String.fromCodePoint(d.codepoint),mode:this.parseMode})}else{if(d.ifMode&&!d.ifMode.includes(this.parseMode))return[];let _=this.parseMode;d.applyMode&&(this.parseMode=d.applyMode);let[x,b]=this.parseArguments(d);if(this.parseMode=_,!b)return null;if(d.applyMode&&!d.applyStyle&&!d.createAtom)return b[0];if(d.infix)return this.onError({code:"too-many-infix-commands",arg:n}),null;if("function"==typeof d.createAtom)c=d.createAtom(n,b,this.style,this.context),x&&(c.body=null!=(a=this.parseArgument(x))?a:void 0);else if("function"==typeof d.applyStyle){let T=d.applyStyle(n,b,this.context),P=this.parseMode;if(d.applyMode&&(this.parseMode=d.applyMode),x){let U=this.style;this.style=Ee(Ee({},this.style),T);let q=this.parseArgument(x);return this.style=U,this.parseMode=P,q}this.style=Ee(Ee({},this.style),T),this.parseMode=P}else c=new ke("mop",this.context,{command:null!=(r=d.command)?r:n,style:Ee({},this.style),value:n,mode:null!=(s=d.applyMode)?s:this.parseMode})}if(c instanceof ke&&void 0===c.verbatimLatex&&!/^\\(llap|rlap|class|cssId|htmlData)$/.test(n)&&(c.verbatimLatex=(null!=(l=c.command)?l:"")+sg(this.tokens.slice(h,this.index)),0===c.verbatimLatex.length&&(c.verbatimLatex=void 0),c.isFunction&&this.smartFence)){let _=this.scanSmartFence();if(_)return[c,_]}return c?[c]:null}parseLiteral(n){let o=Md.createAtom(this.parseMode,n,this.context,Ee({},this.style));if(!o)return null;if(o.isFunction&&this.smartFence){let e=this.scanSmartFence();if(e)return[o,e]}return[o]}parseSimpleToken(){let n=this.get();return n?"<space>"===n?"text"===this.parseMode?[new Dp(" "," ",this.style,this.context)]:null:n.startsWith("\\")?this.parseCommand(n):bx(n)?this.parseLiteral(n):(this.onError("<}>"===n?{latex:"",code:"unbalanced-braces"}:{latex:"",code:"unexpected-token",arg:n}),null):null}scanMacro(n){var o;let e=this.context.getMacro(n);if(!e)return null;let i=this.index,a=e.args,r={"?":null==(o=this.args)?void 0:o.call(this,"?")};for(let s=1;s<=a;s++)r[s]=this.matchLiteralArg();return new S4(n,this.context,{expand:e.expand,captureSelection:e.captureSelection,args:sg(this.tokens.slice(i,this.index)),body:Gr(e.def,this.context,{parseMode:this.parseMode,args:s=>r[s],mathstyle:this.currentContext.mathstyle})})}parseToken(){var n,o,e,i;let a=null!=(i=null!=(e=null!=(o=null!=(n=this.parseEnvironment())?n:this.parseModeShift())?o:this.parseModeSet())?e:this.parseGroup())?i:this.parseLeftRight();if(null===a){if(this.parseSupSub()||this.parseLimits())return!0;a=this.parseSimpleToken()}return qa(a)?this.mathlist.push(...a):a&&this.mathlist.push(a),null!==a}};function Gr(n,o,e){var i,a,r;let s=null!=(i=e?.args)?i:null,l=new vx(Np(n,s),o,{args:s,mathstyle:null!=(a=e?.mathstyle)?a:"displaystyle",parseMode:null!=(r=e?.parseMode)?r:"math"}),c=[];for(;!l.end();)c.push(...l.parse());return c}function mH(n,o,e){return"object"==typeof n&&"glue"in n?n:"object"==typeof n&&"dimension"in n?{glue:n}:"number"==typeof n?{glue:{dimension:n}}:new vx(Np(n),o,{registers:e}).scanGlue()}function yx(n,o,e){return"number"==typeof n?{dimension:n,unit:"pt"}:("object"==typeof n&&"glue"in n&&(n=n.glue),"object"==typeof n&&"dimension"in n?n:new vx(Np(n),o,{registers:e}).scanDimen())}var Jm=class extends ke{constructor(n,o,e,i){super("box",e,{command:n,serialize:i.serialize,style:i.style}),this.body=o,this.framecolor=i.framecolor,this.verbatimFramecolor=i.verbatimBackgroundcolor,this.backgroundcolor=i.backgroundcolor,this.verbatimBackgroundcolor=i.verbatimBackgroundcolor,this.padding=i.padding,this.border=i.border}static fromJson(n,o){return new Jm(n.command,n.body,o,n)}toJson(){return ei(Ee({},super.toJson()),{framecolor:this.framecolor,verbatimFramecolor:this.verbatimFramecolor,backgroundcolor:this.backgroundcolor,verbatimBackgroundcolor:this.verbatimBackgroundcolor,padding:this.padding,border:this.border})}render(n){let o=new ni(n,this.style),e=Qc(o.getRegisterAsDimension("fboxsep")),i=void 0===this.padding?e:Qc(yx(this.padding,ei(Ee({},this.context),{registers:n.registers}))),a=ke.createBox(n,this.body);if(!a)return null;a.setStyle("vertical-align",-a.height,"em");let r=new Be(a,{type:"mord"}),s=new Be(null,{classes:"ML__box"});s.height=r.height+i,s.depth=r.depth+i,s.setStyle("box-sizing","border-box"),s.setStyle("position","absolute"),s.setStyle("height",r.height+r.depth+2*i,"em"),0===i?s.setStyle("width","100%"):(s.setStyle("width",`calc(100% + ${2*i}em)`),s.setStyle("top",e,"em"),s.setStyle("left",-i,"em")),this.backgroundcolor&&s.setStyle("background-color",this.backgroundcolor),this.framecolor&&s.setStyle("border",`${Qc(o.getRegisterAsDimension("fboxrule"))}em solid ${this.framecolor}`),this.border&&s.setStyle("border",this.border),r.setStyle("display","inline-block"),r.setStyle("height",a.height+a.depth,"em"),r.setStyle("vertical-align",-i,"em");let l=new Be([s,r]);return l.setStyle("position","relative"),l.setStyle("display","inline-block"),l.setStyle("line-height",0),l.height=r.height+i,l.depth=r.depth+i,l.left=i,l.right=i,l.setStyle("height",r.height+i,"em"),l.setStyle("top",r.depth-r.height,"em"),l.setStyle("vertical-align",r.depth+i,"em"),this.caret&&(l.caret=this.caret),this.attachSupsub(n,{base:l})}},Lo=class extends ke{constructor(n,o,e,i,a={}){var r,s;super("array",n),this.environmentName=o,this.rowGaps=i,a.mathstyleName&&(this.mathstyleName=a.mathstyleName),a.columns&&(this.colFormat=0===a.columns.length?[{align:"l"}]:a.columns),this.colFormat||(this.colFormat=[{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"},{align:"l"}]),this.array=function hH(n,o,e,i){let a=0;for(let h of i)"align"in h&&(a+=1);let r=0,s=[];for(let h of e){let _=0;for(r=Math.max(r,Math.min(h.length,a));_<h.length;){let x=[],b=Math.min(h.length,_+a);for(;_<b;)x.push(0===h[_].length?[new ke("first",n,{mode:o.mode})]:"first"!==h[_][0].type?[new ke("first",n,{mode:o.mode}),...h[_]]:h[_]),_+=1;s.push(x)}}1===s[s.length-1].length&&0===s[s.length-1][0].length&&s.pop();let l=[];for(let h of s){if(h.length!==r)for(let _=h.length;_<r;_++)h.push([new ke("first",n,{mode:o.mode}),new $o(n)]);l.push(h)}let c=0,d=0;for(let h of l){d=0;for(let _ of h){for(let x of _)x.parent=o,x.treeBranch=[c,d];d+=1}c+=1}return o.isDirty=!0,l}(n,this,e,this.colFormat),a.leftDelim&&(this.leftDelim=a.leftDelim),a.rightDelim&&(this.rightDelim=a.rightDelim),void 0!==a.jot&&(this.jot=a.jot),a.arraycolsep&&(this.arraycolsep=a.arraycolsep),this.colSeparationType=a.colSeparationType,this.arraystretch=null!=(r=a.arraystretch)?r:1,this.minColumns=null!=(s=a.minColumns)?s:1}static fromJson(n,o){return new Lo(o,n.environmentName,n.array,n.rowGaps,n)}toJson(){let n=ei(Ee({},super.toJson()),{environmentName:this.environmentName,array:this.array.map(o=>o.map(e=>e.map(i=>i.toJson()))),rowGaps:this.rowGaps,columns:this.colFormat,colSeparationType:this.colSeparationType});return 1!==this.arraystretch&&(n.arraystretch=this.arraystretch),this.arraycolsep&&(n.arraycolsep=this.arraycolsep),this.leftDelim&&(n.leftDelim=this.leftDelim),this.rightDelim&&(n.rightDelim=this.rightDelim),void 0!==this.jot&&(n.jot=this.jot),n}branch(n){var o;if(fx(n))return null!=(o=this.array[n[0]][n[1]])?o:void 0}get branches(){let n=super.branches;return this.array.forEach((o,e)=>{this.array[e].forEach((i,a)=>{this.array[e][a]&&n.push([e,a])})}),n}createBranch(n){var o;return fx(n)?(this.isDirty=!0,null!=(o=this.branch(n))?o:[]):[]}get rowCount(){return this.array.length}get colCount(){return this.array[0].length}get maxColumns(){return this.colFormat.filter(n=>!!n.align).length}removeBranch(n){if(Um(n))return super.removeBranch(n);let o=this.branch(n);return this.array[n[0]][n[1]]=void 0,o.forEach(e=>{e.parent=void 0,e.treeBranch=void 0}),o.shift(),this.isDirty=!0,o}get hasChildren(){return this.children.length>0}get children(){let n=[];for(let o of this.array)for(let e of o)if(e)for(let i of e)n.push(...i.children),n.push(i);return[...n,...super.children]}render(n){var o,e,i,a,r;let s=new ni(n,this.style,this.mathstyleName),l=s.getRegisterAsEm("arrayrulewidth"),c=s.getRegisterAsEm("arraycolsep"),d=s.getRegisterAsEm("doublerulesep"),h=null!=(o=this.arraystretch)?o:1,_="number"==typeof this.arraycolsep?this.arraycolsep:c;"small"===this.colSeparationType&&(_=new ni(n,void 0,"scriptstyle").scalingFactor/n.scalingFactor*.2778);let x=1.2*h,b=.7*x,T=.3*x,P=0,U=[],q=0,B=this.array.length;for(let Tt=0;Tt<B;++Tt){let Vt=this.array[Tt];q=Math.max(q,Vt.length);let ie=new ni(s,this.style,this.mathstyleName),Wt=b/ie.scalingFactor,oe=T/ie.scalingFactor,ne={cells:[],height:0,depth:0,pos:0};for(let at of Vt){let kt=null!=(e=ke.createBox(ie,at,{newList:!0}))?e:new Be(null,{newList:!0});oe=Math.max(oe,kt.depth),Wt=Math.max(Wt,kt.height),ne.cells.push(kt)}let we=null!=(i=Qc(this.rowGaps[Tt]))?i:0;we>0&&(we+=T,oe=Math.max(oe,we),we=0),void 0!==this.jot&&(oe+=this.jot),ne.height=Wt,ne.depth=oe,P+=Wt,ne.pos=P,P+=oe+we,U.push(ne)}let W=P/2+Hl,G=[];for(let Tt=0;Tt<q;Tt++){let Vt=[];for(let ie of U){let Wt=ie.cells[Tt];Wt.depth=ie.depth,Wt.height=ie.height,Vt.push({box:Wt,shift:ie.pos-W})}Vt.length>0&&G.push(new ma({individualShift:Vt}))}let nt=[],At=!1,ut=!1,et=0,vt=!this.leftDelim,{colFormat:Nt}=this;for(let Tt of Nt){if("align"in Tt&&et>=G.length)break;if("align"in Tt)At?nt.push(Cx(2*_)):(ut||vt)&&nt.push(Cx(_)),nt.push(new Be(G[et],{classes:"col-align-"+Tt.align})),et++,At=!0,ut=!1,vt=!1;else if("gap"in Tt){if("number"==typeof Tt.gap)nt.push(Cx(Tt.gap));else{let Vt=pH(n,U,W,Tt.gap);Vt&&nt.push(Vt)}At=!1,ut=!1,vt=!1}else if("separator"in Tt){let Vt=new Be(null,{classes:"vertical-separator"});Vt.setStyle("height",P,"em"),Vt.setStyle("border-right",`${l}em ${Tt.separator} currentColor`),Vt.setStyle("vertical-align",-(P-W),"em");let ie=0;ut?ie=d-l:At&&(ie=_-l),Vt.left=ie,nt.push(Vt),At=!1,ut=!0,vt=!1}}At&&!this.rightDelim&&nt.push(Cx(_));let ot=new Be(nt,{classes:"mtable"});if(!(this.leftDelim&&"."!==this.leftDelim||this.rightDelim&&"."!==this.rightDelim))return this.caret&&(ot.caret=this.caret),ot;let _t=ot.height,Mt=ot.depth,It=this.bind(n,new Be([this.bind(n,ug("mopen",null!=(a=this.leftDelim)?a:".",_t,Mt,s)),ot,this.bind(n,ug("mclose",null!=(r=this.rightDelim)?r:".",_t,Mt,s))],{type:"mord"}));return It?(this.caret&&(It.caret=this.caret),this.attachSupsub(n,{base:It})):null}serialize(n){let o="\\begin{"+this.environmentName+"}";if("array"===this.environmentName){if(o+="{",void 0!==this.colFormat)for(let e of this.colFormat)"align"in e?o+=e.align:"separator"in e&&"solid"===e.separator?o+="|":"separator"in e&&"dashed"===e.separator&&(o+=":");o+="}"}for(let e=0;e<this.array.length;e++){for(let i=0;i<this.array[e].length;i++)i>0&&(o+=" & "),o=Fo([o,ke.serialize(this.array[e][i],n)]);e<this.array.length-1&&(o+=" \\\\ ")}return o+="\\end{"+this.environmentName+"}",o}getCell(n,o){return this.array[n][o]}setCell(n,o,e){"array"===this.type&&Array.isArray(this.array);for(let a of this.array[n][o])a.parent=void 0,a.treeBranch=void 0;let i=e;(0===e.length||"first"!==e[0].type)&&(i=[new ke("first",this.context,{mode:this.mode}),...e]),this.array[n][o]=i;for(let a of i)a.parent=this,a.treeBranch=[n,o];this.isDirty=!0}addRowBefore(n){"array"===this.type&&Array.isArray(this.array);let o=[];for(let e=0;e<this.colCount;e++)o.push(wx(this));this.array.splice(n,0,o);for(let e=n;e<this.rowCount;e++)for(let i=0;i<this.colCount;i++){let a=this.array[e][i];if(a)for(let r of a)r.treeBranch=[e,i]}this.isDirty=!0}addRowAfter(n){"array"===this.type&&Array.isArray(this.array);let o=[];for(let e=0;e<this.colCount;e++)o.push(wx(this));this.array.splice(n+1,0,o);for(let e=n+1;e<this.rowCount;e++)for(let i=0;i<this.colCount;i++){let a=this.array[e][i];if(a)for(let r of a)r.treeBranch=[e,i]}this.isDirty=!0}removeRow(n){"array"===this.type&&Array.isArray(this.array);let o=this.array.splice(n,1);for(let e of o)for(let i of e)if(i)for(let a of i)a.parent=void 0,a.treeBranch=void 0;for(let e=n;e<this.rowCount;e++)for(let i=0;i<this.colCount;i++){let a=this.array[e][i];if(a)for(let r of a)r.treeBranch=[e,i]}this.isDirty=!0}addColumnBefore(n){"array"===this.type&&Array.isArray(this.array);for(let o of this.array)o.splice(n,0,wx(this));for(let o=0;o<this.rowCount;o++)for(let e=n;e<this.colCount;e++){let i=this.array[o][e];if(i)for(let a of i)a.treeBranch=[o,e]}this.isDirty=!0}addColumnAfter(n){"array"===this.type&&Array.isArray(this.array);for(let o of this.array)o.splice(n+1,0,wx(this));for(let o=0;o<this.rowCount;o++)for(let e=n+1;e<this.colCount;e++){let i=this.array[o][e];if(i)for(let a of i)a.treeBranch=[o,e]}this.isDirty=!0}addColumn(){this.addColumnAfter(this.colCount-1)}removeColumn(n){"array"===this.type&&Array.isArray(this.array);for(let o of this.array){let e=o.splice(n,1);for(let i of e)if(i)for(let a of i)a.parent=void 0,a.treeBranch=void 0}for(let o=0;o<this.rowCount;o++)for(let e=n;e<this.colCount;e++){let i=this.array[o][e];if(i)for(let a of i)a.treeBranch=[o,e]}this.isDirty=!0}get cells(){let n=[];for(let o of this.array)for(let e of o)e&&n.push(e);return n}};function wx(n){let o=new ke("first",n.context,{mode:n.mode});o.parent=n;let e=new $o(n.context,{mode:n.mode});return e.parent=n,[o,e]}function Cx(n){let o=new Be(null,{classes:"arraycolsep"});return o.width=n,o}function pH(n,o,e,i){if(!i)return null;let a=[];for(let r of o){let s=ke.createBox(n,i,{newList:!0});s&&(s.depth=r.depth,s.height=r.height,a.push({box:s,shift:r.pos-e}))}return new ma({individualShift:a}).wrap(n)}var O4=class extends ke{constructor(n,o,e){var i;super("composition",o,{mode:null!=(i=e?.mode)?i:"math",value:n})}static fromJson(n,o){return new O4(n.value,o,n)}toJson(){return super.toJson()}get computedStyle(){return{}}render(n){let o=new Be(this.value,{classes:"ML__composition",type:"composition"});return this.bind(n,o),this.caret&&(o.caret=this.caret),o}serialize(n){return""}},E4=class extends ke{constructor(n,o,e){super("chem",e,{command:n,mode:"math"});let i=xo.go(Le.go(o,"\\pu"===n?"pu":"ce"),!1);this.body=Gr(i,e),this.verbatimLatex=n+"{"+o+"}",this.arg=o,this.captureSelection=!0}static fromJson(n,o){return new E4(n.command,n.arg,o)}toJson(){return ei(Ee({},super.toJson()),{arg:this.arg})}render(n){let o=ke.createBox(n,this.body,{type:"chem",newList:!0});return this.caret&&(o.caret=this.caret),this.bind(n,o)}serialize(n){return this.verbatimLatex}};Te(["ce","pu"],"{chemformula:balanced-string}",{createAtom:(n,o,e,i)=>new E4(n,o[0],i)});var Le={go:function(n,o){if(!n)return[];void 0===o&&(o="ce");var e="0",i={parenthesisLevel:0};n=(n=(n=n.replace(/\n/g," ")).replace(/[\u2212\u2013\u2014\u2010]/g,"-")).replace(/[\u2026]/g,"...");for(var a,r=10,s=[];;){a!==n?(r=10,a=n):r--;var l=Le.stateMachines[o],c=l.transitions[e]||l.transitions["*"];t:for(var d=0;d<c.length;d++){var h=Le.patterns.match_(c[d].pattern,n);if(h){for(var _=c[d].task,x=0;x<_.action_.length;x++){var b;if(l.actions[_.action_[x].type_])b=l.actions[_.action_[x].type_](i,h.match_,_.action_[x].option);else{if(!Le.actions[_.action_[x].type_])throw["MhchemBugA","mhchem bug A. Please report. ("+_.action_[x].type_+")"];b=Le.actions[_.action_[x].type_](i,h.match_,_.action_[x].option)}Le.concatArray(s,b)}if(e=_.nextState||e,!(n.length>0))return s;if(_.revisit||(n=h.remainder),!_.toContinue)break t}}if(r<=0)throw["MhchemBugU","mhchem bug U. Please report."]}},concatArray:function(n,o){if(o)if(Array.isArray(o))for(var e=0;e<o.length;e++)n.push(o[e]);else n.push(o)},patterns:{patterns:{empty:/^$/,else:/^./,else2:/^./,space:/^\s/,"space A":/^\s(?=[A-Z\\$])/,space$:/^\s$/,"a-z":/^[a-z]/,x:/^x/,x$:/^x$/,i$:/^i$/,letters:/^(?:[a-zA-Z\u03B1-\u03C9\u0391-\u03A9?@]|(?:\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega|Gamma|Delta|Theta|Lambda|Xi|Pi|Sigma|Upsilon|Phi|Psi|Omega)(?:\s+|\{\}|(?![a-zA-Z]))))+/,"\\greek":/^\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega|Gamma|Delta|Theta|Lambda|Xi|Pi|Sigma|Upsilon|Phi|Psi|Omega)(?:\s+|\{\}|(?![a-zA-Z]))/,"one lowercase latin letter $":/^(?:([a-z])(?:$|[^a-zA-Z]))$/,"$one lowercase latin letter$ $":/^\$(?:([a-z])(?:$|[^a-zA-Z]))\$$/,"one lowercase greek letter $":/^(?:\$?[\u03B1-\u03C9]\$?|\$?\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega)\s*\$?)(?:\s+|\{\}|(?![a-zA-Z]))$/,digits:/^[0-9]+/,"-9.,9":/^[+\-]?(?:[0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))/,"-9.,9 no missing 0":/^[+\-]?[0-9]+(?:[.,][0-9]+)?/,"(-)(9.,9)(e)(99)":function(n){var o=n.match(/^(\+\-|\+\/\-|\+|\-|\\pm\s?)?([0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))?(\((?:[0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+))\))?(?:([eE]|\s*(\*|x|\\times|\u00D7)\s*10\^)([+\-]?[0-9]+|\{[+\-]?[0-9]+\}))?/);return o&&o[0]?{match_:o.splice(1),remainder:n.substr(o[0].length)}:null},"(-)(9)^(-9)":function(n){var o=n.match(/^(\+\-|\+\/\-|\+|\-|\\pm\s?)?([0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\.[0-9]+)?)\^([+\-]?[0-9]+|\{[+\-]?[0-9]+\})/);return o&&o[0]?{match_:o.splice(1),remainder:n.substr(o[0].length)}:null},"state of aggregation $":function(n){var o=Le.patterns.findObserveGroups(n,"",/^\([a-z]{1,3}(?=[\),])/,")","");if(o&&o.remainder.match(/^($|[\s,;\)\]\}])/))return o;var e=n.match(/^(?:\((?:\\ca\s?)?\$[amothc]\$\))/);return e?{match_:e[0],remainder:n.substr(e[0].length)}:null},"_{(state of aggregation)}$":/^_\{(\([a-z]{1,3}\))\}/,"{[(":/^(?:\\\{|\[|\()/,")]}":/^(?:\)|\]|\\\})/,", ":/^[,;]\s*/,",":/^[,;]/,".":/^[.]/,". ":/^([.\u22C5\u00B7\u2022])\s*/,"...":/^\.\.\.(?=$|[^.])/,"* ":/^([*])\s*/,"^{(...)}":function(n){return Le.patterns.findObserveGroups(n,"^{","","","}")},"^($...$)":function(n){return Le.patterns.findObserveGroups(n,"^","$","$","")},"^a":/^\^([0-9]+|[^\\_])/,"^\\x{}{}":function(n){return Le.patterns.findObserveGroups(n,"^",/^\\[a-zA-Z]+\{/,"}","","","{","}","",!0)},"^\\x{}":function(n){return Le.patterns.findObserveGroups(n,"^",/^\\[a-zA-Z]+\{/,"}","")},"^\\x":/^\^(\\[a-zA-Z]+)\s*/,"^(-1)":/^\^(-?\d+)/,"'":/^'/,"_{(...)}":function(n){return Le.patterns.findObserveGroups(n,"_{","","","}")},"_($...$)":function(n){return Le.patterns.findObserveGroups(n,"_","$","$","")},_9:/^_([+\-]?[0-9]+|[^\\])/,"_\\x{}{}":function(n){return Le.patterns.findObserveGroups(n,"_",/^\\[a-zA-Z]+\{/,"}","","","{","}","",!0)},"_\\x{}":function(n){return Le.patterns.findObserveGroups(n,"_",/^\\[a-zA-Z]+\{/,"}","")},"_\\x":/^_(\\[a-zA-Z]+)\s*/,"^_":/^(?:\^(?=_)|\_(?=\^)|[\^_]$)/,"{}":/^\{\}/,"{...}":function(n){return Le.patterns.findObserveGroups(n,"","{","}","")},"{(...)}":function(n){return Le.patterns.findObserveGroups(n,"{","","","}")},"$...$":function(n){return Le.patterns.findObserveGroups(n,"","$","$","")},"${(...)}$":function(n){return Le.patterns.findObserveGroups(n,"${","","","}$")},"$(...)$":function(n){return Le.patterns.findObserveGroups(n,"$","","","$")},"=<>":/^[=<>]/,"#":/^[#\u2261]/,"+":/^\+/,"-$":/^-(?=[\s_},;\]/]|$|\([a-z]+\))/,"-9":/^-(?=[0-9])/,"- orbital overlap":/^-(?=(?:[spd]|sp)(?:$|[\s,;\)\]\}]))/,"-":/^-/,"pm-operator":/^(?:\\pm|\$\\pm\$|\+-|\+\/-)/,operator:/^(?:\+|(?:[\-=<>]|<<|>>|\\approx|\$\\approx\$)(?=\s|$|-?[0-9]))/,arrowUpDown:/^(?:v|\(v\)|\^|\(\^\))(?=$|[\s,;\)\]\}])/,"\\bond{(...)}":function(n){return Le.patterns.findObserveGroups(n,"\\bond{","","","}")},"->":/^(?:<->|<-->|->|<-|<=>>|<<=>|<=>|[\u2192\u27F6\u21CC])/,CMT:/^[CMT](?=\[)/,"[(...)]":function(n){return Le.patterns.findObserveGroups(n,"[","","","]")},"1st-level escape":/^(&|\\\\|\\hline)\s*/,"\\,":/^(?:\\[,\ ;:])/,"\\x{}{}":function(n){return Le.patterns.findObserveGroups(n,"",/^\\[a-zA-Z]+\{/,"}","","","{","}","",!0)},"\\x{}":function(n){return Le.patterns.findObserveGroups(n,"",/^\\[a-zA-Z]+\{/,"}","")},"\\ca":/^\\ca(?:\s+|(?![a-zA-Z]))/,"\\x":/^(?:\\[a-zA-Z]+\s*|\\[_&{}%])/,orbital:/^(?:[0-9]{1,2}[spdfgh]|[0-9]{0,2}sp)(?=$|[^a-zA-Z])/,others:/^[\/~|]/,"\\frac{(...)}":function(n){return Le.patterns.findObserveGroups(n,"\\frac{","","","}","{","","","}")},"\\overset{(...)}":function(n){return Le.patterns.findObserveGroups(n,"\\overset{","","","}","{","","","}")},"\\underset{(...)}":function(n){return Le.patterns.findObserveGroups(n,"\\underset{","","","}","{","","","}")},"\\underbrace{(...)}":function(n){return Le.patterns.findObserveGroups(n,"\\underbrace{","","","}_","{","","","}")},"\\color{(...)}0":function(n){return Le.patterns.findObserveGroups(n,"\\color{","","","}")},"\\color{(...)}{(...)}1":function(n){return Le.patterns.findObserveGroups(n,"\\color{","","","}","{","","","}")},"\\color(...){(...)}2":function(n){return Le.patterns.findObserveGroups(n,"\\color","\\","",/^(?=\{)/,"{","","","}")},"\\ce{(...)}":function(n){return Le.patterns.findObserveGroups(n,"\\ce{","","","}")},oxidation$:/^(?:[+-][IVX]+|\\pm\s*0|\$\\pm\$\s*0)$/,"d-oxidation$":/^(?:[+-]?\s?[IVX]+|\\pm\s*0|\$\\pm\$\s*0)$/,"roman numeral":/^[IVX]+/,"1/2$":/^[+\-]?(?:[0-9]+|\$[a-z]\$|[a-z])\/[0-9]+(?:\$[a-z]\$|[a-z])?$/,amount:function(n){var o;if(o=n.match(/^(?:(?:(?:\([+\-]?[0-9]+\/[0-9]+\)|[+\-]?(?:[0-9]+|\$[a-z]\$|[a-z])\/[0-9]+|[+\-]?[0-9]+[.,][0-9]+|[+\-]?\.[0-9]+|[+\-]?[0-9]+)(?:[a-z](?=\s*[A-Z]))?)|[+\-]?[a-z](?=\s*[A-Z])|\+(?!\s))/))return{match_:o[0],remainder:n.substr(o[0].length)};var e=Le.patterns.findObserveGroups(n,"","$","$","");return e&&(o=e.match_.match(/^\$(?:\(?[+\-]?(?:[0-9]*[a-z]?[+\-])?[0-9]*[a-z](?:[+\-][0-9]*[a-z]?)?\)?|\+|-)\$$/))?{match_:o[0],remainder:n.substr(o[0].length)}:null},amount2:function(n){return this.amount(n)},"(KV letters),":/^(?:[A-Z][a-z]{0,2}|i)(?=,)/,formula$:function(n){if(n.match(/^\([a-z]+\)$/))return null;var o=n.match(/^(?:[a-z]|(?:[0-9\ \+\-\,\.\(\)]+[a-z])+[0-9\ \+\-\,\.\(\)]*|(?:[a-z][0-9\ \+\-\,\.\(\)]+)+[a-z]?)$/);return o?{match_:o[0],remainder:n.substr(o[0].length)}:null},uprightEntities:/^(?:pH|pOH|pC|pK|iPr|iBu)(?=$|[^a-zA-Z])/,"/":/^\s*(\/)\s*/,"//":/^\s*(\/\/)\s*/,"*":/^\s*[*.]\s*/},findObserveGroups:function(n,o,e,i,a,r,s,l,c,d){var h=function(q,B){if("string"==typeof B)return 0!==q.indexOf(B)?null:B;var W=q.match(B);return W?W[0]:null},x=h(n,o);if(null===x||(n=n.substr(x.length),null===(x=h(n,e))))return null;var b=function(q,B,W){for(var G=0;B<q.length;){var nt=q.charAt(B),At=h(q.substr(B),W);if(null!==At&&0===G)return{endMatchBegin:B,endMatchEnd:B+At.length};if("{"===nt)G++;else if("}"===nt){if(0===G)throw["ExtraCloseMissingOpen","Extra close brace or missing open brace"];G--}B++}return null}(n,x.length,i||a);if(null===b)return null;var T=n.substring(0,i?b.endMatchEnd:b.endMatchBegin);if(r||s){var P=this.findObserveGroups(n.substr(b.endMatchEnd),r,s,l,c);if(null===P)return null;var U=[T,P.match_];return{match_:d?U.join(""):U,remainder:P.remainder}}return{match_:T,remainder:n.substr(b.endMatchEnd)}},match_:function(n,o){var e=Le.patterns.patterns[n];if(void 0===e)throw["MhchemBugP","mhchem bug P. Please report. ("+n+")"];if("function"==typeof e)return Le.patterns.patterns[n](o);var i=o.match(e);return i?{match_:i[2]?[i[1],i[2]]:i[1]?i[1]:i[0],remainder:o.substr(i[0].length)}:null}},actions:{"a=":function(n,o){n.a=(n.a||"")+o},"b=":function(n,o){n.b=(n.b||"")+o},"p=":function(n,o){n.p=(n.p||"")+o},"o=":function(n,o){n.o=(n.o||"")+o},"q=":function(n,o){n.q=(n.q||"")+o},"d=":function(n,o){n.d=(n.d||"")+o},"rm=":function(n,o){n.rm=(n.rm||"")+o},"text=":function(n,o){n.text_=(n.text_||"")+o},insert:function(n,o,e){return{type_:e}},"insert+p1":function(n,o,e){return{type_:e,p1:o}},"insert+p1+p2":function(n,o,e){return{type_:e,p1:o[0],p2:o[1]}},copy:function(n,o){return o},rm:function(n,o){return{type_:"rm",p1:o||""}},text:function(n,o){return Le.go(o,"text")},"{text}":function(n,o){var e=["{"];return Le.concatArray(e,Le.go(o,"text")),e.push("}"),e},"tex-math":function(n,o){return Le.go(o,"tex-math")},"tex-math tight":function(n,o){return Le.go(o,"tex-math tight")},bond:function(n,o,e){return{type_:"bond",kind_:e||o}},"color0-output":function(n,o){return{type_:"color0",color:o[0]}},ce:function(n,o){return Le.go(o)},"1/2":function(n,o){var e=[];o.match(/^[+\-]/)&&(e.push(o.substr(0,1)),o=o.substr(1));var i=o.match(/^([0-9]+|\$[a-z]\$|[a-z])\/([0-9]+)(\$[a-z]\$|[a-z])?$/);return i[1]=i[1].replace(/\$/g,""),e.push({type_:"frac",p1:i[1],p2:i[2]}),i[3]&&(i[3]=i[3].replace(/\$/g,""),e.push({type_:"tex-math",p1:i[3]})),e},"9,9":function(n,o){return Le.go(o,"9,9")}},createTransitions:function(n){var o,e,i,a,r={};for(o in n)for(e in n[o])for(i=e.split("|"),n[o][e].stateArray=i,a=0;a<i.length;a++)r[i[a]]=[];for(o in n)for(e in n[o])for(i=n[o][e].stateArray||[],a=0;a<i.length;a++){var s=n[o][e];if(s.action_){s.action_=[].concat(s.action_);for(var l=0;l<s.action_.length;l++)"string"==typeof s.action_[l]&&(s.action_[l]={type_:s.action_[l]})}else s.action_=[];for(var c=o.split("|"),d=0;d<c.length;d++)if("*"===i[a])for(var h in r)r[h].push({pattern:c[d],task:s});else r[i[a]].push({pattern:c[d],task:s})}return r},stateMachines:{}};Le.stateMachines={ce:{transitions:Le.createTransitions({empty:{"*":{action_:"output"}},else:{"0|1|2":{action_:"beginsWithBond=false",revisit:!0,toContinue:!0}},oxidation$:{0:{action_:"oxidation-output"}},CMT:{r:{action_:"rdt=",nextState:"rt"},rd:{action_:"rqt=",nextState:"rdt"}},arrowUpDown:{"0|1|2|as":{action_:["sb=false","output","operator"],nextState:"1"}},uprightEntities:{"0|1|2":{action_:["o=","output"],nextState:"1"}},orbital:{"0|1|2|3":{action_:"o=",nextState:"o"}},"->":{"0|1|2|3":{action_:"r=",nextState:"r"},"a|as":{action_:["output","r="],nextState:"r"},"*":{action_:["output","r="],nextState:"r"}},"+":{o:{action_:"d= kv",nextState:"d"},"d|D":{action_:"d=",nextState:"d"},q:{action_:"d=",nextState:"qd"},"qd|qD":{action_:"d=",nextState:"qd"},dq:{action_:["output","d="],nextState:"d"},3:{action_:["sb=false","output","operator"],nextState:"0"}},amount:{"0|2":{action_:"a=",nextState:"a"}},"pm-operator":{"0|1|2|a|as":{action_:["sb=false","output",{type_:"operator",option:"\\pm"}],nextState:"0"}},operator:{"0|1|2|a|as":{action_:["sb=false","output","operator"],nextState:"0"}},"-$":{"o|q":{action_:["charge or bond","output"],nextState:"qd"},d:{action_:"d=",nextState:"d"},D:{action_:["output",{type_:"bond",option:"-"}],nextState:"3"},q:{action_:"d=",nextState:"qd"},qd:{action_:"d=",nextState:"qd"},"qD|dq":{action_:["output",{type_:"bond",option:"-"}],nextState:"3"}},"-9":{"3|o":{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"3"}},"- orbital overlap":{o:{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"2"},d:{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"2"}},"-":{"0|1|2":{action_:[{type_:"output",option:1},"beginsWithBond=true",{type_:"bond",option:"-"}],nextState:"3"},3:{action_:{type_:"bond",option:"-"}},a:{action_:["output",{type_:"insert",option:"hyphen"}],nextState:"2"},as:{action_:[{type_:"output",option:2},{type_:"bond",option:"-"}],nextState:"3"},b:{action_:"b="},o:{action_:{type_:"- after o/d",option:!1},nextState:"2"},q:{action_:{type_:"- after o/d",option:!1},nextState:"2"},"d|qd|dq":{action_:{type_:"- after o/d",option:!0},nextState:"2"},"D|qD|p":{action_:["output",{type_:"bond",option:"-"}],nextState:"3"}},amount2:{"1|3":{action_:"a=",nextState:"a"}},letters:{"0|1|2|3|a|as|b|p|bp|o":{action_:"o=",nextState:"o"},"q|dq":{action_:["output","o="],nextState:"o"},"d|D|qd|qD":{action_:"o after d",nextState:"o"}},digits:{o:{action_:"q=",nextState:"q"},"d|D":{action_:"q=",nextState:"dq"},q:{action_:["output","o="],nextState:"o"},a:{action_:"o=",nextState:"o"}},"space A":{"b|p|bp":{}},space:{a:{nextState:"as"},0:{action_:"sb=false"},"1|2":{action_:"sb=true"},"r|rt|rd|rdt|rdq":{action_:"output",nextState:"0"},"*":{action_:["output","sb=true"],nextState:"1"}},"1st-level escape":{"1|2":{action_:["output",{type_:"insert+p1",option:"1st-level escape"}]},"*":{action_:["output",{type_:"insert+p1",option:"1st-level escape"}],nextState:"0"}},"[(...)]":{"r|rt":{action_:"rd=",nextState:"rd"},"rd|rdt":{action_:"rq=",nextState:"rdq"}},"...":{"o|d|D|dq|qd|qD":{action_:["output",{type_:"bond",option:"..."}],nextState:"3"},"*":{action_:[{type_:"output",option:1},{type_:"insert",option:"ellipsis"}],nextState:"1"}},". |* ":{"*":{action_:["output",{type_:"insert",option:"addition compound"}],nextState:"1"}},"state of aggregation $":{"*":{action_:["output","state of aggregation"],nextState:"1"}},"{[(":{"a|as|o":{action_:["o=","output","parenthesisLevel++"],nextState:"2"},"0|1|2|3":{action_:["o=","output","parenthesisLevel++"],nextState:"2"},"*":{action_:["output","o=","output","parenthesisLevel++"],nextState:"2"}},")]}":{"0|1|2|3|b|p|bp|o":{action_:["o=","parenthesisLevel--"],nextState:"o"},"a|as|d|D|q|qd|qD|dq":{action_:["output","o=","parenthesisLevel--"],nextState:"o"}},", ":{"*":{action_:["output","comma"],nextState:"0"}},"^_":{"*":{}},"^{(...)}|^($...$)":{"0|1|2|as":{action_:"b=",nextState:"b"},p:{action_:"b=",nextState:"bp"},"3|o":{action_:"d= kv",nextState:"D"},q:{action_:"d=",nextState:"qD"},"d|D|qd|qD|dq":{action_:["output","d="],nextState:"D"}},"^a|^\\x{}{}|^\\x{}|^\\x|'":{"0|1|2|as":{action_:"b=",nextState:"b"},p:{action_:"b=",nextState:"bp"},"3|o":{action_:"d= kv",nextState:"d"},q:{action_:"d=",nextState:"qd"},"d|qd|D|qD":{action_:"d="},dq:{action_:["output","d="],nextState:"d"}},"_{(state of aggregation)}$":{"d|D|q|qd|qD|dq":{action_:["output","q="],nextState:"q"}},"_{(...)}|_($...$)|_9|_\\x{}{}|_\\x{}|_\\x":{"0|1|2|as":{action_:"p=",nextState:"p"},b:{action_:"p=",nextState:"bp"},"3|o":{action_:"q=",nextState:"q"},"d|D":{action_:"q=",nextState:"dq"},"q|qd|qD|dq":{action_:["output","q="],nextState:"q"}},"=<>":{"0|1|2|3|a|as|o|q|d|D|qd|qD|dq":{action_:[{type_:"output",option:2},"bond"],nextState:"3"}},"#":{"0|1|2|3|a|as|o":{action_:[{type_:"output",option:2},{type_:"bond",option:"#"}],nextState:"3"}},"{}":{"*":{action_:{type_:"output",option:1},nextState:"1"}},"{...}":{"0|1|2|3|a|as|b|p|bp":{action_:"o=",nextState:"o"},"o|d|D|q|qd|qD|dq":{action_:["output","o="],nextState:"o"}},"$...$":{a:{action_:"a="},"0|1|2|3|as|b|p|bp|o":{action_:"o=",nextState:"o"},"as|o":{action_:"o="},"q|d|D|qd|qD|dq":{action_:["output","o="],nextState:"o"}},"\\bond{(...)}":{"*":{action_:[{type_:"output",option:2},"bond"],nextState:"3"}},"\\frac{(...)}":{"*":{action_:[{type_:"output",option:1},"frac-output"],nextState:"3"}},"\\overset{(...)}":{"*":{action_:[{type_:"output",option:2},"overset-output"],nextState:"3"}},"\\underset{(...)}":{"*":{action_:[{type_:"output",option:2},"underset-output"],nextState:"3"}},"\\underbrace{(...)}":{"*":{action_:[{type_:"output",option:2},"underbrace-output"],nextState:"3"}},"\\color{(...)}{(...)}1|\\color(...){(...)}2":{"*":{action_:[{type_:"output",option:2},"color-output"],nextState:"3"}},"\\color{(...)}0":{"*":{action_:[{type_:"output",option:2},"color0-output"]}},"\\ce{(...)}":{"*":{action_:[{type_:"output",option:2},"ce"],nextState:"3"}},"\\,":{"*":{action_:[{type_:"output",option:1},"copy"],nextState:"1"}},"\\x{}{}|\\x{}|\\x":{"0|1|2|3|a|as|b|p|bp|o|c0":{action_:["o=","output"],nextState:"3"},"*":{action_:["output","o=","output"],nextState:"3"}},others:{"*":{action_:[{type_:"output",option:1},"copy"],nextState:"3"}},else2:{a:{action_:"a to o",nextState:"o",revisit:!0},as:{action_:["output","sb=true"],nextState:"1",revisit:!0},"r|rt|rd|rdt|rdq":{action_:["output"],nextState:"0",revisit:!0},"*":{action_:["output","copy"],nextState:"3"}}}),actions:{"o after d":function(n,o){var e;if((n.d||"").match(/^[0-9]+$/)){var i=n.d;n.d=void 0,e=this.output(n),n.b=i}else e=this.output(n);return Le.actions["o="](n,o),e},"d= kv":function(n,o){n.d=o,n.dType="kv"},"charge or bond":function(n,o){if(n.beginsWithBond){var e=[];return Le.concatArray(e,this.output(n)),Le.concatArray(e,Le.actions.bond(n,o,"-")),e}n.d=o},"- after o/d":function(n,o,e){var i=Le.patterns.match_("orbital",n.o||""),a=Le.patterns.match_("one lowercase greek letter $",n.o||""),r=Le.patterns.match_("one lowercase latin letter $",n.o||""),s=Le.patterns.match_("$one lowercase latin letter$ $",n.o||""),l="-"===o&&(i&&""===i.remainder||a||r||s);l&&!n.a&&!n.b&&!n.p&&!n.d&&!n.q&&!i&&r&&(n.o="$"+n.o+"$");var c=[];return l?(Le.concatArray(c,this.output(n)),c.push({type_:"hyphen"})):(i=Le.patterns.match_("digits",n.d||""),e&&i&&""===i.remainder?(Le.concatArray(c,Le.actions["d="](n,o)),Le.concatArray(c,this.output(n))):(Le.concatArray(c,this.output(n)),Le.concatArray(c,Le.actions.bond(n,o,"-")))),c},"a to o":function(n){n.o=n.a,n.a=void 0},"sb=true":function(n){n.sb=!0},"sb=false":function(n){n.sb=!1},"beginsWithBond=true":function(n){n.beginsWithBond=!0},"beginsWithBond=false":function(n){n.beginsWithBond=!1},"parenthesisLevel++":function(n){n.parenthesisLevel++},"parenthesisLevel--":function(n){n.parenthesisLevel--},"state of aggregation":function(n,o){return{type_:"state of aggregation",p1:Le.go(o,"o")}},comma:function(n,o){var e=o.replace(/\s*$/,"");return e!==o&&0===n.parenthesisLevel?{type_:"comma enumeration L",p1:e}:{type_:"comma enumeration M",p1:e}},output:function(n,o,e){var i,a,r;for(var s in n.r?(a="M"===n.rdt?Le.go(n.rd,"tex-math"):"T"===n.rdt?[{type_:"text",p1:n.rd||""}]:Le.go(n.rd),r="M"===n.rqt?Le.go(n.rq,"tex-math"):"T"===n.rqt?[{type_:"text",p1:n.rq||""}]:Le.go(n.rq),i={type_:"arrow",r:n.r,rd:a,rq:r}):(i=[],!n.a&&!n.b&&!n.p&&!n.o&&!n.q&&!n.d&&!e||(n.sb&&i.push({type_:"entitySkip"}),n.o||n.q||n.d||n.b||n.p||2===e?n.o||n.q||n.d||!n.b&&!n.p?n.o&&"kv"===n.dType&&Le.patterns.match_("d-oxidation$",n.d||"")?n.dType="oxidation":n.o&&"kv"===n.dType&&!n.q&&(n.dType=void 0):(n.o=n.a,n.d=n.b,n.q=n.p,n.a=n.b=n.p=void 0):(n.o=n.a,n.a=void 0),i.push({type_:"chemfive",a:Le.go(n.a,"a"),b:Le.go(n.b,"bd"),p:Le.go(n.p,"pq"),o:Le.go(n.o,"o"),q:Le.go(n.q,"pq"),d:Le.go(n.d,"oxidation"===n.dType?"oxidation":"bd"),dType:n.dType}))),n)"parenthesisLevel"!==s&&"beginsWithBond"!==s&&delete n[s];return i},"oxidation-output":function(n,o){var e=["{"];return Le.concatArray(e,Le.go(o,"oxidation")),e.push("}"),e},"frac-output":function(n,o){return{type_:"frac-ce",p1:Le.go(o[0]),p2:Le.go(o[1])}},"overset-output":function(n,o){return{type_:"overset",p1:Le.go(o[0]),p2:Le.go(o[1])}},"underset-output":function(n,o){return{type_:"underset",p1:Le.go(o[0]),p2:Le.go(o[1])}},"underbrace-output":function(n,o){return{type_:"underbrace",p1:Le.go(o[0]),p2:Le.go(o[1])}},"color-output":function(n,o){return{type_:"color",color1:o[0],color2:Le.go(o[1])}},"r=":function(n,o){n.r=o},"rdt=":function(n,o){n.rdt=o},"rd=":function(n,o){n.rd=o},"rqt=":function(n,o){n.rqt=o},"rq=":function(n,o){n.rq=o},operator:function(n,o,e){return{type_:"operator",kind_:e||o}}}},a:{transitions:Le.createTransitions({empty:{"*":{}},"1/2$":{0:{action_:"1/2"}},else:{0:{nextState:"1",revisit:!0}},"$(...)$":{"*":{action_:"tex-math tight",nextState:"1"}},",":{"*":{action_:{type_:"insert",option:"commaDecimal"}}},else2:{"*":{action_:"copy"}}}),actions:{}},o:{transitions:Le.createTransitions({empty:{"*":{}},"1/2$":{0:{action_:"1/2"}},else:{0:{nextState:"1",revisit:!0}},letters:{"*":{action_:"rm"}},"\\ca":{"*":{action_:{type_:"insert",option:"circa"}}},"\\x{}{}|\\x{}|\\x":{"*":{action_:"copy"}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"{(...)}":{"*":{action_:"{text}"}},else2:{"*":{action_:"copy"}}}),actions:{}},text:{transitions:Le.createTransitions({empty:{"*":{action_:"output"}},"{...}":{"*":{action_:"text="}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"\\greek":{"*":{action_:["output","rm"]}},"\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:["output","copy"]}},else:{"*":{action_:"text="}}}),actions:{output:function(n){if(n.text_){var o={type_:"text",p1:n.text_};for(var e in n)delete n[e];return o}}}},pq:{transitions:Le.createTransitions({empty:{"*":{}},"state of aggregation $":{"*":{action_:"state of aggregation"}},i$:{0:{nextState:"!f",revisit:!0}},"(KV letters),":{0:{action_:"rm",nextState:"0"}},formula$:{0:{nextState:"f",revisit:!0}},"1/2$":{0:{action_:"1/2"}},else:{0:{nextState:"!f",revisit:!0}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"{(...)}":{"*":{action_:"text"}},"a-z":{f:{action_:"tex-math"}},letters:{"*":{action_:"rm"}},"-9.,9":{"*":{action_:"9,9"}},",":{"*":{action_:{type_:"insert+p1",option:"comma enumeration S"}}},"\\color{(...)}{(...)}1|\\color(...){(...)}2":{"*":{action_:"color-output"}},"\\color{(...)}0":{"*":{action_:"color0-output"}},"\\ce{(...)}":{"*":{action_:"ce"}},"\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"copy"}},else2:{"*":{action_:"copy"}}}),actions:{"state of aggregation":function(n,o){return{type_:"state of aggregation subscript",p1:Le.go(o,"o")}},"color-output":function(n,o){return{type_:"color",color1:o[0],color2:Le.go(o[1],"pq")}}}},bd:{transitions:Le.createTransitions({empty:{"*":{}},x$:{0:{nextState:"!f",revisit:!0}},formula$:{0:{nextState:"f",revisit:!0}},else:{0:{nextState:"!f",revisit:!0}},"-9.,9 no missing 0":{"*":{action_:"9,9"}},".":{"*":{action_:{type_:"insert",option:"electron dot"}}},"a-z":{f:{action_:"tex-math"}},x:{"*":{action_:{type_:"insert",option:"KV x"}}},letters:{"*":{action_:"rm"}},"'":{"*":{action_:{type_:"insert",option:"prime"}}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},"{(...)}":{"*":{action_:"text"}},"\\color{(...)}{(...)}1|\\color(...){(...)}2":{"*":{action_:"color-output"}},"\\color{(...)}0":{"*":{action_:"color0-output"}},"\\ce{(...)}":{"*":{action_:"ce"}},"\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"copy"}},else2:{"*":{action_:"copy"}}}),actions:{"color-output":function(n,o){return{type_:"color",color1:o[0],color2:Le.go(o[1],"bd")}}}},oxidation:{transitions:Le.createTransitions({empty:{"*":{}},"roman numeral":{"*":{action_:"roman-numeral"}},"${(...)}$|$(...)$":{"*":{action_:"tex-math"}},else:{"*":{action_:"copy"}}}),actions:{"roman-numeral":function(n,o){return{type_:"roman numeral",p1:o||""}}}},"tex-math":{transitions:Le.createTransitions({empty:{"*":{action_:"output"}},"\\ce{(...)}":{"*":{action_:["output","ce"]}},"{...}|\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"o="}},else:{"*":{action_:"o="}}}),actions:{output:function(n){if(n.o){var o={type_:"tex-math",p1:n.o};for(var e in n)delete n[e];return o}}}},"tex-math tight":{transitions:Le.createTransitions({empty:{"*":{action_:"output"}},"\\ce{(...)}":{"*":{action_:["output","ce"]}},"{...}|\\,|\\x{}{}|\\x{}|\\x":{"*":{action_:"o="}},"-|+":{"*":{action_:"tight operator"}},else:{"*":{action_:"o="}}}),actions:{"tight operator":function(n,o){n.o=(n.o||"")+"{"+o+"}"},output:function(n){if(n.o){var o={type_:"tex-math",p1:n.o};for(var e in n)delete n[e];return o}}}},"9,9":{transitions:Le.createTransitions({empty:{"*":{}},",":{"*":{action_:"comma"}},else:{"*":{action_:"copy"}}}),actions:{comma:function(){return{type_:"commaDecimal"}}}},pu:{transitions:Le.createTransitions({empty:{"*":{action_:"output"}},space$:{"*":{action_:["output","space"]}},"{[(|)]}":{"0|a":{action_:"copy"}},"(-)(9)^(-9)":{0:{action_:"number^",nextState:"a"}},"(-)(9.,9)(e)(99)":{0:{action_:"enumber",nextState:"a"}},space:{"0|a":{}},"pm-operator":{"0|a":{action_:{type_:"operator",option:"\\pm"},nextState:"0"}},operator:{"0|a":{action_:"copy",nextState:"0"}},"//":{d:{action_:"o=",nextState:"/"}},"/":{d:{action_:"o=",nextState:"/"}},"{...}|else":{"0|d":{action_:"d=",nextState:"d"},a:{action_:["space","d="],nextState:"d"},"/|q":{action_:"q=",nextState:"q"}}}),actions:{enumber:function(n,o){var e=[];return"+-"===o[0]||"+/-"===o[0]?e.push("\\pm "):o[0]&&e.push(o[0]),o[1]&&(Le.concatArray(e,Le.go(o[1],"pu-9,9")),o[2]&&(o[2].match(/[,.]/)?Le.concatArray(e,Le.go(o[2],"pu-9,9")):e.push(o[2])),o[3]=o[4]||o[3],o[3]&&(o[3]=o[3].trim(),"e"===o[3]||"*"===o[3].substr(0,1)?e.push({type_:"cdot"}):e.push({type_:"times"}))),o[3]&&e.push("10^{"+o[5]+"}"),e},"number^":function(n,o){var e=[];return"+-"===o[0]||"+/-"===o[0]?e.push("\\pm "):o[0]&&e.push(o[0]),Le.concatArray(e,Le.go(o[1],"pu-9,9")),e.push("^{"+o[2]+"}"),e},operator:function(n,o,e){return{type_:"operator",kind_:e||o}},space:function(){return{type_:"pu-space-1"}},output:function(n){var o,e=Le.patterns.match_("{(...)}",n.d||"");e&&""===e.remainder&&(n.d=e.match_);var i=Le.patterns.match_("{(...)}",n.q||"");if(i&&""===i.remainder&&(n.q=i.match_),n.d&&(n.d=n.d.replace(/\u00B0C|\^oC|\^{o}C/g,"{}^{\\circ}C"),n.d=n.d.replace(/\u00B0F|\^oF|\^{o}F/g,"{}^{\\circ}F")),n.q){n.q=n.q.replace(/\u00B0C|\^oC|\^{o}C/g,"{}^{\\circ}C"),n.q=n.q.replace(/\u00B0F|\^oF|\^{o}F/g,"{}^{\\circ}F");var a={d:Le.go(n.d,"pu"),q:Le.go(n.q,"pu")};"//"===n.o?o={type_:"pu-frac",p1:a.d,p2:a.q}:((o=a.d).push(a.d.length>1||a.q.length>1?{type_:" / "}:{type_:"/"}),Le.concatArray(o,a.q))}else o=Le.go(n.d,"pu-2");for(var r in n)delete n[r];return o}}},"pu-2":{transitions:Le.createTransitions({empty:{"*":{action_:"output"}},"*":{"*":{action_:["output","cdot"],nextState:"0"}},"\\x":{"*":{action_:"rm="}},space:{"*":{action_:["output","space"],nextState:"0"}},"^{(...)}|^(-1)":{1:{action_:"^(-1)"}},"-9.,9":{0:{action_:"rm=",nextState:"0"},1:{action_:"^(-1)",nextState:"0"}},"{...}|else":{"*":{action_:"rm=",nextState:"1"}}}),actions:{cdot:function(){return{type_:"tight cdot"}},"^(-1)":function(n,o){n.rm+="^{"+o+"}"},space:function(){return{type_:"pu-space-2"}},output:function(n){var o=[];if(n.rm){var e=Le.patterns.match_("{(...)}",n.rm||"");o=e&&""===e.remainder?Le.go(e.match_,"pu"):{type_:"rm",p1:n.rm}}for(var i in n)delete n[i];return o}}},"pu-9,9":{transitions:Le.createTransitions({empty:{0:{action_:"output-0"},o:{action_:"output-o"}},",":{0:{action_:["output-0","comma"],nextState:"o"}},".":{0:{action_:["output-0","copy"],nextState:"o"}},else:{"*":{action_:"text="}}}),actions:{comma:function(){return{type_:"commaDecimal"}},"output-0":function(n){var o=[];if(n.text_=n.text_||"",n.text_.length>4){var e=n.text_.length%3;0===e&&(e=3);for(var i=n.text_.length-3;i>0;i-=3)o.push(n.text_.substr(i,3)),o.push({type_:"1000 separator"});o.push(n.text_.substr(0,e)),o.reverse()}else o.push(n.text_);for(var a in n)delete n[a];return o},"output-o":function(n){var o=[];if(n.text_=n.text_||"",n.text_.length>4){for(var e=n.text_.length-3,i=0;i<e;i+=3)o.push(n.text_.substr(i,3)),o.push({type_:"1000 separator"});o.push(n.text_.substr(i))}else o.push(n.text_);for(var a in n)delete n[a];return o}}}};var Nd,xo={go:function(n,o){if(!n)return"";for(var e="",i=!1,a=0;a<n.length;a++){var r=n[a];"string"==typeof r?e+=r:(e+=xo._go2(r),"1st-level escape"===r.type_&&(i=!0))}return!o&&!i&&e&&(e="{"+e+"}"),e},_goInner:function(n){return n&&xo.go(n,!0)},_go2:function(n){var o;switch(n.type_){case"chemfive":o="";var e={a:xo._goInner(n.a),b:xo._goInner(n.b),p:xo._goInner(n.p),o:xo._goInner(n.o),q:xo._goInner(n.q),d:xo._goInner(n.d)};e.a&&(e.a.match(/^[+\-]/)&&(e.a="{"+e.a+"}"),o+=e.a+"\\,"),(e.b||e.p)&&(o+="{\\vphantom{X}}",o+="^{\\hphantom{"+(e.b||"")+"}}_{\\hphantom{"+(e.p||"")+"}}",o+="{\\vphantom{X}}",o+="^{\\smash[t]{\\vphantom{2}}\\mathllap{"+(e.b||"")+"}}",o+="_{\\vphantom{2}\\mathllap{\\smash[t]{"+(e.p||"")+"}}}"),e.o&&(e.o.match(/^[+\-]/)&&(e.o="{"+e.o+"}"),o+=e.o),"kv"===n.dType?((e.d||e.q)&&(o+="{\\vphantom{X}}"),e.d&&(o+="^{"+e.d+"}"),e.q&&(o+="_{\\smash[t]{"+e.q+"}}")):"oxidation"===n.dType?(e.d&&(o+="{\\vphantom{X}}",o+="^{"+e.d+"}"),e.q&&(o+="{\\vphantom{X}}",o+="_{\\smash[t]{"+e.q+"}}")):(e.q&&(o+="{\\vphantom{X}}",o+="_{\\smash[t]{"+e.q+"}}"),e.d&&(o+="{\\vphantom{X}}",o+="^{"+e.d+"}"));break;case"rm":case"roman numeral":o="\\mathrm{"+n.p1+"}";break;case"text":n.p1.match(/[\^_]/)?(n.p1=n.p1.replace(" ","~").replace("-","\\text{-}"),o="\\mathrm{"+n.p1+"}"):o="\\text{"+n.p1+"}";break;case"state of aggregation":o="\\mskip2mu "+xo._goInner(n.p1);break;case"state of aggregation subscript":o="\\mskip1mu "+xo._goInner(n.p1);break;case"bond":if(!(o=xo._getBond(n.kind_)))throw["MhchemErrorBond","mhchem Error. Unknown bond type ("+n.kind_+")"];break;case"frac":var i="\\frac{"+n.p1+"}{"+n.p2+"}";o="\\mathchoice{\\textstyle"+i+"}{"+i+"}{"+i+"}{"+i+"}";break;case"pu-frac":var a="\\frac{"+xo._goInner(n.p1)+"}{"+xo._goInner(n.p2)+"}";o="\\mathchoice{\\textstyle"+a+"}{"+a+"}{"+a+"}{"+a+"}";break;case"tex-math":case"1st-level escape":o=n.p1+" ";break;case"frac-ce":o="\\frac{"+xo._goInner(n.p1)+"}{"+xo._goInner(n.p2)+"}";break;case"overset":o="\\overset{"+xo._goInner(n.p1)+"}{"+xo._goInner(n.p2)+"}";break;case"underset":o="\\underset{"+xo._goInner(n.p1)+"}{"+xo._goInner(n.p2)+"}";break;case"underbrace":o="\\underbrace{"+xo._goInner(n.p1)+"}_{"+xo._goInner(n.p2)+"}";break;case"color":o="{\\color{"+n.color1+"}{"+xo._goInner(n.color2)+"}}";break;case"color0":o="\\color{"+n.color+"}";break;case"arrow":var r={rd:xo._goInner(n.rd),rq:xo._goInner(n.rq)},s="\\x"+xo._getArrow(n.r);r.rq&&(s+="[{"+r.rq+"}]"),o=s+=r.rd?"{"+r.rd+"}":"{}";break;case"operator":o=xo._getOperator(n.kind_);break;case"space":o=" ";break;case"entitySkip":case"pu-space-1":o="~";break;case"pu-space-2":o="\\mkern3mu ";break;case"1000 separator":o="\\mkern2mu ";break;case"commaDecimal":o="{,}";break;case"comma enumeration L":o="{"+n.p1+"}\\mkern6mu ";break;case"comma enumeration M":o="{"+n.p1+"}\\mkern3mu ";break;case"comma enumeration S":o="{"+n.p1+"}\\mkern1mu ";break;case"hyphen":o="\\text{-}";break;case"addition compound":o="\\,{\\cdot}\\,";break;case"electron dot":o="\\mkern1mu \\bullet\\mkern1mu ";break;case"KV x":o="{\\times}";break;case"prime":o="\\prime ";break;case"cdot":o="\\cdot ";break;case"tight cdot":o="\\mkern1mu{\\cdot}\\mkern1mu ";break;case"times":o="\\times ";break;case"circa":o="{\\sim}";break;case"^":o="uparrow";break;case"v":o="downarrow";break;case"ellipsis":o="\\ldots ";break;case"/":o="/";break;case" / ":o="\\,/\\,";break;default:throw["MhchemBugT","mhchem bug T. Please report."]}return o},_getArrow:function(n){switch(n){case"->":case"\u2192":case"\u27f6":return"rightarrow";case"<-":return"leftarrow";case"<->":return"leftrightarrow";case"<--\x3e":return"rightleftarrows";case"<=>":case"\u21cc":return"rightleftharpoons";case"<=>>":return"rightequilibrium";case"<<=>":return"leftequilibrium";default:throw["MhchemBugT","mhchem bug T. Please report."]}},_getBond:function(n){switch(n){case"-":case"1":return"{-}";case"=":case"2":return"{=}";case"#":case"3":return"{\\equiv}";case"~":return"{\\tripledash}";case"~-":return"{\\mathrlap{\\raisebox{-.1em}{$-$}}\\raisebox{.1em}{$\\tripledash$}}";case"~=":case"~--":return"{\\mathrlap{\\raisebox{-.2em}{$-$}}\\mathrlap{\\raisebox{.2em}{$\\tripledash$}}-}";case"-~-":return"{\\mathrlap{\\raisebox{-.2em}{$-$}}\\mathrlap{\\raisebox{.2em}{$-$}}\\tripledash}";case"...":return"{{\\cdot}{\\cdot}{\\cdot}}";case"....":return"{{\\cdot}{\\cdot}{\\cdot}{\\cdot}}";case"->":return"{\\rightarrow}";case"<-":return"{\\leftarrow}";case"<":return"{<}";case">":return"{>}";default:throw["MhchemBugT","mhchem bug T. Please report."]}},_getOperator:function(n){switch(n){case"+":return" {}+{} ";case"-":return" {}-{} ";case"=":return" {}={} ";case"<":return" {}<{} ";case">":return" {}>{} ";case"<<":return" {}\\ll{} ";case">>":return" {}\\gg{} ";case"\\pm":return" {}\\pm{} ";case"\\approx":case"$\\approx$":return" {}\\approx{} ";case"v":case"(v)":return" \\downarrow{} ";case"^":case"(^)":return" \\uparrow{} ";default:throw["MhchemBugT","mhchem bug T. Please report."]}}},M4=class extends ke{constructor(n,o,e,i){super("delim",e,{command:n,style:i?.style}),this.value=o,this.size=i?.size}static fromJson(n,o){return new M4(n.command,n.delim,o,n)}toJson(){return ei(Ee({},super.toJson()),{delim:this.value,size:this.size})}render(n){let o=new Be(null);return o.delim=this.value,o}serialize(n){return 1===this.value.length?this.command+this.value:`${this.command}{${this.value}}`}},I4=class extends ke{constructor(n,o,e,i){super("sizeddelim",e,{command:n,style:i.style}),this.value=o,this.delimClass=i.delimClass,this.size=i.size}static fromJson(n,o){return new I4(n.command,n.delim,o,n)}toJson(){return ei(Ee({},super.toJson()),{delim:this.value,size:this.size,delimClass:this.delimClass})}render(n){let o=function aH(n,o,e,i){var a;return void 0===n||"."===n?Bm(e,null!=(a=i.type)?a:"minner",i.classes):("<"===n||"\\lt"===n||"\u27e8"===n?n="\\langle":(">"===n||"\\gt"===n||"\u27e9"===n)&&(n="\\rangle"),$5.has(n)||Y5.has(n)?H5(n,o,!1,e,i):iH.has(n)?G5(n,oH[o],!1,e,i):null)}(this.value,this.size,n,{classes:this.delimClass});return o?(o=this.bind(n,o),this.caret&&(o.caret=this.caret),o):null}serialize(n){return 1===this.value.length?this.command+this.value:`${this.command}{${this.value}}`}},jp=class extends ke{constructor(n,o,e,i,a){super("enclose",i,{command:n,style:a.style}),this.body=o,this.backgroundcolor=a.backgroundcolor,e.updiagonalarrow&&(e.updiagonalstrike=!1),e.box&&(e.left=!1,e.right=!1,e.bottom=!1,e.top=!1),this.notation=e,this.shadow=a.shadow,this.strokeWidth=a.strokeWidth,this.strokeStyle=a.strokeStyle,this.svgStrokeStyle=a.svgStrokeStyle,this.strokeColor=a.strokeColor,this.borderStyle=a.borderStyle,this.padding=a.padding,this.captureSelection=!0}static fromJson(n,o){return new jp(n.command,n.body,n.notation,o,n)}toJson(){let n={};return this.notation.downdiagonalstrike&&(n.downdiagonalstrike=!0),this.notation.updiagonalstrike&&(n.downdiagonalstrike=!0),this.notation.verticalstrike&&(n.downdiagonalstrike=!0),this.notation.horizontalstrike&&(n.downdiagonalstrike=!0),this.notation.updiagonalarrow&&(n.downdiagonalstrike=!0),this.notation.right&&(n.downdiagonalstrike=!0),this.notation.bottom&&(n.downdiagonalstrike=!0),this.notation.left&&(n.downdiagonalstrike=!0),this.notation.top&&(n.downdiagonalstrike=!0),this.notation.circle&&(n.downdiagonalstrike=!0),this.notation.roundedbox&&(n.downdiagonalstrike=!0),this.notation.madruwb&&(n.downdiagonalstrike=!0),this.notation.actuarial&&(n.downdiagonalstrike=!0),this.notation.box&&(n.downdiagonalstrike=!0),ei(Ee({},super.toJson()),{notation:n,shadow:this.shadow,strokeWidth:this.strokeWidth,strokeStyle:this.strokeStyle,svgStrokeStyle:this.svgStrokeStyle,strokeColor:this.strokeColor,borderStyle:this.borderStyle,padding:this.padding})}serialize(n){var o;let e=null!=(o=this.command)?o:"";if("\\enclose"===this.command){e+="{"+Object.keys(this.notation).join(" ")+"}";let i="",a="";this.backgroundcolor&&"transparent"!==this.backgroundcolor&&(i+=a+'mathbackground="'+this.backgroundcolor+'"',a=","),this.shadow&&"auto"!==this.shadow&&(i+=a+'shadow="'+this.shadow+'"',a=","),this.strokeWidth||"solid"!==this.strokeStyle?(i+=a+this.borderStyle,a=","):this.strokeColor&&"currentColor"!==this.strokeColor&&(i+=a+'mathcolor="'+this.strokeColor+'"',a=","),i&&(e+=`[${i}]`)}return e+=`{${this.bodyToLatex(n)}}`,e}render(n){var o;let e=new ni(n,this.style),i=ke.createBox(e,this.body);if(!i)return null;let a=null!=(o=Qc(this.padding&&"auto"!==this.padding?yx(this.padding,ei(Ee({},this.context),{registers:n.registers})):e.getRegisterAsDimension("fboxsep")))?o:0,r=function _H(n){if(!n)return"1px";let o=n.match(/([0-9][a-zA-Z\%]+)/);return null===o?"1px":o[1]}(this.borderStyle),s=new Be(null,{classes:"ML__notation"});s.setStyle("box-sizing","border-box"),s.setStyle("top",`calc(-${r} / 2 - ${a}em)`),s.setStyle("left",`calc(-${r} / 2 - ${a}em)`),s.setStyle("height",`calc(100% + ${2*a}em + 2 * ${r})`),s.height=i.height+a,s.depth=i.depth+a,s.setStyle("width",`calc(100% + ${2*a}em + 2 * ${r})`),this.backgroundcolor&&s.setStyle("background-color",this.backgroundcolor),this.notation.box&&s.setStyle("border",this.borderStyle),this.notation.actuarial&&(s.setStyle("border-top",this.borderStyle),s.setStyle("border-right",this.borderStyle)),this.notation.madruwb&&(s.setStyle("border-bottom",this.borderStyle),s.setStyle("border-right",this.borderStyle)),this.notation.roundedbox&&(s.setStyle("border-radius","8px"),s.setStyle("border",this.borderStyle)),this.notation.circle&&(s.setStyle("border-radius","50%"),s.setStyle("border",this.borderStyle)),this.notation.top&&s.setStyle("border-top",this.borderStyle),this.notation.left&&s.setStyle("border-left",this.borderStyle),this.notation.right&&s.setStyle("border-right",this.borderStyle),this.notation.bottom&&s.setStyle("border-bottom",this.borderStyle);let l="";if(this.notation.horizontalstrike&&(l+='<line x1="3%"  y1="50%" x2="97%" y2="50%"',l+=` stroke-width="${this.strokeWidth}" stroke="${this.strokeColor}"`,l+=' stroke-linecap="round"',this.svgStrokeStyle&&(l+=` stroke-dasharray="${this.svgStrokeStyle}"`),l+="/>"),this.notation.verticalstrike&&(l+='<line x1="50%"  y1="3%" x2="50%" y2="97%"',l+=` stroke-width="${this.strokeWidth}" stroke="${this.strokeColor}"`,l+=' stroke-linecap="round"',this.svgStrokeStyle&&(l+=` stroke-dasharray="${this.svgStrokeStyle}"`),l+="/>"),this.notation.updiagonalstrike&&(l+='<line x1="3%"  y1="97%" x2="97%" y2="3%"',l+=` stroke-width="${this.strokeWidth}" stroke="${this.strokeColor}"`,l+=' stroke-linecap="round"',this.svgStrokeStyle&&(l+=` stroke-dasharray="${this.svgStrokeStyle}"`),l+="/>"),this.notation.downdiagonalstrike&&(l+='<line x1="3%"  y1="3%" x2="97%" y2="97%"',l+=` stroke-width="${this.strokeWidth}" stroke="${this.strokeColor}"`,l+=' stroke-linecap="round"',this.svgStrokeStyle&&(l+=` stroke-dasharray="${this.svgStrokeStyle}"`),l+="/>"),l){let d;"none"!==this.shadow&&(d="auto"===this.shadow?"filter: drop-shadow(0 0 .5px rgba(255, 255, 255, .7)) drop-shadow(1px 1px 2px #333)":"filter: drop-shadow("+this.shadow+")"),function zJ(n,o,e){n.svgOverlay=o,n.svgStyle=e}(s,l,d)}let c=new Be([s,i]);return c.setStyle("position","relative"),c.setStyle("display","inline"),c.height=i.height+a,c.depth=i.depth+a,c.left=a,c.right=a,this.caret&&(c.caret=this.caret),c.wrap(e)}},Hm=class extends ke{constructor(n,o,e,i,a){var r,s;super("genfrac",i,{style:a.style,command:n,serialize:a.serialize,displayContainsHighlight:!0}),this.above=o,this.below=e,this.hasBarLine=null==(r=a?.hasBarLine)||r,this.continuousFraction=null!=(s=a?.continuousFraction)&&s,this.numerPrefix=a?.numerPrefix,this.denomPrefix=a?.denomPrefix,this.mathstyleName=a?.mathstyleName,this.leftDelim=a?.leftDelim,this.rightDelim=a?.rightDelim}static fromJson(n,o){return new Hm(n.command,n.above,n.below,o,n)}toJson(){let n={};return this.continuousFraction&&(n.continuousFraction=!0),this.numerPrefix&&(n.numerPrefix=this.numerPrefix),this.denomPrefix&&(n.denomPrefix=this.denomPrefix),this.leftDelim&&(n.leftDelim=this.leftDelim),this.rightDelim&&(n.rightDelim=this.rightDelim),this.hasBarLine||(n.hasBarLine=!1),this.mathstyleName&&(n.mathstyleName=this.mathstyleName),Ee(Ee({},super.toJson()),n)}serialize(n){return this.command+`{${this.aboveToLatex(n)}}{${this.belowToLatex(n)}}`}get children(){if(this._children)return this._children;let n=[];if("numerator-denominator"===this.context.fractionNavigationOrder){for(let o of this.above)n.push(...o.children),n.push(o);for(let o of this.below)n.push(...o.children),n.push(o)}else{for(let o of this.below)n.push(...o.children),n.push(o);for(let o of this.above)n.push(...o.children),n.push(o)}return this._children=n,n}render(n){var o,e;let h,x,i=new ni(n,this.style,this.mathstyleName),a=i.metrics,r=new ni(i,this.style,this.continuousFraction?"":"numerator"),s=this.numerPrefix?new Be([new Be(this.numerPrefix),ke.createBox(r,this.above)],{isTight:r.isTight,newList:!0}):null!=(o=ke.createBox(r,this.above,{newList:!0}))?o:new Be(null,{newList:!0}),l=new ni(i,this.style,this.continuousFraction?"":"denominator"),c=this.denomPrefix?new Be([new Be(this.denomPrefix),ke.createBox(l,this.below,{newList:!0})]):null!=(e=ke.createBox(l,this.below,{newList:!0}))?e:new Be(null,{newList:!0}),d=this.hasBarLine?a.defaultRuleThickness:0,_=0;i.isDisplayStyle?(h=a.num1,_=d>0?3*d:7*d,x=a.denom1):(d>0?(h=a.num2,_=d):(h=a.num3,_=3*d),x=a.denom2);let b=[];this.isSelected&&b.push("ML__selected");let U,T=s.depth,P=c.height;if(d<=0){let At=h-T-(P-x);At<_&&(h+=(_-At)/2,x+=(_-At)/2),U=new ma({individualShift:[{box:s,shift:-h,classes:[...b,"ML__center"]},{box:c,shift:x,classes:[...b,"ML__center"]}]}).wrap(i)}else{let At=Hl+d/2,ut=Hl-d/2;h<_+T+At&&(h=_+T+At),x<_+P-ut&&(x=_+P-ut);let et=new Be(null,{classes:"ML__frac-line",mode:this.mode,style:this.style});et.height=d/2,et.depth=d/2,U=new ma({individualShift:[{box:c,shift:x,classes:[...b,"ML__center"]},{box:et,shift:d/2-ut,classes:b},{box:s,shift:-h,classes:[...b,"ML__center"]}]}).wrap(i)}let q=i.isDisplayStyle?a.delim1:a.delim2,B=this.isSelected?" ML__selected":"",W=this.leftDelim?this.bind(n,xx("mopen",this.leftDelim,q,!0,n,{style:this.style,mode:this.mode,classes:B})):Bm(i,"mopen"),G=null;G=this.continuousFraction?new Be(null,{type:"mclose"}):this.rightDelim?this.bind(n,xx("mclose",this.rightDelim,q,!0,n,{style:this.style,mode:this.mode,classes:B})):Bm(i,"mclose");let nt=this.bind(n,new Be([W,U,G],{isTight:i.isTight,type:"mord",classes:"mfrac"}));return nt?(this.caret&&(nt.caret=this.caret),this.attachSupsub(n,{base:nt})):null}},ha=class extends ke{constructor(n,o,e){var i;super("latex",o,{value:n,mode:"latex"}),this.isSuggestion=null!=(i=e?.isSuggestion)&&i,this.isError=!1,this.verbatimLatex=n}static fromJson(n,o){let e=new ha(n.command,o);return n.isSuggestion&&(e.isSuggestion=!0),n.isError&&(e.isError=!0),e}toJson(){let n={};return this.isSuggestion&&(n.isSuggestion=!0),this.isError&&(n.isError=!0),Ee(Ee({},super.toJson()),n)}get computedStyle(){return{}}render(n){let o=new Be(this.value,{classes:this.isSuggestion?"ML__suggestion":this.isError?"ML__error":"",type:"latex",maxFontSize:1});return o?(this.caret&&(o.caret=this.caret),this.bind(n,o)):null}},Ld=class extends ke{constructor(n,o){super("latexgroup",o,{mode:"latex"}),this.body=[...n].map(e=>new ha(e,o)),this.skipBoundary=!1}static fromJson(n,o){return new Ld("",o)}toJson(){return super.toJson()}render(n){let o=ke.createBox(n,this.body,{newList:!0});return o?(this.caret&&(o.caret=this.caret),this.bind(n,o)):null}serialize(n){var o,e;return null!=(e=null==(o=this.body)?void 0:o.map(i=>i.value).join(""))?e:""}},Tx=class extends ke{constructor(n,o,e,i){super("line",e,{command:n,style:i.style}),this.skipBoundary=!0,this.body=o,this.position=i.position}static fromJson(n,o){return new Tx(n.command,n.body,o,n)}toJson(){return ei(Ee({},super.toJson()),{position:this.position})}render(n){let o=new ni(n,this.style,"cramp"),e=ke.createBox(o,this.body);if(!e)return null;let r,i=o.metrics.defaultRuleThickness/o.scalingFactor,a=new Be(null,{classes:this.position+"-line"});return a.height=i,a.maxFontSize=1.125*i*o.scalingFactor,r=new ma("overline"===this.position?{shift:0,children:[{box:e},3*i,{box:a},i]}:{top:e.height,children:[i,{box:a},3*i,{box:e}]}),this.caret&&(r.caret=this.caret),new Be(r,{classes:this.position,type:"mord"})}},qs=class extends ke{constructor(n,o,e,i){var a,r,s,l;super(null!=(a=i.type)?a:"mop",e,{command:n,style:i.style,isFunction:i?.isFunction}),"string"==typeof o?this.value=o:this.body=o,this.captureSelection=null!=(r=i.captureSelection)&&r,this.hasArgument=null!=(s=i.hasArgument)&&s,this.variant=i?.variant,this.variantStyle=i?.variantStyle,this.subsupPlacement=i?.limits,this.isExtensibleSymbol=null!=(l=i?.isExtensibleSymbol)&&l}static fromJson(n,o){return new qs(n.command,n.body?n.body:n.value,o,n)}toJson(){let n=super.toJson();return this.hasArgument&&(n.hasArgument=!0),this.variant&&(n.variant=this.variant),this.variantStyle&&(n.variantStyle=this.variantStyle),this.subsupPlacement&&(n.limits=this.subsupPlacement),this.isExtensibleSymbol&&(n.isExtensibleSymbol=!0),this.value&&(n.symbol=this.value),n}render(n){var o;let e,i=0,a=0;if(this.isExtensibleSymbol){let s=n.isDisplayStyle&&"\\smallint"!==this.value;if(e=new Be(this.value,{fontFamily:s?"Size2-Regular":"Size1-Regular",classes:"op-symbol "+(s?"large-op":"small-op"),type:"mop",maxFontSize:n.scalingFactor}),!e)return null;e.right=e.italic,i=(e.height-e.depth)/2-Hl*n.scalingFactor,a=e.italic,e.setStyle("color",this.style.color),e.setStyle("background-color",this.style.backgroundColor)}else if(this.body){if(e=ke.createBox(n,this.body,{newList:!0}),!e)return null;e.setStyle("color",this.style.color),e.setStyle("background-color",this.style.backgroundColor)}else e=new Be(this.value,{type:"mop",mode:"math",maxFontSize:n.scalingFactor,style:{color:this.style.color,backgroundColor:this.style.backgroundColor,letterShapeStyle:n.letterShapeStyle,variant:this.variant,variantStyle:this.variantStyle}});this.isExtensibleSymbol&&e.setTop(i);let r=e;if(this.superscript||this.subscript){let s=null!=(o=this.subsupPlacement)?o:"auto";r="over-under"===s||"auto"===s&&n.isDisplayStyle?this.attachLimits(n,{base:e,baseShift:i,slant:a}):this.attachSupsub(n,{base:e})}return this.caret&&(r.caret=this.caret),new Be(this.bind(n,r),{type:"mop",classes:"op-group"+(this.isSelected?" ML__selected":"")})}serialize(n){if("\u200b"===this.value)return this.supsubToLatex(n);let o=[];return o.push(this.command),this.hasArgument&&o.push(`{${this.bodyToLatex(n)}}`),this.explicitSubsupPlacement&&("over-under"===this.subsupPlacement&&o.push("\\limits"),"adjacent"===this.subsupPlacement&&o.push("\\nolimits"),"auto"===this.subsupPlacement&&o.push("\\displaylimits")),o.push(this.supsubToLatex(n)),Fo(o)}},Pd=class extends ke{constructor(n,o,e,i){var a,r;super("overlap",e,{command:n,style:i?.style}),this.skipBoundary=!0,this.body="string"==typeof o?[new ke("mord",e,{value:o})]:o,this.align=null!=(a=i?.align)?a:"left",this.boxType=null!=(r=i?.boxType)?r:"mord"}static fromJson(n,o){return new Pd(n.command,n.body,o,n)}toJson(){let n={};return this.align&&(n.align=this.align),this.boxType&&(n.boxType=this.boxType),Ee(Ee({},super.toJson()),n)}render(n){let o=ke.createBox(n,this.body,{classes:"inner"});return o?(this.caret&&(o.caret=this.caret),this.bind(n,new Be([o,new Be(null,{classes:"fix"})],{classes:"left"===this.align?"llap":"rlap",type:this.boxType}))):null}},Gm=class extends ke{constructor(n,o,e,i){var a,r,s,l;super("phantom",e,{command:n,style:i.style}),this.captureSelection=!0,this.body=o,this.isInvisible=null!=(a=i.isInvisible)&&a,this.smashDepth=null!=(r=i.smashDepth)&&r,this.smashHeight=null!=(s=i.smashHeight)&&s,this.smashWidth=null!=(l=i.smashWidth)&&l}static fromJson(n,o){return new Gm(n.command,n.body,o,n)}toJson(){let n={};return this.isInvisible&&(n.isInvisible=!0),this.smashDepth&&(n.smashDepth=!0),this.smashHeight&&(n.smashHeight=!0),this.smashWidth&&(n.smashWidth=!0),Ee(Ee({},super.toJson()),n)}render(n){let o=new ni(n,{isPhantom:!0});if(!this.smashDepth&&!this.smashHeight&&!this.smashWidth)return ke.createBox(o,this.body,{classes:"inner"});let e=ke.createBox(this.isInvisible?o:n,this.body);if(!e)return null;if(this.smashWidth){let i=new Be(null,{classes:"fix"});return new Be([e,i],{classes:"rlap"}).wrap(n)}if(!this.smashHeight&&!this.smashDepth)return e;if(this.smashHeight&&(e.height=0),this.smashDepth&&(e.depth=0),e.children)for(let i of e.children)this.smashHeight&&(i.height=0),this.smashDepth&&(i.depth=0);return new ma({firstBaseline:[{box:e}]},{type:"mord"}).wrap(n)}},L4=class extends ke{constructor(n,o,e){var i;super("rule",o,{command:n,style:e.style}),this.shift=null!=(i=e.shift)?i:{dimension:0},this.height=e.height,this.width=e.width}static fromJson(n,o){return new L4(n.command,o,n)}toJson(){let n={height:this.height,width:this.width};return this.shift&&(n.shift=this.shift),Ee(Ee({},super.toJson()),n)}render(n){let o=new ni(n,this.style,"textstyle"),e=Qc(this.shift),i=Qc(this.width),a=Qc(this.height),r=new Be(null,{classes:"rule",type:"mord"});return r.setStyle("border-right-width",i,"em"),r.setStyle("border-top-width",a,"em"),r.setStyle("border-color",this.style.color),r.setStyle("vertical-align",e,"em"),this.isSelected&&r.setStyle("opacity","50%"),r.width=i,r.height=a+e,r.depth=-e,this.bind(n,r),this.caret&&(r.caret=this.caret),r.wrap(o)}serialize(n){var o;let e=null!=(o=this.command)?o:"";return this.shift&&(e+=`[${y4(this.shift)}]`),e+=`{${y4(this.width)}}{${y4(this.height)}}`,e}},P4=class extends ke{constructor(n,o,e){var i;super("surd",o,{command:n,mode:null!=(i=e.mode)?i:"math",style:e.style,displayContainsHighlight:!0}),this.body=e.body,this.above=e.index}static fromJson(n,o){return new P4(n.command,o,ei(Ee({},n),{index:n.above}))}toJson(){return super.toJson()}serialize(n){let o="";return this.above&&(o+=`[${this.aboveToLatex(n)}]`),o+=`{${this.bodyToLatex(n)}}`,this.command+o}render(n){var o;let e=new ni(n,this.style,"cramp"),i=null!=(o=ke.createBox(e,this.body,{style:this.style,newList:!0}))?o:new Be(null),a=e.scalingFactor,r=e.metrics.defaultRuleThickness/a,s=n.isDisplayStyle?qm:r,l=new Be(null,{classes:"ML__sqrt-line",style:this.style,height:r}),c=a*(r+s/4),d=Math.max(2*a*s,i.height+i.depth)+c+r,h=new ni(n,this.style),_=this.isSelected?" ML__selected":"",x=this.bind(h,new Be(xx("","\\surd",d,!1,h,{classes:_}),{classes:"ML__sqrt-sign"+_,style:this.style}));if(!x)return null;let b=x.height+x.depth-r;b>i.height+i.depth+c&&(c=(c+b-(i.height+i.depth))/2),x.setTop(x.height-i.height-c);let T=this.bind(n,new ma({firstBaseline:[{box:new Be(i)},c-2*r,{box:l},r]}).wrap(n)),P=ke.createBox(new ni(n,this.style,"scriptscriptstyle"),this.above,{style:this.style,newList:!0});if(!P){let B=new Be([x,T],{classes:this.containsCaret?"ML__contains-caret":"",type:"mord"});return this.caret&&(B.caret=this.caret),this.bind(n,B.wrap(n))}let U=new ma({shift:-.6*(Math.max(x.height,T.height)-Math.max(x.depth,T.depth)),children:[{box:P}]}),q=new Be([new Be(U,{classes:"ML__sqrt-index"}),x,T],{type:"mord",classes:this.containsCaret?"ML__contains-caret":""});return q.height=x.height,q.depth=x.depth,this.caret&&(q.caret=this.caret),this.bind(n,q.wrap(n))}},W5={"p@":"1pt ","z@":"0pt",maxdimen:"16383.99999pt",hfuzz:"0.1pt",vfuzz:"0.1pt",overfullrule:"5pt",hsize:"6.5in",vsize:"8.9in",parindent:"20pt",maxdepth:"4pt",splitmaxdepth:"\\maxdimen",boxmaxdepth:"\\maxdimen",delimitershortfall:"5pt",nulldelimiterspace:"1.2pt",scriptspace:"0.5pt",topskip:"10pt",splittopskip:"10pt",normalbaselineskip:"12pt",normallineskip:"1pt",normallineskiplimit:"0pt",jot:"3pt",doublerulesep:"2pt",arrayrulewidth:"0.4pt",arraycolsep:"5pt",fboxsep:"3pt",fboxrule:"0.4pt"},V5={"z@skip":"0pt plust0pt minus0pt",hideskip:"-1000pt plust 1fill","@flushglue":"0pt plust 1fill",parskip:"0pt plus 1pt",abovedisplayskip:"12pt plus 3pt minus 9pt",abovedisplayshortskip:"0pt plus 3pt",belowdisplayskip:"12pt plus 3pt minus 9pt",belowdisplayshortskip:"7pt plus 3pt minus 4pt",parfillskip:"0pt plus 1fil",thinmuskip:"3mu",medmuskip:"4mu plus 2mu minus 4mu",thickmuskip:"5mu plus 5mu",smallskipamount:"3pt plus1pt minus1pt",medskipamount:"6pt plus2pt minus2pt",bigskipamount:"12pt plus4pt minus4pt"},fH={pretolerance:100,tolerance:200,hbadness:1e3,vbadness:1e3,linepenalty:10,hyphenpenalty:50,exhyphenpenalty:50,binoppenalty:700,relpenalty:500,clubpenalty:150,widowpenalty:150,displaywidowpenalty:50,brokenpenalty:100,predisplaypenalty:1e4,doublehyphendemerits:1e4,finalhyphendemerits:5e3,adjdemerits:1e4,tracinglostchars:1,uchyph:1,delimiterfactor:901,defaulthyphenchar:"\\-",defaultskewchar:-1,newlinechar:-1,showboxbreadth:5,showboxdepth:3,errorcontextlines:5,interdisplaylinepenalty:100,interfootnotelinepenalty:100,baselineSkip:1.2,arraystretch:"",month:(new Date).getMonth()+1,day:(new Date).getDate(),year:(new Date).getFullYear()};function X5(n){var o,e;if(Nd)return Nd;Nd=Ee({},fH);for(let i of Object.keys(W5))Nd[i]=null!=(o=yx(W5[i],n,Nd))?o:0;for(let i of Object.keys(V5))Nd[i]=null!=(e=mH(V5[i],n,Nd))?e:0;return Nd}function $m(){let n={registers:{},smartFence:!1,fractionNavigationOrder:"numerator-denominator",placeholderSymbol:"\u25a2",letterShapeStyle:go.locale.startsWith("fr")?"french":"tex",colorMap:ox,backgroundColorMap:c4,getDefinition:N4,getMacro:o=>tC(o,_4())};return ei(Ee({},n),{registers:X5(n)})}function N4(n,o="math"){if(!n||0===n.length)return null;let e=null;if(n.startsWith("\\")){if(e=qc[n],e)return e;"math"===o?e=jc[n]:Pu[n]&&(e={definitionType:"symbol",type:"mord",codepoint:Pu[n]})}else if("math"===o){if(e=jc[n],!e&&1===n.length){let i=sx("math",n.codePointAt(0));return i.startsWith("\\")?ei(Ee({},N4(i,"math")),{command:i}):null}}else Pu[n]?e={definitionType:"symbol",type:"mord",codepoint:Pu[n]}:"text"===o&&(e={definitionType:"symbol",type:"mord",codepoint:n.codePointAt(0)});return e&&"symbol"===e.definitionType&&"mord"===e.type&&(102===e.codepoint||103===e.codepoint||104===e.codepoint)&&(e.isFunction=!0),e??null}function tC(n,o){return n.startsWith("\\")?o[n.slice(1)]:null}var kx=class extends ke{constructor(n,o,e,i){super("tooltip",e,{command:i?.command,mode:"math",serialize:i?.serialize,style:i?.style,displayContainsHighlight:!0}),this.body=n;let a=$m();this.tooltip=new ke("root",a,{style:{}}),this.tooltip.body=o,this.skipBoundary=!0,this.captureSelection=!1}static fromJson(n,o){return new kx(n.body,$l(n.tooltip,o),o,n)}toJson(){var n;let o=null==(n=this.tooltip.body)?void 0:n.filter(e=>"first"!==e.type).map(e=>e.toJson());return ei(Ee({},super.toJson()),{tooltip:o})}render(n){let o=ke.createBox(n,this.body,{style:this.style});if(!o)return null;let e=mx(Pp(new Be(this.tooltip.render(new ni({registers:n.registers},{fontSize:Fm},"displaystyle")),{classes:"ML__tooltip-content"}))),i=new Be([e,o],{classes:"ML__tooltip-container"});return this.caret&&(i.caret=this.caret),this.bind(n,i)}serialize(n){return`${this.command}{${this.bodyToLatex(n)}}{${ke.serialize(this.tooltip.body,n)}}`}};function $l(n,o){if(qa(n))return n.map(a=>$l(a,o));n=Ee({},n);for(let a of Rm)n[a]&&(n[a]=$l(n[a],o));n.array&&(n.array=$l(n.array,o));let i,e=n.type;"accent"===e&&(i=lg.fromJson(n,o)),"array"===e&&(i=Lo.fromJson(n,o)),"box"===e&&(i=Jm.fromJson(n,o)),"chem"===e&&(i=E4.fromJson(n,o)),"choice"===e&&(i=Z4.fromJson(n,o)),"composition"===e&&(i=O4.fromJson(n,o)),"delim"===e&&(i=M4.fromJson(n,o)),"enclose"===e&&(i=jp.fromJson(n,o)),"error"===e&&(i=A4.fromJson(n,o)),"genfrac"===e&&(i=Hm.fromJson(n,o)),"group"===e&&(i=Fa.fromJson(n,o)),"latex"===e&&(i=ha.fromJson(n,o)),"latexgroup"===e&&(i=Ld.fromJson(n,o)),"leftright"===e&&(i=ur.fromJson(n,o)),"line"===e&&(i=Tx.fromJson(n,o)),"macro"===e&&(i=S4.fromJson(n,o)),"msubsup"===e&&(i=dg.fromJson(n,o)),"overlap"===e&&(i=Pd.fromJson(n,o)),"overunder"===e&&(i=js.fromJson(n,o)),"placeholder"===e&&(n.defaultValue&&(n.defaultValue=$l(n.defaultValue,o)),i=$o.fromJson(n,o)),"phantom"===e&&(i=Gm.fromJson(n,o)),"rule"===e&&(i=L4.fromJson(n,o)),"sizeddelim"===e&&(i=I4.fromJson(n,o)),"spacing"===e&&(i=zm.fromJson(n,o)),"surd"===e&&(i=P4.fromJson(n,o)),"text"===e&&(i=Dp.fromJson(n,o)),"tooltip"===e&&(i=kx.fromJson(n,o)),"mop"===e&&(i=qs.fromJson(n,o)),i||(["first","mbin","mrel","mclose","minner","mopen","mord","mpunct","root","space"].includes(e),i=ke.fromJson(n,o));for(let a of Rm)n[a]&&i.setChildren(n[a],a);return void 0!==n.verbatimLatex&&(i.verbatimLatex=n.verbatimLatex),n.subsupPlacement&&(i.subsupPlacement=n.subsupPlacement),n.explicitSubsupPlacement&&(i.explicitSubsupPlacement=!0),n.isFunction&&(i.isFunction=!0),n.isExtensibleSymbol&&(i.isExtensibleSymbol=!0),n.skipBoundary&&(i.skipBoundary=!0),n.captureSelection&&(i.captureSelection=!0),i}var Z4=class extends ke{constructor(n,o){super("choice",o),this.choices=n,this.skipBoundary=!0}static fromJson(n,o){return new Z4([$l(n.choices[0],o),$l(n.choices[1],o),$l(n.choices[2],o),$l(n.choices[3],o)],o)}toJson(){let n=[];for(let o of this.choices)n.push(o.filter(e=>"first"!==e.type).map(e=>e.toJson()));return ei(Ee({},super.toJson()),{choices:n})}render(n){let o=ke.createBox(n,this.choices[Math.floor(n.mathstyle.id/2)]);return o?(this.caret&&(o.caret=this.caret),this.bind(n,o)):null}serialize(n){return`\\mathchoice{${ke.serialize(this.choices[0],n)}}{${ke.serialize(this.choices[1],n)}}{${ke.serialize(this.choices[2],n)}}{${ke.serialize(this.choices[3],n)}}`}};Te("mathtip","{:math}{:math}",{createAtom:(n,o,e,i)=>new kx(o[0],o[1],i,{command:n,content:"math",style:e})}),Te("texttip","{:math}{:text}",{createAtom:(n,o,e,i)=>new kx(o[0],o[1],i,{command:n,content:"text",style:e})}),Te("error","{:math}",{createAtom:(n,o,e,i)=>new Fa(o[0],i,{mode:"math",command:"\\error",customClass:"ML__error",style:e,serialize:(a,r)=>`\\error{${a.bodyToLatex(r)}}`})}),Te("ensuremath","{:math}",{createAtom:(n,o,e,i)=>new Fa(o[0],i,{mode:"math",latexOpen:"\\ensuremath{",latexClose:"}",style:e})}),Te("color","{:string}",{applyStyle:(n,o,e)=>{var i,a;let r=o[0];return{verbatimColor:o[0],color:null!=(a=null==(i=e.colorMap)?void 0:i.call(e,r))?a:r}}}),Te("textcolor","{:string}{content:auto*}",{applyStyle:(n,o,e)=>{var i,a;let r=o[0];return{verbatimColor:r,color:null!=(a=null==(i=e.colorMap)?void 0:i.call(e,r))?a:r}}}),Te("boxed","{content:math}",{createAtom:(n,o,e,i)=>new Jm(n,o[0],i,{framecolor:"black",style:e})}),Te("colorbox","{:string}{content:auto*}",{applyMode:"text",applyStyle:(n,o,e)=>{var i,a;let r=o[0];return{verbatimBackgroundColor:o[0],backgroundColor:null!=(a=null==(i=e.backgroundColorMap)?void 0:i.call(e,r))?a:r}}}),Te("fcolorbox","{frame-color:string}{background-color:string}{content:auto}",{applyMode:"text",createAtom:(n,o,e,i)=>{var a,r,s,l;let c=o[0],d=o[1];return new Jm(n,o[2],i,{verbatimFramecolor:c,framecolor:null!=(r=null==(a=i.colorMap)?void 0:a.call(i,c))?r:c,verbatimBackgroundcolor:o[1],backgroundcolor:null!=(l=null==(s=i.backgroundColorMap)?void 0:s.call(i,d))?l:d,style:e,serialize:(h,_)=>{var x,b;return`${h.command}{${null!=(x=h.verbatimFramecolor)?x:h.framecolor}{${null!=(b=h.verbatimBackgroundcolor)?b:h.backgroundcolor}}{${h.bodyToLatex(_)}}`}})}}),Te("bbox","[:bbox]{body:auto}",{createAtom:(n,o,e,i)=>{if(o[0]){let a=o[0];return new Jm(n,o[1],i,{padding:a.padding,border:a.border,backgroundcolor:a.backgroundcolor,style:e,serialize:(r,s)=>{var l;let c=n;if(Number.isFinite(r.padding)||void 0!==r.border||void 0!==r.backgroundcolor){let d=[];r.padding&&d.push(r.padding),r.border&&d.push(`border: ${r.border}`),(r.verbatimBackgroundcolor||r.backgroundcolor)&&d.push(null!=(l=r.verbatimBackgroundcolor)?l:r.backgroundcolor),c+=`[${d.join(",")}]`}return c+`{${r.bodyToLatex(s)}}`}})}return new Jm(n,o[1],i,{style:e})}}),Te(["displaystyle","textstyle","scriptstyle","scriptscriptstyle"],"{:rest}",{createAtom:(n,o,e,i)=>new Fa(o[0],i,{latexOpen:`{${n} `,latexClose:"}",style:e,mathstyleName:n.slice(1)})}),Te(["tiny","scriptsize","footnotesize","small","normalsize","large","Large","LARGE","huge","Huge"],"",{applyStyle:(n,o)=>({fontSize:{"\\tiny":1,"\\scriptsize":2,"\\footnotesize":3,"\\small":4,"\\normalsize":5,"\\large":6,"\\Large":7,"\\LARGE":8,"\\huge":9,"\\Huge":10}[n]})}),Te("fontseries","{:string}",{ifMode:"text",applyStyle:(n,o)=>({fontSeries:o[0]})}),Te("fontshape","{:string}",{ifMode:"text",applyStyle:(n,o)=>({fontShape:o[0]})}),Te("fontfamily","{:string}",{ifMode:"text",applyStyle:(n,o)=>({fontFamily:o[0]})}),Te("selectfont","",{ifMode:"text",applyStyle:(n,o)=>({})}),Te("bf","",{applyStyle:(n,o)=>({fontSeries:"b",fontShape:"n",fontFamily:"cmr"})}),Te(["boldsymbol","bm"],"{:math*}",{applyMode:"math",createAtom:(n,o,e,i)=>new Fa(o[0],i,{latexOpen:`${n}{`,latexClose:"}",style:e,customClass:"ML__boldsymbol"})}),Te("bold","{:math*}",{applyMode:"math",applyStyle:(n,o)=>({variantStyle:"bold"})}),Te("bfseries","",{applyMode:"text",applyStyle:(n,o)=>({fontSeries:"b"})}),Te("mdseries","",{applyMode:"text",applyStyle:(n,o)=>({fontSeries:"m"})}),Te("upshape","",{applyMode:"text",applyStyle:(n,o)=>({fontShape:"n"})}),Te("slshape","",{applyMode:"text",applyStyle:(n,o)=>({fontShape:"sl"})}),Te("scshape","",{applyMode:"text",applyStyle:(n,o)=>({fontShape:"sc"})}),Te("textbf","{:text*}",{applyMode:"text",applyStyle:(n,o)=>({fontSeries:"b"})}),Te("textmd","{:text*}",{applyMode:"text",applyStyle:(n,o)=>({fontSeries:"m"})}),Te("textup","{:text*}",{applyMode:"text",applyStyle:(n,o)=>({fontShape:"n"})}),Te("textnormal","{:text*}",{applyMode:"text",applyStyle:(n,o)=>({fontShape:"n",fontSeries:"m"})}),Te("textsl","{:text*}",{applyMode:"text",applyStyle:(n,o)=>({fontShape:"sl"})}),Te("textit","{:text*}",{applyMode:"text",applyStyle:(n,o)=>({fontShape:"it"})}),Te("textsc","{:text*}",{applyMode:"text",applyStyle:(n,o)=>({fontShape:"sc"})}),Te("textrm","{:text*}",{applyMode:"text",applyStyle:(n,o)=>({fontFamily:"roman"})}),Te("textsf","{:text*}",{applyMode:"text",applyStyle:(n,o)=>({fontFamily:"sans-serif"})}),Te("texttt","{:text*}",{applyMode:"text",applyStyle:(n,o)=>({fontFamily:"monospace"})}),Te("mathbf","{:math*}",{applyMode:"math",applyStyle:(n,o)=>({variant:"normal",variantStyle:"bold"})}),Te("mathit","{:math*}",{applyMode:"math",applyStyle:(n,o)=>({variant:"main",variantStyle:"italic"})}),Te("mathnormal","{:math*}",{applyMode:"math",applyStyle:(n,o)=>({variant:"normal",variantStyle:"italic"})}),Te("mathbfit","{:math*}",{applyMode:"math",applyStyle:(n,o)=>({variant:"main",variantStyle:"bolditalic"})}),Te("mathrm","{:math*}",{applyMode:"math",applyStyle:(n,o)=>({variant:"normal",variantStyle:"up"})}),Te("mathsf","{:math*}",{applyMode:"math",applyStyle:(n,o)=>({variant:"sans-serif",variantStyle:"up"})}),Te("mathtt","{:math*}",{applyMode:"math",applyStyle:(n,o)=>({variant:"monospace",variantStyle:"up"})}),Te("it","",{applyStyle:(n,o)=>({fontSeries:"m",fontShape:"it",fontFamily:"cmr",variantStyle:"italic"})}),Te("rmfamily","",{applyStyle:(n,o)=>({fontFamily:"roman"})}),Te("sffamily","",{applyStyle:(n,o)=>({fontFamily:"sans-serif"})}),Te("ttfamily","",{applyStyle:(n,o)=>({fontFamily:"monospace"})}),Te(["Bbb","mathbb"],"{:math*}",{applyStyle:(n,o)=>({variant:"double-struck",variantStyle:"up"})}),Te(["frak","mathfrak"],"{:math*}",{applyStyle:(n,o)=>({variant:"fraktur",variantStyle:"up"})}),Te("mathcal","{:math*}",{applyStyle:(n,o)=>({variant:"calligraphic",variantStyle:"up"})}),Te("mathscr","{:math*}",{applyStyle:(n,o)=>({variant:"script",variantStyle:"up"})}),Te("mbox","{:text}",{ifMode:"math",createAtom:(n,o,e,i)=>new Fa(o[0],i,{changeMode:!0,style:e,mode:"text",command:n,serialize:(a,r)=>`\\mbox{${a.bodyToLatex(ei(Ee({},r),{skipModeCommand:!0}))}}`})}),Te("text","{:text}",{ifMode:"math",applyMode:"text"}),Te("class","{name:string}{content:auto*}",{createAtom:(n,o,e,i)=>new Fa(o[1],i,{customClass:o[0],style:e})}),Te("cssId","{id:string}{content:auto}",{createAtom:(n,o,e,i)=>new Fa(o[1],i,{cssId:o[0],style:e})}),Te("htmlData","{data:string}{content:auto}",{createAtom:(n,o,e,i)=>new Fa(o[1],i,{htmlData:o[0],style:e})}),Te("htmlStyle","{data:string}{content:auto}",{createAtom:(n,o,e,i)=>new Fa(o[1],i,{htmlStyle:o[0],style:e})}),Te("em","{:auto*}",{createAtom:(n,o,e,i)=>new Fa(o[0],i,{latexOpen:"\\em",latexClose:"",customClass:"ML__emph",style:e})}),Te("emph","{:auto}",{createAtom:(n,o,e,i)=>new Fa(o[0],i,{latexOpen:"\\emph{",latexClose:"}",customClass:"ML__emph",style:e})});var eC={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}};Te(["bigl","Bigl","biggl","Biggl","bigr","Bigr","biggr","Biggr","bigm","Bigm","biggm","Biggm","big","Big","bigg","Bigg"],"{:delim}",{createAtom:(n,o,e,i)=>new I4(n,o[0],i,{size:eC[n].size,delimClass:eC[n].mclass,style:e})}),Te(["hspace","hspace*"],"{width:glue}",{createAtom:(n,o,e,i)=>{var a;return new zm(n,e,i,null!=(a=o[0])?a:{glue:{dimension:0}})}}),Te(["mkern","kern"],"{width:glue}",{createAtom:(n,o,e,i)=>{var a;return new zm(n,e,i,null!=(a=o[0])?a:{glue:{dimension:0}})}}),Te("mspace","{width:glue}",{createAtom:(n,o,e,i)=>{var a;return new zm(n,e,i,null!=(a=o[0])?a:{glue:{dimension:0}})}}),Te("mathop","{:auto}",{createAtom:(n,o,e,i)=>new qs(n,o[0],i,{type:"mop",captureSelection:!0,limits:"over-under",isFunction:!0,hasArgument:!0,style:e})}),Te("mathchoice","{:math}{:math}{:math}{:math}",{createAtom:(n,o,e,i)=>new Z4(o,i)}),Te(["mathbin","mathrel","mathopen","mathclose","mathpunct","mathord","mathinner"],"{:auto}",{createAtom:(n,o,e,i)=>new qs(n,o[0],i,{type:{"\\mathbin":"mbin","\\mathrel":"mrel","\\mathopen":"mopen","\\mathclose":"mclose","\\mathpunct":"mpunct","\\mathord":"mord","\\mathinner":"minner"}[n],captureSelection:!0,hasArgument:!0,style:e})}),Te(["operatorname","operatorname*"],"{operator:math}",{createAtom:(n,o,e,i)=>{let a=new qs(n,o[0],i,{isFunction:!0,hasArgument:!0,limits:"\\operatorname"===n?"adjacent":"over-under",style:e});return a.captureSelection=!0,a.body&&a.body.forEach(r=>{var s;"first"!==r.type&&(r.type="mord",r.value=null!=(s={"\u2217":"*","\u2212":"-"}[r.value])?s:r.value,r.isFunction=!1,!r.style.variant&&!r.style.variantStyle&&(r.style.variant="main",r.style.variantStyle="up"))}),a}});var gH=class extends ke{constructor(n,o,e){let i=Number.parseInt(n);Number.isFinite(i)||(i=10067),super("mord",e,{value:String.fromCodePoint(i),style:o}),this.codepoint=i}serialize(n){return'\\unicode"'+("000000"+this.codepoint.toString(16)).toUpperCase().slice(-6)}};function Ax(n){if(1===n.length){let o=n[0];if("mbin"===o.type)return"mbin";if("mrel"===o.type)return"mrel"}return"mord"}Te("unicode","{charcode:number}",{createAtom:(n,o,e,i)=>new gH(o[0],e,i)}),Te("rule","[raise:dimen]{width:dimen}{thickness:dimen}",{createAtom:(n,o,e,i)=>new L4(n,i,{shift:o[0],width:o[1],height:o[2],style:e})}),Te("overline","{:auto}",{createAtom:(n,o,e,i)=>new Tx(n,o[0],i,{position:"overline",style:e})}),Te("underline","{:auto}",{createAtom:(n,o,e,i)=>new Tx(n,o[0],i,{position:"underline",style:e})}),Te("overset","{above:auto}{base:auto}",{createAtom:(n,o,e,i)=>new js(n,i,{above:o[0],body:o[1],skipBoundary:!1,style:e,boxType:Ax(o[1]),serialize:(a,r)=>`${a.command}{${a.aboveToLatex(r)}}{${a.bodyToLatex(r)}}`})}),Te("underset","{below:auto}{base:auto}",{createAtom:(n,o,e,i)=>new js(n,i,{below:o[0],body:o[1],skipBoundary:!1,style:e,boxType:Ax(o[1]),serialize:(a,r)=>`${n}{${a.belowToLatex(r)}}{${a.bodyToLatex(r)}}`})}),Te("overunderset","{above:auto}{below:auto}{base:auto}",{createAtom:(n,o,e,i)=>new js(n,i,{above:o[0],below:o[1],body:o[2],skipBoundary:!1,style:e,boxType:Ax(o[2]),serialize:(a,r)=>`${a.command}{${a.aboveToLatex(r)}}{${a.bodyToLatex(r)}}`})}),Te(["stackrel","stackbin"],"[below:auto]{above:auto}{base:auto}",{createAtom:(n,o,e,i)=>new js(n,i,{body:o[2],above:o[1],below:o[0],skipBoundary:!1,style:e,boxType:"\\stackrel"===n?"mrel":"mbin",serialize:(a,r)=>`${a.command}{${a.aboveToLatex(r)}}{${a.bodyToLatex(r)}}`})}),Te("smash","[:string]{:auto}",{createAtom:(n,o,e,i)=>new Gm(n,o[1],i,o[0]?{smashHeight:o[0].includes("t"),smashDepth:o[0].includes("b"),style:e}:{smashHeight:!0,smashDepth:!0,style:e})}),Te(["vphantom"],"{:auto*}",{createAtom:(n,o,e,i)=>new Gm(n,o[1],i,{isInvisible:!0,smashWidth:!0,style:e})}),Te(["hphantom"],"{:auto*}",{createAtom:(n,o,e,i)=>new Gm(n,o[1],i,{isInvisible:!0,smashHeight:!0,smashDepth:!0,style:e})}),Te(["phantom"],"{:auto*}",{createAtom:(n,o,e,i)=>new Gm(n,o[1],i,{isInvisible:!0,style:e})}),Te("not","{:math}",{createAtom:(n,o,e,i)=>{if(o.length<1||null===o[0])return new ke("mrel",i,{command:n,style:e,value:"\ue020"});let a=o[0];return new Fa([new Pd(n,"\ue020",i,{align:"right",style:e,boxType:"mrel"}),...a],i,{boxType:"mrel",captureSelection:!0,command:"\\not",serialize:(r,s)=>{let l=ke.serialize(a,s);return 1!==l.length||/[a-zA-Z]/.test(l)?`\\not{${l}}`:"\\not"+l}})}}),Te(["ne","neq"],"",{createAtom:(n,o,e,i)=>new Fa([new Pd(n,"\ue020",i,{align:"right",style:e,boxType:"mrel"}),new ke("mrel",i,{style:e,value:"="})],i,{boxType:"mrel",captureSelection:!0,serialize:()=>n,command:n})}),Te("rlap","{:auto}",{createAtom:(n,o,e,i)=>new Pd(n,o[0],i,{align:"right",style:e})}),Te("llap","{:auto}",{createAtom:(n,o,e,i)=>new Pd(n,o[0],i,{style:e})}),Te("mathllap","{:auto}",{createAtom:(n,o,e,i)=>new Pd(n,o[0],i,{style:e})}),Te("mathrlap","{:auto}",{createAtom:(n,o,e,i)=>new Pd(n,o[0],i,{align:"right",style:e})});var nC={acute:714,grave:715,dot:729,ddot:168,mathring:730,tilde:126,bar:713,breve:728,check:711,hat:94,vec:8407};function Fs(n){for(let o of n)for(let e of o)if(e.length>0)return!1;return!0}Te(Object.keys(nC),"{body:auto}",{createAtom:(n,o,e,i)=>new lg(n,o[0],i,{accentChar:nC[n.slice(1)],style:e})}),Te(["widehat","widecheck","widetilde"],"{body:auto}",{createAtom:(n,o,e,i)=>{let a=Z5(o[0]);return new lg(n,o[0],i,{style:e,svgAccent:n.slice(1)+(a.length>5?"4":["1","1","2","2","3","3"][a.length])})}}),Te(["overarc","overparen","wideparen"],"{body:auto}",{createAtom:(n,o,e,i)=>new lg(n,o[0],i,{style:e,svgAccent:"overarc"})}),Te(["underarc","underparen"],"{body:auto}",{createAtom:(n,o,e,i)=>new js(n,i,{body:o[0],style:e,svgBelow:"underarc"})}),Te("utilde","{body:auto}",{createAtom:(n,o,e,i)=>{let a=Z5(o[0]);return new js(n,i,{body:o[0],svgBelow:"widetilde"+(a.length>5?"4":["1","1","2","2","3","3"][a.length]),style:e,boxType:Ax(o[0])})}}),Te("^","{:string}",{createAtom:(n,o,e,i)=>{var a;return new ke("mord",i,{command:n,isFunction:!1,limits:"adjacent",style:e,value:o[0]&&null!=(a={a:"\xe2",e:"\xea",i:"\xee",o:"\xf4",u:"\xfb",A:"\xc2",E:"\xca",I:"\xce",O:"\xd4",U:"\xdb"}[o[0]])?a:"^"})}}),Te("`","{:string}",{createAtom:(n,o,e,i)=>{var a;return new ke("mord",i,{command:n,isFunction:!1,limits:"adjacent",style:e,value:o[0]&&null!=(a={a:"\xe0",e:"\xe8",i:"\xec",o:"\xf2",u:"\xf9",A:"\xc0",E:"\xc8",I:"\xcc",O:"\xd2",U:"\xd9"}[o[0]])?a:"`"})}}),Te("'","{:string}",{createAtom:(n,o,e,i)=>{var a;return new ke("mord",i,{command:n,isFunction:!1,limits:"adjacent",style:e,value:o[0]&&null!=(a={a:"\xe1",e:"\xe9",i:"\xed",o:"\xf3",u:"\xfa",A:"\xc1",E:"\xc9",I:"\xcd",O:"\xd3",U:"\xda"}[o[0]])?a:"^"})}}),Te("~","{:string}",{createAtom:(n,o,e,i)=>{var a;return new ke("mord",i,{command:n,isFunction:!1,limits:"adjacent",style:e,value:o[0]&&null!=(a={n:"\xf1",N:"\xd1",a:"\xe3",o:"\xf5",A:"\xc3",O:"\xd5"}[o[0]])?a:"\xb4"})}}),Te("c","{:string}",{createAtom:(n,o,e,i)=>{var a;return new ke("mord",i,{command:n,isFunction:!1,limits:"adjacent",style:e,value:o[0]&&null!=(a={c:"\xe7",C:"\xc7"}[o[0]])?a:""})}}),Te("enclose","{notation:string}[style:string]{body:auto}",{createAtom:(n,o,e,i)=>{var a;let r={strokeColor:"currentColor",strokeWidth:"",strokeStyle:"solid",backgroundcolor:"transparent",padding:"auto",shadow:"auto",svgStrokeStyle:void 0,borderStyle:void 0,style:e};if(o[1]){let l=o[1].split(/,(?![^(]*\)(?:(?:[^(]*\)){2})*[^"]*$)/);for(let c of l){let d=c.match(/\s*(\S+)\s+(\S+)\s+(.*)/);if(d)r.strokeWidth=d[1],r.strokeStyle=d[2],r.strokeColor=d[3];else{let h=c.match(/\s*([a-z]*)\s*=\s*"(.*)"/);h&&("mathbackground"===h[1]?r.backgroundcolor=h[2]:"mathcolor"===h[1]?r.strokeColor=h[2]:"padding"===h[1]?r.padding=h[2]:"shadow"===h[1]&&(r.shadow=h[2]))}}"dashed"===r.strokeStyle?r.svgStrokeStyle="5,5":"dotted"===r.strokeStyle&&(r.svgStrokeStyle="1,5")}r.borderStyle=`${r.strokeWidth} ${r.strokeStyle} ${r.strokeColor}`;let s={};return(null!=(a=o[0])?a:"").split(/[, ]/).filter(l=>l.length>0).forEach(l=>{s[l.toLowerCase()]=!0}),new jp(n,o[2],s,i,r)}}),Te("cancel","{body:auto}",{createAtom:(n,o,e,i)=>new jp(n,o[0],{updiagonalstrike:!0},i,{strokeColor:"currentColor",strokeWidth:"",strokeStyle:"solid",borderStyle:"1px solid currentColor",backgroundcolor:"transparent",padding:"auto",shadow:"auto",style:e})}),Te("bcancel","{body:auto}",{createAtom:(n,o,e,i)=>new jp(n,o[0],{downdiagonalstrike:!0},i,{strokeColor:"currentColor",strokeWidth:"",strokeStyle:"solid",borderStyle:"1px solid currentColor",backgroundcolor:"transparent",padding:"auto",shadow:"auto",style:e})}),Te("xcancel","{body:auto}",{createAtom:(n,o,e,i)=>new jp(n,o[0],{updiagonalstrike:!0,downdiagonalstrike:!0},i,{strokeColor:"currentColor",strokeWidth:"",strokeStyle:"solid",borderStyle:"1px solid currentColor",backgroundcolor:"transparent",padding:"auto",shadow:"auto",style:e})}),cx("math","",(n,o,e,i)=>(Fs(e)&&(e=[[[new ke("first",n),new $o(n)]]]),new Lo(n,o,e,i,{mathstyleName:"textstyle"}))),cx("displaymath","",(n,o,e,i)=>(Fs(e)&&(e=[[[new ke("first",n),new $o(n)]]]),new Lo(n,o,e,i,{mathstyleName:"textstyle"}))),Fc("array","{columns:colspec}",(n,o,e,i,a)=>(Fs(e)&&(e=[[[new ke("first",n),new $o(n)]]]),new Lo(n,o,e,i,{columns:a[0],mathstyleName:"textstyle"}))),Fc(["equation","equation*","subequations"],"",(n,o,e,i)=>(Fs(e)&&(e=[[[new ke("first",n),new $o(n)]]]),new Lo(n,o,e,i,{columns:[{align:"c"}]}))),Fc("multline","",(n,o,e,i)=>(Fs(e)&&(e=[[[new ke("first",n),new $o(n)]]]),new Lo(n,o,e,i,{columns:[{align:"m"}]}))),Fc(["align","align*","aligned","eqnarray"],"",(n,o,e,i)=>{let a=0;Fs(e)&&(e=[[[new ke("first",n),new $o(n)],[new ke("first",n),new $o(n)]]]);for(let l of e)a=Math.max(a,l.length);let r=[{gap:0},{align:"r"},{gap:.25},{align:"l"}],s=2;for(;s<a;)r.push({gap:1}),r.push({align:"r"}),r.push({gap:.25}),r.push({align:"l"}),s+=2;return r.push({gap:0}),new Lo(n,o,e,i,{arraycolsep:0,columns:r,colSeparationType:"align",jot:.3,minColumns:2})}),Fc("split","",(n,o,e,i)=>(Fs(e)&&(e=[[[new ke("first",n),new $o(n)],[new ke("first",n),new $o(n)]]]),new Lo(n,o,e,i,{columns:[{align:"r"},{align:"l"}],minColumns:2}))),Fc(["gather","gathered"],"",(n,o,e,i)=>(Fs(e)&&(e=[[[new ke("first",n),new $o(n)]]]),new Lo(n,o,e,i,{columns:[{gap:.25},{align:"c"},{gap:0}],colSeparationType:"gather"}))),Fc(["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],"[columns:colspec]",(n,o,e,i,a)=>{var r;Fs(e)&&(e=[[[new ke("first",n),new $o(n)]]]);let s=".",l=".";switch(o){case"pmatrix":case"pmatrix*":s="(",l=")";break;case"bmatrix":case"bmatrix*":s="[",l="]";break;case"Bmatrix":case"Bmatrix*":s="\\lbrace",l="\\rbrace";break;case"vmatrix":case"vmatrix*":s="\\vert",l="\\vert";break;case"Vmatrix":case"Vmatrix*":s="\\Vert",l="\\Vert";break;case"matrix":case"matrix*":s=".",l="."}return new Lo(n,o,e,i,{mathstyleName:"textstyle",leftDelim:s,rightDelim:l,columns:null!=(r=a[0])?r:[{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"}]})}),Fc(["smallmatrix","smallmatrix*"],"[columns:colspec]",(n,o,e,i,a)=>{var r;return Fs(e)&&(e=[[[new ke("first",n),new $o(n)]]]),new Lo(n,o,e,i,{mathstyleName:"scriptstyle",columns:null!=(r=a[0])?r:[{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"},{align:"c"}],colSeparationType:"small",arraystretch:.5})}),Fc(["cases","dcases"],"",(n,o,e,i)=>(Fs(e)&&(e=[[[new ke("first",n),new $o(n)]]]),new Lo(n,o,e,i,{mathstyleName:"dcases"===o?"displaystyle":"textstyle",arraystretch:1.2,leftDelim:"\\lbrace",rightDelim:".",columns:[{align:"l"},{gap:1},{align:"l"}]}))),Fc("rcases","",(n,o,e,i)=>(Fs(e)&&(e=[[[new ke("first",n),new $o(n)]]]),new Lo(n,o,e,i,{arraystretch:1.2,leftDelim:".",rightDelim:"\\rbrace",columns:[{align:"l"},{gap:1},{align:"l"}]}))),cx("center","",(n,o,e,i)=>(Fs(e)&&(e=[[[new ke("first",n),new $o(n)]]]),new Lo(n,o,e,i,{columns:[{align:"c"}]}))),Te(["overrightarrow","overleftarrow","Overrightarrow","overleftharpoon","overrightharpoon","overleftrightarrow","overlinesegment","overgroup"],"{:auto}",{createAtom:(n,o,e,i)=>new js(n,i,{body:o[0],skipBoundary:!1,supsubPlacement:"over-under",paddedBody:!0,boxType:"mrel",style:e,svgAbove:n.slice(1)})}),Te("overbrace","{:auto}",{createAtom:(n,o,e,i)=>new js(n,i,{body:o[0],skipBoundary:!1,supsubPlacement:"over-under",paddedBody:!0,boxType:"mord",style:e,svgAbove:n.slice(1)})}),Te(["underrightarrow","underleftarrow","underleftrightarrow","underlinesegment","undergroup"],"{:auto}",{createAtom:(n,o,e,i)=>new js(n,i,{body:o[0],skipBoundary:!1,supsubPlacement:"over-under",paddedBody:!0,boxType:"mrel",style:e,svgBelow:n.slice(1)})}),Te(["underbrace"],"{:auto}",{createAtom:(n,o,e,i)=>new js(n,i,{body:o[0],skipBoundary:!1,supsubPlacement:"over-under",paddedBody:!0,boxType:"mord",style:e,svgBelow:n.slice(1)})}),Te(["xrightarrow","xleftarrow","xRightarrow","xLeftarrow","xleftharpoonup","xleftharpoondown","xrightharpoonup","xrightharpoondown","xlongequal","xtwoheadleftarrow","xtwoheadrightarrow","xleftrightarrow","xLeftrightarrow","xrightleftharpoons","xleftrightharpoons","xhookleftarrow","xhookrightarrow","xmapsto","xtofrom","xrightleftarrows","xrightequilibrium","xleftequilibrium"],"[:auto]{:auto}",{createAtom:(n,o,e,i)=>{var a,r;return new js(n,i,{style:e,svgBody:n.slice(1),above:0===(null==(a=o[1])?void 0:a.length)?void 0:o[1],below:null!=(r=o[0])?r:null,skipBoundary:!1,supsubPlacement:"over-under",paddedBody:!0,paddedLabels:!0,boxType:"mrel",serialize:(s,l)=>n+(s.hasEmptyBranch("below")?"":`[${s.belowToLatex(l)}]`)+`{${s.aboveToLatex(l)}}${s.supsubToLatex(l)}`})}}),Te(["arccos","arcsin","arctan","arctg","arcctg","arg","ch","cos","cosh","cot","cotg","coth","ctg","cth","csc","cosec","dim","exp","hom","inf","ker","lb","lg","ln","log","Pr","sec","sh","sin","sinh","sup","tan","tanh","tg","th","arcsec","arccsc","arsinh","arcosh","artanh","arcsech","arccsch"],"",{isFunction:!0,createAtom:(n,o,e,i)=>new qs(n,n.slice(1),i,{limits:"adjacent",isFunction:!0,variant:"main",variantStyle:"up",style:e})}),Te(["liminf","limsup"],"",{createAtom:(n,o,e,i)=>new qs(n,{"\\liminf":"lim inf","\\limsup":"lim sup"}[n],i,{limits:"over-under",variant:"main",style:e})}),Te(["lim","mod"],"",{createAtom:(n,o,e,i)=>new qs(n,n.slice(1),i,{limits:"over-under",variant:"main",style:e})}),Te(["det","max","min"],"",{isFunction:!0,createAtom:(n,o,e,i)=>new qs(n,n.slice(1),i,{limits:"over-under",isFunction:!0,variant:"main",style:e})}),Te(["ang"],"{:math}",{isFunction:!0,createAtom:(n,o,e,i)=>new Fa([...o[0],new ke("mord",i,{value:"\xb0",style:e})],i,{mode:"math",latexOpen:"\\ang{",latexClose:"}",style:e})}),Te("sqrt","[index:auto]{radicand:auto}",{createAtom:(n,o,e,i)=>new P4(n,i,{body:o[1],index:o[0],style:e})}),Te(["frac","dfrac","tfrac","cfrac","binom","dbinom","tbinom"],"{numerator}{denominator}",{createAtom:(n,o,e,i)=>{let a={style:e};switch(n){case"\\dfrac":case"\\frac":case"\\tfrac":a.hasBarLine=!0;break;case"\\atopfrac":a.hasBarLine=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":a.hasBarLine=!1,a.leftDelim="(",a.rightDelim=")"}switch(n){case"\\dfrac":case"\\dbinom":a.mathstyleName="displaystyle";break;case"\\tfrac":case"\\tbinom":a.mathstyleName="textstyle";break;case"\\cfrac":a.hasBarLine=!0,a.continuousFraction=!0}return new Hm(n,o[0],o[1],i,a)}}),Te(["brace","brack"],"",{infix:!0,createAtom:(n,o,e,i)=>new Hm(n,o[0],o[1],i,{hasBarLine:!1,leftDelim:"\\brace"===n?"\\lbrace":"\\lbrack",rightDelim:"\\brace"===n?"\\rbrace":"\\rbrack",style:e,serialize:(a,r)=>Fo([a.aboveToLatex(r),a.command,a.belowToLatex(r)])})}),Te(["over","atop","choose"],"",{infix:!0,createAtom:(n,o,e,i)=>{let a,r;return"\\choose"===n&&(a="(",r=")"),new Hm(n,o[0],o[1],i,{hasBarLine:"\\over"===n,leftDelim:a,rightDelim:r,style:e,serialize:(s,l)=>Fo([s.aboveToLatex(l),s.command,s.belowToLatex(l)])})}}),Te(["overwithdelims","atopwithdelims"],"{numer:auto}{denom:auto}{left-delim:delim}{right-delim:delim}",{infix:!0,createAtom:(n,o,e,i)=>new Hm(n,o[0],o[1],i,{leftDelim:o[2],rightDelim:o[3],hasBarLine:!1,style:e,serialize:(a,r)=>`${a.aboveToLatex(r)} ${a.command}${a.leftDelim}${a.rightDelim}${a.belowToLatex(r)}`})}),Te("pdiff","{numerator}{denominator}",{createAtom:(n,o,e,i)=>new Hm(n,o[0],o[1],i,{hasBarLine:!0,numerPrefix:"\u2202",denomPrefix:"\u2202",style:e})}),Te(["sum","prod","bigcup","bigcap","coprod","bigvee","bigwedge","biguplus","bigotimes","bigoplus","bigodot","bigsqcup","intop"],"",{createAtom:(n,o,e,i)=>new qs(n,{coprod:"\u2210",bigvee:"\u22c1",bigwedge:"\u22c0",biguplus:"\u2a04",bigcap:"\u22c2",bigcup:"\u22c3",intop:"\u222b",prod:"\u220f",sum:"\u2211",bigotimes:"\u2a02",bigoplus:"\u2a01",bigodot:"\u2a00",bigsqcup:"\u2a06",smallint:"\u222b"}[n.slice(1)],i,{isExtensibleSymbol:!0,limits:"auto",variant:"main",style:e})}),Te("smallint","",{createAtom:(n,o,e,i)=>new qs(n,"\u222b",i,{limits:"adjacent",isExtensibleSymbol:!1,style:e,variant:"main"})});var D4={int:"\u222b",iint:"\u222c",iiint:"\u222d",oint:"\u222e",oiint:"\u222f",oiiint:"\u2230",intclockwise:"\u2231",varointclockwise:"\u2232",ointctrclockwise:"\u2233",intctrclockwise:"\u2a11",sqcup:"\u2294",sqcap:"\u2293",uplus:"\u228e",wr:"\u2240",amalg:"\u2a3f",Cap:"\u22d2",Cup:"\u22d3",doublecap:"\u22d2",doublecup:"\u22d3"};function bH(n,o){return n[0]===o[0]&&n[1]===o[1]?"equal":"different"}function gl(n){let o=1/0,e=-1/0;for(let i of n.ranges)o=Math.min(o,i[0],i[1]),e=Math.max(e,i[0],i[1]);return[o,e]}function j4(n,o,e){return e?function vH(n,o){if(!o)return"";if("string"==typeof o)return o;if(!n||void 0===o.after)return o.value;let e=!1,i=!1,a=!1,r=!1,s=!1,l=!1,c=!1,d=!1,h=!1,_=!1,x=!1,b=!1,T=!1,P=!1,U=!1,q=n[0],B=0;for(;q&&/msubsup|placeholder/.test(q.type);)B+=1,q=n[B];return e=!q||"first"===q.type,q&&(P="text"===q.mode,i=!P&&"mord"===q.type&&TJ.test(q.value),a=!P&&"mord"===q.type&&/\d+$/.test(q.value),r=!P&&q.isFunction,s="genfrac"===q.type,l="surd"===q.type,c="mbin"===q.type,d="mrel"===q.type,h="mop"===q.type,_="mpunct"===q.type||"minner"===q.type,x="array"===q.type,b="mopen"===q.type,T="mclose"===q.type||"leftright"===q.type,U="space"===q.type),o.after.includes("nothing")&&e||o.after.includes("letter")&&i||o.after.includes("digit")&&a||o.after.includes("function")&&r||o.after.includes("frac")&&s||o.after.includes("surd")&&l||o.after.includes("binop")&&c||o.after.includes("relop")&&d||o.after.includes("operator")&&h||o.after.includes("punct")&&_||o.after.includes("array")&&x||o.after.includes("openfence")&&b||o.after.includes("closefence")&&T||o.after.includes("text")&&P||o.after.includes("space")&&U?o.value:""}(n,e[o]):""}Te(Object.keys(D4),"",{createAtom:(n,o,e,i)=>new qs(n,D4[n.slice(1)],i,{limits:"adjacent",isExtensibleSymbol:!0,style:e,variant:{"\u22d2":"ams","\u22d3":"ams"}[D4[n.slice(1)]]})}),Te(["Re","Im"],"",{createAtom:(n,o,e,i)=>new qs(n,{"\\Re":"\u211c","\\Im":"\u2111"}[n],i,{limits:"adjacent",style:e,isFunction:!0,variant:"fraktur"})}),Te("middle","{:delim}",{createAtom:(n,o,e,i)=>new M4(n,o[0],i,{size:1,style:e})}),Ka("0123456789/@.?!"),L5(65,90),L5(97,122),Ka([["\\forall",8704],["\\exists",8707],["\\nexists",8708,"mord","ams"],["\\mid",8739,"mrel"],["\\top",8868],["\\bot",8869]]),Ka([["\\sharp",9839],["\\flat",9837],["\\natural",9838],["\\#",35],["\\&",38],["\\clubsuit",9827],["\\heartsuit",9825],["\\spadesuit",9824],["\\diamondsuit",9826],["\\parallelogram",9649]]),Ka([["\\backslash",92],["\\nabla",8711],["\\partial",8706],["\\ell",8467],["\\hbar",8463],["\\Q",81,"mord","double-struck"],["\\C",67,"mord","double-struck"],["\\P",80,"mord","double-struck"],["\\pounds",163],["\\euro",8364]]),Ka([["\\rightarrow",8594],["\\to",8594],["\\leftarrow",8592],["\\gets",8592],["\\Rightarrow",8658],["\\Leftarrow",8656],["\\longrightarrow",10230],["\\longleftarrow",10229],["\\Longrightarrow",10233],["\\implies",10233],["\\Longleftarrow",10232],["\\impliedby",10232],["\\longleftrightarrow",10231],["\\biconditional",10231],["\\Longleftrightarrow",10234],["\\mapsto",8614],["\\longmapsto",10236],["\\uparrow",8593],["\\downarrow",8595],["\\Uparrow",8657],["\\Downarrow",8659],["\\updownarrow",8597],["\\Updownarrow",8661],["\\hookrightarrow",8618],["\\hookleftarrow",8617],["\\rightharpoonup",8640],["\\leftharpoonup",8636],["\\rightharpoondown",8641],["\\leftharpoondown",8637],["\\searrow",8600],["\\nearrow",8599],["\\swarrow",8601],["\\nwarrow",8598],["\\originalof",8886],["\\laplace",8886],["\\imageof",8887],["\\Laplace",8887]],"mrel"),Ka([["\\lbrace",123,"mopen"],["\\rbrace",125,"mclose"],["\\lparen",40,"mopen"],["\\rparen",41,"mclose"],["\\langle",10216,"mopen"],["\\rangle",10217,"mclose"],["\\lfloor",8970,"mopen"],["\\rfloor",8971,"mclose"],["\\lceil",8968,"mopen"],["\\rceil",8969,"mclose"],["\\vert",8739],["\\lvert",8739,"mopen"],["\\rvert",8739,"mclose"],["\\|",8741],["\\Vert",8741],["\\mVert",8741],["\\lVert",8741,"mopen"],["\\rVert",8741,"mclose"],["\\lbrack",91,"mopen"],["\\rbrack",93,"mclose"],["\\{",123,"mopen"],["\\}",125,"mclose"],["(",40,"mopen"],[")",41,"mclose"],["[",91,"mopen"],["]",93,"mclose"],["\\ulcorner",9484,"mopen","ams"],["\\urcorner",9488,"mclose","ams"],["\\llcorner",9492,"mopen","ams"],["\\lrcorner",9496,"mclose","ams"],["\\lgroup",10222,"mopen"],["\\rgroup",10223,"mclose"],["\\lmoustache",9136,"mopen"],["\\rmoustache",9137,"mclose"]]),Ka([["\\dashrightarrow",8674],["\\dashleftarrow",8672],["\\Rrightarrow",8667],["\\Lleftarrow",8666],["\\leftrightarrows",8646],["\\rightleftarrows",8644],["\\curvearrowright",8631],["\\curvearrowleft",8630],["\\rightrightarrows",8649],["\\leftleftarrows",8647],["\\upuparrows",8648],["\\downdownarrows",8650],["\\vartriangle",9651],["\\triangleq",8796],["\\vartriangleleft",8882],["\\trianglelefteq",8884],["\\ntriangleleft",8938],["\\ntrianglelefteq",8940],["\\vartriangleright",8883],["\\trianglerighteq",8885],["\\ntriangleright",8939],["\\ntrianglerighteq",8941],["\\blacktriangleleft",9664],["\\blacktriangleright",9654],["\\leftarrowtail",8610],["\\rightarrowtail",8611],["\\looparrowright",8620],["\\looparrowleft",8619],["\\twoheadleftarrow",8606],["\\twoheadrightarrow",8608],["\\rightleftharpoons",8652],["\\leftrightharpoons",8651],["\\Rsh",8625],["\\Lsh",8624],["\\circlearrowright",8635],["\\circlearrowleft",8634],["\\restriction",8638],["\\upharpoonright",8638],["\\upharpoonleft",8639],["\\downharpoonright",8642],["\\downharpoonleft",8643],["\\rightsquigarrow",8669],["\\leadsto",8669],["\\leftrightsquigarrow",8621],["\\multimap",8888],["\\nrightarrow",8603],["\\nleftarrow",8602],["\\nRightarrow",8655],["\\nLeftarrow",8653],["\\nleftrightarrow",8622],["\\nLeftrightarrow",8654],["\\shortparallel",8741],["\\nless",8814],["\\nleqslant",57360],["\\lneq",10887],["\\lneqq",8808],["\\nleqq",57361],["\\lvertneqq",57356],["\\lnsim",8934],["\\lnapprox",10889],["\\nprec",8832],["\\npreceq",8928],["\\precnsim",8936],["\\precnapprox",10937],["\\nsim",8769],["\\nshortmid",57350],["\\nmid",8740],["\\nvdash",8876],["\\nvDash",8877],["\\ngtr",8815],["\\ngeqslant",57359],["\\ngeqq",57358],["\\gneq",10888],["\\gneqq",8809],["\\gvertneqq",57357],["\\gnsim",8935],["\\gnapprox",10890],["\\nsucc",8833],["\\nsucceq",8929],["\\succnsim",8937],["\\succnapprox",10938],["\\ncong",8774],["\\nshortparallel",57351],["\\nparallel",8742],["\\nVDash",8879],["\\nsupseteqq",57368],["\\supsetneq",8843],["\\varsupsetneq",57371],["\\supsetneqq",10956],["\\varsupsetneqq",57369],["\\nVdash",8878],["\\precneqq",10933],["\\succneqq",10934],["\\nsubseteqq",57366],["\\leqslant",10877],["\\geqslant",10878],["\\gtrsim",8819],["\\approxeq",8778],["\\thickapprox",8776],["\\lessapprox",10885],["\\gtrapprox",10886],["\\precapprox",10935],["\\succapprox",10936],["\\thicksim",8764],["\\succsim",8831],["\\precsim",8830],["\\backsim",8765],["\\eqsim",8770],["\\backsimeq",8909],["\\lesssim",8818],["\\nleq",8816],["\\ngeq",8817],["\\smallsmile",8995],["\\smallfrown",8994],["\\leqq",8806],["\\eqslantless",10901],["\\lll",8920],["\\lessgtr",8822],["\\lesseqgtr",8922],["\\lesseqqgtr",10891],["\\risingdotseq",8787],["\\fallingdotseq",8786],["\\subseteqq",10949],["\\Subset",8912],["\\sqsubset",8847],["\\preccurlyeq",8828],["\\curlyeqprec",8926],["\\vDash",8872],["\\Vvdash",8874],["\\bumpeq",8783],["\\Bumpeq",8782],["\\geqq",8807],["\\eqslantgtr",10902],["\\ggg",8921],["\\gtrless",8823],["\\gtreqless",8923],["\\gtreqqless",10892],["\\supseteqq",10950],["\\Supset",8913],["\\sqsupset",8848],["\\succcurlyeq",8829],["\\curlyeqsucc",8927],["\\Vdash",8873],["\\shortmid",8739],["\\between",8812],["\\pitchfork",8916],["\\varpropto",8733],["\\backepsilon",8717],["\\llless",8920],["\\gggtr",8921],["\\doteqdot",8785],["\\Doteq",8785],["\\eqcirc",8790],["\\circeq",8791],["\\therefore",8756],["\\because",8757]],"mrel","ams"),Ka([["+",43],["-",8722],["\u2212",8722],["\\pm",177],["\\mp",8723],["*",8727],["\\times",215],["\\div",247],["\\divides",8739],["\\cdot",8901],["\\cap",8745],["\\cup",8746],["\\setminus",8726],["\\land",8743],["\\wedge",8743],["\\lor",8744],["\\vee",8744],["\\circ",8728],["\\bigcirc",9711],["\\bullet",8729],["\\oplus",8853],["\\ominus",8854],["\\otimes",8855],["\\odot",8857],["\\oslash",8856],["\\bigtriangleup",9651],["\\bigtriangledown",9661],["\\triangleleft",9667],["\\triangleright",9657],["\\And",38],["\\dagger",8224],["\\dag",8224],["\\ddag",8225],["\\ddagger",8225],["\\ast",8727],["\\star",8902],["\\bigstar",9733],["\\diamond",8900]],"mbin"),Ka([["\\lhd",8882],["\\rhd",8883],["\\lessdot",8918],["\\gtrdot",8919],["\\ltimes",8905],["\\rtimes",8906],["\\leftthreetimes",8907],["\\rightthreetimes",8908],["\\intercal",8890],["\\dotplus",8724],["\\doublebarwedge",10846],["\\divideontimes",8903],["\\centerdot",8901],["\\smallsetminus",8726],["\\barwedge",8892],["\\veebar",8891],["\\nor",8891],["\\curlywedge",8911],["\\curlyvee",8910],["\\boxminus",8863],["\\boxplus",8862],["\\boxtimes",8864],["\\boxdot",8865],["\\circleddash",8861],["\\circledast",8859],["\\circledcirc",8858],["\\unlhd",8884],["\\unrhd",8885]],"mbin","ams"),Ka([["\\surd",8730],["\\infty",8734],["\\prime",8242],["\\doubleprime",8243],["\\angle",8736],["`",8216],["\\$",36],["\\%",37],["\\_",95],["\\alpha",945],["\\beta",946],["\\gamma",947],["\\delta",948],["\\epsilon",1013],["\\varepsilon",949],["\\zeta",950],["\\eta",951],["\\theta",952],["\\vartheta",977],["\\iota",953],["\\kappa",954],["\\varkappa",1008,"mord","ams"],["\\lambda",955],["\\mu",956],["\\nu",957],["\\xi",958],["\\omicron",111],["\\pi",960],["\\varpi",982],["\\rho",961],["\\varrho",1009],["\\sigma",963],["\\varsigma",962],["\\tau",964],["\\phi",981],["\\varphi",966],["\\upsilon",965],["\\chi",967],["\\psi",968],["\\omega",969],["\\Gamma",915],["\\Delta",916],["\\Theta",920],["\\Lambda",923],["\\Xi",926],["\\Pi",928],["\\Sigma",931],["\\Upsilon",933],["\\Phi",934],["\\Psi",936],["\\Omega",937],["\\digamma",989,"mord","ams"],["\\emptyset",8709]]),Ka([["=",61],["<",60],["\\lt",60],[">",62],["\\gt",62],["\\le",8804],["\\leq",8804],["\\ge",8805],["\\geq",8805],["\\ll",8810],["\\gg",8811],["\\coloneq",8788],["\\measeq",8797],["\\eqdef",8798],["\\questeq",8799],[":",58],["\\cong",8773],["\\equiv",8801],["\\prec",8826],["\\preceq",10927],["\\succ",8827],["\\succeq",10928],["\\perp",8869],["\\propto",8733],["\\Colon",8759],["\\smile",8995],["\\frown",8994],["\\sim",8764],["\\doteq",8784],["\\bowtie",8904],["\\Join",8904],["\\asymp",8781],["\\sqsubseteq",8849],["\\sqsupseteq",8850],["\\approx",8776],["\\~",126],["\\leftrightarrow",8596],["\\Leftrightarrow",8660],["\\models",8872],["\\vdash",8866],["\\dashv",8867],["\\roundimplies",10608],["\\in",8712],["\\notin",8713],["\\ni",8715],["\\owns",8715],["\\subset",8834],["\\supset",8835],["\\subseteq",8838],["\\supseteq",8839],["\\differencedelta",8710],["\\mvert",8739],["\\parallel",8741],["\\simeq",8771]],"mrel"),Ka([["\\lnot",172],["\\neg",172],["\\triangle",9651],["\\subsetneq",8842],["\\varsubsetneq",57370],["\\subsetneqq",10955],["\\varsubsetneqq",57367],["\\nsubset",8836],["\\nsupset",8837],["\\nsubseteq",8840],["\\nsupseteq",8841]],"mrel","ams"),Ka([["\\wp",8472],["\\aleph",8501]]),Ka([["\\blacktriangle",9650],["\\hslash",8463],["\\Finv",8498],["\\Game",8513],["\\eth",240],["\\mho",8487],["\\Bbbk",107],["\\yen",165],["\\square",9633],["\\Box",9633],["\\blacksquare",9632],["\\circledS",9416],["\\circledR",174],["\\triangledown",9661],["\\blacktriangledown",9660],["\\checkmark",10003],["\\diagup",9585],["\\measuredangle",8737],["\\sphericalangle",8738],["\\backprime",8245],["\\backdoubleprime",8246],["\\Diamond",9674],["\\lozenge",9674],["\\blacklozenge",10731],["\\varnothing",8709],["\\complement",8705],["\\maltese",10016],["\\beth",8502],["\\daleth",8504],["\\gimel",8503]],"mord","ams"),Ka([["\\ ",160],["~",160],["\\space",160]],"space"),Te(["!",",",":",";","enskip","enspace","quad","qquad"],"",{createAtom:(n,o,e,i)=>new zm(n,e,i)}),Ka([["\\colon",58],["\\cdotp",8901],["\\vdots",8942,"mord"],["\\ldotp",46],[",",44],[";",59]],"mpunct"),Ka([["\\cdots",8943],["\\ddots",8945],["\\ldots",8230],["\\mathellipsis",8230]],"minner"),Ka([["\\/",47],["|",8739,"mord"],["\\imath",305],["\\jmath",567],["\\degree",176],["'",8242],['"',8221]]);var iC={"&":"\\&","%":"\\%","''":"^{\\doubleprime}",alpha:"\\alpha",delta:"\\delta",Delta:"\\Delta",pi:"\\pi",Pi:"\\Pi",theta:"\\theta",Theta:"\\Theta",ii:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\imaginaryI"},jj:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\imaginaryJ"},ee:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\exponentialE"},nabla:"\\nabla",grad:"\\nabla",del:"\\partial",deg:{after:"digit+space",value:"\\degree"},infty:"\\infty","\u221e":"\\infty",oo:{after:"nothing+digit+frac+surd+binop+relop+punct+array+openfence+closefence+space",value:"\\infty"},"\u2211":"\\sum",sum:"\\sum_{#?}^{#?}",int:"\\int_{#?}^{#?}",prod:"\\prod_{#?}^{#?}",sqrt:"\\sqrt{#?}","\u2206":"\\differentialD","\u2202":"\\differentialD",arcsin:"\\arcsin",arccos:"\\arccos",arctan:"\\arctan",arcsec:"\\arcsec",arccsc:"\\arccsc",arsinh:"\\arsinh",arcosh:"\\arcosh",artanh:"\\artanh",arcsech:"\\arcsech",arccsch:"\\arccsch",arg:"\\arg",ch:"\\ch",cosec:"\\cosec",cosh:"\\cosh",cot:"\\cot",cotg:"\\cotg",coth:"\\coth",csc:"\\csc",ctg:"\\ctg",cth:"\\cth",sec:"\\sec",sinh:"\\sinh",sh:"\\sh",tanh:"\\tanh",tg:"\\tg",th:"\\th",sin:"\\sin",cos:"\\cos",tan:"\\tan",lg:"\\lg",lb:"\\lb",log:"\\log",ln:"\\ln",exp:"\\exp",lim:"\\lim_{#?}",dx:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\differentialD x"},dy:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\differentialD y"},dt:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\differentialD t"},AA:"\\forall",EE:"\\exists","!EE":"\\nexists","&&":"\\land",xin:{after:"nothing+text+relop+punct+openfence+space",value:"x \\in"},in:{after:"nothing+letter+closefence",value:"\\in"},"!in":"\\notin",NN:"\\mathbb{N}",ZZ:"\\Z",QQ:"\\Q",RR:"\\R",CC:"\\C",xx:"\\times","+-":"\\pm","\u2260":"\\ne","!=":"\\ne","\u2265":"\\ge",">=":"\\ge","\u2264":"\\le","<=":"\\le","<<":"\\ll",">>":"\\gg","~~":"\\approx","\u2248":"\\approx","?=":"\\questeq","\xf7":"\\div","\xac":"\\neg",":=":"\\coloneq","::":"\\Colon","(:":"\\langle",":)":"\\rangle",beta:"\\beta",chi:"\\chi",epsilon:"\\epsilon",varepsilon:"\\varepsilon",eta:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\eta"},gamma:"\\gamma",Gamma:"\\Gamma",iota:"\\iota",kappa:"\\kappa",lambda:"\\lambda",Lambda:"\\Lambda",mu:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\mu"},nu:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\nu"},\u00b5:"\\mu",phi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\phi"},Phi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\Phi"},varphi:"\\varphi",psi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\psi"},Psi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\Psi"},rho:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\rho"},sigma:"\\sigma",Sigma:"\\Sigma",tau:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\tau"},vartheta:"\\vartheta",upsilon:"\\upsilon",xi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space",value:"\\xi"},Xi:{after:"nothing+digit+function+frac+surd+binop+relop+punct+array+openfence+closefence+space+text",value:"\\Xi"},zeta:"\\zeta",omega:"\\omega",Omega:"\\Omega",\u03a9:"\\omega",forall:"\\forall",exists:"\\exists","!exists":"\\nexists",":.":"\\therefore",liminf:"\\liminf_{#?}",limsup:"\\limsup_{#?}",argmin:"\\operatorname*{arg~min}_{#?}",argmax:"\\operatorname*{arg~max}_{#?}",det:"\\det",mod:"\\mod",max:"\\max",min:"\\min",erf:"\\operatorname{erf}",erfc:"\\operatorname{erfc}",bessel:"\\operatorname{bessel}",mean:"\\operatorname{mean}",median:"\\operatorname{median}",fft:"\\operatorname{fft}",lcm:"\\operatorname{lcm}",gcd:"\\operatorname{gcd}",randomReal:"\\operatorname{randomReal}",randomInteger:"\\operatorname{randomInteger}",Re:"\\operatorname{Re}",Im:"\\operatorname{Im}",mm:{after:"nothing+digit+operator",value:"\\operatorname{mm}"},cm:{after:"nothing+digit+operator",value:"\\operatorname{cm}"},km:{after:"nothing+digit+operator",value:"\\operatorname{km}"},kg:{after:"nothing+digit+operator",value:"\\operatorname{kg}"},"...":"\\ldots","+...":"+\\cdots","-...":"-\\cdots","->...":"\\to\\cdots","->":"\\to","|->":"\\mapsto","--\x3e":"\\longrightarrow","<--":"\\longleftarrow","=>":"\\Rightarrow","==>":"\\Longrightarrow","<=>":"\\Leftrightarrow","<->":"\\leftrightarrow","(.)":"\\odot","(+)":"\\oplus","(/)":"\\oslash","(*)":"\\otimes","(-)":"\\ominus","||":"\\Vert","{":"\\{","}":"\\}","*":"\\cdot"};function Sx(n,o){var e;let i=null!=(e=o?.format)?e:"auto";return"auto"===i&&([i,n]=function yH(n){if((n=n.trim()).length<=1)return["latex",n];let o;return[o,n]=q4(n),o?["latex",n]:n.startsWith("`")&&n.endsWith("`")?["ascii-math",n=n.substring(1,n.length-1)]:n.includes("\\")?["latex",n]:/\$.+\$/.test(n)?["latex",`\\text{${n}}`]:[void 0,n]}(n)),"ascii-math"===i?["ascii-math",$r(n=(n=(n=(n=(n=(n=n.replace(/\u2061/gu,"")).replace(/\u3016/gu,"{")).replace(/\u3017/gu,"}")).replace(/([^\\])sinx/g,"$1\\sin x")).replace(/([^\\])cosx/g,"$1\\cos x ")).replace(/\u2013/g,"-"),{inlineShortcuts:o?.inlineShortcuts})]:["latex",n]}function $r(n,o){var e,i,a;if(!n)return"";let s,r=!1,l=null!=(e=o.inlineShortcuts)?e:iC;if(!r&&(n.startsWith("^")||n.startsWith("_"))&&(s=Ym(n.slice(1),{inlineShortcuts:l,noWrap:!0}),n=n[0]+"{"+s.match+"}",n+=$r(s.rest,o),r=!0),r||(s=n.match(/^(sqrt|\u221A)(.*)/),s&&(s=Ym(s[2],{inlineShortcuts:l,noWrap:!0}),n="\\sqrt{"+(null!=(i=s.match)?i:"\\placeholder{}")+"}",n+=$r(s.rest,o),r=!0)),r||(s=n.match(/^(\\cbrt|\u221B)(.*)/),s&&(s=Ym(s[2],{inlineShortcuts:l,noWrap:!0}),n="\\sqrt[3]{"+(null!=(a=s.match)?a:"\\placeholder{}")+"}",n+=$r(s.rest,o),r=!0)),r||(s=n.match(/^abs(.*)/),s&&(s=Ym(s[1],{inlineShortcuts:l,noWrap:!0}),n="\\left|"+s.match+"\\right|",n+=$r(s.rest,o),r=!0)),r||(s=n.match(/^["\u201d\u201c](.*?)["\u201d\u201c](.*)/),s&&(n="\\text{"+s[1]+"}",n+=$r(s[2],o),r=!0)),r||(s=n.match(/^([^a-zA-Z\(\{\[\_\^\\\s"]+)(.*)/),s&&(n=oC(s[1],l),n+=$r(s[2],o),r=!0)),!r&&/^([fgh])[^a-zA-Z]/.test(n)&&(s=Ym(n.slice(1),{inlineShortcuts:l,noWrap:!0}),n="("===n[1]?n[0]+"\\left("+s.match+"\\right)":n[0]+s.match,n+=$r(s.rest,o),r=!0),r||(s=n.match(/^([a-zA-Z]+)(.*)/),s&&(n=oC(s[1],l),n+=$r(s[2],o),r=!0)),!r)if(s=Ym(n,{inlineShortcuts:l,noWrap:!0}),s.match&&"/"===s.rest[0]){let c=Ym(s.rest.slice(1),{inlineShortcuts:l,noWrap:!0});c.match&&(n="\\frac{"+s.match+"}{"+c.match+"}"+$r(c.rest,o)),r=!0}else s.match&&(n=n.startsWith("(")?"\\left("+s.match+"\\right)"+$r(s.rest,o):s.match+$r(s.rest,o),r=!0);return r||(s=n.match(/^(\s+)(.*)$/),s&&(n=" "+$r(s[2],o),r=!0)),n}function Ym(n,o){let e="",i=n=n.trim(),a=n.charAt(0),r={"(":")","{":"}","[":"]"}[a];if(r){let s=1,l=1;for(;l<n.length&&s>0;)n[l]===a&&s++,n[l]===r&&s--,l++;0===s?(o.noWrap&&"("===a?e=$r(n.substring(1,l-1),o):("{"===a&&"}"===r&&(a="\\{",r="\\}"),e="\\left"+a+$r(n.substring(1,l-1),o)+"\\right"+r),i=n.slice(Math.max(0,l))):(e=n.substring(1,l),i="")}else{let s=n.match(/^([a-zA-Z]+)/);if(s){let l=j4(null,n,o.inlineShortcuts);if(l)return l=l.replace("_{#?}",""),l=l.replace("^{#?}",""),{match:l,rest:n.slice(l.length)}}if(s=n.match(/^([a-zA-Z])/),s)return{match:s[1],rest:n.slice(1)};if(s=n.match(/^(-)?\d+(\.\d*)?/),s)return{match:s[0],rest:n.slice(s[0].length)};/^\\(left|right)/.test(n)||(s=n.match(/^(\\[a-zA-Z]+)/),s&&(i=n.slice(s[1].length),e=s[1]))}return{match:e,rest:i}}function oC(n,o){let e=j4(null,n,o);return e?(e=e.replace("_{#?}",""),e=e.replace("^{#?}",""),e+=" "):e=n,e}var aC=[["\\[","\\]"],["\\(","\\)"],["$$","$$"],["$","$"],["\\begin{math}","\\end{math}"],["\\begin{displaymath}","\\end{displaymath}"],["\\begin{equation}","\\end{equation}"],["\\begin{equation*}","\\end{equation*}"]];function q4(n){let o=n.trim();for(let e of aC)if(o.startsWith(e[0])&&o.endsWith(e[1]))return[!0,o.substring(e[0].length,o.length-e[1].length)];return[!1,n]}var TH=(n,o,e)=>(aC.some(i=>o.startsWith(i[0])&&o.endsWith(i[1]))||(o=`$$ ${o} $$`),o),Ox=class{constructor(n){Ox._registry[n]=this}static onPaste(n,o,e){var i;if("string"==typeof e){let r=new DataTransfer;r.setData("text/plain",e),e=r}let a=new ClipboardEvent("paste",{clipboardData:e,cancelable:!0});return!(null==(i=o.host)||!i.dispatchEvent(a))&&Ox._registry[n].onPaste(o,e)}static onCopy(n,o){if(!o.clipboardData)return;let e=n.model,i=e.selectionIsCollapsed?[0,e.lastOffset]:gl(e.selection),a=e.getAtoms(i);if(a.every(r=>"text"===r.mode||!r.mode))o.clipboardData.setData("text/plain",a.filter(r=>r instanceof Dp).map(r=>r.value).join(""));else if(a.every(r=>"latex"===r.mode))o.clipboardData.setData("text/plain",e.getAtoms(i,{includeChildren:!0}).map(r=>{var s;return null!=(s=r.value)?s:""}).join(""));else{let r;r=1===a.length&&void 0!==a[0].verbatimLatex?a[0].verbatimLatex:e.getValue(i,"latex-expanded"),o.clipboardData.setData("application/x-latex",r);try{o.clipboardData.setData("text/plain",n.options.onExport(n,r,i))}catch{}1===a.length&&("root"===a[0].type||"group"===a[0].type)&&(a=a[0].body.filter(l=>"first"!==l.type));try{o.clipboardData.setData("application/json+mathlive",JSON.stringify(a.map(l=>l.toJson())))}catch{}let s=n.computeEngine;if(s)try{s.jsonSerializationOptions={metadata:["latex"]};let l=s.parse(r),c=JSON.stringify(l.json);c&&o.clipboardData.setData("application/json",c)}catch{}}o.preventDefault()}static insert(n,o,e,i={}){return Ox._registry[n].insert(o,e,i)}onPaste(n,o){return!1}insert(n,o,e){return!1}},Qo=Ox;Qo._registry={};var Qs={"\\ne":"<mo>&ne;</mo>","\\neq":"<mo>&neq;</mo>","\\pm":"&#177;","\\times":"&#215;","\\colon":":","\\vert":"|","\\Vert":"\u2225","\\mid":"\u2223","\\lbrace":"{","\\rbrace":"}","\\lparen":"(","\\rparen":")","\\langle":"\u27e8","\\rangle":"\u27e9","\\lfloor":"\u230a","\\rfloor":"\u230b","\\lceil":"\u2308","\\rceil":"\u2309","\\vec":"&#x20d7;","\\acute":"&#x00b4;","\\grave":"&#x0060;","\\dot":"&#x02d9;","\\ddot":"&#x00a8;","\\tilde":"&#x007e;","\\bar":"&#x00af;","\\breve":"&#x02d8;","\\check":"&#x02c7;","\\hat":"&#x005e;"},rC="<mo>&#x2061;</mo>",F4="<mo>&#8290;</mo>";function Ex(n){return n.replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function To(n,o){return n&&o.generateID?` extid="${n}"`:""}function kH(n,o,e){var i,a,r,s,l,c,d,h;let _=!1;o=o??n.atoms.length;let x="",b="",T=n.atoms[n.index];if("\\operatorname"===T.command)b=hg(T.body),n.index+=1;else{let P=null!=(a=null==(i=T.style)?void 0:i.variant)?a:"",U=null!=(s=null==(r=T.style)?void 0:r.variantStyle)?s:"";for(;n.index<o&&("mord"===T.type||"macro"===T.type)&&!T.isDigit()&&P===(null!=(c=null==(l=T.style)?void 0:l.variant)?c:"")&&U===(null!=(h=null==(d=T.style)?void 0:d.variantStyle)?h:"");)b+=hg([T]),n.index+=1,T=n.atoms[n.index]}return b.length>0&&(_=!0,x=`<mi>${b}</mi>`,("mi"===n.lastType||"mn"===n.lastType||"mtext"===n.lastType||"fence"===n.lastType)&&!/^<mo>(.*)<\/mo>$/.test(x)&&(x=F4+x),b.endsWith(">f</mi>")||b.endsWith(">g</mi>")?(x+=rC,n.lastType="applyfunction"):n.lastType=/^<mo>(.*)<\/mo>$/.test(x)?"mo":"mi",mg(b,n,e)||(n.mathML+=x)),_}function mg(n,o,e){var i;let a=o.atoms[o.index-1];if(!a)return!1;if(!a.superscript&&!a.subscript){if("msubsup"!==(null==(i=o.atoms[o.index])?void 0:i.type))return!1;a=o.atoms[o.index],o.index+=1}let r=Zi(a.superscript,e),s=Zi(a.subscript,e);if(!r&&!s)return!1;let l="";return r&&s?l=`<msubsup>${n}${s}${r}</msubsup>`:r?l=`<msup>${n}${r}</msup>`:s&&(l=`<msub>${n}${s}</msub>`),o.mathML+=l,o.lastType="",!0}function OH(n,o,e){o=o??n.atoms.length;let i=n.index,a="";for(;n.index<o&&"text"===n.atoms[n.index].mode;)a+=n.atoms[n.index].value?n.atoms[n.index].value:" ",n.index+=1;return a.length>0&&(n.mathML+=`<mtext ${To(n.atoms[i].id,e)}\n      >${a}</mtext>`,n.lastType="mtext",!0)}function EH(n,o,e){o=o??n.atoms.length;let i=n.index,a="",r=function SH(n){let o=-1,e=n.index,i=!1,a=!1;for(;e<n.atoms.length&&!i&&!a;){let r=n.atoms[e];i=!r.isDigit(),a=!i&&void 0!==r.superscript,e++}return a&&(o=e-1),o}(n);for(r>=0&&r<o&&(o=r);n.index<o&&n.atoms[n.index].isDigit();)a+=n.atoms[n.index].asDigit(),n.index+=1;return!(a.length<=0||(a="<mn"+To(n.atoms[i].id,e)+">"+a+"</mn>",r<0&&function AH(n){return n.index<n.atoms.length&&n.atoms[n.index].superscript&&"msubsup"===n.atoms[n.index].type}(n)&&(r=n.index,n.index+=1),mg(a,n,e)||(n.mathML+=a,n.lastType="mn"),0))}function MH(n,o,e){let i=!1,a="",r="";if(n.index<(o=o??n.atoms.length)&&"mopen"===n.atoms[n.index].type){let s=!1,l=0,c=n.index,d=-1,h=c+1;for(;h<o&&!s;)"mopen"===n.atoms[h].type?l+=1:"mclose"===n.atoms[h].type&&(l-=1),-1===l&&(s=!0,d=h),h+=1;s&&(a="<mrow>",a+=Km(n.atoms[c],e),a+=Zi(n.atoms,e,c+1,d),a+=Km(n.atoms[d],e),a+="</mrow>",n.index=d+1,("mi"===n.lastType||"mn"===n.lastType||"mfrac"===n.lastType||"fence"===n.lastType)&&(n.mathML+=F4),mg(a,n,e)&&(i=!0,n.lastType="",a=""),r="fence")}return a.length>0&&(i=!0,n.mathML+=a,n.lastType=r),i}function IH(n,o,e){let i=!1,a="",r="",s=n.atoms[n.index];if(n.index<(o=o??n.atoms.length)&&("mbin"===s.type||"mrel"===s.type))a+=Q4(n.atoms[n.index],e),n.index+=1,r="mo";else if(n.index<o&&"mop"===s.type){if("over-under"===s.subsupPlacement&&(s.superscript||s.subscript)){let l=Km(s,e);s.superscript&&s.subscript?(a+="<munderover>"+l,a+=Zi(s.subscript,e),a+=Zi(s.superscript,e),a+="</munderover>"):s.superscript?(a+="<mover>"+l,a+=Zi(s.superscript,e),a+="</mover>"):s.subscript&&(a+="<munder>"+l,a+=Zi(s.subscript,e),a+="</munder>"),r="mo"}else{let l=n.atoms[n.index],c="\\operatorname"===l.value,d=c?'<mi class="MathML-Unit"'+To(l.id,e)+">"+hg(l.value)+"</mi>":Km(l,e);a+=d,c||/^<mo>(.*)<\/mo>$/.test(d)?r=c?"mi":"mo":(a+=rC,r="applyfunction")}("mi"===n.lastType||"mn"===n.lastType)&&!/^<mo>(.*)<\/mo>$/.test(a)&&(a=F4+a),n.index+=1}return a.length>0&&(i=!0,mg(a,n,e)||(n.mathML+=a,n.lastType=r)),i}function Zi(n,o,e,i){let a={atoms:[],index:e??0,mathML:"",lastType:""};if("number"==typeof n||"boolean"==typeof n)a.mathML=n.toString();else if("string"==typeof n)a.mathML=n;else if(n instanceof ke)a.mathML=Q4(n,o);else if(Array.isArray(n)){a.atoms=n;let r=0;for(i=i||(n?n.length:0);a.index<i;)if(OH(a,i,o)||EH(a,i,o)||kH(a,i,o)||IH(a,i,o)||MH(a,i,o))r+=1;else if(a.index<i){let s=Q4(a.atoms[a.index],o);"mn"===a.lastType&&s.length>0&&"genfrac"===a.atoms[a.index].type&&(s="<mo>&#x2064;</mo>"+s),a.lastType="genfrac"===a.atoms[a.index].type?"mfrac":"",a.index+=1,mg(s,a,o)?r+=1:s.length>0&&(a.mathML+=s,r+=1)}r>1&&(a.mathML="<mrow>"+a.mathML+"</mrow>")}return a.mathML}function Km(n,o){let e="",i=hg(n.value);return i&&(e="<mo"+To(n.id,o)+">"+i+"</mo>"),e}function hg(n){if(!n)return"";if("string"==typeof n)return Ex(n);if(!Array.isArray(n)&&"string"==typeof n.body)return Ex(n.body);let o="";for(let e of n)"string"==typeof e.value&&(o+=e.value);return Ex(o)}function Q4(n,o){var e,i,a,r,s,l,c,d,h,_,x,b,T,P,U,q,B,W,G,nt,At,ut,et,vt,Nt;let ie,Wt,oe,ne,we,at,ot={widehat:"^",widecheck:"\u02c7",widetilde:"~",utilde:"~",overleftarrow:"\u2190",underleftarrow:"\u2190",xleftarrow:"\u2190",overrightarrow:"\u2192",underrightarrow:"\u2192",xrightarrow:"\u2192",underbrace:"\u23df",overbrace:"\u23de",overgroup:"\u23e0",undergroup:"\u23e1",overleftrightarrow:"\u2194",underleftrightarrow:"\u2194",xleftrightarrow:"\u2194",Overrightarrow:"\u21d2",xRightarrow:"\u21d2",overleftharpoon:"\u21bc",xleftharpoonup:"\u21bc",overrightharpoon:"\u21c0",xrightharpoonup:"\u21c0",xLeftarrow:"\u21d0",xLeftrightarrow:"\u21d4",xhookleftarrow:"\u21a9",xhookrightarrow:"\u21aa",xmapsto:"\u21a6",xrightharpoondown:"\u21c1",xleftharpoondown:"\u21bd",xrightleftharpoons:"\u21cc",xleftrightharpoons:"\u21cb",xtwoheadleftarrow:"\u219e",xtwoheadrightarrow:"\u21a0",xlongequal:"=",xtofrom:"\u21c4",xrightleftarrows:"\u21c4",xrightequilibrium:"\u21cc",xleftequilibrium:"\u21cb"},_t={"\\exponentialE":"&#x02147;","\\imaginaryI":"&#x2148;","\\differentialD":"&#x2146;","\\capitalDifferentialD":"&#x2145;","\\alpha":"&#x03b1;","\\pi":"&#x03c0;","\\infty":"&#x221e;","\\forall":"&#x2200;","\\nexists":"&#x2204;","\\exists":"&#x2203;","\\hbar":"\u210f","\\cdotp":"\u22c5","\\ldots":"\u2026","\\cdots":"\u22ef","\\ddots":"\u22f1","\\vdots":"\u22ee","\\ldotp":"."},It={"\\!":-3/18,"\\ ":6/18,"\\,":3/18,"\\:":4/18,"\\;":5/18,"\\enspace":.5,"\\quad":1,"\\qquad":2,"\\enskip":.5},Tt="",Vt="",kt=null!=(i={cal:"script",frak:"fraktur",bb:"double-struck",scr:"script",cmtt:"monospace",cmss:"sans-serif"}[null!=(e=n.fontFamily)?e:n.font])?i:"";kt&&(kt=` mathvariant="${kt}"`);let{command:Et}=n;if("text"===n.mode)Tt=`<mi${To(n.id,o)}>${n.value}</mi>`;else switch(n.type){case"first":case"line":case"overlap":case"msubsup":case"phantom":case"composition":case"rule":case"chem":case"error":break;case"group":case"root":Tt=Qs[n.command]?Qs[n.command]:Zi(n.body,o);break;case"array":if((n.leftDelim&&"."!==n.leftDelim||n.rightDelim&&"."!==n.rightDelim)&&(Tt+="<mrow>",n.leftDelim&&"."!==n.leftDelim&&(Tt+="<mo>"+(Qs[n.leftDelim]||n.leftDelim)+"</mo>")),Tt+="<mtable",n.colFormat){for(Tt+=' columnalign="',oe=0;oe<n.colFormat.length;oe++)n.colFormat[oe].align&&(Tt+={l:"left",c:"center",r:"right"}[n.colFormat[oe].align]+" ");Tt+='"'}for(Tt+=">",Wt=0;Wt<n.array.length;Wt++){for(Tt+="<mtr>",ie=0;ie<n.array[Wt].length;ie++)Tt+="<mtd>"+Zi(n.array[Wt][ie],o)+"</mtd>";Tt+="</mtr>"}Tt+="</mtable>",(n.leftDelim&&"."!==n.leftDelim||n.rightDelim&&"."!==n.rightDelim)&&(n.rightDelim&&"."!==n.rightDelim&&(Tt+="<mo>"+(Qs[n.leftDelim]||n.rightDelim)+"</mo>"),Tt+="</mrow>");break;case"genfrac":(n.leftDelim||n.rightDelim)&&(Tt+="<mrow>"),n.leftDelim&&"."!==n.leftDelim&&(Tt+="<mo"+To(n.id,o)+">"+(Qs[n.leftDelim]||n.leftDelim)+"</mo>"),n.hasBarLine?(Tt+="<mfrac>",Tt+=Zi(n.above,o)||"<mi>&nbsp;</mi>",Tt+=Zi(n.below,o)||"<mi>&nbsp;</mi>",Tt+="</mfrac>"):(Tt+="<mtable"+To(n.id,o)+">",Tt+="<mtr>"+Zi(n.above,o)+"</mtr>",Tt+="<mtr>"+Zi(n.below,o)+"</mtr>",Tt+="</mtable>"),n.rightDelim&&"."!==n.rightDelim&&(Tt+="<mo"+To(n.id,o)+">"+(Qs[n.rightDelim]||n.rightDelim)+"</mo>"),(n.leftDelim||n.rightDelim)&&(Tt+="</mrow>");break;case"surd":n.hasEmptyBranch("above")?(Tt+="<msqrt"+To(n.id,o)+">",Tt+=Zi(n.body,o),Tt+="</msqrt>"):(Tt+="<mroot"+To(n.id,o)+">",Tt+=Zi(n.body,o),Tt+=Zi(n.above,o),Tt+="</mroot>");break;case"leftright":Tt="<mrow>",n.leftDelim&&"."!==n.leftDelim&&(Tt+="<mo"+To(n.id,o)+">"+(null!=(a=Qs[n.leftDelim])?a:n.leftDelim)+"</mo>"),n.body&&(Tt+=Zi(n.body,o)),n.rightDelim&&"."!==n.rightDelim&&(Tt+="<mo"+To(n.id,o)+">"+(null!=(r=Qs[n.rightDelim])?r:n.rightDelim)+"</mo>"),Tt+="</mrow>";break;case"sizeddelim":case"delim":Tt+='<mo separator="true"'+To(n.id,o)+">"+(Qs[n.delim]||n.delim)+"</mo>";break;case"accent":Tt+='<mover accent="true"'+To(n.id,o)+">",Tt+=Zi(n.body,o),Tt+="<mo>"+(Qs[Et]||n.accent)+"</mo>",Tt+="</mover>";break;case"overunder":we=n.above,ne=n.below,(n.svgAbove||we)&&(n.svgBelow||ne)?at=n.body:we&&we.length>0?(at=n.body,null!=(l=null==(s=n.body)?void 0:s[0])&&l.below?(ne=n.body[0].below,at=n.body[0].body):"first"===(null==(d=null==(c=n.body)?void 0:c[0])?void 0:d.type)&&null!=(_=null==(h=n.body)?void 0:h[1])&&_.below&&(ne=n.body[1].below,at=n.body[1].body)):ne&&ne.length>0&&(at=n.body,null!=(b=null==(x=n.body)?void 0:x[0])&&b.above?(we=n.body[0].above,at=n.body[0].body):"first"===(null==(P=null==(T=n.body)?void 0:T[0])?void 0:P.type)&&null!=(q=null==(U=n.body)?void 0:U[1])&&q.above&&(we=n.body[1].overscript,at=n.body[1].body)),(n.svgAbove||we)&&(n.svgBelow||ne)?(Tt+=`<munderover ${kt} ${To(n.id,o)}>`,Tt+=null!=(B=ot[n.svgBody])?B:Zi(at,o),Tt+=null!=(W=ot[n.svgBelow])?W:Zi(ne,o),Tt+=null!=(G=ot[n.svgAbove])?G:Zi(we,o),Tt+="</munderover>"):n.svgAbove||we?(Tt+=`<mover ${kt} ${To(n.id,o)}>`+(null!=(nt=ot[n.svgBody])?nt:Zi(at,o)),Tt+=null!=(At=ot[n.svgAbove])?At:Zi(we,o),Tt+="</mover>"):(n.svgBelow||ne)&&(Tt+=`<munder ${kt} ${To(n.id,o)}>`+(null!=(ut=ot[n.svgBody])?ut:Zi(at,o)),Tt+=null!=(et=ot[n.svgBelow])?et:Zi(ne,o),Tt+="</munder>");break;case"placeholder":case"mord":{Tt=_t[Et]||Et||("string"==typeof n.value?n.value:"");let Ft=Et?Et.match(/{?\\char"([\dabcdefABCDEF]*)}?/):null;Ft?Tt="&#x"+Ft[1]+";":Tt.length>0&&Tt.startsWith("\\")&&(Tt="string"==typeof n.value&&n.value.charCodeAt(0)>255?"&#x"+("000000"+n.value.charCodeAt(0).toString(16)).slice(-4)+";":"string"==typeof n.value?n.value.charAt(0):"");let Gt=/\d/.test(Tt)?"mn":"mi";Tt=`<${Gt}${kt}${To(n.id,o)}>${Ex(Tt)}</${Gt}>`;break}case"mbin":case"mrel":case"minner":Tt=Et&&_t[Et]?"<mi"+To(n.id,o)+">"+_t[Et]+"</mi>":Et&&Qs[Et]?"<mo"+To(n.id,o)+">"+Qs[Et]+"</mo>":Km(n,o);break;case"mpunct":Tt='<mo separator="true"'+To(n.id,o)+">"+(null!=(vt=Qs[Et])?vt:Et)+"</mo>";break;case"mop":"\u200b"!==n.body&&(Tt="<mo"+To(n.id,o)+">",Tt+="\\operatorname"===Et?n.body:Et||n.body,Tt+="</mo>");break;case"box":Tt='<menclose notation="box"',n.backgroundcolor&&(Tt+=' mathbackground="'+n.backgroundcolor+'"'),Tt+=To(n.id,o)+">"+Zi(n.body,o)+"</menclose>";break;case"spacing":Tt+='<mspace width="'+(null!=(Nt=It[Et])?Nt:0)+'em"/>';break;case"enclose":Tt='<menclose notation="';for(let Ft in n.notation)Object.prototype.hasOwnProperty.call(n.notation,Ft)&&n.notation[Ft]&&(Tt+=Vt+Ft,Vt=" ");Tt+=To(n.id,o)+'">'+Zi(n.body,o)+"</menclose>";break;case"space":Tt+="&nbsp;";break;case"mopen":case"mclose":Tt+=Km(n,o);break;case"macro":{let Ft=n.command+hg(n.macroArgs);Ft&&(Tt+=`<mo ${To(n.id,o)}>${Ft}</mo>`)}break;case"latexgroup":case"tooltip":Tt+=Zi(n.body,o);break;case"latex":Tt+="<mtext"+To(n.id,o)+">"+n.value+"</mtext>"}return Tt}var qp={"\\alpha":"alpha ","\\mu":"mew ","\\sigma":"sigma ","\\pi":"pie ","\\imaginaryI":"eye ","\\sum":"Summation ","\\prod":"Product ","+":"plus ","-":"minus ",";":'<break time="150ms"/> semi-colon <break time="150ms"/>',",":'<break time="150ms"/> comma  <break time="150ms"/>',"|":'<break time="150ms"/>Vertical bar<break time="150ms"/>',"(":'<break time="150ms"/>Open paren. <break time="150ms"/>',")":'<break time="150ms"/> Close paren. <break time="150ms"/>',"=":"equals ","<":"is less than ","\\lt":"is less than ","<=":"is less than or equal to ","\\le":"is less than or equal to ","\\gt":"is greater than ",">":"is greater than ","\\ge":"is greater than or equal to ","\\geq":"is greater than or equal to ","\\leq":"is less than or equal to ","!":"factorial ","\\sin":"sine ","\\cos":"cosine ","\u200b":"","\u2212":"minus ",":":'<break time="150ms"/> such that <break time="200ms"/> ',"\\colon":'<break time="150ms"/> such that <break time="200ms"/> ',"\\hbar":"etch bar ","\\iff":'<break time="200ms"/>if, and only if, <break time="200ms"/>',"\\Longleftrightarrow":'<break time="200ms"/>if, and only if, <break time="200ms"/>',"\\land":"and ","\\lor":"or ","\\neg":"not ","\\div":"divided by ","\\forall":"for all ","\\exists":"there exists ","\\nexists":"there does not exists ","\\in":"element of ","\\N":'the set <break time="150ms"/><say-as interpret-as="character">n</say-as>',"\\C":'the set <break time="150ms"/><say-as interpret-as="character">c</say-as>',"\\Z":'the set <break time="150ms"/><say-as interpret-as="character">z</say-as>',"\\Q":'the set <break time="150ms"/><say-as interpret-as="character">q</say-as>',"\\infty":"infinity ","\\nabla":"nabla ","\\partial":"partial derivative of ","\\cdot":"times ","\\cdots":"dot dot dot ","\\Rightarrow":"implies ","\\lparen":'<break time="150ms"/>open paren<break time="150ms"/>',"\\rparen":'<break time="150ms"/>close paren<break time="150ms"/>',"\\lbrace":'<break time="150ms"/>open brace<break time="150ms"/>',"\\{":'<break time="150ms"/>open brace<break time="150ms"/>',"\\rbrace":'<break time="150ms"/>close brace<break time="150ms"/>',"\\}":'<break time="150ms"/>close brace<break time="150ms"/>',"\\langle":'<break time="150ms"/>left angle bracket<break time="150ms"/>',"\\rangle":'<break time="150ms"/>right angle bracket<break time="150ms"/>',"\\lfloor":'<break time="150ms"/>open floor<break time="150ms"/>',"\\rfloor":'<break time="150ms"/>close floor<break time="150ms"/>',"\\lceil":'<break time="150ms"/>open ceiling<break time="150ms"/>',"\\rceil":'<break time="150ms"/>close ceiling<break time="150ms"/>',"\\vert":'<break time="150ms"/>vertical bar<break time="150ms"/>',"\\mvert":'<break time="150ms"/>divides<break time="150ms"/>',"\\lvert":'<break time="150ms"/>left vertical bar<break time="150ms"/>',"\\rvert":'<break time="150ms"/>right vertical bar<break time="150ms"/>',"\\lbrack":'<break time="150ms"/> open square bracket <break time="150ms"/>',"\\rbrack":'<break time="150ms"/> close square bracket <break time="150ms"/>',mm:"millimeters",cm:"centimeters",km:"kilometers",kg:"kilograms"},R4={array:"array",matrix:"matrix",pmatrix:"parenthesis matrix",bmatrix:"square brackets matrix",Bmatrix:"braces matrix",vmatrix:"bars matrix",Vmatrix:"double bars matrix","matrix*":"matrix",smallmatrix:"small matrix"};function pg(n){let o=0;if(qa(n))for(let e of n)"first"!==e.type&&(o+=1);return 1===o}function sC(n){let o="";if(qa(n))for(let e of n)"first"!==e.type&&"string"==typeof e.value&&(o+=e.value);return o}function Wi(n,o,e){var i,a,r,s;function c(h){return"<emphasis>"+h+"</emphasis>"}if(!o)return"";let d="";if(qa(o)){let h=!1,_=!1;for(let x=0;x<o.length;x++)"first"!==o[x].type&&("text"!==o[x].mode&&(_=!1),x<o.length-2&&"mopen"===o[x].type&&"mclose"===o[x+2].type&&"mord"===o[x+1].type?(d+=" of ",d+=c(Wi(n,o[x+1],e)),x+=2):"text"===o[x].mode?_?d+=null!=(i=o[x].value)?i:" ":(_=!0,d+=Wi("text",o[x],e)):o[x].isDigit()?h?d+=o[x].asDigit():(h=!0,d+=Wi(n,o[x],e)):(h=!1,d+=Wi(n,o[x],e)))}else if("text"===o.mode)o.id&&"math"===n&&(d+='<mark name="'+o.id.toString()+'"/>'),d+=o.value;else{o.id&&"math"===n&&(d+='<mark name="'+o.id.toString()+'"/>');let h="",_="",x="",b=!1,{command:T}=o;switch(o.type){case"accent":"\\vec"===T&&(d+="vector "+Wi(n,o.body,e));break;case"array":let P=o.array,U=o.environmentName;if(Object.keys(R4).includes(U)){d+=` begin ${R4[U]} `;for(let G=0;G<P.length;G++){G>0&&(d+=","),d+=` row ${G+1} `;for(let nt=0;nt<P[G].length;nt++)nt>0&&(d+=","),d+=` column ${nt+1}: `,d+=Wi("math",P[G][nt],e)}d+=` end ${R4[U]} `}break;case"group":"\\ne"===T?d+=" not equal ":("\\not"===T&&(d+=" not "),d+=Wi("math",o.body,e));break;case"root":d+=Wi("math",o.body,e);break;case"genfrac":if(h=Wi("math",o.above,e),_=Wi("math",o.below,e),pg(o.above)&&pg(o.below)){let G={"1/2":" half ","1/3":" one third ","2/3":" two third","1/4":" one quarter ","3/4":" three quarter ","1/5":" one fifth ","2/5":" two fifths ","3/5":" three fifths ","4/5":" four fifths ","1/6":" one sixth ","5/6":" five sixths ","1/8":" one eight ","3/8":" three eights ","5/8":" five eights ","7/8":" seven eights ","1/9":" one ninth ","2/9":" two ninths ","4/9":" four ninths ","5/9":" five ninths ","7/9":" seven ninths ","8/9":" eight ninths "}[sC(o.above)+"/"+sC(o.below)];G?d=G:d+=h+" over "+_}else d+=' the fraction <break time="150ms"/>'+h+' over <break time="150ms"/>'+_+'.<break time="150ms"/> End fraction.<break time="150ms"/>';break;case"surd":if(x=Wi("math",o.body,e),o.hasEmptyBranch("above"))d+=pg(o.body)?" the square root of "+x+" , ":' the square root of <break time="200ms"/>'+x+'. <break time="200ms"/> End square root';else{let G=Wi("math",o.above,e);G=G.trim();let nt=G.replace(/<mark([^/]*)\/>/g,"");d+="3"===nt?' the cube root of <break time="200ms"/>'+x+'. <break time="200ms"/> End cube root':"n"===nt?' the nth root of <break time="200ms"/>'+x+'. <break time="200ms"/> End root':' the root with index: <break time="200ms"/>'+G+', of <break time="200ms"/>'+x+'. <break time="200ms"/> End root'}break;case"leftright":{let G=o;d+=null!=(a=G.leftDelim?qp[G.leftDelim]:void 0)?a:G.leftDelim,d+=Wi("math",o.body,e),d+=null!=(r=G.rightDelim?qp[G.rightDelim]:void 0)?r:G.rightDelim}break;case"rule":case"overunder":case"overlap":case"space":case"spacing":break;case"line":let q=o.position;d+=`${q} `,d+=Wi("math",o.body,e),d+=` end ${q} `;break;case"macro":let B=T.replace(/^\\/g,""),W=_4()[B];W&&(d+=null!=W&&W.expand?Wi("math",o.body,e):`${B} `);break;case"placeholder":d+="placeholder ";break;case"delim":case"sizeddelim":case"mord":case"minner":case"mbin":case"mrel":case"mpunct":case"mopen":case"mclose":{if("\\mathbin"===T||"\\mathrel"===T||"\\mathopen"===T||"\\mathclose"===T||"\\mathpunct"===T||"\\mathord"===T||"\\mathinner"===T){d=Wi(n,o.body,e);break}let G=o.isDigit()?o.asDigit():o.value,nt=o.command;if(("delim"===o.type||"sizeddelim"===o.type)&&(nt=o.value,G=nt),"text"===n)d+=G;else{if("mbin"===o.type&&(d+='<break time="150ms"/>'),G){let At=qp[G]||(nt?qp[nt.trim()]:"");if(At)d+=" "+At;else{let ut=nt?function LH(n){let o="";return n.startsWith("\\")&&(o=" "+n.replace("\\","")+" "),o}(nt.trim()):"";d+=ut||function l(h){return e.textToSpeechMarkup?/[a-z]/.test(h)?` <say-as interpret-as="character">${h}</say-as>`:/[A-Z]/.test(h)?`capital <say-as interpret-as="character">${h.toLowerCase()}</say-as>`:h:/[a-z]/.test(h)?" '"+h.toUpperCase()+"'":/[A-Z]/.test(h)?" 'capital "+h.toUpperCase()+"'":h}(G)}}else d+=Wi("math",o.body,e);"mbin"===o.type&&(d+='<break time="150ms"/>')}break}case"mop":if("\u200b"!==o.value){let G=o.command;if("\\sum"===G)if(o.hasEmptyBranch("superscript")||o.hasEmptyBranch("subscript"))if(o.hasEmptyBranch("subscript"))d+=" the summation of";else{let nt=Wi("math",o.subscript,e);nt=nt.trim(),d+=' the summation from <break time="200ms"/>'+nt+'<break time="200ms"/> of <break time="150ms"/>',b=!0}else{let nt=Wi("math",o.superscript,e);nt=nt.trim();let At=Wi("math",o.subscript,e);At=At.trim(),d+=' the summation from <break time="200ms"/>'+At+'<break time="200ms"/> to  <break time="200ms"/>'+nt+'<break time="200ms"/> of <break time="150ms"/>',b=!0}else if("\\prod"===G)if(o.hasEmptyBranch("superscript")||o.hasEmptyBranch("subscript"))if(o.hasEmptyBranch("subscript"))d+=" the product  of ";else{let nt=Wi("math",o.subscript,e);nt=nt.trim(),d+=' the product from <break time="200ms"/>'+nt+'<break time="200ms"/> of <break time="150ms"/>',b=!0}else{let nt=Wi("math",o.superscript,e);nt=nt.trim();let At=Wi("math",o.subscript,e);At=At.trim(),d+=' the product from <break time="200ms"/>'+At+'<break time="200ms"/> to <break time="200ms"/>'+nt+'<break time="200ms"/> of <break time="150ms"/>',b=!0}else if("\\int"===G)if(o.hasEmptyBranch("superscript")||o.hasEmptyBranch("subscript"))d+=' the integral of <break time="200ms"/> ';else{let nt=Wi("math",o.superscript,e);nt=nt.trim();let At=Wi("math",o.subscript,e);At=At.trim(),d+=' the integral from <break time="200ms"/>'+c(At)+'<break time="200ms"/> to <break time="200ms"/>'+c(nt)+' <break time="200ms"/> of ',b=!0}else"string"==typeof o.value?d+=(null!=(s=qp[o.value])?s:o.command?qp[o.command]:void 0)||" "+o.value:o.command&&(d+="\\mathop"===o.command?Wi("math",o.body,e):"\\operatorname"===o.command?function NH(n,o){return n?n.map(e=>e.value).join(""):""}(o.body):o.command.startsWith("\\")?" "+o.command.slice(1):" "+o.command)}break;case"enclose":x=Wi("math",o.body,e),d+=" crossed out "+x+". End crossed out."}if(!b&&!o.hasEmptyBranch("superscript")){let P=Wi(n,o.superscript,e);P=P.trim();let U=P.replace(/<[^>]*>/g,"");if(pg(o.superscript)){if("math"===n){let q=function PH(n){if(qa(n))for(let o of n)if("first"!==o.type&&o.id)return o.id.toString();return""}(o.superscript);q&&(d+='<mark name="'+q+'"/>')}"\u2032"===U?d+=" prime ":"2"===U?d+=" squared ":"3"===U?d+=" cubed ":Number.isNaN(Number.parseInt(U))?d+=" to the "+P+"; ":d+=' to the <say-as interpret-as="ordinal">'+U+"</say-as> power; "}else Number.isNaN(Number.parseInt(U))?d+=" raised to the "+P+"; ":d+=' raised to the <say-as interpret-as="ordinal">'+U+"</say-as> power; "}if(!b&&!o.hasEmptyBranch("subscript")){let P=Wi("math",o.subscript,e);P=P.trim(),d+=pg(o.subscript)?" sub "+P:" subscript "+P+". End subscript. "}}return d}function Fp(n,o){var e;let i=ei(Ee({},o),{textToSpeechRulesOptions:Ee({},o.textToSpeechRulesOptions)});if("sre"===i.textToSpeechRules&&"sre"in globalThis){let r=Zi(n,i);return r?(i.textToSpeechMarkup&&(i.textToSpeechRulesOptions=null!=(e=i.textToSpeechRulesOptions)?e:{},i.textToSpeechRulesOptions.markup=i.textToSpeechMarkup,"ssml"===i.textToSpeechRulesOptions.markup&&(i.textToSpeechRulesOptions.markup="ssml_step"),i.textToSpeechRulesOptions.rate=i.speechEngineRate),i.textToSpeechRulesOptions&&globalThis.sre.System.getInstance().setupEngine(i.textToSpeechRulesOptions),globalThis.sre.System.getInstance().toSpeech(r)):""}let a=Wi("math",n,i);if("ssml"===i.textToSpeechMarkup){let r="";i.speechEngineRate&&(r='<prosody rate="'+i.speechEngineRate+'">'),a='<?xml version="1.0"?><speak version="1.1" xmlns="http://www.w3.org/2001/10/synthesis" xml:lang="en-US"><amazon:auto-breaths>'+r+"<p><s>"+a+"</s></p>"+(r?"</prosody>":"")+"</amazon:auto-breaths></speak>"}else a="mac"===i.textToSpeechMarkup&&"macos"===Mp()?a.replace(/<mark([^/]*)\/>/g,"").replace(/<emphasis>/g,"[[emph+]]").replace(/<\/emphasis>/g,"").replace(/<break time="(\d*)ms"\/>/g,"[[slc $1]]").replace(/<say-as[^>]*>/g,"").replace(/<\/say-as>/g,""):a.replace(/<[^>]*>/g,"").replace(/\s{2,}/g," ");return a}function Yl(n,o,e,i){let a=o.split(" ");for(let r of a){let s=r.match(/(.*):(.*)/);if(s){let l=i??{};"active"===s[2]?l.passive=!1:l[s[2]]=!0,n.addEventListener(s[1],e,l)}else n.addEventListener(r,e,i)}}function Mx(n,o,e,i){let a=o.split(" ");for(let r of a){let s=r.match(/(.*):(.*)/);if(s){let l=i??{};"active"===s[2]?l.passive=!1:l[s[2]]=!0,n.removeEventListener(s[1],e,l)}else n.removeEventListener(r,e,i)}}function lC(n){var o;S5();let e=document.getElementById(n);return e?e.dataset.refcount=Number(Number.parseInt(null!=(o=e.getAttribute("data-refcount"))?o:"0")+1).toString():(e=document.createElement("div"),e.setAttribute("aria-hidden","true"),e.dataset.refcount="1",e.id=n,document.body.append(e)),e}function cC(n){var o;if(!n)return;let e=Number.parseInt(null!=(o=n.getAttribute("data-refcount"))?o:"0");e<=1?n.remove():n.dataset.refcount=Number(e-1).toString()}function Wm(n){var o;return(null==(o=n.element)?void 0:o.mathfield)===n}function _g(n){let o=function ZH(n){var o,e;return null!=(e=null!=(o=n.querySelector(".ML__caret"))?o:n.querySelector(".ML__text-caret"))?e:n.querySelector(".ML__latex-caret")}(n);if(!o)return null;let e=o.getBoundingClientRect();return{x:e.right,y:e.bottom,height:e.height}}function DH(n){var o;if(!n.parent)return"root";let e=null!=(o=n.parent.id)?o:"";return e+="string"==typeof n.treeBranch?"-"+n.treeBranch:`-${n.treeBranch[0]}/${n.treeBranch[0]}`,e}function uC(n,o){if(!o)return null;let e=n.field.getBoundingClientRect(),i=o.right-o.left,a=o.bottom-o.top,r=Math.ceil(o.left-e.left+n.field.scrollLeft),s=Math.ceil(o.top-e.top);return{left:r,right:r+i,top:s,bottom:s+a}}function dC(n){let o=n.getBoundingClientRect(),e=parseInt(getComputedStyle(n).marginRight),i={top:o.top-1,bottom:o.bottom,left:o.left,right:o.right-1+e};if(0===n.children.length||"SVG"===n.tagName.toUpperCase())return i;for(let a of n.children)if(1===a.nodeType&&"atomId"in a.dataset&&!a.classList.contains("pstrut")){let r=dC(a);i.left=Math.min(i.left,r.left),i.right=Math.max(i.right,r.right),i.top=Math.min(i.top,r.top),i.bottom=Math.max(i.bottom,r.bottom)}return i}function fg(n,o){var e,i;if(!o.id)return null;let a=null!=(i=null==(e=n.atomBoundsCache)?void 0:e.get(o.id))?i:null;if(null!==a)return a;let r=n.field.querySelector(`[data-atom-id="${o.id}"]`);return a=r?dC(r):null,n.atomBoundsCache&&(a?n.atomBoundsCache.set(o.id,a):n.atomBoundsCache.delete(o.id)),a??null}function mC(n,o){return n.model.selection.ranges.reduce((e,i)=>e.concat(...function jH(n,o,e){let i=new Map;for(let a of n.model.getAtoms(o,{includeChildren:!0})){if(null!=e&&e.excludeAtomsWithBackground&&a.style.backgroundColor)break;let r=uC(n,fg(n,a));if(r){let s=DH(a);if(i.has(s)){let l=i.get(s);i.set(s,{left:Math.min(l.left,r.left),right:Math.max(l.right,r.right),top:Math.min(l.top,r.top),bottom:Math.max(l.bottom,r.bottom)})}else i.set(s,r)}}return[...i.values()]}(n,i,o)),[])}function pC(n){let o=0,e=0,i=n.offsetWidth,a=n.offsetHeight;for(;n instanceof HTMLElement;)o+=n.offsetTop,e+=n.offsetLeft,n=n.offsetParent;return new DOMRect(e,o,i,a)}var _C={main:["Main-Regular","ML__cmr"],"main-italic":["Main-Italic","ML__cmr ML__it"],"main-bold":["Main-Bold","ML__cmr ML__bold"],"main-bolditalic":["Main-BoldItalic","ML__cmr ML__bold ML__it"],normal:["Main-Regular","ML__cmr"],"normal-bold":["Main-Bold","ML__mathbf"],"normal-italic":["Math-Italic","ML__mathit"],"normal-bolditalic":["Math-BoldItalic","ML__mathbfit"],ams:["AMS-Regular","ML__ams"],"ams-bold":["AMS-Regular","ML__ams"],"ams-italic":["AMS-Regular","ML__ams"],"ams-bolditalic":["AMS-Regular","ML__ams"],"sans-serif":["SansSerif-Regular","ML__sans"],"sans-serif-bold":["SansSerif-Regular","ML__sans ML__bold"],"sans-serif-italic":["SansSerif-Regular","ML__sans"],"sans-serif-bolditalic":["SansSerif-Regular","ML__sans"],calligraphic:["Caligraphic-Regular","ML__cal"],"calligraphic-bold":["Caligraphic-Regular","ML__cal ML__bold"],"calligraphic-italic":["Caligraphic-Regular","ML__cal ML__it"],"calligraphic-bolditalic":["Caligraphic-Regular","ML__cal ML__bold ML__it"],script:["Script-Regular","ML__script"],"script-bold":["Script-Regular","ML__script ML__bold"],"script-italic":["Script-Regular","ML__script ML__it"],"script-bolditalic":["Script-Regular","ML__script ML__bold ML__it"],fraktur:["Fraktur-Regular","ML__frak"],"fraktur-bold":["Fraktur-Regular","ML__frak"],"fraktur-italic":["Fraktur-Regular","ML__frak"],"fraktur-bolditalic":["Fraktur-Regular","ML__frak"],monospace:["Typewriter-Regular","ML__tt"],"monospace-bold":["Typewriter-Regular","ML__tt ML__bold"],"monospace-italic":["Typewriter-Regular","ML__tt ML__it"],"monospace-bolditalic":["Typewriter-Regular","ML__tt ML__bold ML__it"],"double-struck":["AMS-Regular","ML__bb"],"double-struck-bold":["AMS-Regular","ML__bb"],"double-struck-italic":["AMS-Regular","ML__bb"],"double-struck-bolditalic":["AMS-Regular","ML__bb"]},fC={"double-struck":/^[A-Z ]$/,script:/^[A-Z ]$/,calligraphic:/^[\dA-Z ]$/,fraktur:/^[\dA-Za-z ]$|^[!"#$%&'()*+,\-./:;=?[]^\u2019\u2018]$/,monospace:/^[\dA-Za-z ]$|^[!"&'()*+,\-./:;=?@[\]^_~\u0131\u0237\u0393\u0394\u0398\u039B\u039E\u03A0\u03A3\u03A5\u03A8\u03A9]$/,"sans-serif":/^[\dA-Za-z ]$|^[!"&'()*+,\-./:;=?@[\]^_~\u0131\u0237\u0393\u0394\u0398\u039B\u039E\u03A0\u03A3\u03A5\u03A8\u03A9]$/},gC=/^[\u03B1-\u03C9]|\u03D1|\u03D5|\u03D6|\u03F1|\u03F5]$/,FH=[/^[a-z]$/,/^[A-Z]$/,gC,/^[\u0393|\u0394\u0398\u039B\u039E\u03A0\u03A3\u03A5\u03A6\u03A8\u03A9]$/],QH={iso:["it","it","it","it"],tex:["it","it","it","up"],french:["it","up","up","up"],upright:["up","up","up","up"]};function U4(n){if(!n)return"";let{style:o}=n;if(void 0===o.variant)return"";let e=o.variant;return o.variantStyle&&"up"!==o.variantStyle&&(e+="-"+o.variantStyle),e}function Qp(n){return[Fo(n.map(o=>o[0])),n.map(o=>o[1]).some(o=>!0===o)]}function $H(n,o){return Qp(fl(n,"fontSize").map(e=>{var i,a;let[r,s]=function GH(n,o){return Qp(fl(n,"fontSeries").map(e=>{let[i,a]=function HH(n,o){return Qp(fl(n,"fontShape").map(e=>{let[i,a]=function JH(n,o){return[Fo(n.map(e=>ke.serialize(e,o))),!0]}(e,o),{fontShape:r}=e[0].style;return"it"===r?["\\textit{"+i+"}",!1]:"sl"===r?["\\textsl{"+i+"}",!1]:"sc"===r?["\\textsc{"+i+"}",!1]:"n"===r?["\\textup{"+i+"}",!1]:r?[`{\\fontshape{${e[0].style.fontShape}}${i}`,!1]:[i,a]}))}(e,o),{fontSeries:r}=e[0].style;return"b"===r?[`\\textbf{${i}}`,!1]:"l"===r?[`\\textlf{${i}}`,!1]:"m"===r?[`\\textmd{${i}}`,!1]:r?[`\\fontseries{${r}}${i}`,!1]:[i,a]}))}(e,o),l=null!=(a=["","tiny","scriptsize","footnotesize","small","normalsize","large","Large","LARGE","huge","Huge"][null!=(i=e[0].style.fontSize)?i:""])?a:"";return l?[`{\\${l} ${r}}`,s]:[r,s]}))}function WH(n,o){return Qp(fl(n,"backgroundColor").map(e=>{var i,a;let[r,s]=function VH(n,o){var e;if(!n||0===n.length)return["",!1];let i=null==(e=n[0].parent)?void 0:e.style.color;return Qp(fl(n,"color").map(a=>{var r,s;let[l,c]=function KH(n,o){return function YH(n,o){return Qp(fl(n,"fontFamily").map(e=>{var i,a;let[r,s]=$H(e,o),l=null!=(a={roman:"textrm",monospace:"texttt","sans-serif":"textsf"}[null!=(i=e[0].style.fontFamily)?i:""])?a:"";return l?[`\\${l}{${r}}`,!1]:e[0].style.fontFamily?[`\\fontfamily{${e[0].style.fontFamily}}${r}`,s]:[r,s]}))}(n,o)}(a,o);return null!=(r=o.skipStyles)&&r||!a[0].style.color||"none"===a[0].style.color||i===a[0].style.color?[l,c]:[`\\textcolor{${null!=(s=a[0].style.verbatimColor)?s:a[0].style.color}}{${l}}`,!1]}))}(e,o),l=e[0].computedStyle;return null!=(i=o.skipStyles)&&i||!l.backgroundColor||"none"===l.backgroundColor?[r,s]:[`\\colorbox{${null!=(a=l.verbatimBackgroundColor)?a:l.backgroundColor}}{${r}}`,!1]}))}new class extends Md{constructor(){super("math")}createAtom(n,o,e){var i,a,r,s,l;let c=o.getDefinition(n,"math");if(null===c)return new ke("mord",o,{mode:"math",command:n,value:n,style:e});if("symbol"===c.definitionType){let h=new ke(null!=(i=c.type)?i:"mord",o,{mode:"math",command:null!=(a=c.command)?a:n,value:String.fromCodePoint(c.codepoint),style:e});return null!=(r=c.isFunction)&&r&&(h.isFunction=!0),n.startsWith("\\")&&(h.verbatimLatex=n),h}let d=new ke("mord",o,{mode:"math",command:null!=(s=c.command)?s:n,value:n,style:e});return null!=(l=c.isFunction)&&l&&(d.isFunction=!0),n.startsWith("\\")&&(d.verbatimLatex=n),d}serialize(n,o){let{parent:e}=n[0],i=e?.computedStyle.fontSize;return Fo(fl(n,"fontSize").map(a=>{let r=function zH(n,o){let{parent:e}=n[0],i=e?.computedStyle.backgroundColor;return Fo(fl(n,"backgroundColor").map(a=>{var r,s;let l=function BH(n,o){let{parent:e}=n[0],i=e?.computedStyle.color;return Fo(fl(n,"color").map(a=>{var r,s;let l=function UH(n,o){var e;let{parent:i}=n[0],a=U4(i),r=null!=(e=i?.mode)?e:"math";return Fo(fl(n,"variant").map(s=>{let l=U4(s[0]);if(s.every(d=>{let h=d.context.getDefinition(d.command,r);return!(!h||"function"===h.definitionType||!h.variant)&&U4(d)===l}))return Fo(s.map(d=>ke.serialize(d,o)));let c="";return l&&l!==a&&(c={calligraphic:"\\mathcal{",fraktur:"\\mathfrak{","double-struck":"\\mathbb{",script:"\\mathscr{",monospace:"\\mathtt{","sans-serif":"\\mathsf{",normal:"\\mathrm{","normal-italic":"\\mathnormal{","normal-bold":"\\mathbf{","normal-bolditalic":"\\mathbfit{",ams:"","ams-italic":"\\mathit{","ams-bold":"\\mathbf{","ams-bolditalic":"\\mathbfit{",main:"","main-italic":"\\mathit{","main-bold":"\\mathbf{","main-bolditalic":"\\mathbfit{"}[l]),c?c+Fo(s.map(d=>ke.serialize(d,o)))+"}":Fo(s.map(d=>ke.serialize(d,o)))}))}(a,o),c=a[0].computedStyle;return null!=(r=o.skipStyles)&&r||!c.color||e&&i===c.color?l:"\\textcolor{"+(null!=(s=c.verbatimColor)?s:c.color)+"}{"+l+"}"}))}(a,o),c=a[0].computedStyle;return!(null!=(r=o.skipStyles)&&r)&&l.trim()&&c.backgroundColor&&(!e||i!==c.backgroundColor)&&(a.length>0||!(a[0]instanceof Jm))&&(l=`\\ensuremath{${l}}`,l=`\\colorbox{${null!=(s=c.verbatimBackgroundColor)?s:c.backgroundColor}}{${l}}`),l}))}(a,o),s=a[0].computedStyle.fontSize;return!s||e&&i===s?r:"\\"+["","tiny","scriptsize","footnotesize","small","normalsize","large","Large","LARGE","huge","Huge"][s]+" "+r}))}applyStyle(n,o){if(void 0===o.variant)return"";let e="auto"!==o.letterShapeStyle&&o.letterShapeStyle?o.letterShapeStyle:"tex",{variant:i}=o,{variantStyle:a}=o;"normal"===i&&!a&&/[\u00A3\u0131\u0237]/.test(n.value)&&(i="main",a="italic"),"normal"===i&&!a&&1===n.value.length&&FH.forEach((c,d)=>{c.test(n.value)&&"it"===QH[e][d]&&(a="italic")}),"up"===a&&(a=void 0);let r=a?i+"-"+a:i,[s,l]=_C[r];return fC[i]&&!fC[i].test(n.value)?(n.value=function AJ(n,o,e){if(!/[A-Za-z\d]/.test(n)||!o&&!e)return n;let i=n.codePointAt(0);if(void 0===i)return n;for(let a of P5)if((!o||a.variant===o)&&(!e||a.style===e)&&i>=a.offset&&i<a.offset+a.len){let r=a.start+i-a.offset;return String.fromCodePoint(p4[r]||r)}return n}(n.value,i,a),null):(gC.test(n.value)&&(n.classes+=" lcGreek"),l&&(n.classes+=" "+l),s)}};var xC={roman:"","sans-serif":"ML__sans",monospace:"ML__tt"};function Nu(n){let o=0;for(let e=0;e<n.length;e++)o=Math.imul(31,o)+n.charCodeAt(e)|0;return Math.abs(o)}function Zu(n,o,e){var i,a;if(!o)return null;let r=null!=(i=n?.getRootNode())?i:document?.head;if(!r)return null;r===document&&(r=document.head);let s=r.querySelector(`style[data-id="${e}"]`);if(s){let l=Number.parseFloat(null!=(a=s.getAttribute("data-refcount"))?a:"0");s.dataset.refcount=Number(l+1).toString()}else{let l=document.createElement("style");l.dataset.id=e,l.dataset.refcount="1",l.append(document.createTextNode(o)),r.appendChild(l)}return{release:()=>{var l;let c=r.querySelector(`style[data-id="${e}"]`);if(c){let d=Number.parseFloat(null!=(l=c.getAttribute("data-refcount"))?l:"0");1===d?c.remove():c.dataset.refcount=Number(d-1).toString()}}}}function bC(n){let o=n.split("+"),e={shift:!1,alt:!1,cmd:!1,win:!1,meta:!1,ctrl:!1,key:o.pop()};return o.includes("shift")&&(e.shift=!0),o.includes("alt")&&(e.alt=!0),o.includes("ctrl")&&(e.ctrl=!0),o.includes("cmd")&&(e.cmd=!0),o.includes("win")&&(e.win=!0),o.includes("meta")&&(e.meta=!0),e}function Ix(n){let o="";return n.shift&&(o+="shift+"),n.alt&&(o+="alt+"),n.ctrl&&(o+="ctrl+"),n.cmd&&(o+="cmd+"),n.win&&(o+="win+"),n.meta&&(o+="meta+"),o+n.key}new class extends Md{constructor(){super("text")}createAtom(n,o,e){let i=o.getDefinition(n,"text");return i&&"symbol"===i.definitionType?new Dp(n,String.fromCodePoint(i.codepoint),e??{},o):null}serialize(n,o){var e;let[i,a]=WH(n,o);return!0===(null!=(e=o.skipModeCommand)&&e)&&(a=!1),a&&(i=`\\text{${i}}`),i}applyStyle(n,o){var e,i,a,r,s;let{fontFamily:l}=o;if(xC[l]?n.classes+=" "+xC[l]:l&&n.setStyle("font-family",l),o.fontShape&&(n.classes+=" ",n.classes+=null!=(e={it:"ML__it",sl:"ML__shape_sl",sc:"ML__shape_sc",ol:"ML__shape_ol"}[o.fontShape])?e:""),o.fontSeries){let c=o.fontSeries.match(/(.?[lbm])?(.?[cx])?/);c&&(n.classes+=" ",n.classes+=null!=(a={ul:"ML__series_ul",el:"ML__series_el",l:"ML__series_l",sl:"ML__series_sl",m:"",sb:"ML__series_sb",b:"ML__bold",eb:"ML__series_eb",ub:"ML__series_ub"}[null!=(i=c[1])?i:""])?a:"",n.classes+=" ",n.classes+=null!=(s={uc:"ML__series_uc",ec:"ML__series_ec",c:"ML__series_c",sc:"ML__series_sc",n:"",sx:"ML__series_sx",x:"ML__series_x",ex:"ML__series_ex",ux:"ML__series_ux"}[null!=(r=c[2])?r:""])?s:"")}return"Main-Regular"}},new class extends Md{constructor(){super("latex")}createAtom(n,o,e){return new ha(n,o)}serialize(n,o){return n.filter(e=>e instanceof ha&&!e.isSuggestion).map(e=>e.value).join("")}applyStyle(){return null}};var Vm,vC="apple"===B4()?{id:"apple.en-intl",displayName:"English (international)",virtualLayout:"qwerty",platform:"apple",locale:"en",score:0,mapping:{KeyA:["a","A","\xe5","\xc5"],KeyB:["b","B","\u222b","\u0131"],KeyC:["c","C","\xe7","\xc7"],KeyD:["d","D","\u2202","\xce"],KeyE:["e","E","\xb4","\xb4"],KeyF:["f","F","\u0192","\xcf"],KeyG:["g","G","\xa9","\u02dd"],KeyH:["h","H","\u02d9","\xd3"],KeyI:["i","I","\u02c6","\u02c6"],KeyJ:["j","J","\u2206","\xd4"],KeyK:["k","K","\u02da","\uf8ff"],KeyL:["l","L","\xac","\xd2"],KeyM:["m","M","\xb5","\xc2"],KeyN:["n","N","\u02dc","\u02dc"],KeyO:["o","O","\xf8","\xd8"],KeyP:["p","P","\u03c0","\u220f"],KeyQ:["q","Q","\u0153","\u0152"],KeyR:["r","R","\xae","\u2030"],KeyS:["s","S","\xdf","\xcd"],KeyT:["t","T","\u2020","\u02c7"],KeyU:["u","U","\xa8","\xa8"],KeyV:["v","V","\u221a","\u25ca"],KeyW:["w","W","\u2211","\u201e"],KeyX:["x","X","\u2248","\u02db"],KeyY:["y","Y","\xa5","\xc1"],KeyZ:["z","Z","\u03a9","\xb8"],Digit1:["1","!","\xa1","\u2044"],Digit2:["2","@","\u2122","\u20ac"],Digit3:["3","#","\xa3","\u2039"],Digit4:["4","$","\xa2","\u203a"],Digit5:["5","%","\u221e","\ufb01"],Digit6:["6","^","\xa7","\ufb02"],Digit7:["7","&","\xb6","\u2021"],Digit8:["8","*","\u2022","\xb0"],Digit9:["9","(","\xaa","\xb7"],Digit0:["0",")","\xba","\u201a"],Space:[" "," "," "," "],Minus:["-","_","\u2013","\u2014"],Equal:["=","+","\u2260","\xb1"],BracketLeft:["[","{","\u201c","\u201d"],BracketRight:["]","}","\u2018","\u2019"],Backslash:["\\","|","\xab","\xbb"],Semicolon:[";",":","\u2026","\xda"],Quote:["'",'"',"\xe6","\xc6"],Backquote:["`","\u02dc","`","`"],Comma:[",","<","\u2264","\xaf"],Period:[".",">","\u2265","\u02d8"],Slash:["/","?","\xf7","\xbf"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],Numpad1:["1","1","1","1"],Numpad2:["2","2","2","2"],Numpad3:["3","3","3","3"],Numpad4:["4","4","4","4"],Numpad5:["5","5","5","5"],Numpad6:["6","6","6","6"],Numpad7:["7","7","7","7"],Numpad8:["8","8","8","8"],Numpad9:["9","9","9","9"],Numpad0:["0","0","0","0"],NumpadDecimal:[".",".",".","."],IntlBackslash:["\xa7","\xb1","\xa7","\xb1"],NumpadEqual:["=","=","=","="],AudioVolumeUp:["","=","","="]}}:"windows"===B4()?{id:"windows.en-intl",displayName:"English (international)",platform:"windows",virtualLayout:"qwerty",locale:"en",score:0,mapping:{KeyA:["a","A","\xe1","\xc1"],KeyB:["b","B","",""],KeyC:["c","C","\xa9","\xa2"],KeyD:["d","D","\xf0","\xd0"],KeyE:["e","E","\xe9","\xc9"],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","\xed","\xcd"],KeyJ:["j","J","",""],KeyK:["k","K","",""],KeyL:["l","L","\xf8","\xd8"],KeyM:["m","M","\xb5",""],KeyN:["n","N","\xf1","\xd1"],KeyO:["o","O","\xf3","\xd3"],KeyP:["p","P","\xf6","\xd6"],KeyQ:["q","Q","\xe4","\xc4"],KeyR:["r","R","\xae",""],KeyS:["s","S","\xdf","\xa7"],KeyT:["t","T","\xfe","\xde"],KeyU:["u","U","\xfa","\xda"],KeyV:["v","V","",""],KeyW:["w","W","\xe5","\xc5"],KeyX:["x","X","",""],KeyY:["y","Y","\xfc","\xdc"],KeyZ:["z","Z","\xe6","\xc6"],Digit1:["1","!","\xa1","\xb9"],Digit2:["2","@","\xb2",""],Digit3:["3","#","\xb3",""],Digit4:["4","$","\xa4","\xa3"],Digit5:["5","%","\u20ac",""],Digit6:["6","^","\xbc",""],Digit7:["7","&","\xbd",""],Digit8:["8","*","\xbe",""],Digit9:["9","(","\u2018",""],Digit0:["0",")","\u2019",""],Space:[" "," ","",""],Minus:["-","_","\xa5",""],Equal:["=","+","\xd7","\xf7"],BracketLeft:["[","{","\xab",""],BracketRight:["]","}","\xbb",""],Backslash:["\\","|","\xac","\xa6"],Semicolon:[";",":","\xb6","\xb0"],Quote:["'",'"',"\xb4","\xa8"],Backquote:["`","~","",""],Comma:[",","<","\xe7","\xc7"],Period:[".",">","",""],Slash:["/","?","\xbf",""],NumpadDivide:["/","/","",""],NumpadMultiply:["*","*","",""],NumpadSubtract:["-","-","",""],NumpadAdd:["+","+","",""],IntlBackslash:["\\","|","",""]}}:{id:"linux.en",displayName:"English",platform:"linux",virtualLayout:"qwerty",locale:"en",score:0,mapping:{KeyA:["a","A","a","A"],KeyB:["b","B","b","B"],KeyC:["c","C","c","C"],KeyD:["d","D","d","D"],KeyE:["e","E","e","E"],KeyF:["f","F","f","F"],KeyG:["g","G","g","G"],KeyH:["h","H","h","H"],KeyI:["i","I","i","I"],KeyJ:["j","J","j","J"],KeyK:["k","K","k","K"],KeyL:["l","L","l","L"],KeyM:["m","M","m","M"],KeyN:["n","N","n","N"],KeyO:["o","O","o","O"],KeyP:["p","P","p","P"],KeyQ:["q","Q","q","Q"],KeyR:["r","R","r","R"],KeyS:["s","S","s","S"],KeyT:["t","T","t","T"],KeyU:["u","U","u","U"],KeyV:["v","V","v","V"],KeyW:["w","W","w","W"],KeyX:["x","X","x","X"],KeyY:["y","Y","y","Y"],KeyZ:["z","Z","z","Z"],Digit1:["1","!","1","!"],Digit2:["2","@","2","@"],Digit3:["3","#","3","#"],Digit4:["4","$","4","$"],Digit5:["5","%","5","%"],Digit6:["6","^","6","^"],Digit7:["7","&","7","&"],Digit8:["8","*","8","*"],Digit9:["9","(","9","("],Digit0:["0",")","0",")"],Space:[" "," "," "," "],Minus:["-","_","-","_"],Equal:["=","+","=","+"],BracketLeft:["[","{","[","{"],BracketRight:["]","}","]","}"],Backslash:["\\","|","\\","|"],Semicolon:[";",":",";",":"],Quote:["'",'"',"'",'"'],Backquote:["`","~","`","~"],Comma:[",","<",",","<"],Period:[".",">",".",">"],Slash:["/","?","/","?"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],Numpad1:["1","1","1","1"],Numpad2:["2","2","2","2"],Numpad3:["3","3","3","3"],Numpad4:["4","4","4","4"],Numpad5:["5","5","5","5"],Numpad6:["6","6","6","6"],Numpad7:["7","7","7","7"],Numpad8:["8","8","8","8"],Numpad9:["9","9","9","9"],Numpad0:["0","0","0","0"],NumpadDecimal:["",".","","."],IntlBackslash:["<",">","|","\xa6"],NumpadEqual:["=","=","=","="],NumpadComma:[".",".",".","."],NumpadParenLeft:["(","(","(","("],NumpadParenRight:[")",")",")",")"]}},eG={enter:"[Enter]",escape:"[Escape]",backspace:"[Backspace]",tab:"[Tab]",space:"[Space]",pausebreak:"[Pause]",insert:"[Insert]",home:"[Home]",pageup:"[PageUp]",delete:"[Delete]",end:"[End]",pagedown:"[PageDown]",right:"[ArrowRight]",left:"[ArrowLeft]",down:"[ArrowDown]",up:"[ArrowUp]",numpad0:"[Numpad0]",numpad1:"[Numpad1]",numpad2:"[Numpad2]",numpad3:"[Numpad3]",numpad4:"[Numpad4]",numpad5:"[Numpad5]",numpad6:"[Numpad6]",numpad7:"[Numpad7]",numpad8:"[Numpad8]",numpad9:"[Numpad9]",numpad_divide:"[NumpadDivide]",numpad_multiply:"[NumpadMultiply]",numpad_subtract:"[NumpadSubtract]",numpad_add:"[NumpadAdd]",numpad_decimal:"[NumpadDecimal]",numpad_separator:"[NumpadComma]",capslock:"[Capslock]",f1:"[F1]",f2:"[F2]",f3:"[F3]",f4:"[F4]",f5:"[F5]",f6:"[F6]",f7:"[F7]",f8:"[F8]",f9:"[F9]",f10:"[F10]",f11:"[F11]",f12:"[F12]",f13:"[F13]",f14:"[F14]",f15:"[F15]",f16:"[F16]",f17:"[F17]",f18:"[F18]",f19:"[F19]"},gg=[];function B4(){switch(Mp()){case"macos":case"ios":return"apple";case"windows":return"windows"}return"linux"}function Rc(n){(!n.platform||n.platform===B4())&&gg.push(n)}function yC(n){Vm=gg.find(o=>n.startsWith(o.locale))}function xg(){return Vm??gg[0]}Rc(vC),Rc({id:"apple.french",locale:"fr",displayName:"French",platform:"apple",virtualLayout:"azerty",score:0,mapping:{KeyA:["q","Q","\u2021","\u03a9"],KeyB:["b","B","\xdf","\u222b"],KeyC:["c","C","\xa9","\xa2"],KeyD:["d","D","\u2202","\u2206"],KeyE:["e","E","\xea","\xca"],KeyF:["f","F","\u0192","\xb7"],KeyG:["g","G","\ufb01","\ufb02"],KeyH:["h","H","\xcc","\xce"],KeyI:["i","I","\xee","\xef"],KeyJ:["j","J","\xcf","\xcd"],KeyK:["k","K","\xc8","\xcb"],KeyL:["l","L","\xac","|"],KeyM:[",","?","\u221e","\xbf"],KeyN:["n","N","~","\u0131"],KeyO:["o","O","\u0153","\u0152"],KeyP:["p","P","\u03c0","\u220f"],KeyQ:["a","A","\xe6","\xc6"],KeyR:["r","R","\xae","\u201a"],KeyS:["s","S","\xd2","\u2211"],KeyT:["t","T","\u2020","\u2122"],KeyU:["u","U","\xba","\xaa"],KeyV:["v","V","\u25ca","\u221a"],KeyW:["z","Z","\xc2","\xc5"],KeyX:["x","X","\u2248","\u2044"],KeyY:["y","Y","\xda","\u0178"],KeyZ:["w","W","\u2039","\u203a"],Digit1:["&","1","\uf8ff","\xb4"],Digit2:["\xe9","2","\xeb","\u201e"],Digit3:['"',"3","\u201c","\u201d"],Digit4:["'","4","\u2018","\u2019"],Digit5:["(","5","{","["],Digit6:["\xa7","6","\xb6","\xe5"],Digit7:["\xe8","7","\xab","\xbb"],Digit8:["!","8","\xa1","\xdb"],Digit9:["\xe7","9","\xc7","\xc1"],Digit0:["\xe0","0","\xf8","\xd8"],Space:[" "," "," "," "],Minus:[")","\xb0","}","]"],Equal:["-","_","\u2014","\u2013"],BracketLeft:["^","\xa8","\xf4","\xd4"],BracketRight:["$","*","\u20ac","\xa5"],Backslash:["`","\xa3","@","#"],Semicolon:["m","M","\xb5","\xd3"],Quote:["\xf9","%","\xd9","\u2030"],Backquote:["<",">","\u2264","\u2265"],Comma:[";",".","\u2026","\u2022"],Period:[":","/","\xf7","\\"],Slash:["=","+","\u2260","\xb1"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],NumpadDecimal:[",",".",",","."],IntlBackslash:["@","#","\u2022","\u0178"],NumpadEqual:["=","=","=","="]}}),Rc({id:"apple.spanish",locale:"es",displayName:"Spanish ISO",platform:"apple",virtualLayout:"qwerty",score:0,mapping:{KeyA:["a","A","\xe5","\xc5"],KeyB:["b","B","\xdf",""],KeyC:["c","C","\xa9"," "],KeyD:["d","D","\u2202","\u2206"],KeyE:["e","E","\u20ac","\u20ac"],KeyF:["f","F","\u0192","\ufb01"],KeyG:["g","G","\uf8ff","\ufb02"],KeyH:["h","H","\u2122"," "],KeyI:["i","I"," "," "],KeyJ:["j","J","\xb6","\xaf"],KeyK:["k","K","\xa7","\u02c7"],KeyL:["l","L"," ","\u02d8"],KeyM:["m","M","\xb5","\u02da"],KeyN:["n","N"," ","\u02d9"],KeyO:["o","O","\xf8","\xd8"],KeyP:["p","P","\u03c0","\u220f"],KeyQ:["q","Q","\u0153","\u0152"],KeyR:["r","R","\xae"," "],KeyS:["s","S","\u222b"," "],KeyT:["t","T","\u2020","\u2021"],KeyU:["u","U"," "," "],KeyV:["v","V","\u221a","\u25ca"],KeyW:["w","W","\xe6","\xc6"],KeyX:["x","X","\u2211","\u203a"],KeyY:["y","Y","\xa5"," "],KeyZ:["z","Z","\u03a9","\u2039"],Digit1:["1","!","|","\u0131"],Digit2:["2",'"',"@","\u02dd"],Digit3:["3","\xb7","#","\u2022"],Digit4:["4","$","\xa2","\xa3"],Digit5:["5","%","\u221e","\u2030"],Digit6:["6","&","\xac"," "],Digit7:["7","/","\xf7","\u2044"],Digit8:["8","(","\u201c","\u2018"],Digit9:["9",")","\u201d","\u2019"],Digit0:["0","=","\u2260","\u2248"],Space:[" "," "," "," "],Minus:["'","?","\xb4","\xb8"],Equal:["\xa1","\xbf","\u201a","\u02db"],BracketLeft:["`","^","[","\u02c6"],BracketRight:["+","*","]","\xb1"],Backslash:["\xe7","\xc7","}","\xbb"],Semicolon:["\xf1","\xd1","~","\u02dc"],Quote:["\xb4","\xa8","{","\xab"],Backquote:["<",">","\u2264","\u2265"],Comma:[",",";","\u201e",""],Period:[".",":","\u2026","\u2026"],Slash:["-","_","\u2013","\u2014"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],Numpad1:["1","1","1","1"],Numpad2:["2","2","2","2"],Numpad3:["3","3","3","3"],Numpad4:["4","4","4","4"],Numpad5:["5","5","5","5"],Numpad6:["6","6","6","6"],Numpad7:["7","7","7","7"],Numpad8:["8","8","8","8"],Numpad9:["9","9","9","9"],Numpad0:["0","0","0","0"],NumpadDecimal:[",",",",",",","],IntlBackslash:["\xba","\xaa","\\","\xb0"]}}),Rc({id:"windows.spanish",locale:"es",displayName:"Spanish",platform:"windows",virtualLayout:"qwerty",score:0,mapping:{KeyA:["a","A","",""],KeyB:["b","B","",""],KeyC:["c","C","",""],KeyD:["d","D","",""],KeyE:["e","E","\u20ac",""],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","",""],KeyJ:["j","J","",""],KeyK:["k","K","",""],KeyL:["l","L","",""],KeyM:["m","M","",""],KeyN:["n","N","",""],KeyO:["o","O","",""],KeyP:["p","P","",""],KeyQ:["q","Q","",""],KeyR:["r","R","",""],KeyS:["s","S","",""],KeyT:["t","T","",""],KeyU:["u","U","",""],KeyV:["v","V","",""],KeyW:["w","W","",""],KeyX:["x","X","",""],KeyY:["y","Y","",""],KeyZ:["z","Z","",""],Digit1:["1","!","|",""],Digit2:["2",'"',"@",""],Digit3:["3","\xb7","#",""],Digit4:["4","$","~",""],Digit5:["5","%","\u20ac",""],Digit6:["6","&","\xac",""],Digit7:["7","/","",""],Digit8:["8","(","",""],Digit9:["9",")","",""],Digit0:["0","=","",""],Space:[" "," ","",""],Minus:["'","?","",""],Equal:["\xa1","\xbf","",""],BracketLeft:["`","^","[",""],BracketRight:["+","*","]",""],Backslash:["\xe7","\xc7","}",""],Semicolon:["\xf1","\xd1","",""],Quote:["\xb4","\xa8","{",""],Backquote:["\xba","\xaa","\\",""],Comma:[",",";","",""],Period:[".",":","",""],Slash:["-","_","",""],NumpadDivide:["/","/","",""],NumpadMultiply:["*","*","",""],NumpadSubtract:["-","-","",""],NumpadAdd:["+","+","",""],IntlBackslash:["<",">","",""]}}),Rc({id:"linux.spanish",locale:"es",displayName:"Spanish",platform:"linux",virtualLayout:"qwerty",score:0,mapping:{KeyA:["a","A","\xe6","\xc6"],KeyB:["b","B","\u201d","\u2019"],KeyC:["c","C","\xa2","\xa9"],KeyD:["d","D","\xf0","\xd0"],KeyE:["e","E","\u20ac","\xa2"],KeyF:["f","F","\u0111","\xaa"],KeyG:["g","G","\u014b","\u014a"],KeyH:["h","H","\u0127","\u0126"],KeyI:["i","I","\u2192","\u0131"],KeyJ:["j","J","\u0309","\u031b"],KeyK:["k","K","\u0138","&"],KeyL:["l","L","\u0142","\u0141"],KeyM:["m","M","\xb5","\xba"],KeyN:["n","N","n","N"],KeyO:["o","O","\xf8","\xd8"],KeyP:["p","P","\xfe","\xde"],KeyQ:["q","Q","@","\u03a9"],KeyR:["r","R","\xb6","\xae"],KeyS:["s","S","\xdf","\xa7"],KeyT:["t","T","\u0167","\u0166"],KeyU:["u","U","\u2193","\u2191"],KeyV:["v","V","\u201c","\u2018"],KeyW:["w","W","\u0142","\u0141"],KeyX:["x","X","\xbb",">"],KeyY:["y","Y","\u2190","\xa5"],KeyZ:["z","Z","\xab","<"],Digit1:["1","!","|","\xa1"],Digit2:["2",'"',"@","\u215b"],Digit3:["3","\xb7","#","\xa3"],Digit4:["4","$","~","$"],Digit5:["5","%","\xbd","\u215c"],Digit6:["6","&","\xac","\u215d"],Digit7:["7","/","{","\u215e"],Digit8:["8","(","[","\u2122"],Digit9:["9",")","]","\xb1"],Digit0:["0","=","}","\xb0"],Enter:["\r","\r","\r","\r"],Escape:["\x1b","\x1b","\x1b","\x1b"],Backspace:["\b","\b","\b","\b"],Tab:["\t","","\t",""],Space:[" "," "," "," "],Minus:["'","?","\\","\xbf"],Equal:["\xa1","\xbf","\u0303","~"],BracketLeft:["\u0300","\u0302","[","\u030a"],BracketRight:["+","*","]","\u0304"],Backslash:["\xe7","\xc7","}","\u0306"],Semicolon:["\xf1","\xd1","~","\u030b"],Quote:["\u0301","\u0308","{","{"],Backquote:["\xba","\xaa","\\","\\"],Comma:[",",";","\u2500","\xd7"],Period:[".",":","\xb7","\xf7"],Slash:["-","_","\u0323","\u0307"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],NumpadEnter:["\r","\r","\r","\r"],Numpad1:["","1","","1"],Numpad2:["","2","","2"],Numpad3:["","3","","3"],Numpad4:["","4","","4"],Numpad5:["","5","","5"],Numpad6:["","6","","6"],Numpad7:["","7","","7"],Numpad8:["","8","","8"],Numpad9:["","9","","9"],Numpad0:["","0","","0"],NumpadDecimal:["",".","","."],IntlBackslash:["<",">","|","\xa6"],NumpadEqual:["=","=","=","="],NumpadComma:[".",".",".","."],NumpadParenLeft:["(","(","(","("],NumpadParenRight:[")",")",")",")"]}}),Rc({id:"linux.french",locale:"fr",displayName:"French",virtualLayout:"azerty",platform:"linux",score:0,mapping:{KeyA:["q","Q","@","\u03a9"],KeyB:["b","B","\u201d","\u2019"],KeyC:["c","C","\xa2","\xa9"],KeyD:["d","D","\xf0","\xd0"],KeyE:["e","E","\u20ac","\xa2"],KeyF:["f","F","\u0111","\xaa"],KeyG:["g","G","\u014b","\u014a"],KeyH:["h","H","\u0127","\u0126"],KeyI:["i","I","\u2192","\u0131"],KeyJ:["j","J","\u0309","\u031b"],KeyK:["k","K","\u0138","&"],KeyL:["l","L","\u0142","\u0141"],KeyM:[",","?","\u0301","\u030b"],KeyN:["n","N","n","N"],KeyO:["o","O","\xf8","\xd8"],KeyP:["p","P","\xfe","\xde"],KeyQ:["a","A","\xe6","\xc6"],KeyR:["r","R","\xb6","\xae"],KeyS:["s","S","\xdf","\xa7"],KeyT:["t","T","\u0167","\u0166"],KeyU:["u","U","\u2193","\u2191"],KeyV:["v","V","\u201c","\u2018"],KeyW:["z","Z","\xab","<"],KeyX:["x","X","\xbb",">"],KeyY:["y","Y","\u2190","\xa5"],KeyZ:["w","W","\u0142","\u0141"],Digit1:["&","1","\xb9","\xa1"],Digit2:["\xe9","2","~","\u215b"],Digit3:['"',"3","#","\xa3"],Digit4:["'","4","{","$"],Digit5:["(","5","[","\u215c"],Digit6:["-","6","|","\u215d"],Digit7:["\xe8","7","`","\u215e"],Digit8:["_","8","\\","\u2122"],Digit9:["\xe7","9","^","\xb1"],Digit0:["\xe0","0","@","\xb0"],Enter:["\r","\r","\r","\r"],Escape:["\x1b","\x1b","\x1b","\x1b"],Backspace:["\b","\b","\b","\b"],Tab:["\t","","\t",""],Space:[" "," "," "," "],Minus:[")","\xb0","]","\xbf"],Equal:["=","+","}","\u0328"],BracketLeft:["\u0302","\u0308","\u0308","\u030a"],BracketRight:["$","\xa3","\xa4","\u0304"],Backslash:["*","\xb5","\u0300","\u0306"],Semicolon:["m","M","\xb5","\xba"],Quote:["\xf9","%","\u0302","\u030c"],Backquote:["\xb2","~","\xac","\xac"],Comma:[";",".","\u2500","\xd7"],Period:[":","/","\xb7","\xf7"],Slash:["!","\xa7","\u0323","\u0307"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],NumpadDecimal:["",".","","."],IntlBackslash:["<",">","|","\xa6"]}}),Rc({id:"windows.french",locale:"fr",displayName:"French",virtualLayout:"azerty",platform:"windows",score:0,mapping:{KeyA:["q","Q","",""],KeyB:["b","B","",""],KeyC:["c","C","",""],KeyD:["d","D","",""],KeyE:["e","E","\u20ac",""],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","",""],KeyJ:["j","J","",""],KeyK:["k","K","",""],KeyL:["l","L","",""],KeyM:[",","?","",""],KeyN:["n","N","",""],KeyO:["o","O","",""],KeyP:["p","P","",""],KeyQ:["a","A","",""],KeyR:["r","R","",""],KeyS:["s","S","",""],KeyT:["t","T","",""],KeyU:["u","U","",""],KeyV:["v","V","",""],KeyW:["z","Z","",""],KeyX:["x","X","",""],KeyY:["y","Y","",""],KeyZ:["w","W","",""],Digit1:["&","1","",""],Digit2:["\xe9","2","~",""],Digit3:['"',"3","#",""],Digit4:["'","4","{",""],Digit5:["(","5","[",""],Digit6:["-","6","|",""],Digit7:["\xe8","7","`",""],Digit8:["_","8","\\",""],Digit9:["\xe7","9","^",""],Digit0:["\xe0","0","@",""],Space:[" "," ","",""],Minus:[")","\xb0","]",""],Equal:["=","+","}",""],BracketLeft:["^","\xa8","",""],BracketRight:["$","\xa3","\xa4",""],Backslash:["*","\xb5","",""],Semicolon:["m","M","",""],Quote:["\xf9","%","",""],Backquote:["\xb2","","",""],Comma:[";",".","",""],Period:[":","/","",""],Slash:["!","\xa7","",""],NumpadDivide:["/","/","",""],NumpadMultiply:["*","*","",""],NumpadSubtract:["-","-","",""],NumpadAdd:["+","+","",""],IntlBackslash:["<",">","",""]}}),Rc({id:"windows.german",locale:"de",displayName:"German",platform:"windows",virtualLayout:"qwertz",score:0,mapping:{KeyA:["a","A","",""],KeyB:["b","B","",""],KeyC:["c","C","",""],KeyD:["d","D","",""],KeyE:["e","E","\u20ac",""],KeyF:["f","F","",""],KeyG:["g","G","",""],KeyH:["h","H","",""],KeyI:["i","I","",""],KeyJ:["j","J","",""],KeyK:["k","K","",""],KeyL:["l","L","",""],KeyM:["m","M","\xb5",""],KeyN:["n","N","",""],KeyO:["o","O","",""],KeyP:["p","P","",""],KeyQ:["q","Q","@",""],KeyR:["r","R","",""],KeyS:["s","S","",""],KeyT:["t","T","",""],KeyU:["u","U","",""],KeyV:["v","V","",""],KeyW:["w","W","",""],KeyX:["x","X","",""],KeyY:["z","Z","",""],KeyZ:["y","Y","",""],Digit1:["1","!","",""],Digit2:["2",'"',"\xb2",""],Digit3:["3","\xa7","\xb3",""],Digit4:["4","$","",""],Digit5:["5","%","",""],Digit6:["6","&","",""],Digit7:["7","/","{",""],Digit8:["8","(","[",""],Digit9:["9",")","]",""],Digit0:["0","=","}",""],Space:[" "," ","",""],Minus:["\xdf","?","\\","\u1e9e"],Equal:["\xb4","`","",""],BracketLeft:["\xfc","\xdc","",""],BracketRight:["+","*","~",""],Backslash:["#","'","",""],Semicolon:["\xf6","\xd6","",""],Quote:["\xe4","\xc4","",""],Backquote:["^","\xb0","",""],Comma:[",",";","",""],Period:[".",":","",""],Slash:["-","_","",""],NumpadDivide:["/","/","",""],NumpadMultiply:["*","*","",""],NumpadSubtract:["-","-","",""],NumpadAdd:["+","+","",""],IntlBackslash:["<",">","|",""]}}),Rc({id:"apple.german",locale:"de",displayName:"German",virtualLayout:"qwertz",platform:"apple",score:0,mapping:{KeyA:["a","A","\xe5","\xc5"],KeyB:["b","B","\u222b","\u2039"],KeyC:["c","C","\xe7","\xc7"],KeyD:["d","D","\u2202","\u2122"],KeyE:["e","E","\u20ac","\u2030"],KeyF:["f","F","\u0192","\xcf"],KeyG:["g","G","\xa9","\xcc"],KeyH:["h","H","\xaa","\xd3"],KeyI:["i","I","\u2044","\xdb"],KeyJ:["j","J","\xba","\u0131"],KeyK:["k","K","\u2206","\u02c6"],KeyL:["l","L","@","\ufb02"],KeyM:["m","M","\xb5","\u02d8"],KeyN:["n","N","~","\u203a"],KeyO:["o","O","\xf8","\xd8"],KeyP:["p","P","\u03c0","\u220f"],KeyQ:["q","Q","\xab","\xbb"],KeyR:["r","R","\xae","\xb8"],KeyS:["s","S","\u201a","\xcd"],KeyT:["t","T","\u2020","\u02dd"],KeyU:["u","U","\xa8","\xc1"],KeyV:["v","V","\u221a","\u25ca"],KeyW:["w","W","\u2211","\u201e"],KeyX:["x","X","\u2248","\xd9"],KeyY:["z","Z","\u03a9","\u02c7"],KeyZ:["y","Y","\xa5","\u2021"],Digit1:["1","!","\xa1","\xac"],Digit2:["2",'"',"\u201c","\u201d"],Digit3:["3","\xa7","\xb6","#"],Digit4:["4","$","\xa2","\xa3"],Digit5:["5","%","[","\ufb01"],Digit6:["6","&","]","^"],Digit7:["7","/","|","\\"],Digit8:["8","(","{","\u02dc"],Digit9:["9",")","}","\xb7"],Digit0:["0","=","\u2260","\xaf"],Space:[" "," "," "," "],Minus:["\xdf","?","\xbf","\u02d9"],Equal:["\xb4","`","'","\u02da"],BracketLeft:["\xfc","\xdc","\u2022","\xb0"],BracketRight:["+","*","\xb1","\uf8ff"],Backslash:["#","'","\u2018","\u2019"],Semicolon:["\xf6","\xd6","\u0153","\u0152"],Quote:["\xe4","\xc4","\xe6","\xc6"],Backquote:["<",">","\u2264","\u2265"],Comma:[",",";","\u221e","\u02db"],Period:[".",":","\u2026","\xf7"],Slash:["-","_","\u2013","\u2014"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],NumpadDecimal:[",",",",".","."],IntlBackslash:["^","\xb0","\u201e","\u201c"],NumpadEqual:["=","=","=","="]}}),Rc({id:"dvorak",locale:"en",displayName:"Dvorak",virtualLayout:"dvorak",platform:"",score:0,mapping:{KeyA:["a","A","\xe5","\xc5"],KeyB:["x","X","\u2248","\u02db"],KeyC:["j","J","\u2206","\xd4"],KeyD:["e","E","\xb4","\xb4"],KeyE:[".",">","\u2265","\u02d8"],KeyF:["u","U","\xa8","\xa8"],KeyG:["i","I","\u02c6","\u02c6"],KeyH:["d","D","\u2202","\xce"],KeyI:["c","C","\xe7","\xc7"],KeyJ:["h","H","\u02d9","\xd3"],KeyK:["t","T","\u2020","\u02c7"],KeyL:["n","N","\u02dc","\u02dc"],KeyM:["m","M","\xb5","\xc2"],KeyN:["b","B","\u222b","\u0131"],KeyO:["r","R","\xae","\u2030"],KeyP:["l","L","\xac","\xd2"],KeyQ:["'",'"',"\xe6","\xc6"],KeyR:["p","P","\u03c0","\u220f"],KeyS:["o","O","\xf8","\xd8"],KeyT:["y","Y","\xa5","\xc1"],KeyU:["g","G","\xa9","\u02dd"],KeyV:["k","K","\u02da","\uf8ff"],KeyW:[",","<","\u2264","\xaf"],KeyX:["q","Q","\u0153","\u0152"],KeyY:["f","F","\u0192","\xcf"],KeyZ:[";",":","\u2026","\xda"],Digit1:["1","!","\xa1","\u2044"],Digit2:["2","@","\u2122","\u20ac"],Digit3:["3","#","\xa3","\u2039"],Digit4:["4","$","\xa2","\u203a"],Digit5:["5","%","\u221e","\ufb01"],Digit6:["6","^","\xa7","\ufb02"],Digit7:["7","&","\xb6","\u2021"],Digit8:["8","*","\u2022","\xb0"],Digit9:["9","(","\xaa","\xb7"],Digit0:["0",")","\xba","\u201a"],Space:[" "," "," "," "],Minus:["[","{","\u201c","\u201d"],Equal:["]","}","\u2018","\u2019"],BracketLeft:["/","?","\xf7","\xbf"],BracketRight:["=","+","\u2260","\xb1"],Backslash:["\\","|","\xab","\xbb"],Semicolon:["s","S","\xdf","\xcd"],Quote:["-","_","\u2013","\u2014"],Backquote:["`","~","`","`"],Comma:["w","W","\u2211","\u201e"],Period:["v","V","\u221a","\u25ca"],Slash:["z","Z","\u03a9","\xb8"],NumpadDivide:["/","/","/","/"],NumpadMultiply:["*","*","*","*"],NumpadSubtract:["-","-","-","-"],NumpadAdd:["+","+","+","+"],Numpad1:["1","1","1","1"],Numpad2:["2","2","2","2"],Numpad3:["3","3","3","3"],Numpad4:["4","4","4","4"],Numpad5:["5","5","5","5"],Numpad6:["6","6","6","6"],Numpad7:["7","7","7","7"],Numpad8:["8","8","8","8"],Numpad9:["9","9","9","9"],Numpad0:["0","0","0","0"],NumpadDecimal:[".",".",".","."],IntlBackslash:["\xa7","\xb1","\xa7","\xb1"],NumpadEqual:["=","=","=","="],AudioVolumeUp:["","=","","="]}});var wC=[{key:"left",command:"moveToPreviousChar"},{key:"right",command:"moveToNextChar"},{key:"up",command:"moveUp"},{key:"down",command:"moveDown"},{key:"shift+[ArrowLeft]",command:"extendSelectionBackward"},{key:"shift+[ArrowRight]",command:"extendSelectionForward"},{key:"shift+[ArrowUp]",command:"extendSelectionUpward"},{key:"shift+[ArrowDown]",command:"extendSelectionDownward"},{key:"[Backspace]",command:"deleteBackward"},{key:"alt+[Delete]",command:"deleteBackward"},{key:"[Delete]",command:"deleteForward"},{key:"alt+[Backspace]",command:"deleteForward"},{key:"alt+[ArrowLeft]",command:"moveToPreviousWord"},{key:"alt+[ArrowRight]",command:"moveToNextWord"},{key:"shift+alt+[ArrowLeft]",command:"extendToPreviousWord"},{key:"shift+alt+[ArrowRight]",command:"extendToNextWord"},{key:"ctrl+[ArrowLeft]",command:"moveToGroupStart"},{key:"ctrl+[ArrowRight]",command:"moveToGroupEnd"},{key:"shift+ctrl+[ArrowLeft]",command:"extendToGroupStart"},{key:"shift+ctrl+[ArrowRight]",command:"extendToGroupEnd"},{key:"[Space]",ifMode:"math",command:"moveAfterParent"},{key:"shift+[Space]",ifMode:"math",command:"moveBeforeParent"},{key:"[Home]",command:"moveToMathfieldStart"},{key:"cmd+[ArrowLeft]",command:"moveToMathfieldStart"},{key:"shift+[Home]",command:"extendToMathFieldStart"},{key:"shift+cmd+[ArrowLeft]",command:"extendToMathFieldStart"},{key:"[End]",command:"moveToMathfieldEnd"},{key:"cmd+[ArrowRight]",command:"moveToMathfieldEnd"},{key:"shift+[End]",command:"extendToMathFieldEnd"},{key:"shift+cmd+[ArrowRight]",command:"extendToMathFieldEnd"},{key:"[Pageup]",command:"moveToGroupStart"},{key:"[Pagedown]",command:"moveToGroupEnd"},{key:"[Tab]",ifMode:"math",command:"moveToNextPlaceholder"},{key:"shift+[Tab]",ifMode:"math",command:"moveToPreviousPlaceholder"},{key:"[Tab]",ifMode:"text",command:"moveToNextPlaceholder"},{key:"shift+[Tab]",ifMode:"text",command:"moveToPreviousPlaceholder"},{key:"[Escape]",ifMode:"math",command:["switchMode","latex"]},{key:"[Escape]",ifMode:"text",command:["switchMode","latex"]},{key:"[Escape]",ifMode:"latex",command:["complete","complete",{selectItem:"true"}]},{key:"\\",ifMode:"math",command:["switchMode","latex","\\"]},{key:"[IntlBackslash]",ifMode:"math",command:["switchMode","latex","\\"]},{key:"[Tab]",ifMode:"latex",command:["complete","accept-suggestion"]},{key:"[Return]",ifMode:"latex",command:"complete"},{key:"[Enter]",ifMode:"latex",command:"complete"},{key:"shift+[Escape]",ifMode:"latex",command:["complete","reject"]},{key:"[ArrowDown]",ifMode:"latex",command:"nextSuggestion"},{key:"[ArrowUp]",ifMode:"latex",command:"previousSuggestion"},{key:"ctrl+a",ifPlatform:"!macos",command:"selectAll"},{key:"cmd+a",command:"selectAll"},{key:"[Cut]",command:"cutToClipboard"},{key:"[Copy]",command:"copyToClipboard"},{key:"[Paste]",command:"pasteFromClipboard"},{key:"[Clear]",command:"deleteBackward"},{key:"[Undo]",command:"undo"},{key:"[Redo]",command:"redo"},{key:"[EraseEof]",command:"deleteToGroupEnd"},{key:"ctrl+x",command:"cutToClipboard"},{key:"cmd+x",command:"cutToClipboard"},{key:"ctrl+c",command:"copyToClipboard"},{key:"cmd+c",command:"copyToClipboard"},{key:"ctrl+v",command:"pasteFromClipboard"},{key:"cmd+v",command:"pasteFromClipboard"},{key:"ctrl+z",ifPlatform:"!macos",command:"undo"},{key:"cmd+z",command:"undo"},{key:"ctrl+y",ifPlatform:"!macos",command:"redo"},{key:"shift+cmd+y",command:"redo"},{key:"shift+ctrl+z",ifPlatform:"!macos",command:"redo"},{key:"shift+cmd+z",command:"redo"},{key:"ctrl+b",ifPlatform:"macos",command:"moveToPreviousChar"},{key:"ctrl+f",ifPlatform:"macos",command:"moveToNextChar"},{key:"ctrl+p",ifPlatform:"macos",command:"moveUp"},{key:"ctrl+n",ifPlatform:"macos",command:"moveDown"},{key:"ctrl+a",ifPlatform:"macos",command:"moveToMathfieldStart"},{key:"ctrl+e",ifPlatform:"macos",command:"moveToMathfieldEnd"},{key:"shift+ctrl+b",ifPlatform:"macos",command:"extendSelectionBackward"},{key:"shift+ctrl+f",ifPlatform:"macos",command:"extendSelectionForward"},{key:"shift+ctrl+p",ifPlatform:"macos",command:"extendSelectionUpward"},{key:"shift+ctrl+n",ifPlatform:"macos",command:"extendSelectionDownward"},{key:"shift+ctrl+a",ifPlatform:"macos",command:"extendToMathFieldStart"},{key:"shift+ctrl+e",ifPlatform:"macos",command:"extendToMathFieldEnd"},{key:"alt+ctrl+b",ifPlatform:"macos",command:"moveToPreviousWord"},{key:"alt+ctrl+f",ifPlatform:"macos",command:"moveToNextWord"},{key:"shift+alt+ctrl+b",ifPlatform:"macos",command:"extendToPreviousWord"},{key:"shift+alt+ctrl+f",ifPlatform:"macos",command:"extendToNextWord"},{key:"ctrl+h",ifPlatform:"macos",command:"deleteBackward"},{key:"ctrl+d",ifPlatform:"macos",command:"deleteForward"},{key:"ctrl+l",ifPlatform:"macos",command:"scrollIntoView"},{key:"ctrl+[Digit2]",ifMode:"math",command:["insert","\\sqrt{#0}"]},{key:"ctrl+[Digit5]",ifMode:"math",command:"moveToOpposite"},{key:"ctrl+[Digit6]",ifMode:"math",command:"moveToSuperscript"},{key:"ctrl+[Return]",ifMode:"math",command:"addRowAfter"},{key:"ctrl+[Enter]",ifMode:"math",command:"addRowAfter"},{key:"cmd+[Return]",ifMode:"math",command:"addRowAfter"},{key:"cmd+[Enter]",ifMode:"math",command:"addRowAfter"},{key:"alt+p",ifMode:"math",command:["insert","\\pi"]},{key:"alt+v",ifMode:"math",command:["insert","\\sqrt{#0}"]},{key:"alt+w",ifMode:"math",command:["insert","\\sum_{i=#?}^{#?}"]},{key:"alt+b",command:["insert","\\int_{#?}^{#?}"]},{key:"alt+u",ifMode:"math",command:["insert","\\cup"]},{key:"alt+n",ifMode:"math",command:["insert","\\cap"]},{key:"alt+o",ifMode:"math",command:["insert","\\emptyset"]},{key:"alt+d",ifMode:"math",command:["insert","\\differentialD"]},{key:"shift+alt+o",ifMode:"math",command:["insert","\\varnothing"]},{key:"shift+alt+d",ifMode:"math",command:["insert","\\partial"]},{key:"shift+alt+p",ifMode:"math",command:["insert","\\prod_{i=#?}^{#?}"]},{key:"shift+alt+u",ifMode:"math",command:["insert","\\bigcup"]},{key:"shift+alt+n",ifMode:"math",command:["insert","\\bigcap"]},{key:"shift+alt+a",ifMode:"math",command:["insert","\\forall"]},{key:"shift+alt+e",ifMode:"math",command:["insert","\\exists"]},{key:"alt+[Backslash]",ifMode:"math",command:["insert","\\backslash"]},{key:"[NumpadDivide]",ifMode:"math",command:["insert","\\frac{#@}{#?}"]},{key:"alt+[NumpadDivide]",ifMode:"math",command:["insert","\\frac{#?}{#@}"]},{key:"shift+alt+k",command:"toggleKeystrokeCaption"},{key:"alt+[Space]",command:"toggleVirtualKeyboard"},{key:"alt+ctrl+[ArrowUp]",command:["speak","all",{withHighlighting:!1}]},{key:"alt+ctrl+[ArrowDown]",command:["speak","selection",{withHighlighting:!1}]},{key:"alt+[Equal]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["applyStyle",{mode:"text"}]},{key:"alt+[Equal]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"text",command:["applyStyle",{mode:"math"}]},{key:"shift+[Quote]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["switchMode","text","",""]},{key:"shift+[Quote]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"text",command:["switchMode","math","",""]},{key:"/",ifMode:"math",command:["insert","\\frac{#@}{#?}"]},{key:"alt+/",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","\\/"]},{key:"alt+[BracketLeft]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","\\left\\lbrack #0 \\right\\rbrack"]},{key:"ctrl+[Minus]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"moveToSubscript"},{key:"shift+alt+[BracketLeft]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","\\left\\lbrace #0 \\right\\rbrace"]},{key:"ctrl+;",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"addRowAfter"},{key:"cmd+;",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"addRowAfter"},{key:"shift+ctrl+;",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"addRowBefore"},{key:"shift+cmd+;",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"addRowBefore"},{key:"ctrl+[Backspace]",ifMode:"math",command:"removeRow"},{key:"cmd+[Backspace]",ifMode:"math",command:"removeRow"},{key:"ctrl+[Comma]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"addColumnAfter"},{key:"cmd+[Comma]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"addColumnAfter"},{key:"shift+ctrl+[Comma]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"addColumnBefore"},{key:"shift+cmd+[Comma]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:"addColumnBefore"},{key:"shift+[Backspace]",ifMode:"math",command:"removeColumn"},{key:"alt+[Digit5]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","$\\infty"]},{key:"alt+[Digit6]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","\\wedge"]},{key:"shift+alt+[Digit6]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","\\vee"]},{key:"alt+[Digit9]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","("]},{key:"alt+[Digit0]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert",")"]},{key:"alt+|",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","|"]},{key:"shift+[Backquote]",ifLayout:["apple.en-intl","windows.en-intl","linux.en"],ifMode:"math",command:["insert","\\~"]},{key:"[Backquote]",ifLayout:["windows.french","linux.french"],ifMode:"math",command:["insert","^2"]}],aG={"\\theta":"alt+q","\\sqrt":["alt+v","ctrl+[Digit2]"],"\\pi":"alt+p","\\prod":"shift+alt+p","\\sum":"alt+w","\\int":"alt+b","\\cup":"alt+u","\\cap":"alt+n","\\bigcup":"shift+alt+u","\\bigcap":"shift+alt+n","\\forall":"shift+alt+a","\\exists":"shift+alt+e","\\infty":"alt+[Digit5]","\\wedge":"alt+[Digit6]","\\vee":"shift+alt+[Digit6]","\\differentialD":"alt+d","\\partial":"shift+alt+d","\\frac":"Slash","\\emptyset":"alt+o","\\varnothing":"shift+alt+o","\\~":"~"};function CC(n){let o=n;return qa(o)&&(o=o.length>0?o[0]+"("+o.slice(1).join("")+")":""),o}function lG(n,o){let e=[];if("string"==typeof o){let r=aG[o];qa(r)?e=r.slice():r&&e.push(r)}let i=CC(o),a=new RegExp("^"+i.replace("\\","\\\\").replace("|","\\|").replace("*","\\*").replace("$","\\$").replace("^","\\^")+"([^*a-zA-Z]|$)");for(let r of n)a.test(CC(r.command))&&e.push(r.key);return e.map(z4)}function z4(n){var o;let e=/macos|ios|/.test(Mp()),i=n.split("+"),a="";for(let r of i)!e&&a&&(a+='<span class="ML__shortcut-join">+</span>'),r.startsWith("[Key")?a+=r.slice(4,5):r.startsWith("Key")?a+=r.slice(3,4):r.startsWith("[Digit")?a+=r.slice(6,7):r.startsWith("Digit")?a+=r.slice(5,6):a+=null!=(o={cmd:"\u2318",meta:e?"\u2318":"command",shift:e?"\u21e7":"shift",alt:e?"\u2325":"alt",ctrl:e?"\u2303":"control","\n":e?"\u23ce":"return","[return]":e?"\u23ce":"return","[enter]":e?"\u2324":"enter","[tab]":e?"\u21e5":"tab","[escape]":"esc","[backspace]":e?"\u232b":"backspace","[delete]":e?"\u2326":"del","[pageup]":e?"\u21de":"page up","[pagedown]":e?"\u21df":"page down","[home]":e?"\u2912":"home","[end]":e?"\u2913":"end","[space]":"space","[equal]":"=","[minus]":"-","[comma]":",","[slash]":"/","[backslash]":"\\","[bracketleft]":"[","[bracketright]":"]",semicolon:";",period:".",comma:",",minus:"-",equal:"=",quote:"'",bracketLeft:"[",bracketRight:"]",backslash:"\\",intlbackslash:"\\",backquote:"`",slash:"/",numpadmultiply:"* &#128290;",numpaddivide:"/ &#128290;",numpadsubtract:"- &#128290;",numpadadd:"+ &#128290;",numpaddecimal:". &#128290;",numpadcomma:", &#128290;",help:"help",left:"\u21e0",up:"\u21e1",right:"\u21e2",down:"\u21e3","[arrowleft]":"\u21e0","[arrowup]":"\u21e1","[arrowright]":"\u21e2","[arrowdown]":"\u21e3","[digit0]":"0","[digit1]":"1","[digit2]":"2","[digit3]":"3","[digit4]":"4","[digit5]":"5","[digit6]":"6","[digit7]":"7","[digit8]":"8","[digit9]":"9"}[r.toLowerCase()])?o:r.toUpperCase();return a}function cG(n,o){if(n.ifPlatform&&!/^!?(macos|windows|android|ios|chromeos|other)$/.test(n.ifPlatform))throw new Error(`Unexpected platform "${n.ifPlatform}" for keybinding ${n.key}`);if(void 0!==n.ifLayout&&(0===o.score||!n.ifLayout.includes(o.id)))return;let e=bC(n.key),i=n.ifPlatform;if(e.cmd){if(i&&"macos"!==i&&"ios"!==i)throw new Error('Unexpected "cmd" modifier with platform "'+i+'"\n"cmd" modifier can only be used with macOS or iOS platform.');i||(i="ios"===Mp()?"ios":"macos"),e.win=!1,e.cmd=!1,e.meta=!0}if(e.win){if(i&&"windows"!==i)throw new Error('Unexpected "win" modifier with platform "'+i+'"\n"win" modifier can only be used with Windows platform.');i="windows",e.win=!1,e.cmd=!1,e.meta=!0}if(i&&!function rG(n){if(Ds()){let o=Mp(),e=n.startsWith("!"),i=n.endsWith(o);if(e&&!i||!e&&i)return!0}return"!other"!==n&&"other"===n}(i))return;if(/^\[.+\]$/.test(e.key))return ei(Ee({},n),{ifPlatform:i,key:Ix(e)});let a=function nG(n,o){var e;let i={shift:!1,alt:!1,cmd:!1,win:!1,meta:!1,ctrl:!1,key:""};if(!n)return i;for(let[a,r]of Object.entries(o.mapping)){if(r[0]===n)return i.key=`[${a}]`,i;if(r[1]===n)return i.shift=!0,i.key=`[${a}]`,i;if(r[2]===n)return i.alt=!0,i.key=`[${a}]`,i;if(r[3]===n)return i.shift=!0,i.alt=!0,i.key=`[${a}]`,i}return i.key=null!=(e=eG[n])?e:"",i}(e.key,o);if(!a)throw new Error('Invalid keybinding key "'+n.key+'"');if(a.shift&&e.shift||a.alt&&e.alt)throw new Error(`The keybinding ${n.key} (${J4(n.command)}) is conflicting with the key combination ${Ix(a)} using the ${o.displayName} keyboard layout`);return a.shift=a.shift||e.shift,a.alt=a.alt||e.alt,a.meta=e.meta,a.ctrl=e.ctrl,ei(Ee({},n),{ifPlatform:i,key:Ix(a)})}function J4(n){if(Array.isArray(n)){let o=[...n];return o.shift()+"("+o.map(e=>"string"==typeof e?`"${e}"`:e.toString()).join(", ")+")"}return n}var TC="#mathlive-popover-panel{visibility:hidden;background-color:rgba(97,97,97,0.95);color:#fff;text-align:center;border-radius:8px;position:fixed;z-index:1;display:flex;flex-direction:column;justify-content:center;box-shadow:0 14px 28px rgba(0,0,0,0.25),0 10px 10px rgba(0,0,0,0.22);transition:all .2s cubic-bezier(.64, .09, .08, 1)}#mathlive-popover-panel::after{content:'';position:absolute;top:-5px;left:calc(50% - 3px);width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;font-size:1rem;border-bottom:5px solid rgba(97,97,97,0.9)}#mathlive-popover-panel.is-visible{visibility:inherit;animation:ML__fade-in cubic-bezier(0, 0, .2, 1) .15s}@keyframes ML__fade-in{from{opacity:0}to{opacity:1}}#mathlive-popover-panel ul{display:flex;flex-flow:column;list-style:none;margin:0;padding:0;align-items:flex-start;justify-content:center}#mathlive-popover-panel li{display:flex;flex-direction:row;justify-content:space-between;margin:8px;padding:8px;width:calc(100% - 16px - 16px);column-gap:1em;border-radius:8px;cursor:pointer}#mathlive-popover-panel li a{color:#5ea6fd;padding-top:.3em;margin-top:.4em;display:block}#mathlive-popover-panel li a:hover{color:#5ea6fd;text-decoration:underline}#mathlive-popover-panel li:hover,#mathlive-popover-panel li.is-pressed,#mathlive-popover-panel li.is-active{background:rgba(255,255,255,0.1)}.ML__popover__command{font-size:1.6rem;font-family:KaTeX_Main}.ML__popover__latex{font-family:'IBM Plex Mono','Source Code Pro',Consolas,'Roboto Mono',Menlo,'Bitstream Vera Sans Mono','DejaVu Sans Mono',Monaco,Courier,monospace;align-self:center}.ML__popover__keybinding{font-family:system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI','Roboto','Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue',sans-serif;font-size:.8em;opacity:.7}.ML__shortcut-join{opacity:.5}",Uc=".ML__sr-only{position:absolute;width:1px;height:1px;margin:-1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);clip-path:inset(50%);white-space:nowrap;border:0}.ML__isInline{display:inline-block}.ML__base{visibility:inherit;display:inline-block;position:relative;cursor:text;padding:0;margin:0;box-sizing:content-box;border:0;outline:0;vertical-align:baseline;font-weight:inherit;font-family:inherit;font-style:inherit;text-decoration:none;width:min-content}body.ML__fonts-loading .ML__base{visibility:hidden}.ML__strut,.ML__strut--bottom{display:inline-block;min-height:.5em}.ML__small-delim{font-family:KaTeX_Main}.ML__text{font-family:var(--text-font-family, system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI','Roboto','Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue',sans-serif);white-space:pre}.ML__cmr{font-family:KaTeX_Main;font-style:normal}.ML__mathit{font-family:KaTeX_Math;font-style:italic}.ML__mathbf{font-family:KaTeX_Main;font-weight:bold}.lcGreek.ML__mathbf{font-family:KaTeX_Math;font-weight:normal}.ML__mathbfit{font-family:KaTeX_Math;font-weight:bold;font-style:italic}.ML__ams{font-family:KaTeX_AMS}.ML__bb{font-family:KaTeX_AMS}.ML__cal{font-family:KaTeX_Caligraphic}.ML__frak{font-family:KaTeX_Fraktur}.ML__tt{font-family:KaTeX_Typewriter}.ML__script{font-family:KaTeX_Script}.ML__sans{font-family:KaTeX_SansSerif}.ML__series_ul{font-weight:100}.ML__series_el{font-weight:100}.ML__series_l{font-weight:200}.ML__series_sl{font-weight:300}.ML__series_sb{font-weight:500}.ML__bold,.ML__boldsymbol{font-weight:700}.ML__series_eb{font-weight:800}.ML__series_ub{font-weight:900}.ML__series_uc{font-stretch:ultra-condensed}.ML__series_ec{font-stretch:extra-condensed}.ML__series_c{font-stretch:condensed}.ML__series_sc{font-stretch:semi-condensed}.ML__series_sx{font-stretch:semi-expanded}.ML__series_x{font-stretch:expanded}.ML__series_ex{font-stretch:extra-expanded}.ML__series_ux{font-stretch:ultra-expanded}.ML__it{font-style:italic}.ML__shape_ol{-webkit-text-stroke:1px black;text-stroke:1px black;color:transparent}.ML__shape_sc{font-variant:small-caps}.ML__shape_sl{font-style:oblique}.ML__emph{color:#bc2612}.ML__emph .ML__emph{color:#0c7f99}.ML__highlight{color:#007cb2;background:#edd1b0}.ML__center{text-align:center}.ML__label_padding{padding:0 .5em}.ML__frac-line{width:100%;min-height:1px}.ML__frac-line:after{content:'';display:block;margin-top:-0.04em;min-height:.04em;-webkit-print-color-adjust:exact;print-color-adjust:exact;background:currentColor;box-sizing:content-box;transform:translate(0, 0)}.ML__sqrt{display:inline-block}.ML__sqrt-sign{display:inline-block;font-family:KaTeX_Main;position:relative}.ML__sqrt-line{display:inline-block;height:.04em;width:100%}.ML__sqrt-line:before{content:'';display:block;margin-top:-0.04em;min-height:.04em;-webkit-print-color-adjust:exact;print-color-adjust:exact;background:currentColor;transform:translate(0, 0)}.ML__sqrt-line:after{border-bottom-width:1px;content:' ';display:block;margin-top:-0.1em}.ML__sqrt-index{margin-left:.27777778em;margin-right:-0.55555556em}.ML__delim-size1{font-family:KaTeX_Size1}.ML__delim-size2{font-family:KaTeX_Size2}.ML__delim-size3{font-family:KaTeX_Size3}.ML__delim-size4{font-family:KaTeX_Size4}.ML__delim-mult .delim-size1>span{font-family:KaTeX_Size1}.ML__delim-mult .delim-size4>span{font-family:KaTeX_Size4}.ML__accent-body>span{font-family:KaTeX_Main;width:0}.ML__accent-vec>span{position:relative;left:.24em}.ML__mathlive{display:inline-block;direction:ltr;text-align:left;text-indent:0;text-rendering:auto;font-family:KaTeX_Main,'Times New Roman',serif;font-style:normal;font-size-adjust:none;font-stretch:normal;font-variant-caps:normal;letter-spacing:normal;line-height:1.2;word-wrap:normal;word-spacing:normal;white-space:nowrap;text-shadow:none;-webkit-user-select:none;user-select:none;width:min-content}.ML__mathlive .style-wrap{position:relative}.ML__mathlive .mfrac,.ML__mathlive .left-right{display:inline-block}.ML__mathlive .vlist-t{display:inline-table;table-layout:fixed;border-collapse:collapse}.ML__mathlive .vlist-r{display:table-row}.ML__mathlive .vlist{display:table-cell;vertical-align:bottom;position:relative}.ML__mathlive .vlist>span{display:block;height:0;position:relative}.ML__mathlive .vlist>span>span{display:inline-block}.ML__mathlive .vlist>span>.pstrut{overflow:hidden;width:0}.ML__mathlive .vlist-t2{margin-right:-2px}.ML__mathlive .vlist-s{display:table-cell;vertical-align:bottom;font-size:1px;width:2px;min-width:2px}.ML__mathlive .msubsup{text-align:left}.ML__mathlive .negativethinspace{display:inline-block;margin-left:-0.16667em;height:.71em}.ML__mathlive .thinspace{display:inline-block;width:.16667em;height:.71em}.ML__mathlive .mediumspace{display:inline-block;width:.22222em;height:.71em}.ML__mathlive .thickspace{display:inline-block;width:.27778em;height:.71em}.ML__mathlive .enspace{display:inline-block;width:.5em;height:.71em}.ML__mathlive .quad{display:inline-block;width:1em;height:.71em}.ML__mathlive .qquad{display:inline-block;width:2em;height:.71em}.ML__mathlive .llap,.ML__mathlive .rlap{width:0;position:relative;display:inline-block}.ML__mathlive .llap>.inner,.ML__mathlive .rlap>.inner{position:absolute}.ML__mathlive .llap>.fix,.ML__mathlive .rlap>.fix{display:inline-block}.ML__mathlive .llap>.inner{right:0}.ML__mathlive .rlap>.inner{left:0}.ML__mathlive .rule{display:inline-block;border:solid 0;position:relative;box-sizing:border-box}.ML__mathlive .overline .overline-line,.ML__mathlive .underline .underline-line{width:100%}.ML__mathlive .overline .overline-line:before,.ML__mathlive .underline .underline-line:before{border-bottom-style:solid;border-bottom-width:.04em;content:'';display:block}.ML__mathlive .overline .overline-line:after,.ML__mathlive .underline .underline-line:after{border-bottom-style:solid;border-bottom-width:.04em;min-height:thin;content:'';display:block;margin-top:-1px}.ML__mathlive .stretchy{display:block;position:absolute;width:100%;left:0;overflow:hidden}.ML__mathlive .stretchy:before,.ML__mathlive .stretchy:after{content:''}.ML__mathlive .stretchy svg{display:block;position:absolute;width:100%;height:inherit;fill:currentColor;stroke:currentColor;fill-rule:nonzero;fill-opacity:1;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1}.ML__mathlive .slice-1-of-2{display:inline-flex;position:absolute;left:0;width:50.2%;overflow:hidden}.ML__mathlive .slice-2-of-2{display:inline-flex;position:absolute;right:0;width:50.2%;overflow:hidden}.ML__mathlive .slice-1-of-3{display:inline-flex;position:absolute;left:0;width:25.1%;overflow:hidden}.ML__mathlive .slice-2-of-3{display:inline-flex;position:absolute;left:25%;width:50%;overflow:hidden}.ML__mathlive .slice-3-of-3{display:inline-flex;position:absolute;right:0;width:25.1%;overflow:hidden}.ML__mathlive .slice-1-of-1{display:inline-flex;position:absolute;width:100%;left:0;overflow:hidden}.ML__mathlive .nulldelimiter{width:.12em;display:inline-block}.ML__mathlive .op-group{display:inline-block}.ML__mathlive .op-symbol{position:relative}.ML__mathlive .op-symbol.small-op{font-family:KaTeX_Size1}.ML__mathlive .op-symbol.large-op{font-family:KaTeX_Size2}.ML__mathlive .accent>.vlist>span{text-align:center}.ML__mathlive .mtable .vertical-separator{display:inline-block;min-width:1px;box-sizing:border-box}.ML__mathlive .mtable .arraycolsep{display:inline-block}.ML__mathlive .mtable .col-align-m>.vlist-t{text-align:center}.ML__mathlive .mtable .col-align-c>.vlist-t{text-align:center}.ML__mathlive .mtable .col-align-l>.vlist-t{text-align:left}.ML__mathlive .mtable .col-align-r>.vlist-t{text-align:right}.ML__error{display:inline-block;background-image:radial-gradient(ellipse at center, hsl(341,100%,40%), rgba(0,0,0,0) 70%);background-color:hsla(341,100%,40%,0.1);background-repeat:repeat-x;background-size:3px 3px;padding-bottom:3px;background-position:0 100%}.ML__error>.ML__error{background:transparent;padding:0}.ML__composition{background:#fff1c2;color:black;text-decoration:underline var(--caret-color-computed, var(--ML__caret-color))}@media (prefers-color-scheme:dark){.ML__composition{background:#69571c;color:white}}.ML__placeholder{color:var(--placeholder-color, var(--ML__placeholder-color));opacity:var(--placeholder-opacity, .4);padding-left:.4ex;padding-right:.4ex;font-family:system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI','Roboto','Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue',sans-serif}.ML__placeholdercontainer{display:none}.ML__placeholdercontainer math-field{display:inline-block;position:absolute;z-index:1001;min-width:32px;padding-left:4px;padding-right:4px;border-radius:4px;border:1px solid var(--editable-border)}.ML__isReadOnly .ML__placeholdercontainer{display:block}.ML__notation{position:absolute;box-sizing:border-box}.ML__container{min-height:auto !important}";function kC(n){var o,e;"function"==typeof(null==(o=n.listeners)?void 0:o.onSelectionDidChange)&&!n.suppressChangeNotifications&&(n.suppressChangeNotifications=!0,n.listeners.onSelectionDidChange(n),n.suppressChangeNotifications=!1),null==(e=n.mathfield.virtualKeyboard)||e.updateToolbar(n.mathfield)}function ko(n,o={}){var e;if(n.suppressChangeNotifications||!n.mathfield.host)return!0;n.suppressChangeNotifications=!0;let i=n.mathfield.host.dispatchEvent(new InputEvent("beforeinput",ei(Ee({},o),{data:o.data?o.data:null!=(e=o.inputType)?e:"",cancelable:!0,bubbles:!0,composed:!0})));return n.suppressChangeNotifications=!1,i}function Po(n,o){var e;n.suppressChangeNotifications||!n.mathfield.host||(n.suppressChangeNotifications=!0,n.mathfield.host.dispatchEvent(new InputEvent("input",ei(Ee({},o),{data:o.data?o.data:null!=(e=o.inputType)?e:"",bubbles:!0,composed:!0}))),n.suppressChangeNotifications=!1)}function bg(n){var o,e;let i=n.atoms.find(a=>a instanceof Ld);return i&&null!=(e=null==(o=i.body)?void 0:o.filter(a=>a instanceof ha))?e:[]}function AC(n,o){var e;let i=0,a=!1,r=Number.isFinite(o?.before)?null!=(e=o?.before)?e:0:n.lastOffset;for(;i<=r&&!a;){let c=n.at(i);a=c instanceof ha&&c.isSuggestion,a||i++}if(!a)return[void 0,void 0];let s=i,l=!1;for(;s<=r&&!l;){let c=n.at(s);l=!(c instanceof ha&&c.isSuggestion),l||s++}return[i-1,s-1]}function H4(n){let o=bg(n.model).filter(e=>e.isSuggestion);if(0!==o.length){n.model.position=n.model.offsetOf(o[0].leftSibling);for(let e of o)e.parent.removeChild(e)}}function Lx(n,o){var e;let{model:i}=n;H4(n);for(let d of bg(i))d.isError=!1;if(!i.selectionIsCollapsed)return void vg(n);let a=[],r=i.at(i.position);for(;r&&r instanceof ha&&/^[a-zA-Z\*]$/.test(r.value);)r=r.leftSibling;if(r&&r instanceof ha&&"\\"===r.value)for(a.push(r),r=r.rightSibling;r&&r instanceof ha&&/^[a-zA-Z\*]$/.test(r.value);)a.push(r),r=r.rightSibling;let s=a.map(d=>d.value).join(""),l=s?function EJ(n,o){var e,i;if("\\"===o)return[];if(!o.startsWith("\\"))return[];let a=[];for(let s in qc)s.startsWith(o)&&!qc[s].infix&&a.push({match:s,frequency:null!=(e=qc[s].frequency)?e:0});for(let s in jc)s.startsWith(o)&&a.push({match:s,frequency:null!=(i=jc[s].frequency)?i:0});let r=o.substring(1);for(let s of Object.keys(n.options.macros))s.startsWith(r)&&a.push({match:"\\"+s,frequency:0});return a.sort((s,l)=>{var c,d;return s.frequency===l.frequency?s.match.length===l.match.length?s.match<l.match?-1:1:s.match.length-l.match.length:(null!=(c=l.frequency)?c:0)-(null!=(d=s.frequency)?d:0)}),a.map(s=>s.match)}(n,s):[];if(0===l.length)return/^\\[a-zA-Z\*]+$/.test(s)&&a.forEach(d=>{d.isError=!0}),void vg(n);n.suggestionIndex=null!=(e=o?.atIndex)?e:0,n.suggestionIndex<0&&(n.suggestionIndex=l.length-1);let c=l[n.suggestionIndex%l.length];if(c!==s){let d=a[a.length-1];d.parent.addChildrenAfter([...c.slice(s.length-c.length)].map(h=>new ha(h,n,{isSuggestion:!0})),d),ea(n)}!function _G(n,o){if(0===o.length||!1===n.options.enablePopover)return void vg(n);o=o.slice(0,10);let e="<ul>";for(let a of o){let r=a,s=pG(n,a),l=lG(n.keybindings,r).join("<br>");e+=`<li role="button" data-command="${r}"><span class="ML__popover__latex">${r}</span><span class="ML__popover__command">${s}</span>`,l&&(e+=`<span class="ML__popover__keybinding">${l}</span>`),e+="</li>"}e+="</ul>",n.popover=function fG(n,o){return n.popover?(n.popover.innerHTML=n.options.createHTML(o),n.popover):(n.popover=lC("mathlive-popover-panel"),void 0===G4&&(G4=Nu(TC).toString(36)),$4=Zu(null,TC,G4),Y4=Zu(null,Uc,Nu(Uc).toString(36)),n.popover.innerHTML=n.options.createHTML(o),n.popover)}(n,e);let i=n.popover.querySelectorAll("ul li");for(let a of i)a.addEventListener("pointerdown",r=>r.preventDefault()),a.addEventListener("click",r=>{Xm(n,"reject"),Qo.insert("math",n.model,a.dataset.command,{selectionMode:"placeholder",format:"latex"}),n.dirty=!0,n.scrollIntoView(),n.focus()});setTimeout(()=>{let a=_g(n.field);a&&OC(n,a),n.popover&&(n.popover.classList.add("is-visible"),n.popoverVisible=!0)},32)}(n,l)}function SC(n){let[o,e]=AC(n,{before:n.position});if(void 0===o||void 0===e)return!1;let i=!1;return n.getAtoms([o,e]).forEach(a=>{a.isSuggestion&&(a.isSuggestion=!1,i=!0)}),i}function Xm(n,o="accept",e){var i,a;vg(n);let r=function hG(n){return n.atoms.find(o=>o instanceof Ld)}(n.model);if(!r)return!1;if("accept-suggestion"===o){let c=bg(n.model).filter(d=>d.isSuggestion);if(0===c.length)return!1;for(let d of c)d.isSuggestion=!1;return n.model.position=n.model.offsetOf(c[c.length-1]),!0}let s=bg(n.model).filter(c=>!c.isSuggestion).map(c=>c.value).join(""),l=r.leftSibling;return r.parent.removeChild(r),n.model.position=n.model.offsetOf(l),n.mode=null!=(i=e?.mode)?i:"math","reject"===o||(Qo.insert("math",n.model,s,{selectionMode:null!=(a=e?.selectItem)&&a?"item":"placeholder",format:"latex"}),n.snapshot(),n.model.announce("replacement")),!0}new class extends Qo{constructor(){super("latex")}createAtom(n,o,e){return new ha(n,o)}onPaste(n,o){var e;if(!o)return!1;let i="string"==typeof o?o:null!=(e=o.getData("text/x-latex"))?e:o.getData("text/plain");return!(!i||!ko(n.model,{inputType:"insertFromPaste",data:i})||(n.snapshot(),this.insert(n.model,i)&&(Po(n.model,{inputType:"insertFromPaste"}),ea(n)),0))}insert(n,o,e){if(!ko(n,{data:o,inputType:"insertText"}))return!1;e||(e={}),e.insertionMode||(e.insertionMode="replaceSelection"),e.selectionMode||(e.selectionMode="placeholder");let{suppressChangeNotifications:i}=n;e.suppressChangeNotifications&&(n.suppressChangeNotifications=!0);let a=n.suppressChangeNotifications;n.suppressChangeNotifications=!0,"replaceSelection"!==e.insertionMode||n.selectionIsCollapsed?"replaceAll"===e.insertionMode?(n.root.setChildren([],"body"),n.position=0):"insertBefore"===e.insertionMode?n.collapseSelection("backward"):"insertAfter"===e.insertionMode&&n.collapseSelection("forward"):n.deleteAtoms(gl(n.selection));let r=[];for(let c of o)CJ.test(c)&&r.push(new ha(c,n.mathfield));let s=n.at(n.position);if(s instanceof Ld&&(s=s.lastChild),!(s.parent instanceof Ld)){let c=new Ld("",n.mathfield);s.parent.addChildAfter(c,s),s=c.firstChild}let l=s.parent.addChildrenAfter(r,s);return n.suppressChangeNotifications=a,"before"===e.selectionMode||("item"===e.selectionMode?n.setSelection(n.anchor,n.offsetOf(l)):l&&(n.position=n.offsetOf(l))),Po(n,{data:o,inputType:"insertText"}),n.suppressChangeNotifications=i,!0}};var G4,$4=null,Y4=null;function pG(n,o){let e=n,i=new ke("root",e);return i.body=Gr(o,e,{parseMode:"math"}),Id(mx(Pp(new Be(i.render(new ni({registers:e.registers},{fontSize:Fm},"displaystyle")),{classes:"ML__base"}))),{classes:"ML__mathlive"}).toMarkup()}function Px(n,o){var e;if(n.element&&n.element.mathfield===n&&n.popover&&n.popoverVisible){if(null!=o&&o.deferred)return void setTimeout(()=>Px(n),100);if("latex"!==(null==(e=n.model.at(n.model.position))?void 0:e.type))vg(n);else{let i=_g(n.field);i&&OC(n,i)}}}function OC(n,o){if(S5(),!n.popover||!n.popoverVisible)return;let e=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,i=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,a=window.innerWidth-document.documentElement.clientWidth,r=window.innerHeight-document.documentElement.clientHeight,s=n.virtualKeyboard.height;n.popover.style.left=o.x+n.popover.offsetWidth/2>i-a?i-n.popover.offsetWidth-a+"px":o.x-n.popover.offsetWidth/2<0?"0":o.x-n.popover.offsetWidth/2+"px",o.y+n.popover.offsetHeight+5>e-r-s?(n.popover.classList.add("ML__popover--reverse-direction"),n.popover.style.top=o.y-o.height-n.popover.offsetHeight-5+"px"):(n.popover.classList.remove("ML__popover--reverse-direction"),n.popover.style.top=`${o.y+5}px`)}function vg(n){n.suggestionIndex=0,n.popoverVisible=!1,n.popover&&(n.popover.classList.remove("is-visible"),n.popover.innerHTML="")}function xG(n){let o=0;for(let e=0;e<n.length;e++)o=31*o+n.charCodeAt(e),o|=0;return Math.abs(o)}function ea(n,o){n.dirty||(n.dirty=!0,requestAnimationFrame(()=>{Wm(n)&&n.dirty&&(n.atomBoundsCache=new Map,th(n,o),n.atomBoundsCache=void 0)}))}function th(n,o){var e;if(!Wm(n))return;o=o??{};let{model:i}=n;i.root.caret="",i.root.isSelected=!1,i.root.containsCaret=!0;for(let c of i.atoms)c.caret="",c.isSelected=!1,c.containsCaret=!1;let a=!n.options.readOnly&&n.hasFocus();if(i.selectionIsCollapsed)i.at(i.position).caret=a?n.mode:"";else{let c=i.getAtoms(i.selection,{includeChildren:!0});for(let d of c)d.isSelected=!0}if(a){let c=i.at(i.position).parent;for(;c;)c.containsCaret=!0,c=c.parent}let r=function bG(n,o){var e;return Id(Pp(n.model.root.render(new ni({registers:n.registers,atomIdsSettings:{seed:(o=o??{}).forHighlighting?xG(ke.serialize(n.model.root,{expandMacro:!1,defaultMode:n.options.defaultMode})):"random",groupNumbers:null!=(e=o.forHighlighting)&&e},renderPlaceholder:n.options.readOnly?(a,r)=>{if(r.placeholderId){let s=n.getPlaceholderField(r.placeholderId);return r.createMathfieldBox(a,s,r.placeholderId)}return r.createBox(a)}:void 0},{fontSize:Fm,letterShapeStyle:n.options.letterShapeStyle},"inline-math"===n.options.defaultMode?"textstyle":"displaystyle")),n.options.horizontalSpacingScale),{classes:"ML__mathlive",attributes:{translate:"no","aria-hidden":"true"}})}(n,o),s=n.field,l=s.classList.contains("ML__focused");l&&!a?s.classList.remove("ML__focused"):!l&&a&&s.classList.add("ML__focused"),s.innerHTML=n.options.createHTML(r.toMarkup()),n.fieldContent=s.querySelector(".ML__mathlive"),n.accessibleMathML.innerHTML=n.options.createHTML('<math xmlns="http://www.w3.org/1998/Math/MathML">'+Zi(i.root,n.options)+"</math>"),EC(n),n.options.readOnly&&n.attachNestedMathfield(),null!=(e=o.interactive)&&e||setTimeout(()=>EC(n),32),n.dirty=!1}function EC(n){let o=n.field;if(!o)return;for(let r of o.querySelectorAll(".ML__selection, .ML__contains-highlight"))r.remove();if(!n.hasFocus())return;let e=n.model,i=parseFloat(getComputedStyle(o).width),a=o.getBoundingClientRect().width/i;if(a=isNaN(a)?1:a,e.selectionIsCollapsed){setTimeout(()=>Px(n),32);let r=e.at(e.position);for(;r&&(!r.containsCaret||!r.displayContainsHighlight);)r=r.parent;if(null!=r&&r.containsCaret&&r.displayContainsHighlight){let s=uC(n,fg(n,r));if(s){s.left/=a,s.right/=a,s.top/=a,s.bottom/=a;let l=document.createElement("div");l.classList.add("ML__contains-highlight"),l.style.position="absolute",l.style.left=`${s.left}px`,l.style.top=`${s.top}px`,l.style.width=`${Math.ceil(s.right-s.left)}px`,l.style.height=`${Math.ceil(s.bottom-s.top-1)}px`,o.insertBefore(l,o.childNodes[0])}}}else for(let r of function vG(n){let o=[];for(let e of n){let i=!1;for(let a of o)if(e.left===a.left&&e.right===a.right&&e.top===a.top&&e.bottom===a.bottom){i=!0;break}i||o.push(e)}n=o,o=[];for(let e of n){let i=0;for(let a of n)if(e.left>=a.left&&e.right<=a.right&&e.top>=a.top&&e.bottom<=a.bottom&&(i+=1,i>1))break;1===i&&o.push(e)}return o}(mC(n,{excludeAtomsWithBackground:!0}))){r.left/=a,r.right/=a,r.top/=a,r.bottom/=a;let s=document.createElement("div");s.classList.add("ML__selection"),s.style.position="absolute",s.style.left=`${r.left}px`,s.style.top=`${r.top}px`,s.style.width=`${Math.ceil(r.right-r.left)}px`,s.style.height=`${Math.ceil(r.bottom-r.top-1)}px`,o.insertBefore(s,o.childNodes[0])}}var Du={};function Yr(n,o){o=o??{target:"mathfield",canUndo:!1};for(let e of Object.keys(n))Du[e]=ei(Ee({},o),{fn:n[e]})}function yg(n){var o;let e;return e=qa(n)?n[0]:n,e=e.replace(/-\w/g,i=>i[1].toUpperCase()),null==(o=Du[e])?void 0:o.target}function Rp(n,o,e){return o+Fp(e,ei(Ee({},n),{textToSpeechMarkup:"",textToSpeechRulesOptions:ei(Ee({},n.textToSpeechRulesOptions),{markup:"none"})}))}function AG(n,o){var e,i,a;if(Ds()&&(null!=o||(o=null!=(e=pa().config)?e:{}),o))if(o.speechEngine&&"local"!==o.speechEngine)if("amazon"===o.speechEngine)if("AWS"in window){let r=new globalThis.AWS.Polly({apiVersion:"2016-06-10"}),s={OutputFormat:"mp3",VoiceId:null!=(i=o.speechEngineVoice)?i:"Joanna",Engine:["Amy","Emma","Brian","Ivy","Joanna","Kendra","Kimberly","Salli","Joey","Justin","Matthew"].includes(null!=(a=o.speechEngineVoice)?a:"Joanna")?"neural":"standard",Text:n,TextType:"ssml"};r.synthesizeSpeech(s,(l,c)=>{if(l)console.error("MathLive: polly.synthesizeSpeech() error:",l,l.stack);else if(null!=c&&c.AudioStream){let d=new Uint8Array(c.AudioStream),h=new Blob([d.buffer],{type:"audio/mpeg"}),_=URL.createObjectURL(h);new Audio(_).play().catch(x=>console.log(x))}})}else console.error("MathLive: AWS SDK not loaded. See https://www.npmjs.com/package/aws-sdk");else"google"===o.speechEngine&&console.error("MathLive: The Google speech engine is not supported yet. Please come again.");else{let r=new SpeechSynthesisUtterance(n);window.speechSynthesis.speak(r)}}function MC(n){if(n&&(n.classList.remove("ML__highlight"),n.children))for(let o of n.children)MC(o)}function W4(n,o){var e;n&&(o&&(null==(e=n.dataset)?void 0:e.atomId)!==o?(n.classList.remove("ML__highlight"),n.children&&n.children.length>0&&[...n.children].forEach(i=>{i instanceof HTMLElement&&W4(i,o)})):(n.classList.add("ML__highlight"),n.children&&n.children.length>0&&[...n.children].forEach(i=>{i instanceof HTMLElement&&W4(i)})))}function SG(n,o,e){var i;if(!Ds())return;if(null!=e||(e=pa().config),"amazon"!==e.speechEngine)return console.error("MathLive: Use Amazon TTS Engine for synchronized highlighting"),void(e.speakHook&&e.speakHook(o,e));if(!globalThis.AWS)return void console.error("MathLive: AWS SDK not loaded. See https://www.npmjs.com/package/aws-sdk");let a=new globalThis.AWS.Polly({apiVersion:"2016-06-10"}),r={OutputFormat:"json",VoiceId:null!=(i=e.speechEngineVoice)?i:"Joanna",Engine:"standard",Text:o,TextType:"ssml",SpeechMarkTypes:["ssml"]};pa().readAloudElement=n,a.synthesizeSpeech(r,(s,l)=>{if(s)return void console.error("MathLive: polly.synthesizeSpeech() error:",s,s.stack);if(null==l||!l.AudioStream)return;let c=new TextDecoder("utf-8").decode(new Uint8Array(l.AudioStream));pa().readAloudMarks=c.split("\n").map(d=>d?JSON.parse(d):{}),pa().readAloudTokens=[];for(let d of pa().readAloudMarks)d.value&&pa().readAloudTokens.push(d.value);pa().readAloudCurrentMark="",r.OutputFormat="mp3",r.SpeechMarkTypes=[],a.synthesizeSpeech(r,(d,h)=>{if(d)return void console.error("MathLive: polly.synthesizeSpeech(",o,") error:",d,d.stack);if(null==h||!h.AudioStream)return;let _=new Uint8Array(h.AudioStream),x=new Blob([_.buffer],{type:"audio/mpeg"}),b=URL.createObjectURL(x),T=pa();T.readAloudAudio?T.readAloudAudio.pause():(T.readAloudAudio=new Audio,T.readAloudAudio.addEventListener("ended",()=>{let P=T.readAloudMathField;T.readAloudStatus="ended",document.body.dispatchEvent(new Event("read-aloud-status-change",{bubbles:!0,composed:!0})),P?(th(P),T.readAloudElement=null,T.readAloudMathField=null,T.readAloudTokens=[],T.readAloudMarks=[],T.readAloudCurrentMark=""):MC(T.readAloudElement)}),T.readAloudAudio.addEventListener("timeupdate",()=>{let P="",U=1e3*T.readAloudAudio.currentTime+100;for(let q of T.readAloudMarks)q.time<U&&(P=q.value);T.readAloudCurrentMark!==P&&(T.readAloudCurrentToken=P,P&&P===T.readAloudFinalToken?T.readAloudAudio.pause():(T.readAloudCurrentMark=P,W4(T.readAloudElement,T.readAloudCurrentMark)))})),T.readAloudAudio.src=b,T.readAloudStatus="playing",document.body.dispatchEvent(new Event("read-aloud-status-change",{bubbles:!0,composed:!0})),T.readAloudAudio.play()})})}function V4(n,o){var e,i,a;let r=Up(n,Object.keys(n));for(let s of Object.keys(o))switch(s){case"scriptDepth":if(qa(o.scriptDepth))r.scriptDepth=[o.scriptDepth[0],o.scriptDepth[1]];else{if("number"!=typeof o.scriptDepth)throw new TypeError("Unexpected value for scriptDepth");r.scriptDepth=[o.scriptDepth,o.scriptDepth]}break;case"locale":r.locale="auto"===o.locale?navigator.language.slice(0,5):o.locale,go.locale=r.locale;break;case"strings":go.merge(o.strings),r.strings=go.strings;break;case"virtualKeyboardLayout":r.virtualKeyboardLayout=o.virtualKeyboardLayout;break;case"virtualKeyboardMode":let l=o.virtualKeyboardMode.toLowerCase();r.virtualKeyboardMode="auto"===l?O5()?"onfocus":"off":l;break;case"customVirtualKeyboardLayers":r.customVirtualKeyboardLayers=Ee(Ee({},r.customVirtualKeyboardLayers),o.customVirtualKeyboardLayers);break;case"customVirtualKeyboards":r.customVirtualKeyboards=Ee(Ee({},r.customVirtualKeyboards),o.customVirtualKeyboards);break;case"letterShapeStyle":r.letterShapeStyle="auto"===o.letterShapeStyle?go.locale.startsWith("fr")?"french":"tex":o.letterShapeStyle;break;case"plonkSound":void 0!==o.plonkSound&&(r.plonkSound=o.plonkSound);break;case"keypressSound":null===o.keypressSound?r.keypressSound={default:null,delete:null,return:null,spacebar:null}:"string"==typeof o.keypressSound?r.keypressSound={delete:o.keypressSound,return:o.keypressSound,spacebar:o.keypressSound,default:o.keypressSound}:"object"==typeof o.keypressSound&&"default"in o.keypressSound&&(r.keypressSound=Ee({},o.keypressSound),r.keypressSound.delete=null!=(e=r.keypressSound.delete)?e:o.keypressSound.default,r.keypressSound.return=null!=(i=r.keypressSound.return)?i:o.keypressSound.default,r.keypressSound.spacebar=null!=(a=r.keypressSound.spacebar)?a:o.keypressSound.default);break;case"computeEngine":r.computeEngine=o.computeEngine;break;case"virtualKeyboardContainer":r.virtualKeyboardContainer=o.virtualKeyboardContainer;break;case"macros":r.macros=f4(o.macros);break;default:r[s]=qa(o[s])?[...o[s]]:"object"==typeof o[s]?Ee({},o[s]):o[s]}return r}function Up(n,o){let e;e="string"==typeof o?[o]:void 0===o?Object.keys(n):o;let i={};for(let a of e)i[a]=null===n[a]?null:qa(n[a])?[...n[a]]:"object"!=typeof n[a]||n[a]instanceof Element||"computeEngine"===a?n[a]:Ee({},n[a]);return"string"==typeof o?i[o]:i}Yr({performWithFeedback:(n,o)=>function wG(n,o){n.focus(),n.options.keypressVibration&&l4()&&navigator.vibrate(3),o=o.replace(/-\w/g,i=>i[1].toUpperCase()),n.playSound("moveToNextPlaceholder"===o||"moveToPreviousPlaceholder"===o||"complete"===o?"return":"deleteBackward"===o||"deleteForward"===o||"deletePreviousWord"===o||"deleteNextWord"===o||"deleteToGroupStart"===o||"deleteToGroupEnd"===o||"deleteToMathFieldStart"===o||"deleteToMathFieldEnd"===o?"delete":"keypress");let e=n.executeCommand(o);return n.scrollIntoView(),e}(n,o)}),Yr({complete:Xm,nextSuggestion:function CG(n){return Lx(n,{atIndex:n.suggestionIndex+1}),!1},previousSuggestion:function TG(n){return Lx(n,{atIndex:n.suggestionIndex-1}),!1}},{target:"mathfield",category:"autocomplete"}),Yr({speak:(n,o,e)=>function kG(n,o,e){var i,a;e=e??{withHighlighting:!1};let{model:r}=n;let c=function s(_){let x=null;switch(_){case"all":default:x=r.root;break;case"selection":x=r.getAtoms(r.selection);break;case"left":x=r.getAtoms(r.offsetOf(r.at(r.position).leftSibling),r.position);break;case"right":x=r.getAtoms(r.position,r.offsetOf(r.at(r.position).rightSibling));break;case"group":x=r.getAtoms(r.getSiblingsRange(r.position));break;case"parent":{let{parent:b}=r.at(r.position);x=b&&"root"!==b.type?b:r.root;break}}return x}(o);if(null===c)return null==(a=(i=n.options).speakHook)||a.call(i,function l(_){let x="";switch(_){case"all":case"group":default:break;case"selection":x="no selection";break;case"left":x="at start";break;case"right":x="at end";break;case"parent":x="no parent"}return x}(o),n.options),!1;let d=Ee({},n.options);(e.withHighlighting||"amazon"===d.speechEngine)&&(d.textToSpeechMarkup=globalThis.sre&&"sre"===d.textToSpeechRules?"ssml_step":"ssml");let h=Fp(c,d);return Ds()&&e.withHighlighting?(pa().readAloudMathField=n,th(n,{forHighlighting:!0}),n.options.readAloudHook&&n.options.readAloudHook(n.field,h,n.options)):n.options.speakHook&&n.options.speakHook(h,d),!1}(n,o,e)},{target:"mathfield",category:"speech"});var IC='<span style="width: 21px; margin-top: 4px;"><svg style="width: 21px;" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path d="M528 64H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h480c26.51 0 48-21.49 48-48V112c0-26.51-21.49-48-48-48zm16 336c0 8.823-7.177 16-16 16H48c-8.823 0-16-7.177-16-16V112c0-8.823 7.177-16 16-16h480c8.823 0 16 7.177 16 16v288zM168 268v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm-336 80v-24c0-6.627-5.373-12-12-12H84c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm384 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zM120 188v-24c0-6.627-5.373-12-12-12H84c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm96 0v-24c0-6.627-5.373-12-12-12h-24c-6.627 0-12 5.373-12 12v24c0 6.627 5.373 12 12 12h24c6.627 0 12-5.373 12-12zm-96 152v-8c0-6.627-5.373-12-12-12H180c-6.627 0-12 5.373-12 12v8c0 6.627 5.373 12 12 12h216c6.627 0 12-5.373 12-12z"/></svg></span>';function X4(){var n,o,e;return{readOnly:!1,createHTML:i=>i,fontsDirectory:"./fonts",soundsDirectory:"./sounds",computeEngine:void 0,defaultMode:"math",macros:_4(),registers:{},colorMap:ox,backgroundColorMap:c4,horizontalSpacingScale:1,letterShapeStyle:go.locale.startsWith("fr")?"french":"tex",smartMode:!1,smartFence:!0,smartSuperscript:!0,scriptDepth:[1/0,1/0],removeExtraneousParentheses:!0,mathModeSpace:"",decimalSeparator:".",fractionNavigationOrder:"numerator-denominator",placeholderSymbol:"\u25a2",enablePopover:!0,locale:go.locale,strings:go.strings,keybindings:wC,inlineShortcuts:iC,inlineShortcutTimeout:0,virtualKeyboardToggleGlyph:IC,virtualKeyboardMode:"auto",virtualKeyboards:"all",virtualKeyboardLayout:"auto",customVirtualKeyboardLayers:{},customVirtualKeyboards:{},virtualKeyboardTheme:/android|cros/i.test(navigator.userAgent)?"material":"apple",keypressVibration:!0,keypressSound:null,plonkSound:null,virtualKeyboardToolbar:"default",virtualKeyboardContainer:null!=(o=null==(n=globalThis.document)?void 0:n.body)?o:null,useSharedVirtualKeyboard:!1,sharedVirtualKeyboardTargetOrigin:null==(e=globalThis.window)?void 0:e.origin,originValidator:"same-origin",textToSpeechRules:"mathlive",textToSpeechMarkup:"",textToSpeechRulesOptions:{},speechEngine:"local",speechEngineVoice:"Joanna",speechEngineRate:"100%",speakHook:AG,readAloudHook:SG,onInlineShortcut:()=>"",onExport:TH,value:""}}function tw(n){return"inline-math"===n.defaultMode?"math":n.defaultMode}var PC,NC,LC="@keyframes ML__caret-blink{0%,100%{opacity:1}50%{opacity:0}}.ML__caret:after{content:'';border:none;border-radius:2px;border-right:2px solid var(--caret-color, var(--ML__caret-color));margin-right:-2px;position:relative;left:-1px;animation:ML__caret-blink 1.05s step-end forwards infinite}.ML__text-caret:after{content:'';border:none;border-radius:1px;border-right:1px solid var(--caret-color, var(--ML__caret-color));margin-right:-1px;position:relative;left:0;animation:ML__caret-blink 1.05s step-end forwards infinite}.ML__latex-caret:after{content:'_';border:none;margin-right:0;margin-right:calc(-1ex - 2px);position:relative;color:var(--caret-color, var(--ML__caret-color));animation:ML__caret-blink 1.05s step-end forwards infinite}.ML__container{display:flex;flex-flow:row;justify-content:space-between;align-items:flex-end;min-height:39px;width:100%;isolation:isolate;touch-action:none;--ML__selection-background-color:hsl(var(--hue, 212), 97%, 85%);--ML__text-highlight-background-color:hsla(var(--hue, 212), 40%, 50%, .1);--ML__contains-highlight-background-color:hsl(var(--hue, 212), 40%, 95%);--ML__selection-color:currentColor;--ML__caret-color:hsl(var(--hue, 212), 40%, 49%);--ML__smart-fence-color:currentColor;--ML__latex-color:var(--primary, hsl(var(--hue, 212), 40%, 50%));--ML__placeholder-color:hsl(var(--hue, 212), 40%, 49%)}@media (prefers-color-scheme:dark){.ML__container{--ML__selection-background-color:hsl(var(--hue, 212), 25%, 45%);--ML__text-highlight-background-color:hsla(var(--hue, 212), 40%, 50%, .2);--ML__contains-highlight-background-color:hsl(var(--hue, 212), 5%, 34%);--ML__caret-color:hsl(var(--hue, 212), 60%, 69%);--ML__latex-color:var(--primary, hsl(var(--hue, 212), 40%, 50%));--ML__placeholder-color:hsl(var(--hue, 212), 60%, 69%)}}.ML__content{display:flex;align-items:center;align-self:center;position:relative;overflow:hidden;padding:2px 0 2px 1px;width:100%}.ML__virtual-keyboard-toggle{display:none;box-sizing:border-box}.ML__virtual-keyboard-toggle>span{display:flex;align-self:center;align-items:center}.ML__virtual-keyboard-toggle.is-visible{display:flex;align-self:center;align-items:center;flex-shrink:0;flex-direction:column;justify-content:center;width:34px;height:34px;padding:0;margin-right:4px;cursor:pointer;border-radius:8px;border:1px solid transparent;transition:background .2s cubic-bezier(.64, .09, .08, 1);color:var(--primary, hsl(var(--hue, 212), 40%, 50%));fill:currentColor;background:transparent}.ML__virtual-keyboard-toggle.is-visible:hover{background:hsla(0,0%,70%,0.5);color:#333;fill:currentColor;border-radius:8px}.ML__keyboard-sink{display:inline-block;resize:none;outline:none;border:none;position:fixed;clip:rect(0 0 0 0);font-size:1em;font-family:KaTeX_Main}.ML__focused .ML__text{background:var(--highlight-text, var(--ML__text-highlight-background-color))}.ML__smart-fence__close{opacity:var(--smart-fence-opacity, .5);color:var(--smart-fence-color, var(--ML__smart-fence-color))}.ML__focused .ML__selection{background:var(--selection-background-color-focused, var(--selection-background-color, var(--ML__selection-background-color))) !important}.ML__focused .ML__selected,.ML__focused .ML__selected .ML__contains-caret,.ML__focused .ML__selected .ML__smart-fence__close,.ML__focused .ML__selected .ML__placeholder{color:var(--selection-color-focused, var(--selection-color, var(--ML__selection-color))) !important}.ML__selection{box-sizing:border-box;background:var(--selection-background-color, var(--ML__selection-background-color)) !important}.ML__selected,.ML__selected .ML__contains-caret,.ML__selected .ML__smart-fence__close,.ML__selected .ML__placeholder{color:var(--selection-color, var(--ML__selection-color));opacity:1}.ML__contains-caret.ML__close,.ML__contains-caret.ML__open,.ML__contains-caret>.ML__close,.ML__contains-caret>.ML__open,.ML__contains-caret .ML__sqrt-sign,.ML__contains-caret .ML__sqrt-line{color:var(--caret-color, var(--ML__caret-color))}.ML__contains-highlight{background:var(--contains-highlight-backround-color, var(--ML__contains-highlight));box-sizing:border-box}.ML__latex{font-family:'IBM Plex Mono','Source Code Pro',Consolas,'Roboto Mono',Menlo,'Bitstream Vera Sans Mono','DejaVu Sans Mono',Monaco,Courier,monospace;font-weight:400;color:var(--latex-color, var(--ML__latex-color))}.ML__suggestion{opacity:.5}.ML__virtual-keyboard-toggle.is-visible.is-pressed:hover{background:hsl(var(--hue, 212), 25%, 35%);color:#fafafa;fill:currentColor}.ML__virtual-keyboard-toggle:focus{outline:none;border-radius:8px;border:2px solid var(--primary, hsl(var(--hue, 212), 40%, 50%))}.ML__virtual-keyboard-toggle.is-pressed,.ML__virtual-keyboard-toggle.is-active:hover,.ML__virtual-keyboard-toggle.is-active{background:hsl(var(--hue, 212), 25%, 35%);color:#fafafa;fill:currentColor}.ML__tooltip-container{position:relative;transform:scale(0)}.ML__tooltip-container .ML__tooltip-content{position:fixed;display:inline-table;visibility:hidden;z-index:2;width:max-content;max-width:400px;padding:12px 12px;border-radius:8px;background:#616161;color:#fff;box-shadow:0 2px 2px 0 rgba(0,0,0,0.14),0 1px 5px 0 rgba(0,0,0,0.12),0 3px 1px -2px rgba(0,0,0,0.2);opacity:0;transition:opacity .15s cubic-bezier(.4, 0, 1, 1)}.ML__tooltip-container .ML__tooltip-content .ML__text{white-space:normal}.ML__tooltip-container .ML__tooltip-content .ML__base{display:contents}.ML__tooltip-container:hover .ML__tooltip-content{visibility:visible;opacity:1;font-size:.75em;transform:scale(1) translate(0, 3em)}[data-ML__tooltip]{position:relative}[data-ML__tooltip][data-placement='top']::after{top:inherit;bottom:100%}[data-ML__tooltip]::after{content:attr(data-ML__tooltip);position:absolute;display:none;z-index:2;right:110%;width:max-content;max-width:200px;padding:8px 8px;border-radius:2px;background:#616161;color:#fff;box-shadow:0 2px 2px 0 rgba(0,0,0,0.14),0 1px 5px 0 rgba(0,0,0,0.12),0 3px 1px -2px rgba(0,0,0,0.2);text-align:center;font-family:system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI','Roboto','Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue',sans-serif;font-weight:400;font-size:12px;opacity:0;transform:scale(.5);transition:all .15s cubic-bezier(.4, 0, 1, 1)}@media only screen and (max-width:767px){[data-ML__tooltip]::after{padding:8px 16px;font-size:16px}}:not(.tracking) [data-ML__tooltip]:hover{position:relative}:not(.tracking) [data-ML__tooltip]:hover::after{visibility:visible;display:inline-table;opacity:1;transform:scale(1)}[data-ML__tooltip][data-delay]::after{transition-delay:0s}[data-ML__tooltip][data-delay]:hover::after{transition-delay:1s}",Nx=null,ew=(null==(NC=null==(PC=globalThis?.document)?void 0:PC.currentScript)?void 0:NC.src)||function OG(){let n=String((new Error).stack).replace(/^Error.*\n/,"").split("\n");if(0===n.length)return console.error(`Can't use relative paths to specify assets location because the sourcefile location could not be determined (unexpected stack trace format "${(new Error).stack}").`),"";let o=n[1],e=o.match(/http.*\.ts[\?:]/);return e&&(o=n[2]),e=o.match(/(https?:.*):[0-9]+:[0-9]+/),e||(e=o.match(/at (.*(\.ts))[\?:]/),e||(e=o.match(/at (.*(\.mjs|\.js))[\?:]/))),e?e[1]:(console.error(n),console.error(`Can't use relative paths to specify assets location because the source file location could not be determined (unexpected location "${o}").`),"")}();function ZC(n){return nw.apply(this,arguments)}function nw(){return nw=(0,Ya.Z)(function*(n){if(/^(?:[a-z+]+:)?\/\//i.test(n))return new URL(n).href;if(null===Nx)try{let o=yield fetch(ew,{method:"HEAD"});200===o.status&&(Nx=o.url)}catch{console.error(`Invalid URL "${n}" (relative to "${ew}")`)}return new URL(n,Nx??ew).href}),nw.apply(this,arguments)}function iw(n){return ow.apply(this,arguments)}function ow(){return ow=(0,Ya.Z)(function*(n){var o;if(!(document.body.classList.contains("ML__fonts-loading")||null!=(o=getComputedStyle(document.documentElement).getPropertyValue("--ML__static-fonts"))&&o)&&(document.body.classList.remove("ML__fonts-did-not-load"),"fonts"in document)){let e=["KaTeX_Main","KaTeX_Math","KaTeX_AMS","KaTeX_Caligraphic","KaTeX_Fraktur","KaTeX_SansSerif","KaTeX_Script","KaTeX_Typewriter","KaTeX_Size1","KaTeX_Size2","KaTeX_Size3","KaTeX_Size4"],i=Array.from(document.fonts).map(s=>s.family);if(e.every(s=>i.includes(s)))return;document.body.classList.add("ML__fonts-loading");let a=yield ZC(n??"./fonts");if(!a)return document.body.classList.add("ML__fonts-did-not-load"),void document.body.classList.remove("ML__fonts-loading");let r=[["KaTeX_Main-Regular"],["KaTeX_Main-BoldItalic",{style:"italic",weight:"bold"}],["KaTeX_Main-Bold",{weight:"bold"}],["KaTeX_Main-Italic",{style:"italic"}],["KaTeX_Math-Italic",{style:"italic"}],["KaTeX_Math-BoldItalic",{style:"italic",weight:"bold"}],["KaTeX_AMS-Regular"],["KaTeX_Caligraphic-Regular"],["KaTeX_Caligraphic-Bold",{weight:"bold"}],["KaTeX_Fraktur-Regular"],["KaTeX_Fraktur-Bold",{weight:"bold"}],["KaTeX_SansSerif-Regular",{style:"italic"}],["KaTeX_SansSerif-Bold",{weight:"bold"}],["KaTeX_SansSerif-Italic",{style:"italic"}],["KaTeX_Script-Regular"],["KaTeX_Typewriter-Regular"],["KaTeX_Size1-Regular"],["KaTeX_Size2-Regular"],["KaTeX_Size3-Regular"],["KaTeX_Size4-Regular"]].map(s=>function EG(n,o,e={}){return new FontFace(n,`url(${o}.woff2) format('woff2')`,e)}(s[0].replace(/-[a-zA-Z]+$/,""),a+"/"+s[0],s[1]));try{(yield Promise.all(r.map(s=>{try{return s.load()}catch{}}))).forEach(s=>document.fonts.add(s))}catch(s){console.error(`The MathLive fonts could not be loaded from "${a}"`,{cause:s}),document.body.classList.add("ML__fonts-did-not-load")}document.body.classList.remove("ML__fonts-loading")}}),ow.apply(this,arguments)}function Zd(n){return"number"==typeof n&&!Number.isNaN(n)}function Zx(n){return Array.isArray(n)&&2===n.length}function Dx(n){return null!=n&&"object"==typeof n&&"ranges"in n&&Array.isArray(n.ranges)}var wg={"\\ne":"\u2260","\\neq":"\u2260","\u2212":"-","-":"-","\\alpha":"alpha","\\beta":"beta","\\gamma":"gamma","\\delta":"delta","\\epsilon":"epsilon","\\varepsilon":"varepsilon","\\zeta":"zeta","\\eta":"eta","\\theta":"theta","\\vartheta":"vartheta","\\iota":"iota","\\kappa":"kappa","\\lambda":"lambda","\\mu":"mu","\\nu":"nu","\\xi":"xi","\\pi":"pi","\\rho":"rho","\\sigma":"sigma","\\tau":"tau","\\upsilon":"upsilon","\\phi":"phi","\\varphi":"varphi","\\chi":"chi","\\psi":"psi","\\omega":"omega","\\Gamma":"Gamma","\\Delta":"Delta","\\Theta":"Theta","\\Lambda":"Lambda","\\Xi":"Xi","\\Pi":"Pi","\\Sigma":"Sigma","\\Phi":"Phi","\\Psi":"Psi","\\Omega":"Omega","\\exponentialE":"e","\\imaginaryI":"i","\\imaginaryJ":"j","\\!":" ","\\,":" ","\\:":" ","\\;":" ","\\enskip":" ","\\enspace":" ","\\qquad":" ","\\quad":" "},aw={"\\pm":"+-","\\times":"xx","\\colon":":","\\vert":"|","\\Vert":"||","\\mid":"|","\\lbrace":"{","\\rbrace":"}","\\lparen":"(","\\rparen":")","\\langle":"(:","\\rangle":":)"};function na(n){var o,e,i,a,r,s,l,c,d,h,_,x,b;if(!n)return"";if(qa(n)){if(0===n.length||("first"===n[0].type&&(n=n.slice(1)),0===n.length))return"";let q="";if("latex"===n[0].mode)for(let B of n)q+=na(B);else if("text"===n[0].mode){let B=0;for(q='"';"text"===(null==(o=n[B])?void 0:o.mode);)q+=n[B].body?na(n[B].body):n[B].value,B++;q+='"'+na(n.slice(B))}else if("math"===n[0].mode){let B=0;for(;n[B]&&"math"===n[B].mode;)q+=na(n[B]),B++;q+=na(n.slice(B))}else console.warn("toASCIIMath: Unexpected mode");return q.trim()}if("text"===n.mode)return'"'+n.value+'"';let U,T="",{command:P}=n;switch(n.type){case"first":return"";case"group":case"root":T=null!=(e=wg[P])?e:na(n.body);break;case"genfrac":{let At=n;(At.leftDelim||At.rightDelim)&&(T+="."!==At.leftDelim&&At.leftDelim?At.leftDelim:"{:"),At.hasBarLine?(T+="(",T+=na(At.above),T+=")/(",T+=na(At.below),T+=")"):(T+="("+na(At.above)+"),",T+="("+na(At.below)+")"),(At.leftDelim||At.rightDelim)&&(T+="."!==At.rightDelim&&At.rightDelim?At.rightDelim:"{:")}break;case"surd":T+=n.hasEmptyBranch("above")?"sqrt("+na(n.body)+")":"root("+na(n.above)+")("+na(n.body)+")";break;case"latex":T=n.value;break;case"leftright":{let At=n;T+="."!==At.leftDelim&&At.leftDelim?At.leftDelim:"{:",T+=na(At.body),T+="."!==At.rightDelim&&At.rightDelim?At.rightDelim:":}"}break;case"sizeddelim":case"delim":case"overlap":case"overunder":case"box":break;case"mord":T=null!=(a=null!=(i=wg[P])?i:P)?a:"string"==typeof n.value?n.value:"",T.startsWith("\\")&&(T+=" "),U=P?P.match(/{?\\char"([\dabcdefABCDEF]*)}?/):null,U?T=String.fromCodePoint(Number.parseInt("0x"+U[1])):T.length>0&&T.startsWith("\\")&&(T="string"==typeof n.value?n.value.charAt(0):n.command);break;case"mbin":case"mrel":case"minner":T=null!=(s=null!=(r=wg[P])?r:aw[P])?s:n.value;break;case"mopen":case"mclose":T+=n.value;break;case"mpunct":T=null!=(l=aw[P])?l:P;break;case"mop":"\u200b"!==n.value&&(T="",T+="\\operatorname"===P?na(n.body):null!=(c=n.value)?c:P,T+=" ");break;case"array":let q=n.array,B=n.environmentName,W=null!=(d={bmatrix:["[","]"],"bmatrix*":["[","]"]}[B])?d:["(",")"],G=[];for(let At of q){let ut=[];for(let et of At)ut.push(W[0]+na(et)+W[1]);G.push(ut.join(","))}let nt=null!=(h={bmatrix:["[","]"],"bmatrix*":["[","]"],cases:["{",":}"]}[B])?h:["(",")"];T=nt[0]+G.join(",")+nt[1];break;case"spacing":T=null!=(_=wg[P])?_:" ";break;case"enclose":T="("+na(n.body)+")";break;case"space":T=" ";break;case"msubsup":T="";break;case"macro":T=null!=(b=null!=(x=wg[P])?x:aw[P])?b:na(n.body)}if(!n.hasEmptyBranch("subscript")){T+="_";let q=na(n.subscript);T+=q.length>1?"("+q+")":q}if(!n.hasEmptyBranch("superscript")){T+="^";let q=na(n.superscript);T+=q.length>1?"("+q+")":q}return T}function DC(n){let o;if("body"===n.treeBranch)o={enclose:"cross out",leftright:"delimiter",surd:"square root",root:"math field",mop:"operator"}[n.type];else if("genfrac"===n.parent.type){if("above"===n.treeBranch)return"numerator";if("below"===n.treeBranch)return"denominator"}else"surd"===n.parent.type?"above"===n.treeBranch&&(o="index"):"superscript"===n.treeBranch?o="superscript":"subscript"===n.treeBranch&&(o="subscript");return o??"parent"}function jC(n,o,e,i){let a=n.offsetOf(o);if(a<e||a>i)return!1;if(!o.hasChildren)return!0;let r=n.offsetOf(o.firstChild);if(r>=e&&r<=i){let s=n.offsetOf(o.lastChild);if(s>=e&&s<=i)return!0}return!1}function rw(n,o,e){if(null==o||!o.hasChildren)return!1;let[i,a]=e,r=n.offsetOf(o.firstChild),s=n.offsetOf(o.lastChild);return r>=i&&r<=a&&s>=r&&s<=a}function jx(n,o){let e=n.at(n.position);for(;e&&!(Array.isArray(e.treeBranch)&&e.parent instanceof Lo);)e=e.parent;if(Array.isArray(e?.treeBranch)&&e?.parent instanceof Lo){let a,i=e.parent;switch(o){case"after row":i.addRowAfter(e.treeBranch[0]),a=n.offsetOf(i.getCell(e.treeBranch[0]+1,0)[0]);break;case"after column":if(i.maxColumns<=i.colCount)return void n.announce("plonk");i.addColumnAfter(e.treeBranch[1]),a=n.offsetOf(i.getCell(e.treeBranch[0],e.treeBranch[1]+1)[0]);break;case"before row":i.addRowBefore(e.treeBranch[0]),a=n.offsetOf(i.getCell(e.treeBranch[0]-1,0)[0]);break;case"before column":if(i.maxColumns<=i.colCount)return void n.announce("plonk");i.addColumnBefore(e.treeBranch[1]),a=n.offsetOf(i.getCell(e.treeBranch[0],e.treeBranch[1]-1)[0])}n.setSelection(a,a+1)}}function qC(n){return!!ko(n,{inputType:"insertText"})&&(jx(n,"after row"),Po(n,{inputType:"insertText"}),!0)}function FC(n){return!!ko(n,{inputType:"insertText"})&&(jx(n,"after column"),Po(n,{inputType:"insertText"}),!0)}function QC(n,o){let e=n.at(n.position);for(;e&&!(Array.isArray(e.treeBranch)&&e.parent instanceof Lo);)e=e.parent;if(Array.isArray(e?.treeBranch)&&e?.parent instanceof Lo){let r,i=e.parent,a=e.treeBranch;switch(o){case"row":if(i.rowCount>1){i.removeRow(a[0]);let s=i.getCell(Math.max(0,a[0]-1),a[1]);r=n.offsetOf(s[s.length-1])}break;case"column":if(i.colCount>i.minColumns){i.removeColumn(a[1]);let s=i.getCell(a[0],Math.max(0,a[1]-1));r=n.offsetOf(s[s.length-1])}}r&&n.setPositionHandlingPlaceholder(r)}}function Cg(n,o,e,i){var a,r,s,l,c,d;let h=e.parent;if(h&&e instanceof ur){let _=!i&&"forward"===o||"body"===i&&"backward"===o,x=n.offsetOf(_?e.firstChild:e.lastChild);return _?"?"!==e.rightDelim&&"."!==e.rightDelim?(e.leftDelim=".",e.isDirty=!0):(h.addChildrenAfter(e.removeBranch("body"),e),h.removeChild(e),x--):"?"!==e.leftDelim&&"."!==e.leftDelim?(e.rightDelim=".",e.isDirty=!0):(h.addChildrenAfter(e.removeBranch("body"),e),h.removeChild(e),x--),n.position=x,!0}if(h&&"surd"===e.type){if("forward"===o&&!i||"backward"===o&&"body"===i){let _=e.leftSibling;e.hasChildren&&h.addChildrenAfter(e.removeBranch("body"),e),h.removeChild(e),n.position=n.offsetOf(_)}else"forward"===o&&"body"===i?n.position=n.offsetOf(e):i||"backward"!==o?"above"===i&&(e.hasEmptyBranch("above")&&e.removeBranch("above"),n.position=n.offsetOf("backward"===o?e.leftSibling:e.body[0])):e.hasChildren?n.position=n.offsetOf(e.lastChild):(n.position=Math.max(0,n.offsetOf(e)-1),h.removeChild(e));return!0}if(h&&("box"===e.type||"enclose"===e.type)){let _=i&&"backward"===o||!i&&"forward"===o?e.leftSibling:e.lastChild;return h.addChildrenAfter(e.removeBranch("body"),e),h.removeChild(e),n.position=n.offsetOf(_),!0}if("genfrac"===e.type||"overunder"===e.type){if(!i)return!("overunder"===e.type&&e.hasEmptyBranch("body")||"genfrac"===e.type&&e.hasEmptyBranch("below")&&e.hasEmptyBranch("above")||(n.position=n.offsetOf("forward"===o?e.firstChild:e.lastChild),0));let _="numerator-denominator"===e.context.fractionNavigationOrder?"above":"below",x="above"===_?"below":"above";if(h&&("forward"===o&&i===_||"backward"===o&&i===x)){let b=e.removeBranch(_),T=e.removeBranch(x);return h.addChildrenAfter([...b,...T],e),h.removeChild(e),n.position=n.offsetOf(b.length>0?b[b.length-1]:T[0]),!0}return n.position=n.offsetOf("backward"===o?e.leftSibling:e),!0}if(e.isExtensibleSymbol||"msubsup"===e.type){if(!i&&"forward"===o)return!1;if(!i){if(e.subscript||e.superscript){let _="forward"===o?null!=(s=null==(a=e.superscript)?void 0:a[0])?s:null==(r=e.subscript)?void 0:r[0]:null!=(d=null==(l=e.subscript)?void 0:l[0].lastSibling)?d:null==(c=e.superscript)?void 0:c[0].lastSibling;return _&&(n.position=n.offsetOf(_)),!0}return!1}if(i&&e.hasEmptyBranch(i)&&e.removeBranch(i),!e.hasChildren){let _="forward"===o?n.offsetOf(e):Math.max(0,n.offsetOf(e)-1);return e.parent.removeChild(e),n.position=_,!0}if("superscript"===i)if("backward"===o){let _=n.offsetOf(e.firstChild)-1;n.position=_}else n.position=n.offsetOf(e.subscript?e.subscript[0]:e);else"subscript"===i&&(n.position="backward"===o&&e.superscript?n.offsetOf(e.superscript[0].lastSibling):"backward"===o?n.offsetOf(e.firstChild)-1:n.offsetOf(e));return!0}if("genfrac"===h?.type&&!i&&"first"!==e.type){let _=n.offsetOf(e.leftSibling);return h.removeChild(e),h.hasEmptyBranch("above")&&h.hasEmptyBranch("below")?(_=n.offsetOf(h.leftSibling),h.parent.removeChild(h),n.announce("delete",void 0,[h]),n.position=_,!0):(n.announce("delete",void 0,[e]),n.position=_,!0)}return!1}function Bc(n,o,e){let i=n.getAtoms(o);if(i.length>0&&i[0].parent){let a=i[0].parent.firstChild;"first"===a.type&&(a=a.rightSibling);let s=i[0];if("first"===s.type&&(s=s.rightSibling),s===a&&i[i.length-1]===i[i.length-1].parent.lastChild){let c=i[0].parent;"root"!==c.type&&(o=[n.offsetOf(c.leftSibling),n.offsetOf(c.rightSibling)])}if(1===i.length&&"placeholder"===i[0].type&&"genfrac"===i[0].parent.type){let c=i[0].parent,d="below"===i[0].treeBranch?"above":"below",h=n.offsetOf(c.leftSibling);return n.deferNotifications({content:!0,selection:!0,type:e},()=>{var _,x;let b=c.removeBranch(d);if(1===b.length&&"placeholder"===b[0].type)null==(x=c.parent)||x.removeChild(c),n.position=Math.max(0,h);else{let T=c.parent.addChildrenAfter(b,c);null==(_=c.parent)||_.removeChild(c),n.position=n.offsetOf(T)}})}}return n.deferNotifications({content:!0,selection:!0,type:e},()=>n.deleteAtoms(o))}function RC(n,o){let i,e=n.at(o);if(e){i=e.mode;let a=e.parent;for(;!i&&a;)a&&(i=a.mode),a=a.parent}return i}function Dd(n,o){!n||!o||(qa(n)?n.forEach(e=>Dd(e,o)):"object"==typeof n&&!n.style.color&&!n.style.backgroundColor&&!n.style.fontFamily&&!n.style.fontShape&&!n.style.fontSeries&&!n.style.fontSize&&!n.style.variant&&!n.style.variantStyle&&(n.applyStyle(o),Dd(n.body,o),Dd(n.above,o),Dd(n.below,o),Dd(n.subscript,o),Dd(n.superscript,o)))}function sw(n,o,e,i){function a(s,l){for(let c of r)if(c.style[s]!==l)return!1;return!0}if((o=n.normalizeRange(o))[0]===o[1])return!1;let r=n.getAtoms(o,{includeChildren:!0});"toggle"===i.operation&&(e.color&&a("color",e.color)&&(e.color="none",e.verbatimColor=void 0),e.backgroundColor&&a("backgroundColor",e.backgroundColor)&&(e.backgroundColor="none",e.verbatimBackgroundColor=void 0),e.fontFamily&&a("fontFamily",e.fontFamily)&&(e.fontFamily="none"),e.fontSeries&&a("fontSeries",e.fontSeries)&&(e.fontSeries="auto"),e.fontShape&&a("fontShape",e.fontShape)&&(e.fontShape="auto"),e.fontSize&&a("fontSize",e.fontSize)&&(e.fontSize=Fm));for(let s of r)s.applyStyle(e);return!0}function lw(n,o,e){if("text"!==n.at(o).mode)return o;let a,i="backward"===e?-1:1;if(rx.test(n.at(o).value)){let s,r=o;do{s="text"===n.at(r).mode&&rx.test(n.at(r).value),r+=i}while(n.at(r)&&s);a=n.at(r)?r-2*i:r-i}else if(/\s/.test(n.at(o).value)){let r=o;for(;n.at(r)&&"text"===n.at(r).mode&&/\s/.test(n.at(r).value);)r+=i;if(n.at(r)){let s=!0;do{s="text"===n.at(r).mode&&!/\s/.test(n.at(r).value),r+=i}while(n.at(r)&&s);a=n.at(r)?r-2*i:r-i}else a=r-i}else{let r=o;for(;n.at(r)&&"text"===n.at(r).mode&&!/\s/.test(n.at(r).value);)r+=i;a=n.at(r)?r:r-i;let s=!0;for(;n.at(r)&&s;)s="text"===n.at(r).mode&&/\s/.test(n.at(r).value),s&&(a=r),r+=i;a=n.at(r)?r-2*i:r-i}return a-(i>0?0:1)}function Bp(n,o,e){var i,a,r,s,l,c,d;let h=n.position;null!=(i=e?.extend)&&i||n.collapseSelection(o);let _=n.at(n.position);if("forward"===o&&("msubsup"===_.type?(_=_.rightSibling,_||(_=n.at(n.position+1))):_=n.at(n.position+1)),!_)return n.announce("plonk"),!1;let x=n.offsetOf(_);if(_ instanceof Dp)x=lw(n,x,o);else if(_ instanceof ha)if(_.isSuggestion)for(;_&&_ instanceof ha;)_.isSuggestion=!1,x=n.offsetOf(_),_=_.rightSibling;else if("forward"===o){if(_=_.rightSibling,!(_&&_ instanceof ha))return n.announce("plonk"),!1;for(;_&&_ instanceof ha&&/[a-zA-Z\*]/.test(_.value);)x=n.offsetOf(_),_=_.rightSibling}else{if(_=_.leftSibling,!(_&&_ instanceof ha))return n.announce("plonk"),!1;for(;_&&_ instanceof ha&&/[a-zA-Z\*]/.test(_.value);)x=n.offsetOf(_),_=_.leftSibling}else if("forward"===o&&"mopen"===_.type){let b=0;do{"mopen"===_.type?b+=1:"mclose"===_.type&&(b-=1),_=_.rightSibling}while(!_.isLastSibling&&0!==b);x=n.offsetOf(_.leftSibling)}else if("backward"===o&&"mclose"===_.type){let b=0;do{"mopen"===_.type?b+=1:"mclose"===_.type&&(b-=1),_=_.leftSibling}while(!_.isFirstSibling&&0!==b);x=n.offsetOf(_)}else if("backward"===o)if("first"===_.type)for(;x>0&&"first"===_.type;)x-=1,_=n.at(x);else{let b=_.type;"msubsup"===_.type&&(x=n.offsetOf(n.at(x).leftSibling)),x-=1;let T=null==(a=n.at(x))?void 0:a.type;for(;x>=0&&T===b;)"msubsup"===(null==(r=n.at(x))?void 0:r.type)?x=n.offsetOf(n.at(x).leftSibling):x-=1,T=n.at(x).type}else{let{type:b}=_,T=null==(s=n.at(x))?void 0:s.type,{lastOffset:P}=n;for(;x<=P&&(T===b||"msubsup"===T);){for(;"msubsup"===(null==(l=n.at(x).rightSibling)?void 0:l.type);)x=n.offsetOf(n.at(x).rightSibling);x+=1,T=null==(c=n.at(x))?void 0:c.type}x-=1}if(null!=(d=e?.extend)&&d){if(!n.setSelection(n.anchor,x))return n.announce("plonk"),!1}else{if(x===n.position)return n.announce("plonk"),!1;n.position=x}return n.announce("move",h),!0}function ju(n,o,e){var i,a,r,s,l,c,d,h;if(e=e??{extend:!1},"forward"!==o){let[x,b]=AC(n);void 0!==x&&void 0!==b&&n.deleteAtoms([x,b])}if("upward"===o)return function BG(n,o){var e,i,a,r;let s=null!=(e=o?.extend)&&e;s||n.collapseSelection("backward");let l=n.at(n.position),c=l;for(;c&&"below"!==c.treeBranch&&!(Array.isArray(c.treeBranch)&&c.parent instanceof Lo);)c=c.parent;if(Array.isArray(c?.treeBranch)&&c.parent instanceof Lo){let d=c.parent,h=Math.max(0,c.treeBranch[0]-1);qx(n,l,d.array[h][c.treeBranch[1]],s,"up")}else{if(!c){let d=!0;return n.suppressChangeNotifications||(d=null==(r=null==(a=n.mathfield.host)?void 0:a.dispatchEvent(new CustomEvent("move-out",{detail:{direction:"upward"},cancelable:!0,bubbles:!0,composed:!0})))||r),n.announce(d?"plonk":"line"),d}qx(n,l,null!=(i=c.parent.branch("above"))?i:c.parent.createBranch("above"),s,"up")}return!0}(n,e);if("downward"===o)return function zG(n,o){var e,i,a,r;let s=null!=(e=o?.extend)&&e;s||n.collapseSelection("forward");let l=n.at(n.position),c=l;for(;c&&"above"!==c.treeBranch&&!(Array.isArray(c.treeBranch)&&c.parent instanceof Lo);)c=c.parent;if(Array.isArray(c?.treeBranch)&&c.parent instanceof Lo){let d=c.parent,h=Math.min(d.array.length-1,c.treeBranch[0]+1);qx(n,l,d.array[h][c.treeBranch[1]],s,"down")}else{if(!c){let d=!0;return n.suppressChangeNotifications||(d=null==(r=null==(a=n.mathfield.host)?void 0:a.dispatchEvent(new CustomEvent("move-out",{detail:{direction:"downward"},cancelable:!0,bubbles:!0,composed:!0})))||r),n.announce(d?"plonk":"line"),d}qx(n,l,null!=(i=c.parent.branch("below"))?i:c.parent.createBranch("below"),s,"down")}return!0}(n,e);let _=n.position;if(e.extend)return n.extendSelection(o);if(n.selectionIsPlaceholder)return n.collapseSelection(o),ju(n,o);if(!n.collapseSelection(o)){let x=n.position+("forward"===o?1:-1),b=n.at(x);if(x>=0&&x<=n.lastOffset)if("forward"===o)if(b.inCaptureSelection){for(;!b.captureSelection;)b=b.parent;x=n.offsetOf(b)}else if(!b.isFirstSibling&&b.isLastSibling&&null!=(i=b.parent)&&i.skipBoundary){if(x+1!==n.lastOffset)return n.position=x,ju(n,"forward",e);x+=1}else null!=(a=b.parent)&&a.skipBoundary&&null!=(r=b.rightSibling)&&r.isLastSibling?x+=2:null!=(s=b.parent)&&s.skipBoundary&&"first"===b.type?x+=1:b instanceof ha&&b.isSuggestion&&(b.isSuggestion=!1);else if("backward"===o)if(null!=(l=b.parent)&&l.inCaptureSelection){for(;!b.captureSelection;)b=b.parent;x=Math.max(0,n.offsetOf(b.leftSibling))}else(b.skipBoundary||null!=(c=b.parent)&&c.skipBoundary&&"first"===b.type)&&(x=Math.max(0,n.position-2));if(x<0||x>n.lastOffset){let T=!0;return n.suppressChangeNotifications||(T=null==(h=null==(d=n.mathfield.host)?void 0:d.dispatchEvent(new CustomEvent("move-out",{detail:{direction:o},cancelable:!0,bubbles:!0,composed:!0})))||h),T&&n.announce("plonk"),T}n.setPositionHandlingPlaceholder(x)}return n.announce("move",_),!0}function qx(n,o,e,i,a){let r=pC(n.mathfield.getHTMLElement(o)).right,s=n.offsetOf(function UG(n,o,e){let i=1/0,a=0;for(;a<o.length;a++){let r=pC(n.getHTMLElement(o[a])).right,s=Math.abs(e-r);if(!(s<=i))break;i=s}return o[a-1]}(n.mathfield,e,r));if(i){let d,[l,c]=n.selection.ranges[0];d=s<("up"===a?l:c)?{ranges:[[s,c]],direction:"backward"}:{ranges:[[l,s]],direction:"forward"},n.setSelection(d)}else n.setPositionHandlingPlaceholder(s);n.announce(`move ${a}`)}function UC(n){let o=n.position,e=n.at(o).parent;return e&&"root"!==e.type?(n.position=n.offsetOf(e),n.announce("move",o),!0):(n.announce("plonk"),!1)}function BC(n){var o;if(n.collapseSelection(),function JG(n){let o=0,e=n.at(n.position),i=!1;for(;e;)(!e.hasEmptyBranch("superscript")||!e.hasEmptyBranch("subscript"))&&(o+=1),e.hasEmptyBranch("superscript")?e.hasEmptyBranch("subscript")||(i=!1):i=!0,e=e.parent;return i?o:0}(n)>=n.mathfield.options.scriptDepth[1])return n.announce("plonk"),!1;let e=n.at(n.position);return void 0===e.subsupPlacement&&("msubsup"!==(null==(o=e.rightSibling)?void 0:o.type)&&e.parent.addChildAfter(new dg(n.mathfield,{style:e.computedStyle}),e),e=e.rightSibling),e.createBranch("superscript"),n.setSelection(n.getSiblingsRange(n.offsetOf(e.superscript[0]))),!0}function zC(n){var o;if(n.collapseSelection(),function HG(n){let o=0,e=n.at(n.position),i=!1;for(;e;)(!e.hasEmptyBranch("superscript")||!e.hasEmptyBranch("subscript"))&&(o+=1),e.hasEmptyBranch("superscript")?e.hasEmptyBranch("subscript")||(i=!0):i=!1,e=e.parent;return i?o:0}(n)>=n.mathfield.options.scriptDepth[0])return n.announce("plonk"),!1;let e=n.at(n.position);return void 0===e.subsupPlacement&&("msubsup"!==(null==(o=n.at(n.position+1))?void 0:o.type)&&e.parent.addChildAfter(new dg(n.mathfield,{style:n.at(n.position).computedStyle}),e),e=n.at(n.position+1)),e.createBranch("subscript"),n.setSelection(n.getSiblingsRange(n.offsetOf(e.subscript[0]))),!0}function JC(n,o,e=!0){var i,a;let r="forward"===o?1:-1;"placeholder"===n.at(n.anchor).type&&ju(n,o);let s=n.getAllAtoms(Math.max(n.position+r,0));"backward"===o&&s.reverse();let l=s.filter(_=>"placeholder"===_.type||_.treeDepth>2&&_.isFirstSibling&&_.isLastSibling);if(0===l.length){if(!e||null!=(a=null==(i=n.mathfield.host)?void 0:i.dispatchEvent(new CustomEvent("focus-out",{detail:{direction:o},cancelable:!0,bubbles:!0,composed:!0})))&&!a)return n.announce("plonk"),!1;let _=function GG(){function o(c){return!(!function e(c){return!(c.disabled||"hidden"===c.type&&"INPUT"===c.tagName.toUpperCase()||function l(c){if(!Ds()||c===document.activeElement||c.contains(document.activeElement))return!1;if("hidden"===getComputedStyle(c).visibility)return!0;let d=c.getBoundingClientRect();if(0===d.width||0===d.height)return!0;for(;c;){if("none"===getComputedStyle(c).display)return!0;c=c.parentElement}return!1}(c))}(c)||function a(c){return"INPUT"===c.tagName.toUpperCase()&&"radio"===c.type&&!function s(c){var d;if(!c.name)return!0;let _=function r(c,d){for(let h of c)if(h.checked&&h.form===d)return h;return null}((null!=(d=c.form)?d:c.ownerDocument).querySelectorAll('input[type="radio"][name="'+c.name+'"]'),c.form);return!_||_===c}(c)}(c)||i(c)<0)}function i(c){var d;let h=Number.parseInt(null!=(d=c.getAttribute("tabindex"))?d:"NaN",10);return Number.isNaN(h)?"true"===c.contentEditable||("AUDIO"===c.nodeName||"VIDEO"===c.nodeName)&&null===c.getAttribute("tabindex")?0:c.tabIndex:h}return Ds()?function n(c){let d=[],h=[];return[...c.querySelectorAll('input, select, textarea, a[href], button,\n        [tabindex], audio[controls], video[controls],\n        [contenteditable]:not([contenteditable="false"]), details>summary')].filter(o).forEach((_,x)=>{let b=i(_);0===b?d.push(_):h.push({documentOrder:x,tabIndex:b,node:_})}),h.sort((_,x)=>_.tabIndex===x.tabIndex?_.documentOrder-x.documentOrder:_.tabIndex-x.tabIndex).map(_=>_.node).concat(d)}(document.body):[]}();if(!document.activeElement||1===_.length)return n.announce("plonk"),!1;let x=_.indexOf(document.activeElement)+r;return!!(document.activeElement instanceof ww&&c(document.activeElement,o,r)||(x<0&&(x=_.length-1),x>=_.length&&(x=0),_[x]instanceof ww&&c(_[x],o,r)))||(_[x].focus(),0!==x||(n.announce("plonk"),!1))}function c(_,x,b){var T,P,U;let q=[...null!=(P=null==(T=_.shadowRoot)?void 0:T.querySelectorAll("math-field"))?P:[]];if(q.length){let B=null==(U=_.shadowRoot)?void 0:U.activeElement,W=q.indexOf(B),G=W+b;if(W<0&&"backward"===x&&(G=q.length-1),G>=0&&G<q.length)return q[G].focus(),!0}return!1}let d=n.position,h=n.offsetOf(l[0]);return"placeholder"===l[0].type?n.setSelection(h-1,h):n.position=h,n.announce("move",d),!0}function HC(n){var o,e,i,a,r,s;if("text"===RC(n,n.position)){let l=Math.min(n.anchor,n.position),c=Math.max(n.anchor,n.position),d=!1;for(;!d&&l>0;){let h=n.at(l);"text"===h.mode&&rx.test(h.value)?l-=1:d=!0}for(d=!1;!d&&c<=n.lastOffset;){let h=n.at(c);"text"===h.mode&&rx.test(h.value)?c+=1:d=!0}if(d&&(c-=1),l>=c)return n.setSelection(c-1,c),!0;n.setSelection(l,c)}else{let l=n.at(n.position);if(l.isDigit()){let c=Math.min(n.anchor,n.position),d=Math.max(n.anchor,n.position);for(;null!=(o=n.at(c))&&o.isDigit();)c-=1;for(;null!=(e=n.at(d))&&e.isDigit();)d+=1;n.setSelection(c,d-1)}else if(l.style.variant||l.style.variantStyle){let c=Math.min(n.anchor,n.position),d=Math.max(n.anchor,n.position),h=null==(i=n.at(c))?void 0:i.style;for(;h&&h.variant===l.style.variant&&h.variantStyle===l.style.variantStyle;)c-=1,h=null==(a=n.at(c))?void 0:a.style;for(h=null==(r=n.at(d))?void 0:r.style;h&&h.variant===l.style.variant&&h.variantStyle===l.style.variantStyle;)d+=1,h=null==(s=n.at(d))?void 0:s.style;n.setSelection(c,d-1)}else n.setSelection(n.offsetOf(l.firstSibling),n.offsetOf(l.lastSibling))}return!0}Yr({addRowAfter:qC,addColumnAfter:FC,addRowBefore:function NG(n){return!!ko(n,{inputType:"insertText"})&&(jx(n,"before row"),Po(n,{inputType:"insertText"}),!0)},addColumnBefore:function ZG(n){return!!ko(n,{inputType:"insertText"})&&(jx(n,"before column"),Po(n,{inputType:"insertText"}),!0)},removeRow:function DG(n){return!!ko(n,{inputType:"deleteContent"})&&(QC(n,"row"),Po(n,{inputType:"deleteContent"}),!0)},removeColumn:function jG(n){return!!ko(n,{inputType:"deleteContent"})&&(QC(n,"column"),Po(n,{inputType:"deleteContent"}),!0)}},{target:"model",category:"array-edit"}),Yr({deleteAll:n=>ko(n,{inputType:"deleteContent"})&&Bc(n,[0,-1],"deleteContent"),deleteForward:n=>function FG(n){return!!ko(n,{inputType:"deleteContentForward"})&&(n.selectionIsCollapsed?n.deferNotifications({content:!0,selection:!0,type:"deleteContentForward"},()=>{var o,e;let i=n.at(n.position).rightSibling;if(i&&Cg(n,"forward",i))return;if(i){if(n.at(n.position).isLastSibling&&Cg(n,"forward",i.parent,i.treeBranch))return}else{if(i=n.at(n.position),i.isLastSibling&&Cg(n,"forward",i.parent,i.treeBranch))return;i=void 0}if(n.position===n.lastOffset||!i)return void n.announce("plonk");i.parent.removeChild(i);let a=null==(o=n.at(n.position))?void 0:o.rightSibling;for(;"msubsup"===a?.type;)a.parent.removeChild(a),a=null==(e=n.at(n.position))?void 0:e.rightSibling;n.announce("delete",void 0,[i])}):Bc(n,gl(n.selection),"deleteContentForward"))}(n),deleteBackward:n=>function qG(n){return!!ko(n,{inputType:"deleteContentBackward"})&&(n.selectionIsCollapsed?n.deferNotifications({content:!0,selection:!0,type:"deleteContentBackward"},()=>{let o=n.at(n.position);if(!o||!Cg(n,"backward",o)){if(null!=o&&o.isFirstSibling){if(Cg(n,"backward",o.parent,o.treeBranch))return;o=null}if(!o)return void n.announce("plonk");n.position=n.offsetOf(o.leftSibling),o.parent.removeChild(o),n.announce("delete",void 0,[o])}}):Bc(n,gl(n.selection),"deleteContentBackward"))}(n),deleteNextWord:n=>ko(n,{inputType:"deleteWordForward"})&&Bc(n,[n.anchor,lw(n,n.position,"forward")],"deleteWordForward"),deletePreviousWord:n=>ko(n,{inputType:"deleteWordBackward"})&&Bc(n,[n.anchor,lw(n,n.position,"backward")],"deleteWordBackward"),deleteToGroupStart:n=>ko(n,{inputType:"deleteSoftLineBackward"})&&Bc(n,[n.anchor,n.offsetOf(n.at(n.position).firstSibling)],"deleteSoftLineBackward"),deleteToGroupEnd:n=>ko(n,{inputType:"deleteSoftLineForward"})&&Bc(n,[n.anchor,n.offsetOf(n.at(n.position).lastSibling)],"deleteSoftLineForward"),deleteToMathFieldStart:n=>ko(n,{inputType:"deleteHardLineBackward"})&&Bc(n,[n.anchor,0],"deleteHardLineBackward"),deleteToMathFieldEnd:n=>ko(n,{inputType:"deleteHardLineForward"})&&Bc(n,[n.anchor,-1],"deleteHardLineForward")},{target:"model",category:"delete"}),Yr({moveToOpposite:n=>{let e=n.at(n.position),{parent:i}=e;if(!i)return n.announce("plonk"),!1;let r,a=e.treeBranch;return"string"==typeof a&&(r={superscript:"subscript",subscript:"superscript",above:"below",below:"above"}[a]),r?(i.branch(r)||i.createBranch(r),n.setSelection(n.getBranchRange(n.offsetOf(i),r))):e.subsupPlacement?zC(n):BC(n)},moveBeforeParent:n=>{let{parent:o}=n.at(n.position);return o?(n.position=n.offsetOf(o),!0):(n.announce("plonk"),!1)},moveAfterParent:n=>UC(n),moveToNextPlaceholder:n=>JC(n,"forward"),moveToPreviousPlaceholder:n=>JC(n,"backward"),moveToNextChar:n=>ju(n,"forward"),moveToPreviousChar:n=>ju(n,"backward"),moveUp:n=>ju(n,"upward"),moveDown:n=>ju(n,"downward"),moveToNextWord:n=>Bp(n,"forward"),moveToPreviousWord:n=>Bp(n,"backward"),moveToGroupStart:n=>{let o=n.offsetOf(n.at(n.position).firstSibling);return o===n.position?(n.announce("plonk"),!1):(n.position=o,!0)},moveToGroupEnd:n=>{let o=n.offsetOf(n.at(n.position).lastSibling);return o===n.position?(n.announce("plonk"),!1):(n.position=o,!0)},moveToMathfieldStart:n=>0===n.position?(n.announce("plonk"),!1):(n.position=0,!0),moveToMathfieldEnd:n=>n.position===n.lastOffset?(n.announce("plonk"),!1):(n.position=n.lastOffset,!0),moveToSuperscript:n=>BC(n),moveToSubscript:n=>zC(n)},{target:"model",category:"selection-anchor"}),Yr({selectGroup:n=>{let o=HC(n);return o||n.announce("plonk"),o},selectAll:n=>n.setSelection(0,n.lastOffset),extendSelectionForward:n=>{let o=n.extendSelection("forward");return o||n.announce("plonk"),o},extendSelectionBackward:n=>{let o=n.extendSelection("backward");return o||n.announce("plonk"),o},extendToNextWord:n=>Bp(n,"forward",{extend:!0}),extendToPreviousWord:n=>Bp(n,"backward",{extend:!0}),extendSelectionUpward:n=>ju(n,"upward",{extend:!0}),extendSelectionDownward:n=>ju(n,"downward",{extend:!0}),extendToNextBoundary:n=>Bp(n,"forward",{extend:!0}),extendToPreviousBoundary:n=>Bp(n,"backward",{extend:!0}),extendToGroupStart:n=>{let o=n.setSelection(n.anchor,n.offsetOf(n.at(n.position).firstSibling));return o||n.announce("plonk"),o},extendToGroupEnd:n=>{let o=n.setSelection(n.anchor,n.offsetOf(n.at(n.position).lastSibling));return o||n.announce("plonk"),o},extendToMathFieldStart:n=>{let o=n.setSelection(n.anchor,0);return o||n.announce("plonk"),o},extendToMathFieldEnd:n=>{let o=n.setSelection(n.anchor,n.lastOffset);return o||n.announce("plonk"),o}},{target:"model",category:"selection-extend"});var zp=class{constructor(n){var o,e;this.preventOverlayClose=null!=(o=n?.preventOverlayClose)&&o,this.translucent=null!=(e=n?.translucent)&&e,this.state="closed"}get element(){if(this._element)return this._element;let n=document.createElement("div");return n.setAttribute("role","presentation"),n.style.position="fixed",n.style.contain="content",n.style.top="0",n.style.left="0",n.style.right="0",n.style.bottom="0",n.style.zIndex="var(--scrim-zindex, 10099)",n.style.outline="none",this.translucent?(n.style.background="rgba(255, 255, 255, .2)",n.style.backdropFilter="contrast(40%)"):n.style.background="transparent",this._element=n,n}open(n){var o;if("closed"!==this.state)return;this.state="opening",this.savedActiveElement=GC();let{element:e}=this;(null!=(o=n?.root)?o:document.body).appendChild(e),e.addEventListener("click",this),document.addEventListener("touchmove",this,!1),document.addEventListener("scroll",this,!1);let i=window.innerWidth-document.documentElement.clientWidth;this.savedMarginRight=document.body.style.marginRight,this.savedOverflow=document.body.style.overflow,document.body.style.overflow="hidden";let a=Number.parseFloat(getComputedStyle(document.body).marginRight);document.body.style.marginRight=`${a+i}px`,null!=n&&n.child&&e.append(n.child),this.state="open"}close(){var n,o,e,i;if("open"!==this.state)return;this.state="closing","function"==typeof this.onClose&&this.onClose();let{element:a}=this;a.removeEventListener("click",this),document.removeEventListener("touchmove",this,!1),document.removeEventListener("scroll",this,!1),a.remove(),document.body.style.overflow=null!=(n=this.savedOverflow)?n:"",document.body.style.marginRight=null!=(o=this.savedMarginRight)?o:"",GC()!==this.savedActiveElement&&(null==(i=null==(e=this.savedActiveElement)?void 0:e.focus)||i.call(e)),a.innerHTML="",this.state="closed"}handleEvent(n){this.preventOverlayClose||(n.target===this._element&&"click"===n.type||n.target===document&&("touchmove"===n.type||"scroll"===n.type))&&(this.close(),n.preventDefault(),n.stopPropagation())}};function GC(){var n;let o=document.activeElement;for(;null!=(n=o?.shadowRoot)&&n.activeElement;)o=o.shadowRoot.activeElement;return o}var $G=new Set(["Backquote","Digit0","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","Minus","Equal","IntlYen","KeyQ","KeyW","KeyE","KeyR","KeyT","KeyY","KeyU","KeyI","KeyO","KeyP","BracketLeft","BracketRight","Backslash","KeyA","KeyS","KeyD","KeyF","KeyG","KeyH","KeyJ","KeyK","KeyL","Semicolon","Quote","IntlBackslash","KeyZ","KeyX","KeyC","KeyV","KeyB","KeyN","KeyM","Comma","Period","Slash","IntlRo","Space","Numpad0","Numpad1","Numpad2","Numpad3","Numpad4","Numpad5","Numpad6","Numpad7","Numpad8","Numpad9","NumpadAdd","NumpadComma","NumpadDecimal","NumpadDivide","NumpadEqual","NumpadHash","NumpadMultiply","NumpadParenLeft","NumpadParenRight","NumpadStar","NumpadSubstract"]);function $C(n){return!n.ctrlKey&&!n.metaKey&&"Dead"!==n.key&&(""===n.code||$G.has(n.code))}function YC(n){n=function iG(n){if(n.code)return n;let o=Object.entries(xg().mapping),e=!1,i=!1,a="";for(let r=0;r<4;r++){for(let[s,l]of o)if(l[r]===n.key){a=s,3===r?(e=!0,i=!0):2===r?e=!0:1===r&&(i=!0);break}if(a)break}return new KeyboardEvent(n.type,ei(Ee({},n),{altKey:e,shiftKey:i,code:a}))}(n);let o=[];return n.ctrlKey&&o.push("ctrl"),n.metaKey&&o.push("meta"),n.altKey&&o.push("alt"),n.shiftKey&&o.push("shift"),0===o.length?"["+n.code+"]":(o.push("["+n.code+"]"),o.join("+"))}function Fx(n){var o;if(!n)return"";let e;return"Unidentified"===n.key&&n.target&&(e=n.target.value),e=null!=(o=e??n.key)?o:n.code,/^(Dead|Return|Enter|Tab|Escape|Delete|PageUp|PageDown|Home|End|Help|ArrowLeft|ArrowRight|ArrowUp|ArrowDown)$/.test(e)&&(e=""),e}var cw,KC=".ML__keyboard{--hue:206;--keyboard-background:rgba(209, 213, 217);--keyboard-text:#000;--keyboard-text-active:var(--primary, hsl(var(--hue), 40%, 50%));--keyboard-background-border:#ddd;--keycap-background:white;--keycap-background-active:#e5e5e5;--keycap-background-border:#e5e6e9;--keycap-background-border-bottom:#8d8f92;--keycap-text:#000;--keycap-text-active:#fff;--keycap-secondary-text:#000;--keycap-modifier-background:#b9bdc7;--keycap-modifier-border:#c5c9d0;--keycap-modifier-border-bottom:#989da6;--keyboard-alternate-background:#fff;--keyboard-alternate-background-active:var(--primary, hsl(var(--hue), 40%, 50%));--keyboard-alternate-text:var(--keycap-text, #000);--keyboard-alternate-text-active:#fff;--keyboard-alternate-key-length:70px;--keyboard-alternate-key-font-size:30px;--keyboard-alternate-key-aside-font-size:12px;--keyboard-height:calc(276px + env(safe-area-inset-bottom, 0));--keycap-height:52px;--keycap-font-size:20px;--keycap-small-font-size:calc(var(--keycap-font-size) * .8);--keycap-extra-small-font-size:calc(var(--keycap-font-size) / 1.42);--keycap-tt-font-size:calc(var(--keycap-font-size) * 1.5);position:fixed;top:0;left:0;height:100%;width:100%;z-index:var(--keyboard-zindex, 105);pointer-events:none}.ML__keyboard.is-visible .ML__keyboard--plate{transform:translate(0, calc(-1 * var(--keyboard-height, 276px)));opacity:1;visibility:visible;transition-timing-function:cubic-bezier(.4, 0, 1, 1)}.ML__keyboard.alternate-keys{visibility:hidden;max-width:286px;background-color:var(--keyboard-alternate-background);text-align:center;border-radius:6px;position:fixed;bottom:auto;top:0;box-sizing:content-box;transform:none;z-index:calc(var(--keyboard-zindex, 105) + 1);display:flex;flex-direction:row;justify-content:center;align-content:center;box-shadow:0 14px 28px rgba(0,0,0,0.25),0 10px 10px rgba(0,0,0,0.22);transition:none}@media (max-width: 414px){.ML__keyboard.alternate-keys{max-width:320px}}.ML__keyboard.alternate-keys.is-visible{visibility:visible}.ML__keyboard.alternate-keys.compact{--keyboard-alternate-key-length:50px;--keyboard-alternate-key-font-size:24px;--keyboard-alternate-key-aside-font-size:10px}.ML__keyboard.alternate-keys ul{list-style:none;margin:3px;padding:0;display:flex;flex-flow:row wrap-reverse;justify-content:center}.ML__keyboard.alternate-keys ul>li{display:flex;flex-flow:column;align-items:center;justify-content:center;font-size:var(--keyboard-alternate-key-font-size);height:var(--keyboard-alternate-key-length);width:var(--keyboard-alternate-key-length);box-sizing:border-box;margin:0;background:transparent;border:1px solid transparent;border-radius:5px;pointer-events:all;cursor:pointer;color:var(--keyboard-alternate-text);fill:currentColor}@media (max-height:412px){.ML__keyboard.alternate-keys ul>li{font-size:24px;height:50px;width:50px}}.ML__keyboard.alternate-keys ul>li .ML__mathlive{pointer-events:none}.ML__keyboard.alternate-keys ul>li:hover,.ML__keyboard.alternate-keys ul>li.is-pressed,.ML__keyboard.alternate-keys ul>li.is-active{background:var(--keyboard-alternate-background-active);color:var(--keyboard-alternate-text-active)}.ML__keyboard.alternate-keys ul>li.small{font-size:var(--keycap-small-font-size, 16px)}.ML__keyboard.alternate-keys ul>li.small-button{width:42px;height:42px;margin:2px;background:#fbfbfb}.ML__keyboard.alternate-keys ul>li.small-button:hover{background:var(--keyboard-alternate-background-active)}.ML__keyboard.alternate-keys ul>li.box>div,.ML__keyboard.alternate-keys ul>li.box>span{border:1px dashed rgba(0,0,0,0.24)}.ML__keyboard.alternate-keys ul>li .warning{min-height:60px;min-width:60px;background:#cd0030;color:white;padding:5px;display:flex;align-items:center;justify-content:center;border-radius:5px}.ML__keyboard.alternate-keys ul>li .warning:hover,.ML__keyboard.alternate-keys ul>li .warning.is-pressed,.ML__keyboard.alternate-keys ul>li .warning.is-active{background:red}.ML__keyboard.alternate-keys ul>li .warning svg.svg-glyph{width:50px;height:50px}.ML__keyboard.alternate-keys ul>li aside{font-size:var(--keyboard-alternate-key-aside-font-size);line-height:12px;opacity:.78;padding-top:2px}.ML__keyboard .ML__keyboard--plate{position:absolute;left:0;bottom:calc(-1 * var(--keyboard-height, 276px));width:100%;margin:0;padding-bottom:env(safe-area-inset-bottom, 0);padding-top:5px;transform:translate(0, 0);opacity:0;visibility:hidden;transition:.28s cubic-bezier(0, 0, .2, 1);transition-property:transform, opacity;touch-action:none;-webkit-user-select:none;user-select:none;pointer-events:all;background-color:var(--keyboard-background);border-top:1px solid var(--keyboard-background-border);font-family:system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI','Roboto','Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue',sans-serif;font-size:16px;font-weight:400;box-sizing:border-box;text-shadow:none;box-shadow:0 3px 6px rgba(0,0,0,0.16),0 3px 6px rgba(0,0,0,0.23)}.ML__keyboard .ML__keyboard--plate .tex{font-family:'KaTeX_Math',KaTeX_Main,'Cambria Math','Asana Math',OpenSymbol,Symbola,STIX,Times,serif !important}.ML__keyboard .ML__keyboard--plate .tex-math{font-family:KaTeX_Math,'Cambria Math','Asana Math',OpenSymbol,Symbola,STIX,Times,serif !important}.ML__keyboard .ML__keyboard--plate .tt{font-family:'IBM Plex Mono','Source Code Pro',Consolas,'Roboto Mono',Menlo,'Bitstream Vera Sans Mono','DejaVu Sans Mono',Monaco,Courier,monospace !important;font-size:var(--keycap-tt-font-size, 30px);font-weight:400}.ML__keyboard .ML__keyboard--plate>div.keyboard-layer{display:none;outline:none}.ML__keyboard .ML__keyboard--plate>div.keyboard-layer.is-visible{display:flex;flex-flow:column}.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar{align-self:center;display:flex;flex-flow:row;justify-content:space-between;width:100%;min-width:736px;max-width:766px}.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar svg{height:20px;width:20px}@media (max-width: 1024px){.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar{min-width:556px}}@media (max-width: 744px){.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar{width:365px;min-width:365px;max-width:100vw}.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar svg{height:13px;width:17px}}.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar>.left{position:relative;display:flex;justify-content:flex-start;flex-flow:row}.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar>.right{display:flex;justify-content:flex-end;flex-flow:row}.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar>div>div{display:flex;align-items:baseline;justify-content:center;color:var(--keyboard-text);fill:currentColor;background:0;font-size:110%;padding:4px 15px;cursor:pointer;min-height:0;width:max-content;border:none;padding-left:10px;padding-right:10px;margin-top:7px;margin-bottom:8px;margin-left:4px;margin-right:4px;box-shadow:none;border-bottom:2px solid transparent}.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar>div>div.disabled svg,.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar>div>div.disabled:hover svg,.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar>div>div.disabled.is-pressed svg{color:var(--keyboard-text);opacity:.2}@media (max-width: 414px){.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar>div>div{font-size:100%;padding:0 6px 0 0}}@media (max-width: 744px){.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar>div>div{padding-left:4px;padding-right:4px;font-size:90%}}.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar>div>div:hover,.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar>div>div:active,.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar>div>div.is-pressed,.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar>div>div.is-active{color:var(--keyboard-text-active)}.ML__keyboard .ML__keyboard--plate>div>div.keyboard-toolbar>div>div.selected{color:var(--keyboard-text-active);border-bottom-color:var(--keyboard-text-active);padding-bottom:0}.ML__keyboard .ML__keyboard--plate [data-tooltip]{position:relative}.ML__keyboard .ML__keyboard--plate [data-tooltip]::after{position:absolute;display:inline-table;content:attr(data-tooltip);top:inherit;bottom:100%;width:max-content;max-width:200px;padding:8px 8px;background:#616161;color:#fff;text-align:center;z-index:2;box-shadow:0 2px 2px 0 rgba(0,0,0,0.14),0 1px 5px 0 rgba(0,0,0,0.12),0 3px 1px -2px rgba(0,0,0,0.2);border-radius:2px;font-family:system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI','Roboto','Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue',sans-serif;font-weight:400;font-size:12px;transition:all .15s cubic-bezier(.4, 0, 1, 1) 1s;opacity:0;transform:scale(.5)}@media (max-width: 744px){.ML__keyboard .ML__keyboard--plate [data-tooltip]::after{padding:8px 16px;font-size:16px}}.ML__keyboard .ML__keyboard--plate [data-tooltip]:hover{position:relative}.ML__keyboard .ML__keyboard--plate [data-tooltip]:hover::after{opacity:1;transform:scale(1)}.ML__keyboard .ML__keyboard--plate div .rows{border:0;border-collapse:separate;clear:both;margin:auto;display:flex;flex-flow:column;align-items:center}.ML__keyboard .ML__keyboard--plate div .rows>ul{display:flex;flex-flow:row;max-width:100vw;list-style:none;height:var(--keycap-height, 52px);margin:0 0 3px 0;padding:0}.ML__keyboard .ML__keyboard--plate div .rows>ul>li{display:flex;flex-flow:column;align-items:center;justify-content:center;--max-width:100px;--margin:6px;margin-right:var(--margin);width:calc(min(var(--max-width), 10vw) - var(--margin));height:var(--keycap-height, 52px);box-sizing:border-box;padding:0;vertical-align:top;text-align:center;float:left;color:var(--keycap-text);fill:currentColor;font-size:var(--keycap-font-size, 20px);background:var(--keycap-background);border:1px solid var(--keycap-background-border);border-bottom-color:var(--keycap-background-border-bottom);border-radius:5px;cursor:pointer;position:relative;overflow:hidden;-webkit-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent}.ML__keyboard .ML__keyboard--plate div .rows>ul>li .ML__mathlive{pointer-events:none}.ML__keyboard .ML__keyboard--plate div .rows>ul>li:last-child{margin-right:0}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.small{font-size:var(--keycap-small-font-size, 16px)}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.tt{color:var(--keyboard-text-active)}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.bottom{justify-content:flex-end}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.left{align-items:flex-start;padding-left:4px}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.right{align-items:flex-end;padding-right:4px}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.w0{width:0}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.w5{width:calc(min(var(--max-width), 10vw) / 2 - var(--margin))}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.w15{width:calc(15 * min(var(--max-width), 10vw) / 10 - var(--margin))}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.w20{width:calc(20 * min(var(--max-width), 10vw) / 10 - var(--margin))}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.w50{width:calc(50 * min(var(--max-width), 10vw) / 10 - var(--margin))}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.separator{background:transparent;border:none;pointer-events:none}.ML__keyboard .ML__keyboard--plate div .rows>ul>li svg.svg-glyph{padding:8px 0;width:20px;height:20px}.ML__keyboard .ML__keyboard--plate div .rows>ul>li .warning{height:25px;width:25px;min-height:25px;min-width:25px;background:#cd0030;color:white;border-radius:100%;padding:5px;display:flex;align-items:center;justify-content:center;margin-bottom:-2px}.ML__keyboard .ML__keyboard--plate div .rows>ul>li .warning svg.svg-glyph{width:16px;height:16px}@media (max-width: 744px){.ML__keyboard .ML__keyboard--plate div .rows>ul>li .warning{height:16px;width:16px;min-height:16px;min-width:16px}.ML__keyboard .ML__keyboard--plate div .rows>ul>li .warning svg.svg-glyph{width:14px;height:14px}}@media (max-width: 1024px){.ML__keyboard .ML__keyboard--plate div .rows>ul>li.if-wide{display:none}}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.tex-math{font-size:25px}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.is-pressed{background:var(--keycap-background-active);color:var(--keyboard-text-active)}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.keycap.is-active,.ML__keyboard .ML__keyboard--plate div .rows>ul>li.action.is-active{transform:translateY(calc(-0.2 * var(--keycap-height, 52px))) scale(1.4, 1.4);z-index:calc(var(--keyboard-zindex, 105) - 5);color:var(--keyboard-text-active)}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.modifier.is-active{background:var(--keyboard-text-active);color:var(--keycap-text-active)}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.action.font-glyph,.ML__keyboard .ML__keyboard--plate div .rows>ul>li.modifier.font-glyph{font-size:18px}@media (max-width: 744px){.ML__keyboard .ML__keyboard--plate div .rows>ul>li.action.font-glyph,.ML__keyboard .ML__keyboard--plate div .rows>ul>li.modifier.font-glyph{font-size:16px}}@media (max-width: 744px){.ML__keyboard .ML__keyboard--plate div .rows>ul>li.fnbutton{font-size:12px}}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.bigfnbutton{font-size:var(--keycap-extra-small-font-size, 14px)}@media (max-width: 744px){.ML__keyboard .ML__keyboard--plate div .rows>ul>li.bigfnbutton{font-size:calc(var(--keycap-extra-small-font-size, 14px) / 1.55)}}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.modifier,.ML__keyboard .ML__keyboard--plate div .rows>ul>li.action{background-color:var(--keycap-modifier-background);border-color:var(--keycap-modifier-border);border-bottom-color:var(--keycap-modifier-border-bottom);font-size:65%;font-weight:100}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.modifier.selected,.ML__keyboard .ML__keyboard--plate div .rows>ul>li.action.selected{color:var(--keyboard-text-active)}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.modifier.selected:hover,.ML__keyboard .ML__keyboard--plate div .rows>ul>li.action.selected:hover,.ML__keyboard .ML__keyboard--plate div .rows>ul>li.modifier.selected:active,.ML__keyboard .ML__keyboard--plate div .rows>ul>li.action.selected:active,.ML__keyboard .ML__keyboard--plate div .rows>ul>li.modifier.selected.is-pressed,.ML__keyboard .ML__keyboard--plate div .rows>ul>li.action.selected.is-pressed,.ML__keyboard .ML__keyboard--plate div .rows>ul>li.modifier.selected.is-active,.ML__keyboard .ML__keyboard--plate div .rows>ul>li.action.selected.is-active{color:white}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.keycap.w50{font-size:80%;padding-top:10px;font-weight:100}.ML__keyboard .ML__keyboard--plate div .rows>ul>li small{color:var(--keycap-secondary-text)}@media (max-width: 744px){.ML__keyboard .ML__keyboard--plate div .rows>ul>li small{font-size:9px}}.ML__keyboard .ML__keyboard--plate div .rows>ul>li aside{font-family:system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI','Roboto','Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue',sans-serif;font-size:10px;line-height:10px;color:var(--keycap-secondary-text)}@media (max-width: 744px){.ML__keyboard .ML__keyboard--plate div .rows>ul>li aside{display:none}}@media (max-width: 768px){.ML__keyboard .ML__keyboard--plate div .rows>ul>li{--margin:2px;--max-width:74px;--width:34px;min-width:34px}}@media (max-width: 414px){.ML__keyboard .ML__keyboard--plate div .rows>ul{height:40px}.ML__keyboard .ML__keyboard--plate div .rows>ul>li{width:calc(10vw - 2px);height:40px}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.w5{width:calc(5vw - 2px)}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.w15{width:calc(15vw - 2px)}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.w20{width:calc(20vw - 2px)}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.w50{width:calc(50vw - 2px)}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.separator{width:2px;min-width:2px}.ML__keyboard .ML__keyboard--plate div .rows>ul>li.modifier,.ML__keyboard .ML__keyboard--plate div .rows>ul>li.action{font-size:65%}}@media (prefers-color-scheme:dark){.ML__keyboard{--hue:206;--keyboard-background:#0c0c0c;--keyboard-text:#f0f0f0;--keyboard-text-active:hsl(var(--hue), 100%, 60%);--keyboard-background-border:hsl(0,0%,10%);--keycap-background:#555555;--keycap-background-active:hsl(var(--hue), 35%, 42%);--keycap-background-border:transparent;--keycap-background-border-bottom:transparent;--keycap-text:hsl(0,0%,81.6%);--keycap-text-active:#000;--keycap-secondary-text:#fff;--keycap-modifier-background:#303030;--keycap-modifier-border:transparent;--keycap-modifier-border-bottom:transparent;--keyboard-alternate-background:#303030}}body[theme='dark'] .ML__keyboard{--hue:206;--keyboard-background:#0c0c0c;--keyboard-text:#f0f0f0;--keyboard-text-active:hsl(var(--hue), 100%, 60%);--keyboard-background-border:hsl(0,0%,10%);--keycap-background:#555555;--keycap-background-active:hsl(var(--hue), 35%, 42%);--keycap-background-border:transparent;--keycap-background-border-bottom:transparent;--keycap-text:hsl(0,0%,81.6%);--keycap-text-active:#000;--keycap-secondary-text:#fff;--keycap-modifier-background:#303030;--keycap-modifier-border:transparent;--keycap-modifier-border-bottom:transparent;--keyboard-alternate-background:hsl(var(--hue), 19%, 38%)}";function Qx(n,o,e){let i,a;e.default&&(n.dataset.command=JSON.stringify(e.default)),e.alt&&(n.dataset.commandAlt=JSON.stringify(e.alt)),e.shift&&(n.dataset.commandShift=JSON.stringify(e.shift)),e.pressed&&(n.dataset.commandPressed=JSON.stringify(e.pressed)),e.pressAndHoldStart&&(n.dataset.commandPressAndHoldStart=JSON.stringify(e.pressAndHoldStart)),e.pressAndHoldEnd&&(n.dataset.commandPressAndHoldEnd=JSON.stringify(e.pressAndHoldEnd)),Yl(n,"pointerdown:passive",r=>{if(1!==r.buttons)return;r.stopPropagation(),i=Date.now(),n.classList.add("is-pressed");let s=r.target;s.hasPointerCapture(r.pointerId)&&s.releasePointerCapture(r.pointerId);let l=n.getAttribute("data-command-pressed");l&&o(JSON.parse(l));let c=n.getAttribute("data-command-press-and-hold-start");c&&(a&&clearTimeout(a),a=setTimeout(()=>{n.classList.contains("is-pressed")&&(n.classList.remove("is-pressed"),o(JSON.parse(c)))},300))}),Yl(n,"pointerenter",r=>{let s=r.target;s.hasPointerCapture(r.pointerId)&&s.releasePointerCapture(r.pointerId),1===r.buttons&&n.classList.add("is-pressed")}),Yl(n,"pointercancel",()=>n.classList.remove("is-pressed")),Yl(n,"pointerleave",()=>n.classList.remove("is-pressed")),Yl(n,"pointerup",r=>{let s=n.classList.contains("is-pressed");n.classList.remove("is-pressed"),n.classList.add("is-active"),setTimeout(()=>n.classList.remove("is-active"),150);let l=Date.now()>=i&&!s?n.getAttribute("data-command-press-and-hold-end"):null;!l&&r.altKey&&(l=n.getAttribute("data-command-alt")),!l&&r.shiftKey&&(l=n.getAttribute("data-command-shift")),l||(l=n.getAttribute("data-command")),l&&o(JSON.parse(l)),r.stopPropagation(),r.preventDefault()})}function Tg(){var n;let o=document.querySelector("#mathlive-alternate-keys-panel");return o&&(o.classList.remove("is-visible"),o.innerHTML=""),null==(n=zp.scrim)||n.close(),!1}var VC={numeric:{tooltip:"keyboard.tooltip.numeric",layer:"math",label:"123",layers:["math"]},roman:{tooltip:"keyboard.tooltip.roman",layer:"lower-roman",label:"ABC",layers:["lower-roman","upper-roman"]},greek:{tooltip:"keyboard.tooltip.greek",layer:"lower-greek",label:"&alpha;&beta;&gamma;",classes:"tex-math",layers:["lower-greek","upper-greek"]},functions:{tooltip:"keyboard.tooltip.functions",layer:"functions",label:"<i>f</i>&thinsp;()",classes:"tex",layers:["functions"]},symbols:{tooltip:"keyboard.tooltip.symbols",layer:"symbols",label:"&infin;\u2260\u2208",classes:"tex",layers:["symbols"]}},uw={"\\varphi ":["&Phi;","\\Phi "],"\\varsigma ":["&Sigma;","\\Sigma "],"\\epsilon ":["&#x0190;",'\\char"0190'],"\\rho ":["&#x3A1",'\\char"3A1'],"\\tau ":["&#x3A4;",'\\char"3A4'],"\\upsilon ":["&Upsilon;","\\Upsilon "],"\\theta ":["&Theta;","\\Theta "],"\\iota ":["&Iota;",'\\char"399'],"\\omicron ":["&#x039F;",'\\char"39F'],"\\pi ":["&Pi;","\\Pi "],"\\alpha ":["&Alpha;",'\\char"391'],"\\sigma ":["&Sigma;","\\Sigma "],"\\delta ":["&Delta;","\\Delta "],"\\phi ":["&#x03a6;","\\Phi "],"\\gamma ":["&Gamma;","\\Gamma "],"\\eta ":["&Eta;",'\\char"397'],"\\xi ":["&Xi;","\\Xi "],"\\kappa ":["&Kappa;",'\\char"39A'],"\\lambda ":["&Lambda;","\\Lambda "],"\\zeta ":["&Zeta;",'\\char"396'],"\\chi ":["&Chi;",'\\char"3A7'],"\\psi ":["&Psi;","\\Psi "],"\\omega ":["&Omega;","\\Omega "],"\\beta ":["&Beta;",'\\char"392'],"\\nu ":["&Nu;",'\\char"39D'],"\\mu ":["&Mu;",'\\char"39C']},kg={0:["\\emptyset","\\varnothing","\\infty",{latex:"#?_0",insert:"#@_0"},"\\circ","\\bigcirc","\\bullet"],2:["\\frac{1}{2}",{latex:"#?^2",insert:"#@^2"}],3:["\\frac{1}{3}",{latex:"#?^3",insert:"#@^3"}],".":[".",",",";","\\colon",{latex:":",aside:"ratio"},{latex:"\\cdotp",aside:"center dot",class:"box"},{latex:"\\cdots",aside:"center ellipsis",class:"box"},{latex:"\\ldotp",aside:"low dot",class:"box"},{latex:"\\ldots",aside:"low ellipsis",class:"box"},{latex:"\\vdots",aside:"",class:"box"},{latex:"\\ddots",aside:"",class:"box"},"\\odot","\\oslash","\\circledcirc"],"*":["\\cdot","\\ast","\\star","\\bigstar","\\ltimes","\\rtimes","\\rightthreetimes","\\leftthreetimes","\\intercal","\\prod",{latex:"\\prod_{n\\mathop=0}^{\\infty}",class:"small"}],"+":["\\pm","\\mp","\\sum",{latex:"\\sum_{n\\mathop=0}^{\\infty}",class:"small"},"\\dotplus","\\oplus"],"-":["\\pm","\\mp","\\ominus","\\vert #0  \\vert"],"/":["\\divideontimes","/","\\div","\\%"],"(":["\\left( #0\\right)","\\left[ #0\\right]","\\left\\{ #0\\right\\}","\\left\\langle #0\\right\\rangle","\\lfloor","\\llcorner","(","\\lbrack","\\lvert","\\lVert","\\lgroup","\\langle","\\lceil","\\ulcorner","\\lmoustache","\\lbrace"],")":["\\rfloor","\\lrcorner",")","\\rbrack","\\rvert","\\rVert","\\rgroup","\\rangle","\\rceil","\\urcorner","\\rmoustache","\\rbrace"],"=":["\\cong","\\asymp","\\equiv","\\differencedelta","\\varpropto","\\thickapprox","\\approxeq","\\thicksim","\\backsim","\\eqsim","\\simeq","\\Bumpeq","\\bumpeq","\\doteq","\\Doteq","\\fallingdotseq","\\risingdotseq","\\coloneq","\\eqcirc","\\circeq","\\triangleq","\\between"],"!=":["\\neq","\\ncong","","\\nsim"],"<":["\\leq","\\leqq","\\lneqq","\\ll","\\lessgtr","\\nless","\\nleq","\\lesssim","\\precsim","\\prec","\\nprec","\\preccurlyeq","\\lessdot"],">":["\\geq","\\geqq","\\gneqq","\\gg","\\gtrless","\\ngtr","\\ngeq","\\gtrsim","\\succsim","\\succ","\\nsucc","\\succcurlyeq","\\gtrdot"],in:["\\owns"],"!in":["\\backepsilon"],subset:["\\subseteq","\\nsubset","\\nsubseteq"],superset:["\\supseteq","\\nsupset","\\nsupseteq"],infinity:["\\aleph_0","\\aleph_1","\\omega","\\mathfrak{m}"],"numeric-pi":["\\prod","\\theta","\\rho","\\sin","\\cos","\\tan"],ee:["\\times 10^{#?}","\\ln","\\log_{10}","\\log"],"^":["_{#?}"],int:[{latex:"\\int_{#?}^{#?}",class:"small"},{latex:"\\int",class:"small"},{latex:"\\smallint",class:"small"},{latex:"\\iint",class:"small"},{latex:"\\iiint",class:"small"},{latex:"\\oint",class:"small"},{latex:"\\dfrac{\\rd}{\\rd x}",class:"small"},{latex:"\\frac{\\partial}{\\partial x}",class:"small"},"\\capitalDifferentialD","\\rd","\\partial"],nabla:["\\nabla\\times","\\nabla\\cdot","\\nabla^{2}"],"!":["!!","\\Gamma","\\Pi"],accents:["\\bar{#@}","\\vec{#@}","\\hat{#@}","\\check{#@}","\\dot{#@}","\\ddot{#@}","\\mathring{#@}","\\breve{#@}","\\acute{#@}","\\tilde{#@}","\\grave{#@}"],underline:["\\underbrace{#@}","\\underlinesegment{#@}","\\underleftrightarrow{#@}","\\underrightarrow{#@}","\\underleftarrow{#@}","\\undergroup{#@}"],overline:["\\overbrace{#@}","\\overlinesegment{#@}","\\overleftrightarrow{#@}","\\overrightarrow{#@}","\\overleftarrow{#@}","\\overgroup{#@}"],xleftarrows:["\\xlongequal{#@}","\\xleftrightarrow{#@}","\\xLeftrightarrow{#@}","\\xleftrightharpoons{#@}","\\xLeftarrow{#@}","\\xleftharpoonup{#@}","\\xleftharpoondown{#@}","\\xtwoheadleftarrow{#@}","\\xhookleftarrow{#@}","\\xtofrom{#@}","\\xleftequilibrium{#@}","\\xrightleftarrows{#@}"],xrightarrows:["\\xrightarrow{#@}","\\xlongequal{#@}","\\xleftrightarrow{#@}","\\xLeftrightarrow{#@}","\\xleftrightharpoons{#@}","\\xRightarrow{#@}","\\xrightharpoonup{#@}","\\xrightharpoondown{#@}","\\xtwoheadrightarrow{#@}","\\xrightleftharpoons{#@}","\\xhookrightarrow{#@}","\\xmapsto{#@}","\\xrightequilibrium{#@}","\\xrightleftarrows{#@}"],A:[{latex:"\\aleph",aside:"aleph"},{latex:"\\forall",aside:"for all"}],a:[{latex:"\\aleph",aside:"aleph"},{latex:"\\forall",aside:"for all"}],b:[{latex:"\\beth",aside:"beth"}],B:[{latex:"\\beth",aside:"beth"}],c:[{latex:"\\C",aside:"set of complex numbers"}],d:[{latex:"\\daleth",aside:"daleth"}],D:[{latex:"\\daleth",aside:"daleth"}],e:[{latex:"\\exponentialE",aside:"exponential e"},{latex:"\\exists",aside:"there is"},{latex:"\\nexists",aside:"there isn\u2019t"}],g:[{latex:"\\gimel",aside:"gimel"}],G:[{latex:"\\gimel",aside:"gimel"}],h:[{latex:"\\hbar",aside:"h bar"},{latex:"\\hslash",aside:"h slash"}],i:[{latex:"\\imaginaryI",aside:"imaginary i"}],j:[{latex:"\\imaginaryJ",aside:"imaginary j"}],l:[{latex:"\\ell",aside:"ell"}],n:[{latex:"\\mathbb{N}",aside:"set of natural numbers"}],p:[{latex:"\\mathbb{P}",aside:"set of primes"}],q:[{latex:"\\mathbb{Q}",aside:"set of rational numbers"}],r:[{latex:"\\mathbb{R}",aside:"set of real numbers"}],z:[{latex:"\\mathbb{Z}",aside:"set of integers"}],"x-var":["y","z","t","r",{latex:"f(#?)",class:"small"},{latex:"g(#?)",class:"small"},"x^2","x^n","x_n","x_{n+1}","x_i","x_{i+1}"],"n-var":["i","j","p","k","a","u"],ii:["\\Re","\\Im","\\imaginaryJ","\\Vert #0 \\Vert"],logic:[{latex:"\\exists",aside:"there is"},{latex:"\\nexists",aside:"there isn\u2019t"},{latex:"\\ni",aside:"such that"},{latex:"\\Colon",aside:"such that"},{latex:"\\implies",aside:"implies"},{latex:"\\impliedby",aside:"implied by"},{latex:"\\iff",aside:"if and only if"},{latex:"\\land",aside:"and"},{latex:"\\lor",aside:"or"},{latex:"\\oplus",aside:"xor"},{latex:"\\lnot",aside:"not"},{latex:"\\downarrow",aside:"nor"},{latex:"\\uparrow",aside:"nand"},{latex:"\\curlywedge",aside:"nor"},{latex:"\\bar\\curlywedge",aside:"nand"},{latex:"\\therefore",aside:"therefore"},{latex:"\\because",aside:"because"},{latex:"^\\biconditional",aside:"biconditional"},"\\leftrightarrow","\\Leftrightarrow","\\to","\\models","\\vdash","\\gets","\\dashv","\\roundimplies"],"set-operators":["\\cap","\\cup","\\setminus","\\smallsetminus","\\complement"],"set-relations":["\\in","\\notin","\\ni","\\owns","\\subset","\\supset","\\subseteq","\\supseteq","\\subsetneq","\\supsetneq","\\varsubsetneq","\\subsetneqq","\\nsubset","\\nsupset","\\nsubseteq","\\nsupseteq"],space:[{latex:'\\char"203A\\!\\char"2039',insert:"\\!",aside:"negative thin space<br>\u207b\xb3\u29f8\u2081\u2088 em"},{latex:'\\unicode{"203A}\\,\\unicode{"2039}',insert:"\\,",aside:"thin space<br>\xb3\u29f8\u2081\u2088 em"},{latex:'\\unicode{"203A}\\:\\unicode{"2039}',insert:"\\:",aside:"medium space<br>\u2074\u29f8\u2081\u2088 em"},{latex:'\\unicode{"203A}\\;\\unicode{"2039}',insert:"\\;",aside:"thick space<br>\u2075\u29f8\u2081\u2088 em"},{latex:'\\unicode{"203A}\\ \\unicode{"2039}',insert:"\\ ",aside:"\u2153 em"},{latex:'\\unicode{"203A}\\enspace\\unicode{"2039}',insert:"\\enspace",aside:"\xbd em"},{latex:'\\unicode{"203A}\\quad\\unicode{"2039}',insert:"\\quad",aside:"1 em"},{latex:'\\unicode{"203A}\\qquad\\unicode{"2039}',insert:"\\qquad",aside:"2 em"}],delete:[{label:'<span class="warning"><svg class="svg-glyph"><use xlink:href="#svg-trash" /></svg></span>',command:"deleteAll"}],"->|":[]},co={},XG={math:"\n        <div class='rows'>\n            <ul>\n                <li class='keycap tex' data-alt-keys='x-var'><i>x</i></li>\n                <li class='keycap tex' data-alt-keys='n-var'><i>n</i></li>\n                <li class='separator w5'></li>\n                <row name='numpad-1'/>\n                <li class='separator w5'></li>\n                <li class='keycap tex' data-latex='\\exponentialE' data-alt-keys='ee'>e</li>\n                <li class='keycap tex' data-latex='\\imaginaryI' data-alt-keys='ii'>i</li>\n                <li class='keycap tex' data-latex='\\pi' data-alt-keys='numeric-pi'></li>\n            </ul>\n            <ul>\n                <li class='keycap tex' data-key='<' data-alt-keys='<'>&lt;</li>\n                <li class='keycap tex' data-key='>' data-alt-keys='>'>&gt;</li>\n                <li class='separator w5'></li>\n                <row name='numpad-2'/>\n                <li class='separator w5'></li>\n                <li class='keycap tex' data-latex='#@^{2}' data-latex='x^2'></li>\n                <li class='keycap tex' data-alt-keys='^' data-insert='#@^{#?}' data-latex='x^\\placeholder'></li>\n                <li class='keycap tex small' data-insert='\\sqrt{#0}' data-latex='\\sqrt{#0}'></li>\n            </ul>\n            <ul>\n                <li class='keycap tex' data-alt-keys='(' >(</li>\n                <li class='keycap tex' data-alt-keys=')' >)</li>\n                <li class='separator w5'></li>\n                <row name='numpad-3'/>\n                <li class='separator w5'></li>\n                <li class='keycap small' data-alt-keys='int' data-latex='\\int_0^\\infty'></li>\n                <li class='keycap' data-latex='\\forall' data-alt-keys='logic' ></li>\n                <li class='action font-glyph bottom right' data-alt-keys='delete' data-command='[\"performWithFeedback\",\"deleteBackward\"]'><svg class=\"svg-glyph\"><use xlink:href=\"#svg-delete-backward\" /></svg></li></ul>\n            </ul>\n            <ul>\n                <li class='keycap' data-alt-keys='foreground-color' data-command='[\"applyStyle\",{\"color\":\"red\"}]'><span style='border-radius: 50%;width:22px;height:22px; border: 3px solid #cc2428; box-sizing: border-box'></span></li>\n                <li class='keycap' data-alt-keys='background-color' data-command='[\"applyStyle\",{\"backgroundColor\":\"yellow\"}]'><span style='border-radius: 50%;width:22px;height:22px; background:#fff590; box-sizing: border-box'></span></li>\n                <li class='separator w5'></li>\n                <row name='numpad-4'/>\n                <li class='separator w5'></li>\n                <arrows/>\n            </ul>\n        </div>\n    ","lower-roman":"\n        <div class='rows'>\n            <ul>\n                <row name='numpad-1' class='if-wide'/>\n                <row name='lower-1' shift-layer='upper-roman'/>\n            </ul>\n            <ul>\n                <row name='numpad-2' class='if-wide'/>\n                <row name='lower-2'  shift-layer='upper-roman''/>\n            </ul>\n            <ul>\n                <row name='numpad-3' class='if-wide'/>\n                <row name='lower-3'  shift-layer='upper-roman''/>\n            </ul>\n            <ul>\n                <row name='numpad-4' class='if-wide'/>\n                <li class='keycap' >;</li>\n                <li class='keycap' >,</li>\n                <li class='keycap w50' data-key=' ' data-alt-keys='space'>&nbsp;</li>\n                <arrows/>\n            </ul>\n        </div>","upper-roman":"\n        <div class='rows'>\n            <ul>\n                <row name='numpad-1' class='if-wide'/>\n                <row name='upper-1'  shift-layer='lower-roman'/>\n            </ul>\n            <ul>\n                <row name='numpad-2' class='if-wide'/>\n                <row name='upper-2' shift-layer='lower-roman'/>\n            </ul>\n            <ul>\n                <row name='numpad-3' class='if-wide'/>\n                <row name='upper-3' shift-layer='lower-roman'/>\n            </ul>\n            <ul>\n                <row name='numpad-4' class='if-wide'/>\n                <li class='keycap' >;</li>\n                <li class='keycap' data-alt-keys='.'>;</li>\n                <li class='keycap w50' data-key=' '>&nbsp;</li>\n                <arrows/>\n            </ul>\n        </div>",symbols:"\n        <div class='rows'>\n            <ul>\n                <row name='numpad-1' class='if-wide'/>\n                <li class='keycap tex' data-alt-keys='(' data-insert='\\lbrace '>{</li>\n                <li class='keycap tex' data-alt-keys=')' data-insert='\\rbrace '>}</li>\n                <li class='separator w5'></li>\n                <li class='keycap tex small' data-alt-keys='xleftarrows' data-latex='\\leftarrow' ></li>\n                <li class='keycap tex small' data-alt-keys='xrightarrows' data-latex='\\rightarrow' ></li>\n                <li class='keycap tex' data-alt-keys='overline' data-latex='\\overline{#@}' data-aside='overline'></li>\n                <li class='keycap tex' data-alt-keys='underline' data-latex='\\underline{#@}' data-aside='underline'></li>\n                <li class='keycap w15' data-insert='\\ulcorner#0\\urcorner '><span><sup>&#x250c;</sup><span><span style='color:#ddd'>o</span><sup>&#x2510;</sup></span><aside>ceil</aside></li>\n                <li class='keycap tex' data-alt-keys='nabla' data-insert='\\nabla '>&#x2207;<aside>nabla</aside></li>\n                <li class='keycap tex' data-alt-keys='infinity' data-insert='\\infty '>&#x221e;</li>\n\n            </ul>\n            <ul>\n                <row name='numpad-2' class='if-wide'/>\n                <li class='keycap tex' data-alt-keys='(' data-insert='\\lbrack '>[</li>\n                <li class='keycap tex' data-alt-keys=')' data-insert='\\rbrack '>]</li>\n                <li class='separator w5'></li>\n\n                <li class='keycap tex' data-alt-keys='in' data-insert='\\in '>&#x2208;</li>\n                <li class='keycap tex' data-alt-keys='!in' data-insert='\\notin '>&#x2209;</li>\n                <li class='keycap tex' data-insert='\\Re '>&#x211c;<aside>Real</aside></li>\n                <li class='keycap tex' data-insert='\\Im '>&#x2111;<aside>Imaginary</aside></li>\n                <li class='keycap w15' data-insert='\\llcorner#0\\lrcorner '><span><sub>&#x2514;</sub><span style='color:#ddd'>o</span><sub>&#x2518;</sub></span><aside>floor</aside></li>\n\n                <li class='keycap tex' data-insert='\\partial '>&#x2202;<aside>partial<br>derivative</aside></li>\n                <li class='keycap tex' data-insert='\\emptyset '>&#x2205;<aside>empty set</aside></li>\n\n            </ul>\n            <ul>\n                <row name='numpad-3' class='if-wide'/>\n                <li class='keycap tex' data-alt-keys='(' data-insert='\\langle '>&#x27e8;</li>\n                <li class='keycap tex' data-alt-keys=')' data-insert='\\rangle '>&#x27e9;</li>\n                <li class='separator w5'></li>\n                <li class='keycap tex' data-alt-keys='subset' data-insert='\\subset '>&#x2282;</li>\n                <li class='keycap tex' data-alt-keys='superset' data-insert='\\supset '>&#x2283;</li>\n\n                <li class='keycap tex' data-alt-keys='accents' data-insert='\\vec{#@}' data-latex='\\vec{#?}' data-aside='vector'></li>\n                <li class='keycap tex' data-alt-keys='absnorm' data-insert='\\left| #0 \\right|' data-latex='\\left| #? \\right|' data-aside='abs'></li>\n\n                <li class='keycap tex' data-key='!' data-alt-keys='!'>!<aside>factorial</aside></li>\n                <li class='keycap' data-latex='^{\\prime} '><span><sup><span><span style='color:#ddd'>o</span>&#x2032</sup></span><aside>prime</aside></li>\n\n                <li class='action font-glyph bottom right w15'\n                    data-shifted='<span class=\"warning\"><svg class=\"svg-glyph\"><use xlink:href=\"#svg-trash\" /></svg></span>'\n                    data-shifted-command='\"deleteAll\"'\n                    data-alt-keys='delete' data-command='[\"performWithFeedback\",\"deleteBackward\"]'\n                ><svg class=\"svg-glyph\"><use xlink:href=\"#svg-delete-backward\" /></svg></li>\n            </ul>\n            <ul>\n                <row name='numpad-4' class='if-wide'/>\n                <li class='keycap tex' data-insert=','>,</li>\n                <li class='keycap tex' data-insert='\\cdot '>&#x22c5;<aside>centered dot</aside></li>\n                <li class='keycap tex' data-insert='\\colon '>:<aside>colon</aside></li>\n                <li class='keycap tex' data-insert='\\circ '>&#x2218;<aside>circle</aside></li>\n                <li class='keycap tex' data-insert='\\approx '>&#x2248;<aside>approx.</aside></li>\n                <li class='keycap tex' data-insert='\\ne '>&#x2260;</li>\n                <li class='keycap tex' data-insert='\\pm '>&#x00b1;</li>\n                <arrows/>\n            </ul>\n        </div>","lower-greek":"\n        <div class='rows'>\n            <ul><li class='keycap tex' data-insert='\\varphi '><i>&#x03c6;</i><aside>phi var.</aside></li>\n                <li class='keycap tex' data-insert='\\varsigma '><i>&#x03c2;</i><aside>sigma var.</aside></li>\n                <li class='keycap tex' data-insert='\\epsilon '><i>&#x03f5;</i></li>\n                <li class='keycap tex' data-insert='\\rho '><i>&rho;</i></li>\n                <li class='keycap tex' data-insert='\\tau '><i>&tau;</i></li>\n                <li class='keycap tex' data-insert='\\upsilon '><i>&upsilon;</i></li>\n                <li class='keycap tex' data-insert='\\theta '><i>&theta;</i></li>\n                <li class='keycap tex' data-insert='\\iota '><i>&iota;</i></li>\n                <li class='keycap tex' data-insert='\\omicron '>&omicron;</i></li>\n                <li class='keycap tex' data-insert='\\pi '><i>&pi;</i></li>\n            </ul>\n            <ul><li class='keycap tex' data-insert='\\alpha ' data-shifted='&Alpha;' data-shifted-command='[\"insert\",\"\\\\char\\\"391\"]'><i>&alpha;</i></li>\n                <li class='keycap tex' data-insert='\\sigma '><i>&sigma;</i></li>\n                <li class='keycap tex' data-insert='\\delta '><i>&delta;</i></li>\n                <li class='keycap tex' data-insert='\\phi '><i>&#x03d5;</i></i></li>\n                <li class='keycap tex' data-insert='\\gamma '><i>&gamma;</i></li>\n                <li class='keycap tex' data-insert='\\eta '><i>&eta;</i></li>\n                <li class='keycap tex' data-insert='\\xi '><i>&xi;</i></li>\n                <li class='keycap tex' data-insert='\\kappa '><i>&kappa;</i></li>\n                <li class='keycap tex' data-insert='\\lambda '><i>&lambda;</i></li>\n            </ul>\n            <ul><li class='shift modifier font-glyph bottom left w15 layer-switch' data-layer='upper-greek'><svg class=\"svg-glyph\"><use xlink:href=\"#svg-shift\" /></svg></li>\n                <li class='keycap tex' data-insert='\\zeta '><i>&zeta;</i></li>\n                <li class='keycap tex' data-insert='\\chi '><i>&chi;</i></li>\n                <li class='keycap tex' data-insert='\\psi '><i>&psi;</i></li>\n                <li class='keycap tex' data-insert='\\omega '><i>&omega;</i></li>\n                <li class='keycap tex' data-insert='\\beta '><i>&beta;</i></li>\n                <li class='keycap tex' data-insert='\\nu '><i>&nu;</i></li>\n                <li class='keycap tex' data-insert='\\mu '><i>&mu;</i></li>\n                <li class='action font-glyph bottom right w15'\n                    data-shifted='<span class=\"warning\"><svg class=\"svg-glyph\"><use xlink:href=\"#svg-trash\" /></svg></span>'\n                    data-shifted-command='\"deleteAll\"'\n                    data-alt-keys='delete' data-command='[\"performWithFeedback\",\"deleteBackward\"]'\n                ><svg class=\"svg-glyph\"><use xlink:href=\"#svg-delete-backward\" /></svg></li>\n            </ul>\n            <ul>\n                <li class='keycap ' data-key=' '>&nbsp;</li>\n                <li class='keycap'>,</li>\n                <li class='keycap tex' data-insert='\\varepsilon '><i>&#x03b5;</i><aside>epsilon var.</aside></li>\n                <li class='keycap tex' data-insert='\\vartheta '><i>&#x03d1;</i><aside>theta var.</aside></li>\n                <li class='keycap tex' data-insert='\\varkappa '><i>&#x3f0;</i><aside>kappa var.</aside></li>\n                <li class='keycap tex' data-insert='\\varpi '><i>&#x03d6;<aside>pi var.</aside></i></li>\n                <li class='keycap tex' data-insert='\\varrho '><i>&#x03f1;</i><aside>rho var.</aside></li>\n                <arrows/>\n            </ul>\n        </div>","upper-greek":"\n        <div class='rows'>\n            <ul><li class='keycap tex' data-insert='\\Phi '>&Phi;<aside>phi</aside></li>\n                <li class='keycap tex' data-insert='\\Sigma '>&Sigma;<aside>sigma</aside></li>\n                <li class='keycap tex' data-insert='\\char\"0190'>&#x0190;<aside>epsilon</aside></li>\n                <li class='keycap tex' data-insert='\\char\"3A1'>&#x3A1;<aside>rho</aside></li>\n                <li class='keycap tex' data-insert='\\char\"3A4'>&#x3A4;<aside>tau</aside></li>\n                <li class='keycap tex' data-insert='\\Upsilon '>&Upsilon;<aside>upsilon</aside></li>\n                <li class='keycap tex' data-insert='\\Theta '>&Theta;<aside>theta</aside></li>\n                <li class='keycap tex' data-insert='\\char\"399'>&Iota;<aside>iota</aside></li>\n                <li class='keycap tex' data-insert='\\char\"39F'>&#x039F;<aside>omicron</aside></li>\n                <li class='keycap tex' data-insert='\\Pi '>&Pi;<aside>pi</aside></li></ul>\n            <ul><li class='keycap tex' data-insert='\\char\"391'>&#x391;<aside>alpha</aside></li>\n                <li class='keycap tex' data-insert='\\Sigma '>&Sigma;<aside>sigma</aside></li>\n                <li class='keycap tex' data-insert='\\Delta '>&Delta;<aside>delta</aside></li>\n                <li class='keycap tex' data-insert='\\Phi '>&#x03a6;<aside>phi</aside></li>\n                <li class='keycap tex' data-insert='\\Gamma '>&Gamma;<aside>gamma</aside></li>\n                <li class='keycap tex' data-insert='\\char\"397'>&Eta;<aside>eta</aside></li>\n                <li class='keycap tex' data-insert='\\Xi '>&Xi;<aside>xi</aside></li>\n                <li class='keycap tex' data-insert='\\char\"39A'>&Kappa;<aside>kappa</aside></li>\n                <li class='keycap tex' data-insert='\\Lambda '>&Lambda;<aside>lambda</aside></li></ul>\n            <ul><li class='shift modifier font-glyph bottom left selected w15 layer-switch' data-layer='lower-greek'><svg class=\"svg-glyph\"><use xlink:href=\"#svg-shift\" /></svg></li>\n                <li class='keycap tex' data-insert='\\char\"396'>&Zeta;<aside>zeta</aside></li>\n                <li class='keycap tex' data-insert='\\char\"3A7'>&Chi;<aside>chi</aside></li>\n                <li class='keycap tex' data-insert='\\Psi '>&Psi;<aside>psi</aside></li>\n                <li class='keycap tex' data-insert='\\Omega '>&Omega;<aside>omega</aside></li>\n                <li class='keycap tex' data-insert='\\char\"392'>&Beta;<aside>beta</aside></li>\n                <li class='keycap tex' data-insert='\\char\"39D'>&Nu;<aside>nu</aside></li>\n                <li class='keycap tex' data-insert='\\char\"39C'>&Mu;<aside>mu</aside></li>\n                <li class='action font-glyph bottom right w15' data-command='[\"performWithFeedback\",\"deleteBackward\"]'><svg class=\"svg-glyph\"><use xlink:href=\"#svg-delete-backward\" /></svg></li></ul>\n            <ul>\n                <li class='separator w10'>&nbsp;</li>\n                <li class='keycap'>.</li>\n                <li class='keycap w50' data-key=' '>&nbsp;</li>\n                <arrows/>\n            </ul>\n        </div>",functions:"\n        <div class='rows'>\n            <ul>\n                <li class='fnbutton' data-insert='\\sin'></li>\n                <li class='fnbutton' data-insert='\\sin^{-1}'></li>\n                <li class='fnbutton' data-insert='\\ln'></li>\n                <li class='fnbutton' data-insert='\\exponentialE^{#?}'></li>\n                <li class='bigfnbutton' data-insert='\\operatorname{lcm}(#?)' data-latex='\\operatorname{lcm}()'></li>\n                <li class='bigfnbutton' data-insert='\\operatorname{ceil}(#?)' data-latex='\\operatorname{ceil}()'></li>\n                <li class='bigfnbutton' data-insert='\\lim_{n\\to\\infty}'></li>\n                <li class='bigfnbutton' data-insert='\\int'></li>\n                <li class='bigfnbutton' data-insert='\\operatorname{abs}(#?)' data-latex='\\operatorname{abs}()'></li>\n            </ul>\n            <ul>\n                <li class='fnbutton' data-latex='\\cos'></li>\n                <li class='fnbutton' data-latex='\\cos^{-1}'></li>\n                <li class='fnbutton' data-latex='\\log'></li>\n                <li class='fnbutton' data-latex='10^{#?}'></li>\n                <li class='bigfnbutton' data-insert='\\operatorname{gcd}(#?)' data-latex='\\operatorname{gcd}()'></li>\n                <li class='bigfnbutton' data-insert='\\operatorname{floor}(#?)' data-latex='\\operatorname{floor}()'></li>\n                <li class='bigfnbutton' data-latex='\\sum_{n\\mathop=0}^{\\infty}'></li>\n                <li class='bigfnbutton' data-latex='\\int_{0}^{\\infty}'></li>\n                <li class='bigfnbutton' data-insert='\\operatorname{sign}(#?)' data-latex='\\operatorname{sign}()'></li>\n            </ul>\n            <ul>\n                <li class='fnbutton' data-latex='\\tan'></li>\n                <li class='fnbutton' data-latex='\\tan^{-1}'></li>\n                <li class='fnbutton' data-latex='\\log_{#?}'></li>\n                <li class='fnbutton' data-latex='\\sqrt[#?]{#0}'></li>\n                <li class='bigfnbutton' data-insert='#0 \\mod' data-latex='\\mod'></li>\n                <li class='bigfnbutton' data-insert='\\operatorname{round}(#?) ' data-latex='\\operatorname{round}()'></li>\n                <li class='bigfnbutton' data-insert='\\prod_{n\\mathop=0}^{\\infty}' data-latex='{\\scriptstyle \\prod_{n=0}^{\\infty}}'></li>\n                <li class='bigfnbutton' data-insert='\\frac{\\differentialD #0}{\\differentialD x}'></li>\n                <li class='action font-glyph bottom right' data-command='[\"performWithFeedback\",\"deleteBackward\"]'><svg class=\"svg-glyph\"><use xlink:href=\"#svg-delete-backward\" /></svg></li></ul>\n            <ul>\n                <li class='fnbutton'>(</li>\n                <li class='fnbutton'>)</li>\n                <li class='fnbutton' data-insert='^{#?}' data-latex='x^{#?}'></li>\n                <li class='fnbutton' data-insert='_{#?}' data-latex='x_{#?}'></li>\n                <li class='keycap w20 ' data-key=' '>&nbsp;</li>\n                <arrows/>\n            </ul>\n        </div>",style:"\n        <div class='rows'>\n            <ul>\n                <li class='keycap' data-alt-keys='foreground-color' data-command='[\"applyStyle\",{\"color\":\"red\"}]'><span style='border-radius: 50%;width:22px;height:22px; border: 3px solid #cc2428'></span></li>\n                <li class='keycap' data-alt-keys='background-color' data-command='[\"applyStyle\",{\"backgroundColor\":\"yellow\"}]'><span style='border-radius: 50%;width:22px;height:22px; background:#fff590'></span></li>\n                <li class='separator w5'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"size\":\"3\"}]' data-latex='\\scriptsize\\text{small}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"size\":\"5\"}]' data-latex='\\scriptsize\\text{normal}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"size\":\"9\"}]' data-latex='\\huge\\text{big}'></li>\n                <li class='separator w5'></li>\n                <li class='keycap' data-latex='\\langle' data-command='[\"insert\", \"\\\\langle\", {\"smartFence\":true}]'></li>\n            </ul>\n            <ul>\n                <li class='keycap' data-command='[\"applyStyle\",{\"series\":\"l\"}]' data-latex='\\fontseries{l}\\text{Ab}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"series\":\"m\"}]' data-latex='\\fontseries{m}\\text{Ab}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"series\":\"b\"}]' data-latex='\\fontseries{b}\\text{Ab}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"series\":\"bx\"}]' data-latex='\\fontseries{bx}\\text{Ab}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"series\":\"sb\"}]' data-latex='\\fontseries{sb}\\text{Ab}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"series\":\"c\"}]' data-latex='\\fontseries{c}\\text{Ab}'></li>\n            </ul>\n            <ul>\n                <li class='keycap' data-command='[\"applyStyle\",{\"shape\":\"up\"}]' data-latex='\\textup{Ab}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"shape\":\"it\"}]' data-latex='\\textit{Ab}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"shape\":\"sl\"}]' data-latex='\\textsl{Ab}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"shape\":\"sc\"}]' data-latex='\\textsc{Ab}'></li>\n                <li class='separator w5'></li>\n                <li class='keycap' data-insert='\\emph{#@} ' data-latex='\\text{\\emph{emph}}'></li>\n            </ul>\n            <ul>\n                <li class='keycap' data-command='[\"applyStyle\",{\"fontFamily\":\"cmr\"}]' data-latex='\\textrm{Az}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"fontFamily\":\"cmtt\"}]' data-latex='\\texttt{Az}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"fontFamily\":\"cmss\"}]' data-latex='\\textsf{Az}'></li>\n\n                <li class='keycap' data-command='[\"applyStyle\",{\"fontFamily\":\"bb\"}]'  data-latex='\\mathbb{AZ}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"fontFamily\":\"scr\"}]'  data-latex='\\mathscr{AZ}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"fontFamily\":\"cal\"}]' data-latex='\\mathcal{A1}'></li>\n                <li class='keycap' data-command='[\"applyStyle\",{\"fontFamily\":\"frak\"}]' data-latex='\\mathfrak{Az}'></li>\n            </ul>\n        </div>"};function XC(n,o){n=n.replace(/(^|[^\\])#@/g,"$1#?");let e=$m(),i=new ke("root",e);return i.body=Gr(n,e,{parseMode:"math",args:o}),Id(mx(Pp(new Be(i.render(new ni({registers:e.registers},{fontSize:Fm},"displaystyle")),{classes:"ML__base"}))),{classes:"ML__mathlive"}).toMarkup()}function t$(n,o,e){var i,a,r;let s="<div class='left'>",l=o.replace(/\s+/g," ").split(" ");if(l.length>1){let c=Ee(Ee({},VC),null!=(i=n.customVirtualKeyboards)?i:{});for(let d of l){if(!c[d]){console.error('MathLive: Unknown virtual keyboard "',d,'"');break}s+="<div class='",s+=d===e?"selected ":c[d].command?"action ":"layer-switch ",s+=(null!=(a=c[d].classes)?a:"")+"'",c[d].tooltip&&(s+="data-tooltip='"+(null!=(r=jm(c[d].tooltip))?r:c[d].tooltip)+"' "),d!==e&&("string"==typeof c[d].command?s+=`data-command='"${c[d].command}"'`:Array.isArray(c[d].command)&&(s+=`data-command='${JSON.stringify(c[d].command)}'`),c[d].layer&&(s+="data-layer='"+c[d].layer+"'")),s+=">"+c[d].label+"</div>"}}return s+="</div>",s+="<div class='ML__toolbar-action right'></div>",s}function e$(n,o){let e="";if("none"===n.virtualKeyboardToolbar)return"";let i=[];null!=o&&o.model.selectionIsCollapsed?i.push("undo","redo","pasteFromClipboard"):i.push("cutToClipboard","copyToClipboard","pasteFromClipboard");let a={undo:`<div class='action ${!1===o?.canUndo()?"disabled":""}'\n          data-command='"undo"'\n          data-tooltip='${jm("tooltip.undo")}'>\n          <svg><use xlink:href='#svg-undo' /></svg>\n      </div>`,redo:`<div class='action ${!1===o?.canRedo()?"disabled":""}'\n          data-command='"redo"'\n          data-tooltip='${jm("tooltip.redo")}'>\n          <svg><use xlink:href='#svg-redo' /></svg>\n      </div>`,cutToClipboard:`\n        <div class='action'\n            data-command='"cutToClipboard"'\n            data-tooltip='${jm("tooltip.cut to clipboard")}'>\n            <svg><use xlink:href='#svg-cut' /></svg>\n        </div>\n    `,copyToClipboard:`\n        <div class='action'\n            data-command='"copyToClipboard"'\n            data-tooltip='${jm("tooltip.copy to clipboard")}'>\n            <svg><use xlink:href='#svg-copy' /></svg>\n        </div>\n    `,pasteFromClipboard:`\n        <div class='action'\n            data-command='"pasteFromClipboard"'\n            data-tooltip='${jm("tooltip.paste from clipboard")}'>\n            <svg><use xlink:href='#svg-paste' /></svg>\n        </div>\n    `};return e+=i.map(r=>a[r]).join(""),e}function tT(n,o,e){var i,a;for(let r of o){let s;r.getAttribute("data-latex")?s=XC(r.getAttribute("data-latex").replace(/&quot;/g,'"'),()=>"\\placeholder{}"):r.getAttribute("data-insert")&&""===r.innerHTML?s=XC(r.getAttribute("data-insert").replace(/&quot;/g,'"'),()=>"\\placeholder{}"):r.getAttribute("data-content")&&(s=r.getAttribute("data-content").replace(/&quot;/g,'"')),r.getAttribute("data-aside")&&(s=(s??"")+"<aside>"+r.getAttribute("data-aside").replace(/&quot;/g,'"')+"</aside>"),void 0!==s&&(r.innerHTML=n.options.createHTML(s)),r.getAttribute("data-classes")&&r.classList.add(r.getAttribute("data-classes"));let l=null==(i=r.getAttribute("data-insert"))?void 0:i.replace(/&quot;/g,'"');l&&uw[l]&&(r.dataset.shifted=uw[l][0],r.dataset.shiftedCommand=JSON.stringify(["insertAndUnshiftKeyboardLayer",uw[l][1]]));let c,d=r.getAttribute("data-command");if(d)if(/^[a-zA-Z]+$/.test(d))c=d;else try{c=JSON.parse(d)}catch{}else c=r.getAttribute("data-insert")?["insert",r.getAttribute("data-insert"),{focus:!0,feedback:!0,scrollIntoView:!0,mode:"math",format:"latex",resetStyle:!0}]:r.getAttribute("data-latex")?["insert",r.getAttribute("data-latex"),{focus:!0,feedback:!0,scrollIntoView:!0,mode:"math",format:"latex",resetStyle:!0}]:["typedText",null!=(a=r.getAttribute("data-key"))?a:r.textContent,{focus:!0,feedback:!0,simulateKeystroke:!0}];if(c){e&&(c=[e,c]);let h={default:c},_=r.getAttribute("data-alt-keys");_&&co[_]&&(h={default:c,pressAndHoldStart:["showAlternateKeys",_],pressAndHoldEnd:"hideAlternateKeys"}),Qx(r,x=>n.executeCommand(x),h)}}}function n$(n,o){var e,i,a,r;let s={qwerty:{"lower-1":"qwertyuiop","lower-2":" asdfghjkl ","lower-3":"^zxcvbnm~","upper-1":"QWERTYUIOP","upper-2":" ASDFGHJKL ","upper-3":"^ZXCVBNM~","numpad-1":"789/","numpad-2":"456*","numpad-3":"123-","numpad-4":"0.=+"},azerty:{"lower-1":"azertyuiop","lower-2":"qsdfghjklm","lower-3":"^ wxcvbn ~","upper-1":"AZERTYUIOP","upper-2":"QSDFGHJKLM","upper-3":"^ WXCVBN ~"},qwertz:{"lower-1":"qwertzuiop","lower-2":" asdfghjkl ","lower-3":"^yxcvbnm~","upper-1":"QWERTZUIOP","upper-2":" ASDFGHJKL","upper-3":"^YXCVBNM~"},dvorak:{"lower-1":"^  pyfgcrl ","lower-2":"aoeuidhtns","lower-3":"qjkxbmwvz~","upper-1":"^  PYFGCRL ","upper-2":"AOEUIDHTNS","upper-3":"QJKXBMWVZ~"},colemak:{"lower-1":" qwfpgjluy ","lower-2":"arstdhneio","lower-3":"^zxcvbkm~","upper-1":" QWFPGNLUY ","upper-2":"ARSTDHNEIO","upper-3":"^ZXCVBKM~"}},l=n.virtualKeyboardLayout;if("auto"===l){let x=xg();x&&(l=x.virtualLayout),(!l||"auto"===l)&&(l=null!=(e={fr:"azerty",be:"azerty",al:"qwertz",ba:"qwertz",cz:"qwertz",de:"qwertz",hu:"qwertz",sk:"qwertz",ch:"qwertz"}[go.locale.slice(0,2)])?e:"qwerty")}let h,c=null!=(i=s[l])?i:s.qwerty,d=o;d=d.replace(/<arrows\/>/g,'\n        <li class=\'action\' data-command=\'["performWithFeedback","moveToPreviousChar"]\'\n            data-shifted=\'<svg class="svg-glyph"><use xlink:href="#svg-angle-double-left" /></svg>\'\n            data-shifted-command=\'["performWithFeedback","extendToPreviousChar"]\'>\n            <svg class="svg-glyph"><use xlink:href=\'#svg-arrow-left\' /></svg>\n        </li>\n        <li class=\'action\' data-command=\'["performWithFeedback","moveToNextChar"]\'\n            data-shifted=\'<svg class="svg-glyph"><use xlink:href="#svg-angle-double-right" /></svg>\'\n            data-shifted-command=\'["performWithFeedback","extendToNextChar"]\'>\n            <svg class="svg-glyph"><use xlink:href=\'#svg-arrow-right\' /></svg>\n        </li>\n        <li class=\'action\' data-command=\'["performWithFeedback","commit"]\'>\n        <svg class="svg-glyph"><use xlink:href=\'#svg-commit\' /></svg></li>');let _=d.match(/(<row\s+)(.*)((?:<\/row|\/)>)/);for(;_;){h="";let x=_[2].match(/[a-zA-Z][a-zA-Z\d-]*=(['"])(.*?)\1/g),b={};if(x)for(let P of x){let U=P.match(/([a-zA-Z][a-zA-Z\d-]*)=(['"])(.*?)\2/);U&&(b[U[1]]=U[3])}let T=c[b.name];if(T||(T=s.qwerty[b.name]),T)for(let P of T){let U=null!=(a=b.class)?a:"";U&&(U=` ${U}`),"~"===P?(h+="<li class='action font-glyph bottom right ",h+=T.length-(T.match(/ /g)||[]).length/2==10?"w10":"w15",h+='\' data-shifted=\'<span class="warning"><svg class="svg-glyph"><use xlink:href="#svg-trash" /></svg></span>\'\n                        data-shifted-command=\'"deleteAll"\'\n                        data-alt-keys=\'delete\' data-command=\'["performWithFeedback","deleteBackward"]\'\n                        ><svg class="svg-glyph"><use xlink:href="#svg-delete-backward" /></svg></li>'):" "===P?h+="<li class='separator w5'></li>":"^"===P?h+="<li class='shift modifier font-glyph bottom left w15 layer-switch' data-layer='"+b["shift-layer"]+'\'><svg class="svg-glyph"><use xlink:href="#svg-shift" /></svg></li>':"/"===P?h+="<li class='keycap"+U+"' data-alt-keys='/' data-insert='\\frac{#@}{#?}'>&divide;</li>":"*"===P?h+="<li class='keycap"+U+"' data-alt-keys='*' data-insert='\\times '>&times;</li>":"-"===P?h+="<li class='keycap"+U+"' data-alt-keys='-' data-key='-'>&#x2212;</li>":"."===P?h+="<li class='keycap"+U+"' data-alt-keys='.' data-command='\"insertDecimalSeparator\"'>"+(null!=(r=n.decimalSeparator)?r:".")+"</li>":U.includes("tt")?h+=`<li class='keycap${U}' data-alt-keys='${P}' data-command='["typedText","${P}",{"mode":"latex", "focus":true, "feedback":true}]'>${P}</li>`:h+="<li class='keycap"+U+"' data-alt-keys='"+P+"'>"+P+"</li>"}else console.error("MathLive: Unknown roman keyboard row:",b.name);d=d.replace(new RegExp(_[1]+_[2]+_[3]),h),_=d.match(/(<row\s+)(.*)((?:<\/row|\/)>)/)}return d}function Rx(n){Tg();let o=n.element.querySelectorAll("div.keyboard-layer.is-visible .rows .keycap, div.keyboard-layer.is-visible .rows .action");if(o)for(let e of o){let i=e.getAttribute("data-unshifted-content");i&&(e.innerHTML=n.options.createHTML(i),e.dataset.unshiftedContent="");let a=e.getAttribute("data-unshifted-command");a&&(e.dataset.command=a,e.dataset.unshiftedCommand="")}return!1}function a$(n){return Object.keys(n).map(o=>`${o} {${function o$(n){return"string"==typeof n?n:Object.entries(n).map(([o,e])=>`${o}:${e} !important`).join(";")}(n[o])}}`).join("")}function eT(n,o){Ag(n),Tg(),Rx(n);let e=n?.element.querySelectorAll(".keyboard-layer"),i=!1;for(let a of e)if(a.dataset.layer===o){i=!0;break}if(i)for(let a of e)a.dataset.layer===o?a.classList.add("is-visible"):a.classList.remove("is-visible");return n.focusMathfield(),!0}function Ag(n,o=""){let e=n.options.virtualKeyboardContainer;if(!e||!n.stateWillChange(!0))return!1;if(n.element?n.element.classList.add("is-visible"):n.buildAndAttachElement(o),!n.visible){let i=pa();i.visibleVirtualKeyboard&&dw(i.visibleVirtualKeyboard),i.visibleVirtualKeyboard=n;let a=e.style.paddingBottom;n.originalContainerBottomPadding=a,e.style.paddingBottom=a?`calc(${a} + var(--keyboard-height, 276px) - 1px)`:"calc(var(--keyboard-height, 276px) - 1px)"}return setTimeout(()=>{var i;null==(i=n.element)||i.classList.add("is-visible"),n.focusMathfield()},1),n.visible=!0,n.stateChanged(),!1}function dw(n){var o,e,i;let a=n.options.virtualKeyboardContainer;return!a||!n.stateWillChange(!1)||(n.element&&(pa().visibleVirtualKeyboard=void 0,n.disable(),Tg(),n.visible=!1,null==(o=n.coreStylesheet)||o.release(),n.coreStylesheet=null,null==(e=n.virtualKeyboardStylesheet)||e.release(),n.virtualKeyboardStylesheet=null,null==(i=n._element)||i.remove(),n._element=void 0,null!==n.originalContainerBottomPadding&&(a.style.paddingBottom=n.originalContainerBottomPadding)),n.visible=!1,n.stateChanged()),!1}function Ux(n,o,e){"function"==typeof o&&(e=o,o=1/0),void 0===o&&(o=1/0);let i=n.position,a=!1,r="";for(;!a;){let s=n.at(i);a=0===o||void 0===s||"math"!==s.mode||!(/mord|textord|mpunct/.test(s.type)||"mop"===s.type&&/[a-zA-Z]+/.test(s.value))||!s.hasEmptyBranch("superscript")||!s.hasEmptyBranch("subscript")||"function"==typeof e&&!e(s),a||(s.mode="text",s.command=s.value,s.verbatimLatex=void 0,r+=s.value),i-=1,o-=1}Po(n,{data:r,inputType:"insertText"})}function Sg(n,o,e){"function"==typeof o&&(e=o,o=1/0),void 0===o&&(o=1/0);let i=n.position,a=!1,r=[];for(;!a;){let s=n.at(i);a=0===o||!s||s.isFirstSibling||"text"!==s.mode||" "===s.value||e&&!e(s),a||(r.push(s.serialize({defaultMode:"math"})),s.mode="math"),i-=1,o-=1}mw(n),Po(n,{data:Fo(r),inputType:"insertText"})}function mw(n){var o;let e=n.position-1;for(;e>=0&&"math"===(null==(o=n.at(e))?void 0:o.mode);)e-=1;if(!(e<0)&&"text"===n.at(e).mode&&" "===n.at(e).value&&"math"===n.at(e-1).mode){n.at(e-1).parent.removeChild(n.at(e-1));let i=n.suppressChangeNotifications;n.suppressChangeNotifications=!0,n.position-=1,n.suppressChangeNotifications=i,Po(n,{inputType:"deleteContent"})}}Yr({showAlternateKeys:function VG(n,o){var e,i;let a=co[o],r=document.createElement("div");r.setAttribute("aria-hidden","true"),r.className="ML__keyboard alternate-keys"+(n.element.classList.contains("material")?" material":""),r.id="mathlive-alternate-keys-panel",r.style.width=a.length>=14?"236px":a.length>=7?"286px":4===a.length||2===a.length?"146px":1===a.length?"86px":"146px",r.style.height="auto";let s="";for(let d of a)s+="<li","string"==typeof d?s+=' data-latex="'+d.replace(/"/g,"&quot;")+'"':(d.latex&&(s+=' data-latex="'+d.latex.replace(/"/g,"&quot;")+'"'),d.content&&(s+=' data-content="'+d.content.replace(/"/g,"&quot;")+'"'),d.insert&&(s+=' data-insert="'+d.insert.replace(/"/g,"&quot;")+'"'),d.command&&(s+="string"==typeof d.command?` data-command="${d.command.replace(/"/g,"&quot;")}"`:" data-command='"+JSON.stringify(d.command).replace(/"/g,"&quot;")+"'"),d.aside&&(s+=` data-aside="${d.aside.replace(/"/g,"&quot;")}"`),d.class&&(s+=` data-classes="${d.class}"`)),s+=">",s+="string"==typeof d?d:null!=(e=d.label)?e:"",s+="</li>";s="<ul>"+s+"</ul>",r.innerHTML=n.options.createHTML(s),tT(n,[...r.querySelectorAll("li")],"performAlternateKeys"),zp.scrim||(zp.scrim=new zp),zp.scrim.open({root:n.options.virtualKeyboardContainer,child:r});let l=null==(i=n?.element)?void 0:i.querySelector('div.keyboard-layer.is-visible div.rows ul li[data-alt-keys="'+o+'"]'),c=l?.getBoundingClientRect();if(c){c.top-r.clientHeight<0&&(r.style.width="auto",a.length<=6?r.style.height="56px":a.length<=12?r.style.height="108px":a.length<=18?r.style.height="205px":r.classList.add("compact"));let d=(c.top-r.clientHeight+5).toString()+"px",h=Math.max(0,Math.min(window.innerWidth-r.offsetWidth,(c.left+c.right-r.offsetWidth)/2))+"px";r.style.transform="translate("+h+","+d+")",r.classList.add("is-visible")}return!1}},{target:"virtual-keyboard"}),Yr({shiftKeyboardLayer:function r$(n){let o=n?.element.querySelectorAll("div.keyboard-layer.is-visible .rows .keycap, div.keyboard-layer.is-visible .rows .action");if(o)for(let e of o){if(e.dataset.unshiftedContent)return!1;let i=e.getAttribute("data-shifted");if(i||/^[a-z]$/.test(e.innerHTML)){e.dataset.unshiftedContent=e.innerHTML,i||(i=e.innerHTML.toUpperCase()),e.innerHTML=n.options.createHTML(i);let a=e.getAttribute("data-command");if(a){e.dataset.unshiftedCommand=a;let r=e.getAttribute("data-shifted-command");if(r)e.dataset.command=r;else{let s=JSON.parse(a);qa(s)&&(s[1]=s[1].toUpperCase()),e.dataset.command=JSON.stringify(s)}}}}return!1}},{target:"virtual-keyboard"}),Yr({hideAlternateKeys:()=>Tg(),performAlternateKeys:function s$(n,o){return Tg(),n.executeCommand(o)},switchKeyboardLayer:(n,o)=>eT(n,o),unshiftKeyboardLayer:n=>Rx(n),insertAndUnshiftKeyboardLayer:function l$(n,o){return n.executeCommand(["insert",o]),Rx(n),!0}},{target:"virtual-keyboard"}),Yr({toggleVirtualKeyboardAlt:function c$(n){let o=!1;return null!=n&&n.element&&(o=n?.element.classList.contains("material"),n.disable()),Ag(n,o?"":"material"),!1},toggleVirtualKeyboardShift:function u$(n){var o,e,i;n.options.virtualKeyboardLayout={qwerty:"azerty",azerty:"qwertz",qwertz:"dvorak",dvorak:"colemak",colemak:"qwerty"}[n.options.virtualKeyboardLayout];let a=null!=(i=null==(e=null==(o=n?.element)?void 0:o.querySelector("div.keyboard-layer.is-visible"))?void 0:e.id)?i:"";return n&&n.disable(),Ag(n),a&&eT(n,a),!1}},{target:"virtual-keyboard"}),Yr({toggleVirtualKeyboard:(n,o)=>function d$(n,o){return n.visible?dw(n):Ag(n,o),!1}(n,o),hideVirtualKeyboard:n=>dw(n),showVirtualKeyboard:(n,o)=>Ag(n,o)},{target:"virtual-keyboard"});var hw,nT="#mathlive-keystroke-caption-panel{visibility:hidden;background:var(--secondary, hsl(var(--hue, 212), 19%, 26%));border-color:var(--secondary-border, hsl(0,0%,91%));box-shadow:0 3px 6px rgba(0,0,0,0.16),0 3px 6px rgba(0,0,0,0.23);text-align:center;border-radius:6px;padding:16px;position:absolute;z-index:1;display:flex;flex-direction:row-reverse;justify-content:center;--keystroke:white;--on-keystroke:#555;--keystroke-border:#f7f7f7}@media (prefers-color-scheme:dark){body:not([theme='light']) #mathlive-keystroke-caption-panel{--keystroke:hsl(var(--hue, 212), 50%, 30%);--on-keystroke:hsl(0,0%,98%);--keystroke-border:hsl(var(--hue, 212), 50%, 25%)}}body[theme='dark'] #mathlive-keystroke-caption-panel{--keystroke:hsl(var(--hue, 212), 50%, 30%);--on-keystroke:hsl(0,0%,98%);--keystroke-border:hsl(var(--hue, 212), 50%, 25%)}#mathlive-keystroke-caption-panel>span{min-width:14px;margin:0 8px 0 0;padding:4px;background-color:var(--keystroke);color:var(--on-keystroke);fill:currentColor;font-family:system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI','Roboto','Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue',sans-serif;font-size:1em;border-radius:6px;border:2px solid var(--keystroke-border)}",pw=null,_w=null;function iT(n){return n.keystrokeCaption||(n.keystrokeCaption=lC("mathlive-keystroke-caption-panel"),void 0===hw&&(hw=Nu(nT).toString(36)),pw=Zu(null,nT,hw),_w=Zu(null,Uc,Nu(Uc).toString(36))),n.keystrokeCaption}function b$(n){if(!n||n.length>1)return null;let o=n[0];return o instanceof ur&&"("===o.leftDelim&&")"===o.rightDelim?o.removeBranch("body"):null}function Bx(n){if(n){for(let o=0;n[o];o++){let e=n[o];if(e instanceof ur&&"("===e.leftDelim){let i=0,a=0,r=0;for(let s=0;e.body[s];s++)"genfrac"===e.body[s].type&&(i++,a=s),r++;0===r&&1===i&&(n[o]=e.body[a])}}for(let o of n){for(let e of o.branches)if(!o.hasEmptyBranch(e)){Bx(o.branch(e));let i=b$(o.branch(e));i&&o.setChildren(i,e)}if(o instanceof Lo)for(let e of o.cells)Bx(e)}}}function oT(n){if(!n)return[];let o=[];for(let e of n){for(let i of e.branches)if(!e.hasEmptyBranch(i)){let a=oT(e.branch(i));o.push(...a)}e instanceof $o&&o.push(e)}return o}function aT(n){return!!/^(mord|surd|msubsup|leftright|mop|mclose)$/.test(n.type)&&!(n.isExtensibleSymbol||n.isFunction)}function fw(n,o,e){let i=n.at(n.position),{parent:a}=i,r=a instanceof ur?a.leftDelim+a.rightDelim:"";if("\\lbrace\\rbrace"===r&&(r="{}"),"\\{\\}"===r&&(r="{}"),"\\lparen\\rparen"===r&&(r="()"),"{}"===r&&/\||\\vert|\\Vert|\\mvert|\\mid/.test(o))return Qo.insert("math",n,"\\,\\middle"+o+"\\, ",{format:"latex",style:e}),!0;if(("{"===o||"\\{"===o)&&(o="\\lbrace"),("}"===o||"\\}"===o)&&(o="\\rbrace"),"["===o&&(o="\\lbrack"),"]"===o&&(o="\\rbrack"),cg[o]){let l=a;if("leftright"===l.type&&l.firstChild===i&&("?"===l.leftDelim||"."===l.leftDelim))return l.leftDelim=o,l.isDirty=!0,!0;if(!(a instanceof ur&&"|"===a.leftDelim)){if(Qo.insert("math",n,`\\left${o}\\right?`,{format:"latex",style:e}),"first"!==i.lastSibling.type){let c=n.offsetOf(i.lastSibling),d=n.extractAtoms([n.position,c]);n.at(n.position).body=d,n.position-=1}return!0}}let s="";if(Object.keys(cg).forEach(l=>{o===cg[l]&&(s=l)}),s){if(a instanceof ur&&i.isLastSibling)return a.isDirty=!0,a.rightDelim=o,n.position+=1,Po(n,{data:o,inputType:"insertText"}),!0;let c,l=n.offsetOf(i.firstSibling);for(c=n.position;c>=l;c--){let _=n.at(c);if(_ instanceof ur&&"?"===_.rightDelim)break}let d=n.at(c);if(c>=l&&d instanceof ur)return d.rightDelim=o,d.addChildren(n.extractAtoms([c,n.position]),i.treeBranch),n.position=c,Po(n,{data:o,inputType:"insertText"}),!0;if(a instanceof ur&&"?"===a.rightDelim)return a.isDirty=!0,a.rightDelim=o,a.parent.addChildren(n.extractAtoms([n.position,n.offsetOf(i.lastSibling)]),a.treeBranch),n.position=n.offsetOf(a),Po(n,{data:o,inputType:"insertText"}),!0;let h=a.parent;return!!(h instanceof ur&&"?"===h.rightDelim&&n.at(n.position).isLastSibling)&&(n.position=n.offsetOf(h),fw(n,o,e))}return!1}function rT(n,o,e){var i,a,r,s;let{model:l}=n;!function oG(n){var o,e;if(!n||"Unidentified"===n.key||"Dead"===n.key)return;let i=n.shiftKey&&n.altKey?3:n.altKey?2:n.shiftKey?1:0;for(let a of gg)(null==(o=a.mapping[n.code])?void 0:o[i])===n.key?a.score+=1:null!=(e=a.mapping[n.code])&&e[i]&&(a.score=0);gg.sort((a,r)=>r.score-a.score)}(e);let c=xg();if(n.keyboardLayout!==c.id&&(n.keyboardLayout=c.id,n._keybindings=void 0),clearTimeout(n.inlineShortcutBufferFlushTimer),n.inlineShortcutBufferFlushTimer=0,function p$(n,o){if(n.options.readOnly||!n.keystrokeCaptionVisible)return;let e=iT(n),i=n.element.getBoundingClientRect();e.style.left=`${i.left}px`,e.style.top=i.top-64+"px",e.innerHTML=n.options.createHTML("<span>"+(z4(o)||o)+"</span>"+e.innerHTML),e.style.visibility="visible",setTimeout(()=>{e.childNodes.length>0&&e.childNodes[e.childNodes.length-1].remove(),0===e.childNodes.length&&(e.style.visibility="hidden")},3e3)}(n,o),e.defaultPrevented)return n.flushInlineShortcutBuffer(),!1;let d,_,h="";if(!n.options.readOnly){if("math"===n.mode)if("[Backspace]"===o)n.inlineShortcutBuffer.pop(),n.flushInlineShortcutBuffer({defer:!0});else if($C(e)){let T=Fx(e),P=[...null!=(a=null==(i=n.inlineShortcutBuffer[n.inlineShortcutBuffer.length-1])?void 0:i.keystrokes)?a:[],T];n.inlineShortcutBuffer.push({state:l.getState(),keystrokes:P,leftSiblings:y$(n)});let U=0,q="";for(;!d&&U<P.length;)_=n.inlineShortcutBuffer.length-(P.length-U),q=P.slice(U).join(""),d=j4(n.inlineShortcutBuffer[_].leftSiblings,q,n.options.inlineShortcuts),!d&&/^[a-zA-Z][a-zA-Z0-9]+?([_\^][a-zA-Z0-9\*\+\-]+?)?$/.test(q)&&(d=n.options.onInlineShortcut(n,q)),U+=1;n.flushInlineShortcutBuffer({defer:!0})}else n.flushInlineShortcutBuffer();if(n.options.smartMode){let T=n.mode;d?n.mode="math":function h$(n,o,e){if(n.smartModeSuppressed)return!1;let{model:i}=n;if(!i.at(i.position).isLastSibling||!e||!$C(e))return!1;let a=Fx(e);if(!i.selectionIsCollapsed)return!("text"!==n.mode||!/[/_^]/.test(a));let r=function m$(n){let o="",e=n.position,i=!1;for(;!i;){let a=n.at(e);i=!(a&&("text"===a.mode||"math"===a.mode&&/mord|textord|mpunct/.test(a.type))),i||(o=a.value+o),e-=1}return o}(i)+a;if("text"===n.mode){if("Esc"===o||/[/\\]/.test(a))return!0;if(/[\^_]/.test(a))return/(^|\s)[a-zA-Z][^_]$/.test(r)&&Sg(i,1),!0;let s={")":"(","}":"{","]":"["}[a],{parent:l}=i.at(i.position);if(s&&l instanceof ur&&l.leftDelim===s)return!0;if(/(^|[^a-zA-Z])(a|I) $/.test(r))return!1;if(/[$\u20ac\xa3\u20a4\u20ba\xa5\xa4\u0e3f\xa2\u20a1\u20a7\u20a8\u20b9\u20a9\u20b1]/u.test(a))return!0;if(/(^|[^a-zA-Z'\u2019])[a-zA-Z] $/.test(r))return Sg(i,1),!1;if(/\D\.[^\d\s]$/.test(r)){Sg(i,1);let c=i.at(i.position);return c.value="\u22c5",c.style.variant="normal",c.command="\\cdot",c.verbatimLatex=void 0,Po(i,{data:"\\cdot",inputType:"insertText"}),!0}if(/(^|\s)[a-zA-Z][^a-zA-Z]$/.test(r)||/\.\d$/.test(r)||/\([\d+\-.]$/.test(r))return Sg(i,1),!0;if(/\([a-z][,;]$/.test(r))return Sg(i,2),!0;if(/[\d+\-=><*|]$/.test(a))return mw(i),!0}else{if("[Space]"===o)return Ux(i,void 0,s=>/[a-z][:,;.]$/.test(s.value)),!0;if(/[a-zA-Z]{3,}$/.test(r)&&!/(dxd|abc|xyz|uvw)$/.test(r))return Ux(i,void 0,s=>/[a-zA-Z]/.test(s.value)),!0;if(/(^|\W)(if)$/i.test(r))return Ux(i,1),!0;if(/(\u0393|\u0394|\u0398|\u039B|\u039E|\u03A0|\u03A3|\u03A5|\u03A6|\u03A8|\u03A9|[\u03B1-\u03C9]|\u03D1|\u03D5|\u03D6|\u03F1|\u03F5){3,}$/u.test(r)&&!/(\u03b1\u03b2\u03b3)$/.test(r))return Ux(i,void 0,s=>/(:|,|;|.|\u0393|\u0394|\u0398|\u039B|\u039E|\u03A0|\u03A3|\u03A5|\u03A6|\u03A8|\u03A9|[\u03B1-\u03C9]|\u03D1|\u03D5|\u03D6|\u03F1|\u03F5)/u.test(s.value)),!0;if("?"===a||"."===a&&!/[\d-+]\.$/.test(r))return!0}return!1}(n,o,e)&&(n.mode={math:"text",text:"math"}[n.mode],h=""),n.mode!==T&&(null!=(r=n.host)&&r.dispatchEvent(new Event("mode-change",{bubbles:!0,composed:!0,cancelable:!0}))||(n.mode=T))}}if(!d){if(h||(h=function sG(n,o,e){if(0===n.length)return"";let i=Ix(bC(e));for(let a=n.length-1;a>=0;a--)if(n[a].key===i&&(!n[a].ifMode||n[a].ifMode===o))return n[a].command;return""}(n.keybindings,n.mode,o)),!h&&("[Enter]"===o||"[Return]"===o)){let T=!1;return ko(l,{inputType:"insertLineBreak"})&&(n.host&&(T=!n.host.dispatchEvent(new Event("change",{bubbles:!0,composed:!0}))),T||e.preventDefault&&(e.preventDefault(),e.stopPropagation()),Po(l,{inputType:"insertLineBreak"})),T}if("math"===n.mode){if("[Space]"===o){if(n.flushInlineShortcutBuffer(),n.options.mathModeSpace)return n.snapshot(),Qo.insert("math",l,n.options.mathModeSpace,{format:"latex"}),h="",n.dirty=!0,n.scrollIntoView(),e.preventDefault&&(e.preventDefault(),e.stopPropagation()),!1;let T=l.at(l.position+1),P=l.at(l.position-1);("text"===T?.mode||"text"===P?.mode)&&(n.snapshot(),Qo.insert("text",l," "),n.dirty=!0)}null!=(s=l.at(l.position))&&s.isDigit()&&","===n.options.decimalSeparator&&","===Fx(e)&&(h="insertDecimalSeparator")}}if(!d&&!h)return!0;let x=l.at(Math.max(l.position,l.anchor)),{parent:b}=x;if("moveAfterParent"===h&&"leftright"===b?.type&&x.isLastSibling&&n.options.smartFence&&fw(l,".",n.style)&&(h="",ea(n)),n.keyboardDelegate.cancelComposition(),h)n.executeCommand(h);else if(d){let T=Ee(Ee({},l.at(l.position).computedStyle),n.style);if(!/^\\({|}|\[|]|@|#|\$|%|&|\^|_|backslash)$/.test(d)){let P=n.mode;Qo.insert(n.mode,l,Fx(e),{suppressChangeNotifications:!0,style:T}),n.snapshot(),l.setState(n.inlineShortcutBuffer[_].state),n.mode=P}l.deferNotifications({content:!0,selection:!0,data:d??null,type:"insertText"},()=>(Qo.insert(n.mode,l,d,{format:"latex",style:T}),mw(n.model),d.endsWith(" ")&&(n.mode="text",Qo.insert("text",l," ",{style:T})),!0)),n.snapshot(),n.dirty=!0,l.announce("replacement")}return n.scrollIntoView(),e.preventDefault&&e.preventDefault(),!1}function gw(n,o,e){var i;let{model:a}=n;if(n.options.readOnly)return void a.announce("plonk");if((e=e??{}).focus&&n.focus(),e.feedback&&(n.options.keypressVibration&&l4()&&navigator.vibrate(3),n.playSound("keypress")),"string"==typeof e.mode&&n.switchMode(e.mode),e.simulateKeystroke){let c=o.charAt(0),d=new KeyboardEvent("keypress",{key:c});if(!rT(n,c,d))return}let r=a.at(a.position),s=Ee(Ee({},r.computedStyle),n.style);a.selectionIsCollapsed||(a.deleteAtoms(gl(a.selection)),n.snapshot());let l=z5(o);if("latex"===n.mode)a.deferNotifications({content:!0,selection:!0,data:o,type:"insertText"},()=>{H4(n);for(let c of l)Qo.insert("latex",a,c);Lx(n)});else if("text"===n.mode)for(let c of l)Qo.insert("text",a,c,{style:s});else if("math"===n.mode)for(let c of l){let d={"^":"moveToSuperscript",_:"moveToSubscript"," ":"moveAfterParent"}[c];" "===c&&n.options.mathModeSpace&&(d=["insert",n.options.mathModeSpace]),d?n.executeCommand(d):/\d/.test(c)&&n.options.smartSuperscript&&"superscript"===r.treeBranch&&"mop"!==(null==(i=r.parent)?void 0:i.type)&&r.hasNoSiblings?(Qo.insert("math",a,c,{style:s}),UC(a)):("mord"===r.type&&/[a-zA-Z]/.test(r.value)&&/[a-zA-Z]/.test(c)&&(r.style.variant&&(s.variant=r.style.variant),r.style.variantStyle&&(s.variantStyle=r.style.variantStyle)),Qo.insert("math",a,c,{style:s}))}n.snapshotAndCoalesce(),n.dirty=!0,n.scrollIntoView()}function y$(n){let o=n.model,e=[],i=o.at(Math.min(o.position,o.anchor));for(;"first"!==i.type;)e.push(i),i=i.leftSibling;return e}function sT(n,o){var e,i,a,r,s,l;let c={};"string"==typeof o.color&&(c.verbatimColor=o.color,c.color=null!=(e=n.colorMap(o.color))?e:"none"),"string"==typeof o.backgroundColor&&(c.verbatimBackgroundColor=o.backgroundColor,c.backgroundColor=null!=(i=n.backgroundColorMap(o.backgroundColor))?i:"none"),"string"==typeof o.fontFamily&&(c.fontFamily=o.fontFamily),"string"==typeof o.series&&(c.fontSeries=o.series),"string"==typeof o.fontSeries&&(c.fontSeries=o.fontSeries.toLowerCase()),c.fontSeries&&(c.fontSeries=null!=(a={bold:"b",medium:"m",normal:"m"}[c.fontSeries])?a:c.fontSeries),"string"==typeof o.shape&&(c.fontShape=o.shape),"string"==typeof o.fontShape&&(c.fontShape=o.fontShape.toLowerCase()),c.fontShape&&(c.fontShape=null!=(r={italic:"it",up:"n",upright:"n",normal:"n"}[c.fontShape])?r:c.fontShape);let d=null!=(s=o.size)?s:o.fontSize;return"number"==typeof d?c.fontSize=Math.max(1,Math.min(10,d)):"string"==typeof d&&(c.fontSize=null!=(l={size1:1,size2:2,size3:3,size4:4,size5:5,size6:6,size7:7,size8:8,size9:9,size10:10}[d.toLowerCase()])?l:{tiny:1,scriptsize:2,footnotesize:3,small:4,normal:5,normalsize:5,large:6,Large:7,LARGE:8,huge:9,Huge:10}[d]),c}new class extends Qo{constructor(){super("math")}onPaste(n,o){if(!o||!ko(n.model,{data:"string"==typeof o?o:null,dataTransfer:"string"==typeof o?null:o,inputType:"insertFromPaste"}))return!1;let e="",i="auto",a="string"!=typeof o?o.getData("application/json+mathlive"):"";if(a)try{let r=JSON.parse(a);if(r&&Array.isArray(r)){n.snapshot();let s=$l(r,n),{model:l}=n;l.selectionIsCollapsed||l.deleteAtoms(gl(l.selection));let c=l.at(l.position);if(c.parent instanceof Lo){let d=[],h=[];"first"===s[0].type&&s.shift(),"first"===s[s.length-1].type&&s.pop();for(let T of s)"first"===T.type&&h.length>0?(d.push(h),h=[T]):h.push(T);h.length>0&&d.push(h);let _=Number(c.treeBranch[0]),x=Number(c.treeBranch[1]),b=c.parent.maxColumns;for(;c.parent.colCount-x<d.length&&c.parent.colCount<b;)c.parent.addColumn();c.parent.addChildrenAfter(d[0],c);for(let T=1;T<d.length;T++)x++,x>=b&&(x=0,c.parent.addRowAfter(_),_++),c.parent.setCell(_,x,d[T])}else c.parent.addChildrenAfter(s.filter(d=>"first"!==d.type),c);return l.position=l.offsetOf(s[s.length-1]),Po(l,{inputType:"insertFromPaste"}),ea(n),!0}}catch{}if(a="string"!=typeof o?o.getData("application/json"):"",a&&n.computeEngine)try{let r=JSON.parse(a);if("object"==typeof r&&"latex"in r&&r.latex&&(e=r.latex),!e){let s=n.computeEngine.box(r);s&&!s.has("Error")&&(e=s.latex)}e||(i="latex")}catch{}if(!e&&"string"!=typeof o&&(e=o.getData("application/x-latex"),e&&(i="latex")),e||(e="string"==typeof o?o:o.getData("text/plain")),e){let r;return n.snapshot(),[r,e]=q4(e),"auto"===i&&r&&(i="latex"),this.insert(n.model,e,{format:i})&&ea(n),!0}return!1}insert(n,o,e){var i,a;let r="string"==typeof o?o:null!=(a=null==(i=n.mathfield.computeEngine)?void 0:i.box(o).latex)?a:"";if(!e.suppressChangeNotifications&&!ko(n,{data:r,inputType:"insertText"}))return!1;if(e.insertionMode||(e.insertionMode="replaceSelection"),e.selectionMode||(e.selectionMode="placeholder"),e.format||(e.format="auto"),n.mathfield.smartFence){if(n.selectionIsCollapsed&&"string"==typeof o&&fw(n,o,e.style))return!0}else if("replaceAll"!==e.insertionMode){let{parent:G}=n.at(n.position);if(G instanceof ur&&"?"===G.rightDelim&&n.at(n.position).isLastSibling&&"string"==typeof o&&/^[)}\]|]$/.test(o))return G.isDirty=!0,G.rightDelim=o,n.position+=1,kC(n),Po(n,{data:r,inputType:"insertText"}),!0}let{suppressChangeNotifications:s}=n;e.suppressChangeNotifications&&(n.suppressChangeNotifications=!0);let l=n.suppressChangeNotifications;n.suppressChangeNotifications=!0;let c={};if(c[0]="replaceAll"===e.insertionMode?"":n.getValue(n.selection,"latex-unstyled"),c["?"]="\\placeholder{}",c["@"]=c["?"],"replaceSelection"!==e.insertionMode||n.selectionIsCollapsed?"replaceAll"===e.insertionMode?(n.root.setChildren([],"body"),n.position=0):"insertBefore"===e.insertionMode?n.collapseSelection("backward"):"insertAfter"===e.insertionMode&&n.collapseSelection("forward"):n.deleteAtoms(gl(n.selection)),n.at(n.position).isLastSibling||"placeholder"!==n.at(n.position+1).type?"placeholder"===n.at(n.position).type&&n.deleteAtoms([n.position-1,n.position]):n.deleteAtoms([n.position,n.position+1]),c[0])c["@"]=c[0];else if("string"==typeof o&&/(^|[^\\])#@/.test(o)){let G=function v$(n){let o=n.at(n.position);if("text"===o.mode){for(;!o.isFirstSibling&&"text"===o.mode;)o=o.leftSibling;return n.offsetOf(o)}let e=o,i=!1;if("mclose"===o.type){let a=J5[o.value];for(;!o.isFirstSibling&&("mopen"!==o.type||o.value!==a);)o=o.leftSibling;o.isFirstSibling||(o=o.leftSibling),i=!0}else"leftright"===o.type&&(o=o.leftSibling,i=!0);if(i)for(;!o.isFirstSibling&&(o.isFunction||aT(o));)o=o.leftSibling;else{let a=[];for(;!o.isFirstSibling&&(aT(o)||a.length>0);)"mclose"===o.type&&a.unshift(o.value),"mopen"===o.type&&a.length>0&&o.value===J5[a[0]]&&a.shift(),o=o.leftSibling}return e===o?-1:n.offsetOf(o)}(n);G>=0&&(c["@"]=n.getValue(G,n.position,"latex-unstyled"),n.deleteAtoms([G,n.position]))}c[0]||(c[0]=c["?"]);let d=!1,[_,x]=function x$(n,o,e,i){var a;let r,s=[];if("string"!=typeof o||"math-json"===i.format){if(!n.mathfield.computeEngine)return["math-json",[]];[r,o]=["latex",n.mathfield.computeEngine.box(o).latex],s=Gr(o,n.mathfield,{parseMode:"math"})}else"string"==typeof o&&"ascii-math"===i.format?([r,o]=Sx(o,{format:"ascii-math",inlineShortcuts:n.mathfield.options.inlineShortcuts}),s=Gr(o,n.mathfield,{parseMode:"math"}),"latex"!==r&&n.options.removeExtraneousParentheses&&Bx(s)):("auto"===i.format||null!=(a=i.format)&&a.startsWith("latex"))&&("auto"===i.format&&([r,o]=Sx(o,{format:"auto",inlineShortcuts:n.mathfield.options.inlineShortcuts})),"latex"===i.format&&([,o]=q4(o)),s=Gr(o,n.mathfield,{parseMode:"math",args:e}),"latex"!==i.format&&n.options.removeExtraneousParentheses&&Bx(s));return Dd(s,i.style),[r??"latex",s]}(n,o,G=>(d=!0,c[G]),e);if(!x)return!1;let b=oT(x),T=b.filter(G=>G.placeholderId&&!n.mathfield.placeholders.has(G.placeholderId)),P=b.map(G=>G.placeholderId);[...n.mathfield.placeholders.keys()].filter(G=>!P.includes(G)).forEach(G=>{var nt;n.mathfield.placeholders.has(G)&&(null==(nt=n.mathfield.placeholders.get(G))||nt.field.remove(),n.mathfield.placeholders.delete(G))}),T.forEach(G=>{var nt,At;G.placeholderId&&n.mathfield.placeholders.has(G.placeholderId);let ut=n.mathfield.options.virtualKeyboardMode;"manual"===ut&&(ut="onfocus");let et=new ww(ei(Ee({},n.mathfield.options),{virtualKeyboardMode:ut,readOnly:!1})),vt=G.defaultValue?ke.serialize(G.defaultValue,{defaultMode:"math"}):"";et.value=vt,et.addEventListener("input",()=>{(function dG(n,o){n.suppressChangeNotifications||!n.mathfield.host||(n.suppressChangeNotifications=!0,n.mathfield.host.dispatchEvent(new CustomEvent("placeholder-change",{detail:{placeholderId:o},bubbles:!0,composed:!0})),n.suppressChangeNotifications=!1)})(n,G.placeholderId),setTimeout(()=>ea(n.mathfield))}),null==(At=null==(nt=n.mathfield.element)?void 0:nt.querySelector(".ML__placeholdercontainer"))||At.appendChild(et),n.mathfield.placeholders.set(G.placeholderId,{atom:G,field:et})});let{parent:U}=n.at(n.position);if("latex"!==_&&n.options.removeExtraneousParentheses&&U instanceof ur&&"("===U.leftDelim&&U.hasEmptyBranch("body")&&1===x.length&&"genfrac"===x[0].type){let G=U.parent,nt=U.treeBranch;G.removeChild(U),G.setChildren(x,nt)}let q=U.hasEmptyBranch("body"),B=n.at(n.position);B.parent.addChildrenAfter(x,B),"latex"===_&&"string"==typeof o&&"root"===U.type&&q&&!d&&(U.verbatimLatex=o),n.suppressChangeNotifications=l;let W=x[x.length-1];if("placeholder"===e.selectionMode){let G=x.reduce((nt,At)=>[...nt,...At.children.filter(ut=>"placeholder"===ut.type)],[]);if(G.length>0){let nt=n.offsetOf(G[0]);n.setSelection(nt-1,nt),n.announce("move")}else W&&(n.position=n.offsetOf(W))}else"before"===e.selectionMode||("after"===e.selectionMode?W&&(n.position=n.offsetOf(W)):"item"===e.selectionMode&&n.setSelection(n.anchor,n.offsetOf(W)));return Po(n,{data:r,inputType:"insertText"}),n.suppressChangeNotifications=s,!0}},Yr({undo:n=>(Xm(n,"accept"),n.undo(),!0),redo:n=>(Xm(n,"accept"),n.redo(),!0),scrollIntoView:n=>(n.scrollIntoView(),!0),scrollToStart:n=>(n.field.scroll(0,0),!0),scrollToEnd:n=>{let o=n.field.getBoundingClientRect();return n.field.scroll(o.left-window.scrollX,0),!0},toggleKeystrokeCaption:function _$(n){return n.keystrokeCaptionVisible=!n.keystrokeCaptionVisible,n.keystrokeCaptionVisible?(n.keystrokeCaption=iT(n),n.keystrokeCaption.innerHTML=""):n.keystrokeCaption&&(n.keystrokeCaption.style.visibility="hidden"),!1},plonk:n=>(n.model.announce("plonk"),!0),switchMode:(n,o,e,i)=>(n.switchMode(o,e,i),!0),insert:(n,o,e)=>n.insert(o,e),typedText:(n,o,e)=>(gw(n,o,e),!0),insertDecimalSeparator:n=>{if("math"===n.mode&&","===n.options.decimalSeparator){let o=n.model;if(o.at(Math.max(o.position,o.anchor)).isDigit())return n.snapshot(),n.insert("{,}",{format:"latex"}),!0}return n.insert("."),!0},commit:n=>{var o;return ko(n.model,{inputType:"insertLineBreak"})&&(null==(o=n.host)||o.dispatchEvent(new Event("change",{bubbles:!0,composed:!0})),Po(n.model,{inputType:"insertLineBreak"})),!0}}),Yr({copyToClipboard:n=>(n.focus(),n.model.selectionIsCollapsed&&n.select(),document.queryCommandSupported("copy")?document.execCommand("copy"):n.element.querySelector(".ML__keyboard-sink").dispatchEvent(new ClipboardEvent("copy",{bubbles:!0,composed:!0})),!1),cutToClipboard:n=>(n.focus(),document.queryCommandSupported("cut")?document.execCommand("cut"):n.element.querySelector(".ML__keyboard-sink").dispatchEvent(new ClipboardEvent("cut",{bubbles:!0,composed:!0})),!0),pasteFromClipboard:n=>(n.focus(),document.queryCommandSupported("paste")?document.execCommand("paste"):navigator.clipboard.readText().then(o=>{o&&ko(n.model,{inputType:"insertFromPaste",data:o})?(n.snapshot(),n.insert(o)&&(Po(n.model,{inputType:"insertFromPaste"}),ea(n))):n.model.announce("plonk")}),!0)},{target:"mathfield",category:"clipboard"}),Yr({applyStyle:function w$(n,o){n.flushInlineShortcutBuffer();let e=sT(n,o),{model:i}=n;return i.selectionIsCollapsed?(n.style.fontSeries&&e.fontSeries===n.style.fontSeries&&(e.fontSeries="auto"),e.fontShape&&e.fontShape===n.style.fontShape&&(e.fontShape="auto"),e.color&&e.color===n.style.color&&(e.color="none"),e.backgroundColor&&e.backgroundColor===n.style.backgroundColor&&(e.backgroundColor="none"),e.fontSize&&e.fontSize===n.style.fontSize&&(e.fontSize="auto"),n.style=Ee(Ee({},n.style),e)):n.model.deferNotifications({content:!0,type:"insertText"},()=>{i.selection.ranges.forEach(a=>sw(i,a,e,{operation:"toggle"})),n.snapshot()}),!0}},{target:"mathfield"});var eh=null,Og=0;function lT(n){return n instanceof PointerEvent}function C$(n,o,e){if(n>=e.left&&n<=e.right&&o>=e.top&&o<=e.bottom)return 0;let i=n-(e.left+e.right)/2,a=o-(e.top+e.bottom)/2;return i*i+a*a}function uT(n,o,e,i,a){if(!e.id)return[1/0,null];if(o.has(e.id))return o.get(e.id);let r=fg(n,e);if(!r)return[1/0,null];let s=[1/0,null];if(e.hasChildren&&!e.captureSelection&&i>=r.left&&i<=r.right)for(let l of e.children){let c=uT(n,o,l,i,a);c[0]<=s[0]&&(s=c)}return s[1]||(s=[C$(i,a,r),e]),o.set(e.id,s),s}function T$(n,o,e){let[,i]=uT(n,new Map,n.model.root,o,e);return i}function Eg(n,o,e,i){var a;let r=n.fieldContent.getBoundingClientRect();if(o>r.right||e>r.bottom+8)return n.model.lastOffset;if(o<r.left||e<r.top-8)return 0;(i=i??{}).bias=null!=(a=i.bias)?a:0;let s=T$(n,o,e),l=[],c=s;for(;c;)l.unshift(c),c=c.parent;for(let h of l)if(h.captureSelection){s=h;break}let d=n.model.offsetOf(s);if(d<0)return-1;if(s.leftSibling)if(0===i.bias&&"placeholder"!==s.type){let h=fg(n,s);h&&o<(h.left+h.right)/2&&(d=n.model.offsetOf(s.leftSibling))}else i.bias<0&&(d=n.model.offsetOf(s.leftSibling));return d}new class extends Qo{constructor(){super("text")}onPaste(n,o){if(!o)return!1;let e="string"==typeof o?o:o.getData("text/plain");return!(!e||!ko(n.model,{inputType:"insertFromPaste",data:e})||(n.snapshot(),this.insert(n.model,e)&&(Po(n.model,{inputType:"insertFromPaste"}),ea(n)),0))}insert(n,o,e={}){if(!ko(n,{data:o,inputType:"insertText"}))return!1;e.insertionMode||(e.insertionMode="replaceSelection"),e.selectionMode||(e.selectionMode="placeholder"),e.format||(e.format="auto");let{suppressChangeNotifications:i}=n;e.suppressChangeNotifications&&(n.suppressChangeNotifications=!0);let a=n.suppressChangeNotifications;n.suppressChangeNotifications=!0,"replaceSelection"!==e.insertionMode||n.selectionIsCollapsed?"replaceAll"===e.insertionMode?(n.root.setChildren([],"body"),n.position=0):"insertBefore"===e.insertionMode?n.collapseSelection("backward"):"insertAfter"===e.insertionMode&&n.collapseSelection("forward"):n.deleteAtoms(gl(n.selection));let r=function A$(n,o){return Gr(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=n.replace(/\\/g,"\\textbackslash ")).replace(/#/g,"\\#")).replace(/\$/g,"\\$")).replace(/%/g,"\\%")).replace(/&/g,"\\&")).replace(/_/g,"\\_")).replace(/{/g,"\\textbraceleft ")).replace(/}/g,"\\textbraceright ")).replace(/\^/g,"\\textasciicircum ")).replace(/~/g,"\\textasciitilde ")).replace(/\xa3/g,"\\textsterling "),o,{parseMode:"text"})}(o,n.mathfield);if(Dd(r,e.style),!r)return!1;let s=n.at(n.position),l=s.parent.addChildrenAfter(r,s);return n.suppressChangeNotifications=a,"before"===e.selectionMode||("item"===e.selectionMode?n.setSelection(n.anchor,n.offsetOf(l)):l&&(n.position=n.offsetOf(l))),Po(n,{data:o,inputType:"insertText"}),n.suppressChangeNotifications=i,!0}};var xw,bw,zx="mathlive#remote-virtual-keyboard-message";function Mg(n){if("object"!=typeof n)return{};let o={};return n.fontsDirectory&&(o.fontsDirectory=n.fontsDirectory),n.soundsDirectory&&(o.soundsDirectory=n.soundsDirectory),n.virtualKeyboards&&(o.virtualKeyboards=n.virtualKeyboards),n.virtualKeyboardLayout&&(o.virtualKeyboardLayout=n.virtualKeyboardLayout),n.customVirtualKeyboardLayers&&(o.customVirtualKeyboardLayers=n.customVirtualKeyboardLayers),n.customVirtualKeyboards&&(o.customVirtualKeyboards=n.customVirtualKeyboards),n.virtualKeyboardTheme&&(o.virtualKeyboardTheme=n.virtualKeyboardTheme),n.keypressVibration&&(o.keypressVibration=n.keypressVibration),n.keypressSound&&(o.keypressSound=n.keypressSound),n.plonkSound&&(o.plonkSound=n.plonkSound),n.virtualKeyboardToolbar&&(o.virtualKeyboardToolbar=n.virtualKeyboardToolbar),n.targetOrigin&&(o.targetOrigin=n.targetOrigin),n.originValidator&&(o.originValidator=n.originValidator),o}Ds()||console.error('MathLive: this version of the MathLive library is for use in the browser. A subset of the API is available on the server side in the "mathlive-ssr" library. If using server side rendering (with React for example) you may want to do a dynamic import of the MathLive library inside a `useEffect()` call.');var vw=Ds()?document.createElement("template"):null;vw&&(vw.innerHTML='<style>\n:host { display: block; position: relative; overflow: hidden auto;}\n:host([hidden]) { display: none; }\n:host([disabled]) { opacity:  .5; }\n:host(:focus), :host(:focus-within) {\n  outline: Highlight auto 1px;    /* For Firefox */\n  outline: -webkit-focus-ring-color auto 1px;\n}\n:host([readonly]), :host([read-only]) { outline: none; }\n</style>\n<div></div><slot style="display:none"></slot>');var Di=new WeakMap,Kl=class extends HTMLElement{constructor(n){super(),yw()&&(this._internals=this.attachInternals(),this._internals.role="math",this._internals.ariaLabel="math input field",this._internals.ariaMultiLine="false"),this.attachShadow({mode:"open"}),this.shadowRoot.append(vw.content.cloneNode(!0));let o=this.shadowRoot.querySelector("slot:not([name])");this._slotValue=o.assignedNodes().map(e=>3===e.nodeType?e.textContent:"").join("").trim(),n&&this.setOptions(n),this.shadowRoot.host.addEventListener("pointerdown",e=>this.onPointerDown(),!0),this.shadowRoot.host.addEventListener("focus",()=>{var e;return null==(e=this._mathfield)?void 0:e.focus()},!0),this.shadowRoot.host.addEventListener("blur",()=>{var e;return null==(e=this._mathfield)?void 0:e.blur()},!0)}static get formAssociated(){return yw()}static get optionsAttributes(){return{"default-mode":"string","fonts-directory":"string","sounds-directory":"string","horizontal-spacing-scale":"string","math-mode-space":"string","inline-shortcut-timeout":"string","keypress-vibration":"on/off","keypress-sound":"string","plonk-sound":"string","letter-shape-style":"string",locale:"string","read-only":"boolean","remove-extraneous-parentheses":"on/off","smart-fence":"on/off","smart-mode":"on/off","smart-superscript":"on/off","speech-engine":"string","speech-engine-rate":"string","speech-engine-voice":"string","text-to-speech-markup":"string","text-to-speech-rules":"string","virtual-keyboard-layout":"string","virtual-keyboard-mode":"string","virtual-keyboard-theme":"string","virtual-keyboards":"string","use-shared-virtual-keyboard":"boolean","shared-virtual-keyboard-target-origin":"string"}}static get observedAttributes(){return[...Object.keys(Kl.optionsAttributes),"disabled","readonly","read-only"]}onPointerDown(){window.addEventListener("pointerup",n=>{n.target===this&&this.dispatchEvent(new MouseEvent("click",{altKey:n.altKey,button:n.button,buttons:n.buttons,clientX:n.clientX,clientY:n.clientY,ctrlKey:n.ctrlKey,metaKey:n.metaKey,movementX:n.movementX,movementY:n.movementY,relatedTarget:n.relatedTarget,screenX:n.screenX,screenY:n.screenY,shiftKey:n.shiftKey}))},{once:!0})}getPlaceholderField(n){var o;return null==(o=this._mathfield)?void 0:o.getPlaceholderField(n)}addEventListener(n,o,e){return super.addEventListener(n,o,e)}removeEventListener(n,o,e){super.removeEventListener(n,o,e)}get form(){var n;return null==(n=this._internals)?void 0:n.form}get name(){var n;return null!=(n=this.getAttribute("name"))?n:""}get type(){return this.localName}get mode(){var n,o;return null!=(o=null==(n=this._mathfield)?void 0:n.mode)?o:"math"}set mode(n){this._mathfield&&(this._mathfield.mode=n)}get computeEngine(){if(this._mathfield)return this._mathfield.computeEngine}set computeEngine(n){this._mathfield&&this._mathfield.setOptions({computeEngine:n})}get expression(){if(this._mathfield)return globalThis[Symbol.for("io.cortexjs.compute-engine")]||console.error('MathLive: The CortexJS Compute Engine library is not available.\nLoad the library, for example with:\nimport "https://unpkg.com/@cortex-js/compute-engine?module"'),this._mathfield.expression}set expression(n){var o,e;if(!this._mathfield)return;let i=null!=(e=null==(o=this.computeEngine)?void 0:o.box(n).latex)?e:null;null!==i&&this._mathfield.setValue(i),globalThis[Symbol.for("io.cortexjs.compute-engine")]||console.error('MathLive: The CortexJS Compute Engine library is not available.\nLoad the library, for example with:\nimport "https://unpkg.com/@cortex-js/compute-engine?module"')}get errors(){var n,o;return null!=(o=null==(n=this._mathfield)?void 0:n.errors)?o:[]}get placeholders(){if(!this._mathfield)return{};let n={};for(let[o,e]of this._mathfield.placeholders)n[o]=e.field;return n}getOptions(n){return this._mathfield?Up(this._mathfield.options,n):Di.has(this)?Up(V4(X4(),Di.get(this).options),n):null}getOption(n){return this.getOptions([n])[n]}setOptions(n){if(this._mathfield)this._mathfield.setOptions(n),this._mathfield.placeholders.forEach(o=>{o.field.setOptions(ei(Ee({},n),{readOnly:!1}))});else if(Di.has(this)){let o=Ee(Ee({},Di.get(this).options),n);Di.set(this,ei(Ee({},Di.get(this)),{selection:{ranges:o.readOnly?[[0,0]]:[[0,-1]]},options:o}))}else Di.set(this,{value:void 0,selection:{ranges:[[0,0]]},options:n});!function M$(n){let o=X4(),e=n.getOptions();Object.keys(Kl.optionsAttributes).forEach(i=>{let a=zc(i);"on/off"===Kl.optionsAttributes[i]?o[a]!==e[a]?n.setAttribute(i,e[a]?"on":"off"):n.removeAttribute(i):o[a]!==e[a]&&("boolean"===Kl.optionsAttributes[i]?e[a]?n.setAttribute(i,""):n.removeAttribute(i):("string"==typeof e[a]||"number"==typeof e[a])&&n.setAttribute(i,e[a].toString()))})}(this)}executeCommand(n){var o,e;return null!=(e=null==(o=this._mathfield)?void 0:o.executeCommand(n))&&e}getValue(n,o,e){var i,a;if(this._mathfield)return this._mathfield.model.getValue(n,o,e);if(Di.has(this)){let r,s,l;if(Dx(n)?([r,s]=n.ranges[0],l=o):Zx(n)?([r,s]=n,l=o):Zd(n)&&Zd(o)?(r=n,s=o,l=e):(r=0,s=-1,l=n),(void 0===l||"latex"===l)&&0===r&&-1===s)return null!=(a=null!=(i=Di.get(this).value)?i:this.textContent)?a:""}return""}setValue(n,o){if(this._mathfield&&void 0!==n)return o||(o={suppressChangeNotifications:!0}),void this._mathfield.setValue(n,o);if(Di.has(this)){let i=Di.get(this).options;return void Di.set(this,{value:n,selection:{ranges:i.readOnly?[[0,0]]:[[0,-1]],direction:"forward"},options:i})}let e=Jx(this);Di.set(this,{value:n,selection:{ranges:e.readOnly?[[0,0]]:[[0,-1]],direction:"forward"},options:e})}hasFocus(){var n,o;return null!=(o=null==(n=this._mathfield)?void 0:n.hasFocus())&&o}get virtualKeyboardState(){var n,o;return null!=(o=null==(n=this._mathfield)?void 0:n.virtualKeyboardState)?o:"hidden"}set virtualKeyboardState(n){this._mathfield&&(this._mathfield.virtualKeyboardState=n)}focus(){super.focus()}blur(){var n;null==(n=this._mathfield)||n.blur(),super.blur()}select(){var n;null==(n=this._mathfield)||n.select()}insert(n,o){var e,i;return null!=(i=null==(e=this._mathfield)?void 0:e.insert(n,o))&&i}applyStyle(n,o){var e;return null==(e=this._mathfield)?void 0:e.applyStyle(n,o)}get caretPoint(){var n,o;return null!=(o=null==(n=this._mathfield)?void 0:n.getCaretPoint())?o:null}set caretPoint(n){var o;n&&(null==(o=this._mathfield)||o.setCaretPoint(n.x,n.y))}setCaretPoint(n,o){var e,i;return null!=(i=null==(e=this._mathfield)?void 0:e.setCaretPoint(n,o))&&i}offsetFromPoint(n,o,e){return this._mathfield?Eg(this._mathfield,n,o,e):-1}hitboxFromOffset(n){if(!this._mathfield)return null;let o=this._mathfield.model.at(n);if(!o)return null;let e=fg(this._mathfield,o);return e?new DOMRect(e.left,e.top,e.right-e.left,e.bottom-e.top):null}resetUndo(){var n;null==(n=this._mathfield)||n.resetUndo()}canUndo(){return!!this._mathfield&&this._mathfield.canUndo()}canRedo(){return!!this._mathfield&&this._mathfield.canRedo()}connectedCallback(){var n,o,e;yw()||(this.hasAttribute("role")||this.setAttribute("role","math"),this.hasAttribute("aria-label")||this.setAttribute("aria-label","math input field"),this.setAttribute("aria-multiline","false")),this.setAttribute("contenteditable","true"),this.hasAttribute("tabindex")||this.setAttribute("tabindex","0");let i=this.shadowRoot.querySelector("slot:not([name])");try{this._style=i.assignedElements().filter(r=>"style"===r.tagName.toLowerCase()).map(r=>r.textContent).join("")}catch{}if(this._style){let r=document.createElement("style");r.textContent=this._style,this.shadowRoot.appendChild(r)}try{let r=i.assignedElements().filter(s=>"script"===s.tagName.toLowerCase()&&"application/json"===s.type).map(s=>s.textContent).join("");r&&this.setOptions(JSON.parse(r))}catch{}let a="";if(a=this.hasAttribute("value")?null!=(n=this.getAttribute("value"))?n:"":null!=(o=i?.assignedNodes().map(r=>3===r.nodeType?r.textContent:"").join("").trim())?o:"",this._mathfield=new class{constructor(n,o){var e,i,a;this.focusBlurInProgress=!1,this.stylesheets=[],this.audioBuffers={},this.options=V4(ei(Ee({},X4()),{registers:X5(this)}),o.readOnly?ei(Ee({},o),{virtualKeyboardMode:"off"}):Ee({plonkSound:"plonk.wav",keypressSound:{spacebar:"keypress-spacebar.wav",return:"keypress-return.wav",delete:"keypress-delete.wav",default:"keypress-standard.wav"}},o)),"auto"===this.options.virtualKeyboardMode&&(this.options.virtualKeyboardMode=O5()?"onfocus":"off"),void 0!==this.options.computeEngine&&(this._computeEngine=o.computeEngine),o.eventSink&&(this.host=o.eventSink),this.placeholders=new Map,this.element=n,n.mathfield=this,null!==this.options.fontsDirectory&&iw(this.options.fontsDirectory),xw||(xw=Nu(Uc).toString(36)),this.stylesheets.push(Zu(n,Uc,xw)),bw||(bw=Nu(LC).toString(36)),this.stylesheets.push(Zu(n,LC,bw));let r=[];if(r.push(`<span contenteditable=true class=ML__keyboard-sink autocapitalize=off autocomplete=off autocorrect=off spellcheck=false inputmode=none tabindex=${null!=(e=n.tabIndex)?e:0}></span>`),r.push("<span part=container class=ML__container aria-hidden=true>"),r.push("<span part=content class=ML__content></span>"),r.push(`<div part='virtual-keyboard-toggle' class=ML__virtual-keyboard-toggle role=button data-ML__tooltip="${jm("tooltip.toggle virtual keyboard")}">`),r.push(null!=(i=this.options.virtualKeyboardToggleGlyph)?i:IC),r.push("</div>"),r.push("<div class=ML__placeholdercontainer></div>"),r.push("</span>"),r.push("<div class=ML__sr-only>"),r.push("<span role=status aria-live=assertive aria-atomic=true></span>"),r.push("<span class=accessibleMathML></span>"),r.push("</div>"),this.element.innerHTML=this.options.createHTML(r.join("")),!this.element.children)return void console.error("%cMathLive: Something went wrong and the mathfield could not be created.%c\nIf you are using Vue, this may be because you are using the runtime-only build of Vue. Make sure to include 'runtimeCompiler: true' in your Vue configuration. Theremay a warning from Vue in the log above.","color:red;font-family:system-ui;font-size:1.2rem;font-weight:bold","color:inherit;font-family:system-ui;font-size:inherit;font-weight:inherit");this.field=this.element.querySelector("[part=content]"),this.field.addEventListener("click",l=>l.stopImmediatePropagation(),{capture:!1}),this.field.addEventListener("wheel",this,{passive:!1}),"PointerEvent"in window?this.field.addEventListener("pointerdown",this):this.field.addEventListener("mousedown",this),this.virtualKeyboardToggle=this.element.querySelector("[part=virtual-keyboard-toggle]"),this.options.readOnly||"manual"!==this.options.virtualKeyboardMode?this.virtualKeyboardToggle.classList.remove("is-visible"):this.virtualKeyboardToggle.classList.add("is-visible"),Qx(this.virtualKeyboardToggle,l=>this.executeCommand(l),{default:"toggleVirtualKeyboard",alt:"toggleVirtualKeyboardAlt",shift:"toggleVirtualKeyboardShift"}),this.ariaLiveText=this.element.querySelector("[role=status]"),this.accessibleMathML=this.element.querySelector(".accessibleMathML"),this.keystrokeCaptionVisible=!1,this.popoverVisible=!1,this.suggestionIndex=0,this.inlineShortcutBuffer=[],this.inlineShortcutBufferFlushTimer=0,this.mode=tw(this.options),this.smartModeSuppressed=!1,this.style={},this.options.readOnly?this.element.classList.add("ML__isReadOnly"):this.element.classList.remove("ML__isReadOnly"),"inline-math"===this.options.defaultMode?this.element.classList.add("ML__isInline"):this.element.classList.remove("ML__isInline"),this.blurred=!0,this.keyboardDelegate=function YG(n,o,e){let i=null,a=null,r=!1,s=!1,l=!1;return n.addEventListener("keydown",c=>{r||"Process"===c.key||"CapsLock"===c.code||/(Control|Meta|Alt|Shift)(Left|Right)/.test(c.code)?i=null:(i=c,a=null,e.onKeystroke(YC(c),c)||(i=null,n.textContent=""))},!0),n.addEventListener("keypress",c=>{r||(i&&a&&e.onKeystroke(YC(i),i),a=c)},!0),n.addEventListener("compositionstart",c=>{n.textContent="",r=!0,e.onCompositionStart(c.data)},!0),n.addEventListener("compositionupdate",c=>{r&&e.onCompositionUpdate(c.data)},!0),n.addEventListener("compositionend",c=>{n.textContent="",r&&(r=!1,e.onCompositionEnd(c.data))},!0),n.addEventListener("beforeinput",c=>c.stopImmediatePropagation()),n.addEventListener("input",c=>{var d;if(!r&&(n.textContent="","insertCompositionText"!==c.inputType)){if("insertFromPaste"===c.inputType)return c.preventDefault(),void c.stopPropagation();e.onInput(null!=(d=c.data)?d:""),c.preventDefault(),c.stopPropagation()}}),n.addEventListener("paste",c=>{n.focus(),n.textContent="",e.onPaste(c)||c.preventDefault(),c.stopImmediatePropagation()},!0),n.addEventListener("cut",c=>e.onCut(c),!0),n.addEventListener("copy",c=>e.onCopy(c),!0),n.addEventListener("blur",c=>{var d,h,_,x;if((null==(h=null==(d=c.relatedTarget)?void 0:d._mathfield)?void 0:h.element)===o)return n.focus(),c.preventDefault(),void c.stopPropagation();let b=null==(_=zp.scrim)?void 0:_.state;return"open"===b||"opening"===b||c.relatedTarget===c.target.getRootNode().host?(c.preventDefault(),void c.stopPropagation()):void(l||s||(l=!0,i=null,a=null,null==(x=e.onBlur)||x.call(e),l=!1,c.stopPropagation()))},!0),n.addEventListener("focus",c=>{var d;l||s||(s=!0,null==(d=e.onFocus)||d.call(e),s=!1,c.stopPropagation())},!0),{cancelComposition:()=>{r&&(n.blur(),requestAnimationFrame(()=>n.focus()))},blur:()=>{"function"==typeof n.blur&&n.blur()},focus:()=>{!s&&"function"==typeof n.focus&&n.focus()},hasFocus:()=>function KG(){var n;let o=document.activeElement;for(;null!=(n=o?.shadowRoot)&&n.activeElement;)o=o.shadowRoot.activeElement;return o}()===n,setAriaLabel:c=>n.setAttribute("aria-label",c),setValue:c=>{var d;n.innerText=c,n.style.top="-1000px",null==(d=window.getSelection())||d.selectAllChildren(n)},moveTo:(c,d)=>{n.style.top=`${d}px`,n.style.left=`${c}px`}}}(this.element.querySelector(".ML__keyboard-sink"),this.element,{onFocus:()=>this.onFocus(),onBlur:()=>this.onBlur(),onInput:l=>gw(this,l),onKeystroke:(l,c)=>rT(this,l,c),onCompositionStart:l=>this.onCompositionStart(l),onCompositionUpdate:l=>this.onCompositionUpdate(l),onCompositionEnd:l=>this.onCompositionEnd(l),onCut:l=>{this.options.readOnly?this.model.announce("plonk"):ko(this.model,{inputType:"deleteByCut"})&&(this.snapshot(),Qo.onCopy(this,l),Bc(this.model,gl(this.model.selection),"deleteByCut"),ea(this))},onCopy:l=>Qo.onCopy(this,l),onPaste:l=>{let c=!this.options.readOnly;return c&&(c=Qo.onPaste(this.model.at(this.model.position).mode,this,l.clipboardData)),c||this.model.announce("plonk"),l.preventDefault(),l.stopPropagation(),c}}),window.addEventListener("resize",this),window.addEventListener("blur",()=>{Wm(this)&&this.hasFocus()&&window.addEventListener("focus",l=>{l.target===window&&Wm(this)&&this.focus()},{once:!0})},{capture:!0}),this.model=new class{constructor(n,o,e){this.options=n,this._selection={ranges:[[0,0]],direction:"none"},this._anchor=0,this._position=0,this.mathfield=e,this.suppressChangeNotifications=!1,this.root=new ke("root",e,{mode:n.mode}),this.root.body=[],this.setListeners(o)}get atoms(){return this.root.children}get selection(){return this._selection}set selection(n){this.setSelection(n)}setSelection(n,o){return this.deferNotifications({selection:!0},()=>{let e=this.normalizeSelection(n,o);if(void 0===e)throw new TypeError("Invalid selection");if(1===e.ranges.length&&e.ranges[0][0]===e.ranges[0][1]){let i=e.ranges[0][0];this._position=i,this._anchor=i,this._selection=e}else{let i=gl(e);"backward"===e.direction?[this._position,this._anchor]=i:[this._anchor,this._position]=i;let a=this.at(i[0]+1),r=this.at(i[1]);ke.commonAncestor(a,r),this._selection={ranges:[i],direction:e.direction}}})}setPositionHandlingPlaceholder(n){var o,e,i;"placeholder"===(null==(o=this.at(n))?void 0:o.type)?this.setSelection(n-1,n):"placeholder"===(null==(i=null==(e=this.at(n))?void 0:e.rightSibling)?void 0:i.type)?this.setSelection(n,n+1):this.position=n}getState(){return{content:this.root.toJson(),selection:this.selection}}setState(n,o){var e;let i=this.suppressChangeNotifications;this.suppressChangeNotifications=null==(e=o?.suppressChangeNotifications)||e;let a={};"undo"===o?.type&&(a={inputType:"historyUndo"}),"redo"===o?.type&&(a={inputType:"historyRedo"}),ko(this,a)&&(this.root=$l(n.content,this.mathfield),this.selection=n.selection,Po(this,a)),this.suppressChangeNotifications=i}get position(){return this._position}set position(n){this.setSelection(n,n)}get anchor(){return this._anchor}get selectionIsCollapsed(){return this._anchor===this._position}get selectionIsPlaceholder(){return 1===Math.abs(this._anchor-this._position)&&"placeholder"===this.at(Math.max(this._anchor,this._position)).type}collapseSelection(n="forward"){return this._anchor!==this._position&&(this.position="backward"===n?Math.min(this._anchor,this._position):Math.max(this._anchor,this._position),!0)}get lastOffset(){return this.atoms.length-1}at(n){return this.atoms[n]}offsetOf(n){return this.atoms.indexOf(n)}getSiblingsRange(n){let o=this.at(n),{parent:e}=o;if(!e)return[0,this.lastOffset];let i=o.parent.branch(o.treeBranch);return[this.offsetOf(i[0]),this.offsetOf(i[i.length-1])]}getBranchRange(n,o){let e=this.at(n).branch(o);return[this.offsetOf(e[0]),this.offsetOf(e[e.length-1])]}getAtoms(n,o,e){let a,r,i=e??{};if(Dx(n)){if(i=o??{},n.ranges.length>1)return n.ranges.reduce((d,h)=>[...d,...this.getAtoms(h,i)],[]);n=n.ranges[0]}if(Zd(n)){if(a=n,!Zd(o))return[];r=o}else[a,r]=n,i=o??{};if(!Number.isFinite(a))return[];void 0===i.includeChildren&&(i.includeChildren=!1),a<0&&(a=this.lastOffset-a+1),r<0&&(r=this.lastOffset-r+1);let s=Math.min(a,r)+1,l=Math.max(a,r);if(1===s&&l===this.lastOffset)return[this.root];let c=[];for(let d=s;d<=l;d++){let h=this.atoms[d];jC(this,h,s,l)&&c.push(h)}return i.includeChildren||(c=c.filter(d=>{let h=!1,{parent:_}=d;for(;_&&!h;)h=jC(this,_,s,l),_=_.parent;return!h})),c}getAllAtoms(n){let o=[],e=this.lastOffset;for(let i=n;i<=e;i++)o.push(this.atoms[i]);for(let i=0;i<n;i++)o.push(this.atoms[i]);return o}extractAtoms(n){let o=this.getAtoms(n);1===o.length&&"root"===o[0].type&&(o=o[0].children);for(let e of o)e.parent.removeChild(e);return o}deleteAtoms(n){this.extractAtoms(n),this.position=n[0]}atomToString(n,o){let e=o??"latex";if(e.startsWith("latex"))return Md.serialize([n],{expandMacro:"latex-expanded"===e,skipStyles:"latex-unstyled"===e,defaultMode:this.mathfield.options.defaultMode});if("math-ml"===e)return Zi(n,this.mathfield.options);if("spoken"===e)return Fp(n,this.mathfield.options);if("spoken-text"===e){let i=this.mathfield.options.textToSpeechMarkup;this.mathfield.options.textToSpeechMarkup="";let a=Fp(n,this.mathfield.options);return this.mathfield.options.textToSpeechMarkup=i,a}if("spoken-ssml"===e||"spoken-ssml-with-highlighting"===e){let i=this.mathfield.options.textToSpeechMarkup;this.mathfield.options.textToSpeechMarkup="ssml";let a=Fp(n,this.mathfield.options);return this.mathfield.options.textToSpeechMarkup=i,a}if("math-json"===e){if(!this.mathfield.computeEngine)return globalThis[Symbol.for("io.cortexjs.compute-engine")]||console.error('The CortexJS Compute Engine library is not available.\nLoad the library, for example with:\nimport "https://unpkg.com/@cortex-js/compute-engine?module"'),'["Error", "compute-engine-not-available"]';try{let i=this.mathfield.computeEngine.parse(ke.serialize(n,{expandMacro:!1,defaultMode:"math"}));return JSON.stringify(i.json)}catch(i){return JSON.stringify(["Error",`'${i.toString()}'`])}}return"ascii-math"===e?na(n):(console.error("MathLive: Unknown format :",e),"")}getValue(n,o,e){if(void 0===n)return this.atomToString(this.root,"latex");if("string"==typeof n)return this.atomToString(this.root,n);let i,a;if(Zd(n)&&Zd(o)?(i=[this.normalizeRange([n,o])],a=e??"latex"):Zx(n)?(i=[this.normalizeRange(n)],a=o):Dx(n)?(i=n.ranges,a=o):(i=[],a="latex"),a.startsWith("latex")){let r={expandMacro:"latex-expanded"===a,skipStyles:"latex-unstyled"===a,defaultMode:this.mathfield.options.defaultMode};return Fo(i.map(s=>ke.serialize(this.getAtoms(s),r)))}return i.map(r=>this.getAtoms(r).map(s=>this.atomToString(s,a)).join("")).join("")}extendSelection(n){let o=this._anchor;if("forward"===n){let i=this._position;do{let a=this.at(i+1);if(null!=a&&a.inCaptureSelection){for(;!a.captureSelection;)a=a.parent;i=this.offsetOf(a?.lastChild)+1}else i+=1}while(i<=this.lastOffset&&this.at(i).isFirstSibling);return i===o-1&&"first"===this.at(o).type&&(i=o),this.extendSelectionTo(o,i)}let e=this._position-1;if(e<0)return!1;for(;e>=0&&this.at(e).isLastSibling;){let i=this.at(e);if(null!=i&&i.inCaptureSelection){for(;!i.captureSelection;)i=i.parent;e=this.offsetOf(i.firstChild)-1}else e-=1}return e<0&&(e=0),e===o+1&&"first"===this.at(e).type&&(o=e),this.extendSelectionTo(o,e)}extendSelectionTo(n,o){return this.deferNotifications({selection:!0},()=>{let e=this.normalizeRange([n,o]),[i,a]=e,{parent:r}=this.at(a);if(r&&("genfrac"===r.type||"msubsup"===r.type))for(;r!==this.root&&rw(this,r,[i,a]);)a=this.offsetOf(r),r=r.parent;for(r=this.at(i).parent;r!==this.root&&rw(this,r,[i,a]);)i=this.offsetOf(r.leftSibling),r=r.parent;if(r=this.at(a).parent,"genfrac"===r?.type)for(;r!==this.root&&rw(this,r,[i,a]);)a=this.offsetOf(r),r=r.parent;this._position=this.normalizeOffset(o),this._selection={ranges:[[i,a]],direction:"none"}})}setListeners(n){this.listeners=n}announce(n,o,e=[]){var i,a;(null==(a=null==(i=this.mathfield.host)?void 0:i.dispatchEvent(new CustomEvent("announce",{detail:{command:n,previousPosition:o,atoms:e},cancelable:!0,bubbles:!0,composed:!0})))||a)&&function MG(n,o,e,i){let a="";"plonk"===o?(n.playSound("plonk"),n.flushInlineShortcutBuffer()):"delete"===o?a=Rp(n.options,"deleted: ",i):"focus"===o||o.includes("move")?a=function IG(n,o){if(Number.isNaN(o))return"";let e=n.at(o);if(!e||e.treeDepth<=n.at(n.position).treeDepth)return"";let i="",a=e.parent,r=n.at(n.position).parent;for(;a!==n.root&&a!==r;)i+=`out of ${DC(a)};`,a=a.parent;return i}(n.model,e)+(n.model.selectionIsCollapsed?"":"selected: ")+function LG(n,o){if(!n.selectionIsCollapsed)return Rp(o,"",n.getAtoms(n.selection));let e="",i=n.at(n.position),a=DC(i);return i.isFirstSibling&&(e=(a?"start of "+a:"unknown")+": "),i.isLastSibling?i.isFirstSibling||(e+=a?"end of "+a:"unknown"):e+=Rp(o,"",i),e}(n.model,n.options):"replacement"===o?a=Rp(n.options,"",n.model.at(n.model.position)):"line"===o?(a=Rp(n.options,"",n.model.root),n.keyboardDelegate.setAriaLabel("after: "+a)):a=i?Rp(n.options,o+" ",i):o;let r=n.ariaLiveText.textContent.includes("\xa0")?" \u202f ":" \xa0 ";n.ariaLiveText.textContent=a+r}(this.mathfield,n,o,e)}deferNotifications(n,o){let e=this._selection,i=this._anchor,a=this._position,r=this.suppressChangeNotifications;this.suppressChangeNotifications=!0;let s=this.root.changeCounter;o();let l=this.root.changeCounter!==s,c=i!==this._anchor||a!==this._position||"different"===function xH(n,o){if(n.direction===o.direction){let e=n.ranges.length;if(o.ranges.length===e){let i=0;for(;i<e&&"equal"===bH(n.ranges[i],o.ranges[i]);)i++;return i===e?"equal":"different"}}return"different"}(this._selection,e);return this.suppressChangeNotifications=r,n.content&&l&&Po(this,{inputType:n.type}),n.selection&&c&&kC(this),l||c}normalizeOffset(n){return n>0?n=Math.min(n,this.lastOffset):n<0&&(n=this.lastOffset+n+1),n}normalizeRange(n){let[o,e]=n;return o=this.normalizeOffset(o),e=this.normalizeOffset(e),o<e?[o,e]:[e,o]}normalizeSelection(n,o){var e;let i;if(Zd(n)){let a=this.normalizeOffset(n);if(Zd(o)){let r=this.normalizeOffset(o);i=a<=r?{ranges:[[a,r]],direction:"none"}:{ranges:[[r,a]],direction:"backward"}}else i={ranges:[[a,a]],direction:"none"}}else if(Zx(n)){let a=this.normalizeOffset(n[0]),r=this.normalizeOffset(n[1]);i=a<=r?{ranges:[[a,r]],direction:"none"}:{ranges:[[r,a]],direction:"backward"}}else Dx(n)&&(i={ranges:n.ranges.map(a=>this.normalizeRange(a)),direction:null!=(e=n.direction)?e:"none"});return i}}({mode:tw(this.options),macros:this.options.macros,removeExtraneousParentheses:this.options.removeExtraneousParentheses},{onSelectionDidChange:()=>this._onSelectionDidChange()},this),this.undoManager=new class{constructor(n){this.recording=!1,this.canCoalesce=!1,this.model=n,this.reset()}get maximumDepth(){return 1e3}reset(){this.stack=[],this.index=-1}startRecording(){this.recording=!0}canUndo(){return this.index>0}canRedo(){return this.index!==this.stack.length-1}undo(){return!!this.canUndo()&&(this.model.setState(this.stack[this.index-1],{suppressChangeNotifications:!1,type:"undo"}),this.index-=1,this.canCoalesce=!1,!0)}redo(){return!!this.canRedo()&&(this.index+=1,this.model.setState(this.stack[this.index],{suppressChangeNotifications:!1,type:"redo"}),this.canCoalesce=!1,!0)}pop(){this.canUndo()&&(this.index-=1,this.stack.pop())}snapshot(){return!!this.recording&&(this.stack.splice(this.index+1,this.stack.length-this.index-1),this.stack.push(this.model.getState()),this.index++,this.stack.length>this.maximumDepth&&this.stack.shift(),this.canCoalesce=!1,!0)}snapshotAndCoalesce(){if(!this.recording)return!1;this.canCoalesce&&this.pop();let n=this.snapshot();return this.canCoalesce=!0,n}}(this.model);let s=null!=(a=o.value)?a:this.element.textContent;s&&(s=s.trim()),s&&Qo.insert("math",this.model,s,{insertionMode:"replaceAll",selectionMode:"after",format:"latex",suppressChangeNotifications:!0}),this.undoManager.startRecording(),this.undoManager.snapshot(),Vm&&!this.options.locale.startsWith(Vm.locale)&&yC(this.options.locale),ea(this),document.fonts.ready.then(()=>th(this))}get audioContext(){return this._audioContext||(this._audioContext=new AudioContext),this._audioContext}get colorMap(){return n=>{var o;let e;return"function"==typeof(null==(o=this.options)?void 0:o.colorMap)&&(e=this.options.colorMap(n)),e||(e=ox(n)),e}}get backgroundColorMap(){return n=>{var o;let e;return"function"==typeof(null==(o=this.options)?void 0:o.backgroundColorMap)&&(e=this.options.backgroundColorMap(n)),!e&&"function"==typeof this.options.colorMap&&(e=this.options.colorMap(n)),e||(e=c4(n)),e}}get fractionNavigationOrder(){var n,o;return null!=(o=null==(n=this.options)?void 0:n.fractionNavigationOrder)?o:"numerator-denominator"}get placeholderSymbol(){var n,o;return null!=(o=null==(n=this.options)?void 0:n.placeholderSymbol)?o:"\u25a2"}get smartFence(){var n,o;return null!=(o=null==(n=this.options)?void 0:n.smartFence)&&o}get letterShapeStyle(){var n,o;return null!=(o=null==(n=this.options)?void 0:n.letterShapeStyle)?o:"tex"}get registers(){var n,o;return null!=(o=null==(n=this.options)?void 0:n.registers)?o:{}}getDefinition(n,o="math"){return N4(n,o)}getMacro(n){return tC(n,this.options.macros)}get virtualKeyboard(){if(!this.options.readOnly)return this._virtualKeyboard||(this._virtualKeyboard=this.options.useSharedVirtualKeyboard||pa().sharedVirtualKeyboard?new class{constructor(n){var o,e,i;this.targetOrigin=null!=(e=null!=(o=n.targetOrigin)?o:globalThis.origin)?e:"*",this.originValidator=null!=(i=n.originValidator)?i:"same-origin",this._mathfield=n.mathfield}get visible(){var n,o;return null!=(o=null==(n=pa().sharedVirtualKeyboard)?void 0:n.visible)&&o}set visible(n){pa().sharedVirtualKeyboard&&(pa().sharedVirtualKeyboard.visible=n)}setOptions(n){this.sendMessage("set-options",{options:JSON.stringify(Mg(n))})}create(){}dispose(){this.disable()}enable(){this.enabled||(this.enabled=!0,globalThis.addEventListener("message",this),this.updateToolbar())}disable(){this.enabled&&(globalThis.removeEventListener("message",this),this.enabled=!1)}executeCommand(n){var o,e,i;return"virtual-keyboard"===yg(n)?(this._mathfield&&(this.setOptions(Mg(this._mathfield.getOptions())),("showVirtualKeyboard"===n||"toggleVirtualKeyboard"===n&&!1===this.visible)&&(null==(e=(o=this._mathfield).focus)||e.call(o))),this.sendMessage("execute-command",{command:n}),requestAnimationFrame(()=>this.updateToolbar()),!1):null==(i=this._mathfield)?void 0:i.executeCommand(n)}focusMathfield(){}blurMathfield(){}stateWillChange(n){return!0}stateChanged(){}updateToolbar(){var n;null==(n=pa().sharedVirtualKeyboard)||n.updateToolbar(this._mathfield)}handleEvent(n){var o,e,i,a;if("message"===n.type&&n.data&&n.data.type===zx){if(!function hC(n,o){return"*"===n||"none"===o||("same-origin"===o?!globalThis.origin||n===globalThis.origin:"function"==typeof o&&o(n))}(n.origin,this.originValidator))throw new Error(`Message from unknown origin (${n.origin}) cannot be handled`);let{action:r}=n.data;if("execute-command"===r){if("virtual-keyboard"===yg(n.data.command)&&window===globalThis.parent)return;this.executeCommand(n.data.command)}else"update-state"===r?(this.visible=n.data.state.visible,this.height=n.data.state.height):"focus"===r?null==(e=null==(o=this._mathfield)?void 0:o.focus)||e.call(o):"blur"===r?null==(a=null==(i=this._mathfield)?void 0:i.blur)||a.call(i):"update-toolbar"===r&&this.updateToolbar()}}sendMessage(n,o={}){return!!globalThis.parent&&(globalThis.parent.postMessage(Ee({type:zx,action:n},o),this.targetOrigin),!0)}}({targetOrigin:this.options.sharedVirtualKeyboardTargetOrigin,originValidator:this.options.originValidator,mathfield:this}):new class{constructor(n,o){this.originalContainerBottomPadding=null,this.options=n,this.visible=!1,this._mathfield=o,this.coreStylesheet=null,this.virtualKeyboardStylesheet=null}setOptions(n){var o,e;let i="";if(this._element){let a=this._element.querySelector("div.keyboard-layer.is-visible");a&&(i=null!=(o=a.getAttribute("data-layer"))?o:""),this._element.remove(),this._element=void 0}if(this.options=n,this.visible){this.buildAndAttachElement(n.virtualKeyboardTheme);let a=this.element.querySelector(`.keyboard-layer[data-layer="${i}"]`);a&&(null==(e=this.element.querySelector(".keyboard-layer.is-visible"))||e.classList.remove("is-visible"),a.classList.add("is-visible")),this.element.classList.add("is-visible")}}get element(){return this._element}set element(n){var o;this._element!==n&&(null==(o=this._element)||o.remove(),this._element=n)}get visible(){return this._visible}set visible(n){this._visible=n}get height(){var n,o;return null!=(o=null==(n=this.element)?void 0:n.offsetHeight)?o:0}buildAndAttachElement(n){var o;this.element=function i$(n,o){var e,i,a,r;let s='<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">\n\n    <symbol id="svg-delete-backward" viewBox="0 0 576 512">\n      <path d="M432.1 208.1L385.9 256L432.1 303C442.3 312.4 442.3 327.6 432.1 336.1C423.6 346.3 408.4 346.3 399 336.1L352 289.9L304.1 336.1C295.6 346.3 280.4 346.3 271 336.1C261.7 327.6 261.7 312.4 271 303L318.1 256L271 208.1C261.7 199.6 261.7 184.4 271 175C280.4 165.7 295.6 165.7 304.1 175L352 222.1L399 175C408.4 165.7 423.6 165.7 432.1 175C442.3 184.4 442.3 199.6 432.1 208.1V208.1zM512 64C547.3 64 576 92.65 576 128V384C576 419.3 547.3 448 512 448H205.3C188.3 448 172 441.3 160 429.3L9.372 278.6C3.371 272.6 0 264.5 0 256C0 247.5 3.372 239.4 9.372 233.4L160 82.75C172 70.74 188.3 64 205.3 64L512 64zM528 128C528 119.2 520.8 112 512 112H205.3C201 112 196.9 113.7 193.9 116.7L54.63 256L193.9 395.3C196.9 398.3 201 400 205.3 400H512C520.8 400 528 392.8 528 384V128z"/>\n    </symbol>\n\n    <symbol id="svg-shift" viewBox="0 0 384 512">\n      <path d="M2.438 252.3C7.391 264.2 19.06 272 32 272h80v160c0 26.51 21.49 48 48 48h64C250.5 480 272 458.5 272 432v-160H352c12.94 0 24.61-7.797 29.56-19.75c4.953-11.97 2.219-25.72-6.938-34.88l-160-176C208.4 35.13 200.2 32 192 32S175.6 35.13 169.4 41.38l-160 176C.2188 226.5-2.516 240.3 2.438 252.3zM192 86.63L313.4 224H224v208H160V224H70.63L192 86.63z"/>\n    </symbol>\n\n    <symbol id="svg-commit" viewBox="0 0 512 512">\n      <path d="M135 432.1l-128-128C2.344 300.3 0 294.2 0 288s2.344-12.28 7.031-16.97l128-128c9.375-9.375 24.56-9.375 33.94 0s9.375 24.56 0 33.94L81.94 264H464v-208C464 42.75 474.8 32 488 32S512 42.75 512 56V288c0 13.25-10.75 24-24 24H81.94l87.03 87.03c9.375 9.375 9.375 24.56 0 33.94S144.4 442.3 135 432.1z"/>\n    </symbol>\n\n    <symbol id="svg-command" viewBox="0 0 640 512">\n      <path d="M34.495 36.465l211.051 211.05c4.686 4.686 4.686 12.284 0 16.971L34.495 475.535c-4.686 4.686-12.284 4.686-16.97 0l-7.071-7.07c-4.686-4.686-4.686-12.284 0-16.971L205.947 256 10.454 60.506c-4.686-4.686-4.686-12.284 0-16.971l7.071-7.07c4.686-4.687 12.284-4.687 16.97 0zM640 468v-10c0-6.627-5.373-12-12-12H300c-6.627 0-12 5.373-12 12v10c0 6.627 5.373 12 12 12h328c6.627 0 12-5.373 12-12z"/>\n    </symbol>\n\n    <symbol id="svg-undo" viewBox="0 0 512 512">\n      <path d="M20 8h10c6.627 0 12 5.373 12 12v110.625C85.196 57.047 165.239 7.715 256.793 8.001 393.18 8.428 504.213 120.009 504 256.396 503.786 393.181 392.834 504 256 504c-63.926 0-122.202-24.187-166.178-63.908-5.113-4.618-5.354-12.561-.482-17.433l7.069-7.069c4.503-4.503 11.749-4.714 16.482-.454C150.782 449.238 200.935 470 256 470c117.744 0 214-95.331 214-214 0-117.744-95.331-214-214-214-82.862 0-154.737 47.077-190.289 116H180c6.627 0 12 5.373 12 12v10c0 6.627-5.373 12-12 12H20c-6.627 0-12-5.373-12-12V20c0-6.627 5.373-12 12-12z"/>\n    </symbol>\n    <symbol id="svg-redo" viewBox="0 0 512 512">\n      <path d="M492 8h-10c-6.627 0-12 5.373-12 12v110.625C426.804 57.047 346.761 7.715 255.207 8.001 118.82 8.428 7.787 120.009 8 256.396 8.214 393.181 119.166 504 256 504c63.926 0 122.202-24.187 166.178-63.908 5.113-4.618 5.354-12.561.482-17.433l-7.069-7.069c-4.503-4.503-11.749-4.714-16.482-.454C361.218 449.238 311.065 470 256 470c-117.744 0-214-95.331-214-214 0-117.744 95.331-214 214-214 82.862 0 154.737 47.077 190.289 116H332c-6.627 0-12 5.373-12 12v10c0 6.627 5.373 12 12 12h160c6.627 0 12-5.373 12-12V20c0-6.627-5.373-12-12-12z"/>\n    </symbol>\n    <symbol id="svg-arrow-left" viewBox="0 0 320 512">\n      <path d="M206.7 464.6l-183.1-191.1C18.22 267.1 16 261.1 16 256s2.219-11.97 6.688-16.59l183.1-191.1c9.152-9.594 24.34-9.906 33.9-.7187c9.625 9.125 9.938 24.37 .7187 33.91L73.24 256l168 175.4c9.219 9.5 8.906 24.78-.7187 33.91C231 474.5 215.8 474.2 206.7 464.6z"/>\n    </symbol>\n    <symbol id="svg-arrow-right" viewBox="0 0 320 512">\n      <path d="M113.3 47.41l183.1 191.1c4.469 4.625 6.688 10.62 6.688 16.59s-2.219 11.97-6.688 16.59l-183.1 191.1c-9.152 9.594-24.34 9.906-33.9 .7187c-9.625-9.125-9.938-24.38-.7187-33.91l168-175.4L78.71 80.6c-9.219-9.5-8.906-24.78 .7187-33.91C88.99 37.5 104.2 37.82 113.3 47.41z"/>\n    </symbol>\n    <symbol id="svg-tab" viewBox="0 0 448 512">\n      <path d="M32 217.1c0-8.8 7.2-16 16-16h144v-93.9c0-7.1 8.6-10.7 13.6-5.7l143.5 143.1c6.3 6.3 6.3 16.4 0 22.7L205.6 410.4c-5 5-13.6 1.5-13.6-5.7v-93.9H48c-8.8 0-16-7.2-16-16v-77.7m-32 0v77.7c0 26.5 21.5 48 48 48h112v61.9c0 35.5 43 53.5 68.2 28.3l143.6-143c18.8-18.8 18.8-49.2 0-68L228.2 78.9c-25.1-25.1-68.2-7.3-68.2 28.3v61.9H48c-26.5 0-48 21.6-48 48zM436 64h-8c-6.6 0-12 5.4-12 12v360c0 6.6 5.4 12 12 12h8c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12z"/>\n    </symbol>\n    <symbol id="svg-paste" viewBox="0 0 512 512"><path d="M160 32c11.6 0 21.3 8.2 23.5 19.2C185 58.6 191.6 64 199.2 64H208c8.8 0 16 7.2 16 16V96H96V80c0-8.8 7.2-16 16-16h8.8c7.6 0 14.2-5.4 15.7-12.8C138.7 40.2 148.4 32 160 32zM64 64h2.7C65 69 64 74.4 64 80V96c0 17.7 14.3 32 32 32H224c17.7 0 32-14.3 32-32V80c0-5.6-1-11-2.7-16H256c17.7 0 32 14.3 32 32h32c0-35.3-28.7-64-64-64H210.6c-9-18.9-28.3-32-50.6-32s-41.6 13.1-50.6 32H64C28.7 32 0 60.7 0 96V384c0 35.3 28.7 64 64 64H192V416H64c-17.7 0-32-14.3-32-32V96c0-17.7 14.3-32 32-32zM288 480c-17.7 0-32-14.3-32-32V192c0-17.7 14.3-32 32-32h96v56c0 22.1 17.9 40 40 40h56V448c0 17.7-14.3 32-32 32H288zM416 165.3L474.7 224H424c-4.4 0-8-3.6-8-8V165.3zM448 512c35.3 0 64-28.7 64-64V235.9c0-12.7-5.1-24.9-14.1-33.9l-59.9-59.9c-9-9-21.2-14.1-33.9-14.1H288c-35.3 0-64 28.7-64 64V448c0 35.3 28.7 64 64 64H448z"/></symbol>\n    <symbol id="svg-cut" viewBox="0 0 512 512"><path d="M485.6 444.2L333.6 314.9C326.9 309.2 326.1 299.1 331.8 292.4C337.5 285.6 347.6 284.8 354.4 290.5L506.4 419.8C513.1 425.5 513.9 435.6 508.2 442.4C502.5 449.1 492.4 449.9 485.6 444.2zM485.7 67.76C492.5 62.07 502.5 62.94 508.2 69.69C513.9 76.45 513.1 86.55 506.3 92.24L208.5 343.1C218.3 359.7 224 379.2 224 400C224 461.9 173.9 512 112 512C50.14 512 0 461.9 0 400C0 338.1 50.14 288 112 288C141.5 288 168.4 299.4 188.4 318.1L262.2 256L188.4 193.9C168.4 212.6 141.5 224 112 224C50.14 224 0 173.9 0 112C0 50.14 50.14 0 112 0C173.9 0 224 50.14 224 112C224 132.8 218.3 152.3 208.5 168.9L287 235.1L485.7 67.76zM32 112C32 156.2 67.82 192 112 192C156.2 192 192 156.2 192 112C192 67.82 156.2 32 112 32C67.82 32 32 67.82 32 112zM112 480C156.2 480 192 444.2 192 400C192 355.8 156.2 320 112 320C67.82 320 32 355.8 32 400C32 444.2 67.82 480 112 480z"/></symbol>\n    <symbol id="svg-copy" viewBox="0 0 512 512"><path d="M272 416C263.2 416 256 423.2 256 432V448c0 17.67-14.33 32-32 32H64c-17.67 0-32-14.33-32-32V192c0-17.67 14.33-32 32-32h112C184.8 160 192 152.8 192 144C192 135.2 184.8 128 176 128H63.99c-35.35 0-64 28.65-64 64l.0098 256C0 483.3 28.65 512 64 512h160c35.35 0 64-28.65 64-64v-16C288 423.2 280.8 416 272 416zM502.6 86.63l-77.25-77.25C419.4 3.371 411.2 0 402.7 0H288C252.7 0 224 28.65 224 64v256c0 35.35 28.65 64 64 64h160c35.35 0 64-28.65 64-64V109.3C512 100.8 508.6 92.63 502.6 86.63zM416 45.25L466.7 96H416V45.25zM480 320c0 17.67-14.33 32-32 32h-160c-17.67 0-32-14.33-32-32V64c0-17.67 14.33-32 32-32h96l.0026 64c0 17.67 14.33 32 32 32H480V320z"/>\n    </symbol>\n    <symbol id="svg-angle-double-right" viewBox="0 0 320 512">\n      <path d="M166.9 264.5l-117.8 116c-4.7 4.7-12.3 4.7-17 0l-7.1-7.1c-4.7-4.7-4.7-12.3 0-17L127.3 256 25.1 155.6c-4.7-4.7-4.7-12.3 0-17l7.1-7.1c4.7-4.7 12.3-4.7 17 0l117.8 116c4.6 4.7 4.6 12.3-.1 17zm128-17l-117.8-116c-4.7-4.7-12.3-4.7-17 0l-7.1 7.1c-4.7 4.7-4.7 12.3 0 17L255.3 256 153.1 356.4c-4.7 4.7-4.7 12.3 0 17l7.1 7.1c4.7 4.7 12.3 4.7 17 0l117.8-116c4.6-4.7 4.6-12.3-.1-17z"/>\n    </symbol>\n    <symbol id="svg-angle-double-left" viewBox="0 0 320 512">\n      <path d="M153.1 247.5l117.8-116c4.7-4.7 12.3-4.7 17 0l7.1 7.1c4.7 4.7 4.7 12.3 0 17L192.7 256l102.2 100.4c4.7 4.7 4.7 12.3 0 17l-7.1 7.1c-4.7 4.7-12.3 4.7-17 0L153 264.5c-4.6-4.7-4.6-12.3.1-17zm-128 17l117.8 116c4.7 4.7 12.3 4.7 17 0l7.1-7.1c4.7-4.7 4.7-12.3 0-17L64.7 256l102.2-100.4c4.7-4.7 4.7-12.3 0-17l-7.1-7.1c-4.7-4.7-12.3-4.7-17 0L25 247.5c-4.6 4.7-4.6 12.3.1 17z"/>\n    </symbol>\n    <symbol id="svg-trash" viewBox="0 0 448 512">\n      <path d="M336 64l-33.6-44.8C293.3 7.1 279.1 0 264 0h-80c-15.1 0-29.3 7.1-38.4 19.2L112 64H24C10.7 64 0 74.7 0 88v2c0 3.3 2.7 6 6 6h26v368c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V96h26c3.3 0 6-2.7 6-6v-2c0-13.3-10.7-24-24-24h-88zM184 32h80c5 0 9.8 2.4 12.8 6.4L296 64H152l19.2-25.6c3-4 7.8-6.4 12.8-6.4zm200 432c0 8.8-7.2 16-16 16H80c-8.8 0-16-7.2-16-16V96h320v368zm-176-44V156c0-6.6 5.4-12 12-12h8c6.6 0 12 5.4 12 12v264c0 6.6-5.4 12-12 12h-8c-6.6 0-12-5.4-12-12zm-80 0V156c0-6.6 5.4-12 12-12h8c6.6 0 12 5.4 12 12v264c0 6.6-5.4 12-12 12h-8c-6.6 0-12-5.4-12-12zm160 0V156c0-6.6 5.4-12 12-12h8c6.6 0 12 5.4 12 12v264c0 6.6-5.4 12-12 12h-8c-6.6 0-12-5.4-12-12z"/>\n    </symbol>\n</svg>\n        ';n.create(),kg["foreground-color"]=[];for(let G of Object.keys(ix))kg["foreground-color"].push({class:"small-button",content:'<span style="border-radius:50%;width:32px;height:32px; box-sizing: border-box; border: 3px solid '+ix[G]+'"></span>',command:["applyStyle",{color:G}]});kg["background-color"]=[];for(let G of Object.keys(nx))kg["background-color"].push({class:"small-button",content:'<span style="border-radius:50%;width:32px;height:32px; background:'+nx[G]+'"></span>',command:["applyStyle",{backgroundColor:G}]});co=Ee({},kg);for(let G of Object.keys(co))co[G]=co[G].slice();for(let G=0;G<26;G++){let nt="ABCDEFGHIJKLMNOPQRSTUVWXYZ"[G];co[nt]||(co[nt]=[]),co[nt].unshift({latex:"\\mathbb{"+nt+"}",aside:"blackboard",insert:"\\mathbb{"+nt+"}"}),co[nt].unshift({latex:"\\mathbf{"+nt+"}",aside:"bold",insert:"\\mathbf{"+nt+"}"}),co[nt].unshift({latex:"\\mathsf{"+nt+"}",aside:"sans",insert:"\\mathsf{"+nt+"}"}),co[nt].unshift({latex:"\\mathtt{"+nt+"}",aside:"monospace",insert:"\\mathtt{"+nt+"}"}),co[nt].unshift({latex:"\\mathcal{"+nt+"}",aside:"calligraphy",insert:"\\mathcal{"+nt+"}"}),co[nt].unshift({latex:"\\mathfrak{"+nt+"}",aside:"fraktur",insert:"\\mathfrak{"+nt+"}"})}for(let G=0;G<=26;G++){let nt="abcdefghijklmnopqrstuvwxyz"[G];co[nt]||(co[nt]=[]),co[nt].unshift({latex:"\\mathsf{"+nt+"}",aside:"sans",insert:"\\mathsf{"+nt+"}"}),co[nt].unshift({latex:"\\mathbf{"+nt+"}",aside:"bold",insert:"\\mathbf{"+nt+"}"}),co[nt].unshift({latex:"\\mathtt{"+nt+"}",aside:"monospace",insert:"\\mathtt{"+nt+"}"}),co[nt].unshift({latex:"\\mathfrak{"+nt+"}",aside:"fraktur",insert:"\\mathfrak{"+nt+"}"})}for(let G=0;G<10;G++){let nt="0123456789"[G];co[nt]||(co[nt]=[]),co[nt].unshift({latex:"\\mathbf{"+nt+"}",aside:"bold",insert:"\\mathbf{"+nt+"}"}),co[nt].unshift({latex:"\\mathsf{"+nt+"}",aside:"sans",insert:"\\mathsf{"+nt+"}"}),co[nt].unshift({latex:"\\mathtt{"+nt+"}",aside:"monospace",insert:"\\mathtt{"+nt+"}"}),co[nt].unshift({latex:"\\mathcal{"+nt+"}",aside:"script",insert:"\\mathcal{"+nt+"}"}),co[nt].unshift({latex:"\\mathfrak{"+nt+"}",aside:"fraktur",insert:"\\mathfrak{"+nt+"}"})}let h=n.options.virtualKeyboards;h||(h="all"),h=h.replace(/\ball\b/i,"numeric functions symbols roman greek");let _=Ee(Ee({},XG),null!=(e=n.options.customVirtualKeyboardLayers)?e:{}),x=Ee(Ee({},VC),null!=(i=n.options.customVirtualKeyboards)?i:{}),b=h.replace(/\s+/g," ").split(" ");for(let G of b){if(!x[G]){console.error('MathLive: Unknown virtual keyboard "'+G+'"');continue}let nt=null!=(a=x[G].layers)?a:[];x[G].layer&&nt.push(x[G].layer),nt=[...new Set(nt)];for(let At of nt){if(!_[At]){console.error('MathLive: Unknown virtual keyboard layer: "',At,'"');break}if("object"==typeof _[At]){let et=_[At],vt="";if("string"==typeof et.styles?vt+=`<style>${et.styles}</style>`:"object"==typeof et.styles&&(vt+=`<style>${a$(et.styles)}</style>`),et.backdrop&&(vt+=`<div class='${et.backdrop}'>`),et.container&&(vt+=`<div class='${et.container}'>`),et.rows){vt+="<div class='rows'>";for(let Nt of et.rows){vt+="<ul>";for(let ot of Nt){if(vt+="<li",ot.class){let _t=ot.class;ot.layer&&!/layer-switch/.test(_t)&&(_t+=" layer-switch"),/separator/.test(_t)||(_t+=" keycap"),vt+=` class="${_t}"`}else vt+=' class="keycap"';if(ot.key&&(vt+=` data-key="${ot.key}"`),ot.command&&("string"==typeof ot.command?vt+=` data-command='"${ot.command}"'`:(vt+=" data-command='",vt+=JSON.stringify(ot.command),vt+="'")),ot.insert&&(vt+=` data-insert="${ot.insert}"`),ot.latex&&(vt+=` data-latex="${ot.latex}"`),ot.aside&&(vt+=` data-aside="${ot.aside}"`),ot.variants){let _t=Date.now().toString(36).slice(-2)+Math.floor(1e5*Math.random()).toString(36);co[_t]=ot.variants,vt+=` data-alt-keys="${_t}"`}ot.shifted&&(vt+=` data-shifted="${ot.shifted}"`),ot.shiftedCommand&&(vt+=` data-shifted-command="${ot.shiftedCommand}"`),ot.layer&&(vt+=` data-layer="${ot.layer}"`),vt+=`>${ot.label?ot.label:""}</li>`}vt+="</ul>"}vt+="</div>"}et.container&&(vt+="</div>"),et.backdrop&&(vt+="</div>"),_[At]=vt}s+=`<div tabindex="-1" class='keyboard-layer' data-layer='${At}'>`,s+=`<div class='keyboard-toolbar' role='toolbar'>${t$(n.options,h,G)}</div>`;let ut=_[At];"string"==typeof ut&&(s+=n$(n.options,ut)),s+="</div>"}}let T=document.createElement("div");T.className="ML__keyboard",o?T.classList.add(o):n.options.virtualKeyboardTheme&&T.classList.add(n.options.virtualKeyboardTheme);let P=document.createElement("div");P.className="ML__keyboard--plate",P.innerHTML=n.options.createHTML(s),T.appendChild(P);let U=T.querySelectorAll(".ML__toolbar-action");if(U)for(let G of U)G.addEventListener("click",nt=>{var At,ut;let et=nt.target,vt="";for(;et&&!vt;)vt=null!=(At=et?.getAttribute("data-command"))?At:"",et=null!=(ut=et?.parentElement)?ut:null;vt&&n.executeCommand(JSON.parse(vt))});let q=T.querySelectorAll(".keycap, .action, .fnbutton, .bigfnbutton");for(let G of q)G.id="ML__k"+Date.now().toString(36).slice(-2)+Math.floor(1e5*Math.random()).toString(36);tT(n,[...q]);let B=T.querySelectorAll(".layer-switch");for(let G of B)G.classList.contains("shift")?Qx(G,nt=>n.executeCommand(nt),{pressed:"shiftKeyboardLayer",default:["switchKeyboardLayer",G.getAttribute("data-layer")],pressAndHoldEnd:"unshiftKeyboardLayer"}):Qx(G,nt=>n.executeCommand(nt),{default:["switchKeyboardLayer",G.getAttribute("data-layer")]});let W=T.querySelectorAll(".keyboard-layer");for(let G of W)G.addEventListener("mousedown",nt=>nt.preventDefault());return null==(r=W[0])||r.classList.add("is-visible"),T}(this,n??""),Yl(this.element,"mousedown",()=>this.focusMathfield()),null==(o=this.options.virtualKeyboardContainer)||o.appendChild(this.element)}handleEvent(n){if(this.element)switch(n.type){case"mouseup":case"blur":case"touchend":case"touchcancel":document.body.style.userSelect="",Rx(this)}}focusMathfield(){var n,o;null==(o=null==(n=this._mathfield)?void 0:n.focus)||o.call(n)}blurMathfield(){var n,o;null==(o=null==(n=this._mathfield)?void 0:n.blur)||o.call(n)}stateWillChange(n){var o,e;return(null==(e=null==(o=this._mathfield)?void 0:o.host)?void 0:e.dispatchEvent(new CustomEvent("before-virtual-keyboard-toggle",{detail:{visible:n},bubbles:!0,cancelable:!0,composed:!0})))??!0}stateChanged(){var n,o;null==(o=null==(n=this._mathfield)?void 0:n.host)||o.dispatchEvent(new Event("virtual-keyboard-toggle",{bubbles:!0,cancelable:!1,composed:!0}))}updateToolbar(n){var o;let e=null==(o=this._element)?void 0:o.querySelectorAll(".ML__toolbar-action");if(e)for(let i of e)i.innerHTML=e$(this.options,n)}executeCommand(n){var o,e,i;let a,r=[];return qa(n)?(a=n[0],r=n.slice(1)):a=n,a=a.replace(/-\w/g,s=>s[1].toUpperCase()),"virtual-keyboard"===(null==(o=Du[a])?void 0:o.target)?Du[a].fn(this,...r):null!=(i=null==(e=this._mathfield)?void 0:e.executeCommand(n))&&i}create(){this.virtualKeyboardStylesheet||(cw||(cw=Nu(KC).toString(36)),this.virtualKeyboardStylesheet=Zu(null,KC,cw)),this.coreStylesheet||(this.coreStylesheet=Zu(null,Uc,Nu(Uc).toString(36))),null!==this.options.fontsDirectory&&iw(this.options.fontsDirectory)}enable(){window.addEventListener("mouseup",this),window.addEventListener("blur",this)}disable(){window.removeEventListener("mouseup",this),window.removeEventListener("blur",this)}dispose(){}}(this.options,this)),this._virtualKeyboard}get computeEngine(){var n,o;if(void 0===this._computeEngine){let e=null==(n=globalThis[Symbol.for("io.cortexjs.compute-engine")])?void 0:n.ComputeEngine;e?this._computeEngine=new e:console.error('MathLive: The CortexJS Compute Engine library is not available.\nLoad the library, for example with:\nimport "https://unpkg.com/@cortex-js/compute-engine?module"'),this._computeEngine&&","===this.options.decimalSeparator&&(this._computeEngine.latexOptions.decimalMarker="{,}")}return null!=(o=this._computeEngine)?o:null}get virtualKeyboardState(){var n;return null!=(n=this.virtualKeyboard)&&n.visible?"visible":"hidden"}set virtualKeyboardState(n){this.virtualKeyboard&&("hidden"===n?this.virtualKeyboard.executeCommand("hideVirtualKeyboard"):"visible"===n&&this.virtualKeyboard.executeCommand("showVirtualKeyboard"))}get keybindings(){var n,o;if(this._keybindings)return this._keybindings;let[e,i]=function uG(n,o){let e=[],i=[];for(let a of n)try{let r=cG(a,o);if(r){let s=e.filter(l=>l.key===r.key&&l.ifMode===r.ifMode);if(s.length>0)throw new Error(`Ambiguous key binding ${a.key} (${J4(a.command)}) matches ${s[0].key} (${J4(s[0].command)}) with the ${o.displayName} keyboard layout`);e.push(r)}}catch(r){r instanceof Error&&i.push(r.message)}return[e,i]}(this.options.keybindings,null!=(n=xg())?n:vC);return(null==(o=xg())?void 0:o.score)>0&&(this._keybindings=e,i.length>0&&console.error("MathLive: Invalid keybindings for current keyboard layout",i)),e}setOptions(n){var o,e;if(this.options=V4(this.options,n),"computeEngine"in n&&(this._computeEngine=this.options.computeEngine),this._computeEngine&&"decimalSeparator"in n&&(this._computeEngine.latexOptions.decimalMarker=","===this.options.decimalSeparator?"{,}":"."),this.model.setListeners({onSelectionDidChange:a=>this._onSelectionDidChange()}),this.model.options.macros=this.options.macros,Vm&&!this.options.locale.startsWith(Vm.locale)&&yC(this.options.locale),this._keybindings=void 0,("soundsDirectory"in n||"plonkSound"in n||"keypressSound"in n||"spacebarKeypressSound"in n||"returnKeypressSound"in n||"deleteKeypressSound"in n)&&(this.audioBuffers={}),"inline-math"===this.options.defaultMode?this.element.classList.add("ML__isInline"):this.element.classList.remove("ML__isInline"),this.options.readOnly?(this.hasFocus()&&"visible"===this.virtualKeyboardState&&this.executeCommand("hideVirtualKeyboard"),this.onBlur(),this.element.classList.add("ML__isReadOnly")):this.element.classList.remove("ML__isReadOnly"),null==(o=this.virtualKeyboard)||o.setOptions(this.options),this.options.readOnly||"manual"!==this.options.virtualKeyboardMode?this.virtualKeyboardToggle.classList.remove("is-visible"):this.virtualKeyboardToggle.classList.add("is-visible"),"virtualKeyboardToggleGlyph"in n){let a=null==(e=this.element)?void 0:e.querySelector(".ML__virtual-keyboard-toggle");a&&(a.innerHTML=this.options.createHTML(this.options.virtualKeyboardToggleGlyph))}let i=ke.serialize(this.model.root,{expandMacro:!1,defaultMode:this.options.defaultMode});("macros"in n||this.model.getValue()!==i)&&Qo.insert("math",this.model,i,{insertionMode:"replaceAll",selectionMode:"after",format:"latex",suppressChangeNotifications:!0}),ea(this)}getOptions(n){return Up(this.options,n)}getOption(n){return Up(this.options,n)}handleEvent(n){if(Wm(this))switch(n.type){case"focus":this.onFocus();break;case"blur":this.onBlur();break;case"mousedown":case"pointerdown":!function cT(n,o){var e;n.atomBoundsCache=new Map;let a,i=n,r=!1,s=!1,l="none";if(o.buttons>1)return;let c=!1,d=!1,h=o.clientX,_=o.clientY,x=Date.now(),b=i.field,T=setInterval(()=>{c?b.scroll({top:0,left:b.scrollLeft-16}):d&&b.scroll({top:0,left:b.scrollLeft+16})},32);function P(B){"PointerEvent"in window?(Mx(b,"pointermove",U),Mx(b,"pointerup pointercancel",P),B instanceof PointerEvent&&b.releasePointerCapture(B.pointerId)):(Mx(window,"mousemove",U),Mx(window,"mouseup blur",P)),r=!1,clearInterval(T),n.element.classList.remove("tracking"),B&&B.preventDefault()}function U(B){if(!i.hasFocus())return void P(null);let W=B.clientX,G=B.clientY,nt=lT(B)&&"touch"===B.pointerType?20:5;if(Date.now()<x+500&&Math.abs(h-W)<nt&&Math.abs(_-G)<nt)return B.preventDefault(),void B.stopPropagation();let At=b.getBoundingClientRect();d=W>At.right,c=W<At.left;let ut=a;lT(B)&&(B.isPrimary||(ut=Eg(i,B.clientX,B.clientY,{bias:0})));let et=Eg(i,W,G,{bias:W<=h?W===h?0:-1:1});ut>=0&&et>=0&&(i.model.extendSelectionTo(ut,et),ea(n)),B.preventDefault(),B.stopPropagation()}eh&&Math.abs(eh.x-h)<5&&Math.abs(eh.y-_)<5&&Date.now()<eh.time+500?(Og+=1,eh.time=x):(eh={x:h,y:_,time:x},Og=1);let q=b.getBoundingClientRect();if(h>=q.left&&h<=q.right&&_>=q.top&&_<=q.bottom){if(n.hasFocus()||(l="all",n.focus({scrollIntoView:!1})),n.flushInlineShortcutBuffer(),n.smartModeSuppressed=!1,a=Eg(n,h,_,{bias:0}),a>=0){if(n.element.classList.add("tracking"),o.shiftKey){let B=n.model.selectionIsCollapsed;n.model.extendSelectionTo(n.model.anchor,a),l=SC(n.model)||B?"all":"selection"}else"placeholder"===n.model.at(a).type?(n.model.setSelection(a-1,a),l="selection"):"placeholder"===(null==(e=n.model.at(a).rightSibling)?void 0:e.type)?(n.model.setSelection(a,a+1),l="selection"):(n.model.position=a,l=SC(n.model)?"all":"selection");n.style={},3===o.detail||Og>2?(P(o),(3===o.detail||3===Og)&&(n.model.selection={ranges:[[0,n.model.lastOffset]]},l="all")):r||(r=!0,"PointerEvent"in window?(Yl(b,"pointermove",U),Yl(b,"pointerup pointercancel",P),o instanceof PointerEvent&&b.setPointerCapture(o.pointerId)):(Yl(window,"blur",P),Yl(window,"mousemove",U),Yl(window,"mouseup",P)),(2===o.detail||2===Og)&&(s=!0,HC(n.model),l="all"))}}else eh=null;"none"!==l&&(n.model.selectionIsCollapsed&&(l="all"),ea(n)),o.preventDefault()}(this,n);break;case"resize":this.resizeTimer&&cancelAnimationFrame(this.resizeTimer),this.resizeTimer=requestAnimationFrame(()=>Wm(this)&&this.onResize());break;case"wheel":this.onWheel(n);break;default:console.warn("Unexpected event type",n.type)}}dispose(){if(!Wm(this))return;let n=this.element;delete this.element,delete n.mathfield,n.innerHTML=this.model.getValue(),n.removeEventListener("pointerdown",this),n.removeEventListener("mousedown",this),n.removeEventListener("focus",this),n.removeEventListener("blur",this),window.removeEventListener("resize",this),window.removeEventListener("blur",this,{capture:!0}),delete this.accessibleMathML,delete this.ariaLiveText,delete this.field,delete this.fieldContent,this.virtualKeyboardToggle.remove(),delete this.virtualKeyboardToggle,this._virtualKeyboard&&(this._virtualKeyboard.dispose(),delete this._virtualKeyboard),function gG(n){cC(n.popover),$4&&$4.release(),Y4&&Y4.release(),delete n.popover}(this),function f$(n){cC(n.keystrokeCaption),pw&&pw.release(),_w&&_w.release(),delete n.keystrokeCaption}(this),this.stylesheets.forEach(o=>o?.release())}flushInlineShortcutBuffer(n){if(null!=n||(n={defer:!1}),!n.defer)return this.inlineShortcutBuffer=[],clearTimeout(this.inlineShortcutBufferFlushTimer),void(this.inlineShortcutBufferFlushTimer=0);this.options.inlineShortcutTimeout>0&&(clearTimeout(this.inlineShortcutBufferFlushTimer),this.inlineShortcutBufferFlushTimer=setTimeout(()=>this.flushInlineShortcutBuffer(),this.options.inlineShortcutTimeout))}executeCommand(n){var o,e;return"virtual-keyboard"===yg(n)?null!=(e=null==(o=this.virtualKeyboard)?void 0:o.executeCommand(n))&&e:function yG(n,o){var e,i,a;if(!o)return!1;let r,s=[],l=!1,c=!1;qa(o)?(r=o[0],s=o.slice(1)):r=o,r=r.replace(/-\w/g,h=>h[1].toUpperCase());let d=null==(e=Du[r])?void 0:e.target;if("model"===d){if(n.options.readOnly&&/^(paste|cut|insert|delete|transpose|add)/.test(r))return n.model.announce("plonk"),!1;/^(delete|transpose|add)/.test(r)&&"deleteBackward"!==r&&n.flushInlineShortcutBuffer(),/^(delete|transpose|add)/.test(r)&&"latex"!==n.mode&&(n.popUndoStack(),n.snapshot()),"latex"===n.mode&&!/^(complete)/.test(r)&&H4(n),Du[r].fn(n.model,...s),"latex"!==n.mode&&/^(delete|transpose|add)/.test(r)&&n.snapshot(),"latex"===n.mode&&Lx(n),c=!0,l=!0}else if("virtual-keyboard"===d)c=null!=(a=null==(i=n.virtualKeyboard)?void 0:i.executeCommand(o))&&a,l=!0;else{if(!Du[r])throw new Error(`Unknown command "${r}"`);/^(undo|redo)/.test(r)&&n.flushInlineShortcutBuffer(),c=Du[r].fn(n,...s),l=!0}return"virtual-keyboard"!==d&&(!n.model.selectionIsCollapsed||/^(transpose|paste|complete|((moveToNextChar|moveToPreviousChar|extend).*))_$/.test(r))&&(n.flushInlineShortcutBuffer(),n.style={}),c&&ea(n),l}(this,n)}get errors(){return function K5(n,o,e){var i;let a=new vx(Np(n,null),o,{args:null,mathstyle:"displaystyle",parseMode:null!=(i=e?.parseMode)?i:"math"});for(;!a.end();)a.parse();return a.errors}(this.model.getValue(),this)}getValue(n,o,e){return this.model.getValue(n,o,e)}setValue(n,o){var e;void 0===(o=o??{mode:"math"}).insertionMode&&(o.insertionMode="replaceAll"),(void 0===o.format||"auto"===o.format)&&(o.format="latex");let i="math";(void 0===o.mode||"auto"===o.mode)&&(i=null!=(e=RC(this.model,this.model.position))?e:"math"),Qo.insert(i,this.model,n,o)&&(this.undoManager.snapshot(),ea(this))}get expression(){let n=this.computeEngine;return n?n.box(n.parse(this.model.getValue())):null}loadSound(n){var o=this;return(0,Ya.Z)(function*(){var e,i,a,r,s,l,c;delete o.audioBuffers[n];let d="";switch(n){case"keypress":d="string"==typeof o.options.keypressSound?o.options.keypressSound:null==(e=o.options.keypressSound)?void 0:e.default;break;case"spacebar":d="string"==typeof o.options.keypressSound?o.options.keypressSound:null!=(r=null==(i=o.options.keypressSound)?void 0:i.spacebar)?r:null==(a=o.options.keypressSound)?void 0:a.default;break;case"delete":d="string"==typeof o.options.keypressSound?o.options.keypressSound:null!=(c=null==(s=o.options.keypressSound)?void 0:s.delete)?c:null==(l=o.options.keypressSound)?void 0:l.default;break;case"plonk":d=o.options.plonkSound}if("string"!=typeof d)return;d=d.trim();let h=o.options.soundsDirectory;if(null==h||"null"===h||"none"===d||"null"===d)return;let _=yield(yield fetch(yield ZC(h+"/"+d))).arrayBuffer(),x=yield o.audioContext.decodeAudioData(_);o.audioBuffers[n]=x})()}playSound(n){var o=this;return(0,Ya.Z)(function*(){if(o.audioBuffers[n]||(yield o.loadSound(n)),!o.audioBuffers[n])return;let e=o.audioContext.createBufferSource();e.buffer=o.audioBuffers[n];let i=o.audioContext.createGain();i.gain.value=.5,e.connect(i).connect(o.audioContext.destination),e.start()})()}scrollIntoView(){var n;if(!this.element)return;null==(n=this.host)||n.scrollIntoView({block:"nearest",inline:"nearest"}),this.dirty&&th(this,{interactive:!0});let o=this.field.getBoundingClientRect(),e=null;if(this.model.selectionIsCollapsed)e=_g(this.field);else{let i=mC(this);if(i.length>0){let a=-1/0,r=-1/0;for(let s of i)s.right>a&&(a=s.right),s.top<r&&(r=s.top);e={x:a+o.left-this.field.scrollLeft,y:r+o.top-this.field.scrollTop,height:0}}}if(this.host&&e){let i=this.host.getBoundingClientRect(),a=e.y,r=this.host.scrollTop;a<i.top?r=a-i.top+this.host.scrollTop:a>i.bottom&&(r=a-i.bottom+this.host.scrollTop+e.height),this.host.scroll({top:r,left:0})}if(e){let i=e.x-window.scrollX,a=this.field.scrollLeft;i<o.left?a=i-o.left+this.field.scrollLeft-20:i>o.right&&(a=i-o.right+this.field.scrollLeft+20),this.field.scroll({top:this.field.scrollTop,left:a})}}insert(n,o){if("string"==typeof n&&n.length>0){if(this.flushInlineShortcutBuffer(),(o=o??{mode:"math"}).focus&&this.focus(),o.feedback&&(this.options.keypressVibration&&l4()&&navigator.vibrate(3),this.playSound("keypress")),o.scrollIntoView&&this.scrollIntoView(),"\\\\"===n)qC(this.model);else if("&"===n)FC(this.model);else{let e=this.style;Qo.insert(this.mode,this.model,n,Ee({style:this.model.at(this.model.position).computedStyle},o)),o.resetStyle&&(this.style=e)}return this.undoManager.snapshot(),ea(this),!0}return!1}switchMode(n,o="",e=""){var i;if(this.mode===n||this.options.readOnly||null==(i=this.host)||!i.dispatchEvent(new Event("mode-change",{bubbles:!0,composed:!0,cancelable:!0})))return;let a=this.mode,{model:r}=this;r.deferNotifications({content:!!e||!!o,selection:!0,type:"insertText"},()=>{let s=!1;if(this.flushInlineShortcutBuffer(),this.smartModeSuppressed=/text|math/.test(this.mode)&&/text|math/.test(n),o&&"latex"!==n){let l=Gr(o,this,{parseMode:n});r.collapseSelection("forward");let c=r.at(r.position);r.position=r.offsetOf(c.parent.addChildrenAfter(l,c)),s=!0}if(this.mode=n,"latex"===n){let l=r.selectionIsCollapsed;Xm(this,"accept");let c,d=r.at(r.position);if(l)c="\\";else{let _=gl(r.selection);c=this.model.getValue(_,"latex");let x=this.model.extractAtoms(_);1===x.length&&x[0]instanceof $o&&(c=o,l=!0),d=r.at(_[0])}let h=new Ld(c,this);d.parent.addChildAfter(h,d),l?r.position=r.offsetOf(h.lastChild):r.setSelection(r.offsetOf(h.firstChild),r.offsetOf(h.lastChild))}else bg(r).forEach(l=>{l.isError=!1});if(e){let l=Gr(e,this,{parseMode:a});r.collapseSelection("forward");let c=r.at(r.position);r.position=r.offsetOf(c.parent.addChildrenAfter(l,c)),s=!0}return ea(this),s}),this.mode=n}hasFocus(){return this.keyboardDelegate.hasFocus()}focus(n){var o;this.hasFocus()||(this.keyboardDelegate.focus(),this.model.announce("line"),(null==(o=n?.scrollIntoView)||o)&&this.scrollIntoView())}blur(){this.hasFocus()&&this.keyboardDelegate.blur()}select(){this.model.selection={ranges:[[0,this.model.lastOffset]]}}applyStyle(n,o={}){var e,i;let a={operation:"set",suppressChangeNotifications:!1};Zx(o)?a.range=o:(a.range=o.range,a.suppressChangeNotifications=null!=(e=o.suppressChangeNotifications)&&e);let r=sT(this,n),s=null!=(i=a.operation)?i:"set";this.model.deferNotifications({content:!a.suppressChangeNotifications,type:"insertText"},()=>{void 0===a.range?this.model.selection.ranges.forEach(l=>sw(this.model,l,r,{operation:s})):sw(this.model,a.range,r,{operation:s})}),ea(this)}getCaretPoint(){let n=_g(this.field);return n?{x:n.x,y:n.y}:null}setCaretPoint(n,o){let e=Eg(this,n,o,{bias:0});if(e<0)return!1;let i=this.model.position;return this.model.position=e,this.model.announce("move",i),ea(this),!0}getPlaceholderField(n){var o;return null==(o=this.placeholders.get(n))?void 0:o.field}attachNestedMathfield(){let n=!1,o=this.field.getBoundingClientRect();this.placeholders.forEach((e,i)=>{var a,r;let s=this.field.querySelector(`[data-placeholder-id="${i}"]`);if(!s)return;let l=s.getBoundingClientRect(),d=l.left-o.left+(null!=(a=this.element.offsetLeft)?a:0);(!e.field.style.left||Math.abs(d-parseFloat(e.field.style.left))>=1)&&(n=!0,e.field.style.left=`${d}px`);let h=l.top-o.top+(null!=(r=this.element.offsetTop)?r:0);(!e.field.style.top||Math.abs(h-parseFloat(e.field.style.top))>=1)&&(n=!0,e.field.style.top=`${h}px`)}),n&&ea(this)}canUndo(){return this.undoManager.canUndo()}canRedo(){return this.undoManager.canRedo()}popUndoStack(){this.undoManager.pop()}snapshot(){var n,o;this.undoManager.snapshot()&&(null==(n=this.virtualKeyboard)||n.updateToolbar(this),null==(o=this.host)||o.dispatchEvent(new CustomEvent("undo-state-change",{bubbles:!0,composed:!0,detail:{type:"snapshot"}})))}snapshotAndCoalesce(){var n,o;this.undoManager.snapshotAndCoalesce()&&(null==(n=this.virtualKeyboard)||n.updateToolbar(this),null==(o=this.host)||o.dispatchEvent(new CustomEvent("undo-state-change",{bubbles:!0,composed:!0,detail:{type:"snapshot"}})))}undo(){var n,o;this.undoManager.undo()&&(null==(n=this.virtualKeyboard)||n.updateToolbar(this),null==(o=this.host)||o.dispatchEvent(new CustomEvent("undo-state-change",{bubbles:!0,composed:!0,detail:{type:"undo"}})))}redo(){var n,o;this.undoManager.redo()&&(null==(n=this.virtualKeyboard)||n.updateToolbar(this),null==(o=this.host)||o.dispatchEvent(new CustomEvent("undo-state-change",{bubbles:!0,composed:!0,detail:{type:"undo"}})))}resetUndo(){var n;null==(n=this.undoManager)||n.reset()}_onSelectionDidChange(){var n,o,e;let i=this.model;this.keyboardDelegate.setValue(this.model.getValue(this.model.selection,"latex-expanded"));let a=i.getAtoms(i.selection);if(1===a.length&&"placeholder"===a[0].type){let r=a[0];this.placeholders.has(r.placeholderId)&&(null==(n=this.placeholders.get(r.placeholderId))||n.field.focus())}{let r=i.at(i.position),s=null!=(o=r.mode)?o:tw(this.options);this.mode!==s&&("latex"===this.mode?(Xm(this,"accept",{mode:s}),i.position=i.offsetOf(r)):this.switchMode(s))}null==(e=this.host)||e.dispatchEvent(new Event("selection-change",{bubbles:!0,composed:!0}))}onFocus(){var n,o,e;this.focusBlurInProgress||!this.blurred||(this.focusBlurInProgress=!0,this.blurred=!1,this.keyboardDelegate.focus(),null==(n=this.virtualKeyboard)||n.setOptions(this.options),null==(o=this.virtualKeyboard)||o.enable(),"onfocus"===this.options.virtualKeyboardMode&&this.executeCommand("showVirtualKeyboard"),Px(this),th(this,{interactive:!0}),null==(e=this.host)||e.dispatchEvent(new FocusEvent("focus",{bubbles:!1,composed:!0})),this.valueOnFocus=this.model.getValue(),this.focusBlurInProgress=!1)}onBlur(){var n,o,e,i;this.focusBlurInProgress||this.blurred||(this.focusBlurInProgress=!0,this.blurred=!0,this.ariaLiveText.textContent="",Xm(this,"accept"),this.model.getValue()!==this.valueOnFocus&&(null==(n=this.host)||n.dispatchEvent(new Event("change",{bubbles:!0,composed:!0}))),/onfocus|manual/.test(this.options.virtualKeyboardMode)&&!pa().sharedVirtualKeyboard&&this.executeCommand("hideVirtualKeyboard"),null==(o=this.virtualKeyboard)||o.disable(),null==(e=this.host)||e.dispatchEvent(new Event("blur",{bubbles:!1,composed:!0})),null==(i=this.host)||i.dispatchEvent(new UIEvent("focusout",{bubbles:!0,composed:!0})),ea(this),this.focusBlurInProgress=!1)}onCompositionStart(n){this.model.deleteAtoms(gl(this.model.selection));let o=_g(this.field);o&&requestAnimationFrame(()=>{th(this),this.keyboardDelegate.moveTo(o.x,o.y-o.height)})}onCompositionUpdate(n){(function QG(n,o){let e=n.at(n.position);if("composition"===e.type)e.value=o;else{let{caret:i}=e;e.caret="";let a=new O4(o,n.mathfield,{mode:e.mode});a.caret=i,e.parent.addChildAfter(a,e),n.position+=1}})(this.model,n),ea(this)}onCompositionEnd(n){(function RG(n){let o=n.at(n.position);"composition"===o.type&&(o.parent.removeChild(o),n.position-=1)})(this.model),gw(this,n,{simulateKeystroke:!0})}onResize(){Px(this)}onWheel(n){let o=5*n.deltaX;if(!Number.isFinite(o)||0===o)return;let e=this.field;o<0&&0===e.scrollLeft||o>0&&e.offsetWidth+e.scrollLeft>=e.scrollWidth||(e.scrollBy({top:0,left:o}),n.preventDefault(),n.stopPropagation())}getHTMLElement(n){let o=n;for(;!o.id&&o.hasChildren;)o=n.children[0];if(o.id)return this.fieldContent.querySelector(`[data-atom-id="${o.id}"]`);throw new TypeError("Could not get an ID from atom")}}(this.shadowRoot.querySelector(":host > div"),ei(Ee({},Di.has(this)?Di.get(this).options:Jx(this)),{eventSink:this,value:a})),!Di.has(this)){this.upgradeProperty("disabled"),this.upgradeProperty("readonly");for(let r of Object.keys(Kl.optionsAttributes))this.upgradeProperty(zc(r))}null!=(e=this._mathfield)&&e.model?(Di.has(this)&&this._mathfield.model.deferNotifications({content:!1,selection:!1},()=>{let r=Di.get(this).value;void 0!==r&&this._mathfield.setValue(r),this._mathfield.model.selection=Di.get(this).selection,Di.delete(this)}),i.addEventListener("slotchange",r=>{if(r.target!==i)return;let s=i.assignedNodes().map(l=>3===l.nodeType?l.textContent:"").join("").trim();s!==this._slotValue&&(this._mathfield?this._mathfield.setValue(s):this.value=s)}),this.dispatchEvent(new Event("mount",{cancelable:!1,bubbles:!0,composed:!0}))):this._mathfield=null}disconnectedCallback(){if(this.dispatchEvent(new Event("unmount",{cancelable:!1,bubbles:!0,composed:!0})),!this._mathfield)return;let n=Up(this._mathfield.options,Object.keys(Kl.optionsAttributes).map(o=>zc(o)));Di.set(this,{value:this._mathfield.getValue(),selection:this._mathfield.model.selection,options:n}),this._mathfield.dispose(),this._mathfield=null}upgradeProperty(n){if(this.hasOwnProperty(n)){let o=this[n];delete this[n],("readonly"===n||"read-only"===n)&&(n="readOnly"),this[n]=o}}attributeChangedCallback(n,o,e){if(o===e)return;let i=null!==e;switch(n){case"disabled":this.disabled=i;break;case"read-only":case"readonly":this.readOnly=i}}get readonly(){return this.hasAttribute("readonly")||this.hasAttribute("read-only")}set readonly(n){let o=!!n;o?(this.setAttribute("readonly",""),this.setAttribute("disabled",""),this.setAttribute("aria-readonly","true")):(this.removeAttribute("readonly"),this.removeAttribute("read-only"),this.removeAttribute("disabled"),this.removeAttribute("aria-readonly")),this.setOptions({readOnly:o})}get disabled(){return this.hasAttribute("disabled")}set disabled(n){let o=!!n;o?this.setAttribute("disabled",""):this.removeAttribute("disabled"),this.setAttribute("aria-disabled",o?"true":"false"),this.setOptions({readOnly:o})}get value(){return this.getValue()}set value(n){this.setValue(n)}get defaultMode(){return this.getOption("defaultMode")}set defaultMode(n){this.setOptions({defaultMode:n})}get fontsDirectory(){return this.getOption("fontsDirectory")}set fontsDirectory(n){this.setOptions({fontsDirectory:n})}get mathModeSpace(){return this.getOption("mathModeSpace")}set mathModeSpace(n){this.setOptions({mathModeSpace:n})}get inlineShortcutTimeout(){return this.getOption("inlineShortcutTimeout")}set inlineShortcutTimeout(n){this.setOptions({inlineShortcutTimeout:n})}get keypressVibration(){return this.getOption("keypressVibration")}set keypressVibration(n){this.setOptions({keypressVibration:n})}get keypressSound(){return this.getOption("keypressSound")}set keypressSound(n){this.setOptions({keypressSound:n})}get plonkSound(){var n;return null!=(n=this.getOption("plonkSound"))?n:null}set plonkSound(n){this.setOptions({plonkSound:n})}get letterShapeStyle(){return this.getOption("letterShapeStyle")}set letterShapeStyle(n){this.setOptions({letterShapeStyle:n})}get locale(){return this.getOption("locale")}set locale(n){this.setOptions({locale:n})}get readOnly(){return this.getOption("readOnly")}set readOnly(n){this.setOptions({readOnly:n})}get removeExtraneousParentheses(){return this.getOption("removeExtraneousParentheses")}set removeExtraneousParentheses(n){this.setOptions({removeExtraneousParentheses:n})}get smartFence(){return this.getOption("smartFence")}set smartFence(n){this.setOptions({smartFence:n})}get smartMode(){return this.getOption("smartMode")}set smartMode(n){this.setOptions({smartMode:n})}get smartSuperscript(){return this.getOption("smartSuperscript")}set smartSuperscript(n){this.setOptions({smartSuperscript:n})}get speechEngine(){return this.getOption("speechEngine")}set speechEngine(n){this.setOptions({speechEngine:n})}get speechEngineRate(){return this.getOption("speechEngineRate")}set speechEngineRate(n){this.setOptions({speechEngineRate:n})}get speechEngineVoice(){return this.getOption("speechEngineVoice")}set speechEngineVoice(n){this.setOptions({speechEngineVoice:n})}get textToSpeechMarkup(){return this.getOption("textToSpeechMarkup")}set textToSpeechMarkup(n){this.setOptions({textToSpeechMarkup:n})}get textToSpeechRules(){return this.getOption("textToSpeechRules")}set textToSpeechRule(n){this.setOptions({textToSpeechRules:n})}get virtualKeyboardLayout(){return this.getOption("virtualKeyboardLayout")}set virtualKeyboardLayout(n){this.setOptions({virtualKeyboardLayout:n})}get virtualKeyboardMode(){return this.getOption("virtualKeyboardMode")}set virtualKeyboardMode(n){this.setOptions({virtualKeyboardMode:n})}get virtualKeyboardTheme(){return this.getOption("virtualKeyboardTheme")}set virtualKeyboardTheme(n){this.setOptions({virtualKeyboardTheme:n})}get virtualKeyboards(){return this.getOption("virtualKeyboards")}set virtualKeyboards(n){this.setOptions({virtualKeyboards:n})}get useSharedVirtualKeyboard(){return this.getOption("useSharedVirtualKeyboard")}set useSharedVirtualKeyboard(n){this.setOptions({useSharedVirtualKeyboard:n})}get sharedVirtualKeyboardTargetOrigin(){return this.getOption("sharedVirtualKeyboardTargetOrigin")}set sharedVirtualKeyboardTargetOrigin(n){this.setOptions({sharedVirtualKeyboardTargetOrigin:n})}get selection(){return this._mathfield?this._mathfield.model.selection:Di.has(this)?Di.get(this).selection:{ranges:[[0,0]],direction:"forward"}}set selection(n){"number"==typeof n&&(n={ranges:[[n,n]]}),this._mathfield?this._mathfield.model.selection=n:Di.has(this)?Di.set(this,ei(Ee({},Di.get(this)),{selection:n})):Di.set(this,{value:void 0,selection:n,options:Jx(this)})}get selectionIsCollapsed(){let n=this.selection;return 1===n.ranges.length&&n.ranges[0][0]===n.ranges[0][1]}get position(){return this._mathfield?this._mathfield.model.position:Di.has(this)?Di.get(this).selection.ranges[0][0]:0}set position(n){this._mathfield&&(this._mathfield.model.position=n),Di.has(this)?Di.set(this,ei(Ee({},Di.get(this)),{selection:{ranges:[[n,n]]}})):Di.set(this,{value:void 0,selection:{ranges:[[n,n]]},options:Jx(this)})}getOffsetDepth(n){var o;return this._mathfield?(null==(o=this._mathfield.model.at(n))?void 0:o.treeDepth)-2:0}get lastOffset(){var n,o;return null!=(o=null==(n=this._mathfield)?void 0:n.model.lastOffset)?o:-1}};function zc(n){return n.toLowerCase().replace(/[^a-zA-Z\d]+(.)/g,(o,e)=>e.toUpperCase())}function Jx(n){let o={},e=Kl.optionsAttributes;return Object.keys(e).forEach(i=>{if(n.hasAttribute(i)){let a=n.getAttribute(i);o[zc(i)]="boolean"===e[i]||("on/off"===e[i]?"on"===a||"off"!==a&&void 0:"number"===e[i]?Number.parseFloat(a??"0"):a)}else"boolean"===e[i]&&(o[zc(i)]=!1)}),o}function yw(){return!(!window.ElementInternals||!HTMLElement.prototype.attachInternals||!("role"in window.ElementInternals.prototype))}var mT,hT,pT,ww=Kl;!Ds()||null!=(mT=window.customElements)&&mT.get("math-field")||(null!=globalThis[hT=Symbol.for("io.cortexjs.mathlive")]||(globalThis[hT]={}),globalThis[Symbol.for("io.cortexjs.mathlive")].version="0.89.4",window.MathfieldElement=Kl,null==(pT=window.customElements)||pT.define("math-field",Kl));var Sn=1200,Yo=3e3,Ar=4e3;function Fe(n,o,e=Yo,i="$0"){for(let a of o)jc[a]&&(jc[a].frequency=e,jc[a].category=n,jc[a].template=i.replace(/\$0/g,a)),qc[a]&&(qc[a]=ei(Ee({},qc[a]),{frequency:e,category:n,template:i.replace(/\$0/g,a)}))}function pa(){var n;return null!=globalThis[n=Symbol.for("io.cortexjs.mathlive")]||(globalThis[n]={}),globalThis[Symbol.for("io.cortexjs.mathlive")]}Fe("Trigonometry",["\\cos","\\sin","\\tan"],Ar),Fe("Trigonometry",["\\arccos","\\arcsin","\\arctan","\\arctg","\\arcctg","\\arcsec","\\arccsc","\\arsinh","\\arcosh","\\artanh","\\arcsech","\\arccsch","\\arg","\\ch","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\lg","\\lb","\\sec","\\sinh","\\sh","\\tanh","\\tg","\\th"],2e3),Fe("Functions",["\\ln","\\log","\\exp","\\lim"],Ar),Fe("Functions",["\\dim","\\ker","\\deg","\\det","\\mod","\\min","\\max"],Yo),Fe("Functions",["\\hom"],Sn),Fe("Decoration",["\\rule"],200,"$0{2em}{1em}"),Fe("Decoration",["\\color","\\textcolor"],200,"{$0{m0}A}{$0{m1}B}{$0{m2}C }{$0{m3}a}{$0{m4}b}{$0{m5}c}{$0{m6}8}"),Fe("Decoration",["\\overline","\\underline"],Yo,"$0{\\placeholder{}}"),Fe("Decoration",["\\enclose"],Sn,'\\enclose{updiagonalstrike,roundedbox}[1px solid red, mathbackground="#fbc0bd"]{x=0}'),Fe("Decoration",["\\fcolorbox"],Sn,'\\fcolorbox{#cd0030}{#ffd400}{\\unicode{"2B1A}}'),Fe("Decoration",["\\colorbox"],Sn,'\\colorbox{#fbc0bd}{\\unicode{"2B1A}}'),Fe("Decoration",["\\boxed","\\cancel","\\bcancel","\\xcancel"],Sn,"$0{\\placeholder{}}"),Fe("Decoration",["\\bbox"],Sn,'\\bbox[#ffd400, solid 2px #ffd400]{\\unicode{"2B1A}}'),Fe("Styling",["\\mathbb"],Ar,"$0{Don Knuth}"),Fe("Styling",["\\textbf","\\textup","\\textit","\\textrm","\\textsf","\\texttt","\\textnormal","\\textmd","\\textsl","\\textsc","\\mathsf","\\mathtt","\\mathrm","\\mathfrak","\\mathcal","\\mathscr","\\mathbf","\\mathmd","\\mathit","\\text","\\mbox","\\Bbb","\\bold","\\bm","\\boldsymbol"],Yo,"$0{Don Knuth}"),Fe("Styling",["\\frak","\\tt","\\bf","\\it","\\rmfamily","\\sffamily","\\ttfamily","\\class","\\cssId","\\htmlData","\\htmlStyle"],Sn,"{$0 Don Knuth}"),Fe("Styling",["\\bfseries","\\mdseries","\\upshape","\\slshape","\\scshape"],Sn,"\\text{$0 Don Knuth}"),Fe("Styling",["\\class","\\cssId"],Sn,"$0{testIdentifier}{Don Knuth}"),Fe("Styling",["\\fontseries"],Sn,"\\text{$0{b}Don Knuth}"),Fe("Styling",["\\fontfamily"],Sn,"\\text{$0{cmtt}Don Knuth}"),Fe("Styling",["\\fontshape"],Sn,"\\text{$0{sc}Don Knuth}"),Fe("Styling",["\\selectfont"],Sn,"\\text{$0}"),Fe("Styling",["\\emph"],Sn,"Don$0{Knuth}"),Fe("Styling",["\\em"],Sn,"Don{$0 Knuth}"),Fe("Layout",["\\mathop","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathord","\\mathinner","\\operatorname","\\operatorname*"],Sn,"x=$0{arg}=0"),Fe("Layout",["\\middle"],Sn,"\\left\\{x$0|x>0\\right\\}"),Fe("Layout",["\\overset","\\underset","\\stackrel","\\stackbin"],Sn,"$0{arg}{x=0}"),Fe("Layout",["\\rlap","\\mathrlap"],Sn,"$0{/}0"),Fe("Layout",["\\llap","\\mathllap"],Sn,"o$0{/}"),Fe("Fractions",["\\frac"],Ar,"$0{\\placeholder{}}{\\placeholder{}}"),Fe("Fractions",["\\binom","\\dfrac","\\tfrac","\\dbinom","\\tbinom","\\pdiff","\\cfrac"],Sn,"$0{\\placeholder{}}{\\placeholder{}}"),Fe("Fractions",["\\over","\\atop","\\choose"],Sn,'\\unicode{"2B1A} $0 \\unicode{"2B1A}'),Fe("Fractions",["\\overwithdelims","\\atopwithdelims"],Sn,'{\\unicode{"2B1A} $0{\\lbrace}{\\rbrace} \\unicode{"2B1A}}'),Fe("Extensible Operators",["\\sum","\\prod","\\bigcap","\\bigcup","\\int"],Ar),Fe("Extensible Operators",["\\bigoplus","\\smallint","\\iint","\\oint"],Yo),Fe("Extensible Operators",["\\bigwedge","\\bigvee","\\coprod","\\bigsqcup","\\bigotimes","\\bigodot","\\biguplus","\\intop","\\sqcup","\\sqcap","\\uplus","\\wr","\\Cap","\\Cup","\\doublecap","\\doublecup","\\amalg","\\iiint","\\oiint","\\oiiint","\\intclockwise","\\varointclockwise","\\ointctrclockwise","\\intctrclockwise"],Sn),Fe("Accents",["\\vec"],Ar),Fe("Accents",["\\bar","\\ddot","\\acute","\\tilde","\\check"],Yo,"$0{\\placeholder{}}"),Fe("Accents",["\\^","\\`","\\'"],Sn,"$0{e}"),Fe("Accents",["\\c"],Sn,"$0{c}"),Fe("Accents",["\\~"],Sn,"$0{n}"),Fe("Accents",["\\mathring","\\hat","\\dot","\\breve","\\grave"],Sn,"$0{\\placeholder{}}"),Fe("Extensible Symbols",["\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftharpoon","\\overrightharpoon","\\overleftrightarrow","\\overbrace","\\overlinesegment","\\overgroup","\\widehat","\\widecheck","\\widetilde"],Yo,"$0{ABC}"),Fe("Extensible Symbols",["\\underrightarrow","\\underleftarrow","\\underleftrightarrow","\\underbrace","\\underlinesegment","\\undergroup","\\utilde"],Yo,"$0{ABC}"),Fe("Sizing",["\\tiny","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],Sn,"$0{x=0}"),Fe("Sizing",["\\big","\\Big","\\bigg","\\Bigg"],Sn,"$0($0)"),Fe("Sizing",["\\bigl","\\Bigl","\\biggl","\\Biggl"],Sn,"$0("),Fe("Sizing",["\\bigr","\\Bigr","\\biggr","\\Biggr"],Sn,"$0)"),Fe("Sizing",["\\bigm","\\Bigm","\\biggm","\\Biggm"],Sn,"$0|"),Fe("Letterlike Symbols",["\\nabla","\\partial","\\N","\\R","\\Q","\\C","\\Z","\\exponentialE","\\forall","\\exists","\\nexists"],Ar),Fe("Letterlike Symbols",["\\doubleStruckCapitalP","\\P","\\ell","\\hbar","\\hslash","\\imath","\\jmath","\\imaginaryI","\\imaginaryJ","\\differentialD","\\rd","\\capitalDifferentialD","\\doubleStruckCapitalN","\\doubleStruckCapitalR","\\doubleStruckCapitalQ","\\doubleStruckCapitalC","\\doubleStruckCapitalZ","\\rD","\\differencedelta","\\mid","@","\\Re","\\Im","\\$","\\%","\\And","\\degree"],Yo),Fe("Letterlike Symbols",["\\top","\\bot","\\scriptCapitalE","\\scriptCapitalH","\\scriptCapitalL","\\gothicCapitalC","\\gothicCapitalH","\\gothicCapitalI","\\gothicCapitalR","\\Bbbk","\\Finv","\\Game","\\wp","\\eth","\\mho","\\pounds","\\yen","\\euro"],Sn),Fe("Crosses",["\\dagger","\\dag"],Ar),Fe("Crosses",["\\ddag","\\ddagger","\\maltese","\\textdagger","\\textdaggerdbl"],Sn),Fe("Various",["\\checkmark","\\diagup","\\diagdown","\\angle","\\measuredangle","\\sphericalangle","\\prime","\\doubleprime","\\backprime","\\backdoubleprime","\\sharp","\\flat","\\natural","\\&","\\#","\\clubsuit","\\spadesuit","\\diamondsuit","\\heartsuit","\\backslash","\\infty","/","\\_","\\/","|","'"],Sn),Fe("Various",["\\unicode"],Sn,'$0{"2B1A}'),Fe("Arrows",["\\longrightarrow","\\rightarrow","\\Longrightarrow","\\Rightarrow"],Ar),Fe("Arrows",["\\longmapsto","\\mapsto","\\Longleftrightarrow","\\rightleftarrows","\\leftarrow","\\curvearrowleft","\\uparrow","\\downarrow","\\hookrightarrow","\\rightharpoonup","\\rightleftharpoons"],Yo),Fe("Arrows",["\\Leftarrow","\\longleftrightarrow","\\longleftarrow","\\Longleftarrow","\\searrow","\\nearrow","\\swarrow","\\nwarrow","\\Uparrow","\\Downarrow","\\updownarrow","\\Updownarrow","\\hookleftarrow","\\leftharpoonup","\\leftharpoondown","\\rightharpoondown","\\leftrightarrows","\\dashrightarrow","\\dashleftarrow","\\leftleftarrows","\\Lleftarrow","\\twoheadleftarrow","\\leftarrowtail","\\looparrowleft","\\leftrightharpoons","\\circlearrowleft","\\Lsh","\\upuparrows","\\downharpoonleft","\\multimap","\\leftrightsquigarrow","\\twoheadrightarrow","\\rightarrowtail","\\looparrowright","\\curvearrowright","\\circlearrowright","\\Rsh","\\downdownarrows","\\upharpoonright","\\downharpoonright","\\rightsquigarrow","\\leadsto","\\Rrightarrow","\\restriction"],Sn),Fe("Arrows",["\\upharpoonleft","\\rightrightarrows"],0),Fe("Negated Arrows",["\\nrightarrow","\\nRightarrow","\\nleftrightarrow","\\nLeftrightarrow","\\nleftarrow","\\nLeftarrow"],Sn),Fe("Extensible Symbols",["\\xrightarrow","\\xleftarrow","\\xRightarrow","\\xLeftarrow","\\xleftharpoonup","\\xleftharpoondown","\\xrightharpoonup","\\xrightharpoondown","\\xlongequal","\\xtwoheadleftarrow","\\xtwoheadrightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xrightleftharpoons","\\xleftrightharpoons","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium"],Sn,"$0[below]{above}=0"),Fe("Negated Relations",["\\nless","\\nleqslant","\\lneq","\\lneqq","\\nleqq","\\unlhd","\\unrhd","\\lvertneqq","\\lnsim","\\lnapprox","\\nprec","\\npreceq","\\precnsim","\\precnapprox","\\nsim","\\nshortmid","\\nmid","\\nvdash","\\nvDash","\\ngtr","\\ngeqslant","\\ngeqq","\\gneq","\\gneqq","\\gvertneqq","\\gnsim","\\nsucc","\\succnsim","\\ncong","\\nshortparallel","\\nparallel","\\nVDash","\\nVdash","\\precneqq","\\succneqq","\\gnapprox","\\succnapprox","\\nsucceq"],Sn),Fe("Hebrew",["\\aleph","\\beth","\\daleth","\\gimel"],Sn),Fe("Fences",["\\lbrace","\\rbrace","\\vert","\\Vert","\\{","\\}","(",")","[","]"],Ar),Fe("Fences",["\\langle","\\rangle","\\lfloor","\\rfloor","\\lceil","\\rceil","\\mvert","\\|","\\mVert"],Yo),Fe("Fences",["\\lvert","\\rvert","\\lVert","\\rVert","\\lbrack","\\rbrack","\\ulcorner","\\urcorner","\\llcorner","\\lrcorner","\\lgroup","\\rgroup","\\lmoustache","\\rmoustache"],Sn),Fe("Relations",["=","\\ne","\\neq","<",">","\\leqslant","\\geqslant","\\approx"],Ar),Fe("Relations",["\\lt","\\gt","\\le","\\ge","\\leq","\\geq","\\gg","\\cong","\\equiv","\\prec","\\preceq","\\succ","\\perp","\\parallel","\\propto","\\smile","\\frown","\\sim","\\gtrsim"],Yo),Fe("Relations",["\\coloneq","\\succeq","\\approxeq","\\thickapprox","\\lessapprox","\\gtrapprox","\\precapprox","\\succapprox","\\thicksim","\\succsim","\\precsim","\\backsim","\\eqsim","\\backsimeq","\\simeq","\\lesssim","\\nleq","\\ngeq","\\smallsmile","\\smallfrown","\\bowtie","\\asymp","\\leqq","\\eqslantless","\\ll","\\lll","\\lessgtr","\\lesseqgtr","\\lesseqqgtr","\\risingdotseq","\\fallingdotseq","\\preccurlyeq","\\curlyeqprec","\\vDash","\\Vvdash","\\bumpeq","\\Bumpeq","\\geqq","\\eqslantgtr","\\ggg","\\gtrless","\\gtreqless","\\gtreqqless","\\succcurlyeq","\\curlyeqsucc","\\Vdash","\\shortmid","\\shortparallel","\\between","\\pitchfork","\\varpropto","\\backepsilon","\\llless","\\gggtr","\\lhd","\\rhd","\\Join","\\doteq","\\doteqdot","\\Doteq","\\eqcirc","\\circeq","\\lessdot","\\gtrdot","\\measeq","\\eqdef","\\questeq"],Sn),Fe("Logic",["\\leftrightarrow","\\Leftrightarrow","\\to"],Ar),Fe("Logic",["\\models","\\vdash"],Yo),Fe("Logic",["\\therefore","\\because","\\implies","\\gets","\\dashv","\\impliedby","\\biconditional","\\roundimplies"],Sn),Fe("Operators",["+","-","*","\\cdot"],Ar),Fe("Operators",["\\sqrt"],Ar,"$0{\\placeholder{}}"),Fe("Operators",["\\pm","\\mp","\\times","\\div","\\surd"],Yo),Fe("Operators",["\\ltimes","\\rtimes","\\leftthreetimes","\\rightthreetimes","\\intercal","\\dotplus","\\centerdot","\\doublebarwedge","\\divideontimes","\\divides"],Sn),Fe("Logic",["\\wedge","\\vee","\\neg"],Ar),Fe("Logic",["\\lnot"],Yo),Fe("Logic",["\\land","\\lor","\\barwedge","\\veebar","\\nor","\\curlywedge","\\curlyvee"],Sn),Fe("Greek",["\\alpha","\\beta","\\gamma","\\delta","\\epsilon","\\varepsilon","\\zeta","\\eta","\\theta","\\vartheta","\\iota","\\kappa","\\varkappa","\\lambda","\\mu","\\nu","\\xi","\\pi","\\varpi","\\rho","\\varrho","\\sigma","\\varsigma","\\tau","\\phi","\\varphi","\\upsilon","\\chi","\\psi","\\omega","\\Gamma","\\Delta","\\Theta","\\Lambda","\\Xi","\\Pi","\\Sigma","\\Upsilon","\\Phi","\\Psi","\\Omega","\\digamma","\\omicron"],Yo),Fe("Sets",["\\emptyset","\\varnothing","\\cap","\\cup","\\in","\\notin","\\subset","\\supset","\\subseteq","\\supseteq","\\sqsubseteq"],Ar),Fe("Sets",["\\setminus","\\not","\\ni","\\sqsupseteq","\\nsupseteqq","\\supsetneq","\\varsupsetneq","\\supsetneqq","\\varsupsetneqq"],Yo),Fe("Sets",["\\smallsetminus","\\complement","\\owns","\\subsetneq","\\varsubsetneq","\\subsetneqq","\\varsubsetneqq","\\nsubset","\\nsupset","\\nsubseteq","\\nsupseteq","\\nsubseteqq","\\subseteqq","\\Subset","\\sqsubset","\\supseteqq","\\Supset","\\sqsupset"],Sn),Fe("Spacing",["\\space","\\quad","\\qquad"],Yo,'\\unicode{"203A}$0\\unicode{"2039}'),Fe("Spacing",["\\!","\\,","\\:","\\;","\\enskip","\\enspace"],Sn,'\\unicode{"203A}$0\\unicode{"2039}'),Fe("Spacing",["\\hspace","\\hspace*"],Sn,'\\unicode{"203A}$0{1em}\\unicode{"2039}'),Fe("Punctuation",["\\colon","\\cdotp","\\ldots","\\cdots","\\ddots","\\vdots","?","!",":",'"',",",".",";"],Yo),Fe("Punctuation",["\\mathellipsis","\\ldotp","\\Colon"],Sn),Fe("Boxes",["\\square","\\Box"],Yo),Fe("Boxes",["\\blacksquare","\\boxminus","\\boxplus","\\boxtimes","\\boxdot"],Sn),Fe("Circles",["\\circ","\\bullet","\\circleddash","\\oplus","\\otimes"],Yo),Fe("Circles",["\\bigcirc","\\circledast","\\ominus","\\circledcirc","\\oslash","\\circledS","\\circledR","\\odot"],Sn),Fe("Triangles",["\\triangle","\\triangleq"],Yo),Fe("Triangles",["\\bigtriangleup","\\vartriangle","\\triangledown","\\bigtriangledown","\\triangleleft","\\vartriangleleft","\\trianglelefteq","\\ntriangleleft","\\ntrianglelefteq","\\triangleright","\\vartriangleright","\\trianglerighteq","\\ntriangleright","\\ntrianglerighteq","\\blacktriangle","\\blacktriangledown","\\blacktriangleleft","\\blacktriangleright"],Sn),Fe("Shapes",["\\ast","\\star"],Yo),Fe("Shapes",["\\diamond","\\Diamond","\\lozenge","\\blacklozenge","\\bigstar"],Sn);let G$=(()=>{class n extends St.Q{actionClose(){this.mfe.value="",this.hiddenVirtualKeyboard(),this.onClose.emit()}actionInsert(){this.inp&&(this.inp.str=this.mfe.value),this.mfe.value="",this.hiddenVirtualKeyboard(),this.onInsertLatex.emit(this.inp)}showVirtualKeyboard(){this.isShow&&setTimeout(()=>{this.mfe.focus(),this.mfe.virtualKeyboardState="visible",this.isLoadLib=!1})}hiddenVirtualKeyboard(){this.mfe.virtualKeyboardState="hidden"}ngOnChanges(){this.mfe.value=(this.inp?.str.includes("<math xmlns")?this.commonService.convertMathTypeToLatex(this.inp?.str??""):this.inp?.str)??"",this.showVirtualKeyboard()}ngAfterViewInit(){document.getElementById("formula-mathtype-editor")?.appendChild(this.mfe),this.showVirtualKeyboard()}ngOnInit(){this.mfe.style.fontSize="35px",this.mfe.style.padding="10px",this.mfe.setOptions({fontsDirectory:"https://azota889.github.io/storage_public/azota_assets/mathlive/fonts",soundsDirectory:"https://azota889.github.io/storage_public/azota_assets/mathlive/sounds",virtualKeyboardMode:"onfocus",virtualKeyboardLayout:"dvorak"})}constructor(e){super(),this.commonService=e,this.onClose=new t.vpe,this.onInsertLatex=new t.vpe,this.isLoadLib=!0,this.mfe=new Kl}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(mi.z))},n.\u0275cmp=t.Xpm({type:n,selectors:[["mathtype-editor"]],inputs:{inp:"inp",isShow:"isShow"},outputs:{onClose:"onClose",onInsertLatex:"onInsertLatex"},features:[t.qOj,t.TTD],decls:18,vars:10,consts:[[1,"box-dialog"],["azt-track-service","mathTypeEditor--ICqsoSyYS3",1,"dialog-overlay",3,"click"],[1,"dialog-header"],[1,"dialog-title"],["azt-track-service","mathTypeEditor-3Cej2Ykz3qf",1,"dialog-close",3,"click"],[1,"dialog-body"],["id","formula-mathtype-editor"],[1,"dialog-footer"],[1,"dialog-noti"],[1,"dialog-ok"],["azt-track-service","mathTypeEditor-QurJasjSBOm",1,"btn","btn-primary","w-24",3,"disabled","click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t.NdJ("click",function(){return i.actionClose()}),t.qZA(),t.TgZ(2,"div")(3,"div",2)(4,"div",3),t._uU(5),t.ALo(6,"mytranslate"),t.qZA(),t.TgZ(7,"div",4),t.NdJ("click",function(){return i.actionClose()}),t.TgZ(8,"mat-icon"),t._uU(9,"close"),t.qZA()()(),t.TgZ(10,"div",5),t._UZ(11,"div",6),t.qZA(),t.TgZ(12,"div",7),t._UZ(13,"div",8),t.TgZ(14,"div",9)(15,"button",10),t.NdJ("click",function(){return i.actionInsert()}),t._uU(16),t.ALo(17,"mytranslate"),t.qZA()()()()()),2&e&&(t.xp6(2),t.Gre("box dialog",i.isMobileDevice?"-mobile":"",""),t.xp6(3),t.hij(" ",t.lcZ(6,6,"lang_auto_soan_thao_cong_thuc")," "),t.xp6(10),t.Q6J("disabled",i.isLoadLib),t.xp6(1),t.hij(" ",t.lcZ(17,8,"lang_auto_chen")," "))},dependencies:[Jo.Hw,jt.JV],styles:["body{--keyboard-zindex: 9999}.box-dialog[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:flex-start;top:0;left:0;width:100vw;height:100vh;position:fixed;z-index:9999}.box-dialog[_ngcontent-%COMP%]   .dialog-overlay[_ngcontent-%COMP%]{top:0;left:0;width:100vw;height:100vh;position:fixed;background-color:#0000004d}.dialog[_ngcontent-%COMP%]{position:absolute;margin-top:7vh;width:650px;box-shadow:#0000003d 0 3px 8px}.dialog-mobile[_ngcontent-%COMP%]{position:absolute;margin-top:7vh;width:95%;box-shadow:#0000003d 0 3px 8px}.dialog-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #d0d0d0;padding:10px}.dialog-title[_ngcontent-%COMP%]{font-weight:700}.dialog-close[_ngcontent-%COMP%]{display:flex;align-items:center;border-radius:50%}.dialog-close[_ngcontent-%COMP%]:hover{background-color:#d0d0d04a;cursor:pointer}.dialog-footer[_ngcontent-%COMP%]{display:flex;padding:10px;border-top:1px solid #d0d0d0;justify-content:space-between;align-items:center}.dialog-body[_ngcontent-%COMP%]{padding:10px}.for-type[_ngcontent-%COMP%]{color:#292980;cursor:pointer}"]}),n})(),$$=(()=>{class n extends St.Q{constructor(){super(...arguments),this.id_content="",this.onDropFile=new t.vpe}onFileSelected(e){let r=e.target.files,s=!!r&&r[0];0!=s&&this.onDropFile.emit(s)}setupDropFile(){const e=jQuery("#frame_inp_editor_"+this.id_content);e&&e.on("drag dragstart dragend dragover dragenter dragleave drop",function(i){i.preventDefault(),i.stopPropagation()}).on("dragover dragenter",function(){e.addClass("is-dragover")}).on("dragleave dragend drop",function(){e.removeClass("is-dragover")}).on("drop",i=>{this.onDropFile.emit(i.originalEvent.dataTransfer.files[0])})}ngAfterViewInit(){this.setupDropFile()}}return n.\u0275fac=function(){let o;return function(i){return(o||(o=t.n5z(n)))(i||n)}}(),n.\u0275cmp=t.Xpm({type:n,selectors:[["question-dropper"]],inputs:{id_content:"id_content"},outputs:{onDropFile:"onDropFile"},features:[t.qOj],decls:13,vars:7,consts:[["azt-track-service","question-dropper-qkcT8PYGlf",1,"editor-drop-file",3,"id","click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-6","h-6","text-pending","mx-auto"],["d","M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"],["d","M12 12v9"],["d","m16 16-4-4-4 4"],[1,"link"],["type","file","name","fileHomework",1,"hiddenIpt",3,"change"],["formChoseFile",""]],template:function(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"div",0),t.NdJ("click",function(){t.CHM(a);const s=t.MAs(12);return t.KtG(s.click())}),t.O4$(),t.TgZ(1,"svg",1),t._UZ(2,"path",2)(3,"path",3)(4,"path",4),t.qZA(),t.kcU(),t.TgZ(5,"p"),t._uU(6),t.ALo(7,"mytranslate"),t.TgZ(8,"span",5),t._uU(9),t.ALo(10,"mytranslate"),t.qZA()()(),t.TgZ(11,"input",6,7),t.NdJ("change",function(s){return i.onFileSelected(s)}),t.qZA()}2&e&&(t.MGl("id","frame_inp_editor_",i.id_content,""),t.xp6(6),t.hij("",t.lcZ(7,3,"lang_auto_keo_tha_fiel_vao_day_hoc_bam_vao")," "),t.xp6(3),t.Oqu(t.lcZ(10,5,"lang_auto_chon_file")+" ..."))},dependencies:[jt.JV],styles:[".editor-drop-file[_ngcontent-%COMP%]{cursor:pointer;text-align:center;border:1px dotted #2462ae;padding:20px;border-radius:5px;-webkit-user-select:none;user-select:none}.editor-drop-file[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding:0;margin:0}.editor-drop-file[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]{color:#2462ae}.is-dragover[_ngcontent-%COMP%]{background-color:#2462ae6a}"]}),n})();var xT=M(56291);function Y$(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",1)(1,"div",2),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.actionClose())}),t.qZA(),t.TgZ(2,"div",3)(3,"div",4)(4,"div",5),t._uU(5),t.ALo(6,"mytranslate"),t.qZA(),t.TgZ(7,"div",6),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.actionClose())}),t.TgZ(8,"mat-icon"),t._uU(9,"close"),t.qZA()()(),t.TgZ(10,"div",7),t._uU(11),t.ALo(12,"mytranslate"),t.qZA(),t.TgZ(13,"div",8),t._UZ(14,"div",9),t.TgZ(15,"div",10)(16,"span",11)(17,"button",12),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.actionClose())}),t._uU(18),t.ALo(19,"mytranslate"),t.qZA()(),t.TgZ(20,"button",13),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.actionClose(!0))}),t._uU(21),t.ALo(22,"mytranslate"),t.qZA()()()()()}if(2&n){const e=t.oxw();t.xp6(5),t.hij(" ",t.lcZ(6,4,"lang_auto_xac_nhan")," "),t.xp6(6),t.hij(" ",t.lcZ(12,6,e.msgConfirm)," "),t.xp6(7),t.hij(" ",t.lcZ(19,8,"lang_auto_huy")," "),t.xp6(3),t.hij(" ",t.lcZ(22,10,"lang_auto_xac_nhan")," ")}}let K$=(()=>{class n extends St.Q{constructor(e){super(),this.commonService=e,this.showConfirm=!1,this.msgConfirm=""}actionClose(e){this.showConfirm=!1,this.callback&&this.callback(e||!1)}startConfirm(e){return new Promise(i=>{this.msgConfirm=e,this.showConfirm=!0,this.callback=a=>{i(a)}})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(mi.z))},n.\u0275cmp=t.Xpm({type:n,selectors:[["editor-confirm"]],features:[t.qOj],decls:1,vars:1,consts:[["class","box-dialog",4,"ngIf"],[1,"box-dialog"],["azt-track-service","confirm-KaF7r9iJd",1,"overlay",3,"click"],[1,"dialog","box"],[1,"dialog-header"],[1,"dialog-title"],["azt-track-service","confirm-uojtwFwgYyj",1,"dialog-close",3,"click"],[1,"dialog-body"],[1,"dialog-footer"],[1,"dialog-noti"],[1,"dialog-confirm"],[1,"mr-3"],["azt-track-service","confirm-IkBjzbPeZUQ",1,"btn","btn-secondary","mr-2","w-24",3,"click"],["azt-track-service","confirm-PuBYMRtw1El",1,"btn","btn-primary","w-24",3,"click"]],template:function(e,i){1&e&&t.YNc(0,Y$,23,12,"div",0),2&e&&t.Q6J("ngIf",i.showConfirm)},dependencies:[D.O5,Jo.Hw,jt.JV],styles:[".box-dialog[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:flex-start;top:0;left:0;width:100vw;height:100vh;position:fixed;z-index:9999}.dialog[_ngcontent-%COMP%]{margin-top:7vh;width:550px;box-shadow:#0000003d 0 3px 8px}.overlay[_ngcontent-%COMP%]{background-color:#0000004d;width:100%;height:100vh;position:absolute}.dialog-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px}.dialog-title[_ngcontent-%COMP%]{font-weight:700}.dialog-close[_ngcontent-%COMP%]{display:flex;align-items:center;border-radius:50%}.dialog-close[_ngcontent-%COMP%]:hover{background-color:#d0d0d04a;cursor:pointer}.dialog-footer[_ngcontent-%COMP%]{display:flex;padding:10px;justify-content:space-between;align-items:center}.dialog-body[_ngcontent-%COMP%]{padding:10px}"]}),n})(),W$=(()=>{class n extends St.Q{actionClose(){this.onClose.emit()}actionFinish(){this.onPushImage.emit({element:this.el_target,source:this.src_source,output:this.editor._imgCtx.canvas.toDataURL("image/png",1)})}startLoad(){this.is_load_libs=!1,this.commonService.loadScriptPromises([{source:this.cdnService.convertCdnLinkOfGitHub("js/mnpaint_bundle.js?v=0.3"),name:"mnpaint_bundle.js"}]).then(()=>{if(this.is_load_libs=!0,this.el_target){this.src_source=this.el_target.getAttribute("src")||"";var e=document.createElement("img");this.el?.appendChild(e),e.onload=()=>{const i=mnpaint.getInstance();i.startSession(e),i.config.width=this.el?.clientWidth,i.config.height=this.el?.clientHeight,i.config.resizable=!1,i.config.stopWhenClickOutsize=!1,i.config.stopWhenClickOutside=!1,i.config.autoUpdateSource="change",this.editor=i},e.src=this.src_source}})}uploadImageAction(){this.editor._fileInput.click()}addTextAction(){this.editor._addText()}cropAction(){this.editor._setSelectionType("crop")}undoAction(){this.editor._undo()}redoAction(){this.editor._redo()}zoomAction(e){e?this.editor.zoomIn():this.editor.zoomOut()}ngAfterViewInit(){this.el=document.getElementById("only-image-editor_image__process"),this.startLoad()}constructor(e){super(),this.cdnService=e,this.onClose=new t.vpe,this.onPushImage=new t.vpe,this.el=null,this.src_source="",this.is_load_libs=!1}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Gn.E))},n.\u0275cmp=t.Xpm({type:n,selectors:[["only-image-editor"]],inputs:{el_target:"el_target"},outputs:{onClose:"onClose",onPushImage:"onPushImage"},features:[t.qOj],decls:66,vars:6,consts:[[1,"box-dialog"],["azt-track-service","imageEditor-E8qc0UaMWsA",1,"dialog-overlay",3,"click"],[1,"dialog","box"],[1,"dialog-body"],[1,"img-editor-bx"],[1,"bx-content"],[1,"az-editor"],[1,"az-editor-top-bar"],[1,"top-bar-tool",2,"width","55px"],[1,"top-bar-tool"],[1,"top-bar-tool-item"],["azt-track-service","imageEditor-Z62bVA0hAQV","matTooltip","Undo",1,"btn-az-text","mr-3",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"icon"],["d","M3 7v6h6"],["d","M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13"],["azt-track-service","imageEditor-_e7HTV21HlD","matTooltip","Redo",1,"btn-az-text",3,"click"],["d","M21 7v6h-6"],["d","M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7"],["azt-track-service","imageEditor-z4iVO06Ys6H","matTooltip","Zoom +",1,"btn-az-text","mr-2",3,"click"],["cx","11","cy","11","r","8"],["x1","21","y1","21","x2","16.65","y2","16.65"],["x1","11","y1","8","x2","11","y2","14"],["x1","8","y1","11","x2","14","y2","11"],["azt-track-service","imageEditor-690dZE83J6L","matTooltip","Zoom -",1,"btn-az-text",3,"click"],[1,"az-editor-body"],[1,"az-editor-slide-bar"],[1,"az-tool"],["azt-track-service","imageEditor-qzyGDqt8nDW",1,"az-tool-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"az-tool-icon"],["d","M6 2v14a2 2 0 0 0 2 2h14"],["d","M18 22V8a2 2 0 0 0-2-2H2"],["azt-track-service","imageEditor-RUdGS0nAto3",1,"az-tool-item",3,"click"],["points","4 7 4 4 20 4 20 7"],["x1","9","y1","20","x2","15","y2","20"],["x1","12","y1","4","x2","12","y2","20"],["azt-track-service","imageEditor-efAq1HoIGbC",1,"az-tool-item",3,"click"],["d","M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"],["d","M12 12v9"],["d","m16 16-4-4-4 4"],[1,"az-editor-main"],["id","only-image-editor_image__process",1,"az-editor-content"],[1,"dialog-footer"],[1,"dialog-noti"],[1,"dialog-ok"],["azt-track-service","imageEditor-DcXjxkUVcBd",1,"btn","btn-secondary","mr-2","w-20",3,"click"],["azt-track-service","imageEditor-GDQpZCPJRZZ",1,"btn","btn-primary","w-20",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t.NdJ("click",function(){return i.actionClose()}),t.qZA(),t.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7),t._UZ(8,"div",8),t.TgZ(9,"div",9)(10,"div",10)(11,"button",11),t.NdJ("click",function(){return i.undoAction()}),t.O4$(),t.TgZ(12,"svg",12),t._UZ(13,"path",13)(14,"path",14),t.qZA()(),t.kcU(),t.TgZ(15,"button",15),t.NdJ("click",function(){return i.redoAction()}),t.O4$(),t.TgZ(16,"svg",12),t._UZ(17,"path",16)(18,"path",17),t.qZA()()()(),t.kcU(),t.TgZ(19,"div",9)(20,"div",10)(21,"button",18),t.NdJ("click",function(){return i.zoomAction(!0)}),t.O4$(),t.TgZ(22,"svg",12),t._UZ(23,"circle",19)(24,"line",20)(25,"line",21)(26,"line",22),t.qZA()(),t.kcU(),t.TgZ(27,"button",23),t.NdJ("click",function(){return i.zoomAction()}),t.O4$(),t.TgZ(28,"svg",12),t._UZ(29,"circle",19)(30,"line",20)(31,"line",22),t.qZA()()()()(),t.kcU(),t.TgZ(32,"div",24)(33,"div",25)(34,"nav",26)(35,"button",27),t.NdJ("click",function(){return i.cropAction()}),t.O4$(),t.TgZ(36,"svg",28),t._UZ(37,"path",29)(38,"path",30),t.qZA(),t.kcU(),t.TgZ(39,"span"),t._uU(40,"Crop"),t.qZA()(),t.TgZ(41,"button",31),t.NdJ("click",function(){return i.addTextAction()}),t.O4$(),t.TgZ(42,"svg",28),t._UZ(43,"polyline",32)(44,"line",33)(45,"line",34),t.qZA(),t.kcU(),t.TgZ(46,"span"),t._uU(47,"Text"),t.qZA()(),t.TgZ(48,"button",35),t.NdJ("click",function(){return i.uploadImageAction()}),t.O4$(),t.TgZ(49,"svg",28),t._UZ(50,"path",36)(51,"path",37)(52,"path",38),t.qZA(),t.kcU(),t.TgZ(53,"span"),t._uU(54,"Upload"),t.qZA()()()(),t.TgZ(55,"div",39),t._UZ(56,"div",40),t.qZA()()()()()(),t.TgZ(57,"div",41),t._UZ(58,"div",42),t.TgZ(59,"div",43)(60,"button",44),t.NdJ("click",function(){return i.actionClose()}),t._uU(61),t.ALo(62,"mytranslate"),t.qZA(),t.TgZ(63,"button",45),t.NdJ("click",function(){return i.actionFinish()}),t._uU(64),t.ALo(65,"mytranslate"),t.qZA()()()()()),2&e&&(t.xp6(61),t.hij(" ",t.lcZ(62,2,"lang_auto_huy")," "),t.xp6(3),t.hij(" ",t.lcZ(65,4,"lang_auto_luu")," "))},dependencies:[Mi.gM,jt.JV],styles:[".box-dialog[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:flex-start;top:0;left:0;width:100vw;height:100vh;position:fixed;z-index:9999}.box-dialog[_ngcontent-%COMP%]   .dialog-overlay[_ngcontent-%COMP%]{top:0;left:0;width:100vw;height:100vh;position:fixed;background-color:#0000004d}.dialog[_ngcontent-%COMP%]{position:absolute;margin-top:5vh;width:90vw;box-shadow:#0000003d 0 3px 8px}.dialog-title[_ngcontent-%COMP%]{font-weight:700}.dialog-close[_ngcontent-%COMP%]{display:flex;align-items:center;border-radius:50%;color:#5d647b}.dialog-close[_ngcontent-%COMP%]:hover{background-color:#d0d0d04a;cursor:pointer}.dialog-footer[_ngcontent-%COMP%]{display:flex;padding:10px;border-top:1px solid #dfe0e5;justify-content:space-between;align-items:center}.az-editor[_ngcontent-%COMP%]{width:100%}.az-editor-top-bar[_ngcontent-%COMP%]{display:flex;align-items:center;border-bottom:1px solid #dfe0e5;padding:10px}.az-editor-body[_ngcontent-%COMP%]{display:flex}.az-editor-slide-bar[_ngcontent-%COMP%]{border-right:1px solid #dfe0e5;border-top:0px;flex-direction:column;flex-shrink:0;height:70vh;width:80px;overflow:hidden auto}.az-editor-main[_ngcontent-%COMP%]{background:#f7f7f8;width:100%;overflow:auto;max-height:75vh}.az-editor-content[_ngcontent-%COMP%]{width:100%;height:100%}.az-editor-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto}.top-bar-tool[_ngcontent-%COMP%]{display:flex;margin-right:20px}.top-bar-tool-item[_ngcontent-%COMP%]{display:flex;align-items:center;color:#5d647b;font-size:12px}.top-bar-tool-input[_ngcontent-%COMP%]{border:1px solid #dfe0e5;border-radius:5px;width:50px;color:#5d647b;margin-left:5px;padding-left:3px;padding-right:3px}.az-tool[_ngcontent-%COMP%]{display:flex;flex-direction:column}.az-tool-item[_ngcontent-%COMP%]{padding:10px 24px;position:relative;display:flex;justify-content:center;align-items:center;flex-direction:column;color:#5d647b;background:transparent;border:none;-webkit-user-select:none;user-select:none;text-transform:initial;transition:all .5s}.az-tool-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-top:5px}.az-tool-item[_ngcontent-%COMP%]:hover{color:#1e41af;font-weight:500}.az-tool-icon[_ngcontent-%COMP%]{width:24px;height:24px}.az-tool[_ngcontent-%COMP%]   .active-tool[_ngcontent-%COMP%]{color:#1e41af;font-weight:500}.btn-az-text[_ngcontent-%COMP%]{border:none;background:transparent;color:#5d647b;transition:all .5s}.btn-az-text[_ngcontent-%COMP%]:hover:not([disabled]){color:#1e41af}.btn-az-text[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:24px;height:24px}.btn-az-text[_ngcontent-%COMP%]:disabled{opacity:.5}@media screen and (max-width: 768px){.top-bar-tool[_ngcontent-%COMP%]{margin-right:10px}.top-bar-tool[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none}}"]}),n})();function V$(n,o){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_cms_common_loading")))}function X$(n,o){1&n&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"lang_auto_khong_co_cau_hoi_nao")))}function tY(n,o){if(1&n&&(t.TgZ(0,"mat-icon",18),t.ALo(1,"mytranslate"),t.ALo(2,"mytranslate"),t._uU(3," push_pin"),t.qZA()),2&n){const e=t.oxw().$implicit;t.s9C("matTooltip",e.isFixGroup?t.lcZ(1,1,"lang_auto_cau_hoi_trong_nhom_dang_duoc_co_dinh"):t.lcZ(2,3,"lang_auto_dap_an_trong_cau_hoi_dang_duoc_co_dinh"))}}function eY(n,o){1&n&&(t.TgZ(0,"div",19)(1,"span",20),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&n&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"tieu_de_nhom")))}function nY(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",21)(1,"app-quest-header",22),t.NdJ("onChooseSimilar",function(a){t.CHM(e);const r=t.oxw(2);return t.KtG(r.actionInsert(a))})("onError",function(a){t.CHM(e);const r=t.oxw(2);return t.KtG(r.commonService.snackError(a))}),t.qZA()()}if(2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("q",e)("similar",!0)}}function iY(n,o){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.label)}}function oY(n,o){if(1&n&&(t.TgZ(0,"span"),t.YNc(1,iY,2,1,"span",6),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Q6J("ngIf",e.isCorrect)}}function aY(n,o){if(1&n&&(t.TgZ(0,"div")(1,"span"),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.YNc(4,oY,2,1,"span",30),t.qZA()),2&n){const e=t.oxw(3).$implicit;t.xp6(2),t.Oqu(t.lcZ(3,2,"lang_auto_dap_an_dung")+":"),t.xp6(2),t.Q6J("ngForOf",e.quest.answers)}}function rY(n,o){if(1&n&&(t.TgZ(0,"span",34),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Oqu(e)}}function sY(n,o){if(1&n&&(t.TgZ(0,"div",31)(1,"span",32),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.YNc(4,rY,2,1,"span",33),t.qZA()),2&n){const e=t.oxw(3).$implicit;t.xp6(2),t.Oqu(t.lcZ(3,2,"lang_auto_dap_an")+":"),t.xp6(2),t.Q6J("ngForOf",e.strAns)}}function lY(n,o){1&n&&(t.TgZ(0,"span",39),t._UZ(1,"div",40)(2,"div",41),t.qZA())}const bT=function(n){return{"an-true":n}};function cY(n,o){if(1&n&&(t.TgZ(0,"div",35),t.YNc(1,lY,3,0,"span",36),t.TgZ(2,"div",37),t._uU(3),t.qZA(),t.TgZ(4,"div",38),t._UZ(5,"azt-dynamic-hook",25),t.qZA()()),2&n){const e=o.$implicit;t.xp6(1),t.Q6J("ngIf",e.ans.isCorrect),t.xp6(1),t.Q6J("ngClass",t.VKq(5,bT,e.ans.isCorrect)),t.xp6(1),t.hij(" ",e.ans.label,""),t.xp6(1),t.Q6J("ngClass",t.VKq(7,bT,e.ans.isCorrect)),t.xp6(1),t.Q6J("content",e.renderedStr)}}function uY(n,o){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,aY,5,4,"div",6),t.YNc(2,sY,5,4,"div",28),t.YNc(3,cY,6,9,"div",29),t.qZA()),2&n){const e=t.oxw(2).$implicit;t.Gre("box-ans quest-ans-ver-",e.v,""),t.xp6(1),t.Q6J("ngIf","pdf-1-0"==e.v),t.xp6(1),t.Q6J("ngIf",4==e.type&&e.strAns),t.xp6(1),t.Q6J("ngForOf",e.answers)}}const dY=function(n){return{"padding-mobile":n}};function mY(n,o){if(1&n&&(t.TgZ(0,"div",42)(1,"div",43)(2,"span"),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()(),t.TgZ(5,"div",44),t._UZ(6,"azt-dynamic-hook",25),t.qZA()()),2&n){const e=t.oxw(2).$implicit,i=t.oxw();t.Gre("box-help quest-help-ver-",e.v,""),t.Q6J("ngClass",t.VKq(8,dY,i.isMobile)),t.xp6(3),t.Oqu(t.lcZ(4,6,"lang_auto_huong_dan_giai_upper")),t.xp6(3),t.Q6J("content",e.helpRenderedStr)}}function hY(n,o){if(1&n&&(t.TgZ(0,"div",23)(1,"div",24),t._UZ(2,"azt-dynamic-hook",25),t.qZA(),t.YNc(3,uY,4,6,"div",26),t.YNc(4,mY,7,10,"div",27),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Gre("tex2jax_process box-content quest-ver-",e.v,""),t.xp6(1),t.Q6J("content",e.renderedStr),t.xp6(1),t.Q6J("ngIf",!e.quest.isGroup),t.xp6(1),t.Q6J("ngIf",e.helpRenderedStr)}}function pY(n,o){if(1&n&&(t._UZ(0,"div",45),t.ALo(1,"safeContentQuestion")),2&n){const e=t.oxw().$implicit;t.Q6J("innerHTML",t.lcZ(1,1,e.err),t.oJD)}}function _Y(n,o){1&n&&t._UZ(0,"div",46)}function fY(n,o){if(1&n&&(t.TgZ(0,"div",8)(1,"div",9),t.YNc(2,tY,4,5,"mat-icon",10),t._UZ(3,"div",11),t.ALo(4,"safeContentQuestion"),t.YNc(5,eY,4,3,"div",12),t.YNc(6,nY,2,2,"div",13),t.TgZ(7,"div",14)(8,"div"),t.YNc(9,hY,5,6,"div",15),t.YNc(10,pY,2,3,"div",16),t.qZA()()(),t.YNc(11,_Y,1,0,"div",17),t.qZA()),2&n){const e=o.$implicit,i=t.oxw();t.xp6(2),t.Q6J("ngIf",e.isFixGroup||e.quest.isFixAns),t.xp6(1),t.Q6J("innerHTML",t.lcZ(4,7,i.errorQuestionView.makeErr(e,i.lstQuest)),t.oJD),t.xp6(2),t.Q6J("ngIf",e.quest.isGroup),t.xp6(1),t.Q6J("ngIf",!e.quest.isGroup),t.xp6(3),t.Q6J("ngIf",!e.err),t.xp6(1),t.Q6J("ngIf",e.err),t.xp6(1),t.Q6J("ngIf",0==i.lstQuest.length)}}const gY=function(n){return{"max-height":n}};let xY=(()=>{class n extends St.Q{ngOnInit(){this.isMobile=this.commonService.isMobileOrTable()}actionClose(){this.onClose.emit()}actionInsert(e){e.v="similar",this.onInsert.emit(e)}constructor(){super(),this.onClose=new t.vpe,this.onInsert=new t.vpe,this.onChooseSimilar=new t.vpe,this.isMobile=!1,this.lstQuest=[],this.errorQuestionView=new au(this.commonService)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["similar-quest"]],inputs:{inp:"inp"},outputs:{onClose:"onClose",onInsert:"onInsert",onChooseSimilar:"onChooseSimilar"},features:[t.qOj],decls:14,vars:12,consts:[[1,"box-dialog"],["azt-track-service","mathTypeEditor--ICqsoSyYS3",1,"dialog-overlay",3,"click"],["cdkDrag","","cdkDragRootElement",".dialog-drag","cdkDragHandle","",1,"dialog-header",2,"cursor","move"],[1,"dialog-title"],["azt-track-service","mathTypeEditor-3Cej2Ykz3qf",1,"dialog-close",3,"click"],[1,"dialog-body",2,"overflow","auto",3,"ngStyle"],[4,"ngIf"],["class","question-standalone-content-box",4,"ngFor","ngForOf"],[1,"question-standalone-content-box"],[1,"box-service","box","border","border-slate-400","dark:border-darkmode-400"],["class","fix-content",3,"matTooltip",4,"ngIf"],[1,"box-metadata",3,"innerHTML"],["class","group-box-header",4,"ngIf"],["class","box-service-header w-full",4,"ngIf"],[1,"box-service-content","relative"],["class","exam-box",4,"ngIf"],["class","exam-box",3,"innerHTML",4,"ngIf"],["class","skeleton-box-loading h-100 w-100",4,"ngIf"],[1,"fix-content",3,"matTooltip"],[1,"group-box-header"],[1,"title"],[1,"box-service-header","w-full"],[3,"q","similar","onChooseSimilar","onError"],[1,"exam-box"],["azt-track-service","azota-editor-sBE9TpjyDRX"],[3,"content"],[3,"class",4,"ngIf"],[3,"class","ngClass",4,"ngIf"],["class","mt-4",4,"ngIf"],["class","box-an",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"mt-4"],[1,"font-bold"],["class","bag-label",4,"ngFor","ngForOf"],[1,"bag-label"],[1,"box-an"],["class","checkmark",4,"ngIf"],["azt-track-service","azota-editor-KqGja32WPDY",1,"box-an-label",3,"ngClass"],["azt-track-service","azota-editor-cZIOwUqdMq6",1,"tex2jax_process","box-an-content",3,"ngClass"],[1,"checkmark"],[1,"checkmark_stem"],[1,"checkmark_kick"],[3,"ngClass"],[1,"help-title"],["azt-track-service","azota-editor-K029PsYFgYK",1,"tex2jax_process","help-content","text-slate-500"],[1,"exam-box",3,"innerHTML"],[1,"skeleton-box-loading","h-100","w-100"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t.NdJ("click",function(){return i.actionClose()}),t.qZA(),t.TgZ(2,"div")(3,"div",2)(4,"div",3),t._uU(5),t.ALo(6,"mytranslate"),t.qZA(),t.TgZ(7,"div",4),t.NdJ("click",function(){return i.actionClose()}),t.TgZ(8,"mat-icon"),t._uU(9,"close"),t.qZA()()(),t.TgZ(10,"div",5),t.YNc(11,V$,3,3,"div",6),t.YNc(12,X$,3,3,"div",6),t.YNc(13,fY,12,9,"div",7),t.qZA()()()),2&e&&(t.xp6(2),t.Gre("box dialog-drag dialog",i.isMobile?"-mobile":"",""),t.xp6(3),t.hij(" ",t.lcZ(6,8,"lang_auto_doi_cau_khac")," "),t.xp6(5),t.Q6J("ngStyle",t.VKq(10,gY,i.isMobile?"75vh":"500px")),t.xp6(1),t.Q6J("ngIf",!i.inp),t.xp6(1),t.Q6J("ngIf",i.inp&&0==i.inp.length),t.xp6(1),t.Q6J("ngForOf",i.inp))},dependencies:[D.mk,D.sg,D.O5,D.PC,Ta.Zt,Ta.Bh,Jo.Hw,Mi.gM,Op.O,xT.X,jt.JV,jt.ES],styles:['body{--keyboard-zindex: 9999}.box-dialog[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:flex-start;top:0;left:0;width:100vw;height:100vh;position:fixed;z-index:9999}.box-dialog[_ngcontent-%COMP%]   .dialog-overlay[_ngcontent-%COMP%]{top:0;left:0;width:100vw;height:100vh;position:fixed;background-color:#0000004d}.dialog[_ngcontent-%COMP%]{position:absolute;margin-top:7vh;width:650px;box-shadow:#0000003d 0 3px 8px}.dialog-mobile[_ngcontent-%COMP%]{position:absolute;margin-top:7vh;width:95%;box-shadow:#0000003d 0 3px 8px}.dialog-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #d0d0d0;padding:10px}.dialog-title[_ngcontent-%COMP%]{font-weight:700}.dialog-close[_ngcontent-%COMP%]{display:flex;align-items:center;border-radius:50%}.dialog-close[_ngcontent-%COMP%]:hover{background-color:#d0d0d04a;cursor:pointer}.dialog-footer[_ngcontent-%COMP%]{display:flex;padding:10px;border-top:1px solid #d0d0d0;justify-content:space-between;align-items:center}.dialog-body[_ngcontent-%COMP%]{padding:10px}.for-type[_ngcontent-%COMP%]{color:#292980;cursor:pointer}#testFinderMask[_ngcontent-%COMP%]{padding:15px;background-color:#00000085;position:fixed;inset:0;z-index:999}#testFinderMask[_ngcontent-%COMP%]   app-test-finder[_ngcontent-%COMP%]{display:block;position:fixed;inset:15px;display:flex;flex-direction:column}.app-editor[_ngcontent-%COMP%]{display:flex;width:100%;height:calc(100vh - 55px);overflow:hidden}.col-questions[_ngcontent-%COMP%], .col-editor[_ngcontent-%COMP%]{width:50%}.col-editor[_ngcontent-%COMP%]{border-left:1px solid #e0e0e0}.toolbar-editor[_ngcontent-%COMP%]{display:flex;--tw-border-opacity: 1;border-bottom:1px solid rgb(var(--color-slate-200)/var(--tw-border-opacity));box-shadow:none;justify-content:space-between}.toolbar-btn[_ngcontent-%COMP%]{padding:10px;border-right:1px solid #e0e0e0;cursor:pointer;display:flex;align-items:center;-webkit-user-select:none;user-select:none;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,-webkit-backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.2s}.toolbar-btn[_ngcontent-%COMP%]:hover{background-color:#ededed90}.toolbar-right[_ngcontent-%COMP%]   .toolbar-btn[_ngcontent-%COMP%]{border-right:none;border-left:1px solid #e0e0e0}.toolbar-right[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:0;margin-left:5px}.toolbar-left[_ngcontent-%COMP%], .toolbar-right[_ngcontent-%COMP%]{display:flex}.col-questions[_ngcontent-%COMP%]{overflow:auto;position:relative}.question-standalone-content-box[_ngcontent-%COMP%]{margin:10px}.loading-mess[_ngcontent-%COMP%]{width:100vw;height:100vh;position:fixed;z-index:9;top:0;left:0;display:flex;justify-content:center;align-items:center;background-color:#0006}.loading-content[_ngcontent-%COMP%]{text-align:center;color:#000}.loading-content[_ngcontent-%COMP%]   .text-msg[_ngcontent-%COMP%]{font-size:20px;margin-top:10px;background-color:#f0f8ffa3;padding:10px;border-radius:5px}.icon-msg[_ngcontent-%COMP%]{margin-bottom:10px}.text-msg[_ngcontent-%COMP%]{font-size:20px}.footer-editor[_ngcontent-%COMP%]{border-top:1px solid #e0e0e0;display:flex;align-items:center}.footer-editor[_ngcontent-%COMP%]   .footer-item[_ngcontent-%COMP%]{padding:10px}.footer-editor[_ngcontent-%COMP%]   .footer-link[_ngcontent-%COMP%]{color:#2361ae;cursor:pointer}.footer-editor[_ngcontent-%COMP%]   .footer-sp[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:center;align-items:center}.footer-editor[_ngcontent-%COMP%]   .footer-sp[_ngcontent-%COMP%]:hover   .footer-link-hover[_ngcontent-%COMP%]{display:block}.footer-editor[_ngcontent-%COMP%]   .footer-sp[_ngcontent-%COMP%]   .footer-link-hover[_ngcontent-%COMP%]{cursor:pointer;display:none;position:absolute;width:300px;left:0;top:calc(-25px - 100%);background:antiquewhite;padding:10px;border-radius:5px;box-shadow:#091e4240 0 4px 8px -2px,#091e4214 0 0 0 1px}.footer-editor[_ngcontent-%COMP%]   .footer-sp[_ngcontent-%COMP%]   .footer-link-hover[_ngcontent-%COMP%]:before{content:"";position:absolute;bottom:-6px;left:20px;border-left:10px solid transparent;border-right:10px solid transparent;border-top:10px solid #faebd7}.box-an[_ngcontent-%COMP%]{display:flex;align-items:center;position:relative;cursor:pointer}.box-an[_ngcontent-%COMP%]:hover   .box-an-content[_ngcontent-%COMP%], .box-an[_ngcontent-%COMP%]:hover   .box-an-label[_ngcontent-%COMP%]{outline:1px solid #2462ae}.box-an-label[_ngcontent-%COMP%]{font-weight:700;margin-right:5px;min-width:25px;justify-content:center}.box-an-content[_ngcontent-%COMP%], .box-content[_ngcontent-%COMP%]{padding:5px;outline:1px solid #ccc;border-radius:3px;margin-bottom:5px;align-items:center;overflow-wrap:anywhere;overflow-x:auto;overflow-y:hidden}.box-an-content[_ngcontent-%COMP%]{padding-right:20px}.box-an-label[_ngcontent-%COMP%]{padding:5px;outline:1px solid #ccc;border-radius:3px;margin-bottom:5px;display:flex;align-items:center;overflow-wrap:anywhere}.an-true[_ngcontent-%COMP%]{outline:1px solid #2462ae;color:#2462ae;position:relative}.checkmark[_ngcontent-%COMP%]{position:absolute;left:-25px;display:inline-block;width:22px;height:22px;transform:rotate(45deg)}.checkmark_stem[_ngcontent-%COMP%]{position:absolute;width:3px;height:9px;background-color:#2462ae;left:11px;top:6px}.checkmark_kick[_ngcontent-%COMP%]{position:absolute;width:3px;height:3px;background-color:#2462ae;left:8px;top:12px}.link-tooltip[_ngcontent-%COMP%]{color:#2462ae;cursor:pointer}.box-service-name[_ngcontent-%COMP%], .box-service-question-name[_ngcontent-%COMP%]{outline:1px solid #ccc;padding:3px 10px!important;border-radius:3px;font-weight:500}.box-service-question-name[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content}.box-service-question[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap}.box-service-question[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child{border-right:none}.box-service-question[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:last-child{border-right:none}.box-service-question[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding:0 10px;cursor:pointer;color:#2462ae;border-right:1px solid #ccc}.first-text[_ngcontent-%COMP%]{display:flex;align-items:center}.first-text[_ngcontent-%COMP%]   marquee[_ngcontent-%COMP%]{width:100px}.first-text[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;margin-right:5px;display:flex;justify-content:center;align-items:center}.selection[_ngcontent-%COMP%]{border:1.5px solid #2462ae;box-shadow:#00000073 0 25px 20px -20px}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.inp-point[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:space-between;align-items:center}.inp-point[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:40px;text-align:center;padding:5px;border-radius:5px;outline:1px solid #ccc;border:none}.inp-point[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:1px solid #2262ae;box-shadow:#11111a0d 0 1px,#11111a1a 0 0 8px}.inp-point[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-outer-spin-button, .inp-point[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.inp-point[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}.inp-point[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{border-right:none;text-align:left;padding:0 0 0 10px}.hide[_ngcontent-%COMP%]{display:none!important}  .mat-form-field-underline{display:none}  .question-standalone-is-invalid-validation{color:#f44336;position:relative;padding-left:20px;display:flex;align-items:center;margin-bottom:10px}  .question-standalone-is-invalid-validation:before{content:"!";position:absolute;left:0;color:#fff;background:#f44336;width:15px;height:15px;text-align:center;border-radius:50%;font-size:smaller;display:flex;justify-content:center;align-items:center}.box-service[_ngcontent-%COMP%]{position:relative;margin:10px 0;padding:20px 30px;border-radius:5px;box-shadow:none}.box-service[_ngcontent-%COMP%]:first-child{margin:0 0 10px}.box-service-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:5px}  .img-docx,   .qv_qts_image,   .qv_img-group-content,   .qv_ats_image{cursor:pointer;max-width:100%}  .qv_img-group-content{width:100%}  .qv_full_a_img{cursor:pointer;width:60%}  .qv_full_img{cursor:pointer;width:100%}  .qv_img{cursor:pointer;margin-top:-1px}  .qv_none_image{display:inline-block;color:#2262ae;cursor:pointer}.box-help[_ngcontent-%COMP%]{border-top:1px solid #d7d7d7;margin:15px -30px 0;padding:10px 30px 0}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]{text-align:center;font-size:11px;margin-top:-20px}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#fff;padding:0 10px;color:#d58e0b}.box-help[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]{font-size:13px;overflow-x:auto;overflow-y:hidden}.font-bold[_ngcontent-%COMP%]{font-weight:700}.bag-label[_ngcontent-%COMP%]{border-radius:5px;background:#c0c0c0;padding:4px;font-size:13px;margin-right:5px}.bag-label[_ngcontent-%COMP%]:last-child{margin-right:0}.mt-4[_ngcontent-%COMP%]{margin-top:4px}.mb-5[_ngcontent-%COMP%]{margin-bottom:5px}.box-show-files[_ngcontent-%COMP%]{background:#f0f0f0;border-radius:5px;padding:10px;margin-bottom:3px}.padding-mobile[_ngcontent-%COMP%]{padding-left:5px;padding-right:5px}@media screen and (max-width: 580px){.app-editor[_ngcontent-%COMP%]{flex-direction:column;height:auto;overflow:auto}.col-questions[_ngcontent-%COMP%], .col-editor[_ngcontent-%COMP%]{width:100%}.main__editor[_ngcontent-%COMP%]{overflow-x:hidden}}  .q-table td{border:1px solid #c0c0c0;padding:3px 10px}  .box-content img,   .box-an-content img{max-width:100%}.group-box-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;position:relative;cursor:pointer}.group-box-header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{outline:1px solid #ccc;padding:3px 10px!important;border-radius:3px;font-weight:500}.group-box-header[_ngcontent-%COMP%]   .link-option[_ngcontent-%COMP%]{cursor:pointer;color:#2462ae;margin-left:10px}.fix-content[_ngcontent-%COMP%]{position:absolute;font-size:15px;color:#2361ae;top:0;left:5px;transform:rotate(-45deg)}.lazy_quest[_ngcontent-%COMP%]{width:100%;height:200px}  .skeleton-box-loading{display:inline-block;position:relative;overflow:hidden}  .skeleton-box-loading:after{position:absolute;inset:0;transform:translate(-100%);animation:_ngcontent-%COMP%_shimmer 2s infinite;content:""}@keyframes _ngcontent-%COMP%_shimmer{to{transform:translate(100%)}}  .box-service-content .homework-content{overflow-y:auto}  .box-service-content .azt-mathml{cursor:pointer}  .box-service-content .azt-mathml:hover{background-color:#ebebeb}button.menu[_ngcontent-%COMP%]{text-transform:none!important}.header-file-name[_ngcontent-%COMP%]{width:100%;text-align:center;border:0}.w-100[_ngcontent-%COMP%]{width:100%}.h-100[_ngcontent-%COMP%]{height:100%}.azt-order-1[_ngcontent-%COMP%]{order:1}.azt-order-2[_ngcontent-%COMP%]{order:2}@media screen and (max-width: 768px){.box-an-content[_ngcontent-%COMP%], .box-content[_ngcontent-%COMP%], .box-help[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]{overflow-y:auto}}']}),n})();function bY(n,o){if(1&n&&(t.TgZ(0,"li",8),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.xp6(1),t.Oqu(e)}}const vY=function(n){return{"max-height":n}};let yY=(()=>{class n extends St.Q{ngOnInit(){this.isMobile=this.commonService.isMobileOrTable()}actionClose(){this.onClose.emit()}get lstMsgErrors(){return this.lstErrors.map(e=>e.split("|")).map(e=>`${this.stringTrans} ${e[0]}: ${e[1]}`)}constructor(){super(),this.onClose=new t.vpe,this.lstErrors=[],this.isMobile=!1,this.stringTrans=this.commonService.myTranslateInstant("lang_auto_line")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["show-errors-quests"]],inputs:{lstErrors:"lstErrors"},outputs:{onClose:"onClose"},features:[t.qOj],decls:13,vars:10,consts:[[1,"box-dialog"],[1,"dialog-overlay",3,"click"],["cdkDrag","","cdkDragRootElement",".dialog-drag","cdkDragHandle","",1,"dialog-header",2,"cursor","move"],[1,"dialog-title"],[1,"dialog-close",3,"click"],[1,"dialog-body",2,"overflow","auto",3,"ngStyle"],[1,"lst-errs"],["class","lst-err-item",4,"ngFor","ngForOf"],[1,"lst-err-item"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t.NdJ("click",function(){return i.actionClose()}),t.qZA(),t.TgZ(2,"div")(3,"div",2)(4,"div",3),t._uU(5),t.ALo(6,"mytranslate"),t.qZA(),t.TgZ(7,"div",4),t.NdJ("click",function(){return i.actionClose()}),t.TgZ(8,"mat-icon"),t._uU(9,"close"),t.qZA()()(),t.TgZ(10,"div",5)(11,"ul",6),t.YNc(12,bY,2,1,"li",7),t.qZA()()()()),2&e&&(t.xp6(2),t.Gre("box dialog-drag dialog",i.isMobile?"-mobile":"",""),t.xp6(3),t.hij(" ",t.lcZ(6,6,"lang_auto_vui_long_kiem_tra_lai_cac_noi_dung_sau")," "),t.xp6(5),t.Q6J("ngStyle",t.VKq(8,vY,i.isMobile?"75vh":"500px")),t.xp6(2),t.Q6J("ngForOf",i.lstMsgErrors))},dependencies:[D.sg,D.PC,Ta.Zt,Ta.Bh,Jo.Hw,jt.JV],styles:[".box-dialog[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:flex-start;top:0;left:0;width:100vw;height:100vh;position:fixed;z-index:9999}.box-dialog[_ngcontent-%COMP%]   .dialog-overlay[_ngcontent-%COMP%]{top:0;left:0;width:100vw;height:100vh;position:fixed;background-color:#0000004d}.dialog[_ngcontent-%COMP%]{position:absolute;margin-top:7vh;width:650px;box-shadow:#0000003d 0 3px 8px}.dialog-mobile[_ngcontent-%COMP%]{position:absolute;margin-top:7vh;width:95%;box-shadow:#0000003d 0 3px 8px}.dialog-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #d0d0d0;padding:10px}.dialog-title[_ngcontent-%COMP%]{font-weight:700}.dialog-close[_ngcontent-%COMP%]{display:flex;align-items:center;border-radius:50%}.dialog-close[_ngcontent-%COMP%]:hover{background-color:#d0d0d04a;cursor:pointer}.dialog-footer[_ngcontent-%COMP%]{display:flex;padding:10px;border-top:1px solid #d0d0d0;justify-content:space-between;align-items:center}.lst-errs[_ngcontent-%COMP%]   .lst-err-item[_ngcontent-%COMP%]{padding:15px 10px;border-bottom:1px dotted #e0e0e0}.lst-errs[_ngcontent-%COMP%]   .lst-err-item[_ngcontent-%COMP%]:last-child{border-bottom:none!important}"]}),n})();function wY(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"span",19),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw(2);return t.KtG(s.onHandleNextQuestion(r.nextToQuest))}),t._uU(1),t.qZA()}if(2&n){const e=o.$implicit;t.xp6(1),t.Oqu(e.label)}}function CY(n,o){if(1&n&&(t.TgZ(0,"tr")(1,"td",15),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"td",16),t._uU(5),t.qZA(),t.TgZ(6,"td",17),t.YNc(7,wY,2,1,"span",18),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,3,"lang_testbank_number_of_unanswered_questions")),t.xp6(3),t.Oqu(e.showMore.countQuestUnanswered.countQuest),t.xp6(2),t.Q6J("ngForOf",e.showMore.countQuestUnanswered.lstQuest)}}function TY(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"span",19),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw(2);return t.KtG(s.onHandleNextQuestion(r.nextToQuest))}),t._uU(1),t.qZA()}if(2&n){const e=o.$implicit;t.xp6(1),t.Oqu(e.label)}}function kY(n,o){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.ALo(3,"mytranslate"),t.ALo(4,"lowercase"),t.qZA(),t.TgZ(5,"td",16),t._uU(6),t.qZA(),t.TgZ(7,"td",17),t.YNc(8,TY,2,1,"span",18),t.qZA()()),2&n){const e=o.$implicit;t.xp6(2),t.AsE("",t.lcZ(3,4,"lang_testbank_test_config_total_number_question")," ",t.lcZ(4,6,e.type),""),t.xp6(4),t.Oqu(e.countQuest),t.xp6(2),t.Q6J("ngForOf",e.lstQuest)}}function AY(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"span",19),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw(2);return t.KtG(s.onHandleNextQuestion(r.nextToQuest))}),t._uU(1),t.qZA()}if(2&n){const e=o.$implicit;t.xp6(1),t.Oqu(e.label)}}function SY(n,o){if(1&n&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.ALo(3,"mytranslate"),t.ALo(4,"lowercase"),t.ALo(5,"mytranslate"),t.ALo(6,"lowercase"),t.ALo(7,"mytranslate"),t.qZA(),t.TgZ(8,"td",16),t._uU(9),t.qZA(),t.TgZ(10,"td",17),t.YNc(11,AY,2,1,"span",18),t.qZA()()),2&n){const e=o.$implicit;t.xp6(2),t.HOy("",t.lcZ(3,6,"lang_auto_tong_so_cau_trac_nghiem")," ",t.lcZ(4,8,t.lcZ(5,10,"lang_auto_co"))," ",e.numberAns," ",t.lcZ(6,12,t.lcZ(7,14,"lang_auto_dap_an")),""),t.xp6(7),t.Oqu(e.countQuest),t.xp6(2),t.Q6J("ngForOf",e.lstQuest)}}function OY(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"span",19),t.NdJ("click",function(){const r=t.CHM(e).$implicit,s=t.oxw(2);return t.KtG(s.onHandleNextQuestion(r.nextToQuest))}),t._uU(1),t.qZA()}if(2&n){const e=o.$implicit;t.xp6(1),t.Oqu(e.label)}}function EY(n,o){if(1&n&&(t.TgZ(0,"tr")(1,"td",15),t._uU(2),t.ALo(3,"mytranslate"),t.qZA(),t.TgZ(4,"td",16),t._uU(5),t.qZA(),t.TgZ(6,"td",17),t.YNc(7,OY,2,1,"span",18),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,3,"lang_testbank_editor_the_question_without_a_solution_guide")),t.xp6(3),t.Oqu(e.showMore.countQuestNoHelp.countQuest),t.xp6(2),t.Q6J("ngForOf",e.showMore.countQuestNoHelp.lstQuest)}}let MY=(()=>{class n extends St.Q{ngOnInit(){this.isMobile=this.commonService.isMobileOrTable(),this.makeInfo(),this.showMore={...this.info,typeQuests:this.info.typeQuests.filter(e=>e.lstQuest.length>0)}}makeInfo(){const e={totalQuest:this.lstQuest.filter(i=>!i.quest.isGroup).length,typeQuests:[],ansCountQuest:[],countQuestNoHelp:{countQuest:0,lstQuest:[]},countQuestUnanswered:{countQuest:0,lstQuest:[]}};this.lstQuest.filter(i=>!i.quest.isGroup).forEach(i=>{let a=e.typeQuests.findIndex(r=>r.typeNumber===i.type);if(-1===a&&(a=e.typeQuests.push({type:this.getNameTypeQuestion(i.type??-1),typeNumber:i.type??-1,countQuest:0,lstQuest:[]})-1),e.typeQuests[a].countQuest++,1===e.typeQuests[a].typeNumber){let r=e.ansCountQuest.findIndex(s=>s.numberAns===i.answers.length);-1===r&&(r=e.ansCountQuest.push({numberAns:i.answers.length,countQuest:0,lstQuest:[]})-1),e.ansCountQuest[r].countQuest++,e.ansCountQuest[r].lstQuest.push({label:this.commonService.myTranslateInstant("lang_auto_cau")+" "+this.extractNumberFromString(i.label).toString(),nextToQuest:this.extractNumberFromString(i.label)})}else e.typeQuests[a].lstQuest.push({label:this.commonService.myTranslateInstant("lang_auto_cau")+" "+this.extractNumberFromString(i.label).toString(),nextToQuest:this.extractNumberFromString(i.label)});if(i.helpRenderedStr||(e.countQuestNoHelp.countQuest++,e.countQuestNoHelp.lstQuest.push({label:this.commonService.myTranslateInstant("lang_auto_cau")+" "+this.extractNumberFromString(i.label).toString(),nextToQuest:this.extractNumberFromString(i.label)})),1===i.type||4===i.type){let r=!1;for(let s=0;s<i.answers.length;s++)if(i.answers[s].ans.isCorrect){r=!0;break}i.strAns?.length&&(r=!0),r||(e.countQuestUnanswered.countQuest++,e.countQuestUnanswered.lstQuest.push({label:this.commonService.myTranslateInstant("lang_auto_cau")+" "+this.extractNumberFromString(i.label).toString(),nextToQuest:this.extractNumberFromString(i.label)}))}}),e.ansCountQuest.sort((i,a)=>a.numberAns-i.numberAns),this.info=e}getNameTypeQuestion(e){switch(e){case 1:return this.commonService.myTranslateInstant("lang_auto_trac_nghiem")??"";case 3:return this.commonService.myTranslateInstant("lang_testbank_create_exam_width_file_docx_essay")??"";case 4:return this.commonService.myTranslateInstant("lang_auto_dien_tu")??""}return""}extractNumberFromString(e){const a=e.match(/\d+/g);return a?parseInt(a[0]):0}actionClose(){this.onClose.emit()}onHandleNextQuestion(e){this.onNextQuestion.emit(e)}constructor(){super(),this.onClose=new t.vpe,this.onNextQuestion=new t.vpe,this.isMobile=!1}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["show-info-quests"]],inputs:{lstQuest:"lstQuest"},outputs:{onClose:"onClose",onNextQuestion:"onNextQuestion"},features:[t.qOj],decls:34,vars:28,consts:[[1,"box-dialog"],[1,"dialog-overlay",3,"click"],["cdkDrag","","cdkDragRootElement",".dialog-drag","cdkDragHandle","",1,"dialog-header",2,"cursor","move"],[1,"dialog-title"],[1,"dialog-close",3,"click"],[1,"dialog-body",2,"overflow","auto","max-height","70vh"],[1,"quest-info-number"],[1,"quest-info-item"],[1,"table","table-bordered"],[1,"table-header"],[2,"width","35%"],[2,"width","15%"],[2,"width","50%"],[4,"ngIf"],[4,"ngFor","ngForOf"],[2,"white-space","nowrap"],[1,"text-center"],[2,"padding-top","0px","padding-bottom","0px"],["class","label-quest-item",3,"click",4,"ngFor","ngForOf"],[1,"label-quest-item",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t.NdJ("click",function(){return i.actionClose()}),t.qZA(),t.TgZ(2,"div")(3,"div",2)(4,"div",3),t._uU(5),t.ALo(6,"mytranslate"),t.qZA(),t.TgZ(7,"div",4),t.NdJ("click",function(){return i.actionClose()}),t.TgZ(8,"mat-icon"),t._uU(9,"close"),t.qZA()()(),t.TgZ(10,"div",5)(11,"div",6)(12,"p",7),t._uU(13),t.ALo(14,"mytranslate"),t.ALo(15,"lowercase"),t.ALo(16,"mytranslate"),t.qZA()(),t.TgZ(17,"table",8)(18,"thead")(19,"tr",9)(20,"td",10),t._uU(21),t.ALo(22,"mytranslate"),t.qZA(),t.TgZ(23,"td",11),t._uU(24),t.ALo(25,"mytranslate"),t.qZA(),t.TgZ(26,"td",12),t._uU(27),t.ALo(28,"mytranslate"),t.qZA()()(),t.TgZ(29,"tbody"),t.YNc(30,CY,8,5,"tr",13),t.YNc(31,kY,9,8,"tr",14),t.YNc(32,SY,12,16,"tr",14),t.YNc(33,EY,8,5,"tr",13),t.qZA()()()()()),2&e&&(t.xp6(2),t.Gre("box dialog-drag dialog",i.isMobile?"-mobile":"",""),t.xp6(3),t.hij(" ",t.lcZ(6,14,"lang_auto_thong_tin_de_thi")," "),t.xp6(8),t.lnq("",t.lcZ(14,16,"lang_auto_tong_so_cau_trong_de_thi"),": ",i.info.totalQuest," ",t.lcZ(15,18,t.lcZ(16,20,"lang_auto_cau")),""),t.xp6(8),t.Oqu(t.lcZ(22,22,"lang_auto_thong_tin")),t.xp6(3),t.Oqu(t.lcZ(25,24,"lang_auto_so_luong")),t.xp6(3),t.Oqu(t.lcZ(28,26,"lang_auto_danh_sach_cac_cau")),t.xp6(3),t.Q6J("ngIf",i.showMore.countQuestUnanswered.countQuest),t.xp6(1),t.Q6J("ngForOf",i.showMore.typeQuests),t.xp6(1),t.Q6J("ngForOf",i.showMore.ansCountQuest),t.xp6(1),t.Q6J("ngIf",i.showMore.countQuestNoHelp.countQuest))},dependencies:[D.sg,D.O5,Ta.Zt,Ta.Bh,Jo.Hw,D.i8,jt.JV],styles:[".box-dialog[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:flex-start;top:0;left:0;width:100vw;height:100vh;position:fixed;z-index:9999}.box-dialog[_ngcontent-%COMP%]   .dialog-overlay[_ngcontent-%COMP%]{top:0;left:0;width:100vw;height:100vh;position:fixed;background-color:#0000004d}.dialog[_ngcontent-%COMP%]{position:absolute;margin-top:7vh;width:800px;box-shadow:#0000003d 0 3px 8px}.dialog[_ngcontent-%COMP%]   .text-center[_ngcontent-%COMP%]{text-align:center!important}@media screen and (max-width: 800px){.dialog[_ngcontent-%COMP%]{width:90vw!important}}.dialog-body[_ngcontent-%COMP%]{padding:10px}.dialog-body[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:top}.dialog-mobile[_ngcontent-%COMP%]{position:absolute;margin-top:7vh;width:95%;box-shadow:#0000003d 0 3px 8px}.dialog-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #d0d0d0;padding:10px}.dialog-title[_ngcontent-%COMP%]{font-weight:700}.dialog-close[_ngcontent-%COMP%]{display:flex;align-items:center;border-radius:50%}.dialog-close[_ngcontent-%COMP%]:hover{background-color:#d0d0d04a;cursor:pointer}.dialog-footer[_ngcontent-%COMP%]{display:flex;padding:10px;border-top:1px solid #d0d0d0;justify-content:space-between;align-items:center}.lst-errs[_ngcontent-%COMP%]   .lst-err-item[_ngcontent-%COMP%]{padding:15px 10px;border-bottom:1px dotted #e0e0e0}.lst-errs[_ngcontent-%COMP%]   .lst-err-item[_ngcontent-%COMP%]:last-child{border-bottom:none!important}.quest-info-item[_ngcontent-%COMP%]{padding:5px 0;text-align:right}.label-quest-item[_ngcontent-%COMP%]{padding:5px;border:1px solid #e0e0e0;border-radius:5px;cursor:pointer;display:block;width:-moz-fit-content;width:fit-content;float:left;margin:5px}.label-quest-item[_ngcontent-%COMP%]:hover{background-color:#eceff1}.table-header[_ngcontent-%COMP%]{text-align:center;font-weight:500}"]}),n})();var Cw=M(5177),IY=M(64728),LY=M(92300);let PY=(()=>{class n{constructor(e,i){this.commonService=e,this.userService=i,this.listChatContentData=[]}pushMessageToListChat(e,i,a,r,s){let l=this.createMessageContent(e,i,a,r,s);return this.listChatContentData.push(l),l}addMessage(e,i){let a=this.createMessageContent(!0,"text",e);return this.listChatContentData[this.listChatContentData.length-1].messageChat+=a.messageChat,a}createMessageContent(e,i,a,r,s){return{userObj:e?this.getAIUserObj():this.userService.getUserObj(),messageChat:a??"",fileData:s,type:i}}getAIUserObj(){return{fullName:"AzotaAI",avatar:"images/azotaAI.png",id:0,password:"",amount:0,gender:0}}initChatAI(){let e=(this.commonService.myTranslateInstant("lang_ai_chat_box_greeting_1")??"Ch\xe0o ")+this.userService.getUserObj().fullName+(this.commonService.myTranslateInstant("lang_ai_chat_box_greeting_2")??", t\xf4i c\xf3 th\u1ec3 gi\xfap g\xec cho b\u1ea1n?");this.pushMessageToListChat(!0,"text",e,!0)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(mi.z),t.LFG(ga.U))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var NY=M(47442);let ZY=(()=>{class n{constructor(e){this.el=e,this.focus=!0}ngOnInit(){this.focus&&window.setTimeout(()=>{this.el.nativeElement.focus()})}set autofocus(e){this.focus=!1!==e}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.SBq))},n.\u0275dir=t.lG2({type:n,selectors:[["","autofocus",""]],inputs:{autofocus:"autofocus"}}),n})();const DY=["perfectScroll"];function jY(n,o){1&n&&(t.TgZ(0,"span",27),t.O4$(),t.TgZ(1,"svg",28)(2,"circle",29),t._UZ(3,"animate",30)(4,"animate",31),t.qZA(),t.TgZ(5,"circle",32),t._UZ(6,"animate",33)(7,"animate",34),t.qZA(),t.TgZ(8,"circle",35),t._UZ(9,"animate",30)(10,"animate",31),t.qZA()()())}function qY(n,o){if(1&n&&(t.TgZ(0,"li"),t._UZ(1,"img",24),t.ALo(2,"mycdn"),t.ALo(3,"convertCdnLinkOfGitHub"),t.TgZ(4,"p"),t._UZ(5,"span",25),t.ALo(6,"mytranslate"),t.YNc(7,jY,11,0,"span",26),t.qZA()()),2&n){const e=o.$implicit,i=t.oxw();t.Tol(e.userObj.id?"sent":"replies"),t.xp6(1),t.Q6J("src",e.userObj.id?t.lcZ(2,5,e.userObj.avatar):t.lcZ(3,7,"images/azotaAI.png"),t.LSH),t.xp6(4),t.Q6J("innerHtml",t.lcZ(6,9,i.commonService.replaceAll(e.messageChat.trim(),"\n",'<span class="break-message-line"></span>')),t.oJD),t.xp6(2),t.Q6J("ngIf",!e.userObj.id&&i.loadingMessageApi)}}function FY(n,o){1&n&&(t.TgZ(0,"li",36)(1,"p"),t.O4$(),t.TgZ(2,"svg",28)(3,"circle",29),t._UZ(4,"animate",30)(5,"animate",31),t.qZA(),t.TgZ(6,"circle",32),t._UZ(7,"animate",33)(8,"animate",34),t.qZA(),t.TgZ(9,"circle",35),t._UZ(10,"animate",30)(11,"animate",31),t.qZA()()()())}let RY=(()=>{class n extends St.Q{sendDataCreateQuestion(){if(this.initStatusObj(),!this.promptCreateExam.value||""==this.promptCreateExam.value?.trim())return;let e=JSON.parse(JSON.stringify(this.promptCreateExam.value??""));this.promptCreateExam.setValue(""),this.loadingMessageChatAI=!0;let a={text:e,his:this.listHistoryChat.slice(-6)};this.listHistoryChat.push(e),this.aztChatBoxAIService.pushMessageToListChat(!1,"text",e),this.scrollToPosition(),this.processAnalysisCommand(a).subscribe(r=>{if(r.success)this.createQuestion.emit(r.data?.objs??[]),this.successStatusObj();else{this.loadingMessageChatAI=!1;let s=this.commonService.myTranslateInstant(r.message);502===r.code&&(s="H\u1ec7 th\u1ed1ng \u0111ang qu\xe1 t\u1ea3i vui l\xf2ng th\u1eed l\u1ea1i"),this.aztChatBoxAIService.pushMessageToListChat(!0,"text",s),this.scrollToPosition(),this.errorStatusObj(r.message)}})}analysisCommand(e){const i=/-(\w+)\s+\[([^\]]+)\]|-(\w+)\s+\{([^}]*)\}|-(\w+)\s+([^-\s]+)/g,a={};let r;for(;null!==(r=i.exec(e));){const s=r[1]||r[3]||r[5],l=r[2]||r[4]||r[6];if(l.startsWith("{")&&l.endsWith("}")){const c=l.slice(1,-1).split(","),d={};c.forEach(h=>{const[_,x]=h.split(":").map(b=>b.trim());d[_]=x}),a[s]=d}else a[s]=l}return a}getCommandByText(e){return new it.y(i=>{this.saveMessageChatApi(e.text??"",!1).pipe((0,Cw.g)(100)).subscribe(a=>{this.lastUserMessageId=a,this.aiService.apiAiCmdPost(e).subscribe(r=>{if(r.success)this.listHistoryChat.push(r.data?.text??""),i.next(r);else{this.loadingMessageChatAI=!1;let s=this.commonService.myTranslateInstant(r.message);502===r.code&&(s="H\u1ec7 th\u1ed1ng \u0111ang qu\xe1 t\u1ea3i vui l\xf2ng th\u1eed l\u1ea1i!"),this.aztChatBoxAIService.pushMessageToListChat(!0,"text",s),this.scrollToPosition(),this.errorStatusObj(r.message),i.error()}})})})}saveMessageChatApi(e,i){return new it.y(a=>{this.messageService.chatApiMessagesPost({content:e,parentId:i?this.lastUserMessageId:void 0,conversationId:0,type:1}).subscribe(l=>{l?a.next(l.id):(a.next(0),this.showErrorSnack("lang_cms_error_lost_connect_to_server"))})})}processAnalysisCommand(e){return new it.y(i=>{this.getCommandByText(e).pipe((0,Cw.g)(200)).subscribe(a=>{if(1===a.success)this.saveMessageChatApi(a.data?.text??"",!0).pipe((0,Cw.g)(100)).subscribe(()=>{const r=a.data?.text??"";let l=r.match(/(create_test_by_knowledge|create_test_by_purpose)\s(.*)/g)?.[0];const c=l?.trimStart().split(" ")[0],d=this.analysisCommand(l??r);switch(c){case"create_test_by_purpose":this.sAztAzotaTrackingService.sendCustomEvent("ai_create_exam_get_questions",[]),this.createQuestionByGenerateExam(d).subscribe(_=>{_.data?.objs.length&&this.sAztAzotaTrackingService.sendCustomEvent("ai_create_exam_get_questions_success",[]),i.next(_)});break;case"create_test_by_knowledge":this.sAztAzotaTrackingService.sendCustomEvent("ai_create_exam_get_questions",[]),this.createQuestionByKnowledge(d).subscribe(_=>{_.data?.objs.length&&this.sAztAzotaTrackingService.sendCustomEvent("ai_create_exam_get_questions_success",[]),i.next(_)});break;default:i.next({success:0,message:r,version:"v1.0",detailMessage:"",code:400})}});else{this.loadingMessageChatAI=!1;let r=this.commonService.myTranslateInstant(a.message);502===a.code&&(r="H\u1ec7 th\u1ed1ng \u0111ang qu\xe1 t\u1ea3i vui l\xf2ng th\u1eed l\u1ea1i"),this.aztChatBoxAIService.pushMessageToListChat(!0,"text",r),this.scrollToPosition(),this.errorStatusObj(a.message)}})})}createQuestionByKnowledge(e){return new it.y(i=>{const r=e.knowledge?.match(/\[(.*?)\]: (\d+)/g);let s=0,l=[];r?r.forEach(h=>{l.push(h),s+=parseInt(h.split(":")[1])}):l.push(e.knowledge??""),this.aztChatBoxAIService.pushMessageToListChat(!0,"text",`V\u1edbi y\xeau c\u1ea7u c\u1ee7a b\u1ea1n v\u1ec1 t\u1ea1o ${s} c\xe2u h\u1ecfi ${e.subject?"cho m\xf4n "+e.subject:""} ${e.class?"l\u1edbp "+e.class:""}, t\xf4i b\u1eaft \u0111\u1ea7u th\u1ef1c hi\u1ec7n: \n`);const d=new $t.Q(1);l?.forEach(h=>{d.addTask(this,this.callApiKnowledge,[h,e])}),d.start().then(h=>{let _=[];h.datas.forEach(T=>{_=_?.concat(T)});let x="";x+=_.length>0?`\n T\xf4i \u0111\xe3 th\xeam ${_.length} ${s?"/"+s:""} c\xe2u h\u1ecfi v\xe0o \u0111\u1ec1 c\u1ee7a b\u1ea1n`:"\n ",this.aztChatBoxAIService.addMessage(x),i.next({success:1,message:"",version:"v1.0",detailMessage:"",code:200,data:{objs:_}}),i.complete()})})}callApiKnowledge(e,i){return this.loadingMessageChatAI=!1,this.loadingMessageApi=!0,new Promise(a=>{let r=parseInt(e.split(":")[1])??5,s=e.split(":")[0]??"";const d=/\(([^)]+)\)[^\(]*$/.exec(s.trim()??"All"),h=d?d[1]:"";s.includes(`(${h})`)&&(s=s.replace(`(${h})`,""));let _={schoolLevelId:i.class?Number(i.class):void 0,schoolSubjectName:i.subject??"",promptText:s.replace(/\[|\]/g,"").trim()??"All",numberOfQuestion:r,difficulty:h};this.aiService.apiAiListKnowledgeQuestionsPost(_).subscribe(x=>{this.loadingMessageApi=!1;let b=this.commonService.myTranslateInstant(x.message)+"\n";this.commonService.replaceAll(b,"\t",'<span class="inline-block ml-5"></span>'),0==x.success&&(b=`<span class="font-medium text-danger">${b}</span>`),200==x.code&&this.aztChatBoxAIService.addMessage(b),this.scrollToPosition(),1==x.success?(this.totalQuestion+=x.data?.objs?.length??0,a(x.data?.objs??[])):a([])})})}createQuestionByGenerateExam(e){let i=e.type?e.type.toLowerCase():"";return e.type&&e.type.includes(",")&&(i=e.type.split(",")[0]?.toLocaleLowerCase()??""),new it.y(a=>{const r={schoolLevelId:e.class?Number(e.class):void 0,schoolSubjectName:e.subject??"",numberOfQuestion:5,type:i};this.waitDestroy(this.aiService.apiAiListPurposeQuestionsPost(r).subscribe(s=>{if(s.success)a.next(s);else{this.loadingMessageChatAI=!1;let l=this.commonService.myTranslateInstant(s.message);this.aztChatBoxAIService.pushMessageToListChat(!0,"text",l),this.scrollToPosition(),this.errorStatusObj(s.message),a.error()}}))})}closeDialog(){this.aztChatBoxAIService.listChatContentData=[],this.close.emit(!0)}scrollToPosition(e){setTimeout(()=>{try{this.perfectScroll&&this.perfectScroll.scrollTo({top:e??this.perfectScroll.viewport.contentHeight})}catch{}})}constructor(e,i,a,r){super(),this.aiService=e,this.messageService=i,this.aztChatBoxAIService=a,this.sAztAzotaTrackingService=r,this.questList=[],this.close=new t.vpe,this.createQuestion=new t.vpe,this.promptCreateExam=new f.NI("",[f.kI.required,or._.noWhiteSpace]),this.lastUserMessageId=0,this.loadingMessageChatAI=!1,this.totalQuestion=0,this.loadingMessageApi=!1,this.listHistoryChat=[]}ngOnInit(){this.totalQuestion=this.questList.filter(e=>!e.quest.isGroup).length,0===this.aztChatBoxAIService.listChatContentData.length&&this.aztChatBoxAIService.initChatAI(),this.scrollToPosition()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(IY.p),t.Y36(LY.ez),t.Y36(PY),t.Y36(NY.g))},n.\u0275cmp=t.Xpm({type:n,selectors:[["azt-ai-chat-box"]],viewQuery:function(e,i){if(1&e&&t.Gf(DY,5),2&e){let a;t.iGM(a=t.CRH())&&(i.perfectScroll=a.first)}},inputs:{questList:"questList"},outputs:{close:"close",createQuestion:"createQuestion"},features:[t.qOj],decls:32,vars:18,consts:[[1,"box-dialog"],[1,"dialog","box"],[1,"dialog-header","flex","items-center","p-3","border-b","border-slate-200","dark:border-darkmode-400"],[1,"dialog-title"],[1,"w-6","h-5","inline-block","mr-1"],[1,"w-full","h-full","inline-block",3,"src"],[1,"font-medium","bg-pending","text-white","rounded-lg","px-2","py-0.5","text-xs"],["azt-track-service","ai-chat-box-65UAr2QT0",1,"dialog-close","ml-auto",3,"click"],[1,"w-4","h-4","inline-block"],["name","x"],[1,"p-0"],["pointerEventsMethod","scrollbar",1,"messages",2,"height","250px","padding-bottom","10px","margin-right","5px",3,"visibility"],["perfectScroll",""],[1,"p-3"],[1,"mr-2"],[3,"class",4,"ngFor","ngForOf"],["class","replies","style","margin-left: auto; margin-right: auto",4,"ngIf"],[1,"dialog-body","p-3"],[1,"border","border-slate-200","dark:border-darkmode-600","p-2","rounded-md"],["value","",1,"chat__box__input","form-control","dark:bg-darkmode-600","px-1","h-16","resize-none","border-transparent","shadow-none","focus:border-transparent","focus:ring-0",3,"formControl","autofocus","placeholder","enterKey"],[1,"mt-2","flex","items-center"],[1,"upload-file","relative"],[1,"ml-auto"],["azt-track-service","ai-chat-box-8tp_7gRUQe",1,"btn","btn-sm","btn-primary","w-30",3,"disabled","click"],["alt","",3,"src"],[3,"innerHtml"],["class","w-4 h-4 mt-2 block",4,"ngIf"],[1,"w-4","h-4","mt-2","block"],["width","25","viewBox","0 0 120 30","xmlns","http://www.w3.org/2000/svg","fill","currentColor",1,"w-4","h-4"],["cx","15","cy","15","r","15"],["attributeName","r","from","15","to","15","begin","0s","dur","0.8s","values","15;9;15","calcMode","linear","repeatCount","indefinite"],["attributeName","fill-opacity","from","1","to","1","begin","0s","dur","0.8s","values","1;.5;1","calcMode","linear","repeatCount","indefinite"],["cx","60","cy","15","r","9","fill-opacity","0.3"],["attributeName","r","from","9","to","9","begin","0s","dur","0.8s","values","9;15;9","calcMode","linear","repeatCount","indefinite"],["attributeName","fill-opacity","from","0.5","to","0.5","begin","0s","dur","0.8s","values",".5;1;.5","calcMode","linear","repeatCount","indefinite"],["cx","105","cy","15","r","15"],[1,"replies",2,"margin-left","auto","margin-right","auto"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),t._UZ(5,"img",5),t.ALo(6,"convertCdnLinkOfGitHub"),t.qZA(),t._uU(7),t.ALo(8,"mytranslate"),t.TgZ(9,"span",6),t._uU(10,"Beta"),t.qZA()(),t.TgZ(11,"button",7),t.NdJ("click",function(){return i.closeDialog()}),t.TgZ(12,"span",8),t._UZ(13,"lucide-icon",9),t.qZA()()(),t.TgZ(14,"div",10)(15,"ng-scrollbar",11,12)(17,"div",13)(18,"ul",14),t.YNc(19,qY,8,11,"li",15),t.YNc(20,FY,12,0,"li",16),t.qZA()()()(),t.TgZ(21,"div",17)(22,"div",18)(23,"textarea",19),t.NdJ("enterKey",function(){return i.sendDataCreateQuestion()}),t.ALo(24,"mytranslate"),t._uU(25,"\t\t\t\t"),t.qZA(),t.TgZ(26,"div",20),t._UZ(27,"div",21),t.TgZ(28,"div",22)(29,"button",23),t.NdJ("click",function(){return i.sendDataCreateQuestion()}),t._uU(30),t.ALo(31,"mytranslate"),t.qZA()()()()()()()),2&e&&(t.xp6(5),t.Q6J("src",t.lcZ(6,10,"images/azotaAI.png"),t.LSH),t.xp6(2),t.hij(" ",t.lcZ(8,12,"lang_testbank_create_a_question_with_azota_ai")," "),t.xp6(8),t.Q6J("visibility","hover"),t.xp6(4),t.Q6J("ngForOf",i.aztChatBoxAIService.listChatContentData),t.xp6(1),t.Q6J("ngIf",i.loadingMessageChatAI),t.xp6(3),t.s9C("placeholder",t.lcZ(24,14,"lang_testbank_enter_the_purpose_of_the_test_azota_ai_will_help_you_create_the_test_you_want")),t.Q6J("formControl",i.promptCreateExam)("autofocus",!0),t.xp6(6),t.Q6J("disabled",i.statusObj.loading||i.loadingMessageChatAI||i.promptCreateExam.errors),t.xp6(1),t.hij(" ",t.lcZ(31,16,"lang_cms_create_question_title")," "))},dependencies:[D.sg,D.O5,f.Fj,f.JJ,f.oH,L.KC,C.Nh5,k6.Y,ZY,jt.JV,jt.QN,jt.Bo],styles:[".dialog[_ngcontent-%COMP%]{position:absolute;margin-top:5vh;width:100%;box-shadow:#0000003d 0 3px 8px}.dialog-title[_ngcontent-%COMP%]{font-weight:700}.dialog-close[_ngcontent-%COMP%]{display:flex;align-items:center;border-radius:50%;color:#5d647b}.dialog-close[_ngcontent-%COMP%]:hover{background-color:#d0d0d04a;cursor:pointer}.dialog-footer[_ngcontent-%COMP%]{display:flex;padding:10px;justify-content:space-between;align-items:center}.shadow-none[_ngcontent-%COMP%]{box-shadow:none}.border-transparent[_ngcontent-%COMP%]{border-color:transparent}.focus\\:ring-0[_ngcontent-%COMP%]:focus{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 rgba(0, 0, 0, 0))}.focus\\:border-transparent[_ngcontent-%COMP%]:focus{border-color:transparent;outline:none;box-shadow:none}.messages[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:block;clear:both;float:left;margin:10px 15px 5px;width:calc(100% - 15px);font-size:.9em}.messages[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-last-child(1){margin-bottom:20px}.messages[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.replies[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin:6px 8px 0 0}.messages[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.replies[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{background:#f5f5f5;word-break:break-word;--tw-text-opacity: 1;color:rgb(var(--color-slate-700)/var(--tw-text-opacity))}.messages[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.sent[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:not(.file-img){float:right;margin:6px 0 0 8px}.messages[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.sent[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{background:#1e3fb0;color:#fff;float:right}.messages[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:not(.file-img){width:22px;border-radius:50%;float:left}img.file-img[_ngcontent-%COMP%]{width:35px!important;margin-right:10px}.messages[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:inline-block;padding:10px 15px;border-radius:20px;max-width:calc(100% - 130px);line-height:1.5}@media (max-width: 640px){.messages[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{max-width:230px}}.cursor[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle;align-content:center;width:10px;height:15px;margin-left:3px;background-color:rgb(var(--color-slate-500)/var(--tw-text-opacity));animation:_ngcontent-%COMP%_blink 1s infinite}@keyframes _ngcontent-%COMP%_typing{0%{width:0}to{width:100%}}@keyframes _ngcontent-%COMP%_blink{0%,to{opacity:1}50%{opacity:0}}"]}),n})(),UY=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[D.JJ],imports:[O.Bz,D.ez,I.j,L.kb,w.Z_,lz,f.u5,f.UX,$.Is,F.Z,A.xC,E.QG,y.SD,Q.W,Qi.f,ru,N.d,C.qyJ.pick(C.ciZ),m.vI]}),n})();t.B6R(G1,function(){return[O.rH,D.O5,f._Y,f.Wl,f.JJ,f.JL,f.sg,f.u,f.CE,si.l,Vf.W,oo.M,L0.S,oi.n,fo._,C.Nh5,D0,Lr,r0,$1]},function(){return[jt.Jy,jt.JV,jt.Bo,jt.EZ]}),t.B6R(nd,function(){return[D.mk,D.sg,D.O5,D.PC,Jo.Hw,Ii.VK,Ii.p6,Mi.gM,f.Fj,f.wV,f.JJ,f.qQ,f.On,qr.Y,o4.C,oJ,oi.n,Op.O,aJ.v,G$,$$,xT.X,K$,W$,xY,yY,MY,RY,Td.Z,C.Nh5,Eb,W1,Gz]},function(){return[jt.JV,jt.ES,jt.qY,jt.Bo]}),t.B6R(yf.V,function(){return[D.sg,D.O5,Mi.gM,f.Wl,f.JJ,f.JL,f.sg,f.u,f.CE,oo.M,Ic.R,Jl.Q,oi.n,Yf.W]},function(){return[jt.JV,jt.nq,hb]})},56291:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{X:()=>QuestHeaderComponent});var _angular_core__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(65879),src_app_w_azota_library_azota_core_supers_my_base_component__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(47496),src_app_w_azota_library_azota_helpers_common_FileManagers__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(61713),src_app_w_azota_library_azota_core_services_cdn_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(32965),angular_shepherd__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(14913),src_app_w_azota_library_azota_core_services_browser_storage_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(88489),_angular_common__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(96814),_angular_material_core__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(23680),_angular_material_chips__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(22557),_angular_material_icon__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(30617),_angular_material_menu__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(77988),_angular_material_select__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(98525),_angular_material_tooltip__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(92596),_angular_forms__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(56223),_tooltip_controller_component__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(61811),_w_azota_library_azota_core_pipes_common_pipe__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(36727);const _c0=["markInput"],_c1=["inpAudioUpload"];function QuestHeaderComponent_div_3_common_tooltip_9_Template(Zt,K){1&Zt&&(_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"common-tooltip")(1,"em")(2,"mark"),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(3,"Ctr + Enter"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(4),_angular_core__WEBPACK_IMPORTED_MODULE_6__.ALo(5,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()()),2&Zt&&(_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(4),_angular_core__WEBPACK_IMPORTED_MODULE_6__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_6__.lcZ(5,1,"lang_auto_de_tu_dong_nhap_diem_cho_cac_cau_con_lai_trong_nhom_bang_dot")," "))}const _c2=function(Zt){return{hide:Zt}};function QuestHeaderComponent_div_3_Template(Zt,K){if(1&Zt){const M=_angular_core__WEBPACK_IMPORTED_MODULE_6__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"div",17)(1,"div",18)(2,"span",19),_angular_core__WEBPACK_IMPORTED_MODULE_6__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_6__.CHM(M);const f=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_6__.KtG(f.showMarkInput())}),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(3),_angular_core__WEBPACK_IMPORTED_MODULE_6__.ALo(4,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.ALo(5,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(6,"div",20)(7,"input",21,22),_angular_core__WEBPACK_IMPORTED_MODULE_6__.NdJ("keyup",function(f){_angular_core__WEBPACK_IMPORTED_MODULE_6__.CHM(M);const $=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_6__.KtG($.checkKeyup(f))})("focus",function(){_angular_core__WEBPACK_IMPORTED_MODULE_6__.CHM(M);const f=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_6__.KtG(f.enableTooltip())})("focusout",function(){_angular_core__WEBPACK_IMPORTED_MODULE_6__.CHM(M);const f=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_6__.KtG(f.disableTooltip())})("ngModelChange",function(f){_angular_core__WEBPACK_IMPORTED_MODULE_6__.CHM(M);const $=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_6__.KtG($.q.point=f)}),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(9,QuestHeaderComponent_div_3_common_tooltip_9_Template,6,3,"common-tooltip",14),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(10,"div"),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(11),_angular_core__WEBPACK_IMPORTED_MODULE_6__.ALo(12,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()()()()}if(2&Zt){const M=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw();let D;_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngClass",_angular_core__WEBPACK_IMPORTED_MODULE_6__.VKq(13,_c2,M.showPointInput)),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.hij(" ",M.q.point&&+M.q.point>0?M.q.point+" "+_angular_core__WEBPACK_IMPORTED_MODULE_6__.lcZ(4,7,"lang_auto_diem"):_angular_core__WEBPACK_IMPORTED_MODULE_6__.lcZ(5,9,"lang_auto_nhap_diem")," "),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(3),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngClass",_angular_core__WEBPACK_IMPORTED_MODULE_6__.VKq(15,_c2,!M.showPointInput)),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("size",(null==M.q.point||null==(D=M.q.point.toString())?null:D.length)||2)("ngModel",M.q.point),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",M.isTooltipPoint),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_6__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_6__.lcZ(12,11,"lang_auto_diem")," ")}}function QuestHeaderComponent_div_4_div_1_Template(Zt,K){if(1&Zt){const M=_angular_core__WEBPACK_IMPORTED_MODULE_6__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"div",28),_angular_core__WEBPACK_IMPORTED_MODULE_6__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_6__.CHM(M),_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw();const f=_angular_core__WEBPACK_IMPORTED_MODULE_6__.MAs(4);return _angular_core__WEBPACK_IMPORTED_MODULE_6__.KtG(f.click())}),_angular_core__WEBPACK_IMPORTED_MODULE_6__.O4$(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(1,"svg",29),_angular_core__WEBPACK_IMPORTED_MODULE_6__._UZ(2,"path",30),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(3," Audio "),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()}}function QuestHeaderComponent_div_4_div_2_span_2_Template(Zt,K){if(1&Zt){const M=_angular_core__WEBPACK_IMPORTED_MODULE_6__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"span",39),_angular_core__WEBPACK_IMPORTED_MODULE_6__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_6__.CHM(M);const f=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw(3);return _angular_core__WEBPACK_IMPORTED_MODULE_6__.KtG(f.removeAudio())}),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(1,"[X]"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()}}function QuestHeaderComponent_div_4_div_2_span_3_Template(Zt,K){if(1&Zt&&(_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"span",40),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()),2&Zt){const M=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw(3);_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Oqu(M.audioName)}}function QuestHeaderComponent_div_4_div_2_span_4_Template(Zt,K){if(1&Zt&&(_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()),2&Zt){const M=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw(3);_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Oqu(M.audioName)}}function QuestHeaderComponent_div_4_div_2_mat_icon_5_Template(Zt,K){if(1&Zt){const M=_angular_core__WEBPACK_IMPORTED_MODULE_6__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"mat-icon",41),_angular_core__WEBPACK_IMPORTED_MODULE_6__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_6__.CHM(M);const f=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw(3);return _angular_core__WEBPACK_IMPORTED_MODULE_6__.KtG(f.loadAudio())}),_angular_core__WEBPACK_IMPORTED_MODULE_6__.ALo(1,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(2,"cached"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()}2&Zt&&_angular_core__WEBPACK_IMPORTED_MODULE_6__.s9C("matTooltip",_angular_core__WEBPACK_IMPORTED_MODULE_6__.lcZ(1,1,"lang_auto_tai_lai_audio"))}function QuestHeaderComponent_div_4_div_2_mat_icon_6_Template(Zt,K){if(1&Zt){const M=_angular_core__WEBPACK_IMPORTED_MODULE_6__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"mat-icon",42),_angular_core__WEBPACK_IMPORTED_MODULE_6__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_6__.CHM(M);const f=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw(3);return _angular_core__WEBPACK_IMPORTED_MODULE_6__.KtG(f.stopAudio())}),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(1,"pause "),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()}}function QuestHeaderComponent_div_4_div_2_mat_icon_7_Template(Zt,K){if(1&Zt){const M=_angular_core__WEBPACK_IMPORTED_MODULE_6__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"mat-icon",43),_angular_core__WEBPACK_IMPORTED_MODULE_6__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_6__.CHM(M);const f=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw(3);return _angular_core__WEBPACK_IMPORTED_MODULE_6__.KtG(f.playAudio())}),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(1," play_circle"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()}}function QuestHeaderComponent_div_4_div_2_i_8_Template(Zt,K){1&Zt&&_angular_core__WEBPACK_IMPORTED_MODULE_6__._UZ(0,"i",44)}function QuestHeaderComponent_div_4_div_2_Template(Zt,K){if(1&Zt&&(_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"div",31)(1,"span",32),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(2,QuestHeaderComponent_div_4_div_2_span_2_Template,2,0,"span",33),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(3,QuestHeaderComponent_div_4_div_2_span_3_Template,2,1,"span",34),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(4,QuestHeaderComponent_div_4_div_2_span_4_Template,2,1,"span",14),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(5,QuestHeaderComponent_div_4_div_2_mat_icon_5_Template,3,3,"mat-icon",35),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(6,QuestHeaderComponent_div_4_div_2_mat_icon_6_Template,2,0,"mat-icon",36),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(7,QuestHeaderComponent_div_4_div_2_mat_icon_7_Template,2,0,"mat-icon",37),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(8,QuestHeaderComponent_div_4_div_2_i_8_Template,1,0,"i",38),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()),2&Zt){const M=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw(2);let D;_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("matTooltip",M.audioName),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",!(null!=M.q.quest.parts[0]&&null!=M.q.quest.parts[0].text&&null!=(D=M.q.quest.parts[0].text.trim())&&D.startsWith("[@"))),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",M.isLoadFalseAudio),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",!M.isLoadFalseAudio),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",M.isLoadFalseAudio),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",!M.isLoadFalseAudio&&M.isLoadedAudio&&M.isPlayingAudio),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",!M.isLoadFalseAudio&&M.isLoadedAudio&&!M.isPlayingAudio),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",!M.isLoadedAudio)}}function QuestHeaderComponent_div_4_Template(Zt,K){if(1&Zt){const M=_angular_core__WEBPACK_IMPORTED_MODULE_6__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"div",23),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(1,QuestHeaderComponent_div_4_div_1_Template,4,0,"div",24),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(2,QuestHeaderComponent_div_4_div_2_Template,9,8,"div",25),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(3,"input",26,27),_angular_core__WEBPACK_IMPORTED_MODULE_6__.NdJ("input",function(f){_angular_core__WEBPACK_IMPORTED_MODULE_6__.CHM(M);const $=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_6__.KtG($.selectFileAudio(f))}),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()()}if(2&Zt){const M=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw();let D;_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",!(M.isHasAudio||null!=M.q.quest.parts[0]&&null!=M.q.quest.parts[0].text&&null!=(D=M.q.quest.parts[0].text.trim())&&D.startsWith("[@"))),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",M.isHasAudio)}}function QuestHeaderComponent_div_5_Template(Zt,K){if(1&Zt&&(_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"div",45)(1,"div",31)(2,"mat-select",46)(3,"mat-option",47),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(4),_angular_core__WEBPACK_IMPORTED_MODULE_6__.ALo(5,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(6,"mat-option",47),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(7),_angular_core__WEBPACK_IMPORTED_MODULE_6__.ALo(8,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(9,"mat-option",47),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(10),_angular_core__WEBPACK_IMPORTED_MODULE_6__.ALo(11,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()()()()),2&Zt){const M=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw();_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngModel",M.q.type)("disabled",!0),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("value",3),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_6__.lcZ(5,8,"lang_testbank_create_exam_width_file_docx_essay")," "),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("value",1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_6__.lcZ(8,10,"lang_auto_trac_nghiem")," "),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("value",4),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_6__.lcZ(11,12,"lang_auto_dien_tu")," ")}}function QuestHeaderComponent_div_6_button_6_Template(Zt,K){1&Zt&&(_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"button",50)(1,"mat-icon",51),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(2,"cancel"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()())}function QuestHeaderComponent_div_6_Template(Zt,K){if(1&Zt){const M=_angular_core__WEBPACK_IMPORTED_MODULE_6__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"div",45)(1,"div",31)(2,"mat-chip-listbox")(3,"mat-chip",48),_angular_core__WEBPACK_IMPORTED_MODULE_6__.NdJ("removed",function(){_angular_core__WEBPACK_IMPORTED_MODULE_6__.CHM(M);const f=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_6__.KtG(f.setTag())}),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(4),_angular_core__WEBPACK_IMPORTED_MODULE_6__.ALo(5,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(6,QuestHeaderComponent_div_6_button_6_Template,3,0,"button",49),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()()()()}if(2&Zt){const M=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw(),D=_angular_core__WEBPACK_IMPORTED_MODULE_6__.MAs(23);let f;_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(3),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("matMenuTriggerFor",D),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_6__.lcZ(5,3,"azt_lang_tag_"+M.q.tag[0].code)," "),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",!(null!=M.q.quest.parts[0]&&null!=M.q.quest.parts[0].text&&null!=(f=M.q.quest.parts[0].text.trim())&&f.startsWith("[@")))}}function QuestHeaderComponent_button_9_Template(Zt,K){if(1&Zt){const M=_angular_core__WEBPACK_IMPORTED_MODULE_6__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"button",52),_angular_core__WEBPACK_IMPORTED_MODULE_6__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_6__.CHM(M);const f=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_6__.KtG(f.chooseQuest(f.q))}),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.ALo(2,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()}2&Zt&&(_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_6__.lcZ(2,1,"lang_auto_chon")," "))}function QuestHeaderComponent_button_10_Template(Zt,K){if(1&Zt&&(_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"button",53),_angular_core__WEBPACK_IMPORTED_MODULE_6__.ALo(1,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.O4$(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(2,"svg",54),_angular_core__WEBPACK_IMPORTED_MODULE_6__._UZ(3,"path",55)(4,"path",56),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()()),2&Zt){_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw();const M=_angular_core__WEBPACK_IMPORTED_MODULE_6__.MAs(23);_angular_core__WEBPACK_IMPORTED_MODULE_6__.s9C("matTooltip",_angular_core__WEBPACK_IMPORTED_MODULE_6__.lcZ(1,2,"lang_auto_gan_nhan_muc_do_nhan_biet")),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("matMenuTriggerFor",M)}}function QuestHeaderComponent_button_11_Template(Zt,K){if(1&Zt){const M=_angular_core__WEBPACK_IMPORTED_MODULE_6__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"button",57),_angular_core__WEBPACK_IMPORTED_MODULE_6__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_6__.CHM(M);const f=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_6__.KtG(f.randomQuest())}),_angular_core__WEBPACK_IMPORTED_MODULE_6__.ALo(1,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(2,"span",58),_angular_core__WEBPACK_IMPORTED_MODULE_6__.O4$(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(3,"svg",54),_angular_core__WEBPACK_IMPORTED_MODULE_6__._UZ(4,"path",59)(5,"path",60)(6,"path",61)(7,"path",62)(8,"path",63),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()()()}2&Zt&&_angular_core__WEBPACK_IMPORTED_MODULE_6__.s9C("matTooltip",_angular_core__WEBPACK_IMPORTED_MODULE_6__.lcZ(1,1,"azt_lang_editor_random_again"))}function QuestHeaderComponent_button_12_Template(Zt,K){if(1&Zt&&(_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"button",64)(1,"span",58),_angular_core__WEBPACK_IMPORTED_MODULE_6__.O4$(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(2,"svg",54),_angular_core__WEBPACK_IMPORTED_MODULE_6__._UZ(3,"circle",65)(4,"circle",66)(5,"circle",67),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()()()),2&Zt){_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw();const M=_angular_core__WEBPACK_IMPORTED_MODULE_6__.MAs(14);_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("matMenuTriggerFor",M)}}function QuestHeaderComponent_li_17_Template(Zt,K){if(1&Zt){const M=_angular_core__WEBPACK_IMPORTED_MODULE_6__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"li")(1,"a",68),_angular_core__WEBPACK_IMPORTED_MODULE_6__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_6__.CHM(M);const f=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_6__.KtG(f.setFixAns())}),_angular_core__WEBPACK_IMPORTED_MODULE_6__.O4$(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(2,"svg",69),_angular_core__WEBPACK_IMPORTED_MODULE_6__._UZ(3,"line",70)(4,"path",71),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.kcU(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(5,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(6),_angular_core__WEBPACK_IMPORTED_MODULE_6__.ALo(7,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.ALo(8,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.ALo(9,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()()()}if(2&Zt){const M=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw();_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(6),_angular_core__WEBPACK_IMPORTED_MODULE_6__.AsE("",M.q.quest.isFixAns?_angular_core__WEBPACK_IMPORTED_MODULE_6__.lcZ(7,2,"lang_auto_bo_co_dinh"):_angular_core__WEBPACK_IMPORTED_MODULE_6__.lcZ(8,4,"lang_auto_co_dinh")," ",_angular_core__WEBPACK_IMPORTED_MODULE_6__.lcZ(9,6,"lang_auto_dap_an"),"")}}function QuestHeaderComponent_li_18_Template(Zt,K){if(1&Zt){const M=_angular_core__WEBPACK_IMPORTED_MODULE_6__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"li")(1,"a",72),_angular_core__WEBPACK_IMPORTED_MODULE_6__.NdJ("click",function(f){_angular_core__WEBPACK_IMPORTED_MODULE_6__.CHM(M);const $=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_6__.KtG($.copyContent(f))}),_angular_core__WEBPACK_IMPORTED_MODULE_6__.O4$(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(2,"svg",73),_angular_core__WEBPACK_IMPORTED_MODULE_6__._UZ(3,"rect",74)(4,"path",75),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.kcU(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(5,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(6),_angular_core__WEBPACK_IMPORTED_MODULE_6__.ALo(7,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()()()}2&Zt&&(_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(6),_angular_core__WEBPACK_IMPORTED_MODULE_6__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_6__.lcZ(7,1,"lang_auto_copy_noi_dung")," "))}function QuestHeaderComponent_li_19_Template(Zt,K){if(1&Zt){const M=_angular_core__WEBPACK_IMPORTED_MODULE_6__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"li")(1,"a",76),_angular_core__WEBPACK_IMPORTED_MODULE_6__.NdJ("click",function(f){_angular_core__WEBPACK_IMPORTED_MODULE_6__.CHM(M);const $=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_6__.KtG($.cut(f))}),_angular_core__WEBPACK_IMPORTED_MODULE_6__.O4$(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(2,"svg",73),_angular_core__WEBPACK_IMPORTED_MODULE_6__._UZ(3,"circle",77)(4,"circle",78)(5,"line",79)(6,"line",80)(7,"line",81),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.kcU(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(8,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(9),_angular_core__WEBPACK_IMPORTED_MODULE_6__.ALo(10,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()()()}2&Zt&&(_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(9),_angular_core__WEBPACK_IMPORTED_MODULE_6__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_6__.lcZ(10,1,"lang_auto_cat")," "))}function QuestHeaderComponent_li_20_Template(Zt,K){if(1&Zt){const M=_angular_core__WEBPACK_IMPORTED_MODULE_6__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"li")(1,"a",82),_angular_core__WEBPACK_IMPORTED_MODULE_6__.NdJ("click",function(f){_angular_core__WEBPACK_IMPORTED_MODULE_6__.CHM(M);const $=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_6__.KtG($.del(f))}),_angular_core__WEBPACK_IMPORTED_MODULE_6__.O4$(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(2,"svg",73),_angular_core__WEBPACK_IMPORTED_MODULE_6__._UZ(3,"path",83)(4,"path",84)(5,"path",85),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.kcU(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(6,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(7),_angular_core__WEBPACK_IMPORTED_MODULE_6__.ALo(8,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()()()}2&Zt&&(_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(7),_angular_core__WEBPACK_IMPORTED_MODULE_6__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_6__.lcZ(8,1,"lang_auto_xoa")," "))}function QuestHeaderComponent_li_21_Template(Zt,K){if(1&Zt&&(_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"li")(1,"a",86),_angular_core__WEBPACK_IMPORTED_MODULE_6__.O4$(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(2,"svg",69),_angular_core__WEBPACK_IMPORTED_MODULE_6__._UZ(3,"path",87)(4,"path",88)(5,"path",89),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.kcU(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(6,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(7),_angular_core__WEBPACK_IMPORTED_MODULE_6__.ALo(8,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()()()),2&Zt){_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw();const M=_angular_core__WEBPACK_IMPORTED_MODULE_6__.MAs(23);_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("matMenuTriggerFor",M),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(6),_angular_core__WEBPACK_IMPORTED_MODULE_6__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_6__.lcZ(8,2,"lang_auto_gan_nhan")," ")}}function QuestHeaderComponent_div_24_li_2_Template(Zt,K){if(1&Zt){const M=_angular_core__WEBPACK_IMPORTED_MODULE_6__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"li")(1,"a",91),_angular_core__WEBPACK_IMPORTED_MODULE_6__.NdJ("click",function(){const $=_angular_core__WEBPACK_IMPORTED_MODULE_6__.CHM(M).$implicit,O=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw(2);return _angular_core__WEBPACK_IMPORTED_MODULE_6__.KtG(O.setTag($))}),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(2),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()()}if(2&Zt){const M=K.$implicit,D=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw(2);let f;_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_6__.hij(" ",null!==(f=M[D.commonService.getCurrentLang()+"Name"])&&void 0!==f?f:M.enName," ")}}function QuestHeaderComponent_div_24_li_3_Template(Zt,K){1&Zt&&(_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"li"),_angular_core__WEBPACK_IMPORTED_MODULE_6__._UZ(1,"hr",92),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA())}function QuestHeaderComponent_div_24_li_4_Template(Zt,K){if(1&Zt){const M=_angular_core__WEBPACK_IMPORTED_MODULE_6__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"li")(1,"button",93),_angular_core__WEBPACK_IMPORTED_MODULE_6__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_6__.CHM(M);const f=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw(2);let $;return _angular_core__WEBPACK_IMPORTED_MODULE_6__.KtG(f.applyTagAll(null!==($=f.q.tag)&&void 0!==$?$:[]))}),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(2),_angular_core__WEBPACK_IMPORTED_MODULE_6__.ALo(3,"mytranslate"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()()}if(2&Zt){const M=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw(2);_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("disabled",!M.q.tag),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_6__.lcZ(3,2,"lang_auto_ap_dung_cho_cac_cau_con_lai")," ")}}function QuestHeaderComponent_div_24_Template(Zt,K){if(1&Zt&&(_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"div",12)(1,"ul",13),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(2,QuestHeaderComponent_div_24_li_2_Template,3,1,"li",90),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(3,QuestHeaderComponent_div_24_li_3_Template,2,0,"li",14),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(4,QuestHeaderComponent_div_24_li_4_Template,4,4,"li",14),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()()),2&Zt){const M=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw();_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngForOf",M.questionTags),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",M.notOnlyQuestEdit),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",M.notOnlyQuestEdit)}}let QuestHeaderComponent=(()=>{class QuestHeaderComponent extends src_app_w_azota_library_azota_core_supers_my_base_component__WEBPACK_IMPORTED_MODULE_0__.Q{constructor(Zt,K,M){super(),this.cdnService=Zt,this.shepherdService=K,this.browserStorageService=M,this.index=0,this.notOnlyQuestEdit=!0,this.showType=!0,this.similar=!1,this.questionTags=[],this.onLabelClick=new _angular_core__WEBPACK_IMPORTED_MODULE_6__.vpe,this.onHotKeyPointSync=new _angular_core__WEBPACK_IMPORTED_MODULE_6__.vpe,this.onApplyAllTag=new _angular_core__WEBPACK_IMPORTED_MODULE_6__.vpe,this.onError=new _angular_core__WEBPACK_IMPORTED_MODULE_6__.vpe,this.onCopy=new _angular_core__WEBPACK_IMPORTED_MODULE_6__.vpe,this.onCut=new _angular_core__WEBPACK_IMPORTED_MODULE_6__.vpe,this.onChooseSimilar=new _angular_core__WEBPACK_IMPORTED_MODULE_6__.vpe,this.onDel=new _angular_core__WEBPACK_IMPORTED_MODULE_6__.vpe,this.onChangeQuest=new _angular_core__WEBPACK_IMPORTED_MODULE_6__.vpe,this.onRandomQuest=new _angular_core__WEBPACK_IMPORTED_MODULE_6__.vpe,this.onExtraInfo=new _angular_core__WEBPACK_IMPORTED_MODULE_6__.vpe,this.isHasAudio=!1,this.isLoadedAudio=!1,this.isLoadFalseAudio=!1,this.audioName="",this.audioMime="",this.audioUrl="",this.isTooltipPoint=!1,this.isPlayingAudio=!1,this.showPointInput=!1,this.isMobile=!1,this.q={label:"",quest:{label:0,answers:[],parts:[]},answers:[],renderedStr:""}}chooseQuest(Zt){this.onChooseSimilar.emit(Zt)}ngAfterViewInit(){setTimeout(()=>{const Zt=document.getElementById("azt_tour_1"),K=[{attachTo:{element:"#azt_tour_1",on:"bottom"},buttons:[{action(){return this.cancel()},classes:"btn btn-primary w-20",text:this.commonService.myTranslateInstant("lang_button_close")}],classes:"box",id:"intro",title:this.commonService.myTranslateInstant("lang_core_change_to_the_same_question"),text:this.commonService.myTranslateInstant("lang_core_click_here_to_select_a_similar_question_from_the_general_bank_of_azota")}],M=this.browserStorageService.getSimpleStorage("show_tour_quest_header");0===this.index&&!M&&!this.shepherdService.isActive&&Zt&&(this.shepherdService.defaultStepOptions={classes:"box",scrollTo:!0,cancelIcon:{enabled:!1}},this.shepherdService.requiredElements=[{selector:"#azt_tour_1"}],this.shepherdService.modal=!0,this.shepherdService.addSteps(K),this.shepherdService.start(),this.browserStorageService.saveSimpleStorage("show_tour_quest_header","1"))},500)}ngOnInit(){super.ngOnInit(),this.isMobile=this.commonService.isMobileOrTable();let Zt=this.commonService.willDeleteParseJson(this.q.attachments||"[]");this.q.audio?(this.isHasAudio=!0,this.audioName=this.q.audio.name,this.isLoadedAudio=!0,this.isLoadFalseAudio=!1):Zt.forEach(K=>{(0,src_app_w_azota_library_azota_helpers_common_FileManagers__WEBPACK_IMPORTED_MODULE_1__.F0)(K.mimes||"")&&(this.isHasAudio=!0,this.audioUrl=K.url||"",this.audioName=K.name||"",this.audioMime=K.mimes||""),this.audioUrl&&this.loadAudio()})}loadAudio(){this.isLoadedAudio=!1,fetch(this.cdnService.getMyCdn(this.audioUrl)).then(Zt=>{if(!Zt.ok)throw new Error("Something went wrong");Zt.blob().then(K=>{this.q.audio=new File([K],this.audioName,{type:this.audioMime}),this.isLoadedAudio=!0,this.isLoadFalseAudio=!1})}).catch(()=>{this.isLoadedAudio=!0,this.isLoadFalseAudio=!0;let Zt=this.commonService.myTranslateInstant("lang_auto_khong_the_tai_tep_audio_cho"),K=this.commonService.myTranslateInstant("lang_auto_vui_long_thu_lai");this.showErrorSnack(`${Zt} ${this.q.label} ${K}`)})}ngOnDestroy(){super.ngOnDestroy(),this.stopAudio()}changeQuest(){this.shepherdService.isActive&&this.shepherdService.cancel(),this.onChangeQuest.emit(this.q)}randomQuest(){this.onRandomQuest.emit()}removeAudio(){this.q.attachments=void 0,this.stopAudio(),this.q.audio=void 0,this.isHasAudio=!1,this.onExtraInfo.emit({q:this.q,type:"audio",data:this.q.audio}),this.inpAudioUpload&&(this.inpAudioUpload.nativeElement.value=null)}selectFileAudio(Zt){(0,src_app_w_azota_library_azota_helpers_common_FileManagers__WEBPACK_IMPORTED_MODULE_1__.F0)(Zt.target.files[0].type)?(this.stopAudio(),this.q.audio=Zt.target.files[0],this.audioName=this.q.audio?.name??"",this.isLoadedAudio=!0,this.isLoadFalseAudio=!1,this.isHasAudio=!0,this.onExtraInfo.emit({q:this.q,type:"audio",data:this.q.audio})):this.showErrorSnack("lang_auto_file_dinh_kem_phai_la_mot_audio")}showMarkInput(){this.showPointInput=!0,setTimeout(()=>{this.markInput?.nativeElement.focus()},50)}enableTooltip(){this.isTooltipPoint=!0}disableTooltip(){this.showPointInput&&this.onExtraInfo.emit({q:this.q,type:"point",data:this.q.point}),this.isTooltipPoint=!1,this.showPointInput=!1}setFixAns(){this.q.quest.isFixAns=!this.q.quest.isFixAns,this.onExtraInfo.emit({q:this.q,type:"fix",data:this.q.quest.isFixAns})}setTag(Zt){this.q.tag=Zt?[Zt]:[],this.onExtraInfo.emit({q:this.q,type:"tag",data:this.q.tag})}applyTagAll(Zt){this.onApplyAllTag.emit(Zt)}copyContent(Zt){this.onCopy.emit(this.q)}cut(Zt){this.onCut.emit(this.q)}del(Zt){this.onDel.emit(this.q)}getTagName(Zt){return Zt.toUpperCase().split(" ").map(K=>K[0]??"").join("")}checkKeyup(ev){if("Enter"==ev.code){let v=this.markInput?.nativeElement.value;if(!/^[\d\.\+\-\*\/\s\(\)]+$/.test(v)){let Zt=this.commonService.myTranslateInstant("lang_auto_du_lieu_diem_ban_nhap_khong_hop_le_dot");return void this.onError.emit(Zt)}if(v=eval(v),this.q.point=Math.round(100*v)/100,ev.ctrlKey)this.isTooltipPoint=!1,this.showPointInput=!1,this.onHotKeyPointSync.emit(this.q.point);else{window.focus();let Zt=document.activeElement;Zt&&Zt.blur()}}}isPlayAudio(){return!(!window.playMedia||window.playMedia.id!==this.q?.quest.label||!window.playMedia.played)}stopAudio(){window.playMedia&&(window.playMedia.pause(),window.playMedia=void 0,this.isPlayingAudio=!1)}playAudio(){window.playMedia&&window.playMedia.pause(),this.q.audio&&(window.playMedia=new Audio(URL.createObjectURL(this.q.audio)),window.playMedia.id=this.q?.quest.label,window.playMedia.play(),this.isPlayingAudio=!0)}labelClick(){this.onLabelClick.emit(this.q?.quest.parts)}}return QuestHeaderComponent.\u0275fac=function Zt(K){return new(K||QuestHeaderComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_6__.Y36(src_app_w_azota_library_azota_core_services_cdn_service__WEBPACK_IMPORTED_MODULE_2__.E),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Y36(angular_shepherd__WEBPACK_IMPORTED_MODULE_7__.a),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Y36(src_app_w_azota_library_azota_core_services_browser_storage_service__WEBPACK_IMPORTED_MODULE_3__.n))},QuestHeaderComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_6__.Xpm({type:QuestHeaderComponent,selectors:[["app-quest-header"]],viewQuery:function Zt(K,M){if(1&K&&(_angular_core__WEBPACK_IMPORTED_MODULE_6__.Gf(_c0,5),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Gf(_c1,5)),2&K){let D;_angular_core__WEBPACK_IMPORTED_MODULE_6__.iGM(D=_angular_core__WEBPACK_IMPORTED_MODULE_6__.CRH())&&(M.markInput=D.first),_angular_core__WEBPACK_IMPORTED_MODULE_6__.iGM(D=_angular_core__WEBPACK_IMPORTED_MODULE_6__.CRH())&&(M.inpAudioUpload=D.first)}},inputs:{q:"q",index:"index",notOnlyQuestEdit:"notOnlyQuestEdit",showType:"showType",similar:"similar",questionTags:"questionTags"},outputs:{onLabelClick:"onLabelClick",onHotKeyPointSync:"onHotKeyPointSync",onApplyAllTag:"onApplyAllTag",onError:"onError",onCopy:"onCopy",onCut:"onCut",onChooseSimilar:"onChooseSimilar",onDel:"onDel",onChangeQuest:"onChangeQuest",onRandomQuest:"onRandomQuest",onExtraInfo:"onExtraInfo"},features:[_angular_core__WEBPACK_IMPORTED_MODULE_6__.qOj],decls:25,vars:15,consts:[[1,"box-service-question"],["azt-track-service","quest-header-7xvJmr2fh",1,"box-service-question-name",3,"click"],["class","box-service-inp-point",4,"ngIf"],["class","box-service-attach-files cursor-pointer",4,"ngIf"],["class","box-service-type",4,"ngIf"],[1,"box-service-type",2,"padding-right","0px","padding-left","0px"],[1,"first-text","ml-2","sm:ml-0"],["azt-track-service","quest-header-QjB4b6i1y","class","btn btn-primary w-20","style","vertical-align: middle;",3,"click",4,"ngIf"],["class","btn btn-transparent",3,"matMenuTriggerFor","matTooltip",4,"ngIf"],["azt-track-service","quest-header-HExiRUm87","style","width: 30px","class","btn btn-transparent",3,"matTooltip","click",4,"ngIf"],["style","width: 30px","class","btn btn-transparent",3,"matMenuTriggerFor",4,"ngIf"],["menu","matMenu"],[1,"dropdown-menu","show","relative","w-56"],[1,"dropdown-content"],[4,"ngIf"],["tags","matMenu"],["class","dropdown-menu show relative w-56",4,"ngIf"],[1,"box-service-inp-point"],[1,"first-text","cursor-pointer"],["azt-track-service","quest-header-1hL1VYrnNh",3,"ngClass","click"],[1,"inp-point",3,"ngClass"],[3,"size","ngModel","keyup","focus","focusout","ngModelChange"],["markInput",""],[1,"box-service-attach-files","cursor-pointer"],["azt-track-service","quest-header-i7a1qGxHBu","class","first-text","style","white-space: nowrap;",3,"click",4,"ngIf"],["class","first-text",4,"ngIf"],["type","file","accept","audio/ogg;audio/mpeg;audio/wav",1,"hide",3,"input"],["inpAudioUpload",""],["azt-track-service","quest-header-i7a1qGxHBu",1,"first-text",2,"white-space","nowrap",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","14","height","14","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48"],[1,"first-text"],[1,"name-audio",3,"matTooltip"],["azt-track-service","quest-header-bBZd9Ohvof","class","delete",3,"click",4,"ngIf"],["style","\n            color: #9e9e9e;\n            text-decoration: line-through;",4,"ngIf"],["azt-track-service","quest-header-froZ2p_D33",3,"matTooltip","click",4,"ngIf"],["azt-track-service","quest-header-bUlGyrYcRo",3,"click",4,"ngIf"],["azt-track-service","quest-header-SjZKht1L9l",3,"click",4,"ngIf"],["class","fa fa-spinner fa-spin",4,"ngIf"],["azt-track-service","quest-header-bBZd9Ohvof",1,"delete",3,"click"],[2,"color","#9e9e9e","text-decoration","line-through"],["azt-track-service","quest-header-froZ2p_D33",3,"matTooltip","click"],["azt-track-service","quest-header-bUlGyrYcRo",3,"click"],["azt-track-service","quest-header-SjZKht1L9l",3,"click"],[1,"fa","fa-spinner","fa-spin"],[1,"box-service-type"],[3,"ngModel","disabled"],[3,"value"],[1,"tag-chip",3,"matMenuTriggerFor","removed"],["matChipRemove","",4,"ngIf"],["matChipRemove",""],[2,"font-size","15px"],["azt-track-service","quest-header-QjB4b6i1y",1,"btn","btn-primary","w-20",2,"vertical-align","middle",3,"click"],[1,"btn","btn-transparent",3,"matMenuTriggerFor","matTooltip"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z"],["d","M7 7h.01"],["azt-track-service","quest-header-HExiRUm87",1,"btn","btn-transparent",2,"width","30px",3,"matTooltip","click"],[1,"w-5","h-5","inline-block"],["d","m17 2 4 4-4 4"],["d","M3 11v-1a4 4 0 0 1 4-4h14"],["d","m7 22-4-4 4-4"],["d","M21 13v1a4 4 0 0 1-4 4H3"],["d","M11 10h1v4"],[1,"btn","btn-transparent",2,"width","30px",3,"matMenuTriggerFor"],["cx","12","cy","12","r","1"],["cx","12","cy","5","r","1"],["cx","12","cy","19","r","1"],["azt-track-service","quest-header-NheQ3Js3Ya",1,"dropdown-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-5","lucide","mr-2"],["x1","12","y1","17","x2","12","y2","22"],["d","M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z"],["azt-track-service","quest-header-gKmo4Y1J7u",1,"dropdown-item",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4","lucide","mr-2"],["x","9","y","9","width","13","height","13","rx","2","ry","2"],["d","M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"],["azt-track-service","quest-header-Y1KbHn_mie",1,"dropdown-item",3,"click"],["cx","6","cy","6","r","3"],["cx","6","cy","18","r","3"],["x1","20","y1","4","x2","8.12","y2","15.88"],["x1","14.47","y1","14.48","x2","20","y2","20"],["x1","8.12","y1","8.12","x2","12","y2","12"],["azt-track-service","quest-header-84pgUW5VoW",1,"dropdown-item",3,"click"],["d","M3 6h18"],["d","M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"],["d","M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"],["mat-menu-item","",1,"dropdown-item",3,"matMenuTriggerFor"],["d","M9 5H2v7l6.29 6.29c.94.94 2.48.94 3.42 0l3.58-3.58c.94-.94.94-2.48 0-3.42L9 5Z"],["d","M6 9.01V9"],["d","m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19"],[4,"ngFor","ngForOf"],["azt-track-service","quest-header-6eo6V4JpI2",1,"dropdown-item",3,"click"],[1,"dropdown-divider","border-slate-200","dark:border-darkmode-400"],["azt-track-service","quest-header-RiQa-w8Jwo",1,"dropdown-item","w-full",3,"disabled","click"]],template:function Zt(K,M){if(1&K&&(_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"div",0)(1,"div",1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.NdJ("click",function(){return M.labelClick()}),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(2),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(3,QuestHeaderComponent_div_3_Template,13,17,"div",2),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(4,QuestHeaderComponent_div_4_Template,5,2,"div",3),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(5,QuestHeaderComponent_div_5_Template,12,14,"div",4),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(6,QuestHeaderComponent_div_6_Template,7,5,"div",4),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(7,"div",5)(8,"div",6),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(9,QuestHeaderComponent_button_9_Template,3,3,"button",7),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(10,QuestHeaderComponent_button_10_Template,5,4,"button",8),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(11,QuestHeaderComponent_button_11_Template,9,3,"button",9),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(12,QuestHeaderComponent_button_12_Template,6,1,"button",10),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(13,"mat-menu",null,11)(15,"div",12)(16,"ul",13),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(17,QuestHeaderComponent_li_17_Template,10,8,"li",14),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(18,QuestHeaderComponent_li_18_Template,8,3,"li",14),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(19,QuestHeaderComponent_li_19_Template,11,3,"li",14),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(20,QuestHeaderComponent_li_20_Template,9,3,"li",14),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(21,QuestHeaderComponent_li_21_Template,9,4,"li",14),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()()(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(22,"mat-menu",null,15),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(24,QuestHeaderComponent_div_24_Template,5,3,"div",16),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()()()()),2&K){let D,f,$;_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Oqu(M.q.label),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",M.notOnlyQuestEdit&&!M.similar),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",!M.isMobile&&!M.similar),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",M.showType),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",M.q.tag&&M.q.tag.length>0&&!M.similar),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(3),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",M.similar),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",!(M.q.tag&&0!=M.q.tag.length||M.similar)),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",!M.similar&&M.q.changeable),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",!M.similar),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(5),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",1===M.q.type&&!(null!=M.q.quest.parts[0]&&null!=M.q.quest.parts[0].text&&null!=(D=M.q.quest.parts[0].text.trim())&&D.startsWith("[@"))),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",M.notOnlyQuestEdit),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",M.notOnlyQuestEdit),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",M.notOnlyQuestEdit),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",!(null!=M.q.quest.parts[0]&&null!=M.q.quest.parts[0].text&&null!=(f=M.q.quest.parts[0].text.trim())&&f.startsWith("[@"))),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(3),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",!(null!=M.q.quest.parts[0]&&null!=M.q.quest.parts[0].text&&null!=($=M.q.quest.parts[0].text.trim())&&$.startsWith("[@")))}},dependencies:[_angular_common__WEBPACK_IMPORTED_MODULE_8__.mk,_angular_common__WEBPACK_IMPORTED_MODULE_8__.sg,_angular_common__WEBPACK_IMPORTED_MODULE_8__.O5,_angular_material_core__WEBPACK_IMPORTED_MODULE_9__.ey,_angular_material_chips__WEBPACK_IMPORTED_MODULE_10__.HS,_angular_material_chips__WEBPACK_IMPORTED_MODULE_10__.z2,_angular_material_chips__WEBPACK_IMPORTED_MODULE_10__.qH,_angular_material_icon__WEBPACK_IMPORTED_MODULE_11__.Hw,_angular_material_menu__WEBPACK_IMPORTED_MODULE_12__.VK,_angular_material_menu__WEBPACK_IMPORTED_MODULE_12__.OP,_angular_material_menu__WEBPACK_IMPORTED_MODULE_12__.p6,_angular_material_select__WEBPACK_IMPORTED_MODULE_13__.gD,_angular_material_tooltip__WEBPACK_IMPORTED_MODULE_14__.gM,_angular_forms__WEBPACK_IMPORTED_MODULE_15__.Fj,_angular_forms__WEBPACK_IMPORTED_MODULE_15__.JJ,_angular_forms__WEBPACK_IMPORTED_MODULE_15__.On,_tooltip_controller_component__WEBPACK_IMPORTED_MODULE_4__.S,_w_azota_library_azota_core_pipes_common_pipe__WEBPACK_IMPORTED_MODULE_5__.JV],styles:[".box-service-name[_ngcontent-%COMP%], .box-service-question-name[_ngcontent-%COMP%]{outline:1px solid #ccc;padding:3px 10px!important;border-radius:3px;font-weight:500}.box-service-question-name[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content}.box-service-question[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap}.box-service-question[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child{border-right:none}.box-service-question[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:last-child{border-right:none}.box-service-question[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding:0 10px;cursor:pointer;color:#2462ae;border-right:1px solid #ccc}.box-service-pin-ans[_ngcontent-%COMP%]{cursor:pointer;color:#2462ae}.first-text[_ngcontent-%COMP%]{display:flex;align-items:center;padding:0!important}.first-text[_ngcontent-%COMP%]   marquee[_ngcontent-%COMP%]{width:100px}.first-text[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;margin:0;padding:0;width:100%;display:flex;justify-content:center;align-items:center}.selection[_ngcontent-%COMP%]{border:1.5px solid #2462ae;box-shadow:#00000073 0 25px 20px -20px}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.inp-point[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:space-between;align-items:center}.inp-point[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{text-align:center;padding:5px;border-radius:5px;outline:1px solid #ccc;border:none}.inp-point[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:1px solid #2262ae;box-shadow:#11111a0d 0 1px,#11111a1a 0 0 8px}.inp-point[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-outer-spin-button, .inp-point[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.inp-point[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}.inp-point[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{border-right:none;text-align:left;padding:0 0 0 10px}.hide[_ngcontent-%COMP%]{display:none!important}  .mat-form-field-underline{display:none}.delete[_ngcontent-%COMP%]{color:red}  .mat-select-arrow-wrapper{margin-left:5px}button.menu[_ngcontent-%COMP%]{text-transform:none!important}.tag-chip[_ngcontent-%COMP%]{min-height:20px;font-size:12px}.name-audio[_ngcontent-%COMP%]{max-width:100px;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:1;line-clamp:1}.name-audio[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{padding-right:5px}.no-wrap[_ngcontent-%COMP%]{white-space:nowrap}"]}),QuestHeaderComponent})()},61811:(Zt,K,M)=>{"use strict";M.d(K,{S:()=>w});var D=M(47496),f=M(65879);const $=function(y,C){return{left:y,bottom:C}},O=function(){return{}},m=["*"];let w=(()=>{class y extends D.Q{constructor(){super(...arguments),this.isConfig=!0,this.bottom=-60,this.left=-5}}return y.\u0275fac=function(){let C;return function(E){return(C||(C=f.n5z(y)))(E||y)}}(),y.\u0275cmp=f.Xpm({type:y,selectors:[["common-tooltip"]],inputs:{isConfig:"isConfig",bottom:"bottom",left:"left"},features:[f.qOj],ngContentSelectors:m,decls:3,vars:6,consts:[[1,"qv_tooltip"],[1,"content_tooltip"]],template:function(A,E){1&A&&(f.F$t(),f.TgZ(0,"span",0)(1,"span",1),f.Hsn(2),f.qZA()()),2&A&&f.Akn(E.isConfig?f.WLB(2,$,E.left+"px",E.bottom+"px"):f.DdM(5,O))},styles:['.qv_tooltip[_ngcontent-%COMP%]{white-space:break-spaces;font-size:11px;position:absolute;z-index:999;width:400px;background:#faebd7;padding:5px 10px;border-radius:5px;font-weight:500;color:#000;box-shadow:#091e4240 0 4px 8px -2px,#091e4214 0 0 0 1px}.qv_tooltip[_ngcontent-%COMP%]:before{content:"";position:absolute;top:-6px;left:20px;border-left:10px solid transparent;border-right:10px solid transparent;border-bottom:10px solid #faebd7}']}),y})()},96368:(Zt,K,M)=>{"use strict";M.d(K,{C:()=>w});var D=M(19347),f=M(72164),$=M(65879),O=M(78497),m=M(36727);let w=(()=>{class y extends f.e{btnCloseDialog(){this.dialogRef.close()}constructor(A,E){super(E,A),this.dialogRef=A,this.data=E}}return y.\u0275fac=function(A){return new(A||y)($.Y36(D.so,8),$.Y36(D.WI,8))},y.\u0275cmp=$.Xpm({type:y,selectors:[["azt-dialog-warning"]],features:[$.qOj],decls:17,vars:8,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-0"],[1,"text-md","font-medium","flex","items-center","p-3","pb-0"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-6","h-6","mr-2","text-pending"],["points","7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2"],["x1","12","y1","8","x2","12","y2","12"],["x1","12","y1","16","x2","12.01","y2","16"],[1,"mt-2"],[3,"defaultHeight"],[1,"text-xs","text-slate-500","dark:text-slate-400","p-3","pt-0",3,"innerHtml"],[1,"p-3","text-right"],["azt-track-service","azt-dialog-warning-3FIn9IaXN",1,"btn","w-24","btn-primary",3,"click"]],template:function(A,E){1&A&&($.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),$.O4$(),$.TgZ(4,"svg",4),$._UZ(5,"polygon",5)(6,"line",6)(7,"line",7),$.qZA(),$._uU(8),$.ALo(9,"mytranslate"),$.qZA(),$.kcU(),$.TgZ(10,"div",8)(11,"azt-mat-dialog-content",9),$._UZ(12,"div",10),$.qZA()()()(),$.TgZ(13,"div",11)(14,"button",12),$.NdJ("click",function(){return E.btnCloseDialog()}),$._uU(15),$.ALo(16,"mytranslate"),$.qZA()()()),2&A&&($.xp6(8),$.hij(" ",$.lcZ(9,4,"lang_auto_canh_bao")," "),$.xp6(3),$.Q6J("defaultHeight",60),$.xp6(1),$.Q6J("innerHtml",E.data.content,$.oJD),$.xp6(3),$.hij(" ",$.lcZ(16,6,"lang_auto_dong")," "))},dependencies:[O.R,m.JV],encapsulation:2}),y})()},7516:(Zt,K,M)=>{"use strict";M.d(K,{X:()=>$});var D=M(65879),f=M(46558);let $=(()=>{class O{processDataSchoolAndLevel(w){this.valueSurvey=w.filter(y=>y.schoolLevel?.id).map(y=>({value:y.schoolLevel?.id,desc:this.commonService.myTranslateInstant(y.schoolLevel?.name)})),this.valueSubjectSurvey=Array.from({length:14},(y,C)=>w.find(A=>A.schoolLevel?.id==C)?.schoolSubjectObjs??[])}constructor(w){this.commonService=w,this.valueSurvey=[],this.valueSubjectSurvey=[]}}return O.\u0275fac=function(w){return new(w||O)(D.LFG(f.z))},O.\u0275prov=D.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"}),O})()},28485:Zt=>{"use strict";var M={}.hasOwnProperty,f=/[ -,\.\/:-@\[-\^`\{-~]/,$=/[ -,\.\/:-@\[\]\^`\{-~]/,m=/(^|\\+)?(\\[A-F0-9]{1,6})\x20(?![a-fA-F0-9\x20])/g,w=function y(C,A){A=function(C,A){if(!C)return A;var E={};for(var L in A)E[L]=M.call(C,L)?C[L]:A[L];return E}(A,y.options),"single"!=A.quotes&&"double"!=A.quotes&&(A.quotes="single");for(var E="double"==A.quotes?'"':"'",L=A.isIdentifier,I=C.charAt(0),F="",N=0,Q=C.length;N<Q;){var j=C.charAt(N++),V=j.charCodeAt(),tt=void 0;if(V<32||V>126){if(V>=55296&&V<=56319&&N<Q){var it=C.charCodeAt(N++);56320==(64512&it)?V=((1023&V)<<10)+(1023&it)+65536:N--}tt="\\"+V.toString(16).toUpperCase()+" "}else tt=A.escapeEverything?f.test(j)?"\\"+j:"\\"+V.toString(16).toUpperCase()+" ":/[\t\n\f\r\x0B]/.test(j)?"\\"+V.toString(16).toUpperCase()+" ":"\\"==j||!L&&('"'==j&&E==j||"'"==j&&E==j)||L&&$.test(j)?"\\"+j:j;F+=tt}return L&&(/^-[-\d]/.test(F)?F="\\-"+F.slice(1):/\d/.test(I)&&(F="\\3"+I+" "+F.slice(1))),F=F.replace(m,function(dt,mt,ft){return mt&&mt.length%2?dt:(mt||"")+ft}),!L&&A.wrap?E+F+E:F};w.options={escapeEverything:!1,isIdentifier:!1,quotes:"single",wrap:!1},w.version="3.0.0",Zt.exports=w},87482:(Zt,K,M)=>{var D=M(39698),f=M(78955);function O(y){return null==y}function w(y){(y=function m(y){var C={};for(var A in y)C[A]=y[A];return C}(y||{})).whiteList=y.whiteList||D.whiteList,y.onAttr=y.onAttr||D.onAttr,y.onIgnoreAttr=y.onIgnoreAttr||D.onIgnoreAttr,y.safeAttrValue=y.safeAttrValue||D.safeAttrValue,this.options=y}M(53034),w.prototype.process=function(y){if(!(y=(y=y||"").toString()))return"";var A=this.options,E=A.whiteList,L=A.onAttr,I=A.onIgnoreAttr,F=A.safeAttrValue;return f(y,function(Q,j,V,tt,it){var dt=E[V],mt=!1;if(!0===dt?mt=dt:"function"==typeof dt?mt=dt(tt):dt instanceof RegExp&&(mt=dt.test(tt)),!0!==mt&&(mt=!1),tt=F(V,tt)){var yt,ft={position:j,sourcePosition:Q,source:it,isWhite:mt};if(mt)return O(yt=L(V,tt,ft))?V+":"+tt:yt;if(!O(yt=I(V,tt,ft)))return yt}})},Zt.exports=w},39698:(Zt,K)=>{function M(){return{"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1}}var $=/javascript\s*\:/gim;K.whiteList={"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1},K.getDefaultWhiteList=M,K.onAttr=function D(m,w,y){},K.onIgnoreAttr=function f(m,w,y){},K.safeAttrValue=function O(m,w){return $.test(w)?"":w}},51474:(Zt,K,M)=>{var D=M(39698),f=M(87482);for(var O in(K=Zt.exports=function $(m,w){return new f(w).process(m)}).FilterCSS=f,D)K[O]=D[O];typeof window<"u"&&(window.filterCSS=Zt.exports)},78955:(Zt,K,M)=>{var D=M(53034);Zt.exports=function f($,O){";"!==($=D.trimRight($))[$.length-1]&&($+=";");var m=$.length,w=!1,y=0,C=0,A="";function E(){if(!w){var F=D.trim($.slice(y,C)),N=F.indexOf(":");if(-1!==N){var Q=D.trim(F.slice(0,N)),j=D.trim(F.slice(N+1));if(Q){var V=O(y,A.length,Q,j,F);V&&(A+=V+"; ")}}}y=C+1}for(;C<m;C++){var L=$[C];if("/"===L&&"*"===$[C+1]){var I=$.indexOf("*/",C+2);if(-1===I)break;y=(C=I+1)+1,w=!1}else"("===L?w=!0:")"===L?w=!1:";"===L?w||E():"\n"===L&&E()}return D.trim(A)}},53034:Zt=>{Zt.exports={indexOf:function(K,M){var D,f;if(Array.prototype.indexOf)return K.indexOf(M);for(D=0,f=K.length;D<f;D++)if(K[D]===M)return D;return-1},forEach:function(K,M,D){var f,$;if(Array.prototype.forEach)return K.forEach(M,D);for(f=0,$=K.length;f<$;f++)M.call(D,K[f],f,K)},trim:function(K){return String.prototype.trim?K.trim():K.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(K){return String.prototype.trimRight?K.trimRight():K.replace(/(\s*$)/g,"")}}},73021:(Zt,K,M)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.FileParser=void 0;const D=M(96999),f=M(13649),$=M(21084),O=M(45962);K.FileParser=class m{constructor(){this.services=[],this.conf=""}loadConf(y){this.conf=y}init(){this.registerService(new O.WordService),this.registerService(new f.PdfService),this.registerService(new D.ImageService),this.registerService(new $.TableService)}registerService(y){y.loadConf(this.conf),this.services.push(y)}start(y){return new Promise((C,A)=>{let E=0;for(let L=0;L<this.services.length;L++)this.services[L].start(y).then(F=>{E++,F.supported?C(F):E===this.services.length&&A()})})}loadAllLibs(y){return new Promise(C=>{let A=0;const E=()=>{if(A===y.length)C(!0);else{const L=y[A];if(document.getElementById(L.name))A++,E();else{const F=document.createElement("script");F.setAttribute("src",L.link),F.setAttribute("id",L.name),F.setAttribute("async","false"),F.addEventListener("load",()=>{A++,E()},!1),document.body.appendChild(F)}}};E()})}}},22299:(Zt,K,M)=>{"use strict";K.uD=void 0;const f=M(73021);Object.defineProperty(K,"uD",{enumerable:!0,get:function(){return f.FileParser}});M(17618)},17618:(Zt,K)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.DocxParser=void 0;class M{constructor(){this.arrayBuffer=null,this.numberID=0}start(f){this.wmf||(this.wmf=new WMFConverter),this.file=f}reset(){this.file=void 0,this.arrayBuffer=void 0}load(){return new Promise(f=>{if(this.file){const $=this.file.name.split(".").pop();if("docx"===$?.toLocaleLowerCase()){const O=new FileReader;O.onloadend=()=>{this.arrayBuffer=O.result,f(!0)},O.readAsArrayBuffer(this.file)}else f(!1)}else f(!1)})}toTextLines(){return new Promise((f,$)=>{this.load().then(O=>{if(O){const m=[],w=[];mammoth.convertToMarkdown({arrayBuffer:this.arrayBuffer},{styleMap:["b => ","i => ","u => "]}).then(A=>{A.value.split("\n").forEach(L=>{L.length>0&&(0===L.indexOf("\t")&&(L=L.substring(1)),L=this.convertImageString(L,w),m.push(L.replace(/\t/g,"    ").replace(/\\./g,".")))}),w.forEach(L=>{this.processImageWmf(L)}),f({str:m,maps:w})})}else $({msg:"File kh\xf4ng h\u1ed7 tr\u1ee3."})})})}processImageWmf(f){(f.link.indexOf("image/x-wmf")>=0||f.link.indexOf("image/x-emf")>=0)&&(f.link=this.wmf.toPNG(f.link))}convertImageString(f,$){for(;-1!==f.indexOf(M.IMG_MD_START);){const O="ha"+this.numberID,m=f.indexOf(M.IMG_MD_START),w=f.indexOf(")",m+1),y=f.substring(m+M.IMG_MD_START.length,w);$.push({id:O,link:y}),f=f.substring(0,m)+"[!img:"+O+"]"+f.substring(w+1,f.length),this.numberID++}return f}}K.DocxParser=M,M.IMG_MD_START="![]("},96999:(Zt,K)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.ImageService=void 0,K.ImageService=class M{constructor(){this.conf=""}toBase64(f){return new Promise(($,O)=>{const m=new FileReader;m.onload=()=>{$(m.result)},m.onerror=w=>{O(w)},m.readAsDataURL(f)})}isFileImage(f){return f&&"image"===f.type.split("/")[0]}generateIdRequired(f){let $="";for(let w=0;w<f;w++)$+="abcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(36*Math.random()));return Math.floor(Date.now()/1e3)+$}loadConf(f){this.conf=f}start(f){return new Promise($=>{this.isFileImage(f)?this.toBase64(f).then(O=>{const m="ih"+this.generateIdRequired(3),w={maps:[],str:[]};w.maps.push({id:m,link:O}),w.str.push("[!img:"+m+"]"),$({type:"image",supported:!0,data:w})}).catch(()=>{$({type:"image",supported:!1,data:{str:[],maps:[]}})}):$({type:"image",supported:!1,data:{str:[],maps:[]}})})}}},13649:(Zt,K)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.PdfService=void 0,K.PdfService=class M{constructor(){this.conf=""}isPdfDocument(f){return/^(?:application\/pdf)$/i.test(f.type)}loadConf(f){this.conf=f}start(f){return new Promise($=>{this.isPdfDocument(f)?$({type:"pdf",supported:!0,data:{str:[],maps:[]}}):$({type:"pdf",supported:!1,data:{str:[],maps:[]}})})}cropQuestionContent(f,$){const O=[];let m=Number.MAX_VALUE;return f.answers.forEach(y=>{O.push({label:this.mergeContentCanvas(y.remove,$),content:this.mergeContentsCanvas(y.positions,$),conf:y}),m>y.positions[0].top&&(m=y.positions[0].top)}),f.positions[f.positions.length-1].heigh=m-f.positions[f.positions.length-1].top,{label:this.mergeContentCanvas(f.remove,$),content:this.mergeContentsCanvas(f.positions,$),ans:O,conf:f}}mergeContentsCanvas(f,$){let O=0,m=0,w=[];f.forEach(E=>{const L=this.mergeContentCanvas(E,$);O=L.width,m+=L.height,w.push(L)});const y=document.createElement("canvas");y.width=O,y.height=m;const C=y.getContext("2d");let A=0;return w.forEach(E=>{C?.drawImage(E,0,A,E.width,E.height,0,0,E.width,E.height),A+=E.height}),y}mergeContentCanvas(f,$){const O=$[f.pageIndex].canvas,m=document.createElement("canvas");m.width=f.width,m.height=f.heigh;const w=m.getContext("2d");return w?.drawImage(O,f.left,f.top,f.width,f.heigh,0,0,f.width,f.heigh),m}}},21084:(Zt,K,M)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.TableService=void 0;const D=M(17618);K.TableService=class f{constructor(){this.conf="",this.docxParser=new D.DocxParser}loadConf(O){}start(O){return new Promise(m=>{m("application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"==O.type||"application/vnd.ms-excel"==O.type||".csv"==O.type?{type:"xlsx",supported:!0,data:{str:[],maps:[]}}:{type:"xlsx",supported:!1,data:{str:[],maps:[]}})})}}},45962:(Zt,K,M)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.WordService=void 0;const D=M(17618);K.WordService=class f{constructor(){this.pattern_remove=/<a id="[^"]+"><\/a>/g,this.conf="",this.docxParser=new D.DocxParser}loadConf(O){}start(O){return new Promise(m=>{this.docxParser.start(O),this.docxParser.toTextLines().then(w=>{for(let y=0;y<w.str.length;y++)w.str[y]=w.str[y].replace(this.pattern_remove,"");m({type:"docx",supported:!0,data:w})}).catch(w=>{m({type:"docx",supported:!1,data:{str:[],maps:[]}})})})}}},16930:Zt=>{var w=/[a-z0-9_-]/i,y=/[\s\t]/,A=/[^a-z0-9_-]/i;Zt.exports={parse:function(L){for(var j,V,I=!0,F=0,N="",Q=0,tt=[];;){if(V=L[Q],0===F){if(!V&&I)break;if(!V&&!I)throw new Error("Parse error");if('"'===V||"'"===V)j=V,F=1,I=!1;else if(!y.test(V)){if(!w.test(V))throw new Error("Parse error");F=3,I=!1,Q--}}else if(1===F){if(!V)throw new Error("Parse Error");"\\"===V?F=2:V===j?(tt.push(N),N="",F=4):N+=V}else if(2===F){if(V!==j&&"\\"!==V)throw new Error("Parse error");N+=V,F=1}else if(3===F){if(!V){tt.push(N);break}w.test(V)?N+=V:","===V?(tt.push(N),N="",F=0):y.test(V)?F=5:"\\"===V&&(F=6)}else if(6===F){if(/[0-9a-f]/i.test(V))throw new Error("Parse error");N+=V,F=3}else if(5===F){if(!V){tt.push(N);break}if(w.test(V))N+=" "+V,F=3;else if(","===V)tt.push(N),N="",F=0;else if(!y.test(V))throw new Error("Parse error")}else if(4===F){if(!V)break;if(","===V)F=0;else if(!y.test(V))throw new Error("Parse error")}Q++}return tt},stringify:function(L,I){var F=I&&I.quote||'"';if('"'!==F&&"'"!==F)throw new Error("Quote must be `'` or `\"`");for(var N=new RegExp(F,"g"),Q=[],j=0;j<L.length;++j){var V=L[j];A.test(V)&&(V=F+(V=V.replace(/\\/g,"\\\\").replace(N,"\\"+F))+F),Q.push(V)}return Q.join(", ")}}},8897:(Zt,K)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.Utils=K.CONST=void 0;class M{static load($){let O=JSON.parse($);Object.assign(this,O)}}K.CONST=M,M.RENDER_SCALE=2,M.LINE_SMALL_HEIGHT=7*M.RENDER_SCALE,M.SPLIT_MARGIN=3*M.RENDER_SCALE,M.INTERSEC_MARGIN=20*M.RENDER_SCALE,M.LINE_MAGIN=2*M.RENDER_SCALE,M.MARGIN_LEFT=2*M.RENDER_SCALE,M.ENABLE_IMAGE_PROCESS=!0,M.STEP_SIZE=2,M.CROP_FULL_WIDTH=!0,M.OVERLAP=.5,M.QUESTION_PATTERN=[],M.QUESTION_PATTERN2=[],M.BREAK_LINE_PATTERN=[],M.SECTION_PATTERN_LOWER=[],M.SECTION_PATTERN_NORMAL=[],M.KICK_PATTERN=[],M.TVCN_CHAR=[],M.HET_PATTERN=[],M.DAPAN_PATTERN=[],M.HUONGDAN_PATTERN=[],M.MULTIPLE_ANS_PATTERN=[],M.DRAW_RESULT="",M.SKIP_CHAR=[],M.FOOTER_PATTERN=[],M.HELP_ANS_PATTERN=[],M.RES_ANS_PATTERN=[],K.Utils=class D{static capitalizeFirstLetter($){return $.charAt(0).toUpperCase()+$.slice(1)}static tagLang($){let O=new Map([["EASY","NB"],["MEDIUM","TH"],["HARD","VD"],["HARDEST","VDC"],["MC","TN"],["FB","\u0110T"],["ES","TL"]]);return O.has($)?O.get($):$}static parseInclude($){var O;let m=$.split("=>"),w=m.length>1?m[1]:-1,L=m[0];L=L.replaceAll(/\[@([CTQGK][\-\d]+):(:(user[_0-9]*)\-)?[^\]]*\]/g,"$1:$3").replaceAll(/\[@(F:[^\]]*)\]/g,"$1").replaceAll(/\[[^\]\d]+(\d+)[^\]\d]+\]/g,"$1").replaceAll(/\[[^\]]+\]/g,"");let mt,I=L.split("."),F=[],N=[],Q=[],j=[],V=[],tt=[],it=[],dt=[],ft=[],yt=new Map([["EASY","NB"],["MEDIUM","TH"],["HARD","VD"],["HARDEST","VDC"],["MC","TN"],["FB","\u0110T"],["ES","TL"]]),St=[];for(let he=I.length-1;he>=0;he--){let xe=I[he].trim();if(/^\d*$/.test(xe)){mt=+xe;continue}let tn=xe.split(",");for(let Ce of tn){let We=Ce.split(":"),_e=We[0],mn=null!==(O=We[1])&&void 0!==O?O:"";if(/^G[\-\d]+$/.test(_e.trim()))F.push(+_e.trim().substring(1));else if(/^Q[\-\d]+$/.test(_e.trim()))Q.push(+_e.trim().substring(1)),dt.push(mn),St.push({type:"QUEST",id:+_e.trim().substring(1)});else if(/^C[\-\d]+$/.test(_e.trim())){let ye=+_e.trim().substring(1);j.push(ye),tt.push(mn),St.push({type:""!=mn?"SHARE":"CATEGORY",id:ye})}else if(/^K[\-\d]+$/.test(_e.trim())){let ye=+_e.trim().substring(1);j.push(ye),tt.push(mn),St.push({type:""!=mn?"SHARE":"KNOWLEDGE",id:ye})}else if(/^T[\-\d]+$/.test(_e.trim()))N.push(+_e.trim().substring(1)),it.push(mn),St.push({type:"EXAM",id:+_e.trim().substring(1),groupIds:F});else if(/^F:/.test(Ce.trim())){let ye=Ce.trim().substring(2);ft.push(yt.has(ye)?yt.get(ye):ye)}}if(St.length>0){if(ft.length>0){let Ce=["TL","TN","\u0110T","ES","MC","FB"];for(let We of St)We.tags=ft.filter(_e=>Ce.indexOf(_e)<0),We.answerTypes=ft.filter(_e=>Ce.indexOf(_e)>=0).map(_e=>"TL"==_e||"ES"==_e?3:"TN"==_e||"MC"==_e?1:4)}break}}return Q.length>0&&(mt=Q.length),V.push(...tt),V.push(...it),V.push(...dt),{paths:St,shareTypes:V,catId:j,examId:N,tag:ft,groupId:F,questId:Q,getNum:mt,idx:w}}static getNumberFromStr($){let O=$.match(/(\d+)/);return O?O[0]:""}static removeAccents($){let O=["a\xe0\u1ea3\xe3\xe1\u1ea1\u0103\u1eb1\u1eb3\u1eb5\u1eaf\u1eb7\xe2\u1ea7\u1ea9\u1eab\u1ea5\u1ead","A\xc0\u1ea2\xc3\xc1\u1ea0\u0102\u1eb0\u1eb2\u1eb4\u1eae\u1eb6\xc2\u1ea6\u1ea8\u1eaa\u1ea4\u1eac","d\u0111","D\u0110","e\xe8\u1ebb\u1ebd\xe9\u1eb9\xea\u1ec1\u1ec3\u1ec5\u1ebf\u1ec7","E\xc8\u1eba\u1ebc\xc9\u1eb8\xca\u1ec0\u1ec2\u1ec4\u1ebe\u1ec6","i\xec\u1ec9\u0129\xed\u1ecb","I\xcc\u1ec8\u0128\xcd\u1eca","o\xf2\u1ecf\xf5\xf3\u1ecd\xf4\u1ed3\u1ed5\u1ed7\u1ed1\u1ed9\u01a1\u1edd\u1edf\u1ee1\u1edb\u1ee3","O\xd2\u1ece\xd5\xd3\u1ecc\xd4\u1ed2\u1ed4\u1ed6\u1ed0\u1ed8\u01a0\u1edc\u1ede\u1ee0\u1eda\u1ee2","u\xf9\u1ee7\u0169\xfa\u1ee5\u01b0\u1eeb\u1eed\u1eef\u1ee9\u1ef1","U\xd9\u1ee6\u0168\xda\u1ee4\u01af\u1eea\u1eec\u1eee\u1ee8\u1ef0","y\u1ef3\u1ef7\u1ef9\xfd\u1ef5","Y\u1ef2\u1ef6\u1ef8\xdd\u1ef4"];for(const m of O){let w=new RegExp("["+m.substring(1)+"]","g");$=$.replace(w,m[0])}return $}static zeroPad($,O){return $=$||2,(new Array($).join("0")+O).slice(-1*$)}}},81874:(Zt,K,M)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.ExamParser=void 0;const D=M(8897),f=M(53781),$=M(34143),O=M(13826),m=M(51453),w=M(54716),y=M(7411),C=M(52169),A=M(71598),E=M(60987),L=M(2630),I=M(37805),F=M(2721);K.ExamParser=class N{constructor(j){this.DEF_QUEST_NAME="c\xe2u ",this.lang="vi",D.CONST.load(j)}setLang(j){this.lang=j,this.DEF_QUEST_NAME="vi"==j?"c\xe2u ":"question "}parse(j,V,tt){var it,dt,mt,ft,yt,St,$t,he,xe,tn,Ce,We;let _e=this.findItems(j,tt);console.log("items",_e);let mn=new Map,ye=[],fe=null,Ue=0,Ye="main",Yn=0,Si=0,bn=[],ri=!0,qi=new Map;for(let Mn=0;Mn<_e.length;Mn++){let ln=_e[Mn],pi=Mn==_e.length-1?void 0:_e[Mn+1],xn=this.getPartInfo(j,ln,pi);if(this.loadText(j,xn),ln.type==A.SectionParser.TYPE_NAME&&"main"==Ye&&(Ue++,ye.push({label:Ue,parts:xn,answers:[],isGroup:!0})),ln.type==C.QuestionParser.TYPE_NAME){if(pi&&pi.type==f.AnswerParser.TYPE_NAME&&pi.pos[2]>0){let Kn;for(let _i=Mn+1;_i<_e.length;_i++)if(_e[_i].type!=f.AnswerParser.TYPE_NAME){Kn=_e[_i];break}xn=this.getPartInfo(j,ln,Kn),this.loadText(j,xn)}let ki=ln.label?+ln.label:0,an=mn.get(ki);an&&"main"!=Ye?(an.help=xn,fe=an):"main"==Ye&&(an={label:ki,olabel:ln.olabel,answers:[],parts:xn},Ue>0&&(an.group=Ue),mn.set(ki,an),ye.push(an),fe=an)}if(ln.type==f.AnswerParser.TYPE_NAME&&fe){let ki=!1;if(xn.length>0){let Gn=j[xn[0].lineIdx].replace(/\|/g,"").trim().match(D.CONST.MULTIPLE_ANS_PATTERN.join("|"));null!=Gn&&Gn.length>0&&(ki=!0)}let an=""==ln.olabel;ln.pos[2]>0&&(xn=[xn[0]],xn[0].e=ln.pos[2],this.loadText(j,xn),an=!0);let Kn={label:null!==(it=ln.label)&&void 0!==it?it:"",isCorrect:"*"==ln.extInfo,parts:an?[xn[0]]:xn,isInline:an,olabel:ln.olabel};fe.answers.push(Kn),fe.isFixAns=an||ki}if(ln.type==y.IncludeParser.TYPE_NAME)if(ln.label&&/\.\d*$/.test(ln.label)){let ki=ln.label.split("."),an=+ki[ki.length-1],Kn=null!==(dt=xn[0].text)&&void 0!==dt?dt:"",_i=null!==(mt=qi.get(Kn))&&void 0!==mt?mt:-1;if(_i++,qi.set(Kn,_i),0==an){Ue++;let ho=Kn+"=>"+_i+"-0",po=[];po.push(...xn),po[0]={lineIdx:xn[0].lineIdx,s:0,b:0,text:ho},ye.push({label:Ue,parts:po,answers:[],isGroup:!0});continue}let t=fe?fe.label:0,Gn=0;for(let ho=0;ho<an;ho++){Gn++;let po=Kn+"=>"+_i+"-"+ho,Pi=[];Pi.push(...xn),Pi[0]={lineIdx:xn[0].lineIdx,s:0,b:0,text:po};let Ke={label:t+Gn,olabel:fe?null===(ft=fe.olabel)||void 0===ft?void 0:ft.replace(/\d+/,t+Gn+""):this.DEF_QUEST_NAME+(t+Gn)+".",answers:[],parts:Pi};mn.set(Ke.label,Ke),ye.push(Ke),fe=Ke}}else if(ln.label&&/\.Q\d+(,Q\d+)*$/.test(ln.label)){let an=ln.label.split(".").pop(),Kn=null!==(yt=an?.split(",").length)&&void 0!==yt?yt:0;for(let _i=0;_i<Kn;_i++){let t={lineIdx:xn[0].lineIdx,s:0,b:0,text:xn[0].text+"=>0-"+_i},Gn=fe?fe.label:0,ho={label:Gn+1,olabel:fe?null===(St=fe.olabel)||void 0===St?void 0:St.replace(/\d+/,Gn+1+""):this.DEF_QUEST_NAME+(Gn+1)+".",answers:[],parts:[t]};mn.set(ho.label,ho),ye.push(ho),fe=ho}}ln.type==w.HuongDanParser.TYPE_NAME&&fe&&(xn.splice(0,1),pi&&pi.type==C.QuestionParser.TYPE_NAME&&pi.label&&!mn.has(+pi.label)||!pi||pi.type==A.SectionParser.TYPE_NAME?"main"==Ye&&(fe.help=xn):"main"==Ye&&(Ye="info",Yn=null!==($t=ln.lineIdx)&&void 0!==$t?$t:0),Yn>0&&0==Si&&(Si=null!==(he=ln.lineIdx)&&void 0!==he?he:0)),(ln.type==m.HetParser.TYPE_NAME||ln.type==O.DapAnParser.TYPE_NAME)&&(Ye="info",Yn=null!==(xe=ln.lineIdx)&&void 0!==xe?xe:0),ln.type==$.DapAnChiTietParser.TYPE_NAME&&ri&&bn.push(ln),ln.type!=$.DapAnChiTietParser.TYPE_NAME&&bn.length>0&&(ri=!1)}let to=new $.DapAnChiTietParser,Tl=to.getAnsMC(j,bn),Mr=new Map;if(Yn>0){let Mn=Si>0?j.slice(Yn,Si):j.slice(Yn);Mr=to.getAnsStr(Mn)}for(const Mn of ye){if(Mn.isGroup)continue;let ln=null!==(tn=Tl.get(Mn.label))&&void 0!==tn?tn:"",pi=null!==(Ce=Mr.get(Mn.label))&&void 0!==Ce?Ce:"",xn="";if(Mn.help&&(xn=null!==(We=to.getAnsFromHelp(Mn.help,j))&&void 0!==We?We:""),Mn.answers.length>0){if(0==Mn.answers.filter(an=>an.isCorrect).length){let an=ln;""==an.trim()&&(an=xn),""==an.trim()&&(an=pi);for(const Kn of Mn.answers)/^[A-H,\s]+$/.test(an)&&an.indexOf(Kn.label)>=0&&(Kn.isCorrect=!0)}}else Mn.strAns=pi}return ye}cleanRes(j){for(const V of j){for(let tt=V.parts.length-1;tt>=0;tt--)""==V.parts[tt].text&&V.parts.splice(tt,1);for(const tt of V.answers)for(let it=tt.parts.length-1;it>=0;it--)""==tt.parts[it].text&&tt.parts.splice(it,1);if(V.help)for(let tt=V.help.length-1;tt>=0;tt--)""==V.help[tt].text&&V.help.splice(tt,1)}}getPartInfo(j,V,tt){var it,dt;let mt=null!==(it=V.lineIdx)&&void 0!==it?it:0,ft=null!==(dt=tt?.lineIdx)&&void 0!==dt?dt:j.length-1;if(mt==ft)return tt?[{lineIdx:mt,b:V.pos[0],s:V.pos[1],e:tt?.pos[0]}]:[{lineIdx:mt,b:V.pos[0],s:V.pos[1]}];{let yt=[];yt.push({lineIdx:mt,b:V.pos[0],s:V.pos[1]});for(let St=mt+1;St<ft;St++)yt.push({lineIdx:St,b:0,s:0});if(tt){let St=tt?.pos[0];""!=j[ft].substring(0,St).replace(/\|/g,"").trim()&&yt.push({lineIdx:ft,b:0,s:0,e:St})}else yt.push({lineIdx:ft,b:0,s:0});return yt}}loadText(j,V){for(const tt of V)tt.text=j[tt.lineIdx].substring(tt.s,tt.e)}findItems(j,V){let tt=["remove:q-s-a => 1","remove:s-s => 0","remove:h-h => 0","remove:h-a => 0","rmdup:a-a => void","remove:q-a:\\d+\\-[^A] => 0","remove:s-a:.+\\-[^A] => 0","remove:a-a:A\\-[^B] => 0","remove:a-a:B\\-[^C] => 0","remove:a-a:C\\-[^D] => 0","remove:a-a:D\\-[^E] => 0","remove:a-a:E\\-[^F] => 0","same:a: => void","same:q:QUESTION_PATTERN,QUESTION_PATTERN2 => void"];V&&(tt=["remove:q-s-a => 1","remove:s-s => 0","remove:h-h => 0","remove:h-a => 0","remove:q-a:\\d+\\-[^A] => 0","remove:s-a:.+\\-[^A] => 0","remove:a-a:A\\-[^AB] => 0","remove:a-a:B\\-[^ABCD] => 0","remove:a-a:C\\-[^ACDE] => 0","remove:a-a:D\\-[^ADEF] => 0","remove:a-a:E\\-[^AEF] => 0","same:a: => void","same:q:QUESTION_PATTERN,QUESTION_PATTERN2 => void"]);let it=[new I.RemoveRule,new E.ModifyAnsRule,new F.SameKindRule,new L.RemoveDupRule],dt=[{parser:new $.DapAnChiTietParser,also:[2]},{parser:new A.SectionParser,from:[0],to:[1],also:[3]},{parser:new C.QuestionParser,from:[0],to:[1],also:[3]},{parser:new f.AnswerParser},{parser:new m.HetParser,to:[2]},{parser:new O.DapAnParser,to:[2],also:[6]},{parser:new w.HuongDanParser},{parser:new y.IncludeParser,from:[0],to:[1]}],mt=[{name:"start",expect:[1,2,7]},{name:"main",expect:[1,2,3,4,5,6,7]},{name:"info",expect:[0,1,2,6]}],ft=mt[0],yt=[],St=0;for(const xe of j)if(""!=xe){for(const tn of ft.expect){let Ce=dt[tn],We=Ce.parser.parse(xe);if(We.length>0){if(We.forEach(_e=>_e.lineIdx=St),yt.push(...We),Ce.parser.TYPE==w.HuongDanParser.TYPE_NAME){let _e=yt.filter(fe=>fe.type==C.QuestionParser.TYPE_NAME).length,mn=yt.filter(fe=>fe.type==w.HuongDanParser.TYPE_NAME).length,ye=yt.filter(fe=>fe.type==O.DapAnParser.TYPE_NAME).length;if(ft.name==mt[1].name&&_e>1&&0==mn){ft=mt[2];let fe=mt[2].expect.indexOf(6);fe>=0&&mt[2].expect.splice(fe,1)}else if(ft.name==mt[2].name){ye>0&&dt[0].parser.off();let fe=mt[2].expect.indexOf(6);fe>=0&&mt[2].expect.splice(fe,1)}}if(Ce.to){let _e=0;for(const mn of Ce.to)(Ce.from&&mt[Ce.from[_e]]==ft||!Ce.from)&&(ft=mt[mn]),_e++}if(Ce.also)for(const _e of Ce.also){let ye=yt[yt.length-1].pos[1],fe=dt[_e].parser.parse(xe.substring(ye));fe.length>0&&(fe.forEach(Ue=>{Ue.lineIdx=St;for(let Ye=0;Ye<Ue.pos.length;Ye++)Ue.pos[Ye]=Ue.pos[Ye]+ye}),yt.push(...fe))}break}}St++}else St++;let $t=[];for(const xe of tt)for(const tn of it){let Ce=tn.load(xe);if(Ce){$t.push(Ce);break}}let he=0;for(;he<yt.length;){for(const xe of $t){let tn=yt.length;if(xe.run(yt,he)){let Ce=tn-yt.length;Ce>0&&(he-=Ce+1);break}}he++}return yt}}},99737:(Zt,K)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.EditorApiService=void 0,K.EditorApiService=class M{}},71834:(Zt,K,M)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.ExamIntellisense=void 0;const D=M(81874),f=M(7394),$=M(74375),O=M(50270),m=M(96701),w=M(65344),y=M(30549);K.ExamIntellisense=class C{constructor(E){this.conf=E,this._lstQuest=[],this._lines=[],this.singleMode=!1,this.exParser=new D.ExamParser(E),this.apiService=null}setSingleMode(E){this.singleMode=E}setLines(E){this._lines=E}setApiService(E){this.apiService=E}parse(E){return this._lstQuest=this.exParser.parse(this._lines,E,!1),this._lstQuest}getAutofillValue(E,L,I){var F;if(0==this._lstQuest.length)return[];if(/^\[?\s*@/.test(this._lines[E].trim()))return[];let Q=[],j=this.getCurPos(E,L),V=j[0],tt=j[1],it=j[2],dt=this._lines[E>0?E-1:0];if(V&&V.parts.length>0&&null!==(F=V.parts[0].text)&&void 0!==F&&F.trim().startsWith("[@"),dt.startsWith("[@")||""==dt.trim())return[];if(tt&&V){let mt="ABCDEFGHIJKLMN",ft=mt.indexOf(tt.label),yt=mt[ft+1]+tt.olabel+" ",St=tt.label+tt.olabel+" ";if(!this.singleMode&&this._lines[tt.parts[0].lineIdx].trim()==St.trim()&&tt.parts[0].lineIdx!=E){let $t=V.parts[0],xe=this._lines[$t.lineIdx].substring($t.b,$t.s).replace(/\d+/,V.label+1+"")+" ";return Q.push(`${tt.parts[0].lineIdx}|0|${St.length}|`),Q.push(`${E}|${L}|${L}|${xe}`),Q}if(tt.label<"D"&&("enter"!=I||E>0&&""!=this._lines[E-1].trim()&&tt.parts[0].lineIdx!=E))return Q.push(`${E}|${L}|${L}|${yt}`),Q;if(!this.singleMode&&tt.label>="D"&&tt.parts[0].lineIdx!=E&&"enter"==I&&E==this._lines.length-1){let $t=V.parts[0],xe=this._lines[$t.lineIdx].substring($t.b,$t.s).replace(/\d+/,V.label+1+"")+" ";return Q.push(`${E}|${L}|${L}|\n${xe}`),Q}}if(!tt&&!it&&V&&"enter"==I&&""==this._lines[E].trim()&&E>0&&""!=this._lines[E-1].trim()){let mt=V.parts[0],ft=this._lines[mt.lineIdx].substring(mt.s).trim();if(this.singleMode||""!=ft)if(0==V.answers.length)Q.push(`${E}|${L}|${L}|A. `);else if(!this.singleMode){let yt=V.parts[0],$t=this._lines[yt.lineIdx].substring(yt.b,yt.s).replace(/\d+/,V.label+1+"")+" ";Q.push(`${E}|${L}|${L}|${$t}`)}return Q}return Q}getSuggestions(E,L,I,F){return new Promise(N=>{var Q,j;let V=null!==(Q=F?.substring(0,L))&&void 0!==Q?Q:"",tt=this.singleMode?[new f.AnsSugg,new O.EndSugg,new $.ChooseSugg]:[new m.IncludeSugg(this.apiService,N),new w.QuestSugg,new f.AnsSugg,new y.SectionSugg,new O.EndSugg,new $.ChooseSugg],it=[],dt=this.getCurPos(E,L),mt=dt[0],ft=dt[1],$t=mt?{type:dt[2]?"h":ft?"a":"q",quest:mt,ansLabel:ft?ft.label:void 0,secLabel:mt.group?null===(j=this._lstQuest.filter(he=>he.isGroup).pop())||void 0===j?void 0:j.parts[0].text:void 0,lineIdx:E,col:L}:void 0;for(let he of tt){let xe=he.run(V,I,$t);if(1==xe.length&&"-1"==xe[0])return;it.push(...xe)}N(it)})}getEditHint(){let L=0,I=[],F=!1;for(const N of this._lstQuest){if(N.isGroup)continue;let Q="",j="A".charCodeAt(0)-1,V=!1;for(const tt of N.answers){if(""==tt.olabel)break;if(Q+=tt.label,!V&&!"ABCDEFGHIJKLMN".startsWith(Q)&&(V=!0),j++,V){let it=tt.parts[0],dt="*"==this._lines[it.lineIdx].substring(it.b,it.b+1)?1:0;I.push(`${it.lineIdx}|${it.b+dt}|${it.b+dt+1}|${String.fromCharCode(j)}`)}}if(!F&&N.label-L<=0&&L>0&&(F=!0),F){let tt=N.parts[0],dt=this._lines[tt.lineIdx].substring(tt.b,tt.s).replace(/\d+/,L+1+"");I.push(`${tt.lineIdx}|${tt.b}|${tt.s}|${dt}`),L++}else L=N.label}return I}getCurPos(E,L){var I,F;let N=!1,Q=null,j=null,V=!1,tt=!1;for(const it of this._lstQuest)if(!it.isGroup){for(const dt of it.parts)if(dt.lineIdx==E){N=!0,Q=it,j=null,it.parts.length>0&&null!==(I=it.parts[0].text)&&void 0!==I&&I.trim().startsWith("[@")&&(tt=!0,N=!1);break}if(tt&&it.parts.length>0&&(null===(F=it.parts[0].text)||void 0===F||!F.trim().startsWith("[@")))break;for(const dt of it.answers)for(const mt of dt.parts)if(mt.lineIdx==E&&mt.s<=L&&(!mt.e||mt.e>=L)){N=!0,Q=it,j=dt;break}if(N)break;if(it.help)for(const dt of it.help)if(dt.lineIdx==E&&dt.s<=L&&(!dt.e||dt.e>=L)){N=!0,Q=it,j=null,V=!0;break}if(N)break}return[Q,j,V]}}},7394:(Zt,K,M)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.AnsSugg=void 0;const D=M(47078);K.AnsSugg=class f extends D.Sugg{run(O,m,w){if(!w||"h"==w.type||/^\[?\s*@/.test(O))return[];let y=w.ansLabel?String.fromCharCode(w.ansLabel.charCodeAt(0)+1)+".":"A.";return[y+"|"+y+" "]}}},74375:(Zt,K,M)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.ChooseSugg=void 0;const D=M(47078);K.ChooseSugg=class f extends D.Sugg{run(O,m,w){if(O!=m||!w)return[];let y=[];if("h"==w.type&&w.quest)for(let C of w.quest.answers)y.push(`azt_lang_sugg_choose ${C.label}|azt_lang_sugg_choose ${C.label}`);return y}}},50270:(Zt,K,M)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.EndSugg=void 0;const D=M(47078);K.EndSugg=class f extends D.Sugg{run(O,m){return O!=m?[]:["azt_lang_sugg_help_unsign|azt_lang_sugg_help\n","azt_lang_sugg_help|azt_lang_sugg_help\n","azt_lang_sugg_ans_table_unsign|azt_lang_sugg_ans_table_upper\n","azt_lang_sugg_ans_table|azt_lang_sugg_ans_table_upper\n","azt_lang_sugg_the_end_short_unsign|azt_lang_sugg_the_end\n","azt_lang_sugg_the_end_short|azt_lang_sugg_the_end\n","azt_lang_sugg_instruction_unsign|azt_lang_sugg_instruction\n","azt_lang_sugg_instruction|azt_lang_sugg_instruction\n"]}}},96701:(Zt,K,M)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.IncludeSugg=void 0;const D=M(8897),f=M(47078);K.IncludeSugg=class $ extends f.Sugg{constructor(m,w){super(),this.apiService=m,this.resolve=w}run(m){let w=m;if(w.startsWith("@[")&&(w=w.substring(1)),/^\[?\s*@/.test(w)&&null!=this.apiService){let y=w.replace("]..","].").split("].").map(tt=>tt.replace("]","").replace("[","").replace("@","").trim()),C=y[y.length-1],A=0,E=!0,L="azt_lang_sugg_random x azt_lang_sugg_question|[azt_lang_sugg_random ${1:2} azt_lang_sugg_question]|snippet",I="azt_lang_sugg_get_all|[ALL]|snippet",F=["azt_lang_sugg_filter: azt_lang_sugg_level azt_lang_sugg_level_easy|[@F:azt_lang_tag_NB].|snippet","azt_lang_sugg_filter: azt_lang_sugg_level azt_lang_sugg_level_medium|[@F:azt_lang_tag_TH].|snippet","azt_lang_sugg_filter: azt_lang_sugg_level azt_lang_sugg_level_hard|[@F:azt_lang_tag_VD].|snippet","azt_lang_sugg_filter: azt_lang_sugg_level azt_lang_sugg_level_hardest|[@F:azt_lang_tag_VDC].|snippet","azt_lang_sugg_filter: azt_lang_sugg_type azt_lang_sugg_type_multiple_choice|[@F:azt_lang_tag_TN].|snippet","azt_lang_sugg_filter: azt_lang_sugg_type azt_lang_sugg_type_fill_blank|[@F:azt_lang_tag_DT].|snippet","azt_lang_sugg_filter: azt_lang_sugg_type azt_lang_sugg_type_essay|[@F:azt_lang_tag_TL].|snippet"],N="",Q="",V=w.matchAll(/\[@C(\d+)::user\-[^\]]*\]/g);for(;;){let tt=V.next();if(tt.done)break;Q="user_"+tt.value[1]}if(y.length>1){C.endsWith(",")&&/^([CTGQH][\-\d]+|F):/.test(C)&&(N=C.substring(0,1),C="");let tt=y[y.length-2];if(tt.startsWith("F:"))return this.resolve([L]),["-1"];if(tt.indexOf(",")>=0){let it=[];return""==N&&it.push(L),it.push(...F),this.resolve(it),["-1"]}if(C.trim().length>0&&!/^[CTGQH][\-\d]+:/.test(C))return this.resolve([]),["-1"];if(!/^[CTGQH][\-\d]+:/.test(tt))return this.resolve([]),["-1"];if(/^C[\-\d]+:/.test(tt)&&(A=+tt.split(":")[0].trim().substring(1),/^C[\-\d]+::user\-/.test(tt)&&(Q="user")),/^T[\-\d]+:/.test(tt)&&(A=+tt.split(":")[0].trim().substring(1),E=!1),/^G[\-\d]+:/.test(tt)){let it=tt.split(":")[1].split("-")[0];return this.resolve(["azt_lang_sugg_get_group_title|[azt_lang_sugg_get_title]|snippet",`azt_lang_sugg_get_all|[azt_lang_sugg_get_title]\n${w}[azt_lang_sugg_get_all ${it} azt_lang_sugg_question]|snippet`,`azt_lang_sugg_random x azt_lang_sugg_question|${"[azt_lang_sugg_get_title]\n"+w+"[azt_lang_sugg_random ${1:2} azt_lang_sugg_question]"}|snippet`]),["-1"]}if(/^Q[\-\d]+:/.test(tt)||/^Q[\-\d]+:/.test(C))return this.resolve([]),["-1"];if(/^H[\-\d]+:/.test(tt)||/^Q[\-\d]+:/.test(C))return this.resolve([]),["-1"]}if(E)return"F"==N?(this.resolve(F),["-1"]):(this.apiService.searchRes(Q,A).then(tt=>{let it="";-1==A&&(it=":user-"),(0==A||-1==A)&&(L="");let dt=tt.map(mt=>{let ft=mt.name;return ft=ft.replaceAll(/[\[\],\.\-]+/g,""),`${ft}|[@${("cat"==mt.type?"C":"T")+mt.id}:${it}${ft}].|${"cat"==mt.type?"folder":"file"}`});""!=L&&""==N&&(dt.push(L),dt.push(...F)),this.resolve(dt)}),["-1"]);if(w.endsWith(".")||w.endsWith(",")){let tt=Math.abs(A);return this.apiService.getQuestion(tt).then(it=>{let dt=it.map(yt=>{let St=("group"==yt.type?"azt_lang_sugg_group_cc ":"azt_lang_sugg_question_cc ")+yt.label,$t=("group"==yt.type?"G":"Q")+yt.id,he="group"==yt.type?".":"",xe=yt.content,tn="group"==yt.type?"class":"function",Ce="group"==yt.type?it.filter(ye=>ye.groupId==yt.id).length+"-":"",We="group"!=yt.type&&yt.groupId?"G"+D.Utils.zeroPad(3,yt.groupId):"G000";return"group"==yt.type&&(We="G"+D.Utils.zeroPad(3,yt.id)),{name:St,code:$t,groupQnum:Ce,posfix:he,icon:tn,sort:`${We}-${"group"==yt.type?"G"+D.Utils.zeroPad(3,yt.id):"Q"+D.Utils.zeroPad(10,yt.id)}`,doc:xe}});dt.sort((yt,St)=>yt.sort>St.sort?1:-1);let mt=dt.map(yt=>`${yt.name}|[@${yt.code}:${yt.groupQnum}${yt.name}]${yt.posfix}|${yt.icon}|${yt.sort}|${yt.doc}`),ft=[];if(""!=L){""==N&&(ft.push(L),ft.push(...F));let yt=I.split("|");yt[1]=dt.map((St,$t)=>(0==$t?"":w)+`[@${St.code}:${St.groupQnum}${St.name}]`+(St.code.startsWith("G")?".[azt_lang_sugg_get_title]":"")).join("\n"),ft.push(yt.join("|"))}ft.push(...mt),"F"==N&&(ft=F),this.resolve(ft)}),["-1"]}return this.resolve([]),["-1"]}return[]}}},65344:(Zt,K,M)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.QuestSugg=void 0;const D=M(8897),f=M(47078);K.QuestSugg=class $ extends f.Sugg{run(m,w,y){var C;if(m!=w)return[];if(!y)return["azt_lang_sugg_question_cc 1. |azt_lang_sugg_question_cc 1. ","azt_lang_sugg_question_cc_unsign 1. |azt_lang_sugg_question_cc 1. ","Question 1. |Question 1. "];let A=null!==(C=y.quest.olabel)&&void 0!==C?C:"azt_lang_sugg_question_cc 1.",E=+D.Utils.getNumberFromStr(A),L=A.replace(/\d+/,E+1+"");return L=y.quest.olabel?D.Utils.capitalizeFirstLetter(L):L,[D.Utils.removeAccents(L)+"|"+L+" ",L+"|"+L+" "]}}},30549:(Zt,K,M)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.SectionSugg=K.toArabic=K.isRoman=K.toRoman=K.BaseNumbers=K.RomanNumber=void 0;const D=M(8897),f=M(47078);class ${constructor(A,E){this.baseUnits=0,this.thousands=0,this.num=A,this.str=E}}function O(C){let A,E;if(C<=0||C>3999)return"";{A=0;let L="";for(C=Math.floor(C);C>0;)E=K.BaseNumbers[A],0===Math.floor(C/E.num)?++A:(L+=E.str,C-=E.num);return L}}function m(C){return/^M{0,4}(CM|CD|D?C{0,3})(XC|XL|L?X{0,3})(IX|IV|V?I{0,3})$/.test(C)}function w(C){let A=C.toUpperCase();if(!m(A))return null;let E=0,L=0;for(;A.length>0&&L<K.BaseNumbers.length;){const I=K.BaseNumbers[L];A.startsWith(I.str)?(E+=I.num,A=A.substring(I.str.length)):L++}return A.length>0?null:E}K.RomanNumber=$,K.BaseNumbers=[new $(1e3,"M"),new $(900,"CM"),new $(500,"D"),new $(400,"CD"),new $(100,"C"),new $(90,"XC"),new $(50,"L"),new $(40,"XL"),new $(10,"X"),new $(9,"IX"),new $(5,"V"),new $(4,"IV"),new $(1,"I")],K.toRoman=O,K.isRoman=m,K.toArabic=w,K.SectionSugg=class y extends f.Sugg{run(A,E,L){var I,F;if(A!=E)return[];if(!L)return["azt_lang_sugg_part_cc 1. |azt_lang_sugg_part_cc 1. ","azt_lang_sugg_part_cc_unsign 1. |azt_lang_sugg_part_cc 1. ","Part 1. |Part 1. "];if("h"==L.type||!L.secLabel)return[];let N="";if(/^(ph\u1ea7n|part)\s*\d+\./.test(L.secLabel.toLowerCase())){let Q=L.secLabel.split("."),j=+D.Utils.getNumberFromStr(Q[0]);N=Q[0].replace(/\d+/,j+1+".")}else if(/^(ph\u1ea7n|part)\s+[ivx]+\./.test(L.secLabel.toLowerCase())){let j=L.secLabel.split(".")[0].split(" "),tt=O((null!==(I=w(j.pop()))&&void 0!==I?I:0)+1);j.push(tt),N=j.join(" ")+"."}else/^[ivx]+\./.test(L.secLabel.toLowerCase())&&(N=O((null!==(F=w(L.secLabel.split(".")[0]))&&void 0!==F?F:0)+1)+".");return[D.Utils.removeAccents(N)+"|"+N+" ",N+"|"+N+" "]}}},47078:(Zt,K)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.Sugg=void 0,K.Sugg=class M{constructor(){this.lang="vi"}setLang(f){this.lang=f}}},69623:function(Zt,K,M){"use strict";var D=this&&this.__createBinding||(Object.create?function($,O,m,w){void 0===w&&(w=m);var y=Object.getOwnPropertyDescriptor(O,m);(!y||("get"in y?!O.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return O[m]}}),Object.defineProperty($,w,y)}:function($,O,m,w){void 0===w&&(w=m),$[w]=O[m]}),f=this&&this.__exportStar||function($,O){for(var m in $)"default"!==m&&!Object.prototype.hasOwnProperty.call(O,m)&&D(O,$,m)};Object.defineProperty(K,"__esModule",{value:!0}),f(M(71834),K),f(M(99737),K),f(M(81874),K),f(M(99422),K),f(M(8897),K)},37274:(Zt,K,M)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.CanvasUtil=void 0;const D=M(8897);class f{static drawPoint(O,m,w){null!=O&&(O.fillStyle=m,O.beginPath(),O.arc(w.left,w.top,5,0,2*Math.PI),O.fill())}static drawBox(O,m,w,y){null!=O&&(y?(O.fillStyle=m,O.beginPath(),O.rect(w.left,w.top,w.width,w.heigh),O.fill()):(O.strokeStyle=m,O.beginPath(),O.rect(w.left,w.top,w.width,w.heigh),O.stroke()))}static drawBox2(O,m,w,y,C){null!=O&&(O.strokeStyle=m,O.beginPath(),O.rect(C[4],C[5],w,y),O.stroke())}static drawLine(O,m,w,y){null!=O&&(O.strokeStyle=m,O.beginPath(),O.moveTo(w,y),O.lineTo(O.canvas.width-10,y),O.stroke())}static drawText(O,m,w,y){null!=O&&(O.font="11px Arial",O.fillStyle=m,O.fillText(y,w[4],w[5]))}static isLineIntersec(O,m){let w=O.transform[5]<=m.transform[5]&&m.transform[5]<=O.transform[5]+O.height,y=m.transform[5]<=O.transform[5]&&O.transform[5]<=m.transform[5]+m.height,C=O.transform[4]<=m.transform[4]&&m.transform[4]<=O.transform[4]+O.width+D.CONST.INTERSEC_MARGIN,A=m.transform[4]<=O.transform[4]&&O.transform[4]<=m.transform[4]+m.width+D.CONST.INTERSEC_MARGIN,E=this.isSameLine(O,m);return(w||y)&&(C||A)&&!E}static isLineVIntersec(O,m){return(O.transform[5]<=m.transform[5]&&m.transform[5]<=O.transform[5]+O.height||m.transform[5]<=O.transform[5]&&O.transform[5]<=m.transform[5]+m.height)&&(O.transform[4]<=m.transform[4]&&m.transform[4]<=O.transform[4]+O.width+D.CONST.INTERSEC_MARGIN||m.transform[4]<=O.transform[4]&&O.transform[4]<=m.transform[4]+m.width+D.CONST.INTERSEC_MARGIN)&&Math.abs(m.transform[4]-O.transform[4])>D.CONST.INTERSEC_MARGIN/2}static isSameLine(O,m){return Math.abs(O.transform[5]+O.height-(m.transform[5]+m.height))<=D.CONST.LINE_MAGIN}static isObjIntersec(O,m){return O.transform[5]<=m.transform[5]&&m.transform[5]<=O.transform[5]+O.height||m.transform[5]<=O.transform[5]&&O.transform[5]<=m.transform[5]+m.height}static isObjFullIntersec(O,m){return(O.transform[5]<=m.transform[5]&&m.transform[5]<=O.transform[5]+O.height||m.transform[5]<=O.transform[5]&&O.transform[5]<=m.transform[5]+m.height)&&(O.transform[4]<=m.transform[4]&&m.transform[4]<=O.transform[4]+O.width||m.transform[4]<=O.transform[4]&&O.transform[4]<=m.transform[4]+m.width)}static isFirstLineOfPage(O,m){return!(O<0||O>=m.length||0!=O&&m[O-1].pageIndex==m[O].pageIndex)}static isLastLineOfPage(O,m){return!(O<0||O>=m.length||O!=m.length-1&&m[O+1].pageIndex==m[O].pageIndex)}static getTopLine(O,m,w){let y=w[m],C=[[D.CONST.STEP_SIZE,D.CONST.OVERLAP],[1,D.CONST.OVERLAP],[1,.3]];for(const A of C){let E=A[0],L=A[1],I=y.transform[5],F=0,N=3*E;if(!f.isFirstLineOfPage(m,w)){let j=f.isSameLine(w[m-1],y);f.isLineIntersec(w[m-1],y)?(I=w[m-1].transform[5]+w[m-1].height,F=w[m-1].transform[5],w[m-1].transform[4]>w[m].transform[4]+2*D.CONST.MARGIN_LEFT?F-=2*D.CONST.MARGIN_LEFT:F+=w[m-1].height*L,E=1,N=w[m].transform[5]+w[m].height/2-I):(F=j&&m-2>=0?w[m-2].transform[5]+w[m-2].height*L:w[m-1].transform[5]+w[m-1].height*L,j&&f.isFirstLineOfPage(m-1,w)&&(F=0))}if(!D.CONST.ENABLE_IMAGE_PROCESS)return[I,0];let Q=!1;for(;I>F;){if(!f.hasColor(O,y.transform[4],I,y.width,E))return[I,0];Q||(Q=!0,I+=N),I-=E}}return[y.transform[5],1]}static arrContains(O,m){for(const w of m)if(w==O)return!0;return!1}static getBottomLine(O,m,w){let y=w[m],C=[[D.CONST.STEP_SIZE,D.CONST.OVERLAP],[1,D.CONST.OVERLAP],[1,.3]];for(const A of C){let E=A[0],L=A[1],I=y.transform[5]+y.height,F=9999,N=3*E;if(!f.isLastLineOfPage(m,w)){let j=f.isSameLine(w[m+1],y);f.isLineIntersec(w[m+1],y)?(I=w[m+1].transform[5],F=w[m+1].transform[5]+w[m+1].height,w[m+1].transform[4]>w[m].transform[4]+2*D.CONST.MARGIN_LEFT?F+=2*D.CONST.MARGIN_LEFT:F-=w[m+1].height*L,N=w[m].transform[5]+w[m].height/2-I):(F=j&&m+2<w.length?w[m+2].transform[5]+w[m+2].height-w[m+2].height*L:w[m+1].transform[5]+w[m+1].height-w[m+1].height*L,j&&f.isLastLineOfPage(m+1,w)&&(F=9999));let V=w[m+1].top;if(V&&I>=V&&!j)return[V,0]}if(!D.CONST.ENABLE_IMAGE_PROCESS)return[I,0];let Q=!1;for(;I<F;){if(!f.hasColor(O,y.transform[4],I,y.width,E))return[I,0];Q||(Q=!0,I-=N),I+=E}}return[y.transform[5]+y.height,1]}static hasColor(O,m,w,y,C){let A=Math.round(m),E=Math.round(A+y),L=Math.round(w),I=Math.round(L+C);for(let V=L;V<I;V++)for(let tt=A;tt<E;tt++){let it=4*(V*O.width+tt);if((O.data[it]+O.data[it+1]+O.data[it+2])/3<150)return!0}return!1}static calIndexPos2(O,m,w,y,C){let A=[],E=0,L=0,I=0,F=0,N=0,Q=0,j=!0,V=!0;for(const mt of O){V=this.isObjIntersec(O[0],mt),F=mt.transform[4],C||(E+=F-I>D.CONST.SPLIT_MARGIN&&""!=mt.str.trim()||N!=mt.transform[5]?1:0),j=F+2*D.CONST.MARGIN_LEFT>=I;let ft=mt.transform[4]+mt.width;if(V&&(I=ft),ft>L&&V&&(L=ft),E+=mt.str.length,E>y&&j&&V){mt.transform.forEach(he=>{A.push(he)}),A[3]=mt.height,A[2]=Q,A[1]=mt.str.length-E+y;let yt=mt.str.substr(0,mt.str.length-E+y+1);if(yt.length==mt.str.length){A[4]=A[4]+mt.width;break}var it=m[mt.fontName].fontFamily,dt=Math.hypot(mt.transform[2],mt.transform[3]);w.font=`${dt}px ${it}`;let St=w.measureText(yt).width,$t=w.measureText(mt.str).width;A[4]=A[4]+mt.width*St/$t;break}V&&(N=mt.transform[5]),Q++}return 0==A.length&&(A=[0,O[O.length-1].length-1,O.length-1,O[0].height,L,O[0].transform[5]]),A}static calIndexPos(O,m,w,y,C){let A=[],E=0,L=0,I=0,F=0,N=0,Q=0,j=!0,V=!0,tt="";for(const ft of O){V=this.isObjIntersec(O[0],ft),F=ft.transform[4],C||(E+=F-I>D.CONST.SPLIT_MARGIN&&""!=ft.str.trim()||N!=ft.transform[5]?1:0,tt+=(F-I>D.CONST.SPLIT_MARGIN&&""!=ft.str.trim()||N!=ft.transform[5]?"|":"")+ft.str),j=F+2*D.CONST.MARGIN_LEFT>=I;let yt=ft.transform[4]+ft.width;if(V&&(I=yt),yt>L&&V&&(L=yt),E+=ft.str.length,E>y&&j&&V){let St=ft.str.substr(0,ft.str.length-E+y);var dt=m[ft.fontName].fontFamily,mt=Math.hypot(ft.transform[2],ft.transform[3]);w.font=`${mt}px ${dt}`;let $t=w.measureText(St).width,he=w.measureText(ft.str).width;ft.transform.forEach(xe=>{A.push(xe)}),A[4]=A[4]+ft.width*$t/he,A[3]=ft.height,A[2]=Q,A[1]=ft.str.length-E+y;break}V&&(N=ft.transform[5]),Q++}return 0==A.length&&(A=[0,O[O.length-1].length-1,O.length-1,O[0].height,L,O[0].transform[5]]),A}static getTextBottom(O,m,w,y){let C=Math.atan2(O[1],O[0]);m.vertical&&(C+=Math.PI/2);const A=Math.hypot(O[2],O[3]),E=A*f.getAscent(m.fontFamily,w,y);let L=O[5],I=0;I=0===C?E:E*Math.cos(C);let F=0*I;return L=O[5]-I-F,[L,A+F]}static getAscent(O,m,w){const A=w.get(O);if(A)return A;m.save(),m.font=`30px ${O}`;const E=m.measureText("");let L=E.fontBoundingBoxAscent,I=Math.abs(E.fontBoundingBoxDescent);if(L){m.restore();const N=L/(L+I);return w.set(O,N),N}m.strokeStyle="red",m.clearRect(0,0,30,30),m.strokeText("g",0,0);let F=m.getImageData(0,0,30,30).data;I=0;for(let N=F.length-1-3;N>=0;N-=4)if(F[N]>0){I=Math.ceil(N/4/30);break}m.clearRect(0,0,30,30),m.strokeText("A",0,30),F=m.getImageData(0,0,30,30).data,L=0;for(let N=0,Q=F.length;N<Q;N+=4)if(F[N]>0){L=30-Math.floor(N/4/30);break}if(m.restore(),L){const N=L/(L+I);return w.set(O,N),N}return w.set(O,.8),.8}static getMaxLineRight(O,m){let w=0;for(const y of m)if(y.pageIndex==O||-1==O){let C=y.transform[4]+y.width;C>w&&(w=C)}return w}static getMinLineLeft(O,m){let w=99999;for(const y of m)if(y.pageIndex==O||-1==O){let C=y.transform[4];C<w&&(w=C)}return w}}K.CanvasUtil=f},55072:(Zt,K,M)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.PdfUtils=void 0;const D=M(8897),f=M(37274);class ${constructor(){let m=document.createElement("canvas");this.tempCanvas=m.getContext("2d"),this.ascentCache=new Map,this.imageCache=[]}loadPdf(m,w){let C={url:URL.createObjectURL(m),cMapPacked:!0,cMapUrl:"/assets/js/pdf-js-v2/cmaps/",disableAutoFetch:!1,disableFontFace:!1,disableRange:!1,disableStream:!1,docBaseUrl:"",enableXfa:!0,fontExtraProperties:!1,isEvalSupported:!0,maxImageSize:-1,pdfBug:!1,standardFontDataUrl:"/assets/js/pdf-js-v2/standard_fonts/",verbosity:1};const A=pdfjsLib.getDocument(C);let E=[],L=this;A.promise.then(function(I){L.optionalContentConfigPromise=I.getOptionalContentConfig();let F=I._pdfInfo.numPages;for(let N=1;N<=F;N++)I.getPage(N).then(Q=>{E.push(Q),E.length==F&&(E=E.sort((j,V)=>j._pageIndex>V._pageIndex?1:-1),w(E))})},function(I){console.error(I)})}getImages(m,w){let y=[];if("function"!=typeof m.objs.getAll)return y;let C=m.objs.getAll(),A=Object.keys(C);for(const E of A)C[E].data.pageIndex=w,y.push(C[E].data);return y}isImageObj(m){return-999==m.transform[0]&&"img"==m.str}getLines(m,w,y,C){let A=C.scale,E=m.items.length;for(let Q=0;Q<E;Q++){let j=m.items[Q];this.isImageObj(j)||(j.transform=$.transform(C.transform,j.transform),j.width=j.width*A),j.transform[4]+j.width>y.canvas.width&&(j.width=y.canvas.width-j.transform[4]-20);let V=this.isImageObj(j)?[j.transform[5],j.height]:f.CanvasUtil.getTextBottom(j.transform,m.styles[j.fontName],this.tempCanvas,this.ascentCache);j.height=V[1];let tt=Math.ceil(V[0]);j.transform[5]=tt}m.items.sort((Q,j)=>1e6*Math.floor(Q.transform[5])-Q.transform[4]<1e6*Math.floor(j.transform[5])-j.transform[4]?-1:1);let F,L=[],I=0;this.imageCache[w]?F=this.imageCache[w]:(F=y.getImageData(0,0,y.canvas.width,y.canvas.height),this.imageCache[w]=F);let N={strLine:"",transform:[],textObjs:[],pageIndex:w,width:0,height:0,txtLength:0};for(let Q=0;Q<E;Q++){let j=m.items[Q];if(this.isImageObj(j))for(let tt=0;tt<E;tt++){let it=m.items[tt];if(!this.isImageObj(it)&&Q!=tt&&f.CanvasUtil.isObjIntersec(j,it)&&""!=it.str.trim()&&!/^[\sA-K\.\|]+$/g.test(it.str)){j.str="";break}}if(f.CanvasUtil.arrContains(j.str.trim(),D.CONST.SKIP_CHAR))continue;let V=Math.floor(j.transform[5]+j.height);0!=I?I-V>=-D.CONST.LINE_MAGIN?this.addTxtToLine(N,j):0!=N.textObjs.length&&(L.push(N),N=this.newLine(j,w),I=Math.floor(N.transform[5]+N.height)):(N=this.newLine(j,w),I=Math.floor(N.transform[5]+N.height))}L.push(N);for(const Q of L)this.calculateSize(Q);this.findAndMergeAnsQuestBlock(L,"ans"),this.findAndMergeAnsQuestBlock(L,"quest"),this.findAndMergeBlock(L),this.mergeIntersecLine(L),this.mergeSmallLine(L,F);for(const Q of L)this.calculateSize(Q);return L}mergeIntersecLine(m){let w=0;for(;w<m.length;){let y=m[w];w++,w<m.length&&f.CanvasUtil.isLineVIntersec(y,m[w])&&(this.mergeLine(y,m[w]),m.splice(w,1),w--)}}findAndSplitQuestAnsLine(m,w,y){let C=0,A=[],E=D.CONST.BREAK_LINE_PATTERN.join("|");for(const L of m){L.top=void 0,L.bottom=void 0;let I=L.strLine.replace(/\|/g,"").trim().match(E);if(null!=I&&I.length>0){let F=/[\s\|\.]+[B\u0412][\s\|]*\./g,N=L.strLine.trim().toUpperCase().match(F);if(null!=N&&N.length>0){let Q=I[0].toUpperCase().indexOf("A");A.push({lineIndex:C,strIndex:Q})}}C++}for(let L=A.length-1;L>=0;L--){let I=A[L].lineIndex;this.splitLine(I,w[m[I].pageIndex],y[m[I].pageIndex],A[L].strIndex,m)}}mergeSmallLine(m,w){let y=0,C=1.2*D.CONST.LINE_SMALL_HEIGHT;for(;y<m.length;){let A=m[y];if(!A||!this.isSmallLine(A)){y++;continue}y-1>=0&&!m[y-1].bottom&&(m[y-1].bottom=f.CanvasUtil.getBottomLine(w,y-1,m)[0]),y+1<m.length&&!m[y+1].top&&(m[y+1].top=f.CanvasUtil.getTopLine(w,y+1,m)[0]);let E=y-1<0?-9999:this.getLineTop(A)-this.getLineBot(m[y-1]),L=y+1>=m.length?-9999:this.getLineTop(m[y+1])-this.getLineBot(A),I=y-1>=0&&m[y-1].transform[4]<=A.transform[4]&&A.transform[4]<=m[y-1].transform[4]+m[y-1].width,F=y+1<m.length&&m[y+1].transform[4]<=A.transform[4]&&A.transform[4]<=m[y+1].transform[4]+m[y+1].width;if(0==y&&L<=C&&F){this.mergeLine(m[y+1],A),m.splice(y,1),y--;continue}if(y==m.length-1&&E<=C&&I){this.mergeLine(m[y-1],A),m.splice(y,1),y--;continue}let N=-1;E>L&&F&&L<=C?N=y+1:E<=L&&I&&E<=C?N=y-1:E<=L&&F&&L<=C?N=y+1:E>L&&I&&E<=C&&(N=y-1),N>=0?(this.mergeLine(m[N],A),m.splice(y,1),y--):y++}}isSmallLine(m){return m.height<D.CONST.LINE_SMALL_HEIGHT}mergeLine(m,w){for(const y of w.textObjs)this.addTxtToLine(m,y)}findAndMergeAnsQuestBlock(m,w){let C=0;for(;C<m.length;){if("ans"==w&&this.isAnsLine(m[C])||"quest"==w&&this.isQuestLine(m[C])){let E=C,L=-1,I=1,F=[];for(;I<=10;){if(E=C+L*I,E<0){L=1,I=1;continue}if(E>=m.length)break;let N=this.isAnsLine(m[E]),Q=N||this.isQuestLine(m[E]),j="ans"==w&&N&&f.CanvasUtil.isSameLine(m[C],m[E]),V=!Q&&f.CanvasUtil.isLineIntersec(m[C],m[E])&&m[E].transform[4]>m[C].transform[4];if((j||V)&&F.push(E),I++,Q&&1==L)break;(I>10||Q)&&-1==L&&(L=1,I=1)}F.sort((N,Q)=>N<Q?1:-1);for(const N of F)for(const Q of m[N].textObjs)this.addTxtToLine(m[C],Q);for(const N of F)m.splice(N,1),N<C&&C--}C++}}findAndMergeBlock(m){let w=0;for(;w<m.length;){if(this.isAnsLine(m[w])||this.isQuestLine(m[w])){w++;continue}let C=w+1;for(;C<m.length&&m[w].pageIndex==m[C].pageIndex;){let A=this.isAnsLine(m[C])||this.isQuestLine(m[C]);if(f.CanvasUtil.isLineIntersec(m[w],m[C])&&!A||f.CanvasUtil.isSameLine(m[w],m[C])){for(const E of m[C].textObjs)this.addTxtToLine(m[w],E);m.splice(C,1),C=w}C++}w++}}isAnsLine(m){let y=m.strLine.trim().match(/[\s\|\.]+[AB\u0412CDEFGHIJK]\s*\./g);return null!=y&&y.length>0}isQuestLine(m){let w=D.CONST.QUESTION_PATTERN.join("|"),y=m.strLine.replace(/\|/g,"").toLowerCase().trim().match(w);return null!=y&&y.length>0}encodeLines(m,w){let y="",C=0;for(const A of w){if(A.height<D.CONST.LINE_SMALL_HEIGHT){C-1>=0&&!w[C-1].bottom&&(w[C-1].bottom=f.CanvasUtil.getBottomLine(m,C-1,w)[0]),C+1<w.length&&!w[C+1].top&&(w[C+1].top=f.CanvasUtil.getTopLine(m,C+1,w)[0]);let E=C-1<0?-9999:this.getLineTop(A)-this.getLineBot(w[C-1]),L=C+1>=w.length?-9999:this.getLineTop(w[C+1])-this.getLineBot(A),I=C-1>=0&&w[C-1].transform[4]<=A.transform[4]&&A.transform[4]+A.width<=w[C-1].transform[4]+w[C-1].width,F=C+1<w.length&&w[C+1].transform[4]<=A.transform[4]&&A.transform[4]+A.width<=w[C+1].transform[4]+w[C+1].width,N=1.2*D.CONST.LINE_SMALL_HEIGHT;Math.abs(E)>=N&&Math.abs(L)>=N?y+="L":y+=-9999==E?"3":-9999==L?"4":E>L&&F?"2":E<=L&&I?"1":E<=L&&F?"2":E>L&&I?"1":"L"}else y+="L";C++}return y}getLineTop(m){return m.top?m.top:m.transform[5]}getLineBot(m){return m.bottom?m.bottom:m.transform[5]+m.height}splitLine(m,w,y,C,A){let E=A[m],L=f.CanvasUtil.calIndexPos(E.textObjs,w,y,C,!0),I=this.newLine(E.textObjs[0],E.pageIndex),F=L[2],N=L[1],Q=E.textObjs[F],j=Q.transform,V={str:Q.str.substr(0,N),width:L[4]-j[4],height:Q.height,fontName:Q.fontName,transform:[j[0],j[1],j[2],j[3],j[4],j[5]]},tt={str:Q.str.substr(N),width:Q.width-V.width,height:Q.height,fontName:Q.fontName,transform:[j[0],j[1],j[2],j[3],L[4],j[5]]},it=E.textObjs;E.textObjs=[],I.textObjs=[];for(let dt=0;dt<it.length;dt++)dt<F?this.addTxtToLine(E,it[dt]):dt>F?this.addTxtToLine(I,it[dt]):(this.addTxtToLine(E,V),this.addTxtToLine(I,tt));return this.calculateSize(E),this.calculateSize(I),m==A.length-1?A.push(I):A.splice(m+1,0,I),I}findAndMergeSmallLine(m,w,y){let C=0,A=m.matchAll(y),E=[];for(;;){let L=A.next();if(L.done)break;let I=L.value[0],F=L.value.index,N=0,Q=[];for(let j=0;j<I.length;j++)"L"==I[j]?N=F+j:Q.push(F+j);for(const j of Q){for(const V of w[j].textObjs)this.addTxtToLine(w[N],V);w[N].top=void 0,w[N].bottom=void 0,E.push(j)}C++}E.sort((L,I)=>L<I?1:-1);for(const L of E)w.splice(L,1);return C}newLine(m,w){let y={strLine:"",transform:[],textObjs:[],pageIndex:w,width:0,height:0,txtLength:0};return y.transform[4]=m.transform[4],y.transform[5]=m.transform[5],y.height=m.height,y.width=m.width,y.txtLength=m.str.length,y.textObjs.push(m),y}addTxtToLine(m,w){w.transform[4]<m.transform[4]&&(m.transform[4]=w.transform[4]),w.transform[5]<m.transform[5]&&(m.transform[5]=w.transform[5]),w.transform[5]+w.height>m.transform[5]+m.height&&(m.height=w.transform[5]+w.height-m.transform[5]),w.transform[4]+w.width>m.transform[4]+m.width&&(m.width=w.transform[4]+w.width-m.transform[4]),m.txtLength+=w.str.length,m.textObjs.push(w);let y=m.transform[4]+m.width,C=m.height;for(const A of m.textObjs)A.transform[4]+A.width>y&&(y=A.transform[4]+A.width),A.transform[5]+A.height>m.transform[5]+C&&(C=A.transform[5]+A.height-m.transform[5]);m.width=y-m.transform[4],m.height=C}static transform(m,w){return pdfjsLib.Util.transform(m,w)}render(m,w,y,C){var A;let E=this,L=m.length;for(let I=0;I<L;I++){let F=document.createElement("div");F.className="pdf-page",F.id="page-"+I,null===(A=document.getElementById(w))||void 0===A||A.appendChild(F),E.renderPage(m[I],y,C)}}calculateSize(m){if(0==m.textObjs.length)return;m.textObjs.sort((Q,j)=>1e6*Math.floor(Q.transform[4])+Q.transform[5]>1e6*Math.floor(j.transform[4])+j.transform[5]?1:-1),m.strLine="";let w=0,y=0,C=0,A=0,E=9999,L=0,I=9999;for(const Q of m.textObjs){let j=f.CanvasUtil.isObjIntersec(m.textObjs[0],Q);C=Q.transform[4];let V=C-y>D.CONST.SPLIT_MARGIN&&""!=Q.str.trim()||A!=Q.transform[5]?"|":"";m.strLine+=V+Q.str,C<I&&(I=C);let tt=Q.transform[4]+Q.width;j&&(y=tt),tt>w&&j&&(w=tt),j&&(A=Q.transform[5]),Q.transform[5]<E&&(E=Q.transform[5]),Q.transform[5]+Q.height>L&&(L=Q.transform[5]+Q.height)}m.transform[4]=I,m.transform[5]=E,m.width=w-I,m.height=L-E,m.transform[0]=E,m.transform[1]=L;let F=D.CONST.TVCN_CHAR,N=m.strLine;for(const Q of F)N=N.replace(new RegExp(Q[0],"g"),Q[1]);m.strLine=N}renderPage(m,w,y){let C=m._pageIndex,A=m.getViewport({scale:w}),E=.8*A.width,L=document.createElement("canvas"),I=document.getElementById("page-"+C);I?.appendChild(L),L.id="canvas"+C;let F=L.getContext("2d",{alpha:!1});L.height=A.height,L.width=A.width,L.style.height=A.height*E/A.width+"px",L.style.width=E+"px",I&&(I.style.width=L.style.width,I.style.height=L.style.height);const Q={canvasContext:F,transform:[1,0,0,1,0,0],viewport:A,annotationMode:pdfjsLib.AnnotationMode.ENABLE_FORMS,optionalContentConfigPromise:this.optionalContentConfigPromise,annotationCanvasMap:new Map,pageColors:{background:"Canvas",foreground:"CanvasText"}};m.render(Q).promise.then(function(){y&&y(F,m._pageIndex,A)})}}K.PdfUtils=$},99422:(Zt,K,M)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.Process=void 0;const D=M(8897),f=M(81874),$=M(12273),O=M(37274),m=M(55072);K.Process=class w{constructor(C){var A,E;this.config=C,D.CONST.load(C);let L=JSON.parse(C);D.CONST.LINE_SMALL_HEIGHT=L.LINE_SMALL_HEIGHT*D.CONST.RENDER_SCALE,D.CONST.SPLIT_MARGIN=L.SPLIT_MARGIN*D.CONST.RENDER_SCALE,D.CONST.INTERSEC_MARGIN=L.INTERSEC_MARGIN*D.CONST.RENDER_SCALE,D.CONST.LINE_MAGIN=L.LINE_MAGIN*D.CONST.RENDER_SCALE,D.CONST.MARGIN_LEFT=L.MARGIN_LEFT*D.CONST.RENDER_SCALE,D.CONST.FOOTER_PATTERN=null!==(A=L.FOOTER_PATTERN)&&void 0!==A?A:["(trang\\s*\\d+)","(Page\\s*\\d+)","(Trang\\s*\\d+)","(TRANG\\s*\\d+)","(^\\d{1,4}$)"],D.CONST.HELP_ANS_PATTERN=null!==(E=L.HELP_ANS_PATTERN)&&void 0!==E?E:["([\\s\\.]*Ch\u1ecdn\\s*([ABCDEFGH]))"]}setUpdateStatusCallback(C){this.updateStatusCallback=C}setOncompleteCallback(C){this.onCompleteCallback=C}getOverview(C){let A=C.filter(j=>j.isGroup).length,E=C.filter(j=>!j.isGroup).length,L=C.filter(j=>j.answers.length>0).length,I=C.filter(j=>!j.isGroup&&0==j.answers.length).length,F=C.filter(j=>j.answers.length>4),N=F.length+"|"+F.map(j=>j.num).join(",");return F=C.filter(j=>j.answers.length<4&&j.answers.length>0),{groupNum:A+"",questNum:E+"",tnNum:L+"",tlNum:I+"",tnGt4:N,tnLt4:F.length+"|"+F.map(j=>j.num).join(",")}}parsePdf(C){let A=new m.PdfUtils;A.loadPdf(C,E=>{const L=E.length;let I=[],F=[],N=document.createElement("div");N.id="hiddenWrapper",N.style.width="1px",N.style.height="1px",N.style.overflow="hidden",N.style.opacity="0",N.style.zIndex="-9999",N.style.position="fixed",N.style.top="0",N.style.left="0",document.body.appendChild(N);let Q=document.createElement("div"),j="canvasWrapper";Q.id=j,N.appendChild(Q);const V=(new Date).getTime();let tt=[];A.render(E,j,D.CONST.RENDER_SCALE,(it,dt,mt)=>{if(null!=it&&(I[dt]=it,F[dt]=mt),tt.push(1),this.updateStatusCallback&&this.updateStatusCallback(`Rendering: ${tt.length}/${L}`),tt.length==L){const ft=(new Date).getTime();this.updateStatusCallback&&this.updateStatusCallback("Render done: "+(ft-V)/1e3+" secs"),this.startAnalyze(I,F,E)}})})}imgToTextObj(C,A){return{str:"img",fontName:A,width:C.paintWidth,height:C.paintHeight,transform:[-999,0,0,0,-C.left,-C.top-C.paintHeight]}}startAnalyze(C,A,E){const L=E.length;let I=[],F=[],N=[],Q=new m.PdfUtils;const j=(new Date).getTime();for(let V=0;V<L;V++){const tt=V;let it=Q.getImages(E[V],tt);E[V].getTextContent().then(dt=>{for(const ft of it)dt.items.push(this.imgToTextObj(ft,dt.items.length>0?dt.items[0].fontName:""));let mt=Q.getLines(dt,tt,C[tt],A[tt]);if(F=F.concat(mt),N[tt]=dt.styles,I.push(1),I.length==L){F.sort((Ce,We)=>1e7*Ce.pageIndex+(Ce.transform.length>0?Ce.transform[5]:0)-(1e7*We.pageIndex+(We.transform.length>0?We.transform[5]:0))),Q.findAndSplitQuestAnsLine(F,N,C);let ft=new $.FooterParser,yt=0;for(const Ce of F){if((F.length-1==yt||yt+1<F.length-1&&Ce.pageIndex!=F[yt+1].pageIndex)&&(Ce.isLastLine=!0),Ce.isLastLine&&ft.parse(Ce.strLine).length>0){Ce.isFooter=!0;let We=O.CanvasUtil.getBottomLine(Q.imageCache[F[yt-1].pageIndex],yt-1,F);Ce.top=We[0]+D.CONST.MARGIN_LEFT}yt++}let St=new f.ExamParser(this.config),$t=F.map(Ce=>Ce.strLine),he=St.parse($t),xe=this.getQuestionInfo(he,F,N,C,Q.imageCache);const tn=(new Date).getTime();this.updateStatusCallback&&this.updateStatusCallback("Analyze done: "+(tn-j)/1e3+" secs"),this.showOnCanvas(xe,C,D.CONST.DRAW_RESULT),this.onCompleteCallback&&this.onCompleteCallback(xe,C)}})}}getPosInfo(C,A,E,L,I,F,N,Q,j){if(!E.top){let it=O.CanvasUtil.getTopLine(I,F,L);E.top=it[0],E.isIntersec=it[1]}if(!E.bottom){let it=O.CanvasUtil.getBottomLine(I,F,L);E.bottom=it[0],E.isIntersec=it[1]}return{str:"",pageIndex:E.pageIndex,lineIndex:F,transform:"a"==C?O.CanvasUtil.calIndexPos2(E.textObjs,Q,N,j?j-1:0):E.transform,startLeft:A>=0?O.CanvasUtil.calIndexPos2(E.textObjs,Q,N,A-1):void 0,type:C}}getQuestionInfo(C,A,E,L,I){let F=[];for(const N of C){let Q=N.parts[0].lineIdx,j=A[Q],V=this.getPosInfo("q",N.parts[0].s,j,A,I[j.pageIndex],Q,L[j.pageIndex],E[j.pageIndex]),tt=null;if(Q=N.parts[N.parts.length-1].lineIdx,N.answers.length>0){let it=N.answers[N.answers.length-1];it.parts.length>0&&(Q=it.parts[it.parts.length-1].lineIdx)}if(Q+=1,Q<A.length&&(j=A[Q],tt=this.getPosInfo("q",-1,j,A,I[j.pageIndex],Q,L[j.pageIndex],E[j.pageIndex])),N.isGroup)F.push({num:N.label,answers:[],remove:this.getQuestRemoveBox(V,A),positions:this.getQuestBoxes(V,A,tt,L[j.pageIndex].canvas.height),isGroup:!0,text:N.parts.map(it=>A[it.lineIdx])});else{let it={num:N.label,answers:[],remove:this.getQuestRemoveBox(V,A),positions:this.getQuestBoxes(V,A,tt,L[j.pageIndex].canvas.height),group:N.group,strAns:N.strAns,isFixAns:N.isFixAns,text:N.parts.map(mt=>A[mt.lineIdx])};F.push(it);let dt=0;for(const mt of N.answers){let ft={pageIndex:it.remove.pageIndex,top:it.remove.top-1,left:it.remove.left-1,width:1,heigh:1};if(mt.parts.length>0){if(Q=mt.parts[0].lineIdx,j=A[Q],1==j.isIntersec&&(it.isFixAns=!0),mt.parts.length>1&&(it.isFixAns=!0),V=this.getPosInfo("a",mt.parts[0].s,j,A,I[j.pageIndex],Q,L[j.pageIndex],E[j.pageIndex],mt.parts[0].b),tt=null,dt<N.answers.length-1){let $t=N.answers[dt+1];Q=$t.parts[0].lineIdx,j=A[Q],tt=this.getPosInfo("a",$t.parts[0].s,j,A,I[j.pageIndex],Q,L[j.pageIndex],E[j.pageIndex],$t.parts[0].b)}else Q=mt.parts[mt.parts.length-1].lineIdx+1,Q<A.length-1&&(j=A[Q],tt=this.getPosInfo("q",-1,j,A,I[j.pageIndex],Q,L[j.pageIndex],E[j.pageIndex]));let yt=this.getAnsRemoveBox(V,A),St={label:mt.label,remove:yt,isCorrect:mt.isCorrect,positions:mt.isInline?[yt]:this.getAnsBoxes(V,A,tt,L[j.pageIndex].canvas.height)};it.answers.push(St)}else it.answers.push({label:mt.label,remove:ft,isCorrect:mt.isCorrect,positions:[ft]});dt++}N.help&&N.help.length>0&&(Q=N.help[0].lineIdx,j=A[Q],V=this.getPosInfo("q",N.help[0].s,j,A,I[j.pageIndex],Q,L[j.pageIndex],E[j.pageIndex]),tt=null,Q=N.help[N.help.length-1].lineIdx+1,Q<A.length&&(j=A[Q],tt=this.getPosInfo("q",-1,j,A,I[j.pageIndex],Q,L[j.pageIndex],E[j.pageIndex])),it.help={num:N.label,remove:this.getQuestRemoveBox(V,A),positions:this.getQuestBoxes(V,A,tt,L[j.pageIndex].canvas.height),text:N.help.map(mt=>A[mt.lineIdx])})}}return F}showHidden(){let C=document.getElementById("hiddenWrapper");C&&(C.style.opacity="1",C.style.width="",C.style.height="",C.style.overflow="",C.style.position="")}showOnCanvas(C,A,E){const L=(new Date).getTime(),I=new Map([["A","rgba(18, 0, 255, 0.4)"],["B","rgba(0, 158, 34, 0.4)"],["C","rgba(50, 50, 50, 0.4)"],["D","rgba(132, 0, 137, 0.4)"],["E","rgba(132, 0, 137, 0.4)"],["F","rgba(132, 0, 137, 0.4)"],["G","rgba(132, 0, 137, 0.4)"],["H","rgba(132, 0, 137, 0.4)"]]);if(E.indexOf("quest")>=0)for(const N of C){for(const Q of N.positions)O.CanvasUtil.drawBox(A[Q.pageIndex],N.isGroup?"black":"red",Q);O.CanvasUtil.drawBox(A[N.remove.pageIndex],"yellow",N.remove);for(const Q of N.answers){for(const j of Q.positions)O.CanvasUtil.drawBox(A[j.pageIndex],I.get(Q.label)+"",j,!0);O.CanvasUtil.drawBox(A[Q.remove.pageIndex],"yellow",Q.remove),Q.isCorrect&&O.CanvasUtil.drawPoint(A[Q.positions[0].pageIndex],"green",Q.positions[0])}if(N.help){for(const Q of N.help.positions)O.CanvasUtil.drawBox(A[Q.pageIndex],"orange",Q);N.help.remove&&O.CanvasUtil.drawBox(A[N.help.remove.pageIndex],"yellow",N.help.remove)}}const F=(new Date).getTime();this.updateStatusCallback&&this.updateStatusCallback("Draw done: "+(F-L)/1e3+" secs")}getAnsRemoveBox(C,A){let E=C.startLeft?C.startLeft[5]-2:A[C.lineIndex].top,L=C.transform[4]-D.CONST.MARGIN_LEFT,I=C.startLeft?C.startLeft[5]+C.startLeft[3]:A[C.lineIndex].bottom;return{pageIndex:C.pageIndex,top:E||20,left:L,heigh:I&&E?I-E:0,width:(C.startLeft?C.startLeft[4]:0)-L}}getAnsBoxes(C,A,E,L){const I=L,F=D.CONST.MARGIN_LEFT;let N=[],Q=A[C.lineIndex].top,j=A[C.lineIndex].bottom;if(!Q||!j)return[];let tt=j,it=C.transform[4]-F,dt=E&&C.lineIndex==E.lineIndex?E.transform[4]-F:A[C.lineIndex].transform[4]+A[C.lineIndex].width+F;if(N.push({pageIndex:C.pageIndex,top:Q,left:it,width:dt-it,heigh:j-Q}),E&&E.lineIndex==C.lineIndex)return N;Q=j,j=I,dt=0;let mt=C.pageIndex,ft=0;for(ft=C.lineIndex+1;ft<A.length;ft++){if(j==I&&O.CanvasUtil.isLastLineOfPage(ft,A)){let St=A[ft].isFooter?A[ft-1]:A[ft];j=St.transform[5]+St.height+20}let yt=A[ft].top;if(ft>C.lineIndex+1&&!A[ft-1].isFooter){let St=A[ft-1].transform[4]+A[ft-1].width+F;St>dt&&(dt=St);let $t=A[ft-1].transform[4]-F;$t<it&&(it=$t)}if(A[ft].isFooter&&yt)ft-C.lineIndex>1?(j=A[ft-1].transform[5]+A[ft-1].height+D.CONST.LINE_MAGIN,it=A[C.lineIndex+1].transform[4]-F):j=A[C.lineIndex].bottom;else if(A[ft].pageIndex>mt&&(j&&j-Q>D.CONST.LINE_SMALL_HEIGHT&&ft-C.lineIndex>1&&N.push({pageIndex:mt,top:Q,left:it,width:dt-it,heigh:j-Q}),Q=20,tt=Q),mt=A[ft].pageIndex,yt){j=yt;break}}if(ft>=A.length&&(ft=A.length-1),ft-C.lineIndex>1&&A[ft-1].transform[5]>tt&&!O.CanvasUtil.isFirstLineOfPage(ft,A)){let yt=20==Q?A[ft].transform[4]:A[C.lineIndex+1].transform[4];if(20!=Q)for(let St=C.lineIndex+2;St<=ft;St++)A[St].transform[4]<yt&&(yt=A[St].transform[4]);j&&j-Q>D.CONST.LINE_SMALL_HEIGHT&&N.push({pageIndex:mt,top:Q,left:yt,width:dt-yt,heigh:j-Q})}E&&"a"==E.type&&E.transform[4]>A[E.lineIndex].transform[4]+10*D.CONST.RENDER_SCALE&&(dt=E.transform[4]-F,Q=A[E.lineIndex].top,it=A[E.lineIndex].transform[4]-F,j=A[E.lineIndex].bottom,Q&&j&&j-Q>D.CONST.LINE_SMALL_HEIGHT&&N.push({pageIndex:mt,top:Q,left:it,width:dt-it,heigh:j-Q}));for(let yt=N.length-1;yt>=1;yt--)N[yt].left-(N[yt-1].left+N[yt-1].width)>=20*D.CONST.RENDER_SCALE&&N.splice(yt,1);return N}getQuestRemoveBox(C,A){let E=C.startLeft?C.startLeft[5]:A[C.lineIndex].top,L=C.transform[4]-D.CONST.MARGIN_LEFT,I=C.startLeft?C.startLeft[5]+C.startLeft[3]:A[C.lineIndex].bottom;return{pageIndex:C.pageIndex,top:E||20,left:L,heigh:I&&E?I-E:0,width:(C.startLeft?C.startLeft[4]:0)-L}}getQuestBoxes(C,A,E,L){let I=L;for(let ft=C.lineIndex;ft<A.length;ft++)if(O.CanvasUtil.isLastLineOfPage(ft,A)){let yt=A[ft].isFooter?A[ft-1]:A[ft];I=yt.transform[5]+yt.height+20;break}let F=[],N=C.pageIndex,Q=E?E.lineIndex:A.length-1,j=A[C.lineIndex].transform[4]-D.CONST.MARGIN_LEFT,V=A[C.lineIndex].top;if(!V)return[];let tt=D.CONST.CROP_FULL_WIDTH?O.CanvasUtil.getMaxLineRight(-1,A)+2*D.CONST.MARGIN_LEFT:A[C.lineIndex].transform[4]+A[C.lineIndex].width+2*D.CONST.MARGIN_LEFT,it=I,dt=N,mt=C.lineIndex+1;for(;mt<=Q;mt++){let ft=A[mt].top;if(mt==A.length-1&&!E&&(ft=A[mt].bottom),!D.CONST.CROP_FULL_WIDTH){let St=A[mt-1].transform[4]+A[mt-1].width+2*D.CONST.MARGIN_LEFT;St>tt&&(tt=St)}let yt=A[mt-1].transform[4]-D.CONST.MARGIN_LEFT;yt<j&&(j=yt),A[mt].isFooter&&ft?it=ft:(A[mt].pageIndex>dt&&(A[mt-1].isFooter||(it=I),F.push({pageIndex:dt,top:V,left:j,width:tt-j,heigh:it-V}),V=20,j=O.CanvasUtil.getMinLineLeft(A[mt].pageIndex,A)-D.CONST.MARGIN_LEFT),dt=A[mt].pageIndex,ft&&(it=ft))}if(mt-=1,!E&&O.CanvasUtil.isLastLineOfPage(mt,A)){let ft=A[mt].isFooter?A[mt-1]:A[mt];it=ft.transform[5]+ft.height+20}return O.CanvasUtil.isFirstLineOfPage(mt,A)||F.push({pageIndex:dt,top:V,left:j,width:tt-j,heigh:it-V}),F}}},53781:(Zt,K,M)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.AnswerParser=void 0;const D=M(86563);class f extends D.Parser{constructor(O){super(),null!=O&&(this.isOn=O),this.TYPE=f.TYPE_NAME}do(O){let m=[],w="|"+O,y=/([\s|.\]]+\*?[A-H][\s|]*[.)])/g,C=this.matchPos(w,y,!1);0==C.length&&(C=this.matchPos(w,y,!0));let A=!1;0==C.length&&/^\|?\s*\*?[A-H\s|]+$/g.test(w)&&(A=!0,C=this.matchPos(w,/\*?[A-H]/g,!1));let E=!1;if(0==C.length&&(A=!0,E=!0,C=this.matchPos(w,/\[\*?[A-H]:[^\]]+\]/g,!1)),C.length>0)for(const L of C){let I=L.index+L.value.length-1,F=-9999,N=L.value.replace(/\*?[\sA-H|]/g,"");E&&(F=L.index+L.value.length-2,L.index=L.index+1,I=L.index+1+(L.value.startsWith("[*")?1:0),N=".");let Q={type:this.TYPE,pos:[L.index-1,I,F]},j=O.substring(Q.pos[0]);!A&&!/^\|?\s*[*A-Himg\s|.]+$/g.test(w)&&j.trim()==L.value.trim()||(Q.label=O.substring(Q.pos[0],Q.pos[0]+1),"*"==Q.label&&(Q.label=O.substring(Q.pos[0]+1,Q.pos[0]+2),Q.extInfo="*"),Q.olabel=N,Q.score=1,""==O.substring(0,Q.pos[0]).replace(/[\s|]/g,"")&&(Q.score=2),m.push(Q))}return m}matchPos(O,m,w){let y=w?O.toUpperCase():O,C=/[\s|.\]]/,A=y.matchAll(m),E=[];for(;;){let L=A.next();if(L.done)break;let I=0;for(let j=L.value.index;j<y.length&&C.test(y[j]);j++)I++;let F=L.value[0].substr(I,1),N=/[[(]\s*(VD|TH|NB|VDC|EASY|MEDIUM|HARD|HARDEST)\s*[\d.]*\s*[)\]]\s*[:.]?/g,Q=/\[![a-z]+:\$\s*\$\]/g;"A"==F&&!y.replace(/\|/g,"").replace(/\[!info:\d+\]/g,"").replace(N,"").replace(Q,"").trim().startsWith("A")||"*A"==F&&!y.replace(/\|/g,"").replace(/\[!info:\d+\]/g,"").replace(N,"").replace(Q,"").trim().startsWith("*A")||E.push({value:L.value[0].substr(I),index:L.value.index+I})}return E}}K.AnswerParser=f,f.TYPE_NAME="answer"},34143:(Zt,K,M)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.DapAnChiTietParser=void 0;const D=M(8897),f=M(86563);class $ extends f.Parser{constructor(m){super(),this.TYPE=$.TYPE_NAME,null!=m&&(this.isOn=m)}do(m){let y=this.cleanLine(m);return/^[0-9ABCDEFGHabcdefgh]+$/g.test(y)&&y.length>=2?[{type:$.TYPE_NAME,pos:[0,0]}]:[]}cleanLine(m){let w=[/\|/g,/[\s.\-:,;![\]@*$()\u2013]+/g,/C\xe2u/g,/\u0110\xe1p\xe1n/g,/\u0110\/A/g,/Question/g,/Questions/g,/question/g,/questions/g],y=m;y=y.replaceAll(/\[![!iucsbp]+:\$(([^$]|\$[^\]])+)\$\]/g,"$1"),y=y.replaceAll(/\[![!iucsbp]+:!!\]/g,"");for(const C of w)y=y.replaceAll(C,"");return y=y.replaceAll("\\n",""),y}getAnsMC(m,w){var y;let C=[];for(const F of w)C.push(m[null!==(y=F.lineIdx)&&void 0!==y?y:0]);let A=C.join(""),E=this.cleanLine(A),L=this.getResultMC(E.toUpperCase()),I=new Map;for(const F of L)I.set(F.num,F.str);return I}getAnsStr(m){let w=m.join("\n");w=w.replaceAll(/\[![!iucsbp]+:\$(([^$]|\$[^\]])+)\$\]/g,"$1"),w=w.replaceAll(/\[![!iucsbp]+:!!\]/g,""),w=w.replaceAll("[*","").replaceAll("*]","");let y=this.getResultStr(w),C=new Map;for(const A of y)C.set(A.num,A.str);return C}getAnsFromHelp(m,w){let y=[];for(const A of m){let E=w[A.lineIdx];E=E.replaceAll(/\[![!iucsbp]+:\$(([^$]|\$[^\]])+)\$\]/g,"$1"),E=E.replaceAll(/\[![!iucsbp]+:!!\]/g,""),y.push(E)}let C=0;for(const A of y){let E=A.trim().match(D.CONST.HELP_ANS_PATTERN.join("|"));if(null!=E)for(const L of E)if(null!=L&&1==L.length)return m.splice(C,1),L;C++}return""}getResultStr(m){let w=[],y=m.replace(/\n/g,"\n"),C=D.CONST.QUESTION_PATTERN.join("|").replace(/\(\^/g,"("),A=y.matchAll(new RegExp(C,"ig"));for(;;){let N=A.next();if(N.done)break;let Q=N.value[0],j=D.Utils.getNumberFromStr(Q);y=y.replace(Q,j+".")}let F,E=D.CONST.RES_ANS_PATTERN.length>0?new RegExp(D.CONST.RES_ANS_PATTERN.join("|"),"g"):/\d+[.-][^|0-9]/g,L=y.matchAll(E),I=-1;for(;;){let N=L.next();if(N.done)break;if(-1==I)I=N.value.index,F=N;else{let Q=y.substr(I,N.value.index-I);w.push(this.toAns(Q,F)),I=N.value.index,F=N}}if(I>=0&&F){let N=y.substr(I);w.push(this.toAns(N,F))}return w}toAns(m,w){let y=w.value[0].length-1;return{num:+w.value[0].substr(0,y-1),str:m.substring(y).replace(/\s+/g," ").trim()}}getResultMC(m){let w=[],y="",C=[],A=!1;for(let E=0;E<m.length;E++){let L=m.charCodeAt(E),I=L>=65&&L<=72;if(I&&""==y)return[];I!=A&&(C.push(y),y=""),A=I,y+=m[E]}""!=y&&C.push(y);for(let E=1;E<C.length;E+=2){let L=0,I=Math.floor(C[E-1].length/C[E].length),F=+C[E-1].substring(L,I),N=F,Q=!1;for(let j=0;j<C[E].length;j++){if(j>=C[E-1].length){Q=!0;break}if(F=+C[E-1].substring(L,L+I),F!=N){Q=!0;break}w.push({num:F,str:C[E][j]}),L+=I,N=F+1,I=N.toString().length}if(Q){w=[];break}}if(0==w.length)for(let E=1;E<C.length;E+=2){let L=+C[E-1];if(E>1&&L!=w[w.length-1].num+1)return[];w.push({num:L,str:C[E]})}return w}}K.DapAnChiTietParser=$,$.TYPE_NAME="chitietdapan"},13826:(Zt,K,M)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.DapAnParser=void 0;const D=M(8897),f=M(86563);class $ extends f.Parser{constructor(m){super(),null!=m&&(this.isOn=m),this.TYPE=$.TYPE_NAME}do(m){return this.match(m,D.CONST.DAPAN_PATTERN)}static getAnsFromHelp(m){for(const w of m){let y=w.replace(/\|/g,"").trim().match(D.CONST.HELP_ANS_PATTERN.join("|"));if(null!=y)for(const C of y)if(null!=C&&1==C.length)return C}return""}}K.DapAnParser=$,$.TYPE_NAME="dapan"},12273:(Zt,K,M)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.FooterParser=void 0;const D=M(8897),f=M(86563);class $ extends f.Parser{constructor(m){super(),null!=m&&(this.isOn=m),this.TYPE=$.TYPE_NAME}do(m){return this.match(m,D.CONST.FOOTER_PATTERN)}}K.FooterParser=$,$.TYPE_NAME="footer"},51453:(Zt,K,M)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.HetParser=void 0;const D=M(8897),f=M(86563);class $ extends f.Parser{constructor(m){super(),null!=m&&(this.isOn=m),this.TYPE=$.TYPE_NAME}do(m){return this.match(m,D.CONST.HET_PATTERN)}}K.HetParser=$,$.TYPE_NAME="end"},54716:(Zt,K,M)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.HuongDanParser=void 0;const D=M(8897),f=M(86563);class $ extends f.Parser{constructor(m){super(),null!=m&&(this.isOn=m),this.TYPE=$.TYPE_NAME}do(m){return this.match(m,D.CONST.HUONGDAN_PATTERN)}}K.HuongDanParser=$,$.TYPE_NAME="huongdan"},7411:(Zt,K,M)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.IncludeParser=void 0;const D=M(86563);class f extends D.Parser{constructor(O){super(),null!=O&&(this.isOn=O),this.TYPE=f.TYPE_NAME}do(O){let m=O.replace(/\|/g,"").trim(),y=/\[@([CTQG]\d+):[^\]]*\]/g,C=/\[@(F:[^\]]*)\]/g,A=/\[[^\]\d]+(\d+)[^\]\d]+\]/g,E=/\[[^\]]+\]/g;if(/^\[@[^!\]]+\]([\.,]\[[^\]!]+\])*$/.test(m)){let L=m;return L=L.replaceAll(y,"$1").replaceAll(C,"$1").replaceAll(A,"$1").replaceAll(E,""),[{type:this.TYPE,pos:[0,0],label:"@@."+L}]}return[]}}K.IncludeParser=f,f.TYPE_NAME="include"},86563:(Zt,K)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.Parser=void 0,K.Parser=class M{constructor(){this.isOn=!0,this.TYPE="default"}on(){this.isOn=!0}off(){this.isOn=!1}parse(f){return this.isOn?this.do(f):[]}match(f,$){let O=f.replace(/\|/g,"").trim().match($.join("|"));return null!=O&&O.length>0?[{type:this.TYPE,pos:[0,0]}]:[]}}},52169:(Zt,K,M)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.QuestionParser=void 0;const D=M(8897),f=M(86563);class $ extends f.Parser{constructor(m){super(),null!=m&&(this.isOn=m),this.TYPE=$.TYPE_NAME}do(m){let w=this.matchPos(m);if(w.value){let y=null;for(let F=w.value.length-1;F>=0;F--)if(w.value[F]){y=w.value[F];break}if(null==y)return[];let C=m.replace(/\|/g,"").toLowerCase().indexOf(y),A=C,E="",L=m.toLowerCase();for((y.endsWith("(")||y.endsWith("["))&&(y=y.substring(0,y.length-1));A<L.length&&("|"!=L[A]&&(E+=L[A]),A++,E!=y););let I={type:this.TYPE,pos:[C,A]};return I.label=this.getNumberFromStr(m.substring(I.pos[0],I.pos[1])),I.olabel=y,[I]}return[]}matchPos(m){let w=m.replace(/\|/g,"").toLowerCase().trim(),y=D.CONST.QUESTION_PATTERN.join("|"),C=w.matchAll(y).next();return C.value||(y=D.CONST.QUESTION_PATTERN2.join("|"),C=w.matchAll(y).next()),C}getNumberFromStr(m){let w=m.match(/(\d+)/);return w?w[0]:""}}K.QuestionParser=$,$.TYPE_NAME="question"},71598:(Zt,K,M)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.SectionParser=void 0;const D=M(8897),f=M(86563);class $ extends f.Parser{constructor(m){super(),null!=m&&(this.isOn=m),this.TYPE=$.TYPE_NAME}do(m){let w=m.replace(/\|/g,"");w=w.replaceAll(/\[![!ibuc]+:\$(([^\$]|\$[^\]])+)\$\]/g,"$1");let y=w.toLowerCase().trim().match(D.CONST.SECTION_PATTERN_LOWER.join("|")),C=null!=y&&y.length>0;return C||(y=w.trim().match(D.CONST.SECTION_PATTERN_NORMAL.join("|")),C=null!=y&&y.length>0),C&&y?[{type:this.TYPE,pos:[0,0],label:w}]:[]}}K.SectionParser=$,$.TYPE_NAME="section"},60987:(Zt,K,M)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.ModifyAnsRule=void 0;const D=M(56446);class f extends D.Rule{constructor(O){super(O??"","modify:")}load(O){let m=new f(O);return""!=m.pattern?m:null}run(O,m){if(""==this.pattern)return!1;if(this.getStack(O,m).endsWith(this.pattern)&&this.checkVal(O,m)){for(const y of this.data){let C=y.split(":"),A=m-+C[0],E=O[A].label;O[A].label=C[1],O[A].err=E+" -> "+C[1]}return!0}return!1}}K.ModifyAnsRule=f},2630:(Zt,K,M)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.RemoveDupRule=void 0;const D=M(56446);class f extends D.Rule{constructor(O){super(O??"","rmdup:")}load(O){let m=new f(O);return""!=m.pattern?m:null}run(O,m){var w,y;if(""==this.pattern)return!1;if(this.getStack(O,m).endsWith(this.pattern)){let A=null!==(w=O[m].score)&&void 0!==w?w:0,E=null!==(y=O[m-1].score)&&void 0!==y?y:0;if(O[m].label==O[m-1].label)return O.splice(A>E?m-1:m,1),!0}return!1}}K.RemoveDupRule=f},37805:(Zt,K,M)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.RemoveRule=void 0;const D=M(56446);class f extends D.Rule{constructor(O){super(O??"","remove:")}load(O){let m=new f(O);return""!=m.pattern?m:null}run(O,m){if(""==this.pattern)return!1;if(this.getStack(O,m).endsWith(this.pattern)&&this.checkVal(O,m)){for(const y of this.data)O.splice(m-+y,1);return!0}return!1}}K.RemoveRule=f},56446:(Zt,K)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.Rule=void 0,K.Rule=class M{constructor(f,$){if(this.TYPE="",this.pattern="",this.valPattern="",this.data=[],this.TYPE=$,!f.startsWith(this.TYPE))return;let m=f.substring(this.TYPE.length).split("=>"),w=m[0].split(":");this.pattern=w[0].trim(),this.valPattern=w.length>1?w[1].trim():"",this.data=m[1].split(",").map(y=>y.trim())}checkVal(f,$){var O;if(""==this.valPattern)return!0;let w=[];for(let C=Math.ceil(this.pattern.length/2);C>0;C--)w.push(null===(O=f[$-C+1].label)||void 0===O?void 0:O.trim());let y=w.join("-");return new RegExp(this.valPattern).test(y)}getStack(f,$){let O="",m=$-10>=0?$-10:0;for(;m<=$;m++)O+="-"+f[m].type[0];return O}}},2721:(Zt,K,M)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.SameKindRule=void 0;const D=M(8897),f=M(13826),$=M(51453),O=M(54716),m=M(56446);class w extends m.Rule{constructor(C){super(C??"","same:")}load(C){let A=new w(C);return""!=A.pattern?A:null}run(C,A){var E,L,I;if(""==this.pattern)return!1;let F=C[A];if(F.type[0]!=this.pattern)return!1;let N=[],Q=[],j="";for(let V=0;V<A;V++){let tt=C[V];(tt.type==$.HetParser.TYPE_NAME||tt.type==f.DapAnParser.TYPE_NAME)&&(j="da"),tt.type==O.HuongDanParser.TYPE_NAME&&"da"==j&&(j="hd")}if("da"==j)return!1;for(let V=A-1;V>=0;V--){let tt=C[V];if(tt.type==$.HetParser.TYPE_NAME||tt.type==f.DapAnParser.TYPE_NAME||"hd"==j&&tt.type==O.HuongDanParser.TYPE_NAME||(tt.type[0]==this.pattern&&tt.olabel&&(N.push(tt.olabel),Q.push(tt.label)),2==N.length))break}if(N.length>=1){let V=N[0],tt=2==N.length?N[1]:V,it=null!==(E=F.olabel)&&void 0!==E?E:"";if("a"==this.pattern&&(""==V&&(V="."),""==tt&&(tt="."),""==it&&(it=".")),""==this.valPattern){if(V==tt&&it!=V)return C.splice(A,1),!0}else{let dt=this.valPattern.split(",");for(const mt of dt){let ft=mt.trim(),St=new RegExp(D.CONST[ft].join("|"));if(St.test(V)&&St.test(tt)&&!St.test(it)&&+(null!==(L=Q[0])&&void 0!==L?L:"0")+1!=+(null!==(I=F.label)&&void 0!==I?I:"0"))return C.splice(A,1),!0}}}return!1}}K.SameKindRule=w},6990:function(Zt,K,M){var D;Zt=M.nmd(Zt),function(){var f,w="Expected a function",C="__lodash_hash_undefined__",E="__lodash_placeholder__",ye=1/0,fe=9007199254740991,Yn=4294967295,ri=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],qi="[object Arguments]",to="[object Array]",Mr="[object Boolean]",Mn="[object Date]",pi="[object Error]",xn="[object Function]",ki="[object GeneratorFunction]",an="[object Map]",Kn="[object Number]",t="[object Object]",Gn="[object Promise]",po="[object RegExp]",Pi="[object Set]",Ke="[object String]",Ku="[object Symbol]",ga="[object WeakMap]",xa="[object ArrayBuffer]",ba="[object DataView]",No="[object Float32Array]",Fi="[object Float64Array]",tu="[object Int8Array]",va="[object Int16Array]",Oo="[object Int32Array]",hr="[object Uint8Array]",Wu="[object Uint8ClampedArray]",mc="[object Uint16Array]",Xd="[object Uint32Array]",tm=/\b__p \+= '';/g,mh=/\b(__p \+=) '' \+/g,em=/(__e\(.*?\)|\b__t\)) \+\n'';/g,nm=/&(?:amp|lt|gt|quot|#39);/g,hc=/[&<>"']/g,Gs=RegExp(nm.source),$s=RegExp(hc.source),Vu=/<%-([\s\S]+?)%>/g,hh=/<%([\s\S]+?)%>/g,ph=/<%=([\s\S]+?)%>/g,eu=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,_h=/^\w*$/,y_=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Xu=/[\\^$.*+?()[\]{}|]/g,w_=RegExp(Xu.source),im=/^\s+/,C_=/\s/,fh=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,pc=/\{\n\/\* \[wrapped with (.+)\] \*/,T_=/,? & /,gh=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,nu=/[()=,{}\[\]\/\s]/,k_=/\\(\\)?/g,xh=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,bh=/\w*$/,A_=/^[-+]0x[0-9a-f]+$/i,S_=/^0b[01]+$/i,O_=/^\[object .+?Constructor\]$/,E_=/^0o[0-7]+$/i,M_=/^(?:0|[1-9]\d*)$/,I_=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,td=/($^)/,L_=/['\n\r\u2028\u2029\\]/g,ed="\\ud800-\\udfff",Ua="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",vh="\\u2700-\\u27bf",om="a-z\\xdf-\\xf6\\xf8-\\xff",wh="A-Z\\xc0-\\xd6\\xd8-\\xde",kl="\\ufe0e\\ufe0f",pr="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",D_="["+ed+"]",Ir="["+pr+"]",ou="["+Ua+"]",rm="\\d+",au="["+vh+"]",nd="["+om+"]",ru="[^"+ed+pr+rm+vh+om+wh+"]",Qi="\\ud83c[\\udffb-\\udfff]",si="[^"+ed+"]",Ys="(?:\\ud83c[\\udde6-\\uddff]){2}",Al="[\\ud800-\\udbff][\\udc00-\\udfff]",Lr="["+wh+"]",ya="(?:"+nd+"|"+ru+")",ys="(?:"+Lr+"|"+ru+")",La="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Pr="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Ks="(?:"+ou+"|"+Qi+")?",Ni="["+kl+"]?",Eo=Ni+Ks+"(?:\\u200d(?:"+[si,Ys,Al].join("|")+")"+Ni+Ks+")*",Wr="(?:"+[au,Ys,Al].join("|")+")"+Eo,ws="(?:"+[si+ou+"?",ou,Ys,Al,D_].join("|")+")",Ol=RegExp("['\u2019]","g"),su=RegExp(ou,"g"),El=RegExp(Qi+"(?="+Qi+")|"+ws+Eo,"g"),Ws=RegExp([Lr+"?"+nd+"+"+La+"(?="+[Ir,Lr,"$"].join("|")+")",ys+"+"+Pr+"(?="+[Ir,Lr+ya,"$"].join("|")+")",Lr+"?"+ya+"+"+La,Lr+"+"+Pr,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",rm,Wr].join("|"),"g"),Cs=RegExp("[\\u200d"+ed+Ua+kl+"]"),Vr=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Oi=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],yo=-1,Ji={};Ji[No]=Ji[Fi]=Ji[tu]=Ji[va]=Ji[Oo]=Ji[hr]=Ji[Wu]=Ji[mc]=Ji[Xd]=!0,Ji[qi]=Ji[to]=Ji[xa]=Ji[Mr]=Ji[ba]=Ji[Mn]=Ji[pi]=Ji[xn]=Ji[an]=Ji[Kn]=Ji[t]=Ji[po]=Ji[Pi]=Ji[Ke]=Ji[ga]=!1;var li={};li[qi]=li[to]=li[xa]=li[ba]=li[Mr]=li[Mn]=li[No]=li[Fi]=li[tu]=li[va]=li[Oo]=li[an]=li[Kn]=li[t]=li[po]=li[Pi]=li[Ke]=li[Ku]=li[hr]=li[Wu]=li[mc]=li[Xd]=!0,li[pi]=li[xn]=li[ga]=!1;var sa={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},za=parseFloat,Th=parseInt,lm="object"==typeof global&&global&&global.Object===Object&&global,kh="object"==typeof self&&self&&self.Object===Object&&self,Uo=lm||kh||Function("return this")(),fc=K&&!K.nodeType&&K,la=fc&&Zt&&!Zt.nodeType&&Zt,lu=la&&la.exports===fc,Ml=lu&&lm.process,Wo=function(){try{return la&&la.require&&la.require("util").types||Ml&&Ml.binding&&Ml.binding("util")}catch{}}(),cu=Wo&&Wo.isArrayBuffer,Nr=Wo&&Wo.isDate,Il=Wo&&Wo.isMap,uu=Wo&&Wo.isRegExp,du=Wo&&Wo.isSet,id=Wo&&Wo.isTypedArray;function Bo(Dt,se,ce){switch(ce.length){case 0:return Dt.call(se);case 1:return Dt.call(se,ce[0]);case 2:return Dt.call(se,ce[0],ce[1]);case 3:return Dt.call(se,ce[0],ce[1],ce[2])}return Dt.apply(se,ce)}function gc(Dt,se,ce,He){for(var An=-1,zn=null==Dt?0:Dt.length;++An<zn;){var Yi=Dt[An];se(He,Yi,ce(Yi),Dt)}return He}function Ja(Dt,se){for(var ce=-1,He=null==Dt?0:Dt.length;++ce<He&&!1!==se(Dt[ce],ce,Dt););return Dt}function Ah(Dt,se){for(var ce=null==Dt?0:Dt.length;ce--&&!1!==se(Dt[ce],ce,Dt););return Dt}function cm(Dt,se){for(var ce=-1,He=null==Dt?0:Dt.length;++ce<He;)if(!se(Dt[ce],ce,Dt))return!1;return!0}function Ts(Dt,se){for(var ce=-1,He=null==Dt?0:Dt.length,An=0,zn=[];++ce<He;){var Yi=Dt[ce];se(Yi,ce,Dt)&&(zn[An++]=Yi)}return zn}function mu(Dt,se){return!(null==Dt||!Dt.length)&&vc(Dt,se,0)>-1}function xc(Dt,se,ce){for(var He=-1,An=null==Dt?0:Dt.length;++He<An;)if(ce(se,Dt[He]))return!0;return!1}function $i(Dt,se){for(var ce=-1,He=null==Dt?0:Dt.length,An=Array(He);++ce<He;)An[ce]=se(Dt[ce],ce,Dt);return An}function fr(Dt,se){for(var ce=-1,He=se.length,An=Dt.length;++ce<He;)Dt[An+ce]=se[ce];return Dt}function hu(Dt,se,ce,He){var An=-1,zn=null==Dt?0:Dt.length;for(He&&zn&&(ce=Dt[++An]);++An<zn;)ce=se(ce,Dt[An],An,Dt);return ce}function Sh(Dt,se,ce,He){var An=null==Dt?0:Dt.length;for(He&&An&&(ce=Dt[--An]);An--;)ce=se(ce,Dt[An],An,Dt);return ce}function bc(Dt,se){for(var ce=-1,He=null==Dt?0:Dt.length;++ce<He;)if(se(Dt[ce],ce,Dt))return!0;return!1}var j_=pu("length");function od(Dt,se,ce){var He;return ce(Dt,function(An,zn,Yi){if(se(An,zn,Yi))return He=zn,!1}),He}function ad(Dt,se,ce,He){for(var An=Dt.length,zn=ce+(He?1:-1);He?zn--:++zn<An;)if(se(Dt[zn],zn,Dt))return zn;return-1}function vc(Dt,se,ce){return se==se?function Je(Dt,se,ce){for(var He=ce-1,An=Dt.length;++He<An;)if(Dt[He]===se)return He;return-1}(Dt,se,ce):ad(Dt,mm,ce)}function q_(Dt,se,ce,He){for(var An=ce-1,zn=Dt.length;++An<zn;)if(He(Dt[An],se))return An;return-1}function mm(Dt){return Dt!=Dt}function ks(Dt,se){var ce=null==Dt?0:Dt.length;return ce?tr(Dt,se)/ce:NaN}function pu(Dt){return function(se){return null==se?f:se[Dt]}}function Xr(Dt){return function(se){return null==Dt?f:Dt[se]}}function F_(Dt,se,ce,He,An){return An(Dt,function(zn,Yi,gi){ce=He?(He=!1,zn):se(ce,zn,Yi,gi)}),ce}function tr(Dt,se){for(var ce,He=-1,An=Dt.length;++He<An;){var zn=se(Dt[He]);zn!==f&&(ce=ce===f?zn:ce+zn)}return ce}function Mo(Dt,se){for(var ce=-1,He=Array(Dt);++ce<Dt;)He[ce]=se(ce);return He}function hm(Dt){return Dt&&Dt.slice(0,vn(Dt)+1).replace(im,"")}function Ha(Dt){return function(se){return Dt(se)}}function ts(Dt,se){return $i(se,function(ce){return Dt[ce]})}function yc(Dt,se){return Dt.has(se)}function pm(Dt,se){for(var ce=-1,He=Dt.length;++ce<He&&vc(se,Dt[ce],0)>-1;);return ce}function rd(Dt,se){for(var ce=Dt.length;ce--&&vc(se,Dt[ce],0)>-1;);return ce}var l1=Xr({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),c1=Xr({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function z(Dt){return"\\"+sa[Dt]}function X(Dt){return Cs.test(Dt)}function Qt(Dt){var se=-1,ce=Array(Dt.size);return Dt.forEach(function(He,An){ce[++se]=[An,He]}),ce}function zt(Dt,se){return function(ce){return Dt(se(ce))}}function Yt(Dt,se){for(var ce=-1,He=Dt.length,An=0,zn=[];++ce<He;){var Yi=Dt[ce];(Yi===se||Yi===E)&&(Dt[ce]=E,zn[An++]=ce)}return zn}function me(Dt){var se=-1,ce=Array(Dt.size);return Dt.forEach(function(He){ce[++se]=He}),ce}function De(Dt){return X(Dt)?function eo(Dt){for(var se=El.lastIndex=0;El.test(Dt);)++se;return se}(Dt):j_(Dt)}function un(Dt){return X(Dt)?function Ei(Dt){return Dt.match(El)||[]}(Dt):function um(Dt){return Dt.split("")}(Dt)}function vn(Dt){for(var se=Dt.length;se--&&C_.test(Dt.charAt(se)););return se}var fi=Xr({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Tn=function Dt(se){var u,ce=(se=null==se?Uo:Tn.defaults(Uo.Object(),se,Tn.pick(Uo,Oi))).Array,He=se.Date,An=se.Error,zn=se.Function,Yi=se.Math,gi=se.Object,_u=se.RegExp,fu=se.String,wa=se.TypeError,Ll=ce.prototype,_m=gi.prototype,Q_=se["__core-js_shared__"],R_=zn.prototype.toString,Ki=_m.hasOwnProperty,Dn=0,Oh=(u=/[^.]+$/.exec(Q_&&Q_.keys&&Q_.keys.IE_PROTO||""))?"Symbol(src)_1."+u:"",Ui=_m.toString,U_=R_.call(gi),d1=Uo._,Eh=_u("^"+R_.call(Ki).replace(Xu,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),wc=lu?se.Buffer:f,Vs=se.Symbol,Xs=se.Uint8Array,B_=wc?wc.allocUnsafe:f,sd=zt(gi.getPrototypeOf,gi),fm=gi.create,Na=_m.propertyIsEnumerable,ca=Ll.splice,Za=Vs?Vs.isConcatSpreadable:f,Xo=Vs?Vs.iterator:f,Cc=Vs?Vs.toStringTag:f,Mh=function(){try{var u=Su(gi,"defineProperty");return u({},"",{}),u}catch{}}(),m1=se.clearTimeout!==Uo.clearTimeout&&se.clearTimeout,Z2=He&&He.now!==Uo.Date.now&&He.now,D2=se.setTimeout!==Uo.setTimeout&&se.setTimeout,ld=Yi.ceil,Ih=Yi.floor,tl=gi.getOwnPropertySymbols,z_=wc?wc.isBuffer:f,J_=se.isFinite,cd=Ll.join,ud=zt(gi.keys,gi),ta=Yi.max,Do=Yi.min,h1=He.now,Tc=se.parseInt,kc=Yi.random,On=Ll.reverse,wo=Su(se,"DataView"),gu=Su(se,"Map"),Pl=Su(se,"Promise"),As=Su(se,"Set"),qn=Su(se,"WeakMap"),es=Su(gi,"create"),Da=qn&&new qn,xu={},el=Eu(wo),j2=Eu(gu),q2=Eu(Pl),F2=Eu(As),zo=Eu(qn),Co=Vs?Vs.prototype:f,_o=Co?Co.valueOf:f,p1=Co?Co.toString:f;function bt(u){if(jo(u)&&!Jn(u)&&!(u instanceof xi)){if(u instanceof ns)return u;if(Ki.call(u,"__wrapped__"))return K1(u)}return new ns(u)}var Ac=function(){function u(){}return function(p){if(!Io(p))return{};if(fm)return fm(p);u.prototype=p;var S=new u;return u.prototype=f,S}}();function bu(){}function ns(u,p){this.__wrapped__=u,this.__actions__=[],this.__chain__=!!p,this.__index__=0,this.__values__=f}function xi(u){this.__wrapped__=u,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Yn,this.__views__=[]}function Nl(u){var p=-1,S=null==u?0:u.length;for(this.clear();++p<S;){var J=u[p];this.set(J[0],J[1])}}function gr(u){var p=-1,S=null==u?0:u.length;for(this.clear();++p<S;){var J=u[p];this.set(J[0],J[1])}}function is(u){var p=-1,S=null==u?0:u.length;for(this.clear();++p<S;){var J=u[p];this.set(J[0],J[1])}}function pd(u){var p=-1,S=null==u?0:u.length;for(this.__data__=new is;++p<S;)this.add(u[p])}function os(u){var p=this.__data__=new gr(u);this.size=p.size}function w1(u,p){var S=Jn(u),J=!S&&Mu(u),rt=!S&&!J&&Nc(u),Ct=!S&&!J&&!rt&&kd(u),qt=S||J||rt||Ct,Ut=qt?Mo(u.length,fu):[],te=Ut.length;for(var Ae in u)(p||Ki.call(u,Ae))&&(!qt||!("length"==Ae||rt&&("offset"==Ae||"parent"==Ae)||Ct&&("buffer"==Ae||"byteLength"==Ae||"byteOffset"==Ae)||oi(Ae,te)))&&Ut.push(Ae);return Ut}function $_(u){var p=u.length;return p?u[_d(0,p-1)]:f}function C1(u,p){return wd(ir(u),il(p,0,u.length))}function z2(u){return wd(ir(u))}function Dh(u,p,S){(S!==f&&!Ta(u[p],S)||S===f&&!(p in u))&&Os(u,p,S)}function gm(u,p,S){var J=u[p];(!Ki.call(u,p)||!Ta(J,S)||S===f&&!(p in u))&&Os(u,p,S)}function jh(u,p){for(var S=u.length;S--;)if(Ta(u[S][0],p))return S;return-1}function qh(u,p,S,J){return Zl(u,function(rt,Ct,qt){p(J,rt,S(rt),qt)}),J}function Y_(u,p){return u&&jr(p,ka(p),u)}function Os(u,p,S){"__proto__"==p&&Mh?Mh(u,p,{configurable:!0,enumerable:!0,value:S,writable:!0}):u[p]=S}function Sc(u,p){for(var S=-1,J=p.length,rt=ce(J),Ct=null==u;++S<J;)rt[S]=Ct?f:Ff(u,p[S]);return rt}function il(u,p,S){return u==u&&(S!==f&&(u=u<=S?u:S),p!==f&&(u=u>=p?u:p)),u}function Zr(u,p,S,J,rt,Ct){var qt,Ut=1&p,te=2&p,Ae=4&p;if(S&&(qt=rt?S(u,J,rt,Ct):S(u)),qt!==f)return qt;if(!Io(u))return u;var Se=Jn(u);if(Se){if(qt=function mb(u){var p=u.length,S=new u.constructor(p);return p&&"string"==typeof u[0]&&Ki.call(u,"index")&&(S.index=u.index,S.input=u.input),S}(u),!Ut)return ir(u,qt)}else{var Pe=Ga(u),nn=Pe==xn||Pe==ki;if(Nc(u))return rf(u,Ut);if(Pe==t||Pe==qi||nn&&!rt){if(qt=te||nn?{}:H1(u),!Ut)return te?function uf(u,p){return jr(u,J1(u),p)}(u,function T1(u,p){return u&&jr(p,Cr(p),u)}(qt,u)):function Tm(u,p){return jr(u,xf(u),p)}(u,Y_(qt,u))}else{if(!li[Pe])return rt?u:{};qt=function G1(u,p,S){var J=u.constructor;switch(p){case xa:return Hh(u);case Mr:case Mn:return new J(+u);case ba:return function eb(u,p){var S=p?Hh(u.buffer):u.buffer;return new u.constructor(S,u.byteOffset,u.byteLength)}(u,S);case No:case Fi:case tu:case va:case Oo:case hr:case Wu:case mc:case Xd:return q1(u,S);case an:return new J;case Kn:case Ke:return new J(u);case po:return function j1(u){var p=new u.constructor(u.source,bh.exec(u));return p.lastIndex=u.lastIndex,p}(u);case Pi:return new J;case Ku:return function nb(u){return _o?gi(_o.call(u)):{}}(u)}}(u,Pe,Ut)}}Ct||(Ct=new os);var yn=Ct.get(u);if(yn)return yn;Ct.set(u,qt),C0(u)?u.forEach(function(Pn){qt.add(Zr(Pn,p,S,Pn,u,Ct))}):y0(u)&&u.forEach(function(Pn,hi){qt.set(hi,Zr(Pn,p,S,hi,u,Ct))});var Vn=Se?f:(Ae?te?Sm:tp:te?Cr:ka)(u);return Ja(Vn||u,function(Pn,hi){Vn&&(Pn=u[hi=Pn]),gm(qt,hi,Zr(Pn,p,S,hi,u,Ct))}),qt}function K_(u,p,S){var J=S.length;if(null==u)return!J;for(u=gi(u);J--;){var rt=S[J],qt=u[rt];if(qt===f&&!(rt in u)||!(0,p[rt])(qt))return!1}return!0}function A1(u,p,S){if("function"!=typeof u)throw new wa(w);return yd(function(){u.apply(f,S)},p)}function xm(u,p,S,J){var rt=-1,Ct=mu,qt=!0,Ut=u.length,te=[],Ae=p.length;if(!Ut)return te;S&&(p=$i(p,Ha(S))),J?(Ct=xc,qt=!1):p.length>=200&&(Ct=yc,qt=!1,p=new pd(p));t:for(;++rt<Ut;){var Se=u[rt],Pe=null==S?Se:S(Se);if(Se=J||0!==Se?Se:0,qt&&Pe==Pe){for(var nn=Ae;nn--;)if(p[nn]===Pe)continue t;te.push(Se)}else Ct(p,Pe,J)||te.push(Se)}return te}bt.templateSettings={escape:Vu,evaluate:hh,interpolate:ph,variable:"",imports:{_:bt}},(bt.prototype=bu.prototype).constructor=bt,(ns.prototype=Ac(bu.prototype)).constructor=ns,(xi.prototype=Ac(bu.prototype)).constructor=xi,Nl.prototype.clear=function nl(){this.__data__=es?es(null):{},this.size=0},Nl.prototype.delete=function f1(u){var p=this.has(u)&&delete this.__data__[u];return this.size-=p?1:0,p},Nl.prototype.get=function g1(u){var p=this.__data__;if(es){var S=p[u];return S===C?f:S}return Ki.call(p,u)?p[u]:f},Nl.prototype.has=function Ss(u){var p=this.__data__;return es?p[u]!==f:Ki.call(p,u)},Nl.prototype.set=function dd(u,p){var S=this.__data__;return this.size+=this.has(u)?0:1,S[u]=es&&p===f?C:p,this},gr.prototype.clear=function md(){this.__data__=[],this.size=0},gr.prototype.delete=function Lh(u){var p=this.__data__,S=jh(p,u);return!(S<0||(S==p.length-1?p.pop():ca.call(p,S,1),--this.size,0))},gr.prototype.get=function Ca(u){var p=this.__data__,S=jh(p,u);return S<0?f:p[S][1]},gr.prototype.has=function Ph(u){return jh(this.__data__,u)>-1},gr.prototype.set=function hd(u,p){var S=this.__data__,J=jh(S,u);return J<0?(++this.size,S.push([u,p])):S[J][1]=p,this},is.prototype.clear=function Nh(){this.size=0,this.__data__={hash:new Nl,map:new(gu||gr),string:new Nl}},is.prototype.delete=function vu(u){var p=ip(this,u).delete(u);return this.size-=p?1:0,p},is.prototype.get=function Zh(u){return ip(this,u).get(u)},is.prototype.has=function fn(u){return ip(this,u).has(u)},is.prototype.set=function U2(u,p){var S=ip(this,u),J=S.size;return S.set(u,p),this.size+=S.size==J?0:1,this},pd.prototype.add=pd.prototype.push=function x1(u){return this.__data__.set(u,C),this},pd.prototype.has=function b1(u){return this.__data__.has(u)},os.prototype.clear=function H_(){this.__data__=new gr,this.size=0},os.prototype.delete=function v1(u){var p=this.__data__,S=p.delete(u);return this.size=p.size,S},os.prototype.get=function B2(u){return this.__data__.get(u)},os.prototype.has=function G_(u){return this.__data__.has(u)},os.prototype.set=function y1(u,p){var S=this.__data__;if(S instanceof gr){var J=S.__data__;if(!gu||J.length<199)return J.push([u,p]),this.size=++S.size,this;S=this.__data__=new is(J)}return S.set(u,p),this.size=S.size,this};var Zl=km(ol),Fh=km(Qh,!0);function Es(u,p){var S=!0;return Zl(u,function(J,rt,Ct){return S=!!p(J,rt,Ct)}),S}function bm(u,p,S){for(var J=-1,rt=u.length;++J<rt;){var Ct=u[J],qt=p(Ct);if(null!=qt&&(Ut===f?qt==qt&&!Qr(qt):S(qt,Ut)))var Ut=qt,te=Ct}return te}function Dl(u,p){var S=[];return Zl(u,function(J,rt,Ct){p(J,rt,Ct)&&S.push(J)}),S}function ja(u,p,S,J,rt){var Ct=-1,qt=u.length;for(S||(S=Ic),rt||(rt=[]);++Ct<qt;){var Ut=u[Ct];p>0&&S(Ut)?p>1?ja(Ut,p-1,S,J,rt):fr(rt,Ut):J||(rt[rt.length]=Ut)}return rt}var W_=F1(),Is=F1(!0);function ol(u,p){return u&&W_(u,p,ka)}function Qh(u,p){return u&&Is(u,p,ka)}function vm(u,p){return Ts(p,function(S){return Rl(u[S])})}function yu(u,p){for(var S=0,J=(p=Ps(p,u)).length;null!=u&&S<J;)u=u[cl(p[S++])];return S&&S==J?u:f}function S1(u,p,S){var J=p(u);return Jn(u)?J:fr(J,S(u))}function er(u){return null==u?u===f?"[object Undefined]":"[object Null]":Cc&&Cc in gi(u)?function cb(u){var p=Ki.call(u,Cc),S=u[Cc];try{u[Cc]=f;var J=!0}catch{}var rt=Ui.call(u);return J&&(p?u[Cc]=S:delete u[Cc]),rt}(u):function Cf(u){return Ui.call(u)}(u)}function V_(u,p){return u>p}function J2(u,p){return null!=u&&Ki.call(u,p)}function H2(u,p){return null!=u&&p in gi(u)}function Rh(u,p,S){for(var J=S?xc:mu,rt=u[0].length,Ct=u.length,qt=Ct,Ut=ce(Ct),te=1/0,Ae=[];qt--;){var Se=u[qt];qt&&p&&(Se=$i(Se,Ha(p))),te=Do(Se.length,te),Ut[qt]=!S&&(p||rt>=120&&Se.length>=120)?new pd(qt&&Se):f}Se=u[0];var Pe=-1,nn=Ut[0];t:for(;++Pe<rt&&Ae.length<te;){var yn=Se[Pe],Ln=p?p(yn):yn;if(yn=S||0!==yn?yn:0,!(nn?yc(nn,Ln):J(Ae,Ln,S))){for(qt=Ct;--qt;){var Vn=Ut[qt];if(!(Vn?yc(Vn,Ln):J(u[qt],Ln,S)))continue t}nn&&nn.push(Ln),Ae.push(yn)}}return Ae}function ym(u,p,S){var J=null==(u=rp(u,p=Ps(p,u)))?u:u[cl(ss(p))];return null==J?f:Bo(J,u,S)}function O1(u){return jo(u)&&er(u)==qi}function wm(u,p,S,J,rt){return u===p||(null==u||null==p||!jo(u)&&!jo(p)?u!=u&&p!=p:function W2(u,p,S,J,rt,Ct){var qt=Jn(u),Ut=Jn(p),te=qt?to:Ga(u),Ae=Ut?to:Ga(p),Se=(te=te==qi?t:te)==t,Pe=(Ae=Ae==qi?t:Ae)==t,nn=te==Ae;if(nn&&Nc(u)){if(!Nc(p))return!1;qt=!0,Se=!1}if(nn&&!Se)return Ct||(Ct=new os),qt||kd(u)?Xh(u,p,S,J,rt,Ct):function sb(u,p,S,J,rt,Ct,qt){switch(S){case ba:if(u.byteLength!=p.byteLength||u.byteOffset!=p.byteOffset)return!1;u=u.buffer,p=p.buffer;case xa:return!(u.byteLength!=p.byteLength||!Ct(new Xs(u),new Xs(p)));case Mr:case Mn:case Kn:return Ta(+u,+p);case pi:return u.name==p.name&&u.message==p.message;case po:case Ke:return u==p+"";case an:var Ut=Qt;case Pi:if(Ut||(Ut=me),u.size!=p.size&&!(1&J))return!1;var Ae=qt.get(u);if(Ae)return Ae==p;J|=2,qt.set(u,p);var Se=Xh(Ut(u),Ut(p),J,rt,Ct,qt);return qt.delete(u),Se;case Ku:if(_o)return _o.call(u)==_o.call(p)}return!1}(u,p,te,S,J,rt,Ct);if(!(1&S)){var yn=Se&&Ki.call(u,"__wrapped__"),Ln=Pe&&Ki.call(p,"__wrapped__");if(yn||Ln){var Vn=yn?u.value():u,Pn=Ln?p.value():p;return Ct||(Ct=new os),rt(Vn,Pn,S,J,Ct)}}return!!nn&&(Ct||(Ct=new os),function lb(u,p,S,J,rt,Ct){var qt=1&S,Ut=tp(u),te=Ut.length;if(te!=tp(p).length&&!qt)return!1;for(var Pe=te;Pe--;){var nn=Ut[Pe];if(!(qt?nn in p:Ki.call(p,nn)))return!1}var yn=Ct.get(u),Ln=Ct.get(p);if(yn&&Ln)return yn==p&&Ln==u;var Vn=!0;Ct.set(u,p),Ct.set(p,u);for(var Pn=qt;++Pe<te;){var hi=u[nn=Ut[Pe]],bi=p[nn];if(J)var Rr=qt?J(bi,hi,nn,p,u,Ct):J(hi,bi,nn,u,p,Ct);if(!(Rr===f?hi===bi||rt(hi,bi,S,J,Ct):Rr)){Vn=!1;break}Pn||(Pn="constructor"==nn)}if(Vn&&!Pn){var rr=u.constructor,Ur=p.constructor;rr!=Ur&&"constructor"in u&&"constructor"in p&&!("function"==typeof rr&&rr instanceof rr&&"function"==typeof Ur&&Ur instanceof Ur)&&(Vn=!1)}return Ct.delete(u),Ct.delete(p),Vn}(u,p,S,J,rt,Ct))}(u,p,S,J,wm,rt))}function X_(u,p,S,J){var rt=S.length,Ct=rt,qt=!J;if(null==u)return!Ct;for(u=gi(u);rt--;){var Ut=S[rt];if(qt&&Ut[2]?Ut[1]!==u[Ut[0]]:!(Ut[0]in u))return!1}for(;++rt<Ct;){var te=(Ut=S[rt])[0],Ae=u[te],Se=Ut[1];if(qt&&Ut[2]){if(Ae===f&&!(te in u))return!1}else{var Pe=new os;if(J)var nn=J(Ae,Se,te,u,p,Pe);if(!(nn===f?wm(Se,Ae,3,J,Pe):nn))return!1}}return!0}function M1(u){return!(!Io(u)||function hb(u){return!!Oh&&Oh in u}(u))&&(Rl(u)?Eh:O_).test(Eu(u))}function Uh(u){return"function"==typeof u?u:null==u?Tr:"object"==typeof u?Jn(u)?io(u[0],u[1]):no(u):j0(u)}function tf(u){if(!Ou(u))return ud(u);var p=[];for(var S in gi(u))Ki.call(u,S)&&"constructor"!=S&&p.push(S);return p}function Hi(u,p){return u<p}function Bh(u,p){var S=-1,J=wr(u)?ce(u.length):[];return Zl(u,function(rt,Ct,qt){J[++S]=p(rt,Ct,qt)}),J}function no(u){var p=gf(u);return 1==p.length&&p[0][2]?op(p[0][0],p[0][1]):function(S){return S===u||X_(S,u,p)}}function io(u,p){return vf(u)&&Lc(p)?op(cl(u),p):function(S){var J=Ff(S,u);return J===f&&J===p?Qf(S,u):wm(p,J,3)}}function Dr(u,p,S,J,rt){u!==p&&W_(p,function(Ct,qt){if(rt||(rt=new os),Io(Ct))!function nr(u,p,S,J,rt,Ct,qt){var Ut=sp(u,S),te=sp(p,S),Ae=qt.get(te);if(Ae)Dh(u,S,Ae);else{var Se=Ct?Ct(Ut,te,S+"",u,p,qt):f,Pe=Se===f;if(Pe){var nn=Jn(te),yn=!nn&&Nc(te),Ln=!nn&&!yn&&kd(te);Se=te,nn||yn||Ln?Jn(Ut)?Se=Ut:Ho(Ut)?Se=ir(Ut):yn?(Pe=!1,Se=rf(te,!0)):Ln?(Pe=!1,Se=q1(te,!0)):Se=[]:Mm(te)||Mu(te)?(Se=Ut,Mu(Ut)?Se=A0(Ut):(!Io(Ut)||Rl(Ut))&&(Se=H1(te))):Pe=!1}Pe&&(qt.set(te,Se),rt(Se,te,J,Ct,qt),qt.delete(te)),Dh(u,S,Se)}}(u,p,qt,S,Dr,J,rt);else{var Ut=J?J(sp(u,qt),Ct,qt+"",u,p,rt):f;Ut===f&&(Ut=Ct),Dh(u,qt,Ut)}},Cr)}function L1(u,p){var S=u.length;if(S)return oi(p+=p<0?S:0,S)?u[p]:f}function jl(u,p,S){p=p.length?$i(p,function(Ct){return Jn(Ct)?function(qt){return yu(qt,1===Ct.length?Ct[0]:Ct)}:Ct}):[Tr];var J=-1;return p=$i(p,Ha(In())),function r1(Dt,se){var ce=Dt.length;for(Dt.sort(se);ce--;)Dt[ce]=Dt[ce].value;return Dt}(Bh(u,function(Ct,qt,Ut){return{criteria:$i(p,function(Ae){return Ae(Ct)}),index:++J,value:Ct}}),function(Ct,qt){return function sf(u,p,S){for(var J=-1,rt=u.criteria,Ct=p.criteria,qt=rt.length,Ut=S.length;++J<qt;){var te=Gh(rt[J],Ct[J]);if(te)return J>=Ut?te:te*("desc"==S[J]?-1:1)}return u.index-p.index}(Ct,qt,S)})}function ef(u,p,S){for(var J=-1,rt=p.length,Ct={};++J<rt;){var qt=p[J],Ut=yu(u,qt);S(Ut,qt)&&Tu(Ct,Ps(qt,u),Ut)}return Ct}function wu(u,p,S,J){var rt=J?q_:vc,Ct=-1,qt=p.length,Ut=u;for(u===p&&(p=ir(p)),S&&(Ut=$i(u,Ha(S)));++Ct<qt;)for(var te=0,Ae=p[Ct],Se=S?S(Ae):Ae;(te=rt(Ut,Se,te,J))>-1;)Ut!==u&&ca.call(Ut,te,1),ca.call(u,te,1);return u}function Cu(u,p){for(var S=u?p.length:0,J=S-1;S--;){var rt=p[S];if(S==J||rt!==Ct){var Ct=rt;oi(rt)?ca.call(u,rt,1):Mc(u,rt)}}return u}function _d(u,p){return u+Ih(kc()*(p-u+1))}function Oc(u,p){var S="";if(!u||p<1||p>fe)return S;do{p%2&&(S+=u),(p=Ih(p/2))&&(u+=u)}while(p);return S}function kn(u,p){return rs(or(u,p,Tr),u+"")}function Ec(u){return $_(Ad(u))}function al(u,p){var S=Ad(u);return wd(S,il(p,0,S.length))}function Tu(u,p,S,J){if(!Io(u))return u;for(var rt=-1,Ct=(p=Ps(p,u)).length,qt=Ct-1,Ut=u;null!=Ut&&++rt<Ct;){var te=cl(p[rt]),Ae=S;if("__proto__"===te||"constructor"===te||"prototype"===te)return u;if(rt!=qt){var Se=Ut[te];(Ae=J?J(Se,te,Ut):f)===f&&(Ae=Io(Se)?Se:oi(p[rt+1])?[]:{})}gm(Ut,te,Ae),Ut=Ut[te]}return u}var ql=Da?function(u,p){return Da.set(u,p),u}:Tr,ze=Mh?function(u,p){return Mh(u,"toString",{configurable:!0,enumerable:!1,value:Bf(p),writable:!0})}:Tr;function Fl(u){return wd(Ad(u))}function ua(u,p,S){var J=-1,rt=u.length;p<0&&(p=-p>rt?0:rt+p),(S=S>rt?rt:S)<0&&(S+=rt),rt=p>S?0:S-p>>>0,p>>>=0;for(var Ct=ce(rt);++J<rt;)Ct[J]=u[J+p];return Ct}function tb(u,p){var S;return Zl(u,function(J,rt,Ct){return!(S=p(J,rt,Ct))}),!!S}function Ls(u,p,S){var J=0,rt=null==u?J:u.length;if("number"==typeof p&&p==p&&rt<=2147483647){for(;J<rt;){var Ct=J+rt>>>1,qt=u[Ct];null!==qt&&!Qr(qt)&&(S?qt<=p:qt<p)?J=Ct+1:rt=Ct}return rt}return Cm(u,p,Tr,S)}function Cm(u,p,S,J){var rt=0,Ct=null==u?0:u.length;if(0===Ct)return 0;for(var qt=(p=S(p))!=p,Ut=null===p,te=Qr(p),Ae=p===f;rt<Ct;){var Se=Ih((rt+Ct)/2),Pe=S(u[Se]),nn=Pe!==f,yn=null===Pe,Ln=Pe==Pe,Vn=Qr(Pe);if(qt)var Pn=J||Ln;else Pn=Ae?Ln&&(J||nn):Ut?Ln&&nn&&(J||!yn):te?Ln&&nn&&!yn&&(J||!Vn):!yn&&!Vn&&(J?Pe<=p:Pe<p);Pn?rt=Se+1:Ct=Se}return Do(Ct,4294967294)}function Z1(u,p){for(var S=-1,J=u.length,rt=0,Ct=[];++S<J;){var qt=u[S],Ut=p?p(qt):qt;if(!S||!Ta(Ut,te)){var te=Ut;Ct[rt++]=0===qt?0:qt}}return Ct}function rl(u){return"number"==typeof u?u:Qr(u)?NaN:+u}function xr(u){if("string"==typeof u)return u;if(Jn(u))return $i(u,xr)+"";if(Qr(u))return p1?p1.call(u):"";var p=u+"";return"0"==p&&1/u==-ye?"-0":p}function da(u,p,S){var J=-1,rt=mu,Ct=u.length,qt=!0,Ut=[],te=Ut;if(S)qt=!1,rt=xc;else if(Ct>=200){var Ae=p?null:ab(u);if(Ae)return me(Ae);qt=!1,rt=yc,te=new pd}else te=p?[]:Ut;t:for(;++J<Ct;){var Se=u[J],Pe=p?p(Se):Se;if(Se=S||0!==Se?Se:0,qt&&Pe==Pe){for(var nn=te.length;nn--;)if(te[nn]===Pe)continue t;p&&te.push(Pe),Ut.push(Se)}else rt(te,Pe,S)||(te!==Ut&&te.push(Pe),Ut.push(Se))}return Ut}function Mc(u,p){return null==(u=rp(u,p=Ps(p,u)))||delete u[cl(ss(p))]}function sl(u,p,S,J){return Tu(u,p,S(yu(u,p)),J)}function fd(u,p,S,J){for(var rt=u.length,Ct=J?rt:-1;(J?Ct--:++Ct<rt)&&p(u[Ct],Ct,u););return S?ua(u,J?0:Ct,J?Ct+1:rt):ua(u,J?Ct+1:0,J?rt:Ct)}function D1(u,p){var S=u;return S instanceof xi&&(S=S.value()),hu(p,function(J,rt){return rt.func.apply(rt.thisArg,fr([J],rt.args))},S)}function zh(u,p,S){var J=u.length;if(J<2)return J?da(u[0]):[];for(var rt=-1,Ct=ce(J);++rt<J;)for(var qt=u[rt],Ut=-1;++Ut<J;)Ut!=rt&&(Ct[rt]=xm(Ct[rt]||qt,u[Ut],p,S));return da(ja(Ct,1),p,S)}function Jh(u,p,S){for(var J=-1,rt=u.length,Ct=p.length,qt={};++J<rt;)S(qt,u[J],J<Ct?p[J]:f);return qt}function ku(u){return Ho(u)?u:[]}function gd(u){return"function"==typeof u?u:Tr}function Ps(u,p){return Jn(u)?u:vf(u,p)?[u]:Y1(Bi(u))}var of=kn;function as(u,p,S){var J=u.length;return S=S===f?J:S,!p&&S>=J?u:ua(u,p,S)}var af=m1||function(u){return Uo.clearTimeout(u)};function rf(u,p){if(p)return u.slice();var S=u.length,J=B_?B_(S):new u.constructor(S);return u.copy(J),J}function Hh(u){var p=new u.constructor(u.byteLength);return new Xs(p).set(new Xs(u)),p}function q1(u,p){var S=p?Hh(u.buffer):u.buffer;return new u.constructor(S,u.byteOffset,u.length)}function Gh(u,p){if(u!==p){var S=u!==f,J=null===u,rt=u==u,Ct=Qr(u),qt=p!==f,Ut=null===p,te=p==p,Ae=Qr(p);if(!Ut&&!Ae&&!Ct&&u>p||Ct&&qt&&te&&!Ut&&!Ae||J&&qt&&te||!S&&te||!rt)return 1;if(!J&&!Ct&&!Ae&&u<p||Ae&&S&&rt&&!J&&!Ct||Ut&&S&&rt||!qt&&rt||!te)return-1}return 0}function lf(u,p,S,J){for(var rt=-1,Ct=u.length,qt=S.length,Ut=-1,te=p.length,Ae=ta(Ct-qt,0),Se=ce(te+Ae),Pe=!J;++Ut<te;)Se[Ut]=p[Ut];for(;++rt<qt;)(Pe||rt<Ct)&&(Se[S[rt]]=u[rt]);for(;Ae--;)Se[Ut++]=u[rt++];return Se}function cf(u,p,S,J){for(var rt=-1,Ct=u.length,qt=-1,Ut=S.length,te=-1,Ae=p.length,Se=ta(Ct-Ut,0),Pe=ce(Se+Ae),nn=!J;++rt<Se;)Pe[rt]=u[rt];for(var yn=rt;++te<Ae;)Pe[yn+te]=p[te];for(;++qt<Ut;)(nn||rt<Ct)&&(Pe[yn+S[qt]]=u[rt++]);return Pe}function ir(u,p){var S=-1,J=u.length;for(p||(p=ce(J));++S<J;)p[S]=u[S];return p}function jr(u,p,S,J){var rt=!S;S||(S={});for(var Ct=-1,qt=p.length;++Ct<qt;){var Ut=p[Ct],te=J?J(S[Ut],u[Ut],Ut,S,u):f;te===f&&(te=u[Ut]),rt?Os(S,Ut,te):gm(S,Ut,te)}return S}function $h(u,p){return function(S,J){var rt=Jn(S)?gc:qh,Ct=p?p():{};return rt(S,u,In(J,2),Ct)}}function Au(u){return kn(function(p,S){var J=-1,rt=S.length,Ct=rt>1?S[rt-1]:f,qt=rt>2?S[2]:f;for(Ct=u.length>3&&"function"==typeof Ct?(rt--,Ct):f,qt&&jt(S[0],S[1],qt)&&(Ct=rt<3?f:Ct,rt=1),p=gi(p);++J<rt;){var Ut=S[J];Ut&&u(p,Ut,J,Ct)}return p})}function km(u,p){return function(S,J){if(null==S)return S;if(!wr(S))return u(S,J);for(var rt=S.length,Ct=p?rt:-1,qt=gi(S);(p?Ct--:++Ct<rt)&&!1!==J(qt[Ct],Ct,qt););return S}}function F1(u){return function(p,S,J){for(var rt=-1,Ct=gi(p),qt=J(p),Ut=qt.length;Ut--;){var te=qt[u?Ut:++rt];if(!1===S(Ct[te],te,Ct))break}return p}}function df(u){return function(p){var S=X(p=Bi(p))?un(p):f,J=S?S[0]:p.charAt(0),rt=S?as(S,1).join(""):p.slice(1);return J[u]()+rt}}function xd(u){return function(p){return hu(N0(Rf(p).replace(Ol,"")),u,"")}}function bd(u){return function(){var p=arguments;switch(p.length){case 0:return new u;case 1:return new u(p[0]);case 2:return new u(p[0],p[1]);case 3:return new u(p[0],p[1],p[2]);case 4:return new u(p[0],p[1],p[2],p[3]);case 5:return new u(p[0],p[1],p[2],p[3],p[4]);case 6:return new u(p[0],p[1],p[2],p[3],p[4],p[5]);case 7:return new u(p[0],p[1],p[2],p[3],p[4],p[5],p[6])}var S=Ac(u.prototype),J=u.apply(S,p);return Io(J)?J:S}}function mf(u){return function(p,S,J){var rt=gi(p);if(!wr(p)){var Ct=In(S,3);p=ka(p),S=function(Ut){return Ct(rt[Ut],Ut,rt)}}var qt=u(p,S,J);return qt>-1?rt[Ct?p[qt]:qt]:f}}function hf(u){return Ql(function(p){var S=p.length,J=S,rt=ns.prototype.thru;for(u&&p.reverse();J--;){var Ct=p[J];if("function"!=typeof Ct)throw new wa(w);if(rt&&!qt&&"wrapper"==np(Ct))var qt=new ns([],!0)}for(J=qt?J:S;++J<S;){var Ut=np(Ct=p[J]),te="wrapper"==Ut?ep(Ct):f;qt=te&&yf(te[0])&&424==te[1]&&!te[4].length&&1==te[9]?qt[np(te[0])].apply(qt,te[3]):1==Ct.length&&yf(Ct)?qt[Ut]():qt.thru(Ct)}return function(){var Ae=arguments,Se=Ae[0];if(qt&&1==Ae.length&&Jn(Se))return qt.plant(Se).value();for(var Pe=0,nn=S?p[Pe].apply(this,Ae):Se;++Pe<S;)nn=p[Pe].call(this,nn);return nn}})}function Am(u,p,S,J,rt,Ct,qt,Ut,te,Ae){var Se=128&p,Pe=1&p,nn=2&p,yn=24&p,Ln=512&p,Vn=nn?f:bd(u);return function Pn(){for(var hi=arguments.length,bi=ce(hi),Rr=hi;Rr--;)bi[Rr]=arguments[Rr];if(yn)var rr=vd(Pn),Ur=function s1(Dt,se){for(var ce=Dt.length,He=0;ce--;)Dt[ce]===se&&++He;return He}(bi,rr);if(J&&(bi=lf(bi,J,rt,yn)),Ct&&(bi=cf(bi,Ct,qt,yn)),hi-=Ur,yn&&hi<Ae){var Go=Yt(bi,rr);return R1(u,p,Am,Pn.placeholder,S,bi,Go,Ut,te,Ae-hi)}var Ns=Pe?S:this,Bl=nn?Ns[u]:u;return hi=bi.length,Ut?bi=function Tf(u,p){for(var S=u.length,J=Do(p.length,S),rt=ir(u);J--;){var Ct=p[J];u[J]=oi(Ct,S)?rt[Ct]:f}return u}(bi,Ut):Ln&&hi>1&&bi.reverse(),Se&&te<hi&&(bi.length=te),this&&this!==Uo&&this instanceof Pn&&(Bl=Vn||bd(Bl)),Bl.apply(Ns,bi)}}function Yh(u,p){return function(S,J){return function $2(u,p,S,J){return ol(u,function(rt,Ct,qt){p(J,S(rt),Ct,qt)}),J}(S,u,p(J),{})}}function Kh(u,p){return function(S,J){var rt;if(S===f&&J===f)return p;if(S!==f&&(rt=S),J!==f){if(rt===f)return J;"string"==typeof S||"string"==typeof J?(S=xr(S),J=xr(J)):(S=rl(S),J=rl(J)),rt=u(S,J)}return rt}}function pf(u){return Ql(function(p){return p=$i(p,Ha(In())),kn(function(S){var J=this;return u(p,function(rt){return Bo(rt,J,S)})})})}function Wh(u,p){var S=(p=p===f?" ":xr(p)).length;if(S<2)return S?Oc(p,u):p;var J=Oc(p,ld(u/De(p)));return X(p)?as(un(J),0,u).join(""):J.slice(0,u)}function _f(u){return function(p,S,J){return J&&"number"!=typeof J&&jt(p,S,J)&&(S=J=f),p=Ul(p),S===f?(S=p,p=0):S=Ul(S),function nf(u,p,S,J){for(var rt=-1,Ct=ta(ld((p-u)/(S||1)),0),qt=ce(Ct);Ct--;)qt[J?Ct:++rt]=u,u+=S;return qt}(p,S,J=J===f?p<S?1:-1:Ul(J),u)}}function Vh(u){return function(p,S){return"string"==typeof p&&"string"==typeof S||(p=ls(p),S=ls(S)),u(p,S)}}function R1(u,p,S,J,rt,Ct,qt,Ut,te,Ae){var Se=8&p;p|=Se?32:64,4&(p&=~(Se?64:32))||(p&=-4);var Vn=[u,p,rt,Se?Ct:f,Se?qt:f,Se?f:Ct,Se?f:qt,Ut,te,Ae],Pn=S.apply(f,Vn);return yf(u)&&vr(Pn,Vn),Pn.placeholder=J,Mi(Pn,u,p)}function ff(u){var p=Yi[u];return function(S,J){if(S=ls(S),(J=null==J?0:Do(Wn(J),292))&&J_(S)){var rt=(Bi(S)+"e").split("e");return+((rt=(Bi(p(rt[0]+"e"+(+rt[1]+J)))+"e").split("e"))[0]+"e"+(+rt[1]-J))}return p(S)}}var ab=As&&1/me(new As([,-0]))[1]==ye?function(u){return new As(u)}:bp;function U1(u){return function(p){var S=Ga(p);return S==an?Qt(p):S==Pi?function ve(Dt){var se=-1,ce=Array(Dt.size);return Dt.forEach(function(He){ce[++se]=[He,He]}),ce}(p):function Vo(Dt,se){return $i(se,function(ce){return[ce,Dt[ce]]})}(p,u(p))}}function ll(u,p,S,J,rt,Ct,qt,Ut){var te=2&p;if(!te&&"function"!=typeof u)throw new wa(w);var Ae=J?J.length:0;if(Ae||(p&=-97,J=rt=f),qt=qt===f?qt:ta(Wn(qt),0),Ut=Ut===f?Ut:Wn(Ut),Ae-=rt?rt.length:0,64&p){var Se=J,Pe=rt;J=rt=f}var nn=te?f:ep(u),yn=[u,p,S,J,rt,Se,Pe,Ct,qt,Ut];if(nn&&function ap(u,p){var S=u[1],J=p[1],rt=S|J;if(!(rt<131)&&!(128==J&&8==S||128==J&&256==S&&u[7].length<=p[8]||384==J&&p[7].length<=p[8]&&8==S))return u;1&J&&(u[2]=p[2],rt|=1&S?0:4);var Ut=p[3];if(Ut){var te=u[3];u[3]=te?lf(te,Ut,p[4]):Ut,u[4]=te?Yt(u[3],E):p[4]}(Ut=p[5])&&(u[5]=(te=u[5])?cf(te,Ut,p[6]):Ut,u[6]=te?Yt(u[5],E):p[6]),(Ut=p[7])&&(u[7]=Ut),128&J&&(u[8]=null==u[8]?p[8]:Do(u[8],p[8])),null==u[9]&&(u[9]=p[9]),u[0]=p[0],u[1]=rt}(yn,nn),u=yn[0],p=yn[1],S=yn[2],J=yn[3],rt=yn[4],!(Ut=yn[9]=yn[9]===f?te?0:u.length:ta(yn[9]-Ae,0))&&24&p&&(p&=-25),p&&1!=p)Ln=8==p||16==p?function Q1(u,p,S){var J=bd(u);return function rt(){for(var Ct=arguments.length,qt=ce(Ct),Ut=Ct,te=vd(rt);Ut--;)qt[Ut]=arguments[Ut];var Ae=Ct<3&&qt[0]!==te&&qt[Ct-1]!==te?[]:Yt(qt,te);return(Ct-=Ae.length)<S?R1(u,p,Am,rt.placeholder,f,qt,Ae,f,f,S-Ct):Bo(this&&this!==Uo&&this instanceof rt?J:u,this,qt)}}(u,p,Ut):32!=p&&33!=p||rt.length?Am.apply(f,yn):function ob(u,p,S,J){var rt=1&p,Ct=bd(u);return function qt(){for(var Ut=-1,te=arguments.length,Ae=-1,Se=J.length,Pe=ce(Se+te),nn=this&&this!==Uo&&this instanceof qt?Ct:u;++Ae<Se;)Pe[Ae]=J[Ae];for(;te--;)Pe[Ae++]=arguments[++Ut];return Bo(nn,rt?S:this,Pe)}}(u,p,S,J);else var Ln=function ib(u,p,S){var J=1&p,rt=bd(u);return function Ct(){return(this&&this!==Uo&&this instanceof Ct?rt:u).apply(J?S:this,arguments)}}(u,p,S);return Mi((nn?ql:vr)(Ln,yn),u,p)}function B1(u,p,S,J){return u===f||Ta(u,_m[S])&&!Ki.call(J,S)?p:u}function z1(u,p,S,J,rt,Ct){return Io(u)&&Io(p)&&(Ct.set(p,u),Dr(u,p,f,z1,Ct),Ct.delete(p)),u}function rb(u){return Mm(u)?f:u}function Xh(u,p,S,J,rt,Ct){var qt=1&S,Ut=u.length,te=p.length;if(Ut!=te&&!(qt&&te>Ut))return!1;var Ae=Ct.get(u),Se=Ct.get(p);if(Ae&&Se)return Ae==p&&Se==u;var Pe=-1,nn=!0,yn=2&S?new pd:f;for(Ct.set(u,p),Ct.set(p,u);++Pe<Ut;){var Ln=u[Pe],Vn=p[Pe];if(J)var Pn=qt?J(Vn,Ln,Pe,p,u,Ct):J(Ln,Vn,Pe,u,p,Ct);if(Pn!==f){if(Pn)continue;nn=!1;break}if(yn){if(!bc(p,function(hi,bi){if(!yc(yn,bi)&&(Ln===hi||rt(Ln,hi,S,J,Ct)))return yn.push(bi)})){nn=!1;break}}else if(Ln!==Vn&&!rt(Ln,Vn,S,J,Ct)){nn=!1;break}}return Ct.delete(u),Ct.delete(p),nn}function Ql(u){return rs(or(u,f,kf),u+"")}function tp(u){return S1(u,ka,xf)}function Sm(u){return S1(u,Cr,J1)}var ep=Da?function(u){return Da.get(u)}:bp;function np(u){for(var p=u.name+"",S=xu[p],J=Ki.call(xu,p)?S.length:0;J--;){var rt=S[J],Ct=rt.func;if(null==Ct||Ct==u)return rt.name}return p}function vd(u){return(Ki.call(bt,"placeholder")?bt:u).placeholder}function In(){var u=bt.iteratee||zf;return u=u===zf?Uh:u,arguments.length?u(arguments[0],arguments[1]):u}function ip(u,p){var S=u.__data__;return function $1(u){var p=typeof u;return"string"==p||"number"==p||"symbol"==p||"boolean"==p?"__proto__"!==u:null===u}(p)?S["string"==typeof p?"string":"hash"]:S.map}function gf(u){for(var p=ka(u),S=p.length;S--;){var J=p[S],rt=u[J];p[S]=[J,rt,Lc(rt)]}return p}function Su(u,p){var S=function H(Dt,se){return null==Dt?f:Dt[se]}(u,p);return M1(S)?S:f}var xf=tl?function(u){return null==u?[]:(u=gi(u),Ts(tl(u),function(p){return Na.call(u,p)}))}:Lm,J1=tl?function(u){for(var p=[];u;)fr(p,xf(u)),u=sd(u);return p}:Lm,Ga=er;function bf(u,p,S){for(var J=-1,rt=(p=Ps(p,u)).length,Ct=!1;++J<rt;){var qt=cl(p[J]);if(!(Ct=null!=u&&S(u,qt)))break;u=u[qt]}return Ct||++J!=rt?Ct:!!(rt=null==u?0:u.length)&&_p(rt)&&oi(qt,rt)&&(Jn(u)||Mu(u))}function H1(u){return"function"!=typeof u.constructor||Ou(u)?{}:Ac(sd(u))}function Ic(u){return Jn(u)||Mu(u)||!!(Za&&u&&u[Za])}function oi(u,p){var S=typeof u;return!!(p=p??fe)&&("number"==S||"symbol"!=S&&M_.test(u))&&u>-1&&u%1==0&&u<p}function jt(u,p,S){if(!Io(S))return!1;var J=typeof p;return!!("number"==J?wr(S)&&oi(p,S.length):"string"==J&&p in S)&&Ta(S[p],u)}function vf(u,p){if(Jn(u))return!1;var S=typeof u;return!("number"!=S&&"symbol"!=S&&"boolean"!=S&&null!=u&&!Qr(u))||_h.test(u)||!eu.test(u)||null!=p&&u in gi(p)}function yf(u){var p=np(u),S=bt[p];if("function"!=typeof S||!(p in xi.prototype))return!1;if(u===S)return!0;var J=ep(S);return!!J&&u===J[0]}(wo&&Ga(new wo(new ArrayBuffer(1)))!=ba||gu&&Ga(new gu)!=an||Pl&&Ga(Pl.resolve())!=Gn||As&&Ga(new As)!=Pi||qn&&Ga(new qn)!=ga)&&(Ga=function(u){var p=er(u),S=p==t?u.constructor:f,J=S?Eu(S):"";if(J)switch(J){case el:return ba;case j2:return an;case q2:return Gn;case F2:return Pi;case zo:return ga}return p});var $a=Q_?Rl:Iu;function Ou(u){var p=u&&u.constructor;return u===("function"==typeof p&&p.prototype||_m)}function Lc(u){return u==u&&!Io(u)}function op(u,p){return function(S){return null!=S&&S[u]===p&&(p!==f||u in gi(S))}}function or(u,p,S){return p=ta(p===f?u.length-1:p,0),function(){for(var J=arguments,rt=-1,Ct=ta(J.length-p,0),qt=ce(Ct);++rt<Ct;)qt[rt]=J[p+rt];rt=-1;for(var Ut=ce(p+1);++rt<p;)Ut[rt]=J[rt];return Ut[p]=S(qt),Bo(u,this,Ut)}}function rp(u,p){return p.length<2?u:yu(u,ua(p,0,-1))}function sp(u,p){if(("constructor"!==p||"function"!=typeof u[p])&&"__proto__"!=p)return u[p]}var vr=oo(ql),yd=D2||function(u,p){return Uo.setTimeout(u,p)},rs=oo(ze);function Mi(u,p,S){var J=p+"";return rs(u,function lo(u,p){var S=p.length;if(!S)return u;var J=S-1;return p[J]=(S>1?"& ":"")+p[J],p=p.join(S>2?", ":" "),u.replace(fh,"{\n/* [wrapped with "+p+"] */\n")}(J,function pb(u,p){return Ja(ri,function(S){var J="_."+S[0];p&S[1]&&!mu(u,J)&&u.push(J)}),u.sort()}(function db(u){var p=u.match(pc);return p?p[1].split(T_):[]}(J),S)))}function oo(u){var p=0,S=0;return function(){var J=h1(),rt=16-(J-S);if(S=J,rt>0){if(++p>=800)return arguments[0]}else p=0;return u.apply(f,arguments)}}function wd(u,p){var S=-1,J=u.length,rt=J-1;for(p=p===f?J:p;++S<p;){var Ct=_d(S,rt),qt=u[Ct];u[Ct]=u[S],u[S]=qt}return u.length=p,u}var Y1=function wf(u){var p=Lf(u,function(J){return 500===S.size&&S.clear(),J}),S=p.cache;return p}(function(u){var p=[];return 46===u.charCodeAt(0)&&p.push(""),u.replace(y_,function(S,J,rt,Ct){p.push(rt?Ct.replace(k_,"$1"):J||S)}),p});function cl(u){if("string"==typeof u||Qr(u))return u;var p=u+"";return"0"==p&&1/u==-ye?"-0":p}function Eu(u){if(null!=u){try{return R_.call(u)}catch{}try{return u+""}catch{}}return""}function K1(u){if(u instanceof xi)return u.clone();var p=new ns(u.__wrapped__,u.__chain__);return p.__actions__=ir(u.__actions__),p.__index__=u.__index__,p.__values__=u.__values__,p}var xb=kn(function(u,p){return Ho(u)?xm(u,ja(p,1,Ho,!0)):[]}),W1=kn(function(u,p){var S=ss(p);return Ho(S)&&(S=f),Ho(u)?xm(u,ja(p,1,Ho,!0),In(S,2)):[]}),Ya=kn(function(u,p){var S=ss(p);return Ho(S)&&(S=f),Ho(u)?xm(u,ja(p,1,Ho,!0),f,S):[]});function Om(u,p,S){var J=null==u?0:u.length;if(!J)return-1;var rt=null==S?0:Wn(S);return rt<0&&(rt=ta(J+rt,0)),ad(u,In(p,3),rt)}function Em(u,p,S){var J=null==u?0:u.length;if(!J)return-1;var rt=J-1;return S!==f&&(rt=Wn(S),rt=S<0?ta(J+rt,0):Do(rt,J-1)),ad(u,In(p,3),rt,!0)}function kf(u){return null!=u&&u.length?ja(u,1):[]}function t0(u){return u&&u.length?u[0]:f}var Tb=kn(function(u){var p=$i(u,ku);return p.length&&p[0]===u[0]?Rh(p):[]}),kb=kn(function(u){var p=ss(u),S=$i(u,ku);return p===ss(S)?p=f:S.pop(),S.length&&S[0]===u[0]?Rh(S,In(p,2)):[]}),Ab=kn(function(u){var p=ss(u),S=$i(u,ku);return(p="function"==typeof p?p:f)&&S.pop(),S.length&&S[0]===u[0]?Rh(S,f,p):[]});function ss(u){var p=null==u?0:u.length;return p?u[p-1]:f}var Eb=kn(o0);function o0(u,p){return u&&u.length&&p&&p.length?wu(u,p):u}var Lb=Ql(function(u,p){var S=null==u?0:u.length,J=Sc(u,p);return Cu(u,$i(p,function(rt){return oi(rt,S)?+rt:rt}).sort(Gh)),J});function Af(u){return null==u?u:On.call(u)}var $b=kn(function(u){return da(ja(u,1,Ho,!0))}),Yb=kn(function(u){var p=ss(u);return Ho(p)&&(p=f),da(ja(u,1,Ho,!0),In(p,2))}),Kb=kn(function(u){var p=ss(u);return p="function"==typeof p?p:f,da(ja(u,1,Ho,!0),f,p)});function Sf(u){if(!u||!u.length)return[];var p=0;return u=Ts(u,function(S){if(Ho(S))return p=ta(S.length,p),!0}),Mo(p,function(S){return $i(u,pu(S))})}function a0(u,p){if(!u||!u.length)return[];var S=Sf(u);return null==p?S:$i(S,function(J){return Bo(p,f,J)})}var tv=kn(function(u,p){return Ho(u)?xm(u,p):[]}),nv=kn(function(u){return zh(Ts(u,Ho))}),iv=kn(function(u){var p=ss(u);return Ho(p)&&(p=f),zh(Ts(u,Ho),In(p,2))}),ov=kn(function(u){var p=ss(u);return p="function"==typeof p?p:f,zh(Ts(u,Ho),f,p)}),av=kn(Sf),sv=kn(function(u){var p=u.length,S=p>1?u[p-1]:f;return S="function"==typeof S?(u.pop(),S):f,a0(u,S)});function Pc(u){var p=bt(u);return p.__chain__=!0,p}function lp(u,p){return p(u)}var cv=Ql(function(u){var p=u.length,S=p?u[0]:0,J=this.__wrapped__,rt=function(Ct){return Sc(Ct,u)};return!(p>1||this.__actions__.length)&&J instanceof xi&&oi(S)?((J=J.slice(S,+S+(p?1:0))).__actions__.push({func:lp,args:[rt],thisArg:f}),new ns(J,this.__chain__).thru(function(Ct){return p&&!Ct.length&&Ct.push(f),Ct})):this.thru(rt)}),gv=$h(function(u,p,S){Ki.call(u,S)?++u[S]:Os(u,S,1)}),cp=mf(Om),up=mf(Em);function s0(u,p){return(Jn(u)?Ja:Zl)(u,In(p,3))}function Ef(u,p){return(Jn(u)?Ah:Fh)(u,In(p,3))}var bv=$h(function(u,p,S){Ki.call(u,S)?u[S].push(p):Os(u,S,[p])}),Mf=kn(function(u,p,S){var J=-1,rt="function"==typeof p,Ct=wr(u)?ce(u.length):[];return Zl(u,function(qt){Ct[++J]=rt?Bo(p,qt,S):ym(qt,p,S)}),Ct}),yv=$h(function(u,p,S){Os(u,S,p)});function dp(u,p){return(Jn(u)?$i:Bh)(u,In(p,3))}var Cv=$h(function(u,p,S){u[S?0:1].push(p)},function(){return[[],[]]}),Mv=kn(function(u,p){if(null==u)return[];var S=p.length;return S>1&&jt(u,p[0],p[1])?p=[]:S>2&&jt(p[0],p[1],p[2])&&(p=[p[0]]),jl(u,ja(p,1),[])}),mp=Z2||function(){return Uo.Date.now()};function c0(u,p,S){return p=S?f:p,ll(u,128,f,f,f,f,p=u&&null==p?u.length:p)}function u0(u,p){var S;if("function"!=typeof p)throw new wa(w);return u=Wn(u),function(){return--u>0&&(S=p.apply(this,arguments)),u<=1&&(p=f),S}}var If=kn(function(u,p,S){var J=1;if(S.length){var rt=Yt(S,vd(If));J|=32}return ll(u,J,p,S,rt)}),d0=kn(function(u,p,S){var J=3;if(S.length){var rt=Yt(S,vd(d0));J|=32}return ll(p,J,u,S,rt)});function p0(u,p,S){var J,rt,Ct,qt,Ut,te,Ae=0,Se=!1,Pe=!1,nn=!0;if("function"!=typeof u)throw new wa(w);function yn(Go){var Ns=J,Bl=rt;return J=rt=f,Ae=Go,qt=u.apply(Bl,Ns)}function Pn(Go){var Ns=Go-te;return te===f||Ns>=p||Ns<0||Pe&&Go-Ae>=Ct}function hi(){var Go=mp();if(Pn(Go))return bi(Go);Ut=yd(hi,function Vn(Go){var F0=p-(Go-te);return Pe?Do(F0,Ct-(Go-Ae)):F0}(Go))}function bi(Go){return Ut=f,nn&&J?yn(Go):(J=rt=f,qt)}function Ur(){var Go=mp(),Ns=Pn(Go);if(J=arguments,rt=this,te=Go,Ns){if(Ut===f)return function Ln(Go){return Ae=Go,Ut=yd(hi,p),Se?yn(Go):qt}(te);if(Pe)return af(Ut),Ut=yd(hi,p),yn(te)}return Ut===f&&(Ut=yd(hi,p)),qt}return p=ls(p)||0,Io(S)&&(Se=!!S.leading,Ct=(Pe="maxWait"in S)?ta(ls(S.maxWait)||0,p):Ct,nn="trailing"in S?!!S.trailing:nn),Ur.cancel=function Rr(){Ut!==f&&af(Ut),Ae=0,J=te=rt=Ut=f},Ur.flush=function rr(){return Ut===f?qt:bi(mp())},Ur}var Lv=kn(function(u,p){return A1(u,1,p)}),ar=kn(function(u,p,S){return A1(u,ls(p)||0,S)});function Lf(u,p){if("function"!=typeof u||null!=p&&"function"!=typeof p)throw new wa(w);var S=function(){var J=arguments,rt=p?p.apply(this,J):J[0],Ct=S.cache;if(Ct.has(rt))return Ct.get(rt);var qt=u.apply(this,J);return S.cache=Ct.set(rt,qt)||Ct,qt};return S.cache=new(Lf.Cache||is),S}function Pf(u){if("function"!=typeof u)throw new wa(w);return function(){var p=arguments;switch(p.length){case 0:return!u.call(this);case 1:return!u.call(this,p[0]);case 2:return!u.call(this,p[0],p[1]);case 3:return!u.call(this,p[0],p[1],p[2])}return!u.apply(this,p)}}Lf.Cache=is;var _0=of(function(u,p){var S=(p=1==p.length&&Jn(p[0])?$i(p[0],Ha(In())):$i(ja(p,1),Ha(In()))).length;return kn(function(J){for(var rt=-1,Ct=Do(J.length,S);++rt<Ct;)J[rt]=p[rt].call(this,J[rt]);return Bo(u,this,J)})}),hp=kn(function(u,p){var S=Yt(p,vd(hp));return ll(u,32,f,p,S)}),Nf=kn(function(u,p){var S=Yt(p,vd(Nf));return ll(u,64,f,p,S)}),b6=Ql(function(u,p){return ll(u,256,f,f,f,p)});function Ta(u,p){return u===p||u!=u&&p!=p}var jv=Vh(V_),qv=Vh(function(u,p){return u>=p}),Mu=O1(function(){return arguments}())?O1:function(u){return jo(u)&&Ki.call(u,"callee")&&!Na.call(u,"callee")},Jn=ce.isArray,Fv=cu?Ha(cu):function Y2(u){return jo(u)&&er(u)==xa};function wr(u){return null!=u&&_p(u.length)&&!Rl(u)}function Ho(u){return jo(u)&&wr(u)}var Nc=z_||Iu,Rv=Nr?Ha(Nr):function K2(u){return jo(u)&&er(u)==Mn};function Td(u){if(!jo(u))return!1;var p=er(u);return p==pi||"[object DOMException]"==p||"string"==typeof u.message&&"string"==typeof u.name&&!Mm(u)}function Rl(u){if(!Io(u))return!1;var p=er(u);return p==xn||p==ki||"[object AsyncFunction]"==p||"[object Proxy]"==p}function v0(u){return"number"==typeof u&&u==Wn(u)}function _p(u){return"number"==typeof u&&u>-1&&u%1==0&&u<=fe}function Io(u){var p=typeof u;return null!=u&&("object"==p||"function"==p)}function jo(u){return null!=u&&"object"==typeof u}var y0=Il?Ha(Il):function E1(u){return jo(u)&&Ga(u)==an};function w0(u){return"number"==typeof u||jo(u)&&er(u)==Kn}function Mm(u){if(!jo(u)||er(u)!=t)return!1;var p=sd(u);if(null===p)return!0;var S=Ki.call(p,"constructor")&&p.constructor;return"function"==typeof S&&S instanceof S&&R_.call(S)==U_}var jf=uu?Ha(uu):function V2(u){return jo(u)&&er(u)==po},C0=du?Ha(du):function X2(u){return jo(u)&&Ga(u)==Pi};function gp(u){return"string"==typeof u||!Jn(u)&&jo(u)&&er(u)==Ke}function Qr(u){return"symbol"==typeof u||jo(u)&&er(u)==Ku}var kd=id?Ha(id):function p6(u){return jo(u)&&_p(u.length)&&!!Ji[er(u)]},t3=Vh(Hi),e3=Vh(function(u,p){return u<=p});function T0(u){if(!u)return[];if(wr(u))return gp(u)?un(u):ir(u);if(Xo&&u[Xo])return function xt(Dt){for(var se,ce=[];!(se=Dt.next()).done;)ce.push(se.value);return ce}(u[Xo]());var p=Ga(u);return(p==an?Qt:p==Pi?me:Ad)(u)}function Ul(u){return u?(u=ls(u))===ye||u===-ye?17976931348623157e292*(u<0?-1:1):u==u?u:0:0===u?u:0}function Wn(u){var p=Ul(u),S=p%1;return p==p?S?p-S:p:0}function k0(u){return u?il(Wn(u),0,Yn):0}function ls(u){if("number"==typeof u)return u;if(Qr(u))return NaN;if(Io(u)){var p="function"==typeof u.valueOf?u.valueOf():u;u=Io(p)?p+"":p}if("string"!=typeof u)return 0===u?u:+u;u=hm(u);var S=S_.test(u);return S||E_.test(u)?Th(u.slice(2),S?2:8):A_.test(u)?NaN:+u}function A0(u){return jr(u,Cr(u))}function Bi(u){return null==u?"":xr(u)}var qf=Au(function(u,p){if(Ou(p)||wr(p))jr(p,ka(p),u);else for(var S in p)Ki.call(p,S)&&gm(u,S,p[S])}),S0=Au(function(u,p){jr(p,Cr(p),u)}),xp=Au(function(u,p,S,J){jr(p,Cr(p),u,J)}),i3=Au(function(u,p,S,J){jr(p,ka(p),u,J)}),o3=Ql(Sc),r3=kn(function(u,p){u=gi(u);var S=-1,J=p.length,rt=J>2?p[2]:f;for(rt&&jt(p[0],p[1],rt)&&(J=1);++S<J;)for(var Ct=p[S],qt=Cr(Ct),Ut=-1,te=qt.length;++Ut<te;){var Ae=qt[Ut],Se=u[Ae];(Se===f||Ta(Se,_m[Ae])&&!Ki.call(u,Ae))&&(u[Ae]=Ct[Ae])}return u}),s3=kn(function(u){return u.push(f,z1),Bo(O0,f,u)});function Ff(u,p,S){var J=null==u?f:yu(u,p);return J===f?S:J}function Qf(u,p){return null!=u&&bf(u,p,H2)}var g3=Yh(function(u,p,S){null!=p&&"function"!=typeof p.toString&&(p=Ui.call(p)),u[p]=S},Bf(Tr)),x3=Yh(function(u,p,S){null!=p&&"function"!=typeof p.toString&&(p=Ui.call(p)),Ki.call(u,p)?u[p].push(S):u[p]=[S]},In),b3=kn(ym);function ka(u){return wr(u)?w1(u):tf(u)}function Cr(u){return wr(u)?w1(u,!0):function I1(u){if(!Io(u))return function br(u){var p=[];if(null!=u)for(var S in gi(u))p.push(S);return p}(u);var p=Ou(u),S=[];for(var J in u)"constructor"==J&&(p||!Ki.call(u,J))||S.push(J);return S}(u)}var w3=Au(function(u,p,S){Dr(u,p,S)}),O0=Au(function(u,p,S,J){Dr(u,p,S,J)}),C3=Ql(function(u,p){var S={};if(null==u)return S;var J=!1;p=$i(p,function(Ct){return Ct=Ps(Ct,u),J||(J=Ct.length>1),Ct}),jr(u,Sm(u),S),J&&(S=Zr(S,7,rb));for(var rt=p.length;rt--;)Mc(S,p[rt]);return S}),k3=Ql(function(u,p){return null==u?{}:function P1(u,p){return ef(u,p,function(S,J){return Qf(u,J)})}(u,p)});function E0(u,p){if(null==u)return{};var S=$i(Sm(u),function(J){return[J]});return p=In(p),ef(u,S,function(J,rt){return p(J,rt[0])})}var M0=U1(ka),I0=U1(Cr);function Ad(u){return null==u?[]:ts(u,ka(u))}var L0=xd(function(u,p,S){return p=p.toLowerCase(),u+(S?P0(p):p)});function P0(u){return Uf(Bi(u).toLowerCase())}function Rf(u){return(u=Bi(u))&&u.replace(I_,l1).replace(su,"")}var j3=xd(function(u,p,S){return u+(S?"-":"")+p.toLowerCase()}),q3=xd(function(u,p,S){return u+(S?" ":"")+p.toLowerCase()}),F3=df("toLowerCase"),H3=xd(function(u,p,S){return u+(S?"_":"")+p.toLowerCase()}),$3=xd(function(u,p,S){return u+(S?" ":"")+Uf(p)}),oy=xd(function(u,p,S){return u+(S?" ":"")+p.toUpperCase()}),Uf=df("toUpperCase");function N0(u,p,S){return u=Bi(u),(p=S?f:p)===f?function ct(Dt){return Vr.test(Dt)}(u)?function Zo(Dt){return Dt.match(Ws)||[]}(u):function dm(Dt){return Dt.match(gh)||[]}(u):u.match(p)||[]}var Z0=kn(function(u,p){try{return Bo(u,f,p)}catch(S){return Td(S)?S:new An(S)}}),ay=Ql(function(u,p){return Ja(p,function(S){S=cl(S),Os(u,S,If(u[S],u))}),u});function Bf(u){return function(){return u}}var ly=hf(),cy=hf(!0);function Tr(u){return u}function zf(u){return Uh("function"==typeof u?u:Zr(u,1))}var my=kn(function(u,p){return function(S){return ym(S,u,p)}}),hy=kn(function(u,p){return function(S){return ym(u,S,p)}});function Jf(u,p,S){var J=ka(p),rt=vm(p,J);null==S&&(!Io(p)||!rt.length&&J.length)&&(S=p,p=u,u=this,rt=vm(p,ka(p)));var Ct=!(Io(S)&&"chain"in S&&!S.chain),qt=Rl(u);return Ja(rt,function(Ut){var te=p[Ut];u[Ut]=te,qt&&(u.prototype[Ut]=function(){var Ae=this.__chain__;if(Ct||Ae){var Se=u(this.__wrapped__);return(Se.__actions__=ir(this.__actions__)).push({func:te,args:arguments,thisArg:u}),Se.__chain__=Ae,Se}return te.apply(u,fr([this.value()],arguments))})}),u}function bp(){}var fy=pf($i),gy=pf(cm),xy=pf(bc);function j0(u){return vf(u)?pu(cl(u)):function N1(u){return function(p){return yu(p,u)}}(u)}var vy=_f(),yy=_f(!0);function Lm(){return[]}function Iu(){return!1}var ky=Kh(function(u,p){return u+p},0),vp=ff("ceil"),Ay=Kh(function(u,p){return u/p},1),Sy=ff("floor"),Ny=Kh(function(u,p){return u*p},1),Zy=ff("round"),Dy=Kh(function(u,p){return u-p},0);return bt.after=function Iv(u,p){if("function"!=typeof p)throw new wa(w);return u=Wn(u),function(){if(--u<1)return p.apply(this,arguments)}},bt.ary=c0,bt.assign=qf,bt.assignIn=S0,bt.assignInWith=xp,bt.assignWith=i3,bt.at=o3,bt.before=u0,bt.bind=If,bt.bindAll=ay,bt.bindKey=d0,bt.castArray=function f0(){if(!arguments.length)return[];var u=arguments[0];return Jn(u)?u:[u]},bt.chain=Pc,bt.chunk=function _b(u,p,S){p=(S?jt(u,p,S):p===f)?1:ta(Wn(p),0);var J=null==u?0:u.length;if(!J||p<1)return[];for(var rt=0,Ct=0,qt=ce(ld(J/p));rt<J;)qt[Ct++]=ua(u,rt,rt+=p);return qt},bt.compact=function fb(u){for(var p=-1,S=null==u?0:u.length,J=0,rt=[];++p<S;){var Ct=u[p];Ct&&(rt[J++]=Ct)}return rt},bt.concat=function gb(){var u=arguments.length;if(!u)return[];for(var p=ce(u-1),S=arguments[0],J=u;J--;)p[J-1]=arguments[J];return fr(Jn(S)?ir(S):[S],ja(p,1))},bt.cond=function D0(u){var p=null==u?0:u.length,S=In();return u=p?$i(u,function(J){if("function"!=typeof J[1])throw new wa(w);return[S(J[0]),J[1]]}):[],kn(function(J){for(var rt=-1;++rt<p;){var Ct=u[rt];if(Bo(Ct[0],this,J))return Bo(Ct[1],this,J)}})},bt.conforms=function ry(u){return function k1(u){var p=ka(u);return function(S){return K_(S,u,p)}}(Zr(u,1))},bt.constant=Bf,bt.countBy=gv,bt.create=function a3(u,p){var S=Ac(u);return null==p?S:Y_(S,p)},bt.curry=function m0(u,p,S){var J=ll(u,8,f,f,f,f,f,p=S?f:p);return J.placeholder=m0.placeholder,J},bt.curryRight=function h0(u,p,S){var J=ll(u,16,f,f,f,f,f,p=S?f:p);return J.placeholder=h0.placeholder,J},bt.debounce=p0,bt.defaults=r3,bt.defaultsDeep=s3,bt.defer=Lv,bt.delay=ar,bt.difference=xb,bt.differenceBy=W1,bt.differenceWith=Ya,bt.drop=function V1(u,p,S){var J=null==u?0:u.length;return J?ua(u,(p=S||p===f?1:Wn(p))<0?0:p,J):[]},bt.dropRight=function X1(u,p,S){var J=null==u?0:u.length;return J?ua(u,0,(p=J-(p=S||p===f?1:Wn(p)))<0?0:p):[]},bt.dropRightWhile=function Cd(u,p){return u&&u.length?fd(u,In(p,3),!0,!0):[]},bt.dropWhile=function bb(u,p){return u&&u.length?fd(u,In(p,3),!0):[]},bt.fill=function vb(u,p,S,J){var rt=null==u?0:u.length;return rt?(S&&"number"!=typeof S&&jt(u,p,S)&&(S=0,J=rt),function Ms(u,p,S,J){var rt=u.length;for((S=Wn(S))<0&&(S=-S>rt?0:rt+S),(J=J===f||J>rt?rt:Wn(J))<0&&(J+=rt),J=S>J?0:k0(J);S<J;)u[S++]=p;return u}(u,p,S,J)):[]},bt.filter=function _6(u,p){return(Jn(u)?Ts:Dl)(u,In(p,3))},bt.flatMap=function yr(u,p){return ja(dp(u,p),1)},bt.flatMapDeep=function Jo(u,p){return ja(dp(u,p),ye)},bt.flatMapDepth=function xv(u,p,S){return S=S===f?1:Wn(S),ja(dp(u,p),S)},bt.flatten=kf,bt.flattenDeep=function qr(u){return null!=u&&u.length?ja(u,ye):[]},bt.flattenDepth=function yb(u,p){return null!=u&&u.length?ja(u,p=p===f?1:Wn(p)):[]},bt.flip=function g6(u){return ll(u,512)},bt.flow=ly,bt.flowRight=cy,bt.fromPairs=function wb(u){for(var p=-1,S=null==u?0:u.length,J={};++p<S;){var rt=u[p];J[rt[0]]=rt[1]}return J},bt.functions=function p3(u){return null==u?[]:vm(u,ka(u))},bt.functionsIn=function _3(u){return null==u?[]:vm(u,Cr(u))},bt.groupBy=bv,bt.initial=function Cb(u){return null!=u&&u.length?ua(u,0,-1):[]},bt.intersection=Tb,bt.intersectionBy=kb,bt.intersectionWith=Ab,bt.invert=g3,bt.invertBy=x3,bt.invokeMap=Mf,bt.iteratee=zf,bt.keyBy=yv,bt.keys=ka,bt.keysIn=Cr,bt.map=dp,bt.mapKeys=function v3(u,p){var S={};return p=In(p,3),ol(u,function(J,rt,Ct){Os(S,p(J,rt,Ct),J)}),S},bt.mapValues=function y3(u,p){var S={};return p=In(p,3),ol(u,function(J,rt,Ct){Os(S,rt,p(J,rt,Ct))}),S},bt.matches=function uy(u){return no(Zr(u,1))},bt.matchesProperty=function dy(u,p){return io(u,Zr(p,1))},bt.memoize=Lf,bt.merge=w3,bt.mergeWith=O0,bt.method=my,bt.methodOf=hy,bt.mixin=Jf,bt.negate=Pf,bt.nthArg=function _y(u){return u=Wn(u),kn(function(p){return L1(p,u)})},bt.omit=C3,bt.omitBy=function T3(u,p){return E0(u,Pf(In(p)))},bt.once=function x6(u){return u0(2,u)},bt.orderBy=function wv(u,p,S,J){return null==u?[]:(Jn(p)||(p=null==p?[]:[p]),Jn(S=J?f:S)||(S=null==S?[]:[S]),jl(u,p,S))},bt.over=fy,bt.overArgs=_0,bt.overEvery=gy,bt.overSome=xy,bt.partial=hp,bt.partialRight=Nf,bt.partition=Cv,bt.pick=k3,bt.pickBy=E0,bt.property=j0,bt.propertyOf=function by(u){return function(p){return null==u?f:yu(u,p)}},bt.pull=Eb,bt.pullAll=o0,bt.pullAllBy=function Mb(u,p,S){return u&&u.length&&p&&p.length?wu(u,p,In(S,2)):u},bt.pullAllWith=function Ib(u,p,S){return u&&u.length&&p&&p.length?wu(u,p,f,S):u},bt.pullAt=Lb,bt.range=vy,bt.rangeRight=yy,bt.rearg=b6,bt.reject=function kv(u,p){return(Jn(u)?Ts:Dl)(u,Pf(In(p,3)))},bt.remove=function Pb(u,p){var S=[];if(!u||!u.length)return S;var J=-1,rt=[],Ct=u.length;for(p=In(p,3);++J<Ct;){var qt=u[J];p(qt,J,u)&&(S.push(qt),rt.push(J))}return Cu(u,rt),S},bt.rest=function v6(u,p){if("function"!=typeof u)throw new wa(w);return kn(u,p=p===f?p:Wn(p))},bt.reverse=Af,bt.sampleSize=function Av(u,p,S){return p=(S?jt(u,p,S):p===f)?1:Wn(p),(Jn(u)?C1:al)(u,p)},bt.set=function S3(u,p,S){return null==u?u:Tu(u,p,S)},bt.setWith=function O3(u,p,S,J){return J="function"==typeof J?J:f,null==u?u:Tu(u,p,S,J)},bt.shuffle=function Sv(u){return(Jn(u)?z2:Fl)(u)},bt.slice=function Nb(u,p,S){var J=null==u?0:u.length;return J?(S&&"number"!=typeof S&&jt(u,p,S)?(p=0,S=J):(p=null==p?0:Wn(p),S=S===f?J:Wn(S)),ua(u,p,S)):[]},bt.sortBy=Mv,bt.sortedUniq=function Rb(u){return u&&u.length?Z1(u):[]},bt.sortedUniqBy=function Ub(u,p){return u&&u.length?Z1(u,In(p,2)):[]},bt.split=function G3(u,p,S){return S&&"number"!=typeof S&&jt(u,p,S)&&(p=S=f),(S=S===f?Yn:S>>>0)?(u=Bi(u))&&("string"==typeof p||null!=p&&!jf(p))&&!(p=xr(p))&&X(u)?as(un(u),0,S):u.split(p,S):[]},bt.spread=function pp(u,p){if("function"!=typeof u)throw new wa(w);return p=null==p?0:ta(Wn(p),0),kn(function(S){var J=S[p],rt=as(S,0,p);return J&&fr(rt,J),Bo(u,this,rt)})},bt.tail=function Bb(u){var p=null==u?0:u.length;return p?ua(u,1,p):[]},bt.take=function zb(u,p,S){return u&&u.length?ua(u,0,(p=S||p===f?1:Wn(p))<0?0:p):[]},bt.takeRight=function Jb(u,p,S){var J=null==u?0:u.length;return J?ua(u,(p=J-(p=S||p===f?1:Wn(p)))<0?0:p,J):[]},bt.takeRightWhile=function Hb(u,p){return u&&u.length?fd(u,In(p,3),!1,!0):[]},bt.takeWhile=function Gb(u,p){return u&&u.length?fd(u,In(p,3)):[]},bt.tap=function lv(u,p){return p(u),u},bt.throttle=function Fr(u,p,S){var J=!0,rt=!0;if("function"!=typeof u)throw new wa(w);return Io(S)&&(J="leading"in S?!!S.leading:J,rt="trailing"in S?!!S.trailing:rt),p0(u,p,{leading:J,maxWait:p,trailing:rt})},bt.thru=lp,bt.toArray=T0,bt.toPairs=M0,bt.toPairsIn=I0,bt.toPath=function q0(u){return Jn(u)?$i(u,cl):Qr(u)?[u]:ir(Y1(Bi(u)))},bt.toPlainObject=A0,bt.transform=function E3(u,p,S){var J=Jn(u),rt=J||Nc(u)||kd(u);if(p=In(p,4),null==S){var Ct=u&&u.constructor;S=rt?J?new Ct:[]:Io(u)&&Rl(Ct)?Ac(sd(u)):{}}return(rt?Ja:ol)(u,function(qt,Ut,te){return p(S,qt,Ut,te)}),S},bt.unary=function Pv(u){return c0(u,1)},bt.union=$b,bt.unionBy=Yb,bt.unionWith=Kb,bt.uniq=function Wb(u){return u&&u.length?da(u):[]},bt.uniqBy=function Vb(u,p){return u&&u.length?da(u,In(p,2)):[]},bt.uniqWith=function Xb(u,p){return p="function"==typeof p?p:f,u&&u.length?da(u,f,p):[]},bt.unset=function M3(u,p){return null==u||Mc(u,p)},bt.unzip=Sf,bt.unzipWith=a0,bt.update=function Im(u,p,S){return null==u?u:sl(u,p,gd(S))},bt.updateWith=function I3(u,p,S,J){return J="function"==typeof J?J:f,null==u?u:sl(u,p,gd(S),J)},bt.values=Ad,bt.valuesIn=function L3(u){return null==u?[]:ts(u,Cr(u))},bt.without=tv,bt.words=N0,bt.wrap=function Zf(u,p){return hp(gd(p),u)},bt.xor=nv,bt.xorBy=iv,bt.xorWith=ov,bt.zip=av,bt.zipObject=function rv(u,p){return Jh(u||[],p||[],gm)},bt.zipObjectDeep=function r0(u,p){return Jh(u||[],p||[],Tu)},bt.zipWith=sv,bt.entries=M0,bt.entriesIn=I0,bt.extend=S0,bt.extendWith=xp,Jf(bt,bt),bt.add=ky,bt.attempt=Z0,bt.camelCase=L0,bt.capitalize=P0,bt.ceil=vp,bt.clamp=function fo(u,p,S){return S===f&&(S=p,p=f),S!==f&&(S=(S=ls(S))==S?S:0),p!==f&&(p=(p=ls(p))==p?p:0),il(ls(u),p,S)},bt.clone=function Nv(u){return Zr(u,4)},bt.cloneDeep=function Zv(u){return Zr(u,5)},bt.cloneDeepWith=function x0(u,p){return Zr(u,5,p="function"==typeof p?p:f)},bt.cloneWith=function g0(u,p){return Zr(u,4,p="function"==typeof p?p:f)},bt.conformsTo=function Dv(u,p){return null==p||K_(u,p,ka(p))},bt.deburr=Rf,bt.defaultTo=function sy(u,p){return null==u||u!=u?p:u},bt.divide=Ay,bt.endsWith=function N3(u,p,S){u=Bi(u),p=xr(p);var J=u.length,rt=S=S===f?J:il(Wn(S),0,J);return(S-=p.length)>=0&&u.slice(S,rt)==p},bt.eq=Ta,bt.escape=function Z3(u){return(u=Bi(u))&&$s.test(u)?u.replace(hc,c1):u},bt.escapeRegExp=function D3(u){return(u=Bi(u))&&w_.test(u)?u.replace(Xu,"\\$&"):u},bt.every=function Of(u,p,S){var J=Jn(u)?cm:Es;return S&&jt(u,p,S)&&(p=f),J(u,In(p,3))},bt.find=cp,bt.findIndex=Om,bt.findKey=function l3(u,p){return od(u,In(p,3),ol)},bt.findLast=up,bt.findLastIndex=Em,bt.findLastKey=function c3(u,p){return od(u,In(p,3),Qh)},bt.floor=Sy,bt.forEach=s0,bt.forEachRight=Ef,bt.forIn=function u3(u,p){return null==u?u:W_(u,In(p,3),Cr)},bt.forInRight=function d3(u,p){return null==u?u:Is(u,In(p,3),Cr)},bt.forOwn=function m3(u,p){return u&&ol(u,In(p,3))},bt.forOwnRight=function h3(u,p){return u&&Qh(u,In(p,3))},bt.get=Ff,bt.gt=jv,bt.gte=qv,bt.has=function f3(u,p){return null!=u&&bf(u,p,J2)},bt.hasIn=Qf,bt.head=t0,bt.identity=Tr,bt.includes=function vv(u,p,S,J){u=wr(u)?u:Ad(u),S=S&&!J?Wn(S):0;var rt=u.length;return S<0&&(S=ta(rt+S,0)),gp(u)?S<=rt&&u.indexOf(p,S)>-1:!!rt&&vc(u,p,S)>-1},bt.indexOf=function e0(u,p,S){var J=null==u?0:u.length;if(!J)return-1;var rt=null==S?0:Wn(S);return rt<0&&(rt=ta(J+rt,0)),vc(u,p,rt)},bt.inRange=function ul(u,p,S){return p=Ul(p),S===f?(S=p,p=0):S=Ul(S),function G2(u,p,S){return u>=Do(p,S)&&u<ta(p,S)}(u=ls(u),p,S)},bt.invoke=b3,bt.isArguments=Mu,bt.isArray=Jn,bt.isArrayBuffer=Fv,bt.isArrayLike=wr,bt.isArrayLikeObject=Ho,bt.isBoolean=function Qv(u){return!0===u||!1===u||jo(u)&&er(u)==Mr},bt.isBuffer=Nc,bt.isDate=Rv,bt.isElement=function Uv(u){return jo(u)&&1===u.nodeType&&!Mm(u)},bt.isEmpty=function Bv(u){if(null==u)return!0;if(wr(u)&&(Jn(u)||"string"==typeof u||"function"==typeof u.splice||Nc(u)||kd(u)||Mu(u)))return!u.length;var p=Ga(u);if(p==an||p==Pi)return!u.size;if(Ou(u))return!tf(u).length;for(var S in u)if(Ki.call(u,S))return!1;return!0},bt.isEqual=function Df(u,p){return wm(u,p)},bt.isEqualWith=function b0(u,p,S){var J=(S="function"==typeof S?S:f)?S(u,p):f;return J===f?wm(u,p,f,S):!!J},bt.isError=Td,bt.isFinite=function zv(u){return"number"==typeof u&&J_(u)},bt.isFunction=Rl,bt.isInteger=v0,bt.isLength=_p,bt.isMap=y0,bt.isMatch=function Jv(u,p){return u===p||X_(u,p,gf(p))},bt.isMatchWith=function Hv(u,p,S){return S="function"==typeof S?S:f,X_(u,p,gf(p),S)},bt.isNaN=function fp(u){return w0(u)&&u!=+u},bt.isNative=function Gv(u){if($a(u))throw new An("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return M1(u)},bt.isNil=function Yv(u){return null==u},bt.isNull=function $v(u){return null===u},bt.isNumber=w0,bt.isObject=Io,bt.isObjectLike=jo,bt.isPlainObject=Mm,bt.isRegExp=jf,bt.isSafeInteger=function Kv(u){return v0(u)&&u>=-fe&&u<=fe},bt.isSet=C0,bt.isString=gp,bt.isSymbol=Qr,bt.isTypedArray=kd,bt.isUndefined=function Wv(u){return u===f},bt.isWeakMap=function Vv(u){return jo(u)&&Ga(u)==ga},bt.isWeakSet=function Xv(u){return jo(u)&&"[object WeakSet]"==er(u)},bt.join=function Sb(u,p){return null==u?"":cd.call(u,p)},bt.kebabCase=j3,bt.last=ss,bt.lastIndexOf=function Ob(u,p,S){var J=null==u?0:u.length;if(!J)return-1;var rt=J;return S!==f&&(rt=(rt=Wn(S))<0?ta(J+rt,0):Do(rt,J-1)),p==p?function qe(Dt,se,ce){for(var He=ce+1;He--;)if(Dt[He]===se)return He;return He}(u,p,rt):ad(u,mm,rt,!0)},bt.lowerCase=q3,bt.lowerFirst=F3,bt.lt=t3,bt.lte=e3,bt.max=function Oy(u){return u&&u.length?bm(u,Tr,V_):f},bt.maxBy=function Ey(u,p){return u&&u.length?bm(u,In(p,2),V_):f},bt.mean=function My(u){return ks(u,Tr)},bt.meanBy=function Iy(u,p){return ks(u,In(p,2))},bt.min=function Ly(u){return u&&u.length?bm(u,Tr,Hi):f},bt.minBy=function Py(u,p){return u&&u.length?bm(u,In(p,2),Hi):f},bt.stubArray=Lm,bt.stubFalse=Iu,bt.stubObject=function wy(){return{}},bt.stubString=function Hf(){return""},bt.stubTrue=function Pm(){return!0},bt.multiply=Ny,bt.nth=function n0(u,p){return u&&u.length?L1(u,Wn(p)):f},bt.noConflict=function py(){return Uo._===this&&(Uo._=d1),this},bt.noop=bp,bt.now=mp,bt.pad=function Q3(u,p,S){u=Bi(u);var J=(p=Wn(p))?De(u):0;if(!p||J>=p)return u;var rt=(p-J)/2;return Wh(Ih(rt),S)+u+Wh(ld(rt),S)},bt.padEnd=function R3(u,p,S){u=Bi(u);var J=(p=Wn(p))?De(u):0;return p&&J<p?u+Wh(p-J,S):u},bt.padStart=function U3(u,p,S){u=Bi(u);var J=(p=Wn(p))?De(u):0;return p&&J<p?Wh(p-J,S)+u:u},bt.parseInt=function B3(u,p,S){return S||null==p?p=0:p&&(p=+p),Tc(Bi(u).replace(im,""),p||0)},bt.random=function P3(u,p,S){if(S&&"boolean"!=typeof S&&jt(u,p,S)&&(p=S=f),S===f&&("boolean"==typeof p?(S=p,p=f):"boolean"==typeof u&&(S=u,u=f)),u===f&&p===f?(u=0,p=1):(u=Ul(u),p===f?(p=u,u=0):p=Ul(p)),u>p){var J=u;u=p,p=J}if(S||u%1||p%1){var rt=kc();return Do(u+rt*(p-u+za("1e-"+((rt+"").length-1))),p)}return _d(u,p)},bt.reduce=function Tv(u,p,S){var J=Jn(u)?hu:F_,rt=arguments.length<3;return J(u,In(p,4),S,rt,Zl)},bt.reduceRight=function f6(u,p,S){var J=Jn(u)?Sh:F_,rt=arguments.length<3;return J(u,In(p,4),S,rt,Fh)},bt.repeat=function z3(u,p,S){return p=(S?jt(u,p,S):p===f)?1:Wn(p),Oc(Bi(u),p)},bt.replace=function J3(){var u=arguments,p=Bi(u[0]);return u.length<3?p:p.replace(u[1],u[2])},bt.result=function A3(u,p,S){var J=-1,rt=(p=Ps(p,u)).length;for(rt||(rt=1,u=f);++J<rt;){var Ct=null==u?f:u[cl(p[J])];Ct===f&&(J=rt,Ct=S),u=Rl(Ct)?Ct.call(u):Ct}return u},bt.round=Zy,bt.runInContext=Dt,bt.sample=function l0(u){return(Jn(u)?$_:Ec)(u)},bt.size=function Ov(u){if(null==u)return 0;if(wr(u))return gp(u)?De(u):u.length;var p=Ga(u);return p==an||p==Pi?u.size:tf(u).length},bt.snakeCase=H3,bt.some=function Ev(u,p,S){var J=Jn(u)?bc:tb;return S&&jt(u,p,S)&&(p=f),J(u,In(p,3))},bt.sortedIndex=function Zb(u,p){return Ls(u,p)},bt.sortedIndexBy=function Db(u,p,S){return Cm(u,p,In(S,2))},bt.sortedIndexOf=function jb(u,p){var S=null==u?0:u.length;if(S){var J=Ls(u,p);if(J<S&&Ta(u[J],p))return J}return-1},bt.sortedLastIndex=function qb(u,p){return Ls(u,p,!0)},bt.sortedLastIndexBy=function Fb(u,p,S){return Cm(u,p,In(S,2),!0)},bt.sortedLastIndexOf=function Qb(u,p){if(null!=u&&u.length){var J=Ls(u,p,!0)-1;if(Ta(u[J],p))return J}return-1},bt.startCase=$3,bt.startsWith=function Y3(u,p,S){return u=Bi(u),S=null==S?0:il(Wn(S),0,u.length),p=xr(p),u.slice(S,S+p.length)==p},bt.subtract=Dy,bt.sum=function jy(u){return u&&u.length?tr(u,Tr):0},bt.sumBy=function qy(u,p){return u&&u.length?tr(u,In(p,2)):0},bt.template=function K3(u,p,S){var J=bt.templateSettings;S&&jt(u,p,S)&&(p=f),u=Bi(u),p=xp({},p,J,B1);var Ut,te,rt=xp({},p.imports,J.imports,B1),Ct=ka(rt),qt=ts(rt,Ct),Ae=0,Se=p.interpolate||td,Pe="__p += '",nn=_u((p.escape||td).source+"|"+Se.source+"|"+(Se===ph?xh:td).source+"|"+(p.evaluate||td).source+"|$","g"),yn="//# sourceURL="+(Ki.call(p,"sourceURL")?(p.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++yo+"]")+"\n";u.replace(nn,function(Pn,hi,bi,Rr,rr,Ur){return bi||(bi=Rr),Pe+=u.slice(Ae,Ur).replace(L_,z),hi&&(Ut=!0,Pe+="' +\n__e("+hi+") +\n'"),rr&&(te=!0,Pe+="';\n"+rr+";\n__p += '"),bi&&(Pe+="' +\n((__t = ("+bi+")) == null ? '' : __t) +\n'"),Ae=Ur+Pn.length,Pn}),Pe+="';\n";var Ln=Ki.call(p,"variable")&&p.variable;if(Ln){if(nu.test(Ln))throw new An("Invalid `variable` option passed into `_.template`")}else Pe="with (obj) {\n"+Pe+"\n}\n";Pe=(te?Pe.replace(tm,""):Pe).replace(mh,"$1").replace(em,"$1;"),Pe="function("+(Ln||"obj")+") {\n"+(Ln?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(Ut?", __e = _.escape":"")+(te?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+Pe+"return __p\n}";var Vn=Z0(function(){return zn(Ct,yn+"return "+Pe).apply(f,qt)});if(Vn.source=Pe,Td(Vn))throw Vn;return Vn},bt.times=function Cy(u,p){if((u=Wn(u))<1||u>fe)return[];var S=Yn,J=Do(u,Yn);p=In(p),u-=Yn;for(var rt=Mo(J,p);++S<u;)p(S);return rt},bt.toFinite=Ul,bt.toInteger=Wn,bt.toLength=k0,bt.toLower=function W3(u){return Bi(u).toLowerCase()},bt.toNumber=ls,bt.toSafeInteger=function n3(u){return u?il(Wn(u),-fe,fe):0===u?u:0},bt.toString=Bi,bt.toUpper=function V3(u){return Bi(u).toUpperCase()},bt.trim=function X3(u,p,S){if((u=Bi(u))&&(S||p===f))return hm(u);if(!u||!(p=xr(p)))return u;var J=un(u),rt=un(p);return as(J,pm(J,rt),rd(J,rt)+1).join("")},bt.trimEnd=function ty(u,p,S){if((u=Bi(u))&&(S||p===f))return u.slice(0,vn(u)+1);if(!u||!(p=xr(p)))return u;var J=un(u);return as(J,0,rd(J,un(p))+1).join("")},bt.trimStart=function ey(u,p,S){if((u=Bi(u))&&(S||p===f))return u.replace(im,"");if(!u||!(p=xr(p)))return u;var J=un(u);return as(J,pm(J,un(p))).join("")},bt.truncate=function ny(u,p){var S=30,J="...";if(Io(p)){var rt="separator"in p?p.separator:rt;S="length"in p?Wn(p.length):S,J="omission"in p?xr(p.omission):J}var Ct=(u=Bi(u)).length;if(X(u)){var qt=un(u);Ct=qt.length}if(S>=Ct)return u;var Ut=S-De(J);if(Ut<1)return J;var te=qt?as(qt,0,Ut).join(""):u.slice(0,Ut);if(rt===f)return te+J;if(qt&&(Ut+=te.length-Ut),jf(rt)){if(u.slice(Ut).search(rt)){var Ae,Se=te;for(rt.global||(rt=_u(rt.source,Bi(bh.exec(rt))+"g")),rt.lastIndex=0;Ae=rt.exec(Se);)var Pe=Ae.index;te=te.slice(0,Pe===f?Ut:Pe)}}else if(u.indexOf(xr(rt),Ut)!=Ut){var nn=te.lastIndexOf(rt);nn>-1&&(te=te.slice(0,nn))}return te+J},bt.unescape=function iy(u){return(u=Bi(u))&&Gs.test(u)?u.replace(nm,fi):u},bt.uniqueId=function Ty(u){var p=++Dn;return Bi(u)+p},bt.upperCase=oy,bt.upperFirst=Uf,bt.each=s0,bt.eachRight=Ef,bt.first=t0,Jf(bt,function(){var u={};return ol(bt,function(p,S){Ki.call(bt.prototype,S)||(u[S]=p)}),u}(),{chain:!1}),bt.VERSION="4.17.21",Ja(["bind","bindKey","curry","curryRight","partial","partialRight"],function(u){bt[u].placeholder=bt}),Ja(["drop","take"],function(u,p){xi.prototype[u]=function(S){S=S===f?1:ta(Wn(S),0);var J=this.__filtered__&&!p?new xi(this):this.clone();return J.__filtered__?J.__takeCount__=Do(S,J.__takeCount__):J.__views__.push({size:Do(S,Yn),type:u+(J.__dir__<0?"Right":"")}),J},xi.prototype[u+"Right"]=function(S){return this.reverse()[u](S).reverse()}}),Ja(["filter","map","takeWhile"],function(u,p){var S=p+1,J=1==S||3==S;xi.prototype[u]=function(rt){var Ct=this.clone();return Ct.__iteratees__.push({iteratee:In(rt,3),type:S}),Ct.__filtered__=Ct.__filtered__||J,Ct}}),Ja(["head","last"],function(u,p){var S="take"+(p?"Right":"");xi.prototype[u]=function(){return this[S](1).value()[0]}}),Ja(["initial","tail"],function(u,p){var S="drop"+(p?"":"Right");xi.prototype[u]=function(){return this.__filtered__?new xi(this):this[S](1)}}),xi.prototype.compact=function(){return this.filter(Tr)},xi.prototype.find=function(u){return this.filter(u).head()},xi.prototype.findLast=function(u){return this.reverse().find(u)},xi.prototype.invokeMap=kn(function(u,p){return"function"==typeof u?new xi(this):this.map(function(S){return ym(S,u,p)})}),xi.prototype.reject=function(u){return this.filter(Pf(In(u)))},xi.prototype.slice=function(u,p){u=Wn(u);var S=this;return S.__filtered__&&(u>0||p<0)?new xi(S):(u<0?S=S.takeRight(-u):u&&(S=S.drop(u)),p!==f&&(S=(p=Wn(p))<0?S.dropRight(-p):S.take(p-u)),S)},xi.prototype.takeRightWhile=function(u){return this.reverse().takeWhile(u).reverse()},xi.prototype.toArray=function(){return this.take(Yn)},ol(xi.prototype,function(u,p){var S=/^(?:filter|find|map|reject)|While$/.test(p),J=/^(?:head|last)$/.test(p),rt=bt[J?"take"+("last"==p?"Right":""):p],Ct=J||/^find/.test(p);rt&&(bt.prototype[p]=function(){var qt=this.__wrapped__,Ut=J?[1]:arguments,te=qt instanceof xi,Ae=Ut[0],Se=te||Jn(qt),Pe=function(hi){var bi=rt.apply(bt,fr([hi],Ut));return J&&nn?bi[0]:bi};Se&&S&&"function"==typeof Ae&&1!=Ae.length&&(te=Se=!1);var nn=this.__chain__,Ln=Ct&&!nn,Vn=te&&!this.__actions__.length;if(!Ct&&Se){qt=Vn?qt:new xi(this);var Pn=u.apply(qt,Ut);return Pn.__actions__.push({func:lp,args:[Pe],thisArg:f}),new ns(Pn,nn)}return Ln&&Vn?u.apply(this,Ut):(Pn=this.thru(Pe),Ln?J?Pn.value()[0]:Pn.value():Pn)})}),Ja(["pop","push","shift","sort","splice","unshift"],function(u){var p=Ll[u],S=/^(?:push|sort|unshift)$/.test(u)?"tap":"thru",J=/^(?:pop|shift)$/.test(u);bt.prototype[u]=function(){var rt=arguments;if(J&&!this.__chain__){var Ct=this.value();return p.apply(Jn(Ct)?Ct:[],rt)}return this[S](function(qt){return p.apply(Jn(qt)?qt:[],rt)})}}),ol(xi.prototype,function(u,p){var S=bt[p];if(S){var J=S.name+"";Ki.call(xu,J)||(xu[J]=[]),xu[J].push({name:p,func:S})}}),xu[Am(f,2).name]=[{name:"wrapper",func:f}],xi.prototype.clone=function Q2(){var u=new xi(this.__wrapped__);return u.__actions__=ir(this.__actions__),u.__dir__=this.__dir__,u.__filtered__=this.__filtered__,u.__iteratees__=ir(this.__iteratees__),u.__takeCount__=this.__takeCount__,u.__views__=ir(this.__views__),u},xi.prototype.reverse=function R2(){if(this.__filtered__){var u=new xi(this);u.__dir__=-1,u.__filtered__=!0}else(u=this.clone()).__dir__*=-1;return u},xi.prototype.value=function _1(){var u=this.__wrapped__.value(),p=this.__dir__,S=Jn(u),J=p<0,rt=S?u.length:0,Ct=function ub(u,p,S){for(var J=-1,rt=S.length;++J<rt;){var Ct=S[J],qt=Ct.size;switch(Ct.type){case"drop":u+=qt;break;case"dropRight":p-=qt;break;case"take":p=Do(p,u+qt);break;case"takeRight":u=ta(u,p-qt)}}return{start:u,end:p}}(0,rt,this.__views__),qt=Ct.start,Ut=Ct.end,te=Ut-qt,Ae=J?Ut:qt-1,Se=this.__iteratees__,Pe=Se.length,nn=0,yn=Do(te,this.__takeCount__);if(!S||!J&&rt==te&&yn==te)return D1(u,this.__actions__);var Ln=[];t:for(;te--&&nn<yn;){for(var Vn=-1,Pn=u[Ae+=p];++Vn<Pe;){var hi=Se[Vn],Rr=hi.type,rr=(0,hi.iteratee)(Pn);if(2==Rr)Pn=rr;else if(!rr){if(1==Rr)continue t;break t}}Ln[nn++]=Pn}return Ln},bt.prototype.at=cv,bt.prototype.chain=function uv(){return Pc(this)},bt.prototype.commit=function dv(){return new ns(this.value(),this.__chain__)},bt.prototype.next=function mv(){this.__values__===f&&(this.__values__=T0(this.value()));var u=this.__index__>=this.__values__.length;return{done:u,value:u?f:this.__values__[this.__index__++]}},bt.prototype.plant=function pv(u){for(var p,S=this;S instanceof bu;){var J=K1(S);J.__index__=0,J.__values__=f,p?rt.__wrapped__=J:p=J;var rt=J;S=S.__wrapped__}return rt.__wrapped__=u,p},bt.prototype.reverse=function _v(){var u=this.__wrapped__;if(u instanceof xi){var p=u;return this.__actions__.length&&(p=new xi(this)),(p=p.reverse()).__actions__.push({func:lp,args:[Af],thisArg:f}),new ns(p,this.__chain__)}return this.thru(Af)},bt.prototype.toJSON=bt.prototype.valueOf=bt.prototype.value=function fv(){return D1(this.__wrapped__,this.__actions__)},bt.prototype.first=bt.prototype.head,Xo&&(bt.prototype[Xo]=function hv(){return this}),bt}();Uo._=Tn,(D=function(){return Tn}.call(K,M,K,Zt))!==f&&(Zt.exports=D)}.call(this)},4159:(Zt,K,M)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.AnswerParser=void 0;const D=M(48089),f=M(37403),$=M(15025);class O extends $.Parser{constructor(){super(),this.TYPE=O.TYPE_NAME}parse(w,y,C,A,E,L){var I=[],F=this.matchPos(y.strLine,!1);if(0==F.length&&(F=this.matchPos(y.strLine,!0)),F.length>0)for(const N of F)I.push({str:N.value,pageIndex:y.pageIndex,lineIndex:C,transform:D.CanvasUtil.calIndexPos(y.textObjs,E,L,N.index),startLeft:D.CanvasUtil.calIndexPos2(y.textObjs,E,L,N.index+1),type:this.TYPE});return I}static getRemoveBox(w,y){let C=w.startLeft?w.startLeft[5]-2:y[w.lineIndex].top,A=w.transform[4]-f.CONST.MARGIN_LEFT,E=w.startLeft?w.startLeft[5]+w.startLeft[3]:y[w.lineIndex].bottom;return{pageIndex:w.pageIndex,top:C||20,left:A,heigh:E&&C?E-C:0,width:(w.startLeft?w.startLeft[4]:0)-A}}static getBoxes(w,y,C,A){const E=A,L=f.CONST.MARGIN_LEFT;let I=[],F=y[w.lineIndex].top,N=y[w.lineIndex].bottom;if(!F||!N)return[];let j=N,V=w.transform[4]-L,tt=C&&w.lineIndex==C.lineIndex?C.transform[4]-L:y[w.lineIndex].transform[4]+y[w.lineIndex].width+L;if(I.push({pageIndex:w.pageIndex,top:F,left:V,width:tt-V,heigh:N-F}),C&&C.lineIndex==w.lineIndex)return I;F=N,N=E,tt=0;let it=w.pageIndex,dt=0;for(dt=w.lineIndex+1;dt<y.length;dt++){if(N==E&&D.CanvasUtil.isLastLineOfPage(dt,y)){let ft=y[dt].isFooter?y[dt-1]:y[dt];N=ft.transform[5]+ft.height+20}let mt=y[dt].top;if(dt>w.lineIndex+1&&!y[dt-1].isFooter){let ft=y[dt-1].transform[4]+y[dt-1].width+L;ft>tt&&(tt=ft);let yt=y[dt-1].transform[4]-L;yt<V&&(V=yt)}if(y[dt].isFooter&&mt)dt-w.lineIndex>1?(N=y[dt-1].transform[5]+y[dt-1].height+f.CONST.LINE_MAGIN,V=y[w.lineIndex+1].transform[4]-L):N=y[w.lineIndex].bottom;else if(y[dt].pageIndex>it&&(N&&N-F>f.CONST.LINE_SMALL_HEIGHT&&dt-w.lineIndex>1&&I.push({pageIndex:it,top:F,left:V,width:tt-V,heigh:N-F}),F=20,j=F),it=y[dt].pageIndex,mt){N=mt;break}}if(dt>=y.length&&(dt=y.length-1),dt-w.lineIndex>1&&y[dt-1].transform[5]>j&&!D.CanvasUtil.isFirstLineOfPage(dt,y)){let mt=20==F?y[dt].transform[4]:y[w.lineIndex+1].transform[4];N&&N-F>f.CONST.LINE_SMALL_HEIGHT&&I.push({pageIndex:it,top:F,left:mt,width:tt-mt,heigh:N-F})}C&&C.type==O.TYPE_NAME&&C.transform[4]>y[C.lineIndex].transform[4]+25*f.CONST.RENDER_SCALE&&(tt=C.transform[4]-L,F=y[C.lineIndex].top,V=y[C.lineIndex].transform[4]-L,N=y[C.lineIndex].bottom,F&&N&&N-F>f.CONST.LINE_SMALL_HEIGHT&&I.push({pageIndex:it,top:F,left:V,width:tt-V,heigh:N-F}));for(let mt=I.length-1;mt>=1;mt--)I[mt].left-(I[mt-1].left+I[mt-1].width)>=20*f.CONST.RENDER_SCALE&&I.splice(mt,1);return I}matchPos(w,y){for(var C=y?w.toUpperCase():w,A=f.CONST.ANS_PATTERN,E=new RegExp("[\\s\\|\\.]"),L=C.matchAll(A),I=[];;){var F=L.next();if(F.done)break;for(var N=0,Q=F.value.index;Q<C.length&&E.test(C[Q]);Q++)N++;let j=F.value[0].substr(N,1);"A"==j&&!C.replace(/\|/g,"").trim().startsWith("A")||I.push({value:j,index:F.value.index+N})}return I}}K.AnswerParser=O,O.TYPE_NAME="answer"},48089:(Zt,K,M)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.CanvasUtil=void 0;const D=M(37403);class f{static drawPoint(O,m,w){null!=O&&(O.fillStyle=m,O.beginPath(),O.arc(w.left,w.top,5,0,2*Math.PI),O.fill())}static drawBox(O,m,w,y){null!=O&&(y?(O.fillStyle=m,O.beginPath(),O.rect(w.left,w.top,w.width,w.heigh),O.fill()):(O.strokeStyle=m,O.beginPath(),O.rect(w.left,w.top,w.width,w.heigh),O.stroke()))}static drawBox2(O,m,w,y,C){null!=O&&(O.strokeStyle=m,O.beginPath(),O.rect(C[4],C[5],w,y),O.stroke())}static drawLine(O,m,w,y){null!=O&&(O.strokeStyle=m,O.beginPath(),O.moveTo(w,y),O.lineTo(O.canvas.width-10,y),O.stroke())}static drawText(O,m,w,y){null!=O&&(O.font="11px Arial",O.fillStyle=m,O.fillText(y,w[4],w[5]))}static isLineIntersec(O,m){let w=O.transform[5]<=m.transform[5]&&m.transform[5]<=O.transform[5]+O.height,y=m.transform[5]<=O.transform[5]&&O.transform[5]<=m.transform[5]+m.height,C=O.transform[4]<=m.transform[4]&&m.transform[4]<=O.transform[4]+O.width+D.CONST.INTERSEC_MARGIN,A=m.transform[4]<=O.transform[4]&&O.transform[4]<=m.transform[4]+m.width+D.CONST.INTERSEC_MARGIN,E=this.isSameLine(O,m);return(w||y)&&(C||A)&&!E}static isLineVIntersec(O,m){return(O.transform[5]<=m.transform[5]&&m.transform[5]<=O.transform[5]+O.height||m.transform[5]<=O.transform[5]&&O.transform[5]<=m.transform[5]+m.height)&&(O.transform[4]<=m.transform[4]&&m.transform[4]<=O.transform[4]+O.width+D.CONST.INTERSEC_MARGIN||m.transform[4]<=O.transform[4]&&O.transform[4]<=m.transform[4]+m.width+D.CONST.INTERSEC_MARGIN)&&Math.abs(m.transform[4]-O.transform[4])>D.CONST.INTERSEC_MARGIN/2}static isSameLine(O,m){return Math.abs(O.transform[5]+O.height-(m.transform[5]+m.height))<=D.CONST.LINE_MAGIN}static isObjIntersec(O,m){return O.transform[5]<=m.transform[5]&&m.transform[5]<=O.transform[5]+O.height||m.transform[5]<=O.transform[5]&&O.transform[5]<=m.transform[5]+m.height}static isObjFullIntersec(O,m){return(O.transform[5]<=m.transform[5]&&m.transform[5]<=O.transform[5]+O.height||m.transform[5]<=O.transform[5]&&O.transform[5]<=m.transform[5]+m.height)&&(O.transform[4]<=m.transform[4]&&m.transform[4]<=O.transform[4]+O.width||m.transform[4]<=O.transform[4]&&O.transform[4]<=m.transform[4]+m.width)}static isFirstLineOfPage(O,m){return!(O<0||O>=m.length||0!=O&&m[O-1].pageIndex==m[O].pageIndex)}static isLastLineOfPage(O,m){return!(O<0||O>=m.length||O!=m.length-1&&m[O+1].pageIndex==m[O].pageIndex)}static getTopLine(O,m,w){let y=w[m],C=[[D.CONST.STEP_SIZE,D.CONST.OVERLAP],[1,D.CONST.OVERLAP],[1,.3]];for(const A of C){let E=A[0],L=A[1],I=y.transform[5],F=0,N=3*E;if(!f.isFirstLineOfPage(m,w)){let j=f.isSameLine(w[m-1],y);f.isLineIntersec(w[m-1],y)?(I=w[m-1].transform[5]+w[m-1].height,F=w[m-1].transform[5],w[m-1].transform[4]>w[m].transform[4]+2*D.CONST.MARGIN_LEFT?F-=2*D.CONST.MARGIN_LEFT:F+=w[m-1].height*L,E=1,N=w[m].transform[5]+w[m].height/2-I):(F=j&&m-2>=0?w[m-2].transform[5]+w[m-2].height*L:w[m-1].transform[5]+w[m-1].height*L,j&&f.isFirstLineOfPage(m-1,w)&&(F=0))}if(!D.CONST.ENABLE_IMAGE_PROCESS)return[I,0];let Q=!1;for(;I>F;){if(!f.hasColor(O,y.transform[4],I,y.width,E))return[I,0];Q||(Q=!0,I+=N),I-=E}}return[y.transform[5],1]}static arrContains(O,m){for(const w of m)if(w==O)return!0;return!1}static getBottomLine(O,m,w){let y=w[m],C=[[D.CONST.STEP_SIZE,D.CONST.OVERLAP],[1,D.CONST.OVERLAP],[1,.3]];for(const A of C){let E=A[0],L=A[1],I=y.transform[5]+y.height,F=9999,N=3*E;if(!f.isLastLineOfPage(m,w)){let j=f.isSameLine(w[m+1],y);f.isLineIntersec(w[m+1],y)?(I=w[m+1].transform[5],F=w[m+1].transform[5]+w[m+1].height,w[m+1].transform[4]>w[m].transform[4]+2*D.CONST.MARGIN_LEFT?F+=2*D.CONST.MARGIN_LEFT:F-=w[m+1].height*L,N=w[m].transform[5]+w[m].height/2-I):(F=j&&m+2<w.length?w[m+2].transform[5]+w[m+2].height-w[m+2].height*L:w[m+1].transform[5]+w[m+1].height-w[m+1].height*L,j&&f.isLastLineOfPage(m+1,w)&&(F=9999));let V=w[m+1].top;if(V&&I>=V&&!j)return[V,0]}if(!D.CONST.ENABLE_IMAGE_PROCESS)return[I,0];let Q=!1;for(;I<F;){if(!f.hasColor(O,y.transform[4],I,y.width,E))return[I,0];Q||(Q=!0,I-=N),I+=E}}return[y.transform[5]+y.height,1]}static hasColor(O,m,w,y,C){let A=Math.round(m),E=Math.round(A+y),L=Math.round(w),I=Math.round(L+C);for(let V=L;V<I;V++)for(let tt=A;tt<E;tt++){let it=4*(V*O.width+tt);if((O.data[it]+O.data[it+1]+O.data[it+2])/3<150)return!0}return!1}static calIndexPos2(O,m,w,y,C){let A=[],E=0,L=0,I=0,F=0,N=0,Q=0,j=!0,V=!0;for(const mt of O){V=this.isObjIntersec(O[0],mt),F=mt.transform[4],C||(E+=F-I>D.CONST.SPLIT_MARGIN&&""!=mt.str.trim()||N!=mt.transform[5]?1:0),j=F+2*D.CONST.MARGIN_LEFT>=I;let ft=mt.transform[4]+mt.width;if(V&&(I=ft),ft>L&&V&&(L=ft),E+=mt.str.length,E>y&&j&&V){mt.transform.forEach(he=>{A.push(he)}),A[3]=mt.height,A[2]=Q,A[1]=mt.str.length-E+y;let yt=mt.str.substr(0,mt.str.length-E+y+1);if(yt.length==mt.str.length){A[4]=A[4]+mt.width;break}var it=m[mt.fontName].fontFamily,dt=Math.hypot(mt.transform[2],mt.transform[3]);w.font=`${dt}px ${it}`;let St=w.measureText(yt).width,$t=w.measureText(mt.str).width;A[4]=A[4]+mt.width*St/$t;break}V&&(N=mt.transform[5]),Q++}return 0==A.length&&(A=[0,O[O.length-1].length-1,O.length-1,O[0].height,L,O[0].transform[5]]),A}static calIndexPos(O,m,w,y,C){let A=[],E=0,L=0,I=0,F=0,N=0,Q=0,j=!0,V=!0,tt="";for(const ft of O){V=this.isObjIntersec(O[0],ft),F=ft.transform[4],C||(E+=F-I>D.CONST.SPLIT_MARGIN&&""!=ft.str.trim()||N!=ft.transform[5]?1:0,tt+=(F-I>D.CONST.SPLIT_MARGIN&&""!=ft.str.trim()||N!=ft.transform[5]?"|":"")+ft.str),j=F+2*D.CONST.MARGIN_LEFT>=I;let yt=ft.transform[4]+ft.width;if(V&&(I=yt),yt>L&&V&&(L=yt),E+=ft.str.length,E>y&&j&&V){let St=ft.str.substr(0,ft.str.length-E+y);var dt=m[ft.fontName].fontFamily,mt=Math.hypot(ft.transform[2],ft.transform[3]);w.font=`${mt}px ${dt}`;let $t=w.measureText(St).width,he=w.measureText(ft.str).width;ft.transform.forEach(xe=>{A.push(xe)}),A[4]=A[4]+ft.width*$t/he,A[3]=ft.height,A[2]=Q,A[1]=ft.str.length-E+y;break}V&&(N=ft.transform[5]),Q++}return 0==A.length&&(A=[0,O[O.length-1].length-1,O.length-1,O[0].height,L,O[0].transform[5]]),A}static getTextBottom(O,m,w,y){let C=Math.atan2(O[1],O[0]);m.vertical&&(C+=Math.PI/2);const A=Math.hypot(O[2],O[3]),E=A*f.getAscent(m.fontFamily,w,y);let L=O[5],I=0;I=0===C?E:E*Math.cos(C);let F=0*I;return L=O[5]-I-F,[L,A+F]}static getAscent(O,m,w){const A=w.get(O);if(A)return A;m.save(),m.font=`30px ${O}`;const E=m.measureText("");let L=E.fontBoundingBoxAscent,I=Math.abs(E.fontBoundingBoxDescent);if(L){m.restore();const N=L/(L+I);return w.set(O,N),N}m.strokeStyle="red",m.clearRect(0,0,30,30),m.strokeText("g",0,0);let F=m.getImageData(0,0,30,30).data;I=0;for(let N=F.length-1-3;N>=0;N-=4)if(F[N]>0){I=Math.ceil(N/4/30);break}m.clearRect(0,0,30,30),m.strokeText("A",0,30),F=m.getImageData(0,0,30,30).data,L=0;for(let N=0,Q=F.length;N<Q;N+=4)if(F[N]>0){L=30-Math.floor(N/4/30);break}if(m.restore(),L){const N=L/(L+I);return w.set(O,N),N}return w.set(O,.8),.8}static getMaxLineRight(O,m){let w=0;for(const y of m)if(y.pageIndex==O||-1==O){let C=y.transform[4]+y.width;C>w&&(w=C)}return w}static getMinLineLeft(O,m){let w=99999;for(const y of m)if(y.pageIndex==O||-1==O){let C=y.transform[4];C<w&&(w=C)}return w}}K.CanvasUtil=f},37403:(Zt,K)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.CONST=void 0;class M{}K.CONST=M,M.RENDER_SCALE=2,M.LINE_SMALL_HEIGHT=7*M.RENDER_SCALE,M.SPLIT_MARGIN=3*M.RENDER_SCALE,M.INTERSEC_MARGIN=20*M.RENDER_SCALE,M.LINE_MAGIN=2*M.RENDER_SCALE,M.MARGIN_LEFT=2*M.RENDER_SCALE,M.ENABLE_IMAGE_PROCESS=!0,M.STEP_SIZE=2,M.CROP_FULL_WIDTH=!0,M.OVERLAP=.5,M.QUESTION_PATTERN=[],M.QUESTION_PATTERN2=[],M.BREAK_LINE_PATTERN=[],M.SECTION_PATTERN_LOWER=[],M.SECTION_PATTERN_NORMAL=[],M.KICK_PATTERN=[],M.TVCN_CHAR=[],M.HET_PATTERN=[],M.DAPAN_PATTERN=[],M.HUONGDAN_PATTERN=[],M.MULTIPLE_ANS_PATTERN=[],M.DRAW_RESULT="",M.SKIP_CHAR=[],M.FOOTER_PATTERN=[],M.HELP_ANS_PATTERN=[],M.ANS_PATTERN=[]},66933:(Zt,K,M)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.DapAnChiTietParser=void 0;const D=M(15025);class f extends D.Parser{constructor(O,m){super(),this.firstLine=null,this.lineIdx=0,this.str="",this.TYPE=f.TYPE_NAME,null!=O&&(this.isOn=O),this.offCalback=m}parse(O,m,w,y,C,A){var L=m.strLine.replace(/\|/g,"").replace(/\s*\.*\-*:*,*;*/g,"");return L=(L=(L=(L=(L=L.replace(/C\xe2u/g,"")).replace(/\u0110\xe1p\xe1n/g,"")).replace(/\u0110\xe1p/g,"")).replace(/\xe1n/g,"")).replace(/\u0110\/A/g,""),/^[0-9ABCDEFGHabcdefgh]+$/g.test(L)&&L.length>=2&&(null==this.firstLine&&(this.firstLine=m,this.lineIdx=w),this.str+=L),[]}static getBoxes(O,m,w,y){return[]}getResult(O){let m=[],w="",y=[],C=!1;for(let A=0;A<O.length;A++){let E=O.charCodeAt(A),L=E>=65&&E<=72;if(L&&""==w)return[];L!=C&&(y.push(w),w=""),C=L,w+=O[A]}""!=w&&y.push(w);for(let A=1;A<y.length;A+=2){let E=0,L=Math.floor(y[A-1].length/y[A].length),I=+y[A-1].substr(E,L),F=I;for(let N=0;N<y[A].length;N++){if(N>=y[A-1].length)return[];if(I=+y[A-1].substr(E,L),I!=F)return[];m.push({num:I,str:y[A][N]}),E+=L,F=I+1,L=F.toString().length}}return m}on(){super.on(),this.firstLine=null,this.lineIdx=0,this.str=""}off(){if(super.off(),this.offCalback&&this.firstLine){var O=this.getResult(this.str.toUpperCase());if(O.length>0){let m=JSON.stringify({main:O,sub:[]});this.offCalback([{str:m,pageIndex:this.firstLine.pageIndex,lineIndex:this.lineIdx,transform:this.firstLine.transform,type:this.TYPE}])}}this.firstLine=null,this.str=""}}K.DapAnChiTietParser=f,f.TYPE_NAME="dapanchitiet"},94081:(Zt,K,M)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.DapAnDienTuParser=void 0;const D=M(37403),f=M(93494),$=M(2101),O=M(15025);class m extends O.Parser{constructor(y,C){super(),this.firstLine=null,this.lineIdx=0,this.str="",this.TYPE=m.TYPE_NAME,null!=y&&(this.isOn=y),this.offCalback=C}parse(y,C,A,E,L,I){let F=[new f.FooterParser,new $.HuongDanParser];for(const Q of F)if(Q.parse(y,C,A,E,L,I).length>0)return[];var N=C.strLine;return null==this.firstLine&&(this.firstLine=C,this.lineIdx=A),this.str+=N+"\n",[]}static getBoxes(y,C,A,E){return[]}getResult(y){let C=[],A=y.replace(/\n/g,"\n|"),E=D.CONST.QUESTION_PATTERN.join("|").replace(/\(\^/g,"(\\|"),L=A.matchAll(new RegExp(E,"ig"));for(;;){let j=L.next();if(j.done)break;let V=j.value[0],tt=this.getNumberFromStr(V);A=A.replace(V,tt+".")}let Q,F=A.matchAll(/\d+[\.\-]/g),N=-1;for(;;){let j=F.next();if(j.done)break;if(-1==N)N=j.value.index,Q=j;else{let V=A.substr(N,j.value.index-N);C.push(this.toAns(V,Q)),N=j.value.index,Q=j}}if(N>=0&&Q){let j=A.substr(N);C.push(this.toAns(j,Q))}return C}toAns(y,C){let A=C.value[0].length;return{num:+C.value[0].substr(0,A-1),str:y.substr(A).replace(/\|/g," ").replace(/ +/g," ").trim()}}getNumberFromStr(y){var C=y.match(/(\d+)/);return C?C[0]:""}on(){super.on(),this.firstLine=null,this.lineIdx=0,this.str=""}off(){if(super.off(),this.offCalback&&this.firstLine){var y=this.getResult(this.str);if(y.length>0){let C=JSON.stringify({main:[],sub:y});this.offCalback([{str:C,pageIndex:this.firstLine.pageIndex,lineIndex:this.lineIdx,transform:this.firstLine.transform,type:this.TYPE}])}}this.firstLine=null,this.str=""}}K.DapAnDienTuParser=m,m.TYPE_NAME="dapandientu"},44123:(Zt,K,M)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.DapAnParser=void 0;const D=M(37403),f=M(15025);class $ extends f.Parser{constructor(m){super(),null!=m&&(this.isOn=m),this.TYPE=$.TYPE_NAME}parse(m,w,y,C,A,E){let L=w.strLine.replace(/\|/g,"").trim().match(D.CONST.DAPAN_PATTERN.join("|"));return null!=L&&L.length>0?[{str:w.strLine,pageIndex:w.pageIndex,lineIndex:y,transform:w.transform,type:this.TYPE}]:[]}static getBoxes(m,w,y,C){return[]}static getAnsFromHelp(m){for(const w of m){let y=w.strLine.replace(/\|/g,"").trim().match(D.CONST.HELP_ANS_PATTERN.join("|"));if(null!=y)for(let C=0;C<y.length;C++)if(null!=y[C]&&1==y[C].length)return y[C]}return""}strContains(m,w){var y=m;for(const C of w)if(y.indexOf(C)>=0)return!0;return!1}}K.DapAnParser=$,$.TYPE_NAME="dapan"},93494:(Zt,K,M)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.FooterParser=void 0;const D=M(37403),f=M(15025);class $ extends f.Parser{constructor(){super(),this.TYPE=$.TYPE_NAME}parse(m,w,y,C,A,E){if(!w.isLastLine||C&&w.transform[5]<C.transform[5]+C.height)return[];var I=w.strLine.replace(/\|/g,"").trim().match(D.CONST.FOOTER_PATTERN.join("|"));return null!=I&&I.length>0?[{str:I[0],pageIndex:w.pageIndex,lineIndex:y,transform:w.transform,type:this.TYPE}]:[]}static getBoxes(m,w,y,C){return[]}}K.FooterParser=$,$.TYPE_NAME="footer"},15251:(Zt,K,M)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.HetParser=void 0;const D=M(37403),f=M(15025);class $ extends f.Parser{constructor(m){super(),null!=m&&(this.isOn=m),this.TYPE=$.TYPE_NAME}parse(m,w,y,C,A,E){let L=w.strLine.replace(/\|/g,"").trim().match(D.CONST.HET_PATTERN.join("|"));return null!=L&&L.length>0?[{str:w.strLine,pageIndex:w.pageIndex,lineIndex:y,transform:w.transform,type:this.TYPE}]:[]}static getBoxes(m,w,y,C){return[]}strContains(m,w){for(const y of w)if(m.indexOf(y)>=0)return!0;return!1}}K.HetParser=$,$.TYPE_NAME="het"},2101:(Zt,K,M)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.HuongDanParser=void 0;const D=M(37403),f=M(15025),$=M(82130);class O extends f.Parser{constructor(){super(),this.TYPE=O.TYPE_NAME}parse(w,y,C,A,E,L){let I=y.strLine.replace(/\|/g,"").trim().match(D.CONST.HUONGDAN_PATTERN.join("|"));return null!=I&&I.length>0?[{str:y.strLine,pageIndex:y.pageIndex,lineIndex:C,transform:y.transform,type:this.TYPE}]:[]}static getBoxes(w,y,C,A){return $.QuestionParser.getBoxes(w,y,C,A)}strContains(w,y){var C=w;for(const A of y)if(C.indexOf(A)>=0)return!0;return!1}}K.HuongDanParser=O,O.TYPE_NAME="huongdan"},15025:(Zt,K)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.Parser=void 0,K.Parser=class M{constructor(){this.isOn=!0,this.TYPE="default"}on(){this.isOn=!0}off(){this.isOn=!1}process(f,$,O,m,w,y){return this.isOn?this.parse(f,$,O,m,w,y):[]}}},15119:(Zt,K,M)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.PdfRender=void 0;const D=M(48089),f=M(37403);class ${constructor(){let m=document.createElement("canvas");this.tempCanvas=m.getContext("2d"),this.ascentCache=new Map,this.imageCache=[]}loadPdf(m,w){var y=URL.createObjectURL(m);const A=pdfjsLib.getDocument({url:y,cMapPacked:!0,cMapUrl:"/assets/js/pdf-js-v2/cmaps/",disableAutoFetch:!1,disableFontFace:!1,disableRange:!1,disableStream:!1,docBaseUrl:"",enableXfa:!0,fontExtraProperties:!1,isEvalSupported:!0,maxImageSize:-1,pdfBug:!1,standardFontDataUrl:"/assets/js/pdf-js-v2/standard_fonts/",verbosity:1});var E=[];let L=this;A.promise.then(function(I){L.optionalContentConfigPromise=I.getOptionalContentConfig();for(var F=I._pdfInfo.numPages,N=1;N<=F;N++)I.getPage(N).then(Q=>{E.push(Q),E.length==F&&(E=E.sort((j,V)=>j._pageIndex>V._pageIndex?1:-1),w(E))})},function(I){console.error(I)})}getImages(m,w){let y=[];if("function"!=typeof m.objs.getAll)return console.log("Unable to read img"),y;let C=m.objs.getAll(),A=Object.keys(C);for(const E of A)C[E].data.pageIndex=w,y.push(C[E].data);return y}isImageObj(m){return-999==m.transform[0]&&"img"==m.str}getLines(m,w,y,C){let A=C.scale,E=m.items.length;for(let Q=0;Q<E;Q++){let j=m.items[Q];this.isImageObj(j)||(j.transform=$.transform(C.transform,j.transform),j.width=j.width*A),j.transform[4]+j.width>y.canvas.width&&(j.width=y.canvas.width-j.transform[4]-20);let V=this.isImageObj(j)?[j.transform[5],j.height]:D.CanvasUtil.getTextBottom(j.transform,m.styles[j.fontName],this.tempCanvas,this.ascentCache);j.height=V[1];let tt=Math.ceil(V[0]);j.transform[5]=tt}m.items.sort((Q,j)=>1e6*Math.floor(Q.transform[5])-Q.transform[4]<1e6*Math.floor(j.transform[5])-j.transform[4]?-1:1);let F,L=[],I=0;this.imageCache[w]?F=this.imageCache[w]:(F=y.getImageData(0,0,y.canvas.width,y.canvas.height),this.imageCache[w]=F);var N={strLine:"",transform:[],textObjs:[],pageIndex:w,width:0,height:0,txtLength:0};for(let Q=0;Q<E;Q++){let j=m.items[Q];if(this.isImageObj(j))for(let tt=0;tt<E;tt++)if(Q!=tt&&D.CanvasUtil.isObjIntersec(j,m.items[tt])){j.str="";break}if(D.CanvasUtil.arrContains(j.str.trim(),f.CONST.SKIP_CHAR))continue;let V=Math.floor(j.transform[5]+j.height);0!=I?I-V>=-f.CONST.LINE_MAGIN?this.addTxtToLine(N,j):0!=N.textObjs.length&&(L.push(N),N=this.newLine(j,w),I=Math.floor(N.transform[5]+N.height)):(N=this.newLine(j,w),I=Math.floor(N.transform[5]+N.height))}L.push(N);for(const Q of L)this.calculateSize(Q);this.findAndMergeAnsQuestBlock(L,"ans"),this.findAndMergeAnsQuestBlock(L,"quest"),this.findAndMergeBlock(L),this.mergeIntersecLine(L),this.mergeSmallLine(L,F);for(const Q of L)this.calculateSize(Q);return L}mergeIntersecLine(m){let w=0;for(;w<m.length;){let y=m[w];w++,w<m.length&&D.CanvasUtil.isLineVIntersec(y,m[w])&&(this.mergeLine(y,m[w]),m.splice(w,1),w--)}}findAndSplitQuestAnsLine(m,w,y){let C=0,A=[],E=f.CONST.BREAK_LINE_PATTERN.join("|");for(const I of m){I.top=void 0,I.bottom=void 0;var L=I.strLine.replace(/\|/g,"").trim().match(E);if(null!=L&&L.length>0){let F=/[\s\|\.]+[B\u0412][\s\|]*\./g,N=I.strLine.trim().toUpperCase().match(F);if(null!=N&&N.length>0){let Q=L[0].toUpperCase().indexOf("A");A.push({lineIndex:C,strIndex:Q})}}C++}for(let I=A.length-1;I>=0;I--){let F=A[I].lineIndex;this.splitLine(F,w[m[F].pageIndex],y[m[F].pageIndex],A[I].strIndex,m)}}mergeSmallLine(m,w){let y=0,C=1.2*f.CONST.LINE_SMALL_HEIGHT;for(;y<m.length;){let A=m[y];if(!A||!this.isSmallLine(A)){y++;continue}y-1>=0&&!m[y-1].bottom&&(m[y-1].bottom=D.CanvasUtil.getBottomLine(w,y-1,m)[0]),y+1<m.length&&!m[y+1].top&&(m[y+1].top=D.CanvasUtil.getTopLine(w,y+1,m)[0]);let E=y-1<0?-9999:this.getLineTop(A)-this.getLineBot(m[y-1]),L=y+1>=m.length?-9999:this.getLineTop(m[y+1])-this.getLineBot(A),I=y-1>=0&&m[y-1].transform[4]<=A.transform[4]&&A.transform[4]<=m[y-1].transform[4]+m[y-1].width,F=y+1<m.length&&m[y+1].transform[4]<=A.transform[4]&&A.transform[4]<=m[y+1].transform[4]+m[y+1].width;if(0==y&&L<=C&&F){this.mergeLine(m[y+1],A),m.splice(y,1),y--;continue}if(y==m.length-1&&E<=C&&I){this.mergeLine(m[y-1],A),m.splice(y,1),y--;continue}let N=-1;E>L&&F&&L<=C?N=y+1:E<=L&&I&&E<=C?N=y-1:E<=L&&F&&L<=C?N=y+1:E>L&&I&&E<=C&&(N=y-1),N>=0?(this.mergeLine(m[N],A),m.splice(y,1),y--):y++}}isSmallLine(m){return m.height<f.CONST.LINE_SMALL_HEIGHT}mergeLine(m,w){for(const y of w.textObjs)this.addTxtToLine(m,y)}findAndMergeAnsQuestBlock(m,w){let C=0;for(;C<m.length;){if("ans"==w&&this.isAnsLine(m[C])||"quest"==w&&this.isQuestLine(m[C])){let E=C,L=-1,I=1,F=[];for(;I<=10;){if(E=C+L*I,E<0){L=1,I=1;continue}if(E>=m.length)break;let N=this.isAnsLine(m[E]),Q=N||this.isQuestLine(m[E]),j="ans"==w&&N&&D.CanvasUtil.isSameLine(m[C],m[E]),V=!Q&&D.CanvasUtil.isLineIntersec(m[C],m[E])&&m[E].transform[4]>m[C].transform[4];if((j||V)&&F.push(E),I++,Q&&1==L)break;(I>10||Q)&&-1==L&&(L=1,I=1)}F.sort((N,Q)=>N<Q?1:-1);for(const N of F)for(const Q of m[N].textObjs)this.addTxtToLine(m[C],Q);for(const N of F)m.splice(N,1),N<C&&C--}C++}}findAndMergeBlock(m){let w=0;for(;w<m.length;){if(this.isAnsLine(m[w])||this.isQuestLine(m[w])){w++;continue}let C=w+1;for(;C<m.length&&m[w].pageIndex==m[C].pageIndex;){let A=this.isAnsLine(m[C])||this.isQuestLine(m[C]);if(D.CanvasUtil.isLineIntersec(m[w],m[C])&&!A||D.CanvasUtil.isSameLine(m[w],m[C])){for(const E of m[C].textObjs)this.addTxtToLine(m[w],E);m.splice(C,1),C=w}C++}w++}}isAnsLine(m){let y=m.strLine.trim().match(/[\s\|\.]+[AB\u0412CDEFGHIJK]\s*\./g);return null!=y&&y.length>0}isQuestLine(m){let w=f.CONST.QUESTION_PATTERN.join("|"),y=m.strLine.replace(/\|/g,"").toLowerCase().trim().match(w);return null!=y&&y.length>0}encodeLines(m,w){let y="",C=0;for(const A of w){if(A.height<f.CONST.LINE_SMALL_HEIGHT){C-1>=0&&!w[C-1].bottom&&(w[C-1].bottom=D.CanvasUtil.getBottomLine(m,C-1,w)[0]),C+1<w.length&&!w[C+1].top&&(w[C+1].top=D.CanvasUtil.getTopLine(m,C+1,w)[0]);let E=C-1<0?-9999:this.getLineTop(A)-this.getLineBot(w[C-1]),L=C+1>=w.length?-9999:this.getLineTop(w[C+1])-this.getLineBot(A),I=C-1>=0&&w[C-1].transform[4]<=A.transform[4]&&A.transform[4]+A.width<=w[C-1].transform[4]+w[C-1].width,F=C+1<w.length&&w[C+1].transform[4]<=A.transform[4]&&A.transform[4]+A.width<=w[C+1].transform[4]+w[C+1].width,N=1.2*f.CONST.LINE_SMALL_HEIGHT;Math.abs(E)>=N&&Math.abs(L)>=N?y+="L":y+=-9999==E?"3":-9999==L?"4":E>L&&F?"2":E<=L&&I?"1":E<=L&&F?"2":E>L&&I?"1":"L"}else y+="L";C++}return y}getLineTop(m){return m.top?m.top:m.transform[5]}getLineBot(m){return m.bottom?m.bottom:m.transform[5]+m.height}splitLine(m,w,y,C,A){let E=A[m],L=D.CanvasUtil.calIndexPos(E.textObjs,w,y,C,!0),I=this.newLine(E.textObjs[0],E.pageIndex),F=L[2],N=L[1],Q=E.textObjs[F],j=Q.transform,V={str:Q.str.substr(0,N),width:L[4]-j[4],height:Q.height,fontName:Q.fontName,transform:[j[0],j[1],j[2],j[3],j[4],j[5]]},tt={str:Q.str.substr(N),width:Q.width-V.width,height:Q.height,fontName:Q.fontName,transform:[j[0],j[1],j[2],j[3],L[4],j[5]]},it=E.textObjs;E.textObjs=[],I.textObjs=[];for(let dt=0;dt<it.length;dt++)dt<F?this.addTxtToLine(E,it[dt]):dt>F?this.addTxtToLine(I,it[dt]):(this.addTxtToLine(E,V),this.addTxtToLine(I,tt));return this.calculateSize(E),this.calculateSize(I),m==A.length-1?A.push(I):A.splice(m+1,0,I),I}findAndMergeSmallLine(m,w,y){let C=0,A=m.matchAll(y),E=[];for(;;){let L=A.next();if(L.done)break;let I=L.value[0],F=L.value.index,N=0,Q=[];for(let j=0;j<I.length;j++)"L"==I[j]?N=F+j:Q.push(F+j);for(const j of Q){for(const V of w[j].textObjs)this.addTxtToLine(w[N],V);w[N].top=void 0,w[N].bottom=void 0,E.push(j)}C++}E.sort((L,I)=>L<I?1:-1);for(const L of E)w.splice(L,1);return C}newLine(m,w){let y={strLine:"",transform:[],textObjs:[],pageIndex:w,width:0,height:0,txtLength:0};return y.transform[4]=m.transform[4],y.transform[5]=m.transform[5],y.height=m.height,y.width=m.width,y.txtLength=m.str.length,y.textObjs.push(m),y}addTxtToLine(m,w){w.transform[4]<m.transform[4]&&(m.transform[4]=w.transform[4]),w.transform[5]<m.transform[5]&&(m.transform[5]=w.transform[5]),w.transform[5]+w.height>m.transform[5]+m.height&&(m.height=w.transform[5]+w.height-m.transform[5]),w.transform[4]+w.width>m.transform[4]+m.width&&(m.width=w.transform[4]+w.width-m.transform[4]),m.txtLength+=w.str.length,m.textObjs.push(w);let y=m.transform[4]+m.width,C=m.height;for(const A of m.textObjs)A.transform[4]+A.width>y&&(y=A.transform[4]+A.width),A.transform[5]+A.height>m.transform[5]+C&&(C=A.transform[5]+A.height-m.transform[5]);m.width=y-m.transform[4],m.height=C}static transform(m,w){return pdfjsLib.Util.transform(m,w)}render(m,w,y,C){for(var A,L=m.length,I=0;I<L;I++){var F=document.createElement("div");F.className="pdf-page",F.id="page-"+I,null===(A=document.getElementById(w))||void 0===A||A.appendChild(F),this.renderPage(m[I],y,C)}}calculateSize(m){if(0==m.textObjs.length)return;m.textObjs.sort((Q,j)=>1e6*Math.floor(Q.transform[4])+Q.transform[5]>1e6*Math.floor(j.transform[4])+j.transform[5]?1:-1),m.strLine="";let w=0,y=0,C=0,A=0,E=9999,L=0,I=9999;for(const Q of m.textObjs){let j=D.CanvasUtil.isObjIntersec(m.textObjs[0],Q);C=Q.transform[4];let V=C-y>f.CONST.SPLIT_MARGIN&&""!=Q.str.trim()||A!=Q.transform[5]?"|":"";m.strLine+=V+Q.str,C<I&&(I=C);let tt=Q.transform[4]+Q.width;j&&(y=tt),tt>w&&j&&(w=tt),j&&(A=Q.transform[5]),Q.transform[5]<E&&(E=Q.transform[5]),Q.transform[5]+Q.height>L&&(L=Q.transform[5]+Q.height)}m.transform[4]=I,m.transform[5]=E,m.width=w-I,m.height=L-E,m.transform[0]=E,m.transform[1]=L;let F=f.CONST.TVCN_CHAR,N=m.strLine;for(const Q of F)N=N.replace(new RegExp(Q[0],"g"),Q[1]);m.strLine=N}renderPage(m,w,y){var C=m._pageIndex,A=m.getViewport({scale:w});let E=.8*A.width;var L=document.createElement("canvas"),I=document.getElementById("page-"+C);I?.appendChild(L),L.id="canvas"+C;var F=L.getContext("2d",{alpha:!1});L.height=A.height,L.width=A.width,L.style.height=A.height*E/A.width+"px",L.style.width=E+"px",I&&(I.style.width=L.style.width,I.style.height=L.style.height);const j={canvasContext:F,transform:[1,0,0,1,0,0],viewport:A,annotationMode:pdfjsLib.AnnotationMode.ENABLE_FORMS,optionalContentConfigPromise:this.optionalContentConfigPromise,annotationCanvasMap:new Map,pageColors:{background:"Canvas",foreground:"CanvasText"}};m.render(j).promise.then(function(){y&&y(F,m._pageIndex,A)})}}K.PdfRender=$},52280:(Zt,K,M)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.Process=void 0;const D=M(4159),f=M(48089),$=M(37403),O=M(66933),m=M(44123),w=M(93494),y=M(15251),C=M(2101),A=M(15119),E=M(82130),L=M(94904),I=M(94081);K.Process=class F{constructor(Q){var j,V,tt;let it=JSON.parse(Q);$.CONST.RENDER_SCALE=it.RENDER_SCALE,$.CONST.LINE_SMALL_HEIGHT=it.LINE_SMALL_HEIGHT*$.CONST.RENDER_SCALE,$.CONST.SPLIT_MARGIN=it.SPLIT_MARGIN*$.CONST.RENDER_SCALE,$.CONST.INTERSEC_MARGIN=it.INTERSEC_MARGIN*$.CONST.RENDER_SCALE,$.CONST.LINE_MAGIN=it.LINE_MAGIN*$.CONST.RENDER_SCALE,$.CONST.MARGIN_LEFT=it.MARGIN_LEFT*$.CONST.RENDER_SCALE,$.CONST.ENABLE_IMAGE_PROCESS=it.ENABLE_IMAGE_PROCESS,$.CONST.STEP_SIZE=it.STEP_SIZE,$.CONST.CROP_FULL_WIDTH=it.CROP_FULL_WIDTH,$.CONST.OVERLAP=it.OVERLAP,$.CONST.QUESTION_PATTERN=it.QUESTION_PATTERN,$.CONST.QUESTION_PATTERN2=it.QUESTION_PATTERN2,$.CONST.BREAK_LINE_PATTERN=it.BREAK_LINE_PATTERN,$.CONST.SECTION_PATTERN_LOWER=it.SECTION_PATTERN_LOWER,$.CONST.SECTION_PATTERN_NORMAL=it.SECTION_PATTERN_NORMAL,$.CONST.KICK_PATTERN=it.KICK_PATTERN,$.CONST.TVCN_CHAR=it.TVCN_CHAR,$.CONST.HET_PATTERN=it.HET_PATTERN,$.CONST.DAPAN_PATTERN=it.DAPAN_PATTERN,$.CONST.HUONGDAN_PATTERN=it.HUONGDAN_PATTERN,$.CONST.MULTIPLE_ANS_PATTERN=it.MULTIPLE_ANS_PATTERN,$.CONST.DRAW_RESULT=it.DRAW_RESULT,$.CONST.SKIP_CHAR=it.SKIP_CHAR,$.CONST.FOOTER_PATTERN=null!==(j=it.FOOTER_PATTERN)&&void 0!==j?j:["(trang\\s*\\d+)","(Page\\s*\\d+)","(Trang\\s*\\d+)","(TRANG\\s*\\d+)","(^\\d{1,4}$)"],$.CONST.HELP_ANS_PATTERN=null!==(V=it.HELP_ANS_PATTERN)&&void 0!==V?V:["([\\s\\.]*Ch\u1ecdn\\s*([ABCDEFGH]))"],$.CONST.ANS_PATTERN=null!==(tt=it.ANS_PATTERN)&&void 0!==tt?tt:["([\\s\\|\\.]+[ABCDEFGHIJK][\\s\\|]*[\\.\\)])"]}setUpdateStatusCallback(Q){this.updateStatusCallback=Q}setOncompleteCallback(Q){this.onCompleteCallback=Q}parsePdf(Q){let j=new A.PdfRender;j.loadPdf(Q,V=>{const tt=V.length;let it=[],dt=[],mt=document.createElement("div");mt.id="hiddenWrapper",mt.style.width="1px",mt.style.height="1px",mt.style.overflow="hidden",mt.style.opacity="0",mt.style.zIndex="-9999",mt.style.position="fixed",mt.style.top="0",mt.style.left="0",document.body.appendChild(mt);let ft=document.createElement("div"),yt="canvasWrapper";ft.id=yt,mt.appendChild(ft);const St=(new Date).getTime();let $t=[];j.render(V,yt,$.CONST.RENDER_SCALE,(he,xe,tn)=>{if(null!=he&&(it[xe]=he,dt[xe]=tn),$t.push(1),this.updateStatusCallback&&this.updateStatusCallback(`Rendering: ${$t.length}/${tt}`),$t.length==tt){const Ce=(new Date).getTime();this.updateStatusCallback&&this.updateStatusCallback("Render done: "+(Ce-St)/1e3+" secs"),this.startAnalyze(it,dt,V)}})})}showHidden(){let Q=document.getElementById("hiddenWrapper");Q&&(Q.style.opacity="1",Q.style.width="",Q.style.height="",Q.style.overflow="",Q.style.position="")}imgToTextObj(Q,j){return{str:"img",fontName:j,width:Q.paintWidth,height:Q.paintHeight,transform:[-999,0,0,0,-Q.left,-Q.top-Q.paintHeight]}}startAnalyze(Q,j,V){const tt=V.length;let it=[],dt=[],mt=[],ft=[],yt=new A.PdfRender;const St=(new Date).getTime();for(let $t=0;$t<tt;$t++){const he=$t;let xe=yt.getImages(V[$t],he);for(const tn of xe)ft.push(tn);V[$t].getTextContent().then(tn=>{var Ce;for(const _e of xe)tn.items.push(this.imgToTextObj(_e,tn.items.length>0?tn.items[0].fontName:""));var We=yt.getLines(tn,he,Q[he],j[he]);if(dt=dt.concat(We),mt[he]=tn.styles,it.push(1),it.length==tt){dt.sort((bn,ri)=>1e7*bn.pageIndex+(bn.transform.length>0?bn.transform[5]:0)-(1e7*ri.pageIndex+(ri.transform.length>0?ri.transform[5]:0))),yt.findAndSplitQuestAnsLine(dt,mt,Q),""!=$.CONST.DRAW_RESULT&&console.log(dt);let _e=this.findEntityPos(dt,mt,Q,yt.imageCache,0);console.log("lstPos",_e);let mn=!1;for(const bn of _e)if(bn.type==E.QuestionParser.TYPE_NAME){mn=!0;break}if(mn||(_e=this.findEntityPos(dt,mt,Q,yt.imageCache,1)),0==_e.length)return void(this.onCompleteCallback&&this.onCompleteCallback([],Q));let ye=_e[0].type==O.DapAnChiTietParser.TYPE_NAME,fe=ye?JSON.parse(_e[0].str):null,Ue=new Map,Ye=new Map;if(ye){for(const bn of fe.main)Ue.set(bn.num,bn.str);for(const bn of fe.sub)Ye.set(bn.num,bn.str)}let Yn=this.getQuestionInfo(_e,dt,Q,Ue);Yn.forEach(bn=>{if(!Ue.has(bn.num)&&!Ye.has(bn.num)&&bn.help&&bn.help.text){let ri=m.DapAnParser.getAnsFromHelp(bn.help.text);""!=ri&&Ye.set(bn.num,ri)}});for(const bn of Yn){if(!bn.isGroup&&0==bn.answers.length&&Ue.has(bn.num)){let ri={pageIndex:bn.remove.pageIndex,top:bn.remove.top-1,left:bn.remove.left-1,width:1,heigh:1};for(const qi of["A","B","C","D"]){let to={label:qi,remove:ri,positions:[ri]};Ue.get(bn.num)==qi&&(to.isCorrect=!0),bn.answers.push(to)}bn.isFixAns=!0}if(!bn.isGroup&&0==bn.answers.length&&!Ue.has(bn.num)&&Ye.has(bn.num)&&(bn.strAns=Ye.get(bn.num)),!bn.isGroup&&bn.answers.length>0&&!Ue.has(bn.num)&&Ye.has(bn.num))for(const ri of bn.answers)ri.label==(null===(Ce=Ye.get(bn.num))||void 0===Ce?void 0:Ce.toUpperCase().substring(0,1))&&(ri.isCorrect=!0)}const Si=(new Date).getTime();this.updateStatusCallback&&this.updateStatusCallback("Analyze done: "+(Si-St)/1e3+" secs"),this.showOnCanvas(Yn,_e,dt,Q,ft,$.CONST.DRAW_RESULT),this.onCompleteCallback&&this.onCompleteCallback(Yn,Q)}})}}findEntityPos(Q,j,V,tt,it){let dt=[],yt=!1;var $t=[{parser:new L.SectionParser,on:[],off:[]},{parser:new E.QuestionParser(it),on:[3,4],off:[6]},{parser:new D.AnswerParser,on:[3,6],off:[]},{parser:new y.HetParser(!1),on:[6,8],off:[0,2]},{parser:new m.DapAnParser(!1),on:[6,8],off:[0,2,4]},{parser:new C.HuongDanParser,on:[],off:[8]},{parser:new O.DapAnChiTietParser(!1,_e=>{for(const mn of _e)dt.unshift(mn)}),on:[],off:[2]},{parser:new w.FooterParser,on:[],off:[]},{parser:new I.DapAnDienTuParser(!1,_e=>{if(0!=_e.length)if(dt.length>0&&dt[0].type==O.DapAnChiTietParser.TYPE_NAME){let mn=JSON.parse(_e[0].str),ye=JSON.parse(dt[0].str);ye.sub=mn.sub,dt[0].str=JSON.stringify(ye)}else _e[0].type=O.DapAnChiTietParser.TYPE_NAME,dt.unshift(_e[0])}),on:[],off:[2]}],he=[8,0,1,2,3,4,5,6,7],xe=null;let tn=0,Ce="";for(const _e of Q){(tn==Q.length-1||_e.pageIndex<Q[tn+1].pageIndex)&&(_e.isLastLine=!0);for(const mn of he){let ye=$t[mn];var We=ye.parser.process(dt,_e,tn,xe,j[_e.pageIndex],V[_e.pageIndex]);if(We.length>0){for(const fe of We){if(fe.type!=D.AnswerParser.TYPE_NAME&&fe.type!=w.FooterParser.TYPE_NAME&&(Ce=""),fe.type==D.AnswerParser.TYPE_NAME){if(!"ABCDEFGH".startsWith(Ce+fe.str))continue;Ce+=fe.str;for(let Ue=dt.length-1;Ue>=0&&dt[Ue].type==L.SectionParser.TYPE_NAME;Ue--)dt.splice(Ue,1)}fe.type==w.FooterParser.TYPE_NAME&&(_e.isFooter=!0),fe.type==m.DapAnParser.TYPE_NAME&&(yt=!0),fe.type==C.HuongDanParser.TYPE_NAME&&yt&&$t[5].parser.off(),dt.push(fe)}for(const fe of ye.on)$t[fe].parser.on();for(const fe of ye.off)$t[fe].parser.off();break}}xe=_e,tn++}for(const _e of $t)_e.parser.off();return dt.forEach(_e=>{if(!Q[_e.lineIndex].top){let ye=f.CanvasUtil.getTopLine(tt[_e.pageIndex],_e.lineIndex,Q);Q[_e.lineIndex].top=ye[0],1!=_e.isIntersec&&(_e.isIntersec=ye[1])}}),dt.forEach(_e=>{if(!Q[_e.lineIndex].bottom){let ye=f.CanvasUtil.getBottomLine(tt[_e.pageIndex],_e.lineIndex,Q);Q[_e.lineIndex].bottom=ye[0],1!=_e.isIntersec&&(_e.isIntersec=ye[0])}}),dt}showOnCanvas(Q,j,V,tt,it,dt){const mt=(new Date).getTime(),ft=new Map([["A","rgba(18, 0, 255, 0.4)"],["B","rgba(0, 158, 34, 0.4)"],["C","rgba(50, 50, 50, 0.4)"],["D","rgba(132, 0, 137, 0.4)"],["E","rgba(132, 0, 137, 0.4)"],["F","rgba(132, 0, 137, 0.4)"],["G","rgba(132, 0, 137, 0.4)"],["H","rgba(132, 0, 137, 0.4)"]]),yt=new Map([[E.QuestionParser.TYPE_NAME,"red"],[D.AnswerParser.TYPE_NAME,"blue"],[y.HetParser.TYPE_NAME,"gray"],[O.DapAnChiTietParser.TYPE_NAME,"green"],[m.DapAnParser.TYPE_NAME,"orange"],[C.HuongDanParser.TYPE_NAME,"pink"],[w.FooterParser.TYPE_NAME,"yellow"],[L.SectionParser.TYPE_NAME,"black"]]);if(dt.indexOf("quest")>=0)for(const $t of Q){for(const he of $t.positions)f.CanvasUtil.drawBox(tt[he.pageIndex],$t.isGroup?"black":"red",he);f.CanvasUtil.drawBox(tt[$t.remove.pageIndex],"yellow",$t.remove);for(const he of $t.answers){for(const xe of he.positions)f.CanvasUtil.drawBox(tt[xe.pageIndex],ft.get(he.label)+"",xe,!0);f.CanvasUtil.drawBox(tt[he.remove.pageIndex],"yellow",he.remove),he.isCorrect&&f.CanvasUtil.drawPoint(tt[he.positions[0].pageIndex],"green",he.positions[0])}if($t.help){for(const he of $t.help.positions)f.CanvasUtil.drawBox(tt[he.pageIndex],"orange",he);$t.help.remove&&f.CanvasUtil.drawBox(tt[$t.help.remove.pageIndex],"yellow",$t.help.remove)}}if(dt.indexOf("line")>=0)for(const $t of V)f.CanvasUtil.drawBox2(tt[$t.pageIndex],$t.height<$.CONST.LINE_SMALL_HEIGHT?"red":"rgba(50, 58, 168, 0.4)",$t.width,$t.height,$t.transform);if(dt.indexOf("txt")>=0)for(const $t of V)for(const he of $t.textObjs)""!=he.str.trim()&&f.CanvasUtil.drawBox2(tt[$t.pageIndex],$t.height<$.CONST.LINE_SMALL_HEIGHT?"red":"rgba(132, 0, 137, 0.2)",he.width,he.height,he.transform);if(dt.indexOf("img")>=0)for(const $t of it)f.CanvasUtil.drawBox2(tt[$t.pageIndex],"green",$t.paintWidth,$t.paintHeight,[0,0,0,0,-$t.left,-$t.top-$t.paintHeight]);if(dt.indexOf("pos")>=0)for(const $t of j){let he={top:$t.transform[5],left:$t.transform[4],width:0,heigh:0,pageIndex:$t.pageIndex};f.CanvasUtil.drawPoint(tt[$t.pageIndex],yt.get($t.type)+"",he)}const St=(new Date).getTime();this.updateStatusCallback&&this.updateStatusCallback("Draw done: "+(St-mt)/1e3+" secs")}getQuestionInfo(Q,j,V,tt){if(0==Q.length)return[];let it=0,dt=[],mt=new Map,ft="",yt=!1,St=!1,$t=0;Q.forEach((he,xe)=>{xe>0&&null==Q[xe-1].text&&(Q[xe-1].text=j.slice(Q[xe-1].lineIndex,he.lineIndex)),xe==Q.length-1&&(Q[xe].text=j.slice(Q[xe].lineIndex,j.length))}),Q.forEach(he=>{let xe=":"+he.type;!yt&&(he.type==y.HetParser.TYPE_NAME||he.type==m.DapAnParser.TYPE_NAME)&&(yt=!0);let tn=null;for(let We=it+1;We<Q.length;We++)if((he.type!=E.QuestionParser.TYPE_NAME||Q[We].type!=D.AnswerParser.TYPE_NAME)&&Q[We].type!=w.FooterParser.TYPE_NAME){tn=Q[We];break}let Ce=V[he.pageIndex].canvas.height-20;if(!yt&&he.type==L.SectionParser.TYPE_NAME&&($t++,dt.push({num:$t,answers:[],remove:L.SectionParser.getRemoveBox(he,j),positions:L.SectionParser.getBoxes(he,j,tn,Ce),isGroup:!0,text:he.text})),!yt&&he.type==E.QuestionParser.TYPE_NAME&&dt.push({num:+he.str,answers:[],remove:E.QuestionParser.getRemoveBox(he,j),positions:E.QuestionParser.getBoxes(he,j,tn,Ce),group:$t,text:he.text}),!yt&&he.type==D.AnswerParser.TYPE_NAME&&dt.length>0){let We=dt[dt.length-1].num,_e={label:he.str,remove:D.AnswerParser.getRemoveBox(he,j),positions:D.AnswerParser.getBoxes(he,j,tn,Ce)};tt.size>0&&tt.get(We)==_e.label&&(_e.isCorrect=!0),dt[dt.length-1].answers.push(_e);let mn=j[he.lineIndex].strLine.replace(/\|/g,"").trim().match($.CONST.MULTIPLE_ANS_PATTERN.join("|"));null!=mn&&mn.length>0&&(dt[dt.length-1].isFixAns=!0),1==he.isIntersec&&(dt[dt.length-1].isFixAns=!0)}if(!St&&he.type==C.HuongDanParser.TYPE_NAME&&1==dt.length&&ft.endsWith(`:${E.QuestionParser.TYPE_NAME}:${D.AnswerParser.TYPE_NAME}`)&&(St=!0),he.type==C.HuongDanParser.TYPE_NAME&&St){let We=dt[dt.length-1].num;mt.set(We,{num:We,positions:C.HuongDanParser.getBoxes(he,j,tn,Ce),text:he.text})}if(he.type==C.HuongDanParser.TYPE_NAME&&!St&&(mt.clear(),yt=!0),yt&&he.type==E.QuestionParser.TYPE_NAME){let We=+he.str;mt.get(We)||mt.set(We,{num:We,positions:E.QuestionParser.getBoxes(he,j,tn,Ce),remove:E.QuestionParser.getRemoveBox(he,j),text:he.text})}!ft.endsWith(xe)&&he.type!=w.FooterParser.TYPE_NAME&&(ft+=xe),it++});for(const he of dt)he.isGroup||(he.help=mt.get(he.num),1==he.answers.length&&(he.answers=[]));return dt}}},82130:(Zt,K,M)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.QuestionParser=void 0;const D=M(48089),f=M(37403),$=M(15025);class O extends $.Parser{constructor(w){super(),this.TYPE=O.TYPE_NAME,this.questType=w}parse(w,y,C,A,E,L){var I=this.matchPos(y.strLine);if(I.value){let F=null;for(let tt=I.value.length-1;tt>=0;tt--)if(I.value[tt]){F=I.value[tt];break}if(null==F)return[];let Q=F.matchAll(/\d+/g).next(),j=F.length;!Q.done&&!F.trim().endsWith(".")&&!F.trim().endsWith(":")&&(j=Q.value.index+Q.value[0].length);let V=y.strLine.replace(/\|/g,"").toLowerCase().indexOf(F)+j-1;return[{str:this.getNumberFromStr(F),pageIndex:y.pageIndex,lineIndex:C,transform:y.transform,startLeft:D.CanvasUtil.calIndexPos2(y.textObjs,E,L,V,!0),type:this.TYPE}]}return[]}matchPos(w){let y=w.replace(/\|/g,"").toLowerCase().trim();if(0==this.questType){let C=f.CONST.QUESTION_PATTERN.join("|");return y.matchAll(C).next()}{let C=f.CONST.QUESTION_PATTERN2.join("|");return y.matchAll(C).next()}}getNumberFromStr(w){var y=w.match(/(\d+)/);return y?y[0]:""}static getRemoveBox(w,y){let C=w.startLeft?w.startLeft[5]:y[w.lineIndex].top,A=w.transform[4]-f.CONST.MARGIN_LEFT,E=w.startLeft?w.startLeft[5]+w.startLeft[3]:y[w.lineIndex].bottom;return{pageIndex:w.pageIndex,top:C||20,left:A,heigh:E&&C?E-C:0,width:(w.startLeft?w.startLeft[4]:0)-A}}static getBoxes(w,y,C,A){let E=A;for(let dt=w.lineIndex;dt<y.length;dt++)if(D.CanvasUtil.isLastLineOfPage(dt,y)){let mt=y[dt].isFooter?y[dt-1]:y[dt];E=mt.transform[5]+mt.height+20;break}let L=[],I=w.pageIndex,F=C?C.lineIndex:y.length-1,N=y[w.lineIndex].transform[4]-f.CONST.MARGIN_LEFT,Q=y[w.lineIndex].top;if(!Q)return[];let j=f.CONST.CROP_FULL_WIDTH?D.CanvasUtil.getMaxLineRight(-1,y)+2*f.CONST.MARGIN_LEFT:y[w.lineIndex].transform[4]+y[w.lineIndex].width+2*f.CONST.MARGIN_LEFT,V=E,tt=I,it=w.lineIndex+1;for(;it<=F;it++){let dt=y[it].top;if(it==y.length-1&&!C&&(dt=y[it].bottom),!f.CONST.CROP_FULL_WIDTH){let ft=y[it-1].transform[4]+y[it-1].width+2*f.CONST.MARGIN_LEFT;ft>j&&(j=ft)}let mt=y[it-1].transform[4]-f.CONST.MARGIN_LEFT;mt<N&&(N=mt),y[it].isFooter&&dt?V=dt:(y[it].pageIndex>tt&&(y[it-1].isFooter||(V=E),L.push({pageIndex:tt,top:Q,left:N,width:j-N,heigh:V-Q}),Q=20,N=D.CanvasUtil.getMinLineLeft(y[it].pageIndex,y)-f.CONST.MARGIN_LEFT),tt=y[it].pageIndex,dt&&(V=dt))}if(it-=1,!C&&D.CanvasUtil.isLastLineOfPage(it,y)){let dt=y[it].isFooter?y[it-1]:y[it];V=dt.transform[5]+dt.height+20}return D.CanvasUtil.isFirstLineOfPage(it,y)||L.push({pageIndex:tt,top:Q,left:N,width:j-N,heigh:V-Q}),L}}K.QuestionParser=O,O.TYPE_NAME="question"},94904:(Zt,K,M)=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0}),K.SectionParser=void 0;const D=M(48089),f=M(37403),$=M(15025),O=M(82130);class m extends $.Parser{constructor(){super(),this.TYPE=m.TYPE_NAME}parse(y,C,A,E,L,I){let F=C.strLine.replace(/\|/g,"").toLowerCase().trim().match(f.CONST.SECTION_PATTERN_LOWER.join("|")),N=null!=F&&F.length>0;if(N||(F=C.strLine.replace(/\|/g,"").trim().match(f.CONST.SECTION_PATTERN_NORMAL.join("|")),N=null!=F&&F.length>0),N&&F){let Q=C.strLine.indexOf(F[0])+F[0].length+1,j=[F[0][0]];for(let V=y.length-1;V>=0;V--){if(y[V].type==O.QuestionParser.TYPE_NAME){j.push(".Q");break}j.push(y[V].str[0])}return"HGFEDCBA.Q".endsWith(j.join(""))?[]:[{str:F[0],pageIndex:C.pageIndex,lineIndex:A,transform:C.transform,startLeft:D.CanvasUtil.calIndexPos(C.textObjs,L,I,Q,!0),type:this.TYPE}]}return[]}static getRemoveBox(y,C){let A=C[y.lineIndex].top,E=y.transform[4]-f.CONST.MARGIN_LEFT,L=C[y.lineIndex].bottom;return{pageIndex:y.pageIndex,top:A||20,left:E,heigh:L&&A?L-A:0,width:E-E}}static getBoxes(y,C,A,E){const L=E;let I=[],F=y.pageIndex,N=A?A.lineIndex:C.length-1,Q=D.CanvasUtil.getMinLineLeft(-1,C)-f.CONST.MARGIN_LEFT,j=C[y.lineIndex].top;if(!j)return[];let V=D.CanvasUtil.getMaxLineRight(-1,C)+2*f.CONST.MARGIN_LEFT,tt=L,it=F,dt=y.lineIndex+1;for(;dt<=N;dt++){let mt=C[dt].top;if(C[dt].isFooter&&mt)tt=mt;else if(C[dt].pageIndex>it&&(I.push({pageIndex:it,top:j,left:Q,width:V-Q,heigh:tt-j}),j=20),it=C[dt].pageIndex,mt){tt=mt;break}}return dt>=C.length&&(dt=C.length-1),D.CanvasUtil.isFirstLineOfPage(dt,C)||I.push({pageIndex:it,top:j,left:Q,width:V-Q,heigh:tt-j}),I}}K.SectionParser=m,m.TYPE_NAME="section"},62180:function(Zt,K,M){"use strict";var D=this&&this.__createBinding||(Object.create?function($,O,m,w){void 0===w&&(w=m),Object.defineProperty($,w,{enumerable:!0,get:function(){return O[m]}})}:function($,O,m,w){void 0===w&&(w=m),$[w]=O[m]}),f=this&&this.__exportStar||function($,O){for(var m in $)"default"!==m&&!Object.prototype.hasOwnProperty.call(O,m)&&D(O,$,m)};Object.defineProperty(K,"__esModule",{value:!0}),f(M(52280),K)},47e3:(Zt,K,M)=>{"use strict";Zt.exports=M(45260)},26319:Zt=>{"use strict";var K=2*Math.PI;function M($,O,m,w){var C=$*m+O*w;return C>1&&(C=1),C<-1&&(C=-1),($*w-O*m<0?-1:1)*Math.acos(C)}function f($,O){var m=1.3333333333333333*Math.tan(O/4),w=Math.cos($),y=Math.sin($),C=Math.cos($+O),A=Math.sin($+O);return[w,y,w-y*m,y+w*m,C+A*m,A-C*m,C,A]}Zt.exports=function(O,m,w,y,C,A,E,L,I){var F=Math.sin(I*K/360),N=Math.cos(I*K/360),Q=N*(O-w)/2+F*(m-y)/2,j=-F*(O-w)/2+N*(m-y)/2;if(0===Q&&0===j)return[];if(0===E||0===L)return[];E=Math.abs(E),L=Math.abs(L);var V=Q*Q/(E*E)+j*j/(L*L);V>1&&(E*=Math.sqrt(V),L*=Math.sqrt(V));var tt=function D($,O,m,w,y,C,A,E,L,I){var F=I*($-m)/2+L*(O-w)/2,N=-L*($-m)/2+I*(O-w)/2,Q=A*A,j=E*E,V=F*F,tt=N*N,it=Q*j-Q*tt-j*V;it<0&&(it=0),it/=Q*tt+j*V;var dt=(it=Math.sqrt(it)*(y===C?-1:1))*A/E*N,mt=it*-E/A*F,ft=I*dt-L*mt+($+m)/2,yt=L*dt+I*mt+(O+w)/2,St=(F-dt)/A,$t=(N-mt)/E,he=(-F-dt)/A,xe=(-N-mt)/E,tn=M(1,0,St,$t),Ce=M(St,$t,he,xe);return 0===C&&Ce>0&&(Ce-=K),1===C&&Ce<0&&(Ce+=K),[ft,yt,tn,Ce]}(O,m,w,y,C,A,E,L,F,N),it=[],dt=tt[2],mt=tt[3],ft=Math.max(Math.ceil(Math.abs(mt)/(K/4)),1);mt/=ft;for(var yt=0;yt<ft;yt++)it.push(f(dt,mt)),dt+=mt;return it.map(function(St){for(var $t=0;$t<St.length;$t+=2){var he=St[$t+0],xe=St[$t+1],Ce=F*(he*=E)+N*(xe*=L);St[$t+0]=N*he-F*xe+tt[0],St[$t+1]=Ce+tt[1]}return St})}},61175:Zt=>{"use strict";var K=1e-10,M=Math.PI/180;function D(f,$,O){if(!(this instanceof D))return new D(f,$,O);this.rx=f,this.ry=$,this.ax=O}D.prototype.transform=function(f){var $=Math.cos(this.ax*M),O=Math.sin(this.ax*M),m=[this.rx*(f[0]*$+f[2]*O),this.rx*(f[1]*$+f[3]*O),this.ry*(-f[0]*O+f[2]*$),this.ry*(-f[1]*O+f[3]*$)],w=m[0]*m[0]+m[2]*m[2],y=m[1]*m[1]+m[3]*m[3],C=((m[0]-m[3])*(m[0]-m[3])+(m[2]+m[1])*(m[2]+m[1]))*((m[0]+m[3])*(m[0]+m[3])+(m[2]-m[1])*(m[2]-m[1])),A=(w+y)/2;if(C<K*A)return this.rx=this.ry=Math.sqrt(A),this.ax=0,this;var E=m[0]*m[1]+m[2]*m[3],L=A+(C=Math.sqrt(C))/2,I=A-C/2;return this.ax=Math.abs(E)<K&&Math.abs(L-y)<K?90:180*Math.atan(Math.abs(E)>Math.abs(L-y)?(L-w)/E:E/(L-y))/Math.PI,this.ax>=0?(this.rx=Math.sqrt(L),this.ry=Math.sqrt(I)):(this.ax+=90,this.rx=Math.sqrt(I),this.ry=Math.sqrt(L)),this},D.prototype.isDegenerate=function(){return this.rx<K*this.ry||this.ry<K*this.rx},Zt.exports=D},16998:Zt=>{"use strict";function K(D,f){return[D[0]*f[0]+D[2]*f[1],D[1]*f[0]+D[3]*f[1],D[0]*f[2]+D[2]*f[3],D[1]*f[2]+D[3]*f[3],D[0]*f[4]+D[2]*f[5]+D[4],D[1]*f[4]+D[3]*f[5]+D[5]]}function M(){if(!(this instanceof M))return new M;this.queue=[],this.cache=null}M.prototype.matrix=function(D){return 1===D[0]&&0===D[1]&&0===D[2]&&1===D[3]&&0===D[4]&&0===D[5]||(this.cache=null,this.queue.push(D)),this},M.prototype.translate=function(D,f){return(0!==D||0!==f)&&(this.cache=null,this.queue.push([1,0,0,1,D,f])),this},M.prototype.scale=function(D,f){return(1!==D||1!==f)&&(this.cache=null,this.queue.push([D,0,0,f,0,0])),this},M.prototype.rotate=function(D,f,$){var O,m,w;return 0!==D&&(this.translate(f,$),O=D*Math.PI/180,m=Math.cos(O),w=Math.sin(O),this.queue.push([m,w,-w,m,0,0]),this.cache=null,this.translate(-f,-$)),this},M.prototype.skewX=function(D){return 0!==D&&(this.cache=null,this.queue.push([1,0,Math.tan(D*Math.PI/180),1,0,0])),this},M.prototype.skewY=function(D){return 0!==D&&(this.cache=null,this.queue.push([1,Math.tan(D*Math.PI/180),0,1,0,0])),this},M.prototype.toArray=function(){if(this.cache)return this.cache;if(!this.queue.length)return this.cache=[1,0,0,1,0,0],this.cache;if(this.cache=this.queue[0],1===this.queue.length)return this.cache;for(var D=1;D<this.queue.length;D++)this.cache=K(this.cache,this.queue[D]);return this.cache},M.prototype.calc=function(D,f,$){var O;return this.queue.length?(this.cache||(this.cache=this.toArray()),[D*(O=this.cache)[0]+f*O[2]+($?0:O[4]),D*O[1]+f*O[3]+($?0:O[5])]):[D,f]},Zt.exports=M},18148:Zt=>{"use strict";var K={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},M=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];function D(I){return 10===I||13===I||8232===I||8233===I||32===I||9===I||11===I||12===I||160===I||I>=5760&&M.indexOf(I)>=0}function O(I){return I>=48&&I<=57}function m(I){return I>=48&&I<=57||43===I||45===I||46===I}function w(I){this.index=0,this.path=I,this.max=I.length,this.result=[],this.param=0,this.err="",this.segmentStart=0,this.data=[]}function y(I){for(;I.index<I.max&&D(I.path.charCodeAt(I.index));)I.index++}function C(I){var F=I.path.charCodeAt(I.index);return 48===F?(I.param=0,void I.index++):49===F?(I.param=1,void I.index++):void(I.err="SvgPath: arc flag can be 0 or 1 only (at pos "+I.index+")")}function A(I){var dt,F=I.index,N=F,Q=I.max,j=!1,V=!1,tt=!1,it=!1;if(N>=Q)I.err="SvgPath: missed param (at pos "+N+")";else if((43===(dt=I.path.charCodeAt(N))||45===dt)&&(dt=++N<Q?I.path.charCodeAt(N):0),O(dt)||46===dt){if(46!==dt){if(j=48===dt,dt=++N<Q?I.path.charCodeAt(N):0,j&&N<Q&&dt&&O(dt))return void(I.err="SvgPath: numbers started with `0` such as `09` are illegal (at pos "+F+")");for(;N<Q&&O(I.path.charCodeAt(N));)N++,V=!0;dt=N<Q?I.path.charCodeAt(N):0}if(46===dt){for(it=!0,N++;O(I.path.charCodeAt(N));)N++,tt=!0;dt=N<Q?I.path.charCodeAt(N):0}if(101===dt||69===dt){if(it&&!V&&!tt)return void(I.err="SvgPath: invalid float exponent (at pos "+N+")");if((43===(dt=++N<Q?I.path.charCodeAt(N):0)||45===dt)&&N++,!(N<Q&&O(I.path.charCodeAt(N))))return void(I.err="SvgPath: invalid float exponent (at pos "+N+")");for(;N<Q&&O(I.path.charCodeAt(N));)N++}I.index=N,I.param=parseFloat(I.path.slice(F,N))+0}else I.err="SvgPath: param should start with 0..9 or `.` (at pos "+N+")"}function E(I){var F,N;N=(F=I.path[I.segmentStart]).toLowerCase();var Q=I.data;if("m"===N&&Q.length>2&&(I.result.push([F,Q[0],Q[1]]),Q=Q.slice(2),N="l",F="m"===F?"l":"L"),"r"===N)I.result.push([F].concat(Q));else for(;Q.length>=K[N]&&(I.result.push([F].concat(Q.splice(0,K[N]))),K[N]););}function L(I){var N,Q,j,V,tt,F=I.max;if(I.segmentStart=I.index,Q=function $(I){return 97==(32|I)}(N=I.path.charCodeAt(I.index)),function f(I){switch(32|I){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:case 114:return!0}return!1}(N))if(V=K[I.path[I.index].toLowerCase()],I.index++,y(I),I.data=[],V){for(j=!1;;){for(tt=V;tt>0;tt--){if(!Q||3!==tt&&4!==tt?A(I):C(I),I.err.length)return void E(I);I.data.push(I.param),y(I),j=!1,I.index<F&&44===I.path.charCodeAt(I.index)&&(I.index++,y(I),j=!0)}if(!j&&(I.index>=I.max||!m(I.path.charCodeAt(I.index))))break}E(I)}else E(I);else I.err="SvgPath: bad command "+I.path[I.index]+" (at pos "+I.index+")"}Zt.exports=function(F){var N=new w(F),Q=N.max;for(y(N);N.index<Q&&!N.err.length;)L(N);return N.result.length&&("mM".indexOf(N.result[0][0])<0?(N.err="SvgPath: string should start with `M` or `m`",N.result=[]):N.result[0][0]="M"),{err:N.err,segments:N.result}}},45260:(Zt,K,M)=>{"use strict";var D=M(18148),f=M(48873),$=M(16998),O=M(26319),m=M(61175);function w(y){if(!(this instanceof w))return new w(y);var C=D(y);this.segments=C.segments,this.err=C.err,this.__stack=[]}w.from=function(y){if("string"==typeof y)return new w(y);if(y instanceof w){var C=new w("");return C.err=y.err,C.segments=y.segments.map(function(A){return A.slice()}),C.__stack=y.__stack.map(function(A){return $().matrix(A.toArray())}),C}throw new Error("SvgPath.from: invalid param type "+y)},w.prototype.__matrix=function(y){var A,C=this;y.queue.length&&this.iterate(function(E,L,I,F){var N,Q,j,V;switch(E[0]){case"v":Q=0===(N=y.calc(0,E[1],!0))[0]?["v",N[1]]:["l",N[0],N[1]];break;case"V":Q=(N=y.calc(I,E[1],!1))[0]===y.calc(I,F,!1)[0]?["V",N[1]]:["L",N[0],N[1]];break;case"h":Q=0===(N=y.calc(E[1],0,!0))[1]?["h",N[0]]:["l",N[0],N[1]];break;case"H":Q=(N=y.calc(E[1],F,!1))[1]===y.calc(I,F,!1)[1]?["H",N[0]]:["L",N[0],N[1]];break;case"a":case"A":var tt=y.toArray(),it=m(E[1],E[2],E[3]).transform(tt);if(tt[0]*tt[3]-tt[1]*tt[2]<0&&(E[5]=E[5]?"0":"1"),N=y.calc(E[6],E[7],"a"===E[0]),"A"===E[0]&&E[6]===I&&E[7]===F||"a"===E[0]&&0===E[6]&&0===E[7]){Q=["a"===E[0]?"l":"L",N[0],N[1]];break}Q=it.isDegenerate()?["a"===E[0]?"l":"L",N[0],N[1]]:[E[0],it.rx,it.ry,it.ax,E[4],E[5],N[0],N[1]];break;case"m":Q=["m",(N=y.calc(E[1],E[2],V=L>0))[0],N[1]];break;default:for(Q=[j=E[0]],V=j.toLowerCase()===j,A=1;A<E.length;A+=2)N=y.calc(E[A],E[A+1],V),Q.push(N[0],N[1])}C.segments[L]=Q},!0)},w.prototype.__evaluateStack=function(){var y,C;if(this.__stack.length){if(1===this.__stack.length)return this.__matrix(this.__stack[0]),void(this.__stack=[]);for(y=$(),C=this.__stack.length;--C>=0;)y.matrix(this.__stack[C].toArray());this.__matrix(y),this.__stack=[]}},w.prototype.toString=function(){var y="",C="",A=!1;this.__evaluateStack();for(var E=0,L=this.segments.length;E<L;E++){var I=this.segments[E],F=I[0];F!==C||"m"===F||"M"===F?("m"===F&&"z"===C&&(y+=" "),y+=F,A=!1):A=!0;for(var N=1;N<I.length;N++){var Q=I[N];1===N?A&&Q>=0&&(y+=" "):Q>=0&&(y+=" "),y+=Q}C=F}return y},w.prototype.translate=function(y,C){return this.__stack.push($().translate(y,C||0)),this},w.prototype.scale=function(y,C){return this.__stack.push($().scale(y,C||0===C?C:y)),this},w.prototype.rotate=function(y,C,A){return this.__stack.push($().rotate(y,C||0,A||0)),this},w.prototype.skewX=function(y){return this.__stack.push($().skewX(y)),this},w.prototype.skewY=function(y){return this.__stack.push($().skewY(y)),this},w.prototype.matrix=function(y){return this.__stack.push($().matrix(y)),this},w.prototype.transform=function(y){return y.trim()?(this.__stack.push(f(y)),this):this},w.prototype.round=function(y){var I,C=0,A=0,E=0,L=0;return y=y||0,this.__evaluateStack(),this.segments.forEach(function(F){var N=F[0].toLowerCase()===F[0];switch(F[0]){case"H":case"h":return N&&(F[1]+=E),E=F[1]-F[1].toFixed(y),void(F[1]=+F[1].toFixed(y));case"V":case"v":return N&&(F[1]+=L),L=F[1]-F[1].toFixed(y),void(F[1]=+F[1].toFixed(y));case"Z":case"z":return E=C,void(L=A);case"M":case"m":return N&&(F[1]+=E,F[2]+=L),E=F[1]-F[1].toFixed(y),L=F[2]-F[2].toFixed(y),C=E,A=L,F[1]=+F[1].toFixed(y),void(F[2]=+F[2].toFixed(y));case"A":case"a":return N&&(F[6]+=E,F[7]+=L),E=F[6]-F[6].toFixed(y),L=F[7]-F[7].toFixed(y),F[1]=+F[1].toFixed(y),F[2]=+F[2].toFixed(y),F[3]=+F[3].toFixed(y+2),F[6]=+F[6].toFixed(y),void(F[7]=+F[7].toFixed(y));default:return I=F.length,N&&(F[I-2]+=E,F[I-1]+=L),E=F[I-2]-F[I-2].toFixed(y),L=F[I-1]-F[I-1].toFixed(y),void F.forEach(function(Q,j){j&&(F[j]=+F[j].toFixed(y))})}}),this},w.prototype.iterate=function(y,C){var j,V,tt,A=this.segments,E={},L=!1,I=0,F=0,N=0,Q=0;if(C||this.__evaluateStack(),A.forEach(function(it,dt){var mt=y(it,dt,I,F);Array.isArray(mt)&&(E[dt]=mt,L=!0);var ft=it[0]===it[0].toLowerCase();switch(it[0]){case"m":case"M":return N=I=it[1]+(ft?I:0),void(Q=F=it[2]+(ft?F:0));case"h":case"H":return void(I=it[1]+(ft?I:0));case"v":case"V":return void(F=it[1]+(ft?F:0));case"z":case"Z":return I=N,void(F=Q);default:I=it[it.length-2]+(ft?I:0),F=it[it.length-1]+(ft?F:0)}}),!L)return this;for(tt=[],j=0;j<A.length;j++)if(typeof E[j]<"u")for(V=0;V<E[j].length;V++)tt.push(E[j][V]);else tt.push(A[j]);return this.segments=tt,this},w.prototype.abs=function(){return this.iterate(function(y,C,A,E){var F,L=y[0],I=L.toUpperCase();if(L!==I)switch(y[0]=I,L){case"v":return void(y[1]+=E);case"a":return y[6]+=A,void(y[7]+=E);default:for(F=1;F<y.length;F++)y[F]+=F%2?A:E}},!0),this},w.prototype.rel=function(){return this.iterate(function(y,C,A,E){var F,L=y[0],I=L.toLowerCase();if(L!==I&&(0!==C||"M"!==L))switch(y[0]=I,L){case"V":return void(y[1]-=E);case"A":return y[6]-=A,void(y[7]-=E);default:for(F=1;F<y.length;F++)y[F]-=F%2?A:E}},!0),this},w.prototype.unarc=function(){return this.iterate(function(y,C,A,E){var L,I,F,N=[],Q=y[0];return"A"!==Q&&"a"!==Q?null:("a"===Q?(I=A+y[6],F=E+y[7]):(I=y[6],F=y[7]),0===(L=O(A,E,I,F,y[4],y[5],y[1],y[2],y[3])).length?[["a"===y[0]?"l":"L",y[6],y[7]]]:(L.forEach(function(j){N.push(["C",j[2],j[3],j[4],j[5],j[6],j[7]])}),N))}),this},w.prototype.unshort=function(){var C,A,E,L,I,y=this.segments;return this.iterate(function(F,N,Q,j){var it,V=F[0],tt=V.toUpperCase();N&&("T"===tt?("Q"===(E=y[N-1])[0]?(C=E[1]-Q,A=E[2]-j):"q"===E[0]?(C=E[1]-E[3],A=E[2]-E[4]):(C=0,A=0),L=-C,I=-A,(it="t"===V)||(L+=Q,I+=j),y[N]=[it?"q":"Q",L,I,F[1],F[2]]):"S"===tt&&("C"===(E=y[N-1])[0]?(C=E[3]-Q,A=E[4]-j):"c"===E[0]?(C=E[3]-E[5],A=E[4]-E[6]):(C=0,A=0),L=-C,I=-A,(it="s"===V)||(L+=Q,I+=j),y[N]=[it?"c":"C",L,I,F[1],F[2],F[3],F[4]]))}),this},Zt.exports=w},48873:(Zt,K,M)=>{"use strict";var D=M(16998),f={matrix:!0,scale:!0,rotate:!0,translate:!0,skewX:!0,skewY:!0},$=/\s*(matrix|translate|scale|rotate|skewX|skewY)\s*\(\s*(.+?)\s*\)[\s,]*/,O=/[\s,]+/;Zt.exports=function(w){var C,A,y=new D;return w.split($).forEach(function(E){if(E.length){if(typeof f[E]<"u")return void(C=E);switch(A=E.split(O).map(function(L){return+L||0}),C){case"matrix":return void(6===A.length&&y.matrix(A));case"scale":return void(1===A.length?y.scale(A[0],A[0]):2===A.length&&y.scale(A[0],A[1]));case"rotate":return void(1===A.length?y.rotate(A[0],0,0):3===A.length&&y.rotate(A[0],A[1],A[2]));case"translate":return void(1===A.length?y.translate(A[0],0):2===A.length&&y.translate(A[0],A[1]));case"skewX":return void(1===A.length&&y.skewX(A[0]));case"skewY":return void(1===A.length&&y.skewY(A[0]))}}}),y}},85129:(Zt,K,M)=>{var D=M(51474).FilterCSS,f=M(51474).getDefaultWhiteList,$=M(98735);var m=new D;function E(ye){return ye.replace(I,"&lt;").replace(F,"&gt;")}var I=/</g,F=/>/g,N=/"/g,Q=/&quot;/g,j=/&#([a-zA-Z0-9]*);?/gim,V=/&colon;?/gim,tt=/&newline;?/gim,it=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,dt=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,mt=/u\s*r\s*l\s*\(.*/gi;function ft(ye){return ye.replace(N,"&quot;")}function yt(ye){return ye.replace(Q,'"')}function St(ye){return ye.replace(j,function(Ue,Ye){return String.fromCharCode("x"===Ye[0]||"X"===Ye[0]?parseInt(Ye.substr(1),16):parseInt(Ye,10))})}function $t(ye){return ye.replace(V,":").replace(tt," ")}function he(ye){for(var fe="",Ue=0,Ye=ye.length;Ue<Ye;Ue++)fe+=ye.charCodeAt(Ue)<32?" ":ye.charAt(Ue);return $.trim(fe)}function xe(ye){return he(ye=$t(ye=St(ye=yt(ye))))}function tn(ye){return E(ye=ft(ye))}K.whiteList={a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]},K.getDefaultWhiteList=function O(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}},K.onTag=function w(ye,fe,Ue){},K.onIgnoreTag=function y(ye,fe,Ue){},K.onTagAttr=function C(ye,fe,Ue){},K.onIgnoreTagAttr=function A(ye,fe,Ue){},K.safeAttrValue=function L(ye,fe,Ue,Ye){if(Ue=xe(Ue),"href"===fe||"src"===fe){if("#"===(Ue=$.trim(Ue)))return"#";if("http://"!==Ue.substr(0,7)&&"https://"!==Ue.substr(0,8)&&"mailto:"!==Ue.substr(0,7)&&"tel:"!==Ue.substr(0,4)&&"data:image/"!==Ue.substr(0,11)&&"ftp://"!==Ue.substr(0,6)&&"./"!==Ue.substr(0,2)&&"../"!==Ue.substr(0,3)&&"#"!==Ue[0]&&"/"!==Ue[0])return""}else if("background"===fe){if(it.lastIndex=0,it.test(Ue))return""}else if("style"===fe){if(dt.lastIndex=0,dt.test(Ue)||(mt.lastIndex=0,mt.test(Ue)&&(it.lastIndex=0,it.test(Ue))))return"";!1!==Ye&&(Ue=(Ye=Ye||m).process(Ue))}return tn(Ue)},K.escapeHtml=E,K.escapeQuote=ft,K.unescapeQuote=yt,K.escapeHtmlEntities=St,K.escapeDangerHtml5Entities=$t,K.clearNonPrintableCharacter=he,K.friendlyAttrValue=xe,K.escapeAttrValue=tn,K.onIgnoreTagStripAll=function Ce(){return""},K.StripTagBody=function We(ye,fe){"function"!=typeof fe&&(fe=function(){});var Ue=!Array.isArray(ye),Yn=[],Si=!1;return{onIgnoreTag:function(bn,ri,qi){if(function Ye(bn){return!!Ue||-1!==$.indexOf(ye,bn)}(bn)){if(qi.isClosing){return Yn.push([!1!==Si?Si:qi.position,qi.position+10]),Si=!1,"[/removed]"}return Si||(Si=qi.position),"[removed]"}return fe(bn,ri,qi)},remove:function(bn){var ri="",qi=0;return $.forEach(Yn,function(to){ri+=bn.slice(qi,to[0]),qi=to[1]}),ri+=bn.slice(qi)}}},K.stripCommentTag=function _e(ye){for(var fe="",Ue=0;Ue<ye.length;){var Ye=ye.indexOf("\x3c!--",Ue);if(-1===Ye){fe+=ye.slice(Ue);break}fe+=ye.slice(Ue,Ye);var Yn=ye.indexOf("--\x3e",Ye);if(-1===Yn)break;Ue=Yn+3}return fe},K.stripBlankChar=function mn(ye){var fe=ye.split("");return(fe=fe.filter(function(Ue){var Ye=Ue.charCodeAt(0);return!(127===Ye||Ye<=31&&10!==Ye&&13!==Ye)})).join("")},K.cssFilter=m,K.getDefaultCSSWhiteList=f},77424:(Zt,K,M)=>{var D=M(85129),f=M(74469),$=M(69278);function O(w,y){return new $(y).process(w)}(K=Zt.exports=O).filterXSS=O,K.FilterXSS=$,function(){for(var w in D)K[w]=D[w];for(var y in f)K[y]=f[y]}(),typeof window<"u"&&(window.filterXSS=Zt.exports),function m(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}()&&(self.filterXSS=Zt.exports)},74469:(Zt,K,M)=>{var D=M(98735);function f(I){var N,F=D.spaceIndex(I);return N=I.slice(1,-1===F?-1:F+1),"/"===(N=D.trim(N).toLowerCase()).slice(0,1)&&(N=N.slice(1)),"/"===N.slice(-1)&&(N=N.slice(0,-1)),N}function $(I){return"</"===I.slice(0,2)}var m=/[^a-zA-Z0-9\\_:.-]/gim;function y(I,F){for(;F<I.length;F++){var N=I[F];if(" "!==N)return"="===N?F:-1}}function C(I,F){for(;F<I.length;F++){var N=I[F];if(" "!==N)return"'"===N||'"'===N?F:-1}}function A(I,F){for(;F>0;F--){var N=I[F];if(" "!==N)return"="===N?F:-1}}function L(I){return function E(I){return'"'===I[0]&&'"'===I[I.length-1]||"'"===I[0]&&"'"===I[I.length-1]}(I)?I.substr(1,I.length-2):I}K.parseTag=function O(I,F,N){"use strict";var Q="",j=0,V=!1,tt=!1,it=0,dt=I.length,mt="",ft="";t:for(it=0;it<dt;it++){var yt=I.charAt(it);if(!1===V){if("<"===yt){V=it;continue}}else if(!1===tt){if("<"===yt){Q+=N(I.slice(j,it)),V=it,j=it;continue}if(">"===yt||it===dt-1){Q+=N(I.slice(j,V)),mt=f(ft=I.slice(V,it+1)),Q+=F(V,Q.length,mt,ft,$(ft)),j=it+1,V=!1;continue}if('"'===yt||"'"===yt)for(var St=1,$t=I.charAt(it-St);""===$t.trim()||"="===$t;){if("="===$t){tt=yt;continue t}$t=I.charAt(it-++St)}}else if(yt===tt){tt=!1;continue}}return j<dt&&(Q+=N(I.substr(j))),Q},K.parseAttr=function w(I,F){"use strict";var N=0,Q=0,j=[],V=!1,tt=I.length;function it(St,$t){if(!((St=(St=D.trim(St)).replace(m,"").toLowerCase()).length<1)){var he=F(St,$t||"");he&&j.push(he)}}for(var dt=0;dt<tt;dt++){var yt,mt=I.charAt(dt);if(!1!==V||"="!==mt)if(!1===V||dt!==Q){if(/\s|\n|\t/.test(mt)){if(I=I.replace(/\s|\n|\t/g," "),!1===V){if(-1===(yt=y(I,dt))){it(D.trim(I.slice(N,dt))),V=!1,N=dt+1;continue}dt=yt-1;continue}if(-1===(yt=A(I,dt-1))){it(V,L(D.trim(I.slice(N,dt)))),V=!1,N=dt+1;continue}}}else{if(-1===(yt=I.indexOf(mt,dt+1)))break;it(V,D.trim(I.slice(Q+1,yt))),V=!1,N=(dt=yt)+1}else V=I.slice(N,dt),Q='"'===I.charAt(N=dt+1)||"'"===I.charAt(N)?N:C(I,dt+1)}return N<I.length&&(!1===V?it(I.slice(N)):it(V,L(D.trim(I.slice(N))))),D.trim(j.join(" "))}},98735:Zt=>{Zt.exports={indexOf:function(K,M){var D,f;if(Array.prototype.indexOf)return K.indexOf(M);for(D=0,f=K.length;D<f;D++)if(K[D]===M)return D;return-1},forEach:function(K,M,D){var f,$;if(Array.prototype.forEach)return K.forEach(M,D);for(f=0,$=K.length;f<$;f++)M.call(D,K[f],f,K)},trim:function(K){return String.prototype.trim?K.trim():K.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(K){var D=/\s|\n|\t/.exec(K);return D?D.index:-1}}},69278:(Zt,K,M)=>{var D=M(51474).FilterCSS,f=M(85129),$=M(74469),O=$.parseTag,m=$.parseAttr,w=M(98735);function y(I){return null==I}function L(I){(I=function A(I){var F={};for(var N in I)F[N]=I[N];return F}(I||{})).stripIgnoreTag&&(I.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),I.onIgnoreTag=f.onIgnoreTagStripAll),I.whiteList=I.whiteList||I.allowList?function E(I){var F={};for(var N in I)Array.isArray(I[N])?F[N.toLowerCase()]=I[N].map(function(Q){return Q.toLowerCase()}):F[N.toLowerCase()]=I[N];return F}(I.whiteList||I.allowList):f.whiteList,I.onTag=I.onTag||f.onTag,I.onTagAttr=I.onTagAttr||f.onTagAttr,I.onIgnoreTag=I.onIgnoreTag||f.onIgnoreTag,I.onIgnoreTagAttr=I.onIgnoreTagAttr||f.onIgnoreTagAttr,I.safeAttrValue=I.safeAttrValue||f.safeAttrValue,I.escapeHtml=I.escapeHtml||f.escapeHtml,this.options=I,!1===I.css?this.cssFilter=!1:(I.css=I.css||{},this.cssFilter=new D(I.css))}L.prototype.process=function(I){if(!(I=(I=I||"").toString()))return"";var N=this.options,Q=N.whiteList,j=N.onTag,V=N.onIgnoreTag,tt=N.onTagAttr,it=N.onIgnoreTagAttr,dt=N.safeAttrValue,mt=N.escapeHtml,ft=this.cssFilter;N.stripBlankChar&&(I=f.stripBlankChar(I)),N.allowCommentTag||(I=f.stripCommentTag(I));var yt=!1;N.stripIgnoreTagBody&&(yt=f.StripTagBody(N.stripIgnoreTagBody,V),V=yt.onIgnoreTag);var St=O(I,function($t,he,xe,tn,Ce){var We={sourcePosition:$t,position:he,isClosing:Ce,isWhite:Object.prototype.hasOwnProperty.call(Q,xe)},_e=j(xe,tn,We);if(!y(_e))return _e;if(We.isWhite){if(We.isClosing)return"</"+xe+">";var mn=function C(I){var F=w.spaceIndex(I);if(-1===F)return{html:"",closing:"/"===I[I.length-2]};var N="/"===(I=w.trim(I.slice(F+1,-1)))[I.length-1];return N&&(I=w.trim(I.slice(0,-1))),{html:I,closing:N}}(tn),ye=Q[xe],fe=m(mn.html,function(Ue,Ye){var Yn=-1!==w.indexOf(ye,Ue),Si=tt(xe,Ue,Ye,Yn);return y(Si)?Yn?(Ye=dt(xe,Ue,Ye,ft))?Ue+'="'+Ye+'"':Ue:y(Si=it(xe,Ue,Ye,Yn))?void 0:Si:Si});return tn="<"+xe,fe&&(tn+=" "+fe),mn.closing&&(tn+=" /"),tn+">"}return y(_e=V(xe,tn,We))?mt(tn):_e},mt);return yt&&(St=yt.remove(St)),St},Zt.exports=L},14913:(Zt,K,M)=>{"use strict";M.d(K,{a:()=>c1});var D=M(65879),f=M(49671),$=function(H){return function O(z){return!!z&&"object"==typeof z}(H)&&!function m(z){var H=Object.prototype.toString.call(z);return"[object RegExp]"===H||"[object Date]"===H||function C(z){return z.$$typeof===y}(z)}(H)},y="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function E(z,H){return!1!==H.clone&&H.isMergeableObject(z)?tt(function A(z){return Array.isArray(z)?[]:{}}(z),z,H):z}function L(z,H,X){return z.concat(H).map(function(ct){return E(ct,X)})}function N(z){return Object.keys(z).concat(function F(z){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(z).filter(function(H){return z.propertyIsEnumerable(H)}):[]}(z))}function Q(z,H){try{return H in z}catch{return!1}}function tt(z,H,X){(X=X||{}).arrayMerge=X.arrayMerge||L,X.isMergeableObject=X.isMergeableObject||$,X.cloneUnlessOtherwiseSpecified=E;var ct=Array.isArray(H);return ct===Array.isArray(z)?ct?X.arrayMerge(z,H,X):function V(z,H,X){var ct={};return X.isMergeableObject(z)&&N(z).forEach(function(xt){ct[xt]=E(z[xt],X)}),N(H).forEach(function(xt){(function j(z,H){return Q(z,H)&&!(Object.hasOwnProperty.call(z,H)&&Object.propertyIsEnumerable.call(z,H))})(z,xt)||(ct[xt]=Q(z,xt)&&X.isMergeableObject(H[xt])?function I(z,H){if(!H.customMerge)return tt;var X=H.customMerge(z);return"function"==typeof X?X:tt}(xt,X)(z[xt],H[xt],X):E(H[xt],X))}),ct}(z,H,X):E(H,X)}tt.all=function(H,X){if(!Array.isArray(H))throw new Error("first argument should be an array");return H.reduce(function(ct,xt){return tt(ct,xt,X)},{})};var dt=tt;function ft(z){return z instanceof HTMLElement}function yt(z){return"function"==typeof z}function St(z){return"string"==typeof z}function $t(z){return void 0===z}class he{on(H,X,ct,xt){return void 0===xt&&(xt=!1),$t(this.bindings)&&(this.bindings={}),$t(this.bindings[H])&&(this.bindings[H]=[]),this.bindings[H].push({handler:X,ctx:ct,once:xt}),this}once(H,X,ct){return this.on(H,X,ct,!0)}off(H,X){return $t(this.bindings)||$t(this.bindings[H])||($t(X)?delete this.bindings[H]:this.bindings[H].forEach((ct,xt)=>{ct.handler===X&&this.bindings[H].splice(xt,1)})),this}trigger(H){for(var X=arguments.length,ct=new Array(X>1?X-1:0),xt=1;xt<X;xt++)ct[xt-1]=arguments[xt];return!$t(this.bindings)&&this.bindings[H]&&this.bindings[H].forEach((Qt,zt)=>{const{ctx:Yt,handler:me,once:ve}=Qt;me.apply(Yt||this,ct),ve&&this.bindings[H].splice(zt,1)}),this}}function xe(z){const H=Object.getOwnPropertyNames(z.constructor.prototype);for(let X=0;X<H.length;X++){const ct=H[X],xt=z[ct];"constructor"!==ct&&"function"==typeof xt&&(z[ct]=xt.bind(z))}return z}function We(z){return St(z)&&""!==z?"-"!==z.charAt(z.length-1)?`${z}-`:z:""}function mn(z){return null==z||!z.element||!z.on}function ye(){let z=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,H=>{const X=(z+16*Math.random())%16|0;return z=Math.floor(z/16),("x"==H?X:3&X|8).toString(16)})}function fe(){return fe=Object.assign?Object.assign.bind():function(z){for(var H=1;H<arguments.length;H++){var X=arguments[H];for(var ct in X)Object.prototype.hasOwnProperty.call(X,ct)&&(z[ct]=X[ct])}return z},fe.apply(this,arguments)}function Ue(z,H){if(null==z)return{};var xt,Qt,X={},ct=Object.keys(z);for(Qt=0;Qt<ct.length;Qt++)!(H.indexOf(xt=ct[Qt])>=0)&&(X[xt]=z[xt]);return X}const Ye=["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","flipAlignment"],Yn=["mainAxis","crossAxis","limiter"];function Si(z){return z.split("-")[0]}function bn(z){return z.split("-")[1]}function ri(z){return["top","bottom"].includes(Si(z))?"x":"y"}function qi(z){return"y"===z?"height":"width"}function to(z,H,X){let{reference:ct,floating:xt}=z;const Qt=ct.x+ct.width/2-xt.width/2,zt=ct.y+ct.height/2-xt.height/2,Yt=ri(H),me=qi(Yt),ve=ct[me]/2-xt[me]/2,qe="x"===Yt;let De;switch(Si(H)){case"top":De={x:Qt,y:ct.y-xt.height};break;case"bottom":De={x:Qt,y:ct.y+ct.height};break;case"right":De={x:ct.x+ct.width,y:zt};break;case"left":De={x:ct.x-xt.width,y:zt};break;default:De={x:ct.x,y:ct.y}}switch(bn(H)){case"start":De[Yt]-=ve*(X&&qe?-1:1);break;case"end":De[Yt]+=ve*(X&&qe?-1:1)}return De}const Tl=function(){var z=(0,f.Z)(function*(H,X,ct){const{placement:xt="bottom",strategy:Qt="absolute",middleware:zt=[],platform:Yt}=ct,me=zt.filter(Boolean),ve=yield null==Yt.isRTL?void 0:Yt.isRTL(X);let Je=yield Yt.getElementRects({reference:H,floating:X,strategy:Qt}),{x:qe,y:De}=to(Je,xt,ve),un=xt,vn={},fi=0;for(let eo=0;eo<me.length;eo++){const{name:Ei,fn:Zo}=me[eo],{x:so,y:Tn,data:Dt,reset:se}=yield Zo({x:qe,y:De,initialPlacement:xt,placement:un,strategy:Qt,middlewareData:vn,rects:Je,platform:Yt,elements:{reference:H,floating:X}});qe=so??qe,De=Tn??De,vn=fe({},vn,{[Ei]:fe({},vn[Ei],Dt)}),se&&fi<=50&&(fi++,"object"==typeof se&&(se.placement&&(un=se.placement),se.rects&&(Je=!0===se.rects?yield Yt.getElementRects({reference:H,floating:X,strategy:Qt}):se.rects),({x:qe,y:De}=to(Je,un,ve))),eo=-1)}return{x:qe,y:De,placement:un,strategy:Qt,middlewareData:vn}});return function(X,ct,xt){return z.apply(this,arguments)}}();function Mn(z){return"number"!=typeof z?function Mr(z){return fe({top:0,right:0,bottom:0,left:0},z)}(z):{top:z,right:z,bottom:z,left:z}}function ln(z){return fe({},z,{top:z.y,left:z.x,right:z.x+z.width,bottom:z.y+z.height})}function pi(z,H){return xn.apply(this,arguments)}function xn(){return(xn=(0,f.Z)(function*(z,H){var X;void 0===H&&(H={});const{x:ct,y:xt,platform:Qt,rects:zt,elements:Yt,strategy:me}=z,{boundary:ve="clippingAncestors",rootBoundary:Je="viewport",elementContext:qe="floating",altBoundary:De=!1,padding:un=0}=H,vn=Mn(un),eo=Yt[De?"floating"===qe?"reference":"floating":qe],Ei=ln(yield Qt.getClippingRect({element:null==(X=yield null==Qt.isElement?void 0:Qt.isElement(eo))||X?eo:eo.contextElement||(yield null==Qt.getDocumentElement?void 0:Qt.getDocumentElement(Yt.floating)),boundary:ve,rootBoundary:Je,strategy:me})),Zo="floating"===qe?fe({},zt.floating,{x:ct,y:xt}):zt.reference,so=yield null==Qt.getOffsetParent?void 0:Qt.getOffsetParent(Yt.floating),Tn=(yield null==Qt.isElement?void 0:Qt.isElement(so))&&(yield null==Qt.getScale?void 0:Qt.getScale(so))||{x:1,y:1},Dt=ln(Qt.convertOffsetParentRelativeRectToViewportRelativeRect?yield Qt.convertOffsetParentRelativeRectToViewportRelativeRect({rect:Zo,offsetParent:so,strategy:me}):Zo);return{top:(Ei.top-Dt.top+vn.top)/Tn.y,bottom:(Dt.bottom-Ei.bottom+vn.bottom)/Tn.y,left:(Ei.left-Dt.left+vn.left)/Tn.x,right:(Dt.right-Ei.right+vn.right)/Tn.x}})).apply(this,arguments)}const ki=Math.min,an=Math.max;function Kn(z,H,X){return an(z,ki(H,X))}const t={left:"right",right:"left",bottom:"top",top:"bottom"};function Gn(z){return z.replace(/left|right|bottom|top/g,H=>t[H])}const po={start:"end",end:"start"};function Pi(z){return z.replace(/start|end/g,H=>po[H])}function Hs(z){return"x"===z?"y":"x"}const mi=function(H){return void 0===H&&(H={}),{options:H,fn(X){const{x:ct,y:xt,placement:Qt,rects:zt,middlewareData:Yt}=X,{offset:me=0,mainAxis:ve=!0,crossAxis:Je=!0}=H,qe={x:ct,y:xt},De=ri(Qt),un=Hs(De);let vn=qe[De],fi=qe[un];const eo="function"==typeof me?me(X):me,Ei="number"==typeof eo?{mainAxis:eo,crossAxis:0}:fe({mainAxis:0,crossAxis:0},eo);if(ve){const se="y"===De?"height":"width",ce=zt.reference[De]-zt.floating[se]+Ei.mainAxis,He=zt.reference[De]+zt.reference[se]-Ei.mainAxis;vn<ce?vn=ce:vn>He&&(vn=He)}if(Je){var Zo,so,Tn,Dt;const se="y"===De?"width":"height",ce=["top","left"].includes(Si(Qt)),He=zt.reference[un]-zt.floating[se]+(ce&&null!=(Zo=null==(so=Yt.offset)?void 0:so[un])?Zo:0)+(ce?0:Ei.crossAxis),An=zt.reference[un]+zt.reference[se]+(ce?0:null!=(Tn=null==(Dt=Yt.offset)?void 0:Dt[un])?Tn:0)-(ce?Ei.crossAxis:0);fi<He?fi=He:fi>An&&(fi=An)}return{[De]:vn,[un]:fi}}}};function xa(z){var H;return(null==(H=z.ownerDocument)?void 0:H.defaultView)||window}function ba(z){return xa(z).getComputedStyle(z)}function No(z){return hr(z)?(z.nodeName||"").toLowerCase():""}let Fi;function tu(){if(Fi)return Fi;const z=navigator.userAgentData;return z&&Array.isArray(z.brands)?(Fi=z.brands.map(H=>H.brand+"/"+H.version).join(" "),Fi):navigator.userAgent}function va(z){return z instanceof xa(z).HTMLElement}function Oo(z){return z instanceof xa(z).Element}function hr(z){return z instanceof xa(z).Node}function Wu(z){return!(typeof ShadowRoot>"u")&&(z instanceof xa(z).ShadowRoot||z instanceof ShadowRoot)}function mc(z){const{overflow:H,overflowX:X,overflowY:ct,display:xt}=ba(z);return/auto|scroll|overlay|hidden/.test(H+ct+X)&&!["inline","contents"].includes(xt)}function Xd(z){return["table","td","th"].includes(No(z))}function tm(z){const H=/firefox/i.test(tu()),X=ba(z),ct=X.backdropFilter||X.WebkitBackdropFilter;return"none"!==X.transform||"none"!==X.perspective||!!ct&&"none"!==ct||H&&"filter"===X.willChange||H&&!!X.filter&&"none"!==X.filter||["transform","perspective"].some(xt=>X.willChange.includes(xt))||["paint","layout","strict","content"].some(xt=>{const Qt=X.contain;return null!=Qt&&Qt.includes(xt)})}function mh(){return!/^((?!chrome|android).)*safari/i.test(tu())}function em(z){return["html","body","#document"].includes(No(z))}const nm={x:1,y:1};function hc(z){const H=!Oo(z)&&z.contextElement?z.contextElement:Oo(z)?z:null;if(!H)return nm;const X=H.getBoundingClientRect(),ct=ba(H);let xt=X.width/parseFloat(ct.width),Qt=X.height/parseFloat(ct.height);return(!xt||!Number.isFinite(xt))&&(xt=1),(!Qt||!Number.isFinite(Qt))&&(Qt=1),{x:xt,y:Qt}}function Gs(z,H,X,ct){var xt,Qt,zt,Yt;void 0===H&&(H=!1),void 0===X&&(X=!1);const me=z.getBoundingClientRect();let ve=nm;H&&(ct?Oo(ct)&&(ve=hc(ct)):ve=hc(z));const Je=Oo(z)?xa(z):window,qe=!mh()&&X,De=(me.left+(qe&&null!=(xt=null==(Qt=Je.visualViewport)?void 0:Qt.offsetLeft)?xt:0))/ve.x,un=(me.top+(qe&&null!=(zt=null==(Yt=Je.visualViewport)?void 0:Yt.offsetTop)?zt:0))/ve.y,vn=me.width/ve.x,fi=me.height/ve.y;return{width:vn,height:fi,top:un,right:De+vn,bottom:un+fi,left:De,x:De,y:un}}function $s(z){return((hr(z)?z.ownerDocument:z.document)||window.document).documentElement}function Vu(z){return Oo(z)?{scrollLeft:z.scrollLeft,scrollTop:z.scrollTop}:{scrollLeft:z.pageXOffset,scrollTop:z.pageYOffset}}function hh(z){return Gs($s(z)).left+Vu(z).scrollLeft}function ph(z,H,X){const ct=va(H),xt=$s(H),Qt=Gs(z,!0,"fixed"===X,H);let zt={scrollLeft:0,scrollTop:0};const Yt={x:0,y:0};if(ct||!ct&&"fixed"!==X)if(("body"!==No(H)||mc(xt))&&(zt=Vu(H)),va(H)){const me=Gs(H,!0);Yt.x=me.x+H.clientLeft,Yt.y=me.y+H.clientTop}else xt&&(Yt.x=hh(xt));return{x:Qt.left+zt.scrollLeft-Yt.x,y:Qt.top+zt.scrollTop-Yt.y,width:Qt.width,height:Qt.height}}function eu(z){if("html"===No(z))return z;const H=z.assignedSlot||z.parentNode||(Wu(z)?z.host:null)||$s(z);return Wu(H)?H.host:H}function _h(z){return va(z)&&"fixed"!==ba(z).position?z.offsetParent:null}function Xu(z){const H=xa(z);let X=_h(z);for(;X&&Xd(X)&&"static"===ba(X).position;)X=_h(X);return X&&("html"===No(X)||"body"===No(X)&&"static"===ba(X).position&&!tm(X))?H:X||function y_(z){let H=eu(z);for(;va(H)&&!em(H);){if(tm(H))return H;H=eu(H)}return null}(z)||H}const fh=Math.min,pc=Math.max;function gh(z){const H=eu(z);return em(H)?z.ownerDocument.body:va(H)&&mc(H)?H:gh(H)}function nu(z,H){var X;void 0===H&&(H=[]);const ct=gh(z),xt=ct===(null==(X=z.ownerDocument)?void 0:X.body),Qt=xa(ct);return xt?H.concat(Qt,Qt.visualViewport||[],mc(ct)?ct:[]):H.concat(ct,nu(ct))}function xh(z,H,X){return"viewport"===H?ln(function C_(z,H){const X=xa(z),ct=$s(z),xt=X.visualViewport;let Qt=ct.clientWidth,zt=ct.clientHeight,Yt=0,me=0;if(xt){Qt=xt.width,zt=xt.height;const ve=mh();(ve||!ve&&"fixed"===H)&&(Yt=xt.offsetLeft,me=xt.offsetTop)}return{width:Qt,height:zt,x:Yt,y:me}}(z,X)):Oo(H)?function k_(z,H){const X=Gs(z,!0,"fixed"===H),ct=X.top+z.clientTop,xt=X.left+z.clientLeft,Qt=va(z)?hc(z):{x:1,y:1},zt=z.clientWidth*Qt.x,Yt=z.clientHeight*Qt.y,me=xt*Qt.x,ve=ct*Qt.y;return{top:ve,left:me,right:me+zt,bottom:ve+Yt,x:me,y:ve,width:zt,height:Yt}}(H,X):ln(function T_(z){var H;const X=$s(z),ct=Vu(z),xt=null==(H=z.ownerDocument)?void 0:H.body,Qt=pc(X.scrollWidth,X.clientWidth,xt?xt.scrollWidth:0,xt?xt.clientWidth:0),zt=pc(X.scrollHeight,X.clientHeight,xt?xt.scrollHeight:0,xt?xt.clientHeight:0);let Yt=-ct.scrollLeft+hh(z);const me=-ct.scrollTop;return"rtl"===ba(xt||X).direction&&(Yt+=pc(X.clientWidth,xt?xt.clientWidth:0)-Qt),{width:Qt,height:zt,x:Yt,y:me}}($s(z)))}function bh(z,H){const X=H.get(z);if(X)return X;let ct=nu(z).filter(Yt=>Oo(Yt)&&"body"!==No(Yt)),xt=null;const Qt="fixed"===ba(z).position;let zt=Qt?eu(z):z;for(;Oo(zt)&&!em(zt);){const Yt=ba(zt),me=tm(zt);(Qt?me||xt:me||"static"!==Yt.position||!xt||!["absolute","fixed"].includes(xt.position))?xt=Yt:ct=ct.filter(Je=>Je!==zt),zt=eu(zt)}return H.set(z,ct),ct}const S_={getClippingRect:function A_(z){let{element:H,boundary:X,rootBoundary:ct,strategy:xt}=z;const zt=[..."clippingAncestors"===X?bh(H,this._c):[].concat(X),ct],me=zt.reduce((ve,Je)=>{const qe=xh(H,Je,xt);return ve.top=pc(qe.top,ve.top),ve.right=fh(qe.right,ve.right),ve.bottom=fh(qe.bottom,ve.bottom),ve.left=pc(qe.left,ve.left),ve},xh(H,zt[0],xt));return{width:me.right-me.left,height:me.bottom-me.top,x:me.left,y:me.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function im(z){let{rect:H,offsetParent:X,strategy:ct}=z;const xt=va(X),Qt=$s(X);if(X===Qt)return H;let zt={scrollLeft:0,scrollTop:0},Yt={x:1,y:1};const me={x:0,y:0};if((xt||!xt&&"fixed"!==ct)&&(("body"!==No(X)||mc(Qt))&&(zt=Vu(X)),va(X))){const ve=Gs(X);Yt=hc(X),me.x=ve.x+X.clientLeft,me.y=ve.y+X.clientTop}return{width:H.width*Yt.x,height:H.height*Yt.y,x:H.x*Yt.x-zt.scrollLeft*Yt.x+me.x,y:H.y*Yt.y-zt.scrollTop*Yt.y+me.y}},isElement:Oo,getDimensions:function w_(z){if(va(z))return{width:z.offsetWidth,height:z.offsetHeight};const H=Gs(z);return{width:H.width,height:H.height}},getOffsetParent:Xu,getDocumentElement:$s,getScale:hc,getElementRects(z){var H=this;return(0,f.Z)(function*(){let{reference:X,floating:ct,strategy:xt}=z;const Qt=H.getOffsetParent||Xu,zt=H.getDimensions;return{reference:ph(X,yield Qt(ct),xt),floating:fe({x:0,y:0},yield zt(ct))}})()},getClientRects:z=>Array.from(z.getClientRects()),isRTL:z=>"rtl"===ba(z).direction};function M_(z){z.cleanup&&z.cleanup();const H=z._getResolvedAttachToOptions();let X=H.element;const ct=function N_(z,H){const X={strategy:"absolute",middleware:[]},ct=function Z_(z){return!(!z.options.arrow||!z.el)&&z.el.querySelector(".shepherd-arrow")}(H);return mn(z)||(X.middleware.push(function(H){return void 0===H&&(H={}),{name:"flip",options:H,fn:X=>(0,f.Z)(function*(){var ct;const{placement:xt,middlewareData:Qt,rects:zt,initialPlacement:Yt,platform:me,elements:ve}=X,{mainAxis:Je=!0,crossAxis:qe=!0,fallbackPlacements:De,fallbackStrategy:un="bestFit",flipAlignment:vn=!0}=H,fi=Ue(H,Ye),eo=Si(xt),Zo=De||(eo!==Yt&&vn?function Ke(z){const H=Gn(z);return[Pi(z),H,Pi(H)]}(Yt):[Gn(Yt)]),so=[Yt,...Zo],Tn=yield pi(X,fi),Dt=[];let se=(null==(ct=Qt.flip)?void 0:ct.overflows)||[];if(Je&&Dt.push(Tn[eo]),qe){const{main:zn,cross:Yi}=function ho(z,H,X){void 0===X&&(X=!1);const ct=bn(z),xt=ri(z),Qt=qi(xt);let zt="x"===xt?ct===(X?"end":"start")?"right":"left":"start"===ct?"bottom":"top";return H.reference[Qt]>H.floating[Qt]&&(zt=Gn(zt)),{main:zt,cross:Gn(zt)}}(xt,zt,yield null==me.isRTL?void 0:me.isRTL(ve.floating));Dt.push(Tn[zn],Tn[Yi])}if(se=[...se,{placement:xt,overflows:Dt}],!Dt.every(zn=>zn<=0)){var ce,He;const zn=(null!=(ce=null==(He=Qt.flip)?void 0:He.index)?ce:0)+1,Yi=so[zn];if(Yi)return{data:{index:zn,overflows:se},reset:{placement:Yi}};let gi="bottom";switch(un){case"bestFit":{var An;const _u=null==(An=se.map(fu=>[fu,fu.overflows.filter(wa=>wa>0).reduce((wa,Ll)=>wa+Ll,0)]).sort((fu,wa)=>fu[1]-wa[1])[0])?void 0:An[0].placement;_u&&(gi=_u);break}case"initialPlacement":gi=Yt}if(xt!==gi)return{reset:{placement:gi}}}return{}})()}}(),function(H){return void 0===H&&(H={}),{name:"shift",options:H,fn:X=>(0,f.Z)(function*(){const{x:ct,y:xt,placement:Qt}=X,{mainAxis:zt=!0,crossAxis:Yt=!1,limiter:me={fn:Ei=>{let{x:Zo,y:so}=Ei;return{x:Zo,y:so}}}}=H,ve=Ue(H,Yn),Je={x:ct,y:xt},qe=yield pi(X,ve),De=ri(Si(Qt)),un=Hs(De);let vn=Je[De],fi=Je[un];zt&&(vn=Kn(vn+qe["y"===De?"top":"left"],vn,vn-qe["y"===De?"bottom":"right"])),Yt&&(fi=Kn(fi+qe["y"===un?"top":"left"],fi,fi-qe["y"===un?"bottom":"right"]));const eo=me.fn(fe({},X,{[De]:vn,[un]:fi}));return fe({},eo,{data:{x:eo.x-ct,y:eo.y-xt}})})()}}({limiter:mi(),crossAxis:!0})),ct&&X.middleware.push((z=>({name:"arrow",options:z,fn:H=>(0,f.Z)(function*(){const{element:X,padding:ct=0}=z??{},{x:xt,y:Qt,placement:zt,rects:Yt,platform:me}=H;if(null==X)return{};const ve=Mn(ct),Je={x:xt,y:Qt},qe=ri(zt),De=bn(zt),un=qi(qe),vn=yield me.getDimensions(X),fi="y"===qe?"top":"left",eo="y"===qe?"bottom":"right",Ei=Yt.reference[un]+Yt.reference[qe]-Je[qe]-Yt.floating[un],Zo=Je[qe]-Yt.reference[qe],so=yield null==me.getOffsetParent?void 0:me.getOffsetParent(X);let Tn=so?"y"===qe?so.clientHeight||0:so.clientWidth||0:0;0===Tn&&(Tn=Yt.floating[un]);const se=ve[fi],ce=Tn-vn[un]-ve[eo],He=Tn/2-vn[un]/2+(Ei/2-Zo/2),An=Kn(se,He,ce);return{[qe]:Je[qe]-(("start"===De?ve[fi]:ve[eo])>0&&He!==An&&Yt.reference[un]<=Yt.floating[un]?He<se?se-He:ce-He:0),data:{[qe]:An,centerOffset:He-An}}})()}))({element:ct})),X.placement=z.on),dt(H.options.floatingUIOptions||{},X)}(H,z),xt=mn(H);return xt&&(X=document.body,z.shepherdElementComponent.getElement().classList.add("shepherd-centered")),z.cleanup=function O_(z,H,X,ct){void 0===ct&&(ct={});const{ancestorScroll:xt=!0,ancestorResize:Qt=!0,elementResize:zt=!0,animationFrame:Yt=!1}=ct,me=xt&&!Yt,ve=me||Qt?[...Oo(z)?nu(z):z.contextElement?nu(z.contextElement):[],...nu(H)]:[];ve.forEach(vn=>{me&&vn.addEventListener("scroll",X,{passive:!0}),Qt&&vn.addEventListener("resize",X)});let Je=null;if(zt){let vn=!0;Je=new ResizeObserver(()=>{vn||X(),vn=!1}),Oo(z)&&!Yt&&Je.observe(z),!Oo(z)&&z.contextElement&&!Yt&&Je.observe(z.contextElement),Je.observe(H)}let qe,De=Yt?Gs(z):null;return Yt&&function un(){const vn=Gs(z);De&&(vn.x!==De.x||vn.y!==De.y||vn.width!==De.width||vn.height!==De.height)&&X(),De=vn,qe=requestAnimationFrame(un)}(),X(),()=>{var vn;ve.forEach(fi=>{me&&fi.removeEventListener("scroll",X),Qt&&fi.removeEventListener("resize",X)}),null==(vn=Je)||vn.disconnect(),Je=null,Yt&&cancelAnimationFrame(qe)}}(X,z.el,()=>{z.el?function L_(z,H,X,ct){((z,H,X)=>{const ct=new Map,xt=fe({platform:S_},X),Qt=fe({},xt.platform,{_c:ct});return Tl(z,H,fe({},xt,{platform:Qt}))})(z,H.el,X).then(function ed(z,H){return X=>{let{x:ct,y:xt,placement:Qt,middlewareData:zt}=X;return z.el&&(Object.assign(z.el.style,H?{position:"fixed",left:"50%",top:"50%",transform:"translate(-50%, -50%)"}:{position:"absolute",left:`${ct}px`,top:`${xt}px`}),z.el.dataset.popperPlacement=Qt,function P_(z,H){const X=z.querySelector(".shepherd-arrow");if(X){let ct,xt,Qt,zt;if(H.arrow){const{x:Yt,y:me}=H.arrow;ct=null!=Yt?`${Yt}px`:"",xt=null!=me?`${me}px`:""}Object.assign(X.style,{left:ct,top:xt,right:Qt,bottom:zt})}}(z.el,zt)),z}}(H,ct)).then(xt=>new Promise(Qt=>{setTimeout(()=>Qt(xt),300)})).then(xt=>{xt&&xt.el&&xt.el.focus({preventScroll:!0})})}(X,z,ct,xt):z.cleanup()}),z.target=H.element,ct}function Ua(){}function vh(z,H){for(const X in H)z[X]=H[X];return z}function om(z){return z()}function yh(){return Object.create(null)}function iu(z){z.forEach(om)}function am(z){return"function"==typeof z}function vs(z,H){return z!=z?H==H:z!==H||z&&"object"==typeof z||"function"==typeof z}function kl(z,H){z.appendChild(H)}function pr(z,H,X){z.insertBefore(H,X||null)}function Ba(z){z.parentNode&&z.parentNode.removeChild(z)}function Ir(z){return document.createElement(z)}function ou(z){return document.createElementNS("http://www.w3.org/2000/svg",z)}function rm(z){return document.createTextNode(z)}function au(){return rm(" ")}function ru(z,H,X,ct){return z.addEventListener(H,X,ct),()=>z.removeEventListener(H,X,ct)}function Qi(z,H,X){null==X?z.removeAttribute(H):z.getAttribute(H)!==X&&z.setAttribute(H,X)}function _c(z,H){const X=Object.getOwnPropertyDescriptors(z.__proto__);for(const ct in H)null==H[ct]?z.removeAttribute(ct):"style"===ct?z.style.cssText=H[ct]:"__value"===ct?z.value=z[ct]=H[ct]:X[ct]&&X[ct].set?z[ct]=H[ct]:Qi(z,ct,H[ct])}function Ys(z,H,X){z.classList[X?"add":"remove"](H)}let Al;function Lr(z){Al=z}function Sl(){if(!Al)throw new Error("Function called outside component initialization");return Al}function ys(z){Sl().$$.after_update.push(z)}const La=[],Pr=[],Ks=[],Ni=[],Ch=Promise.resolve();let sm=!1;function Eo(z){Ks.push(z)}const Wr=new Set;let ws=0;function Ol(){const z=Al;do{for(;ws<La.length;){const H=La[ws];ws++,Lr(H),su(H.$$)}for(Lr(null),La.length=0,ws=0;Pr.length;)Pr.pop()();for(let H=0;H<Ks.length;H+=1){const X=Ks[H];Wr.has(X)||(Wr.add(X),X())}Ks.length=0}while(La.length);for(;Ni.length;)Ni.pop()();sm=!1,Wr.clear(),Lr(z)}function su(z){if(null!==z.fragment){z.update(),iu(z.before_update);const H=z.dirty;z.dirty=[-1],z.fragment&&z.fragment.p(z.ctx,H),z.after_update.forEach(Eo)}}const El=new Set;let Ws;function Cs(){Ws={r:0,c:[],p:Ws}}function Vr(){Ws.r||iu(Ws.c),Ws=Ws.p}function Oi(z,H){z&&z.i&&(El.delete(z),z.i(H))}function yo(z,H,X,ct){if(z&&z.o){if(El.has(z))return;El.add(z),Ws.c.push(()=>{El.delete(z),ct&&(X&&z.d(1),ct())}),z.o(H)}else ct&&ct()}function li(z){z&&z.c()}function yi(z,H,X,ct){const{fragment:xt,after_update:Qt}=z.$$;xt&&xt.m(H,X),ct||Eo(()=>{const zt=z.$$.on_mount.map(om).filter(am);z.$$.on_destroy?z.$$.on_destroy.push(...zt):iu(zt),z.$$.on_mount=[]}),Qt.forEach(Eo)}function Pa(z,H){const X=z.$$;null!==X.fragment&&(iu(X.on_destroy),X.fragment&&X.fragment.d(H),X.on_destroy=X.fragment=null,X.ctx=[])}function sa(z,H,X,ct,xt,Qt,zt,Yt){void 0===Yt&&(Yt=[-1]);const me=Al;Lr(z);const ve=z.$$={fragment:null,ctx:[],props:Qt,update:Ua,not_equal:xt,bound:yh(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(H.context||(me?me.$$.context:[])),callbacks:yh(),dirty:Yt,skip_bound:!1,root:H.target||me.$$.root};zt&&zt(ve.root);let Je=!1;if(ve.ctx=X?X(z,H.props||{},function(qe,De){const un=!(arguments.length<=2)&&arguments.length-2?arguments.length<=2?void 0:arguments[2]:De;return ve.ctx&&xt(ve.ctx[qe],ve.ctx[qe]=un)&&(!ve.skip_bound&&ve.bound[qe]&&ve.bound[qe](un),Je&&function _r(z,H){-1===z.$$.dirty[0]&&(La.push(z),function Ri(){sm||(sm=!0,Ch.then(Ol))}(),z.$$.dirty.fill(0)),z.$$.dirty[H/31|0]|=1<<H%31}(z,qe)),De}):[],ve.update(),Je=!0,iu(ve.before_update),ve.fragment=!!ct&&ct(ve.ctx),H.target){if(H.hydrate){const qe=function si(z){return Array.from(z.childNodes)}(H.target);ve.fragment&&ve.fragment.l(qe),qe.forEach(Ba)}else ve.fragment&&ve.fragment.c();H.intro&&Oi(z.$$.fragment),yi(z,H.target,H.anchor,H.customElement),Ol()}Lr(me)}class za{$destroy(){Pa(this,1),this.$destroy=Ua}$on(H,X){if(!am(X))return Ua;const ct=this.$$.callbacks[H]||(this.$$.callbacks[H]=[]);return ct.push(X),()=>{const xt=ct.indexOf(X);-1!==xt&&ct.splice(xt,1)}}$set(H){this.$$set&&!function wh(z){return 0===Object.keys(z).length}(H)&&(this.$$.skip_bound=!0,this.$$set(H),this.$$.skip_bound=!1)}}function Th(z){let H,X,ct,xt,Qt;return{c(){H=Ir("button"),Qi(H,"aria-label",X=z[3]?z[3]:null),Qi(H,"class",ct=`${z[1]||""} shepherd-button ${z[4]?"shepherd-button-secondary":""}`),H.disabled=z[2],Qi(H,"tabindex","0")},m(zt,Yt){pr(zt,H,Yt),H.innerHTML=z[5],xt||(Qt=ru(H,"click",function(){am(z[0])&&z[0].apply(this,arguments)}),xt=!0)},p(zt,Yt){let[me]=Yt;z=zt,32&me&&(H.innerHTML=z[5]),8&me&&X!==(X=z[3]?z[3]:null)&&Qi(H,"aria-label",X),18&me&&ct!==(ct=`${z[1]||""} shepherd-button ${z[4]?"shepherd-button-secondary":""}`)&&Qi(H,"class",ct),4&me&&(H.disabled=z[2])},i:Ua,o:Ua,d(zt){zt&&Ba(H),xt=!1,Qt()}}}function lm(z,H,X){let Qt,zt,Yt,me,ve,Je,{config:ct,step:xt}=H;function qe(De){return yt(De)?De=De.call(xt):De}return z.$$set=De=>{"config"in De&&X(6,ct=De.config),"step"in De&&X(7,xt=De.step)},z.$$.update=()=>{192&z.$$.dirty&&(X(0,Qt=ct.action?ct.action.bind(xt.tour):null),X(1,zt=ct.classes),X(2,Yt=!!ct.disabled&&qe(ct.disabled)),X(3,me=ct.label?qe(ct.label):null),X(4,ve=ct.secondary),X(5,Je=ct.text?qe(ct.text):null))},[Qt,zt,Yt,me,ve,Je,ct,xt]}class kh extends za{constructor(H){super(),sa(this,H,lm,Th,vs,{config:6,step:7})}}function Uo(z,H,X){const ct=z.slice();return ct[2]=H[X],ct}function fc(z){let H,X,ct=z[1],xt=[];for(let zt=0;zt<ct.length;zt+=1)xt[zt]=la(Uo(z,ct,zt));const Qt=zt=>yo(xt[zt],1,1,()=>{xt[zt]=null});return{c(){for(let zt=0;zt<xt.length;zt+=1)xt[zt].c();H=function nd(){return rm("")}()},m(zt,Yt){for(let me=0;me<xt.length;me+=1)xt[me].m(zt,Yt);pr(zt,H,Yt),X=!0},p(zt,Yt){if(3&Yt){let me;for(ct=zt[1],me=0;me<ct.length;me+=1){const ve=Uo(zt,ct,me);xt[me]?(xt[me].p(ve,Yt),Oi(xt[me],1)):(xt[me]=la(ve),xt[me].c(),Oi(xt[me],1),xt[me].m(H.parentNode,H))}for(Cs(),me=ct.length;me<xt.length;me+=1)Qt(me);Vr()}},i(zt){if(!X){for(let Yt=0;Yt<ct.length;Yt+=1)Oi(xt[Yt]);X=!0}},o(zt){xt=xt.filter(Boolean);for(let Yt=0;Yt<xt.length;Yt+=1)yo(xt[Yt]);X=!1},d(zt){(function D_(z,H){for(let X=0;X<z.length;X+=1)z[X]&&z[X].d(H)})(xt,zt),zt&&Ba(H)}}}function la(z){let H,X;return H=new kh({props:{config:z[2],step:z[0]}}),{c(){li(H.$$.fragment)},m(ct,xt){yi(H,ct,xt),X=!0},p(ct,xt){const Qt={};2&xt&&(Qt.config=ct[2]),1&xt&&(Qt.step=ct[0]),H.$set(Qt)},i(ct){X||(Oi(H.$$.fragment,ct),X=!0)},o(ct){yo(H.$$.fragment,ct),X=!1},d(ct){Pa(H,ct)}}}function lu(z){let H,X,ct=z[1]&&fc(z);return{c(){H=Ir("footer"),ct&&ct.c(),Qi(H,"class","shepherd-footer")},m(xt,Qt){pr(xt,H,Qt),ct&&ct.m(H,null),X=!0},p(xt,Qt){let[zt]=Qt;xt[1]?ct?(ct.p(xt,zt),2&zt&&Oi(ct,1)):(ct=fc(xt),ct.c(),Oi(ct,1),ct.m(H,null)):ct&&(Cs(),yo(ct,1,1,()=>{ct=null}),Vr())},i(xt){X||(Oi(ct),X=!0)},o(xt){yo(ct),X=!1},d(xt){xt&&Ba(H),ct&&ct.d()}}}function Ml(z,H,X){let ct,{step:xt}=H;return z.$$set=Qt=>{"step"in Qt&&X(0,xt=Qt.step)},z.$$.update=()=>{1&z.$$.dirty&&X(1,ct=xt.options.buttons)},[xt,ct]}class Wo extends za{constructor(H){super(),sa(this,H,Ml,lu,vs,{step:0})}}function cu(z){let H,X,ct,xt,Qt;return{c(){H=Ir("button"),X=Ir("span"),X.textContent="\xd7",Qi(X,"aria-hidden","true"),Qi(H,"aria-label",ct=z[0].label?z[0].label:"Close Tour"),Qi(H,"class","shepherd-cancel-icon"),Qi(H,"type","button")},m(zt,Yt){pr(zt,H,Yt),kl(H,X),xt||(Qt=ru(H,"click",z[1]),xt=!0)},p(zt,Yt){let[me]=Yt;1&me&&ct!==(ct=zt[0].label?zt[0].label:"Close Tour")&&Qi(H,"aria-label",ct)},i:Ua,o:Ua,d(zt){zt&&Ba(H),xt=!1,Qt()}}}function Nr(z,H,X){let{cancelIcon:ct,step:xt}=H;return z.$$set=zt=>{"cancelIcon"in zt&&X(0,ct=zt.cancelIcon),"step"in zt&&X(2,xt=zt.step)},[ct,zt=>{zt.preventDefault(),xt.cancel()},xt]}class Il extends za{constructor(H){super(),sa(this,H,Nr,cu,vs,{cancelIcon:0,step:2})}}function uu(z){let H;return{c(){H=Ir("h3"),Qi(H,"id",z[1]),Qi(H,"class","shepherd-title")},m(X,ct){pr(X,H,ct),z[3](H)},p(X,ct){let[xt]=ct;2&xt&&Qi(H,"id",X[1])},i:Ua,o:Ua,d(X){X&&Ba(H),z[3](null)}}}function du(z,H,X){let{labelId:ct,element:xt,title:Qt}=H;return ys(()=>{yt(Qt)&&X(2,Qt=Qt()),X(0,xt.innerHTML=Qt,xt)}),z.$$set=Yt=>{"labelId"in Yt&&X(1,ct=Yt.labelId),"element"in Yt&&X(0,xt=Yt.element),"title"in Yt&&X(2,Qt=Yt.title)},[xt,ct,Qt,function zt(Yt){Pr[Yt?"unshift":"push"](()=>{xt=Yt,X(0,xt)})}]}class id extends za{constructor(H){super(),sa(this,H,du,uu,vs,{labelId:1,element:0,title:2})}}function Bo(z){let H,X;return H=new id({props:{labelId:z[0],title:z[2]}}),{c(){li(H.$$.fragment)},m(ct,xt){yi(H,ct,xt),X=!0},p(ct,xt){const Qt={};1&xt&&(Qt.labelId=ct[0]),4&xt&&(Qt.title=ct[2]),H.$set(Qt)},i(ct){X||(Oi(H.$$.fragment,ct),X=!0)},o(ct){yo(H.$$.fragment,ct),X=!1},d(ct){Pa(H,ct)}}}function gc(z){let H,X;return H=new Il({props:{cancelIcon:z[3],step:z[1]}}),{c(){li(H.$$.fragment)},m(ct,xt){yi(H,ct,xt),X=!0},p(ct,xt){const Qt={};8&xt&&(Qt.cancelIcon=ct[3]),2&xt&&(Qt.step=ct[1]),H.$set(Qt)},i(ct){X||(Oi(H.$$.fragment,ct),X=!0)},o(ct){yo(H.$$.fragment,ct),X=!1},d(ct){Pa(H,ct)}}}function Ja(z){let H,X,ct,xt=z[2]&&Bo(z),Qt=z[3]&&z[3].enabled&&gc(z);return{c(){H=Ir("header"),xt&&xt.c(),X=au(),Qt&&Qt.c(),Qi(H,"class","shepherd-header")},m(zt,Yt){pr(zt,H,Yt),xt&&xt.m(H,null),kl(H,X),Qt&&Qt.m(H,null),ct=!0},p(zt,Yt){let[me]=Yt;zt[2]?xt?(xt.p(zt,me),4&me&&Oi(xt,1)):(xt=Bo(zt),xt.c(),Oi(xt,1),xt.m(H,X)):xt&&(Cs(),yo(xt,1,1,()=>{xt=null}),Vr()),zt[3]&&zt[3].enabled?Qt?(Qt.p(zt,me),8&me&&Oi(Qt,1)):(Qt=gc(zt),Qt.c(),Oi(Qt,1),Qt.m(H,null)):Qt&&(Cs(),yo(Qt,1,1,()=>{Qt=null}),Vr())},i(zt){ct||(Oi(xt),Oi(Qt),ct=!0)},o(zt){yo(xt),yo(Qt),ct=!1},d(zt){zt&&Ba(H),xt&&xt.d(),Qt&&Qt.d()}}}function Ah(z,H,X){let Qt,zt,{labelId:ct,step:xt}=H;return z.$$set=Yt=>{"labelId"in Yt&&X(0,ct=Yt.labelId),"step"in Yt&&X(1,xt=Yt.step)},z.$$.update=()=>{2&z.$$.dirty&&(X(2,Qt=xt.options.title),X(3,zt=xt.options.cancelIcon))},[ct,xt,Qt,zt]}class cm extends za{constructor(H){super(),sa(this,H,Ah,Ja,vs,{labelId:0,step:1})}}function Ts(z){let H;return{c(){H=Ir("div"),Qi(H,"class","shepherd-text"),Qi(H,"id",z[1])},m(X,ct){pr(X,H,ct),z[3](H)},p(X,ct){let[xt]=ct;2&xt&&Qi(H,"id",X[1])},i:Ua,o:Ua,d(X){X&&Ba(H),z[3](null)}}}function mu(z,H,X){let{descriptionId:ct,element:xt,step:Qt}=H;return ys(()=>{let{text:Yt}=Qt.options;yt(Yt)&&(Yt=Yt.call(Qt)),ft(Yt)?xt.appendChild(Yt):X(0,xt.innerHTML=Yt,xt)}),z.$$set=Yt=>{"descriptionId"in Yt&&X(1,ct=Yt.descriptionId),"element"in Yt&&X(0,xt=Yt.element),"step"in Yt&&X(2,Qt=Yt.step)},[xt,ct,Qt,function zt(Yt){Pr[Yt?"unshift":"push"](()=>{xt=Yt,X(0,xt)})}]}class xc extends za{constructor(H){super(),sa(this,H,mu,Ts,vs,{descriptionId:1,element:0,step:2})}}function $i(z){let H,X;return H=new cm({props:{labelId:z[1],step:z[2]}}),{c(){li(H.$$.fragment)},m(ct,xt){yi(H,ct,xt),X=!0},p(ct,xt){const Qt={};2&xt&&(Qt.labelId=ct[1]),4&xt&&(Qt.step=ct[2]),H.$set(Qt)},i(ct){X||(Oi(H.$$.fragment,ct),X=!0)},o(ct){yo(H.$$.fragment,ct),X=!1},d(ct){Pa(H,ct)}}}function fr(z){let H,X;return H=new xc({props:{descriptionId:z[0],step:z[2]}}),{c(){li(H.$$.fragment)},m(ct,xt){yi(H,ct,xt),X=!0},p(ct,xt){const Qt={};1&xt&&(Qt.descriptionId=ct[0]),4&xt&&(Qt.step=ct[2]),H.$set(Qt)},i(ct){X||(Oi(H.$$.fragment,ct),X=!0)},o(ct){yo(H.$$.fragment,ct),X=!1},d(ct){Pa(H,ct)}}}function hu(z){let H,X;return H=new Wo({props:{step:z[2]}}),{c(){li(H.$$.fragment)},m(ct,xt){yi(H,ct,xt),X=!0},p(ct,xt){const Qt={};4&xt&&(Qt.step=ct[2]),H.$set(Qt)},i(ct){X||(Oi(H.$$.fragment,ct),X=!0)},o(ct){yo(H.$$.fragment,ct),X=!1},d(ct){Pa(H,ct)}}}function Sh(z){let H,ct,Qt,Yt,X=!$t(z[2].options.title)||z[2].options.cancelIcon&&z[2].options.cancelIcon.enabled,xt=!$t(z[2].options.text),zt=Array.isArray(z[2].options.buttons)&&z[2].options.buttons.length,me=X&&$i(z),ve=xt&&fr(z),Je=zt&&hu(z);return{c(){H=Ir("div"),me&&me.c(),ct=au(),ve&&ve.c(),Qt=au(),Je&&Je.c(),Qi(H,"class","shepherd-content")},m(qe,De){pr(qe,H,De),me&&me.m(H,null),kl(H,ct),ve&&ve.m(H,null),kl(H,Qt),Je&&Je.m(H,null),Yt=!0},p(qe,De){let[un]=De;4&un&&(X=!$t(qe[2].options.title)||qe[2].options.cancelIcon&&qe[2].options.cancelIcon.enabled),X?me?(me.p(qe,un),4&un&&Oi(me,1)):(me=$i(qe),me.c(),Oi(me,1),me.m(H,ct)):me&&(Cs(),yo(me,1,1,()=>{me=null}),Vr()),4&un&&(xt=!$t(qe[2].options.text)),xt?ve?(ve.p(qe,un),4&un&&Oi(ve,1)):(ve=fr(qe),ve.c(),Oi(ve,1),ve.m(H,Qt)):ve&&(Cs(),yo(ve,1,1,()=>{ve=null}),Vr()),4&un&&(zt=Array.isArray(qe[2].options.buttons)&&qe[2].options.buttons.length),zt?Je?(Je.p(qe,un),4&un&&Oi(Je,1)):(Je=hu(qe),Je.c(),Oi(Je,1),Je.m(H,null)):Je&&(Cs(),yo(Je,1,1,()=>{Je=null}),Vr())},i(qe){Yt||(Oi(me),Oi(ve),Oi(Je),Yt=!0)},o(qe){yo(me),yo(ve),yo(Je),Yt=!1},d(qe){qe&&Ba(H),me&&me.d(),ve&&ve.d(),Je&&Je.d()}}}function bc(z,H,X){let{descriptionId:ct,labelId:xt,step:Qt}=H;return z.$$set=zt=>{"descriptionId"in zt&&X(0,ct=zt.descriptionId),"labelId"in zt&&X(1,xt=zt.labelId),"step"in zt&&X(2,Qt=zt.step)},[ct,xt,Qt]}class j_ extends za{constructor(H){super(),sa(this,H,bc,Sh,vs,{descriptionId:0,labelId:1,step:2})}}function um(z){let H;return{c(){H=Ir("div"),Qi(H,"class","shepherd-arrow"),Qi(H,"data-popper-arrow","")},m(X,ct){pr(X,H,ct)},d(X){X&&Ba(H)}}}function dm(z){let H,X,ct,xt,Qt,zt,Yt,me,ve=z[4].options.arrow&&z[4].options.attachTo&&z[4].options.attachTo.element&&z[4].options.attachTo.on&&um();ct=new j_({props:{descriptionId:z[2],labelId:z[3],step:z[4]}});let Je=[{"aria-describedby":xt=$t(z[4].options.text)?null:z[2]},{"aria-labelledby":Qt=z[4].options.title?z[3]:null},z[1],{role:"dialog"},{tabindex:"0"}],qe={};for(let De=0;De<Je.length;De+=1)qe=vh(qe,Je[De]);return{c(){H=Ir("div"),ve&&ve.c(),X=au(),li(ct.$$.fragment),_c(H,qe),Ys(H,"shepherd-has-cancel-icon",z[5]),Ys(H,"shepherd-has-title",z[6]),Ys(H,"shepherd-element",!0)},m(De,un){pr(De,H,un),ve&&ve.m(H,null),kl(H,X),yi(ct,H,null),z[13](H),zt=!0,Yt||(me=ru(H,"keydown",z[7]),Yt=!0)},p(De,un){let[vn]=un;De[4].options.arrow&&De[4].options.attachTo&&De[4].options.attachTo.element&&De[4].options.attachTo.on?ve||(ve=um(),ve.c(),ve.m(H,X)):ve&&(ve.d(1),ve=null);const fi={};4&vn&&(fi.descriptionId=De[2]),8&vn&&(fi.labelId=De[3]),16&vn&&(fi.step=De[4]),ct.$set(fi),_c(H,qe=function Ji(z,H){const X={},ct={},xt={$$scope:1};let Qt=z.length;for(;Qt--;){const zt=z[Qt],Yt=H[Qt];if(Yt){for(const me in zt)me in Yt||(ct[me]=1);for(const me in Yt)xt[me]||(X[me]=Yt[me],xt[me]=1);z[Qt]=Yt}else for(const me in zt)xt[me]=1}for(const zt in ct)zt in X||(X[zt]=void 0);return X}(Je,[(!zt||20&vn&&xt!==(xt=$t(De[4].options.text)?null:De[2]))&&{"aria-describedby":xt},(!zt||24&vn&&Qt!==(Qt=De[4].options.title?De[3]:null))&&{"aria-labelledby":Qt},2&vn&&De[1],{role:"dialog"},{tabindex:"0"}])),Ys(H,"shepherd-has-cancel-icon",De[5]),Ys(H,"shepherd-has-title",De[6]),Ys(H,"shepherd-element",!0)},i(De){zt||(Oi(ct.$$.fragment,De),zt=!0)},o(De){yo(ct.$$.fragment,De),zt=!1},d(De){De&&Ba(H),ve&&ve.d(),Pa(ct),z[13](null),Yt=!1,me()}}}function mm(z){return z.split(" ").filter(H=>!!H.length)}function ks(z,H,X){let De,un,vn,{classPrefix:ct,element:xt,descriptionId:Qt,firstFocusableElement:zt,focusableElements:Yt,labelId:me,lastFocusableElement:ve,step:Je,dataStepId:qe}=H;return function ya(z){Sl().$$.on_mount.push(z)}(()=>{X(1,qe={[`data-${ct}shepherd-step-id`]:Je.id}),X(9,Yt=xt.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]')),X(8,zt=Yt[0]),X(10,ve=Yt[Yt.length-1])}),ys(()=>{vn!==Je.options.classes&&function eo(){(function Ei(Dt){if(St(Dt)){const se=mm(Dt);se.length&&xt.classList.remove(...se)}})(vn),vn=Je.options.classes,function Zo(Dt){if(St(Dt)){const se=mm(Dt);se.length&&xt.classList.add(...se)}}(vn)}()}),z.$$set=Dt=>{"classPrefix"in Dt&&X(11,ct=Dt.classPrefix),"element"in Dt&&X(0,xt=Dt.element),"descriptionId"in Dt&&X(2,Qt=Dt.descriptionId),"firstFocusableElement"in Dt&&X(8,zt=Dt.firstFocusableElement),"focusableElements"in Dt&&X(9,Yt=Dt.focusableElements),"labelId"in Dt&&X(3,me=Dt.labelId),"lastFocusableElement"in Dt&&X(10,ve=Dt.lastFocusableElement),"step"in Dt&&X(4,Je=Dt.step),"dataStepId"in Dt&&X(1,qe=Dt.dataStepId)},z.$$.update=()=>{16&z.$$.dirty&&(X(5,De=Je.options&&Je.options.cancelIcon&&Je.options.cancelIcon.enabled),X(6,un=Je.options&&Je.options.title))},[xt,qe,Qt,me,Je,De,un,Dt=>{const{tour:se}=Je;switch(Dt.keyCode){case 9:if(0===Yt.length){Dt.preventDefault();break}Dt.shiftKey?(document.activeElement===zt||document.activeElement.classList.contains("shepherd-element"))&&(Dt.preventDefault(),ve.focus()):document.activeElement===ve&&(Dt.preventDefault(),zt.focus());break;case 27:se.options.exitOnEsc&&Je.cancel();break;case 37:se.options.keyboardNavigation&&se.back();break;case 39:se.options.keyboardNavigation&&se.next()}},zt,Yt,ve,ct,()=>xt,function Tn(Dt){Pr[Dt?"unshift":"push"](()=>{xt=Dt,X(0,xt)})}]}class pu extends za{constructor(H){super(),sa(this,H,ks,dm,vs,{classPrefix:11,element:0,descriptionId:2,firstFocusableElement:8,focusableElements:9,labelId:3,lastFocusableElement:10,step:4,dataStepId:1,getElement:12})}get getElement(){return this.$$.ctx[12]}}class Xr extends he{constructor(H,X){return void 0===X&&(X={}),super(H,X),this.tour=H,this.classPrefix=this.tour.options?We(this.tour.options.classPrefix):"",this.styles=H.styles,this._resolvedAttachTo=null,xe(this),this._setOptions(X),this}cancel(){this.tour.cancel(),this.trigger("cancel")}complete(){this.tour.complete(),this.trigger("complete")}destroy(){(function td(z){z.cleanup&&z.cleanup(),z.cleanup=null})(this),ft(this.el)&&(this.el.remove(),this.el=null),this._updateStepTargetOnHide(),this.trigger("destroy")}getTour(){return this.tour}hide(){this.tour.modal.hide(),this.trigger("before-hide"),this.el&&(this.el.hidden=!0),this._updateStepTargetOnHide(),this.trigger("hide")}_resolveAttachToOptions(){return this._resolvedAttachTo=function _e(z){const H=z.options.attachTo||{},X=Object.assign({},H);if(yt(X.element)&&(X.element=X.element.call(z)),St(X.element)){try{X.element=document.querySelector(X.element)}catch{}X.element||console.error(`The element for this Shepherd step was not found ${H.element}`)}return X}(this),this._resolvedAttachTo}_getResolvedAttachToOptions(){return null===this._resolvedAttachTo?this._resolveAttachToOptions():this._resolvedAttachTo}isOpen(){return!(!this.el||this.el.hidden)}show(){return yt(this.options.beforeShowPromise)?Promise.resolve(this.options.beforeShowPromise()).then(()=>this._show()):Promise.resolve(this._show())}updateStepOptions(H){Object.assign(this.options,H),this.shepherdElementComponent&&this.shepherdElementComponent.$set({step:this})}getElement(){return this.el}getTarget(){return this.target}_createTooltipContent(){return this.shepherdElementComponent=new pu({target:this.tour.options.stepsContainer||document.body,props:{classPrefix:this.classPrefix,descriptionId:`${this.id}-description`,labelId:`${this.id}-label`,step:this,styles:this.styles}}),this.shepherdElementComponent.getElement()}_scrollTo(H){const{element:X}=this._getResolvedAttachToOptions();yt(this.options.scrollToHandler)?this.options.scrollToHandler(X):function mt(z){return z instanceof Element}(X)&&"function"==typeof X.scrollIntoView&&X.scrollIntoView(H)}_getClassOptions(H){const X=this.tour&&this.tour.options&&this.tour.options.defaultStepOptions,xt=X&&X.classes?X.classes:"",Qt=[...(H.classes?H.classes:"").split(" "),...xt.split(" ")],zt=new Set(Qt);return Array.from(zt).join(" ").trim()}_setOptions(H){void 0===H&&(H={});let X=this.tour&&this.tour.options&&this.tour.options.defaultStepOptions;X=dt({},X||{}),this.options=Object.assign({arrow:!0},X,H,function I_(z,H){return{floatingUIOptions:dt(z.floatingUIOptions||{},H.floatingUIOptions||{})}}(X,H));const{when:ct}=this.options;this.options.classes=this._getClassOptions(H),this.destroy(),this.id=this.options.id||`step-${ye()}`,ct&&Object.keys(ct).forEach(xt=>{this.on(xt,ct[xt],this)})}_setupElements(){$t(this.el)||this.destroy(),this.el=this._createTooltipContent(),this.options.advanceOn&&function Ce(z){const{event:H,selector:X}=z.options.advanceOn||{};if(!H)return console.error("advanceOn was defined, but no event name was passed.");{const ct=function tn(z,H){return X=>{if(H.isOpen()){const ct=H.el&&X.currentTarget===H.el;(!$t(z)&&X.currentTarget.matches(z)||ct)&&H.tour.next()}}}(X,z);let xt;try{xt=document.querySelector(X)}catch{}if(!$t(X)&&!xt)return console.error(`No element was found for the selector supplied to advanceOn: ${X}`);xt?(xt.addEventListener(H,ct),z.on("destroy",()=>xt.removeEventListener(H,ct))):(document.body.addEventListener(H,ct,!0),z.on("destroy",()=>document.body.removeEventListener(H,ct,!0)))}}(this),M_(this)}_show(){this.trigger("before-show"),this._resolveAttachToOptions(),this._setupElements(),this.tour.modal||this.tour._setupModal(),this.tour.modal.setupForStep(this),this._styleTargetElementForStep(this),this.el.hidden=!1,this.options.scrollTo&&setTimeout(()=>{this._scrollTo(this.options.scrollTo)}),this.el.hidden=!1;const H=this.shepherdElementComponent.getElement(),X=this.target||document.body;X.classList.add(`${this.classPrefix}shepherd-enabled`),X.classList.add(`${this.classPrefix}shepherd-target`),H.classList.add("shepherd-enabled"),this.trigger("show")}_styleTargetElementForStep(H){const X=H.target;X&&(H.options.highlightClass&&X.classList.add(H.options.highlightClass),X.classList.remove("shepherd-target-click-disabled"),!1===H.options.canClickTarget&&X.classList.add("shepherd-target-click-disabled"))}_updateStepTargetOnHide(){const H=this.target||document.body;this.options.highlightClass&&H.classList.remove(this.options.highlightClass),H.classList.remove("shepherd-target-click-disabled",`${this.classPrefix}shepherd-enabled`,`${this.classPrefix}shepherd-target`)}}function tr(z){let H,X,ct,xt,Qt;return{c(){H=ou("svg"),X=ou("path"),Qi(X,"d",z[2]),Qi(H,"class",ct=(z[1]?"shepherd-modal-is-visible":"")+" shepherd-modal-overlay-container")},m(zt,Yt){pr(zt,H,Yt),kl(H,X),z[11](H),xt||(Qt=ru(H,"touchmove",z[3]),xt=!0)},p(zt,Yt){let[me]=Yt;4&me&&Qi(X,"d",zt[2]),2&me&&ct!==(ct=(zt[1]?"shepherd-modal-is-visible":"")+" shepherd-modal-overlay-container")&&Qi(H,"class",ct)},i:Ua,o:Ua,d(zt){zt&&Ba(H),z[11](null),xt=!1,Qt()}}}function Mo(z){if(!z)return null;const X=z instanceof HTMLElement&&window.getComputedStyle(z).overflowY;return"hidden"!==X&&"visible"!==X&&z.scrollHeight>=z.clientHeight?z:Mo(z.parentElement)}function hm(z,H,X){let{element:ct,openingProperties:xt}=H;ye();let zt,Yt,Qt=!1;function ve(){X(4,xt={width:0,height:0,x:0,y:0,r:0})}function Je(){X(1,Qt=!1),Ei()}function qe(Tn,Dt,se,ce){if(void 0===Tn&&(Tn=0),void 0===Dt&&(Dt=0),ce){const{y:He,height:An}=function Vo(z,H){const X=z.getBoundingClientRect();let ct=X.y||X.top,xt=X.bottom||ct+X.height;if(H){const zt=H.getBoundingClientRect(),Yt=zt.y||zt.top,me=zt.bottom||Yt+zt.height;ct=Math.max(ct,Yt),xt=Math.min(xt,me)}return{y:ct,height:Math.max(xt-ct,0)}}(ce,se),{x:zn,width:Yi,left:gi}=ce.getBoundingClientRect();X(4,xt={width:Yi+2*Tn,height:An+2*Tn,x:(zn||gi)-Tn,y:He-Tn,r:Dt})}else ve()}function un(){X(1,Qt=!0)}ve();const vn=Tn=>{Tn.preventDefault()};function Ei(){zt&&(cancelAnimationFrame(zt),zt=void 0),window.removeEventListener("touchmove",vn,{passive:!1})}return z.$$set=Tn=>{"element"in Tn&&X(0,ct=Tn.element),"openingProperties"in Tn&&X(4,xt=Tn.openingProperties)},z.$$.update=()=>{16&z.$$.dirty&&X(2,Yt=function r1(z){let{width:H,height:X,x:ct=0,y:xt=0,r:Qt=0}=z;const{innerWidth:zt,innerHeight:Yt}=window,{topLeft:me=0,topRight:ve=0,bottomRight:Je=0,bottomLeft:qe=0}="number"==typeof Qt?{topLeft:Qt,topRight:Qt,bottomRight:Qt,bottomLeft:Qt}:Qt;return`M${zt},${Yt}H0V0H${zt}V${Yt}ZM${ct+me},${xt}a${me},${me},0,0,0-${me},${me}V${X+xt-qe}a${qe},${qe},0,0,0,${qe},${qe}H${H+ct-Je}a${Je},${Je},0,0,0,${Je}-${Je}V${xt+ve}a${ve},${ve},0,0,0-${ve}-${ve}Z`}(xt))},[ct,Qt,Yt,Tn=>{Tn.stopPropagation()},xt,()=>ct,ve,Je,qe,function De(Tn){Ei(),Tn.tour.options.useModalOverlay?(function Zo(Tn){const{modalOverlayOpeningPadding:Dt,modalOverlayOpeningRadius:se}=Tn.options,ce=Mo(Tn.target),He=()=>{zt=void 0,qe(Dt,se,ce,Tn.target),zt=requestAnimationFrame(He)};He(),function eo(){window.addEventListener("touchmove",vn,{passive:!1})}()}(Tn),un()):Je()},un,function so(Tn){Pr[Tn?"unshift":"push"](()=>{ct=Tn,X(0,ct)})}]}class Ha extends za{constructor(H){super(),sa(this,H,hm,tr,vs,{element:0,openingProperties:4,getElement:5,closeModalOpening:6,hide:7,positionModal:8,setupForStep:9,show:10})}get getElement(){return this.$$.ctx[5]}get closeModalOpening(){return this.$$.ctx[6]}get hide(){return this.$$.ctx[7]}get positionModal(){return this.$$.ctx[8]}get setupForStep(){return this.$$.ctx[9]}get show(){return this.$$.ctx[10]}}const ts=new he,pm=typeof window>"u";class rd{constructor(){}}function l1(z){const{classes:H,disabled:X,label:ct,secondary:xt,type:Qt,text:zt}=z;if(!Qt)return z;if(-1===["back","cancel","next"].indexOf(Qt))throw new Error("'type' property must be one of 'back', 'cancel', or 'next'");return{action:this[Qt].bind(this),classes:H,disabled:X,label:ct,secondary:xt,text:zt}}Object.assign(ts,pm?{Tour:rd,Step:rd}:{Tour:class yc extends he{constructor(H){return void 0===H&&(H={}),super(H),xe(this),this.options=Object.assign({},{exitOnEsc:!0,keyboardNavigation:!0},H),this.classPrefix=We(this.options.classPrefix),this.steps=[],this.addSteps(this.options.steps),["active","cancel","complete","inactive","show","start"].map(xt=>{(Qt=>{this.on(Qt,zt=>{(zt=zt||{}).tour=this,ts.trigger(Qt,zt)})})(xt)}),this._setTourID(),this}addStep(H,X){let ct=H;return ct instanceof Xr?ct.tour=this:ct=new Xr(this,ct),$t(X)?this.steps.push(ct):this.steps.splice(X,0,ct),ct}addSteps(H){return Array.isArray(H)&&H.forEach(X=>{this.addStep(X)}),this}back(){const H=this.steps.indexOf(this.currentStep);this.show(H-1,!1)}cancel(){this.options.confirmCancel?window.confirm(this.options.confirmCancelMessage||"Are you sure you want to stop the tour?")&&this._done("cancel"):this._done("cancel")}complete(){this._done("complete")}getById(H){return this.steps.find(X=>X.id===H)}getCurrentStep(){return this.currentStep}hide(){const H=this.getCurrentStep();if(H)return H.hide()}isActive(){return ts.activeTour===this}next(){const H=this.steps.indexOf(this.currentStep);H===this.steps.length-1?this.complete():this.show(H+1,!0)}removeStep(H){const X=this.getCurrentStep();this.steps.some((ct,xt)=>{if(ct.id===H)return ct.isOpen()&&ct.hide(),ct.destroy(),this.steps.splice(xt,1),!0}),X&&X.id===H&&(this.currentStep=void 0,this.steps.length?this.show(0):this.cancel())}show(H,X){void 0===H&&(H=0),void 0===X&&(X=!0);const ct=St(H)?this.getById(H):this.steps[H];ct&&(this._updateStateBeforeShow(),yt(ct.options.showOn)&&!ct.options.showOn()?this._skipStep(ct,X):(this.trigger("show",{step:ct,previous:this.currentStep}),this.currentStep=ct,ct.show()))}start(){this.trigger("start"),this.focusedElBeforeOpen=document.activeElement,this.currentStep=null,this._setupModal(),this._setupActiveTour(),this.next()}_done(H){const X=this.steps.indexOf(this.currentStep);if(Array.isArray(this.steps)&&this.steps.forEach(ct=>ct.destroy()),function F_(z){if(z){const{steps:H}=z;H.forEach(X=>{X.options&&!1===X.options.canClickTarget&&X.options.attachTo&&X.target instanceof HTMLElement&&X.target.classList.remove("shepherd-target-click-disabled")})}}(this),this.trigger(H,{index:X}),ts.activeTour=null,this.trigger("inactive",{tour:this}),this.modal&&this.modal.hide(),("cancel"===H||"complete"===H)&&this.modal){const ct=document.querySelector(".shepherd-modal-overlay-container");ct&&ct.remove()}ft(this.focusedElBeforeOpen)&&this.focusedElBeforeOpen.focus()}_setupActiveTour(){this.trigger("active",{tour:this}),ts.activeTour=this}_setupModal(){this.modal=new Ha({target:this.options.modalContainer||document.body,props:{classPrefix:this.classPrefix,styles:this.styles}})}_skipStep(H,X){const ct=this.steps.indexOf(H);ct===this.steps.length-1?this.complete():this.show(X?ct+1:ct-1,X)}_updateStateBeforeShow(){this.currentStep&&this.currentStep.hide(),this.isActive()||this._setupActiveTour()}_setTourID(){this.id=`${this.options.tourName||"tour"}--${ye()}`}},Step:Xr});let c1=(()=>{class z{constructor(){this.confirmCancel=!1,this.confirmCancelMessage=null,this.defaultStepOptions={},this.errorTitle=null,this.isActive=!1,this.keyboardNavigation=!0,this.messageForUser=null,this.modal=!1,this.requiredElements=[],this.tourName=void 0,this.tourObject=null,this.exitOnEsc=!0}back(){this.tourObject.back()}cancel(){this.tourObject.cancel()}complete(){this.tourObject.complete()}hide(){this.tourObject.hide()}next(){this.tourObject.next()}show(X){this.tourObject.show(X)}start(){this.isActive=!0,this.tourObject.start()}onTourFinish(X){this.isActive=!1}addSteps(X){this._initialize();const ct=this.tourObject;if(X&&Array.isArray(X)&&0!==X.length){if(!this.requiredElementsPresent())return void ct.addStep({buttons:[{text:"Exit",action:ct.cancel}],id:"error",title:this.errorTitle,text:[this.messageForUser]});X.forEach(xt=>{xt.buttons&&(xt.buttons=xt.buttons.map(l1.bind(this),this)),ct.addStep(xt)})}}requiredElementsPresent(){let X=!0;return this.requiredElements.forEach(ct=>{const xt=document.querySelector(ct.selector);X&&(!xt||function s1(z){return 0===z.offsetWidth&&0===z.offsetHeight}(xt))&&(X=!1,this.errorTitle=ct.title,this.messageForUser=ct.message)}),X}_initialize(){const X=new ts.Tour({confirmCancel:this.confirmCancel,confirmCancelMessage:this.confirmCancelMessage,defaultStepOptions:this.defaultStepOptions,keyboardNavigation:this.keyboardNavigation,tourName:this.tourName,useModalOverlay:this.modal,exitOnEsc:this.exitOnEsc});X.on("complete",this.onTourFinish.bind(this,"complete")),X.on("cancel",this.onTourFinish.bind(this,"cancel")),this.tourObject=X}}return z.\u0275fac=function(X){return new(X||z)},z.\u0275prov=D.Yz7({token:z,factory:z.\u0275fac,providedIn:"root"}),z})()},71002:(Zt,K,M)=>{"use strict";function D(f){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function($){return typeof $}:function($){return $&&"function"==typeof Symbol&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $})(f)}M.d(K,{Z:()=>D})}}]);