(self.webpackChunkBalacoClient=self.webpackChunkBalacoClient||[]).push([[1144],{92865:(A,H,c)=>{"use strict";c.r(H),c.d(H,{HomeworkFrontModule:()=>rn});var w=c(54460),b=c(10936),R=c(89163),g=c(65162),j=c(69223),C=c(15343),k=c(13763),y=c(25571),z=c(5502),_=c(46584),h=c(70050),M=c(7050),f=c(76407),I=c(91100),X=c(43234),U=c(1133),B=c(34158),P=c(59640),e=c(26860),L=c(97924);let re=(()=>{class n extends P.H{ngOnInit(){super.ngOnInit(),this.checkVipAccountService.loadAdsScriptInStudent(this.isBusinessDomain)}constructor(t){super(),this.checkVipAccountService=t}static#e=this.\u0275fac=function(i){return new(i||n)(e.rXU(L.K))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-test-dashboard"]],features:[e.Vt3],decls:2,vars:0,consts:[["id","homework-frontend-layout"]],template:function(i,o){1&i&&(e.j41(0,"div",0),e.nrm(1,"router-outlet"),e.k0s())},dependencies:[g.n3],encapsulation:2})}return n})();var V=c(73014),Q=c(27691),se=c(76627),O=c(64198),ae=c(53043),le=c(33887),ce=c(39307),D=c(73437);function me(n,s){if(1&n){const t=e.RV6();e.j41(0,"div",9)(1,"button",10),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.redirectToRegister())}),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()}2&n&&(e.R7$(2),e.SpI(" ",e.bMT(3,1,"lang_button_register")," "))}function de(n,s){1&n&&(e.j41(0,"div",11)(1,"p",12),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()),2&n&&(e.R7$(2),e.SpI("",e.bMT(3,1,"lang_homework_homework_frontend_submit_homework_have_account"),"?"))}const ue=function(){return{"mr-2 text-pending":!0}};let _e=(()=>{class n extends le._{confirmQuit(){this.dialogRef.close(!0)}redirectToRegister(){this.redirectService.redirectRegisterForStudent(),this.dialogRef.close()}redirectToLogin(){this.redirectService.redirectToLoginBackLinkWithFromRegister(`${this.router.url}`),this.dialogRef.close()}ngOnInit(){super.ngOnInit()}constructor(t,i,o,r){super(r,o),this.router=t,this.redirectService=i,this.dialogRef=o,this.data=r}static#e=this.\u0275fac=function(i){return new(i||n)(e.rXU(g.Ix),e.rXU(ce.m),e.rXU(R.CP,8),e.rXU(R.Vh,8))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-message-dialog"]],features:[e.Vt3],decls:13,vars:11,consts:[[1,"box","p-5",2,"min-width","400px"],[1,"border-slate-200/60","dark:border-darkmode-400","text-center"],[1,"p-5"],[1,"text-md","font-medium","flex","items-center"],["name","badge-info",3,"size","ngClass"],["class","mx-auto mt-2",4,"ngIf"],["class","mb-2 text-md font-medium mt-2",4,"ngIf"],[1,"mx-auto"],["azt-track-service","message-dialog-VmueIbouAH",1,"btn","w-24","btn-primary",3,"click"],[1,"mx-auto","mt-2"],["azt-track-service","message-dialog-mbvZs1BXU4",1,"btn","w-24","btn-primary",3,"click"],[1,"mb-2","text-md","font-medium","mt-2"],[1,"text-xs","text-slate-500","dark:text-slate-400"]],template:function(i,o){1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),e.nrm(4,"lucide-icon",4),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s(),e.DNE(7,me,4,3,"div",5),e.DNE(8,de,4,3,"div",6),e.j41(9,"div",7)(10,"button",8),e.bIt("click",function(){return o.redirectToLogin()}),e.EFF(11),e.nI1(12,"mytranslate"),e.k0s()()()()()),2&i&&(e.R7$(4),e.Y8G("size",24)("ngClass",e.lJ4(10,ue)),e.R7$(1),e.SpI(" ",e.bMT(6,6,o.isBusinessDomain?"lang_business_homework_frontend_submit_homework_register_account_submit":"lang_homework_homework_frontend_submit_homework_register_account_submit")," "),e.R7$(2),e.Y8G("ngIf",!o.isBusinessDomain),e.R7$(1),e.Y8G("ngIf",!o.isBusinessDomain),e.R7$(3),e.SpI(" ",e.bMT(12,8,"lang_button_login")," "))},dependencies:[w.YU,w.bT,C.WGl,D.wp],encapsulation:2})}return n})();var he=c(63709),pe=c(58227),$=c(62040),ge=c(41426),J=c(51113),fe=c(36484),be=c(91640),we=c(46899),Z=c(47712),W=c(66729),ve=c(78745),ke=c(52811),je=c(9570),ye=c(47952),xe=c(94743),Oe=c(69715);function Se(n,s){if(1&n){const t=e.RV6();e.j41(0,"a",14),e.bIt("click",function(){e.eBV(t);const o=e.XpG().$implicit,r=e.XpG(2);return e.Njj(r.viewDetailHistory(null==o?null:o.id))}),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()}2&n&&(e.R7$(1),e.JRh(e.bMT(2,1,"lang_auto_xem_chi_tiet")))}const q=function(){return{"mr-1":!0}};function Ce(n,s){if(1&n){const t=e.RV6();e.j41(0,"div",17)(1,"a",18),e.bIt("click",function(){const r=e.eBV(t).$implicit,d=e.XpG(4);return e.Njj(d.onShowFile(r,-1))}),e.nrm(2,"lucide-icon",19),e.j41(3,"span",20),e.EFF(4),e.k0s()()()}if(2&n){const t=s.$implicit;e.R7$(2),e.Y8G("ngClass",e.lJ4(3,q)),e.R7$(1),e.Y8G("title",t.name),e.R7$(1),e.JRh(t.name)}}function Me(n,s){if(1&n&&(e.j41(0,"div",15),e.DNE(1,Ce,5,4,"div",16),e.k0s()),2&n){const t=e.XpG().$implicit;e.R7$(1),e.Y8G("ngForOf",t.fileParse)}}function Ie(n,s){if(1&n){const t=e.RV6();e.j41(0,"div",17)(1,"a",23),e.bIt("click",function(){const r=e.eBV(t).$implicit,d=e.XpG(5);return e.Njj(d.onShowFile(r,-1))}),e.nrm(2,"lucide-icon",24),e.j41(3,"span",20),e.EFF(4),e.k0s()()()}if(2&n){const t=s.$implicit;e.R7$(2),e.Y8G("ngClass",e.lJ4(3,q)),e.R7$(1),e.Y8G("title",t.name),e.R7$(1),e.JRh(t.name)}}function Fe(n,s){if(1&n&&(e.j41(0,"div",15),e.DNE(1,Ie,5,4,"div",16),e.k0s()),2&n){const t=e.XpG(2).$implicit;e.R7$(1),e.Y8G("ngForOf",t.fileParse)}}function Te(n,s){if(1&n&&(e.j41(0,"p",8),e.nrm(1,"azt-check-mark",31),e.k0s()),2&n){const t=e.XpG(3).$implicit;e.R7$(1),e.Y8G("mark",t.point)}}function De(n,s){if(1&n&&(e.j41(0,"div",25)(1,"div",26),e.DNE(2,Te,2,1,"p",27),e.k0s(),e.j41(3,"div",28)(4,"span",29),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s(),e.nrm(7,"div",30),e.k0s()()),2&n){const t=e.XpG(2).$implicit;e.R7$(2),e.Y8G("ngIf",!t.hideMark),e.R7$(3),e.JRh(e.bMT(6,3,"lang_homework_homework_frontend_utils_comment")),e.R7$(2),e.Y8G("innerHTML",t.note,e.npT)}}function Ee(n,s){if(1&n&&(e.j41(0,"div",21),e.DNE(1,Fe,2,1,"div",12),e.DNE(2,De,8,5,"div",22),e.k0s()),2&n){const t=e.XpG().$implicit;e.R7$(1),e.Y8G("ngIf",t.fileParse&&t.fileParse.length>0),e.R7$(1),e.Y8G("ngIf",null!=t&&null!=t.confirmedAt)}}function Re(n,s){if(1&n&&(e.j41(0,"div",6)(1,"div",7)(2,"span",8),e.EFF(3),e.nI1(4,"mytranslate"),e.nI1(5,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.k0s(),e.DNE(6,Se,3,3,"a",9),e.k0s(),e.j41(7,"div",7)(8,"span",10),e.EFF(9),e.nI1(10,"mytranslate"),e.j41(11,"span",11),e.EFF(12),e.k0s()()(),e.DNE(13,Me,2,1,"div",12),e.DNE(14,Ee,3,2,"div",13),e.k0s()),2&n){const t=s.$implicit;e.R7$(3),e.Lme("",e.bMT(4,7,"lang_auto_nop_luc"),": ",e.bMT(5,9,t.createdAt),""),e.R7$(3),e.Y8G("ngIf",t.result),e.R7$(3),e.SpI("",e.bMT(10,11,"lang_homework_homework_frontend_utils_request_submit"),": "),e.R7$(3),e.JRh(t.resendNote),e.R7$(1),e.Y8G("ngIf",!t.result&&t.files),e.R7$(1),e.Y8G("ngIf",t.result)}}function He(n,s){if(1&n&&(e.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"span",4),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()()(),e.DNE(6,Re,15,13,"div",5),e.k0s()),2&n){const t=e.XpG();e.R7$(4),e.JRh(e.bMT(5,2,"lang_homework_homework_frontend_utils_history_submit")),e.R7$(2),e.Y8G("ngForOf",t.dataAnswerHistory)}}let Pe=(()=>{class n extends P.H{viewDetailHistory(t){this.commonService.myNavigation("/homework/switch-view-homework/"+this.dataHomeworkObj?.id+"/"+this.dataHomeworkObj?.hashId+"/"+t)}onFileClose(){this.isShowPreviewFile=!1}onShowFile(t,i){this.isShowPreviewFile=!0;let o={...t,index:i};this.previewFileEmit.emit(o)}constructor(){super(),this.previewFileEmit=new e.bkB,this.isShowPreviewFile=!1,this.answerFile=null}static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-answer-history"]],inputs:{dataAnswerHistory:"dataAnswerHistory",dataHomeworkObj:"dataHomeworkObj"},outputs:{previewFileEmit:"previewFileEmit"},features:[e.Vt3],decls:1,vars:1,consts:[["class","card-box mt-3",4,"ngIf"],[1,"card-box","mt-3"],[1,"row","top-row"],[1,"col-12","text-center"],[1,"h5","text-white"],["class","ml-0 mr-0 mt-4 attach-container p-2",4,"ngFor","ngForOf"],[1,"ml-0","mr-0","mt-4","attach-container","p-2"],[1,"flex-title","mt-2","pl-3","pr-3"],[1,"mb-0"],["azt-track-service","answer-history-oWctyE3L2bg",3,"click",4,"ngIf"],[1,"mb-0",2,"font-weight","400"],[1,"text-danger","text-bold"],["class","row ml-0 mr-0 mt-1 mb-1 pb-3 pt-3 attach-container",4,"ngIf"],["class","mt-2",4,"ngIf"],["azt-track-service","answer-history-oWctyE3L2bg",3,"click"],[1,"row","ml-0","mr-0","mt-1","mb-1","pb-3","pt-3","attach-container"],["class","col-6 col-sm-6 col-md-4 col-xl-2 col-lg-2",4,"ngFor","ngForOf"],[1,"col-6","col-sm-6","col-md-4","col-xl-2","col-lg-2"],["azt-track-service","answer-history--J0jh8HNJVI","target","_blank",1,"dz-clickable",2,"display","flex","margin-top","3px","font-size","14px",3,"click"],["name","paperclip","size","20",3,"ngClass"],[1,"truncate",2,"line-height","1.6",3,"title"],[1,"mt-2"],["class","row justify-content-between mt-2","style","margin: 16px!important;",4,"ngIf"],["azt-track-service","answer-history-F80xamrrLdV","target","_blank",1,"dz-clickable",2,"display","flex","margin-top","3px","font-size","14px",3,"click"],["name","paperclip","size","24",3,"ngClass"],[1,"row","justify-content-between","mt-2",2,"margin","16px!important"],[1,"col-sm-3","col-md-3","col-lg-3","_col-left_result","text-center"],["class","mb-0",4,"ngIf"],[1,"col-sm-8","col-md-8","col-lg-8","_col-right_result"],[1,"h5","title"],[1,"content-homework","pt-3",3,"innerHTML"],[3,"mark"]],template:function(i,o){1&i&&e.DNE(0,He,7,4,"div",0),2&i&&e.Y8G("ngIf",o.dataAnswerHistory&&o.dataAnswerHistory.length>0)},dependencies:[w.YU,w.Sq,w.bT,W.D,C.WGl,D.wp,D.bH],styles:[".card-box[_ngcontent-%COMP%]{width:100%;border:1px solid rgb(0,167,208);border-radius:3px}.top-row[_ngcontent-%COMP%]{background-color:#00a7d0;margin:0;padding:10px}.attach-container[_ngcontent-%COMP%]{margin:16px!important;background:#f1f1f1;padding:10px 0 0;border-radius:5px;border:1px solid #e8e8e8}@font-face{font-family:handwriting_font;src:url(https://239114911.e.cdneverest.net/cdnazota/storage_public/azota_assets/fonts/HP0015HB.ttf)}._col-left[_ngcontent-%COMP%]{border:1px dashed #d3d5d8;background-color:#f1f1f1;line-height:1;padding:35px}._col-left[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:5rem;color:#ff0024}._col-right[_ngcontent-%COMP%]{border:1px dashed #d3d5d8;background-color:#f1f1f1;position:relative;padding:10px}._col-right[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{position:absolute;top:-10px;left:20px;background-color:#f1f1f1}._col-right[_ngcontent-%COMP%]   .content-homework[_ngcontent-%COMP%]{color:red;line-height:1.4;font-size:20px;font-family:handwriting_font!important}._col-left_result[_ngcontent-%COMP%]{border:1px dashed #d3d5d8;background-color:#f1f1f1;line-height:1;padding:10px}._col-left_result[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:3rem;color:#ff0024}._col-right_result[_ngcontent-%COMP%]{border:1px dashed #d3d5d8;background-color:#f1f1f1;position:relative;padding:10px}._col-right_result[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{position:absolute;top:-10px;left:20px;background-color:#f1f1f1}._col-right_result[_ngcontent-%COMP%]   .content-homework[_ngcontent-%COMP%]{color:red;font-size:16px;line-height:1.4;font-family:handwriting_font!important}.flex-title[_ngcontent-%COMP%]{display:flex;align-items:center}.flex-title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#00a7d0;cursor:pointer;margin-left:5px}.files[_ngcontent-%COMP%]{cursor:pointer}.testbank[_ngcontent-%COMP%]{padding-top:40px;text-align:left}.testbank__title[_ngcontent-%COMP%]{font-size:large;font-weight:500}.testbank_fileitem[_ngcontent-%COMP%]{display:flex;color:#00a7d0;margin-top:15px}.testbank_fileitem_icon[_ngcontent-%COMP%]{margin-right:5px}.testbank_fileitem_name[_ngcontent-%COMP%]{margin-right:10px}.testbank_fileitem_info_resualt[_ngcontent-%COMP%]{color:#000;font-weight:500;font-size:small;margin-right:15px}.testbank_fileitem_info_time[_ngcontent-%COMP%]{color:#9d9d9d}.testbank_fileitem_info_btn_submit[_ngcontent-%COMP%]{text-transform:uppercase;cursor:pointer;font-weight:500}.student_obj[_ngcontent-%COMP%]{padding:5px;min-height:69px}"]})}return n})();function Ge(n,s){if(1&n&&e.eu8(0,9),2&n){e.XpG();const t=e.sdS(6);e.Y8G("ngTemplateOutlet",t)}}function $e(n,s){if(1&n&&e.eu8(0,9),2&n){e.XpG();const t=e.sdS(8);e.Y8G("ngTemplateOutlet",t)}}function Le(n,s){if(1&n&&e.eu8(0,9),2&n){e.XpG();const t=e.sdS(12);e.Y8G("ngTemplateOutlet",t)}}function Ne(n,s){if(1&n&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.nI1(3,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.k0s()),2&n){const t=e.XpG(2);e.R7$(1),e.SpI(" ",e.bMT(2,1,"lang_homework_frontend_come_back_at")+e.bMT(3,3,null==t.obj||null==t.obj.homeworkObj?null:t.obj.homeworkObj.startDate)," ")}}function Ae(n,s){if(1&n&&(e.j41(0,"div",10)(1,"div",11),e.nrm(2,"azt-svg-icon",12),e.j41(3,"div",13),e.EFF(4),e.nI1(5,"mytranslate"),e.DNE(6,Ne,4,5,"span",14),e.k0s()()()),2&n){const t=e.XpG();e.R7$(2),e.Y8G("size",84),e.R7$(2),e.SpI(" ",e.bMT(5,3,t.statusObj.errorMessage)," "),e.R7$(2),e.Y8G("ngIf","lang_core_not_start_homework_obj"==t.statusObj.errorMessage&&(null==t.obj||null==t.obj.homeworkObj?null:t.obj.homeworkObj.startDate))}}const ze=function(n){return{joinByHomeworkHashId:n}};function Ye(n,s){if(1&n){const t=e.RV6();e.j41(0,"div",15)(1,"div",16)(2,"div",17),e.eu8(3,9),e.k0s(),e.j41(4,"div",18)(5,"app-join-classroom-box",19),e.bIt("selectStudentEvent",function(o){e.eBV(t);const r=e.XpG();return e.Njj(r.selectStudentEvent(o))}),e.k0s()()()()}if(2&n){const t=e.XpG(),i=e.sdS(10);e.R7$(3),e.Y8G("ngTemplateOutlet",i),e.R7$(2),e.Y8G("joinClassroomByType",e.eq3(2,ze,null==t.obj||null==t.obj.homeworkObj?null:t.obj.homeworkObj.hashId))}}const Y=function(){return{"mr-2":!0}};function Be(n,s){if(1&n&&(e.j41(0,"div",20)(1,"h3",21),e.EFF(2),e.k0s(),e.j41(3,"div",22),e.nrm(4,"azt-download-qr-code",23),e.k0s()(),e.j41(5,"div",24)(6,"span",20),e.nrm(7,"lucide-icon",25),e.EFF(8),e.nI1(9,"mytranslate"),e.j41(10,"span",26),e.EFF(11),e.k0s()()()),2&n){const t=e.XpG();e.R7$(2),e.SpI(" ",null==t.obj||null==t.obj.homeworkObj?null:t.obj.homeworkObj.name," "),e.R7$(2),e.Y8G("fileName","azota_submit_homework_qrcode_"+(null==t.obj||null==t.obj.homeworkObj?null:t.obj.homeworkObj.hashId))("linkUrl",t.copyLinkToClipboard()),e.R7$(3),e.Y8G("ngClass",e.lJ4(8,Y)),e.R7$(1),e.SpI(" ",e.bMT(9,6,"lang_homework_homework_frontend_submit_homework_code_homework")+": "," "),e.R7$(3),e.JRh(null==t.obj||null==t.obj.homeworkObj?null:t.obj.homeworkObj.hashId)}}function Ve(n,s){if(1&n&&(e.j41(0,"div",24)(1,"span",20),e.nrm(2,"lucide-icon",45),e.EFF(3),e.nI1(4,"mytranslate"),e.j41(5,"span",29),e.EFF(6),e.k0s()()()),2&n){const t=e.XpG(2);e.R7$(2),e.Y8G("ngClass",e.lJ4(5,Y)),e.R7$(1),e.SpI(" ",e.bMT(4,3,"lang_auto_ten_hoc_sinh")+":"," "),e.R7$(3),e.SpI(" ",t.currentChild.fullName," ")}}function Xe(n,s){if(1&n&&(e.j41(0,"div",46)(1,"span",20),e.nrm(2,"lucide-icon",47),e.EFF(3),e.nI1(4,"mytranslate"),e.j41(5,"span",29),e.EFF(6),e.nI1(7,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.k0s()()()),2&n){const t=e.XpG(2);e.R7$(2),e.Y8G("ngClass",e.lJ4(7,Y)),e.R7$(1),e.SpI(" ",e.bMT(4,3,"lang_auto_bat_dau_nop")+":"," "),e.R7$(3),e.SpI(" ",e.bMT(7,5,null==t.obj||null==t.obj.homeworkObj?null:t.obj.homeworkObj.startDate)," ")}}function Ue(n,s){if(1&n&&(e.j41(0,"span",29),e.EFF(1),e.nI1(2,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.k0s()),2&n){const t=e.XpG(2);e.R7$(1),e.JRh(e.bMT(2,1,null==t.obj||null==t.obj.homeworkObj?null:t.obj.homeworkObj.deadline))}}function Je(n,s){1&n&&(e.j41(0,"span",29),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&n&&(e.R7$(1),e.JRh(e.bMT(2,1,"lang_homework_homework_frontend_submit_homework_not_time")))}function We(n,s){if(1&n&&(e.nrm(0,"img",56),e.nI1(1,"mycdn")),2&n){const t=e.XpG().$implicit;e.Y8G("src",e.bMT(1,1,t.url),e.B4B)}}function Ke(n,s){if(1&n&&(e.nrm(0,"img",56),e.nI1(1,"convertCdnLinkOfGitHub")),2&n){const t=e.XpG().$implicit,i=e.XpG(2);e.Y8G("src",e.bMT(1,1,i.getFileIcon(t)),e.B4B)}}function Qe(n,s){if(1&n){const t=e.RV6();e.j41(0,"div",48)(1,"div",49)(2,"a",50),e.bIt("click",function(){const r=e.eBV(t).$implicit,d=e.XpG(2);return e.Njj(d.onShowFile(r,-1))}),e.j41(3,"div",51),e.DNE(4,We,2,3,"img",52),e.DNE(5,Ke,2,3,"img",52),e.k0s(),e.j41(6,"div",53)(7,"p",54),e.EFF(8),e.k0s(),e.j41(9,"div",55),e.EFF(10),e.k0s()()()()()}if(2&n){const t=s.$implicit,i=e.XpG(2);let o,r;e.R7$(4),e.Y8G("ngIf",null==t.mimes?null:t.mimes.includes("image")),e.R7$(1),e.Y8G("ngIf",!(null!=t.mimes&&t.mimes.includes("image"))),e.R7$(2),e.Y8G("matTooltip",null!==(o=t.name)&&void 0!==o?o:""),e.R7$(1),e.JRh(t.name),e.R7$(2),e.JRh(i.getFileType(null!==(r=t.mimes)&&void 0!==r?r:""))}}function Ze(n,s){if(1&n&&(e.qex(0),e.eu8(1,9),e.bVm()),2&n){e.XpG(2);const t=e.sdS(14);e.R7$(1),e.Y8G("ngTemplateOutlet",t)}}function qe(n,s){if(1&n&&e.eu8(0,9),2&n){e.XpG(2);const t=e.sdS(16);e.Y8G("ngTemplateOutlet",t)}}function et(n,s){if(1&n){const t=e.RV6();e.j41(0,"div",15)(1,"div",27),e.eu8(2,9),e.j41(3,"div",24)(4,"span",20),e.nrm(5,"lucide-icon",28),e.EFF(6),e.nI1(7,"mytranslate"),e.j41(8,"span",29),e.EFF(9),e.k0s()()(),e.DNE(10,Ve,7,6,"div",30),e.j41(11,"div",31),e.DNE(12,Xe,8,8,"div",32),e.j41(13,"div",33)(14,"span",20),e.nrm(15,"lucide-icon",34),e.EFF(16),e.nI1(17,"mytranslate"),e.DNE(18,Ue,3,3,"span",35),e.DNE(19,Je,3,3,"span",35),e.k0s()()()(),e.j41(20,"div",17)(21,"div",36),e.nrm(22,"azt-dynamic-hook",37),e.k0s(),e.j41(23,"div",38)(24,"div",39),e.DNE(25,Qe,11,5,"div",40),e.k0s()()(),e.j41(26,"div",41),e.DNE(27,Ze,2,1,"ng-container",42),e.DNE(28,qe,1,1,"ng-template",null,43,e.C5r),e.j41(30,"app-answer-history",44),e.bIt("previewFileEmit",function(o){e.eBV(t);const r=e.XpG();return e.Njj(r.onShowFile(o,0))}),e.k0s()()()}if(2&n){const t=e.sdS(29),i=e.XpG(),o=e.sdS(10);let r;e.R7$(2),e.Y8G("ngTemplateOutlet",o),e.R7$(3),e.Y8G("ngClass",e.lJ4(20,Y)),e.R7$(1),e.SpI(" ",e.bMT(7,16,"lang_auto_lop")+": "," "),e.R7$(3),e.SpI(" ",i.currentChild||null!=i.obj&&null!=i.obj.classroomObj&&i.obj.classroomObj.name?null==i.obj||null==i.obj.classroomObj?null:i.obj.classroomObj.name:""," "),e.R7$(1),e.Y8G("ngIf",i.currentChild),e.R7$(2),e.Y8G("ngIf",null==i.obj||null==i.obj.homeworkObj?null:i.obj.homeworkObj.startDate),e.R7$(3),e.Y8G("ngClass",e.lJ4(21,Y)),e.R7$(1),e.SpI(" ",e.bMT(17,18,"lang_homework_homework_frontend_submit_homework_dealine"),":\xa0 "),e.R7$(2),e.Y8G("ngIf",null!=(null==i.obj||null==i.obj.homeworkObj?null:i.obj.homeworkObj.deadline)),e.R7$(1),e.Y8G("ngIf",null==(null==i.obj||null==i.obj.homeworkObj?null:i.obj.homeworkObj.deadline)),e.R7$(3),e.Y8G("content",null!==(r=null==i.obj||null==i.obj.homeworkObj?null:i.obj.homeworkObj.content)&&void 0!==r?r:""),e.R7$(3),e.Y8G("ngForOf",i.files),e.R7$(2),e.Y8G("ngIf",null==i.answerObj||null==i.answerObj.confirmedAt)("ngIfElse",t),e.R7$(3),e.Y8G("dataAnswerHistory",i.answerHistory)("dataHomeworkObj",null==i.obj?null:i.obj.homeworkObj)}}function tt(n,s){1&n&&(e.j41(0,"div",66)(1,"div",67)(2,"div",68)(3,"span"),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()()()()),2&n&&(e.R7$(4),e.SpI("",e.bMT(5,1,"lang_homework_homework_frontend_submit_homework_note_teacher_mark"),"!"))}function nt(n,s){1&n&&(e.j41(0,"div",69)(1,"h5",70),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()),2&n&&(e.R7$(2),e.SpI("",e.bMT(3,1,"lang_homework_homework_frontend_submit_homework_loading_wait_it"),"!"))}function it(n,s){if(1&n&&(e.j41(0,"div",73)(1,"h5",74),e.EFF(2),e.k0s(),e.j41(3,"div",75),e.nrm(4,"progress",76),e.k0s()()),2&n){const t=s.$implicit;e.R7$(2),e.JRh(t.fileName),e.R7$(2),e.FS9("value",t.uploadProgress)}}function ot(n,s){if(1&n&&(e.j41(0,"div",71),e.DNE(1,it,5,2,"div",72),e.k0s()),2&n){const t=e.XpG(3);e.R7$(1),e.Y8G("ngForOf",t.convertObjToArray(t.fileUploadQueue))}}function rt(n,s){1&n&&(e.j41(0,"div",69)(1,"h5",77),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()),2&n&&(e.R7$(2),e.SpI("",e.bMT(3,1,"lang_homework_homework_frontend_submit_homework_submit_success"),"!"))}function st(n,s){if(1&n&&(e.j41(0,"div",92)(1,"video",93),e.nrm(2,"source",94),e.nI1(3,"safe"),e.k0s(),e.j41(4,"div",95)(5,"div",96),e.nrm(6,"lucide-icon",97),e.k0s()()()),2&n){const t=e.XpG().$implicit;e.R7$(2),e.Y8G("src",e.bMT(3,1,t.url+"#t=5"),e.B4B)}}function at(n,s){if(1&n&&(e.nrm(0,"img",98),e.nI1(1,"mycdn")),2&n){const t=e.XpG().$implicit;e.Y8G("src",e.bMT(1,1,t.thumb),e.B4B)}}function lt(n,s){if(1&n){const t=e.RV6();e.j41(0,"div",99),e.bIt("click",function(){e.eBV(t);const o=e.XpG().$implicit,r=e.XpG(4);return e.Njj(r.removeImg(o.url))}),e.nrm(1,"lucide-icon",100),e.k0s()}}function ct(n,s){if(1&n){const t=e.RV6();e.j41(0,"div",80)(1,"div",81),e.bIt("click",function(){const r=e.eBV(t).$implicit,d=e.XpG(4);return e.Njj(d.onShowFile(r,-1))}),e.DNE(2,st,7,3,"div",82),e.nI1(3,"isVideo"),e.DNE(4,at,2,3,"ng-template",null,83,e.C5r),e.k0s(),e.j41(6,"div",84)(7,"button",85),e.bIt("click",function(){const r=e.eBV(t).index,d=e.XpG(4);return e.Njj(d.switchAttributeArray(d.answerFileList,r,r-1))}),e.nrm(8,"lucide-icon",86),e.k0s(),e.j41(9,"input",87,88),e.bIt("keyup.enter",function(){const r=e.eBV(t).index,d=e.sdS(10),F=e.XpG(4);return e.Njj(F.switchAttributeArrayInput(r,d.value))})("change",function(){const r=e.eBV(t).index,d=e.sdS(10),F=e.XpG(4);return e.Njj(F.switchAttributeArrayInput(r,d.value))}),e.nI1(11,"mytranslate"),e.k0s(),e.j41(12,"button",89),e.bIt("click",function(){const r=e.eBV(t).index,d=e.XpG(4);return e.Njj(d.switchAttributeArray(d.answerFileList,r,r+1))}),e.nrm(13,"lucide-icon",90),e.k0s()(),e.DNE(14,lt,2,0,"div",91),e.k0s()}if(2&n){const t=s.$implicit,i=s.index,o=e.sdS(5),r=e.XpG(4);let d;e.R7$(2),e.Y8G("ngIf",e.bMT(3,7,null!==(d=t.mimes)&&void 0!==d?d:""))("ngIfElse",o),e.R7$(7),e.FS9("id","input_page_"+i),e.FS9("max",null==r.answerFileList?null:r.answerFileList.length),e.FS9("value",i+1),e.FS9("placeholder",e.bMT(11,9,"lang_auto_trang_so")),e.R7$(5),e.Y8G("ngIf",!(null!=r.obj&&r.obj.isMarked&&r.isShowGreenCheckbox(t.url)))}}function mt(n,s){if(1&n&&(e.j41(0,"div",78),e.DNE(1,ct,15,11,"div",79),e.k0s()),2&n){const t=e.XpG(3);e.R7$(1),e.Y8G("ngForOf",t.answerFileList)}}function dt(n,s){if(1&n){const t=e.RV6();e.qex(0),e.j41(1,"div",101),e.nrm(2,"lucide-icon",102),e.j41(3,"span",103),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s(),e.j41(6,"input",104,105),e.bIt("change",function(o){e.eBV(t);const r=e.XpG(3);return e.Njj(r.selectFile(o))}),e.k0s()(),e.j41(8,"div",106)(9,"span",107),e.EFF(10),e.nI1(11,"mytranslate"),e.k0s()(),e.bVm()}2&n&&(e.R7$(2),e.Y8G("ngClass",e.lJ4(7,Y)),e.R7$(2),e.JRh(e.bMT(5,3,"lang_auto_upload_file")),e.R7$(6),e.JRh(e.bMT(11,5,"lang_auto_ho_tro_anh_video_audio_hoac_file_pdf_brackets")))}function ut(n,s){if(1&n&&(e.qex(0),e.DNE(1,tt,6,3,"div",62),e.DNE(2,nt,4,3,"div",63),e.DNE(3,ot,2,1,"div",64),e.DNE(4,rt,4,3,"div",63),e.DNE(5,mt,2,1,"div",65),e.DNE(6,dt,12,8,"ng-container",14),e.nI1(7,"isParentViewOnly"),e.bVm()),2&n){const t=e.XpG(2);e.R7$(1),e.Y8G("ngIf",null==t.obj?null:t.obj.isMarked),e.R7$(1),e.Y8G("ngIf",t.statusObjData.loading),e.R7$(1),e.Y8G("ngIf",t.convertObjToArray(t.fileUploadQueue).length>0),e.R7$(1),e.Y8G("ngIf",(null==t.answerFileList?null:t.answerFileList.length)&&(null==t.rawAnswerFileList?null:t.rawAnswerFileList.length)&&t.isSubmit),e.R7$(1),e.Y8G("ngIf",null==t.answerFileList?null:t.answerFileList.length),e.R7$(1),e.Y8G("ngIf",!e.bMT(7,6,""))}}function _t(n,s){1&n&&(e.j41(0,"div",66)(1,"div",67)(2,"div",68)(3,"span"),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()()()()),2&n&&(e.R7$(4),e.SpI("",e.bMT(5,1,"lang_homework_homework_frontend_submit_homework_note_teacher_mark"),"!"))}function ht(n,s){if(1&n&&(e.qex(0),e.nrm(1,"video",115),e.bVm()),2&n){const t=e.XpG().$implicit;e.R7$(1),e.Y8G("src",t.url+"#t=5",e.B4B)}}function pt(n,s){if(1&n&&(e.nrm(0,"img",116),e.nI1(1,"mycdn")),2&n){const t=e.XpG().$implicit;e.Y8G("src",e.bMT(1,1,t.thumb),e.B4B)}}function gt(n,s){if(1&n){const t=e.RV6();e.j41(0,"div",80)(1,"div",110),e.bIt("click",function(){const r=e.eBV(t).$implicit,d=e.XpG(4);return e.Njj(d.onShowFile(r,-1))}),e.DNE(2,ht,2,1,"ng-container",42),e.nI1(3,"isVideo"),e.DNE(4,pt,2,3,"ng-template",null,111,e.C5r),e.k0s(),e.j41(6,"div",84)(7,"button",112),e.nrm(8,"lucide-icon",86),e.k0s(),e.nrm(9,"input",113,88),e.nI1(11,"isParentViewOnly"),e.nI1(12,"mytranslate"),e.j41(13,"button",112),e.nrm(14,"lucide-icon",114),e.k0s()()()}if(2&n){const t=s.$implicit,i=s.index,o=e.sdS(5),r=e.XpG(4);let d;e.R7$(2),e.Y8G("ngIf",e.bMT(3,7,null!==(d=t.mimes)&&void 0!==d?d:""))("ngIfElse",o),e.R7$(7),e.FS9("id","input_page_"+i),e.FS9("max",null==r.answerFileList?null:r.answerFileList.length),e.FS9("value",i+1),e.FS9("placeholder",e.bMT(12,11,"lang_auto_trang_so")),e.Y8G("readonly",e.bMT(11,9,""))}}function ft(n,s){if(1&n&&(e.j41(0,"div",78),e.DNE(1,gt,15,13,"div",79),e.k0s()),2&n){const t=e.XpG(3);e.R7$(1),e.Y8G("ngForOf",t.answerFileList)}}function bt(n,s){1&n&&(e.j41(0,"div",117)(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()),2&n&&(e.R7$(2),e.JRh(e.bMT(3,1,"lang_homework_homework_frontend_submit_homework_end_time_submit")))}function wt(n,s){if(1&n&&(e.DNE(0,_t,6,3,"div",108),e.DNE(1,ft,2,1,"div",65),e.DNE(2,bt,4,3,"ng-template",null,109,e.C5r)),2&n){const t=e.sdS(3),i=e.XpG(2);e.Y8G("ngIf",null==i.obj?null:i.obj.isMarked)("ngIfElse",t),e.R7$(1),e.Y8G("ngIf",null==i.answerFileList?null:i.answerFileList.length)}}function vt(n,s){1&n&&e.nrm(0,"azt-loading-ui",120)}function kt(n,s){if(1&n){const t=e.RV6();e.j41(0,"button",118),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.submitHomework())}),e.nI1(1,"isParentViewOnly"),e.DNE(2,vt,1,0,"azt-loading-ui",119),e.EFF(3),e.nI1(4,"mytranslate"),e.nI1(5,"mytranslate"),e.k0s()}if(2&n){const t=e.XpG(2);e.Y8G("disabled",t.statusObjData.loading||!(null!=t.answerFileList&&t.answerFileList.length)||(null==t.obj?null:t.obj.isMarked)||t.isNotChangeData||e.bMT(1,3,"")),e.R7$(2),e.Y8G("ngIf",t.statusObjData.loading),e.R7$(1),e.SpI(" ",null!=t.obj&&t.obj.isMarked?e.bMT(4,5,"lang_homework_homework_frontend_submit_homework_submitted"):e.bMT(5,7,"lang_homework_homework_frontend_submit_homework_submit")," ")}}function jt(n,s){1&n&&e.nrm(0,"azt-loading-ui",120)}function yt(n,s){if(1&n){const t=e.RV6();e.j41(0,"button",121),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.submitHomework())}),e.nI1(1,"isParentViewOnly"),e.DNE(2,jt,1,0,"azt-loading-ui",119),e.EFF(3),e.nI1(4,"mytranslate"),e.nI1(5,"mytranslate"),e.k0s()}if(2&n){const t=e.XpG(2);e.Y8G("disabled",t.statusObjData.loading||!(null!=t.answerFileList&&t.answerFileList.length)||(null==t.obj?null:t.obj.isOverTime)||e.bMT(1,3,"")),e.R7$(2),e.Y8G("ngIf",t.statusObjData.loading),e.R7$(1),e.SpI(" ",null!=t.obj&&t.obj.isMarked?e.bMT(4,5,"lang_homework_homework_frontend_submit_homework_submitted"):e.bMT(5,7,"lang_homework_homework_frontend_submit_homework_submit")," ")}}function xt(n,s){if(1&n&&(e.j41(0,"div",57),e.DNE(1,ut,8,8,"ng-container",42),e.DNE(2,wt,4,3,"ng-template",null,58,e.C5r),e.k0s(),e.j41(4,"div",59),e.DNE(5,kt,6,9,"button",60),e.DNE(6,yt,6,9,"button",61),e.k0s()),2&n){const t=e.sdS(3),i=e.XpG();e.R7$(1),e.Y8G("ngIf",!(null!=i.obj&&i.obj.isOverTime))("ngIfElse",t),e.R7$(4),e.Y8G("ngIf",!(null!=i.obj&&i.obj.isOverTime)),e.R7$(1),e.Y8G("ngIf",null==i.obj?null:i.obj.isOverTime)}}function Ot(n,s){if(1&n&&(e.qex(0),e.nrm(1,"video",115),e.bVm()),2&n){const t=e.XpG().$implicit;e.R7$(1),e.Y8G("src",t.url+"#t=5",e.B4B)}}function St(n,s){if(1&n&&(e.nrm(0,"img",116),e.nI1(1,"mycdn")),2&n){const t=e.XpG().$implicit;e.Y8G("src",e.bMT(1,1,t.thumb),e.B4B)}}function Ct(n,s){if(1&n){const t=e.RV6();e.j41(0,"div",80)(1,"div",129),e.bIt("click",function(){const r=e.eBV(t).$implicit,d=e.XpG(3);return e.Njj(d.onShowFile(r,-1))}),e.DNE(2,Ot,2,1,"ng-container",42),e.nI1(3,"isVideo"),e.DNE(4,St,2,3,"ng-template",null,130,e.C5r),e.k0s(),e.j41(6,"div",84)(7,"button",112),e.nrm(8,"lucide-icon",86),e.k0s(),e.nrm(9,"input",131,88),e.nI1(11,"mytranslate"),e.j41(12,"button",112),e.nrm(13,"lucide-icon",90),e.k0s()()()}if(2&n){const t=s.$implicit,i=s.index,o=e.sdS(5),r=e.XpG(3);let d;e.R7$(2),e.Y8G("ngIf",e.bMT(3,6,null!==(d=t.mimes)&&void 0!==d?d:""))("ngIfElse",o),e.R7$(7),e.FS9("id","input_page_"+i),e.FS9("max",null==r.answerFileList?null:r.answerFileList.length),e.FS9("value",i+1),e.FS9("placeholder",e.bMT(11,8,"lang_auto_trang_so"))}}function Mt(n,s){if(1&n&&(e.j41(0,"div",128),e.DNE(1,Ct,14,10,"div",79),e.k0s()),2&n){const t=e.XpG(2);e.R7$(1),e.Y8G("ngForOf",t.answerFileList)}}function It(n,s){1&n&&(e.j41(0,"div",132),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&n&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"lang_homework_homework_frontend_submit_homework_note_teacher_mark")," "))}function Ft(n,s){1&n&&e.nrm(0,"p",141)}function Tt(n,s){if(1&n&&(e.j41(0,"p",141),e.nrm(1,"azt-check-mark",142),e.k0s()),2&n){const t=e.XpG(3);e.R7$(1),e.Y8G("mark",t.answerObj.point)}}function Dt(n,s){if(1&n&&e.nrm(0,"div",147),2&n){const t=e.XpG(4);e.Y8G("innerHTML",t.answerObj.note,e.npT)}}function Et(n,s){if(1&n&&e.nrm(0,"div",148),2&n){const t=e.XpG(4);e.Y8G("innerHTML",t.answerObj.note,e.npT)}}function Rt(n,s){if(1&n&&e.nrm(0,"div",149),2&n){const t=e.XpG(4);e.Y8G("innerHTML",t.answerObj.note,e.npT)}}function Ht(n,s){if(1&n&&e.nrm(0,"div",150),2&n){const t=e.XpG(4);e.Y8G("innerHTML",t.answerObj.note,e.npT)}}function Pt(n,s){if(1&n&&(e.j41(0,"div"),e.DNE(1,Dt,1,1,"div",143),e.DNE(2,Et,1,1,"div",144),e.DNE(3,Rt,1,1,"div",145),e.DNE(4,Ht,1,1,"div",146),e.k0s()),2&n){const t=e.XpG(3);e.R7$(1),e.Y8G("ngIf","font_chu_in"==t.answerObj.txtCommentFont),e.R7$(1),e.Y8G("ngIf","font_chu_in_\u0111am"==t.answerObj.txtCommentFont),e.R7$(1),e.Y8G("ngIf","font_chu_dep_z"==t.answerObj.txtCommentFont),e.R7$(1),e.Y8G("ngIf","font_chu_in_nghieng"==t.answerObj.txtCommentFont)}}function Gt(n,s){if(1&n&&(e.nrm(0,"div",151),e.nI1(1,"safeNormalHtmlContent")),2&n){const t=e.XpG(3);e.Y8G("innerHTML",e.bMT(1,1,t.answerObj.note),e.npT)}}function $t(n,s){if(1&n){const t=e.RV6();e.j41(0,"div",133)(1,"h5",124),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.EFF(4," \xa0( "),e.j41(5,"a",134),e.bIt("click",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.viewDetail())}),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s(),e.EFF(8," ) "),e.k0s(),e.j41(9,"div",135)(10,"div",136),e.DNE(11,Ft,1,0,"p",137),e.DNE(12,Tt,2,1,"p",137),e.k0s(),e.j41(13,"div",138)(14,"h4",139),e.EFF(15),e.nI1(16,"mytranslate"),e.k0s(),e.DNE(17,Pt,5,4,"div",42),e.DNE(18,Gt,2,3,"ng-template",null,140,e.C5r),e.k0s()()}if(2&n){const t=e.sdS(19),i=e.XpG(2);e.R7$(2),e.JRh(e.bMT(3,7,"lang_homework_homework_frontend_submit_homework_result")),e.R7$(4),e.SpI(" ",e.bMT(7,9,"lang_homework_homework_frontend_submit_homework_view_detail_result")," "),e.R7$(5),e.Y8G("ngIf",!i.isHideMark&&null==i.answerObj.point),e.R7$(1),e.Y8G("ngIf",!i.isHideMark&&null!=i.answerObj.point),e.R7$(3),e.JRh(e.bMT(16,11,"lang_homework_homework_frontend_submit_homework_comment")),e.R7$(2),e.Y8G("ngIf",i.answerObj&&null!=i.answerObj.txtCommentFont||null!=i.answerObj.txtCommentFont)("ngIfElse",t)}}function Lt(n,s){if(1&n&&(e.j41(0,"div",122)(1,"div",123)(2,"h5",124),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"span"),e.EFF(6),e.nI1(7,"mytranslate"),e.nI1(8,"formatFullDateTimeWithoutSecondByUserUnitPipe"),e.k0s()(),e.DNE(9,Mt,2,1,"div",125),e.DNE(10,It,3,3,"div",126),e.DNE(11,$t,20,13,"ng-template",127),e.k0s()),2&n){const t=e.XpG();e.R7$(3),e.JRh(e.bMT(4,6,"lang_homework_homework_frontend_submit_homework_assignment")),e.R7$(3),e.Lme("\xa0(",e.bMT(7,8,"lang_homework_homework_frontend_submit_homework_time_submit"),": ",e.bMT(8,10,null==t.answerObj?null:t.answerObj.createdAt),")"),e.R7$(3),e.Y8G("ngIf",null==t.answerFileList?null:t.answerFileList.length),e.R7$(1),e.Y8G("ngIf",null!=t.answerObj&&(null==t.obj?null:t.obj.isMarked)&&t.whenShowAnswer),e.R7$(1),e.Y8G("ngIf",null!=t.answerObj&&(null==t.obj?null:t.obj.isMarked)&&!t.whenShowAnswer)}}let Nt=(()=>{class n extends P.H{selectStudentEvent(t){this.localStorageObject.removeCacheByValue("FrontPageStudent"),this.localStorageObject.removeCacheByValue("GetExamObjsInDashboard"),this.localStorageObject.removeCacheByValue("GetClassroomInHomeworkObjsInDashboard"),this.getData()}onShowFile(t,i){let o={...t,index:i};this.sAztDialogService.open(ae.V,{maxWidth:"100vw",maxHeight:"100vh",height:"100%",width:"100%",data:{fileOption:o},restoreFocus:!1})}addFileWithProcess(t){t&&(this.isNotChangeData=!1,this.answerFileList?.push(t));let i=this.answerFileList?.length??0;for(let o=0;o<i;o++)this.answerFileList&&!this.answerFileList?.[o].lastModified&&(this.answerFileList[o].lastModified=(new Date).getTime()),this.answerFileList&&!this.answerFileList[o].thumb&&(this.answerFileList[o].thumb=this.homeworkExamService.getThumbWithObj(this.answerFileList[o]));this.answerFileList&&this.answerFileList.length>0&&this.answerFileList.sort((o,r)=>o.lastModified&&r.lastModified?o.lastModified-r.lastModified:0)}getFileType(t){let i=(0,O.yY)(t),o=this.commonService.myTranslateInstant("lang_auto_hinh_anh")??"",r=this.commonService.myTranslateInstant("lang_auto_video")??"",d=this.commonService.myTranslateInstant("lang_auto_am_thanh")??"",F=this.commonService.myTranslateInstant("lang_auto_tai_lieu")??"";return"image"==i?o:"video"==i?r:"audio"==i?d:F}getFileIcon(t){let i=(0,O.yY)(t.mimes??"");return"image"==i?t.url??"images/jpg-icon.png":"video"==i?"images/video_sample.png":"audio"==i?"images/audio_sample.png":"pdf"==i?"images/ext_pdf_filetype_icon_176234.svg":"images/documents.png"}isShowGreenCheckbox(t){return!!this.rawAnswerFileList?.length&&null!=this.rawAnswerFileList.find(i=>i.url==t)}switchAttributeArray(t,i,o){if(!this.answerFileList?.length||this.answerFileList?.length<=i||this.answerFileList.length<=o||i<0||o<0)return;let r=this.castObj(this.answerFileList[i]);this.answerFileList[i]=this.castObj(this.answerFileList[o])??{},this.answerFileList[o]=r??{}}switchAttributeArrayInput(t,i){let o=Number(i)-1;o<=0?o=0:this.answerFileList&&o>=this.answerFileList?.length&&(o=this.answerFileList.length),this.answerFileList?.splice(o,0,this.answerFileList.splice(t,1)[0])}viewDetail(){let t=this.commonService.getCurrentUrlWithoutLocale();this.commonService.myNavigationWithQueryString("/homework/switch-view-homework/"+this.answerObj?.id+"/"+this.homeworkHashId,"?backto="+t)}viewDetailHistory(t){let i=this.commonService.getCurrentUrlWithoutLocale();this.commonService.myNavigationWithQueryString("/homework/switch-view-homework/"+this.obj?.homeworkObj?.id+"/"+this.homeworkHashId+"/"+t,"?backto="+i)}convertObjToArray(t){let i=[];for(const o in t)Object.prototype.hasOwnProperty.call(t,o)&&i.push(t[o]);return i}removeImg(t){let i=this.answerFileList?.filter(o=>o.url!==t);this.answerFileList=i,this.isNotChangeData=!1}submitHomework(){let t={homeworkHashId:this.obj?.homeworkObj?.hashId??"",studentId:this.currentChild?.id??0,files:JSON.stringify(this.answerFileList)};if("[]"==t.files)return this.showErrorSnack("lang_auto_bai_lam_chua_day_du_vui_long_thu_lai");this.isSubmit=!1,this.statusObjData={loading:!0,errorMessage:"",mustShowErrorBox:!1};let i=JSON.stringify({type:"homework",id:this.obj?.homeworkObj?.id,user:this.obj?.homeworkObj?.tenantId});this.frontAnswerService.apiFrontAnswerSaveObjPost(t,i).subscribe(o=>{1==o.success?(this.localStorageObject.clearAllCache(),this.isSubmit=!0,this.statusObjData={loading:!1,errorMessage:"",mustShowErrorBox:!1},this.rawAnswerFileList=this.commonService.myClone(this.answerFileList),this.showSuccessSnack("lang_auto_ban_da_nop_bai_thanh_cong"),this.isNotChangeData=!0):(this.showErrorSnack(o.message??""),this.statusObjData={loading:!1,errorMessage:"",mustShowErrorBox:!1},this.isSubmit=!1)},o=>{console.log("Err:"+o)})}copyLinkToClipboard(){return`${this.commonService.getCurrentDomain()}/bai-tap/${this.homeworkHashId}`}fillData(){if(this.files=this.commonService.myParseJson(this.obj?.homeworkObj?.files??"")??[],null==this.files&&(this.files=new Array),this.obj?.answerObj&&this.obj.answerObj.files&&(this.answerFileList=this.commonService.myParseJson(this.obj.answerObj.files),this.rawAnswerFileList=this.commonService.myClone(this.answerFileList),this.isNotChangeData=!0),this.obj?.answerHistoryObjs){for(let i=0;i<this.obj.answerHistoryObjs.length;i++)this.obj.answerHistoryObjs[i].result&&(this.obj.answerHistoryObjs[i].note=this.commonService.willDeleteParseJson(this.obj.answerHistoryObjs[i].result??"").comment);this.answerHistory=this.obj.answerHistoryObjs??[];for(let i=0;i<this.answerHistory.length;i++){if(this.answerHistory[i].result){var t=this.commonService.willDeleteParseJson(this.answerHistory[i].resultNote??"");this.answerHistory[i].hideMark=!(!t||!t?.IsHideMark)&&t?.IsHideMark}if(this.answerHistory[i].files)if(this.answerHistory[i].files?.includes("<z>:")){let o=this.zipDataService.decodeContentGzip(this.answerHistory[i].files??"");this.answerHistory[i].fileParse=this.commonService.myParseJson(o)}else this.answerHistory[i].fileParse=this.commonService.myParseJson(this.answerHistory[i].files??"")}}this.obj?.answerObj&&(this.answerObj=this.obj.answerObj),this.answerObj&&this.answerObj.result&&(this.answerObj.note=null!=this.commonService.willDeleteParseJson(this.answerObj.result)?this.commonService.willDeleteParseJson(this.answerObj.result).comment:"",this.answerObj.txtCommentFont=this.commonService.willDeleteParseJson(this.commonService.willDeleteParseJson(this.answerObj.result).staticTextConfig)?.txtCommentFont,this.isHideMark=null!=this.commonService.willDeleteParseJson(this.answerObj.result)&&this.commonService.willDeleteParseJson(this.answerObj.result).hideMark),null!=this.answerObj?.resultNote&&null==this.answerObj?.note&&(this.answerObj.note=null!=this.commonService.willDeleteParseJson(this.answerObj.resultNote)?this.commonService.willDeleteParseJson(this.answerObj.resultNote).Note:""),this.currentChild=this.obj?.studentObj?this.obj.studentObj:{...this.userService.getUserObj(),id:0,classroomId:0,parentId:0,gender:0}}getData(){this.initStatusObj(),this.waitDestroy(this.frontHomeworkService.apiFrontHomeworkGetObjGet(this.homeworkHashId).subscribe(t=>{if(!t.success)return this.obj=t.data,this.errorStatusObj(t.message,!0);this.zipDataService.convertAnswersHistories(t.data),this.zipDataService.convertSubmittedAnswersObj(t.data?.answerObj),this.obj=t.data,this.obj?.homeworkObj&&this.zipDataService.convertHomeworkObj(this.obj?.homeworkObj);let i=this.commonService.myTranslateInstant("lang_auto_lop");return this.commonService.translateMetaData({title:this.obj?.homeworkObj?.name+`- ${i}: `+this.obj?.classroomObj?.name,description:this.obj?.homeworkObj?.content}),this.whenShowAnswer=this.obj?.homeworkObj?.whenShowAnswer??0,1==this.obj?.homeworkObj?.mustVerified&&this.userService.isNotLoginOrIsAnonymous()?(this.currentViewType="requiredLogin",this.sAztDialogService.open(_e,{data:{type:"redirect_register"},restoreFocus:!1,backdropClass:"azt-backdrop",disableClose:!0}),this.successStatusObj()):this.obj?.studentObj?1==this.obj?.homeworkObj?.mustVerified&&1!=this.obj.studentObj.isVerified?(this.currentViewType="chooseStudent",this.successStatusObj()):(this.currentViewType="viewHomework",this.fillData(),void this.successStatusObj()):(this.currentViewType="chooseStudent",this.successStatusObj())}))}ngOnInit(){this.commonService.translateMetaData({title:"lang_cms_student_view_exercise_title",description:"lang_cms_student_view_exercise_description",image:"lang_cms_test_image"}),(0,se.z)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([t,i])=>{this.backToLink=this.commonService.getMyQueryParam("backto")??"/student/classroom/0",this.homeworkHashId=this.commonService.getMyParam(this.activeRoute,"hash_id")??"",this.userObj=this.userService.getUserObj(),this.getData()}),super.ngOnInit()}constructor(t,i,o,r,d,F,N,E,G,x){var l;super(),l=this,this.activeRoute=t,this.myPdfService=i,this.localStorageObject=o,this.frontHomeworkService=r,this.frontAnswerService=d,this.apiUploadService=F,this.zipDataService=N,this.userService=E,this.homeworkExamService=G,this.sAztDialogService=x,this.homeworkHashId="",this.backToLink="/student/classroom/0",this.statusObjData={loading:!1,errorMessage:"",mustShowErrorBox:!1},this.currentViewType="requiredLogin",this.files=[],this.fileUploadQueue=[],this.uploadCount=0,this.countUpload=1,this.answerHistory=[],this.isSubmit=!1,this.isHideMark=!1,this.isNotChangeData=!1,this.whenShowAnswer=0,this.selectFile=function(){var T=(0,V.A)(function*(p){let a=p.target.files;try{for(let m in a)if("length"!=m&&"item"!=m)if((0,O.N6)(a[m].type))if((0,O.hD)(a[m].size)<=200)if(l.statusObjData={loading:!0,errorMessage:"",mustShowErrorBox:!1},(0,O.Ev)(a[m].type)){let u=yield l.myPdfService.getImageWithPdf(a[m]);l.answerFile=a?a[m]:l.answerFile,l.uploadFiles(u,l.uploadCount),l.uploadCount+=1}else l.answerFile=a?a[m]:l.answerFile,l.answerFile&&(l.statusObjData={loading:!0,errorMessage:"",mustShowErrorBox:!1},l.uploadFile(l.answerFile,l.uploadCount),l.uploadCount+=1);else l.showErrorSnack("lang_auto_vui_long_chon_file_khong_qua_200_mb");else l.showErrorSnack("lang_auto_error_file_no_support_homework_front_end");p.target.value="",l.isSubmit=!1}catch(m){alert("errors:"+m)}});return function(p){return T.apply(this,arguments)}}(),this.uploadFileVideo=function(){var T=(0,V.A)(function*(p,v){l.waitDestroy(l.apiUploadService.uploadToVimeoProgress("front_homework",p,{qrcode:void 0,homeworkId:l.obj?.homeworkObj?.id,teacherId:l.obj?.homeworkObj?.tenantId}).subscribe(a=>{a.isOnProgress?l.fileUploadQueue.hasOwnProperty(v)?(l.fileUploadQueue[v].uploadProgress=Math.round(a.percentage??0),l.fileUploadQueue[v].fileName=p.name):l.fileUploadQueue[v]={uploadProgress:0,fileName:p.name}:1==a.success?(delete l.fileUploadQueue[v],Array.isArray(l.answerFileList)||(l.answerFileList=[]),l.addFileWithProcess({...a.data,lastModified:p.lastModified}),l.statusObjData={loading:!1,errorMessage:"",mustShowErrorBox:!1}):a.hasOwnProperty("code")&&401==a.code?l.countUpload<=3&&setTimeout(()=>{l.countUpload++,l.uploadFileVideo(p,v)},15e3):(l.statusObjData={loading:!1,errorMessage:"",mustShowErrorBox:!1},l.commonService.snackError("lang_auto_khong_upload_duoc_tep_tin_vui_long_thu_lai_sau_ten: "+p.name))}))});return function(p,v){return T.apply(this,arguments)}}(),this.uploadFiles=function(){var T=(0,V.A)(function*(p,v){for(let S=0;S<p.length;S++){const a=p[S];yield(0,O.w4)(a).then(m=>{l.apiUploadService.uploadToCdnProgressForFrontendHomework(m).subscribe(u=>{u.type!=Q.hv.UploadProgress&&(1==u.success?(delete l.fileUploadQueue[v],Array.isArray(l.answerFileList)||(l.answerFileList=[]),l.addFileWithProcess({...u.data,lastModified:m.lastModified})):(l.statusObjData={loading:!1,errorMessage:"",mustShowErrorBox:!1},l.showErrorSnack("lang_auto_khong_upload_duoc_tep_tin_ten:"+a.name)))})}),S===p.length-1&&(l.statusObjData={loading:!1,errorMessage:"",mustShowErrorBox:!1})}});return function(p,v){return T.apply(this,arguments)}}(),this.uploadFile=function(){var T=(0,V.A)(function*(p,v){l.isSubmit=!1,((0,O.wu)(p.type)||(0,O.cZ)(p.type)||(0,O.JK)(p.type)||(0,O.Ev)(p.type)||(0,O.wd)(p.type)||(0,O.nL)(p.type)||(0,O.rl)(p.type))&&(0,O.w4)(p).then(S=>{l.apiUploadService.uploadToCdnProgressForFrontendHomework(S).subscribe(a=>{if(a.type!=Q.hv.UploadProgress)1==a.success?(delete l.fileUploadQueue[v],Array.isArray(l.answerFileList)||(l.answerFileList=[]),l.addFileWithProcess({...a.data,lastModified:S.lastModified}),l.statusObjData={loading:!1,errorMessage:"",mustShowErrorBox:!1}):(l.statusObjData={loading:!1,errorMessage:"",mustShowErrorBox:!1},l.showErrorSnack(l.commonService.translateToKeyParam("lang_auto_khong_upload_duoc_anh_ten",p.name,a.message??"none")));else{let m=(a.loaded??0)/(a.total??1)*100;l.fileUploadQueue.hasOwnProperty(v)?(l.fileUploadQueue[v].uploadProgress=m,l.fileUploadQueue[v].fileName=p.name):l.fileUploadQueue[v]={uploadProgress:0,fileName:p.name}}})})});return function(p,v){return T.apply(this,arguments)}}(),this.captureFile=function(){var T=(0,V.A)(function*(p){let a=p.target.files;try{for(let m in a)if("length"!=m&&"item"!=m)if((0,O.N6)(a[m].type))if((0,O.hD)(a[m].size)<=200)if(l.statusObjData={loading:!0,errorMessage:"",mustShowErrorBox:!1},(0,O.Ev)(a[m].type)){let u=yield l.myPdfService.getImageWithPdf(a[m]);l.answerFile=a?a[m]:l.answerFile,l.uploadFiles(u,l.uploadCount),l.uploadCount+=1}else l.answerFile=a?a[m]:l.answerFile,l.answerFile&&(l.statusObjData={loading:!0,errorMessage:"",mustShowErrorBox:!1},l.uploadFile(l.answerFile,l.uploadCount),l.uploadCount+=1);else l.showErrorSnack("lang_auto_vui_long_chon_file_khong_qua_200_mb");else l.showErrorSnack("lang_auto_error_file_no_support_homework_front_end");p.target.value="",l.isSubmit=!1}catch(m){alert(m)}});return function(p){return T.apply(this,arguments)}}(),this.answerFile=null,this.form=new b.gE({file_data:new b.MJ("",{nonNullable:!0,validators:[b.k0.required]}),file_capture:new b.MJ("",{nonNullable:!0,validators:[b.k0.required]}),file:new b.MJ("",{nonNullable:!0,validators:[b.k0.required]})})}static#e=this.\u0275fac=function(i){return new(i||n)(e.rXU(g.nX),e.rXU(he.C),e.rXU(pe.G),e.rXU($.RC),e.rXU($.L5),e.rXU(ge.T),e.rXU(J.j),e.rXU(fe.R),e.rXU(be.Z),e.rXU(we.i))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-submit-homework"]],features:[e.Vt3],decls:17,vars:4,consts:[[3,"headerBackToLink"],[1,"intro-x","mt-5"],[3,"ngTemplateOutlet",4,"ngIf"],["errorBox",""],["chooseStudent",""],["homeworkDetail",""],["viewHomework",""],["AddNewAnswerOrEditOldAnswer",""],["HomeworkResultTpl",""],[3,"ngTemplateOutlet"],[1,"w-full"],[1,"text-center","p-3",2,"display","block"],["type","book",3,"size"],[1,"font-medium","mt-2"],[4,"ngIf"],[1,"box","mx-auto"],[1,"azt-select-child"],[1,"p-3","border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"mt-5","p-3"],[3,"joinClassroomByType","selectStudentEvent"],[1,"flex","items-center"],[1,"text-lg","font-medium","mr-auto"],[1,"w-auto","flex"],[3,"fileName","linkUrl"],[1,"mt-2"],["name","binary","size","16",3,"ngClass"],[1,"ml-1","font-bold","text-pirmary"],[1,"azt-info-homework","p-3","border-b","border-slate-200/60","dark:border-darkmode-400"],["name","layout-grid","size","16",3,"ngClass"],[1,"ml-1","font-medium"],["class","mt-2",4,"ngIf"],[1,"flex","flex-col","sm:flex-row"],["class","time-create mr-10 mt-2",4,"ngIf"],[1,"time-deadline","mt-2"],["name","calendar-off","size","16",3,"ngClass"],["class","ml-1 font-medium",4,"ngIf"],[1,"azt-content-homework"],[3,"content"],[1,"attack-file","mt-5"],[1,"grid","grid-cols-12","gap-3","mt-3"],["class","col-span-12 lg:col-span-3",4,"ngFor","ngForOf"],[1,"p-3"],[4,"ngIf","ngIfElse"],["ViewHomeworkResult",""],[3,"dataAnswerHistory","dataHomeworkObj","previewFileEmit"],["name","user","size","16",3,"ngClass"],[1,"time-create","mr-10","mt-2"],["name","calendar","size","16",3,"ngClass"],[1,"col-span-12","lg:col-span-3"],[1,"border","flex","border-slate-200/60","dark:border-darkmode-400","rounded-md","p-3","zoom-in"],["azt-track-service","submit-homework-JKHK228AaC",1,"flex","w-full","items-center",3,"click"],[1,"w-12","h-12","image-fit","lg:mr-1"],["class","rounded-md",3,"src",4,"ngIf"],[1,"ml-2","mt-0",2,"max-width","80%"],[1,"font-medium","truncate",3,"matTooltip"],[1,"text-slate-500","text-xs","mt-0.5"],[1,"rounded-md",3,"src"],[1,"w-full","mt-3","xl:mt-0","flex-1","border-2","border-dashed","dark:border-darkmode-400","rounded-md","pt-4"],["notOverTime",""],[1,"text-center","mt-5"],["azt-track-service","submit-homework-SVOZH1hPhT","class","btn w-24 btn-primary",3,"disabled","click",4,"ngIf"],["azt-track-service","submit-homework-srzM6zkJC9X","class","btn w-24 btn-danger",3,"disabled","click",4,"ngIf"],["class","row ml-0 mr-0",4,"ngIf"],["class","text-center mt-4 mb-4",4,"ngIf"],["class","grid grid-cols-12 gap-1 mt-1 mb-1 pb-3 pt-3 px-3 attach-container",4,"ngIf"],["class","grid grid-cols-10 gap-5 pl-4 pr-5",4,"ngIf"],[1,"row","ml-0","mr-0"],[1,"col-12"],[1,"alert","alert-danger","text-center",2,"margin-bottom","1.25rem"],[1,"text-center","mt-4","mb-4"],[1,"text-md","font-medium"],[1,"grid","grid-cols-12","gap-1","mt-1","mb-1","pb-3","pt-3","px-3","attach-container"],["class","col-span-6 md:col-span-4 lg:col-span-2",4,"ngFor","ngForOf"],[1,"col-span-6","md:col-span-4","lg:col-span-2"],[1,"text-md","font-medium","truncate"],[1,"progress-container"],["max","100",2,"width","100%","height","20px","background-color","#1e40af",3,"value"],[1,"text-md","font-medium","text-success"],[1,"grid","grid-cols-10","gap-5","pl-4","pr-5"],["class","col-span-5 md:col-span-2 relative cursor-pointer",4,"ngFor","ngForOf"],[1,"col-span-5","md:col-span-2","relative","cursor-pointer"],["azt-track-service","submit-homework-U3JvmWJWyL","_target","blank",1,"image-fit","h-32",3,"click"],["class","preview-video rounded-md relative overflow-hidden",4,"ngIf","ngIfElse"],["notFileVideo",""],[1,"flex","items-center","rounded-md","border","border-slate-200","dark:border-darkmode-400","overflow-hidden",2,"border-top-left-radius","0","border-top-right-radius","0"],["azt-track-service","submit-homework-oCv304vr_j",1,"btn-sm","btn","btn-secondary",2,"border-radius","0","border","none",3,"click"],["name","chevron-left","size","20"],["type","text","type","number","min","1",1,"form-control","text-center",2,"border","none","line-height","0.25rem","border-radius","0",3,"id","max","value","placeholder","keyup.enter","change"],["myInput",""],["azt-track-service","submit-homework-sWozCmSRRn",1,"btn-sm","btn","btn-secondary",2,"border-radius","0","border","none",3,"click"],["name","chevron-right","size","20"],["azt-track-service","submit-homework-OKXWiY1X2a","class","tooltip w-5 h-5 flex items-center justify-center absolute rounded-full text-white bg-danger right-0 top-0 -mr-2 -mt-2",3,"click",4,"ngIf"],[1,"preview-video","rounded-md","relative","overflow-hidden"],["preload","metadata",1,"rounded-md","border","border-slate-200","dark:border-darkmode-400",2,"height","8rem","width","100%","object-fit","cover","border-bottom-left-radius","0","border-bottom-right-radius","0"],["type","video/mp4",3,"src"],[1,"azt-fill"],[1,"azt-fill-icon"],["name","video","size","24"],["alt","Azota-Image-Loading",1,"border","border-slate-200","dark:border-darkmode-400","rounded-md",2,"border-bottom-left-radius","0","border-bottom-right-radius","0","object-fit","contain",3,"src"],["azt-track-service","submit-homework-OKXWiY1X2a",1,"tooltip","w-5","h-5","flex","items-center","justify-center","absolute","rounded-full","text-white","bg-danger","right-0","top-0","-mr-2","-mt-2",3,"click"],["name","x","size","16"],[1,"px-4","flex","items-center","justify-center","cursor-pointer","relative",2,"margin-top","80px"],["name","upload","size","16",3,"ngClass"],[1,"text-primary","mr-1"],["id","horizontal-form-1","type","file","id","inp_hidden","multiple","",1,"w-full","h-full","top-0","left-0","absolute","opacity-0","cursor-pointer",3,"change"],["fileCapture",""],[1,"px-4","pb-4","mt-1","flex","items-center","justify-center","cursor-pointer","relative"],[1,"block","text-slate-600","dark:text-slate-500"],["class","row ml-0 mr-0",4,"ngIf","ngIfElse"],["notMarked",""],["azt-track-service","submit-homework-MxLAiMtc7R","_target","blank",1,"image-fit","h-32",3,"click"],["notFileVideoOverTime",""],["disabled","",1,"btn-sm","btn","btn-secondary",2,"border-radius","0","border","none"],["type","text","type","number","min","1","disabled","",1,"form-control","text-center",2,"border","none","line-height","0.25rem","border-radius","0",3,"id","max","value","readonly","placeholder"],["name","chevron-right","size","16"],[1,"rounded-md","border-bottom-0",3,"src"],["alt","Azota-Image-Loading",1,"rounded-md","w-fit",2,"border-bottom-left-radius","0","border-bottom-right-radius","0",3,"src"],[1,"alert","alert-danger","text-center","mt-2","ml-5","mr-5",2,"margin-bottom","1.25rem"],["azt-track-service","submit-homework-SVOZH1hPhT",1,"btn","w-24","btn-primary",3,"disabled","click"],["class","mr-1",4,"ngIf"],[1,"mr-1"],["azt-track-service","submit-homework-srzM6zkJC9X",1,"btn","w-24","btn-danger",3,"disabled","click"],[1,"w-full","mt-3","xl:mt-0","flex-1","border-2","dark:border-darkmode-400","rounded-md","pt-4"],[1,"flex"],[1,"text-md","ml-3","font-medium","text-dark"],["class","grid grid-cols-10 gap-5 pl-4 pr-5 mt-3",4,"ngIf"],["class","alert alert-danger p-3 mt-3 mb-3","style","margin-bottom: 1.25rem",4,"ngIf"],[3,"ngIf"],[1,"grid","grid-cols-10","gap-5","pl-4","pr-5","mt-3"],["azt-track-service","submit-homework-r1g0ks59mJK","_target","blank",1,"image-fit","h-32","border","border-slate-200","dark:border-darkmode-400","rounded-md",2,"border-bottom","0","border-bottom-left-radius","0","border-bottom-right-radius","0",3,"click"],["notFileVideoResult",""],["type","text","type","number","min","1","disabled","",1,"form-control","text-center",2,"border","none","line-height","0.25rem","border-radius","0",3,"id","max","value","placeholder"],[1,"alert","alert-danger","p-3","mt-3","mb-3",2,"margin-bottom","1.25rem"],[1,"flex","mt-3"],["azt-track-service","submit-homework-wmQuG3uTIJb",2,"color","rgba(0, 167, 208, 1)","cursor","pointer",3,"click"],[1,"grid","grid-cols-4","gap-3","mt-3","auto-cols-auto",2,"margin","16px !important"],[1,"col-span-4","sm:col-span-1","md:col-span-1","relative","text-center","border-2","border-dashed","dark:border-darkmode-400","p-8","content-homework"],["class","mb-0",4,"ngIf"],[1,"col-span-4","sm:col-span-3","md:col-start-2","md:col-end-4","relative","border-2","border-dashed","dark:border-darkmode-400","p-3"],[1,"text-md","ml-3","font-medium","text-dark","title"],["fontText",""],[1,"mb-0"],[3,"mark"],["class","content-homework pt-3 text-writing",3,"innerHTML",4,"ngIf"],["class","content-homework pt-3 text-writing-bold",3,"innerHTML",4,"ngIf"],["class","content-homework pt-3 text-writing-beautiful",3,"innerHTML",4,"ngIf"],["class","content-homework pt-3 text-writing-italy",3,"innerHTML",4,"ngIf"],[1,"content-homework","pt-3","text-writing",3,"innerHTML"],[1,"content-homework","pt-3","text-writing-bold",3,"innerHTML"],[1,"content-homework","pt-3","text-writing-beautiful",3,"innerHTML"],[1,"content-homework","pt-3","text-writing-italy",3,"innerHTML"],["id","azt-view-comment",1,"pt-3",3,"innerHTML"]],template:function(i,o){1&i&&(e.j41(0,"student-layout",0)(1,"div",1),e.DNE(2,Ge,1,1,"ng-container",2),e.DNE(3,$e,1,1,"ng-container",2),e.DNE(4,Le,1,1,"ng-container",2),e.k0s()(),e.DNE(5,Ae,7,5,"ng-template",null,3,e.C5r),e.DNE(7,Ye,6,4,"ng-template",null,4,e.C5r),e.DNE(9,Be,12,9,"ng-template",null,5,e.C5r),e.DNE(11,et,31,22,"ng-template",null,6,e.C5r),e.DNE(13,xt,7,4,"ng-template",null,7,e.C5r),e.DNE(15,Lt,12,12,"ng-template",null,8,e.C5r)),2&i&&(e.Y8G("headerBackToLink",o.backToLink),e.R7$(2),e.Y8G("ngIf",o.statusObj.errorMessage),e.R7$(1),e.Y8G("ngIf","chooseStudent"==o.currentViewType&&(null==o.obj||null==o.obj.homeworkObj?null:o.obj.homeworkObj.hashId)),e.R7$(1),e.Y8G("ngIf","viewHomework"==o.currentViewType&&(null==o.obj||null==o.obj.homeworkObj?null:o.obj.homeworkObj.hashId)))},dependencies:[w.YU,w.Sq,w.bT,w.T3,Z.oV,W.D,ve.d,ke.R,je.x,ye.l,xe.m,Oe.j,C.WGl,Pe,D.wp,D.nf,D._y,D.JI,D.gt,D.bH,D.Qu,D.hx],styles:['@font-face{font-family:font_chu_dep;src:url(https://239114911.e.cdneverest.net/cdnazota/storage_public/azota_assets/fonts/HP0015HB.ttf)}@font-face{font-family:font_chu_in;src:url(https://239114911.e.cdneverest.net/cdnazota/storage_public/azota_assets/fonts/Roboto-Thin.ttf)}@font-face{font-family:font_chu_in_nghieng;src:url(https://239114911.e.cdneverest.net/cdnazota/storage_public/azota_assets/fonts/MyriadPro-It.otf)}@font-face{font-family:font_chu_in_dam;src:url(https://239114911.e.cdneverest.net/cdnazota/storage_public/azota_assets/fonts/MyriadPro-BoldIt.otf)}.text-writing[_ngcontent-%COMP%]{font-family:font_chu_in!important;font-weight:700}.text-writing-beautiful[_ngcontent-%COMP%]{font-family:font_chu_dep!important}.text-writing-italy[_ngcontent-%COMP%]{font-family:font_chu_in_nghieng!important}.text-writing-bold[_ngcontent-%COMP%]{font-family:font_chu_in_dam!important}.content-homework[_ngcontent-%COMP%]{color:red;line-height:1.4;font-size:20px}.title[_ngcontent-%COMP%]{position:absolute;top:-11px;background:#fff}.progress-container[_ngcontent-%COMP%]{position:relative;display:block;background:#eee;height:20px;border-radius:6px;overflow:hidden}.progress-container[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;height:100%;background:#1e40af}progress[_ngcontent-%COMP%]{accent-color:#1e40af}[_ngcontent-%COMP%]::-webkit-progress-value{background-color:#1e40af}[_ngcontent-%COMP%]::-moz-progress-bar{background-color:#1e40af}']})}return n})();var ee=c(55465);let te=(()=>{class n extends P.H{getData(t,i){this.initStatusObj(),i?this.frontAnswerHistoryService.apiFrontAnswerHistoryGetObjGet(this.homeworkHashId,i).subscribe(o=>{1==o.success?(this.switchViewHomework(o),this.successStatusObj()):this.errorStatusObj(o.message??"",!0)}):this.frontAnswerService.apiFrontAnswerGetObjGet(this.homeworkHashId,t).subscribe(o=>{1==o.success?(this.switchViewHomework(o),this.successStatusObj()):this.errorStatusObj(o.message??"",!0)})}switchViewHomework(t){if(t){this.zipDataService.convertSubmittedAnswersHistoryObj(t.data?.answerObj);let i=t.data,o=this.castObj(i?.answerObj);if(null!=o){let r=this.commonService.myParseJson(o?.result??"");this.commonService.myNavigationWithQueryString(this.historyId?r&&r?.urlDataMark?`/homework/view-homework-new/${o.id}/${this.homeworkHashId}/${this.historyId}`:`/homework/view-homework/${o.id}/${this.homeworkHashId}/${this.historyId}`:r&&r?.urlDataMark?`/homework/view-homework-new/${o.id}/${this.homeworkHashId}`:`/homework/view-homework/${o.id}/${this.homeworkHashId}`,`?backto=${encodeURIComponent(this.backToLink)}`)}}}ngOnInit(){this.classliveUrl=this.envService.getEnvValue("classliveUrl")??"";let t=this.commonService.getMyParam(this.activeRoute,"id")??"";const i=parseInt(t,10);if(this.homeworkHashId=this.commonService.getMyParam(this.activeRoute,"hash_id")??"",this.backToLink=this.commonService.getMyQueryParam("backto")??"",this.commonService.getMyParam(this.activeRoute,"history_id")){let o=this.commonService.getMyParam(this.activeRoute,"history_id")??"";this.historyId=parseInt(o,10),this.getData(i,this.historyId)}else this.getData(i);this.commonService.translateMetaData({title:"lang_cms_student_view_exercise_title",description:"lang_cms_student_view_exercise_description",image:"lang_cms_test_image"}),super.ngOnInit()}constructor(t,i,o,r,d){super(),this.activeRoute=t,this.frontAnswerService=i,this.frontAnswerHistoryService=o,this.zipDataService=r,this.envService=d,this.backToLink="",this.homeworkHashId="",this.historyId=0,this.classliveUrl=""}static#e=this.\u0275fac=function(i){return new(i||n)(e.rXU(g.nX),e.rXU($.L5),e.rXU($.Ze),e.rXU(J.j),e.rXU(ee.t))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-switch-view-homework"]],features:[e.Vt3],decls:0,vars:0,template:function(i,o){},encapsulation:2})}return n})();var At=c(70254),ne=c(40949),zt=c(68323),Yt=c(87653);const Bt=function(n){return{height:n}};function Vt(n,s){if(1&n){const t=e.RV6();e.qex(0),e.j41(1,"div",21)(2,"azt-mark-note",22,23),e.bIt("handleBackLink",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.goBack())}),e.k0s()(),e.bVm()}if(2&n){const t=e.XpG();e.R7$(1),e.Y8G("ngStyle",e.eq3(5,Bt,t.sizeMarkEditor.height+"px")),e.R7$(1),e.Y8G("dataMarkNote",t.jsonData)("modeView","student")("showBackLink",!0)("showCopyLinkTeacher",!0)}}function Xt(n,s){if(1&n&&(e.j41(0,"div",24)(1,"div",25),e.nrm(2,"azt-check-mark",26),e.k0s()()),2&n){const t=e.XpG();e.R7$(2),e.Y8G("mark",null==t.result||null==t.result.answerObj?null:t.result.answerObj.point)}}let ie=(()=>{class n extends P.H{getSizeMarkEditor(t){this.sizeMarkEditor=t}goBack(){""!=this.backToLink&&null!=this.backToLink?this.commonService.myNavigationBySpecialQueryString(this.backToLink):this.commonService.myNavigation("/bai-tap/"+this.homeworkHashId)}fillData(t){if(t){if(this.zipDataService.convertSubmittedAnswersHistoryObj(t.data?.answerObj),this.result=t.data,this.files=this.commonService.myParseJson(t.data?.answerObj?.files??"")??[],null!==this.files)for(let E=0;E<this.files.length;E++)this.files&&(this.files[E].url=this.cdnService.getMyCdn(this.files[E].url??""),this.files[E].thumb=this.cdnService.getMyCdn(this.files[E].thumb??""));let i=this.castObj(this.result?.answerObj),o=this.result?.studentObj,r=this.result?.classroomObj,d=this.result?.homeworkObj?{...this.result.homeworkObj,permissionObj:{}}:void 0,F=this.commonService.myParseJson(i?.result??""),N=this.castJsonToObj(this.result?.answerObj?.resultNote??"");this.commentExercise=N?.Note??"",this.jsonData.cmd="initMNote",this.jsonData.mode="edit",this.jsonData.answer_obj=i,this.jsonData.student_obj=o,this.jsonData.classroom_obj=r,this.jsonData.homework_obj=d,F&&F.hasOwnProperty("hideMark")&&(this.jsonData.hideMark=F.hideMark),this.dataMarkNote=this.jsonData}}getData(t,i){this.initStatusObj(),this.errorMessage="",i?this.frontAnswerHistoryService.apiFrontAnswerHistoryGetObjGet(this.homeworkHashId,i).subscribe(o=>{1==o.success?(this.fillData(o),this.successStatusObj()):(this.errorStatusObj(o.message??"",!0),this.errorMessage=o?.message)}):this.frontAnswerService.apiFrontAnswerGetObjGet(this.homeworkHashId,t).subscribe(o=>{1==o.success?(this.fillData(o),this.successStatusObj()):(this.errorStatusObj(o.message??"",!0),this.errorMessage=o.message)})}copyLinkToClipboard(){const t=this.getMyParam(this.activeRoute,"id"),i=this.getMyParam(this.activeRoute,"studentId");return`${this.commonService.getCurrentDomainWithLanguage()}/admin/homework/switch-mark-exercise/${t}/${this.homeworkHashId}/${i??0}`}showCopySuccess(){this.showSuccessSnack("lang_auto_sao_chep_thanh_cong")}ngAfterViewInit(){window.addEventListener("message",this.handleIframe)}ngOnInit(){this.commonService.compareDeviceScreen(768)&&(document.body.style.overflowY="hidden");let i=this.commonService.getMyParam(this.activeRoute,"id")??"";const o=parseInt(i,10);if(this.homeworkHashId=this.commonService.getMyParam(this.activeRoute,"hash_id")??"",this.backToLink=this.commonService.getMyQueryParam("backto")??"",this.initDataEditor=this.sAztTinyMceService.initConfigStudentHomework(),this.commonService.getMyParam(this.activeRoute,"history_id")){let r=this.commonService.getMyParam(this.activeRoute,"history_id")??"";const d=parseInt(r,10);this.getData(o,d)}else this.getData(o);this.commonService.translateMetaData({title:"lang_cms_student_view_exercise_title",description:"lang_cms_student_view_exercise_description",image:"lang_cms_test_image"}),super.ngOnInit()}ngOnDestroy(){document.body.style.overflowY="auto"}constructor(t,i,o,r,d,F){super(),this.sAztTinyMceService=t,this.activeRoute=i,this.frontAnswerService=o,this.frontAnswerHistoryService=r,this.cdnService=d,this.zipDataService=F,this.tinyEditorKey=X.c.tinyEditorKey,this.homeworkHashId="",this.isMarked=!1,this.jsonData={},this.backToLink="",this.dataMarkNote={},this.files=[],this.sizeMarkEditor={width:200,height:800},this.commentExercise="",this.initDataEditor={},this.handleIframe=N=>{if("MNoteLoadComplete"==N.data){const E=document.getElementById("mNote"),G=E?E.contentWindow:null;if(null!==G){let x=this.castObj(this.result?.answerObj);if(null!=x){let a=this.commonService.willDeleteParseJson(x?.result??"");if(null!=a){for(let u=0;u<a.pages.length;u++)a.pages[u].backgroundImage&&(a.pages[u].backgroundImage=this.cdnService.getMyCdn(a.pages[u].backgroundImage)),a.pages[u].draw&&(a.pages[u].draw=this.cdnService.getMyCdn(a.pages[u].draw));a=JSON.stringify(a),x.result=a}let m=this.commonService.willDeleteParseJson(x?.files??"");if(null!=m){for(let u=0;u<m.length;u++)m[u].url&&(m[u].url=this.cdnService.getMyCdn(m[u].url)),m[u].thumb&&(m[u].thumb=this.cdnService.getMyCdn(m[u].thumb));m=JSON.stringify(m),x.files=m}}let l=this.result?.studentObj,T=this.result?.classroomObj,p=this.result?.homeworkObj,v=this.commonService.willDeleteParseJson(x?.result??""),S=!(!v||!v.hasOwnProperty("hideMark"))&&v.hideMark;if(this.jsonData&&this.jsonData.hasOwnProperty("pages"))for(let a=0;a<(this.jsonData.pages?.length??0);a++)this.jsonData.pages?.[a].hasOwnProperty("backgroundImage")&&(this.jsonData.pages[a].backgroundImage=this.cdnService.getMyCdn(this.jsonData.pages[a].backgroundImage??"")),this.jsonData.pages?.[a].hasOwnProperty("draw")&&(this.jsonData.pages[a].draw=this.cdnService.getMyCdn(this.jsonData.pages[a].draw??""));if(this.isMarked)this.jsonData.cmd="initMNote",this.jsonData.mode="view",this.jsonData.answer_obj=x,this.jsonData.student_obj=l,this.jsonData.classroom_obj=T,this.jsonData.homework_obj=p,this.jsonData.hideMark=S,G.postMessage(this.jsonData,"*");else{let a=[];this.files.forEach(m=>{a.push({backgroundImage:m.url})}),G.postMessage({cmd:"initMNote",pages:a,answer_obj:x,student_obj:l,classroom_obj:T,homework_obj:p,mode:"view",hideMark:S},"*")}}}}}static#e=this.\u0275fac=function(i){return new(i||n)(e.rXU(At.f),e.rXU(g.nX),e.rXU($.L5),e.rXU($.Ze),e.rXU(ne.B),e.rXU(J.j))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-view-homework-new"]],features:[e.Vt3],decls:28,vars:17,consts:[[1,"content",2,"padding","0 12px"],[1,"grid","grid-cols-12","gap-3","mt-3"],[4,"ngIf"],[1,"col-span-12","md:col-span-4","mark-general"],[1,"box"],[1,"p-2"],[1,"box-head"],[1,"font-medium"],[1,"flex","items-center","mt-2"],[1,"info-student","flex","items-center"],[3,"nameCreateAvatar","size"],[1,"info","ml-2"],[1,"text-md"],[1,"text-xs"],["class","score ml-auto flex items-center",4,"ngIf"],[1,"comment","mt-3"],[1,"font-medium","text-md"],[1,"comment-editor","mt-2"],[3,"apiKey","ngModel","disabled","init","ngModelChange"],[1,"mt-3","block","md:hidden"],["azt-track-service","view-homework-new-Ak95y0gQ__",1,"btn","btn-secondary","w-full",3,"click"],[1,"col-span-12","md:col-span-8","mark-editor",3,"ngStyle"],[3,"dataMarkNote","modeView","showBackLink","showCopyLinkTeacher","handleBackLink"],["aztMarkNote",""],[1,"score","ml-auto","flex","items-center"],[1,"border","border-slate-200","dark:border-darkmode-400","rounded-md","p-2","text-danger","text-center","font-medium",2,"width","60px"],[3,"mark"]],template:function(i,o){1&i&&(e.j41(0,"div",0)(1,"div",1),e.DNE(2,Vt,4,7,"ng-container",2),e.j41(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h3",7),e.EFF(8),e.k0s(),e.j41(9,"div",8)(10,"div",9),e.nrm(11,"azt-create-avatar",10),e.j41(12,"div",11)(13,"p",12),e.EFF(14),e.k0s(),e.j41(15,"p",13),e.EFF(16),e.k0s()()(),e.DNE(17,Xt,3,1,"div",14),e.k0s()(),e.j41(18,"div",15)(19,"p",16),e.EFF(20),e.nI1(21,"mytranslate"),e.k0s(),e.j41(22,"div",17)(23,"editor",18),e.bIt("ngModelChange",function(d){return o.commentExercise=d}),e.k0s()()(),e.j41(24,"div",19)(25,"button",20),e.bIt("click",function(){return o.goBack()}),e.EFF(26),e.nI1(27,"mytranslate"),e.k0s()()()()()()()),2&i&&(e.R7$(2),e.Y8G("ngIf",o.jsonData.answer_obj),e.R7$(6),e.SpI(" ",null==o.result||null==o.result.homeworkObj?null:o.result.homeworkObj.name," "),e.R7$(3),e.Y8G("nameCreateAvatar",null==o.result||null==o.result.studentObj?null:o.result.studentObj.fullName)("size",35),e.R7$(3),e.SpI(" ",null==o.result||null==o.result.studentObj?null:o.result.studentObj.fullName," "),e.R7$(2),e.SpI(" ",null==o.result||null==o.result.classroomObj?null:o.result.classroomObj.name," "),e.R7$(1),e.Y8G("ngIf",!o.dataMarkNote.hideMark),e.R7$(3),e.SpI(" ",e.bMT(21,13,"lang_auto_nhan_xet")," "),e.R7$(3),e.FS9("apiKey",o.tinyEditorKey),e.Y8G("ngModel",o.commentExercise)("disabled",!0)("init",o.initDataEditor),e.R7$(3),e.SpI(" ",e.bMT(27,15,"lang_auto_quay_lai")," "))},dependencies:[w.bT,w.B3,j.xn,b.BC,b.vS,zt.p,W.D,Yt.i,D.wp],styles:[".btn-score[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center}.choose-score[_ngcontent-%COMP%]{max-width:80%;margin-left:auto;margin-right:auto}.toolbar-list[_ngcontent-%COMP%]{width:100%;padding:5px;position:absolute;top:0;left:0;display:flex;align-items:center;border-bottom-left-radius:0;border-bottom-right-radius:0}.btn-icon[_ngcontent-%COMP%]{padding:10px;min-width:auto;line-height:initial}.toolbar-item[_ngcontent-%COMP%]{margin:0 3px}.toolbar-item[_ngcontent-%COMP%]:first-child{margin-left:0}.btn-icon-child[_ngcontent-%COMP%]{padding:5px}.azt-toolbar-active[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(var(--color-slate-200)/var(--tw-bg-opacity))}  .dark .azt-toolbar-active{--tw-bg-opacity: 1;background-color:rgb(var(--color-darkmode-200)/var(--tw-bg-opacity))}@media screen and (max-width: 768px){.choose-score[_ngcontent-%COMP%]{max-width:80%}}"]})}return n})();var Ut=c(64160),Jt=c(39471),K=c(17818),Wt=c(18718);function Kt(n,s){if(1&n&&(e.j41(0,"h4",14),e.EFF(1),e.k0s()),2&n){const t=e.XpG();e.R7$(1),e.Lme("",null==t.result||null==t.result.studentObj?null:t.result.studentObj.fullName,", ",null==t.result||null==t.result.classroomObj?null:t.result.classroomObj.name,"")}}function Qt(n,s){if(1&n&&e.nrm(0,"azt-loading-effect",15),2&n){const t=e.XpG();e.Y8G("currentStatusObj",t.statusObj)}}function Zt(n,s){if(1&n&&(e.j41(0,"div",19)(1,"div",20),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()),2&n){const t=e.XpG(2);e.R7$(2),e.JRh(e.bMT(3,1,t.errorMessage))}}function qt(n,s){if(1&n&&(e.j41(0,"div",21),e.nrm(1,"iframe",22),e.nI1(2,"safe"),e.k0s()),2&n){const t=e.XpG(2);e.R7$(1),e.Y8G("src",e.bMT(2,1,t.whiteListMNoteIframeSrc),e.f$h)}}function en(n,s){if(1&n&&(e.j41(0,"div")(1,"div",16),e.DNE(2,Zt,4,3,"div",17),e.k0s()(),e.DNE(3,qt,3,3,"div",18)),2&n){const t=e.XpG();e.R7$(2),e.Y8G("ngIf",""!=t.errorMessage),e.R7$(1),e.Y8G("ngIf",""==t.errorMessage)}}const tn=function(){return{"mr-1":!0}};let oe=(()=>{class n extends P.H{goBack(){this.commonService.myNavigation(""!=this.backToLink&&null!=this.backToLink?this.backToLink:"/bai-tap/"+this.homeworkHashId)}fillData(t){if(t){if(this.zipDataService.convertSubmittedAnswersHistoryObj(t.data?.answerObj),this.result=t.data,this.files=this.commonService.myParseJson(t.data?.answerObj?.files??"")??[],null!==this.files)for(let o=0;o<this.files?.length;o++)this.files&&(this.files[o].url=this.cdnService.getMyCdn(this.files[o].url??""),this.files[o].thumb=this.cdnService.getMyCdn(this.files[o].thumb??""));if(t.data?.answerObj?.confirmedAt){this.isMarked=!0;var i=this.commonService.myParseJson(this.cdnService.getMyCdn(t?.data?.answerObj?.result??""));i&&(this.jsonData=i,null===this.jsonData&&(this.isMarked=!1))}}}getData(t,i){this.initStatusObj(),this.errorMessage="",i?this.frontAnswerHistoryService.apiFrontAnswerHistoryGetObjGet(this.homeworkHashId,i).subscribe(o=>{1==o.success?(this.fillData(o),this.successStatusObj()):(this.errorStatusObj(o.message??"",!0),this.errorMessage=o?.message)}):this.frontAnswerService.apiFrontAnswerGetObjGet(this.homeworkHashId,t).subscribe(o=>{1==o.success?(this.fillData(o),this.successStatusObj()):(this.errorStatusObj(o.message??"",!0),this.errorMessage=o.message)})}copyLinkToClipboard(){const t=this.getMyParam(this.activeRoute,"id"),i=this.getMyParam(this.activeRoute,"studentId");return`${this.commonService.getCurrentDomainWithLanguage()}/admin/homework/switch-mark-exercise/${t}/${this.homeworkHashId}/${i??0}`}showCopySuccess(){this.showSuccessSnack("lang_auto_sao_chep_thanh_cong")}ngAfterViewInit(){window.addEventListener("message",this.handleIframe)}ngOnInit(){this.whiteListMNoteIframeSrc=this.envService.getEnvValue("classliveUrl")??"";let t=this.commonService.getMyParam(this.activeRoute,"id")??"";const i=parseInt(t,10);if(this.homeworkHashId=this.commonService.getMyParam(this.activeRoute,"hash_id")??"",this.backToLink=this.commonService.getMyQueryParam("backto")??"",this.commonService.getMyParam(this.activeRoute,"history_id")){let o=this.commonService.getMyParam(this.activeRoute,"history_id")??"";const r=parseInt(o,10);this.getData(i,r)}else this.getData(i);this.commonService.translateMetaData({title:"lang_cms_student_view_exercise_title",description:"lang_cms_student_view_exercise_description",image:"lang_cms_test_image"}),super.ngOnInit()}constructor(t,i,o,r,d,F){super(),this.activeRoute=t,this.frontAnswerService=i,this.frontAnswerHistoryService=o,this.cdnService=r,this.zipDataService=d,this.envService=F,this.homeworkHashId="",this.isMarked=!1,this.whiteListMNoteIframeSrc="",this.backToLink="",this.files=[],this.handleIframe=N=>{if("MNoteLoadComplete"==N.data){const E=document.getElementById("mNote"),G=E?E.contentWindow:null;if(null!==G){let x=this.result?.hasOwnProperty("answerObj")?this.castObj(this.result.answerObj)??void 0:void 0;if(this.result?.hasOwnProperty("answerObj")){let a=this.commonService.willDeleteParseJson(x?.result??"");if(null!=a){for(let u=0;u<a.pages?.length;u++)a.pages[u].backgroundImage&&(a.pages[u].backgroundImage=this.cdnService.getMyCdn(a.pages[u].backgroundImage)),a.pages[u].draw&&(a.pages[u].draw=this.cdnService.getMyCdn(a.pages[u].draw));a=JSON.stringify(a),null!=x&&(x.result=a)}let m=this.commonService.willDeleteParseJson(x?.files??"");if(null!=m){for(let u=0;u<m?.length;u++)m[u].url&&(m[u].url=this.cdnService.getMyCdn(m[u].url)),m[u].thumb&&(m[u].thumb=this.cdnService.getMyCdn(m[u].thumb));m=JSON.stringify(m),null!=x&&(x.files=m)}}let l=this.result?.hasOwnProperty("studentObj")?this.result.studentObj:void 0,T=this.result?.hasOwnProperty("classroomObj")?this.result.classroomObj:void 0,p=this.result?.hasOwnProperty("homeworkObj")?this.result.homeworkObj:void 0,v=this.commonService.willDeleteParseJson(x?.result??""),S=!(!v||!v.hasOwnProperty("hideMark"))&&v.hideMark;if(this.jsonData&&this.jsonData.hasOwnProperty("pages"))for(let a=0;a<(this.jsonData.pages?.length??0);a++)this.jsonData.pages?.[a].hasOwnProperty("backgroundImage")&&(this.jsonData.pages[a].backgroundImage=this.cdnService.getMyCdn(this.jsonData.pages[a].backgroundImage??"")),this.jsonData.pages?.[a].hasOwnProperty("draw")&&(this.jsonData.pages[a].draw=this.cdnService.getMyCdn(this.jsonData.pages[a].draw??""));if(this.isMarked)this.jsonData.cmd="initMNote",this.jsonData.mode="view",this.jsonData.answer_obj=x,this.jsonData.student_obj=l,this.jsonData.classroom_obj=T,this.jsonData.homework_obj=p,this.jsonData.hideMark=S,G.postMessage(this.jsonData,"*");else{let a=[];this.files.forEach(m=>{a.push({backgroundImage:m.url})}),G.postMessage({cmd:"initMNote",pages:a,answer_obj:x,student_obj:l,classroom_obj:T,homework_obj:p,mode:"view",hideMark:S},"*")}}}}}ngOnDestroy(){window.removeEventListener("message",this.handleIframe),super.ngOnDestroy()}static#e=this.\u0275fac=function(i){return new(i||n)(e.rXU(g.nX),e.rXU($.L5),e.rXU($.Ze),e.rXU(ne.B),e.rXU(J.j),e.rXU(ee.t))};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["app-view-exercise"]],features:[e.Vt3],decls:19,vars:13,consts:[["id","markContainer",1,"maxW1000","pt-3"],[1,"flex","justify-between","titleRow"],[1,"col","center-row"],[1,"btn","btn-sm","btn-outline-secondary","border-none","border-0",3,"matTooltip","click"],["name","chevron-left","size","24",3,"ngClass"],[1,"col","center-row",2,"justify-content","center"],["class","studentInfo","style","padding-right: 10px",4,"ngIf"],[1,"col","center-row",2,"justify-content","flex-end"],["mat-icon-button","",3,"matMenuTriggerFor"],["name","ellipsis-vertical","size","24"],["menu","matMenu"],["azt-track-service","view-homework-Q8Fmec__8U","mat-menu-item","",3,"cdkCopyToClipboard","click"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],["doneLoading",""],[1,"studentInfo",2,"padding-right","10px"],[3,"currentStatusObj"],[1,"flex","justify-center","py-5"],["class","w-full text-center",4,"ngIf"],["class","card-box listPhotos","style","overflow: hidden",4,"ngIf"],[1,"w-full","text-center"],[1,"alert","text-danger"],[1,"card-box","listPhotos",2,"overflow","hidden"],["id","mNote","frameborder","0",2,"width","100%","height","100%",3,"src"]],template:function(i,o){if(1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),e.bIt("click",function(){return o.goBack()}),e.nI1(4,"mytranslate"),e.nrm(5,"lucide-icon",4),e.k0s()(),e.j41(6,"div",5),e.DNE(7,Kt,2,2,"h4",6),e.k0s(),e.j41(8,"div",7)(9,"button",8),e.nrm(10,"lucide-icon",9),e.k0s(),e.j41(11,"mat-menu",null,10)(13,"button",11),e.bIt("click",function(){return o.showCopySuccess()}),e.EFF(14),e.nI1(15,"mytranslate"),e.k0s()()()(),e.DNE(16,Qt,1,1,"azt-loading-effect",12),e.DNE(17,en,4,2,"ng-template",null,13,e.C5r),e.k0s()),2&i){const r=e.sdS(12),d=e.sdS(18);e.R7$(3),e.FS9("matTooltip",e.bMT(4,8,"lang_auto_quay_lai")),e.R7$(2),e.Y8G("ngClass",e.lJ4(12,tn)),e.R7$(2),e.Y8G("ngIf",null==o.result?null:o.result.answerObj),e.R7$(2),e.Y8G("matMenuTriggerFor",r),e.R7$(4),e.Y8G("cdkCopyToClipboard",o.copyLinkToClipboard()),e.R7$(1),e.JRh(e.bMT(15,10,"lang_homework_homework_frontend_utils_copy_send_teacher")),e.R7$(2),e.Y8G("ngIf",o.statusObj.loading)("ngIfElse",d)}},dependencies:[w.YU,w.bT,Ut.dF,Jt.iY,K.kk,K.fb,K.Cp,Z.oV,Wt.K,C.WGl,D.wp,D.JI],styles:["#markContainer[_ngcontent-%COMP%]{position:relative}.center-row[_ngcontent-%COMP%]{display:flex;align-items:center}.titleRow[_ngcontent-%COMP%]{background-color:#00a7d0;height:40px;margin:0;color:#fff}.titleRow[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]:hover{cursor:pointer}.titleRow[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:0;font-weight:500;font-size:16px;-webkit-line-clamp:1;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;display:-webkit-box}.titleRow[_ngcontent-%COMP%]   .score[_ngcontent-%COMP%]{margin-right:5px}button[_ngcontent-%COMP%]{border:none}.listPhotos[_ngcontent-%COMP%]{width:100%;position:fixed;top:40px;bottom:0}.file[_ngcontent-%COMP%]{border-width:0px;background:inherit;background-color:#f2f2f2;box-sizing:border-box;border-width:1px;border-style:solid;border-color:#e5e5e5;border-left:0px;border-right:0px;border-radius:0;box-shadow:none}.file[_ngcontent-%COMP%]:first-child{margin-top:52px}.file[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.back[_ngcontent-%COMP%]{padding:15px 10px}.back-to[_ngcontent-%COMP%]{color:#fff;display:flex}.back-to[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-bottom:10px}.block[_ngcontent-%COMP%]{padding-top:2px}.mat-expansion-indicator[_ngcontent-%COMP%]:after{color:#fff!important}.add-click[_ngcontent-%COMP%]{display:flex}.add-icon[_ngcontent-%COMP%]{margin-top:5px}.file-custom[_ngcontent-%COMP%]{margin-top:6px}.description__share[_ngcontent-%COMP%]{margin-top:10px}.description__share[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#fff;color:#666;margin-right:15px;padding:5px 10px 0}.row-check[_ngcontent-%COMP%]{border-bottom:1px solid #eee;padding:10px 0}.col-check[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:5px}.exercise[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:25px 0 15px;border-bottom:1px solid #eee}.btn-custom[_ngcontent-%COMP%]{background-color:#f39c12;color:#fff;border-radius:5px;padding:10px 25px}.files-custom[_ngcontent-%COMP%]{margin:0}.btn-share[_ngcontent-%COMP%]{border:1px solid #eee}.score-exercise[_ngcontent-%COMP%]{background-color:#ea3d19;border-radius:50%;padding:3px 5px 3px 7px;color:#fff;font-weight:600;margin:0 10px}#listNumber[_ngcontent-%COMP%]{display:contents}#markNumber[_ngcontent-%COMP%]{position:absolute;top:40px;right:50%;z-index:9;margin-right:-60px;color:#fff;text-transform:uppercase;width:120px}@media (min-width: 1000px){.mark-edit[_ngcontent-%COMP%]{width:250px}.file[_ngcontent-%COMP%]:first-child{margin-top:0}.listPhotos[_ngcontent-%COMP%]{width:1000px}}"]})}return n})();const nn=[{path:"",component:re,canActivate:[B.L],children:[{path:":hash_id",component:Nt},{path:"view-homework/:id/:hash_id",component:oe},{path:"view-homework/:id/:hash_id/:history_id",component:oe},{path:"switch-view-homework/:id/:hash_id",component:te},{path:"switch-view-homework/:id/:hash_id/:history_id",component:te},{path:"view-homework-new/:id/:hash_id",component:ie},{path:"view-homework-new/:id/:hash_id/:history_id",component:ie}]}];let on=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=e.$C({type:n});static#n=this.\u0275inj=e.G2t({imports:[g.iI.forChild(nn),g.iI,U.XE]})}return n})(),rn=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=e.$C({type:n});static#n=this.\u0275inj=e.G2t({providers:[{provide:j.vn,useValue:X.c.azt_tiny_mce_script_src}],imports:[z.Id,g.iI,w.MD,_.s,j.sv,b.YN,b.X1,R.hM,h.L,k.Lk,on,y.xv,I.Q,M.b,C.flO.pick(C.Ptg),f.n]})}return n})()},34158:(A,H,c)=>{"use strict";c.d(H,{L:()=>g});var w=c(26860),b=c(36484),R=c(39307);let g=(()=>{class j{constructor(k,y){this.userService=k,this.redirectService=y}canActivate(k,y){return!!this.userService.isLogin()||(this.redirectService.redirectLoginAnonymous(y.url),!1)}canActivateChild(k,y){return this.canActivate(k,y)}canLoad(k){const y=`/${k.path}`;return!!this.userService.isLogin()||(this.redirectService.redirectLoginByReturnUrl(y),!1)}static#e=this.\u0275fac=function(y){return new(y||j)(w.KVO(b.R),w.KVO(R.m))};static#t=this.\u0275prov=w.jDH({token:j,factory:j.\u0275fac,providedIn:"root"})}return j})()},10296:(A,H,c)=>{"use strict";c.d(H,{R:()=>k});var w=c(43277),R=c(18148),g=c(26860),j=c(18350),C=c(25693);let k=(()=>{class y{constructor(_,h){this.mobileWebviewService=_,this.commonService=h}shareFileWithBlob(_,h){if(this.commonService.isMobileWebview(void 0)){R.L.openLoadingEffect(this.commonService.myTranslateInstant("lang_auto_dang_lay_du_lieu_tu_he_thong")??"");let M=new FileReader;M.readAsDataURL(_),M.onloadend=()=>{let f=M.result;"string"==typeof f&&(this.mobileWebviewService.sendShareFileBase64(h,String(f)),R.L.closeLoadingEffect(100))}}else w.saveAs(_,h)}shareFileWithBase64(_,h){this.commonService.isMobileWebview(void 0)?this.mobileWebviewService.sendShareFileBase64(h,_):w.saveAs(_,h)}static#e=this.\u0275fac=function(h){return new(h||y)(g.KVO(j.f),g.KVO(C.R))};static#t=this.\u0275prov=g.jDH({token:y,factory:y.\u0275fac,providedIn:"root"})}return y})()},18148:(A,H,c)=>{"use strict";c.d(H,{L:()=>w});let w=(()=>{class b{static#e=this.idComponent="azt-status-loading-effect";static#t=this.idStatusContent="azt-status-loading-effect-content";static openLoadingEffect(g){b.getDomElement().style.display="flex",setTimeout(()=>{b.changeMsgLoadingEffect(g)},50)}static closeLoadingEffect(g){return new Promise(j=>{setTimeout(()=>{const C=b.getDomElement();C&&(C.style.display="none"),j(!0)},g)})}static changeMsgLoadingEffect(g){b.getDomContent().innerText=g}static getDomContent(){return document.getElementById(b.idStatusContent)??document.createElement("span")}static getDomElement(){return document.getElementById(b.idComponent)??this.createDomElement()}static createDomElement(){const g=document.createElement("div");return g.id=b.idComponent,g.setAttribute("style","position: fixed;display: flex;width: 100vw;height: 100%;background: #000000c7;color: #ffffff;font-size: 20px;font-weight: lighter;justify-content: center;align-items: center;cursor: progress;z-index: 9999;top: 0;left: 0;"),g.style.display="none",g.innerHTML=`\n        <div class="text-center" style="height: 85%; overflow-x: auto;">\n            <div class="flex justify-center mt-5">\n                <svg width="20" viewBox="0 0 58 58" xmlns="http://www.w3.org/2000/svg">\n                    <g fill="none" fill-rule="evenodd">\n                        <g transform="translate(2 1)" stroke="currentColor" stroke-width="1.5">\n                            <circle cx="42.601" cy="11.462" r="5" fill-opacity="1" fill="currentColor">\n                                <animate attributeName="fill-opacity" begin="0s" dur="1.3s" values="1;0;0;0;0;0;0;0" calcMode="linear" repeatCount="indefinite"></animate>\n                            </circle>\n                            <circle cx="49.063" cy="27.063" r="5" fill-opacity="0" fill="currentColor">\n                                <animate attributeName="fill-opacity" begin="0s" dur="1.3s" values="0;1;0;0;0;0;0;0" calcMode="linear" repeatCount="indefinite"></animate>\n                            </circle>\n                            <circle cx="42.601" cy="42.663" r="5" fill-opacity="0" fill="currentColor">\n                                <animate attributeName="fill-opacity" begin="0s" dur="1.3s" values="0;0;1;0;0;0;0;0" calcMode="linear" repeatCount="indefinite"></animate>\n                            </circle>\n                            <circle cx="27" cy="49.125" r="5" fill-opacity="0" fill="currentColor">\n                                <animate attributeName="fill-opacity" begin="0s" dur="1.3s" values="0;0;0;1;0;0;0;0" calcMode="linear" repeatCount="indefinite"></animate>\n                            </circle>\n                            <circle cx="11.399" cy="42.663" r="5" fill-opacity="0" fill="currentColor">\n                                <animate attributeName="fill-opacity" begin="0s" dur="1.3s" values="0;0;0;0;1;0;0;0" calcMode="linear" repeatCount="indefinite"></animate>\n                            </circle>\n                            <circle cx="4.938" cy="27.063" r="5" fill-opacity="0" fill="currentColor">\n                                <animate attributeName="fill-opacity" begin="0s" dur="1.3s" values="0;0;0;0;0;1;0;0" calcMode="linear" repeatCount="indefinite"></animate>\n                            </circle>\n                            <circle cx="11.399" cy="11.462" r="5" fill-opacity="0" fill="currentColor">\n                                <animate attributeName="fill-opacity" begin="0s" dur="1.3s" values="0;0;0;0;0;0;1;0" calcMode="linear" repeatCount="indefinite"></animate>\n                            </circle>\n                            <circle cx="27" cy="5" r="5" fill-opacity="0" fill="currentColor">\n                                <animate attributeName="fill-opacity" begin="0s" dur="1.3s" values="0;0;0;0;0;0;0;1" calcMode="linear" repeatCount="indefinite"></animate>\n                            </circle>\n                        </g>\n                    </g>\n                </svg>\n            </div>\n            <div style="margin-top: 10px;position: relative;">\n                <span id="${b.idStatusContent}"></span>\n            </div>\n        </div>`,document.body.appendChild(g),g}}return b})()},43277:function(A,H){var c,b;void 0!==(b="function"==typeof(c=function(){"use strict";function g(_,h,M){var f=new XMLHttpRequest;f.open("GET",_),f.responseType="blob",f.onload=function(){z(f.response,h,M)},f.onerror=function(){console.error("could not download file")},f.send()}function j(_){var h=new XMLHttpRequest;h.open("HEAD",_,!1);try{h.send()}catch{}return 200<=h.status&&299>=h.status}function C(_){try{_.dispatchEvent(new MouseEvent("click"))}catch{var h=document.createEvent("MouseEvents");h.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),_.dispatchEvent(h)}}var k="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,y=k.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),z=k.saveAs||("object"!=typeof window||window!==k?function(){}:"download"in HTMLAnchorElement.prototype&&!y?function(_,h,M){var f=k.URL||k.webkitURL,I=document.createElement("a");I.download=h=h||_.name||"download",I.rel="noopener","string"==typeof _?(I.href=_,I.origin===location.origin?C(I):j(I.href)?g(_,h,M):C(I,I.target="_blank")):(I.href=f.createObjectURL(_),setTimeout(function(){f.revokeObjectURL(I.href)},4e4),setTimeout(function(){C(I)},0))}:"msSaveOrOpenBlob"in navigator?function(_,h,M){if(h=h||_.name||"download","string"!=typeof _)navigator.msSaveOrOpenBlob(function R(_,h){return typeof h>"u"?h={autoBom:!1}:"object"!=typeof h&&(console.warn("Deprecated: Expected third argument to be a object"),h={autoBom:!h}),h.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(_.type)?new Blob(["\ufeff",_],{type:_.type}):_}(_,M),h);else if(j(_))g(_,h,M);else{var f=document.createElement("a");f.href=_,f.target="_blank",setTimeout(function(){C(f)})}}:function(_,h,M,f){if((f=f||open("","_blank"))&&(f.document.title=f.document.body.innerText="downloading..."),"string"==typeof _)return g(_,h,M);var I="application/octet-stream"===_.type,X=/constructor/i.test(k.HTMLElement)||k.safari,U=/CriOS\/[\d]+/.test(navigator.userAgent);if((U||I&&X||y)&&typeof FileReader<"u"){var B=new FileReader;B.onloadend=function(){var L=B.result;L=U?L:L.replace(/^data:[^;]*;/,"data:attachment/file;"),f?f.location.href=L:location=L,f=null},B.readAsDataURL(_)}else{var P=k.URL||k.webkitURL,e=P.createObjectURL(_);f?f.location=e:location.href=e,f=null,setTimeout(function(){P.revokeObjectURL(e)},4e4)}});k.saveAs=z.saveAs=z,A.exports=z})?c.apply(H,[]):c)&&(A.exports=b)}}]);