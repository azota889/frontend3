"use strict";(self.webpackChunkBalacoClient=self.webpackChunkBalacoClient||[]).push([[6980],{88674:(A,O,l)=>{l.d(O,{s:()=>h});var t=l(56223),m=l(19347),f=l(72164),c=l(91765),a=l(65879),_=l(75470),b=l(96814),g=l(67679),x=l(36727);function v(p,s){1&p&&(a.TgZ(0,"div",11)(1,"span"),a._uU(2),a.ALo(3,"mytranslate"),a.qZA()()),2&p&&(a.xp6(2),a.hij(" ",a.lcZ(3,1,"lang_student_classroom_list_utils_create_class_request_enter_class")," "))}let h=(()=>{class p extends f.e{btnCloseDialog(){this.dialogRef.close()}saveClass(){if(this.form.invalid||this.statusObj.loading)this.showErrorSnack("lang_auto_vui_long_dien_day_du_thong_tin");else{this.initStatusObj();let i=(new Date).getFullYear(),k={classroomName:this.getFormValue().className,year:`${i} - ${i+1}`};this.classroomGroupService.apiClassroomGroupCreateClassroomWithGroupPost(k).subscribe(D=>{1==D.success?(this.successStatusObj(),this.showSuccessSnack("lang_auto_tao_thanh_cong_lop_hoc"),this.dialogRef.close(D.data)):(this.stopStatusObj(),this.showErrorSnack("lang_auto_tao_lop_hoc_khong_thanh_cong_vui_long_kiem_tra_lai_du_lieu"))})}}getFormValue(){return this.form.getRawValue()}ngOnInit(){super.ngOnInit()}constructor(i,C,k){super(k,C),this.classroomGroupService=i,this.dialogRef=C,this.data=k,this.form=new t.cw({className:new t.NI("",{nonNullable:!0,validators:[t.kI.required,c._.noWhiteSpace]})})}}return p.\u0275fac=function(i){return new(i||p)(a.Y36(_.c8),a.Y36(m.so,8),a.Y36(m.WI))},p.\u0275cmp=a.Xpm({type:p,selectors:[["create-classroom"]],features:[a.qOj],decls:18,vars:15,consts:[[1,"box"],[3,"formGroup"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5"],[1,"text-md","font-medium","flex","items-center"],[1,"mt-2"],["type","text","formControlName","className",1,"form-control",3,"placeholder"],["class","text-xs text-danger font-medium mt-1",4,"ngIf"],[1,"p-3","text-right"],["azt-track-service","create-classroom-dialog-U1melptHG5",1,"btn","btn-secondary","w-24","mr-2",3,"click"],["azt-track-service","create-classroom-dialog-UgZXPvjLFu",1,"btn","w-24","btn-primary",3,"disabled","click"],[1,"text-xs","text-danger","font-medium","mt-1"]],template:function(i,C){1&i&&(a.TgZ(0,"div",0)(1,"form",1)(2,"div",2)(3,"div",3)(4,"h3",4),a._uU(5),a.ALo(6,"mytranslate"),a.qZA(),a.TgZ(7,"div",5),a._UZ(8,"input",6),a.ALo(9,"mytranslate"),a.qZA(),a.YNc(10,v,4,3,"div",7),a.qZA()(),a.TgZ(11,"div",8)(12,"button",9),a.NdJ("click",function(){return C.btnCloseDialog()}),a._uU(13),a.ALo(14,"mytranslate"),a.qZA(),a.TgZ(15,"button",10),a.NdJ("click",function(){return C.saveClass()}),a._uU(16),a.ALo(17,"mytranslate"),a.qZA()()()()),2&i&&(a.xp6(1),a.Q6J("formGroup",C.form),a.xp6(4),a.hij(" ",a.lcZ(6,7,"lang_auto_tao_lop")," "),a.xp6(3),a.s9C("placeholder",a.lcZ(9,9,"lang_auto_nhap_ten_lop")),a.xp6(2),a.Q6J("ngIf",C.form.controls.className.dirty&&C.form.controls.className.errors),a.xp6(3),a.hij(" ",a.lcZ(14,11,"lang_auto_dong")," "),a.xp6(2),a.Q6J("disabled",C.form.invalid),a.xp6(1),a.hij(" ",a.lcZ(17,13,"lang_auto_luu")," "))},dependencies:[b.O5,t._Y,t.Fj,t.JJ,t.JL,t.sg,t.u,g.M,x.JV],encapsulation:2}),p})()},44683:(A,O,l)=>{l.d(O,{WG:()=>v,o8:()=>b});var t=l(29023),m=l(65879),f=l(16676),c=l.n(f),a=l(46558);const _=c()||f,b=new m.OlP("MAT_MOMENT_DATE_ADAPTER_OPTIONS",{providedIn:"root",factory:function g(){return{useUtc:!1}}});function x(h,p){const s=Array(h);for(let i=0;i<h;i++)s[i]=p(i);return s}let v=(()=>{class h extends t.fM{constructor(s){super(),this._options=s,this.commonService=(0,m.f3M)(a.z),this._localeData={firstDayOfWeek:0,longMonths:"",shortMonths:"",dates:"",longDaysOfWeek:"",shortDaysOfWeek:"",narrowDaysOfWeek:""},_.locale(),this.setLocale(this.commonService.getCurrentLang()||_.locale())}setLocale(s){super.setLocale(s);const i=_.localeData(s);this._localeData={firstDayOfWeek:i.firstDayOfWeek(),longMonths:i.months(),shortMonths:i.monthsShort(),dates:x(31,C=>this.createDate(2017,0,C+1).format("D")),longDaysOfWeek:i.weekdays(),shortDaysOfWeek:i.weekdaysShort(),narrowDaysOfWeek:i.weekdaysMin()}}getYear(s){return this.clone(s).year()}getMonth(s){return this.clone(s).month()}getDate(s){return this.clone(s).date()}getDayOfWeek(s){return this.clone(s).day()}getMonthNames(s){return"long"===s?this._localeData.longMonths:this._localeData.shortMonths}getDateNames(){return this._localeData.dates}getDayOfWeekNames(s){return"long"===s?this._localeData.longDaysOfWeek:"short"===s?this._localeData.shortDaysOfWeek:this._localeData.narrowDaysOfWeek}getYearName(s){return this.clone(s).format("YYYY")}getFirstDayOfWeek(){return this._localeData.firstDayOfWeek}getNumDaysInMonth(s){return this.clone(s).daysInMonth()}clone(s){return s.clone().locale(this.locale)}createDate(s,i,C){if(i<0||i>11)throw Error(`Invalid month index "${i}". Month index has to be between 0 and 11.`);if(C<1)throw Error(`Invalid date "${C}". Date has to be greater than 0.`);const k=this._createMoment({year:s,month:i,date:C}).locale(this.locale);if(!k.isValid())throw Error(`Invalid date "${C}" for month with index "${i}".`);return k}today(){return this._createMoment().locale(this.locale)}parse(s,i){return s&&"string"==typeof s?this._createMoment(s,i,this.locale):s?this._createMoment(s).locale(this.locale):null}format(s,i){if(s=this.clone(s),!this.isValid(s))throw Error("MomentDateAdapter: Cannot format invalid date.");return s.format(i)}addCalendarYears(s,i){return this.clone(s).add({years:i})}addCalendarMonths(s,i){return this.clone(s).add({months:i})}addCalendarDays(s,i){return this.clone(s).add({days:i})}toIso8601(s){return this.clone(s).format()}deserialize(s){let i;if(s instanceof Date)i=this._createMoment(s).locale(this.locale);else if(this.isDateInstance(s))return this.clone(s);if("string"==typeof s){if(!s)return null;i=this._createMoment(s,_.ISO_8601).locale(this.locale)}return i&&this.isValid(i)?this._createMoment(i).locale(this.locale):super.deserialize(s)}isDateInstance(s){return _.isMoment(s)}isValid(s){return this.clone(s).isValid()}invalid(){return _.invalid()}getHour(s){return s.hours()}getMinute(s){return s.minutes()}getSecond(s){return s.seconds()}setHour(s,i){s.hours(i)}setMinute(s,i){s.minutes(i)}setSecond(s,i){s.seconds(i)}_createMoment(s,i,C){const{strict:k,useUtc:D}=this._options||{};return D?_.utc(s,i,C,k):_(s,i,C,k)}}return h.\u0275fac=function(s){return new(s||h)(m.LFG(b,8))},h.\u0275prov=m.Yz7({token:h,factory:h.\u0275fac}),h})()},76359:(A,O,l)=>{l.d(O,{y:()=>t});var t=function(m){return m[m.homework=0]="homework",m[m.exam=1]="exam",m[m.classroom=2]="classroom",m[m.student=3]="student",m}(t||{})},45337:(A,O,l)=>{l.d(O,{T:()=>f});var t=l(65879),m=l(46558);let f=(()=>{class c{resizeDrawerHeight(_,b){if(this.autoResizeHeight=_,this.drawer=b,this.drawer&&this.autoResizeHeight){let g=()=>{let h=document.querySelector(".azt-drawer-content"),p=document.querySelector(".azt-draw-left");if(p&&p instanceof HTMLElement&&h&&h instanceof HTMLElement){let s=h;s.style.minHeight=this.isOpenSideNav?p.clientHeight+10+"px":"auto"}},x=new ResizeObserver(h=>{g()}),v=document.querySelector(".azt-draw-left");v&&x.observe(v),g()}}openDrawer(){this.drawer?.open(),this.isOpenSideNav=!0}closeDrawer(){this.drawer?.close(),this.isOpenSideNav=!1}toggleDrawer(){this.drawer?.toggle(),this.isOpenSideNav=!this.isOpenSideNav}openedChange(_){this.isOpenSideNav=_,this.resizeDrawerHeight(this.autoResizeHeight)}changeToMobileMode(_){_?(this.mode="over",this.hasBackdrop=!0):(this.mode="side",this.hasBackdrop=!1)}constructor(_){this.commonService=_,this.hasBackdrop=!!this.commonService.isMobileOrTable(),this.mode=this.commonService.isMobileOrTable()?"over":"side",this.isShowActions=(this.commonService.isMobileOrTable(),!0),this.isOpenSideNav=!this.commonService.isMobileOrTable(),this.autoResizeHeight=!1}}return c.\u0275fac=function(_){return new(_||c)(t.LFG(m.z))},c.\u0275prov=t.Yz7({token:c,factory:c.\u0275fac,providedIn:null}),c})()},47180:(A,O,l)=>{l.d(O,{h:()=>t});class t{static classroomCheckBoxValidator(f){const c=f,a=c.controls.whoAllow.value,_=c.controls.classroomIds;return a&&_?2!=a||t.countCheckBox(_.value)>=1?(c.controls.classroomIds.setErrors(null),null):(c.controls.classroomIds.setErrors({classroomCheckBoxValidator:!0}),{identityRevealed:!0}):null}static classroomInGroupCheckBoxValidator(f){const c=f,a=c.controls.whoAllow.value,_=c.controls.classroomFormArray;return a&&_?2!=a||t.countCheckBoxInGroup(_)>=1?(c.controls.classroomFormArray.setErrors(null),null):(c.controls.classroomFormArray.setErrors({classroomCheckBoxValidator:!0}),{identityRevealed:!0}):null}static classroomCheckBoxValidatorWithoutWhoAllow(f){const c=f,a=c.controls.classroomIds;return a?t.countCheckBox(a.value)>=1?(c.controls.classroomIds.setErrors(null),null):(c.controls.classroomIds.setErrors({classroomCheckBoxValidatorWithoutWhoAllow:!0}),{identityRevealed:!0}):null}static countCheckBox(f){return f.filter(c=>c).length}static classroomInGroupCheckBoxValidatorWithoutWhoAllow(f){const c=f,a=c.controls.classroomFormArray;return a?t.countCheckBoxInGroup(a)>0?(c.controls.classroomFormArray.setErrors(null),null):(c.controls.classroomFormArray.setErrors({classroomInGroupCheckBoxValidatorWithoutWhoAllow:!0}),{identityRevealed:!0}):null}static countCheckBoxInGroup(f){return f.getRawValue().filter(c=>c.isChecked).length}}},69741:(A,O,l)=>{l.d(O,{_:()=>nt});var t=l(65879),m=l(56223),f=l(88674),c=l(76359),a=l(45337),_=l(47496),b=l(63278),g=l(2783),x=l(90592),v=l(94690),h=l(96814),p=l(77988),s=l(32651),i=l(92596),C=l(95545),k=l(37722),D=l(25368),I=l(36727);function E(r,u){if(1&r){const e=t.EpF();t.TgZ(0,"div",3)(1,"div",4)(2,"div",5),t._uU(3),t.ALo(4,"mytranslate"),t.TgZ(5,"a",6),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.openDialogCreateClassroom())}),t._uU(6),t.ALo(7,"mytranslate"),t.qZA(),t._uU(8),t.ALo(9,"mytranslate"),t.qZA()()()}2&r&&(t.xp6(3),t.hij(" ",t.lcZ(4,3,"lang_auto_thay_co_chua_tao_lop_vui_long_click")," "),t.xp6(3),t.hij(" ",t.lcZ(7,5,"lang_testbank_test_config_come_in")," "),t.xp6(2),t.hij(" ",t.lcZ(9,7,"lang_testbank_test_config_create_classroom"),". "))}const y=function(r){return{"bg-primary text-white font-medium":r}};function M(r,u){if(1&r){const e=t.EpF();t.TgZ(0,"button",54),t.NdJ("click",function(){t.CHM(e),t.oxw();const n=t.MAs(65),d=t.oxw();return t.KtG(d.selectClassGroup(0,n))}),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()}if(2&r){const e=t.oxw(2);t.Q6J("ngClass",t.VKq(4,y,0===e.classGroupId)),t.xp6(1),t.hij(" ",t.lcZ(2,2,"lang_auto_tat_ca")," ")}}function N(r,u){if(1&r){const e=t.EpF();t.TgZ(0,"button",56),t.NdJ("click",function(){const d=t.CHM(e).$implicit;t.oxw(2);const w=t.MAs(65),T=t.oxw();return t.KtG(T.selectClassGroup(d.groupObj.id,w))}),t._uU(1),t.ALo(2,"mytranslate"),t.ALo(3,"mytranslate"),t.qZA()}if(2&r){const e=u.$implicit,o=t.oxw(3);t.Q6J("ngClass",t.VKq(6,y,o.classGroupId===e.groupObj.id)),t.xp6(1),t.hij(" ",t.lcZ(2,2,e.groupObj.name)+" ("+e.totalChecked+"/"+e.classroomObjs.length+" "+t.lcZ(3,4,"lang_testbank_test_list_classes")+")"," ")}}const z=function(){return["groupName"]};function S(r,u){if(1&r&&(t.ynx(0),t.YNc(1,N,4,8,"button",55),t.ALo(2,"appFilter"),t.BQk()),2&r){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",t.Dn7(2,1,e.mapClassroomGroupDataToForm,e.searchContentObjGroup.searchContent,t.DdM(5,z)))}}function L(r,u){if(1&r){const e=t.EpF();t.TgZ(0,"button",57),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.sAztMatDrawerService.openDrawer())}),t.ALo(1,"mytranslate"),t.O4$(),t.TgZ(2,"svg",58),t._UZ(3,"rect",59)(4,"path",60)(5,"path",61),t.qZA()()}2&r&&t.s9C("matTooltip",t.lcZ(1,1,"lang_auto_mo_menu"))}function Z(r,u){if(1&r){const e=t.EpF();t.TgZ(0,"button",62),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.sAztMatDrawerService.closeDrawer())}),t.ALo(1,"mytranslate"),t.O4$(),t.TgZ(2,"svg",58),t._UZ(3,"rect",59)(4,"path",60)(5,"path",63),t.qZA()()}2&r&&t.s9C("matTooltip",t.lcZ(1,1,"lang_auto_dong_menu"))}function j(r,u){if(1&r&&(t.TgZ(0,"span",64),t._uU(1),t.qZA()),2&r){const e=t.oxw(2);t.xp6(1),t.hij(" ",(e.filterObj.isShowChecked?1:0)+(e.filterObj.isShowNotChecked?1:0)," ")}}function F(r,u){if(1&r){const e=t.EpF();t.TgZ(0,"input",72),t.NdJ("change",function(){t.CHM(e);const n=t.oxw(3);return t.KtG(n.toggleAllCheckBox(!1))}),t.qZA()}if(2&r){const e=t.oxw(3);t.Q6J("formControl",e.isCheckAll)}}function P(r,u){if(1&r){const e=t.EpF();t.TgZ(0,"input",72),t.NdJ("change",function(){t.CHM(e);const n=t.oxw(3);return t.KtG(n.toggleAllCheckBox(!0))}),t.qZA()}if(2&r){const e=t.oxw(3);t.Q6J("formControl",e.isCheckAll)}}function G(r,u){1&r&&(t.ynx(0),t._uU(1),t.ALo(2,"mytranslate"),t.BQk()),2&r&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_remove_all_classroom")," "))}function W(r,u){1&r&&(t._uU(0),t.ALo(1,"mytranslate")),2&r&&t.hij(" ",t.lcZ(1,1,"lang_select_all_classroom")," ")}function B(r,u){if(1&r&&(t.TgZ(0,"div",65)(1,"div",66)(2,"div",67),t.YNc(3,F,1,1,"input",68),t.YNc(4,P,1,1,"input",68),t.TgZ(5,"label",69)(6,"label",69),t.YNc(7,G,3,3,"ng-container",70),t.YNc(8,W,2,3,"ng-template",null,71,t.W1O),t.qZA()()()()()),2&r){const e=t.MAs(9),o=t.oxw(2);t.xp6(3),t.Q6J("ngIf",o.isCheckAll.value),t.xp6(1),t.Q6J("ngIf",!o.isCheckAll.value),t.xp6(3),t.Q6J("ngIf",o.isCheckAll.value)("ngIfElse",e)}}function U(r,u){if(1&r&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&r){const e=t.oxw(3).$implicit;t.xp6(1),t.Oqu(" ("+e.totalChecked+"/"+e.classroomObjs.length+" "+t.lcZ(2,1,"lang_testbank_test_list_classes")+")")}}function J(r,u){if(1&r&&(t.TgZ(0,"div",77),t._uU(1),t.ALo(2,"mytranslate"),t.YNc(3,U,3,3,"span",2),t.qZA()),2&r){const e=t.oxw(2).$implicit,o=t.oxw(2);t.xp6(1),t.hij(" ",t.lcZ(2,2,e.groupObj.name)+" "," "),t.xp6(2),t.Q6J("ngIf",!o.sAztMatDrawerService.isOpenSideNav)}}function R(r,u){if(1&r){const e=t.EpF();t.TgZ(0,"input",85),t.NdJ("change",function(){t.CHM(e);const n=t.oxw(7);return t.KtG(n.changeCheckboxEventLocal())}),t.qZA()}if(2&r){const e=t.oxw(3).$implicit;t.s9C("id","azt-checkbox-item-"+e.id),t.s9C("value",e.id),t.Q6J("formControl",e.classroomFormGroup.controls.isChecked)}}function K(r,u){if(1&r&&(t.TgZ(0,"span",86),t._uU(1),t.ALo(2,"slice"),t.qZA()),2&r){const e=t.oxw(3).$implicit;t.s9C("matTooltip",e.name),t.xp6(1),t.AsE(" ",t.Dn7(2,3,e.name,0,25)+"..."," (",e.countStudents,") ")}}function Q(r,u){if(1&r&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&r){const e=t.oxw(3).$implicit;t.xp6(1),t.AsE("",e.name," (",e.countStudents,")")}}function Y(r,u){1&r&&(t.TgZ(0,"span",87),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&r&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_test_config_share")," "))}function H(r,u){if(1&r&&(t.TgZ(0,"div",79)(1,"div",80),t.YNc(2,R,1,3,"input",81),t.TgZ(3,"label",82),t.YNc(4,K,3,7,"span",83),t.YNc(5,Q,2,2,"span",2),t.YNc(6,Y,3,3,"span",84),t.ALo(7,"fullPermission"),t.qZA()()()),2&r){const e=t.oxw(2).$implicit;let o,n;t.xp6(2),t.Q6J("ngIf",e.classroomFormGroup),t.xp6(1),t.s9C("for","azt-checkbox-item-"+e.id),t.xp6(1),t.Q6J("ngIf",(null!==(o=null==e.name?null:e.name.length)&&void 0!==o?o:0)>25),t.xp6(1),t.Q6J("ngIf",(null!==(n=null==e.name?null:e.name.length)&&void 0!==n?n:0)<=25),t.xp6(1),t.Q6J("ngIf",!t.xi3(7,5,e,"classroom"))}}function V(r,u){if(1&r&&(t.ynx(0),t.YNc(1,H,8,8,"div",78),t.BQk()),2&r){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",e.isShowInFilter)}}function q(r,u){if(1&r&&(t.ynx(0),t.YNc(1,V,2,1,"ng-container",2),t.BQk()),2&r){const e=u.$implicit,o=t.oxw(4);t.xp6(1),t.Q6J("ngIf",!o.filterObj.isShowChecked&&!o.filterObj.isShowNotChecked||o.filterObj.isShowChecked&&e.classroomFormGroup.controls.isChecked.value||o.filterObj.isShowNotChecked&&!e.classroomFormGroup.controls.isChecked.value)}}function $(r,u){if(1&r&&(t.ynx(0),t.YNc(1,J,4,4,"div",74),t.TgZ(2,"div",75),t.YNc(3,q,2,1,"ng-container",76),t.qZA(),t.BQk()),2&r){const e=t.oxw().$implicit,o=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.groupObj.id===o.classGroupId||!o.classGroupId),t.xp6(2),t.Q6J("ngForOf",e.classroomObjs)}}const X=function(r){return{"mb-5":r}};function tt(r,u){if(1&r&&(t.TgZ(0,"div",73),t.YNc(1,$,4,2,"ng-container",2),t.qZA()),2&r){const e=u.$implicit,o=t.oxw(2);t.Q6J("ngClass",t.VKq(2,X,!o.classGroupId)),t.xp6(1),t.Q6J("ngIf",e.totalClassroomShowInFilter)}}function et(r,u){1&r&&(t.TgZ(0,"div",88),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&r&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_student_classroom_list_class_null")," "))}function ot(r,u){1&r&&(t.TgZ(0,"div",89)(1,"div",90),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&r&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"lang_testbank_test_config_you_not_yet_class")," "))}const st=function(r,u){return{"w-85":r,"w-56":u}},rt=function(r){return{"ml-3":r}};function at(r,u){if(1&r){const e=t.EpF();t.TgZ(0,"div")(1,"form",7)(2,"div",8),t._uU(3),t.ALo(4,"mytranslate"),t.qZA(),t.TgZ(5,"mat-drawer-container",9)(6,"mat-drawer",10,11),t.NdJ("openedChange",function(n){t.CHM(e);const d=t.oxw();return t.KtG(d.sAztMatDrawerService.openedChange(n))}),t.TgZ(8,"div",12)(9,"div",13)(10,"div",14),t._UZ(11,"azt-search-box",15),t.ALo(12,"mytranslate"),t.qZA()(),t.TgZ(13,"div",16)(14,"ng-scrollbar",17)(15,"div",18),t.YNc(16,M,3,6,"button",19),t.YNc(17,S,3,6,"ng-container",2),t.qZA()()()()(),t.TgZ(18,"mat-drawer-content")(19,"div",20)(20,"div",21)(21,"div",13),t.YNc(22,L,6,3,"button",22),t.YNc(23,Z,6,3,"button",23),t.TgZ(24,"div",24)(25,"div",25)(26,"azt-search-box",26),t.NdJ("onSearch",function(n){t.CHM(e);const d=t.oxw();return t.KtG(d.search(n.searchObj))}),t.ALo(27,"mytranslate"),t.qZA()(),t.TgZ(28,"div",27)(29,"button",28)(30,"span",29),t._UZ(31,"lucide-icon",30),t.qZA(),t.TgZ(32,"span",31),t._uU(33),t.ALo(34,"mytranslate"),t.YNc(35,j,2,1,"span",32),t.qZA()()(),t.TgZ(36,"mat-menu",null,33)(38,"div",34)(39,"ul",35)(40,"li")(41,"label",36),t.NdJ("click",function(n){return n.stopPropagation()}),t._uU(42),t.ALo(43,"mytranslate"),t.TgZ(44,"div",37)(45,"input",38),t.NdJ("change",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.filterObj.isShowChecked=!n.filterObj.isShowChecked)}),t.qZA()()()(),t.TgZ(46,"li")(47,"label",39),t.NdJ("click",function(n){return n.stopPropagation()}),t._uU(48),t.ALo(49,"mytranslate"),t.TgZ(50,"div",37)(51,"input",40),t.NdJ("change",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.filterObj.isShowNotChecked=!n.filterObj.isShowNotChecked)}),t.qZA()()()(),t.TgZ(52,"li"),t._UZ(53,"hr",41),t.qZA(),t.TgZ(54,"li")(55,"div",42)(56,"button",43),t._uU(57),t.ALo(58,"mytranslate"),t.qZA(),t.TgZ(59,"div",44),t.NdJ("click",function(n){return n.stopPropagation()}),t.TgZ(60,"button",45),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.clearFilter())}),t._uU(61),t.ALo(62,"mytranslate"),t.qZA()()()()()()()()(),t.TgZ(63,"div",46)(64,"ng-scrollbar",47,48)(66,"div",49),t.YNc(67,B,10,4,"div",50),t.YNc(68,tt,2,4,"div",51),t.YNc(69,et,3,3,"div",52),t.qZA()()()()()()(),t.YNc(70,ot,4,3,"div",53),t.qZA()()}if(2&r){const e=t.MAs(37),o=t.oxw();t.xp6(1),t.Q6J("formGroup",o.form),t.xp6(2),t.hij(" ",t.lcZ(4,36,"lang_auto_da_chon")+": "+o.totalChecked+"/"+o.totalClassroom," "),t.xp6(2),t.Akn("height: "+o.heightClassroomCheckBox),t.Q6J("hasBackdrop",o.sAztMatDrawerService.hasBackdrop),t.xp6(1),t.s9C("opened",o.sAztMatDrawerService.isOpenSideNav?"true":"false"),t.Q6J("ngClass",t.WLB(52,st,o.isMobileDevice,!o.isMobileDevice))("mode",o.sAztMatDrawerService.mode),t.xp6(5),t.Q6J("isServerSearch",!1)("placeholder",t.lcZ(12,38,"lang_azt_search_class_group"))("searchContentObj",o.searchContentObjGroup)("styleInput","pr-10 py-1"),t.xp6(3),t.Q6J("visibility","hover"),t.xp6(2),t.Q6J("ngIf",!o.searchContentObjGroup.searchContent),t.xp6(1),t.Q6J("ngIf",o.classroomGroupData.length),t.xp6(2),t.Q6J("ngClass",t.VKq(55,rt,!o.isMobileDevice&&o.sAztMatDrawerService.isOpenSideNav)),t.xp6(3),t.Q6J("ngIf",!o.sAztMatDrawerService.isOpenSideNav||o.isMobileDevice),t.xp6(1),t.Q6J("ngIf",o.sAztMatDrawerService.isOpenSideNav&&!o.isMobileDevice),t.xp6(3),t.Q6J("isServerSearch",!1)("placeholder",t.lcZ(27,40,"lang_azt_search_class"))("searchContentObj",o.searchContentObj)("styleInput","py-1"),t.xp6(3),t.Q6J("matMenuTriggerFor",e),t.xp6(4),t.hij(" ",t.lcZ(34,42,"lang_testbank_tested_list_sort")," "),t.xp6(2),t.Q6J("ngIf",o.filterObj.isShowChecked||o.filterObj.isShowNotChecked),t.xp6(7),t.hij(" ",t.lcZ(43,44,"lang_azt_selected_classes")," "),t.xp6(3),t.Q6J("checked",o.filterObj.isShowChecked),t.xp6(3),t.hij(" ",t.lcZ(49,46,"lang_azt_unselected_classes")," "),t.xp6(3),t.Q6J("checked",o.filterObj.isShowNotChecked),t.xp6(6),t.Oqu(t.lcZ(58,48,"lang_button_close")),t.xp6(4),t.Oqu(t.lcZ(62,50,"lang_button_delete")),t.xp6(3),t.Q6J("visibility","hover"),t.xp6(3),t.Q6J("ngIf",o.totalIsShowInFilter),t.xp6(1),t.Q6J("ngForOf",o.mapClassroomGroupDataToForm),t.xp6(1),t.Q6J("ngIf",!o.totalIsShowInFilter),t.xp6(1),t.Q6J("ngIf",o.form.controls.classroomFormArray.errors)}}let nt=(()=>{class r extends _.Q{changeCheckboxEventLocal(){this.changeCheckboxEvent.emit()}search(e){this.searchContentObj=e,this.calculateIsCheckAll()}selectClassGroup(e,o){this.classGroupId=e,o.scrollTo({top:0,duration:0}),this.calculateIsCheckAll(),this.isMobileDevice&&this.sAztMatDrawerService.closeDrawer()}toggleAllCheckBox(e){this.mapClassroomGroupDataToForm.forEach(o=>{o.classroomObjs.forEach((n,d)=>{n.isShowInFilter&&n.classroomFormGroup.controls.isChecked.setValue(e,{emitEvent:!1}),o.totalClassroomShowInFilter&&d===o.classroomObjs.length-1&&n.classroomFormGroup.controls.isChecked.setValue(n.classroomFormGroup.controls.isChecked.value)})})}clearFilter(){this.filterObj={isShowChecked:!1,isShowNotChecked:!1}}checkShowCreateClassroom(){var e=this.commonService.concatMultipleArray(this.classroomGroupData.map(n=>n.classroomObjs)),o=this.sAztClassroomCheckboxService.findClassroomWithNoFullPermission(e,this.permissionName);this.showCreateNewClassroom=o.length===e.length}changeClassroomObjs(e,o){var n=this.classroomGroupData.find(w=>w.groupObj.id==e.id);if(n)n.classroomObjs.push(o);else{this.classroomGroupData.push({groupObj:e,classroomObjs:[o]});var d=this.classroomGroupData.filter(w=>w.groupObj.id<=0);this.classroomGroupData=this.classroomGroupData.filter(w=>w.groupObj.id>0).sort((w,T)=>(w.groupObj.name??"").localeCompare(T.groupObj.name??"")),this.classroomGroupData=this.classroomGroupData.concat(d)}this.checkShowCreateClassroom(),this.initClassroomCheckbox(),this.classroomGroupDataChange.emit(this.classroomGroupData)}calculateIsCheckAll(){this.checkIsShowInFilterClassroom();let e=!0;this.totalChecked=0,this.totalIsShowInFilter=0;for(const o of this.mapClassroomGroupDataToForm){o.totalChecked=o.classroomObjs.filter(d=>d.classroomFormGroup.controls.isChecked.value).length,this.totalChecked+=o.totalChecked;const n=o.classroomObjs.filter(d=>d.isShowInFilter&&!d.classroomFormGroup.controls.isChecked.value).length>0;this.totalIsShowInFilter+=o.totalClassroomShowInFilter,e=!(n||!this.totalIsShowInFilter)&&e}this.isCheckAll.setValue(e),this.changeCheckboxEventLocal()}checkIsShowInFilterClassroom(){const e=this.searchContentObj.searchContent?this.commonService.convertVietnameseToEnglish(this.searchContentObj.searchContent).toLowerCase():"";for(const o of this.mapClassroomGroupDataToForm){for(const n of o.classroomObjs)if(this.classGroupId&&o.groupObj.id!==this.classGroupId)n.isShowInFilter=!1;else{const d=this.commonService.convertVietnameseToEnglish(n.name);n.isShowInFilter=d.toLowerCase().includes(e)}o.totalClassroomShowInFilter=o.classroomObjs.filter(n=>n.isShowInFilter).length}}openDialogCreateClassroom(){this.sAztDialogService.open(f.s,{data:{},width:"500px",restoreFocus:!1}).afterClosed().subscribe(o=>{})}initClassroomCheckbox(){this.formArray.clear();var e=[];const o=Number(this.getMyQueryParam("classroomId")??0);o&&e.push(o),this.homeworkObj&&this.homeworkObj.classroomId&&e.push(this.homeworkObj.classroomId),this.examClassroomObjs.filter(n=>n.classroomId).forEach(n=>e.push(n.classroomId??0)),null!=this.shareClassroomIds&&(e=this.shareClassroomIds),this.classroomGroupData=this.classroomGroupData.map(n=>({groupObj:n.groupObj,classroomObjs:n.classroomObjs.filter(d=>null!=d.permissionObj&&this.permissionService.hasCreatePermission(this.listPermissionTypes[this.permissionName],d))})),this.mapClassroomGroupDataToForm=this.classroomGroupData.map(n=>({...n,totalChecked:0,groupName:n.groupObj.name??"",totalClassroomShowInFilter:n.classroomObjs.length,classroomObjs:n.classroomObjs.map(d=>{this.totalClassroom++;let w=e.includes(d.id),T=new m.cw({classroomId:new m.NI(d.id,{nonNullable:!0}),classroomName:new m.NI(d.name,{nonNullable:!0}),isChecked:new m.NI(w,{nonNullable:!0})});return this.formArray.push(T),{...d,classroomFormGroup:T,isShowInFilter:!0}})})),this.mapClassroomGroupDataToForm=this.mapClassroomGroupDataToForm.filter(n=>n.classroomObjs.length>0)}ngOnInit(){super.ngOnInit(),this.formArray=this.form.controls.classroomFormArray,this.classroomGroupData.forEach(e=>e.classroomObjs.map(o=>o.name=this.commonService.myTranslateInstant(o.name)??"")),this.initClassroomCheckbox(),this.checkShowCreateClassroom(),this.form.controls.classroomFormArray.valueChanges.subscribe(()=>{this.hasSelectedClassroom=this.formArray.controls.filter(e=>e.value).length>0}),this.form.controls.isShowCheckClass.valueChanges.subscribe(()=>{this.hasSelectedClassroom=this.formArray.controls.filter(e=>e.value).length>0}),this.calculateIsCheckAll(),this.formArray.valueChanges.subscribe(()=>{this.calculateIsCheckAll()})}constructor(e,o,n,d){super(),this.sAztDialogService=e,this.sAztClassroomCheckboxService=o,this.sAztMatDrawerService=n,this.permissionService=d,this.permissionName=c.y.homework,this.examClassroomObjs=[],this.shareClassroomIds=void 0,this.heightClassroomCheckBox="40vh",this.changeCheckboxEvent=new t.vpe,this.classroomGroupDataChange=new t.vpe,this.formArray=new m.Oe([]),this.mapClassroomGroupDataToForm=[],this.listPermissionTypes=c.y,this.showCreateNewClassroom=!1,this.hasSelectedClassroom=!1,this.searchContentObj=new b.h,this.searchContentObjGroup=new b.h,this.filterObj={isShowChecked:!1,isShowNotChecked:!1},this.classGroupId=0,this.isCheckAll=new m.NI(!1,{nonNullable:!0}),this.checkAllValue=!1,this.totalChecked=0,this.totalClassroom=0,this.totalIsShowInFilter=0}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(g.C),t.Y36(x.f),t.Y36(a.T),t.Y36(v.j))},r.\u0275cmp=t.Xpm({type:r,selectors:[["azt-list-classroom-checkbox-new"]],inputs:{form:"form",classroomGroupData:"classroomGroupData",permissionName:"permissionName",homeworkObj:"homeworkObj",examClassroomObjs:"examClassroomObjs",shareClassroomIds:"shareClassroomIds",heightClassroomCheckBox:"heightClassroomCheckBox"},outputs:{changeCheckboxEvent:"changeCheckboxEvent",classroomGroupDataChange:"classroomGroupDataChange"},features:[t._Bn([a.T]),t.qOj],decls:3,vars:2,consts:[[1,"azt-list-classroom-by-group"],["class","mt-2",4,"ngIf"],[4,"ngIf"],[1,"mt-2"],[1,"p-3"],[1,"text-create"],["azt-track-service","azt-list-classroom-checkbox-6scHm7Ch1-",1,"btn-text-primary",3,"click"],[3,"formGroup"],[1,"text-right","font-medium","mb-2"],[1,"azt-drawer-container",3,"hasBackdrop"],[3,"ngClass","mode","opened","openedChange"],["drawer",""],[1,"box","h-full","border","border-slate-200/60","dark:border-darkmode-400"],[1,"flex","rounded-md","border-b","border-slate-200","dark:border-darkmode-400","p-2","text-slate-500",2,"border-bottom-right-radius","0","border-bottom-left-radius","0"],[1,"search-box"],[3,"isServerSearch","placeholder","searchContentObj","styleInput"],[2,"height","calc(100% - 50px)"],["track","vertical","pointerEventsMethod","scrollbar",1,"w-full",3,"visibility"],[1,"p-2"],["azt-track-service","azt-list-classroom-checkbox-new-TUrZzBy9T","class","flex items-center px-3 py-2 rounded-md w-full",3,"ngClass","click",4,"ngIf"],[1,"azt-drawer-content","h-full",3,"ngClass"],[1,"box","border","border-slate-200","dark:border-darkmode-400","h-full"],["azt-track-service","azt-list-classroom-checkbox-new-WB1u8XZHUS","class","btn btn-sm mr-2",3,"matTooltip","click",4,"ngIf"],["azt-track-service","azt-list-classroom-checkbox-new-q2BPTM5lPo","class","btn btn-sm mr-2",3,"matTooltip","click",4,"ngIf"],[1,"flex","ml-auto"],[1,"mr-2"],[3,"isServerSearch","placeholder","searchContentObj","styleInput","onSearch"],[1,"filter"],[1,"btn","btn-sm",3,"matMenuTriggerFor"],[1,"w-4","h-4","inline-block"],["name","filter"],[1,"azt-hidden","md:block","ml-2"],["class","p-1 ml-1 items-center justify-center rounded-full text-xs bg-primary text-white cursor-pointer font-medium","style","display: inline-flex; width: 15px; height: 15px; font-size: 10px",4,"ngIf"],["menuFilter","matMenu"],[1,"dropdown-menu","show","relative","w-56"],[1,"dropdown-content"],["azt-track-service","azt-list-classroom-checkbox-new-mJWF3uWTQJ","for","isShowChecked",1,"dropdown-item","cursor-pointer",3,"click"],[1,"form-check","form-switch","ml-auto"],["id","isShowChecked","type","checkbox",1,"show-code","form-check-input","ml-2",3,"checked","change"],["azt-track-service","azt-list-classroom-checkbox-new-pFWk_nWN9o","for","isShowNotChecked",1,"dropdown-item","cursor-pointer",3,"click"],["id","isShowNotChecked","type","checkbox",1,"show-code","form-check-input","ml-2",3,"checked","change"],[1,"dropdown-divider"],[1,"flex","p-1"],[1,"btn","btn-secondary","py-1","px-2","ml-auto","mr-2"],["azt-track-service","azt-list-classroom-checkbox-new-3OFGLRY5fa",3,"click"],["azt-track-service","azt-list-classroom-checkbox-new-iJlkvwO36n",1,"btn","btn-danger","py-1","px-2",3,"click"],[1,"h-full","w-full"],["track","vertical","pointerEventsMethod","scrollbar",3,"visibility"],["scrollable",""],[1,"p-3",2,"margin-bottom","100px"],["class","mt-3 mb-5",4,"ngIf"],[3,"ngClass",4,"ngFor","ngForOf"],["class","flex items-center justify-center","style","height: 200px",4,"ngIf"],["class","col-span-12 mt-3",4,"ngIf"],["azt-track-service","azt-list-classroom-checkbox-new-TUrZzBy9T",1,"flex","items-center","px-3","py-2","rounded-md","w-full",3,"ngClass","click"],["azt-track-service","azt-list-classroom-checkbox-new-hUXQqnl7px","class","flex items-center px-3 py-2 rounded-md w-full text-left",3,"ngClass","click",4,"ngFor","ngForOf"],["azt-track-service","azt-list-classroom-checkbox-new-hUXQqnl7px",1,"flex","items-center","px-3","py-2","rounded-md","w-full","text-left",3,"ngClass","click"],["azt-track-service","azt-list-classroom-checkbox-new-WB1u8XZHUS",1,"btn","btn-sm","mr-2",3,"matTooltip","click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"lucide","lucide-menu","w-4","h-4"],["x","3","y","3","width","18","height","18","rx","2","ry","2"],["d","M9 3v18"],["d","m14 9 3 3-3 3"],["azt-track-service","azt-list-classroom-checkbox-new-q2BPTM5lPo",1,"btn","btn-sm","mr-2",3,"matTooltip","click"],["d","m16 15-3-3 3-3"],[1,"p-1","ml-1","items-center","justify-center","rounded-full","text-xs","bg-primary","text-white","cursor-pointer","font-medium",2,"display","inline-flex","width","15px","height","15px","font-size","10px"],[1,"mt-3","mb-5"],[1,"flex","items-center"],[1,"form-check","mr-3"],["id","checkbox-all","type","checkbox","class","form-check-input",3,"formControl","change",4,"ngIf"],["for","checkbox-all",1,"form-check-label"],[4,"ngIf","ngIfElse"],["notCheckAll",""],["id","checkbox-all","type","checkbox",1,"form-check-input",3,"formControl","change"],[3,"ngClass"],["class","font-bold mb-2",4,"ngIf"],[1,"grid","grid-cols-12","gap-3"],[4,"ngFor","ngForOf"],[1,"font-bold","mb-2"],["class","col-span-12 md:col-span-6",4,"ngIf"],[1,"col-span-12","md:col-span-6"],[1,"azt-checkbox-item"],["class","form-check-input","type","checkbox",3,"id","formControl","value","change",4,"ngIf"],[1,"form-check-label",2,"vertical-align","middle",3,"for"],[3,"matTooltip",4,"ngIf"],["class","ml-2 py-0.5 px-2 rounded-full text-xs bg-primary text-white cursor-pointer font-medium",4,"ngIf"],["type","checkbox",1,"form-check-input",3,"id","formControl","value","change"],[3,"matTooltip"],[1,"ml-2","py-0.5","px-2","rounded-full","text-xs","bg-primary","text-white","cursor-pointer","font-medium"],[1,"flex","items-center","justify-center",2,"height","200px"],[1,"col-span-12","mt-3"],[1,"text-xs","font-medium","text-danger"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.YNc(1,E,10,9,"div",1),t.YNc(2,at,71,57,"div",2),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf",o.showCreateNewClassroom),t.xp6(1),t.Q6J("ngIf",o.form))},dependencies:[h.mk,h.sg,h.O5,p.VK,p.p6,s.jA,s.kh,s.LW,i.gM,m._Y,m.Wl,m.JJ,m.JL,m.oH,m.sg,C.KC,k.Nh5,D.W,h.OU,I.JV,I.om,I.NK],encapsulation:2}),r})()},90592:(A,O,l)=>{l.d(O,{f:()=>a});var t=l(76359),m=l(65879),f=l(46558),c=l(94690);let a=(()=>{class _{constructor(g,x){this.commonService=g,this.permissionService=x}findClassroomWithNoPermission(g,x){var v=[];return g.forEach(h=>{(null==h.permissionObj||!this.permissionService.hasCreatePermission(t.y[x],h))&&(this.commonService.isExistInArray(v,h.id)||void 0!==h.id&&v.push(h.id))}),v}findClassroomWithNoFullPermission(g,x){let v=[];return g.forEach(h=>{(null==h.permissionObj||!this.permissionService.hasFullPermission(t.y[x],h))&&v.push(h)}),v}getClassroomIdsChecked(g,x,v){for(var h=[],p=0;p<v.length;p++)if(v[p]&&g[p]){var s=g[p].id;null!=s&&!this.commonService.isExistInArray(x,s)&&h.push(s)}return h}getClassroomIdsCheckedInGroup(g){return g.getRawValue().filter(x=>x.isChecked).map(x=>x.classroomId)}}return _.\u0275fac=function(g){return new(g||_)(m.LFG(f.z),m.LFG(c.j))},_.\u0275prov=m.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})()}}]);