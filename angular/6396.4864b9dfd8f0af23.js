"use strict";(self.webpackChunkBalacoClient=self.webpackChunkBalacoClient||[]).push([[6396],{43166:(T,O,a)=>{a.d(O,{x:()=>g});var c=a(10936),l=a(26860),h=a(62095);let g=(()=>{var b;class _{filter(p,u){return null==p?[]:p=p.filter(m=>this.removeAllSpecialChars((null!=u?m[u]:m).toString()).includes(this.removeAllSpecialChars(this.searchControl.value)))}mergeSchoolLevel(p){let u=[];return p.forEach(m=>null!=m.schoolLevel&&u.push(m.schoolLevel)),u}removeAllSpecialChars(p){return p=(p=this.commonService.myTranslateInstant(p)??p).toLowerCase().trim(),p=this.commonService.convertVietnameseToEnglish(p),p=this.commonService.removeSpecialStringInSearch(p),(p=this.commonService.removeNonAlphabetic(p)).toLowerCase().trim()}constructor(p){this.commonService=p,this.searchControl=new c.MJ("",{nonNullable:!0})}}return(b=_).\u0275fac=function(p){return new(p||b)(l.rXU(h.R))},b.\u0275dir=l.FsC({type:b,selectors:[["","searchInList",""]],exportAs:["searchInList"]}),_})()},42789:(T,O,a)=>{a.d(O,{N:()=>h});var c=a(26860);let l=(()=>{var g;class b{constructor(){this.observer=new IntersectionObserver(f=>{f.forEach(p=>{const u=p.target;p.isIntersecting?(this.reUpdateHeightAttribute(u),u.setAttribute("start_loading","true")):u.setAttribute("start_loading","false")})})}reUpdateHeightAttribute(f){const p=f.getBoundingClientRect();p.height>0&&f.setAttribute("data-current-height",p.height+"px")}observe(f){this.observer.observe(f)}}return(g=b).\u0275fac=function(f){return new(f||g)},g.\u0275prov=c.jDH({token:g,factory:g.\u0275fac,providedIn:"root"}),b})(),h=(()=>{var g;class b{constructor(f,p){this.injector=f,this.el=p;const u=this.el.nativeElement;this.injector.get(l).observe(u)}}return(g=b).\u0275fac=function(f){return new(f||g)(c.rXU(c.zZn),c.rXU(c.aKT))},g.\u0275dir=c.FsC({type:g,selectors:[["","load_effect_lazy",""]]}),b})()},64486:(T,O,a)=>{a.d(O,{I:()=>b});var c=a(26860),l=a(59640),h=a(50622),g=a(32639);let b=(()=>{var _;class f extends l.H{constructor(){super(...arguments),this.questionRenderService=(0,c.WQX)(g.g),this.sAztAnswerTrueFalseService=(0,c.WQX)(h.j),this.isDestroyed=!1,this.isInitData=!1}startRenderQuestion(u){if(this.renderConfigObj.disableRender)return this.emitHaveRended(void 0);u&&!this.renderConfigObj.isFirstRender||(u&&this.renderConfigObj.isFirstRender&&(this.renderConfigObj.isFirstRender=!1,this.followerRender.doneItemPartQuest()),this.questionRenderService.parseRenderQuestion(this.baseQuestionObj,this.renderConfigObj.configRenderService).then(()=>{this.baseQuestionObj.answersOrigin=this.sAztAnswerTrueFalseService.checkLabelArrOriginOrMix(this.baseQuestionObj.answers,!0),this.emitHaveRended(void 0)}).catch(m=>{this.emitHaveRended(m.message)}))}emitHaveRended(u){if(!this.isDestroyed&&u)return this.showErrorSnack(u)}initData(u,m,x){this.renderConfigObj=u,this.followerRender=m,this.baseQuestionObj=x,this.isInitData=!0}reRenderContent(){this.isInitData&&this.startRenderQuestion(!1)}ngDoCheck(){if(!this.isInitData||this.renderConfigObj.isRenderElement)return;let u=document.getElementById("question_render_element_"+this.baseQuestionObj.id);if(!u)return;let m=u.getAttribute("start_loading");(this.renderConfigObj.disableLazy||m&&"true"==m)&&(this.renderConfigObj.isRenderElement||(this.startRenderQuestion(!0),this.renderConfigObj.isRenderElement=!0))}ngOnDestroy(){this.isDestroyed=!0,super.ngOnDestroy()}}return(_=f).\u0275fac=function(){let p;return function(m){return(p||(p=c.xGo(_)))(m||_)}}(),_.\u0275cmp=c.VBU({type:_,selectors:[["ng-component"]],features:[c.Vt3],decls:0,vars:0,template:function(u,m){},encapsulation:2}),f})()},66793:(T,O,a)=>{a.d(O,{C:()=>l});var c=a(65106);class l{constructor(g,b,_){this.mathJaxImage=!1,this.disableLazy=!1,this.disableRender=!1,this.isFirstRender=!0,this.isRenderElement=!1,this.configRenderService=new c.y,this.disableLazy=g,this.disableRender=b,this.mathJaxImage=_,this.mathJaxImage&&this.configRenderService.setMaxJaxRenderMode("svg")}}},15423:(T,O,a)=>{a.d(O,{N:()=>p});var c=a(59640),l=a(26860),h=a(54460),g=a(9570),b=a(76975);function _(u,m){1&u&&(l.j41(0,"div",6),l.EFF(1),l.nI1(2,"mytranslate"),l.k0s()),2&u&&(l.R7$(1),l.SpI(" ",l.bMT(2,1,"lang_core_huong_dan_chon_vao_bang_va_vuot_sang_trai_de_xem_cac_thong_tin_khac"),"\n"))}const f=function(u){return{display:u}};let p=(()=>{var u;class m extends c.H{constructor(){super(...arguments),this.isShowExplain=!1}}return(u=m).\u0275fac=function(){let x;return function(w){return(x||(x=l.xGo(u)))(w||u)}}(),u.\u0275cmp=l.VBU({type:u,selectors:[["azt-question-explain-box"]],inputs:{isShowExplain:"isShowExplain",questionObj:"questionObj",renderConfigObj:"renderConfigObj"},features:[l.Vt3],decls:6,vars:5,consts:[["class","mt-1 box p-2",4,"ngIf"],[1,"help-content","box","pt-1","pb-3","px-4","py-1","mt-1",2,"display","inherit","border-top-right-radius","0","border-top-left-radius","0","margin-top","-5px","box-shadow","none","overflow","auto","padding-bottom","20px",3,"ngStyle"],["elementGroup",""],[2,"width","fit-content"],["elementHook",""],[3,"content"],[1,"mt-1","box","p-2"]],template:function(S,w){if(1&S&&(l.DNE(0,_,3,3,"div",0),l.j41(1,"div",1,2)(3,"div",3,4),l.nrm(5,"azt-dynamic-hook",5),l.k0s()()),2&S){const A=l.sdS(2),M=l.sdS(4);let e;l.Y8G("ngIf",A.offsetWidth<M.offsetWidth&&w.isMobileDevice),l.R7$(1),l.Y8G("ngStyle",l.eq3(3,f,w.isShowExplain&&w.questionObj.help?"inherit":"none")),l.R7$(4),l.Y8G("content",null!==(e=w.questionObj.help)&&void 0!==e?e:"")}},dependencies:[h.bT,h.B3,g.x,b.wp],styles:['.pr-7[_ngcontent-%COMP%]{padding-right:28px}.w-38px[_ngcontent-%COMP%]{width:38px}.remove-grid[_ngcontent-%COMP%]{display:block!important}.question-standalone-loader-box[_ngcontent-%COMP%]{min-height:50px}  .skeleton-box-loading{width:100%;height:30px;max-width:100%;margin-bottom:5px;display:inline-block}  .skeleton-box-loading:after{position:absolute;top:0;right:0;bottom:0;left:0;transform:translate(-100%);animation:_ngcontent-%COMP%_shimmer 2s infinite;content:""}.question-standalone-box[_ngcontent-%COMP%]{margin-bottom:30px;display:block;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);border-radius:.375rem}.question-standalone-container[_ngcontent-%COMP%]{padding:15px}.question-standalone-for-test-finder[_ngcontent-%COMP%]{border:none;margin-bottom:0;padding:0}.question-standalone-for-test-finder[_ngcontent-%COMP%]   .question-standalone-main-content[_ngcontent-%COMP%]{padding:15px;border:1px solid rgb(228,228,228)}.group-of-question-standalone-for-test-finder[_ngcontent-%COMP%]{padding:15px!important;border:1px solid rgb(228,228,228)!important}.question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid #2262ae!important;outline:3px solid rgba(125,160,201,.65)!important}.group-of-question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid green!important;outline:3px solid rgba(0,193,0,.321)!important}.question-standalone-label[_ngcontent-%COMP%]{font-weight:700}.question-standalone-content-box[_ngcontent-%COMP%]{position:relative}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]{color:#f44336;position:relative;padding-left:20px;display:flex;align-items:center}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]:before{content:"!";position:absolute;left:0;color:#fff;background:#f44336;width:15px;height:15px;text-align:center;border-radius:50%;font-size:smaller;display:flex;justify-content:center;align-items:center}.question-standalone-step-container-box[_ngcontent-%COMP%]{margin-bottom:50px}.group-content-of-question-standalone[_ngcontent-%COMP%]{margin-bottom:10px;font-weight:700}.answer[_ngcontent-%COMP%]{display:flex;align-items:center}.answer-label[_ngcontent-%COMP%]{width:20px;height:30px;min-width:20px;min-height:30px;display:flex;align-items:center;justify-content:flex-start;border-radius:50%;border-width:2px;border-style:solid;border-color:transparent}.answer-box[_ngcontent-%COMP%]{border-radius:0 0 3px 3px;padding:8px 20px;justify-content:space-between;align-items:center}.selected-answer[_ngcontent-%COMP%]{background-color:#f39c12;color:#fff}.answer-content-front[_ngcontent-%COMP%]{display:flex!important;flex-wrap:wrap;width:calc(100% - 30px)}.explainTxt[_ngcontent-%COMP%]{width:125px;font-weight:500;display:flex;align-items:center}#examHeader[_ngcontent-%COMP%]{display:block;border:1px solid #e7e7e7;border-radius:3px;overflow:hidden}.arrow_btn[_ngcontent-%COMP%]{font-size:20px;vertical-align:middle;width:20px;height:20px;color:#fff;margin-left:auto!important;margin-right:auto!important;-webkit-user-select:none;user-select:none}.bottom_action[_ngcontent-%COMP%]{position:fixed;padding:15px;bottom:0;left:0;background:#312e2e;color:#fff;width:100%}.bottom_action[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]{display:block}.btn-ans-result[_ngcontent-%COMP%]{color:#fff;background-color:#f39c12}.show-list[_ngcontent-%COMP%]{max-width:200px}.show-list[_ngcontent-%COMP%]   .show-sheet[_ngcontent-%COMP%]   .listli[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:27px;height:27px;border-radius:50%;border:1px solid #347da5;display:flex;align-items:center;color:#fff;justify-content:center;font-size:12px;cursor:pointer;-webkit-user-select:none;user-select:none}.top_action[_ngcontent-%COMP%]{position:fixed;padding:10px;top:0;left:0;background:#312e2e;color:#fff;width:100%}.scrollSheetMobile[_ngcontent-%COMP%]{max-height:200px;overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.scrollSheetMobile[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.notify-badge[_ngcontent-%COMP%]{position:absolute;right:3px;top:3px;text-align:center;color:#afafaf;padding:0;font-size:20px;cursor:pointer}.attach-container[_ngcontent-%COMP%]{background:#fff;padding:10px 0 0;border-radius:5px;width:83.33%;border:1px solid #e8e8e8}.answer-review[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:50%;border:1px solid rgb(52,125,165);display:flex;align-items:center;color:#fff;justify-content:center;font-size:15px;-webkit-user-select:none;user-select:none}.border-none[_ngcontent-%COMP%]{border:none!important}.bg-question[_ngcontent-%COMP%]{margin-top:15px;padding:15px 10px;background:#fff}.question-pending-part[_ngcontent-%COMP%]{width:100%;height:50px}.pencil-edit[_ngcontent-%COMP%]{position:absolute;top:-5px;right:-5px;width:30px;height:30px;border-radius:50%;text-align:center;background:#a9a9a9;z-index:9999}.pencil-edit[_ngcontent-%COMP%]   .lucide[_ngcontent-%COMP%]{color:#fff;stroke-width:2.5px;height:29px}.margin-question-bar[_ngcontent-%COMP%]{margin-top:calc(3rem + 40px)!important}.sheet-screen[_ngcontent-%COMP%]{max-height:calc(100vh - 140px);overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.sheet-screen[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}  .layout{display:grid;margin:20px 0;grid-row-gap:20px}  .layout-4{grid-template-columns:1fr 1fr 1fr 1fr}  .layout-2{grid-template-columns:1fr 1fr}  .layout-1{grid-template-columns:1fr}  .question-standalone-content-box{max-width:100%;overflow-x:auto;overflow-y:hidden}  #boxContentQuestion .question-standalone-container{max-width:800px}@keyframes _ngcontent-%COMP%_shimmer{to{transform:translate(100%)}}@media (max-width: 768px){.answer-content-front[_ngcontent-%COMP%]{justify-content:center}.btn-ans-result[_ngcontent-%COMP%]{margin-right:auto!important}}@media (max-width: 800px){  #boxContentQuestion .question-standalone-container{max-width:calc(90vw - 16px)!important}}']}),m})()},30657:(T,O,a)=>{a.d(O,{e:()=>c});class c{constructor(){this.totalQuestionRender=0,this.numFollow={renderDone:{num:0,isRun:!1},firstDone:{num:0,isRun:!1},startDone:{num:0,isRun:!1}}}checker(){this.totalQuestionRender===this.numFollow.renderDone.num&&!this.numFollow.renderDone.isRun&&(this.numFollow.renderDone.isRun=!0),this.totalQuestionRender===this.numFollow.firstDone.num&&!this.numFollow.firstDone.isRun&&(this.numFollow.firstDone.isRun=!0)}setNumQuest(h){this.totalQuestionRender=h}doneItemPartQuest(){this.numFollow.firstDone.num++,this.checker()}}},81113:(T,O,a)=>{a.r(O),a.d(O,{AzotaToolsModule:()=>Ot});var c=a(54460),l=a(10936),h=a(65162),g=a(69223),b=a(62067),_=a(15343),f=a(10123),p=a(44233),u=a(5502),m=a(21656),x=a(70050),S=a(7050),w=a(91100),A=a(43234),M=a(1133),e=a(26860),$=a(65106),N=a(46899),V=a(25539),j=a(59640),k=a(30657),B=a(32639),Y=a(85710),y=a(17776);let D=(()=>{var t;class s{constructor(){this.subscriptions=new Y.yU,this.aiElearningService=(0,e.WQX)(y.T5),this.cacheData=[]}getKnowledgeByApi(n,i,r,d,v,vt){let Q=this.getCacheKey(n,i,r,d),L=this.cacheData.find(I=>I.cacheKey==Q);if(null!=L)return v(L.nodes);this.subscriptions.add(this.aiElearningService.aiApiV1ElearningGetKnowledgeTreeGet(n,i,r,d||void 0).subscribe({next:I=>{this.cacheData.push({cacheKey:Q,nodes:I.nodes??[]}),v(I.nodes??[])},error:I=>vt(I)}))}getObjByObjectiveId(n,i){for(var r of n){if(r.objectiveId==i)return r;let d=this.getObjByObjectiveId(r.children,i);if(null!=d)return d}}getCacheKey(n,i,r,d){return`${n}_${i}_${r?"true":"false"}_${d??0}`}ngOnDestroy(){this.subscriptions.unsubscribe()}}return(t=s).\u0275fac=function(n){return new(n||t)},t.\u0275prov=e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"}),s})();var R=a(89163),q=a(33887),X=a(2915),U=a(32099);class W extends j.H{constructor(){super(...arguments),this.nodeObjs=[]}searchByText(s){}expand(s){s.isExpand=!0,s.children.forEach(o=>o.isExpand=!0)}collapse(s){s.isExpand=!1,s.children.forEach(o=>o.isExpand=!1)}}var z=a(18718),C=a(76975);function H(t,s){if(1&t&&e.nrm(0,"azt-loading-effect",3),2&t){const o=e.XpG();e.Y8G("currentStatusObj",o.statusObj)}}function J(t,s){1&t&&e.eu8(0)}const F=function(t){return{nodeObjs:t}};function Z(t,s){if(1&t&&(e.j41(0,"table")(1,"tbody"),e.DNE(2,J,1,0,"ng-container",4),e.k0s()()),2&t){const o=e.XpG(),n=e.sdS(4);e.R7$(2),e.Y8G("ngTemplateOutlet",n)("ngTemplateOutletContext",e.eq3(2,F,o.nodeObjs))}}function ee(t,s){1&t&&e.nrm(0,"lucide-icon",13)}function te(t,s){1&t&&e.nrm(0,"lucide-icon",14)}function ne(t,s){if(1&t&&(e.j41(0,"i"),e.DNE(1,ee,1,0,"lucide-icon",11),e.DNE(2,te,1,0,"lucide-icon",12),e.k0s()),2&t){const o=e.XpG().$implicit;e.R7$(1),e.Y8G("ngIf",o.isExpand),e.R7$(1),e.Y8G("ngIf",!o.isExpand)}}function oe(t,s){1&t&&(e.j41(0,"i"),e.nrm(1,"lucide-icon",15),e.k0s())}function ie(t,s){1&t&&e.eu8(0)}function se(t,s){if(1&t&&(e.qex(0),e.DNE(1,ie,1,0,"ng-container",4),e.bVm()),2&t){const o=e.XpG().$implicit;e.XpG(3);const n=e.sdS(4);e.R7$(1),e.Y8G("ngTemplateOutlet",n)("ngTemplateOutletContext",e.eq3(2,F,o.children))}}const ae=function(t,s){return{"text-pending":t," link-color-hover":s}};function re(t,s){if(1&t){const o=e.RV6();e.qex(0),e.j41(1,"tr",7)(2,"td")(3,"div",8),e.bIt("click",function(){const r=e.eBV(o).$implicit,d=e.XpG(3);return e.Njj(d.clickToNode(r))}),e.DNE(4,ne,3,2,"i",5),e.DNE(5,oe,2,0,"i",5),e.j41(6,"label",9),e.nrm(7,"span",10),e.nI1(8,"safeContentQuestion"),e.nI1(9,"async"),e.nI1(10,"mathJaxContent"),e.k0s()()()(),e.DNE(11,se,2,4,"ng-container",5),e.bVm()}if(2&t){const o=s.$implicit;e.R7$(1),e.Y8G("hidden",!o.isShow),e.R7$(1),e.xc7("padding-left",14*(o.level+1),"px"),e.R7$(1),e.Y8G("ngClass",e.l_i(14,ae,o.isSelected,!o.isSelected)),e.R7$(1),e.Y8G("ngIf",o.children.length),e.R7$(1),e.Y8G("ngIf",!o.children.length),e.R7$(2),e.Y8G("innerHTML",e.bMT(8,8,e.bMT(9,10,e.bMT(10,12,"L"+(o.level+1)+". "+o.text))),e.npT),e.R7$(4),e.Y8G("ngIf",o.isExpand)}}function le(t,s){if(1&t&&(e.qex(0),e.DNE(1,re,12,17,"ng-container",6),e.bVm()),2&t){const o=s.$implicit;e.R7$(1),e.Y8G("ngForOf",o)}}function ce(t,s){if(1&t&&e.DNE(0,le,2,1,"ng-container",5),2&t){const o=s.nodeObjs,n=e.XpG();e.Y8G("ngIf",n.asTemplateDataObj(o))}}let de=(()=>{var t;class s extends W{clickToNode(n){if(!n.children.length)return this.clickToLastLevelEvent.emit(n.data);n.isExpand?this.collapse(n):this.expand(n)}asTemplateDataObj(n){return n}initData(n,i,r){this.initStatusObj(),this.sAztKnowledgeObjectiveService.getKnowledgeByApi(n,i,!1,r,d=>{this.nodeObjs=this.standardTreeNodes(d,0),this.stopStatusObj()},d=>this.errorStatusObj(d,!0))}standardTreeNodes(n,i){let r=[];return n.forEach(d=>{let v={level:i,typeNode:d.objectiveId?"objective":"knowledge",isExpand:!0,isShow:!0,isSelected:!(!d.objectiveId||d.objectiveId!=this.objectiveIdSelected),text:d.title,data:{...d,children:[]},children:[]};v.children=this.standardTreeNodes(d.children,i+1),r.push(v)}),r}ngOnChanges(n){n.searchContent&&this.searchByText(this.searchContent??"")}ngOnInit(){super.ngOnInit(),this.initData(this.levelId,this.subjectId,this.bookId)}constructor(n){super(),this.aiElearningService=n,this.clickToLastLevelEvent=new e.bkB,this.nodeObjs=[],this.sAztKnowledgeObjectiveService=(0,e.WQX)(D)}}return(t=s).\u0275fac=function(n){return new(n||t)(e.rXU(y.T5))},t.\u0275cmp=e.VBU({type:t,selectors:[["coazt-knowledge-objective-tree"]],inputs:{levelId:"levelId",subjectId:"subjectId",bookId:"bookId",objectiveIdSelected:"objectiveIdSelected",searchContent:"searchContent"},outputs:{clickToLastLevelEvent:"clickToLastLevelEvent"},features:[e.Vt3,e.OA$],decls:5,vars:2,consts:[[3,"currentStatusObj",4,"ngIf","ngIfElse"],["doneLoading",""],["recursiveListTmpl",""],[3,"currentStatusObj"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"hidden"],[1,"clickable",3,"ngClass","click"],[1,"form-check-label",2,"line-height","1.5"],[3,"innerHTML"],["name","chevron-down","size","14",4,"ngIf"],["name","chevron-right","size","14",4,"ngIf"],["name","chevron-down","size","14"],["name","chevron-right","size","14"],["name","send-horizontal","size","14"]],template:function(n,i){if(1&n&&(e.DNE(0,H,1,1,"azt-loading-effect",0),e.DNE(1,Z,3,4,"ng-template",null,1,e.C5r),e.DNE(3,ce,1,1,"ng-template",null,2,e.C5r)),2&n){const r=e.sdS(2);e.Y8G("ngIf",i.statusObj.loading)("ngIfElse",r)}},dependencies:[c.YU,c.Sq,c.bT,c.T3,_.WGl,z.K,c.Jj,C.km,C.ep],encapsulation:2}),s})(),pe=(()=>{var t;class s extends q._{searchByText(n){this.searchContent=n}selectObjective(n){this.dialogRef.close(n)}btnCloseDialog(){this.dialogRef.close(void 0)}constructor(n,i){super(i,n),this.dialogRef=n,this.data=i}}return(t=s).\u0275fac=function(n){return new(n||t)(e.rXU(R.CP,8),e.rXU(R.Vh,8))},t.\u0275cmp=e.VBU({type:t,selectors:[["coazt-knowledge-objective-dialog"]],features:[e.Vt3],decls:12,vars:13,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"box","p-3"],[1,"pb-3"],[3,"isServerSearch","placeholder","onSearch"],[3,"minHeight"],[3,"levelId","subjectId","bookId","objectiveIdSelected","searchContent","clickToLastLevelEvent"],[1,"text-right","border-t","border-slate-200","dark:border-darkmode-400","p-3"],[1,"btn","btn-secondary","w-24",3,"click"]],template:function(n,i){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"azt-search-box",4),e.bIt("onSearch",function(d){return i.searchByText(d.searchObj)}),e.nI1(5,"mytranslate"),e.k0s()(),e.j41(6,"azt-mat-dialog-content",5)(7,"coazt-knowledge-objective-tree",6),e.bIt("clickToLastLevelEvent",function(d){return i.selectObjective(d)}),e.k0s()()(),e.j41(8,"div",7)(9,"button",8),e.bIt("click",function(){return i.btnCloseDialog()}),e.EFF(10),e.nI1(11,"mytranslate"),e.k0s()()()()),2&n&&(e.R7$(4),e.Y8G("isServerSearch",!1)("placeholder",e.bMT(5,9,"lang_common_search_by_name")),e.R7$(2),e.Y8G("minHeight","calc(var(--vh, 1vh) * 100 - 300px)"),e.R7$(1),e.Y8G("levelId",i.data.levelId)("subjectId",i.data.subjectId)("bookId",i.data.bookId)("objectiveIdSelected",i.data.objectiveIdSelected)("searchContent",null==i.searchContent?null:i.searchContent.searchContent),e.R7$(3),e.SpI(" ",e.bMT(11,11,"lang_button_close")," "))},dependencies:[X.U,U.W,de,C.wp],encapsulation:2}),s})();var ue=a(9280),ge=a(42789),_e=a(52811),me=a(64486),fe=a(66793),he=a(5955),be=a(15423),Ce=a(9570);const Oe=function(t){return{"skeleton-box-loading":t}};function ve(t,s){if(1&t&&e.nrm(0,"div",2),2&t){const o=e.XpG();e.Y8G("ngClass",e.eq3(1,Oe,o.renderConfigObj.isFirstRender))}}function xe(t,s){if(1&t&&(e.j41(0,"div",13)(1,"b",14),e.EFF(2),e.nI1(3,"isTrueFalseAnswer"),e.k0s(),e.nrm(4,"azt-dynamic-hook",4),e.k0s()),2&t){const o=s.$implicit,n=e.XpG(3);let i;e.R7$(2),e.JRh(e.bMT(3,2,n.questionObj)?(null!==(i=o.alpha)&&void 0!==i?i:o.key).toLowerCase()+")":(null!==(i=o.alpha)&&void 0!==i?i:o.key)+"."),e.R7$(2),e.Y8G("content",o.content)}}function we(t,s){if(1&t&&(e.j41(0,"div",11),e.DNE(1,xe,5,4,"div",12),e.k0s()),2&t){const o=e.XpG(2);e.Y8G("answerSizeManager",0),e.R7$(1),e.Y8G("ngForOf",o.questionObj.answers)}}function Te(t,s){if(1&t&&(e.j41(0,"h2",15),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t){const o=e.XpG(2);e.R7$(1),e.Lme(" ",e.bMT(2,2,"lang_auto_dap_an"),": ",o.questionObj.answerResult.length?o.questionObj.answerResult.join(" | "):""," ")}}function je(t,s){1&t&&(e.j41(0,"h2",15),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"lang_auto_tu_luan")," "))}function Ie(t,s){if(1&t){const o=e.RV6();e.j41(0,"div",16)(1,"a",17),e.bIt("click",function(){e.eBV(o);const i=e.XpG(2);return e.Njj(i.showExplainBox())}),e.EFF(2),e.nI1(3,"mytranslate"),e.nI1(4,"mytranslate"),e.k0s()()}if(2&t){const o=e.XpG(2);e.R7$(2),e.SpI(" ",o.isShowExplain?e.bMT(3,1,"lang_auto_an_giai_thich"):e.bMT(4,3,"lang_auto_xem_giai_thich")," ")}}function Se(t,s){if(1&t&&(e.j41(0,"div",3)(1,"div"),e.nrm(2,"azt-dynamic-hook",4),e.DNE(3,we,2,2,"div",5),e.nI1(4,"isOneChoiceAnswer"),e.nI1(5,"isTrueFalseAnswer"),e.j41(6,"div",6),e.DNE(7,Te,3,4,"h2",7),e.nI1(8,"isEssayAnswer"),e.DNE(9,je,3,3,"ng-template",null,8,e.C5r),e.DNE(11,Ie,5,5,"div",9),e.k0s()(),e.nrm(12,"azt-question-explain-box",10),e.k0s()),2&t){const o=e.sdS(10),n=e.XpG();let i;e.R7$(2),e.Y8G("content",null!==(i=n.questionObj.content)&&void 0!==i?i:""),e.R7$(1),e.Y8G("ngIf",(e.bMT(4,8,n.questionObj)||e.bMT(5,10,n.questionObj))&&n.questionObj.answers&&n.questionObj.answers.length>0),e.R7$(4),e.Y8G("ngIf",n.questionObj.answerResult&&!e.bMT(8,12,n.questionObj))("ngIfElse",o),e.R7$(4),e.Y8G("ngIf",n.questionObj.help),e.R7$(1),e.Y8G("isShowExplain",n.isShowExplain)("questionObj",n.questionObj)("renderConfigObj",n.renderConfigObj)}}let ye=(()=>{var t;class s extends me.I{constructor(){super(...arguments),this.follower=new k.e,this.questionLabel="",this.isShowExplain=!1}customQuestionLabel(n){const i=this.commonService.castJsonToObj(n??"")??void 0;return i?.label?i.label:"C\xe2u"}showExplainBox(){this.isShowExplain=!this.isShowExplain}initRenderBox(){let n=new fe.C(!0,!1,!1);super.initData(n,this.follower,this.questionObj),this.questionLabel=this.customQuestionLabel(this.questionObj.expandInfo)+" "+(null!=this.questionObj.labelIndex?this.questionObj.labelIndex:this.questionObj.rawIndex)}ngOnInit(){super.ngOnInit(),this.initRenderBox()}}return(t=s).\u0275fac=function(){let o;return function(i){return(o||(o=e.xGo(t)))(i||t)}}(),t.\u0275cmp=e.VBU({type:t,selectors:[["azt-question-standalone-for-classification-tool"]],inputs:{questionObj:"questionObj",follower:"follower"},features:[e.Vt3],decls:4,vars:2,consts:[["class","question-standalone-loader-box",3,"ngClass",4,"ngIf","ngIfElse"],["elementRended",""],[1,"question-standalone-loader-box",3,"ngClass"],[1,"box","p-3"],[3,"content"],["class","row answers",3,"answerSizeManager",4,"ngIf"],[1,"flex","justify-between"],["class","font-medium text-md text-left text-success mt-3",4,"ngIf","ngIfElse"],["essayAnswer",""],["class","ml-auto mt-1",4,"ngIf"],[2,"display","block",3,"isShowExplain","questionObj","renderConfigObj"],[1,"row","answers",3,"answerSizeManager"],["class","answer col-sm-12 col-md-6",4,"ngFor","ngForOf"],[1,"answer","col-sm-12","col-md-6"],[1,"answer-label"],[1,"font-medium","text-md","text-left","text-success","mt-3"],[1,"ml-auto","mt-1"],["azt-track-service","azt-standalone-question-4zQT3eCoTDc",1,"btn","btn-transparent",2,"user-select","none",3,"click"]],template:function(n,i){if(1&n&&(e.qex(0),e.DNE(1,ve,1,3,"div",0),e.DNE(2,Se,13,14,"ng-template",null,1,e.C5r),e.bVm()),2&n){const r=e.sdS(3);e.R7$(1),e.Y8G("ngIf",!i.renderConfigObj.isRenderElement)("ngIfElse",r)}},dependencies:[c.YU,c.Sq,c.bT,he.C,be.N,Ce.x,C.wp,C.V6,C.Zm,C.FC],styles:[".box-content[_ngcontent-%COMP%]{border-radius:5px;border:1px solid #fafafa;margin:15px;box-shadow:2px 2px 5px #eee}.button-icon-feedback[_ngcontent-%COMP%]{color:gray;float:right}.question-standalone-label[_ngcontent-%COMP%]{font-weight:700}",'.pr-7[_ngcontent-%COMP%]{padding-right:28px}.w-38px[_ngcontent-%COMP%]{width:38px}.remove-grid[_ngcontent-%COMP%]{display:block!important}.question-standalone-loader-box[_ngcontent-%COMP%]{min-height:50px}  .skeleton-box-loading{width:100%;height:30px;max-width:100%;margin-bottom:5px;display:inline-block}  .skeleton-box-loading:after{position:absolute;top:0;right:0;bottom:0;left:0;transform:translate(-100%);animation:_ngcontent-%COMP%_shimmer 2s infinite;content:""}.question-standalone-box[_ngcontent-%COMP%]{margin-bottom:30px;display:block;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);border-radius:.375rem}.question-standalone-container[_ngcontent-%COMP%]{padding:15px}.question-standalone-for-test-finder[_ngcontent-%COMP%]{border:none;margin-bottom:0;padding:0}.question-standalone-for-test-finder[_ngcontent-%COMP%]   .question-standalone-main-content[_ngcontent-%COMP%]{padding:15px;border:1px solid rgb(228,228,228)}.group-of-question-standalone-for-test-finder[_ngcontent-%COMP%]{padding:15px!important;border:1px solid rgb(228,228,228)!important}.question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid #2262ae!important;outline:3px solid rgba(125,160,201,.65)!important}.group-of-question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid green!important;outline:3px solid rgba(0,193,0,.321)!important}.question-standalone-label[_ngcontent-%COMP%]{font-weight:700}.question-standalone-content-box[_ngcontent-%COMP%]{position:relative}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]{color:#f44336;position:relative;padding-left:20px;display:flex;align-items:center}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]:before{content:"!";position:absolute;left:0;color:#fff;background:#f44336;width:15px;height:15px;text-align:center;border-radius:50%;font-size:smaller;display:flex;justify-content:center;align-items:center}.question-standalone-step-container-box[_ngcontent-%COMP%]{margin-bottom:50px}.group-content-of-question-standalone[_ngcontent-%COMP%]{margin-bottom:10px;font-weight:700}.answer[_ngcontent-%COMP%]{display:flex;align-items:center}.answer-label[_ngcontent-%COMP%]{width:20px;height:30px;min-width:20px;min-height:30px;display:flex;align-items:center;justify-content:flex-start;border-radius:50%;border-width:2px;border-style:solid;border-color:transparent}.answer-box[_ngcontent-%COMP%]{border-radius:0 0 3px 3px;padding:8px 20px;justify-content:space-between;align-items:center}.selected-answer[_ngcontent-%COMP%]{background-color:#f39c12;color:#fff}.answer-content-front[_ngcontent-%COMP%]{display:flex!important;flex-wrap:wrap;width:calc(100% - 30px)}.explainTxt[_ngcontent-%COMP%]{width:125px;font-weight:500;display:flex;align-items:center}#examHeader[_ngcontent-%COMP%]{display:block;border:1px solid #e7e7e7;border-radius:3px;overflow:hidden}.arrow_btn[_ngcontent-%COMP%]{font-size:20px;vertical-align:middle;width:20px;height:20px;color:#fff;margin-left:auto!important;margin-right:auto!important;-webkit-user-select:none;user-select:none}.bottom_action[_ngcontent-%COMP%]{position:fixed;padding:15px;bottom:0;left:0;background:#312e2e;color:#fff;width:100%}.bottom_action[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]{display:block}.btn-ans-result[_ngcontent-%COMP%]{color:#fff;background-color:#f39c12}.show-list[_ngcontent-%COMP%]{max-width:200px}.show-list[_ngcontent-%COMP%]   .show-sheet[_ngcontent-%COMP%]   .listli[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:27px;height:27px;border-radius:50%;border:1px solid #347da5;display:flex;align-items:center;color:#fff;justify-content:center;font-size:12px;cursor:pointer;-webkit-user-select:none;user-select:none}.top_action[_ngcontent-%COMP%]{position:fixed;padding:10px;top:0;left:0;background:#312e2e;color:#fff;width:100%}.scrollSheetMobile[_ngcontent-%COMP%]{max-height:200px;overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.scrollSheetMobile[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.notify-badge[_ngcontent-%COMP%]{position:absolute;right:3px;top:3px;text-align:center;color:#afafaf;padding:0;font-size:20px;cursor:pointer}.attach-container[_ngcontent-%COMP%]{background:#fff;padding:10px 0 0;border-radius:5px;width:83.33%;border:1px solid #e8e8e8}.answer-review[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:50%;border:1px solid rgb(52,125,165);display:flex;align-items:center;color:#fff;justify-content:center;font-size:15px;-webkit-user-select:none;user-select:none}.border-none[_ngcontent-%COMP%]{border:none!important}.bg-question[_ngcontent-%COMP%]{margin-top:15px;padding:15px 10px;background:#fff}.question-pending-part[_ngcontent-%COMP%]{width:100%;height:50px}.pencil-edit[_ngcontent-%COMP%]{position:absolute;top:-5px;right:-5px;width:30px;height:30px;border-radius:50%;text-align:center;background:#a9a9a9;z-index:9999}.pencil-edit[_ngcontent-%COMP%]   .lucide[_ngcontent-%COMP%]{color:#fff;stroke-width:2.5px;height:29px}.margin-question-bar[_ngcontent-%COMP%]{margin-top:calc(3rem + 40px)!important}.sheet-screen[_ngcontent-%COMP%]{max-height:calc(100vh - 140px);overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.sheet-screen[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}  .layout{display:grid;margin:20px 0;grid-row-gap:20px}  .layout-4{grid-template-columns:1fr 1fr 1fr 1fr}  .layout-2{grid-template-columns:1fr 1fr}  .layout-1{grid-template-columns:1fr}  .question-standalone-content-box{max-width:100%;overflow-x:auto;overflow-y:hidden}  #boxContentQuestion .question-standalone-container{max-width:800px}@keyframes _ngcontent-%COMP%_shimmer{to{transform:translate(100%)}}@media (max-width: 768px){.answer-content-front[_ngcontent-%COMP%]{justify-content:center}.btn-ans-result[_ngcontent-%COMP%]{margin-right:auto!important}}@media (max-width: 800px){  #boxContentQuestion .question-standalone-container{max-width:calc(90vw - 16px)!important}}']}),s})();var E=a(96451);function ze(t,s){if(1&t&&e.nrm(0,"azt-loading-effect",4),2&t){const o=e.XpG();e.Y8G("currentStatusObj",o.statusObj)}}function Ae(t,s){1&t&&e.nrm(0,"azt-loading-ui",16)}const Me=function(){return{"mr-1":!0}};function ke(t,s){if(1&t){const o=e.RV6();e.j41(0,"tr")(1,"td")(2,"div")(3,"div",8),e.nrm(4,"azt-question-standalone-for-classification-tool",9),e.k0s()(),e.j41(5,"div",10)(6,"span",11),e.bIt("click",function(){const r=e.eBV(o).$implicit,d=e.XpG(2);return e.Njj(d.editObjectiveDialog(r))}),e.nrm(7,"lucide-icon",12),e.EFF(8),e.nI1(9,"mytranslate"),e.k0s()()(),e.j41(10,"td",13)(11,"span",14),e.bIt("click",function(){const r=e.eBV(o).$implicit,d=e.XpG(2);return e.Njj(d.approvedThisQuestion(r,d.objectiveId))}),e.DNE(12,Ae,1,0,"azt-loading-ui",15),e.EFF(13),e.nI1(14,"mytranslate"),e.k0s()()()}if(2&t){const o=s.$implicit,n=e.XpG(2);e.R7$(3),e.Y8G("id","question_render_element_"+o.id),e.R7$(1),e.Y8G("follower",n.followerRenderQuest)("questionObj",o),e.R7$(3),e.Y8G("ngClass",e.lJ4(11,Me)),e.R7$(1),e.SpI(" ",e.bMT(9,7,"lang_azota_tool_knowledge_edit_objective_button")," "),e.R7$(4),e.Y8G("ngIf",(null==n.loadingActionObj?null:n.loadingActionObj.id)==o.id),e.R7$(1),e.SpI(" ",e.bMT(14,9,"lang_azota_tool_knowledge_approved_objective_button")," ")}}function Ee(t,s){if(1&t){const o=e.RV6();e.j41(0,"table",5)(1,"tbody"),e.DNE(2,ke,15,12,"tr",6),e.k0s()(),e.j41(3,"div",7),e.bIt("click",function(){e.eBV(o);const i=e.XpG();return e.Njj(i.loadMoreQuestions())}),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()}if(2&t){const o=e.XpG();e.R7$(2),e.Y8G("ngForOf",o.objs),e.R7$(2),e.SpI(" ",e.bMT(5,2,"lang_azota_tool_knowledge_reload_list_questions")," ")}}let De=(()=>{var t;class s extends j.H{approvedThisQuestion(n,i){let r={items:[{questionId:n.id,objectiveId:i}]};this.loadingActionObj=n,this.waitDestroy(this.aiQuestionBankService.aiApiV1QuestionBankUpdateObjectiveOfQuestionsByManualPost(r).subscribe({next:d=>{this.objs=this.objs.filter(v=>v.id!=n.id),this.objs.length<=0&&this.loadMoreQuestions(),this.loadingActionObj=void 0,this.successStatusObj("lang_cms_update_success",!0)},error:d=>{this.errorStatusObj(d.error.message,!0),this.loadingActionObj=void 0}}))}editObjectiveDialog(n){this.sAztDialogService.open(pe,{data:{levelId:this.schoolLevelId,subjectId:this.schoolSubjectId,bookId:this.bookId,objectiveIdSelected:this.objectiveId},width:"100vw",restoreFocus:!1}).afterClosed().subscribe(r=>{r?.objectiveId&&this.approvedThisQuestion(n,r.objectiveId)})}loadMoreQuestions(){this.followerRenderQuest=new k.e,this.initStatusObj(),this.waitDestroy(this.aiQuestionBankService.aiApiV1QuestionBankGetNotManualAssignObjectiveQuestionsGet(this.objectiveId,50).subscribe({next:n=>{this.waitDestroy(this.questionService.apiQuestionsListPost({ids:n}).subscribe(i=>{this.loadQuest(i.data??[],r=>{this.followerRenderQuest.setNumQuest(this.objs.length),this.objs=r,this.stopStatusObj()})}))},error:n=>this.errorStatusObj(n.error.message,!0)}))}loadQuest(n,i){const r=this.commonService.castJsonToClassObjs(V.I,JSON.stringify(n))??[];this.questionRenderService.parseRenderQuestions(r??[],d=>{},this.configRenderService).then(d=>{i(d)}).catch(d=>{this.showErrorSnack("lang_auto_de_thi_tai_khong_thanh_cong"),i(r)})}getObjectiveInfo(){this.sAztKnowledgeObjectiveService.getKnowledgeByApi(this.schoolLevelId,this.schoolSubjectId,!1,this.bookId,n=>this.curObjectiveObj=this.sAztKnowledgeObjectiveService.getObjByObjectiveId(n,this.objectiveId),n=>this.errorStatusObj(n,!0))}ngOnInit(){super.ngOnInit(),this.schoolLevelId=Number(this.commonService.getMyParam(this.activeRoute,"levelId")??0),this.schoolSubjectId=Number(this.commonService.getMyParam(this.activeRoute,"subjectId")??0),this.bookId=Number(this.commonService.getMyParam(this.activeRoute,"bookId")??0),this.objectiveId=Number(this.commonService.getMyParam(this.activeRoute,"objectiveId")??0),this.backTo=`/azota-tools/knowledge-tree-classification/${this.schoolLevelId}/${this.schoolSubjectId}/${this.bookId}`,this.loadMoreQuestions(),this.getObjectiveInfo()}constructor(n,i,r){super(),this.aiQuestionBankService=n,this.questionService=i,this.activeRoute=r,this.questionRenderService=(0,e.WQX)(B.g),this.configRenderService=new $.y(!0),this.sAztDialogService=(0,e.WQX)(N.i),this.sAztKnowledgeObjectiveService=(0,e.WQX)(D),this.followerRenderQuest=new k.e,this.backTo="",this.objs=[],this.schoolLevelId=0,this.schoolSubjectId=0,this.bookId=0,this.objectiveId=0,this.loadingActionObj=void 0}}return(t=s).\u0275fac=function(n){return new(n||t)(e.rXU(y.gK),e.rXU(ue.wP),e.rXU(h.nX))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-tools-knowledge-approve-classification-questions"]],features:[e.Vt3],decls:8,vars:10,consts:[[3,"headerBackToLink"],[1,"mt-3","font-medium","box","p-3",3,"innerHtml"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],["doneLoading",""],[3,"currentStatusObj"],[1,"table","table-report","mt-3"],[4,"ngFor","ngForOf"],[1,"text-center","clickable","link-color","link-text","mt-3",3,"click"],["load_effect_lazy","",1,"question-standalone-box",3,"id"],[3,"follower","questionObj"],[1,"mt-3"],[1,"clickable","link-color","link-text",3,"click"],["name","tags","size","16",3,"ngClass"],[1,"w-60","text-center"],[1,"btn","btn-primary",3,"click"],["class","mr-1",4,"ngIf"],[1,"mr-1"]],template:function(n,i){if(1&n&&(e.j41(0,"teacher-layout",0),e.nrm(1,"div",1),e.nI1(2,"safeContentQuestion"),e.nI1(3,"async"),e.nI1(4,"mathJaxContent"),e.DNE(5,ze,1,1,"azt-loading-effect",2),e.DNE(6,Ee,6,4,"ng-template",null,3,e.C5r),e.k0s()),2&n){const r=e.sdS(7);e.Y8G("headerBackToLink",i.backTo),e.R7$(1),e.Y8G("innerHtml",e.bMT(2,4,e.bMT(3,6,e.bMT(4,8,null==i.curObjectiveObj?null:i.curObjectiveObj.title))),e.npT),e.R7$(4),e.Y8G("ngIf",i.statusObj.loading)("ngIfElse",r)}},dependencies:[c.YU,c.Sq,c.bT,z.K,ge.N,_e.R,ye,E.Q,_.WGl,c.Jj,C.wp,C.km,C.ep],styles:["th[_ngcontent-%COMP%]{background-color:#f4f4f4;border:1px solid #ccc}.table-report[_ngcontent-%COMP%]{border-spacing:0 2px!important}"]}),s})();var P=a(51614);function Re(t,s){1&t&&e.eu8(0)}const Fe=function(t){return[t]};function Pe(t,s){if(1&t&&(e.j41(0,"span",11),e.nI1(1,"navigationLocalize"),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()),2&t){const o=e.XpG().$implicit,n=e.XpG(3);e.Y8G("routerLink",e.eq3(6,Fe,e.bMT(1,2,"/azota-tools/knowledge-tree-approve-classification/"+n.form.controls.schoolLevel.value+"/"+n.form.controls.schoolSubject.value+"/"+n.form.controls.bookIdFormControl.value+"/"+o.objectiveId))),e.R7$(2),e.SpI(" ",e.bMT(3,4,"lang_tool_knowledge_start_approve_questions")," ")}}function Ge(t,s){1&t&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t&&(e.R7$(1),e.JRh(e.bMT(2,1,"lang_tool_knowledge_approved_all_questions")))}function Ke(t,s){1&t&&e.eu8(0)}const Qe=function(t,s){return{nodes:t,level:s}},G=function(t){return{tplDataObj:t}};function Le(t,s){if(1&t&&(e.qex(0),e.DNE(1,Ke,1,0,"ng-container",3),e.bVm()),2&t){const o=e.XpG().$implicit,n=e.XpG().$implicit;e.XpG(2);const i=e.sdS(13);e.R7$(1),e.Y8G("ngTemplateOutlet",i)("ngTemplateOutletContext",e.eq3(5,G,e.l_i(2,Qe,o.children,n.level+1)))}}const $e=function(t){return{"text-danger":t}};function Ne(t,s){if(1&t&&(e.qex(0),e.j41(1,"tr"),e.nrm(2,"td",7),e.nI1(3,"safeContentQuestion"),e.nI1(4,"async"),e.nI1(5,"mathJaxContent"),e.j41(6,"td",8),e.EFF(7),e.j41(8,"span",9),e.EFF(9),e.k0s()(),e.j41(10,"td",1),e.DNE(11,Pe,4,8,"span",10),e.DNE(12,Ge,3,3,"span",5),e.k0s()(),e.DNE(13,Le,2,7,"ng-container",5),e.bVm()),2&t){const o=s.$implicit,n=e.XpG().$implicit;e.R7$(2),e.xc7("padding-left",7*(n.level+1),"px"),e.Y8G("innerHTML",e.bMT(3,9,e.bMT(4,11,e.bMT(5,13,"L"+(n.level+1)+". "+o.title))),e.npT),e.R7$(5),e.SpI(" ",o.numberOfManualQuestions," / "),e.R7$(1),e.Y8G("ngClass",e.eq3(15,$e,o.numberOfNotManualQuestions>0)),e.R7$(1),e.JRh(o.numberOfNotManualQuestions),e.R7$(2),e.Y8G("ngIf",o.objectiveId&&o.numberOfNotManualQuestions>0),e.R7$(1),e.Y8G("ngIf",o.numberOfNotManualQuestions<=0),e.R7$(1),e.Y8G("ngIf",o.children.length>0)}}function Ve(t,s){if(1&t&&(e.qex(0),e.DNE(1,Ne,14,17,"ng-container",6),e.bVm()),2&t){const o=s.$implicit;e.R7$(1),e.Y8G("ngForOf",o.nodes)}}function Be(t,s){if(1&t&&e.DNE(0,Ve,2,1,"ng-container",5),2&t){const o=s.tplDataObj,n=e.XpG();e.Y8G("ngIf",n.asTemplateDataObj(o))}}const Ye=function(t){return{nodes:t,level:0}};let qe=(()=>{var t;class s extends j.H{asTemplateDataObj(n){return n}}return(t=s).\u0275fac=function(){let o;return function(i){return(o||(o=e.xGo(t)))(i||t)}}(),t.\u0275cmp=e.VBU({type:t,selectors:[["app-tools-view-one-knowledge-tree-for-classification"]],inputs:{nodes:"nodes",form:"form"},features:[e.Vt3],decls:14,vars:12,consts:[[1,"table","table-report"],[1,"text-center"],[1,"text-center","w-48"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["recursiveListTmpl",""],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"innerHTML"],[1,"text-right"],[3,"ngClass"],["class","btn btn-primary",3,"routerLink",4,"ngIf"],[1,"btn","btn-primary",3,"routerLink"]],template:function(n,i){if(1&n&&(e.j41(0,"table",0)(1,"thead")(2,"tr")(3,"th",1),e.EFF(4,"\xa0"),e.k0s(),e.j41(5,"th",2),e.EFF(6),e.nI1(7,"mytranslate"),e.nI1(8,"mytranslate"),e.k0s(),e.nrm(9,"th",2),e.k0s()(),e.j41(10,"tbody"),e.DNE(11,Re,1,0,"ng-container",3),e.k0s()(),e.DNE(12,Be,1,1,"ng-template",null,4,e.C5r)),2&n){const r=e.sdS(13);e.R7$(6),e.Lme("",e.bMT(7,4,"lang_tool_knowledge_manual_approved")," / ",e.bMT(8,6,"lang_tool_knowledge_manual_not_approved"),""),e.R7$(5),e.Y8G("ngTemplateOutlet",r)("ngTemplateOutletContext",e.eq3(10,G,e.eq3(8,Ye,i.nodes)))}},dependencies:[h.Wk,c.YU,c.Sq,c.bT,c.T3,c.Jj,C.F2,C.wp,C.km,C.ep],styles:["th[_ngcontent-%COMP%]{background-color:#f4f4f4;border:1px solid #ccc}.table-report[_ngcontent-%COMP%]{border-spacing:0 2px!important}"]}),s})();function Xe(t,s){if(1&t&&e.nrm(0,"azt-loading-effect",5),2&t){const o=e.XpG();e.Y8G("currentStatusObj",o.statusObj)}}function Ue(t,s){if(1&t&&e.nrm(0,"app-tools-view-one-knowledge-tree-for-classification",7),2&t){const o=e.XpG(2);e.Y8G("form",o.form)("nodes",o.nodes)}}function We(t,s){if(1&t&&e.DNE(0,Ue,1,2,"app-tools-view-one-knowledge-tree-for-classification",6),2&t){const o=e.XpG();e.Y8G("ngIf",o.nodes.length)}}let He=(()=>{var t;class s extends j.H{changeLevelSubjectBookEvent(){let n=this.form.getRawValue();this.commonService.myNavigation("/azota-tools/knowledge-tree-classification/"+n.schoolLevel+"/"+n.schoolSubject+"/"+n.bookIdFormControl),this.initStatusObj(),this.waitDestroy(this.aiElearningService.aiApiV1ElearningGetKnowledgeTreeForClassificationGet(n.schoolLevel,n.schoolSubject,n.bookIdFormControl>0?n.bookIdFormControl:void 0).subscribe({next:i=>{this.nodes=i.nodes,this.stopStatusObj()},error:i=>this.errorStatusObj(i.error.message,!0)}))}ngOnInit(){super.ngOnInit(),this.commonService.translateMetaData({title:"lang_cms_admin_tools_knowledge_tree_classification_title",description:"lang_cms_admin_tools_knowledge_tree_classification_title",image:"lang_cms_test_image"});let n=Number(this.commonService.getMyParam(this.activeRoute,"levelId")??0),i=Number(this.commonService.getMyParam(this.activeRoute,"subjectId")??0),r=Number(this.commonService.getMyParam(this.activeRoute,"bookId")??0);this.form.controls.schoolLevel.setValue(n),this.form.controls.schoolSubject.setValue(i),this.form.controls.bookIdFormControl.setValue(r)}constructor(n,i){super(),this.aiElearningService=n,this.activeRoute=i,this.backTo="/super-role/admin-tool",this.nodes=[],this.form=new l.gE({schoolLevel:new l.MJ(0,{nonNullable:!0}),schoolSubject:new l.MJ(0,{nonNullable:!0}),bookIdFormControl:new l.MJ(0,{nonNullable:!0})})}}return(t=s).\u0275fac=function(n){return new(n||t)(e.rXU(y.T5),e.rXU(h.nX))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-tools-knowledge-tree-classification"]],features:[e.Vt3],decls:6,vars:8,consts:[[3,"headerBackToLink"],[1,"mt-3","mb-3"],[3,"form","removeLevelSubjectWithOtherName","showBookData","useFirstAsDefault","layout","changeDataEvent"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],["doneLoading",""],[3,"currentStatusObj"],[3,"form","nodes",4,"ngIf"],[3,"form","nodes"]],template:function(n,i){if(1&n&&(e.j41(0,"teacher-layout",0)(1,"div",1)(2,"config-level-subject-book",2),e.bIt("changeDataEvent",function(){return i.changeLevelSubjectBookEvent()}),e.k0s()(),e.DNE(3,Xe,1,1,"azt-loading-effect",3),e.DNE(4,We,1,1,"ng-template",null,4,e.C5r),e.k0s()),2&n){const r=e.sdS(5);e.Y8G("headerBackToLink",i.backTo),e.R7$(2),e.Y8G("form",i.form)("removeLevelSubjectWithOtherName",!0)("showBookData",!0)("useFirstAsDefault",!0)("layout","label_in_one_line"),e.R7$(1),e.Y8G("ngIf",i.statusObj.loading)("ngIfElse",r)}},dependencies:[c.bT,z.K,P.X,E.Q,qe],encapsulation:2}),s})();var Je=a(99927);let Ze=(()=>{var t;class s{constructor(){this.recognition=1,this.understanding=2,this.practicalApplication=3,this.higherLevelApplication=4}isRecognition(n){return n==this.recognition}isUnderstanding(n){return n==this.understanding}isPracticalApplication(n){return n==this.practicalApplication}isHigherLevelApplication(n){return n==this.higherLevelApplication}}return(t=s).\u0275fac=function(n){return new(n||t)},t.\u0275prov=e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"}),s})();function et(t,s){if(1&t&&(e.j41(0,"th",10),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t){const o=s.$implicit;e.R7$(1),e.JRh(e.bMT(2,1,"lang_tool_knowledge_answer_type_"+o))}}function tt(t,s){if(1&t&&(e.j41(0,"th",12),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t){const o=s.$implicit;e.R7$(1),e.JRh(e.bMT(2,1,"lang_tool_knowledge_difficulty_index_"+o))}}function nt(t,s){if(1&t&&(e.qex(0),e.DNE(1,tt,3,3,"th",11),e.bVm()),2&t){const o=e.XpG();e.R7$(1),e.Y8G("ngForOf",o.difficultyIndexes)}}function ot(t,s){1&t&&e.eu8(0)}const it=function(t){return{"text-danger":t}};function st(t,s){if(1&t&&(e.qex(0),e.j41(1,"td",15),e.EFF(2),e.k0s(),e.bVm()),2&t){const o=s.$implicit,n=e.XpG().$implicit,i=e.XpG().$implicit,r=e.XpG(3);let d,v;e.R7$(1),e.Y8G("ngClass",e.eq3(2,it,(null!==(d=null==(d=r.findQuestionObj(i.questions,n,o))?null:d.total)&&void 0!==d?d:0)<=r.filterTotalQuestionFormControl.value)),e.R7$(1),e.SpI(" ",null!==(v=null==(v=r.findQuestionObj(i.questions,n,o))?null:v.total)&&void 0!==v?v:0," ")}}function at(t,s){if(1&t&&(e.qex(0),e.DNE(1,st,3,4,"ng-container",7),e.bVm()),2&t){const o=e.XpG(4);e.R7$(1),e.Y8G("ngForOf",o.difficultyIndexes)}}function rt(t,s){1&t&&e.eu8(0)}const lt=function(t,s){return{nodes:t,level:s}},K=function(t){return{tplDataObj:t}};function ct(t,s){if(1&t&&(e.qex(0),e.DNE(1,rt,1,0,"ng-container",8),e.bVm()),2&t){const o=e.XpG().$implicit,n=e.XpG().$implicit;e.XpG(2);const i=e.sdS(17);e.R7$(1),e.Y8G("ngTemplateOutlet",i)("ngTemplateOutletContext",e.eq3(5,K,e.l_i(2,lt,o.children,n.level+1)))}}function dt(t,s){if(1&t&&(e.qex(0),e.j41(1,"tr"),e.nrm(2,"td",14),e.nI1(3,"safeContentQuestion"),e.nI1(4,"async"),e.nI1(5,"mathJaxContent"),e.DNE(6,at,2,1,"ng-container",7),e.k0s(),e.DNE(7,ct,2,7,"ng-container",13),e.bVm()),2&t){const o=s.$implicit,n=e.XpG().$implicit,i=e.XpG(2);e.R7$(2),e.xc7("padding-left",7*(n.level+1),"px"),e.Y8G("innerHTML",e.bMT(3,5,e.bMT(4,7,e.bMT(5,9,"L"+(n.level+1)+". "+o.title))),e.npT),e.R7$(4),e.Y8G("ngForOf",i.answerTypes),e.R7$(1),e.Y8G("ngIf",o.children.length>0)}}function pt(t,s){if(1&t&&(e.qex(0),e.DNE(1,dt,8,11,"ng-container",7),e.bVm()),2&t){const o=s.$implicit;e.R7$(1),e.Y8G("ngForOf",o.nodes)}}function ut(t,s){if(1&t&&e.DNE(0,pt,2,1,"ng-container",13),2&t){const o=s.tplDataObj,n=e.XpG();e.Y8G("ngIf",n.asTemplateDataObj(o))}}const gt=function(t){return{nodes:t,level:0}};let _t=(()=>{var t;class s extends j.H{constructor(){super(...arguments),this.sAztAnswerTypeService=(0,e.WQX)(Je._),this.sAztQuestionDifficultyIndexService=(0,e.WQX)(Ze),this.filterTotalQuestionFormControl=new l.MJ(20,{nonNullable:!0}),this.answerTypes=[this.sAztAnswerTypeService.oneChoiceAnswer,this.sAztAnswerTypeService.fillAnswer,this.sAztAnswerTypeService.trueFalseAnswer],this.difficultyIndexes=[this.sAztQuestionDifficultyIndexService.recognition,this.sAztQuestionDifficultyIndexService.understanding,this.sAztQuestionDifficultyIndexService.practicalApplication]}findQuestionObj(n,i,r){return n.find(d=>d.answerType==i&&d.difficultyIndex==r)}asTemplateDataObj(n){return n}}return(t=s).\u0275fac=function(){let o;return function(i){return(o||(o=e.xGo(t)))(i||t)}}(),t.\u0275cmp=e.VBU({type:t,selectors:[["app-tools-view-one-knowledge-tree-for-statistic"]],inputs:{nodes:"nodes"},features:[e.Vt3],decls:18,vars:12,consts:[[1,"mb-3","box","p-3"],[1,"flex","items-center"],[1,"mr-2","flex-none"],["type","number","min","0",1,"form-control","ml-2",3,"formControl"],[1,"table","table-report"],["rowspan","2",1,"text-center"],["colspan","3","class","text-center",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["recursiveListTmpl",""],["colspan","3",1,"text-center"],["class","text-center",4,"ngFor","ngForOf"],[1,"text-center"],[4,"ngIf"],[3,"innerHTML"],[1,"text-center",3,"ngClass"]],template:function(n,i){if(1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"label",2),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.nrm(5,"input",3),e.k0s()(),e.j41(6,"table",4)(7,"thead")(8,"tr")(9,"th",5),e.EFF(10,"\xa0"),e.k0s(),e.DNE(11,et,3,3,"th",6),e.k0s(),e.j41(12,"tr"),e.DNE(13,nt,2,1,"ng-container",7),e.k0s()(),e.j41(14,"tbody"),e.DNE(15,ot,1,0,"ng-container",8),e.k0s()(),e.DNE(16,ut,1,1,"ng-template",null,9,e.C5r)),2&n){const r=e.sdS(17);e.R7$(3),e.JRh(e.bMT(4,6,"lang_tool_knowledge_filter_by_total_question")),e.R7$(2),e.Y8G("formControl",i.filterTotalQuestionFormControl),e.R7$(6),e.Y8G("ngForOf",i.answerTypes),e.R7$(2),e.Y8G("ngForOf",i.answerTypes),e.R7$(2),e.Y8G("ngTemplateOutlet",r)("ngTemplateOutletContext",e.eq3(10,K,e.eq3(8,gt,i.nodes)))}},dependencies:[c.YU,c.Sq,c.bT,c.T3,l.me,l.Q0,l.BC,l.VZ,l.l_,c.Jj,C.wp,C.km,C.ep],styles:["th[_ngcontent-%COMP%]{background-color:#f4f4f4;border:1px solid #ccc}.table-report[_ngcontent-%COMP%]{border-spacing:0 2px!important}"]}),s})();function mt(t,s){if(1&t&&e.nrm(0,"azt-loading-effect",5),2&t){const o=e.XpG();e.Y8G("currentStatusObj",o.statusObj)}}function ft(t,s){if(1&t&&e.nrm(0,"app-tools-view-one-knowledge-tree-for-statistic",7),2&t){const o=e.XpG(2);e.Y8G("nodes",o.nodes)}}function ht(t,s){if(1&t&&e.DNE(0,ft,1,1,"app-tools-view-one-knowledge-tree-for-statistic",6),2&t){const o=e.XpG();e.Y8G("ngIf",o.nodes.length)}}const bt=[{path:"",children:[{path:"knowledge-tree-statistic/:levelId/:subjectId/:bookId",component:(()=>{var t;class s extends j.H{changeLevelSubjectBookEvent(){let n=this.form.getRawValue();this.commonService.myNavigation("/azota-tools/knowledge-tree-statistic/"+n.schoolLevel+"/"+n.schoolSubject+"/"+n.bookIdFormControl),this.initStatusObj(),this.waitDestroy(this.aiElearningService.aiApiV1ElearningGetKnowledgeTreeGet(n.schoolLevel,n.schoolSubject,!0,n.bookIdFormControl>0?n.bookIdFormControl:void 0).subscribe({next:i=>{this.nodes=i.nodes,this.stopStatusObj()},error:i=>{this.nodes=[],this.errorStatusObj(i.error.message,!0)}}))}ngOnInit(){super.ngOnInit(),this.commonService.translateMetaData({title:"lang_cms_admin_tools_knowledge_tree_statistic_title",description:"lang_cms_admin_tools_knowledge_tree_statistic_title",image:"lang_cms_test_image"});let n=Number(this.commonService.getMyParam(this.activeRoute,"levelId")??0),i=Number(this.commonService.getMyParam(this.activeRoute,"subjectId")??0),r=Number(this.commonService.getMyParam(this.activeRoute,"bookId")??0);this.form.controls.schoolLevel.setValue(n),this.form.controls.schoolSubject.setValue(i),this.form.controls.bookIdFormControl.setValue(r)}constructor(n,i){super(),this.aiElearningService=n,this.activeRoute=i,this.backTo="/super-role/admin-tool",this.nodes=[],this.form=new l.gE({schoolLevel:new l.MJ(0,{nonNullable:!0}),schoolSubject:new l.MJ(0,{nonNullable:!0}),bookIdFormControl:new l.MJ(0,{nonNullable:!0})})}}return(t=s).\u0275fac=function(n){return new(n||t)(e.rXU(y.T5),e.rXU(h.nX))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-tools-knowledge-tree-statistic"]],features:[e.Vt3],decls:6,vars:8,consts:[[3,"headerBackToLink"],[1,"mt-3","mb-3"],[3,"form","removeLevelSubjectWithOtherName","showBookData","useFirstAsDefault","layout","changeDataEvent"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],["doneLoading",""],[3,"currentStatusObj"],[3,"nodes",4,"ngIf"],[3,"nodes"]],template:function(n,i){if(1&n&&(e.j41(0,"teacher-layout",0)(1,"div",1)(2,"config-level-subject-book",2),e.bIt("changeDataEvent",function(){return i.changeLevelSubjectBookEvent()}),e.k0s()(),e.DNE(3,mt,1,1,"azt-loading-effect",3),e.DNE(4,ht,1,1,"ng-template",null,4,e.C5r),e.k0s()),2&n){const r=e.sdS(5);e.Y8G("headerBackToLink",i.backTo),e.R7$(2),e.Y8G("form",i.form)("removeLevelSubjectWithOtherName",!0)("showBookData",!0)("useFirstAsDefault",!0)("layout","label_in_one_line"),e.R7$(1),e.Y8G("ngIf",i.statusObj.loading)("ngIfElse",r)}},dependencies:[c.bT,z.K,P.X,E.Q,_t],encapsulation:2}),s})()},{path:"knowledge-tree-classification/:levelId/:subjectId/:bookId",component:He},{path:"knowledge-tree-approve-classification/:levelId/:subjectId/:bookId/:objectiveId",component:De}]}];let Ct=(()=>{var t;class s{}return(t=s).\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[h.iI.forChild(bt),h.iI,M.XE]}),s})(),Ot=(()=>{var t;class s{}return(t=s).\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({providers:[{provide:g.vn,useValue:A.c.azt_tiny_mce_script_src}],imports:[h.iI,c.MD,l.YN,g.sv,m.s,l.X1,Ct,w.Q,x.L,u.Id,S.b,_.flO.pick(_.Ptg),f.AC,b.DL,p.An]}),s})()}}]);