"use strict";(self.webpackChunkBalacoClient=self.webpackChunkBalacoClient||[]).push([[3606],{43166:(S,p,n)=>{n.d(p,{x:()=>r});var g=n(10936),d=n(48891),i=n(53793);let r=(()=>{var s;class m{filter(e,t){return null==e?[]:e=e.filter(o=>this.removeAllSpecialChars((null!=t?o[t]:o).toString()).includes(this.removeAllSpecialChars(this.searchControl.value)))}mergeSchoolLevel(e){let t=[];return e.forEach(o=>null!=o.schoolLevel&&t.push(o.schoolLevel)),t}removeAllSpecialChars(e){return e=(e=this.commonService.myTranslateInstant(e)??e).toLowerCase().trim(),e=this.commonService.convertVietnameseToEnglish(e),e=this.commonService.removeSpecialStringInSearch(e),(e=this.commonService.removeNonAlphabetic(e)).toLowerCase().trim()}constructor(e){this.commonService=e,this.searchControl=new g.MJ("",{nonNullable:!0})}}return(s=m).\u0275fac=function(e){return new(e||s)(d.rXU(i.R))},s.\u0275dir=d.FsC({type:s,selectors:[["","searchInList",""]],exportAs:["searchInList"]}),m})()},37320:(S,p,n)=>{n.d(p,{f:()=>c});var g=n(48891),d=n(53793),i=n(17838),r=n(82040),s=n(18447),m=n(85710),l=n(27035),e=n(5424);class t{addTask(u,_){if(null!=_&&this.baseResultCache.has(_))return this.baseResultCache.get(_).asObservable();const f=new i.m(1);return null!=_&&this.baseResultCache.set(_,f),this.baseTaskQueue$?.next(u.pipe((0,r.M)({next:v=>{!v.success&&null!=_&&this.baseResultCache.delete(_),f.next(v)},error:()=>{null!=_&&this.baseResultCache.delete(_),f.next({success:0,message:"lang_common_error_at_task_queue",data:void 0})}}))),f.asObservable()}resetQueue(){this.stopQueue(),this.baseDestroy$=new s.B,this.baseSubscription=new m.yU,this.initializeQueue()}resetConcurrency(u){this.baseLimitConcurrency!=u&&this.initializeQueue()}initializeQueue(){this.baseTaskQueue$=new s.B;const u=this.baseTaskQueue$.pipe((0,l.Z)(_=>_.pipe((0,e.Q)(this.baseDestroy$)),this.baseLimitConcurrency)).subscribe({next:_=>{},error:_=>{},complete:()=>{}});this.baseSubscription.add(u)}stopQueue(){this.baseDestroy$.next(),this.baseDestroy$.complete(),this.baseSubscription.unsubscribe(),this.baseTaskQueue$=null,this.baseResultCache.clear()}constructor(u=10){this.baseLimitConcurrency=u,this.baseTaskQueue$=null,this.baseDestroy$=new s.B,this.baseSubscription=new m.yU,this.baseResultCache=new Map,this.initializeQueue()}}var o=n(96246),a=n(35810);let c=(()=>{var h;class u extends t{callApiToGuestKnowledge(f,v,T,E){if(""==this.standardQuestionData(v))return T(void 0,void 0,void 0);let A={questionId:f?v.questionId:void 0,text:f?void 0:this.standardQuestionData(v),levelId:v.levelId,subjectId:v.subjectId},y=this.aiService.apiAiPredictQuestionKnowledgePost(A);this.addTask(y,this.sAztEncryptService.createMd5(this.commonService.serializeJson(A))).subscribe(C=>C.success?"vip_required"==C.errorCode?E("lang_core_need_vip_upgrade"):!C.data||C.data.score<this.AI_MIN_SCORE?T(void 0,void 0,void 0):void T(C.data.knowledgeId,C.data.objectiveId,C.data.tagId):E(C.message))}standardQuestionData(f){let v=this.commonService.parseQuestionContent(f.questionContent);return v+=" "+this.commonService.parseQuestionContent(f.answerContents.join(" - ")),v.trim()}constructor(){super(2),this.commonService=(0,g.WQX)(d.R),this.aiService=(0,g.WQX)(o.Ee),this.sAztEncryptService=(0,g.WQX)(a.v),this.AI_MIN_SCORE=2.8}}return(h=u).\u0275fac=function(f){return new(f||h)},h.\u0275prov=g.jDH({token:h,factory:h.\u0275fac,providedIn:"root"}),u})()},34292:(S,p,n)=>{n.d(p,{c:()=>r});var g=n(18447),d=n(51698),i=n(48891);let r=(()=>{var s;class m{constructor(){this.checkQuestion=new g.B}listenSetTagEventOfSpecificQuestion(e,t){return new d.c(o=>{this.listenSetTagEventOfAllQuestions().subscribe(a=>{let c=a.questionObj?.id==e.id;null!=t&&a.answerKey!=t&&(c=!1),c&&o.next(a)})})}listenSetTagEventOfAllQuestions(){return this.checkQuestion}sendSetTagEvent(e){this.checkQuestion.next(e)}}return(s=m).\u0275fac=function(e){return new(e||s)},s.\u0275prov=i.jDH({token:s,factory:s.\u0275fac,providedIn:"root"}),m})()},68106:(S,p,n)=>{n.d(p,{c:()=>m});var g=n(48891),d=n(51698),i=n(88249),r=n(53793),s=n(9280);let m=(()=>{var l;class e{constructor(){this.questionService=(0,g.WQX)(s.wP),this.commonService=(0,g.WQX)(r.R),this.replayCache$=null}callApiSetTagForTrueFalseQuestion(o,a,c){return new d.c(h=>{let u=o.configAnswers.find(f=>f.key==a);this.questionService.apiQuestionUpdateQuestionKnowledgePost({questions:[{questionId:o.id,answers:[{answerKey:a,objectiveId:u?.objectiveId,tag:c?.code??""}]}]}).subscribe(f=>{if(!f)return h.next(!1),h.complete(),this.commonService.snackError("lang_update_question_tag_unsuccessfully");this.commonService.snackSuccess("lang_update_question_tag_successfully"),h.next(!0),h.complete()})})}formatTag(o){return o.map(a=>({...a,showName:this.commonService.getValueOfKeyInObject(a,this.commonService.getCurrentLang()+"Name")??a.enName??"Empty"}))}getQuestionTags(){return this.replayCache$||(this.replayCache$=new d.c(o=>{this.questionService.apiQuestionGetTagsGet().subscribe(a=>{if(!a.success)return this.commonService.snackError(a.message);o.next(a.data?.objs?.filter(c=>"VDC"!=c.code)??[]),o.complete()})}).pipe((0,i.t)(1))),this.replayCache$}findCurrentTag(o,a,c){let h=a.find(_=>this.commonService.compareLowerCase(_.key,c))?.tagId,u=o.find(_=>_.id==h);return u?"azt_lang_tag_"+u.code:""}}return(l=e).\u0275fac=function(o){return new(o||l)},l.\u0275prov=g.jDH({token:l,factory:l.\u0275fac,providedIn:"root"}),e})()},99743:(S,p,n)=>{n.d(p,{I:()=>r});var g=n(48891),d=n(53793),i=n(99927);let r=(()=>{var s;class m{constructor(){this.commonService=(0,g.WQX)(d.R),this.sAztAnswerTypeService=(0,g.WQX)(i._)}changeObjectiveForCommonQuestion(e,t){return e.objectiveId=t.objectiveId,e}changeObjectiveForTrueFalseQuestion(e,t,o){return e.configAnswers.find(a=>a.key==o)||e.configAnswers.push({key:o,objectiveId:t.objectiveId}),e}changeTagForCommonQuestion(e,t){return e.tags=t,e}changeTagForTrueFalseQuestion(e,t,o){let a=this.commonService.getFirstOfArray(o);return e.configAnswers.find(c=>c.key==t)?(e.configAnswers.forEach(c=>{c.key==t&&(c.tagId=a?.id,c.tagName=a?.name,c.tagCode=a?.code)}),e):(e.configAnswers.push({key:t,knowledgeId:void 0,objectiveId:void 0,tagCode:a?.code,tagId:a?.id,tagName:a?.name}),e)}changeTagForCommonQuestView(e,t){return e.tag=t,e}changeTagForTrueFalseQuestView(e,t,o){let a=this.commonService.getFirstOfArray(o);return e.configAnswers||(e.configAnswers=[]),e.configAnswers.find(c=>c.key==t)?(e.configAnswers.forEach(c=>{c.key==t&&(c.tagId=a?.id,c.tagName=a?.name,c.tagCode=a?.code)}),e):(e.configAnswers.push({key:t,knowledgeId:void 0,objectiveId:void 0,tagCode:a?.code,tagId:a?.id,tagName:a?.name}),e)}}return(s=m).\u0275fac=function(e){return new(e||s)},s.\u0275prov=g.jDH({token:s,factory:s.\u0275fac,providedIn:"root"}),m})()},50334:(S,p,n)=>{n.d(p,{C:()=>d});var g=n(59640);class d extends g.H{constructor(){super(...arguments),this.nodeObjs=[]}searchByText(r){this.nodeObjs=(r=this.standardSearchText(r)).trim()?this.doSearchByText(r,this.nodeObjs,[]):this.showAndExpandAll(this.nodeObjs)}expand(r){r.isExpand=!0}collapse(r){r.isExpand=!1}doSearchByText(r,s,m){for(var l of s){l.isShow=!1;let e=this.standardSearchText(l.text);(r.includes(e)||e.includes(r))&&(l.isShow=!0,l.isExpand=!0,m.forEach(t=>{t.isShow=!0,t.isExpand=!0})),l.children.length&&(l.children=this.doSearchByText(r,l.children,m.concat(l)))}return s}showAndExpandAll(r){for(var s of r)s.isShow=!0,s.isExpand=!0,s.children=this.showAndExpandAll(s.children);return r}standardSearchText(r){return r=r.toLowerCase(),r=this.commonService.removeSpecialStringInSearch(r),this.commonService.convertVietnameseToEnglish(r)}}},11002:(S,p,n)=>{n.d(p,{$:()=>r});var g=n(59640),d=n(48891);const i=["*"];let r=(()=>{var s;class m extends g.H{constructor(){super(...arguments),this.colorBackground="",this.defaultHeight="45px",this.fixToTopWidth=0,this.fixToTopTop=0}onWindowScroll(){let e=document.querySelector(".azt-content"),t=document.getElementById("flexed-on-top"),o=document.getElementById("position-dev")?.getBoundingClientRect();if(!e||!t||!o)return;let a=window.pageYOffset,c=o.top,h=c<-50;if(this.fixToTopWidth=o.width,this.fixToTopTop=o.top,h){t.style.position="fixed",t.style.zIndex="9999",t.style.height=this.defaultHeight,t.style.right=this.isMobileWebView?"0":"12px",t.style.background=this.colorBackground,t.style.justifyContent="end";let u=e.getBoundingClientRect().width;this.isMobileDevice?(t.style.top="62px",t.style.padding="6px 15px",t.style.width=(u+32).toString()+"px"):(t.style.top="0",t.style.padding="6px 22px",t.style.width=(u+44).toString()+"px")}else(0==a||0==c)&&(t.style.position="",t.style.top="",t.style.right="",t.style.zIndex="",t.style.height="",t.style.padding="",t.style.background="",t.style.width="",t.style.justifyContent="")}}return(s=m).\u0275fac=(()=>{let l;return function(t){return(l||(l=d.xGo(s)))(t||s)}})(),s.\u0275cmp=d.VBU({type:s,selectors:[["flexed-on-the-top"]],hostBindings:function(e,t){1&e&&d.bIt("scroll",function(a){return t.onWindowScroll(a)},!1,d.tSv)},inputs:{colorBackground:"colorBackground",defaultHeight:"defaultHeight"},features:[d.Vt3],ngContentSelectors:i,decls:3,vars:0,consts:[["id","position-dev"],["id","flexed-on-top",1,"flex","flexed-on-top"]],template:function(e,t){1&e&&(d.NAR(),d.nrm(0,"div",0),d.j41(1,"div",1),d.SdG(2),d.k0s())},encapsulation:2}),m})()},75421:(S,p,n)=>{n.d(p,{u:()=>t});var g=n(89163),d=n(33887),i=n(48891),r=n(54460),s=n(15343),m=n(76975);const l=()=>({"mr-2 text-danger":!0});function e(o,a){if(1&o&&i.nrm(0,"lucide-icon",9),2&o){const c=i.XpG();i.Y8G("name",c.data.iconName)("ngClass",i.lJ4(2,l))}}let t=(()=>{var o;class a extends d._{btnCloseDialog(){this.dialogRef.close(!1)}confirmDialog(){this.dialogRef.close(!0)}constructor(h,u){super(u,h),this.dialogRef=h,this.data=u}}return(o=a).\u0275fac=function(h){return new(h||o)(i.rXU(g.CP,8),i.rXU(g.Vh,8))},o.\u0275cmp=i.VBU({type:o,selectors:[["azt-dialog-danger"]],features:[i.Vt3],decls:13,vars:8,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5"],[1,"text-md","flex"],["size","24",3,"name","ngClass",4,"ngIf"],[1,"text-md",3,"innerHtml"],[1,"p-3","text-right"],["azt-track-service","azt-dialog-danger-9EJYp6jGzr",1,"btn","w-24","btn-secondary","mr-2",3,"click"],["azt-track-service","azt-dialog-danger-ffMh3NrPRC",1,"btn","w-24","btn-danger",3,"click"],["size","24",3,"name","ngClass"]],template:function(h,u){1&h&&(i.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),i.DNE(4,e,1,3,"lucide-icon",4),i.nrm(5,"span",5),i.k0s()()(),i.j41(6,"div",6)(7,"button",7),i.bIt("click",function(){return u.btnCloseDialog()}),i.EFF(8),i.nI1(9,"mytranslate"),i.k0s(),i.j41(10,"button",8),i.bIt("click",function(){return u.confirmDialog()}),i.EFF(11),i.nI1(12,"mytranslate"),i.k0s()()()),2&h&&(i.R7$(4),i.Y8G("ngIf",u.data.iconName),i.R7$(),i.Y8G("innerHtml",u.data.content,i.npT),i.R7$(3),i.SpI(" ",i.bMT(9,4,"lang_auto_huy")," "),i.R7$(3),i.SpI(" ",i.bMT(12,6,"lang_auto_xac_nhan")," "))},dependencies:[r.YU,r.bT,s.WGl,m.wp],encapsulation:2}),a})()}}]);