"use strict";(self.webpackChunkBalacoClient=self.webpackChunkBalacoClient||[]).push([[2076],{88089:(k,f,s)=>{s.d(f,{J:()=>x});var v=s(27691),h=s(51698),n=s(64198),u=s(26860),b=s(62095),O=s(41426),d=s(63709);let x=(()=>{var g;class m{replaceImageInContent(t){return new h.c(e=>{if(t.includes("<img ")){var o=this.findAllSubString(t,"<img"),a=[],i=[];o.forEach(r=>{var c=t.indexOf("src=",r),l=t.indexOf('"',Number(c)+5),p=t.substring(Number(c)+5,Number(l)+1);p.includes(";base64")?a.push({oldUrl:p}):p.includes("blob:")&&i.push({oldUrl:p})}),a.length>0?this.reUploadBase64File(a,(r,c)=>{null==c?i&&i.length>0?this.reUploadBlobFile(i,(l,p)=>{null!=p?(t=this.replaceHomeworkContent(t,r),t=this.replaceHomeworkContent(t,l),e.next({errorMessage:void 0,content:t}),e.complete()):(e.next({errorMessage:p,content:t}),e.complete())}):(t=this.replaceHomeworkContent(t,r),e.next({errorMessage:void 0,content:t}),e.complete()):(e.next({errorMessage:c,content:t}),e.complete())}):i.length>0?this.reUploadBlobFile(i,(r,c)=>{null==c?(t=this.replaceHomeworkContent(t,r),e.next({errorMessage:void 0,content:t}),e.complete()):(e.next({errorMessage:c,content:t}),e.complete())}):(t=this.replaceHomeworkContent(t,[]),e.next({errorMessage:void 0,content:t}),e.complete())}else e.next({errorMessage:void 0,content:t}),e.complete()})}replaceHomeworkContent(t,e){return e.length>0&&e.forEach(o=>{t=t.replace(o.oldUrl??"  ",o.newUrl+'" class="w-100 img-fluid"')}),t}findAllSubString(t,e){for(var o=0,a=0,i=[];t.indexOf(e,o)>-1;)a=t.indexOf(e,o),i.push(a),o=a+e.length;return i}getTypeFile(t){var e=t.indexOf(";");return t.substring(5,e)}getFileName(t){var e=t.split("").reverse().join(""),o=e.indexOf(";"),a=e.indexOf("/",o);return e.substring(o,a).split("").reverse().join("")}convertBlobToBase64(t){return new Promise(e=>{var o=new Image;o.crossOrigin="Anonymous",o.addEventListener("load",function(){var a=document.createElement("canvas"),i=a.getContext("2d");a.width=o.width,a.height=o.height,i?.drawImage(o,0,0);var r=a.toDataURL("image/png");e(r)},!1),o.src=t})}reUploadBase64File(t,e){if(t&&t.length>0){let r,i=t.length;for(var o=[],a=0;a<t.length;a++){const c=t[a],l=c.oldUrl?.substring(0,c.oldUrl.length-1);this.startUploadBlobFile(c,l??"",[],(p,y)=>{null==y?o=o.concat(p):r=y,i-=1,0==i&&e(o,r)})}}else e([],"lang_auto_khong_upload_duoc_anh_vui_long_thu_lai_sau")}reUploadBlobFile(t,e){if(t&&t.length>0){let r,i=t.length;for(var o=[],a=0;a<t.length;a++){const c=t[a],l=c?.oldUrl?.substring(0,c.oldUrl.length-1);this.convertBlobToBase64(l??"").then(p=>{this.startUploadBlobFile(c,p,[],(y,T)=>{null==T?o=o.concat(y):r=T,i-=1,0==i&&e(o,r)})})}}else e([],"lang_auto_khong_upload_duoc_anh_vui_long_thu_lai_sau")}startUploadBlobFile(t,e,o,a){if(e&&""!=e){var i=this.getTypeFile(e),r=this.myPdfService.b64toFile(e,this.getFileName(i),i);(0,n.w4)(r).then(c=>{this.apiUploadService.uploadToCdnForHomework(c).subscribe(l=>{if(l.type!=v.hv.UploadProgress)if(1==l.success){var p={...t,newUrl:l.data?.url??""};o.push(p),a(o,void 0)}else a(o,this.commonService.translateToKeyParam("lang_auto_khong_upload_duoc_anh_vui_long_thu_lai_sau_loi",l.message??"none"))})})}else a(o,"lang_auto_khong_upload_duoc_anh_vui_long_thu_lai_sau")}constructor(t,e,o){this.commonService=t,this.apiUploadService=e,this.myPdfService=o}}return(g=m).\u0275fac=function(t){return new(t||g)(u.KVO(b.R),u.KVO(O.T),u.KVO(d.C))},g.\u0275prov=u.jDH({token:g,factory:g.\u0275fac,providedIn:"root"}),m})()},6152:(k,f,s)=>{s.d(f,{b:()=>t});var v=s(10710),h=s(59640),n=s(26860),u=s(9691),b=s(54460),O=s(65162),d=s(76975);const x=function(e){return[e]},g=function(e){return{backto:e}};function m(e,o){if(1&e&&(n.qex(0),n.j41(1,"div",3)(2,"div",4)(3,"b"),n.EFF(4),n.nI1(5,"mytranslate"),n.k0s(),n.EFF(6),n.nI1(7,"formatFullDateTimeByUserUnitPipe"),n.j41(8,"span",5),n.EFF(9),n.nI1(10,"mytranslate"),n.nI1(11,"mytranslate"),n.k0s()(),n.j41(12,"a",6),n.nI1(13,"navigationLocalize"),n.EFF(14),n.nI1(15,"mytranslate"),n.k0s()(),n.bVm()),2&e){const a=n.XpG(2);n.R7$(4),n.SpI("",n.bMT(5,9,"lang_business_config_billing_end_time"),":"),n.R7$(2),n.SpI(" ",n.bMT(7,11,a.vipAccountObj.endTime)," ( "),n.R7$(3),n.LHq("",a.vipAccountObj.subscriptionTimeDtoObj.days," ",n.bMT(10,13,"lang_auto_day"),", ",a.vipAccountObj.subscriptionTimeDtoObj.hours," ",n.bMT(11,15,"lang_auto_clock"),")"),n.R7$(3),n.Y8G("routerLink",n.eq3(21,x,n.bMT(13,17,"/auth/vip-packages/"+(a.type===a.vipPackageType.STUDENT?"studentVip":"teacherVip"))))("queryParams",n.eq3(23,g,a.backToLink)),n.R7$(2),n.SpI(" ",n.bMT(15,19,"lang_azt_renew_now")," ")}}function _(e,o){if(1&e&&(n.j41(0,"div",1),n.DNE(1,m,16,25,"ng-container",2),n.k0s()),2&e){const a=n.XpG();n.R7$(1),n.Y8G("ngIf",a.vipAccountObj.isVipTeacher&&a.type===a.vipPackageType.TEACHER||a.vipAccountObj.isVipStudent&&a.type===a.vipPackageType.STUDENT)}}let t=(()=>{var e;class o extends h.H{getData(){this.checkVipAccountService.getVipInfo(this.type,(i,r)=>{if(null!=r)return this.errorStatusObj(r);this.vipAccountObj=i?.vipSubscriptionObj,this.successStatusObj(),this.vipAccountObj&&(this.vipAccountObj.subscriptionTimeDtoObj=this.sAztTimeService.getDayHourMinuteOfSubtract(this.vipAccountObj?.endTime),(this.vipAccountObj.subscriptionTimeDtoObj.days<0||this.vipAccountObj.subscriptionTimeDtoObj.hours<0||this.vipAccountObj.subscriptionTimeDtoObj.minutes<0)&&(this.vipAccountObj.subscriptionTimeDtoObj={days:0,hours:0,minutes:0}))})}ngOnInit(){super.ngOnInit(),this.backToLink=this.type===this.vipPackageType.TEACHER?"/admin/dashboard":"/student/classroom/0",this.getData()}constructor(i){super(),this.sAztTimeService=i,this.vipPackageType=v.W5,this.backToLink=""}}return(e=o).\u0275fac=function(i){return new(i||e)(n.rXU(u.F))},e.\u0275cmp=n.VBU({type:e,selectors:[["azota-vip-package-warning-box"]],inputs:{type:"type"},features:[n.Vt3],decls:1,vars:1,consts:[["class","p-2 box",4,"ngIf"],[1,"p-2","box"],[4,"ngIf"],[1,"flex","items-center"],[1,"mr-auto"],[1,"text-danger"],["azt-track-service","azota-business-package-expired-v3CxKNRMa",1,"btn","btn-sm","btn-outline-primary","px-2","py-1",3,"routerLink","queryParams"]],template:function(i,r){1&i&&n.DNE(0,_,2,1,"div",0),2&i&&n.Y8G("ngIf",r.vipAccountObj&&r.vipAccountObj.subscriptionTimeDtoObj&&r.vipAccountObj.subscriptionTimeDtoObj.days<=10&&r.vipAccountObj.subscriptionTimeDtoObj.days>0)},dependencies:[b.bT,O.Wk,d.F2,d.wp,d.Rr],encapsulation:2}),o})()},18470:(k,f,s)=>{s.r(f),s.d(f,{conf:()=>x,language:()=>g});var v=s(41574),h=Object.defineProperty,n=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,b=Object.prototype.hasOwnProperty,d={};((m,_,t,e)=>{if(_&&"object"==typeof _||"function"==typeof _)for(let o of u(_))!b.call(m,o)&&"default"!==o&&h(m,o,{get:()=>_[o],enumerable:!(e=n(_,o))||e.enumerable})})(d,v);var x={wordPattern:/(-?\d*\.\d\w*)|([^\`\~\!\@\#\%\^\&\*\(\)\-\=\+\[\{\]\}\\\|\;\:\'\"\,\.\<\>\/\?\s]+)/g,comments:{lineComment:"//",blockComment:["/*","*/"]},brackets:[["{","}"],["[","]"],["(",")"]],onEnterRules:[{beforeText:/^\s*\/\*\*(?!\/)([^\*]|\*(?!\/))*$/,afterText:/^\s*\*\/$/,action:{indentAction:d.languages.IndentAction.IndentOutdent,appendText:" * "}},{beforeText:/^\s*\/\*\*(?!\/)([^\*]|\*(?!\/))*$/,action:{indentAction:d.languages.IndentAction.None,appendText:" * "}},{beforeText:/^(\t|(\ \ ))*\ \*(\ ([^\*]|\*(?!\/))*)?$/,action:{indentAction:d.languages.IndentAction.None,appendText:"* "}},{beforeText:/^(\t|(\ \ ))*\ \*\/\s*$/,action:{indentAction:d.languages.IndentAction.None,removeText:1}}],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"',notIn:["string"]},{open:"'",close:"'",notIn:["string","comment"]},{open:"`",close:"`",notIn:["string","comment"]},{open:"/**",close:" */",notIn:["string"]}],folding:{markers:{start:new RegExp("^\\s*//\\s*#?region\\b"),end:new RegExp("^\\s*//\\s*#?endregion\\b")}}},g={defaultToken:"invalid",tokenPostfix:".ts",keywords:["abstract","any","as","asserts","bigint","boolean","break","case","catch","class","continue","const","constructor","debugger","declare","default","delete","do","else","enum","export","extends","false","finally","for","from","function","get","if","implements","import","in","infer","instanceof","interface","is","keyof","let","module","namespace","never","new","null","number","object","package","private","protected","public","override","readonly","require","global","return","set","static","string","super","switch","symbol","this","throw","true","try","type","typeof","undefined","unique","unknown","var","void","while","with","yield","async","await","of"],operators:["<=",">=","==","!=","===","!==","=>","+","-","**","*","/","%","++","--","<<","</",">>",">>>","&","|","^","!","~","&&","||","??","?",":","=","+=","-=","*=","**=","/=","%=","<<=",">>=",">>>=","&=","|=","^=","@"],symbols:/[=><!~?:&|+\-*\/\^%]+/,escapes:/\\(?:[abfnrtv\\"']|x[0-9A-Fa-f]{1,4}|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})/,digits:/\d+(_+\d+)*/,octaldigits:/[0-7]+(_+[0-7]+)*/,binarydigits:/[0-1]+(_+[0-1]+)*/,hexdigits:/[[0-9a-fA-F]+(_+[0-9a-fA-F]+)*/,regexpctl:/[(){}\[\]\$\^|\-*+?\.]/,regexpesc:/\\(?:[bBdDfnrstvwWn0\\\/]|@regexpctl|c[A-Z]|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4})/,tokenizer:{root:[[/[{}]/,"delimiter.bracket"],{include:"common"}],common:[[/[a-z_$][\w$]*/,{cases:{"@keywords":"keyword","@default":"identifier"}}],[/[A-Z][\w\$]*/,"type.identifier"],{include:"@whitespace"},[/\/(?=([^\\\/]|\\.)+\/([dgimsuy]*)(\s*)(\.|;|,|\)|\]|\}|$))/,{token:"regexp",bracket:"@open",next:"@regexp"}],[/[()\[\]]/,"@brackets"],[/[<>](?!@symbols)/,"@brackets"],[/!(?=([^=]|$))/,"delimiter"],[/@symbols/,{cases:{"@operators":"delimiter","@default":""}}],[/(@digits)[eE]([\-+]?(@digits))?/,"number.float"],[/(@digits)\.(@digits)([eE][\-+]?(@digits))?/,"number.float"],[/0[xX](@hexdigits)n?/,"number.hex"],[/0[oO]?(@octaldigits)n?/,"number.octal"],[/0[bB](@binarydigits)n?/,"number.binary"],[/(@digits)n?/,"number"],[/[;,.]/,"delimiter"],[/"([^"\\]|\\.)*$/,"string.invalid"],[/'([^'\\]|\\.)*$/,"string.invalid"],[/"/,"string","@string_double"],[/'/,"string","@string_single"],[/`/,"string","@string_backtick"]],whitespace:[[/[ \t\r\n]+/,""],[/\/\*\*(?!\/)/,"comment.doc","@jsdoc"],[/\/\*/,"comment","@comment"],[/\/\/.*$/,"comment"]],comment:[[/[^\/*]+/,"comment"],[/\*\//,"comment","@pop"],[/[\/*]/,"comment"]],jsdoc:[[/[^\/*]+/,"comment.doc"],[/\*\//,"comment.doc","@pop"],[/[\/*]/,"comment.doc"]],regexp:[[/(\{)(\d+(?:,\d*)?)(\})/,["regexp.escape.control","regexp.escape.control","regexp.escape.control"]],[/(\[)(\^?)(?=(?:[^\]\\\/]|\\.)+)/,["regexp.escape.control",{token:"regexp.escape.control",next:"@regexrange"}]],[/(\()(\?:|\?=|\?!)/,["regexp.escape.control","regexp.escape.control"]],[/[()]/,"regexp.escape.control"],[/@regexpctl/,"regexp.escape.control"],[/[^\\\/]/,"regexp"],[/@regexpesc/,"regexp.escape"],[/\\\./,"regexp.invalid"],[/(\/)([dgimsuy]*)/,[{token:"regexp",bracket:"@close",next:"@pop"},"keyword.other"]]],regexrange:[[/-/,"regexp.escape.control"],[/\^/,"regexp.invalid"],[/@regexpesc/,"regexp.escape"],[/[^\]]/,"regexp"],[/\]/,{token:"regexp.escape.control",next:"@pop",bracket:"@close"}]],string_double:[[/[^\\"]+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/"/,"string","@pop"]],string_single:[[/[^\\']+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/'/,"string","@pop"]],string_backtick:[[/\$\{/,{token:"delimiter.bracket",next:"@bracketCounting"}],[/[^\\`$]+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/`/,"string","@pop"]],bracketCounting:[[/\{/,"delimiter.bracket","@bracketCounting"],[/\}/,"delimiter.bracket","@pop"],{include:"common"}]}}}}]);