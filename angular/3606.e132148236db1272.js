"use strict";(self.webpackChunkBalacoClient=self.webpackChunkBalacoClient||[]).push([[3606],{43166:(S,f,n)=>{n.d(f,{x:()=>i});var g=n(10936),d=n(48891),o=n(53793);let i=(()=>{var s;class m{filter(e,t){return null==e?[]:e=e.filter(a=>this.removeAllSpecialChars((null!=t?a[t]:a).toString()).includes(this.removeAllSpecialChars(this.searchControl.value)))}mergeSchoolLevel(e){let t=[];return e.forEach(a=>null!=a.schoolLevel&&t.push(a.schoolLevel)),t}removeAllSpecialChars(e){return e=(e=this.commonService.myTranslateInstant(e)??e).toLowerCase().trim(),e=this.commonService.convertVietnameseToEnglish(e),e=this.commonService.removeSpecialStringInSearch(e),(e=this.commonService.removeNonAlphabetic(e)).toLowerCase().trim()}constructor(e){this.commonService=e,this.searchControl=new g.MJ("",{nonNullable:!0})}}return(s=m).\u0275fac=function(e){return new(e||s)(d.rXU(o.R))},s.\u0275dir=d.FsC({type:s,selectors:[["","searchInList",""]],exportAs:["searchInList"]}),m})()},37320:(S,f,n)=>{n.d(f,{f:()=>l});var g=n(48891),d=n(53793),o=n(17838),i=n(82040),s=n(18447),m=n(85710),c=n(27035),e=n(5424);class t{addTask(u,_){if(null!=_&&this.baseResultCache.has(_))return this.baseResultCache.get(_).asObservable();const p=new o.m(1);return null!=_&&this.baseResultCache.set(_,p),this.baseTaskQueue$?.next(u.pipe((0,i.M)({next:v=>{!v.success&&null!=_&&this.baseResultCache.delete(_),p.next(v)},error:()=>{null!=_&&this.baseResultCache.delete(_),p.next({success:0,message:"lang_common_error_at_task_queue",data:void 0})}}))),p.asObservable()}resetQueue(){this.stopQueue(),this.baseDestroy$=new s.B,this.baseSubscription=new m.yU,this.initializeQueue()}resetConcurrency(u){this.baseLimitConcurrency!=u&&this.initializeQueue()}initializeQueue(){this.baseTaskQueue$=new s.B;const u=this.baseTaskQueue$.pipe((0,c.Z)(_=>_.pipe((0,e.Q)(this.baseDestroy$)),this.baseLimitConcurrency)).subscribe({next:_=>{},error:_=>{},complete:()=>{}});this.baseSubscription.add(u)}stopQueue(){this.baseDestroy$.next(),this.baseDestroy$.complete(),this.baseSubscription.unsubscribe(),this.baseTaskQueue$=null,this.baseResultCache.clear()}constructor(u=10){this.baseLimitConcurrency=u,this.baseTaskQueue$=null,this.baseDestroy$=new s.B,this.baseSubscription=new m.yU,this.baseResultCache=new Map,this.initializeQueue()}}var a=n(96246),r=n(35810);let l=(()=>{var h;class u extends t{callApiToGuestKnowledge(p,v,T,A){if(""==this.standardQuestionData(v))return T(void 0,void 0,void 0);let E={questionId:p?v.questionId:void 0,text:p?void 0:this.standardQuestionData(v),levelId:v.levelId,subjectId:v.subjectId},y=this.aiService.apiAiPredictQuestionKnowledgePost(E);this.addTask(y,this.sAztEncryptService.createMd5(this.commonService.serializeJson(E))).subscribe(C=>C.success?"vip_required"==C.errorCode?A("lang_core_need_vip_upgrade"):!C.data||C.data.score<this.AI_MIN_SCORE?T(void 0,void 0,void 0):void T(C.data.knowledgeId,C.data.objectiveId,C.data.tagId):A(C.message))}standardQuestionData(p){let v=this.commonService.parseQuestionContent(p.questionContent);return v+=" "+this.commonService.parseQuestionContent(p.answerContents.join(" - ")),v.trim()}constructor(){super(2),this.commonService=(0,g.WQX)(d.R),this.aiService=(0,g.WQX)(a.Ee),this.sAztEncryptService=(0,g.WQX)(r.v),this.AI_MIN_SCORE=2.8}}return(h=u).\u0275fac=function(p){return new(p||h)},h.\u0275prov=g.jDH({token:h,factory:h.\u0275fac,providedIn:"root"}),u})()},34292:(S,f,n)=>{n.d(f,{c:()=>o});var g=n(18447),d=n(48891);let o=(()=>{var i;class s{constructor(){this.checkQuestion=new g.B}listenSetTagEventOfAllQuestions(){return this.checkQuestion}sendSetTagEvent(c){this.checkQuestion.next(c)}}return(i=s).\u0275fac=function(c){return new(c||i)},i.\u0275prov=d.jDH({token:i,factory:i.\u0275fac,providedIn:"root"}),s})()},68106:(S,f,n)=>{n.d(f,{c:()=>m});var g=n(48891),d=n(51698),o=n(88249),i=n(53793),s=n(9280);let m=(()=>{var c;class e{constructor(){this.questionService=(0,g.WQX)(s.wP),this.commonService=(0,g.WQX)(i.R),this.replayCache$=null}callApiSetTagForTrueFalseQuestion(a,r,l){return new d.c(h=>{let u=a.configAnswers.find(p=>p.key==r);this.questionService.apiQuestionUpdateQuestionKnowledgePost({questions:[{questionId:a.id,answers:[{answerKey:r,objectiveId:u?.objectiveId,tag:l?.code??""}]}]}).subscribe(p=>{if(!p)return h.next(!1),h.complete(),this.commonService.snackError("lang_update_question_tag_unsuccessfully");this.commonService.snackSuccess("lang_update_question_tag_successfully"),h.next(!0),h.complete()})})}formatTag(a){return a.map(r=>({...r,showName:this.commonService.getValueOfKeyInObject(r,this.commonService.getCurrentLang()+"Name")??r.enName??"Empty"}))}getQuestionTags(){return this.replayCache$||(this.replayCache$=new d.c(a=>{this.questionService.apiQuestionGetTagsGet().subscribe(r=>{if(!r.success)return this.commonService.snackError(r.message);a.next(r.data?.objs?.filter(l=>"VDC"!=l.code)??[]),a.complete()})}).pipe((0,o.t)(1))),this.replayCache$}findCurrentTag(a,r,l){let h=r.find(_=>this.commonService.compareLowerCase(_.key,l))?.tagId,u=a.find(_=>_.id==h);return u?"azt_lang_tag_"+u.code:""}}return(c=e).\u0275fac=function(a){return new(a||c)},c.\u0275prov=g.jDH({token:c,factory:c.\u0275fac,providedIn:"root"}),e})()},99743:(S,f,n)=>{n.d(f,{I:()=>i});var g=n(48891),d=n(53793),o=n(99927);let i=(()=>{var s;class m{constructor(){this.commonService=(0,g.WQX)(d.R),this.sAztAnswerTypeService=(0,g.WQX)(o._)}changeObjectiveForCommonQuestion(e,t){return e.objectiveId=t.objectiveId,e}changeObjectiveForTrueFalseQuestion(e,t,a){return e.configAnswers.find(r=>r.key==a)||e.configAnswers.push({key:a,objectiveId:t.objectiveId}),e}changeTagForCommonQuestion(e,t){return e.tags=t,e}changeTagForTrueFalseQuestion(e,t,a){let r=this.commonService.getFirstOfArray(a);return e.configAnswers.find(l=>l.key==t)?(e.configAnswers.forEach(l=>{l.key==t&&(l.tagId=r?.id,l.tagName=r?.name,l.tagCode=r?.code)}),e):(e.configAnswers.push({key:t,knowledgeId:void 0,objectiveId:void 0,tagCode:r?.code,tagId:r?.id,tagName:r?.name}),e)}changeTagForCommonQuestView(e,t){return e.tag=t,e}changeTagForTrueFalseQuestView(e,t,a){let r=this.commonService.getFirstOfArray(a);return e.configAnswers||(e.configAnswers=[]),e.configAnswers.find(l=>l.key==t)?(e.configAnswers.forEach(l=>{l.key==t&&(l.tagId=r?.id,l.tagName=r?.name,l.tagCode=r?.code)}),e):(e.configAnswers.push({key:t,knowledgeId:void 0,objectiveId:void 0,tagCode:r?.code,tagId:r?.id,tagName:r?.name}),e)}}return(s=m).\u0275fac=function(e){return new(e||s)},s.\u0275prov=g.jDH({token:s,factory:s.\u0275fac,providedIn:"root"}),m})()},50334:(S,f,n)=>{n.d(f,{C:()=>d});var g=n(59640);class d extends g.H{constructor(){super(...arguments),this.nodeObjs=[]}searchByText(i){this.nodeObjs=(i=this.standardSearchText(i)).trim()?this.doSearchByText(i,this.nodeObjs,[]):this.showAndExpandAll(this.nodeObjs)}expand(i){i.isExpand=!0}collapse(i){i.isExpand=!1}doSearchByText(i,s,m){for(var c of s){c.isShow=!1;let e=this.standardSearchText(c.text);(i.includes(e)||e.includes(i))&&(c.isShow=!0,c.isExpand=!0,m.forEach(t=>{t.isShow=!0,t.isExpand=!0})),c.children.length&&(c.children=this.doSearchByText(i,c.children,m.concat(c)))}return s}showAndExpandAll(i){for(var s of i)s.isShow=!0,s.isExpand=!0,s.children=this.showAndExpandAll(s.children);return i}standardSearchText(i){return i=i.toLowerCase(),i=this.commonService.removeSpecialStringInSearch(i),this.commonService.convertVietnameseToEnglish(i)}}},11002:(S,f,n)=>{n.d(f,{$:()=>i});var g=n(59640),d=n(48891);const o=["*"];let i=(()=>{var s;class m extends g.H{constructor(){super(...arguments),this.colorBackground="",this.defaultHeight="45px",this.fixToTopWidth=0,this.fixToTopTop=0}onWindowScroll(){let e=document.querySelector(".azt-content"),t=document.getElementById("flexed-on-top"),a=document.getElementById("position-dev")?.getBoundingClientRect();if(!e||!t||!a)return;let r=window.pageYOffset,l=a.top,h=l<-50;if(this.fixToTopWidth=a.width,this.fixToTopTop=a.top,h){t.style.position="fixed",t.style.zIndex="9999",t.style.height=this.defaultHeight,t.style.right=this.isMobileWebView?"0":"12px",t.style.background=this.colorBackground,t.style.justifyContent="end";let u=e.getBoundingClientRect().width;this.isMobileDevice?(t.style.top="62px",t.style.padding="6px 15px",t.style.width=(u+32).toString()+"px"):(t.style.top="0",t.style.padding="6px 22px",t.style.width=(u+44).toString()+"px")}else(0==r||0==l)&&(t.style.position="",t.style.top="",t.style.right="",t.style.zIndex="",t.style.height="",t.style.padding="",t.style.background="",t.style.width="",t.style.justifyContent="")}}return(s=m).\u0275fac=(()=>{let c;return function(t){return(c||(c=d.xGo(s)))(t||s)}})(),s.\u0275cmp=d.VBU({type:s,selectors:[["flexed-on-the-top"]],hostBindings:function(e,t){1&e&&d.bIt("scroll",function(r){return t.onWindowScroll(r)},!1,d.tSv)},inputs:{colorBackground:"colorBackground",defaultHeight:"defaultHeight"},features:[d.Vt3],ngContentSelectors:o,decls:3,vars:0,consts:[["id","position-dev"],["id","flexed-on-top",1,"flex","flexed-on-top"]],template:function(e,t){1&e&&(d.NAR(),d.nrm(0,"div",0),d.j41(1,"div",1),d.SdG(2),d.k0s())},encapsulation:2}),m})()},75421:(S,f,n)=>{n.d(f,{u:()=>t});var g=n(89163),d=n(33887),o=n(48891),i=n(54460),s=n(15343),m=n(76975);const c=()=>({"mr-2 text-danger":!0});function e(a,r){if(1&a&&o.nrm(0,"lucide-icon",9),2&a){const l=o.XpG();o.Y8G("name",l.data.iconName)("ngClass",o.lJ4(2,c))}}let t=(()=>{var a;class r extends d._{btnCloseDialog(){this.dialogRef.close(!1)}confirmDialog(){this.dialogRef.close(!0)}constructor(h,u){super(u,h),this.dialogRef=h,this.data=u}}return(a=r).\u0275fac=function(h){return new(h||a)(o.rXU(g.CP,8),o.rXU(g.Vh,8))},a.\u0275cmp=o.VBU({type:a,selectors:[["azt-dialog-danger"]],features:[o.Vt3],decls:13,vars:8,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5"],[1,"text-md","flex"],["size","24",3,"name","ngClass",4,"ngIf"],[1,"text-md",3,"innerHtml"],[1,"p-3","text-right"],["azt-track-service","azt-dialog-danger-9EJYp6jGzr",1,"btn","w-24","btn-secondary","mr-2",3,"click"],["azt-track-service","azt-dialog-danger-ffMh3NrPRC",1,"btn","w-24","btn-danger",3,"click"],["size","24",3,"name","ngClass"]],template:function(h,u){1&h&&(o.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),o.DNE(4,e,1,3,"lucide-icon",4),o.nrm(5,"span",5),o.k0s()()(),o.j41(6,"div",6)(7,"button",7),o.bIt("click",function(){return u.btnCloseDialog()}),o.EFF(8),o.nI1(9,"mytranslate"),o.k0s(),o.j41(10,"button",8),o.bIt("click",function(){return u.confirmDialog()}),o.EFF(11),o.nI1(12,"mytranslate"),o.k0s()()()),2&h&&(o.R7$(4),o.Y8G("ngIf",u.data.iconName),o.R7$(),o.Y8G("innerHtml",u.data.content,o.npT),o.R7$(3),o.SpI(" ",o.bMT(9,4,"lang_auto_huy")," "),o.R7$(3),o.SpI(" ",o.bMT(12,6,"lang_auto_xac_nhan")," "))},dependencies:[i.YU,i.bT,s.WGl,m.wp],encapsulation:2}),r})()}}]);