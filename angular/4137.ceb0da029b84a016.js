"use strict";(self.webpackChunkBalacoClient=self.webpackChunkBalacoClient||[]).push([[4137],{43166:(w,b,r)=>{r.d(b,{x:()=>c});var m=r(10936),p=r(26860),e=r(62095);let c=(()=>{var s;class O{filter(t,n){return null==t?[]:t=t.filter(a=>this.removeAllSpecialChars((null!=n?a[n]:a).toString()).includes(this.removeAllSpecialChars(this.searchControl.value)))}mergeSchoolLevel(t){let n=[];return t.forEach(a=>null!=a.schoolLevel&&n.push(a.schoolLevel)),n}removeAllSpecialChars(t){return t=(t=this.commonService.myTranslateInstant(t)??t).toLowerCase().trim(),t=this.commonService.convertVietnameseToEnglish(t),t=this.commonService.removeSpecialStringInSearch(t),(t=this.commonService.removeNonAlphabetic(t)).toLowerCase().trim()}constructor(t){this.commonService=t,this.searchControl=new m.MJ("",{nonNullable:!0})}}return(s=O).\u0275fac=function(t){return new(t||s)(p.rXU(e.R))},s.\u0275dir=p.FsC({type:s,selectors:[["","searchInList",""]],exportAs:["searchInList"]}),O})()},50334:(w,b,r)=>{r.d(b,{C:()=>p});var m=r(59640);class p extends m.H{constructor(){super(...arguments),this.nodeObjs=[]}searchByText(c){this.nodeObjs=(c=this.standardSearchText(c)).trim()?this.doSearchByText(c,this.nodeObjs,[]):this.showAndExpandAll(this.nodeObjs)}doSearchByText(c,s,O){for(var h of s){h.isShow=!1;let t=this.standardSearchText(h.text);(c.includes(t)||t.includes(c))&&(h.isShow=!0,h.isExpand=!0,O.forEach(n=>{n.isShow=!0,n.isExpand=!0})),h.children.length&&(h.children=this.doSearchByText(c,h.children,O.concat(h)))}return s}showAndExpandAll(c){for(var s of c)s.isShow=!0,s.isExpand=!0,s.children=this.showAndExpandAll(s.children);return c}expand(c){c.isExpand=!0}collapse(c){c.isExpand=!1}standardSearchText(c){return c=c.toLowerCase(),c=this.commonService.removeSpecialStringInSearch(c),this.commonService.convertVietnameseToEnglish(c)}}},11002:(w,b,r)=>{r.d(b,{$:()=>c});var m=r(59640),p=r(26860);const e=["*"];let c=(()=>{var s;class O extends m.H{constructor(){super(...arguments),this.colorBackground="",this.defaultHeight="45px",this.fixToTopWidth=0,this.fixToTopTop=0}onWindowScroll(){let t=document.querySelector(".azt-content"),n=document.getElementById("flexed-on-top"),a=document.getElementById("position-dev")?.getBoundingClientRect();if(!t||!n||!a)return;let g=window.pageYOffset,f=a.top,T=f<-50;if(this.fixToTopWidth=a.width,this.fixToTopTop=a.top,T){n.style.position="fixed",n.style.zIndex="9999",n.style.height=this.defaultHeight,n.style.right=this.isMobileWebView?"0":"12px",n.style.background=this.colorBackground,n.style.justifyContent="end";let C=t.getBoundingClientRect().width;this.isMobileDevice?(n.style.top="62px",n.style.padding="6px 15px",n.style.width=(C+32).toString()+"px"):(n.style.top="0",n.style.padding="6px 22px",n.style.width=(C+44).toString()+"px")}else(0==g||0==f)&&(n.style.position="",n.style.top="",n.style.right="",n.style.zIndex="",n.style.height="",n.style.padding="",n.style.background="",n.style.width="",n.style.justifyContent="")}}return(s=O).\u0275fac=function(){let h;return function(n){return(h||(h=p.xGo(s)))(n||s)}}(),s.\u0275cmp=p.VBU({type:s,selectors:[["flexed-on-the-top"]],hostBindings:function(t,n){1&t&&p.bIt("scroll",function(g){return n.onWindowScroll(g)},!1,p.tSv)},inputs:{colorBackground:"colorBackground",defaultHeight:"defaultHeight"},features:[p.Vt3],ngContentSelectors:e,decls:3,vars:0,consts:[["id","position-dev"],["id","flexed-on-top",1,"flex","flexed-on-top"]],template:function(t,n){1&t&&(p.NAR(),p.nrm(0,"div",0),p.j41(1,"div",1),p.SdG(2),p.k0s())},encapsulation:2}),O})()},7908:(w,b,r)=>{r.d(b,{n:()=>c});var m=r(26860),p=r(85710),e=r(29313);let c=(()=>{var s;class O{constructor(){this.subscriptions=new p.yU,this.aiElearningService=(0,m.WQX)(e.T5),this.cacheData=[]}getKnowledgeByApi(t,n,a,g,f,T){let C=this.getCacheKey(t,n,a,g),S=this.cacheData.find(j=>j.cacheKey==C);if(null!=S)return f(S.nodes);this.subscriptions.add(this.aiElearningService.aiApiV1ElearningGetKnowledgeTreeGet(t,n,a,g||void 0).subscribe({next:j=>{this.cacheData.push({cacheKey:C,nodes:j.nodes??[]}),f(j.nodes??[])},error:j=>T(j)}))}getObjByObjectiveId(t,n){for(var a of t){if(a.objectiveId==n)return a;let g=this.getObjByObjectiveId(a.children,n);if(null!=g)return g}}getObjByKnowledgeIdOrObjectiveId(t,n,a){for(var g of t){if(g.knowledgeId==n||g.objectiveId==a)return g;let f=this.getObjByKnowledgeIdOrObjectiveId(g.children,n,a);if(null!=f)return f}}getCacheKey(t,n,a,g){return`${t}_${n}_${a?"true":"false"}_${g??0}`}ngOnDestroy(){this.subscriptions.unsubscribe()}}return(s=O).\u0275fac=function(t){return new(t||s)},s.\u0275prov=m.jDH({token:s,factory:s.\u0275fac,providedIn:"root"}),O})()},98133:(w,b,r)=>{r.d(b,{i:()=>M});var m=r(89163),p=r(33887),e=r(26860),c=r(2915),s=r(32099),O=r(50334),h=r(7908),t=r(54460),n=r(15343),a=r(18718),g=r(76975);function f(o,_){if(1&o&&e.nrm(0,"azt-loading-effect",3),2&o){const l=e.XpG();e.Y8G("currentStatusObj",l.statusObj)}}function T(o,_){1&o&&e.eu8(0)}const C=function(o){return{nodeObjs:o}};function S(o,_){if(1&o&&(e.j41(0,"table")(1,"tbody"),e.DNE(2,T,1,0,"ng-container",4),e.k0s()()),2&o){const l=e.XpG(),i=e.sdS(4);e.R7$(2),e.Y8G("ngTemplateOutlet",i)("ngTemplateOutletContext",e.eq3(2,C,l.nodeObjs))}}function j(o,_){1&o&&e.nrm(0,"lucide-icon",13)}function E(o,_){1&o&&e.nrm(0,"lucide-icon",14)}function y(o,_){if(1&o&&(e.j41(0,"i"),e.DNE(1,j,1,0,"lucide-icon",11),e.DNE(2,E,1,0,"lucide-icon",12),e.k0s()),2&o){const l=e.XpG().$implicit;e.R7$(1),e.Y8G("ngIf",l.isExpand),e.R7$(1),e.Y8G("ngIf",!l.isExpand)}}function A(o,_){1&o&&(e.j41(0,"i"),e.nrm(1,"lucide-icon",15),e.k0s())}function z(o,_){1&o&&e.eu8(0)}function K(o,_){if(1&o&&(e.qex(0),e.DNE(1,z,1,0,"ng-container",4),e.bVm()),2&o){const l=e.XpG().$implicit;e.XpG(3);const i=e.sdS(4);e.R7$(1),e.Y8G("ngTemplateOutlet",i)("ngTemplateOutletContext",e.eq3(2,C,l.children))}}const D=function(o,_){return{"text-pending":o," link-color-hover":_}};function B(o,_){if(1&o){const l=e.RV6();e.qex(0),e.j41(1,"tr",7)(2,"td")(3,"div",8),e.bIt("click",function(){const v=e.eBV(l).$implicit,u=e.XpG(3);return e.Njj(u.clickToNode(v))}),e.DNE(4,y,3,2,"i",5),e.DNE(5,A,2,0,"i",5),e.j41(6,"label",9),e.nrm(7,"span",10),e.nI1(8,"safeContentQuestion"),e.nI1(9,"async"),e.nI1(10,"mathJaxContent"),e.k0s()()()(),e.DNE(11,K,2,4,"ng-container",5),e.bVm()}if(2&o){const l=_.$implicit;e.R7$(1),e.Y8G("hidden",!l.isShow),e.R7$(1),e.xc7("padding-left",14*(l.level+1),"px"),e.R7$(1),e.Y8G("ngClass",e.l_i(14,D,l.isSelected,!l.isSelected)),e.R7$(1),e.Y8G("ngIf",l.children.length),e.R7$(1),e.Y8G("ngIf",!l.children.length),e.R7$(2),e.Y8G("innerHTML",e.bMT(8,8,e.bMT(9,10,e.bMT(10,12,"L"+(l.level+1)+". "+l.text))),e.npT),e.R7$(4),e.Y8G("ngIf",l.isExpand)}}function k(o,_){if(1&o&&(e.qex(0),e.DNE(1,B,12,17,"ng-container",6),e.bVm()),2&o){const l=_.$implicit;e.R7$(1),e.Y8G("ngForOf",l)}}function R(o,_){if(1&o&&e.DNE(0,k,2,1,"ng-container",5),2&o){const l=_.nodeObjs,i=e.XpG();e.Y8G("ngIf",i.asTemplateDataObj(l))}}let G=(()=>{var o;class _ extends O.C{constructor(){super(...arguments),this.allowSelectKnowledgeOrObjective="only_objective",this.selectKnowledgeOrObjectiveEvent=new e.bkB,this.nodeObjs=[],this.sAztKnowledgeObjectiveService=(0,e.WQX)(h.n)}clickToNode(i){return"only_objective"==this.allowSelectKnowledgeOrObjective&&i.data.objectiveId||"knowledge_or_objective"==this.allowSelectKnowledgeOrObjective&&(i.data.knowledgeId||i.data.objectiveId)?this.selectKnowledgeOrObjectiveEvent.emit(i.data):void(i.isExpand?this.collapse(i):this.expand(i))}asTemplateDataObj(i){return i}initData(i,d,v){this.initStatusObj(),this.sAztKnowledgeObjectiveService.getKnowledgeByApi(i,d,!1,v,u=>{this.nodeObjs=this.standardTreeNodes(u,0),this.stopStatusObj()},u=>this.errorStatusObj(u,!0))}standardTreeNodes(i,d){let v=[];return i.forEach(u=>{let x=!1;this.selectedObj?.knowledgeId&&u.knowledgeId==this.selectedObj.knowledgeId&&(x=!0),this.selectedObj?.objectiveId&&u.objectiveId==this.selectedObj.objectiveId&&(x=!0);let I={level:d,typeNode:u.objectiveId?"objective":"knowledge",isExpand:!0,isShow:!0,isSelected:x,text:u.title,data:{...u,children:[]},children:[]};I.children=this.standardTreeNodes(u.children,d+1),v.push(I)}),v}ngOnChanges(i){i.searchContent&&this.searchByText(this.searchContent??"")}ngOnInit(){super.ngOnInit(),this.initData(this.levelId,this.subjectId,this.bookId)}}return(o=_).\u0275fac=function(){let l;return function(d){return(l||(l=e.xGo(o)))(d||o)}}(),o.\u0275cmp=e.VBU({type:o,selectors:[["coazt-knowledge-objective-tree"]],inputs:{levelId:"levelId",subjectId:"subjectId",bookId:"bookId",selectedObj:"selectedObj",searchContent:"searchContent",allowSelectKnowledgeOrObjective:"allowSelectKnowledgeOrObjective"},outputs:{selectKnowledgeOrObjectiveEvent:"selectKnowledgeOrObjectiveEvent"},features:[e.Vt3,e.OA$],decls:5,vars:2,consts:[[3,"currentStatusObj",4,"ngIf","ngIfElse"],["doneLoading",""],["recursiveListTmpl",""],[3,"currentStatusObj"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"hidden"],[1,"clickable",3,"ngClass","click"],[1,"form-check-label",2,"line-height","1.5"],[3,"innerHTML"],["name","chevron-down","size","14",4,"ngIf"],["name","chevron-right","size","14",4,"ngIf"],["name","chevron-down","size","14"],["name","chevron-right","size","14"],["name","send-horizontal","size","14"]],template:function(i,d){if(1&i&&(e.DNE(0,f,1,1,"azt-loading-effect",0),e.DNE(1,S,3,4,"ng-template",null,1,e.C5r),e.DNE(3,R,1,1,"ng-template",null,2,e.C5r)),2&i){const v=e.sdS(2);e.Y8G("ngIf",d.statusObj.loading)("ngIfElse",v)}},dependencies:[t.YU,t.Sq,t.bT,t.T3,n.WGl,a.K,t.Jj,g.km,g.ep],encapsulation:2}),_})(),M=(()=>{var o;class _ extends p._{searchByText(i){this.searchContent=i}selectKnowledgeOrObjective(i){this.dialogRef.close(i)}btnCloseDialog(){this.dialogRef.close(void 0)}constructor(i,d){super(d,i),this.dialogRef=i,this.data=d}}return(o=_).\u0275fac=function(i){return new(i||o)(e.rXU(m.CP,8),e.rXU(m.Vh,8))},o.\u0275cmp=e.VBU({type:o,selectors:[["coazt-knowledge-objective-dialog"]],features:[e.Vt3],decls:12,vars:14,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"box","p-3"],[1,"pb-3"],[3,"isServerSearch","placeholder","onSearch"],[3,"minHeight"],[3,"levelId","subjectId","bookId","selectedObj","searchContent","allowSelectKnowledgeOrObjective","selectKnowledgeOrObjectiveEvent"],[1,"text-right","border-t","border-slate-200","dark:border-darkmode-400","p-3"],[1,"btn","btn-secondary","w-24",3,"click"]],template:function(i,d){1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"azt-search-box",4),e.bIt("onSearch",function(u){return d.searchByText(u.searchObj)}),e.nI1(5,"mytranslate"),e.k0s()(),e.j41(6,"azt-mat-dialog-content",5)(7,"coazt-knowledge-objective-tree",6),e.bIt("selectKnowledgeOrObjectiveEvent",function(u){return d.selectKnowledgeOrObjective(u)}),e.k0s()()(),e.j41(8,"div",7)(9,"button",8),e.bIt("click",function(){return d.btnCloseDialog()}),e.EFF(10),e.nI1(11,"mytranslate"),e.k0s()()()()),2&i&&(e.R7$(4),e.Y8G("isServerSearch",!1)("placeholder",e.bMT(5,10,"lang_common_search_by_name")),e.R7$(2),e.Y8G("minHeight","calc(var(--vh, 1vh) * 100 - 300px)"),e.R7$(1),e.Y8G("levelId",d.data.levelId)("subjectId",d.data.subjectId)("bookId",d.data.bookId)("selectedObj",d.data.selectedObj)("searchContent",null==d.searchContent?null:d.searchContent.searchContent)("allowSelectKnowledgeOrObjective",d.data.allowSelectKnowledgeOrObjective),e.R7$(3),e.SpI(" ",e.bMT(11,12,"lang_button_close")," "))},dependencies:[c.U,s.W,G,g.wp],encapsulation:2}),_})()}}]);