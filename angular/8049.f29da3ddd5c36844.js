"use strict";(self.webpackChunkBalacoClient=self.webpackChunkBalacoClient||[]).push([[8049],{63038:(T,f,r)=>{r.d(f,{m:()=>h});var p=r(65879);let h=(()=>{class m{constructor(a){this.el=a}onInput(){this.adjustTextAreaHeight(this.el.nativeElement)}onFocus(){this.adjustTextAreaHeight(this.el.nativeElement)}ngAfterViewInit(){this.adjustTextAreaHeight(this.el.nativeElement)}adjustTextAreaHeight(a){a.parentElement&&(a.parentElement.style.minHeight=a.parentElement.clientHeight+"px"),a.style.overflow="hidden",a.style.height="auto";let s=a.scrollHeight+30;s=s<57?57:s,a.style.height=s+"px",a.parentElement&&(a.parentElement.style.minHeight="auto")}}return m.\u0275fac=function(a){return new(a||m)(p.Y36(p.SBq))},m.\u0275dir=p.lG2({type:m,selectors:[["textarea","autoResize",""]],hostBindings:function(a,s){1&a&&p.NdJ("input",function(x){return s.onInput(x.target.value)})("focus",function(){return s.onFocus()})}}),m})()},43277:(T,f,r)=>{r.d(f,{C:()=>q});var p=r(19347),h=r(66469),m=r(72164),t=r(65879),a=r(9e4),s=r(96814),_=r(49538),x=r(78497),b=r(71646),k=r(36727);function y(n,l){1&n&&(t.TgZ(0,"div",9)(1,"b"),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&n&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"lang_azt_muc_do_thuon_thuc_ky_nang")))}function A(n,l){1&n&&(t.TgZ(0,"div",10)(1,"h4",11),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"lang_azt_muc_do_thuon_thuc_ky_nang")," "))}function O(n,l){1&n&&(t.TgZ(0,"div",12)(1,"span",13),t._UZ(2,"azt-loading-ui"),t.qZA()())}function I(n,l){if(1&n&&(t.TgZ(0,"div",16)(1,"div",17)(2,"div",18),t._UZ(3,"div",19),t.qZA()()()),2&n){const e=t.oxw(4);t.xp6(3),t.Q6J("chart",e.chartSkill)}}function Z(n,l){1&n&&(t.TgZ(0,"div",20),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"long_core_khong_tim_thay_Muc_do_thuan_thuc_ky_nang")," "))}function z(n,l){if(1&n&&(t.YNc(0,I,4,1,"div",14),t.YNc(1,Z,3,3,"div",15)),2&n){const e=t.oxw(3);t.Q6J("ngIf",e.chartSkill),t.xp6(1),t.Q6J("ngIf",!e.chartSkill)}}function D(n,l){if(1&n){const e=t.EpF();t.TgZ(0,"div",21)(1,"button",22),t.NdJ("click",function(){t.CHM(e);const c=t.oxw(3);return t.KtG(c.dialogRef.close())}),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()}2&n&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"lang_auto_dong")," "))}function E(n,l){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,y,4,3,"div",4),t.YNc(2,A,4,3,"div",5),t.YNc(3,O,3,0,"div",6),t.TgZ(4,"azt-mat-dialog-content"),t.YNc(5,z,2,2,"ng-template",null,7,t.W1O),t.qZA(),t.YNc(7,D,4,3,"div",8),t.qZA()),2&n){const e=t.MAs(6),o=t.oxw(2);t.xp6(1),t.Q6J("ngIf",1==o.type),t.xp6(1),t.Q6J("ngIf",!o.type),t.xp6(1),t.Q6J("ngIf",o.statusObj.loading)("ngIfElse",e),t.xp6(4),t.Q6J("ngIf",1==o.type)}}function P(n,l){1&n&&(t.TgZ(0,"th",33),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&n&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_auto_don_vi_kien_thuc")," "))}function j(n,l){if(1&n&&(t.TgZ(0,"td",34)(1,"span"),t._uU(2),t.qZA()()),2&n){const e=l.$implicit;t.xp6(2),t.Oqu(e.title)}}function L(n,l){1&n&&(t.TgZ(0,"th",33),t._UZ(1,"span",35),t.qZA())}const N=function(n){return{"block w-28":n}};function M(n,l){if(1&n){const e=t.EpF();t.TgZ(0,"span",37),t.NdJ("click",function(){t.CHM(e);const c=t.oxw().$implicit,g=t.oxw(3);return t.KtG(g.goToPractice(c.examHashId))}),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()}if(2&n){const e=t.oxw(4);t.Q6J("ngClass",t.VKq(4,N,!e.isMobileDevice)),t.xp6(1),t.Oqu(t.lcZ(2,2,"lang_testbank_practice"))}}function R(n,l){if(1&n&&(t.TgZ(0,"td",34),t.YNc(1,M,3,6,"span",36),t.qZA()),2&n){const e=l.$implicit;t.xp6(1),t.Q6J("ngIf",e.examHashId)}}function U(n,l){1&n&&(t.TgZ(0,"th",38)(1,"span",35),t._uU(2),t.ALo(3,"mytranslate"),t.qZA()()),2&n&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"lang_auto_ty_le")))}const H=function(n){return{"width.%":n}};function J(n,l){if(1&n&&(t.TgZ(0,"td",34)(1,"div",39)(2,"div",40),t.ALo(3,"number"),t.TgZ(4,"span",41),t._uU(5),t.ALo(6,"number"),t.qZA()()()()),2&n){const e=l.$implicit;t.xp6(2),t.Q6J("ngStyle",t.VKq(8,H,t.xi3(3,2,100*e.point,"1.0-1"))),t.xp6(3),t.Oqu(e.point?t.xi3(6,5,100*e.point,"1.0-1")+"%":"")}}function Q(n,l){1&n&&t._UZ(0,"tr",42)}function Y(n,l){1&n&&t._UZ(0,"tr",43)}function w(n,l){if(1&n){const e=t.EpF();t.TgZ(0,"div",23)(1,"div",9)(2,"b"),t._uU(3),t.ALo(4,"mytranslate"),t.qZA()(),t.TgZ(5,"azt-mat-dialog-content")(6,"table",24),t.ynx(7,25),t.YNc(8,P,3,3,"th",26),t.YNc(9,j,3,1,"td",27),t.BQk(),t.ynx(10,28),t.YNc(11,L,2,0,"th",26),t.YNc(12,R,2,1,"td",27),t.BQk(),t.ynx(13,29),t.YNc(14,U,4,3,"th",30),t.YNc(15,J,7,10,"td",27),t.BQk(),t.YNc(16,Q,1,0,"tr",31),t.YNc(17,Y,1,0,"tr",32),t.qZA()(),t.TgZ(18,"div",21)(19,"button",22),t.NdJ("click",function(){t.CHM(e);const c=t.oxw(2);return t.KtG(c.closeDetailSkill())}),t._uU(20),t.ALo(21,"mytranslate"),t.qZA()()()}if(2&n){const e=t.oxw(2);t.xp6(3),t.Oqu(t.lcZ(4,6,"lang_testbank_frontend_student_skill_statistic_title")),t.xp6(3),t.Q6J("dataSource",e.skillItem),t.xp6(10),t.Q6J("matHeaderRowDef",e.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns),t.xp6(3),t.hij(" ",t.lcZ(21,8,"lang_auto_dong")," ")}}function B(n,l){if(1&n&&(t.TgZ(0,"div",1),t.YNc(1,E,8,5,"div",2),t.YNc(2,w,22,10,"div",3),t.qZA()),2&n){const e=t.oxw();t.Q6J("ngClass",1==e.type?"box p-3":""),t.xp6(1),t.Q6J("ngIf",!e.skillItem.length),t.xp6(1),t.Q6J("ngIf",e.skillItem.length)}}let q=(()=>{class n extends m.e{getSkillProfile(){this.studentPracticeService.aiApiV1StudentPracticeSkillProficiencyPost({schoolLevelId:this.levelId,schoolSubjectId:this.subjectId,userId:this.userId}).subscribe({next:o=>{this.createChartSkill(o.skillChapterViewItems),this.stopStatusObj()},error:o=>{this.errorStatusObj(o.message,!0)}})}convertTitle(e,o){return this.commonService.myTranslateInstant(e)+" ("+(o.reduce((g,v)=>(g??0)+(v??0),0)?.toString()??"")+")"}createChartSkill(e){if(!e||!e.length)return;let o=e.map(i=>i.title??""),c=e.map(i=>0==i.countExcellent?null:i.countExcellent),g=e.map(i=>0==i.countGood?null:i.countGood),v=e.map(i=>0==i.countNotGood?null:i.countNotGood),S=e.map(i=>0==i.countTerrible?null:i.countTerrible),C=e.map(i=>0==i.countNonePractice?null:i.countNonePractice),F=this.convertTitle("lang_azt_xuat_sac",c),K=this.convertTitle("lang_azt_kha",g),G=this.convertTitle("lang_azt_trung_binh",v),W=this.convertTitle("lang_azt_yeu",S),$=this.convertTitle("lang_auto_chua_thi",C),X=new h.kL({chart:{type:"column",style:{fontFamily:"Arial"}},title:{text:"",align:"center"},xAxis:{categories:o},yAxis:{min:0,title:{text:this.commonService.myTranslateInstant("lang_azt_so_kien_thuc")},stackLabels:{enabled:!0}},credits:{enabled:!1},plotOptions:{column:{stacking:"normal",dataLabels:{enabled:!0}}},series:[{name:F,type:"column",data:c,color:"green",tooltip:{headerFormat:"<b>{point.x}</b><br/><b>{series.name}: {point.y}</b><br/>",pointFormatter:function(){return e[this.index].excellentSkills.map((d,u)=>u+1+": "+d.title).join("<br/>")}},events:{click:i=>{this.openDetailSkill(e[i.point.index].excellentSkills)}}},{name:K,type:"column",data:g,color:"yellow",tooltip:{headerFormat:"<b>{point.x}</b><br/><b>{series.name}: {point.y}</b><br/>",pointFormatter:function(){return e[this.index].goodSkills.map((d,u)=>u+1+": "+d.title).join("<br/>")}},events:{click:i=>{this.openDetailSkill(e[i.point.index].goodSkills)}}},{name:G,type:"column",data:v,color:"orange",tooltip:{headerFormat:"<b>{point.x}</b><br/><b>{series.name}: {point.y}</b><br/>",pointFormatter:function(){return e[this.index].notGoodSkills.map((d,u)=>u+1+": "+d.title).join("<br/>")}},events:{click:i=>{this.openDetailSkill(e[i.point.index].notGoodSkills)}}},{name:W,type:"column",data:S,color:"red",tooltip:{headerFormat:"<b>{point.x}</b><br/><b>{series.name}: {point.y}</b><br/>",pointFormatter:function(){return e[this.index].terribleSkills.map((d,u)=>u+1+": "+d.title).join("<br/>")}},events:{click:i=>{this.openDetailSkill(e[i.point.index].terribleSkills)}}},{name:$,type:"column",data:C,color:"grey",tooltip:{headerFormat:"<b>{point.x}</b><br/><b>{series.name}: {point.y}</b><br/>",pointFormatter:function(){return e[this.index].nonePracticeSkills.map((d,u)=>u+1+": "+d.title).join("<br/>")}},events:{click:i=>{this.openDetailSkill(e[i.point.index].nonePracticeSkills)}}}]});this.chartSkill=X,this.stopStatusObj()}goToPractice(e){if(!e)return;let o=this.commonService.getMyQueryParam("backto"),c=this.commonService.getCurrentUrlWithoutLocale();this.commonService.myNavigationWithQueryString("/de-thi/"+e,"?backto="+encodeURIComponent(c+"?backto="+o)),this.dialogRef.close()}openDetailSkill(e){1==this.type&&(this.skillItem=e)}closeDetailSkill(){this.skillItem=[]}ngOnInit(){super.ngOnInit(),this.validLevelAndSubject=10==this.levelId||11==this.levelId||32==this.subjectId&&12==this.levelId,this.validLevelAndSubject&&(this.initStatusObj(),this.getSkillProfile())}constructor(e,o,c){super(c,o),this.studentPracticeService=e,this.dialogRef=o,this.validLevelAndSubject=!1,this.skillItem=[],this.displayedColumns=["name","actionCol","percent"],c&&(this.subjectId=c.subjectId,this.levelId=c.levelId,this.userId=c.userId,this.type=1)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(a.p4),t.Y36(p.so,8),t.Y36(p.WI,8))},n.\u0275cmp=t.Xpm({type:n,selectors:[["coazt-student-skill-chapter"]],inputs:{type:"type",userId:"userId",levelId:"levelId",subjectId:"subjectId"},features:[t.qOj],decls:1,vars:1,consts:[[3,"ngClass",4,"ngIf"],[3,"ngClass"],[4,"ngIf"],["class","skill-statistical",4,"ngIf"],["class","mb-3",4,"ngIf"],["class","w-auto text-left bg-gray-200","style","padding: 10px 24px; margin-left: -24px; margin-right: -24px",4,"ngIf"],["class","flex justify-center items-center m-5",4,"ngIf","ngIfElse"],["doneLoading",""],["class","flex items-center justify-end pt-2 w-full bg-white",4,"ngIf"],[1,"mb-3"],[1,"w-auto","text-left","bg-gray-200",2,"padding","10px 24px","margin-left","-24px","margin-right","-24px"],[1,"font-medium"],[1,"flex","justify-center","items-center","m-5"],[1,"w-6","h-6","m-5"],["class","report-box intro-x mt-3",4,"ngIf"],["class","flex p-4 justify-center items-center",4,"ngIf"],[1,"report-box","intro-x","mt-3"],[1,"h-[400px]"],[1,"chart-center"],[3,"chart"],[1,"flex","p-4","justify-center","items-center"],[1,"flex","items-center","justify-end","pt-2","w-full","bg-white"],[1,"btn","btn-secondary","w-32",3,"click"],[1,"skill-statistical"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","actionCol"],["matColumnDef","percent"],["mat-header-cell","","class","text-center",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[1,"center-span"],["class","text-white btn btn-pending","style","font-weight: 430;",3,"ngClass","click",4,"ngIf"],[1,"text-white","btn","btn-pending",2,"font-weight","430",3,"ngClass","click"],["mat-header-cell","",1,"text-center"],[1,"progress"],[1,"progress-done",3,"ngStyle"],[1,"text-md","font-medium","span-baseline-middle"],["mat-header-row",""],["mat-row",""]],template:function(e,o){1&e&&t.YNc(0,B,3,3,"div",0),2&e&&t.Q6J("ngIf",o.validLevelAndSubject)},dependencies:[s.mk,s.O5,s.PC,_.BZ,_.fO,_.as,_.w1,_.Dz,_.nj,_.ge,_.ev,_.XQ,_.Gk,h.Dm,x.R,b.n,s.JJ,k.JV],encapsulation:2}),n})()}}]);