"use strict";(self.webpackChunkBalacoClient=self.webpackChunkBalacoClient||[]).push([[3971],{43166:(x,T,c)=>{c.d(T,{x:()=>h});var d=c(10936),r=c(26860),b=c(62095);let h=(()=>{var f;class m{filter(_,p){return null==_?[]:_=_.filter(v=>this.removeAllSpecialChars((null!=p?v[p]:v).toString()).includes(this.removeAllSpecialChars(this.searchControl.value)))}mergeSchoolLevel(_){let p=[];return _.forEach(v=>null!=v.schoolLevel&&p.push(v.schoolLevel)),p}removeAllSpecialChars(_){return _=(_=this.commonService.myTranslateInstant(_)??_).toLowerCase().trim(),_=this.commonService.convertVietnameseToEnglish(_),_=this.commonService.removeSpecialStringInSearch(_),(_=this.commonService.removeNonAlphabetic(_)).toLowerCase().trim()}constructor(_){this.commonService=_,this.searchControl=new d.MJ("",{nonNullable:!0})}}return(f=m).\u0275fac=function(_){return new(_||f)(r.rXU(b.R))},f.\u0275dir=r.FsC({type:f,selectors:[["","searchInList",""]],exportAs:["searchInList"]}),m})()},99965:(x,T,c)=>{c.d(T,{j:()=>r});var d=c(26860);let r=(()=>{var b;class h{constructor(m){this.el=m}onInput(){this.adjustTextAreaHeight(this.el.nativeElement)}onFocus(){this.adjustTextAreaHeight(this.el.nativeElement)}ngAfterViewInit(){this.adjustTextAreaHeight(this.el.nativeElement)}adjustTextAreaHeight(m){m.parentElement&&(m.parentElement.style.minHeight=m.parentElement.clientHeight+"px"),m.style.overflow="hidden",m.style.height="auto";let g=m.scrollHeight+30;g=g<57?57:g,m.style.height=g+"px",m.parentElement&&(m.parentElement.style.minHeight="auto")}}return(b=h).\u0275fac=function(m){return new(m||b)(d.rXU(d.aKT))},b.\u0275dir=d.FsC({type:b,selectors:[["textarea","autoResize",""]],hostBindings:function(m,g){1&m&&d.bIt("input",function(p){return g.onInput(p.target.value)})("focus",function(){return g.onFocus()})}}),h})()},42789:(x,T,c)=>{c.d(T,{N:()=>b});var d=c(26860);let r=(()=>{var h;class f{constructor(){this.observer=new IntersectionObserver(g=>{g.forEach(_=>{const p=_.target;_.isIntersecting?(this.reUpdateHeightAttribute(p),p.setAttribute("start_loading","true")):p.setAttribute("start_loading","false")})})}reUpdateHeightAttribute(g){const _=g.getBoundingClientRect();_.height>0&&g.setAttribute("data-current-height",_.height+"px")}observe(g){this.observer.observe(g)}}return(h=f).\u0275fac=function(g){return new(g||h)},h.\u0275prov=d.jDH({token:h,factory:h.\u0275fac,providedIn:"root"}),f})(),b=(()=>{var h;class f{constructor(g,_){this.injector=g,this.el=_;const p=this.el.nativeElement;this.injector.get(r).observe(p)}}return(h=f).\u0275fac=function(g){return new(g||h)(d.rXU(d.zZn),d.rXU(d.aKT))},h.\u0275dir=d.FsC({type:h,selectors:[["","load_effect_lazy",""]]}),f})()},64486:(x,T,c)=>{c.d(T,{I:()=>f});var d=c(26860),r=c(59640),b=c(50622),h=c(32639);let f=(()=>{var m;class g extends r.H{constructor(){super(...arguments),this.questionRenderService=(0,d.WQX)(h.g),this.sAztAnswerTrueFalseService=(0,d.WQX)(b.j),this.isDestroyed=!1,this.isInitData=!1}startRenderQuestion(p){if(this.renderConfigObj.disableRender)return this.emitHaveRended(void 0);p&&!this.renderConfigObj.isFirstRender||(p&&this.renderConfigObj.isFirstRender&&(this.renderConfigObj.isFirstRender=!1,this.followerRender.doneItemPartQuest()),this.questionRenderService.parseRenderQuestion(this.baseQuestionObj,this.renderConfigObj.configRenderService).then(()=>{this.baseQuestionObj.answersOrigin=this.sAztAnswerTrueFalseService.checkLabelArrOriginOrMix(this.baseQuestionObj.answers,!0),this.emitHaveRended(void 0)}).catch(v=>{this.emitHaveRended(v.message)}))}emitHaveRended(p){if(!this.isDestroyed&&p)return this.showErrorSnack(p)}initData(p,v,j){this.renderConfigObj=p,this.followerRender=v,this.baseQuestionObj=j,this.isInitData=!0}reRenderContent(){this.isInitData&&this.startRenderQuestion(!1)}ngDoCheck(){if(!this.isInitData||this.renderConfigObj.isRenderElement)return;let p=document.getElementById("question_render_element_"+this.baseQuestionObj.id);if(!p)return;let v=p.getAttribute("start_loading");(this.renderConfigObj.disableLazy||v&&"true"==v)&&(this.renderConfigObj.isRenderElement||(this.startRenderQuestion(!0),this.renderConfigObj.isRenderElement=!0))}ngOnDestroy(){this.isDestroyed=!0,super.ngOnDestroy()}}return(m=g).\u0275fac=function(){let _;return function(v){return(_||(_=d.xGo(m)))(v||m)}}(),m.\u0275cmp=d.VBU({type:m,selectors:[["ng-component"]],features:[d.Vt3],decls:0,vars:0,template:function(p,v){},encapsulation:2}),g})()},66793:(x,T,c)=>{c.d(T,{C:()=>r});var d=c(65106);class r{constructor(h,f,m){this.mathJaxImage=!1,this.disableLazy=!1,this.disableRender=!1,this.isFirstRender=!0,this.isRenderElement=!1,this.configRenderService=new d.y,this.disableLazy=h,this.disableRender=f,this.mathJaxImage=m,this.mathJaxImage&&this.configRenderService.setMaxJaxRenderMode("svg")}}},15423:(x,T,c)=>{c.d(T,{N:()=>_});var d=c(59640),r=c(26860),b=c(54460),h=c(9570),f=c(76975);function m(p,v){1&p&&(r.j41(0,"div",6),r.EFF(1),r.nI1(2,"mytranslate"),r.k0s()),2&p&&(r.R7$(1),r.SpI(" ",r.bMT(2,1,"lang_core_huong_dan_chon_vao_bang_va_vuot_sang_trai_de_xem_cac_thong_tin_khac"),"\n"))}const g=function(p){return{display:p}};let _=(()=>{var p;class v extends d.H{constructor(){super(...arguments),this.isShowExplain=!1}}return(p=v).\u0275fac=function(){let j;return function(O){return(j||(j=r.xGo(p)))(O||p)}}(),p.\u0275cmp=r.VBU({type:p,selectors:[["azt-question-explain-box"]],inputs:{isShowExplain:"isShowExplain",questionObj:"questionObj",renderConfigObj:"renderConfigObj"},features:[r.Vt3],decls:6,vars:5,consts:[["class","mt-1 box p-2",4,"ngIf"],[1,"help-content","box","pt-1","pb-3","px-4","py-1","mt-1",2,"display","inherit","border-top-right-radius","0","border-top-left-radius","0","margin-top","-5px","box-shadow","none","overflow","auto","padding-bottom","20px",3,"ngStyle"],["elementGroup",""],[2,"width","fit-content"],["elementHook",""],[3,"content"],[1,"mt-1","box","p-2"]],template:function(k,O){if(1&k&&(r.DNE(0,m,3,3,"div",0),r.j41(1,"div",1,2)(3,"div",3,4),r.nrm(5,"azt-dynamic-hook",5),r.k0s()()),2&k){const I=r.sdS(2),M=r.sdS(4);let E;r.Y8G("ngIf",I.offsetWidth<M.offsetWidth&&O.isMobileDevice),r.R7$(1),r.Y8G("ngStyle",r.eq3(3,g,O.isShowExplain&&O.questionObj.help?"inherit":"none")),r.R7$(4),r.Y8G("content",null!==(E=O.questionObj.help)&&void 0!==E?E:"")}},dependencies:[b.bT,b.B3,h.x,f.wp],styles:['.pr-7[_ngcontent-%COMP%]{padding-right:28px}.w-38px[_ngcontent-%COMP%]{width:38px}.remove-grid[_ngcontent-%COMP%]{display:block!important}.question-standalone-loader-box[_ngcontent-%COMP%]{min-height:50px}  .skeleton-box-loading{width:100%;height:30px;max-width:100%;margin-bottom:5px;display:inline-block}  .skeleton-box-loading:after{position:absolute;top:0;right:0;bottom:0;left:0;transform:translate(-100%);animation:_ngcontent-%COMP%_shimmer 2s infinite;content:""}.question-standalone-box[_ngcontent-%COMP%]{margin-bottom:30px;display:block;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);border-radius:.375rem}.question-standalone-container[_ngcontent-%COMP%]{padding:15px}.question-standalone-for-test-finder[_ngcontent-%COMP%]{border:none;margin-bottom:0;padding:0}.question-standalone-for-test-finder[_ngcontent-%COMP%]   .question-standalone-main-content[_ngcontent-%COMP%]{padding:15px;border:1px solid rgb(228,228,228)}.group-of-question-standalone-for-test-finder[_ngcontent-%COMP%]{padding:15px!important;border:1px solid rgb(228,228,228)!important}.question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid #2262ae!important;outline:3px solid rgba(125,160,201,.65)!important}.group-of-question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid green!important;outline:3px solid rgba(0,193,0,.321)!important}.question-standalone-label[_ngcontent-%COMP%]{font-weight:700}.question-standalone-content-box[_ngcontent-%COMP%]{position:relative}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]{color:#f44336;position:relative;padding-left:20px;display:flex;align-items:center}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]:before{content:"!";position:absolute;left:0;color:#fff;background:#f44336;width:15px;height:15px;text-align:center;border-radius:50%;font-size:smaller;display:flex;justify-content:center;align-items:center}.question-standalone-step-container-box[_ngcontent-%COMP%]{margin-bottom:50px}.group-content-of-question-standalone[_ngcontent-%COMP%]{margin-bottom:10px;font-weight:700}.answer[_ngcontent-%COMP%]{display:flex;align-items:center}.answer-label[_ngcontent-%COMP%]{width:20px;height:30px;min-width:20px;min-height:30px;display:flex;align-items:center;justify-content:flex-start;border-radius:50%;border-width:2px;border-style:solid;border-color:transparent}.answer-box[_ngcontent-%COMP%]{border-radius:0 0 3px 3px;padding:8px 20px;justify-content:space-between;align-items:center}.selected-answer[_ngcontent-%COMP%]{background-color:#f39c12;color:#fff}.answer-content-front[_ngcontent-%COMP%]{display:flex!important;flex-wrap:wrap;width:calc(100% - 30px)}.explainTxt[_ngcontent-%COMP%]{width:125px;font-weight:500;display:flex;align-items:center}#examHeader[_ngcontent-%COMP%]{display:block;border:1px solid #e7e7e7;border-radius:3px;overflow:hidden}.arrow_btn[_ngcontent-%COMP%]{font-size:20px;vertical-align:middle;width:20px;height:20px;color:#fff;margin-left:auto!important;margin-right:auto!important;-webkit-user-select:none;user-select:none}.bottom_action[_ngcontent-%COMP%]{position:fixed;padding:15px;bottom:0;left:0;background:#312e2e;color:#fff;width:100%}.bottom_action[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]{display:block}.btn-ans-result[_ngcontent-%COMP%]{color:#fff;background-color:#f39c12}.show-list[_ngcontent-%COMP%]{max-width:200px}.show-list[_ngcontent-%COMP%]   .show-sheet[_ngcontent-%COMP%]   .listli[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:27px;height:27px;border-radius:50%;border:1px solid #347da5;display:flex;align-items:center;color:#fff;justify-content:center;font-size:12px;cursor:pointer;-webkit-user-select:none;user-select:none}.top_action[_ngcontent-%COMP%]{position:fixed;padding:10px;top:0;left:0;background:#312e2e;color:#fff;width:100%}.scrollSheetMobile[_ngcontent-%COMP%]{max-height:200px;overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.scrollSheetMobile[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.notify-badge[_ngcontent-%COMP%]{position:absolute;right:3px;top:3px;text-align:center;color:#afafaf;padding:0;font-size:20px;cursor:pointer}.attach-container[_ngcontent-%COMP%]{background:#fff;padding:10px 0 0;border-radius:5px;width:83.33%;border:1px solid #e8e8e8}.answer-review[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:50%;border:1px solid rgb(52,125,165);display:flex;align-items:center;color:#fff;justify-content:center;font-size:15px;-webkit-user-select:none;user-select:none}.border-none[_ngcontent-%COMP%]{border:none!important}.bg-question[_ngcontent-%COMP%]{margin-top:15px;padding:15px 10px;background:#fff}.question-pending-part[_ngcontent-%COMP%]{width:100%;height:50px}.pencil-edit[_ngcontent-%COMP%]{position:absolute;top:-5px;right:-5px;width:30px;height:30px;border-radius:50%;text-align:center;background:#a9a9a9;z-index:9999}.pencil-edit[_ngcontent-%COMP%]   .lucide[_ngcontent-%COMP%]{color:#fff;stroke-width:2.5px;height:29px}.margin-question-bar[_ngcontent-%COMP%]{margin-top:calc(3rem + 40px)!important}.sheet-screen[_ngcontent-%COMP%]{max-height:calc(100vh - 140px);overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.sheet-screen[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}  .layout{display:grid;margin:20px 0;grid-row-gap:20px}  .layout-4{grid-template-columns:1fr 1fr 1fr 1fr}  .layout-2{grid-template-columns:1fr 1fr}  .layout-1{grid-template-columns:1fr}  .question-standalone-content-box{max-width:100%;overflow-x:auto;overflow-y:hidden}  #boxContentQuestion .question-standalone-container{max-width:800px}@keyframes _ngcontent-%COMP%_shimmer{to{transform:translate(100%)}}@media (max-width: 768px){.answer-content-front[_ngcontent-%COMP%]{justify-content:center}.btn-ans-result[_ngcontent-%COMP%]{margin-right:auto!important}}@media (max-width: 800px){  #boxContentQuestion .question-standalone-container{max-width:calc(90vw - 16px)!important}}']}),v})()},30657:(x,T,c)=>{c.d(T,{e:()=>d});class d{constructor(){this.totalQuestionRender=0,this.numFollow={renderDone:{num:0,isRun:!1},firstDone:{num:0,isRun:!1},startDone:{num:0,isRun:!1}}}checker(){this.totalQuestionRender===this.numFollow.renderDone.num&&!this.numFollow.renderDone.isRun&&(this.numFollow.renderDone.isRun=!0),this.totalQuestionRender===this.numFollow.firstDone.num&&!this.numFollow.firstDone.isRun&&(this.numFollow.firstDone.isRun=!0)}setNumQuest(b){this.totalQuestionRender=b}doneItemPartQuest(){this.numFollow.firstDone.num++,this.checker()}}},11002:(x,T,c)=>{c.d(T,{$:()=>h});var d=c(59640),r=c(26860);const b=["*"];let h=(()=>{var f;class m extends d.H{constructor(){super(...arguments),this.colorBackground="",this.defaultHeight="45px",this.fixToTopWidth=0,this.fixToTopTop=0}onWindowScroll(){let _=document.querySelector(".azt-content"),p=document.getElementById("flexed-on-top"),v=document.getElementById("position-dev")?.getBoundingClientRect();if(!_||!p||!v)return;let j=window.pageYOffset,k=v.top,O=k<-50;if(this.fixToTopWidth=v.width,this.fixToTopTop=v.top,O){p.style.position="fixed",p.style.zIndex="9999",p.style.height=this.defaultHeight,p.style.right=this.isMobileWebView?"0":"12px",p.style.background=this.colorBackground,p.style.justifyContent="end";let I=_.getBoundingClientRect().width;this.isMobileDevice?(p.style.top="62px",p.style.padding="6px 15px",p.style.width=(I+32).toString()+"px"):(p.style.top="0",p.style.padding="6px 22px",p.style.width=(I+44).toString()+"px")}else(0==j||0==k)&&(p.style.position="",p.style.top="",p.style.right="",p.style.zIndex="",p.style.height="",p.style.padding="",p.style.background="",p.style.width="",p.style.justifyContent="")}}return(f=m).\u0275fac=function(){let g;return function(p){return(g||(g=r.xGo(f)))(p||f)}}(),f.\u0275cmp=r.VBU({type:f,selectors:[["flexed-on-the-top"]],hostBindings:function(_,p){1&_&&r.bIt("scroll",function(j){return p.onWindowScroll(j)},!1,r.tSv)},inputs:{colorBackground:"colorBackground",defaultHeight:"defaultHeight"},features:[r.Vt3],ngContentSelectors:b,decls:3,vars:0,consts:[["id","position-dev"],["id","flexed-on-top",1,"flex","flexed-on-top"]],template:function(_,p){1&_&&(r.NAR(),r.nrm(0,"div",0),r.j41(1,"div",1),r.SdG(2),r.k0s())},encapsulation:2}),m})()},3971:(x,T,c)=>{c.r(T),c.d(T,{AzotaToolsModule:()=>un});var d=c(54460),r=c(10936),b=c(65162),h=c(69223),f=c(62067),m=c(15343),g=c(10123),_=c(44233),p=c(5502),v=c(21656),j=c(70050),k=c(7050),O=c(91100),I=c(43234),M=c(1133),E=c(27208);class S{constructor(){this.similarQuestionId=void 0,this.searchKeyword=""}isFilter(){return null!=this.similarQuestionId||""!=this.searchKeyword}}var e=c(26860),ie=c(65106),V=c(46899),se=c(25539),w=c(59640),P=c(30657),ae=c(32639),L=c(7908),Y=c(98133),A=c(17776),re=c(9280);let le=(()=>{var t;class a extends w.H{constructor(){super(...arguments),this.questionRenderService=(0,e.WQX)(ae.g),this.configRenderService=new ie.y(!0),this.sAztDialogService=(0,e.WQX)(V.i),this.sAztKnowledgeObjectiveService=(0,e.WQX)(L.n),this.aiQuestionBankService=(0,e.WQX)(A.gK),this.questionService=(0,e.WQX)(re.wP),this.activeRoute=(0,e.WQX)(b.nX),this.followerRenderQuest=new P.e,this.backTo="",this.schoolLevelId=0,this.schoolSubjectId=0,this.bookId=0,this.objectiveId=0,this.objs=[],this.totalSelectedCheckBox=0,this.totalQuestionsAreShow=0,this.filterObj=new S}checkAll(){this.objs.forEach(n=>n.selectedCheckBoxFormControl.setValue(!0)),this.selectedCheckBoxChange()}unCheckAll(){this.objs.forEach(n=>n.selectedCheckBoxFormControl.setValue(!1)),this.selectedCheckBoxChange()}selectedCheckBoxChange(){this.totalSelectedCheckBox=this.objs.filter(n=>n.isShow&&n.selectedCheckBoxFormControl.value).length,this.totalQuestionsAreShow=this.objs.filter(n=>n.isShow).length}rejectQuestions(n){let o={items:n.map(s=>({questionId:s.id,objectiveId:-1}))};n.forEach(s=>s.isRejecting=!0),this.waitDestroy(this.aiQuestionBankService.aiApiV1QuestionBankUpdateObjectiveOfQuestionsByManualPost(o).subscribe({next:s=>{n.forEach(l=>(l.isShow=!1,l.isRejecting=!1)),this.selectedCheckBoxChange(),this.totalQuestionsAreShow<=0&&!this.filterObj.isFilter()&&this.loadMoreQuestions(),this.successStatusObj("lang_cms_update_success",!0)},error:s=>{this.errorStatusObj(s.error.message,!0),n.forEach(l=>l.isRejecting=!1)}}))}approvedThisQuestions(n,o){let s={items:n.map(l=>({questionId:l.id,objectiveId:o}))};n.forEach(l=>l.isApproving=!0),this.waitDestroy(this.aiQuestionBankService.aiApiV1QuestionBankUpdateObjectiveOfQuestionsByManualPost(s).subscribe({next:l=>{n.forEach(C=>(C.isShow=!1,C.isApproving=!1)),this.selectedCheckBoxChange(),this.totalQuestionsAreShow<=0&&!this.filterObj.isFilter()&&this.loadMoreQuestions(),this.successStatusObj("lang_cms_update_success",!0)},error:l=>{this.errorStatusObj(l.error.message,!0),n.forEach(C=>C.isApproving=!1)}}))}approvedAllSelectedQuestions(n){this.approvedThisQuestions(this.objs.filter(o=>o.isShow&&o.selectedCheckBoxFormControl.value),n)}openEditObjectiveDialog(n){this.sAztDialogService.open(Y.i,{data:{levelId:this.schoolLevelId,subjectId:this.schoolSubjectId,bookId:this.bookId,selectedObj:{objectiveId:this.objectiveId},allowSelectKnowledgeOrObjective:"only_objective"},width:"100vw",restoreFocus:!1}).afterClosed().subscribe(s=>{s?.objectiveId&&this.approvedThisQuestions([n],s.objectiveId)})}openEditObjectiveForSelectedDialog(){this.sAztDialogService.open(Y.i,{data:{levelId:this.schoolLevelId,subjectId:this.schoolSubjectId,bookId:this.bookId,selectedObj:{objectiveId:this.objectiveId},allowSelectKnowledgeOrObjective:"only_objective"},width:"100vw",restoreFocus:!1}).afterClosed().subscribe(o=>{o?.objectiveId&&this.approvedAllSelectedQuestions(o.objectiveId)})}loadMoreQuestions(){this.followerRenderQuest=new P.e,this.initStatusObj();let n=this.aiQuestionBankService.aiApiV1QuestionBankGetNotManualAssignObjectiveQuestionsGet(this.objectiveId,50);this.filterObj.similarQuestionId&&(n=this.aiQuestionBankService.aiApiV1QuestionBankGetSimilarQuestionsInObjectiveGet(this.objectiveId,this.filterObj.similarQuestionId)),""!=this.filterObj.searchKeyword&&(n=this.aiQuestionBankService.aiApiV1QuestionBankSearchQuestionsByChatGptInObjectivePost({objectiveId:this.objectiveId,description:this.filterObj.searchKeyword})),this.waitDestroy(n.subscribe({next:o=>{this.waitDestroy(this.questionService.apiQuestionsListPost({ids:o}).subscribe(s=>{this.loadQuest(s.data??[],l=>{this.followerRenderQuest.setNumQuest(this.objs.length),this.objs=l.map(C=>({...C,isApproving:!1,isRejecting:!1,isShow:!0,selectedCheckBoxFormControl:new r.MJ(!!this.filterObj.similarQuestionId,{nonNullable:!0})})),this.selectedCheckBoxChange(),this.stopStatusObj()})}))},error:o=>this.errorStatusObj(o.error.message,!0)}))}loadQuest(n,o){const s=this.commonService.castJsonToClassObjs(se.I,JSON.stringify(n))??[];this.questionRenderService.parseRenderQuestions(s??[],l=>{},this.configRenderService).then(l=>{o(l)}).catch(l=>{this.showErrorSnack("lang_auto_de_thi_tai_khong_thanh_cong"),o(s)})}getObjectiveInfo(){this.sAztKnowledgeObjectiveService.getKnowledgeByApi(this.schoolLevelId,this.schoolSubjectId,!1,this.bookId,n=>this.curObjectiveObj=this.sAztKnowledgeObjectiveService.getObjByObjectiveId(n,this.objectiveId),n=>this.errorStatusObj(n,!0))}}return(t=a).\u0275fac=function(){let i;return function(o){return(i||(i=e.xGo(t)))(o||t)}}(),t.\u0275cmp=e.VBU({type:t,selectors:[["app-tools-knowledge-base-classification-questions"]],features:[e.Vt3],decls:0,vars:0,template:function(n,o){},styles:["th[_ngcontent-%COMP%]{background-color:#f4f4f4;border:1px solid #ccc}.table-report[_ngcontent-%COMP%]{border-spacing:0 2px!important}.td-question-selected[_ngcontent-%COMP%]{border:1px solid green;border-radius:3px}"]}),a})();var z=c(18718),ce=c(11002),de=c(32099),F=c(96451),pe=c(42789),y=c(52811),_e=c(64486),me=c(66793),ue=c(5955),ge=c(15423),fe=c(9570),u=c(76975);const be=function(t){return{"skeleton-box-loading":t}};function he(t,a){if(1&t&&e.nrm(0,"div",2),2&t){const i=e.XpG();e.Y8G("ngClass",e.eq3(1,be,i.renderConfigObj.isFirstRender))}}function ve(t,a){if(1&t&&(e.j41(0,"div",13)(1,"b",14),e.EFF(2),e.nI1(3,"isTrueFalseAnswer"),e.k0s(),e.nrm(4,"azt-dynamic-hook",4),e.k0s()),2&t){const i=a.$implicit,n=e.XpG(3);let o;e.R7$(2),e.JRh(e.bMT(3,2,n.questionObj)?(null!==(o=i.alpha)&&void 0!==o?o:i.key).toLowerCase()+")":(null!==(o=i.alpha)&&void 0!==o?o:i.key)+"."),e.R7$(2),e.Y8G("content",i.content)}}function Ce(t,a){if(1&t&&(e.j41(0,"div",11),e.DNE(1,ve,5,4,"div",12),e.k0s()),2&t){const i=e.XpG(2);e.Y8G("answerSizeManager",0),e.R7$(1),e.Y8G("ngForOf",i.questionObj.answers)}}function Te(t,a){if(1&t&&(e.j41(0,"h2",15),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t){const i=e.XpG(2);e.R7$(1),e.Lme(" ",e.bMT(2,2,"lang_auto_dap_an"),": ",i.questionObj.answerResult.length?i.questionObj.answerResult.join(" | "):""," ")}}function je(t,a){1&t&&(e.j41(0,"h2",15),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"lang_auto_tu_luan")," "))}function Oe(t,a){if(1&t){const i=e.RV6();e.j41(0,"div",16)(1,"a",17),e.bIt("click",function(){e.eBV(i);const o=e.XpG(2);return e.Njj(o.showExplainBox())}),e.EFF(2),e.nI1(3,"mytranslate"),e.nI1(4,"mytranslate"),e.k0s()()}if(2&t){const i=e.XpG(2);e.R7$(2),e.SpI(" ",i.isShowExplain?e.bMT(3,1,"lang_auto_an_giai_thich"):e.bMT(4,3,"lang_auto_xem_giai_thich")," ")}}function we(t,a){if(1&t&&(e.j41(0,"div",3)(1,"div"),e.nrm(2,"azt-dynamic-hook",4),e.DNE(3,Ce,2,2,"div",5),e.nI1(4,"isOneChoiceAnswer"),e.nI1(5,"isTrueFalseAnswer"),e.j41(6,"div",6),e.DNE(7,Te,3,4,"h2",7),e.nI1(8,"isEssayAnswer"),e.DNE(9,je,3,3,"ng-template",null,8,e.C5r),e.DNE(11,Oe,5,5,"div",9),e.k0s()(),e.nrm(12,"azt-question-explain-box",10),e.k0s()),2&t){const i=e.sdS(10),n=e.XpG();let o;e.R7$(2),e.Y8G("content",null!==(o=n.questionObj.content)&&void 0!==o?o:""),e.R7$(1),e.Y8G("ngIf",(e.bMT(4,8,n.questionObj)||e.bMT(5,10,n.questionObj))&&n.questionObj.answers&&n.questionObj.answers.length>0),e.R7$(4),e.Y8G("ngIf",n.questionObj.answerResult&&!e.bMT(8,12,n.questionObj))("ngIfElse",i),e.R7$(4),e.Y8G("ngIf",n.questionObj.help),e.R7$(1),e.Y8G("isShowExplain",n.isShowExplain)("questionObj",n.questionObj)("renderConfigObj",n.renderConfigObj)}}let xe=(()=>{var t;class a extends _e.I{constructor(){super(...arguments),this.follower=new P.e,this.questionLabel="",this.isShowExplain=!1}customQuestionLabel(n){const o=this.commonService.castJsonToObj(n??"")??void 0;return o?.label?o.label:"C\xe2u"}showExplainBox(){this.isShowExplain=!this.isShowExplain}initRenderBox(){let n=new me.C(!0,!1,!1);super.initData(n,this.follower,this.questionObj),this.questionLabel=this.customQuestionLabel(this.questionObj.expandInfo)+" "+(null!=this.questionObj.labelIndex?this.questionObj.labelIndex:this.questionObj.rawIndex)}ngOnInit(){super.ngOnInit(),this.initRenderBox()}}return(t=a).\u0275fac=function(){let i;return function(o){return(i||(i=e.xGo(t)))(o||t)}}(),t.\u0275cmp=e.VBU({type:t,selectors:[["azt-question-standalone-for-classification-tool"]],inputs:{questionObj:"questionObj",follower:"follower"},features:[e.Vt3],decls:4,vars:2,consts:[["class","question-standalone-loader-box",3,"ngClass",4,"ngIf","ngIfElse"],["elementRended",""],[1,"question-standalone-loader-box",3,"ngClass"],[1,"box","p-3"],[3,"content"],["class","row answers",3,"answerSizeManager",4,"ngIf"],[1,"flex","justify-between"],["class","font-medium text-md text-left text-success mt-3",4,"ngIf","ngIfElse"],["essayAnswer",""],["class","ml-auto mt-1",4,"ngIf"],[2,"display","block",3,"isShowExplain","questionObj","renderConfigObj"],[1,"row","answers",3,"answerSizeManager"],["class","answer col-sm-12 col-md-6",4,"ngFor","ngForOf"],[1,"answer","col-sm-12","col-md-6"],[1,"answer-label"],[1,"font-medium","text-md","text-left","text-success","mt-3"],[1,"ml-auto","mt-1"],["azt-track-service","azt-standalone-question-4zQT3eCoTDc",1,"btn","btn-transparent",2,"user-select","none",3,"click"]],template:function(n,o){if(1&n&&(e.qex(0),e.DNE(1,he,1,3,"div",0),e.DNE(2,we,13,14,"ng-template",null,1,e.C5r),e.bVm()),2&n){const s=e.sdS(3);e.R7$(1),e.Y8G("ngIf",!o.renderConfigObj.isRenderElement)("ngIfElse",s)}},dependencies:[d.YU,d.Sq,d.bT,ue.C,ge.N,fe.x,u.wp,u.V6,u.Zm,u.FC],styles:[".box-content[_ngcontent-%COMP%]{border-radius:5px;border:1px solid #fafafa;margin:15px;box-shadow:2px 2px 5px #eee}.button-icon-feedback[_ngcontent-%COMP%]{color:gray;float:right}.question-standalone-label[_ngcontent-%COMP%]{font-weight:700}",'.pr-7[_ngcontent-%COMP%]{padding-right:28px}.w-38px[_ngcontent-%COMP%]{width:38px}.remove-grid[_ngcontent-%COMP%]{display:block!important}.question-standalone-loader-box[_ngcontent-%COMP%]{min-height:50px}  .skeleton-box-loading{width:100%;height:30px;max-width:100%;margin-bottom:5px;display:inline-block}  .skeleton-box-loading:after{position:absolute;top:0;right:0;bottom:0;left:0;transform:translate(-100%);animation:_ngcontent-%COMP%_shimmer 2s infinite;content:""}.question-standalone-box[_ngcontent-%COMP%]{margin-bottom:30px;display:block;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);border-radius:.375rem}.question-standalone-container[_ngcontent-%COMP%]{padding:15px}.question-standalone-for-test-finder[_ngcontent-%COMP%]{border:none;margin-bottom:0;padding:0}.question-standalone-for-test-finder[_ngcontent-%COMP%]   .question-standalone-main-content[_ngcontent-%COMP%]{padding:15px;border:1px solid rgb(228,228,228)}.group-of-question-standalone-for-test-finder[_ngcontent-%COMP%]{padding:15px!important;border:1px solid rgb(228,228,228)!important}.question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid #2262ae!important;outline:3px solid rgba(125,160,201,.65)!important}.group-of-question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid green!important;outline:3px solid rgba(0,193,0,.321)!important}.question-standalone-label[_ngcontent-%COMP%]{font-weight:700}.question-standalone-content-box[_ngcontent-%COMP%]{position:relative}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]{color:#f44336;position:relative;padding-left:20px;display:flex;align-items:center}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]:before{content:"!";position:absolute;left:0;color:#fff;background:#f44336;width:15px;height:15px;text-align:center;border-radius:50%;font-size:smaller;display:flex;justify-content:center;align-items:center}.question-standalone-step-container-box[_ngcontent-%COMP%]{margin-bottom:50px}.group-content-of-question-standalone[_ngcontent-%COMP%]{margin-bottom:10px;font-weight:700}.answer[_ngcontent-%COMP%]{display:flex;align-items:center}.answer-label[_ngcontent-%COMP%]{width:20px;height:30px;min-width:20px;min-height:30px;display:flex;align-items:center;justify-content:flex-start;border-radius:50%;border-width:2px;border-style:solid;border-color:transparent}.answer-box[_ngcontent-%COMP%]{border-radius:0 0 3px 3px;padding:8px 20px;justify-content:space-between;align-items:center}.selected-answer[_ngcontent-%COMP%]{background-color:#f39c12;color:#fff}.answer-content-front[_ngcontent-%COMP%]{display:flex!important;flex-wrap:wrap;width:calc(100% - 30px)}.explainTxt[_ngcontent-%COMP%]{width:125px;font-weight:500;display:flex;align-items:center}#examHeader[_ngcontent-%COMP%]{display:block;border:1px solid #e7e7e7;border-radius:3px;overflow:hidden}.arrow_btn[_ngcontent-%COMP%]{font-size:20px;vertical-align:middle;width:20px;height:20px;color:#fff;margin-left:auto!important;margin-right:auto!important;-webkit-user-select:none;user-select:none}.bottom_action[_ngcontent-%COMP%]{position:fixed;padding:15px;bottom:0;left:0;background:#312e2e;color:#fff;width:100%}.bottom_action[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]{display:block}.btn-ans-result[_ngcontent-%COMP%]{color:#fff;background-color:#f39c12}.show-list[_ngcontent-%COMP%]{max-width:200px}.show-list[_ngcontent-%COMP%]   .show-sheet[_ngcontent-%COMP%]   .listli[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:27px;height:27px;border-radius:50%;border:1px solid #347da5;display:flex;align-items:center;color:#fff;justify-content:center;font-size:12px;cursor:pointer;-webkit-user-select:none;user-select:none}.top_action[_ngcontent-%COMP%]{position:fixed;padding:10px;top:0;left:0;background:#312e2e;color:#fff;width:100%}.scrollSheetMobile[_ngcontent-%COMP%]{max-height:200px;overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.scrollSheetMobile[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.notify-badge[_ngcontent-%COMP%]{position:absolute;right:3px;top:3px;text-align:center;color:#afafaf;padding:0;font-size:20px;cursor:pointer}.attach-container[_ngcontent-%COMP%]{background:#fff;padding:10px 0 0;border-radius:5px;width:83.33%;border:1px solid #e8e8e8}.answer-review[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:50%;border:1px solid rgb(52,125,165);display:flex;align-items:center;color:#fff;justify-content:center;font-size:15px;-webkit-user-select:none;user-select:none}.border-none[_ngcontent-%COMP%]{border:none!important}.bg-question[_ngcontent-%COMP%]{margin-top:15px;padding:15px 10px;background:#fff}.question-pending-part[_ngcontent-%COMP%]{width:100%;height:50px}.pencil-edit[_ngcontent-%COMP%]{position:absolute;top:-5px;right:-5px;width:30px;height:30px;border-radius:50%;text-align:center;background:#a9a9a9;z-index:9999}.pencil-edit[_ngcontent-%COMP%]   .lucide[_ngcontent-%COMP%]{color:#fff;stroke-width:2.5px;height:29px}.margin-question-bar[_ngcontent-%COMP%]{margin-top:calc(3rem + 40px)!important}.sheet-screen[_ngcontent-%COMP%]{max-height:calc(100vh - 140px);overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.sheet-screen[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}  .layout{display:grid;margin:20px 0;grid-row-gap:20px}  .layout-4{grid-template-columns:1fr 1fr 1fr 1fr}  .layout-2{grid-template-columns:1fr 1fr}  .layout-1{grid-template-columns:1fr}  .question-standalone-content-box{max-width:100%;overflow-x:auto;overflow-y:hidden}  #boxContentQuestion .question-standalone-container{max-width:800px}@keyframes _ngcontent-%COMP%_shimmer{to{transform:translate(100%)}}@media (max-width: 768px){.answer-content-front[_ngcontent-%COMP%]{justify-content:center}.btn-ans-result[_ngcontent-%COMP%]{margin-right:auto!important}}@media (max-width: 800px){  #boxContentQuestion .question-standalone-container{max-width:calc(90vw - 16px)!important}}']}),a})();function ke(t,a){1&t&&e.nrm(0,"azt-loading-ui",18)}function Ie(t,a){1&t&&e.nrm(0,"azt-loading-ui",18)}const Ae=function(t){return{"td-question-selected":t}},G=function(){return{"mr-1":!0}};function Ee(t,a){if(1&t){const i=e.RV6();e.qex(0),e.j41(1,"tr",2)(2,"td")(3,"div",3)(4,"div",4)(5,"input",5),e.bIt("change",function(){e.eBV(i);const o=e.XpG();return e.Njj(o.selectedCheckBoxChangeEvent.emit())}),e.k0s(),e.EFF(6," \xa0 "),e.j41(7,"label",6),e.EFF(8),e.nI1(9,"mytranslate"),e.k0s()(),e.j41(10,"div",7)(11,"div",8),e.nrm(12,"azt-question-standalone-for-classification-tool",9),e.k0s()(),e.j41(13,"div",7)(14,"span",10),e.bIt("click",function(){const s=e.eBV(i).$implicit,l=e.XpG();return e.Njj(l.openEditObjectiveDialogEvent.emit(s))}),e.nrm(15,"lucide-icon",11),e.EFF(16),e.nI1(17,"mytranslate"),e.k0s(),e.j41(18,"span"),e.EFF(19," \xa0\xa0|\xa0\xa0 "),e.j41(20,"a",10),e.bIt("click",function(){const s=e.eBV(i).$implicit,l=e.XpG();return e.Njj(l.filterBySimilarQuestionEvent.emit(s))}),e.nrm(21,"lucide-icon",12),e.EFF(22),e.nI1(23,"mytranslate"),e.k0s()()()()(),e.j41(24,"td",13)(25,"span",14),e.bIt("click",function(){const s=e.eBV(i).$implicit,l=e.XpG();return e.Njj(l.approvedThisQuestionsEvent.emit({objs:[s],objectiveId:l.objectiveId}))}),e.DNE(26,ke,1,0,"azt-loading-ui",15),e.EFF(27),e.nI1(28,"mytranslate"),e.k0s(),e.j41(29,"span",16),e.bIt("click",function(){const s=e.eBV(i).$implicit,l=e.XpG();return e.Njj(l.rejectQuestionsEvent.emit([s]))}),e.DNE(30,Ie,1,0,"azt-loading-ui",15),e.nrm(31,"lucide-icon",17),e.EFF(32),e.nI1(33,"mytranslate"),e.k0s()()(),e.bVm()}if(2&t){const i=a.$implicit,n=e.XpG();e.R7$(1),e.Y8G("hidden",!i.isShow),e.R7$(2),e.Y8G("ngClass",e.eq3(28,Ae,i.selectedCheckBoxFormControl.value)),e.R7$(2),e.Mz_("id","checkbox_for_question_",i.id,""),e.Y8G("formControl",i.selectedCheckBoxFormControl),e.R7$(2),e.Mz_("for","checkbox_for_question_",i.id,""),e.R7$(1),e.JRh(e.bMT(9,18,"lang_azota_tool_knowledge_choose_this_question")),e.R7$(3),e.Y8G("id","question_render_element_"+i.id),e.R7$(1),e.Y8G("follower",n.followerRenderQuest)("questionObj",i),e.R7$(3),e.Y8G("ngClass",e.lJ4(30,G)),e.R7$(1),e.SpI(" ",e.bMT(17,20,"lang_azota_tool_knowledge_edit_objective_button")," "),e.R7$(5),e.Y8G("ngClass",e.lJ4(31,G)),e.R7$(1),e.SpI(" ",e.bMT(23,22,"lang_azota_tool_knowledge_approved_by_similar_question_button")," "),e.R7$(4),e.Y8G("ngIf",i.isApproving),e.R7$(1),e.SpI(" ",e.bMT(28,24,"lang_azota_tool_knowledge_approved_objective_button")," "),e.R7$(3),e.Y8G("ngIf",i.isRejecting),e.R7$(1),e.Y8G("ngClass",e.lJ4(32,G)),e.R7$(1),e.SpI(" ",e.bMT(33,26,"lang_azota_tool_knowledge_question_is_low_quality_button")," ")}}let ze=(()=>{var t;class a extends w.H{constructor(){super(...arguments),this.objs=[],this.selectedCheckBoxChangeEvent=new e.bkB,this.openEditObjectiveDialogEvent=new e.bkB,this.approvedThisQuestionsEvent=new e.bkB,this.rejectQuestionsEvent=new e.bkB,this.filterBySimilarQuestionEvent=new e.bkB}}return(t=a).\u0275fac=function(){let i;return function(o){return(i||(i=e.xGo(t)))(o||t)}}(),t.\u0275cmp=e.VBU({type:t,selectors:[["app-tools-knowledge-approve-classification-table"]],inputs:{objs:"objs",schoolLevelId:"schoolLevelId",schoolSubjectId:"schoolSubjectId",bookId:"bookId",objectiveId:"objectiveId",totalSelectedCheckBox:"totalSelectedCheckBox",followerRenderQuest:"followerRenderQuest"},outputs:{selectedCheckBoxChangeEvent:"selectedCheckBoxChangeEvent",openEditObjectiveDialogEvent:"openEditObjectiveDialogEvent",approvedThisQuestionsEvent:"approvedThisQuestionsEvent",rejectQuestionsEvent:"rejectQuestionsEvent",filterBySimilarQuestionEvent:"filterBySimilarQuestionEvent"},features:[e.Vt3],decls:3,vars:1,consts:[[1,"table","table-report","mt-3"],[4,"ngFor","ngForOf"],[3,"hidden"],[1,"p-3",3,"ngClass"],[1,"flex","items-centers"],["type","checkbox",1,"show-code","form-check-input",3,"id","formControl","change"],[1,"form-check-label",3,"for"],[1,"mt-3"],["load_effect_lazy","",1,"question-standalone-box",3,"id"],[3,"follower","questionObj"],[1,"clickable","link-color","link-text",3,"click"],["name","tags","size","16",3,"ngClass"],["name","layers-3","size","16",3,"ngClass"],[1,"w-60","text-center"],[1,"btn","btn-primary",3,"click"],["class","mr-1",4,"ngIf"],[1,"text-danger","mt-8","inline-block","clickable","flex","items-center",3,"click"],["name","octagon-alert","size","16",3,"ngClass"],[1,"mr-1"]],template:function(n,o){1&n&&(e.j41(0,"table",0)(1,"tbody"),e.DNE(2,Ee,34,33,"ng-container",1),e.k0s()()),2&n&&(e.R7$(2),e.Y8G("ngForOf",o.objs))},dependencies:[d.YU,d.Sq,d.bT,r.Zm,r.BC,r.l_,pe.N,y.R,xe,m.WGl,u.wp],encapsulation:2}),a})();function ye(t,a){if(1&t){const i=e.RV6();e.j41(0,"span",2),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"span",3),e.bIt("click",function(){e.eBV(i);const o=e.XpG();return e.Njj(o.removeFilter())}),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()()}if(2&t){const i=e.XpG();e.R7$(1),e.Lme(" ",e.bMT(2,3,"lang_azota_tool_knowledge_approved_similar_question_filter"),": ",i.filterObj.similarQuestionId," "),e.R7$(3),e.JRh(e.bMT(5,5,"lang_common_remove"))}}function Se(t,a){if(1&t){const i=e.RV6();e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.j41(3,"span",3),e.bIt("click",function(){e.eBV(i);const o=e.XpG();return e.Njj(o.removeFilter())}),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()()}2&t&&(e.R7$(1),e.SpI(" ",e.bMT(2,2,"lang_azota_tool_knowledge_approved_search_by_keyword_filter")," "),e.R7$(3),e.JRh(e.bMT(5,4,"lang_common_remove")))}let Fe=(()=>{var t;class a extends w.H{constructor(){super(...arguments),this.changeFilterObjEvent=new e.bkB}removeFilter(){this.filterObj=new S,this.changeFilterObjEvent.emit(this.filterObj)}}return(t=a).\u0275fac=function(){let i;return function(o){return(i||(i=e.xGo(t)))(o||t)}}(),t.\u0275cmp=e.VBU({type:t,selectors:[["app-tools-knowledge-approve-classification-filter-box"]],inputs:{filterObj:"filterObj"},outputs:{changeFilterObjEvent:"changeFilterObjEvent"},features:[e.Vt3],decls:2,vars:2,consts:[["class","mr-3",4,"ngIf"],[4,"ngIf"],[1,"mr-3"],[1,"text-danger","clickable",3,"click"]],template:function(n,o){1&n&&(e.DNE(0,ye,6,7,"span",0),e.DNE(1,Se,6,6,"span",1)),2&n&&(e.Y8G("ngIf",o.filterObj.similarQuestionId),e.R7$(1),e.Y8G("ngIf",""!=o.filterObj.searchKeyword))},dependencies:[d.bT,u.wp],encapsulation:2}),a})();function Re(t,a){if(1&t){const i=e.RV6();e.j41(0,"span",12),e.bIt("click",function(){e.eBV(i);const o=e.XpG();return e.Njj(o.totalSelectedCheckBox!=o.totalQuestionsAreShow?o.checkAll():o.unCheckAll())}),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()}if(2&t){const i=e.XpG();e.R7$(1),e.SpI(" ",e.bMT(2,1,i.totalSelectedCheckBox!=i.totalQuestionsAreShow?"lang_select_all":"lang_remove_all")," ")}}function Me(t,a){if(1&t){const i=e.RV6();e.j41(0,"span"),e.EFF(1," \xa0\xa0|\xa0\xa0 "),e.j41(2,"span",12),e.bIt("click",function(){e.eBV(i);const o=e.XpG();return e.Njj(o.openEditObjectiveForSelectedDialog())}),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.EFF(5," \xa0\xa0|\xa0\xa0 "),e.j41(6,"span",12),e.bIt("click",function(){e.eBV(i);const o=e.XpG();return e.Njj(o.approvedAllSelectedQuestions(o.objectiveId))}),e.EFF(7),e.nI1(8,"mytranslate"),e.k0s()()}if(2&t){const i=e.XpG();e.R7$(3),e.Lme("",e.bMT(4,4,"lang_azota_tool_knowledge_edit_objective_for_all_selected_button")," (",i.totalSelectedCheckBox,")"),e.R7$(4),e.Lme("",e.bMT(8,6,"lang_azota_tool_knowledge_approved_objective_for_all_selected_button")," (",i.totalSelectedCheckBox,")")}}function Pe(t,a){if(1&t&&e.nrm(0,"azt-loading-effect",13),2&t){const i=e.XpG();e.Y8G("currentStatusObj",i.statusObj)}}function Ge(t,a){if(1&t){const i=e.RV6();e.j41(0,"div",16),e.bIt("click",function(){e.eBV(i);const o=e.XpG(2);return e.Njj(o.loadMoreQuestions())}),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()}2&t&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"lang_azota_tool_knowledge_reload_list_questions")," "))}function Be(t,a){1&t&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"lang_azota_tool_knowledge_list_questions_are_empty")," "))}function De(t,a){if(1&t){const i=e.RV6();e.j41(0,"app-tools-knowledge-approve-classification-table",14),e.bIt("selectedCheckBoxChangeEvent",function(){e.eBV(i);const o=e.XpG();return e.Njj(o.selectedCheckBoxChange())})("openEditObjectiveDialogEvent",function(o){e.eBV(i);const s=e.XpG();return e.Njj(s.openEditObjectiveDialog(o))})("openEditObjectiveForSelectedDialogEvent",function(){e.eBV(i);const o=e.XpG();return e.Njj(o.openEditObjectiveForSelectedDialog())})("approvedThisQuestionsEvent",function(o){e.eBV(i);const s=e.XpG();return e.Njj(s.approvedThisQuestions(o.objs,o.objectiveId))})("rejectQuestionsEvent",function(o){e.eBV(i);const s=e.XpG();return e.Njj(s.rejectQuestions(o))})("filterBySimilarQuestionEvent",function(o){e.eBV(i);const s=e.XpG();return e.Njj(s.filterBySimilarQuestion(o))}),e.k0s(),e.DNE(1,Ge,3,3,"div",15),e.DNE(2,Be,3,3,"span",9)}if(2&t){const i=e.XpG();e.Y8G("objs",i.objs)("schoolLevelId",i.schoolLevelId)("schoolSubjectId",i.schoolSubjectId)("bookId",i.bookId)("objectiveId",i.objectiveId)("totalSelectedCheckBox",i.totalSelectedCheckBox)("followerRenderQuest",i.followerRenderQuest),e.R7$(1),e.Y8G("ngIf",i.objs.length>0&&!i.filterObj.isFilter()),e.R7$(1),e.Y8G("ngIf",i.objs.length<=0||i.totalQuestionsAreShow<=0&&i.filterObj.isFilter())}}let Ke=(()=>{var t;class a extends le{constructor(){super(...arguments),this.searchContentObj=new E.Z}onChangeFilterObj(n){this.filterObj=n,""==this.filterObj.searchKeyword&&this.searchContentObj.resetSearchContentEvent("NOT_EMIT_EVENT"),this.loadMoreQuestions()}filterBySimilarQuestion(n){this.filterObj=new S,this.filterObj.similarQuestionId=n.id,""==this.filterObj.searchKeyword&&this.searchContentObj.resetSearchContentEvent("NOT_EMIT_EVENT"),this.loadMoreQuestions()}onSearchBox(n){this.filterObj=new S,this.filterObj.searchKeyword=n.searchContent,this.searchContentObj=n,this.loadMoreQuestions()}ngOnInit(){super.ngOnInit(),this.schoolLevelId=Number(this.commonService.getMyParam(this.activeRoute,"levelId")??0),this.schoolSubjectId=Number(this.commonService.getMyParam(this.activeRoute,"subjectId")??0),this.bookId=Number(this.commonService.getMyParam(this.activeRoute,"bookId")??0),this.objectiveId=Number(this.commonService.getMyParam(this.activeRoute,"objectiveId")??0),this.backTo=`/azota-tools/knowledge-tree-classification/${this.schoolLevelId}/${this.schoolSubjectId}/${this.bookId}`,this.loadMoreQuestions(),this.getObjectiveInfo()}}return(t=a).\u0275fac=function(){let i;return function(o){return(i||(i=e.xGo(t)))(o||t)}}(),t.\u0275cmp=e.VBU({type:t,selectors:[["app-tools-knowledge-approve-classification-for-objective"]],features:[e.Vt3],decls:18,vars:20,consts:[[3,"headerBackToLink"],[3,"colorBackground","defaultHeight"],[1,"w-full"],[1,"mt-3","font-medium","box","p-3"],[3,"innerHtml"],[1,"mt-3"],[3,"isManualSearch","searchContentObj","placeholder","onSearch"],[1,"block","mt-3",3,"filterObj","changeFilterObjEvent"],["class","clickable link-color",3,"click",4,"ngIf"],[4,"ngIf"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],["doneLoading",""],[1,"clickable","link-color",3,"click"],[3,"currentStatusObj"],[3,"objs","schoolLevelId","schoolSubjectId","bookId","objectiveId","totalSelectedCheckBox","followerRenderQuest","selectedCheckBoxChangeEvent","openEditObjectiveDialogEvent","openEditObjectiveForSelectedDialogEvent","approvedThisQuestionsEvent","rejectQuestionsEvent","filterBySimilarQuestionEvent"],["class","text-center clickable link-color link-text mt-3",3,"click",4,"ngIf"],[1,"text-center","clickable","link-color","link-text","mt-3",3,"click"]],template:function(n,o){if(1&n&&(e.j41(0,"teacher-layout",0)(1,"flexed-on-the-top",1)(2,"div",2)(3,"div",3),e.nrm(4,"div",4),e.nI1(5,"safeContentQuestion"),e.nI1(6,"async"),e.nI1(7,"mathJaxContent"),e.j41(8,"div",5)(9,"azt-search-box",6),e.bIt("onSearch",function(l){return o.onSearchBox(l.searchObj)}),e.nI1(10,"mytranslate"),e.k0s(),e.j41(11,"app-tools-knowledge-approve-classification-filter-box",7),e.bIt("changeFilterObjEvent",function(l){return o.onChangeFilterObj(l)}),e.k0s()(),e.j41(12,"div",5),e.DNE(13,Re,3,3,"span",8),e.DNE(14,Me,9,8,"span",9),e.k0s()()()(),e.DNE(15,Pe,1,1,"azt-loading-effect",10),e.DNE(16,De,3,9,"ng-template",null,11,e.C5r),e.k0s()),2&n){const s=e.sdS(17);e.Y8G("headerBackToLink",o.backTo),e.R7$(1),e.Y8G("colorBackground","#f0f8ffe8")("defaultHeight",""),e.R7$(3),e.Y8G("innerHtml",e.bMT(5,12,e.bMT(6,14,e.bMT(7,16,null==o.curObjectiveObj?null:o.curObjectiveObj.title))),e.npT),e.R7$(5),e.Y8G("isManualSearch",!0)("searchContentObj",o.searchContentObj)("placeholder",e.bMT(10,18,"lang_common_search_by_name")),e.R7$(2),e.Y8G("filterObj",o.filterObj),e.R7$(2),e.Y8G("ngIf",o.totalQuestionsAreShow>0),e.R7$(1),e.Y8G("ngIf",o.totalSelectedCheckBox>0),e.R7$(1),e.Y8G("ngIf",o.statusObj.loading)("ngIfElse",s)}},dependencies:[d.bT,z.K,ce.$,de.W,F.Q,ze,Fe,d.Jj,u.wp,u.km,u.ep],encapsulation:2}),a})();var X=c(51614),U=c(50334);function $e(t,a){1&t&&e.eu8(0)}function Ne(t,a){1&t&&e.nrm(0,"lucide-icon",18)}function Qe(t,a){1&t&&e.nrm(0,"lucide-icon",19)}function Ve(t,a){if(1&t&&(e.j41(0,"i"),e.DNE(1,Ne,1,0,"lucide-icon",16),e.DNE(2,Qe,1,0,"lucide-icon",17),e.k0s()),2&t){const i=e.XpG().$implicit;e.R7$(1),e.Y8G("ngIf",i.isExpand),e.R7$(1),e.Y8G("ngIf",!i.isExpand)}}function Le(t,a){1&t&&(e.j41(0,"i"),e.nrm(1,"lucide-icon",20),e.k0s())}const q=function(t){return[t]};function Ye(t,a){if(1&t&&(e.j41(0,"span",21),e.nI1(1,"navigationLocalize"),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()),2&t){const i=e.XpG().$implicit,n=e.XpG(3);e.Y8G("routerLink",e.eq3(6,q,e.bMT(1,2,"/azota-tools/knowledge-tree-manage-practice/"+n.form.controls.schoolLevel.value+"/"+n.form.controls.schoolSubject.value+"/"+n.form.controls.bookIdFormControl.value+"/"+i.data.id))),e.R7$(2),e.SpI(" ",e.bMT(3,4,"lang_tool_knowledge_start_manage_practice")," ")}}function Xe(t,a){if(1&t&&(e.j41(0,"span",22),e.nI1(1,"navigationLocalize"),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()),2&t){const i=e.XpG().$implicit,n=e.XpG(3);e.Y8G("routerLink",e.eq3(6,q,e.bMT(1,2,"/azota-tools/knowledge-tree-approve-classification-for-objective/"+n.form.controls.schoolLevel.value+"/"+n.form.controls.schoolSubject.value+"/"+n.form.controls.bookIdFormControl.value+"/"+i.data.objectiveId))),e.R7$(2),e.SpI(" ",e.bMT(3,4,"lang_tool_knowledge_start_approve_questions")," ")}}function Ue(t,a){1&t&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t&&(e.R7$(1),e.JRh(e.bMT(2,1,"lang_tool_knowledge_approved_all_questions")))}function qe(t,a){1&t&&e.eu8(0)}const J=function(t){return{nodeObjs:t}};function Je(t,a){if(1&t&&(e.qex(0),e.DNE(1,qe,1,0,"ng-container",3),e.bVm()),2&t){const i=e.XpG().$implicit;e.XpG(3);const n=e.sdS(13);e.R7$(1),e.Y8G("ngTemplateOutlet",n)("ngTemplateOutletContext",e.eq3(2,J,i.children))}}const He=function(t){return{"text-danger":t}};function We(t,a){if(1&t){const i=e.RV6();e.qex(0),e.j41(1,"tr",7)(2,"td",8)(3,"div",9),e.bIt("click",function(){const s=e.eBV(i).$implicit,l=e.XpG(3);return e.Njj(l.clickToNode(s))}),e.DNE(4,Ve,3,2,"i",5),e.DNE(5,Le,2,0,"i",5),e.j41(6,"label",10),e.nrm(7,"span",11),e.nI1(8,"safeContentQuestion"),e.nI1(9,"async"),e.nI1(10,"mathJaxContent"),e.k0s()()(),e.j41(11,"td",12),e.EFF(12),e.j41(13,"span",13),e.EFF(14),e.k0s()(),e.j41(15,"td",1),e.DNE(16,Ye,4,8,"span",14),e.DNE(17,Xe,4,8,"span",15),e.DNE(18,Ue,3,3,"span",5),e.k0s()(),e.DNE(19,Je,2,4,"ng-container",5),e.bVm()}if(2&t){const i=a.$implicit,n=e.XpG(3);e.R7$(1),e.Y8G("hidden",!i.isShow),e.R7$(1),e.xc7("padding-left",14*(i.level+1),"px"),e.R7$(2),e.Y8G("ngIf",i.children.length),e.R7$(1),e.Y8G("ngIf",!i.children.length),e.R7$(2),e.Y8G("innerHTML",e.bMT(8,13,e.bMT(9,15,e.bMT(10,17,"L"+(i.level+1)+". "+i.text))),e.npT),e.R7$(5),e.SpI(" ",i.data.numberOfManualQuestions," / "),e.R7$(1),e.Y8G("ngClass",e.eq3(19,He,i.data.numberOfNotManualQuestions>0)),e.R7$(1),e.JRh(i.data.numberOfNotManualQuestions),e.R7$(2),e.Y8G("ngIf",!i.data.objectiveId&&n.form.controls.bookIdFormControl.value>0),e.R7$(1),e.Y8G("ngIf",i.data.objectiveId&&i.data.numberOfNotManualQuestions>0),e.R7$(1),e.Y8G("ngIf",i.data.numberOfNotManualQuestions<=0),e.R7$(1),e.Y8G("ngIf",i.isExpand)}}function Ze(t,a){if(1&t&&(e.qex(0),e.DNE(1,We,20,21,"ng-container",6),e.bVm()),2&t){const i=a.$implicit;e.R7$(1),e.Y8G("ngForOf",i)}}function et(t,a){if(1&t&&e.DNE(0,Ze,2,1,"ng-container",5),2&t){const i=a.nodeObjs,n=e.XpG();e.Y8G("ngIf",n.asTemplateDataObj(i))}}let tt=(()=>{var t;class a extends U.C{constructor(){super(...arguments),this.nodeObjs=[]}clickToNode(n){n.children.length&&(n.isExpand?this.collapse(n):this.expand(n))}asTemplateDataObj(n){return n}standardTreeNodes(n,o){let s=[];return n.forEach(l=>{let C={level:o,typeNode:l.objectiveId?"objective":"knowledge",isExpand:!0,isShow:!0,isSelected:!1,text:l.title,data:{...l,children:[]},children:[]};C.children=this.standardTreeNodes(l.children,o+1),s.push(C)}),s}ngOnInit(){this.nodeObjs=this.standardTreeNodes(this.rawNodes,0)}}return(t=a).\u0275fac=function(){let i;return function(o){return(i||(i=e.xGo(t)))(o||t)}}(),t.\u0275cmp=e.VBU({type:t,selectors:[["app-tools-view-knowledge-tree-for-classification"]],inputs:{rawNodes:"rawNodes",form:"form"},features:[e.Vt3],decls:14,vars:10,consts:[[1,"table","table-report"],[1,"text-center"],[1,"text-center","w-48"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["recursiveListTmpl",""],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"hidden"],[2,"max-width","500px"],[1,"clickable",3,"click"],[1,"form-check-label"],[3,"innerHTML"],[1,"text-right"],[3,"ngClass"],["class","link-color clickable",3,"routerLink",4,"ngIf"],["class","btn btn-primary",3,"routerLink",4,"ngIf"],["name","chevron-down","size","14",4,"ngIf"],["name","chevron-right","size","14",4,"ngIf"],["name","chevron-down","size","14"],["name","chevron-right","size","14"],["name","send-horizontal","size","14"],[1,"link-color","clickable",3,"routerLink"],[1,"btn","btn-primary",3,"routerLink"]],template:function(n,o){if(1&n&&(e.j41(0,"table",0)(1,"thead")(2,"tr")(3,"th",1),e.EFF(4,"\xa0"),e.k0s(),e.j41(5,"th",2),e.EFF(6),e.nI1(7,"mytranslate"),e.nI1(8,"mytranslate"),e.k0s(),e.nrm(9,"th",2),e.k0s()(),e.j41(10,"tbody"),e.DNE(11,$e,1,0,"ng-container",3),e.k0s()(),e.DNE(12,et,1,1,"ng-template",null,4,e.C5r)),2&n){const s=e.sdS(13);e.R7$(6),e.Lme("",e.bMT(7,4,"lang_tool_knowledge_manual_approved")," / ",e.bMT(8,6,"lang_tool_knowledge_manual_not_approved"),""),e.R7$(5),e.Y8G("ngTemplateOutlet",s)("ngTemplateOutletContext",e.eq3(8,J,o.nodeObjs))}},dependencies:[b.Wk,d.YU,d.Sq,d.bT,d.T3,m.WGl,d.Jj,u.F2,u.wp,u.km,u.ep],encapsulation:2}),a})();function nt(t,a){if(1&t&&e.nrm(0,"azt-loading-effect",5),2&t){const i=e.XpG();e.Y8G("currentStatusObj",i.statusObj)}}function ot(t,a){if(1&t&&e.nrm(0,"app-tools-view-knowledge-tree-for-classification",7),2&t){const i=e.XpG(2);e.Y8G("form",i.form)("rawNodes",i.nodes)}}function it(t,a){if(1&t&&e.DNE(0,ot,1,2,"app-tools-view-knowledge-tree-for-classification",6),2&t){const i=e.XpG();e.Y8G("ngIf",i.nodes.length)}}let st=(()=>{var t;class a extends w.H{changeLevelSubjectBookEvent(){let n=this.form.getRawValue();this.commonService.myNavigation("/azota-tools/knowledge-tree-classification/"+n.schoolLevel+"/"+n.schoolSubject+"/"+n.bookIdFormControl),this.initStatusObj(),this.waitDestroy(this.aiElearningService.aiApiV1ElearningGetKnowledgeTreeForClassificationGet(n.schoolLevel,n.schoolSubject,n.bookIdFormControl>0?n.bookIdFormControl:void 0).subscribe({next:o=>{this.nodes=o.nodes,this.stopStatusObj()},error:o=>this.errorStatusObj(o.error.message,!0)}))}ngOnInit(){super.ngOnInit(),this.commonService.translateMetaData({title:"lang_cms_admin_tools_knowledge_tree_classification_title",description:"lang_cms_admin_tools_knowledge_tree_classification_title",image:"lang_cms_test_image"});let n=Number(this.commonService.getMyParam(this.activeRoute,"levelId")??0),o=Number(this.commonService.getMyParam(this.activeRoute,"subjectId")??0),s=Number(this.commonService.getMyParam(this.activeRoute,"bookId")??0);this.form.controls.schoolLevel.setValue(n),this.form.controls.schoolSubject.setValue(o),this.form.controls.bookIdFormControl.setValue(s)}constructor(n,o){super(),this.aiElearningService=n,this.activeRoute=o,this.backTo="/super-role/admin-tool",this.nodes=[],this.form=new r.gE({schoolLevel:new r.MJ(0,{nonNullable:!0}),schoolSubject:new r.MJ(0,{nonNullable:!0}),bookIdFormControl:new r.MJ(0,{nonNullable:!0})})}}return(t=a).\u0275fac=function(n){return new(n||t)(e.rXU(A.T5),e.rXU(b.nX))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-tools-knowledge-tree-classification"]],features:[e.Vt3],decls:6,vars:8,consts:[[3,"headerBackToLink"],[1,"mt-3","mb-3"],[3,"form","removeLevelSubjectWithOtherName","showBookData","useFirstAsDefault","layout","changeDataEvent"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],["doneLoading",""],[3,"currentStatusObj"],[3,"form","rawNodes",4,"ngIf"],[3,"form","rawNodes"]],template:function(n,o){if(1&n&&(e.j41(0,"teacher-layout",0)(1,"div",1)(2,"config-level-subject-book",2),e.bIt("changeDataEvent",function(){return o.changeLevelSubjectBookEvent()}),e.k0s()(),e.DNE(3,nt,1,1,"azt-loading-effect",3),e.DNE(4,it,1,1,"ng-template",null,4,e.C5r),e.k0s()),2&n){const s=e.sdS(5);e.Y8G("headerBackToLink",o.backTo),e.R7$(2),e.Y8G("form",o.form)("removeLevelSubjectWithOtherName",!0)("showBookData",!0)("useFirstAsDefault",!0)("layout","label_in_one_line"),e.R7$(1),e.Y8G("ngIf",o.statusObj.loading)("ngIfElse",s)}},dependencies:[d.bT,z.K,X.X,F.Q,tt],encapsulation:2}),a})();var at=c(75421),rt=c(9500),R=c(89163),H=c(33887),lt=c(52909);let W=(()=>{var t;class a extends w.H{removeExample(n){this.form.controls.examples=new r.Yp(this.form.controls.examples.controls.filter(o=>o.controls.id.value!=n)),this.form.controls.examples.controls.length||this.addMoreExample()}addMoreExample(){this.form.controls.examples.push(new r.gE({id:new r.MJ(this.sAztUuidService.getUuid(),{nonNullable:!0}),name:new r.MJ("",{nonNullable:!0})}))}emitResult(){this.saveResultEvent.emit(this.hasNewResult)}initForm(){this.form=new r.gE({name:new r.MJ("",{nonNullable:!0,validators:[r.k0.required]}),description:new r.MJ("",{nonNullable:!0,validators:[]}),examples:new r.Yp([],{validators:[]}),objectiveId:new r.MJ(0,{nonNullable:!0,validators:[]})})}constructor(){super(),this.saveResultEvent=new e.bkB,this.aiElearningPracticeService=(0,e.WQX)(A.UO),this.sAztUuidService=(0,e.WQX)(lt.D),this.hasNewResult=!1,this.initForm()}}return(t=a).\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.VBU({type:t,selectors:[["app-tools-knowledge-tree-classification-base-practice-form"]],outputs:{saveResultEvent:"saveResultEvent"},features:[e.Vt3],decls:0,vars:0,template:function(n,o){},encapsulation:2}),a})();var B=c(47426),D=c(74960),K=c(4375),$=c(99965),N=c(43166);function ct(t,a){if(1&t&&(e.j41(0,"mat-option",27),e.nrm(1,"span",28),e.nI1(2,"safeContentQuestion"),e.nI1(3,"async"),e.nI1(4,"mathJaxContent"),e.k0s()),2&t){const i=a.$implicit;e.Y8G("value",i.id),e.R7$(1),e.Y8G("innerHTML",e.bMT(2,2,e.bMT(3,4,e.bMT(4,6,i.name))),e.npT)}}function dt(t,a){if(1&t){const i=e.RV6();e.j41(0,"div")(1,"div",29)(2,"div",30),e.nrm(3,"textarea",11),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"span",31),e.bIt("click",function(){const s=e.eBV(i).$implicit,l=e.XpG();return e.Njj(l.removeExample(s.controls.id.value))}),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()()()}if(2&t){const i=a.$implicit;e.R7$(3),e.FS9("placeholder",e.bMT(4,3,"lang_tool_knowledge_manage_practice_example")),e.Y8G("formControl",i.controls.name),e.R7$(3),e.JRh(e.bMT(7,5,"lang_common_delete"))}}function pt(t,a){1&t&&e.nrm(0,"azt-loading-ui",32)}function _t(t,a){1&t&&e.nrm(0,"azt-loading-ui",32)}function mt(t,a){1&t&&e.nrm(0,"azt-loading-ui",32)}const ut=function(t){return{"border-danger":t}};let gt=(()=>{var t;class a extends W{saveObj(n){this.initStatusObj();let o={bookContentId:this.bookContentId,name:this.form.controls.name.value,description:this.form.controls.description.value?this.form.controls.description.value:void 0,examples:this.form.controls.examples.value.map(s=>s.name?.trim()).filter(s=>""!=s).filter(this.commonService.notEmpty)};this.waitDestroy(this.aiElearningPracticeService.aiApiV1ElearningPracticeInsertPracticePost(o).subscribe({next:s=>{this.updateObjectiveId(s.id,this.form.controls.objectiveId.value,()=>{this.hasNewResult=!0,this.successStatusObj("lang_cms_update_success",!0),this.initFormData(),n&&this.emitResult()})},error:s=>this.errorStatusObj(s.error.message,!0)}))}updateObjectiveId(n,o,s){if(!o)return s();this.waitDestroy(this.aiElearningPracticeService.aiApiV1ElearningPracticeUpdateObjectiveForPracticePost({practiceId:n,objectiveId:o}).subscribe({next:l=>s(),error:l=>{this.errorStatusObj(l.error.message,!0),s()}}))}initFormData(){this.initForm(),this.addMoreExample()}ngOnInit(){this.initFormData()}constructor(){super()}}return(t=a).\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.VBU({type:t,selectors:[["app-tools-knowledge-tree-classification-add-practice"]],inputs:{objectiveObjs:"objectiveObjs",bookContentId:"bookContentId"},features:[e.Vt3],decls:56,vars:50,consts:[[3,"formGroup"],[2,"height","calc(100vh - 100px)"],["track","vertical","pointerEventsMethod","scrollbar",3,"visibility"],["perfectScroll",""],[1,"pr-3","mb-8"],[1,"grid","grid-cols-12","gap-5"],[1,"col-span-4"],[1,"form-group"],[1,"control-label","font-medium"],["type","text",1,"form-control",3,"ngClass","formControl"],[1,"form-group","mt-3"],["autoResize","",1,"form-control",3,"placeholder","formControl"],[1,"form-group","mt-3","grid"],["appearance","fill",1,"box","mb-5"],["searchInList","",3,"placeholder","formControl"],["searchInListObjective","searchInList"],[3,"formControl","placeholderLabel","noEntriesFoundLabel"],[3,"value",4,"ngFor","ngForOf"],[1,"col-span-8"],[4,"ngFor","ngForOf"],[1,"text-right","pt-3"],[1,"link-color","clickable",3,"click"],[1,"text-right"],[1,"btn","btn-secondary",3,"click"],["class","mr-1",4,"ngIf"],[1,"btn","btn-primary-soft","ml-2",3,"click"],[1,"btn","btn-primary","ml-2",3,"click"],[3,"value"],[3,"innerHTML"],[1,"flex","items-center"],[1,"w-full"],[1,"ml-3","text-danger","clickable",3,"click"],[1,"mr-1"]],template:function(n,o){if(1&n&&(e.j41(0,"form",0)(1,"div",1)(2,"ng-scrollbar",2,3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"label",8),e.EFF(9),e.nI1(10,"mytranslate"),e.k0s(),e.j41(11,"div"),e.nrm(12,"input",9),e.k0s()(),e.j41(13,"div",10)(14,"label",8),e.EFF(15),e.nI1(16,"mytranslate"),e.k0s(),e.j41(17,"div"),e.nrm(18,"textarea",11),e.nI1(19,"mytranslate"),e.k0s()(),e.j41(20,"div",12)(21,"label",8),e.EFF(22),e.nI1(23,"mytranslate"),e.k0s(),e.j41(24,"mat-form-field",13)(25,"mat-select",14,15),e.nI1(27,"mytranslate"),e.j41(28,"mat-option"),e.nrm(29,"ngx-mat-select-search",16),e.nI1(30,"mytranslate"),e.nI1(31,"mytranslate"),e.k0s(),e.DNE(32,ct,5,8,"mat-option",17),e.k0s()()()(),e.j41(33,"div",18)(34,"div",12)(35,"label",8),e.EFF(36),e.nI1(37,"mytranslate"),e.k0s(),e.DNE(38,dt,8,7,"div",19),e.j41(39,"div",20)(40,"span",21),e.bIt("click",function(){return o.addMoreExample()}),e.EFF(41),e.nI1(42,"mytranslate"),e.k0s()()()()()()()(),e.j41(43,"div",22)(44,"span",23),e.bIt("click",function(){return o.emitResult()}),e.DNE(45,pt,1,0,"azt-loading-ui",24),e.EFF(46),e.nI1(47,"mytranslate"),e.k0s(),e.j41(48,"span",25),e.bIt("click",function(){return o.saveObj(!1)}),e.DNE(49,_t,1,0,"azt-loading-ui",24),e.EFF(50),e.nI1(51,"mytranslate"),e.k0s(),e.j41(52,"span",26),e.bIt("click",function(){return o.saveObj(!0)}),e.DNE(53,mt,1,0,"azt-loading-ui",24),e.EFF(54),e.nI1(55,"mytranslate"),e.k0s()()()),2&n){const s=e.sdS(26);e.Y8G("formGroup",o.form),e.R7$(2),e.Y8G("visibility","hover"),e.R7$(7),e.JRh(e.bMT(10,24,"lang_tool_knowledge_manage_practice_name")),e.R7$(3),e.Y8G("ngClass",e.eq3(48,ut,o.form.controls.name.invalid))("formControl",o.form.controls.name),e.R7$(3),e.JRh(e.bMT(16,26,"lang_tool_knowledge_manage_practice_description")),e.R7$(3),e.FS9("placeholder",e.bMT(19,28,"lang_tool_knowledge_manage_practice_description")),e.Y8G("formControl",o.form.controls.description),e.R7$(4),e.JRh(e.bMT(23,30,"lang_tool_knowledge_manage_practice_objective")),e.R7$(3),e.FS9("placeholder","---"+e.bMT(27,32,"lang_tool_knowledge_manage_practice_objective_not_selected")+"---"),e.Y8G("formControl",o.form.controls.objectiveId),e.R7$(4),e.FS9("placeholderLabel",e.bMT(30,34,"lang_bot_common_search_by_name")),e.FS9("noEntriesFoundLabel",e.bMT(31,36,"lang_bot_common_search_not_found")),e.Y8G("formControl",s.searchControl),e.R7$(3),e.Y8G("ngForOf",s.filter(o.objectiveObjs,"name")),e.R7$(4),e.JRh(e.bMT(37,38,"lang_tool_knowledge_manage_practice_example")),e.R7$(2),e.Y8G("ngForOf",o.form.controls.examples.controls),e.R7$(3),e.SpI("+ ",e.bMT(42,40,"lang_common_add_more"),""),e.R7$(4),e.Y8G("ngIf",o.statusObj.loading),e.R7$(1),e.SpI(" ",e.bMT(47,42,"lang_cms_common_close_btn")," "),e.R7$(3),e.Y8G("ngIf",o.statusObj.loading),e.R7$(1),e.SpI(" ",e.bMT(51,44,"lang_common_save")," "),e.R7$(3),e.Y8G("ngIf",o.statusObj.loading),e.R7$(1),e.SpI(" ",e.bMT(55,46,"lang_common_save_and_close")," ")}},dependencies:[d.YU,d.Sq,d.bT,r.qT,r.me,r.BC,r.cb,B.wT,D.rl,K.VO,r.l_,r.j4,$.j,y.R,N.x,p.Yh,_.U9,d.Jj,u.wp,u.km,u.ep],encapsulation:2}),a})();function ft(t,a){if(1&t&&(e.j41(0,"mat-option",26),e.nrm(1,"span",27),e.nI1(2,"safeContentQuestion"),e.nI1(3,"async"),e.nI1(4,"mathJaxContent"),e.k0s()),2&t){const i=a.$implicit;e.Y8G("value",i.id),e.R7$(1),e.Y8G("innerHTML",e.bMT(2,2,e.bMT(3,4,e.bMT(4,6,i.name))),e.npT)}}function bt(t,a){if(1&t){const i=e.RV6();e.j41(0,"div")(1,"div",28)(2,"div",29),e.nrm(3,"textarea",11),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"span",30),e.bIt("click",function(){const s=e.eBV(i).$implicit,l=e.XpG();return e.Njj(l.removeExample(s.controls.id.value))}),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()()()}if(2&t){const i=a.$implicit;e.R7$(3),e.FS9("placeholder",e.bMT(4,3,"lang_tool_knowledge_manage_practice_example")),e.Y8G("formControl",i.controls.name),e.R7$(3),e.JRh(e.bMT(7,5,"lang_common_delete"))}}function ht(t,a){1&t&&e.nrm(0,"azt-loading-ui",31)}const vt=function(t){return{"border-danger":t}};let Ct=(()=>{var t;class a extends W{saveObj(n){this.initStatusObj();let o={id:this.obj.id,name:this.form.controls.name.value,description:this.form.controls.description.value?this.form.controls.description.value:void 0,examples:this.form.controls.examples.value.map(s=>s.name?.trim()).filter(s=>""!=s).filter(this.commonService.notEmpty)};this.waitDestroy(this.aiElearningPracticeService.aiApiV1ElearningPracticeUpdatePracticePost(o).subscribe({next:s=>{this.updateObjectiveId(this.obj.id,this.form.controls.objectiveId.value,()=>{this.hasNewResult=!0,this.successStatusObj("lang_cms_update_success",!0),this.emitResult()})},error:s=>this.errorStatusObj(s.error.message,!0)}))}updateObjectiveId(n,o,s){if((this.obj.objectiveId??0)==o)return s();this.waitDestroy(this.aiElearningPracticeService.aiApiV1ElearningPracticeUpdateObjectiveForPracticePost({practiceId:n,objectiveId:o}).subscribe({next:l=>s(),error:l=>{this.errorStatusObj(l.error.message,!0),s()}}))}initFormData(){this.initForm(),this.form.controls.name.setValue(this.obj.name),this.form.controls.description.setValue(this.obj.description??""),this.form.controls.objectiveId.setValue(this.obj.objectiveId??0),this.obj.examples.forEach(n=>{this.form.controls.examples.push(new r.gE({id:new r.MJ(this.sAztUuidService.getUuid(),{nonNullable:!0}),name:new r.MJ(n,{nonNullable:!0})}))}),this.form.controls.examples.controls.length||this.addMoreExample()}ngOnInit(){this.initFormData()}constructor(){super()}}return(t=a).\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.VBU({type:t,selectors:[["app-tools-knowledge-tree-classification-edit-practice"]],inputs:{objectiveObjs:"objectiveObjs",bookContentId:"bookContentId",obj:"obj"},features:[e.Vt3],decls:51,vars:45,consts:[[3,"formGroup"],[2,"height","calc(100vh - 100px)"],["track","vertical","pointerEventsMethod","scrollbar",3,"visibility"],["perfectScroll",""],[1,"pr-3","mb-8"],[1,"grid","grid-cols-12","gap-5"],[1,"col-span-4"],[1,"form-group"],[1,"control-label","font-medium"],["type","text",1,"form-control",3,"ngClass","formControl"],[1,"form-group","mt-3"],["autoResize","",1,"form-control",3,"placeholder","formControl"],[1,"form-group","mt-3","grid"],["appearance","fill",1,"box","mb-5"],["searchInList","",3,"placeholder","formControl"],["searchInListObjective","searchInList"],[3,"formControl","placeholderLabel","noEntriesFoundLabel"],[3,"value",4,"ngFor","ngForOf"],[1,"col-span-8"],[4,"ngFor","ngForOf"],[1,"text-right","pt-3"],[1,"link-color","clickable",3,"click"],[1,"text-right"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-primary","ml-2",3,"click"],["class","mr-1",4,"ngIf"],[3,"value"],[3,"innerHTML"],[1,"flex","items-center"],[1,"w-full"],[1,"ml-3","text-danger","clickable",3,"click"],[1,"mr-1"]],template:function(n,o){if(1&n&&(e.j41(0,"form",0)(1,"div",1)(2,"ng-scrollbar",2,3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"label",8),e.EFF(9),e.nI1(10,"mytranslate"),e.k0s(),e.j41(11,"div"),e.nrm(12,"input",9),e.k0s()(),e.j41(13,"div",10)(14,"label",8),e.EFF(15),e.nI1(16,"mytranslate"),e.k0s(),e.j41(17,"div"),e.nrm(18,"textarea",11),e.nI1(19,"mytranslate"),e.k0s()(),e.j41(20,"div",12)(21,"label",8),e.EFF(22),e.nI1(23,"mytranslate"),e.k0s(),e.j41(24,"mat-form-field",13)(25,"mat-select",14,15),e.nI1(27,"mytranslate"),e.j41(28,"mat-option"),e.nrm(29,"ngx-mat-select-search",16),e.nI1(30,"mytranslate"),e.nI1(31,"mytranslate"),e.k0s(),e.DNE(32,ft,5,8,"mat-option",17),e.k0s()()()(),e.j41(33,"div",18)(34,"div",12)(35,"label",8),e.EFF(36),e.nI1(37,"mytranslate"),e.k0s(),e.DNE(38,bt,8,7,"div",19),e.j41(39,"div",20)(40,"span",21),e.bIt("click",function(){return o.addMoreExample()}),e.EFF(41),e.nI1(42,"mytranslate"),e.k0s()()()()()()()(),e.j41(43,"div",22)(44,"span",23),e.bIt("click",function(){return o.emitResult()}),e.EFF(45),e.nI1(46,"mytranslate"),e.k0s(),e.j41(47,"span",24),e.bIt("click",function(){return o.saveObj(!0)}),e.DNE(48,ht,1,0,"azt-loading-ui",25),e.EFF(49),e.nI1(50,"mytranslate"),e.k0s()()()),2&n){const s=e.sdS(26);e.Y8G("formGroup",o.form),e.R7$(2),e.Y8G("visibility","hover"),e.R7$(7),e.JRh(e.bMT(10,21,"lang_tool_knowledge_manage_practice_name")),e.R7$(3),e.Y8G("ngClass",e.eq3(43,vt,o.form.controls.name.invalid))("formControl",o.form.controls.name),e.R7$(3),e.JRh(e.bMT(16,23,"lang_tool_knowledge_manage_practice_description")),e.R7$(3),e.FS9("placeholder",e.bMT(19,25,"lang_tool_knowledge_manage_practice_description")),e.Y8G("formControl",o.form.controls.description),e.R7$(4),e.JRh(e.bMT(23,27,"lang_tool_knowledge_manage_practice_objective")),e.R7$(3),e.FS9("placeholder","---"+e.bMT(27,29,"lang_tool_knowledge_manage_practice_objective_not_selected")+"---"),e.Y8G("formControl",o.form.controls.objectiveId),e.R7$(4),e.FS9("placeholderLabel",e.bMT(30,31,"lang_bot_common_search_by_name")),e.FS9("noEntriesFoundLabel",e.bMT(31,33,"lang_bot_common_search_not_found")),e.Y8G("formControl",s.searchControl),e.R7$(3),e.Y8G("ngForOf",s.filter(o.objectiveObjs,"name")),e.R7$(4),e.JRh(e.bMT(37,35,"lang_tool_knowledge_manage_practice_example")),e.R7$(2),e.Y8G("ngForOf",o.form.controls.examples.controls),e.R7$(3),e.SpI("+ ",e.bMT(42,37,"lang_common_add_more"),""),e.R7$(4),e.SpI(" ",e.bMT(46,39,"lang_cms_common_close_btn")," "),e.R7$(3),e.Y8G("ngIf",o.statusObj.loading),e.R7$(1),e.SpI(" ",e.bMT(50,41,"lang_common_save_and_close")," ")}},dependencies:[d.YU,d.Sq,d.bT,r.qT,r.me,r.BC,r.cb,B.wT,D.rl,K.VO,r.l_,r.j4,$.j,y.R,N.x,p.Yh,_.U9,d.Jj,u.wp,u.km,u.ep],encapsulation:2}),a})();function Tt(t,a){if(1&t){const i=e.RV6();e.j41(0,"app-tools-knowledge-tree-classification-add-practice",5),e.bIt("saveResultEvent",function(o){e.eBV(i);const s=e.XpG();return e.Njj(s.emitResult(o))}),e.k0s()}if(2&t){const i=e.XpG();e.Y8G("bookContentId",i.data.bookContentId)("objectiveObjs",i.data.objectiveObjs)}}function jt(t,a){if(1&t){const i=e.RV6();e.j41(0,"app-tools-knowledge-tree-classification-edit-practice",6),e.bIt("saveResultEvent",function(o){e.eBV(i);const s=e.XpG();return e.Njj(s.emitResult(o))}),e.k0s()}if(2&t){const i=e.XpG();e.Y8G("bookContentId",i.data.bookContentId)("objectiveObjs",i.data.objectiveObjs)("obj",i.data.obj)}}let Z=(()=>{var t;class a extends H._{emitResult(n){this.dialogRef.close(n)}btnCloseDialog(){this.dialogRef.close(!1)}constructor(n,o){super(o,n),this.dialogRef=n,this.data=o}}return(t=a).\u0275fac=function(n){return new(n||t)(e.rXU(R.CP,8),e.rXU(R.Vh,8))},t.\u0275cmp=e.VBU({type:t,selectors:[["azt-dialog-select-student-account"]],features:[e.Vt3],decls:5,vars:2,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5"],[3,"bookContentId","objectiveObjs","saveResultEvent",4,"ngIf"],[3,"bookContentId","objectiveObjs","obj","saveResultEvent",4,"ngIf"],[3,"bookContentId","objectiveObjs","saveResultEvent"],[3,"bookContentId","objectiveObjs","obj","saveResultEvent"]],template:function(n,o){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2),e.DNE(3,Tt,1,2,"app-tools-knowledge-tree-classification-add-practice",3),e.DNE(4,jt,1,3,"app-tools-knowledge-tree-classification-edit-practice",4),e.k0s()()()),2&n&&(e.R7$(3),e.Y8G("ngIf",!o.data.obj),e.R7$(1),e.Y8G("ngIf",o.data.obj))},dependencies:[d.bT,gt,Ct],encapsulation:2}),a})();var Ot=c(46600);function wt(t,a){if(1&t&&(e.j41(0,"mat-option",10),e.nrm(1,"span",11),e.nI1(2,"safeContentQuestion"),e.nI1(3,"async"),e.nI1(4,"mathJaxContent"),e.k0s()),2&t){const i=a.$implicit;e.Y8G("value",i.id),e.R7$(1),e.Y8G("innerHTML",e.bMT(2,2,e.bMT(3,4,e.bMT(4,6,i.name))),e.npT)}}function xt(t,a){1&t&&e.nrm(0,"azt-loading-ui",12)}let kt=(()=>{var t;class a extends w.H{constructor(){super(...arguments),this.updateEvent=new e.bkB,this.aiElearningPracticeService=(0,e.WQX)(A.UO),this.objectiveIdFormControl=new r.MJ(0,{nonNullable:!0,validators:[]})}updateObj(){let n=this.objectiveIdFormControl.value;(this.obj.objectiveId??0)!=n&&(this.initStatusObj(),this.waitDestroy(this.aiElearningPracticeService.aiApiV1ElearningPracticeUpdateObjectiveForPracticePost({practiceId:this.obj.id,objectiveId:n}).subscribe({next:o=>{this.obj.objectiveId=n,this.obj.objectiveName=this.objectiveObjs.find(s=>s.id==n)?.name??"",this.updateEvent.emit(this.obj),this.successStatusObj("lang_cms_update_success",!0)},error:o=>this.errorStatusObj(o.error.message,!0)})))}ngOnInit(){this.objectiveIdFormControl.setValue(this.obj.objectiveId??0)}}return(t=a).\u0275fac=function(){let i;return function(o){return(i||(i=e.xGo(t)))(o||t)}}(),t.\u0275cmp=e.VBU({type:t,selectors:[["app-tools-knowledge-tree-classification-update-objective"]],inputs:{obj:"obj",objectiveObjs:"objectiveObjs"},outputs:{updateEvent:"updateEvent"},features:[e.Vt3],decls:16,vars:16,consts:[[1,"flex","items-center"],[1,"w-full"],["appearance","fill",1,"box","mb-5","w-full",2,"margin-bottom","0px"],["searchInList","",3,"placeholder","formControl"],["searchInListObjective","searchInList"],[3,"formControl","placeholderLabel","noEntriesFoundLabel"],[3,"value",4,"ngFor","ngForOf"],[1,"flex-none"],[1,"btn","btn-primary","ml-3",3,"click"],["class","mr-1",4,"ngIf"],[3,"value"],[3,"innerHTML"],[1,"mr-1"]],template:function(n,o){if(1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"mat-select",3,4),e.nI1(5,"mytranslate"),e.j41(6,"mat-option"),e.nrm(7,"ngx-mat-select-search",5),e.nI1(8,"mytranslate"),e.nI1(9,"mytranslate"),e.k0s(),e.DNE(10,wt,5,8,"mat-option",6),e.k0s()()(),e.j41(11,"div",7)(12,"span",8),e.bIt("click",function(){return o.updateObj()}),e.DNE(13,xt,1,0,"azt-loading-ui",9),e.EFF(14),e.nI1(15,"mytranslate"),e.k0s()()()),2&n){const s=e.sdS(4);e.R7$(3),e.FS9("placeholder","---"+e.bMT(5,8,"lang_tool_knowledge_manage_practice_objective_not_selected")+"---"),e.Y8G("formControl",o.objectiveIdFormControl),e.R7$(4),e.FS9("placeholderLabel",e.bMT(8,10,"lang_bot_common_search_by_name")),e.FS9("noEntriesFoundLabel",e.bMT(9,12,"lang_bot_common_search_not_found")),e.Y8G("formControl",s.searchControl),e.R7$(3),e.Y8G("ngForOf",s.filter(o.objectiveObjs,"name")),e.R7$(3),e.Y8G("ngIf",o.statusObj.loading),e.R7$(1),e.SpI(" ",e.bMT(15,14,"lang_common_save")," ")}},dependencies:[d.Sq,d.bT,r.BC,B.wT,D.rl,K.VO,r.l_,y.R,N.x,_.U9,d.Jj,u.wp,u.km,u.ep],encapsulation:2}),a})();function It(t,a){if(1&t&&(e.qex(0),e.nrm(1,"div",12),e.nI1(2,"safeContentQuestion"),e.nI1(3,"breakLine"),e.nI1(4,"async"),e.nI1(5,"mathJaxContent"),e.bVm()),2&t){const i=a.$implicit;let n;e.R7$(1),e.Y8G("innerHTML",e.bMT(2,1,e.bMT(3,3,null!==(n=e.bMT(4,5,e.bMT(5,7,"- "+i)))&&void 0!==n?n:"")),e.npT)}}function At(t,a){if(1&t&&(e.nrm(0,"div",7),e.nI1(1,"safeContentQuestion"),e.nI1(2,"async"),e.nI1(3,"mathJaxContent")),2&t){const i=e.XpG().$implicit;e.Y8G("innerHTML",e.bMT(1,1,e.bMT(2,3,e.bMT(3,5,"- "+i.objectiveName))),e.npT)}}function Et(t,a){if(1&t){const i=e.RV6();e.j41(0,"div",13)(1,"span",14),e.bIt("click",function(){e.eBV(i);const o=e.XpG().$implicit,s=e.XpG();return e.Njj(s.splitEvent.emit(o))}),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.EFF(4," \xa0\xa0|\xa0\xa0 "),e.j41(5,"span",15),e.bIt("click",function(){e.eBV(i);const o=e.XpG().$implicit,s=e.XpG();return e.Njj(s.editEvent.emit(o))}),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s(),e.EFF(8," \xa0\xa0|\xa0\xa0 "),e.j41(9,"span",16),e.bIt("click",function(){e.eBV(i);const o=e.XpG().$implicit,s=e.XpG();return e.Njj(s.deleteEvent.emit(o))}),e.EFF(10),e.nI1(11,"mytranslate"),e.k0s()()}2&t&&(e.R7$(2),e.JRh(e.bMT(3,3,"lang_tool_knowledge_manage_split_practice_question_prompt")),e.R7$(4),e.JRh(e.bMT(7,5,"lang_common_edit")),e.R7$(4),e.JRh(e.bMT(11,7,"lang_common_delete")))}function zt(t,a){if(1&t){const i=e.RV6();e.j41(0,"div",17)(1,"app-tools-knowledge-tree-classification-update-objective",18),e.bIt("updateEvent",function(o){e.eBV(i);const s=e.XpG(2);return e.Njj(s.updateEvent.emit(o))}),e.k0s()()}if(2&t){const i=e.XpG().$implicit,n=e.XpG();e.R7$(1),e.Y8G("obj",i)("objectiveObjs",n.objectiveObjs)}}function yt(t,a){if(1&t&&(e.qex(0),e.j41(1,"div",1)(2,"div",2)(3,"div",3),e.nrm(4,"div",4),e.nI1(5,"safeContentQuestion"),e.nI1(6,"async"),e.nI1(7,"mathJaxContent"),e.j41(8,"div",5)(9,"div",6),e.EFF(10),e.nI1(11,"mytranslate"),e.k0s(),e.nrm(12,"div",7),e.nI1(13,"safeContentQuestion"),e.nI1(14,"breakLine"),e.nI1(15,"async"),e.nI1(16,"mathJaxContent"),e.k0s(),e.j41(17,"div",5)(18,"div",6),e.EFF(19),e.nI1(20,"mytranslate"),e.k0s(),e.j41(21,"div",8),e.DNE(22,It,6,9,"ng-container",0),e.k0s()(),e.j41(23,"div",5)(24,"div",6),e.EFF(25),e.nI1(26,"mytranslate"),e.k0s(),e.DNE(27,At,4,7,"div",9),e.k0s()(),e.DNE(28,Et,12,9,"div",10),e.k0s(),e.DNE(29,zt,2,2,"div",11),e.k0s(),e.bVm()),2&t){const i=a.$implicit,n=e.XpG();let o;e.R7$(4),e.Y8G("innerHTML",e.bMT(5,9,e.bMT(6,11,e.bMT(7,13,i.name))),e.npT),e.R7$(6),e.SpI("- ** ",e.bMT(11,15,"lang_tool_knowledge_manage_practice_description")," :**"),e.R7$(2),e.Y8G("innerHTML",e.bMT(13,17,e.bMT(14,19,null!==(o=e.bMT(15,21,e.bMT(16,23,"- "+i.description)))&&void 0!==o?o:"")),e.npT),e.R7$(7),e.SpI("- **",e.bMT(20,25,"lang_tool_knowledge_manage_practice_example"),":**"),e.R7$(3),e.Y8G("ngForOf",i.examples),e.R7$(3),e.SpI("- ** ",e.bMT(26,27,"lang_tool_knowledge_manage_practice_objective")," :**"),e.R7$(2),e.Y8G("ngIf",i.objectiveName),e.R7$(1),e.Y8G("ngIf",n.showAction),e.R7$(1),e.Y8G("ngIf",n.showAction)}}let ee=(()=>{var t;class a extends w.H{constructor(){super(...arguments),this.showAction=!0,this.editEvent=new e.bkB,this.deleteEvent=new e.bkB,this.splitEvent=new e.bkB,this.updateEvent=new e.bkB}}return(t=a).\u0275fac=function(){let i;return function(o){return(i||(i=e.xGo(t)))(o||t)}}(),t.\u0275cmp=e.VBU({type:t,selectors:[["app-tools-knowledge-tree-classification-list-practice-box"]],inputs:{objs:"objs",objectiveObjs:"objectiveObjs",showAction:"showAction"},outputs:{editEvent:"editEvent",deleteEvent:"deleteEvent",splitEvent:"splitEvent",updateEvent:"updateEvent"},features:[e.Vt3],decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[1,"box","p-3","mb-3"],[1,"flex","items-center"],[1,"w-full"],[1,"mb-3",3,"innerHTML"],[1,"mb-3"],[1,"font-medium"],[1,"mt-2",2,"padding-left","20px",3,"innerHTML"],[2,"padding-left","20px"],["class","mt-2","style","padding-left: 20px",3,"innerHTML",4,"ngIf"],["class","flex-none text-right",4,"ngIf"],["class","mt-2",4,"ngIf"],[1,"mt-2",3,"innerHTML"],[1,"flex-none","text-right"],[1,"text-pending","clickable",3,"click"],[1,"link-color","clickable",3,"click"],[1,"text-danger","clickable",3,"click"],[1,"mt-2"],[3,"obj","objectiveObjs","updateEvent"]],template:function(n,o){1&n&&e.DNE(0,yt,30,29,"ng-container",0),2&n&&e.Y8G("ngForOf",o.objs)},dependencies:[d.Sq,d.bT,kt,d.Jj,u.wp,u.km,u.ep,u.bt],encapsulation:2}),a})();function St(t,a){if(1&t&&e.nrm(0,"azt-loading-effect",17),2&t){const i=e.XpG();e.Y8G("currentStatusObj",i.statusObj)}}function Ft(t,a){if(1&t&&(e.j41(0,"div"),e.nrm(1,"app-tools-knowledge-tree-classification-list-practice-box",19),e.k0s()),2&t){const i=e.XpG(2);e.R7$(1),e.Y8G("objs",i.objs)("objectiveObjs",i.data.objectives)("showAction",!1)}}function Rt(t,a){1&t&&(e.j41(0,"div"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t&&(e.R7$(1),e.SpI(" ",e.bMT(2,1,"lang_tool_knowledge_split_practice_without_result")," "))}function Mt(t,a){if(1&t&&(e.DNE(0,Ft,2,3,"div",18),e.DNE(1,Rt,3,3,"div",18)),2&t){const i=e.XpG();e.Y8G("ngIf",i.objs.length>0),e.R7$(1),e.Y8G("ngIf",i.objs.length<=0)}}function Pt(t,a){1&t&&e.nrm(0,"azt-loading-ui",20)}const Gt=function(t){return{"border-danger":t}};let Bt=(()=>{var t;class a extends H._{waitResultApi(n,o,s){this.waitDestroy(this.aiLongRunningTaskService.aiApiV1LongRunningTaskGetLongRunningTaskGet(n).subscribe({next:l=>{if("fail"==l.status)return s("lang_tool_knowledge_split_practice_prompt_fail");if("running"==l.status)return setTimeout(()=>this.waitResultApi(n,o,s),5e3);let C=this.commonService.castJsonToObj(l.result??"");return null==C?s("lang_tool_knowledge_split_practice_prompt_result_invalid_json_data"):o(C)},error:l=>this.errorStatusObj(l.error.message,!0)}))}callPromptApi(){let n={id:this.data.obj.id,prompt:this.promptFormControl.value};this.initStatusObj(),this.objs=[],this.waitDestroy(this.aiElearningPracticeService.aiApiV1ElearningPracticeDividePracticeToDetailSuggestionPost(n).subscribe({next:o=>{this.waitResultApi(o.id,s=>{this.objs=s.map(l=>({...l,id:0,objectiveName:""})),this.stopStatusObj()},s=>this.errorStatusObj(s,!0))},error:o=>this.errorStatusObj(o.error.message,!0)}))}confirmOk(){this.savingData=!1;let n={id:this.data.obj.id,items:this.objs.map(o=>({name:o.name,description:o.description??"",examples:o.examples}))};this.waitDestroy(this.aiElearningPracticeService.aiApiV1ElearningPracticeDividePracticeToDetailPost(n).subscribe({next:o=>{this.successStatusObj("lang_cms_update_success",!0),this.dialogRef.close(!0)},error:o=>this.errorStatusObj(o.error.message,!0)}))}btnCloseDialog(){this.dialogRef.close(!1)}constructor(n,o){super(o,n),this.dialogRef=n,this.data=o,this.aiElearningPracticeService=(0,e.WQX)(A.UO),this.aiLongRunningTaskService=(0,e.WQX)(Ot.Q),this.promptFormControl=new r.MJ("",{nonNullable:!0,validators:[r.k0.required]}),this.objs=[],this.savingData=!1}}return(t=a).\u0275fac=function(n){return new(n||t)(e.rXU(R.CP,8),e.rXU(R.Vh,8))},t.\u0275cmp=e.VBU({type:t,selectors:[["azt-split-practice-dialog"]],features:[e.Vt3],decls:25,vars:22,consts:[[1,"box"],[2,"height","97vh"],[2,"height","calc(100vh - 100px)"],["track","vertical","pointerEventsMethod","scrollbar",3,"visibility"],["perfectScroll",""],[1,"p-3"],[1,"w-full"],["autoResize","",1,"form-control",3,"ngClass","placeholder","formControl"],[1,"text-center","mt-3"],[1,"btn","btn-primary",2,"height","100%",3,"disabled","click"],[1,"mt-3"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],["doneLoading",""],[1,"flex","items-center","justify-end","p-3","w-full","absolute","bg-white","mb-2",2,"bottom","0","z-index","9999"],[1,"btn","btn-secondary","w-32","mr-2",3,"click"],[1,"btn","btn-primary","w-32",3,"disabled","click"],["class","mr-1",4,"ngIf"],[3,"currentStatusObj"],[4,"ngIf"],[3,"objs","objectiveObjs","showAction"],[1,"mr-1"]],template:function(n,o){if(1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"ng-scrollbar",3,4)(5,"div",5)(6,"div",6),e.nrm(7,"textarea",7),e.nI1(8,"mytranslate"),e.k0s(),e.j41(9,"div",8)(10,"button",9),e.bIt("click",function(){return o.callPromptApi()}),e.EFF(11),e.nI1(12,"mytranslate"),e.k0s()(),e.j41(13,"div",10),e.DNE(14,St,1,1,"azt-loading-effect",11),e.DNE(15,Mt,2,2,"ng-template",null,12,e.C5r),e.k0s()()()(),e.j41(17,"div",13)(18,"button",14),e.bIt("click",function(){return o.btnCloseDialog()}),e.EFF(19),e.nI1(20,"mytranslate"),e.k0s(),e.j41(21,"button",15),e.bIt("click",function(){return o.confirmOk()}),e.DNE(22,Pt,1,0,"azt-loading-ui",16),e.EFF(23),e.nI1(24,"mytranslate"),e.k0s()()()()),2&n){const s=e.sdS(16);e.R7$(3),e.Y8G("visibility","hover"),e.R7$(4),e.FS9("placeholder",e.bMT(8,12,"lang_tool_knowledge_split_practice_prompt")),e.Y8G("ngClass",e.eq3(20,Gt,o.promptFormControl.invalid))("formControl",o.promptFormControl),e.R7$(3),e.Y8G("disabled",o.promptFormControl.invalid),e.R7$(1),e.JRh(e.bMT(12,14,"lang_tool_knowledge_split_practice_call_prompt_api")),e.R7$(3),e.Y8G("ngIf",o.statusObj.loading)("ngIfElse",s),e.R7$(5),e.SpI(" ",e.bMT(20,16,"lang_auto_dong")," "),e.R7$(2),e.Y8G("disabled",!o.objs.length),e.R7$(1),e.Y8G("ngIf",o.savingData),e.R7$(1),e.SpI(" ",e.bMT(24,18,"lang_auto_luu")," ")}},dependencies:[d.YU,d.bT,r.me,r.BC,r.l_,z.K,$.j,y.R,p.Yh,ee,u.wp],encapsulation:2}),a})();function Dt(t,a){if(1&t){const i=e.RV6();e.qex(0),e.j41(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),e.bIt("click",function(){const s=e.eBV(i).$implicit,l=e.XpG();return e.Njj(l.collapseByGroupId(null==s?null:s.objectiveObj))}),e.nrm(5,"lucide-icon",5),e.j41(6,"h2",6),e.nrm(7,"span",7),e.nI1(8,"safeContentQuestion"),e.nI1(9,"async"),e.nI1(10,"mathJaxContent"),e.nI1(11,"mytranslate"),e.EFF(12),e.nI1(13,"mytranslate"),e.k0s()()()(),e.j41(14,"div",8)(15,"div",9)(16,"app-tools-knowledge-tree-classification-list-practice-box",10),e.bIt("editEvent",function(o){e.eBV(i);const s=e.XpG();return e.Njj(s.editEvent.emit(o))})("deleteEvent",function(o){e.eBV(i);const s=e.XpG();return e.Njj(s.deleteEvent.emit(o))})("splitEvent",function(o){e.eBV(i);const s=e.XpG();return e.Njj(s.splitEvent.emit(o))})("updateEvent",function(o){e.eBV(i);const s=e.XpG();return e.Njj(s.updateEvent.emit(o))}),e.k0s()()()(),e.bVm()}if(2&t){const i=a.$implicit,n=e.XpG();let o;e.R7$(5),e.Y8G("name",i.isExpand?"chevron-down":"chevron-right")("size",24),e.R7$(2),e.Y8G("innerHTML",e.bMT(8,7,e.bMT(9,9,e.bMT(10,11,null!==(o=null==i||null==i.objectiveObj?null:i.objectiveObj.name)&&void 0!==o?o:e.bMT(11,13,"lang_tool_knowledge_manage_not_select_objective")))),e.npT),e.R7$(5),e.SpI(" ","("+i.childrenObjs.length+" "+e.bMT(13,15,"lang_tool_knowledge_manage_total_children_practice")+")"," "),e.R7$(2),e.Y8G("hidden",!i.isExpand),e.R7$(2),e.Y8G("objs",i.childrenObjs)("objectiveObjs",n.objectiveObjs)}}let Kt=(()=>{var t;class a extends w.H{constructor(){super(...arguments),this.showAction=!0,this.editEvent=new e.bkB,this.deleteEvent=new e.bkB,this.splitEvent=new e.bkB,this.updateEvent=new e.bkB,this.viewObjs=[]}collapseByGroupId(n){let o=this.viewObjs.find(s=>s.objectiveObj?.id==n?.id);o&&(o.isExpand=!o.isExpand)}isExpandAll(){return this.viewObjs.every(n=>n.isExpand)}expandAll(){this.viewObjs.forEach(n=>n.isExpand=!0)}collapseAll(){this.viewObjs.forEach(n=>n.isExpand=!1)}initGroupData(){let n=[];var o=this.commonService.arrayToDictionary(this.objs,l=>(l.objectiveId??"empty").toString());Object.entries(o).forEach(([l,C])=>{let ne=this.commonService.getFirstOfArray(C);if(null==ne)return;let oe=this.objectiveObjs.find(Q=>Q.id==ne?.objectiveId),gn=this.viewObjs.find(Q=>Q.objectiveObj?.id==oe?.id)?.isExpand??!1;n.push({isExpand:gn,objectiveObj:oe,childrenObjs:C})});let s=n.find(l=>null==l.objectiveObj);s&&(n=[s].concat(n.filter(l=>null!=l.objectiveObj))),this.viewObjs=n}ngOnChanges(){this.initGroupData()}}return(t=a).\u0275fac=function(){let i;return function(o){return(i||(i=e.xGo(t)))(o||t)}}(),t.\u0275cmp=e.VBU({type:t,selectors:[["app-tools-knowledge-tree-classification-practice-group-box"]],inputs:{objs:"objs",objectiveObjs:"objectiveObjs",showAction:"showAction"},outputs:{editEvent:"editEvent",deleteEvent:"deleteEvent",splitEvent:"splitEvent",updateEvent:"updateEvent"},features:[e.Vt3,e.OA$],decls:1,vars:1,consts:[[4,"ngFor","ngForOf"],[1,"mb-3"],[1,"flex","items-center"],[1,"font-medium","truncate","mr-3"],[1,"flex","items-center","clickable",3,"click"],[3,"name","size"],[1,"font-medium","truncate"],[3,"innerHTML"],[1,"mt-2",3,"hidden"],[1,"box","p-3"],[3,"objs","objectiveObjs","editEvent","deleteEvent","splitEvent","updateEvent"]],template:function(n,o){1&n&&e.DNE(0,Dt,17,17,"ng-container",0),2&n&&e.Y8G("ngForOf",o.viewObjs)},dependencies:[d.Sq,m.WGl,ee,d.Jj,u.wp,u.km,u.ep],encapsulation:2}),a})();function $t(t,a){if(1&t&&e.nrm(0,"azt-loading-effect",8),2&t){const i=e.XpG();e.Y8G("currentStatusObj",i.statusObj)}}let Nt=(()=>{var t;class a extends w.H{addNew(){this.sAztDialogService.open(Z,{data:{bookContentId:this.bookContentId,objectiveObjs:this.objectiveObjs},restoreFocus:!1,width:"97vw",maxWidth:"97vw",height:"98vh"}).afterClosed().subscribe(o=>{o&&this.initData()})}editObj(n){this.sAztDialogService.open(Z,{data:{bookContentId:this.bookContentId,objectiveObjs:this.objectiveObjs,obj:n},restoreFocus:!1,width:"97vw",maxWidth:"97vw",height:"98vh"}).afterClosed().subscribe(s=>{s&&this.initData()})}deleteObj(n){const o=this.commonService.myTranslateInstant("lang_tool_knowledge_manage_practice_are_your_sure_to_delete_practice")+`: <b>${n.name}<b/>?`;this.sAztDialogService.open(at.u,{data:{content:o},restoreFocus:!1,width:"500px"}).afterClosed().subscribe(s=>{s&&this.waitDestroy(this.aiElearningPracticeService.aiApiV1ElearningPracticeDeletePracticePost({id:n.id}).subscribe({next:l=>{this.objs=this.objs.filter(C=>C.id!=n.id)},error:l=>this.errorStatusObj(l.error.message,!0)}))})}splitObj(n){this.sAztDialogService.open(Bt,{data:{obj:n,objectives:this.objectiveObjs},restoreFocus:!1,width:"97vw",maxWidth:"97vw",height:"98vh"}).afterClosed().subscribe(s=>{s&&this.initData()})}updateObj(n){this.objs=this.objs.map(o=>o.id!=n.id?o:{...n})}getObjectiveInfo(){this.sAztKnowledgeObjectiveService.getKnowledgeByApi(this.schoolLevelId,this.schoolSubjectId,!1,this.bookId,n=>this.curBookContentObj=this.sAztKnowledgeObjectiveService.getObjById(n,this.bookContentId),n=>this.errorStatusObj(n,!0))}initData(){this.initStatusObj(),this.waitDestroy(this.aiElearningPracticeService.aiApiV1ElearningPracticeGetPracticesAndObjectivesOfBookContentGet(this.bookContentId).subscribe({next:n=>{this.objectiveObjs=n.objectives,this.objs=n.practices.map(o=>({...o,objectiveName:n.objectives.find(s=>s.id==o.objectiveId)?.name??""})),this.stopStatusObj()},error:n=>this.errorStatusObj(n.error.message,!0)}))}ngOnInit(){super.ngOnInit(),this.commonService.translateMetaData({title:"lang_cms_admin_tools_knowledge_tree_manage_practice_title",description:"lang_cms_admin_tools_knowledge_tree_manage_practice_title",image:"lang_cms_test_image"}),this.schoolLevelId=Number(this.commonService.getMyParam(this.activeRoute,"levelId")??0),this.schoolSubjectId=Number(this.commonService.getMyParam(this.activeRoute,"subjectId")??0),this.bookId=Number(this.commonService.getMyParam(this.activeRoute,"bookId")??0),this.bookContentId=Number(this.commonService.getMyParam(this.activeRoute,"bookContentId")??0),this.backTo="/azota-tools/knowledge-tree-classification/"+this.schoolLevelId+"/"+this.schoolSubjectId+"/"+this.bookId,this.initData(),this.getObjectiveInfo()}constructor(n){super(),this.activeRoute=n,this.aiElearningPracticeService=(0,e.WQX)(rt.U),this.sAztDialogService=(0,e.WQX)(V.i),this.sAztKnowledgeObjectiveService=(0,e.WQX)(L.n),this.schoolLevelId=0,this.schoolSubjectId=0,this.bookId=0,this.bookContentId=0,this.curBookContentObj=void 0,this.objectiveObjs=[],this.backTo="",this.objs=[]}}return(t=a).\u0275fac=function(n){return new(n||t)(e.rXU(b.nX))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-tools-knowledge-tree-classification-manage-practice"]],features:[e.Vt3],decls:14,vars:14,consts:[[3,"headerBackToLink"],[1,"pt-3"],[1,"flex","items-center"],[1,"w-full",3,"innerHTML"],[1,"flex-none"],[1,"btn","btn-primary",3,"click"],[3,"currentStatusObj",4,"ngIf"],[3,"objs","objectiveObjs","editEvent","deleteEvent","splitEvent","updateEvent"],[3,"currentStatusObj"]],template:function(n,o){1&n&&(e.j41(0,"teacher-layout",0)(1,"div",1)(2,"div",2),e.nrm(3,"div",3),e.nI1(4,"safeContentQuestion"),e.nI1(5,"async"),e.nI1(6,"mathJaxContent"),e.j41(7,"div",4)(8,"span",5),e.bIt("click",function(){return o.addNew()}),e.EFF(9),e.nI1(10,"mytranslate"),e.k0s()()(),e.j41(11,"div",1),e.DNE(12,$t,1,1,"azt-loading-effect",6),e.j41(13,"app-tools-knowledge-tree-classification-practice-group-box",7),e.bIt("editEvent",function(l){return o.editObj(l)})("deleteEvent",function(l){return o.deleteObj(l)})("splitEvent",function(l){return o.splitObj(l)})("updateEvent",function(l){return o.updateObj(l)}),e.k0s()()()()),2&n&&(e.Y8G("headerBackToLink",o.backTo),e.R7$(3),e.Y8G("innerHTML",e.bMT(4,6,e.bMT(5,8,e.bMT(6,10,null==o.curBookContentObj?null:o.curBookContentObj.title))),e.npT),e.R7$(6),e.JRh(e.bMT(10,12,"lang_common_create")),e.R7$(3),e.Y8G("ngIf",o.statusObj.loading),e.R7$(1),e.Y8G("objs",o.objs)("objectiveObjs",o.objectiveObjs))},dependencies:[d.bT,z.K,F.Q,Kt,d.Jj,u.wp,u.km,u.ep],encapsulation:2}),a})();var Qt=c(99927);let Vt=(()=>{var t;class a{constructor(){this.recognition=1,this.understanding=2,this.practicalApplication=3,this.higherLevelApplication=4}isRecognition(n){return n==this.recognition}isUnderstanding(n){return n==this.understanding}isPracticalApplication(n){return n==this.practicalApplication}isHigherLevelApplication(n){return n==this.higherLevelApplication}}return(t=a).\u0275fac=function(n){return new(n||t)},t.\u0275prov=e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"}),a})();function Lt(t,a){if(1&t&&(e.j41(0,"th",10),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t){const i=a.$implicit;e.R7$(1),e.JRh(e.bMT(2,1,"lang_tool_knowledge_answer_type_"+i))}}function Yt(t,a){if(1&t&&(e.j41(0,"th",12),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t){const i=a.$implicit;e.R7$(1),e.JRh(e.bMT(2,1,"lang_tool_knowledge_difficulty_index_"+i))}}function Xt(t,a){if(1&t&&(e.qex(0),e.DNE(1,Yt,3,3,"th",11),e.bVm()),2&t){const i=e.XpG();e.R7$(1),e.Y8G("ngForOf",i.difficultyIndexes)}}function Ut(t,a){1&t&&e.eu8(0)}function qt(t,a){1&t&&e.nrm(0,"lucide-icon",21)}function Jt(t,a){1&t&&e.nrm(0,"lucide-icon",22)}function Ht(t,a){if(1&t&&(e.j41(0,"i"),e.DNE(1,qt,1,0,"lucide-icon",19),e.DNE(2,Jt,1,0,"lucide-icon",20),e.k0s()),2&t){const i=e.XpG().$implicit;e.R7$(1),e.Y8G("ngIf",i.isExpand),e.R7$(1),e.Y8G("ngIf",!i.isExpand)}}function Wt(t,a){1&t&&(e.j41(0,"i"),e.nrm(1,"lucide-icon",23),e.k0s())}const Zt=function(t){return{"text-danger":t}};function en(t,a){if(1&t&&(e.qex(0),e.j41(1,"td",24),e.EFF(2),e.k0s(),e.bVm()),2&t){const i=a.$implicit,n=e.XpG().$implicit,o=e.XpG().$implicit,s=e.XpG(3);let l,C;e.R7$(1),e.Y8G("ngClass",e.eq3(2,Zt,(null!==(l=null==(l=s.findQuestionObj(o.data.questions,n,i))?null:l.total)&&void 0!==l?l:0)<=s.filterTotalQuestionFormControl.value)),e.R7$(1),e.SpI(" ",null!==(C=null==(C=s.findQuestionObj(o.data.questions,n,i))?null:C.total)&&void 0!==C?C:0," ")}}function tn(t,a){if(1&t&&(e.qex(0),e.DNE(1,en,3,4,"ng-container",7),e.bVm()),2&t){const i=e.XpG(4);e.R7$(1),e.Y8G("ngForOf",i.difficultyIndexes)}}function nn(t,a){1&t&&e.eu8(0)}const te=function(t){return{nodeObjs:t}};function on(t,a){if(1&t&&(e.qex(0),e.DNE(1,nn,1,0,"ng-container",8),e.bVm()),2&t){const i=e.XpG().$implicit;e.XpG(3);const n=e.sdS(17);e.R7$(1),e.Y8G("ngTemplateOutlet",n)("ngTemplateOutletContext",e.eq3(2,te,i.children))}}function sn(t,a){if(1&t){const i=e.RV6();e.qex(0),e.j41(1,"tr",14)(2,"td",15)(3,"div",16),e.bIt("click",function(){const s=e.eBV(i).$implicit,l=e.XpG(3);return e.Njj(l.clickToNode(s))}),e.DNE(4,Ht,3,2,"i",13),e.DNE(5,Wt,2,0,"i",13),e.j41(6,"label",17),e.nrm(7,"span",18),e.nI1(8,"safeContentQuestion"),e.nI1(9,"async"),e.nI1(10,"mathJaxContent"),e.k0s()()(),e.DNE(11,tn,2,1,"ng-container",7),e.k0s(),e.DNE(12,on,2,4,"ng-container",13),e.bVm()}if(2&t){const i=a.$implicit,n=e.XpG(3);e.R7$(1),e.Y8G("hidden",!i.isShow),e.R7$(1),e.xc7("padding-left",14*(i.level+1),"px"),e.R7$(2),e.Y8G("ngIf",i.children.length),e.R7$(1),e.Y8G("ngIf",!i.children.length),e.R7$(2),e.Y8G("innerHTML",e.bMT(8,8,e.bMT(9,10,e.bMT(10,12,"L"+(i.level+1)+". "+i.text))),e.npT),e.R7$(4),e.Y8G("ngForOf",n.answerTypes),e.R7$(1),e.Y8G("ngIf",i.isExpand)}}function an(t,a){if(1&t&&(e.qex(0),e.DNE(1,sn,13,14,"ng-container",7),e.bVm()),2&t){const i=a.$implicit;e.R7$(1),e.Y8G("ngForOf",i)}}function rn(t,a){if(1&t&&e.DNE(0,an,2,1,"ng-container",13),2&t){const i=a.nodeObjs,n=e.XpG();e.Y8G("ngIf",n.asTemplateDataObj(i))}}let ln=(()=>{var t;class a extends U.C{constructor(){super(...arguments),this.nodeObjs=[],this.filterTotalQuestionFormControl=new r.MJ(20,{nonNullable:!0}),this.sAztAnswerTypeService=(0,e.WQX)(Qt._),this.sAztQuestionDifficultyIndexService=(0,e.WQX)(Vt),this.answerTypes=[this.sAztAnswerTypeService.oneChoiceAnswer,this.sAztAnswerTypeService.fillAnswer,this.sAztAnswerTypeService.trueFalseAnswer],this.difficultyIndexes=[this.sAztQuestionDifficultyIndexService.recognition,this.sAztQuestionDifficultyIndexService.understanding,this.sAztQuestionDifficultyIndexService.practicalApplication]}clickToNode(n){n.children.length&&(n.isExpand?this.collapse(n):this.expand(n))}findQuestionObj(n,o,s){return n.find(l=>l.answerType==o&&l.difficultyIndex==s)}asTemplateDataObj(n){return n}standardTreeNodes(n,o){let s=[];return n.forEach(l=>{let C={level:o,typeNode:l.objectiveId?"objective":"knowledge",isExpand:!0,isShow:!0,isSelected:!1,text:l.title,data:{...l,children:[]},children:[]};C.children=this.standardTreeNodes(l.children,o+1),s.push(C)}),s}ngOnInit(){this.nodeObjs=this.standardTreeNodes(this.rawNodes,0)}}return(t=a).\u0275fac=function(){let i;return function(o){return(i||(i=e.xGo(t)))(o||t)}}(),t.\u0275cmp=e.VBU({type:t,selectors:[["app-tools-view-knowledge-tree-for-statistic"]],inputs:{rawNodes:"rawNodes"},features:[e.Vt3],decls:18,vars:10,consts:[[1,"mb-3","box","p-3"],[1,"flex","items-center"],[1,"mr-2","flex-none"],["type","number","min","0",1,"form-control","ml-2",3,"formControl"],[1,"table","table-report"],["rowspan","2",1,"text-center"],["colspan","3","class","text-center",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["recursiveListTmpl",""],["colspan","3",1,"text-center"],["class","text-center",4,"ngFor","ngForOf"],[1,"text-center"],[4,"ngIf"],[3,"hidden"],[2,"max-width","500px"],[1,"clickable",3,"click"],[1,"form-check-label"],[3,"innerHTML"],["name","chevron-down","size","14",4,"ngIf"],["name","chevron-right","size","14",4,"ngIf"],["name","chevron-down","size","14"],["name","chevron-right","size","14"],["name","send-horizontal","size","14"],[1,"text-center",3,"ngClass"]],template:function(n,o){if(1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"label",2),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.nrm(5,"input",3),e.k0s()(),e.j41(6,"table",4)(7,"thead")(8,"tr")(9,"th",5),e.EFF(10,"\xa0"),e.k0s(),e.DNE(11,Lt,3,3,"th",6),e.k0s(),e.j41(12,"tr"),e.DNE(13,Xt,2,1,"ng-container",7),e.k0s()(),e.j41(14,"tbody"),e.DNE(15,Ut,1,0,"ng-container",8),e.k0s()(),e.DNE(16,rn,1,1,"ng-template",null,9,e.C5r)),2&n){const s=e.sdS(17);e.R7$(3),e.JRh(e.bMT(4,6,"lang_tool_knowledge_filter_by_total_question")),e.R7$(2),e.Y8G("formControl",o.filterTotalQuestionFormControl),e.R7$(6),e.Y8G("ngForOf",o.answerTypes),e.R7$(2),e.Y8G("ngForOf",o.answerTypes),e.R7$(2),e.Y8G("ngTemplateOutlet",s)("ngTemplateOutletContext",e.eq3(8,te,o.nodeObjs))}},dependencies:[d.YU,d.Sq,d.bT,d.T3,r.me,r.Q0,r.BC,r.VZ,r.l_,m.WGl,d.Jj,u.wp,u.km,u.ep],styles:["th[_ngcontent-%COMP%]{background-color:#f4f4f4;border:1px solid #ccc}.table-report[_ngcontent-%COMP%]{border-spacing:0 2px!important}"]}),a})();function cn(t,a){if(1&t&&e.nrm(0,"azt-loading-effect",5),2&t){const i=e.XpG();e.Y8G("currentStatusObj",i.statusObj)}}function dn(t,a){if(1&t&&e.nrm(0,"app-tools-view-knowledge-tree-for-statistic",7),2&t){const i=e.XpG(2);e.Y8G("rawNodes",i.nodes)}}function pn(t,a){if(1&t&&e.DNE(0,dn,1,1,"app-tools-view-knowledge-tree-for-statistic",6),2&t){const i=e.XpG();e.Y8G("ngIf",i.nodes.length)}}const _n=[{path:"",children:[{path:"knowledge-tree-statistic/:levelId/:subjectId/:bookId",component:(()=>{var t;class a extends w.H{changeLevelSubjectBookEvent(){let n=this.form.getRawValue();this.commonService.myNavigation("/azota-tools/knowledge-tree-statistic/"+n.schoolLevel+"/"+n.schoolSubject+"/"+n.bookIdFormControl),this.initStatusObj(),this.waitDestroy(this.aiElearningService.aiApiV1ElearningGetKnowledgeTreeGet(n.schoolLevel,n.schoolSubject,!0,n.bookIdFormControl>0?n.bookIdFormControl:void 0).subscribe({next:o=>{this.nodes=o.nodes,this.stopStatusObj()},error:o=>{this.nodes=[],this.errorStatusObj(o.error.message,!0)}}))}ngOnInit(){super.ngOnInit(),this.commonService.translateMetaData({title:"lang_cms_admin_tools_knowledge_tree_statistic_title",description:"lang_cms_admin_tools_knowledge_tree_statistic_title",image:"lang_cms_test_image"});let n=Number(this.commonService.getMyParam(this.activeRoute,"levelId")??0),o=Number(this.commonService.getMyParam(this.activeRoute,"subjectId")??0),s=Number(this.commonService.getMyParam(this.activeRoute,"bookId")??0);this.form.controls.schoolLevel.setValue(n),this.form.controls.schoolSubject.setValue(o),this.form.controls.bookIdFormControl.setValue(s)}constructor(n,o){super(),this.aiElearningService=n,this.activeRoute=o,this.backTo="/super-role/admin-tool",this.nodes=[],this.form=new r.gE({schoolLevel:new r.MJ(0,{nonNullable:!0}),schoolSubject:new r.MJ(0,{nonNullable:!0}),bookIdFormControl:new r.MJ(0,{nonNullable:!0})})}}return(t=a).\u0275fac=function(n){return new(n||t)(e.rXU(A.T5),e.rXU(b.nX))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-tools-knowledge-tree-statistic"]],features:[e.Vt3],decls:6,vars:8,consts:[[3,"headerBackToLink"],[1,"mt-3","mb-3"],[3,"form","removeLevelSubjectWithOtherName","showBookData","useFirstAsDefault","layout","changeDataEvent"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],["doneLoading",""],[3,"currentStatusObj"],[3,"rawNodes",4,"ngIf"],[3,"rawNodes"]],template:function(n,o){if(1&n&&(e.j41(0,"teacher-layout",0)(1,"div",1)(2,"config-level-subject-book",2),e.bIt("changeDataEvent",function(){return o.changeLevelSubjectBookEvent()}),e.k0s()(),e.DNE(3,cn,1,1,"azt-loading-effect",3),e.DNE(4,pn,1,1,"ng-template",null,4,e.C5r),e.k0s()),2&n){const s=e.sdS(5);e.Y8G("headerBackToLink",o.backTo),e.R7$(2),e.Y8G("form",o.form)("removeLevelSubjectWithOtherName",!0)("showBookData",!0)("useFirstAsDefault",!0)("layout","label_in_one_line"),e.R7$(1),e.Y8G("ngIf",o.statusObj.loading)("ngIfElse",s)}},dependencies:[d.bT,z.K,X.X,F.Q,ln],encapsulation:2}),a})()},{path:"knowledge-tree-classification/:levelId/:subjectId/:bookId",component:st},{path:"knowledge-tree-approve-classification-for-objective/:levelId/:subjectId/:bookId/:objectiveId",component:Ke},{path:"knowledge-tree-manage-practice/:levelId/:subjectId/:bookId/:bookContentId",component:Nt}]}];let mn=(()=>{var t;class a{}return(t=a).\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[b.iI.forChild(_n),b.iI,M.XE]}),a})(),un=(()=>{var t;class a{}return(t=a).\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({providers:[{provide:h.vn,useValue:I.c.azt_tiny_mce_script_src}],imports:[b.iI,d.MD,r.YN,h.sv,v.s,r.X1,mn,O.Q,j.L,p.Id,k.b,m.flO.pick(m.Ptg),g.AC,f.DL,_.An]}),a})()}}]);