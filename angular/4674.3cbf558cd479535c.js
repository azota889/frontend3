"use strict";(self.webpackChunkBalacoClient=self.webpackChunkBalacoClient||[]).push([[4674],{43166:(w,C,s)=>{s.d(C,{x:()=>c});var O=s(10936),u=s(48891),e=s(62095);let c=(()=>{var a;class p{filter(t,n){return null==t?[]:t=t.filter(r=>this.removeAllSpecialChars((null!=n?r[n]:r).toString()).includes(this.removeAllSpecialChars(this.searchControl.value)))}mergeSchoolLevel(t){let n=[];return t.forEach(r=>null!=r.schoolLevel&&n.push(r.schoolLevel)),n}removeAllSpecialChars(t){return t=(t=this.commonService.myTranslateInstant(t)??t).toLowerCase().trim(),t=this.commonService.convertVietnameseToEnglish(t),t=this.commonService.removeSpecialStringInSearch(t),(t=this.commonService.removeNonAlphabetic(t)).toLowerCase().trim()}constructor(t){this.commonService=t,this.searchControl=new O.MJ("",{nonNullable:!0})}}return(a=p).\u0275fac=function(t){return new(t||a)(u.rXU(e.R))},a.\u0275dir=u.FsC({type:a,selectors:[["","searchInList",""]],exportAs:["searchInList"]}),p})()},50334:(w,C,s)=>{s.d(C,{C:()=>u});var O=s(59640);class u extends O.H{constructor(){super(...arguments),this.nodeObjs=[]}searchByText(c){this.nodeObjs=(c=this.standardSearchText(c)).trim()?this.doSearchByText(c,this.nodeObjs,[]):this.showAndExpandAll(this.nodeObjs)}expand(c){c.isExpand=!0}collapse(c){c.isExpand=!1}doSearchByText(c,a,p){for(var g of a){g.isShow=!1;let t=this.standardSearchText(g.text);(c.includes(t)||t.includes(c))&&(g.isShow=!0,g.isExpand=!0,p.forEach(n=>{n.isShow=!0,n.isExpand=!0})),g.children.length&&(g.children=this.doSearchByText(c,g.children,p.concat(g)))}return a}showAndExpandAll(c){for(var a of c)a.isShow=!0,a.isExpand=!0,a.children=this.showAndExpandAll(a.children);return c}standardSearchText(c){return c=c.toLowerCase(),c=this.commonService.removeSpecialStringInSearch(c),this.commonService.convertVietnameseToEnglish(c)}}},11002:(w,C,s)=>{s.d(C,{$:()=>c});var O=s(59640),u=s(48891);const e=["*"];let c=(()=>{var a;class p extends O.H{constructor(){super(...arguments),this.colorBackground="",this.defaultHeight="45px",this.fixToTopWidth=0,this.fixToTopTop=0}onWindowScroll(){let t=document.querySelector(".azt-content"),n=document.getElementById("flexed-on-top"),r=document.getElementById("position-dev")?.getBoundingClientRect();if(!t||!n||!r)return;let d=window.pageYOffset,v=r.top,T=v<-50;if(this.fixToTopWidth=r.width,this.fixToTopTop=r.top,T){n.style.position="fixed",n.style.zIndex="9999",n.style.height=this.defaultHeight,n.style.right=this.isMobileWebView?"0":"12px",n.style.background=this.colorBackground,n.style.justifyContent="end";let j=t.getBoundingClientRect().width;this.isMobileDevice?(n.style.top="62px",n.style.padding="6px 15px",n.style.width=(j+32).toString()+"px"):(n.style.top="0",n.style.padding="6px 22px",n.style.width=(j+44).toString()+"px")}else(0==d||0==v)&&(n.style.position="",n.style.top="",n.style.right="",n.style.zIndex="",n.style.height="",n.style.padding="",n.style.background="",n.style.width="",n.style.justifyContent="")}}return(a=p).\u0275fac=(()=>{let g;return function(n){return(g||(g=u.xGo(a)))(n||a)}})(),a.\u0275cmp=u.VBU({type:a,selectors:[["flexed-on-the-top"]],hostBindings:function(t,n){1&t&&u.bIt("scroll",function(d){return n.onWindowScroll(d)},!1,u.tSv)},inputs:{colorBackground:"colorBackground",defaultHeight:"defaultHeight"},features:[u.Vt3],ngContentSelectors:e,decls:3,vars:0,consts:[["id","position-dev"],["id","flexed-on-top",1,"flex","flexed-on-top"]],template:function(t,n){1&t&&(u.NAR(),u.nrm(0,"div",0),u.j41(1,"div",1),u.SdG(2),u.k0s())},encapsulation:2}),p})()},2433:(w,C,s)=>{s.d(C,{h:()=>c});var O=s(48891),u=s(85710),e=s(17776);let c=(()=>{var a;class p{constructor(){this.subscriptions=new u.yU,this.aiElearningService=(0,O.WQX)(e.T5),this.cacheData=[]}getKnowledgeByApi(t,n,r,d,v,T){let j=this.getCacheKey(t,n,r,d),S=this.cacheData.find(b=>b.cacheKey==j);if(null!=S)return v(S.nodes);this.subscriptions.add(this.aiElearningService.aiApiV1ElearningGetKnowledgeTreeGet(t,n,r,d||void 0).subscribe({next:b=>{this.cacheData.push({cacheKey:j,nodes:b.nodes??[]}),v(b.nodes??[])},error:b=>T(b)}))}getObjByObjectiveId(t,n){for(var r of t){if(r.objectiveId==n)return r;let d=this.getObjByObjectiveId(r.children,n);if(null!=d)return d}}getObjById(t,n){for(var r of t){if(r.id==n)return r;let d=this.getObjById(r.children,n);if(null!=d)return d}}getObjByKnowledgeIdOrObjectiveId(t,n,r){for(var d of t){if(d.knowledgeId==n||d.objectiveId==r)return d;let v=this.getObjByKnowledgeIdOrObjectiveId(d.children,n,r);if(null!=v)return v}}getAllObjectiveObjs(t,n){return t.forEach(r=>{r.objectiveId&&n.push({id:r.objectiveId,name:r.title,questionHistories:[]}),r.children.length&&(n=n.concat(this.getAllObjectiveObjs(r.children,[])))}),n}getCacheKey(t,n,r,d){return`${t}_${n}_${r?"true":"false"}_${d??0}`}ngOnDestroy(){this.subscriptions.unsubscribe()}}return(a=p).\u0275fac=function(t){return new(t||a)},a.\u0275prov=O.jDH({token:a,factory:a.\u0275fac,providedIn:"root"}),p})()},36318:(w,C,s)=>{s.d(C,{G:()=>R});var O=s(89163),u=s(33887),e=s(48891),c=s(2915),a=s(32099),p=s(50334),g=s(2433),t=s(54460),n=s(15343),r=s(18718),d=s(76975);const v=o=>({nodeObjs:o}),T=(o,_)=>({"text-pending":o," link-color-hover":_});function j(o,_){if(1&o&&e.nrm(0,"azt-loading-effect",3),2&o){const l=e.XpG();e.Y8G("currentStatusObj",l.statusObj)}}function S(o,_){1&o&&e.eu8(0)}function b(o,_){if(1&o&&(e.j41(0,"table")(1,"tbody"),e.DNE(2,S,1,0,"ng-container",4),e.k0s()()),2&o){const l=e.XpG(),i=e.sdS(4);e.R7$(2),e.Y8G("ngTemplateOutlet",i)("ngTemplateOutletContext",e.eq3(2,v,l.nodeObjs))}}function y(o,_){1&o&&e.nrm(0,"lucide-icon",13)}function A(o,_){1&o&&e.nrm(0,"lucide-icon",14)}function K(o,_){if(1&o&&(e.j41(0,"i"),e.DNE(1,y,1,0,"lucide-icon",11)(2,A,1,0,"lucide-icon",12),e.k0s()),2&o){const l=e.XpG().$implicit;e.R7$(),e.Y8G("ngIf",l.isExpand),e.R7$(),e.Y8G("ngIf",!l.isExpand)}}function z(o,_){1&o&&(e.j41(0,"i"),e.nrm(1,"lucide-icon",15),e.k0s())}function E(o,_){1&o&&e.eu8(0)}function F(o,_){if(1&o&&(e.qex(0),e.DNE(1,E,1,0,"ng-container",4),e.bVm()),2&o){const l=e.XpG().$implicit;e.XpG(3);const i=e.sdS(4);e.R7$(),e.Y8G("ngTemplateOutlet",i)("ngTemplateOutletContext",e.eq3(2,v,l.children))}}function D(o,_){if(1&o){const l=e.RV6();e.qex(0),e.j41(1,"tr",7)(2,"td")(3,"div",8),e.bIt("click",function(){const m=e.eBV(l).$implicit,f=e.XpG(3);return e.Njj(f.clickToNode(m))}),e.DNE(4,K,3,2,"i",5)(5,z,2,0,"i",5),e.j41(6,"label",9),e.nrm(7,"span",10),e.nI1(8,"mathJaxContent"),e.nI1(9,"async"),e.nI1(10,"safeContentQuestion"),e.k0s()()()(),e.DNE(11,F,2,4,"ng-container",5),e.bVm()}if(2&o){const l=_.$implicit;e.R7$(),e.Y8G("hidden",!l.isShow),e.R7$(),e.xc7("padding-left",14*(l.level+1),"px"),e.R7$(),e.Y8G("ngClass",e.l_i(14,T,l.isSelected,!l.isSelected)),e.R7$(),e.Y8G("ngIf",l.children.length),e.R7$(),e.Y8G("ngIf",!l.children.length),e.R7$(2),e.Y8G("innerHTML",e.bMT(10,12,e.bMT(9,10,e.bMT(8,8,"L"+(l.level+1)+". "+l.text))),e.npT),e.R7$(4),e.Y8G("ngIf",l.isExpand)}}function B(o,_){if(1&o&&(e.qex(0),e.DNE(1,D,12,17,"ng-container",6),e.bVm()),2&o){const l=_.$implicit;e.R7$(),e.Y8G("ngForOf",l)}}function k(o,_){if(1&o&&e.DNE(0,B,2,1,"ng-container",5),2&o){const l=_.nodeObjs,i=e.XpG();e.Y8G("ngIf",i.asTemplateDataObj(l))}}let Q=(()=>{var o;class _ extends p.C{constructor(){super(...arguments),this.allowSelectKnowledgeOrObjective="only_objective",this.selectKnowledgeOrObjectiveEvent=new e.bkB,this.nodeObjs=[],this.sAztKnowledgeObjectiveService=(0,e.WQX)(g.h)}clickToNode(i){return"only_objective"==this.allowSelectKnowledgeOrObjective&&i.data.objectiveId||"knowledge_or_objective"==this.allowSelectKnowledgeOrObjective&&(i.data.knowledgeId||i.data.objectiveId)?this.selectKnowledgeOrObjectiveEvent.emit(i.data):void(i.isExpand?this.collapse(i):this.expand(i))}asTemplateDataObj(i){return i}initData(i,m,f){this.initStatusObj(),this.sAztKnowledgeObjectiveService.getKnowledgeByApi(i,m,!1,f,h=>{this.nodeObjs=this.standardTreeNodes(h,0),this.stopStatusObj()},h=>this.errorStatusObj(h,!0))}standardTreeNodes(i,m){let f=[];return i.forEach(h=>{let I=!1;this.selectedObj?.knowledgeId&&h.knowledgeId==this.selectedObj.knowledgeId&&(I=!0),this.selectedObj?.objectiveId&&h.objectiveId==this.selectedObj.objectiveId&&(I=!0);let x={level:m,typeNode:h.objectiveId?"objective":"knowledge",isExpand:!0,isShow:!0,isSelected:I,text:h.title,data:{...h,children:[]},children:[]};x.children=this.standardTreeNodes(h.children,m+1),f.push(x)}),f}ngOnChanges(i){i.searchContent&&this.searchByText(this.searchContent??"")}ngOnInit(){super.ngOnInit(),this.initData(this.levelId,this.subjectId,this.bookId)}}return(o=_).\u0275fac=(()=>{let l;return function(m){return(l||(l=e.xGo(o)))(m||o)}})(),o.\u0275cmp=e.VBU({type:o,selectors:[["coazt-knowledge-objective-tree-for-common-question"]],inputs:{levelId:"levelId",subjectId:"subjectId",bookId:"bookId",selectedObj:"selectedObj",searchContent:"searchContent",allowSelectKnowledgeOrObjective:"allowSelectKnowledgeOrObjective"},outputs:{selectKnowledgeOrObjectiveEvent:"selectKnowledgeOrObjectiveEvent"},features:[e.Vt3,e.OA$],decls:5,vars:2,consts:[["doneLoading",""],["recursiveListTmpl",""],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"hidden"],[1,"clickable",3,"click","ngClass"],[1,"form-check-label",2,"line-height","1.5"],[3,"innerHTML"],["name","chevron-down","size","14",4,"ngIf"],["name","chevron-right","size","14",4,"ngIf"],["name","chevron-down","size","14"],["name","chevron-right","size","14"],["name","dot","size","14"]],template:function(i,m){if(1&i&&e.DNE(0,j,1,1,"azt-loading-effect",2)(1,b,3,4,"ng-template",null,0,e.C5r)(3,k,1,1,"ng-template",null,1,e.C5r),2&i){const f=e.sdS(2);e.Y8G("ngIf",m.statusObj.loading)("ngIfElse",f)}},dependencies:[t.YU,t.Sq,t.bT,t.T3,n.WGl,r.K,t.Jj,d.km,d.ep],encapsulation:2}),_})(),R=(()=>{var o;class _ extends u._{searchByText(i){this.searchContent=i}selectKnowledgeOrObjective(i){this.dialogRef.close(i)}btnCloseDialog(){this.dialogRef.close(void 0)}constructor(i,m){super(m,i),this.dialogRef=i,this.data=m}}return(o=_).\u0275fac=function(i){return new(i||o)(e.rXU(O.CP,8),e.rXU(O.Vh,8))},o.\u0275cmp=e.VBU({type:o,selectors:[["coazt-knowledge-objective-dialog-for-common-question"]],features:[e.Vt3],decls:12,vars:14,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"box","p-3"],[1,"pb-3"],[3,"onSearch","isServerSearch","placeholder"],[3,"minHeight"],[3,"selectKnowledgeOrObjectiveEvent","levelId","subjectId","bookId","selectedObj","searchContent","allowSelectKnowledgeOrObjective"],[1,"text-right","border-t","border-slate-200","dark:border-darkmode-400","p-3"],[1,"btn","btn-secondary","w-24",3,"click"]],template:function(i,m){1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"azt-search-box",4),e.nI1(5,"mytranslate"),e.bIt("onSearch",function(h){return m.searchByText(h.searchObj)}),e.k0s()(),e.j41(6,"azt-mat-dialog-content",5)(7,"coazt-knowledge-objective-tree-for-common-question",6),e.bIt("selectKnowledgeOrObjectiveEvent",function(h){return m.selectKnowledgeOrObjective(h)}),e.k0s()()(),e.j41(8,"div",7)(9,"button",8),e.bIt("click",function(){return m.btnCloseDialog()}),e.EFF(10),e.nI1(11,"mytranslate"),e.k0s()()()()),2&i&&(e.R7$(4),e.Y8G("isServerSearch",!1)("placeholder",e.bMT(5,10,"lang_common_search_by_name")),e.R7$(2),e.Y8G("minHeight","calc(var(--vh, 1vh) * 100 - 300px)"),e.R7$(),e.Y8G("levelId",m.data.levelId)("subjectId",m.data.subjectId)("bookId",m.data.bookId)("selectedObj",m.data.selectedObj)("searchContent",null==m.searchContent?null:m.searchContent.searchContent)("allowSelectKnowledgeOrObjective",m.data.allowSelectKnowledgeOrObjective),e.R7$(3),e.SpI(" ",e.bMT(11,12,"lang_button_close")," "))},dependencies:[c.U,a.W,Q,d.wp],encapsulation:2}),_})()}}]);