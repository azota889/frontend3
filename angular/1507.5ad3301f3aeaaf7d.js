"use strict";(self.webpackChunkBalacoClient=self.webpackChunkBalacoClient||[]).push([[1507],{37320:(S,f,o)=>{o.d(f,{f:()=>a});var _=o(48891),g=o(53793),v=o(17838),e=o(82040),s=o(18447),h=o(85710),r=o(27035),n=o(5424);class t{addTask(u,c){if(null!=c&&this.baseResultCache.has(c))return this.baseResultCache.get(c).asObservable();const l=new v.m(1);return null!=c&&this.baseResultCache.set(c,l),this.baseTaskQueue$?.next(u.pipe((0,e.M)({next:p=>{!p.success&&null!=c&&this.baseResultCache.delete(c),l.next(p)},error:()=>{null!=c&&this.baseResultCache.delete(c),l.next({success:0,message:"lang_common_error_at_task_queue",data:void 0})}}))),l.asObservable()}resetQueue(){this.stopQueue(),this.baseDestroy$=new s.B,this.baseSubscription=new h.yU,this.initializeQueue()}resetConcurrency(u){this.baseLimitConcurrency!=u&&this.initializeQueue()}initializeQueue(){this.baseTaskQueue$=new s.B;const u=this.baseTaskQueue$.pipe((0,r.Z)(c=>c.pipe((0,n.Q)(this.baseDestroy$)),this.baseLimitConcurrency)).subscribe({next:c=>{},error:c=>{},complete:()=>{}});this.baseSubscription.add(u)}stopQueue(){this.baseDestroy$.next(),this.baseDestroy$.complete(),this.baseSubscription.unsubscribe(),this.baseTaskQueue$=null,this.baseResultCache.clear()}constructor(u=10){this.baseLimitConcurrency=u,this.baseTaskQueue$=null,this.baseDestroy$=new s.B,this.baseSubscription=new h.yU,this.baseResultCache=new Map,this.initializeQueue()}}var d=o(96246),i=o(35810);let a=(()=>{var m;class u extends t{callApiToGuestKnowledge(l,p,T,E){if(""==this.standardQuestionData(p))return T(void 0,void 0,void 0);let A={questionId:l?p.questionId:void 0,text:l?void 0:this.standardQuestionData(p),levelId:p.levelId,subjectId:p.subjectId,ebankId:p.ebankId},y=this.aiService.apiAiPredictQuestionKnowledgePost(A);this.addTask(y,this.sAztEncryptService.createMd5(this.commonService.serializeJson(A))).subscribe(C=>C.success?"vip_required"==C.errorCode?E("lang_core_need_vip_upgrade"):!C.data||C.data.score<this.AI_MIN_SCORE?T(void 0,void 0,void 0):void T(C.data.knowledgeId,C.data.objectiveId,C.data.tagId):E(C.message))}standardQuestionData(l){let p=this.commonService.parseQuestionContent(l.questionContent);return p+=" "+this.commonService.parseQuestionContent(l.answerContents.join(" - ")),p.trim()}constructor(){super(2),this.commonService=(0,_.WQX)(g.R),this.aiService=(0,_.WQX)(d.Ee),this.sAztEncryptService=(0,_.WQX)(i.v),this.AI_MIN_SCORE=2.8}}return(m=u).\u0275fac=function(l){return new(l||m)},m.\u0275prov=_.jDH({token:m,factory:m.\u0275fac,providedIn:"root"}),u})()},34292:(S,f,o)=>{o.d(f,{c:()=>v});var _=o(18447),g=o(48891);let v=(()=>{var e;class s{constructor(){this.checkQuestion=new _.B}listenSetTagEventOfAllQuestions(){return this.checkQuestion}sendSetTagEvent(r){this.checkQuestion.next(r)}}return(e=s).\u0275fac=function(r){return new(r||e)},e.\u0275prov=g.jDH({token:e,factory:e.\u0275fac,providedIn:"root"}),s})()},68106:(S,f,o)=>{o.d(f,{c:()=>h});var _=o(48891),g=o(51698),v=o(88249),e=o(53793),s=o(9280);let h=(()=>{var r;class n{constructor(){this.questionService=(0,_.WQX)(s.wP),this.commonService=(0,_.WQX)(e.R),this.replayCache$=null}callApiSetTagForTrueFalseQuestion(d,i,a){return new g.c(m=>{let u=d.configAnswers.find(l=>l.key==i);this.questionService.apiQuestionUpdateQuestionKnowledgePost({questions:[{questionId:d.id,answers:[{answerKey:i,objectiveId:u?.objectiveId,tag:a?.code??""}]}]}).subscribe(l=>{if(!l)return m.next(!1),m.complete(),this.commonService.snackError("lang_update_question_tag_unsuccessfully");this.commonService.snackSuccess("lang_update_question_tag_successfully"),m.next(!0),m.complete()})})}formatTag(d){return d.map(i=>({...i,showName:this.commonService.getValueOfKeyInObject(i,this.commonService.getCurrentLang()+"Name")??i.enName??"Empty"}))}getQuestionTags(){return this.replayCache$||(this.replayCache$=new g.c(d=>{this.questionService.apiQuestionGetTagsGet().subscribe(i=>{if(!i.success)return this.commonService.snackError(i.message);d.next(i.data?.objs?.filter(a=>"VDC"!=a.code)??[]),d.complete()})}).pipe((0,v.t)(1))),this.replayCache$}findCurrentTag(d,i,a){let m=i.find(c=>this.commonService.compareLowerCase(c.key,a))?.tagId,u=d.find(c=>c.id==m);return u?"azt_lang_tag_"+u.code:""}}return(r=n).\u0275fac=function(d){return new(d||r)},r.\u0275prov=_.jDH({token:r,factory:r.\u0275fac,providedIn:"root"}),n})()},99743:(S,f,o)=>{o.d(f,{I:()=>e});var _=o(48891),g=o(53793),v=o(99927);let e=(()=>{var s;class h{constructor(){this.commonService=(0,_.WQX)(g.R),this.sAztAnswerTypeService=(0,_.WQX)(v._)}changeObjectiveForCommonQuestion(n,t){return n.objectiveId=t.objectiveId,n}changeObjectiveForTrueFalseQuestion(n,t,d){return n.configAnswers.find(i=>i.key==d)?(n.configAnswers.forEach(i=>{i.key==d&&(i.objectiveId=t?.objectiveId)}),n):(n.configAnswers.push({key:d,objectiveId:t.objectiveId}),n)}changeTagForCommonQuestion(n,t){return n.tags=t,n}changeTagForTrueFalseQuestion(n,t,d){let i=this.commonService.getFirstOfArray(d);return n.configAnswers.find(a=>a.key==t)?(n.configAnswers.forEach(a=>{a.key==t&&(a.tagId=i?.id,a.tagName=i?.name,a.tagCode=i?.code)}),n):(n.configAnswers.push({key:t,knowledgeId:void 0,objectiveId:void 0,tagCode:i?.code,tagId:i?.id,tagName:i?.name}),n)}changeTagForCommonQuestView(n,t){return n.tag=t,n}changeTagForTrueFalseQuestView(n,t,d){let i=this.commonService.getFirstOfArray(d);return n.configAnswers||(n.configAnswers=[]),n.configAnswers.find(a=>a.key==t)?(n.configAnswers.forEach(a=>{a.key==t&&(a.tagId=i?.id,a.tagName=i?.name,a.tagCode=i?.code)}),n):(n.configAnswers.push({key:t,knowledgeId:void 0,objectiveId:void 0,tagCode:i?.code,tagId:i?.id,tagName:i?.name}),n)}}return(s=h).\u0275fac=function(n){return new(n||s)},s.\u0275prov=_.jDH({token:s,factory:s.\u0275fac,providedIn:"root"}),h})()},50334:(S,f,o)=>{o.d(f,{C:()=>g});var _=o(59640);class g extends _.H{constructor(){super(...arguments),this.nodeObjs=[]}searchByText(e){this.nodeObjs=(e=this.standardSearchText(e)).trim()?this.doSearchByText(e,this.nodeObjs,[]):this.showAndExpandAll(this.nodeObjs)}expand(e){e.isExpand=!0}collapse(e){e.isExpand=!1}doSearchByText(e,s,h){for(var r of s){r.isShow=!1;let n=this.standardSearchText(r.text);(e.includes(n)||n.includes(e))&&(r.isShow=!0,r.isExpand=!0,h.forEach(t=>{t.isShow=!0,t.isExpand=!0})),r.children.length&&(r.children=this.doSearchByText(e,r.children,h.concat(r)))}return s}showAndExpandAll(e){for(var s of e)s.isShow=!0,s.isExpand=!0,s.children=this.showAndExpandAll(s.children);return e}standardSearchText(e){return e=e.toLowerCase(),e=this.commonService.removeSpecialStringInSearch(e),this.commonService.convertVietnameseToEnglish(e)}}},11002:(S,f,o)=>{o.d(f,{$:()=>e});var _=o(59640),g=o(48891);const v=["*"];let e=(()=>{var s;class h extends _.H{constructor(){super(...arguments),this.colorBackground="",this.defaultHeight="45px",this.fixToTopWidth=0,this.fixToTopTop=0}onWindowScroll(){let n=document.querySelector(".azt-content"),t=document.getElementById("flexed-on-top"),d=document.getElementById("position-dev")?.getBoundingClientRect();if(!n||!t||!d)return;let i=window.pageYOffset,a=d.top,m=a<-50;if(this.fixToTopWidth=d.width,this.fixToTopTop=d.top,m){t.style.position="fixed",t.style.zIndex="9999",t.style.height=this.defaultHeight,t.style.right=this.isMobileWebView?"0":"12px",t.style.background=this.colorBackground,t.style.justifyContent="end";let u=n.getBoundingClientRect().width;this.isMobileDevice?(t.style.top="62px",t.style.padding="6px 15px",t.style.width=(u+32).toString()+"px"):(t.style.top="0",t.style.padding="6px 22px",t.style.width=(u+44).toString()+"px")}else(0==i||0==a)&&(t.style.position="",t.style.top="",t.style.right="",t.style.zIndex="",t.style.height="",t.style.padding="",t.style.background="",t.style.width="",t.style.justifyContent="")}}return(s=h).\u0275fac=(()=>{let r;return function(t){return(r||(r=g.xGo(s)))(t||s)}})(),s.\u0275cmp=g.VBU({type:s,selectors:[["flexed-on-the-top"]],hostBindings:function(n,t){1&n&&g.bIt("scroll",function(i){return t.onWindowScroll(i)},!1,g.tSv)},inputs:{colorBackground:"colorBackground",defaultHeight:"defaultHeight"},features:[g.Vt3],ngContentSelectors:v,decls:3,vars:0,consts:[["id","position-dev"],["id","flexed-on-top",1,"flex","flexed-on-top"]],template:function(n,t){1&n&&(g.NAR(),g.nrm(0,"div",0),g.j41(1,"div",1),g.SdG(2),g.k0s())},encapsulation:2}),h})()},75421:(S,f,o)=>{o.d(f,{u:()=>i});var _=o(10936),g=o(89163),v=o(33887),e=o(48891),s=o(54460),h=o(15343),r=o(76975);const n=()=>({"mr-2 text-danger":!0});function t(a,m){if(1&a&&e.nrm(0,"lucide-icon",10),2&a){const u=e.XpG();e.Y8G("name",u.data.iconName)("ngClass",e.lJ4(2,n))}}function d(a,m){if(1&a&&(e.j41(0,"div",11)(1,"div",3)(2,"span"),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"b"),e.EFF(6),e.k0s(),e.j41(7,"span"),e.EFF(8),e.nI1(9,"mytranslate"),e.k0s()(),e.j41(10,"div",12),e.nrm(11,"input",13),e.k0s()()),2&a){const u=e.XpG();e.R7$(3),e.JRh(e.bMT(4,4,"lang_azt_enter")+" "),e.R7$(3),e.JRh('"'+u.data.textConfirm+'" '),e.R7$(2),e.JRh(e.bMT(9,6,"lang_azt_for_delete_data")),e.R7$(3),e.Y8G("formControl",u.confirmValue)}}let i=(()=>{var a;class m extends v._{btnCloseDialog(){this.dialogRef.close(!1)}confirmDialog(){this.dialogRef.close(!0)}constructor(c,l){super(l,c),this.dialogRef=c,this.data=l,this.confirmValue=new _.MJ("",{nonNullable:!0})}}return(a=m).\u0275fac=function(c){return new(c||a)(e.rXU(g.CP,8),e.rXU(g.Vh,8))},a.\u0275cmp=e.VBU({type:a,selectors:[["azt-dialog-danger"]],features:[e.Vt3],decls:14,vars:10,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5"],[1,"text-md"],["size","24",3,"name","ngClass",4,"ngIf"],[1,"text-md",3,"innerHtml"],["class","mt-3",4,"ngIf"],[1,"p-3","text-right"],["azt-track-service","azt-dialog-danger-9EJYp6jGzr",1,"btn","w-24","btn-secondary","mr-2",3,"click"],["azt-track-service","azt-dialog-danger-ffMh3NrPRC",1,"btn","w-24","btn-danger",3,"click","disabled"],["size","24",3,"name","ngClass"],[1,"mt-3"],[1,"mt-2"],["type","text",1,"form-control",3,"formControl"]],template:function(c,l){1&c&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),e.DNE(4,t,1,3,"lucide-icon",4),e.nrm(5,"span",5),e.k0s(),e.DNE(6,d,12,8,"div",6),e.k0s()(),e.j41(7,"div",7)(8,"button",8),e.bIt("click",function(){return l.btnCloseDialog()}),e.EFF(9),e.nI1(10,"mytranslate"),e.k0s(),e.j41(11,"button",9),e.bIt("click",function(){return l.confirmDialog()}),e.EFF(12),e.nI1(13,"mytranslate"),e.k0s()()()),2&c&&(e.R7$(4),e.Y8G("ngIf",l.data.iconName),e.R7$(),e.Y8G("innerHtml",l.data.content,e.npT),e.R7$(),e.Y8G("ngIf",l.data.textConfirm),e.R7$(3),e.SpI(" ",e.bMT(10,6,"lang_auto_huy")," "),e.R7$(2),e.Y8G("disabled",l.data.textConfirm&&l.data.textConfirm!==l.confirmValue.value),e.R7$(),e.SpI(" ",e.bMT(13,8,"lang_auto_xac_nhan")," "))},dependencies:[s.YU,s.bT,_.me,_.BC,_.l_,h.WGl,r.wp],encapsulation:2}),m})()}}]);