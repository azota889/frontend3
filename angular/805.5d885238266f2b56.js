"use strict";(self.webpackChunkBalacoClient=self.webpackChunkBalacoClient||[]).push([[805],{10805:(q,S,c)=>{c.d(S,{g:()=>W});var h=c(89163),v=c(23047),b=c(33887),t=c(48891),C=c(39444),p=c(54460),r=c(5601),k=c(2915),x=c(52811),T=c(76975);const y=e=>({"block w-28":e}),I=e=>({"width.%":e});function E(e,o){1&e&&(t.j41(0,"div",9)(1,"b"),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s()()),2&e&&(t.R7$(2),t.JRh(t.bMT(3,1,"lang_azt_muc_do_thuon_thuc_ky_nang")))}function R(e,o){1&e&&(t.j41(0,"div",10)(1,"h4",11),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s()()),2&e&&(t.R7$(2),t.SpI(" ",t.bMT(3,1,"lang_azt_muc_do_thuon_thuc_ky_nang")," "))}function O(e,o){1&e&&(t.j41(0,"div",12)(1,"span",13),t.nrm(2,"azt-loading-ui"),t.k0s()())}function j(e,o){if(1&e&&(t.j41(0,"div",16)(1,"div",17)(2,"div",18),t.nrm(3,"div",19),t.k0s()()()),2&e){const i=t.XpG(4);t.R7$(3),t.Y8G("chart",i.chartSkill)}}function D(e,o){1&e&&(t.j41(0,"div",20),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&e&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"long_core_khong_tim_thay_Muc_do_thuan_thuc_ky_nang")," "))}function z(e,o){if(1&e&&t.DNE(0,j,4,1,"div",14)(1,D,3,3,"div",15),2&e){const i=t.XpG(3);t.Y8G("ngIf",i.chartSkill),t.R7$(),t.Y8G("ngIf",!i.chartSkill)}}function A(e,o){if(1&e){const i=t.RV6();t.j41(0,"div",21)(1,"button",22),t.bIt("click",function(){t.eBV(i);const a=t.XpG(3);return t.Njj(a.dialogRef.close())}),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s()()}2&e&&(t.R7$(2),t.SpI(" ",t.bMT(3,1,"lang_auto_dong")," "))}function G(e,o){if(1&e&&(t.j41(0,"div"),t.DNE(1,E,4,3,"div",5)(2,R,4,3,"div",6)(3,O,3,0,"div",7),t.j41(4,"azt-mat-dialog-content"),t.DNE(5,z,2,2,"ng-template",null,0,t.C5r),t.k0s(),t.DNE(7,A,4,3,"div",8),t.k0s()),2&e){const i=t.sdS(6),n=t.XpG(2);t.R7$(),t.Y8G("ngIf",1==n.type),t.R7$(),t.Y8G("ngIf",!n.type),t.R7$(),t.Y8G("ngIf",n.statusObj.loading)("ngIfElse",i),t.R7$(4),t.Y8G("ngIf",1==n.type)}}function P(e,o){1&e&&(t.j41(0,"th",33),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&e&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"lang_auto_don_vi_kien_thuc")," "))}function F(e,o){if(1&e&&(t.j41(0,"td",34)(1,"span"),t.EFF(2),t.k0s()()),2&e){const i=o.$implicit;t.R7$(2),t.JRh(i.title)}}function M(e,o){1&e&&(t.j41(0,"th",33),t.nrm(1,"span",35),t.k0s())}function $(e,o){if(1&e){const i=t.RV6();t.j41(0,"span",37),t.bIt("click",function(){t.eBV(i);const a=t.XpG().$implicit,_=t.XpG(3);return t.Njj(_.goToPractice(a.examHashId))}),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()}if(2&e){const i=t.XpG(4);t.Y8G("ngClass",t.eq3(4,y,!i.isMobileDevice)),t.R7$(),t.JRh(t.bMT(2,2,"lang_testbank_practice"))}}function N(e,o){if(1&e&&(t.j41(0,"td",34),t.DNE(1,$,3,6,"span",36),t.k0s()),2&e){const i=o.$implicit;t.R7$(),t.Y8G("ngIf",i.examHashId)}}function L(e,o){1&e&&(t.j41(0,"th",38)(1,"span",35),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s()()),2&e&&(t.R7$(2),t.JRh(t.bMT(3,1,"lang_auto_ty_le")))}function U(e,o){if(1&e&&(t.j41(0,"td",34)(1,"div",39)(2,"div",40),t.nI1(3,"number"),t.j41(4,"span",41),t.EFF(5),t.nI1(6,"number"),t.k0s()()()()),2&e){const i=o.$implicit;t.R7$(2),t.Y8G("ngStyle",t.eq3(8,I,t.i5U(3,2,100*i.point,"1.0-1"))),t.R7$(3),t.JRh(i.point?t.i5U(6,5,100*i.point,"1.0-1")+"%":"")}}function Y(e,o){1&e&&t.nrm(0,"tr",42)}function B(e,o){1&e&&t.nrm(0,"tr",43)}function X(e,o){if(1&e){const i=t.RV6();t.j41(0,"div",23)(1,"div",9)(2,"b"),t.EFF(3),t.nI1(4,"mytranslate"),t.k0s()(),t.j41(5,"azt-mat-dialog-content")(6,"table",24),t.qex(7,25),t.DNE(8,P,3,3,"th",26)(9,F,3,1,"td",27),t.bVm(),t.qex(10,28),t.DNE(11,M,2,0,"th",26)(12,N,2,1,"td",27),t.bVm(),t.qex(13,29),t.DNE(14,L,4,3,"th",30)(15,U,7,10,"td",27),t.bVm(),t.DNE(16,Y,1,0,"tr",31)(17,B,1,0,"tr",32),t.k0s()(),t.j41(18,"div",21)(19,"button",22),t.bIt("click",function(){t.eBV(i);const a=t.XpG(2);return t.Njj(a.closeDetailSkill())}),t.EFF(20),t.nI1(21,"mytranslate"),t.k0s()()()}if(2&e){const i=t.XpG(2);t.R7$(3),t.JRh(t.bMT(4,6,"lang_testbank_frontend_student_skill_statistic_title")),t.R7$(3),t.Y8G("dataSource",i.skillItem),t.R7$(10),t.Y8G("matHeaderRowDef",i.displayedColumns)("matHeaderRowDefSticky",!0),t.R7$(),t.Y8G("matRowDefColumns",i.displayedColumns),t.R7$(3),t.SpI(" ",t.bMT(21,8,"lang_auto_dong")," ")}}function K(e,o){if(1&e&&(t.j41(0,"div",2),t.DNE(1,G,8,5,"div",3)(2,X,22,10,"div",4),t.k0s()),2&e){const i=t.XpG();t.Y8G("ngClass",1==i.type?"box p-3":""),t.R7$(),t.Y8G("ngIf",!i.skillItem.length),t.R7$(),t.Y8G("ngIf",i.skillItem.length)}}let W=(()=>{var e;class o extends b._{getSkillProfile(){this.wrapApiResponse(this.studentPracticeService.aiApiV1StudentPracticeSkillProficiencyPost({schoolLevelId:this.levelId,schoolSubjectId:this.subjectId,userId:this.userId})).subscribe(a=>{if(!a.success)return this.errorStatusObj(a.message,!0);this.createChartSkill(a.data?.skillChapterViewItems??[]),this.stopStatusObj()})}convertTitle(n,a){return this.commonService.myTranslateInstant(n)+" ("+(a.reduce((m,u)=>(m??0)+(u??0),0)?.toString()??"")+")"}createChartSkill(n){if(!n||!n.length)return;let a=n.map(l=>l.title??""),_=n.map(l=>0==l.countExcellent?null:l.countExcellent),m=n.map(l=>0==l.countGood?null:l.countGood),u=n.map(l=>0==l.countNotGood?null:l.countNotGood),f=n.map(l=>0==l.countTerrible?null:l.countTerrible),g=n.map(l=>0==l.countNonePractice?null:l.countNonePractice),w=this.convertTitle("lang_azt_xuat_sac",_),H=this.convertTitle("lang_azt_kha",m),J=this.convertTitle("lang_azt_trung_binh",u),Q=this.convertTitle("lang_azt_yeu",f),Z=this.convertTitle("lang_auto_chua_thi",g),V=new v.t1({chart:{type:"column",style:{fontFamily:"Arial"}},title:{text:"",align:"center"},xAxis:{categories:a},yAxis:{min:0,title:{text:this.commonService.myTranslateInstant("lang_azt_so_kien_thuc")},stackLabels:{enabled:!0}},credits:{enabled:!1},plotOptions:{column:{stacking:"normal",dataLabels:{enabled:!0}}},series:[{name:w,type:"column",data:_,color:"green",tooltip:{headerFormat:"<b>{point.x}</b><br/><b>{series.name}: {point.y}</b><br/>",pointFormatter:function(){return n[this.index].excellentSkills.map((s,d)=>d+1+": "+s.title).join("<br/>")}},events:{click:l=>{this.openDetailSkill(n[l.point.index].excellentSkills)}}},{name:H,type:"column",data:m,color:"yellow",tooltip:{headerFormat:"<b>{point.x}</b><br/><b>{series.name}: {point.y}</b><br/>",pointFormatter:function(){return n[this.index].goodSkills.map((s,d)=>d+1+": "+s.title).join("<br/>")}},events:{click:l=>{this.openDetailSkill(n[l.point.index].goodSkills)}}},{name:J,type:"column",data:u,color:"orange",tooltip:{headerFormat:"<b>{point.x}</b><br/><b>{series.name}: {point.y}</b><br/>",pointFormatter:function(){return n[this.index].notGoodSkills.map((s,d)=>d+1+": "+s.title).join("<br/>")}},events:{click:l=>{this.openDetailSkill(n[l.point.index].notGoodSkills)}}},{name:Q,type:"column",data:f,color:"red",tooltip:{headerFormat:"<b>{point.x}</b><br/><b>{series.name}: {point.y}</b><br/>",pointFormatter:function(){return n[this.index].terribleSkills.map((s,d)=>d+1+": "+s.title).join("<br/>")}},events:{click:l=>{this.openDetailSkill(n[l.point.index].terribleSkills)}}},{name:Z,type:"column",data:g,color:"grey",tooltip:{headerFormat:"<b>{point.x}</b><br/><b>{series.name}: {point.y}</b><br/>",pointFormatter:function(){return n[this.index].nonePracticeSkills.map((s,d)=>d+1+": "+s.title).join("<br/>")}},events:{click:l=>{this.openDetailSkill(n[l.point.index].nonePracticeSkills)}}}]});this.chartSkill=V,this.stopStatusObj()}goToPractice(n){if(!n)return;let a=this.commonService.getMyQueryParam("backto"),_=this.commonService.getCurrentUrlWithoutLocale();this.commonService.myNavigationWithQueryString("/de-thi/"+n,"?backto="+encodeURIComponent(_+"?backto="+a)),this.dialogRef.close()}openDetailSkill(n){1==this.type&&(this.skillItem=n)}closeDetailSkill(){this.skillItem=[]}ngOnInit(){super.ngOnInit(),this.validLevelAndSubject=10==this.levelId||11==this.levelId||32==this.subjectId&&12==this.levelId,this.validLevelAndSubject&&(this.initStatusObj(),this.getSkillProfile())}constructor(n,a,_){super(_,a),this.studentPracticeService=n,this.dialogRef=a,this.validLevelAndSubject=!1,this.skillItem=[],this.displayedColumns=["name","actionCol","percent"],_&&(this.subjectId=_.subjectId,this.levelId=_.levelId,this.userId=_.userId,this.type=1)}}return(e=o).\u0275fac=function(n){return new(n||e)(t.rXU(C.Kw),t.rXU(h.CP,8),t.rXU(h.Vh,8))},e.\u0275cmp=t.VBU({type:e,selectors:[["coazt-student-skill-chapter"]],inputs:{type:"type",userId:"userId",levelId:"levelId",subjectId:"subjectId"},features:[t.Vt3],decls:1,vars:1,consts:[["doneLoading",""],[3,"ngClass",4,"ngIf"],[3,"ngClass"],[4,"ngIf"],["class","skill-statistical",4,"ngIf"],["class","mb-3",4,"ngIf"],["class","w-auto text-left bg-gray-200","style","padding: 10px 24px; margin-left: -24px; margin-right: -24px",4,"ngIf"],["class","flex justify-center items-center m-5",4,"ngIf","ngIfElse"],["class","flex items-center justify-end pt-2 w-full bg-white",4,"ngIf"],[1,"mb-3"],[1,"w-auto","text-left","bg-gray-200",2,"padding","10px 24px","margin-left","-24px","margin-right","-24px"],[1,"font-medium"],[1,"flex","justify-center","items-center","m-5"],[1,"w-6","h-6","m-5"],["class","report-box intro-x mt-3",4,"ngIf"],["class","flex p-4 justify-center items-center",4,"ngIf"],[1,"report-box","intro-x","mt-3"],[1,"h-[400px]"],[1,"chart-center"],[3,"chart"],[1,"flex","p-4","justify-center","items-center"],[1,"flex","items-center","justify-end","pt-2","w-full","bg-white"],[1,"btn","btn-secondary","w-32",3,"click"],[1,"skill-statistical"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","actionCol"],["matColumnDef","percent"],["mat-header-cell","","class","text-center",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[1,"center-span"],["class","text-white btn btn-pending","style","font-weight: 430;",3,"ngClass","click",4,"ngIf"],[1,"text-white","btn","btn-pending",2,"font-weight","430",3,"click","ngClass"],["mat-header-cell","",1,"text-center"],[1,"progress"],[1,"progress-done",3,"ngStyle"],[1,"text-md","font-medium","span-baseline-middle"],["mat-header-row",""],["mat-row",""]],template:function(n,a){1&n&&t.DNE(0,K,3,3,"div",1),2&n&&t.Y8G("ngIf",a.validLevelAndSubject)},dependencies:[p.YU,p.bT,p.B3,r.Zl,r.tL,r.ji,r.cC,r.YV,r.iL,r.KS,r.$R,r.YZ,r.NB,v.S6,k.U,x.R,p.QX,T.wp],encapsulation:2}),o})()}}]);