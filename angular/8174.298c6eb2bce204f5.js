"use strict";(self.webpackChunkBalacoClient=self.webpackChunkBalacoClient||[]).push([[8174],{43166:(L,A,l)=>{l.d(A,{x:()=>y});var c=l(10936),r=l(48891),d=l(53793);let y=(()=>{var h;class j{filter(u,_){return null==u?[]:u=u.filter(f=>this.removeAllSpecialChars((null!=_?f[_]:f).toString()).includes(this.removeAllSpecialChars(this.searchControl.value)))}mergeSchoolLevel(u){let _=[];return u.forEach(f=>null!=f.schoolLevel&&_.push(f.schoolLevel)),_}removeAllSpecialChars(u){return u=(u=this.commonService.myTranslateInstant(u)??u).toLowerCase().trim(),u=this.commonService.convertVietnameseToEnglish(u),u=this.commonService.removeSpecialStringInSearch(u),(u=this.commonService.removeNonAlphabetic(u)).toLowerCase().trim()}constructor(u){this.commonService=u,this.searchControl=new c.MJ("",{nonNullable:!0})}}return(h=j).\u0275fac=function(u){return new(u||h)(r.rXU(d.R))},h.\u0275dir=r.FsC({type:h,selectors:[["","searchInList",""]],exportAs:["searchInList"]}),j})()},24592:(L,A,l)=>{l.d(A,{C:()=>d});var c=l(48891),r=l(53793);let d=(()=>{var y;class h{constructor(){this.commonService=(0,c.WQX)(r.R)}replaceAdsContent(p){if(!p.template||!p.productAttributes)return p;let u=p.productAttributes;return u.push({id:0,productId:0,attributeId:0,value:p.name,attribute:{id:0,categoryId:0,displayName:"NAME",variableName:"NAME"}}),u.push({id:0,productId:0,attributeId:0,value:p.actionUrl??"",attribute:{id:0,categoryId:0,displayName:"URL",variableName:"URL"}}),u.push({id:0,productId:0,attributeId:0,value:p.description??"",attribute:{id:0,categoryId:0,displayName:"DESCRIPTION",variableName:"DESCRIPTION"}}),u.push({id:0,productId:0,attributeId:0,value:p.thumbnailUrl??"",attribute:{id:0,categoryId:0,displayName:"THUMBNAIL",variableName:"THUMBNAIL"}}),u.forEach(_=>{_.attribute?.variableName&&(p.template=this.commonService.replaceAll(p.template,"${"+_.attribute.variableName.toUpperCase()+"}",_.value))}),p}}return(y=h).\u0275fac=function(p){return new(p||y)},y.\u0275prov=c.jDH({token:y,factory:y.\u0275fac,providedIn:"root"}),h})()},86359:(L,A,l)=>{l.d(A,{f:()=>j});var c=l(48891),r=l(79767),d=l(59640),y=l(24592),h=l(76975);let j=(()=>{var p;class u extends d.H{constructor(){super(...arguments),this.sAztShowAdsBoxService=(0,c.WQX)(y.C)}ngOnChanges(){this.obj=this.sAztShowAdsBoxService.replaceAdsContent(this.obj)}ngAfterViewInit(){setTimeout(()=>{try{(r.A.adsbygoogle=r.A.adsbygoogle||[]).push({})}catch(f){console.error("ads",f)}},900)}}return(p=u).\u0275fac=(()=>{let _;return function(T){return(_||(_=c.xGo(p)))(T||p)}})(),p.\u0275cmp=c.VBU({type:p,selectors:[["azt-frontend-ads-item"]],inputs:{obj:"obj"},features:[c.Vt3,c.OA$],decls:2,vars:3,consts:[[3,"innerHTML"]],template:function(f,T){if(1&f&&(c.nrm(0,"div",0),c.nI1(1,"safeNormalHtmlContent")),2&f){let S;c.Y8G("innerHTML",c.bMT(1,1,null!==(S=T.obj.template)&&void 0!==S?S:""),c.npT)}},dependencies:[h._y],encapsulation:2}),u})()},75421:(L,A,l)=>{l.d(A,{u:()=>_});var c=l(89163),r=l(33887),d=l(48891),y=l(54460),h=l(15343),j=l(76975);const p=()=>({"mr-2 text-danger":!0});function u(f,T){if(1&f&&d.nrm(0,"lucide-icon",9),2&f){const S=d.XpG();d.Y8G("name",S.data.iconName)("ngClass",d.lJ4(2,p))}}let _=(()=>{var f;class T extends r._{btnCloseDialog(){this.dialogRef.close(!1)}confirmDialog(){this.dialogRef.close(!0)}constructor(I,k){super(k,I),this.dialogRef=I,this.data=k}}return(f=T).\u0275fac=function(I){return new(I||f)(d.rXU(c.CP,8),d.rXU(c.Vh,8))},f.\u0275cmp=d.VBU({type:f,selectors:[["azt-dialog-danger"]],features:[d.Vt3],decls:13,vars:8,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5"],[1,"text-md","flex"],["size","24",3,"name","ngClass",4,"ngIf"],[1,"text-md",3,"innerHtml"],[1,"p-3","text-right"],["azt-track-service","azt-dialog-danger-9EJYp6jGzr",1,"btn","w-24","btn-secondary","mr-2",3,"click"],["azt-track-service","azt-dialog-danger-ffMh3NrPRC",1,"btn","w-24","btn-danger",3,"click"],["size","24",3,"name","ngClass"]],template:function(I,k){1&I&&(d.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),d.DNE(4,u,1,3,"lucide-icon",4),d.nrm(5,"span",5),d.k0s()()(),d.j41(6,"div",6)(7,"button",7),d.bIt("click",function(){return k.btnCloseDialog()}),d.EFF(8),d.nI1(9,"mytranslate"),d.k0s(),d.j41(10,"button",8),d.bIt("click",function(){return k.confirmDialog()}),d.EFF(11),d.nI1(12,"mytranslate"),d.k0s()()()),2&I&&(d.R7$(4),d.Y8G("ngIf",k.data.iconName),d.R7$(),d.Y8G("innerHtml",k.data.content,d.npT),d.R7$(3),d.SpI(" ",d.bMT(9,4,"lang_auto_huy")," "),d.R7$(3),d.SpI(" ",d.bMT(12,6,"lang_auto_xac_nhan")," "))},dependencies:[y.YU,y.bT,h.WGl,j.wp],encapsulation:2}),T})()},20013:(L,A,l)=>{l.d(A,{T:()=>u});var c=l(48891),r=l(9516),d=l(54460),y=l(52811);const h=["*"];function j(_,f){1&_&&c.SdG(0,0,["*ngIf","!isUploadFile"])}function p(_,f){1&_&&(c.j41(0,"span",5),c.nrm(1,"azt-loading-ui"),c.k0s())}let u=(()=>{var _;class f extends r.L{constructor(){super(...arguments),this.uploadComplete=new c.bkB}emitUploadComplete(S){S.length>0&&this.uploadComplete.emit(S[0])}}return(_=f).\u0275fac=(()=>{let T;return function(I){return(T||(T=c.xGo(_)))(I||_)}})(),_.\u0275cmp=c.VBU({type:_,selectors:[["azt-upload-single-box"]],outputs:{uploadComplete:"uploadComplete"},features:[c.Vt3],ngContentSelectors:h,decls:6,vars:3,consts:[["formChoseFile",""],[1,"flex","items-center","justify-center","h-full",3,"click"],["type","file","id","box-left-file-input",1,"form-control","file-input",2,"display","none",3,"change","cancel","accept"],[4,"ngIf"],["class","w-4 h-4 inline-block",4,"ngIf"],[1,"w-4","h-4","inline-block"]],template:function(S,I){if(1&S){const k=c.RV6();c.NAR(),c.j41(0,"div",1),c.bIt("click",function(){c.eBV(k);const t=c.sdS(2);return c.Njj(I.onOpenFileDictionary()&&t.click())}),c.j41(1,"input",2,0),c.bIt("change",function(t){return c.eBV(k),c.Njj(I.onFileSelected(t))})("cancel",function(t){return c.eBV(k),c.Njj(I.onCancelSelect(t))}),c.k0s(),c.DNE(3,j,1,0,"ng-content",3),c.j41(4,"div"),c.DNE(5,p,2,0,"span",4),c.k0s()()}2&S&&(c.R7$(),c.FS9("accept",I.fileType),c.R7$(2),c.Y8G("ngIf",!I.isUploadFile),c.R7$(2),c.Y8G("ngIf",I.isUploadFile))},dependencies:[d.bT,y.R],encapsulation:2}),f})()},89121:(L,A,l)=>{l.d(A,{z:()=>y});var c=l(59640),r=l(48891),d=l(65162);let y=(()=>{var h;class j extends c.H{constructor(){super(...arguments),this.id="default-id"}}return(h=j).\u0275fac=(()=>{let p;return function(_){return(p||(p=r.xGo(h)))(_||h)}})(),h.\u0275cmp=r.VBU({type:h,selectors:[["app-common-master-page"]],inputs:{id:"id"},features:[r.Vt3],decls:2,vars:1,consts:[[3,"id"]],template:function(u,_){1&u&&(r.j41(0,"div",0),r.nrm(1,"router-outlet"),r.k0s()),2&u&&r.FS9("id",_.id)},dependencies:[d.n3],encapsulation:2}),j})()},58174:(L,A,l)=>{l.r(A),l.d(A,{AzotaAdsModule:()=>Me});var c=l(54460),r=l(10936),d=l(65162),y=l(69223),h=l(15343),j=l(10123),p=l(44233),u=l(5502),_=l(21656),f=l(70050),T=l(7050),S=l(35143),I=l(43234),k=l(1133),x=l(89121),t=l(48891),G=l(59640),z=l(15766),O=l(40967);var K=l(84828),ht=l(53793);let Q=(()=>{var a;class i{constructor(){this.commonListService=(0,t.WQX)(K.Nz),this.commonService=(0,t.WQX)(ht.R)}getSchoolLevelAndSubjects(e){this.commonListService.apiCommonListSubjectAndLevelsGet(this.commonService.getBusinessDomainUrl()).subscribe(n=>{n.success||(this.commonService.snackError(n.message),e([],[],[],[],!1));let s=n.data?.schoolLevelSubjectObjs.map(C=>C.schoolLevel).filter(this.commonService.notEmpty)??[],m=this.commonService.concatMultipleArray(n.data?.schoolLevelSubjectObjs.map(C=>C.schoolSubjectObjs)??[]),b=this.commonService.uniqueArray(s.map(C=>C.key).filter(this.commonService.notEmpty)),F=this.commonService.uniqueArray(m.map(C=>C.key).filter(this.commonService.notEmpty));b=b.filter(C=>"azt_lang_core_khoi_khac"!=C),F=F.filter(C=>"azt_lang_core_khoi_khac"!=C),e(s,m,b,F,!0)})}getSelectedLevelAndSubjects(e,n,s){let m=e.filter(v=>"level"==v.filterType).map(v=>v.filterObjectId),b=e.filter(v=>"subject"==v.filterType).map(v=>v.filterObjectId);return{selectedSchoolLevels:this.commonService.uniqueArray(n.filter(v=>m?.includes(v.id)).map(v=>v.key).filter(this.commonService.notEmpty)),selectedSchoolSubjects:this.commonService.uniqueArray(s.filter(v=>b?.includes(v.id)).map(v=>v.key).filter(this.commonService.notEmpty))}}}return(a=i).\u0275fac=function(e){return new(e||a)},a.\u0275prov=t.jDH({token:a,factory:a.\u0275fac,providedIn:"root"}),i})();var H=l(7557),Y=l(47426),w=l(95670),B=l(4375),et=l(81587),V=l(43166),E=l(96451),R=l(76975);const ft=()=>({"mr-1":!0}),at=a=>({"border-danger":a});function vt(a,i){1&a&&(t.j41(0,"div",30)(1,"span"),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s()()),2&a&&(t.R7$(2),t.SpI("",t.bMT(3,1,"lang_azt_please_enter_category_name"),"!"))}function Ct(a,i){if(1&a&&(t.j41(0,"mat-option",31),t.EFF(1),t.k0s()),2&a){const o=i.$implicit;t.Y8G("value",o),t.R7$(),t.SpI(" ",o," ")}}function yt(a,i){1&a&&(t.j41(0,"div",30)(1,"span"),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s()()),2&a&&(t.R7$(2),t.SpI("",t.bMT(3,1,"lang_azt_please_enter_information_field"),"!"))}function It(a,i){if(1&a&&(t.j41(0,"mat-option",31),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&a){const o=i.$implicit;t.Y8G("value",o),t.R7$(),t.JRh(t.bMT(2,2,o))}}function jt(a,i){if(1&a&&(t.j41(0,"mat-option",31),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&a){const o=i.$implicit;t.Y8G("value",o),t.R7$(),t.JRh(t.bMT(2,2,o))}}function St(a,i){if(1&a){const o=t.RV6();t.j41(0,"div",32)(1,"div",33)(2,"div",34)(3,"div",35)(4,"span",36),t.EFF(5),t.nI1(6,"mytranslate"),t.k0s(),t.nrm(7,"input",37),t.nI1(8,"mytranslate"),t.k0s(),t.j41(9,"div",38)(10,"button",39),t.bIt("click",function(){const n=t.eBV(o).index,s=t.XpG();return t.Njj(s.removeFileForm(n))}),t.nrm(11,"lucide-icon",40),t.k0s()()(),t.j41(12,"div",41)(13,"div",8)(14,"div",42),t.EFF(15),t.nI1(16,"mytranslate"),t.k0s(),t.nrm(17,"input",43),t.nI1(18,"mytranslate"),t.k0s(),t.j41(19,"div",11)(20,"label",44),t.EFF(21),t.nI1(22,"mytranslate"),t.k0s(),t.j41(23,"div",8),t.nrm(24,"textarea",45),t.nI1(25,"mytranslate"),t.k0s()()()()()}if(2&a){const o=i.$implicit;t.R7$(),t.Y8G("formGroup",o),t.R7$(4),t.SpI(" ",t.bMT(6,9,"lang_azt_field_name")," "),t.R7$(2),t.FS9("placeholder",t.bMT(8,11,"lang_azt_field_name")+"..."),t.Y8G("ngClass",t.eq3(21,at,o.controls.displayName.errors&&o.controls.displayName.touched)),t.R7$(8),t.SpI(" ",t.bMT(16,13,"lang_azt_variable_name")," "),t.R7$(2),t.FS9("placeholder",t.bMT(18,15,"lang_azt_variable_name")+"..."),t.Y8G("ngClass",t.eq3(23,at,o.controls.variableName.errors&&o.controls.variableName.touched)),t.R7$(4),t.JRh(t.bMT(22,17,"lang_azt_field_description")),t.R7$(3),t.FS9("placeholder",t.bMT(25,19,"lang_azt_field_description")+"...")}}let At=(()=>{var a;class i extends G.H{saveAdsCategory(){if(this.form.invalid)return this.form.markAllAsTouched();this.initStatusObj();const e=this.convertFormToParam();this.waitDestroy(this.categoryService.apiCategoryCreateCategoryPost(e).subscribe(n=>{if(!n.success)return this.errorStatusObj(n.message,!0);this.successStatusObj("lang_cms_add_success",!0),this.handleDestroy()}))}handleDestroy(){this.myNavigation(this.backToLink)}addNewFieldForm(){this.form.controls.attributesList.push(this.createFieldForm("","",""))}removeFileForm(e){this.form.controls.attributesList.removeAt(e)}createFieldForm(e,n,s){return new r.gE({displayName:new r.MJ(e,{nonNullable:!0,validators:[r.k0.required,z.M.noWhiteSpace]}),variableName:new r.MJ(n,{nonNullable:!0,validators:[r.k0.required,z.M.noWhiteSpace]}),description:new r.MJ(s,{nonNullable:!0})})}convertFormToParam(){const{attributesList:e,name:n,adsPosition:s,desc:m,schoolLevels:b,schoolSubjects:F}=this.form.controls,C=e.controls.map(g=>({displayName:g.controls.displayName.value,variableName:g.controls.variableName.value.toUpperCase(),description:g.controls.description.value}));let v=this.commonService.uniqueArray(this.allSchoolLevelObjs.filter(g=>b.value.includes(g?.key??"")).map(g=>g.id)),M=this.commonService.uniqueArray(this.allSchoolSubjectObjs.filter(g=>F.value.includes(g?.key??"")).map(g=>g.id)),$=v.map(g=>({filterType:"level",filterObjectId:g}));return $=$.concat(M.map(g=>({filterType:"subject",filterObjectId:g}))),{name:n.value,position:s.value,description:m.value,attributes:C,filterOptions:$}}getSchoolLevelAndSubjects(){this.initStatusObj(),this.sAztCategoryAdsService.getSchoolLevelAndSubjects((e,n,s,m,b)=>{this.stopStatusObj(),b&&(this.allSchoolLevelObjs=e,this.allSchoolSubjectObjs=n,this.allSchoolLevels=s,this.allSchoolSubjects=m,this.successStatusObj())})}ngOnInit(){super.ngOnInit(),this.backToLink=this.commonService.getMyQueryParam("backto")??"/azota-ads/ads-category",this.getSchoolLevelAndSubjects()}constructor(e){super(),this.categoryService=e,this.sAztCategoryAdsService=(0,t.WQX)(Q),this.backToLink="",this.listPositions=this.commonService.getEnumValues(O.rA),this.allSchoolLevels=[],this.allSchoolSubjects=[],this.allSchoolLevelObjs=[],this.allSchoolSubjectObjs=[],this.form=new r.gE({name:new r.MJ("",{nonNullable:!0,validators:[r.k0.required,z.M.noWhiteSpace]}),adsPosition:new r.MJ(O.rA.ALLPOSITION,{nonNullable:!0,validators:[r.k0.required]}),desc:new r.MJ("",{nonNullable:!0}),attributesList:new r.Yp([]),schoolLevels:new r.MJ([],{nonNullable:!0}),schoolSubjects:new r.MJ([],{nonNullable:!0})})}}return(a=i).\u0275fac=function(e){return new(e||a)(t.rXU(H.M))},a.\u0275cmp=t.VBU({type:a,selectors:[["create-ads-category"]],features:[t.Vt3],decls:68,vars:56,consts:[["searchInListPosition","searchInList"],[3,"headerBackToLink"],[1,"mt-5"],[1,"text-md","uppercase","font-medium"],[1,"box","mt-4","p-5"],[3,"formGroup"],[1,"azt-form-group"],["for","name",1,"form-label","font-medium"],[1,"input-group"],["type","text","id","name","formControlName","name",1,"form-control",3,"placeholder"],["class","text-danger text-xs font-medium mt-2",4,"ngIf"],[1,"azt-form-group","mt-3"],["id","bankIdInput","appearance","outline"],["searchInList","",3,"formControl"],[3,"formControl","placeholderLabel","noEntriesFoundLabel"],[3,"value",4,"ngFor","ngForOf"],["for","desc",1,"form-label","font-medium"],["formControlName","desc","name","desc","id","desc",1,"form-control",2,"height","80px",3,"placeholder"],[1,"form-label","font-medium","mb-3"],[1,"w-full","mat-multiple-select-box"],["multiple","",3,"formControl"],[1,"flex","flex-col","sm:flex-row","sm:items-center"],["for","name",1,"form-label","font-medium","mr-2"],[1,"btn","btn-sm","btn-primary-soft","mt-2","sm:mt-0","ml-auto",3,"click"],["name","plus","size","18",3,"ngClass"],[1,"grid","grid-cols-12","gap-4","mt-3"],["class","col-span-12 md:col-span-6",4,"ngFor","ngForOf"],[1,"flex","ml-auto","w-full","justify-end","mt-3"],["type","button",1,"btn","btn-secondary","min-width-100","mr-2",3,"click"],[1,"btn","btn-primary","min-width-100",3,"click"],[1,"text-danger","text-xs","font-medium","mt-2"],[3,"value"],[1,"col-span-12","md:col-span-6"],[1,"border","border-slate-200","dark:border-darkmode-400","rounded-md","pb-1",3,"formGroup"],[1,"p-2","bg-slate-100","dark:bg-darkmode-400","flex","items-center"],[1,"flex","items-center"],[1,"mr-2"],["type","text","formControlName","displayName",1,"form-control","form-control-sm",2,"width","9rem",3,"ngClass","placeholder"],[1,"ml-auto"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],["name","trash-2","size","18"],[1,"p-3"],[1,"input-group-text","whitespace-nowrap",2,"width","125px"],["type","text","formControlName","variableName",1,"form-control","form-control-sm",3,"ngClass","placeholder"],["for","name",1,"form-label"],["type","text","formControlName","description",1,"form-control","form-control-sm",2,"height","60px",3,"placeholder"]],template:function(e,n){if(1&e){const s=t.RV6();t.j41(0,"teacher-layout",1)(1,"div",2)(2,"h3",3),t.EFF(3),t.nI1(4,"mytranslate"),t.k0s(),t.j41(5,"div",4)(6,"form",5)(7,"div",6)(8,"label",7),t.EFF(9),t.nI1(10,"mytranslate"),t.k0s(),t.j41(11,"div",8),t.nrm(12,"input",9),t.nI1(13,"mytranslate"),t.k0s(),t.DNE(14,vt,4,3,"div",10),t.k0s(),t.j41(15,"div",11)(16,"label",7),t.EFF(17),t.nI1(18,"mytranslate"),t.k0s(),t.j41(19,"mat-form-field",12)(20,"mat-select",13,0)(22,"mat-option"),t.nrm(23,"ngx-mat-select-search",14),t.nI1(24,"mytranslate"),t.nI1(25,"mytranslate"),t.k0s(),t.DNE(26,Ct,2,2,"mat-option",15),t.k0s()()(),t.j41(27,"div",11)(28,"label",16),t.EFF(29),t.nI1(30,"mytranslate"),t.k0s(),t.j41(31,"div",8),t.nrm(32,"textarea",17),t.nI1(33,"mytranslate"),t.k0s(),t.DNE(34,yt,4,3,"div",10),t.k0s(),t.j41(35,"div",11)(36,"label",18),t.EFF(37),t.nI1(38,"mytranslate"),t.k0s(),t.j41(39,"mat-form-field",19)(40,"mat-select",20),t.DNE(41,It,3,4,"mat-option",15),t.k0s()()(),t.j41(42,"div",11)(43,"label",18),t.EFF(44),t.nI1(45,"mytranslate"),t.k0s(),t.j41(46,"mat-form-field",19)(47,"mat-select",20),t.DNE(48,jt,3,4,"mat-option",15),t.k0s()()(),t.j41(49,"div",11)(50,"div",21)(51,"label",22),t.EFF(52),t.nI1(53,"mytranslate"),t.k0s(),t.j41(54,"button",23),t.bIt("click",function(){return t.eBV(s),t.Njj(n.addNewFieldForm())}),t.nrm(55,"lucide-icon",24),t.EFF(56),t.nI1(57,"mytranslate"),t.k0s()(),t.j41(58,"div",25),t.DNE(59,St,26,25,"div",26),t.k0s()()()(),t.j41(60,"div",27)(61,"button",28),t.bIt("click",function(){return t.eBV(s),t.Njj(n.handleDestroy())}),t.EFF(62),t.nI1(63,"mytranslate"),t.k0s(),t.j41(64,"button",29),t.bIt("click",function(){return t.eBV(s),t.Njj(n.saveAdsCategory())}),t.j41(65,"span"),t.EFF(66),t.nI1(67,"mytranslate"),t.k0s()()()()()}if(2&e){const s=t.sdS(21);t.Y8G("headerBackToLink",n.backToLink),t.R7$(3),t.SpI(" ",t.bMT(4,27,"lang_azt_add_category")," "),t.R7$(3),t.Y8G("formGroup",n.form),t.R7$(3),t.JRh(t.bMT(10,29,"lang_azt_category_name")),t.R7$(3),t.FS9("placeholder",t.bMT(13,31,"lang_azt_enter_category_name")),t.R7$(2),t.Y8G("ngIf",n.form.controls.name.errors&&n.form.controls.name.touched),t.R7$(3),t.JRh(t.bMT(18,33,"lang_azt_category_ads_position")),t.R7$(3),t.Y8G("formControl",n.form.controls.adsPosition),t.R7$(3),t.FS9("placeholderLabel",t.bMT(24,35,"lang_search_by_name")),t.FS9("noEntriesFoundLabel",t.bMT(25,37,"lang_search_not_found")),t.Y8G("formControl",s.searchControl),t.R7$(3),t.Y8G("ngForOf",s.filter(n.listPositions,void 0)),t.R7$(3),t.JRh(t.bMT(30,39,"lang_auto_mo_ta")),t.R7$(3),t.FS9("placeholder",t.bMT(33,41,"lang_core_nhap_mo_ta")),t.R7$(2),t.Y8G("ngIf",n.form.controls.desc.errors&&n.form.controls.desc.touched),t.R7$(3),t.JRh(t.bMT(38,43,"lang_admin_ads_select_school_level")),t.R7$(3),t.Y8G("formControl",n.form.controls.schoolLevels),t.R7$(),t.Y8G("ngForOf",n.allSchoolLevels),t.R7$(3),t.JRh(t.bMT(45,45,"lang_admin_ads_select_school_subject")),t.R7$(3),t.Y8G("formControl",n.form.controls.schoolSubjects),t.R7$(),t.Y8G("ngForOf",n.allSchoolSubjects),t.R7$(4),t.JRh(t.bMT(53,47,"lang_azt_information_field")),t.R7$(3),t.Y8G("ngClass",t.lJ4(55,ft)),t.R7$(),t.SpI(" ",t.bMT(57,49,"lang_azt_add_information_field")," "),t.R7$(3),t.Y8G("ngForOf",n.form.controls.attributesList.controls),t.R7$(3),t.SpI(" ",t.bMT(63,51,"lang_button_cancel")," "),t.R7$(4),t.JRh(t.bMT(67,53,"lang_button_save"))}},dependencies:[c.YU,c.Sq,c.bT,r.qT,r.me,r.BC,r.cb,Y.wT,w.rl,B.VO,r.l_,r.j4,r.JD,et.t,V.x,E.Q,h.WGl,p.U9,R.wp],encapsulation:2}),i})();var nt=l(75421),q=l(46899),D=l(18718);const ot=a=>[a],J=()=>({"mr-1":!0}),rt=a=>({backTo:a});function Tt(a,i){if(1&a&&t.nrm(0,"azt-loading-effect",8),2&a){const o=t.XpG();t.Y8G("currentStatusObj",o.statusObj)}}function kt(a,i){1&a&&(t.j41(0,"span"),t.EFF(1,",\xa0"),t.k0s())}function Ot(a,i){if(1&a&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"mytranslate"),t.DNE(3,kt,2,0,"span",26),t.k0s()),2&a){const o=i.$implicit,e=i.last;t.R7$(),t.SpI(" ",t.bMT(2,2,o)," "),t.R7$(2),t.Y8G("ngIf",!e)}}function Ft(a,i){if(1&a&&(t.j41(0,"div"),t.DNE(1,Ot,4,4,"span",24),t.k0s()),2&a){const o=t.XpG().$implicit;t.R7$(),t.Y8G("ngForOf",o.schoolLevels)}}function Rt(a,i){1&a&&(t.j41(0,"span"),t.EFF(1,",\xa0"),t.k0s())}function zt(a,i){if(1&a&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"mytranslate"),t.DNE(3,Rt,2,0,"span",26),t.k0s()),2&a){const o=i.$implicit,e=i.last;t.R7$(),t.SpI(" ",t.bMT(2,2,o)," "),t.R7$(2),t.Y8G("ngIf",!e)}}function Et(a,i){if(1&a&&(t.j41(0,"div"),t.DNE(1,zt,4,4,"span",24),t.k0s()),2&a){const o=t.XpG().$implicit;t.R7$(),t.Y8G("ngForOf",o.schoolSubjects)}}function Mt(a,i){if(1&a){const o=t.RV6();t.j41(0,"tr")(1,"td",25),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.DNE(5,Ft,2,1,"div",26)(6,Et,2,1,"div",26),t.k0s(),t.j41(7,"td"),t.EFF(8),t.k0s(),t.j41(9,"td",27)(10,"button",28),t.nI1(11,"navigationLocalize"),t.nrm(12,"lucide-icon",29),t.j41(13,"span",30),t.EFF(14),t.nI1(15,"mytranslate"),t.k0s()(),t.j41(16,"button",31),t.bIt("click",function(){const n=t.eBV(o).$implicit,s=t.XpG(3);return t.Njj(s.handelUpdateAdsCategory(n.id))}),t.nrm(17,"lucide-icon",29),t.j41(18,"span",30),t.EFF(19),t.nI1(20,"mytranslate"),t.k0s()(),t.j41(21,"button",32),t.nI1(22,"navigationLocalize"),t.nrm(23,"lucide-icon",33),t.j41(24,"span",30),t.EFF(25),t.nI1(26,"mytranslate"),t.k0s()(),t.j41(27,"button",34),t.bIt("click",function(){const n=t.eBV(o),s=n.$implicit,m=n.index,b=t.XpG(3);return t.Njj(b.handleRemoveAdsCategory(s,m))}),t.nrm(28,"lucide-icon",35),t.j41(29,"span",30),t.EFF(30),t.nI1(31,"mytranslate"),t.k0s()()()()}if(2&a){const o=i.$implicit,e=i.index,n=t.XpG(3);t.R7$(2),t.JRh(e+1),t.R7$(2),t.Lme(" ",o.name," - ",o.position," "),t.R7$(),t.Y8G("ngIf",null==o.schoolLevels?null:o.schoolLevels.length),t.R7$(),t.Y8G("ngIf",null==o.schoolSubjects?null:o.schoolSubjects.length),t.R7$(2),t.JRh(o.description),t.R7$(2),t.Y8G("routerLink",t.bMT(11,18,"/azota-ads/create-ads-template/"+o.id))("queryParams",t.eq3(30,rt,n.backTo)),t.R7$(2),t.Y8G("ngClass",t.lJ4(32,J)),t.R7$(2),t.JRh(t.bMT(15,20,"lang_cms_admin_ads_edit_ads_template")),t.R7$(3),t.Y8G("ngClass",t.lJ4(33,J)),t.R7$(2),t.JRh(t.bMT(20,22,"lang_auto_sua")),t.R7$(2),t.Y8G("routerLink",t.bMT(22,24,"/azota-ads/ads-list/"+o.id))("queryParams",t.eq3(34,rt,n.backTo)),t.R7$(2),t.Y8G("ngClass",t.lJ4(36,J)),t.R7$(2),t.JRh(t.bMT(26,26,"lang_common_view")),t.R7$(3),t.Y8G("ngClass",t.lJ4(37,J)),t.R7$(2),t.JRh(t.bMT(31,28,"lang_auto_xoa"))}}function $t(a,i){if(1&a&&(t.qex(0),t.DNE(1,Mt,32,38,"tr",24),t.bVm()),2&a){const o=t.XpG(2);t.R7$(),t.Y8G("ngForOf",o.adsCategoryList)}}function Lt(a,i){1&a&&(t.j41(0,"tr",36)(1,"td",37),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s()()),2&a&&(t.R7$(2),t.SpI(" ",t.bMT(3,1,"lang_homework_homework_list_not_found")," "))}function xt(a,i){if(1&a){const o=t.RV6();t.j41(0,"div",9)(1,"div",10)(2,"h3",11),t.EFF(3),t.nI1(4,"mytranslate"),t.k0s(),t.j41(5,"div",12)(6,"button",13),t.bIt("click",function(){t.eBV(o);const n=t.XpG();return t.Njj(n.handelCreateAdsCategory())}),t.j41(7,"span",14),t.nrm(8,"lucide-icon",15),t.k0s(),t.EFF(9),t.nI1(10,"mytranslate"),t.k0s()()(),t.j41(11,"div",16)(12,"div",17)(13,"drag-scroll")(14,"table",18)(15,"thead")(16,"tr",19)(17,"th",20),t.EFF(18),t.nI1(19,"mytranslate"),t.k0s(),t.j41(20,"th",21),t.EFF(21),t.nI1(22,"mytranslate"),t.k0s(),t.j41(23,"th"),t.EFF(24),t.nI1(25,"mytranslate"),t.k0s(),t.j41(26,"th",22),t.EFF(27),t.nI1(28,"mytranslate"),t.k0s()()(),t.j41(29,"tbody"),t.DNE(30,$t,2,1,"ng-container",23)(31,Lt,4,3,"ng-template",null,1,t.C5r),t.k0s()()()()()()}if(2&a){const o=t.sdS(32),e=t.XpG();t.R7$(3),t.SpI(" ",t.bMT(4,8,"lang_azt_advertisement_category_list")," "),t.R7$(6),t.SpI(" ",t.bMT(10,10,"lang_azt_add_category")," "),t.R7$(9),t.JRh(t.bMT(19,12,"lang_auto_STT")),t.R7$(3),t.JRh(t.bMT(22,14,"lang_azt_category_name")),t.R7$(3),t.JRh(t.bMT(25,16,"lang_auto_mo_ta")),t.R7$(3),t.JRh(t.bMT(28,18,"lang_auto_hanh_dong")),t.R7$(3),t.Y8G("ngIf",e.adsCategoryList.length)("ngIfElse",o)}}let Gt=(()=>{var a;class i extends G.H{handleRemoveAdsCategory(e,n){const s=`${this.commonService.myTranslateInstant("lang_azt_are_you_sure_you_want_to_delete_category")} <b>${e.name}<b/>?`;this.dialogService.open(nt.u,{data:{content:s},restoreFocus:!1,width:"500px"}).afterClosed().subscribe(m=>{m&&this.waitDestroy(this.categoryService.apiCategoryDeleteCategoryDelete(e.id).subscribe(b=>{if(!b.success)return this.errorStatusObj(b.message,!0);this.adsCategoryList.splice(n,1),this.successStatusObj("lang_admin_guide_delete_success",!0)}))})}handelCreateAdsCategory(){this.myNavigationWithQueryString("/azota-ads/create-ads-category",`?backto=${this.backTo}`)}handelUpdateAdsCategory(e){this.myNavigationWithQueryString(`/azota-ads/update-ads-category/${e}`,`?backto=${this.backTo}`)}getData(){this.initStatusObj(),this.waitDestroy(this.categoryService.apiCategoryListCategoriesGet().subscribe(e=>{if(!e.success)return this.errorStatusObj(e.message,!0);this.sAztCategoryAdsService.getSchoolLevelAndSubjects((n,s,m,b,F)=>{this.stopStatusObj(),F&&(e.data?.objs?.forEach(C=>{const{selectedSchoolLevels:v,selectedSchoolSubjects:M}=this.sAztCategoryAdsService.getSelectedLevelAndSubjects(C.filters??[],n,s);this.adsCategoryList.push({...C,schoolLevels:v,schoolSubjects:M})}),this.successStatusObj())})}))}ngOnInit(){super.ngOnInit(),this.getData()}constructor(e,n){super(),this.dialogService=e,this.categoryService=n,this.commonListService=(0,t.WQX)(K.Nz),this.sAztCategoryAdsService=(0,t.WQX)(Q),this.adsCategoryList=[],this.backTo="/azota-ads/ads-category"}}return(a=i).\u0275fac=function(e){return new(e||a)(t.rXU(q.i),t.rXU(H.M))},a.\u0275cmp=t.VBU({type:a,selectors:[["ads-category"]],features:[t.Vt3],decls:14,vars:21,consts:[["doneLoading",""],["emptyData",""],[3,"headerBackToLink"],[1,"mb-3","mt-3","flex","items-center"],[1,"clickable","btn","btn-dark-soft","mr-3",3,"routerLink"],["name","check","size","16",3,"ngClass"],[1,"clickable","btn","btn-info","mr-3",3,"routerLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[1,"ads-category","mt-5"],[1,"flex","flex-col","sm:flex-row","sm:items-center"],[1,"text-lg","font-medium","mr-4"],[1,"mt-2","sm:mt-0","sm:ml-auto"],[1,"btn","btn-primary",3,"click"],[1,"w-5","h-5","mr-2","inline-block"],["name","plus","size","20"],[1,"mt-3"],[1,"intro-y","h-full"],["drag-scroll-item","",1,"table","table-report","mt-2",2,"white-space","initial","display","table"],[1,"box"],[1,"whitespace-nowrap","text-center","p-2",2,"width","50px"],[2,"width","300px"],[1,"text-center","whitespace-nowrap",2,"width","100px"],[4,"ngIf","ngIfElse"],[4,"ngFor","ngForOf"],[1,"text-center"],[4,"ngIf"],[1,"text-center","whitespace-nowrap"],[1,"btn","btn-sm","btn-info","mr-2",3,"routerLink","queryParams"],["name","square-pen","size","18",3,"ngClass"],[1,"azt-hidden","md:inline-block"],[1,"btn","btn-sm","btn-primary-soft","mr-2",3,"click"],[1,"btn","btn-sm","btn-success-soft","mr-2",3,"routerLink","queryParams"],["name","eye","size","18",3,"ngClass"],[1,"btn","btn-sm","btn-danger-soft",3,"click"],["name","trash-2","size","18",3,"ngClass"],[2,"height","80px"],["colspan","4",1,"text-center","p-5"]],template:function(e,n){if(1&e&&(t.j41(0,"teacher-layout",2)(1,"div",3)(2,"a",4),t.nI1(3,"navigationLocalize"),t.nrm(4,"lucide-icon",5),t.EFF(5),t.nI1(6,"mytranslate"),t.k0s(),t.j41(7,"a",6),t.nI1(8,"navigationLocalize"),t.EFF(9),t.nI1(10,"mytranslate"),t.k0s()(),t.DNE(11,Tt,1,1,"azt-loading-effect",7)(12,xt,33,20,"ng-template",null,0,t.C5r),t.k0s()),2&e){const s=t.sdS(13);t.Y8G("headerBackToLink","/super-role/admin-tool"),t.R7$(2),t.Y8G("routerLink",t.eq3(16,ot,t.bMT(3,8,"/azota-ads/ads-category"))),t.R7$(2),t.Y8G("ngClass",t.lJ4(18,J)),t.R7$(),t.SpI(" ",t.bMT(6,10,"lang_azt_manage_categories")," "),t.R7$(2),t.Y8G("routerLink",t.eq3(19,ot,t.bMT(8,12,"/azota-ads/ads-list/0"))),t.R7$(2),t.SpI(" ",t.bMT(10,14,"lang_azt_manage_ads")," "),t.R7$(2),t.Y8G("ngIf",1==n.statusObj.loading)("ngIfElse",s)}},dependencies:[d.Wk,c.YU,c.Sq,c.bT,D.K,E.Q,h.WGl,j.jd,j.Ew,R.F2,R.wp],encapsulation:2}),i})();const st=a=>({"border-danger":a});function Nt(a,i){if(1&a&&t.nrm(0,"azt-loading-effect",4),2&a){const o=t.XpG();t.Y8G("currentStatusObj",o.statusObj)}}function Dt(a,i){1&a&&(t.j41(0,"div",32)(1,"span"),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s()()),2&a&&(t.R7$(2),t.SpI("",t.bMT(3,1,"lang_azt_please_enter_category_name"),"!"))}function Ut(a,i){if(1&a&&(t.j41(0,"mat-option",33),t.EFF(1),t.k0s()),2&a){const o=i.$implicit;t.Y8G("value",o),t.R7$(),t.SpI(" ",o," ")}}function Pt(a,i){1&a&&(t.j41(0,"div",32)(1,"span"),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s()()),2&a&&(t.R7$(2),t.SpI("",t.bMT(3,1,"lang_azt_please_enter_information_field"),"!"))}function Yt(a,i){if(1&a&&(t.j41(0,"mat-option",33),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&a){const o=i.$implicit;t.Y8G("value",o),t.R7$(),t.JRh(t.bMT(2,2,o))}}function wt(a,i){if(1&a&&(t.j41(0,"mat-option",33),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&a){const o=i.$implicit;t.Y8G("value",o),t.R7$(),t.JRh(t.bMT(2,2,o))}}function Bt(a,i){1&a&&(t.j41(0,"div"),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&a&&(t.R7$(),t.JRh(t.bMT(2,1,"lang_admin_ads_category_attributes_are_empty")))}function Vt(a,i){if(1&a){const o=t.RV6();t.j41(0,"div",34)(1,"div",35)(2,"div",36)(3,"div",37)(4,"span",38),t.EFF(5),t.nI1(6,"mytranslate"),t.k0s(),t.nrm(7,"input",39),t.nI1(8,"mytranslate"),t.k0s(),t.j41(9,"div",40)(10,"button",41),t.bIt("click",function(){const n=t.eBV(o).index,s=t.XpG(2);return t.Njj(s.removeFileForm(n))}),t.j41(11,"span",42),t.nrm(12,"lucide-icon",43),t.k0s()()()(),t.j41(13,"div",44)(14,"div",11)(15,"div",45),t.EFF(16),t.nI1(17,"mytranslate"),t.k0s(),t.nrm(18,"input",46),t.nI1(19,"mytranslate"),t.k0s(),t.j41(20,"div",14)(21,"label",47),t.EFF(22),t.nI1(23,"mytranslate"),t.k0s(),t.j41(24,"div",11),t.nrm(25,"textarea",48),t.nI1(26,"mytranslate"),t.k0s()()()()()}if(2&a){const o=i.$implicit;t.R7$(),t.Y8G("formGroup",o),t.R7$(4),t.SpI(" ",t.bMT(6,9,"lang_azt_field_name")," "),t.R7$(2),t.FS9("placeholder",t.bMT(8,11,"lang_azt_field_name")+"..."),t.Y8G("ngClass",t.eq3(21,st,o.controls.displayName.errors&&o.controls.displayName.touched)),t.R7$(9),t.SpI(" ",t.bMT(17,13,"lang_azt_variable_name")," "),t.R7$(2),t.FS9("placeholder",t.bMT(19,15,"lang_azt_variable_name")+"..."),t.Y8G("ngClass",t.eq3(23,st,o.controls.variableName.errors&&o.controls.variableName.touched)),t.R7$(4),t.JRh(t.bMT(23,17,"lang_azt_field_description")),t.R7$(3),t.FS9("placeholder",t.bMT(26,19,"lang_azt_field_description")+"...")}}function Jt(a,i){if(1&a){const o=t.RV6();t.j41(0,"div",5)(1,"h3",6),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s(),t.j41(4,"div",7)(5,"form",8)(6,"div",9)(7,"label",10),t.EFF(8),t.nI1(9,"mytranslate"),t.k0s(),t.j41(10,"div",11),t.nrm(11,"input",12),t.nI1(12,"mytranslate"),t.k0s(),t.DNE(13,Dt,4,3,"div",13),t.k0s(),t.j41(14,"div",14)(15,"label",10),t.EFF(16),t.nI1(17,"mytranslate"),t.k0s(),t.j41(18,"mat-form-field",15)(19,"mat-select",16,1)(21,"mat-option"),t.nrm(22,"ngx-mat-select-search",17),t.nI1(23,"mytranslate"),t.nI1(24,"mytranslate"),t.k0s(),t.DNE(25,Ut,2,2,"mat-option",18),t.k0s()()(),t.j41(26,"div",14)(27,"label",19),t.EFF(28),t.nI1(29,"mytranslate"),t.k0s(),t.j41(30,"div",11),t.nrm(31,"textarea",20),t.nI1(32,"mytranslate"),t.k0s(),t.DNE(33,Pt,4,3,"div",13),t.k0s(),t.j41(34,"div",14)(35,"label",21),t.EFF(36),t.nI1(37,"mytranslate"),t.k0s(),t.j41(38,"mat-form-field",22)(39,"mat-select",23),t.DNE(40,Yt,3,4,"mat-option",18),t.k0s()()(),t.j41(41,"div",14)(42,"label",21),t.EFF(43),t.nI1(44,"mytranslate"),t.k0s(),t.j41(45,"mat-form-field",22)(46,"mat-select",23),t.DNE(47,wt,3,4,"mat-option",18),t.k0s()()(),t.j41(48,"div",14)(49,"div",24)(50,"label",25),t.EFF(51),t.nI1(52,"mytranslate"),t.k0s()(),t.DNE(53,Bt,3,3,"div",26),t.j41(54,"div",27),t.DNE(55,Vt,27,25,"div",28),t.k0s()()()(),t.j41(56,"div",29)(57,"button",30),t.bIt("click",function(){t.eBV(o);const n=t.XpG();return t.Njj(n.handleDestroy())}),t.EFF(58),t.nI1(59,"mytranslate"),t.k0s(),t.j41(60,"button",31),t.bIt("click",function(){t.eBV(o);const n=t.XpG();return t.Njj(n.updateAdsCategory())}),t.j41(61,"span"),t.EFF(62),t.nI1(63,"mytranslate"),t.k0s()()()()}if(2&a){const o=t.sdS(20),e=t.XpG();t.R7$(2),t.SpI(" ",t.bMT(3,25,"lang_azt_update_category")," "),t.R7$(3),t.Y8G("formGroup",e.form),t.R7$(3),t.JRh(t.bMT(9,27,"lang_azt_category_name")),t.R7$(3),t.FS9("placeholder",t.bMT(12,29,"lang_azt_enter_category_name")),t.R7$(2),t.Y8G("ngIf",e.form.controls.name.errors&&e.form.controls.name.touched),t.R7$(3),t.JRh(t.bMT(17,31,"lang_azt_category_ads_position")),t.R7$(3),t.Y8G("formControl",e.form.controls.adsPosition),t.R7$(3),t.FS9("placeholderLabel",t.bMT(23,33,"lang_search_by_name")),t.FS9("noEntriesFoundLabel",t.bMT(24,35,"lang_search_not_found")),t.Y8G("formControl",o.searchControl),t.R7$(3),t.Y8G("ngForOf",o.filter(e.listPositions,void 0)),t.R7$(3),t.JRh(t.bMT(29,37,"lang_auto_mo_ta")),t.R7$(3),t.FS9("placeholder",t.bMT(32,39,"lang_core_nhap_mo_ta")),t.R7$(2),t.Y8G("ngIf",e.form.controls.desc.errors&&e.form.controls.desc.touched),t.R7$(3),t.JRh(t.bMT(37,41,"lang_admin_ads_select_school_level")),t.R7$(3),t.Y8G("formControl",e.form.controls.schoolLevels),t.R7$(),t.Y8G("ngForOf",e.allSchoolLevels),t.R7$(3),t.JRh(t.bMT(44,43,"lang_admin_ads_select_school_subject")),t.R7$(3),t.Y8G("formControl",e.form.controls.schoolSubjects),t.R7$(),t.Y8G("ngForOf",e.allSchoolSubjects),t.R7$(4),t.JRh(t.bMT(52,45,"lang_azt_information_field")),t.R7$(2),t.Y8G("ngIf",!e.form.controls.attributesList.controls.length),t.R7$(2),t.Y8G("ngForOf",e.form.controls.attributesList.controls),t.R7$(3),t.SpI(" ",t.bMT(59,47,"lang_button_cancel")," "),t.R7$(4),t.JRh(t.bMT(63,49,"lang_button_update"))}}let Xt=(()=>{var a;class i extends G.H{updateAdsCategory(){if(this.form.invalid)return this.form.markAllAsTouched();const e=this.convertFormToParam();this.waitDestroy(this.categoryService.apiCategoryUpdateCategoryPut(e,this.categoryId).subscribe(n=>{if(!n.success)return this.errorStatusObj(n.message,!0);this.successStatusObj("lang_cms_update_success",!0),this.handleDestroy()}))}handleDestroy(){this.myNavigation(this.backToLink)}addNewFieldForm(){this.form.controls.attributesList.push(this.createFieldForm("","",""))}removeFileForm(e){this.form.controls.attributesList.removeAt(e)}getData(){this.initStatusObj(),this.waitDestroy(this.categoryService.apiCategoryGetCategoryGet(this.categoryId).subscribe(e=>{if(!e.success)return this.errorStatusObj(e.message,!0);const n=e.data;this.form.controls.name.setValue(n?.name??""),this.form.controls.adsPosition.setValue(this.commonService.getEnumTypeWithDefault(O.rA,n?.position??"",O.rA.ALLPOSITION)),this.form.controls.desc.setValue(n?.description??""),n?.attributes?.forEach(s=>{this.form.controls.attributesList.push(this.createFieldForm(s.displayName,s.variableName,s.description??"",s.id))}),this.sAztCategoryAdsService.getSchoolLevelAndSubjects((s,m,b,F,C)=>{if(this.stopStatusObj(),!C)return;this.allSchoolLevelObjs=s,this.allSchoolSubjectObjs=m,this.allSchoolLevels=b,this.allSchoolSubjects=F;const{selectedSchoolLevels:v,selectedSchoolSubjects:M}=this.sAztCategoryAdsService.getSelectedLevelAndSubjects(n?.filters??[],s,m);this.form.controls.schoolLevels.setValue(v),this.form.controls.schoolSubjects.setValue(M)})}))}createFieldForm(e,n,s,m){return new r.gE({id:new r.MJ(m,{nonNullable:!0}),displayName:new r.MJ(e,{nonNullable:!0,validators:[r.k0.required,z.M.noWhiteSpace]}),variableName:new r.MJ(n,{nonNullable:!0,validators:[r.k0.required,z.M.noWhiteSpace]}),description:new r.MJ(s,{nonNullable:!0})})}convertFormToParam(){const{attributesList:e,name:n,adsPosition:s,desc:m,schoolLevels:b,schoolSubjects:F}=this.form.controls,C=e.controls.map(g=>({id:g.controls.id?.value??0,displayName:g.controls.displayName.value,variableName:g.controls.variableName.value.toUpperCase(),description:g.controls.description.value}));let v=this.commonService.uniqueArray(this.allSchoolLevelObjs.filter(g=>b.value.includes(g?.key??"")).map(g=>g.id)),M=this.commonService.uniqueArray(this.allSchoolSubjectObjs.filter(g=>F.value.includes(g?.key??"")).map(g=>g.id)),$=v.map(g=>({filterType:"level",filterObjectId:g}));return $=$.concat(M.map(g=>({filterType:"subject",filterObjectId:g}))),{name:n.value,position:s.value,description:m.value,attributes:C,filterOptions:$}}ngOnInit(){super.ngOnInit(),this.categoryId=Number(this.commonService.getMyParam(this.activeRoute,"categoryId")??0),this.backToLink=this.commonService.getMyQueryParam("backto")??"/azota-ads/ads-category",this.getData()}constructor(e,n){super(),this.categoryService=e,this.activeRoute=n,this.commonListService=(0,t.WQX)(K.Nz),this.sAztCategoryAdsService=(0,t.WQX)(Q),this.backToLink="",this.categoryId=0,this.listPositions=this.commonService.getEnumValues(O.rA),this.allSchoolLevels=[],this.allSchoolSubjects=[],this.allSchoolLevelObjs=[],this.allSchoolSubjectObjs=[],this.form=new r.gE({name:new r.MJ("",{nonNullable:!0,validators:[r.k0.required,z.M.noWhiteSpace]}),adsPosition:new r.MJ(O.rA.ALLPOSITION,{nonNullable:!0,validators:[r.k0.required]}),desc:new r.MJ("",{nonNullable:!0}),attributesList:new r.Yp([]),schoolLevels:new r.MJ([],{nonNullable:!0}),schoolSubjects:new r.MJ([],{nonNullable:!0})})}}return(a=i).\u0275fac=function(e){return new(e||a)(t.rXU(O.M$),t.rXU(d.nX))},a.\u0275cmp=t.VBU({type:a,selectors:[["update-ads-category"]],features:[t.Vt3],decls:4,vars:3,consts:[["doneLoading",""],["searchInListPosition","searchInList"],[3,"headerBackToLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[1,"mt-5"],[1,"text-md","uppercase","font-medium"],[1,"box","mt-4","p-5"],[3,"formGroup"],[1,"azt-form-group"],["for","name",1,"form-label","font-medium"],[1,"input-group"],["type","text","id","name","formControlName","name",1,"form-control",3,"placeholder"],["class","text-danger text-xs font-medium mt-2",4,"ngIf"],[1,"azt-form-group","mt-3"],["id","bankIdInput","appearance","outline"],["searchInList","",3,"formControl"],[3,"formControl","placeholderLabel","noEntriesFoundLabel"],[3,"value",4,"ngFor","ngForOf"],["for","desc",1,"form-label","font-medium"],["formControlName","desc","name","desc","id","desc",1,"form-control",2,"height","80px",3,"placeholder"],[1,"form-label","font-medium","mb-3"],[1,"w-full","mat-multiple-select-box"],["multiple","",3,"formControl"],[1,"flex","flex-col","sm:flex-row","sm:items-center"],["for","name",1,"form-label","font-medium","mr-2"],[4,"ngIf"],[1,"grid","grid-cols-12","gap-4","mt-3"],["class","col-span-12 md:col-span-6",4,"ngFor","ngForOf"],[1,"flex","ml-auto","w-full","justify-end","mt-3"],["type","button",1,"btn","btn-secondary","min-width-100","mr-2",3,"click"],[1,"btn","btn-primary","min-width-100",3,"click"],[1,"text-danger","text-xs","font-medium","mt-2"],[3,"value"],[1,"col-span-12","md:col-span-6"],[1,"border","border-slate-200","dark:border-darkmode-400","rounded-md","pb-1",3,"formGroup"],[1,"p-2","bg-slate-100","dark:bg-darkmode-400","flex","items-center"],[1,"flex","items-center"],[1,"mr-2"],["type","text","formControlName","displayName",1,"form-control","form-control-sm",2,"width","9rem",3,"ngClass","placeholder"],[1,"ml-auto"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],[1,"w-4","h-4","inline-block"],["name","trash-2","size","18"],[1,"p-3"],[1,"input-group-text","whitespace-nowrap",2,"width","125px"],["type","text","formControlName","variableName",1,"form-control","form-control-sm",3,"ngClass","placeholder"],["for","name",1,"form-label"],["type","text","formControlName","description",1,"form-control","form-control-sm",2,"height","60px",3,"placeholder"]],template:function(e,n){if(1&e&&(t.j41(0,"teacher-layout",2),t.DNE(1,Nt,1,1,"azt-loading-effect",3)(2,Jt,64,51,"ng-template",null,0,t.C5r),t.k0s()),2&e){const s=t.sdS(3);t.Y8G("headerBackToLink",n.backToLink),t.R7$(),t.Y8G("ngIf",1==n.statusObj.loading)("ngIfElse",s)}},dependencies:[c.YU,c.Sq,c.bT,r.qT,r.me,r.BC,r.cb,Y.wT,w.rl,B.VO,r.l_,r.j4,r.JD,D.K,et.t,V.x,E.Q,h.WGl,p.U9,R.wp],encapsulation:2}),i})();var Z=l(82653),it=l(82040),lt=l(39712),ct=l(89163),Wt=l(33887),mt=l(52811);const Kt=a=>({"error-border":a});function Qt(a,i){1&a&&(t.j41(0,"span",12),t.nrm(1,"azt-loading-ui"),t.k0s())}let Ht=(()=>{var a;class i extends Wt._{closeDialog(){this.dialogRef.close(void 0)}saveObj(){this.initStatusObj(),this.waitDestroy(this.partnerService.apiPartnerCreatePartnerPost({name:this.nameFormControl.value}).subscribe(n=>{if(!n.success)return this.errorStatusObj(n.message,!0);this.waitDestroy(this.partnerService.apiPartnerListPartnersGet().subscribe(s=>{if(!s.success)return this.closeDialog();this.stopStatusObj(),this.dialogRef.close(s.data?.objs??[])}))}))}ngOnInit(){super.ngOnInit()}constructor(e,n,s){super(s,n),this.partnerService=e,this.dialogRef=n,this.data=s,this.nameFormControl=new r.MJ("",{nonNullable:!0,validators:[z.M.noWhiteSpace]})}}return(a=i).\u0275fac=function(e){return new(e||a)(t.rXU(O.KM),t.rXU(ct.CP,8),t.rXU(ct.Vh))},a.\u0275cmp=t.VBU({type:a,selectors:[["app-create-partner-dialog"]],features:[t.Vt3],decls:19,vars:15,consts:[[1,"box","p-2"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"box","mt-4","p-2"],[1,"grid","grid-cols-12","mb-3"],[1,"col-span-12","lg:col-span-12"],[1,"form-label","mb-0","font-medium","flex","items-center"],[1,"setting-input"],["type","text",1,"form-control",3,"formControl","ngClass"],[1,"p-2","flex","justify-end"],[1,"btn","btn-secondary","w-24","mr-2",3,"click"],[1,"btn","btn-primary",3,"click","disabled"],["class","w-4 h-4 inline-block mr-2",4,"ngIf"],[1,"w-4","h-4","inline-block","mr-2"]],template:function(e,n){1&e&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"label",5),t.EFF(6),t.nI1(7,"mytranslate"),t.k0s()(),t.j41(8,"div",4)(9,"div",6),t.nrm(10,"input",7),t.k0s()()()(),t.j41(11,"div",8)(12,"button",9),t.bIt("click",function(){return n.closeDialog()}),t.EFF(13),t.nI1(14,"mytranslate"),t.k0s(),t.j41(15,"button",10),t.bIt("click",function(){return n.saveObj()}),t.DNE(16,Qt,2,0,"span",11),t.EFF(17),t.nI1(18,"mytranslate"),t.k0s()()()()),2&e&&(t.R7$(6),t.SpI(" ",t.bMT(7,7,"lang_cms_admin_create_ads_partner")," "),t.R7$(4),t.Y8G("formControl",n.nameFormControl)("ngClass",t.eq3(13,Kt,n.nameFormControl.invalid)),t.R7$(3),t.SpI(" ",t.bMT(14,9,"lang_auto_huy")," "),t.R7$(2),t.Y8G("disabled",n.statusObj.loading||n.nameFormControl.invalid),t.R7$(),t.Y8G("ngIf",n.statusObj.loading),t.R7$(),t.SpI(" ",t.bMT(18,11,"lang_auto_luu")," "))},dependencies:[c.YU,c.bT,r.me,r.BC,r.l_,mt.R,R.wp],encapsulation:2}),i})(),dt=(()=>{var a;class i extends G.H{cancel(){this.commonService.myNavigation(this.backTo)}uploadThumbnailImage(e){this.form.controls.thumbnailUrl.setValue(e.url??"")}createPartner(){this.sAztDialogService.open(Ht,{width:"500px",restoreFocus:!1,data:{}}).afterClosed().subscribe(e=>{null!=e&&(this.partnerObjs=e)})}constructor(){super(),this.sAztDialogService=(0,t.WQX)(q.i),this.categoryId=0,this.templateObj=void 0,this.partnerObjs=[],this.attributeObjs=[],this.allUploadToCdnMenuTypes=lt.b8,this.allUploadFileTypes=lt.PO,this.backTo="",this.form=new r.gE({name:new r.MJ("",{nonNullable:!0,validators:[z.M.noWhiteSpace]}),partnerId:new r.MJ(0,{nonNullable:!0,validators:[r.k0.min(1)]}),actionUrl:new r.MJ("",{nonNullable:!0,validators:[z.M.noWhiteSpace]}),description:new r.MJ("",{nonNullable:!0}),thumbnailUrl:new r.MJ("",{nonNullable:!0}),isActive:new r.MJ(!0,{nonNullable:!0}),attributeObjs:new r.Yp([])})}}return(a=i).\u0275fac=function(e){return new(e||a)},a.\u0275cmp=t.VBU({type:a,selectors:[["app-base-create-or-update-ads"]],features:[t.Vt3],decls:0,vars:0,template:function(e,n){},encapsulation:2}),i})();var qt=l(17149),Zt=l(85388),ut=l(60403),pt=l(7343),_t=l(20013),tt=l(86359);const U=a=>({"error-border":a}),te=a=>[a];function ee(a,i){if(1&a&&t.nrm(0,"azt-loading-effect",4),2&a){const o=t.XpG();t.Y8G("currentStatusObj",o.statusObj)}}function ae(a,i){if(1&a&&(t.j41(0,"mat-option",34),t.EFF(1),t.k0s()),2&a){const o=i.$implicit;t.Y8G("value",o.id),t.R7$(),t.SpI(" ",o.name," ")}}function ne(a,i){if(1&a&&(t.j41(0,"div",10)(1,"div",11)(2,"label",12),t.EFF(3),t.k0s()(),t.j41(4,"div",11)(5,"div",20),t.nrm(6,"input",21),t.k0s()()()),2&a){const o=i.$implicit;t.R7$(3),t.Lme("",o.controls.attributeDisplayName.value," - ",o.controls.attributeVariableName.value,""),t.R7$(3),t.Y8G("formControl",o.controls.attributeValue)("ngClass",t.eq3(4,U,o.controls.attributeValue.invalid))}}function oe(a,i){if(1&a&&(t.j41(0,"div",35)(1,"div",11),t.nrm(2,"azt-frontend-ads-item",36),t.k0s()()),2&a){const o=t.XpG(2);t.R7$(2),t.Y8G("obj",o.currentAdsObj)}}function re(a,i){if(1&a){const o=t.RV6();t.j41(0,"div",5)(1,"form",6)(2,"div",7)(3,"h3",8),t.EFF(4),t.nI1(5,"mytranslate"),t.k0s(),t.j41(6,"div",9)(7,"div",10)(8,"div",11)(9,"label",12),t.EFF(10),t.nI1(11,"mytranslate"),t.k0s()(),t.j41(12,"div",13)(13,"div",14)(14,"mat-form-field",15)(15,"mat-select",16,1)(17,"mat-option"),t.nrm(18,"ngx-mat-select-search",17),t.nI1(19,"mytranslate"),t.nI1(20,"mytranslate"),t.k0s(),t.DNE(21,ae,2,2,"mat-option",18),t.k0s()()(),t.j41(22,"div",19),t.bIt("click",function(){t.eBV(o);const n=t.XpG();return t.Njj(n.createPartner())}),t.EFF(23),t.nI1(24,"mytranslate"),t.k0s()()(),t.j41(25,"div",10)(26,"div",11)(27,"label",12),t.EFF(28),t.nI1(29,"mytranslate"),t.k0s()(),t.j41(30,"div",11)(31,"div",20),t.nrm(32,"input",21),t.k0s()()(),t.j41(33,"div",10)(34,"div",11)(35,"label",12),t.EFF(36),t.nI1(37,"mytranslate"),t.k0s()(),t.j41(38,"div",11)(39,"div",20),t.nrm(40,"input",21),t.k0s()()(),t.j41(41,"div",10)(42,"div",11)(43,"label",12),t.EFF(44),t.nI1(45,"mytranslate"),t.k0s()(),t.j41(46,"div",11)(47,"div",20),t.nrm(48,"textarea",21),t.k0s()()(),t.j41(49,"div",10)(50,"div",11)(51,"label",12),t.EFF(52),t.nI1(53,"mytranslate"),t.k0s()(),t.j41(54,"div",11)(55,"div",20),t.nrm(56,"input",21),t.k0s()(),t.j41(57,"div",22)(58,"azt-upload-single-box",23),t.bIt("uploadComplete",function(n){t.eBV(o);const s=t.XpG();return t.Njj(s.uploadThumbnailImage(n))}),t.EFF(59),t.nI1(60,"mytranslate"),t.k0s()()(),t.DNE(61,ne,7,6,"div",24),t.j41(62,"div",10)(63,"div",11)(64,"div",25),t.nrm(65,"input",26),t.j41(66,"label",27),t.EFF(67),t.nI1(68,"mytranslate"),t.k0s()()()(),t.nrm(69,"hr",28),t.DNE(70,oe,3,1,"div",29),t.k0s(),t.j41(71,"div",30)(72,"button",31),t.bIt("click",function(){t.eBV(o);const n=t.XpG();return t.Njj(n.cancel())}),t.EFF(73),t.nI1(74,"mytranslate"),t.k0s(),t.j41(75,"button",32),t.bIt("click",function(){t.eBV(o);const n=t.XpG();return t.Njj(n.saveObj(!1))}),t.EFF(76),t.nI1(77,"mytranslate"),t.k0s(),t.j41(78,"button",33),t.bIt("click",function(){t.eBV(o);const n=t.XpG();return t.Njj(n.saveObj(!0))}),t.EFF(79),t.nI1(80,"mytranslate"),t.k0s()()()()()}if(2&a){const o=t.sdS(16),e=t.XpG();t.R7$(),t.Y8G("formGroup",e.form),t.R7$(3),t.SpI(" ",t.bMT(5,35,e.adsId?"lang_cms_admin_edit_ads_title":"lang_cms_admin_create_ads_title")," "),t.R7$(6),t.SpI(" ",t.bMT(11,37,"lang_cms_admin_create_ads_partner")," "),t.R7$(4),t.Y8G("ngClass",t.eq3(63,U,e.form.controls.partnerId.invalid)),t.R7$(),t.Y8G("formControl",e.form.controls.partnerId),t.R7$(3),t.FS9("placeholderLabel",t.bMT(19,39,"lang_search_by_name")),t.FS9("noEntriesFoundLabel",t.bMT(20,41,"lang_search_not_found")),t.Y8G("formControl",o.searchControl),t.R7$(3),t.Y8G("ngForOf",o.filter(e.partnerObjs,"name")),t.R7$(2),t.JRh(t.bMT(24,43,"lang_cms_admin_create_ads_create_new_partner")),t.R7$(5),t.SpI(" ",t.bMT(29,45,"lang_cms_admin_create_ads_name")," "),t.R7$(4),t.Y8G("formControl",e.form.controls.name)("ngClass",t.eq3(65,U,e.form.controls.name.invalid)),t.R7$(4),t.SpI(" ",t.bMT(37,47,"lang_cms_admin_create_ads_action_url")," "),t.R7$(4),t.Y8G("formControl",e.form.controls.actionUrl)("ngClass",t.eq3(67,U,e.form.controls.actionUrl.invalid)),t.R7$(4),t.SpI(" ",t.bMT(45,49,"lang_cms_admin_create_ads_description")," "),t.R7$(4),t.Y8G("formControl",e.form.controls.description)("ngClass",t.eq3(69,U,e.form.controls.description.invalid)),t.R7$(4),t.SpI(" ",t.bMT(53,51,"lang_cms_admin_create_ads_thumbnail_url")," "),t.R7$(4),t.Y8G("formControl",e.form.controls.thumbnailUrl)("ngClass",t.eq3(71,U,e.form.controls.thumbnailUrl.invalid)),t.R7$(2),t.Y8G("uploadToCdnMenu",e.allUploadToCdnMenuTypes.ADMIN)("fileType",t.eq3(73,te,e.allUploadFileTypes.IMAGE))("allowCompressImage",!1),t.R7$(),t.SpI(" ",t.bMT(60,53,"lang_cms_admin_create_ads_upload_image")," "),t.R7$(2),t.Y8G("ngForOf",e.form.controls.attributeObjs.controls),t.R7$(4),t.Y8G("formControl",e.form.controls.isActive),t.R7$(2),t.JRh(t.bMT(68,55,"lang_cms_admin_create_ads_is_active")),t.R7$(3),t.Y8G("ngIf",e.currentAdsObj),t.R7$(3),t.JRh(t.bMT(74,57,"lang_auto_huy")),t.R7$(2),t.Y8G("disabled",e.form.invalid),t.R7$(),t.JRh(t.bMT(77,59,"lang_auto_luu")),t.R7$(2),t.Y8G("disabled",e.form.invalid),t.R7$(),t.JRh(t.bMT(80,61,"lang_core_luu_va_dong"))}}let se=(()=>{var a;class i extends dt{initForm(){this.form.controls.partnerId.setValue(this.commonService.getFirstOfArray(this.partnerObjs)?.id??0),this.attributeObjs.forEach(e=>{this.form.controls.attributeObjs.push(new r.gE({attributeId:new r.MJ(e.id,{nonNullable:!0}),attributeDisplayName:new r.MJ(e.displayName,{nonNullable:!0}),attributeVariableName:new r.MJ(e.variableName,{nonNullable:!0}),attributeValue:new r.MJ("",{nonNullable:!0})}))})}initData(){this.initStatusObj(),this.waitDestroy((0,Z.p)([this.categoryTemplateService.apiCategoryTemplateListCategoryTemplateGet(this.categoryId),this.categoryAttributeService.apiCategoryAttributeListCategoryAttributesGet(this.categoryId),this.partnerService.apiPartnerListPartnersGet()]).pipe((0,it.M)(([e,n,s])=>e.success?n.success?s.success?(this.templateObj=e.data,this.attributeObjs=n.data?.objs??[],this.partnerObjs=s.data?.objs??[],this.initForm(),void this.stopStatusObj()):this.errorStatusObj(s.message,!0):this.errorStatusObj(n.message,!0):this.errorStatusObj(e.message,!0))).subscribe())}saveObj(e){this.initStatusObj();let n=this.form.getRawValue(),s={categoryId:this.categoryId,partnerId:n.partnerId,name:n.name,description:n.description,thumbnailUrl:n.thumbnailUrl,actionUrl:n.actionUrl,isActive:n.isActive?1:0,attributes:n.attributeObjs.map(m=>({attributeId:m.attributeId,value:m.attributeValue}))};this.waitDestroy(this.productService.apiProductCreateProductPost(s).subscribe(m=>{if(!m.success)return this.errorStatusObj(m.message,!0);this.successStatusObj("lang_cms_add_success",!0),e&&this.cancel()}))}ngOnInit(){super.ngOnInit(),this.commonService.translateMetaData({title:"lang_cms_admin_common_ads",description:"lang_cms_admin_common_ads",image:"lang_cms_test_image"}),this.categoryId=Number(this.commonService.getMyParam(this.activeRoute,"categoryId")??0),this.backTo="/azota-ads/ads-list/"+this.categoryId,this.initData(),this.form.valueChanges.subscribe(e=>{let n=this.form.controls.attributeObjs.getRawValue().map(s=>({id:0,productId:0,attributeId:s.attributeId,value:s.attributeValue,attribute:{id:s.attributeId,categoryId:this.categoryId,displayName:s.attributeDisplayName,variableName:s.attributeVariableName}}));this.currentAdsObj={id:0,categoryId:this.categoryId,partnerId:this.form.controls.partnerId.value,name:this.form.controls.name.value,description:this.form.controls.description.value,thumbnailUrl:this.form.controls.thumbnailUrl.value,actionUrl:this.form.controls.actionUrl.value,isActive:this.form.controls.isActive.value?1:0,template:this.templateObj?.data,productAttributes:n}})}constructor(e,n,s,m,b){super(),this.partnerService=e,this.productService=n,this.categoryAttributeService=s,this.categoryTemplateService=m,this.activeRoute=b,this.adsId=0}}return(a=i).\u0275fac=function(e){return new(e||a)(t.rXU(qt.K),t.rXU(Zt.b),t.rXU(ut.C),t.rXU(pt.O),t.rXU(d.nX))},a.\u0275cmp=t.VBU({type:a,selectors:[["app-create-ads"]],features:[t.Vt3],decls:4,vars:3,consts:[["doneLoading",""],["searchInListPartner","searchInList"],[3,"headerBackToLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[1,"mt-5"],[3,"formGroup"],[1,"azt-config-document","mx-auto",2,"max-width","1000px"],[1,"text-md","uppercase","font-medium"],[1,"box","mt-4","p-5"],[1,"grid","grid-cols-12","mb-3"],[1,"col-span-12","lg:col-span-12"],[1,"form-label","mb-0","font-medium","flex","items-center"],[1,"col-span-12"],[1,"azt-form-group"],["appearance","outline",2,"width","100%",3,"ngClass"],["searchInList","",3,"formControl"],[3,"formControl","placeholderLabel","noEntriesFoundLabel"],[3,"value",4,"ngFor","ngForOf"],[1,"link-color","clickable","pt-1",3,"click"],[1,"setting-input"],["type","text",1,"form-control",3,"formControl","ngClass"],[1,"link-color","clickable","pt-1"],[1,"inline-block",3,"uploadComplete","uploadToCdnMenu","fileType","allowCompressImage"],["class","grid grid-cols-12 mb-3",4,"ngFor","ngForOf"],[1,"form-check","form-switch","items-center","w-full","clickable"],["id","isActive","type","checkbox",1,"form-check-input","mr-2",3,"formControl"],["for","isActive",1,"flex","items-center","mr-auto"],[1,"mb-3"],["class","grid grid-cols-12mb-3",4,"ngIf"],[1,"text-right","mt-5"],[1,"btn","w-24","btn-secondary","mr-3",3,"click"],[1,"btn","btn-primary-soft","w-24","mr-3",3,"click","disabled"],[1,"btn","btn-primary",3,"click","disabled"],[3,"value"],[1,"grid","grid-cols-12mb-3"],[3,"obj"]],template:function(e,n){if(1&e&&(t.j41(0,"teacher-layout",2),t.DNE(1,ee,1,1,"azt-loading-effect",3)(2,re,81,75,"ng-template",null,0,t.C5r),t.k0s()),2&e){const s=t.sdS(3);t.Y8G("headerBackToLink",n.backTo),t.R7$(),t.Y8G("ngIf",1==n.statusObj.loading)("ngIfElse",s)}},dependencies:[c.YU,c.Sq,c.bT,r.qT,r.me,r.Zm,r.BC,r.cb,Y.wT,w.rl,B.VO,r.l_,r.j4,D.K,_t.T,tt.f,V.x,E.Q,p.U9,R.wp],encapsulation:2}),i})();const P=a=>({"error-border":a}),ie=a=>[a];function le(a,i){if(1&a&&t.nrm(0,"azt-loading-effect",4),2&a){const o=t.XpG();t.Y8G("currentStatusObj",o.statusObj)}}function ce(a,i){if(1&a&&(t.j41(0,"mat-option",34),t.EFF(1),t.k0s()),2&a){const o=i.$implicit;t.Y8G("value",o.id),t.R7$(),t.SpI(" ",o.name," ")}}function me(a,i){if(1&a&&(t.j41(0,"div",10)(1,"div",11)(2,"label",12),t.EFF(3),t.k0s()(),t.j41(4,"div",11)(5,"div",20),t.nrm(6,"input",21),t.k0s()()()),2&a){const o=i.$implicit;t.R7$(3),t.Lme("",o.controls.attributeDisplayName.value," - ",o.controls.attributeVariableName.value,""),t.R7$(3),t.Y8G("formControl",o.controls.attributeValue)("ngClass",t.eq3(4,P,o.controls.attributeValue.invalid))}}function de(a,i){if(1&a&&(t.j41(0,"div",35)(1,"div",11),t.nrm(2,"azt-frontend-ads-item",36),t.k0s()()),2&a){const o=t.XpG(2);t.R7$(2),t.Y8G("obj",o.currentAdsObj)}}function ue(a,i){if(1&a){const o=t.RV6();t.j41(0,"div",5)(1,"form",6)(2,"div",7)(3,"h3",8),t.EFF(4),t.nI1(5,"mytranslate"),t.k0s(),t.j41(6,"div",9)(7,"div",10)(8,"div",11)(9,"label",12),t.EFF(10),t.nI1(11,"mytranslate"),t.k0s()(),t.j41(12,"div",13)(13,"div",14)(14,"mat-form-field",15)(15,"mat-select",16,1)(17,"mat-option"),t.nrm(18,"ngx-mat-select-search",17),t.nI1(19,"mytranslate"),t.nI1(20,"mytranslate"),t.k0s(),t.DNE(21,ce,2,2,"mat-option",18),t.k0s()()(),t.j41(22,"div",19),t.bIt("click",function(){t.eBV(o);const n=t.XpG();return t.Njj(n.createPartner())}),t.EFF(23),t.nI1(24,"mytranslate"),t.k0s()()(),t.j41(25,"div",10)(26,"div",11)(27,"label",12),t.EFF(28),t.nI1(29,"mytranslate"),t.k0s()(),t.j41(30,"div",11)(31,"div",20),t.nrm(32,"input",21),t.k0s()()(),t.j41(33,"div",10)(34,"div",11)(35,"label",12),t.EFF(36),t.nI1(37,"mytranslate"),t.k0s()(),t.j41(38,"div",11)(39,"div",20),t.nrm(40,"input",21),t.k0s()()(),t.j41(41,"div",10)(42,"div",11)(43,"label",12),t.EFF(44),t.nI1(45,"mytranslate"),t.k0s()(),t.j41(46,"div",11)(47,"div",20),t.nrm(48,"textarea",21),t.k0s()()(),t.j41(49,"div",10)(50,"div",11)(51,"label",12),t.EFF(52),t.nI1(53,"mytranslate"),t.k0s()(),t.j41(54,"div",11)(55,"div",20),t.nrm(56,"input",21),t.k0s()(),t.j41(57,"div",22)(58,"azt-upload-single-box",23),t.bIt("uploadComplete",function(n){t.eBV(o);const s=t.XpG();return t.Njj(s.uploadThumbnailImage(n))}),t.EFF(59),t.nI1(60,"mytranslate"),t.k0s()()(),t.DNE(61,me,7,6,"div",24),t.j41(62,"div",10)(63,"div",11)(64,"div",25),t.nrm(65,"input",26),t.j41(66,"label",27),t.EFF(67),t.nI1(68,"mytranslate"),t.k0s()()()(),t.nrm(69,"hr",28),t.DNE(70,de,3,1,"div",29),t.k0s(),t.j41(71,"div",30)(72,"button",31),t.bIt("click",function(){t.eBV(o);const n=t.XpG();return t.Njj(n.cancel())}),t.EFF(73),t.nI1(74,"mytranslate"),t.k0s(),t.j41(75,"button",32),t.bIt("click",function(){t.eBV(o);const n=t.XpG();return t.Njj(n.saveObj(!1))}),t.EFF(76),t.nI1(77,"mytranslate"),t.k0s(),t.j41(78,"button",33),t.bIt("click",function(){t.eBV(o);const n=t.XpG();return t.Njj(n.saveObj(!0))}),t.EFF(79),t.nI1(80,"mytranslate"),t.k0s()()()()()}if(2&a){const o=t.sdS(16),e=t.XpG();t.R7$(),t.Y8G("formGroup",e.form),t.R7$(3),t.SpI(" ",t.bMT(5,35,e.adsId?"lang_cms_admin_edit_ads_title":"lang_cms_admin_create_ads_title")," "),t.R7$(6),t.SpI(" ",t.bMT(11,37,"lang_cms_admin_create_ads_partner")," "),t.R7$(4),t.Y8G("ngClass",t.eq3(63,P,e.form.controls.partnerId.invalid)),t.R7$(),t.Y8G("formControl",e.form.controls.partnerId),t.R7$(3),t.FS9("placeholderLabel",t.bMT(19,39,"lang_search_by_name")),t.FS9("noEntriesFoundLabel",t.bMT(20,41,"lang_search_not_found")),t.Y8G("formControl",o.searchControl),t.R7$(3),t.Y8G("ngForOf",o.filter(e.partnerObjs,"name")),t.R7$(2),t.JRh(t.bMT(24,43,"lang_cms_admin_create_ads_create_new_partner")),t.R7$(5),t.SpI(" ",t.bMT(29,45,"lang_cms_admin_create_ads_name")," "),t.R7$(4),t.Y8G("formControl",e.form.controls.name)("ngClass",t.eq3(65,P,e.form.controls.name.invalid)),t.R7$(4),t.SpI(" ",t.bMT(37,47,"lang_cms_admin_create_ads_action_url")," "),t.R7$(4),t.Y8G("formControl",e.form.controls.actionUrl)("ngClass",t.eq3(67,P,e.form.controls.actionUrl.invalid)),t.R7$(4),t.SpI(" ",t.bMT(45,49,"lang_cms_admin_create_ads_description")," "),t.R7$(4),t.Y8G("formControl",e.form.controls.description)("ngClass",t.eq3(69,P,e.form.controls.description.invalid)),t.R7$(4),t.SpI(" ",t.bMT(53,51,"lang_cms_admin_create_ads_thumbnail_url")," "),t.R7$(4),t.Y8G("formControl",e.form.controls.thumbnailUrl)("ngClass",t.eq3(71,P,e.form.controls.thumbnailUrl.invalid)),t.R7$(2),t.Y8G("uploadToCdnMenu",e.allUploadToCdnMenuTypes.ADMIN)("fileType",t.eq3(73,ie,e.allUploadFileTypes.IMAGE))("allowCompressImage",!1),t.R7$(),t.SpI(" ",t.bMT(60,53,"lang_cms_admin_create_ads_upload_image")," "),t.R7$(2),t.Y8G("ngForOf",e.form.controls.attributeObjs.controls),t.R7$(4),t.Y8G("formControl",e.form.controls.isActive),t.R7$(2),t.JRh(t.bMT(68,55,"lang_cms_admin_create_ads_is_active")),t.R7$(3),t.Y8G("ngIf",e.currentAdsObj),t.R7$(3),t.JRh(t.bMT(74,57,"lang_auto_huy")),t.R7$(2),t.Y8G("disabled",e.form.invalid),t.R7$(),t.JRh(t.bMT(77,59,"lang_auto_luu")),t.R7$(2),t.Y8G("disabled",e.form.invalid),t.R7$(),t.JRh(t.bMT(80,61,"lang_core_luu_va_dong"))}}let pe=(()=>{var a;class i extends dt{initForm(){this.form.controls.partnerId.setValue(this.updateAdsObj?.partnerId??0),this.form.controls.name.setValue(this.updateAdsObj?.name??""),this.form.controls.actionUrl.setValue(this.updateAdsObj?.actionUrl??""),this.form.controls.description.setValue(this.updateAdsObj?.description??""),this.form.controls.thumbnailUrl.setValue(this.updateAdsObj?.thumbnailUrl??""),this.form.controls.isActive.setValue(!!this.updateAdsObj?.isActive),this.attributeObjs.forEach(e=>{let n=this.updateAdsObj?.productAttributes?.find(s=>s.attributeId==e.id);this.form.controls.attributeObjs.push(new r.gE({attributeId:new r.MJ(e.id,{nonNullable:!0}),attributeDisplayName:new r.MJ(e.displayName,{nonNullable:!0}),attributeVariableName:new r.MJ(e.variableName,{nonNullable:!0}),attributeValue:new r.MJ(n?.value??"",{nonNullable:!0})}))})}initData(){this.initStatusObj(),this.waitDestroy((0,Z.p)([this.categoryTemplateService.apiCategoryTemplateListCategoryTemplateGet(this.categoryId),this.categoryAttributeService.apiCategoryAttributeListCategoryAttributesGet(this.categoryId),this.partnerService.apiPartnerListPartnersGet(),this.productService.apiProductGetProductGet(this.adsId)]).pipe((0,it.M)(([e,n,s,m])=>e.success?n.success?s.success?(this.templateObj=e.data,this.attributeObjs=n.data?.objs??[],this.partnerObjs=s.data?.objs??[],this.updateAdsObj=m.data,this.initForm(),void this.stopStatusObj()):this.errorStatusObj(s.message,!0):this.errorStatusObj(n.message,!0):this.errorStatusObj(e.message,!0))).subscribe())}saveObj(e){this.initStatusObj();let n=this.form.getRawValue(),s={categoryId:this.categoryId,partnerId:n.partnerId,name:n.name,description:n.description,thumbnailUrl:n.thumbnailUrl,actionUrl:n.actionUrl,isActive:n.isActive?1:0,attributes:n.attributeObjs.map(m=>({attributeId:m.attributeId,value:m.attributeValue}))};this.waitDestroy(this.productService.apiProductUpdateProductPut(s,this.adsId).subscribe(m=>{if(!m.success)return this.errorStatusObj(m.message,!0);this.successStatusObj("lang_cms_update_success",!0),e&&this.cancel()}))}ngOnInit(){super.ngOnInit(),this.commonService.translateMetaData({title:"lang_cms_admin_common_ads",description:"lang_cms_admin_common_ads",image:"lang_cms_test_image"}),this.categoryId=Number(this.commonService.getMyParam(this.activeRoute,"categoryId")??0),this.adsId=Number(this.commonService.getMyParam(this.activeRoute,"adsId")??0),this.backTo="/azota-ads/ads-list/"+this.categoryId,this.initData(),this.form.valueChanges.subscribe(e=>{let n=this.form.controls.attributeObjs.getRawValue().map(s=>({id:0,productId:0,attributeId:s.attributeId,value:s.attributeValue,attribute:{id:s.attributeId,categoryId:this.categoryId,displayName:s.attributeDisplayName,variableName:s.attributeVariableName}}));this.currentAdsObj={id:0,categoryId:this.categoryId,partnerId:this.form.controls.partnerId.value,name:this.form.controls.name.value,description:this.form.controls.description.value,thumbnailUrl:this.form.controls.thumbnailUrl.value,actionUrl:this.form.controls.actionUrl.value,isActive:this.form.controls.isActive.value?1:0,template:this.templateObj?.data,productAttributes:n}})}constructor(e,n,s,m,b){super(),this.partnerService=e,this.productService=n,this.categoryAttributeService=s,this.categoryTemplateService=m,this.activeRoute=b,this.adsId=0,this.updateAdsObj=void 0,this.form=new r.gE({name:new r.MJ("",{nonNullable:!0,validators:[z.M.noWhiteSpace]}),partnerId:new r.MJ(0,{nonNullable:!0,validators:[r.k0.min(1)]}),actionUrl:new r.MJ("",{nonNullable:!0,validators:[z.M.noWhiteSpace]}),description:new r.MJ("",{nonNullable:!0}),thumbnailUrl:new r.MJ("",{nonNullable:!0}),isActive:new r.MJ(!0,{nonNullable:!0}),attributeObjs:new r.Yp([])})}}return(a=i).\u0275fac=function(e){return new(e||a)(t.rXU(O.KM),t.rXU(O.bk),t.rXU(O.CT),t.rXU(O.Or),t.rXU(d.nX))},a.\u0275cmp=t.VBU({type:a,selectors:[["app-update-ads"]],features:[t.Vt3],decls:4,vars:3,consts:[["doneLoading",""],["searchInListPartner","searchInList"],[3,"headerBackToLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[1,"mt-5"],[3,"formGroup"],[1,"azt-config-document","mx-auto",2,"max-width","1000px"],[1,"text-md","uppercase","font-medium"],[1,"box","mt-4","p-5"],[1,"grid","grid-cols-12","mb-3"],[1,"col-span-12","lg:col-span-12"],[1,"form-label","mb-0","font-medium","flex","items-center"],[1,"col-span-12"],[1,"azt-form-group"],["appearance","outline",2,"width","100%",3,"ngClass"],["searchInList","",3,"formControl"],[3,"formControl","placeholderLabel","noEntriesFoundLabel"],[3,"value",4,"ngFor","ngForOf"],[1,"link-color","clickable","pt-1",3,"click"],[1,"setting-input"],["type","text",1,"form-control",3,"formControl","ngClass"],[1,"link-color","clickable","pt-1"],[1,"inline-block",3,"uploadComplete","uploadToCdnMenu","fileType","allowCompressImage"],["class","grid grid-cols-12 mb-3",4,"ngFor","ngForOf"],[1,"form-check","form-switch","items-center","w-full","clickable"],["id","isActive","type","checkbox",1,"form-check-input","mr-2",3,"formControl"],["for","isActive",1,"flex","items-center","mr-auto"],[1,"mb-3"],["class","grid grid-cols-12mb-3",4,"ngIf"],[1,"text-right","mt-5"],[1,"btn","w-24","btn-secondary","mr-3",3,"click"],[1,"btn","btn-primary-soft","w-24","mr-3",3,"click","disabled"],[1,"btn","btn-primary",3,"click","disabled"],[3,"value"],[1,"grid","grid-cols-12mb-3"],[3,"obj"]],template:function(e,n){if(1&e&&(t.j41(0,"teacher-layout",2),t.DNE(1,le,1,1,"azt-loading-effect",3)(2,ue,81,75,"ng-template",null,0,t.C5r),t.k0s()),2&e){const s=t.sdS(3);t.Y8G("headerBackToLink",n.backTo),t.R7$(),t.Y8G("ngIf",1==n.statusObj.loading)("ngIfElse",s)}},dependencies:[c.YU,c.Sq,c.bT,r.qT,r.me,r.Zm,r.BC,r.cb,Y.wT,w.rl,B.VO,r.l_,r.j4,D.K,_t.T,tt.f,V.x,E.Q,p.U9,R.wp],encapsulation:2}),i})();var _e=l(76627),gt=l(25329);const bt=a=>[a],X=()=>({"mr-1":!0}),W=a=>({backTo:a}),ge=(a,i)=>({"btn-success-soft":a,"btn-pending-soft":i});function be(a,i){if(1&a&&t.nrm(0,"azt-loading-effect",10),2&a){const o=t.XpG();t.Y8G("currentStatusObj",o.statusObj)}}function he(a,i){if(1&a&&(t.j41(0,"mat-option",20),t.EFF(1),t.k0s()),2&a){const o=i.$implicit;t.Y8G("value",o.id),t.R7$(),t.Lme("",o.name," - ",o.position,"")}}function fe(a,i){1&a&&(t.j41(0,"span",37),t.nrm(1,"azt-loading-ui"),t.k0s())}function ve(a,i){1&a&&(t.j41(0,"span",37),t.nrm(1,"azt-loading-ui"),t.k0s())}function Ce(a,i){if(1&a){const o=t.RV6();t.j41(0,"mat-card",24)(1,"mat-card-content",25)(2,"div",26)(3,"div",27)(4,"b"),t.EFF(5),t.k0s(),t.EFF(6),t.k0s(),t.j41(7,"div",28)(8,"a",29),t.nI1(9,"navigationLocalize"),t.nrm(10,"lucide-icon",30),t.EFF(11),t.nI1(12,"mytranslate"),t.k0s(),t.j41(13,"button",31),t.bIt("click",function(){const n=t.eBV(o).$implicit,s=t.XpG(4);return t.Njj(s.changeStatus(n))}),t.DNE(14,fe,2,0,"span",32),t.nrm(15,"lucide-icon",33),t.j41(16,"span",34),t.EFF(17),t.nI1(18,"mytranslate"),t.nI1(19,"mytranslate"),t.k0s()(),t.j41(20,"button",35),t.bIt("click",function(){const n=t.eBV(o).$implicit,s=t.XpG(4);return t.Njj(s.deleteObj(n))}),t.DNE(21,ve,2,0,"span",32),t.nrm(22,"lucide-icon",36),t.j41(23,"span",34),t.EFF(24),t.nI1(25,"mytranslate"),t.k0s()()()()()()}if(2&a){const o=i.$implicit,e=i.index,n=t.XpG(4);t.R7$(5),t.SpI("",e+1,"."),t.R7$(),t.SpI(" ",o.name," "),t.R7$(2),t.Y8G("routerLink",t.bMT(9,13,"/azota-ads/edit-ads/"+o.categoryId+"/"+o.id))("queryParams",t.eq3(23,W,n.backTo)),t.R7$(2),t.Y8G("ngClass",t.lJ4(25,X)),t.R7$(),t.SpI(" ",t.bMT(12,15,"lang_auto_sua")," "),t.R7$(2),t.Y8G("ngClass",t.l_i(26,ge,o.isActive,!o.isActive)),t.R7$(),t.Y8G("ngIf",n.changeStatusId==o.id),t.R7$(),t.Y8G("ngClass",t.lJ4(29,X)),t.R7$(2),t.JRh(o.isActive?t.bMT(18,17,"lang_cms_admin_ads_is_active"):t.bMT(19,19,"lang_cms_admin_ads_is_inactive")),t.R7$(4),t.Y8G("ngIf",n.deletingId==o.id),t.R7$(),t.Y8G("ngClass",t.lJ4(30,X)),t.R7$(2),t.JRh(t.bMT(25,21,"lang_auto_xoa"))}}function ye(a,i){if(1&a&&(t.j41(0,"div",21)(1,"div",22),t.DNE(2,Ce,26,31,"mat-card",23),t.k0s()()),2&a){const o=t.XpG(3);t.R7$(2),t.Y8G("ngForOf",o.objs)}}function Ie(a,i){if(1&a){const o=t.RV6();t.qex(0),t.j41(1,"div",12)(2,"mat-form-field",13)(3,"mat-select",14,2),t.bIt("selectionChange",function(){t.eBV(o);const n=t.XpG(2);return t.Njj(n.changeCategoryId())}),t.j41(5,"mat-option"),t.nrm(6,"ngx-mat-select-search",15),t.nI1(7,"mytranslate"),t.nI1(8,"mytranslate"),t.k0s(),t.DNE(9,he,2,3,"mat-option",16),t.k0s()(),t.j41(10,"span",17),t.nI1(11,"navigationLocalize"),t.EFF(12),t.nI1(13,"mytranslate"),t.k0s(),t.j41(14,"a",18),t.nI1(15,"navigationLocalize"),t.EFF(16),t.nI1(17,"mytranslate"),t.k0s()(),t.DNE(18,ye,3,1,"div",19),t.bVm()}if(2&a){const o=t.sdS(4),e=t.XpG(2);t.R7$(3),t.Y8G("formControl",e.currentCategoryFormControl),t.R7$(3),t.FS9("placeholderLabel",t.bMT(7,12,"lang_search_by_name")),t.FS9("noEntriesFoundLabel",t.bMT(8,14,"lang_search_not_found")),t.Y8G("formControl",o.searchControl),t.R7$(3),t.Y8G("ngForOf",o.filter(e.categoryObjs,"position")),t.R7$(),t.Y8G("routerLink",t.bMT(11,16,"/azota-ads/create-ads-template/"+e.currentCategoryFormControl.value))("queryParams",t.eq3(24,W,e.backTo)),t.R7$(2),t.SpI(" ",t.bMT(13,18,"lang_cms_admin_ads_edit_ads_template")," "),t.R7$(2),t.Y8G("routerLink",t.bMT(15,20,"/azota-ads/create-ads/"+e.currentCategoryFormControl.value))("queryParams",t.eq3(26,W,e.backTo)),t.R7$(2),t.SpI(" ",t.bMT(17,22,"lang_cms_admin_ads_create_new_ads")," "),t.R7$(2),t.Y8G("ngIf",e.objs.length>0)}}function je(a,i){if(1&a&&(t.j41(0,"span",38),t.nI1(1,"navigationLocalize"),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s()),2&a){const o=t.XpG(2);t.Y8G("routerLink",t.bMT(1,3,"/azota-ads/create-ads-category"))("queryParams",t.eq3(7,W,o.backTo)),t.R7$(2),t.JRh(t.bMT(3,5,"lang_cms_admin_ads_create_new_category"))}}function Se(a,i){if(1&a&&t.DNE(0,Ie,19,28,"ng-container",11)(1,je,4,9,"ng-template",null,1,t.C5r),2&a){const o=t.sdS(2),e=t.XpG();t.Y8G("ngIf",e.categoryObjs.length>0)("ngIfElse",o)}}function Te(a,i){if(1&a&&t.nrm(0,"azt-loading-effect",3),2&a){const o=t.XpG();t.Y8G("currentStatusObj",o.statusObj)}}function ke(a,i){if(1&a&&(t.j41(0,"div",11)(1,"span",12),t.EFF(2),t.k0s(),t.j41(3,"span",13),t.EFF(4),t.k0s()()),2&a){const o=i.$implicit;t.R7$(2),t.SpI(" ","${"+o.variableName+"}"," "),t.R7$(2),t.SpI(" ","- "+o.description," ")}}function Oe(a,i){if(1&a&&(t.j41(0,"div",24)(1,"div",16),t.nrm(2,"azt-frontend-ads-item",25),t.k0s()()),2&a){const o=t.XpG(2);t.R7$(2),t.Y8G("obj",o.currentAdsObj)}}function Fe(a,i){if(1&a){const o=t.RV6();t.j41(0,"div",4)(1,"div",5)(2,"h3",6),t.EFF(3),t.nI1(4,"mytranslate"),t.k0s(),t.j41(5,"div",7)(6,"div",8)(7,"h3",9),t.EFF(8),t.nI1(9,"mytranslate"),t.k0s(),t.j41(10,"div",10)(11,"div",11)(12,"span",12),t.EFF(13),t.k0s(),t.j41(14,"span",13),t.EFF(15),t.nI1(16,"mytranslate"),t.k0s()(),t.j41(17,"div",11)(18,"span",12),t.EFF(19),t.k0s(),t.j41(20,"span",13),t.EFF(21),t.nI1(22,"mytranslate"),t.k0s()(),t.j41(23,"div",11)(24,"span",12),t.EFF(25),t.k0s(),t.j41(26,"span",13),t.EFF(27),t.nI1(28,"mytranslate"),t.k0s()(),t.j41(29,"div",11)(30,"span",12),t.EFF(31),t.k0s(),t.j41(32,"span",13),t.EFF(33),t.nI1(34,"mytranslate"),t.k0s()(),t.DNE(35,ke,5,2,"div",14),t.k0s()(),t.j41(36,"div",15)(37,"div",16)(38,"h3",9),t.EFF(39),t.nI1(40,"mytranslate"),t.k0s()(),t.j41(41,"div",17),t.nrm(42,"editor",18),t.nI1(43,"getTinyMceKey"),t.nI1(44,"getTinyMceConfig"),t.k0s()(),t.nrm(45,"hr",19),t.DNE(46,Oe,3,1,"div",20),t.k0s(),t.j41(47,"div",21)(48,"button",22),t.bIt("click",function(){t.eBV(o);const n=t.XpG();return t.Njj(n.handleDestroy())}),t.EFF(49),t.nI1(50,"mytranslate"),t.k0s(),t.j41(51,"button",23),t.bIt("click",function(){t.eBV(o);const n=t.XpG();return t.Njj(n.saveTemplate())}),t.EFF(52),t.nI1(53,"mytranslate"),t.k0s()()()()}if(2&a){const o=t.XpG();t.R7$(3),t.SpI(" ",t.bMT(4,19,"lang_azt_create_ads_template")," "),t.R7$(5),t.SpI(" ",t.bMT(9,21,"lang_azt_information_field")," "),t.R7$(5),t.JRh("${NAME}"),t.R7$(2),t.SpI(" ","- "+t.bMT(16,23,"lang_cms_admin_create_ads_name")," "),t.R7$(4),t.JRh("${URL}"),t.R7$(2),t.SpI(" ","- "+t.bMT(22,25,"lang_cms_admin_create_ads_action_url")," "),t.R7$(4),t.JRh("${DESCRIPTION}"),t.R7$(2),t.SpI(" ","- "+t.bMT(28,27,"lang_cms_admin_create_ads_description")," "),t.R7$(4),t.JRh("${THUMBNAIL}"),t.R7$(2),t.Lme("","- "+t.bMT(34,29,"lang_cms_admin_create_ads_thumbnail_url")," - ",o.adsDefaultThumbnail,""),t.R7$(2),t.Y8G("ngForOf",o.categoryAttributeList),t.R7$(4),t.SpI(" ",t.bMT(40,31,"lang_auto_noi_dung")," "),t.R7$(3),t.FS9("apiKey",t.bMT(43,33,"")),t.Y8G("formControl",o.template)("init",t.bMT(44,35,"admin_common")),t.R7$(4),t.Y8G("ngIf",o.currentAdsObj),t.R7$(3),t.JRh(t.bMT(50,37,"lang_auto_huy")),t.R7$(3),t.JRh(t.bMT(53,39,"lang_auto_luu"))}}const ze=[{path:"",component:x.z,children:[{path:"ads-list/:categoryId",component:(()=>{var a;class i extends G.H{changeStatus(e){if(null==this.objs.find(m=>m.id==e.id))return;this.changeStatusId=e.id;let s=e.isActive?this.productService.apiProductDeactivateProductPut(e.id):this.productService.apiProductActivateProductPut(e.id);this.waitDestroy(s.subscribe(m=>{if(this.changeStatusId=0,!m.success)return this.errorStatusObj(m.message,!0);e.isActive=e.isActive?0:1}))}deleteObj(e){const n=this.commonService.myTranslateInstant("lang_cms_admin_ads_are_your_sure_to_delete_this_ads")+`: <b>${e.name}<b/>?`;this.sAztDialogService.open(nt.u,{data:{content:n},restoreFocus:!1,width:"500px"}).afterClosed().subscribe(s=>{s&&(this.deletingId=e.id,this.waitDestroy(this.productService.apiProductDeleteProductsPost({productIds:[e.id]}).subscribe(m=>{if(this.deletingId=0,!m.success)return this.errorStatusObj(m.message,!0);this.objs=this.objs.filter(b=>b.id!=e.id)})))})}changeCategoryId(){this.commonService.myNavigation("/azota-ads/ads-list/"+this.currentCategoryFormControl.value)}getData(){this.initStatusObj(),this.getCategory(e=>{if(e)return this.errorStatusObj(e,!0);let n=this.getDefaultCategoryId();this.currentCategoryFormControl.value!=n&&this.currentCategoryFormControl.setValue(n),this.waitDestroy(this.productService.apiProductListProductsPost({categoryId:n,page:1,size:1e4}).subscribe(m=>{if(!m.success)return this.errorStatusObj(m.message,!0);this.objs=m.data?.objs??[],this.stopStatusObj()}))})}getCategory(e){this.waitDestroy(this.categoryService.apiCategoryListCategoriesGet().subscribe(n=>{if(!n.success)return e(n.message);this.categoryObjs=n.data?.objs??[],e(void 0)}))}getDefaultCategoryId(){let e=Number(this.commonService.getMyParam(this.activeRoute,"categoryId")??0);return null!=this.categoryObjs.find(n=>n.id==e)?e:this.commonService.getFirstOfArray(this.categoryObjs)?.id??0}ngOnInit(){super.ngOnInit(),this.waitDestroy((0,_e.z)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.getData()})),this.commonService.translateMetaData({title:"lang_cms_admin_common_ads",description:"lang_cms_admin_common_ads",image:"lang_cms_test_image"}),this.headerBackTo=this.commonService.getMyQueryParam("backTo")??"/azota-ads/ads-category",this.backTo=this.commonService.getMyQueryParam("backTo")??this.commonService.getCurrentUrlWithoutLocale()}constructor(e,n,s,m){super(),this.categoryService=e,this.productService=n,this.activeRoute=s,this.sAztDialogService=m,this.currentCategoryFormControl=new r.MJ(0,{nonNullable:!0}),this.objs=[],this.categoryObjs=[],this.deletingId=0,this.changeStatusId=0,this.backTo="",this.headerBackTo=""}}return(a=i).\u0275fac=function(e){return new(e||a)(t.rXU(H.M),t.rXU(O.bk),t.rXU(d.nX),t.rXU(q.i))},a.\u0275cmp=t.VBU({type:a,selectors:[["app-common-guide"]],features:[t.Vt3],decls:15,vars:21,consts:[["doneLoading",""],["emptyCategory",""],["searchInListCategory","searchInList"],[3,"headerBackToLink"],[1,"container-fluid","component-wrap","centerBoth","hasBg"],[1,"mb-3","mt-3","flex","items-center"],[1,"clickable","btn","btn-info","mr-3",3,"routerLink"],[1,"clickable","btn","btn-dark-soft","mr-3",3,"routerLink"],["name","check","size","16",3,"ngClass"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[4,"ngIf","ngIfElse"],[1,"mb-3","box","p-2","flex"],["appearance","outline"],["searchInList","",3,"selectionChange","formControl"],[3,"formControl","placeholderLabel","noEntriesFoundLabel"],[3,"value",4,"ngFor","ngForOf"],[1,"clickable","flex-none","btn","btn-secondary","ml-3",3,"routerLink","queryParams"],[1,"clickable","flex-none","btn","btn-primary","ml-3",3,"routerLink","queryParams"],["class","card mt-1",4,"ngIf"],[3,"value"],[1,"card","mt-1"],[1,"card-body"],["appearance","outlined","class","mb-2","style","background-color: #fff; border: none",4,"ngFor","ngForOf"],["appearance","outlined",1,"mb-2",2,"background-color","#fff","border","none"],[1,"form-control",2,"overflow-y","auto"],[1,"flex","align-items-center"],[1,"w-full"],[1,"flex-none","items-center"],[1,"btn","btn-sm","btn-primary-soft","mr-2",3,"routerLink","queryParams"],["name","square-pen","size","18",3,"ngClass"],[1,"btn","btn-sm","mr-2",3,"click","ngClass"],["class","w-4 h-4 flex mr-1",4,"ngIf"],["name","shield-check","size","18",3,"ngClass"],[1,"azt-hidden","md:inline-block"],[1,"btn","btn-sm","btn-danger-soft",3,"click"],["name","trash-2","size","18",3,"ngClass"],[1,"w-4","h-4","flex","mr-1"],[1,"clickable","btn","btn-primary",3,"routerLink","queryParams"]],template:function(e,n){if(1&e&&(t.j41(0,"teacher-layout",3)(1,"div",4)(2,"div",5)(3,"a",6),t.nI1(4,"navigationLocalize"),t.EFF(5),t.nI1(6,"mytranslate"),t.k0s(),t.j41(7,"a",7),t.nI1(8,"navigationLocalize"),t.nrm(9,"lucide-icon",8),t.EFF(10),t.nI1(11,"mytranslate"),t.k0s()(),t.DNE(12,be,1,1,"azt-loading-effect",9)(13,Se,3,2,"ng-template",null,0,t.C5r),t.k0s()()),2&e){const s=t.sdS(14);t.Y8G("headerBackToLink",n.headerBackTo),t.R7$(3),t.Y8G("routerLink",t.eq3(16,bt,t.bMT(4,8,"/azota-ads/ads-category"))),t.R7$(2),t.SpI(" ",t.bMT(6,10,"lang_azt_manage_categories")," "),t.R7$(2),t.Y8G("routerLink",t.eq3(18,bt,t.bMT(8,12,"/azota-ads/ads-list/0"))),t.R7$(2),t.Y8G("ngClass",t.lJ4(20,X)),t.R7$(),t.SpI(" ",t.bMT(11,14,"lang_azt_manage_ads")," "),t.R7$(2),t.Y8G("ngIf",n.statusObj.loading)("ngIfElse",s)}},dependencies:[d.Wk,c.YU,c.Sq,c.bT,r.BC,Y.wT,gt.RN,gt.m2,w.rl,B.VO,r.l_,D.K,mt.R,V.x,E.Q,h.WGl,p.U9,R.F2,R.wp],encapsulation:2}),i})()},{path:"create-ads/:categoryId",component:se},{path:"edit-ads/:categoryId/:adsId",component:pe},{path:"ads-category",component:Gt},{path:"create-ads-category",component:At},{path:"update-ads-category/:categoryId",component:Xt},{path:"create-ads-template/:categoryId",component:(()=>{var a;class i extends G.H{saveTemplate(){const e={categoryId:this.categoryId,data:this.commonService.replaceAll(this.template.value,this.adsDefaultThumbnail,"${THUMBNAIL}")??""};this.waitDestroy(this.categoryTemplateService.apiCategoryTemplateUpsertCategoryTemplatePost(e).subscribe(n=>{if(!n.success)return this.errorStatusObj(n.message,!0);this.successStatusObj("T\u1ea1o template th\xe0nh c\xf4ng"),this.myNavigation(`/azota-ads/ads-list/${this.categoryId}`)}))}handleDestroy(){this.myNavigation(this.backToLink)}initAds(){this.currentAdsObj={id:0,categoryId:this.categoryId,partnerId:0,name:"NAME_SAMPLE",description:"DESCRIPTION_SAMPLE",thumbnailUrl:I.c.adsDefaultThumbnail,actionUrl:"https://google.com.vn",isActive:1,template:this.template.value,productAttributes:this.categoryAttributeList.map(e=>({id:0,productId:0,attributeId:e.id,value:e.variableName,attribute:{id:e.id,categoryId:this.categoryId,displayName:e.displayName,variableName:e.variableName}}))}}getData(e){this.initStatusObj();const n=this.categoryAttributeService.apiCategoryAttributeListCategoryAttributesGet(e),s=this.categoryTemplateService.apiCategoryTemplateListCategoryTemplateGet(e);this.waitDestroy((0,Z.p)([n,s]).subscribe({next:([m,b])=>m.success?b.success?(this.categoryAttributeList=m.data?.objs??[],this.template.setValue(this.commonService.replaceAll(b.data?.data,"${THUMBNAIL}",this.adsDefaultThumbnail)??""),void this.successStatusObj()):this.errorStatusObj(b.message,!0):this.errorStatusObj(m.message,!0),error:m=>this.errorStatusObj(m.message,!0)}))}ngOnInit(){super.ngOnInit(),this.categoryId=Number(this.commonService.getMyParam(this.activeRoute,"categoryId")??0),this.backToLink=this.commonService.getMyQueryParam("backto")??"/azota-ads/ads-category",this.getData(this.categoryId),this.template.valueChanges.subscribe(e=>{this.initAds()})}constructor(e,n,s){super(),this.activeRoute=e,this.categoryTemplateService=n,this.categoryAttributeService=s,this.backToLink="",this.categoryId=0,this.template=new r.MJ("",{nonNullable:!0,validators:[r.k0.required]}),this.categoryAttributeList=[],this.adsDefaultThumbnail=I.c.adsDefaultThumbnail}}return(a=i).\u0275fac=function(e){return new(e||a)(t.rXU(d.nX),t.rXU(pt.O),t.rXU(ut.C))},a.\u0275cmp=t.VBU({type:a,selectors:[["app-create-ads-template"]],features:[t.Vt3],decls:4,vars:3,consts:[["doneLoading",""],[3,"headerBackToLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[1,"mt-5"],[1,"azt-config-document","mx-auto",2,"max-width","1000px"],[1,"text-md","uppercase","font-medium"],[1,"box","p-5","mt-3"],[1,"mt-0"],[1,"text-md","font-medium"],[1,"mt-2"],[1,"mt-3"],[1,"rounded-md","bg-slate-200","px-3","py-1","text-slate-600","text-xs","dark:bg-darkmode-300","dark:text-slate-400","inline-block"],[1,"mt-1","mr-1","text-xs","leading-relaxed","text-slate-500"],["class","mt-3",4,"ngFor","ngForOf"],[1,"grid","grid-cols-12","mt-4"],[1,"col-span-12","lg:col-span-12"],[1,"col-span-12","lg:col-span-12","mt-3"],[3,"formControl","apiKey","init"],[1,"mt-3","mb-3"],["class","grid grid-cols-12mb-3",4,"ngIf"],[1,"text-right","mt-5"],[1,"btn","w-24","btn-secondary","mr-3",3,"click"],[1,"btn","btn-primary","w-24",3,"click"],[1,"grid","grid-cols-12mb-3"],[3,"obj"]],template:function(e,n){if(1&e&&(t.j41(0,"teacher-layout",1),t.DNE(1,Te,1,1,"azt-loading-effect",2)(2,Fe,54,41,"ng-template",null,0,t.C5r),t.k0s()),2&e){const s=t.sdS(3);t.Y8G("headerBackToLink",n.backToLink),t.R7$(),t.Y8G("ngIf",1==n.statusObj.loading)("ngIfElse",s)}},dependencies:[c.Sq,c.bT,r.BC,y.xn,r.l_,D.K,tt.f,E.Q,R.wp,R.Hw,R.yc],encapsulation:2}),i})()}]}];let Ee=(()=>{var a;class i{}return(a=i).\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.$C({type:a}),a.\u0275inj=t.G2t({imports:[d.iI.forChild(ze),d.iI,k.XE]}),i})(),Me=(()=>{var a;class i{}return(a=i).\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.$C({type:a}),a.\u0275inj=t.G2t({providers:[{provide:y.vn,useValue:I.c.azt_tiny_mce_script_src}],imports:[d.iI,c.MD,r.YN,y.sv,_.s,r.X1,Ee,S.Q,f.L,u.Id,T.b,h.flO.pick(h.Ptg),j.AC,p.An]}),i})()}}]);