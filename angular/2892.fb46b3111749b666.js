"use strict";(self.webpackChunkBalacoClient=self.webpackChunkBalacoClient||[]).push([[2892],{88135:(B,D,a)=>{a.d(D,{Y:()=>d});var t=a(29023),r=a(56223),L=a(73445),I=a(23680),e=a(19347),n=a(44683),_=a(13217),p=a(72164),c=a(76359),C=a(84003),M=a(47180),A=a(19743),o=a(65879),N=a(59467),E=a(94690),j=a(90592),O=a(96814),w=a(95545),z=a(67679),Q=a(68547),W=a(76476),y=a(86717),U=a(71646),f=a(7081),S=a(50121),l=a(36727);function x(v,T){1&v&&(o.TgZ(0,"div",5)(1,"span",6),o._UZ(2,"azt-loading-ui"),o.qZA()())}function m(v,T){1&v&&(o.TgZ(0,"div",43)(1,"div",44),o._uU(2),o.ALo(3,"mytranslate"),o.qZA()()),2&v&&(o.xp6(2),o.hij(" ",o.lcZ(3,1,"lang_testbank_test_config_you_not_yet_class")," "))}function u(v,T){1&v&&(o.TgZ(0,"div",43)(1,"div",44),o._uU(2),o.ALo(3,"mytranslate"),o.qZA()()),2&v&&(o.xp6(2),o.hij(" ",o.lcZ(3,1,"lang_testbank_test_config_you_not_yet_student")," "))}const g=function(v){return{"h-56-important":v}};function Z(v,T){if(1&v){const i=o.EpF();o.TgZ(0,"div",7)(1,"form",8)(2,"div",9)(3,"div",10)(4,"div",11)(5,"div",12),o._uU(6),o.ALo(7,"mytranslate"),o.qZA()(),o.TgZ(8,"div",13)(9,"div",14)(10,"div",15)(11,"input",16),o.NdJ("change",function(){o.CHM(i);const s=o.oxw();return o.KtG(s.clearAllCheckBox(0))}),o.qZA(),o.TgZ(12,"label",17),o._uU(13),o.ALo(14,"mytranslate"),o.qZA()(),o.TgZ(15,"div",18)(16,"input",19),o.NdJ("change",function(){o.CHM(i);const s=o.oxw();return o.KtG(s.clearAllCheckBox(2))}),o.qZA(),o.TgZ(17,"label",20),o._uU(18),o.ALo(19,"mytranslate"),o.qZA()(),o.TgZ(20,"div",21)(21,"input",22),o.NdJ("change",function(){o.CHM(i);const s=o.oxw();return o.KtG(s.clearAllCheckBox(3))}),o.qZA(),o.TgZ(22,"label",23),o._uU(23),o.ALo(24,"mytranslate"),o.qZA()()()(),o.TgZ(25,"div",24)(26,"div",25)(27,"div",26)(28,"h3",27),o._uU(29),o.ALo(30,"mytranslate"),o._UZ(31,"azt-list-classroom-count-checked",28),o.qZA(),o.TgZ(32,"div",29)(33,"div",30),o._UZ(34,"azt-list-classroom-check-all",31),o.qZA(),o.TgZ(35,"div",32),o._UZ(36,"azt-is-show-check-classroom",33),o.qZA()()(),o.TgZ(37,"div",34)(38,"ng-scrollbar",35)(39,"azt-list-classroom-checkbox",36),o.NdJ("objsChange",function(s){o.CHM(i);const h=o.oxw();return o.KtG(h.classroomObjs=s)}),o.qZA()()()(),o.YNc(40,m,4,3,"div",37),o.qZA(),o.TgZ(41,"div",24)(42,"div",25)(43,"div",38)(44,"h3",27),o._uU(45),o.ALo(46,"mytranslate"),o.qZA()(),o.TgZ(47,"div",34)(48,"ng-scrollbar",35),o._UZ(49,"list-student-checkbox",39),o.qZA()()()(),o.YNc(50,u,4,3,"div",37),o.qZA()()()(),o.TgZ(51,"div",40)(52,"button",41),o.NdJ("click",function(){o.CHM(i);const s=o.oxw();return o.KtG(s.closeDialog())}),o._uU(53),o.ALo(54,"mytranslate"),o.qZA(),o.TgZ(55,"button",42),o.NdJ("click",function(){o.CHM(i);const s=o.oxw();return o.KtG(s.savePublishExam("save"))}),o._uU(56),o.ALo(57,"mytranslate"),o.qZA()()}if(2&v){const i=o.oxw();o.xp6(1),o.Q6J("formGroup",i.form),o.xp6(5),o.hij(" ",o.lcZ(7,38,"lang_testbank_test_config_who_tested")," "),o.xp6(5),o.Q6J("value",0),o.xp6(2),o.hij(" ",o.lcZ(14,40,"lang_testbank_test_config_all_people")," "),o.xp6(3),o.Q6J("value",2),o.xp6(2),o.hij(" ",o.lcZ(19,42,"lang_testbank_test_config_assigne_class")," "),o.xp6(3),o.Q6J("value",3),o.xp6(2),o.hij(" ",o.lcZ(24,44,"lang_testbank_test_config_assigne_student")," "),o.xp6(2),o.Q6J("hidden",2!=i.form.controls.whoAllow.value),o.xp6(4),o.hij(" ",o.lcZ(30,46,"lang_auto_danh_sach_cac_lop"),"\xa0 "),o.xp6(2),o.Q6J("formArray",i.form.controls.classroomIds),o.xp6(3),o.Q6J("formArray",i.form.controls.classroomIds)("objs",i.classroomObjs)("permissionName",i.permissionTypes.exam),o.xp6(2),o.Q6J("form",i.form),o.xp6(2),o.Q6J("visibility","hover")("autoHeightDisabled",!1)("ngClass",o.VKq(54,g,i.isMobileWebView)),o.xp6(1),o.Q6J("form",i.form)("formArrayName","classroomIds")("objs",i.classroomObjs)("examClassroomObjs",i.examClassroomObjs)("permissionName",i.permissionTypes.exam),o.xp6(1),o.Q6J("ngIf",null==i.form.controls.classroomIds.errors?null:i.form.controls.classroomIds.errors.classroomCheckBoxValidator),o.xp6(1),o.Q6J("hidden",3!=i.form.controls.whoAllow.value),o.xp6(4),o.hij(" ",o.lcZ(46,48,"lang_test_config_student_list")," "),o.xp6(3),o.Q6J("visibility","hover")("autoHeightDisabled",!1)("ngClass",o.VKq(56,g,i.isMobileWebView)),o.xp6(1),o.Q6J("form",i.form)("formArrayName","studentIds")("objs",i.classroomObjs)("examStudentObjs",i.data.examStudents)("permissionName",i.permissionTypes.exam),o.xp6(1),o.Q6J("ngIf",3==i.form.controls.whoAllow.value&&i.form.controls.studentIds.errors),o.xp6(3),o.hij(" ",o.lcZ(54,50,"lang_auto_huy")," "),o.xp6(2),o.Q6J("disabled",1==i.form.controls.whoAllow.value&&i.form.invalid||2==i.form.controls.whoAllow.value&&!i.hasClassroomIdChecked||3==i.form.controls.whoAllow.value&&i.form.controls.studentIds.errors),o.xp6(1),o.hij(" ",o.lcZ(57,52,"lang_auto_luu")," ")}}let d=(()=>{class v extends p.e{clearAllCheckBox(i){1==i?this.isSelectClassroom=!1:2==i&&(this.isSelectClassroom=!0)}closeDialog(i){this.dialogRef.close(i)}get hasClassroomIdChecked(){var i=this.form.getRawValue();let b=!1;for(let s=0;s<i.classroomIds.length;s++)if(i.classroomIds[s]){b=!0;break}return b}savePublishExam(i){if(1==this.form.getRawValue().whoAllow&&this.form.invalid||2==this.form.getRawValue().whoAllow&&!this.hasClassroomIdChecked)return void this.showErrorSnack("lang_auto_vui_long_nhap_day_du_thong_tin");this.initStatusObj();let b="publish"===i?1:void 0;var s=this.form.getRawValue(),h=this.sAztClassroomCheckboxService.findClassroomWithNoPermission(this.classroomObjs,c.y.exam);const P=this.sAztClassroomCheckboxService.getClassroomIdsChecked(this.classroomObjs,h,s.classroomIds);let k=[];3==s.whoAllow&&s.studentIds&&s.studentIds.length?s.studentIds.forEach(J=>{let F={classroomId:J.classroomId??0,assignStudentIds:[]};J.listStudents?.forEach(G=>{G.id&&G.choose&&F.assignStudentIds?.push(G.id)}),F.assignStudentIds?.length&&k?.push(F)}):k=void 0;let R={whoAllow:s.whoAllow,isPublished:b??void 0,classroomIds:P,assignStudents:k,isSaveConfig:0};var Y=this.permissionService.hasEditPermission("exam",this.obj)?this.documentConfigService.apiDocumentConfigSaveExamConfigPost(this.hashId,R):this.documentConfigService.apiDocumentConfigSaveExamDataForConfigClassroomPost(this.hashId,R);this.waitDestroy(Y.subscribe(K=>{1==K.success?(this.successStatusObj(),this.showSuccessSnack("lang_auto_luu_thanh_cong"),this.closeDialog(K.data?.obj)):this.errorStatusObj(K.message??"",!0)}))}getExamDataByHashId(i){this.initStatusObj(),this.waitDestroy(this.documentConfigService.apiDocumentConfigGetExamDataForConfigClassroomGet(i).subscribe(b=>{if(1==b.success){if(null!=b.data){var h,s=b.data?.examObj;if(!(h=this.castObj(s)))return;h.limitQuestionGroupsParse=this.commonService.myParseJson(s.limitQuestionGroups??""),this.obj=h,this.hashId=this.obj.hashId??"",this.classroomObjs=b.data.classroomObjs??new Array,this.examClassroomObjs=b.data.examClassroomObjs??[],this.form.patchValue({whoAllow:this.obj.whoAllow}),this.isSelectClassroom=2==this.obj.whoAllow,this.successStatusObj()}}else this.errorStatusObj(b.message??"",!0)}))}ngOnInit(){this.form.valueChanges.subscribe(i=>{let b=JSON.stringify(i);b!=this.prevData&&(this.prevData=b,this.form.patchValue(i))}),this.getExamDataByHashId(this.hashId),super.ngOnInit()}constructor(i,b,s,h,P){super(h,s),this.documentConfigService=i,this.permissionService=b,this.dialogRef=s,this.data=h,this.sAztClassroomCheckboxService=P,this.permissionTypes=c.y,this.checkDialogFastContent=[],this.prevData="",this.classroomObjs=[],this.examClassroomObjs=[],this.isSelectClassroom=!1,this.hashId="",this.hashId=h.hashId,this.form=new r.cw({whoAllow:new r.NI(0,{nonNullable:!0}),classroomIds:new r.Oe([]),studentIds:new r.Oe([]),isShowCheckClass:new r.NI(!1,{nonNullable:!0})},{validators:[M.h.classroomCheckBoxValidator,A.M.studentCheckBoxValidator]})}}return v.\u0275fac=function(i){return new(i||v)(o.Y36(N.C),o.Y36(E.j),o.Y36(e.so,8),o.Y36(e.WI,8),o.Y36(j.f))},v.\u0275cmp=o.Xpm({type:v,selectors:[["config-online-exam-dialog"]],features:[o._Bn([{provide:t.fM,useClass:n.WG,deps:[I.Ad,L.o8]},{provide:t.ab,useFactory:_.hx,deps:[C.D]}]),o.qOj],decls:6,vars:2,consts:[[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-body"],["class","loading flex items-center justify-center",4,"ngIf","ngIfElse"],["doneLoading",""],[1,"loading","flex","items-center","justify-center"],[1,"w-4","h-4","inline-block"],[1,"col-md-12","setting"],[3,"formGroup"],[1,"setting-base"],["id","azt-config-who-allow",1,"grid","grid-cols-12","mt-4"],[1,"col-span-12","lg:col-span-3","pr-2"],[1,"mb-0","font-medium","flex","items-center"],[1,"col-span-12","lg:col-span-9"],[1,"flex","flex-col","sm:flex-row"],[1,"form-check","mr-5"],["id","config-who-all","formControlName","whoAllow","type","radio",1,"form-check-input",3,"value","change"],["for","config-who-all",1,"form-check-label"],[1,"form-check","mt-2","sm:mt-0","mr-5"],["id","config-who-class","formControlName","whoAllow","type","radio",1,"form-check-input",3,"value","change"],["for","config-who-class",1,"form-check-label"],[1,"form-check","mt-2","sm:mt-0"],["id","config-who-student","formControlName","whoAllow","type","radio",1,"form-check-input",3,"value","change"],["for","config-who-student",1,"form-check-label"],[1,"col-span-12","mt-4","intro-y",3,"hidden"],[1,"border","border-slate-200/60","dark:border-darkmode-400","rounded-md","pb-1"],[1,"p-3","bg-slate-100","dark:bg-darkmode-400","flex","flex-col","sm:flex-row","sm:h-auto","sm:items-center"],[1,"mr-auto"],[3,"formArray"],[1,"flex","mt-2","sm:mt-0"],[1,"mr-3"],[3,"formArray","objs","permissionName"],[1,"mr-0"],[3,"form"],[1,"classroom_list"],["pointerEventsMethod","scrollbar",1,"w-full",3,"visibility","autoHeightDisabled","ngClass"],[3,"form","formArrayName","objs","examClassroomObjs","permissionName","objsChange"],["class","col-span-12 mt-2 intro-y",4,"ngIf"],[1,"p-3","bg-slate-100","dark:bg-darkmode-400","flex","items-center"],[3,"form","formArrayName","objs","examStudentObjs","permissionName"],[1,"text-right","mt-4"],["azt-track-service","config-exam-classroom-6-a-m4KztM",1,"btn","w-24","btn-secondary","mr-3",3,"click"],["azt-track-service","config-exam-classroom-brv1ZZTsfLY",1,"btn","w-24","btn-primary",3,"disabled","click"],[1,"col-span-12","mt-2","intro-y"],[1,"text-xs","text-danger"]],template:function(i,b){if(1&i&&(o.TgZ(0,"div",0)(1,"div",1)(2,"div",2),o.YNc(3,x,3,0,"div",3),o.YNc(4,Z,58,58,"ng-template",null,4,o.W1O),o.qZA()()()),2&i){const s=o.MAs(5);o.xp6(3),o.Q6J("ngIf",b.statusObj.loading)("ngIfElse",s)}},dependencies:[O.mk,O.O5,w.KC,r._Y,r.Fj,r._,r.JJ,r.JL,r.sg,r.u,r.CE,z.M,Q.B,W.V,y.f,U.n,f.M,S.V,l.JV],styles:["input[_ngcontent-%COMP%]::placeholder{color:#b2b2b2!important}.test-config[_ngcontent-%COMP%]{width:620px}.loading[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;justify-content:center;align-items:center}.setting-title[_ngcontent-%COMP%]{text-transform:uppercase;margin-bottom:5px;font-size:14px;color:#2262ae}.setting-block[_ngcontent-%COMP%]{background:#fff}.setting-item[_ngcontent-%COMP%]{margin-bottom:15px}.setting-input[_ngcontent-%COMP%]{height:100%;border-left:0px;border-top-left-radius:0;border-bottom-left-radius:0}.setting-label[_ngcontent-%COMP%]{padding:15px;align-self:center;line-height:1.5;color:#495057;background-color:#e9ecef;border:1px solid #ced4da;border-bottom-left-radius:5px;border-top-left-radius:5px}.setting-form-input[_ngcontent-%COMP%]{padding:8.3px 15px;line-height:1.5;font-size:1rem;color:#495057;background-color:#fff;border:1px solid #ced4da;border-bottom-right-radius:.25rem;border-top-right-radius:.25rem}.setting-field-time[_ngcontent-%COMP%]{border:1px solid #ced4da;border-radius:3px;text-align:center;padding:0}.p-custom[_ngcontent-%COMP%]{padding:12.8px 15px}.setting-advanced[_ngcontent-%COMP%]{margin-top:20px}.setting-head[_ngcontent-%COMP%]{margin-bottom:10px;display:flex;align-items:center}.setting-label-textarea[_ngcontent-%COMP%]{align-self:initial;display:flex;justify-content:center;align-items:center}.setting-textarea[_ngcontent-%COMP%]{height:120px}.picker-icon[_ngcontent-%COMP%]{cursor:pointer;position:absolute;width:16px;height:0;font-size:16px;right:0}.btn-transparent[_ngcontent-%COMP%]{display:flex;align-items:center;border:none;background:transparent}.btn-transparent[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{margin-left:20px;color:#2262ae}.more-link[_ngcontent-%COMP%]{color:#2262ae;transition:all .5s}.more-link[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{color:#103767}.label-custom[_ngcontent-%COMP%]{padding:45px 15px}  .mat-checkbox-layout{margin-bottom:0}small[_ngcontent-%COMP%]{color:#0006}.box-input[_ngcontent-%COMP%]{margin:0 5px;border:1px solid #ccc;height:24px;border-radius:3px;padding-left:5px;width:60px}.full-width[_ngcontent-%COMP%]{width:100%;max-width:100%}.w-92[_ngcontent-%COMP%]{width:92%!important}.w-9325[_ngcontent-%COMP%]{width:93.25%!important}.info_field[_ngcontent-%COMP%]{margin:8px 0}.form-field-custom[_ngcontent-%COMP%]{background-color:#0000000a;border:1px solid rgba(206,212,218,.6980392157);border-radius:.25rem;padding:5px 8px}.custom-input[_ngcontent-%COMP%], .custom-input-btn[_ngcontent-%COMP%]{border:none;width:100%;padding:5px;margin-left:5px}.border-auto[_ngcontent-%COMP%]{border:1px solid #dc3545}.custom-input[_ngcontent-%COMP%]:hover{border-color:#80bdff;outline:0;box-shadow:0 0 0 .2rem #007bff40}.custom-input[_ngcontent-%COMP%]:focus{outline-width:1px}.form-custom[_ngcontent-%COMP%]{padding-top:0;padding-bottom:0}@media only screen and (max-width: 1196px){  .mat-radio-label-content{white-space:normal}}@media only screen and (max-width: 350px){.test-config__box--grid[_ngcontent-%COMP%]{display:grid}}[type=number][_ngcontent-%COMP%]{appearance:none;-webkit-appearance:textfield;appearance:textfield;-webkit-appearance:none;-moz-appearance:textfield}input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button, input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.word-wrap[_ngcontent-%COMP%]{word-break:break-word}.school-info_bg[_ngcontent-%COMP%]{width:100%}.note[_ngcontent-%COMP%]{font-style:italic;font-size:13px;font-weight:600}.dialog-title[_ngcontent-%COMP%]{font-size:18px;font-weight:500;text-align:center}.infor_box[_ngcontent-%COMP%]{background-color:#fff;border:1px solid rgba(206,212,218,.6980392157);border-radius:.25rem;margin:8px 0}.no_select[_ngcontent-%COMP%]{-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}.custom-mix-question-height[_ngcontent-%COMP%]{height:160px}.custom-invalid-mix-form[_ngcontent-%COMP%]{border-color:#dc3545}.custom-mix-group-question[_ngcontent-%COMP%]{background-color:#e9ecef;padding-left:0!important;padding-right:0!important;margin-left:0!important;margin-right:0!important;padding-bottom:0!important;border:1px solid #ced4da;border-radius:.25rem}.test-config__formMixQuestion[_ngcontent-%COMP%]{border:none;border-left:1px solid #ced4da}.no-border[_ngcontent-%COMP%]{border:none}.btn-offline[_ngcontent-%COMP%]{background:#ec9b00;color:#fff;transition:all .5s}.btn-offline[_ngcontent-%COMP%]:hover{background:#c8860b}.custom-select[_ngcontent-%COMP%]{height:100%;border-top-left-radius:0;border-bottom-left-radius:0;border-left:none}.custom-select-md[_ngcontent-%COMP%]{border:1px solid #ced4da;border-radius:.25rem}.btn-width[_ngcontent-%COMP%]{width:140px}.classroom_list[_ngcontent-%COMP%]{height:220px;white-space:nowrap;padding-left:2px;overflow:hidden}.badge-info[_ngcontent-%COMP%]{color:#fff;background-color:#2361ae}.setting-block-mix[_ngcontent-%COMP%]{height:180px;overflow:hidden;padding-bottom:40px}.hiddenTooltip[_ngcontent-%COMP%]{position:absolute;visibility:hidden;left:140px;width:0;top:3em}  .mat-checkbox-layout .mat-checkbox-label{font-weight:400}.px-15[_ngcontent-%COMP%]{padding-right:15px;padding-left:15px}.flex-around[_ngcontent-%COMP%]{justify-content:space-around}.setting-form-input-v2[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;justify-content:center;padding-right:0}.setting-block-mix-head[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding-right:20px}.py-azt-4[_ngcontent-%COMP%]{padding:30px 15px}@media only screen and (max-width: 1024px){.school-info[_ngcontent-%COMP%]{width:95%;max-width:95%}.block-icon[_ngcontent-%COMP%]{right:20px}}@media screen and (max-width: 768px){.setting-label[_ngcontent-%COMP%]{color:#495057;background-color:transparent;border:none;padding:0;font-weight:500;text-align:left;margin-bottom:10px}.classroom_list[_ngcontent-%COMP%]{white-space:pre-wrap;padding-left:2px;overflow:auto}.setting-form-input[_ngcontent-%COMP%]{padding:10px 15px;color:#495057;background-color:#fff;border:1px solid #ced4da;border-radius:.25rem}.setting-input[_ngcontent-%COMP%]{border-radius:.25rem;border:1px solid #ced4da;min-height:65px}.btn-azt-block[_ngcontent-%COMP%]{display:block;margin-bottom:10px}.px-15[_ngcontent-%COMP%]{padding-right:0}.flex-around[_ngcontent-%COMP%]{justify-content:flex-start}.mt-md-10[_ngcontent-%COMP%]{margin-top:10px}.setting-block-mix[_ngcontent-%COMP%]{height:auto}.setting-form-input-v2[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;justify-content:center}.setting-field-time[_ngcontent-%COMP%]{margin-top:10px}.paddingCustom[_ngcontent-%COMP%]{padding:0!important}.setting-block-mix-head[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.py-azt-4[_ngcontent-%COMP%]{padding:0}.setting-label-textarea[_ngcontent-%COMP%]{justify-content:flex-start}.test-config[_ngcontent-%COMP%]{width:auto}}"]}),v})()},50121:(B,D,a)=>{a.d(D,{V:()=>W});var t=a(65879),r=a(56223),L=a(65592),I=a(76359),e=a(47496),n=a(76718),_=a(2783),p=a(4021),c=a(96814),C=a(92596),M=a(37722),A=a(36727);function o(y,U){if(1&y&&(t.TgZ(0,"span",11),t._uU(1),t.ALo(2,"slice"),t.qZA()),2&y){const f=t.oxw().$implicit;t.s9C("matTooltip",f.controls.classroomName.value),t.xp6(1),t.hij(" ",t.Dn7(2,2,f.controls.classroomName.value,0,30)+"..."," ")}}function N(y,U){if(1&y&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&y){const f=t.oxw().$implicit;t.xp6(1),t.hij(" ",f.controls.classroomName.value," ")}}function E(y,U){1&y&&(t.TgZ(0,"span",12),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&y&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_testbank_test_config_share")," "))}const j=function(y){return{"text-primary font-medium":y}},O=function(y){return{permissionObj:y}};function w(y,U){if(1&y){const f=t.EpF();t.TgZ(0,"div",4)(1,"div",5),t.NdJ("click",function(){const x=t.CHM(f).$implicit,m=t.oxw(2);return t.KtG(m.showListStudentInClassroomDialog(x.controls.classroomId.value,x.controls.classroomName.value))}),t.TgZ(2,"span",6),t._UZ(3,"lucide-icon",7),t.qZA(),t.YNc(4,o,3,6,"span",8),t.YNc(5,N,2,1,"span",0),t.YNc(6,E,3,3,"span",9),t.ALo(7,"fullPermission"),t.TgZ(8,"span",10),t._uU(9),t.qZA()()()}if(2&y){const f=U.$implicit;t.xp6(1),t.Q6J("ngClass",t.VKq(8,j,f.controls.countSelect.value)),t.xp6(3),t.Q6J("ngIf",f.controls.classroomName.value.length>30),t.xp6(1),t.Q6J("ngIf",f.controls.classroomName.value.length<=30),t.xp6(1),t.Q6J("ngIf",!t.xi3(7,5,t.VKq(10,O,f.controls.permissionObjs.value),"classroom")),t.xp6(3),t.hij(" (",f.controls.countSelect.value+"/"+f.controls.countStudents.value,") ")}}const z=function(){return[]};function Q(y,U){if(1&y&&(t.TgZ(0,"div")(1,"form",1)(2,"div",2),t.YNc(3,w,10,12,"div",3),t.qZA()()()),2&y){const f=t.oxw();let S;t.xp6(1),t.Q6J("formGroup",f.form),t.xp6(2),t.Q6J("ngForOf",null!==(S=f.form.controls.studentIds.controls)&&void 0!==S?S:t.DdM(2,z))}}let W=(()=>{class y extends e.Q{initClassroomCheckbox(){this.formArray.clear(),this.objs.forEach(l=>{let x=new r.cw({classroomId:new r.NI(l.id,{nonNullable:!0}),classroomName:new r.NI(l.name,{nonNullable:!0}),permissionObjs:new r.NI(l.permissionObj,{nonNullable:!0}),listStudents:new r.Oe([]),countStudents:new r.NI(l.countStudents,{nonNullable:!0}),loadingStudents:new r.NI(!1,{nonNullable:!0}),selectAll:new r.NI(!1,{nonNullable:!0}),countSelect:new r.NI(0,{nonNullable:!0}),isShowCheckStudent:new r.NI(!1,{nonNullable:!0})});this.formArray.push(x)});let f=this.commonService.uniqueArray(this.examStudentObjs.map(l=>l.classroomId)),S=this.commonService.uniqueArray(this.examStudentObjs.map(l=>l.studentId));for(let l=0;l<f.length;l++)this.getListStudentFromApiAndShow(f[l],S)}getStudentListByClassroomIdFromApi(f){return new L.y(S=>{this.waitDestroy(this.studentProfileV2Service.apiStudentProfileV2GetObjsByClassroomIdGet(f).subscribe(l=>{1==l.success?(S.next(l.data?.studentObjs),S.complete()):(S.next([]),S.complete())}))})}getListStudentFromApiAndShow(f,S){let l=this.formArray.controls.find(x=>x.controls.classroomId.value==f&&!x.controls.listStudents.length);l&&(l.controls.loadingStudents.setValue(!0),this.getStudentListByClassroomIdFromApi(f).subscribe(x=>{x.length&&this.addStudentToFormArr(x,f,S),l?.controls.loadingStudents.setValue(!1)}))}addStudentToFormArr(f,S,l){let x=this.formArray.controls.find(m=>m.controls.classroomId.value==S);x&&(f.forEach(m=>{let u=this.commonService.isExistInArray(l,m.id),g=new r.cw({id:new r.NI(m.id,{nonNullable:!0}),name:new r.NI(m.fullName??"",{nonNullable:!0}),choose:new r.NI(u,{nonNullable:!0})});x?.controls.listStudents.push(g)}),x?.controls.countSelect.setValue(x?.controls.listStudents.value.filter(m=>m.choose).length??0),x?.controls.countSelect.value==x?.controls.listStudents.length&&x.controls.selectAll.setValue(!0))}showListStudentInClassroomDialog(f,S){this.getListStudentFromApiAndShow(f,[]),this.sAztDialogService.open(n.V,{data:{form:this.form,classroomId:f,classroomName:S,permissionName:this.permissionName,formArrayOfStudentIds:this.formArray},width:"1000px",autoFocus:!1})}ngOnInit(){super.ngOnInit(),this.objs.map(f=>f.name=this.commonService.myTranslateInstant(f.name)??""),this.formArray=this.form.controls.studentIds,this.initClassroomCheckbox()}constructor(f,S){super(),this.sAztDialogService=f,this.studentProfileV2Service=S,this.changeCheckboxEvent=new t.vpe,this.formArray=new r.Oe([]),this.objs=[],this.examStudentObjs=[],this.permissionName=I.y.exam,this.listPermissionTypes=I.y}}return y.\u0275fac=function(f){return new(f||y)(t.Y36(_.C),t.Y36(p.LU))},y.\u0275cmp=t.Xpm({type:y,selectors:[["list-student-checkbox"]],inputs:{form:"form",objs:"objs",examStudentObjs:"examStudentObjs",permissionName:"permissionName"},outputs:{changeCheckboxEvent:"changeCheckboxEvent"},features:[t.qOj],decls:1,vars:1,consts:[[4,"ngIf"],[3,"formGroup"],[1,"grid","grid-cols-12","gap-3","p-3"],["class","col-span-12 md:col-span-6 mt-2","formArrayName","studentIds",4,"ngFor","ngForOf"],["formArrayName","studentIds",1,"col-span-12","md:col-span-6","mt-2"],[1,"flex","cursor-pointer","items-center","icon-align-justify",2,"vertical-align","middle",3,"ngClass","click"],[1,"w-4","h-4","inline-block","mr-2"],["name","align-justify"],[3,"matTooltip",4,"ngIf"],["class","ml-2 py-0.5 px-2 rounded-full text-xs bg-primary text-white cursor-pointer font-medium",4,"ngIf"],[1,"ml-2"],[3,"matTooltip"],[1,"ml-2","py-0.5","px-2","rounded-full","text-xs","bg-primary","text-white","cursor-pointer","font-medium"]],template:function(f,S){1&f&&t.YNc(0,Q,4,3,"div",0),2&f&&t.Q6J("ngIf",S.form)},dependencies:[c.mk,c.sg,c.O5,C.gM,r._Y,r.JL,r.sg,r.CE,M.Nh5,c.OU,A.JV,A.NK],encapsulation:2}),y})()},76718:(B,D,a)=>{a.d(D,{V:()=>S});var t=a(19347),r=a(72164),L=a(76359),I=a(63278),e=a(65879);function n(l,x){1&l&&(e.ynx(0),e._uU(1),e.ALo(2,"mytranslate"),e.BQk()),2&l&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_remove_all")," "))}function _(l,x){1&l&&(e._uU(0),e.ALo(1,"mytranslate")),2&l&&e.hij(" ",e.lcZ(1,1,"lang_select_all")," ")}function p(l,x){if(1&l){const m=e.EpF();e.TgZ(0,"div",19)(1,"div",20)(2,"input",21),e.NdJ("change",function(){e.CHM(m);const g=e.oxw(5);return e.KtG(g.selectAllStudentOfClass())}),e.qZA(),e.TgZ(3,"label",22),e.YNc(4,n,3,3,"ng-container",17),e.YNc(5,_,2,3,"ng-template",null,23,e.W1O),e.qZA()(),e.TgZ(7,"div",24),e._UZ(8,"input",25),e.TgZ(9,"label",26),e._uU(10),e.ALo(11,"mytranslate"),e.qZA()()()}if(2&l){const m=e.MAs(6),u=e.oxw(3).$implicit;e.xp6(4),e.Q6J("ngIf",u.controls.selectAll.value)("ngIfElse",m),e.xp6(6),e.hij(" ",e.lcZ(11,3,"lang_testbank_selected_students")," ")}}function c(l,x){1&l&&(e.ynx(0),e.TgZ(1,"div",27)(2,"div",28),e._UZ(3,"azt-loading-ui"),e.qZA()(),e.BQk())}function C(l,x){1&l&&(e.ynx(0),e.TgZ(1,"div",27)(2,"span"),e._uU(3),e.ALo(4,"mytranslate"),e.qZA()(),e.BQk()),2&l&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"lang_core_class_has_no_student")))}function M(l,x){1&l&&(e.ynx(0),e.TgZ(1,"div",27)(2,"span",32),e._uU(3),e.ALo(4,"mytranslate"),e.qZA()(),e.BQk()),2&l&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"lang_testbank_no_students_selected")))}function A(l,x){if(1&l&&(e.TgZ(0,"div",38)(1,"div",39),e._UZ(2,"input",40),e.TgZ(3,"label",41,42),e.ALo(5,"mytranslate"),e._uU(6),e.ALo(7,"mytranslate"),e.qZA()()()),2&l){const m=e.MAs(4),u=e.oxw().$implicit;e.xp6(1),e.Q6J("formGroup",u),e.xp6(1),e.s9C("id","azt-checkbox-student-"+u.controls.id.value),e.xp6(1),e.s9C("for","azt-checkbox-student-"+u.controls.id.value),e.Q6J("matTooltip",e.lcZ(5,8,u.controls.name.value))("isDisabledTooltip",!1)("matTooltipDisabled",m.isDisabled)("matTooltipShowDelay",500),e.xp6(3),e.hij(" ",e.lcZ(7,10,u.controls.name.value)," ")}}function o(l,x){if(1&l&&(e.ynx(0),e.YNc(1,A,8,12,"div",37),e.BQk()),2&l){const m=x.$implicit,u=e.oxw(7).$implicit;e.xp6(1),e.Q6J("ngIf",null==u.controls.isShowCheckStudent||!u.controls.isShowCheckStudent.value||u.controls.isShowCheckStudent.value&&m.controls.choose.value)}}const N=function(){return["name"]};function E(l,x){if(1&l&&(e.TgZ(0,"div",35),e.YNc(1,o,2,1,"ng-container",36),e.ALo(2,"appSearchStudentForm"),e.qZA()),2&l){const m=e.oxw(6).$implicit,u=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",e.Dn7(2,1,m.controls.listStudents.controls,u.searchContentObj.searchContent,e.DdM(5,N)))}}function j(l,x){1&l&&(e.TgZ(0,"div",27),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&l&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"lang_student_classroom_list_detail_not_student")," "))}function O(l,x){if(1&l&&(e.YNc(0,E,3,6,"div",33),e.YNc(1,j,3,3,"div",34),e.ALo(2,"appSearchStudentForm")),2&l){const m=e.oxw(5).$implicit,u=e.oxw(2);e.Q6J("ngIf",m.controls.listStudents.controls.length),e.xp6(1),e.Q6J("ngIf",0==e.Dn7(2,2,m.controls.listStudents.controls,u.searchContentObj.searchContent,e.DdM(6,N)).length)}}function w(l,x){if(1&l&&(e.TgZ(0,"azt-mat-dialog-content",30),e.YNc(1,M,5,3,"ng-container",17),e.YNc(2,O,3,7,"ng-template",null,31,e.W1O),e.qZA()),2&l){const m=e.MAs(3),u=e.oxw(4).$implicit;e.Q6J("defaultHeight",40),e.xp6(1),e.Q6J("ngIf",!u.controls.countSelect.value&&u.controls.isShowCheckStudent.value)("ngIfElse",m)}}function z(l,x){if(1&l&&(e.YNc(0,C,5,3,"ng-container",17),e.YNc(1,w,4,3,"ng-template",null,29,e.W1O)),2&l){const m=e.MAs(2),u=e.oxw(3).$implicit;e.Q6J("ngIf",!u.controls.listStudents.length)("ngIfElse",m)}}function Q(l,x){if(1&l){const m=e.EpF();e.TgZ(0,"div",10)(1,"div",11)(2,"div",12)(3,"span"),e._uU(4),e.ALo(5,"mytranslate"),e.qZA(),e.TgZ(6,"div",13)(7,"azt-search-box",14),e.NdJ("onSearch",function(g){e.CHM(m);const Z=e.oxw(4);return e.KtG(Z.onSearchBox(g.searchObj))}),e.ALo(8,"mytranslate"),e.qZA()()(),e.YNc(9,p,12,5,"div",15),e.qZA(),e.TgZ(10,"div",16),e.YNc(11,c,4,0,"ng-container",17),e.YNc(12,z,3,2,"ng-template",null,18,e.W1O),e.qZA()()}if(2&l){const m=e.MAs(13),u=e.oxw(2).$implicit,g=e.oxw(2);e.Q6J("formGroup",u),e.xp6(4),e.hij(" ",g.data.classroomName+(u.controls.countSelect.value?" ("+e.lcZ(5,8,"lang_auto_da_chon")+": "+u.controls.countSelect.value+")":"")," "),e.xp6(3),e.Q6J("isServerSearch",!1)("styleInput","form-control-sm ")("placeholder",e.lcZ(8,10,"lang_student_classroom_list_detail_search_name_student")),e.xp6(2),e.Q6J("ngIf",u.controls.listStudents.controls.length),e.xp6(2),e.Q6J("ngIf",u.controls.loadingStudents.value)("ngIfElse",m)}}const W=function(l){return{permissionObj:l}};function y(l,x){if(1&l&&(e.TgZ(0,"div"),e.YNc(1,Q,14,12,"div",9),e.ALo(2,"createPermission"),e.qZA()),2&l){const m=e.oxw().$implicit,u=e.oxw(2);e.xp6(1),e.Q6J("ngIf",e.xi3(2,1,e.VKq(4,W,m.controls.permissionObjs.value),u.listPermissionTypes[u.data.permissionName]))}}function U(l,x){if(1&l&&(e.ynx(0,7),e.YNc(1,y,3,6,"div",8),e.BQk()),2&l){const m=x.$implicit,u=e.oxw(2);e.xp6(1),e.Q6J("ngIf",m.controls.classroomId.value==u.data.classroomId)}}function f(l,x){if(1&l){const m=e.EpF();e.TgZ(0,"div",1)(1,"div",2)(2,"div",3),e.YNc(3,U,2,1,"ng-container",4),e.qZA()(),e.TgZ(4,"div",5)(5,"button",6),e.NdJ("click",function(){e.CHM(m);const g=e.oxw();return e.KtG(g.btnCloseDialog())}),e._uU(6),e.ALo(7,"mytranslate"),e.qZA()()()}if(2&l){const m=e.oxw();e.xp6(2),e.Q6J("formGroup",m.data.form),e.xp6(1),e.Q6J("ngForOf",m.data.form.controls.studentIds.controls),e.xp6(3),e.hij(" ",e.lcZ(7,3,"lang_auto_dong")," ")}}let S=(()=>{class l extends r.e{btnCloseDialog(){this.dialogRef.close()}selectAllStudentOfClass(){let m=this.formArray.controls.find(u=>u.controls.classroomId.value==this.data.classroomId);if(m){let u=m.controls.selectAll.value;m.controls.listStudents.controls.forEach(g=>{g.controls.choose.setValue(u)}),this.calculateCheckAllAndTotalSelected()}}calculateCheckAllAndTotalSelected(){let m=this.formArray.controls.find(u=>u.controls.classroomId.value==this.data.classroomId);m&&(m?.controls.listStudents.value.filter(Z=>Z.choose).length??0)!=m.controls.countSelect.value&&(m.controls.countSelect.setValue(m?.controls.listStudents.value.filter(Z=>Z.choose).length??0),m.controls.selectAll.setValue(m?.controls.countSelect.value==m?.controls.listStudents.length))}onSearchBox(m){this.searchContentObj=m}ngOnInit(){this.formArray.valueChanges.subscribe(()=>{this.calculateCheckAllAndTotalSelected()})}constructor(m,u){super(u,m),this.dialogRef=m,this.data=u,this.listPermissionTypes=L.y,this.searchContentObj=new I.h,this.formArray=u.formArrayOfStudentIds}}return l.\u0275fac=function(m){return new(m||l)(e.Y36(t.so,8),e.Y36(t.WI,8))},l.\u0275cmp=e.Xpm({type:l,selectors:[["azt-list-student-dialog"]],features:[e.qOj],decls:1,vars:1,consts:[["class","box",4,"ngIf"],[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-0",3,"formGroup"],["formArrayName","studentIds",4,"ngFor","ngForOf"],[1,"p-3","text-right"],["azt-track-service","azt-dialog-warning-3FIn9IaXN",1,"btn","w-24","btn-primary",3,"click"],["formArrayName","studentIds"],[4,"ngIf"],[3,"formGroup",4,"ngIf"],[3,"formGroup"],[1,"p-3","bg-slate-100","dark:bg-darkmode-400","flex","flex-col","sm:flex-row","sm:h-auto","sm:items-center"],[1,"font-medium","mr-auto"],[1,"w-full","relative","flex","items-center","mt-2"],[3,"isServerSearch","styleInput","placeholder","onSearch"],["class","flex items-center mt-2 sm:mt-0",4,"ngIf"],[2,"height","320px"],[4,"ngIf","ngIfElse"],["doneLoadStudents",""],[1,"flex","items-center","mt-2","sm:mt-0"],[1,"form-check","mr-3"],["id","selected-all","type","checkbox","formControlName","selectAll",1,"form-check-input",3,"change"],["for","selected-all",1,"form-check-label"],["elseTemplate",""],[1,"form-check"],["id","show-student-checked","type","checkbox","formControlName","isShowCheckStudent",1,"form-check-input"],["for","show-student-checked",1,"form-check-label"],[1,"h-full","flex","items-center","justify-center","p-5"],[1,"w-5","h-5"],["hasStudents",""],[3,"defaultHeight"],["checkedBox",""],[1,"mx-auto"],["class","grid grid-cols-12 gap-3 p-3","formArrayName","listStudents",4,"ngIf"],["class","h-full flex items-center justify-center p-5",4,"ngIf"],["formArrayName","listStudents",1,"grid","grid-cols-12","gap-3","p-3"],[4,"ngFor","ngForOf"],["class","col-span-12 md:col-span-4 mt-2",4,"ngIf"],[1,"col-span-12","md:col-span-4","mt-2"],[1,"azt-checkbox-item",3,"formGroup"],["type","checkbox","formControlName","choose",1,"form-check-input",3,"id"],[1,"form-check-label","truncate",2,"vertical-align","middle",3,"matTooltip","isDisabledTooltip","matTooltipDisabled","matTooltipShowDelay","for"],["c","isDisabled"]],template:function(m,u){1&m&&e.YNc(0,f,8,5,"div",0),2&m&&e.Q6J("ngIf",u.data.form)},encapsulation:2}),l})()},20254:(B,D,a)=>{a.d(D,{Q:()=>c});var t=a(65592),r=a(36435),L=a(62836),I=a(88135),e=a(20760),n=a(65879),_=a(46558),p=a(2783);let c=(()=>{class C{doExamAction(A,o){switch(o){case e.F.CONFIG_EXAM_CLASSROOM:return this.showConfigExamClassroomDialog(A);case e.F.SHOW_EXAM_DETAIL:this.showExamDetailDialog(A);break;case e.F.SHARE_OFFLINE_RESULT:this.showOfflineShareDialog(A);break;case e.F.COPY_EXAM_LINK:this.copyExamLink()}return this.returnUndefinedOutput()}copyExamLink(){this.commonService.snackSuccess("lang_auto_sao_chep_thanh_cong")}showConfigExamClassroomDialog(A){return new t.y(o=>{this.sAztDialogService.open(I.Y,{width:"750px",data:{hashId:A.examObj.hashId,examStudents:A.examObj?.examStudents??[]},restoreFocus:!1}).afterClosed().subscribe(E=>{E?(o.next({reloadData:!0}),o.complete()):(o.next(void 0),o.complete())})})}showExamDetailDialog(A){let o={obj:{...A.examObj,countQuestion:0,showFrontend:1,editable:!0,allowStudentView:!0},globalLadingPage:A.globalLadingPage,curCateId:A.categoryId,isOnLib:0,isShow:!0,showDelete:!0};this.sAztDialogService.open(L.H,{width:"800px",maxWidth:"90vw",enterAnimationDuration:"0ms",exitAnimationDuration:"0ms",data:o,restoreFocus:!1}).afterClosed().subscribe(E=>{})}showOfflineShareDialog(A){this.sAztDialogService.open(r.h,{width:"600px",data:{examHashId:A.examObj.hashId,useDialog:!0},restoreFocus:!1})}returnUndefinedOutput(){return new t.y(A=>{A.next(void 0),A.complete()})}constructor(A,o){this.commonService=A,this.sAztDialogService=o}}return C.\u0275fac=function(A){return new(A||C)(n.LFG(_.z),n.LFG(p.C))},C.\u0275prov=n.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})()},27722:(B,D,a)=>{a.d(D,{d:()=>I});var t=a(25690),r=a(65879),L=a(46558);let I=(()=>{class e{sortExamByColumn(_,p,c){return p==t.H.BY_NAME?this.sortExamByName(_,c):p==t.H.BY_PUBLISH_STATUS?this.sortExamByPublishStatus(_,c):p==t.H.BY_UPDATED_DATE?this.sortExamByDateUpdated(_,c):p==t.H.BY_ATTENDED?this.sortExamByAttended(_,c):this.sortExamByName(_,c)}sortExamByName(_,p){var c=[..._.rootCategoryObjs??[]],C=[..._.rootDocumentObjs??[]];return 1==p?{categoryObjs:this._sortCateByName(c),documentObjs:this._sortDocumentByName(C)}:{categoryObjs:this._sortCateByName(c).reverse(),documentObjs:this._sortDocumentByName(C).reverse()}}sortExamByPublishStatus(_,p){var c=[..._.rootDocumentObjs??[]];return 1==p?{categoryObjs:_.currentCategoryObjs,documentObjs:this._sortDocumentByPublish(c,c?.length)}:{categoryObjs:_.currentCategoryObjs,documentObjs:this._sortDocumentByPublish(c,c?.length).reverse()}}sortExamByDateUpdated(_,p){var c=this.commonService.castObj(_.rootCategoryObjs),C=this.commonService.castObj(_.rootDocumentObjs);return 1==p?{categoryObjs:this._sortCateByDateUpdateExam(c??[]),documentObjs:this._sortDocumentByUpdateTime(C??[])}:{categoryObjs:this._sortCateByDateUpdateExam(c??[]).reverse(),documentObjs:this._sortDocumentByUpdateTime(C??[]).reverse()}}sortExamByAttended(_,p){var c=this.commonService.castObj(_.rootDocumentObjs);return 1==p?{categoryObjs:_.currentCategoryObjs,documentObjs:this._sortDocumentByAttended(c??[])}:{categoryObjs:_.currentCategoryObjs,documentObjs:this._sortDocumentByAttended(c??[]).reverse()}}_sortCateByName(_){return _?.sort((p,c)=>(p.name?.trim()??"").localeCompare(c.name?.trim()??""))??[]}_sortDocumentByName(_){return _?.sort((p,c)=>(p.name?.trim()??"").localeCompare(c.name?.trim()??""))??[]}_sortDocumentByPublish(_,p){let c=[],C=[];for(let M=0;M<(p??0);M++)0==_?.[M].isPublished&&c.push(_[M]),1==_?.[M].isPublished&&C.push(_[M]);return c.concat(C)}_sortCateByDateUpdateExam(_){return _.sort((p,c)=>Number(new Date(p.updatedAt??""))-Number(new Date(c.updatedAt??""))),_}_sortDocumentByUpdateTime(_){return _?.sort((p,c)=>Number(new Date(p.updatedAt??""))-Number(new Date(c.updatedAt??"")))}_sortDocumentByAttended(_){return _?.sort((p,c)=>Number(p.attended)-Number(c.attended))}constructor(_){this.commonService=_}}return e.\u0275fac=function(_){return new(_||e)(r.LFG(L.z))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},20760:(B,D,a)=>{a.d(D,{F:()=>t});var t=function(r){return r[r.CONFIG_EXAM_CLASSROOM=0]="CONFIG_EXAM_CLASSROOM",r[r.SHOW_EXAM_DETAIL=1]="SHOW_EXAM_DETAIL",r[r.SHARE_OFFLINE_RESULT=2]="SHARE_OFFLINE_RESULT",r[r.COPY_EXAM_LINK=3]="COPY_EXAM_LINK",r}(t||{})},31810:(B,D,a)=>{a.d(D,{T:()=>t});var t=function(r){return r[r.OFFLINE_CONFIG=0]="OFFLINE_CONFIG",r[r.CONFIG_EXAM=1]="CONFIG_EXAM",r[r.EDIT_EXAM=2]="EDIT_EXAM",r[r.POWER_POINT=3]="POWER_POINT",r[r.STATISTIC=4]="STATISTIC",r[r.TESTED_LIST=5]="TESTED_LIST",r}(t||{})},25690:(B,D,a)=>{a.d(D,{H:()=>t});var t=function(r){return r[r.BY_NAME=0]="BY_NAME",r[r.BY_PUBLISH_STATUS=1]="BY_PUBLISH_STATUS",r[r.BY_UPDATED_DATE=2]="BY_UPDATED_DATE",r[r.BY_ATTENDED=3]="BY_ATTENDED",r}(t||{})},31225:(B,D,a)=>{a.d(D,{h:()=>t});var t=function(r){return r.COPY="copy",r.CUT="cut",r.DELETE="delete",r}(t||{})},94145:(B,D,a)=>{a.d(D,{Y:()=>t});var t=function(r){return r[r.EXAM_CATEGORY=0]="EXAM_CATEGORY",r[r.EXAM=1]="EXAM",r}(t||{})},55948:(B,D,a)=>{a.d(D,{e:()=>I});var t=a(31225),r=a(94145),L=a(65879);let I=(()=>{class e{constructor(){this.clipboardObjs=[]}setActionToClipboard(_,p,c,C){var M={id:_,name:C,type:p,action:c};this.clipboardObjs.filter(o=>o.id==M.id&&o.type==M.type).length>0?this.clipboardObjs.forEach(o=>{o.id==M.id&&o.type==M.type&&(o.action=M.action)}):this.clipboardObjs.push(M)}hasInClipboard(_,p){return this.clipboardObjs.filter(C=>C.id==_&&C.type==p).length>0}hasCopyFolderActionInClipboard(){var _=!1;return this.clipboardObjs.forEach(p=>{p.type==r.Y.EXAM_CATEGORY&&p.action==t.h.COPY&&(_=!0)}),_}getActionOfDocumentObj(_,p){var c=this.clipboardObjs.filter(C=>C.id==_&&C.type==p);if(c&&c.length>0)return c[0].action}removeDocumentInClipboard(_,p){for(var c=0;c<this.clipboardObjs.length;c++)this.clipboardObjs[c].id==_&&this.clipboardObjs[c].type==p&&this.clipboardObjs.splice(c,1)}isPasteToSelfFolder(_){var p=!1;return this.clipboardObjs.forEach(c=>{c.id==_&&c.type==r.Y.EXAM_CATEGORY&&c.action==t.h.COPY&&(p=!0)}),p}getCurrentClipBoard(){return this.clipboardObjs}resetClipBoardAfterPasteOrCancelAllActions(){this.clipboardObjs=[]}}return e.\u0275fac=function(_){return new(_||e)},e.\u0275prov=L.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},19743:(B,D,a)=>{a.d(D,{M:()=>t});class t{static studentCheckBoxValidator(L){const e=L.controls.whoAllow,n=L.controls.studentIds;return e&&n?3!=e.value||t.countCheckBox(n)>=1?(n.setErrors(null),null):(n.setErrors({studentCheckBoxValidator:!0}),{identityRevealed:!0}):null}static countCheckBox(L){var I=0;return L.value.forEach(e=>{I+=e.listStudents?.filter(n=>n.choose).length??0}),I}}},52467:(B,D,a)=>{a.d(D,{S:()=>N});var t=a(65879),r=a(47496),L=a(38228),I=a(96814),e=a(36727);const n=["table"];function _(E,j){if(1&E&&(t.TgZ(0,"td",6),t._uU(1),t.ALo(2,"formatOfflineExamHashIdToNumber"),t.qZA()),2&E){const O=j.$implicit,w=j.index;t.uIk("excelRow",1)("excelColumn",w+1),t.xp6(1),t.hij(" ",t.lcZ(2,3,null==O?null:O.offlineMixQuestionHashId)," ")}}function p(E,j){if(1&E&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&E){const O=t.oxw(2).$implicit,w=t.oxw().$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,O.offlineQuestionObjs[w].answer)," ")}}function c(E,j){1&E&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"mytranslate"),t.qZA()),2&E&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"lang_core_essay_question")," "))}function C(E,j){if(1&E&&(t.TgZ(0,"span"),t.YNc(1,p,3,3,"span",7),t.YNc(2,c,3,3,"span",7),t.qZA()),2&E){const O=t.oxw().$implicit,w=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",!(null!=O.offlineQuestionObjs&&null!=O.offlineQuestionObjs[w]&&O.offlineQuestionObjs[w].isEssay)),t.xp6(1),t.Q6J("ngIf",null==O.offlineQuestionObjs||null==O.offlineQuestionObjs[w]?null:O.offlineQuestionObjs[w].isEssay)}}function M(E,j){if(1&E&&(t.TgZ(0,"td",6),t.YNc(1,C,3,2,"span",7),t.qZA()),2&E){const O=j.$implicit,w=j.index,z=t.oxw().$implicit;let Q;t.uIk("excelRow",z+2)("excelColumn",w+1),t.xp6(1),t.Q6J("ngIf",(null!==(Q=null==O.offlineQuestionObjs?null:O.offlineQuestionObjs.length)&&void 0!==Q?Q:0)>z)}}const A=function(){return[]};function o(E,j){if(1&E&&(t.TgZ(0,"tr")(1,"td",3),t._uU(2),t.qZA(),t.YNc(3,M,2,3,"td",4),t.qZA()),2&E){const O=j.$implicit,w=t.oxw();let z;t.xp6(1),t.uIk("excelRow",O+2)("excelColumn",0),t.xp6(1),t.hij(" ",O+w.startQuestionIndex," "),t.xp6(1),t.Q6J("ngForOf",null!==(z=null==w.obj?null:w.obj.offlineMixQuestionObjs)&&void 0!==z?z:t.DdM(4,A))}}let N=(()=>{class E extends r.Q{calculateMaxQuestion(){let O=0;return this.obj.offlineMixQuestionObjs&&this.obj.offlineMixQuestionObjs.forEach(w=>{O<(w.offlineQuestionObjs?.length??0)&&(O=w.offlineQuestionObjs?.length??0)}),O}ngOnChanges(){this.isExported=!1,this.maxQuestionIndex=this.calculateMaxQuestion(),this.totalExamCode=this.obj.offlineMixQuestionObjs?.length??0}ngAfterViewChecked(){0==this.isExported&&(this.isExported=!0,setTimeout(()=>{this.exportDataDone.emit(this.exportExcelService.exportHtmlTableToExcelBlob(this.table,!0))},0))}ngOnInit(){super.ngOnInit()}constructor(O){super(),this.exportExcelService=O,this.startQuestionIndex=1,this.exportDataDone=new t.vpe,this.maxQuestionIndex=0,this.totalExamCode=0,this.isExported=!1}}return E.\u0275fac=function(O){return new(O||E)(t.Y36(L.L))},E.\u0275cmp=t.Xpm({type:E,selectors:[["azt-export-excel-for-answersheet"]],viewQuery:function(O,w){if(1&O&&t.Gf(n,5),2&O){let z;t.iGM(z=t.CRH())&&(w.table=z.first)}},inputs:{obj:"obj",startQuestionIndex:"startQuestionIndex"},outputs:{exportDataDone:"exportDataDone"},features:[t.qOj,t.TTD],decls:14,vars:16,consts:[[1,"table","table-bordered",2,"display","none"],["table",""],["rowspan","2","excelStyle",'{"alignment":{"vertical":"center","horizontal":"center","wrapText":true},"font":{"bold":true}}',1,"text-center","azt-excel-cell"],["excelStyle",'{"alignment":{"vertical":"center","horizontal":"center","wrapText":true},"font":{"bold":true}}',1,"text-center","azt-excel-cell"],["class","text-center azt-excel-cell","excelStyle",'{"alignment":{"vertical":"center","horizontal":"center","wrapText":true}}',4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["excelStyle",'{"alignment":{"vertical":"center","horizontal":"center","wrapText":true}}',1,"text-center","azt-excel-cell"],[4,"ngIf"]],template:function(O,w){if(1&O&&(t.TgZ(0,"table",0,1)(2,"tbody")(3,"tr")(4,"td",2),t._uU(5),t.ALo(6,"mytranslate"),t.qZA(),t.TgZ(7,"td",3),t._uU(8),t.ALo(9,"mytranslate"),t.qZA()(),t.TgZ(10,"tr"),t.YNc(11,_,3,5,"td",4),t.qZA(),t.YNc(12,o,4,5,"tr",5),t.ALo(13,"createEmptyArray"),t.qZA()()),2&O){let z;t.xp6(4),t.uIk("excelRow",0)("excelColumn",0),t.xp6(1),t.hij(" ",t.lcZ(6,9,"lang_testbank_answersheet_question_title")," "),t.xp6(2),t.uIk("colspan",w.totalExamCode)("excelRow",0)("excelColumn",1),t.xp6(1),t.hij(" ",t.lcZ(9,11,"lang_auto_ma_de_thi")," "),t.xp6(3),t.Q6J("ngForOf",null!==(z=null==w.obj?null:w.obj.offlineMixQuestionObjs)&&void 0!==z?z:t.DdM(15,A)),t.xp6(1),t.Q6J("ngForOf",t.lcZ(13,13,w.maxQuestionIndex))}},dependencies:[I.sg,I.O5,e.JV,e.Aw,e.ib],encapsulation:2}),E})()},36435:(B,D,a)=>{a.d(D,{h:()=>u});var t=a(56223),r=a(19347),L=a(72164),I=a(76359),e=a(47180),n=a(65879),_=a(49870),p=a(90592),c=a(96814),C=a(70342),M=a(87466),A=a(95545),o=a(37722),N=a(67679),E=a(68547),j=a(76476),O=a(71646),w=a(36727);function z(g,Z){1&g&&(n.TgZ(0,"div",8)(1,"span",9),n._UZ(2,"azt-loading-ui"),n.qZA(),n.TgZ(3,"span",10),n._uU(4,"Loading..."),n.qZA()())}function Q(g,Z){1&g&&(n.TgZ(0,"div",29)(1,"div",30),n._uU(2),n.ALo(3,"mytranslate"),n.qZA()()),2&g&&(n.xp6(2),n.hij("*** ",n.lcZ(3,1,"lang_testbank_test_config_you_not_yet_class"),""))}function W(g,Z){if(1&g){const d=n.EpF();n.TgZ(0,"div",31)(1,"span",32),n._uU(2),n.ALo(3,"mytranslate"),n.qZA(),n.TgZ(4,"button",33),n.NdJ("click",function(){n.CHM(d);const T=n.oxw(3);return n.KtG(T.showCopySuccess())}),n.TgZ(5,"div",34),n._UZ(6,"lucide-icon",35),n.qZA(),n._uU(7," Copy link "),n.qZA()()}if(2&g){const d=n.oxw(3);n.xp6(2),n.Oqu(n.lcZ(3,3,"lang_auto_copy_link_gui_cho_hoc_sinh")),n.xp6(2),n.Q6J("cdkCopyToClipboard",d.copyLinkToClipboard())("disabled",2==d.form.controls.chooseOption.value&&(null==d.form.controls.classroomIds.errors?null:d.form.controls.classroomIds.errors.classroomCheckBoxValidatorWithoutWhoAllow))}}function y(g,Z){1&g&&(n.TgZ(0,"div",36)(1,"p",37),n._uU(2),n.ALo(3,"mytranslate"),n.qZA()()),2&g&&(n.xp6(2),n.Oqu(n.lcZ(3,1,"lang_auto_chua_duoc_cau_hinh_tra_de_thi")))}const U=function(g){return{"h-56-important":g}};function f(g,Z){if(1&g){const d=n.EpF();n.ynx(0),n.TgZ(1,"div",15)(2,"mat-radio-group",16),n.NdJ("change",function(){n.CHM(d);const T=n.oxw(2);return n.KtG(T.changeStatusOfflineShare(void 0))}),n.TgZ(3,"mat-radio-button",17),n._uU(4),n.ALo(5,"mytranslate"),n.qZA(),n.TgZ(6,"mat-radio-button",18),n._uU(7),n.ALo(8,"mytranslate"),n.qZA(),n.TgZ(9,"mat-radio-button",18),n._uU(10),n.ALo(11,"mytranslate"),n.qZA()()(),n.TgZ(12,"div",19)(13,"div",20)(14,"azt-list-classroom-check-all",21),n.NdJ("changeCheckboxEvent",function(T){n.CHM(d);const i=n.oxw(2);return n.KtG(i.changeStatusOfflineShare(T))}),n.qZA()(),n.TgZ(15,"div",22)(16,"ng-scrollbar",23)(17,"azt-list-classroom-checkbox",24),n.NdJ("changeCheckboxEvent",function(T){n.CHM(d);const i=n.oxw(2);return n.KtG(i.changeStatusOfflineShare(T))}),n.qZA()()()(),n.YNc(18,Q,4,3,"div",25),n.TgZ(19,"div",26),n.YNc(20,W,8,5,"div",27),n.qZA(),n.YNc(21,y,4,3,"div",28),n.ALo(22,"fullPermission"),n.BQk()}if(2&g){const d=n.oxw(2);n.xp6(3),n.Q6J("checked",0==d.form.controls.chooseOption.value)("value",0),n.xp6(1),n.Oqu(n.lcZ(5,24,"lang_auto_khong")),n.xp6(2),n.Q6J("checked",1==d.form.controls.chooseOption.value)("value",1),n.xp6(1),n.Oqu(n.lcZ(8,26,"lang_auto_tat_ca_cac_lop")),n.xp6(2),n.Q6J("checked",2==d.form.controls.chooseOption.value)("value",2),n.xp6(1),n.Oqu(n.lcZ(11,28,"lang_auto_tuy_chon_theo_lop")),n.xp6(2),n.Q6J("hidden",2!=d.form.controls.chooseOption.value),n.xp6(2),n.Q6J("formArray",d.form.controls.classroomIds)("objs",d.classroomObjs)("permissionName",d.permissionTypes.exam),n.xp6(2),n.Q6J("visibility","hover")("autoHeightDisabled",!1)("ngClass",n.VKq(33,U,d.isMobileWebView)),n.xp6(1),n.Q6J("form",d.form)("formArrayName","classroomIds")("objs",d.classroomObjs)("shareClassroomIds",d.shareClassroomIds)("permissionName",d.permissionTypes.exam),n.xp6(1),n.Q6J("ngIf",2==d.form.controls.chooseOption.value&&d.form.controls.classroomIds.errors),n.xp6(2),n.Q6J("ngIf",0!=d.form.controls.chooseOption.value),n.xp6(1),n.Q6J("ngIf",!n.xi3(22,30,d.examWithPermissionObj,"exam"))}}function S(g,Z){1&g&&(n.TgZ(0,"div",39)(1,"p",37),n._uU(2),n.ALo(3,"mytranslate"),n.qZA()()),2&g&&(n.xp6(2),n.Oqu(n.lcZ(3,1,"lang_auto_chua_duoc_cau_hinh_tra_de_thi")))}function l(g,Z){if(1&g&&(n.YNc(0,S,4,3,"div",38),n.ALo(1,"fullPermission")),2&g){const d=n.oxw(2);n.Q6J("ngIf",!n.xi3(1,1,d.examWithPermissionObj,"exam"))}}function x(g,Z){if(1&g&&(n.TgZ(0,"form",11)(1,"div",12),n.YNc(2,f,23,35,"ng-container",13),n.ALo(3,"fullPermission"),n.YNc(4,l,2,4,"ng-template",null,14,n.W1O),n.qZA()()),2&g){const d=n.MAs(5),v=n.oxw();n.Q6J("formGroup",v.form),n.xp6(2),n.Q6J("ngIf",n.xi3(3,3,v.examWithPermissionObj,"exam"))("ngIfElse",d)}}function m(g,Z){if(1&g){const d=n.EpF();n.TgZ(0,"div",40)(1,"button",41),n.NdJ("click",function(){n.CHM(d);const T=n.oxw();return n.KtG(T.btnCloseDialog(!1))}),n._uU(2),n.ALo(3,"mytranslate"),n.qZA()()}2&g&&(n.xp6(2),n.hij(" ",n.lcZ(3,1,"lang_auto_dong")," "))}let u=(()=>{class g extends L.e{btnCloseDialog(d){this.dialogRef.close(d)}copyLinkToClipboard(){let d=this.commonService.getCurrentDomain();return this.linkCopy=`${d}/de-thi/${this.examWithPermissionObj?.hashId}?offline=${this.offlineCode}`,this.linkCopy}showCopySuccess(){this.showSuccessSnack("lang_auto_sao_chep_thanh_cong")}getCodeOfflineShare(){this.initStatusObj(),this.waitDestroy(this.offlineShareService.apiOfflineShareGetObjGet(this.examHashId).subscribe(d=>{1==d.success?(this.offlineCode=d.data?.shareHashId??"",this.classroomObjs=d.data?.classroomObjs??[],this.shareClassroomIds=d.data?.shareClassroomIds??[],this.examWithPermissionObj=d.data?.examObj,this.form.controls.chooseOption.setValue(d.data?.showOfflineResult??0),this.successStatusObj()):this.errorStatusObj(d.message??"",!0)}))}changeStatusOfflineShare(d){if(2==this.form.getRawValue().chooseOption&&this.form.controls.classroomIds.errors?.classroomCheckBoxValidatorWithoutWhoAllow)return;let v=this.form.getRawValue().chooseOption;var T=this.sAztClassroomCheckboxService.findClassroomWithNoPermission(this.classroomObjs,I.y.homework);T.push(0);const i=2!=v?[]:this.sAztClassroomCheckboxService.getClassroomIdsChecked(this.classroomObjs,T,this.form.getRawValue().classroomIds);this.waitDestroy(this.offlineShareService.apiOfflineShareChangeStatusPost({examHashId:this.examWithPermissionObj?.hashId??"",status:v,classroomIds:i}).subscribe(s=>{1==s.success?this.offlineCode=s.data?.shareHashId??"":this.errorStatusObj(s.message??"",!0)}))}ngOnInit(){super.ngOnInit(),this.getCodeOfflineShare()}constructor(d,v,T,i){super(T,v),this.offlineShareService=d,this.dialogRef=v,this.sAztClassroomCheckboxService=i,this.examHashId="",this.useDialog=!1,this.permissionTypes=I.y,this.offlineCode="",this.linkCopy="",this.examWithPermissionObj=void 0,this.classroomObjs=[],this.shareClassroomIds=[],this.examHashId=T.examHashId?T.examHashId:this.examHashId,this.useDialog=T?T.useDialog:this.useDialog,this.form=new t.cw({chooseOption:new t.NI(0,{nonNullable:!0}),whoAllow:new t.NI(0,{nonNullable:!0}),classroomIds:new t.Oe([]),isShowCheckClass:new t.NI(!1,{nonNullable:!0})},{validators:[e.h.classroomCheckBoxValidatorWithoutWhoAllow]})}}return g.\u0275fac=function(d){return new(d||g)(n.Y36(_.kN),n.Y36(r.so,8),n.Y36(r.WI,8),n.Y36(p.f))},g.\u0275cmp=n.Xpm({type:g,selectors:[["azt-offline-share"]],inputs:{examHashId:"examHashId",useDialog:"useDialog"},features:[n.qOj],decls:12,vars:6,consts:[[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-body"],[1,"intro-y"],[1,"text-base","font-medium","mr-auto"],["class","d-flex justify-content-center align-items-center",4,"ngIf","ngIfElse"],["doneLoading",""],["class","text-right mt-3",4,"ngIf"],[1,"d-flex","justify-content-center","align-items-center"],[1,"w-4","h-4","inline-block"],[1,"sr-only","ml-2"],[3,"formGroup"],[1,"block-body"],[4,"ngIf","ngIfElse"],["noFullPermission",""],[1,"input-toggle"],["color","primary","formControlName","chooseOption",2,"flex-direction","column",3,"change"],[3,"checked","value"],[1,"mt-1",3,"checked","value"],[1,"block-main-classroom",3,"hidden"],[1,"classroom_check_all"],[3,"formArray","objs","permissionName","changeCheckboxEvent"],[1,"classroom_list"],["pointerEventsMethod","scrollbar",1,"w-full",3,"visibility","autoHeightDisabled","ngClass"],[3,"form","formArrayName","objs","shareClassroomIds","permissionName","changeCheckboxEvent"],["class","col-span-12 pl-0 pt-3",4,"ngIf"],[1,"block-main","mt-2"],["class","block-copy",4,"ngIf"],["class","block-else",4,"ngIf"],[1,"col-span-12","pl-0","pt-3"],[1,"text-left","text-danger"],[1,"block-copy"],[1,"title-copy","mr-2"],["azt-track-service","azt-offline-share-6FNwLsA2D",1,"btn","btn-primary",3,"cdkCopyToClipboard","disabled","click"],[1,"w-4","h-4","mr-2"],["name","copy"],[1,"block-else"],[1,"note"],["class","block-else text-center",4,"ngIf"],[1,"block-else","text-center"],[1,"text-right","mt-3"],["azt-track-service","azt-offline-share-hrBGx7oL2r",1,"btn","w-24","btn-secondary",3,"click"]],template:function(d,v){if(1&d&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h2",4),n._uU(5),n.ALo(6,"mytranslate"),n.qZA()(),n.TgZ(7,"div",3),n.YNc(8,z,5,0,"div",5),n.YNc(9,x,6,6,"ng-template",null,6,n.W1O),n.qZA(),n.YNc(11,m,4,3,"div",7),n.qZA()()()),2&d){const T=n.MAs(10);n.xp6(5),n.Oqu(n.lcZ(6,4,"lang_auto_tra_ket_qua_thi_offline")),n.xp6(3),n.Q6J("ngIf",v.statusObj.loading)("ngIfElse",T),n.xp6(3),n.Q6J("ngIf",v.useDialog)}},dependencies:[c.mk,c.O5,C.i3,M.VQ,M.U0,t._Y,t.JJ,t.JL,t.sg,t.u,t.CE,A.KC,o.Nh5,N.M,E.B,j.V,O.n,w.JV,w.NK],styles:[".school-info_bg[_ngcontent-%COMP%]{z-index:1000;width:100%;display:flex;left:0;top:0;position:fixed;height:100%;min-height:100vh;background-color:#3c3c3c80}.block-note[_ngcontent-%COMP%]{padding:5px}.note[_ngcontent-%COMP%]{color:#acacac}.school-info[_ngcontent-%COMP%]{z-index:1001;top:50%;left:50%;transform:translate(-50%,-50%);position:fixed;width:500px;min-height:180px;background:#fff;margin-left:auto;margin-right:auto;box-shadow:0 0 13px 3px #00000094}.btn-close[_ngcontent-%COMP%]{transition:all .5s}.btn-close[_ngcontent-%COMP%]:hover{background:#dfe6e9}mat-radio-group[_ngcontent-%COMP%]{margin:10px 5px;width:90%;display:flex;justify-content:space-between}.block-title[_ngcontent-%COMP%]{text-align:center;font-size:18px;font-weight:500}.block-main-classroom[_ngcontent-%COMP%]{padding:10px;border:1px solid #908e8e;border-radius:5px;height:200px;overflow:hidden}.classroom-header[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:15px}.btn-copy[_ngcontent-%COMP%]{border-radius:5px;transition:all .5s;text-transform:inherit}.btn-copy[_ngcontent-%COMP%]:hover:not([disabled]){background:rgba(211,211,211,.58)}@media only screen and (max-width: 1024px){.school-info[_ngcontent-%COMP%]{width:95%;max-width:800px}}@media only screen and (max-width: 768px){.school-info[_ngcontent-%COMP%]{width:95%;max-width:700px}}@media only screen and (max-width: 576px){.school-info[_ngcontent-%COMP%]{width:95%;max-width:400px}.classroom-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}}@media only screen and (max-width: 380px){.school-info[_ngcontent-%COMP%]{width:95%;max-width:300px}}@media only screen and (max-width: 290px){.school-info[_ngcontent-%COMP%]{width:95%;max-width:250px}}"]}),g})()},62836:(B,D,a)=>{a.d(D,{H:()=>T});var t=a(65879),r=a(19347),L=a(72164),I=a(89745),e=a(89156),n=a(10504),_=a(97151),p=a(92296),c=a(94690),C=a(56260),M=a(3849),A=a(49870),o=a(17997),N=a(96814),E=a(70342),j=a(77988),O=a(92596),w=a(37722),z=a(80034),Q=a(34340),W=a(78497),y=a(52467),U=a(71646),f=a(36727);function S(i,b){if(1&i&&(t.TgZ(0,"a",31),t.ALo(1,"mytranslate"),t.TgZ(2,"span",21),t._UZ(3,"lucide-icon",32),t.qZA()()),2&i){t.oxw(2);const s=t.MAs(3);t.s9C("matTooltip",t.lcZ(1,2,"lang_auto_tai_ve")),t.Q6J("matMenuTriggerFor",s)}}function l(i,b){if(1&i){const s=t.EpF();t.TgZ(0,"a",33),t.NdJ("click",function(){t.CHM(s);const P=t.oxw(2);return t.KtG(P.showCopySuccess())}),t.ALo(1,"mytranslate"),t.TgZ(2,"span",5),t._UZ(3,"lucide-icon",34),t.qZA(),t.TgZ(4,"span"),t._uU(5),t.ALo(6,"mytranslate"),t.qZA()()}if(2&i){const s=t.oxw(2);t.s9C("matTooltip",t.lcZ(1,3,"lang_auto_copy_link_de_thi")),t.Q6J("cdkCopyToClipboard",s.copyLinkExam()),t.xp6(5),t.Oqu(t.lcZ(6,5,"lang_auto_copy_link"))}}function x(i,b){1&i&&(t.TgZ(0,"div",35)(1,"span",36),t._UZ(2,"azt-loading-ui"),t.qZA(),t.TgZ(3,"span",37),t._uU(4),t.ALo(5,"mytranslate"),t.qZA()()),2&i&&(t.xp6(4),t.Oqu(t.lcZ(5,1,"lang_auto_dang_chuan_bi_tai_lieu_doing")))}function m(i,b){if(1&i&&(t.TgZ(0,"div",38),t._UZ(1,"div",39),t.ALo(2,"safeAdminHtmlContent"),t.qZA()),2&i){const s=t.oxw(2);t.xp6(1),t.Q6J("innerHtml",t.lcZ(2,1,s.data.headerContent),t.oJD)}}function u(i,b){if(1&i&&t._UZ(0,"azt-loaded-img",40),2&i){const s=t.oxw(2);t.Q6J("imgSrc",s.data.obj.examHeader)}}function g(i,b){if(1&i&&t._UZ(0,"azt-question-standalone-for-preview",42),2&i){const s=t.oxw(),h=s.$implicit,P=s.index,k=t.oxw(2);t.Q6J("examObj",k.examObj)("questionObj",h)("follower",k.followerRenderQuest)("curQuestionIndex",P)("isShowExplain",k.showExplanation)}}function Z(i,b){if(1&i&&(t.ynx(0),t.YNc(1,g,1,5,"azt-question-standalone-for-preview",41),t.BQk()),2&i){const s=t.oxw(2);t.xp6(1),t.Q6J("ngIf",s.examObj)}}function d(i,b){if(1&i){const s=t.EpF();t.ynx(0),t.TgZ(1,"div",11)(2,"div",12)(3,"div",13)(4,"div",14)(5,"div",15),t.YNc(6,S,4,4,"a",16),t.YNc(7,l,7,7,"a",17),t.TgZ(8,"button",18),t.NdJ("click",function(){t.CHM(s);const P=t.oxw();return t.KtG(P.showAllExplanation())}),t._uU(9),t.ALo(10,"mytranslate"),t.ALo(11,"mytranslate"),t.qZA()()(),t.TgZ(12,"div",19)(13,"a",20)(14,"span",21),t._UZ(15,"lucide-icon",22),t.qZA()()()(),t.TgZ(16,"azt-mat-dialog-content",23),t.YNc(17,x,6,3,"div",24),t.TgZ(18,"div",25),t._UZ(19,"div",26),t.YNc(20,m,3,3,"div",27),t.YNc(21,u,1,1,"azt-loaded-img",28),t.YNc(22,Z,2,1,"ng-container",29),t._UZ(23,"div",30),t.qZA()()()(),t.BQk()}if(2&i){const s=t.oxw();t.xp6(6),t.Q6J("ngIf",!(null!=s.data&&s.data.globalLadingPage||s.data.allowHeader)),t.xp6(1),t.Q6J("ngIf",0==(null==s.data?null:s.data.isOnLib)&&!(null!=s.data&&s.data.globalLadingPage)),t.xp6(2),t.Oqu(s.showExplanation?t.lcZ(10,8,"lang_auto_an_giai_thich"):t.lcZ(11,10,"lang_auto_xem_giai_thich")),t.xp6(7),t.Q6J("defaultHeight",70),t.xp6(1),t.Q6J("ngIf",s.statusObj.loading),t.xp6(3),t.Q6J("ngIf",s.data.allowHeader&&!s.statusObj.loading),t.xp6(1),t.Q6J("ngIf",null==s.data||null==s.data.obj?null:s.data.obj.examHeader),t.xp6(1),t.Q6J("ngForOf",s.questionList)}}function v(i,b){if(1&i){const s=t.EpF();t.TgZ(0,"azt-export-excel-for-answersheet",43),t.NdJ("exportDataDone",function(P){t.CHM(s);const k=t.oxw();return t.KtG(k.exportDataDone(P))}),t.qZA()}if(2&i){const s=t.oxw();let h;t.Q6J("startQuestionIndex",null!==(h=null==s.examObj?null:s.examObj.startQuestionIndex)&&void 0!==h?h:1)("obj",s.exportExcelData)}}let T=(()=>{class i extends L.e{btnCloseDialog(){this.closeDialog.emit()}copyLinkExam(){return`${this.commonService.getCurrentDomain()}/de-thi/${this.data?.obj?.hashId}`}showCopySuccess(){this.commonService.snackSuccess("lang_auto_sao_chep_thanh_cong")}downloadExam(s){let h=this.commonService.myTranslateInstant("lang_auto_dang_khoi_tao_du_lieu")??"";e.G.openLoadingEffect(`${h}...`);let P={nameSchool:this.printAddInfo.nameSchool??"",nameSubject:this.printAddInfo.nameSubject??""},k=this.printAddInfo.templateType??0;this.data.obj&&(this.data.obj.hideGroupQuestion=0,this.exportSAztDocxService.downloadExam(s,{...this.data.obj,editable:!1,allowStudentView:!0},void 0,void 0,this.cloneQuestionList,P,k,void 0,void 0,void 0,!0).catch(R=>{this.showErrorSnack(R.message)}))}getData(s){this.initStatusObj(),this.data?.globalLadingPage?this.examService.apiExamGetGlobalQuestionsIdGet(s?.id??0).subscribe(h=>{const P=this.commonService.castJsonToClassObjs(I.v,JSON.stringify(h.data?.questionObjs||[]))??[];this.followerRenderQuest.setNumQuest(P.length),this.addRoleQuestion(P),this.cloneQuestionList=this.commonService.myClone(P),this.questionList=P,this.examObj=h.data?.examObj,this.successStatusObj()}):this.permissionService.hasViewPermission("exam",s)?this.examService.apiExamGetQuestionsIdGet(s?.id??0).subscribe(h=>{const P=this.commonService.castJsonToClassObjs(I.v,JSON.stringify(h.data?.questionObjs||[]))??[];this.followerRenderQuest.setNumQuest(P.length),this.addRoleQuestion(P),this.cloneQuestionList=this.commonService.myClone(P),this.questionList=P,this.examObj=h.data?.examObj,this.successStatusObj()}):this.showErrorSnack("lang_auto_ban_khong_co_quyen_thuc_thi_chuc_nang_nay")}addRoleQuestion(s){for(let h=0;h<s.length;h++)s[h].isRoleTeacher=!0}downloadExamAnswer(){this.waitDestroy(this.offlineExamExportService.apiOfflineExamExportExportResultOfRawExamGet(this.examObj?.hashId??"").subscribe(s=>{if(s.success){let h=s.data?.obj;h?.offlineMixQuestionObjs&&h.offlineMixQuestionObjs.length>0&&(this.exportExcelData=this.commonService.myClone(h))}else this.errorStatusObj(s.message??"")}))}exportDataDone(s){let h=this.createNameExam("answerexcel",!1);this.shareFileFlutterService.shareFileWithBlob(s,h)}createNameExam(s,h){let P="";P="answersheet"==s?this.printAnswersheetService.exportFileNameOfAnswerSheet(0,this.examObj?.name??"",""):"answerexcel"==s?this.printAnswersheetService.exportFileNameOfAnswerExcelOffline(0,this.examObj?.name??"",""):this.printAnswersheetService.exportFileNameOfExamOffline(0,this.examObj?.name??"","",void 0),h&&(P=this.commonService.replaceAll(P,"_","-")??"");let k=".docx";return k="answersheet"==s?".pdf":k,k="answerexcel"==s?".xlsx":k,P+k}showAllExplanation(){this.showExplanation=!this.showExplanation}ngOnChanges(){this.data?.obj&&this.getData(this.data.obj)}ngOnInit(){this.data?.obj&&this.getData(this.data.obj),super.ngOnInit()}constructor(s,h,P,k,R,Y,K,J,F){super(F,J),this.shareFileFlutterService=s,this.baseApiService=h,this.permissionService=P,this.exportSAztDocxService=k,this.examService=R,this.offlineExamExportService=Y,this.printAnswersheetService=K,this.dialogRef=J,this.data=F,this.closeDialog=new t.vpe,this.questionList=[],this.cloneQuestionList=[],this.followerRenderQuest=new n.p,this.printAddInfo={},this.showExplanation=!1}}return i.\u0275fac=function(s){return new(s||i)(t.Y36(_.g),t.Y36(p.V),t.Y36(c.j),t.Y36(C.F),t.Y36(M.O),t.Y36(A.qr),t.Y36(o.H),t.Y36(r.so,8),t.Y36(r.WI,8))},i.\u0275cmp=t.Xpm({type:i,selectors:[["azt-preview-exam"]],outputs:{closeDialog:"closeDialog"},features:[t.qOj,t.TTD],decls:25,vars:14,consts:[[4,"ngIf"],["menuDownload","matMenu"],[1,"dropdown-menu","show","relative","w-72"],[1,"dropdown-content"],["azt-track-service","azt-preview-exam-4UtiW7OU6PC",1,"dropdown-item",3,"click"],[1,"w-4","h-4","mr-2","flex-none"],["name","file-check"],["azt-track-service","azt-preview-exam--mJB2JKFgNu",1,"dropdown-item",3,"click"],["name","file-spreadsheet"],["name","file-text"],[3,"startQuestionIndex","obj","exportDataDone",4,"ngIf"],[1,"az-dialog-info"],[1,"box",2,"overflow-x","hidden"],[1,"flex","items-center","p-2","bg-slate-100","dark:bg-darkmode-400"],[1,"mr-auto"],[1,"flex","items-center","mr-2"],["class","btn btn-sm btn-outline-secondary btn-transparent mr-2",3,"matTooltip","matMenuTriggerFor",4,"ngIf"],["azt-track-service","azt-preview-exam-dgdyLZO48Hq","class","btn btn-sm btn-outline-secondary btn-transparent mr-2",3,"matTooltip","cdkCopyToClipboard","click",4,"ngIf"],[1,"btn","btn-sm","btn-outline-secondary","btn-transparent","mr-2",3,"click"],[1,"ml-auto"],["azt-track-service","azt-preview-exam-y2xqBN7DlGX",1,"btn","btn-transparent","btn-outline-danger","btn-sm",3,"mat-dialog-close"],[1,"w-4","h-4","flex-none"],["name","x"],[1,"mt-3",3,"defaultHeight"],["class","flex justify-center items-center h-40",4,"ngIf"],["id","boxContentQuestion",1,"p-2"],[1,"pt-3"],["class","box p-3 mb-3",4,"ngIf"],["style","display: block","class","mt-5",3,"imgSrc",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"py-5"],[1,"btn","btn-sm","btn-outline-secondary","btn-transparent","mr-2",3,"matTooltip","matMenuTriggerFor"],["name","download"],["azt-track-service","azt-preview-exam-dgdyLZO48Hq",1,"btn","btn-sm","btn-outline-secondary","btn-transparent","mr-2",3,"matTooltip","cdkCopyToClipboard","click"],["name","copy"],[1,"flex","justify-center","items-center","h-40"],[1,"w-4","h-4","inline-block"],[1,"sr-only","ml-2"],[1,"box","p-3","mb-3"],[2,"line-height","1.5",3,"innerHtml"],[1,"mt-5",2,"display","block",3,"imgSrc"],[3,"examObj","questionObj","follower","curQuestionIndex","isShowExplain",4,"ngIf"],[3,"examObj","questionObj","follower","curQuestionIndex","isShowExplain"],[3,"startQuestionIndex","obj","exportDataDone"]],template:function(s,h){1&s&&(t.YNc(0,d,24,12,"ng-container",0),t.ALo(1,"viewPermission"),t.TgZ(2,"mat-menu",null,1)(4,"div",2)(5,"ul",3)(6,"li")(7,"a",4),t.NdJ("click",function(){return h.downloadExam(!1)}),t.TgZ(8,"span",5),t._UZ(9,"lucide-icon",6),t.qZA(),t._uU(10),t.ALo(11,"mytranslate"),t.qZA()(),t.TgZ(12,"li")(13,"a",7),t.NdJ("click",function(){return h.downloadExamAnswer()}),t.TgZ(14,"span",5),t._UZ(15,"lucide-icon",8),t.qZA(),t._uU(16),t.ALo(17,"mytranslate"),t.qZA()(),t.TgZ(18,"li")(19,"a",7),t.NdJ("click",function(){return h.downloadExam(!0)}),t.TgZ(20,"span",5),t._UZ(21,"lucide-icon",9),t.qZA(),t._uU(22),t.ALo(23,"mytranslate"),t.qZA()()()()(),t.YNc(24,v,1,2,"azt-export-excel-for-answersheet",10)),2&s&&(t.Q6J("ngIf",t.xi3(1,5,null==h.data?null:h.data.obj,"exam")||(null==h.data?null:h.data.globalLadingPage)),t.xp6(10),t.hij(" ",t.lcZ(11,8,"lang_auto_tai_xuong_de_thi")," "),t.xp6(6),t.hij(" ",t.lcZ(17,10,"lang_auto_tai_xuong_dap_an_de_thi")," "),t.xp6(6),t.hij(" ",t.lcZ(23,12,"lang_azt_download_exam_paper_with_detailed_answers")," "),t.xp6(2),t.Q6J("ngIf",null!=h.exportExcelData))},dependencies:[N.sg,N.O5,E.i3,r.ZT,j.VK,j.p6,O.gM,w.Nh5,z.y,Q.A,W.R,y.S,U.n,f.JV,f.Tm,f.J7],encapsulation:2}),i})()}}]);