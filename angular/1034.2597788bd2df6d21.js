"use strict";(self.webpackChunkBalacoClient=self.webpackChunkBalacoClient||[]).push([[1034],{51034:(I,b,s)=>{s.r(b),s.d(b,{LadingPageModule:()=>Ne});var d=s(54460),m=s(10936),y=s(89163),g=s(65162),h=s(81275),_=s(69223),p=s(15437),v=s(15343),O=s(13763),A=s(25571),P=s(5502),R=s(70050),z=s(7050),L=s(91100),M=s(43234),B=s(21656),$=s(1133),j=s(76627),f=s(59640),w=s(37497),e=s(48891),x=s(9280),F=s(15485),N=s(52509),D=s(36484),Y=s(18718),X=s(22613),V=s(86972),U=s(92274),W=s(45306),J=s(43362),Q=s(51221),H=s(86925),K=s(37581),Z=s(92654),q=s(46899),ee=s(30977),te=s(50589),ae=s(31291),ne=s(23356),oe=s(47712),ie=s(69135),se=s(94743),C=s(76975);const E=t=>({active:t}),re=t=>[t],le=t=>({clickable:t}),ce=t=>({"truncate-bread":t}),me=(t,r)=>({"overflow-x-auto":t,"overflow-x-visible":r}),G=t=>({"min-width":t}),ge=(t,r)=>({"col-span-4":t,"col-span-12":r}),de=(t,r)=>({"ml-5":t,"ml-3":r}),k=t=>({"text-primary stroke-width-2.5":t}),ue=()=>({"-mt-2":!0}),pe=(t,r)=>({"w-60":t,"w-52":r});function be(t,r){if(1&t&&(e.j41(0,"li",15)(1,"a",16),e.nI1(2,"navigationLocalize"),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()()),2&t){const a=e.XpG();e.Y8G("ngClass",e.eq3(7,E,2885==a.currentCategoryId||0==a.currentCategoryId)),e.R7$(),e.Y8G("routerLink",e.eq3(9,re,e.bMT(2,3,"/ladingpage/document-management/0/0/1"))),e.R7$(2),e.SpI(" ",e.bMT(4,5,"azt_lang_core_share_global_azota")," ")}}function he(t,r){if(1&t){const a=e.RV6();e.j41(0,"li",17)(1,"a",18),e.bIt("click",function(){const o=e.eBV(a).$implicit,i=e.XpG();return e.Njj(i.backToParentCategoryEvent(o))}),e.j41(2,"span",19,1),e.nI1(4,"mytranslate"),e.j41(5,"span"),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()()()()}if(2&t){const a=r.$implicit,n=e.sdS(3),o=e.XpG();e.Y8G("ngClass",e.eq3(11,E,a.id==o.currentCategoryId)),e.R7$(),e.Y8G("ngClass",e.eq3(13,le,a.id!=o.currentCategoryId)),e.R7$(),e.FS9("matTooltip",e.bMT(4,7,a.name)),e.Y8G("ngClass",e.eq3(15,ce,a.id!=o.currentCategoryId))("isDisabledTooltip",!1)("matTooltipDisabled",n.isDisabled),e.R7$(4),e.JRh(e.bMT(7,9,a.name))}}function _e(t,r){1&t&&(e.j41(0,"div",20)(1,"div",21),e.nrm(2,"azt-svg-icon",22),e.j41(3,"p",23),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()()()),2&t&&(e.R7$(2),e.Y8G("size",84),e.R7$(2),e.SpI("",e.bMT(5,2,"lang_not_found_search"),"!"))}function ye(t,r){if(1&t&&(e.qex(0),e.eu8(1,24),e.bVm()),2&t){e.XpG();const a=e.sdS(14);e.R7$(),e.Y8G("ngTemplateOutlet",a)}}function ve(t,r){1&t&&e.nrm(0,"div",39)}function fe(t,r){1&t&&(e.qex(0),e.nrm(1,"azt-svg-icon",52),e.bVm()),2&t&&(e.R7$(),e.Y8G("size",24))}function xe(t,r){1&t&&(e.j41(0,"span"),e.nrm(1,"azt-svg-icon",53),e.k0s()),2&t&&(e.R7$(),e.Y8G("size",24))}function Ce(t,r){1&t&&e.nrm(0,"azt-svg-icon",54),2&t&&e.Y8G("size",24)}function Te(t,r){if(1&t&&e.DNE(0,xe,2,1,"span",47)(1,Ce,1,1,"ng-template",null,3,e.C5r),2&t){const a=e.sdS(2),n=e.XpG().$implicit;e.Y8G("ngIf",n.shared)("ngIfElse",a)}}function Se(t,r){1&t&&(e.j41(0,"span",55),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_auto_de_chung_azota")," "))}function je(t,r){1&t&&(e.j41(0,"span",56),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t&&(e.R7$(),e.JRh(e.bMT(2,1,"lang_auto_chia_se")))}function De(t,r){if(1&t){const a=e.RV6();e.j41(0,"div",40)(1,"div",41)(2,"div",42)(3,"div",43)(4,"div",44)(5,"div",45),e.bIt("click",function(){const o=e.eBV(a).$implicit,i=e.XpG(2);return e.Njj(i.handleOpenFolder(o))}),e.j41(6,"div",46),e.DNE(7,fe,2,1,"ng-container",47)(8,Te,3,2,"ng-template",null,2,e.C5r),e.k0s(),e.j41(10,"div",48,1),e.nI1(12,"mytranslate"),e.j41(13,"span"),e.EFF(14),e.nI1(15,"mytranslate"),e.k0s()(),e.DNE(16,Se,3,3,"span",49)(17,je,3,3,"span",50),e.k0s()()(),e.nrm(18,"div",51),e.k0s()()()}if(2&t){const a=r.$implicit,n=e.sdS(9),o=e.sdS(11),i=e.XpG(2);e.FS9("id","folder_"+a.id),e.R7$(5),e.Y8G("ngClass",e.l_i(17,pe,-1==a.id,-1!=a.id)),e.R7$(2),e.Y8G("ngIf",1==a.isGlobalAzota)("ngIfElse",n),e.R7$(3),e.FS9("matTooltip",e.bMT(12,13,a.name)),e.Y8G("isDisabledTooltip",!1)("matTooltipDisabled",o.isDisabled),e.R7$(3),e.HbH(i.isMobileWebView&&-1!=a.id?"azt-wv-item-name":""),e.R7$(),e.JRh(e.bMT(15,15,a.name)),e.R7$(2),e.Y8G("ngIf",-1!=a.id&&1==a.isGlobalAzota),e.R7$(),e.Y8G("ngIf",-1==a.id)}}function Ee(t,r){1&t&&(e.nrm(0,"lucide-icon",71),e.nI1(1,"mytranslate")),2&t&&e.FS9("matTooltip",e.bMT(1,1,"lang_testbank_folder_and_file_published"))}function Ge(t,r){1&t&&(e.nrm(0,"lucide-icon",72),e.nI1(1,"mytranslate")),2&t&&e.FS9("matTooltip",e.bMT(1,1,"lang_testbank_folder_and_file_published"))}function ke(t,r){if(1&t&&(e.j41(0,"span",73),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&t){const a=e.XpG(2).$implicit;e.R7$(),e.Lme(" ",e.bMT(2,2,"lang_testbank_folder_and_file_number_attended"),": ",a.exam.attended," ")}}function Ie(t,r){1&t&&(e.j41(0,"div",74),e.nrm(1,"azt-svg-icon",75),e.nI1(2,"mytranslate"),e.k0s()),2&t&&(e.R7$(),e.FS9("matTooltip",e.bMT(2,2,"lang_auto_da_chia_se")),e.Y8G("size",16))}function Oe(t,r){if(1&t){const a=e.RV6();e.j41(0,"div",58)(1,"div",59)(2,"div",60)(3,"div")(4,"div",61),e.bIt("click",function(){e.eBV(a);const o=e.XpG().$implicit,i=e.XpG(2);return e.Njj(i.doExamAction(o.exam,i.enumDocumentDoExamActionType.SHOW_EXAM_DETAIL))}),e.j41(5,"div",62),e.DNE(6,Ee,2,3,"lucide-icon",63)(7,Ge,2,3,"lucide-icon",64),e.k0s(),e.j41(8,"div",65,1)(10,"span",66),e.EFF(11),e.k0s(),e.DNE(12,ke,3,4,"span",67),e.k0s(),e.DNE(13,Ie,3,4,"div",68),e.k0s()(),e.j41(14,"div")(15,"a",69),e.bIt("click",function(){e.eBV(a);const o=e.XpG().$implicit,i=e.XpG(2);return e.Njj(i.doExamAction(o.exam,i.enumDocumentDoExamActionType.SHOW_EXAM_DETAIL))}),e.EFF(16),e.nI1(17,"mytranslate"),e.k0s(),e.j41(18,"a",70),e.nI1(19,"mytranslate"),e.bIt("click",function(){e.eBV(a);const o=e.XpG().$implicit,i=e.XpG(2);return e.Njj(i.downLoadExam(o.exam))}),e.EFF(20),e.nI1(21,"mytranslate"),e.k0s()()()()()}if(2&t){const a=e.sdS(9),n=e.XpG().$implicit,o=e.XpG(2);e.R7$(3),e.ZvI("w-full flex items-center ",o.isMobileWebView?"":"mobile-80vw",""),e.R7$(3),e.Y8G("ngIf",1==n.exam.isPublished),e.R7$(),e.Y8G("ngIf",1!=n.exam.isPublished),e.R7$(),e.ZvI("ml-3 ",o.isMobileDevice?"truncate":"mr-5",""),e.FS9("matTooltip",n.exam.name),e.Y8G("isDisabledTooltip",!1)("matTooltipDisabled",a.isDisabled),e.R7$(2),e.ZvI("mb-0 d-block ",o.isMobileWebView?"azt-wv-item-name":"",""),e.R7$(),e.SpI("",n.exam.name," "),e.R7$(),e.Y8G("ngIf",o.isMobileWebView),e.R7$(),e.Y8G("ngIf",n.shared),e.R7$(),e.ZvI("flex items-center py-1 ",o.isMobileDevice?"mt-2":"",""),e.R7$(2),e.SpI(" ",e.bMT(17,23,"lang_auto_xem_noi_dung_de")," "),e.R7$(2),e.FS9("matTooltip",e.bMT(19,25,"lang_global_azota_download")),e.R7$(2),e.SpI(" ",e.bMT(21,27,"lang_global_azota_download")," ")}}function Ae(t,r){if(1&t&&(e.qex(0),e.DNE(1,Oe,22,29,"div",57),e.bVm()),2&t){const a=r.$implicit;e.R7$(),e.Y8G("ngIf",a.exam)}}function Pe(t,r){if(1&t){const a=e.RV6();e.j41(0,"form",25)(1,"div",26)(2,"div",27)(3,"div",28)(4,"div",29)(5,"div",30),e.bIt("click",function(){e.eBV(a);const o=e.XpG();return e.Njj(o.sortDocumentByColumn(o.enumDocumentSortType.BY_NAME,null==o.currentDocumentSortTypeObj?null:o.currentDocumentSortTypeObj.isAscSort))}),e.EFF(6),e.nI1(7,"mytranslate"),e.j41(8,"div",31),e.nrm(9,"lucide-icon",32)(10,"lucide-icon",33),e.k0s()()(),e.DNE(11,ve,1,0,"div",34),e.k0s()(),e.j41(12,"div",35),e.DNE(13,De,19,20,"div",36)(14,Ae,2,1,"ng-container",37),e.k0s(),e.nrm(15,"div",38),e.k0s()()}if(2&t){const a=e.XpG();e.Y8G("formGroup",a.form),e.R7$(),e.Y8G("ngClass",e.l_i(15,me,!a.isMobileDevice,a.isMobileDevice)),e.R7$(),e.Y8G("ngStyle",e.eq3(18,G,a.isMobileWebView?"":"1100px")),e.R7$(2),e.Y8G("ngClass",e.l_i(20,ge,!a.isMobileWebView,a.isMobileWebView)),e.R7$(),e.Y8G("ngClass",e.l_i(23,de,!a.isMobileWebView,a.isMobileWebView)),e.R7$(),e.SpI(" ",e.bMT(7,13,"lang_testbank_folder_and_file_name")," "),e.R7$(3),e.Y8G("ngClass",e.eq3(26,k,1==(null==a.currentDocumentSortTypeObj?null:a.currentDocumentSortTypeObj.isAscSort)&&(null==a.currentDocumentSortTypeObj?null:a.currentDocumentSortTypeObj.isColumnSortType)==a.enumDocumentSortType.BY_NAME)),e.R7$(),e.Y8G("ngClass",e.lJ4(28,ue))("ngClass",e.eq3(29,k,0==(null==a.currentDocumentSortTypeObj?null:a.currentDocumentSortTypeObj.isAscSort)&&(null==a.currentDocumentSortTypeObj?null:a.currentDocumentSortTypeObj.isColumnSortType)==a.enumDocumentSortType.BY_NAME)),e.R7$(),e.Y8G("ngIf",!a.isMobileWebView),e.R7$(),e.Y8G("ngStyle",e.eq3(31,G,a.isMobileWebView?"":"1100px")),e.R7$(),e.Y8G("ngForOf",a.categoryObjs),e.R7$(),e.Y8G("ngForOf",a.documentObjs)}}let Re=(()=>{var t;class r extends f.H{sendReloadData(){this.clipboardService.resetClipBoardAfterPasteOrCancelAllActions(),this.loadApiData.emit(!0)}handleOpenFolder(n){this.goToChildCategoryPage.emit(n)}goBackToAllCategoryPageEvent(){this.goBackToAllCategoryPage.emit()}backToParentCategoryEvent(n){this.backToParentCategory.emit(n)}doExamAction(n,o){this.documentDoExamActionService.doExamAction({categoryId:this.currentCategoryId,examObj:n,globalLadingPage:!0},o).subscribe(l=>{l&&l.reloadData&&this.sendReloadData()})}downLoadExam(n){if(this.userService.isLoginAndNotAnonymous()){let o=[];o.push({id:n.id,type:H.Y.EXAM,action:Q.$.COPY,documentType:"exam"}),this.waitDestroy(this.examCategoryService.apiExamCategoryCopyOrCutOrDeletePost(0,{copyOrCutObjs:o}).subscribe(i=>{if(i&&1==i.success)this.showSuccessSnack("lang_global_azota_download_success"),this.sendReloadData();else if(i.message&&"azota_lang_core_exceed_max_global_copy"==i.message){let l=this.sAztConfigService.getConfig("maxCopyGlobalExam")??20,c=this.commonService.translateToKeyParam(i.message??"",l.toString(),l.toString());this.showErrorSnack(c??"")}else this.showErrorSnack(i.message??"")}))}else this.sAztDialogService.open(K.x,{width:"600px",data:{keyTrans:this.isBusinessDomain?"lang_global_azota_must_login_business":"lang_global_azota_must_login",isShow:!0},restoreFocus:!1})}sortDocumentByColumn(n,o){let l=this.documentSortActionService.sortExamByColumn({rootCategoryObjs:this.rootCategoryObjs,rootDocumentObjs:this.rootDocumentObjs,currentCategoryObjs:this.categoryObjs??[],currentDocumentObjs:this.documentObjs??[]},n,o=null==o||!o);this.categoryObjs=l.categoryObjs,this.documentObjs=l.documentObjs,this.currentDocumentSortTypeObj={isAscSort:o,isColumnSortType:n},this.browserStorageService.saveSimpleSessionStorage("documentSort",JSON.stringify(this.currentDocumentSortTypeObj))}ngOnInit(){this.waitDestroy((0,j.z)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.currentCategoryId=Number(this.commonService.getMyParam(this.activeRoute,"cat_id"))}));let n=this.commonService.myParseJson(this.browserStorageService.getSimpleSessionStorage("documentSort")??"");n&&this.sortDocumentByColumn(n.isColumnSortType,!n.isAscSort)}ngOnDestroy(){super.ngOnDestroy()}constructor(n,o,i,l,c,u,T,S,Ye){super(),this.documentDoExamActionService=n,this.activeRoute=o,this.sAztDialogService=i,this.clipboardService=l,this.browserStorageService=c,this.documentSortActionService=u,this.userService=T,this.sAztConfigService=S,this.examCategoryService=Ye,this.rootCategoryObjs=[],this.rootDocumentObjs=[],this.isShowSearchResult=!1,this.currentPage=0,this.listBreadcrumb=[],this.goBackToAllCategoryPage=new e.bkB,this.backToParentCategory=new e.bkB,this.goToChildCategoryPage=new e.bkB,this.loadApiData=new e.bkB,this.currentDocumentSortTypeObj=void 0,this.enumDocumentSortType=J.N,this.enumDocumentRedirectType=W.d,this.enumDocumentDoExamActionType=U.$,this.currentCategoryId=0,this.totalCheckboxSelected=0,this.shareType="",this.form=new m.gE({clipboardObjs:new m.Yp([]),isSelectAll:new m.MJ(!1,{nonNullable:!0,validators:[m.k0.required]})})}}return(t=r).\u0275fac=function(n){return new(n||t)(e.rXU(Z.x),e.rXU(g.nX),e.rXU(q.i),e.rXU(ee.g),e.rXU(te.z),e.rXU(ae.n),e.rXU(D.R),e.rXU(ne.u),e.rXU(x.Ns))},t.\u0275cmp=e.VBU({type:t,selectors:[["global-exam-and-category-list"]],inputs:{rootCategoryObjs:"rootCategoryObjs",rootDocumentObjs:"rootDocumentObjs",categoryObjs:"categoryObjs",currentCategory:"currentCategory",documentObjs:"documentObjs",isShowSearchResult:"isShowSearchResult",backToData:"backToData",currentPage:"currentPage",listBreadcrumb:"listBreadcrumb"},outputs:{goBackToAllCategoryPage:"goBackToAllCategoryPage",backToParentCategory:"backToParentCategory",goToChildCategoryPage:"goToChildCategoryPage",loadApiData:"loadApiData"},features:[e.Vt3],decls:15,vars:7,consts:[["DefaultDocumentTableTpl",""],["c","isDisabled"],["normalCate",""],["noShare",""],[1,"azt-file-manager"],[1,"mt-3","mb-3","h-auto","sm:h-10","flex","flex-col","sm:flex-row","items-center"],[1,"mr-auto"],[1,"breadcrumb"],[1,"breadcrumb-item"],["azt-track-service","global-exam-category-list-mLrqTdVRx",3,"click"],["class","breadcrumb-item",3,"ngClass",4,"ngIf"],["class","breadcrumb-item active",3,"ngClass",4,"ngFor","ngForOf"],[1,"table-zone"],["class","box p-5 flex items-center","style","height: 300px;",4,"ngIf"],[4,"ngIf"],[1,"breadcrumb-item",3,"ngClass"],["azt-track-service","global-exam-category-list-NdujkQJ24",3,"routerLink"],[1,"breadcrumb-item","active",3,"ngClass"],["azt-track-service","global-exam-category-list-_rMqLAn4k6",3,"click","ngClass"],[3,"ngClass","matTooltip","isDisabledTooltip","matTooltipDisabled"],[1,"box","p-5","flex","items-center",2,"height","300px"],[1,"text-center","mx-auto"],["type","folder-empty",3,"size"],[1,"font-medium","mt-2"],[3,"ngTemplateOutlet"],[3,"formGroup"],[1,"inbox","box",2,"scroll-snap-type","x mandatory",3,"ngClass"],[1,"p-5","text-slate-500","border-b","border-slate-200/60",3,"ngStyle"],[1,"grid","grid-cols-12","gap-3","items-center","-mx-5","px-5"],[1,"flex","items-center",3,"ngClass"],["azt-track-service","global-exam-category-list-5-CYQgv-EU",1,"inbox__item--sender","flex","items-center","cursor-pointer",3,"click","ngClass"],[1,"flex","items-center","flex-col","ml-2"],["name","chevron-up","size","16",3,"ngClass"],["name","chevron-down","size","16",3,"ngClass"],["class","col-span-8",4,"ngIf"],[1,"azt-table-body",2,"min-height","50vh",3,"ngStyle"],["class","folder-item",3,"id",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"p-5","flex","flex-col","sm:flex-row","items-center","text-center","sm:text-left","text-slate-500"],[1,"col-span-8"],[1,"folder-item",3,"id"],[1,"inbox__item","inline-block","sm:block","hover:shadow-md","text-slate-600","dark:text-slate-500","border-b","border-slate-200/60","dark:border-darkmode-400",2,"cursor","default"],[1,"block","sm:grid","grid-cols-12","gap-3","items-center","px-5","box-exam"],[1,"flex","col-span-12","md:col-span-4",2,"width","80vw","justify-content","space-between"],[1,"flex-none","flex","items-center","w-full"],["azt-track-service","global-exam-category-list-VueJbv5yf5",1,"title-exam","flex","items-center","clickable","sm:w-full",3,"click","ngClass"],[1,"image-fit"],[4,"ngIf","ngIfElse"],[1,"truncate","ml-3",3,"matTooltip","isDisabledTooltip","matTooltipDisabled"],["class","whitespace-nowrap ml-2 py-0.5 px-2 rounded-full text-xs bg-info text-white font-medium",4,"ngIf"],["class","whitespace-nowrap ml-2 py-0.5 px-2 rounded-full text-xs bg-primary text-white font-medium",4,"ngIf"],[1,"col-span-8","py-1"],["type","folder-azota",3,"size"],["type","folder-share",3,"size"],["type","folder",3,"size"],[1,"whitespace-nowrap","ml-2","py-0.5","px-2","rounded-full","text-xs","bg-info","text-white","font-medium"],[1,"whitespace-nowrap","ml-2","py-0.5","px-2","rounded-full","text-xs","bg-primary","text-white","font-medium"],["class","exam-item",4,"ngIf"],[1,"exam-item"],[1,"inbox__item","sm:block","text-slate-600","hover:shadow-md","dark:text-slate-500","border-b","border-slate-200/60","dark:border-darkmode-400",2,"cursor","default"],[1,"px-5","md:flex","block","box-exam"],["azt-track-service","global-exam-category-list-8ugbR7o5-K",1,"title-exam","flex","items-center","clickable",3,"click"],[1,"text-pending","image-fit"],["name","file-check","size","24",3,"matTooltip",4,"ngIf"],["name","file","size","24",3,"matTooltip",4,"ngIf"],[3,"matTooltip","isDisabledTooltip","matTooltipDisabled"],[2,"width","100% !important"],["class","azt-wv-sub-info mx-auto",4,"ngIf"],["class","icon-share ml-2",4,"ngIf"],["azt-track-service","global-exam-category-list--JVXwK7So7",1,"btn","btn-sm","btn-outline-success","mr-2",2,"white-space","nowrap",3,"click"],["azt-track-service","global-exam-category-list-pEOorzBaKX",1,"btn","btn-sm","btn-outline-primary",2,"white-space","nowrap",3,"click","matTooltip"],["name","file-check","size","24",3,"matTooltip"],["name","file","size","24",3,"matTooltip"],[1,"azt-wv-sub-info","mx-auto"],[1,"icon-share","ml-2"],["type","book",2,"padding","3px",3,"size","matTooltip"]],template:function(n,o){if(1&n){const i=e.RV6();e.j41(0,"div",4)(1,"div",5)(2,"div",6)(3,"ol",7)(4,"li",8)(5,"a",9),e.bIt("click",function(){return e.eBV(i),e.Njj(o.goBackToAllCategoryPageEvent())}),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()(),e.DNE(8,be,5,11,"li",10)(9,he,8,17,"li",11),e.k0s()()(),e.j41(10,"div",12),e.DNE(11,_e,6,4,"div",13)(12,ye,2,1,"ng-container",14),e.k0s()(),e.DNE(13,Pe,16,33,"ng-template",null,0,e.C5r)}2&n&&(e.R7$(6),e.SpI(" ",e.bMT(7,5,"lang_auto_tat_ca")," "),e.R7$(2),e.Y8G("ngIf",o.userService.isLogin()),e.R7$(),e.Y8G("ngForOf",o.listBreadcrumb),e.R7$(2),e.Y8G("ngIf",0==(null==o.categoryObjs?null:o.categoryObjs.length)&&0==(null==o.documentObjs?null:o.documentObjs.length)),e.R7$(),e.Y8G("ngIf",0!=(null==o.categoryObjs?null:o.categoryObjs.length)||0!=(null==o.documentObjs?null:o.documentObjs.length)))},dependencies:[g.Wk,d.YU,d.Sq,d.bT,d.T3,d.B3,oe.oV,m.qT,m.cb,m.j4,ie.f,se.m,v.WGl,C.F2,C.wp],styles:[".title-exam[_ngcontent-%COMP%]{padding-top:14px;padding-bottom:14px}@media (max-width: 640px){.mobile-80vw[_ngcontent-%COMP%]{width:80vw!important}.title-exam[_ngcontent-%COMP%]{padding-top:0;padding-bottom:0;width:90%!important}.box-exam[_ngcontent-%COMP%]{padding-top:12px;padding-bottom:12px}}"]}),r})();const ze=()=>[];function Le(t,r){if(1&t&&e.nrm(0,"azt-loading-effect",5),2&t){const a=e.XpG();e.Y8G("currentStatusObj",a.statusObj)}}function Me(t,r){1&t&&(e.qex(0),e.j41(1,"div",9)(2,"span",10),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()(),e.bVm()),2&t&&(e.R7$(3),e.JRh(e.bMT(4,1,"lang_global_azota_not_support_student_role")))}function Be(t,r){if(1&t){const a=e.RV6();e.j41(0,"div",11)(1,"global-exam-and-category-list",12),e.bIt("goToChildCategoryPage",function(o){e.eBV(a);const i=e.XpG(2);return e.Njj(i.goToChildCategoryPage(o))})("goBackToAllCategoryPage",function(){e.eBV(a);const o=e.XpG(2);return e.Njj(o.goBackToAllCategoryPage())})("backToParentCategory",function(o){e.eBV(a);const i=e.XpG(2);return e.Njj(i.backToParentCategory(o))})("loadApiData",function(){e.eBV(a);const o=e.XpG(2);return e.Njj(o.reloadApi())}),e.k0s()(),e.j41(2,"div",13)(3,"div",14)(4,"azt-paging",15),e.bIt("goToPaginationPage",function(o){e.eBV(a);const i=e.XpG(2);return e.Njj(i.goToPage(o))}),e.k0s()(),e.j41(5,"div",16)(6,"p",17),e.EFF(7),e.nI1(8,"number"),e.nI1(9,"mytranslate"),e.k0s()(),e.j41(10,"div",18)(11,"p",17),e.EFF(12),e.nI1(13,"number"),e.nI1(14,"mytranslate"),e.k0s()()()}if(2&t){const a=e.XpG(2);e.R7$(),e.Y8G("rootCategoryObjs",a.cloneCategoryObjs)("rootDocumentObjs",a.cloneDocumentObjs)("categoryObjs",a.categoryObjs)("documentObjs",a.documentObjs)("backToData",a.backToData)("currentPage",a.pageObj.page)("currentCategory",a.currentCategory)("isShowSearchResult",a.isShowSearchResult)("listBreadcrumb",a.listBreadcrumb||e.lJ4(20,ze)),e.R7$(3),e.Y8G("pageObj",a.pageObj),e.R7$(3),e.JRh(e.bMT(8,12,a.totalExam)+" "+e.bMT(9,14,"lang_testbank_test_list_document")),e.R7$(5),e.JRh(e.bMT(13,16,a.totalExam)+" "+e.bMT(14,18,"lang_testbank_test_list_document"))}}function $e(t,r){if(1&t&&(e.j41(0,"div",6)(1,"div",7),e.DNE(2,Me,5,3,"ng-container",8)(3,Be,15,21,"ng-template",null,1,e.C5r),e.k0s()()),2&t){const a=e.sdS(4),n=e.XpG();e.R7$(2),e.Y8G("ngIf",n.userService.isLogin()&&!n.userService.isTeacherRole()&&!n.userService.isAnonymousRoleOfCurrentUser())("ngIfElse",a)}}const we=[{path:"",component:(()=>{var t;class r extends f.H{}return(t=r).\u0275fac=(()=>{let a;return function(o){return(a||(a=e.xGo(t)))(o||t)}})(),t.\u0275cmp=e.VBU({type:t,selectors:[["lading-master-page"]],features:[e.Vt3],decls:2,vars:0,consts:[["id","lading-page-layout"]],template:function(n,o){1&n&&(e.j41(0,"div",0),e.nrm(1,"router-outlet"),e.k0s())},dependencies:[g.n3],encapsulation:2}),r})(),children:[{path:"document-management/0/:cat_id/:page",component:(()=>{var t;class r extends f.H{goToPage(n){this.backToData?this.commonService.myNavigationWithQueryString("/ladingpage/document-management/0/"+this.currentCategoryId+"/"+n,"?data="+this.commonService.serializeJson(this.backToData)):this.commonService.myNavigation("/ladingpage/document-management/0/"+this.currentCategoryId+"/"+n)}resetSearchForm(){this.form.patchValue({searchContent:""}),this.isShowSearchResult=!1}convertExamObj(n){var o=[];return n.forEach(i=>{i.exam&&o.push({name:i.exam.name,updatedAt:i.exam.updatedAt,createdAt:i.exam.createdAt,attended:i.exam.attended,isPublished:i.exam.isPublished,exam:i.exam,shared:i.shared,type:"exam",paths:i.paths,isGlobalAzota:0})}),o}goBackToAllCategoryPage(){var n=this.getFormValue();let o=this.userService.isLogin()&&this.userService.isTeacherRole()?"/admin/testbank":"/ladingpage";n.searchContent?(this.resetSearchForm(),0==this.currentCategoryId?this.getData():this.commonService.myNavigation(o+"/document-management/0/0/1")):this.commonService.myNavigation(o+"/document-management/0/0/1")}backToParentCategory(n){n.id!=this.currentCategoryId&&(this.resetSearchForm(),this.commonService.myNavigationWithQueryString("/ladingpage/document-management/0/"+n.id+"/1",n.shareType?"?data="+this.commonService.serializeJson({shareType:n.shareType,backTo:`/ladingpage/document-management/0/${this.currentCategoryId}/1`,suggest:n.isGlobalAzota>1?1:0,isAztLib:0!=n.isGlobalAzota?1:0}):""))}goToChildCategoryPage(n){this.resetSearchForm(),this.commonService.myNavigationWithQueryString("/ladingpage/document-management/0/"+n.id+"/1",n.shareType?"?data="+this.commonService.serializeJson({shareType:n.shareType,suggest:0!=n.isGlobalAzota?1:0,isAztLib:0!=n.isGlobalAzota?1:0}):"")}getFormValue(){return this.form.getRawValue()}getListParentCategoryObjs(){this.waitDestroy(this.examCategoryService.apiExamCategoryGetGlobalBreadcrumbsGet(this.currentCategoryId).subscribe(n=>{if(n&&1==n.success){var o=[];n.data?.objs&&n.data?.objs.forEach(i=>{o.push({...i,shared:!1,sharedGroups:[],sharedTeachers:[],paths:[]})}),this.listBreadcrumb=o;for(let i=0;i<this.listBreadcrumb?.length;i++)if(this.listBreadcrumb[i].id==this.currentCategoryId){let l="",c=0,u=0;0!=this.listBreadcrumb[i].isGlobalAzota&&(u=1),!this.listBreadcrumb[i].parentId&&this.listBreadcrumb[i].shareType?(l=0!=this.listBreadcrumb[i].isGlobalAzota?"":"user",c=i>1?this.listBreadcrumb[i-1].id??-1:0==i&&0!=this.listBreadcrumb[i].isGlobalAzota?0:this.listBreadcrumb[i].parentId??this.listBreadcrumb[i].tenantId??-1):this.listBreadcrumb[i].parentId&&this.listBreadcrumb[i].shareType?(l=i>1?this.listBreadcrumb[i-1].shareType??"":i<=1&&0!=this.listBreadcrumb[i].isGlobalAzota?this.listBreadcrumb[i].shareType??"":"",c=this.listBreadcrumb[i].parentId??-1):c=this.listBreadcrumb[i].parentId??0;let T=c?`/ladingpage/document-management/0/${c}/1`+(this.backToData?"?data="+this.commonService.serializeJson({shareType:l}):""):"/ladingpage/document-management/0/0/1";this.backToLink=this.commonService.serializeJson({shareType:l,backTo:T,suggest:u})}}else this.showErrorSnack(n.message??"")}))}getData(){var n=Number(this.commonService.getMyParam(this.activeRoute,"page"));let o=this.getFormValue();this.pageObj.setPageNumber(n),this.initStatusObj();let i={categoryId:0!=this.currentCategoryId?this.currentCategoryId:0,documentType:void 0,shareType:this.backToData?.shareType??"",fileType:"exam",classroomId:void 0,name:this.isShowSearchResult?o.searchContent:void 0,suggestExamPurpose:void 0,lite:void 0,getGlobal:1,page:this.pageObj.page,itemPerPage:void 0};this.waitDestroy(this.documentService.apiDocumentsGlobalGet(i.categoryId,i.suggestExamPurpose,i.page,i.itemPerPage).subscribe(l=>{if(l&&1==l.success){var c=this.commonService.castObj(l.data?.documentObjs)??[],u=this.convertExamObj(c);this.documentObjs=u,this.cloneDocumentObjs=u,this.categoryObjs=l.data?.categoryObjs,this.cloneCategoryObjs=l.data?.categoryObjs??[],this.currentCategory=l.data?.currentCategory?{...l.data?.currentCategory,shared:!1,sharedGroups:[],sharedTeachers:[],paths:[]}:void 0,this.totalExam=l.data?.total??0,this.pageObj.setTotalPages(this.totalExam),this.getListParentCategoryObjs(),this.stopStatusObj()}else this.showErrorSnack(l.message??"")}))}reloadApi(){this.getData()}ngOnInit(){this.waitDestroy((0,j.z)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{this.pageObj.setPageNumber(Number(this.commonService.getMyParam(this.activeRoute,"page"))),this.currentCategoryId=Number(this.commonService.getMyParam(this.activeRoute,"cat_id")),this.backToData=this.commonService.myParseJson(this.commonService.getMyQueryParam("data")??"");let n={shareType:this.backToData?.shareType,suggest:this.backToData?.suggest,backTo:this.backToData?.backTo??(this.userService.isTeacherRole()?"/admin/testbank/document-management/0/0/1":"/student/dashboard")};this.backToLink=this.commonService.serializeJson(n),this.mobileWebviewService.sendSimpleMessage("OPEN_EXAM"),this.aztShareService.currentMessage.subscribe(o=>{this.getData()})})),this.commonService.translateMetaData({title:"lang_testbank_document_list_header_title",description:"lang_testbank_document_list_header_description",image:"lang_cms_test_image"}),super.ngOnInit()}ngOnDestroy(){super.ngOnDestroy()}constructor(n,o,i,l,c,u){super(),this.activeRoute=n,this.examCategoryService=o,this.documentService=i,this.aztShareService=l,this.mobileWebviewService=c,this.userService=u,this.isShowSearchResult=!1,this.totalExam=0,this.recommendExamObjs=[],this.documentObjs=[],this.cloneDocumentObjs=[],this.cloneCategoryObjs=[],this.listBreadcrumb=[],this.currentCategoryId=0,this.backToLink="",this.pageObj=new w.d(24),this.form=new m.gE({searchContent:new m.MJ("",{nonNullable:!0,validators:[m.k0.required]})})}}return(t=r).\u0275fac=function(n){return new(n||t)(e.rXU(g.nX),e.rXU(x.Ns),e.rXU(x.DK),e.rXU(F.l),e.rXU(N.f),e.rXU(D.R))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-global-exam-management-list"]],features:[e.Vt3],decls:5,vars:4,consts:[["doneLoading",""],["normalTeacherView",""],[3,"layoutName","headerBackToLink"],[1,"container-fluid","mt-3","overflow-hidden"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[1,"grid","grid-cols-12","gap-6"],[1,"col-span-12","lg:col-span-12","2xl:col-span-12"],[4,"ngIf","ngIfElse"],["role","alert",1,"bg-red-100","border","border-red-400","text-red-700","px-4","py-3","rounded","relative"],[1,"block","sm:inline"],[1,"azt-view-file-manager"],[3,"goToChildCategoryPage","goBackToAllCategoryPage","backToParentCategory","loadApiData","rootCategoryObjs","rootDocumentObjs","categoryObjs","documentObjs","backToData","currentPage","currentCategory","isShowSearchResult","listBreadcrumb"],[1,"azt-document-footer","flex","items-center","flex-col-reverse","sm:flex-row","mt-3"],[1,"mr-0","sm:mr-auto","mt-2"],[3,"goToPaginationPage","pageObj"],[1,"text-right","mt-2","azt-hidden","md:block"],[1,"text-md"],[1,"ml-auto","text-right","-mt-2","block","md:hidden"]],template:function(n,o){if(1&n&&(e.j41(0,"public-layout",2)(1,"div",3),e.DNE(2,Le,1,1,"azt-loading-effect",4)(3,$e,5,2,"ng-template",null,0,e.C5r),e.k0s()()),2&n){const i=e.sdS(4);e.Y8G("layoutName","landing-page")("headerBackToLink",o.userService.isLogin()?o.backToLink:0==o.currentCategoryId?"":o.backToLink),e.R7$(2),e.Y8G("ngIf",o.statusObj.loading)("ngIfElse",i)}},dependencies:[d.bT,Y.K,X.q,V.J,Re,d.QX,C.wp],encapsulation:2}),r})()}]}];let Fe=(()=>{var t;class r{}return(t=r).\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[g.iI.forChild(we),g.iI,$.XE]}),r})(),Ne=(()=>{var t;class r{}return(t=r).\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({providers:[{provide:_.vn,useValue:M.c.azt_tiny_mce_script_src}],imports:[g.iI,d.MD,B.s,_.sv,Fe,m.YN,m.X1,y.hM,R.L,O.Lk,A.xv,L.Q,z.b,v.flO.pick(v.Ptg),P.Id,p.f,h.rc]}),r})()},15485:(I,b,s)=>{s.d(b,{l:()=>y});var d=s(71217),m=s(48891);let y=(()=>{var g;class h{constructor(){this.hasDataChanged=new d.t(!1),this.currentMessage=this.hasDataChanged.asObservable()}changeStatus(p){this.hasDataChanged.next(p)}}return(g=h).\u0275fac=function(p){return new(p||g)},g.\u0275prov=m.jDH({token:g,factory:g.\u0275fac,providedIn:"root"}),h})()}}]);