"use strict";(self.webpackChunkBalacoClient=self.webpackChunkBalacoClient||[]).push([[6574],{35048:(p,m,s)=>{s.d(m,{w:()=>$});var t=s(26860),_=s(10936),u=s(59640),c=s(27208),h=s(68774),d=s(31216),i=s(54460),g=s(47712),f=s(18718),S=s(2915),C=s(69135),b=s(32099),O=s(73437);function D(n,o){if(1&n&&t.nrm(0,"azt-loading-effect",7),2&n){const e=t.XpG();t.Y8G("currentStatusObj",e.statusObj)}}function v(n,o){if(1&n&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&n){const e=t.XpG(3);t.R7$(1),t.JRh(t.bMT(2,1,"lang_auto_da_chon")+": "+e.totalStudentsSelected)}}function E(n,o){if(1&n&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&n){const e=t.XpG(3);t.R7$(1),t.JRh(e.data.classroomName+(e.totalStudentsSelected?" ("+t.bMT(2,1,"lang_auto_da_chon")+": "+e.totalStudentsSelected+")":""))}}function I(n,o){}function T(n,o){if(1&n&&(t.j41(0,"div")(1,"azt-mat-dialog-content",22),t.DNE(2,I,0,0,"ng-template",23),t.k0s()()),2&n){t.XpG(3);const e=t.sdS(8);t.R7$(1),t.Y8G("defaultHeight",40),t.R7$(1),t.Y8G("ngTemplateOutlet",e)}}function x(n,o){}function j(n,o){if(1&n&&(t.j41(0,"div"),t.DNE(1,x,0,0,"ng-template",23),t.k0s()),2&n){t.XpG(3);const e=t.sdS(8);t.R7$(1),t.Y8G("ngTemplateOutlet",e)}}const k=function(n,o){return{"dark:bg-darkmode-400 bg-slate-100":n,"border-b border-slate-200/60 dark:border-darkmode-400":o}};function A(n,o){if(1&n){const e=t.RV6();t.qex(0),t.j41(1,"div",10)(2,"div",11),t.DNE(3,v,3,3,"span",12),t.DNE(4,E,3,3,"span",12),t.j41(5,"div",13)(6,"azt-search-box",14),t.bIt("onSearch",function(l){t.eBV(e);const r=t.XpG(2);return t.Njj(r.onSearchBox(l.searchObj))}),t.nI1(7,"mytranslate"),t.k0s()()(),t.j41(8,"div",15)(9,"div",16)(10,"input",17),t.bIt("change",function(){t.eBV(e);const l=t.XpG(2);return t.Njj(l.selectAllStudentOfClass())}),t.k0s(),t.j41(11,"label",18),t.EFF(12),t.nI1(13,"mytranslate"),t.k0s()(),t.j41(14,"div",19)(15,"input",20),t.bIt("change",function(){t.eBV(e);const l=t.XpG(2);return t.Njj(l.calculateFormData())}),t.k0s(),t.j41(16,"label",21),t.EFF(17),t.nI1(18,"mytranslate"),t.k0s()()()(),t.DNE(19,T,3,2,"div",12),t.DNE(20,j,2,1,"div",12),t.bVm()}if(2&n){const e=t.XpG(2);t.R7$(1),t.Y8G("ngClass",t.l_i(18,k,e.isDialog,!e.isDialog)),t.R7$(2),t.Y8G("ngIf",!e.isDialog),t.R7$(1),t.Y8G("ngIf",e.isDialog),t.R7$(2),t.Y8G("isServerSearch",!1)("styleInput","form-control-sm ")("placeholder",t.bMT(7,12,"lang_student_classroom_list_detail_search_name_student")),t.R7$(4),t.Y8G("formControl",e.selectAllFormControl),t.R7$(2),t.SpI(" ",t.bMT(13,14,e.selectAllFormControl.value?"lang_remove_all":"lang_select_all")," "),t.R7$(3),t.Y8G("formControl",e.showCheckedFormControl),t.R7$(2),t.SpI(" ",t.bMT(18,16,"lang_testbank_selected_students")," "),t.R7$(2),t.Y8G("ngIf",e.isDialog),t.R7$(1),t.Y8G("ngIf",!e.isDialog)}}function z(n,o){1&n&&(t.j41(0,"div",24)(1,"span"),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s()()),2&n&&(t.R7$(2),t.JRh(t.bMT(3,1,"lang_core_class_has_no_student")))}function R(n,o){if(1&n&&(t.DNE(0,A,21,21,"ng-container",8),t.DNE(1,z,4,3,"ng-template",null,9,t.C5r)),2&n){const e=t.sdS(2),a=t.XpG();t.Y8G("ngIf",a.studentObjs.length>0)("ngIfElse",e)}}function F(n,o){if(1&n){const e=t.RV6();t.j41(0,"div",25)(1,"button",26),t.bIt("click",function(){t.eBV(e);const l=t.XpG();return t.Njj(l.btnCloseDialog())}),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s()()}2&n&&(t.R7$(2),t.SpI(" ",t.bMT(3,1,"lang_cms_common_ok")," "))}function M(n,o){1&n&&(t.qex(0),t.j41(1,"div",24)(2,"span",28),t.EFF(3),t.nI1(4,"mytranslate"),t.k0s()(),t.bVm()),2&n&&(t.R7$(3),t.JRh(t.bMT(4,1,"lang_testbank_no_students_selected")))}function y(n,o){if(1&n){const e=t.RV6();t.j41(0,"div",33)(1,"div",34)(2,"input",35),t.bIt("change",function(){t.eBV(e);const l=t.XpG(4);return t.Njj(l.calculateFormData())}),t.k0s(),t.j41(3,"label",36,37),t.nI1(5,"mytranslate"),t.EFF(6),t.nI1(7,"mytranslate"),t.k0s()()()}if(2&n){const e=t.sdS(4),a=t.XpG().$implicit;t.R7$(2),t.FS9("id","azt-checkbox-student-"+a.id),t.Y8G("formControl",a.isChecked),t.R7$(1),t.FS9("for","azt-checkbox-student-"+a.id),t.Y8G("matTooltip",t.bMT(5,8,a.fullName))("isDisabledTooltip",!1)("matTooltipDisabled",e.isDisabled)("matTooltipShowDelay",500),t.R7$(3),t.SpI(" ",t.bMT(7,10,a.fullName)," ")}}function G(n,o){if(1&n&&(t.qex(0),t.DNE(1,y,8,12,"div",32),t.bVm()),2&n){const e=o.$implicit;t.R7$(1),t.Y8G("ngIf",e.isShowStudent)}}function B(n,o){1&n&&(t.j41(0,"div",24),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&n&&(t.R7$(1),t.SpI(" ",t.bMT(2,1,"lang_student_classroom_list_detail_not_student")," "))}function N(n,o){if(1&n&&(t.j41(0,"div",29),t.DNE(1,G,2,1,"ng-container",30),t.k0s(),t.DNE(2,B,3,3,"div",31)),2&n){const e=t.XpG(2);t.R7$(1),t.Y8G("ngForOf",e.studentObjs),t.R7$(1),t.Y8G("ngIf",0==e.totalStudentsShow)}}function P(n,o){if(1&n&&(t.DNE(0,M,5,3,"ng-container",8),t.DNE(1,N,3,2,"ng-template",null,27,t.C5r)),2&n){const e=t.sdS(2),a=t.XpG();t.Y8G("ngIf",a.totalStudentsSelected<=0&&a.showCheckedFormControl.value)("ngIfElse",e)}}let $=(()=>{class n extends u.H{resetAll(){this.selectAllFormControl.reset(),this.showCheckedFormControl.reset(),this.selectAllStudentOfClass()}btnCloseDialog(){if(this.studentObjs.length<=0)return this.closeBox.emit();let e={classroomId:this.data.classroomId,classroomName:this.data.classroomName,studentIdsSelected:this.studentObjs.filter(a=>a.isChecked.value).map(a=>a.id)};this.closeBox.emit(e)}onSearchBox(e){this.searchContentObj=e,this.calculateFormData()}selectAllStudentOfClass(){this.studentObjs.map(e=>e.isChecked.setValue(this.selectAllFormControl.value)),this.calculateFormData()}calculateFormData(){let e=this.commonService.convertVietnameseToEnglish(this.searchContentObj.searchContent).toLowerCase().trim();this.studentObjs.forEach(a=>{const l=this.commonService.convertVietnameseToEnglish(a.fullName??"").toLowerCase().trim();let r=""==e||l.includes(e);a.isShowStudent=(!this.showCheckedFormControl.value||a.isChecked.value)&&r}),this.totalStudentsSelected=this.studentObjs.filter(a=>a.isChecked.value).length,this.selectAllFormControl.setValue(this.totalStudentsSelected==this.studentObjs.length),this.totalStudentsShow=this.studentObjs.filter(a=>a.isShowStudent).length,this.isDialog||this.btnCloseDialog()}getData(){this.initStatusObj(),this.waitDestroy(this.studentProfileV2Service.apiStudentProfileV2GetObjsByClassroomIdGet(this.data.classroomId).subscribe(e=>{if(!e.success)return this.errorStatusObj(e.message,!0);let a=e.data?.studentObjs??[];a=0==e.data?.classroomObj.sortType?this.sortService.sortFirstNameStudents(this.commonService.myClone(a)??[]):this.sortService.sortArrayByMultipleObjectKeyAsc(this.commonService.myClone(a)??[],"pos","id"),this.initFormData(a),this.stopStatusObj()}))}initFormData(e){this.studentObjs=e.map(a=>({...a,isShowStudent:!0,isChecked:new _.MJ(this.data.studentIdsSelected.includes(a.id),{nonNullable:!0})})),this.calculateFormData()}ngOnInit(){this.getData()}constructor(e,a){super(),this.sortService=e,this.studentProfileV2Service=a,this.selectAllFormControl=new _.MJ(!1,{nonNullable:!0}),this.showCheckedFormControl=new _.MJ(!1,{nonNullable:!0}),this.studentObjs=[],this.totalStudentsSelected=0,this.totalStudentsShow=0,this.searchContentObj=new c.Z,this.isDialog=!0,this.closeBox=new t.bkB}static#t=this.\u0275fac=function(a){return new(a||n)(t.rXU(h.g),t.rXU(d.m_))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["azt-select-student"]],inputs:{isDialog:"isDialog",data:"data"},outputs:{closeBox:"closeBox"},features:[t.Vt3],decls:9,vars:3,consts:[["id","selectStudent",1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-0"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],["doneLoading",""],["class","p-3 text-right",4,"ngIf"],["templateSelectStudent",""],[3,"currentStatusObj"],[4,"ngIf","ngIfElse"],["emptyStudents",""],[1,"p-3","flex","flex-col","sm:flex-row","sm:h-auto","sm:items-center",3,"ngClass"],[1,"font-medium","mr-auto"],[4,"ngIf"],[1,"w-full","relative","flex","items-center","mt-2"],[3,"isServerSearch","styleInput","placeholder","onSearch"],[1,"flex","items-center","mt-2","sm:mt-0"],[1,"form-check","mr-3"],["id","selected-all","type","checkbox",1,"form-check-input",3,"formControl","change"],["for","selected-all",1,"form-check-label"],[1,"form-check"],["id","show-student-checked","type","checkbox",1,"form-check-input",3,"formControl","change"],["for","show-student-checked",1,"form-check-label"],[3,"defaultHeight"],[3,"ngTemplateOutlet"],[1,"h-full","flex","items-center","justify-center","p-5"],[1,"p-3","text-right"],["azt-track-service","azt-dialog-warning-3FIn9IaXN",1,"btn","w-24","btn-primary",3,"click"],["checkedBox",""],[1,"mx-auto"],[1,"p-3","grid","grid-cols-12","gap-3"],[4,"ngFor","ngForOf"],["class","h-full flex items-center justify-center p-5",4,"ngIf"],["class","col-span-12 md:col-span-4 mt-2",4,"ngIf"],[1,"col-span-12","md:col-span-4","mt-2"],[1,"azt-checkbox-item"],["type","checkbox",1,"form-check-input",3,"id","formControl","change"],[1,"form-check-label","truncate",2,"vertical-align","middle",3,"matTooltip","isDisabledTooltip","matTooltipDisabled","matTooltipShowDelay","for"],["c","isDisabled"]],template:function(a,l){if(1&a&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2),t.DNE(3,D,1,1,"azt-loading-effect",3),t.DNE(4,R,3,2,"ng-template",null,4,t.C5r),t.k0s()(),t.DNE(6,F,4,3,"div",5),t.k0s(),t.DNE(7,P,3,2,"ng-template",null,6,t.C5r)),2&a){const r=t.sdS(5);t.R7$(3),t.Y8G("ngIf",l.statusObj.loading)("ngIfElse",r),t.R7$(3),t.Y8G("ngIf",l.isDialog)}},dependencies:[i.YU,i.Sq,i.bT,i.T3,g.oV,_.Zm,_.BC,_.l_,f.K,S.U,C.f,b.W,O.wp],encapsulation:2})}return n})()},15485:(p,m,s)=>{s.d(m,{l:()=>u});var t=s(71217),_=s(26860);let u=(()=>{class c{constructor(){this.hasDataChanged=new t.t(!1),this.currentMessage=this.hasDataChanged.asObservable()}changeStatus(d){this.hasDataChanged.next(d)}static#t=this.\u0275fac=function(i){return new(i||c)};static#e=this.\u0275prov=_.jDH({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})()}}]);