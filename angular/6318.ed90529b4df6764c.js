"use strict";(self.webpackChunkBalacoClient=self.webpackChunkBalacoClient||[]).push([[6318],{2433:(z,C,d)=>{d.d(C,{h:()=>f});var b=d(48891),j=d(85710),e=d(17776);let f=(()=>{var _;class v{constructor(){this.subscriptions=new j.yU,this.aiElearningService=(0,b.WQX)(e.T5),this.cacheData=[]}getKnowledgeByApi(l,a,c,s,u,T){let p=this.getCacheKey(l,a,c,s),h=this.cacheData.find(O=>O.cacheKey==p);if(null!=h)return u(h.nodes);this.subscriptions.add(this.aiElearningService.aiApiV1ElearningGetKnowledgeTreeGet(l,a,c,s||void 0).subscribe({next:O=>{this.cacheData.push({cacheKey:p,nodes:O.nodes??[]}),u(O.nodes??[])},error:O=>T(O)}))}getObjByObjectiveId(l,a){for(var c of l){if(c.objectiveId==a)return c;let s=this.getObjByObjectiveId(c.children,a);if(null!=s)return s}}getObjById(l,a){for(var c of l){if(c.id==a)return c;let s=this.getObjById(c.children,a);if(null!=s)return s}}getObjByKnowledgeIdOrObjectiveId(l,a,c){for(var s of l){if(s.knowledgeId==a||s.objectiveId==c)return s;let u=this.getObjByKnowledgeIdOrObjectiveId(s.children,a,c);if(null!=u)return u}}getAllObjectiveObjs(l,a){return l.forEach(c=>{c.objectiveId&&a.push({id:c.objectiveId,name:c.title,questionHistories:[]}),c.children.length&&(a=a.concat(this.getAllObjectiveObjs(c.children,[])))}),a}getCacheKey(l,a,c,s){return`${l}_${a}_${c?"true":"false"}_${s??0}`}ngOnDestroy(){this.subscriptions.unsubscribe()}}return(_=v).\u0275fac=function(l){return new(l||_)},_.\u0275prov=b.jDH({token:_,factory:_.\u0275fac,providedIn:"root"}),v})()},36318:(z,C,d)=>{d.d(C,{G:()=>$});var b=d(89163),j=d(33887),e=d(48891),f=d(2915),_=d(32099),v=d(50334),w=d(2433),l=d(54460),a=d(15343),c=d(18718),s=d(76975);const u=t=>({nodeObjs:t}),T=(t,r)=>({"text-pending":t," link-color-hover":r});function p(t,r){if(1&t&&e.nrm(0,"azt-loading-effect",3),2&t){const o=e.XpG();e.Y8G("currentStatusObj",o.statusObj)}}function h(t,r){1&t&&e.eu8(0)}function O(t,r){if(1&t&&(e.j41(0,"table")(1,"tbody"),e.DNE(2,h,1,0,"ng-container",4),e.k0s()()),2&t){const o=e.XpG(),n=e.sdS(4);e.R7$(2),e.Y8G("ngTemplateOutlet",n)("ngTemplateOutletContext",e.eq3(2,u,o.nodeObjs))}}function S(t,r){1&t&&e.nrm(0,"lucide-icon",13)}function A(t,r){1&t&&e.nrm(0,"lucide-icon",14)}function F(t,r){if(1&t&&(e.j41(0,"i"),e.DNE(1,S,1,0,"lucide-icon",11)(2,A,1,0,"lucide-icon",12),e.k0s()),2&t){const o=e.XpG().$implicit;e.R7$(),e.Y8G("ngIf",o.isExpand),e.R7$(),e.Y8G("ngIf",!o.isExpand)}}function y(t,r){1&t&&(e.j41(0,"i"),e.nrm(1,"lucide-icon",15),e.k0s())}function E(t,r){1&t&&e.eu8(0)}function x(t,r){if(1&t&&(e.qex(0),e.DNE(1,E,1,0,"ng-container",4),e.bVm()),2&t){const o=e.XpG().$implicit;e.XpG(3);const n=e.sdS(4);e.R7$(),e.Y8G("ngTemplateOutlet",n)("ngTemplateOutletContext",e.eq3(2,u,o.children))}}function D(t,r){if(1&t){const o=e.RV6();e.qex(0),e.j41(1,"tr",7)(2,"td")(3,"div",8),e.bIt("click",function(){const i=e.eBV(o).$implicit,m=e.XpG(3);return e.Njj(m.clickToNode(i))}),e.DNE(4,F,3,2,"i",5)(5,y,2,0,"i",5),e.j41(6,"label",9),e.nrm(7,"span",10),e.nI1(8,"mathJaxContent"),e.nI1(9,"async"),e.nI1(10,"safeContentQuestion"),e.k0s()()()(),e.DNE(11,x,2,4,"ng-container",5),e.bVm()}if(2&t){const o=r.$implicit;e.R7$(),e.Y8G("hidden",!o.isShow),e.R7$(),e.xc7("padding-left",14*(o.level+1),"px"),e.R7$(),e.Y8G("ngClass",e.l_i(14,T,o.isSelected,!o.isSelected)),e.R7$(),e.Y8G("ngIf",o.children.length),e.R7$(),e.Y8G("ngIf",!o.children.length),e.R7$(2),e.Y8G("innerHTML",e.bMT(10,12,e.bMT(9,10,e.bMT(8,8,"L"+(o.level+1)+". "+o.text))),e.npT),e.R7$(4),e.Y8G("ngIf",o.isExpand)}}function Q(t,r){if(1&t&&(e.qex(0),e.DNE(1,D,12,17,"ng-container",6),e.bVm()),2&t){const o=r.$implicit;e.R7$(),e.Y8G("ngForOf",o)}}function k(t,r){if(1&t&&e.DNE(0,Q,2,1,"ng-container",5),2&t){const o=r.nodeObjs,n=e.XpG();e.Y8G("ngIf",n.asTemplateDataObj(o))}}let G=(()=>{var t;class r extends v.C{constructor(){super(...arguments),this.allowSelectKnowledgeOrObjective="only_objective",this.selectKnowledgeOrObjectiveEvent=new e.bkB,this.nodeObjs=[],this.sAztKnowledgeObjectiveService=(0,e.WQX)(w.h)}clickToNode(n){return"only_objective"==this.allowSelectKnowledgeOrObjective&&n.data.objectiveId||"knowledge_or_objective"==this.allowSelectKnowledgeOrObjective&&(n.data.knowledgeId||n.data.objectiveId)?this.selectKnowledgeOrObjectiveEvent.emit(n.data):void(n.isExpand?this.collapse(n):this.expand(n))}asTemplateDataObj(n){return n}initData(n,i,m){this.initStatusObj(),this.sAztKnowledgeObjectiveService.getKnowledgeByApi(n,i,!1,m,g=>{this.nodeObjs=this.standardTreeNodes(g,0),this.stopStatusObj()},g=>this.errorStatusObj(g,!0))}standardTreeNodes(n,i){let m=[];return n.forEach(g=>{let K=!1;this.selectedObj?.knowledgeId&&g.knowledgeId==this.selectedObj.knowledgeId&&(K=!0),this.selectedObj?.objectiveId&&g.objectiveId==this.selectedObj.objectiveId&&(K=!0);let I={level:i,typeNode:g.objectiveId?"objective":"knowledge",isExpand:!0,isShow:!0,isSelected:K,text:g.title,data:{...g,children:[]},children:[]};I.children=this.standardTreeNodes(g.children,i+1),m.push(I)}),m}ngOnChanges(n){n.searchContent&&this.searchByText(this.searchContent??"")}ngOnInit(){super.ngOnInit(),this.initData(this.levelId,this.subjectId,this.bookId)}}return(t=r).\u0275fac=(()=>{let o;return function(i){return(o||(o=e.xGo(t)))(i||t)}})(),t.\u0275cmp=e.VBU({type:t,selectors:[["coazt-knowledge-objective-tree-for-common-question"]],inputs:{levelId:"levelId",subjectId:"subjectId",bookId:"bookId",selectedObj:"selectedObj",searchContent:"searchContent",allowSelectKnowledgeOrObjective:"allowSelectKnowledgeOrObjective"},outputs:{selectKnowledgeOrObjectiveEvent:"selectKnowledgeOrObjectiveEvent"},features:[e.Vt3,e.OA$],decls:5,vars:2,consts:[["doneLoading",""],["recursiveListTmpl",""],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"hidden"],[1,"clickable",3,"click","ngClass"],[1,"form-check-label",2,"line-height","1.5"],[3,"innerHTML"],["name","chevron-down","size","14",4,"ngIf"],["name","chevron-right","size","14",4,"ngIf"],["name","chevron-down","size","14"],["name","chevron-right","size","14"],["name","dot","size","14"]],template:function(n,i){if(1&n&&e.DNE(0,p,1,1,"azt-loading-effect",2)(1,O,3,4,"ng-template",null,0,e.C5r)(3,k,1,1,"ng-template",null,1,e.C5r),2&n){const m=e.sdS(2);e.Y8G("ngIf",i.statusObj.loading)("ngIfElse",m)}},dependencies:[l.YU,l.Sq,l.bT,l.T3,a.WGl,c.K,l.Jj,s.km,s.ep],encapsulation:2}),r})(),$=(()=>{var t;class r extends j._{searchByText(n){this.searchContent=n}selectKnowledgeOrObjective(n){this.dialogRef.close(n)}btnCloseDialog(){this.dialogRef.close(void 0)}constructor(n,i){super(i,n),this.dialogRef=n,this.data=i}}return(t=r).\u0275fac=function(n){return new(n||t)(e.rXU(b.CP,8),e.rXU(b.Vh,8))},t.\u0275cmp=e.VBU({type:t,selectors:[["coazt-knowledge-objective-dialog-for-common-question"]],features:[e.Vt3],decls:12,vars:14,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"box","p-3"],[1,"pb-3"],[3,"onSearch","isServerSearch","placeholder"],[3,"minHeight"],[3,"selectKnowledgeOrObjectiveEvent","levelId","subjectId","bookId","selectedObj","searchContent","allowSelectKnowledgeOrObjective"],[1,"text-right","border-t","border-slate-200","dark:border-darkmode-400","p-3"],[1,"btn","btn-secondary","w-24",3,"click"]],template:function(n,i){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"azt-search-box",4),e.nI1(5,"mytranslate"),e.bIt("onSearch",function(g){return i.searchByText(g.searchObj)}),e.k0s()(),e.j41(6,"azt-mat-dialog-content",5)(7,"coazt-knowledge-objective-tree-for-common-question",6),e.bIt("selectKnowledgeOrObjectiveEvent",function(g){return i.selectKnowledgeOrObjective(g)}),e.k0s()()(),e.j41(8,"div",7)(9,"button",8),e.bIt("click",function(){return i.btnCloseDialog()}),e.EFF(10),e.nI1(11,"mytranslate"),e.k0s()()()()),2&n&&(e.R7$(4),e.Y8G("isServerSearch",!1)("placeholder",e.bMT(5,10,"lang_common_search_by_name")),e.R7$(2),e.Y8G("minHeight","calc(var(--vh, 1vh) * 100 - 300px)"),e.R7$(),e.Y8G("levelId",i.data.levelId)("subjectId",i.data.subjectId)("bookId",i.data.bookId)("selectedObj",i.data.selectedObj)("searchContent",null==i.searchContent?null:i.searchContent.searchContent)("allowSelectKnowledgeOrObjective",i.data.allowSelectKnowledgeOrObjective),e.R7$(3),e.SpI(" ",e.bMT(11,12,"lang_button_close")," "))},dependencies:[f.U,_.W,G,s.wp],encapsulation:2}),r})()}}]);