"use strict";(self.webpackChunkBalacoClient=self.webpackChunkBalacoClient||[]).push([[8065],{99965:(x,f,r)=>{r.d(f,{j:()=>v});var m=r(26860);let v=(()=>{class p{constructor(_){this.el=_}onInput(){this.adjustTextAreaHeight(this.el.nativeElement)}onFocus(){this.adjustTextAreaHeight(this.el.nativeElement)}ngAfterViewInit(){this.adjustTextAreaHeight(this.el.nativeElement)}adjustTextAreaHeight(_){_.parentElement&&(_.parentElement.style.minHeight=_.parentElement.clientHeight+"px"),_.style.overflow="hidden",_.style.height="auto";let s=_.scrollHeight+30;s=s<57?57:s,_.style.height=s+"px",_.parentElement&&(_.parentElement.style.minHeight="auto")}static#t=this.\u0275fac=function(s){return new(s||p)(m.rXU(m.aKT))};static#e=this.\u0275dir=m.FsC({type:p,selectors:[["textarea","autoResize",""]],hostBindings:function(s,c){1&s&&m.bIt("input",function(S){return c.onInput(S.target.value)})("focus",function(){return c.onFocus()})}})}return p})()},10805:(x,f,r)=>{r.d(f,{g:()=>K});var m=r(89163),v=r(23047),p=r(33887),t=r(26860),_=r(5849),s=r(54460),c=r(5601),b=r(2915),S=r(52811),T=r(73437);function y(n,o){1&n&&(t.j41(0,"div",9)(1,"b"),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s()()),2&n&&(t.R7$(2),t.JRh(t.bMT(3,1,"lang_azt_muc_do_thuon_thuc_ky_nang")))}function E(n,o){1&n&&(t.j41(0,"div",10)(1,"h4",11),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s()()),2&n&&(t.R7$(2),t.SpI(" ",t.bMT(3,1,"lang_azt_muc_do_thuon_thuc_ky_nang")," "))}function I(n,o){1&n&&(t.j41(0,"div",12)(1,"span",13),t.nrm(2,"azt-loading-ui"),t.k0s()())}function D(n,o){if(1&n&&(t.j41(0,"div",16)(1,"div",17)(2,"div",18),t.nrm(3,"div",19),t.k0s()()()),2&n){const e=t.XpG(4);t.R7$(3),t.Y8G("chart",e.chartSkill)}}function R(n,o){1&n&&(t.j41(0,"div",20),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&n&&(t.R7$(1),t.SpI(" ",t.bMT(2,1,"long_core_khong_tim_thay_Muc_do_thuan_thuc_ky_nang")," "))}function j(n,o){if(1&n&&(t.DNE(0,D,4,1,"div",14),t.DNE(1,R,3,3,"div",15)),2&n){const e=t.XpG(3);t.Y8G("ngIf",e.chartSkill),t.R7$(1),t.Y8G("ngIf",!e.chartSkill)}}function O(n,o){if(1&n){const e=t.RV6();t.j41(0,"div",21)(1,"button",22),t.bIt("click",function(){t.eBV(e);const a=t.XpG(3);return t.Njj(a.dialogRef.close())}),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s()()}2&n&&(t.R7$(2),t.SpI(" ",t.bMT(3,1,"lang_auto_dong")," "))}function z(n,o){if(1&n&&(t.j41(0,"div"),t.DNE(1,y,4,3,"div",4),t.DNE(2,E,4,3,"div",5),t.DNE(3,I,3,0,"div",6),t.j41(4,"azt-mat-dialog-content"),t.DNE(5,j,2,2,"ng-template",null,7,t.C5r),t.k0s(),t.DNE(7,O,4,3,"div",8),t.k0s()),2&n){const e=t.sdS(6),l=t.XpG(2);t.R7$(1),t.Y8G("ngIf",1==l.type),t.R7$(1),t.Y8G("ngIf",!l.type),t.R7$(1),t.Y8G("ngIf",l.statusObj.loading)("ngIfElse",e),t.R7$(4),t.Y8G("ngIf",1==l.type)}}function A(n,o){1&n&&(t.j41(0,"th",33),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&n&&(t.R7$(1),t.SpI(" ",t.bMT(2,1,"lang_auto_don_vi_kien_thuc")," "))}function P(n,o){if(1&n&&(t.j41(0,"td",34)(1,"span"),t.EFF(2),t.k0s()()),2&n){const e=o.$implicit;t.R7$(2),t.JRh(e.title)}}function F(n,o){1&n&&(t.j41(0,"th",33),t.nrm(1,"span",35),t.k0s())}const G=function(n){return{"block w-28":n}};function M(n,o){if(1&n){const e=t.RV6();t.j41(0,"span",37),t.bIt("click",function(){t.eBV(e);const a=t.XpG().$implicit,h=t.XpG(3);return t.Njj(h.goToPractice(a.examHashId))}),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()}if(2&n){const e=t.XpG(4);t.Y8G("ngClass",t.eq3(4,G,!e.isMobileDevice)),t.R7$(1),t.JRh(t.bMT(2,2,"lang_testbank_practice"))}}function N(n,o){if(1&n&&(t.j41(0,"td",34),t.DNE(1,M,3,6,"span",36),t.k0s()),2&n){const e=o.$implicit;t.R7$(1),t.Y8G("ngIf",e.examHashId)}}function $(n,o){1&n&&(t.j41(0,"th",38)(1,"span",35),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s()()),2&n&&(t.R7$(2),t.JRh(t.bMT(3,1,"lang_auto_ty_le")))}const B=function(n){return{"width.%":n}};function L(n,o){if(1&n&&(t.j41(0,"td",34)(1,"div",39)(2,"div",40),t.nI1(3,"number"),t.j41(4,"span",41),t.EFF(5),t.nI1(6,"number"),t.k0s()()()()),2&n){const e=o.$implicit;t.R7$(2),t.Y8G("ngStyle",t.eq3(8,B,t.i5U(3,2,100*e.point,"1.0-1"))),t.R7$(3),t.JRh(e.point?t.i5U(6,5,100*e.point,"1.0-1")+"%":"")}}function H(n,o){1&n&&t.nrm(0,"tr",42)}function U(n,o){1&n&&t.nrm(0,"tr",43)}function Y(n,o){if(1&n){const e=t.RV6();t.j41(0,"div",23)(1,"div",9)(2,"b"),t.EFF(3),t.nI1(4,"mytranslate"),t.k0s()(),t.j41(5,"azt-mat-dialog-content")(6,"table",24),t.qex(7,25),t.DNE(8,A,3,3,"th",26),t.DNE(9,P,3,1,"td",27),t.bVm(),t.qex(10,28),t.DNE(11,F,2,0,"th",26),t.DNE(12,N,2,1,"td",27),t.bVm(),t.qex(13,29),t.DNE(14,$,4,3,"th",30),t.DNE(15,L,7,10,"td",27),t.bVm(),t.DNE(16,H,1,0,"tr",31),t.DNE(17,U,1,0,"tr",32),t.k0s()(),t.j41(18,"div",21)(19,"button",22),t.bIt("click",function(){t.eBV(e);const a=t.XpG(2);return t.Njj(a.closeDetailSkill())}),t.EFF(20),t.nI1(21,"mytranslate"),t.k0s()()()}if(2&n){const e=t.XpG(2);t.R7$(3),t.JRh(t.bMT(4,6,"lang_testbank_frontend_student_skill_statistic_title")),t.R7$(3),t.Y8G("dataSource",e.skillItem),t.R7$(10),t.Y8G("matHeaderRowDef",e.displayedColumns)("matHeaderRowDefSticky",!0),t.R7$(1),t.Y8G("matRowDefColumns",e.displayedColumns),t.R7$(3),t.SpI(" ",t.bMT(21,8,"lang_auto_dong")," ")}}function X(n,o){if(1&n&&(t.j41(0,"div",1),t.DNE(1,z,8,5,"div",2),t.DNE(2,Y,22,10,"div",3),t.k0s()),2&n){const e=t.XpG();t.Y8G("ngClass",1==e.type?"box p-3":""),t.R7$(1),t.Y8G("ngIf",!e.skillItem.length),t.R7$(1),t.Y8G("ngIf",e.skillItem.length)}}let K=(()=>{class n extends p._{getSkillProfile(){this.studentPracticeService.aiApiV1StudentPracticeSkillProficiencyPost({schoolLevelId:this.levelId,schoolSubjectId:this.subjectId,userId:this.userId}).subscribe({next:l=>{this.createChartSkill(l.skillChapterViewItems),this.stopStatusObj()},error:l=>{this.errorStatusObj(l.message,!0)}})}convertTitle(e,l){return this.commonService.myTranslateInstant(e)+" ("+(l.reduce((h,g)=>(h??0)+(g??0),0)?.toString()??"")+")"}createChartSkill(e){if(!e||!e.length)return;let l=e.map(i=>i.title??""),a=e.map(i=>0==i.countExcellent?null:i.countExcellent),h=e.map(i=>0==i.countGood?null:i.countGood),g=e.map(i=>0==i.countNotGood?null:i.countNotGood),C=e.map(i=>0==i.countTerrible?null:i.countTerrible),k=e.map(i=>0==i.countNonePractice?null:i.countNonePractice),w=this.convertTitle("lang_azt_xuat_sac",a),W=this.convertTitle("lang_azt_kha",h),J=this.convertTitle("lang_azt_trung_binh",g),Q=this.convertTitle("lang_azt_yeu",C),Z=this.convertTitle("lang_auto_chua_thi",k),V=new v.t1({chart:{type:"column",style:{fontFamily:"Arial"}},title:{text:"",align:"center"},xAxis:{categories:l},yAxis:{min:0,title:{text:this.commonService.myTranslateInstant("lang_azt_so_kien_thuc")},stackLabels:{enabled:!0}},credits:{enabled:!1},plotOptions:{column:{stacking:"normal",dataLabels:{enabled:!0}}},series:[{name:w,type:"column",data:a,color:"green",tooltip:{headerFormat:"<b>{point.x}</b><br/><b>{series.name}: {point.y}</b><br/>",pointFormatter:function(){return e[this.index].excellentSkills.map((d,u)=>u+1+": "+d.title).join("<br/>")}},events:{click:i=>{this.openDetailSkill(e[i.point.index].excellentSkills)}}},{name:W,type:"column",data:h,color:"yellow",tooltip:{headerFormat:"<b>{point.x}</b><br/><b>{series.name}: {point.y}</b><br/>",pointFormatter:function(){return e[this.index].goodSkills.map((d,u)=>u+1+": "+d.title).join("<br/>")}},events:{click:i=>{this.openDetailSkill(e[i.point.index].goodSkills)}}},{name:J,type:"column",data:g,color:"orange",tooltip:{headerFormat:"<b>{point.x}</b><br/><b>{series.name}: {point.y}</b><br/>",pointFormatter:function(){return e[this.index].notGoodSkills.map((d,u)=>u+1+": "+d.title).join("<br/>")}},events:{click:i=>{this.openDetailSkill(e[i.point.index].notGoodSkills)}}},{name:Q,type:"column",data:C,color:"red",tooltip:{headerFormat:"<b>{point.x}</b><br/><b>{series.name}: {point.y}</b><br/>",pointFormatter:function(){return e[this.index].terribleSkills.map((d,u)=>u+1+": "+d.title).join("<br/>")}},events:{click:i=>{this.openDetailSkill(e[i.point.index].terribleSkills)}}},{name:Z,type:"column",data:k,color:"grey",tooltip:{headerFormat:"<b>{point.x}</b><br/><b>{series.name}: {point.y}</b><br/>",pointFormatter:function(){return e[this.index].nonePracticeSkills.map((d,u)=>u+1+": "+d.title).join("<br/>")}},events:{click:i=>{this.openDetailSkill(e[i.point.index].nonePracticeSkills)}}}]});this.chartSkill=V,this.stopStatusObj()}goToPractice(e){if(!e)return;let l=this.commonService.getMyQueryParam("backto"),a=this.commonService.getCurrentUrlWithoutLocale();this.commonService.myNavigationWithQueryString("/de-thi/"+e,"?backto="+encodeURIComponent(a+"?backto="+l)),this.dialogRef.close()}openDetailSkill(e){1==this.type&&(this.skillItem=e)}closeDetailSkill(){this.skillItem=[]}ngOnInit(){super.ngOnInit(),this.validLevelAndSubject=10==this.levelId||11==this.levelId||32==this.subjectId&&12==this.levelId,this.validLevelAndSubject&&(this.initStatusObj(),this.getSkillProfile())}constructor(e,l,a){super(a,l),this.studentPracticeService=e,this.dialogRef=l,this.validLevelAndSubject=!1,this.skillItem=[],this.displayedColumns=["name","actionCol","percent"],a&&(this.subjectId=a.subjectId,this.levelId=a.levelId,this.userId=a.userId,this.type=1)}static#t=this.\u0275fac=function(l){return new(l||n)(t.rXU(_.Kw),t.rXU(m.CP,8),t.rXU(m.Vh,8))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["coazt-student-skill-chapter"]],inputs:{type:"type",userId:"userId",levelId:"levelId",subjectId:"subjectId"},features:[t.Vt3],decls:1,vars:1,consts:[[3,"ngClass",4,"ngIf"],[3,"ngClass"],[4,"ngIf"],["class","skill-statistical",4,"ngIf"],["class","mb-3",4,"ngIf"],["class","w-auto text-left bg-gray-200","style","padding: 10px 24px; margin-left: -24px; margin-right: -24px",4,"ngIf"],["class","flex justify-center items-center m-5",4,"ngIf","ngIfElse"],["doneLoading",""],["class","flex items-center justify-end pt-2 w-full bg-white",4,"ngIf"],[1,"mb-3"],[1,"w-auto","text-left","bg-gray-200",2,"padding","10px 24px","margin-left","-24px","margin-right","-24px"],[1,"font-medium"],[1,"flex","justify-center","items-center","m-5"],[1,"w-6","h-6","m-5"],["class","report-box intro-x mt-3",4,"ngIf"],["class","flex p-4 justify-center items-center",4,"ngIf"],[1,"report-box","intro-x","mt-3"],[1,"h-[400px]"],[1,"chart-center"],[3,"chart"],[1,"flex","p-4","justify-center","items-center"],[1,"flex","items-center","justify-end","pt-2","w-full","bg-white"],[1,"btn","btn-secondary","w-32",3,"click"],[1,"skill-statistical"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","actionCol"],["matColumnDef","percent"],["mat-header-cell","","class","text-center",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[1,"center-span"],["class","text-white btn btn-pending","style","font-weight: 430;",3,"ngClass","click",4,"ngIf"],[1,"text-white","btn","btn-pending",2,"font-weight","430",3,"ngClass","click"],["mat-header-cell","",1,"text-center"],[1,"progress"],[1,"progress-done",3,"ngStyle"],[1,"text-md","font-medium","span-baseline-middle"],["mat-header-row",""],["mat-row",""]],template:function(l,a){1&l&&t.DNE(0,X,3,3,"div",0),2&l&&t.Y8G("ngIf",a.validLevelAndSubject)},dependencies:[s.YU,s.bT,s.B3,c.Zl,c.tL,c.ji,c.cC,c.YV,c.iL,c.KS,c.$R,c.YZ,c.NB,v.S6,b.U,S.R,s.QX,T.wp],encapsulation:2})}return n})()}}]);