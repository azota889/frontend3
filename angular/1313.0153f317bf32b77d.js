"use strict";(self.webpackChunkBalacoClient=self.webpackChunkBalacoClient||[]).push([[1313],{7919:(S,v,r)=>{r.d(v,{Z:()=>e});var l=r(26860);let e=(()=>{var u;class h{constructor(t){this.el=t,this.hasDecimalPoint=!1,this.hasNegativeSign=!1,this.navigationKeys=["Backspace","Delete","Tab","Escape","Enter","Home","End","ArrowLeft","ArrowRight","Clear","Copy","Paste"],this.decimal=!1,this.decimalSeparator=".",this.decimalSeparator1=".",this.decimalSeparator2=",",this.allowNegatives=!1,this.allowPaste=!0,this.negativeSign="-",this.min=-1/0,this.max=1/0,this.regex=null,this.inputElement=t.nativeElement}ngOnChanges(t){if(t.pattern&&(this.regex=this.pattern?RegExp(this.pattern):null),t.min){const n=Number(this.min);this.min=isNaN(n)?-1/0:n}if(t.max){const n=Number(this.max);this.max=isNaN(n)?1/0:n}}onBeforeInput(t){if(isNaN(Number(t.data))){if(t.data===this.decimalSeparator1||t.data===this.decimalSeparator2||t.data===this.negativeSign&&this.allowNegatives)return;t.preventDefault(),t.stopPropagation()}}onKeyDown(t){if(this.navigationKeys.indexOf(t.key)>-1||("a"===t.key||"KeyA"===t.code)&&!0===t.ctrlKey||("c"===t.key||"KeyC"===t.code)&&!0===t.ctrlKey||("v"===t.key||"KeyV"===t.code)&&!0===t.ctrlKey||("x"===t.key||"KeyX"===t.code)&&!0===t.ctrlKey||("a"===t.key||"KeyA"===t.code)&&!0===t.metaKey||("c"===t.key||"KeyC"===t.code)&&!0===t.metaKey||("v"===t.key||"KeyV"===t.code)&&!0===t.metaKey||("x"===t.key||"KeyX"===t.code)&&!0===t.metaKey)return;let n="";var a=t.key;if(t.key===this.decimalSeparator2&&(a=this.decimalSeparator1),this.decimal&&a===this.decimalSeparator1)return n=this.forecastValue(a),n.split(this.decimalSeparator1).length>2||(this.hasDecimalPoint=n.indexOf(this.decimalSeparator1)>-1,this.setNewValue(a)),void t.preventDefault();if(a===this.negativeSign&&this.allowNegatives)return n=this.forecastValue(a),n.charAt(0)!==this.negativeSign||n.split(this.negativeSign).length>2?void t.preventDefault():void(this.hasNegativeSign=n.split(this.negativeSign).length>-1);if(" "===a||isNaN(Number(a)))return void t.preventDefault();if(n=n||this.forecastValue(a),this.regex&&!this.regex.test(n))return void t.preventDefault();const i=Number(n);(i>this.max||i<this.min)&&t.preventDefault()}onPaste(t){if(!0===this.allowPaste){let n="";window.clipboardData?n=window.clipboardData.getData("text"):t.clipboardData&&t.clipboardData.getData&&(n=t.clipboardData.getData("text/plain")),this.pasteData(n),t.preventDefault()}else t.preventDefault(),t.stopPropagation()}onDrop(t){const n=t.dataTransfer?.getData("text")??"";this.inputElement.focus(),this.pasteData(n),t.preventDefault()}pasteData(t){t=this.replaceDecimalSeparator(t);const n=this.sanitizeInput(t);if(!n.includes(this.negativeSign)||!this.hasNegativeSign||this.getSelection().includes(this.negativeSign)){if(!document.execCommand("insertText",!1,n))if(this.inputElement.setRangeText){const{selectionStart:i,selectionEnd:d}=this.inputElement;this.inputElement.setRangeText(n,i??0,d??0,"end"),typeof window.InstallTrigger<"u"&&this.inputElement.dispatchEvent(new Event("input",{cancelable:!0}))}else this.insertAtCursor(this.inputElement,n);this.decimal&&(this.hasDecimalPoint=this.inputElement.value.indexOf(this.decimalSeparator1)>-1),this.hasNegativeSign=this.inputElement.value.indexOf(this.negativeSign)>-1}}setNewValue(t){t=this.replaceDecimalSeparator(t),this.insertAtCursor(this.inputElement,t),this.decimal&&(this.hasDecimalPoint=this.inputElement.value.indexOf(this.decimalSeparator1)>-1),this.hasNegativeSign=this.inputElement.value.indexOf(this.negativeSign)>-1}insertAtCursor(t,n){const a=t.selectionStart??0,i=t.selectionEnd??0;t.value=t.value.substring(0,a)+n+t.value.substring(i,t.value.length);const d=a+n.length;t.focus(),t.setSelectionRange(d,d),this.triggerEvent(t,"input")}triggerEvent(t,n){if("createEvent"in document){const a=document.createEvent("HTMLEvents");a.initEvent(n,!1,!0),t.dispatchEvent(a)}}sanitizeInput(t){let a,n="";a=this.decimal&&this.isValidDecimal(t)?new RegExp(`${this.getNegativeSignRegExp()}[^0-9${this.decimalSeparator1}]`,"g"):new RegExp(`${this.getNegativeSignRegExp()}[^0-9]`,"g"),n=t.replace(a,"");const i=this.inputElement.maxLength;if(i>0){const d=i-this.inputElement.value.length+(n.includes(`${this.negativeSign}`)?1:0);n=d>0?n.substring(0,d):""}return n}getNegativeSignRegExp(){return!this.allowNegatives||this.hasNegativeSign&&!this.getSelection().includes(this.negativeSign)?"":`(?!^${this.negativeSign})`}isValidDecimal(t){if(this.hasDecimalPoint){const n=this.getSelection();return n&&n.indexOf(this.decimalSeparator1)>-1?t.split(this.decimalSeparator1).length<=2:t.indexOf(this.decimalSeparator1)<0}return t.split(this.decimalSeparator1).length<=2}getSelection(){return this.inputElement.value.substring(this.inputElement.selectionStart??0,this.inputElement.selectionEnd??0)}forecastValue(t){const a=this.inputElement.selectionEnd??0,i=this.inputElement.value;return i.substring(0,this.inputElement.selectionStart??0)+t+i.substring(a)}replaceDecimalSeparator(t){return t.replace(",",this.decimalSeparator).replace(".",this.decimalSeparator)}}return(u=h).\u0275fac=function(t){return new(t||u)(l.rXU(l.aKT))},u.\u0275dir=l.FsC({type:u,selectors:[["","appOnlyNumber",""]],hostBindings:function(t,n){1&t&&l.bIt("beforeinput",function(i){return n.onBeforeInput(i)})("keydown",function(i){return n.onKeyDown(i)})("paste",function(i){return n.onPaste(i)})("drop",function(i){return n.onDrop(i)})},inputs:{decimal:"decimal",decimalSeparator:"decimalSeparator",decimalSeparator1:"decimalSeparator1",decimalSeparator2:"decimalSeparator2",allowNegatives:"allowNegatives",allowPaste:"allowPaste",negativeSign:"negativeSign",min:"min",max:"max",pattern:"pattern"},features:[l.OA$]}),h})()},40111:(S,v,r)=>{r.d(v,{k:()=>g});var l=r(64198),e=r(73202),u=r(26860),h=r(25693);let g=(()=>{var t;class n{getMineTypeByFileType(i){let o="";switch(this.commonService.getEnumTypeWithDefault(e.d,i,e.d.unknown)){case e.d.doc:case e.d.docx:o="application/vnd.openxmlformats-officedocument.wordprocessingml.document";break;case e.d.ppt:case e.d.pptx:o="application/vnd.openxmlformats-officedocument.presentationml.presentation";break;case e.d.xlsx:o="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";break;case e.d.pdf:o="application/pdf";break;case e.d.video:case e.d.mp4:o="video/mp4";break;case e.d.mov:o="video/mov";break;case e.d.webm:o="video/webm";break;case e.d.quicktime:o="video/quicktime";break;case e.d.audio:o="audio/mpeg";break;case e.d.mp3:o="audio/mp3";break;case e.d.wav:o="audio/wav";break;case e.d.jpeg:case e.d.image:o="image/jpeg";break;case e.d.google_docs:o="google_docs"}return o}getMineTypeByExtension(i){switch(new RegExp(/(?:\.([^.]+))?$/).exec(i)?.[1]){case"pdf":return"application/pdf";case"xlsx":return"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";case"xsl":case"csv":return"application/vnd.ms-excel";case"jpg":return"image/jpg";case"jpge":return"image/jpge";default:return"application/json-patch+json"}}getTypeFileByMime(i){return i.mimes&&(0,l.I7)(i.mimes)||i.name?.toLowerCase().endsWith(".azt")?e.d.docx:i.mimes&&(0,l.nL)(i.mimes)?e.d.xlsx:i.mimes&&(0,l.JK)(i.mimes)?e.d.audio:i.mimes&&(0,l.cZ)(i.mimes)?e.d.video:i.mimes&&(0,l.wu)(i.mimes)?e.d.image:i.mimes&&(0,l.Ev)(i.mimes)?e.d.pdf:i.mimes&&(0,l.rl)(i.mimes)?e.d.powerpoint:void 0}constructor(i){this.commonService=i}}return(t=n).\u0275fac=function(i){return new(i||t)(u.KVO(h.R))},t.\u0275prov=u.jDH({token:t,factory:t.\u0275fac,providedIn:"root"}),n})()},78745:(S,v,r)=>{r.d(v,{d:()=>C});var l=r(59640),e=r(26860),u=r(54460),h=r(17818),g=r(47712),t=r(15343),n=r(64160),a=r(15437),i=r(73437);const d=function(){return{"mr-2":!0}};function o(s,f){if(1&s){const c=e.RV6();e.qex(0),e.j41(1,"div",6)(2,"p",7),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s(),e.j41(5,"p",7),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s(),e.j41(8,"div",8),e.nrm(9,"input",9),e.j41(10,"button",10),e.bIt("click",function(){e.eBV(c);const m=e.XpG();return e.Njj(m.showCopySuccess())}),e.nrm(11,"lucide-icon",11),e.EFF(12),e.nI1(13,"mytranslate"),e.k0s()()(),e.bVm()}if(2&s){const c=e.XpG();e.R7$(3),e.JRh(e.bMT(4,6,"lang_auto_hoac")),e.R7$(3),e.JRh(e.bMT(7,8,"lang_classroom_QR_join_link_copy")),e.R7$(3),e.Y8G("value",c.linkUrl),e.R7$(1),e.Y8G("cdkCopyToClipboard",c.copyLinkToClipboard(c.linkUrl)),e.R7$(1),e.Y8G("ngClass",e.lJ4(12,d)),e.R7$(1),e.SpI(" ",e.bMT(13,10,"lang_auto_sao_chep")," ")}}let w=(()=>{var s;class f extends l.H{constructor(){super(...arguments),this.linkUrl="",this.fileName="",this.showLink=!1,this.qrCodeDownloadLink=""}showCopySuccess(){this.showSuccessSnack("lang_auto_sao_chep_thanh_cong")}copyLinkToClipboard(p){return p}onChangeURL(p){this.qrCodeDownloadLink=p}downloadQrCode(){try{let p=""!=this.fileName?this.commonService.createFileNameExportFile([this.fileName])+".jpg":this.commonService.createFileNameExportFile(["azota-qr-code-"])+".jpg";this.commonService.downloadFileByUrl(this.qrCodeDownloadLink.changingThisBreaksApplicationSecurity,p)}catch{console.log("Download QrCode error")}}}return(s=f).\u0275fac=function(){let c;return function(m){return(c||(c=e.xGo(s)))(m||s)}}(),s.\u0275cmp=e.VBU({type:s,selectors:[["azt-show-link"]],inputs:{linkUrl:"linkUrl",fileName:"fileName",showLink:"showLink"},features:[e.Vt3],decls:8,vars:11,consts:[["azt-track-service","download-qr-code-9t-9Wiu2xv",1,"box","p-3","text-center",3,"click"],[2,"background","#fff","padding","5px"],["colorDark","#2361ad","imageSrc","'images/Azota-For-QrCode-01.png' | convertCdnLinkOfGitHub",3,"allowEmptyString","qrdata","elementType","width","errorCorrectionLevel","qrCodeURL"],["azt-track-service","download-qr-code-RqVBz6g1z7",1,"btn","btn-outline-primary","btn-transparent","btn-sm","mx-auto","mt-2",3,"click"],["name","download","size","16",3,"ngClass"],[4,"ngIf"],[1,"text-center"],[1,"h5","mt-2","font-medium"],[1,"azt-copy","relative","mt-2"],["type","text","readonly","",1,"form-control","py-3","px-4","border-transparent","bg-slate-100","pr-10",2,"padding-right","120px",3,"value"],["azt-track-service","download-qr-code-yW-aFu0tO",1,"btn","btn-outline-primary","absolute","my-auto","inset-y-0","right-0",2,"border-top-left-radius","0","border-bottom-left-radius","0",3,"cdkCopyToClipboard","click"],["name","copy","size","16",3,"ngClass"]],template:function(p,m){1&p&&(e.j41(0,"div",0),e.bIt("click",function(k){return k.stopPropagation()}),e.j41(1,"div",1)(2,"qrcode",2),e.bIt("qrCodeURL",function(k){return m.onChangeURL(k)}),e.k0s()(),e.j41(3,"a",3),e.bIt("click",function(){return m.downloadQrCode()}),e.nrm(4,"lucide-icon",4),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s(),e.DNE(7,o,14,13,"ng-container",5),e.k0s()),2&p&&(e.R7$(2),e.Y8G("allowEmptyString",!0)("qrdata",m.linkUrl)("elementType","url")("width",128)("errorCorrectionLevel","M"),e.R7$(2),e.Y8G("ngClass",e.lJ4(10,d)),e.R7$(1),e.SpI(" ",e.bMT(6,8,"lang_auto_tai_ve_may")," "),e.R7$(2),e.Y8G("ngIf",m.showLink))},dependencies:[u.YU,u.bT,n.dF,t.WGl,a.c,i.wp],encapsulation:2}),f})();const _=function(s){return{"w-80":s}};let C=(()=>{var s;class f extends l.H{constructor(){super(...arguments),this.linkUrl="",this.fileName="",this.showLink=!1}}return(s=f).\u0275fac=function(){let c;return function(m){return(c||(c=e.xGo(s)))(m||s)}}(),s.\u0275cmp=e.VBU({type:s,selectors:[["azt-download-qr-code"]],inputs:{linkUrl:"linkUrl",fileName:"fileName",showLink:"showLink"},features:[e.Vt3],decls:7,vars:10,consts:[["azt-track-service","download-qr-code-hiQXy_iTc",1,"btn","btn-outline-primary","btn-transparent","p-1",3,"matMenuTriggerFor","matTooltip"],["name","qr-code","size","24"],["xPosition","before"],["showQrCode","matMenu"],[3,"ngClass"],[3,"linkUrl","fileName","showLink"]],template:function(p,m){if(1&p&&(e.j41(0,"button",0),e.nI1(1,"mytranslate"),e.nrm(2,"lucide-icon",1),e.k0s(),e.j41(3,"mat-menu",2,3)(5,"div",4),e.nrm(6,"azt-show-link",5),e.k0s()()),2&p){const y=e.sdS(4);e.FS9("matTooltip",e.bMT(1,6,"lang_auto_quet_hoac_tai_ma_qr_code")),e.Y8G("matMenuTriggerFor",y),e.R7$(5),e.Y8G("ngClass",e.eq3(8,_,m.showLink)),e.R7$(1),e.Y8G("linkUrl",m.linkUrl)("fileName",m.fileName)("showLink",m.showLink)}},dependencies:[u.YU,h.kk,h.Cp,g.oV,t.WGl,w,i.wp],encapsulation:2}),f})()}}]);