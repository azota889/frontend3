"use strict";(self.webpackChunkBalacoClient=self.webpackChunkBalacoClient||[]).push([[693],{76024:(S,w,a)=>{a.d(w,{Y:()=>r});var d=a(65879);let r=(()=>{class h{constructor(e){this.el=e,this.hasDecimalPoint=!1,this.hasNegativeSign=!1,this.navigationKeys=["Backspace","Delete","Tab","Escape","Enter","Home","End","ArrowLeft","ArrowRight","Clear","Copy","Paste"],this.decimal=!1,this.decimalSeparator=".",this.decimalSeparator1=".",this.decimalSeparator2=",",this.allowNegatives=!1,this.allowPaste=!0,this.negativeSign="-",this.min=-1/0,this.max=1/0,this.regex=null,this.inputElement=e.nativeElement}ngOnChanges(e){if(e.pattern&&(this.regex=this.pattern?RegExp(this.pattern):null),e.min){const i=Number(this.min);this.min=isNaN(i)?-1/0:i}if(e.max){const i=Number(this.max);this.max=isNaN(i)?1/0:i}}onBeforeInput(e){if(isNaN(Number(e.data))){if(e.data===this.decimalSeparator1||e.data===this.decimalSeparator2||e.data===this.negativeSign&&this.allowNegatives)return;e.preventDefault(),e.stopPropagation()}}onKeyDown(e){if(this.navigationKeys.indexOf(e.key)>-1||("a"===e.key||"KeyA"===e.code)&&!0===e.ctrlKey||("c"===e.key||"KeyC"===e.code)&&!0===e.ctrlKey||("v"===e.key||"KeyV"===e.code)&&!0===e.ctrlKey||("x"===e.key||"KeyX"===e.code)&&!0===e.ctrlKey||("a"===e.key||"KeyA"===e.code)&&!0===e.metaKey||("c"===e.key||"KeyC"===e.code)&&!0===e.metaKey||("v"===e.key||"KeyV"===e.code)&&!0===e.metaKey||("x"===e.key||"KeyX"===e.code)&&!0===e.metaKey)return;let i="";var o=e.key;if(e.key===this.decimalSeparator2&&(o=this.decimalSeparator1),this.decimal&&o===this.decimalSeparator1)return i=this.forecastValue(o),i.split(this.decimalSeparator1).length>2||(this.hasDecimalPoint=i.indexOf(this.decimalSeparator1)>-1,this.setNewValue(o)),void e.preventDefault();if(o===this.negativeSign&&this.allowNegatives)return i=this.forecastValue(o),i.charAt(0)!==this.negativeSign||i.split(this.negativeSign).length>2?void e.preventDefault():void(this.hasNegativeSign=i.split(this.negativeSign).length>-1);if(" "===o||isNaN(Number(o)))return void e.preventDefault();if(i=i||this.forecastValue(o),this.regex&&!this.regex.test(i))return void e.preventDefault();const l=Number(i);(l>this.max||l<this.min)&&e.preventDefault()}onPaste(e){if(!0===this.allowPaste){let i="";window.clipboardData?i=window.clipboardData.getData("text"):e.clipboardData&&e.clipboardData.getData&&(i=e.clipboardData.getData("text/plain")),this.pasteData(i),e.preventDefault()}else e.preventDefault(),e.stopPropagation()}onDrop(e){const i=e.dataTransfer?.getData("text")??"";this.inputElement.focus(),this.pasteData(i),e.preventDefault()}pasteData(e){e=this.replaceDecimalSeparator(e);const i=this.sanitizeInput(e);if(!i.includes(this.negativeSign)||!this.hasNegativeSign||this.getSelection().includes(this.negativeSign)){if(!document.execCommand("insertText",!1,i))if(this.inputElement.setRangeText){const{selectionStart:l,selectionEnd:m}=this.inputElement;this.inputElement.setRangeText(i,l??0,m??0,"end"),typeof window.InstallTrigger<"u"&&this.inputElement.dispatchEvent(new Event("input",{cancelable:!0}))}else this.insertAtCursor(this.inputElement,i);this.decimal&&(this.hasDecimalPoint=this.inputElement.value.indexOf(this.decimalSeparator1)>-1),this.hasNegativeSign=this.inputElement.value.indexOf(this.negativeSign)>-1}}setNewValue(e){e=this.replaceDecimalSeparator(e),this.insertAtCursor(this.inputElement,e),this.decimal&&(this.hasDecimalPoint=this.inputElement.value.indexOf(this.decimalSeparator1)>-1),this.hasNegativeSign=this.inputElement.value.indexOf(this.negativeSign)>-1}insertAtCursor(e,i){const o=e.selectionStart??0,l=e.selectionEnd??0;e.value=e.value.substring(0,o)+i+e.value.substring(l,e.value.length);const m=o+i.length;e.focus(),e.setSelectionRange(m,m),this.triggerEvent(e,"input")}triggerEvent(e,i){if("createEvent"in document){const o=document.createEvent("HTMLEvents");o.initEvent(i,!1,!0),e.dispatchEvent(o)}}sanitizeInput(e){let o,i="";o=this.decimal&&this.isValidDecimal(e)?new RegExp(`${this.getNegativeSignRegExp()}[^0-9${this.decimalSeparator1}]`,"g"):new RegExp(`${this.getNegativeSignRegExp()}[^0-9]`,"g"),i=e.replace(o,"");const l=this.inputElement.maxLength;if(l>0){const m=l-this.inputElement.value.length+(i.includes(`${this.negativeSign}`)?1:0);i=m>0?i.substring(0,m):""}return i}getNegativeSignRegExp(){return!this.allowNegatives||this.hasNegativeSign&&!this.getSelection().includes(this.negativeSign)?"":`(?!^${this.negativeSign})`}isValidDecimal(e){if(this.hasDecimalPoint){const i=this.getSelection();return i&&i.indexOf(this.decimalSeparator1)>-1?e.split(this.decimalSeparator1).length<=2:e.indexOf(this.decimalSeparator1)<0}return e.split(this.decimalSeparator1).length<=2}getSelection(){return this.inputElement.value.substring(this.inputElement.selectionStart??0,this.inputElement.selectionEnd??0)}forecastValue(e){const o=this.inputElement.selectionEnd??0,l=this.inputElement.value;return l.substring(0,this.inputElement.selectionStart??0)+e+l.substring(o)}replaceDecimalSeparator(e){return e.replace(",",this.decimalSeparator).replace(".",this.decimalSeparator)}}return h.\u0275fac=function(e){return new(e||h)(d.Y36(d.SBq))},h.\u0275dir=d.lG2({type:h,selectors:[["","appOnlyNumber",""]],hostBindings:function(e,i){1&e&&d.NdJ("beforeinput",function(l){return i.onBeforeInput(l)})("keydown",function(l){return i.onKeyDown(l)})("paste",function(l){return i.onPaste(l)})("drop",function(l){return i.onDrop(l)})},inputs:{decimal:"decimal",decimalSeparator:"decimalSeparator",decimalSeparator1:"decimalSeparator1",decimalSeparator2:"decimalSeparator2",allowNegatives:"allowNegatives",allowPaste:"allowPaste",negativeSign:"negativeSign",min:"min",max:"max",pattern:"pattern"},features:[d.TTD]}),h})()},75270:(S,w,a)=>{a.d(w,{h:()=>s});var d=a(20553),r=a(65879),h=a(7444);let s=(()=>{class e{constructor(o){this.configService=o}getCurrentVersion(){return d.N.versionTime}getGlobalNotice(){return this.configService.getConfig("globalNotice")}getEnvValue(o){return this.configService.getConfig(o)}getLinkEmbedDocument(o){var l=this.configService.getConfig("docView");return l&&"MICROSOFT"!=l?`https://docs.google.com/viewer?url=${o}&embedded=true`:`https://view.officeapps.live.com/op/embed.aspx?src=${o}`}getVersionMarkNote(o){if(!o)return 1000009;const O=o.match(/ver=(\d+)/);return Number(O?.[1]??1000009)}}return e.\u0275fac=function(o){return new(o||e)(r.LFG(h.V))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},78226:(S,w,a)=>{a.d(w,{s:()=>d});var d=function(r){return r.unknown="unknown",r.xlsx="xlsx",r.image="image",r.jpeg="jpeg",r.doc="doc",r.docx="docx",r.ppt="ppt",r.pptx="pptx",r.pdf="pdf",r.video="video",r.mp4="mp4",r.mov="mov",r.webm="webm",r.quicktime="quicktime",r.audio="audio",r.mp3="mp3",r.wav="wav",r.google_docs="google_docs",r.exam="exam",r.homework="homework",r.powerpoint="powerpoint",r}(d||{})},49821:(S,w,a)=>{a.d(w,{B:()=>e});var d=a(65879),r=a(37734),h=a(75270),s=a(36727);let e=(()=>{class i extends r.Q{onLoad(){setTimeout(()=>{this.loadedEvent.emit(!0)},0)}checkValidLink(){this.whiteListOfficeIframeSrc=this.envService.getLinkEmbedDocument(this.cdnLink)}ngOnChanges(){this.checkValidLink()}ngOnInit(){super.ngOnInit(),this.checkValidLink()}constructor(l){super(),this.envService=l,this.videoMimesType="",this.classNames="",this.styles="",this.loadedEvent=new d.vpe,this.whiteListOfficeIframeSrc=""}}return i.\u0275fac=function(l){return new(l||i)(d.Y36(h.h))},i.\u0275cmp=d.Xpm({type:i,selectors:[["azt-office-embed"]],inputs:{cdnLink:"cdnLink",videoMimesType:"videoMimesType",classNames:"classNames",styles:"styles"},outputs:{loadedEvent:"loadedEvent"},features:[d.qOj,d.TTD],decls:2,vars:6,consts:[["frameborder","0",3,"src","load"]],template:function(l,m){1&l&&(d.TgZ(0,"iframe",0),d.NdJ("load",function(){return m.onLoad()}),d.ALo(1,"safe"),d.qZA()),2&l&&(d.Tol(m.classNames),d.Q6J("src",d.lcZ(1,4,m.whiteListOfficeIframeSrc),d.uOi),d.uIk("style",m.styles,d.Ckj))},dependencies:[s.CR],encapsulation:2}),i})()},15828:(S,w,a)=>{a.d(w,{q:()=>K});var d=a(19347),r=a(72164),h=a(61713),s=a(78226),e=a(65879),i=a(6593),o=a(32965),l=a(96814),m=a(21494),O=a(71646),p=a(72969),f=a(37734);let v=(()=>{class n extends f.Q{constructor(){super(...arguments),this.audioMimesType="",this.loadedEvent=new e.vpe}onLoad(){setTimeout(()=>{this.loadedEvent.emit(!0)},0)}}return n.\u0275fac=function(){let u;return function(c){return(u||(u=e.n5z(n)))(c||n)}}(),n.\u0275cmp=e.Xpm({type:n,selectors:[["azt-audio-embed"]],inputs:{cdnLink:"cdnLink",audioMimesType:"audioMimesType"},outputs:{loadedEvent:"loadedEvent"},features:[e.qOj],decls:3,vars:2,consts:[["controls",""],[3,"src","load"]],template:function(t,c){1&t&&(e.TgZ(0,"audio",0)(1,"source",1),e.NdJ("load",function(){return c.onLoad()}),e.qZA(),e._uU(2," Your browser does not support the audio element.\n"),e.qZA()),2&t&&(e.xp6(1),e.Q6J("src",c.cdnLink,e.LSH),e.uIk("type",c.audioMimesType))},encapsulation:2}),n})();var b=a(49821),_=a(36727);function x(n,u){1&n&&(e.TgZ(0,"div",2)(1,"span",3),e._UZ(2,"azt-loading-ui"),e.qZA(),e.TgZ(3,"span",4),e._uU(4,"Loading..."),e.qZA()())}function C(n,u){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.AsE("",e.lcZ(2,2,"lang_auto_dung_luong"),": ",t.fileMb," MB | ")}}function N(n,u){if(1&n&&(e.TgZ(0,"div",22),e.YNc(1,C,3,4,"span",23),e._uU(2),e.ALo(3,"mytranslate"),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",0!=t.fileMb),e.xp6(1),e.AsE("",e.lcZ(3,3,"lang_auto_loai"),": ",t.fileOption.mimes,"")}}function M(n,u){1&n&&(e.TgZ(0,"div",22),e._uU(1),e.ALo(2,"mytranslate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"lang_auto_dung_luong_03_mb_|_loai__images")))}function P(n,u){if(1&n&&(e.TgZ(0,"a",24),e.O4$(),e.TgZ(1,"svg",16),e._UZ(2,"path",25)(3,"polyline",26)(4,"line",27),e.qZA()()),2&n){const t=e.oxw(2);e.uIk("href",t.rootLink,e.LSH)("download",t.fileOption.name)}}function y(n,u){if(1&n){const t=e.EpF();e.TgZ(0,"azt-audio-embed",34),e.NdJ("onLoad",function(){e.CHM(t);const g=e.oxw(4);return e.KtG(g.onLoad())}),e.qZA()}if(2&n){const t=e.oxw(4);let c;e.Q6J("cdnLink",t.cdnLink)("audioMimesType",null!==(c=t.fileOption.mimes)&&void 0!==c?c:"")}}function L(n,u){if(1&n&&(e.TgZ(0,"div")(1,"div",32),e.YNc(2,y,1,2,"azt-audio-embed",33),e.qZA()()),2&n){const t=e.oxw(3);e.xp6(2),e.Q6J("ngIf",t.cdnLink)}}function I(n,u){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div",35)(2,"azt-video-embed",36),e.NdJ("loadedEvent",function(){e.CHM(t);const g=e.oxw(3);return e.KtG(g.onLoad())}),e.qZA()()()}if(2&n){const t=e.oxw(3);let c;e.xp6(2),e.Q6J("cdnLink",t.cdnLink)("videoMimesType",null!==(c=t.fileOption.mimes)&&void 0!==c?c:"")("videoThumbUrl",t.videoThumbUrl)("styles","width: 100vw; height: 95vh; max-height: calc(100vh - 60px); padding-bottom: 1rem")}}function T(n,u){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div",37)(2,"azt-office-embed",38),e.NdJ("loadedEvent",function(){e.CHM(t);const g=e.oxw(3);return e.KtG(g.onLoad())}),e.qZA()()()}if(2&n){const t=e.oxw(3);e.xp6(2),e.Q6J("cdnLink",t.cdnLink)("styles","width: 100vw; height: 95vh; max-height: calc(100vh - 60px); padding-bottom: 1rem")}}function D(n,u){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div",39)(2,"pdf-viewer",40),e.NdJ("load",function(){e.CHM(t);const g=e.oxw(3);return e.KtG(g.onLoad())}),e.qZA()()()}if(2&n){const t=e.oxw(3);e.xp6(2),e.Q6J("src",t.cdnLink)("show-all",!0)}}function k(n,u){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"div",35)(2,"img",41),e.NdJ("load",function(){e.CHM(t);const g=e.oxw(3);return e.KtG(g.onLoad())}),e.qZA()()()}if(2&n){const t=e.oxw(3);e.xp6(2),e.uIk("src",t.cdnLink,e.LSH)}}function A(n,u){if(1&n&&(e.TgZ(0,"div")(1,"div",35),e._UZ(2,"iframe",42),e.ALo(3,"safe"),e.qZA()()),2&n){const t=e.oxw(3);e.xp6(2),e.Tol("mx-auto"),e.Q6J("src",e.lcZ(3,3,t.cdnLink),e.uOi)}}function Z(n,u){if(1&n&&(e.ynx(0),e.TgZ(1,"div",28)(2,"div",29),e.YNc(3,L,3,1,"div",23),e.YNc(4,I,3,4,"div",23),e.YNc(5,T,3,2,"div",23),e.YNc(6,D,3,2,"div",23),e.YNc(7,k,3,1,"div",23),e.YNc(8,A,4,5,"div",23),e._UZ(9,"div",30),e.qZA(),e._UZ(10,"div",31),e.qZA(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(3),e.Q6J("ngIf","audio"===t.typeFile),e.xp6(1),e.Q6J("ngIf","video"===t.typeFile),e.xp6(1),e.Q6J("ngIf","officeapps"===t.typeFile),e.xp6(1),e.Q6J("ngIf","pdf"===t.typeFile),e.xp6(1),e.Q6J("ngIf","image"===t.typeFile),e.xp6(1),e.Q6J("ngIf","google_docs"===t.typeFile)}}function U(n,u){if(1&n){const t=e.EpF();e.TgZ(0,"div",28)(1,"div",29)(2,"div",43)(3,"img",44),e.NdJ("load",function(){e.CHM(t);const g=e.oxw(2);return e.KtG(g.onLoad())}),e.qZA()()()()}if(2&n){const t=e.oxw(2);e.xp6(3),e.uIk("src",t.fileOption.url,e.LSH)}}const z=function(n){return{flex:n}};function B(n,u){if(1&n){const t=e.EpF();e.TgZ(0,"div",5)(1,"div",6)(2,"div",7)(3,"div",8)(4,"div",9),e.ALo(5,"convertCdnLinkOfGitHub"),e.qZA()(),e.TgZ(6,"div",10),e._uU(7),e.qZA(),e.YNc(8,N,4,5,"div",11),e.YNc(9,M,3,3,"div",11),e.qZA(),e.TgZ(10,"div",12)(11,"span",13),e.YNc(12,P,5,2,"a",14),e.qZA(),e.TgZ(13,"button",15),e.NdJ("click",function(){e.CHM(t);const g=e.oxw();return e.KtG(g.btnClosePreview())}),e.O4$(),e.TgZ(14,"svg",16),e._UZ(15,"line",17)(16,"line",18),e.qZA()()()(),e.kcU(),e.TgZ(17,"div",19),e.YNc(18,Z,11,6,"ng-container",20),e.YNc(19,U,4,1,"ng-template",null,21,e.W1O),e.qZA()()}if(2&n){const t=e.MAs(20),c=e.oxw();e.xp6(2),e.Q6J("ngClass",e.VKq(11,z,""==c.fileOption.name)),e.xp6(2),e.Udp("background-image",e.lcZ(5,9,"images/documents.png")),e.xp6(3),e.Oqu(c.fileOption.name),e.xp6(1),e.Q6J("ngIf",c.fileOption.mimes),e.xp6(1),e.Q6J("ngIf",!c.fileOption.mimes),e.xp6(3),e.Q6J("ngIf",c.showDownloadIcon),e.xp6(6),e.Q6J("ngIf",!c.viewFullImageWithScroll)("ngIfElse",t)}}let K=(()=>{class n extends r.e{onLoad(){this.stopStatusObj()}initData(){let t=this.fileOption?.size?Number(this.fileOption.size):0,c=this.fileOption?.mimes?this.fileOption.mimes:"";this.cdnLink=this.cdnService.getMyCdn(this.fileOption?.url??""),this.rootLink=this.cdnLink,this.fileMb=this.getFileMB(t),this.typeFile=(0,h.Z9)(c),(0,h.xN)(this.cdnLink)&&(this.typeFile="video"),(0,h.Lm)(this.cdnLink)&&(this.typeFile="google_docs"),setTimeout(()=>{this.stopStatusObj()},200)}removeClassCss(){document.body.classList.remove("overflow-hidden")}btnClosePreview(){this.removeClassCss(),this.dialogRef.close(!1)}getFileMB(t){return t&&t>0?(t/=1048576).toFixed(2):0}ngOnInit(){if(super.ngOnInit(),document.body.classList.add("overflow-hidden"),this.videoThumbUrl=this.cdnService.convertCdnLinkOfGitHub("images/video-thumb.png"),this.initStatusObj(),this.initData(),this.fileOption?.type===this.allDocumentTypes.google_docs)return window.open(this.fileOption?.url,"_blank")?.focus(),void this.dialogRef.close()}constructor(t,c,g,E){super(E,g),this.dom=t,this.cdnService=c,this.dialogRef=g,this.viewFullImageWithScroll=!1,this.showDownloadIcon=!0,this.typeFile="",this.cdnLink="",this.rootLink="",this.fileMb=0,this.videoThumbUrl="",this.allDocumentTypes=s.s,this.fileOption=E.fileOption,this.viewFullImageWithScroll=E.viewFullImageWithScroll??!1,this.showDownloadIcon=E.showDownloadIcon??this.showDownloadIcon}ngOnDestroy(){this.removeClassCss(),super.ngOnDestroy()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(i.H7),e.Y36(o.E),e.Y36(d.so,8),e.Y36(d.WI,8))},n.\u0275cmp=e.Xpm({type:n,selectors:[["azt-preview-media-new"]],features:[e.qOj],decls:2,vars:2,consts:[["class","loading-block",4,"ngIf"],["class","box h-full","style","border-radius:0px",4,"ngIf"],[1,"loading-block"],[1,"w-4","h-4","inline-block"],[1,"sr-only","ml-2"],[1,"box","h-full",2,"border-radius","0px"],[1,"flex","fixed","top-0","pt-3","border-b","border-slate-200/60","dark:border-darkmode-400","items-center","w-full"],[1,"file-preview__header-left",2,"align-items","center",3,"ngClass"],["title","",1,"avatar","avatar--xs"],[1,"avatar-img",2,"background-size","cover"],[1,"file-preview__header__title"],["class","file-preview__header__send-time",4,"ngIf"],[1,"file-preview__header-right"],[1,"mr-4"],["class","btn btn-outline-primary btn-transparent","target","_blank",4,"ngIf"],["azt-track-service","azt-preview-media-c4Ztzr2oIZj",1,"btn","btn-outline-secondary","btn-transparent",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"w-6","h-6"],["x1","18","y1","6","x2","6","y2","18"],["x1","6","y1","6","x2","18","y2","18"],[1,"file-preview__main","flx",2,"overflow-x","auto","flex","1 1 auto"],[4,"ngIf","ngIfElse"],["viewFullImage",""],[1,"file-preview__header__send-time"],[4,"ngIf"],["target","_blank",1,"btn","btn-outline-primary","btn-transparent"],["d","M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"],["points","7 10 12 15 17 10"],["x1","12","y1","15","x2","12","y2","3"],[1,"file-preview__main-iframe","mx-auto"],[1,"file-preview__notify"],[1,"tool-hide"],[1,"file-preview__main-comments"],[1,"container-fluid","mt-3"],[3,"cdnLink","audioMimesType","onLoad",4,"ngIf"],[3,"cdnLink","audioMimesType","onLoad"],[1,"pl-2","pr-2","mt-3"],[3,"cdnLink","videoMimesType","videoThumbUrl","styles","loadedEvent"],[1,"pl-2","pr-2","mp-0"],[3,"cdnLink","styles","loadedEvent"],[1,"container-fluid","mp-0"],[2,"width","100vw","height","95vh","max-height","calc(100vh - 60px)","padding-bottom","1rem","display","block",3,"src","show-all","load"],["alt","Responsive image",1,"img-fluid","image-preview",2,"max-height","calc(100vh - 80px)","padding-bottom","1rem",3,"load"],["width","850","height","600","frameborder","0","allowfullscreen","",3,"src"],[1,"pl-2","pr-2","mt-3","block-img"],[1,"img-fluid","image-preview",3,"load"]],template:function(t,c){1&t&&(e.YNc(0,x,5,0,"div",0),e.YNc(1,B,21,13,"div",1)),2&t&&(e.Q6J("ngIf",c.statusObj.loading),e.xp6(1),e.Q6J("ngIf",null!=c.fileOption&&!c.statusObj.loading))},dependencies:[l.mk,l.O5,m.rQ,O.n,p.f,v,b.B,_.JV,_.CR,_.Bo],styles:[".file-preview[_ngcontent-%COMP%]{position:fixed;width:100%;height:100vh;z-index:9999;display:flex;flex-direction:column;left:0;top:0;border-radius:0}.block-img[_ngcontent-%COMP%]{width:100vw;height:90vh;text-align:center;overflow-y:auto}.loading-block[_ngcontent-%COMP%]{z-index:1000;width:100%;display:flex;justify-content:center;align-items:center;left:0;top:0;position:fixed;height:100%;min-height:100vh}.file-preview__main[_ngcontent-%COMP%]{margin-top:65px;width:100%;min-height:100%;min-width:277px;display:flex;position:fixed}.file-preview__header[_ngcontent-%COMP%]{padding-top:10px;height:65px;box-shadow:0 2px 4px #0003;position:fixed;align-items:center;z-index:1;top:0;width:100%}.flx-sp-btw[_ngcontent-%COMP%]{justify-content:space-between}.flx[_ngcontent-%COMP%]{display:flex;flex-flow:row nowrap}.file-preview__header-left[_ngcontent-%COMP%]{margin-left:20px;margin-right:10px;margin-bottom:12px;flex:1 1 50px;min-width:0}.file-preview__header-left[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{float:left;margin-right:10px}.avatar--xs[_ngcontent-%COMP%]{width:40px;height:40px;font-size:17px}.avatar[_ngcontent-%COMP%]{position:relative;contain:layout size style}.avatar--xs[_ngcontent-%COMP%] > .avatar-img[_ngcontent-%COMP%]{width:40px;height:40px}.avatar-img[_ngcontent-%COMP%]{border-radius:100%}.file-preview__header__title[_ngcontent-%COMP%]{font-size:15px;font-weight:500}.file-preview__header__send-time[_ngcontent-%COMP%], .file-preview__header__title[_ngcontent-%COMP%]{white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.file-preview__header__send-time[_ngcontent-%COMP%]{padding-top:2px;font-size:13px;color:#a0a0a0}.file-preview__header-right[_ngcontent-%COMP%]{margin-right:15px;white-space:nowrap;display:flex}.file-preview__controls-container[_ngcontent-%COMP%]{margin-right:40px}.mp-0[_ngcontent-%COMP%]{margin:0!important;padding:0!important}"]}),n})()},84253:(S,w,a)=>{a.d(w,{w:()=>l});var d=a(69862),r=a(65879),h=a(37734),s=a(61713),e=a(63120),i=a(82228),o=a(94126);let l=(()=>{class m extends h.Q{uploadFile(p,f){return new Promise(v=>{this.checkCompressImage(p,b=>{this.showProgress?this.apiUploadService.commonUploadFileProgress(this.uploadToCdnMenu,b,"").subscribe(_=>{if(_.type!==d.dt.UploadProgress)if(1===_.success){const x={..._.data};v(x)}else this.showErrorSnack(this.commonService.translateToKeyParam("lang_auto_khong_upload_duoc_tep_tin_vui_long_thu_lai_sau",_.message??"none")),v(null);else{let x=(_.loaded??0)/(_.total??1)*100,C=this.fileUploadQueue.find(N=>N.uuid==f);C?C.uploadProgress=x:this.fileUploadQueue.push({uuid:f,uploadProgress:0,fileName:p.name})}}):this.apiUploadService.commonUploadFile(this.uploadToCdnMenu,b,"").subscribe(_=>{if(_.type!==d.dt.UploadProgress)if(1===_.success){const x={..._.data};v(x)}else this.showErrorSnack(this.commonService.translateToKeyParam("lang_auto_khong_upload_duoc_tep_tin_vui_long_thu_lai_sau",_.message??"none")),v(null)})})})}onFileSelected(p){const f=p.target,v=f.files;v&&(this.emitFile(v),f.files=null)}onDrop(p){this.emitFile(p)}emitFile(p){if(!this.isDisabled)return this.showErrorSnack(this.commonService.translateString("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay"));if(this.limitSize=this.limitSize>200?200:this.limitSize,Array.from(p).find(_=>(0,s.EO)(_.size)>=this.limitSize))return this.showErrorSnack(this.commonService.translateToKeyParam("lang_auto_vui_long_chon_tep_co_kich_thuoc_nho_hon",this.limitSize.toString(),"MB"));if(Array.from(p).find(_=>this.isNotSupportedFile(_)))return this.showErrorSnack(this.commonService.translateToKeyParam("lang_auto_chua_ho_tro_dinh_dang",this.notSupportedFile));this.isUploadFile=!0;const b=Array.from(p).map(_=>this.uploadFile(_,this.uuidService.getUuid()));this.isUploading.emit(this.isUploadFile),Promise.all(b).then(_=>{this.isUploadFile=!1,this.isUploading.emit(this.isUploadFile);const x=[];_.map(C=>null!=C&&x.push(C)),this.emitUploadComplete(x)})}checkCompressImage(p,f){this.allowCompressImage?(0,s.hv)(p).then(v=>{f(v)}):f(p)}isNotSupportedFile(p){const f=[this.notSupportedFile],v=p.name.split(".").pop()?.toLowerCase();return f.includes(`.${v}`)}constructor(p,f){super(),this.apiUploadService=p,this.uuidService=f,this.isDisabled=!0,this.notSupportedFile=e.lN.NONE,this.limitSize=200,this.allowCompressImage=!0,this.showProgress=!1,this.isUploading=new r.vpe,this.isUploadFile=!1,this.fileUploadQueue=[]}}return m.\u0275fac=function(p){return new(p||m)(r.Y36(i.W),r.Y36(o.E))},m.\u0275cmp=r.Xpm({type:m,selectors:[["ng-component"]],inputs:{fileType:"fileType",uploadToCdnMenu:"uploadToCdnMenu",isDisabled:"isDisabled",notSupportedFile:"notSupportedFile",limitSize:"limitSize",allowCompressImage:"allowCompressImage",showProgress:"showProgress"},outputs:{isUploading:"isUploading"},features:[r.qOj],decls:0,vars:0,template:function(p,f){},encapsulation:2}),m})()},63120:(S,w,a)=>{a.d(w,{AZ:()=>r,j6:()=>d,lN:()=>h});var d=function(s){return s.HOMEWORK="homework",s.EXAM_QUESTIONS="exam_questions",s.GET_PUBLIC_UPLOAD_URL_FOR_ID_NUMBER="get_public_upload_url_for_id_number",s.GET_PUBLIC_UPLOAD_URL_FOR_DOCUMENT_BANK="get_public_upload_url_for_document_bank",s.FRONT_EXAM_MOBILE_QR="front_exam_mobile_qr",s.FRONT_HOMEWORK="front_homework",s.FRONT_EXAM="front_exam",s.AVATAR="avatar",s.BUSINESS_PLUGINS="business_plugins",s.BUSINESS_NEWS="business_news",s.EXAM_EDITOR="exam_editor",s.ADMIN="admin",s}(d||{}),r=function(s){return s.ALL="*",s.WORD=".doc, .docx",s.PPT=".ppt, .pptx",s.EXCEL=".xls, .xlsx",s.PDF=".pdf",s.VIDEO="video/*",s.IMAGE="image/*, capture=camera",s.AUDIO="audio/*",s.SYNTHETIC=".doc, .docx, .ppt, .pptx, .xls, .xlsx, .pdf, video/*, image/*, audio/*",s.AZT=".azt",s}(r||{}),h=function(s){return s.NONE="",s.WMV=".wmv",s}(h||{})}}]);