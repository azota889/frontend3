"use strict";(self.webpackChunkBalacoClient=self.webpackChunkBalacoClient||[]).push([[8133],{50334:(I,j,a)=>{a.d(j,{C:()=>f});var u=a(59640);class f extends u.H{constructor(){super(...arguments),this.nodeObjs=[]}searchByText(i){this.nodeObjs=(i=this.standardSearchText(i)).trim()?this.doSearchByText(i,this.nodeObjs,[]):this.showAndExpandAll(this.nodeObjs)}doSearchByText(i,_,m){for(var h of _){h.isShow=!1;let r=this.standardSearchText(h.text);(i.includes(r)||r.includes(i))&&(h.isShow=!0,h.isExpand=!0,m.forEach(d=>{d.isShow=!0,d.isExpand=!0})),h.children.length&&(h.children=this.doSearchByText(i,h.children,m.concat(h)))}return _}showAndExpandAll(i){for(var _ of i)_.isShow=!0,_.isExpand=!0,_.children=this.showAndExpandAll(_.children);return i}expand(i){i.isExpand=!0}collapse(i){i.isExpand=!1}standardSearchText(i){return i=i.toLowerCase(),i=this.commonService.removeSpecialStringInSearch(i),this.commonService.convertVietnameseToEnglish(i)}}},7908:(I,j,a)=>{a.d(j,{n:()=>i});var u=a(48891),f=a(85710),e=a(17776);let i=(()=>{var _;class m{constructor(){this.subscriptions=new f.yU,this.aiElearningService=(0,u.WQX)(e.T5),this.cacheData=[]}getKnowledgeByApi(r,d,g,s,v,T){let C=this.getCacheKey(r,d,g,s),w=this.cacheData.find(p=>p.cacheKey==C);if(null!=w)return v(w.nodes);this.subscriptions.add(this.aiElearningService.aiApiV1ElearningGetKnowledgeTreeGet(r,d,g,s||void 0).subscribe({next:p=>{this.cacheData.push({cacheKey:C,nodes:p.nodes??[]}),v(p.nodes??[])},error:p=>T(p)}))}getObjByObjectiveId(r,d){for(var g of r){if(g.objectiveId==d)return g;let s=this.getObjByObjectiveId(g.children,d);if(null!=s)return s}}getObjById(r,d){for(var g of r){if(g.id==d)return g;let s=this.getObjById(g.children,d);if(null!=s)return s}}getObjByKnowledgeIdOrObjectiveId(r,d,g){for(var s of r){if(s.knowledgeId==d||s.objectiveId==g)return s;let v=this.getObjByKnowledgeIdOrObjectiveId(s.children,d,g);if(null!=v)return v}}getCacheKey(r,d,g,s){return`${r}_${d}_${g?"true":"false"}_${s??0}`}ngOnDestroy(){this.subscriptions.unsubscribe()}}return(_=m).\u0275fac=function(r){return new(r||_)},_.\u0275prov=u.jDH({token:_,factory:_.\u0275fac,providedIn:"root"}),m})()},98133:(I,j,a)=>{a.d(j,{i:()=>R});var u=a(89163),f=a(33887),e=a(48891),i=a(2915),_=a(32099),m=a(50334),h=a(7908),r=a(54460),d=a(15343),g=a(18718),s=a(76975);const v=t=>({nodeObjs:t}),T=(t,l)=>({"text-pending":t," link-color-hover":l});function C(t,l){if(1&t&&e.nrm(0,"azt-loading-effect",3),2&t){const o=e.XpG();e.Y8G("currentStatusObj",o.statusObj)}}function w(t,l){1&t&&e.eu8(0)}function p(t,l){if(1&t&&(e.j41(0,"table")(1,"tbody"),e.DNE(2,w,1,0,"ng-container",4),e.k0s()()),2&t){const o=e.XpG(),n=e.sdS(4);e.R7$(2),e.Y8G("ngTemplateOutlet",n)("ngTemplateOutletContext",e.eq3(2,v,o.nodeObjs))}}function z(t,l){1&t&&e.nrm(0,"lucide-icon",13)}function E(t,l){1&t&&e.nrm(0,"lucide-icon",14)}function A(t,l){if(1&t&&(e.j41(0,"i"),e.DNE(1,z,1,0,"lucide-icon",11)(2,E,1,0,"lucide-icon",12),e.k0s()),2&t){const o=e.XpG().$implicit;e.R7$(),e.Y8G("ngIf",o.isExpand),e.R7$(),e.Y8G("ngIf",!o.isExpand)}}function x(t,l){1&t&&(e.j41(0,"i"),e.nrm(1,"lucide-icon",15),e.k0s())}function y(t,l){1&t&&e.eu8(0)}function D(t,l){if(1&t&&(e.qex(0),e.DNE(1,y,1,0,"ng-container",4),e.bVm()),2&t){const o=e.XpG().$implicit;e.XpG(3);const n=e.sdS(4);e.R7$(),e.Y8G("ngTemplateOutlet",n)("ngTemplateOutletContext",e.eq3(2,v,o.children))}}function k(t,l){if(1&t){const o=e.RV6();e.qex(0),e.j41(1,"tr",7)(2,"td")(3,"div",8),e.bIt("click",function(){const c=e.eBV(o).$implicit,b=e.XpG(3);return e.Njj(b.clickToNode(c))}),e.DNE(4,A,3,2,"i",5)(5,x,2,0,"i",5),e.j41(6,"label",9),e.nrm(7,"span",10),e.nI1(8,"mathJaxContent"),e.nI1(9,"async"),e.nI1(10,"safeContentQuestion"),e.k0s()()()(),e.DNE(11,D,2,4,"ng-container",5),e.bVm()}if(2&t){const o=l.$implicit;e.R7$(),e.Y8G("hidden",!o.isShow),e.R7$(),e.xc7("padding-left",14*(o.level+1),"px"),e.R7$(),e.Y8G("ngClass",e.l_i(14,T,o.isSelected,!o.isSelected)),e.R7$(),e.Y8G("ngIf",o.children.length),e.R7$(),e.Y8G("ngIf",!o.children.length),e.R7$(2),e.Y8G("innerHTML",e.bMT(10,12,e.bMT(9,10,e.bMT(8,8,"L"+(o.level+1)+". "+o.text))),e.npT),e.R7$(4),e.Y8G("ngIf",o.isExpand)}}function B(t,l){if(1&t&&(e.qex(0),e.DNE(1,k,12,17,"ng-container",6),e.bVm()),2&t){const o=l.$implicit;e.R7$(),e.Y8G("ngForOf",o)}}function G(t,l){if(1&t&&e.DNE(0,B,2,1,"ng-container",5),2&t){const o=l.nodeObjs,n=e.XpG();e.Y8G("ngIf",n.asTemplateDataObj(o))}}let $=(()=>{var t;class l extends m.C{constructor(){super(...arguments),this.allowSelectKnowledgeOrObjective="only_objective",this.selectKnowledgeOrObjectiveEvent=new e.bkB,this.nodeObjs=[],this.sAztKnowledgeObjectiveService=(0,e.WQX)(h.n)}clickToNode(n){return"only_objective"==this.allowSelectKnowledgeOrObjective&&n.data.objectiveId||"knowledge_or_objective"==this.allowSelectKnowledgeOrObjective&&(n.data.knowledgeId||n.data.objectiveId)?this.selectKnowledgeOrObjectiveEvent.emit(n.data):void(n.isExpand?this.collapse(n):this.expand(n))}asTemplateDataObj(n){return n}initData(n,c,b){this.initStatusObj(),this.sAztKnowledgeObjectiveService.getKnowledgeByApi(n,c,!1,b,O=>{this.nodeObjs=this.standardTreeNodes(O,0),this.stopStatusObj()},O=>this.errorStatusObj(O,!0))}standardTreeNodes(n,c){let b=[];return n.forEach(O=>{let K=!1;this.selectedObj?.knowledgeId&&O.knowledgeId==this.selectedObj.knowledgeId&&(K=!0),this.selectedObj?.objectiveId&&O.objectiveId==this.selectedObj.objectiveId&&(K=!0);let S={level:c,typeNode:O.objectiveId?"objective":"knowledge",isExpand:!0,isShow:!0,isSelected:K,text:O.title,data:{...O,children:[]},children:[]};S.children=this.standardTreeNodes(O.children,c+1),b.push(S)}),b}ngOnChanges(n){n.searchContent&&this.searchByText(this.searchContent??"")}ngOnInit(){super.ngOnInit(),this.initData(this.levelId,this.subjectId,this.bookId)}}return(t=l).\u0275fac=(()=>{let o;return function(c){return(o||(o=e.xGo(t)))(c||t)}})(),t.\u0275cmp=e.VBU({type:t,selectors:[["coazt-knowledge-objective-tree"]],inputs:{levelId:"levelId",subjectId:"subjectId",bookId:"bookId",selectedObj:"selectedObj",searchContent:"searchContent",allowSelectKnowledgeOrObjective:"allowSelectKnowledgeOrObjective"},outputs:{selectKnowledgeOrObjectiveEvent:"selectKnowledgeOrObjectiveEvent"},features:[e.Vt3,e.OA$],decls:5,vars:2,consts:[["doneLoading",""],["recursiveListTmpl",""],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"hidden"],[1,"clickable",3,"click","ngClass"],[1,"form-check-label",2,"line-height","1.5"],[3,"innerHTML"],["name","chevron-down","size","14",4,"ngIf"],["name","chevron-right","size","14",4,"ngIf"],["name","chevron-down","size","14"],["name","chevron-right","size","14"],["name","dot","size","14"]],template:function(n,c){if(1&n&&e.DNE(0,C,1,1,"azt-loading-effect",2)(1,p,3,4,"ng-template",null,0,e.C5r)(3,G,1,1,"ng-template",null,1,e.C5r),2&n){const b=e.sdS(2);e.Y8G("ngIf",c.statusObj.loading)("ngIfElse",b)}},dependencies:[r.YU,r.Sq,r.bT,r.T3,d.WGl,g.K,r.Jj,s.km,s.ep],encapsulation:2}),l})(),R=(()=>{var t;class l extends f._{searchByText(n){this.searchContent=n}selectKnowledgeOrObjective(n){this.dialogRef.close(n)}btnCloseDialog(){this.dialogRef.close(void 0)}constructor(n,c){super(c,n),this.dialogRef=n,this.data=c}}return(t=l).\u0275fac=function(n){return new(n||t)(e.rXU(u.CP,8),e.rXU(u.Vh,8))},t.\u0275cmp=e.VBU({type:t,selectors:[["coazt-knowledge-objective-dialog"]],features:[e.Vt3],decls:12,vars:14,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"box","p-3"],[1,"pb-3"],[3,"onSearch","isServerSearch","placeholder"],[3,"minHeight"],[3,"selectKnowledgeOrObjectiveEvent","levelId","subjectId","bookId","selectedObj","searchContent","allowSelectKnowledgeOrObjective"],[1,"text-right","border-t","border-slate-200","dark:border-darkmode-400","p-3"],[1,"btn","btn-secondary","w-24",3,"click"]],template:function(n,c){1&n&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"azt-search-box",4),e.nI1(5,"mytranslate"),e.bIt("onSearch",function(O){return c.searchByText(O.searchObj)}),e.k0s()(),e.j41(6,"azt-mat-dialog-content",5)(7,"coazt-knowledge-objective-tree",6),e.bIt("selectKnowledgeOrObjectiveEvent",function(O){return c.selectKnowledgeOrObjective(O)}),e.k0s()()(),e.j41(8,"div",7)(9,"button",8),e.bIt("click",function(){return c.btnCloseDialog()}),e.EFF(10),e.nI1(11,"mytranslate"),e.k0s()()()()),2&n&&(e.R7$(4),e.Y8G("isServerSearch",!1)("placeholder",e.bMT(5,10,"lang_common_search_by_name")),e.R7$(2),e.Y8G("minHeight","calc(var(--vh, 1vh) * 100 - 300px)"),e.R7$(),e.Y8G("levelId",c.data.levelId)("subjectId",c.data.subjectId)("bookId",c.data.bookId)("selectedObj",c.data.selectedObj)("searchContent",null==c.searchContent?null:c.searchContent.searchContent)("allowSelectKnowledgeOrObjective",c.data.allowSelectKnowledgeOrObjective),e.R7$(3),e.SpI(" ",e.bMT(11,12,"lang_button_close")," "))},dependencies:[i.U,_.W,$,s.wp],encapsulation:2}),l})()}}]);