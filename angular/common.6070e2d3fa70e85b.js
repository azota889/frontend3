"use strict";(self.webpackChunkBalacoClient=self.webpackChunkBalacoClient||[]).push([[2076],{88089:(k,v,s)=>{s.d(v,{J:()=>g});var b=s(27691),O=s(51698),n=s(64198),u=s(48891),x=s(62095),f=s(41426),m=s(63709);let g=(()=>{var d;class h{replaceImageInContent(e){return new O.c(t=>{if(e.includes("<img ")){var a=this.findAllSubString(e,"<img"),o=[],i=[];a.forEach(r=>{var c=e.indexOf("src=",r),l=e.indexOf('"',Number(c)+5),p=e.substring(Number(c)+5,Number(l)+1);p.includes(";base64")?o.push({oldUrl:p}):p.includes("blob:")&&i.push({oldUrl:p})}),o.length>0?this.reUploadBase64File(o,(r,c)=>{null==c?i&&i.length>0?this.reUploadBlobFile(i,(l,p)=>{null!=p?(e=this.replaceHomeworkContent(e,r),e=this.replaceHomeworkContent(e,l),t.next({errorMessage:void 0,content:e}),t.complete()):(t.next({errorMessage:p,content:e}),t.complete())}):(e=this.replaceHomeworkContent(e,r),t.next({errorMessage:void 0,content:e}),t.complete()):(t.next({errorMessage:c,content:e}),t.complete())}):i.length>0?this.reUploadBlobFile(i,(r,c)=>{null==c?(e=this.replaceHomeworkContent(e,r),t.next({errorMessage:void 0,content:e}),t.complete()):(t.next({errorMessage:c,content:e}),t.complete())}):(e=this.replaceHomeworkContent(e,[]),t.next({errorMessage:void 0,content:e}),t.complete())}else t.next({errorMessage:void 0,content:e}),t.complete()})}replaceHomeworkContent(e,t){return t.length>0&&t.forEach(a=>{e=e.replace(a.oldUrl??"  ",a.newUrl+'" class="w-100 img-fluid"')}),e}findAllSubString(e,t){for(var a=0,o=0,i=[];e.indexOf(t,a)>-1;)o=e.indexOf(t,a),i.push(o),a=o+t.length;return i}getTypeFile(e){var t=e.indexOf(";");return e.substring(5,t)}getFileName(e){var t=e.split("").reverse().join(""),a=t.indexOf(";"),o=t.indexOf("/",a);return t.substring(a,o).split("").reverse().join("")}convertBlobToBase64(e){return new Promise(t=>{var a=new Image;a.crossOrigin="Anonymous",a.addEventListener("load",function(){var o=document.createElement("canvas"),i=o.getContext("2d");o.width=a.width,o.height=a.height,i?.drawImage(a,0,0);var r=o.toDataURL("image/png");t(r)},!1),a.src=e})}reUploadBase64File(e,t){if(e&&e.length>0){let r,i=e.length;for(var a=[],o=0;o<e.length;o++){const c=e[o],l=c.oldUrl?.substring(0,c.oldUrl.length-1);this.startUploadBlobFile(c,l??"",[],(p,y)=>{null==y?a=a.concat(p):r=y,i-=1,0==i&&t(a,r)})}}else t([],"lang_auto_khong_upload_duoc_anh_vui_long_thu_lai_sau")}reUploadBlobFile(e,t){if(e&&e.length>0){let r,i=e.length;for(var a=[],o=0;o<e.length;o++){const c=e[o],l=c?.oldUrl?.substring(0,c.oldUrl.length-1);this.convertBlobToBase64(l??"").then(p=>{this.startUploadBlobFile(c,p,[],(y,A)=>{null==A?a=a.concat(y):r=A,i-=1,0==i&&t(a,r)})})}}else t([],"lang_auto_khong_upload_duoc_anh_vui_long_thu_lai_sau")}startUploadBlobFile(e,t,a,o){if(t&&""!=t){var i=this.getTypeFile(t),r=this.myPdfService.b64toFile(t,this.getFileName(i),i);(0,n.w4)(r).then(c=>{this.apiUploadService.uploadToCdnForHomework(c).subscribe(l=>{if(l.type!=b.hv.UploadProgress)if(1==l.success){var p={...e,newUrl:l.data?.url??""};a.push(p),o(a,void 0)}else o(a,this.commonService.translateToKeyParam("lang_auto_khong_upload_duoc_anh_vui_long_thu_lai_sau_loi",l.message??"none"))})})}else o(a,"lang_auto_khong_upload_duoc_anh_vui_long_thu_lai_sau")}constructor(e,t,a){this.commonService=e,this.apiUploadService=t,this.myPdfService=a}}return(d=h).\u0275fac=function(e){return new(e||d)(u.KVO(x.R),u.KVO(f.T),u.KVO(m.C))},d.\u0275prov=u.jDH({token:d,factory:d.\u0275fac,providedIn:"root"}),h})()},6152:(k,v,s)=>{s.d(v,{b:()=>e});var b=s(10710),O=s(59640),n=s(48891),u=s(9691),x=s(54460),f=s(65162),m=s(76975);const g=t=>[t],d=t=>({backto:t});function h(t,a){if(1&t&&(n.qex(0),n.j41(1,"div",3)(2,"div",4)(3,"b"),n.EFF(4),n.nI1(5,"mytranslate"),n.k0s(),n.EFF(6),n.nI1(7,"formatFullDateTimeByUserUnitPipe"),n.j41(8,"span",5),n.EFF(9),n.nI1(10,"mytranslate"),n.nI1(11,"mytranslate"),n.k0s()(),n.j41(12,"a",6),n.nI1(13,"navigationLocalize"),n.EFF(14),n.nI1(15,"mytranslate"),n.k0s()(),n.bVm()),2&t){const o=n.XpG(2);n.R7$(4),n.SpI("",n.bMT(5,9,"lang_business_config_billing_end_time"),":"),n.R7$(2),n.SpI(" ",n.bMT(7,11,o.vipAccountObj.endTime)," ( "),n.R7$(3),n.LHq("",o.vipAccountObj.subscriptionTimeDtoObj.days," ",n.bMT(10,13,"lang_auto_day"),", ",o.vipAccountObj.subscriptionTimeDtoObj.hours," ",n.bMT(11,15,"lang_auto_clock"),")"),n.R7$(3),n.Y8G("routerLink",n.eq3(21,g,n.bMT(13,17,"/auth/vip-packages/"+(o.type===o.vipPackageType.STUDENT?"studentVip":"teacherVip"))))("queryParams",n.eq3(23,d,o.backToLink)),n.R7$(2),n.SpI(" ",n.bMT(15,19,"lang_azt_renew_now")," ")}}function _(t,a){if(1&t&&(n.j41(0,"div",1),n.DNE(1,h,16,25,"ng-container",2),n.k0s()),2&t){const o=n.XpG();n.R7$(),n.Y8G("ngIf",o.vipAccountObj.isVipTeacher&&o.type===o.vipPackageType.TEACHER||o.vipAccountObj.isVipStudent&&o.type===o.vipPackageType.STUDENT)}}let e=(()=>{var t;class a extends O.H{getData(){this.checkVipAccountService.getVipInfo(this.type,(i,r)=>{if(null!=r)return this.errorStatusObj(r);this.vipAccountObj=i?.vipSubscriptionObj,this.successStatusObj(),this.vipAccountObj&&(this.vipAccountObj.subscriptionTimeDtoObj=this.sAztTimeService.getDayHourMinuteOfSubtract(this.vipAccountObj?.endTime),(this.vipAccountObj.subscriptionTimeDtoObj.days<0||this.vipAccountObj.subscriptionTimeDtoObj.hours<0||this.vipAccountObj.subscriptionTimeDtoObj.minutes<0)&&(this.vipAccountObj.subscriptionTimeDtoObj={days:0,hours:0,minutes:0}))})}ngOnInit(){super.ngOnInit(),this.backToLink=this.type===this.vipPackageType.TEACHER?"/admin/dashboard":"/student/classroom/0",this.getData()}constructor(i){super(),this.sAztTimeService=i,this.vipPackageType=b.W5,this.backToLink=""}}return(t=a).\u0275fac=function(i){return new(i||t)(n.rXU(u.F))},t.\u0275cmp=n.VBU({type:t,selectors:[["azota-vip-package-warning-box"]],inputs:{type:"type"},features:[n.Vt3],decls:1,vars:1,consts:[["class","p-2 box",4,"ngIf"],[1,"p-2","box"],[4,"ngIf"],[1,"flex","items-center"],[1,"mr-auto"],[1,"text-danger"],["azt-track-service","azota-business-package-expired-v3CxKNRMa",1,"btn","btn-sm","btn-outline-primary","px-2","py-1",3,"routerLink","queryParams"]],template:function(i,r){1&i&&n.DNE(0,_,2,1,"div",0),2&i&&n.Y8G("ngIf",r.vipAccountObj&&r.vipAccountObj.subscriptionTimeDtoObj&&r.vipAccountObj.subscriptionTimeDtoObj.days<=10&&r.vipAccountObj.subscriptionTimeDtoObj.days>0)},dependencies:[x.bT,f.Wk,m.F2,m.wp,m.Rr],encapsulation:2}),a})()},18470:(k,v,s)=>{s.r(v),s.d(v,{conf:()=>d,language:()=>h});var b=s(9672),O=Object.defineProperty,n=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,x=Object.prototype.hasOwnProperty,f=(_,e,t,a)=>{if(e&&"object"==typeof e||"function"==typeof e)for(let o of u(e))!x.call(_,o)&&o!==t&&O(_,o,{get:()=>e[o],enumerable:!(a=n(e,o))||a.enumerable});return _},g={};f(g,b,"default");var d={wordPattern:/(-?\d*\.\d\w*)|([^\`\~\!\@\#\%\^\&\*\(\)\-\=\+\[\{\]\}\\\|\;\:\'\"\,\.\<\>\/\?\s]+)/g,comments:{lineComment:"//",blockComment:["/*","*/"]},brackets:[["{","}"],["[","]"],["(",")"]],onEnterRules:[{beforeText:/^\s*\/\*\*(?!\/)([^\*]|\*(?!\/))*$/,afterText:/^\s*\*\/$/,action:{indentAction:g.languages.IndentAction.IndentOutdent,appendText:" * "}},{beforeText:/^\s*\/\*\*(?!\/)([^\*]|\*(?!\/))*$/,action:{indentAction:g.languages.IndentAction.None,appendText:" * "}},{beforeText:/^(\t|(\ \ ))*\ \*(\ ([^\*]|\*(?!\/))*)?$/,action:{indentAction:g.languages.IndentAction.None,appendText:"* "}},{beforeText:/^(\t|(\ \ ))*\ \*\/\s*$/,action:{indentAction:g.languages.IndentAction.None,removeText:1}}],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"',notIn:["string"]},{open:"'",close:"'",notIn:["string","comment"]},{open:"`",close:"`",notIn:["string","comment"]},{open:"/**",close:" */",notIn:["string"]}],folding:{markers:{start:new RegExp("^\\s*//\\s*#?region\\b"),end:new RegExp("^\\s*//\\s*#?endregion\\b")}}},h={defaultToken:"invalid",tokenPostfix:".ts",keywords:["abstract","any","as","asserts","bigint","boolean","break","case","catch","class","continue","const","constructor","debugger","declare","default","delete","do","else","enum","export","extends","false","finally","for","from","function","get","if","implements","import","in","infer","instanceof","interface","is","keyof","let","module","namespace","never","new","null","number","object","out","package","private","protected","public","override","readonly","require","global","return","satisfies","set","static","string","super","switch","symbol","this","throw","true","try","type","typeof","undefined","unique","unknown","var","void","while","with","yield","async","await","of"],operators:["<=",">=","==","!=","===","!==","=>","+","-","**","*","/","%","++","--","<<","</",">>",">>>","&","|","^","!","~","&&","||","??","?",":","=","+=","-=","*=","**=","/=","%=","<<=",">>=",">>>=","&=","|=","^=","@"],symbols:/[=><!~?:&|+\-*\/\^%]+/,escapes:/\\(?:[abfnrtv\\"']|x[0-9A-Fa-f]{1,4}|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})/,digits:/\d+(_+\d+)*/,octaldigits:/[0-7]+(_+[0-7]+)*/,binarydigits:/[0-1]+(_+[0-1]+)*/,hexdigits:/[[0-9a-fA-F]+(_+[0-9a-fA-F]+)*/,regexpctl:/[(){}\[\]\$\^|\-*+?\.]/,regexpesc:/\\(?:[bBdDfnrstvwWn0\\\/]|@regexpctl|c[A-Z]|x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4})/,tokenizer:{root:[[/[{}]/,"delimiter.bracket"],{include:"common"}],common:[[/#?[a-z_$][\w$]*/,{cases:{"@keywords":"keyword","@default":"identifier"}}],[/[A-Z][\w\$]*/,"type.identifier"],{include:"@whitespace"},[/\/(?=([^\\\/]|\\.)+\/([dgimsuy]*)(\s*)(\.|;|,|\)|\]|\}|$))/,{token:"regexp",bracket:"@open",next:"@regexp"}],[/[()\[\]]/,"@brackets"],[/[<>](?!@symbols)/,"@brackets"],[/!(?=([^=]|$))/,"delimiter"],[/@symbols/,{cases:{"@operators":"delimiter","@default":""}}],[/(@digits)[eE]([\-+]?(@digits))?/,"number.float"],[/(@digits)\.(@digits)([eE][\-+]?(@digits))?/,"number.float"],[/0[xX](@hexdigits)n?/,"number.hex"],[/0[oO]?(@octaldigits)n?/,"number.octal"],[/0[bB](@binarydigits)n?/,"number.binary"],[/(@digits)n?/,"number"],[/[;,.]/,"delimiter"],[/"([^"\\]|\\.)*$/,"string.invalid"],[/'([^'\\]|\\.)*$/,"string.invalid"],[/"/,"string","@string_double"],[/'/,"string","@string_single"],[/`/,"string","@string_backtick"]],whitespace:[[/[ \t\r\n]+/,""],[/\/\*\*(?!\/)/,"comment.doc","@jsdoc"],[/\/\*/,"comment","@comment"],[/\/\/.*$/,"comment"]],comment:[[/[^\/*]+/,"comment"],[/\*\//,"comment","@pop"],[/[\/*]/,"comment"]],jsdoc:[[/[^\/*]+/,"comment.doc"],[/\*\//,"comment.doc","@pop"],[/[\/*]/,"comment.doc"]],regexp:[[/(\{)(\d+(?:,\d*)?)(\})/,["regexp.escape.control","regexp.escape.control","regexp.escape.control"]],[/(\[)(\^?)(?=(?:[^\]\\\/]|\\.)+)/,["regexp.escape.control",{token:"regexp.escape.control",next:"@regexrange"}]],[/(\()(\?:|\?=|\?!)/,["regexp.escape.control","regexp.escape.control"]],[/[()]/,"regexp.escape.control"],[/@regexpctl/,"regexp.escape.control"],[/[^\\\/]/,"regexp"],[/@regexpesc/,"regexp.escape"],[/\\\./,"regexp.invalid"],[/(\/)([dgimsuy]*)/,[{token:"regexp",bracket:"@close",next:"@pop"},"keyword.other"]]],regexrange:[[/-/,"regexp.escape.control"],[/\^/,"regexp.invalid"],[/@regexpesc/,"regexp.escape"],[/[^\]]/,"regexp"],[/\]/,{token:"regexp.escape.control",next:"@pop",bracket:"@close"}]],string_double:[[/[^\\"]+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/"/,"string","@pop"]],string_single:[[/[^\\']+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/'/,"string","@pop"]],string_backtick:[[/\$\{/,{token:"delimiter.bracket",next:"@bracketCounting"}],[/[^\\`$]+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/`/,"string","@pop"]],bracketCounting:[[/\{/,"delimiter.bracket","@bracketCounting"],[/\}/,"delimiter.bracket","@pop"],{include:"common"}]}}}}]);