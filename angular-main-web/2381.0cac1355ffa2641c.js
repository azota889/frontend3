"use strict";(self.webpackChunkBalacoClient=self.webpackChunkBalacoClient||[]).push([[2381],{91032:(j,k,r)=>{r.d(k,{e:()=>b});var o=r(71217),l=r(48891);let b=(()=>{var c;class f{toggle(){this.isMaximizedSubject.getValue()?this.minimize():this.maximize()}maximize(){if(this.lastScrollPosition=document.documentElement.scrollTop,!this.el)return;this.isMaximizedSubject.next(!0),this.renderer.addClass(this.el.nativeElement,this.containerCssClass);let C=document.getElementsByTagName("body"),h=document.getElementsByTagName("html");C&&C[0]&&this.renderer.addClass(C[0],this.bodyCssClass),h&&h[0]&&this.renderer.addClass(h[0],this.bodyCssClass)}minimize(){if(this.el){this.isMaximizedSubject.next(!1),this.renderer.removeClass(this.el.nativeElement,this.containerCssClass);let C=document.getElementsByTagName("body"),h=document.getElementsByTagName("html");C&&C[0]&&this.renderer.removeClass(C[0],this.bodyCssClass),h&&h[0]&&this.renderer.removeClass(h[0],this.bodyCssClass)}window.scrollTo(0,this.lastScrollPosition)}constructor(C,h){this.el=C,this.renderer=h,this.isMaximizedSubject=new o.t(!1),this.containerCssClass="azt-maximize-container-fullscreen",this.bodyCssClass="azt-maximize-body-fullscreen",this.isMaximized$=this.isMaximizedSubject.pipe(),this.lastScrollPosition=0}}return(c=f).\u0275fac=function(C){return new(C||c)(l.rXU(l.aKT),l.rXU(l.sFG))},c.\u0275dir=l.FsC({type:c,selectors:[["","maximize",""]],exportAs:["maximize"]}),f})()},38009:(j,k,r)=>{r.d(k,{t:()=>o});var o=function(l){return l[l.homework=0]="homework",l[l.exam=1]="exam",l[l.classroom=2]="classroom",l[l.student=3]="student",l}(o||{})},80037:(j,k,r)=>{r.d(k,{j:()=>o});class o{static classroomInGroupCheckBoxValidator(b){const c=b,f=c.controls.whoAllow.value,u=c.controls.classroomFormArray;return f&&u?2!=f||o.countCheckBoxInGroup(u)>=1?(c.controls.classroomFormArray.setErrors(null),null):(c.controls.classroomFormArray.setErrors({classroomCheckBoxValidator:!0}),{identityRevealed:!0}):null}static classroomInGroupCheckBoxValidatorWithoutWhoAllow(b){const c=b,f=c.controls.classroomFormArray;return f?o.countCheckBoxInGroup(f)>0?(c.controls.classroomFormArray.setErrors(null),null):(c.controls.classroomFormArray.setErrors({classroomCheckBoxValidatorWithoutWhoAllow:!0}),{identityRevealed:!0}):null}static countCheckBoxInGroup(b){return b.getRawValue().filter(c=>c.isChecked).length}}},95825:(j,k,r)=>{r.d(k,{g:()=>h});var o=r(48891),l=r(54460),b=r(47712),c=r(15343),f=r(76975);function u(_,d){if(1&_){const v=o.RV6();o.j41(0,"button",2),o.nI1(1,"mytranslate"),o.bIt("click",function(){o.eBV(v);const x=o.XpG();return o.Njj(x.maximize.maximize())}),o.nrm(2,"lucide-icon",3),o.k0s()}2&_&&o.FS9("matTooltip",o.bMT(1,1,"lang_maximize_full_screen"))}function C(_,d){if(1&_){const v=o.RV6();o.j41(0,"button",4),o.nI1(1,"mytranslate"),o.bIt("click",function(){o.eBV(v);const x=o.XpG();return o.Njj(x.maximize.minimize())}),o.nrm(2,"lucide-icon",5),o.k0s()}2&_&&o.FS9("matTooltip",o.bMT(1,1,"lang_maximize_full_screen"))}let h=(()=>{var _;class d{}return(_=d).\u0275fac=function(g){return new(g||_)},_.\u0275cmp=o.VBU({type:_,selectors:[["azt-maximize-box"]],inputs:{maximize:"maximize"},decls:4,vars:6,consts:[["azt-track-service","azt-maximize-box-qd6nnS2Xw","class","max-button flex",3,"matTooltip","click",4,"ngIf"],["azt-track-service","azt-maximize-box-HD0EsgLeR-","class","min-button flex",3,"matTooltip","click",4,"ngIf"],["azt-track-service","azt-maximize-box-qd6nnS2Xw",1,"max-button","flex",3,"click","matTooltip"],["name","expand","size","24"],["azt-track-service","azt-maximize-box-HD0EsgLeR-",1,"min-button","flex",3,"click","matTooltip"],["name","shrink","size","24"]],template:function(g,x){1&g&&(o.DNE(0,u,3,3,"button",0),o.nI1(1,"async"),o.DNE(2,C,3,3,"button",1),o.nI1(3,"async")),2&g&&(o.Y8G("ngIf",!o.bMT(1,2,x.maximize.isMaximized$)),o.R7$(2),o.Y8G("ngIf",o.bMT(3,4,x.maximize.isMaximized$)))},dependencies:[l.bT,b.oV,c.WGl,l.Jj,f.wp],encapsulation:2}),d})()},27985:(j,k,r)=>{r.d(k,{D:()=>go});var o=r(48891),l=r(10936),b=r(5502),c=r(89163),f=r(33887),u=r(15766),C=r(21213),h=r(54460),_=r(81587),d=r(76975);function v(e,i){1&e&&(o.j41(0,"div",11)(1,"span"),o.EFF(2),o.nI1(3,"mytranslate"),o.k0s()()),2&e&&(o.R7$(2),o.SpI(" ",o.bMT(3,1,"lang_student_classroom_list_utils_create_class_request_enter_class")," "))}let g=(()=>{var e;class i extends f._{btnCloseDialog(){this.dialogRef.close()}saveClass(){if(this.form.invalid||this.statusObj.loading)this.showErrorSnack("lang_auto_vui_long_dien_day_du_thong_tin");else{this.initStatusObj();let s=(new Date).getFullYear(),n={classroomName:this.form.getRawValue().className,year:`${s} - ${s+1}`};this.classroomGroupService.apiClassroomGroupCreateClassroomWithGroupPost(n).subscribe(m=>{1==m.success?(this.successStatusObj(),this.showSuccessSnack("lang_auto_tao_thanh_cong_lop_hoc"),this.dialogRef.close(m.data)):(this.stopStatusObj(),this.showErrorSnack("lang_auto_tao_lop_hoc_khong_thanh_cong_vui_long_kiem_tra_lai_du_lieu"))})}}ngOnInit(){super.ngOnInit()}constructor(s,t,n){super(n,t),this.classroomGroupService=s,this.dialogRef=t,this.data=n,this.form=new l.gE({className:new l.MJ("",{nonNullable:!0,validators:[l.k0.required,u.M.noWhiteSpace]})})}}return(e=i).\u0275fac=function(s){return new(s||e)(o.rXU(C.kG),o.rXU(c.CP,8),o.rXU(c.Vh))},e.\u0275cmp=o.VBU({type:e,selectors:[["create-classroom"]],features:[o.Vt3],decls:18,vars:15,consts:[[1,"box"],[3,"formGroup"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5"],[1,"text-md","font-medium","flex","items-center"],[1,"mt-2"],["type","text","formControlName","className",1,"form-control",3,"placeholder"],["class","text-xs text-danger font-medium mt-1",4,"ngIf"],[1,"p-3","text-right"],["azt-track-service","create-classroom-dialog-U1melptHG5",1,"btn","btn-secondary","w-24","mr-2",3,"click"],["azt-track-service","create-classroom-dialog-UgZXPvjLFu",1,"btn","w-24","btn-primary",3,"click","disabled"],[1,"text-xs","text-danger","font-medium","mt-1"]],template:function(s,t){1&s&&(o.j41(0,"div",0)(1,"form",1)(2,"div",2)(3,"div",3)(4,"h3",4),o.EFF(5),o.nI1(6,"mytranslate"),o.k0s(),o.j41(7,"div",5),o.nrm(8,"input",6),o.nI1(9,"mytranslate"),o.k0s(),o.DNE(10,v,4,3,"div",7),o.k0s()(),o.j41(11,"div",8)(12,"button",9),o.bIt("click",function(){return t.btnCloseDialog()}),o.EFF(13),o.nI1(14,"mytranslate"),o.k0s(),o.j41(15,"button",10),o.bIt("click",function(){return t.saveClass()}),o.EFF(16),o.nI1(17,"mytranslate"),o.k0s()()()()),2&s&&(o.R7$(),o.Y8G("formGroup",t.form),o.R7$(4),o.SpI(" ",o.bMT(6,7,"lang_auto_tao_lop")," "),o.R7$(3),o.FS9("placeholder",o.bMT(9,9,"lang_auto_nhap_ten_lop")),o.R7$(2),o.Y8G("ngIf",t.form.controls.className.dirty&&t.form.controls.className.errors),o.R7$(3),o.SpI(" ",o.bMT(14,11,"lang_auto_dong")," "),o.R7$(2),o.Y8G("disabled",t.form.invalid),o.R7$(),o.SpI(" ",o.bMT(17,13,"lang_auto_luu")," "))},dependencies:[h.bT,l.qT,l.me,l.BC,l.cb,l.j4,l.JD,_.t,d.wp],encapsulation:2}),i})();var x=r(46899),F=r(38009),S=r(74151),w=r(51913),D=r(59640),y=r(27208),E=r(3780),G=r(17818),z=r(45785),A=r(47712),T=r(56551),R=r(15343),M=r(91032),N=r(32099),B=r(95825);const $=(e,i)=>({"classroom-box-in-full-screen-in-mobile":e,"classroom-box-in-full-screen-in-desktop":i}),L=(e,i)=>({"w-85":e,"w-56":i}),V=e=>({"ml-3":e}),X=(e,i)=>({"bg-primary text-white font-medium":e," hover:bg-slate-100 dark:hover:bg-darkmode-400":i}),Y=(e,i,a)=>({"bg-primary text-white font-medium":e,"hover:bg-slate-100 dark:hover:bg-darkmode-400":i,"link-color":a}),P=e=>({"grid-column":e});function W(e,i){if(1&e){const a=o.RV6();o.j41(0,"div",8)(1,"div")(2,"div",9),o.EFF(3),o.nI1(4,"mytranslate"),o.j41(5,"a",10),o.bIt("click",function(){o.eBV(a);const t=o.XpG();return o.Njj(t.openDialogCreateClassroom())}),o.EFF(6),o.nI1(7,"mytranslate"),o.k0s(),o.EFF(8),o.nI1(9,"mytranslate"),o.k0s()()()}2&e&&(o.R7$(3),o.SpI(" ",o.bMT(4,3,"lang_auto_thay_co_chua_tao_lop_vui_long_click")," "),o.R7$(3),o.SpI(" ",o.bMT(7,5,"lang_testbank_test_config_come_in")," "),o.R7$(2),o.SpI(" ",o.bMT(9,7,"lang_testbank_test_config_create_classroom"),". "))}function U(e,i){if(1&e){const a=o.RV6();o.j41(0,"button",52),o.bIt("click",function(){o.eBV(a);const t=o.XpG(2);return o.Njj(t.selectByGroupId(void 0))}),o.EFF(1),o.nI1(2,"mytranslate"),o.k0s()}if(2&e){const a=o.XpG(2);o.Y8G("ngClass",o.l_i(5,X,0===a.mapClassroomGroupDataToForm.groupIdSelected,0!==a.mapClassroomGroupDataToForm.groupIdSelected)),o.R7$(),o.Lme(" ",o.bMT(2,3,"lang_auto_tat_ca")," (",a.mapClassroomGroupDataToForm.allClassroomInfos.totalChecked+"/"+a.mapClassroomGroupDataToForm.allClassroomInfos.total,") ")}}function J(e,i){if(1&e){const a=o.RV6();o.j41(0,"button",55),o.bIt("click",function(){o.eBV(a);const t=o.XpG().$implicit,n=o.XpG(3);return o.Njj(n.selectByGroupId(t.groupObj))}),o.EFF(1),o.nI1(2,"mytranslate"),o.k0s()}if(2&e){const a=o.XpG().$implicit,s=o.XpG(3);o.Y8G("ngClass",o.sMw(4,Y,s.mapClassroomGroupDataToForm.groupIdSelected===a.groupObj.id,s.mapClassroomGroupDataToForm.groupIdSelected!==a.groupObj.id,a.groupObj.allClassroomInfos.totalChecked>0)),o.R7$(),o.SpI(" ",o.bMT(2,2,a.groupObj.name)+" ("+a.groupObj.allClassroomInfos.totalChecked+"/"+a.groupObj.allClassroomInfos.total+")"," ")}}function K(e,i){if(1&e&&(o.qex(0),o.DNE(1,J,3,8,"button",54),o.bVm()),2&e){const a=i.$implicit;o.R7$(),o.Y8G("ngIf",a.groupObj.isShowGroup)}}function Q(e,i){if(1&e&&(o.qex(0),o.DNE(1,K,2,1,"ng-container",53),o.bVm()),2&e){const a=o.XpG(2);o.R7$(),o.Y8G("ngForOf",a.mapClassroomGroupDataToForm.groupObjs)}}function H(e,i){if(1&e){const a=o.RV6();o.j41(0,"button",56),o.nI1(1,"mytranslate"),o.bIt("click",function(){o.eBV(a);const t=o.XpG(2);return o.Njj(t.sAztMatDrawerService.openDrawer())}),o.nrm(2,"lucide-icon",57),o.k0s()}2&e&&o.FS9("matTooltip",o.bMT(1,1,"lang_auto_mo_menu"))}function Z(e,i){if(1&e){const a=o.RV6();o.j41(0,"button",58),o.nI1(1,"mytranslate"),o.bIt("click",function(){o.eBV(a);const t=o.XpG(2);return o.Njj(t.sAztMatDrawerService.closeDrawer())}),o.nrm(2,"lucide-icon",59),o.k0s()}2&e&&o.FS9("matTooltip",o.bMT(1,1,"lang_auto_dong_menu"))}function q(e,i){if(1&e&&(o.j41(0,"span",60),o.EFF(1),o.k0s()),2&e){const a=o.XpG(2);o.R7$(),o.SpI(" ",(a.filterObj.isShowChecked?1:0)+(a.filterObj.isShowNotChecked?1:0)," ")}}function oo(e,i){if(1&e){const a=o.RV6();o.j41(0,"span",68),o.bIt("click",function(){o.eBV(a);const t=o.XpG(4);return o.Njj(t.toggleAllCheckBox(!1))}),o.j41(1,"span",69),o.EFF(2),o.nI1(3,"mytranslate"),o.k0s(),o.EFF(4),o.k0s()}if(2&e){const a=o.XpG(4);o.R7$(2),o.JRh(o.bMT(3,3,"lang_remove_all_classroom")),o.R7$(2),o.Lme(" (",a.mapClassroomGroupDataToForm.viewClassroomInfos.totalChecked,"/",a.mapClassroomGroupDataToForm.viewClassroomInfos.total,") ")}}function to(e,i){if(1&e){const a=o.RV6();o.j41(0,"span",70),o.bIt("click",function(){o.eBV(a);const t=o.XpG(4);return o.Njj(t.toggleAllCheckBox(!0))}),o.j41(1,"span",69),o.EFF(2),o.nI1(3,"mytranslate"),o.k0s(),o.EFF(4),o.k0s()}if(2&e){const a=o.XpG(4);o.R7$(2),o.JRh(o.bMT(3,3,"lang_select_all_classroom")),o.R7$(2),o.Lme(" (",a.mapClassroomGroupDataToForm.viewClassroomInfos.totalChecked,"/",a.mapClassroomGroupDataToForm.viewClassroomInfos.total,") ")}}function eo(e,i){if(1&e&&(o.j41(0,"div",66),o.DNE(1,oo,5,5,"span",67)(2,to,5,5,"ng-template",null,4,o.C5r),o.k0s()),2&e){const a=o.sdS(3),s=o.XpG(3);o.R7$(),o.Y8G("ngIf",s.mapClassroomGroupDataToForm.viewClassroomInfos.total==s.mapClassroomGroupDataToForm.viewClassroomInfos.totalChecked)("ngIfElse",a)}}function so(e,i){if(1&e){const a=o.RV6();o.j41(0,"span",74),o.bIt("click",function(){o.eBV(a);const t=o.XpG(2).$implicit,n=o.XpG(3);return o.Njj(n.toggleAllCheckBoxInGroup(!1,t.groupObj))}),o.j41(1,"span",69),o.EFF(2),o.nI1(3,"mytranslate"),o.k0s()()}2&e&&(o.R7$(2),o.JRh(o.bMT(3,1,"lang_remove_all_classroom")))}function ao(e,i){if(1&e){const a=o.RV6();o.j41(0,"span",75),o.bIt("click",function(){o.eBV(a);const t=o.XpG(2).$implicit,n=o.XpG(3);return o.Njj(n.toggleAllCheckBoxInGroup(!0,t.groupObj))}),o.j41(1,"span",69),o.EFF(2),o.nI1(3,"mytranslate"),o.k0s()()}2&e&&(o.R7$(2),o.JRh(o.bMT(3,1,"lang_select_all_classroom")))}function ro(e,i){if(1&e&&(o.qex(0),o.j41(1,"span",72),o.EFF(2),o.nI1(3,"mytranslate"),o.k0s(),o.EFF(4),o.nI1(5,"mytranslate"),o.DNE(6,so,4,3,"span",73)(7,ao,4,3,"ng-template",null,4,o.C5r),o.bVm()),2&e){const a=o.sdS(8),s=o.XpG().$implicit;o.R7$(2),o.JRh(o.bMT(3,4,s.groupObj.name)),o.R7$(2),o.SpI(" ","("+s.groupObj.viewClassroomInfos.totalChecked+"/"+s.groupObj.viewClassroomInfos.total+" "+o.bMT(5,6,"lang_testbank_test_list_classes")+")"," "),o.R7$(2),o.Y8G("ngIf",s.groupObj.viewClassroomInfos.total==s.groupObj.viewClassroomInfos.totalChecked)("ngIfElse",a)}}function no(e,i){if(1&e){const a=o.RV6();o.j41(0,"input",82),o.bIt("change",function(){o.eBV(a);const t=o.XpG(5);return o.Njj(t.changeCheckboxEventLocal())}),o.k0s()}if(2&e){const a=o.XpG(2).$implicit;o.FS9("id","azt-checkbox-item-"+a.classroomObj.id),o.FS9("value",a.classroomObj.id),o.Y8G("formControl",a.classroomObj.classroomFormGroup.controls.isChecked)}}function lo(e,i){if(1&e&&(o.j41(0,"span"),o.EFF(1),o.k0s()),2&e){const a=o.XpG(3).$implicit;o.R7$(),o.SpI("(",a.classroomObj.countStudents,")")}}function io(e,i){if(1&e&&(o.j41(0,"span",83),o.EFF(1),o.nI1(2,"slice"),o.DNE(3,lo,2,1,"span",7),o.k0s()),2&e){const a=o.XpG(2).$implicit;o.FS9("matTooltip",a.classroomObj.name),o.R7$(),o.SpI(" ",o.brH(2,3,a.classroomObj.name,0,25)+"..."," "),o.R7$(2),o.Y8G("ngIf",a.classroomObj.id>0)}}function co(e,i){if(1&e&&(o.j41(0,"span"),o.EFF(1),o.k0s()),2&e){const a=o.XpG(3).$implicit;o.R7$(),o.SpI("(",a.classroomObj.countStudents,")")}}function mo(e,i){if(1&e&&(o.j41(0,"span",28),o.EFF(1),o.DNE(2,co,2,1,"span",7),o.k0s()),2&e){const a=o.XpG(2).$implicit;o.R7$(),o.SpI(" ",a.classroomObj.name," "),o.R7$(),o.Y8G("ngIf",a.classroomObj.id>0)}}function _o(e,i){1&e&&(o.j41(0,"span",84),o.EFF(1),o.nI1(2,"mytranslate"),o.k0s()),2&e&&(o.R7$(),o.SpI(" ",o.bMT(2,1,"lang_testbank_test_config_share")," "))}function po(e,i){if(1&e&&(o.qex(0),o.j41(1,"div",76),o.DNE(2,no,1,3,"input",77),o.j41(3,"label",78),o.DNE(4,io,4,7,"span",79)(5,mo,3,2,"span",80)(6,_o,3,3,"span",81),o.nI1(7,"fullPermission"),o.k0s()(),o.bVm()),2&e){let a,s;const t=o.XpG().$implicit;o.R7$(2),o.Y8G("ngIf",t.classroomObj.classroomFormGroup),o.R7$(),o.FS9("for","azt-checkbox-item-"+t.classroomObj.id),o.R7$(),o.Y8G("ngIf",(null!==(a=null==t.classroomObj.name?null:t.classroomObj.name.length)&&void 0!==a?a:0)>25),o.R7$(),o.Y8G("ngIf",(null!==(s=null==t.classroomObj.name?null:t.classroomObj.name.length)&&void 0!==s?s:0)<=25),o.R7$(),o.Y8G("ngIf",!o.i5U(7,5,t.classroomObj,"classroom"))}}function ho(e,i){if(1&e&&(o.j41(0,"div",71),o.DNE(1,ro,9,8,"ng-container",7)(2,po,8,8,"ng-container",7),o.k0s()),2&e){const a=i.$implicit;o.Y8G("ngStyle",o.eq3(3,P,"group"==a.type?"span 12 / span 12":"")),o.R7$(),o.Y8G("ngIf","group"==a.type),o.R7$(),o.Y8G("ngIf","classroom"==a.type&&a.classroomObj)}}function Co(e,i){if(1&e&&(o.qex(0),o.j41(1,"ng-scrollbar",61)(2,"cdk-virtual-scroll-viewport",62),o.DNE(3,eo,4,2,"div",63),o.j41(4,"div",64),o.DNE(5,ho,3,5,"div",65),o.k0s()()(),o.bVm()),2&e){const a=o.XpG(2);o.R7$(),o.Y8G("visibility","hover"),o.R7$(2),o.Y8G("ngIf",0==a.mapClassroomGroupDataToForm.groupIdSelected&&a.mapClassroomGroupDataToForm.groupObjs.length>1),o.R7$(2),o.Y8G("cdkVirtualForOf",a.mapClassroomGroupDataToVirtualScroll)}}function uo(e,i){1&e&&(o.j41(0,"div",85),o.EFF(1),o.nI1(2,"mytranslate"),o.k0s()),2&e&&(o.R7$(),o.SpI(" ",o.bMT(2,1,"lang_student_classroom_list_class_null")," "))}function bo(e,i){1&e&&(o.j41(0,"span"),o.EFF(1),o.nI1(2,"mytranslate"),o.k0s()),2&e&&(o.R7$(),o.JRh(o.bMT(2,1,"lang_testbank_test_config_you_not_yet_class")))}function fo(e,i){if(1&e){const a=o.RV6();o.j41(0,"div")(1,"form",11)(2,"mat-drawer-container",12)(3,"mat-drawer",13,1),o.bIt("openedChange",function(t){o.eBV(a);const n=o.XpG();return o.Njj(n.sAztMatDrawerService.openedChange(t))}),o.j41(5,"div",14)(6,"div",15)(7,"div",16)(8,"azt-search-box",17),o.nI1(9,"mytranslate"),o.bIt("onSearch",function(t){o.eBV(a);const n=o.XpG();return o.Njj(n.searchByGroupName(t.searchObj))}),o.k0s()()(),o.j41(10,"div",18)(11,"ng-scrollbar",19)(12,"div",20),o.DNE(13,U,3,8,"button",21)(14,Q,2,1,"ng-container",7),o.k0s()()()()(),o.j41(15,"mat-drawer-content")(16,"div",22)(17,"div",23)(18,"div",24),o.DNE(19,H,3,3,"button",25)(20,Z,3,3,"button",26),o.j41(21,"div",27)(22,"div",28)(23,"azt-search-box",17),o.nI1(24,"mytranslate"),o.bIt("onSearch",function(t){o.eBV(a);const n=o.XpG();return o.Njj(n.searchByClassroomName(t.searchObj))}),o.k0s()(),o.j41(25,"div",29)(26,"button",30)(27,"span",31),o.nrm(28,"lucide-icon",32),o.k0s(),o.j41(29,"span",33),o.EFF(30),o.nI1(31,"mytranslate"),o.DNE(32,q,2,1,"span",34),o.k0s()()(),o.j41(33,"div",35),o.nrm(34,"azt-maximize-box",36),o.k0s(),o.j41(35,"mat-menu",null,2)(37,"div",37)(38,"ul",38)(39,"li")(40,"label",39),o.bIt("click",function(t){return o.eBV(a),o.Njj(t.stopPropagation())}),o.EFF(41),o.nI1(42,"mytranslate"),o.j41(43,"div",40)(44,"input",41),o.bIt("change",function(){o.eBV(a);const t=o.XpG();return t.filterObj.isShowChecked=!t.filterObj.isShowChecked,o.Njj(t.changeFilter())}),o.k0s()()()(),o.j41(45,"li")(46,"label",42),o.bIt("click",function(t){return o.eBV(a),o.Njj(t.stopPropagation())}),o.EFF(47),o.nI1(48,"mytranslate"),o.j41(49,"div",40)(50,"input",43),o.bIt("change",function(){o.eBV(a);const t=o.XpG();return t.filterObj.isShowNotChecked=!t.filterObj.isShowNotChecked,o.Njj(t.changeFilter())}),o.k0s()()()(),o.j41(51,"li"),o.nrm(52,"hr",44),o.k0s(),o.j41(53,"li")(54,"div",45)(55,"button",46),o.EFF(56),o.nI1(57,"mytranslate"),o.k0s(),o.j41(58,"div",47),o.bIt("click",function(t){return o.eBV(a),o.Njj(t.stopPropagation())}),o.j41(59,"button",48),o.bIt("click",function(){o.eBV(a);const t=o.XpG();return o.Njj(t.clearFilter())}),o.EFF(60),o.nI1(61,"mytranslate"),o.k0s()()()()()()()()(),o.j41(62,"div",49),o.DNE(63,Co,6,3,"ng-container",50)(64,uo,3,3,"ng-template",null,3,o.C5r),o.k0s()()()()(),o.j41(66,"div",8)(67,"div",51),o.DNE(68,bo,3,3,"span",7),o.EFF(69," \xa0 "),o.k0s()()()()}if(2&e){const a=o.sdS(36),s=o.sdS(65),t=o.XpG(),n=o.sdS(1);o.R7$(),o.Y8G("formGroup",t.form),o.R7$(),o.HbH(t.defaultCssClass),o.Y8G("ngClass",o.l_i(49,$,t.isMobileDevice,!t.isMobileDevice))("hasBackdrop",t.sAztMatDrawerService.hasBackdrop),o.R7$(),o.FS9("opened",t.sAztMatDrawerService.isOpenSideNav?"true":"false"),o.Y8G("ngClass",o.l_i(52,L,t.isMobileDevice,!t.isMobileDevice))("mode",t.sAztMatDrawerService.mode),o.R7$(5),o.Y8G("isServerSearch",!1)("placeholder",o.bMT(9,35,"lang_azt_search_class_group"))("searchContentObj",t.searchByGroupContentObj)("styleInput","pr-10 py-1"),o.R7$(3),o.Y8G("visibility","hover"),o.R7$(2),o.Y8G("ngIf",!t.searchByGroupContentObj.searchContent),o.R7$(),o.Y8G("ngIf",t.mapClassroomGroupDataToForm.groupObjs.length>1),o.R7$(2),o.Y8G("ngClass",o.eq3(55,V,!t.isMobileDevice&&t.sAztMatDrawerService.isOpenSideNav)),o.R7$(3),o.Y8G("ngIf",!t.sAztMatDrawerService.isOpenSideNav||t.isMobileDevice),o.R7$(),o.Y8G("ngIf",t.sAztMatDrawerService.isOpenSideNav&&!t.isMobileDevice),o.R7$(3),o.Y8G("isServerSearch",!1)("placeholder",o.bMT(24,37,"lang_azt_search_class"))("searchContentObj",t.searchByClassroomContentObj)("styleInput","py-1"),o.R7$(3),o.Y8G("matMenuTriggerFor",a),o.R7$(4),o.SpI(" ",o.bMT(31,39,"lang_testbank_tested_list_sort")," "),o.R7$(2),o.Y8G("ngIf",t.filterObj.isShowChecked||t.filterObj.isShowNotChecked),o.R7$(2),o.Y8G("maximize",n),o.R7$(7),o.SpI(" ",o.bMT(42,41,"lang_azt_selected_classes")," "),o.R7$(3),o.Y8G("checked",t.filterObj.isShowChecked),o.R7$(3),o.SpI(" ",o.bMT(48,43,"lang_azt_unselected_classes")," "),o.R7$(3),o.Y8G("checked",t.filterObj.isShowNotChecked),o.R7$(6),o.JRh(o.bMT(57,45,"lang_button_close")),o.R7$(4),o.JRh(o.bMT(61,47,"lang_button_delete")),o.R7$(3),o.Y8G("ngIf",t.mapClassroomGroupDataToForm.viewClassroomInfos.total>0)("ngIfElse",s),o.R7$(5),o.Y8G("ngIf",t.form.controls.classroomFormArray.errors)}}let go=(()=>{var e;class i extends D.H{changeCheckboxEventLocal(){this.changeCheckboxEvent.emit()}searchByClassroomName(s){this.searchByClassroomContentObj=s,this.checkIsFilter(),this.calculateClassroomInfo()}searchByGroupName(s){this.searchByGroupContentObj=s,this.checkIsFilter(),this.calculateClassroomInfo()}changeFilter(){this.checkIsFilter(),this.calculateClassroomInfo()}clearFilter(){this.filterObj={isShowChecked:!1,isShowNotChecked:!1},this.checkIsFilter(),this.calculateClassroomInfo()}checkIsFilter(){return 0!=this.mapClassroomGroupDataToForm.groupIdSelected||this.filterObj.isShowChecked||this.filterObj.isShowNotChecked||""!=this.searchByClassroomContentObj.searchContent.trim()}selectByGroupId(s){this.mapClassroomGroupDataToForm.groupIdSelected=s?.id??0,this.calculateClassroomInfo(),this.scrollable?.scrollTo({top:0,duration:0}),this.isMobileDevice&&this.sAztMatDrawerService.closeDrawer()}toggleAllCheckBox(s){let t=this.formArray.getRawValue();t.map(n=>n.isChecked=s),this.formArray.patchValue(t,{emitEvent:!1}),this.calculateClassroomInfo()}toggleAllCheckBoxInGroup(s,t){let n=this.commonService.concatMultipleArray(this.mapClassroomGroupDataToForm.groupObjs.filter(p=>p.groupObj.id==t.id).map(p=>p.classroomObjs.map(O=>O.classroomFormGroup.controls.classroomId.value))),m=this.formArray.getRawValue();m.map(p=>p.isChecked=n.includes(p.classroomId)?s:p.isChecked),this.formArray.patchValue(m,{emitEvent:!1}),this.calculateClassroomInfo()}checkShowCreateClassroom(){var s=this.commonService.concatMultipleArray(this.classroomGroupData.map(n=>n.classroomObjs)),t=this.sAztClassroomCheckboxService.findClassroomWithNoFullPermission(s,this.permissionName);this.showCreateNewClassroom=t.length===s.length}calculateClassroomInfo(){this.doFilterData(),this.countCheckboxData(),this.calculateVirtualScrollData(),this.changeCheckboxEventLocal()}doFilterData(){const s=this.searchByClassroomContentObj.searchContent?this.commonService.convertVietnameseToEnglish(this.searchByClassroomContentObj.searchContent).toLowerCase().trim():"",t=this.searchByGroupContentObj.searchContent?this.commonService.convertVietnameseToEnglish(this.searchByGroupContentObj.searchContent).toLowerCase().trim():"";this.mapClassroomGroupDataToForm.groupObjs.forEach(n=>{const m=this.commonService.convertVietnameseToEnglish(n.groupObj.name??"");n.groupObj.isShowGroup=""==t||m.toLowerCase().trim().includes(t),n.classroomObjs.forEach(p=>{if(p.isShowClassroom=!0,!this.checkIsFilter())return;const O=this.commonService.convertVietnameseToEnglish(p.name);let I=0==this.mapClassroomGroupDataToForm.groupIdSelected||n.groupObj.id==this.mapClassroomGroupDataToForm.groupIdSelected,ko=""==s||O.toLowerCase().trim().includes(s);p.isShowClassroom=I&&ko&&(this.filterObj.isShowChecked&&p.classroomFormGroup.controls.isChecked.value||this.filterObj.isShowNotChecked&&!p.classroomFormGroup.controls.isChecked.value||!this.filterObj.isShowChecked&&!this.filterObj.isShowNotChecked)})})}countCheckboxData(){this.mapClassroomGroupDataToForm.groupObjs.forEach(s=>{s.groupObj.allClassroomInfos.total=s.classroomObjs.length,s.groupObj.allClassroomInfos.totalChecked=s.classroomObjs.filter(t=>t.classroomFormGroup.controls.isChecked.value).length,s.groupObj.filterClassroomInfos.total=s.classroomObjs.filter(t=>t.isShowClassroom).length,s.groupObj.filterClassroomInfos.totalChecked=s.classroomObjs.filter(t=>t.isShowClassroom&&t.classroomFormGroup.controls.isChecked.value).length,s.groupObj.viewClassroomInfos=this.checkIsFilter()?s.groupObj.filterClassroomInfos:s.groupObj.allClassroomInfos}),this.mapClassroomGroupDataToForm.allClassroomInfos.total=this.mapClassroomGroupDataToForm.groupObjs.reduce((s,t)=>s+t.groupObj.allClassroomInfos.total,0),this.mapClassroomGroupDataToForm.allClassroomInfos.totalChecked=this.mapClassroomGroupDataToForm.groupObjs.reduce((s,t)=>s+t.groupObj.allClassroomInfos.totalChecked,0),this.mapClassroomGroupDataToForm.filterClassroomInfos.total=this.mapClassroomGroupDataToForm.groupObjs.reduce((s,t)=>s+t.groupObj.filterClassroomInfos.total,0),this.mapClassroomGroupDataToForm.filterClassroomInfos.totalChecked=this.mapClassroomGroupDataToForm.groupObjs.reduce((s,t)=>s+t.groupObj.filterClassroomInfos.totalChecked,0),this.mapClassroomGroupDataToForm.viewClassroomInfos=this.checkIsFilter()?this.mapClassroomGroupDataToForm.filterClassroomInfos:this.mapClassroomGroupDataToForm.allClassroomInfos}calculateVirtualScrollData(){var s=[];this.mapClassroomGroupDataToForm.groupObjs.filter(t=>t.groupObj.viewClassroomInfos.total>0).forEach(t=>{s.push({type:"group",groupObj:t.groupObj,classroomObj:void 0}),t.classroomObjs.filter(n=>n.isShowClassroom).forEach(n=>{s.push({type:"classroom",groupObj:t.groupObj,classroomObj:n})})}),this.mapClassroomGroupDataToVirtualScroll=s}openDialogCreateClassroom(){this.sAztDialogService.open(g,{data:{},width:"500px",restoreFocus:!1}).afterClosed().subscribe(t=>{t&&t.obj&&(this.changeClassroomObjs(t.obj),this.createdNewClassroom.emit(!0))})}changeClassroomObjs(s){var t=this.classroomGroupData.find(n=>-2==n.groupObj.id);t&&(t.classroomObjs.push(s),t.classroomObjs.sort((n,m)=>(n.name??"").localeCompare(m.name??"")),this.checkShowCreateClassroom(),this.initClassroomCheckbox())}initClassroomCheckbox(){let s=[];var t=[];const n=Number(this.getMyQueryParam("classroomId")??0);n&&t.push(n),this.homeworkObj&&this.homeworkObj.classroomId&&t.push(this.homeworkObj.classroomId),this.examClassroomObjs.filter(m=>m.classroomId).forEach(m=>t.push(m.classroomId??0)),null!=this.shareClassroomIds&&(t=this.shareClassroomIds),this.classroomGroupData=this.classroomGroupData.map(m=>({groupObj:m.groupObj,isOwned:m.isOwned,classroomObjs:m.classroomObjs.filter(p=>null!=p.permissionObj&&this.permissionService.hasCreatePermission(this.listPermissionTypes[this.permissionName],p))})),this.mapClassroomGroupDataToForm.groupObjs=this.classroomGroupData.map(m=>({groupObj:{...m.groupObj,isShowGroup:!0,allClassroomInfos:{total:0,totalChecked:0},viewClassroomInfos:{total:0,totalChecked:0},filterClassroomInfos:{total:0,totalChecked:0}},isOwned:m.isOwned,classroomObjs:m.classroomObjs.map(p=>{let O=t.includes(p.id),I=new l.gE({classroomId:new l.MJ(p.id,{nonNullable:!0}),classroomName:new l.MJ(p.name,{nonNullable:!0}),isChecked:new l.MJ(O,{nonNullable:!0})});return s.push(I),{...p,classroomFormGroup:I,isShowClassroom:!0}})})),this.formArray.clear(),s.forEach(m=>this.formArray.push(m,{emitEvent:!1})),this.calculateClassroomInfo()}initForm(){this.formArray=this.form.controls.classroomFormArray,this.classroomGroupData.forEach(s=>s.classroomObjs.map(t=>t.name=this.commonService.myTranslateInstant(t.name)??"")),this.initClassroomCheckbox(),this.checkShowCreateClassroom(),this.formArray.valueChanges.subscribe(()=>{this.calculateClassroomInfo()})}ngOnInit(){super.ngOnInit(),this.initForm()}constructor(){super(),this.sAztMatDrawerService=(0,o.WQX)(S.n),this.permissionService=(0,o.WQX)(w.p),this.sAztClassroomCheckboxService=(0,o.WQX)(E.Q),this.sAztDialogService=(0,o.WQX)(x.i),this.permissionName=F.t.homework,this.examClassroomObjs=[],this.shareClassroomIds=void 0,this.defaultCssClass="classroom-box-in-single-page",this.changeCheckboxEvent=new o.bkB,this.createdNewClassroom=new o.bkB,this.formArray=new l.Yp([]),this.mapClassroomGroupDataToForm={groupObjs:[],groupIdSelected:0,allClassroomInfos:{total:0,totalChecked:0},viewClassroomInfos:{total:0,totalChecked:0},filterClassroomInfos:{total:0,totalChecked:0}},this.mapClassroomGroupDataToVirtualScroll=[],this.listPermissionTypes=F.t,this.showCreateNewClassroom=!1,this.searchByClassroomContentObj=new y.Z,this.searchByGroupContentObj=new y.Z,this.filterObj={isShowChecked:!1,isShowNotChecked:!1}}}return(e=i).\u0275fac=function(s){return new(s||e)},e.\u0275cmp=o.VBU({type:e,selectors:[["azt-list-classroom-checkbox"]],viewQuery:function(s,t){if(1&s&&o.GBs(b.Yh,7),2&s){let n;o.mGM(n=o.lsd())&&(t.scrollable=n.first)}},inputs:{form:"form",classroomGroupData:"classroomGroupData",permissionName:"permissionName",homeworkObj:"homeworkObj",examClassroomObjs:"examClassroomObjs",shareClassroomIds:"shareClassroomIds",defaultCssClass:"defaultCssClass"},outputs:{changeCheckboxEvent:"changeCheckboxEvent",createdNewClassroom:"createdNewClassroom"},features:[o.Jv_([S.n]),o.Vt3],decls:4,vars:2,consts:[["maximize","maximize"],["drawer",""],["menuFilter","matMenu"],["emptyClassroom",""],["notCheckAll",""],["maximize","",1,"azt-list-classroom-by-group"],["class","mt-2",4,"ngIf"],[4,"ngIf"],[1,"mt-2"],[1,"text-create","pb-2"],["azt-track-service","azt-list-classroom-checkbox-6scHm7Ch1-",1,"btn-text-primary",3,"click"],[3,"formGroup"],[1,"azt-drawer-container",3,"ngClass","hasBackdrop"],[3,"openedChange","ngClass","mode","opened"],[1,"box","h-full","border","border-slate-200/60","dark:border-darkmode-400"],[1,"flex","rounded-md","border-b","border-slate-200","dark:border-darkmode-400","p-2","text-slate-500",2,"border-bottom-right-radius","0","border-bottom-left-radius","0"],[1,"search-box"],[3,"onSearch","isServerSearch","placeholder","searchContentObj","styleInput"],[2,"height","calc(100% - 50px)"],["track","vertical","pointerEventsMethod","scrollbar",1,"w-full",3,"visibility"],[1,"p-2"],["azt-track-service","azt-list-classroom-checkbox-TUrZzBy9T","class","flex items-center px-3 py-2 rounded-md w-full",3,"ngClass","click",4,"ngIf"],[1,"azt-drawer-content","h-full",3,"ngClass"],[1,"box","border","border-slate-200","dark:border-darkmode-400","h-full"],[1,"flex","items-center","rounded-md","border-b","border-slate-200","dark:border-darkmode-400","p-2","text-slate-500",2,"border-bottom-right-radius","0","border-bottom-left-radius","0"],["azt-track-service","azt-list-classroom-checkbox-WB1u8XZHUS","class","btn btn-sm mr-2",3,"matTooltip","click",4,"ngIf"],["azt-track-service","azt-list-classroom-checkbox-q2BPTM5lPo","class","btn btn-sm mr-2",3,"matTooltip","click",4,"ngIf"],[1,"flex","ml-auto"],[1,"mr-2"],[1,"filter","mr-2"],[1,"btn","btn-sm",3,"matMenuTriggerFor"],[1,"w-4","h-4","inline-block"],["name","filter","size","18"],[1,"azt-hidden","md:block","ml-2"],["class","p-1 ml-1 items-center justify-center rounded-full text-xs bg-primary text-white cursor-pointer font-medium","style","display: inline-flex; width: 15px; height: 15px; font-size: 10px",4,"ngIf"],[1,"flex","items-center"],[3,"maximize"],[1,"dropdown-menu","show","relative","w-56"],[1,"dropdown-content"],["azt-track-service","azt-list-classroom-checkbox-mJWF3uWTQJ","for","isShowChecked",1,"dropdown-item","cursor-pointer",3,"click"],[1,"form-check","form-switch","ml-auto"],["id","isShowChecked","type","checkbox",1,"show-code","form-check-input","ml-2",3,"change","checked"],["azt-track-service","azt-list-classroom-checkbox-pFWk_nWN9o","for","isShowNotChecked",1,"dropdown-item","cursor-pointer",3,"click"],["id","isShowNotChecked","type","checkbox",1,"show-code","form-check-input","ml-2",3,"change","checked"],[1,"dropdown-divider"],[1,"flex","p-1"],[1,"btn","btn-secondary","py-1","px-2","ml-auto","mr-2"],["azt-track-service","azt-list-classroom-checkbox-3OFGLRY5fa",3,"click"],["azt-track-service","azt-list-classroom-checkbox-iJlkvwO36n",1,"btn","btn-danger","py-1","px-2",3,"click"],[1,"w-full",2,"height","calc(100% - 50px)"],[4,"ngIf","ngIfElse"],[1,"text-xs","font-medium","text-danger"],["azt-track-service","azt-list-classroom-checkbox-TUrZzBy9T",1,"flex","items-center","px-3","py-2","rounded-md","w-full",3,"click","ngClass"],[4,"ngFor","ngForOf"],["azt-track-service","azt-list-classroom-checkbox-hUXQqnl7px","class","flex items-center px-3 py-2 rounded-md w-full text-left",3,"ngClass","click",4,"ngIf"],["azt-track-service","azt-list-classroom-checkbox-hUXQqnl7px",1,"flex","items-center","px-3","py-2","rounded-md","w-full","text-left",3,"click","ngClass"],["azt-track-service","azt-list-classroom-checkbox-WB1u8XZHUS",1,"btn","btn-sm","mr-2",3,"click","matTooltip"],["name","panel-left-open","size","16"],["azt-track-service","azt-list-classroom-checkbox-q2BPTM5lPo",1,"btn","btn-sm","mr-2",3,"click","matTooltip"],["name","panel-left-close","size","16"],[1,"p-1","ml-1","items-center","justify-center","rounded-full","text-xs","bg-primary","text-white","cursor-pointer","font-medium",2,"display","inline-flex","width","15px","height","15px","font-size","10px"],["track","vertical",1,"h-full",3,"visibility"],["scrollViewport","","itemSize","10"],["class","p-3 pb-0",4,"ngIf"],[1,"grid","grid-cols-12","gap-3","p-3","pt-2"],["class","col-span-12 md:col-span-6",3,"ngStyle",4,"cdkVirtualFor","cdkVirtualForOf"],[1,"p-3","pb-0"],["azt-track-service","azt-list-classroom-checkbox-loLpkgGG1","class","clickable",3,"click",4,"ngIf","ngIfElse"],["azt-track-service","azt-list-classroom-checkbox-loLpkgGG1",1,"clickable",3,"click"],[1,"link-color"],["azt-track-service","azt-list-classroom-checkbox-icrcYTPz96",1,"clickable",3,"click"],[1,"col-span-12","md:col-span-6",3,"ngStyle"],[1,"font-bold"],["azt-track-service","azt-list-classroom-checkbox-__b3YKDM_d","class","clickable",3,"click",4,"ngIf","ngIfElse"],["azt-track-service","azt-list-classroom-checkbox-__b3YKDM_d",1,"clickable",3,"click"],["azt-track-service","azt-list-classroom-checkbox-3SlyuYRP9f",1,"clickable",3,"click"],[1,"azt-checkbox-item"],["class","form-check-input","type","checkbox",3,"id","formControl","value","change",4,"ngIf"],[1,"form-check-label",2,"vertical-align","middle",3,"for"],["class","mr-2",3,"matTooltip",4,"ngIf"],["class","mr-2",4,"ngIf"],["class","py-0.5 px-2 rounded-full text-xs bg-primary text-white cursor-pointer font-medium","style","white-space: nowrap",4,"ngIf"],["type","checkbox",1,"form-check-input",3,"change","id","formControl","value"],[1,"mr-2",3,"matTooltip"],[1,"py-0.5","px-2","rounded-full","text-xs","bg-primary","text-white","cursor-pointer","font-medium",2,"white-space","nowrap"],[1,"flex","items-center","justify-center",2,"height","200px"]],template:function(s,t){1&s&&(o.j41(0,"div",5,0),o.DNE(2,W,10,9,"div",6)(3,fo,70,57,"div",7),o.k0s()),2&s&&(o.R7$(2),o.Y8G("ngIf",t.showCreateNewClassroom),o.R7$(),o.Y8G("ngIf",t.form))},dependencies:[h.YU,h.Sq,h.bT,h.B3,G.kk,G.Cp,z.qe,z.$C,z.$l,A.oV,T.yg,T.E$,T.d6,l.qT,l.Zm,l.BC,l.cb,l.l_,l.j4,b.Yh,b.Gl,R.WGl,M.e,N.W,B.g,h.P9,d.wp,d.gC],encapsulation:2}),i})()},3780:(j,k,r)=>{r.d(k,{Q:()=>f});var o=r(38009),l=r(48891),b=r(53793),c=r(51913);let f=(()=>{var u;class C{constructor(_,d){this.commonService=_,this.permissionService=d}findClassroomWithNoFullPermission(_,d){let v=[];return _.forEach(g=>{(null==g.permissionObj||!this.permissionService.hasFullPermission(o.t[d],g))&&v.push(g)}),v}getClassroomIdsCheckedInGroup(_){return _.getRawValue().filter(d=>d.isChecked).map(d=>d.classroomId)}}return(u=C).\u0275fac=function(_){return new(_||u)(l.KVO(b.R),l.KVO(c.p))},u.\u0275prov=l.jDH({token:u,factory:u.\u0275fac,providedIn:"root"}),C})()}}]);