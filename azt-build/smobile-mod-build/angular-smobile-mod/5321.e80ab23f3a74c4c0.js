(self.webpackChunkSmobileMod=self.webpackChunkSmobileMod||[]).push([[5321],{7919:(D,y,c)=>{"use strict";c.d(y,{Z:()=>S});var v=c(48891);let S=(()=>{var o;class E{constructor(e){this.el=e,this.hasDecimalPoint=!1,this.hasNegativeSign=!1,this.navigationKeys=["Backspace","Delete","Tab","Escape","Enter","Home","End","ArrowLeft","ArrowRight","Clear","Copy","Paste"],this.decimal=!1,this.decimalSeparator=".",this.decimalSeparator1=".",this.decimalSeparator2=",",this.allowNegatives=!1,this.allowPaste=!0,this.negativeSign="-",this.min=-1/0,this.max=1/0,this.regex=null,this.inputElement=e.nativeElement}ngOnChanges(e){if(e.pattern&&(this.regex=this.pattern?RegExp(this.pattern):null),e.min){const t=Number(this.min);this.min=isNaN(t)?-1/0:t}if(e.max){const t=Number(this.max);this.max=isNaN(t)?1/0:t}}onBeforeInput(e){if(isNaN(Number(e.data))){if(e.data===this.decimalSeparator1||e.data===this.decimalSeparator2||e.data===this.negativeSign&&this.allowNegatives)return;e.preventDefault(),e.stopPropagation()}}onKeyDown(e){if(this.navigationKeys.indexOf(e.key)>-1||("a"===e.key||"KeyA"===e.code)&&!0===e.ctrlKey||("c"===e.key||"KeyC"===e.code)&&!0===e.ctrlKey||("v"===e.key||"KeyV"===e.code)&&!0===e.ctrlKey||("x"===e.key||"KeyX"===e.code)&&!0===e.ctrlKey||("a"===e.key||"KeyA"===e.code)&&!0===e.metaKey||("c"===e.key||"KeyC"===e.code)&&!0===e.metaKey||("v"===e.key||"KeyV"===e.code)&&!0===e.metaKey||("x"===e.key||"KeyX"===e.code)&&!0===e.metaKey)return;let t="";var a=e.key;if(e.key===this.decimalSeparator2&&(a=this.decimalSeparator1),this.decimal&&a===this.decimalSeparator1)return t=this.forecastValue(a),t.split(this.decimalSeparator1).length>2||(this.hasDecimalPoint=t.indexOf(this.decimalSeparator1)>-1,this.setNewValue(a)),void e.preventDefault();if(a===this.negativeSign&&this.allowNegatives)return t=this.forecastValue(a),t.charAt(0)!==this.negativeSign||t.split(this.negativeSign).length>2?void e.preventDefault():void(this.hasNegativeSign=t.split(this.negativeSign).length>-1);if(" "===a||isNaN(Number(a)))return void e.preventDefault();if(t=t||this.forecastValue(a),this.regex&&!this.regex.test(t))return void e.preventDefault();const r=Number(t);(r>this.max||r<this.min)&&e.preventDefault()}onPaste(e){if(!0===this.allowPaste){let t="";window.clipboardData?t=window.clipboardData.getData("text"):e.clipboardData&&e.clipboardData.getData&&(t=e.clipboardData.getData("text/plain")),this.pasteData(t),e.preventDefault()}else e.preventDefault(),e.stopPropagation()}onDrop(e){const t=e.dataTransfer?.getData("text")??"";this.inputElement.focus(),this.pasteData(t),e.preventDefault()}pasteData(e){e=this.replaceDecimalSeparator(e);const t=this.sanitizeInput(e);if(!t.includes(this.negativeSign)||!this.hasNegativeSign||this.getSelection().includes(this.negativeSign)){if(!document.execCommand("insertText",!1,t))if(this.inputElement.setRangeText){const{selectionStart:r,selectionEnd:i}=this.inputElement;this.inputElement.setRangeText(t,r??0,i??0,"end"),typeof window.InstallTrigger<"u"&&this.inputElement.dispatchEvent(new Event("input",{cancelable:!0}))}else this.insertAtCursor(this.inputElement,t);this.decimal&&(this.hasDecimalPoint=this.inputElement.value.indexOf(this.decimalSeparator1)>-1),this.hasNegativeSign=this.inputElement.value.indexOf(this.negativeSign)>-1}}setNewValue(e){e=this.replaceDecimalSeparator(e),this.insertAtCursor(this.inputElement,e),this.decimal&&(this.hasDecimalPoint=this.inputElement.value.indexOf(this.decimalSeparator1)>-1),this.hasNegativeSign=this.inputElement.value.indexOf(this.negativeSign)>-1}insertAtCursor(e,t){const a=e.selectionStart??0,r=e.selectionEnd??0;e.value=e.value.substring(0,a)+t+e.value.substring(r,e.value.length);const i=a+t.length;e.focus(),e.setSelectionRange(i,i),this.triggerEvent(e,"input")}triggerEvent(e,t){if("createEvent"in document){const a=document.createEvent("HTMLEvents");a.initEvent(t,!1,!0),e.dispatchEvent(a)}}sanitizeInput(e){let a,t="";a=this.decimal&&this.isValidDecimal(e)?new RegExp(`${this.getNegativeSignRegExp()}[^0-9${this.decimalSeparator1}]`,"g"):new RegExp(`${this.getNegativeSignRegExp()}[^0-9]`,"g"),t=e.replace(a,"");const r=this.inputElement.maxLength;if(r>0){const i=r-this.inputElement.value.length+(t.includes(`${this.negativeSign}`)?1:0);t=i>0?t.substring(0,i):""}return t}getNegativeSignRegExp(){return!this.allowNegatives||this.hasNegativeSign&&!this.getSelection().includes(this.negativeSign)?"":`(?!^${this.negativeSign})`}isValidDecimal(e){if(this.hasDecimalPoint){const t=this.getSelection();return t&&t.indexOf(this.decimalSeparator1)>-1?e.split(this.decimalSeparator1).length<=2:e.indexOf(this.decimalSeparator1)<0}return e.split(this.decimalSeparator1).length<=2}getSelection(){return this.inputElement.value.substring(this.inputElement.selectionStart??0,this.inputElement.selectionEnd??0)}forecastValue(e){const a=this.inputElement.selectionEnd??0,r=this.inputElement.value;return r.substring(0,this.inputElement.selectionStart??0)+e+r.substring(a)}replaceDecimalSeparator(e){return e.replace(",",this.decimalSeparator).replace(".",this.decimalSeparator)}}return(o=E).\u0275fac=function(e){return new(e||o)(v.rXU(v.aKT))},o.\u0275dir=v.FsC({type:o,selectors:[["","appOnlyNumber",""]],hostBindings:function(e,t){1&e&&v.bIt("beforeinput",function(r){return t.onBeforeInput(r)})("keydown",function(r){return t.onKeyDown(r)})("paste",function(r){return t.onPaste(r)})("drop",function(r){return t.onDrop(r)})},inputs:{decimal:"decimal",decimalSeparator:"decimalSeparator",decimalSeparator1:"decimalSeparator1",decimalSeparator2:"decimalSeparator2",allowNegatives:"allowNegatives",allowPaste:"allowPaste",negativeSign:"negativeSign",min:"min",max:"max",pattern:"pattern"},features:[v.OA$]}),E})()},10296:(D,y,c)=>{"use strict";c.d(y,{R:()=>t});var v=c(43277),o=c(18148),E=c(48891),p=c(52509),e=c(53793);let t=(()=>{var a;class r{constructor(n,d){this.mobileWebviewService=n,this.commonService=d}shareFileWithBlob(n,d){if(this.commonService.businessIdCanvasLMSCloudView(void 0)>0)return v.saveAs(n,d);if(this.commonService.isMobileWebview(void 0)){o.L.openLoadingEffect(this.commonService.myTranslateInstant("lang_auto_dang_lay_du_lieu_tu_he_thong")??"");let s=new FileReader;s.readAsDataURL(n),s.onloadend=()=>{let g=s.result;"string"==typeof g&&(this.mobileWebviewService.sendShareFileBase64(d,String(g)),o.L.closeLoadingEffect(100))}}else v.saveAs(n,d)}shareFileWithBase64(n,d){if(this.commonService.businessIdCanvasLMSCloudView(void 0)>0)return v.saveAs(n,d);this.commonService.isMobileWebview(void 0)?this.mobileWebviewService.sendShareFileBase64(d,n):v.saveAs(n,d)}}return(a=r).\u0275fac=function(n){return new(n||a)(E.KVO(p.f),E.KVO(e.R))},a.\u0275prov=E.jDH({token:a,factory:a.\u0275fac,providedIn:"root"}),r})()},18148:(D,y,c)=>{"use strict";c.d(y,{L:()=>v});let v=(()=>{var S;class o{static openLoadingEffect(p){o.getDomElement().style.display="flex",setTimeout(()=>{o.changeMsgLoadingEffect(p)},50)}static closeLoadingEffect(p){return new Promise(e=>{setTimeout(()=>{const t=o.getDomElement();t&&(t.style.display="none"),e(!0)},p)})}static changeMsgLoadingEffect(p){o.getDomContent().innerText=p}static getDomContent(){return document.getElementById(o.idStatusContent)??document.createElement("span")}static getDomElement(){return document.getElementById(o.idComponent)??this.createDomElement()}static createDomElement(){const p=document.createElement("div");return p.id=o.idComponent,p.setAttribute("style","position: fixed;display: flex;width: 100vw;height: 100%;background: #000000c7;color: #ffffff;font-size: 20px;font-weight: lighter;justify-content: center;align-items: center;cursor: progress;z-index: 9999;top: 0;left: 0;"),p.style.display="none",p.innerHTML=`\n        <div class="text-center" style="height: 85%; overflow-x: auto;">\n            <div class="flex justify-center mt-5">\n                <svg width="20" viewBox="0 0 58 58" xmlns="http://www.w3.org/2000/svg">\n                    <g fill="none" fill-rule="evenodd">\n                        <g transform="translate(2 1)" stroke="currentColor" stroke-width="1.5">\n                            <circle cx="42.601" cy="11.462" r="5" fill-opacity="1" fill="currentColor">\n                                <animate attributeName="fill-opacity" begin="0s" dur="1.3s" values="1;0;0;0;0;0;0;0" calcMode="linear" repeatCount="indefinite"></animate>\n                            </circle>\n                            <circle cx="49.063" cy="27.063" r="5" fill-opacity="0" fill="currentColor">\n                                <animate attributeName="fill-opacity" begin="0s" dur="1.3s" values="0;1;0;0;0;0;0;0" calcMode="linear" repeatCount="indefinite"></animate>\n                            </circle>\n                            <circle cx="42.601" cy="42.663" r="5" fill-opacity="0" fill="currentColor">\n                                <animate attributeName="fill-opacity" begin="0s" dur="1.3s" values="0;0;1;0;0;0;0;0" calcMode="linear" repeatCount="indefinite"></animate>\n                            </circle>\n                            <circle cx="27" cy="49.125" r="5" fill-opacity="0" fill="currentColor">\n                                <animate attributeName="fill-opacity" begin="0s" dur="1.3s" values="0;0;0;1;0;0;0;0" calcMode="linear" repeatCount="indefinite"></animate>\n                            </circle>\n                            <circle cx="11.399" cy="42.663" r="5" fill-opacity="0" fill="currentColor">\n                                <animate attributeName="fill-opacity" begin="0s" dur="1.3s" values="0;0;0;0;1;0;0;0" calcMode="linear" repeatCount="indefinite"></animate>\n                            </circle>\n                            <circle cx="4.938" cy="27.063" r="5" fill-opacity="0" fill="currentColor">\n                                <animate attributeName="fill-opacity" begin="0s" dur="1.3s" values="0;0;0;0;0;1;0;0" calcMode="linear" repeatCount="indefinite"></animate>\n                            </circle>\n                            <circle cx="11.399" cy="11.462" r="5" fill-opacity="0" fill="currentColor">\n                                <animate attributeName="fill-opacity" begin="0s" dur="1.3s" values="0;0;0;0;0;0;1;0" calcMode="linear" repeatCount="indefinite"></animate>\n                            </circle>\n                            <circle cx="27" cy="5" r="5" fill-opacity="0" fill="currentColor">\n                                <animate attributeName="fill-opacity" begin="0s" dur="1.3s" values="0;0;0;0;0;0;0;1" calcMode="linear" repeatCount="indefinite"></animate>\n                            </circle>\n                        </g>\n                    </g>\n                </svg>\n            </div>\n            <div style="margin-top: 10px;position: relative;">\n                <span id="${o.idStatusContent}"></span>\n            </div>\n        </div>`,document.body.appendChild(p),p}}return(S=o).idComponent="azt-status-loading-effect",S.idStatusContent="azt-status-loading-effect-content",o})()},9516:(D,y,c)=>{"use strict";c.d(y,{L:()=>n});var v=c(73014),S=c(27691),o=c(48891),E=c(59640),p=c(64198),e=c(39712),t=c(52509),a=c(41426),r=c(63709),i=c(52909);let n=(()=>{var d;class s extends E.H{uploadFile(l,u){return new Promise(m=>{this.checkCompressImage(l,_=>{this.fileUploadQueue=[],this.showProgress?this.apiUploadService.commonUploadFileProgress(this.uploadToCdnMenu,_,this.qrUploadHashCode).subscribe(f=>{if(f.type!==S.hv.UploadProgress)if(1===f.success){const h={...f.data};m(h)}else this.showErrorSnack(this.commonService.translateToKeyParam("lang_auto_khong_upload_duoc_tep_tin_vui_long_thu_lai_sau",f.message??"none")),m(null);else{let h=(f.loaded??0)/(f.total??1)*100,w=this.fileUploadQueue.find(b=>b.uuid==u);w?w.uploadProgress=h:this.fileUploadQueue.push({uuid:u,uploadProgress:0,fileName:l.name})}}):this.apiUploadService.commonUploadFile(this.uploadToCdnMenu,_,this.qrUploadHashCode).subscribe(f=>{if(f.type!==S.hv.UploadProgress)if(1===f.success){const h={...f.data};m(h)}else this.showErrorSnack(this.commonService.translateToKeyParam("lang_auto_khong_upload_duoc_tep_tin_vui_long_thu_lai_sau",f.message??"none")),m(null)})})})}onOpenFileDictionary(){return this.uploadActionsEvent.emit("SELECT_FILE"),!0}onFileSelected(l){this.uploadActionsEvent.emit("SELECTED");const u=l.target,m=u.files;m&&(this.emitFile(m),u.files=null)}onCancelSelect(l){this.uploadActionsEvent.emit("SELECTED")}onDrop(l){this.emitFile(l)}emitFile(l){return this.isDisabled?(this.limitSize=this.limitSize>200?200:this.limitSize,Array.from(l).find(_=>(0,p.hD)(_.size)>=this.limitSize)?this.showErrorSnack(this.commonService.translateToKeyParam("lang_auto_vui_long_chon_tep_co_kich_thuoc_nho_hon",this.limitSize.toString(),"MB")):Array.from(l).find(_=>this.isNotSupportedFile(_))?this.showErrorSnack(this.commonService.translateToKeyParam("lang_auto_chua_ho_tro_dinh_dang",this.notSupportedFile)):(this.isUploadFile=!0,this.isUploading.emit(this.isUploadFile),void this.checkConvertPdfToImages(Array.from(l),_=>{const f=_.map(h=>this.uploadFile(h,this.uuidService.getUuid()));Promise.all(f).then(h=>{this.isUploadFile=!1,this.isUploading.emit(this.isUploadFile);let w=h.filter(this.commonService.notEmpty);this.emitUploadComplete(w)})}))):this.showErrorSnack(this.commonService.translateString("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay"))}checkConvertPdfToImages(l,u){if(!this.convertPdfToImages)return u(l);this.convertAllPdfToImages(l).then(m=>{u(m)})}convertAllPdfToImages(l){var u=this;return new Promise(function(){var m=(0,v.A)(function*(_,f){let h=[];for(let w of l)if((0,p.Ev)(w.type))try{const b=1e3*u.convertPdfTimeout;let C=yield u.withTimeout(u.myPdfService.getImageWithPdf(w),b);h.push(...C)}catch{u.showErrorSnack("lang_common_convert_pdf_to_image_timeout"),_([])}else h.push(w);_(h)});return function(_,f){return m.apply(this,arguments)}}())}checkCompressImage(l,u){this.allowCompressImage?(0,p.w4)(l).then(m=>{u(m)}):u(l)}isNotSupportedFile(l){const u=[this.notSupportedFile],m=l.name.split(".").pop()?.toLowerCase();return u.includes(`.${m}`)}withTimeout(l,u){return new Promise((m,_)=>{const f=setTimeout(()=>{_(new Error("Operation timed out"))},u);l.then(h=>{clearTimeout(f),m(h)}).catch(h=>{clearTimeout(f),_(h)})})}constructor(l,u,m,_){super(),this.mobileWebviewService=l,this.apiUploadService=u,this.myPdfService=m,this.uuidService=_,this.convertPdfTimeout=30,this.isDisabled=!0,this.notSupportedFile=e.Ym.NONE,this.limitSize=200,this.allowCompressImage=!0,this.convertPdfToImages=!1,this.qrUploadHashCode="",this.showProgress=!1,this.isUploading=new o.bkB,this.uploadActionsEvent=new o.bkB,this.isUploadFile=!1,this.fileUploadQueue=[]}}return(d=s).\u0275fac=function(l){return new(l||d)(o.rXU(t.f),o.rXU(a.T),o.rXU(r.C),o.rXU(i.D))},d.\u0275cmp=o.VBU({type:d,selectors:[["ng-component"]],inputs:{convertPdfTimeout:"convertPdfTimeout",fileType:"fileType",uploadToCdnMenu:"uploadToCdnMenu",isDisabled:"isDisabled",notSupportedFile:"notSupportedFile",limitSize:"limitSize",allowCompressImage:"allowCompressImage",convertPdfToImages:"convertPdfToImages",qrUploadHashCode:"qrUploadHashCode",showProgress:"showProgress"},outputs:{isUploading:"isUploading",uploadActionsEvent:"uploadActionsEvent"},features:[o.Vt3],decls:0,vars:0,template:function(l,u){},encapsulation:2}),s})()},43277:function(D,y){var c,S;void 0!==(S="function"==typeof(c=function(){"use strict";function E(i,n,d){var s=new XMLHttpRequest;s.open("GET",i),s.responseType="blob",s.onload=function(){r(s.response,n,d)},s.onerror=function(){console.error("could not download file")},s.send()}function p(i){var n=new XMLHttpRequest;n.open("HEAD",i,!1);try{n.send()}catch{}return 200<=n.status&&299>=n.status}function e(i){try{i.dispatchEvent(new MouseEvent("click"))}catch{var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),i.dispatchEvent(n)}}var t="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,a=t.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),r=t.saveAs||("object"!=typeof window||window!==t?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(i,n,d){var s=t.URL||t.webkitURL,g=document.createElement("a");g.download=n=n||i.name||"download",g.rel="noopener","string"==typeof i?(g.href=i,g.origin===location.origin?e(g):p(g.href)?E(i,n,d):e(g,g.target="_blank")):(g.href=s.createObjectURL(i),setTimeout(function(){s.revokeObjectURL(g.href)},4e4),setTimeout(function(){e(g)},0))}:"msSaveOrOpenBlob"in navigator?function(i,n,d){if(n=n||i.name||"download","string"!=typeof i)navigator.msSaveOrOpenBlob(function o(i,n){return typeof n>"u"?n={autoBom:!1}:"object"!=typeof n&&(console.warn("Deprecated: Expected third argument to be a object"),n={autoBom:!n}),n.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\ufeff",i],{type:i.type}):i}(i,d),n);else if(p(i))E(i,n,d);else{var s=document.createElement("a");s.href=i,s.target="_blank",setTimeout(function(){e(s)})}}:function(i,n,d,s){if((s=s||open("","_blank"))&&(s.document.title=s.document.body.innerText="downloading..."),"string"==typeof i)return E(i,n,d);var g="application/octet-stream"===i.type,l=/constructor/i.test(t.HTMLElement)||t.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||g&&l||a)&&typeof FileReader<"u"){var m=new FileReader;m.onloadend=function(){var h=m.result;h=u?h:h.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=h:location=h,s=null},m.readAsDataURL(i)}else{var _=t.URL||t.webkitURL,f=_.createObjectURL(i);s?s.location=f:location.href=f,s=null,setTimeout(function(){_.revokeObjectURL(f)},4e4)}});t.saveAs=r.saveAs=r,D.exports=r})?c.apply(y,[]):c)&&(D.exports=S)}}]);