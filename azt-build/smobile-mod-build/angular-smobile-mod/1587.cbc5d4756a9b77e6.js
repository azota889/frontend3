(self.webpackChunkSmobileMod=self.webpackChunkSmobileMod||[]).push([[1587],{61587:(D,F,s)=>{"use strict";s.r(F),s.d(F,{PaymentModule:()=>Lt});var _=s(54460),o=s(10936),T=s(89163),e=s(65162),g=s(69223),x=s(15343),b=s(13763),C=s(25571),E=s(21656),u=s(70050),m=s(7050),v=s(35143),d=s(43234),I=s(1133),t=s(48891),M=s(36484),j=s(39307);let B=(()=>{var n;class c{constructor(i,r){this.userService=i,this.redirectService=r}canActivate(i,r){return!(-1===r.url.indexOf("/return-order")&&!this.userService.isLogin())}canActivateChild(i,r){return this.canActivate(i,r)}canLoad(i){const r=`/${i.path}`;return!(-1===r.indexOf("/return-order")&&!this.userService.isLogin()&&(this.redirectService.redirectLoginByReturnUrl(r),1))}}return(n=c).\u0275fac=function(i){return new(i||n)(t.KVO(M.R),t.KVO(j.m))},n.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"}),c})();var A=s(89121),k=s(59640),y=s(31418),S=s(10296),l=s(67638),f=s(18718),p=s(61224),P=s(69715),h=s(76975);function G(n,c){if(1&n&&t.nrm(0,"azt-loading-effect",4),2&n){const a=t.XpG(2);t.Y8G("currentStatusObj",a.statusObj)}}function L(n,c){1&n&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&n&&(t.R7$(),t.JRh(t.bMT(2,1,"lang_payment_history_deposit_money_into_wallet")))}function w(n,c){if(1&n){const a=t.RV6();t.j41(0,"span",26),t.bIt("click",function(){t.eBV(a);const r=t.XpG().$implicit,R=t.XpG(4);return t.Njj(R.redirectToTakeTest(r.examHashId))}),t.EFF(1),t.nI1(2,"mytranslate"),t.j41(3,"b"),t.EFF(4),t.k0s()()}if(2&n){const a=t.XpG().$implicit;t.R7$(),t.SpI(" ",t.bMT(2,2,"lang_payment_history_buying_exam"),": "),t.R7$(3),t.JRh(a.examName)}}function U(n,c){1&n&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&n&&(t.R7$(),t.JRh(t.bMT(2,1,"lang_payment_history_withdraw_money")))}function N(n,c){if(1&n&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"mytranslate"),t.j41(3,"b"),t.EFF(4),t.k0s()()),2&n){const a=t.XpG().$implicit;t.R7$(),t.SpI(" ",t.bMT(2,2,"lang_payment_history_transfer"),": "),t.R7$(3),t.JRh(a.relativeName)}}function V(n,c){1&n&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&n&&(t.R7$(),t.JRh(t.bMT(2,1,"lang_payment_history_donation_system")))}function Y(n,c){if(1&n&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"mytranslate"),t.j41(3,"b"),t.EFF(4),t.k0s()()),2&n){const a=t.XpG().$implicit;t.R7$(),t.SpI(" ",t.bMT(2,2,"lang_payment_history_get_from_account"),": "),t.R7$(3),t.JRh(a.relativeName)}}function X(n,c){if(1&n&&(t.j41(0,"div",16)(1,"div",17)(2,"div",18)(3,"div",19)(4,"span",20),t.EFF(5),t.k0s()()(),t.j41(6,"div",21)(7,"span",22),t.DNE(8,L,3,3,"span",23)(9,w,5,4,"span",24)(10,U,3,3,"span",23)(11,N,5,4,"span",23)(12,V,3,3,"span",23)(13,Y,5,4,"span",23),t.k0s(),t.j41(14,"span",25),t.EFF(15),t.nI1(16,"formatFullDateTimeWithoutSecondByUserUnitPipe"),t.k0s()()()()),2&n){const a=c.$implicit,i=t.XpG(4);t.R7$(5),t.Lme("",i.parseIntAmount(a.amount),"",a.amount," azo"),t.R7$(3),t.Y8G("ngIf",0==a.type),t.R7$(),t.Y8G("ngIf",1==a.type&&"EXAM"==a.productType&&a.productId),t.R7$(),t.Y8G("ngIf",2==a.type),t.R7$(),t.Y8G("ngIf",3==a.type),t.R7$(),t.Y8G("ngIf",4==a.type),t.R7$(),t.Y8G("ngIf",6==a.type),t.R7$(2),t.SpI(" ",t.bMT(16,9,a.createdAt)," ")}}function H(n,c){if(1&n){const a=t.RV6();t.j41(0,"div",9)(1,"div",10)(2,"p",11),t.EFF(3),t.nI1(4,"mytranslate"),t.k0s(),t.j41(5,"p",12)(6,"a",13),t.bIt("click",function(){t.eBV(a);const r=t.XpG(3);return t.Njj(r.exportExcelForPayment())}),t.EFF(7),t.nI1(8,"mytranslate"),t.k0s()()(),t.j41(9,"div",14),t.DNE(10,X,17,11,"div",15),t.k0s()()}if(2&n){const a=t.XpG(3);t.R7$(3),t.JRh(t.bMT(4,3,"lang_payment_history_transaction_history")),t.R7$(4),t.JRh(t.bMT(8,5,"lang_payment_history_export_excel")),t.R7$(3),t.Y8G("ngForOf",a.paymentHistories)}}function W(n,c){1&n&&(t.j41(0,"div",27),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&n&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"lang_payment_history_transfer_null")," "))}function K(n,c){if(1&n&&(t.j41(0,"div",5)(1,"div",6),t.DNE(2,H,11,7,"div",7)(3,W,3,3,"div",8),t.k0s()()),2&n){const a=t.XpG(2);t.R7$(2),t.Y8G("ngIf",0!=(null==a.paymentHistories?null:a.paymentHistories.length)),t.R7$(),t.Y8G("ngIf",0==(null==a.paymentHistories?null:a.paymentHistories.length))}}function J(n,c){if(1&n&&(t.j41(0,"student-layout",2),t.DNE(1,G,1,1,"azt-loading-effect",3)(2,K,4,2,"ng-template",null,0,t.C5r),t.k0s()),2&n){const a=t.sdS(3),i=t.XpG();t.Y8G("headerBackToLink","/student/classroom/0"),t.R7$(),t.Y8G("ngIf",i.isLoading)("ngIfElse",a)}}function Q(n,c){if(1&n&&t.nrm(0,"azt-loading-effect",4),2&n){const a=t.XpG(2);t.Y8G("currentStatusObj",a.statusObj)}}function Z(n,c){1&n&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&n&&(t.R7$(),t.JRh(t.bMT(2,1,"lang_payment_history_deposit_money_into_wallet")))}function q(n,c){if(1&n){const a=t.RV6();t.j41(0,"span",31),t.bIt("click",function(){t.eBV(a);const r=t.XpG().$implicit,R=t.XpG(4);return t.Njj(R.redirectToTakeTest(r.examHashId))}),t.EFF(1),t.nI1(2,"mytranslate"),t.j41(3,"b"),t.EFF(4),t.k0s()()}if(2&n){const a=t.XpG().$implicit;t.R7$(),t.SpI(" ",t.bMT(2,2,"lang_payment_history_buying_exam"),": "),t.R7$(3),t.JRh(a.examName)}}function tt(n,c){1&n&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&n&&(t.R7$(),t.JRh(t.bMT(2,1,"lang_payment_history_withdraw_money")))}function et(n,c){if(1&n&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"mytranslate"),t.j41(3,"b"),t.EFF(4),t.k0s()()),2&n){const a=t.XpG().$implicit;t.R7$(),t.SpI(" ",t.bMT(2,2,"lang_payment_history_transfer"),": "),t.R7$(3),t.JRh(a.relativeName)}}function nt(n,c){1&n&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&n&&(t.R7$(),t.JRh(t.bMT(2,1,"lang_payment_history_donation_system")))}function at(n,c){if(1&n){const a=t.RV6();t.j41(0,"span",32),t.bIt("click",function(){t.eBV(a);const r=t.XpG().$implicit,R=t.XpG(4);return t.Njj(R.redirectToTestedList(r.examCategoryId,r.productId))}),t.EFF(1),t.nI1(2,"mytranslate"),t.j41(3,"b"),t.EFF(4),t.k0s()()}if(2&n){const a=t.XpG().$implicit;t.R7$(),t.SpI(" ",t.bMT(2,2,"lang_payment_history_get_from_selling_exam"),": "),t.R7$(3),t.JRh(a.examName)}}function ot(n,c){if(1&n&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"mytranslate"),t.j41(3,"b"),t.EFF(4),t.k0s()()),2&n){const a=t.XpG().$implicit;t.R7$(),t.SpI(" ",t.bMT(2,2,"lang_payment_history_get_from_account"),": "),t.R7$(3),t.JRh(a.relativeName)}}function it(n,c){if(1&n&&(t.j41(0,"div",16)(1,"div",17)(2,"div",18)(3,"div",19)(4,"span",20),t.EFF(5),t.k0s()()(),t.j41(6,"div",21)(7,"span",22),t.DNE(8,Z,3,3,"span",23)(9,q,5,4,"span",29)(10,tt,3,3,"span",23)(11,et,5,4,"span",23)(12,nt,3,3,"span",23)(13,at,5,4,"span",30)(14,ot,5,4,"span",23),t.k0s(),t.j41(15,"span",25),t.EFF(16),t.nI1(17,"formatFullDateTimeWithoutSecondByUserUnitPipe"),t.k0s()()()()),2&n){const a=c.$implicit,i=t.XpG(4);t.R7$(5),t.Lme("",i.parseIntAmount(a.amount),"",a.amount," azo"),t.R7$(3),t.Y8G("ngIf",0==a.type),t.R7$(),t.Y8G("ngIf",1==a.type&&"EXAM"==a.productType&&a.productId),t.R7$(),t.Y8G("ngIf",2==a.type),t.R7$(),t.Y8G("ngIf",3==a.type),t.R7$(),t.Y8G("ngIf",4==a.type),t.R7$(),t.Y8G("ngIf",5==a.type&&"EXAM"==a.productType&&a.productId),t.R7$(),t.Y8G("ngIf",6==a.type),t.R7$(2),t.SpI(" ",t.bMT(17,10,a.createdAt)," ")}}function rt(n,c){if(1&n){const a=t.RV6();t.j41(0,"div",9)(1,"div",10)(2,"p",11),t.EFF(3),t.nI1(4,"mytranslate"),t.k0s(),t.j41(5,"p",12)(6,"a",28),t.bIt("click",function(){t.eBV(a);const r=t.XpG(3);return t.Njj(r.exportExcelForPayment())}),t.EFF(7),t.nI1(8,"mytranslate"),t.k0s()()(),t.j41(9,"div",14),t.DNE(10,it,18,12,"div",15),t.k0s()()}if(2&n){const a=t.XpG(3);t.R7$(3),t.JRh(t.bMT(4,3,"lang_payment_history_transaction_history")),t.R7$(4),t.JRh(t.bMT(8,5,"lang_payment_history_export_excel")),t.R7$(3),t.Y8G("ngForOf",a.paymentHistories)}}function st(n,c){1&n&&(t.j41(0,"div",27),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&n&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"lang_payment_history_transfer_null")," "))}function ct(n,c){if(1&n&&(t.j41(0,"div",5)(1,"div",6),t.DNE(2,rt,11,7,"div",7)(3,st,3,3,"div",8),t.k0s()()),2&n){const a=t.XpG(2);t.R7$(2),t.Y8G("ngIf",0!=(null==a.paymentHistories?null:a.paymentHistories.length)),t.R7$(),t.Y8G("ngIf",0==(null==a.paymentHistories?null:a.paymentHistories.length))}}function lt(n,c){if(1&n&&(t.j41(0,"teacher-layout",2),t.DNE(1,Q,1,1,"azt-loading-effect",3)(2,ct,4,2,"ng-template",null,0,t.C5r),t.k0s()),2&n){const a=t.sdS(3),i=t.XpG();t.Y8G("headerBackToLink","/admin/dashboard"),t.R7$(),t.Y8G("ngIf",i.isLoading)("ngIfElse",a)}}let _t=(()=>{var n;class c extends k.H{exportExcelForPayment(){let i=this.commonService.createFileNameExportFile([this.excelFileName]);const r=this.exportExcelService.exportExcelForPayment(this.paymentHistories);this.shareFileFlutterService.shareFileWithBlob(r,i+".xlsx")}redirectToTestedList(i,r){this.commonService.myNavigation(null!=i?`/admin/testbank/exam-results-list/${i}/${r}/0`:`/admin/testbank/exam-results-list/0/${r}/0`)}redirectToTakeTest(i){this.commonService.myNavigation(`/de-thi/${i}`)}parseIntAmount(i){return Number(i)>0?"+":""}getData(){this.isLoading=!0,this.paymentHistoryService.apiPaymentHistoryGetObjsGet().subscribe(i=>{1==i.success?(this.isLoading=!1,this.paymentHistories=i.data?.objs??[]):this.showErrorSnack("lang_auto_khong_load_duoc_du_lieu")})}checkRoleUser(){this.userService.isTeacherRole()&&(this.isTeacherRole=!0)}ngOnInit(){this.getData(),this.commonService.translateMetaData({title:"lang_core_payment_history_title",description:"lang_core_payment_history_description",image:"lang_cms_test_image"}),this.checkRoleUser(),super.ngOnInit()}constructor(i,r,R,z){super(),this.userService=i,this.paymentHistoryService=r,this.shareFileFlutterService=R,this.exportExcelService=z,this.isLoading=!1,this.isTeacherRole=!1,this.excelFileName="lich_su_azo"}}return(n=c).\u0275fac=function(i){return new(i||n)(t.rXU(M.R),t.rXU(y.og),t.rXU(S.R),t.rXU(l.x))},n.\u0275cmp=t.VBU({type:n,selectors:[["app-payment-history"]],features:[t.Vt3],decls:2,vars:2,consts:[["doneLoading",""],[3,"headerBackToLink",4,"ngIf"],[3,"headerBackToLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[1,"app","px-4","py-2",2,"max-width","1000px","margin","auto"],[1,"main","p-3"],["class","main-content mt-4",4,"ngIf"],["class","text-center",4,"ngIf"],[1,"main-content","mt-4"],[1,"grid","grid-cols-12","gap-2"],[1,"content_text","col-span-6"],[1,"content_text","flex","justify-end","col-span-6",2,"color","#3c8dbc"],["azt-track-service","payment-history-lvIRzsNaCWe",3,"click"],[1,"content_body","grid","grid-cols-12"],["class","block col-span-12",4,"ngFor","ngForOf"],[1,"block","col-span-12"],[1,"notify__block"],[1,"w-32","left-col","flex","justify-center","items-center","ng-star-inserted","notify__class"],[1,"text-center","text-white","class-info","pt-2","pb-2"],[1,"text-azo"],[1,"notify__content"],[1,"notify__active"],[4,"ngIf"],["azt-track-service","payment-history-4nTkXeIDYtk","class","clickable",3,"click",4,"ngIf"],[1,"notify__time"],["azt-track-service","payment-history-4nTkXeIDYtk",1,"clickable",3,"click"],[1,"text-center"],["azt-track-service","payment-history-yHYAiyEevee",3,"click"],["azt-track-service","payment-history-N_rOE_wUcy1","class","clickable",3,"click",4,"ngIf"],["azt-track-service","payment-history-PsnrlpNd0UL","class","clickable",3,"click",4,"ngIf"],["azt-track-service","payment-history-N_rOE_wUcy1",1,"clickable",3,"click"],["azt-track-service","payment-history-PsnrlpNd0UL",1,"clickable",3,"click"]],template:function(i,r){1&i&&t.DNE(0,J,4,3,"student-layout",1)(1,lt,4,3,"teacher-layout",1),2&i&&(t.Y8G("ngIf",!r.isTeacherRole),t.R7$(),t.Y8G("ngIf",r.isTeacherRole))},dependencies:[_.Sq,_.bT,f.K,p.Q,P.j,h.wp,h.bH],styles:[".main[_ngcontent-%COMP%]{border-width:0px;background-color:#ececec;border:none;border-radius:5px;box-shadow:0 0 5px #00000024}.block[_ngcontent-%COMP%]{padding-top:2px}.content__notifi[_ngcontent-%COMP%]{margin-top:20px}.content__title[_ngcontent-%COMP%]{text-transform:uppercase}.notify__block[_ngcontent-%COMP%]{display:flex;border-width:0px;background-color:#fff;border:none;border-radius:3px;box-shadow:0 0 6px #0000001f;margin-top:15px}.notify__class[_ngcontent-%COMP%]{max-width:100px;background-color:#00c0f0;border-radius:3px 0 0 3px/3px 0px 0px 3px}.notify__content[_ngcontent-%COMP%]{color:#000;padding:10px 0 10px 15px}.class__text[_ngcontent-%COMP%]{color:#fff;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.notify__name[_ngcontent-%COMP%]{font-weight:700}.notify__time[_ngcontent-%COMP%]{display:block;margin-top:10px}"]}),c})();var O=function(n){return n.AZO_PACKAGE="AZO_PACKAGE",n.EXAM="EXAM",n.BUSINESS_PACKAGE="BUSINESS_PACKAGE",n.UPGRADE_PACKAGE="UPGRADE_PACKAGE",n.unknown="unknown",n.VIP_PACKAGE="VIP_PACKAGE",n}(O||{}),mt=s(40509);const pt=(n,c)=>({"text-success":n,"text-danger":c});function ut(n,c){if(1&n&&(t.j41(0,"div",8)(1,"p",9),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s(),t.j41(4,"p",10),t.EFF(5),t.k0s()()),2&n){const a=t.XpG(2);t.R7$(2),t.SpI("",t.bMT(3,2,"lang_payment_business_package_business_email"),":"),t.R7$(3),t.JRh(a.transactionBusiness.registerObj.email)}}function dt(n,c){if(1&n&&(t.j41(0,"div",7)(1,"div",8)(2,"p",9),t.EFF(3),t.nI1(4,"mytranslate"),t.k0s(),t.j41(5,"p",10),t.EFF(6),t.k0s()(),t.j41(7,"div",8)(8,"p",9),t.EFF(9),t.nI1(10,"mytranslate"),t.k0s(),t.j41(11,"p",10),t.EFF(12),t.k0s()(),t.DNE(13,ut,6,4,"div",13),t.j41(14,"div",14)(15,"p",9),t.EFF(16),t.nI1(17,"mytranslate"),t.k0s(),t.j41(18,"p",10)(19,"a",15),t.EFF(20),t.k0s()()()()),2&n){const a=t.XpG();t.R7$(3),t.SpI("",t.bMT(4,8,"lang_payment_business_package_business_name"),":"),t.R7$(3),t.JRh(a.transactionBusiness.registerObj.businessName),t.R7$(3),t.SpI("",t.bMT(10,10,"lang_payment_business_package_business_phone"),":"),t.R7$(3),t.JRh(a.transactionBusiness.registerObj.phone),t.R7$(),t.Y8G("ngIf",a.transactionBusiness.registerObj.email),t.R7$(3),t.SpI("",t.bMT(17,12,"lang_payment_business_package_business_domain"),":"),t.R7$(3),t.Y8G("href","https://"+a.transactionBusiness.registerObj.domain+"/"+a.currentLanguage+"/auth/login?isFirstTime=1&access_token="+a.transactionBusiness.accessToken,t.B4B),t.R7$(),t.SpI(" https://",a.transactionBusiness.registerObj.domain," ")}}let gt=(()=>{var n;class c extends k.H{ngOnInit(){this.vnp_TxnRef=String(this.commonService.getMyQueryParam("vnp_TxnRef")),this.vnp_Amount=Number(this.commonService.getMyQueryParam("vnp_Amount"))/100,this.vnp_ResponseCode=String(this.commonService.getMyQueryParam("vnp_ResponseCode")),"00"==this.vnp_ResponseCode&&(this.successTransaction=!0),this.vnp_TransactionNo=String(this.commonService.getMyQueryParam("vnp_TransactionNo")),this.typeTransaction=this.commonService.getMyQueryParam("vnp_BankCode")??"";var i=String(this.commonService.getMyQueryParam("vnp_PayDate")),r=new Date(Number(i.substring(0,4)),Number(i.substring(4,6))-1,Number(i.substring(6,8)),Number(i.substring(8,10)),Number(i.substring(10,12)),Number(i.substring(12,14)),0);this.vnp_Second=r.getTime(),super.ngOnInit()}constructor(){super(),this.productType=O.unknown,this.currentLanguage=this.commonService.getCurrentLang(),this.EAztPaymentPackageType=O,this.vnp_TxnRef="",this.vnp_Amount=0,this.vnp_ResponseCode="",this.vnp_TransactionNo="",this.successTransaction=!1,this.typeTransaction="",this.vnp_Second=0}}return(n=c).\u0275fac=function(i){return new(i||n)},n.\u0275cmp=t.VBU({type:n,selectors:[["app-vn-pay-transaction-box"]],inputs:{productType:"productType",transactionBusiness:"transactionBusiness"},features:[t.Vt3],decls:41,vars:40,consts:[[1,"intro-y","pt-3","px-3"],[1,"text-center","pb-3","border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"mt-1","mb-2"],["strokeWidth","3",1,"w-12","h-12","flex-none",3,"name"],[1,"mt-2",2,"font-weight","700","font-size","18px",3,"ngClass"],[1,"text-center","mt-2","mb-2"],[1,"text-md","text-primary",2,"font-weight","450"],[1,"mb-2"],[1,"mt-2","pb-2","flex","justify-between","border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"text-slate-600"],[1,"desc__text",2,"font-weight","450"],[1,"desc__text",2,"font-weight","450","text-transform","uppercase"],["class","mb-2",4,"ngIf"],["class","mt-2 pb-2 flex justify-between border-b border-slate-200/60 dark:border-darkmode-400",4,"ngIf"],[1,"mt-2","pb-2","flex","justify-between","flex-wrap","border-b","border-slate-200/60","dark:border-darkmode-400"],[2,"word-break","break-all",3,"href"]],template:function(i,r){1&i&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2),t.nrm(3,"lucide-icon",3),t.k0s(),t.j41(4,"h3",4),t.EFF(5),t.nI1(6,"mytranslate"),t.nI1(7,"mytranslate"),t.k0s()(),t.j41(8,"div",5)(9,"p",6),t.EFF(10),t.nI1(11,"mytranslate"),t.k0s()(),t.j41(12,"div",7)(13,"div",8)(14,"p",9),t.EFF(15),t.nI1(16,"mytranslate"),t.k0s(),t.j41(17,"p",10),t.EFF(18),t.nI1(19,"number"),t.nI1(20,"mytranslate"),t.k0s()(),t.j41(21,"div",8)(22,"p",9),t.EFF(23),t.nI1(24,"mytranslate"),t.k0s(),t.j41(25,"p",11),t.EFF(26),t.k0s()(),t.j41(27,"div",8)(28,"p",9),t.EFF(29),t.nI1(30,"mytranslate"),t.k0s(),t.j41(31,"p",10),t.EFF(32),t.k0s()(),t.j41(33,"div",8)(34,"p",9),t.EFF(35),t.nI1(36,"mytranslate"),t.k0s(),t.j41(37,"p",10),t.EFF(38),t.nI1(39,"formatFullDateTimeWithoutSecondByUserUnitPipe"),t.k0s()()(),t.DNE(40,dt,21,14,"div",12),t.k0s()),2&i&&(t.R7$(3),t.Aen("color:"+(r.successTransaction?"#10eb00":"#d21414")),t.FS9("name",r.successTransaction?"circle-check":"circle-x"),t.R7$(),t.Y8G("ngClass",t.l_i(37,pt,r.successTransaction,!r.successTransaction)),t.R7$(),t.SpI(" ",r.successTransaction?t.bMT(6,17,"lang_payment_return_buying_success"):t.bMT(7,19,"lang_payment_return_buying_danger")," "),t.R7$(5),t.Lme("",t.bMT(11,21,"lang_payment_return_code"),": ",r.vnp_TxnRef,""),t.R7$(5),t.SpI("",t.bMT(16,23,"lang_payment_return_payment_number"),":"),t.R7$(3),t.Lme("",t.bMT(19,25,r.vnp_Amount)," ",t.bMT(20,27,"lang_auto_vnd_upper"),""),t.R7$(5),t.SpI("",t.bMT(24,29,"lang_payment_return_method_payment"),":"),t.R7$(3),t.JRh(r.typeTransaction),t.R7$(3),t.SpI("",t.bMT(30,31,"lang_payment_return_code_payment_vnpay"),":"),t.R7$(3),t.JRh(r.vnp_TransactionNo),t.R7$(3),t.SpI("",t.bMT(36,33,"lang_payment_return_time_pay"),":"),t.R7$(3),t.JRh(t.bMT(39,35,r.vnp_Second)),t.R7$(2),t.Y8G("ngIf",r.transactionBusiness&&r.productType===r.EAztPaymentPackageType.BUSINESS_PACKAGE))},dependencies:[_.YU,_.bT,x.WGl,_.QX,h.wp,h.bH],styles:[".payment-box[_ngcontent-%COMP%]{margin:20px auto auto;border:1px solid #d3d3d3;background-color:#fff;max-width:350px;border-radius:5px;align-items:center;flex-direction:column;padding:20px 0}.payment-box[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{width:100%;float:left;padding:0 15px}.body__about[_ngcontent-%COMP%]{padding-top:20px;width:100%;border-top:1px solid #d3d3d3;justify-content:center}"]}),c})();var yt=s(92401),ft=s(46899);const $=n=>[n];function vt(n,c){if(1&n&&(t.qex(0),t.j41(1,"a",5),t.nI1(2,"navigationLocalize"),t.nI1(3,"navigationLocalizeForQueryString"),t.EFF(4),t.nI1(5,"mytranslate"),t.k0s(),t.bVm()),2&n){const a=t.XpG(2);t.R7$(),t.Y8G("routerLink",t.eq3(9,$,t.bMT(2,3,"/auth/login")))("queryParams",t.bMT(3,5,"?return_url=/"+a.currentLanguage+"/payment/convert-product/"+a.currentUserToken+"&backTo="+a.backTo+"&user_click=true")),t.R7$(3),t.SpI(" ",t.bMT(5,7,"lang_payment_return_continue_buy")," ")}}function ht(n,c){if(1&n){const a=t.RV6();t.j41(0,"a",6),t.bIt("click",function(){t.eBV(a);const r=t.XpG(2);return t.Njj(r.redirectBackto())}),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()}2&n&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"lang_payment_return_continue_buy")," "))}function bt(n,c){if(1&n&&(t.qex(0),t.DNE(1,vt,6,11,"ng-container",4)(2,ht,3,3,"ng-template",null,0,t.C5r),t.bVm()),2&n){const a=t.sdS(3),i=t.XpG();t.R7$(),t.Y8G("ngIf",i.isAnonymousRole)("ngIfElse",a)}}function Tt(n,c){if(1&n&&(t.j41(0,"div")(1,"a",7),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s()()),2&n){const a=t.XpG(2);t.R7$(),t.Y8G("href","https://"+a.transactionBusiness.registerObj.domain+"/"+a.currentLanguage+"/auth/login?isFirstTime=1&access_token="+a.transactionBusiness.accessToken,t.B4B),t.R7$(),t.SpI(" ",t.bMT(3,2,"lang_payment_business_start_join")," ")}}function xt(n,c){if(1&n&&(t.j41(0,"a",8),t.nI1(1,"navigationLocalize"),t.nI1(2,"navigationLocalizeForQueryString"),t.EFF(3),t.nI1(4,"mytranslate"),t.k0s()),2&n){const a=t.XpG(2);t.Y8G("routerLink",t.eq3(9,$,t.bMT(1,3,a.backTo)))("queryParams",t.bMT(2,5,a.backTo)),t.R7$(3),t.SpI(" ",t.bMT(4,7,"lang_payment_return_continue_buy")," ")}}function It(n,c){if(1&n&&(t.qex(0),t.DNE(1,Tt,4,4,"div",4)(2,xt,5,11,"ng-template",null,1,t.C5r),t.bVm()),2&n){const a=t.sdS(3),i=t.XpG();t.R7$(),t.Y8G("ngIf",i.successTransaction&&i.transactionBusiness)("ngIfElse",a)}}function Ct(n,c){1&n&&(t.j41(0,"div")(1,"a",9),t.nI1(2,"navigationLocalize"),t.EFF(3),t.nI1(4,"mytranslate"),t.k0s()()),2&n&&(t.R7$(),t.Y8G("routerLink",t.eq3(6,$,t.bMT(2,2,"/business/business-configs/0"))),t.R7$(2),t.SpI(" ",t.bMT(4,4,"lang_payment_return_continue_buy")," "))}function Et(n,c){if(1&n&&(t.j41(0,"a",8),t.nI1(1,"navigationLocalize"),t.nI1(2,"navigationLocalizeForQueryString"),t.EFF(3),t.nI1(4,"mytranslate"),t.k0s()),2&n){const a=t.XpG(2);t.Y8G("routerLink",t.eq3(9,$,t.bMT(1,3,a.backTo)))("queryParams",t.bMT(2,5,a.backTo)),t.R7$(3),t.SpI(" ",t.bMT(4,7,"lang_payment_return_continue_buy")," ")}}function Rt(n,c){if(1&n&&(t.qex(0),t.DNE(1,Ct,5,8,"div",4)(2,Et,5,11,"ng-template",null,1,t.C5r),t.bVm()),2&n){const a=t.sdS(3),i=t.XpG();t.R7$(),t.Y8G("ngIf",i.successTransaction)("ngIfElse",a)}}let Pt=(()=>{var n;class c extends k.H{ngOnInit(){super.ngOnInit(),this.isAnonymousRole=this.userService.isNotLoginOrIsAnonymous();let i=this.userService.getUserObj();this.currentUserToken=i.rememberToken??"","00"==String(this.commonService.getMyQueryParam("vnp_ResponseCode"))&&(this.successTransaction=!0)}redirectBackto(){let i=1==Number(this.commonService.getMyQueryParam("getInvoice")),r=Number(this.commonService.getMyQueryParam("vnp_TxnRef"));if(this.productType!=O.VIP_PACKAGE||!this.successTransaction)return this.commonService.myNavigation(this.backTo);this.sAztDialogService.open(yt.V,{data:{askForInvoice:!i,idTransactionVNPay:r},restoreFocus:!1,width:"550px"}).afterClosed().subscribe(z=>this.commonService.myNavigation(this.backTo))}constructor(i,r){super(),this.userService=i,this.sAztDialogService=r,this.backTo="",this.productType=O.unknown,this.isAnonymousRole=!1,this.EAztPaymentPackageType=O,this.successTransaction=!1,this.currentLanguage=this.commonService.getCurrentLang(),this.currentUserToken=""}}return(n=c).\u0275fac=function(i){return new(i||n)(t.rXU(M.R),t.rXU(ft.i))},n.\u0275cmp=t.VBU({type:n,selectors:[["app-payment-product-info-box"]],inputs:{backTo:"backTo",transactionBusiness:"transactionBusiness",productType:"productType"},features:[t.Vt3],decls:4,vars:3,consts:[["normalTransaction",""],["errorTransaction",""],[1,"mt-3","w-full","text-center"],[4,"ngIf"],[4,"ngIf","ngIfElse"],[1,"btn","w-40","btn-primary","mx-auto",3,"routerLink","queryParams"],["azt-track-service","payment-return-Pyo6TbUnsBP",1,"btn","w-40","btn-primary","mx-auto",3,"click"],[1,"btn","w-60","btn-primary","mx-auto","block",3,"href"],["azt-track-service","payment-return-Pyo6TbUnsBP",1,"btn","w-40","btn-primary","mx-auto",3,"routerLink","queryParams"],[1,"btn","w-60","btn-primary","mx-auto","block",3,"routerLink"]],template:function(i,r){1&i&&(t.j41(0,"div",2),t.DNE(1,bt,4,2,"ng-container",3)(2,It,4,2,"ng-container",3)(3,Rt,4,2,"ng-container",3),t.k0s()),2&i&&(t.R7$(),t.Y8G("ngIf",r.productType!=r.EAztPaymentPackageType.BUSINESS_PACKAGE&&r.productType!=r.EAztPaymentPackageType.UPGRADE_PACKAGE),t.R7$(),t.Y8G("ngIf",r.productType==r.EAztPaymentPackageType.BUSINESS_PACKAGE),t.R7$(),t.Y8G("ngIf",r.productType==r.EAztPaymentPackageType.UPGRADE_PACKAGE))},dependencies:[e.Wk,_.bT,h.F2,h.Ji,h.wp],styles:[".payment-box[_ngcontent-%COMP%]{margin:20px auto auto;border:1px solid #d3d3d3;background-color:#fff;max-width:350px;border-radius:5px;align-items:center;flex-direction:column;padding:20px 0}.payment-box[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{width:100%;float:left;padding:0 15px}.body__about[_ngcontent-%COMP%]{padding-top:20px;width:100%;border-top:1px solid #d3d3d3;justify-content:center}"]}),c})();function kt(n,c){if(1&n&&(t.j41(0,"teacher-layout",4)(1,"div",5)(2,"div",6),t.eu8(3,7),t.k0s()()()),2&n){const a=t.XpG(),i=t.sdS(4);t.Y8G("headerBackToLink",a.backTo),t.R7$(3),t.Y8G("ngTemplateOutlet",i)}}function Ft(n,c){if(1&n&&(t.j41(0,"student-layout",4)(1,"div",5)(2,"div",6),t.eu8(3,7),t.k0s()()()),2&n){const a=t.XpG(),i=t.sdS(4);t.Y8G("headerBackToLink",a.backTo),t.R7$(3),t.Y8G("ngTemplateOutlet",i)}}function St(n,c){if(1&n&&(t.j41(0,"auth-layout"),t.eu8(1,7),t.k0s()),2&n){t.XpG();const a=t.sdS(4);t.R7$(),t.Y8G("ngTemplateOutlet",a)}}function Mt(n,c){if(1&n&&t.nrm(0,"azt-loading-effect",9),2&n){const a=t.XpG(2);t.Y8G("currentStatusObj",a.statusObj)}}function Ot(n,c){if(1&n&&t.nrm(0,"app-vn-pay-transaction-box",10)(1,"app-payment-product-info-box",11),2&n){const a=t.XpG(2);t.Y8G("productType",a.productType)("transactionBusiness",a.transactionBusiness),t.R7$(),t.Y8G("productType",a.productType)("transactionBusiness",a.transactionBusiness)("backTo",a.backTo)}}function jt(n,c){if(1&n&&t.DNE(0,Mt,1,1,"azt-loading-effect",8)(1,Ot,2,5,"ng-template",null,1,t.C5r),2&n){const a=t.sdS(2),i=t.XpG();t.Y8G("ngIf",i.statusObj.loading)("ngIfElse",a)}}let At=(()=>{var n;class c extends k.H{getTransactionBusinessInfo(){const i=Number(this.getMyQueryParam("vnp_TxnRef")),r=this.getMyQueryParam("azHash")??"";this.initStatusObj(),this.waitDestroy(this.productOrderService.apiProductOrderGetTransactionBusinessStatusGet(i,r).subscribe(R=>{1===R.success?(this.transactionBusiness=R.data,this.stopStatusObj()):this.errorStatusObj(R.message??"",!0)}))}ngOnInit(){super.ngOnInit(),this.currentRole="teacher"==this.commonService.getMyQueryParam("userRole")?"TEACHER":"STUDENT",this.currentRole=this.userService.isLogin()?this.currentRole:"NOT_LOGIN";let i=this.commonService.getMyQueryParam("backTo");this.backTo=i||("TEACHER"==this.currentRole?"/admin/dashboard":"/student/classroom/0");let r=this.commonService.getEnumTypeWithDefault(O,this.commonService.getMyQueryParam("productType")?.toUpperCase()??"",O.unknown);this.productType=r,this.productType==O.BUSINESS_PACKAGE&&this.getTransactionBusinessInfo(),this.commonService.translateMetaData({title:"lang_core_payment_return_title",description:"lang_core_payment_return_description",image:"lang_cms_test_image"})}constructor(i,r){super(),this.userService=i,this.productOrderService=r,this.currentRole="NOT_LOGIN",this.backTo="",this.productType=O.unknown}}return(n=c).\u0275fac=function(i){return new(i||n)(t.rXU(M.R),t.rXU(y.Hg))},n.\u0275cmp=t.VBU({type:n,selectors:[["app-payment-return"]],features:[t.Vt3],decls:5,vars:3,consts:[["returnPaymentInfo",""],["doneLoading",""],[3,"headerBackToLink",4,"ngIf"],[4,"ngIf"],[3,"headerBackToLink"],[1,"container","mt-5"],[1,"box","mx-auto","pb-3",2,"max-width","500px"],[3,"ngTemplateOutlet"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[3,"productType","transactionBusiness"],[3,"productType","transactionBusiness","backTo"]],template:function(i,r){1&i&&t.DNE(0,kt,4,2,"teacher-layout",2)(1,Ft,4,2,"student-layout",2)(2,St,2,1,"auth-layout",3)(3,jt,3,2,"ng-template",null,0,t.C5r),2&i&&(t.Y8G("ngIf","TEACHER"==r.currentRole),t.R7$(),t.Y8G("ngIf","STUDENT"==r.currentRole),t.R7$(),t.Y8G("ngIf","NOT_LOGIN"==r.currentRole))},dependencies:[_.bT,_.T3,f.K,p.Q,mt.K,P.j,gt,Pt],encapsulation:2}),c})();var Dt=s(38945);function Bt(n,c){if(1&n&&t.nrm(0,"azt-loading-effect",1),2&n){const a=t.XpG();t.Y8G("currentStatusObj",a.statusObj)}}const $t=[{path:"",component:A.z,canActivate:[B],children:[{path:"return-order",component:At},{path:"history",component:_t},{path:"convert-product/:convert_order",component:(()=>{var n;class c extends k.H{convertProductToCurrentUser(){this.initStatusObj();let r={token:this.commonService.getMyParam(this.activeRoute,"convert_order")??""};this.waitDestroy(this.frontExamService.apiFrontExamMoveAnonymousTransactionsPost(r).subscribe(R=>{R.success||this.errorStatusObj(R.message,!0),this.stopStatusObj(),this.commonService.myNavigation(this.backTo)}))}ngOnInit(){super.ngOnInit();let i=this.commonService.getMyQueryParam("backTo");this.backTo=i||"/student/classroom/0",this.convertProductToCurrentUser()}constructor(i,r,R,z){super(),this.activeRoute=i,this.userService=r,this.frontExamService=R,this.productOrderService=z,this.backTo=""}}return(n=c).\u0275fac=function(i){return new(i||n)(t.rXU(e.nX),t.rXU(M.R),t.rXU(Dt.iB),t.rXU(y.Hg))},n.\u0275cmp=t.VBU({type:n,selectors:[["azt-convert-product-user"]],features:[t.Vt3],decls:1,vars:1,consts:[[3,"currentStatusObj",4,"ngIf"],[3,"currentStatusObj"]],template:function(i,r){1&i&&t.DNE(0,Bt,1,1,"azt-loading-effect",0),2&i&&t.Y8G("ngIf",r.statusObj.loading)},dependencies:[_.bT,f.K],encapsulation:2}),c})()}]}];let zt=(()=>{var n;class c{}return(n=c).\u0275fac=function(i){return new(i||n)},n.\u0275mod=t.$C({type:n}),n.\u0275inj=t.G2t({imports:[e.iI.forChild($t),e.iI,I.XE]}),c})(),Lt=(()=>{var n;class c{}return(n=c).\u0275fac=function(i){return new(i||n)},n.\u0275mod=t.$C({type:n}),n.\u0275inj=t.G2t({providers:[{provide:g.vn,useValue:d.c.azt_tiny_mce_script_src}],imports:[e.iI,_.MD,E.s,g.sv,o.YN,o.X1,T.hM,u.L,b.Lk,C.xv,zt,v.Q,m.b,x.flO.pick(x.Ptg)]}),c})()},10296:(D,F,s)=>{"use strict";s.d(F,{R:()=>b});var _=s(43277),T=s(18148),e=s(48891),g=s(52509),x=s(53793);let b=(()=>{var C;class E{constructor(m,v){this.mobileWebviewService=m,this.commonService=v}shareFileWithBlob(m,v){if(this.commonService.businessIdCanvasLMSCloudView(void 0)>0)return _.saveAs(m,v);if(this.commonService.isMobileWebview(void 0)){T.L.openLoadingEffect(this.commonService.myTranslateInstant("lang_auto_dang_lay_du_lieu_tu_he_thong")??"");let d=new FileReader;d.readAsDataURL(m),d.onloadend=()=>{let I=d.result;"string"==typeof I&&(this.mobileWebviewService.sendShareFileBase64(v,String(I)),T.L.closeLoadingEffect(100))}}else _.saveAs(m,v)}shareFileWithBase64(m,v){if(this.commonService.businessIdCanvasLMSCloudView(void 0)>0)return _.saveAs(m,v);this.commonService.isMobileWebview(void 0)?this.mobileWebviewService.sendShareFileBase64(v,m):_.saveAs(m,v)}}return(C=E).\u0275fac=function(m){return new(m||C)(e.KVO(g.f),e.KVO(x.R))},C.\u0275prov=e.jDH({token:C,factory:C.\u0275fac,providedIn:"root"}),E})()},18148:(D,F,s)=>{"use strict";s.d(F,{L:()=>_});let _=(()=>{var o;class T{static openLoadingEffect(g){T.getDomElement().style.display="flex",setTimeout(()=>{T.changeMsgLoadingEffect(g)},50)}static closeLoadingEffect(g){return new Promise(x=>{setTimeout(()=>{const b=T.getDomElement();b&&(b.style.display="none"),x(!0)},g)})}static changeMsgLoadingEffect(g){T.getDomContent().innerText=g}static getDomContent(){return document.getElementById(T.idStatusContent)??document.createElement("span")}static getDomElement(){return document.getElementById(T.idComponent)??this.createDomElement()}static createDomElement(){const g=document.createElement("div");return g.id=T.idComponent,g.setAttribute("style","position: fixed;display: flex;width: 100vw;height: 100%;background: #000000c7;color: #ffffff;font-size: 20px;font-weight: lighter;justify-content: center;align-items: center;cursor: progress;z-index: 9999;top: 0;left: 0;"),g.style.display="none",g.innerHTML=`\n        <div class="text-center" style="height: 85%; overflow-x: auto;">\n            <div class="flex justify-center mt-5">\n                <svg width="20" viewBox="0 0 58 58" xmlns="http://www.w3.org/2000/svg">\n                    <g fill="none" fill-rule="evenodd">\n                        <g transform="translate(2 1)" stroke="currentColor" stroke-width="1.5">\n                            <circle cx="42.601" cy="11.462" r="5" fill-opacity="1" fill="currentColor">\n                                <animate attributeName="fill-opacity" begin="0s" dur="1.3s" values="1;0;0;0;0;0;0;0" calcMode="linear" repeatCount="indefinite"></animate>\n                            </circle>\n                            <circle cx="49.063" cy="27.063" r="5" fill-opacity="0" fill="currentColor">\n                                <animate attributeName="fill-opacity" begin="0s" dur="1.3s" values="0;1;0;0;0;0;0;0" calcMode="linear" repeatCount="indefinite"></animate>\n                            </circle>\n                            <circle cx="42.601" cy="42.663" r="5" fill-opacity="0" fill="currentColor">\n                                <animate attributeName="fill-opacity" begin="0s" dur="1.3s" values="0;0;1;0;0;0;0;0" calcMode="linear" repeatCount="indefinite"></animate>\n                            </circle>\n                            <circle cx="27" cy="49.125" r="5" fill-opacity="0" fill="currentColor">\n                                <animate attributeName="fill-opacity" begin="0s" dur="1.3s" values="0;0;0;1;0;0;0;0" calcMode="linear" repeatCount="indefinite"></animate>\n                            </circle>\n                            <circle cx="11.399" cy="42.663" r="5" fill-opacity="0" fill="currentColor">\n                                <animate attributeName="fill-opacity" begin="0s" dur="1.3s" values="0;0;0;0;1;0;0;0" calcMode="linear" repeatCount="indefinite"></animate>\n                            </circle>\n                            <circle cx="4.938" cy="27.063" r="5" fill-opacity="0" fill="currentColor">\n                                <animate attributeName="fill-opacity" begin="0s" dur="1.3s" values="0;0;0;0;0;1;0;0" calcMode="linear" repeatCount="indefinite"></animate>\n                            </circle>\n                            <circle cx="11.399" cy="11.462" r="5" fill-opacity="0" fill="currentColor">\n                                <animate attributeName="fill-opacity" begin="0s" dur="1.3s" values="0;0;0;0;0;0;1;0" calcMode="linear" repeatCount="indefinite"></animate>\n                            </circle>\n                            <circle cx="27" cy="5" r="5" fill-opacity="0" fill="currentColor">\n                                <animate attributeName="fill-opacity" begin="0s" dur="1.3s" values="0;0;0;0;0;0;0;1" calcMode="linear" repeatCount="indefinite"></animate>\n                            </circle>\n                        </g>\n                    </g>\n                </svg>\n            </div>\n            <div style="margin-top: 10px;position: relative;">\n                <span id="${T.idStatusContent}"></span>\n            </div>\n        </div>`,document.body.appendChild(g),g}}return(o=T).idComponent="azt-status-loading-effect",o.idStatusContent="azt-status-loading-effect-content",T})()},40509:(D,F,s)=>{"use strict";s.d(F,{K:()=>k});var _=s(59640),o=s(48891),T=s(50589),e=s(65162),g=s(54460),x=s(61318),b=s(15343),C=s(19938),E=s(76975);const u=["*"],m=y=>[y],v=()=>({"mr-2":!0});function d(y,S){if(1&y&&(o.j41(0,"div",6),o.eu8(1,7),o.k0s()),2&y){o.XpG();const l=o.sdS(6);o.R7$(),o.Y8G("ngTemplateOutlet",l)}}function I(y,S){if(1&y&&(o.j41(0,"div",6),o.eu8(1,7),o.k0s()),2&y){o.XpG();const l=o.sdS(8);o.R7$(),o.Y8G("ngTemplateOutlet",l)}}function t(y,S){1&y&&o.SdG(0)}function M(y,S){if(1&y){const l=o.RV6();o.j41(0,"button",19),o.bIt("click",function(){o.eBV(l);const p=o.XpG(2);return o.Njj(p.switchModeUI("dark"))}),o.nrm(1,"lucide-icon",20),o.j41(2,"span",21),o.EFF(3),o.nI1(4,"mytranslate"),o.k0s()()}2&y&&(o.R7$(),o.Y8G("ngClass",o.lJ4(4,v)),o.R7$(2),o.JRh(o.bMT(4,2,"lang_auto_che_de_toi")))}function j(y,S){if(1&y){const l=o.RV6();o.j41(0,"button",22),o.bIt("click",function(){o.eBV(l);const p=o.XpG(2);return o.Njj(p.switchModeUI("light"))}),o.nrm(1,"lucide-icon",23),o.j41(2,"span"),o.EFF(3),o.nI1(4,"mytranslate"),o.k0s()()}2&y&&(o.R7$(),o.Y8G("ngClass",o.lJ4(4,v)),o.R7$(2),o.JRh(o.bMT(4,2,"lang_auto_che_de_sang")))}function B(y,S){if(1&y&&(o.j41(0,"div",8)(1,"div",9)(2,"div",10)(3,"a",11),o.nI1(4,"navigationLocalize"),o.nrm(5,"img",12),o.nI1(6,"getLinkLogo"),o.k0s()(),o.j41(7,"div",13),o.nrm(8,"azt-switch-language"),o.k0s(),o.j41(9,"div",14),o.DNE(10,M,5,5,"button",15)(11,j,5,5,"button",16),o.k0s()(),o.j41(12,"div",17)(13,"div")(14,"div",18),o.eu8(15,7),o.k0s()()()()),2&y){const l=o.XpG(),f=o.sdS(4);o.R7$(3),o.Y8G("routerLink",o.eq3(13,m,o.bMT(4,9,"/auth/login"))),o.R7$(2),o.Y8G("src",o.bMT(6,11,"bigLogo"),o.B4B),o.R7$(5),o.Y8G("ngIf","light"==l.modeUI),o.R7$(),o.Y8G("ngIf","dark"==l.modeUI),o.R7$(2),o.Aen("max-width:"+l.maxWidth),o.HbH(l.contentBoxClass+(l.removeBoxClass?"":" box mx-auto w-full")),o.R7$(2),o.Y8G("ngTemplateOutlet",f)}}function A(y,S){if(1&y&&(o.j41(0,"div",8)(1,"div",17)(2,"div")(3,"div",18),o.eu8(4,7),o.k0s()()()()),2&y){const l=o.XpG(),f=o.sdS(4);o.R7$(2),o.Aen("max-width:"+l.maxWidth),o.HbH(l.contentBoxClass+(l.removeBoxClass?"":" box mx-auto w-full")),o.R7$(2),o.Y8G("ngTemplateOutlet",f)}}let k=(()=>{var y;class S extends _.H{switchModeUI(f){let p=document.getElementById("azota-app-html");p&&(this.modeUI=f,this.browserStorageService.saveStorage("mode_ui",this.modeUI),"light"==this.modeUI?(p.classList.remove("dark"),p.classList.add("light")):(p.classList.remove("light"),p.classList.add("dark")))}ngOnInit(){super.ngOnInit(),this.modeUI=""==this.browserStorageService.getStorage("mode_ui")?"light":this.browserStorageService.getStorage("mode_ui")??"light",this.switchModeUI(this.modeUI),this.stopStatusObj()}constructor(f){super(),this.browserStorageService=f,this.maxWidth="500px",this.contentBoxClass="p-5",this.removeBoxClass=!1,this.modeUI="",this.initStatusObj()}}return(y=S).\u0275fac=function(f){return new(f||y)(o.rXU(T.z))},y.\u0275cmp=o.VBU({type:y,selectors:[["auth-layout"]],inputs:{maxWidth:"maxWidth",contentBoxClass:"contentBoxClass",removeBoxClass:"removeBoxClass"},features:[o.Vt3],ngContentSelectors:u,decls:11,vars:2,consts:[["BodyContentTpl",""],["notEmbedViewTpl",""],["embedViewTpl",""],[1,"azt-body",2,"padding","0"],["class","flex",4,"ngIf"],[1,"fixed","left-0","bottom-0","p-5","pb-8","azt-hidden"],[1,"flex"],[3,"ngTemplateOutlet"],[1,"content","relative",2,"padding","0","border-radius","0"],[1,"top-bar","py-2","px-3",2,"height","auto","z-index","0","border","none"],[1,"mr-auto"],["azt-track-service","auth-layout-Il3suLG89",3,"routerLink"],["width","95px",3,"src"],[1,"mr-3"],[1,"mr-1"],["azt-track-service","auth-layout-JExDIjLZ0q","class","btn btn-transparent lg:text-slate-500",3,"click",4,"ngIf"],["azt-track-service","auth-layout-g8PYsmzs4T","class","btn btn-transparent lg:text-slate-500",3,"click",4,"ngIf"],[1,"p-5","flex","items-center","w-full","content-auth-layout","mt-10"],[1,"azt-content"],["azt-track-service","auth-layout-JExDIjLZ0q",1,"btn","btn-transparent","lg:text-slate-500",3,"click"],["name","moon","size","20",3,"ngClass"],[1,""],["azt-track-service","auth-layout-g8PYsmzs4T",1,"btn","btn-transparent","lg:text-slate-500",3,"click"],["name","sun","size","20",3,"ngClass"]],template:function(f,p){1&f&&(o.NAR(),o.j41(0,"div",3),o.DNE(1,d,2,1,"div",4)(2,I,2,1,"div",4),o.k0s(),o.DNE(3,t,1,0,"ng-template",null,0,o.C5r)(5,B,16,15,"ng-template",null,1,o.C5r)(7,A,5,5,"ng-template",null,2,o.C5r),o.j41(9,"div",5),o.nrm(10,"header-setting-color"),o.k0s()),2&f&&(o.R7$(),o.Y8G("ngIf",!p.isMobileWebView&&!p.statusObj.loading),o.R7$(),o.Y8G("ngIf",p.isMobileWebView&&!p.statusObj.loading))},dependencies:[e.Wk,g.YU,g.bT,g.T3,x.V,b.WGl,C.o,E.F2,E.wp,E.ph],encapsulation:2}),S})()},89121:(D,F,s)=>{"use strict";s.d(F,{z:()=>e});var _=s(59640),o=s(48891),T=s(65162);let e=(()=>{var g;class x extends _.H{constructor(){super(...arguments),this.id="default-id"}}return(g=x).\u0275fac=(()=>{let b;return function(E){return(b||(b=o.xGo(g)))(E||g)}})(),g.\u0275cmp=o.VBU({type:g,selectors:[["app-common-master-page"]],inputs:{id:"id"},features:[o.Vt3],decls:2,vars:1,consts:[[3,"id"]],template:function(C,E){1&C&&(o.j41(0,"div",0),o.nrm(1,"router-outlet"),o.k0s()),2&C&&o.FS9("id",E.id)},dependencies:[T.n3],encapsulation:2}),x})()},92401:(D,F,s)=>{"use strict";s.d(F,{V:()=>S});var _=s(10936),o=s(89163),T=s(33887),e=s(48891),g=s(38265),x=s(54460),b=s(15343),C=s(81587),E=s(76975);const u=()=>({"mr-2":!0});function m(l,f){1&l&&(e.qex(0),e.j41(1,"div")(2,"h2",7),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()(),e.bVm()),2&l&&(e.R7$(3),e.JRh(e.bMT(4,1,"lang_vip_bill_print_title_ask")))}function v(l,f){1&l&&(e.j41(0,"div",32),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&l&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_auto_khong_duoc_de_trong")," "))}function d(l,f){1&l&&(e.j41(0,"div",32),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&l&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_auto_khong_duoc_de_trong")," "))}function I(l,f){1&l&&(e.j41(0,"div",32),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&l&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_auto_khong_duoc_de_trong")," "))}function t(l,f){1&l&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&l&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_auto_vui_long_nhap_email")," "))}function M(l,f){1&l&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&l&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_auto_email_phai_nhap_dung_dinh_dang")," "))}function j(l,f){if(1&l&&(e.j41(0,"div",32),e.DNE(1,t,3,3,"span",33)(2,M,3,3,"span",33),e.k0s()),2&l){const p=e.XpG(2);e.R7$(),e.Y8G("ngIf",p.form.controls.receiptEmail.errors.required),e.R7$(),e.Y8G("ngIf",p.form.controls.receiptEmail.errors.email||p.form.controls.receiptEmail.errors.pattern)}}function B(l,f){1&l&&(e.j41(0,"div",10)(1,"span",34),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()),2&l&&(e.R7$(2),e.JRh(e.bMT(3,1,"lang_vip_bill_print_notice")))}function A(l,f){if(1&l&&(e.j41(0,"div")(1,"h2",8),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()(),e.j41(4,"form",9)(5,"div",10)(6,"label",11),e.EFF(7),e.nI1(8,"mytranslate"),e.k0s(),e.j41(9,"div",12)(10,"div",13)(11,"div",14)(12,"div",15),e.nrm(13,"input",16),e.k0s(),e.j41(14,"label",17),e.EFF(15),e.nI1(16,"mytranslate"),e.k0s()()(),e.j41(17,"div",13)(18,"div",14)(19,"div",15),e.nrm(20,"input",18),e.k0s(),e.j41(21,"label",19),e.EFF(22),e.nI1(23,"mytranslate"),e.k0s()()()()(),e.j41(24,"div",10)(25,"label",20),e.EFF(26),e.nI1(27,"mytranslate"),e.k0s(),e.nrm(28,"input",21),e.j41(29,"div",22),e.nrm(30,"lucide-icon",23),e.EFF(31),e.nI1(32,"mytranslate"),e.k0s(),e.DNE(33,v,3,3,"div",24),e.k0s(),e.j41(34,"div",10)(35,"label",25),e.EFF(36),e.nI1(37,"mytranslate"),e.k0s(),e.nrm(38,"input",26),e.DNE(39,d,3,3,"div",24),e.k0s(),e.j41(40,"div",10)(41,"label",27),e.EFF(42),e.nI1(43,"mytranslate"),e.k0s(),e.nrm(44,"input",28),e.DNE(45,I,3,3,"div",24),e.k0s(),e.j41(46,"div",10)(47,"label",29),e.EFF(48),e.nI1(49,"mytranslate"),e.k0s(),e.nrm(50,"input",30),e.DNE(51,j,3,2,"div",24),e.k0s()(),e.DNE(52,B,4,3,"div",31)),2&l){const p=e.XpG();e.R7$(2),e.JRh(e.bMT(3,18,"lang_vip_bill_print_title")),e.R7$(2),e.Y8G("formGroup",p.form),e.R7$(3),e.SpI(" ",e.bMT(8,20,"lang_auto_loai")," "),e.R7$(6),e.Y8G("value",1),e.R7$(2),e.SpI(" ",e.bMT(16,22,"lang_azt_organization")," "),e.R7$(5),e.Y8G("value",0),e.R7$(2),e.SpI(" ",e.bMT(23,24,"lang_azt_user")," "),e.R7$(4),e.SpI(" ",e.bMT(27,26,0==p.form.controls.objectiveType.value?"lang_auto_ho_va_ten":"lang_payment_business_infor_school_name")," "),e.R7$(4),e.Y8G("ngClass",e.lJ4(36,u)),e.R7$(),e.SpI(" ",e.bMT(32,28,"lang_vip_invoice_username_map_with_transaction_fullName")," "),e.R7$(2),e.Y8G("ngIf",p.form.controls.organization.dirty&&p.form.controls.organization.errors),e.R7$(3),e.SpI(" ",e.bMT(37,30,"lang_test_market_address")," "),e.R7$(3),e.Y8G("ngIf",p.form.controls.address.dirty&&p.form.controls.address.errors),e.R7$(3),e.SpI(" ",e.bMT(43,32,"lang_vip_bill_print_tax_code")," "),e.R7$(3),e.Y8G("ngIf",p.form.controls.taxCode.dirty&&p.form.controls.taxCode.errors),e.R7$(3),e.SpI(" ",e.bMT(49,34,"lang_auto_email")," "),e.R7$(3),e.Y8G("ngIf",p.form.controls.receiptEmail.dirty&&p.form.controls.receiptEmail.errors),e.R7$(),e.Y8G("ngIf",!p.data.invoiceData)}}function k(l,f){if(1&l){const p=e.RV6();e.qex(0),e.j41(1,"button",35),e.bIt("click",function(){e.eBV(p);const h=e.XpG();return e.Njj(h.btnCloseDialog())}),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.j41(4,"button",36),e.bIt("click",function(){e.eBV(p);const h=e.XpG();return e.Njj(h.askForInvoice=!1)}),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s(),e.bVm()}2&l&&(e.R7$(2),e.SpI(" ",e.bMT(3,2,"lang_auto_khong")," "),e.R7$(3),e.SpI(" ",e.bMT(6,4,"lang_auto_co")," "))}function y(l,f){if(1&l){const p=e.RV6();e.j41(0,"button",35),e.bIt("click",function(){e.eBV(p);const h=e.XpG();return e.Njj(h.btnCloseDialog())}),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s(),e.j41(3,"button",37),e.bIt("click",function(){e.eBV(p);const h=e.XpG();return e.Njj(h.saveData())}),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()}if(2&l){const p=e.XpG();e.R7$(),e.SpI(" ",e.bMT(2,3,"lang_auto_huy")," "),e.R7$(2),e.Y8G("disabled",p.statusObj.loading||p.form.invalid),e.R7$(),e.SpI(" ",e.bMT(5,5,"lang_button_send")," ")}}let S=(()=>{var l;class f extends T._{btnCloseDialog(){this.dialogRef.close(!1)}saveData(){this.initStatusObj();let P={objectId:this.data.invoiceData?.objectId??this.data.invoiceData?.userId??0,objectType:this.form.getRawValue().objectiveType?"corporate":"personal",organization:this.form.getRawValue().organization,address:this.form.getRawValue().address,taxCode:this.form.getRawValue().taxCode,receiptEmail:this.form.getRawValue().receiptEmail,sendInvoice:!0,transactionProductId:this.data.idTransactionVNPay};this.waitDestroy(this.data.onUpdate?this.vipInvoiceService.apiVipInvoiceUpdateVipInvoicePost(P).subscribe(h=>{if(!h.success)return this.errorStatusObj(h.message,!0);this.successStatusObj("lang_auto_luu_thanh_cong",!0),this.dialogRef.close(!0)}):this.vipInvoiceService.apiVipInvoiceUpdateMyInvoicePost(P).subscribe(h=>{if(!h.success)return this.errorStatusObj(h.message,!0);this.successStatusObj("lang_cms_send_request_success",!0),this.dialogRef.close(!0)}))}constructor(P,h,G){super(G,h),this.vipInvoiceService=P,this.dialogRef=h,this.data=G,this.askForInvoice=!1,this.form=new _.gE({objectiveType:new _.MJ({value:"personal"==this.data.invoiceData?.objectType?0:1,disabled:!1},{nonNullable:!0,validators:[_.k0.required]}),organization:new _.MJ({value:this.data.invoiceData?.organization??"",disabled:!1},{nonNullable:!0,validators:[_.k0.required]}),address:new _.MJ({value:this.data.invoiceData?.address??"",disabled:!1},{nonNullable:!0,validators:[_.k0.required]}),taxCode:new _.MJ({value:this.data.invoiceData?.taxCode??"",disabled:!1},{nonNullable:!0,validators:[_.k0.required]}),receiptEmail:new _.MJ({value:this.data.invoiceData?.receiptEmail??"",disabled:!1},{nonNullable:!0,validators:[_.k0.required,_.k0.email,_.k0.pattern(/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/)]})}),this.askForInvoice=this.data.askForInvoice}}return(l=f).\u0275fac=function(P){return new(P||l)(e.rXU(g.Gl),e.rXU(o.CP,8),e.rXU(o.Vh,8))},l.\u0275cmp=e.VBU({type:l,selectors:[["azt-dialog-vip-print-bill"]],features:[e.Vt3],decls:10,vars:4,consts:[["showForm",""],["showFormBtn",""],[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"px-5","py-3"],[4,"ngIf","ngIfElse"],[1,"p-3","text-right"],[1,"font-bold","text-md","mt-1","mx-5"],[1,"intro-x","font-bold","text-xl","mt-1","mx-5"],[1,"intro-y",3,"formGroup"],[1,"mt-2"],[1,"form-label"],[1,"grid","grid-cols-12","box","border","border-slate-200","px-5","py-2"],[1,"col-span-6"],[1,"flex","items-center"],[1,"form-check","mr-2"],["id","organizationSelect","formControlName","objectiveType","type","radio",1,"form-check-input","ml-2",3,"value"],["for","organizationSelect",1,"cursor-pointer"],["id","userSelect","formControlName","objectiveType","type","radio",1,"form-check-input","ml-2",3,"value"],["for","userSelect",1,"cursor-pointer"],["for","organizationName",1,"form-label"],["type","text","id","organizationName","formControlName","organization",1,"form-control"],[1,"text-xs","text-slate-400","mt-1"],["name","info","size","18",3,"ngClass"],["class","text-xs text-danger mt-1",4,"ngIf"],["for","address",1,"form-label"],["type","text","id","address","formControlName","address",1,"form-control"],["for","taxCode",1,"form-label"],["type","text","id","taxCode","formControlName","taxCode",1,"form-control"],["for","receiptEmail",1,"form-label"],["type","text","id","receiptEmail","formControlName","receiptEmail",1,"form-control"],["class","mt-2",4,"ngIf"],[1,"text-xs","text-danger","mt-1"],[4,"ngIf"],[1,"text-danger","text-xs"],[1,"btn","w-24","btn-secondary","mr-2",3,"click"],[1,"btn","w-24","btn-primary",3,"click"],[1,"btn","w-24","btn-primary",3,"click","disabled"]],template:function(P,h){if(1&P&&(e.j41(0,"div",2)(1,"div",3)(2,"div",4),e.DNE(3,m,5,3,"ng-container",5)(4,A,53,37,"ng-template",null,0,e.C5r),e.k0s()(),e.j41(6,"div",6),e.DNE(7,k,7,6,"ng-container",5)(8,y,6,7,"ng-template",null,1,e.C5r),e.k0s()()),2&P){const G=e.sdS(5),L=e.sdS(9);e.R7$(3),e.Y8G("ngIf",h.askForInvoice)("ngIfElse",G),e.R7$(4),e.Y8G("ngIf",h.askForInvoice)("ngIfElse",L)}},dependencies:[x.YU,x.bT,_.qT,_.me,_.Fm,_.BC,_.cb,_.j4,_.JD,b.WGl,C.t,E.wp],encapsulation:2}),f})()},43277:function(D,F){var s,o;void 0!==(o="function"==typeof(s=function(){"use strict";function e(u,m,v){var d=new XMLHttpRequest;d.open("GET",u),d.responseType="blob",d.onload=function(){E(d.response,m,v)},d.onerror=function(){console.error("could not download file")},d.send()}function g(u){var m=new XMLHttpRequest;m.open("HEAD",u,!1);try{m.send()}catch{}return 200<=m.status&&299>=m.status}function x(u){try{u.dispatchEvent(new MouseEvent("click"))}catch{var m=document.createEvent("MouseEvents");m.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),u.dispatchEvent(m)}}var b="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,C=b.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),E=b.saveAs||("object"!=typeof window||window!==b?function(){}:"download"in HTMLAnchorElement.prototype&&!C?function(u,m,v){var d=b.URL||b.webkitURL,I=document.createElement("a");I.download=m=m||u.name||"download",I.rel="noopener","string"==typeof u?(I.href=u,I.origin===location.origin?x(I):g(I.href)?e(u,m,v):x(I,I.target="_blank")):(I.href=d.createObjectURL(u),setTimeout(function(){d.revokeObjectURL(I.href)},4e4),setTimeout(function(){x(I)},0))}:"msSaveOrOpenBlob"in navigator?function(u,m,v){if(m=m||u.name||"download","string"!=typeof u)navigator.msSaveOrOpenBlob(function T(u,m){return typeof m>"u"?m={autoBom:!1}:"object"!=typeof m&&(console.warn("Deprecated: Expected third argument to be a object"),m={autoBom:!m}),m.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(u.type)?new Blob(["\ufeff",u],{type:u.type}):u}(u,v),m);else if(g(u))e(u,m,v);else{var d=document.createElement("a");d.href=u,d.target="_blank",setTimeout(function(){x(d)})}}:function(u,m,v,d){if((d=d||open("","_blank"))&&(d.document.title=d.document.body.innerText="downloading..."),"string"==typeof u)return e(u,m,v);var I="application/octet-stream"===u.type,t=/constructor/i.test(b.HTMLElement)||b.safari,M=/CriOS\/[\d]+/.test(navigator.userAgent);if((M||I&&t||C)&&typeof FileReader<"u"){var j=new FileReader;j.onloadend=function(){var k=j.result;k=M?k:k.replace(/^data:[^;]*;/,"data:attachment/file;"),d?d.location.href=k:location=k,d=null},j.readAsDataURL(u)}else{var B=b.URL||b.webkitURL,A=B.createObjectURL(u);d?d.location=A:location.href=A,d=null,setTimeout(function(){B.revokeObjectURL(A)},4e4)}});b.saveAs=E.saveAs=E,D.exports=E})?s.apply(F,[]):s)&&(D.exports=o)}}]);