"use strict";(self.webpackChunkSmobileMod=self.webpackChunkSmobileMod||[]).push([[1152],{43166:(O,I,a)=>{a.d(I,{x:()=>t});var e=a(10936),E=a(48891),L=a(53793);let t=(()=>{var d;class S{filter(o,m){return null==o?[]:o=o.filter(_=>this.removeAllSpecialChars((null!=m?_[m]:_).toString()).includes(this.removeAllSpecialChars(this.searchControl.value)))}mergeSchoolLevel(o){let m=[];return o.forEach(_=>null!=_.schoolLevel&&m.push(_.schoolLevel)),m}removeAllSpecialChars(o){return o=(o=this.commonService.myTranslateInstant(o)??o).toLowerCase().trim(),o=this.commonService.convertVietnameseToEnglish(o),o=this.commonService.removeSpecialStringInSearch(o),(o=this.commonService.removeNonAlphabetic(o)).toLowerCase().trim()}constructor(o){this.commonService=o,this.searchControl=new e.MJ("",{nonNullable:!0})}}return(d=S).\u0275fac=function(o){return new(o||d)(E.rXU(L.R))},d.\u0275dir=E.FsC({type:d,selectors:[["","searchInList",""]],exportAs:["searchInList"]}),S})()},37320:(O,I,a)=>{a.d(I,{f:()=>c});var e=a(48891),E=a(14527),L=a(53793),t=a(17838),d=a(82040),S=a(18447),p=a(85710),o=a(27035),m=a(5424);class _{addTask(f,u){if(null!=u&&this.baseResultCache.has(u))return this.baseResultCache.get(u).asObservable();const h=new t.m(1);return null!=u&&this.baseResultCache.set(u,h),this.baseTaskQueue$?.next(f.pipe((0,d.M)({next:C=>{!C.success&&null!=u&&this.baseResultCache.delete(u),h.next(C)},error:()=>{null!=u&&this.baseResultCache.delete(u),h.next({success:0,message:"lang_common_error_at_task_queue",data:void 0})}}))),h.asObservable()}resetQueue(){this.stopQueue(),this.baseDestroy$=new S.B,this.baseSubscription=new p.yU,this.initializeQueue()}resetConcurrency(f){this.baseLimitConcurrency!=f&&this.initializeQueue()}initializeQueue(){this.baseTaskQueue$=new S.B;const f=this.baseTaskQueue$.pipe((0,o.Z)(u=>u.pipe((0,m.Q)(this.baseDestroy$)),this.baseLimitConcurrency)).subscribe({next:u=>{},error:u=>{},complete:()=>{}});this.baseSubscription.add(f)}stopQueue(){this.baseDestroy$.next(),this.baseDestroy$.complete(),this.baseSubscription.unsubscribe(),this.baseTaskQueue$=null,this.baseResultCache.clear()}constructor(f=10){this.baseLimitConcurrency=f,this.baseTaskQueue$=null,this.baseDestroy$=new S.B,this.baseSubscription=new p.yU,this.baseResultCache=new Map,this.initializeQueue()}}var r=a(35810);let c=(()=>{var b;class f extends _{callApiToGuestKnowledge(h,C,y,M){if(""==this.standardQuestionData(C))return y(void 0,void 0,void 0);let A={questionId:h?C.questionId:void 0,text:h?void 0:this.standardQuestionData(C),levelId:C.levelId,subjectId:C.subjectId,ebankId:C.ebankId},$=this.aiService.apiAiPredictQuestionKnowledgePost(A);this.addTask($,this.sAztEncryptService.createMd5(this.commonService.serializeJson(A))).subscribe(D=>D.success?"vip_required"==D.errorCode?M("lang_core_need_vip_upgrade"):!D.data||D.data.score<this.AI_MIN_SCORE?y(void 0,void 0,void 0):void y(D.data.knowledgeId,D.data.objectiveId,D.data.tagId):M(D.message))}standardQuestionData(h){let C=this.commonService.parseQuestionContent(h.questionContent);return C+=" "+this.commonService.parseQuestionContent(h.answerContents.join(" - ")),C.trim()}constructor(){super(2),this.commonService=(0,e.WQX)(L.R),this.aiService=(0,e.WQX)(E.Ee),this.sAztEncryptService=(0,e.WQX)(r.v),this.AI_MIN_SCORE=2.8}}return(b=f).\u0275fac=function(h){return new(h||b)},b.\u0275prov=e.jDH({token:b,factory:b.\u0275fac,providedIn:"root"}),f})()},34292:(O,I,a)=>{a.d(I,{c:()=>L});var e=a(18447),E=a(48891);let L=(()=>{var t;class d{constructor(){this.checkQuestion=new e.B}listenSetTagEventOfAllQuestions(){return this.checkQuestion}sendSetTagEvent(p){this.checkQuestion.next(p)}}return(t=d).\u0275fac=function(p){return new(p||t)},t.\u0275prov=E.jDH({token:t,factory:t.\u0275fac,providedIn:"root"}),d})()},68106:(O,I,a)=>{a.d(I,{c:()=>S});var e=a(48891),E=a(47290),L=a(51698),t=a(88249),d=a(53793);let S=(()=>{var p;class o{constructor(){this.questionService=(0,e.WQX)(E.wP),this.commonService=(0,e.WQX)(d.R),this.replayCache$=null}callApiSetTagForTrueFalseQuestion(_,r,c){return new L.c(b=>{let f=_.configAnswers.find(h=>h.key==r);this.questionService.apiQuestionUpdateQuestionKnowledgePost({questions:[{questionId:_.id,answers:[{answerKey:r,objectiveId:f?.objectiveId,tag:c?.code??""}]}]}).subscribe(h=>{if(!h)return b.next(!1),b.complete(),this.commonService.snackError("lang_update_question_tag_unsuccessfully");this.commonService.snackSuccess("lang_update_question_tag_successfully"),b.next(!0),b.complete()})})}formatTag(_){return _.map(r=>({...r,showName:this.commonService.getValueOfKeyInObject(r,this.commonService.getCurrentLang()+"Name")??r.enName??"Empty"}))}getQuestionTags(){return this.replayCache$||(this.replayCache$=new L.c(_=>{this.questionService.apiQuestionGetTagsGet().subscribe(r=>{if(!r.success)return this.commonService.snackError(r.message);_.next(r.data?.objs?.filter(c=>"VDC"!=c.code)??[]),_.complete()})}).pipe((0,t.t)(1))),this.replayCache$}findCurrentTag(_,r,c){let b=r.find(u=>this.commonService.compareLowerCase(u.key,c))?.tagId,f=_.find(u=>u.id==b);return f?"azt_lang_tag_"+f.code:""}}return(p=o).\u0275fac=function(_){return new(_||p)},p.\u0275prov=e.jDH({token:p,factory:p.\u0275fac,providedIn:"root"}),o})()},99743:(O,I,a)=>{a.d(I,{I:()=>t});var e=a(48891),E=a(53793),L=a(99927);let t=(()=>{var d;class S{constructor(){this.commonService=(0,e.WQX)(E.R),this.sAztAnswerTypeService=(0,e.WQX)(L._)}changeObjectiveForCommonQuestion(o,m){return o.objectiveId=m.objectiveId,o}changeObjectiveForTrueFalseQuestion(o,m,_){return o.configAnswers.find(r=>r.key==_)?(o.configAnswers.forEach(r=>{r.key==_&&(r.objectiveId=m?.objectiveId)}),o):(o.configAnswers.push({key:_,objectiveId:m.objectiveId}),o)}changeTagForCommonQuestion(o,m){return o.tags=m,o}changeTagForTrueFalseQuestion(o,m,_){let r=this.commonService.getFirstOfArray(_);return o.configAnswers.find(c=>c.key==m)?(o.configAnswers.forEach(c=>{c.key==m&&(c.tagId=r?.id,c.tagName=r?.name,c.tagCode=r?.code)}),o):(o.configAnswers.push({key:m,knowledgeId:void 0,objectiveId:void 0,tagCode:r?.code,tagId:r?.id,tagName:r?.name}),o)}changeTagForCommonQuestView(o,m){return o.tag=m,o}changeTagForTrueFalseQuestView(o,m,_){let r=this.commonService.getFirstOfArray(_);return o.configAnswers||(o.configAnswers=[]),o.configAnswers.find(c=>c.key==m)?(o.configAnswers.forEach(c=>{c.key==m&&(c.tagId=r?.id,c.tagName=r?.name,c.tagCode=r?.code)}),o):(o.configAnswers.push({key:m,knowledgeId:void 0,objectiveId:void 0,tagCode:r?.code,tagId:r?.id,tagName:r?.name}),o)}}return(d=S).\u0275fac=function(o){return new(o||d)},d.\u0275prov=e.jDH({token:d,factory:d.\u0275fac,providedIn:"root"}),S})()},51614:(O,I,a)=>{a.d(I,{X:()=>N});var e=a(48891),E=a(59640),L=a(62548),t=a(60355),d=a(54460),S=a(47426),p=a(95670),o=a(4375),m=a(10936),_=a(44233),r=a(43166),c=a(76975);const b=s=>({grid:s}),f=(s,g)=>({"mt-2":s,"ml-2":g}),u=s=>({width:s});function h(s,g){if(1&s&&e.eu8(0,7),2&s){e.XpG();const l=e.sdS(4);e.Y8G("ngTemplateOutlet",l)}}function C(s,g){if(1&s&&e.eu8(0,7),2&s){e.XpG();const l=e.sdS(6);e.Y8G("ngTemplateOutlet",l)}}function y(s,g){if(1&s&&(e.j41(0,"mat-option",21),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s){const l=g.$implicit;e.Y8G("value",l.id),e.R7$(),e.SpI(" ",e.bMT(2,2,l.key)," ")}}function M(s,g){if(1&s&&(e.j41(0,"mat-option",21),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s){const l=g.$implicit;e.Y8G("value",l.id),e.R7$(),e.SpI(" ",e.bMT(2,2,l.key)," ")}}function x(s,g){if(1&s&&(e.qex(0),e.j41(1,"mat-option",21),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.bVm()),2&s){const l=g.$implicit;e.R7$(),e.Y8G("value",l.id),e.R7$(),e.SpI(" ",e.bMT(3,2,l.title)," ")}}function A(s,g){if(1&s&&(e.j41(0,"div",22)(1,"div",11)(2,"label",23),e.EFF(3),e.nI1(4,"mytranslate"),e.k0s()(),e.j41(5,"mat-form-field",13)(6,"mat-select",14,4)(8,"mat-option"),e.nrm(9,"ngx-mat-select-search",15),e.nI1(10,"mytranslate"),e.nI1(11,"mytranslate"),e.k0s(),e.j41(12,"mat-option",21),e.EFF(13),e.nI1(14,"mytranslate"),e.k0s(),e.DNE(15,x,4,4,"ng-container",24),e.k0s()()()),2&s){const l=e.sdS(7),i=e.XpG(2);e.R7$(3),e.SpI(" ",e.bMT(4,8,"lang_core_sach")," "),e.R7$(3),e.Y8G("formControl",i.form.controls.bookIdFormControl),e.R7$(3),e.FS9("placeholderLabel",e.bMT(10,10,"lang_search_by_name")),e.FS9("noEntriesFoundLabel",e.bMT(11,12,"lang_search_not_found")),e.Y8G("formControl",l.searchControl),e.R7$(3),e.Y8G("value",0),e.R7$(),e.SpI("- ",e.bMT(14,14,"lang_create_tree_category_default_book")," -"),e.R7$(2),e.Y8G("ngForOf",l.filter(i.listBookObjs,"title"))}}function $(s,g){1&s&&(e.j41(0,"div",25)(1,"div",26),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()),2&s&&(e.R7$(2),e.SpI(" ",e.bMT(3,1,"lang_auto_vui_long_chon_khoi_hoc_va_mon_hoc")," "))}function D(s,g){if(1&s&&(e.j41(0,"form",8)(1,"div",9)(2,"div",10)(3,"div",11)(4,"label",12),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s()(),e.j41(7,"mat-form-field",13)(8,"mat-select",14,2)(10,"mat-option"),e.nrm(11,"ngx-mat-select-search",15),e.nI1(12,"mytranslate"),e.nI1(13,"mytranslate"),e.k0s(),e.j41(14,"mat-option",16),e.EFF(15),e.nI1(16,"mytranslate"),e.k0s(),e.DNE(17,y,3,4,"mat-option",17),e.k0s()()(),e.j41(18,"div",10)(19,"div",11)(20,"label",18),e.EFF(21),e.nI1(22,"mytranslate"),e.k0s()(),e.j41(23,"mat-form-field",13)(24,"mat-select",14,3)(26,"mat-option"),e.nrm(27,"ngx-mat-select-search",15),e.nI1(28,"mytranslate"),e.nI1(29,"mytranslate"),e.k0s(),e.j41(30,"mat-option",16),e.EFF(31),e.nI1(32,"mytranslate"),e.k0s(),e.DNE(33,M,3,4,"mat-option",17),e.k0s()()(),e.DNE(34,A,16,16,"div",19)(35,$,4,3,"div",20),e.k0s()()),2&s){const l=e.sdS(9),i=e.sdS(25),n=e.XpG();e.Y8G("formGroup",n.form),e.R7$(5),e.SpI(" ",e.bMT(6,19,"lang_auto_khoi_hoc")," "),e.R7$(3),e.Y8G("formControl",n.form.controls.schoolLevel),e.R7$(3),e.FS9("placeholderLabel",e.bMT(12,21,"lang_search_by_name")),e.FS9("noEntriesFoundLabel",e.bMT(13,23,"lang_search_not_found")),e.Y8G("formControl",l.searchControl),e.R7$(3),e.Y8G("value",0),e.R7$(),e.SpI("",e.bMT(16,25,"lang_auto_---chon_khoi"),"---"),e.R7$(2),e.Y8G("ngForOf",l.filter(l.mergeSchoolLevel(n.schoolLevelObjs),"key")),e.R7$(4),e.SpI(" ",e.bMT(22,27,"lang_auto_mon_hoc")," "),e.R7$(3),e.Y8G("formControl",n.form.controls.schoolSubject),e.R7$(3),e.FS9("placeholderLabel",e.bMT(28,29,"lang_search_by_name")),e.FS9("noEntriesFoundLabel",e.bMT(29,31,"lang_search_not_found")),e.Y8G("formControl",i.searchControl),e.R7$(3),e.Y8G("value",0),e.R7$(),e.SpI("",e.bMT(32,33,"lang_auto_---chon_mon"),"---"),e.R7$(2),e.Y8G("ngForOf",i.filter(n.schoolSubjectObjs,"key")),e.R7$(),e.Y8G("ngIf",n.form.controls.bookIdFormControl),e.R7$(),e.Y8G("ngIf",n.form.controls.schoolLevel.invalid||n.form.controls.schoolSubject.invalid)}}function G(s,g){if(1&s&&(e.j41(0,"mat-option",21),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s){const l=g.$implicit;e.Y8G("value",l.id),e.R7$(),e.SpI(" ",e.bMT(2,2,l.key)," ")}}function w(s,g){if(1&s&&(e.j41(0,"mat-option",21),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&s){const l=g.$implicit;e.Y8G("value",l.id),e.R7$(),e.SpI(" ",e.bMT(2,2,l.key)," ")}}function Y(s,g){if(1&s&&(e.qex(0),e.j41(1,"mat-option",21),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.bVm()),2&s){const l=g.$implicit;e.R7$(),e.Y8G("value",l.id),e.R7$(),e.SpI(" ",e.bMT(3,2,l.title)," ")}}function U(s,g){if(1&s&&(e.j41(0,"div",35)(1,"label",36),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.j41(4,"mat-form-field",30)(5,"mat-select",14,4)(7,"mat-option"),e.nrm(8,"ngx-mat-select-search",15),e.nI1(9,"mytranslate"),e.nI1(10,"mytranslate"),e.k0s(),e.j41(11,"mat-option",21),e.EFF(12),e.nI1(13,"mytranslate"),e.k0s(),e.DNE(14,Y,4,4,"ng-container",24),e.k0s()()()),2&s){const l=e.sdS(6),i=e.XpG(2);e.Y8G("ngClass",e.l_i(18,f,i.isMobileDevice,!i.isMobileDevice)),e.R7$(),e.Y8G("ngStyle",e.eq3(21,u,i.isMobileDevice?"54px":"")),e.R7$(),e.SpI(" ",e.bMT(3,10,"lang_core_sach")," "),e.R7$(3),e.Y8G("formControl",i.form.controls.bookIdFormControl),e.R7$(3),e.FS9("placeholderLabel",e.bMT(9,12,"lang_search_by_name")),e.FS9("noEntriesFoundLabel",e.bMT(10,14,"lang_search_not_found")),e.Y8G("formControl",l.searchControl),e.R7$(3),e.Y8G("value",0),e.R7$(),e.SpI("- ",e.bMT(13,16,"lang_create_tree_category_default_book")," -"),e.R7$(2),e.Y8G("ngForOf",l.filter(i.listBookObjs,"title"))}}function W(s,g){1&s&&(e.j41(0,"div",37)(1,"div",26),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()),2&s&&(e.R7$(2),e.SpI(" ",e.bMT(3,1,"lang_auto_vui_long_chon_khoi_hoc_va_mon_hoc")," "))}function Q(s,g){if(1&s&&(e.j41(0,"form",8)(1,"div",27)(2,"div",28)(3,"label",29),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s(),e.j41(6,"mat-form-field",30)(7,"mat-select",14,2)(9,"mat-option"),e.nrm(10,"ngx-mat-select-search",15),e.nI1(11,"mytranslate"),e.nI1(12,"mytranslate"),e.k0s(),e.j41(13,"mat-option",16),e.EFF(14),e.nI1(15,"mytranslate"),e.k0s(),e.DNE(16,G,3,4,"mat-option",17),e.k0s()()(),e.j41(17,"div",31)(18,"label",32),e.EFF(19),e.nI1(20,"mytranslate"),e.k0s(),e.j41(21,"mat-form-field",30)(22,"mat-select",14,3)(24,"mat-option"),e.nrm(25,"ngx-mat-select-search",15),e.nI1(26,"mytranslate"),e.nI1(27,"mytranslate"),e.k0s(),e.j41(28,"mat-option",16),e.EFF(29),e.nI1(30,"mytranslate"),e.k0s(),e.DNE(31,w,3,4,"mat-option",17),e.k0s()()(),e.DNE(32,U,15,23,"div",33),e.k0s(),e.DNE(33,W,4,3,"div",34),e.k0s()),2&s){const l=e.sdS(8),i=e.sdS(23),n=e.XpG();e.Y8G("formGroup",n.form),e.R7$(),e.Y8G("ngClass",e.eq3(37,b,!n.isMobileDevice)),e.R7$(3),e.SpI(" ",e.bMT(5,21,"lang_auto_khoi_hoc")," "),e.R7$(3),e.Y8G("formControl",n.form.controls.schoolLevel),e.R7$(3),e.FS9("placeholderLabel",e.bMT(11,23,"lang_search_by_name")),e.FS9("noEntriesFoundLabel",e.bMT(12,25,"lang_search_not_found")),e.Y8G("formControl",l.searchControl),e.R7$(3),e.Y8G("value",0),e.R7$(),e.SpI("",e.bMT(15,27,"lang_auto_---chon_khoi"),"---"),e.R7$(2),e.Y8G("ngForOf",l.filter(l.mergeSchoolLevel(n.schoolLevelObjs),"key")),e.R7$(),e.Y8G("ngClass",e.l_i(39,f,n.isMobileDevice,!n.isMobileDevice)),e.R7$(2),e.SpI(" ",e.bMT(20,29,"lang_auto_mon_hoc")," "),e.R7$(3),e.Y8G("formControl",n.form.controls.schoolSubject),e.R7$(3),e.FS9("placeholderLabel",e.bMT(26,31,"lang_search_by_name")),e.FS9("noEntriesFoundLabel",e.bMT(27,33,"lang_search_not_found")),e.Y8G("formControl",i.searchControl),e.R7$(3),e.Y8G("value",0),e.R7$(),e.SpI("",e.bMT(30,35,"lang_auto_---chon_mon"),"---"),e.R7$(2),e.Y8G("ngForOf",i.filter(n.schoolSubjectObjs,"key")),e.R7$(),e.Y8G("ngIf",n.form.controls.bookIdFormControl),e.R7$(),e.Y8G("ngIf",n.form.controls.schoolLevel.invalid||n.form.controls.schoolSubject.invalid)}}let N=(()=>{var s;class g extends E.H{getChangeKey(){let i=this.form.getRawValue();return i.schoolLevel+"_"+i.schoolSubject+"_"+(i.bookIdFormControl??0)}updateLevelAndSubjectToForm(i,n,v){let k=this.commonService.concatMultipleArray(this.schoolLevelObjs.map(j=>j.schoolSubjectObjs)).find(j=>j.id==n)?.key,F=this.schoolLevelObjs.find(j=>j.schoolLevel?.id==i);this.schoolSubjectObjs=F?.schoolSubjectObjs??[];let T=this.schoolSubjectObjs.find(j=>j.id==n||j.key?.toLowerCase()==k?.toLowerCase());i=F?.schoolLevel?.id??0,n=T?.id??0,v=v??0;let R=this.form.getRawValue();R.schoolLevel!=i&&i&&this.form.controls.schoolLevel.setValue(i,{emitEvent:!1}),R.schoolSubject!=n&&n&&this.form.controls.schoolSubject.setValue(n,{emitEvent:!1}),R.bookIdFormControl!=v&&v&&this.form.controls.bookIdFormControl?.setValue(v,{emitEvent:!1}),(0!==i||0!==n||0!==v)&&this.getBookObjs(i,n,v,j=>{let B=this.form.getRawValue();if(B.schoolLevel!=j.schoolLevelId||B.schoolSubject!=j.schoolSubjectId||(B.bookIdFormControl??0)!=j.bookId)return;this.listBookObjs=j.books;let z=this.listBookObjs.find(K=>K.id==v);v=z?.id??0,this.showBookData&&B.bookIdFormControl!=v&&this.form.controls.bookIdFormControl?.setValue(v,{emitEvent:!1});let P=this.getChangeKey();this.lastChangeKey!=P&&(this.lastChangeKey=P,this.changeDataEvent.emit({bookName:z?.title}))})}getBookObjs(i,n,v,k){if(!this.showBookData)return k({schoolLevelId:i,schoolSubjectId:n,bookId:v,books:[]});if(!i||!n)return k({schoolLevelId:i,schoolSubjectId:n,bookId:v,books:[]});let F=this.listBookByLevelSubject.find(T=>T.levelId==i&&T.subjectId==n);if(null!=F)return k({schoolLevelId:i,schoolSubjectId:n,bookId:v,books:F.books});this.isLoadingBook=!0,this.waitDestroy(this.wrapApiResponse(this.aiElearningService.aiApiV1ElearningGetElearningBookGet(i,n)).subscribe(T=>{if(!T.success)return this.isLoadingBook=!1,this.errorStatusObj(T.message,!0),k({schoolLevelId:i,schoolSubjectId:n,bookId:v,books:[]});T.data=T.data?.filter(R=>R.isActive),this.listBookByLevelSubject.push({levelId:i,subjectId:n,books:T.data??[]}),this.isLoadingBook=!1,k({schoolLevelId:i,schoolSubjectId:n,bookId:v,books:T.data??[]})}))}getSubjectAndLevel(){this.initStatusObj(),this.waitDestroy(this.commonListService.apiCommonListSubjectAndLevelsGet(this.commonService.getBusinessDomainUrl()).subscribe(i=>{if(!i.success)return this.errorStatusObj(i.message,!0);if(this.schoolLevelObjs=i.data?.schoolLevelSubjectObjs??[],this.removeLevelSubjectWithOtherName&&(this.schoolLevelObjs=this.schoolLevelObjs.filter(n=>"azt_lang_core_khoi_khac"!=n.schoolLevel?.key),this.schoolLevelObjs.forEach(n=>n.schoolSubjectObjs=n.schoolSubjectObjs.filter(v=>"azt_auto_lang_khac"!=v.key))),this.useExamSchoolLogData&&0==this.form.controls.schoolLevel.value)return this.updateLevelAndSubjectToForm(i.data?.examSchoolLogObj?.lastSchoolLevelId??0,i.data?.examSchoolLogObj?.lastSchoolSubjectId??0,void 0),this.stopStatusObj();if(this.useFirstAsDefault&&0==this.form.controls.schoolLevel.value){let n=this.commonService.getLastOfArray(this.schoolLevelObjs),v=this.commonService.getFirstOfArray(n?.schoolSubjectObjs??[]);if(n&&v)return this.updateLevelAndSubjectToForm(n.schoolLevel?.id??0,v.id,this.form.controls.bookIdFormControl?.value),this.stopStatusObj()}this.updateLevelAndSubjectToForm(this.form.controls.schoolLevel.value,this.form.controls.schoolSubject.value,this.form.controls.bookIdFormControl?.value),this.stopStatusObj()}))}listenChangeLevelSubjectBook(){this.form.controls.schoolLevel.valueChanges.subscribe(i=>{let n=this.form.getRawValue();this.updateLevelAndSubjectToForm(n.schoolLevel,n.schoolSubject,n.bookIdFormControl)}),this.form.controls.schoolSubject.valueChanges.subscribe(i=>{let n=this.form.getRawValue();this.updateLevelAndSubjectToForm(n.schoolLevel,n.schoolSubject,n.bookIdFormControl)}),this.form.controls.bookIdFormControl?.valueChanges.subscribe(i=>{let n=this.form.getRawValue();this.updateLevelAndSubjectToForm(n.schoolLevel,n.schoolSubject,n.bookIdFormControl)})}ngOnInit(){this.getSubjectAndLevel(),this.listenChangeLevelSubjectBook()}constructor(i,n){super(),this.commonListService=i,this.aiElearningService=n,this.removeLevelSubjectWithOtherName=!1,this.showBookData=!1,this.useExamSchoolLogData=!1,this.useFirstAsDefault=!1,this.layout="default",this.changeDataEvent=new e.bkB,this.schoolLevelObjs=[],this.schoolSubjectObjs=[],this.listBookObjs=[],this.lastChangeKey=void 0,this.listBookByLevelSubject=[],this.isLoadingBook=!1}}return(s=g).\u0275fac=function(i){return new(i||s)(e.rXU(L.Nz),e.rXU(t.T5))},s.\u0275cmp=e.VBU({type:s,selectors:[["config-level-subject-book"]],inputs:{form:"form",removeLevelSubjectWithOtherName:"removeLevelSubjectWithOtherName",showBookData:"showBookData",useExamSchoolLogData:"useExamSchoolLogData",useFirstAsDefault:"useFirstAsDefault",layout:"layout"},outputs:{changeDataEvent:"changeDataEvent"},features:[e.Vt3],decls:7,vars:2,consts:[["defaultLayoutTpl",""],["labelInOneLineTpl",""],["searchInListSchoolLevel","searchInList"],["searchInListSchoolSubject","searchInList"],["searchInListBook","searchInList"],[1,"config-level-subject"],[3,"ngTemplateOutlet",4,"ngIf"],[3,"ngTemplateOutlet"],[3,"formGroup"],["id","azt-config-level-subject",1,"grid","grid-cols-12","gap-4"],[1,"col-span-12","lg:col-span-6"],[1,"font-medium"],["for","schoolLevel",1,"form-label","flex","items-center"],["appearance","outline"],["searchInList","",3,"formControl"],[3,"formControl","placeholderLabel","noEntriesFoundLabel"],["disabled","",3,"value"],[3,"value",4,"ngFor","ngForOf"],["for","schoolSubject",1,"form-label","flex","items-center"],["class","col-span-12",4,"ngIf"],["class","col-span-12","style","margin-top: -20px",4,"ngIf"],[3,"value"],[1,"col-span-12"],["for","bookSelected",1,"form-label","flex","items-center"],[4,"ngFor","ngForOf"],[1,"col-span-12",2,"margin-top","-20px"],[1,"text-xs","mt-2","text-danger"],["id","azt-config-level-subject",1,"grid-cols-12","gap-4",3,"ngClass"],[1,"col-span-12","sm:col-span-3","flex","items-center"],["for","schoolLevel",1,"mr-1","flex-none","whitespace-nowrap"],["appearance","outline",1,"box",2,"width","100%"],[1,"col-span-12","sm:col-span-4","flex","items-center",3,"ngClass"],["for","schoolSubject",1,"mr-1","whitespace-nowrap","flex-none"],["class","col-span-5 flex items-center",3,"ngClass",4,"ngIf"],["style","margin-top: -20px",4,"ngIf"],[1,"col-span-5","flex","items-center",3,"ngClass"],["for","bookSelected",1,"mr-1","flex-none","whitespace-nowrap",3,"ngStyle"],[2,"margin-top","-20px"]],template:function(i,n){1&i&&(e.j41(0,"div",5),e.DNE(1,h,1,1,"ng-container",6)(2,C,1,1,"ng-container",6),e.k0s(),e.DNE(3,D,36,35,"ng-template",null,0,e.C5r)(5,Q,34,42,"ng-template",null,1,e.C5r)),2&i&&(e.R7$(),e.Y8G("ngIf","default"==n.layout),e.R7$(),e.Y8G("ngIf","label_in_one_line"==n.layout))},dependencies:[d.YU,d.Sq,d.bT,d.T3,d.B3,S.wT,p.rl,o.VO,m.qT,m.BC,m.cb,m.l_,m.j4,_.U9,r.x,c.wp],encapsulation:2}),g})()},75421:(O,I,a)=>{a.d(I,{u:()=>r});var e=a(10936),E=a(89163),L=a(33887),t=a(48891),d=a(54460),S=a(15343),p=a(76975);const o=()=>({"mr-2 text-danger":!0});function m(c,b){if(1&c&&t.nrm(0,"lucide-icon",10),2&c){const f=t.XpG();t.Y8G("name",f.data.iconName)("ngClass",t.lJ4(2,o))}}function _(c,b){if(1&c&&(t.j41(0,"div",11)(1,"div",3)(2,"span"),t.EFF(3),t.nI1(4,"mytranslate"),t.k0s(),t.j41(5,"b"),t.EFF(6),t.k0s(),t.j41(7,"span"),t.EFF(8),t.nI1(9,"mytranslate"),t.k0s()(),t.j41(10,"div",12),t.nrm(11,"input",13),t.k0s()()),2&c){const f=t.XpG();t.R7$(3),t.JRh(t.bMT(4,4,"lang_azt_enter")+" "),t.R7$(3),t.JRh('"'+f.data.textConfirm+'" '),t.R7$(2),t.JRh(t.bMT(9,6,"lang_azt_for_delete_data")),t.R7$(3),t.Y8G("formControl",f.confirmValue)}}let r=(()=>{var c;class b extends L._{btnCloseDialog(){this.dialogRef.close(!1)}confirmDialog(){this.dialogRef.close(!0)}constructor(u,h){super(h,u),this.dialogRef=u,this.data=h,this.confirmValue=new e.MJ("",{nonNullable:!0})}}return(c=b).\u0275fac=function(u){return new(u||c)(t.rXU(E.CP,8),t.rXU(E.Vh,8))},c.\u0275cmp=t.VBU({type:c,selectors:[["azt-dialog-danger"]],features:[t.Vt3],decls:14,vars:10,consts:[[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5"],[1,"text-md"],["size","24",3,"name","ngClass",4,"ngIf"],[1,"text-md",3,"innerHtml"],["class","mt-3",4,"ngIf"],[1,"p-3","text-right"],["azt-track-service","azt-dialog-danger-9EJYp6jGzr",1,"btn","w-24","btn-secondary","mr-2",3,"click"],["azt-track-service","azt-dialog-danger-ffMh3NrPRC",1,"btn","w-24","btn-danger",3,"click","disabled"],["size","24",3,"name","ngClass"],[1,"mt-3"],[1,"mt-2"],["type","text",1,"form-control",3,"formControl"]],template:function(u,h){1&u&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),t.DNE(4,m,1,3,"lucide-icon",4),t.nrm(5,"span",5),t.k0s(),t.DNE(6,_,12,8,"div",6),t.k0s()(),t.j41(7,"div",7)(8,"button",8),t.bIt("click",function(){return h.btnCloseDialog()}),t.EFF(9),t.nI1(10,"mytranslate"),t.k0s(),t.j41(11,"button",9),t.bIt("click",function(){return h.confirmDialog()}),t.EFF(12),t.nI1(13,"mytranslate"),t.k0s()()()),2&u&&(t.R7$(4),t.Y8G("ngIf",h.data.iconName),t.R7$(),t.Y8G("innerHtml",h.data.content,t.npT),t.R7$(),t.Y8G("ngIf",h.data.textConfirm),t.R7$(3),t.SpI(" ",t.bMT(10,6,"lang_auto_huy")," "),t.R7$(2),t.Y8G("disabled",h.data.textConfirm&&h.data.textConfirm!==h.confirmValue.value),t.R7$(),t.SpI(" ",t.bMT(13,8,"lang_auto_xac_nhan")," "))},dependencies:[d.YU,d.bT,e.me,e.BC,e.l_,S.WGl,p.wp],encapsulation:2}),b})()}}]);