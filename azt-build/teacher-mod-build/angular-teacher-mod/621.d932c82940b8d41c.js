(self.webpackChunkTeacherMod=self.webpackChunkTeacherMod||[]).push([[621],{7919:(Q,l,S)=>{"use strict";S.d(l,{Z:()=>P});var i=S(48891);let P=(()=>{var T;class U{constructor(A){this.el=A,this.hasDecimalPoint=!1,this.hasNegativeSign=!1,this.navigationKeys=["Backspace","Delete","Tab","Escape","Enter","Home","End","ArrowLeft","ArrowRight","Clear","Copy","Paste"],this.decimal=!1,this.decimalSeparator=".",this.decimalSeparator1=".",this.decimalSeparator2=",",this.allowNegatives=!1,this.allowPaste=!0,this.negativeSign="-",this.min=-1/0,this.max=1/0,this.regex=null,this.inputElement=A.nativeElement}ngOnChanges(A){if(A.pattern&&(this.regex=this.pattern?RegExp(this.pattern):null),A.min){const _=Number(this.min);this.min=isNaN(_)?-1/0:_}if(A.max){const _=Number(this.max);this.max=isNaN(_)?1/0:_}}onBeforeInput(A){if(isNaN(Number(A.data))){if(A.data===this.decimalSeparator1||A.data===this.decimalSeparator2||A.data===this.negativeSign&&this.allowNegatives)return;A.preventDefault(),A.stopPropagation()}}onKeyDown(A){if(this.navigationKeys.indexOf(A.key)>-1||("a"===A.key||"KeyA"===A.code)&&!0===A.ctrlKey||("c"===A.key||"KeyC"===A.code)&&!0===A.ctrlKey||("v"===A.key||"KeyV"===A.code)&&!0===A.ctrlKey||("x"===A.key||"KeyX"===A.code)&&!0===A.ctrlKey||("a"===A.key||"KeyA"===A.code)&&!0===A.metaKey||("c"===A.key||"KeyC"===A.code)&&!0===A.metaKey||("v"===A.key||"KeyV"===A.code)&&!0===A.metaKey||("x"===A.key||"KeyX"===A.code)&&!0===A.metaKey)return;let _="";var R=A.key;if(A.key===this.decimalSeparator2&&(R=this.decimalSeparator1),this.decimal&&R===this.decimalSeparator1)return _=this.forecastValue(R),_.split(this.decimalSeparator1).length>2||(this.hasDecimalPoint=_.indexOf(this.decimalSeparator1)>-1,this.setNewValue(R)),void A.preventDefault();if(R===this.negativeSign&&this.allowNegatives)return _=this.forecastValue(R),_.charAt(0)!==this.negativeSign||_.split(this.negativeSign).length>2?void A.preventDefault():void(this.hasNegativeSign=_.split(this.negativeSign).length>-1);if(" "===R||isNaN(Number(R)))return void A.preventDefault();if(_=_||this.forecastValue(R),this.regex&&!this.regex.test(_))return void A.preventDefault();const I=Number(_);(I>this.max||I<this.min)&&A.preventDefault()}onPaste(A){if(!0===this.allowPaste){let _="";window.clipboardData?_=window.clipboardData.getData("text"):A.clipboardData&&A.clipboardData.getData&&(_=A.clipboardData.getData("text/plain")),this.pasteData(_),A.preventDefault()}else A.preventDefault(),A.stopPropagation()}onDrop(A){const _=A.dataTransfer?.getData("text")??"";this.inputElement.focus(),this.pasteData(_),A.preventDefault()}pasteData(A){A=this.replaceDecimalSeparator(A);const _=this.sanitizeInput(A);if(!_.includes(this.negativeSign)||!this.hasNegativeSign||this.getSelection().includes(this.negativeSign)){if(!document.execCommand("insertText",!1,_))if(this.inputElement.setRangeText){const{selectionStart:I,selectionEnd:V}=this.inputElement;this.inputElement.setRangeText(_,I??0,V??0,"end"),typeof window.InstallTrigger<"u"&&this.inputElement.dispatchEvent(new Event("input",{cancelable:!0}))}else this.insertAtCursor(this.inputElement,_);this.decimal&&(this.hasDecimalPoint=this.inputElement.value.indexOf(this.decimalSeparator1)>-1),this.hasNegativeSign=this.inputElement.value.indexOf(this.negativeSign)>-1}}setNewValue(A){A=this.replaceDecimalSeparator(A),this.insertAtCursor(this.inputElement,A),this.decimal&&(this.hasDecimalPoint=this.inputElement.value.indexOf(this.decimalSeparator1)>-1),this.hasNegativeSign=this.inputElement.value.indexOf(this.negativeSign)>-1}insertAtCursor(A,_){const R=A.selectionStart??0,I=A.selectionEnd??0;A.value=A.value.substring(0,R)+_+A.value.substring(I,A.value.length);const V=R+_.length;A.focus(),A.setSelectionRange(V,V),this.triggerEvent(A,"input")}triggerEvent(A,_){if("createEvent"in document){const R=document.createEvent("HTMLEvents");R.initEvent(_,!1,!0),A.dispatchEvent(R)}}sanitizeInput(A){let R,_="";R=this.decimal&&this.isValidDecimal(A)?new RegExp(`${this.getNegativeSignRegExp()}[^0-9${this.decimalSeparator1}]`,"g"):new RegExp(`${this.getNegativeSignRegExp()}[^0-9]`,"g"),_=A.replace(R,"");const I=this.inputElement.maxLength;if(I>0){const V=I-this.inputElement.value.length+(_.includes(`${this.negativeSign}`)?1:0);_=V>0?_.substring(0,V):""}return _}getNegativeSignRegExp(){return!this.allowNegatives||this.hasNegativeSign&&!this.getSelection().includes(this.negativeSign)?"":`(?!^${this.negativeSign})`}isValidDecimal(A){if(this.hasDecimalPoint){const _=this.getSelection();return _&&_.indexOf(this.decimalSeparator1)>-1?A.split(this.decimalSeparator1).length<=2:A.indexOf(this.decimalSeparator1)<0}return A.split(this.decimalSeparator1).length<=2}getSelection(){return this.inputElement.value.substring(this.inputElement.selectionStart??0,this.inputElement.selectionEnd??0)}forecastValue(A){const R=this.inputElement.selectionEnd??0,I=this.inputElement.value;return I.substring(0,this.inputElement.selectionStart??0)+A+I.substring(R)}replaceDecimalSeparator(A){return A.replace(",",this.decimalSeparator).replace(".",this.decimalSeparator)}}return(T=U).\u0275fac=function(A){return new(A||T)(i.rXU(i.aKT))},T.\u0275dir=i.FsC({type:T,selectors:[["","appOnlyNumber",""]],hostBindings:function(A,_){1&A&&i.bIt("beforeinput",function(I){return _.onBeforeInput(I)})("keydown",function(I){return _.onKeyDown(I)})("paste",function(I){return _.onPaste(I)})("drop",function(I){return _.onDrop(I)})},inputs:{decimal:"decimal",decimalSeparator:"decimalSeparator",decimalSeparator1:"decimalSeparator1",decimalSeparator2:"decimalSeparator2",allowNegatives:"allowNegatives",allowPaste:"allowPaste",negativeSign:"negativeSign",min:"min",max:"max",pattern:"pattern"},standalone:!0,features:[i.OA$]}),U})()},55465:(Q,l,S)=>{"use strict";S.d(l,{t:()=>U});var i=S(43234),P=S(48891),T=S(23356);let U=(()=>{var O;class A{constructor(R){this.configService=R}getCurrentVersion(){return i.c.versionTime}getGlobalNotice(){return this.configService.getConfig("globalNotice")}getEnvValue(R){return this.configService.getConfig(R)}getLinkEmbedDocument(R){var I=this.configService.getConfig("docView");return I&&"MICROSOFT"!=I?`https://docs.google.com/viewer?url=${R}&embedded=true`:`https://view.officeapps.live.com/op/embed.aspx?src=${R}`}getVersionMarkNote(R){if(!R)return 1000009;const D=R.match(/ver=(\d+)/);return Number(D?.[1]??1000009)}}return(O=A).\u0275fac=function(R){return new(R||O)(P.KVO(T.u))},O.\u0275prov=P.jDH({token:O,factory:O.\u0275fac,providedIn:"root"}),A})()},40111:(Q,l,S)=>{"use strict";S.d(l,{k:()=>O});var i=S(64198),P=S(73202),T=S(48891),U=S(44172);let O=(()=>{var A;class _{getMineTypeByFileType(I){let D="";switch(this.commonService.getEnumTypeWithDefault(P.d,I,P.d.unknown)){case P.d.doc:case P.d.docx:D="application/vnd.openxmlformats-officedocument.wordprocessingml.document";break;case P.d.ppt:case P.d.pptx:D="application/vnd.openxmlformats-officedocument.presentationml.presentation";break;case P.d.xlsx:D="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";break;case P.d.pdf:D="application/pdf";break;case P.d.video:case P.d.mp4:D="video/mp4";break;case P.d.mov:D="video/mov";break;case P.d.webm:D="video/webm";break;case P.d.quicktime:D="video/quicktime";break;case P.d.audio:D="audio/mpeg";break;case P.d.mp3:D="audio/mp3";break;case P.d.wav:D="audio/wav";break;case P.d.jpeg:case P.d.image:D="image/jpeg";break;case P.d.google_docs:D="google_docs"}return D}getMineTypeByExtension(I){switch(new RegExp(/(?:\.([^.]+))?$/).exec(I)?.[1]){case"pdf":return"application/pdf";case"xlsx":return"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";case"xsl":case"csv":return"application/vnd.ms-excel";case"jpg":return"image/jpg";case"jpge":return"image/jpge";default:return"application/json-patch+json"}}getTypeFileByMime(I){return I.mimes&&(0,i.I7)(I.mimes)||I.name?.toLowerCase().endsWith(".azt")?P.d.docx:I.mimes&&(0,i.nL)(I.mimes)?P.d.xlsx:I.mimes&&(0,i.JK)(I.mimes)?P.d.audio:I.mimes&&(0,i.cZ)(I.mimes)?P.d.video:I.mimes&&(0,i.wu)(I.mimes)?P.d.image:I.mimes&&(0,i.Ev)(I.mimes)?P.d.pdf:I.mimes&&(0,i.rl)(I.mimes)?P.d.powerpoint:void 0}constructor(I){this.commonService=I}}return(A=_).\u0275fac=function(I){return new(I||A)(T.KVO(U.R))},A.\u0275prov=T.jDH({token:A,factory:A.\u0275fac,providedIn:"root"}),_})()},74151:(Q,l,S)=>{"use strict";S.d(l,{n:()=>T});var i=S(48891),P=S(44172);let T=(()=>{var U;class O{resizeDrawerHeight(_,R){if(this.autoResizeHeight=_,this.drawer=R,this.drawer&&this.autoResizeHeight){let I=()=>{let W=document.querySelector(".azt-drawer-content"),s=document.querySelector(".azt-draw-left");if(s&&s instanceof HTMLElement&&W&&W instanceof HTMLElement){let M=W;M.style.minHeight=this.isOpenSideNav?s.clientHeight+10+"px":"auto"}},V=new ResizeObserver(W=>{I()}),D=document.querySelector(".azt-draw-left");D&&V.observe(D),I()}}openDrawer(){this.drawer?.open(),this.isOpenSideNav=!0}closeDrawer(){this.drawer?.close(),this.isOpenSideNav=!1}toggleDrawer(){this.drawer?.toggle(),this.isOpenSideNav=!this.isOpenSideNav}openedChange(_){this.isOpenSideNav=_,this.resizeDrawerHeight(this.autoResizeHeight)}changeToMobileMode(_){_?(this.mode="over",this.hasBackdrop=!0):(this.mode="side",this.hasBackdrop=!1)}constructor(_){this.commonService=_,this.hasBackdrop=!!this.commonService.isMobileOrTable(),this.mode=this.commonService.isMobileOrTable()?"over":"side",this.isShowActions=(this.commonService.isMobileOrTable(),!0),this.isOpenSideNav=!this.commonService.isMobileOrTable(),this.autoResizeHeight=!1}}return(U=O).\u0275fac=function(_){return new(_||U)(i.KVO(P.R))},U.\u0275prov=i.jDH({token:U,factory:U.\u0275fac,providedIn:null}),O})()},73202:(Q,l,S)=>{"use strict";S.d(l,{d:()=>i});var i=function(P){return P.unknown="unknown",P.xlsx="xlsx",P.image="image",P.jpeg="jpeg",P.doc="doc",P.docx="docx",P.ppt="ppt",P.pptx="pptx",P.pdf="pdf",P.video="video",P.mp4="mp4",P.mov="mov",P.webm="webm",P.quicktime="quicktime",P.audio="audio",P.mp3="mp3",P.wav="wav",P.google_docs="google_docs",P.exam="exam",P.homework="homework",P.powerpoint="powerpoint",P}(i||{})},78705:(Q,l,S)=>{"use strict";S.d(l,{L:()=>s});var i=S(48891),P=S(59640),T=S(54460),U=S(10936),O=S(65162),A=S(44155),_=S(15343),R=S(70050),I=S(5502),V=S(36894),D=S(55465),W=S(47348);let s=(()=>{var M;class v extends P.H{onLoad(){setTimeout(()=>{this.loadedEvent.emit(!0)},0)}checkValidLink(){this.whiteListOfficeIframeSrc=this.envService.getLinkEmbedDocument(this.cdnLink)}ngOnChanges(){this.checkValidLink()}ngOnInit(){super.ngOnInit(),this.checkValidLink()}constructor(L){super(),this.envService=L,this.videoMimesType="",this.classNames="",this.styles="",this.loadedEvent=new i.bkB,this.whiteListOfficeIframeSrc=""}}return(M=v).\u0275fac=function(L){return new(L||M)(i.rXU(D.t))},M.\u0275cmp=i.VBU({type:M,selectors:[["azt-office-embed"]],inputs:{cdnLink:"cdnLink",videoMimesType:"videoMimesType",classNames:"classNames",styles:"styles"},outputs:{loadedEvent:"loadedEvent"},standalone:!0,features:[i.Vt3,i.OA$,i.aNF],decls:2,vars:6,consts:[["frameborder","0",3,"load","src"]],template:function(L,x){1&L&&(i.j41(0,"iframe",0),i.nI1(1,"safe"),i.bIt("load",function(){return x.onLoad()}),i.k0s()),2&L&&(i.HbH(x.classNames),i.Y8G("src",i.bMT(1,4,x.whiteListOfficeIframeSrc),i.f$h),i.BMQ("style",x.styles,i.$dS))},dependencies:[T.MD,U.X1,O.iI,U.YN,A.s,_.flO,R.L,W.JI,I.Id,V.k],encapsulation:2}),v})()},53043:(Q,l,S)=>{"use strict";S.d(l,{V:()=>r});var i=S(54460),P=S(10936),T=S(89163),U=S(65162),O=S(15343),A=S(13763),_=S(5502),R=S(44155),I=S(33887),V=S(47348),D=S(70050),W=S(64198),s=S(48891),M=S(59640),v=S(36894);let C=(()=>{var a;class g extends M.H{constructor(){super(...arguments),this.audioMimesType="",this.loadedEvent=new s.bkB}onLoad(){setTimeout(()=>{this.loadedEvent.emit(!0)},0)}}return(a=g).\u0275fac=(()=>{let f;return function(k){return(f||(f=s.xGo(a)))(k||a)}})(),a.\u0275cmp=s.VBU({type:a,selectors:[["azt-audio-embed"]],inputs:{cdnLink:"cdnLink",audioMimesType:"audioMimesType"},outputs:{loadedEvent:"loadedEvent"},standalone:!0,features:[s.Vt3,s.aNF],decls:3,vars:2,consts:[["controls",""],[3,"load","src"]],template:function(h,k){1&h&&(s.j41(0,"audio",0)(1,"source",1),s.bIt("load",function(){return k.onLoad()}),s.k0s(),s.EFF(2," Your browser does not support the audio element.\n"),s.k0s()),2&h&&(s.R7$(),s.Y8G("src",k.cdnLink,s.B4B),s.BMQ("type",k.audioMimesType))},dependencies:[i.MD,P.X1,U.iI,P.YN,R.s,O.flO,D.L,_.Id,v.k],encapsulation:2}),g})();var L=S(78705),x=S(21792),n=S(52811),t=S(73202),u=S(86388),p=S(58112);const c=a=>({flex:a});function b(a,g){1&a&&(s.j41(0,"div",3)(1,"span",4),s.nrm(2,"azt-loading-ui"),s.k0s(),s.j41(3,"span",5),s.EFF(4,"Loading..."),s.k0s()())}function m(a,g){if(1&a&&(s.j41(0,"span"),s.EFF(1),s.nI1(2,"mytranslate"),s.k0s()),2&a){const f=s.XpG(3);s.R7$(),s.Lme("",s.bMT(2,2,"lang_auto_dung_luong"),": ",f.fileMb," MB |")}}function d(a,g){if(1&a&&(s.j41(0,"div",20),s.DNE(1,m,3,4,"span",21),s.EFF(2),s.nI1(3,"mytranslate"),s.k0s()),2&a){const f=s.XpG(2);s.R7$(),s.Y8G("ngIf",0!=f.fileMb),s.R7$(),s.Lme(" ",s.bMT(3,3,"lang_auto_loai"),": ",f.fileOption.mimes," ")}}function w(a,g){1&a&&(s.j41(0,"div",20),s.EFF(1),s.nI1(2,"mytranslate"),s.k0s()),2&a&&(s.R7$(),s.JRh(s.bMT(2,1,"lang_auto_dung_luong_03_mb_|_loai__images")))}function F(a,g){if(1&a&&(s.j41(0,"a",22),s.nrm(1,"lucide-icon",23),s.k0s()),2&a){const f=s.XpG(2);s.BMQ("href",f.rootLink,s.B4B)("download",f.fileOption.name)}}function B(a,g){if(1&a){const f=s.RV6();s.j41(0,"azt-audio-embed",30),s.bIt("onLoad",function(){s.eBV(f);const k=s.XpG(4);return s.Njj(k.onLoad())}),s.k0s()}if(2&a){let f;const h=s.XpG(4);s.Y8G("cdnLink",h.cdnLink)("audioMimesType",null!==(f=h.fileOption.mimes)&&void 0!==f?f:"")}}function z(a,g){if(1&a&&(s.j41(0,"div")(1,"div",28),s.DNE(2,B,1,2,"azt-audio-embed",29),s.k0s()()),2&a){const f=s.XpG(3);s.R7$(2),s.Y8G("ngIf",f.cdnLink)}}function J(a,g){if(1&a){const f=s.RV6();s.j41(0,"div")(1,"div",31)(2,"azt-video-embed",32),s.bIt("loadedEvent",function(){s.eBV(f);const k=s.XpG(3);return s.Njj(k.onLoad())}),s.k0s()()()}if(2&a){let f;const h=s.XpG(3);s.R7$(2),s.Y8G("cdnLink",h.cdnLink)("videoMimesType",null!==(f=h.fileOption.mimes)&&void 0!==f?f:"")("videoThumbUrl",h.videoThumbUrl)("styles","width: 100vw; height: 95vh; max-height: calc(100vh - 60px); padding-bottom: 1rem")}}function X(a,g){if(1&a){const f=s.RV6();s.j41(0,"div")(1,"div",33)(2,"azt-office-embed",34),s.bIt("loadedEvent",function(){s.eBV(f);const k=s.XpG(3);return s.Njj(k.onLoad())}),s.k0s()()()}if(2&a){const f=s.XpG(3);s.R7$(2),s.Y8G("cdnLink",f.cdnLink)("styles","width: 100vw; height: 95vh; max-height: calc(100vh - 60px); padding-bottom: 1rem")}}function oe(a,g){if(1&a){const f=s.RV6();s.j41(0,"div")(1,"div",35)(2,"pdf-viewer",36),s.bIt("load",function(){s.eBV(f);const k=s.XpG(3);return s.Njj(k.onLoad())}),s.k0s()()()}if(2&a){const f=s.XpG(3);s.R7$(2),s.Y8G("src",f.cdnLink)("show-all",!0)}}function de(a,g){if(1&a){const f=s.RV6();s.j41(0,"div")(1,"div",31)(2,"img",37),s.bIt("load",function(){s.eBV(f);const k=s.XpG(3);return s.Njj(k.onLoad())}),s.k0s()()()}if(2&a){const f=s.XpG(3);s.R7$(2),s.BMQ("src",f.cdnLink,s.B4B)}}function he(a,g){if(1&a&&(s.j41(0,"div")(1,"div",31),s.nrm(2,"iframe",38),s.nI1(3,"safe"),s.k0s()()),2&a){const f=s.XpG(3);s.R7$(2),s.HbH("mx-auto"),s.Y8G("src",s.bMT(3,3,f.cdnLink),s.f$h)}}function N(a,g){if(1&a&&(s.qex(0),s.j41(1,"div",24)(2,"div",25),s.DNE(3,z,3,1,"div",21)(4,J,3,4,"div",21)(5,X,3,2,"div",21)(6,oe,3,2,"div",21)(7,de,3,1,"div",21)(8,he,4,5,"div",21),s.nrm(9,"div",26),s.k0s(),s.nrm(10,"div",27),s.k0s(),s.bVm()),2&a){const f=s.XpG(2);s.R7$(3),s.Y8G("ngIf","audio"===f.typeFile),s.R7$(),s.Y8G("ngIf","video"===f.typeFile),s.R7$(),s.Y8G("ngIf","officeapps"===f.typeFile),s.R7$(),s.Y8G("ngIf","pdf"===f.typeFile),s.R7$(),s.Y8G("ngIf","image"===f.typeFile),s.R7$(),s.Y8G("ngIf","google_docs"===f.typeFile)}}function o(a,g){if(1&a){const f=s.RV6();s.j41(0,"div",24)(1,"div",25)(2,"div",39)(3,"img",40),s.bIt("load",function(){s.eBV(f);const k=s.XpG(2);return s.Njj(k.onLoad())}),s.k0s()()()()}if(2&a){const f=s.XpG(2);s.R7$(3),s.BMQ("src",f.fileOption.url,s.B4B)}}function e(a,g){if(1&a){const f=s.RV6();s.j41(0,"div",6)(1,"div",7)(2,"div",8)(3,"div",9),s.nrm(4,"div",10),s.nI1(5,"coreModConvertCdnLinkOfGitHub"),s.k0s(),s.j41(6,"div",11),s.EFF(7),s.k0s(),s.DNE(8,d,4,5,"div",12)(9,w,3,3,"div",12),s.k0s(),s.j41(10,"div",13)(11,"span",14),s.DNE(12,F,2,2,"a",15),s.k0s(),s.j41(13,"button",16),s.bIt("click",function(){s.eBV(f);const k=s.XpG();return s.Njj(k.btnClosePreview())}),s.nrm(14,"lucide-icon",17),s.k0s()()(),s.j41(15,"div",18),s.DNE(16,N,11,6,"ng-container",19)(17,o,4,1,"ng-template",null,0,s.C5r),s.k0s()()}if(2&a){const f=s.sdS(18),h=s.XpG();s.R7$(2),s.Y8G("ngClass",s.eq3(11,c,""==h.fileOption.name)),s.R7$(2),s.xc7("background-image",s.bMT(5,9,"images/documents.png")),s.R7$(3),s.JRh(h.fileOption.name),s.R7$(),s.Y8G("ngIf",h.fileOption.mimes),s.R7$(),s.Y8G("ngIf",!h.fileOption.mimes),s.R7$(3),s.Y8G("ngIf",h.showDownloadIcon),s.R7$(4),s.Y8G("ngIf",!h.viewFullImageWithScroll)("ngIfElse",f)}}let r=(()=>{var a;class g extends I._{onLoad(){this.stopStatusObj()}initData(){let h=this.fileOption?.size?Number(this.fileOption.size):0,k=this.fileOption?.mimes?this.fileOption.mimes:"";this.cdnLink=this.sAztCommonCdnService.getMyCdn(this.fileOption?.url??""),this.rootLink=this.cdnLink,this.fileMb=this.getFileMB(h),this.typeFile=(0,W.yY)(k),(0,W.VJ)(this.cdnLink)&&(this.typeFile="video"),(0,W.si)(this.cdnLink)&&(this.typeFile="google_docs"),setTimeout(()=>{this.stopStatusObj()},200)}removeClassCss(){document.body.classList.remove("overflow-hidden")}btnClosePreview(){this.removeClassCss(),this.dialogRef.close(!1)}getFileMB(h){return h&&h>0?(h/=1048576).toFixed(2):0}ngOnInit(){if(super.ngOnInit(),document.body.classList.add("overflow-hidden"),this.videoThumbUrl=this.sAztCommonCdnService.coreModConvertCdnLinkOfGitHub("images/video-thumb.png"),this.initStatusObj(),this.initData(),this.fileOption?.type===this.allDocumentTypes.google_docs)return window.open(this.fileOption?.url,"_blank")?.focus(),void this.dialogRef.close()}constructor(h,k,G,j){super(j,G),this.dom=h,this.sAztCommonCdnService=k,this.dialogRef=G,this.viewFullImageWithScroll=!1,this.showDownloadIcon=!0,this.typeFile="",this.cdnLink="",this.rootLink="",this.fileMb=0,this.videoThumbUrl="",this.allDocumentTypes=t.d,this.fileOption=j.fileOption,this.viewFullImageWithScroll=j.viewFullImageWithScroll??!1,this.showDownloadIcon=j.showDownloadIcon??this.showDownloadIcon}ngOnDestroy(){this.removeClassCss(),super.ngOnDestroy()}}return(a=g).\u0275fac=function(h){return new(h||a)(s.rXU(u.up),s.rXU(p.c),s.rXU(T.CP,8),s.rXU(T.Vh,8))},a.\u0275cmp=s.VBU({type:a,selectors:[["azt-preview-media-new"]],standalone:!0,features:[s.Vt3,s.aNF],decls:2,vars:2,consts:[["viewFullImage",""],["class","loading-block",4,"ngIf"],["class","box h-full","style","border-radius: 0px",4,"ngIf"],[1,"loading-block"],[1,"w-4","h-4","inline-block"],[1,"sr-only","ml-2"],[1,"box","h-full",2,"border-radius","0px"],[1,"flex","fixed","top-0","pt-3","border-b","border-slate-200/60","dark:border-darkmode-400","items-center","w-full"],[1,"file-preview__header-left",2,"align-items","center",3,"ngClass"],["title","",1,"avatar","avatar--xs"],[1,"avatar-img",2,"background-size","cover"],[1,"file-preview__header__title"],["class","file-preview__header__send-time",4,"ngIf"],[1,"file-preview__header-right"],[1,"mr-4"],["class","btn btn-outline-primary btn-transparent","target","_blank",4,"ngIf"],["azt-track-service","azt-preview-media-c4Ztzr2oIZj",1,"btn","btn-outline-secondary","btn-transparent",3,"click"],["name","x","size","24"],[1,"file-preview__main","flx",2,"overflow-x","auto","flex","1 1 auto"],[4,"ngIf","ngIfElse"],[1,"file-preview__header__send-time"],[4,"ngIf"],["target","_blank",1,"btn","btn-outline-primary","btn-transparent"],["name","download","size","24"],[1,"file-preview__main-iframe","mx-auto"],[1,"file-preview__notify"],[1,"tool-hide"],[1,"file-preview__main-comments"],[1,"container-fluid","mt-3"],[3,"cdnLink","audioMimesType","onLoad",4,"ngIf"],[3,"onLoad","cdnLink","audioMimesType"],[1,"pl-2","pr-2","mt-3"],[3,"loadedEvent","cdnLink","videoMimesType","videoThumbUrl","styles"],[1,"pl-2","pr-2","mp-0"],[3,"loadedEvent","cdnLink","styles"],[1,"container-fluid","mp-0"],[2,"width","100vw","height","95vh","max-height","calc(100vh - 60px)","padding-bottom","1rem","display","block",3,"load","src","show-all"],["alt","Responsive image",1,"img-fluid","image-preview",2,"max-height","calc(100vh - 80px)","padding-bottom","1rem",3,"load"],["width","850","height","600","frameborder","0","allowfullscreen","",3,"src"],[1,"pl-2","pr-2","mt-3","block-img"],[1,"img-fluid","image-preview",3,"load"]],template:function(h,k){1&h&&s.DNE(0,b,5,0,"div",1)(1,e,19,13,"div",2),2&h&&(s.Y8G("ngIf",k.statusObj.loading),s.R7$(),s.Y8G("ngIf",null!=k.fileOption&&!k.statusObj.loading))},dependencies:[A.Lk,A.c6,n.R,C,x.y,L.L,i.MD,i.YU,i.bT,P.X1,U.iI,P.YN,V.wp,V.Vs,R.s,O.flO,O.WGl,D.L,V.JI,_.Id,v.k],styles:[".file-preview[_ngcontent-%COMP%]{position:fixed;width:100%;height:100vh;z-index:9999;display:flex;flex-direction:column;left:0;top:0;border-radius:0}.block-img[_ngcontent-%COMP%]{width:100vw;height:90vh;text-align:center;overflow-y:auto}.loading-block[_ngcontent-%COMP%]{z-index:1000;width:100%;display:flex;justify-content:center;align-items:center;left:0;top:0;position:fixed;height:100%;min-height:100vh}.file-preview__main[_ngcontent-%COMP%]{margin-top:65px;width:100%;min-height:100%;min-width:277px;display:flex;position:fixed}.file-preview__header[_ngcontent-%COMP%]{padding-top:10px;height:65px;box-shadow:0 2px 4px #0003;position:fixed;align-items:center;z-index:1;top:0;width:100%}.flx-sp-btw[_ngcontent-%COMP%]{justify-content:space-between}.flx[_ngcontent-%COMP%]{display:flex;flex-flow:row nowrap}.file-preview__header-left[_ngcontent-%COMP%]{margin-left:20px;margin-right:10px;margin-bottom:12px;flex:1 1 50px;min-width:0}.file-preview__header-left[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{float:left;margin-right:10px}.avatar--xs[_ngcontent-%COMP%]{width:40px;height:40px;font-size:17px}.avatar[_ngcontent-%COMP%]{position:relative;contain:layout size style}.avatar--xs[_ngcontent-%COMP%] > .avatar-img[_ngcontent-%COMP%]{width:40px;height:40px}.avatar-img[_ngcontent-%COMP%]{border-radius:100%}.file-preview__header__title[_ngcontent-%COMP%]{font-size:15px;font-weight:500}.file-preview__header__send-time[_ngcontent-%COMP%], .file-preview__header__title[_ngcontent-%COMP%]{white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.file-preview__header__send-time[_ngcontent-%COMP%]{padding-top:2px;font-size:13px;color:#a0a0a0}.file-preview__header-right[_ngcontent-%COMP%]{margin-right:15px;white-space:nowrap;display:flex}.file-preview__controls-container[_ngcontent-%COMP%]{margin-right:40px}.mp-0[_ngcontent-%COMP%]{margin:0!important;padding:0!important}"]}),g})()},63349:(Q,l,S)=>{"use strict";S.d(l,{V:()=>n});var i=S(54460),P=S(48891),T=S(10936),U=S(65162),O=S(15343),A=S(5502),_=S(44155),R=S(34068),I=S(70050),V=S(52811),D=S(9516),W=S(36894);const s=["*"];function M(t,u){1&t&&P.SdG(0,0,["*ngIf","!isUploadFile"])}function v(t,u){if(1&t&&(P.j41(0,"div",8)(1,"h5",9),P.EFF(2),P.k0s(),P.j41(3,"div",10),P.nrm(4,"progress",11),P.k0s()()),2&t){const p=u.$implicit;P.R7$(2),P.JRh(p.fileName),P.R7$(2),P.FS9("value",p.uploadProgress)}}function C(t,u){if(1&t&&(P.qex(0),P.j41(1,"span",6),P.nrm(2,"azt-loading-ui"),P.k0s(),P.DNE(3,v,5,2,"div",7),P.bVm()),2&t){const p=P.XpG(2);P.R7$(3),P.Y8G("ngForOf",p.fileUploadQueue)}}function L(t,u){1&t&&(P.j41(0,"span",6),P.nrm(1,"azt-loading-ui"),P.k0s())}function x(t,u){if(1&t&&(P.j41(0,"div"),P.DNE(1,C,4,1,"ng-container",5)(2,L,2,0,"ng-template",null,1,P.C5r),P.k0s()),2&t){const p=P.sdS(3),c=P.XpG();P.R7$(),P.Y8G("ngIf",c.showProgress)("ngIfElse",p)}}let n=(()=>{var t;class u extends D.L{constructor(){super(...arguments),this.uploadComplete=new P.bkB}emitUploadComplete(c){this.uploadComplete.emit(c)}ngOnInit(){this.files&&this.files.length>0&&this.emitFile(this.files)}}return(t=u).\u0275fac=(()=>{let p;return function(b){return(p||(p=P.xGo(t)))(b||t)}})(),t.\u0275cmp=P.VBU({type:t,selectors:[["azt-upload-multiple-box"]],inputs:{files:"files"},outputs:{uploadComplete:"uploadComplete"},standalone:!0,features:[P.Vt3,P.aNF],ngContentSelectors:s,decls:5,vars:4,consts:[["formChoseFile",""],["notShowProgress",""],[3,"appDropZone","click"],["type","file","id","box-left-file-input","multiple","",1,"form-control","file-input",2,"display","none",3,"change","cancel","accept"],[4,"ngIf"],[4,"ngIf","ngIfElse"],[1,"w-4","h-4","inline-block","mr-2"],["class","w-48",4,"ngFor","ngForOf"],[1,"w-48"],[1,"text-md","font-medium","truncate"],[1,"progress-container"],["max","100",2,"width","100%","background-color","#1e40af",3,"value"]],template:function(c,b){if(1&c){const m=P.RV6();P.NAR(),P.j41(0,"div",2),P.bIt("appDropZone",function(w){return P.eBV(m),P.Njj(b.onDrop(w))})("click",function(){P.eBV(m);const w=P.sdS(2);return P.Njj(w.click())}),P.j41(1,"input",3,0),P.bIt("change",function(w){return P.eBV(m),P.Njj(b.onFileSelected(w))})("cancel",function(w){return P.eBV(m),P.Njj(b.onCancelSelect(w))})("cancel",function(w){return P.eBV(m),P.Njj(b.onCancelSelect(w))}),P.k0s(),P.DNE(3,M,1,0,"ng-content",4)(4,x,4,2,"div",4),P.k0s()}2&c&&(P.BMQ("class",b.containerClass),P.R7$(),P.FS9("accept",b.fileType),P.R7$(2),P.Y8G("ngIf",!b.isUploadFile),P.R7$(),P.Y8G("ngIf",b.isUploadFile))},dependencies:[R.F,V.R,i.MD,i.Sq,i.bT,T.X1,U.iI,T.YN,_.s,O.flO,I.L,A.Id,W.k],styles:['.progress-container[_ngcontent-%COMP%]{position:relative;display:block;background:#eee;height:10px;border-radius:6px;overflow:hidden}.progress-container[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;height:100%;background:#1e40af}progress[_ngcontent-%COMP%]{accent-color:#1e40af}[_ngcontent-%COMP%]::-webkit-progress-value{background-color:#1e40af}[_ngcontent-%COMP%]::-moz-progress-bar{background-color:#1e40af}']}),u})()},9516:(Q,l,S)=>{"use strict";S.d(l,{L:()=>n});var i=S(73014),P=S(27691),T=S(48891),U=S(59640),O=S(64198),A=S(39712),_=S(54460),R=S(10936),I=S(65162),V=S(44155),D=S(15343),W=S(70050),s=S(5502),M=S(36894),v=S(7308),C=S(48451),L=S(63709),x=S(52909);let n=(()=>{var t;class u extends U.H{uploadFile(c,b){return new Promise(m=>{this.checkCompressImage(c,d=>{this.fileUploadQueue=[],this.showProgress?this.apiUploadService.commonUploadFileProgress(this.uploadToCdnMenu,d,this.qrUploadHashCode).subscribe(w=>{if(w.type!==P.hv.UploadProgress)if(1===w.success){const F={...w.data};m(F)}else this.showErrorSnack(this.commonService.translateToKeyParam("lang_auto_khong_upload_duoc_tep_tin_vui_long_thu_lai_sau",w.message??"none")),m(null);else{let F=(w.loaded??0)/(w.total??1)*100,B=this.fileUploadQueue.find(z=>z.uuid==b);B?B.uploadProgress=F:this.fileUploadQueue.push({uuid:b,uploadProgress:0,fileName:c.name})}}):this.apiUploadService.commonUploadFile(this.uploadToCdnMenu,d,this.qrUploadHashCode).subscribe(w=>{if(w.type!==P.hv.UploadProgress)if(1===w.success){const F={...w.data};m(F)}else this.showErrorSnack(this.commonService.translateToKeyParam("lang_auto_khong_upload_duoc_tep_tin_vui_long_thu_lai_sau",w.message??"none")),m(null)})})})}onOpenFileDictionary(){return this.uploadActionsEvent.emit("SELECT_FILE"),!0}onFileSelected(c){this.uploadActionsEvent.emit("SELECTED");const b=c.target,m=b.files;m&&(this.emitFile(m),b.files=null)}onCancelSelect(c){this.uploadActionsEvent.emit("SELECTED")}onDrop(c){this.emitFile(c)}emitFile(c){return this.isDisabled?(this.limitSize=this.limitSize>200?200:this.limitSize,Array.from(c).find(d=>(0,O.hD)(d.size)>=this.limitSize)?this.showErrorSnack(this.commonService.translateToKeyParam("lang_auto_vui_long_chon_tep_co_kich_thuoc_nho_hon",this.limitSize.toString(),"MB")):Array.from(c).find(d=>this.isNotSupportedFile(d))?this.showErrorSnack(this.commonService.translateToKeyParam("lang_auto_chua_ho_tro_dinh_dang",this.notSupportedFile)):(this.isUploadFile=!0,this.isUploading.emit(this.isUploadFile),void this.checkConvertPdfToImages(Array.from(c),d=>{const w=d.map(F=>this.uploadFile(F,this.uuidService.getUuid()));Promise.all(w).then(F=>{this.isUploadFile=!1,this.isUploading.emit(this.isUploadFile);let B=F.filter(this.commonService.notEmpty);this.emitUploadComplete(B)})}))):this.showErrorSnack(this.commonService.translateString("lang_auto_ban_khong_co_quyen_thuc_hien_hanh_dong_nay"))}checkConvertPdfToImages(c,b){if(!this.convertPdfToImages)return b(c);this.convertAllPdfToImages(c).then(m=>{b(m)})}convertAllPdfToImages(c){var b=this;return new Promise(function(){var m=(0,i.A)(function*(d,w){let F=[];for(let B of c)if((0,O.Ev)(B.type))try{const z=1e3*b.convertPdfTimeout;let J=yield b.withTimeout(b.myPdfService.getImageWithPdf(B),z);F.push(...J)}catch{b.showErrorSnack("lang_common_convert_pdf_to_image_timeout"),d([])}else F.push(B);d(F)});return function(d,w){return m.apply(this,arguments)}}())}checkCompressImage(c,b){this.allowCompressImage?(0,O.w4)(c).then(m=>{b(m)}):b(c)}isNotSupportedFile(c){const b=[this.notSupportedFile],m=c.name.split(".").pop()?.toLowerCase();return b.includes(`.${m}`)}withTimeout(c,b){return new Promise((m,d)=>{const w=setTimeout(()=>{d(new Error("Operation timed out"))},b);c.then(F=>{clearTimeout(w),m(F)}).catch(F=>{clearTimeout(w),d(F)})})}constructor(c,b,m,d){super(),this.mobileWebviewService=c,this.apiUploadService=b,this.myPdfService=m,this.uuidService=d,this.convertPdfTimeout=30,this.isDisabled=!0,this.notSupportedFile=A.Ym.NONE,this.limitSize=200,this.allowCompressImage=!0,this.convertPdfToImages=!1,this.qrUploadHashCode="",this.showProgress=!1,this.containerClass="flex items-center justify-center h-full",this.isUploading=new T.bkB,this.uploadActionsEvent=new T.bkB,this.isUploadFile=!1,this.fileUploadQueue=[]}}return(t=u).\u0275fac=function(c){return new(c||t)(T.rXU(v.f),T.rXU(C.T),T.rXU(L.C),T.rXU(x.D))},t.\u0275cmp=T.VBU({type:t,selectors:[["ng-component"]],inputs:{convertPdfTimeout:"convertPdfTimeout",fileType:"fileType",uploadToCdnMenu:"uploadToCdnMenu",isDisabled:"isDisabled",notSupportedFile:"notSupportedFile",limitSize:"limitSize",allowCompressImage:"allowCompressImage",convertPdfToImages:"convertPdfToImages",qrUploadHashCode:"qrUploadHashCode",showProgress:"showProgress",containerClass:"containerClass"},outputs:{isUploading:"isUploading",uploadActionsEvent:"uploadActionsEvent"},standalone:!0,features:[T.Vt3,T.aNF],decls:0,vars:0,template:function(c,b){},dependencies:[_.MD,R.X1,I.iI,R.YN,V.s,D.flO,W.L,s.Id,M.k],encapsulation:2}),u})()},83876:function(module,__unused_webpack_exports,__webpack_require__){var _defineProperty=__webpack_require__(21076).default,_classPrivateMethodInitSpec=__webpack_require__(56965).default,_classPrivateFieldInitSpec=__webpack_require__(23076).default,_classPrivateFieldSet=__webpack_require__(93051).default,_classPrivateFieldGet=__webpack_require__(64647).default,_assertClassBrand=__webpack_require__(78737).default,_asyncToGenerator=__webpack_require__(80540).default,S;S=()=>(()=>{"use strict";var __webpack_modules__=[,(Q,l,S)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.VerbosityLevel=l.Util=l.UnknownErrorException=l.UnexpectedResponseException=l.UNSUPPORTED_FEATURES=l.TextRenderingMode=l.StreamType=l.RenderingIntentFlag=l.PermissionFlag=l.PasswordResponses=l.PasswordException=l.PageActionEventType=l.OPS=l.MissingPDFException=l.InvalidPDFException=l.ImageKind=l.IDENTITY_MATRIX=l.FormatError=l.FontType=l.FeatureTest=l.FONT_IDENTITY_MATRIX=l.DocumentActionEventType=l.CMapCompressionType=l.BaseException=l.AnnotationType=l.AnnotationStateModelType=l.AnnotationReviewState=l.AnnotationReplyType=l.AnnotationMode=l.AnnotationMarkedState=l.AnnotationFlag=l.AnnotationFieldFlag=l.AnnotationBorderStyleType=l.AnnotationActionEventType=l.AbortException=void 0,l.arrayByteLength=j,l.arraysToBytes=function Y(ie){const H=ie.length;if(1===H&&ie[0]instanceof Uint8Array)return ie[0];let K=0;for(let ve=0;ve<H;ve++)K+=j(ie[ve]);let ue=0;const me=new Uint8Array(K);for(let ve=0;ve<H;ve++){let be=ie[ve];be instanceof Uint8Array||(be="string"==typeof be?G(be):new Uint8Array(be));const xe=be.byteLength;me.set(be,ue),ue+=xe}return me},l.assert=function X(ie,H){ie||J(H)},l.bytesToString=function k(ie){("object"!=typeof ie||null===ie||void 0===ie.length)&&J("Invalid argument for bytesToString");const H=ie.length,K=8192;if(H<K)return String.fromCharCode.apply(null,ie);const ue=[];for(let me=0;me<H;me+=K){const ve=Math.min(me+K,H),be=ie.subarray(me,ve);ue.push(String.fromCharCode.apply(null,be))}return ue.join("")},l.createPromiseCapability=function ye(){const ie=Object.create(null);let H=!1;return Object.defineProperty(ie,"settled",{get:()=>H}),ie.promise=new Promise(function(K,ue){ie.resolve=function(me){H=!0,K(me)},ie.reject=function(me){H=!0,ue(me)}}),ie},l.createValidAbsoluteUrl=function de(ie,H=null,K=null){if(!ie)return null;try{if(K&&"string"==typeof ie){if(K.addDefaultProtocol&&ie.startsWith("www.")){const me=ie.match(/\./g);me&&me.length>=2&&(ie=`http://${ie}`)}if(K.tryConvertEncoding)try{ie=ae(ie)}catch{}}const ue=H?new URL(ie,H):new URL(ie);if(function oe(ie){if(!ie)return!1;switch(ie.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(ue))return ue}catch{}return null},l.escapeString=function Z(ie){return ie.replace(/([()\\\n\r])/g,H=>"\n"===H?"\\n":"\r"===H?"\\r":`\\${H}`)},l.getModificationDate=function Ae(ie=new Date){return[ie.getUTCFullYear().toString(),(ie.getUTCMonth()+1).toString().padStart(2,"0"),ie.getUTCDate().toString().padStart(2,"0"),ie.getUTCHours().toString().padStart(2,"0"),ie.getUTCMinutes().toString().padStart(2,"0"),ie.getUTCSeconds().toString().padStart(2,"0")].join("")},l.getVerbosityLevel=function F(){return d},l.info=function B(ie){d>=u.INFOS&&console.log(`Info: ${ie}`)},l.isArrayBuffer=function ge(ie){return"object"==typeof ie&&null!==ie&&void 0!==ie.byteLength},l.isArrayEqual=function _e(ie,H){if(ie.length!==H.length)return!1;for(let K=0,ue=ie.length;K<ue;K++)if(ie[K]!==H[K])return!1;return!0},l.isAscii=function q(ie){return/^[\x00-\x7F]*$/.test(ie)},l.objectFromMap=function re(ie){const H=Object.create(null);for(const[K,ue]of ie)H[K]=ue;return H},l.objectSize=function se(ie){return Object.keys(ie).length},l.setVerbosityLevel=function w(ie){Number.isInteger(ie)&&(d=ie)},l.shadow=he,l.string32=function $(ie){return String.fromCharCode(ie>>24&255,ie>>16&255,ie>>8&255,255&ie)},l.stringToBytes=G,l.stringToPDFString=function ne(ie){if(ie[0]>="\xef"){let K;if("\xfe"===ie[0]&&"\xff"===ie[1]?K="utf-16be":"\xff"===ie[0]&&"\xfe"===ie[1]?K="utf-16le":"\xef"===ie[0]&&"\xbb"===ie[1]&&"\xbf"===ie[2]&&(K="utf-8"),K)try{const ue=new TextDecoder(K,{fatal:!0}),me=G(ie);return ue.decode(me)}catch(ue){z(`stringToPDFString: "${ue}".`)}}const H=[];for(let K=0,ue=ie.length;K<ue;K++){const me=ee[ie.charCodeAt(K)];H.push(me?String.fromCharCode(me):ie.charAt(K))}return H.join("")},l.stringToUTF16BEString=function te(ie){const H=["\xfe\xff"];for(let K=0,ue=ie.length;K<ue;K++){const me=ie.charCodeAt(K);H.push(String.fromCharCode(me>>8&255),String.fromCharCode(255&me))}return H.join("")},l.stringToUTF8String=ae,l.unreachable=J,l.utf8StringToString=function le(ie){return unescape(encodeURIComponent(ie))},l.warn=z,S(2),l.IDENTITY_MATRIX=[1,0,0,1,0,0],l.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],l.RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},l.AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},l.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},l.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},l.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},l.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},l.AnnotationStateModelType={MARKED:"Marked",REVIEW:"Review"},l.AnnotationMarkedState={MARKED:"Marked",UNMARKED:"Unmarked"},l.AnnotationReviewState={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"},l.AnnotationReplyType={GROUP:"Group",REPLY:"R"},l.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512},l.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864},l.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},l.AnnotationActionEventType={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"},l.DocumentActionEventType={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"},l.PageActionEventType={O:"PageOpen",C:"PageClose"},l.StreamType={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"},l.FontType={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};const u={ERRORS:0,WARNINGS:1,INFOS:5};l.VerbosityLevel=u,l.CMapCompressionType={NONE:0,BINARY:1,STREAM:2},l.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},l.UNSUPPORTED_FEATURES={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"},l.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let d=u.WARNINGS;function z(ie){d>=u.WARNINGS&&console.log(`Warning: ${ie}`)}function J(ie){throw new Error(ie)}function he(ie,H,K){return Object.defineProperty(ie,H,{value:K,enumerable:!0,configurable:!0,writable:!1}),K}const N=function(){function H(K,ue){this.constructor===H&&J("Cannot initialize BaseException."),this.message=K,this.name=ue}return H.prototype=new Error,H.constructor=H,H}();function G(ie){"string"!=typeof ie&&J("Invalid argument for stringToBytes");const H=ie.length,K=new Uint8Array(H);for(let ue=0;ue<H;++ue)K[ue]=255&ie.charCodeAt(ue);return K}function j(ie){return void 0!==ie.length?ie.length:void 0!==ie.byteLength?ie.byteLength:void J("Invalid argument for arrayByteLength")}l.BaseException=N,l.PasswordException=class o extends N{constructor(H,K){super(H,"PasswordException"),this.code=K}},l.UnknownErrorException=class e extends N{constructor(H,K){super(H,"UnknownErrorException"),this.details=K}},l.InvalidPDFException=class r extends N{constructor(H){super(H,"InvalidPDFException")}},l.MissingPDFException=class a extends N{constructor(H){super(H,"MissingPDFException")}},l.UnexpectedResponseException=class g extends N{constructor(H,K){super(H,"UnexpectedResponseException"),this.status=K}},l.FormatError=class f extends N{constructor(H){super(H,"FormatError")}},l.AbortException=class h extends N{constructor(H){super(H,"AbortException")}},l.FeatureTest=class ce{static get isLittleEndian(){return he(this,"isLittleEndian",function fe(){const ie=new Uint8Array(4);return ie[0]=1,1===new Uint32Array(ie.buffer,0,1)[0]}())}static get isEvalSupported(){return he(this,"isEvalSupported",function pe(){try{return new Function(""),!0}catch{return!1}}())}static get isOffscreenCanvasSupported(){return he(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}};const y=[...Array(256).keys()].map(ie=>ie.toString(16).padStart(2,"0"));class E{static makeHexColor(H,K,ue){return`#${y[H]}${y[K]}${y[ue]}`}static scaleMinMax(H,K){let ue;H[0]?(H[0]<0&&(ue=K[0],K[0]=K[1],K[1]=ue),K[0]*=H[0],K[1]*=H[0],H[3]<0&&(ue=K[2],K[2]=K[3],K[3]=ue),K[2]*=H[3],K[3]*=H[3]):(ue=K[0],K[0]=K[2],K[2]=ue,ue=K[1],K[1]=K[3],K[3]=ue,H[1]<0&&(ue=K[2],K[2]=K[3],K[3]=ue),K[2]*=H[1],K[3]*=H[1],H[2]<0&&(ue=K[0],K[0]=K[1],K[1]=ue),K[0]*=H[2],K[1]*=H[2]),K[0]+=H[4],K[1]+=H[4],K[2]+=H[5],K[3]+=H[5]}static transform(H,K){return[H[0]*K[0]+H[2]*K[1],H[1]*K[0]+H[3]*K[1],H[0]*K[2]+H[2]*K[3],H[1]*K[2]+H[3]*K[3],H[0]*K[4]+H[2]*K[5]+H[4],H[1]*K[4]+H[3]*K[5]+H[5]]}static applyTransform(H,K){return[H[0]*K[0]+H[1]*K[2]+K[4],H[0]*K[1]+H[1]*K[3]+K[5]]}static applyInverseTransform(H,K){const ue=K[0]*K[3]-K[1]*K[2];return[(H[0]*K[3]-H[1]*K[2]+K[2]*K[5]-K[4]*K[3])/ue,(-H[0]*K[1]+H[1]*K[0]+K[4]*K[1]-K[5]*K[0])/ue]}static getAxialAlignedBoundingBox(H,K){const ue=E.applyTransform(H,K),me=E.applyTransform(H.slice(2,4),K),ve=E.applyTransform([H[0],H[3]],K),be=E.applyTransform([H[2],H[1]],K);return[Math.min(ue[0],me[0],ve[0],be[0]),Math.min(ue[1],me[1],ve[1],be[1]),Math.max(ue[0],me[0],ve[0],be[0]),Math.max(ue[1],me[1],ve[1],be[1])]}static inverseTransform(H){const K=H[0]*H[3]-H[1]*H[2];return[H[3]/K,-H[1]/K,-H[2]/K,H[0]/K,(H[2]*H[5]-H[4]*H[3])/K,(H[4]*H[1]-H[5]*H[0])/K]}static apply3dTransform(H,K){return[H[0]*K[0]+H[1]*K[1]+H[2]*K[2],H[3]*K[0]+H[4]*K[1]+H[5]*K[2],H[6]*K[0]+H[7]*K[1]+H[8]*K[2]]}static singularValueDecompose2dScale(H){const K=[H[0],H[2],H[1],H[3]],ue=H[0]*K[0]+H[1]*K[2],be=H[2]*K[1]+H[3]*K[3],xe=(ue+be)/2,Le=Math.sqrt((ue+be)**2-4*(ue*be-(H[2]*K[0]+H[3]*K[2])*(H[0]*K[1]+H[1]*K[3])))/2,Se=xe-Le||1;return[Math.sqrt(xe+Le||1),Math.sqrt(Se)]}static normalizeRect(H){const K=H.slice(0);return H[0]>H[2]&&(K[0]=H[2],K[2]=H[0]),H[1]>H[3]&&(K[1]=H[3],K[3]=H[1]),K}static intersect(H,K){const ue=Math.max(Math.min(H[0],H[2]),Math.min(K[0],K[2])),me=Math.min(Math.max(H[0],H[2]),Math.max(K[0],K[2]));if(ue>me)return null;const ve=Math.max(Math.min(H[1],H[3]),Math.min(K[1],K[3])),be=Math.min(Math.max(H[1],H[3]),Math.max(K[1],K[3]));return ve>be?null:[ue,ve,me,be]}static bezierBoundingBox(H,K,ue,me,ve,be,xe,Le){const Me=[],Se=[[],[]];let Ce,we,Te,Pe,ke,Oe,Ie,Re;for(let Ne=0;Ne<2;++Ne)if(0===Ne?(we=6*H-12*ue+6*ve,Ce=-3*H+9*ue-9*ve+3*xe,Te=3*ue-3*H):(we=6*K-12*me+6*be,Ce=-3*K+9*me-9*be+3*Le,Te=3*me-3*K),Math.abs(Ce)<1e-12){if(Math.abs(we)<1e-12)continue;Pe=-Te/we,0<Pe&&Pe<1&&Me.push(Pe)}else Ie=we*we-4*Te*Ce,Re=Math.sqrt(Ie),!(Ie<0)&&(ke=(-we+Re)/(2*Ce),0<ke&&ke<1&&Me.push(ke),Oe=(-we-Re)/(2*Ce),0<Oe&&Oe<1&&Me.push(Oe));let Ee,Fe=Me.length;const De=Fe;for(;Fe--;)Pe=Me[Fe],Ee=1-Pe,Se[0][Fe]=Ee*Ee*Ee*H+3*Ee*Ee*Pe*ue+3*Ee*Pe*Pe*ve+Pe*Pe*Pe*xe,Se[1][Fe]=Ee*Ee*Ee*K+3*Ee*Ee*Pe*me+3*Ee*Pe*Pe*be+Pe*Pe*Pe*Le;return Se[0][De]=H,Se[1][De]=K,Se[0][De+1]=xe,Se[1][De+1]=Le,Se[0].length=Se[1].length=De+2,[Math.min(...Se[0]),Math.min(...Se[1]),Math.max(...Se[0]),Math.max(...Se[1])]}}l.Util=E;const ee=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function ae(ie){return decodeURIComponent(escape(ie))}},(Q,l,S)=>{S(3)},(Q,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.isNodeJS=void 0;const S=!("object"!=typeof process||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&"browser"!==process.type);l.isNodeJS=S},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=void 0;var _util=__w_pdfjs_require__(1),_display_utils=__w_pdfjs_require__(5),_font_loader=__w_pdfjs_require__(7),_annotation_storage=__w_pdfjs_require__(8),_canvas=__w_pdfjs_require__(10),_worker_options=__w_pdfjs_require__(13),_is_node=__w_pdfjs_require__(3),_message_handler=__w_pdfjs_require__(14),_metadata=__w_pdfjs_require__(15),_optional_content_config=__w_pdfjs_require__(16),_transport_stream=__w_pdfjs_require__(17),_xfa_text=__w_pdfjs_require__(18);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory,createPDFNetworkStream;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:Q,NodeCMapReaderFactory:l,NodeStandardFontDataFactory:S}=__w_pdfjs_require__(19);exports.DefaultCanvasFactory=DefaultCanvasFactory=Q,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=l,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=S}function setPDFNetworkStreamFactory(Q){createPDFNetworkStream=Q}function getDocument(Q){const l=new PDFDocumentLoadingTask;let S;if("string"==typeof Q||Q instanceof URL)S={url:Q};else if((0,_util.isArrayBuffer)(Q))S={data:Q};else if(Q instanceof PDFDataRangeTransport)S={range:Q};else{if("object"!=typeof Q)throw new Error("Invalid parameter in getDocument, need either string, URL, Uint8Array, or parameter object.");if(!Q.url&&!Q.data&&!Q.range)throw new Error("Invalid parameter object: need either .data, .range or .url");S=Q}const i=Object.create(null);let P=null,T=null;for(const O in S){const A=S[O];switch(O){case"url":if(typeof window<"u")try{i[O]=new URL(A,window.location).href;continue}catch(_){(0,_util.warn)(`Cannot create valid URL: "${_}".`)}else if("string"==typeof A||A instanceof URL){i[O]=A.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":P=A;continue;case"worker":T=A;continue;case"data":if(_is_node.isNodeJS&&typeof Buffer<"u"&&A instanceof Buffer)i[O]=new Uint8Array(A);else{if(A instanceof Uint8Array)break;if("string"==typeof A)i[O]=(0,_util.stringToBytes)(A);else if("object"!=typeof A||null===A||isNaN(A.length)){if(!(0,_util.isArrayBuffer)(A))throw new Error("Invalid PDF binary data: either typed array, string, or array-like object is expected in the data property.");i[O]=new Uint8Array(A)}else i[O]=new Uint8Array(A)}continue}i[O]=A}if(i.CMapReaderFactory=i.CMapReaderFactory||DefaultCMapReaderFactory,i.StandardFontDataFactory=i.StandardFontDataFactory||DefaultStandardFontDataFactory,i.ignoreErrors=!0!==i.stopAtErrors,i.fontExtraProperties=!0===i.fontExtraProperties,i.pdfBug=!0===i.pdfBug,i.enableXfa=!0===i.enableXfa,(!Number.isInteger(i.rangeChunkSize)||i.rangeChunkSize<1)&&(i.rangeChunkSize=DEFAULT_RANGE_CHUNK_SIZE),("string"!=typeof i.docBaseUrl||(0,_display_utils.isDataScheme)(i.docBaseUrl))&&(i.docBaseUrl=null),(!Number.isInteger(i.maxImageSize)||i.maxImageSize<-1)&&(i.maxImageSize=-1),"string"!=typeof i.cMapUrl&&(i.cMapUrl=null),"string"!=typeof i.standardFontDataUrl&&(i.standardFontDataUrl=null),"boolean"!=typeof i.useWorkerFetch&&(i.useWorkerFetch=i.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&i.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory),"boolean"!=typeof i.isEvalSupported&&(i.isEvalSupported=!0),"boolean"!=typeof i.disableFontFace&&(i.disableFontFace=_is_node.isNodeJS),"boolean"!=typeof i.useSystemFonts&&(i.useSystemFonts=!_is_node.isNodeJS&&!i.disableFontFace),("object"!=typeof i.ownerDocument||null===i.ownerDocument)&&(i.ownerDocument=globalThis.document),"boolean"!=typeof i.disableRange&&(i.disableRange=!1),"boolean"!=typeof i.disableStream&&(i.disableStream=!1),"boolean"!=typeof i.disableAutoFetch&&(i.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(i.verbosity),!T){const O={verbosity:i.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};T=O.port?PDFWorker.fromPort(O):new PDFWorker(O),l._worker=T}const U=l.docId;return T.promise.then(function(){if(l.destroyed)throw new Error("Loading aborted");const O=_fetchDocument(T,i,P,U),A=new Promise(function(_){let R;P?R=new _transport_stream.PDFDataTransportStream({length:i.length,initialData:i.initialData,progressiveDone:i.progressiveDone,contentDispositionFilename:i.contentDispositionFilename,disableRange:i.disableRange,disableStream:i.disableStream},P):i.data||(R=createPDFNetworkStream({url:i.url,length:i.length,httpHeaders:i.httpHeaders,withCredentials:i.withCredentials,rangeChunkSize:i.rangeChunkSize,disableRange:i.disableRange,disableStream:i.disableStream})),_(R)});return Promise.all([O,A]).then(function([_,R]){if(l.destroyed)throw new Error("Loading aborted");const I=new _message_handler.MessageHandler(U,_,T.port),V=new WorkerTransport(I,l,R,i);l._transport=V,I.send("Ready",null)})}).catch(l._capability.reject),l}function _fetchDocument(Q,l,S,i){return _fetchDocument2.apply(this,arguments)}function _fetchDocument2(){return(_fetchDocument2=_asyncToGenerator(function*(Q,l,S,i){if(Q.destroyed)throw new Error("Worker was destroyed");S&&(l.length=S.length,l.initialData=S.initialData,l.progressiveDone=S.progressiveDone,l.contentDispositionFilename=S.contentDispositionFilename);const P=yield Q.messageHandler.sendWithPromise("GetDocRequest",{docId:i,apiVersion:"2.14.305",source:{data:l.data,url:l.url,password:l.password,disableAutoFetch:l.disableAutoFetch,rangeChunkSize:l.rangeChunkSize,length:l.length},maxImageSize:l.maxImageSize,disableFontFace:l.disableFontFace,docBaseUrl:l.docBaseUrl,ignoreErrors:l.ignoreErrors,isEvalSupported:l.isEvalSupported,fontExtraProperties:l.fontExtraProperties,enableXfa:l.enableXfa,useSystemFonts:l.useSystemFonts,cMapUrl:l.useWorkerFetch?l.cMapUrl:null,standardFontDataUrl:l.useWorkerFetch?l.standardFontDataUrl:null});if(Q.destroyed)throw new Error("Worker was destroyed");return P})).apply(this,arguments)}class PDFDocumentLoadingTask{constructor(){var l,S;this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId=`d${_docId._=(l=_docId._,S=l++,l),S}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}destroy(){var l=this;return _asyncToGenerator(function*(){l.destroyed=!0,yield l._transport?.destroy(),l._transport=null,l._worker&&(l._worker.destroy(),l._worker=null)})()}}var _docId={_:0};exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(l,S,i=!1,P=null){this.length=l,this.initialData=S,this.progressiveDone=i,this.contentDispositionFilename=P,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(l){this._rangeListeners.push(l)}addProgressListener(l){this._progressListeners.push(l)}addProgressiveReadListener(l){this._progressiveReadListeners.push(l)}addProgressiveDoneListener(l){this._progressiveDoneListeners.push(l)}onDataRange(l,S){for(const i of this._rangeListeners)i(l,S)}onDataProgress(l,S){this._readyCapability.promise.then(()=>{for(const i of this._progressListeners)i(l,S)})}onDataProgressiveRead(l){this._readyCapability.promise.then(()=>{for(const S of this._progressiveReadListeners)S(l)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const l of this._progressiveDoneListeners)l()})}transportReady(){this._readyCapability.resolve()}requestDataRange(l,S){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(l,S){var P,i=this;this._pdfInfo=l,this._transport=S,Object.defineProperty(this,"fingerprint",{get(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.fingerprint`, please use `PDFDocumentProxy.fingerprints` instead."),this.fingerprints[0]}}),Object.defineProperty(this,"getStats",{value:(P=_asyncToGenerator(function*(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.getStats`, please use the `PDFDocumentProxy.stats`-getter instead."),i.stats||{streamTypes:{},fontTypes:{}}}),function(){return P.apply(this,arguments)})})}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get stats(){return this._transport.stats}get isPureXfa(){return!!this._transport._htmlForXfa}get allXfaHtml(){return this._transport._htmlForXfa}getPage(l){return this._transport.getPage(l)}getPageIndex(l){return this._transport.getPageIndex(l)}getDestinations(){return this._transport.getDestinations()}getDestination(l){return this._transport.getDestination(l)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(l=!1){return this._transport.startCleanup(l||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}saveDocument(){return this._transport.annotationStorage.size<=0&&(0,_display_utils.deprecated)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this._transport.saveDocument()}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(l,S,i,P,T=!1){this._pageIndex=l,this._pageInfo=S,this._ownerDocument=P,this._transport=i,this._stats=T?new _display_utils.StatTimer:null,this._pdfBug=T,this.commonObjs=i.commonObjs,this.objs=new PDFObjects,this._bitmaps=new Set,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this._annotationPromises=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:l,rotation:S=this.rotate,offsetX:i=0,offsetY:P=0,dontFlip:T=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:l,rotation:S,offsetX:i,offsetY:P,dontFlip:T})}getAnnotations({intent:l="display"}={}){const S=this._transport.getRenderingIntent(l);let i=this._annotationPromises.get(S.cacheKey);return i||(i=this._transport.getAnnotations(this._pageIndex,S.renderingIntent),this._annotationPromises.set(S.cacheKey,i),i=i.then(P=>{for(const T of P)void 0!==T.titleObj&&Object.defineProperty(T,"title",{get:()=>((0,_display_utils.deprecated)("`title`-property on annotation, please use `titleObj` instead."),T.titleObj.str)}),void 0!==T.contentsObj&&Object.defineProperty(T,"contents",{get:()=>((0,_display_utils.deprecated)("`contents`-property on annotation, please use `contentsObj` instead."),T.contentsObj.str)});return P})),i}getJSActions(){return this._jsActionsPromise||=this._transport.getPageJSActions(this._pageIndex)}getXfa(){var l=this;return _asyncToGenerator(function*(){return l._transport._htmlForXfa?.children[l._pageIndex]||null})()}render({canvasContext:l,viewport:S,intent:i="display",annotationMode:P=_util.AnnotationMode.ENABLE,transform:T=null,imageLayer:U=null,canvasFactory:O=null,background:A=null,optionalContentConfigPromise:_=null,annotationCanvasMap:R=null,pageColors:I=null}){void 0!==arguments[0]?.renderInteractiveForms&&((0,_display_utils.deprecated)("render no longer accepts the `renderInteractiveForms`-option, please use the `annotationMode`-option instead."),!0===arguments[0].renderInteractiveForms&&P===_util.AnnotationMode.ENABLE&&(P=_util.AnnotationMode.ENABLE_FORMS)),void 0!==arguments[0]?.includeAnnotationStorage&&((0,_display_utils.deprecated)("render no longer accepts the `includeAnnotationStorage`-option, please use the `annotationMode`-option instead."),!0===arguments[0].includeAnnotationStorage&&P===_util.AnnotationMode.ENABLE&&(P=_util.AnnotationMode.ENABLE_STORAGE)),this._stats&&this._stats.time("Overall");const V=this._transport.getRenderingIntent(i,P);this.pendingCleanup=!1,_||(_=this._transport.getOptionalContentConfig());let D=this._intentStates.get(V.cacheKey);D||(D=Object.create(null),this._intentStates.set(V.cacheKey,D)),D.streamReaderCancelTimeout&&(clearTimeout(D.streamReaderCancelTimeout),D.streamReaderCancelTimeout=null);const W=O||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),s=!!(V.renderingIntent&_util.RenderingIntentFlag.PRINT);D.displayReadyCapability||(D.displayReadyCapability=(0,_util.createPromiseCapability)(),D.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(V));const M=L=>{D.renderTasks.delete(v),(this.cleanupAfterRender||s)&&(this.pendingCleanup=!0),this._tryCleanup(),L?(v.capability.reject(L),this._abortOperatorList({intentState:D,reason:L instanceof Error?L:new Error(L)})):v.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"))},v=new InternalRenderTask({callback:M,params:{canvasContext:l,viewport:S,transform:T,imageLayer:U,background:A},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:R,operatorList:D.operatorList,pageIndex:this._pageIndex,canvasFactory:W,useRequestAnimationFrame:!s,pdfBug:this._pdfBug,pageColors:I});(D.renderTasks||=new Set).add(v);const C=v.task;return Promise.all([D.displayReadyCapability.promise,_]).then(([L,x])=>{this.pendingCleanup?M():(this._stats&&this._stats.time("Rendering"),v.initializeGraphics({transparency:L,optionalContentConfig:x}),v.operatorListChanged())}).catch(M),C}getOperatorList({intent:l="display",annotationMode:S=_util.AnnotationMode.ENABLE}={}){const P=this._transport.getRenderingIntent(l,S,!0);let U,T=this._intentStates.get(P.cacheKey);return T||(T=Object.create(null),this._intentStates.set(P.cacheKey,T)),T.opListReadCapability||(U=Object.create(null),U.operatorListChanged=function i(){T.operatorList.lastChunk&&(T.opListReadCapability.resolve(T.operatorList),T.renderTasks.delete(U))},T.opListReadCapability=(0,_util.createPromiseCapability)(),(T.renderTasks||=new Set).add(U),T.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(P)),T.opListReadCapability.promise}streamTextContent({disableCombineTextItems:l=!1,includeMarkedContent:S=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:!0!==l,includeMarkedContent:!0===S},{highWaterMark:100,size:P=>P.items.length})}getTextContent(l={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>_xfa_text.XfaText.textContent(i));const S=this.streamTextContent(l);return new Promise(function(i,P){const U=S.getReader(),O={items:[],styles:Object.create(null)};!function T(){U.read().then(function({value:A,done:_}){_?i(O):(Object.assign(O.styles,A.styles),O.items.push(...A.items),T())},P)}()})}getStructTree(){return this._structTreePromise||=this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const l=[];for(const S of this._intentStates.values())if(this._abortOperatorList({intentState:S,reason:new Error("Page was destroyed."),force:!0}),!S.opListReadCapability)for(const i of S.renderTasks)l.push(i.completed),i.cancel();this.objs.clear();for(const S of this._bitmaps)S.close();return this._bitmaps.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(l)}cleanup(l=!1){return this.pendingCleanup=!0,this._tryCleanup(l)}_tryCleanup(l=!1){if(!this.pendingCleanup)return!1;for(const{renderTasks:S,operatorList:i}of this._intentStates.values())if(S.size>0||!i.lastChunk)return!1;this._intentStates.clear(),this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,l&&this._stats&&(this._stats=new _display_utils.StatTimer);for(const S of this._bitmaps)S.close();return this._bitmaps.clear(),this.pendingCleanup=!1,!0}_startRenderPage(l,S){const i=this._intentStates.get(S);i&&(this._stats&&this._stats.timeEnd("Page Request"),i.displayReadyCapability&&i.displayReadyCapability.resolve(l))}_renderPageChunk(l,S){for(let i=0,P=l.length;i<P;i++)S.operatorList.fnArray.push(l.fnArray[i]),S.operatorList.argsArray.push(l.argsArray[i]);S.operatorList.lastChunk=l.lastChunk;for(const i of S.renderTasks)i.operatorListChanged();l.lastChunk&&this._tryCleanup()}_pumpOperatorList({renderingIntent:l,cacheKey:S}){const P=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:l,cacheKey:S,annotationStorage:l&_util.RenderingIntentFlag.ANNOTATIONS_STORAGE?this._transport.annotationStorage.serializable:null}).getReader(),T=this._intentStates.get(S);T.streamReader=P;const U=()=>{P.read().then(({value:O,done:A})=>{A?T.streamReader=null:this._transport.destroyed||(this._renderPageChunk(O,T),U())},O=>{if(T.streamReader=null,!this._transport.destroyed){if(T.operatorList){T.operatorList.lastChunk=!0;for(const A of T.renderTasks)A.operatorListChanged();this._tryCleanup()}if(T.displayReadyCapability)T.displayReadyCapability.reject(O);else{if(!T.opListReadCapability)throw O;T.opListReadCapability.reject(O)}}})};U()}_abortOperatorList({intentState:l,reason:S,force:i=!1}){if(l.streamReader){if(!i){if(l.renderTasks.size>0)return;if(S instanceof _display_utils.RenderingCancelledException)return void(l.streamReaderCancelTimeout=setTimeout(()=>{this._abortOperatorList({intentState:l,reason:S,force:!0}),l.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT))}if(l.streamReader.cancel(new _util.AbortException(S.message)).catch(()=>{}),l.streamReader=null,!this._transport.destroyed){for(const[P,T]of this._intentStates)if(T===l){this._intentStates.delete(P);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){this._listeners=[],this._deferred=Promise.resolve()}postMessage(l,S){const i={data:structuredClone(l,S)};this._deferred.then(()=>{for(const P of this._listeners)P.call(this,i)})}addEventListener(l,S){this._listeners.push(S)}removeEventListener(l,S){const i=this._listeners.indexOf(S);this._listeners.splice(i,1)}terminate(){this._listeners.length=0}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};if(exports.PDFWorkerUtil=PDFWorkerUtil,_is_node.isNodeJS)PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if("object"==typeof document){const Q=document?.currentScript?.src;Q&&(PDFWorkerUtil.fallbackWorkerSrc=Q.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(Q,l){let S;try{if(S=new URL(Q),!S.origin||"null"===S.origin)return!1}catch{return!1}const i=new URL(l,S);return S.origin===i.origin},PDFWorkerUtil.createCDNWrapper=function(Q){return URL.createObjectURL(new Blob([`importScripts("${Q}");`]))};class PDFWorker{constructor({name:Q=null,port:l=null,verbosity:S=(0,_util.getVerbosityLevel)()}={}){if(l&&_workerPorts._.has(l))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=Q,this.destroyed=!1,this.verbosity=S,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,l)return _workerPorts._.set(l,this),void this._initializeFromPort(l);this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(Q){this._port=Q,this._messageHandler=new _message_handler.MessageHandler("main","worker",Q),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve()}_initialize(){if(typeof Worker<"u"&&!PDFWorkerUtil.isWorkerDisabled&&!PDFWorker._mainThreadWorkerMessageHandler){let Q=PDFWorker.workerSrc;try{PDFWorkerUtil.isSameOrigin(window.location.href,Q)||(Q=PDFWorkerUtil.createCDNWrapper(new URL(Q,window.location).href));const l=new Worker(Q),S=new _message_handler.MessageHandler("main","worker",l),i=()=>{l.removeEventListener("error",P),S.destroy(),l.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},P=()=>{this._webWorker||i()};l.addEventListener("error",P),S.on("test",U=>{l.removeEventListener("error",P),this.destroyed?i():U?(this._messageHandler=S,this._port=l,this._webWorker=l,this._readyCapability.resolve(),S.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),S.destroy(),l.terminate())}),S.on("ready",U=>{if(l.removeEventListener("error",P),this.destroyed)i();else try{T()}catch{this._setupFakeWorker()}});const T=()=>{const U=new Uint8Array;S.send("test",U,[U.buffer])};return void T()}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),PDFWorker._setupFakeWorkerGlobal.then(Q=>{if(this.destroyed)return void this._readyCapability.reject(new Error("Worker was destroyed"));const l=new LoopbackPort;this._port=l;const S="fake"+PDFWorkerUtil.fakeWorkerId++,i=new _message_handler.MessageHandler(S+"_worker",S,l);Q.setup(i,l);const P=new _message_handler.MessageHandler(S,S+"_worker",l);this._messageHandler=P,this._readyCapability.resolve(),P.send("configure",{verbosity:this.verbosity})}).catch(Q=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${Q.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),_workerPorts._.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(Q){if(!Q?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return _assertClassBrand(PDFWorker,this,_workerPorts)._.has(Q.port)?_assertClassBrand(PDFWorker,this,_workerPorts)._.get(Q.port):new PDFWorker(Q)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(null!==PDFWorkerUtil.fallbackWorkerSrc)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){var _this4=this;const loader=function(){var _ref2=_asyncToGenerator(function*(){const mainWorkerMessageHandler=_this4._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS){const worker=eval("require")(_this4.workerSrc);return worker.WorkerMessageHandler}return yield(0,_display_utils.loadScript)(_this4.workerSrc),window.pdfjsWorker.WorkerMessageHandler});return function Q(){return _ref2.apply(this,arguments)}}();return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}var _workerPorts={_:new WeakMap};exports.PDFWorker=PDFWorker,PDFWorker.getWorkerSrc=function(){return(0,_display_utils.deprecated)("`PDFWorker.getWorkerSrc()`, please use `PDFWorker.workerSrc` instead."),this.workerSrc};var _docStats=new WeakMap,_pageCache=new WeakMap,_pagePromises=new WeakMap,_metadataPromise=new WeakMap;class WorkerTransport{constructor(l,S,i,P){_classPrivateFieldInitSpec(this,_docStats,null),_classPrivateFieldInitSpec(this,_pageCache,new Map),_classPrivateFieldInitSpec(this,_pagePromises,new Map),_classPrivateFieldInitSpec(this,_metadataPromise,null),this.messageHandler=l,this.loadingTask=S,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:S.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:P.ownerDocument,styleElement:P.styleElement}),this._params=P,P.useWorkerFetch||(this.CMapReaderFactory=new P.CMapReaderFactory({baseUrl:P.cMapUrl,isCompressed:P.cMapPacked}),this.StandardFontDataFactory=new P.StandardFontDataFactory({baseUrl:P.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}get stats(){return _classPrivateFieldGet(_docStats,this)}getRenderingIntent(l,S=_util.AnnotationMode.ENABLE,i=!1){let P=_util.RenderingIntentFlag.DISPLAY,T="";switch(l){case"any":P=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":P=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${l}`)}switch(S){case _util.AnnotationMode.DISABLE:P+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:P+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:P+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,T=this.annotationStorage.hash;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${S}`)}return i&&(P+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:P,cacheKey:`${P}_${T}`}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const l=[];for(const i of _classPrivateFieldGet(_pageCache,this).values())l.push(i._destroy());_classPrivateFieldGet(_pageCache,this).clear(),_classPrivateFieldGet(_pagePromises,this).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const S=this.messageHandler.sendWithPromise("Terminate",null);return l.push(S),Promise.all(l).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),_classPrivateFieldSet(_metadataPromise,this,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null,this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:l,loadingTask:S}=this;l.on("GetReader",(i,P)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=T=>{this._lastProgress={loaded:T.loaded,total:T.total}},P.onPull=()=>{this._fullReader.read().then(function({value:T,done:U}){U?P.close():((0,_util.assert)((0,_util.isArrayBuffer)(T),"GetReader - expected an ArrayBuffer."),P.enqueue(new Uint8Array(T),1,[T]))}).catch(T=>{P.error(T)})},P.onCancel=T=>{this._fullReader.cancel(T),P.ready.catch(U=>{if(!this.destroyed)throw U})}}),l.on("ReaderHeadersReady",i=>{const P=(0,_util.createPromiseCapability)(),T=this._fullReader;return T.headersReady.then(()=>{(!T.isStreamingSupported||!T.isRangeSupported)&&(this._lastProgress&&S.onProgress?.(this._lastProgress),T.onProgress=U=>{S.onProgress?.({loaded:U.loaded,total:U.total})}),P.resolve({isStreamingSupported:T.isStreamingSupported,isRangeSupported:T.isRangeSupported,contentLength:T.contentLength})},P.reject),P.promise}),l.on("GetRangeReader",(i,P)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const T=this._networkStream.getRangeReader(i.begin,i.end);T?(P.onPull=()=>{T.read().then(function({value:U,done:O}){O?P.close():((0,_util.assert)((0,_util.isArrayBuffer)(U),"GetRangeReader - expected an ArrayBuffer."),P.enqueue(new Uint8Array(U),1,[U]))}).catch(U=>{P.error(U)})},P.onCancel=U=>{T.cancel(U),P.ready.catch(O=>{if(!this.destroyed)throw O})}):P.close()}),l.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,S._capability.resolve(new PDFDocumentProxy(i,this))}),l.on("DocException",function(i){let P;switch(i.name){case"PasswordException":P=new _util.PasswordException(i.message,i.code);break;case"InvalidPDFException":P=new _util.InvalidPDFException(i.message);break;case"MissingPDFException":P=new _util.MissingPDFException(i.message);break;case"UnexpectedResponseException":P=new _util.UnexpectedResponseException(i.message,i.status);break;case"UnknownErrorException":P=new _util.UnknownErrorException(i.message,i.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}S._capability.reject(P)}),l.on("PasswordRequest",i=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),S.onPassword){const P=T=>{T instanceof Error?this._passwordCapability.reject(T):this._passwordCapability.resolve({password:T})};try{S.onPassword(P,i.code)}catch(T){this._passwordCapability.reject(T)}}else this._passwordCapability.reject(new _util.PasswordException(i.message,i.code));return this._passwordCapability.promise}),l.on("DataLoaded",i=>{S.onProgress?.({loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),l.on("StartRenderPage",i=>{this.destroyed||_classPrivateFieldGet(_pageCache,this).get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),l.on("commonobj",([i,P,T])=>{if(!this.destroyed&&!this.commonObjs.has(i))switch(P){case"Font":const U=this._params;if("error"in T){const _=T.error;(0,_util.warn)(`Error during font loading: ${_}`),this.commonObjs.resolve(i,_);break}let O=null;U.pdfBug&&globalThis.FontInspector?.enabled&&(O={registerFont(_,R){globalThis.FontInspector.fontAdded(_,R)}});const A=new _font_loader.FontFaceObject(T,{isEvalSupported:U.isEvalSupported,disableFontFace:U.disableFontFace,ignoreErrors:U.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:O});this.fontLoader.bind(A).catch(_=>l.sendWithPromise("FontFallback",{id:i})).finally(()=>{!U.fontExtraProperties&&A.data&&(A.data=null),this.commonObjs.resolve(i,A)});break;case"FontPath":case"Image":this.commonObjs.resolve(i,T);break;default:throw new Error(`Got unknown common object type ${P}`)}}),l.on("obj",([i,P,T,U])=>{if(this.destroyed)return;const O=_classPrivateFieldGet(_pageCache,this).get(P);if(!O.objs.has(i))switch(T){case"Image":O.objs.resolve(i,U);const A=8e6;if(U){let _;if(U.bitmap){const{bitmap:R,width:I,height:V}=U;_=I*V*4,O._bitmaps.add(R)}else _=U.data?.length||0;_>A&&(O.cleanupAfterRender=!0)}break;case"Pattern":O.objs.resolve(i,U);break;default:throw new Error(`Got unknown object type ${T}`)}}),l.on("DocProgress",i=>{this.destroyed||S.onProgress?.({loaded:i.loaded,total:i.total})}),l.on("DocStats",i=>{this.destroyed||_classPrivateFieldSet(_docStats,this,Object.freeze({streamTypes:Object.freeze(i.streamTypes),fontTypes:Object.freeze(i.fontTypes)}))}),l.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),l.on("FetchBuiltInCMap",i=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.CMapReaderFactory?this.CMapReaderFactory.fetch(i):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),l.on("FetchStandardFontData",i=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.StandardFontDataFactory?this.StandardFontDataFactory.fetch(i):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}_onUnsupportedFeature({featureId:l}){this.destroyed||this.loadingTask.onUnsupportedFeature?.(l)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(l){if(!Number.isInteger(l)||l<=0||l>this._numPages)return Promise.reject(new Error("Invalid page request."));const S=l-1,i=_classPrivateFieldGet(_pagePromises,this).get(S);if(i)return i;const P=this.messageHandler.sendWithPromise("GetPage",{pageIndex:S}).then(T=>{if(this.destroyed)throw new Error("Transport destroyed");const U=new PDFPageProxy(S,T,this,this._params.ownerDocument,this._params.pdfBug);return _classPrivateFieldGet(_pageCache,this).set(S,U),U});return _classPrivateFieldGet(_pagePromises,this).set(S,P),P}getPageIndex(l){return"object"!=typeof l||null===l||!Number.isInteger(l.num)||l.num<0||!Number.isInteger(l.gen)||l.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:l.num,gen:l.gen})}getAnnotations(l,S){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:l,intent:S})}saveDocument(){return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:this._fullReader?.filename??null}).finally(()=>{this.annotationStorage.resetModified()})}getFieldObjects(){return this._getFieldObjectsPromise||=this.messageHandler.sendWithPromise("GetFieldObjects",null)}hasJSActions(){return this._hasJSActionsPromise||=this.messageHandler.sendWithPromise("HasJSActions",null)}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(l){return"string"!=typeof l?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:l})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(l){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:l})}getStructTree(l){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:l})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(l=>new _optional_content_config.OptionalContentConfig(l))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return _classPrivateFieldGet(_metadataPromise,this)||_classPrivateFieldSet(_metadataPromise,this,this.messageHandler.sendWithPromise("GetMetadata",null).then(l=>({info:l[0],metadata:l[1]?new _metadata.Metadata(l[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null})))}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}startCleanup(l=!1){var S=this;return _asyncToGenerator(function*(){if(yield S.messageHandler.sendWithPromise("Cleanup",null),!S.destroyed){for(const i of _classPrivateFieldGet(_pageCache,S).values())if(!i.cleanup())throw new Error(`startCleanup: Page ${i.pageNumber} is currently rendering.`);S.commonObjs.clear(),l||S.fontLoader.clear(),_classPrivateFieldSet(_metadataPromise,S,null),S._getFieldObjectsPromise=null,S._hasJSActionsPromise=null}})()}get loadingParams(){const l=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:l.disableAutoFetch,enableXfa:l.enableXfa})}}var _objs=new WeakMap,_PDFObjects_brand=new WeakSet;class PDFObjects{constructor(){_classPrivateMethodInitSpec(this,_PDFObjects_brand),_classPrivateFieldInitSpec(this,_objs,Object.create(null))}get(l,S=null){if(S){const P=_assertClassBrand(_PDFObjects_brand,this,_ensureObj).call(this,l);return P.capability.promise.then(()=>S(P.data)),null}const i=_classPrivateFieldGet(_objs,this)[l];if(!i?.capability.settled)throw new Error(`Requesting object that isn't resolved yet ${l}.`);return i.data}has(l){return _classPrivateFieldGet(_objs,this)[l]?.capability.settled||!1}resolve(l,S=null){const i=_assertClassBrand(_PDFObjects_brand,this,_ensureObj).call(this,l);i.data=S,i.capability.resolve()}clear(){_classPrivateFieldSet(_objs,this,Object.create(null))}}function _ensureObj(Q){return _classPrivateFieldGet(_objs,this)[Q]||(_classPrivateFieldGet(_objs,this)[Q]={capability:(0,_util.createPromiseCapability)(),data:null})}class RenderTask{constructor(l){this._internalRenderTask=l,this.onContinue=null}get promise(){return this._internalRenderTask.capability.promise}cancel(){this._internalRenderTask.cancel()}}exports.RenderTask=RenderTask;class InternalRenderTask{constructor({callback:l,params:S,objs:i,commonObjs:P,annotationCanvasMap:T,operatorList:U,pageIndex:O,canvasFactory:A,useRequestAnimationFrame:_=!1,pdfBug:R=!1,pageColors:I=null}){this.callback=l,this.params=S,this.objs=i,this.commonObjs=P,this.annotationCanvasMap=T,this.operatorListIdx=null,this.operatorList=U,this._pageIndex=O,this.canvasFactory=A,this._pdfBug=R,this.pageColors=I,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===_&&typeof window<"u",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=S.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:l=!1,optionalContentConfig:S}){if(this.cancelled)return;if(this._canvas){if(_canvasInUse._.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");_canvasInUse._.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:i,viewport:P,transform:T,imageLayer:U,background:O}=this.params;this.gfx=new _canvas.CanvasGraphics(i,this.commonObjs,this.objs,this.canvasFactory,U,S,this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:T,viewport:P,transparency:l,background:O}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}cancel(l=null){this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&_canvasInUse._.delete(this._canvas),this.callback(l||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){this.graphicsReady?(this.stepper&&this.stepper.updateOperatorList(this.operatorList),!this.running&&this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}_next(){var l=this;return _asyncToGenerator(function*(){l.cancelled||(l.operatorListIdx=l.gfx.executeOperatorList(l.operatorList,l.operatorListIdx,l._continueBound,l.stepper),l.operatorListIdx===l.operatorList.argsArray.length&&(l.running=!1,l.operatorList.lastChunk&&(l.gfx.endDrawing(),l._canvas&&_canvasInUse._.delete(l._canvas),l.callback())))})()}}var _canvasInUse={_:new WeakSet};const version="2.14.305";exports.version=version;const build="eaaa8b4ad";exports.build=build},(Q,l,S)=>{var i;Object.defineProperty(l,"__esModule",{value:!0}),l.StatTimer=l.RenderingCancelledException=l.PixelsPerInch=l.PageViewport=l.PDFDateString=l.DOMStandardFontDataFactory=l.DOMSVGFactory=l.DOMCanvasFactory=l.DOMCMapReaderFactory=void 0,l.deprecated=function u(m){console.log("Deprecated API usage: "+m)},l.getFilenameFromUrl=function C(m){const d=m.indexOf("#"),w=m.indexOf("?"),F=Math.min(d>0?d:m.length,w>0?w:m.length);return m.substring(m.lastIndexOf("/",F)+1,F)},l.getPdfFilenameFromUrl=function L(m,d="document.pdf"){if("string"!=typeof m)return d;if(M(m))return(0,T.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),d;const F=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,B=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(m);let z=F.exec(B[1])||F.exec(B[2])||F.exec(B[3]);if(z&&(z=z[0],z.includes("%")))try{z=F.exec(decodeURIComponent(z))[0]}catch{}return z||d},l.getXfaPageViewport=function b(m,{scale:d=1,rotation:w=0}){const{width:F,height:B}=m.attributes.style,z=[0,0,parseInt(F),parseInt(B)];return new W({viewBox:z,scale:d,rotation:w})},l.isDataScheme=M,l.isPdfFile=function v(m){return"string"==typeof m&&/\.pdf$/i.test(m)},l.isValidFetchUrl=n,l.loadScript=function t(m,d=!1){return new Promise((w,F)=>{const B=document.createElement("script");B.src=m,B.onload=function(z){d&&B.remove(),w(z)},B.onerror=function(){F(new Error(`Cannot load script at: ${B.src}`))},(document.head||document.documentElement).appendChild(B)})};var P=S(6),T=S(1);class O{}function _(m){return R.apply(this,arguments)}function R(){return(R=_asyncToGenerator(function*(m,d=!1){if(n(m,document.baseURI)){const w=yield fetch(m);if(!w.ok)throw new Error(w.statusText);return d?new Uint8Array(yield w.arrayBuffer()):(0,T.stringToBytes)(yield w.text())}return new Promise((w,F)=>{const B=new XMLHttpRequest;B.open("GET",m,!0),d&&(B.responseType="arraybuffer"),B.onreadystatechange=()=>{if(B.readyState===XMLHttpRequest.DONE){if(200===B.status||0===B.status){let z;if(d&&B.response?z=new Uint8Array(B.response):!d&&B.responseText&&(z=(0,T.stringToBytes)(B.responseText)),z)return void w(z)}F(new Error(B.statusText))}},B.send(null)})})).apply(this,arguments)}i=O,_defineProperty(O,"CSS",96),_defineProperty(O,"PDF",72),_defineProperty(O,"PDF_TO_CSS_UNITS",i.CSS/i.PDF),l.PixelsPerInch=O,l.DOMCanvasFactory=class A extends P.BaseCanvasFactory{constructor({ownerDocument:d=globalThis.document}={}){super(),this._document=d}_createCanvas(d,w){const F=this._document.createElement("canvas");return F.width=d,F.height=w,F}},l.DOMCMapReaderFactory=class I extends P.BaseCMapReaderFactory{_fetchData(d,w){return _(d,this.isCompressed).then(F=>({cMapData:F,compressionType:w}))}},l.DOMStandardFontDataFactory=class V extends P.BaseStandardFontDataFactory{_fetchData(d){return _(d,!0)}},l.DOMSVGFactory=class D extends P.BaseSVGFactory{_createSVG(d){return document.createElementNS("http://www.w3.org/2000/svg",d)}};class W{constructor({viewBox:d,scale:w,rotation:F,offsetX:B=0,offsetY:z=0,dontFlip:J=!1}){this.viewBox=d,this.scale=w,this.rotation=F,this.offsetX=B,this.offsetY=z;const X=(d[2]+d[0])/2,oe=(d[3]+d[1])/2;let de,he,N,o,e,r,a,g;switch((F%=360)<0&&(F+=360),F){case 180:de=-1,he=0,N=0,o=1;break;case 90:de=0,he=1,N=1,o=0;break;case 270:de=0,he=-1,N=-1,o=0;break;case 0:de=1,he=0,N=0,o=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}J&&(N=-N,o=-o),0===de?(e=Math.abs(oe-d[1])*w+B,r=Math.abs(X-d[0])*w+z,a=Math.abs(d[3]-d[1])*w,g=Math.abs(d[2]-d[0])*w):(e=Math.abs(X-d[0])*w+B,r=Math.abs(oe-d[1])*w+z,a=Math.abs(d[2]-d[0])*w,g=Math.abs(d[3]-d[1])*w),this.transform=[de*w,he*w,N*w,o*w,e-de*w*X-N*w*oe,r-he*w*X-o*w*oe],this.width=a,this.height=g}clone({scale:d=this.scale,rotation:w=this.rotation,offsetX:F=this.offsetX,offsetY:B=this.offsetY,dontFlip:z=!1}={}){return new W({viewBox:this.viewBox.slice(),scale:d,rotation:w,offsetX:F,offsetY:B,dontFlip:z})}convertToViewportPoint(d,w){return T.Util.applyTransform([d,w],this.transform)}convertToViewportRectangle(d){const w=T.Util.applyTransform([d[0],d[1]],this.transform),F=T.Util.applyTransform([d[2],d[3]],this.transform);return[w[0],w[1],F[0],F[1]]}convertToPdfPoint(d,w){return T.Util.applyInverseTransform([d,w],this.transform)}}function M(m){const d=m.length;let w=0;for(;w<d&&""===m[w].trim();)w++;return"data:"===m.substring(w,w+5).toLowerCase()}function n(m,d){try{const{protocol:w}=d?new URL(m,d):new URL(m);return"http:"===w||"https:"===w}catch{return!1}}let p;l.PageViewport=W,l.RenderingCancelledException=class s extends T.BaseException{constructor(d,w){super(d,"RenderingCancelledException"),this.type=w}},l.StatTimer=class x{constructor(){this.started=Object.create(null),this.times=[]}time(d){d in this.started&&(0,T.warn)(`Timer is already running for ${d}`),this.started[d]=Date.now()}timeEnd(d){d in this.started||(0,T.warn)(`Timer has not been started for ${d}`),this.times.push({name:d,start:this.started[d],end:Date.now()}),delete this.started[d]}toString(){const d=[];let w=0;for(const F of this.times){const B=F.name;B.length>w&&(w=B.length)}for(const F of this.times){const B=F.end-F.start;d.push(`${F.name.padEnd(w)} ${B}ms\n`)}return d.join("")}},l.PDFDateString=class c{static toDateObject(d){if(!d||"string"!=typeof d)return null;p||(p=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const w=p.exec(d);if(!w)return null;const F=parseInt(w[1],10);let B=parseInt(w[2],10);B=B>=1&&B<=12?B-1:0;let z=parseInt(w[3],10);z=z>=1&&z<=31?z:1;let J=parseInt(w[4],10);J=J>=0&&J<=23?J:0;let X=parseInt(w[5],10);X=X>=0&&X<=59?X:0;let oe=parseInt(w[6],10);oe=oe>=0&&oe<=59?oe:0;const de=w[7]||"Z";let he=parseInt(w[8],10);he=he>=0&&he<=23?he:0;let N=parseInt(w[9],10)||0;return N=N>=0&&N<=59?N:0,"-"===de?(J+=he,X+=N):"+"===de&&(J-=he,X-=N),new Date(Date.UTC(F,B,z,J,X,oe))}}},(Q,l,S)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.BaseStandardFontDataFactory=l.BaseSVGFactory=l.BaseCanvasFactory=l.BaseCMapReaderFactory=void 0;var i=S(1);class P{constructor(){this.constructor===P&&(0,i.unreachable)("Cannot initialize BaseCanvasFactory.")}create(_,R){if(_<=0||R<=0)throw new Error("Invalid canvas size");const I=this._createCanvas(_,R);return{canvas:I,context:I.getContext("2d")}}reset(_,R,I){if(!_.canvas)throw new Error("Canvas is not specified");if(R<=0||I<=0)throw new Error("Invalid canvas size");_.canvas.width=R,_.canvas.height=I}destroy(_){if(!_.canvas)throw new Error("Canvas is not specified");_.canvas.width=0,_.canvas.height=0,_.canvas=null,_.context=null}_createCanvas(_,R){(0,i.unreachable)("Abstract method `_createCanvas` called.")}}l.BaseCanvasFactory=P;class T{constructor({baseUrl:_=null,isCompressed:R=!1}){this.constructor===T&&(0,i.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=_,this.isCompressed=R}fetch({name:_}){var R=this;return _asyncToGenerator(function*(){if(!R.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!_)throw new Error("CMap name must be specified.");const I=R.baseUrl+_+(R.isCompressed?".bcmap":"");return R._fetchData(I,R.isCompressed?i.CMapCompressionType.BINARY:i.CMapCompressionType.NONE).catch(D=>{throw new Error(`Unable to load ${R.isCompressed?"binary ":""}CMap at: ${I}`)})})()}_fetchData(_,R){(0,i.unreachable)("Abstract method `_fetchData` called.")}}l.BaseCMapReaderFactory=T;class U{constructor({baseUrl:_=null}){this.constructor===U&&(0,i.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=_}fetch({filename:_}){var R=this;return _asyncToGenerator(function*(){if(!R.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!_)throw new Error("Font filename must be specified.");const I=`${R.baseUrl}${_}`;return R._fetchData(I).catch(V=>{throw new Error(`Unable to load font data at: ${I}`)})})()}_fetchData(_){(0,i.unreachable)("Abstract method `_fetchData` called.")}}l.BaseStandardFontDataFactory=U;class O{constructor(){this.constructor===O&&(0,i.unreachable)("Cannot initialize BaseSVGFactory.")}create(_,R){if(_<=0||R<=0)throw new Error("Invalid SVG dimensions");const I=this._createSVG("svg:svg");return I.setAttribute("version","1.1"),I.setAttribute("width",`${_}px`),I.setAttribute("height",`${R}px`),I.setAttribute("preserveAspectRatio","none"),I.setAttribute("viewBox",`0 0 ${_} ${R}`),I}createElement(_){if("string"!=typeof _)throw new Error("Invalid SVG element type");return this._createSVG(_)}_createSVG(_){(0,i.unreachable)("Abstract method `_createSVG` called.")}}l.BaseSVGFactory=O},(Q,l,S)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.FontLoader=l.FontFaceObject=void 0;var i=S(1);class P{constructor({docId:A,onUnsupportedFeature:_,ownerDocument:R=globalThis.document,styleElement:I=null}){this.constructor===P&&(0,i.unreachable)("Cannot initialize BaseFontLoader."),this.docId=A,this._onUnsupportedFeature=_,this._document=R,this.nativeFontFaces=[],this.styleElement=null}addNativeFontFace(A){this.nativeFontFaces.push(A),this._document.fonts.add(A)}insertRule(A){let _=this.styleElement;_||(_=this.styleElement=this._document.createElement("style"),_.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`,this._document.documentElement.getElementsByTagName("head")[0].appendChild(_));const R=_.sheet;R.insertRule(A,R.cssRules.length)}clear(){for(const A of this.nativeFontFaces)this._document.fonts.delete(A);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}bind(A){var _=this;return _asyncToGenerator(function*(){if(A.attached||A.missingFile)return;if(A.attached=!0,_.isFontLoadingAPISupported){const I=A.createNativeFontFace();if(I){_.addNativeFontFace(I);try{yield I.loaded}catch(V){throw _._onUnsupportedFeature({featureId:i.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,i.warn)(`Failed to load font '${I.family}': '${V}'.`),A.disableFontFace=!0,V}}return}const R=A.createFontFaceRule();if(R){if(_.insertRule(R),_.isSyncFontLoadingSupported)return;yield new Promise(I=>{const V=_._queueLoadingCallback(I);_._prepareFontLoadEvent([R],[A],V)})}})()}_queueLoadingCallback(A){(0,i.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){return(0,i.shadow)(this,"isFontLoadingAPISupported",!!this._document?.fonts)}get isSyncFontLoadingSupported(){(0,i.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,i.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(A,_,R){(0,i.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}let T;l.FontLoader=T,l.FontLoader=T=class extends P{constructor(A){super(A),this.loadingContext={requests:[],nextRequestId:0},this.loadTestFontId=0}get isSyncFontLoadingSupported(){let A=!1;return(typeof navigator>"u"||/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent)?.[1]>=14)&&(A=!0),(0,i.shadow)(this,"isSyncFontLoadingSupported",A)}_queueLoadingCallback(A){const R=this.loadingContext,I={id:"pdfjs-font-loading-"+R.nextRequestId++,done:!1,complete:function _(){for((0,i.assert)(!I.done,"completeRequest() cannot be called twice."),I.done=!0;R.requests.length>0&&R.requests[0].done;){const V=R.requests.shift();setTimeout(V.callback,0)}},callback:A};return R.requests.push(I),I}get _loadTestFont(){return(0,i.shadow)(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}_prepareFontLoadEvent(A,_,R){function I(w,F){return w.charCodeAt(F)<<24|w.charCodeAt(F+1)<<16|w.charCodeAt(F+2)<<8|255&w.charCodeAt(F+3)}function V(w,F,B,z){return w.substring(0,F)+z+w.substring(F+B)}let D,W;const s=this._document.createElement("canvas");s.width=1,s.height=1;const M=s.getContext("2d");let v=0;const L=`lt${Date.now()}${this.loadTestFontId++}`;let x=this._loadTestFont;x=V(x,976,L.length,L);const u=1482184792;let p=I(x,16);for(D=0,W=L.length-3;D<W;D+=4)p=p-u+I(L,D)|0;D<L.length&&(p=p-u+I(L+"XXX",D)|0),x=V(x,16,4,(0,i.string32)(p));const c=`url(data:font/opentype;base64,${btoa(x)});`;this.insertRule(`@font-face {font-family:"${L}";src:${c}}`);const m=[];for(const w of _)m.push(w.loadedName);m.push(L);const d=this._document.createElement("div");d.style.visibility="hidden",d.style.width=d.style.height="10px",d.style.position="absolute",d.style.top=d.style.left="0px";for(const w of m){const F=this._document.createElement("span");F.textContent="Hi",F.style.fontFamily=w,d.appendChild(F)}this._document.body.appendChild(d),function C(w,F){if(v++,v>30)return(0,i.warn)("Load test font never loaded."),void F();M.font="30px "+w,M.fillText(".",0,20),M.getImageData(0,0,1,1).data[3]>0?F():setTimeout(C.bind(null,w,F))}(L,()=>{d.remove(),R.complete()})}},l.FontFaceObject=class U{constructor(A,{isEvalSupported:_=!0,disableFontFace:R=!1,ignoreErrors:I=!1,onUnsupportedFeature:V,fontRegistry:D=null}){this.compiledGlyphs=Object.create(null);for(const W in A)this[W]=A[W];this.isEvalSupported=!1!==_,this.disableFontFace=!0===R,this.ignoreErrors=!0===I,this._onUnsupportedFeature=V,this.fontRegistry=D}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let A;if(this.cssFontInfo){const _={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(_.style=`oblique ${this.cssFontInfo.italicAngle}deg`),A=new FontFace(this.cssFontInfo.fontFamily,this.data,_)}else A=new FontFace(this.loadedName,this.data,{});return this.fontRegistry&&this.fontRegistry.registerFont(this),A}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const A=(0,i.bytesToString)(this.data),_=`url(data:${this.mimetype};base64,${btoa(A)});`;let R;if(this.cssFontInfo){let I=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(I+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),R=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${I}src:${_}}`}else R=`@font-face {font-family:"${this.loadedName}";src:${_}}`;return this.fontRegistry&&this.fontRegistry.registerFont(this,_),R}getPathGenerator(A,_){if(void 0!==this.compiledGlyphs[_])return this.compiledGlyphs[_];let R;try{R=A.get(this.loadedName+"_path_"+_)}catch(I){if(!this.ignoreErrors)throw I;return this._onUnsupportedFeature({featureId:i.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,i.warn)(`getPathGenerator - ignoring character: "${I}".`),this.compiledGlyphs[_]=function(V,D){}}if(this.isEvalSupported&&i.FeatureTest.isEvalSupported){const I=[];for(const V of R){const D=void 0!==V.args?V.args.join(","):"";I.push("c.",V.cmd,"(",D,");\n")}return this.compiledGlyphs[_]=new Function("c","size",I.join(""))}return this.compiledGlyphs[_]=function(I,V){for(const D of R)"scale"===D.cmd&&(D.args=[V,-V]),I[D.cmd].apply(I,D.args)}}}},(Q,l,S)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.AnnotationStorage=void 0;var i=S(9),P=S(1);l.AnnotationStorage=class T{constructor(){this._storage=new Map,this._modified=!1,this.onSetModified=null,this.onResetModified=null}getValue(O,A){const _=this._storage.get(O);return void 0===_?A:Object.assign(A,_)}getRawValue(O){return this._storage.get(O)}setValue(O,A){const _=this._storage.get(O);let R=!1;if(void 0!==_)for(const[I,V]of Object.entries(A))_[I]!==V&&(R=!0,_[I]=V);else R=!0,this._storage.set(O,A);R&&this._setModified()}getAll(){return this._storage.size>0?(0,P.objectFromMap)(this._storage):null}get size(){return this._storage.size}_setModified(){this._modified||(this._modified=!0,"function"==typeof this.onSetModified&&this.onSetModified())}resetModified(){this._modified&&(this._modified=!1,"function"==typeof this.onResetModified&&this.onResetModified())}get serializable(){return this._storage.size>0?this._storage:null}get hash(){const O=new i.MurmurHash3_64;for(const[A,_]of this._storage)O.update(`${A}:${JSON.stringify(_)}`);return O.hexdigest()}}},(Q,l,S)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.MurmurHash3_64=void 0;var i=S(1);const P=3285377520,T=4294901760,U=65535;l.MurmurHash3_64=class O{constructor(_){this.h1=_?4294967295&_:P,this.h2=_?4294967295&_:P}update(_){let R,I;if("string"==typeof _){R=new Uint8Array(2*_.length),I=0;for(let u=0,p=_.length;u<p;u++){const c=_.charCodeAt(u);c<=255?R[I++]=c:(R[I++]=c>>>8,R[I++]=255&c)}}else{if(!(0,i.isArrayBuffer)(_))throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");R=_.slice(),I=R.byteLength}const V=I>>2,D=I-4*V,W=new Uint32Array(R.buffer,0,V);let s=0,M=0,v=this.h1,C=this.h2;const L=3432918353,x=461845907,n=L&U,t=x&U;for(let u=0;u<V;u++)1&u?(s=W[u],s=s*L&T|s*n&U,s=s<<15|s>>>17,s=s*x&T|s*t&U,v^=s,v=v<<13|v>>>19,v=5*v+3864292196):(M=W[u],M=M*L&T|M*n&U,M=M<<15|M>>>17,M=M*x&T|M*t&U,C^=M,C=C<<13|C>>>19,C=5*C+3864292196);switch(s=0,D){case 3:s^=R[4*V+2]<<16;case 2:s^=R[4*V+1]<<8;case 1:s^=R[4*V],s=s*L&T|s*n&U,s=s<<15|s>>>17,s=s*x&T|s*t&U,1&V?v^=s:C^=s}this.h1=v,this.h2=C}hexdigest(){let _=this.h1,R=this.h2;_^=R>>>1,_=3981806797*_&T|36045*_&U,R=4283543511*R&T|(2950163797*(R<<16|_>>>16)&T)>>>16,_^=R>>>1,_=444984403*_&T|60499*_&U,R=3301882366*R&T|(3120437893*(R<<16|_>>>16)&T)>>>16,_^=R>>>1;const I=(_>>>0).toString(16),V=(R>>>0).toString(16);return I.padStart(8,"0")+V.padStart(8,"0")}}},(Q,l,S)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.CanvasGraphics=void 0;var i=S(1),P=S(11),T=S(12),U=S(3),O=S(5);const R=4096,s=16;function C(N){if(N._transformStack&&(N._transformStack=[]),!N.mozCurrentTransform){N._originalSave=N.save,N._originalRestore=N.restore,N._originalRotate=N.rotate,N._originalScale=N.scale,N._originalTranslate=N.translate,N._originalTransform=N.transform,N._originalSetTransform=N.setTransform,N._originalResetTransform=N.resetTransform,N._transformMatrix=N._transformMatrix||[1,0,0,1,0,0],N._transformStack=[];try{const o=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(N),"lineWidth");N._setLineWidth=o.set,N._getLineWidth=o.get,Object.defineProperty(N,"lineWidth",{set:function(r){this._setLineWidth(1.000001*r)},get:function(){return this._getLineWidth()}})}catch{}Object.defineProperty(N,"mozCurrentTransform",{get:function(){return this._transformMatrix}}),Object.defineProperty(N,"mozCurrentTransformInverse",{get:function(){const[e,r,a,g,f,h]=this._transformMatrix,k=e*g-r*a,G=r*a-e*g;return[g/k,r/G,a/G,e/k,(g*f-a*h)/G,(r*f-e*h)/k]}}),N.save=function(){const e=this._transformMatrix;this._transformStack.push(e),this._transformMatrix=e.slice(0,6),this._originalSave()},N.restore=function(){0===this._transformStack.length&&(0,i.warn)("Tried to restore a ctx when the stack was already empty.");const e=this._transformStack.pop();e&&(this._transformMatrix=e,this._originalRestore())},N.translate=function(e,r){const a=this._transformMatrix;a[4]=a[0]*e+a[2]*r+a[4],a[5]=a[1]*e+a[3]*r+a[5],this._originalTranslate(e,r)},N.scale=function(e,r){const a=this._transformMatrix;a[0]*=e,a[1]*=e,a[2]*=r,a[3]*=r,this._originalScale(e,r)},N.transform=function(e,r,a,g,f,h){const k=this._transformMatrix;this._transformMatrix=[k[0]*e+k[2]*r,k[1]*e+k[3]*r,k[0]*a+k[2]*g,k[1]*a+k[3]*g,k[0]*f+k[2]*h+k[4],k[1]*f+k[3]*h+k[5]],N._originalTransform(e,r,a,g,f,h)},N.setTransform=function(e,r,a,g,f,h){this._transformMatrix=[e,r,a,g,f,h],N._originalSetTransform(e,r,a,g,f,h)},N.resetTransform=function(){this._transformMatrix=[1,0,0,1,0,0],N._originalResetTransform()},N.rotate=function(e){const r=Math.cos(e),a=Math.sin(e),g=this._transformMatrix;this._transformMatrix=[g[0]*r+g[2]*a,g[1]*r+g[3]*a,g[0]*-a+g[2]*r,g[1]*-a+g[3]*r,g[4],g[5]],this._originalRotate(e)}}}class L{constructor(o){this.canvasFactory=o,this.cache=Object.create(null)}getCanvas(o,e,r,a){let g;return void 0!==this.cache[o]?(g=this.cache[o],this.canvasFactory.reset(g,e,r),g.context.setTransform(1,0,0,1,0,0)):(g=this.canvasFactory.create(e,r),this.cache[o]=g),a&&C(g.context),g}delete(o){delete this.cache[o]}clear(){for(const o in this.cache)this.canvasFactory.destroy(this.cache[o]),delete this.cache[o]}}function x(N,o,e,r,a,g,f,h,k,G){const[j,Y,$,se,re,fe]=N.mozCurrentTransform;if(0===Y&&0===$){const E=Math.round(f*j+re),ne=Math.round(h*se+fe),q=Math.abs(Math.round((f+k)*j+re)-E)||1,ae=Math.abs(Math.round((h+G)*se+fe)-ne)||1;return N.setTransform(Math.sign(j),0,0,Math.sign(se),E,ne),N.drawImage(o,e,r,a,g,0,0,q,ae),N.setTransform(j,Y,$,se,re,fe),[q,ae]}if(0===j&&0===se){const E=Math.round(h*$+re),ne=Math.round(f*Y+fe),q=Math.abs(Math.round((h+G)*$+re)-E)||1,ae=Math.abs(Math.round((f+k)*Y+fe)-ne)||1;return N.setTransform(0,Math.sign(Y),Math.sign($),0,E,ne),N.drawImage(o,e,r,a,g,0,0,ae,q),N.setTransform(j,Y,$,se,re,fe),[ae,q]}return N.drawImage(o,e,r,a,g,f,h,k,G),[Math.hypot(j,Y)*k,Math.hypot($,se)*G]}class t{constructor(o,e){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=i.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=i.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=i.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,o,e])}clone(){const o=Object.create(this);return o.clipBox=this.clipBox.slice(),o}setCurrentPoint(o,e){this.x=o,this.y=e}updatePathMinMax(o,e,r){[e,r]=i.Util.applyTransform([e,r],o),this.minX=Math.min(this.minX,e),this.minY=Math.min(this.minY,r),this.maxX=Math.max(this.maxX,e),this.maxY=Math.max(this.maxY,r)}updateRectMinMax(o,e){const r=i.Util.applyTransform(e,o),a=i.Util.applyTransform(e.slice(2),o);this.minX=Math.min(this.minX,r[0],a[0]),this.minY=Math.min(this.minY,r[1],a[1]),this.maxX=Math.max(this.maxX,r[0],a[0]),this.maxY=Math.max(this.maxY,r[1],a[1])}updateScalingPathMinMax(o,e){i.Util.scaleMinMax(o,e),this.minX=Math.min(this.minX,e[0]),this.maxX=Math.max(this.maxX,e[1]),this.minY=Math.min(this.minY,e[2]),this.maxY=Math.max(this.maxY,e[3])}updateCurvePathMinMax(o,e,r,a,g,f,h,k,G,j){const Y=i.Util.bezierBoundingBox(e,r,a,g,f,h,k,G);if(j)return j[0]=Math.min(j[0],Y[0],Y[2]),j[1]=Math.max(j[1],Y[0],Y[2]),j[2]=Math.min(j[2],Y[1],Y[3]),void(j[3]=Math.max(j[3],Y[1],Y[3]));this.updateRectMinMax(o,Y)}getPathBoundingBox(o=P.PathType.FILL,e=null){const r=[this.minX,this.minY,this.maxX,this.maxY];if(o===P.PathType.STROKE){e||(0,i.unreachable)("Stroke bounding box must include transform.");const a=i.Util.singularValueDecompose2dScale(e),g=a[0]*this.lineWidth/2,f=a[1]*this.lineWidth/2;r[0]-=g,r[1]-=f,r[2]+=g,r[3]+=f}return r}updateClipFromPath(){const o=i.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(o||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(o){this.clipBox=o,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(o=P.PathType.FILL,e=null){return i.Util.intersect(this.clipBox,this.getPathBoundingBox(o,e))}}function u(N,o,e=null){if(typeof ImageData<"u"&&o instanceof ImageData)return void N.putImageData(o,0,0);const r=o.height,a=o.width,g=r%s,f=(r-g)/s,h=0===g?f:f+1,k=N.createImageData(a,s);let j,G=0;const Y=o.data,$=k.data;let se,re,fe,pe,ce,y,E,ee;if(e)switch(e.length){case 1:ce=e[0],y=e[0],E=e[0],ee=e[0];break;case 4:ce=e[0],y=e[1],E=e[2],ee=e[3]}if(o.kind===i.ImageKind.GRAYSCALE_1BPP){const ne=Y.byteLength,Z=new Uint32Array($.buffer,0,$.byteLength>>2),q=Z.length,te=a+7>>3;let ae=4294967295,le=i.FeatureTest.isLittleEndian?4278190080:255;for(ee&&255===ee[0]&&0===ee[255]&&([ae,le]=[le,ae]),se=0;se<h;se++){for(fe=se<f?s:g,j=0,re=0;re<fe;re++){const ge=ne-G;let _e=0;const Ae=ge>te?a:8*ge-7,ye=-8&Ae;let ie=0,H=0;for(;_e<ye;_e+=8)H=Y[G++],Z[j++]=128&H?ae:le,Z[j++]=64&H?ae:le,Z[j++]=32&H?ae:le,Z[j++]=16&H?ae:le,Z[j++]=8&H?ae:le,Z[j++]=4&H?ae:le,Z[j++]=2&H?ae:le,Z[j++]=1&H?ae:le;for(;_e<Ae;_e++)0===ie&&(H=Y[G++],ie=128),Z[j++]=H&ie?ae:le,ie>>=1}for(;j<q;)Z[j++]=0;N.putImageData(k,0,se*s)}}else if(o.kind===i.ImageKind.RGBA_32BPP){const ne=!!(ce||y||E);for(re=0,pe=a*s*4,se=0;se<f;se++){if($.set(Y.subarray(G,G+pe)),G+=pe,ne)for(let Z=0;Z<pe;Z+=4)ce&&($[Z+0]=ce[$[Z+0]]),y&&($[Z+1]=y[$[Z+1]]),E&&($[Z+2]=E[$[Z+2]]);N.putImageData(k,0,re),re+=s}if(se<h){if(pe=a*g*4,$.set(Y.subarray(G,G+pe)),ne)for(let Z=0;Z<pe;Z+=4)ce&&($[Z+0]=ce[$[Z+0]]),y&&($[Z+1]=y[$[Z+1]]),E&&($[Z+2]=E[$[Z+2]]);N.putImageData(k,0,re)}}else{if(o.kind!==i.ImageKind.RGB_24BPP)throw new Error(`bad image kind: ${o.kind}`);{const ne=!!(ce||y||E);for(fe=s,pe=a*fe,se=0;se<h;se++){for(se>=f&&(fe=g,pe=a*fe),j=0,re=pe;re--;)$[j++]=Y[G++],$[j++]=Y[G++],$[j++]=Y[G++],$[j++]=255;if(ne)for(let Z=0;Z<j;Z+=4)ce&&($[Z+0]=ce[$[Z+0]]),y&&($[Z+1]=y[$[Z+1]]),E&&($[Z+2]=E[$[Z+2]]);N.putImageData(k,0,se*s)}}}}function p(N,o){if(o.bitmap)return void N.drawImage(o.bitmap,0,0);const e=o.height,r=o.width,a=e%s,g=(e-a)/s,f=0===a?g:g+1,h=N.createImageData(r,s);let k=0;const G=o.data,j=h.data;for(let Y=0;Y<f;Y++){const $=Y<g?s:a;({srcPos:k}=(0,T.applyMaskImageData)({src:G,srcPos:k,dest:j,width:r,height:$})),N.putImageData(h,0,Y*s)}}function c(N,o){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(let r=0,a=e.length;r<a;r++){const g=e[r];void 0!==N[g]&&(o[g]=N[g])}void 0!==N.setLineDash&&(o.setLineDash(N.getLineDash()),o.lineDashOffset=N.lineDashOffset)}function b(N,o){N.strokeStyle=N.fillStyle=o||"#000000",N.fillRule="nonzero",N.globalAlpha=1,N.lineWidth=1,N.lineCap="butt",N.lineJoin="miter",N.miterLimit=10,N.globalCompositeOperation="source-over",N.font="10px sans-serif",void 0!==N.setLineDash&&(N.setLineDash([]),N.lineDashOffset=0)}function m(N,o,e,r){const a=N.length;for(let g=3;g<a;g+=4){const f=N[g];if(0===f)N[g-3]=o,N[g-2]=e,N[g-1]=r;else if(f<255){const h=255-f;N[g-3]=N[g-3]*f+o*h>>8,N[g-2]=N[g-2]*f+e*h>>8,N[g-1]=N[g-1]*f+r*h>>8}}}function d(N,o,e){const r=N.length,a=1/255;for(let g=3;g<r;g+=4)o[g]=o[g]*(e?e[N[g]]:N[g])*a|0}function w(N,o,e){const r=N.length;for(let a=3;a<r;a+=4){const g=77*N[a-3]+152*N[a-2]+28*N[a-1];o[a]=e?o[a]*e[g>>8]>>8:o[a]*g>>16}}function z(N,o){const e=i.Util.singularValueDecompose2dScale(N);e[0]=Math.fround(e[0]),e[1]=Math.fround(e[1]);const r=Math.fround((globalThis.devicePixelRatio||1)*O.PixelsPerInch.PDF_TO_CSS_UNITS);return void 0!==o?o:e[0]<=r||e[1]<=r}const J=["butt","round","square"],X=["miter","round","bevel"],oe={},de={};class he{constructor(o,e,r,a,g,f,h,k){this.ctx=o,this.current=new t(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=r,this.canvasFactory=a,this.imageLayer=g,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=f,this.cachedCanvases=new L(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=h,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.backgroundColor=k?.background||null,this.foregroundColor=k?.foreground||null,o&&C(o),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(o,e=null){return"string"==typeof o?o.startsWith("g_")?this.commonObjs.get(o):this.objs.get(o):e}beginDrawing({transform:o,viewport:e,transparency:r=!1,background:a=null}){const g=this.ctx.canvas.width,f=this.ctx.canvas.height,h=a||"#ffffff";if(this.ctx.save(),this.foregroundColor&&this.backgroundColor){this.ctx.fillStyle=this.foregroundColor;const k=this.foregroundColor=this.ctx.fillStyle;this.ctx.fillStyle=this.backgroundColor;const G=this.backgroundColor=this.ctx.fillStyle;let j=!0,Y=h;if(this.ctx.fillStyle=h,Y=this.ctx.fillStyle,j="string"==typeof Y&&/^#[0-9A-Fa-f]{6}$/.test(Y),"#000000"===k&&"#ffffff"===G||k===G||!j)this.foregroundColor=this.backgroundColor=null;else{const $=parseInt(Y.slice(1),16),re=($&&65280)>>8,fe=$&&255,pe=y=>(y/=255)<=.03928?y/12.92:((y+.055)/1.055)**2.4,ce=Math.round(.2126*pe(($&&16711680)>>16)+.7152*pe(re)+.0722*pe(fe));this.selectColor=(y,E,ee)=>{const ne=.2126*pe(y)+.7152*pe(E)+.0722*pe(ee);return Math.round(ne)===ce?G:k}}}if(this.ctx.fillStyle=this.backgroundColor||h,this.ctx.fillRect(0,0,g,f),this.ctx.restore(),r){const k=this.cachedCanvases.getCanvas("transparent",g,f,!0);this.compositeCtx=this.ctx,this.transparentCanvas=k.canvas,this.ctx=k.context,this.ctx.save(),this.ctx.transform.apply(this.ctx,this.compositeCtx.mozCurrentTransform)}this.ctx.save(),b(this.ctx,this.foregroundColor),o&&(this.ctx.transform.apply(this.ctx,o),this.outputScaleX=o[0],this.outputScaleY=o[0]),this.ctx.transform.apply(this.ctx,e.transform),this.viewportScale=e.scale,this.baseTransform=this.ctx.mozCurrentTransform.slice(),this.imageLayer&&this.imageLayer.beginLayout()}executeOperatorList(o,e,r,a){const g=o.argsArray,f=o.fnArray;let h=e||0;const k=g.length;if(k===h)return h;const G=k-h>10&&"function"==typeof r,j=G?Date.now()+15:0;let Y=0;const $=this.commonObjs,se=this.objs;let re;for(;;){if(void 0!==a&&h===a.nextBreakPoint)return a.breakIt(h,r),h;if(re=f[h],re!==i.OPS.dependency)this[re].apply(this,g[h]);else for(const fe of g[h]){const pe=fe.startsWith("g_")?$:se;if(!pe.has(fe))return pe.get(fe,r),h}if(h++,h===k)return h;if(G&&++Y>10){if(Date.now()>j)return r(),h;Y=0}}}endDrawing(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const o of this._cachedBitmapsMap.values()){for(const e of o.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);o.clear()}this._cachedBitmapsMap.clear(),this.imageLayer&&this.imageLayer.endLayout()}_scaleImage(o,e){const r=o.width,a=o.height;let j,Y,g=Math.max(Math.hypot(e[0],e[1]),1),f=Math.max(Math.hypot(e[2],e[3]),1),h=r,k=a,G="prescale1";for(;g>2&&h>1||f>2&&k>1;){let $=h,se=k;g>2&&h>1&&($=Math.ceil(h/2),g/=h/$),f>2&&k>1&&(se=Math.ceil(k/2),f/=k/se),j=this.cachedCanvases.getCanvas(G,$,se,!1),Y=j.context,Y.clearRect(0,0,$,se),Y.drawImage(o,0,0,h,k,0,0,$,se),o=j.canvas,h=$,k=se,G="prescale1"===G?"prescale2":"prescale1"}return{img:o,paintWidth:h,paintHeight:k}}_createMaskCanvas(o){const e=this.ctx,{width:r,height:a}=o,g=this.current.fillColor,f=this.current.patternFill,h=e.mozCurrentTransform;let k,G,j,Y;if((o.bitmap||o.data)&&o.count>1){const q=o.bitmap||o.data.buffer,te=h.slice(0,4);G=JSON.stringify(f?te:[te,g]),k=this._cachedBitmapsMap.get(q),k||(k=new Map,this._cachedBitmapsMap.set(q,k));const ae=k.get(G);if(ae&&!f)return{canvas:ae,offsetX:Math.round(Math.min(h[0],h[2])+h[4]),offsetY:Math.round(Math.min(h[1],h[3])+h[5])};j=ae}j||(Y=this.cachedCanvases.getCanvas("maskCanvas",r,a,!1),p(Y.context,o));let $=i.Util.transform(h,[1/r,0,0,-1/a,0,0]);$=i.Util.transform($,[1,0,0,1,0,-a]);const se=i.Util.applyTransform([0,0],$),re=i.Util.applyTransform([r,a],$),fe=i.Util.normalizeRect([se[0],se[1],re[0],re[1]]),pe=Math.round(fe[2]-fe[0])||1,ce=Math.round(fe[3]-fe[1])||1,y=this.cachedCanvases.getCanvas("fillCanvas",pe,ce,!0),E=y.context,ee=Math.min(se[0],re[0]),ne=Math.min(se[1],re[1]);E.translate(-ee,-ne),E.transform.apply(E,$),j||(j=this._scaleImage(Y.canvas,E.mozCurrentTransformInverse),j=j.img,k&&f&&k.set(G,j)),E.imageSmoothingEnabled=z(E.mozCurrentTransform,o.interpolate),x(E,j,0,0,j.width,j.height,0,0,r,a),E.globalCompositeOperation="source-in";const Z=i.Util.transform(E.mozCurrentTransformInverse,[1,0,0,1,-ee,-ne]);return E.fillStyle=f?g.getPattern(e,this,Z,P.PathType.FILL):g,E.fillRect(0,0,r,a),k&&!f&&(this.cachedCanvases.delete("fillCanvas"),k.set(G,y.canvas)),{canvas:y.canvas,offsetX:Math.round(ee),offsetY:Math.round(ne)}}setLineWidth(o){o!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=o,this.ctx.lineWidth=o}setLineCap(o){this.ctx.lineCap=J[o]}setLineJoin(o){this.ctx.lineJoin=X[o]}setMiterLimit(o){this.ctx.miterLimit=o}setDash(o,e){const r=this.ctx;void 0!==r.setLineDash&&(r.setLineDash(o),r.lineDashOffset=e)}setRenderingIntent(o){}setFlatness(o){}setGState(o){for(let e=0,r=o.length;e<r;e++){const a=o[e],f=a[1];switch(a[0]){case"LW":this.setLineWidth(f);break;case"LC":this.setLineCap(f);break;case"LJ":this.setLineJoin(f);break;case"ML":this.setMiterLimit(f);break;case"D":this.setDash(f[0],f[1]);break;case"RI":this.setRenderingIntent(f);break;case"FL":this.setFlatness(f);break;case"Font":this.setFont(f[0],f[1]);break;case"CA":this.current.strokeAlpha=a[1];break;case"ca":this.current.fillAlpha=a[1],this.ctx.globalAlpha=a[1];break;case"BM":this.ctx.globalCompositeOperation=f;break;case"SMask":this.current.activeSMask=f?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=f}}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const o=this.inSMaskMode;this.current.activeSMask&&!o?this.beginSMaskMode():!this.current.activeSMask&&o&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const a=this.cachedCanvases.getCanvas("smaskGroupAt"+this.groupLevel,this.ctx.canvas.width,this.ctx.canvas.height,!0);this.suspendedCtx=this.ctx,this.ctx=a.context;const g=this.ctx;g.setTransform.apply(g,this.suspendedCtx.mozCurrentTransform),c(this.suspendedCtx,g),function v(N,o){if(N._removeMirroring)throw new Error("Context is already forwarding operations.");N.__originalSave=N.save,N.__originalRestore=N.restore,N.__originalRotate=N.rotate,N.__originalScale=N.scale,N.__originalTranslate=N.translate,N.__originalTransform=N.transform,N.__originalSetTransform=N.setTransform,N.__originalResetTransform=N.resetTransform,N.__originalClip=N.clip,N.__originalMoveTo=N.moveTo,N.__originalLineTo=N.lineTo,N.__originalBezierCurveTo=N.bezierCurveTo,N.__originalRect=N.rect,N.__originalClosePath=N.closePath,N.__originalBeginPath=N.beginPath,N._removeMirroring=()=>{N.save=N.__originalSave,N.restore=N.__originalRestore,N.rotate=N.__originalRotate,N.scale=N.__originalScale,N.translate=N.__originalTranslate,N.transform=N.__originalTransform,N.setTransform=N.__originalSetTransform,N.resetTransform=N.__originalResetTransform,N.clip=N.__originalClip,N.moveTo=N.__originalMoveTo,N.lineTo=N.__originalLineTo,N.bezierCurveTo=N.__originalBezierCurveTo,N.rect=N.__originalRect,N.closePath=N.__originalClosePath,N.beginPath=N.__originalBeginPath,delete N._removeMirroring},N.save=function(){o.save(),this.__originalSave()},N.restore=function(){o.restore(),this.__originalRestore()},N.translate=function(r,a){o.translate(r,a),this.__originalTranslate(r,a)},N.scale=function(r,a){o.scale(r,a),this.__originalScale(r,a)},N.transform=function(r,a,g,f,h,k){o.transform(r,a,g,f,h,k),this.__originalTransform(r,a,g,f,h,k)},N.setTransform=function(r,a,g,f,h,k){o.setTransform(r,a,g,f,h,k),this.__originalSetTransform(r,a,g,f,h,k)},N.resetTransform=function(){o.resetTransform(),this.__originalResetTransform()},N.rotate=function(r){o.rotate(r),this.__originalRotate(r)},N.clip=function(r){o.clip(r),this.__originalClip(r)},N.moveTo=function(e,r){o.moveTo(e,r),this.__originalMoveTo(e,r)},N.lineTo=function(e,r){o.lineTo(e,r),this.__originalLineTo(e,r)},N.bezierCurveTo=function(e,r,a,g,f,h){o.bezierCurveTo(e,r,a,g,f,h),this.__originalBezierCurveTo(e,r,a,g,f,h)},N.rect=function(e,r,a,g){o.rect(e,r,a,g),this.__originalRect(e,r,a,g)},N.closePath=function(){o.closePath(),this.__originalClosePath()},N.beginPath=function(){o.beginPath(),this.__originalBeginPath()}}(g,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),c(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(o){this.current.activeSMask&&(o?(o[0]=Math.floor(o[0]),o[1]=Math.floor(o[1]),o[2]=Math.ceil(o[2]),o[3]=Math.ceil(o[3])):o=[0,0,this.ctx.canvas.width,this.ctx.canvas.height],function B(N,o,e,r){const a=r[0],g=r[1],f=r[2]-a,h=r[3]-g;0===f||0===h||(function F(N,o,e,r,a,g,f,h,k,G,j){const Y=!!g,$=Y?g[0]:0,se=Y?g[1]:0,re=Y?g[2]:0;let fe;fe="Luminosity"===a?w:d;const ce=Math.min(r,Math.ceil(1048576/e));for(let y=0;y<r;y+=ce){const E=Math.min(ce,r-y),ee=N.getImageData(h-G,y+(k-j),e,E),ne=o.getImageData(h,y+k,e,E);Y&&m(ee.data,$,se,re),fe(ee.data,ne.data,f),o.putImageData(ne,h,y+k)}}(o.context,e,f,h,o.subtype,o.backdrop,o.transferMap,a,g,o.offsetX,o.offsetY),N.save(),N.globalAlpha=1,N.globalCompositeOperation="source-over",N.setTransform(1,0,0,1,0,0),N.drawImage(e.canvas,0,0),N.restore())}(this.suspendedCtx,this.current.activeSMask,this.ctx,o),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore())}save(){this.inSMaskMode?(c(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const o=this.current;this.stateStack.push(o),this.current=o.clone()}restore(){0===this.stateStack.length&&this.inSMaskMode&&this.endSMaskMode(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),c(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(o,e,r,a,g,f){this.ctx.transform(o,e,r,a,g,f),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(o,e,r){const a=this.ctx,g=this.current;let k,G,f=g.x,h=g.y;const j=a.mozCurrentTransform,Y=0===j[0]&&0===j[3]||0===j[1]&&0===j[2],$=Y?r.slice(0):null;for(let se=0,re=0,fe=o.length;se<fe;se++)switch(0|o[se]){case i.OPS.rectangle:f=e[re++],h=e[re++];const pe=e[re++],ce=e[re++],y=f+pe,E=h+ce;a.moveTo(f,h),0===pe||0===ce?a.lineTo(y,E):(a.lineTo(y,h),a.lineTo(y,E),a.lineTo(f,E)),Y||g.updateRectMinMax(j,[f,h,y,E]),a.closePath();break;case i.OPS.moveTo:f=e[re++],h=e[re++],a.moveTo(f,h),Y||g.updatePathMinMax(j,f,h);break;case i.OPS.lineTo:f=e[re++],h=e[re++],a.lineTo(f,h),Y||g.updatePathMinMax(j,f,h);break;case i.OPS.curveTo:k=f,G=h,f=e[re+4],h=e[re+5],a.bezierCurveTo(e[re],e[re+1],e[re+2],e[re+3],f,h),g.updateCurvePathMinMax(j,k,G,e[re],e[re+1],e[re+2],e[re+3],f,h,$),re+=6;break;case i.OPS.curveTo2:k=f,G=h,a.bezierCurveTo(f,h,e[re],e[re+1],e[re+2],e[re+3]),g.updateCurvePathMinMax(j,k,G,f,h,e[re],e[re+1],e[re+2],e[re+3],$),f=e[re+2],h=e[re+3],re+=4;break;case i.OPS.curveTo3:k=f,G=h,f=e[re+2],h=e[re+3],a.bezierCurveTo(e[re],e[re+1],f,h,f,h),g.updateCurvePathMinMax(j,k,G,e[re],e[re+1],f,h,f,h,$),re+=4;break;case i.OPS.closePath:a.closePath()}Y&&g.updateScalingPathMinMax(j,$),g.setCurrentPoint(f,h)}closePath(){this.ctx.closePath()}stroke(o){o=!(typeof o<"u")||o;const e=this.ctx,r=this.current.strokeColor;e.globalAlpha=this.current.strokeAlpha,this.contentVisible&&("object"==typeof r&&r?.getPattern?(e.save(),e.strokeStyle=r.getPattern(e,this,e.mozCurrentTransformInverse,P.PathType.STROKE),this.rescaleAndStroke(!1),e.restore()):this.rescaleAndStroke(!0)),o&&this.consumePath(this.current.getClippedPathBoundingBox()),e.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(o){o=!(typeof o<"u")||o;const e=this.ctx,r=this.current.fillColor;let g=!1;this.current.patternFill&&(e.save(),e.fillStyle=r.getPattern(e,this,e.mozCurrentTransformInverse,P.PathType.FILL),g=!0);const f=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==f&&(this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill()),g&&e.restore(),o&&this.consumePath(f)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=oe}eoClip(){this.pendingClip=de}beginText(){this.current.textMatrix=i.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const o=this.pendingTextPaths,e=this.ctx;if(void 0!==o){e.save(),e.beginPath();for(let r=0;r<o.length;r++){const a=o[r];e.setTransform.apply(e,a.transform),e.translate(a.x,a.y),a.addToPath(e,a.fontSize)}e.restore(),e.clip(),e.beginPath(),delete this.pendingTextPaths}else e.beginPath()}setCharSpacing(o){this.current.charSpacing=o}setWordSpacing(o){this.current.wordSpacing=o}setHScale(o){this.current.textHScale=o/100}setLeading(o){this.current.leading=-o}setFont(o,e){const r=this.commonObjs.get(o),a=this.current;if(!r)throw new Error(`Can't find font for ${o}`);if(a.fontMatrix=r.fontMatrix||i.FONT_IDENTITY_MATRIX,(0===a.fontMatrix[0]||0===a.fontMatrix[3])&&(0,i.warn)("Invalid font matrix for font "+o),e<0?(e=-e,a.fontDirection=-1):a.fontDirection=1,this.current.font=r,this.current.fontSize=e,r.isType3Font)return;let f="normal";r.black?f="900":r.bold&&(f="bold");const h=r.italic?"italic":"normal",k=`"${r.loadedName||"sans-serif"}", ${r.fallbackName}`;let G=e;e<16?G=16:e>100&&(G=100),this.current.fontSizeScale=e/G,this.ctx.font=`${h} ${f} ${G}px ${k}`}setTextRenderingMode(o){this.current.textRenderingMode=o}setTextRise(o){this.current.textRise=o}moveText(o,e){this.current.x=this.current.lineX+=o,this.current.y=this.current.lineY+=e}setLeadingMoveText(o,e){this.setLeading(-e),this.moveText(o,e)}setTextMatrix(o,e,r,a,g,f){this.current.textMatrix=[o,e,r,a,g,f],this.current.textMatrixScale=Math.hypot(o,e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(o,e,r,a){const g=this.ctx,f=this.current,h=f.font,k=f.textRenderingMode,G=f.fontSize/f.fontSizeScale,j=k&i.TextRenderingMode.FILL_STROKE_MASK,Y=!!(k&i.TextRenderingMode.ADD_TO_PATH_FLAG),$=f.patternFill&&!h.missingFile;let se;(h.disableFontFace||Y||$)&&(se=h.getPathGenerator(this.commonObjs,o)),h.disableFontFace||$?(g.save(),g.translate(e,r),g.beginPath(),se(g,G),a&&g.setTransform.apply(g,a),(j===i.TextRenderingMode.FILL||j===i.TextRenderingMode.FILL_STROKE)&&g.fill(),(j===i.TextRenderingMode.STROKE||j===i.TextRenderingMode.FILL_STROKE)&&g.stroke(),g.restore()):((j===i.TextRenderingMode.FILL||j===i.TextRenderingMode.FILL_STROKE)&&g.fillText(o,e,r),(j===i.TextRenderingMode.STROKE||j===i.TextRenderingMode.FILL_STROKE)&&g.strokeText(o,e,r)),Y&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:g.mozCurrentTransform,x:e,y:r,fontSize:G,addToPath:se})}get isFontSubpixelAAEnabled(){const{context:o}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10,!1);o.scale(1.5,1),o.fillText("I",0,10);const e=o.getImageData(0,0,10,10).data;let r=!1;for(let a=3;a<e.length;a+=4)if(e[a]>0&&e[a]<255){r=!0;break}return(0,i.shadow)(this,"isFontSubpixelAAEnabled",r)}showText(o){const e=this.current,r=e.font;if(r.isType3Font)return this.showType3Text(o);const a=e.fontSize;if(0===a)return;const g=this.ctx,f=e.fontSizeScale,h=e.charSpacing,k=e.wordSpacing,G=e.fontDirection,j=e.textHScale*G,Y=o.length,$=r.vertical,se=$?1:-1,re=r.defaultVMetrics,fe=a*e.fontMatrix[0],pe=e.textRenderingMode===i.TextRenderingMode.FILL&&!r.disableFontFace&&!e.patternFill;let ce;if(g.save(),g.transform.apply(g,e.textMatrix),g.translate(e.x,e.y+e.textRise),g.scale(j,G>0?-1:1),e.patternFill){g.save();const Z=e.fillColor.getPattern(g,this,g.mozCurrentTransformInverse,P.PathType.FILL);ce=g.mozCurrentTransform,g.restore(),g.fillStyle=Z}let y=e.lineWidth;const E=e.textMatrixScale;if(0===E||0===y){const Z=e.textRenderingMode&i.TextRenderingMode.FILL_STROKE_MASK;(Z===i.TextRenderingMode.STROKE||Z===i.TextRenderingMode.FILL_STROKE)&&(y=this.getSinglePixelWidth())}else y/=E;1!==f&&(g.scale(f,f),y/=f),g.lineWidth=y;let ne,ee=0;for(ne=0;ne<Y;++ne){const Z=o[ne];if("number"==typeof Z){ee+=se*Z*a/1e3;continue}let q=!1;const te=(Z.isSpace?k:0)+h,ae=Z.fontChar,le=Z.accent;let ge,_e,ye,Ae=Z.width;if($){const ie=Z.vmetric||re,H=-(Z.vmetric?ie[1]:.5*Ae)*fe;Ae=ie?-ie[0]:Ae,ge=H/f,_e=(ee+ie[2]*fe)/f}else ge=ee/f,_e=0;if(r.remeasure&&Ae>0){const ie=1e3*g.measureText(ae).width/a*f;if(Ae<ie&&this.isFontSubpixelAAEnabled){const H=Ae/ie;q=!0,g.save(),g.scale(H,1),ge/=H}else Ae!==ie&&(ge+=(Ae-ie)/2e3*a/f)}this.contentVisible&&(Z.isInFont||r.missingFile)&&(pe&&!le?g.fillText(ae,ge,_e):(this.paintChar(ae,ge,_e,ce),le&&this.paintChar(le.fontChar,ge+a*le.offset.x/f,_e-a*le.offset.y/f,ce))),ye=$?Ae*fe-te*G:Ae*fe+te*G,ee+=ye,q&&g.restore()}$?e.y-=ee:e.x+=ee*j,g.restore(),this.compose()}showType3Text(o){const e=this.ctx,r=this.current,a=r.font,g=r.fontSize,f=r.fontDirection,h=a.vertical?1:-1,k=r.charSpacing,G=r.wordSpacing,j=r.textHScale*f,Y=r.fontMatrix||i.FONT_IDENTITY_MATRIX,$=o.length;let re,fe,pe,ce;if(r.textRenderingMode!==i.TextRenderingMode.INVISIBLE&&0!==g){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,e.save(),e.transform.apply(e,r.textMatrix),e.translate(r.x,r.y),e.scale(j,f),re=0;re<$;++re){if(fe=o[re],"number"==typeof fe){ce=h*fe*g/1e3,this.ctx.translate(ce,0),r.x+=ce*j;continue}const y=(fe.isSpace?G:0)+k,E=a.charProcOperatorList[fe.operatorListId];E?(this.contentVisible&&(this.processingType3=fe,this.save(),e.scale(g,g),e.transform.apply(e,Y),this.executeOperatorList(E),this.restore()),pe=i.Util.applyTransform([fe.width,0],Y)[0]*g+y,e.translate(pe,0),r.x+=pe*j):(0,i.warn)(`Type3 character "${fe.operatorListId}" is not available.`)}e.restore(),this.processingType3=null}}setCharWidth(o,e){}setCharWidthAndBounds(o,e,r,a,g,f){this.ctx.rect(r,a,g-r,f-a),this.ctx.clip(),this.endPath()}getColorN_Pattern(o){let e;if("TilingPattern"===o[0]){const r=o[1],a=this.baseTransform||this.ctx.mozCurrentTransform.slice();e=new P.TilingPattern(o,r,this.ctx,{createCanvasGraphics:f=>new he(f,this.commonObjs,this.objs,this.canvasFactory)},a)}else e=this._getPattern(o[1],o[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(o,e,r){const a=this.selectColor?.(o,e,r)||i.Util.makeHexColor(o,e,r);this.ctx.strokeStyle=a,this.current.strokeColor=a}setFillRGBColor(o,e,r){const a=this.selectColor?.(o,e,r)||i.Util.makeHexColor(o,e,r);this.ctx.fillStyle=a,this.current.fillColor=a,this.current.patternFill=!1}_getPattern(o,e=null){let r;return this.cachedPatterns.has(o)?r=this.cachedPatterns.get(o):(r=(0,P.getShadingPattern)(this.objs.get(o)),this.cachedPatterns.set(o,r)),e&&(r.matrix=e),r}shadingFill(o){if(!this.contentVisible)return;const e=this.ctx;this.save();const r=this._getPattern(o);e.fillStyle=r.getPattern(e,this,e.mozCurrentTransformInverse,P.PathType.SHADING);const a=e.mozCurrentTransformInverse;if(a){const g=e.canvas,f=g.width,h=g.height,k=i.Util.applyTransform([0,0],a),G=i.Util.applyTransform([0,h],a),j=i.Util.applyTransform([f,0],a),Y=i.Util.applyTransform([f,h],a),$=Math.min(k[0],G[0],j[0],Y[0]),se=Math.min(k[1],G[1],j[1],Y[1]),re=Math.max(k[0],G[0],j[0],Y[0]),fe=Math.max(k[1],G[1],j[1],Y[1]);this.ctx.fillRect($,se,re-$,fe-se)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,i.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,i.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(o,e){this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(o)&&6===o.length&&this.transform.apply(this,o),this.baseTransform=this.ctx.mozCurrentTransform,e)&&(this.ctx.rect(e[0],e[1],e[2]-e[0],e[3]-e[1]),this.current.updateRectMinMax(this.ctx.mozCurrentTransform,e),this.clip(),this.endPath())}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(o){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;o.isolated||(0,i.info)("TODO: Support non-isolated groups."),o.knockout&&(0,i.warn)("Knockout groups not supported.");const r=e.mozCurrentTransform;if(o.matrix&&e.transform.apply(e,o.matrix),!o.bbox)throw new Error("Bounding box is required.");let a=i.Util.getAxialAlignedBoundingBox(o.bbox,e.mozCurrentTransform);a=i.Util.intersect(a,[0,0,e.canvas.width,e.canvas.height])||[0,0,0,0];const f=Math.floor(a[0]),h=Math.floor(a[1]);let k=Math.max(Math.ceil(a[2])-f,1),G=Math.max(Math.ceil(a[3])-h,1),j=1,Y=1;k>R&&(j=k/R,k=R),G>R&&(Y=G/R,G=R),this.current.startNewPathAndClipBox([0,0,k,G]);let $="groupAt"+this.groupLevel;o.smask&&($+="_smask_"+this.smaskCounter++%2);const se=this.cachedCanvases.getCanvas($,k,G,!0),re=se.context;re.scale(1/j,1/Y),re.translate(-f,-h),re.transform.apply(re,r),o.smask?this.smaskStack.push({canvas:se.canvas,context:re,offsetX:f,offsetY:h,scaleX:j,scaleY:Y,subtype:o.smask.subtype,backdrop:o.smask.backdrop,transferMap:o.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(f,h),e.scale(j,Y),e.save()),c(e,re),this.ctx=re,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(o){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,o.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const a=this.ctx.mozCurrentTransform;this.restore(),this.ctx.save(),this.ctx.setTransform.apply(this.ctx,a);const g=i.Util.getAxialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],a);this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(g)}}beginAnnotations(){this.save(),this.baseTransform&&this.ctx.setTransform.apply(this.ctx,this.baseTransform)}endAnnotations(){this.restore()}beginAnnotation(o,e,r,a,g){if(this.save(),Array.isArray(e)&&4===e.length){const f=e[2]-e[0],h=e[3]-e[1];if(g&&this.annotationCanvasMap){(r=r.slice())[4]-=e[0],r[5]-=e[1],(e=e.slice())[0]=e[1]=0,e[2]=f,e[3]=h;const[k,G]=i.Util.singularValueDecompose2dScale(this.ctx.mozCurrentTransform),{viewportScale:j}=this,Y=Math.ceil(f*this.outputScaleX*j),$=Math.ceil(h*this.outputScaleY*j);this.annotationCanvas=this.canvasFactory.create(Y,$);const{canvas:se,context:re}=this.annotationCanvas,fe=`var(--zoom-factor) * ${O.PixelsPerInch.PDF_TO_CSS_UNITS}`;se.style.width=`calc(${f}px * ${fe})`,se.style.height=`calc(${h}px * ${fe})`,this.annotationCanvasMap.set(o,se),this.annotationCanvas.savedCtx=this.ctx,this.ctx=re,this.ctx.setTransform(k,0,0,-G,0,h*G),C(this.ctx),b(this.ctx,this.foregroundColor)}else b(this.ctx,this.foregroundColor),this.ctx.rect(e[0],e[1],f,h),this.ctx.clip(),this.endPath()}this.current=new t(this.ctx.canvas.width,this.ctx.canvas.height),this.transform.apply(this,r),this.transform.apply(this,a)}endAnnotation(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas),this.restore()}paintImageMaskXObject(o){if(!this.contentVisible)return;const e=o.count;(o=this.getObject(o.data,o)).count=e;const r=this.ctx,a=this.processingType3;if(a&&(void 0===a.compiled&&(a.compiled=function n(N){const{width:o,height:e}=N;if(o>1e3||e>1e3)return null;const a=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),g=o+1;let h,k,G,f=new Uint8Array(g*(e+1));const j=o+7&-8;let Y=new Uint8Array(j*e),$=0;for(const E of N.data){let ee=128;for(;ee>0;)Y[$++]=E&ee?0:255,ee>>=1}let se=0;for($=0,0!==Y[$]&&(f[0]=1,++se),k=1;k<o;k++)Y[$]!==Y[$+1]&&(f[k]=Y[$]?2:1,++se),$++;for(0!==Y[$]&&(f[k]=2,++se),h=1;h<e;h++){$=h*j,G=h*g,Y[$-j]!==Y[$]&&(f[G]=Y[$]?1:8,++se);let E=(Y[$]?4:0)+(Y[$-j]?8:0);for(k=1;k<o;k++)E=(E>>2)+(Y[$+1]?4:0)+(Y[$-j+1]?8:0),a[E]&&(f[G+k]=a[E],++se),$++;if(Y[$-j]!==Y[$]&&(f[G+k]=Y[$]?2:4,++se),se>1e3)return null}for($=j*(e-1),G=h*g,0!==Y[$]&&(f[G]=8,++se),k=1;k<o;k++)Y[$]!==Y[$+1]&&(f[G+k]=Y[$]?4:8,++se),$++;if(0!==Y[$]&&(f[G+k]=4,++se),se>1e3)return null;const re=new Int32Array([0,g,-1,0,-g,0,0,0,1]);let fe,pe,ce;for(U.isNodeJS?pe=[]:fe=new Path2D,h=0;se&&h<=e;h++){let E=h*g;const ee=E+o;for(;E<ee&&!f[E];)E++;if(E===ee)continue;fe?fe.moveTo(E%g,h):ce=[E%g,h];const ne=E;let Z=f[E];do{const q=re[Z];do{E+=q}while(!f[E]);const te=f[E];5!==te&&10!==te?(Z=te,f[E]=0):(Z=te&51*Z>>4,f[E]&=Z>>2|Z<<2),fe?fe.lineTo(E%g,E/g|0):ce.push(E%g,E/g|0),f[E]||--se}while(ne!==E);fe||pe.push(ce),--h}return Y=null,f=null,function(E){if(E.save(),E.scale(1/o,-1/e),E.translate(0,-e),fe)E.fill(fe);else{E.beginPath();for(const ee of pe){E.moveTo(ee[0],ee[1]);for(let ne=2,Z=ee.length;ne<Z;ne+=2)E.lineTo(ee[ne],ee[ne+1])}E.fill()}E.beginPath(),E.restore()}}(o)),a.compiled))return void a.compiled(r);const g=this._createMaskCanvas(o),f=g.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(f,g.offsetX,g.offsetY),r.restore(),this.compose()}paintImageMaskXObjectRepeat(o,e,r=0,a=0,g,f){if(!this.contentVisible)return;o=this.getObject(o.data,o);const h=this.ctx;h.save();const k=h.mozCurrentTransform;h.transform(e,r,a,g,0,0);const G=this._createMaskCanvas(o);h.setTransform(1,0,0,1,0,0);for(let j=0,Y=f.length;j<Y;j+=2){const $=i.Util.transform(k,[e,r,a,g,f[j],f[j+1]]),[se,re]=i.Util.applyTransform([0,0],$);h.drawImage(G.canvas,se,re)}h.restore(),this.compose()}paintImageMaskXObjectGroup(o){if(!this.contentVisible)return;const e=this.ctx,r=this.current.fillColor,a=this.current.patternFill;for(let g=0,f=o.length;g<f;g++){const h=o[g],k=h.width,G=h.height,j=this.cachedCanvases.getCanvas("maskCanvas",k,G,!1),Y=j.context;Y.save(),p(Y,h),Y.globalCompositeOperation="source-in",Y.fillStyle=a?r.getPattern(Y,this,e.mozCurrentTransformInverse,P.PathType.FILL):r,Y.fillRect(0,0,k,G),Y.restore(),e.save(),e.transform.apply(e,h.transform),e.scale(1,-1),x(e,j.canvas,0,0,k,G,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(o){if(!this.contentVisible)return;const e=this.getObject(o);e?this.paintInlineImageXObject(e):(0,i.warn)("Dependent image isn't ready yet")}paintImageXObjectRepeat(o,e,r,a){if(!this.contentVisible)return;const g=this.getObject(o);if(!g)return void(0,i.warn)("Dependent image isn't ready yet");const f=g.width,h=g.height,k=[];for(let G=0,j=a.length;G<j;G+=2)k.push({transform:[e,0,0,r,a[G],a[G+1]],x:0,y:0,w:f,h});this.paintInlineImageXObjectGroup(g,k)}paintInlineImageXObject(o){if(!this.contentVisible)return;const e=o.width,r=o.height,a=this.ctx;let g;if(this.save(),a.scale(1/e,-1/r),"function"==typeof HTMLElement&&o instanceof HTMLElement||!o.data)g=o;else{const G=this.cachedCanvases.getCanvas("inlineImage",e,r,!1);u(G.context,o,this.current.transferMaps),g=G.canvas}const f=this._scaleImage(g,a.mozCurrentTransformInverse);a.imageSmoothingEnabled=z(a.mozCurrentTransform,o.interpolate);const[h,k]=x(a,f.img,0,0,f.paintWidth,f.paintHeight,0,-r,e,r);if(this.imageLayer){const G=this.getCanvasPosition(0,-r);this.imageLayer.appendImage({imgData:o,left:G[0],top:G[1],width:h,height:k})}this.compose(),this.restore()}paintInlineImageXObjectGroup(o,e){if(!this.contentVisible)return;const r=this.ctx,a=o.width,g=o.height,f=this.cachedCanvases.getCanvas("inlineImage",a,g,!1);u(f.context,o,this.current.transferMaps);for(let k=0,G=e.length;k<G;k++){const j=e[k];if(r.save(),r.transform.apply(r,j.transform),r.scale(1,-1),x(r,f.canvas,j.x,j.y,j.w,j.h,0,-1,1,1),this.imageLayer){const Y=this.getCanvasPosition(j.x,j.y);this.imageLayer.appendImage({imgData:o,left:Y[0],top:Y[1],width:a,height:g})}r.restore()}this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(o){}markPointProps(o,e){}beginMarkedContent(o){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(o,e){this.markedContentStack.push("OC"===o?{visible:this.optionalContentConfig.isVisible(e)}:{visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(o){const e=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(o);const r=this.ctx;this.pendingClip&&(e||(this.pendingClip===de?r.clip("evenodd"):r.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),r.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const o=this.ctx.mozCurrentTransform;if(0===o[1]&&0===o[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(o[0]),Math.abs(o[3]));else{const e=Math.abs(o[0]*o[3]-o[2]*o[1]),r=Math.hypot(o[0],o[2]),a=Math.hypot(o[1],o[3]);this._cachedGetSinglePixelWidth=Math.max(r,a)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:o}=this.current,e=this.ctx.mozCurrentTransform;let r,a;if(0===e[1]&&0===e[2]){const g=Math.abs(e[0]),f=Math.abs(e[3]);if(0===o)r=1/g,a=1/f;else{const h=g*o,k=f*o;r=h<1?1/h:1,a=k<1?1/k:1}}else{const g=Math.abs(e[0]*e[3]-e[2]*e[1]),f=Math.hypot(e[0],e[1]),h=Math.hypot(e[2],e[3]);if(0===o)r=h/g,a=f/g;else{const k=o*g;r=h>k?h/k:1,a=f>k?f/k:1}}this._cachedScaleForStroking=[r,a]}return this._cachedScaleForStroking}rescaleAndStroke(o){const{ctx:e}=this,{lineWidth:r}=this.current,[a,g]=this.getScaleForStroking();if(e.lineWidth=r||1,1===a&&1===g)return void e.stroke();let f,h,k;o&&(f=e.mozCurrentTransform.slice(),h=e.getLineDash().slice(),k=e.lineDashOffset),e.scale(a,g);const G=Math.max(a,g);e.setLineDash(e.getLineDash().map(j=>j/G)),e.lineDashOffset/=G,e.stroke(),o&&(e.setTransform(...f),e.setLineDash(h),e.lineDashOffset=k)}getCanvasPosition(o,e){const r=this.ctx.mozCurrentTransform;return[r[0]*o+r[2]*e+r[4],r[1]*o+r[3]*e+r[5]]}isContentVisible(){for(let o=this.markedContentStack.length-1;o>=0;o--)if(!this.markedContentStack[o].visible)return!1;return!0}}l.CanvasGraphics=he;for(const N in i.OPS)void 0!==he.prototype[N]&&(he.prototype[i.OPS[N]]=he.prototype[N])},(Q,l,S)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.TilingPattern=l.PathType=void 0,l.getShadingPattern=function D(M){switch(M[0]){case"RadialAxial":return new A(M);case"Mesh":return new I(M);case"Dummy":return new V}throw new Error(`Unknown IR type: ${M[0]}`)};var i=S(1),P=S(3);const T={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function U(M,v){if(!v||P.isNodeJS)return;const C=v[2]-v[0],L=v[3]-v[1],x=new Path2D;x.rect(v[0],v[1],C,L),M.clip(x)}l.PathType=T;class O{constructor(){this.constructor===O&&(0,i.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,i.unreachable)("Abstract method `getPattern` called.")}}class A extends O{constructor(v){super(),this._type=v[1],this._bbox=v[2],this._colorStops=v[3],this._p0=v[4],this._p1=v[5],this._r0=v[6],this._r1=v[7],this.matrix=null}_createGradient(v){let C;"axial"===this._type?C=v.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(C=v.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const L of this._colorStops)C.addColorStop(L[0],L[1]);return C}getPattern(v,C,L,x){let n;if(x===T.STROKE||x===T.FILL){const t=C.current.getClippedPathBoundingBox(x,v.mozCurrentTransform)||[0,0,0,0],u=Math.ceil(t[2]-t[0])||1,p=Math.ceil(t[3]-t[1])||1,c=C.cachedCanvases.getCanvas("pattern",u,p,!0),b=c.context;b.clearRect(0,0,b.canvas.width,b.canvas.height),b.beginPath(),b.rect(0,0,b.canvas.width,b.canvas.height),b.translate(-t[0],-t[1]),L=i.Util.transform(L,[1,0,0,1,t[0],t[1]]),b.transform.apply(b,C.baseTransform),this.matrix&&b.transform.apply(b,this.matrix),U(b,this._bbox),b.fillStyle=this._createGradient(b),b.fill(),n=v.createPattern(c.canvas,"no-repeat");const m=new DOMMatrix(L);try{n.setTransform(m)}catch(d){(0,i.warn)(`RadialAxialShadingPattern.getPattern: "${d?.message}".`)}}else U(v,this._bbox),n=this._createGradient(v);return n}}function _(M,v,C,L,x,n,t,u){const p=v.coords,c=v.colors,b=M.data,m=4*M.width;let d;p[C+1]>p[L+1]&&(d=C,C=L,L=d,d=n,n=t,t=d),p[L+1]>p[x+1]&&(d=L,L=x,x=d,d=t,t=u,u=d),p[C+1]>p[L+1]&&(d=C,C=L,L=d,d=n,n=t,t=d);const w=(p[C]+v.offsetX)*v.scaleX,F=(p[C+1]+v.offsetY)*v.scaleY,B=(p[L]+v.offsetX)*v.scaleX,z=(p[L+1]+v.offsetY)*v.scaleY,J=(p[x]+v.offsetX)*v.scaleX,X=(p[x+1]+v.offsetY)*v.scaleY;if(F>=X)return;const oe=c[n],de=c[n+1],he=c[n+2],N=c[t],o=c[t+1],e=c[t+2],r=c[u],a=c[u+1],g=c[u+2],f=Math.round(F),h=Math.round(X);let k,G,j,Y,$,se,re,fe;for(let pe=f;pe<=h;pe++){if(pe<z){let ne;ne=pe<F?0:(F-pe)/(F-z),k=w-(w-B)*ne,G=oe-(oe-N)*ne,j=de-(de-o)*ne,Y=he-(he-e)*ne}else{let ne;ne=pe>X?1:z===X?0:(z-pe)/(z-X),k=B-(B-J)*ne,G=N-(N-r)*ne,j=o-(o-a)*ne,Y=e-(e-g)*ne}let ce;ce=pe<F?0:pe>X?1:(F-pe)/(F-X),$=w-(w-J)*ce,se=oe-(oe-r)*ce,re=de-(de-a)*ce,fe=he-(he-g)*ce;const y=Math.round(Math.min(k,$)),E=Math.round(Math.max(k,$));let ee=m*pe+4*y;for(let ne=y;ne<=E;ne++)ce=(k-ne)/(k-$),ce<0?ce=0:ce>1&&(ce=1),b[ee++]=G-(G-se)*ce|0,b[ee++]=j-(j-re)*ce|0,b[ee++]=Y-(Y-fe)*ce|0,b[ee++]=255}}function R(M,v,C){const L=v.coords,x=v.colors;let n,t;switch(v.type){case"lattice":const u=v.verticesPerRow,p=Math.floor(L.length/u)-1,c=u-1;for(n=0;n<p;n++){let b=n*u;for(let m=0;m<c;m++,b++)_(M,C,L[b],L[b+1],L[b+u],x[b],x[b+1],x[b+u]),_(M,C,L[b+u+1],L[b+1],L[b+u],x[b+u+1],x[b+1],x[b+u])}break;case"triangles":for(n=0,t=L.length;n<t;n+=3)_(M,C,L[n],L[n+1],L[n+2],x[n],x[n+1],x[n+2]);break;default:throw new Error("illegal figure")}}class I extends O{constructor(v){super(),this._coords=v[2],this._colors=v[3],this._figures=v[4],this._bounds=v[5],this._bbox=v[7],this._background=v[8],this.matrix=null}_createMeshCanvas(v,C,L){const u=Math.floor(this._bounds[0]),p=Math.floor(this._bounds[1]),c=Math.ceil(this._bounds[2])-u,b=Math.ceil(this._bounds[3])-p,m=Math.min(Math.ceil(Math.abs(c*v[0]*1.1)),3e3),d=Math.min(Math.ceil(Math.abs(b*v[1]*1.1)),3e3),w=c/m,F=b/d,B={coords:this._coords,colors:this._colors,offsetX:-u,offsetY:-p,scaleX:1/w,scaleY:1/F},X=L.getCanvas("mesh",m+4,d+4,!1),oe=X.context,de=oe.createImageData(m,d);if(C){const N=de.data;for(let o=0,e=N.length;o<e;o+=4)N[o]=C[0],N[o+1]=C[1],N[o+2]=C[2],N[o+3]=255}for(const N of this._figures)R(de,N,B);return oe.putImageData(de,2,2),{canvas:X.canvas,offsetX:u-2*w,offsetY:p-2*F,scaleX:w,scaleY:F}}getPattern(v,C,L,x){let n;if(U(v,this._bbox),x===T.SHADING)n=i.Util.singularValueDecompose2dScale(v.mozCurrentTransform);else if(n=i.Util.singularValueDecompose2dScale(C.baseTransform),this.matrix){const u=i.Util.singularValueDecompose2dScale(this.matrix);n=[n[0]*u[0],n[1]*u[1]]}const t=this._createMeshCanvas(n,x===T.SHADING?null:this._background,C.cachedCanvases);return x!==T.SHADING&&(v.setTransform.apply(v,C.baseTransform),this.matrix&&v.transform.apply(v,this.matrix)),v.translate(t.offsetX,t.offsetY),v.scale(t.scaleX,t.scaleY),v.createPattern(t.canvas,"no-repeat")}}class V extends O{getPattern(){return"hotpink"}}class s{static get MAX_PATTERN_SIZE(){return(0,i.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(v,C,L,x,n){this.operatorList=v[2],this.matrix=v[3]||[1,0,0,1,0,0],this.bbox=v[4],this.xstep=v[5],this.ystep=v[6],this.paintType=v[7],this.tilingType=v[8],this.color=C,this.ctx=L,this.canvasGraphicsFactory=x,this.baseTransform=n}createPatternCanvas(v){const C=this.operatorList,L=this.bbox,x=this.xstep,n=this.ystep,t=this.paintType,p=this.color,c=this.canvasGraphicsFactory;(0,i.info)("TilingType: "+this.tilingType);const b=L[0],m=L[1],d=L[2],w=L[3],F=i.Util.singularValueDecompose2dScale(this.matrix),B=i.Util.singularValueDecompose2dScale(this.baseTransform),z=[F[0]*B[0],F[1]*B[1]],J=this.getSizeAndScale(x,this.ctx.canvas.width,z[0]),X=this.getSizeAndScale(n,this.ctx.canvas.height,z[1]),oe=v.cachedCanvases.getCanvas("pattern",J.size,X.size,!0),de=oe.context,he=c.createCanvasGraphics(de);he.groupLevel=v.groupLevel,this.setFillAndStrokeStyleToContext(he,t,p);let N=b,o=m,e=d,r=w;return b<0&&(N=0,e+=Math.abs(b)),m<0&&(o=0,r+=Math.abs(m)),de.translate(-J.scale*N,-X.scale*o),he.transform(J.scale,0,0,X.scale,0,0),de.save(),this.clipBbox(he,N,o,e,r),he.baseTransform=he.ctx.mozCurrentTransform.slice(),he.executeOperatorList(C),he.endDrawing(),{canvas:oe.canvas,scaleX:J.scale,scaleY:X.scale,offsetX:N,offsetY:o}}getSizeAndScale(v,C,L){v=Math.abs(v);const x=Math.max(s.MAX_PATTERN_SIZE,C);let n=Math.ceil(v*L);return n>=x?n=x:L=n/v,{scale:L,size:n}}clipBbox(v,C,L,x,n){v.ctx.rect(C,L,x-C,n-L),v.current.updateRectMinMax(v.ctx.mozCurrentTransform,[C,L,x,n]),v.clip(),v.endPath()}setFillAndStrokeStyleToContext(v,C,L){const x=v.ctx,n=v.current;switch(C){case 1:const t=this.ctx;x.fillStyle=t.fillStyle,x.strokeStyle=t.strokeStyle,n.fillColor=t.fillStyle,n.strokeColor=t.strokeStyle;break;case 2:const u=i.Util.makeHexColor(L[0],L[1],L[2]);x.fillStyle=u,x.strokeStyle=u,n.fillColor=u,n.strokeColor=u;break;default:throw new i.FormatError(`Unsupported paint type: ${C}`)}}getPattern(v,C,L,x){let n=L;x!==T.SHADING&&(n=i.Util.transform(n,C.baseTransform),this.matrix&&(n=i.Util.transform(n,this.matrix)));const t=this.createPatternCanvas(C);let u=new DOMMatrix(n);u=u.translate(t.offsetX,t.offsetY),u=u.scale(1/t.scaleX,1/t.scaleY);const p=v.createPattern(t.canvas,"repeat");try{p.setTransform(u)}catch(c){(0,i.warn)(`TilingPattern.getPattern: "${c?.message}".`)}return p}}l.TilingPattern=s},(Q,l,S)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.applyMaskImageData=function P({src:T,srcPos:U=0,dest:O,destPos:A=0,width:_,height:R,inverseDecode:I=!1}){const V=i.FeatureTest.isLittleEndian?4278190080:255,[D,W]=I?[0,V]:[V,0],s=_>>3,M=7&_,v=T.length;O=new Uint32Array(O.buffer);for(let C=0;C<R;C++){for(const x=U+s;U<x;U++){const n=U<v?T[U]:255;O[A++]=128&n?W:D,O[A++]=64&n?W:D,O[A++]=32&n?W:D,O[A++]=16&n?W:D,O[A++]=8&n?W:D,O[A++]=4&n?W:D,O[A++]=2&n?W:D,O[A++]=1&n?W:D}if(0===M)continue;const L=U<v?T[U++]:255;for(let x=0;x<M;x++)O[A++]=L&1<<7-x?W:D}return{srcPos:U,destPos:A}};var i=S(1)},(Q,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.GlobalWorkerOptions=void 0;const S=Object.create(null);l.GlobalWorkerOptions=S,S.workerPort=void 0===S.workerPort?null:S.workerPort,S.workerSrc=void 0===S.workerSrc?"":S.workerSrc},(Q,l,S)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.MessageHandler=void 0;var i=S(1);function U(A){switch(A instanceof Error||"object"==typeof A&&null!==A||(0,i.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),A.name){case"AbortException":return new i.AbortException(A.message);case"MissingPDFException":return new i.MissingPDFException(A.message);case"PasswordException":return new i.PasswordException(A.message,A.code);case"UnexpectedResponseException":return new i.UnexpectedResponseException(A.message,A.status);case"UnknownErrorException":return new i.UnknownErrorException(A.message,A.details);default:return new i.UnknownErrorException(A.message,A.toString())}}l.MessageHandler=class O{constructor(_,R,I){this.sourceName=_,this.targetName=R,this.comObj=I,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=V=>{const D=V.data;if(D.targetName!==this.sourceName)return;if(D.stream)return void this._processStreamMessage(D);if(D.callback){const s=D.callbackId,M=this.callbackCapabilities[s];if(!M)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],1===D.callback)M.resolve(D.data);else{if(2!==D.callback)throw new Error("Unexpected callback case");M.reject(U(D.reason))}return}const W=this.actionHandler[D.action];if(!W)throw new Error(`Unknown action from worker: ${D.action}`);if(D.callbackId){const s=this.sourceName,M=D.sourceName;new Promise(function(v){v(W(D.data))}).then(function(v){I.postMessage({sourceName:s,targetName:M,callback:1,callbackId:D.callbackId,data:v})},function(v){I.postMessage({sourceName:s,targetName:M,callback:2,callbackId:D.callbackId,reason:U(v)})})}else D.streamId?this._createStreamSink(D):W(D.data)},I.addEventListener("message",this._onComObjOnMessage)}on(_,R){const I=this.actionHandler;if(I[_])throw new Error(`There is already an actionName called "${_}"`);I[_]=R}send(_,R,I){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:_,data:R},I)}sendWithPromise(_,R,I){const V=this.callbackId++,D=(0,i.createPromiseCapability)();this.callbackCapabilities[V]=D;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:_,callbackId:V,data:R},I)}catch(W){D.reject(W)}return D.promise}sendWithStream(_,R,I,V){const D=this.streamId++,W=this.sourceName,s=this.targetName,M=this.comObj;return new ReadableStream({start:v=>{const C=(0,i.createPromiseCapability)();return this.streamControllers[D]={controller:v,startCall:C,pullCall:null,cancelCall:null,isClosed:!1},M.postMessage({sourceName:W,targetName:s,action:_,streamId:D,data:R,desiredSize:v.desiredSize},V),C.promise},pull:v=>{const C=(0,i.createPromiseCapability)();return this.streamControllers[D].pullCall=C,M.postMessage({sourceName:W,targetName:s,stream:6,streamId:D,desiredSize:v.desiredSize}),C.promise},cancel:v=>{(0,i.assert)(v instanceof Error,"cancel must have a valid reason");const C=(0,i.createPromiseCapability)();return this.streamControllers[D].cancelCall=C,this.streamControllers[D].isClosed=!0,M.postMessage({sourceName:W,targetName:s,stream:1,streamId:D,reason:U(v)}),C.promise}},I)}_createStreamSink(_){const R=_.streamId,I=this.sourceName,V=_.sourceName,D=this.comObj,W=this,s=this.actionHandler[_.action],M={enqueue(v,C=1,L){if(this.isCancelled)return;const x=this.desiredSize;this.desiredSize-=C,x>0&&this.desiredSize<=0&&(this.sinkCapability=(0,i.createPromiseCapability)(),this.ready=this.sinkCapability.promise),D.postMessage({sourceName:I,targetName:V,stream:4,streamId:R,chunk:v},L)},close(){this.isCancelled||(this.isCancelled=!0,D.postMessage({sourceName:I,targetName:V,stream:3,streamId:R}),delete W.streamSinks[R])},error(v){(0,i.assert)(v instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,D.postMessage({sourceName:I,targetName:V,stream:5,streamId:R,reason:U(v)}))},sinkCapability:(0,i.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:_.desiredSize,ready:null};M.sinkCapability.resolve(),M.ready=M.sinkCapability.promise,this.streamSinks[R]=M,new Promise(function(v){v(s(_.data,M))}).then(function(){D.postMessage({sourceName:I,targetName:V,stream:8,streamId:R,success:!0})},function(v){D.postMessage({sourceName:I,targetName:V,stream:8,streamId:R,reason:U(v)})})}_processStreamMessage(_){const R=_.streamId,I=this.sourceName,V=_.sourceName,D=this.comObj,W=this.streamControllers[R],s=this.streamSinks[R];switch(_.stream){case 8:_.success?W.startCall.resolve():W.startCall.reject(U(_.reason));break;case 7:_.success?W.pullCall.resolve():W.pullCall.reject(U(_.reason));break;case 6:if(!s){D.postMessage({sourceName:I,targetName:V,stream:7,streamId:R,success:!0});break}s.desiredSize<=0&&_.desiredSize>0&&s.sinkCapability.resolve(),s.desiredSize=_.desiredSize,new Promise(function(M){M(s.onPull&&s.onPull())}).then(function(){D.postMessage({sourceName:I,targetName:V,stream:7,streamId:R,success:!0})},function(M){D.postMessage({sourceName:I,targetName:V,stream:7,streamId:R,reason:U(M)})});break;case 4:if((0,i.assert)(W,"enqueue should have stream controller"),W.isClosed)break;W.controller.enqueue(_.chunk);break;case 3:if((0,i.assert)(W,"close should have stream controller"),W.isClosed)break;W.isClosed=!0,W.controller.close(),this._deleteStreamController(W,R);break;case 5:(0,i.assert)(W,"error should have stream controller"),W.controller.error(U(_.reason)),this._deleteStreamController(W,R);break;case 2:_.success?W.cancelCall.resolve():W.cancelCall.reject(U(_.reason)),this._deleteStreamController(W,R);break;case 1:if(!s)break;new Promise(function(M){M(s.onCancel&&s.onCancel(U(_.reason)))}).then(function(){D.postMessage({sourceName:I,targetName:V,stream:2,streamId:R,success:!0})},function(M){D.postMessage({sourceName:I,targetName:V,stream:2,streamId:R,reason:U(M)})}),s.sinkCapability.reject(U(_.reason)),s.isCancelled=!0,delete this.streamSinks[R];break;default:throw new Error("Unexpected stream case")}}_deleteStreamController(_,R){var I=this;return _asyncToGenerator(function*(){yield Promise.allSettled([_.startCall&&_.startCall.promise,_.pullCall&&_.pullCall.promise,_.cancelCall&&_.cancelCall.promise]),delete I.streamControllers[R]})()}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}},(Q,l,S)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.Metadata=void 0;var i=S(1),P=new WeakMap,T=new WeakMap;l.Metadata=class U{constructor({parsedData:A,rawData:_}){_classPrivateFieldInitSpec(this,P,void 0),_classPrivateFieldInitSpec(this,T,void 0),_classPrivateFieldSet(P,this,A),_classPrivateFieldSet(T,this,_)}getRaw(){return _classPrivateFieldGet(T,this)}get(A){return _classPrivateFieldGet(P,this).get(A)??null}getAll(){return(0,i.objectFromMap)(_classPrivateFieldGet(P,this))}has(A){return _classPrivateFieldGet(P,this).has(A)}}},(Q,l,S)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.OptionalContentConfig=void 0;var i=S(1);class P{constructor(O,A){this.visible=!0,this.name=O,this.intent=A}}l.OptionalContentConfig=class T{constructor(O){if(this.name=null,this.creator=null,this._order=null,this._groups=new Map,null!==O){this.name=O.name,this.creator=O.creator,this._order=O.order;for(const A of O.groups)this._groups.set(A.id,new P(A.name,A.intent));if("OFF"===O.baseState)for(const A of this._groups)A.visible=!1;for(const A of O.on)this._groups.get(A).visible=!0;for(const A of O.off)this._groups.get(A).visible=!1}}_evaluateVisibilityExpression(O){const A=O.length;if(A<2)return!0;const _=O[0];for(let R=1;R<A;R++){const I=O[R];let V;if(Array.isArray(I))V=this._evaluateVisibilityExpression(I);else{if(!this._groups.has(I))return(0,i.warn)(`Optional content group not found: ${I}`),!0;V=this._groups.get(I).visible}switch(_){case"And":if(!V)return!1;break;case"Or":if(V)return!0;break;case"Not":return!V;default:return!0}}return"And"===_}isVisible(O){if(0===this._groups.size)return!0;if(!O)return(0,i.warn)("Optional content group not defined."),!0;if("OCG"===O.type)return this._groups.has(O.id)?this._groups.get(O.id).visible:((0,i.warn)(`Optional content group not found: ${O.id}`),!0);if("OCMD"===O.type){if(O.expression)return this._evaluateVisibilityExpression(O.expression);if(!O.policy||"AnyOn"===O.policy){for(const A of O.ids){if(!this._groups.has(A))return(0,i.warn)(`Optional content group not found: ${A}`),!0;if(this._groups.get(A).visible)return!0}return!1}if("AllOn"===O.policy){for(const A of O.ids){if(!this._groups.has(A))return(0,i.warn)(`Optional content group not found: ${A}`),!0;if(!this._groups.get(A).visible)return!1}return!0}if("AnyOff"===O.policy){for(const A of O.ids){if(!this._groups.has(A))return(0,i.warn)(`Optional content group not found: ${A}`),!0;if(!this._groups.get(A).visible)return!0}return!1}if("AllOff"===O.policy){for(const A of O.ids){if(!this._groups.has(A))return(0,i.warn)(`Optional content group not found: ${A}`),!0;if(this._groups.get(A).visible)return!1}return!0}return(0,i.warn)(`Unknown optional content policy ${O.policy}.`),!0}return(0,i.warn)(`Unknown group type ${O.type}.`),!0}setVisibility(O,A=!0){this._groups.has(O)?this._groups.get(O).visible=!!A:(0,i.warn)(`Optional content group not found: ${O}`)}getOrder(){return this._groups.size?this._order?this._order.slice():Array.from(this._groups.keys()):null}getGroups(){return this._groups.size>0?(0,i.objectFromMap)(this._groups):null}getGroup(O){return this._groups.get(O)||null}}},(Q,l,S)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.PDFDataTransportStream=void 0;var i=S(1),P=S(5);l.PDFDataTransportStream=class T{constructor(_,R){(0,i.assert)(R,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=_.progressiveDone||!1,this._contentDispositionFilename=_.contentDispositionFilename||null;const I=_.initialData;if(I?.length>0){const V=new Uint8Array(I).buffer;this._queuedChunks.push(V)}this._pdfDataRangeTransport=R,this._isStreamingSupported=!_.disableStream,this._isRangeSupported=!_.disableRange,this._contentLength=_.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((V,D)=>{this._onReceiveData({begin:V,chunk:D})}),this._pdfDataRangeTransport.addProgressListener((V,D)=>{this._onProgress({loaded:V,total:D})}),this._pdfDataRangeTransport.addProgressiveReadListener(V=>{this._onReceiveData({chunk:V})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(_){const R=new Uint8Array(_.chunk).buffer;if(void 0===_.begin)this._fullRequestReader?this._fullRequestReader._enqueue(R):this._queuedChunks.push(R);else{const I=this._rangeReaders.some(function(V){return V._begin===_.begin&&(V._enqueue(R),!0)});(0,i.assert)(I,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(_){if(void 0===_.total){const R=this._rangeReaders[0];R?.onProgress&&R.onProgress({loaded:_.loaded})}else{const R=this._fullRequestReader;R?.onProgress&&R.onProgress({loaded:_.loaded,total:_.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(_){const R=this._rangeReaders.indexOf(_);R>=0&&this._rangeReaders.splice(R,1)}getFullReader(){(0,i.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const _=this._queuedChunks;return this._queuedChunks=null,new U(this,_,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(_,R){if(R<=this._progressiveDataLength)return null;const I=new O(this,_,R);return this._pdfDataRangeTransport.requestDataRange(_,R),this._rangeReaders.push(I),I}cancelAllRequests(_){this._fullRequestReader&&this._fullRequestReader.cancel(_);for(const R of this._rangeReaders.slice(0))R.cancel(_);this._pdfDataRangeTransport.abort()}};class U{constructor(_,R,I=!1,V=null){this._stream=_,this._done=I||!1,this._filename=(0,P.isPdfFile)(V)?V:null,this._queuedChunks=R||[],this._loaded=0;for(const D of this._queuedChunks)this._loaded+=D.byteLength;this._requests=[],this._headersReady=Promise.resolve(),_._fullRequestReader=this,this.onProgress=null}_enqueue(_){this._done||(this._requests.length>0?this._requests.shift().resolve({value:_,done:!1}):this._queuedChunks.push(_),this._loaded+=_.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}read(){var _=this;return _asyncToGenerator(function*(){if(_._queuedChunks.length>0)return{value:_._queuedChunks.shift(),done:!1};if(_._done)return{value:void 0,done:!0};const R=(0,i.createPromiseCapability)();return _._requests.push(R),R.promise})()}cancel(_){this._done=!0;for(const R of this._requests)R.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class O{constructor(_,R,I){this._stream=_,this._begin=R,this._end=I,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(_){if(!this._done){if(0===this._requests.length)this._queuedChunk=_;else{this._requests.shift().resolve({value:_,done:!1});for(const I of this._requests)I.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}read(){var _=this;return _asyncToGenerator(function*(){if(_._queuedChunk){const I=_._queuedChunk;return _._queuedChunk=null,{value:I,done:!1}}if(_._done)return{value:void 0,done:!0};const R=(0,i.createPromiseCapability)();return _._requests.push(R),R.promise})()}cancel(_){this._done=!0;for(const R of this._requests)R.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(Q,l)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.XfaText=void 0;class S{static textContent(P){const T=[],U={items:T,styles:Object.create(null)};return function O(A){if(!A)return;let _=null;const R=A.name;if("#text"===R)_=A.value;else{if(!S.shouldBuildText(R))return;A?.attributes?.textContent?_=A.attributes.textContent:A.value&&(_=A.value)}if(null!==_&&T.push({str:_}),A.children)for(const I of A.children)O(I)}(P),U}static shouldBuildText(P){return!("textarea"===P||"input"===P||"option"===P||"select"===P)}}l.XfaText=S},(Q,l,S)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.NodeStandardFontDataFactory=l.NodeCanvasFactory=l.NodeCMapReaderFactory=void 0;var i=S(6);const P=function(A){return new Promise((_,R)=>{__webpack_require__(23237).readFile(A,(V,D)=>{!V&&D?_(new Uint8Array(D)):R(new Error(V))})})};l.NodeCanvasFactory=class T extends i.BaseCanvasFactory{_createCanvas(_,R){return __webpack_require__(17640).createCanvas(_,R)}},l.NodeCMapReaderFactory=class U extends i.BaseCMapReaderFactory{_fetchData(_,R){return P(_).then(I=>({cMapData:I,compressionType:R}))}},l.NodeStandardFontDataFactory=class O extends i.BaseStandardFontDataFactory{_fetchData(_){return P(_)}}},(Q,l,S)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.AnnotationLayer=void 0;var i=S(1),P=S(5),T=S(8),U=S(21),O=S(22);const A=1e3,_=new WeakSet;function R(o){return{width:o[2]-o[0],height:o[3]-o[1]}}class I{static create(e){switch(e.data.annotationType){case i.AnnotationType.LINK:return new D(e);case i.AnnotationType.TEXT:return new W(e);case i.AnnotationType.WIDGET:switch(e.data.fieldType){case"Tx":return new M(e);case"Btn":return e.data.radioButton?new C(e):e.data.checkBox?new v(e):new L(e);case"Ch":return new x(e)}return new s(e);case i.AnnotationType.POPUP:return new n(e);case i.AnnotationType.FREETEXT:return new u(e);case i.AnnotationType.LINE:return new p(e);case i.AnnotationType.SQUARE:return new c(e);case i.AnnotationType.CIRCLE:return new b(e);case i.AnnotationType.POLYLINE:return new m(e);case i.AnnotationType.CARET:return new w(e);case i.AnnotationType.INK:return new F(e);case i.AnnotationType.POLYGON:return new d(e);case i.AnnotationType.HIGHLIGHT:return new B(e);case i.AnnotationType.UNDERLINE:return new z(e);case i.AnnotationType.SQUIGGLY:return new J(e);case i.AnnotationType.STRIKEOUT:return new X(e);case i.AnnotationType.STAMP:return new oe(e);case i.AnnotationType.FILEATTACHMENT:return new de(e);default:return new V(e)}}}class V{constructor(e,{isRenderable:r=!1,ignoreBorder:a=!1,createQuadrilaterals:g=!1}={}){this.isRenderable=r,this.data=e.data,this.layer=e.layer,this.page=e.page,this.viewport=e.viewport,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this._mouseState=e.mouseState,r&&(this.container=this._createContainer(a)),g&&(this.quadrilaterals=this._createQuadrilaterals(a))}_createContainer(e=!1){const r=this.data,a=this.page,g=this.viewport,f=document.createElement("section");let{width:h,height:k}=R(r.rect);f.setAttribute("data-annotation-id",r.id);const G=i.Util.normalizeRect([r.rect[0],a.view[3]-r.rect[1]+a.view[1],r.rect[2],a.view[3]-r.rect[3]+a.view[1]]);if(r.hasOwnCanvas){const j=g.transform.slice(),[Y,$]=i.Util.singularValueDecompose2dScale(j);h=Math.ceil(h*Y),k=Math.ceil(k*$),G[0]*=Y,G[1]*=$;for(let se=0;se<4;se++)j[se]=Math.sign(j[se]);f.style.transform=`matrix(${j.join(",")})`}else f.style.transform=`matrix(${g.transform.join(",")})`;if(f.style.transformOrigin=`${-G[0]}px ${-G[1]}px`,!e&&r.borderStyle.width>0){f.style.borderWidth=`${r.borderStyle.width}px`,r.borderStyle.style!==i.AnnotationBorderStyleType.UNDERLINE&&(h-=2*r.borderStyle.width,k-=2*r.borderStyle.width);const j=r.borderStyle.horizontalCornerRadius,Y=r.borderStyle.verticalCornerRadius;switch((j>0||Y>0)&&(f.style.borderRadius=`${j}px / ${Y}px`),r.borderStyle.style){case i.AnnotationBorderStyleType.SOLID:f.style.borderStyle="solid";break;case i.AnnotationBorderStyleType.DASHED:f.style.borderStyle="dashed";break;case i.AnnotationBorderStyleType.BEVELED:(0,i.warn)("Unimplemented border style: beveled");break;case i.AnnotationBorderStyleType.INSET:(0,i.warn)("Unimplemented border style: inset");break;case i.AnnotationBorderStyleType.UNDERLINE:f.style.borderBottomStyle="solid"}r.borderColor||r.color?f.style.borderColor=i.Util.makeHexColor(0|r.color[0],0|r.color[1],0|r.color[2]):f.style.borderWidth=0}return f.style.left=`${G[0]}px`,f.style.top=`${G[1]}px`,r.hasOwnCanvas?f.style.width=f.style.height="auto":(f.style.width=`${h}px`,f.style.height=`${k}px`),f}get _commonActions(){const e=(r,a,g)=>{const f=g.detail[r];g.target.style[a]=U.ColorConverters[`${f[0]}_HTML`](f.slice(1))};return(0,i.shadow)(this,"_commonActions",{display:r=>{const a=r.detail.display%2==1;r.target.style.visibility=a?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:a,print:0===r.detail.display||3===r.detail.display})},print:r=>{this.annotationStorage.setValue(this.data.id,{print:r.detail.print})},hidden:r=>{r.target.style.visibility=r.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:r.detail.hidden})},focus:r=>{setTimeout(()=>r.target.focus({preventScroll:!1}),0)},userName:r=>{r.target.title=r.detail.userName},readonly:r=>{r.detail.readonly?r.target.setAttribute("readonly",""):r.target.removeAttribute("readonly")},required:r=>{r.detail.required?r.target.setAttribute("required",""):r.target.removeAttribute("required")},bgColor:r=>{e("bgColor","backgroundColor",r)},fillColor:r=>{e("fillColor","backgroundColor",r)},fgColor:r=>{e("fgColor","color",r)},textColor:r=>{e("textColor","color",r)},borderColor:r=>{e("borderColor","borderColor",r)},strokeColor:r=>{e("strokeColor","borderColor",r)}})}_dispatchEventFromSandbox(e,r){const a=this._commonActions;for(const g of Object.keys(r.detail)){const f=e[g]||a[g];f&&f(r)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const r=this.annotationStorage.getRawValue(this.data.id);if(!r)return;const a=this._commonActions;for(const[g,f]of Object.entries(r)){const h=a[g];h&&(h({detail:f,target:e}),delete r[g])}}_createQuadrilaterals(e=!1){if(!this.data.quadPoints)return null;const r=[],a=this.data.rect;for(const g of this.data.quadPoints)this.data.rect=[g[2].x,g[2].y,g[1].x,g[1].y],r.push(this._createContainer(e));return this.data.rect=a,r}_createPopup(e,r){let a=this.container;this.quadrilaterals&&(e=e||this.quadrilaterals,a=this.quadrilaterals[0]),e||((e=document.createElement("div")).style.height=a.style.height,e.style.width=a.style.width,a.appendChild(e));const f=new t({container:a,trigger:e,color:r.color,titleObj:r.titleObj,modificationDate:r.modificationDate,contentsObj:r.contentsObj,richText:r.richText,hideWrapper:!0}).render();f.style.left=a.style.width,a.appendChild(f)}_renderQuadrilaterals(e){for(const r of this.quadrilaterals)r.className=e;return this.quadrilaterals}render(){(0,i.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,r=null){const a=[];if(this._fieldObjects){const g=this._fieldObjects[e];if(g)for(const{page:f,id:h,exportValues:k}of g){if(-1===f||h===r)continue;const G="string"==typeof k?k:null,j=document.getElementById(h);!j||_.has(j)?a.push({id:h,exportValue:G,domElement:j}):(0,i.warn)(`_getElementsByName - element not allowed: ${h}`)}return a}for(const g of document.getElementsByName(e)){const{id:f,exportValue:h}=g;f!==r&&_.has(g)&&a.push({id:f,exportValue:h,domElement:g})}return a}static get platform(){const e=typeof navigator<"u"?navigator.platform:"";return(0,i.shadow)(this,"platform",{isWin:e.includes("Win"),isMac:e.includes("Mac")})}}class D extends V{constructor(e,r=null){super(e,{isRenderable:!!(e.data.url||e.data.dest||e.data.action||e.data.isTooltipOnly||e.data.resetForm||e.data.actions&&(e.data.actions.Action||e.data.actions["Mouse Up"]||e.data.actions["Mouse Down"])),ignoreBorder:!!r?.ignoreBorder,createQuadrilaterals:!0})}render(){const{data:e,linkService:r}=this,a=document.createElement("a");if(e.url)r.addLinkAttributes(a,e.url,e.newWindow);else if(e.action)this._bindNamedAction(a,e.action);else if(e.dest)this._bindLink(a,e.dest);else{let g=!1;e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(g=!0,this._bindJSAction(a,e)),e.resetForm?this._bindResetFormAction(a,e.resetForm):g||this._bindLink(a,"")}return this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((g,f)=>{const h=0===f?a:a.cloneNode();return g.appendChild(h),g}):(this.container.className="linkAnnotation",this.container.appendChild(a),this.container)}_bindLink(e,r){e.href=this.linkService.getDestinationHash(r),e.onclick=()=>(r&&this.linkService.goToDestination(r),!1),(r||""===r)&&(e.className="internalLink")}_bindNamedAction(e,r){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(r),!1),e.className="internalLink"}_bindJSAction(e,r){e.href=this.linkService.getAnchorUrl("");const a=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const g of Object.keys(r.actions)){const f=a.get(g);f&&(e[f]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r.id,name:g}}),!1))}e.onclick||(e.onclick=()=>!1),e.className="internalLink"}_bindResetFormAction(e,r){const a=e.onclick;if(a||(e.href=this.linkService.getAnchorUrl("")),e.className="internalLink",!this._fieldObjects)return(0,i.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),void(a||(e.onclick=()=>!1));e.onclick=()=>{a&&a();const{fields:g,refs:f,include:h}=r,k=[];if(0!==g.length||0!==f.length){const Y=new Set(f);for(const $ of g){const se=this._fieldObjects[$]||[];for(const{id:re}of se)Y.add(re)}for(const $ of Object.values(this._fieldObjects))for(const se of $)Y.has(se.id)===h&&k.push(se)}else for(const Y of Object.values(this._fieldObjects))k.push(...Y);const G=this.annotationStorage,j=[];for(const Y of k){const{id:$}=Y;switch(j.push($),Y.type){case"text":case"combobox":case"listbox":G.setValue($,{value:Y.defaultValue||""});break;case"checkbox":case"radiobutton":G.setValue($,{value:Y.defaultValue===Y.exportValues});break;default:continue}const se=document.getElementById($);!se||!_.has(se)||se.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:j,name:"ResetForm"}}),!1}}}class W extends V{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str)})}render(){this.container.className="textAnnotation";const e=document.createElement("img");return e.style.height=this.container.style.height,e.style.width=this.container.style.width,e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.alt="[{{type}} Annotation]",e.dataset.l10nId="text_annotation_type",e.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(e,this.data),this.container.appendChild(e),this.container}}class s extends V{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(e){const{isWin:r,isMac:a}=V.platform;return r&&e.ctrlKey||a&&e.metaKey}_setEventListener(e,r,a,g){r.includes("mouse")?e.addEventListener(r,f=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:g(f),shift:f.shiftKey,modifier:this._getKeyModifier(f)}})}):e.addEventListener(r,f=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:g(f)}})})}_setEventListeners(e,r,a){for(const[g,f]of r)("Action"===f||this.data.actions?.[f])&&this._setEventListener(e,g,f,a)}_setBackgroundColor(e){const r=this.data.backgroundColor||null;e.style.backgroundColor=null===r?"transparent":i.Util.makeHexColor(r[0],r[1],r[2])}}class M extends s{constructor(e){super(e,{isRenderable:e.renderForms||!e.data.hasAppearance&&!!e.data.fieldValue})}setPropertyOnSiblings(e,r,a,g){const f=this.annotationStorage;for(const h of this._getElementsByName(e.name,e.id))h.domElement&&(h.domElement[r]=a),f.setValue(h.id,{[g]:a})}render(){const e=this.annotationStorage,r=this.data.id;this.container.className="textWidgetAnnotation";let a=null;if(this.renderForms){const g=e.getValue(r,{value:this.data.fieldValue}),f=g.formattedValue||g.value||"",h={userValue:null,formattedValue:null,valueOnFocus:""};this.data.multiLine?(a=document.createElement("textarea"),a.textContent=f):(a=document.createElement("input"),a.type="text",a.setAttribute("value",f)),_.add(a),a.disabled=this.data.readOnly,a.name=this.data.fieldName,a.tabIndex=A,h.userValue=f,a.setAttribute("id",r),a.addEventListener("input",G=>{e.setValue(r,{value:G.target.value}),this.setPropertyOnSiblings(a,"value",G.target.value,"value")}),a.addEventListener("resetform",G=>{a.value=h.userValue=this.data.defaultFieldValue??"",h.formattedValue=null});let k=G=>{const{formattedValue:j}=h;null!=j&&(G.target.value=j),G.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){a.addEventListener("focus",j=>{h.userValue&&(j.target.value=h.userValue),h.valueOnFocus=j.target.value}),a.addEventListener("updatefromsandbox",j=>{this._dispatchEventFromSandbox({value($){h.userValue=$.detail.value??"",e.setValue(r,{value:h.userValue.toString()}),$.target.value=h.userValue},formattedValue($){const{formattedValue:se}=$.detail;h.formattedValue=se,null!=se&&$.target!==document.activeElement&&($.target.value=se),e.setValue(r,{formattedValue:se})},selRange($){$.target.setSelectionRange(...$.detail.selRange)}},j)}),a.addEventListener("keydown",j=>{let Y=-1;if("Escape"===j.key?Y=0:"Enter"===j.key?Y=2:"Tab"===j.key&&(Y=3),-1===Y)return;const{value:$}=j.target;h.valueOnFocus!==$&&(h.userValue=$,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r,name:"Keystroke",value:$,willCommit:!0,commitKey:Y,selStart:j.target.selectionStart,selEnd:j.target.selectionEnd}}))});const G=k;k=null,a.addEventListener("blur",j=>{const{value:Y}=j.target;h.userValue=Y,this._mouseState.isDown&&h.valueOnFocus!==Y&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r,name:"Keystroke",value:Y,willCommit:!0,commitKey:1,selStart:j.target.selectionStart,selEnd:j.target.selectionEnd}}),G(j)}),this.data.actions?.Keystroke&&a.addEventListener("beforeinput",j=>{const{data:Y,target:$}=j,{value:se,selectionStart:re,selectionEnd:fe}=$;let pe=re,ce=fe;switch(j.inputType){case"deleteWordBackward":{const y=se.substring(0,re).match(/\w*[^\w]*$/);y&&(pe-=y[0].length);break}case"deleteWordForward":{const y=se.substring(re).match(/^[^\w]*\w*/);y&&(ce+=y[0].length);break}case"deleteContentBackward":re===fe&&(pe-=1);break;case"deleteContentForward":re===fe&&(ce+=1)}j.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r,name:"Keystroke",value:se,change:Y||"",willCommit:!1,selStart:pe,selEnd:ce}})}),this._setEventListeners(a,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],j=>j.target.value)}if(k&&a.addEventListener("blur",k),null!==this.data.maxLen&&(a.maxLength=this.data.maxLen),this.data.comb){const j=(this.data.rect[2]-this.data.rect[0])/this.data.maxLen;a.classList.add("comb"),a.style.letterSpacing=`calc(${j}px - 1ch)`}}else a=document.createElement("div"),a.textContent=this.data.fieldValue,a.style.verticalAlign="middle",a.style.display="table-cell";return this._setTextStyle(a),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.appendChild(a),this.container}_setTextStyle(e){const{fontSize:a,fontColor:g}=this.data.defaultAppearanceData,f=e.style;a&&(f.fontSize=`${a}px`),f.color=i.Util.makeHexColor(g[0],g[1],g[2]),null!==this.data.textAlignment&&(f.textAlign=["left","center","right"][this.data.textAlignment])}}class v extends s{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,r=this.data,a=r.id;let g=e.getValue(a,{value:r.exportValue===r.fieldValue}).value;"string"==typeof g&&(g="Off"!==g,e.setValue(a,{value:g})),this.container.className="buttonWidgetAnnotation checkBox";const f=document.createElement("input");return _.add(f),f.disabled=r.readOnly,f.type="checkbox",f.name=r.fieldName,g&&f.setAttribute("checked",!0),f.setAttribute("id",a),f.setAttribute("exportValue",r.exportValue),f.tabIndex=A,f.addEventListener("change",h=>{const{name:k,checked:G}=h.target;for(const j of this._getElementsByName(k,a)){const Y=G&&j.exportValue===r.exportValue;j.domElement&&(j.domElement.checked=Y),e.setValue(j.id,{value:Y})}e.setValue(a,{value:G})}),f.addEventListener("resetform",h=>{h.target.checked=(r.defaultFieldValue||"Off")===r.exportValue}),this.enableScripting&&this.hasJSActions&&(f.addEventListener("updatefromsandbox",h=>{this._dispatchEventFromSandbox({value(G){G.target.checked="Off"!==G.detail.value,e.setValue(a,{value:G.target.checked})}},h)}),this._setEventListeners(f,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],h=>h.target.checked)),this._setBackgroundColor(f),this._setDefaultPropertiesFromJS(f),this.container.appendChild(f),this.container}}class C extends s{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const e=this.annotationStorage,r=this.data,a=r.id;let g=e.getValue(a,{value:r.fieldValue===r.buttonValue}).value;"string"==typeof g&&(g=g!==r.buttonValue,e.setValue(a,{value:g}));const f=document.createElement("input");if(_.add(f),f.disabled=r.readOnly,f.type="radio",f.name=r.fieldName,g&&f.setAttribute("checked",!0),f.setAttribute("id",a),f.tabIndex=A,f.addEventListener("change",h=>{const{name:k,checked:G}=h.target;for(const j of this._getElementsByName(k,a))e.setValue(j.id,{value:!1});e.setValue(a,{value:G})}),f.addEventListener("resetform",h=>{const k=r.defaultFieldValue;h.target.checked=null!=k&&k===r.buttonValue}),this.enableScripting&&this.hasJSActions){const h=r.buttonValue;f.addEventListener("updatefromsandbox",k=>{this._dispatchEventFromSandbox({value:j=>{const Y=h===j.detail.value;for(const $ of this._getElementsByName(j.target.name)){const se=Y&&$.id===a;$.domElement&&($.domElement.checked=se),e.setValue($.id,{value:se})}}},k)}),this._setEventListeners(f,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],k=>k.target.checked)}return this._setBackgroundColor(f),this._setDefaultPropertiesFromJS(f),this.container.appendChild(f),this.container}}class L extends D{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();return e.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(e.title=this.data.alternativeText),this._setDefaultPropertiesFromJS(e),e}}class x extends s{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.className="choiceWidgetAnnotation";const e=this.annotationStorage,r=this.data.id,a=e.getValue(r,{value:this.data.fieldValue});let{fontSize:g}=this.data.defaultAppearanceData;g||(g=9);const f=`calc(${g}px * var(--zoom-factor))`,h=document.createElement("select");_.add(h),h.disabled=this.data.readOnly,h.name=this.data.fieldName,h.setAttribute("id",r),h.tabIndex=A,h.style.fontSize=`${g}px`,this.data.combo||(h.size=this.data.options.length,this.data.multiSelect&&(h.multiple=!0)),h.addEventListener("resetform",j=>{const Y=this.data.defaultFieldValue;for(const $ of h.options)$.selected=$.value===Y});for(const j of this.data.options){const Y=document.createElement("option");Y.textContent=j.displayValue,Y.value=j.exportValue,this.data.combo&&(Y.style.fontSize=f),a.value.includes(j.exportValue)&&Y.setAttribute("selected",!0),h.appendChild(Y)}const k=(j,Y)=>{const $=Y?"value":"textContent",se=j.target.options;return j.target.multiple?Array.prototype.filter.call(se,re=>re.selected).map(re=>re[$]):-1===se.selectedIndex?null:se[se.selectedIndex][$]},G=j=>Array.prototype.map.call(j.target.options,$=>({displayValue:$.textContent,exportValue:$.value}));return this.enableScripting&&this.hasJSActions?(h.addEventListener("updatefromsandbox",j=>{this._dispatchEventFromSandbox({value($){const se=$.detail.value,re=new Set(Array.isArray(se)?se:[se]);for(const fe of h.options)fe.selected=re.has(fe.value);e.setValue(r,{value:k($,!0)})},multipleSelection($){h.multiple=!0},remove($){const se=h.options,re=$.detail.remove;se[re].selected=!1,h.remove(re),se.length>0&&-1===Array.prototype.findIndex.call(se,pe=>pe.selected)&&(se[0].selected=!0),e.setValue(r,{value:k($,!0),items:G($)})},clear($){for(;0!==h.length;)h.remove(0);e.setValue(r,{value:null,items:[]})},insert($){const{index:se,displayValue:re,exportValue:fe}=$.detail.insert,pe=document.createElement("option");pe.textContent=re,pe.value=fe,h.insertBefore(pe,h.children[se]),e.setValue(r,{value:k($,!0),items:G($)})},items($){const{items:se}=$.detail;for(;0!==h.length;)h.remove(0);for(const re of se){const{displayValue:fe,exportValue:pe}=re,ce=document.createElement("option");ce.textContent=fe,ce.value=pe,h.appendChild(ce)}h.options.length>0&&(h.options[0].selected=!0),e.setValue(r,{value:k($,!0),items:G($)})},indices($){const se=new Set($.detail.indices);for(const re of $.target.options)re.selected=se.has(re.index);e.setValue(r,{value:k($,!0)})},editable($){$.target.disabled=!$.detail.editable}},j)}),h.addEventListener("input",j=>{const Y=k(j,!0),$=k(j,!1);e.setValue(r,{value:Y}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r,name:"Keystroke",value:$,changeEx:Y,willCommit:!0,commitKey:1,keyDown:!1}})}),this._setEventListeners(h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],j=>j.target.checked)):h.addEventListener("input",function(j){e.setValue(r,{value:k(j,!0)})}),this._setBackgroundColor(h),this._setDefaultPropertiesFromJS(h),this.container.appendChild(h),this.container}}class n extends V{constructor(e){super(e,{isRenderable:!!(e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str)})}render(){if(this.container.className="popupAnnotation",["Line","Square","Circle","PolyLine","Polygon","Ink"].includes(this.data.parentType))return this.container;const a=this.layer.querySelectorAll(`[data-annotation-id="${this.data.parentId}"]`);if(0===a.length)return this.container;const g=new t({container:this.container,trigger:Array.from(a),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),f=this.page,h=i.Util.normalizeRect([this.data.parentRect[0],f.view[3]-this.data.parentRect[1]+f.view[1],this.data.parentRect[2],f.view[3]-this.data.parentRect[3]+f.view[1]]),k=h[0]+this.data.parentRect[2]-this.data.parentRect[0],G=h[1];return this.container.style.transformOrigin=`${-k}px ${-G}px`,this.container.style.left=`${k}px`,this.container.style.top=`${G}px`,this.container.appendChild(g.render()),this.container}}class t{constructor(e){this.container=e.container,this.trigger=e.trigger,this.color=e.color,this.titleObj=e.titleObj,this.modificationDate=e.modificationDate,this.contentsObj=e.contentsObj,this.richText=e.richText,this.hideWrapper=e.hideWrapper||!1,this.pinned=!1}render(){const r=document.createElement("div");r.className="popupWrapper",this.hideElement=this.hideWrapper?r:this.container,this.hideElement.hidden=!0;const a=document.createElement("div");a.className="popup";const g=this.color;g&&(a.style.backgroundColor=i.Util.makeHexColor(0|.7*(255-g[0])+g[0],0|.7*(255-g[1])+g[1],0|.7*(255-g[2])+g[2]));const f=document.createElement("h1");f.dir=this.titleObj.dir,f.textContent=this.titleObj.str,a.appendChild(f);const h=P.PDFDateString.toDateObject(this.modificationDate);if(h){const k=document.createElement("span");k.className="popupDate",k.textContent="{{date}}, {{time}}",k.dataset.l10nId="annotation_date_string",k.dataset.l10nArgs=JSON.stringify({date:h.toLocaleDateString(),time:h.toLocaleTimeString()}),a.appendChild(k)}if(!this.richText?.str||this.contentsObj?.str&&this.contentsObj.str!==this.richText.str){const k=this._formatContents(this.contentsObj);a.appendChild(k)}else O.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:a}),a.lastChild.className="richText popupContent";Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const k of this.trigger)k.addEventListener("click",this._toggle.bind(this)),k.addEventListener("mouseover",this._show.bind(this,!1)),k.addEventListener("mouseout",this._hide.bind(this,!1));return a.addEventListener("click",this._hide.bind(this,!0)),r.appendChild(a),r}_formatContents({str:e,dir:r}){const a=document.createElement("p");a.className="popupContent",a.dir=r;const g=e.split(/(?:\r\n?|\n)/);for(let f=0,h=g.length;f<h;++f)a.appendChild(document.createTextNode(g[f])),f<h-1&&a.appendChild(document.createElement("br"));return a}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(e=!1){e&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex+=1)}_hide(e=!0){e&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex-=1)}}class u extends V{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0})}render(){return this.container.className="freeTextAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class p extends V{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const e=this.data,{width:r,height:a}=R(e.rect),g=this.svgFactory.create(r,a),f=this.svgFactory.createElement("svg:line");return f.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),f.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),f.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),f.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),f.setAttribute("stroke-width",e.borderStyle.width||1),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),g.appendChild(f),this.container.append(g),this._createPopup(f,e),this.container}}class c extends V{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const e=this.data,{width:r,height:a}=R(e.rect),g=this.svgFactory.create(r,a),f=e.borderStyle.width,h=this.svgFactory.createElement("svg:rect");return h.setAttribute("x",f/2),h.setAttribute("y",f/2),h.setAttribute("width",r-f),h.setAttribute("height",a-f),h.setAttribute("stroke-width",f||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),g.appendChild(h),this.container.append(g),this._createPopup(h,e),this.container}}class b extends V{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const e=this.data,{width:r,height:a}=R(e.rect),g=this.svgFactory.create(r,a),f=e.borderStyle.width,h=this.svgFactory.createElement("svg:ellipse");return h.setAttribute("cx",r/2),h.setAttribute("cy",a/2),h.setAttribute("rx",r/2-f/2),h.setAttribute("ry",a/2-f/2),h.setAttribute("stroke-width",f||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),g.appendChild(h),this.container.append(g),this._createPopup(h,e),this.container}}class m extends V{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const e=this.data,{width:r,height:a}=R(e.rect),g=this.svgFactory.create(r,a);let f=[];for(const k of e.vertices)f.push(k.x-e.rect[0]+","+(e.rect[3]-k.y));f=f.join(" ");const h=this.svgFactory.createElement(this.svgElementName);return h.setAttribute("points",f),h.setAttribute("stroke-width",e.borderStyle.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),g.appendChild(h),this.container.append(g),this._createPopup(h,e),this.container}}class d extends m{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class w extends V{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class F extends V{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const e=this.data,{width:r,height:a}=R(e.rect),g=this.svgFactory.create(r,a);for(const f of e.inkLists){let h=[];for(const G of f)h.push(`${G.x-e.rect[0]},${e.rect[3]-G.y}`);h=h.join(" ");const k=this.svgFactory.createElement(this.svgElementName);k.setAttribute("points",h),k.setAttribute("stroke-width",e.borderStyle.width||1),k.setAttribute("stroke","transparent"),k.setAttribute("fill","transparent"),this._createPopup(k,e),g.appendChild(k)}return this.container.append(g),this.container}}class B extends V{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}class z extends V{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}class J extends V{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}class X extends V{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}class oe extends V{constructor(e){super(e,{isRenderable:!!(e.data.hasPopup||e.data.titleObj?.str||e.data.contentsObj?.str||e.data.richText?.str),ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class de extends V{constructor(e){super(e,{isRenderable:!0});const{filename:r,content:a}=this.data.file;this.filename=(0,P.getFilenameFromUrl)(r),this.content=a,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,filename:r,content:a})}render(){this.container.className="fileAttachmentAnnotation";const e=document.createElement("div");return e.style.height=this.container.style.height,e.style.width=this.container.style.width,e.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&(this.data.titleObj?.str||this.data.contentsObj?.str||this.data.richText)&&this._createPopup(e,this.data),this.container.appendChild(e),this.container}_download(){this.downloadManager?.openOrDownloadData(this.container,this.content,this.filename)}}class he{static render(e){const r=[],a=[];for(const f of e.annotations){if(!f)continue;const{width:h,height:k}=R(f.rect);if(!(h<=0||k<=0)){if(f.annotationType===i.AnnotationType.POPUP){a.push(f);continue}r.push(f)}}a.length&&r.push(...a);const g=e.div;for(const f of r){const h=I.create({data:f,layer:g,page:e.page,viewport:e.viewport,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:!1!==e.renderForms,svgFactory:new P.DOMSVGFactory,annotationStorage:e.annotationStorage||new T.AnnotationStorage,enableScripting:e.enableScripting,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,mouseState:e.mouseState||{isDown:!1}});if(h.isRenderable){const k=h.render();if(f.hidden&&(k.style.visibility="hidden"),Array.isArray(k))for(const G of k)g.appendChild(G);else h instanceof n?g.prepend(k):g.appendChild(k)}}_assertClassBrand(he,this,N).call(this,g,e.annotationCanvasMap)}static update(e){const{page:r,viewport:a,annotations:g,annotationCanvasMap:f,div:h}=e,k=a.transform,G=`matrix(${k.join(",")})`;let j,Y;for(const $ of g){const se=h.querySelectorAll(`[data-annotation-id="${$.id}"]`);if(se)for(const re of se)if($.hasOwnCanvas){const fe=i.Util.normalizeRect([$.rect[0],r.view[3]-$.rect[1]+r.view[1],$.rect[2],r.view[3]-$.rect[3]+r.view[1]]);if(!Y){j=Math.abs(k[0]||k[1]);const y=k.slice();for(let E=0;E<4;E++)y[E]=Math.sign(y[E]);Y=`matrix(${y.join(",")})`}const pe=fe[0]*j,ce=fe[1]*j;re.style.left=`${pe}px`,re.style.top=`${ce}px`,re.style.transformOrigin=`${-pe}px ${-ce}px`,re.style.transform=Y}else re.style.transform=G}_assertClassBrand(he,this,N).call(this,h,f),h.hidden=!1}}function N(o,e){if(e){for(const[r,a]of e){const g=o.querySelector(`[data-annotation-id="${r}"]`);if(!g)continue;const{firstChild:f}=g;"CANVAS"===f.nodeName?g.replaceChild(a,f):g.insertBefore(a,f)}e.clear()}}l.AnnotationLayer=he},(Q,l)=>{function S(P){return Math.floor(255*Math.max(0,Math.min(1,P))).toString(16).padStart(2,"0")}Object.defineProperty(l,"__esModule",{value:!0}),l.ColorConverters=void 0,l.ColorConverters=class i{static CMYK_G([T,U,O,A]){return["G",1-Math.min(1,.3*T+.59*O+.11*U+A)]}static G_CMYK([T]){return["CMYK",0,0,0,1-T]}static G_RGB([T]){return["RGB",T,T,T]}static G_HTML([T]){const U=S(T);return`#${U}${U}${U}`}static RGB_G([T,U,O]){return["G",.3*T+.59*U+.11*O]}static RGB_HTML([T,U,O]){return`#${S(T)}${S(U)}${S(O)}`}static T_HTML(){return"#00000000"}static CMYK_RGB([T,U,O,A]){return["RGB",1-Math.min(1,T+A),1-Math.min(1,O+A),1-Math.min(1,U+A)]}static CMYK_HTML(T){return this.RGB_HTML(this.CMYK_RGB(T))}static RGB_CMYK([T,U,O]){const A=1-T,_=1-U,R=1-O;return["CMYK",A,_,R,Math.min(A,_,R)]}}},(Q,l,S)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.XfaLayer=void 0;var i=S(18);l.XfaLayer=class P{static setupStorage(U,O,A,_,R){const I=_.getValue(O,{value:null});switch(A.name){case"textarea":if(null!==I.value&&(U.textContent=I.value),"print"===R)break;U.addEventListener("input",V=>{_.setValue(O,{value:V.target.value})});break;case"input":if("radio"===A.attributes.type||"checkbox"===A.attributes.type){if(I.value===A.attributes.xfaOn?U.setAttribute("checked",!0):I.value===A.attributes.xfaOff&&U.removeAttribute("checked"),"print"===R)break;U.addEventListener("change",V=>{_.setValue(O,{value:V.target.getAttribute(V.target.checked?"xfaOn":"xfaOff")})})}else{if(null!==I.value&&U.setAttribute("value",I.value),"print"===R)break;U.addEventListener("input",V=>{_.setValue(O,{value:V.target.value})})}break;case"select":if(null!==I.value)for(const V of A.children)V.attributes.value===I.value&&(V.attributes.selected=!0);U.addEventListener("input",V=>{const D=V.target.options;_.setValue(O,{value:-1===D.selectedIndex?"":D[D.selectedIndex].value})})}}static setAttributes({html:U,element:O,storage:A=null,intent:_,linkService:R}){const{attributes:I}=O,V=U instanceof HTMLAnchorElement;"radio"===I.type&&(I.name=`${I.name}-${_}`);for(const[D,W]of Object.entries(I))if(null!=W&&"dataId"!==D)if("style"!==D)if("textContent"===D)U.textContent=W;else if("class"===D)W.length&&U.setAttribute(D,W.join(" "));else{if(V&&("href"===D||"newWindow"===D))continue;U.setAttribute(D,W)}else Object.assign(U.style,W);V&&R.addLinkAttributes(U,I.href,I.newWindow),A&&I.dataId&&this.setupStorage(U,I.dataId,O,A)}static render(U){const O=U.annotationStorage,A=U.linkService,_=U.xfaHtml,R=U.intent||"display",I=document.createElement(_.name);_.attributes&&this.setAttributes({html:I,element:_,intent:R,linkService:A});const V=[[_,-1,I]],D=U.div;if(D.appendChild(I),U.viewport){const s=`matrix(${U.viewport.transform.join(",")})`;D.style.transform=s}"richText"!==R&&D.setAttribute("class","xfaLayer xfaFont");const W=[];for(;V.length>0;){const[s,M,v]=V[V.length-1];if(M+1===s.children.length){V.pop();continue}const C=s.children[++V[V.length-1][1]];if(null===C)continue;const{name:L}=C;if("#text"===L){const n=document.createTextNode(C.value);W.push(n),v.appendChild(n);continue}let x;if(x=C?.attributes?.xmlns?document.createElementNS(C.attributes.xmlns,L):document.createElement(L),v.appendChild(x),C.attributes&&this.setAttributes({html:x,element:C,storage:O,intent:R,linkService:A}),C.children&&C.children.length>0)V.push([C,-1,x]);else if(C.value){const n=document.createTextNode(C.value);i.XfaText.shouldBuildText(L)&&W.push(n),x.appendChild(n)}}for(const s of D.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))s.setAttribute("readOnly",!0);return{textDivs:W}}static update(U){const O=`matrix(${U.viewport.transform.join(",")})`;U.div.style.transform=O,U.div.hidden=!1}}},(Q,l,S)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.renderTextLayer=function v(C){const L=new M({textContent:C.textContent,textContentStream:C.textContentStream,container:C.container,viewport:C.viewport,textDivs:C.textDivs,textContentItemsStr:C.textContentItemsStr,enhanceTextSelection:C.enhanceTextSelection});return L._render(C.timeout),L};var i=S(1);const T=30,O=new Map,A=/^\s+$/g;function R(C,L,x,n){const t=document.createElement("span"),u=C._enhanceTextSelection?{angle:0,canvasWidth:0,hasText:""!==L.str,hasEOL:L.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1}:{angle:0,canvasWidth:0,hasText:""!==L.str,hasEOL:L.hasEOL};C._textDivs.push(t);const p=i.Util.transform(C._viewport.transform,L.transform);let c=Math.atan2(p[1],p[0]);const b=x[L.fontName];b.vertical&&(c+=Math.PI/2);const m=Math.hypot(p[2],p[3]),d=m*function _(C,L){const x=O.get(C);if(x)return x;L.save(),L.font=`30px ${C}`;const n=L.measureText("");let t=n.fontBoundingBoxAscent,u=Math.abs(n.fontBoundingBoxDescent);if(t){L.restore();const c=t/(t+u);return O.set(C,c),c}L.strokeStyle="red",L.clearRect(0,0,T,T),L.strokeText("g",0,0);let p=L.getImageData(0,0,T,T).data;u=0;for(let c=p.length-1-3;c>=0;c-=4)if(p[c]>0){u=Math.ceil(c/4/T);break}L.clearRect(0,0,T,T),L.strokeText("A",0,T),p=L.getImageData(0,0,T,T).data,t=0;for(let c=0,b=p.length;c<b;c+=4)if(p[c]>0){t=T-Math.floor(c/4/T);break}if(L.restore(),t){const c=t/(t+u);return O.set(C,c),c}return O.set(C,.8),.8}(b.fontFamily,n);let w,F;0===c?(w=p[4],F=p[5]-d):(w=p[4]+d*Math.sin(c),F=p[5]-d*Math.cos(c)),t.style.left=`${w}px`,t.style.top=`${F}px`,t.style.fontSize=`${m}px`,t.style.fontFamily=b.fontFamily,t.setAttribute("role","presentation"),t.textContent=L.str,t.dir=L.dir,C._fontInspectorEnabled&&(t.dataset.fontName=L.fontName),0!==c&&(u.angle=c*(180/Math.PI));let B=!1;if(L.str.length>1||C._enhanceTextSelection&&A.test(L.str))B=!0;else if(" "!==L.str&&L.transform[0]!==L.transform[3]){const z=Math.abs(L.transform[0]),J=Math.abs(L.transform[3]);z!==J&&Math.max(z,J)/Math.min(z,J)>1.5&&(B=!0)}if(B&&(u.canvasWidth=b.vertical?L.height*C._viewport.scale:L.width*C._viewport.scale),C._textDivProperties.set(t,u),C._textContentStream&&C._layoutText(t),C._enhanceTextSelection&&u.hasText){let z=1,J=0;0!==c&&(z=Math.cos(c),J=Math.sin(c));const X=(b.vertical?L.height:L.width)*C._viewport.scale,oe=m;let de,he;0!==c?(de=[z,J,-J,z,w,F],he=i.Util.getAxialAlignedBoundingBox([0,0,X,oe],de)):he=[w,F,w+X,F+oe],C._bounds.push({left:he[0],top:he[1],right:he[2],bottom:he[3],div:t,size:[X,oe],m:de})}}function I(C){if(C._canceled)return;const L=C._textDivs,x=C._capability,n=L.length;if(n>1e5)return C._renderingDone=!0,void x.resolve();if(!C._textContentStream)for(let t=0;t<n;t++)C._layoutText(L[t]);C._renderingDone=!0,x.resolve()}function V(C,L,x){let n=0;for(let t=0;t<x;t++){const u=C[L++];u>0&&(n=n?Math.min(u,n):u)}return n}function s(C,L){L.sort(function(t,u){return t.x1-u.x1||t.index-u.index});const n=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];for(const t of L){let u=0;for(;u<n.length&&n[u].end<=t.y1;)u++;let p=n.length-1;for(;p>=0&&n[p].start>=t.y2;)p--;let c,b,m,d,w=-1/0;for(m=u;m<=p;m++){let z;c=n[m],b=c.boundary,z=b.x2>t.x1?b.index>t.index?b.x1New:t.x1:void 0===b.x2New?(b.x2+t.x1)/2:b.x2New,z>w&&(w=z)}for(t.x1New=w,m=u;m<=p;m++)c=n[m],b=c.boundary,void 0===b.x2New?b.x2>t.x1?b.index>t.index&&(b.x2New=b.x2):b.x2New=w:b.x2New>w&&(b.x2New=Math.max(w,b.x2));const F=[];let B=null;for(m=u;m<=p;m++){c=n[m],b=c.boundary;const z=b.x2>t.x2?b:t;B===z?F[F.length-1].end=c.end:(F.push({start:c.start,end:c.end,boundary:z}),B=z)}for(n[u].start<t.y1&&(F[0].start=t.y1,F.unshift({start:n[u].start,end:t.y1,boundary:n[u].boundary})),t.y2<n[p].end&&(F[F.length-1].end=t.y2,F.push({start:t.y2,end:n[p].end,boundary:n[p].boundary})),m=u;m<=p;m++){if(c=n[m],b=c.boundary,void 0!==b.x2New)continue;let z=!1;for(d=u-1;!z&&d>=0&&n[d].start>=b.y1;d--)z=n[d].boundary===b;for(d=p+1;!z&&d<n.length&&n[d].end<=b.y2;d++)z=n[d].boundary===b;for(d=0;!z&&d<F.length;d++)z=F[d].boundary===b;z||(b.x2New=w)}Array.prototype.splice.apply(n,[u,p-u+1].concat(F))}for(const t of n){const u=t.boundary;void 0===u.x2New&&(u.x2New=Math.max(C,u.x2))}}class M{constructor({textContent:L,textContentStream:x,container:n,viewport:t,textDivs:u,textContentItemsStr:p,enhanceTextSelection:c}){this._textContent=L,this._textContentStream=x,this._container=n,this._document=n.ownerDocument,this._viewport=t,this._textDivs=u||[],this._textContentItemsStr=p||[],this._enhanceTextSelection=!!c,this._fontInspectorEnabled=!!globalThis.FontInspector?.enabled,this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,i.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._capability.promise.finally(()=>{this._enhanceTextSelection||(this._textDivProperties=null),this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new i.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),null!==this._renderTimer&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}_processItems(L,x){for(let n=0,t=L.length;n<t;n++)if(void 0!==L[n].str)this._textContentItemsStr.push(L[n].str),R(this,L[n],x,this._layoutTextCtx);else if("beginMarkedContentProps"===L[n].type||"beginMarkedContent"===L[n].type){const u=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),null!==L[n].id&&this._container.setAttribute("id",`${L[n].id}`),u.appendChild(this._container)}else"endMarkedContent"===L[n].type&&(this._container=this._container.parentNode)}_layoutText(L){const x=this._textDivProperties.get(L);let n="";if(0!==x.canvasWidth&&x.hasText){const{fontSize:t,fontFamily:u}=L.style;(t!==this._layoutTextLastFontSize||u!==this._layoutTextLastFontFamily)&&(this._layoutTextCtx.font=`${t} ${u}`,this._layoutTextLastFontSize=t,this._layoutTextLastFontFamily=u);const{width:p}=this._layoutTextCtx.measureText(L.textContent);if(p>0){const c=x.canvasWidth/p;this._enhanceTextSelection&&(x.scale=c),n=`scaleX(${c})`}}if(0!==x.angle&&(n=`rotate(${x.angle}deg) ${n}`),n.length>0&&(this._enhanceTextSelection&&(x.originalTransform=n),L.style.transform=n),x.hasText&&this._container.appendChild(L),x.hasEOL){const t=document.createElement("br");t.setAttribute("role","presentation"),this._container.appendChild(t)}}_render(L=0){const x=(0,i.createPromiseCapability)();let n=Object.create(null);const t=this._document.createElement("canvas");if(t.height=t.width=T,this._layoutTextCtx=t.getContext("2d",{alpha:!1}),this._textContent)this._processItems(this._textContent.items,this._textContent.styles),x.resolve();else{if(!this._textContentStream)throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');{const u=()=>{this._reader.read().then(({value:p,done:c})=>{c?x.resolve():(Object.assign(n,p.styles),this._processItems(p.items,n),u())},x.reject)};this._reader=this._textContentStream.getReader(),u()}}x.promise.then(()=>{n=null,L?this._renderTimer=setTimeout(()=>{I(this),this._renderTimer=null},L):I(this)},this._capability.reject)}expandTextDivs(L=!1){if(!this._enhanceTextSelection||!this._renderingDone)return;null!==this._bounds&&(function D(C){const L=C._bounds,x=C._viewport,n=function W(C,L,x){const n=x.map(function(u,p){return{x1:u.left,y1:u.top,x2:u.right,y2:u.bottom,index:p,x1New:void 0,x2New:void 0}});s(C,n);const t=new Array(x.length);for(const u of n)t[u.index]={left:u.x1New,top:0,right:u.x2New,bottom:0};x.map(function(u,p){const c=t[p],b=n[p];b.x1=u.top,b.y1=C-c.right,b.x2=u.bottom,b.y2=C-c.left,b.index=p,b.x1New=void 0,b.x2New=void 0}),s(L,n);for(const u of n){const p=u.index;t[p].top=u.x1New,t[p].bottom=u.x2New}return t}(x.width,x.height,L);for(let t=0;t<n.length;t++){const u=L[t].div,p=C._textDivProperties.get(u);if(0===p.angle){p.paddingLeft=L[t].left-n[t].left,p.paddingTop=L[t].top-n[t].top,p.paddingRight=n[t].right-L[t].right,p.paddingBottom=n[t].bottom-L[t].bottom,C._textDivProperties.set(u,p);continue}const c=n[t],b=L[t],m=b.m,d=m[0],w=m[1],F=[[0,0],[0,b.size[1]],[b.size[0],0],b.size],B=new Float64Array(64);for(let J=0,X=F.length;J<X;J++){const oe=i.Util.applyTransform(F[J],m);B[J+0]=d&&(c.left-oe[0])/d,B[J+4]=w&&(c.top-oe[1])/w,B[J+8]=d&&(c.right-oe[0])/d,B[J+12]=w&&(c.bottom-oe[1])/w,B[J+16]=w&&(c.left-oe[0])/-w,B[J+20]=d&&(c.top-oe[1])/d,B[J+24]=w&&(c.right-oe[0])/-w,B[J+28]=d&&(c.bottom-oe[1])/d,B[J+32]=d&&(c.left-oe[0])/-d,B[J+36]=w&&(c.top-oe[1])/-w,B[J+40]=d&&(c.right-oe[0])/-d,B[J+44]=w&&(c.bottom-oe[1])/-w,B[J+48]=w&&(c.left-oe[0])/w,B[J+52]=d&&(c.top-oe[1])/-d,B[J+56]=w&&(c.right-oe[0])/w,B[J+60]=d&&(c.bottom-oe[1])/-d}const z=1+Math.min(Math.abs(d),Math.abs(w));p.paddingLeft=V(B,32,16)/z,p.paddingTop=V(B,48,16)/z,p.paddingRight=V(B,0,16)/z,p.paddingBottom=V(B,16,16)/z,C._textDivProperties.set(u,p)}}(this),this._bounds=null);const x=[],n=[];for(let t=0,u=this._textDivs.length;t<u;t++){const p=this._textDivs[t],c=this._textDivProperties.get(p);c.hasText&&(L?(x.length=0,n.length=0,c.originalTransform&&x.push(c.originalTransform),c.paddingTop>0?(n.push(`${c.paddingTop}px`),x.push(`translateY(${-c.paddingTop}px)`)):n.push(0),n.push(c.paddingRight>0?c.paddingRight/c.scale+"px":0),n.push(c.paddingBottom>0?`${c.paddingBottom}px`:0),c.paddingLeft>0?(n.push(c.paddingLeft/c.scale+"px"),x.push(`translateX(${-c.paddingLeft/c.scale}px)`)):n.push(0),p.style.padding=n.join(" "),x.length&&(p.style.transform=x.join(" "))):(p.style.padding=null,p.style.transform=c.originalTransform))}}}},(Q,l,S)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.SVGGraphics=void 0;var i=S(1),P=S(5),T=S(3);let U=class{constructor(){(0,i.unreachable)("Not implemented: SVGGraphics")}};l.SVGGraphics=U;{let s=function(n){let t=[];const u=[];for(const p of n)"save"!==p.fn?"restore"===p.fn?t=u.pop():t.push(p):(t.push({fnId:92,fn:"group",items:[]}),u.push(t),t=t[t.length-1].items);return t},M=function(n){if(Number.isInteger(n))return n.toString();const t=n.toFixed(10);let u=t.length-1;if("0"!==t[u])return t;do{u--}while("0"===t[u]);return t.substring(0,"."===t[u]?u:u+1)},v=function(n){if(0===n[4]&&0===n[5]){if(0===n[1]&&0===n[2])return 1===n[0]&&1===n[3]?"":`scale(${M(n[0])} ${M(n[3])})`;if(n[0]===n[3]&&n[1]===-n[2]){const t=180*Math.acos(n[0])/Math.PI;return`rotate(${M(t)})`}}else if(1===n[0]&&0===n[1]&&0===n[2]&&1===n[3])return`translate(${M(n[4])} ${M(n[5])})`;return`matrix(${M(n[0])} ${M(n[1])} ${M(n[2])} ${M(n[3])} ${M(n[4])} ${M(n[5])})`};const O={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},A="http://www.w3.org/XML/1998/namespace",_="http://www.w3.org/1999/xlink",R=["butt","round","square"],I=["miter","round","bevel"],V=function(n,t="",u=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!u)return URL.createObjectURL(new Blob([n],{type:t}));const p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let c=`data:${t};base64,`;for(let b=0,m=n.length;b<m;b+=3){const d=255&n[b],w=255&n[b+1],F=255&n[b+2];c+=p[d>>2]+p[(3&d)<<4|w>>4]+p[b+1<m?(15&w)<<2|F>>6:64]+p[b+2<m?63&F:64]}return c},D=function(){const n=new Uint8Array([137,80,78,71,13,10,26,10]),u=new Int32Array(256);for(let F=0;F<256;F++){let B=F;for(let z=0;z<8;z++)B=1&B?3988292384^B>>1&2147483647:B>>1&2147483647;u[F]=B}function c(F,B,z,J){let X=J;const oe=B.length;z[X]=oe>>24&255,z[X+1]=oe>>16&255,z[X+2]=oe>>8&255,z[X+3]=255&oe,X+=4,z[X]=255&F.charCodeAt(0),z[X+1]=255&F.charCodeAt(1),z[X+2]=255&F.charCodeAt(2),z[X+3]=255&F.charCodeAt(3),X+=4,z.set(B,X),X+=B.length;const de=function p(F,B,z){let J=-1;for(let X=B;X<z;X++)J=J>>>8^u[255&(J^F[X])];return~J}(z,J+4,X);z[X]=de>>24&255,z[X+1]=de>>16&255,z[X+2]=de>>8&255,z[X+3]=255&de}function d(F){let B=F.length;const z=65535,J=Math.ceil(B/z),X=new Uint8Array(2+B+5*J+4);let oe=0;X[oe++]=120,X[oe++]=156;let de=0;for(;B>z;)X[oe++]=0,X[oe++]=255,X[oe++]=255,X[oe++]=0,X[oe++]=0,X.set(F.subarray(de,de+z),oe),oe+=z,de+=z,B-=z;X[oe++]=1,X[oe++]=255&B,X[oe++]=B>>8&255,X[oe++]=255&~B,X[oe++]=(65535&~B)>>8&255,X.set(F.subarray(de),oe),oe+=F.length-de;const he=function b(F,B,z){let J=1,X=0;for(let oe=B;oe<z;++oe)J=(J+(255&F[oe]))%65521,X=(X+J)%65521;return X<<16|J}(F,0,F.length);return X[oe++]=he>>24&255,X[oe++]=he>>16&255,X[oe++]=he>>8&255,X[oe++]=255&he,X}return function(B,z,J){return function w(F,B,z,J){const X=F.width,oe=F.height;let de,he,N;const o=F.data;switch(B){case i.ImageKind.GRAYSCALE_1BPP:he=0,de=1,N=X+7>>3;break;case i.ImageKind.RGB_24BPP:he=2,de=8,N=3*X;break;case i.ImageKind.RGBA_32BPP:he=6,de=8,N=4*X;break;default:throw new Error("invalid format")}const e=new Uint8Array((1+N)*oe);let r=0,a=0;for(let j=0;j<oe;++j)e[r++]=0,e.set(o.subarray(a,a+N),r),a+=N,r+=N;if(B===i.ImageKind.GRAYSCALE_1BPP&&J){r=0;for(let j=0;j<oe;j++){r++;for(let Y=0;Y<N;Y++)e[r++]^=255}}const g=new Uint8Array([X>>24&255,X>>16&255,X>>8&255,255&X,oe>>24&255,oe>>16&255,oe>>8&255,255&oe,de,he,0,0,0]),f=function m(F){if(!T.isNodeJS)return d(F);try{let B;B=parseInt(process.versions.node)>=8?F:Buffer.from(F);const z=__webpack_require__(82787).deflateSync(B,{level:9});return z instanceof Uint8Array?z:new Uint8Array(z)}catch(B){(0,i.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+B)}return d(F)}(e),k=new Uint8Array(n.length+36+g.length+f.length);let G=0;return k.set(n,G),G+=n.length,c("IHDR",g,k,G),G+=12+g.length,c("IDATA",f,k,G),G+=12+f.length,c("IEND",new Uint8Array(0),k,G),V(k,"image/png",z)}(B,void 0===B.kind?i.ImageKind.GRAYSCALE_1BPP:B.kind,z,J)}}();class W{constructor(){this.fontSizeScale=1,this.fontWeight=O.fontWeight,this.fontSize=0,this.textMatrix=i.IDENTITY_MATRIX,this.fontMatrix=i.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=i.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=O.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(t,u){this.x=t,this.y=u}}let C=0,L=0,x=0;l.SVGGraphics=U=class{constructor(n,t,u=!1){this.svgFactory=new P.DOMSVGFactory,this.current=new W,this.transformMatrix=i.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=n,this.objs=t,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!u,this._operatorIdMapping=[];for(const p in i.OPS)this._operatorIdMapping[i.OPS[p]]=p}save(){this.transformStack.push(this.transformMatrix);const n=this.current;this.extraStack.push(n),this.current=n.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(n){this.save(),this.executeOpTree(n),this.restore()}loadDependencies(n){const t=n.fnArray,u=n.argsArray;for(let p=0,c=t.length;p<c;p++)if(t[p]===i.OPS.dependency)for(const b of u[p]){const m=b.startsWith("g_")?this.commonObjs:this.objs,d=new Promise(w=>{m.get(b,w)});this.current.dependencies.push(d)}return Promise.all(this.current.dependencies)}transform(n,t,u,p,c,b){this.transformMatrix=i.Util.transform(this.transformMatrix,[n,t,u,p,c,b]),this.tgrp=null}getSVG(n,t){this.viewport=t;const u=this._initialize(t);return this.loadDependencies(n).then(()=>(this.transformMatrix=i.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(n)),u))}convertOpList(n){const t=this._operatorIdMapping,u=n.argsArray,p=n.fnArray,c=[];for(let b=0,m=p.length;b<m;b++){const d=p[b];c.push({fnId:d,fn:t[d],args:u[b]})}return s(c)}executeOpTree(n){for(const t of n){const u=t.fn,c=t.args;switch(0|t.fnId){case i.OPS.beginText:this.beginText();break;case i.OPS.dependency:break;case i.OPS.setLeading:this.setLeading(c);break;case i.OPS.setLeadingMoveText:this.setLeadingMoveText(c[0],c[1]);break;case i.OPS.setFont:this.setFont(c);break;case i.OPS.showText:case i.OPS.showSpacedText:this.showText(c[0]);break;case i.OPS.endText:this.endText();break;case i.OPS.moveText:this.moveText(c[0],c[1]);break;case i.OPS.setCharSpacing:this.setCharSpacing(c[0]);break;case i.OPS.setWordSpacing:this.setWordSpacing(c[0]);break;case i.OPS.setHScale:this.setHScale(c[0]);break;case i.OPS.setTextMatrix:this.setTextMatrix(c[0],c[1],c[2],c[3],c[4],c[5]);break;case i.OPS.setTextRise:this.setTextRise(c[0]);break;case i.OPS.setTextRenderingMode:this.setTextRenderingMode(c[0]);break;case i.OPS.setLineWidth:this.setLineWidth(c[0]);break;case i.OPS.setLineJoin:this.setLineJoin(c[0]);break;case i.OPS.setLineCap:this.setLineCap(c[0]);break;case i.OPS.setMiterLimit:this.setMiterLimit(c[0]);break;case i.OPS.setFillRGBColor:this.setFillRGBColor(c[0],c[1],c[2]);break;case i.OPS.setStrokeRGBColor:this.setStrokeRGBColor(c[0],c[1],c[2]);break;case i.OPS.setStrokeColorN:this.setStrokeColorN(c);break;case i.OPS.setFillColorN:this.setFillColorN(c);break;case i.OPS.shadingFill:this.shadingFill(c[0]);break;case i.OPS.setDash:this.setDash(c[0],c[1]);break;case i.OPS.setRenderingIntent:this.setRenderingIntent(c[0]);break;case i.OPS.setFlatness:this.setFlatness(c[0]);break;case i.OPS.setGState:this.setGState(c[0]);break;case i.OPS.fill:this.fill();break;case i.OPS.eoFill:this.eoFill();break;case i.OPS.stroke:this.stroke();break;case i.OPS.fillStroke:this.fillStroke();break;case i.OPS.eoFillStroke:this.eoFillStroke();break;case i.OPS.clip:this.clip("nonzero");break;case i.OPS.eoClip:this.clip("evenodd");break;case i.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case i.OPS.paintImageXObject:this.paintImageXObject(c[0]);break;case i.OPS.paintInlineImageXObject:this.paintInlineImageXObject(c[0]);break;case i.OPS.paintImageMaskXObject:this.paintImageMaskXObject(c[0]);break;case i.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(c[0],c[1]);break;case i.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case i.OPS.closePath:this.closePath();break;case i.OPS.closeStroke:this.closeStroke();break;case i.OPS.closeFillStroke:this.closeFillStroke();break;case i.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case i.OPS.nextLine:this.nextLine();break;case i.OPS.transform:this.transform(c[0],c[1],c[2],c[3],c[4],c[5]);break;case i.OPS.constructPath:this.constructPath(c[0],c[1]);break;case i.OPS.endPath:this.endPath();break;case 92:this.group(t.items);break;default:(0,i.warn)(`Unimplemented operator ${u}`)}}}setWordSpacing(n){this.current.wordSpacing=n}setCharSpacing(n){this.current.charSpacing=n}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(n,t,u,p,c,b){const m=this.current;m.textMatrix=m.lineMatrix=[n,t,u,p,c,b],m.textMatrixScale=Math.hypot(n,t),m.x=m.lineX=0,m.y=m.lineY=0,m.xcoords=[],m.ycoords=[],m.tspan=this.svgFactory.createElement("svg:tspan"),m.tspan.setAttributeNS(null,"font-family",m.fontFamily),m.tspan.setAttributeNS(null,"font-size",`${M(m.fontSize)}px`),m.tspan.setAttributeNS(null,"y",M(-m.y)),m.txtElement=this.svgFactory.createElement("svg:text"),m.txtElement.appendChild(m.tspan)}beginText(){const n=this.current;n.x=n.lineX=0,n.y=n.lineY=0,n.textMatrix=i.IDENTITY_MATRIX,n.lineMatrix=i.IDENTITY_MATRIX,n.textMatrixScale=1,n.tspan=this.svgFactory.createElement("svg:tspan"),n.txtElement=this.svgFactory.createElement("svg:text"),n.txtgrp=this.svgFactory.createElement("svg:g"),n.xcoords=[],n.ycoords=[]}moveText(n,t){const u=this.current;u.x=u.lineX+=n,u.y=u.lineY+=t,u.xcoords=[],u.ycoords=[],u.tspan=this.svgFactory.createElement("svg:tspan"),u.tspan.setAttributeNS(null,"font-family",u.fontFamily),u.tspan.setAttributeNS(null,"font-size",`${M(u.fontSize)}px`),u.tspan.setAttributeNS(null,"y",M(-u.y))}showText(n){const t=this.current,u=t.font,p=t.fontSize;if(0===p)return;const c=t.fontSizeScale,b=t.charSpacing,m=t.wordSpacing,d=t.fontDirection,w=t.textHScale*d,F=u.vertical,B=F?1:-1,z=u.defaultVMetrics,J=p*t.fontMatrix[0];let X=0;for(const he of n){if(null===he){X+=d*m;continue}if("number"==typeof he){X+=B*he*p/1e3;continue}const N=(he.isSpace?m:0)+b,o=he.fontChar;let e,r,g,a=he.width;if(F){let f;const h=he.vmetric||z;f=he.vmetric?h[1]:.5*a,f=-f*J,a=h?-h[0]:a,e=f/c,r=(X+h[2]*J)/c}else e=X/c,r=0;(he.isInFont||u.missingFile)&&(t.xcoords.push(t.x+e),F&&t.ycoords.push(-t.y+r),t.tspan.textContent+=o),g=F?a*J-N*d:a*J+N*d,X+=g}t.tspan.setAttributeNS(null,"x",t.xcoords.map(M).join(" ")),t.tspan.setAttributeNS(null,"y",F?t.ycoords.map(M).join(" "):M(-t.y)),F?t.y-=X:t.x+=X*w,t.tspan.setAttributeNS(null,"font-family",t.fontFamily),t.tspan.setAttributeNS(null,"font-size",`${M(t.fontSize)}px`),t.fontStyle!==O.fontStyle&&t.tspan.setAttributeNS(null,"font-style",t.fontStyle),t.fontWeight!==O.fontWeight&&t.tspan.setAttributeNS(null,"font-weight",t.fontWeight);const oe=t.textRenderingMode&i.TextRenderingMode.FILL_STROKE_MASK;oe===i.TextRenderingMode.FILL||oe===i.TextRenderingMode.FILL_STROKE?(t.fillColor!==O.fillColor&&t.tspan.setAttributeNS(null,"fill",t.fillColor),t.fillAlpha<1&&t.tspan.setAttributeNS(null,"fill-opacity",t.fillAlpha)):t.tspan.setAttributeNS(null,"fill",t.textRenderingMode===i.TextRenderingMode.ADD_TO_PATH?"transparent":"none"),(oe===i.TextRenderingMode.STROKE||oe===i.TextRenderingMode.FILL_STROKE)&&this._setStrokeAttributes(t.tspan,1/(t.textMatrixScale||1));let de=t.textMatrix;0!==t.textRise&&(de=de.slice(),de[5]+=t.textRise),t.txtElement.setAttributeNS(null,"transform",`${v(de)} scale(${M(w)}, -1)`),t.txtElement.setAttributeNS(A,"xml:space","preserve"),t.txtElement.appendChild(t.tspan),t.txtgrp.appendChild(t.txtElement),this._ensureTransformGroup().appendChild(t.txtElement)}setLeadingMoveText(n,t){this.setLeading(-t),this.moveText(n,t)}addFontStyle(n){if(!n.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.appendChild(this.cssStyle));const t=V(n.data,n.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${n.loadedName}"; src: url(${t}); }\n`}setFont(n){const t=this.current,u=this.commonObjs.get(n[0]);let p=n[1];t.font=u,this.embedFonts&&!u.missingFile&&!this.embeddedFonts[u.loadedName]&&(this.addFontStyle(u),this.embeddedFonts[u.loadedName]=u),t.fontMatrix=u.fontMatrix||i.FONT_IDENTITY_MATRIX;let c="normal";u.black?c="900":u.bold&&(c="bold");const b=u.italic?"italic":"normal";p<0?(p=-p,t.fontDirection=-1):t.fontDirection=1,t.fontSize=p,t.fontFamily=u.loadedName,t.fontWeight=c,t.fontStyle=b,t.tspan=this.svgFactory.createElement("svg:tspan"),t.tspan.setAttributeNS(null,"y",M(-t.y)),t.xcoords=[],t.ycoords=[]}endText(){const n=this.current;n.textRenderingMode&i.TextRenderingMode.ADD_TO_PATH_FLAG&&n.txtElement?.hasChildNodes()&&(n.element=n.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(n){n>0&&(this.current.lineWidth=n)}setLineCap(n){this.current.lineCap=R[n]}setLineJoin(n){this.current.lineJoin=I[n]}setMiterLimit(n){this.current.miterLimit=n}setStrokeAlpha(n){this.current.strokeAlpha=n}setStrokeRGBColor(n,t,u){this.current.strokeColor=i.Util.makeHexColor(n,t,u)}setFillAlpha(n){this.current.fillAlpha=n}setFillRGBColor(n,t,u){this.current.fillColor=i.Util.makeHexColor(n,t,u),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(n){this.current.strokeColor=this._makeColorN_Pattern(n)}setFillColorN(n){this.current.fillColor=this._makeColorN_Pattern(n)}shadingFill(n){const t=this.viewport.width,u=this.viewport.height,p=i.Util.inverseTransform(this.transformMatrix),c=i.Util.applyTransform([0,0],p),b=i.Util.applyTransform([0,u],p),m=i.Util.applyTransform([t,0],p),d=i.Util.applyTransform([t,u],p),w=Math.min(c[0],b[0],m[0],d[0]),F=Math.min(c[1],b[1],m[1],d[1]),B=Math.max(c[0],b[0],m[0],d[0]),z=Math.max(c[1],b[1],m[1],d[1]),J=this.svgFactory.createElement("svg:rect");J.setAttributeNS(null,"x",w),J.setAttributeNS(null,"y",F),J.setAttributeNS(null,"width",B-w),J.setAttributeNS(null,"height",z-F),J.setAttributeNS(null,"fill",this._makeShadingPattern(n)),this.current.fillAlpha<1&&J.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().appendChild(J)}_makeColorN_Pattern(n){return"TilingPattern"===n[0]?this._makeTilingPattern(n):this._makeShadingPattern(n)}_makeTilingPattern(n){const t=n[1],u=n[2],p=n[3]||i.IDENTITY_MATRIX,[c,b,m,d]=n[4],w=n[5],F=n[6],B=n[7],z="shading"+x++,[J,X,oe,de]=i.Util.normalizeRect([...i.Util.applyTransform([c,b],p),...i.Util.applyTransform([m,d],p)]),[he,N]=i.Util.singularValueDecompose2dScale(p),o=w*he,e=F*N,r=this.svgFactory.createElement("svg:pattern");r.setAttributeNS(null,"id",z),r.setAttributeNS(null,"patternUnits","userSpaceOnUse"),r.setAttributeNS(null,"width",o),r.setAttributeNS(null,"height",e),r.setAttributeNS(null,"x",`${J}`),r.setAttributeNS(null,"y",`${X}`);const a=this.svg,g=this.transformMatrix,f=this.current.fillColor,h=this.current.strokeColor,k=this.svgFactory.create(oe-J,de-X);if(this.svg=k,this.transformMatrix=p,2===B){const G=i.Util.makeHexColor(...t);this.current.fillColor=G,this.current.strokeColor=G}return this.executeOpTree(this.convertOpList(u)),this.svg=a,this.transformMatrix=g,this.current.fillColor=f,this.current.strokeColor=h,r.appendChild(k.childNodes[0]),this.defs.appendChild(r),`url(#${z})`}_makeShadingPattern(n){switch("string"==typeof n&&(n=this.objs.get(n)),n[0]){case"RadialAxial":const t="shading"+x++,u=n[3];let p;switch(n[1]){case"axial":const c=n[4],b=n[5];p=this.svgFactory.createElement("svg:linearGradient"),p.setAttributeNS(null,"id",t),p.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),p.setAttributeNS(null,"x1",c[0]),p.setAttributeNS(null,"y1",c[1]),p.setAttributeNS(null,"x2",b[0]),p.setAttributeNS(null,"y2",b[1]);break;case"radial":const m=n[4],d=n[5],w=n[6],F=n[7];p=this.svgFactory.createElement("svg:radialGradient"),p.setAttributeNS(null,"id",t),p.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),p.setAttributeNS(null,"cx",d[0]),p.setAttributeNS(null,"cy",d[1]),p.setAttributeNS(null,"r",F),p.setAttributeNS(null,"fx",m[0]),p.setAttributeNS(null,"fy",m[1]),p.setAttributeNS(null,"fr",w);break;default:throw new Error(`Unknown RadialAxial type: ${n[1]}`)}for(const c of u){const b=this.svgFactory.createElement("svg:stop");b.setAttributeNS(null,"offset",c[0]),b.setAttributeNS(null,"stop-color",c[1]),p.appendChild(b)}return this.defs.appendChild(p),`url(#${t})`;case"Mesh":return(0,i.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${n[0]}`)}}setDash(n,t){this.current.dashArray=n,this.current.dashPhase=t}constructPath(n,t){const u=this.current;let p=u.x,c=u.y,b=[],m=0;for(const d of n)switch(0|d){case i.OPS.rectangle:p=t[m++],c=t[m++];const B=p+t[m++],z=c+t[m++];b.push("M",M(p),M(c),"L",M(B),M(c),"L",M(B),M(z),"L",M(p),M(z),"Z");break;case i.OPS.moveTo:p=t[m++],c=t[m++],b.push("M",M(p),M(c));break;case i.OPS.lineTo:p=t[m++],c=t[m++],b.push("L",M(p),M(c));break;case i.OPS.curveTo:p=t[m+4],c=t[m+5],b.push("C",M(t[m]),M(t[m+1]),M(t[m+2]),M(t[m+3]),M(p),M(c)),m+=6;break;case i.OPS.curveTo2:b.push("C",M(p),M(c),M(t[m]),M(t[m+1]),M(t[m+2]),M(t[m+3])),p=t[m+2],c=t[m+3],m+=4;break;case i.OPS.curveTo3:p=t[m+2],c=t[m+3],b.push("C",M(t[m]),M(t[m+1]),M(p),M(c),M(p),M(c)),m+=4;break;case i.OPS.closePath:b.push("Z")}b=b.join(" "),u.path&&n.length>0&&n[0]!==i.OPS.rectangle&&n[0]!==i.OPS.moveTo?b=u.path.getAttributeNS(null,"d")+b:(u.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().appendChild(u.path)),u.path.setAttributeNS(null,"d",b),u.path.setAttributeNS(null,"fill","none"),u.element=u.path,u.setCurrentPoint(p,c)}endPath(){const n=this.current;if(n.path=null,!this.pendingClip)return;if(!n.element)return void(this.pendingClip=null);const t="clippath"+C++,u=this.svgFactory.createElement("svg:clipPath");u.setAttributeNS(null,"id",t),u.setAttributeNS(null,"transform",v(this.transformMatrix));const p=n.element.cloneNode(!0);if(p.setAttributeNS(null,"clip-rule","evenodd"===this.pendingClip?"evenodd":"nonzero"),this.pendingClip=null,u.appendChild(p),this.defs.appendChild(u),n.activeClipUrl){n.clipGroup=null;for(const c of this.extraStack)c.clipGroup=null;u.setAttributeNS(null,"clip-path",n.activeClipUrl)}n.activeClipUrl=`url(#${t})`,this.tgrp=null}clip(n){this.pendingClip=n}closePath(){const n=this.current;if(n.path){const t=`${n.path.getAttributeNS(null,"d")}Z`;n.path.setAttributeNS(null,"d",t)}}setLeading(n){this.current.leading=-n}setTextRise(n){this.current.textRise=n}setTextRenderingMode(n){this.current.textRenderingMode=n}setHScale(n){this.current.textHScale=n/100}setRenderingIntent(n){}setFlatness(n){}setGState(n){for(const[t,u]of n)switch(t){case"LW":this.setLineWidth(u);break;case"LC":this.setLineCap(u);break;case"LJ":this.setLineJoin(u);break;case"ML":this.setMiterLimit(u);break;case"D":this.setDash(u[0],u[1]);break;case"RI":this.setRenderingIntent(u);break;case"FL":this.setFlatness(u);break;case"Font":this.setFont(u);break;case"CA":this.setStrokeAlpha(u);break;case"ca":this.setFillAlpha(u);break;default:(0,i.warn)(`Unimplemented graphic state operator ${t}`)}}fill(){const n=this.current;n.element&&(n.element.setAttributeNS(null,"fill",n.fillColor),n.element.setAttributeNS(null,"fill-opacity",n.fillAlpha),this.endPath())}stroke(){const n=this.current;n.element&&(this._setStrokeAttributes(n.element),n.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(n,t=1){const u=this.current;let p=u.dashArray;1!==t&&p.length>0&&(p=p.map(function(c){return t*c})),n.setAttributeNS(null,"stroke",u.strokeColor),n.setAttributeNS(null,"stroke-opacity",u.strokeAlpha),n.setAttributeNS(null,"stroke-miterlimit",M(u.miterLimit)),n.setAttributeNS(null,"stroke-linecap",u.lineCap),n.setAttributeNS(null,"stroke-linejoin",u.lineJoin),n.setAttributeNS(null,"stroke-width",M(t*u.lineWidth)+"px"),n.setAttributeNS(null,"stroke-dasharray",p.map(M).join(" ")),n.setAttributeNS(null,"stroke-dashoffset",M(t*u.dashPhase)+"px")}eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const n=this.svgFactory.createElement("svg:rect");n.setAttributeNS(null,"x","0"),n.setAttributeNS(null,"y","0"),n.setAttributeNS(null,"width","1px"),n.setAttributeNS(null,"height","1px"),n.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().appendChild(n)}paintImageXObject(n){const t=n.startsWith("g_")?this.commonObjs.get(n):this.objs.get(n);t?this.paintInlineImageXObject(t):(0,i.warn)(`Dependent image with object ID ${n} is not ready yet`)}paintInlineImageXObject(n,t){const u=n.width,p=n.height,c=D(n,this.forceDataSchema,!!t),b=this.svgFactory.createElement("svg:rect");b.setAttributeNS(null,"x","0"),b.setAttributeNS(null,"y","0"),b.setAttributeNS(null,"width",M(u)),b.setAttributeNS(null,"height",M(p)),this.current.element=b,this.clip("nonzero");const m=this.svgFactory.createElement("svg:image");m.setAttributeNS(_,"xlink:href",c),m.setAttributeNS(null,"x","0"),m.setAttributeNS(null,"y",M(-p)),m.setAttributeNS(null,"width",M(u)+"px"),m.setAttributeNS(null,"height",M(p)+"px"),m.setAttributeNS(null,"transform",`scale(${M(1/u)} ${M(-1/p)})`),t?t.appendChild(m):this._ensureTransformGroup().appendChild(m)}paintImageMaskXObject(n){const t=this.current,u=n.width,p=n.height,c=t.fillColor;t.maskId="mask"+L++;const b=this.svgFactory.createElement("svg:mask");b.setAttributeNS(null,"id",t.maskId);const m=this.svgFactory.createElement("svg:rect");m.setAttributeNS(null,"x","0"),m.setAttributeNS(null,"y","0"),m.setAttributeNS(null,"width",M(u)),m.setAttributeNS(null,"height",M(p)),m.setAttributeNS(null,"fill",c),m.setAttributeNS(null,"mask",`url(#${t.maskId})`),this.defs.appendChild(b),this._ensureTransformGroup().appendChild(m),this.paintInlineImageXObject(n,b)}paintFormXObjectBegin(n,t){if(Array.isArray(n)&&6===n.length&&this.transform(n[0],n[1],n[2],n[3],n[4],n[5]),t){const u=t[2]-t[0],p=t[3]-t[1],c=this.svgFactory.createElement("svg:rect");c.setAttributeNS(null,"x",t[0]),c.setAttributeNS(null,"y",t[1]),c.setAttributeNS(null,"width",M(u)),c.setAttributeNS(null,"height",M(p)),this.current.element=c,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(n){const t=this.svgFactory.create(n.width,n.height),u=this.svgFactory.createElement("svg:defs");t.appendChild(u),this.defs=u;const p=this.svgFactory.createElement("svg:g");return p.setAttributeNS(null,"transform",v(n.transform)),t.appendChild(p),this.svg=p,t}_ensureClipGroup(){if(!this.current.clipGroup){const n=this.svgFactory.createElement("svg:g");n.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.appendChild(n),this.current.clipGroup=n}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",v(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().appendChild(this.tgrp):this.svg.appendChild(this.tgrp)),this.tgrp}}}},(Q,l,S)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.PDFNodeStream=void 0;var i=S(1),P=S(26);const T=__webpack_require__(23237),U=__webpack_require__(97492),O=__webpack_require__(31815),A=__webpack_require__(66671),_=/^file:\/\/\/[a-zA-Z]:\//;l.PDFNodeStream=class I{constructor(x){this.source=x,this.url=function R(L){const x=A.parse(L);return"file:"===x.protocol||x.host?x:/^[a-z]:[/\\]/i.test(L)?A.parse(`file:///${L}`):(x.host||(x.protocol="file:"),x)}(x.url),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol,this.httpHeaders=this.isHttp&&x.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new v(this):new s(this),this._fullRequestReader}getRangeReader(x,n){if(n<=this._progressiveDataLength)return null;const t=this.isFsUrl?new C(this,x,n):new M(this,x,n);return this._rangeRequestReaders.push(t),t}cancelAllRequests(x){this._fullRequestReader&&this._fullRequestReader.cancel(x);for(const n of this._rangeRequestReaders.slice(0))n.cancel(x)}};class V{constructor(x){this._url=x.url,this._done=!1,this._storedError=null,this.onProgress=null;const n=x.source;this._contentLength=n.length,this._loaded=0,this._filename=null,this._disableRange=n.disableRange||!1,this._rangeChunkSize=n.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!n.disableStream,this._isRangeSupported=!n.disableRange,this._readableStream=null,this._readCapability=(0,i.createPromiseCapability)(),this._headersCapability=(0,i.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){var x=this;return _asyncToGenerator(function*(){if(yield x._readCapability.promise,x._done)return{value:void 0,done:!0};if(x._storedError)throw x._storedError;const n=x._readableStream.read();return null===n?(x._readCapability=(0,i.createPromiseCapability)(),x.read()):(x._loaded+=n.length,x.onProgress&&x.onProgress({loaded:x._loaded,total:x._contentLength}),{value:new Uint8Array(n).buffer,done:!1})})()}cancel(x){this._readableStream?this._readableStream.destroy(x):this._error(x)}_error(x){this._storedError=x,this._readCapability.resolve()}_setReadableStream(x){this._readableStream=x,x.on("readable",()=>{this._readCapability.resolve()}),x.on("end",()=>{x.destroy(),this._done=!0,this._readCapability.resolve()}),x.on("error",n=>{this._error(n)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new i.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class D{constructor(x){this._url=x.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,i.createPromiseCapability)(),this._isStreamingSupported=!x.source.disableStream}get isStreamingSupported(){return this._isStreamingSupported}read(){var x=this;return _asyncToGenerator(function*(){if(yield x._readCapability.promise,x._done)return{value:void 0,done:!0};if(x._storedError)throw x._storedError;const n=x._readableStream.read();return null===n?(x._readCapability=(0,i.createPromiseCapability)(),x.read()):(x._loaded+=n.length,x.onProgress&&x.onProgress({loaded:x._loaded}),{value:new Uint8Array(n).buffer,done:!1})})()}cancel(x){this._readableStream?this._readableStream.destroy(x):this._error(x)}_error(x){this._storedError=x,this._readCapability.resolve()}_setReadableStream(x){this._readableStream=x,x.on("readable",()=>{this._readCapability.resolve()}),x.on("end",()=>{x.destroy(),this._done=!0,this._readCapability.resolve()}),x.on("error",n=>{this._error(n)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function W(L,x){return{protocol:L.protocol,auth:L.auth,host:L.hostname,port:L.port,path:L.path,method:"GET",headers:x}}class s extends V{constructor(x){super(x);const n=t=>{if(404===t.statusCode){const b=new i.MissingPDFException(`Missing PDF "${this._url}".`);return this._storedError=b,void this._headersCapability.reject(b)}this._headersCapability.resolve(),this._setReadableStream(t);const u=b=>this._readableStream.headers[b.toLowerCase()],{allowRangeRequests:p,suggestedLength:c}=(0,P.validateRangeRequestCapabilities)({getResponseHeader:u,isHttp:x.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=p,this._contentLength=c||this._contentLength,this._filename=(0,P.extractFilenameFromHeader)(u)};this._request=null,this._request="http:"===this._url.protocol?U.request(W(this._url,x.httpHeaders),n):O.request(W(this._url,x.httpHeaders),n),this._request.on("error",t=>{this._storedError=t,this._headersCapability.reject(t)}),this._request.end()}}class M extends D{constructor(x,n,t){super(x),this._httpHeaders={};for(const p in x.httpHeaders){const c=x.httpHeaders[p];typeof c>"u"||(this._httpHeaders[p]=c)}this._httpHeaders.Range=`bytes=${n}-${t-1}`;const u=p=>{if(404!==p.statusCode)this._setReadableStream(p);else{const c=new i.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=c}};this._request=null,this._request="http:"===this._url.protocol?U.request(W(this._url,this._httpHeaders),u):O.request(W(this._url,this._httpHeaders),u),this._request.on("error",p=>{this._storedError=p}),this._request.end()}}class v extends V{constructor(x){super(x);let n=decodeURIComponent(this._url.path);_.test(this._url.href)&&(n=n.replace(/^\//,"")),T.lstat(n,(t,u)=>{if(t)return"ENOENT"===t.code&&(t=new i.MissingPDFException(`Missing PDF "${n}".`)),this._storedError=t,void this._headersCapability.reject(t);this._contentLength=u.size,this._setReadableStream(T.createReadStream(n)),this._headersCapability.resolve()})}}class C extends D{constructor(x,n,t){super(x);let u=decodeURIComponent(this._url.path);_.test(this._url.href)&&(u=u.replace(/^\//,"")),this._setReadableStream(T.createReadStream(u,{start:n,end:t-1}))}}},(Q,l,S)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.createResponseStatusError=function A(R,I){return 404===R||0===R&&I.startsWith("file:")?new i.MissingPDFException('Missing PDF "'+I+'".'):new i.UnexpectedResponseException(`Unexpected server response (${R}) while retrieving PDF "${I}".`,R)},l.extractFilenameFromHeader=function O(R){const I=R("Content-Disposition");if(I){let V=(0,P.getFilenameFromContentDispositionHeader)(I);if(V.includes("%"))try{V=decodeURIComponent(V)}catch{}if((0,T.isPdfFile)(V))return V}return null},l.validateRangeRequestCapabilities=function U({getResponseHeader:R,isHttp:I,rangeChunkSize:V,disableRange:D}){const W={allowRangeRequests:!1,suggestedLength:void 0},s=parseInt(R("Content-Length"),10);return!Number.isInteger(s)||(W.suggestedLength=s,s<=2*V)||D||!I||"bytes"!==R("Accept-Ranges")||"identity"!==(R("Content-Encoding")||"identity")||(W.allowRangeRequests=!0),W},l.validateResponseStatus=function _(R){return 200===R||206===R};var i=S(1),P=S(27),T=S(5)},(Q,l,S)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.getFilenameFromContentDispositionHeader=function P(T){let U=!0,O=A("filename\\*","i").exec(T);if(O){O=O[1];let s=V(O);return s=unescape(s),s=D(s),s=W(s),R(s)}if(O=function I(s){const M=[];let v;const C=A("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(v=C.exec(s));){let[,x,n,t]=v;if(x=parseInt(x,10),x in M){if(0===x)break}else M[x]=[n,t]}const L=[];for(let x=0;x<M.length&&x in M;++x){let[n,t]=M[x];t=V(t),n&&(t=unescape(t),0===x&&(t=D(t))),L.push(t)}return L.join("")}(T),O)return R(W(O));if(O=A("filename","i").exec(T),O){O=O[1];let s=V(O);return s=W(s),R(s)}function A(s,M){return new RegExp("(?:^|;)\\s*"+s+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',M)}function _(s,M){if(s){if(!/^[\x00-\xFF]+$/.test(M))return M;try{const v=new TextDecoder(s,{fatal:!0}),C=(0,i.stringToBytes)(M);M=v.decode(C),U=!1}catch{}}return M}function R(s){return U&&/[\x80-\xff]/.test(s)&&(s=_("utf-8",s),U&&(s=_("iso-8859-1",s))),s}function V(s){if(s.startsWith('"')){const M=s.slice(1).split('\\"');for(let v=0;v<M.length;++v){const C=M[v].indexOf('"');-1!==C&&(M[v]=M[v].slice(0,C),M.length=v+1),M[v]=M[v].replace(/\\(.)/g,"$1")}s=M.join('"')}return s}function D(s){const M=s.indexOf("'");return-1===M?s:_(s.slice(0,M),s.slice(M+1).replace(/^[^']*'/,""))}function W(s){return!s.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(s)?s:s.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(M,v,C,L){if("q"===C||"Q"===C)return _(v,L=(L=L.replace(/_/g," ")).replace(/=([0-9a-fA-F]{2})/g,function(x,n){return String.fromCharCode(parseInt(n,16))}));try{L=atob(L)}catch{}return _(v,L)})}return""};var i=S(1)},(Q,l,S)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.PDFNetworkStream=void 0;var i=S(1),P=S(26);class A{constructor(D,W={}){this.url=D,this.isHttp=/^https?:/i.test(D),this.httpHeaders=this.isHttp&&W.httpHeaders||Object.create(null),this.withCredentials=W.withCredentials||!1,this.getXhr=W.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(D,W,s){const M={begin:D,end:W};for(const v in s)M[v]=s[v];return this.request(M)}requestFull(D){return this.request(D)}request(D){const W=this.getXhr(),s=this.currXhrId++,M=this.pendingRequests[s]={xhr:W};W.open("GET",this.url),W.withCredentials=this.withCredentials;for(const v in this.httpHeaders){const C=this.httpHeaders[v];typeof C>"u"||W.setRequestHeader(v,C)}return this.isHttp&&"begin"in D&&"end"in D?(W.setRequestHeader("Range",`bytes=${D.begin}-${D.end-1}`),M.expectedStatus=206):M.expectedStatus=200,W.responseType="arraybuffer",D.onError&&(W.onerror=function(v){D.onError(W.status)}),W.onreadystatechange=this.onStateChange.bind(this,s),W.onprogress=this.onProgress.bind(this,s),M.onHeadersReceived=D.onHeadersReceived,M.onDone=D.onDone,M.onError=D.onError,M.onProgress=D.onProgress,W.send(null),s}onProgress(D,W){const s=this.pendingRequests[D];s&&s.onProgress?.(W)}onStateChange(D,W){const s=this.pendingRequests[D];if(!s)return;const M=s.xhr;if(M.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),4!==M.readyState||!(D in this.pendingRequests))return;if(delete this.pendingRequests[D],0===M.status&&this.isHttp)return void s.onError?.(M.status);const v=M.status||200;if((200!==v||206!==s.expectedStatus)&&v!==s.expectedStatus)return void s.onError?.(M.status);const L=function O(V){const D=V.response;return"string"!=typeof D?D:(0,i.stringToBytes)(D).buffer}(M);if(206===v){const x=M.getResponseHeader("Content-Range"),n=/bytes (\d+)-(\d+)\/(\d+)/.exec(x);s.onDone({begin:parseInt(n[1],10),chunk:L})}else L?s.onDone({begin:0,chunk:L}):s.onError?.(M.status)}getRequestXhr(D){return this.pendingRequests[D].xhr}isPendingRequest(D){return D in this.pendingRequests}abortRequest(D){const W=this.pendingRequests[D].xhr;delete this.pendingRequests[D],W.abort()}}l.PDFNetworkStream=class _{constructor(D){this._source=D,this._manager=new A(D.url,{httpHeaders:D.httpHeaders,withCredentials:D.withCredentials}),this._rangeChunkSize=D.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(D){const W=this._rangeRequestReaders.indexOf(D);W>=0&&this._rangeRequestReaders.splice(W,1)}getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new R(this._manager,this._source),this._fullRequestReader}getRangeReader(D,W){const s=new I(this._manager,D,W);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(D){this._fullRequestReader?.cancel(D);for(const W of this._rangeRequestReaders.slice(0))W.cancel(D)}};class R{constructor(D,W){this._manager=D;const s={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=W.url,this._fullRequestId=D.requestFull(s),this._headersReceivedCapability=(0,i.createPromiseCapability)(),this._disableRange=W.disableRange||!1,this._contentLength=W.length,this._rangeChunkSize=W.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const D=this._fullRequestId,W=this._manager.getRequestXhr(D),s=C=>W.getResponseHeader(C),{allowRangeRequests:M,suggestedLength:v}=(0,P.validateRangeRequestCapabilities)({getResponseHeader:s,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});M&&(this._isRangeSupported=!0),this._contentLength=v||this._contentLength,this._filename=(0,P.extractFilenameFromHeader)(s),this._isRangeSupported&&this._manager.abortRequest(D),this._headersReceivedCapability.resolve()}_onDone(D){if(D&&(this._requests.length>0?this._requests.shift().resolve({value:D.chunk,done:!1}):this._cachedChunks.push(D.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const W of this._requests)W.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(D){this._storedError=(0,P.createResponseStatusError)(D,this._url),this._headersReceivedCapability.reject(this._storedError);for(const W of this._requests)W.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(D){this.onProgress?.({loaded:D.loaded,total:D.lengthComputable?D.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}read(){var D=this;return _asyncToGenerator(function*(){if(D._storedError)throw D._storedError;if(D._cachedChunks.length>0)return{value:D._cachedChunks.shift(),done:!1};if(D._done)return{value:void 0,done:!0};const W=(0,i.createPromiseCapability)();return D._requests.push(W),W.promise})()}cancel(D){this._done=!0,this._headersReceivedCapability.reject(D);for(const W of this._requests)W.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class I{constructor(D,W,s){this._manager=D;const M={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=D.url,this._requestId=D.requestRange(W,s,M),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(D){const W=D.chunk;this._requests.length>0?this._requests.shift().resolve({value:W,done:!1}):this._queuedChunk=W,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(D){this._storedError=(0,P.createResponseStatusError)(D,this._url);for(const W of this._requests)W.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(D){this.isStreamingSupported||this.onProgress?.({loaded:D.loaded})}get isStreamingSupported(){return!1}read(){var D=this;return _asyncToGenerator(function*(){if(D._storedError)throw D._storedError;if(null!==D._queuedChunk){const s=D._queuedChunk;return D._queuedChunk=null,{value:s,done:!1}}if(D._done)return{value:void 0,done:!0};const W=(0,i.createPromiseCapability)();return D._requests.push(W),W.promise})()}cancel(D){this._done=!0;for(const W of this._requests)W.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(Q,l,S)=>{Object.defineProperty(l,"__esModule",{value:!0}),l.PDFFetchStream=void 0;var i=S(1),P=S(26);function T(R,I,V){return{method:"GET",headers:R,signal:V?.signal,mode:"cors",credentials:I?"include":"same-origin",redirect:"follow"}}function U(R){const I=new Headers;for(const V in R){const D=R[V];typeof D>"u"||I.append(V,D)}return I}l.PDFFetchStream=class O{constructor(I){this.source=I,this.isHttp=/^https?:/i.test(I.url),this.httpHeaders=this.isHttp&&I.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new A(this),this._fullRequestReader}getRangeReader(I,V){if(V<=this._progressiveDataLength)return null;const D=new _(this,I,V);return this._rangeRequestReaders.push(D),D}cancelAllRequests(I){this._fullRequestReader&&this._fullRequestReader.cancel(I);for(const V of this._rangeRequestReaders.slice(0))V.cancel(I)}};class A{constructor(I){this._stream=I,this._reader=null,this._loaded=0,this._filename=null;const V=I.source;this._withCredentials=V.withCredentials||!1,this._contentLength=V.length,this._headersCapability=(0,i.createPromiseCapability)(),this._disableRange=V.disableRange||!1,this._rangeChunkSize=V.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),typeof AbortController<"u"&&(this._abortController=new AbortController),this._isStreamingSupported=!V.disableStream,this._isRangeSupported=!V.disableRange,this._headers=U(this._stream.httpHeaders);const D=V.url;fetch(D,T(this._headers,this._withCredentials,this._abortController)).then(W=>{if(!(0,P.validateResponseStatus)(W.status))throw(0,P.createResponseStatusError)(W.status,D);this._reader=W.body.getReader(),this._headersCapability.resolve();const s=C=>W.headers.get(C),{allowRangeRequests:M,suggestedLength:v}=(0,P.validateRangeRequestCapabilities)({getResponseHeader:s,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=M,this._contentLength=v||this._contentLength,this._filename=(0,P.extractFilenameFromHeader)(s),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new i.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){var I=this;return _asyncToGenerator(function*(){yield I._headersCapability.promise;const{value:V,done:D}=yield I._reader.read();return D?{value:V,done:D}:(I._loaded+=V.byteLength,I.onProgress&&I.onProgress({loaded:I._loaded,total:I._contentLength}),{value:new Uint8Array(V).buffer,done:!1})})()}cancel(I){this._reader&&this._reader.cancel(I),this._abortController&&this._abortController.abort()}}class _{constructor(I,V,D){this._stream=I,this._reader=null,this._loaded=0;const W=I.source;this._withCredentials=W.withCredentials||!1,this._readCapability=(0,i.createPromiseCapability)(),this._isStreamingSupported=!W.disableStream,typeof AbortController<"u"&&(this._abortController=new AbortController),this._headers=U(this._stream.httpHeaders),this._headers.append("Range",`bytes=${V}-${D-1}`);const s=W.url;fetch(s,T(this._headers,this._withCredentials,this._abortController)).then(M=>{if(!(0,P.validateResponseStatus)(M.status))throw(0,P.createResponseStatusError)(M.status,s);this._readCapability.resolve(),this._reader=M.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}read(){var I=this;return _asyncToGenerator(function*(){yield I._readCapability.promise;const{value:V,done:D}=yield I._reader.read();return D?{value:V,done:D}:(I._loaded+=V.byteLength,I.onProgress&&I.onProgress({loaded:I._loaded}),{value:new Uint8Array(V).buffer,done:!1})})()}cancel(I){this._reader&&this._reader.cancel(I),this._abortController&&this._abortController.abort()}}}],__webpack_module_cache__={};function __w_pdfjs_require__(Q){var l=__webpack_module_cache__[Q];if(void 0!==l)return l.exports;var S=__webpack_module_cache__[Q]={exports:{}};return __webpack_modules__[Q](S,S.exports,__w_pdfjs_require__),S.exports}var __nested_webpack_exports__={};return(()=>{var Q=__nested_webpack_exports__;Object.defineProperty(Q,"__esModule",{value:!0}),Object.defineProperty(Q,"AnnotationLayer",{enumerable:!0,get:function(){return P.AnnotationLayer}}),Object.defineProperty(Q,"AnnotationMode",{enumerable:!0,get:function(){return l.AnnotationMode}}),Object.defineProperty(Q,"CMapCompressionType",{enumerable:!0,get:function(){return l.CMapCompressionType}}),Object.defineProperty(Q,"GlobalWorkerOptions",{enumerable:!0,get:function(){return T.GlobalWorkerOptions}}),Object.defineProperty(Q,"InvalidPDFException",{enumerable:!0,get:function(){return l.InvalidPDFException}}),Object.defineProperty(Q,"LoopbackPort",{enumerable:!0,get:function(){return S.LoopbackPort}}),Object.defineProperty(Q,"MissingPDFException",{enumerable:!0,get:function(){return l.MissingPDFException}}),Object.defineProperty(Q,"OPS",{enumerable:!0,get:function(){return l.OPS}}),Object.defineProperty(Q,"PDFDataRangeTransport",{enumerable:!0,get:function(){return S.PDFDataRangeTransport}}),Object.defineProperty(Q,"PDFDateString",{enumerable:!0,get:function(){return i.PDFDateString}}),Object.defineProperty(Q,"PDFWorker",{enumerable:!0,get:function(){return S.PDFWorker}}),Object.defineProperty(Q,"PasswordResponses",{enumerable:!0,get:function(){return l.PasswordResponses}}),Object.defineProperty(Q,"PermissionFlag",{enumerable:!0,get:function(){return l.PermissionFlag}}),Object.defineProperty(Q,"PixelsPerInch",{enumerable:!0,get:function(){return i.PixelsPerInch}}),Object.defineProperty(Q,"RenderingCancelledException",{enumerable:!0,get:function(){return i.RenderingCancelledException}}),Object.defineProperty(Q,"SVGGraphics",{enumerable:!0,get:function(){return A.SVGGraphics}}),Object.defineProperty(Q,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return l.UNSUPPORTED_FEATURES}}),Object.defineProperty(Q,"UnexpectedResponseException",{enumerable:!0,get:function(){return l.UnexpectedResponseException}}),Object.defineProperty(Q,"Util",{enumerable:!0,get:function(){return l.Util}}),Object.defineProperty(Q,"VerbosityLevel",{enumerable:!0,get:function(){return l.VerbosityLevel}}),Object.defineProperty(Q,"XfaLayer",{enumerable:!0,get:function(){return _.XfaLayer}}),Object.defineProperty(Q,"build",{enumerable:!0,get:function(){return S.build}}),Object.defineProperty(Q,"createPromiseCapability",{enumerable:!0,get:function(){return l.createPromiseCapability}}),Object.defineProperty(Q,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return l.createValidAbsoluteUrl}}),Object.defineProperty(Q,"getDocument",{enumerable:!0,get:function(){return S.getDocument}}),Object.defineProperty(Q,"getFilenameFromUrl",{enumerable:!0,get:function(){return i.getFilenameFromUrl}}),Object.defineProperty(Q,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return i.getPdfFilenameFromUrl}}),Object.defineProperty(Q,"getXfaPageViewport",{enumerable:!0,get:function(){return i.getXfaPageViewport}}),Object.defineProperty(Q,"isPdfFile",{enumerable:!0,get:function(){return i.isPdfFile}}),Object.defineProperty(Q,"loadScript",{enumerable:!0,get:function(){return i.loadScript}}),Object.defineProperty(Q,"renderTextLayer",{enumerable:!0,get:function(){return O.renderTextLayer}}),Object.defineProperty(Q,"shadow",{enumerable:!0,get:function(){return l.shadow}}),Object.defineProperty(Q,"version",{enumerable:!0,get:function(){return S.version}});var l=__w_pdfjs_require__(1),S=__w_pdfjs_require__(4),i=__w_pdfjs_require__(5),P=__w_pdfjs_require__(20),T=__w_pdfjs_require__(13),U=__w_pdfjs_require__(3),O=__w_pdfjs_require__(23),A=__w_pdfjs_require__(24),_=__w_pdfjs_require__(22);if(U.isNodeJS){const{PDFNodeStream:V}=__w_pdfjs_require__(25);(0,S.setPDFNetworkStreamFactory)(D=>new V(D))}else{const{PDFNetworkStream:V}=__w_pdfjs_require__(28),{PDFFetchStream:D}=__w_pdfjs_require__(29);(0,S.setPDFNetworkStreamFactory)(W=>(0,i.isValidFetchUrl)(W.url)?new D(W):new V(W))}})(),__nested_webpack_exports__})(),module.exports=S()},94031:function(Q,l,S){var V,i=S(40546).default,P=S(93051).default,T=S(56965).default,U=S(23076).default,O=S(78737).default,A=S(64647).default,_=S(80540).default;V=()=>(()=>{"use strict";var R=[,(W,s,M)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DefaultXfaLayerFactory=s.DefaultTextLayerFactory=s.DefaultStructTreeLayerFactory=s.DefaultAnnotationLayerFactory=void 0;var v=M(2),C=M(4),L=M(5),x=M(7),n=M(8),t=M(9);s.DefaultAnnotationLayerFactory=class u{createAnnotationLayerBuilder(d,w,F=null,B="",z=!0,J=C.NullL10n,X=!1,oe=null,de=null,he=null,N=null){return new v.AnnotationLayerBuilder({pageDiv:d,pdfPage:w,imageResourcesPath:B,renderForms:z,linkService:new L.SimpleLinkService,l10n:J,annotationStorage:F,enableScripting:X,hasJSActionsPromise:oe,fieldObjectsPromise:he,mouseState:de,annotationCanvasMap:N})}},s.DefaultStructTreeLayerFactory=class p{createStructTreeLayerBuilder(d){return new x.StructTreeLayerBuilder({pdfPage:d})}},s.DefaultTextLayerFactory=class c{createTextLayerBuilder(d,w,F,B=!1,z,J){return new n.TextLayerBuilder({textLayerDiv:d,pageIndex:w,viewport:F,enhanceTextSelection:B,eventBus:z,highlighter:J})}},s.DefaultXfaLayerFactory=class b{createXfaLayerBuilder(d,w,F=null,B=null){return new t.XfaLayerBuilder({pageDiv:d,pdfPage:w,annotationStorage:F,linkService:new L.SimpleLinkService,xfaHtml:B})}}},(W,s,M)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.AnnotationLayerBuilder=void 0;var v=M(3),C=M(4);s.AnnotationLayerBuilder=class L{constructor({pageDiv:n,pdfPage:t,linkService:u,downloadManager:p,annotationStorage:c=null,imageResourcesPath:b="",renderForms:m=!0,l10n:d=C.NullL10n,enableScripting:w=!1,hasJSActionsPromise:F=null,fieldObjectsPromise:B=null,mouseState:z=null,annotationCanvasMap:J=null}){this.pageDiv=n,this.pdfPage=t,this.linkService=u,this.downloadManager=p,this.imageResourcesPath=b,this.renderForms=m,this.l10n=d,this.annotationStorage=c,this.enableScripting=w,this._hasJSActionsPromise=F,this._fieldObjectsPromise=B,this._mouseState=z,this._annotationCanvasMap=J,this.div=null,this._cancelled=!1}render(n,t="display"){var u=this;return _(function*(){const[p,c=!1,b=null]=yield Promise.all([u.pdfPage.getAnnotations({intent:t}),u._hasJSActionsPromise,u._fieldObjectsPromise]);if(u._cancelled||0===p.length)return;const m={viewport:n.clone({dontFlip:!0}),div:u.div,annotations:p,page:u.pdfPage,imageResourcesPath:u.imageResourcesPath,renderForms:u.renderForms,linkService:u.linkService,downloadManager:u.downloadManager,annotationStorage:u.annotationStorage,enableScripting:u.enableScripting,hasJSActions:c,fieldObjects:b,mouseState:u._mouseState,annotationCanvasMap:u._annotationCanvasMap};u.div?v.AnnotationLayer.update(m):(u.div=document.createElement("div"),u.div.className="annotationLayer",u.pageDiv.appendChild(u.div),m.div=u.div,v.AnnotationLayer.render(m),u.l10n.translate(u.div))})()}cancel(){this._cancelled=!0}hide(){this.div&&(this.div.hidden=!0)}}},W=>{let s;s=typeof window<"u"&&window["pdfjs-dist/build/pdf"]?window["pdfjs-dist/build/pdf"]:S(83876),W.exports=s},(W,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.NullL10n=void 0,s.fixupLangCode=function L(t){return C[t?.toLowerCase()]||t},s.getL10nFallback=v;const M={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} \xd7 {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} \xd7 {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",print_progress_percent:"{{progress}}%","toggle_sidebar.title":"Toggle Sidebar","toggle_sidebar_notification2.title":"Toggle Sidebar (document contains outline/attachments/layers)",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",error_version_info:"PDF.js v{{version}} (build: {{build}})",error_message:"Message: {{message}}",error_stack:"Stack: {{stack}}",error_file:"File: {{file}}",error_line:"Line: {{line}}",rendering_error:"An error occurred while rendering the page.",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading:"Loading\u2026",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts."};function v(t,u){switch(t){case"find_match_count":t=`find_match_count[${1===u.total?"one":"other"}]`;break;case"find_match_count_limit":t=`find_match_count_limit[${1===u.limit?"one":"other"}]`}return M[t]||""}const C={en:"en-US",es:"es-ES",fy:"fy-NL",ga:"ga-IE",gu:"gu-IN",hi:"hi-IN",hy:"hy-AM",nb:"nb-NO",ne:"ne-NP",nn:"nn-NO",pa:"pa-IN",pt:"pt-PT",sv:"sv-SE",zh:"zh-CN"};s.NullL10n={getLanguage:()=>_(function*(){return"en-us"})(),getDirection:()=>_(function*(){return"ltr"})(),get:(t,u=null,p=v(t,u))=>_(function*(){return function x(t,u){return u?t.replace(/\{\{\s*(\w+)\s*\}\}/g,(p,c)=>c in u?u[c]:"{{"+c+"}}"):t}(p,u)})(),translate:t=>_(function*(){})()}},(W,s,M)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.SimpleLinkService=s.PDFLinkService=s.LinkTarget=void 0;var v=M(6);const L={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};function x(m,{url:d,target:w,rel:F,enabled:B=!0}={}){if(!d||"string"!=typeof d)throw new Error('A valid "url" parameter must provided.');const z=(0,v.removeNullCharacters)(d);B?m.href=m.title=z:(m.href="",m.title=`Disabled: ${z}`,m.onclick=()=>!1);let J="";switch(w){case L.NONE:break;case L.SELF:J="_self";break;case L.BLANK:J="_blank";break;case L.PARENT:J="_parent";break;case L.TOP:J="_top"}m.target=J,m.rel="string"==typeof F?F:"noopener noreferrer nofollow"}s.LinkTarget=L;var n=new WeakMap,t=new WeakSet;class u{constructor({eventBus:d,externalLinkTarget:w=null,externalLinkRel:F=null,ignoreDestinationZoom:B=!1}={}){T(this,t),U(this,n,new Map),this.eventBus=d,this.externalLinkTarget=w,this.externalLinkRel=F,this.externalLinkEnabled=!0,this._ignoreDestinationZoom=B,this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null}setDocument(d,w=null){this.baseUrl=w,this.pdfDocument=d,A(n,this).clear()}setViewer(d){this.pdfViewer=d}setHistory(d){this.pdfHistory=d}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return this.pdfViewer.currentPageNumber}set page(d){this.pdfViewer.currentPageNumber=d}get rotation(){return this.pdfViewer.pagesRotation}set rotation(d){this.pdfViewer.pagesRotation=d}goToDestination(d){var w=this;return _(function*(){if(!w.pdfDocument)return;let F,B;"string"==typeof d?(F=d,B=yield w.pdfDocument.getDestination(d)):(F=null,B=yield d),Array.isArray(B)?O(t,w,p).call(w,d,F,B):console.error(`PDFLinkService.goToDestination: "${B}" is not a valid destination array, for dest="${d}".`)})()}goToPage(d){if(!this.pdfDocument)return;const w="string"==typeof d&&this.pdfViewer.pageLabelToPageNumber(d)||0|d;Number.isInteger(w)&&w>0&&w<=this.pagesCount?(this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.pushPage(w)),this.pdfViewer.scrollPageIntoView({pageNumber:w})):console.error(`PDFLinkService.goToPage: "${d}" is not a valid page.`)}addLinkAttributes(d,w,F=!1){x(d,{url:w,target:F?L.BLANK:this.externalLinkTarget,rel:this.externalLinkRel,enabled:this.externalLinkEnabled})}getDestinationHash(d){if("string"==typeof d){if(d.length>0)return this.getAnchorUrl("#"+escape(d))}else if(Array.isArray(d)){const w=JSON.stringify(d);if(w.length>0)return this.getAnchorUrl("#"+escape(w))}return this.getAnchorUrl("")}getAnchorUrl(d){return(this.baseUrl||"")+d}setHash(d){if(!this.pdfDocument)return;let w,F;if(d.includes("=")){const B=(0,v.parseQueryString)(d);if(B.has("search")&&this.eventBus.dispatch("findfromurlhash",{source:this,query:B.get("search").replace(/"/g,""),phraseSearch:"true"===B.get("phrase")}),B.has("page")&&(w=0|B.get("page")||1),B.has("zoom")){const z=B.get("zoom").split(","),J=z[0],X=parseFloat(J);J.includes("Fit")?"Fit"===J||"FitB"===J?F=[null,{name:J}]:"FitH"===J||"FitBH"===J||"FitV"===J||"FitBV"===J?F=[null,{name:J},z.length>1?0|z[1]:null]:"FitR"===J?5!==z.length?console.error('PDFLinkService.setHash: Not enough parameters for "FitR".'):F=[null,{name:J},0|z[1],0|z[2],0|z[3],0|z[4]]:console.error(`PDFLinkService.setHash: "${J}" is not a valid zoom value.`):F=[null,{name:"XYZ"},z.length>1?0|z[1]:null,z.length>2?0|z[2]:null,X?X/100:J]}F?this.pdfViewer.scrollPageIntoView({pageNumber:w||this.page,destArray:F,allowNegativeOffset:!0}):w&&(this.page=w),B.has("pagemode")&&this.eventBus.dispatch("pagemode",{source:this,mode:B.get("pagemode")}),B.has("nameddest")&&this.goToDestination(B.get("nameddest"))}else{F=unescape(d);try{F=JSON.parse(F),Array.isArray(F)||(F=F.toString())}catch{}if("string"==typeof F||c.call(u,F))return void this.goToDestination(F);console.error(`PDFLinkService.setHash: "${unescape(d)}" is not a valid destination.`)}}executeNamedAction(d){switch(d){case"GoBack":this.pdfHistory?.back();break;case"GoForward":this.pdfHistory?.forward();break;case"NextPage":this.pdfViewer.nextPage();break;case"PrevPage":this.pdfViewer.previousPage();break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1}this.eventBus.dispatch("namedaction",{source:this,action:d})}cachePageRef(d,w){if(!w)return;const F=0===w.gen?`${w.num}R`:`${w.num}R${w.gen}`;A(n,this).set(F,d)}_cachedPageNumber(d){if(!d)return null;const w=0===d.gen?`${d.num}R`:`${d.num}R${d.gen}`;return A(n,this).get(w)||null}isPageVisible(d){return this.pdfViewer.isPageVisible(d)}isPageCached(d){return this.pdfViewer.isPageCached(d)}}function p(m,d=null,w){const F=w[0];let B;if("object"==typeof F&&null!==F){if(B=this._cachedPageNumber(F),!B)return void this.pdfDocument.getPageIndex(F).then(z=>{this.cachePageRef(z+1,F),O(t,this,p).call(this,m,d,w)}).catch(()=>{console.error(`PDFLinkService.#goToDestinationHelper: "${F}" is not a valid page reference, for dest="${m}".`)})}else{if(!Number.isInteger(F))return void console.error(`PDFLinkService.#goToDestinationHelper: "${F}" is not a valid destination reference, for dest="${m}".`);B=F+1}!B||B<1||B>this.pagesCount?console.error(`PDFLinkService.#goToDestinationHelper: "${B}" is not a valid page number, for dest="${m}".`):(this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.push({namedDest:d,explicitDest:w,pageNumber:B})),this.pdfViewer.scrollPageIntoView({pageNumber:B,destArray:w,ignoreDestinationZoom:this._ignoreDestinationZoom}))}function c(m){if(!Array.isArray(m))return!1;const d=m.length;if(d<2)return!1;const w=m[0];if(!("object"==typeof w&&Number.isInteger(w.num)&&Number.isInteger(w.gen)||Number.isInteger(w)&&w>=0))return!1;const F=m[1];if("object"!=typeof F||"string"!=typeof F.name)return!1;let B=!0;switch(F.name){case"XYZ":if(5!==d)return!1;break;case"Fit":case"FitB":return 2===d;case"FitH":case"FitBH":case"FitV":case"FitBV":if(3!==d)return!1;break;case"FitR":if(6!==d)return!1;B=!1;break;default:return!1}for(let z=2;z<d;z++){const J=m[z];if(!("number"==typeof J||B&&null===J))return!1}return!0}s.PDFLinkService=u,s.SimpleLinkService=class b{constructor(){this.externalLinkEnabled=!0}get pagesCount(){return 0}get page(){return 0}set page(d){}get rotation(){return 0}set rotation(d){}goToDestination(d){return _(function*(){})()}goToPage(d){}addLinkAttributes(d,w,F=!1){x(d,{url:w,enabled:this.externalLinkEnabled})}getDestinationHash(d){return"#"}getAnchorUrl(d){return"#"}setHash(d){}executeNamedAction(d){}cachePageRef(d,w){}isPageVisible(d){return!0}isPageCached(d){return!0}}},(W,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.animationStarted=s.VERTICAL_PADDING=s.UNKNOWN_SCALE=s.TextLayerMode=s.SpreadMode=s.SidebarView=s.ScrollMode=s.SCROLLBAR_PADDING=s.RenderingStates=s.RendererType=s.ProgressBar=s.PresentationModeState=s.OutputScale=s.MIN_SCALE=s.MAX_SCALE=s.MAX_AUTO_SCALE=s.DEFAULT_SCALE_VALUE=s.DEFAULT_SCALE_DELTA=s.DEFAULT_SCALE=s.AutoPrintRegExp=void 0,s.apiPageLayoutToViewerModes=function ne(q){let te=F.VERTICAL,ae=B.NONE;switch(q){case"SinglePage":te=F.PAGE;break;case"OneColumn":break;case"TwoPageLeft":te=F.PAGE;case"TwoColumnLeft":ae=B.ODD;break;case"TwoPageRight":te=F.PAGE;case"TwoColumnRight":ae=B.EVEN}return{scrollMode:te,spreadMode:ae}},s.apiPageModeToSidebarView=function Z(q){switch(q){case"UseNone":return m.NONE;case"UseThumbs":return m.THUMBS;case"UseOutlines":return m.OUTLINE;case"UseAttachments":return m.ATTACHMENTS;case"UseOC":return m.LAYERS}return m.NONE},s.approximateFraction=function r(q){if(Math.floor(q)===q)return[q,1];const te=1/q;if(te>8)return[1,8];if(Math.floor(te)===te)return[1,te];const le=q>1?te:q;let ie,ge=0,_e=1,Ae=1,ye=1;for(;;){const H=ge+Ae,K=_e+ye;if(K>8)break;le<=H/K?(Ae=H,ye=K):(ge=H,_e=K)}return ie=le-ge/_e<Ae/ye-le?le===q?[ge,_e]:[_e,ge]:le===q?[Ae,ye]:[ye,Ae],ie},s.backtrackBeforeAllVisibleElements=f,s.binarySearchFirstItem=e,s.getActiveOrFocusedElement=function ee(){let q=document,te=q.activeElement||q.querySelector(":focus");for(;te?.shadowRoot;)q=te.shadowRoot,te=q.activeElement||q.querySelector(":focus");return te},s.getPageSizeInches=function g({view:q,userUnit:te,rotate:ae}){const[le,ge,_e,Ae]=q,ye=ae%180!=0,ie=(_e-le)/72*te,H=(Ae-ge)/72*te;return{width:ye?H:ie,height:ye?ie:H}},s.getVisibleElements=function h({scrollEl:q,views:te,sortByVisibility:ae=!1,horizontal:le=!1,rtl:ge=!1}){const _e=q.scrollTop,Ae=_e+q.clientHeight,ye=q.scrollLeft,ie=ye+q.clientWidth,ue=[],me=new Set,ve=te.length;let be=e(te,le?function K(Se){const Ce=Se.div,we=Ce.offsetLeft+Ce.clientLeft;return ge?we<ie:we+Ce.clientWidth>ye}:function H(Se){const Ce=Se.div;return Ce.offsetTop+Ce.clientTop+Ce.clientHeight>_e});be>0&&be<ve&&!le&&(be=f(be,te,_e));let xe=le?ie:-1;for(let Se=be;Se<ve;Se++){const Ce=te[Se],we=Ce.div,Te=we.offsetLeft+we.clientLeft,Pe=we.offsetTop+we.clientTop,ke=we.clientWidth,Oe=we.clientHeight,Ie=Te+ke,Re=Pe+Oe;if(-1===xe)Re>=Ae&&(xe=Re);else if((le?Te:Pe)>xe)break;if(Re<=_e||Pe>=Ae||Ie<=ye||Te>=ie)continue;const Fe=Math.max(0,_e-Pe)+Math.max(0,Re-Ae),Ne=(ke-(Math.max(0,ye-Te)+Math.max(0,Ie-ie)))/ke;ue.push({id:Ce.id,x:Te,y:Pe,view:Ce,percent:(Oe-Fe)/Oe*Ne*100|0,widthPercent:100*Ne|0}),me.add(Ce.id)}const Le=ue[0],Me=ue[ue.length-1];return ae&&ue.sort(function(Se,Ce){const we=Se.percent-Ce.percent;return Math.abs(we)>.001?-we:Se.id-Ce.id}),{first:Le,last:Me,views:ue,ids:me}},s.isPortraitOrientation=function re(q){return q.width<=q.height},s.isValidRotation=function Y(q){return Number.isInteger(q)&&q%90==0},s.isValidScrollMode=function $(q){return Number.isInteger(q)&&Object.values(F).includes(q)&&q!==F.UNKNOWN},s.isValidSpreadMode=function se(q){return Number.isInteger(q)&&Object.values(B).includes(q)&&q!==B.UNKNOWN},s.noContextMenuHandler=function k(q){q.preventDefault()},s.normalizeWheelEventDelta=function j(q){let te=G(q);return 0===q.deltaMode?te/=900:1===q.deltaMode&&(te/=30),te},s.normalizeWheelEventDirection=G,s.parseQueryString=function de(q){const te=new Map;for(const[ae,le]of new URLSearchParams(q))te.set(ae.toLowerCase(),le);return te},s.removeNullCharacters=function o(q,te=!1){return"string"!=typeof q?(console.error("The argument must be a string."),q):(te&&(q=q.replace(N," ")),q.replace(he,""))},s.roundToDivide=function a(q,te){const ae=q%te;return 0===ae?q:Math.round(q-ae+te)},s.scrollIntoView=function X(q,te,ae=!1){let le=q.offsetParent;if(!le)return void console.error("offsetParent is not set -- cannot scroll");let ge=q.offsetTop+q.clientTop,_e=q.offsetLeft+q.clientLeft;for(;le.clientHeight===le.scrollHeight&&le.clientWidth===le.scrollWidth||ae&&(le.classList.contains("markedContent")||"hidden"===getComputedStyle(le).overflow);)if(ge+=le.offsetTop,_e+=le.offsetLeft,le=le.offsetParent,!le)return;te&&(void 0!==te.top&&(ge+=te.top),void 0!==te.left&&(_e+=te.left,le.scrollLeft=_e)),le.scrollTop=ge},s.watchScroll=function oe(q,te){const ae=function(_e){ge||(ge=window.requestAnimationFrame(function(){ge=null;const ye=q.scrollLeft,ie=le.lastX;ye!==ie&&(le.right=ye>ie),le.lastX=ye;const H=q.scrollTop,K=le.lastY;H!==K&&(le.down=H>K),le.lastY=H,te(le)}))},le={right:!0,down:!0,lastX:q.scrollLeft,lastY:q.scrollTop,_eventHandler:ae};let ge=null;return q.addEventListener("scroll",ae,!0),le},s.DEFAULT_SCALE_VALUE="auto",s.DEFAULT_SCALE=1,s.DEFAULT_SCALE_DELTA=1.1,s.MIN_SCALE=.1,s.MAX_SCALE=10,s.UNKNOWN_SCALE=0,s.MAX_AUTO_SCALE=1.25,s.SCROLLBAR_PADDING=40,s.VERTICAL_PADDING=5,s.RenderingStates={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3},s.PresentationModeState={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3};const m={UNKNOWN:-1,NONE:0,THUMBS:1,OUTLINE:2,ATTACHMENTS:3,LAYERS:4};s.SidebarView=m,s.RendererType={CANVAS:"canvas",SVG:"svg"},s.TextLayerMode={DISABLE:0,ENABLE:1,ENABLE_ENHANCE:2};const F={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2,PAGE:3};s.ScrollMode=F;const B={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2};s.SpreadMode=B,s.AutoPrintRegExp=/\bprint\s*\(/,s.OutputScale=class J{constructor(){const te=window.devicePixelRatio||1;this.sx=te,this.sy=te}get scaled(){return 1!==this.sx||1!==this.sy}};const he=/\x00/g,N=/[\x01-\x1F]/g;function e(q,te,ae=0){let le=ae,ge=q.length-1;if(ge<0||!te(q[ge]))return q.length;if(te(q[le]))return le;for(;le<ge;){const _e=le+ge>>1;te(q[_e])?ge=_e:le=_e+1}return le}function f(q,te,ae){if(q<2)return q;let le=te[q].div,ge=le.offsetTop+le.clientTop;ge>=ae&&(le=te[q-1].div,ge=le.offsetTop+le.clientTop);for(let _e=q-2;_e>=0&&(le=te[_e].div,!(le.offsetTop+le.clientTop+le.clientHeight<=ge));--_e)q=_e;return q}function G(q){let te=Math.hypot(q.deltaX,q.deltaY);const ae=Math.atan2(q.deltaY,q.deltaX);return-.25*Math.PI<ae&&ae<.75*Math.PI&&(te=-te),te}const fe=new Promise(function(q){window.requestAnimationFrame(q)});s.animationStarted=fe;var ce=new WeakSet;function E(){this._indeterminate?this.div.classList.add("indeterminate"):(this.div.classList.remove("indeterminate"),document.documentElement.style.setProperty("--progressBar-percent",`${this._percent}%`))}s.ProgressBar=class y{constructor(te){if(T(this,ce),arguments.length>1)throw new Error("ProgressBar no longer accepts any additional options, please use CSS rules to modify its appearance instead.");this.visible=!0,this.div=document.querySelector(te+" .progress"),this.bar=this.div.parentNode,this.percent=0}get percent(){return this._percent}set percent(te){this._indeterminate=isNaN(te),this._percent=function pe(q,te,ae){return Math.min(Math.max(q,te),ae)}(te,0,100),O(ce,this,E).call(this)}setWidth(te){if(!te)return;const le=te.parentNode.offsetWidth-te.offsetWidth;le>0&&document.documentElement.style.setProperty("--progressBar-end-offset",`${le}px`)}hide(){this.visible&&(this.visible=!1,this.bar.classList.add("hidden"))}show(){this.visible||(this.visible=!0,this.bar.classList.remove("hidden"))}}},(W,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.StructTreeLayerBuilder=void 0;const M={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},v=/^H(\d+)$/;s.StructTreeLayerBuilder=class C{constructor({pdfPage:x}){this.pdfPage=x}render(x){return this._walk(x)}_setAttributes(x,n){void 0!==x.alt&&n.setAttribute("aria-label",x.alt),void 0!==x.id&&n.setAttribute("aria-owns",x.id),void 0!==x.lang&&n.setAttribute("lang",x.lang)}_walk(x){if(!x)return null;const n=document.createElement("span");if("role"in x){const{role:t}=x,u=t.match(v);u?(n.setAttribute("role","heading"),n.setAttribute("aria-level",u[1])):M[t]&&n.setAttribute("role",M[t])}if(this._setAttributes(x,n),x.children)if(1===x.children.length&&"id"in x.children[0])this._setAttributes(x.children[0],n);else for(const t of x.children)n.appendChild(this._walk(t));return n}}},(W,s,M)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TextLayerBuilder=void 0;var v=M(3);s.TextLayerBuilder=class L{constructor({textLayerDiv:n,eventBus:t,pageIndex:u,viewport:p,highlighter:c=null,enhanceTextSelection:b=!1}){this.textLayerDiv=n,this.eventBus=t,this.textContent=null,this.textContentItemsStr=[],this.textContentStream=null,this.renderingDone=!1,this.pageNumber=u+1,this.viewport=p,this.textDivs=[],this.textLayerRenderTask=null,this.highlighter=c,this.enhanceTextSelection=b,this._bindMouse()}_finishRendering(){if(this.renderingDone=!0,!this.enhanceTextSelection){const n=document.createElement("div");n.className="endOfContent",this.textLayerDiv.appendChild(n)}this.eventBus.dispatch("textlayerrendered",{source:this,pageNumber:this.pageNumber,numTextDivs:this.textDivs.length})}render(n=0){if(!this.textContent&&!this.textContentStream||this.renderingDone)return;this.cancel(),this.textDivs.length=0,this.highlighter?.setTextMapping(this.textDivs,this.textContentItemsStr);const t=document.createDocumentFragment();this.textLayerRenderTask=(0,v.renderTextLayer)({textContent:this.textContent,textContentStream:this.textContentStream,container:t,viewport:this.viewport,textDivs:this.textDivs,textContentItemsStr:this.textContentItemsStr,timeout:n,enhanceTextSelection:this.enhanceTextSelection}),this.textLayerRenderTask.promise.then(()=>{this.textLayerDiv.appendChild(t),this._finishRendering(),this.highlighter?.enable()},function(u){})}cancel(){this.textLayerRenderTask&&(this.textLayerRenderTask.cancel(),this.textLayerRenderTask=null),this.highlighter?.disable()}setTextContentStream(n){this.cancel(),this.textContentStream=n}setTextContent(n){this.cancel(),this.textContent=n}_bindMouse(){const n=this.textLayerDiv;let t=null;n.addEventListener("mousedown",u=>{if(this.enhanceTextSelection&&this.textLayerRenderTask)return this.textLayerRenderTask.expandTextDivs(!0),void(t&&(clearTimeout(t),t=null));const p=n.querySelector(".endOfContent");if(!p)return;let c=u.target!==n;if(c=c&&"none"!==window.getComputedStyle(p).getPropertyValue("-moz-user-select"),c){const b=n.getBoundingClientRect(),m=Math.max(0,(u.pageY-b.top)/b.height);p.style.top=(100*m).toFixed(2)+"%"}p.classList.add("active")}),n.addEventListener("mouseup",()=>{if(this.enhanceTextSelection&&this.textLayerRenderTask)return void(t=setTimeout(()=>{this.textLayerRenderTask&&this.textLayerRenderTask.expandTextDivs(!1),t=null},300));const u=n.querySelector(".endOfContent");u&&(u.style.top="",u.classList.remove("active"))})}}},(W,s,M)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.XfaLayerBuilder=void 0;var v=M(3);s.XfaLayerBuilder=class C{constructor({pageDiv:x,pdfPage:n,annotationStorage:t=null,linkService:u,xfaHtml:p=null}){this.pageDiv=x,this.pdfPage=n,this.annotationStorage=t,this.linkService=u,this.xfaHtml=p,this.div=null,this._cancelled=!1}render(x,n="display"){if("print"===n){const t={viewport:x.clone({dontFlip:!0}),div:this.div,xfaHtml:this.xfaHtml,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:n},u=document.createElement("div");this.pageDiv.appendChild(u),t.div=u;const p=v.XfaLayer.render(t);return Promise.resolve(p)}return this.pdfPage.getXfa().then(t=>{if(this._cancelled||!t)return{textDivs:[]};const u={viewport:x.clone({dontFlip:!0}),div:this.div,xfaHtml:t,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:n};return this.div?v.XfaLayer.update(u):(this.div=document.createElement("div"),this.pageDiv.appendChild(this.div),u.div=this.div,v.XfaLayer.render(u))}).catch(t=>{console.error(t)})}cancel(){this._cancelled=!0}hide(){this.div&&(this.div.hidden=!0)}}},(W,s,M)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFViewer=s.PDFSinglePageViewer=void 0;var v=M(6),C=M(11);s.PDFViewer=class L extends C.BaseViewer{},s.PDFSinglePageViewer=class x extends C.BaseViewer{_resetView(){super._resetView(),this._scrollMode=v.ScrollMode.PAGE,this._spreadMode=v.SpreadMode.NONE}set scrollMode(t){}_updateScrollMode(){}set spreadMode(t){}_updateSpreadMode(){}}},(W,s,M)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PagesCountLimit=s.PDFPageViewBuffer=s.BaseViewer=void 0;var v=M(3),C=M(6),L=M(2),x=M(4),n=M(12),t=M(14),u=M(5),p=M(7),c=M(15),b=M(8),m=M(9);const w="enablePermissions",F={FORCE_SCROLL_MODE_PAGE:15e3,FORCE_LAZY_PAGE_INIT:7500,PAUSE_EAGER_PAGE_INIT:250};s.PagesCountLimit=F;var B=new WeakMap,z=new WeakMap,J=new WeakSet;class X{constructor(y){T(this,J),U(this,B,new Set),U(this,z,0),P(z,this,y)}push(y){const E=A(B,this);E.has(y)&&E.delete(y),E.add(y),E.size>A(z,this)&&O(J,this,oe).call(this)}resize(y,E=null){P(z,this,y);const ee=A(B,this);if(E){const ne=ee.size;let Z=1;for(const q of ee)if(E.has(q.id)&&(ee.delete(q),ee.add(q)),++Z>ne)break}for(;ee.size>A(z,this);)O(J,this,oe).call(this)}has(y){return A(B,this).has(y)}[Symbol.iterator](){return A(B,this).keys()}}function oe(){const ce=A(B,this).keys().next().value;ce?.destroy(),A(B,this).delete(ce)}s.PDFPageViewBuffer=X;var de=new WeakMap,he=new WeakMap,N=new WeakMap,o=new WeakMap,e=new WeakMap,r=new WeakMap,a=new WeakMap,g=new WeakSet;class f{constructor(y){if(T(this,g),U(this,de,null),U(this,he,v.AnnotationMode.ENABLE_FORMS),U(this,N,null),U(this,o,!1),U(this,e,0),U(this,r,null),U(this,a,null),this.constructor===f)throw new Error("Cannot initialize BaseViewer.");const E="2.14.305";if(v.version!==E)throw new Error(`The API version "${v.version}" does not match the Viewer version "${E}".`);if(this.container=y.container,this.viewer=y.viewer||y.container.firstElementChild,"DIV"!==this.container?.tagName.toUpperCase()||"DIV"!==this.viewer?.tagName.toUpperCase())throw new Error("Invalid `container` and/or `viewer` option.");if(this.container.offsetParent&&"absolute"!==getComputedStyle(this.container).position)throw new Error("The `container` must be absolutely positioned.");this.eventBus=y.eventBus,this.linkService=y.linkService||new u.SimpleLinkService,this.downloadManager=y.downloadManager||null,this.findController=y.findController||null,this._scriptingManager=y.scriptingManager||null,this.removePageBorders=y.removePageBorders||!1,this.textLayerMode=y.textLayerMode??C.TextLayerMode.ENABLE,P(he,this,y.annotationMode??v.AnnotationMode.ENABLE_FORMS),this.imageResourcesPath=y.imageResourcesPath||"",this.enablePrintAutoRotate=y.enablePrintAutoRotate||!1,this.renderer=y.renderer||C.RendererType.CANVAS,this.useOnlyCssZoom=y.useOnlyCssZoom||!1,this.maxCanvasPixels=y.maxCanvasPixels,this.l10n=y.l10n||x.NullL10n,P(o,this,y.enablePermissions||!1),this.pageColors=y.pageColors||null,y.pageColors&&(!CSS.supports("color",y.pageColors.background)||!CSS.supports("color",y.pageColors.foreground))&&((y.pageColors.background||y.pageColors.foreground)&&console.warn("Ignoring `pageColors`-option, since the browser doesn't support the values used."),this.pageColors=null),this.defaultRenderingQueue=!y.renderingQueue,this.defaultRenderingQueue?(this.renderingQueue=new t.PDFRenderingQueue,this.renderingQueue.setViewer(this)):this.renderingQueue=y.renderingQueue,this._doc=document.documentElement,this.scroll=(0,C.watchScroll)(this.container,this._scrollUpdate.bind(this)),this.presentationModeState=C.PresentationModeState.UNKNOWN,this._onBeforeDraw=this._onAfterDraw=null,this._resetView(),this.removePageBorders&&this.viewer.classList.add("removePageBorders"),this.updateContainerHeightCss(),Promise.resolve().then(()=>{this.eventBus.dispatch("baseviewerinit",{source:this})})}get pagesCount(){return this._pages.length}getPageView(y){return this._pages[y]}get pageViewsReady(){return!!this._pagesCapability.settled&&this._pages.every(function(y){return y?.pdfPage})}get renderForms(){return A(he,this)===v.AnnotationMode.ENABLE_FORMS}get enableScripting(){return!!this._scriptingManager}get currentPageNumber(){return this._currentPageNumber}set currentPageNumber(y){if(!Number.isInteger(y))throw new Error("Invalid page number.");this.pdfDocument&&(this._setCurrentPageNumber(y,!0)||console.error(`currentPageNumber: "${y}" is not a valid page.`))}_setCurrentPageNumber(y,E=!1){if(this._currentPageNumber===y)return E&&O(g,this,$).call(this),!0;if(!(0<y&&y<=this.pagesCount))return!1;const ee=this._currentPageNumber;return this._currentPageNumber=y,this.eventBus.dispatch("pagechanging",{source:this,pageNumber:y,pageLabel:this._pageLabels?.[y-1]??null,previous:ee}),E&&O(g,this,$).call(this),!0}get currentPageLabel(){return this._pageLabels?.[this._currentPageNumber-1]??null}set currentPageLabel(y){if(!this.pdfDocument)return;let E=0|y;if(this._pageLabels){const ee=this._pageLabels.indexOf(y);ee>=0&&(E=ee+1)}this._setCurrentPageNumber(E,!0)||console.error(`currentPageLabel: "${y}" is not a valid page.`)}get currentScale(){return this._currentScale!==C.UNKNOWN_SCALE?this._currentScale:C.DEFAULT_SCALE}set currentScale(y){if(isNaN(y))throw new Error("Invalid numeric scale.");this.pdfDocument&&this._setScale(y,!1)}get currentScaleValue(){return this._currentScaleValue}set currentScaleValue(y){this.pdfDocument&&this._setScale(y,!1)}get pagesRotation(){return this._pagesRotation}set pagesRotation(y){if(!(0,C.isValidRotation)(y))throw new Error("Invalid pages rotation angle.");if(!this.pdfDocument||((y%=360)<0&&(y+=360),this._pagesRotation===y))return;this._pagesRotation=y;const E=this._currentPageNumber,ee={rotation:y};for(const ne of this._pages)ne.update(ee);this._currentScaleValue&&this._setScale(this._currentScaleValue,!0),this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:y,pageNumber:E}),this.defaultRenderingQueue&&this.update()}get firstPagePromise(){return this.pdfDocument?this._firstPageCapability.promise:null}get onePageRendered(){return this.pdfDocument?this._onePageRenderedCapability.promise:null}get pagesPromise(){return this.pdfDocument?this._pagesCapability.promise:null}setDocument(y){var E=this;if(this.pdfDocument&&(this.eventBus.dispatch("pagesdestroy",{source:this}),this._cancelRendering(),this._resetView(),this.findController&&this.findController.setDocument(null),this._scriptingManager&&this._scriptingManager.setDocument(null)),this.pdfDocument=y,!y)return;const ee=y.isPureXfa,ne=y.numPages,Z=y.getPage(1),q=y.getOptionalContentConfig(),te=A(o,this)?y.getPermissions():Promise.resolve();if(ne>F.FORCE_SCROLL_MODE_PAGE){console.warn("Forcing PAGE-scrolling for performance reasons, given the length of the document.");const ae=this._scrollMode=C.ScrollMode.PAGE;this.eventBus.dispatch("scrollmodechanged",{source:this,mode:ae})}this._pagesCapability.promise.then(()=>{this.eventBus.dispatch("pagesloaded",{source:this,pagesCount:ne})},()=>{}),this._onBeforeDraw=ae=>{const le=this._pages[ae.pageNumber-1];le&&A(de,this).push(le)},this.eventBus._on("pagerender",this._onBeforeDraw),this._onAfterDraw=ae=>{ae.cssTransform||this._onePageRenderedCapability.settled||(this._onePageRenderedCapability.resolve({timestamp:ae.timestamp}),this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null,A(a,this)&&(document.removeEventListener("visibilitychange",A(a,this)),P(a,this,null)))},this.eventBus._on("pagerendered",this._onAfterDraw),Promise.all([Z,te]).then(([ae,le])=>{if(y!==this.pdfDocument)return;this._firstPageCapability.resolve(ae),this._optionalContentConfigPromise=q,O(g,this,h).call(this,le);const ge=this._scrollMode===C.ScrollMode.PAGE?null:this.viewer,_e=this.currentScale,Ae=ae.getViewport({scale:_e*v.PixelsPerInch.PDF_TO_CSS_UNITS}),ye=this.textLayerMode===C.TextLayerMode.DISABLE||ee?null:this,ie=A(he,this)!==v.AnnotationMode.DISABLE?this:null,H=ee?this:null;for(let ue=1;ue<=ne;++ue){const me=new n.PDFPageView({container:ge,eventBus:this.eventBus,id:ue,scale:_e,defaultViewport:Ae.clone(),optionalContentConfigPromise:q,renderingQueue:this.renderingQueue,textLayerFactory:ye,textLayerMode:this.textLayerMode,annotationLayerFactory:ie,annotationMode:A(he,this),xfaLayerFactory:H,textHighlighterFactory:this,structTreeLayerFactory:this,imageResourcesPath:this.imageResourcesPath,renderer:this.renderer,useOnlyCssZoom:this.useOnlyCssZoom,maxCanvasPixels:this.maxCanvasPixels,pageColors:this.pageColors,l10n:this.l10n});this._pages.push(me)}const K=this._pages[0];K&&(K.setPdfPage(ae),this.linkService.cachePageRef(1,ae.ref)),this._scrollMode===C.ScrollMode.PAGE?O(g,this,G).call(this):this._spreadMode!==C.SpreadMode.NONE&&this._updateSpreadMode(),O(g,this,k).call(this).then(_(function*(){if(E.findController&&E.findController.setDocument(y),E._scriptingManager&&E._scriptingManager.setDocument(y),y.loadingParams.disableAutoFetch||ne>F.FORCE_LAZY_PAGE_INIT)return void E._pagesCapability.resolve();let ue=ne-1;if(ue<=0)E._pagesCapability.resolve();else for(let me=2;me<=ne;++me){const ve=y.getPage(me).then(be=>{const xe=E._pages[me-1];xe.pdfPage||xe.setPdfPage(be),E.linkService.cachePageRef(me,be.ref),0==--ue&&E._pagesCapability.resolve()},be=>{console.error(`Unable to get page ${me} to initialize viewer`,be),0==--ue&&E._pagesCapability.resolve()});me%F.PAUSE_EAGER_PAGE_INIT==0&&(yield ve)}})),this.eventBus.dispatch("pagesinit",{source:this}),y.getMetadata().then(({info:ue})=>{y===this.pdfDocument&&ue.Language&&(this.viewer.lang=ue.Language)}),this.defaultRenderingQueue&&this.update()}).catch(ae=>{console.error("Unable to initialize viewer",ae),this._pagesCapability.reject(ae)})}setPageLabels(y){if(this.pdfDocument){y?Array.isArray(y)&&this.pdfDocument.numPages===y.length?this._pageLabels=y:(this._pageLabels=null,console.error("setPageLabels: Invalid page labels.")):this._pageLabels=null;for(let E=0,ee=this._pages.length;E<ee;E++)this._pages[E].setPageLabel(this._pageLabels?.[E]??null)}}_resetView(){this._pages=[],this._currentPageNumber=1,this._currentScale=C.UNKNOWN_SCALE,this._currentScaleValue=null,this._pageLabels=null,P(de,this,new X(10)),this._location=null,this._pagesRotation=0,this._optionalContentConfigPromise=null,this._firstPageCapability=(0,v.createPromiseCapability)(),this._onePageRenderedCapability=(0,v.createPromiseCapability)(),this._pagesCapability=(0,v.createPromiseCapability)(),this._scrollMode=C.ScrollMode.VERTICAL,this._previousScrollMode=C.ScrollMode.UNKNOWN,this._spreadMode=C.SpreadMode.NONE,P(r,this,{previousPageNumber:1,scrollDown:!0,pages:[]}),this._onBeforeDraw&&(this.eventBus._off("pagerender",this._onBeforeDraw),this._onBeforeDraw=null),this._onAfterDraw&&(this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null),A(a,this)&&(document.removeEventListener("visibilitychange",A(a,this)),P(a,this,null)),this.viewer.textContent="",this._updateScrollMode(),this.viewer.removeAttribute("lang"),this.viewer.classList.remove(w),null!==A(N,this)&&(P(he,this,A(N,this)),P(N,this,null))}_scrollUpdate(){0!==this.pagesCount&&this.update()}_setScaleUpdatePages(y,E,ee=!1,ne=!1){if(this._currentScaleValue=E.toString(),O(g,this,Y).call(this,y))return void(ne&&this.eventBus.dispatch("scalechanging",{source:this,scale:y,presetValue:E}));this._doc.style.setProperty("--zoom-factor",y);const Z={scale:y};for(const q of this._pages)q.update(Z);if(this._currentScale=y,!ee){let te,q=this._currentPageNumber;this._location&&!(this.isInPresentationMode||this.isChangingPresentationMode)&&(q=this._location.pageNumber,te=[null,{name:"XYZ"},this._location.left,this._location.top,null]),this.scrollPageIntoView({pageNumber:q,destArray:te,allowNegativeOffset:!0})}this.eventBus.dispatch("scalechanging",{source:this,scale:y,presetValue:ne?E:void 0}),this.defaultRenderingQueue&&this.update(),this.updateContainerHeightCss()}get _pageWidthScaleFactor(){return this._spreadMode!==C.SpreadMode.NONE&&this._scrollMode!==C.ScrollMode.HORIZONTAL?2:1}_setScale(y,E=!1){let ee=parseFloat(y);if(ee>0)this._setScaleUpdatePages(ee,y,E,!1);else{const ne=this._pages[this._currentPageNumber-1];if(!ne)return;let Z=C.SCROLLBAR_PADDING,q=C.VERTICAL_PADDING;this.isInPresentationMode?Z=q=4:this.removePageBorders?Z=q=0:this._scrollMode===C.ScrollMode.HORIZONTAL&&([Z,q]=[q,Z]);const te=(this.container.clientWidth-Z)/ne.width*ne.scale/this._pageWidthScaleFactor,ae=(this.container.clientHeight-q)/ne.height*ne.scale;switch(y){case"page-actual":ee=1;break;case"page-width":ee=te;break;case"page-height":ee=ae;break;case"page-fit":ee=Math.min(te,ae);break;case"auto":const le=(0,C.isPortraitOrientation)(ne)?te:Math.min(ae,te);ee=Math.min(C.MAX_AUTO_SCALE,le);break;default:return void console.error(`_setScale: "${y}" is an unknown zoom value.`)}this._setScaleUpdatePages(ee,y,E,!0)}}pageLabelToPageNumber(y){if(!this._pageLabels)return null;const E=this._pageLabels.indexOf(y);return E<0?null:E+1}scrollPageIntoView({pageNumber:y,destArray:E=null,allowNegativeOffset:ee=!1,ignoreDestinationZoom:ne=!1}){if(!this.pdfDocument)return;const Z=Number.isInteger(y)&&this._pages[y-1];if(!Z)return void console.error(`scrollPageIntoView: "${y}" is not a valid pageNumber parameter.`);if(this.isInPresentationMode||!E)return void this._setCurrentPageNumber(y,!0);let ge,_e,q=0,te=0,ae=0,le=0;const Ae=Z.rotation%180!=0,ye=(Ae?Z.height:Z.width)/Z.scale/v.PixelsPerInch.PDF_TO_CSS_UNITS,ie=(Ae?Z.width:Z.height)/Z.scale/v.PixelsPerInch.PDF_TO_CSS_UNITS;let H=0;switch(E[1].name){case"XYZ":q=E[2],te=E[3],H=E[4],q=null!==q?q:0,te=null!==te?te:ie;break;case"Fit":case"FitB":H="page-fit";break;case"FitH":case"FitBH":te=E[2],H="page-width",null===te&&this._location?(q=this._location.left,te=this._location.top):("number"!=typeof te||te<0)&&(te=ie);break;case"FitV":case"FitBV":q=E[2],ae=ye,le=ie,H="page-height";break;case"FitR":q=E[2],te=E[3],ae=E[4]-q,le=E[5]-te,ge=(this.container.clientWidth-(this.removePageBorders?0:C.SCROLLBAR_PADDING))/ae/v.PixelsPerInch.PDF_TO_CSS_UNITS,_e=(this.container.clientHeight-(this.removePageBorders?0:C.VERTICAL_PADDING))/le/v.PixelsPerInch.PDF_TO_CSS_UNITS,H=Math.min(Math.abs(ge),Math.abs(_e));break;default:return void console.error(`scrollPageIntoView: "${E[1].name}" is not a valid destination type.`)}if(ne||(H&&H!==this._currentScale?this.currentScaleValue=H:this._currentScale===C.UNKNOWN_SCALE&&(this.currentScaleValue=C.DEFAULT_SCALE_VALUE)),"page-fit"===H&&!E[4])return void O(g,this,j).call(this,Z);const K=[Z.viewport.convertToViewportPoint(q,te),Z.viewport.convertToViewportPoint(q+ae,te+le)];let ue=Math.min(K[0][0],K[1][0]),me=Math.min(K[0][1],K[1][1]);ee||(ue=Math.max(ue,0),me=Math.max(me,0)),O(g,this,j).call(this,Z,{left:ue,top:me})}_updateLocation(y){const E=this._currentScale,ee=this._currentScaleValue,ne=parseFloat(ee)===E?Math.round(1e4*E)/100:ee,Z=y.id,te=this.container,ae=this._pages[Z-1].getPagePoint(te.scrollLeft-y.x,te.scrollTop-y.y),le=Math.round(ae[0]),ge=Math.round(ae[1]);let _e=`#page=${Z}`;this.isInPresentationMode||(_e+=`&zoom=${ne},${le},${ge}`),this._location={pageNumber:Z,scale:ne,top:ge,left:le,rotation:this._pagesRotation,pdfOpenParams:_e}}update(){const y=this._getVisiblePages(),E=y.views,ee=E.length;if(0===ee)return;const ne=Math.max(10,2*ee+1);A(de,this).resize(ne,y.ids),this.renderingQueue.renderHighestPriority(y);const Z=this._spreadMode===C.SpreadMode.NONE&&(this._scrollMode===C.ScrollMode.PAGE||this._scrollMode===C.ScrollMode.VERTICAL),q=this._currentPageNumber;let te=!1;for(const ae of E){if(ae.percent<100)break;if(ae.id===q&&Z){te=!0;break}}this._setCurrentPageNumber(te?q:E[0].id),this._updateLocation(y.first),this.eventBus.dispatch("updateviewarea",{source:this,location:this._location})}containsElement(y){return this.container.contains(y)}focus(){this.container.focus()}get _isContainerRtl(){return"rtl"===getComputedStyle(this.container).direction}get isInPresentationMode(){return this.presentationModeState===C.PresentationModeState.FULLSCREEN}get isChangingPresentationMode(){return this.presentationModeState===C.PresentationModeState.CHANGING}get isHorizontalScrollbarEnabled(){return!this.isInPresentationMode&&this.container.scrollWidth>this.container.clientWidth}get isVerticalScrollbarEnabled(){return!this.isInPresentationMode&&this.container.scrollHeight>this.container.clientHeight}_getVisiblePages(){const y=this._scrollMode===C.ScrollMode.PAGE?A(r,this).pages:this._pages,E=this._scrollMode===C.ScrollMode.HORIZONTAL;return(0,C.getVisibleElements)({scrollEl:this.container,views:y,sortByVisibility:!0,horizontal:E,rtl:E&&this._isContainerRtl})}isPageVisible(y){return!!this.pdfDocument&&(Number.isInteger(y)&&y>0&&y<=this.pagesCount?this._getVisiblePages().ids.has(y):(console.error(`isPageVisible: "${y}" is not a valid page.`),!1))}isPageCached(y){if(!this.pdfDocument)return!1;if(!(Number.isInteger(y)&&y>0&&y<=this.pagesCount))return console.error(`isPageCached: "${y}" is not a valid page.`),!1;const E=this._pages[y-1];return A(de,this).has(E)}cleanup(){for(const y of this._pages)y.renderingState!==C.RenderingStates.FINISHED&&y.reset()}_cancelRendering(){for(const y of this._pages)y.cancelRendering()}forceRendering(y){const E=y||this._getVisiblePages(),ee=O(g,this,fe).call(this,E),Z=this.renderingQueue.getHighestPriority(E,this._pages,ee,this._spreadMode!==C.SpreadMode.NONE&&this._scrollMode!==C.ScrollMode.HORIZONTAL);return O(g,this,pe).call(this,E.ids),!!Z&&(O(g,this,se).call(this,Z).then(()=>{this.renderingQueue.renderView(Z)}),!0)}createTextLayerBuilder(y,E,ee,ne=!1,Z,q){return new b.TextLayerBuilder({textLayerDiv:y,eventBus:Z,pageIndex:E,viewport:ee,enhanceTextSelection:!this.isInPresentationMode&&ne,highlighter:q})}createTextHighlighter(y,E){return new c.TextHighlighter({eventBus:E,pageIndex:y,findController:this.isInPresentationMode?null:this.findController})}createAnnotationLayerBuilder(y,E,ee=null,ne="",Z=!0,q=x.NullL10n,te=null,ae=null,le=null,ge=null,_e=null){return new L.AnnotationLayerBuilder({pageDiv:y,pdfPage:E,annotationStorage:ee||this.pdfDocument?.annotationStorage,imageResourcesPath:ne,renderForms:Z,linkService:this.linkService,downloadManager:this.downloadManager,l10n:q,enableScripting:te??this.enableScripting,hasJSActionsPromise:ae||this.pdfDocument?.hasJSActions(),fieldObjectsPromise:ge||this.pdfDocument?.getFieldObjects(),mouseState:le||this._scriptingManager?.mouseState,annotationCanvasMap:_e})}createXfaLayerBuilder(y,E,ee=null){return new m.XfaLayerBuilder({pageDiv:y,pdfPage:E,annotationStorage:ee||this.pdfDocument?.annotationStorage,linkService:this.linkService})}createStructTreeLayerBuilder(y){return new p.StructTreeLayerBuilder({pdfPage:y})}get hasEqualPageSizes(){const y=this._pages[0];for(let E=1,ee=this._pages.length;E<ee;++E){const ne=this._pages[E];if(ne.width!==y.width||ne.height!==y.height)return!1}return!0}getPagesOverview(){return this._pages.map(y=>{const E=y.pdfPage.getViewport({scale:1});return!this.enablePrintAutoRotate||(0,C.isPortraitOrientation)(E)?{width:E.width,height:E.height,rotation:E.rotation}:{width:E.height,height:E.width,rotation:(E.rotation-90)%360}})}get optionalContentConfigPromise(){return this.pdfDocument?this._optionalContentConfigPromise?this._optionalContentConfigPromise:this.pdfDocument.getOptionalContentConfig():Promise.resolve(null)}set optionalContentConfigPromise(y){if(!(y instanceof Promise))throw new Error(`Invalid optionalContentConfigPromise: ${y}`);if(!this.pdfDocument||!this._optionalContentConfigPromise)return;this._optionalContentConfigPromise=y;const E={optionalContentConfigPromise:y};for(const ee of this._pages)ee.update(E);this.update(),this.eventBus.dispatch("optionalcontentconfigchanged",{source:this,promise:y})}get scrollMode(){return this._scrollMode}set scrollMode(y){if(this._scrollMode!==y){if(!(0,C.isValidScrollMode)(y))throw new Error(`Invalid scroll mode: ${y}`);this.pagesCount>F.FORCE_SCROLL_MODE_PAGE||(this._previousScrollMode=this._scrollMode,this._scrollMode=y,this.eventBus.dispatch("scrollmodechanged",{source:this,mode:y}),this._updateScrollMode(this._currentPageNumber))}}_updateScrollMode(y=null){const E=this._scrollMode,ee=this.viewer;ee.classList.toggle("scrollHorizontal",E===C.ScrollMode.HORIZONTAL),ee.classList.toggle("scrollWrapped",E===C.ScrollMode.WRAPPED),this.pdfDocument&&y&&(E===C.ScrollMode.PAGE?O(g,this,G).call(this):this._previousScrollMode===C.ScrollMode.PAGE&&this._updateSpreadMode(),this._currentScaleValue&&isNaN(this._currentScaleValue)&&this._setScale(this._currentScaleValue,!0),this._setCurrentPageNumber(y,!0),this.update())}get spreadMode(){return this._spreadMode}set spreadMode(y){if(this._spreadMode!==y){if(!(0,C.isValidSpreadMode)(y))throw new Error(`Invalid spread mode: ${y}`);this._spreadMode=y,this.eventBus.dispatch("spreadmodechanged",{source:this,mode:y}),this._updateSpreadMode(this._currentPageNumber)}}_updateSpreadMode(y=null){if(!this.pdfDocument)return;const E=this.viewer,ee=this._pages;if(this._scrollMode===C.ScrollMode.PAGE)O(g,this,G).call(this);else if(E.textContent="",this._spreadMode===C.SpreadMode.NONE)for(const ne of this._pages)E.appendChild(ne.div);else{const ne=this._spreadMode-1;let Z=null;for(let q=0,te=ee.length;q<te;++q)null===Z?(Z=document.createElement("div"),Z.className="spread",E.appendChild(Z)):q%2===ne&&(Z=Z.cloneNode(!1),E.appendChild(Z)),Z.appendChild(ee[q].div)}y&&(this._currentScaleValue&&isNaN(this._currentScaleValue)&&this._setScale(this._currentScaleValue,!0),this._setCurrentPageNumber(y,!0),this.update())}_getPageAdvance(y,E=!1){switch(this._scrollMode){case C.ScrollMode.WRAPPED:{const{views:ee}=this._getVisiblePages(),ne=new Map;for(const{id:Z,y:q,percent:te,widthPercent:ae}of ee){if(0===te||ae<100)continue;let le=ne.get(q);le||ne.set(q,le||=[]),le.push(Z)}for(const Z of ne.values()){const q=Z.indexOf(y);if(-1===q)continue;const te=Z.length;if(1===te)break;if(E)for(let ae=q-1,le=0;ae>=le;ae--){const _e=Z[ae+1]-1;if(Z[ae]<_e)return y-_e}else for(let ae=q+1,le=te;ae<le;ae++){const _e=Z[ae-1]+1;if(Z[ae]>_e)return _e-y}if(E){const ae=Z[0];if(ae<y)return y-ae+1}else{const ae=Z[te-1];if(ae>y)return ae-y+1}break}break}case C.ScrollMode.HORIZONTAL:break;case C.ScrollMode.PAGE:case C.ScrollMode.VERTICAL:{if(this._spreadMode===C.SpreadMode.NONE)break;const ee=this._spreadMode-1;if(E&&y%2!==ee)break;if(!E&&y%2===ee)break;const{views:ne}=this._getVisiblePages(),Z=E?y-1:y+1;for(const{id:q,percent:te,widthPercent:ae}of ne)if(q===Z){if(te>0&&100===ae)return 2;break}break}}return 1}nextPage(){const y=this._currentPageNumber,E=this.pagesCount;if(y>=E)return!1;const ee=this._getPageAdvance(y,!1)||1;return this.currentPageNumber=Math.min(y+ee,E),!0}previousPage(){const y=this._currentPageNumber;if(y<=1)return!1;const E=this._getPageAdvance(y,!0)||1;return this.currentPageNumber=Math.max(y-E,1),!0}increaseScale(y=1){let E=this._currentScale;do{E=(E*C.DEFAULT_SCALE_DELTA).toFixed(2),E=Math.ceil(10*E)/10,E=Math.min(C.MAX_SCALE,E)}while(--y>0&&E<C.MAX_SCALE);this.currentScaleValue=E}decreaseScale(y=1){let E=this._currentScale;do{E=(E/C.DEFAULT_SCALE_DELTA).toFixed(2),E=Math.floor(10*E)/10,E=Math.max(C.MIN_SCALE,E)}while(--y>0&&E>C.MIN_SCALE);this.currentScaleValue=E}updateContainerHeightCss(){const y=this.container.clientHeight;y!==A(e,this)&&(P(e,this,y),this._doc.style.setProperty("--viewer-container-height",`${y}px`))}}function h(ce){ce&&(ce.includes(v.PermissionFlag.COPY)||this.viewer.classList.add(w),!ce.includes(v.PermissionFlag.MODIFY_ANNOTATIONS)&&!ce.includes(v.PermissionFlag.FILL_INTERACTIVE_FORMS)&&A(he,this)===v.AnnotationMode.ENABLE_FORMS&&(P(N,this,A(he,this)),P(he,this,v.AnnotationMode.ENABLE)))}function k(){if("hidden"===document.visibilityState||!this.container.offsetParent||0===this._getVisiblePages().views.length)return Promise.resolve();const ce=new Promise(y=>{P(a,this,()=>{"hidden"===document.visibilityState&&(y(),document.removeEventListener("visibilitychange",A(a,this)),P(a,this,null))}),document.addEventListener("visibilitychange",A(a,this))});return Promise.race([this._onePageRenderedCapability.promise,ce])}function G(){if(this._scrollMode!==C.ScrollMode.PAGE)throw new Error("#ensurePageViewVisible: Invalid scrollMode value.");const ce=this._currentPageNumber,y=A(r,this),E=this.viewer;if(E.textContent="",y.pages.length=0,this._spreadMode!==C.SpreadMode.NONE||this.isInPresentationMode){const ee=new Set,ne=this._spreadMode-1;-1===ne?ee.add(ce-1):ce%2!==ne?(ee.add(ce-1),ee.add(ce)):(ee.add(ce-2),ee.add(ce-1));const Z=document.createElement("div");if(Z.className="spread",this.isInPresentationMode){const q=document.createElement("div");q.className="dummyPage",Z.appendChild(q)}for(const q of ee){const te=this._pages[q];te&&(Z.appendChild(te.div),y.pages.push(te))}E.appendChild(Z)}else{const ee=this._pages[ce-1];E.appendChild(ee.div),y.pages.push(ee)}y.scrollDown=ce>=y.previousPageNumber,y.previousPageNumber=ce}function j(ce,y=null){const{div:E,id:ee}=ce;if(this._scrollMode===C.ScrollMode.PAGE&&(this._setCurrentPageNumber(ee),O(g,this,G).call(this),this.update()),!y&&!this.isInPresentationMode){const ne=E.offsetLeft+E.clientLeft,Z=ne+E.clientWidth,{scrollLeft:q,clientWidth:te}=this.container;(this._scrollMode===C.ScrollMode.HORIZONTAL||ne<q||Z>q+te)&&(y={left:0,top:0})}(0,C.scrollIntoView)(E,y)}function Y(ce){return ce===this._currentScale||Math.abs(ce-this._currentScale)<1e-15}function $(){const ce=this._pages[this._currentPageNumber-1];this.isInPresentationMode&&this._setScale(this._currentScaleValue,!0),O(g,this,j).call(this,ce)}function se(ce){return re.apply(this,arguments)}function re(){return(re=_(function*(ce){if(ce.pdfPage)return ce.pdfPage;try{const y=yield this.pdfDocument.getPage(ce.id);return ce.pdfPage||ce.setPdfPage(y),this.linkService._cachedPageNumber?.(y.ref)||this.linkService.cachePageRef(ce.id,y.ref),y}catch(y){return console.error("Unable to get page for page view",y),null}})).apply(this,arguments)}function fe(ce){if(1===ce.first?.id)return!0;if(ce.last?.id===this.pagesCount)return!1;switch(this._scrollMode){case C.ScrollMode.PAGE:return A(r,this).scrollDown;case C.ScrollMode.HORIZONTAL:return this.scroll.right}return this.scroll.down}function pe(ce){for(const y of ce)this._pages[y-1]?.toggleLoadingIconSpinner(!0);for(const y of A(de,this))ce.has(y.id)||y.toggleLoadingIconSpinner(!1)}s.BaseViewer=f},(W,s,M)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFPageView=void 0;var v=M(3),C=M(6),L=M(13),x=M(4);const n=L.compatibilityParams.maxCanvasPixels||16777216;var t=new WeakMap;s.PDFPageView=class u{constructor(c){U(this,t,v.AnnotationMode.ENABLE_FORMS);const b=c.container,m=c.defaultViewport;this.id=c.id,this.renderingId="page"+this.id,this.pdfPage=null,this.pageLabel=null,this.rotation=0,this.scale=c.scale||C.DEFAULT_SCALE,this.viewport=m,this.pdfPageRotate=m.rotation,this._optionalContentConfigPromise=c.optionalContentConfigPromise||null,this.hasRestrictedScaling=!1,this.textLayerMode=c.textLayerMode??C.TextLayerMode.ENABLE,P(t,this,c.annotationMode??v.AnnotationMode.ENABLE_FORMS),this.imageResourcesPath=c.imageResourcesPath||"",this.useOnlyCssZoom=c.useOnlyCssZoom||!1,this.maxCanvasPixels=c.maxCanvasPixels||n,this.pageColors=c.pageColors||null,this.eventBus=c.eventBus,this.renderingQueue=c.renderingQueue,this.textLayerFactory=c.textLayerFactory,this.annotationLayerFactory=c.annotationLayerFactory,this.xfaLayerFactory=c.xfaLayerFactory,this.textHighlighter=c.textHighlighterFactory?.createTextHighlighter(this.id-1,this.eventBus),this.structTreeLayerFactory=c.structTreeLayerFactory,this.renderer=c.renderer||C.RendererType.CANVAS,this.l10n=c.l10n||x.NullL10n,this.paintTask=null,this.paintedViewportMap=new WeakMap,this.renderingState=C.RenderingStates.INITIAL,this.resume=null,this._renderError=null,this._isStandalone=!this.renderingQueue?.hasViewer(),this._annotationCanvasMap=null,this.annotationLayer=null,this.textLayer=null,this.zoomLayer=null,this.xfaLayer=null,this.structTreeLayer=null;const d=document.createElement("div");d.className="page",d.style.width=Math.floor(this.viewport.width)+"px",d.style.height=Math.floor(this.viewport.height)+"px",d.setAttribute("data-page-number",this.id),d.setAttribute("role","region"),this.l10n.get("page_landmark",{page:this.id}).then(w=>{d.setAttribute("aria-label",w)}),this.div=d,b?.appendChild(d)}setPdfPage(c){this.pdfPage=c,this.pdfPageRotate=c.rotate,this.viewport=c.getViewport({scale:this.scale*v.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:(this.rotation+this.pdfPageRotate)%360}),this.reset()}destroy(){this.reset(),this.pdfPage&&this.pdfPage.cleanup()}_renderAnnotationLayer(){var c=this;return _(function*(){let b=null;try{yield c.annotationLayer.render(c.viewport,"display")}catch(m){b=m}finally{c.eventBus.dispatch("annotationlayerrendered",{source:c,pageNumber:c.id,error:b})}})()}_renderXfaLayer(){var c=this;return _(function*(){let b=null;try{const m=yield c.xfaLayer.render(c.viewport,"display");c.textHighlighter&&c._buildXfaTextContentItems(m.textDivs)}catch(m){b=m}finally{c.eventBus.dispatch("xfalayerrendered",{source:c,pageNumber:c.id,error:b})}})()}_buildXfaTextContentItems(c){var b=this;return _(function*(){const m=yield b.pdfPage.getTextContent(),d=[];for(const w of m.items)d.push(w.str);b.textHighlighter.setTextMapping(c,d),b.textHighlighter.enable()})()}_resetZoomLayer(c=!1){if(!this.zoomLayer)return;const b=this.zoomLayer.firstChild;this.paintedViewportMap.delete(b),b.width=0,b.height=0,c&&this.zoomLayer.remove(),this.zoomLayer=null}reset({keepZoomLayer:c=!1,keepAnnotationLayer:b=!1,keepXfaLayer:m=!1}={}){this.cancelRendering({keepAnnotationLayer:b,keepXfaLayer:m}),this.renderingState=C.RenderingStates.INITIAL;const d=this.div;d.style.width=Math.floor(this.viewport.width)+"px",d.style.height=Math.floor(this.viewport.height)+"px";const w=d.childNodes,F=c&&this.zoomLayer||null,B=b&&this.annotationLayer?.div||null,z=m&&this.xfaLayer?.div||null;for(let J=w.length-1;J>=0;J--){const X=w[J];switch(X){case F:case B:case z:continue}X.remove()}d.removeAttribute("data-loaded"),B&&this.annotationLayer.hide(),z&&this.xfaLayer.hide(),F||(this.canvas&&(this.paintedViewportMap.delete(this.canvas),this.canvas.width=0,this.canvas.height=0,delete this.canvas),this._resetZoomLayer()),this.svg&&(this.paintedViewportMap.delete(this.svg),delete this.svg),this.loadingIconDiv=document.createElement("div"),this.loadingIconDiv.className="loadingIcon notVisible",this._isStandalone&&this.toggleLoadingIconSpinner(!0),this.loadingIconDiv.setAttribute("role","img"),this.l10n.get("loading").then(J=>{this.loadingIconDiv?.setAttribute("aria-label",J)}),d.appendChild(this.loadingIconDiv)}update({scale:c=0,rotation:b=null,optionalContentConfigPromise:m=null}){if(this.scale=c||this.scale,"number"==typeof b&&(this.rotation=b),m instanceof Promise&&(this._optionalContentConfigPromise=m),this.viewport=this.viewport.clone({scale:this.scale*v.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:(this.rotation+this.pdfPageRotate)%360}),this._isStandalone){const{style:F}=document.documentElement;F.setProperty("--zoom-factor",this.scale)}if(this.svg)return this.cssTransform({target:this.svg,redrawAnnotationLayer:!0,redrawXfaLayer:!0}),void this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this._renderError});let w=!1;if(this.canvas&&this.maxCanvasPixels>0){const F=this.outputScale;(Math.floor(this.viewport.width)*F.sx|0)*(Math.floor(this.viewport.height)*F.sy|0)>this.maxCanvasPixels&&(w=!0)}if(this.canvas){if(this.useOnlyCssZoom||this.hasRestrictedScaling&&w)return this.cssTransform({target:this.canvas,redrawAnnotationLayer:!0,redrawXfaLayer:!0}),void this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this._renderError});!this.zoomLayer&&!this.canvas.hidden&&(this.zoomLayer=this.canvas.parentNode,this.zoomLayer.style.position="absolute")}this.zoomLayer&&this.cssTransform({target:this.zoomLayer.firstChild}),this.reset({keepZoomLayer:!0,keepAnnotationLayer:!0,keepXfaLayer:!0})}cancelRendering({keepAnnotationLayer:c=!1,keepXfaLayer:b=!1}={}){this.paintTask&&(this.paintTask.cancel(),this.paintTask=null),this.resume=null,this.textLayer&&(this.textLayer.cancel(),this.textLayer=null),this.annotationLayer&&(!c||!this.annotationLayer.div)&&(this.annotationLayer.cancel(),this.annotationLayer=null,this._annotationCanvasMap=null),this.xfaLayer&&(!b||!this.xfaLayer.div)&&(this.xfaLayer.cancel(),this.xfaLayer=null,this.textHighlighter?.disable()),this._onTextLayerRendered&&(this.eventBus._off("textlayerrendered",this._onTextLayerRendered),this._onTextLayerRendered=null)}cssTransform({target:c,redrawAnnotationLayer:b=!1,redrawXfaLayer:m=!1}){const d=this.viewport.width,w=this.viewport.height,F=this.div;c.style.width=c.parentNode.style.width=F.style.width=Math.floor(d)+"px",c.style.height=c.parentNode.style.height=F.style.height=Math.floor(w)+"px";const B=this.viewport.rotation-this.paintedViewportMap.get(c).rotation,z=Math.abs(B);let J=1,X=1;if((90===z||270===z)&&(J=w/d,X=d/w),c.style.transform=`rotate(${B}deg) scale(${J}, ${X})`,this.textLayer){const oe=this.textLayer.viewport,he=Math.abs(this.viewport.rotation-oe.rotation);let N=d/oe.width;(90===he||270===he)&&(N=d/oe.height);const o=this.textLayer.textLayerDiv;let e,r;switch(he){case 0:e=r=0;break;case 90:e=0,r="-"+o.style.height;break;case 180:e="-"+o.style.width,r="-"+o.style.height;break;case 270:e="-"+o.style.width,r=0;break;default:console.error("Bad rotation value.")}o.style.transform=`rotate(${he}deg) scale(${N}) translate(${e}, ${r})`,o.style.transformOrigin="0% 0%"}b&&this.annotationLayer&&this._renderAnnotationLayer(),m&&this.xfaLayer&&this._renderXfaLayer()}get width(){return this.viewport.width}get height(){return this.viewport.height}getPagePoint(c,b){return this.viewport.convertToPdfPoint(c,b)}toggleLoadingIconSpinner(c=!1){this.loadingIconDiv?.classList.toggle("notVisible",!c)}draw(){var c=this;this.renderingState!==C.RenderingStates.INITIAL&&(console.error("Must be in new state before drawing"),this.reset());const{div:b,pdfPage:m}=this;if(!m)return this.renderingState=C.RenderingStates.FINISHED,this.loadingIconDiv&&(this.loadingIconDiv.remove(),delete this.loadingIconDiv),Promise.reject(new Error("pdfPage is not loaded"));this.renderingState=C.RenderingStates.RUNNING;const d=document.createElement("div");d.style.width=b.style.width,d.style.height=b.style.height,d.classList.add("canvasWrapper"),this.annotationLayer?.div?b.insertBefore(d,this.annotationLayer.div):b.appendChild(d);let w=null;if(this.textLayerMode!==C.TextLayerMode.DISABLE&&this.textLayerFactory){const X=document.createElement("div");X.className="textLayer",X.style.width=d.style.width,X.style.height=d.style.height,this.annotationLayer?.div?b.insertBefore(X,this.annotationLayer.div):b.appendChild(X),w=this.textLayerFactory.createTextLayerBuilder(X,this.id-1,this.viewport,this.textLayerMode===C.TextLayerMode.ENABLE_ENHANCE,this.eventBus,this.textHighlighter)}this.textLayer=w,A(t,this)!==v.AnnotationMode.DISABLE&&this.annotationLayerFactory&&(this._annotationCanvasMap||=new Map,this.annotationLayer||=this.annotationLayerFactory.createAnnotationLayerBuilder(b,m,null,this.imageResourcesPath,A(t,this)===v.AnnotationMode.ENABLE_FORMS,this.l10n,null,null,null,null,this._annotationCanvasMap)),this.xfaLayer?.div&&b.appendChild(this.xfaLayer.div);let F=null;this.renderingQueue&&(F=X=>{if(!this.renderingQueue.isHighestPriority(this))return this.renderingState=C.RenderingStates.PAUSED,void(this.resume=()=>{this.renderingState=C.RenderingStates.RUNNING,X()});X()});const B=function(){var X=_(function*(oe=null){if(z===c.paintTask&&(c.paintTask=null),oe instanceof v.RenderingCancelledException)c._renderError=null;else if(c._renderError=oe,c.renderingState=C.RenderingStates.FINISHED,c.loadingIconDiv&&(c.loadingIconDiv.remove(),delete c.loadingIconDiv),c._resetZoomLayer(!0),c.eventBus.dispatch("pagerendered",{source:c,pageNumber:c.id,cssTransform:!1,timestamp:performance.now(),error:c._renderError}),oe)throw oe});return function(){return X.apply(this,arguments)}}(),z=this.renderer===C.RendererType.SVG?this.paintOnSvg(d):this.paintOnCanvas(d);z.onRenderContinue=F,this.paintTask=z;const J=z.promise.then(()=>B(null).then(()=>{if(w){const X=m.streamTextContent({includeMarkedContent:!0});w.setTextContentStream(X),w.render()}this.annotationLayer&&this._renderAnnotationLayer()}),function(X){return B(X)});return this.xfaLayerFactory&&(this.xfaLayer||(this.xfaLayer=this.xfaLayerFactory.createXfaLayerBuilder(b,m,null)),this._renderXfaLayer()),this.structTreeLayerFactory&&this.textLayer&&this.canvas&&(this._onTextLayerRendered=X=>{X.pageNumber===this.id&&(this.eventBus._off("textlayerrendered",this._onTextLayerRendered),this._onTextLayerRendered=null,this.canvas&&this.pdfPage.getStructTree().then(oe=>{if(!oe||!this.canvas)return;const de=this.structTreeLayer.render(oe);de.classList.add("structTree"),this.canvas.appendChild(de)}))},this.eventBus._on("textlayerrendered",this._onTextLayerRendered),this.structTreeLayer=this.structTreeLayerFactory.createStructTreeLayerBuilder(m)),b.setAttribute("data-loaded",!0),this.eventBus.dispatch("pagerender",{source:this,pageNumber:this.id}),J}paintOnCanvas(c){const b=(0,v.createPromiseCapability)(),m={promise:b.promise,onRenderContinue(o){o()},cancel(){N.cancel()}},d=this.viewport,w=document.createElement("canvas");w.hidden=!0;let F=!0;const B=function(){F&&(w.hidden=!1,F=!1)};c.appendChild(w),this.canvas=w;const z=w.getContext("2d",{alpha:!1}),J=this.outputScale=new C.OutputScale;if(this.useOnlyCssZoom){const o=d.clone({scale:v.PixelsPerInch.PDF_TO_CSS_UNITS});J.sx*=o.width/d.width,J.sy*=o.height/d.height}if(this.maxCanvasPixels>0){const e=Math.sqrt(this.maxCanvasPixels/(d.width*d.height));J.sx>e||J.sy>e?(J.sx=e,J.sy=e,this.hasRestrictedScaling=!0):this.hasRestrictedScaling=!1}const X=(0,C.approximateFraction)(J.sx),oe=(0,C.approximateFraction)(J.sy);w.width=(0,C.roundToDivide)(d.width*J.sx,X[0]),w.height=(0,C.roundToDivide)(d.height*J.sy,oe[0]),w.style.width=(0,C.roundToDivide)(d.width,X[1])+"px",w.style.height=(0,C.roundToDivide)(d.height,oe[1])+"px",this.paintedViewportMap.set(w,d);const he={canvasContext:z,transform:J.scaled?[J.sx,0,0,J.sy,0,0]:null,viewport:this.viewport,annotationMode:A(t,this),optionalContentConfigPromise:this._optionalContentConfigPromise,annotationCanvasMap:this._annotationCanvasMap,pageColors:this.pageColors},N=this.pdfPage.render(he);return N.onContinue=function(o){B(),m.onRenderContinue?m.onRenderContinue(o):o()},N.promise.then(function(){B(),b.resolve()},function(o){B(),b.reject(o)}),m}paintOnSvg(c){let b=!1;const m=()=>{if(b)throw new v.RenderingCancelledException(`Rendering cancelled, page ${this.id}`,"svg")},d=this.pdfPage,w=this.viewport.clone({scale:v.PixelsPerInch.PDF_TO_CSS_UNITS});return{promise:d.getOperatorList({annotationMode:A(t,this)}).then(B=>(m(),new v.SVGGraphics(d.commonObjs,d.objs).getSVG(B,w).then(J=>{m(),this.svg=J,this.paintedViewportMap.set(J,w),J.style.width=c.style.width,J.style.height=c.style.height,this.renderingState=C.RenderingStates.FINISHED,c.appendChild(J)}))),onRenderContinue(B){B()},cancel(){b=!0}}}setPageLabel(c){this.pageLabel="string"==typeof c?c:null,null!==this.pageLabel?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}}},(W,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.compatibilityParams=s.OptionKind=s.AppOptions=void 0;const M=Object.create(null);s.compatibilityParams=M;{const n=navigator.userAgent||"",t=navigator.platform||"",u=navigator.maxTouchPoints||1,p=/Android/.test(n);(/\b(iPad|iPhone|iPod)(?=;)/.test(n)||"MacIntel"===t&&u>1||p)&&(M.maxCanvasPixels=5242880)}const v={VIEWER:2,API:4,WORKER:8,PREFERENCE:128};s.OptionKind=v;const C={annotationMode:{value:2,kind:v.VIEWER+v.PREFERENCE},cursorToolOnLoad:{value:0,kind:v.VIEWER+v.PREFERENCE},defaultUrl:{value:"compressed.tracemonkey-pldi-09.pdf",kind:v.VIEWER},defaultZoomValue:{value:"",kind:v.VIEWER+v.PREFERENCE},disableHistory:{value:!1,kind:v.VIEWER},disablePageLabels:{value:!1,kind:v.VIEWER+v.PREFERENCE},enablePermissions:{value:!1,kind:v.VIEWER+v.PREFERENCE},enablePrintAutoRotate:{value:!0,kind:v.VIEWER+v.PREFERENCE},enableScripting:{value:!0,kind:v.VIEWER+v.PREFERENCE},externalLinkRel:{value:"noopener noreferrer nofollow",kind:v.VIEWER},externalLinkTarget:{value:0,kind:v.VIEWER+v.PREFERENCE},historyUpdateUrl:{value:!1,kind:v.VIEWER+v.PREFERENCE},ignoreDestinationZoom:{value:!1,kind:v.VIEWER+v.PREFERENCE},imageResourcesPath:{value:"./images/",kind:v.VIEWER},maxCanvasPixels:{value:16777216,compatibility:M.maxCanvasPixels,kind:v.VIEWER},pageColorsBackground:{value:"Canvas",kind:v.VIEWER+v.PREFERENCE},pageColorsForeground:{value:"CanvasText",kind:v.VIEWER+v.PREFERENCE},pdfBugEnabled:{value:!1,kind:v.VIEWER+v.PREFERENCE},printResolution:{value:150,kind:v.VIEWER},renderer:{value:"canvas",kind:v.VIEWER},sidebarViewOnLoad:{value:-1,kind:v.VIEWER+v.PREFERENCE},scrollModeOnLoad:{value:-1,kind:v.VIEWER+v.PREFERENCE},spreadModeOnLoad:{value:-1,kind:v.VIEWER+v.PREFERENCE},textLayerMode:{value:1,kind:v.VIEWER+v.PREFERENCE},useOnlyCssZoom:{value:!1,kind:v.VIEWER+v.PREFERENCE},viewerCssTheme:{value:0,kind:v.VIEWER+v.PREFERENCE},viewOnLoad:{value:0,kind:v.VIEWER+v.PREFERENCE},cMapPacked:{value:!0,kind:v.API},cMapUrl:{value:"../web/cmaps/",kind:v.API},disableAutoFetch:{value:!1,kind:v.API+v.PREFERENCE},disableFontFace:{value:!1,kind:v.API+v.PREFERENCE},disableRange:{value:!1,kind:v.API+v.PREFERENCE},disableStream:{value:!1,kind:v.API+v.PREFERENCE},docBaseUrl:{value:"",kind:v.API},enableXfa:{value:!0,kind:v.API+v.PREFERENCE},fontExtraProperties:{value:!1,kind:v.API},isEvalSupported:{value:!0,kind:v.API},maxImageSize:{value:-1,kind:v.API},pdfBug:{value:!1,kind:v.API},standardFontDataUrl:{value:"../web/standard_fonts/",kind:v.API},verbosity:{value:1,kind:v.API},workerPort:{value:null,kind:v.WORKER},workerSrc:{value:"../build/pdf.worker.js",kind:v.WORKER}};C.disablePreferences={value:!1,kind:v.VIEWER},C.locale={value:navigator.language||"en-US",kind:v.VIEWER},C.sandboxBundleSrc={value:"../build/pdf.sandbox.js",kind:v.VIEWER},C.renderer.kind+=v.PREFERENCE;const L=Object.create(null);s.AppOptions=class x{constructor(){throw new Error("Cannot initialize AppOptions.")}static get(t){const u=L[t];if(void 0!==u)return u;const p=C[t];return void 0!==p?p.compatibility??p.value:void 0}static getAll(t=null){const u=Object.create(null);for(const p in C){const c=C[p];if(t){if(!(t&c.kind))continue;if(t===v.PREFERENCE){const m=c.value,d=typeof m;if("boolean"===d||"string"===d||"number"===d&&Number.isInteger(m)){u[p]=m;continue}throw new Error(`Invalid type for preference: ${p}`)}}const b=L[p];u[p]=void 0!==b?b:c.compatibility??c.value}return u}static set(t,u){L[t]=u}static setAll(t){for(const u in t)L[u]=t[u]}static remove(t){delete L[t]}static _hasUserOptions(){return Object.keys(L).length>0}}},(W,s,M)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFRenderingQueue=void 0;var v=M(3),C=M(6);s.PDFRenderingQueue=class x{constructor(){this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1}setViewer(t){this.pdfViewer=t}setThumbnailViewer(t){this.pdfThumbnailViewer=t}isHighestPriority(t){return this.highestPriorityPage===t.renderingId}hasViewer(){return!!this.pdfViewer}renderHighestPriority(t){this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),!this.pdfViewer.forceRendering(t)&&(this.isThumbnailViewEnabled&&this.pdfThumbnailViewer?.forceRendering()||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),3e4)))}getHighestPriority(t,u,p,c=!1){const b=t.views,m=b.length;if(0===m)return null;for(let z=0;z<m;z++){const J=b[z].view;if(!this.isViewFinished(J))return J}const d=t.first.id,w=t.last.id;if(w-d+1>m){const z=t.ids;for(let J=1,X=w-d;J<X;J++){const oe=p?d+J:w-J;if(z.has(oe))continue;const de=u[oe-1];if(!this.isViewFinished(de))return de}}let F=p?w:d-2,B=u[F];return B&&!this.isViewFinished(B)||c&&(F+=p?1:-1,B=u[F],B&&!this.isViewFinished(B))?B:null}isViewFinished(t){return t.renderingState===C.RenderingStates.FINISHED}renderView(t){switch(t.renderingState){case C.RenderingStates.FINISHED:return!1;case C.RenderingStates.PAUSED:this.highestPriorityPage=t.renderingId,t.resume();break;case C.RenderingStates.RUNNING:this.highestPriorityPage=t.renderingId;break;case C.RenderingStates.INITIAL:this.highestPriorityPage=t.renderingId,t.draw().finally(()=>{this.renderHighestPriority()}).catch(u=>{u instanceof v.RenderingCancelledException||console.error(`renderView: "${u}"`)})}return!0}}},(W,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TextHighlighter=void 0,s.TextHighlighter=class M{constructor({findController:C,eventBus:L,pageIndex:x}){this.findController=C,this.matches=[],this.eventBus=L,this.pageIdx=x,this._onUpdateTextLayerMatches=null,this.textDivs=null,this.textContentItemsStr=null,this.enabled=!1}setTextMapping(C,L){this.textDivs=C,this.textContentItemsStr=L}enable(){if(!this.textDivs||!this.textContentItemsStr)throw new Error("Text divs and strings have not been set.");if(this.enabled)throw new Error("TextHighlighter is already enabled.");this.enabled=!0,this._onUpdateTextLayerMatches||(this._onUpdateTextLayerMatches=C=>{(C.pageIndex===this.pageIdx||-1===C.pageIndex)&&this._updateMatches()},this.eventBus._on("updatetextlayermatches",this._onUpdateTextLayerMatches)),this._updateMatches()}disable(){this.enabled&&(this.enabled=!1,this._onUpdateTextLayerMatches&&(this.eventBus._off("updatetextlayermatches",this._onUpdateTextLayerMatches),this._onUpdateTextLayerMatches=null))}_convertMatches(C,L){if(!C)return[];const{textContentItemsStr:x}=this;let n=0,t=0;const u=x.length-1,p=[];for(let c=0,b=C.length;c<b;c++){let m=C[c];for(;n!==u&&m>=t+x[n].length;)t+=x[n].length,n++;n===x.length&&console.error("Could not find a matching mapping");const d={begin:{divIdx:n,offset:m-t}};for(m+=L[c];n!==u&&m>t+x[n].length;)t+=x[n].length,n++;d.end={divIdx:n,offset:m-t},p.push(d)}return p}_renderMatches(C){if(0===C.length)return;const{findController:L,pageIdx:x}=this,{textContentItemsStr:n,textDivs:t}=this,u=x===L.selected.pageIdx,p=L.selected.matchIdx;let b=null;function d(z,J){const X=z.divIdx;return t[X].textContent="",w(X,0,z.offset,J)}function w(z,J,X,oe){let de=t[z];if(de.nodeType===Node.TEXT_NODE){const o=document.createElement("span");de.parentNode.insertBefore(o,de),o.appendChild(de),t[z]=o,de=o}const he=n[z].substring(J,X),N=document.createTextNode(he);if(oe){const o=document.createElement("span");return o.className=`${oe} appended`,o.appendChild(N),de.appendChild(o),oe.includes("selected")?o.offsetLeft:0}return de.appendChild(N),0}let F=p,B=F+1;if(L.state.highlightAll)F=0,B=C.length;else if(!u)return;for(let z=F;z<B;z++){const J=C[z],X=J.begin,oe=J.end,de=u&&z===p,he=de?" selected":"";let N=0;if(b&&X.divIdx===b.divIdx?w(b.divIdx,b.offset,X.offset):(null!==b&&w(b.divIdx,b.offset,undefined),d(X)),X.divIdx===oe.divIdx)N=w(X.divIdx,X.offset,oe.offset,"highlight"+he);else{N=w(X.divIdx,X.offset,undefined,"highlight begin"+he);for(let o=X.divIdx+1,e=oe.divIdx;o<e;o++)t[o].className="highlight middle"+he;d(oe,"highlight end"+he)}b=oe,de&&L.scrollMatchIntoView({element:t[X.divIdx],selectedLeft:N,pageIndex:x,matchIndex:p})}b&&w(b.divIdx,b.offset,undefined)}_updateMatches(){if(!this.enabled)return;const{findController:C,matches:L,pageIdx:x}=this,{textContentItemsStr:n,textDivs:t}=this;let u=-1;for(let b=0,m=L.length;b<m;b++){const d=L[b];for(let F=Math.max(u,d.begin.divIdx),B=d.end.divIdx;F<=B;F++){const z=t[F];z.textContent=n[F],z.className=""}u=d.end.divIdx+1}C?.highlightMatches&&(this.matches=this._convertMatches(C.pageMatches[x]||null,C.pageMatchesLength[x]||null),this._renderMatches(this.matches))}}},(W,s,M)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DownloadManager=void 0;var v=M(3);function C(x,n){const t=document.createElement("a");if(!t.click)throw new Error('DownloadManager: "a.click()" is not supported.');t.href=x,t.target="_parent","download"in t&&(t.download=n),(document.body||document.documentElement).appendChild(t),t.click(),t.remove()}s.DownloadManager=class L{constructor(){this._openBlobUrls=new WeakMap}downloadUrl(n,t){(0,v.createValidAbsoluteUrl)(n,"http://example.com")?C(n+"#pdfjs.action=download",t):console.error(`downloadUrl - not a valid URL: ${n}`)}downloadData(n,t,u){C(URL.createObjectURL(new Blob([n],{type:u})),t)}openOrDownloadData(n,t,u){const p=(0,v.isPdfFile)(u),c=p?"application/pdf":"";if(p){let m,b=this._openBlobUrls.get(n);b||(b=URL.createObjectURL(new Blob([t],{type:c})),this._openBlobUrls.set(n,b)),m="?file="+encodeURIComponent(b+"#"+u);try{return window.open(m),!0}catch(d){console.error(`openOrDownloadData: ${d}`),URL.revokeObjectURL(b),this._openBlobUrls.delete(n)}}return this.downloadData(t,u,c),!1}download(n,t,u,p="download"){C(URL.createObjectURL(n),u)}}},(W,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WaitOnType=s.EventBus=s.AutomationEventBus=void 0,s.waitOnEventOrTimeout=function v({target:x,name:n,delay:t=0}){return new Promise(function(u,p){if("object"!=typeof x||!n||"string"!=typeof n||!(Number.isInteger(t)&&t>=0))throw new Error("waitOnEventOrTimeout - invalid parameters.");function c(w){x instanceof C?x._off(n,b):x.removeEventListener(n,b),d&&clearTimeout(d),u(w)}const b=c.bind(null,M.EVENT);x instanceof C?x._on(n,b):x.addEventListener(n,b);const m=c.bind(null,M.TIMEOUT),d=setTimeout(m,t)})};const M={EVENT:"event",TIMEOUT:"timeout"};s.WaitOnType=M;class C{constructor(){this._listeners=Object.create(null)}on(n,t,u=null){this._on(n,t,{external:!0,once:u?.once})}off(n,t,u=null){this._off(n,t,{external:!0,once:u?.once})}dispatch(n,t){const u=this._listeners[n];if(!u||0===u.length)return;let p;for(const{listener:c,external:b,once:m}of u.slice(0))m&&this._off(n,c),b?(p||=[]).push(c):c(t);if(p){for(const c of p)c(t);p=null}}_on(n,t,u=null){(this._listeners[n]||=[]).push({listener:t,external:!0===u?.external,once:!0===u?.once})}_off(n,t,u=null){const p=this._listeners[n];if(p)for(let c=0,b=p.length;c<b;c++)if(p[c].listener===t)return void p.splice(c,1)}}s.EventBus=C,s.AutomationEventBus=class L extends C{dispatch(n,t){throw new Error("Not implemented: AutomationEventBus.dispatch")}}},(W,s,M)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.GenericL10n=void 0,M(19);var v=M(4);const C=document.webL10n;s.GenericL10n=class L{constructor(n){this._lang=n,this._ready=new Promise((t,u)=>{C.setLanguage((0,v.fixupLangCode)(n),()=>{t(C)})})}getLanguage(){var n=this;return _(function*(){return(yield n._ready).getLanguage()})()}getDirection(){var n=this;return _(function*(){return(yield n._ready).getDirection()})()}get(n,t=null,u=(0,v.getL10nFallback)(n,t)){var p=this;return _(function*(){return(yield p._ready).get(n,t,u)})()}translate(n){var t=this;return _(function*(){return(yield t._ready).translate(n)})()}}},()=>{document.webL10n=function(W,s,M){var v={},C="",L="textContent",x="",n={},t="loading",u=!0;function d(o,e,r){e=e||function(f){},r=r||function(){};var a=new XMLHttpRequest;a.open("GET",o,u),a.overrideMimeType&&a.overrideMimeType("text/plain; charset=utf-8"),a.onreadystatechange=function(){4==a.readyState&&(200==a.status||0===a.status?e(a.responseText):r())},a.onerror=r,a.ontimeout=r;try{a.send(null)}catch{r()}}function F(o,e){o&&(o=o.toLowerCase()),e=e||function(){},function B(){v={},C="",x=""}(),x=o;var r=function p(){return s.querySelectorAll('link[type="application/l10n"]')}(),a=r.length;if(0!==a){var k,G=0;k=function(){++G>=a&&(e(),t="complete")};for(var Y=0;Y<a;Y++)new j(r[Y]).load(o,k)}else{var g=function c(){var o=s.querySelector('script[type="application/l10n"]');return o?JSON.parse(o.innerHTML):null}();if(g&&g.locales&&g.default_locale){if(console.log("using the embedded JSON directory, early way out"),!(v=g.locales[o])){var f=g.default_locale.toLowerCase();for(var h in g.locales){if((h=h.toLowerCase())===o){v=g.locales[o];break}h===f&&(v=g.locales[f])}}e()}else console.log("no resource to load, early way out");t="complete"}function j(se){var re=se.href;this.load=function(fe,pe){!function w(o,e,r,a){var g=o.replace(/[^\/]*$/,"")||"./";function f(k){return k.lastIndexOf("\\")<0?k:k.replace(/\\\\/g,"\\").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\b/g,"\b").replace(/\\f/g,"\f").replace(/\\{/g,"{").replace(/\\}/g,"}").replace(/\\"/g,'"').replace(/\\'/g,"'")}d(o,function(k){C+=k,function h(k,G){var j={},Y=/^\s*|\s*$/,$=/^\s*#|^\s*$/,se=/^\s*\[(.*)\]\s*$/,re=/^\s*@import\s+url\((.*)\)\s*$/i,fe=/^([^=\s]*)\s*=\s*(.+)$/;function pe(y,E,ee){var ne=y.replace(Y,"").split(/[\r\n]+/),Z="*",q=e.split("-",1)[0],te=!1,ae="";!function le(){for(;;){if(!ne.length)return void ee();var ge=ne.shift();if(!$.test(ge)){if(E){if(ae=se.exec(ge)){Z=ae[1].toLowerCase(),te="*"!==Z&&Z!==e&&Z!==q;continue}if(te)continue;if(ae=re.exec(ge))return void ce(g+ae[1],le)}var _e=ge.match(fe);_e&&3==_e.length&&(j[_e[1]]=f(_e[2]))}}}()}function ce(y,E){d(y,function(ee){pe(ee,!1,E)},function(){console.warn(y+" not found."),E()})}pe(k,!0,function(){G(j)})}(k,function(G){for(var j in G){var Y,$,se=j.lastIndexOf(".");se>0?(Y=j.substring(0,se),$=j.substring(se+1)):(Y=j,$=L),v[Y]||(v[Y]={}),v[Y][$]=G[j]}r&&r()})},a)}(re,fe,pe,function(){console.warn(re+" not found."),console.warn('"'+fe+'" resource not found'),x="",pe()})}}}function J(o,e,r){var a=v[o];if(!a){if(console.warn("#"+o+" is undefined."),!r)return null;a=r}var g={};for(var f in a){var h=a[f];h=oe(h=X(h,e,o,f),e,o),g[f]=h}return g}function X(o,e,r,a){var f=/\{\[\s*([a-zA-Z]+)\(([a-zA-Z]+)\)\s*\]\}/.exec(o);if(!f||!f.length)return o;var G,h=f[1],k=f[2];return e&&k in e?G=e[k]:k in v&&(G=v[k]),h in n&&(o=(0,n[h])(o,G,r,a)),o}function oe(o,e,r){return o.replace(/\{\{\s*(.+?)\s*\}\}/g,function(g,f){return e&&f in e?e[f]:f in v?v[f]:(console.log("argument {{"+f+"}} for #"+r+" is undefined."),g)})}function de(o){var e=function m(o){if(!o)return{};var e=o.getAttribute("data-l10n-id"),r=o.getAttribute("data-l10n-args"),a={};if(r)try{a=JSON.parse(r)}catch{console.warn("could not parse arguments for #"+e)}return{id:e,args:a}}(o);if(e.id){var r=J(e.id,e.args);if(!r)return void console.warn("#"+e.id+" is undefined.");if(r[L]){if(0===function he(o){if(o.children)return o.children.length;if(typeof o.childElementCount<"u")return o.childElementCount;for(var e=0,r=0;r<o.childNodes.length;r++)e+=1===o.nodeType?1:0;return e}(o))o[L]=r[L];else{for(var a=o.childNodes,g=!1,f=0,h=a.length;f<h;f++)3===a[f].nodeType&&/\S/.test(a[f].nodeValue)&&(g?a[f].nodeValue="":(a[f].nodeValue=r[L],g=!0));if(!g){var k=s.createTextNode(r[L]);o.insertBefore(k,o.firstChild)}}delete r[L]}for(var G in r)o[G]=r[G]}}return n.plural=function(o,e,r,a){var g=parseFloat(e);if(isNaN(g)||a!=L)return o;n._pluralRules||(n._pluralRules=function z(o){function r(h,k){return-1!==k.indexOf(h)}function a(h,k,G){return k<=h&&h<=G}var g={0:function(h){return"other"},1:function(h){return a(h%100,3,10)?"few":0===h?"zero":a(h%100,11,99)?"many":2==h?"two":1==h?"one":"other"},2:function(h){return 0!==h&&h%10==0?"many":2==h?"two":1==h?"one":"other"},3:function(h){return 1==h?"one":"other"},4:function(h){return a(h,0,1)?"one":"other"},5:function(h){return a(h,0,2)&&2!=h?"one":"other"},6:function(h){return 0===h?"zero":h%10==1&&h%100!=11?"one":"other"},7:function(h){return 2==h?"two":1==h?"one":"other"},8:function(h){return a(h,3,6)?"few":a(h,7,10)?"many":2==h?"two":1==h?"one":"other"},9:function(h){return 0===h||1!=h&&a(h%100,1,19)?"few":1==h?"one":"other"},10:function(h){return a(h%10,2,9)&&!a(h%100,11,19)?"few":h%10!=1||a(h%100,11,19)?"other":"one"},11:function(h){return a(h%10,2,4)&&!a(h%100,12,14)?"few":h%10==0||a(h%10,5,9)||a(h%100,11,14)?"many":h%10==1&&h%100!=11?"one":"other"},12:function(h){return a(h,2,4)?"few":1==h?"one":"other"},13:function(h){return a(h%10,2,4)&&!a(h%100,12,14)?"few":1!=h&&a(h%10,0,1)||a(h%10,5,9)||a(h%100,12,14)?"many":1==h?"one":"other"},14:function(h){return a(h%100,3,4)?"few":h%100==2?"two":h%100==1?"one":"other"},15:function(h){return 0===h||a(h%100,2,10)?"few":a(h%100,11,19)?"many":1==h?"one":"other"},16:function(h){return h%10==1&&11!=h?"one":"other"},17:function(h){return 3==h?"few":0===h?"zero":6==h?"many":2==h?"two":1==h?"one":"other"},18:function(h){return 0===h?"zero":a(h,0,2)&&0!==h&&2!=h?"one":"other"},19:function(h){return a(h,2,10)?"few":a(h,0,1)?"one":"other"},20:function(h){return!a(h%10,3,4)&&h%10!=9||a(h%100,10,19)||a(h%100,70,79)||a(h%100,90,99)?h%1e6==0&&0!==h?"many":h%10!=2||r(h%100,[12,72,92])?h%10!=1||r(h%100,[11,71,91])?"other":"one":"two":"few"},21:function(h){return 0===h?"zero":1==h?"one":"other"},22:function(h){return a(h,0,1)||a(h,11,99)?"one":"other"},23:function(h){return a(h%10,1,2)||h%20==0?"one":"other"},24:function(h){return a(h,3,10)||a(h,13,19)?"few":r(h,[2,12])?"two":r(h,[1,11])?"one":"other"}},f={af:3,ak:4,am:4,ar:1,asa:3,az:0,be:11,bem:3,bez:3,bg:3,bh:4,bm:0,bn:3,bo:0,br:20,brx:3,bs:11,ca:3,cgg:3,chr:3,cs:12,cy:17,da:3,de:3,dv:3,dz:0,ee:3,el:3,en:3,eo:3,es:3,et:3,eu:3,fa:0,ff:5,fi:3,fil:4,fo:3,fr:5,fur:3,fy:3,ga:8,gd:24,gl:3,gsw:3,gu:3,guw:4,gv:23,ha:3,haw:3,he:2,hi:4,hr:11,hu:0,id:0,ig:0,ii:0,is:3,it:3,iu:7,ja:0,jmc:3,jv:0,ka:0,kab:5,kaj:3,kcg:3,kde:0,kea:0,kk:3,kl:3,km:0,kn:0,ko:0,ksb:3,ksh:21,ku:3,kw:7,lag:18,lb:3,lg:3,ln:4,lo:0,lt:10,lv:6,mas:3,mg:4,mk:16,ml:3,mn:3,mo:9,mr:3,ms:0,mt:15,my:0,nah:3,naq:7,nb:3,nd:3,ne:3,nl:3,nn:3,no:3,nr:3,nso:4,ny:3,nyn:3,om:3,or:3,pa:3,pap:3,pl:13,ps:3,pt:3,rm:3,ro:9,rof:3,ru:11,rwk:3,sah:0,saq:3,se:7,seh:3,ses:0,sg:0,sh:11,shi:19,sk:12,sl:14,sma:7,smi:7,smj:7,smn:7,sms:7,sn:3,so:3,sq:3,sr:11,ss:3,ssy:3,st:3,sv:3,sw:3,syr:3,ta:3,te:3,teo:3,th:0,ti:4,tig:3,tk:3,tl:4,tn:3,to:0,tr:0,ts:3,tzm:22,uk:11,ur:3,ve:3,vi:0,vun:3,wa:4,wae:3,wo:0,xh:3,xog:3,yo:0,zh:0,zu:3}[o.replace(/-.*$/,"")];return f in g?g[f]:(console.warn("plural form unknown for ["+o+"]"),function(){return"other"})}(x));var f="["+n._pluralRules(g)+"]";return 0===g&&r+"[zero]"in v?o=v[r+"[zero]"][a]:1==g&&r+"[one]"in v?o=v[r+"[one]"][a]:2==g&&r+"[two]"in v?o=v[r+"[two]"][a]:r+f in v?o=v[r+f][a]:r+"[other]"in v&&(o=v[r+"[other]"][a]),o},{get:function(o,e,r){var f,a=o.lastIndexOf("."),g=L;a>0&&(g=o.substring(a+1),o=o.substring(0,a)),r&&((f={})[g]=r);var h=J(o,e,f);return h&&g in h?h[g]:"{{"+o+"}}"},getData:function(){return v},getText:function(){return C},getLanguage:function(){return x},setLanguage:function(o,e){F(o,function(){e&&e()})},getDirection:function(){var e=x.split("-",1)[0];return["ar","he","fa","ps","ur"].indexOf(e)>=0?"rtl":"ltr"},translate:function N(o){for(var e=function b(o){return o?o.querySelectorAll("*[data-l10n-id]"):[]}(o=o||s.documentElement),r=e.length,a=0;a<r;a++)de(e[a]);de(o)},getReadyState:function(){return t},ready:function(o){o&&("complete"==t||"interactive"==t?W.setTimeout(function(){o()}):s.addEventListener&&s.addEventListener("localized",function e(){s.removeEventListener("localized",e),o()}))}}}(window,document)},(W,s,M)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFFindController=s.FindState=void 0;var v=M(6),C=M(3),L=M(21);const x={FOUND:0,NOT_FOUND:1,WRAPPED:2,PENDING:3};s.FindState=x;const p={"\u2010":"-","\u2018":"'","\u2019":"'","\u201a":"'","\u201b":"'","\u201c":'"',"\u201d":'"',"\u201e":'"',"\u201f":'"',"\xbc":"1/4","\xbd":"1/2","\xbe":"3/4"},c=new Set([12441,12442,2381,2509,2637,2765,2893,3021,3149,3277,3387,3388,3405,3530,3642,3770,3972,4153,4154,5908,5940,6098,6752,6980,7082,7083,7154,7155,11647,43014,43052,43204,43347,43456,43766,44013,3158,3953,3954,3962,3963,3964,3965,3968,3956]),b=[...c.values()].map(y=>String.fromCharCode(y)).join(""),m=new RegExp("\\p{M}+","gu"),d=new RegExp("([.*+?^${}()|[\\]\\\\])|(\\p{P})|(\\s+)|(\\p{M})|(\\p{L})","gu"),w=new RegExp("([^\\p{M}])\\p{M}*$","u"),F=new RegExp("^\\p{M}*([^\\p{M}])","u");let B=null;function z(y){if(!B){const _e=Object.keys(p).join("");B=new RegExp(`([${_e}])|(\\p{M}+(?:-\\n)?)|(\\S-\\n)|(\\n)`,"gum")}const E=[];let ee;for(;null!==(ee=m.exec(y));)E.push([ee[0].length,ee.index]);let ne=y.normalize("NFD");const Z=[[0,0]];let q=0,te=0,ae=0,le=0,ge=!1;return ne=ne.replace(B,(_e,Ae,ye,ie,H,K)=>{if(K-=ae,Ae){const ue=p[_e],me=ue.length;for(let ve=1;ve<me;ve++)Z.push([K-te+ve,te-ve]);return te-=me-1,ue}if(ye){const ue=ye.endsWith("\n"),me=ue?ye.length-2:ye.length;ge=!0;let ve=me;K+le===E[q]?.[1]&&(ve-=E[q][0],++q);for(let be=1;be<ve+1;be++)Z.push([K-1-te+be,te-be]);return te-=ve,ae+=ve,ue?(Z.push([(K+=me-1)-te+1,1+te]),te+=1,ae+=1,le+=1,ye.slice(0,me)):ye}return ie?(Z.push([K-te+1,1+te]),te+=1,ae+=1,le+=1,ie.charAt(0)):(Z.push([K-te+1,te-1]),te-=1,ae+=1,le+=1," ")}),Z.push([ne.length,te]),[ne,Z,ge]}function J(y,E,ee){if(!y)return[E,ee];const ne=E,Z=E+ee;let q=(0,v.binarySearchFirstItem)(y,ae=>ae[0]>=ne);y[q][0]>ne&&--q;let te=(0,v.binarySearchFirstItem)(y,ae=>ae[0]>=Z,q);return y[te][0]>Z&&--te,[ne+y[q][1],ee+y[te][1]-y[q][1]]}var X=new WeakSet;function de(y){if(!y)return;const E=this._pdfDocument,{type:ee}=y;(null===this._state||O(X,this,o).call(this,y))&&(this._dirtyMatch=!0),this._state=y,"highlightallchange"!==ee&&O(X,this,ce).call(this,x.PENDING),this._firstPageCapability.promise.then(()=>{if(!this._pdfDocument||E&&this._pdfDocument!==E)return;O(X,this,f).call(this);const ne=!this._highlightMatches,Z=!!this._findTimeout;this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),ee?this._dirtyMatch?O(X,this,G).call(this):"again"===ee?(O(X,this,G).call(this),ne&&this._state.highlightAll&&O(X,this,k).call(this)):"highlightallchange"===ee?(Z?O(X,this,G).call(this):this._highlightMatches=!0,O(X,this,k).call(this)):O(X,this,G).call(this):this._findTimeout=setTimeout(()=>{O(X,this,G).call(this),this._findTimeout=null},250)})}function he(){this._highlightMatches=!1,this._scrollMatches=!1,this._pdfDocument=null,this._pageMatches=[],this._pageMatchesLength=[],this._state=null,this._selected={pageIdx:-1,matchIdx:-1},this._offset={pageIdx:null,matchIdx:null,wrapped:!1},this._extractTextPromises=[],this._pageContents=[],this._pageDiffs=[],this._hasDiacritics=[],this._matchesCountTotal=0,this._pagesToSearch=null,this._pendingFindMatches=new Set,this._resumePageIdx=null,this._dirtyMatch=!1,clearTimeout(this._findTimeout),this._findTimeout=null,this._firstPageCapability=(0,C.createPromiseCapability)()}function N(y){return y._state.query!==y._rawQuery&&(y._rawQuery=y._state.query,[y._normalizedQuery]=z(y._state.query)),y._normalizedQuery}function o(y){if(y.query!==this._state.query)return!0;switch(y.type){case"again":const E=this._selected.pageIdx+1,ee=this._linkService;return E>=1&&E<=ee.pagesCount&&E!==ee.page&&!ee.isPageVisible(E);case"highlightallchange":return!1}return!0}function e(y,E,ee){let ne=y.slice(0,E).match(w);if(ne){const Z=y.charCodeAt(E),q=ne[1].charCodeAt(0);if((0,L.getCharacterType)(Z)===(0,L.getCharacterType)(q))return!1}if(ne=y.slice(E+ee).match(F),ne){const Z=y.charCodeAt(E+ee-1),q=ne[1].charCodeAt(0);if((0,L.getCharacterType)(Z)===(0,L.getCharacterType)(q))return!1}return!0}function r(y,E,ee,ne){const Z=[],q=[],te=this._pageDiffs[ee];let ae;for(;null!==(ae=y.exec(ne));){if(E&&!O(X,this,e).call(this,ne,ae.index,ae[0].length))continue;const[le,ge]=J(te,ae.index,ae[0].length);ge&&(Z.push(le),q.push(ge))}this._pageMatches[ee]=Z,this._pageMatchesLength[ee]=q}function a(y,E){const{matchDiacritics:ee}=this._state;let ne=!1;return(y=y.replace(d,(q,te,ae,le,ge,_e)=>te?`[ ]*\\${te}[ ]*`:ae?`[ ]*${ae}[ ]*`:le?"[ ]+":ee?ge||_e:ge?c.has(ge.charCodeAt(0))?ge:"":E?(ne=!0,`${_e}\\p{M}*`):_e)).endsWith("[ ]*")&&(y=y.slice(0,y.length-4)),ee&&E&&(ne=!0,y=`${y}(?=[${b}]|[^\\p{M}]|$)`),[ne,y]}function g(y){let E=i(X,this,N);if(0===E.length)return;const{caseSensitive:ee,entireWord:ne,phraseSearch:Z}=this._state,q=this._pageContents[y],te=this._hasDiacritics[y];let ae=!1;if(Z)[ae,E]=O(X,this,a).call(this,E,te);else{const _e=E.match(/\S+/g);_e&&(E=_e.sort().reverse().map(Ae=>{const[ye,ie]=O(X,this,a).call(this,Ae,te);return ae||=ye,`(${ie})`}).join("|"))}E=new RegExp(E,`g${ae?"u":""}${ee?"":"i"}`),O(X,this,r).call(this,E,ne,y,q),this._state.highlightAll&&O(X,this,h).call(this,y),this._resumePageIdx===y&&(this._resumePageIdx=null,O(X,this,Y).call(this));const ge=this._pageMatches[y].length;ge>0&&(this._matchesCountTotal+=ge,O(X,this,pe).call(this))}function f(){if(this._extractTextPromises.length>0)return;let y=Promise.resolve();for(let E=0,ee=this._linkService.pagesCount;E<ee;E++){const ne=(0,C.createPromiseCapability)();this._extractTextPromises[E]=ne.promise,y=y.then(()=>this._pdfDocument.getPage(E+1).then(Z=>Z.getTextContent()).then(Z=>{const q=[];for(const te of Z.items)q.push(te.str),te.hasEOL&&q.push("\n");[this._pageContents[E],this._pageDiffs[E],this._hasDiacritics[E]]=z(q.join("")),ne.resolve()},Z=>{console.error(`Unable to get text content for page ${E+1}`,Z),this._pageContents[E]="",this._pageDiffs[E]=null,this._hasDiacritics[E]=!1,ne.resolve()}))}}function h(y){this._scrollMatches&&this._selected.pageIdx===y&&(this._linkService.page=y+1),this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:y})}function k(){this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:-1})}function G(){const y=this._state.findPrevious,E=this._linkService.page-1,ee=this._linkService.pagesCount;if(this._highlightMatches=!0,this._dirtyMatch){this._dirtyMatch=!1,this._selected.pageIdx=this._selected.matchIdx=-1,this._offset.pageIdx=E,this._offset.matchIdx=null,this._offset.wrapped=!1,this._resumePageIdx=null,this._pageMatches.length=0,this._pageMatchesLength.length=0,this._matchesCountTotal=0,O(X,this,k).call(this);for(let Z=0;Z<ee;Z++)this._pendingFindMatches.has(Z)||(this._pendingFindMatches.add(Z),this._extractTextPromises[Z].then(()=>{this._pendingFindMatches.delete(Z),O(X,this,g).call(this,Z)}))}if(""===i(X,this,N))return void O(X,this,ce).call(this,x.FOUND);if(this._resumePageIdx)return;const ne=this._offset;if(this._pagesToSearch=ee,null!==ne.matchIdx){if(!y&&ne.matchIdx+1<this._pageMatches[ne.pageIdx].length||y&&ne.matchIdx>0)return ne.matchIdx=y?ne.matchIdx-1:ne.matchIdx+1,void O(X,this,se).call(this,!0);O(X,this,$).call(this,y)}O(X,this,Y).call(this)}function j(y){const E=this._offset,ee=y.length,ne=this._state.findPrevious;return ee?(E.matchIdx=ne?ee-1:0,O(X,this,se).call(this,!0),!0):(O(X,this,$).call(this,ne),!!(E.wrapped&&(E.matchIdx=null,this._pagesToSearch<0))&&(O(X,this,se).call(this,!1),!0))}function Y(){null!==this._resumePageIdx&&console.error("There can only be one pending page.");let y=null;do{const E=this._offset.pageIdx;if(y=this._pageMatches[E],!y){this._resumePageIdx=E;break}}while(!O(X,this,j).call(this,y))}function $(y){const E=this._offset,ee=this._linkService.pagesCount;E.pageIdx=y?E.pageIdx-1:E.pageIdx+1,E.matchIdx=null,this._pagesToSearch--,(E.pageIdx>=ee||E.pageIdx<0)&&(E.pageIdx=y?ee-1:0,E.wrapped=!0)}function se(y=!1){let E=x.NOT_FOUND;const ee=this._offset.wrapped;if(this._offset.wrapped=!1,y){const ne=this._selected.pageIdx;this._selected.pageIdx=this._offset.pageIdx,this._selected.matchIdx=this._offset.matchIdx,E=ee?x.WRAPPED:x.FOUND,-1!==ne&&ne!==this._selected.pageIdx&&O(X,this,h).call(this,ne)}O(X,this,ce).call(this,E,this._state.findPrevious),-1!==this._selected.pageIdx&&(this._scrollMatches=!0,O(X,this,h).call(this,this._selected.pageIdx))}function re(y){const E=this._pdfDocument;this._firstPageCapability.promise.then(()=>{!this._pdfDocument||E&&this._pdfDocument!==E||(this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),this._resumePageIdx&&(this._resumePageIdx=null,this._dirtyMatch=!0),O(X,this,ce).call(this,x.FOUND),this._highlightMatches=!1,O(X,this,k).call(this))})}function fe(){const{pageIdx:y,matchIdx:E}=this._selected;let ee=0,ne=this._matchesCountTotal;if(-1!==E){for(let Z=0;Z<y;Z++)ee+=this._pageMatches[Z]?.length||0;ee+=E+1}return(ee<1||ee>ne)&&(ee=ne=0),{current:ee,total:ne}}function pe(){this._eventBus.dispatch("updatefindmatchescount",{source:this,matchesCount:O(X,this,fe).call(this)})}function ce(y,E=!1){this._eventBus.dispatch("updatefindcontrolstate",{source:this,state:y,previous:E,matchesCount:O(X,this,fe).call(this),rawQuery:this._state?.query??null})}s.PDFFindController=class oe{constructor({linkService:E,eventBus:ee}){T(this,X),this._linkService=E,this._eventBus=ee,O(X,this,he).call(this),ee._on("find",O(X,this,de).bind(this)),ee._on("findbarclose",O(X,this,re).bind(this))}get highlightMatches(){return this._highlightMatches}get pageMatches(){return this._pageMatches}get pageMatchesLength(){return this._pageMatchesLength}get selected(){return this._selected}get state(){return this._state}setDocument(E){this._pdfDocument&&O(X,this,he).call(this),E&&(this._pdfDocument=E,this._firstPageCapability.resolve())}scrollMatchIntoView({element:E=null,selectedLeft:ee=0,pageIndex:ne=-1,matchIndex:Z=-1}){this._scrollMatches&&E&&-1!==Z&&Z===this._selected.matchIdx&&-1!==ne&&ne===this._selected.pageIdx&&(this._scrollMatches=!1,(0,v.scrollIntoView)(E,{top:-50,left:ee+-400},!0))}}},(W,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CharacterType=void 0,s.getCharacterType=function m(d){return function v(d){return d<11904}(d)?function C(d){return!(65408&d)}(d)?function n(d){return 32===d||9===d||13===d||10===d}(d)?M.SPACE:function L(d){return d>=97&&d<=122||d>=65&&d<=90}(d)||function x(d){return d>=48&&d<=57}(d)||95===d?M.ALPHA_LETTER:M.PUNCT:function b(d){return 3584==(65408&d)}(d)?M.THAI_LETTER:160===d?M.SPACE:M.ALPHA_LETTER:function t(d){return d>=13312&&d<=40959||d>=63744&&d<=64255}(d)?M.HAN_LETTER:function u(d){return d>=12448&&d<=12543}(d)?M.KATAKANA_LETTER:function p(d){return d>=12352&&d<=12447}(d)?M.HIRAGANA_LETTER:function c(d){return d>=65376&&d<=65439}(d)?M.HALFWIDTH_KATAKANA_LETTER:M.ALPHA_LETTER};const M={SPACE:0,ALPHA_LETTER:1,PUNCT:2,HAN_LETTER:3,KATAKANA_LETTER:4,HIRAGANA_LETTER:5,HALFWIDTH_KATAKANA_LETTER:6,THAI_LETTER:7};s.CharacterType=M},(W,s,M)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFHistory=void 0,s.isDestArraysEqual=c,s.isDestHashesEqual=p;var v=M(6),C=M(17);function t(){return document.location.hash}function p(b,m){return"string"==typeof b&&"string"==typeof m&&(b===m||(0,v.parseQueryString)(b).get("nameddest")===m)}function c(b,m){function d(w,F){if(typeof w!=typeof F||Array.isArray(w)||Array.isArray(F))return!1;if(null!==w&&"object"==typeof w&&null!==F){if(Object.keys(w).length!==Object.keys(F).length)return!1;for(const B in w)if(!d(w[B],F[B]))return!1;return!0}return w===F||Number.isNaN(w)&&Number.isNaN(F)}if(!Array.isArray(b)||!Array.isArray(m)||b.length!==m.length)return!1;for(let w=0,F=b.length;w<F;w++)if(!d(b[w],m[w]))return!1;return!0}s.PDFHistory=class u{constructor({linkService:m,eventBus:d}){this.linkService=m,this.eventBus=d,this._initialized=!1,this._fingerprint="",this.reset(),this._boundEvents=null,this.eventBus._on("pagesinit",()=>{this._isPagesLoaded=!1,this.eventBus._on("pagesloaded",w=>{this._isPagesLoaded=!!w.pagesCount},{once:!0})})}initialize({fingerprint:m,resetHistory:d=!1,updateUrl:w=!1}){if(!m||"string"!=typeof m)return void console.error('PDFHistory.initialize: The "fingerprint" must be a non-empty string.');this._initialized&&this.reset();const F=""!==this._fingerprint&&this._fingerprint!==m;this._fingerprint=m,this._updateUrl=!0===w,this._initialized=!0,this._bindEvents();const B=window.history.state;if(this._popStateInProgress=!1,this._blockHashChange=0,this._currentHash=t(),this._numPositionUpdates=0,this._uid=this._maxUid=0,this._destination=null,this._position=null,!this._isValidState(B,!0)||d){const{hash:J,page:X,rotation:oe}=this._parseCurrentHash(!0);return!J||F||d?void this._pushOrReplaceState(null,!0):void this._pushOrReplaceState({hash:J,page:X,rotation:oe},!0)}const z=B.destination;this._updateInternalState(z,B.uid,!0),void 0!==z.rotation&&(this._initialRotation=z.rotation),z.dest?(this._initialBookmark=JSON.stringify(z.dest),this._destination.page=null):z.hash?this._initialBookmark=z.hash:z.page&&(this._initialBookmark=`page=${z.page}`)}reset(){this._initialized&&(this._pageHide(),this._initialized=!1,this._unbindEvents()),this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._initialBookmark=null,this._initialRotation=null}push({namedDest:m=null,explicitDest:d,pageNumber:w}){if(!this._initialized)return;if(m&&"string"!=typeof m)return void console.error(`PDFHistory.push: "${m}" is not a valid namedDest parameter.`);if(!Array.isArray(d))return void console.error(`PDFHistory.push: "${d}" is not a valid explicitDest parameter.`);if(!this._isValidPage(w)&&(null!==w||this._destination))return void console.error(`PDFHistory.push: "${w}" is not a valid pageNumber parameter.`);const F=m||JSON.stringify(d);if(!F)return;let B=!1;if(this._destination&&(p(this._destination.hash,F)||c(this._destination.dest,d))){if(this._destination.page)return;B=!0}this._popStateInProgress&&!B||(this._pushOrReplaceState({dest:d,hash:F,page:w,rotation:this.linkService.rotation},B),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1})))}pushPage(m){if(this._initialized){if(!this._isValidPage(m))return void console.error(`PDFHistory.pushPage: "${m}" is not a valid page number.`);this._destination?.page!==m&&(this._popStateInProgress||(this._pushOrReplaceState({dest:null,hash:`page=${m}`,page:m,rotation:this.linkService.rotation}),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1}))))}}pushCurrentPosition(){!this._initialized||this._popStateInProgress||this._tryPushCurrentPosition()}back(){if(!this._initialized||this._popStateInProgress)return;const m=window.history.state;this._isValidState(m)&&m.uid>0&&window.history.back()}forward(){if(!this._initialized||this._popStateInProgress)return;const m=window.history.state;this._isValidState(m)&&m.uid<this._maxUid&&window.history.forward()}get popStateInProgress(){return this._initialized&&(this._popStateInProgress||this._blockHashChange>0)}get initialBookmark(){return this._initialized?this._initialBookmark:null}get initialRotation(){return this._initialized?this._initialRotation:null}_pushOrReplaceState(m,d=!1){const w=d||!this._destination,F={fingerprint:this._fingerprint,uid:w?this._uid:this._uid+1,destination:m};let B;if(this._updateInternalState(m,F.uid),this._updateUrl&&m?.hash){const z=document.location.href.split("#")[0];z.startsWith("file://")||(B=`${z}#${m.hash}`)}w?window.history.replaceState(F,"",B):window.history.pushState(F,"",B)}_tryPushCurrentPosition(m=!1){if(!this._position)return;let d=this._position;if(m&&(d=Object.assign(Object.create(null),this._position),d.temporary=!0),!this._destination)return void this._pushOrReplaceState(d);if(this._destination.temporary)return void this._pushOrReplaceState(d,!0);if(this._destination.hash===d.hash||!this._destination.page&&this._numPositionUpdates<=50)return;let w=!1;if(this._destination.page>=d.first&&this._destination.page<=d.page){if(void 0!==this._destination.dest||!this._destination.first)return;w=!0}this._pushOrReplaceState(d,w)}_isValidPage(m){return Number.isInteger(m)&&m>0&&m<=this.linkService.pagesCount}_isValidState(m,d=!1){if(!m)return!1;if(m.fingerprint!==this._fingerprint){if(!d)return!1;{if("string"!=typeof m.fingerprint||m.fingerprint.length!==this._fingerprint.length)return!1;const[w]=performance.getEntriesByType("navigation");if("reload"!==w?.type)return!1}}return!(!Number.isInteger(m.uid)||m.uid<0||null===m.destination||"object"!=typeof m.destination)}_updateInternalState(m,d,w=!1){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),w&&m?.temporary&&delete m.temporary,this._destination=m,this._uid=d,this._maxUid=Math.max(this._maxUid,d),this._numPositionUpdates=0}_parseCurrentHash(m=!1){const d=unescape(t()).substring(1),w=(0,v.parseQueryString)(d),F=w.get("nameddest")||"";let B=0|w.get("page");return(!this._isValidPage(B)||m&&F.length>0)&&(B=null),{hash:d,page:B,rotation:this.linkService.rotation}}_updateViewarea({location:m}){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._position={hash:m.pdfOpenParams.substring(1),page:this.linkService.page,first:m.pageNumber,rotation:m.rotation},!this._popStateInProgress&&(this._isPagesLoaded&&this._destination&&!this._destination.page&&this._numPositionUpdates++,this._updateViewareaTimeout=setTimeout(()=>{this._popStateInProgress||this._tryPushCurrentPosition(!0),this._updateViewareaTimeout=null},1e3))}_popState({state:m}){const d=t(),w=this._currentHash!==d;if(this._currentHash=d,!m){this._uid++;const{hash:B,page:z,rotation:J}=this._parseCurrentHash();return void this._pushOrReplaceState({hash:B,page:z,rotation:J},!0)}if(!this._isValidState(m))return;this._popStateInProgress=!0,w&&(this._blockHashChange++,(0,C.waitOnEventOrTimeout)({target:window,name:"hashchange",delay:1e3}).then(()=>{this._blockHashChange--}));const F=m.destination;this._updateInternalState(F,m.uid,!0),(0,v.isValidRotation)(F.rotation)&&(this.linkService.rotation=F.rotation),F.dest?this.linkService.goToDestination(F.dest):F.hash?this.linkService.setHash(F.hash):F.page&&(this.linkService.page=F.page),Promise.resolve().then(()=>{this._popStateInProgress=!1})}_pageHide(){(!this._destination||this._destination.temporary)&&this._tryPushCurrentPosition()}_bindEvents(){this._boundEvents||(this._boundEvents={updateViewarea:this._updateViewarea.bind(this),popState:this._popState.bind(this),pageHide:this._pageHide.bind(this)},this.eventBus._on("updateviewarea",this._boundEvents.updateViewarea),window.addEventListener("popstate",this._boundEvents.popState),window.addEventListener("pagehide",this._boundEvents.pageHide))}_unbindEvents(){this._boundEvents&&(this.eventBus._off("updateviewarea",this._boundEvents.updateViewarea),window.removeEventListener("popstate",this._boundEvents.popState),window.removeEventListener("pagehide",this._boundEvents.pageHide),this._boundEvents=null)}}},(W,s,M)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFScriptingManager=void 0;var v=M(6),C=M(3);s.PDFScriptingManager=class L{constructor({eventBus:n,sandboxBundleSrc:t=null,scriptingFactory:u=null,docPropertiesLookup:p=null}){this._pdfDocument=null,this._pdfViewer=null,this._closeCapability=null,this._destroyCapability=null,this._scripting=null,this._mouseState=Object.create(null),this._ready=!1,this._eventBus=n,this._sandboxBundleSrc=t,this._scriptingFactory=u,this._docPropertiesLookup=p,this._scriptingFactory||window.addEventListener("updatefromsandbox",c=>{this._eventBus.dispatch("updatefromsandbox",{source:window,detail:c.detail})})}setViewer(n){this._pdfViewer=n}setDocument(n){var t=this;return _(function*(){if(t._pdfDocument&&(yield t._destroyScripting()),t._pdfDocument=n,!n)return;const[u,p,c]=yield Promise.all([n.getFieldObjects(),n.getCalculationOrderIds(),n.getJSActions()]);if(u||c){if(n===t._pdfDocument){try{t._scripting=t._createScripting()}catch(b){return console.error(`PDFScriptingManager.setDocument: "${b?.message}".`),void(yield t._destroyScripting())}t._internalEvents.set("updatefromsandbox",b=>{b?.source===window&&t._updateFromSandbox(b.detail)}),t._internalEvents.set("dispatcheventinsandbox",b=>{t._scripting?.dispatchEventInSandbox(b.detail)}),t._internalEvents.set("pagechanging",({pageNumber:b,previous:m})=>{b!==m&&(t._dispatchPageClose(m),t._dispatchPageOpen(b))}),t._internalEvents.set("pagerendered",({pageNumber:b})=>{t._pageOpenPending.has(b)&&b===t._pdfViewer.currentPageNumber&&t._dispatchPageOpen(b)}),t._internalEvents.set("pagesdestroy",function(){var b=_(function*(m){yield t._dispatchPageClose(t._pdfViewer.currentPageNumber),yield t._scripting?.dispatchEventInSandbox({id:"doc",name:"WillClose"}),t._closeCapability?.resolve()});return function(m){return b.apply(this,arguments)}}()),t._domEvents.set("mousedown",b=>{t._mouseState.isDown=!0}),t._domEvents.set("mouseup",b=>{t._mouseState.isDown=!1});for(const[b,m]of t._internalEvents)t._eventBus._on(b,m);for(const[b,m]of t._domEvents)window.addEventListener(b,m,!0);try{const b=yield t._getDocProperties();if(n!==t._pdfDocument)return;yield t._scripting.createSandbox({objects:u,calculationOrder:p,appInfo:{platform:navigator.platform,language:navigator.language},docInfo:{...b,actions:c}}),t._eventBus.dispatch("sandboxcreated",{source:t})}catch(b){return console.error(`PDFScriptingManager.setDocument: "${b?.message}".`),void(yield t._destroyScripting())}yield t._scripting?.dispatchEventInSandbox({id:"doc",name:"Open"}),yield t._dispatchPageOpen(t._pdfViewer.currentPageNumber,!0),Promise.resolve().then(()=>{n===t._pdfDocument&&(t._ready=!0)})}}else yield t._destroyScripting()})()}dispatchWillSave(n){var t=this;return _(function*(){return t._scripting?.dispatchEventInSandbox({id:"doc",name:"WillSave"})})()}dispatchDidSave(n){var t=this;return _(function*(){return t._scripting?.dispatchEventInSandbox({id:"doc",name:"DidSave"})})()}dispatchWillPrint(n){var t=this;return _(function*(){return t._scripting?.dispatchEventInSandbox({id:"doc",name:"WillPrint"})})()}dispatchDidPrint(n){var t=this;return _(function*(){return t._scripting?.dispatchEventInSandbox({id:"doc",name:"DidPrint"})})()}get mouseState(){return this._mouseState}get destroyPromise(){return this._destroyCapability?.promise||null}get ready(){return this._ready}get _internalEvents(){return(0,C.shadow)(this,"_internalEvents",new Map)}get _domEvents(){return(0,C.shadow)(this,"_domEvents",new Map)}get _pageOpenPending(){return(0,C.shadow)(this,"_pageOpenPending",new Set)}get _visitedPages(){return(0,C.shadow)(this,"_visitedPages",new Map)}_updateFromSandbox(n){var t=this;return _(function*(){const u=t._pdfViewer.isInPresentationMode||t._pdfViewer.isChangingPresentationMode,{id:p,siblings:c,command:b,value:m}=n;if(!p){switch(b){case"clear":console.clear();break;case"error":console.error(m);break;case"layout":if(u)return;const w=(0,v.apiPageLayoutToViewerModes)(m);t._pdfViewer.spreadMode=w.spreadMode;break;case"page-num":t._pdfViewer.currentPageNumber=m+1;break;case"print":yield t._pdfViewer.pagesPromise,t._eventBus.dispatch("print",{source:t});break;case"println":console.log(m);break;case"zoom":if(u)return;t._pdfViewer.currentScaleValue=m;break;case"SaveAs":t._eventBus.dispatch("save",{source:t});break;case"FirstPage":t._pdfViewer.currentPageNumber=1;break;case"LastPage":t._pdfViewer.currentPageNumber=t._pdfViewer.pagesCount;break;case"NextPage":t._pdfViewer.nextPage();break;case"PrevPage":t._pdfViewer.previousPage();break;case"ZoomViewIn":if(u)return;t._pdfViewer.increaseScale();break;case"ZoomViewOut":if(u)return;t._pdfViewer.decreaseScale()}return}if(u&&n.focus)return;delete n.id,delete n.siblings;const d=c?[p,...c]:[p];for(const w of d){const F=document.getElementById(w);F?F.dispatchEvent(new CustomEvent("updatefromsandbox",{detail:n})):t._pdfDocument?.annotationStorage.setValue(w,n)}})()}_dispatchPageOpen(n,t=!1){var u=this;return _(function*(){const p=u._pdfDocument,c=u._visitedPages;if(t&&(u._closeCapability=(0,C.createPromiseCapability)()),!u._closeCapability)return;const b=u._pdfViewer.getPageView(n-1);if(b?.renderingState!==v.RenderingStates.FINISHED)return void u._pageOpenPending.add(n);u._pageOpenPending.delete(n);const m=_(function*(){const d=yield c.has(n)?null:b.pdfPage?.getJSActions();p===u._pdfDocument&&(yield u._scripting?.dispatchEventInSandbox({id:"page",name:"PageOpen",pageNumber:n,actions:d}))})();c.set(n,m)})()}_dispatchPageClose(n){var t=this;return _(function*(){const u=t._pdfDocument,p=t._visitedPages;if(!t._closeCapability||t._pageOpenPending.has(n))return;const c=p.get(n);c&&(p.set(n,null),yield c,u===t._pdfDocument&&(yield t._scripting?.dispatchEventInSandbox({id:"page",name:"PageClose",pageNumber:n})))})()}_getDocProperties(){var n=this;return _(function*(){if(n._docPropertiesLookup)return n._docPropertiesLookup(n._pdfDocument);const{docPropertiesLookup:t}=M(24);return t(n._pdfDocument)})()}_createScripting(){if(this._destroyCapability=(0,C.createPromiseCapability)(),this._scripting)throw new Error("_createScripting: Scripting already exists.");if(this._scriptingFactory)return this._scriptingFactory.createScripting({sandboxBundleSrc:this._sandboxBundleSrc});const{GenericScripting:n}=M(24);return new n(this._sandboxBundleSrc)}_destroyScripting(){var n=this;return _(function*(){if(!n._scripting)return n._pdfDocument=null,void n._destroyCapability?.resolve();n._closeCapability&&(yield Promise.race([n._closeCapability.promise,new Promise(t=>{setTimeout(t,1e3)})]).catch(t=>{}),n._closeCapability=null),n._pdfDocument=null;try{yield n._scripting.destroySandbox()}catch{}for(const[t,u]of n._internalEvents)n._eventBus._off(t,u);n._internalEvents.clear();for(const[t,u]of n._domEvents)window.removeEventListener(t,u,!0);n._domEvents.clear(),n._pageOpenPending.clear(),n._visitedPages.clear(),n._scripting=null,delete n._mouseState.isDown,n._ready=!1,n._destroyCapability?.resolve()})()}}},(W,s,M)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.GenericScripting=void 0,s.docPropertiesLookup=function C(n){return L.apply(this,arguments)};var v=M(3);function L(){return(L=_(function*(n){const u="".split("#")[0];let{info:p,metadata:c,contentDispositionFilename:b,contentLength:m}=yield n.getMetadata();if(!m){const{length:d}=yield n.getDownloadInfo();m=d}return{...p,baseURL:u,filesize:m,filename:b||(0,v.getPdfFilenameFromUrl)(""),metadata:c?.getRaw(),authors:c?.get("dc:creator"),numPages:n.numPages,URL:""}})).apply(this,arguments)}s.GenericScripting=class x{constructor(t){this._ready=(0,v.loadScript)(t,!0).then(()=>window.pdfjsSandbox.QuickJSSandbox())}createSandbox(t){var u=this;return _(function*(){(yield u._ready).create(t)})()}dispatchEventInSandbox(t){var u=this;return _(function*(){const p=yield u._ready;setTimeout(()=>p.dispatchEvent(t),0)})()}destroySandbox(){var t=this;return _(function*(){(yield t._ready).nukeSandbox()})()}}}],I={};function V(W){var s=I[W];if(void 0!==s)return s.exports;var M=I[W]={exports:{}};return R[W](M,M.exports,V),M.exports}var D={};return(()=>{var W=D;Object.defineProperty(W,"__esModule",{value:!0}),Object.defineProperty(W,"AnnotationLayerBuilder",{enumerable:!0,get:function(){return L.AnnotationLayerBuilder}}),Object.defineProperty(W,"DefaultAnnotationLayerFactory",{enumerable:!0,get:function(){return s.DefaultAnnotationLayerFactory}}),Object.defineProperty(W,"DefaultStructTreeLayerFactory",{enumerable:!0,get:function(){return s.DefaultStructTreeLayerFactory}}),Object.defineProperty(W,"DefaultTextLayerFactory",{enumerable:!0,get:function(){return s.DefaultTextLayerFactory}}),Object.defineProperty(W,"DefaultXfaLayerFactory",{enumerable:!0,get:function(){return s.DefaultXfaLayerFactory}}),Object.defineProperty(W,"DownloadManager",{enumerable:!0,get:function(){return x.DownloadManager}}),Object.defineProperty(W,"EventBus",{enumerable:!0,get:function(){return n.EventBus}}),Object.defineProperty(W,"GenericL10n",{enumerable:!0,get:function(){return t.GenericL10n}}),Object.defineProperty(W,"LinkTarget",{enumerable:!0,get:function(){return M.LinkTarget}}),Object.defineProperty(W,"NullL10n",{enumerable:!0,get:function(){return u.NullL10n}}),Object.defineProperty(W,"PDFFindController",{enumerable:!0,get:function(){return p.PDFFindController}}),Object.defineProperty(W,"PDFHistory",{enumerable:!0,get:function(){return c.PDFHistory}}),Object.defineProperty(W,"PDFLinkService",{enumerable:!0,get:function(){return M.PDFLinkService}}),Object.defineProperty(W,"PDFPageView",{enumerable:!0,get:function(){return b.PDFPageView}}),Object.defineProperty(W,"PDFScriptingManager",{enumerable:!0,get:function(){return m.PDFScriptingManager}}),Object.defineProperty(W,"PDFSinglePageViewer",{enumerable:!0,get:function(){return C.PDFSinglePageViewer}}),Object.defineProperty(W,"PDFViewer",{enumerable:!0,get:function(){return C.PDFViewer}}),Object.defineProperty(W,"ProgressBar",{enumerable:!0,get:function(){return v.ProgressBar}}),Object.defineProperty(W,"SimpleLinkService",{enumerable:!0,get:function(){return M.SimpleLinkService}}),Object.defineProperty(W,"StructTreeLayerBuilder",{enumerable:!0,get:function(){return d.StructTreeLayerBuilder}}),Object.defineProperty(W,"TextLayerBuilder",{enumerable:!0,get:function(){return w.TextLayerBuilder}}),Object.defineProperty(W,"XfaLayerBuilder",{enumerable:!0,get:function(){return F.XfaLayerBuilder}}),Object.defineProperty(W,"parseQueryString",{enumerable:!0,get:function(){return v.parseQueryString}});var s=V(1),M=V(5),v=V(6),C=V(10),L=V(2),x=V(16),n=V(17),t=V(18),u=V(4),p=V(20),c=V(22),b=V(12),m=V(23),d=V(7),w=V(8),F=V(9)})(),D})(),Q.exports=V()},17640:()=>{},23237:()=>{},97492:()=>{},31815:()=>{},66671:()=>{},82787:()=>{},78737:Q=>{Q.exports=function l(S,i,P){if("function"==typeof S?S===i:S.has(i))return arguments.length<3?i:P;throw new TypeError("Private element is not present on this object")},Q.exports.__esModule=!0,Q.exports.default=Q.exports},48114:Q=>{Q.exports=function l(S,i){if(i.has(S))throw new TypeError("Cannot initialize the same private elements twice on an object")},Q.exports.__esModule=!0,Q.exports.default=Q.exports},64647:(Q,l,S)=>{var i=S(78737);Q.exports=function P(T,U){return T.get(i(T,U))},Q.exports.__esModule=!0,Q.exports.default=Q.exports},23076:(Q,l,S)=>{var i=S(48114);Q.exports=function P(T,U,O){i(T,U),U.set(T,O)},Q.exports.__esModule=!0,Q.exports.default=Q.exports},93051:(Q,l,S)=>{var i=S(78737);Q.exports=function P(T,U,O){return T.set(i(T,U),O),O},Q.exports.__esModule=!0,Q.exports.default=Q.exports},40546:(Q,l,S)=>{var i=S(78737);Q.exports=function P(T,U,O){return O(i(T,U))},Q.exports.__esModule=!0,Q.exports.default=Q.exports},56965:(Q,l,S)=>{var i=S(48114);Q.exports=function P(T,U){i(T,U),U.add(T)},Q.exports.__esModule=!0,Q.exports.default=Q.exports},21076:(Q,l,S)=>{var i=S(29867);Q.exports=function P(T,U,O){return(U=i(U))in T?Object.defineProperty(T,U,{value:O,enumerable:!0,configurable:!0,writable:!0}):T[U]=O,T},Q.exports.__esModule=!0,Q.exports.default=Q.exports},67862:(Q,l,S)=>{var i=S(16895).default;Q.exports=function P(T,U){if("object"!=i(T)||!T)return T;var O=T[Symbol.toPrimitive];if(void 0!==O){var A=O.call(T,U||"default");if("object"!=i(A))return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===U?String:Number)(T)},Q.exports.__esModule=!0,Q.exports.default=Q.exports},29867:(Q,l,S)=>{var i=S(16895).default,P=S(67862);Q.exports=function T(U){var O=P(U,"string");return"symbol"==i(O)?O:O+""},Q.exports.__esModule=!0,Q.exports.default=Q.exports},16895:Q=>{function l(S){return Q.exports=l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(i){return typeof i}:function(i){return i&&"function"==typeof Symbol&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Q.exports.__esModule=!0,Q.exports.default=Q.exports,l(S)}Q.exports=l,Q.exports.__esModule=!0,Q.exports.default=Q.exports},13763:(Q,l,S)=>{"use strict";var i,P;S.d(l,{Lk:()=>n,c6:()=>x});var T=S(48891),U=S(909),O=S(18447),A=S(11787),_=S(5424),R=S(88627),I=S(41483),V=S(83876),D=S(94031);const W=["pdfViewerContainer"];function v(t,u,p){t[u]=p}function C(){return typeof window>"u"}C()||v(i||(i=S.t(V,2)),"verbosity",V.VerbosityLevel.INFOS);var L=function(t){return t[t.DISABLED=0]="DISABLED",t[t.ENABLED=1]="ENABLED",t[t.ENHANCED=2]="ENHANCED",t}(L||{});let x=(()=>{class t{constructor(p,c){if(this.element=p,this.ngZone=c,this.isVisible=!1,this._cMapsUrl=typeof(i||(i=S.t(V,2)))<"u"?`https://unpkg.com/pdfjs-dist@${V.version}/cmaps/`:null,this._imageResourcesPath=typeof(i||(i=S.t(V,2)))<"u"?`https://unpkg.com/pdfjs-dist@${V.version}/web/images/`:null,this._renderText=!0,this._renderTextMode=L.ENABLED,this._stickToPage=!1,this._originalSize=!0,this._page=1,this._zoom=1,this._zoomScale="page-width",this._rotation=0,this._showAll=!0,this._canAutoResize=!0,this._fitToPage=!1,this._externalLinkTarget="blank",this._showBorders=!1,this.resizeTimeout=null,this.pageScrollTimeout=null,this.isInitialized=!1,this.destroy$=new O.B,this.afterLoadComplete=new T.bkB,this.pageRendered=new T.bkB,this.pageInitialized=new T.bkB,this.textLayerRendered=new T.bkB,this.onError=new T.bkB,this.onProgress=new T.bkB,this.pageChange=new T.bkB(!0),C())return;let b;const m=V.version;b=window[`pdfWorkerSrc${m}`]||(window.hasOwnProperty("pdfWorkerSrc")&&"string"==typeof window.pdfWorkerSrc&&window.pdfWorkerSrc?window.pdfWorkerSrc:`https://cdn.jsdelivr.net/npm/pdfjs-dist@${m}/legacy/build/pdf.worker.min.js`),v(V.GlobalWorkerOptions,"workerSrc",b)}set cMapsUrl(p){this._cMapsUrl=p}set page(p){const c=p=parseInt(p,10)||1;this._pdf&&(p=this.getValidPageNumber(p)),this._page=p,c!==p&&this.pageChange.emit(p)}set renderText(p){this._renderText=p}set renderTextMode(p){this._renderTextMode=p}set originalSize(p){this._originalSize=p}set showAll(p){this._showAll=p}set stickToPage(p){this._stickToPage=p}set zoom(p){p<=0||(this._zoom=p)}get zoom(){return this._zoom}set zoomScale(p){this._zoomScale=p}get zoomScale(){return this._zoomScale}set rotation(p){"number"==typeof p&&p%90==0?this._rotation=p:console.warn("Invalid pages rotation angle.")}set externalLinkTarget(p){this._externalLinkTarget=p}set autoresize(p){this._canAutoResize=!!p}set fitToPage(p){this._fitToPage=!!p}set showBorders(p){this._showBorders=!!p}static getLinkTarget(p){switch(p){case"blank":return D.LinkTarget.BLANK;case"none":return D.LinkTarget.NONE;case"self":return D.LinkTarget.SELF;case"parent":return D.LinkTarget.PARENT;case"top":return D.LinkTarget.TOP}return null}ngAfterViewChecked(){if(this.isInitialized)return;const p=this.pdfViewerContainer.nativeElement.offsetParent;!0!==this.isVisible||null!=p?!1===this.isVisible&&null!=p&&(this.isVisible=!0,setTimeout(()=>{this.initialize(),this.ngOnChanges({src:this.src})})):this.isVisible=!1}ngOnInit(){this.initialize(),this.setupResizeListener()}ngOnDestroy(){this.clear(),this.destroy$.next(),this.loadingTask=null}ngOnChanges(p){if(!C()&&this.isVisible)if("src"in p)this.loadPDF();else if(this._pdf){if("renderText"in p?(this.pdfViewer.textLayerMode=this._renderText?this._renderTextMode:L.DISABLED,this.resetPdfDocument()):"showAll"in p&&(this.setupViewer(),this.resetPdfDocument()),"page"in p){const{page:c}=p;if(c.currentValue===this._latestScrolledPage)return;this.pdfViewer.scrollPageIntoView({pageNumber:this._page})}this.update()}}updateSize(){(0,A.H)(this._pdf.getPage(this.pdfViewer.currentPageNumber)).pipe((0,_.Q)(this.destroy$)).subscribe({next:p=>{const c=this._rotation+p.rotate,b=p.getViewport({scale:this._zoom,rotation:c}).width*t.CSS_UNITS;let m=this._zoom,d=!0;if(!this._originalSize||this._fitToPage&&b>this.pdfViewerContainer.nativeElement.clientWidth){const w=p.getViewport({scale:1,rotation:c});m=this.getScale(w.width,w.height),d=!this._stickToPage}this.pdfViewer._setScale(m,d)}})}clear(){this.loadingTask&&!this.loadingTask.destroyed&&this.loadingTask.destroy(),this._pdf&&(this._latestScrolledPage=0,this._pdf.destroy(),this._pdf=null,this.pdfViewer.setDocument(null),this.pdfLinkService.setDocument(null,null),this.pdfFindController.setDocument(null))}getPDFLinkServiceConfig(){const p=t.getLinkTarget(this._externalLinkTarget);return p?{externalLinkTarget:p}:{}}initEventBus(){this.eventBus=function s(t,u){const p=new t.EventBus;return function M(t,u){(0,U.R)(t,"documentload").pipe((0,_.Q)(u)).subscribe(()=>{const p=document.createEvent("CustomEvent");p.initCustomEvent("documentload",!0,!0,{}),window.dispatchEvent(p)}),(0,U.R)(t,"pagerendered").pipe((0,_.Q)(u)).subscribe(({pageNumber:p,cssTransform:c,source:b})=>{const m=document.createEvent("CustomEvent");m.initCustomEvent("pagerendered",!0,!0,{pageNumber:p,cssTransform:c}),b.div.dispatchEvent(m)}),(0,U.R)(t,"textlayerrendered").pipe((0,_.Q)(u)).subscribe(({pageNumber:p,source:c})=>{const b=document.createEvent("CustomEvent");b.initCustomEvent("textlayerrendered",!0,!0,{pageNumber:p}),c.textLayerDiv.dispatchEvent(b)}),(0,U.R)(t,"pagechanging").pipe((0,_.Q)(u)).subscribe(({pageNumber:p,source:c})=>{const b=document.createEvent("UIEvents");b.initEvent("pagechanging",!0,!0),b.pageNumber=p,c.container.dispatchEvent(b)}),(0,U.R)(t,"pagesinit").pipe((0,_.Q)(u)).subscribe(({source:p})=>{const c=document.createEvent("CustomEvent");c.initCustomEvent("pagesinit",!0,!0,null),p.container.dispatchEvent(c)}),(0,U.R)(t,"pagesloaded").pipe((0,_.Q)(u)).subscribe(({pagesCount:p,source:c})=>{const b=document.createEvent("CustomEvent");b.initCustomEvent("pagesloaded",!0,!0,{pagesCount:p}),c.container.dispatchEvent(b)}),(0,U.R)(t,"scalechange").pipe((0,_.Q)(u)).subscribe(({scale:p,presetValue:c,source:b})=>{const m=document.createEvent("UIEvents");m.initEvent("scalechange",!0,!0),m.scale=p,m.presetValue=c,b.container.dispatchEvent(m)}),(0,U.R)(t,"updateviewarea").pipe((0,_.Q)(u)).subscribe(({location:p,source:c})=>{const b=document.createEvent("UIEvents");b.initEvent("updateviewarea",!0,!0),b.location=p,c.container.dispatchEvent(b)}),(0,U.R)(t,"find").pipe((0,_.Q)(u)).subscribe(({source:p,type:c,query:b,phraseSearch:m,caseSensitive:d,highlightAll:w,findPrevious:F})=>{if(p===window)return;const B=document.createEvent("CustomEvent");B.initCustomEvent("find"+c,!0,!0,{query:b,phraseSearch:m,caseSensitive:d,highlightAll:w,findPrevious:F}),window.dispatchEvent(B)}),(0,U.R)(t,"attachmentsloaded").pipe((0,_.Q)(u)).subscribe(({attachmentsCount:p,source:c})=>{const b=document.createEvent("CustomEvent");b.initCustomEvent("attachmentsloaded",!0,!0,{attachmentsCount:p}),c.container.dispatchEvent(b)}),(0,U.R)(t,"sidebarviewchanged").pipe((0,_.Q)(u)).subscribe(({view:p,source:c})=>{const b=document.createEvent("CustomEvent");b.initCustomEvent("sidebarviewchanged",!0,!0,{view:p}),c.outerContainer.dispatchEvent(b)}),(0,U.R)(t,"pagemode").pipe((0,_.Q)(u)).subscribe(({mode:p,source:c})=>{const b=document.createEvent("CustomEvent");b.initCustomEvent("pagemode",!0,!0,{mode:p}),c.pdfViewer.container.dispatchEvent(b)}),(0,U.R)(t,"namedaction").pipe((0,_.Q)(u)).subscribe(({action:p,source:c})=>{const b=document.createEvent("CustomEvent");b.initCustomEvent("namedaction",!0,!0,{action:p}),c.pdfViewer.container.dispatchEvent(b)}),(0,U.R)(t,"presentationmodechanged").pipe((0,_.Q)(u)).subscribe(({active:p,switchInProgress:c})=>{const b=document.createEvent("CustomEvent");b.initCustomEvent("presentationmodechanged",!0,!0,{active:p,switchInProgress:c}),window.dispatchEvent(b)}),(0,U.R)(t,"outlineloaded").pipe((0,_.Q)(u)).subscribe(({outlineCount:p,source:c})=>{const b=document.createEvent("CustomEvent");b.initCustomEvent("outlineloaded",!0,!0,{outlineCount:p}),c.container.dispatchEvent(b)})}(p,u),p}(P||(P=S.t(D,2)),this.destroy$),(0,U.R)(this.eventBus,"pagerendered").pipe((0,_.Q)(this.destroy$)).subscribe(p=>{this.pageRendered.emit(p)}),(0,U.R)(this.eventBus,"pagesinit").pipe((0,_.Q)(this.destroy$)).subscribe(p=>{this.pageInitialized.emit(p)}),(0,U.R)(this.eventBus,"pagechanging").pipe((0,_.Q)(this.destroy$)).subscribe(({pageNumber:p})=>{this.pageScrollTimeout&&clearTimeout(this.pageScrollTimeout),this.pageScrollTimeout=window.setTimeout(()=>{this._latestScrolledPage=p,this.pageChange.emit(p)},100)}),(0,U.R)(this.eventBus,"textlayerrendered").pipe((0,_.Q)(this.destroy$)).subscribe(p=>{this.textLayerRendered.emit(p)})}initPDFServices(){this.pdfLinkService=new D.PDFLinkService({eventBus:this.eventBus,...this.getPDFLinkServiceConfig()}),this.pdfFindController=new D.PDFFindController({eventBus:this.eventBus,linkService:this.pdfLinkService})}getPDFOptions(){return{eventBus:this.eventBus,container:this.element.nativeElement.querySelector("div"),removePageBorders:!this._showBorders,linkService:this.pdfLinkService,textLayerMode:this._renderText?this._renderTextMode:L.DISABLED,findController:this.pdfFindController,renderer:"canvas",l10n:void 0,imageResourcesPath:this._imageResourcesPath}}setupViewer(){v(i||(i=S.t(V,2)),"disableTextLayer",!this._renderText),this.initPDFServices(),this.pdfViewer=this._showAll?new D.PDFViewer(this.getPDFOptions()):new D.PDFSinglePageViewer(this.getPDFOptions()),this.pdfLinkService.setViewer(this.pdfViewer),this.pdfViewer._currentPageNumber=this._page}getValidPageNumber(p){return p<1?1:p>this._pdf.numPages?this._pdf.numPages:p}getDocumentParams(){const p=typeof this.src;if(!this._cMapsUrl)return this.src;const c={cMapUrl:this._cMapsUrl,cMapPacked:!0,enableXfa:!0};return"string"===p?c.url=this.src:"object"===p&&(void 0!==this.src.byteLength?c.data=this.src:Object.assign(c,this.src)),c}loadPDF(){if(!this.src)return;if(this.lastLoaded===this.src)return void this.update();this.clear(),this.setupViewer(),this.loadingTask=V.getDocument(this.getDocumentParams()),this.loadingTask.onProgress=c=>{this.onProgress.emit(c)};const p=this.src;(0,A.H)(this.loadingTask.promise).pipe((0,_.Q)(this.destroy$)).subscribe({next:c=>{this._pdf=c,this.lastLoaded=p,this.afterLoadComplete.emit(c),this.resetPdfDocument(),this.update()},error:c=>{this.lastLoaded=null,this.onError.emit(c)}})}update(){this.page=this._page,this.render()}render(){this._page=this.getValidPageNumber(this._page),(0!==this._rotation||this.pdfViewer.pagesRotation!==this._rotation)&&setTimeout(()=>{this.pdfViewer.pagesRotation=this._rotation}),this._stickToPage&&setTimeout(()=>{this.pdfViewer.currentPageNumber=this._page}),this.updateSize()}getScale(p,c){const b=this._showBorders?2*t.BORDER_WIDTH:0,m=this.pdfViewerContainer.nativeElement.clientWidth-b,d=this.pdfViewerContainer.nativeElement.clientHeight-b;if(0===d||0===c||0===m||0===p)return 1;let w=1;switch(this._zoomScale){case"page-fit":w=Math.min(d/c,m/p);break;case"page-height":w=d/c;break;default:w=m/p}return this._zoom*w/t.CSS_UNITS}resetPdfDocument(){this.pdfLinkService.setDocument(this._pdf,null),this.pdfFindController.setDocument(this._pdf),this.pdfViewer.setDocument(this._pdf)}initialize(){C()||!this.isVisible||(this.isInitialized=!0,this.initEventBus(),this.setupViewer())}setupResizeListener(){C()||this.ngZone.runOutsideAngular(()=>{(0,U.R)(window,"resize").pipe((0,R.B)(100),(0,I.p)(()=>this._canAutoResize&&!!this._pdf),(0,_.Q)(this.destroy$)).subscribe(()=>{this.updateSize()})})}}return t.CSS_UNITS=96/72,t.BORDER_WIDTH=9,t.\u0275fac=function(p){return new(p||t)(T.rXU(T.aKT),T.rXU(T.SKi))},t.\u0275cmp=T.VBU({type:t,selectors:[["pdf-viewer"]],viewQuery:function(p,c){if(1&p&&T.GBs(W,5),2&p){let b;T.mGM(b=T.lsd())&&(c.pdfViewerContainer=b.first)}},inputs:{src:"src",cMapsUrl:[0,"c-maps-url","cMapsUrl"],page:"page",renderText:[0,"render-text","renderText"],renderTextMode:[0,"render-text-mode","renderTextMode"],originalSize:[0,"original-size","originalSize"],showAll:[0,"show-all","showAll"],stickToPage:[0,"stick-to-page","stickToPage"],zoom:"zoom",zoomScale:[0,"zoom-scale","zoomScale"],rotation:"rotation",externalLinkTarget:[0,"external-link-target","externalLinkTarget"],autoresize:"autoresize",fitToPage:[0,"fit-to-page","fitToPage"],showBorders:[0,"show-borders","showBorders"]},outputs:{afterLoadComplete:"after-load-complete",pageRendered:"page-rendered",pageInitialized:"pages-initialized",textLayerRendered:"text-layer-rendered",onError:"error",onProgress:"on-progress",pageChange:"pageChange"},features:[T.OA$],decls:3,vars:0,consts:[["pdfViewerContainer",""],[1,"ng2-pdf-viewer-container"],[1,"pdfViewer"]],template:function(p,c){1&p&&(T.j41(0,"div",1,0),T.nrm(2,"div",2),T.k0s())},styles:[".ng2-pdf-viewer-container[_ngcontent-%COMP%]{overflow-x:auto;position:absolute;height:100%;width:100%;-webkit-overflow-scrolling:touch}[_nghost-%COMP%]{display:block;position:relative}[_nghost-%COMP%]    {--pdfViewer-padding-bottom: 0;--page-margin: 1px auto -8px;--page-border: 9px solid transparent;--spreadHorizontalWrapped-margin-LR: -3.5px;--zoom-factor: 1;--viewport-scale-factor: 1;--shadow: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAA1ElEQVQ4jbWUWw6EIAxFy2NFs/8NzR4UJhpqLsdi5mOmSSMUOfYWqv3S0gMr4XlYH/64gZa/gN3ANYA7KAXALt4ktoQ5MI9YxqaG8bWmsIysMuT6piSQCa4whZThCu8CM4zP9YJaKci9jicPq3NcBWYoPMGUlhG7ivtkB+gVyFY75wXghOvh8t5mto1Mdim6e+MBqH6XsY+YAwjpq3vGF7weTWQptLEDVCZvPTMl5JZZsdh47FHW6qFMyvLYqjcnmdFfY9Xk/KDOlzCusX2mi/ofM7MPkzBcSp4Q1/wAAAAASUVORK5CYII=);--viewer-container-height: 0;--annotation-unfocused-field-background: url(\"data:image/svg+xml;charset=UTF-8,<svg width='1px' height='1px' xmlns='http://www.w3.org/2000/svg'><rect width='100%' height='100%' style='fill:rgba(0, 54, 255, 0.13);'/></svg>\");--xfa-unfocused-field-background: url(\"data:image/svg+xml;charset=UTF-8,<svg width='1px' height='1px' xmlns='http://www.w3.org/2000/svg'><rect width='100%' height='100%' style='fill:rgba(0, 54, 255, 0.13);'/></svg>\")}@media screen and (forced-colors: active){[_nghost-%COMP%]    {--pdfViewer-padding-bottom: 9px;--page-margin: 9px auto 0;--page-border: none;--spreadHorizontalWrapped-margin-LR: 4.5px}}[_nghost-%COMP%]     .textLayer{position:absolute;text-align:initial;left:0;top:0;right:0;bottom:0;overflow:hidden;opacity:.2;line-height:1;-webkit-text-size-adjust:none;text-size-adjust:none;forced-color-adjust:none}[_nghost-%COMP%]     .textLayer span, [_nghost-%COMP%]     .textLayer br{color:transparent;position:absolute;white-space:pre;cursor:text;transform-origin:0% 0%}[_nghost-%COMP%]     .textLayer span.markedContent{top:0;height:0}[_nghost-%COMP%]     .textLayer .highlight{margin:-1px;padding:1px;background-color:#b400aa;border-radius:4px}[_nghost-%COMP%]     .textLayer .highlight.appended{position:initial}[_nghost-%COMP%]     .textLayer .highlight.begin{border-radius:4px 0 0 4px}[_nghost-%COMP%]     .textLayer .highlight.end{border-radius:0 4px 4px 0}[_nghost-%COMP%]     .textLayer .highlight.middle{border-radius:0}[_nghost-%COMP%]     .textLayer .highlight.selected{background-color:#006400}[_nghost-%COMP%]     .textLayer ::selection{background:blue}[_nghost-%COMP%]     .textLayer br::selection{background:transparent}[_nghost-%COMP%]     .textLayer .endOfContent{display:block;position:absolute;left:0;top:100%;right:0;bottom:0;z-index:-1;cursor:default;-webkit-user-select:none;user-select:none}[_nghost-%COMP%]     .textLayer .endOfContent.active{top:0}[_nghost-%COMP%]     .annotationLayer section{position:absolute;text-align:initial}[_nghost-%COMP%]     .annotationLayer .linkAnnotation>a, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.pushButton>a{position:absolute;font-size:1em;top:0;left:0;width:100%;height:100%}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.pushButton>canvas{position:relative;top:0;left:0;z-index:-1}[_nghost-%COMP%]     .annotationLayer .linkAnnotation>a:hover, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.pushButton>a:hover{opacity:.2;background:yellow;box-shadow:0 2px 10px #ff0}[_nghost-%COMP%]     .annotationLayer .textAnnotation img{position:absolute;cursor:pointer}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input{background-image:var(--annotation-unfocused-field-background);border:1px solid transparent;box-sizing:border-box;font-size:9px;height:100%;margin:0;padding:0 3px;vertical-align:top;width:100%}[_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select option{padding:0}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input{border-radius:50%}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea{font:message-box;font-size:9px;resize:none}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input[disabled], [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea[disabled], [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select[disabled], [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input[disabled], [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input[disabled]{background:none;border:1px solid transparent;cursor:not-allowed}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input:hover, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea:hover, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select:hover, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:hover, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:hover{border:1px solid black}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input:focus, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea:focus, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select:focus{background:none;border:1px solid transparent}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input :focus, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea :focus, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select :focus, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox :focus, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton :focus{background-image:none;background-color:transparent;outline:auto}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:checked:before{background-color:#000;content:\"\";display:block;position:absolute}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after{height:80%;left:45%;width:1px}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before{transform:rotate(45deg)}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after{transform:rotate(-45deg)}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:checked:before{border-radius:50%;height:50%;left:30%;top:20%;width:50%}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input.comb{font-family:monospace;padding-left:2px;padding-right:0}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input.comb:focus{width:103%}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input{-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:0}[_nghost-%COMP%]     .annotationLayer .popupWrapper{position:absolute;width:20em}[_nghost-%COMP%]     .annotationLayer .popup{position:absolute;z-index:200;max-width:20em;background-color:#ff9;box-shadow:0 2px 5px #888;border-radius:2px;padding:6px;margin-left:5px;cursor:pointer;font:message-box;font-size:9px;white-space:normal;word-wrap:break-word}[_nghost-%COMP%]     .annotationLayer .popup>*{font-size:9px}[_nghost-%COMP%]     .annotationLayer .popup h1{display:inline-block}[_nghost-%COMP%]     .annotationLayer .popupDate{display:inline-block;margin-left:5px}[_nghost-%COMP%]     .annotationLayer .popupContent{border-top:1px solid #333333;margin-top:2px;padding-top:2px}[_nghost-%COMP%]     .annotationLayer .richText>*{white-space:pre-wrap}[_nghost-%COMP%]     .annotationLayer .highlightAnnotation, [_nghost-%COMP%]     .annotationLayer .underlineAnnotation, [_nghost-%COMP%]     .annotationLayer .squigglyAnnotation, [_nghost-%COMP%]     .annotationLayer .strikeoutAnnotation, [_nghost-%COMP%]     .annotationLayer .freeTextAnnotation, [_nghost-%COMP%]     .annotationLayer .lineAnnotation svg line, [_nghost-%COMP%]     .annotationLayer .squareAnnotation svg rect, [_nghost-%COMP%]     .annotationLayer .circleAnnotation svg ellipse, [_nghost-%COMP%]     .annotationLayer .polylineAnnotation svg polyline, [_nghost-%COMP%]     .annotationLayer .polygonAnnotation svg polygon, [_nghost-%COMP%]     .annotationLayer .caretAnnotation, [_nghost-%COMP%]     .annotationLayer .inkAnnotation svg polyline, [_nghost-%COMP%]     .annotationLayer .stampAnnotation, [_nghost-%COMP%]     .annotationLayer .fileAttachmentAnnotation{cursor:pointer}[_nghost-%COMP%]     .xfaLayer .highlight{margin:-1px;padding:1px;background-color:#efcbed;border-radius:4px}[_nghost-%COMP%]     .xfaLayer .highlight.appended{position:initial}[_nghost-%COMP%]     .xfaLayer .highlight.begin{border-radius:4px 0 0 4px}[_nghost-%COMP%]     .xfaLayer .highlight.end{border-radius:0 4px 4px 0}[_nghost-%COMP%]     .xfaLayer .highlight.middle{border-radius:0}[_nghost-%COMP%]     .xfaLayer .highlight.selected{background-color:#cbdfcb}[_nghost-%COMP%]     .xfaLayer ::selection{background:blue}[_nghost-%COMP%]     .xfaPage{overflow:hidden;position:relative}[_nghost-%COMP%]     .xfaContentarea{position:absolute}[_nghost-%COMP%]     .xfaPrintOnly{display:none}[_nghost-%COMP%]     .xfaLayer{position:absolute;text-align:initial;top:0;left:0;transform-origin:0 0;line-height:1.2}[_nghost-%COMP%]     .xfaLayer *{color:inherit;font:inherit;font-style:inherit;font-weight:inherit;font-feature-settings:inherit;font-kerning:inherit;letter-spacing:-.01px;text-align:inherit;text-decoration:inherit;box-sizing:border-box;background-color:transparent;padding:0;margin:0;pointer-events:auto;line-height:inherit}[_nghost-%COMP%]     .xfaLayer div{pointer-events:none}[_nghost-%COMP%]     .xfaLayer svg{pointer-events:none}[_nghost-%COMP%]     .xfaLayer svg *{pointer-events:none}[_nghost-%COMP%]     .xfaLayer a{color:#00f}[_nghost-%COMP%]     .xfaRich li{margin-left:3em}[_nghost-%COMP%]     .xfaFont{color:#000;font-weight:400;font-feature-settings:\"kern\" off;font-kerning:none;font-size:10px;font-style:normal;letter-spacing:0;text-decoration:none;vertical-align:0}[_nghost-%COMP%]     .xfaCaption{overflow:hidden;flex:0 0 auto}[_nghost-%COMP%]     .xfaCaptionForCheckButton{overflow:hidden;flex:1 1 auto}[_nghost-%COMP%]     .xfaLabel{height:100%;width:100%}[_nghost-%COMP%]     .xfaLeft{display:flex;flex-direction:row;align-items:center}[_nghost-%COMP%]     .xfaRight{display:flex;flex-direction:row-reverse;align-items:center}[_nghost-%COMP%]     .xfaLeft>.xfaCaption, [_nghost-%COMP%]     .xfaLeft>.xfaCaptionForCheckButton, [_nghost-%COMP%]     .xfaRight>.xfaCaption, [_nghost-%COMP%]     .xfaRight>.xfaCaptionForCheckButton{max-height:100%}[_nghost-%COMP%]     .xfaTop{display:flex;flex-direction:column;align-items:flex-start}[_nghost-%COMP%]     .xfaBottom{display:flex;flex-direction:column-reverse;align-items:flex-start}[_nghost-%COMP%]     .xfaTop>.xfaCaption, [_nghost-%COMP%]     .xfaTop>.xfaCaptionForCheckButton, [_nghost-%COMP%]     .xfaBottom>.xfaCaption, [_nghost-%COMP%]     .xfaBottom>.xfaCaptionForCheckButton{width:100%}[_nghost-%COMP%]     .xfaBorder{background-color:transparent;position:absolute;pointer-events:none}[_nghost-%COMP%]     .xfaWrapped{width:100%;height:100%}[_nghost-%COMP%]     .xfaTextfield:focus, [_nghost-%COMP%]     .xfaSelect:focus{background-image:none;background-color:transparent;outline:auto;outline-offset:-1px}[_nghost-%COMP%]     .xfaCheckbox:focus, [_nghost-%COMP%]     .xfaRadio:focus{outline:auto}[_nghost-%COMP%]     .xfaTextfield, [_nghost-%COMP%]     .xfaSelect{height:100%;width:100%;flex:1 1 auto;border:none;resize:none;background-image:var(--xfa-unfocused-field-background)}[_nghost-%COMP%]     .xfaTop>.xfaTextfield, [_nghost-%COMP%]     .xfaTop>.xfaSelect, [_nghost-%COMP%]     .xfaBottom>.xfaTextfield, [_nghost-%COMP%]     .xfaBottom>.xfaSelect{flex:0 1 auto}[_nghost-%COMP%]     .xfaButton{cursor:pointer;width:100%;height:100%;border:none;text-align:center}[_nghost-%COMP%]     .xfaLink{width:100%;height:100%;position:absolute;top:0;left:0}[_nghost-%COMP%]     .xfaCheckbox, [_nghost-%COMP%]     .xfaRadio{width:100%;height:100%;flex:0 0 auto;border:none}[_nghost-%COMP%]     .xfaRich{white-space:pre-wrap;width:100%;height:100%}[_nghost-%COMP%]     .xfaImage{object-position:left top;object-fit:contain;width:100%;height:100%}[_nghost-%COMP%]     .xfaLrTb, [_nghost-%COMP%]     .xfaRlTb, [_nghost-%COMP%]     .xfaTb{display:flex;flex-direction:column;align-items:stretch}[_nghost-%COMP%]     .xfaLr{display:flex;flex-direction:row;align-items:stretch}[_nghost-%COMP%]     .xfaRl{display:flex;flex-direction:row-reverse;align-items:stretch}[_nghost-%COMP%]     .xfaTb>div{justify-content:left}[_nghost-%COMP%]     .xfaPosition{position:relative}[_nghost-%COMP%]     .xfaArea{position:relative}[_nghost-%COMP%]     .xfaValignMiddle{display:flex;align-items:center}[_nghost-%COMP%]     .xfaTable{display:flex;flex-direction:column;align-items:stretch}[_nghost-%COMP%]     .xfaTable .xfaRow{display:flex;flex-direction:row;align-items:stretch}[_nghost-%COMP%]     .xfaTable .xfaRlRow{display:flex;flex-direction:row-reverse;align-items:stretch;flex:1}[_nghost-%COMP%]     .xfaTable .xfaRlRow>div{flex:1}[_nghost-%COMP%]     .xfaNonInteractive input, [_nghost-%COMP%]     .xfaNonInteractive textarea, [_nghost-%COMP%]     .xfaDisabled input, [_nghost-%COMP%]     .xfaDisabled textarea, [_nghost-%COMP%]     .xfaReadOnly input, [_nghost-%COMP%]     .xfaReadOnly textarea{background:initial}@media print{[_nghost-%COMP%]     .xfaTextfield, [_nghost-%COMP%]     .xfaSelect{background:transparent}[_nghost-%COMP%]     .xfaSelect{-webkit-appearance:none;-moz-appearance:none;appearance:none;text-indent:1px;text-overflow:\"\"}}[_nghost-%COMP%]     .pdfViewer{padding-bottom:var(--pdfViewer-padding-bottom)}[_nghost-%COMP%]     .pdfViewer .canvasWrapper{overflow:hidden}[_nghost-%COMP%]     .pdfViewer .page{direction:ltr;width:816px;height:1056px;margin:var(--page-margin);position:relative;overflow:visible;border:var(--page-border);background-clip:content-box;border-image:var(--shadow) 9 9 repeat;background-color:#fff}[_nghost-%COMP%]     .pdfViewer .dummyPage{position:relative;width:0;height:var(--viewer-container-height)}[_nghost-%COMP%]     .pdfViewer.removePageBorders .page{margin:0 auto 10px;border:none}[_nghost-%COMP%]     .pdfViewer.singlePageView{display:inline-block}[_nghost-%COMP%]     .pdfViewer.singlePageView .page{margin:0;border:none}[_nghost-%COMP%]     .pdfViewer.scrollHorizontal, [_nghost-%COMP%]     .pdfViewer.scrollWrapped, [_nghost-%COMP%]     .spread{margin-left:3.5px;margin-right:3.5px;text-align:center}[_nghost-%COMP%]     .pdfViewer.scrollHorizontal, [_nghost-%COMP%]     .spread{white-space:nowrap}[_nghost-%COMP%]     .pdfViewer.removePageBorders, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .spread, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .spread{margin-left:0;margin-right:0}[_nghost-%COMP%]     .spread .page, [_nghost-%COMP%]     .spread .dummyPage, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .page, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .page, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .spread, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .spread{display:inline-block;vertical-align:middle}[_nghost-%COMP%]     .spread .page, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .page, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .page{margin-left:var(--spreadHorizontalWrapped-margin-LR);margin-right:var(--spreadHorizontalWrapped-margin-LR)}[_nghost-%COMP%]     .pdfViewer.removePageBorders .spread .page, [_nghost-%COMP%]     .pdfViewer.removePageBorders.scrollHorizontal .page, [_nghost-%COMP%]     .pdfViewer.removePageBorders.scrollWrapped .page{margin-left:5px;margin-right:5px}[_nghost-%COMP%]     .pdfViewer .page canvas{margin:0;display:block}[_nghost-%COMP%]     .pdfViewer .page canvas[hidden]{display:none}[_nghost-%COMP%]     .pdfViewer .page .loadingIcon{position:absolute;display:block;left:0;top:0;right:0;bottom:0;background:url(data:image/gif;base64,R0lGODlhGAAYAPQQAM7Ozvr6+uDg4LCwsOjo6I6OjsjIyJycnNjY2KioqMDAwPLy8nZ2doaGhri4uGhoaP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/ilPcHRpbWl6ZWQgd2l0aCBodHRwczovL2V6Z2lmLmNvbS9vcHRpbWl6ZQAh+QQJBwAQACwAAAAAGAAYAAAFmiAkjiTkOGVaBgjZNGSgkgKjjM8zLoI8iy+BKCdiCX8iBeMAhEEIPRXLxViYUE9CbCQoFAzFhHY3zkaT3oPvBz1zE4UBsr1eWZH4vAowOBwGAHk8AoQLfH6Agm0Ed3qOAXWOIgQKiWyFJQgDgJEpdG+WEACNEFNFmKVlVzJQk6qdkwqBoi1mebJ3ALNGeIZHtGSwNDS1RZKueCEAIfkECQcAEAAsAAAAABgAGAAABZcgJI4kpChlWgYCWRQkEKgjURgjw4zOg9CjVwuiEyEeO6CxkBC9nA+HiuUqLEyoBZI0Mx4SAFFgQCDZuguBoGv6Dtg0gvpqdhxQQDkBzuUr/4A1JwMKP39pc2mDhYCIc4GQYn6QCwCMeY91l0p6dBAEJ0OfcFRimZ91Mwt0alxxAIZyRmuAsKxDLKKvZbM1tJxmvGKRpn8hACH5BAkHABAALAAAAAAYABgAAAWhICSOJGQYZVoGAnkcJBKoI3EAY1GMCtPSosSBINKJBIwGkHdwBGGQA0OhYpEGQxNqkYzNIITBACEKKBaxxNfBeOCO4vMy0Hg8nDHFeCktkKtfNAtoS4UqAicKBj9zBAKPC4iKi4aRkISGmWWBmjUIAIyHkCUEAKCVo2WmREecVqoCgZhgP4NHrGWCj7e3szSpuxAsoVWxnp6cVV4kyZW+KSEAIfkECQcAEAAsAAAAABgAGAAABZkgJI4kBABlWgYEOQykEKgjMSDjcYxG0dKi108nEhQKQN4rCIMkCgbawjWYnSCLY2yGVSgEooBhWqsGGwxc0RtNBgoMhmJ1QgETjANYFeBKyUmBKQQIdT9JDmgPDQ6EhoKJD4sOgpWWgiwChyqEBH5hmptSoSOZgJ4kLKWkYTF7C2SaqaM/hEWygay4mYG8t6uffFuzl1iANCEAIfkECQcAEAAsAAAAABgAGAAABZ0gJI4khCBlmhKkopBCoI6LIozDMAIHO4uuBVBnOiR+I4FrCDwAZsKdQnaCLIwwmRUA8JmioprWUCjcwlwUMnAoG0qL03k2KCS8cC0UjOzDCQKBfHQFDAwFU4CCfgqFhy9+kZJWgzSKSAcPZn+BfQENDw8OljGWJAFeDoZPYTBnC1GdSXqnsoBolSulX2GyP6hgvnG0KrS3NJNhuSQhACH5BAkHABAALAAAAAAYABgAAAWaICSOJCQIZZoupGGQRKCOC0CMijIiwz2LABtQZxoMfjQhxAXszWQ7gOwECRhh0MCJJRJARTUoIHFAgbfI6uBwAJS01J/i4PClVYHvfV8lbLlIBmwFbQt+aGmChG18jXeGT4dICQxlb4g/AQUMDER9XjR6BAdiDQwINDBmkAsPDVh4cX4imw53iLKuaVqAcUsPqEiidkt6j4AzIQAh+QQJBwAQACwAAAAAGAAYAAAFmSAkjiREEGWaBiSCtCoZCMsIAKOg1LEo0KKbaKFQ9EYLoOkFuQlirNxzCQkUW9GZ0hQd4nyDAWr4G/esYSbyZFYZwu3jqiuvr8u8I2BwOAwASXh1e31/doeHC3klWnElfAlTd46MfQUGk2stCVEGBQWSdCciDg5VDAVYKoEiDQ0iBwxGcj9RDw8+qHIzebc2DJJQJK6qiKVyIQAh+QQJBwAQACwAAAAAGAAYAAAFmSAkjiS0LGWaBiRBtCoZCKgoCCMB1DF0sz6cCQDo5W62l28XAyZFpyECBv3lnCbhUqHMIo0Qg4Jbmn1jRCa4iV27TzfXGjEecOFWMN1OdvvfPGUuXSoKBw6EXokrAwcHRVU0UAeEBANAAAmUI1gNDyhjJgUHLW0iDg8FIqOnBQZrDA9TELE2rEYIDw4jta2LMpCrqld/YQpgIQAh+QQJBwAQACwAAAAAGAAYAAAFmyAkjiS0LGWaBiRBkKw6BgIqCsJcyyMe4yJajhcEml5H26o1PN2QQd3uFiv2AADlAgflIbDdZLgkABOJgep5LfWty4p4zeU+w+XsvJWXliEKDwdEBgMKYQ4PDw1qK3EDCCMAiQ5BCV0LCj+FSDQkgCgGBiYHAy2MIgoMghAHqw4HAGsNDEMFBTekdgwKI7aRB2MwkL2rVHoQoWchACH5BAkHABAALAAAAAAYABgAAAWWICSOJLQsZZoGJEGQrDoGAioKwlzLIx7jIlqOFwSaXkfbqjU83ZBB3e4WK0qrCxyU55peid0qcUwuixyNx6PhILsAcAJazXYj4lvz2MkLiFsHDAlEcABKZwwMBX8pBgoKQxAIigpBA1sLBj+PSDQkB4uSACYDlTMyBgWDEKVnl2QFBUigN61gBQYjtLV5JZ4jtlR6omMhACH5BAkHABAALAAAAAAYABgAAAWaICSOJLQsZZoGJEGQrDoGAioKwlzLIx7jIlqOFwSaXkdbidYanm7I4AjwYDh6saJuJ3JUG1mZi9srPA7EcRimJLrfJYWZUVC8TziXnEG3u/E+cIJaPAFrPQl1aQAIbRAGBZGHJQiMUQKRBkEKbQsAPZaEXQcslSYKmjMyAAdXj34ACkNEiUgDA5t+PAQHn6Ogjkuzry2DNwhuIQAh+QQFBwAQACwAAAAAGAAYAAAFnCAkjiS0LGVaBgBJEGSguo8zCsK4CPIsMg+ECCcKEH0ix6MwhJl4KiOp8UCdmrEbo6EoHpxF8A6aBBZ6vhf5dmAkkGr0CoWs21WGQ2FvsI9xC3l7B311fy93iWGKJQQOhHCAJQB6A3IqcWwJLU90i2FkUiMKlhBELEI6MwgDXRAGhQgAYD6tTqRFAJxpA6mvrqazSKJJhUWMpjlIIQA7) center no-repeat}[_nghost-%COMP%]     .pdfViewer .page .loadingIcon.notVisible{background:none}[_nghost-%COMP%]     .pdfViewer.enablePermissions .textLayer span{-webkit-user-select:none!important;user-select:none!important;cursor:not-allowed}[_nghost-%COMP%]     .pdfPresentationMode .pdfViewer{padding-bottom:0}[_nghost-%COMP%]     .pdfPresentationMode .spread{margin:0}[_nghost-%COMP%]     .pdfPresentationMode .pdfViewer .page{margin:0 auto;border:2px solid transparent}"]}),t})(),n=(()=>{class t{}return t.\u0275fac=function(p){return new(p||t)},t.\u0275mod=T.$C({type:t}),t.\u0275inj=T.G2t({}),t})()}}]);