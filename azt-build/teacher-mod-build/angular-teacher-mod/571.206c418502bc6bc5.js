"use strict";(self.webpackChunkTeacherMod=self.webpackChunkTeacherMod||[]).push([[571],{33011:(oe,B,n)=>{n.d(B,{I:()=>j});var E=n(28447),e=n(43234),c=n(48891),T=n(25661);let j=(()=>{var z;class L{constructor(A){this.userService=A}exportToDocxBinary(A,h,r){let u=this.userService.getUserObj(),t=e.c.azt_ai_base_api;return(0,E.w)().exportToDocxBinary({questions:A,additionalParams:h},"Bearer "+u.rememberToken,t,r)}}return(z=L).\u0275fac=function(A){return new(A||z)(c.KVO(T.R))},z.\u0275prov=c.jDH({token:z,factory:z.\u0275fac,providedIn:"root"}),L})()},95311:(oe,B,n)=>{n.d(B,{$s:()=>A,JP:()=>E,Wn:()=>L,Xe:()=>c,ep:()=>e,n1:()=>T,t5:()=>z});const E="00B050",e="f44336",c="_@COLOR@_",T="_@COLOR_END@_";function j(h,r,u){return h.replace(new RegExp(r,"g"),u)}function z(h,r="math",u=" xmlns"){if(!h)return"";const l=h.split(`<${r}`);return[["<span class=\"qv_string_eng_ans\" style='([^']+)'>([^<]*)<span style='([^']+)'>([A-Z])</span></span>",'<b><u below="$4"> $2</u></b>'],["([^>])(\r\n|\r|\n)([^<])","$1<br/>$3"]].forEach(m=>{for(let _=0;_<l.length;_++)if(l[_].startsWith(u)){const P=l[_].split(`</${r}>`);P.length>0&&(P[1]=j(P[1],m[0],m[1])),l[_]=P.join(`</${r}>`)}else l[_]=j(l[_],m[0],m[1])}),l.join(`<${r}`)}function L(h){return h.forEach(r=>{r.content=z(r.content);for(let u=0;u<r.answers.length;u++)r.answers[u]=z(r.answers[u])}),h}const N=[{key:"TABLE",value:'<w:tblPr><w:tblStyle w:val="TableGrid" /><w:tblpPr w:leftFromText="180" w:rightFromText="180" w:vertAnchor="text" w:tblpXSpec="right" w:tblpY="1" /><w:tblOverlap w:val="never" /><w:tblW w:w="0" w:type="auto" /><w:tblBorders><w:insideV w:val="none" w:sz="0" w:space="0" w:color="auto" /></w:tblBorders><w:tblCellMar><w:top w:w="113" w:type="dxa" /><w:left w:w="397" w:type="dxa" /><w:bottom w:w="113" w:type="dxa" /><w:right w:w="397" w:type="dxa" /></w:tblCellMar><w:tblLook w:val="0600" w:firstRow="0" w:lastRow="0" w:firstColumn="0" w:lastColumn="0" w:noHBand="1" w:noVBand="1" /></w:tblPr>'},{key:"CORRECT",value:`<w:tcPr><w:tcW w:w="0" w:type="auto" /><w:tcBorders><w:top w:val="single" w:sz="4" w:space="0" w:color="FFFFFF" /><w:left w:val="single" w:sz="4" w:space="0" w:color="FFFFFF" /><w:bottom w:val="single" w:sz="4" w:space="0" w:color="FFFFFF" /><w:right w:val="single" w:sz="4" w:space="0" w:color="${c}" /></w:tcBorders><w:vAlign w:val="center" /></w:tcPr>`},{key:"KEY_RESULT",value:`<w:tcPr><w:tcW w:w="0" w:type="auto" /><w:tcBorders><w:top w:val="single" w:sz="4" w:space="0" w:color="${c}" /><w:left w:val="single" w:sz="4" w:space="0" w:color="FFFFFF" /><w:bottom w:val="single" w:sz="4" w:space="0" w:color="${c}" /><w:right w:val="single" w:sz="4" w:space="0" w:color="${T}" /></w:tcBorders><w:vAlign w:val="center" /></w:tcPr>`},{key:"FILL_RESULT",value:`<w:tcPr><w:tcW w:w="0" w:type="auto" /><w:tcBorders><w:top w:val="single" w:sz="4" w:space="0" w:color="${c}" /><w:left w:val="single" w:sz="4" w:space="0" w:color="FFFFFF" /><w:bottom w:val="single" w:sz="4" w:space="0" w:color="${c}" /><w:right w:val="single" w:sz="4" w:space="0" w:color="${c}" /></w:tcBorders><w:vAlign w:val="center" /></w:tcPr>`},{key:"HEADER_TABLE",value:'<w:tblPr><w:tblW w:w="0" w:type="auto"/><w:jc w:val="center"/><w:tblBorders><w:top w:val="single" w:sz="4" w:space="0" w:color="auto"/><w:left w:val="single" w:sz="4" w:space="0" w:color="auto"/><w:bottom w:val="single" w:sz="4" w:space="0" w:color="auto"/><w:right w:val="single" w:sz="4" w:space="0" w:color="auto"/><w:insideH w:val="single" w:sz="4" w:space="0" w:color="auto"/><w:insideV w:val="single" w:sz="4" w:space="0" w:color="auto"/></w:tblBorders><w:tblLook w:val="04A0" w:firstRow="1" w:lastRow="0" w:firstColumn="1" w:lastColumn="0" w:noHBand="0" w:noVBand="1"/></w:tblPr>'},{key:"HEADER_TABLE_NO_BORDER",value:'<w:tblPr><w:tblW w:w="0" w:type="auto"/><w:jc w:val="center"/><w:tblLook w:val="04A0" w:firstRow="1" w:lastRow="0" w:firstColumn="1" w:lastColumn="0" w:noHBand="0" w:noVBand="1"/></w:tblPr>'},{key:"HEADER_TABLE_TR",value:'<w:trPr><w:jc w:val="center" /></w:trPr>'},{key:"HEADER_TABLE_LEFT",value:'<w:tcPr><w:tcW w:w="3528" w:type="dxa" /></w:tcPr>'},{key:"HEADER_TABLE_RIGHT",value:'<w:tcPr><w:tcW w:w="7262" w:type="dxa" /><w:hideMark /></w:tcPr>'},{key:"TB_RESULT_TXT",value:'<w:pPr><w:jc w:val="center" /></w:pPr>'},{key:"TB_RESULT_POINT",value:'<w:pPr><w:jc w:val="center" /></w:pPr>'},{key:"TB_RESULT_COMMENT",value:"<w:pPr><w:rPr><w:i /><w:iCs /></w:rPr></w:pPr>"},{key:"LINE_CENTER",value:'<w:pPr><w:jc w:val="center" /></w:pPr>'}];class A{static get(r,u=[]){const t=N.find(l=>l.key===r);if(t){let l=t.value;for(const v of u)l=j(l,v.key,v.value);return btoa(l)}return""}static makeHeaderTable(r,u,t=!0){const l=document.createElement("table"),v=document.createElement("tr");l.appendChild(v);const m=document.createElement("td"),_=document.createElement("td");v.appendChild(m),v.appendChild(_),l.setAttribute("docx-style",A.get(t?"HEADER_TABLE":"HEADER_TABLE_NO_BORDER")),v.setAttribute("docx-style",A.get("HEADER_TABLE_TR")),m.setAttribute("docx-style",A.get("HEADER_TABLE_LEFT")),_.setAttribute("docx-style",A.get("HEADER_TABLE_RIGHT"));const P=document.createElement("span"),S=document.createElement("span");return r.forEach(s=>{if("string"==typeof s){const U=document.createElement("br"),W=document.createElement("b");W.innerText=s,W.appendChild(U),P.appendChild(W)}else P.appendChild(s)}),u.forEach(s=>{if("string"==typeof s){const U=document.createElement("br"),W=document.createElement("b");W.innerText=s,W.appendChild(U),S.appendChild(W)}else S.appendChild(s)}),m.appendChild(P),_.appendChild(S),l.outerHTML}static createLineBold(r){const u=document.createElement("p"),t=document.createElement("b");return t.innerText=r,u.appendChild(t),u}static createLineCenterBold(r){const u=document.createElement("p"),t=document.createElement("b");return u.setAttribute("docx-style",A.get("LINE_CENTER")),t.innerText=r,u.appendChild(t),u}static createLineCenterItalicized(r){const u=document.createElement("p"),t=document.createElement("i");return u.setAttribute("docx-style",A.get("LINE_CENTER")),t.innerText=r,u.appendChild(t),u}}},37753:(oe,B,n)=>{n.d(B,{Q:()=>E});class E{constructor(c,T,j,z,L,N,A,h=1,r=!1,u=!1,t,l,v,m,_){this.id=c,this.pr=T,this.type=j,this.shareType=z,this.item=L,this.examHashId=N,this.examCategoryId=A,this.level=h,this.expandable=r,this.isLoading=u,this.prNode=t,this.isLeaf=l,this.childrenNode=v,this.questions=m,this.children=_}}},55021:(oe,B,n)=>{n.d(B,{Q:()=>A});var E=n(39832),e=n(43234),c=n(48891),T=n(21164),j=n(6389),z=n(37159),L=n(82531),N=n(1425);let A=(()=>{var h;class r{constructor(t,l,v,m,_){this.commonService=t,this.shareFileFlutterService=l,this.encryptService=v,this.formatAnswerSheetService=m,this.exportExcelService=_,this.allAnswerSheet=E.c}exportFileNameOfStudentCode(t,l,v){return 100==t&&(l=""),this.commonService.createFileNameExportFile(["DanhSachSBD"+(l?"_"+l:"")+"_"+this.encryptService.createMd5(v).substring(0,6)])+".xlsx"}chooseAnswerSheetTemplate(t,l,v,m,_,P){return l==this.allAnswerSheet.templateA5Full50?t.createA5AnswerSheetFullA4_50(P??50):l==this.allAnswerSheet.templateA4Essay?t.createA4AnswerSheet_35hh(P??50):l==this.allAnswerSheet.templateA6Full20?t.createA6AnswerSheetFullA4_20(P??20):l==this.allAnswerSheet.templateTrueFalseA4||l==this.allAnswerSheet.templateHSGA4||l==this.allAnswerSheet.templateTrueFalseA4With12Fill||l==this.allAnswerSheet.templateTrueFalseFullA4||l==this.allAnswerSheet.templateTrueFalseA4WithColor||l==this.allAnswerSheet.templateTrueFalseEssayA4||l==this.allAnswerSheet.templateTrueFalseA5||l==this.allAnswerSheet.templateTrueFalseA6||l==this.allAnswerSheet.templateA4WithFax||l==this.allAnswerSheet.templateA4WithFaxV2||l==this.allAnswerSheet.templateA4EssayWith4Fill2018||l==this.allAnswerSheet.templateA4NoEssay2025||l==this.allAnswerSheet.templateA4With96MultipleAndEssay?t.createTrueFalseAnswerSheet():l==this.allAnswerSheet.templateMinistryA4TF?t.createAzotaAnswerSheetMinistry_A4():l==this.allAnswerSheet.templateMinistry4DigitsExamCode?t.createAzotaAnswerSheetMinistry_A4_4DigitsExamCode():t.createAzotaAnswerSheet_A4(P??120)}exportFileNameOfAnswerSheet(t,l,v){var m="";return 100==t&&(l=""),(0==t||100==t)&&(m=this.commonService.createFileNameExportFile(["PhieuTL_"+v+(l?"_"+l:"")])),m}exportFileNameOfAnswerExcelOffline(t,l,v){var m="";return 100==t&&(l=""),(0==t||100==t)&&(m=this.commonService.createFileNameExportFile(["DapAn_"+(l?"_"+l:"")])),m}exportFileNameOfRawExam(t,l,v){var m="";return 100==t&&(l=""),(0==t||100==t)&&(m=this.commonService.createFileNameExportFile([(l?"_"+l:"")+"_"+this.encryptService.createMd5(v).substring(0,6)])),m}exportFileNameOfExamOffline(t,l,v,m){var _="";return 100==t&&(l=""),(0==t||100==t)&&(_=this.commonService.createFileNameExportFile([(m?this.formatAnswerSheetService.formatOfflineExamHashIdToNumber(m,e.c.maxExamCodeLength)+"_":"")+v+(l?"_"+l:"")])),_}printStudentCode(t,l){var v=[];let m=this.commonService.myClone(l);for(let _=0;_<m.length;_++)v.push({code:m[_].code??0,fullName:m[_]?.fullName??"",birthday:m[_]?.birthday??"",phone:m[_]?.phone,className:m[_].classroomName??""});this._exportExcelForCodeNumber(t,v)}_exportExcelForCodeNumber(t,l){let v=this.exportFileNameOfStudentCode(0,t?.name??"",t?.hashId??"");const m=this.exportExcelService.exportExcelForCodeNumber(l);this.shareFileFlutterService.shareFileWithBlob(m,v)}}return(h=r).\u0275fac=function(t){return new(t||h)(c.KVO(T.R),c.KVO(j.R),c.KVO(z.v),c.KVO(L.e),c.KVO(N.x))},h.\u0275prov=c.jDH({token:h,factory:h.\u0275fac,providedIn:"root"}),r})()},53372:(oe,B,n)=>{n.d(B,{c:()=>U});var E=n(73014),e=n(28447),c=n(37794),T=n(17887),j=n(27525),z=n(91478),N=n(43234),A=n(87242),h=n(95311),r=n(48891),u=n(33011),t=n(21164),l=n(25661),v=n(97324),m=n(55021),_=n(82531),P=n(6389),S=n(64906),s=n(78472);let U=(()=>{var W;class ee{constructor(M,f,k,I,d,D,a,x,g){this.docxService=M,this.commonService=f,this.userService=k,this.questionRenderService=I,this.printAnswersheetService=d,this.formatAnswerSheetService=D,this.shareFileFlutterService=a,this.sAztAnswerTypeService=x,this.documentConfigService=g,this.configRenderService=new c.y,this.saveLoadingMsg="",this.isAnsDetail=!1,this.isEnableDebug=!1,this.zipper=new z,this.countRetryLoadJS=0}convertAnswerQuestion(M,f){let k=[],I=[];return M.answerResult&&this.isAnsDetail&&M.answerResult.forEach(d=>{let D=d;const a=M.answers?.find(x=>x.key===d);a&&(D=a.alpha??D),I.push(D)}),M.answers.forEach(d=>{let D="<b>     "+(I.includes(d.alpha??d.key)?"*":"")+(f?(d.alpha?d.alpha:d.key).toLowerCase()+")":(d.alpha?d.alpha:d.key)+".")+"</b> "+(0,h.t5)(d.content);k.push(D)}),k}getDataForExportDocxApi(M,f,k){let I=[],d=0;if(k){let a=this.commonService.myTranslateInstant("lang_cms_publish_test_exam");I.push({content:`<b> ${a} `+this.formatAnswerSheetService.formatOfflineExamHashIdToNumber(k,N.c.maxExamCodeLength)+".</b>",answers:[]})}let D=this.expandInfoParse?.label??this.commonService.myTranslateInstant("lang_auto_cau");return f.forEach(a=>{1!==M.hideGroupQuestion&&a.groupInfo?.isFirstInGroup&&a.groupInfo.groupContent&&I.push({content:`<b>${a.groupInfo.groupContent}<b>`,answers:[]}),this.isEnableDebug&&I.push({content:` <br/><br/><br/>*** <b>Question ID: ${a.id}</b> ***`,answers:[]});let x={content:`<b>${D} `+((a.labelIndex??d)+(M.startQuestionIndex??1))+".</b> "+(this.checkImgAtStart(a.content??"")?"<br/>":"")+(0,h.t5)(a.content),answers:this.convertAnswerQuestion(a??[],this.sAztAnswerTypeService.isTrueFalseAnswer(a))};if(d++,I.push(x),this.isAnsDetail&&((a.help||this.sAztAnswerTypeService.isFillAnswer(a))&&I.push({content:`<b>${this.commonService.myTranslateInstant("lang_auto_loi_giai")}</b><br/> ${a.help}`,answers:[]}),a.answerResult&&this.isAnsDetail)){let g=[];a.answerResult.forEach(V=>{let $=V;const Z=a.answers?.find(te=>te.key===V);Z&&($=Z.alpha??$),g.push($)}),this.sAztAnswerTypeService.isFillAnswer(a)&&I.push({content:`${this.commonService.myTranslateInstant("lang_auto_dap_an")}: ${g.join(" | ")}`,answers:[]})}this.isEnableDebug&&I.push({content:"*** *************** .. **************** ***<br/><br/><br/>",answers:[]})}),I}makeDefaultStrValue(M,f){return M&&0!==M.trim().length?M??"":f??""}itemConverterCaller(M,f,k,I,d){var D=this;return new Promise((a,x)=>{var g=0;this.questionRenderService.parseRenderQuestions(M.listQuestion,V=>{if(!this.saveLoadingMsg.includes(")")){g=V/2;var $=(this.commonService.myTranslateInstant("lang_cms_common_loading")??"")+Math.floor(g)+"%";this.changeMsg?this.changeMsg($):T.L.changeMsgLoadingEffect($)}},this.configRenderService,void 0,!0,d).then(V=>{let $=[];const Z=[],te=[];if((f.indetifyBox||f.examName)&&Z.push(h.$s.createLineCenterBold(this.makeDefaultStrValue(f.indetifyBox,f.examName))),f.subject&&Z.push(h.$s.createLineCenterBold(f.subject)),(f.timeBox||f.examMinutes)&&Z.push(h.$s.createLineCenterItalicized(this.makeDefaultStrValue(f.timeBox,f.examMinutes))),Z.push(h.$s.createLineCenterItalicized("-------------------------")),f.departmentName&&te.push(h.$s.createLineCenterBold(f.departmentName)),f.schoolName&&te.push(h.$s.createLineCenterBold(f.schoolName)),$.push({content:h.$s.makeHeaderTable(te,Z,!1),answers:[]}),$.push({content:h.$s.createLineBold(this.commonService.myTranslateInstant("lang_auto_ho_ten_thi_sinh_offline")??"").outerHTML,answers:[]}),$.push({content:h.$s.createLineBold(this.commonService.myTranslateInstant("lang_auto_so_bao_danh_offline")??"").outerHTML,answers:[]}),$=$.concat(this.getDataForExportDocxApi(I,V,M.offlineExamMixQuestionObj?M.offlineExamMixQuestionObj.hashId??0:void 0)),(0,e.w)()){var se=0;let ae=M.offlineExamMixQuestionObj?.hashId?M.offlineExamMixQuestionObj.hashId.toString().padStart(3,"0"):void 0,ie=ae?this.commonService.myTranslateInstant("lang_auto_ma_de")+" "+ae:"";this.docxService.exportToDocxBinary($,{isHeadless:!0,footerLeft:ie},function(){var Y=(0,E.A)(function*(X,H,J){new Promise(ce=>{setTimeout(()=>{0==X&&(se=g),g=X/H*25+se;var _e=(D.commonService.myTranslateInstant("lang_cms_common_loading")??"")+Math.floor(g)+"%";T.L.changeMsgLoadingEffect(_e)}),ce(!0)})});return function(X,H,J){return Y.apply(this,arguments)}}()).then(Y=>{a({userObj:k,data:Y,input:$,additionParams:f,offlineExamMixQuestionObj:M.offlineExamMixQuestionObj})})}else x(new Error("C\xf3 l\u1ed7i x\u1ea3y ra trong qu\xe1 tr\xecnh x\u1eed l\xfd d\u1eef li\u1ec7u (Kh\xf4ng t\u1ea3i \u0111\u01b0\u1ee3c th\u01b0 vi\u1ec7n). Vui l\xf2ng F5 v\xe0 th\u1eed l\u1ea1i sau!"))}).catch(V=>{x(new Error(V[0].message))})})}masterConverterCaller(M,f,k,I,d,D){return new Promise((a,x)=>{const g=this.userService.getUserObj();let V=this.commonService.myTranslateInstant("lang_testbank_utils_footer_information_school")?.toLowerCase(),$=this.commonService.myTranslateInstant("lang_auto_docx_mon_thi")?.toLowerCase(),Z=this.commonService.myTranslateInstant("lang_auto_docx_bai_thi")?.toLowerCase(),te=this.commonService.myTranslateInstant("lang_testbank_tested_list_time_homework"),se=this.commonService.myTranslateInstant("lang_core_khong_ke_thoi_gian_giao_de"),ae=this.commonService.myTranslateInstant("lang_testbank_tested_list_minute"),ie=this.commonService.myTranslateInstant("lang_auto_khong_gioi_han");const Y=new j.n(1,{function:(X,H)=>{this.saveLoadingMsg=`${this.commonService.myTranslateInstant("lang_auto_dang_tao_tep_tin_cho_de_thi")} ${H<=1?"":`(${X}/${H}) `}`,this.changeMsg?this.changeMsg(this.saveLoadingMsg):T.L.changeMsgLoadingEffect(this.saveLoadingMsg)}});M.forEach(X=>{let H={schoolName:this.makeDefaultStrValue(I?.nameSchool,`{${V}}`),subject:this.makeDefaultStrValue(I?.nameSubject,`{${$}}`),examName:this.makeDefaultStrValue(f.name,`{${Z}}`),examMinutes:f.minutes&&f.minutes>0?`${te}: `+f.minutes+` ${ae} (${se})`:` ${te}: ${ie}`,templateType:d??0,numberOfQuestion:X.listQuestion.length,examId:X.offlineExamMixQuestionObj?.hashId??0,departmentName:I?.departmentName,indetifyBox:I?.indetifyBox,timeBox:I?.timeBox};Y.addTask(this,this.itemConverterCaller,[X,H,g,f,D])}),Y.start().then(X=>{if(X.errs.length>0)x(X.errs[0]);else if(1===X.datas.length){const H=X.datas[0],J=new Blob([H.data],{type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"});let ce=this.createNameExam(f,k,H.offlineExamMixQuestionObj);this.shareFileFlutterService.shareFileWithBlob(J,ce),a()}else X.datas.forEach(H=>{let J=this.createNameExam(f,k,H.offlineExamMixQuestionObj);J=this.replaceAllString(J,"/","_"),this.zipper.file("DOCS/"+J,H.data)}),setTimeout(()=>{this.zipper.generateAsync({type:"blob"}).then(H=>{let J=this.commonService.createFileNameExportFile([f.name??"azota"])+"_offline_test.zip";this.shareFileFlutterService.shareFileWithBlob(H,J),a()},H=>{x(H)})},200)})})}replaceAllString(M,f,k){for(;M.includes(f);)M=M.replace(f,k);return M}createNameExam(M,f,k){return f?this.printAnswersheetService.exportFileNameOfExamOffline(0,M.name??"",f?.hashId??"",k?.hashId??0)+".docx":this.printAnswersheetService.exportFileNameOfRawExam(0,M.name??"",M.hashId??"")+".docx"}downloadExam(M,f,k,I,d,D,a,x,g,V,$){return new Promise((Z,te)=>{this.isAnsDetail=M,this.isEnableDebug=!!V,this.expandInfoParse=this.commonService.castJsonToObj(f.expandInfo??"{}"),this.changeMsg=g,this.commonService.loadAzotaDocxJs().then(()=>{this.documentConfigService.apiDocumentConfigGetExamConfigDataV2Get(f.hashId??"").subscribe(se=>{if(1==se.success){let ae=0,ie=0;d.forEach((Y,X)=>{Y.labelIndex=Y.originalLabel?Number(Y.originalLabel)-1:X,se.data?.resetQuestionIndex&&Y.groupInfo&&Y.groupInfo.groupId&&(ae!=Y.groupInfo.groupId&&(ae=Y.groupInfo.groupId,ie=0),Y.labelIndex=Y.originalLabel?Number(Y.originalLabel)-1:ie,ie++)})}this.masterConverterCaller([{listQuestion:d,offlineExamMixQuestionObj:I}],f,k,D,a,$).then(()=>{this.zipper=new z,x?x(10):T.L.closeLoadingEffect(10),Z()}).catch(ae=>{T.L.closeLoadingEffect(10),te(ae)})})}).catch(()=>{x?x(10):T.L.closeLoadingEffect(10),te(new Error("lang_core_lib_not_load"))})})}downloadExamObjs(M,f,k,I,d,D,a,x,g,V){return new Promise(($,Z)=>{this.isAnsDetail=M,this.isEnableDebug=!!g,this.expandInfoParse=this.commonService.castJsonToObj(f.expandInfo??"{}"),this.changeMsg=x,this.commonService.loadAzotaDocxJs().then(()=>{let te=!0;const se=[];this.documentConfigService.apiDocumentConfigGetExamConfigDataV2Get(f.hashId??"").subscribe(ae=>{I.forEach(ie=>{let Y=this.commonService.castJsonToClassObjs(A.I,JSON.stringify(ie.mixQuestions??[]))??[];if(Y.length>0){if(1==ae.success){let X=0,H=0;Y.forEach((J,ce)=>{J.labelIndex=J.originalLabel?Number(J.originalLabel)-1:ce,ae.data?.resetQuestionIndex&&J.groupInfo&&J.groupInfo.groupId&&(X!=J.groupInfo.groupId&&(X=J.groupInfo.groupId,H=0),J.labelIndex=J.originalLabel?Number(J.originalLabel)-1:H,H++)})}se.push({listQuestion:Y,offlineExamMixQuestionObj:ie})}else te=!1}),te?this.masterConverterCaller(se,f,k,d,D,V).then(()=>{this.zipper=new z,a?a(10):T.L.closeLoadingEffect(10),$()}).catch(ie=>{a?a(10):T.L.closeLoadingEffect(10),Z(ie)}):(a?a(10):T.L.closeLoadingEffect(10),Z(new Error("lang_testbank_exam_is_invalid_condition")))})}).catch(()=>{a?a(10):T.L.closeLoadingEffect(10),Z(new Error("lang_core_lib_not_load"))})})}checkImgAtStart(M){return/^\s*<img/.test(M)}}return(W=ee).\u0275fac=function(M){return new(M||W)(r.KVO(u.I),r.KVO(t.R),r.KVO(l.R),r.KVO(v.g),r.KVO(m.Q),r.KVO(_.e),r.KVO(P.R),r.KVO(S._),r.KVO(s.x_))},W.\u0275prov=r.jDH({token:W,factory:W.\u0275fac,providedIn:"root"}),ee})()},39832:(oe,B,n)=>{n.d(B,{c:()=>E});var E=function(e){return e[e.templateOriginalA4=20]="templateOriginalA4",e[e.templateA5Full50=22]="templateA5Full50",e[e.templateA4Essay=21]="templateA4Essay",e[e.templateA6Full20=23]="templateA6Full20",e[e.templateTrueFalseFullA4=24]="templateTrueFalseFullA4",e[e.templateHSGA4=25]="templateHSGA4",e[e.templateTrueFalseA4With12Fill=26]="templateTrueFalseA4With12Fill",e[e.templateA4With96MultipleAndEssay=27]="templateA4With96MultipleAndEssay",e[e.templateA4Full66WithFax=28]="templateA4Full66WithFax",e[e.templateA4EssayWith4Fill2018=29]="templateA4EssayWith4Fill2018",e[e.templateA4NoEssay2025=31]="templateA4NoEssay2025",e[e.templateMinistryA4TF=2025]="templateMinistryA4TF",e[e.templateMinistry4DigitsExamCode=20254]="templateMinistry4DigitsExamCode",e[e.templateSGDQN=30]="templateSGDQN",e[e.templateTrueFalseA4=15]="templateTrueFalseA4",e[e.templateTrueFalseEssayA4=32]="templateTrueFalseEssayA4",e[e.templateTrueFalseA5=17]="templateTrueFalseA5",e[e.templateTrueFalseA6=18]="templateTrueFalseA6",e[e.templateA4WithFax=19]="templateA4WithFax",e[e.templateA4WithFaxV2=190]="templateA4WithFaxV2",e[e.templateTrueFalseA4WithColor=150]="templateTrueFalseA4WithColor",e[e.templateA4WithColorNew=200]="templateA4WithColorNew",e}(E||{})},28666:(oe,B,n)=>{n.d(B,{Q:()=>I});var E=n(54460),e=n(10936),c=n(65162),T=n(15452),j=n(44327),z=n(55887),L=n(60507),N=n(75498),A=n(15343),h=n(5502),r=n(44155),u=n(88023),t=n(48891);let l=(()=>{var d;class D extends u.H{constructor(){super(...arguments),this.userAnswersObj={},this.isShowOriginAnswer=!1}}return(d=D).\u0275fac=(()=>{let a;return function(g){return(a||(a=t.xGo(d)))(g||d)}})(),d.\u0275cmp=t.VBU({type:d,selectors:[["azt-question-answer-view-content-box-base"]],inputs:{examObj:"examObj",userAnswersObj:"userAnswersObj",questionObj:"questionObj",renderConfigObj:"renderConfigObj",isShowOriginAnswer:"isShowOriginAnswer"},standalone:!0,features:[t.Vt3,t.aNF],decls:0,vars:0,template:function(x,g){},dependencies:[E.MD,e.X1,c.iI,e.YN,r.s,A.flO,z.L,h.Id,j.k],encapsulation:2}),D})();var v=n(96639);const m=(d,D)=>({"text-success":d,"text-danger":D});function _(d,D){1&d&&(t.j41(0,"div",6)(1,"span",7),t.nrm(2,"azt-loading-ui"),t.k0s()())}function P(d,D){if(1&d&&(t.j41(0,"b",14),t.EFF(1),t.nI1(2,"isTrueFalseAnswer"),t.k0s()),2&d){let a;const x=t.XpG().$implicit,g=t.XpG(5);t.R7$(),t.SpI("",t.bMT(2,1,g.questionObj)?(null!==(a=x.alpha)&&void 0!==a?a:x.key).toLowerCase()+")":null!==(a=x.alpha)&&void 0!==a?a:x.key,".")}}function S(d,D){if(1&d&&(t.j41(0,"b",15),t.EFF(1),t.nI1(2,"isTrueFalseAnswer"),t.k0s()),2&d){let a;const x=t.XpG().$implicit,g=t.XpG(5);t.Y8G("ngClass",t.l_i(4,m,g.questionObj.correctAnswer,!g.questionObj.correctAnswer)),t.R7$(),t.SpI(" ",t.bMT(2,2,g.questionObj)?(null!==(a=x.alpha)&&void 0!==a?a:x.key).toLowerCase()+")":null!==(a=x.alpha)&&void 0!==a?a:x.key,". ")}}function s(d,D){if(1&d&&(t.j41(0,"b",14),t.EFF(1),t.nI1(2,"isTrueFalseAnswer"),t.k0s()),2&d){let a;const x=t.XpG().$implicit,g=t.XpG(5);t.R7$(),t.SpI("",t.bMT(2,1,g.questionObj)?(null!==(a=x.alpha)&&void 0!==a?a:x.key).toLowerCase()+")":null!==(a=x.alpha)&&void 0!==a?a:x.key,".")}}function U(d,D){if(1&d&&(t.j41(0,"div",10),t.DNE(1,P,3,3,"b",11)(2,S,3,7,"b",12)(3,s,3,3,"b",11),t.nrm(4,"azt-dynamic-hook",13),t.k0s()),2&d){const a=D.$implicit,x=t.XpG(5);t.R7$(),t.Y8G("ngIf",!x.haveChoose(a)),t.R7$(),t.Y8G("ngIf",x.haveChoose(a)&&x.isTqbDomain),t.R7$(),t.Y8G("ngIf",x.haveChoose(a)&&!x.isTqbDomain),t.R7$(),t.Y8G("content",a.content)}}function W(d,D){if(1&d&&(t.qex(0),t.DNE(1,U,5,4,"div",9),t.bVm()),2&d){const a=t.XpG(4);t.R7$(),t.Y8G("ngForOf",a.questionObj.answersOrigin)}}function ee(d,D){if(1&d&&(t.j41(0,"div",10)(1,"b",14),t.EFF(2),t.nI1(3,"isTrueFalseAnswer"),t.k0s(),t.nrm(4,"azt-dynamic-hook",13),t.k0s()),2&d){let a;const x=D.$implicit,g=t.XpG(5);t.R7$(2),t.JRh(t.bMT(3,2,g.questionObj)?(null!==(a=x.alpha)&&void 0!==a?a:x.key).toLowerCase()+")":(null!==(a=x.alpha)&&void 0!==a?a:x.key)+"."),t.R7$(2),t.Y8G("content",x.content)}}function R(d,D){if(1&d&&t.DNE(0,ee,5,4,"div",9),2&d){const a=t.XpG(4);t.Y8G("ngForOf",a.questionObj.answers)}}function M(d,D){if(1&d&&t.DNE(0,W,2,1,"ng-container",8)(1,R,1,1,"ng-template",null,1,t.C5r),2&d){const a=t.sdS(2),x=t.XpG(3);t.Y8G("ngIf",x.isShowOriginAnswer&&(null==x.questionObj?null:x.questionObj.answersOrigin))("ngIfElse",a)}}function f(d,D){if(1&d&&(t.j41(0,"div",4),t.DNE(1,_,3,0,"div",5)(2,M,3,2,"ng-template",null,0,t.C5r),t.k0s()),2&d){const a=t.sdS(3),x=t.XpG(2);t.Y8G("answerSizeManager",0),t.R7$(),t.Y8G("ngIf",x.questionObj.isLoading)("ngIfElse",a)}}function k(d,D){if(1&d&&(t.qex(0),t.DNE(1,f,4,3,"div",3),t.nI1(2,"isOneChoiceAnswer"),t.nI1(3,"isTrueFalseAnswer"),t.bVm()),2&d){const a=t.XpG();t.R7$(),t.Y8G("ngIf",(t.bMT(2,1,a.questionObj)||t.bMT(3,3,a.questionObj))&&a.questionObj.answers&&a.questionObj.answers.length>0)}}let I=(()=>{var d;class D extends l{haveChoose(x){return!!this.userAnswersObj["id_"+this.questionObj?.id]&&(x.key?x.key.toString()==this.userAnswersObj["id_"+this.questionObj?.id]:x.toString()==this.userAnswersObj["id_"+this.questionObj?.id])}ngOnInit(){}}return(d=D).\u0275fac=(()=>{let a;return function(g){return(a||(a=t.xGo(d)))(g||d)}})(),d.\u0275cmp=t.VBU({type:d,selectors:[["azt-question-answer-view-content-box"]],standalone:!0,features:[t.Vt3,t.aNF],decls:2,vars:3,consts:[["doneLoad",""],["notShowOriginAnswer",""],[4,"ngIf"],["class","row answers",3,"answerSizeManager",4,"ngIf"],[1,"row","answers",3,"answerSizeManager"],["class","col-sm-12 text-center",4,"ngIf","ngIfElse"],[1,"col-sm-12","text-center"],[1,"w-6","h-6","inline-block","mx-auto"],[4,"ngIf","ngIfElse"],["class","answer col-sm-12 col-md-6",4,"ngFor","ngForOf"],[1,"answer","col-sm-12","col-md-6"],["class","answer-label",4,"ngIf"],["class","b-circle w-6 h-6 mr-2",3,"ngClass",4,"ngIf"],[3,"content"],[1,"answer-label"],[1,"b-circle","w-6","h-6","mr-2",3,"ngClass"]],template:function(x,g){1&x&&(t.DNE(0,k,4,5,"ng-container",2),t.nI1(1,"isOfflineExam")),2&x&&t.Y8G("ngIf",!t.bMT(1,1,g.examObj))},dependencies:[T.C,N.R,L.x,E.MD,E.YU,E.Sq,E.bT,e.X1,c.iI,e.YN,r.s,A.flO,z.L,v.st,v.V6,v.FC,h.Id,j.k],styles:['.pr-7[_ngcontent-%COMP%]{padding-right:28px}.w-38px[_ngcontent-%COMP%]{width:38px}.remove-grid[_ngcontent-%COMP%]{display:block!important}.question-standalone-loader-box[_ngcontent-%COMP%]{min-height:50px}  .skeleton-box-loading{width:100%;height:30px;max-width:100%;margin-bottom:5px;display:inline-block}  .skeleton-box-loading:after{position:absolute;top:0;right:0;bottom:0;left:0;transform:translate(-100%);animation:_ngcontent-%COMP%_shimmer 2s infinite;content:""}.question-standalone-box[_ngcontent-%COMP%]{margin-bottom:30px;display:block;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);border-radius:.375rem}.question-standalone-container[_ngcontent-%COMP%]{padding:15px}.question-standalone-for-test-finder[_ngcontent-%COMP%]{border:none;margin-bottom:0;padding:0}.question-standalone-for-test-finder[_ngcontent-%COMP%]   .question-standalone-main-content[_ngcontent-%COMP%]{padding:15px;border:1px solid rgb(228,228,228)}.group-of-question-standalone-for-test-finder[_ngcontent-%COMP%]{padding:15px!important;border:1px solid rgb(228,228,228)!important}.question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid #2262ae!important;outline:3px solid rgba(125,160,201,.65)!important}.group-of-question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid green!important;outline:3px solid rgba(0,193,0,.321)!important}.question-standalone-label[_ngcontent-%COMP%]{font-weight:700}.question-standalone-content-box[_ngcontent-%COMP%]{position:relative}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]{color:#f44336;position:relative;padding-left:20px;display:flex;align-items:center}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]:before{content:"!";position:absolute;left:0;color:#fff;background:#f44336;width:15px;height:15px;text-align:center;border-radius:50%;font-size:smaller;display:flex;justify-content:center;align-items:center}.question-standalone-step-container-box[_ngcontent-%COMP%]{margin-bottom:50px}.group-content-of-question-standalone[_ngcontent-%COMP%]{margin-bottom:10px}.answer[_ngcontent-%COMP%]{display:flex;align-items:center}.answer-label[_ngcontent-%COMP%]{width:20px;height:30px;min-width:20px;min-height:30px;display:flex;align-items:center;justify-content:flex-start;border-radius:50%;border-width:2px;border-style:solid;border-color:transparent}.answer-box[_ngcontent-%COMP%]{border-radius:0 0 3px 3px;padding:8px 20px;justify-content:space-between;align-items:center}.selected-answer[_ngcontent-%COMP%]{background-color:#f39c12;color:#fff}.answer-content-front[_ngcontent-%COMP%]{display:flex!important;flex-wrap:wrap;width:calc(100% - 30px)}.explainTxt[_ngcontent-%COMP%]{width:125px;font-weight:500;display:flex;align-items:center}#examHeader[_ngcontent-%COMP%]{display:block;border:1px solid #e7e7e7;border-radius:3px;overflow:hidden}.arrow_btn[_ngcontent-%COMP%]{font-size:20px;vertical-align:middle;width:20px;height:20px;color:#fff;margin-left:auto!important;margin-right:auto!important;-webkit-user-select:none;user-select:none}.bottom_action[_ngcontent-%COMP%]{position:fixed;padding:15px;bottom:0;left:0;background:#312e2e;color:#fff;width:100%}.bottom_action[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]{display:block}.btn-ans-result[_ngcontent-%COMP%]{color:#fff;background-color:#f39c12}.show-list[_ngcontent-%COMP%]{max-width:200px}.show-list[_ngcontent-%COMP%]   .show-sheet[_ngcontent-%COMP%]   .listli[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:27px;height:27px;border-radius:50%;border:1px solid #347da5;display:flex;align-items:center;color:#fff;justify-content:center;font-size:12px;cursor:pointer;-webkit-user-select:none;user-select:none}.top_action[_ngcontent-%COMP%]{position:fixed;padding:10px;top:0;left:0;background:#312e2e;color:#fff;width:100%}.scrollSheetMobile[_ngcontent-%COMP%]{max-height:200px;overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.scrollSheetMobile[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.notify-badge[_ngcontent-%COMP%]{position:absolute;right:3px;top:3px;text-align:center;color:#afafaf;padding:0;font-size:20px;cursor:pointer}.attach-container[_ngcontent-%COMP%]{background:#fff;padding:10px 0 0;border-radius:5px;width:83.33%;border:1px solid #e8e8e8}.answer-review[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:50%;border:1px solid rgb(52,125,165);display:flex;align-items:center;color:#fff;justify-content:center;font-size:15px;-webkit-user-select:none;user-select:none}.border-none[_ngcontent-%COMP%]{border:none!important}.bg-question[_ngcontent-%COMP%]{margin-top:15px;padding:15px 10px;background:#fff}.question-pending-part[_ngcontent-%COMP%]{width:100%;height:50px}.pencil-edit[_ngcontent-%COMP%]{position:absolute;top:-5px;right:-5px;width:30px;height:30px;border-radius:50%;text-align:center;background:#a9a9a9;z-index:9999}.pencil-edit[_ngcontent-%COMP%]   .lucide[_ngcontent-%COMP%]{color:#fff;stroke-width:2.5px;height:29px}.margin-question-bar[_ngcontent-%COMP%]{margin-top:calc(3rem + 40px)!important}.sheet-screen[_ngcontent-%COMP%]{max-height:calc(100vh - 140px);overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.sheet-screen[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.box-help[_ngcontent-%COMP%]{border-top:1px solid #d7d7d7;padding:10px 30px 0 0}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]{text-align:center;font-size:11px;margin-top:-20px}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#fff;padding:0 10px;color:#d58e0b}.box-help[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]{font-size:13px;overflow-x:auto;overflow-y:hidden}  .layout{display:grid;margin:20px 0;grid-row-gap:20px}  .layout-4{grid-template-columns:1fr 1fr 1fr 1fr}  .layout-2{grid-template-columns:1fr 1fr}  .layout-1{grid-template-columns:1fr}  .question-standalone-content-box{max-width:100%;overflow-x:auto;overflow-y:hidden}  #boxContentQuestion .question-standalone-container{max-width:800px}@keyframes _ngcontent-%COMP%_shimmer{to{transform:translate(100%)}}@media (max-width: 768px){.answer-content-front[_ngcontent-%COMP%]{justify-content:center}.btn-ans-result[_ngcontent-%COMP%]{margin-right:auto!important}}@media (max-width: 800px){  #boxContentQuestion .question-standalone-container{max-width:calc(90vw - 16px)!important}}']}),D})()},58143:(oe,B,n)=>{n.d(B,{a:()=>D});var E=n(54460),e=n(10936),c=n(65162),T=n(44327),j=n(96639),z=n(55887),L=n(28666),N=n(2568),A=n(11866),h=n(71356),r=n(42672),u=n(2287),t=n(81805),l=n(15343),v=n(5502),m=n(44155),_=n(26265),P=n(95428),S=n(1758),s=n(48891),U=n(46434);const W=a=>({"skeleton-box-loading":a}),ee=a=>({"pb-2":a}),R=a=>({display:a});function M(a,x){if(1&a&&s.nrm(0,"div",3),2&a){const g=s.XpG();s.Y8G("ngClass",s.eq3(1,W,g.renderConfigObj.isFirstRender))}}function f(a,x){if(1&a&&s.nrm(0,"azt-test-audio-ui",16),2&a){const g=s.XpG(2);s.Y8G("questionObj",g.questionObj)("isShowList",!0)}}function k(a,x){if(1&a&&s.nrm(0,"azt-question-label-box",17),2&a){const g=s.XpG(2);s.Y8G("examObj",g.examObj)("questionObj",g.questionObj)("renderConfigObj",g.renderConfigObj)("curQuestionIndex",g.curQuestionIndex)}}function I(a,x){if(1&a){const g=s.RV6();s.j41(0,"div",18)(1,"a",19),s.bIt("click",function(){s.eBV(g);const $=s.XpG(2);return s.Njj($.showExplainBox())}),s.EFF(2),s.nI1(3,"mytranslate"),s.nI1(4,"mytranslate"),s.k0s()()}if(2&a){const g=s.XpG(2);s.R7$(2),s.SpI(" ",g.isShowExplain?s.bMT(3,1,"lang_auto_an_giai_thich"):s.bMT(4,3,"lang_auto_xem_giai_thich")," ")}}function d(a,x){if(1&a&&(s.j41(0,"div",4)(1,"div",5),s.nrm(2,"azt-question-group-content-box",6),s.j41(3,"div",7),s.DNE(4,f,1,2,"azt-test-audio-ui",8),s.j41(5,"div",9),s.DNE(6,k,1,4,"azt-question-label-box",10),s.k0s(),s.nrm(7,"azt-question-content-box",6)(8,"azt-question-answer-view-content-box",11),s.j41(9,"div",12),s.nrm(10,"azt-question-answer-view-with-simple-result-box-for-teacher",13),s.DNE(11,I,5,5,"div",14),s.k0s()()(),s.nrm(12,"azt-question-explain-box",15),s.k0s()),2&a){const g=s.XpG();s.R7$(),s.xc7("font-size","1em")("line-height","1.7")("overflow","auto"),s.Y8G("id","question_render_container_"+g.questionObj.id)("ngClass",s.eq3(26,ee,g.questionObj.attachments.length>0)),s.R7$(),s.Y8G("examObj",g.examObj)("questionObj",g.questionObj)("renderConfigObj",g.renderConfigObj),s.R7$(2),s.Y8G("ngIf",g.questionObj.attachments.length>0),s.R7$(2),s.Y8G("ngIf",!g.hideQuestionLabel),s.R7$(),s.Y8G("examObj",g.examObj)("questionObj",g.questionObj)("renderConfigObj",g.renderConfigObj),s.R7$(),s.Y8G("examObj",g.examObj)("isShowOriginAnswer",!0)("questionObj",g.questionObj)("renderConfigObj",g.renderConfigObj),s.R7$(2),s.Y8G("questionObj",g.questionObj),s.R7$(),s.Y8G("ngIf",g.questionObj.help&&!g.isExport),s.R7$(),s.Y8G("ngStyle",s.eq3(28,R,g.isShowExplain?"block":"none"))("isShowExplain",g.isShowExplain)("questionObj",g.questionObj)("renderConfigObj",g.renderConfigObj)}}let D=(()=>{var a;class x extends _.I{showExplainBox(){this.isShowExplain=!this.isShowExplain}ngOnInit(){super.ngOnInit();let V=new P.C(this.disableLazy,this.disableRender,this.isExport);super.initData(V,this.follower,this.questionObj)}constructor(){super(),this.follower=new S.e,this.curQuestionIndex=0,this.isShowExplain=!1,this.isExport=!1,this.disableLazy=!1,this.disableRender=!1,this.hideQuestionLabel=!1}}return(a=x).\u0275fac=function(V){return new(V||a)},a.\u0275cmp=s.VBU({type:a,selectors:[["azt-question-standalone-for-preview"]],inputs:{examObj:"examObj",questionObj:"questionObj",follower:"follower",curQuestionIndex:"curQuestionIndex",isShowExplain:"isShowExplain",isExport:"isExport",disableLazy:"disableLazy",disableRender:"disableRender",hideQuestionLabel:"hideQuestionLabel"},standalone:!0,features:[s.Vt3,s.aNF],decls:4,vars:3,consts:[["elementRended",""],["load_effect_lazy","",1,"question-standalone-box",3,"id"],["class","question-standalone-loader-box",3,"ngClass",4,"ngIf","ngIfElse"],[1,"question-standalone-loader-box",3,"ngClass"],[1,"question-standalone-content-box"],[1,"question-standalone-container","box","border-none",3,"id","ngClass"],[3,"examObj","questionObj","renderConfigObj"],[1,"question-standalone-main-content"],[3,"questionObj","isShowList",4,"ngIf"],[1,"flex","items-center","justify-between"],[3,"examObj","questionObj","renderConfigObj","curQuestionIndex",4,"ngIf"],[3,"examObj","isShowOriginAnswer","questionObj","renderConfigObj"],[1,"flex","justify-between"],[3,"questionObj"],["class","ml-auto mt-1",4,"ngIf"],[2,"width","calc(100% - 24px)","overflow-x","auto","margin","auto",3,"ngStyle","isShowExplain","questionObj","renderConfigObj"],[3,"questionObj","isShowList"],[3,"examObj","questionObj","renderConfigObj","curQuestionIndex"],[1,"ml-auto","mt-1"],["azt-track-service","azt-standalone-question-4zQT3eCoTDc",1,"btn","btn-transparent",2,"user-select","none",3,"click"]],template:function(V,$){if(1&V&&(s.j41(0,"div",1),s.DNE(1,M,1,3,"div",2)(2,d,13,30,"ng-template",null,0,s.C5r),s.k0s()),2&V){const Z=s.sdS(3);s.Y8G("id","question_render_element_"+$.questionObj.id),s.R7$(),s.Y8G("ngIf",!$.renderConfigObj.isRenderElement)("ngIfElse",Z)}},dependencies:[r.y,t.c,u.S,A.$,L.Q,N.l,h.N,E.MD,E.YU,E.bT,E.B3,e.X1,c.iI,e.YN,j.wp,m.s,l.flO,z.L,v.Id,T.k,U.N],styles:['.pr-7[_ngcontent-%COMP%]{padding-right:28px}.w-38px[_ngcontent-%COMP%]{width:38px}.remove-grid[_ngcontent-%COMP%]{display:block!important}.question-standalone-loader-box[_ngcontent-%COMP%]{min-height:50px}  .skeleton-box-loading{width:100%;height:30px;max-width:100%;margin-bottom:5px;display:inline-block}  .skeleton-box-loading:after{position:absolute;top:0;right:0;bottom:0;left:0;transform:translate(-100%);animation:_ngcontent-%COMP%_shimmer 2s infinite;content:""}.question-standalone-box[_ngcontent-%COMP%]{margin-bottom:30px;display:block;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);border-radius:.375rem}.question-standalone-container[_ngcontent-%COMP%]{padding:15px}.question-standalone-for-test-finder[_ngcontent-%COMP%]{border:none;margin-bottom:0;padding:0}.question-standalone-for-test-finder[_ngcontent-%COMP%]   .question-standalone-main-content[_ngcontent-%COMP%]{padding:15px;border:1px solid rgb(228,228,228)}.group-of-question-standalone-for-test-finder[_ngcontent-%COMP%]{padding:15px!important;border:1px solid rgb(228,228,228)!important}.question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid #2262ae!important;outline:3px solid rgba(125,160,201,.65)!important}.group-of-question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid green!important;outline:3px solid rgba(0,193,0,.321)!important}.question-standalone-label[_ngcontent-%COMP%]{font-weight:700}.question-standalone-content-box[_ngcontent-%COMP%]{position:relative}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]{color:#f44336;position:relative;padding-left:20px;display:flex;align-items:center}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]:before{content:"!";position:absolute;left:0;color:#fff;background:#f44336;width:15px;height:15px;text-align:center;border-radius:50%;font-size:smaller;display:flex;justify-content:center;align-items:center}.question-standalone-step-container-box[_ngcontent-%COMP%]{margin-bottom:50px}.group-content-of-question-standalone[_ngcontent-%COMP%]{margin-bottom:10px}.answer[_ngcontent-%COMP%]{display:flex;align-items:center}.answer-label[_ngcontent-%COMP%]{width:20px;height:30px;min-width:20px;min-height:30px;display:flex;align-items:center;justify-content:flex-start;border-radius:50%;border-width:2px;border-style:solid;border-color:transparent}.answer-box[_ngcontent-%COMP%]{border-radius:0 0 3px 3px;padding:8px 20px;justify-content:space-between;align-items:center}.selected-answer[_ngcontent-%COMP%]{background-color:#f39c12;color:#fff}.answer-content-front[_ngcontent-%COMP%]{display:flex!important;flex-wrap:wrap;width:calc(100% - 30px)}.explainTxt[_ngcontent-%COMP%]{width:125px;font-weight:500;display:flex;align-items:center}#examHeader[_ngcontent-%COMP%]{display:block;border:1px solid #e7e7e7;border-radius:3px;overflow:hidden}.arrow_btn[_ngcontent-%COMP%]{font-size:20px;vertical-align:middle;width:20px;height:20px;color:#fff;margin-left:auto!important;margin-right:auto!important;-webkit-user-select:none;user-select:none}.bottom_action[_ngcontent-%COMP%]{position:fixed;padding:15px;bottom:0;left:0;background:#312e2e;color:#fff;width:100%}.bottom_action[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]{display:block}.btn-ans-result[_ngcontent-%COMP%]{color:#fff;background-color:#f39c12}.show-list[_ngcontent-%COMP%]{max-width:200px}.show-list[_ngcontent-%COMP%]   .show-sheet[_ngcontent-%COMP%]   .listli[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:27px;height:27px;border-radius:50%;border:1px solid #347da5;display:flex;align-items:center;color:#fff;justify-content:center;font-size:12px;cursor:pointer;-webkit-user-select:none;user-select:none}.top_action[_ngcontent-%COMP%]{position:fixed;padding:10px;top:0;left:0;background:#312e2e;color:#fff;width:100%}.scrollSheetMobile[_ngcontent-%COMP%]{max-height:200px;overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.scrollSheetMobile[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.notify-badge[_ngcontent-%COMP%]{position:absolute;right:3px;top:3px;text-align:center;color:#afafaf;padding:0;font-size:20px;cursor:pointer}.attach-container[_ngcontent-%COMP%]{background:#fff;padding:10px 0 0;border-radius:5px;width:83.33%;border:1px solid #e8e8e8}.answer-review[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:50%;border:1px solid rgb(52,125,165);display:flex;align-items:center;color:#fff;justify-content:center;font-size:15px;-webkit-user-select:none;user-select:none}.border-none[_ngcontent-%COMP%]{border:none!important}.bg-question[_ngcontent-%COMP%]{margin-top:15px;padding:15px 10px;background:#fff}.question-pending-part[_ngcontent-%COMP%]{width:100%;height:50px}.pencil-edit[_ngcontent-%COMP%]{position:absolute;top:-5px;right:-5px;width:30px;height:30px;border-radius:50%;text-align:center;background:#a9a9a9;z-index:9999}.pencil-edit[_ngcontent-%COMP%]   .lucide[_ngcontent-%COMP%]{color:#fff;stroke-width:2.5px;height:29px}.margin-question-bar[_ngcontent-%COMP%]{margin-top:calc(3rem + 40px)!important}.sheet-screen[_ngcontent-%COMP%]{max-height:calc(100vh - 140px);overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.sheet-screen[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.box-help[_ngcontent-%COMP%]{border-top:1px solid #d7d7d7;padding:10px 30px 0 0}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]{text-align:center;font-size:11px;margin-top:-20px}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#fff;padding:0 10px;color:#d58e0b}.box-help[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]{font-size:13px;overflow-x:auto;overflow-y:hidden}  .layout{display:grid;margin:20px 0;grid-row-gap:20px}  .layout-4{grid-template-columns:1fr 1fr 1fr 1fr}  .layout-2{grid-template-columns:1fr 1fr}  .layout-1{grid-template-columns:1fr}  .question-standalone-content-box{max-width:100%;overflow-x:auto;overflow-y:hidden}  #boxContentQuestion .question-standalone-container{max-width:800px}@keyframes _ngcontent-%COMP%_shimmer{to{transform:translate(100%)}}@media (max-width: 768px){.answer-content-front[_ngcontent-%COMP%]{justify-content:center}.btn-ans-result[_ngcontent-%COMP%]{margin-right:auto!important}}@media (max-width: 800px){  #boxContentQuestion .question-standalone-container{max-width:calc(90vw - 16px)!important}}']}),x})()},71356:(oe,B,n)=>{n.d(B,{N:()=>m});var E=n(54460),e=n(10936),c=n(65162),T=n(44327),j=n(96639),z=n(55887),L=n(88023),N=n(60507),A=n(15343),h=n(5502),r=n(44155),u=n(48891);const t=(_,P)=>({"pt-1 pb-3":_,"pt-3":P}),l=_=>({display:_});function v(_,P){1&_&&(u.j41(0,"div",6),u.EFF(1),u.nI1(2,"mytranslate"),u.k0s()),2&_&&(u.R7$(),u.SpI(" ",u.bMT(2,1,"lang_core_huong_dan_chon_vao_bang_va_vuot_sang_trai_de_xem_cac_thong_tin_khac"),"\n"))}let m=(()=>{var _;class P extends L.H{constructor(){super(...arguments),this.isShowExplain=!1}}return(_=P).\u0275fac=(()=>{let S;return function(U){return(S||(S=u.xGo(_)))(U||_)}})(),_.\u0275cmp=u.VBU({type:_,selectors:[["azt-question-explain-box"]],inputs:{isShowExplain:"isShowExplain",questionObj:"questionObj",renderConfigObj:"renderConfigObj"},standalone:!0,features:[u.Vt3,u.aNF],decls:6,vars:9,consts:[["elementGroup",""],["elementHook",""],["class","mt-1 box p-2",4,"ngIf"],[1,"help-content","box","mt-1","px-3",2,"display","inherit","border-top-right-radius","0","border-top-left-radius","0","box-shadow","none","overflow","auto","padding-bottom","20px",3,"ngClass","ngStyle"],[2,"width","fit-content"],[3,"content"],[1,"mt-1","box","p-2"]],template:function(s,U){if(1&s&&(u.DNE(0,v,3,3,"div",2),u.j41(1,"div",3,0)(3,"div",4,1),u.nrm(5,"azt-dynamic-hook",5),u.k0s()()),2&s){let W;const ee=u.sdS(2),R=u.sdS(4);u.Y8G("ngIf",ee.offsetWidth<R.offsetWidth&&U.isMobileDevice),u.R7$(),u.Y8G("ngClass",u.l_i(4,t,!U.isMobileDevice,U.isMobileDevice))("ngStyle",u.eq3(7,l,U.isShowExplain&&U.questionObj.help?"inherit":"none")),u.R7$(4),u.Y8G("content",null!==(W=U.questionObj.help)&&void 0!==W?W:"")}},dependencies:[N.x,E.MD,E.YU,E.bT,E.B3,e.X1,c.iI,e.YN,j.wp,r.s,A.flO,z.L,h.Id,T.k],styles:['.pr-7[_ngcontent-%COMP%]{padding-right:28px}.w-38px[_ngcontent-%COMP%]{width:38px}.remove-grid[_ngcontent-%COMP%]{display:block!important}.question-standalone-loader-box[_ngcontent-%COMP%]{min-height:50px}  .skeleton-box-loading{width:100%;height:30px;max-width:100%;margin-bottom:5px;display:inline-block}  .skeleton-box-loading:after{position:absolute;top:0;right:0;bottom:0;left:0;transform:translate(-100%);animation:_ngcontent-%COMP%_shimmer 2s infinite;content:""}.question-standalone-box[_ngcontent-%COMP%]{margin-bottom:30px;display:block;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);border-radius:.375rem}.question-standalone-container[_ngcontent-%COMP%]{padding:15px}.question-standalone-for-test-finder[_ngcontent-%COMP%]{border:none;margin-bottom:0;padding:0}.question-standalone-for-test-finder[_ngcontent-%COMP%]   .question-standalone-main-content[_ngcontent-%COMP%]{padding:15px;border:1px solid rgb(228,228,228)}.group-of-question-standalone-for-test-finder[_ngcontent-%COMP%]{padding:15px!important;border:1px solid rgb(228,228,228)!important}.question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid #2262ae!important;outline:3px solid rgba(125,160,201,.65)!important}.group-of-question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid green!important;outline:3px solid rgba(0,193,0,.321)!important}.question-standalone-label[_ngcontent-%COMP%]{font-weight:700}.question-standalone-content-box[_ngcontent-%COMP%]{position:relative}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]{color:#f44336;position:relative;padding-left:20px;display:flex;align-items:center}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]:before{content:"!";position:absolute;left:0;color:#fff;background:#f44336;width:15px;height:15px;text-align:center;border-radius:50%;font-size:smaller;display:flex;justify-content:center;align-items:center}.question-standalone-step-container-box[_ngcontent-%COMP%]{margin-bottom:50px}.group-content-of-question-standalone[_ngcontent-%COMP%]{margin-bottom:10px}.answer[_ngcontent-%COMP%]{display:flex;align-items:center}.answer-label[_ngcontent-%COMP%]{width:20px;height:30px;min-width:20px;min-height:30px;display:flex;align-items:center;justify-content:flex-start;border-radius:50%;border-width:2px;border-style:solid;border-color:transparent}.answer-box[_ngcontent-%COMP%]{border-radius:0 0 3px 3px;padding:8px 20px;justify-content:space-between;align-items:center}.selected-answer[_ngcontent-%COMP%]{background-color:#f39c12;color:#fff}.answer-content-front[_ngcontent-%COMP%]{display:flex!important;flex-wrap:wrap;width:calc(100% - 30px)}.explainTxt[_ngcontent-%COMP%]{width:125px;font-weight:500;display:flex;align-items:center}#examHeader[_ngcontent-%COMP%]{display:block;border:1px solid #e7e7e7;border-radius:3px;overflow:hidden}.arrow_btn[_ngcontent-%COMP%]{font-size:20px;vertical-align:middle;width:20px;height:20px;color:#fff;margin-left:auto!important;margin-right:auto!important;-webkit-user-select:none;user-select:none}.bottom_action[_ngcontent-%COMP%]{position:fixed;padding:15px;bottom:0;left:0;background:#312e2e;color:#fff;width:100%}.bottom_action[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]{display:block}.btn-ans-result[_ngcontent-%COMP%]{color:#fff;background-color:#f39c12}.show-list[_ngcontent-%COMP%]{max-width:200px}.show-list[_ngcontent-%COMP%]   .show-sheet[_ngcontent-%COMP%]   .listli[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:27px;height:27px;border-radius:50%;border:1px solid #347da5;display:flex;align-items:center;color:#fff;justify-content:center;font-size:12px;cursor:pointer;-webkit-user-select:none;user-select:none}.top_action[_ngcontent-%COMP%]{position:fixed;padding:10px;top:0;left:0;background:#312e2e;color:#fff;width:100%}.scrollSheetMobile[_ngcontent-%COMP%]{max-height:200px;overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.scrollSheetMobile[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.notify-badge[_ngcontent-%COMP%]{position:absolute;right:3px;top:3px;text-align:center;color:#afafaf;padding:0;font-size:20px;cursor:pointer}.attach-container[_ngcontent-%COMP%]{background:#fff;padding:10px 0 0;border-radius:5px;width:83.33%;border:1px solid #e8e8e8}.answer-review[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:50%;border:1px solid rgb(52,125,165);display:flex;align-items:center;color:#fff;justify-content:center;font-size:15px;-webkit-user-select:none;user-select:none}.border-none[_ngcontent-%COMP%]{border:none!important}.bg-question[_ngcontent-%COMP%]{margin-top:15px;padding:15px 10px;background:#fff}.question-pending-part[_ngcontent-%COMP%]{width:100%;height:50px}.pencil-edit[_ngcontent-%COMP%]{position:absolute;top:-5px;right:-5px;width:30px;height:30px;border-radius:50%;text-align:center;background:#a9a9a9;z-index:9999}.pencil-edit[_ngcontent-%COMP%]   .lucide[_ngcontent-%COMP%]{color:#fff;stroke-width:2.5px;height:29px}.margin-question-bar[_ngcontent-%COMP%]{margin-top:calc(3rem + 40px)!important}.sheet-screen[_ngcontent-%COMP%]{max-height:calc(100vh - 140px);overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.sheet-screen[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.box-help[_ngcontent-%COMP%]{border-top:1px solid #d7d7d7;padding:10px 30px 0 0}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]{text-align:center;font-size:11px;margin-top:-20px}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#fff;padding:0 10px;color:#d58e0b}.box-help[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]{font-size:13px;overflow-x:auto;overflow-y:hidden}  .layout{display:grid;margin:20px 0;grid-row-gap:20px}  .layout-4{grid-template-columns:1fr 1fr 1fr 1fr}  .layout-2{grid-template-columns:1fr 1fr}  .layout-1{grid-template-columns:1fr}  .question-standalone-content-box{max-width:100%;overflow-x:auto;overflow-y:hidden}  #boxContentQuestion .question-standalone-container{max-width:800px}@keyframes _ngcontent-%COMP%_shimmer{to{transform:translate(100%)}}@media (max-width: 768px){.answer-content-front[_ngcontent-%COMP%]{justify-content:center}.btn-ans-result[_ngcontent-%COMP%]{margin-right:auto!important}}@media (max-width: 800px){  #boxContentQuestion .question-standalone-container{max-width:calc(90vw - 16px)!important}}']}),P})()},2287:(oe,B,n)=>{n.d(B,{S:()=>t});var E=n(54460),e=n(10936),c=n(65162),T=n(44327),j=n(96639),z=n(55887),L=n(88023),N=n(15343),A=n(5502),h=n(44155),r=n(48891);function u(l,v){1&l&&(r.j41(0,"span"),r.EFF(1),r.nI1(2,"mytranslate"),r.k0s()),2&l&&(r.R7$(),r.SpI("(",r.bMT(2,1,"lang_auto_hoi_de_thi_offline"),")"))}let t=(()=>{var l;class v extends L.H{constructor(){super(...arguments),this.curQuestionIndex=0}get customQuestionLabel(){const _=this.commonService.castJsonToObj(this.examObj.expandInfo??"")??void 0;return _?.label?_.label:"C\xe2u"}ngOnInit(){this.startQuestionIndex=this.examObj.startQuestionIndex??1}}return(l=v).\u0275fac=(()=>{let m;return function(P){return(m||(m=r.xGo(l)))(P||l)}})(),l.\u0275cmp=r.VBU({type:l,selectors:[["azt-question-label-box"]],inputs:{examObj:"examObj",questionObj:"questionObj",renderConfigObj:"renderConfigObj",curQuestionIndex:"curQuestionIndex"},standalone:!0,features:[r.Vt3,r.aNF],decls:4,vars:4,consts:[[1,"question-standalone-label"],[4,"ngIf"]],template:function(_,P){if(1&_&&(r.j41(0,"div",0),r.EFF(1),r.DNE(2,u,3,3,"span",1),r.nI1(3,"isOfflineExam"),r.k0s()),2&_){let S;r.R7$(),r.SpI(" ",P.customQuestionLabel+" "+(null!==(S=P.questionObj.originalLabel)&&void 0!==S?S:(void 0!==P.questionObj.labelIndex?P.questionObj.labelIndex:P.curQuestionIndex)+P.startQuestionIndex)," "),r.R7$(),r.Y8G("ngIf",r.bMT(3,2,P.examObj))}},dependencies:[E.MD,E.bT,e.X1,c.iI,e.YN,j.wp,h.s,N.flO,z.L,j.st,A.Id,T.k],styles:['.pr-7[_ngcontent-%COMP%]{padding-right:28px}.w-38px[_ngcontent-%COMP%]{width:38px}.remove-grid[_ngcontent-%COMP%]{display:block!important}.question-standalone-loader-box[_ngcontent-%COMP%]{min-height:50px}  .skeleton-box-loading{width:100%;height:30px;max-width:100%;margin-bottom:5px;display:inline-block}  .skeleton-box-loading:after{position:absolute;top:0;right:0;bottom:0;left:0;transform:translate(-100%);animation:_ngcontent-%COMP%_shimmer 2s infinite;content:""}.question-standalone-box[_ngcontent-%COMP%]{margin-bottom:30px;display:block;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);border-radius:.375rem}.question-standalone-container[_ngcontent-%COMP%]{padding:15px}.question-standalone-for-test-finder[_ngcontent-%COMP%]{border:none;margin-bottom:0;padding:0}.question-standalone-for-test-finder[_ngcontent-%COMP%]   .question-standalone-main-content[_ngcontent-%COMP%]{padding:15px;border:1px solid rgb(228,228,228)}.group-of-question-standalone-for-test-finder[_ngcontent-%COMP%]{padding:15px!important;border:1px solid rgb(228,228,228)!important}.question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid #2262ae!important;outline:3px solid rgba(125,160,201,.65)!important}.group-of-question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid green!important;outline:3px solid rgba(0,193,0,.321)!important}.question-standalone-label[_ngcontent-%COMP%]{font-weight:700}.question-standalone-content-box[_ngcontent-%COMP%]{position:relative}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]{color:#f44336;position:relative;padding-left:20px;display:flex;align-items:center}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]:before{content:"!";position:absolute;left:0;color:#fff;background:#f44336;width:15px;height:15px;text-align:center;border-radius:50%;font-size:smaller;display:flex;justify-content:center;align-items:center}.question-standalone-step-container-box[_ngcontent-%COMP%]{margin-bottom:50px}.group-content-of-question-standalone[_ngcontent-%COMP%]{margin-bottom:10px}.answer[_ngcontent-%COMP%]{display:flex;align-items:center}.answer-label[_ngcontent-%COMP%]{width:20px;height:30px;min-width:20px;min-height:30px;display:flex;align-items:center;justify-content:flex-start;border-radius:50%;border-width:2px;border-style:solid;border-color:transparent}.answer-box[_ngcontent-%COMP%]{border-radius:0 0 3px 3px;padding:8px 20px;justify-content:space-between;align-items:center}.selected-answer[_ngcontent-%COMP%]{background-color:#f39c12;color:#fff}.answer-content-front[_ngcontent-%COMP%]{display:flex!important;flex-wrap:wrap;width:calc(100% - 30px)}.explainTxt[_ngcontent-%COMP%]{width:125px;font-weight:500;display:flex;align-items:center}#examHeader[_ngcontent-%COMP%]{display:block;border:1px solid #e7e7e7;border-radius:3px;overflow:hidden}.arrow_btn[_ngcontent-%COMP%]{font-size:20px;vertical-align:middle;width:20px;height:20px;color:#fff;margin-left:auto!important;margin-right:auto!important;-webkit-user-select:none;user-select:none}.bottom_action[_ngcontent-%COMP%]{position:fixed;padding:15px;bottom:0;left:0;background:#312e2e;color:#fff;width:100%}.bottom_action[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]{display:block}.btn-ans-result[_ngcontent-%COMP%]{color:#fff;background-color:#f39c12}.show-list[_ngcontent-%COMP%]{max-width:200px}.show-list[_ngcontent-%COMP%]   .show-sheet[_ngcontent-%COMP%]   .listli[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:27px;height:27px;border-radius:50%;border:1px solid #347da5;display:flex;align-items:center;color:#fff;justify-content:center;font-size:12px;cursor:pointer;-webkit-user-select:none;user-select:none}.top_action[_ngcontent-%COMP%]{position:fixed;padding:10px;top:0;left:0;background:#312e2e;color:#fff;width:100%}.scrollSheetMobile[_ngcontent-%COMP%]{max-height:200px;overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.scrollSheetMobile[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.notify-badge[_ngcontent-%COMP%]{position:absolute;right:3px;top:3px;text-align:center;color:#afafaf;padding:0;font-size:20px;cursor:pointer}.attach-container[_ngcontent-%COMP%]{background:#fff;padding:10px 0 0;border-radius:5px;width:83.33%;border:1px solid #e8e8e8}.answer-review[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:50%;border:1px solid rgb(52,125,165);display:flex;align-items:center;color:#fff;justify-content:center;font-size:15px;-webkit-user-select:none;user-select:none}.border-none[_ngcontent-%COMP%]{border:none!important}.bg-question[_ngcontent-%COMP%]{margin-top:15px;padding:15px 10px;background:#fff}.question-pending-part[_ngcontent-%COMP%]{width:100%;height:50px}.pencil-edit[_ngcontent-%COMP%]{position:absolute;top:-5px;right:-5px;width:30px;height:30px;border-radius:50%;text-align:center;background:#a9a9a9;z-index:9999}.pencil-edit[_ngcontent-%COMP%]   .lucide[_ngcontent-%COMP%]{color:#fff;stroke-width:2.5px;height:29px}.margin-question-bar[_ngcontent-%COMP%]{margin-top:calc(3rem + 40px)!important}.sheet-screen[_ngcontent-%COMP%]{max-height:calc(100vh - 140px);overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.sheet-screen[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.box-help[_ngcontent-%COMP%]{border-top:1px solid #d7d7d7;padding:10px 30px 0 0}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]{text-align:center;font-size:11px;margin-top:-20px}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#fff;padding:0 10px;color:#d58e0b}.box-help[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]{font-size:13px;overflow-x:auto;overflow-y:hidden}  .layout{display:grid;margin:20px 0;grid-row-gap:20px}  .layout-4{grid-template-columns:1fr 1fr 1fr 1fr}  .layout-2{grid-template-columns:1fr 1fr}  .layout-1{grid-template-columns:1fr}  .question-standalone-content-box{max-width:100%;overflow-x:auto;overflow-y:hidden}  #boxContentQuestion .question-standalone-container{max-width:800px}@keyframes _ngcontent-%COMP%_shimmer{to{transform:translate(100%)}}@media (max-width: 768px){.answer-content-front[_ngcontent-%COMP%]{justify-content:center}.btn-ans-result[_ngcontent-%COMP%]{margin-right:auto!important}}@media (max-width: 800px){  #boxContentQuestion .question-standalone-container{max-width:calc(90vw - 16px)!important}}']}),v})()},92851:(oe,B,n)=>{n.d(B,{f:()=>Ae});var E=n(54460),e=n(48891),c=n(10936),T=n(65162),j=n(44327),z=n(7858),L=n(96639),N=n(55887),A=n(88023),h=n(86477),r=n(7543),u=n(51244),t=n(81229),l=n(75498),v=n(17695),m=n(15343),_=n(5502),P=n(51698),S=n(38136),s=n(44155),U=n(1349),W=n(50282),ee=n(30683),R=n(89364),M=n(44233),f=n(13362),k=n(39471);const I=b=>({"font-medium":b});function d(b,G){1&b&&(e.j41(0,"div",38)(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()),2&b&&(e.R7$(2),e.JRh(e.bMT(3,1,"lang_auto_vui_long_nhap_ho_va_ten")))}function D(b,G){1&b&&(e.j41(0,"div",38)(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()),2&b&&(e.R7$(2),e.JRh(e.bMT(3,1,"lang_auto_vui_long_nhap_so_dien_thoai")))}function a(b,G){1&b&&(e.j41(0,"div",38)(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()),2&b&&(e.R7$(2),e.JRh(e.bMT(3,1,"lang_student_utils_reques_phone_ten_number")))}function x(b,G){1&b&&(e.j41(0,"div",38)(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()),2&b&&(e.R7$(2),e.JRh(e.bMT(3,1,"lang_document_please_enter_the_author_workplace")))}function g(b,G){if(1&b&&(e.j41(0,"div",14)(1,"div",30)(2,"div",31),e.nrm(3,"input",32),e.nI1(4,"mytranslate"),e.DNE(5,d,4,3,"div",33),e.k0s(),e.j41(6,"div",34),e.nrm(7,"input",35),e.nI1(8,"mytranslate"),e.DNE(9,D,4,3,"div",33)(10,a,4,3,"div",33),e.k0s(),e.j41(11,"div",36),e.nrm(12,"input",37),e.nI1(13,"mytranslate"),e.DNE(14,x,4,3,"div",33),e.k0s()()()),2&b){const O=e.XpG();e.R7$(3),e.FS9("placeholder",e.bMT(4,7,"lang_auto_nhap_ho_va_ten")),e.R7$(2),e.Y8G("ngIf","0"==O.form.controls.creatorId.value&&!O.form.controls.creatorFullName.value),e.R7$(2),e.FS9("placeholder",e.bMT(8,9,"lang_auto_nhap_so_dien_thoai")),e.R7$(2),e.Y8G("ngIf","0"==O.form.controls.creatorId.value&&!O.form.controls.creatorPhone.value),e.R7$(),e.Y8G("ngIf","0"==O.form.controls.creatorId.value&&O.form.controls.creatorPhone.value&&10!==O.form.controls.creatorPhone.value.length),e.R7$(2),e.FS9("placeholder",e.bMT(13,11,"lang_document_workplace")),e.R7$(2),e.Y8G("ngIf","0"==O.form.controls.creatorId.value&&!O.form.controls.creatorWorkingAddress.value)}}function V(b,G){if(1&b){const O=e.RV6();e.j41(0,"mat-tree-node",43),e.nrm(1,"button",44),e.j41(2,"div",45)(3,"input",46),e.bIt("change",function(){const i=e.eBV(O).$implicit,p=e.XpG(2);return e.Njj(p.checklistSelection.toggle(i))}),e.k0s(),e.j41(4,"label",47)(5,"span"),e.EFF(6),e.k0s()()()()}if(2&b){const O=G.$implicit,o=e.XpG(2);e.R7$(3),e.FS9("id","knowledge-"+O.id),e.Y8G("checked",o.checklistSelection.isSelected(O)),e.R7$(),e.FS9("for","knowledge-"+O.id),e.R7$(2),e.JRh(O.item)}}function $(b,G){if(1&b){const O=e.RV6();e.j41(0,"mat-tree-node",48)(1,"button",49)(2,"span",50),e.nrm(3,"lucide-icon",51),e.k0s()(),e.j41(4,"div",45)(5,"input",52),e.bIt("change",function(){const i=e.eBV(O).$implicit,p=e.XpG(2);return e.Njj(p.todoItemSelectionToggle(i))}),e.k0s(),e.j41(6,"label",47)(7,"span"),e.EFF(8),e.k0s()()()()}if(2&b){const O=G.$implicit,o=e.XpG(2);e.R7$(),e.BMQ("aria-label","toggle "+O.filename),e.R7$(2),e.FS9("name",o.treeControl.isExpanded(O)?"chevron-down":"chevron-right"),e.R7$(2),e.FS9("id","knowledge-"+O.id),e.Y8G("checked",o.descendantsAllSelected(O))("indeterminate",o.descendantsPartiallySelected(O)),e.R7$(),e.FS9("for","knowledge-"+O.id),e.R7$(2),e.JRh(O.item)}}function Z(b,G){if(1&b&&(e.j41(0,"div",14)(1,"div",3)(2,"div",31)(3,"span",17),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()(),e.j41(6,"div",39)(7,"mat-tree",40),e.DNE(8,V,7,4,"mat-tree-node",41)(9,$,9,7,"mat-tree-node",42),e.k0s()()()()),2&b){const O=e.XpG();e.R7$(4),e.SpI(" ",e.bMT(5,4,"lang_document_the_knowledge_units_present_in_the_exam")," "),e.R7$(3),e.Y8G("dataSource",O.dataSource)("treeControl",O.treeControl),e.R7$(2),e.Y8G("matTreeNodeDefWhen",O.hasChild)}}function te(b,G){1&b&&(e.j41(0,"span",58),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&b&&(e.R7$(),e.SpI("(",e.bMT(2,1,"lang_document_current"),")"))}function se(b,G){if(1&b&&(e.j41(0,"div",53)(1,"div",54),e.nrm(2,"input",55),e.j41(3,"label",56)(4,"span"),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s(),e.DNE(7,te,3,3,"span",57),e.k0s()()()),2&b){const O=G.index,o=e.XpG();e.R7$(2),e.FS9("id","week-"+o.listWeek[O]),e.Y8G("formControlName",O),e.R7$(),e.FS9("for","week-"+o.listWeek[O]),e.Y8G("ngClass",e.eq3(8,I,o.currentSchoolWeeks===o.listWeek[O])),e.R7$(2),e.JRh(e.bMT(6,6,"lang_document_week")+" "+o.listWeek[O]),e.R7$(2),e.Y8G("ngIf",o.currentSchoolWeeks===o.listWeek[O])}}function ae(b,G){1&b&&(e.j41(0,"div",59)(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()),2&b&&(e.R7$(2),e.JRh(e.bMT(3,1,"lang_document_please_select_the_time_of_use")))}class ie{}class Y{}let H=(()=>{var b;class G extends A.H{buildFileTree(o,i){const p=[];return o.forEach(C=>{const w=new ie;w.item=C.name,w.id=C.id,C.children&&(w.children=this.buildFileTree(C.children,i+1)),p.push(w)}),p}descendantsAllSelected(o){return this.treeControl.getDescendants(o).every(p=>this.checklistSelection.isSelected(p))}descendantsPartiallySelected(o){return this.treeControl.getDescendants(o).some(C=>this.checklistSelection.isSelected(C))&&!this.descendantsAllSelected(o)}todoItemSelectionToggle(o){this.checklistSelection.toggle(o);const i=this.treeControl.getDescendants(o);this.checklistSelection.isSelected(o)?this.checklistSelection.select(...i):this.checklistSelection.deselect(...i)}toggleAllCheckBox(){this.isCheckSemesterOne.setValue(this.isCheckAllWeeks.value),this.isCheckSemesterTwo.setValue(this.isCheckAllWeeks.value);const o=this.isCheckAllWeeks.value;this.formArrayListWeek.controls.map(i=>i.setValue(o))}toggleSemesterOneCheckBox(){const o=this.isCheckSemesterOne.value;this.formArrayListWeek.controls.map((i,p)=>(p<18&&i.setValue(o),i)),this.calculateIsCheckAll()}toggleSemesterTwoCheckBox(){const o=this.isCheckSemesterTwo.value;this.formArrayListWeek.controls.map((i,p)=>(p>=18&&i.setValue(o),i)),this.calculateIsCheckAll()}initForm(){this.formArrayListWeek=this.form.controls.weeks,this.formArrayListKnowledge=this.form.controls.knowledgeIds}initKnowledgeCheckbox(o){this.formArrayListKnowledge.clear();for(let i=0;i<o.length;i++){const C=new c.MJ(!1,{nonNullable:!0});this.formArrayListKnowledge.push(C)}}initWeedCheckbox(o){this.formArrayListWeek.clear();for(let i=0;i<o.length;i++){const C=new c.MJ(!1,{nonNullable:!0});this.formArrayListWeek.push(C)}}calculateIsCheckAll(){const o=this.formArrayListWeek.controls.every(i=>i.value);this.isCheckAllWeeks.setValue(o)}ngOnChanges(){this.initForm(),this.initKnowledgeCheckbox(this.listKnowledge),this.dataSource.data=this.buildFileTree(this.listKnowledge,0)}ngOnInit(){super.ngOnInit(),this.initWeedCheckbox(this.listWeek),this.currentSchoolWeeks=this.timeService.getSchoolWeeks(),this.checklistSelection.changed.subscribe(o=>{let i=this.checklistSelection.selected.map(p=>p.id??0);this.listKnowledgeId=i.sort((p,C)=>p-C)??[],this.emitChooseKnowledge.emit(this.listKnowledgeId)}),this.form.controls.weeks.valueChanges.subscribe(o=>{this.calculateIsCheckAll(),this.checkChooseWeeks=o.some(i=>i)})}constructor(o){super(),this.timeService=o,this.listKnowledge=[],this.listWeek=[],this.emitChooseKnowledge=new e.bkB,this.formArrayListKnowledge=new c.Yp([]),this.formArrayListWeek=new c.Yp([]),this.flatNodeMap=new Map,this.nestedNodeMap=new Map,this.selectedParent=null,this.newItemName="",this.checklistSelection=new U.CB(!0),this.listKnowledgeId=[],this.currentSchoolWeeks=0,this.checkChooseWeeks=!1,this.isCheckAllWeeks=new c.MJ(!1,{nonNullable:!0}),this.isCheckSemesterOne=new c.MJ(!1,{nonNullable:!0}),this.isCheckSemesterTwo=new c.MJ(!1,{nonNullable:!0}),this.getLevel=i=>i.level??0,this.isExpandable=i=>i.expandable??!1,this.getChildren=i=>i.children??[],this.hasChild=(i,p)=>p.expandable??!1,this.hasNoContent=(i,p)=>""===p.item,this.transformer=(i,p)=>{const C=this.nestedNodeMap.get(i),w=C&&C.item===i.item?C:new Y;return w.item=i.item,w.level=p,w.id=i.id,w.expandable=!!i.children,this.flatNodeMap.set(w,i),this.nestedNodeMap.set(i,w),w},this.treeFlattener=new ee.yj(this.transformer,this.getLevel,this.isExpandable,this.getChildren),this.treeControl=new W.XW(this.getLevel,this.isExpandable),this.dataSource=new ee.zw(this.treeControl,this.treeFlattener)}}return(b=G).\u0275fac=function(o){return new(o||b)(e.rXU(f.F))},b.\u0275cmp=e.VBU({type:b,selectors:[["azt-config-document-market"]],inputs:{form:"form",listKnowledge:"listKnowledge",listWeek:"listWeek"},outputs:{emitChooseKnowledge:"emitChooseKnowledge"},standalone:!0,features:[e.Vt3,e.OA$,e.aNF],decls:48,vars:29,consts:[[1,"mt-5"],[3,"formGroup"],[1,"box","p-3"],[1,"grid","grid-cols-12"],[1,"col-span-12","lg:col-span-5"],["for","general-name",1,"form-label","mb-0","font-medium","flex","items-center"],[1,"col-span-12","lg:col-span-7"],[1,"flex","flex-col","sm:flex-row"],[1,"form-check","mr-8"],["type","radio","id","creator-by-me","formControlName","creatorId","value","1",1,"form-check-input"],["for","creator-by-me",1,"form-check-label"],["type","radio","id","creator-by-user-other","formControlName","creatorId","value","0",1,"form-check-input"],["for","creator-by-user-other",1,"form-check-label"],["class","mt-3",4,"ngIf"],[1,"mt-3"],["formArrayName","weeks",1,"list-week","grid","grid-cols-12"],[1,"col-span-12","flex","items-center"],[1,"form-label","mb-0","font-medium","flex","items-center"],[1,"list-week","col-span-12","mt-1"],[1,"flex","flex-row","sm:flex-col","sm:items-center"],[1,"azt-form-check","mr-5","mt-3","sm:mt-0"],["type","checkbox","id","selectSemesterOne",1,"form-check-input",3,"change","formControl"],["for","selectSemesterOne",1,"form-check-label"],["type","checkbox","id","selectSemesterTwo",1,"form-check-input",3,"change","formControl"],["for","selectSemesterTwo",1,"form-check-label"],["type","checkbox","id","selectAllWeeks",1,"form-check-input",3,"change","formControl"],["for","selectAllWeeks",1,"form-check-label"],[1,"grid","grid-cols-12","gap-3","mt-3"],["class","col-span-6 md:col-span-3 lg:col-span-2",4,"ngFor","ngForOf"],["class","col-span-12 mt-2 text-danger text-xs",4,"ngIf"],[1,"grid","grid-cols-12","gap-3"],[1,"col-span-12"],["type","text","name","creatorFullName","formControlName","creatorFullName",1,"form-control",3,"placeholder"],["class","text-danger text-xs mt-2",4,"ngIf"],[1,"col-span-12","md:col-span-4"],["type","text","appOnlyNumber","","name","creatorPhone","formControlName","creatorPhone",1,"form-control",3,"placeholder"],[1,"col-span-12","md:col-span-8"],["type","text","name","creatorWorkingAddress","formControlName","creatorWorkingAddress",1,"form-control",3,"placeholder"],[1,"text-danger","text-xs","mt-2"],[1,"list-knowledge","col-span-12"],[3,"dataSource","treeControl"],["matTreeNodeToggle","","matTreeNodePadding","",4,"matTreeNodeDef"],["matTreeNodePadding","",4,"matTreeNodeDef","matTreeNodeDefWhen"],["matTreeNodeToggle","","matTreeNodePadding",""],["mat-icon-button","","disabled",""],[1,"azt-form-checked"],["type","checkbox",1,"form-check-input",3,"change","checked","id"],[1,"form-check-label",2,"vertical-align","middle",3,"for"],["matTreeNodePadding",""],["mat-icon-button","","matTreeNodeToggle",""],[1,"mat-icon-rtl-mirror","w-5","h-5","inline-block",2,"vertical-align","bottom"],["size","20",3,"name"],["type","checkbox",1,"form-check-input",3,"change","checked","indeterminate","id"],[1,"col-span-6","md:col-span-3","lg:col-span-2"],[1,"azt-form-check"],["type","checkbox","value","41556",1,"form-check-input",3,"formControlName","id"],[1,"form-check-label",2,"vertical-align","middle",3,"ngClass","for"],["class","inline-block ml-1",4,"ngIf"],[1,"inline-block","ml-1"],[1,"col-span-12","mt-2","text-danger","text-xs"]],template:function(o,i){1&o&&(e.j41(0,"div",0)(1,"form",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"label",5),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()(),e.j41(8,"div",6)(9,"div",7)(10,"div",8),e.nrm(11,"input",9),e.j41(12,"label",10),e.EFF(13),e.nI1(14,"mytranslate"),e.k0s()(),e.j41(15,"div",8),e.nrm(16,"input",11),e.j41(17,"label",12),e.EFF(18),e.nI1(19,"mytranslate"),e.k0s()()()()(),e.DNE(20,g,15,13,"div",13)(21,Z,10,6,"div",13),e.j41(22,"div",14)(23,"div",15)(24,"div",16)(25,"span",17),e.EFF(26),e.nI1(27,"mytranslate"),e.k0s()(),e.j41(28,"div",18)(29,"div",19)(30,"div",20)(31,"input",21),e.bIt("change",function(){return i.toggleSemesterOneCheckBox()}),e.k0s(),e.j41(32,"label",22),e.EFF(33),e.nI1(34,"mytranslate"),e.k0s()(),e.j41(35,"div",20)(36,"input",23),e.bIt("change",function(){return i.toggleSemesterTwoCheckBox()}),e.k0s(),e.j41(37,"label",24),e.EFF(38),e.nI1(39,"mytranslate"),e.k0s()(),e.j41(40,"div",20)(41,"input",25),e.bIt("change",function(){return i.toggleAllCheckBox()}),e.k0s(),e.j41(42,"label",26),e.EFF(43),e.nI1(44,"mytranslate"),e.k0s()()(),e.j41(45,"div",27),e.DNE(46,se,8,10,"div",28),e.k0s()(),e.DNE(47,ae,4,3,"div",29),e.k0s()()()()()),2&o&&(e.R7$(),e.Y8G("formGroup",i.form),e.R7$(5),e.SpI(" ",e.bMT(7,15,"lang_document_author")," "),e.R7$(7),e.SpI(" ",e.bMT(14,17,"lang_document_me")," "),e.R7$(5),e.SpI(" ",e.bMT(19,19,"lang_document_others")," "),e.R7$(2),e.Y8G("ngIf","0"==i.form.controls.creatorId.value),e.R7$(),e.Y8G("ngIf",i.formArrayListKnowledge.controls.length),e.R7$(5),e.SpI(" ",e.bMT(27,21,"lang_document_time_of_use")," "),e.R7$(5),e.Y8G("formControl",i.isCheckSemesterOne),e.R7$(2),e.SpI(" ",e.bMT(34,23,"lang_config_semester")+" 1"," "),e.R7$(3),e.Y8G("formControl",i.isCheckSemesterTwo),e.R7$(2),e.SpI(" ",e.bMT(39,25,"lang_config_semester")+" 2"," "),e.R7$(3),e.Y8G("formControl",i.isCheckAllWeeks),e.R7$(2),e.SpI(" ",e.bMT(44,27,i.isCheckAllWeeks.value?"lang_student_classroom_list_utils_create_class_new_course_disable":"lang_student_classroom_list_utils_create_class_new_course_choose_all")," "),e.R7$(3),e.Y8G("ngForOf",i.formArrayListWeek.controls),e.R7$(),e.Y8G("ngIf",!i.checkChooseWeeks))},dependencies:[M.An,E.MD,E.YU,E.Sq,E.bT,c.X1,c.qT,c.me,c.Zm,c.Fm,c.BC,c.cb,c.l_,c.j4,c.JD,c.v8,T.iI,c.YN,L.wp,s.s,k.iY,ee.yI,ee.yF,ee.pO,ee.lQ,ee.d6,m.flO,m.WGl,N.L,_.Id,R.Z],encapsulation:2}),G})();var J=n(78472),ce=n(83016),_e=n(27691),ge=n(27525),fe=n(56201),xe=n(21164),ve=n(9146);let be=(()=>{var b;class G{constructor(o,i){this.commonService=o,this.apiUploadService=i,this.sizeDefaultCanvas=1100,this.actionRunAfterConvert=[],this.imageMaps=[],this.pattern_base64=/data:image[^"'\\]+/i,this.pattern_image=/<img[^>]+data:image[^>]+>/g,this.taskConvertBase64ToCanvas=new ge.n(50,{function:(p,C)=>{this.callbackBase64ToCanvas&&this.callbackBase64ToCanvas(p,C)}}),this.taskUploadImage=new ge.n(10,{function:(p,C)=>{this.callbackUploadImage&&this.callbackUploadImage(p,C)}})}convertQuestions(o,i,p){return new Promise(C=>{this.reset(),o.forEach(w=>{const F=this.commonService.willDeleteParseJson(w.answerConfig||"[]");w.questionContent?.includes("<img ")&&this.replaceImageCdnInContent(w,"questionContent"),w.questionText?.includes("<img ")&&this.replaceImageCdnInContent(w,"questionText"),w.answerMedia?.includes("<img ")&&this.replaceImageCdnInContent(w,"answerMedia"),w.mediaMeta?.includes("<img ")&&this.replaceImageCdnInContent(w,"mediaMeta"),F.forEach(K=>{K.content.includes("<img ")&&this.replaceImageCdnInContent(K,"content")}),this.actionRunAfterConvert.push(()=>{w.answerConfig=JSON.stringify(F)})}),this.imageMaps.forEach(w=>{this.taskConvertBase64ToCanvas.addTask(this,this.startConvertCanvas,[w])}),this.taskConvertBase64ToCanvas.start().then(w=>{if(w.errs.length>0)p(w.errs,void 0);else{let K=0;const y=[],de=()=>{const q=document.createElement("canvas");q.width=this.sizeDefaultCanvas,q.height=this.sizeDefaultCanvas;const me=q.getContext("2d");me&&(me.fillStyle="white",me.fillRect(0,0,this.sizeDefaultCanvas,this.sizeDefaultCanvas)),y.push({cdn:"",cX:0,cY:0,canvas:q,imgs:[]})};de(),w.datas.forEach((q,me)=>{var Q=y[y.length-1];Q.cX+q.canvas.width+4>this.sizeDefaultCanvas?(Q.cX=4,Q.cY+=K+4,K=0):Q.cX+=4,Q.cY+q.canvas.height>this.sizeDefaultCanvas&&(de(),Q=y[y.length-1]);var le=Q.canvas.getContext("2d");Q.imgs.push({x:Q.cX,y:Q.cY,width:q.canvas.width,height:q.canvas.height,index:me}),le?.drawImage(q.canvas,0,0,q.canvas.width,q.canvas.height,Q.cX,Q.cY,q.canvas.width,q.canvas.height),Q.cX+=q.canvas.width,K=K<q.canvas.height?q.canvas.height:K}),y[0].imgs.length>0&&y.forEach(q=>{this.taskUploadImage.addTask(this,this.startUploadFile,[q])}),this.taskUploadImage.start().then(q=>{if(q.errs.length>0)p(w.errs,void 0);else{let me=!0;q.datas.forEach(Q=>{Q.imgs.forEach(le=>{const ne=w.datas[le.index];if(ne){const pe={link:Q.cdn,data:{x:le.x,y:le.y,width:le.width,height:le.height}};ne.objs.forEach(re=>{if(re[ne.path])if(this.commonService.isJson(re[ne.path])){const ue=this.commonService.willDeleteParseJson(re[ne.path]);Object.prototype.hasOwnProperty.call(ue,"renderedStr")?(ue.renderedStr=ue.renderedStr.replace(ne.base,`@[]${JSON.stringify(pe)}@[]`),re[ne.path]=JSON.stringify(ue)):re[ne.path]=re[ne.path].replace(ne.base,`@[]${JSON.stringify(pe)}@[]`)}else re[ne.path]=re[ne.path].replace(ne.base,`@[]${JSON.stringify(pe)}@[]`);else me=!1})}})}),me?(this.actionRunAfterConvert.forEach(Q=>{Q()}),o.forEach((Q,le)=>{let ne=this.commonService.willDeleteParseJson(Q.mediaMeta||"{}"),pe=i[le];const re={id:0,name:Q.name,extension:"text",content:Q.questionContent,groupContent:ne.renderedStr,metaData:{isFixAns:Number(Q.isFixAns),forcedFixAns:!1,groupType:Q.groupType?Number(Q.groupType):void 0}};pe&&(re.vMetaEditor=pe.meta),Q.questionContent=JSON.stringify([re])}),C()):p(w.errs,void 0,!0)}})}})})}reset(){this.imageMaps=[],this.actionRunAfterConvert=[]}replaceImageCdnInContent(o,i){var p=o[i];if(this.commonService.isJson(o[i])){const F=this.commonService.willDeleteParseJson(o[i]);Object.prototype.hasOwnProperty.call(F,"renderedStr")&&(p=F.renderedStr)}let C=p.matchAll(this.pattern_image);for(;;){let F=C.next();if(F.done)break;let K=F.value[0];var w=this.imageMaps.findIndex(y=>y.base===K&&y.path===i);-1===w?this.imageMaps.push({base:K,cdn:"",data:null,objs:[o],path:i,canvas:document.createElement("canvas")}):this.imageMaps[w].objs.push(o)}}startConvertCanvas(o){return new Promise((i,p)=>{const C=new Image;C.crossOrigin="anonymous",C.onload=()=>{let F=1;if(C.width>this.sizeDefaultCanvas&&(F=this.sizeDefaultCanvas/C.width),C.height>this.sizeDefaultCanvas){let y=this.sizeDefaultCanvas/C.height;y<F&&(F=y)}o.canvas.width=C.width*F,o.canvas.height=C.height*F,o.canvas.getContext("2d")?.drawImage(C,0,0,C.width,C.height,0,0,o.canvas.width,o.canvas.height),i(o)},C.onerror=()=>{o.canvas.width=1,o.canvas.height=1;const F=o.canvas.getContext("2d");F&&(F.fillStyle="white",F.fillRect(0,0,1,1)),i(o)};let w=this.pattern_base64.exec(o.base);null!=w?C.src=w[0]:p(new Error("l\u1ed7i regex"))})}startUploadFile(o){return new Promise((i,p)=>{const C=this.dataURLtoFile(o.canvas.toDataURL("image/png",1));(0,fe.w4)(C).then(w=>{this.apiUploadService.uploadToCdnProgressForExamQuestionContent(w).subscribe(F=>{F.type!=_e.hv.UploadProgress&&(1==F.success&&F.data?i({...o,cdn:F.data.url||""}):p(new Error(this.commonService.translateToKeyParam("lang_auto_khong_upload_duoc_anh_vui_long_thu_lai_sau_loi",F.message??"none"))))})})})}dataURLtoFile(o){let i=this.getFileName(o);for(var p=o.split(","),C=p[0].match(/:(.*?);/),w=atob(p[1]),F=w.length,K=new Uint8Array(F);F--;)K[F]=w.charCodeAt(F);return new File([K],i,{type:C&&C.length>0?C[1]:"png"})}getFileName(o){var i=o.split("").reverse().join(""),p=i.indexOf(";"),C=i.indexOf("/",p);return i.substring(p,C).split("").reverse().join("")}}return(b=G).\u0275fac=function(o){return new(o||b)(e.KVO(xe.R),e.KVO(ve.T))},b.\u0275prov=e.jDH({token:b,factory:b.\u0275fac,providedIn:"root"}),G})();var Ce=n(60995),Oe=n(36247),we=n(50830),Me=n(92540),Ee=n(83426);function Pe(b,G){if(1&b&&e.nrm(0,"azt-loading-effect",3),2&b){const O=e.XpG();e.Y8G("currentStatusObj",O.statusObj)}}function ye(b,G){1&b&&(e.j41(0,"div",29),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&b&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_auto_vui_long_nhap_ten\u01a1_de_thi")," "))}function Ie(b,G){1&b&&(e.j41(0,"span",30),e.nrm(1,"azt-loading-ui"),e.k0s())}function Se(b,G){if(1&b){const O=e.RV6();e.j41(0,"div",4)(1,"form",5)(2,"div",6)(3,"div",7)(4,"div",8)(5,"div",9)(6,"div",10)(7,"label",11),e.EFF(8),e.nI1(9,"mytranslate"),e.k0s()(),e.j41(10,"div",10)(11,"div",12),e.nrm(12,"input",13),e.nI1(13,"mytranslate"),e.k0s(),e.DNE(14,ye,3,3,"div",14),e.k0s()(),e.j41(15,"div",15),e.nrm(16,"config-level-subject-book",16),e.k0s(),e.j41(17,"div",17),e.nrm(18,"config-purpose-exam",18),e.k0s(),e.j41(19,"div",19)(20,"div",10)(21,"label",20),e.EFF(22),e.nI1(23,"mytranslate"),e.k0s()(),e.j41(24,"div",10)(25,"div",12),e.nrm(26,"textarea",21),e.nI1(27,"mytranslate"),e.k0s()()()(),e.j41(28,"div",22)(29,"azt-config-document-market",23),e.bIt("emitChooseKnowledge",function(i){e.eBV(O);const p=e.XpG();return e.Njj(p.chooseKnowledge(i))}),e.k0s()(),e.j41(30,"div",24)(31,"div",25)(32,"button",26),e.bIt("click",function(){e.eBV(O);const i=e.XpG();return e.Njj(i.cancelSaveDocumentObj())}),e.EFF(33),e.nI1(34,"mytranslate"),e.k0s(),e.j41(35,"button",27),e.bIt("click",function(){e.eBV(O);const i=e.XpG();return e.Njj(i.handleSaveDocument())}),e.DNE(36,Ie,2,0,"span",28),e.EFF(37),e.nI1(38,"mytranslate"),e.k0s()()()()()()()}if(2&b){const O=e.XpG();e.R7$(),e.Y8G("formGroup",O.form),e.R7$(7),e.SpI(" ",e.bMT(9,17,"lang_auto_ten")," "),e.R7$(4),e.FS9("placeholder",e.bMT(13,19,"lang_auto_nhap_ten")+" ..."),e.R7$(2),e.Y8G("ngIf",O.form.controls.name.errors),e.R7$(2),e.Y8G("form",O.form)("useExamSchoolLogData",!0),e.R7$(2),e.Y8G("purposeList",O.listPurposeObjs)("form",O.form),e.R7$(4),e.SpI(" ",e.bMT(23,21,"lang_auto_mo_ta")," "),e.R7$(4),e.FS9("placeholder",e.bMT(27,23,"lang_core_nhap_mo_ta")+" ..."),e.R7$(3),e.Y8G("form",O.form)("listWeek",O.listWeek)("listKnowledge",O.listKnowledge),e.R7$(4),e.SpI(" ",e.bMT(34,25,"lang_auto_huy")," "),e.R7$(2),e.Y8G("disabled",O.logConfig.status),e.R7$(),e.Y8G("ngIf",O.logConfig.status),e.R7$(),e.SpI(" ",e.bMT(38,27,"lang_auto_luu")," ")}}function De(b,G){if(1&b&&(e.j41(0,"div",31)(1,"div",32)(2,"div",33)(3,"span",34),e.nrm(4,"azt-loading-ui"),e.k0s(),e.j41(5,"div",35),e.EFF(6),e.k0s()()()()),2&b){const O=e.XpG();e.R7$(6),e.JRh(O.logConfig.msg)}}let Ae=(()=>{var b;class G extends A.H{chooseKnowledge(o){this.knowledgeList=o}cancelSaveDocumentObj(){this.onBack.emit(!0)}handleSaveDocument(){const o=this.getWeeksChecked(this.listWeek,this.form.controls.weeks.value);if(this.checkErrorValidateSave(o,this.knowledgeList))this.showErrorSnack("lang_cms_utils_folder_name_validate_space");else{if(this.type===t.x.exam&&this.isCreateQuestionToEditor&&this.dataSave.exam&&this.dataSave.exam.questionObj.listQuestions){this.logConfig.setStatus(this.commonService.myTranslateInstant("lang_auto_dang_luu_du_lieu_de_thi")),this.countProcess=0;const i=this.dataSave.exam.questionObj.listQuestions;let p=this.commonService.myTranslateInstant("lang_auto_xay_ra_loi_trong_qua_trinh_xu_ly_hinh_anh_cua_de_thi")??"";this.questionShareSaveService.convertQuestions(i,this.dataSave.exam.rootQuests,(C,w=p,F)=>{this.logConfig.stopStatus(),this.showErrorSnack(w),F&&this.stopStatusObj()}).then(()=>{this.startMainProcessSaveEditor()})}this.type===t.x.exam&&!this.isCreateQuestionToEditor&&this.examObj?.id&&this.saveDocumentMarketQuestionObjs(),this.type!==t.x.exam&&this.attachments.length&&this.saveDocumentMarketQuestionObjs(),console.log(this.attachments,this.type)}}initQuestionShare(){this.questionShareSaveService.callbackBase64ToCanvas=(o,i)=>{let p=this.commonService.myTranslateInstant("lang_auto_dang_xu_ly_hinh_anh_cho_de_thi");this.logConfig.setStatus(`${p} ${Math.floor(o/i*100*.7)}%`)},this.questionShareSaveService.callbackUploadImage=(o,i)=>{let p=this.commonService.myTranslateInstant("lang_auto_dang_xu_ly_hinh_anh_cho_de_thi");this.logConfig.setStatus(`${p} ${Math.floor(o/i*100*.3)+70}%`)}}processSaveQuestionsFromEditor(o,i,p){if(this.dataSave.exam?.questionObj&&this.dataSave.exam?.questionObj.listQuestions){var C=this.dataSave.exam?.questionObj.listQuestions.length;let w=o+100>C?C:o+100,F=this.dataSave.exam?.questionObj.listQuestions.slice(o,w)??[],K=[];for(const y of F)K.push({categoryId:y.categoryId,groupId:y.groupId,name:y.name??"none",metadata:y.metadata,isImage:y.isImage,questionContent:y.questionContent,answerMedia:y.answerMedia,questionText:y.questionText,answerType:y.answerType,answerConfig:y.answerConfig,coordinates:y.coordinates,answerResult:y.answerResult,totalQuestion:y.totalQuestion,tags:y.tags??[],mediaId:y.mediaId,mediaMeta:y.mediaMeta,attachments:y.attachments,version:y.version,isFixAns:y.isFixAns,groupType:y.groupType,__path:y.__path,answers:y.configAnswers?y.configAnswers.map(de=>({answerKey:de.key,objectiveId:de.objectiveId,tag:de.tagCode})):[]});K.length>0?this.sAztSaveProcessService.saveQuestionObjsFromEditor(this.dataSave,K,i).then(y=>{y&&y.listQuestionId.length>0?(p.listQuestionId=p.listQuestionId.concat(y.listQuestionId),this.processSaveQuestionsFromEditor(w,y.indexSaved,p)):(this.countProcess=0,this.logConfig.stopStatus(),this.showErrorSnack("lang_auto_khong_luu_duoc_noi_dung_cau_hoi_trong_de_vui_long_kiem_tra_lai"))}):this.saveDocumentMarketQuestionObjs(p)}}startMainProcessSaveEditor(){this.dataSave.exam&&this.dataSave.exam.questionObj&&this.processSaveQuestionsFromEditor(0,0,{indexSaved:0,listQuestionId:[]})}getListPurposeExam(){this.initStatusObj(),this.waitDestroy(this.commonListService.apiCommonListExamPurposesGet().subscribe(o=>{if(!o.success)return this.errorStatusObj(o.message,!0);this.listPurposeObjs=o.data?.objs??[],this.successStatusObj()}))}getKnowledgeData(){const o=this.form.getRawValue();!o.schoolLevel||!o.schoolSubject||this.waitDestroy(this.knowledgeService.apiKnowledgeGet(o.schoolLevel,o.schoolSubject).subscribe(i=>{i.list&&(this.listKnowledge=i.list)}))}checkErrorValidateSave(o,i){return!(!this.form.invalid&&("0"!=this.form.controls.creatorId.value||this.form.controls.creatorFullName.value&&this.form.controls.creatorFullName.value&&this.form.controls.creatorPhone.value&&this.form.controls.creatorWorkingAddress.value)&&("0"!=this.form.controls.creatorId.value||10===this.form.controls.creatorPhone.value.length)&&o.length)}fillConfig(){return new P.c(o=>{const i=this.isCreateQuestionToEditor,p=Number(this.commonService.getMyParam(this.activeRoute,"levelId")??0),C=Number(this.commonService.getMyParam(this.activeRoute,"subjectId")??0),w=i?Number(this.browserStorageService.getSimpleStorage("levelId")??0):p,F=i?Number(this.browserStorageService.getSimpleStorage("subjectId")??0):C;this.examObj?.id?this.documentConfigService.apiDocumentConfigGetExamConfigDataV2Get(this.examObj.hashId??"").subscribe(K=>{if(!K.success)return this.errorStatusObj(K.message??"",!0);if(!K.data?.examObj)return;const y=K.data.examObj;this.form.patchValue({name:y.name,description:y.description,schoolLevel:y.schoolLevelId??p,schoolSubject:y.schoolSubjectId??C,purposeExam:K.data?.purposeId??0,purposeNote:K.data?.purposeNote??""}),o.next()}):(this.form.controls.schoolLevel.setValue(w),this.form.controls.schoolSubject.setValue(F),i||this.form.controls.name.setValue(this.name),o.next())})}getWeeksChecked(o,i){let p=[];for(let C=0;C<i.length;C++)i[C]&&o[C]&&p.push(o[C]);return p}createListWeek(){for(let i=0;i<35;i++)this.listWeek.push(i+1)}saveDocumentMarketQuestionObjs(o){const i=this.getWeeksChecked(this.listWeek,this.form.controls.weeks.value);this.logConfig.setStatus("");let p={name:this.form.controls.name.value,type:this.type,schoolLevelId:this.form.controls.schoolLevel.value,schoolSubjectId:this.form.controls.schoolSubject.value,purposeId:this.form.controls.purposeExam.value,purposeNote:this.form.controls.purposeNote.value,description:this.form.controls.description.value,creatorId:Number(this.form.controls.creatorId.value),creatorFullName:this.form.controls.creatorFullName.value,creatorPhone:this.form.controls.creatorPhone.value,creatorWorkingAddress:this.form.controls.creatorWorkingAddress.value,knowledgeIds:this.knowledgeList,weeks:i};switch(this.type){case t.x.exam:if(o&&this.isCreateQuestionToEditor){let C=[];C=o.listQuestionId.map(w=>w??0)??[],p.questionIds=C}this.examObj?.id&&!this.isCreateQuestionToEditor&&(p.examId=this.examObj?.id,p.questionIds=[]);break;case t.x.lecture:case t.x.ref:case t.x.teaching_plan:case t.x.slide:p.attachments=this.attachments}this.waitDestroy(this.documentService.apiDocumentsPost(p).subscribe(C=>{if(C.id){this.successStatusObj("lang_document_successful_sharing",!0);const w="/document-market/list-documents/your-documents/1";this.logConfig.stopStatus(),this.myNavigation(w)}else this.errorStatusObj(""),this.logConfig.stopStatus()}))}ngOnInit(){super.ngOnInit(),this.createListWeek(),this.getListPurposeExam(),this.fillConfig().pipe((0,S.c)(500)).subscribe(()=>{this.getKnowledgeData(),this.form.controls.schoolSubject.valueChanges.subscribe(()=>{this.getKnowledgeData()}),this.form.controls.schoolLevel.valueChanges.subscribe(()=>{this.getKnowledgeData()})}),this.type===t.x.exam&&this.isCreateQuestionToEditor&&(this.dataSave=this.editorOutputDataService.getOutputData(),this.form.controls.name.setValue(this.dataSave.exam?.examObj.name??this.dataSave.homework?.name??""))}constructor(o,i,p,C,w,F,K,y,de){super(),this.documentConfigService=o,this.activeRoute=i,this.documentService=p,this.knowledgeService=C,this.questionShareSaveService=w,this.editorOutputDataService=F,this.sAztSaveProcessService=K,this.browserStorageService=y,this.commonListService=de,this.type=t.x.exam,this.isCreateQuestionToEditor=!1,this.attachments=[],this.name="",this.onBack=new e.bkB,this.listPurposeObjs=[],this.listKnowledge=[],this.logConfig=new z.J,this.dataSave={},this.saveParts=[],this.countProcess=0,this.knowledgeList=[],this.listWeek=[],this.form=new c.gE({name:new c.MJ("",{nonNullable:!0,validators:[c.k0.required,h.M.noWhiteSpace]}),description:new c.MJ("",{nonNullable:!0}),schoolLevel:new c.MJ(0,{nonNullable:!0,validators:[c.k0.required,c.k0.min(1)]}),schoolSubject:new c.MJ(0,{nonNullable:!0,validators:[c.k0.required,c.k0.min(1)]}),purposeExam:new c.MJ(0,{nonNullable:!0,validators:[c.k0.required,c.k0.min(1)]}),purposeNote:new c.MJ("",{nonNullable:!0}),knowledgeIds:new c.Yp([]),weeks:new c.Yp([]),creatorId:new c.MJ("1",{nonNullable:!0}),creatorFullName:new c.MJ("",{nonNullable:!0}),creatorPhone:new c.MJ("",{nonNullable:!0}),creatorWorkingAddress:new c.MJ("",{nonNullable:!0})}),this.type===t.x.exam&&this.isCreateQuestionToEditor&&this.initQuestionShare()}}return(b=G).\u0275fac=function(o){return new(o||b)(e.rXU(J.x_),e.rXU(T.nX),e.rXU(ce.DK),e.rXU(ce.Iu),e.rXU(be),e.rXU(Ce.O),e.rXU(Oe.G),e.rXU(we.z),e.rXU(Me.Nz))},b.\u0275cmp=e.VBU({type:b,selectors:[["azt-config-share-document"]],inputs:{type:"type",isCreateQuestionToEditor:"isCreateQuestionToEditor",attachments:"attachments",name:"name",examObj:"examObj"},outputs:{onBack:"onBack"},standalone:!0,features:[e.Vt3,e.aNF],decls:4,vars:3,consts:[["doneLoading",""],[3,"currentStatusObj",4,"ngIf","ngIfElse"],["style","width: 100vw; height: 100vh; position: fixed; z-index: 9999; top: 0; left: 0; display: flex; justify-content: center; align-items: center; background-color: rgba(0, 0, 0, 0.4)",4,"ngIf"],[3,"currentStatusObj"],[1,"intro-y","mt-8","p-3"],[3,"formGroup"],[1,"mx-auto",2,"max-width","1100px"],[1,"setting-block"],[1,"box","mt-2","p-3"],["id","azt-config-name",1,"grid","grid-cols-12"],[1,"col-span-12","lg:col-span-12"],["for","general-name",1,"form-label","mb-0","font-medium","flex","items-center"],[1,"setting-input"],["id","general-name","formControlName","name","type","text",1,"form-control",3,"placeholder"],["class","mt-2 text-danger text-xs fade",4,"ngIf"],[1,"mt-4"],[3,"form","useExamSchoolLogData"],[1,"mt-2"],[3,"purposeList","form"],["id","azt-config-desc",1,"grid","grid-cols-12","mt-4"],["for","general-desc",1,"form-label","mb-0","font-medium","flex","items-center"],["id","general-desc","formControlName","description",1,"form-control","w-full",2,"height","150px",3,"placeholder"],[1,"config-document-market"],[3,"emitChooseKnowledge","form","listWeek","listKnowledge"],[1,"mt-5"],[1,"flex","justify-end"],[1,"btn","btn-secondary","w-24","mr-2",3,"click"],[1,"btn","w-24","btn-primary",3,"click","disabled"],["class","w-4 h-4 mr-2",4,"ngIf"],[1,"mt-2","text-danger","text-xs","fade"],[1,"w-4","h-4","mr-2"],[2,"width","100vw","height","100vh","position","fixed","z-index","9999","top","0","left","0","display","flex","justify-content","center","align-items","center","background-color","rgba(0, 0, 0, 0.4)"],[2,"text-align","center","color","#000000"],[2,"margin-bottom","10px"],[1,"w-4","h-4","inline-block"],[2,"font-size","20px","margin-top","10px","background-color","#f0f8ffa3","padding","10px","border-radius","5px"]],template:function(o,i){if(1&o&&e.DNE(0,Pe,1,1,"azt-loading-effect",1)(1,Se,39,29,"ng-template",null,0,e.C5r)(3,De,7,1,"div",2),2&o){const p=e.sdS(2);e.Y8G("ngIf",i.statusObj.loading)("ngIfElse",p),e.R7$(3),e.Y8G("ngIf",i.logConfig.status&&i.isCreateQuestionToEditor)}},dependencies:[H,v.K,r.X,u.b,l.R,E.MD,E.bT,c.X1,c.qT,c.me,c.BC,c.cb,c.j4,c.JD,T.iI,c.YN,L.wp,s.s,m.flO,N.L,_.Id,j.k,Ee.t],encapsulation:2}),G})()},36247:(oe,B,n)=>{n.d(B,{G:()=>z});var E=n(48891),e=n(21164),c=n(27525),T=n(95222),j=n(18884);let z=(()=>{var L;class N{convertBase64OfMathJaxToCdnUrlInQuestions(h,r){return new Promise((u,t)=>{const l=null==r?new c.n(10):new c.n(10,{function:r},0);h.forEach(v=>{l.addTask(this.dataAztMathRawHelper,this.dataAztMathRawHelper.convertBase64OfMathJaxToCdnUrl,[v])}),l.start().then(v=>{0===v.errs.length?u(v.datas):t(v.errs[0])})})}saveQuestionObjsFromEditor(h,r,u){return new Promise(t=>{this.convertBase64OfMathJaxToCdnUrlInQuestions(r,void 0).then(l=>{let v=[];for(let m=0;m<l.length;m++){let _=l[m];_.expandInfo=this.commonService.serializeJson(h.exam?.examObj.expandInfoObj),v.push(_)}this.questionService.apiQuestionsPost({listQuestions:v}).subscribe(m=>{t(m.list?{indexSaved:m.list.length+u,listQuestionId:m.list}:{indexSaved:u,listQuestionId:[]})})}).catch(()=>{t({indexSaved:u,listQuestionId:[]})})})}constructor(h,r){this.questionService=h,this.dataAztMathRawHelper=r,this.commonService=(0,E.WQX)(e.R)}}return(L=N).\u0275fac=function(h){return new(h||L)(E.KVO(T.wP),E.KVO(j.c))},L.\u0275prov=E.jDH({token:L,factory:L.\u0275fac,providedIn:"root"}),N})()},51244:(oe,B,n)=>{n.d(B,{b:()=>ee});var E=n(54460),e=n(10936),c=n(65162),T=n(10273),j=n(44327),z=n(96639),L=n(55887),N=n(88023),A=n(15343),h=n(44233),r=n(5502),u=n(44155),t=n(48891),l=n(47426),v=n(95670),m=n(4375),_=n(83426);function P(R,M){if(1&R&&(t.j41(0,"mat-option",16),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&R){const f=M.$implicit;t.Y8G("value",f.id),t.R7$(),t.SpI(" ",t.bMT(2,2,f.code)," ")}}function S(R,M){if(1&R&&(t.j41(0,"mat-optgroup",14),t.nI1(1,"mytranslate"),t.DNE(2,P,3,4,"mat-option",15),t.k0s()),2&R){const f=M.$implicit;t.XpG();const k=t.sdS(10);t.FS9("label",t.bMT(1,2,f.groupName)),t.R7$(2),t.Y8G("ngForOf",k.filter(f.purposeListInGroup,"code"))}}function s(R,M){1&R&&(t.j41(0,"div",17),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&R&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"lang_testbank_please_choose_purpose_exam")," "))}function U(R,M){1&R&&(t.j41(0,"div",17),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&R&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"lang_testbank_please_enter_purpose_create_exam")," "))}function W(R,M){if(1&R&&(t.j41(0,"div",4)(1,"div",5)(2,"label",18),t.EFF(3),t.nI1(4,"mytranslate"),t.k0s()(),t.j41(5,"div",19),t.nrm(6,"input",20),t.nI1(7,"mytranslate"),t.k0s(),t.DNE(8,U,3,3,"div",12),t.k0s()),2&R){const f=t.XpG();t.R7$(3),t.SpI(" ",t.bMT(4,3,"lang_testbank_enter_create_exam_target")," "),t.R7$(3),t.FS9("placeholder",t.bMT(7,5,"lang_testbank_enter_create_exam_target")+" ..."),t.R7$(2),t.Y8G("ngIf",(4==(null==f.form.controls.purposeExam?null:f.form.controls.purposeExam.value)||8==(null==f.form.controls.purposeExam?null:f.form.controls.purposeExam.value)||12==(null==f.form.controls.purposeExam?null:f.form.controls.purposeExam.value))&&""===(null==f.form.controls.purposeNote||null==f.form.controls.purposeNote.value?null:f.form.controls.purposeNote.value.trim()))}}let ee=(()=>{var R;class M extends N.H{convertPurposeList(){this.targetExamGroupObjs=[],this.purposeList.forEach(k=>{const{semester:I}=k;let d=this.targetExamGroupObjs.find(D=>D.semester===I);d||(d={semester:I,groupName:this.getGroupNamePurpose(k.semester??1),purposeListInGroup:[]},this.targetExamGroupObjs.push(d)),d.purposeListInGroup?.push(k)})}getGroupNamePurpose(k){switch(k){case 1:default:return"lang_testbank_semester_one";case 2:return"lang_testbank_semester_two";case 3:return"lang_testbank_another_purpose"}}ngOnInit(){this.convertPurposeList()}constructor(){super(),this.purposeList=[],this.targetExamGroupObjs=[]}}return(R=M).\u0275fac=function(k){return new(k||R)},R.\u0275cmp=t.VBU({type:R,selectors:[["config-purpose-exam"]],inputs:{form:"form",purposeList:"purposeList"},standalone:!0,features:[t.Vt3,t.aNF],decls:21,vars:18,consts:[["searchInListPurpose","searchInList"],[1,"config-purpose-exan"],[3,"formGroup"],["id","azt-config-purpose-exam",1,"grid","grid-cols-12","gap-5"],[1,"col-span-12"],[1,"font-medium"],[1,"form-label","flex","items-center"],["appearance","outline"],["searchInList","","formControlName","purposeExam","name","purposeExam"],[3,"formControl","placeholderLabel","noEntriesFoundLabel"],["disabled","",3,"value"],[3,"label",4,"ngFor","ngForOf"],["class","mt-2 text-danger text-xs",4,"ngIf"],["class","col-span-12",4,"ngIf"],[3,"label"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"mt-2","text-danger","text-xs"],["for","enter_target_create_exam",1,"form-label","flex","items-center"],[1,"setting-input"],["id","enter_target_create_exam","formControlName","purposeNote","type","text",1,"form-control",3,"placeholder"]],template:function(k,I){if(1&k&&(t.j41(0,"div",1)(1,"form",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"label",6),t.EFF(6),t.nI1(7,"mytranslate"),t.k0s()(),t.j41(8,"mat-form-field",7)(9,"mat-select",8,0)(11,"mat-option"),t.nrm(12,"ngx-mat-select-search",9),t.nI1(13,"mytranslate"),t.nI1(14,"mytranslate"),t.k0s(),t.j41(15,"mat-option",10),t.EFF(16),t.nI1(17,"mytranslate"),t.k0s(),t.DNE(18,S,3,4,"mat-optgroup",11),t.k0s()(),t.DNE(19,s,3,3,"div",12),t.k0s(),t.DNE(20,W,9,7,"div",13),t.k0s()()()),2&k){const d=t.sdS(10);t.R7$(),t.Y8G("formGroup",I.form),t.R7$(5),t.SpI(" ",t.bMT(7,10,"lang_testbank_target_exam")," "),t.R7$(6),t.FS9("placeholderLabel",t.bMT(13,12,"lang_search_by_name")),t.FS9("noEntriesFoundLabel",t.bMT(14,14,"lang_search_not_found")),t.Y8G("formControl",d.searchControl),t.R7$(3),t.Y8G("value",0),t.R7$(),t.SpI("---",t.bMT(17,16,"lang_testbank_choose_purpose"),"---"),t.R7$(2),t.Y8G("ngForOf",I.targetExamGroupObjs),t.R7$(),t.Y8G("ngIf",0==I.form.controls.purposeExam.value),t.R7$(),t.Y8G("ngIf",4==(null==I.form.controls.purposeExam?null:I.form.controls.purposeExam.value)||8==(null==I.form.controls.purposeExam?null:I.form.controls.purposeExam.value)||12==(null==I.form.controls.purposeExam?null:I.form.controls.purposeExam.value))}},dependencies:[h.An,h.U9,T.x,E.MD,E.Sq,E.bT,e.X1,e.qT,e.me,e.BC,e.cb,e.l_,e.j4,e.JD,c.iI,e.YN,z.wp,u.s,l.wT,l.D7,v.rl,m.VO,A.flO,L.L,r.Id,j.k,_.t],encapsulation:2}),M})()},93052:(oe,B,n)=>{n.d(B,{H:()=>v});var E=n(54460),e=n(10936),c=n(65162),T=n(44327),j=n(96639),z=n(55887),L=n(88023),N=n(15343),A=n(5502),h=n(44155),r=n(48891),u=n(11601);let t=(()=>{var m;class _{convertUrl(){this.src=this.sAztCommonCdnService.getMyCdn(this.src)}constructor(S){this.sAztCommonCdnService=S,this.src=""}}return(m=_).\u0275fac=function(S){return new(S||m)(r.rXU(u.c))},m.\u0275dir=r.FsC({type:m,selectors:[["","appImageFallback",""]],hostVars:1,hostBindings:function(S,s){1&S&&r.bIt("error",function(){return s.convertUrl()}),2&S&&r.Mr5("src",s.src,r.n$t)},inputs:{src:"src"},standalone:!0}),_})();function l(m,_){1&m&&(r.j41(0,"div",2),r.nrm(1,"img",3),r.nI1(2,"coreModConvertCdnLinkOfGitHub"),r.k0s()),2&m&&(r.R7$(),r.Y8G("src",r.bMT(2,1,"svgs/Img2_dat-01.svg"),r.B4B))}let v=(()=>{var m;class _ extends L.H{onError(S){if(this.isRetry){const s=S.target;setTimeout(()=>{1==this.countRetry?(s.src=this.sAztCommonCdnService.getMyCdn(this.imgSrc??""),this.countRetry++):this.countRetry<5?(this.countRetry++,s.src=this.sAztCommonCdnService.getMyCdn(this.imgSrc??"")+"?t="+(new Date).getTime()):this.stopStatusObj()},500)}}onLoad(){this.stopStatusObj()}get isLazyLoad(){return void 0!==this.width&&void 0!==this.height}constructor(S){super(),this.sAztCommonCdnService=S,this.noClass=!1,this.isRetry=!0,this.countRetry=1}ngOnInit(){this.initStatusObj(),super.ngOnInit()}}return(m=_).\u0275fac=function(S){return new(S||m)(r.rXU(u.c))},m.\u0275cmp=r.VBU({type:m,selectors:[["azt-loaded-img"]],inputs:{imgSrc:"imgSrc",id:"id",noClass:"noClass",width:"width",height:"height",isRetry:"isRetry"},standalone:!0,features:[r.Vt3,r.aNF],decls:3,vars:10,consts:[["class","px-4 py-3 text-center",4,"ngIf"],["appImageFallback","",2,"width","100%",3,"load","error","width","height","hidden"],[1,"px-4","py-3","text-center"],["alt","image_loading_placeholer",3,"src"]],template:function(S,s){1&S&&(r.DNE(0,l,3,3,"div",0),r.j41(1,"img",1),r.nI1(2,"mycdn"),r.bIt("load",function(){return s.onLoad()})("error",function(W){return s.onError(W)}),r.k0s()),2&S&&(r.Y8G("ngIf",!s.isLazyLoad&&s.statusObj.loading),r.R7$(),r.HbH(s.id?"img-fluid questionId_"+s.id:s.noClass?"w-auto":"img-fluid"),r.Y8G("width",void 0!==s.width?s.width:null)("height",void 0!==s.height?s.height:null)("hidden",!s.isLazyLoad&&s.statusObj.loading),r.BMQ("loading",s.isLazyLoad?"lazy":"eager")("src",r.bMT(2,8,s.imgSrc),r.B4B))},dependencies:[E.MD,E.bT,e.X1,c.iI,e.YN,j.nf,j.Vs,h.s,N.flO,z.L,A.Id,T.k,t],encapsulation:2}),_})()},32741:(oe,B,n)=>{n.d(B,{I:()=>l});var E=n(54460),e=n(10936),c=n(65162),T=n(44327),j=n(55887),z=n(88023),L=n(15343),N=n(5502),A=n(44155),h=n(48891);const r=()=>({"text-white":!0});function u(v,m){1&v&&h.nrm(0,"lucide-icon",3),2&v&&h.Y8G("ngClass",h.lJ4(1,r))}function t(v,m){1&v&&h.nrm(0,"lucide-icon",4),2&v&&h.Y8G("ngClass",h.lJ4(1,r))}let l=(()=>{var v;class m extends z.H{constructor(){super(...arguments),this.isScrollToTop=!1}scrollTo(){this.isScrollToTop?window.scrollTo(0,0):window.scrollTo(0,document.body.scrollHeight)}ngOnInit(){super.ngOnInit()}}return(v=m).\u0275fac=(()=>{let _;return function(S){return(_||(_=h.xGo(v)))(S||v)}})(),v.\u0275cmp=h.VBU({type:v,selectors:[["azt-scroll-to-top-bottom"]],inputs:{isScrollToTop:"isScrollToTop"},standalone:!0,features:[h.Vt3,h.aNF],decls:3,vars:2,consts:[["azt-track-service","azt-scroll-to-top-bottom-DbRV8ySsXT1",1,"toolBarMobile","clickable",3,"click"],["name","chevrons-up","size","24",3,"ngClass",4,"ngIf"],["name","chevrons-down","size","24",3,"ngClass",4,"ngIf"],["name","chevrons-up","size","24",3,"ngClass"],["name","chevrons-down","size","24",3,"ngClass"]],template:function(P,S){1&P&&(h.j41(0,"div",0),h.bIt("click",function(){return S.scrollTo()}),h.DNE(1,u,1,2,"lucide-icon",1)(2,t,1,2,"lucide-icon",2),h.k0s()),2&P&&(h.R7$(),h.Y8G("ngIf",S.isScrollToTop),h.R7$(),h.Y8G("ngIf",!S.isScrollToTop))},dependencies:[E.MD,E.YU,E.bT,e.X1,c.iI,e.YN,A.s,L.flO,L.WGl,j.L,N.Id,T.k],styles:[".toolBarMobile[_ngcontent-%COMP%]{position:fixed;bottom:0;right:0;z-index:100;margin:0 40px 25px;padding:5px;background:#b5b5b587;border-radius:3px}"]}),m})()}}]);