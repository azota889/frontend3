"use strict";(self.webpackChunkTeacherMod=self.webpackChunkTeacherMod||[]).push([[312],{14608:(A,h,n)=>{n.d(h,{I:()=>u});var e=n(65080),t=n(63055),l=n(94329),a=n(15954);class u extends a._{constructor(s,r,p,_){super(),this.sAztCommonCdnService=s,this.commonService=r,this.callBack=p,this.callbackFall=_}render(s,r,p,_){if(s.indexOf("@[]")<0)return _&&_(),s;let m,i=/@\[\]\{[^@]+\}@\[\]/g,c=s,d=new Map;for(;null!==(m=i.exec(s));){let C=m[0],P=C.split("@[]")[1],x=this.commonService.willDeleteParseJson(P);if(null==x)continue;let f=x.link,S=e.P.generateIdRequired(10);c=c.replace(C,`<div id='${S}' class='img-docx skeleton-box-loading' style='width: ${x.data.width*this.ratioImage}px;height: ${x.data.height*this.ratioImage}px'></div>`),d.has(f)?d.get(f)?.push({id:S,data:x.data}):d.set(f,[{id:S,data:x.data}])}return this.startLoadImage(d).then(()=>{_&&_()}).catch(C=>{this.callbackFall&&this.callbackFall(C)}),c}startLoadImage(s){return new Promise((r,p)=>{var _=0;s.size>0?s.forEach((i,c)=>{this.loadImage(c,this.sAztCommonCdnService).then(d=>{if(this.processImageQuestion(d,i,p),this.loadingManager.delete(d.id),this.callBack)for(let m of i)this.callBack(m.id,m.renderStr);++_===s.size&&r()}).catch(()=>{const d=c.split("/");var m=this.commonService.myTranslateInstant("lang_testbank_render_cant_download_the_image")??"";p(new l.J("LOAD_IMAGE",[d[d.length-1]],m))})}):r()})}processImageQuestion(s,r,p){r.forEach(_=>{try{const i=document.createElement("canvas");_.data.width=-1===_.data.width?s.width:_.data.width,_.data.height=-1===_.data.height?s.height:_.data.height,i.width=_.data.width,i.height=_.data.height,i.getContext("2d")?.drawImage(s,_.data.x,_.data.y,_.data.width,_.data.height,0,0,i.width,i.height);let d=this.isCropImage?t.Iz.cropCanvas(i):i;d=this.isCanvasEmpty(d)?i:d,_.renderStr=_.data.heightPt&&_.data.widthPt?`<img id='${_.id}' class='img-docx' alt='error...' src='${d.toDataURL()}' style='width: ${_.data.widthPt}pt;height: ${_.data.heightPt}pt'>`:`<img id='${_.id}' class='img-docx' alt='error...' src='${d.toDataURL()}' style='width: ${d.width*this.ratioImage}px;height: auto'>`}catch{const c=s.src;return void p(new l.J("CROP_IMAGE",[c[c.length-1]],"Kh\xf4ng c\u1eaft \u0111\u01b0\u1ee3c n\u1ed9i dung trong h\xecnh \u1ea3nh"))}})}isCanvasEmpty(s){const r=document.createElement("canvas");return r.width=s.width,r.height=s.height,s.toDataURL()===r.toDataURL()}}},15954:(A,h,n)=>{n.d(h,{_:()=>a});var e=n(65080),t=n(63055),l=n(64198);class a{constructor(){this.isCropImage=!0,this.loadingManager=new Map,this.ratioImage=.65}setCallback(o){}setApiCache(o){}setLoadingManager(o){this.loadingManager=o}loadImage(o,s){return new Promise((r,p)=>{let _=e.P.generateIdRequired(10);this.loadingManager.set(_,o),(0,l.qO)(o,s).then(i=>{r(i),this.loadingManager.delete(_)}).catch(()=>{this.loadingManager.delete(_),p(new Error)})})}loadImageToBase64(o,s){return new Promise((r,p)=>{const _=new Image;_.crossOrigin="anonymous",_.setAttribute("count","1");let i=e.P.generateIdRequired(10);this.loadingManager.set(i,o),_.onload=()=>{const c=document.createElement("canvas");c.width=_.width,c.height=_.height,c.getContext("2d")?.drawImage(_,0,0,_.width,_.height,0,0,c.width,c.height);const m=this.isCropImage?t.Iz.cropCanvas(c):c;let C=`<img id='${i}' class='img-docx' alt='error...' src='${m.toDataURL()}' style='width: ${m.width*this.ratioImage}px;height: auto'>`;r(C),this.loadingManager.delete(i)},_.onerror=()=>{this.loadingManager.delete(i);const c=_.getAttribute("count");c&&1==Number(c)?(_.src=s.getMyCdn(o),_.setAttribute("count","2")):c&&Number(c)<5?(_.setAttribute("count",c+1),_.src=s.getMyCdn(o)+"?t="+(new Date).getTime()):p(new Error)},_.src=s.getMyCdn(o)})}}},60531:(A,h,n)=>{n.d(h,{O:()=>a});var e=n(48891),t=n(50589),l=n(44172);let a=(()=>{var u;class o{setOcrData(r){this.dataOcrResponse=r}getOcrDataResponse(){return this.dataOcrResponse}setMode(r){this.browserStorageService.saveSimpleStorage("__editor:mode_open",r)}getMode(){var r=this.browserStorageService.getSimpleStorage("__editor:mode_open")||"editor";return this.browserStorageService.removeSimpleStorage("__editor:mode_open"),r}redirectToConfig(r){this.data.homework&&r.showHomework(),(this.data.exam||this.data.examOffline)&&r.showExam()}setFileProcess(r){this.file=r}getFirstFile(){let r=this.file;return this.file=void 0,r}setOutputData(r){this.data=r}getOutputData(){return this.data}setMatrixData(r,p){p?this.matrix=r:this.browserStorageService.saveSimpleStorage("__editor:matrix-data",JSON.stringify(r))}getMatrixData(){var r=this.browserStorageService.getSimpleStorage("__editor:matrix-data");return this.browserStorageService.removeSimpleStorage("__editor:matrix-data"),r?this.commonService.castJsonToObj(r):this.matrix}constructor(r,p){this.browserStorageService=r,this.commonService=p,this.data={}}}return(u=o).\u0275fac=function(r){return new(r||u)(e.KVO(t.z),e.KVO(l.R))},u.\u0275prov=e.jDH({token:u,factory:u.\u0275fac,providedIn:"root"}),o})()},5955:(A,h,n)=>{n.d(h,{C:()=>t});var e=n(48891);let t=(()=>{var l;class a{startProcessLayout(){this.onElementLoaded(o=>{if(!o)return;const s=this.el.nativeElement,r=Array.from(s.children);let p=1,_=r.map(i=>this.getChildrenWidthOfElement(i));[2,4].forEach(i=>{this.isLayout(o.width,_,i)&&(p=i)}),s.classList.remove("row"),r.forEach(i=>{i.classList.remove("col-sm-12"),i.classList.remove("col-md-6")}),s.classList.add("layout"),s.classList.add("layout-"+p)})}isLayout(o,s,r){let p=Math.floor(o/r);for(let _ of s)if(_+a.PADDING_ITEM>p)return!1;return!0}onElementLoaded(o,s=0){if(this.haveDestroyComponent||s>=10)return o(void 0);let r=this.getWidthHeightOfElement(this.el.nativeElement);if(r.width>0&&r.height)return o(r);this.ngZone.runOutsideAngular(()=>{setTimeout(()=>{this.onElementLoaded(o,s+1)},100)})}getWidthHeightOfElement(o){return o.getBoundingClientRect()}getChildrenWidthOfElement(o){let s=0;return Array.from(o.children).forEach(r=>s+=r.getBoundingClientRect().width),s}ngOnDestroy(){this.haveDestroyComponent=!0}ngOnChanges(o){o.answerSizeManager&&o.answerSizeManager.currentValue!==o.answerSizeManager.previousValue&&o.answerSizeManager.currentValue>=1&&this.startProcessLayout()}constructor(o){this.el=o,this.answerSizeManager=0,this.ngZone=(0,e.WQX)(e.SKi),this.haveDestroyComponent=!1,this.startProcessLayout()}}return(l=a).PADDING_ITEM=40,l.\u0275fac=function(o){return new(o||l)(e.rXU(e.aKT))},l.\u0275dir=e.FsC({type:l,selectors:[["","answerSizeManager",""]],inputs:{answerSizeManager:"answerSizeManager"},standalone:!0,features:[e.OA$]}),a})()},42789:(A,h,n)=>{n.d(h,{N:()=>l});var e=n(48891);let t=(()=>{var a;class u{constructor(){this.observer=new IntersectionObserver(s=>{s.forEach(r=>{const p=r.target;r.isIntersecting?(this.reUpdateHeightAttribute(p),p.setAttribute("start_loading","true")):p.setAttribute("start_loading","false")})})}reUpdateHeightAttribute(s){const r=s.getBoundingClientRect();r.height>0&&s.setAttribute("data-current-height",r.height+"px")}observe(s){this.observer.observe(s)}}return(a=u).\u0275fac=function(s){return new(s||a)},a.\u0275prov=e.jDH({token:a,factory:a.\u0275fac,providedIn:"root"}),u})(),l=(()=>{var a;class u{constructor(s,r){this.injector=s,this.el=r;const p=this.el.nativeElement;this.injector.get(t).observe(p)}}return(a=u).\u0275fac=function(s){return new(s||a)(e.rXU(e.zZn),e.rXU(e.aKT))},a.\u0275dir=e.FsC({type:a,selectors:[["","load_effect_lazy",""]],standalone:!0}),u})()},85747:(A,h,n)=>{n.d(h,{J:()=>e});class e{get status(){return this.currentStatus}get msg(){return this.currentMessage}setStatus(l){this.currentStatus=!0,this.currentMessage=l}stopStatus(){this.currentStatus=!1,this.currentMessage=void 0}}},25539:(A,h,n)=>{n.d(h,{I:()=>e});class e{constructor(){this.answerLabelsMockup={},this.showEssayMark=!0}}},5382:(A,h,n)=>{n.d(h,{n:()=>e});class e{constructor(l,a,u,o){this.tasks=new Array,this.queues=new Array,this.isRunning=!1,this.allTasks=0,this.wrapCounter=0,this.wrapCounterDone=0,this.countTaskRootDone=0,this.limitOneProcess=l,this.resultCommonTemp={datas:[],errs:[]},this.actionLogItem=a,this.delayTime=u||1e3,this.endWithError=o??!1}addTask(l,a,u,o){if(this.isRunning)return;var s=u||[];const r=this.queues.length;this.allTasks++,this.queues.push({task:()=>new Promise(_=>{this.wrapCounter++,a.call(l,...s).then(i=>{this.wrapCounterDone++,this.callLog(o),_({status:!0,value:i,index:r})}).catch(i=>{this.wrapCounterDone++,this.callLog(o),_({status:!1,error:i,index:r})})}),name:o})}callLog(l){this.actionLogItem&&this.allTasks>0&&this.actionLogItem.function.call({},this.wrapCounterDone,this.allTasks,...this.actionLogItem.params?this.actionLogItem.params:[],l)}start(){return new Promise(l=>{0===this.queues.length&&l({datas:[],errs:[]}),this.resultCommonTemp={datas:[],errs:[]};for(let a=0;a<this.limitOneProcess;a++){const u=this.queues.shift();if(!u)break;this.tasks.push(u)}this.countTaskRootDone=0,this.isRunning=!0,this.runner(l)})}checker(l,a){this.countTaskRootDone++,l.status&&l.value?this.resultCommonTemp.datas.push({index:l.index,value:l.value}):l.error&&this.resultCommonTemp.errs.push({index:l.index,value:l.error}),this.resultCommonTemp.errs.length>0&&this.endWithError&&(this.isRunning=!1,a(this.makeResultObj())),this.countTaskRootDone===this.allTasks&&(this.isRunning=!1,a(this.makeResultObj())),this.nextItem(a)}makeResultObj(){return{datas:this.resultCommonTemp.datas.sort(function(l,a){return l.index-a.index}).map(l=>l.value),errs:this.resultCommonTemp.errs.sort(function(l,a){return l.index-a.index}).map(l=>l.value)}}nextItem(l){const a=this.queues.shift();a&&a.task.call(this).then(u=>this.checker(u,l))}runner(l){this.tasks.length>0?this.tasks.forEach(a=>{a.task.call(this).then(u=>this.checker(u,l))}):(this.isRunning=!1,l(this.makeResultObj()))}}},76671:(A,h,n)=>{n.d(h,{c:()=>p});var e=n(73014),t=n(27691),l=n(5382),a=n(48891),u=n(44172),o=n(58112),s=n(48451);const r=n(4060);let p=(()=>{var _;class i{constructor(d,m,C){this.commonService=d,this.sAztCommonCdnService=m,this.apiUploadService=C,this.dataRaws=[],this.stringFirstOld=["zCv:"],this.stringFirst="zCo:"}convertBase64OfMathJaxToCdnUrl(d){return new Promise(m=>{var C=this.getValueContentQuestion(d.questionContent??""),P=this.getValueContentQuestion(d.answerConfig??""),x=d.answerMedia??"",f=this.removeBase64MathJaxInQuestionContent(d.questionText??"");if(0===C.length||0===P.length)return void m(d);let S=this.encodeContent(C[0].content),E=[];P.forEach((g,w)=>{E.push({i:w,d:this.encodeContent(g.content)})});let O=this.encodeContent(x);var y=0;let D=[];for(let g=0;g<S.raws.length;g++)S.raws[g].i=y,y++,D.push(S.raws[g]);for(let g=0;g<O.raws.length;g++)O.raws[g].i=y,y++,D.push(O.raws[g]);E.forEach(g=>{for(let w=0;w<g.d.raws.length;w++)g.d.raws[w].i=y,y++,D.push(g.d.raws[w])}),D.length>0?this.uploadRawContent(D.map(g=>g.l)).then(g=>{S.raws.forEach(w=>{let T=this.stringFirst+btoa(JSON.stringify({l:g,i:w.i}));C[0].content=this.commonService.replaceAll(C[0].content,w.l,T)??""}),O.raws.forEach(w=>{let T=this.stringFirst+btoa(JSON.stringify({l:g,i:w.i}));x=this.commonService.replaceAll(x,w.l,T)??""}),E.forEach(w=>{w.d.raws.forEach(T=>{let j=this.stringFirst+btoa(JSON.stringify({l:g,i:T.i}));P[w.i].content=this.commonService.replaceAll(P[w.i].content,T.l,j)??""})}),d.questionContent=JSON.stringify(C),d.answerConfig=JSON.stringify(P),d.answerMedia=x,d.questionText=f,m(d)}).catch(()=>{m(d)}):m(d)})}decodeMathJaxCodeToCdnUrl(d){return new Promise(m=>{const C=new l.n(10);if(C.addTask(this,()=>new Promise(P=>{this.decodeContent(d.content??"").then(x=>{d.content=x,P(!0)}).catch(()=>{P(!1)})})),C.addTask(this,()=>new Promise(P=>{this.decodeContent(d.help??"").then(x=>{d.help=x,P(!0)}).catch(()=>{P(!1)})})),d.answers)for(let P=0;P<d.answers.length;P++)C.addTask(this,()=>new Promise(x=>{d.answers&&this.decodeContent(d.answers[P].content??"").then(f=>{d.answers&&(d.answers[P].content=f),x(!0)}).catch(()=>{x(!1)})}));C.start().then(()=>{m()})})}getValueContentQuestion(d){return this.commonService.castJsonToObj(d)??[]}getAllMatchWithContent(d){let C,m=[];for(;null!==(C=i.searchPattern.exec(d));)m.includes(C[0])||m.push(C[0]);return m}getRawContent(d,m){return d=this.sAztCommonCdnService.getMyCdn(d),new Promise((C,P)=>{const x=this.dataRaws.findIndex(f=>f.l===d);-1===x?fetch(d).then(f=>f.blob()).then(f=>f.arrayBuffer()).then(f=>{const S=r.inflate(f),E=this.commonService.castJsonToObj((new TextDecoder).decode(S));this.dataRaws.push({l:d,d:E??[]}),E&&E[m]?C(E[m]):P(new Error("Not found index"))}).catch(()=>{P(new Error("Exception at feed link"))}):this.dataRaws[x].d&&this.dataRaws[x].d[m]?C(this.dataRaws[x].d[m]):P(new Error("Not found index"))})}uploadRawContent(d){return new Promise((m,C)=>{const P=JSON.stringify(d),x=(new TextEncoder).encode(P),f=r.deflate(x),S=new Blob([f],{type:"application/octet-stream"}),E=new File([S],"question_save_mathtype.gz",{type:"application/octet-stream"});this.apiUploadService.uploadToCdnQuestionRawMathTypeData(E).subscribe(O=>{O.type!=t.hv.UploadProgress&&(1==O.success&&O.data?m(O.data.url??""):C(new Error("lang_auto_khong_upload_duoc_anh_vui_long_thu_lai_sau_loi[SPLIT_PARAM]"+O.message)))})})}removeBase64MathJaxInQuestionContent(d){return this.encodeContent(d).raws.forEach(C=>{d=this.commonService.replaceAll(d,C.l,"")??""}),d}encodeContent(d){let m=this.getAllMatchWithContent(d),C=[];for(let P=0;P<m.length;P++){let f=m[P].replace(i.searchPattern,"$1");f.startsWith(this.stringFirst)||C.push({l:f,i:C.length})}return{content:d,raws:C}}decodeContent(d){var m=this;return(0,e.A)(function*(){let C=m.getAllMatchWithContent(d);for(let P=0;P<C.length;P++){const x=C[P];let f=x.replace(i.searchPattern,"$1");for(let S=0;S<m.stringFirstOld.length;S++)if(f.startsWith(m.stringFirstOld[S])){d=m.commonService.replaceAll(d,x,"")??"";continue}if(f.startsWith(m.stringFirst)){let S=m.commonService.castJsonToObj(atob(f.replace(m.stringFirst,"")));if(S){let E=yield m.getRawContent(S.l,S.i);d=m.commonService.replaceAll(d,f,E)??""}}}return d})()}}return(_=i).searchPattern=/data-azt-math-raw=[\\"']+([^"']+)["']/g,_.\u0275fac=function(d){return new(d||_)(a.KVO(u.R),a.KVO(o.c),a.KVO(s.T))},_.\u0275prov=a.jDH({token:_,factory:_.\u0275fac,providedIn:"root"}),i})()},6625:(A,h,n)=>{n.d(h,{l:()=>x});var e=n(59640),t=n(54460),l=n(10936),a=n(65162),u=n(47348),o=n(44155),s=n(15343),r=n(70050),p=n(5502),_=n(36894),i=n(48891);function c(f,S){if(1&f&&(i.qex(0),i.EFF(1),i.nI1(2,"mytranslate"),i.bVm()),2&f){const E=i.XpG(2);i.R7$(),i.Lme(" ",i.bMT(2,2,"lang_auto_dap_an"),": ",E.questionObj.answerResult.length?E.questionObj.answerResult.join(" | "):""," ")}}function d(f,S){if(1&f&&(i.qex(0),i.j41(1,"span",5),i.EFF(2),i.nI1(3,"mytranslate"),i.k0s(),i.bVm()),2&f){const E=S.$implicit,O=i.XpG(3);i.R7$(2),i.Lme("",E.alpha?E.alpha.toLowerCase():E.key?E.key.toLowerCase():E,") - ",i.bMT(3,2,O.questionObj.answerResult.includes(E.alpha?E.alpha:E.key?E.key:"")?"lang_auto_dung":"lang_auto_sai"),"\xa0")}}function m(f,S){if(1&f&&(i.qex(0),i.EFF(1),i.nI1(2,"mytranslate"),i.DNE(3,d,4,4,"ng-container",4),i.bVm()),2&f){const E=i.XpG(2);i.R7$(),i.SpI(" ",i.bMT(2,2,"lang_auto_dap_an"),": "),i.R7$(2),i.Y8G("ngForOf",E.questionObj.answers)}}function C(f,S){if(1&f&&(i.j41(0,"h2",2),i.DNE(1,c,3,4,"ng-container",3),i.nI1(2,"isTrueFalseAnswer"),i.DNE(3,m,4,4,"ng-container",3),i.nI1(4,"isTrueFalseAnswer"),i.k0s()),2&f){const E=i.XpG();i.R7$(),i.Y8G("ngIf",!i.bMT(2,2,E.questionObj)),i.R7$(2),i.Y8G("ngIf",i.bMT(4,4,E.questionObj))}}function P(f,S){1&f&&(i.j41(0,"h2",2),i.EFF(1),i.nI1(2,"mytranslate"),i.k0s()),2&f&&(i.R7$(),i.SpI(" ",i.bMT(2,1,"lang_auto_tu_luan")," "))}let x=(()=>{var f;class S extends e.H{}return(f=S).\u0275fac=(()=>{let E;return function(y){return(E||(E=i.xGo(f)))(y||f)}})(),f.\u0275cmp=i.VBU({type:f,selectors:[["azt-question-answer-view-with-simple-result-box-for-teacher"]],inputs:{questionObj:"questionObj"},standalone:!0,features:[i.Vt3,i.aNF],decls:4,vars:4,consts:[["essayAnswer",""],["class","font-medium text-md text-left text-success mt-3",4,"ngIf","ngIfElse"],[1,"font-medium","text-md","text-left","text-success","mt-3"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"lalala","ml-1"]],template:function(O,y){if(1&O&&(i.DNE(0,C,5,6,"h2",1),i.nI1(1,"isEssayAnswer"),i.DNE(2,P,3,3,"ng-template",null,0,i.C5r)),2&O){const D=i.sdS(3);i.Y8G("ngIf",y.questionObj.answerResult&&!i.bMT(1,2,y.questionObj))("ngIfElse",D)}},dependencies:[t.MD,t.Sq,t.bT,l.X1,a.iI,l.YN,u.wp,o.s,s.flO,r.L,u.Zm,u.FC,p.Id,_.k],styles:['.pr-7[_ngcontent-%COMP%]{padding-right:28px}.w-38px[_ngcontent-%COMP%]{width:38px}.remove-grid[_ngcontent-%COMP%]{display:block!important}.question-standalone-loader-box[_ngcontent-%COMP%]{min-height:50px}  .skeleton-box-loading{width:100%;height:30px;max-width:100%;margin-bottom:5px;display:inline-block}  .skeleton-box-loading:after{position:absolute;top:0;right:0;bottom:0;left:0;transform:translate(-100%);animation:_ngcontent-%COMP%_shimmer 2s infinite;content:""}.question-standalone-box[_ngcontent-%COMP%]{margin-bottom:30px;display:block;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);border-radius:.375rem}.question-standalone-container[_ngcontent-%COMP%]{padding:15px}.question-standalone-for-test-finder[_ngcontent-%COMP%]{border:none;margin-bottom:0;padding:0}.question-standalone-for-test-finder[_ngcontent-%COMP%]   .question-standalone-main-content[_ngcontent-%COMP%]{padding:15px;border:1px solid rgb(228,228,228)}.group-of-question-standalone-for-test-finder[_ngcontent-%COMP%]{padding:15px!important;border:1px solid rgb(228,228,228)!important}.question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid #2262ae!important;outline:3px solid rgba(125,160,201,.65)!important}.group-of-question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid green!important;outline:3px solid rgba(0,193,0,.321)!important}.question-standalone-label[_ngcontent-%COMP%]{font-weight:700}.question-standalone-content-box[_ngcontent-%COMP%]{position:relative}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]{color:#f44336;position:relative;padding-left:20px;display:flex;align-items:center}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]:before{content:"!";position:absolute;left:0;color:#fff;background:#f44336;width:15px;height:15px;text-align:center;border-radius:50%;font-size:smaller;display:flex;justify-content:center;align-items:center}.question-standalone-step-container-box[_ngcontent-%COMP%]{margin-bottom:50px}.group-content-of-question-standalone[_ngcontent-%COMP%]{margin-bottom:10px;font-weight:700}.answer[_ngcontent-%COMP%]{display:flex;align-items:center}.answer-label[_ngcontent-%COMP%]{width:20px;height:30px;min-width:20px;min-height:30px;display:flex;align-items:center;justify-content:flex-start;border-radius:50%;border-width:2px;border-style:solid;border-color:transparent}.answer-box[_ngcontent-%COMP%]{border-radius:0 0 3px 3px;padding:8px 20px;justify-content:space-between;align-items:center}.selected-answer[_ngcontent-%COMP%]{background-color:#f39c12;color:#fff}.answer-content-front[_ngcontent-%COMP%]{display:flex!important;flex-wrap:wrap;width:calc(100% - 30px)}.explainTxt[_ngcontent-%COMP%]{width:125px;font-weight:500;display:flex;align-items:center}#examHeader[_ngcontent-%COMP%]{display:block;border:1px solid #e7e7e7;border-radius:3px;overflow:hidden}.arrow_btn[_ngcontent-%COMP%]{font-size:20px;vertical-align:middle;width:20px;height:20px;color:#fff;margin-left:auto!important;margin-right:auto!important;-webkit-user-select:none;user-select:none}.bottom_action[_ngcontent-%COMP%]{position:fixed;padding:15px;bottom:0;left:0;background:#312e2e;color:#fff;width:100%}.bottom_action[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]{display:block}.btn-ans-result[_ngcontent-%COMP%]{color:#fff;background-color:#f39c12}.show-list[_ngcontent-%COMP%]{max-width:200px}.show-list[_ngcontent-%COMP%]   .show-sheet[_ngcontent-%COMP%]   .listli[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:27px;height:27px;border-radius:50%;border:1px solid #347da5;display:flex;align-items:center;color:#fff;justify-content:center;font-size:12px;cursor:pointer;-webkit-user-select:none;user-select:none}.top_action[_ngcontent-%COMP%]{position:fixed;padding:10px;top:0;left:0;background:#312e2e;color:#fff;width:100%}.scrollSheetMobile[_ngcontent-%COMP%]{max-height:200px;overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.scrollSheetMobile[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.notify-badge[_ngcontent-%COMP%]{position:absolute;right:3px;top:3px;text-align:center;color:#afafaf;padding:0;font-size:20px;cursor:pointer}.attach-container[_ngcontent-%COMP%]{background:#fff;padding:10px 0 0;border-radius:5px;width:83.33%;border:1px solid #e8e8e8}.answer-review[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:50%;border:1px solid rgb(52,125,165);display:flex;align-items:center;color:#fff;justify-content:center;font-size:15px;-webkit-user-select:none;user-select:none}.border-none[_ngcontent-%COMP%]{border:none!important}.bg-question[_ngcontent-%COMP%]{margin-top:15px;padding:15px 10px;background:#fff}.question-pending-part[_ngcontent-%COMP%]{width:100%;height:50px}.pencil-edit[_ngcontent-%COMP%]{position:absolute;top:-5px;right:-5px;width:30px;height:30px;border-radius:50%;text-align:center;background:#a9a9a9;z-index:9999}.pencil-edit[_ngcontent-%COMP%]   .lucide[_ngcontent-%COMP%]{color:#fff;stroke-width:2.5px;height:29px}.margin-question-bar[_ngcontent-%COMP%]{margin-top:calc(3rem + 40px)!important}.sheet-screen[_ngcontent-%COMP%]{max-height:calc(100vh - 140px);overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.sheet-screen[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.box-help[_ngcontent-%COMP%]{border-top:1px solid #d7d7d7;padding:10px 30px 0 0}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]{text-align:center;font-size:11px;margin-top:-20px}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#fff;padding:0 10px;color:#d58e0b}.box-help[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]{font-size:13px;overflow-x:auto;overflow-y:hidden}  .layout{display:grid;margin:20px 0;grid-row-gap:20px}  .layout-4{grid-template-columns:1fr 1fr 1fr 1fr}  .layout-2{grid-template-columns:1fr 1fr}  .layout-1{grid-template-columns:1fr}  .question-standalone-content-box{max-width:100%;overflow-x:auto;overflow-y:hidden}  #boxContentQuestion .question-standalone-container{max-width:800px}@keyframes _ngcontent-%COMP%_shimmer{to{transform:translate(100%)}}@media (max-width: 768px){.answer-content-front[_ngcontent-%COMP%]{justify-content:center}.btn-ans-result[_ngcontent-%COMP%]{margin-right:auto!important}}@media (max-width: 800px){  #boxContentQuestion .question-standalone-container{max-width:calc(90vw - 16px)!important}}']}),S})()},64486:(A,h,n)=>{n.d(h,{I:()=>d});var e=n(48891),t=n(59640),l=n(50622),a=n(10933),u=n(54460),o=n(10936),s=n(65162),r=n(44155),p=n(15343),_=n(70050),i=n(5502),c=n(36894);let d=(()=>{var m;class C extends t.H{constructor(){super(...arguments),this.questionRenderService=(0,e.WQX)(a.g),this.sAztAnswerTrueFalseService=(0,e.WQX)(l.j),this.isDestroyed=!1,this.isInitData=!1}startRenderQuestion(x){if(this.renderConfigObj.disableRender)return this.emitHaveRended(void 0);x&&!this.renderConfigObj.isFirstRender||(x&&this.renderConfigObj.isFirstRender&&(this.renderConfigObj.isFirstRender=!1,this.followerRender.doneItemPartQuest()),this.questionRenderService.parseRenderQuestion(this.baseQuestionObj,this.renderConfigObj.configRenderService).then(()=>{this.baseQuestionObj.answersOrigin=this.sAztAnswerTrueFalseService.checkLabelArrOriginOrMix(this.baseQuestionObj.answers,!0),this.emitHaveRended(void 0)}).catch(f=>{this.emitHaveRended(f.message)}))}emitHaveRended(x){if(!this.isDestroyed&&x)return this.showErrorSnack(x)}initData(x,f,S){this.renderConfigObj=x,this.followerRender=f,this.baseQuestionObj=S,this.isInitData=!0}reRenderContent(){this.isInitData&&this.startRenderQuestion(!1)}ngDoCheck(){if(!this.isInitData||this.renderConfigObj.isRenderElement)return;let x=document.getElementById("question_render_element_"+this.baseQuestionObj.id);if(!x)return;let f=x.getAttribute("start_loading");(this.renderConfigObj.disableLazy||f&&"true"==f)&&(this.renderConfigObj.isRenderElement||(this.startRenderQuestion(!0),this.renderConfigObj.isRenderElement=!0))}ngOnDestroy(){this.isDestroyed=!0,super.ngOnDestroy()}}return(m=C).\u0275fac=(()=>{let P;return function(f){return(P||(P=e.xGo(m)))(f||m)}})(),m.\u0275cmp=e.VBU({type:m,selectors:[["ng-component"]],standalone:!0,features:[e.Vt3,e.aNF],decls:0,vars:0,template:function(x,f){},dependencies:[u.MD,o.X1,s.iI,o.YN,r.s,p.flO,_.L,i.Id,c.k],encapsulation:2}),C})()},66793:(A,h,n)=>{n.d(h,{C:()=>t});var e=n(65106);class t{constructor(a,u,o){this.mathJaxImage=!1,this.disableLazy=!1,this.disableRender=!1,this.isFirstRender=!0,this.isRenderElement=!1,this.configRenderService=new e.y,this.disableLazy=a,this.disableRender=u,this.mathJaxImage=o,this.mathJaxImage&&this.configRenderService.setMaxJaxRenderMode("svg")}}},54313:(A,h,n)=>{n.d(h,{$:()=>m});var e=n(59640),t=n(9570),l=n(54460),a=n(10936),u=n(65162),o=n(44155),s=n(15343),r=n(70050),p=n(5502),_=n(36894),i=n(48891),c=n(47348);function d(C,P){if(1&C&&(i.qex(0),i.nrm(1,"azt-dynamic-hook",1),i.bVm()),2&C){let x;const f=i.XpG();i.R7$(),i.Y8G("content",null!==(x=f.questionObj.content)&&void 0!==x?x:"")}}let m=(()=>{var C;class P extends e.H{}return(C=P).\u0275fac=(()=>{let x;return function(S){return(x||(x=i.xGo(C)))(S||C)}})(),C.\u0275cmp=i.VBU({type:C,selectors:[["azt-question-content-box"]],inputs:{examObj:"examObj",questionObj:"questionObj",renderConfigObj:"renderConfigObj"},standalone:!0,features:[i.Vt3,i.aNF],decls:2,vars:3,consts:[[4,"ngIf"],[3,"content"]],template:function(f,S){1&f&&(i.DNE(0,d,2,1,"ng-container",0),i.nI1(1,"isOfflineExam")),2&f&&i.Y8G("ngIf",!i.bMT(1,1,S.examObj))},dependencies:[t.x,l.MD,l.bT,a.X1,u.iI,a.YN,o.s,s.flO,r.L,c.st,p.Id,_.k],styles:['.pr-7[_ngcontent-%COMP%]{padding-right:28px}.w-38px[_ngcontent-%COMP%]{width:38px}.remove-grid[_ngcontent-%COMP%]{display:block!important}.question-standalone-loader-box[_ngcontent-%COMP%]{min-height:50px}  .skeleton-box-loading{width:100%;height:30px;max-width:100%;margin-bottom:5px;display:inline-block}  .skeleton-box-loading:after{position:absolute;top:0;right:0;bottom:0;left:0;transform:translate(-100%);animation:_ngcontent-%COMP%_shimmer 2s infinite;content:""}.question-standalone-box[_ngcontent-%COMP%]{margin-bottom:30px;display:block;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);border-radius:.375rem}.question-standalone-container[_ngcontent-%COMP%]{padding:15px}.question-standalone-for-test-finder[_ngcontent-%COMP%]{border:none;margin-bottom:0;padding:0}.question-standalone-for-test-finder[_ngcontent-%COMP%]   .question-standalone-main-content[_ngcontent-%COMP%]{padding:15px;border:1px solid rgb(228,228,228)}.group-of-question-standalone-for-test-finder[_ngcontent-%COMP%]{padding:15px!important;border:1px solid rgb(228,228,228)!important}.question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid #2262ae!important;outline:3px solid rgba(125,160,201,.65)!important}.group-of-question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid green!important;outline:3px solid rgba(0,193,0,.321)!important}.question-standalone-label[_ngcontent-%COMP%]{font-weight:700}.question-standalone-content-box[_ngcontent-%COMP%]{position:relative}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]{color:#f44336;position:relative;padding-left:20px;display:flex;align-items:center}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]:before{content:"!";position:absolute;left:0;color:#fff;background:#f44336;width:15px;height:15px;text-align:center;border-radius:50%;font-size:smaller;display:flex;justify-content:center;align-items:center}.question-standalone-step-container-box[_ngcontent-%COMP%]{margin-bottom:50px}.group-content-of-question-standalone[_ngcontent-%COMP%]{margin-bottom:10px;font-weight:700}.answer[_ngcontent-%COMP%]{display:flex;align-items:center}.answer-label[_ngcontent-%COMP%]{width:20px;height:30px;min-width:20px;min-height:30px;display:flex;align-items:center;justify-content:flex-start;border-radius:50%;border-width:2px;border-style:solid;border-color:transparent}.answer-box[_ngcontent-%COMP%]{border-radius:0 0 3px 3px;padding:8px 20px;justify-content:space-between;align-items:center}.selected-answer[_ngcontent-%COMP%]{background-color:#f39c12;color:#fff}.answer-content-front[_ngcontent-%COMP%]{display:flex!important;flex-wrap:wrap;width:calc(100% - 30px)}.explainTxt[_ngcontent-%COMP%]{width:125px;font-weight:500;display:flex;align-items:center}#examHeader[_ngcontent-%COMP%]{display:block;border:1px solid #e7e7e7;border-radius:3px;overflow:hidden}.arrow_btn[_ngcontent-%COMP%]{font-size:20px;vertical-align:middle;width:20px;height:20px;color:#fff;margin-left:auto!important;margin-right:auto!important;-webkit-user-select:none;user-select:none}.bottom_action[_ngcontent-%COMP%]{position:fixed;padding:15px;bottom:0;left:0;background:#312e2e;color:#fff;width:100%}.bottom_action[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]{display:block}.btn-ans-result[_ngcontent-%COMP%]{color:#fff;background-color:#f39c12}.show-list[_ngcontent-%COMP%]{max-width:200px}.show-list[_ngcontent-%COMP%]   .show-sheet[_ngcontent-%COMP%]   .listli[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:27px;height:27px;border-radius:50%;border:1px solid #347da5;display:flex;align-items:center;color:#fff;justify-content:center;font-size:12px;cursor:pointer;-webkit-user-select:none;user-select:none}.top_action[_ngcontent-%COMP%]{position:fixed;padding:10px;top:0;left:0;background:#312e2e;color:#fff;width:100%}.scrollSheetMobile[_ngcontent-%COMP%]{max-height:200px;overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.scrollSheetMobile[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.notify-badge[_ngcontent-%COMP%]{position:absolute;right:3px;top:3px;text-align:center;color:#afafaf;padding:0;font-size:20px;cursor:pointer}.attach-container[_ngcontent-%COMP%]{background:#fff;padding:10px 0 0;border-radius:5px;width:83.33%;border:1px solid #e8e8e8}.answer-review[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:50%;border:1px solid rgb(52,125,165);display:flex;align-items:center;color:#fff;justify-content:center;font-size:15px;-webkit-user-select:none;user-select:none}.border-none[_ngcontent-%COMP%]{border:none!important}.bg-question[_ngcontent-%COMP%]{margin-top:15px;padding:15px 10px;background:#fff}.question-pending-part[_ngcontent-%COMP%]{width:100%;height:50px}.pencil-edit[_ngcontent-%COMP%]{position:absolute;top:-5px;right:-5px;width:30px;height:30px;border-radius:50%;text-align:center;background:#a9a9a9;z-index:9999}.pencil-edit[_ngcontent-%COMP%]   .lucide[_ngcontent-%COMP%]{color:#fff;stroke-width:2.5px;height:29px}.margin-question-bar[_ngcontent-%COMP%]{margin-top:calc(3rem + 40px)!important}.sheet-screen[_ngcontent-%COMP%]{max-height:calc(100vh - 140px);overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.sheet-screen[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.box-help[_ngcontent-%COMP%]{border-top:1px solid #d7d7d7;padding:10px 30px 0 0}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]{text-align:center;font-size:11px;margin-top:-20px}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#fff;padding:0 10px;color:#d58e0b}.box-help[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]{font-size:13px;overflow-x:auto;overflow-y:hidden}  .layout{display:grid;margin:20px 0;grid-row-gap:20px}  .layout-4{grid-template-columns:1fr 1fr 1fr 1fr}  .layout-2{grid-template-columns:1fr 1fr}  .layout-1{grid-template-columns:1fr}  .question-standalone-content-box{max-width:100%;overflow-x:auto;overflow-y:hidden}  #boxContentQuestion .question-standalone-container{max-width:800px}@keyframes _ngcontent-%COMP%_shimmer{to{transform:translate(100%)}}@media (max-width: 768px){.answer-content-front[_ngcontent-%COMP%]{justify-content:center}.btn-ans-result[_ngcontent-%COMP%]{margin-right:auto!important}}@media (max-width: 800px){  #boxContentQuestion .question-standalone-container{max-width:calc(90vw - 16px)!important}}']}),P})()},58447:(A,h,n)=>{n.d(h,{y:()=>E});var e=n(48891),t=n(59640),l=n(9570),a=n(54460),u=n(10936),o=n(65162),s=n(47348),r=n(44155),p=n(15343),_=n(70050),i=n(5502),c=n(36894),d=n(37922),m=n(47712);const C=(O,y,D,g)=>({"box p-4 mt-5":O,"group-of-question-standalone-for-test-finder":y,"group-of-question-standalone-has-selected":D,clickable:g});function P(O,y){1&O&&(e.j41(0,"div",7),e.nI1(1,"mytranslate"),e.nrm(2,"lucide-icon",8),e.k0s()),2&O&&e.FS9("matTooltip",e.bMT(1,1,"lang_auto_nhom_cau_hoi_duoc_co_dinh"))}function x(O,y){if(1&O){const D=e.RV6();e.j41(0,"button",9),e.nI1(1,"mytranslate"),e.bIt("click",function(){e.eBV(D);const w=e.XpG(3);return e.Njj(w.editGroupQ())}),e.nrm(2,"lucide-icon",10),e.k0s()}2&O&&e.FS9("matTooltip",e.bMT(1,1,"lang_testbank_folder_and_file_edit"))}function f(O,y){if(1&O&&(e.j41(0,"div",4)(1,"div"),e.DNE(2,P,3,3,"div",5),e.k0s(),e.DNE(3,x,3,3,"button",6),e.k0s()),2&O){const D=e.XpG(2);e.R7$(2),e.Y8G("ngIf",null==D.questionObj.groupInfo?null:D.questionObj.groupInfo.isFixGroup),e.R7$(),e.Y8G("ngIf",!D.questionObj.isPdf)}}function S(O,y){if(1&O){const D=e.RV6();e.j41(0,"div",1),e.bIt("click",function(){let w;e.eBV(D);const T=e.XpG();return e.Njj(T.handleClickGroup(null!==(w=null==T.questionObj.groupInfo?null:T.questionObj.groupInfo.groupId)&&void 0!==w?w:-1))}),e.DNE(1,f,4,2,"div",2),e.nrm(2,"azt-dynamic-hook",3),e.k0s()}if(2&O){let D,g;const w=e.XpG();e.Y8G("ngClass",e.ziG(3,C,w.editGroup.observers.length,w.isTestFinderModule,!!w.questionGroupIdsSelected.includes(null!==(D=null==w.questionObj.groupInfo?null:w.questionObj.groupInfo.groupId)&&void 0!==D?D:-1),w.isTestFinderModule)),e.R7$(),e.Y8G("ngIf",w.questionObj.isRoleTeacher&&w.editGroup.observers.length),e.R7$(),e.Y8G("content",null!==(g=null==w.questionObj.groupInfo?null:w.questionObj.groupInfo.groupContent)&&void 0!==g?g:"")}}let E=(()=>{var O;class y extends t.H{handleClickGroup(g){this.isTestFinderModule&&this.testFinderSupportService.sendQuestionGroupSelectedEvent(g)}editGroupQ(){this.editGroup.emit()}constructor(g){super(),this.testFinderSupportService=g,this.isTestFinderModule=!1,this.questionGroupIdsSelected=[],this.editGroup=new e.bkB}}return(O=y).\u0275fac=function(g){return new(g||O)(e.rXU(d.r))},O.\u0275cmp=e.VBU({type:O,selectors:[["azt-question-group-content-box"]],inputs:{examObj:"examObj",questionObj:"questionObj",renderConfigObj:"renderConfigObj",isTestFinderModule:"isTestFinderModule",questionGroupIdsSelected:"questionGroupIdsSelected"},outputs:{editGroup:"editGroup"},standalone:!0,features:[e.Vt3,e.aNF],decls:1,vars:1,consts:[["azt-track-service","question-group-content-box-XAFpO2hJ5","class","group-content-of-question-standalone",3,"ngClass","click",4,"ngIf"],["azt-track-service","question-group-content-box-XAFpO2hJ5",1,"group-content-of-question-standalone",3,"click","ngClass"],["class","flex justify-between","style","margin: -13px -13px -5px; min-height: 25px",4,"ngIf"],[3,"content"],[1,"flex","justify-between",2,"margin","-13px -13px -5px","min-height","25px"],["style","margin: 2px",3,"matTooltip",4,"ngIf"],["azt-track-service","question-group-content-box-boGVnlJxMf","class","btn btn-sm btn-Light edit-question-header-content",3,"matTooltip","click",4,"ngIf"],[2,"margin","2px",3,"matTooltip"],["name","pin","size","16"],["azt-track-service","question-group-content-box-boGVnlJxMf",1,"btn","btn-sm","btn-Light","edit-question-header-content",3,"click","matTooltip"],["name","file-pen","size","16"]],template:function(g,w){1&g&&e.DNE(0,S,3,8,"div",0),2&g&&e.Y8G("ngIf",(null==w.questionObj.groupInfo?null:w.questionObj.groupInfo.isFirstInGroup)&&(!w.examObj.hideGroupQuestion||w.questionObj.isRoleTeacher))},dependencies:[l.x,a.MD,a.YU,a.bT,u.X1,o.iI,u.YN,s.wp,r.s,m.oV,p.flO,p.WGl,_.L,i.Id,c.k],styles:['.pr-7[_ngcontent-%COMP%]{padding-right:28px}.w-38px[_ngcontent-%COMP%]{width:38px}.remove-grid[_ngcontent-%COMP%]{display:block!important}.question-standalone-loader-box[_ngcontent-%COMP%]{min-height:50px}  .skeleton-box-loading{width:100%;height:30px;max-width:100%;margin-bottom:5px;display:inline-block}  .skeleton-box-loading:after{position:absolute;top:0;right:0;bottom:0;left:0;transform:translate(-100%);animation:_ngcontent-%COMP%_shimmer 2s infinite;content:""}.question-standalone-box[_ngcontent-%COMP%]{margin-bottom:30px;display:block;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);border-radius:.375rem}.question-standalone-container[_ngcontent-%COMP%]{padding:15px}.question-standalone-for-test-finder[_ngcontent-%COMP%]{border:none;margin-bottom:0;padding:0}.question-standalone-for-test-finder[_ngcontent-%COMP%]   .question-standalone-main-content[_ngcontent-%COMP%]{padding:15px;border:1px solid rgb(228,228,228)}.group-of-question-standalone-for-test-finder[_ngcontent-%COMP%]{padding:15px!important;border:1px solid rgb(228,228,228)!important}.question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid #2262ae!important;outline:3px solid rgba(125,160,201,.65)!important}.group-of-question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid green!important;outline:3px solid rgba(0,193,0,.321)!important}.question-standalone-label[_ngcontent-%COMP%]{font-weight:700}.question-standalone-content-box[_ngcontent-%COMP%]{position:relative}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]{color:#f44336;position:relative;padding-left:20px;display:flex;align-items:center}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]:before{content:"!";position:absolute;left:0;color:#fff;background:#f44336;width:15px;height:15px;text-align:center;border-radius:50%;font-size:smaller;display:flex;justify-content:center;align-items:center}.question-standalone-step-container-box[_ngcontent-%COMP%]{margin-bottom:50px}.group-content-of-question-standalone[_ngcontent-%COMP%]{margin-bottom:10px;font-weight:700}.answer[_ngcontent-%COMP%]{display:flex;align-items:center}.answer-label[_ngcontent-%COMP%]{width:20px;height:30px;min-width:20px;min-height:30px;display:flex;align-items:center;justify-content:flex-start;border-radius:50%;border-width:2px;border-style:solid;border-color:transparent}.answer-box[_ngcontent-%COMP%]{border-radius:0 0 3px 3px;padding:8px 20px;justify-content:space-between;align-items:center}.selected-answer[_ngcontent-%COMP%]{background-color:#f39c12;color:#fff}.answer-content-front[_ngcontent-%COMP%]{display:flex!important;flex-wrap:wrap;width:calc(100% - 30px)}.explainTxt[_ngcontent-%COMP%]{width:125px;font-weight:500;display:flex;align-items:center}#examHeader[_ngcontent-%COMP%]{display:block;border:1px solid #e7e7e7;border-radius:3px;overflow:hidden}.arrow_btn[_ngcontent-%COMP%]{font-size:20px;vertical-align:middle;width:20px;height:20px;color:#fff;margin-left:auto!important;margin-right:auto!important;-webkit-user-select:none;user-select:none}.bottom_action[_ngcontent-%COMP%]{position:fixed;padding:15px;bottom:0;left:0;background:#312e2e;color:#fff;width:100%}.bottom_action[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]{display:block}.btn-ans-result[_ngcontent-%COMP%]{color:#fff;background-color:#f39c12}.show-list[_ngcontent-%COMP%]{max-width:200px}.show-list[_ngcontent-%COMP%]   .show-sheet[_ngcontent-%COMP%]   .listli[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:27px;height:27px;border-radius:50%;border:1px solid #347da5;display:flex;align-items:center;color:#fff;justify-content:center;font-size:12px;cursor:pointer;-webkit-user-select:none;user-select:none}.top_action[_ngcontent-%COMP%]{position:fixed;padding:10px;top:0;left:0;background:#312e2e;color:#fff;width:100%}.scrollSheetMobile[_ngcontent-%COMP%]{max-height:200px;overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.scrollSheetMobile[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.notify-badge[_ngcontent-%COMP%]{position:absolute;right:3px;top:3px;text-align:center;color:#afafaf;padding:0;font-size:20px;cursor:pointer}.attach-container[_ngcontent-%COMP%]{background:#fff;padding:10px 0 0;border-radius:5px;width:83.33%;border:1px solid #e8e8e8}.answer-review[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:50%;border:1px solid rgb(52,125,165);display:flex;align-items:center;color:#fff;justify-content:center;font-size:15px;-webkit-user-select:none;user-select:none}.border-none[_ngcontent-%COMP%]{border:none!important}.bg-question[_ngcontent-%COMP%]{margin-top:15px;padding:15px 10px;background:#fff}.question-pending-part[_ngcontent-%COMP%]{width:100%;height:50px}.pencil-edit[_ngcontent-%COMP%]{position:absolute;top:-5px;right:-5px;width:30px;height:30px;border-radius:50%;text-align:center;background:#a9a9a9;z-index:9999}.pencil-edit[_ngcontent-%COMP%]   .lucide[_ngcontent-%COMP%]{color:#fff;stroke-width:2.5px;height:29px}.margin-question-bar[_ngcontent-%COMP%]{margin-top:calc(3rem + 40px)!important}.sheet-screen[_ngcontent-%COMP%]{max-height:calc(100vh - 140px);overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.sheet-screen[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.box-help[_ngcontent-%COMP%]{border-top:1px solid #d7d7d7;padding:10px 30px 0 0}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]{text-align:center;font-size:11px;margin-top:-20px}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#fff;padding:0 10px;color:#d58e0b}.box-help[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]{font-size:13px;overflow-x:auto;overflow-y:hidden}  .layout{display:grid;margin:20px 0;grid-row-gap:20px}  .layout-4{grid-template-columns:1fr 1fr 1fr 1fr}  .layout-2{grid-template-columns:1fr 1fr}  .layout-1{grid-template-columns:1fr}  .question-standalone-content-box{max-width:100%;overflow-x:auto;overflow-y:hidden}  #boxContentQuestion .question-standalone-container{max-width:800px}@keyframes _ngcontent-%COMP%_shimmer{to{transform:translate(100%)}}@media (max-width: 768px){.answer-content-front[_ngcontent-%COMP%]{justify-content:center}.btn-ans-result[_ngcontent-%COMP%]{margin-right:auto!important}}@media (max-width: 800px){  #boxContentQuestion .question-standalone-container{max-width:calc(90vw - 16px)!important}}']}),y})()},78111:(A,h,n)=>{n.d(h,{e:()=>e});class e{constructor(){this.totalQuestionRender=0,this.numFollow={renderDone:{num:0,isRun:!1},firstDone:{num:0,isRun:!1},startDone:{num:0,isRun:!1}}}checker(){this.totalQuestionRender===this.numFollow.renderDone.num&&!this.numFollow.renderDone.isRun&&(this.numFollow.renderDone.isRun=!0),this.totalQuestionRender===this.numFollow.firstDone.num&&!this.numFollow.firstDone.isRun&&(this.numFollow.firstDone.isRun=!0)}setNumQuest(l){this.totalQuestionRender=l}doneItemPartQuest(){this.numFollow.firstDone.num++,this.checker()}}},94329:(A,h,n)=>{n.d(h,{J:()=>l,h:()=>t});var e=n(14608);class t{initService(){const u=new e.I(this.sAztCommonCdnService,this.commonService,(o,s)=>{this.callbackPushImage&&this.caller&&this.callbackPushImage.call(this.caller,o,s)},o=>{this.callbackFall&&this.caller&&this.callbackFall.call(this.caller,o)});u.isCropImage=this.configRenderService.getIsCropImage(),this.services.push(u)}render(u,o){return this.services.forEach(s=>{u=s.render(u??"",[],void 0,o)}),u??""}constructor(u,o,s,r){this.sAztCommonCdnService=u,this.commonService=o,this.configRenderService=s,this.callbackFall=r,this.services=[],this.initService()}}class l{constructor(u,o,s,r){this.type=u,this.data=o,this.message=s,this.questionNumber=r}}},10933:(A,h,n)=>{n.d(h,{g:()=>r});var e=n(65106),t=n(5382),l=n(94329),a=n(48891),u=n(58112),o=n(44172),s=n(76671);let r=(()=>{var p;class _{parseRenderQuestions(c,d,m,C,P,x){return new Promise((f,S)=>{const O=new t.n(25,{function:(y,D)=>{d&&d(y/D*100)}},C??1e3);c.forEach(y=>{O.addTask(this,this.parseRenderQuestion,[y,m,P,x])}),O.start().then(y=>{if(y.errs.length>0){const D=[];y.errs.forEach(g=>{let w=D.find(T=>T.type===g.type);w||D.push(g),w?.data.concat(g.data)}),S(D)}else f(c)})})}parseRenderQuestion(c,d,m,C){return new Promise((P,x)=>{var f=new l.h(this.sAztCommonCdnService,this.commonService,d||new e.y,O=>{x(O)});f.callbackPushImage=(O,y)=>{this.pushImage(O,y,c)},f.caller=this;const E=new t.n(C?1:20,void 0,0);c.content&&E.addTask(this,()=>new Promise(O=>{c.content=f.render(this.commonService.removeBracket(c.content??""),()=>{O()})})),c.answers&&c.answers.forEach(O=>{E.addTask(this,()=>new Promise(y=>{O.content=f.render(O.content||"",()=>{y()})}))}),c.help&&E.addTask(this,()=>new Promise(O=>{c.help=f.render(c.help,()=>{O()})})),c.groupInfo&&c.groupInfo.groupContent&&E.addTask(this,()=>new Promise(O=>{c.groupInfo&&c.groupInfo.groupContent?c.groupInfo.groupContent=f.render(this.commonService.removeBracket(c.groupInfo.groupContent),()=>{O()}):O()})),m&&E.addTask(this,()=>new Promise(O=>{this.dataAztMathRawHelper.decodeMathJaxCodeToCdnUrl(c).then(()=>{O()})})),E.start().then(O=>{O.errs.length||P()})})}pushImage(c,d,m){if(!m)return;let C=new RegExp("<div id='"+c+"'[^>]+></div>","g");m.content&&(m.content=m.content.replace(C,d??"")),m.answers&&m.answers.forEach(P=>P.content=P.content?.replace(C,d??"")),m.help&&(m.help=m.help.replace(C,d??"")),m.groupInfo&&m.groupInfo.groupContent&&(m.groupInfo.groupContent=m.groupInfo.groupContent.replace(C,d??""))}constructor(c,d,m){this.sAztCommonCdnService=c,this.commonService=d,this.dataAztMathRawHelper=m}}return(p=_).\u0275fac=function(c){return new(c||p)(a.KVO(u.c),a.KVO(o.R),a.KVO(s.c))},p.\u0275prov=a.jDH({token:p,factory:p.\u0275fac,providedIn:"root"}),_})()},37922:(A,h,n)=>{n.d(h,{r:()=>l});var e=n(18447),t=n(48891);let l=(()=>{var a;class u{constructor(){this.questionSelectedEvent=new e.B,this.questionGroupSelectedEvent=new e.B}listenQuestionSelectedEvent(){return this.questionSelectedEvent}listenQuestionGroupSelectedEvent(){return this.questionGroupSelectedEvent}sendQuestionSelectedEvent(s){this.questionSelectedEvent.next(s)}sendQuestionGroupSelectedEvent(s){this.questionGroupSelectedEvent.next(s)}}return(a=u).\u0275fac=function(s){return new(s||a)},a.\u0275prov=t.jDH({token:a,factory:a.\u0275fac,providedIn:"root"}),u})()},60780:(A,h,n)=>{n.d(h,{c:()=>D});var e=n(48891),t=n(59640),l=n(54460),a=n(10936),u=n(65162),o=n(47348),s=n(44155),r=n(15343),p=n(70050),_=n(5502),i=n(36894),c=n(44172),d=n(47712);const m=()=>({"mr-1":!0});function C(g,w){1&g&&(e.j41(0,"span",9),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&g&&(e.R7$(),e.SpI("\xa0",e.bMT(2,1,"lang_auto_het_luot"),""))}function P(g,w){if(1&g){const T=e.RV6();e.j41(0,"lucide-icon",15),e.nI1(1,"mytranslate"),e.bIt("click",function(){let L;e.eBV(T);const k=e.XpG().$implicit,G=e.XpG(4);return e.Njj(G.playAudio(G.questionObj.id,null!==(L=k.index)&&void 0!==L?L:0))}),e.k0s()}2&g&&e.FS9("matTooltip",e.bMT(1,1,"lang_auto_bat_dau_audio"))}function x(g,w){if(1&g){const T=e.RV6();e.j41(0,"span",10),e.DNE(1,P,2,3,"lucide-icon",11),e.j41(2,"lucide-icon",12),e.nI1(3,"mytranslate"),e.bIt("click",function(){let L;const k=e.eBV(T).$implicit,G=e.XpG(4);return e.Njj(G.stopAudio(G.questionObj.id,null!==(L=k.index)&&void 0!==L?L:0))}),e.k0s(),e.j41(4,"audio",13),e.nrm(5,"source",14),e.nI1(6,"mycdn"),e.nI1(7,"safe"),e.k0s()()}if(2&g){let T;const j=w.$implicit,L=e.XpG(4);e.Y8G("hidden",!j.status),e.R7$(),e.Y8G("ngIf",!L.checkAudioPlay(L.questionObj.id,null!==(T=j.index)&&void 0!==T?T:0)),e.R7$(),e.FS9("matTooltip",e.bMT(3,6,"lang_auto_ket_thuc")),e.Y8G("ngClass",e.lJ4(12,m)),e.R7$(2),e.FS9("id",L.isShowList?"audio_list_"+L.questionObj.id+"_"+j.index:"audio_unit_"+L.questionObj.id+"_"+j.index),e.R7$(),e.Y8G("src",e.bMT(7,10,e.bMT(6,8,L.questionObj.attachments[0].url)),e.B4B)}}function f(g,w){if(1&g&&(e.j41(0,"div",5)(1,"span",6),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.DNE(4,C,3,3,"span",7)(5,x,8,13,"ng-template",8),e.k0s()),2&g){const T=e.XpG(3);e.R7$(2),e.SpI("",e.bMT(3,3,"lang_auto_so_luot_nghe"),": "),e.R7$(2),e.Y8G("ngIf",T.questionObj.limitAudio==T.totalLimit),e.R7$(),e.Y8G("ngForOf",T.questionObj.audioLimitObjs)}}function S(g,w){if(1&g&&(e.j41(0,"div",3),e.DNE(1,f,6,5,"div",4),e.k0s()),2&g){const T=e.XpG(2);e.R7$(),e.Y8G("ngIf",(null!=T.questionObj.limitAudio?T.questionObj.limitAudio:T.totalLimit+1)<=T.totalLimit)}}function E(g,w){if(1&g&&(e.j41(0,"div"),e.DNE(1,S,2,1,"div",2),e.k0s()),2&g){const T=e.XpG();e.R7$(),e.Y8G("ngIf",T.questionObj.attachments&&T.questionObj.attachments.length>0)}}function O(g,w){if(1&g&&(e.j41(0,"div",17)(1,"audio",18),e.nrm(2,"source",14),e.nI1(3,"mycdn"),e.nI1(4,"safe"),e.k0s()()),2&g){const T=e.XpG(2);e.R7$(),e.FS9("id","audio_"+T.questionObj.id),e.R7$(),e.Y8G("src",e.bMT(4,4,e.bMT(3,2,T.questionObj.attachments[0].url)),e.B4B)}}function y(g,w){if(1&g&&e.DNE(0,O,5,6,"div",16),2&g){const T=e.XpG();e.Y8G("ngIf",T.questionObj.attachments&&T.questionObj.attachments.length>0)}}let D=(()=>{var g;class w extends t.H{haveOnceAudioIsPlaying(){var j=!1;let L=document.getElementsByTagName("audio");for(let k=0;k<L.length;k++)if(L[k].duration>0&&!L[k].paused){j=!0;break}return j}playAudio(j,L){var k=this.isShowList?document.getElementById("audio_list_"+j+"_"+L):document.getElementById("audio_unit_"+j+"_"+L);if(k){if(this.haveOnceAudioIsPlaying())return this.commonService.snackWarning("lang_auto_file_dang_duoc_phat");this.sendAudioEmitter.emit({obj:this.questionObj,play:1,index:L}),k.play()}}stopAudio(j,L){var k=this.isShowList?document.getElementById("audio_list_"+j+"_"+L):document.getElementById("audio_unit_"+j+"_"+L);k&&k.duration>0&&!k.paused&&(k.pause(),k.currentTime=0,k.setAttribute("src",""),this.sendAudioEmitter.emit({obj:this.questionObj,play:0,index:L}))}checkAudioPlay(j,L){var k=this.isShowList?document.getElementById("audio_list_"+j+"_"+L):document.getElementById("audio_unit_"+j+"_"+L);return!!k&&(k.duration>0&&!k.paused||((k.ended||k.currentTime>0&&k.paused)&&(k.currentTime=0,k.setAttribute("src",""),this.sendAudioEmitter.emit({obj:this.questionObj,play:0,index:L})),!1))}ngOnInit(){super.ngOnInit()}constructor(j){super(),this.commonService=j,this.totalLimit=0,this.isShowList=!0,this.sendAudioEmitter=new e.bkB}}return(g=w).\u0275fac=function(j){return new(j||g)(e.rXU(c.R))},g.\u0275cmp=e.VBU({type:g,selectors:[["azt-test-audio-ui"]],inputs:{questionObj:"questionObj",totalLimit:"totalLimit",isShowList:"isShowList"},outputs:{sendAudioEmitter:"sendAudioEmitter"},standalone:!0,features:[e.Vt3,e.aNF],decls:3,vars:2,consts:[["NormalAudio",""],[4,"ngIf","ngIfElse"],["class","text-left ml-auto mr-auto",4,"ngIf"],[1,"text-left","ml-auto","mr-auto"],["class","limit_audio",4,"ngIf"],[1,"limit_audio"],[1,"mb-0",2,"font-size","14px","font-weight","400"],["class","mb-0","style","font-size: 14px; font-weight: 450;color: #da0522 ",4,"ngIf"],["ngFor","",3,"ngForOf"],[1,"mb-0",2,"font-size","14px","font-weight","450","color","#da0522"],[1,"audio-control",3,"hidden"],["name","circle-play","size","24","style","vertical-align: middle; line-height: 1; color: #000",3,"matTooltip","click",4,"ngIf"],["name","trash-2","size","24",2,"vertical-align","middle","line-height","1","color","#da0522",3,"click","ngClass","matTooltip"],["preload","true",3,"id"],[3,"src"],["name","circle-play","size","24",2,"vertical-align","middle","line-height","1","color","#000",3,"click","matTooltip"],["class","text-center ml-auto mr-auto",4,"ngIf"],[1,"text-center","ml-auto","mr-auto"],["controls","","preload","true",2,"margin-left","10px","margin-right","10px","max-width","70%",3,"id"]],template:function(j,L){if(1&j&&e.DNE(0,E,2,1,"div",1)(1,y,1,1,"ng-template",null,0,e.C5r),2&j){const k=e.sdS(2);e.Y8G("ngIf",L.totalLimit>0)("ngIfElse",k)}},dependencies:[l.MD,l.YU,l.Sq,l.bT,a.X1,u.iI,a.YN,o.nf,o.wp,s.s,d.oV,r.flO,r.WGl,p.L,o.JI,_.Id,i.k],styles:[".limit_audio[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;align-items:center}.audio-control[_ngcontent-%COMP%]{border-radius:50%;background-color:#f0f3f4;color:#000;padding:5px;height:35px;width:35px;margin-left:5px;cursor:pointer;text-align:center}"]}),w})()},51614:(A,h,n)=>{n.d(h,{X:()=>st});var e=n(54460),t=n(48891),l=n(10936),a=n(65162),u=n(15343),o=n(44233),s=n(5502),r=n(44155),p=n(43166),_=n(36894),i=n(47348),c=n(70050),d=n(59640),m=n(92540),C=n(40005),P=n(47426),x=n(95670),f=n(4375);const S=v=>({grid:v}),E=(v,R)=>({"mt-2":v,"ml-2":R}),O=v=>({width:v}),y=v=>({flex:v});function D(v,R){if(1&v&&t.eu8(0,8),2&v){t.XpG();const I=t.sdS(5);t.Y8G("ngTemplateOutlet",I)}}function g(v,R){if(1&v&&t.eu8(0,8),2&v){t.XpG();const I=t.sdS(7);t.Y8G("ngTemplateOutlet",I)}}function w(v,R){if(1&v&&t.eu8(0,8),2&v){t.XpG();const I=t.sdS(9);t.Y8G("ngTemplateOutlet",I)}}function T(v,R){if(1&v&&(t.j41(0,"mat-option",22),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&v){const I=R.$implicit;t.Y8G("value",I.id),t.R7$(),t.SpI(" ",t.bMT(2,2,I.key)," ")}}function j(v,R){if(1&v&&(t.j41(0,"mat-option",22),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&v){const I=R.$implicit;t.Y8G("value",I.id),t.R7$(),t.SpI(" ",t.bMT(2,2,I.key)," ")}}function L(v,R){if(1&v&&(t.qex(0),t.j41(1,"mat-option",22),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s(),t.bVm()),2&v){const I=R.$implicit;t.R7$(),t.Y8G("value",I.id),t.R7$(),t.SpI(" ",t.bMT(3,2,I.title)," ")}}function k(v,R){if(1&v&&(t.j41(0,"div",23)(1,"div",12)(2,"label",24),t.EFF(3),t.nI1(4,"mytranslate"),t.k0s()(),t.j41(5,"mat-form-field",14)(6,"mat-select",15,5)(8,"mat-option"),t.nrm(9,"ngx-mat-select-search",16),t.nI1(10,"mytranslate"),t.nI1(11,"mytranslate"),t.k0s(),t.j41(12,"mat-option",22),t.EFF(13),t.nI1(14,"mytranslate"),t.k0s(),t.DNE(15,L,4,4,"ng-container",25),t.k0s()()()),2&v){const I=t.sdS(7),M=t.XpG(2);t.R7$(3),t.SpI(" ",t.bMT(4,8,"lang_core_sach")," "),t.R7$(3),t.Y8G("formControl",M.form.controls.bookIdFormControl),t.R7$(3),t.FS9("placeholderLabel",t.bMT(10,10,"lang_search_by_name")),t.FS9("noEntriesFoundLabel",t.bMT(11,12,"lang_search_not_found")),t.Y8G("formControl",I.searchControl),t.R7$(3),t.Y8G("value",0),t.R7$(),t.SpI("- ",t.bMT(14,14,"lang_create_tree_category_default_book")," -"),t.R7$(2),t.Y8G("ngForOf",I.filter(M.listBookObjs,"title"))}}function G(v,R){1&v&&(t.j41(0,"div",26)(1,"div",27),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s()()),2&v&&(t.R7$(2),t.SpI(" ",t.bMT(3,1,"lang_auto_vui_long_chon_khoi_hoc_va_mon_hoc")," "))}function Q(v,R){if(1&v&&(t.j41(0,"form",9)(1,"div",10)(2,"div",11)(3,"div",12)(4,"label",13),t.EFF(5),t.nI1(6,"mytranslate"),t.k0s()(),t.j41(7,"mat-form-field",14)(8,"mat-select",15,3)(10,"mat-option"),t.nrm(11,"ngx-mat-select-search",16),t.nI1(12,"mytranslate"),t.nI1(13,"mytranslate"),t.k0s(),t.j41(14,"mat-option",17),t.EFF(15),t.nI1(16,"mytranslate"),t.k0s(),t.DNE(17,T,3,4,"mat-option",18),t.k0s()()(),t.j41(18,"div",11)(19,"div",12)(20,"label",19),t.EFF(21),t.nI1(22,"mytranslate"),t.k0s()(),t.j41(23,"mat-form-field",14)(24,"mat-select",15,4)(26,"mat-option"),t.nrm(27,"ngx-mat-select-search",16),t.nI1(28,"mytranslate"),t.nI1(29,"mytranslate"),t.k0s(),t.j41(30,"mat-option",17),t.EFF(31),t.nI1(32,"mytranslate"),t.k0s(),t.DNE(33,j,3,4,"mat-option",18),t.k0s()()(),t.DNE(34,k,16,16,"div",20)(35,G,4,3,"div",21),t.k0s()()),2&v){const I=t.sdS(9),M=t.sdS(25),b=t.XpG();t.Y8G("formGroup",b.form),t.R7$(5),t.SpI(" ",t.bMT(6,19,"lang_auto_khoi_hoc")," "),t.R7$(3),t.Y8G("formControl",b.form.controls.schoolLevel),t.R7$(3),t.FS9("placeholderLabel",t.bMT(12,21,"lang_search_by_name")),t.FS9("noEntriesFoundLabel",t.bMT(13,23,"lang_search_not_found")),t.Y8G("formControl",I.searchControl),t.R7$(3),t.Y8G("value",0),t.R7$(),t.SpI("",t.bMT(16,25,"lang_auto_---chon_khoi"),"---"),t.R7$(2),t.Y8G("ngForOf",I.filter(I.mergeSchoolLevel(b.schoolLevelObjs),"key")),t.R7$(4),t.SpI(" ",t.bMT(22,27,"lang_auto_mon_hoc")," "),t.R7$(3),t.Y8G("formControl",b.form.controls.schoolSubject),t.R7$(3),t.FS9("placeholderLabel",t.bMT(28,29,"lang_search_by_name")),t.FS9("noEntriesFoundLabel",t.bMT(29,31,"lang_search_not_found")),t.Y8G("formControl",M.searchControl),t.R7$(3),t.Y8G("value",0),t.R7$(),t.SpI("",t.bMT(32,33,"lang_auto_---chon_mon"),"---"),t.R7$(2),t.Y8G("ngForOf",M.filter(b.schoolSubjectObjs,"key")),t.R7$(),t.Y8G("ngIf",b.form.controls.bookIdFormControl),t.R7$(),t.Y8G("ngIf",b.form.controls.schoolLevel.invalid||b.form.controls.schoolSubject.invalid)}}function V(v,R){if(1&v&&(t.j41(0,"mat-option",22),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&v){const I=R.$implicit;t.Y8G("value",I.id),t.R7$(),t.SpI(" ",t.bMT(2,2,I.key)," ")}}function X(v,R){if(1&v&&(t.j41(0,"mat-option",22),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&v){const I=R.$implicit;t.Y8G("value",I.id),t.R7$(),t.SpI(" ",t.bMT(2,2,I.key)," ")}}function H(v,R){if(1&v&&(t.qex(0),t.j41(1,"mat-option",22),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s(),t.bVm()),2&v){const I=R.$implicit;t.R7$(),t.Y8G("value",I.id),t.R7$(),t.SpI(" ",t.bMT(3,2,I.title)," ")}}function J(v,R){if(1&v&&(t.j41(0,"div",36)(1,"label",37),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s(),t.j41(4,"mat-form-field",31)(5,"mat-select",15,5)(7,"mat-option"),t.nrm(8,"ngx-mat-select-search",16),t.nI1(9,"mytranslate"),t.nI1(10,"mytranslate"),t.k0s(),t.j41(11,"mat-option",22),t.EFF(12),t.nI1(13,"mytranslate"),t.k0s(),t.DNE(14,H,4,4,"ng-container",25),t.k0s()()()),2&v){const I=t.sdS(6),M=t.XpG(2);t.Y8G("ngClass",t.l_i(18,E,M.isMobileDevice,!M.isMobileDevice)),t.R7$(),t.Y8G("ngStyle",t.eq3(21,O,M.isMobileDevice?"54px":"")),t.R7$(),t.SpI(" ",t.bMT(3,10,"lang_core_sach")," "),t.R7$(3),t.Y8G("formControl",M.form.controls.bookIdFormControl),t.R7$(3),t.FS9("placeholderLabel",t.bMT(9,12,"lang_search_by_name")),t.FS9("noEntriesFoundLabel",t.bMT(10,14,"lang_search_not_found")),t.Y8G("formControl",I.searchControl),t.R7$(3),t.Y8G("value",0),t.R7$(),t.SpI("- ",t.bMT(13,16,"lang_create_tree_category_default_book")," -"),t.R7$(2),t.Y8G("ngForOf",I.filter(M.listBookObjs,"title"))}}function q(v,R){1&v&&(t.j41(0,"div",38)(1,"div",27),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s()()),2&v&&(t.R7$(2),t.SpI(" ",t.bMT(3,1,"lang_auto_vui_long_chon_khoi_hoc_va_mon_hoc")," "))}function Z(v,R){if(1&v&&(t.j41(0,"form",9)(1,"div",28)(2,"div",29)(3,"label",30),t.EFF(4),t.nI1(5,"mytranslate"),t.k0s(),t.j41(6,"mat-form-field",31)(7,"mat-select",15,3)(9,"mat-option"),t.nrm(10,"ngx-mat-select-search",16),t.nI1(11,"mytranslate"),t.nI1(12,"mytranslate"),t.k0s(),t.j41(13,"mat-option",17),t.EFF(14),t.nI1(15,"mytranslate"),t.k0s(),t.DNE(16,V,3,4,"mat-option",18),t.k0s()()(),t.j41(17,"div",32)(18,"label",33),t.EFF(19),t.nI1(20,"mytranslate"),t.k0s(),t.j41(21,"mat-form-field",31)(22,"mat-select",15,4)(24,"mat-option"),t.nrm(25,"ngx-mat-select-search",16),t.nI1(26,"mytranslate"),t.nI1(27,"mytranslate"),t.k0s(),t.j41(28,"mat-option",17),t.EFF(29),t.nI1(30,"mytranslate"),t.k0s(),t.DNE(31,X,3,4,"mat-option",18),t.k0s()()(),t.DNE(32,J,15,23,"div",34),t.k0s(),t.DNE(33,q,4,3,"div",35),t.k0s()),2&v){const I=t.sdS(8),M=t.sdS(23),b=t.XpG();t.Y8G("formGroup",b.form),t.R7$(),t.Y8G("ngClass",t.eq3(37,S,!b.isMobileDevice)),t.R7$(3),t.SpI(" ",t.bMT(5,21,"lang_auto_khoi_hoc")," "),t.R7$(3),t.Y8G("formControl",b.form.controls.schoolLevel),t.R7$(3),t.FS9("placeholderLabel",t.bMT(11,23,"lang_search_by_name")),t.FS9("noEntriesFoundLabel",t.bMT(12,25,"lang_search_not_found")),t.Y8G("formControl",I.searchControl),t.R7$(3),t.Y8G("value",0),t.R7$(),t.SpI("",t.bMT(15,27,"lang_auto_---chon_khoi"),"---"),t.R7$(2),t.Y8G("ngForOf",I.filter(I.mergeSchoolLevel(b.schoolLevelObjs),"key")),t.R7$(),t.Y8G("ngClass",t.l_i(39,E,b.isMobileDevice,!b.isMobileDevice)),t.R7$(2),t.SpI(" ",t.bMT(20,29,"lang_auto_mon_hoc")," "),t.R7$(3),t.Y8G("formControl",b.form.controls.schoolSubject),t.R7$(3),t.FS9("placeholderLabel",t.bMT(26,31,"lang_search_by_name")),t.FS9("noEntriesFoundLabel",t.bMT(27,33,"lang_search_not_found")),t.Y8G("formControl",M.searchControl),t.R7$(3),t.Y8G("value",0),t.R7$(),t.SpI("",t.bMT(30,35,"lang_auto_---chon_mon"),"---"),t.R7$(2),t.Y8G("ngForOf",M.filter(b.schoolSubjectObjs,"key")),t.R7$(),t.Y8G("ngIf",b.form.controls.bookIdFormControl),t.R7$(),t.Y8G("ngIf",b.form.controls.schoolLevel.invalid||b.form.controls.schoolSubject.invalid)}}function tt(v,R){if(1&v&&(t.j41(0,"mat-option",22),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&v){const I=R.$implicit;t.Y8G("value",I.id),t.R7$(),t.SpI(" ",t.bMT(2,2,I.key)," ")}}function et(v,R){if(1&v&&(t.j41(0,"mat-option",22),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&v){const I=R.$implicit;t.Y8G("value",I.id),t.R7$(),t.SpI(" ",t.bMT(2,2,I.key)," ")}}function nt(v,R){if(1&v&&(t.qex(0),t.j41(1,"mat-option",22),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s(),t.bVm()),2&v){const I=R.$implicit;t.R7$(),t.Y8G("value",I.id),t.R7$(),t.SpI(" ",t.bMT(3,2,I.title)," ")}}function ot(v,R){if(1&v&&(t.j41(0,"div",36)(1,"label",37),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s(),t.j41(4,"mat-form-field",31)(5,"mat-select",15,5)(7,"mat-option"),t.nrm(8,"ngx-mat-select-search",16),t.nI1(9,"mytranslate"),t.nI1(10,"mytranslate"),t.k0s(),t.j41(11,"mat-option",22),t.EFF(12),t.nI1(13,"mytranslate"),t.k0s(),t.DNE(14,nt,4,4,"ng-container",25),t.k0s()()()),2&v){const I=t.sdS(6),M=t.XpG(2);t.Y8G("ngClass",t.l_i(18,E,M.isMobileDevice,!M.isMobileDevice)),t.R7$(),t.Y8G("ngStyle",t.eq3(21,O,M.isMobileDevice?"54px":"")),t.R7$(),t.SpI(" ",t.bMT(3,10,"lang_core_sach")," "),t.R7$(3),t.Y8G("formControl",M.form.controls.bookIdFormControl),t.R7$(3),t.FS9("placeholderLabel",t.bMT(9,12,"lang_search_by_name")),t.FS9("noEntriesFoundLabel",t.bMT(10,14,"lang_search_not_found")),t.Y8G("formControl",I.searchControl),t.R7$(3),t.Y8G("value",0),t.R7$(),t.SpI("- ",t.bMT(13,16,"lang_create_tree_category_default_book")," -"),t.R7$(2),t.Y8G("ngForOf",I.filter(M.listBookObjs,"title"))}}function it(v,R){1&v&&(t.j41(0,"div",38)(1,"div",27),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s()()),2&v&&(t.R7$(2),t.SpI(" ",t.bMT(3,1,"lang_auto_vui_long_chon_khoi_hoc_va_mon_hoc")," "))}function at(v,R){if(1&v&&(t.j41(0,"form",9)(1,"div",39)(2,"div",29)(3,"mat-form-field",31)(4,"mat-select",15,3)(6,"mat-option"),t.nrm(7,"ngx-mat-select-search",16),t.nI1(8,"mytranslate"),t.nI1(9,"mytranslate"),t.k0s(),t.j41(10,"mat-option",17),t.EFF(11),t.nI1(12,"mytranslate"),t.k0s(),t.DNE(13,tt,3,4,"mat-option",18),t.k0s()()(),t.j41(14,"div",32)(15,"mat-form-field",31)(16,"mat-select",15,4)(18,"mat-option"),t.nrm(19,"ngx-mat-select-search",16),t.nI1(20,"mytranslate"),t.nI1(21,"mytranslate"),t.k0s(),t.j41(22,"mat-option",17),t.EFF(23),t.nI1(24,"mytranslate"),t.k0s(),t.DNE(25,et,3,4,"mat-option",18),t.k0s()()(),t.DNE(26,ot,15,23,"div",34),t.k0s(),t.DNE(27,it,4,3,"div",35),t.k0s()),2&v){const I=t.sdS(5),M=t.sdS(17),b=t.XpG();t.Y8G("formGroup",b.form),t.R7$(),t.Y8G("ngClass",t.eq3(31,y,!b.useDynamicMobile||b.useDynamicMobile&&!b.isMobileDevice)),t.R7$(3),t.Y8G("formControl",b.form.controls.schoolLevel),t.R7$(3),t.FS9("placeholderLabel",t.bMT(8,19,"lang_search_by_name")),t.FS9("noEntriesFoundLabel",t.bMT(9,21,"lang_search_not_found")),t.Y8G("formControl",I.searchControl),t.R7$(3),t.Y8G("value",0),t.R7$(),t.SpI("",t.bMT(12,23,"lang_auto_---chon_khoi"),"---"),t.R7$(2),t.Y8G("ngForOf",I.filter(I.mergeSchoolLevel(b.schoolLevelObjs),"key")),t.R7$(),t.Y8G("ngClass",t.l_i(33,E,b.isMobileDevice,!b.isMobileDevice)),t.R7$(2),t.Y8G("formControl",b.form.controls.schoolSubject),t.R7$(3),t.FS9("placeholderLabel",t.bMT(20,25,"lang_search_by_name")),t.FS9("noEntriesFoundLabel",t.bMT(21,27,"lang_search_not_found")),t.Y8G("formControl",M.searchControl),t.R7$(3),t.Y8G("value",0),t.R7$(),t.SpI("",t.bMT(24,29,"lang_auto_---chon_mon"),"---"),t.R7$(2),t.Y8G("ngForOf",M.filter(b.schoolSubjectObjs,"key")),t.R7$(),t.Y8G("ngIf",b.form.controls.bookIdFormControl),t.R7$(),t.Y8G("ngIf",b.form.controls.schoolLevel.invalid||b.form.controls.schoolSubject.invalid)}}let st=(()=>{var v;class R extends d.H{getChangeKey(){let M=this.form.getRawValue();return M.schoolLevel+"_"+M.schoolSubject+"_"+(M.bookIdFormControl??0)}updateLevelAndSubjectToForm(M,b,B){let U=this.commonService.concatMultipleArray(this.schoolLevelObjs.map(F=>F.schoolSubjectObjs)).find(F=>F.id==b)?.key,W=this.schoolLevelObjs.find(F=>F.schoolLevel?.id==M);this.schoolSubjectObjs=W?.schoolSubjectObjs??[];let z=this.schoolSubjectObjs.find(F=>F.id==b||F.key?.toLowerCase()==U?.toLowerCase());M=W?.schoolLevel?.id??0,b=z?.id??0,B=B??0;let $=this.form.getRawValue();$.schoolLevel!=M&&M&&this.form.controls.schoolLevel.setValue(M,{emitEvent:!1}),$.schoolSubject!=b&&b&&this.form.controls.schoolSubject.setValue(b,{emitEvent:!1}),$.bookIdFormControl!=B&&B&&this.form.controls.bookIdFormControl?.setValue(B,{emitEvent:!1}),(0!==M||0!==b||0!==B)&&this.getBookObjs(M,b,B,F=>{let K=this.form.getRawValue();if(K.schoolLevel!=F.schoolLevelId||K.schoolSubject!=F.schoolSubjectId||(K.bookIdFormControl??0)!=F.bookId)return;this.listBookObjs=F.books;let N=this.listBookObjs.find(rt=>rt.id==B);B=N?.id??0,this.showBookData&&K.bookIdFormControl!=B&&this.form.controls.bookIdFormControl?.setValue(B,{emitEvent:!1});let Y=this.getChangeKey();this.lastChangeKey!=Y&&(this.lastChangeKey=Y,this.changeDataEvent.emit({bookName:N?.title}))})}getBookObjs(M,b,B,U){if(!this.showBookData)return U({schoolLevelId:M,schoolSubjectId:b,bookId:B,books:[]});if(!M||!b)return U({schoolLevelId:M,schoolSubjectId:b,bookId:B,books:[]});let W=this.listBookByLevelSubject.find(z=>z.levelId==M&&z.subjectId==b);if(null!=W)return U({schoolLevelId:M,schoolSubjectId:b,bookId:B,books:W.books});this.isLoadingBook=!0,this.waitDestroy(this.wrapApiResponse(this.aiElearningService.aiApiV1ElearningGetElearningBookGet(M,b)).subscribe(z=>{if(!z.success)return this.isLoadingBook=!1,this.errorStatusObj(z.message,!0),U({schoolLevelId:M,schoolSubjectId:b,bookId:B,books:[]});z.data=z.data?.filter($=>$.isActive),this.listBookByLevelSubject.push({levelId:M,subjectId:b,books:z.data??[]}),this.isLoadingBook=!1,U({schoolLevelId:M,schoolSubjectId:b,bookId:B,books:z.data??[]})}))}getSubjectAndLevel(){this.initStatusObj(),this.waitDestroy(this.commonListService.apiCommonListSubjectAndLevelsGet(this.commonService.getBusinessDomainUrl()).subscribe(M=>{if(!M.success)return this.errorStatusObj(M.message,!0);if(this.schoolLevelObjs=M.data?.schoolLevelSubjectObjs??[],this.removeLevelSubjectWithOtherName&&(this.schoolLevelObjs=this.schoolLevelObjs.filter(b=>"azt_lang_core_khoi_khac"!=b.schoolLevel?.key),this.schoolLevelObjs.forEach(b=>b.schoolSubjectObjs=b.schoolSubjectObjs.filter(B=>"azt_auto_lang_khac"!=B.key))),this.useExamSchoolLogData&&0==this.form.controls.schoolLevel.value)return this.updateLevelAndSubjectToForm(M.data?.examSchoolLogObj?.lastSchoolLevelId??0,M.data?.examSchoolLogObj?.lastSchoolSubjectId??0,void 0),this.stopStatusObj();if(this.useFirstAsDefault&&0==this.form.controls.schoolLevel.value){let b=this.commonService.getLastOfArray(this.schoolLevelObjs),B=this.commonService.getFirstOfArray(b?.schoolSubjectObjs??[]);if(b&&B)return this.updateLevelAndSubjectToForm(b.schoolLevel?.id??0,B.id,this.form.controls.bookIdFormControl?.value),this.stopStatusObj()}this.updateLevelAndSubjectToForm(this.form.controls.schoolLevel.value,this.form.controls.schoolSubject.value,this.form.controls.bookIdFormControl?.value),this.stopStatusObj()}))}listenChangeLevelSubjectBook(){this.form.controls.schoolLevel.valueChanges.subscribe(M=>{let b=this.form.getRawValue();this.updateLevelAndSubjectToForm(b.schoolLevel,b.schoolSubject,b.bookIdFormControl)}),this.form.controls.schoolSubject.valueChanges.subscribe(M=>{let b=this.form.getRawValue();this.updateLevelAndSubjectToForm(b.schoolLevel,b.schoolSubject,b.bookIdFormControl)}),this.form.controls.bookIdFormControl?.valueChanges.subscribe(M=>{let b=this.form.getRawValue();this.updateLevelAndSubjectToForm(b.schoolLevel,b.schoolSubject,b.bookIdFormControl)})}ngOnInit(){this.getSubjectAndLevel(),this.listenChangeLevelSubjectBook()}constructor(M,b){super(),this.commonListService=M,this.aiElearningService=b,this.removeLevelSubjectWithOtherName=!1,this.showBookData=!1,this.useExamSchoolLogData=!1,this.useFirstAsDefault=!1,this.useDynamicMobile=!1,this.layout="default",this.changeDataEvent=new t.bkB,this.schoolLevelObjs=[],this.schoolSubjectObjs=[],this.listBookObjs=[],this.lastChangeKey=void 0,this.listBookByLevelSubject=[],this.isLoadingBook=!1}}return(v=R).\u0275fac=function(M){return new(M||v)(t.rXU(m.Nz),t.rXU(C.T5))},v.\u0275cmp=t.VBU({type:v,selectors:[["config-level-subject-book"]],inputs:{form:"form",removeLevelSubjectWithOtherName:"removeLevelSubjectWithOtherName",showBookData:"showBookData",useExamSchoolLogData:"useExamSchoolLogData",useFirstAsDefault:"useFirstAsDefault",useDynamicMobile:"useDynamicMobile",layout:"layout"},outputs:{changeDataEvent:"changeDataEvent"},standalone:!0,features:[t.Vt3,t.aNF],decls:10,vars:3,consts:[["defaultLayoutTpl",""],["labelInOneLineTpl",""],["labelHiddenTpl",""],["searchInListSchoolLevel","searchInList"],["searchInListSchoolSubject","searchInList"],["searchInListBook","searchInList"],[1,"config-level-subject"],[3,"ngTemplateOutlet",4,"ngIf"],[3,"ngTemplateOutlet"],[3,"formGroup"],["id","azt-config-level-subject",1,"grid","grid-cols-12","gap-4"],[1,"col-span-12","lg:col-span-6"],[1,"font-medium"],["for","schoolLevel",1,"form-label","flex","items-center"],["appearance","outline"],["searchInList","",3,"formControl"],[3,"formControl","placeholderLabel","noEntriesFoundLabel"],["disabled","",3,"value"],[3,"value",4,"ngFor","ngForOf"],["for","schoolSubject",1,"form-label","flex","items-center"],["class","col-span-12",4,"ngIf"],["class","col-span-12","style","margin-top: -20px",4,"ngIf"],[3,"value"],[1,"col-span-12"],["for","bookSelected",1,"form-label","flex","items-center"],[4,"ngFor","ngForOf"],[1,"col-span-12",2,"margin-top","-20px"],[1,"text-xs","mt-2","text-danger"],["id","azt-config-level-subject",1,"grid-cols-12","gap-4",3,"ngClass"],[1,"col-span-12","sm:col-span-3","flex","items-center"],["for","schoolLevel",1,"mr-1","flex-none","whitespace-nowrap"],["appearance","outline",1,"box",2,"width","100%"],[1,"col-span-12","sm:col-span-4","flex","items-center",3,"ngClass"],["for","schoolSubject",1,"mr-1","whitespace-nowrap","flex-none"],["class","col-span-5 flex items-center",3,"ngClass",4,"ngIf"],["style","margin-top: -20px",4,"ngIf"],[1,"col-span-5","flex","items-center",3,"ngClass"],["for","bookSelected",1,"mr-1","flex-none","whitespace-nowrap",3,"ngStyle"],[2,"margin-top","-20px"],["id","azt-config-level-subject",1,"justify-end","ml-auto",3,"ngClass"]],template:function(M,b){1&M&&(t.j41(0,"div",6),t.DNE(1,D,1,1,"ng-container",7)(2,g,1,1,"ng-container",7)(3,w,1,1,"ng-container",7),t.k0s(),t.DNE(4,Q,36,35,"ng-template",null,0,t.C5r)(6,Z,34,42,"ng-template",null,1,t.C5r)(8,at,28,36,"ng-template",null,2,t.C5r)),2&M&&(t.R7$(),t.Y8G("ngIf","default"==b.layout),t.R7$(),t.Y8G("ngIf","label_in_one_line"==b.layout),t.R7$(),t.Y8G("ngIf","label_hidden"==b.layout))},dependencies:[o.An,o.U9,p.x,e.MD,e.YU,e.Sq,e.bT,e.T3,e.B3,l.X1,l.qT,l.BC,l.cb,l.l_,l.j4,a.iI,l.YN,i.wp,r.s,P.wT,x.rl,f.VO,u.flO,c.L,s.Id,_.k],encapsulation:2}),R})()},74175:(A,h,n)=>{n.d(h,{W:()=>S});var e=n(47947),t=n(59640),l=n(54460),a=n(10936),u=n(65162),o=n(47348),s=n(44155),r=n(15343),p=n(70050),_=n(5502),i=n(36894),c=n(48891),d=n(10296),m=n(44172),C=n(27691);const P=["*","*"];function x(E,O){if(1&E){const y=c.RV6();c.qex(0),c.j41(1,"a",2),c.bIt("click",function(){c.eBV(y);const g=c.XpG();return c.Njj(g.shareFileToFlutter())}),c.j41(2,"span"),c.EFF(3),c.nI1(4,"mytranslate"),c.k0s(),c.SdG(5),c.k0s(),c.bVm()}if(2&E){const y=c.XpG();c.R7$(),c.Aen(y.style),c.HbH(y.classStyle),c.FS9("target",y.target),c.R7$(2),c.JRh(c.bMT(4,7,y.fileDescription))}}function f(E,O){if(1&E&&(c.j41(0,"a",3)(1,"span"),c.EFF(2),c.nI1(3,"mytranslate"),c.k0s(),c.SdG(4,1),c.k0s()),2&E){const y=c.XpG();c.Aen(y.style),c.HbH(y.classStyle),c.FS9("href",y.dataUrl,c.B4B),c.FS9("target",y.target),c.FS9("download",y.fileName),c.R7$(2),c.JRh(c.bMT(3,9,y.fileDescription))}}let S=(()=>{var E;class O extends t.H{downloadFile(){return this.http.get(this.dataUrl,{responseType:"blob"}).pipe((0,e.T)(D=>D))}shareFileToFlutter(){this.downloadFile().subscribe(D=>{this.shareFileFlutterService.shareFileWithBlob(D,this.fileName)})}ngOnInit(){super.ngOnInit()}constructor(D,g,w){super(),this.shareFileFlutterService=D,this.commonService=g,this.http=w,this.dataUrl="",this.target="",this.fileName="",this.fileDescription="",this.classStyle="",this.style=""}}return(E=O).\u0275fac=function(D){return new(D||E)(c.rXU(d.R),c.rXU(m.R),c.rXU(C.Qq))},E.\u0275cmp=c.VBU({type:E,selectors:[["azt-download-link-item"]],inputs:{dataUrl:"dataUrl",target:"target",fileName:"fileName",fileDescription:"fileDescription",classStyle:"classStyle",style:"style"},standalone:!0,features:[c.Vt3,c.aNF],ngContentSelectors:P,decls:3,vars:2,consts:[["NormalWeb",""],[4,"ngIf","ngIfElse"],[3,"click","target"],[3,"href","target","download"]],template:function(D,g){if(1&D&&(c.NAR(P),c.DNE(0,x,6,9,"ng-container",1)(1,f,5,11,"ng-template",null,0,c.C5r)),2&D){const w=c.sdS(2);c.Y8G("ngIf",g.isMobileWebView)("ngIfElse",w)}},dependencies:[l.MD,l.bT,a.X1,u.iI,a.YN,o.wp,s.s,r.flO,p.L,_.Id,i.k],encapsulation:2}),O})()},65080:(A,h)=>{h.P=void 0,h.P=class e{static generateIdRequired(l){let a="";for(let s=0;s<l;s++)a+="abcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(36*Math.random()));return Math.floor(Date.now()/1e3)+a}}},69490:(A,h,n)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.PartsParser=void 0;const e=n(42336),t=n(76071),l=n(26965),a=n(80186),u=n(2238),o=n(90953);class s{constructor(p){this.__idCssElement="qv_style_element",this.baseConfigEventListener=[],this.imgMaps=[],this.services=new Array;const _=this.__pushServices([new t.FirstPartService(this.baseConfigEventListener),new e.ImagePartService(this.baseConfigEventListener),new u.DocxImagePartService(this.baseConfigEventListener),new a.LibrariesPartService(this.baseConfigEventListener,p),new l.FindAnsPartService(this.baseConfigEventListener),new o.LatexPartService(this.baseConfigEventListener)]);this.__pushCss(_)}__pushCss(p){if(!document.getElementById(this.__idCssElement)&&document.head){const i=document.createElement("style");i.id=this.__idCssElement,i.innerHTML=p.replace(/  /g," ").replace(/\n/g," ").replace(/\t/g," "),document.head.appendChild(i)}}__pushServices(p){let _="";return p.forEach(i=>{i.outCss().forEach(d=>{_+=`.${d.className} { ${d.content} } \n`}),this.services.push(i)}),_}start(p){const _=document.createElement("div");return p.forEach(i=>{const c=document.createElement("p");c.classList.add("qv_line"),this.services.forEach(d=>{d.pushImages(this.imgMaps),i=d.parse(i)}),c.innerHTML=i.text||"",_.appendChild(c)}),0===_.innerText.indexOf(s.IgnoreChar)?_.innerText.replace(s.IgnoreChar,""):_.outerHTML}register(p){this.imgMaps=p}configEventListener(p){p.forEach(_=>{-1===this.baseConfigEventListener.findIndex(i=>i.eventName===_.eventName)&&this.baseConfigEventListener.push(_)})}doneRenderQuestions(){this.services.forEach(p=>{p.onEndAll()})}}h.PartsParser=s,s.IgnoreChar="{!ignore}"},90685:(A,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.BaseCaller=void 0,h.BaseCaller=class n{getQuestion(t,l,a,u,o,s){return new Promise(r=>{r([])})}}},79352:(A,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.BeautyImageCrop=void 0;class n{static getRGB(t,l,a,u){return{red:u[4*(a.width*l+t)],green:u[4*(a.width*l+t)+1],blue:u[4*(a.width*l+t)+2],opacity:u[4*(a.width*l+t)+3]}}static isEmpty(t){return 255==t.red&&255==t.green&&255==t.blue||0===t.opacity}static scanX(t,l,a){for(var u=t?1:-1,o=t?0:l.width-1;t?o<l.width:o>-1;o+=u)for(var s=0;s<l.height;s++)if(!n.isEmpty(n.getRGB(o,s,l,a.data)))return o;return 0}static scanY(t,l,a){for(var u=t?1:-1,o=t?0:l.height-1;t?o<l.height:o>-1;o+=u)for(var s=0;s<l.width;s++)if(!n.isEmpty(n.getRGB(s,o,l,a.data)))return o;return 0}static cropImage(t,l,a){const o=t.canvas,s=document.createElement("canvas"),r=s.getContext("2d");var p=n.scanY(!0,o,l)-5,_=n.scanY(!1,o,l)+5,i=n.scanX(!0,o,l)-5,c=n.scanX(!1,o,l)+5;a&&(a.top||(_=0),a.bottom||(_=o.height),a.left||a.right?(a.left||(_=0),a.right||(_=o.width)):c=o.width+i);var d=c-i,m=_-p;return s.width=d,s.height=m,r?.drawImage(o,i,p,d,m,0,0,d,m),s}static removeBg(t){const l=document.createElement("canvas"),a=l.getContext("2d");if(a){l.width=t.width,l.height=t.height,a.drawImage(t,0,0);for(var u=a.getImageData(0,0,l.width,l.height),o=u.data,s=0;s<o.length;s+=4)o[s]>=185&&o[s+1]>=185&&o[s+2]>=185&&(o[s+3]=0);a.putImageData(u,0,0)}return l}static cropCanvas(t,l){const a=t.getContext("2d");if(a){var u=a.getImageData(0,0,t.width,t.height);return n.cropImage(a,u,l)}return t}}h.BeautyImageCrop=n},63055:(A,h,n)=>{h.Iz=void 0;n(90685);const l=n(79352);Object.defineProperty(h,"Iz",{enumerable:!0,get:function(){return l.BeautyImageCrop}});n(69490)},2238:(A,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.DocxImagePartService=void 0;class n{constructor(t){this.pattern_check=/@\[\]{"link":"[^"]+","data":{[^}]+}}@\[\]/i,this.images=[],this.indexImageLink=[],this.style=document.createElement("style"),this.baseConfigEventListener=t,document.head.appendChild(this.style)}parse(t){let u,l=0,a=t.text||"";for(;null!==(u=this.pattern_check.exec(a));){try{var o=JSON.parse(u[0].split("@[]")[1]);o.data={x:Math.floor(o.data.x),y:Math.floor(o.data.y),width:Math.floor(o.data.width),height:Math.floor(o.data.height)},this.indexImageLink.push(o.link),a=a.replace(this.pattern_check,`<div class="background_question_${this.indexImageLink.length-1}"><img width="1024" height="1024" src="${o.link}"></div>`),this.style.textContent+=`.background_question_${this.indexImageLink.length-1} {margin: 0 3px; width: ${o.data.width}px; height: ${o.data.height}px; display: inline-block;vertical-align: middle; overflow: hidden;} .background_question_${this.indexImageLink.length-1} img { margin-top: -${o.data.y}px; margin-left: -${o.data.x}px;}`}catch{a=a.replace(this.pattern_check,"")}l++>1e4&&(a="")}return Object.assign(Object.assign({},t),{text:a})}outCss(){return[]}pushImages(t){this.images=t}onEndAll(){}}h.DocxImagePartService=n,n.NAME_SERVICE="image_part:"},26965:(A,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.FindAnsPartService=void 0,h.FindAnsPartService=class n{constructor(t){this.pattern_check=/\[[ABCDEFGHI]:[^\]]+\]/i,this.images=[],this.baseConfigEventListener=t}parse(t){let u,l=0,a=t.text||"";for(;null!==(u=this.pattern_check.exec(a));){const o=u[0].replace("[","").replace("]",""),s=o.substring(0,1),r=document.createElement("span");r.classList.add("qv_string_eng_ans"),r.innerHTML=s;const p=o.substring(2),_=document.createElement("span");_.classList.add("qv_string_eng"),_.innerHTML=p,_.appendChild(r),a=a.replace(this.pattern_check,_.outerHTML),l++>1e4&&(a="")}return Object.assign(Object.assign({},t),{text:a})}outCss(){return[{className:"qv_string_eng",content:"\n                    cursor: pointer;\n                    padding: 0 5px;\n                    font-weight: bold;\n                    text-decoration: underline;\n                    position: relative;\n                    height: 40px;\n                    display: inline-block;\n                "},{className:"qv_string_eng_ans",content:"\n                    position: absolute;\n                    top: 20px;\n                    left: 45%;\n                "}]}pushImages(t){this.images=t}onEndAll(){}}},76071:(A,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.FirstPartService=void 0,h.FirstPartService=class n{constructor(t){this.images=[],this.baseConfigEventListener=t}parse(t){return Object.assign({},t)}outCss(){return[{className:"qv_line",content:"\n                    margin: 0 !important;\n                "},{className:"qv_qts_image",content:"\n                    width: 100%;\n                "},{className:"qv_ats_image",content:"\n                    width: 60%;\n                "}]}pushImages(t){this.images=t}onEndAll(){}}},42336:(A,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.ImagePartService=void 0;class n{constructor(t){this.pattern_check=/\[!img:[afhci]+[\dABCDEFGHI]+\]/i,this.images=[],this.baseConfigEventListener=t}parse(t){let u,l=0,a=t.text||"";for(;null!==(u=this.pattern_check.exec(a));){const o=u[0].replace("[!img:","").replace("]",""),s=this.images.find(r=>r.id===o);if(s){const r=document.createElement("img");r.crossOrigin="anonymous",r.classList.add(0===o.indexOf("af")?"qv_full_a_img":0===o.indexOf("f")?"qv_full_img":"qv_img"),r.src=s.link,a=a.replace(this.pattern_check,r.outerHTML)}else{const r=document.createElement("span");r.innerHTML="(Th\xeam h\xecnh \u1ea3nh)",r.classList.add("qv_none_image"),a=a.replace(this.pattern_check,r.outerHTML)}l++>1e4&&(a="")}return Object.assign(Object.assign({},t),{text:a})}outCss(){return[{className:"qv_full_a_img",content:"\n                    cursor: pointer;\n                    width: 60%\n                "},{className:"qv_full_img",content:"\n                    cursor: pointer;\n                    width: 100%\n                "},{className:"qv_img",content:"\n                    cursor: pointer;\n                    height: 25px;\n                "},{className:"qv_none_image",content:"\n                    display: inline-block;\n                    color: #2262ae;\n                    cursor: pointer;\n                "}]}pushImages(t){this.images=t}onEndAll(){}}h.ImagePartService=n,n.NAME_SERVICE="image_part:"},90953:(A,h)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.LatexPartService=void 0;class n{constructor(t){this.images=[],this.baseConfigEventListener=t}parse(t){let l=t.text||"";return Object.assign(Object.assign({},t),{text:l})}outCss(){return[]}pushImages(t){this.images=t}onEndAll(){}}h.LatexPartService=n,n.NAME_SERVICE="latex:"},80186:(A,h,n)=>{Object.defineProperty(h,"__esModule",{value:!0}),h.LibrariesHelper=h.LibrariesPartService=void 0;const e=n(69490);class t{constructor(o,s){this.pattern_check=/^(\[@[CTG]\d+:[^\]]+\]\.)+((\[@Q\d+:[^\]]+\])|(\[[^@:]+\]))$/i,this.pattern_content=/\[(.*?)\]/i,this.images=[],this.baseConfigEventListener=[],this.baseConfigEventListener=o,this.cacheProcess=new a(s,this.baseConfigEventListener)}parse(o){let s=0,r=o.text||"";if(this.pattern_check.test(r)){let p=[];for(;null!==this.pattern_content.exec(r);){const c=this.pattern_content.exec(r);if(!c)break;p.push(c[1]),r=r.substring(0,c.index)+r.substring(c.index+c[0].length)}const _=l.convertStringToTypeObject(p),i={numberQuestion:1,path:_[0],useCache:!0};"Random"===_[0].type?("G"===_[1].type?(i.groupId=_[1].id,i.examId=_[2].id):(i.catId="C"===_[1].type?_[1].id:void 0,i.examId="T"===_[1].type?_[1].id:void 0,i.questionId="Q"===_[1].type?_[1].id:void 0),i.numberQuestion=_[0].id):i.questionId=_[0].id,r=e.PartsParser.IgnoreChar+this.cacheProcess.pushCaller(i),s++>1e4&&(r="")}return Object.assign(Object.assign({},o),{text:r})}outCss(){return[]}pushImages(o){this.images=o}onEndAll(){this.cacheProcess.startCaller()}}h.LibrariesPartService=t,t.NAME_SERVICE="libraries_part:";class l{static convertStringToTypeObject(o){const s=[];return o.forEach(r=>{let p=r.substring(1,2),_=Number(l.pattern_number.exec(r)),i="";if(l.char_types.includes(p)){let c=r.indexOf(":");-1!==c&&(i=r.substring(c))}else p="Random";s.push({name:i,id:_,type:p,content:r})}),s.reverse()}}h.LibrariesHelper=l,l.pattern_number=/\d+/i,l.char_types="CTGQH";class a{constructor(o,s){this.eventDoneKey=t.NAME_SERVICE+"done",this.cacheObjs=[],this.baseCaller=o,this.baseConfigEventListener=s}pushEventValue(){const o=this.baseConfigEventListener.filter(r=>0===r.eventName.indexOf(this.eventDoneKey));let s=[];o.forEach(r=>{const p=this.cacheObjs.filter(i=>"done"===i.step);r.func.call(r.caller,p)&&s.push(r.eventName)}),s.forEach(r=>{const p=this.baseConfigEventListener.findIndex(_=>_.eventName===r);-1!==p&&this.baseConfigEventListener.splice(p,1)})}pushCaller(o){const s=o.catId+"_"+o.examId+"_"+o.groupId+"_"+o.questionId+"_"+o.numberQuestion;var r=this.cacheObjs.find(p=>p.key===s);return r||this.cacheObjs.push(r={key:s,value:[],step:"init",pars:o,count:0}),r.count++,s+"_"+r?.count}startCaller(){this.cacheObjs.forEach(o=>{o.count=0,"init"===o.step?(o.step="call",this.baseCaller.getQuestion(o.pars.numberQuestion,o.pars.useCache,o.pars.catId,o.pars.examId,o.pars.questionId,o.pars.groupId).then(s=>{o.step="done",o.value=s,this.pushEventValue()})):"done"===o.step&&this.pushEventValue()})}}}}]);