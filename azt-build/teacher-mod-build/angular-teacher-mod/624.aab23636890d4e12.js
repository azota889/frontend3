"use strict";(self.webpackChunkTeacherMod=self.webpackChunkTeacherMod||[]).push([[624],{32610:(ne,N,n)=>{n.d(N,{I:()=>F});var I=n(37714),e=n(43234),c=n(48891),R=n(36484);let F=(()=>{var S;class j{constructor(T){this.userService=T}exportToDocxBinary(T,f,r){let u=this.userService.getUserObj(),t=e.c.azt_ai_base_api;return(0,I.w)().exportToDocxBinary({questions:T,additionalParams:f},"Bearer "+u.rememberToken,t,r)}}return(S=j).\u0275fac=function(T){return new(T||S)(c.KVO(R.R))},S.\u0275prov=c.jDH({token:S,factory:S.\u0275fac,providedIn:"root"}),j})()},81234:(ne,N,n)=>{n.d(N,{$s:()=>T,JP:()=>I,Wn:()=>j,Xe:()=>c,ep:()=>e,n1:()=>R,t5:()=>S});const I="00B050",e="f44336",c="_@COLOR@_",R="_@COLOR_END@_";function F(f,r,u){return f.replace(new RegExp(r,"g"),u)}function S(f,r="math",u=" xmlns"){if(!f)return"";const l=f.split(`<${r}`);return[["<span class=\"qv_string_eng_ans\" style='([^']+)'>([^<]*)<span style='([^']+)'>([A-Z])</span></span>",'<b><u below="$4"> $2</u></b>'],["([^>])(\r\n|\r|\n)([^<])","$1<br/>$3"]].forEach(m=>{for(let p=0;p<l.length;p++)if(l[p].startsWith(u)){const E=l[p].split(`</${r}>`);E.length>0&&(E[1]=F(E[1],m[0],m[1])),l[p]=E.join(`</${r}>`)}else l[p]=F(l[p],m[0],m[1])}),l.join(`<${r}`)}function j(f){return f.forEach(r=>{r.content=S(r.content);for(let u=0;u<r.answers.length;u++)r.answers[u]=S(r.answers[u])}),f}const W=[{key:"TABLE",value:'<w:tblPr><w:tblStyle w:val="TableGrid" /><w:tblpPr w:leftFromText="180" w:rightFromText="180" w:vertAnchor="text" w:tblpXSpec="right" w:tblpY="1" /><w:tblOverlap w:val="never" /><w:tblW w:w="0" w:type="auto" /><w:tblBorders><w:insideV w:val="none" w:sz="0" w:space="0" w:color="auto" /></w:tblBorders><w:tblCellMar><w:top w:w="113" w:type="dxa" /><w:left w:w="397" w:type="dxa" /><w:bottom w:w="113" w:type="dxa" /><w:right w:w="397" w:type="dxa" /></w:tblCellMar><w:tblLook w:val="0600" w:firstRow="0" w:lastRow="0" w:firstColumn="0" w:lastColumn="0" w:noHBand="1" w:noVBand="1" /></w:tblPr>'},{key:"CORRECT",value:`<w:tcPr><w:tcW w:w="0" w:type="auto" /><w:tcBorders><w:top w:val="single" w:sz="4" w:space="0" w:color="FFFFFF" /><w:left w:val="single" w:sz="4" w:space="0" w:color="FFFFFF" /><w:bottom w:val="single" w:sz="4" w:space="0" w:color="FFFFFF" /><w:right w:val="single" w:sz="4" w:space="0" w:color="${c}" /></w:tcBorders><w:vAlign w:val="center" /></w:tcPr>`},{key:"KEY_RESULT",value:`<w:tcPr><w:tcW w:w="0" w:type="auto" /><w:tcBorders><w:top w:val="single" w:sz="4" w:space="0" w:color="${c}" /><w:left w:val="single" w:sz="4" w:space="0" w:color="FFFFFF" /><w:bottom w:val="single" w:sz="4" w:space="0" w:color="${c}" /><w:right w:val="single" w:sz="4" w:space="0" w:color="${R}" /></w:tcBorders><w:vAlign w:val="center" /></w:tcPr>`},{key:"FILL_RESULT",value:`<w:tcPr><w:tcW w:w="0" w:type="auto" /><w:tcBorders><w:top w:val="single" w:sz="4" w:space="0" w:color="${c}" /><w:left w:val="single" w:sz="4" w:space="0" w:color="FFFFFF" /><w:bottom w:val="single" w:sz="4" w:space="0" w:color="${c}" /><w:right w:val="single" w:sz="4" w:space="0" w:color="${c}" /></w:tcBorders><w:vAlign w:val="center" /></w:tcPr>`},{key:"HEADER_TABLE",value:'<w:tblPr><w:tblW w:w="0" w:type="auto"/><w:jc w:val="center"/><w:tblBorders><w:top w:val="single" w:sz="4" w:space="0" w:color="auto"/><w:left w:val="single" w:sz="4" w:space="0" w:color="auto"/><w:bottom w:val="single" w:sz="4" w:space="0" w:color="auto"/><w:right w:val="single" w:sz="4" w:space="0" w:color="auto"/><w:insideH w:val="single" w:sz="4" w:space="0" w:color="auto"/><w:insideV w:val="single" w:sz="4" w:space="0" w:color="auto"/></w:tblBorders><w:tblLook w:val="04A0" w:firstRow="1" w:lastRow="0" w:firstColumn="1" w:lastColumn="0" w:noHBand="0" w:noVBand="1"/></w:tblPr>'},{key:"HEADER_TABLE_NO_BORDER",value:'<w:tblPr><w:tblW w:w="0" w:type="auto"/><w:jc w:val="center"/><w:tblLook w:val="04A0" w:firstRow="1" w:lastRow="0" w:firstColumn="1" w:lastColumn="0" w:noHBand="0" w:noVBand="1"/></w:tblPr>'},{key:"HEADER_TABLE_TR",value:'<w:trPr><w:jc w:val="center" /></w:trPr>'},{key:"HEADER_TABLE_LEFT",value:'<w:tcPr><w:tcW w:w="3528" w:type="dxa" /></w:tcPr>'},{key:"HEADER_TABLE_RIGHT",value:'<w:tcPr><w:tcW w:w="7262" w:type="dxa" /><w:hideMark /></w:tcPr>'},{key:"TB_RESULT_TXT",value:'<w:pPr><w:jc w:val="center" /></w:pPr>'},{key:"TB_RESULT_POINT",value:'<w:pPr><w:jc w:val="center" /></w:pPr>'},{key:"TB_RESULT_COMMENT",value:"<w:pPr><w:rPr><w:i /><w:iCs /></w:rPr></w:pPr>"},{key:"LINE_CENTER",value:'<w:pPr><w:jc w:val="center" /></w:pPr>'}];class T{static get(r,u=[]){const t=W.find(l=>l.key===r);if(t){let l=t.value;for(const v of u)l=F(l,v.key,v.value);return btoa(l)}return""}static makeHeaderTable(r,u,t=!0){const l=document.createElement("table"),v=document.createElement("tr");l.appendChild(v);const m=document.createElement("td"),p=document.createElement("td");v.appendChild(m),v.appendChild(p),l.setAttribute("docx-style",T.get(t?"HEADER_TABLE":"HEADER_TABLE_NO_BORDER")),v.setAttribute("docx-style",T.get("HEADER_TABLE_TR")),m.setAttribute("docx-style",T.get("HEADER_TABLE_LEFT")),p.setAttribute("docx-style",T.get("HEADER_TABLE_RIGHT"));const E=document.createElement("span"),D=document.createElement("span");return r.forEach(s=>{if("string"==typeof s){const U=document.createElement("br"),L=document.createElement("b");L.innerText=s,L.appendChild(U),E.appendChild(L)}else E.appendChild(s)}),u.forEach(s=>{if("string"==typeof s){const U=document.createElement("br"),L=document.createElement("b");L.innerText=s,L.appendChild(U),D.appendChild(L)}else D.appendChild(s)}),m.appendChild(E),p.appendChild(D),l.outerHTML}static createLineBold(r){const u=document.createElement("p"),t=document.createElement("b");return t.innerText=r,u.appendChild(t),u}static createLineCenterBold(r){const u=document.createElement("p"),t=document.createElement("b");return u.setAttribute("docx-style",T.get("LINE_CENTER")),t.innerText=r,u.appendChild(t),u}static createLineCenterItalicized(r){const u=document.createElement("p"),t=document.createElement("i");return u.setAttribute("docx-style",T.get("LINE_CENTER")),t.innerText=r,u.appendChild(t),u}}},51322:(ne,N,n)=>{n.d(N,{Q:()=>I});class I{constructor(c,R,F,S,j,W,T,f=1,r=!1,u=!1,t,l,v,m,p){this.id=c,this.pr=R,this.type=F,this.shareType=S,this.item=j,this.examHashId=W,this.examCategoryId=T,this.level=f,this.expandable=r,this.isLoading=u,this.prNode=t,this.isLeaf=l,this.childrenNode=v,this.questions=m,this.children=p}}},42032:(ne,N,n)=>{n.d(N,{Q:()=>T});var I=n(61611),e=n(43234),c=n(48891),R=n(44172),F=n(10296),S=n(35810),j=n(84708),W=n(67638);let T=(()=>{var f;class r{constructor(t,l,v,m,p){this.commonService=t,this.shareFileFlutterService=l,this.encryptService=v,this.formatAnswerSheetService=m,this.exportExcelService=p,this.allAnswerSheet=I.c}exportFileNameOfStudentCode(t,l,v){return 100==t&&(l=""),this.commonService.createFileNameExportFile(["DanhSachSBD"+(l?"_"+l:"")+"_"+this.encryptService.createMd5(v).substring(0,6)])+".xlsx"}chooseAnswerSheetTemplate(t,l,v,m,p,E){return l==this.allAnswerSheet.templateA5Full50?t.createA5AnswerSheetFullA4_50(E??50):l==this.allAnswerSheet.templateA4Essay?t.createA4AnswerSheet_35hh(E??50):l==this.allAnswerSheet.templateA6Full20?t.createA6AnswerSheetFullA4_20(E??20):l==this.allAnswerSheet.templateTrueFalseA4||l==this.allAnswerSheet.templateHSGA4||l==this.allAnswerSheet.templateTrueFalseA4With12Fill||l==this.allAnswerSheet.templateTrueFalseFullA4||l==this.allAnswerSheet.templateTrueFalseA4WithColor||l==this.allAnswerSheet.templateTrueFalseEssayA4||l==this.allAnswerSheet.templateTrueFalseA5||l==this.allAnswerSheet.templateTrueFalseA6||l==this.allAnswerSheet.templateA4WithFax||l==this.allAnswerSheet.templateA4WithFaxV2||l==this.allAnswerSheet.templateA4EssayWith4Fill2018||l==this.allAnswerSheet.templateA4NoEssay2025||l==this.allAnswerSheet.templateA4With96MultipleAndEssay?t.createTrueFalseAnswerSheet():l==this.allAnswerSheet.templateMinistryA4TF?t.createAzotaAnswerSheetMinistry_A4():l==this.allAnswerSheet.templateMinistry4DigitsExamCode?t.createAzotaAnswerSheetMinistry_A4_4DigitsExamCode():t.createAzotaAnswerSheet_A4(E??120)}exportFileNameOfAnswerSheet(t,l,v){var m="";return 100==t&&(l=""),(0==t||100==t)&&(m=this.commonService.createFileNameExportFile(["PhieuTL_"+v+(l?"_"+l:"")])),m}exportFileNameOfAnswerExcelOffline(t,l,v){var m="";return 100==t&&(l=""),(0==t||100==t)&&(m=this.commonService.createFileNameExportFile(["DapAn_"+(l?"_"+l:"")])),m}exportFileNameOfRawExam(t,l,v){var m="";return 100==t&&(l=""),(0==t||100==t)&&(m=this.commonService.createFileNameExportFile([(l?"_"+l:"")+"_"+this.encryptService.createMd5(v).substring(0,6)])),m}exportFileNameOfExamOffline(t,l,v,m){var p="";return 100==t&&(l=""),(0==t||100==t)&&(p=this.commonService.createFileNameExportFile([(m?this.formatAnswerSheetService.formatOfflineExamHashIdToNumber(m,e.c.maxExamCodeLength)+"_":"")+v+(l?"_"+l:"")])),p}printStudentCode(t,l){var v=[];let m=this.commonService.myClone(l);for(let p=0;p<m.length;p++)v.push({code:m[p].code??0,fullName:m[p]?.fullName??"",birthday:m[p]?.birthday??"",phone:m[p]?.phone,className:m[p].classroomName??""});this._exportExcelForCodeNumber(t,v)}_exportExcelForCodeNumber(t,l){let v=this.exportFileNameOfStudentCode(0,t?.name??"",t?.hashId??"");const m=this.exportExcelService.exportExcelForCodeNumber(l);this.shareFileFlutterService.shareFileWithBlob(m,v)}}return(f=r).\u0275fac=function(t){return new(t||f)(c.KVO(R.R),c.KVO(F.R),c.KVO(S.v),c.KVO(j.e),c.KVO(W.x))},f.\u0275prov=c.jDH({token:f,factory:f.\u0275fac,providedIn:"root"}),r})()},91513:(ne,N,n)=>{n.d(N,{c:()=>U});var I=n(73014),e=n(91478),R=n(65106),F=n(37714),S=n(18148),j=n(5382),W=n(43234),T=n(25539),f=n(81234),r=n(48891),u=n(32610),t=n(44172),l=n(36484),v=n(10933),m=n(42032),p=n(84708),E=n(10296),D=n(99927),s=n(78472);let U=(()=>{var L;class ie{constructor(M,h,k,y,d,A,a,x,g){this.docxService=M,this.commonService=h,this.userService=k,this.questionRenderService=y,this.printAnswersheetService=d,this.formatAnswerSheetService=A,this.shareFileFlutterService=a,this.sAztAnswerTypeService=x,this.documentConfigService=g,this.configRenderService=new R.y,this.saveLoadingMsg="",this.isAnsDetail=!1,this.isEnableDebug=!1,this.zipper=new e,this.countRetryLoadJS=0}convertAnswerQuestion(M,h){let k=[],y=[];return M.answerResult&&this.isAnsDetail&&M.answerResult.forEach(d=>{let A=d;const a=M.answers?.find(x=>x.key===d);a&&(A=a.alpha??A),y.push(A)}),M.answers.forEach(d=>{let A="<b>     "+(y.includes(d.alpha??d.key)?"*":"")+(h?(d.alpha?d.alpha:d.key).toLowerCase()+")":(d.alpha?d.alpha:d.key)+".")+"</b> "+(0,f.t5)(d.content);k.push(A)}),k}getDataForExportDocxApi(M,h,k){let y=[],d=0;if(k){let a=this.commonService.myTranslateInstant("lang_cms_publish_test_exam");y.push({content:`<b> ${a} `+this.formatAnswerSheetService.formatOfflineExamHashIdToNumber(k,W.c.maxExamCodeLength)+".</b>",answers:[]})}let A=this.expandInfoParse?.label??this.commonService.myTranslateInstant("lang_auto_cau");return h.forEach(a=>{1!==M.hideGroupQuestion&&a.groupInfo?.isFirstInGroup&&a.groupInfo.groupContent&&y.push({content:`<b>${a.groupInfo.groupContent}<b>`,answers:[]}),this.isEnableDebug&&y.push({content:` <br/><br/><br/>*** <b>Question ID: ${a.id}</b> ***`,answers:[]});let x={content:`<b>${A} `+((a.labelIndex??d)+(M.startQuestionIndex??1))+".</b> "+(this.checkImgAtStart(a.content??"")?"<br/>":"")+(0,f.t5)(a.content),answers:this.convertAnswerQuestion(a??[],this.sAztAnswerTypeService.isTrueFalseAnswer(a))};if(d++,y.push(x),this.isAnsDetail&&((a.help||this.sAztAnswerTypeService.isFillAnswer(a))&&y.push({content:`<b>${this.commonService.myTranslateInstant("lang_auto_loi_giai")}</b><br/> ${a.help}`,answers:[]}),a.answerResult&&this.isAnsDetail)){let g=[];a.answerResult.forEach(V=>{let $=V;const Z=a.answers?.find(ee=>ee.key===V);Z&&($=Z.alpha??$),g.push($)}),this.sAztAnswerTypeService.isFillAnswer(a)&&y.push({content:`${this.commonService.myTranslateInstant("lang_auto_dap_an")}: ${g.join(" | ")}`,answers:[]})}this.isEnableDebug&&y.push({content:"*** *************** .. **************** ***<br/><br/><br/>",answers:[]})}),y}makeDefaultStrValue(M,h){return M&&0!==M.trim().length?M??"":h??""}itemConverterCaller(M,h,k,y,d){var A=this;return new Promise((a,x)=>{var g=0;this.questionRenderService.parseRenderQuestions(M.listQuestion,V=>{if(!this.saveLoadingMsg.includes(")")){g=V/2;var $=(this.commonService.myTranslateInstant("lang_cms_common_loading")??"")+Math.floor(g)+"%";this.changeMsg?this.changeMsg($):S.L.changeMsgLoadingEffect($)}},this.configRenderService,void 0,!0,d).then(V=>{let $=[];const Z=[],ee=[];if((h.indetifyBox||h.examName)&&Z.push(f.$s.createLineCenterBold(this.makeDefaultStrValue(h.indetifyBox,h.examName))),h.subject&&Z.push(f.$s.createLineCenterBold(h.subject)),(h.timeBox||h.examMinutes)&&Z.push(f.$s.createLineCenterItalicized(this.makeDefaultStrValue(h.timeBox,h.examMinutes))),Z.push(f.$s.createLineCenterItalicized("-------------------------")),h.departmentName&&ee.push(f.$s.createLineCenterBold(h.departmentName)),h.schoolName&&ee.push(f.$s.createLineCenterBold(h.schoolName)),$.push({content:f.$s.makeHeaderTable(ee,Z,!1),answers:[]}),$.push({content:f.$s.createLineBold(this.commonService.myTranslateInstant("lang_auto_ho_ten_thi_sinh_offline")??"").outerHTML,answers:[]}),$.push({content:f.$s.createLineBold(this.commonService.myTranslateInstant("lang_auto_so_bao_danh_offline")??"").outerHTML,answers:[]}),$=$.concat(this.getDataForExportDocxApi(y,V,M.offlineExamMixQuestionObj?M.offlineExamMixQuestionObj.hashId??0:void 0)),(0,F.w)()){var se=0;let oe=M.offlineExamMixQuestionObj?.hashId?M.offlineExamMixQuestionObj.hashId.toString().padStart(3,"0"):void 0,ae=oe?this.commonService.myTranslateInstant("lang_auto_ma_de")+" "+oe:"";this.docxService.exportToDocxBinary($,{isHeadless:!0,footerLeft:ae},function(){var Y=(0,I.A)(function*(H,X,J){new Promise(ce=>{setTimeout(()=>{0==H&&(se=g),g=H/X*25+se;var ue=(A.commonService.myTranslateInstant("lang_cms_common_loading")??"")+Math.floor(g)+"%";S.L.changeMsgLoadingEffect(ue)}),ce(!0)})});return function(H,X,J){return Y.apply(this,arguments)}}()).then(Y=>{a({userObj:k,data:Y,input:$,additionParams:h,offlineExamMixQuestionObj:M.offlineExamMixQuestionObj})})}else x(new Error("C\xf3 l\u1ed7i x\u1ea3y ra trong qu\xe1 tr\xecnh x\u1eed l\xfd d\u1eef li\u1ec7u (Kh\xf4ng t\u1ea3i \u0111\u01b0\u1ee3c th\u01b0 vi\u1ec7n). Vui l\xf2ng F5 v\xe0 th\u1eed l\u1ea1i sau!"))}).catch(V=>{x(new Error(V[0].message))})})}masterConverterCaller(M,h,k,y,d,A){return new Promise((a,x)=>{const g=this.userService.getUserObj();let V=this.commonService.myTranslateInstant("lang_testbank_utils_footer_information_school")?.toLowerCase(),$=this.commonService.myTranslateInstant("lang_auto_docx_mon_thi")?.toLowerCase(),Z=this.commonService.myTranslateInstant("lang_auto_docx_bai_thi")?.toLowerCase(),ee=this.commonService.myTranslateInstant("lang_testbank_tested_list_time_homework"),se=this.commonService.myTranslateInstant("lang_core_khong_ke_thoi_gian_giao_de"),oe=this.commonService.myTranslateInstant("lang_testbank_tested_list_minute"),ae=this.commonService.myTranslateInstant("lang_auto_khong_gioi_han");const Y=new j.n(1,{function:(H,X)=>{this.saveLoadingMsg=`${this.commonService.myTranslateInstant("lang_auto_dang_tao_tep_tin_cho_de_thi")} ${X<=1?"":`(${H}/${X}) `}`,this.changeMsg?this.changeMsg(this.saveLoadingMsg):S.L.changeMsgLoadingEffect(this.saveLoadingMsg)}});M.forEach(H=>{let X={schoolName:this.makeDefaultStrValue(y?.nameSchool,`{${V}}`),subject:this.makeDefaultStrValue(y?.nameSubject,`{${$}}`),examName:this.makeDefaultStrValue(h.name,`{${Z}}`),examMinutes:h.minutes&&h.minutes>0?`${ee}: `+h.minutes+` ${oe} (${se})`:` ${ee}: ${ae}`,templateType:d??0,numberOfQuestion:H.listQuestion.length,examId:H.offlineExamMixQuestionObj?.hashId??0,departmentName:y?.departmentName,indetifyBox:y?.indetifyBox,timeBox:y?.timeBox};Y.addTask(this,this.itemConverterCaller,[H,X,g,h,A])}),Y.start().then(H=>{if(H.errs.length>0)x(H.errs[0]);else if(1===H.datas.length){const X=H.datas[0],J=new Blob([X.data],{type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"});let ce=this.createNameExam(h,k,X.offlineExamMixQuestionObj);this.shareFileFlutterService.shareFileWithBlob(J,ce),a()}else H.datas.forEach(X=>{let J=this.createNameExam(h,k,X.offlineExamMixQuestionObj);J=this.replaceAllString(J,"/","_"),this.zipper.file("DOCS/"+J,X.data)}),setTimeout(()=>{this.zipper.generateAsync({type:"blob"}).then(X=>{let J=this.commonService.createFileNameExportFile([h.name??"azota"])+"_offline_test.zip";this.shareFileFlutterService.shareFileWithBlob(X,J),a()},X=>{x(X)})},200)})})}replaceAllString(M,h,k){for(;M.includes(h);)M=M.replace(h,k);return M}createNameExam(M,h,k){return h?this.printAnswersheetService.exportFileNameOfExamOffline(0,M.name??"",h?.hashId??"",k?.hashId??0)+".docx":this.printAnswersheetService.exportFileNameOfRawExam(0,M.name??"",M.hashId??"")+".docx"}downloadExam(M,h,k,y,d,A,a,x,g,V,$){return new Promise((Z,ee)=>{this.isAnsDetail=M,this.isEnableDebug=!!V,this.expandInfoParse=this.commonService.castJsonToObj(h.expandInfo??"{}"),this.changeMsg=g,this.commonService.loadAzotaDocxJs().then(()=>{this.documentConfigService.apiDocumentConfigGetExamConfigDataV2Get(h.hashId??"").subscribe(se=>{if(1==se.success){let oe=0,ae=0;d.forEach((Y,H)=>{Y.labelIndex=Y.originalLabel?Number(Y.originalLabel)-1:H,se.data?.resetQuestionIndex&&Y.groupInfo&&Y.groupInfo.groupId&&(oe!=Y.groupInfo.groupId&&(oe=Y.groupInfo.groupId,ae=0),Y.labelIndex=Y.originalLabel?Number(Y.originalLabel)-1:ae,ae++)})}this.masterConverterCaller([{listQuestion:d,offlineExamMixQuestionObj:y}],h,k,A,a,$).then(()=>{this.zipper=new e,x?x(10):S.L.closeLoadingEffect(10),Z()}).catch(oe=>{S.L.closeLoadingEffect(10),ee(oe)})})}).catch(()=>{x?x(10):S.L.closeLoadingEffect(10),ee(new Error("lang_core_lib_not_load"))})})}downloadExamObjs(M,h,k,y,d,A,a,x,g,V){return new Promise(($,Z)=>{this.isAnsDetail=M,this.isEnableDebug=!!g,this.expandInfoParse=this.commonService.castJsonToObj(h.expandInfo??"{}"),this.changeMsg=x,this.commonService.loadAzotaDocxJs().then(()=>{let ee=!0;const se=[];this.documentConfigService.apiDocumentConfigGetExamConfigDataV2Get(h.hashId??"").subscribe(oe=>{y.forEach(ae=>{let Y=this.commonService.castJsonToClassObjs(T.I,JSON.stringify(ae.mixQuestions??[]))??[];if(Y.length>0){if(1==oe.success){let H=0,X=0;Y.forEach((J,ce)=>{J.labelIndex=J.originalLabel?Number(J.originalLabel)-1:ce,oe.data?.resetQuestionIndex&&J.groupInfo&&J.groupInfo.groupId&&(H!=J.groupInfo.groupId&&(H=J.groupInfo.groupId,X=0),J.labelIndex=J.originalLabel?Number(J.originalLabel)-1:X,X++)})}se.push({listQuestion:Y,offlineExamMixQuestionObj:ae})}else ee=!1}),ee?this.masterConverterCaller(se,h,k,d,A,V).then(()=>{this.zipper=new e,a?a(10):S.L.closeLoadingEffect(10),$()}).catch(ae=>{a?a(10):S.L.closeLoadingEffect(10),Z(ae)}):(a?a(10):S.L.closeLoadingEffect(10),Z(new Error("lang_testbank_exam_is_invalid_condition")))})}).catch(()=>{a?a(10):S.L.closeLoadingEffect(10),Z(new Error("lang_core_lib_not_load"))})})}checkImgAtStart(M){return/^\s*<img/.test(M)}}return(L=ie).\u0275fac=function(M){return new(M||L)(r.KVO(u.I),r.KVO(t.R),r.KVO(l.R),r.KVO(v.g),r.KVO(m.Q),r.KVO(p.e),r.KVO(E.R),r.KVO(D._),r.KVO(s.x_))},L.\u0275prov=r.jDH({token:L,factory:L.\u0275fac,providedIn:"root"}),ie})()},61611:(ne,N,n)=>{n.d(N,{c:()=>I});var I=function(e){return e[e.templateOriginalA4=20]="templateOriginalA4",e[e.templateA5Full50=22]="templateA5Full50",e[e.templateA4Essay=21]="templateA4Essay",e[e.templateA6Full20=23]="templateA6Full20",e[e.templateTrueFalseFullA4=24]="templateTrueFalseFullA4",e[e.templateHSGA4=25]="templateHSGA4",e[e.templateTrueFalseA4With12Fill=26]="templateTrueFalseA4With12Fill",e[e.templateA4With96MultipleAndEssay=27]="templateA4With96MultipleAndEssay",e[e.templateA4Full66WithFax=28]="templateA4Full66WithFax",e[e.templateA4EssayWith4Fill2018=29]="templateA4EssayWith4Fill2018",e[e.templateA4NoEssay2025=31]="templateA4NoEssay2025",e[e.templateMinistryA4TF=2025]="templateMinistryA4TF",e[e.templateMinistry4DigitsExamCode=20254]="templateMinistry4DigitsExamCode",e[e.templateSGDQN=30]="templateSGDQN",e[e.templateTrueFalseA4=15]="templateTrueFalseA4",e[e.templateTrueFalseEssayA4=32]="templateTrueFalseEssayA4",e[e.templateTrueFalseA5=17]="templateTrueFalseA5",e[e.templateTrueFalseA6=18]="templateTrueFalseA6",e[e.templateA4WithFax=19]="templateA4WithFax",e[e.templateA4WithFaxV2=190]="templateA4WithFaxV2",e[e.templateTrueFalseA4WithColor=150]="templateTrueFalseA4WithColor",e[e.templateA4WithColorNew=200]="templateA4WithColorNew",e}(I||{})},52325:(ne,N,n)=>{n.d(N,{Q:()=>y});var I=n(54460),e=n(10936),c=n(65162),R=n(15343),F=n(5502),S=n(44155),j=n(5955),W=n(70050),T=n(9570),f=n(52811),r=n(59640),u=n(36894),t=n(48891);let l=(()=>{var d;class A extends r.H{constructor(){super(...arguments),this.userAnswersObj={},this.isShowOriginAnswer=!1}}return(d=A).\u0275fac=(()=>{let a;return function(g){return(a||(a=t.xGo(d)))(g||d)}})(),d.\u0275cmp=t.VBU({type:d,selectors:[["azt-question-answer-view-content-box-base"]],inputs:{examObj:"examObj",userAnswersObj:"userAnswersObj",questionObj:"questionObj",renderConfigObj:"renderConfigObj",isShowOriginAnswer:"isShowOriginAnswer"},standalone:!0,features:[t.Vt3,t.aNF],decls:0,vars:0,template:function(x,g){},dependencies:[I.MD,e.X1,c.iI,e.YN,S.s,R.flO,W.L,F.Id,u.k],encapsulation:2}),A})();var v=n(47348);const m=(d,A)=>({"text-success":d,"text-danger":A});function p(d,A){1&d&&(t.j41(0,"div",6)(1,"span",7),t.nrm(2,"azt-loading-ui"),t.k0s()())}function E(d,A){if(1&d&&(t.j41(0,"b",14),t.EFF(1),t.nI1(2,"isTrueFalseAnswer"),t.k0s()),2&d){let a;const x=t.XpG().$implicit,g=t.XpG(5);t.R7$(),t.SpI("",t.bMT(2,1,g.questionObj)?(null!==(a=x.alpha)&&void 0!==a?a:x.key).toLowerCase()+")":null!==(a=x.alpha)&&void 0!==a?a:x.key,".")}}function D(d,A){if(1&d&&(t.j41(0,"b",15),t.EFF(1),t.nI1(2,"isTrueFalseAnswer"),t.k0s()),2&d){let a;const x=t.XpG().$implicit,g=t.XpG(5);t.Y8G("ngClass",t.l_i(4,m,g.questionObj.correctAnswer,!g.questionObj.correctAnswer)),t.R7$(),t.SpI(" ",t.bMT(2,2,g.questionObj)?(null!==(a=x.alpha)&&void 0!==a?a:x.key).toLowerCase()+")":null!==(a=x.alpha)&&void 0!==a?a:x.key,". ")}}function s(d,A){if(1&d&&(t.j41(0,"b",14),t.EFF(1),t.nI1(2,"isTrueFalseAnswer"),t.k0s()),2&d){let a;const x=t.XpG().$implicit,g=t.XpG(5);t.R7$(),t.SpI("",t.bMT(2,1,g.questionObj)?(null!==(a=x.alpha)&&void 0!==a?a:x.key).toLowerCase()+")":null!==(a=x.alpha)&&void 0!==a?a:x.key,".")}}function U(d,A){if(1&d&&(t.j41(0,"div",10),t.DNE(1,E,3,3,"b",11)(2,D,3,7,"b",12)(3,s,3,3,"b",11),t.nrm(4,"azt-dynamic-hook",13),t.k0s()),2&d){const a=A.$implicit,x=t.XpG(5);t.R7$(),t.Y8G("ngIf",!x.haveChoose(a)),t.R7$(),t.Y8G("ngIf",x.haveChoose(a)&&x.isTqbDomain),t.R7$(),t.Y8G("ngIf",x.haveChoose(a)&&!x.isTqbDomain),t.R7$(),t.Y8G("content",a.content)}}function L(d,A){if(1&d&&(t.qex(0),t.DNE(1,U,5,4,"div",9),t.bVm()),2&d){const a=t.XpG(4);t.R7$(),t.Y8G("ngForOf",a.questionObj.answersOrigin)}}function ie(d,A){if(1&d&&(t.j41(0,"div",10)(1,"b",14),t.EFF(2),t.nI1(3,"isTrueFalseAnswer"),t.k0s(),t.nrm(4,"azt-dynamic-hook",13),t.k0s()),2&d){let a;const x=A.$implicit,g=t.XpG(5);t.R7$(2),t.JRh(t.bMT(3,2,g.questionObj)?(null!==(a=x.alpha)&&void 0!==a?a:x.key).toLowerCase()+")":(null!==(a=x.alpha)&&void 0!==a?a:x.key)+"."),t.R7$(2),t.Y8G("content",x.content)}}function B(d,A){if(1&d&&t.DNE(0,ie,5,4,"div",9),2&d){const a=t.XpG(4);t.Y8G("ngForOf",a.questionObj.answers)}}function M(d,A){if(1&d&&t.DNE(0,L,2,1,"ng-container",8)(1,B,1,1,"ng-template",null,1,t.C5r),2&d){const a=t.sdS(2),x=t.XpG(3);t.Y8G("ngIf",x.isShowOriginAnswer&&(null==x.questionObj?null:x.questionObj.answersOrigin))("ngIfElse",a)}}function h(d,A){if(1&d&&(t.j41(0,"div",4),t.DNE(1,p,3,0,"div",5)(2,M,3,2,"ng-template",null,0,t.C5r),t.k0s()),2&d){const a=t.sdS(3),x=t.XpG(2);t.Y8G("answerSizeManager",0),t.R7$(),t.Y8G("ngIf",x.questionObj.isLoading)("ngIfElse",a)}}function k(d,A){if(1&d&&(t.qex(0),t.DNE(1,h,4,3,"div",3),t.nI1(2,"isOneChoiceAnswer"),t.nI1(3,"isTrueFalseAnswer"),t.bVm()),2&d){const a=t.XpG();t.R7$(),t.Y8G("ngIf",(t.bMT(2,1,a.questionObj)||t.bMT(3,3,a.questionObj))&&a.questionObj.answers&&a.questionObj.answers.length>0)}}let y=(()=>{var d;class A extends l{haveChoose(x){return!!this.userAnswersObj["id_"+this.questionObj?.id]&&(x.key?x.key.toString()==this.userAnswersObj["id_"+this.questionObj?.id]:x.toString()==this.userAnswersObj["id_"+this.questionObj?.id])}ngOnInit(){}}return(d=A).\u0275fac=(()=>{let a;return function(g){return(a||(a=t.xGo(d)))(g||d)}})(),d.\u0275cmp=t.VBU({type:d,selectors:[["azt-question-answer-view-content-box"]],standalone:!0,features:[t.Vt3,t.aNF],decls:2,vars:3,consts:[["doneLoad",""],["notShowOriginAnswer",""],[4,"ngIf"],["class","row answers",3,"answerSizeManager",4,"ngIf"],[1,"row","answers",3,"answerSizeManager"],["class","col-sm-12 text-center",4,"ngIf","ngIfElse"],[1,"col-sm-12","text-center"],[1,"w-6","h-6","inline-block","mx-auto"],[4,"ngIf","ngIfElse"],["class","answer col-sm-12 col-md-6",4,"ngFor","ngForOf"],[1,"answer","col-sm-12","col-md-6"],["class","answer-label",4,"ngIf"],["class","b-circle w-6 h-6 mr-2",3,"ngClass",4,"ngIf"],[3,"content"],[1,"answer-label"],[1,"b-circle","w-6","h-6","mr-2",3,"ngClass"]],template:function(x,g){1&x&&(t.DNE(0,k,4,5,"ng-container",2),t.nI1(1,"isOfflineExam")),2&x&&t.Y8G("ngIf",!t.bMT(1,1,g.examObj))},dependencies:[j.C,f.R,T.x,I.MD,I.YU,I.Sq,I.bT,e.X1,c.iI,e.YN,S.s,R.flO,W.L,v.st,v.V6,v.FC,F.Id,u.k],styles:['.pr-7[_ngcontent-%COMP%]{padding-right:28px}.w-38px[_ngcontent-%COMP%]{width:38px}.remove-grid[_ngcontent-%COMP%]{display:block!important}.question-standalone-loader-box[_ngcontent-%COMP%]{min-height:50px}  .skeleton-box-loading{width:100%;height:30px;max-width:100%;margin-bottom:5px;display:inline-block}  .skeleton-box-loading:after{position:absolute;top:0;right:0;bottom:0;left:0;transform:translate(-100%);animation:_ngcontent-%COMP%_shimmer 2s infinite;content:""}.question-standalone-box[_ngcontent-%COMP%]{margin-bottom:30px;display:block;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);border-radius:.375rem}.question-standalone-container[_ngcontent-%COMP%]{padding:15px}.question-standalone-for-test-finder[_ngcontent-%COMP%]{border:none;margin-bottom:0;padding:0}.question-standalone-for-test-finder[_ngcontent-%COMP%]   .question-standalone-main-content[_ngcontent-%COMP%]{padding:15px;border:1px solid rgb(228,228,228)}.group-of-question-standalone-for-test-finder[_ngcontent-%COMP%]{padding:15px!important;border:1px solid rgb(228,228,228)!important}.question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid #2262ae!important;outline:3px solid rgba(125,160,201,.65)!important}.group-of-question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid green!important;outline:3px solid rgba(0,193,0,.321)!important}.question-standalone-label[_ngcontent-%COMP%]{font-weight:700}.question-standalone-content-box[_ngcontent-%COMP%]{position:relative}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]{color:#f44336;position:relative;padding-left:20px;display:flex;align-items:center}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]:before{content:"!";position:absolute;left:0;color:#fff;background:#f44336;width:15px;height:15px;text-align:center;border-radius:50%;font-size:smaller;display:flex;justify-content:center;align-items:center}.question-standalone-step-container-box[_ngcontent-%COMP%]{margin-bottom:50px}.group-content-of-question-standalone[_ngcontent-%COMP%]{margin-bottom:10px;font-weight:700}.answer[_ngcontent-%COMP%]{display:flex;align-items:center}.answer-label[_ngcontent-%COMP%]{width:20px;height:30px;min-width:20px;min-height:30px;display:flex;align-items:center;justify-content:flex-start;border-radius:50%;border-width:2px;border-style:solid;border-color:transparent}.answer-box[_ngcontent-%COMP%]{border-radius:0 0 3px 3px;padding:8px 20px;justify-content:space-between;align-items:center}.selected-answer[_ngcontent-%COMP%]{background-color:#f39c12;color:#fff}.answer-content-front[_ngcontent-%COMP%]{display:flex!important;flex-wrap:wrap;width:calc(100% - 30px)}.explainTxt[_ngcontent-%COMP%]{width:125px;font-weight:500;display:flex;align-items:center}#examHeader[_ngcontent-%COMP%]{display:block;border:1px solid #e7e7e7;border-radius:3px;overflow:hidden}.arrow_btn[_ngcontent-%COMP%]{font-size:20px;vertical-align:middle;width:20px;height:20px;color:#fff;margin-left:auto!important;margin-right:auto!important;-webkit-user-select:none;user-select:none}.bottom_action[_ngcontent-%COMP%]{position:fixed;padding:15px;bottom:0;left:0;background:#312e2e;color:#fff;width:100%}.bottom_action[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]{display:block}.btn-ans-result[_ngcontent-%COMP%]{color:#fff;background-color:#f39c12}.show-list[_ngcontent-%COMP%]{max-width:200px}.show-list[_ngcontent-%COMP%]   .show-sheet[_ngcontent-%COMP%]   .listli[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:27px;height:27px;border-radius:50%;border:1px solid #347da5;display:flex;align-items:center;color:#fff;justify-content:center;font-size:12px;cursor:pointer;-webkit-user-select:none;user-select:none}.top_action[_ngcontent-%COMP%]{position:fixed;padding:10px;top:0;left:0;background:#312e2e;color:#fff;width:100%}.scrollSheetMobile[_ngcontent-%COMP%]{max-height:200px;overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.scrollSheetMobile[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.notify-badge[_ngcontent-%COMP%]{position:absolute;right:3px;top:3px;text-align:center;color:#afafaf;padding:0;font-size:20px;cursor:pointer}.attach-container[_ngcontent-%COMP%]{background:#fff;padding:10px 0 0;border-radius:5px;width:83.33%;border:1px solid #e8e8e8}.answer-review[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:50%;border:1px solid rgb(52,125,165);display:flex;align-items:center;color:#fff;justify-content:center;font-size:15px;-webkit-user-select:none;user-select:none}.border-none[_ngcontent-%COMP%]{border:none!important}.bg-question[_ngcontent-%COMP%]{margin-top:15px;padding:15px 10px;background:#fff}.question-pending-part[_ngcontent-%COMP%]{width:100%;height:50px}.pencil-edit[_ngcontent-%COMP%]{position:absolute;top:-5px;right:-5px;width:30px;height:30px;border-radius:50%;text-align:center;background:#a9a9a9;z-index:9999}.pencil-edit[_ngcontent-%COMP%]   .lucide[_ngcontent-%COMP%]{color:#fff;stroke-width:2.5px;height:29px}.margin-question-bar[_ngcontent-%COMP%]{margin-top:calc(3rem + 40px)!important}.sheet-screen[_ngcontent-%COMP%]{max-height:calc(100vh - 140px);overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.sheet-screen[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.box-help[_ngcontent-%COMP%]{border-top:1px solid #d7d7d7;padding:10px 30px 0 0}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]{text-align:center;font-size:11px;margin-top:-20px}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#fff;padding:0 10px;color:#d58e0b}.box-help[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]{font-size:13px;overflow-x:auto;overflow-y:hidden}  .layout{display:grid;margin:20px 0;grid-row-gap:20px}  .layout-4{grid-template-columns:1fr 1fr 1fr 1fr}  .layout-2{grid-template-columns:1fr 1fr}  .layout-1{grid-template-columns:1fr}  .question-standalone-content-box{max-width:100%;overflow-x:auto;overflow-y:hidden}  #boxContentQuestion .question-standalone-container{max-width:800px}@keyframes _ngcontent-%COMP%_shimmer{to{transform:translate(100%)}}@media (max-width: 768px){.answer-content-front[_ngcontent-%COMP%]{justify-content:center}.btn-ans-result[_ngcontent-%COMP%]{margin-right:auto!important}}@media (max-width: 800px){  #boxContentQuestion .question-standalone-container{max-width:calc(90vw - 16px)!important}}']}),A})()},52654:(ne,N,n)=>{n.d(N,{a:()=>A});var I=n(54460),e=n(10936),c=n(65162),R=n(15343),F=n(5502),S=n(44155),j=n(47348),W=n(70050),T=n(52325),f=n(6625),r=n(54313),u=n(15423),t=n(58447),l=n(34660),v=n(60780),m=n(64486),p=n(66793),E=n(78111),D=n(36894),s=n(48891),U=n(42789);const L=a=>({"skeleton-box-loading":a}),ie=a=>({"pb-2":a}),B=a=>({display:a});function M(a,x){if(1&a&&s.nrm(0,"div",3),2&a){const g=s.XpG();s.Y8G("ngClass",s.eq3(1,L,g.renderConfigObj.isFirstRender))}}function h(a,x){if(1&a&&s.nrm(0,"azt-test-audio-ui",16),2&a){const g=s.XpG(2);s.Y8G("questionObj",g.questionObj)("isShowList",!0)}}function k(a,x){if(1&a&&s.nrm(0,"azt-question-label-box",17),2&a){const g=s.XpG(2);s.Y8G("examObj",g.examObj)("questionObj",g.questionObj)("renderConfigObj",g.renderConfigObj)("curQuestionIndex",g.curQuestionIndex)}}function y(a,x){if(1&a){const g=s.RV6();s.j41(0,"div",18)(1,"a",19),s.bIt("click",function(){s.eBV(g);const $=s.XpG(2);return s.Njj($.showExplainBox())}),s.EFF(2),s.nI1(3,"mytranslate"),s.nI1(4,"mytranslate"),s.k0s()()}if(2&a){const g=s.XpG(2);s.R7$(2),s.SpI(" ",g.isShowExplain?s.bMT(3,1,"lang_auto_an_giai_thich"):s.bMT(4,3,"lang_auto_xem_giai_thich")," ")}}function d(a,x){if(1&a&&(s.j41(0,"div",4)(1,"div",5),s.nrm(2,"azt-question-group-content-box",6),s.j41(3,"div",7),s.DNE(4,h,1,2,"azt-test-audio-ui",8),s.j41(5,"div",9),s.DNE(6,k,1,4,"azt-question-label-box",10),s.k0s(),s.nrm(7,"azt-question-content-box",6)(8,"azt-question-answer-view-content-box",11),s.j41(9,"div",12),s.nrm(10,"azt-question-answer-view-with-simple-result-box-for-teacher",13),s.DNE(11,y,5,5,"div",14),s.k0s()()(),s.nrm(12,"azt-question-explain-box",15),s.k0s()),2&a){const g=s.XpG();s.R7$(),s.xc7("font-size","1em")("line-height","1.7")("overflow","auto"),s.Y8G("id","question_render_container_"+g.questionObj.id)("ngClass",s.eq3(26,ie,g.questionObj.attachments.length>0)),s.R7$(),s.Y8G("examObj",g.examObj)("questionObj",g.questionObj)("renderConfigObj",g.renderConfigObj),s.R7$(2),s.Y8G("ngIf",g.questionObj.attachments.length>0),s.R7$(2),s.Y8G("ngIf",!g.hideQuestionLabel),s.R7$(),s.Y8G("examObj",g.examObj)("questionObj",g.questionObj)("renderConfigObj",g.renderConfigObj),s.R7$(),s.Y8G("examObj",g.examObj)("isShowOriginAnswer",!0)("questionObj",g.questionObj)("renderConfigObj",g.renderConfigObj),s.R7$(2),s.Y8G("questionObj",g.questionObj),s.R7$(),s.Y8G("ngIf",g.questionObj.help&&!g.isExport),s.R7$(),s.Y8G("ngStyle",s.eq3(28,B,g.isShowExplain?"block":"none"))("isShowExplain",g.isShowExplain)("questionObj",g.questionObj)("renderConfigObj",g.renderConfigObj)}}let A=(()=>{var a;class x extends m.I{showExplainBox(){this.isShowExplain=!this.isShowExplain}ngOnInit(){super.ngOnInit();let V=new p.C(this.disableLazy,this.disableRender,this.isExport);super.initData(V,this.follower,this.questionObj)}constructor(){super(),this.follower=new E.e,this.curQuestionIndex=0,this.isShowExplain=!1,this.isExport=!1,this.disableLazy=!1,this.disableRender=!1,this.hideQuestionLabel=!1}}return(a=x).\u0275fac=function(V){return new(V||a)},a.\u0275cmp=s.VBU({type:a,selectors:[["azt-question-standalone-for-preview"]],inputs:{examObj:"examObj",questionObj:"questionObj",follower:"follower",curQuestionIndex:"curQuestionIndex",isShowExplain:"isShowExplain",isExport:"isExport",disableLazy:"disableLazy",disableRender:"disableRender",hideQuestionLabel:"hideQuestionLabel"},standalone:!0,features:[s.Vt3,s.aNF],decls:4,vars:3,consts:[["elementRended",""],["load_effect_lazy","",1,"question-standalone-box",3,"id"],["class","question-standalone-loader-box",3,"ngClass",4,"ngIf","ngIfElse"],[1,"question-standalone-loader-box",3,"ngClass"],[1,"question-standalone-content-box"],[1,"question-standalone-container","box","border-none",3,"id","ngClass"],[3,"examObj","questionObj","renderConfigObj"],[1,"question-standalone-main-content"],[3,"questionObj","isShowList",4,"ngIf"],[1,"flex","items-center","justify-between"],[3,"examObj","questionObj","renderConfigObj","curQuestionIndex",4,"ngIf"],[3,"examObj","isShowOriginAnswer","questionObj","renderConfigObj"],[1,"flex","justify-between"],[3,"questionObj"],["class","ml-auto mt-1",4,"ngIf"],[2,"width","calc(100% - 24px)","overflow-x","auto","margin","auto",3,"ngStyle","isShowExplain","questionObj","renderConfigObj"],[3,"questionObj","isShowList"],[3,"examObj","questionObj","renderConfigObj","curQuestionIndex"],[1,"ml-auto","mt-1"],["azt-track-service","azt-standalone-question-4zQT3eCoTDc",1,"btn","btn-transparent",2,"user-select","none",3,"click"]],template:function(V,$){if(1&V&&(s.j41(0,"div",1),s.DNE(1,M,1,3,"div",2)(2,d,13,30,"ng-template",null,0,s.C5r),s.k0s()),2&V){const Z=s.sdS(3);s.Y8G("id","question_render_element_"+$.questionObj.id),s.R7$(),s.Y8G("ngIf",!$.renderConfigObj.isRenderElement)("ngIfElse",Z)}},dependencies:[t.y,v.c,l.S,r.$,T.Q,f.l,u.N,I.MD,I.YU,I.bT,I.B3,e.X1,c.iI,e.YN,j.wp,S.s,R.flO,W.L,F.Id,D.k,U.N],styles:['.pr-7[_ngcontent-%COMP%]{padding-right:28px}.w-38px[_ngcontent-%COMP%]{width:38px}.remove-grid[_ngcontent-%COMP%]{display:block!important}.question-standalone-loader-box[_ngcontent-%COMP%]{min-height:50px}  .skeleton-box-loading{width:100%;height:30px;max-width:100%;margin-bottom:5px;display:inline-block}  .skeleton-box-loading:after{position:absolute;top:0;right:0;bottom:0;left:0;transform:translate(-100%);animation:_ngcontent-%COMP%_shimmer 2s infinite;content:""}.question-standalone-box[_ngcontent-%COMP%]{margin-bottom:30px;display:block;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);border-radius:.375rem}.question-standalone-container[_ngcontent-%COMP%]{padding:15px}.question-standalone-for-test-finder[_ngcontent-%COMP%]{border:none;margin-bottom:0;padding:0}.question-standalone-for-test-finder[_ngcontent-%COMP%]   .question-standalone-main-content[_ngcontent-%COMP%]{padding:15px;border:1px solid rgb(228,228,228)}.group-of-question-standalone-for-test-finder[_ngcontent-%COMP%]{padding:15px!important;border:1px solid rgb(228,228,228)!important}.question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid #2262ae!important;outline:3px solid rgba(125,160,201,.65)!important}.group-of-question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid green!important;outline:3px solid rgba(0,193,0,.321)!important}.question-standalone-label[_ngcontent-%COMP%]{font-weight:700}.question-standalone-content-box[_ngcontent-%COMP%]{position:relative}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]{color:#f44336;position:relative;padding-left:20px;display:flex;align-items:center}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]:before{content:"!";position:absolute;left:0;color:#fff;background:#f44336;width:15px;height:15px;text-align:center;border-radius:50%;font-size:smaller;display:flex;justify-content:center;align-items:center}.question-standalone-step-container-box[_ngcontent-%COMP%]{margin-bottom:50px}.group-content-of-question-standalone[_ngcontent-%COMP%]{margin-bottom:10px;font-weight:700}.answer[_ngcontent-%COMP%]{display:flex;align-items:center}.answer-label[_ngcontent-%COMP%]{width:20px;height:30px;min-width:20px;min-height:30px;display:flex;align-items:center;justify-content:flex-start;border-radius:50%;border-width:2px;border-style:solid;border-color:transparent}.answer-box[_ngcontent-%COMP%]{border-radius:0 0 3px 3px;padding:8px 20px;justify-content:space-between;align-items:center}.selected-answer[_ngcontent-%COMP%]{background-color:#f39c12;color:#fff}.answer-content-front[_ngcontent-%COMP%]{display:flex!important;flex-wrap:wrap;width:calc(100% - 30px)}.explainTxt[_ngcontent-%COMP%]{width:125px;font-weight:500;display:flex;align-items:center}#examHeader[_ngcontent-%COMP%]{display:block;border:1px solid #e7e7e7;border-radius:3px;overflow:hidden}.arrow_btn[_ngcontent-%COMP%]{font-size:20px;vertical-align:middle;width:20px;height:20px;color:#fff;margin-left:auto!important;margin-right:auto!important;-webkit-user-select:none;user-select:none}.bottom_action[_ngcontent-%COMP%]{position:fixed;padding:15px;bottom:0;left:0;background:#312e2e;color:#fff;width:100%}.bottom_action[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]{display:block}.btn-ans-result[_ngcontent-%COMP%]{color:#fff;background-color:#f39c12}.show-list[_ngcontent-%COMP%]{max-width:200px}.show-list[_ngcontent-%COMP%]   .show-sheet[_ngcontent-%COMP%]   .listli[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:27px;height:27px;border-radius:50%;border:1px solid #347da5;display:flex;align-items:center;color:#fff;justify-content:center;font-size:12px;cursor:pointer;-webkit-user-select:none;user-select:none}.top_action[_ngcontent-%COMP%]{position:fixed;padding:10px;top:0;left:0;background:#312e2e;color:#fff;width:100%}.scrollSheetMobile[_ngcontent-%COMP%]{max-height:200px;overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.scrollSheetMobile[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.notify-badge[_ngcontent-%COMP%]{position:absolute;right:3px;top:3px;text-align:center;color:#afafaf;padding:0;font-size:20px;cursor:pointer}.attach-container[_ngcontent-%COMP%]{background:#fff;padding:10px 0 0;border-radius:5px;width:83.33%;border:1px solid #e8e8e8}.answer-review[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:50%;border:1px solid rgb(52,125,165);display:flex;align-items:center;color:#fff;justify-content:center;font-size:15px;-webkit-user-select:none;user-select:none}.border-none[_ngcontent-%COMP%]{border:none!important}.bg-question[_ngcontent-%COMP%]{margin-top:15px;padding:15px 10px;background:#fff}.question-pending-part[_ngcontent-%COMP%]{width:100%;height:50px}.pencil-edit[_ngcontent-%COMP%]{position:absolute;top:-5px;right:-5px;width:30px;height:30px;border-radius:50%;text-align:center;background:#a9a9a9;z-index:9999}.pencil-edit[_ngcontent-%COMP%]   .lucide[_ngcontent-%COMP%]{color:#fff;stroke-width:2.5px;height:29px}.margin-question-bar[_ngcontent-%COMP%]{margin-top:calc(3rem + 40px)!important}.sheet-screen[_ngcontent-%COMP%]{max-height:calc(100vh - 140px);overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.sheet-screen[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.box-help[_ngcontent-%COMP%]{border-top:1px solid #d7d7d7;padding:10px 30px 0 0}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]{text-align:center;font-size:11px;margin-top:-20px}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#fff;padding:0 10px;color:#d58e0b}.box-help[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]{font-size:13px;overflow-x:auto;overflow-y:hidden}  .layout{display:grid;margin:20px 0;grid-row-gap:20px}  .layout-4{grid-template-columns:1fr 1fr 1fr 1fr}  .layout-2{grid-template-columns:1fr 1fr}  .layout-1{grid-template-columns:1fr}  .question-standalone-content-box{max-width:100%;overflow-x:auto;overflow-y:hidden}  #boxContentQuestion .question-standalone-container{max-width:800px}@keyframes _ngcontent-%COMP%_shimmer{to{transform:translate(100%)}}@media (max-width: 768px){.answer-content-front[_ngcontent-%COMP%]{justify-content:center}.btn-ans-result[_ngcontent-%COMP%]{margin-right:auto!important}}@media (max-width: 800px){  #boxContentQuestion .question-standalone-container{max-width:calc(90vw - 16px)!important}}']}),x})()},15423:(ne,N,n)=>{n.d(N,{N:()=>m});var I=n(59640),e=n(9570),c=n(54460),R=n(10936),F=n(65162),S=n(47348),j=n(44155),W=n(15343),T=n(70050),f=n(5502),r=n(36894),u=n(48891);const t=(p,E)=>({"pt-1 pb-3":p,"pt-3":E}),l=p=>({display:p});function v(p,E){1&p&&(u.j41(0,"div",6),u.EFF(1),u.nI1(2,"mytranslate"),u.k0s()),2&p&&(u.R7$(),u.SpI(" ",u.bMT(2,1,"lang_core_huong_dan_chon_vao_bang_va_vuot_sang_trai_de_xem_cac_thong_tin_khac"),"\n"))}let m=(()=>{var p;class E extends I.H{constructor(){super(...arguments),this.isShowExplain=!1}}return(p=E).\u0275fac=(()=>{let D;return function(U){return(D||(D=u.xGo(p)))(U||p)}})(),p.\u0275cmp=u.VBU({type:p,selectors:[["azt-question-explain-box"]],inputs:{isShowExplain:"isShowExplain",questionObj:"questionObj",renderConfigObj:"renderConfigObj"},standalone:!0,features:[u.Vt3,u.aNF],decls:6,vars:9,consts:[["elementGroup",""],["elementHook",""],["class","mt-1 box p-2",4,"ngIf"],[1,"help-content","box","mt-1","px-3",2,"display","inherit","border-top-right-radius","0","border-top-left-radius","0","box-shadow","none","overflow","auto","padding-bottom","20px",3,"ngClass","ngStyle"],[2,"width","fit-content"],[3,"content"],[1,"mt-1","box","p-2"]],template:function(s,U){if(1&s&&(u.DNE(0,v,3,3,"div",2),u.j41(1,"div",3,0)(3,"div",4,1),u.nrm(5,"azt-dynamic-hook",5),u.k0s()()),2&s){let L;const ie=u.sdS(2),B=u.sdS(4);u.Y8G("ngIf",ie.offsetWidth<B.offsetWidth&&U.isMobileDevice),u.R7$(),u.Y8G("ngClass",u.l_i(4,t,!U.isMobileDevice,U.isMobileDevice))("ngStyle",u.eq3(7,l,U.isShowExplain&&U.questionObj.help?"inherit":"none")),u.R7$(4),u.Y8G("content",null!==(L=U.questionObj.help)&&void 0!==L?L:"")}},dependencies:[e.x,c.MD,c.YU,c.bT,c.B3,R.X1,F.iI,R.YN,S.wp,j.s,W.flO,T.L,f.Id,r.k],styles:['.pr-7[_ngcontent-%COMP%]{padding-right:28px}.w-38px[_ngcontent-%COMP%]{width:38px}.remove-grid[_ngcontent-%COMP%]{display:block!important}.question-standalone-loader-box[_ngcontent-%COMP%]{min-height:50px}  .skeleton-box-loading{width:100%;height:30px;max-width:100%;margin-bottom:5px;display:inline-block}  .skeleton-box-loading:after{position:absolute;top:0;right:0;bottom:0;left:0;transform:translate(-100%);animation:_ngcontent-%COMP%_shimmer 2s infinite;content:""}.question-standalone-box[_ngcontent-%COMP%]{margin-bottom:30px;display:block;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);border-radius:.375rem}.question-standalone-container[_ngcontent-%COMP%]{padding:15px}.question-standalone-for-test-finder[_ngcontent-%COMP%]{border:none;margin-bottom:0;padding:0}.question-standalone-for-test-finder[_ngcontent-%COMP%]   .question-standalone-main-content[_ngcontent-%COMP%]{padding:15px;border:1px solid rgb(228,228,228)}.group-of-question-standalone-for-test-finder[_ngcontent-%COMP%]{padding:15px!important;border:1px solid rgb(228,228,228)!important}.question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid #2262ae!important;outline:3px solid rgba(125,160,201,.65)!important}.group-of-question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid green!important;outline:3px solid rgba(0,193,0,.321)!important}.question-standalone-label[_ngcontent-%COMP%]{font-weight:700}.question-standalone-content-box[_ngcontent-%COMP%]{position:relative}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]{color:#f44336;position:relative;padding-left:20px;display:flex;align-items:center}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]:before{content:"!";position:absolute;left:0;color:#fff;background:#f44336;width:15px;height:15px;text-align:center;border-radius:50%;font-size:smaller;display:flex;justify-content:center;align-items:center}.question-standalone-step-container-box[_ngcontent-%COMP%]{margin-bottom:50px}.group-content-of-question-standalone[_ngcontent-%COMP%]{margin-bottom:10px;font-weight:700}.answer[_ngcontent-%COMP%]{display:flex;align-items:center}.answer-label[_ngcontent-%COMP%]{width:20px;height:30px;min-width:20px;min-height:30px;display:flex;align-items:center;justify-content:flex-start;border-radius:50%;border-width:2px;border-style:solid;border-color:transparent}.answer-box[_ngcontent-%COMP%]{border-radius:0 0 3px 3px;padding:8px 20px;justify-content:space-between;align-items:center}.selected-answer[_ngcontent-%COMP%]{background-color:#f39c12;color:#fff}.answer-content-front[_ngcontent-%COMP%]{display:flex!important;flex-wrap:wrap;width:calc(100% - 30px)}.explainTxt[_ngcontent-%COMP%]{width:125px;font-weight:500;display:flex;align-items:center}#examHeader[_ngcontent-%COMP%]{display:block;border:1px solid #e7e7e7;border-radius:3px;overflow:hidden}.arrow_btn[_ngcontent-%COMP%]{font-size:20px;vertical-align:middle;width:20px;height:20px;color:#fff;margin-left:auto!important;margin-right:auto!important;-webkit-user-select:none;user-select:none}.bottom_action[_ngcontent-%COMP%]{position:fixed;padding:15px;bottom:0;left:0;background:#312e2e;color:#fff;width:100%}.bottom_action[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]{display:block}.btn-ans-result[_ngcontent-%COMP%]{color:#fff;background-color:#f39c12}.show-list[_ngcontent-%COMP%]{max-width:200px}.show-list[_ngcontent-%COMP%]   .show-sheet[_ngcontent-%COMP%]   .listli[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:27px;height:27px;border-radius:50%;border:1px solid #347da5;display:flex;align-items:center;color:#fff;justify-content:center;font-size:12px;cursor:pointer;-webkit-user-select:none;user-select:none}.top_action[_ngcontent-%COMP%]{position:fixed;padding:10px;top:0;left:0;background:#312e2e;color:#fff;width:100%}.scrollSheetMobile[_ngcontent-%COMP%]{max-height:200px;overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.scrollSheetMobile[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.notify-badge[_ngcontent-%COMP%]{position:absolute;right:3px;top:3px;text-align:center;color:#afafaf;padding:0;font-size:20px;cursor:pointer}.attach-container[_ngcontent-%COMP%]{background:#fff;padding:10px 0 0;border-radius:5px;width:83.33%;border:1px solid #e8e8e8}.answer-review[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:50%;border:1px solid rgb(52,125,165);display:flex;align-items:center;color:#fff;justify-content:center;font-size:15px;-webkit-user-select:none;user-select:none}.border-none[_ngcontent-%COMP%]{border:none!important}.bg-question[_ngcontent-%COMP%]{margin-top:15px;padding:15px 10px;background:#fff}.question-pending-part[_ngcontent-%COMP%]{width:100%;height:50px}.pencil-edit[_ngcontent-%COMP%]{position:absolute;top:-5px;right:-5px;width:30px;height:30px;border-radius:50%;text-align:center;background:#a9a9a9;z-index:9999}.pencil-edit[_ngcontent-%COMP%]   .lucide[_ngcontent-%COMP%]{color:#fff;stroke-width:2.5px;height:29px}.margin-question-bar[_ngcontent-%COMP%]{margin-top:calc(3rem + 40px)!important}.sheet-screen[_ngcontent-%COMP%]{max-height:calc(100vh - 140px);overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.sheet-screen[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.box-help[_ngcontent-%COMP%]{border-top:1px solid #d7d7d7;padding:10px 30px 0 0}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]{text-align:center;font-size:11px;margin-top:-20px}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#fff;padding:0 10px;color:#d58e0b}.box-help[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]{font-size:13px;overflow-x:auto;overflow-y:hidden}  .layout{display:grid;margin:20px 0;grid-row-gap:20px}  .layout-4{grid-template-columns:1fr 1fr 1fr 1fr}  .layout-2{grid-template-columns:1fr 1fr}  .layout-1{grid-template-columns:1fr}  .question-standalone-content-box{max-width:100%;overflow-x:auto;overflow-y:hidden}  #boxContentQuestion .question-standalone-container{max-width:800px}@keyframes _ngcontent-%COMP%_shimmer{to{transform:translate(100%)}}@media (max-width: 768px){.answer-content-front[_ngcontent-%COMP%]{justify-content:center}.btn-ans-result[_ngcontent-%COMP%]{margin-right:auto!important}}@media (max-width: 800px){  #boxContentQuestion .question-standalone-container{max-width:calc(90vw - 16px)!important}}']}),E})()},34660:(ne,N,n)=>{n.d(N,{S:()=>t});var I=n(59640),e=n(54460),c=n(10936),R=n(65162),F=n(47348),S=n(44155),j=n(15343),W=n(70050),T=n(5502),f=n(36894),r=n(48891);function u(l,v){1&l&&(r.j41(0,"span"),r.EFF(1),r.nI1(2,"mytranslate"),r.k0s()),2&l&&(r.R7$(),r.SpI("(",r.bMT(2,1,"lang_auto_hoi_de_thi_offline"),")"))}let t=(()=>{var l;class v extends I.H{constructor(){super(...arguments),this.curQuestionIndex=0}get customQuestionLabel(){const p=this.commonService.castJsonToObj(this.examObj.expandInfo??"")??void 0;return p?.label?p.label:"C\xe2u"}ngOnInit(){this.startQuestionIndex=this.examObj.startQuestionIndex??1}}return(l=v).\u0275fac=(()=>{let m;return function(E){return(m||(m=r.xGo(l)))(E||l)}})(),l.\u0275cmp=r.VBU({type:l,selectors:[["azt-question-label-box"]],inputs:{examObj:"examObj",questionObj:"questionObj",renderConfigObj:"renderConfigObj",curQuestionIndex:"curQuestionIndex"},standalone:!0,features:[r.Vt3,r.aNF],decls:4,vars:4,consts:[[1,"question-standalone-label"],[4,"ngIf"]],template:function(p,E){if(1&p&&(r.j41(0,"div",0),r.EFF(1),r.DNE(2,u,3,3,"span",1),r.nI1(3,"isOfflineExam"),r.k0s()),2&p){let D;r.R7$(),r.SpI(" ",E.customQuestionLabel+" "+(null!==(D=E.questionObj.originalLabel)&&void 0!==D?D:(void 0!==E.questionObj.labelIndex?E.questionObj.labelIndex:E.curQuestionIndex)+E.startQuestionIndex)," "),r.R7$(),r.Y8G("ngIf",r.bMT(3,2,E.examObj))}},dependencies:[e.MD,e.bT,c.X1,R.iI,c.YN,F.wp,S.s,j.flO,W.L,F.st,T.Id,f.k],styles:['.pr-7[_ngcontent-%COMP%]{padding-right:28px}.w-38px[_ngcontent-%COMP%]{width:38px}.remove-grid[_ngcontent-%COMP%]{display:block!important}.question-standalone-loader-box[_ngcontent-%COMP%]{min-height:50px}  .skeleton-box-loading{width:100%;height:30px;max-width:100%;margin-bottom:5px;display:inline-block}  .skeleton-box-loading:after{position:absolute;top:0;right:0;bottom:0;left:0;transform:translate(-100%);animation:_ngcontent-%COMP%_shimmer 2s infinite;content:""}.question-standalone-box[_ngcontent-%COMP%]{margin-bottom:30px;display:block;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);border-radius:.375rem}.question-standalone-container[_ngcontent-%COMP%]{padding:15px}.question-standalone-for-test-finder[_ngcontent-%COMP%]{border:none;margin-bottom:0;padding:0}.question-standalone-for-test-finder[_ngcontent-%COMP%]   .question-standalone-main-content[_ngcontent-%COMP%]{padding:15px;border:1px solid rgb(228,228,228)}.group-of-question-standalone-for-test-finder[_ngcontent-%COMP%]{padding:15px!important;border:1px solid rgb(228,228,228)!important}.question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid #2262ae!important;outline:3px solid rgba(125,160,201,.65)!important}.group-of-question-standalone-has-selected[_ngcontent-%COMP%]{border:1px solid green!important;outline:3px solid rgba(0,193,0,.321)!important}.question-standalone-label[_ngcontent-%COMP%]{font-weight:700}.question-standalone-content-box[_ngcontent-%COMP%]{position:relative}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]{color:#f44336;position:relative;padding-left:20px;display:flex;align-items:center}.question-standalone-is-invalid-validation[_ngcontent-%COMP%]:before{content:"!";position:absolute;left:0;color:#fff;background:#f44336;width:15px;height:15px;text-align:center;border-radius:50%;font-size:smaller;display:flex;justify-content:center;align-items:center}.question-standalone-step-container-box[_ngcontent-%COMP%]{margin-bottom:50px}.group-content-of-question-standalone[_ngcontent-%COMP%]{margin-bottom:10px;font-weight:700}.answer[_ngcontent-%COMP%]{display:flex;align-items:center}.answer-label[_ngcontent-%COMP%]{width:20px;height:30px;min-width:20px;min-height:30px;display:flex;align-items:center;justify-content:flex-start;border-radius:50%;border-width:2px;border-style:solid;border-color:transparent}.answer-box[_ngcontent-%COMP%]{border-radius:0 0 3px 3px;padding:8px 20px;justify-content:space-between;align-items:center}.selected-answer[_ngcontent-%COMP%]{background-color:#f39c12;color:#fff}.answer-content-front[_ngcontent-%COMP%]{display:flex!important;flex-wrap:wrap;width:calc(100% - 30px)}.explainTxt[_ngcontent-%COMP%]{width:125px;font-weight:500;display:flex;align-items:center}#examHeader[_ngcontent-%COMP%]{display:block;border:1px solid #e7e7e7;border-radius:3px;overflow:hidden}.arrow_btn[_ngcontent-%COMP%]{font-size:20px;vertical-align:middle;width:20px;height:20px;color:#fff;margin-left:auto!important;margin-right:auto!important;-webkit-user-select:none;user-select:none}.bottom_action[_ngcontent-%COMP%]{position:fixed;padding:15px;bottom:0;left:0;background:#312e2e;color:#fff;width:100%}.bottom_action[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]{display:block}.btn-ans-result[_ngcontent-%COMP%]{color:#fff;background-color:#f39c12}.show-list[_ngcontent-%COMP%]{max-width:200px}.show-list[_ngcontent-%COMP%]   .show-sheet[_ngcontent-%COMP%]   .listli[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:27px;height:27px;border-radius:50%;border:1px solid #347da5;display:flex;align-items:center;color:#fff;justify-content:center;font-size:12px;cursor:pointer;-webkit-user-select:none;user-select:none}.top_action[_ngcontent-%COMP%]{position:fixed;padding:10px;top:0;left:0;background:#312e2e;color:#fff;width:100%}.scrollSheetMobile[_ngcontent-%COMP%]{max-height:200px;overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.scrollSheetMobile[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.notify-badge[_ngcontent-%COMP%]{position:absolute;right:3px;top:3px;text-align:center;color:#afafaf;padding:0;font-size:20px;cursor:pointer}.attach-container[_ngcontent-%COMP%]{background:#fff;padding:10px 0 0;border-radius:5px;width:83.33%;border:1px solid #e8e8e8}.answer-review[_ngcontent-%COMP%]{width:35px;height:35px;border-radius:50%;border:1px solid rgb(52,125,165);display:flex;align-items:center;color:#fff;justify-content:center;font-size:15px;-webkit-user-select:none;user-select:none}.border-none[_ngcontent-%COMP%]{border:none!important}.bg-question[_ngcontent-%COMP%]{margin-top:15px;padding:15px 10px;background:#fff}.question-pending-part[_ngcontent-%COMP%]{width:100%;height:50px}.pencil-edit[_ngcontent-%COMP%]{position:absolute;top:-5px;right:-5px;width:30px;height:30px;border-radius:50%;text-align:center;background:#a9a9a9;z-index:9999}.pencil-edit[_ngcontent-%COMP%]   .lucide[_ngcontent-%COMP%]{color:#fff;stroke-width:2.5px;height:29px}.margin-question-bar[_ngcontent-%COMP%]{margin-top:calc(3rem + 40px)!important}.sheet-screen[_ngcontent-%COMP%]{max-height:calc(100vh - 140px);overflow-y:scroll;scrollbar-width:none;-ms-overflow-style:none}.sheet-screen[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.box-help[_ngcontent-%COMP%]{border-top:1px solid #d7d7d7;padding:10px 30px 0 0}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]{text-align:center;font-size:11px;margin-top:-20px}.box-help[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#fff;padding:0 10px;color:#d58e0b}.box-help[_ngcontent-%COMP%]   .help-content[_ngcontent-%COMP%]{font-size:13px;overflow-x:auto;overflow-y:hidden}  .layout{display:grid;margin:20px 0;grid-row-gap:20px}  .layout-4{grid-template-columns:1fr 1fr 1fr 1fr}  .layout-2{grid-template-columns:1fr 1fr}  .layout-1{grid-template-columns:1fr}  .question-standalone-content-box{max-width:100%;overflow-x:auto;overflow-y:hidden}  #boxContentQuestion .question-standalone-container{max-width:800px}@keyframes _ngcontent-%COMP%_shimmer{to{transform:translate(100%)}}@media (max-width: 768px){.answer-content-front[_ngcontent-%COMP%]{justify-content:center}.btn-ans-result[_ngcontent-%COMP%]{margin-right:auto!important}}@media (max-width: 800px){  #boxContentQuestion .question-standalone-container{max-width:calc(90vw - 16px)!important}}']}),v})()},54220:(ne,N,n)=>{n.d(N,{f:()=>Ae});var I=n(54460),e=n(48891),c=n(10936),R=n(65162),F=n(15343),S=n(5502),j=n(51698),W=n(38136),T=n(44155),f=n(85747),r=n(47348),u=n(70050),t=n(59640),l=n(15766),v=n(51614),m=n(6989),p=n(46840),E=n(52811),D=n(18718),s=n(1349),U=n(50282),L=n(30683),ie=n(44233),B=n(7919),M=n(9691),h=n(39471);const k=b=>({"font-medium":b});function y(b,G){1&b&&(e.j41(0,"div",38)(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()),2&b&&(e.R7$(2),e.JRh(e.bMT(3,1,"lang_auto_vui_long_nhap_ho_va_ten")))}function d(b,G){1&b&&(e.j41(0,"div",38)(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()),2&b&&(e.R7$(2),e.JRh(e.bMT(3,1,"lang_auto_vui_long_nhap_so_dien_thoai")))}function A(b,G){1&b&&(e.j41(0,"div",38)(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()),2&b&&(e.R7$(2),e.JRh(e.bMT(3,1,"lang_student_utils_reques_phone_ten_number")))}function a(b,G){1&b&&(e.j41(0,"div",38)(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()),2&b&&(e.R7$(2),e.JRh(e.bMT(3,1,"lang_document_please_enter_the_author_workplace")))}function x(b,G){if(1&b&&(e.j41(0,"div",14)(1,"div",30)(2,"div",31),e.nrm(3,"input",32),e.nI1(4,"mytranslate"),e.DNE(5,y,4,3,"div",33),e.k0s(),e.j41(6,"div",34),e.nrm(7,"input",35),e.nI1(8,"mytranslate"),e.DNE(9,d,4,3,"div",33)(10,A,4,3,"div",33),e.k0s(),e.j41(11,"div",36),e.nrm(12,"input",37),e.nI1(13,"mytranslate"),e.DNE(14,a,4,3,"div",33),e.k0s()()()),2&b){const w=e.XpG();e.R7$(3),e.FS9("placeholder",e.bMT(4,7,"lang_auto_nhap_ho_va_ten")),e.R7$(2),e.Y8G("ngIf","0"==w.form.controls.creatorId.value&&!w.form.controls.creatorFullName.value),e.R7$(2),e.FS9("placeholder",e.bMT(8,9,"lang_auto_nhap_so_dien_thoai")),e.R7$(2),e.Y8G("ngIf","0"==w.form.controls.creatorId.value&&!w.form.controls.creatorPhone.value),e.R7$(),e.Y8G("ngIf","0"==w.form.controls.creatorId.value&&w.form.controls.creatorPhone.value&&10!==w.form.controls.creatorPhone.value.length),e.R7$(2),e.FS9("placeholder",e.bMT(13,11,"lang_document_workplace")),e.R7$(2),e.Y8G("ngIf","0"==w.form.controls.creatorId.value&&!w.form.controls.creatorWorkingAddress.value)}}function g(b,G){if(1&b){const w=e.RV6();e.j41(0,"mat-tree-node",43),e.nrm(1,"button",44),e.j41(2,"div",45)(3,"input",46),e.bIt("change",function(){const i=e.eBV(w).$implicit,_=e.XpG(2);return e.Njj(_.checklistSelection.toggle(i))}),e.k0s(),e.j41(4,"label",47)(5,"span"),e.EFF(6),e.k0s()()()()}if(2&b){const w=G.$implicit,o=e.XpG(2);e.R7$(3),e.FS9("id","knowledge-"+w.id),e.Y8G("checked",o.checklistSelection.isSelected(w)),e.R7$(),e.FS9("for","knowledge-"+w.id),e.R7$(2),e.JRh(w.item)}}function V(b,G){if(1&b){const w=e.RV6();e.j41(0,"mat-tree-node",48)(1,"button",49)(2,"span",50),e.nrm(3,"lucide-icon",51),e.k0s()(),e.j41(4,"div",45)(5,"input",52),e.bIt("change",function(){const i=e.eBV(w).$implicit,_=e.XpG(2);return e.Njj(_.todoItemSelectionToggle(i))}),e.k0s(),e.j41(6,"label",47)(7,"span"),e.EFF(8),e.k0s()()()()}if(2&b){const w=G.$implicit,o=e.XpG(2);e.R7$(),e.BMQ("aria-label","toggle "+w.filename),e.R7$(2),e.FS9("name",o.treeControl.isExpanded(w)?"chevron-down":"chevron-right"),e.R7$(2),e.FS9("id","knowledge-"+w.id),e.Y8G("checked",o.descendantsAllSelected(w))("indeterminate",o.descendantsPartiallySelected(w)),e.R7$(),e.FS9("for","knowledge-"+w.id),e.R7$(2),e.JRh(w.item)}}function $(b,G){if(1&b&&(e.j41(0,"div",14)(1,"div",3)(2,"div",31)(3,"span",17),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s()(),e.j41(6,"div",39)(7,"mat-tree",40),e.DNE(8,g,7,4,"mat-tree-node",41)(9,V,9,7,"mat-tree-node",42),e.k0s()()()()),2&b){const w=e.XpG();e.R7$(4),e.SpI(" ",e.bMT(5,4,"lang_document_the_knowledge_units_present_in_the_exam")," "),e.R7$(3),e.Y8G("dataSource",w.dataSource)("treeControl",w.treeControl),e.R7$(2),e.Y8G("matTreeNodeDefWhen",w.hasChild)}}function Z(b,G){1&b&&(e.j41(0,"span",58),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&b&&(e.R7$(),e.SpI("(",e.bMT(2,1,"lang_document_current"),")"))}function ee(b,G){if(1&b&&(e.j41(0,"div",53)(1,"div",54),e.nrm(2,"input",55),e.j41(3,"label",56)(4,"span"),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s(),e.DNE(7,Z,3,3,"span",57),e.k0s()()()),2&b){const w=G.index,o=e.XpG();e.R7$(2),e.FS9("id","week-"+o.listWeek[w]),e.Y8G("formControlName",w),e.R7$(),e.FS9("for","week-"+o.listWeek[w]),e.Y8G("ngClass",e.eq3(8,k,o.currentSchoolWeeks===o.listWeek[w])),e.R7$(2),e.JRh(e.bMT(6,6,"lang_document_week")+" "+o.listWeek[w]),e.R7$(2),e.Y8G("ngIf",o.currentSchoolWeeks===o.listWeek[w])}}function se(b,G){1&b&&(e.j41(0,"div",59)(1,"span"),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()()),2&b&&(e.R7$(2),e.JRh(e.bMT(3,1,"lang_document_please_select_the_time_of_use")))}class oe{}class ae{}let H=(()=>{var b;class G extends t.H{buildFileTree(o,i){const _=[];return o.forEach(C=>{const O=new oe;O.item=C.name,O.id=C.id,C.children&&(O.children=this.buildFileTree(C.children,i+1)),_.push(O)}),_}descendantsAllSelected(o){return this.treeControl.getDescendants(o).every(_=>this.checklistSelection.isSelected(_))}descendantsPartiallySelected(o){return this.treeControl.getDescendants(o).some(C=>this.checklistSelection.isSelected(C))&&!this.descendantsAllSelected(o)}todoItemSelectionToggle(o){this.checklistSelection.toggle(o);const i=this.treeControl.getDescendants(o);this.checklistSelection.isSelected(o)?this.checklistSelection.select(...i):this.checklistSelection.deselect(...i)}toggleAllCheckBox(){this.isCheckSemesterOne.setValue(this.isCheckAllWeeks.value),this.isCheckSemesterTwo.setValue(this.isCheckAllWeeks.value);const o=this.isCheckAllWeeks.value;this.formArrayListWeek.controls.map(i=>i.setValue(o))}toggleSemesterOneCheckBox(){const o=this.isCheckSemesterOne.value;this.formArrayListWeek.controls.map((i,_)=>(_<18&&i.setValue(o),i)),this.calculateIsCheckAll()}toggleSemesterTwoCheckBox(){const o=this.isCheckSemesterTwo.value;this.formArrayListWeek.controls.map((i,_)=>(_>=18&&i.setValue(o),i)),this.calculateIsCheckAll()}initForm(){this.formArrayListWeek=this.form.controls.weeks,this.formArrayListKnowledge=this.form.controls.knowledgeIds}initKnowledgeCheckbox(o){this.formArrayListKnowledge.clear();for(let i=0;i<o.length;i++){const C=new c.MJ(!1,{nonNullable:!0});this.formArrayListKnowledge.push(C)}}initWeedCheckbox(o){this.formArrayListWeek.clear();for(let i=0;i<o.length;i++){const C=new c.MJ(!1,{nonNullable:!0});this.formArrayListWeek.push(C)}}calculateIsCheckAll(){const o=this.formArrayListWeek.controls.every(i=>i.value);this.isCheckAllWeeks.setValue(o)}ngOnChanges(){this.initForm(),this.initKnowledgeCheckbox(this.listKnowledge),this.dataSource.data=this.buildFileTree(this.listKnowledge,0)}ngOnInit(){super.ngOnInit(),this.initWeedCheckbox(this.listWeek),this.currentSchoolWeeks=this.timeService.getSchoolWeeks(),this.checklistSelection.changed.subscribe(o=>{let i=this.checklistSelection.selected.map(_=>_.id??0);this.listKnowledgeId=i.sort((_,C)=>_-C)??[],this.emitChooseKnowledge.emit(this.listKnowledgeId)}),this.form.controls.weeks.valueChanges.subscribe(o=>{this.calculateIsCheckAll(),this.checkChooseWeeks=o.some(i=>i)})}constructor(o){super(),this.timeService=o,this.listKnowledge=[],this.listWeek=[],this.emitChooseKnowledge=new e.bkB,this.formArrayListKnowledge=new c.Yp([]),this.formArrayListWeek=new c.Yp([]),this.flatNodeMap=new Map,this.nestedNodeMap=new Map,this.selectedParent=null,this.newItemName="",this.checklistSelection=new s.CB(!0),this.listKnowledgeId=[],this.currentSchoolWeeks=0,this.checkChooseWeeks=!1,this.isCheckAllWeeks=new c.MJ(!1,{nonNullable:!0}),this.isCheckSemesterOne=new c.MJ(!1,{nonNullable:!0}),this.isCheckSemesterTwo=new c.MJ(!1,{nonNullable:!0}),this.getLevel=i=>i.level??0,this.isExpandable=i=>i.expandable??!1,this.getChildren=i=>i.children??[],this.hasChild=(i,_)=>_.expandable??!1,this.hasNoContent=(i,_)=>""===_.item,this.transformer=(i,_)=>{const C=this.nestedNodeMap.get(i),O=C&&C.item===i.item?C:new ae;return O.item=i.item,O.level=_,O.id=i.id,O.expandable=!!i.children,this.flatNodeMap.set(O,i),this.nestedNodeMap.set(i,O),O},this.treeFlattener=new L.yj(this.transformer,this.getLevel,this.isExpandable,this.getChildren),this.treeControl=new U.XW(this.getLevel,this.isExpandable),this.dataSource=new L.zw(this.treeControl,this.treeFlattener)}}return(b=G).\u0275fac=function(o){return new(o||b)(e.rXU(M.F))},b.\u0275cmp=e.VBU({type:b,selectors:[["azt-config-document-market"]],inputs:{form:"form",listKnowledge:"listKnowledge",listWeek:"listWeek"},outputs:{emitChooseKnowledge:"emitChooseKnowledge"},standalone:!0,features:[e.Vt3,e.OA$,e.aNF],decls:48,vars:29,consts:[[1,"mt-5"],[3,"formGroup"],[1,"box","p-3"],[1,"grid","grid-cols-12"],[1,"col-span-12","lg:col-span-5"],["for","general-name",1,"form-label","mb-0","font-medium","flex","items-center"],[1,"col-span-12","lg:col-span-7"],[1,"flex","flex-col","sm:flex-row"],[1,"form-check","mr-8"],["type","radio","id","creator-by-me","formControlName","creatorId","value","1",1,"form-check-input"],["for","creator-by-me",1,"form-check-label"],["type","radio","id","creator-by-user-other","formControlName","creatorId","value","0",1,"form-check-input"],["for","creator-by-user-other",1,"form-check-label"],["class","mt-3",4,"ngIf"],[1,"mt-3"],["formArrayName","weeks",1,"list-week","grid","grid-cols-12"],[1,"col-span-12","flex","items-center"],[1,"form-label","mb-0","font-medium","flex","items-center"],[1,"list-week","col-span-12","mt-1"],[1,"flex","flex-row","sm:flex-col","sm:items-center"],[1,"azt-form-check","mr-5","mt-3","sm:mt-0"],["type","checkbox","id","selectSemesterOne",1,"form-check-input",3,"change","formControl"],["for","selectSemesterOne",1,"form-check-label"],["type","checkbox","id","selectSemesterTwo",1,"form-check-input",3,"change","formControl"],["for","selectSemesterTwo",1,"form-check-label"],["type","checkbox","id","selectAllWeeks",1,"form-check-input",3,"change","formControl"],["for","selectAllWeeks",1,"form-check-label"],[1,"grid","grid-cols-12","gap-3","mt-3"],["class","col-span-6 md:col-span-3 lg:col-span-2",4,"ngFor","ngForOf"],["class","col-span-12 mt-2 text-danger text-xs",4,"ngIf"],[1,"grid","grid-cols-12","gap-3"],[1,"col-span-12"],["type","text","name","creatorFullName","formControlName","creatorFullName",1,"form-control",3,"placeholder"],["class","text-danger text-xs mt-2",4,"ngIf"],[1,"col-span-12","md:col-span-4"],["type","text","appOnlyNumber","","name","creatorPhone","formControlName","creatorPhone",1,"form-control",3,"placeholder"],[1,"col-span-12","md:col-span-8"],["type","text","name","creatorWorkingAddress","formControlName","creatorWorkingAddress",1,"form-control",3,"placeholder"],[1,"text-danger","text-xs","mt-2"],[1,"list-knowledge","col-span-12"],[3,"dataSource","treeControl"],["matTreeNodeToggle","","matTreeNodePadding","",4,"matTreeNodeDef"],["matTreeNodePadding","",4,"matTreeNodeDef","matTreeNodeDefWhen"],["matTreeNodeToggle","","matTreeNodePadding",""],["mat-icon-button","","disabled",""],[1,"azt-form-checked"],["type","checkbox",1,"form-check-input",3,"change","checked","id"],[1,"form-check-label",2,"vertical-align","middle",3,"for"],["matTreeNodePadding",""],["mat-icon-button","","matTreeNodeToggle",""],[1,"mat-icon-rtl-mirror","w-5","h-5","inline-block",2,"vertical-align","bottom"],["size","20",3,"name"],["type","checkbox",1,"form-check-input",3,"change","checked","indeterminate","id"],[1,"col-span-6","md:col-span-3","lg:col-span-2"],[1,"azt-form-check"],["type","checkbox","value","41556",1,"form-check-input",3,"formControlName","id"],[1,"form-check-label",2,"vertical-align","middle",3,"ngClass","for"],["class","inline-block ml-1",4,"ngIf"],[1,"inline-block","ml-1"],[1,"col-span-12","mt-2","text-danger","text-xs"]],template:function(o,i){1&o&&(e.j41(0,"div",0)(1,"form",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"label",5),e.EFF(6),e.nI1(7,"mytranslate"),e.k0s()(),e.j41(8,"div",6)(9,"div",7)(10,"div",8),e.nrm(11,"input",9),e.j41(12,"label",10),e.EFF(13),e.nI1(14,"mytranslate"),e.k0s()(),e.j41(15,"div",8),e.nrm(16,"input",11),e.j41(17,"label",12),e.EFF(18),e.nI1(19,"mytranslate"),e.k0s()()()()(),e.DNE(20,x,15,13,"div",13)(21,$,10,6,"div",13),e.j41(22,"div",14)(23,"div",15)(24,"div",16)(25,"span",17),e.EFF(26),e.nI1(27,"mytranslate"),e.k0s()(),e.j41(28,"div",18)(29,"div",19)(30,"div",20)(31,"input",21),e.bIt("change",function(){return i.toggleSemesterOneCheckBox()}),e.k0s(),e.j41(32,"label",22),e.EFF(33),e.nI1(34,"mytranslate"),e.k0s()(),e.j41(35,"div",20)(36,"input",23),e.bIt("change",function(){return i.toggleSemesterTwoCheckBox()}),e.k0s(),e.j41(37,"label",24),e.EFF(38),e.nI1(39,"mytranslate"),e.k0s()(),e.j41(40,"div",20)(41,"input",25),e.bIt("change",function(){return i.toggleAllCheckBox()}),e.k0s(),e.j41(42,"label",26),e.EFF(43),e.nI1(44,"mytranslate"),e.k0s()()(),e.j41(45,"div",27),e.DNE(46,ee,8,10,"div",28),e.k0s()(),e.DNE(47,se,4,3,"div",29),e.k0s()()()()()),2&o&&(e.R7$(),e.Y8G("formGroup",i.form),e.R7$(5),e.SpI(" ",e.bMT(7,15,"lang_document_author")," "),e.R7$(7),e.SpI(" ",e.bMT(14,17,"lang_document_me")," "),e.R7$(5),e.SpI(" ",e.bMT(19,19,"lang_document_others")," "),e.R7$(2),e.Y8G("ngIf","0"==i.form.controls.creatorId.value),e.R7$(),e.Y8G("ngIf",i.formArrayListKnowledge.controls.length),e.R7$(5),e.SpI(" ",e.bMT(27,21,"lang_document_time_of_use")," "),e.R7$(5),e.Y8G("formControl",i.isCheckSemesterOne),e.R7$(2),e.SpI(" ",e.bMT(34,23,"lang_config_semester")+" 1"," "),e.R7$(3),e.Y8G("formControl",i.isCheckSemesterTwo),e.R7$(2),e.SpI(" ",e.bMT(39,25,"lang_config_semester")+" 2"," "),e.R7$(3),e.Y8G("formControl",i.isCheckAllWeeks),e.R7$(2),e.SpI(" ",e.bMT(44,27,i.isCheckAllWeeks.value?"lang_student_classroom_list_utils_create_class_new_course_disable":"lang_student_classroom_list_utils_create_class_new_course_choose_all")," "),e.R7$(3),e.Y8G("ngForOf",i.formArrayListWeek.controls),e.R7$(),e.Y8G("ngIf",!i.checkChooseWeeks))},dependencies:[ie.An,I.MD,I.YU,I.Sq,I.bT,c.X1,c.qT,c.me,c.Zm,c.Fm,c.BC,c.cb,c.l_,c.j4,c.JD,c.v8,R.iI,c.YN,r.wp,T.s,h.iY,L.yI,L.yF,L.pO,L.lQ,L.d6,F.flO,F.WGl,u.L,S.Id,B.Z],encapsulation:2}),G})();var X=n(36894),J=n(78472),ce=n(83016),ue=n(27691),ge=n(5382),fe=n(64198),xe=n(44172),ve=n(48451);let be=(()=>{var b;class G{constructor(o,i){this.commonService=o,this.apiUploadService=i,this.sizeDefaultCanvas=1100,this.actionRunAfterConvert=[],this.imageMaps=[],this.pattern_base64=/data:image[^"'\\]+/i,this.pattern_image=/<img[^>]+data:image[^>]+>/g,this.taskConvertBase64ToCanvas=new ge.n(50,{function:(_,C)=>{this.callbackBase64ToCanvas&&this.callbackBase64ToCanvas(_,C)}}),this.taskUploadImage=new ge.n(10,{function:(_,C)=>{this.callbackUploadImage&&this.callbackUploadImage(_,C)}})}convertQuestions(o,i,_){return new Promise(C=>{this.reset(),o.forEach(O=>{const z=this.commonService.willDeleteParseJson(O.answerConfig||"[]");O.questionContent?.includes("<img ")&&this.replaceImageCdnInContent(O,"questionContent"),O.questionText?.includes("<img ")&&this.replaceImageCdnInContent(O,"questionText"),O.answerMedia?.includes("<img ")&&this.replaceImageCdnInContent(O,"answerMedia"),O.mediaMeta?.includes("<img ")&&this.replaceImageCdnInContent(O,"mediaMeta"),z.forEach(K=>{K.content.includes("<img ")&&this.replaceImageCdnInContent(K,"content")}),this.actionRunAfterConvert.push(()=>{O.answerConfig=JSON.stringify(z)})}),this.imageMaps.forEach(O=>{this.taskConvertBase64ToCanvas.addTask(this,this.startConvertCanvas,[O])}),this.taskConvertBase64ToCanvas.start().then(O=>{if(O.errs.length>0)_(O.errs,void 0);else{let K=0;const P=[],de=()=>{const q=document.createElement("canvas");q.width=this.sizeDefaultCanvas,q.height=this.sizeDefaultCanvas;const pe=q.getContext("2d");pe&&(pe.fillStyle="white",pe.fillRect(0,0,this.sizeDefaultCanvas,this.sizeDefaultCanvas)),P.push({cdn:"",cX:0,cY:0,canvas:q,imgs:[]})};de(),O.datas.forEach((q,pe)=>{var Q=P[P.length-1];Q.cX+q.canvas.width+4>this.sizeDefaultCanvas?(Q.cX=4,Q.cY+=K+4,K=0):Q.cX+=4,Q.cY+q.canvas.height>this.sizeDefaultCanvas&&(de(),Q=P[P.length-1]);var le=Q.canvas.getContext("2d");Q.imgs.push({x:Q.cX,y:Q.cY,width:q.canvas.width,height:q.canvas.height,index:pe}),le?.drawImage(q.canvas,0,0,q.canvas.width,q.canvas.height,Q.cX,Q.cY,q.canvas.width,q.canvas.height),Q.cX+=q.canvas.width,K=K<q.canvas.height?q.canvas.height:K}),P[0].imgs.length>0&&P.forEach(q=>{this.taskUploadImage.addTask(this,this.startUploadFile,[q])}),this.taskUploadImage.start().then(q=>{if(q.errs.length>0)_(O.errs,void 0);else{let pe=!0;q.datas.forEach(Q=>{Q.imgs.forEach(le=>{const te=O.datas[le.index];if(te){const me={link:Q.cdn,data:{x:le.x,y:le.y,width:le.width,height:le.height}};te.objs.forEach(re=>{if(re[te.path])if(this.commonService.isJson(re[te.path])){const _e=this.commonService.willDeleteParseJson(re[te.path]);Object.prototype.hasOwnProperty.call(_e,"renderedStr")?(_e.renderedStr=_e.renderedStr.replace(te.base,`@[]${JSON.stringify(me)}@[]`),re[te.path]=JSON.stringify(_e)):re[te.path]=re[te.path].replace(te.base,`@[]${JSON.stringify(me)}@[]`)}else re[te.path]=re[te.path].replace(te.base,`@[]${JSON.stringify(me)}@[]`);else pe=!1})}})}),pe?(this.actionRunAfterConvert.forEach(Q=>{Q()}),o.forEach((Q,le)=>{let te=this.commonService.willDeleteParseJson(Q.mediaMeta||"{}"),me=i[le];const re={id:0,name:Q.name,extension:"text",content:Q.questionContent,groupContent:te.renderedStr,metaData:{isFixAns:Number(Q.isFixAns),forcedFixAns:!1,groupType:Q.groupType?Number(Q.groupType):void 0}};me&&(re.vMetaEditor=me.meta),Q.questionContent=JSON.stringify([re])}),C()):_(O.errs,void 0,!0)}})}})})}reset(){this.imageMaps=[],this.actionRunAfterConvert=[]}replaceImageCdnInContent(o,i){var _=o[i];if(this.commonService.isJson(o[i])){const z=this.commonService.willDeleteParseJson(o[i]);Object.prototype.hasOwnProperty.call(z,"renderedStr")&&(_=z.renderedStr)}let C=_.matchAll(this.pattern_image);for(;;){let z=C.next();if(z.done)break;let K=z.value[0];var O=this.imageMaps.findIndex(P=>P.base===K&&P.path===i);-1===O?this.imageMaps.push({base:K,cdn:"",data:null,objs:[o],path:i,canvas:document.createElement("canvas")}):this.imageMaps[O].objs.push(o)}}startConvertCanvas(o){return new Promise((i,_)=>{const C=new Image;C.crossOrigin="anonymous",C.onload=()=>{let z=1;if(C.width>this.sizeDefaultCanvas&&(z=this.sizeDefaultCanvas/C.width),C.height>this.sizeDefaultCanvas){let P=this.sizeDefaultCanvas/C.height;P<z&&(z=P)}o.canvas.width=C.width*z,o.canvas.height=C.height*z,o.canvas.getContext("2d")?.drawImage(C,0,0,C.width,C.height,0,0,o.canvas.width,o.canvas.height),i(o)},C.onerror=()=>{o.canvas.width=1,o.canvas.height=1;const z=o.canvas.getContext("2d");z&&(z.fillStyle="white",z.fillRect(0,0,1,1)),i(o)};let O=this.pattern_base64.exec(o.base);null!=O?C.src=O[0]:_(new Error("l\u1ed7i regex"))})}startUploadFile(o){return new Promise((i,_)=>{const C=this.dataURLtoFile(o.canvas.toDataURL("image/png",1));(0,fe.w4)(C).then(O=>{this.apiUploadService.uploadToCdnProgressForExamQuestionContent(O).subscribe(z=>{z.type!=ue.hv.UploadProgress&&(1==z.success&&z.data?i({...o,cdn:z.data.url||""}):_(new Error(this.commonService.translateToKeyParam("lang_auto_khong_upload_duoc_anh_vui_long_thu_lai_sau_loi",z.message??"none"))))})})})}dataURLtoFile(o){let i=this.getFileName(o);for(var _=o.split(","),C=_[0].match(/:(.*?);/),O=atob(_[1]),z=O.length,K=new Uint8Array(z);z--;)K[z]=O.charCodeAt(z);return new File([K],i,{type:C&&C.length>0?C[1]:"png"})}getFileName(o){var i=o.split("").reverse().join(""),_=i.indexOf(";"),C=i.indexOf("/",_);return i.substring(_,C).split("").reverse().join("")}}return(b=G).\u0275fac=function(o){return new(o||b)(e.KVO(xe.R),e.KVO(ve.T))},b.\u0275prov=e.jDH({token:b,factory:b.\u0275fac,providedIn:"root"}),G})();var Ce=n(60531),we=n(77260),Oe=n(50589),Me=n(92540),Ee=n(81587);function Pe(b,G){if(1&b&&e.nrm(0,"azt-loading-effect",3),2&b){const w=e.XpG();e.Y8G("currentStatusObj",w.statusObj)}}function ye(b,G){1&b&&(e.j41(0,"div",29),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&b&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_auto_vui_long_nhap_ten\u01a1_de_thi")," "))}function Ie(b,G){1&b&&(e.j41(0,"span",30),e.nrm(1,"azt-loading-ui"),e.k0s())}function Se(b,G){if(1&b){const w=e.RV6();e.j41(0,"div",4)(1,"form",5)(2,"div",6)(3,"div",7)(4,"div",8)(5,"div",9)(6,"div",10)(7,"label",11),e.EFF(8),e.nI1(9,"mytranslate"),e.k0s()(),e.j41(10,"div",10)(11,"div",12),e.nrm(12,"input",13),e.nI1(13,"mytranslate"),e.k0s(),e.DNE(14,ye,3,3,"div",14),e.k0s()(),e.j41(15,"div",15),e.nrm(16,"config-level-subject-book",16),e.k0s(),e.j41(17,"div",17),e.nrm(18,"config-purpose-exam",18),e.k0s(),e.j41(19,"div",19)(20,"div",10)(21,"label",20),e.EFF(22),e.nI1(23,"mytranslate"),e.k0s()(),e.j41(24,"div",10)(25,"div",12),e.nrm(26,"textarea",21),e.nI1(27,"mytranslate"),e.k0s()()()(),e.j41(28,"div",22)(29,"azt-config-document-market",23),e.bIt("emitChooseKnowledge",function(i){e.eBV(w);const _=e.XpG();return e.Njj(_.chooseKnowledge(i))}),e.k0s()(),e.j41(30,"div",24)(31,"div",25)(32,"button",26),e.bIt("click",function(){e.eBV(w);const i=e.XpG();return e.Njj(i.cancelSaveDocumentObj())}),e.EFF(33),e.nI1(34,"mytranslate"),e.k0s(),e.j41(35,"button",27),e.bIt("click",function(){e.eBV(w);const i=e.XpG();return e.Njj(i.handleSaveDocument())}),e.DNE(36,Ie,2,0,"span",28),e.EFF(37),e.nI1(38,"mytranslate"),e.k0s()()()()()()()}if(2&b){const w=e.XpG();e.R7$(),e.Y8G("formGroup",w.form),e.R7$(7),e.SpI(" ",e.bMT(9,17,"lang_auto_ten")," "),e.R7$(4),e.FS9("placeholder",e.bMT(13,19,"lang_auto_nhap_ten")+" ..."),e.R7$(2),e.Y8G("ngIf",w.form.controls.name.errors),e.R7$(2),e.Y8G("form",w.form)("useExamSchoolLogData",!0),e.R7$(2),e.Y8G("purposeList",w.listPurposeObjs)("form",w.form),e.R7$(4),e.SpI(" ",e.bMT(23,21,"lang_auto_mo_ta")," "),e.R7$(4),e.FS9("placeholder",e.bMT(27,23,"lang_core_nhap_mo_ta")+" ..."),e.R7$(3),e.Y8G("form",w.form)("listWeek",w.listWeek)("listKnowledge",w.listKnowledge),e.R7$(4),e.SpI(" ",e.bMT(34,25,"lang_auto_huy")," "),e.R7$(2),e.Y8G("disabled",w.logConfig.status),e.R7$(),e.Y8G("ngIf",w.logConfig.status),e.R7$(),e.SpI(" ",e.bMT(38,27,"lang_auto_luu")," ")}}function De(b,G){if(1&b&&(e.j41(0,"div",31)(1,"div",32)(2,"div",33)(3,"span",34),e.nrm(4,"azt-loading-ui"),e.k0s(),e.j41(5,"div",35),e.EFF(6),e.k0s()()()()),2&b){const w=e.XpG();e.R7$(6),e.JRh(w.logConfig.msg)}}let Ae=(()=>{var b;class G extends t.H{chooseKnowledge(o){this.knowledgeList=o}cancelSaveDocumentObj(){this.onBack.emit(!0)}handleSaveDocument(){const o=this.getWeeksChecked(this.listWeek,this.form.controls.weeks.value);if(this.checkErrorValidateSave(o,this.knowledgeList))this.showErrorSnack("lang_cms_utils_folder_name_validate_space");else{if(this.type===p.x.exam&&this.isCreateQuestionToEditor&&this.dataSave.exam&&this.dataSave.exam.questionObj.listQuestions){this.logConfig.setStatus(this.commonService.myTranslateInstant("lang_auto_dang_luu_du_lieu_de_thi")),this.countProcess=0;const i=this.dataSave.exam.questionObj.listQuestions;let _=this.commonService.myTranslateInstant("lang_auto_xay_ra_loi_trong_qua_trinh_xu_ly_hinh_anh_cua_de_thi")??"";this.questionShareSaveService.convertQuestions(i,this.dataSave.exam.rootQuests,(C,O=_,z)=>{this.logConfig.stopStatus(),this.showErrorSnack(O),z&&this.stopStatusObj()}).then(()=>{this.startMainProcessSaveEditor()})}this.type===p.x.exam&&!this.isCreateQuestionToEditor&&this.examObj?.id&&this.saveDocumentMarketQuestionObjs(),this.type!==p.x.exam&&this.attachments.length&&this.saveDocumentMarketQuestionObjs(),console.log(this.attachments,this.type)}}initQuestionShare(){this.questionShareSaveService.callbackBase64ToCanvas=(o,i)=>{let _=this.commonService.myTranslateInstant("lang_auto_dang_xu_ly_hinh_anh_cho_de_thi");this.logConfig.setStatus(`${_} ${Math.floor(o/i*100*.7)}%`)},this.questionShareSaveService.callbackUploadImage=(o,i)=>{let _=this.commonService.myTranslateInstant("lang_auto_dang_xu_ly_hinh_anh_cho_de_thi");this.logConfig.setStatus(`${_} ${Math.floor(o/i*100*.3)+70}%`)}}processSaveQuestionsFromEditor(o,i,_){if(this.dataSave.exam?.questionObj&&this.dataSave.exam?.questionObj.listQuestions){var C=this.dataSave.exam?.questionObj.listQuestions.length;let O=o+100>C?C:o+100,z=this.dataSave.exam?.questionObj.listQuestions.slice(o,O)??[],K=[];for(const P of z)K.push({categoryId:P.categoryId,groupId:P.groupId,name:P.name??"none",metadata:P.metadata,isImage:P.isImage,questionContent:P.questionContent,answerMedia:P.answerMedia,questionText:P.questionText,answerType:P.answerType,answerConfig:P.answerConfig,coordinates:P.coordinates,answerResult:P.answerResult,totalQuestion:P.totalQuestion,tags:P.tags??[],mediaId:P.mediaId,mediaMeta:P.mediaMeta,attachments:P.attachments,version:P.version,isFixAns:P.isFixAns,groupType:P.groupType,__path:P.__path,answers:P.configAnswers?P.configAnswers.map(de=>({answerKey:de.key,objectiveId:de.objectiveId,tag:de.tagCode})):[]});K.length>0?this.sAztSaveProcessService.saveQuestionObjsFromEditor(this.dataSave,K,i).then(P=>{P&&P.listQuestionId.length>0?(_.listQuestionId=_.listQuestionId.concat(P.listQuestionId),this.processSaveQuestionsFromEditor(O,P.indexSaved,_)):(this.countProcess=0,this.logConfig.stopStatus(),this.showErrorSnack("lang_auto_khong_luu_duoc_noi_dung_cau_hoi_trong_de_vui_long_kiem_tra_lai"))}):this.saveDocumentMarketQuestionObjs(_)}}startMainProcessSaveEditor(){this.dataSave.exam&&this.dataSave.exam.questionObj&&this.processSaveQuestionsFromEditor(0,0,{indexSaved:0,listQuestionId:[]})}getListPurposeExam(){this.initStatusObj(),this.waitDestroy(this.commonListService.apiCommonListExamPurposesGet().subscribe(o=>{if(!o.success)return this.errorStatusObj(o.message,!0);this.listPurposeObjs=o.data?.objs??[],this.successStatusObj()}))}getKnowledgeData(){const o=this.form.getRawValue();!o.schoolLevel||!o.schoolSubject||this.waitDestroy(this.knowledgeService.apiKnowledgeGet(o.schoolLevel,o.schoolSubject).subscribe(i=>{i.list&&(this.listKnowledge=i.list)}))}checkErrorValidateSave(o,i){return!(!this.form.invalid&&("0"!=this.form.controls.creatorId.value||this.form.controls.creatorFullName.value&&this.form.controls.creatorFullName.value&&this.form.controls.creatorPhone.value&&this.form.controls.creatorWorkingAddress.value)&&("0"!=this.form.controls.creatorId.value||10===this.form.controls.creatorPhone.value.length)&&o.length)}fillConfig(){return new j.c(o=>{const i=this.isCreateQuestionToEditor,_=Number(this.commonService.getMyParam(this.activeRoute,"levelId")??0),C=Number(this.commonService.getMyParam(this.activeRoute,"subjectId")??0),O=i?Number(this.browserStorageService.getSimpleStorage("levelId")??0):_,z=i?Number(this.browserStorageService.getSimpleStorage("subjectId")??0):C;this.examObj?.id?this.documentConfigService.apiDocumentConfigGetExamConfigDataV2Get(this.examObj.hashId??"").subscribe(K=>{if(!K.success)return this.errorStatusObj(K.message??"",!0);if(!K.data?.examObj)return;const P=K.data.examObj;this.form.patchValue({name:P.name,description:P.description,schoolLevel:P.schoolLevelId??_,schoolSubject:P.schoolSubjectId??C,purposeExam:K.data?.purposeId??0,purposeNote:K.data?.purposeNote??""}),o.next()}):(this.form.controls.schoolLevel.setValue(O),this.form.controls.schoolSubject.setValue(z),i||this.form.controls.name.setValue(this.name),o.next())})}getWeeksChecked(o,i){let _=[];for(let C=0;C<i.length;C++)i[C]&&o[C]&&_.push(o[C]);return _}createListWeek(){for(let i=0;i<35;i++)this.listWeek.push(i+1)}saveDocumentMarketQuestionObjs(o){const i=this.getWeeksChecked(this.listWeek,this.form.controls.weeks.value);this.logConfig.setStatus("");let _={name:this.form.controls.name.value,type:this.type,schoolLevelId:this.form.controls.schoolLevel.value,schoolSubjectId:this.form.controls.schoolSubject.value,purposeId:this.form.controls.purposeExam.value,purposeNote:this.form.controls.purposeNote.value,description:this.form.controls.description.value,creatorId:Number(this.form.controls.creatorId.value),creatorFullName:this.form.controls.creatorFullName.value,creatorPhone:this.form.controls.creatorPhone.value,creatorWorkingAddress:this.form.controls.creatorWorkingAddress.value,knowledgeIds:this.knowledgeList,weeks:i};switch(this.type){case p.x.exam:if(o&&this.isCreateQuestionToEditor){let C=[];C=o.listQuestionId.map(O=>O??0)??[],_.questionIds=C}this.examObj?.id&&!this.isCreateQuestionToEditor&&(_.examId=this.examObj?.id,_.questionIds=[]);break;case p.x.lecture:case p.x.ref:case p.x.teaching_plan:case p.x.slide:_.attachments=this.attachments}this.waitDestroy(this.documentService.apiDocumentsPost(_).subscribe(C=>{if(C.id){this.successStatusObj("lang_document_successful_sharing",!0);const O="/document-market/list-documents/your-documents/1";this.logConfig.stopStatus(),this.myNavigation(O)}else this.errorStatusObj(""),this.logConfig.stopStatus()}))}ngOnInit(){super.ngOnInit(),this.createListWeek(),this.getListPurposeExam(),this.fillConfig().pipe((0,W.c)(500)).subscribe(()=>{this.getKnowledgeData(),this.form.controls.schoolSubject.valueChanges.subscribe(()=>{this.getKnowledgeData()}),this.form.controls.schoolLevel.valueChanges.subscribe(()=>{this.getKnowledgeData()})}),this.type===p.x.exam&&this.isCreateQuestionToEditor&&(this.dataSave=this.editorOutputDataService.getOutputData(),this.form.controls.name.setValue(this.dataSave.exam?.examObj.name??this.dataSave.homework?.name??""))}constructor(o,i,_,C,O,z,K,P,de){super(),this.documentConfigService=o,this.activeRoute=i,this.documentService=_,this.knowledgeService=C,this.questionShareSaveService=O,this.editorOutputDataService=z,this.sAztSaveProcessService=K,this.browserStorageService=P,this.commonListService=de,this.type=p.x.exam,this.isCreateQuestionToEditor=!1,this.attachments=[],this.name="",this.onBack=new e.bkB,this.listPurposeObjs=[],this.listKnowledge=[],this.logConfig=new f.J,this.dataSave={},this.saveParts=[],this.countProcess=0,this.knowledgeList=[],this.listWeek=[],this.form=new c.gE({name:new c.MJ("",{nonNullable:!0,validators:[c.k0.required,l.M.noWhiteSpace]}),description:new c.MJ("",{nonNullable:!0}),schoolLevel:new c.MJ(0,{nonNullable:!0,validators:[c.k0.required,c.k0.min(1)]}),schoolSubject:new c.MJ(0,{nonNullable:!0,validators:[c.k0.required,c.k0.min(1)]}),purposeExam:new c.MJ(0,{nonNullable:!0,validators:[c.k0.required,c.k0.min(1)]}),purposeNote:new c.MJ("",{nonNullable:!0}),knowledgeIds:new c.Yp([]),weeks:new c.Yp([]),creatorId:new c.MJ("1",{nonNullable:!0}),creatorFullName:new c.MJ("",{nonNullable:!0}),creatorPhone:new c.MJ("",{nonNullable:!0}),creatorWorkingAddress:new c.MJ("",{nonNullable:!0})}),this.type===p.x.exam&&this.isCreateQuestionToEditor&&this.initQuestionShare()}}return(b=G).\u0275fac=function(o){return new(o||b)(e.rXU(J.x_),e.rXU(R.nX),e.rXU(ce.DK),e.rXU(ce.Iu),e.rXU(be),e.rXU(Ce.O),e.rXU(we.G),e.rXU(Oe.z),e.rXU(Me.Nz))},b.\u0275cmp=e.VBU({type:b,selectors:[["azt-config-share-document"]],inputs:{type:"type",isCreateQuestionToEditor:"isCreateQuestionToEditor",attachments:"attachments",name:"name",examObj:"examObj"},outputs:{onBack:"onBack"},standalone:!0,features:[e.Vt3,e.aNF],decls:4,vars:3,consts:[["doneLoading",""],[3,"currentStatusObj",4,"ngIf","ngIfElse"],["style","width: 100vw; height: 100vh; position: fixed; z-index: 9999; top: 0; left: 0; display: flex; justify-content: center; align-items: center; background-color: rgba(0, 0, 0, 0.4)",4,"ngIf"],[3,"currentStatusObj"],[1,"intro-y","mt-8","p-3"],[3,"formGroup"],[1,"mx-auto",2,"max-width","1100px"],[1,"setting-block"],[1,"box","mt-2","p-3"],["id","azt-config-name",1,"grid","grid-cols-12"],[1,"col-span-12","lg:col-span-12"],["for","general-name",1,"form-label","mb-0","font-medium","flex","items-center"],[1,"setting-input"],["id","general-name","formControlName","name","type","text",1,"form-control",3,"placeholder"],["class","mt-2 text-danger text-xs fade",4,"ngIf"],[1,"mt-4"],[3,"form","useExamSchoolLogData"],[1,"mt-2"],[3,"purposeList","form"],["id","azt-config-desc",1,"grid","grid-cols-12","mt-4"],["for","general-desc",1,"form-label","mb-0","font-medium","flex","items-center"],["id","general-desc","formControlName","description",1,"form-control","w-full",2,"height","150px",3,"placeholder"],[1,"config-document-market"],[3,"emitChooseKnowledge","form","listWeek","listKnowledge"],[1,"mt-5"],[1,"flex","justify-end"],[1,"btn","btn-secondary","w-24","mr-2",3,"click"],[1,"btn","w-24","btn-primary",3,"click","disabled"],["class","w-4 h-4 mr-2",4,"ngIf"],[1,"mt-2","text-danger","text-xs","fade"],[1,"w-4","h-4","mr-2"],[2,"width","100vw","height","100vh","position","fixed","z-index","9999","top","0","left","0","display","flex","justify-content","center","align-items","center","background-color","rgba(0, 0, 0, 0.4)"],[2,"text-align","center","color","#000000"],[2,"margin-bottom","10px"],[1,"w-4","h-4","inline-block"],[2,"font-size","20px","margin-top","10px","background-color","#f0f8ffa3","padding","10px","border-radius","5px"]],template:function(o,i){if(1&o&&e.DNE(0,Pe,1,1,"azt-loading-effect",1)(1,Se,39,29,"ng-template",null,0,e.C5r)(3,De,7,1,"div",2),2&o){const _=e.sdS(2);e.Y8G("ngIf",i.statusObj.loading)("ngIfElse",_),e.R7$(3),e.Y8G("ngIf",i.logConfig.status&&i.isCreateQuestionToEditor)}},dependencies:[H,D.K,v.X,m.b,E.R,I.MD,I.bT,c.X1,c.qT,c.me,c.BC,c.cb,c.j4,c.JD,R.iI,c.YN,r.wp,T.s,F.flO,u.L,S.Id,X.k,Ee.t],encapsulation:2}),G})()},77260:(ne,N,n)=>{n.d(N,{G:()=>S});var I=n(48891),e=n(44172),c=n(5382),R=n(95222),F=n(76671);let S=(()=>{var j;class W{convertBase64OfMathJaxToCdnUrlInQuestions(f,r){return new Promise((u,t)=>{const l=null==r?new c.n(10):new c.n(10,{function:r},0);f.forEach(v=>{l.addTask(this.dataAztMathRawHelper,this.dataAztMathRawHelper.convertBase64OfMathJaxToCdnUrl,[v])}),l.start().then(v=>{0===v.errs.length?u(v.datas):t(v.errs[0])})})}saveQuestionObjsFromEditor(f,r,u){return new Promise(t=>{this.convertBase64OfMathJaxToCdnUrlInQuestions(r,void 0).then(l=>{let v=[];for(let m=0;m<l.length;m++){let p=l[m];p.expandInfo=this.commonService.serializeJson(f.exam?.examObj.expandInfoObj),v.push(p)}this.questionService.apiQuestionsPost({listQuestions:v}).subscribe(m=>{t(m.list?{indexSaved:m.list.length+u,listQuestionId:m.list}:{indexSaved:u,listQuestionId:[]})})}).catch(()=>{t({indexSaved:u,listQuestionId:[]})})})}constructor(f,r){this.questionService=f,this.dataAztMathRawHelper=r,this.commonService=(0,I.WQX)(e.R)}}return(j=W).\u0275fac=function(f){return new(f||j)(I.KVO(R.wP),I.KVO(F.c))},j.\u0275prov=I.jDH({token:j,factory:j.\u0275fac,providedIn:"root"}),W})()},6989:(ne,N,n)=>{n.d(N,{b:()=>ie});var I=n(54460),e=n(10936),c=n(65162),R=n(15343),F=n(44233),S=n(5502),j=n(44155),W=n(43166),T=n(36894),f=n(47348),r=n(70050),u=n(59640),t=n(48891),l=n(47426),v=n(95670),m=n(4375),p=n(81587);function E(B,M){if(1&B&&(t.j41(0,"mat-option",16),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&B){const h=M.$implicit;t.Y8G("value",h.id),t.R7$(),t.SpI(" ",t.bMT(2,2,h.code)," ")}}function D(B,M){if(1&B&&(t.j41(0,"mat-optgroup",14),t.nI1(1,"mytranslate"),t.DNE(2,E,3,4,"mat-option",15),t.k0s()),2&B){const h=M.$implicit;t.XpG();const k=t.sdS(10);t.FS9("label",t.bMT(1,2,h.groupName)),t.R7$(2),t.Y8G("ngForOf",k.filter(h.purposeListInGroup,"code"))}}function s(B,M){1&B&&(t.j41(0,"div",17),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&B&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"lang_testbank_please_choose_purpose_exam")," "))}function U(B,M){1&B&&(t.j41(0,"div",17),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&B&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"lang_testbank_please_enter_purpose_create_exam")," "))}function L(B,M){if(1&B&&(t.j41(0,"div",4)(1,"div",5)(2,"label",18),t.EFF(3),t.nI1(4,"mytranslate"),t.k0s()(),t.j41(5,"div",19),t.nrm(6,"input",20),t.nI1(7,"mytranslate"),t.k0s(),t.DNE(8,U,3,3,"div",12),t.k0s()),2&B){const h=t.XpG();t.R7$(3),t.SpI(" ",t.bMT(4,3,"lang_testbank_enter_create_exam_target")," "),t.R7$(3),t.FS9("placeholder",t.bMT(7,5,"lang_testbank_enter_create_exam_target")+" ..."),t.R7$(2),t.Y8G("ngIf",(4==(null==h.form.controls.purposeExam?null:h.form.controls.purposeExam.value)||8==(null==h.form.controls.purposeExam?null:h.form.controls.purposeExam.value)||12==(null==h.form.controls.purposeExam?null:h.form.controls.purposeExam.value))&&""===(null==h.form.controls.purposeNote||null==h.form.controls.purposeNote.value?null:h.form.controls.purposeNote.value.trim()))}}let ie=(()=>{var B;class M extends u.H{convertPurposeList(){this.targetExamGroupObjs=[],this.purposeList.forEach(k=>{const{semester:y}=k;let d=this.targetExamGroupObjs.find(A=>A.semester===y);d||(d={semester:y,groupName:this.getGroupNamePurpose(k.semester??1),purposeListInGroup:[]},this.targetExamGroupObjs.push(d)),d.purposeListInGroup?.push(k)})}getGroupNamePurpose(k){switch(k){case 1:default:return"lang_testbank_semester_one";case 2:return"lang_testbank_semester_two";case 3:return"lang_testbank_another_purpose"}}ngOnInit(){this.convertPurposeList()}constructor(){super(),this.purposeList=[],this.targetExamGroupObjs=[]}}return(B=M).\u0275fac=function(k){return new(k||B)},B.\u0275cmp=t.VBU({type:B,selectors:[["config-purpose-exam"]],inputs:{form:"form",purposeList:"purposeList"},standalone:!0,features:[t.Vt3,t.aNF],decls:21,vars:18,consts:[["searchInListPurpose","searchInList"],[1,"config-purpose-exan"],[3,"formGroup"],["id","azt-config-purpose-exam",1,"grid","grid-cols-12","gap-5"],[1,"col-span-12"],[1,"font-medium"],[1,"form-label","flex","items-center"],["appearance","outline"],["searchInList","","formControlName","purposeExam","name","purposeExam"],[3,"formControl","placeholderLabel","noEntriesFoundLabel"],["disabled","",3,"value"],[3,"label",4,"ngFor","ngForOf"],["class","mt-2 text-danger text-xs",4,"ngIf"],["class","col-span-12",4,"ngIf"],[3,"label"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"mt-2","text-danger","text-xs"],["for","enter_target_create_exam",1,"form-label","flex","items-center"],[1,"setting-input"],["id","enter_target_create_exam","formControlName","purposeNote","type","text",1,"form-control",3,"placeholder"]],template:function(k,y){if(1&k&&(t.j41(0,"div",1)(1,"form",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"label",6),t.EFF(6),t.nI1(7,"mytranslate"),t.k0s()(),t.j41(8,"mat-form-field",7)(9,"mat-select",8,0)(11,"mat-option"),t.nrm(12,"ngx-mat-select-search",9),t.nI1(13,"mytranslate"),t.nI1(14,"mytranslate"),t.k0s(),t.j41(15,"mat-option",10),t.EFF(16),t.nI1(17,"mytranslate"),t.k0s(),t.DNE(18,D,3,4,"mat-optgroup",11),t.k0s()(),t.DNE(19,s,3,3,"div",12),t.k0s(),t.DNE(20,L,9,7,"div",13),t.k0s()()()),2&k){const d=t.sdS(10);t.R7$(),t.Y8G("formGroup",y.form),t.R7$(5),t.SpI(" ",t.bMT(7,10,"lang_testbank_target_exam")," "),t.R7$(6),t.FS9("placeholderLabel",t.bMT(13,12,"lang_search_by_name")),t.FS9("noEntriesFoundLabel",t.bMT(14,14,"lang_search_not_found")),t.Y8G("formControl",d.searchControl),t.R7$(3),t.Y8G("value",0),t.R7$(),t.SpI("---",t.bMT(17,16,"lang_testbank_choose_purpose"),"---"),t.R7$(2),t.Y8G("ngForOf",y.targetExamGroupObjs),t.R7$(),t.Y8G("ngIf",0==y.form.controls.purposeExam.value),t.R7$(),t.Y8G("ngIf",4==(null==y.form.controls.purposeExam?null:y.form.controls.purposeExam.value)||8==(null==y.form.controls.purposeExam?null:y.form.controls.purposeExam.value)||12==(null==y.form.controls.purposeExam?null:y.form.controls.purposeExam.value))}},dependencies:[F.An,F.U9,W.x,I.MD,I.Sq,I.bT,e.X1,e.qT,e.me,e.BC,e.cb,e.l_,e.j4,e.JD,c.iI,e.YN,f.wp,j.s,l.wT,l.D7,v.rl,m.VO,R.flO,r.L,S.Id,T.k,p.t],encapsulation:2}),M})()},63958:(ne,N,n)=>{n.d(N,{H:()=>v});var I=n(59640),e=n(54460),c=n(10936),R=n(65162),F=n(47348),S=n(44155),j=n(15343),W=n(70050),T=n(5502),f=n(36894),r=n(48891),u=n(58112);let t=(()=>{var m;class p{convertUrl(){this.src=this.sAztCommonCdnService.getMyCdn(this.src)}constructor(D){this.sAztCommonCdnService=D,this.src=""}}return(m=p).\u0275fac=function(D){return new(D||m)(r.rXU(u.c))},m.\u0275dir=r.FsC({type:m,selectors:[["","appImageFallback",""]],hostVars:1,hostBindings:function(D,s){1&D&&r.bIt("error",function(){return s.convertUrl()}),2&D&&r.Mr5("src",s.src,r.n$t)},inputs:{src:"src"},standalone:!0}),p})();function l(m,p){1&m&&(r.j41(0,"div",2),r.nrm(1,"img",3),r.nI1(2,"coreModConvertCdnLinkOfGitHub"),r.k0s()),2&m&&(r.R7$(),r.Y8G("src",r.bMT(2,1,"svgs/Img2_dat-01.svg"),r.B4B))}let v=(()=>{var m;class p extends I.H{onError(D){if(this.isRetry){const s=D.target;setTimeout(()=>{1==this.countRetry?(s.src=this.sAztCommonCdnService.getMyCdn(this.imgSrc??""),this.countRetry++):this.countRetry<5?(this.countRetry++,s.src=this.sAztCommonCdnService.getMyCdn(this.imgSrc??"")+"?t="+(new Date).getTime()):this.stopStatusObj()},500)}}onLoad(){this.stopStatusObj()}get isLazyLoad(){return void 0!==this.width&&void 0!==this.height}constructor(D){super(),this.sAztCommonCdnService=D,this.noClass=!1,this.isRetry=!0,this.countRetry=1}ngOnInit(){this.initStatusObj(),super.ngOnInit()}}return(m=p).\u0275fac=function(D){return new(D||m)(r.rXU(u.c))},m.\u0275cmp=r.VBU({type:m,selectors:[["azt-loaded-img"]],inputs:{imgSrc:"imgSrc",id:"id",noClass:"noClass",width:"width",height:"height",isRetry:"isRetry"},standalone:!0,features:[r.Vt3,r.aNF],decls:3,vars:10,consts:[["class","px-4 py-3 text-center",4,"ngIf"],["appImageFallback","",2,"width","100%",3,"load","error","width","height","hidden"],[1,"px-4","py-3","text-center"],["alt","image_loading_placeholer",3,"src"]],template:function(D,s){1&D&&(r.DNE(0,l,3,3,"div",0),r.j41(1,"img",1),r.nI1(2,"mycdn"),r.bIt("load",function(){return s.onLoad()})("error",function(L){return s.onError(L)}),r.k0s()),2&D&&(r.Y8G("ngIf",!s.isLazyLoad&&s.statusObj.loading),r.R7$(),r.HbH(s.id?"img-fluid questionId_"+s.id:s.noClass?"w-auto":"img-fluid"),r.Y8G("width",void 0!==s.width?s.width:null)("height",void 0!==s.height?s.height:null)("hidden",!s.isLazyLoad&&s.statusObj.loading),r.BMQ("loading",s.isLazyLoad?"lazy":"eager")("src",r.bMT(2,8,s.imgSrc),r.B4B))},dependencies:[e.MD,e.bT,c.X1,R.iI,c.YN,F.nf,F.Vs,S.s,j.flO,W.L,T.Id,f.k,t],encapsulation:2}),p})()},65728:(ne,N,n)=>{n.d(N,{I:()=>l});var I=n(59640),e=n(54460),c=n(10936),R=n(65162),F=n(44155),S=n(15343),j=n(70050),W=n(5502),T=n(36894),f=n(48891);const r=()=>({"text-white":!0});function u(v,m){1&v&&f.nrm(0,"lucide-icon",3),2&v&&f.Y8G("ngClass",f.lJ4(1,r))}function t(v,m){1&v&&f.nrm(0,"lucide-icon",4),2&v&&f.Y8G("ngClass",f.lJ4(1,r))}let l=(()=>{var v;class m extends I.H{constructor(){super(...arguments),this.isScrollToTop=!1}scrollTo(){this.isScrollToTop?window.scrollTo(0,0):window.scrollTo(0,document.body.scrollHeight)}ngOnInit(){super.ngOnInit()}}return(v=m).\u0275fac=(()=>{let p;return function(D){return(p||(p=f.xGo(v)))(D||v)}})(),v.\u0275cmp=f.VBU({type:v,selectors:[["azt-scroll-to-top-bottom"]],inputs:{isScrollToTop:"isScrollToTop"},standalone:!0,features:[f.Vt3,f.aNF],decls:3,vars:2,consts:[["azt-track-service","azt-scroll-to-top-bottom-DbRV8ySsXT1",1,"toolBarMobile","clickable",3,"click"],["name","chevrons-up","size","24",3,"ngClass",4,"ngIf"],["name","chevrons-down","size","24",3,"ngClass",4,"ngIf"],["name","chevrons-up","size","24",3,"ngClass"],["name","chevrons-down","size","24",3,"ngClass"]],template:function(E,D){1&E&&(f.j41(0,"div",0),f.bIt("click",function(){return D.scrollTo()}),f.DNE(1,u,1,2,"lucide-icon",1)(2,t,1,2,"lucide-icon",2),f.k0s()),2&E&&(f.R7$(),f.Y8G("ngIf",D.isScrollToTop),f.R7$(),f.Y8G("ngIf",!D.isScrollToTop))},dependencies:[e.MD,e.YU,e.bT,c.X1,R.iI,c.YN,F.s,S.flO,S.WGl,j.L,W.Id,T.k],styles:[".toolBarMobile[_ngcontent-%COMP%]{position:fixed;bottom:0;right:0;z-index:100;margin:0 40px 25px;padding:5px;background:#b5b5b587;border-radius:3px}"]}),m})()}}]);