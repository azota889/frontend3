"use strict";(self.webpackChunkTeacherMod=self.webpackChunkTeacherMod||[]).push([[32],{99965:(H,A,i)=>{i.d(A,{j:()=>o});var e=i(48891);let o=(()=>{var j;class P{constructor(g){this.el=g}onInput(){this.adjustTextAreaHeight(this.el.nativeElement)}onFocus(){this.adjustTextAreaHeight(this.el.nativeElement)}ngAfterViewInit(){this.adjustTextAreaHeight(this.el.nativeElement)}adjustTextAreaHeight(g){g.parentElement&&(g.parentElement.style.minHeight=g.parentElement.clientHeight+"px"),g.style.overflow="hidden",g.style.height="auto";let S=g.scrollHeight+30;S=S<57?57:S,g.style.height=S+"px",g.parentElement&&(g.parentElement.style.minHeight="auto")}}return(j=P).\u0275fac=function(g){return new(g||j)(e.rXU(e.aKT))},j.\u0275dir=e.FsC({type:j,selectors:[["textarea","autoResize",""]],hostBindings:function(g,S){1&g&&e.bIt("input",function(k){return S.onInput(k.target.value)})("focus",function(){return S.onFocus()})},standalone:!0}),P})()},19346:(H,A,i)=>{i.d(A,{L:()=>o});var e=i(48891);let o=(()=>{var j;class P{constructor(){this.filesChangeEmitter=new e.bkB,this.background="transparent",this.borderStyle="2px dashed initial"}onDragOver(g){g.preventDefault(),g.stopPropagation(),this.background="transparent",this.borderStyle="2px dashed #334155"}onDragLeave(g){g.preventDefault(),g.stopPropagation(),this.background="transparent",this.borderStyle="2px dashed #e5e7eb"}onDrop(g){g.preventDefault(),g.stopPropagation(),this.background="transparent",this.borderStyle="2px dashed #334155",this.filesChangeEmitter.emit(g.dataTransfer.files)}}return(j=P).\u0275fac=function(g){return new(g||j)},j.\u0275dir=e.FsC({type:j,selectors:[["","appDragDrop",""]],hostVars:4,hostBindings:function(g,S){1&g&&e.bIt("dragover",function(k){return S.onDragOver(k)})("dragleave",function(k){return S.onDragLeave(k)})("drop",function(k){return S.onDrop(k)}),2&g&&e.xc7("background",S.background)("border",S.borderStyle)},outputs:{filesChangeEmitter:"filesChangeEmitter"},standalone:!0}),P})()},43558:(H,A,i)=>{i.d(A,{Z:()=>j});var e=i(48891),o=i(44172);let j=(()=>{var P;class z{constructor(S){this.commonService=S,this.enterKey=new e.bkB,this.enableInMobile=!0}onKeyDown(S){!this.enableInMobile&&this.commonService.isMobileDevice()||"Enter"===S.key&&!S.shiftKey&&(S.preventDefault(),this.enterKey.emit())}}return(P=z).\u0275fac=function(S){return new(S||P)(e.rXU(o.R))},P.\u0275dir=e.FsC({type:P,selectors:[["","enterKey",""]],hostBindings:function(S,D){1&S&&e.bIt("keydown",function(G){return D.onKeyDown(G)})},inputs:{enableInMobile:"enableInMobile"},outputs:{enterKey:"enterKey"},standalone:!0}),z})()},9260:(H,A,i)=>{i.d(A,{m:()=>et});var e=i(48891),o=i(59640),j=i(54460),P=i(10936),z=i(65162),g=i(47348),S=i(44155),D=i(15343),k=i(70050),G=i(5502),W=i(36894),U=i(67638);const F=["table"],$=()=>({vertical:"left",horizontal:"left",wrapText:"true"}),L=()=>({rgb:"f10000"}),C=f=>({bold:"true",color:f}),n=(f,M)=>({alignment:f,font:M});function T(f,M){if(1&f&&(e.j41(0,"th",2),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&f){const r=e.XpG();e.BMQ("excelWidth",20)("excelRow",0)("excelColumn",2)("excelStyle",r.styleThNormal),e.R7$(),e.Lme(" ",e.bMT(2,6,"lang_auto_ten_dang_ky"),"",r.isBusinessDomain?"":" (VIP)"," ")}}function R(f,M){if(1&f&&(e.j41(0,"th",2),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&f){const r=e.XpG();e.BMQ("excelWidth",20)("excelRow",0)("excelColumn",8-(r.isTqbDomain?1:0))("excelStyle",r.styleThNormal),e.R7$(),e.SpI(" ",e.bMT(2,5,"lang_auto_mat_khau")," ")}}function t(f,M){if(1&f&&(e.j41(0,"th",2),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&f){const r=e.XpG();e.BMQ("excelWidth",20)("excelRow",0)("excelColumn",(r.isBusinessDomain||r.checkVipAccountService?9:8)-(r.isTqbDomain?1:0))("excelStyle",r.styleThNormal),e.R7$(),e.SpI(" ",e.bMT(2,5,"lang_auto_truong")," ")}}function V(f,M){if(1&f&&(e.j41(0,"th",2),e.EFF(1," Facebook "),e.k0s()),2&f){const r=e.XpG();e.BMQ("excelWidth",65)("excelRow",0)("excelColumn",(r.isBusinessDomain||r.checkVipAccountService?10:9)-(r.isTqbDomain?1:0))("excelStyle",r.styleThNormal)}}function Q(f,M){if(1&f&&(e.j41(0,"th",2),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&f){const r=e.XpG();e.BMQ("excelWidth",20)("excelRow",0)("excelColumn",(r.isBusinessDomain?11:r.checkVipAccountService?9:8)-(r.isTqbDomain?1:0))("excelStyle",r.styleThNormal),e.R7$(),e.SpI(" ",e.bMT(2,5,"lang_auto_lop")," ")}}function X(f,M){if(1&f&&(e.j41(0,"td",2),e.EFF(1),e.k0s()),2&f){const r=e.XpG(),x=r.$implicit,u=r.index,m=e.XpG();e.BMQ("excelRow",u+1)("excelColumn",2)("excelStyle",null!=x&&x.errorImportIdentification?m.styleTdErrorLeft:m.styleTdNormalLeft),e.R7$(),e.SpI(" ",null==x?null:x.parentUserName," ")}}function J(f,M){if(1&f&&(e.j41(0,"td",2),e.EFF(1),e.k0s()),2&f){const r=e.XpG(),x=r.$implicit,u=r.index,m=e.XpG();e.BMQ("excelRow",u+1)("excelColumn",8-(m.isTqbDomain?1:0))("excelStyle",null!=x&&x.errorImportIdentification?m.styleTdError:m.styleTdNormal),e.R7$(),e.SpI(" ",null==x?null:x.password," ")}}function Z(f,M){if(1&f&&(e.j41(0,"td",2),e.EFF(1),e.k0s()),2&f){const r=e.XpG(),x=r.$implicit,u=r.index,m=e.XpG();e.BMQ("excelRow",u+1)("excelColumn",(m.isBusinessDomain?9:8)-(m.isTqbDomain?1:0))("excelStyle",null!=x&&x.errorImportIdentification?m.styleTdNotNumberError:m.styleTdNotNumberNormal),e.R7$(),e.SpI(" ",null==x?null:x.schoolName," ")}}function q(f,M){if(1&f&&(e.j41(0,"td",2),e.EFF(1),e.k0s()),2&f){const r=e.XpG(),x=r.$implicit,u=r.index,m=e.XpG();e.BMQ("excelRow",u+1)("excelColumn",(m.isBusinessDomain?10:9)-(m.isTqbDomain?1:0))("excelStyle",null!=x&&x.errorImportIdentification?m.styleTdNotNumberError:m.styleTdNotNumberNormal),e.R7$(),e.SpI(" ",null==x?null:x.facebookLink," ")}}function tt(f,M){if(1&f&&(e.j41(0,"td",2),e.EFF(1),e.k0s()),2&f){let r;const x=e.XpG(),u=x.$implicit,m=x.index,B=e.XpG();e.BMQ("excelRow",m+1)("excelColumn",(B.isBusinessDomain?11:B.checkVipAccountService?9:8)-(B.isTqbDomain?1:0))("excelStyle",null!=u&&u.errorImportIdentification?B.styleTdError:B.styleTdNormal),e.R7$(),e.SpI(" ",null!==(r=null==u?null:u.classroomName)&&void 0!==r?r:""," ")}}function K(f,M){if(1&f&&(e.j41(0,"tr")(1,"td",2),e.EFF(2),e.k0s(),e.j41(3,"td",2),e.EFF(4),e.k0s(),e.DNE(5,X,2,4,"td",3),e.j41(6,"td",2),e.EFF(7),e.k0s(),e.j41(8,"td",2),e.EFF(9),e.k0s(),e.j41(10,"td",2),e.EFF(11),e.nI1(12,"formatOnlyDateByUserUnitPipe"),e.k0s(),e.j41(13,"td",2),e.EFF(14),e.nI1(15,"mytranslate"),e.nI1(16,"mytranslate"),e.k0s(),e.j41(17,"td",2),e.EFF(18),e.nI1(19,"formatStudentCodeToNumber"),e.k0s(),e.DNE(20,J,2,4,"td",3)(21,Z,2,4,"td",3)(22,q,2,4,"td",3)(23,tt,2,4,"td",3),e.j41(24,"td",2),e.EFF(25),e.nI1(26,"mytranslate"),e.k0s(),e.j41(27,"td",2),e.EFF(28),e.k0s()()),2&f){const r=M.$implicit,x=M.index,u=M.index,m=e.XpG();e.R7$(),e.BMQ("excelRow",u+1)("excelColumn",0)("excelStyle",null!=r&&r.errorImportIdentification?m.styleTdError:m.styleTdNormal),e.R7$(),e.SpI(" ",null!=r&&r.fullName?x+1:""," "),e.R7$(),e.BMQ("excelRow",u+1)("excelColumn",1)("excelStyle",null!=r&&r.errorImportIdentification?m.styleTdErrorLeft:m.styleTdNormalLeft),e.R7$(),e.SpI(" ",null==r?null:r.fullName," "),e.R7$(),e.Y8G("ngIf",!m.isTqbDomain),e.R7$(),e.BMQ("excelRow",u+1)("excelColumn",3-(m.isTqbDomain?1:0))("excelStyle",null!=r&&r.errorImportIdentification?m.styleTdNotNumberError:m.styleTdNotNumberNormal),e.R7$(),e.SpI(" ",null==r?null:r.phone," "),e.R7$(),e.BMQ("excelRow",u+1)("excelColumn",4-(m.isTqbDomain?1:0))("excelStyle",null!=r&&r.errorImportIdentification?m.styleTdError:m.styleTdNormal),e.R7$(),e.SpI(" ",null==r?null:r.email," "),e.R7$(),e.BMQ("excelRow",u+1)("excelColumn",5-(m.isTqbDomain?1:0))("excelStyle",null!=r&&r.errorImportIdentification?m.styleTdError:m.styleTdNormal),e.R7$(),e.SpI(" ",e.bMT(12,41,null==r?null:r.birthday)," "),e.R7$(2),e.BMQ("excelRow",u+1)("excelColumn",6-(m.isTqbDomain?1:0))("excelStyle",null!=r&&r.errorImportIdentification?m.styleTdError:m.styleTdNormal),e.R7$(),e.SpI(" ",1==(null==r?null:r.gender)?e.bMT(15,43,"lang_student_export_excel_gender_male"):0==(null==r?null:r.gender)?e.bMT(16,45,"lang_student_export_excel_gender_female"):""," "),e.R7$(3),e.BMQ("excelRow",u+1)("excelColumn",7-(m.isTqbDomain?1:0))("excelStyle",null!=r&&r.errorImportIdentification?m.styleTdNotNumberError:m.styleTdNotNumberNormal),e.R7$(),e.SpI(" ",null!=r&&r.identificationNumber?e.i5U(19,47,null==r?null:r.identificationNumber,m.myEnvironment.maxStudentCodeLength):""," "),e.R7$(2),e.Y8G("ngIf",m.isBusinessDomain||m.checkVipAccountService),e.R7$(),e.Y8G("ngIf",m.isBusinessDomain),e.R7$(),e.Y8G("ngIf",m.isBusinessDomain),e.R7$(),e.Y8G("ngIf",1===m.type),e.R7$(),e.BMQ("excelRow",u+1)("excelColumn",(m.isBusinessDomain?1===m.type?12:11:1===m.type?m.checkVipAccountService?10:9:8)-(m.isTqbDomain?1:0))("excelStyle",m.styleTdError),e.R7$(),e.SpI(" ",e.bMT(26,50,null==r?null:r.errorImportIdentification)," "),e.R7$(2),e.BMQ("excelRow",u+1)("excelColumn",(m.isBusinessDomain?1===m.type?13:12:1===m.type?m.checkVipAccountService?11:10:9)-(m.isTqbDomain?1:0))("excelStyle",e.l_i(56,n,e.lJ4(52,$),e.eq3(54,C,e.lJ4(53,L)))),e.R7$(),e.SpI(" ",m.commentObjs[u]," ")}}let et=(()=>{var f;class M extends o.H{addCommentToExcelFile(){let x="*"+this.commonService.myTranslateInstant("lang_auto_note_export_excel_class_detail_one"),u="*"+this.commonService.myTranslateInstant("lang_auto_note_export_excel_class_detail_two"),m="*"+this.commonService.myTranslateInstant("lang_auto_note_export_excel_class_detail_three"),B="*"+this.commonService.myTranslateInstant("lang_auto_note_export_excel_class_detail_four"),nt="*"+this.commonService.myTranslateInstant("lang_auto_note_export_excel_class_detail_five"),ot="*"+this.commonService.myTranslateInstant("lang_auto_note_export_excel_class_detail_six"),h="*"+this.commonService.myTranslateInstant("lang_auto_mat_khau_phai_dai_toi_thieu_la_6"),y="*"+this.commonService.myTranslateInstant("lang_core_ten_dang_nhap_chi_chua_cac_ky_tu_hop_le_va_it_nhat_1_chu_cai");this.commentObjs=[x,u,m,B,nt,ot,h,y+(this.isBusinessDomain?" ":" (VIP)")]}ngOnChanges(){this.appendObjs=[],this.isExported=!1;let u=8-(this.objs?.length??0);if(u>0)for(let m=0;m<u;m++)this.appendObjs.push(void 0)}ngAfterViewChecked(){0==this.isExported&&(this.isExported=!0,setTimeout(()=>{this.exportDataDone.emit(this.exportExcelService.exportHtmlTableToExcelBlob(this.table,!0))},0))}ngOnInit(){super.ngOnInit(),this.addCommentToExcelFile()}constructor(x){super(),this.exportExcelService=x,this.type=0,this.exportDataDone=new e.bkB,this.appendObjs=[],this.commentObjs=[],this.isExported=!1,this.styleTdNormal='{"alignment":{"vertical":"center","horizontal":"center", "wrapText":true},"font":{"bold":false,"color":{"rgb":"000000"}}}',this.styleTdNormalLeft='{"alignment":{"vertical":"center","horizontal":"left", "wrapText":true},"font":{"bold":false,"color":{"rgb":"000000"}}}',this.styleTdError='{"alignment":{"vertical":"center","horizontal":"center", "wrapText":true},"font":{"bold":false,"color":{"rgb":"f10000"}}}',this.styleTdErrorLeft='{"alignment":{"vertical":"center","horizontal":"left", "wrapText":true},"font":{"bold":false,"color":{"rgb":"f10000"}}}',this.styleThNormal='{"alignment":{"vertical":"center","horizontal":"center","wrapText":true},"font":{"bold":true,"color":{"rgb":"ffffffff"}},"fill":{"patternType":"solid","fgColor":{"rgb":"2361ae"}}}',this.styleTdNotNumberNormal='{"alignment":{"vertical":"center","horizontal":"center", "wrapText":true},"font":{"bold":false,"color":{"rgb":"000000"}},"isText":"1"}',this.styleTdNotNumberError='{"alignment":{"vertical":"center","horizontal":"center", "wrapText":true},"font":{"bold":false,"color":{"rgb":"f10000"}},"isText":"1"}'}}return(f=M).\u0275fac=function(x){return new(x||f)(e.rXU(U.x))},f.\u0275cmp=e.VBU({type:f,selectors:[["azt-export-excel-for-student-list"]],viewQuery:function(x,u){if(1&x&&e.GBs(F,5),2&x){let m;e.mGM(m=e.lsd())&&(u.table=m.first)}},inputs:{objs:"objs",type:"type"},outputs:{exportDataDone:"exportDataDone"},standalone:!0,features:[e.Vt3,e.OA$,e.aNF],decls:34,vars:60,consts:[["table",""],[1,"table","table-bordered",2,"display","none"],[1,"text-center","azt-excel-cell"],["class","text-center azt-excel-cell",4,"ngIf"],[4,"ngFor","ngForOf"]],template:function(x,u){1&x&&(e.j41(0,"table",1,0)(2,"thead")(3,"tr")(4,"th",2),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s(),e.j41(7,"th",2),e.EFF(8),e.nI1(9,"mytranslate"),e.k0s(),e.DNE(10,T,3,8,"th",3),e.j41(11,"th",2),e.EFF(12),e.nI1(13,"mytranslate"),e.k0s(),e.j41(14,"th",2),e.EFF(15),e.nI1(16,"mytranslate"),e.k0s(),e.j41(17,"th",2),e.EFF(18),e.nI1(19,"mytranslate"),e.k0s(),e.j41(20,"th",2),e.EFF(21),e.nI1(22,"mytranslate"),e.k0s(),e.j41(23,"th",2),e.EFF(24),e.nI1(25,"mytranslate"),e.k0s(),e.DNE(26,R,3,7,"th",3)(27,t,3,7,"th",3)(28,V,2,4,"th",3)(29,Q,3,7,"th",3),e.nrm(30,"th",2)(31,"th",2),e.k0s()(),e.j41(32,"tbody"),e.DNE(33,K,29,59,"tr",4),e.k0s()()),2&x&&(e.R7$(4),e.BMQ("excelWidth",10)("excelRow",0)("excelColumn",0)("excelStyle",u.styleThNormal),e.R7$(),e.SpI(" ",e.bMT(6,46,"lang_student_export_excel_no")," "),e.R7$(2),e.BMQ("excelWidth",20)("excelRow",0)("excelColumn",1)("excelStyle",u.styleThNormal),e.R7$(),e.SpI(" ",e.bMT(9,48,"lang_student_export_excel_full_name")," "),e.R7$(2),e.Y8G("ngIf",!u.isTqbDomain),e.R7$(),e.BMQ("excelWidth",20)("excelRow",0)("excelColumn",3-(u.isTqbDomain?1:0))("excelStyle",u.styleThNormal),e.R7$(),e.SpI(" ",e.bMT(13,50,"lang_student_export_excel_phone")," "),e.R7$(2),e.BMQ("excelWidth",20)("excelRow",0)("excelColumn",4-(u.isTqbDomain?1:0))("excelStyle",u.styleThNormal),e.R7$(),e.SpI(" ",e.bMT(16,52,"lang_student_export_excel_email")," "),e.R7$(2),e.BMQ("excelWidth",20)("excelRow",0)("excelColumn",5-(u.isTqbDomain?1:0))("excelStyle",u.styleThNormal),e.R7$(),e.SpI(" ",e.bMT(19,54,"lang_student_export_excel_birthday")," "),e.R7$(2),e.BMQ("excelWidth",20)("excelRow",0)("excelColumn",6-(u.isTqbDomain?1:0))("excelStyle",u.styleThNormal),e.R7$(),e.SpI(" ",e.bMT(22,56,"lang_student_export_excel_gender")," "),e.R7$(2),e.BMQ("excelWidth",20)("excelRow",0)("excelColumn",7-(u.isTqbDomain?1:0))("excelStyle",u.styleThNormal),e.R7$(),e.SpI(" ",e.bMT(25,58,"lang_auto_so_bao_danh")," "),e.R7$(2),e.Y8G("ngIf",u.isBusinessDomain||u.checkVipAccountService),e.R7$(),e.Y8G("ngIf",u.isBusinessDomain),e.R7$(),e.Y8G("ngIf",u.isBusinessDomain),e.R7$(),e.Y8G("ngIf",1===u.type),e.R7$(),e.BMQ("excelWidth",30)("excelRow",0)("excelColumn",(u.isBusinessDomain?1===u.type?12:11:1===u.type?u.checkVipAccountService?10:9:8)-(u.isTqbDomain?1:0))("excelStyle",u.styleThNormal),e.R7$(),e.BMQ("excelWidth",100),e.R7$(2),e.Y8G("ngForOf",u.objs.concat(u.appendObjs)))},dependencies:[j.MD,j.Sq,j.bT,P.X1,z.iI,P.YN,g.wp,S.s,D.flO,k.L,g.Po,g.vv,G.Id,W.k],encapsulation:2}),M})()},87039:(H,A,i)=>{i.d(A,{O:()=>d});var e=i(54460),o=i(10936),j=i(89163),P=i(65162),z=i(15343),g=i(5502),S=i(44155),D=i(33887),k=i(19346),G=i(69135),W=i(36894),U=i(7919),F=i(38009),$=i(47348),L=i(70050),C=i(80037),n=i(9260),T=i(52811),R=i(27985),t=i(48891),V=i(49842),Q=i(10296),X=i(6440),J=i(3780),Z=i(47712),q=i(81587);const tt=()=>({"ml-1":!0}),K=()=>({"mr-2":!0}),et=()=>({"text-success":!0});function f(s,O){1&s&&(t.j41(0,"div",18)(1,"span",19),t.nrm(2,"azt-loading-ui"),t.k0s()())}function M(s,O){if(1&s){const p=t.RV6();t.j41(0,"div",22)(1,"label",24),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s(),t.j41(4,"div",35)(5,"azt-list-classroom-checkbox",36),t.bIt("createdNewClassroom",function(){t.eBV(p);const _=t.XpG(2);return t.Njj(_.isCreatedNewClassroom=!0)}),t.k0s()()()}if(2&s){const p=t.XpG(2);t.Y8G("hidden",2===p.stepView),t.R7$(2),t.SpI(" ",t.bMT(3,6,"lang_auto_chon_nhung_can_danh_so_bao_danh")," "),t.R7$(3),t.Y8G("form",p.form)("classroomGroupData",p.classroomWithGroups)("examClassroomObjs",p.examClassroomObjs)("permissionName",p.permissionTypes.exam)}}function r(s,O){1&s&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&s&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"lang_auto_vui_long_nhap_so_bao_danh_bat_dau")," "))}function x(s,O){1&s&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&s&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"lang_auto_vui_long_nhap_so_bao_danh_bat_dau_lon_hon_0")," "))}function u(s,O){1&s&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&s&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"lang_auto_vui_long_nhap_so_bao_danh_bat_dau_khong_qua_6_chu_so")," "))}function m(s,O){if(1&s&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&s){const p=t.XpG(4);t.R7$(),t.SpI(" ",t.bMT(2,1,"lang_auto_yeu_cau_nhap_so_va_be_nhat_la_1_max_999999")+(p.myEnvironment.maxStudentCode-(p.totalStudent?p.totalStudent-1:0))," ")}}function B(s,O){if(1&s&&(t.j41(0,"div",42),t.DNE(1,r,3,3,"span",43)(2,x,3,3,"span",43)(3,u,3,3,"span",43)(4,m,3,3,"span",43),t.k0s()),2&s){const p=t.XpG(3);t.R7$(),t.Y8G("ngIf",p.form.controls.startNumbering.errors.required),t.R7$(),t.Y8G("ngIf",p.form.controls.startNumbering.errors.min),t.R7$(),t.Y8G("ngIf",p.form.controls.startNumbering.errors.maxlength&&!p.form.controls.startNumbering.errors.max&&!p.form.controls.startNumbering.errors.min),t.R7$(),t.Y8G("ngIf",p.form.controls.startNumbering.errors.max)}}function nt(s,O){if(1&s&&(t.j41(0,"div",37)(1,"label",38),t.EFF(2),t.nI1(3,"mytranslate"),t.nrm(4,"lucide-icon",39),t.nI1(5,"mytranslate"),t.k0s(),t.nrm(6,"input",40),t.nI1(7,"mytranslate"),t.DNE(8,B,5,4,"div",41),t.k0s()),2&s){const p=t.XpG(2);t.R7$(2),t.SpI(" ",t.bMT(3,5,"lang_auto_nhap_so_bao_danh_bat_dau")," "),t.R7$(2),t.FS9("matTooltip",t.bMT(5,7,"lang_tooltip_input_identification_numbering")),t.Y8G("ngClass",t.lJ4(11,tt)),t.R7$(2),t.FS9("placeholder",t.bMT(7,9,"lang_auto_nhap_so")+"..."),t.R7$(2),t.Y8G("ngIf",p.form.controls.startNumbering.errors&&(p.form.controls.startNumbering.touched||p.form.controls.startNumbering.dirty))}}function ot(s,O){if(1&s){const p=t.RV6();t.j41(0,"div",50),t.bIt("click",function(){t.eBV(p);const _=t.sdS(3);return t.Njj(_.click())})("filesChangeEmitter",function(_){t.eBV(p);const E=t.XpG(3);return t.Njj(E.onFileSelected(_))}),t.j41(1,"div",51)(2,"input",52,2),t.bIt("change",function(_){t.eBV(p);const E=t.XpG(3);return t.Njj(E.onFileSelected(_.target.files))}),t.k0s(),t.j41(4,"div"),t.nrm(5,"lucide-icon",53),t.j41(6,"span",54),t.EFF(7),t.nI1(8,"mytranslate"),t.k0s(),t.EFF(9),t.nI1(10,"mytranslate"),t.k0s()()()}2&s&&(t.R7$(5),t.Y8G("ngClass",t.lJ4(7,et)),t.R7$(2),t.SpI(" ",t.bMT(8,3,"lang_auto_keo_tha_file_excel")," "),t.R7$(2),t.SpI(" ",t.bMT(10,5,"lang_auto_hoc_click_de_chon_file")," "))}function h(s,O){if(1&s){const p=t.RV6();t.j41(0,"div",55)(1,"div",56)(2,"div",57)(3,"div",58)(4,"div",59)(5,"div",60),t.nrm(6,"img",61),t.nI1(7,"coreModConvertCdnLinkOfGitHub"),t.k0s(),t.j41(8,"div",62)(9,"p",63,3),t.EFF(11),t.k0s(),t.j41(12,"div",64),t.EFF(13),t.k0s()(),t.j41(14,"div",65)(15,"button",66),t.nI1(16,"mytranslate"),t.bIt("click",function(_){t.eBV(p);const E=t.XpG(3);return t.Njj(E.removeFile(_))}),t.nrm(17,"lucide-icon",67),t.k0s()()()()()()()}if(2&s){const p=t.sdS(10),l=t.XpG(3);t.R7$(6),t.Y8G("src",t.bMT(7,7,"images/excel.png"),t.B4B),t.R7$(3),t.FS9("matTooltip",null==l.file?null:l.file.name),t.Y8G("isDisabledTooltip",!1)("matTooltipDisabled",p.isDisabled),t.R7$(2),t.SpI(" ",l.file?l.file.name:""," "),t.R7$(2),t.SpI(" ",l.fileMb+"mb"," "),t.R7$(2),t.FS9("matTooltip",t.bMT(16,9,"lang_auto_xoa"))}}function y(s,O){if(1&s){const p=t.RV6();t.j41(0,"div",37)(1,"label",44),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s(),t.DNE(4,ot,11,8,"div",45)(5,h,18,11,"ng-template",null,1,t.C5r),t.j41(7,"div",46)(8,"button",47),t.bIt("click",function(){t.eBV(p);const _=t.XpG(2);return t.Njj(_.exportStudentListByClassroomIds("click"))}),t.nrm(9,"lucide-icon",48),t.j41(10,"span",49),t.EFF(11),t.nI1(12,"mytranslate"),t.k0s()()()()}if(2&s){const p=t.sdS(6),l=t.XpG(2);t.R7$(2),t.SpI(" ",t.bMT(3,5,"lang_auto_tai_file_excel_len")," "),t.R7$(2),t.Y8G("ngIf",!l.file)("ngIfElse",p),t.R7$(5),t.Y8G("ngClass",t.lJ4(9,K)),t.R7$(2),t.SpI(" ",t.bMT(12,7,"lang_auto_tai_danh_sach_hoc_sinh_trong_lop")," ")}}function b(s,O){if(1&s&&(t.j41(0,"form",20),t.DNE(1,M,6,8,"div",21),t.j41(2,"div",22)(3,"div",23)(4,"label",24),t.EFF(5),t.nI1(6,"mytranslate"),t.k0s(),t.j41(7,"div",25)(8,"div",26),t.nrm(9,"input",27),t.j41(10,"label",28),t.EFF(11),t.nI1(12,"mytranslate"),t.k0s()(),t.j41(13,"div",29),t.nrm(14,"input",30),t.j41(15,"label",31),t.EFF(16),t.nI1(17,"mytranslate"),t.k0s()()(),t.j41(18,"div",32)(19,"div",23)(20,"span",24),t.EFF(21),t.nI1(22,"mytranslate"),t.k0s(),t.EFF(23),t.nI1(24,"mytranslate"),t.k0s(),t.j41(25,"div",33)(26,"span",24),t.EFF(27),t.nI1(28,"mytranslate"),t.k0s(),t.EFF(29),t.nI1(30,"mytranslate"),t.k0s()()(),t.DNE(31,nt,9,12,"div",34)(32,y,13,10,"div",34),t.k0s()()),2&s){const p=t.XpG();t.Y8G("formGroup",p.form),t.R7$(),t.Y8G("ngIf",1===p.data.type),t.R7$(),t.Y8G("hidden",1===p.stepView),t.R7$(3),t.SpI(" ",t.bMT(6,12,"lang_auto_chon_cach_danh_so_bao_danh")," "),t.R7$(6),t.SpI(" ",t.bMT(12,14,"lang_auto_danh_tu_dong")," "),t.R7$(5),t.SpI(" ",t.bMT(17,16,"lang_auto_danh_bang_file_excel")," "),t.R7$(5),t.SpI(" ","*"+t.bMT(22,18,"lang_auto_danh_tu_dong")+": "," "),t.R7$(2),t.SpI(" ",t.bMT(24,20,"lang_auto_he_thong_se_tu_dong_danh_so_bao_danh_theo_alpha_b")," "),t.R7$(4),t.SpI(" ","*"+t.bMT(28,22,"lang_auto_danh_bang_file_excel")+": "," "),t.R7$(2),t.SpI(" ",t.bMT(30,24,"lang_auto_tai_file_excel_de_danh_so_bao_danh")," "),t.R7$(2),t.Y8G("ngIf","0"==p.form.controls.howIdentification.value),t.R7$(),t.Y8G("ngIf","1"==p.form.controls.howIdentification.value)}}function v(s,O){if(1&s){const p=t.RV6();t.j41(0,"button",68),t.bIt("click",function(){t.eBV(p);const _=t.XpG();return t.Njj(_.prevStepView())}),t.nrm(1,"lucide-icon",69),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s()}2&s&&(t.R7$(),t.Y8G("ngClass",t.lJ4(4,K)),t.R7$(),t.SpI(" ",t.bMT(3,2,"lang_auto_quay_lai")," "))}function a(s,O){if(1&s){const p=t.RV6();t.j41(0,"button",70),t.bIt("click",function(){t.eBV(p);const _=t.XpG();return t.Njj(_.nextStepView())}),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()}if(2&s){const p=t.XpG();t.Y8G("disabled",p.form.invalid),t.R7$(),t.SpI(" ",t.bMT(2,2,"lang_auto_tiep_tuc")," ")}}function I(s,O){if(1&s){const p=t.RV6();t.j41(0,"button",71),t.bIt("click",function(){t.eBV(p);const _=t.XpG();return t.Njj(_.handleNumberingAuto(_.form.controls.howIdentification.value))}),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()}if(2&s){const p=t.XpG();t.Y8G("disabled","0"==p.form.controls.howIdentification.value&&p.form.controls.startNumbering.errors||"1"==p.form.controls.howIdentification.value&&null==p.file),t.R7$(),t.SpI(" ",t.bMT(2,2,"lang_auto_danh_so")," ")}}function c(s,O){if(1&s){const p=t.RV6();t.j41(0,"azt-export-excel-for-student-list",72),t.bIt("exportDataDone",function(_){t.eBV(p);const E=t.XpG();return t.Njj(E.exportStudentListDone(_))}),t.k0s()}if(2&s){const p=t.XpG();t.Y8G("objs",p.exportStudentObjs)("type",1)}}let d=(()=>{var s;class O extends D._{handleCloseDialog(){this.dialogRef.close(this.isCreatedNewClassroom)}getFileMB(l){return l&&l>0?(l/=1048576).toFixed(2):0}nextStepView(){this.stepView=2,this.getTotalStudentData()}prevStepView(){this.stepView=1}exportStudentListDone(l){let _=this.commonService.createFileNameExportFile(["list-student","danh-sach-hoc-sinh"])+".xlsx";this.shareFileFlutterService.shareFileWithBlob(l,_)}handleNumberingAuto(l){let _=[];if(1===this.data.type&&(_=this.sAztClassroomCheckboxService.getClassroomIdsCheckedInGroup(this.form.controls.classroomFormArray)),2===this.data.type&&(_=this.data.listCheckBox),"0"==l){let E={classroomIds:_,startCode:this.form.getRawValue().startNumbering};this.numberingAutomaticIdentification(E)}else this.file&&this.numberingExcelIdentification(_,this.file)}numberingAutomaticIdentification(l){this.initStatusObj(),this.waitDestroy(this.studentService.apiStudentSetIdentificationNumbersPost(l).subscribe(_=>{1==_.success?(this.dialogRef.close(!0),this.successStatusObj("lang_auto_danh_so_banh_thanh_cong",!0)):this.errorStatusObj(_.message??"",!0)}))}numberingExcelIdentification(l,_){this.initStatusObj(),this.waitDestroy(this.studentService.apiStudentImportStudentIdentificationNumbersPostForm(l,_).subscribe(E=>{if(1==E.success)this.dialogRef.close(!0),this.successStatusObj("lang_auto_danh_so_banh_thanh_cong",!0);else{this.errorStatusObj("lang_auto_vui_long_nhap_dung_noi_dung_trong_file",!0);let w=E.data??[];w.length>0&&(this.processDataErrors(w),this.exportStudentListByClassroomIds("auto")),this.file=null}}))}processData(){1===this.data.type&&(this.classroomWithGroups.forEach(l=>{null!=l.groupObj&&-1!=l.groupObj?.id&&(this.classroomObjs=this.classroomObjs.concat(l.classroomObjs??[])),null==l.groupObj&&(this.classroomObjs=this.classroomObjs.concat(l.classroomObjs??[]))}),this.classroomObjs=this.classroomObjs.filter(l=>!l.isShareClassroom)),2===this.data.type&&(this.stepView=2)}processDataErrors(l){if(this.exportStudentObjs=[],l.length>0)for(let _=0;_<l.length;_++){let E={id:0,classroomId:0,parentId:0,fullName:l[_].fullName,phone:l[_].phone,email:l[_].email,birthday:l[_].birthday,gender:Number(l[_].gender)??void 0,identificationNumber:l[_].identificationNumber,classroomName:l[_].classroomName};E.errorImportIdentification=l[_].message??"",("lang_core_duplicate_student_identification_number_in_db"==l[_].message||"lang_core_duplicate_student_identification_number_in_excel"==l[_].message||"lang_core_invalid_identification_number_data_type"==l[_].message)&&(E.errorImportIdentification=l[_].message),this.exportStudentObjs?.push(E)}}getStudentListByClassroomIds(l){this.waitDestroy(this.studentProfileV2Service.apiStudentProfileV2GetStudentsGet(l).subscribe(_=>{if(_.success){this.exportStudentObjs=_.data;let E=this.exportStudentObjs?.length??0;if(this.exportStudentObjs){let w=[],Y=[];this.exportStudentObjs.forEach((N,it,st)=>{w.find(at=>at.identificationNumber===N.identificationNumber)?Y.push(N):w.push(N)});for(let N=0;N<E;N++)if(this.exportStudentObjs[N].identificationNumber)for(let it=0;it<Y.length;it++)this.exportStudentObjs&&this.exportStudentObjs[N].identificationNumber===Y[it].identificationNumber&&(this.exportStudentObjs[N].errorImportIdentification="lang_auto_trung_so_bao_danh");else this.exportStudentObjs[N].errorImportIdentification="lang_auto_khong_co_so_bao_danh"}if(this.exportStudentObjs)for(let w=0;w<E;w++)if(this.exportStudentObjs[w].identificationNumber)for(let Y=w+1;Y<E;Y++)this.exportStudentObjs&&this.exportStudentObjs[w].identificationNumber===this.exportStudentObjs[Y].identificationNumber&&(this.exportStudentObjs[w].errorImportIdentification="lang_auto_trung_so_bao_danh");else this.exportStudentObjs[w].errorImportIdentification="lang_auto_khong_co_so_bao_danh"}else this.showErrorSnack(_.message??"")}))}exportStudentListByClassroomIds(l){let _="";1===this.data.type&&(_=this.sAztClassroomCheckboxService.getClassroomIdsCheckedInGroup(this.form.controls.classroomFormArray).toString()),2===this.data.type&&(_=this.data.listCheckBox.toString()),"click"==l&&this.getStudentListByClassroomIds(_)}getTotalStudentData(){let l="";1===this.data.type&&(l=this.sAztClassroomCheckboxService.getClassroomIdsCheckedInGroup(this.form.controls.classroomFormArray).toString()),2===this.data.type&&(l=this.data.listCheckBox.toString()),this.waitDestroy(this.studentProfileV2Service.apiStudentProfileV2GetStudentsGet(l).subscribe(_=>{_.success&&(this.totalStudent=_.data?.length??0,this.form.controls.startNumbering.addValidators(o.k0.max(999999-(this.totalStudent?this.totalStudent-1:0))))}))}onFileSelected(l){this.file=l?l[0]:this.file,this.fileMb=this.getFileMB(this.file?.size??0),this.file&&["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel"].includes(this.file.type)||(this.file=null,this.showErrorSnack("lang_auto_vui_long_chon_dung_tep_tin_excel"))}removeFile(l){l.stopPropagation(),this.file=null}getClassroomObjs(){this.data.needGetClassroomGroups?(this.initStatusObj(),this.waitDestroy(this.classroomGroupService.apiClassroomGroupGetObjsGet("all").subscribe(l=>{l.success?(this.classroomWithGroups=l.data?.activeClassroomData??[],this.classroomObjs=this.commonService.concatMultipleArray(this.classroomWithGroups.map(_=>_.classroomObjs)),this.processData(),this.successStatusObj()):this.errorStatusObj(l.message??"",!0)}))):this.processData()}ngOnInit(){if(super.ngOnInit(),this.getClassroomObjs(),this.data.totalStudent){this.totalStudent=this.data.totalStudent;let l=this.myEnvironment.maxStudentCode;this.form.valueChanges.subscribe(_=>{this.form.controls.startNumbering.addValidators(o.k0.max(l-(this.totalStudent?this.totalStudent-1:0)))})}}constructor(l,_,E,w,Y,N,it){super(it,N),this.classroomGroupService=l,this.shareFileFlutterService=_,this.studentService=E,this.studentProfileV2Service=w,this.sAztClassroomCheckboxService=Y,this.dialogRef=N,this.data=it,this.classroomObjs=[],this.examClassroomObjs=[],this.permissionTypes=F.t,this.stepView=1,this.fileMb=0,this.totalStudent=0,this.isCreatedNewClassroom=!1,this.classroomWithGroups=[],this.form=new o.gE({startNumbering:new o.MJ(1,{nonNullable:!0,validators:[o.k0.required,o.k0.pattern("^[0-9]*$"),o.k0.min(1),o.k0.maxLength(this.myEnvironment.maxStudentCodeLength)]}),howIdentification:new o.MJ("0",{nonNullable:!0}),classroomFormArray:new o.Yp([]),file:new o.MJ("",{nonNullable:!0}),whoAllow:new o.MJ(0,{nonNullable:!0})},{validators:[C.j.classroomInGroupCheckBoxValidatorWithoutWhoAllow]})}}return(s=O).\u0275fac=function(l){return new(l||s)(t.rXU(V.kG),t.rXU(Q.R),t.rXU(X.b0),t.rXU(X.m_),t.rXU(J.Q),t.rXU(j.CP,8),t.rXU(j.Vh,8))},s.\u0275cmp=t.VBU({type:s,selectors:[["azt-automatic-identification"]],standalone:!0,features:[t.Vt3,t.aNF],decls:22,vars:15,consts:[["doneLoading",""],["exitsFile",""],["fileSelect",""],["c","isDisabled"],[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-3","border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"text-lg","font-medium"],[1,"leading-relaxed","text-slate-500","text-xs","mt-0.5"],[1,"p-3"],["class","flex items-center h-full",4,"ngIf","ngIfElse"],[1,"p-3","flex","items-center"],[1,"mr-auto"],["azt-track-service","azt-automatic-identification-4p28zlT3gA","class","btn-text-primary",3,"click",4,"ngIf"],["azt-track-service","azt-automatic-identification-2EiEU9_Cnw",1,"btn","btn-secondary","w-20","mr-2",3,"click"],["azt-track-service","azt-automatic-identification-kI3BEINfrN","class","btn w-24 btn-primary",3,"disabled","click",4,"ngIf"],["azt-track-service","azt-automatic-identification-H8w2l6VC9A","class","btn w-24 btn-primary",3,"disabled","click",4,"ngIf"],[3,"objs","type","exportDataDone",4,"ngIf"],[1,"flex","items-center","h-full"],[1,"w-6","h-6","inline-block","mx-auto"],[3,"formGroup"],["class","intro",3,"hidden",4,"ngIf"],[1,"intro",3,"hidden"],[1,"mt-0"],[1,"font-medium"],[1,"flex","flex-col","sm:flex-row","mt-2"],[1,"form-check","mt-1","mr-10"],["id","by-automatic","type","radio","value","0","formControlName","howIdentification",1,"form-check-input"],["for","by-automatic",1,"form-check-label"],[1,"form-check","mt-1"],["id","by-excel","type","radio","value","1","formControlName","howIdentification",1,"form-check-input"],["for","by-excel",1,"form-check-label"],[1,"text-xs","leading-relaxed","mt-4"],[1,"mt-1"],["class","intro mt-4",4,"ngIf"],[1,"azt-list-classroom","mt-3"],[3,"createdNewClassroom","form","classroomGroupData","examClassroomObjs","permissionName"],[1,"intro","mt-4"],["for","number-start",1,"form-label","font-medium","flex","items-center"],["name","info","size","18",3,"ngClass","matTooltip"],["id","number-start","appOnlyNumber","","type","text","formControlName","startNumbering",1,"form-control",3,"placeholder"],["class","mt-2 fade text-xs text-danger font-medium",4,"ngIf"],[1,"mt-2","fade","text-xs","text-danger","font-medium"],[4,"ngIf"],[1,"form-label","font-medium"],["azt-track-service","azt-automatic-identification-PooqxQVpD","class","w-full mt-3 xl:mt-0 flex-1 border-2 border-dashed dark:border-darkmode-400 rounded-md","appDragDrop","",3,"click","filesChangeEmitter",4,"ngIf","ngIfElse"],[1,"mt-2","text-center"],["azt-track-service","azt-automatic-identification-J9l0MWhdQ8",1,"btn","text-primary","btn-transparent",3,"click"],["name","cloud-download","size","20",3,"ngClass"],[1,"text-primary"],["azt-track-service","azt-automatic-identification-PooqxQVpD","appDragDrop","",1,"w-full","mt-3","xl:mt-0","flex-1","border-2","border-dashed","dark:border-darkmode-400","rounded-md",3,"click","filesChangeEmitter"],[1,"px-4","pb-4","mt-5","flex","items-center","justify-center","text-center","cursor-pointer","relative"],["id","horizontal-form-1","type","file","formControlName","file","accept",".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",1,"hiddenIpt",3,"change"],["name","file-spreadsheet","size","20",3,"ngClass"],[1,"text-primary","mr-1"],[1,"attack-file","mt-5"],[1,"grid","grid-cols-12","gap-3","mt-3"],[1,"col-span-12"],[1,"border","flex","border-slate-200/60","dark:border-darkmode-400","rounded-md","p-3"],[1,"flex","w-full","items-center"],[1,"w-12","h-12","image-fit","lg:mr-1","flex-none"],["alt","excel icon",1,"img-fluid",3,"src"],[1,"ml-2","mt-0",2,"width","calc(100% - 100px)"],[1,"font-medium","truncate",3,"matTooltip","isDisabledTooltip","matTooltipDisabled"],[1,"text-slate-500","text-xs"],[1,"ml-auto","mt-0","flex-none"],["azt-track-service","azt-automatic-identification-nCXCf-x_kx",1,"btn","btn-outline-danger","btn-transparent",3,"click","matTooltip"],["name","trash-2","size","20"],["azt-track-service","azt-automatic-identification-4p28zlT3gA",1,"btn-text-primary",3,"click"],["name","chevron-left","size","16",3,"ngClass"],["azt-track-service","azt-automatic-identification-kI3BEINfrN",1,"btn","w-24","btn-primary",3,"click","disabled"],["azt-track-service","azt-automatic-identification-H8w2l6VC9A",1,"btn","w-24","btn-primary",3,"click","disabled"],[3,"exportDataDone","objs","type"]],template:function(l,_){if(1&l){const E=t.RV6();t.j41(0,"div",4)(1,"div",5)(2,"div",6)(3,"h3",7),t.EFF(4),t.nI1(5,"mytranslate"),t.k0s(),t.j41(6,"div",8),t.EFF(7),t.nI1(8,"mytranslate"),t.k0s()(),t.j41(9,"div",9),t.DNE(10,f,3,0,"div",10)(11,b,33,26,"ng-template",null,0,t.C5r),t.k0s()(),t.j41(13,"div",11)(14,"div",12),t.DNE(15,v,4,5,"button",13),t.k0s(),t.j41(16,"button",14),t.bIt("click",function(){return t.eBV(E),t.Njj(_.handleCloseDialog())}),t.EFF(17),t.nI1(18,"mytranslate"),t.k0s(),t.DNE(19,a,3,4,"button",15)(20,I,3,4,"button",16),t.k0s()(),t.DNE(21,c,1,2,"azt-export-excel-for-student-list",17)}if(2&l){const E=t.sdS(12);t.R7$(4),t.SpI(" ",t.bMT(5,9,"lang_auto_danh_so_bao_danh")," "),t.R7$(3),t.SpI(" ",t.bMT(8,11,"lang_auto_danh_so_bao_danh_de_su_dung_cho_nhung_ki_thi_offline")," "),t.R7$(3),t.Y8G("ngIf",_.statusObj.loading)("ngIfElse",E),t.R7$(5),t.Y8G("ngIf",1===_.data.type&&2===_.stepView),t.R7$(2),t.SpI(" ",t.bMT(18,13,"lang_auto_huy")," "),t.R7$(2),t.Y8G("ngIf",1===_.stepView),t.R7$(),t.Y8G("ngIf",2===_.stepView),t.R7$(),t.Y8G("ngIf",_.exportStudentObjs)}},dependencies:[k.L,G.f,T.R,R.D,n.m,e.MD,e.YU,e.bT,o.X1,o.qT,o.me,o.Fm,o.BC,o.cb,o.j4,o.JD,P.iI,o.YN,$.wp,$.Vs,S.s,Z.oV,z.flO,z.WGl,L.L,g.Id,U.Z,W.k,q.t],encapsulation:2}),O})()},7814:(H,A,i)=>{i.d(A,{W:()=>U});var e=i(48891),o=i(59640),j=i(27208),P=i(54460),z=i(10936),g=i(65162),S=i(44155),D=i(15343),k=i(70050),G=i(5502),W=i(36894);let U=(()=>{var F;class $ extends o.H{allowCustomFilter(){return!1}customFilter(C){return!1}searchByName(C){this.searchByNameObj=C,this.calculateClassroomInfo()}collapseAll(C){this.viewClassroomGroupObjs.map(n=>n.groupObj.isExpand=C),this.calculateClassroomInfo()}collapseByGroupId(C){let n=this.viewClassroomGroupObjs.find(T=>T.groupObj.id==C.id);n&&(n.groupObj.isExpand=!n.groupObj.isExpand),this.calculateClassroomInfo()}clickToClassroomEvent(C){this.clickToClassroomEmitter.emit(C)}calculateClassroomInfo(){this.doFilterData()}doFilterData(){const C=this.commonService.convertVietnameseToEnglish(this.searchByNameObj.searchContent).toLowerCase().trim(),n=""==C;if(n&&!this.allowCustomFilter())return this.viewClassroomGroupObjs.forEach(T=>{T.groupObj.totalViewClassrooms=T.classroomObjs.length,T.groupObj.isShowGroup=!0,T.classroomObjs.map(R=>R.isShowClassroom=!0)}),void this.checkIsExpandAll();this.viewClassroomGroupObjs.forEach(T=>{T.classroomObjs.forEach(R=>{let t=n||this.checkMatchByGroupOrClassroomName(C,T.groupObj.name??"",R.name),V=!this.allowCustomFilter()||this.customFilter(R);R.isShowClassroom=t&&V}),T.groupObj.totalViewClassrooms=T.classroomObjs.filter(R=>R.isShowClassroom).length,T.groupObj.isShowGroup=T.groupObj.totalViewClassrooms>0}),this.checkIsExpandAll()}checkIsExpandAll(){let C=this.viewClassroomGroupObjs.filter(n=>n.groupObj.isShowGroup);this.isExpandAll=C.length==C.filter(n=>n.groupObj.isExpand).length}checkMatchByGroupOrClassroomName(C,n,T){C=this.commonService.removeMultipleSpace(this.commonService.convertVietnameseToEnglish(C).toLowerCase().trim());let R=(n=this.commonService.removeMultipleSpace(this.commonService.convertVietnameseToEnglish(n).toLowerCase().trim()))+" "+(T=this.commonService.removeMultipleSpace(this.commonService.convertVietnameseToEnglish(T).toLowerCase().trim())),t=C.split(" ");for(var V of t)if(!R.includes(V))return!1;return!0}initData(){if(this.classroomGroupData.forEach(C=>{C.groupObj.name=this.commonService.myTranslateInstant(C.groupObj.name)??"",C.classroomObjs.map(n=>n.name=this.commonService.myTranslateInstant(n.name)??"")}),this.viewClassroomGroupObjs=this.classroomGroupData.map(C=>({groupObj:{...C.groupObj,isShowGroup:!0,isExpand:this.isExpandAll,lastMatchName:"",totalViewClassrooms:0},isOwned:C.isOwned,classroomObjs:C.classroomObjs.map(n=>({...n,isShowClassroom:!0}))})),this.removeFreeDomClassroom){let C=this.viewClassroomGroupObjs.find(n=>n.groupObj.id<=0);C&&(C.classroomObjs=C?.classroomObjs.filter(n=>n.id>=0)),this.viewClassroomGroupObjs=this.viewClassroomGroupObjs.filter(n=>n.groupObj.id>0||n.groupObj.id<=0&&n.classroomObjs.length>0)}this.calculateClassroomInfo()}ngOnInit(){super.ngOnInit(),this.initData()}constructor(){super(),this.isExpandAll=!0,this.clickToClassroomEmitter=new e.bkB,this.classroomGridCss="col-span-4 md:col-span-2 2lg:col-span-2",this.removeFreeDomClassroom=!0,this.viewClassroomGroupObjs=[],this.searchByNameObj=new j.Z}}return(F=$).\u0275fac=function(C){return new(C||F)},F.\u0275cmp=e.VBU({type:F,selectors:[["azt-base-list-classroom-view"]],inputs:{classroomGroupData:"classroomGroupData",isExpandAll:"isExpandAll"},outputs:{clickToClassroomEmitter:"clickToClassroomEmitter"},standalone:!0,features:[e.Vt3,e.aNF],decls:0,vars:0,template:function(C,n){},dependencies:[P.MD,z.X1,g.iI,z.YN,S.s,D.flO,k.L,G.Id,W.k],encapsulation:2}),$})()},35048:(H,A,i)=>{i.d(A,{w:()=>ot});var e=i(54460),o=i(48891),j=i(10936),P=i(65162),z=i(15343),g=i(44155),S=i(69135),D=i(47348),k=i(70050),G=i(59640),W=i(2915),U=i(18718),F=i(32099),$=i(27208),L=i(5502),C=i(36894),n=i(68774),T=i(6440),R=i(47712);const t=(h,y)=>({"dark:bg-darkmode-400 bg-slate-100":h,"border-b border-slate-200/60 dark:border-darkmode-400":y});function V(h,y){if(1&h&&o.nrm(0,"azt-loading-effect",10),2&h){const b=o.XpG();o.Y8G("currentStatusObj",b.statusObj)}}function Q(h,y){if(1&h&&(o.j41(0,"span"),o.EFF(1),o.nI1(2,"mytranslate"),o.k0s()),2&h){const b=o.XpG(3);o.R7$(),o.JRh(o.bMT(2,1,"lang_auto_da_chon")+": "+b.totalStudentsSelected)}}function X(h,y){if(1&h&&(o.j41(0,"span"),o.EFF(1),o.nI1(2,"mytranslate"),o.k0s()),2&h){const b=o.XpG(3);o.R7$(),o.JRh(b.data.classroomName+(b.totalStudentsSelected?" ("+o.bMT(2,1,"lang_auto_da_chon")+": "+b.totalStudentsSelected+")":""))}}function J(h,y){}function Z(h,y){if(1&h&&(o.j41(0,"div")(1,"azt-mat-dialog-content",24),o.DNE(2,J,0,0,"ng-template",25),o.k0s()()),2&h){o.XpG(3);const b=o.sdS(8);o.R7$(),o.Y8G("defaultHeight",40),o.R7$(),o.Y8G("ngTemplateOutlet",b)}}function q(h,y){}function tt(h,y){if(1&h&&(o.j41(0,"div"),o.DNE(1,q,0,0,"ng-template",25),o.k0s()),2&h){o.XpG(3);const b=o.sdS(8);o.R7$(),o.Y8G("ngTemplateOutlet",b)}}function K(h,y){if(1&h){const b=o.RV6();o.qex(0),o.j41(1,"div",12)(2,"div",13),o.DNE(3,Q,3,3,"span",14)(4,X,3,3,"span",14),o.j41(5,"div",15)(6,"azt-search-box",16),o.nI1(7,"mytranslate"),o.bIt("onSearch",function(a){o.eBV(b);const I=o.XpG(2);return o.Njj(I.onSearchBox(a.searchObj))}),o.k0s()()(),o.j41(8,"div",17)(9,"div",18)(10,"input",19),o.bIt("change",function(){o.eBV(b);const a=o.XpG(2);return o.Njj(a.selectAllStudentOfClass())}),o.k0s(),o.j41(11,"label",20),o.EFF(12),o.nI1(13,"mytranslate"),o.k0s()(),o.j41(14,"div",21)(15,"input",22),o.bIt("change",function(){o.eBV(b);const a=o.XpG(2);return o.Njj(a.calculateFormData())}),o.k0s(),o.j41(16,"label",23),o.EFF(17),o.nI1(18,"mytranslate"),o.k0s()()()(),o.DNE(19,Z,3,2,"div",14)(20,tt,2,1,"div",14),o.bVm()}if(2&h){const b=o.XpG(2);o.R7$(),o.Y8G("ngClass",o.l_i(18,t,b.isDialog,!b.isDialog)),o.R7$(2),o.Y8G("ngIf",!b.isDialog),o.R7$(),o.Y8G("ngIf",b.isDialog),o.R7$(2),o.Y8G("isServerSearch",!1)("styleInput","form-control-sm ")("placeholder",o.bMT(7,12,"lang_student_classroom_list_detail_search_name_student")),o.R7$(4),o.Y8G("formControl",b.selectAllFormControl),o.R7$(2),o.SpI(" ",o.bMT(13,14,b.selectAllFormControl.value?"lang_remove_all":"lang_select_all")," "),o.R7$(3),o.Y8G("formControl",b.showCheckedFormControl),o.R7$(2),o.SpI(" ",o.bMT(18,16,"lang_testbank_selected_students")," "),o.R7$(2),o.Y8G("ngIf",b.isDialog),o.R7$(),o.Y8G("ngIf",!b.isDialog)}}function et(h,y){1&h&&(o.j41(0,"div",26)(1,"span"),o.EFF(2),o.nI1(3,"mytranslate"),o.k0s()()),2&h&&(o.R7$(2),o.JRh(o.bMT(3,1,"lang_core_class_has_no_student")))}function f(h,y){if(1&h&&o.DNE(0,K,21,21,"ng-container",11)(1,et,4,3,"ng-template",null,2,o.C5r),2&h){const b=o.sdS(2),v=o.XpG();o.Y8G("ngIf",v.studentObjs.length>0)("ngIfElse",b)}}function M(h,y){if(1&h){const b=o.RV6();o.j41(0,"div",27)(1,"button",28),o.bIt("click",function(){o.eBV(b);const a=o.XpG();return o.Njj(a.btnCloseDialog())}),o.EFF(2),o.nI1(3,"mytranslate"),o.k0s()()}2&h&&(o.R7$(2),o.SpI(" ",o.bMT(3,1,"lang_cms_common_ok")," "))}function r(h,y){1&h&&(o.qex(0),o.j41(1,"div",26)(2,"span",29),o.EFF(3),o.nI1(4,"mytranslate"),o.k0s()(),o.bVm()),2&h&&(o.R7$(3),o.JRh(o.bMT(4,1,"lang_testbank_no_students_selected")))}function x(h,y){if(1&h){const b=o.RV6();o.j41(0,"div",34)(1,"div",35)(2,"input",36),o.bIt("change",function(){o.eBV(b);const a=o.XpG(4);return o.Njj(a.calculateFormData())}),o.k0s(),o.j41(3,"label",37,4),o.nI1(5,"mytranslate"),o.EFF(6),o.nI1(7,"mytranslate"),o.k0s()()()}if(2&h){const b=o.sdS(4),v=o.XpG().$implicit;o.R7$(2),o.FS9("id","azt-checkbox-student-"+v.id),o.Y8G("formControl",v.isChecked),o.R7$(),o.FS9("for","azt-checkbox-student-"+v.id),o.Y8G("matTooltip",o.bMT(5,8,v.fullName))("isDisabledTooltip",!1)("matTooltipDisabled",b.isDisabled)("matTooltipShowDelay",500),o.R7$(3),o.SpI(" ",o.bMT(7,10,v.fullName)," ")}}function u(h,y){if(1&h&&(o.qex(0),o.DNE(1,x,8,12,"div",33),o.bVm()),2&h){const b=y.$implicit;o.R7$(),o.Y8G("ngIf",b.isShowStudent)}}function m(h,y){1&h&&(o.j41(0,"div",26),o.EFF(1),o.nI1(2,"mytranslate"),o.k0s()),2&h&&(o.R7$(),o.SpI(" ",o.bMT(2,1,"lang_student_classroom_list_detail_not_student")," "))}function B(h,y){if(1&h&&(o.j41(0,"div",30),o.DNE(1,u,2,1,"ng-container",31),o.k0s(),o.DNE(2,m,3,3,"div",32)),2&h){const b=o.XpG(2);o.R7$(),o.Y8G("ngForOf",b.studentObjs),o.R7$(),o.Y8G("ngIf",0==b.totalStudentsShow)}}function nt(h,y){if(1&h&&o.DNE(0,r,5,3,"ng-container",11)(1,B,3,2,"ng-template",null,3,o.C5r),2&h){const b=o.sdS(2),v=o.XpG();o.Y8G("ngIf",v.totalStudentsSelected<=0&&v.showCheckedFormControl.value)("ngIfElse",b)}}let ot=(()=>{var h;class y extends G.H{resetAll(){this.selectAllFormControl.reset(),this.showCheckedFormControl.reset(),this.selectAllStudentOfClass()}btnCloseDialog(){if(this.studentObjs.length<=0)return this.closeBox.emit();let v={classroomId:this.data.classroomId,classroomName:this.data.classroomName,studentIdsSelected:this.studentObjs.filter(a=>a.isChecked.value).map(a=>a.id)};this.closeBox.emit(v)}onSearchBox(v){this.searchContentObj=v,this.calculateFormData()}selectAllStudentOfClass(){this.studentObjs.map(v=>v.isChecked.setValue(this.selectAllFormControl.value)),this.calculateFormData()}calculateFormData(){let v=this.commonService.convertVietnameseToEnglish(this.searchContentObj.searchContent).toLowerCase().trim();this.studentObjs.forEach(a=>{const I=this.commonService.convertVietnameseToEnglish(a.fullName??"").toLowerCase().trim();let c=""==v||I.includes(v);a.isShowStudent=(!this.showCheckedFormControl.value||a.isChecked.value)&&c}),this.totalStudentsSelected=this.studentObjs.filter(a=>a.isChecked.value).length,this.selectAllFormControl.setValue(this.totalStudentsSelected==this.studentObjs.length),this.totalStudentsShow=this.studentObjs.filter(a=>a.isShowStudent).length,this.isDialog||this.btnCloseDialog()}getData(){this.initStatusObj(),this.waitDestroy(this.studentProfileV2Service.apiStudentProfileV2GetObjsByClassroomIdGet(this.data.classroomId).subscribe(v=>{if(!v.success)return this.errorStatusObj(v.message,!0);let a=v.data?.studentObjs??[];a=0==v.data?.classroomObj.sortType?this.sortService.sortFirstNameStudents(this.commonService.myClone(a)??[]):this.sortService.sortArrayByMultipleObjectKeyAsc(this.commonService.myClone(a)??[],"pos","id"),this.initFormData(a),this.stopStatusObj()}))}initFormData(v){this.studentObjs=v.map(a=>({...a,isShowStudent:!0,isChecked:new j.MJ(this.data.studentIdsSelected.includes(a.id),{nonNullable:!0})})),this.calculateFormData()}ngOnInit(){this.getData()}constructor(v,a){super(),this.sortService=v,this.studentProfileV2Service=a,this.selectAllFormControl=new j.MJ(!1,{nonNullable:!0}),this.showCheckedFormControl=new j.MJ(!1,{nonNullable:!0}),this.studentObjs=[],this.totalStudentsSelected=0,this.totalStudentsShow=0,this.searchContentObj=new $.Z,this.isDialog=!0,this.closeBox=new o.bkB}}return(h=y).\u0275fac=function(v){return new(v||h)(o.rXU(n.g),o.rXU(T.m_))},h.\u0275cmp=o.VBU({type:h,selectors:[["azt-select-student"]],inputs:{isDialog:"isDialog",data:"data"},outputs:{closeBox:"closeBox"},standalone:!0,features:[o.Vt3,o.aNF],decls:9,vars:3,consts:[["doneLoading",""],["templateSelectStudent",""],["emptyStudents",""],["checkedBox",""],["c","isDisabled"],["id","selectStudent",1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-0"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],["class","p-3 text-right",4,"ngIf"],[3,"currentStatusObj"],[4,"ngIf","ngIfElse"],[1,"p-3","flex","flex-col","sm:flex-row","sm:h-auto","sm:items-center",3,"ngClass"],[1,"font-medium","mr-auto"],[4,"ngIf"],[1,"w-full","relative","flex","items-center","mt-2"],[3,"onSearch","isServerSearch","styleInput","placeholder"],[1,"flex","items-center","mt-2","sm:mt-0"],[1,"form-check","mr-3"],["id","selected-all","type","checkbox",1,"form-check-input",3,"change","formControl"],["for","selected-all",1,"form-check-label"],[1,"form-check"],["id","show-student-checked","type","checkbox",1,"form-check-input",3,"change","formControl"],["for","show-student-checked",1,"form-check-label"],[3,"defaultHeight"],[3,"ngTemplateOutlet"],[1,"h-full","flex","items-center","justify-center","p-5"],[1,"p-3","text-right"],["azt-track-service","azt-dialog-warning-3FIn9IaXN",1,"btn","w-24","btn-primary",3,"click"],[1,"mx-auto"],[1,"p-3","grid","grid-cols-12","gap-3"],[4,"ngFor","ngForOf"],["class","h-full flex items-center justify-center p-5",4,"ngIf"],["class","col-span-12 md:col-span-4 mt-2",4,"ngIf"],[1,"col-span-12","md:col-span-4","mt-2"],[1,"azt-checkbox-item"],["type","checkbox",1,"form-check-input",3,"change","id","formControl"],[1,"form-check-label","truncate",2,"vertical-align","middle",3,"matTooltip","isDisabledTooltip","matTooltipDisabled","matTooltipShowDelay","for"]],template:function(v,a){if(1&v&&(o.j41(0,"div",5)(1,"div",6)(2,"div",7),o.DNE(3,V,1,1,"azt-loading-effect",8)(4,f,3,2,"ng-template",null,0,o.C5r),o.k0s()(),o.DNE(6,M,4,3,"div",9),o.k0s(),o.DNE(7,nt,3,2,"ng-template",null,1,o.C5r)),2&v){const I=o.sdS(5);o.R7$(3),o.Y8G("ngIf",a.statusObj.loading)("ngIfElse",I),o.R7$(3),o.Y8G("ngIf",a.isDialog)}},dependencies:[S.f,U.K,F.W,W.U,e.MD,e.YU,e.Sq,e.bT,e.T3,j.X1,j.Zm,j.BC,j.l_,P.iI,j.YN,D.wp,g.s,R.oV,z.flO,k.L,L.Id,C.k],encapsulation:2}),y})()},41517:(H,A,i)=>{i.d(A,{M:()=>v});var e=i(59640),o=i(60495),j=i(87840),P=i(89163),z=i(33887),g=i(18718),S=i(68323),D=i(54460),k=i(10936),G=i(65162),W=i(47348),U=i(44155),F=i(15343),$=i(70050),L=i(5502),C=i(36894),n=i(48891),T=i(49842);const R=()=>[];function t(a,I){if(1&a&&n.nrm(0,"azt-loading-effect",3),2&a){const c=n.XpG();n.Y8G("currentStatusObj",c.statusObj)}}function V(a,I){if(1&a&&(n.nrm(0,"img",25),n.nI1(1,"mycdn")),2&a){const c=n.XpG(2);n.FS9("src",n.bMT(1,1,null==c.whoSharePermissionObj?null:c.whoSharePermissionObj.avatar),n.B4B)}}function Q(a,I){if(1&a&&n.nrm(0,"azt-create-avatar",26),2&a){const c=n.XpG(2);n.Y8G("nameCreateAvatar",null==c.whoSharePermissionObj?null:c.whoSharePermissionObj.fullName)("size",40)}}function X(a,I){if(1&a&&(n.j41(0,"div",27),n.EFF(1),n.k0s()),2&a){const c=n.XpG(2);n.R7$(),n.JRh(null==c.whoSharePermissionObj?null:c.whoSharePermissionObj.phone)}}function J(a,I){if(1&a&&(n.j41(0,"div",28)(1,"div"),n.EFF(2),n.nI1(3,"mytranslate"),n.k0s()()),2&a){const c=I.$implicit;n.R7$(2),n.SpI("- ",n.bMT(3,1,c.key),"")}}function Z(a,I){if(1&a){const c=n.RV6();n.j41(0,"button",29),n.bIt("click",function(){n.eBV(c);const s=n.XpG(2);return n.Njj(s.confirmReceivePermission(3))}),n.EFF(1),n.nI1(2,"mytranslate"),n.k0s()}2&a&&(n.R7$(),n.JRh(n.bMT(2,1,"lang_auto_tu_choi")))}function q(a,I){if(1&a){const c=n.RV6();n.j41(0,"button",30),n.bIt("click",function(){n.eBV(c);const s=n.XpG(2);return n.Njj(s.confirmReceivePermission(2))}),n.EFF(1),n.nI1(2,"mytranslate"),n.k0s()}2&a&&(n.R7$(),n.JRh(n.bMT(2,1,"lang_auto_chap_nhan")))}function tt(a,I){if(1&a){const c=n.RV6();n.j41(0,"button",31),n.bIt("click",function(){n.eBV(c);const s=n.XpG(2);return n.Njj(s.confirmReceivePermission(3))}),n.EFF(1),n.nI1(2,"mytranslate"),n.k0s()}2&a&&(n.R7$(),n.JRh(n.bMT(2,1,"lang_auto_xoa_quyen")))}function K(a,I){if(1&a){const c=n.RV6();n.j41(0,"div",4)(1,"div",5)(2,"h3",6)(3,"span",7),n.EFF(4),n.k0s(),n.j41(5,"span",8),n.EFF(6),n.nI1(7,"mytranslate"),n.k0s()(),n.j41(8,"div",9)(9,"div",10)(10,"div",11)(11,"div",12),n.DNE(12,V,2,3,"img",13)(13,Q,1,2,"azt-create-avatar",14),n.k0s()(),n.j41(14,"div",15)(15,"p",16)(16,"span"),n.EFF(17),n.k0s()(),n.DNE(18,X,2,1,"div",17),n.k0s()()(),n.j41(19,"div",18)(20,"div"),n.DNE(21,J,4,3,"div",19),n.k0s()()()(),n.j41(22,"div",20)(23,"button",21),n.bIt("click",function(){n.eBV(c);const s=n.XpG();return n.Njj(s.cancelReceivePermission())}),n.EFF(24),n.nI1(25,"mytranslate"),n.k0s(),n.DNE(26,Z,3,3,"button",22)(27,q,3,3,"button",23)(28,tt,3,3,"button",24),n.k0s()}if(2&a){let c;const d=n.XpG();n.R7$(4),n.JRh(null==d.whoSharePermissionObj?null:d.whoSharePermissionObj.fullName),n.R7$(2),n.JRh(n.bMT(7,11,"lang_auto_da_gan_quyen_cho")),n.R7$(6),n.Y8G("ngIf",null==d.whoSharePermissionObj?null:d.whoSharePermissionObj.avatar),n.R7$(),n.Y8G("ngIf",!(null!=d.whoSharePermissionObj&&d.whoSharePermissionObj.avatar)),n.R7$(4),n.JRh(null==d.whoSharePermissionObj?null:d.whoSharePermissionObj.fullName),n.R7$(),n.Y8G("ngIf",null==d.whoSharePermissionObj?null:d.whoSharePermissionObj.phone),n.R7$(3),n.Y8G("ngForOf",null!==(c=null==d.whoSharePermissionObj?null:d.whoSharePermissionObj.permissionObjs)&&void 0!==c?c:n.lJ4(15,R)),n.R7$(3),n.JRh(n.bMT(25,13,"lang_auto_huy")),n.R7$(2),n.Y8G("ngIf",1==(null==d.whoSharePermissionObj?null:d.whoSharePermissionObj.permissionStatus)),n.R7$(),n.Y8G("ngIf",1==(null==d.whoSharePermissionObj?null:d.whoSharePermissionObj.permissionStatus)),n.R7$(),n.Y8G("ngIf",2==(null==d.whoSharePermissionObj?null:d.whoSharePermissionObj.permissionStatus))}}let et=(()=>{var a;class I extends z._{cancelReceivePermission(){this.dialogRef.close(!1)}confirmReceivePermission(d){this.initStatusObj(),this.permissionTeamService.apiPermissionTeamConfirmPermissionPost({tenantId:this.whoSharePermissionObj?.id,objectId:this.shareDataObj?.objectId??0,objectCode:this.shareDataObj?.objectCode??"",status:d}).subscribe(O=>{1==O.success?3==d?(this.successStatusObj("lang_auto_xoa_quyen_thanh_cong",!0),this.dialogRef.close(!0)):(this.successStatusObj("lang_auto_xac_nhan_quyen_thanh_cong",!0),this.dialogRef.close(!0)):(this.errorStatusObj(O.message??"",!0),this.dialogRef.close(!1))})}ngOnInit(){super.ngOnInit()}constructor(d,s,O){super(s,d),this.dialogRef=d,this.data=s,this.permissionTeamService=O,this.whoSharePermissionObj=void 0,this.whoSharePermissionObj=s.whoSharePermissionObj,this.shareDataObj=s.shareDataObj}}return(a=I).\u0275fac=function(d){return new(d||a)(n.rXU(P.CP),n.rXU(P.Vh),n.rXU(T.km))},a.\u0275cmp=n.VBU({type:a,selectors:[["azt-share-show-who-share-permission-dialog"]],standalone:!0,features:[n.Vt3,n.aNF],decls:4,vars:2,consts:[["doneLoading",""],[1,"box","search-form"],["class","p-5",3,"currentStatusObj",4,"ngIf","ngIfElse"],[1,"p-5",3,"currentStatusObj"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5"],[1,"text-lg","font-medium","flex","items-center"],[2,"font-weight","bold"],[1,"ml-1"],[1,"mt-2","x"],[1,"flex","flex-row","items-center","mb-2","p-3","rounded-md"],[1,"w-10","h-10","image-fit","mr-2"],[1,"w-10","h-10","image-fit","lg:mr-1","flex","items-center"],["class","rounded-full",3,"src",4,"ngIf"],["class","mr-2",3,"nameCreateAvatar","size",4,"ngIf"],[1,"ml-2","mr-auto","text-left","mt-0"],[1,"font-medium"],["class","text-slate-500 text-xs mt-0.5",4,"ngIf"],[1,"x","px-3"],["style","font-weight: 500; margin-top: 5px",4,"ngFor","ngForOf"],[1,"p-3","text-right","w-full"],["azt-track-service","who-share-permission-dialog-2WKlv8lCOaG",1,"btn","btn-secondary",3,"click"],["azt-track-service","who-share-permission-dialog-K31mtdUwJ8a","class","btn btn-danger ml-2",3,"click",4,"ngIf"],["azt-track-service","who-share-permission-dialog-zOf1Sgw2fVz","class","btn btn-primary ml-2",3,"click",4,"ngIf"],["azt-track-service","who-share-permission-dialog-2IrhVG-Va27","class","btn btn-primary ml-2",3,"click",4,"ngIf"],[1,"rounded-full",3,"src"],[1,"mr-2",3,"nameCreateAvatar","size"],[1,"text-slate-500","text-xs","mt-0.5"],[2,"font-weight","500","margin-top","5px"],["azt-track-service","who-share-permission-dialog-K31mtdUwJ8a",1,"btn","btn-danger","ml-2",3,"click"],["azt-track-service","who-share-permission-dialog-zOf1Sgw2fVz",1,"btn","btn-primary","ml-2",3,"click"],["azt-track-service","who-share-permission-dialog-2IrhVG-Va27",1,"btn","btn-primary","ml-2",3,"click"]],template:function(d,s){if(1&d&&(n.j41(0,"div",1),n.DNE(1,t,1,1,"azt-loading-effect",2)(2,K,29,16,"ng-template",null,0,n.C5r),n.k0s()),2&d){const O=n.sdS(3);n.R7$(),n.Y8G("ngIf",s.statusObj.loading)("ngIfElse",O)}},dependencies:[g.K,S.p,D.MD,D.Sq,D.bT,k.X1,G.iI,k.YN,W.nf,W.wp,U.s,F.flO,$.L,L.Id,C.k],styles:[".content1[_ngcontent-%COMP%]{padding:15px;max-width:400px;min-width:200px;position:inherit!important}.search-form[_ngcontent-%COMP%]{max-width:500px;width:80vw}.content-search[_ngcontent-%COMP%]{max-height:400px;overflow:auto;min-width:220px}[_ngcontent-%COMP%]::-webkit-scrollbar{background-color:#fff;width:16px}[_ngcontent-%COMP%]::-webkit-scrollbar-button{display:none}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background-color:#fff}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#babac0;border-radius:16px;border:4px solid #fff}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}.show-tickets[_ngcontent-%COMP%]{display:inline-block;position:relative;transition:all .3s;border:1px solid #0110b1!important;border-radius:50%}.show-tickets[_ngcontent-%COMP%]:hover{transform:translateY(-5px);z-index:999!important}.singer-img[_ngcontent-%COMP%]{border-radius:50%;width:30px!important;height:30px!important;font-size:30px!important}.content-search[_ngcontent-%COMP%]{min-width:330px;background-color:#fff;border-radius:5px;box-shadow:0 0 9px #5b5b5b59}.search-ver[_ngcontent-%COMP%]:hover{background:#e8e8e8}.search-ver[_ngcontent-%COMP%]{color:#0093ff;vertical-align:middle;font-size:26px;padding:2px 4px;height:30px;width:32px;text-align:center;border-radius:3px;margin-left:-32px}.input-search[_ngcontent-%COMP%]{width:100%;height:34px;border:2px solid rgba(204,201,201,.8901960784);padding:.2rem .55rem;border-radius:3px;font-size:12px}.input-search[_ngcontent-%COMP%]::placeholder{opacity:.7}.input-search[_ngcontent-%COMP%]:focus{border:2px solid #0EAFC0;outline:none}.buttom-cancel[_ngcontent-%COMP%]{background-color:#fff;border-radius:5px;padding:5px 15px;border:1px solid rgb(212,211,211)}.buttom-cancel[_ngcontent-%COMP%]:hover{background-color:#eee}.block-share[_ngcontent-%COMP%]{position:relative}.icon-close[_ngcontent-%COMP%]{position:absolute;top:0;right:0;cursor:pointer;height:23px;font-size:22px;width:23px}.buttom-save[_ngcontent-%COMP%]{background-color:#169bd5;border-radius:5px;padding:6px;color:#fff}.buttom-save[_ngcontent-%COMP%]:hover{background-color:#13b3f8}.buttom-delete[_ngcontent-%COMP%]{background-color:#f44336;border-radius:5px;padding:6px 15px;color:#fff}.buttom-delete[_ngcontent-%COMP%]:hover{background-color:#f81707}.buttom-share[_ngcontent-%COMP%]{font-size:11px;border:1px solid #b2b2b2;border-radius:2px;background:#fff;color:#000}.manage-contacts[_ngcontent-%COMP%]:hover{color:#19cdfa}.manage-contacts[_ngcontent-%COMP%]{font-size:9px;color:#00a7d0}.view-singer-name[_ngcontent-%COMP%]:hover{background:#ececec;border-radius:5px;padding:4px}.view-singer-name[_ngcontent-%COMP%]{border-radius:5px;padding:4px}.popup-delete[_ngcontent-%COMP%]{z-index:1000;width:100%;display:flex;left:0;top:0;position:fixed;height:100%;min-height:100vh;background-color:#3c3c3c80}.body-popup-delete[_ngcontent-%COMP%]{top:50%;left:50%;border-radius:5px;transform:translate(-50%,-50%);position:fixed;background:#fff;width:30%;overflow:auto;text-align:center;padding:20px}.view-list-permission[_ngcontent-%COMP%]:hover{background:#ececec;border-radius:5px;padding:4px}.view-list-permission[_ngcontent-%COMP%]{background:#f3f3f3;border-radius:5px;padding:4px}@media screen and (max-width: 750px){.body-popup-delete[_ngcontent-%COMP%]{width:90%!important}}.btn-menu-item-custom[_ngcontent-%COMP%]{line-height:35px;height:35px;color:#2f3542;text-transform:initial}.btn-menu-item-custom[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#2f3542;vertical-align:middle;font-size:20px;width:20px;height:20px}img[_ngcontent-%COMP%]{display:initial!important}"]}),I})();var f=i(68774),M=i(46899);const r=a=>({"ml-2":a}),x=()=>({"mr-2":!0}),u=a=>({"z-index":a});function m(a,I){if(1&a){const c=n.RV6();n.j41(0,"div",11)(1,"button",12),n.bIt("click",function(){const s=n.eBV(c).$implicit,O=n.XpG(2);return n.Njj(O.showAddOrEditPermissionDialog(void 0,s))}),n.nrm(2,"azt-create-avatar",13),n.k0s()()}if(2&a){const c=I.$implicit;n.R7$(),n.Y8G("disabled",!c.allowEditPermission),n.R7$(),n.Y8G("linkAvatar",c.avatar)("nameCreateAvatar",c.fullName)("size",30)}}function B(a,I){if(1&a){const c=n.RV6();n.j41(0,"div")(1,"button",14),n.bIt("click",function(){const s=n.eBV(c).$implicit,O=n.XpG(2);return n.Njj(O.showAddOrEditPermissionDialog(s,void 0))}),n.nrm(2,"azt-create-avatar",15),n.k0s()()}if(2&a){const c=I.$implicit,d=I.index,s=n.XpG(2);n.ZvI("w-8 h-8 mb-3 image-fit show-tickets zoom-in -ml-4 ",(null==s.shareDataObj||null==s.shareDataObj.groupObjs?null:s.shareDataObj.groupObjs.length)==d+1?"mr-2":""," "),n.R7$(),n.Y8G("disabled",!c.allowEditPermission),n.R7$(),n.Y8G("nameCreateAvatar",c.name)("size",30)}}function nt(a,I){1&a&&(n.j41(0,"span",16),n.EFF(1),n.nI1(2,"mytranslate"),n.k0s()),2&a&&(n.R7$(),n.SpI(" ",n.bMT(2,1,"lang_auto_chia_se")," "))}function ot(a,I){if(1&a){const c=n.RV6();n.j41(0,"div",5)(1,"div"),n.DNE(2,m,3,4,"div",6)(3,B,3,6,"div",7),n.j41(4,"button",8),n.bIt("click",function(){n.eBV(c);const s=n.XpG();return n.Njj(s.showListPeopleWhoWillShare())}),n.nrm(5,"lucide-icon",9),n.DNE(6,nt,3,3,"span",10),n.k0s()()()}if(2&a){const c=n.XpG();n.R7$(),n.HbH(0!=(null==c.shareDataObj||null==c.shareDataObj.teacherObjs?null:c.shareDataObj.teacherObjs.length)||0!=(null==c.shareDataObj||null==c.shareDataObj.groupObjs?null:c.shareDataObj.groupObjs.length)?"pl-4":""),n.R7$(),n.Y8G("ngForOf",null==c.shareDataObj?null:c.shareDataObj.teacherObjs),n.R7$(),n.Y8G("ngForOf",null==c.shareDataObj?null:c.shareDataObj.groupObjs),n.R7$(),n.Y8G("ngClass",n.eq3(7,r,0!=(null==c.shareDataObj||null==c.shareDataObj.teacherObjs?null:c.shareDataObj.teacherObjs.length)||0!=(null==c.shareDataObj||null==c.shareDataObj.groupObjs?null:c.shareDataObj.groupObjs.length))),n.R7$(2),n.Y8G("ngIf",!c.isMobileDevice)}}function h(a,I){if(1&a){const c=n.RV6();n.j41(0,"div",17)(1,"button",18),n.bIt("click",function(){n.eBV(c);const s=n.XpG();return n.Njj(s.showListPeopleWhoWillShare())}),n.nrm(2,"lucide-icon",19),n.EFF(3),n.nI1(4,"mytranslate"),n.k0s()()}2&a&&(n.R7$(2),n.Y8G("ngClass",n.lJ4(4,x)),n.R7$(),n.SpI(" ",n.bMT(4,2,"lang_auto_chia_se")," "))}function y(a,I){if(1&a){const c=n.RV6();n.j41(0,"div",23)(1,"div",24),n.bIt("click",function(){const s=n.eBV(c).$implicit,O=n.XpG(2);return n.Njj(O.showWhoSharePermissionDialog(s))}),n.nrm(2,"azt-create-avatar",25),n.k0s()()}if(2&a){let c;const d=I.$implicit,s=I.index,O=n.XpG(2);n.Y8G("ngStyle",n.eq3(5,u,(null!==(c=null==O.shareDataObj||null==O.shareDataObj.teacherObjs?null:O.shareDataObj.teacherObjs.length)&&void 0!==c?c:0)+(null!==(c=null==O.shareDataObj||null==O.shareDataObj.groupObjs?null:O.shareDataObj.groupObjs.length)&&void 0!==c?c:0)-s)),n.R7$(2),n.Y8G("linkAvatar",d.avatar)("nameCreateAvatar",d.fullName)("size",28)("showCheckUser",2==d.permissionStatus||5==d.permissionStatus)}}function b(a,I){if(1&a&&(n.j41(0,"div",20)(1,"span",21),n.EFF(2),n.nI1(3,"mytranslate"),n.k0s(),n.DNE(4,y,3,7,"div",22),n.k0s()),2&a){const c=n.XpG();n.R7$(2),n.SpI("",n.bMT(3,2,"lang_auto_giao_vien_chia_se"),":\xa0"),n.R7$(2),n.Y8G("ngForOf",c.whoSharePermission)}}let v=(()=>{var a;class I extends e.H{showAddOrEditPermissionDialog(d,s){this.sAztDialogService.open(o.A,{data:{groupObj:d,teacherObj:s,shareDataObj:this.shareDataObj},restoreFocus:!1}).afterClosed().subscribe(p=>{p&&this.getTeamPermissionObjs()})}showWhoSharePermissionDialog(d){this.sAztDialogService.open(et,{data:{whoSharePermissionObj:d,shareDataObj:this.shareDataObj},restoreFocus:!1}).afterClosed().subscribe(O=>{O&&this.getTeamPermissionObjs()})}showListPeopleWhoWillShare(){this.sAztDialogService.open(j.z,{data:{backToLink:this.backToLink,shareDataObj:this.shareDataObj},autoFocus:!1,restoreFocus:!1}).afterClosed().subscribe(s=>{s&&this.getTeamPermissionObjs()})}getTeamPermissionObjs(){this.initStatusObj(),this.teacherGroupService.apiTeacherGroupGetTeamPermissionObjsGet(this.objectCodeType,this.objectId).subscribe(d=>{1==d.success?(this.whoSharePermission=d.data?.whoSharePermission??[],this.shareDataObj={objectId:this.objectId,objectCode:this.objectCode,objectCodeType:this.objectCodeType,classroomWithPermissionObj:this.classroomWithPermissionObj,examWithPermissionObj:this.examWithPermissionObj,homeworkWithPermissionObj:this.homeworkWithPermissionObj,categoryWithPermissionObj:this.categoryWithPermissionObj,allGroupPermissionObjs:this.sortService.sortGroupName(d.data?.allGroupPermissionObjs??[]),allTeacherPermissionObjs:this.sortService.sortFirstNameStudents(d.data?.allTeacherPermissionObjs??[]),groupObjs:d.data?.groups??[],teacherObjs:d.data?.teachers??[],ownerObj:d.data?.owner},this.stopStatusObj()):this.errorStatusObj(d.message??"",!0)})}initPermission(){this.classroomWithPermissionObj?(this.permissionObj=this.classroomWithPermissionObj?.permissionObj,this.getTeamPermissionObjs()):this.examWithPermissionObj?(this.permissionObj=this.examWithPermissionObj?.permissionObj,this.getTeamPermissionObjs()):this.homeworkWithPermissionObj?(this.permissionObj=this.homeworkWithPermissionObj?.permissionObj,this.getTeamPermissionObjs()):this.categoryWithPermissionObj&&(this.permissionObj=this.categoryWithPermissionObj?.permissionObj,this.getTeamPermissionObjs())}ngOnChanges(){this.initPermission()}constructor(d,s,O){super(),this.teacherGroupService=d,this.sortService=s,this.sAztDialogService=O,this.backToLink="",this.objectId=0,this.objectCodeType=0,this.typeDisplay="button",this.objectCode="",this.whoSharePermission=[]}}return(a=I).\u0275fac=function(d){return new(d||a)(n.rXU(T.xr),n.rXU(f.g),n.rXU(M.i))},a.\u0275cmp=n.VBU({type:a,selectors:[["azt-share"]],inputs:{backToLink:"backToLink",objectId:"objectId",objectCodeType:"objectCodeType",typeDisplay:"typeDisplay",objectCode:"objectCode",classroomWithPermissionObj:"classroomWithPermissionObj",examWithPermissionObj:"examWithPermissionObj",homeworkWithPermissionObj:"homeworkWithPermissionObj",categoryWithPermissionObj:"categoryWithPermissionObj"},standalone:!0,features:[n.Vt3,n.OA$,n.aNF],decls:5,vars:3,consts:[[1,"share-block"],[1,"intro","flex"],["class","share-block-item mt-2",4,"ngIf"],["class","share-block-item w-full",4,"ngIf"],["style","display: flex; align-items: center; margin-top: 0.5rem",4,"ngIf"],[1,"share-block-item","mt-2"],["class","w-8 h-8 mb-2 image-fit show-tickets zoom-in -ml-4",4,"ngFor","ngForOf"],[3,"class",4,"ngFor","ngForOf"],["azt-track-service","share-button-box-2Ui6XcNn3Z",1,"btn","btn-sm","btn-outline-secondary",2,"vertical-align","middle",3,"click","ngClass"],["name","share-2","size","16"],["class","ml-2",4,"ngIf"],[1,"w-8","h-8","mb-2","image-fit","show-tickets","zoom-in","-ml-4"],["azt-track-service","share-button-box-vHBJYcuuna",3,"click","disabled"],[3,"linkAvatar","nameCreateAvatar","size"],["azt-track-service","share-button-box-GF6YzJ_wHE",3,"click","disabled"],[3,"nameCreateAvatar","size"],[1,"ml-2"],[1,"share-block-item","w-full"],["azt-track-service","share-button-box-i8iU_Wa_sh",1,"dropdown-item","w-full",3,"click"],["name","share-2","size","16",3,"ngClass"],[2,"display","flex","align-items","center","margin-top","0.5rem"],[2,"font-weight","500"],["class","show-tickets clickable ml-1",3,"ngStyle",4,"ngFor","ngForOf"],[1,"show-tickets","clickable","ml-1",3,"ngStyle"],["azt-track-service","share-button-box-CleLxM4YRRW",3,"click"],[3,"linkAvatar","nameCreateAvatar","size","showCheckUser"]],template:function(d,s){1&d&&(n.j41(0,"div",0)(1,"div",1),n.DNE(2,ot,7,9,"div",2)(3,h,5,5,"div",3),n.k0s(),n.DNE(4,b,5,4,"div",4),n.k0s()),2&d&&(n.R7$(2),n.Y8G("ngIf","button"===s.typeDisplay),n.R7$(),n.Y8G("ngIf","menu"===s.typeDisplay),n.R7$(),n.Y8G("ngIf",s.whoSharePermission.length>0&&"button"===s.typeDisplay))},dependencies:[S.p,D.MD,D.YU,D.Sq,D.bT,D.B3,k.X1,G.iI,k.YN,W.wp,U.s,F.flO,F.WGl,$.L,L.Id,C.k],styles:[".content1[_ngcontent-%COMP%]{padding:15px;max-width:400px;min-width:200px;position:inherit!important}.search-form[_ngcontent-%COMP%]{max-width:500px;width:80vw}.content-search[_ngcontent-%COMP%]{max-height:400px;overflow:auto;min-width:220px}[_ngcontent-%COMP%]::-webkit-scrollbar{background-color:#fff;width:16px}[_ngcontent-%COMP%]::-webkit-scrollbar-button{display:none}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background-color:#fff}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#babac0;border-radius:16px;border:4px solid #fff}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}.show-tickets[_ngcontent-%COMP%]{display:inline-block;position:relative;transition:all .3s;border:1px solid #0110b1!important;border-radius:50%}.show-tickets[_ngcontent-%COMP%]:hover{transform:translateY(-5px);z-index:999!important}.singer-img[_ngcontent-%COMP%]{border-radius:50%;width:30px!important;height:30px!important;font-size:30px!important}.content-search[_ngcontent-%COMP%]{min-width:330px;background-color:#fff;border-radius:5px;box-shadow:0 0 9px #5b5b5b59}.search-ver[_ngcontent-%COMP%]:hover{background:#e8e8e8}.search-ver[_ngcontent-%COMP%]{color:#0093ff;vertical-align:middle;font-size:26px;padding:2px 4px;height:30px;width:32px;text-align:center;border-radius:3px;margin-left:-32px}.input-search[_ngcontent-%COMP%]{width:100%;height:34px;border:2px solid rgba(204,201,201,.8901960784);padding:.2rem .55rem;border-radius:3px;font-size:12px}.input-search[_ngcontent-%COMP%]::placeholder{opacity:.7}.input-search[_ngcontent-%COMP%]:focus{border:2px solid #0EAFC0;outline:none}.buttom-cancel[_ngcontent-%COMP%]{background-color:#fff;border-radius:5px;padding:5px 15px;border:1px solid rgb(212,211,211)}.buttom-cancel[_ngcontent-%COMP%]:hover{background-color:#eee}.block-share[_ngcontent-%COMP%]{position:relative}.icon-close[_ngcontent-%COMP%]{position:absolute;top:0;right:0;cursor:pointer;height:23px;font-size:22px;width:23px}.buttom-save[_ngcontent-%COMP%]{background-color:#169bd5;border-radius:5px;padding:6px;color:#fff}.buttom-save[_ngcontent-%COMP%]:hover{background-color:#13b3f8}.buttom-delete[_ngcontent-%COMP%]{background-color:#f44336;border-radius:5px;padding:6px 15px;color:#fff}.buttom-delete[_ngcontent-%COMP%]:hover{background-color:#f81707}.buttom-share[_ngcontent-%COMP%]{font-size:11px;border:1px solid #b2b2b2;border-radius:2px;background:#fff;color:#000}.manage-contacts[_ngcontent-%COMP%]:hover{color:#19cdfa}.manage-contacts[_ngcontent-%COMP%]{font-size:9px;color:#00a7d0}.view-singer-name[_ngcontent-%COMP%]:hover{background:#ececec;border-radius:5px;padding:4px}.view-singer-name[_ngcontent-%COMP%]{border-radius:5px;padding:4px}.popup-delete[_ngcontent-%COMP%]{z-index:1000;width:100%;display:flex;left:0;top:0;position:fixed;height:100%;min-height:100vh;background-color:#3c3c3c80}.body-popup-delete[_ngcontent-%COMP%]{top:50%;left:50%;border-radius:5px;transform:translate(-50%,-50%);position:fixed;background:#fff;width:30%;overflow:auto;text-align:center;padding:20px}.view-list-permission[_ngcontent-%COMP%]:hover{background:#ececec;border-radius:5px;padding:4px}.view-list-permission[_ngcontent-%COMP%]{background:#f3f3f3;border-radius:5px;padding:4px}@media screen and (max-width: 750px){.body-popup-delete[_ngcontent-%COMP%]{width:90%!important}}.btn-menu-item-custom[_ngcontent-%COMP%]{line-height:35px;height:35px;color:#2f3542;text-transform:initial}.btn-menu-item-custom[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#2f3542;vertical-align:middle;font-size:20px;width:20px;height:20px}img[_ngcontent-%COMP%]{display:initial!important}"]}),I})()}}]);