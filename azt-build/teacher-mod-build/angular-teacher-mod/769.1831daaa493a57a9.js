"use strict";(self.webpackChunkTeacherMod=self.webpackChunkTeacherMod||[]).push([[769],{87816:(H,w,o)=>{o.d(w,{j:()=>t});var v=o(48891);let t=(()=>{var I;class z{constructor(b){this.el=b}onInput(){this.adjustTextAreaHeight(this.el.nativeElement)}onFocus(){this.adjustTextAreaHeight(this.el.nativeElement)}ngAfterViewInit(){this.adjustTextAreaHeight(this.el.nativeElement)}adjustTextAreaHeight(b){b.parentElement&&(b.parentElement.style.minHeight=b.parentElement.clientHeight+"px"),b.style.overflow="hidden",b.style.height="auto";let j=b.scrollHeight+30;j=j<57?57:j,b.style.height=j+"px",b.parentElement&&(b.parentElement.style.minHeight="auto")}}return(I=z).\u0275fac=function(b){return new(b||I)(v.rXU(v.aKT))},I.\u0275dir=v.FsC({type:I,selectors:[["textarea","autoResize",""]],hostBindings:function(b,j){1&b&&v.bIt("input",function(k){return j.onInput(k.target.value)})("focus",function(){return j.onFocus()})},standalone:!0}),z})()},78841:(H,w,o)=>{o.d(w,{L:()=>t});var v=o(48891);let t=(()=>{var I;class z{constructor(){this.filesChangeEmitter=new v.bkB,this.background="transparent",this.borderStyle="2px dashed initial"}onDragOver(b){b.preventDefault(),b.stopPropagation(),this.background="transparent",this.borderStyle="2px dashed #334155"}onDragLeave(b){b.preventDefault(),b.stopPropagation(),this.background="transparent",this.borderStyle="2px dashed #e5e7eb"}onDrop(b){b.preventDefault(),b.stopPropagation(),this.background="transparent",this.borderStyle="2px dashed #334155",this.filesChangeEmitter.emit(b.dataTransfer.files)}}return(I=z).\u0275fac=function(b){return new(b||I)},I.\u0275dir=v.FsC({type:I,selectors:[["","appDragDrop",""]],hostVars:4,hostBindings:function(b,j){1&b&&v.bIt("dragover",function(k){return j.onDragOver(k)})("dragleave",function(k){return j.onDragLeave(k)})("drop",function(k){return j.onDrop(k)}),2&b&&v.xc7("background",j.background)("border",j.borderStyle)},outputs:{filesChangeEmitter:"filesChangeEmitter"},standalone:!0}),z})()},16581:(H,w,o)=>{o.d(w,{Z:()=>I});var v=o(48891),t=o(21164);let I=(()=>{var z;class P{constructor(j){this.commonService=j,this.enterKey=new v.bkB,this.enableInMobile=!0}onKeyDown(j){!this.enableInMobile&&this.commonService.isMobileDevice()||"Enter"===j.key&&!j.shiftKey&&(j.preventDefault(),this.enterKey.emit())}}return(z=P).\u0275fac=function(j){return new(j||z)(v.rXU(t.R))},z.\u0275dir=v.FsC({type:z,selectors:[["","enterKey",""]],hostBindings:function(j,M){1&j&&v.bIt("keydown",function(G){return M.onKeyDown(G)})},inputs:{enableInMobile:"enableInMobile"},outputs:{enterKey:"enterKey"},standalone:!0}),P})()},72235:(H,w,o)=>{o.d(w,{m:()=>et});var v=o(54460),t=o(48891),I=o(10936),z=o(65162),P=o(44327),b=o(96639),j=o(55887),M=o(88023),k=o(15343),G=o(5502),$=o(44155),U=o(1425);const F=["table"],W=()=>({vertical:"left",horizontal:"left",wrapText:"true"}),V=()=>({rgb:"f10000"}),C=p=>({bold:"true",color:p}),n=(p,T)=>({alignment:p,font:T});function y(p,T){if(1&p&&(t.j41(0,"th",2),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&p){const s=t.XpG();t.BMQ("excelWidth",20)("excelRow",0)("excelColumn",2)("excelStyle",s.styleThNormal),t.R7$(),t.Lme(" ",t.bMT(2,6,"lang_auto_ten_dang_ky"),"",s.isBusinessDomain?"":" (VIP)"," ")}}function R(p,T){if(1&p&&(t.j41(0,"th",2),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&p){const s=t.XpG();t.BMQ("excelWidth",20)("excelRow",0)("excelColumn",8-(s.isTqbDomain?1:0))("excelStyle",s.styleThNormal),t.R7$(),t.SpI(" ",t.bMT(2,5,"lang_auto_mat_khau")," ")}}function e(p,T){if(1&p&&(t.j41(0,"th",2),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&p){const s=t.XpG();t.BMQ("excelWidth",20)("excelRow",0)("excelColumn",(s.isBusinessDomain||s.checkVipAccountService?9:8)-(s.isTqbDomain?1:0))("excelStyle",s.styleThNormal),t.R7$(),t.SpI(" ",t.bMT(2,5,"lang_auto_truong")," ")}}function L(p,T){if(1&p&&(t.j41(0,"th",2),t.EFF(1," Facebook "),t.k0s()),2&p){const s=t.XpG();t.BMQ("excelWidth",65)("excelRow",0)("excelColumn",(s.isBusinessDomain||s.checkVipAccountService?10:9)-(s.isTqbDomain?1:0))("excelStyle",s.styleThNormal)}}function Q(p,T){if(1&p&&(t.j41(0,"th",2),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&p){const s=t.XpG();t.BMQ("excelWidth",20)("excelRow",0)("excelColumn",(s.isBusinessDomain?11:s.checkVipAccountService?9:8)-(s.isTqbDomain?1:0))("excelStyle",s.styleThNormal),t.R7$(),t.SpI(" ",t.bMT(2,5,"lang_auto_lop")," ")}}function X(p,T){if(1&p&&(t.j41(0,"td",2),t.EFF(1),t.k0s()),2&p){const s=t.XpG(),g=s.$implicit,d=s.index,_=t.XpG();t.BMQ("excelRow",d+1)("excelColumn",2)("excelStyle",null!=g&&g.errorImportIdentification?_.styleTdErrorLeft:_.styleTdNormalLeft),t.R7$(),t.SpI(" ",null==g?null:g.parentUserName," ")}}function J(p,T){if(1&p&&(t.j41(0,"td",2),t.EFF(1),t.k0s()),2&p){const s=t.XpG(),g=s.$implicit,d=s.index,_=t.XpG();t.BMQ("excelRow",d+1)("excelColumn",8-(_.isTqbDomain?1:0))("excelStyle",null!=g&&g.errorImportIdentification?_.styleTdError:_.styleTdNormal),t.R7$(),t.SpI(" ",null==g?null:g.password," ")}}function Z(p,T){if(1&p&&(t.j41(0,"td",2),t.EFF(1),t.k0s()),2&p){const s=t.XpG(),g=s.$implicit,d=s.index,_=t.XpG();t.BMQ("excelRow",d+1)("excelColumn",(_.isBusinessDomain?9:8)-(_.isTqbDomain?1:0))("excelStyle",null!=g&&g.errorImportIdentification?_.styleTdNotNumberError:_.styleTdNotNumberNormal),t.R7$(),t.SpI(" ",null==g?null:g.schoolName," ")}}function q(p,T){if(1&p&&(t.j41(0,"td",2),t.EFF(1),t.k0s()),2&p){const s=t.XpG(),g=s.$implicit,d=s.index,_=t.XpG();t.BMQ("excelRow",d+1)("excelColumn",(_.isBusinessDomain?10:9)-(_.isTqbDomain?1:0))("excelStyle",null!=g&&g.errorImportIdentification?_.styleTdNotNumberError:_.styleTdNotNumberNormal),t.R7$(),t.SpI(" ",null==g?null:g.facebookLink," ")}}function tt(p,T){if(1&p&&(t.j41(0,"td",2),t.EFF(1),t.k0s()),2&p){let s;const g=t.XpG(),d=g.$implicit,_=g.index,B=t.XpG();t.BMQ("excelRow",_+1)("excelColumn",(B.isBusinessDomain?11:B.checkVipAccountService?9:8)-(B.isTqbDomain?1:0))("excelStyle",null!=d&&d.errorImportIdentification?B.styleTdError:B.styleTdNormal),t.R7$(),t.SpI(" ",null!==(s=null==d?null:d.classroomName)&&void 0!==s?s:""," ")}}function K(p,T){if(1&p&&(t.j41(0,"tr")(1,"td",2),t.EFF(2),t.k0s(),t.j41(3,"td",2),t.EFF(4),t.k0s(),t.DNE(5,X,2,4,"td",3),t.j41(6,"td",2),t.EFF(7),t.k0s(),t.j41(8,"td",2),t.EFF(9),t.k0s(),t.j41(10,"td",2),t.EFF(11),t.nI1(12,"formatOnlyDateByUserUnitPipe"),t.k0s(),t.j41(13,"td",2),t.EFF(14),t.nI1(15,"mytranslate"),t.nI1(16,"mytranslate"),t.k0s(),t.j41(17,"td",2),t.EFF(18),t.nI1(19,"formatStudentCodeToNumber"),t.k0s(),t.DNE(20,J,2,4,"td",3)(21,Z,2,4,"td",3)(22,q,2,4,"td",3)(23,tt,2,4,"td",3),t.j41(24,"td",2),t.EFF(25),t.nI1(26,"mytranslate"),t.k0s(),t.j41(27,"td",2),t.EFF(28),t.k0s()()),2&p){const s=T.$implicit,g=T.index,d=T.index,_=t.XpG();t.R7$(),t.BMQ("excelRow",d+1)("excelColumn",0)("excelStyle",null!=s&&s.errorImportIdentification?_.styleTdError:_.styleTdNormal),t.R7$(),t.SpI(" ",null!=s&&s.fullName?g+1:""," "),t.R7$(),t.BMQ("excelRow",d+1)("excelColumn",1)("excelStyle",null!=s&&s.errorImportIdentification?_.styleTdErrorLeft:_.styleTdNormalLeft),t.R7$(),t.SpI(" ",null==s?null:s.fullName," "),t.R7$(),t.Y8G("ngIf",!_.isTqbDomain),t.R7$(),t.BMQ("excelRow",d+1)("excelColumn",3-(_.isTqbDomain?1:0))("excelStyle",null!=s&&s.errorImportIdentification?_.styleTdNotNumberError:_.styleTdNotNumberNormal),t.R7$(),t.SpI(" ",null==s?null:s.phone," "),t.R7$(),t.BMQ("excelRow",d+1)("excelColumn",4-(_.isTqbDomain?1:0))("excelStyle",null!=s&&s.errorImportIdentification?_.styleTdError:_.styleTdNormal),t.R7$(),t.SpI(" ",null==s?null:s.email," "),t.R7$(),t.BMQ("excelRow",d+1)("excelColumn",5-(_.isTqbDomain?1:0))("excelStyle",null!=s&&s.errorImportIdentification?_.styleTdError:_.styleTdNormal),t.R7$(),t.SpI(" ",t.bMT(12,41,null==s?null:s.birthday)," "),t.R7$(2),t.BMQ("excelRow",d+1)("excelColumn",6-(_.isTqbDomain?1:0))("excelStyle",null!=s&&s.errorImportIdentification?_.styleTdError:_.styleTdNormal),t.R7$(),t.SpI(" ",1==(null==s?null:s.gender)?t.bMT(15,43,"lang_student_export_excel_gender_male"):0==(null==s?null:s.gender)?t.bMT(16,45,"lang_student_export_excel_gender_female"):""," "),t.R7$(3),t.BMQ("excelRow",d+1)("excelColumn",7-(_.isTqbDomain?1:0))("excelStyle",null!=s&&s.errorImportIdentification?_.styleTdNotNumberError:_.styleTdNotNumberNormal),t.R7$(),t.SpI(" ",null!=s&&s.identificationNumber?t.i5U(19,47,null==s?null:s.identificationNumber,_.myEnvironment.maxStudentCodeLength):""," "),t.R7$(2),t.Y8G("ngIf",_.isBusinessDomain||_.checkVipAccountService),t.R7$(),t.Y8G("ngIf",_.isBusinessDomain),t.R7$(),t.Y8G("ngIf",_.isBusinessDomain),t.R7$(),t.Y8G("ngIf",1===_.type),t.R7$(),t.BMQ("excelRow",d+1)("excelColumn",(_.isBusinessDomain?1===_.type?12:11:1===_.type?_.checkVipAccountService?10:9:8)-(_.isTqbDomain?1:0))("excelStyle",_.styleTdError),t.R7$(),t.SpI(" ",t.bMT(26,50,null==s?null:s.errorImportIdentification)," "),t.R7$(2),t.BMQ("excelRow",d+1)("excelColumn",(_.isBusinessDomain?1===_.type?13:12:1===_.type?_.checkVipAccountService?11:10:9)-(_.isTqbDomain?1:0))("excelStyle",t.l_i(56,n,t.lJ4(52,W),t.eq3(54,C,t.lJ4(53,V)))),t.R7$(),t.SpI(" ",_.commentObjs[d]," ")}}let et=(()=>{var p;class T extends M.H{addCommentToExcelFile(){let g="*"+this.commonService.myTranslateInstant("lang_auto_note_export_excel_class_detail_one"),d="*"+this.commonService.myTranslateInstant("lang_auto_note_export_excel_class_detail_two"),_="*"+this.commonService.myTranslateInstant("lang_auto_note_export_excel_class_detail_three"),B="*"+this.commonService.myTranslateInstant("lang_auto_note_export_excel_class_detail_four"),nt="*"+this.commonService.myTranslateInstant("lang_auto_note_export_excel_class_detail_five"),ot="*"+this.commonService.myTranslateInstant("lang_auto_note_export_excel_class_detail_six"),h="*"+this.commonService.myTranslateInstant("lang_auto_mat_khau_phai_dai_toi_thieu_la_6"),D="*"+this.commonService.myTranslateInstant("lang_core_ten_dang_nhap_chi_chua_cac_ky_tu_hop_le_va_it_nhat_1_chu_cai");this.commentObjs=[g,d,_,B,nt,ot,h,D+(this.isBusinessDomain?" ":" (VIP)")]}ngOnChanges(){this.appendObjs=[],this.isExported=!1;let d=8-(this.objs?.length??0);if(d>0)for(let _=0;_<d;_++)this.appendObjs.push(void 0)}ngAfterViewChecked(){0==this.isExported&&(this.isExported=!0,setTimeout(()=>{this.exportDataDone.emit(this.exportExcelService.exportHtmlTableToExcelBlob(this.table,!0))},0))}ngOnInit(){super.ngOnInit(),this.addCommentToExcelFile()}constructor(g){super(),this.exportExcelService=g,this.type=0,this.exportDataDone=new t.bkB,this.appendObjs=[],this.commentObjs=[],this.isExported=!1,this.styleTdNormal='{"alignment":{"vertical":"center","horizontal":"center", "wrapText":true},"font":{"bold":false,"color":{"rgb":"000000"}}}',this.styleTdNormalLeft='{"alignment":{"vertical":"center","horizontal":"left", "wrapText":true},"font":{"bold":false,"color":{"rgb":"000000"}}}',this.styleTdError='{"alignment":{"vertical":"center","horizontal":"center", "wrapText":true},"font":{"bold":false,"color":{"rgb":"f10000"}}}',this.styleTdErrorLeft='{"alignment":{"vertical":"center","horizontal":"left", "wrapText":true},"font":{"bold":false,"color":{"rgb":"f10000"}}}',this.styleThNormal='{"alignment":{"vertical":"center","horizontal":"center","wrapText":true},"font":{"bold":true,"color":{"rgb":"ffffffff"}},"fill":{"patternType":"solid","fgColor":{"rgb":"2361ae"}}}',this.styleTdNotNumberNormal='{"alignment":{"vertical":"center","horizontal":"center", "wrapText":true},"font":{"bold":false,"color":{"rgb":"000000"}},"isText":"1"}',this.styleTdNotNumberError='{"alignment":{"vertical":"center","horizontal":"center", "wrapText":true},"font":{"bold":false,"color":{"rgb":"f10000"}},"isText":"1"}'}}return(p=T).\u0275fac=function(g){return new(g||p)(t.rXU(U.x))},p.\u0275cmp=t.VBU({type:p,selectors:[["azt-export-excel-for-student-list"]],viewQuery:function(g,d){if(1&g&&t.GBs(F,5),2&g){let _;t.mGM(_=t.lsd())&&(d.table=_.first)}},inputs:{objs:"objs",type:"type"},outputs:{exportDataDone:"exportDataDone"},standalone:!0,features:[t.Vt3,t.OA$,t.aNF],decls:34,vars:60,consts:[["table",""],[1,"table","table-bordered",2,"display","none"],[1,"text-center","azt-excel-cell"],["class","text-center azt-excel-cell",4,"ngIf"],[4,"ngFor","ngForOf"]],template:function(g,d){1&g&&(t.j41(0,"table",1,0)(2,"thead")(3,"tr")(4,"th",2),t.EFF(5),t.nI1(6,"mytranslate"),t.k0s(),t.j41(7,"th",2),t.EFF(8),t.nI1(9,"mytranslate"),t.k0s(),t.DNE(10,y,3,8,"th",3),t.j41(11,"th",2),t.EFF(12),t.nI1(13,"mytranslate"),t.k0s(),t.j41(14,"th",2),t.EFF(15),t.nI1(16,"mytranslate"),t.k0s(),t.j41(17,"th",2),t.EFF(18),t.nI1(19,"mytranslate"),t.k0s(),t.j41(20,"th",2),t.EFF(21),t.nI1(22,"mytranslate"),t.k0s(),t.j41(23,"th",2),t.EFF(24),t.nI1(25,"mytranslate"),t.k0s(),t.DNE(26,R,3,7,"th",3)(27,e,3,7,"th",3)(28,L,2,4,"th",3)(29,Q,3,7,"th",3),t.nrm(30,"th",2)(31,"th",2),t.k0s()(),t.j41(32,"tbody"),t.DNE(33,K,29,59,"tr",4),t.k0s()()),2&g&&(t.R7$(4),t.BMQ("excelWidth",10)("excelRow",0)("excelColumn",0)("excelStyle",d.styleThNormal),t.R7$(),t.SpI(" ",t.bMT(6,46,"lang_student_export_excel_no")," "),t.R7$(2),t.BMQ("excelWidth",20)("excelRow",0)("excelColumn",1)("excelStyle",d.styleThNormal),t.R7$(),t.SpI(" ",t.bMT(9,48,"lang_student_export_excel_full_name")," "),t.R7$(2),t.Y8G("ngIf",!d.isTqbDomain),t.R7$(),t.BMQ("excelWidth",20)("excelRow",0)("excelColumn",3-(d.isTqbDomain?1:0))("excelStyle",d.styleThNormal),t.R7$(),t.SpI(" ",t.bMT(13,50,"lang_student_export_excel_phone")," "),t.R7$(2),t.BMQ("excelWidth",20)("excelRow",0)("excelColumn",4-(d.isTqbDomain?1:0))("excelStyle",d.styleThNormal),t.R7$(),t.SpI(" ",t.bMT(16,52,"lang_student_export_excel_email")," "),t.R7$(2),t.BMQ("excelWidth",20)("excelRow",0)("excelColumn",5-(d.isTqbDomain?1:0))("excelStyle",d.styleThNormal),t.R7$(),t.SpI(" ",t.bMT(19,54,"lang_student_export_excel_birthday")," "),t.R7$(2),t.BMQ("excelWidth",20)("excelRow",0)("excelColumn",6-(d.isTqbDomain?1:0))("excelStyle",d.styleThNormal),t.R7$(),t.SpI(" ",t.bMT(22,56,"lang_student_export_excel_gender")," "),t.R7$(2),t.BMQ("excelWidth",20)("excelRow",0)("excelColumn",7-(d.isTqbDomain?1:0))("excelStyle",d.styleThNormal),t.R7$(),t.SpI(" ",t.bMT(25,58,"lang_auto_so_bao_danh")," "),t.R7$(2),t.Y8G("ngIf",d.isBusinessDomain||d.checkVipAccountService),t.R7$(),t.Y8G("ngIf",d.isBusinessDomain),t.R7$(),t.Y8G("ngIf",d.isBusinessDomain),t.R7$(),t.Y8G("ngIf",1===d.type),t.R7$(),t.BMQ("excelWidth",30)("excelRow",0)("excelColumn",(d.isBusinessDomain?1===d.type?12:11:1===d.type?d.checkVipAccountService?10:9:8)-(d.isTqbDomain?1:0))("excelStyle",d.styleThNormal),t.R7$(),t.BMQ("excelWidth",100),t.R7$(2),t.Y8G("ngForOf",d.objs.concat(d.appendObjs)))},dependencies:[v.MD,v.Sq,v.bT,I.X1,z.iI,I.YN,b.wp,$.s,k.flO,j.L,b.Po,b.vv,G.Id,P.k],encapsulation:2}),T})()},42264:(H,w,o)=>{o.d(w,{O:()=>m});var v=o(54460),t=o(10936),I=o(89163),z=o(65162),P=o(40116),b=o(78841),j=o(17108),M=o(44327),k=o(89364),G=o(96256),$=o(96639),U=o(55887),F=o(4194),W=o(72235),V=o(75498),C=o(72689),n=o(15343),y=o(5502),R=o(44155),e=o(48891),L=o(49842),Q=o(6389),X=o(6440),J=o(7537),Z=o(47712),q=o(83426);const tt=()=>({"ml-1":!0}),K=()=>({"mr-2":!0}),et=()=>({"text-success":!0});function p(a,x){1&a&&(e.j41(0,"div",18)(1,"span",19),e.nrm(2,"azt-loading-ui"),e.k0s()())}function T(a,x){if(1&a){const u=e.RV6();e.j41(0,"div",22)(1,"label",24),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.j41(4,"div",35)(5,"azt-list-classroom-checkbox",36),e.bIt("createdNewClassroom",function(){e.eBV(u);const c=e.XpG(2);return e.Njj(c.isCreatedNewClassroom=!0)}),e.k0s()()()}if(2&a){const u=e.XpG(2);e.Y8G("hidden",2===u.stepView),e.R7$(2),e.SpI(" ",e.bMT(3,6,"lang_auto_chon_nhung_can_danh_so_bao_danh")," "),e.R7$(3),e.Y8G("form",u.form)("classroomGroupData",u.classroomWithGroups)("examClassroomObjs",u.examClassroomObjs)("permissionName",u.permissionTypes.exam)}}function s(a,x){1&a&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&a&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_auto_vui_long_nhap_so_bao_danh_bat_dau")," "))}function g(a,x){1&a&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&a&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_auto_vui_long_nhap_so_bao_danh_bat_dau_lon_hon_0")," "))}function d(a,x){1&a&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&a&&(e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_auto_vui_long_nhap_so_bao_danh_bat_dau_khong_qua_6_chu_so")," "))}function _(a,x){if(1&a&&(e.j41(0,"span"),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()),2&a){const u=e.XpG(4);e.R7$(),e.SpI(" ",e.bMT(2,1,"lang_auto_yeu_cau_nhap_so_va_be_nhat_la_1_max_999999")+(u.myEnvironment.maxStudentCode-(u.totalStudent?u.totalStudent-1:0))," ")}}function B(a,x){if(1&a&&(e.j41(0,"div",42),e.DNE(1,s,3,3,"span",43)(2,g,3,3,"span",43)(3,d,3,3,"span",43)(4,_,3,3,"span",43),e.k0s()),2&a){const u=e.XpG(3);e.R7$(),e.Y8G("ngIf",u.form.controls.startNumbering.errors.required),e.R7$(),e.Y8G("ngIf",u.form.controls.startNumbering.errors.min),e.R7$(),e.Y8G("ngIf",u.form.controls.startNumbering.errors.maxlength&&!u.form.controls.startNumbering.errors.max&&!u.form.controls.startNumbering.errors.min),e.R7$(),e.Y8G("ngIf",u.form.controls.startNumbering.errors.max)}}function nt(a,x){if(1&a&&(e.j41(0,"div",37)(1,"label",38),e.EFF(2),e.nI1(3,"mytranslate"),e.nrm(4,"lucide-icon",39),e.nI1(5,"mytranslate"),e.k0s(),e.nrm(6,"input",40),e.nI1(7,"mytranslate"),e.DNE(8,B,5,4,"div",41),e.k0s()),2&a){const u=e.XpG(2);e.R7$(2),e.SpI(" ",e.bMT(3,5,"lang_auto_nhap_so_bao_danh_bat_dau")," "),e.R7$(2),e.FS9("matTooltip",e.bMT(5,7,"lang_tooltip_input_identification_numbering")),e.Y8G("ngClass",e.lJ4(11,tt)),e.R7$(2),e.FS9("placeholder",e.bMT(7,9,"lang_auto_nhap_so")+"..."),e.R7$(2),e.Y8G("ngIf",u.form.controls.startNumbering.errors&&(u.form.controls.startNumbering.touched||u.form.controls.startNumbering.dirty))}}function ot(a,x){if(1&a){const u=e.RV6();e.j41(0,"div",50),e.bIt("click",function(){e.eBV(u);const c=e.sdS(3);return e.Njj(c.click())})("filesChangeEmitter",function(c){e.eBV(u);const E=e.XpG(3);return e.Njj(E.onFileSelected(c))}),e.j41(1,"div",51)(2,"input",52,2),e.bIt("change",function(c){e.eBV(u);const E=e.XpG(3);return e.Njj(E.onFileSelected(c.target.files))}),e.k0s(),e.j41(4,"div"),e.nrm(5,"lucide-icon",53),e.j41(6,"span",54),e.EFF(7),e.nI1(8,"mytranslate"),e.k0s(),e.EFF(9),e.nI1(10,"mytranslate"),e.k0s()()()}2&a&&(e.R7$(5),e.Y8G("ngClass",e.lJ4(7,et)),e.R7$(2),e.SpI(" ",e.bMT(8,3,"lang_auto_keo_tha_file_excel")," "),e.R7$(2),e.SpI(" ",e.bMT(10,5,"lang_auto_hoc_click_de_chon_file")," "))}function h(a,x){if(1&a){const u=e.RV6();e.j41(0,"div",55)(1,"div",56)(2,"div",57)(3,"div",58)(4,"div",59)(5,"div",60),e.nrm(6,"img",61),e.nI1(7,"coreModConvertCdnLinkOfGitHub"),e.k0s(),e.j41(8,"div",62)(9,"p",63,3),e.EFF(11),e.k0s(),e.j41(12,"div",64),e.EFF(13),e.k0s()(),e.j41(14,"div",65)(15,"button",66),e.nI1(16,"mytranslate"),e.bIt("click",function(c){e.eBV(u);const E=e.XpG(3);return e.Njj(E.removeFile(c))}),e.nrm(17,"lucide-icon",67),e.k0s()()()()()()()}if(2&a){const u=e.sdS(10),r=e.XpG(3);e.R7$(6),e.Y8G("src",e.bMT(7,7,"images/excel.png"),e.B4B),e.R7$(3),e.FS9("matTooltip",null==r.file?null:r.file.name),e.Y8G("isDisabledTooltip",!1)("matTooltipDisabled",u.isDisabled),e.R7$(2),e.SpI(" ",r.file?r.file.name:""," "),e.R7$(2),e.SpI(" ",r.fileMb+"mb"," "),e.R7$(2),e.FS9("matTooltip",e.bMT(16,9,"lang_auto_xoa"))}}function D(a,x){if(1&a){const u=e.RV6();e.j41(0,"div",37)(1,"label",44),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s(),e.DNE(4,ot,11,8,"div",45)(5,h,18,11,"ng-template",null,1,e.C5r),e.j41(7,"div",46)(8,"button",47),e.bIt("click",function(){e.eBV(u);const c=e.XpG(2);return e.Njj(c.exportStudentListByClassroomIds("click"))}),e.nrm(9,"lucide-icon",48),e.j41(10,"span",49),e.EFF(11),e.nI1(12,"mytranslate"),e.k0s()()()()}if(2&a){const u=e.sdS(6),r=e.XpG(2);e.R7$(2),e.SpI(" ",e.bMT(3,5,"lang_auto_tai_file_excel_len")," "),e.R7$(2),e.Y8G("ngIf",!r.file)("ngIfElse",u),e.R7$(5),e.Y8G("ngClass",e.lJ4(9,K)),e.R7$(2),e.SpI(" ",e.bMT(12,7,"lang_auto_tai_danh_sach_hoc_sinh_trong_lop")," ")}}function f(a,x){if(1&a&&(e.j41(0,"form",20),e.DNE(1,T,6,8,"div",21),e.j41(2,"div",22)(3,"div",23)(4,"label",24),e.EFF(5),e.nI1(6,"mytranslate"),e.k0s(),e.j41(7,"div",25)(8,"div",26),e.nrm(9,"input",27),e.j41(10,"label",28),e.EFF(11),e.nI1(12,"mytranslate"),e.k0s()(),e.j41(13,"div",29),e.nrm(14,"input",30),e.j41(15,"label",31),e.EFF(16),e.nI1(17,"mytranslate"),e.k0s()()(),e.j41(18,"div",32)(19,"div",23)(20,"span",24),e.EFF(21),e.nI1(22,"mytranslate"),e.k0s(),e.EFF(23),e.nI1(24,"mytranslate"),e.k0s(),e.j41(25,"div",33)(26,"span",24),e.EFF(27),e.nI1(28,"mytranslate"),e.k0s(),e.EFF(29),e.nI1(30,"mytranslate"),e.k0s()()(),e.DNE(31,nt,9,12,"div",34)(32,D,13,10,"div",34),e.k0s()()),2&a){const u=e.XpG();e.Y8G("formGroup",u.form),e.R7$(),e.Y8G("ngIf",1===u.data.type),e.R7$(),e.Y8G("hidden",1===u.stepView),e.R7$(3),e.SpI(" ",e.bMT(6,12,"lang_auto_chon_cach_danh_so_bao_danh")," "),e.R7$(6),e.SpI(" ",e.bMT(12,14,"lang_auto_danh_tu_dong")," "),e.R7$(5),e.SpI(" ",e.bMT(17,16,"lang_auto_danh_bang_file_excel")," "),e.R7$(5),e.SpI(" ","*"+e.bMT(22,18,"lang_auto_danh_tu_dong")+": "," "),e.R7$(2),e.SpI(" ",e.bMT(24,20,"lang_auto_he_thong_se_tu_dong_danh_so_bao_danh_theo_alpha_b")," "),e.R7$(4),e.SpI(" ","*"+e.bMT(28,22,"lang_auto_danh_bang_file_excel")+": "," "),e.R7$(2),e.SpI(" ",e.bMT(30,24,"lang_auto_tai_file_excel_de_danh_so_bao_danh")," "),e.R7$(2),e.Y8G("ngIf","0"==u.form.controls.howIdentification.value),e.R7$(),e.Y8G("ngIf","1"==u.form.controls.howIdentification.value)}}function O(a,x){if(1&a){const u=e.RV6();e.j41(0,"button",68),e.bIt("click",function(){e.eBV(u);const c=e.XpG();return e.Njj(c.prevStepView())}),e.nrm(1,"lucide-icon",69),e.EFF(2),e.nI1(3,"mytranslate"),e.k0s()}2&a&&(e.R7$(),e.Y8G("ngClass",e.lJ4(4,K)),e.R7$(),e.SpI(" ",e.bMT(3,2,"lang_auto_quay_lai")," "))}function i(a,x){if(1&a){const u=e.RV6();e.j41(0,"button",70),e.bIt("click",function(){e.eBV(u);const c=e.XpG();return e.Njj(c.nextStepView())}),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()}if(2&a){const u=e.XpG();e.Y8G("disabled",u.form.invalid),e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_auto_tiep_tuc")," ")}}function S(a,x){if(1&a){const u=e.RV6();e.j41(0,"button",71),e.bIt("click",function(){e.eBV(u);const c=e.XpG();return e.Njj(c.handleNumberingAuto(c.form.controls.howIdentification.value))}),e.EFF(1),e.nI1(2,"mytranslate"),e.k0s()}if(2&a){const u=e.XpG();e.Y8G("disabled","0"==u.form.controls.howIdentification.value&&u.form.controls.startNumbering.errors||"1"==u.form.controls.howIdentification.value&&null==u.file),e.R7$(),e.SpI(" ",e.bMT(2,2,"lang_auto_danh_so")," ")}}function l(a,x){if(1&a){const u=e.RV6();e.j41(0,"azt-export-excel-for-student-list",72),e.bIt("exportDataDone",function(c){e.eBV(u);const E=e.XpG();return e.Njj(E.exportStudentListDone(c))}),e.k0s()}if(2&a){const u=e.XpG();e.Y8G("objs",u.exportStudentObjs)("type",1)}}let m=(()=>{var a;class x extends P._{handleCloseDialog(){this.dialogRef.close(this.isCreatedNewClassroom)}getFileMB(r){return r&&r>0?(r/=1048576).toFixed(2):0}nextStepView(){this.stepView=2,this.getTotalStudentData()}prevStepView(){this.stepView=1}exportStudentListDone(r){let c=this.commonService.createFileNameExportFile(["list-student","danh-sach-hoc-sinh"])+".xlsx";this.shareFileFlutterService.shareFileWithBlob(r,c)}handleNumberingAuto(r){let c=[];if(1===this.data.type&&(c=this.sAztClassroomCheckboxService.getClassroomIdsCheckedInGroup(this.form.controls.classroomFormArray)),2===this.data.type&&(c=this.data.listCheckBox),"0"==r){let E={classroomIds:c,startCode:this.form.getRawValue().startNumbering};this.numberingAutomaticIdentification(E)}else this.file&&this.numberingExcelIdentification(c,this.file)}numberingAutomaticIdentification(r){this.initStatusObj(),this.waitDestroy(this.studentService.apiStudentSetIdentificationNumbersPost(r).subscribe(c=>{1==c.success?(this.dialogRef.close(!0),this.successStatusObj("lang_auto_danh_so_banh_thanh_cong",!0)):this.errorStatusObj(c.message??"",!0)}))}numberingExcelIdentification(r,c){this.initStatusObj(),this.waitDestroy(this.studentService.apiStudentImportStudentIdentificationNumbersPostForm(r,c).subscribe(E=>{if(1==E.success)this.dialogRef.close(!0),this.successStatusObj("lang_auto_danh_so_banh_thanh_cong",!0);else{this.errorStatusObj("lang_auto_vui_long_nhap_dung_noi_dung_trong_file",!0);let A=E.data??[];A.length>0&&(this.processDataErrors(A),this.exportStudentListByClassroomIds("auto")),this.file=null}}))}processData(){1===this.data.type&&(this.classroomWithGroups.forEach(r=>{null!=r.groupObj&&-1!=r.groupObj?.id&&(this.classroomObjs=this.classroomObjs.concat(r.classroomObjs??[])),null==r.groupObj&&(this.classroomObjs=this.classroomObjs.concat(r.classroomObjs??[]))}),this.classroomObjs=this.classroomObjs.filter(r=>!r.isShareClassroom)),2===this.data.type&&(this.stepView=2)}processDataErrors(r){if(this.exportStudentObjs=[],r.length>0)for(let c=0;c<r.length;c++){let E={id:0,classroomId:0,parentId:0,fullName:r[c].fullName,phone:r[c].phone,email:r[c].email,birthday:r[c].birthday,gender:Number(r[c].gender)??void 0,identificationNumber:r[c].identificationNumber,classroomName:r[c].classroomName};E.errorImportIdentification=r[c].message??"",("lang_core_duplicate_student_identification_number_in_db"==r[c].message||"lang_core_duplicate_student_identification_number_in_excel"==r[c].message||"lang_core_invalid_identification_number_data_type"==r[c].message)&&(E.errorImportIdentification=r[c].message),this.exportStudentObjs?.push(E)}}getStudentListByClassroomIds(r){this.waitDestroy(this.studentProfileV2Service.apiStudentProfileV2GetStudentsGet(r).subscribe(c=>{if(c.success){this.exportStudentObjs=c.data;let E=this.exportStudentObjs?.length??0;if(this.exportStudentObjs){let A=[],Y=[];this.exportStudentObjs.forEach((N,it,st)=>{A.find(at=>at.identificationNumber===N.identificationNumber)?Y.push(N):A.push(N)});for(let N=0;N<E;N++)if(this.exportStudentObjs[N].identificationNumber)for(let it=0;it<Y.length;it++)this.exportStudentObjs&&this.exportStudentObjs[N].identificationNumber===Y[it].identificationNumber&&(this.exportStudentObjs[N].errorImportIdentification="lang_auto_trung_so_bao_danh");else this.exportStudentObjs[N].errorImportIdentification="lang_auto_khong_co_so_bao_danh"}if(this.exportStudentObjs)for(let A=0;A<E;A++)if(this.exportStudentObjs[A].identificationNumber)for(let Y=A+1;Y<E;Y++)this.exportStudentObjs&&this.exportStudentObjs[A].identificationNumber===this.exportStudentObjs[Y].identificationNumber&&(this.exportStudentObjs[A].errorImportIdentification="lang_auto_trung_so_bao_danh");else this.exportStudentObjs[A].errorImportIdentification="lang_auto_khong_co_so_bao_danh"}else this.showErrorSnack(c.message??"")}))}exportStudentListByClassroomIds(r){let c="";1===this.data.type&&(c=this.sAztClassroomCheckboxService.getClassroomIdsCheckedInGroup(this.form.controls.classroomFormArray).toString()),2===this.data.type&&(c=this.data.listCheckBox.toString()),"click"==r&&this.getStudentListByClassroomIds(c)}getTotalStudentData(){let r="";1===this.data.type&&(r=this.sAztClassroomCheckboxService.getClassroomIdsCheckedInGroup(this.form.controls.classroomFormArray).toString()),2===this.data.type&&(r=this.data.listCheckBox.toString()),this.waitDestroy(this.studentProfileV2Service.apiStudentProfileV2GetStudentsGet(r).subscribe(c=>{c.success&&(this.totalStudent=c.data?.length??0,this.form.controls.startNumbering.addValidators(t.k0.max(999999-(this.totalStudent?this.totalStudent-1:0))))}))}onFileSelected(r){this.file=r?r[0]:this.file,this.fileMb=this.getFileMB(this.file?.size??0),this.file&&["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel"].includes(this.file.type)||(this.file=null,this.showErrorSnack("lang_auto_vui_long_chon_dung_tep_tin_excel"))}removeFile(r){r.stopPropagation(),this.file=null}getClassroomObjs(){this.data.needGetClassroomGroups?(this.initStatusObj(),this.waitDestroy(this.classroomGroupService.apiClassroomGroupGetObjsGet("all").subscribe(r=>{r.success?(this.classroomWithGroups=r.data?.activeClassroomData??[],this.classroomObjs=this.commonService.concatMultipleArray(this.classroomWithGroups.map(c=>c.classroomObjs)),this.processData(),this.successStatusObj()):this.errorStatusObj(r.message??"",!0)}))):this.processData()}ngOnInit(){if(super.ngOnInit(),this.getClassroomObjs(),this.data.totalStudent){this.totalStudent=this.data.totalStudent;let r=this.myEnvironment.maxStudentCode;this.form.valueChanges.subscribe(c=>{this.form.controls.startNumbering.addValidators(t.k0.max(r-(this.totalStudent?this.totalStudent-1:0)))})}}constructor(r,c,E,A,Y,N,it){super(it,N),this.classroomGroupService=r,this.shareFileFlutterService=c,this.studentService=E,this.studentProfileV2Service=A,this.sAztClassroomCheckboxService=Y,this.dialogRef=N,this.data=it,this.classroomObjs=[],this.examClassroomObjs=[],this.permissionTypes=G.t,this.stepView=1,this.fileMb=0,this.totalStudent=0,this.isCreatedNewClassroom=!1,this.classroomWithGroups=[],this.form=new t.gE({startNumbering:new t.MJ(1,{nonNullable:!0,validators:[t.k0.required,t.k0.pattern("^[0-9]*$"),t.k0.min(1),t.k0.maxLength(this.myEnvironment.maxStudentCodeLength)]}),howIdentification:new t.MJ("0",{nonNullable:!0}),classroomFormArray:new t.Yp([]),file:new t.MJ("",{nonNullable:!0}),whoAllow:new t.MJ(0,{nonNullable:!0})},{validators:[F.j.classroomInGroupCheckBoxValidatorWithoutWhoAllow]})}}return(a=x).\u0275fac=function(r){return new(r||a)(e.rXU(L.kG),e.rXU(Q.R),e.rXU(X.b0),e.rXU(X.m_),e.rXU(J.Q),e.rXU(I.CP,8),e.rXU(I.Vh,8))},a.\u0275cmp=e.VBU({type:a,selectors:[["azt-automatic-identification"]],standalone:!0,features:[e.Vt3,e.aNF],decls:22,vars:15,consts:[["doneLoading",""],["exitsFile",""],["fileSelect",""],["c","isDisabled"],[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-3","border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"text-lg","font-medium"],[1,"leading-relaxed","text-slate-500","text-xs","mt-0.5"],[1,"p-3"],["class","flex items-center h-full",4,"ngIf","ngIfElse"],[1,"p-3","flex","items-center"],[1,"mr-auto"],["azt-track-service","azt-automatic-identification-4p28zlT3gA","class","btn-text-primary",3,"click",4,"ngIf"],["azt-track-service","azt-automatic-identification-2EiEU9_Cnw",1,"btn","btn-secondary","w-20","mr-2",3,"click"],["azt-track-service","azt-automatic-identification-kI3BEINfrN","class","btn w-24 btn-primary",3,"disabled","click",4,"ngIf"],["azt-track-service","azt-automatic-identification-H8w2l6VC9A","class","btn w-24 btn-primary",3,"disabled","click",4,"ngIf"],[3,"objs","type","exportDataDone",4,"ngIf"],[1,"flex","items-center","h-full"],[1,"w-6","h-6","inline-block","mx-auto"],[3,"formGroup"],["class","intro",3,"hidden",4,"ngIf"],[1,"intro",3,"hidden"],[1,"mt-0"],[1,"font-medium"],[1,"flex","flex-col","sm:flex-row","mt-2"],[1,"form-check","mt-1","mr-10"],["id","by-automatic","type","radio","value","0","formControlName","howIdentification",1,"form-check-input"],["for","by-automatic",1,"form-check-label"],[1,"form-check","mt-1"],["id","by-excel","type","radio","value","1","formControlName","howIdentification",1,"form-check-input"],["for","by-excel",1,"form-check-label"],[1,"text-xs","leading-relaxed","mt-4"],[1,"mt-1"],["class","intro mt-4",4,"ngIf"],[1,"azt-list-classroom","mt-3"],[3,"createdNewClassroom","form","classroomGroupData","examClassroomObjs","permissionName"],[1,"intro","mt-4"],["for","number-start",1,"form-label","font-medium","flex","items-center"],["name","info","size","18",3,"ngClass","matTooltip"],["id","number-start","appOnlyNumber","","type","text","formControlName","startNumbering",1,"form-control",3,"placeholder"],["class","mt-2 fade text-xs text-danger font-medium",4,"ngIf"],[1,"mt-2","fade","text-xs","text-danger","font-medium"],[4,"ngIf"],[1,"form-label","font-medium"],["azt-track-service","azt-automatic-identification-PooqxQVpD","class","w-full mt-3 xl:mt-0 flex-1 border-2 border-dashed dark:border-darkmode-400 rounded-md","appDragDrop","",3,"click","filesChangeEmitter",4,"ngIf","ngIfElse"],[1,"mt-2","text-center"],["azt-track-service","azt-automatic-identification-J9l0MWhdQ8",1,"btn","text-primary","btn-transparent",3,"click"],["name","cloud-download","size","20",3,"ngClass"],[1,"text-primary"],["azt-track-service","azt-automatic-identification-PooqxQVpD","appDragDrop","",1,"w-full","mt-3","xl:mt-0","flex-1","border-2","border-dashed","dark:border-darkmode-400","rounded-md",3,"click","filesChangeEmitter"],[1,"px-4","pb-4","mt-5","flex","items-center","justify-center","text-center","cursor-pointer","relative"],["id","horizontal-form-1","type","file","formControlName","file","accept",".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",1,"hiddenIpt",3,"change"],["name","file-spreadsheet","size","20",3,"ngClass"],[1,"text-primary","mr-1"],[1,"attack-file","mt-5"],[1,"grid","grid-cols-12","gap-3","mt-3"],[1,"col-span-12"],[1,"border","flex","border-slate-200/60","dark:border-darkmode-400","rounded-md","p-3"],[1,"flex","w-full","items-center"],[1,"w-12","h-12","image-fit","lg:mr-1","flex-none"],["alt","excel icon",1,"img-fluid",3,"src"],[1,"ml-2","mt-0",2,"width","calc(100% - 100px)"],[1,"font-medium","truncate",3,"matTooltip","isDisabledTooltip","matTooltipDisabled"],[1,"text-slate-500","text-xs"],[1,"ml-auto","mt-0","flex-none"],["azt-track-service","azt-automatic-identification-nCXCf-x_kx",1,"btn","btn-outline-danger","btn-transparent",3,"click","matTooltip"],["name","trash-2","size","20"],["azt-track-service","azt-automatic-identification-4p28zlT3gA",1,"btn-text-primary",3,"click"],["name","chevron-left","size","16",3,"ngClass"],["azt-track-service","azt-automatic-identification-kI3BEINfrN",1,"btn","w-24","btn-primary",3,"click","disabled"],["azt-track-service","azt-automatic-identification-H8w2l6VC9A",1,"btn","w-24","btn-primary",3,"click","disabled"],[3,"exportDataDone","objs","type"]],template:function(r,c){if(1&r){const E=e.RV6();e.j41(0,"div",4)(1,"div",5)(2,"div",6)(3,"h3",7),e.EFF(4),e.nI1(5,"mytranslate"),e.k0s(),e.j41(6,"div",8),e.EFF(7),e.nI1(8,"mytranslate"),e.k0s()(),e.j41(9,"div",9),e.DNE(10,p,3,0,"div",10)(11,f,33,26,"ng-template",null,0,e.C5r),e.k0s()(),e.j41(13,"div",11)(14,"div",12),e.DNE(15,O,4,5,"button",13),e.k0s(),e.j41(16,"button",14),e.bIt("click",function(){return e.eBV(E),e.Njj(c.handleCloseDialog())}),e.EFF(17),e.nI1(18,"mytranslate"),e.k0s(),e.DNE(19,i,3,4,"button",15)(20,S,3,4,"button",16),e.k0s()(),e.DNE(21,l,1,2,"azt-export-excel-for-student-list",17)}if(2&r){const E=e.sdS(12);e.R7$(4),e.SpI(" ",e.bMT(5,9,"lang_auto_danh_so_bao_danh")," "),e.R7$(3),e.SpI(" ",e.bMT(8,11,"lang_auto_danh_so_bao_danh_de_su_dung_cho_nhung_ki_thi_offline")," "),e.R7$(3),e.Y8G("ngIf",c.statusObj.loading)("ngIfElse",E),e.R7$(5),e.Y8G("ngIf",1===c.data.type&&2===c.stepView),e.R7$(2),e.SpI(" ",e.bMT(18,13,"lang_auto_huy")," "),e.R7$(2),e.Y8G("ngIf",1===c.stepView),e.R7$(),e.Y8G("ngIf",2===c.stepView),e.R7$(),e.Y8G("ngIf",c.exportStudentObjs)}},dependencies:[b.L,j.f,V.R,C.D,W.m,v.MD,v.YU,v.bT,t.X1,t.qT,t.me,t.Fm,t.BC,t.cb,t.j4,t.JD,z.iI,t.YN,$.wp,$.Vs,R.s,Z.oV,n.flO,n.WGl,U.L,y.Id,k.Z,M.k,q.t],encapsulation:2}),x})()},20189:(H,w,o)=>{o.d(w,{W:()=>U});var v=o(54460),t=o(48891),I=o(10936),z=o(65162),P=o(44327),b=o(55887),j=o(88023),M=o(15343),k=o(5502),G=o(44155),$=o(89151);let U=(()=>{var F;class W extends j.H{allowCustomFilter(){return!1}customFilter(C){return!1}searchByName(C){this.searchByNameObj=C,this.calculateClassroomInfo()}collapseAll(C){this.viewClassroomGroupObjs.map(n=>n.groupObj.isExpand=C),this.calculateClassroomInfo()}collapseByGroupId(C){let n=this.viewClassroomGroupObjs.find(y=>y.groupObj.id==C.id);n&&(n.groupObj.isExpand=!n.groupObj.isExpand),this.calculateClassroomInfo()}clickToClassroomEvent(C){this.clickToClassroomEmitter.emit(C)}calculateClassroomInfo(){this.doFilterData()}doFilterData(){const C=this.commonService.convertVietnameseToEnglish(this.searchByNameObj.searchContent).toLowerCase().trim(),n=""==C;if(n&&!this.allowCustomFilter())return this.viewClassroomGroupObjs.forEach(y=>{y.groupObj.totalViewClassrooms=y.classroomObjs.length,y.groupObj.isShowGroup=!0,y.classroomObjs.map(R=>R.isShowClassroom=!0)}),void this.checkIsExpandAll();this.viewClassroomGroupObjs.forEach(y=>{y.classroomObjs.forEach(R=>{let e=n||this.checkMatchByGroupOrClassroomName(C,y.groupObj.name??"",R.name),L=!this.allowCustomFilter()||this.customFilter(R);R.isShowClassroom=e&&L}),y.groupObj.totalViewClassrooms=y.classroomObjs.filter(R=>R.isShowClassroom).length,y.groupObj.isShowGroup=y.groupObj.totalViewClassrooms>0}),this.checkIsExpandAll()}checkIsExpandAll(){let C=this.viewClassroomGroupObjs.filter(n=>n.groupObj.isShowGroup);this.isExpandAll=C.length==C.filter(n=>n.groupObj.isExpand).length}checkMatchByGroupOrClassroomName(C,n,y){C=this.commonService.removeMultipleSpace(this.commonService.convertVietnameseToEnglish(C).toLowerCase().trim());let R=(n=this.commonService.removeMultipleSpace(this.commonService.convertVietnameseToEnglish(n).toLowerCase().trim()))+" "+(y=this.commonService.removeMultipleSpace(this.commonService.convertVietnameseToEnglish(y).toLowerCase().trim())),e=C.split(" ");for(var L of e)if(!R.includes(L))return!1;return!0}initData(){if(this.classroomGroupData.forEach(C=>{C.groupObj.name=this.commonService.myTranslateInstant(C.groupObj.name)??"",C.classroomObjs.map(n=>n.name=this.commonService.myTranslateInstant(n.name)??"")}),this.viewClassroomGroupObjs=this.classroomGroupData.map(C=>({groupObj:{...C.groupObj,isShowGroup:!0,isExpand:this.isExpandAll,lastMatchName:"",totalViewClassrooms:0},isOwned:C.isOwned,classroomObjs:C.classroomObjs.map(n=>({...n,isShowClassroom:!0}))})),this.removeFreeDomClassroom){let C=this.viewClassroomGroupObjs.find(n=>n.groupObj.id<=0);C&&(C.classroomObjs=C?.classroomObjs.filter(n=>n.id>=0)),this.viewClassroomGroupObjs=this.viewClassroomGroupObjs.filter(n=>n.groupObj.id>0||n.groupObj.id<=0&&n.classroomObjs.length>0)}this.calculateClassroomInfo()}ngOnInit(){super.ngOnInit(),this.initData()}constructor(){super(),this.isExpandAll=!0,this.clickToClassroomEmitter=new t.bkB,this.classroomGridCss="col-span-4 md:col-span-2 2lg:col-span-2",this.removeFreeDomClassroom=!0,this.viewClassroomGroupObjs=[],this.searchByNameObj=new $.Z}}return(F=W).\u0275fac=function(C){return new(C||F)},F.\u0275cmp=t.VBU({type:F,selectors:[["azt-base-list-classroom-view"]],inputs:{classroomGroupData:"classroomGroupData",isExpandAll:"isExpandAll"},outputs:{clickToClassroomEmitter:"clickToClassroomEmitter"},standalone:!0,features:[t.Vt3,t.aNF],decls:0,vars:0,template:function(C,n){},dependencies:[v.MD,I.X1,z.iI,I.YN,G.s,M.flO,b.L,k.Id,P.k],encapsulation:2}),W})()},13417:(H,w,o)=>{o.d(w,{w:()=>ot});var v=o(54460),t=o(48891),I=o(10936),z=o(65162),P=o(17108),b=o(44327),j=o(96639),M=o(55887),k=o(88023),G=o(64516),$=o(17695),U=o(89850),F=o(89151),W=o(15343),V=o(5502),C=o(44155),n=o(4335),y=o(6440),R=o(47712);const e=(h,D)=>({"dark:bg-darkmode-400 bg-slate-100":h,"border-b border-slate-200/60 dark:border-darkmode-400":D});function L(h,D){if(1&h&&t.nrm(0,"azt-loading-effect",10),2&h){const f=t.XpG();t.Y8G("currentStatusObj",f.statusObj)}}function Q(h,D){if(1&h&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&h){const f=t.XpG(3);t.R7$(),t.JRh(t.bMT(2,1,"lang_auto_da_chon")+": "+f.totalStudentsSelected)}}function X(h,D){if(1&h&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&h){const f=t.XpG(3);t.R7$(),t.JRh(f.data.classroomName+(f.totalStudentsSelected?" ("+t.bMT(2,1,"lang_auto_da_chon")+": "+f.totalStudentsSelected+")":""))}}function J(h,D){}function Z(h,D){if(1&h&&(t.j41(0,"div")(1,"azt-mat-dialog-content",24),t.DNE(2,J,0,0,"ng-template",25),t.k0s()()),2&h){t.XpG(3);const f=t.sdS(8);t.R7$(),t.Y8G("defaultHeight",40),t.R7$(),t.Y8G("ngTemplateOutlet",f)}}function q(h,D){}function tt(h,D){if(1&h&&(t.j41(0,"div"),t.DNE(1,q,0,0,"ng-template",25),t.k0s()),2&h){t.XpG(3);const f=t.sdS(8);t.R7$(),t.Y8G("ngTemplateOutlet",f)}}function K(h,D){if(1&h){const f=t.RV6();t.qex(0),t.j41(1,"div",12)(2,"div",13),t.DNE(3,Q,3,3,"span",14)(4,X,3,3,"span",14),t.j41(5,"div",15)(6,"azt-search-box",16),t.nI1(7,"mytranslate"),t.bIt("onSearch",function(i){t.eBV(f);const S=t.XpG(2);return t.Njj(S.onSearchBox(i.searchObj))}),t.k0s()()(),t.j41(8,"div",17)(9,"div",18)(10,"input",19),t.bIt("change",function(){t.eBV(f);const i=t.XpG(2);return t.Njj(i.selectAllStudentOfClass())}),t.k0s(),t.j41(11,"label",20),t.EFF(12),t.nI1(13,"mytranslate"),t.k0s()(),t.j41(14,"div",21)(15,"input",22),t.bIt("change",function(){t.eBV(f);const i=t.XpG(2);return t.Njj(i.calculateFormData())}),t.k0s(),t.j41(16,"label",23),t.EFF(17),t.nI1(18,"mytranslate"),t.k0s()()()(),t.DNE(19,Z,3,2,"div",14)(20,tt,2,1,"div",14),t.bVm()}if(2&h){const f=t.XpG(2);t.R7$(),t.Y8G("ngClass",t.l_i(18,e,f.isDialog,!f.isDialog)),t.R7$(2),t.Y8G("ngIf",!f.isDialog),t.R7$(),t.Y8G("ngIf",f.isDialog),t.R7$(2),t.Y8G("isServerSearch",!1)("styleInput","form-control-sm ")("placeholder",t.bMT(7,12,"lang_student_classroom_list_detail_search_name_student")),t.R7$(4),t.Y8G("formControl",f.selectAllFormControl),t.R7$(2),t.SpI(" ",t.bMT(13,14,f.selectAllFormControl.value?"lang_remove_all":"lang_select_all")," "),t.R7$(3),t.Y8G("formControl",f.showCheckedFormControl),t.R7$(2),t.SpI(" ",t.bMT(18,16,"lang_testbank_selected_students")," "),t.R7$(2),t.Y8G("ngIf",f.isDialog),t.R7$(),t.Y8G("ngIf",!f.isDialog)}}function et(h,D){1&h&&(t.j41(0,"div",26)(1,"span"),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s()()),2&h&&(t.R7$(2),t.JRh(t.bMT(3,1,"lang_core_class_has_no_student")))}function p(h,D){if(1&h&&t.DNE(0,K,21,21,"ng-container",11)(1,et,4,3,"ng-template",null,2,t.C5r),2&h){const f=t.sdS(2),O=t.XpG();t.Y8G("ngIf",O.studentObjs.length>0)("ngIfElse",f)}}function T(h,D){if(1&h){const f=t.RV6();t.j41(0,"div",27)(1,"button",28),t.bIt("click",function(){t.eBV(f);const i=t.XpG();return t.Njj(i.btnCloseDialog())}),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s()()}2&h&&(t.R7$(2),t.SpI(" ",t.bMT(3,1,"lang_cms_common_ok")," "))}function s(h,D){1&h&&(t.qex(0),t.j41(1,"div",26)(2,"span",29),t.EFF(3),t.nI1(4,"mytranslate"),t.k0s()(),t.bVm()),2&h&&(t.R7$(3),t.JRh(t.bMT(4,1,"lang_testbank_no_students_selected")))}function g(h,D){if(1&h){const f=t.RV6();t.j41(0,"div",34)(1,"div",35)(2,"input",36),t.bIt("change",function(){t.eBV(f);const i=t.XpG(4);return t.Njj(i.calculateFormData())}),t.k0s(),t.j41(3,"label",37,4),t.nI1(5,"mytranslate"),t.EFF(6),t.nI1(7,"mytranslate"),t.k0s()()()}if(2&h){const f=t.sdS(4),O=t.XpG().$implicit;t.R7$(2),t.FS9("id","azt-checkbox-student-"+O.id),t.Y8G("formControl",O.isChecked),t.R7$(),t.FS9("for","azt-checkbox-student-"+O.id),t.Y8G("matTooltip",t.bMT(5,8,O.fullName))("isDisabledTooltip",!1)("matTooltipDisabled",f.isDisabled)("matTooltipShowDelay",500),t.R7$(3),t.SpI(" ",t.bMT(7,10,O.fullName)," ")}}function d(h,D){if(1&h&&(t.qex(0),t.DNE(1,g,8,12,"div",33),t.bVm()),2&h){const f=D.$implicit;t.R7$(),t.Y8G("ngIf",f.isShowStudent)}}function _(h,D){1&h&&(t.j41(0,"div",26),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&h&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"lang_student_classroom_list_detail_not_student")," "))}function B(h,D){if(1&h&&(t.j41(0,"div",30),t.DNE(1,d,2,1,"ng-container",31),t.k0s(),t.DNE(2,_,3,3,"div",32)),2&h){const f=t.XpG(2);t.R7$(),t.Y8G("ngForOf",f.studentObjs),t.R7$(),t.Y8G("ngIf",0==f.totalStudentsShow)}}function nt(h,D){if(1&h&&t.DNE(0,s,5,3,"ng-container",11)(1,B,3,2,"ng-template",null,3,t.C5r),2&h){const f=t.sdS(2),O=t.XpG();t.Y8G("ngIf",O.totalStudentsSelected<=0&&O.showCheckedFormControl.value)("ngIfElse",f)}}let ot=(()=>{var h;class D extends k.H{resetAll(){this.selectAllFormControl.reset(),this.showCheckedFormControl.reset(),this.selectAllStudentOfClass()}btnCloseDialog(){if(this.studentObjs.length<=0)return this.closeBox.emit();let O={classroomId:this.data.classroomId,classroomName:this.data.classroomName,studentIdsSelected:this.studentObjs.filter(i=>i.isChecked.value).map(i=>i.id)};this.closeBox.emit(O)}onSearchBox(O){this.searchContentObj=O,this.calculateFormData()}selectAllStudentOfClass(){this.studentObjs.map(O=>O.isChecked.setValue(this.selectAllFormControl.value)),this.calculateFormData()}calculateFormData(){let O=this.commonService.convertVietnameseToEnglish(this.searchContentObj.searchContent).toLowerCase().trim();this.studentObjs.forEach(i=>{const S=this.commonService.convertVietnameseToEnglish(i.fullName??"").toLowerCase().trim();let l=""==O||S.includes(O);i.isShowStudent=(!this.showCheckedFormControl.value||i.isChecked.value)&&l}),this.totalStudentsSelected=this.studentObjs.filter(i=>i.isChecked.value).length,this.selectAllFormControl.setValue(this.totalStudentsSelected==this.studentObjs.length),this.totalStudentsShow=this.studentObjs.filter(i=>i.isShowStudent).length,this.isDialog||this.btnCloseDialog()}getData(){this.initStatusObj(),this.waitDestroy(this.studentProfileV2Service.apiStudentProfileV2GetObjsByClassroomIdGet(this.data.classroomId).subscribe(O=>{if(!O.success)return this.errorStatusObj(O.message,!0);let i=O.data?.studentObjs??[];i=0==O.data?.classroomObj.sortType?this.sortService.sortFirstNameStudents(this.commonService.myClone(i)??[]):this.sortService.sortArrayByMultipleObjectKeyAsc(this.commonService.myClone(i)??[],"pos","id"),this.initFormData(i),this.stopStatusObj()}))}initFormData(O){this.studentObjs=O.map(i=>({...i,isShowStudent:!0,isChecked:new I.MJ(this.data.studentIdsSelected.includes(i.id),{nonNullable:!0})})),this.calculateFormData()}ngOnInit(){this.getData()}constructor(O,i){super(),this.sortService=O,this.studentProfileV2Service=i,this.selectAllFormControl=new I.MJ(!1,{nonNullable:!0}),this.showCheckedFormControl=new I.MJ(!1,{nonNullable:!0}),this.studentObjs=[],this.totalStudentsSelected=0,this.totalStudentsShow=0,this.searchContentObj=new F.Z,this.isDialog=!0,this.closeBox=new t.bkB}}return(h=D).\u0275fac=function(O){return new(O||h)(t.rXU(n.g),t.rXU(y.m_))},h.\u0275cmp=t.VBU({type:h,selectors:[["azt-select-student"]],inputs:{isDialog:"isDialog",data:"data"},outputs:{closeBox:"closeBox"},standalone:!0,features:[t.Vt3,t.aNF],decls:9,vars:3,consts:[["doneLoading",""],["templateSelectStudent",""],["emptyStudents",""],["checkedBox",""],["c","isDisabled"],["id","selectStudent",1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-0"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],["class","p-3 text-right",4,"ngIf"],[3,"currentStatusObj"],[4,"ngIf","ngIfElse"],[1,"p-3","flex","flex-col","sm:flex-row","sm:h-auto","sm:items-center",3,"ngClass"],[1,"font-medium","mr-auto"],[4,"ngIf"],[1,"w-full","relative","flex","items-center","mt-2"],[3,"onSearch","isServerSearch","styleInput","placeholder"],[1,"flex","items-center","mt-2","sm:mt-0"],[1,"form-check","mr-3"],["id","selected-all","type","checkbox",1,"form-check-input",3,"change","formControl"],["for","selected-all",1,"form-check-label"],[1,"form-check"],["id","show-student-checked","type","checkbox",1,"form-check-input",3,"change","formControl"],["for","show-student-checked",1,"form-check-label"],[3,"defaultHeight"],[3,"ngTemplateOutlet"],[1,"h-full","flex","items-center","justify-center","p-5"],[1,"p-3","text-right"],["azt-track-service","azt-dialog-warning-3FIn9IaXN",1,"btn","w-24","btn-primary",3,"click"],[1,"mx-auto"],[1,"p-3","grid","grid-cols-12","gap-3"],[4,"ngFor","ngForOf"],["class","h-full flex items-center justify-center p-5",4,"ngIf"],["class","col-span-12 md:col-span-4 mt-2",4,"ngIf"],[1,"col-span-12","md:col-span-4","mt-2"],[1,"azt-checkbox-item"],["type","checkbox",1,"form-check-input",3,"change","id","formControl"],[1,"form-check-label","truncate",2,"vertical-align","middle",3,"matTooltip","isDisabledTooltip","matTooltipDisabled","matTooltipShowDelay","for"]],template:function(O,i){if(1&O&&(t.j41(0,"div",5)(1,"div",6)(2,"div",7),t.DNE(3,L,1,1,"azt-loading-effect",8)(4,p,3,2,"ng-template",null,0,t.C5r),t.k0s()(),t.DNE(6,T,4,3,"div",9),t.k0s(),t.DNE(7,nt,3,2,"ng-template",null,1,t.C5r)),2&O){const S=t.sdS(5);t.R7$(3),t.Y8G("ngIf",i.statusObj.loading)("ngIfElse",S),t.R7$(3),t.Y8G("ngIf",i.isDialog)}},dependencies:[P.f,$.K,U.W,G.U,v.MD,v.YU,v.Sq,v.bT,v.T3,I.X1,I.Zm,I.BC,I.l_,z.iI,I.YN,j.wp,C.s,R.oV,W.flO,M.L,V.Id,b.k],encapsulation:2}),D})()},10117:(H,w,o)=>{o.d(w,{M:()=>O});var v=o(54460),t=o(10936),I=o(65162),z=o(44327),P=o(96639),b=o(55887),j=o(88023),M=o(26018),k=o(15343),G=o(5502),$=o(44155),U=o(58615),F=o(27239),W=o(89163),V=o(40116),C=o(17695),n=o(48891),y=o(49842);const R=()=>[];function e(i,S){if(1&i&&n.nrm(0,"azt-loading-effect",3),2&i){const l=n.XpG();n.Y8G("currentStatusObj",l.statusObj)}}function L(i,S){if(1&i&&(n.nrm(0,"img",25),n.nI1(1,"mycdn")),2&i){const l=n.XpG(2);n.FS9("src",n.bMT(1,1,null==l.whoSharePermissionObj?null:l.whoSharePermissionObj.avatar),n.B4B)}}function Q(i,S){if(1&i&&n.nrm(0,"azt-create-avatar",26),2&i){const l=n.XpG(2);n.Y8G("nameCreateAvatar",null==l.whoSharePermissionObj?null:l.whoSharePermissionObj.fullName)("size",40)}}function X(i,S){if(1&i&&(n.j41(0,"div",27),n.EFF(1),n.k0s()),2&i){const l=n.XpG(2);n.R7$(),n.JRh(null==l.whoSharePermissionObj?null:l.whoSharePermissionObj.phone)}}function J(i,S){if(1&i&&(n.j41(0,"div",28)(1,"div"),n.EFF(2),n.nI1(3,"mytranslate"),n.k0s()()),2&i){const l=S.$implicit;n.R7$(2),n.SpI("- ",n.bMT(3,1,l.key),"")}}function Z(i,S){if(1&i){const l=n.RV6();n.j41(0,"button",29),n.bIt("click",function(){n.eBV(l);const a=n.XpG(2);return n.Njj(a.confirmReceivePermission(3))}),n.EFF(1),n.nI1(2,"mytranslate"),n.k0s()}2&i&&(n.R7$(),n.JRh(n.bMT(2,1,"lang_auto_tu_choi")))}function q(i,S){if(1&i){const l=n.RV6();n.j41(0,"button",30),n.bIt("click",function(){n.eBV(l);const a=n.XpG(2);return n.Njj(a.confirmReceivePermission(2))}),n.EFF(1),n.nI1(2,"mytranslate"),n.k0s()}2&i&&(n.R7$(),n.JRh(n.bMT(2,1,"lang_auto_chap_nhan")))}function tt(i,S){if(1&i){const l=n.RV6();n.j41(0,"button",31),n.bIt("click",function(){n.eBV(l);const a=n.XpG(2);return n.Njj(a.confirmReceivePermission(3))}),n.EFF(1),n.nI1(2,"mytranslate"),n.k0s()}2&i&&(n.R7$(),n.JRh(n.bMT(2,1,"lang_auto_xoa_quyen")))}function K(i,S){if(1&i){const l=n.RV6();n.j41(0,"div",4)(1,"div",5)(2,"h3",6)(3,"span",7),n.EFF(4),n.k0s(),n.j41(5,"span",8),n.EFF(6),n.nI1(7,"mytranslate"),n.k0s()(),n.j41(8,"div",9)(9,"div",10)(10,"div",11)(11,"div",12),n.DNE(12,L,2,3,"img",13)(13,Q,1,2,"azt-create-avatar",14),n.k0s()(),n.j41(14,"div",15)(15,"p",16)(16,"span"),n.EFF(17),n.k0s()(),n.DNE(18,X,2,1,"div",17),n.k0s()()(),n.j41(19,"div",18)(20,"div"),n.DNE(21,J,4,3,"div",19),n.k0s()()()(),n.j41(22,"div",20)(23,"button",21),n.bIt("click",function(){n.eBV(l);const a=n.XpG();return n.Njj(a.cancelReceivePermission())}),n.EFF(24),n.nI1(25,"mytranslate"),n.k0s(),n.DNE(26,Z,3,3,"button",22)(27,q,3,3,"button",23)(28,tt,3,3,"button",24),n.k0s()}if(2&i){let l;const m=n.XpG();n.R7$(4),n.JRh(null==m.whoSharePermissionObj?null:m.whoSharePermissionObj.fullName),n.R7$(2),n.JRh(n.bMT(7,11,"lang_auto_da_gan_quyen_cho")),n.R7$(6),n.Y8G("ngIf",null==m.whoSharePermissionObj?null:m.whoSharePermissionObj.avatar),n.R7$(),n.Y8G("ngIf",!(null!=m.whoSharePermissionObj&&m.whoSharePermissionObj.avatar)),n.R7$(4),n.JRh(null==m.whoSharePermissionObj?null:m.whoSharePermissionObj.fullName),n.R7$(),n.Y8G("ngIf",null==m.whoSharePermissionObj?null:m.whoSharePermissionObj.phone),n.R7$(3),n.Y8G("ngForOf",null!==(l=null==m.whoSharePermissionObj?null:m.whoSharePermissionObj.permissionObjs)&&void 0!==l?l:n.lJ4(15,R)),n.R7$(3),n.JRh(n.bMT(25,13,"lang_auto_huy")),n.R7$(2),n.Y8G("ngIf",1==(null==m.whoSharePermissionObj?null:m.whoSharePermissionObj.permissionStatus)),n.R7$(),n.Y8G("ngIf",1==(null==m.whoSharePermissionObj?null:m.whoSharePermissionObj.permissionStatus)),n.R7$(),n.Y8G("ngIf",2==(null==m.whoSharePermissionObj?null:m.whoSharePermissionObj.permissionStatus))}}let et=(()=>{var i;class S extends V._{cancelReceivePermission(){this.dialogRef.close(!1)}confirmReceivePermission(m){this.initStatusObj(),this.permissionTeamService.apiPermissionTeamConfirmPermissionPost({tenantId:this.whoSharePermissionObj?.id,objectId:this.shareDataObj?.objectId??0,objectCode:this.shareDataObj?.objectCode??"",status:m}).subscribe(x=>{1==x.success?3==m?(this.successStatusObj("lang_auto_xoa_quyen_thanh_cong",!0),this.dialogRef.close(!0)):(this.successStatusObj("lang_auto_xac_nhan_quyen_thanh_cong",!0),this.dialogRef.close(!0)):(this.errorStatusObj(x.message??"",!0),this.dialogRef.close(!1))})}ngOnInit(){super.ngOnInit()}constructor(m,a,x){super(a,m),this.dialogRef=m,this.data=a,this.permissionTeamService=x,this.whoSharePermissionObj=void 0,this.whoSharePermissionObj=a.whoSharePermissionObj,this.shareDataObj=a.shareDataObj}}return(i=S).\u0275fac=function(m){return new(m||i)(n.rXU(W.CP),n.rXU(W.Vh),n.rXU(y.km))},i.\u0275cmp=n.VBU({type:i,selectors:[["azt-share-show-who-share-permission-dialog"]],standalone:!0,features:[n.Vt3,n.aNF],decls:4,vars:2,consts:[["doneLoading",""],[1,"box","search-form"],["class","p-5",3,"currentStatusObj",4,"ngIf","ngIfElse"],[1,"p-5",3,"currentStatusObj"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-5"],[1,"text-lg","font-medium","flex","items-center"],[2,"font-weight","bold"],[1,"ml-1"],[1,"mt-2","x"],[1,"flex","flex-row","items-center","mb-2","p-3","rounded-md"],[1,"w-10","h-10","image-fit","mr-2"],[1,"w-10","h-10","image-fit","lg:mr-1","flex","items-center"],["class","rounded-full",3,"src",4,"ngIf"],["class","mr-2",3,"nameCreateAvatar","size",4,"ngIf"],[1,"ml-2","mr-auto","text-left","mt-0"],[1,"font-medium"],["class","text-slate-500 text-xs mt-0.5",4,"ngIf"],[1,"x","px-3"],["style","font-weight: 500; margin-top: 5px",4,"ngFor","ngForOf"],[1,"p-3","text-right","w-full"],["azt-track-service","who-share-permission-dialog-2WKlv8lCOaG",1,"btn","btn-secondary",3,"click"],["azt-track-service","who-share-permission-dialog-K31mtdUwJ8a","class","btn btn-danger ml-2",3,"click",4,"ngIf"],["azt-track-service","who-share-permission-dialog-zOf1Sgw2fVz","class","btn btn-primary ml-2",3,"click",4,"ngIf"],["azt-track-service","who-share-permission-dialog-2IrhVG-Va27","class","btn btn-primary ml-2",3,"click",4,"ngIf"],[1,"rounded-full",3,"src"],[1,"mr-2",3,"nameCreateAvatar","size"],[1,"text-slate-500","text-xs","mt-0.5"],[2,"font-weight","500","margin-top","5px"],["azt-track-service","who-share-permission-dialog-K31mtdUwJ8a",1,"btn","btn-danger","ml-2",3,"click"],["azt-track-service","who-share-permission-dialog-zOf1Sgw2fVz",1,"btn","btn-primary","ml-2",3,"click"],["azt-track-service","who-share-permission-dialog-2IrhVG-Va27",1,"btn","btn-primary","ml-2",3,"click"]],template:function(m,a){if(1&m&&(n.j41(0,"div",1),n.DNE(1,e,1,1,"azt-loading-effect",2)(2,K,29,16,"ng-template",null,0,n.C5r),n.k0s()),2&m){const x=n.sdS(3);n.R7$(),n.Y8G("ngIf",a.statusObj.loading)("ngIfElse",x)}},dependencies:[C.K,M.p,v.MD,v.Sq,v.bT,t.X1,I.iI,t.YN,P.nf,P.wp,$.s,k.flO,b.L,G.Id,z.k],styles:[".content1[_ngcontent-%COMP%]{padding:15px;max-width:400px;min-width:200px;position:inherit!important}.search-form[_ngcontent-%COMP%]{max-width:500px;width:80vw}.content-search[_ngcontent-%COMP%]{max-height:400px;overflow:auto;min-width:220px}[_ngcontent-%COMP%]::-webkit-scrollbar{background-color:#fff;width:16px}[_ngcontent-%COMP%]::-webkit-scrollbar-button{display:none}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background-color:#fff}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#babac0;border-radius:16px;border:4px solid #fff}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}.show-tickets[_ngcontent-%COMP%]{display:inline-block;position:relative;transition:all .3s;border:1px solid #0110b1!important;border-radius:50%}.show-tickets[_ngcontent-%COMP%]:hover{transform:translateY(-5px);z-index:999!important}.singer-img[_ngcontent-%COMP%]{border-radius:50%;width:30px!important;height:30px!important;font-size:30px!important}.content-search[_ngcontent-%COMP%]{min-width:330px;background-color:#fff;border-radius:5px;box-shadow:0 0 9px #5b5b5b59}.search-ver[_ngcontent-%COMP%]:hover{background:#e8e8e8}.search-ver[_ngcontent-%COMP%]{color:#0093ff;vertical-align:middle;font-size:26px;padding:2px 4px;height:30px;width:32px;text-align:center;border-radius:3px;margin-left:-32px}.input-search[_ngcontent-%COMP%]{width:100%;height:34px;border:2px solid rgba(204,201,201,.8901960784);padding:.2rem .55rem;border-radius:3px;font-size:12px}.input-search[_ngcontent-%COMP%]::placeholder{opacity:.7}.input-search[_ngcontent-%COMP%]:focus{border:2px solid #0EAFC0;outline:none}.buttom-cancel[_ngcontent-%COMP%]{background-color:#fff;border-radius:5px;padding:5px 15px;border:1px solid rgb(212,211,211)}.buttom-cancel[_ngcontent-%COMP%]:hover{background-color:#eee}.block-share[_ngcontent-%COMP%]{position:relative}.icon-close[_ngcontent-%COMP%]{position:absolute;top:0;right:0;cursor:pointer;height:23px;font-size:22px;width:23px}.buttom-save[_ngcontent-%COMP%]{background-color:#169bd5;border-radius:5px;padding:6px;color:#fff}.buttom-save[_ngcontent-%COMP%]:hover{background-color:#13b3f8}.buttom-delete[_ngcontent-%COMP%]{background-color:#f44336;border-radius:5px;padding:6px 15px;color:#fff}.buttom-delete[_ngcontent-%COMP%]:hover{background-color:#f81707}.buttom-share[_ngcontent-%COMP%]{font-size:11px;border:1px solid #b2b2b2;border-radius:2px;background:#fff;color:#000}.manage-contacts[_ngcontent-%COMP%]:hover{color:#19cdfa}.manage-contacts[_ngcontent-%COMP%]{font-size:9px;color:#00a7d0}.view-singer-name[_ngcontent-%COMP%]:hover{background:#ececec;border-radius:5px;padding:4px}.view-singer-name[_ngcontent-%COMP%]{border-radius:5px;padding:4px}.popup-delete[_ngcontent-%COMP%]{z-index:1000;width:100%;display:flex;left:0;top:0;position:fixed;height:100%;min-height:100vh;background-color:#3c3c3c80}.body-popup-delete[_ngcontent-%COMP%]{top:50%;left:50%;border-radius:5px;transform:translate(-50%,-50%);position:fixed;background:#fff;width:30%;overflow:auto;text-align:center;padding:20px}.view-list-permission[_ngcontent-%COMP%]:hover{background:#ececec;border-radius:5px;padding:4px}.view-list-permission[_ngcontent-%COMP%]{background:#f3f3f3;border-radius:5px;padding:4px}@media screen and (max-width: 750px){.body-popup-delete[_ngcontent-%COMP%]{width:90%!important}}.btn-menu-item-custom[_ngcontent-%COMP%]{line-height:35px;height:35px;color:#2f3542;text-transform:initial}.btn-menu-item-custom[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#2f3542;vertical-align:middle;font-size:20px;width:20px;height:20px}img[_ngcontent-%COMP%]{display:initial!important}"]}),S})();var p=o(4335),T=o(39660);const s=i=>({"ml-2":i}),g=()=>({"mr-2":!0}),d=i=>({"z-index":i});function _(i,S){if(1&i){const l=n.RV6();n.j41(0,"div",11)(1,"button",12),n.bIt("click",function(){const a=n.eBV(l).$implicit,x=n.XpG(2);return n.Njj(x.showAddOrEditPermissionDialog(void 0,a))}),n.nrm(2,"azt-create-avatar",13),n.k0s()()}if(2&i){const l=S.$implicit;n.R7$(),n.Y8G("disabled",!l.allowEditPermission),n.R7$(),n.Y8G("linkAvatar",l.avatar)("nameCreateAvatar",l.fullName)("size",30)}}function B(i,S){if(1&i){const l=n.RV6();n.j41(0,"div")(1,"button",14),n.bIt("click",function(){const a=n.eBV(l).$implicit,x=n.XpG(2);return n.Njj(x.showAddOrEditPermissionDialog(a,void 0))}),n.nrm(2,"azt-create-avatar",15),n.k0s()()}if(2&i){const l=S.$implicit,m=S.index,a=n.XpG(2);n.ZvI("w-8 h-8 mb-3 image-fit show-tickets zoom-in -ml-4 ",(null==a.shareDataObj||null==a.shareDataObj.groupObjs?null:a.shareDataObj.groupObjs.length)==m+1?"mr-2":""," "),n.R7$(),n.Y8G("disabled",!l.allowEditPermission),n.R7$(),n.Y8G("nameCreateAvatar",l.name)("size",30)}}function nt(i,S){1&i&&(n.j41(0,"span",16),n.EFF(1),n.nI1(2,"mytranslate"),n.k0s()),2&i&&(n.R7$(),n.SpI(" ",n.bMT(2,1,"lang_auto_chia_se")," "))}function ot(i,S){if(1&i){const l=n.RV6();n.j41(0,"div",5)(1,"div"),n.DNE(2,_,3,4,"div",6)(3,B,3,6,"div",7),n.j41(4,"button",8),n.bIt("click",function(){n.eBV(l);const a=n.XpG();return n.Njj(a.showListPeopleWhoWillShare())}),n.nrm(5,"lucide-icon",9),n.DNE(6,nt,3,3,"span",10),n.k0s()()()}if(2&i){const l=n.XpG();n.R7$(),n.HbH(0!=(null==l.shareDataObj||null==l.shareDataObj.teacherObjs?null:l.shareDataObj.teacherObjs.length)||0!=(null==l.shareDataObj||null==l.shareDataObj.groupObjs?null:l.shareDataObj.groupObjs.length)?"pl-4":""),n.R7$(),n.Y8G("ngForOf",null==l.shareDataObj?null:l.shareDataObj.teacherObjs),n.R7$(),n.Y8G("ngForOf",null==l.shareDataObj?null:l.shareDataObj.groupObjs),n.R7$(),n.Y8G("ngClass",n.eq3(7,s,0!=(null==l.shareDataObj||null==l.shareDataObj.teacherObjs?null:l.shareDataObj.teacherObjs.length)||0!=(null==l.shareDataObj||null==l.shareDataObj.groupObjs?null:l.shareDataObj.groupObjs.length))),n.R7$(2),n.Y8G("ngIf",!l.isMobileDevice)}}function h(i,S){if(1&i){const l=n.RV6();n.j41(0,"div",17)(1,"button",18),n.bIt("click",function(){n.eBV(l);const a=n.XpG();return n.Njj(a.showListPeopleWhoWillShare())}),n.nrm(2,"lucide-icon",19),n.EFF(3),n.nI1(4,"mytranslate"),n.k0s()()}2&i&&(n.R7$(2),n.Y8G("ngClass",n.lJ4(4,g)),n.R7$(),n.SpI(" ",n.bMT(4,2,"lang_auto_chia_se")," "))}function D(i,S){if(1&i){const l=n.RV6();n.j41(0,"div",23)(1,"div",24),n.bIt("click",function(){const a=n.eBV(l).$implicit,x=n.XpG(2);return n.Njj(x.showWhoSharePermissionDialog(a))}),n.nrm(2,"azt-create-avatar",25),n.k0s()()}if(2&i){let l;const m=S.$implicit,a=S.index,x=n.XpG(2);n.Y8G("ngStyle",n.eq3(5,d,(null!==(l=null==x.shareDataObj||null==x.shareDataObj.teacherObjs?null:x.shareDataObj.teacherObjs.length)&&void 0!==l?l:0)+(null!==(l=null==x.shareDataObj||null==x.shareDataObj.groupObjs?null:x.shareDataObj.groupObjs.length)&&void 0!==l?l:0)-a)),n.R7$(2),n.Y8G("linkAvatar",m.avatar)("nameCreateAvatar",m.fullName)("size",28)("showCheckUser",2==m.permissionStatus||5==m.permissionStatus)}}function f(i,S){if(1&i&&(n.j41(0,"div",20)(1,"span",21),n.EFF(2),n.nI1(3,"mytranslate"),n.k0s(),n.DNE(4,D,3,7,"div",22),n.k0s()),2&i){const l=n.XpG();n.R7$(2),n.SpI("",n.bMT(3,2,"lang_auto_giao_vien_chia_se"),":\xa0"),n.R7$(2),n.Y8G("ngForOf",l.whoSharePermission)}}let O=(()=>{var i;class S extends j.H{showAddOrEditPermissionDialog(m,a){this.sAztDialogService.open(U.A,{data:{groupObj:m,teacherObj:a,shareDataObj:this.shareDataObj},restoreFocus:!1}).afterClosed().subscribe(u=>{u&&this.getTeamPermissionObjs()})}showWhoSharePermissionDialog(m){this.sAztDialogService.open(et,{data:{whoSharePermissionObj:m,shareDataObj:this.shareDataObj},restoreFocus:!1}).afterClosed().subscribe(x=>{x&&this.getTeamPermissionObjs()})}showListPeopleWhoWillShare(){this.sAztDialogService.open(F.z,{data:{backToLink:this.backToLink,shareDataObj:this.shareDataObj},autoFocus:!1,restoreFocus:!1}).afterClosed().subscribe(a=>{a&&this.getTeamPermissionObjs()})}getTeamPermissionObjs(){this.initStatusObj(),this.teacherGroupService.apiTeacherGroupGetTeamPermissionObjsGet(this.objectCodeType,this.objectId).subscribe(m=>{1==m.success?(this.whoSharePermission=m.data?.whoSharePermission??[],this.shareDataObj={objectId:this.objectId,objectCode:this.objectCode,objectCodeType:this.objectCodeType,classroomWithPermissionObj:this.classroomWithPermissionObj,examWithPermissionObj:this.examWithPermissionObj,homeworkWithPermissionObj:this.homeworkWithPermissionObj,categoryWithPermissionObj:this.categoryWithPermissionObj,allGroupPermissionObjs:this.sortService.sortGroupName(m.data?.allGroupPermissionObjs??[]),allTeacherPermissionObjs:this.sortService.sortFirstNameStudents(m.data?.allTeacherPermissionObjs??[]),groupObjs:m.data?.groups??[],teacherObjs:m.data?.teachers??[],ownerObj:m.data?.owner},this.stopStatusObj()):this.errorStatusObj(m.message??"",!0)})}initPermission(){this.classroomWithPermissionObj?(this.permissionObj=this.classroomWithPermissionObj?.permissionObj,this.getTeamPermissionObjs()):this.examWithPermissionObj?(this.permissionObj=this.examWithPermissionObj?.permissionObj,this.getTeamPermissionObjs()):this.homeworkWithPermissionObj?(this.permissionObj=this.homeworkWithPermissionObj?.permissionObj,this.getTeamPermissionObjs()):this.categoryWithPermissionObj&&(this.permissionObj=this.categoryWithPermissionObj?.permissionObj,this.getTeamPermissionObjs())}ngOnChanges(){this.initPermission()}constructor(m,a,x){super(),this.teacherGroupService=m,this.sortService=a,this.sAztDialogService=x,this.backToLink="",this.objectId=0,this.objectCodeType=0,this.typeDisplay="button",this.objectCode="",this.whoSharePermission=[]}}return(i=S).\u0275fac=function(m){return new(m||i)(n.rXU(y.xr),n.rXU(p.g),n.rXU(T.i))},i.\u0275cmp=n.VBU({type:i,selectors:[["azt-share"]],inputs:{backToLink:"backToLink",objectId:"objectId",objectCodeType:"objectCodeType",typeDisplay:"typeDisplay",objectCode:"objectCode",classroomWithPermissionObj:"classroomWithPermissionObj",examWithPermissionObj:"examWithPermissionObj",homeworkWithPermissionObj:"homeworkWithPermissionObj",categoryWithPermissionObj:"categoryWithPermissionObj"},standalone:!0,features:[n.Vt3,n.OA$,n.aNF],decls:5,vars:3,consts:[[1,"share-block"],[1,"intro","flex"],["class","share-block-item mt-2",4,"ngIf"],["class","share-block-item w-full",4,"ngIf"],["style","display: flex; align-items: center; margin-top: 0.5rem",4,"ngIf"],[1,"share-block-item","mt-2"],["class","w-8 h-8 mb-2 image-fit show-tickets zoom-in -ml-4",4,"ngFor","ngForOf"],[3,"class",4,"ngFor","ngForOf"],["azt-track-service","share-button-box-2Ui6XcNn3Z",1,"btn","btn-sm","btn-outline-secondary",2,"vertical-align","middle",3,"click","ngClass"],["name","share-2","size","16"],["class","ml-2",4,"ngIf"],[1,"w-8","h-8","mb-2","image-fit","show-tickets","zoom-in","-ml-4"],["azt-track-service","share-button-box-vHBJYcuuna",3,"click","disabled"],[3,"linkAvatar","nameCreateAvatar","size"],["azt-track-service","share-button-box-GF6YzJ_wHE",3,"click","disabled"],[3,"nameCreateAvatar","size"],[1,"ml-2"],[1,"share-block-item","w-full"],["azt-track-service","share-button-box-i8iU_Wa_sh",1,"dropdown-item","w-full",3,"click"],["name","share-2","size","16",3,"ngClass"],[2,"display","flex","align-items","center","margin-top","0.5rem"],[2,"font-weight","500"],["class","show-tickets clickable ml-1",3,"ngStyle",4,"ngFor","ngForOf"],[1,"show-tickets","clickable","ml-1",3,"ngStyle"],["azt-track-service","share-button-box-CleLxM4YRRW",3,"click"],[3,"linkAvatar","nameCreateAvatar","size","showCheckUser"]],template:function(m,a){1&m&&(n.j41(0,"div",0)(1,"div",1),n.DNE(2,ot,7,9,"div",2)(3,h,5,5,"div",3),n.k0s(),n.DNE(4,f,5,4,"div",4),n.k0s()),2&m&&(n.R7$(2),n.Y8G("ngIf","button"===a.typeDisplay),n.R7$(),n.Y8G("ngIf","menu"===a.typeDisplay),n.R7$(),n.Y8G("ngIf",a.whoSharePermission.length>0&&"button"===a.typeDisplay))},dependencies:[M.p,v.MD,v.YU,v.Sq,v.bT,v.B3,t.X1,I.iI,t.YN,P.wp,$.s,k.flO,k.WGl,b.L,G.Id,z.k],styles:[".content1[_ngcontent-%COMP%]{padding:15px;max-width:400px;min-width:200px;position:inherit!important}.search-form[_ngcontent-%COMP%]{max-width:500px;width:80vw}.content-search[_ngcontent-%COMP%]{max-height:400px;overflow:auto;min-width:220px}[_ngcontent-%COMP%]::-webkit-scrollbar{background-color:#fff;width:16px}[_ngcontent-%COMP%]::-webkit-scrollbar-button{display:none}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background-color:#fff}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#babac0;border-radius:16px;border:4px solid #fff}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}.show-tickets[_ngcontent-%COMP%]{display:inline-block;position:relative;transition:all .3s;border:1px solid #0110b1!important;border-radius:50%}.show-tickets[_ngcontent-%COMP%]:hover{transform:translateY(-5px);z-index:999!important}.singer-img[_ngcontent-%COMP%]{border-radius:50%;width:30px!important;height:30px!important;font-size:30px!important}.content-search[_ngcontent-%COMP%]{min-width:330px;background-color:#fff;border-radius:5px;box-shadow:0 0 9px #5b5b5b59}.search-ver[_ngcontent-%COMP%]:hover{background:#e8e8e8}.search-ver[_ngcontent-%COMP%]{color:#0093ff;vertical-align:middle;font-size:26px;padding:2px 4px;height:30px;width:32px;text-align:center;border-radius:3px;margin-left:-32px}.input-search[_ngcontent-%COMP%]{width:100%;height:34px;border:2px solid rgba(204,201,201,.8901960784);padding:.2rem .55rem;border-radius:3px;font-size:12px}.input-search[_ngcontent-%COMP%]::placeholder{opacity:.7}.input-search[_ngcontent-%COMP%]:focus{border:2px solid #0EAFC0;outline:none}.buttom-cancel[_ngcontent-%COMP%]{background-color:#fff;border-radius:5px;padding:5px 15px;border:1px solid rgb(212,211,211)}.buttom-cancel[_ngcontent-%COMP%]:hover{background-color:#eee}.block-share[_ngcontent-%COMP%]{position:relative}.icon-close[_ngcontent-%COMP%]{position:absolute;top:0;right:0;cursor:pointer;height:23px;font-size:22px;width:23px}.buttom-save[_ngcontent-%COMP%]{background-color:#169bd5;border-radius:5px;padding:6px;color:#fff}.buttom-save[_ngcontent-%COMP%]:hover{background-color:#13b3f8}.buttom-delete[_ngcontent-%COMP%]{background-color:#f44336;border-radius:5px;padding:6px 15px;color:#fff}.buttom-delete[_ngcontent-%COMP%]:hover{background-color:#f81707}.buttom-share[_ngcontent-%COMP%]{font-size:11px;border:1px solid #b2b2b2;border-radius:2px;background:#fff;color:#000}.manage-contacts[_ngcontent-%COMP%]:hover{color:#19cdfa}.manage-contacts[_ngcontent-%COMP%]{font-size:9px;color:#00a7d0}.view-singer-name[_ngcontent-%COMP%]:hover{background:#ececec;border-radius:5px;padding:4px}.view-singer-name[_ngcontent-%COMP%]{border-radius:5px;padding:4px}.popup-delete[_ngcontent-%COMP%]{z-index:1000;width:100%;display:flex;left:0;top:0;position:fixed;height:100%;min-height:100vh;background-color:#3c3c3c80}.body-popup-delete[_ngcontent-%COMP%]{top:50%;left:50%;border-radius:5px;transform:translate(-50%,-50%);position:fixed;background:#fff;width:30%;overflow:auto;text-align:center;padding:20px}.view-list-permission[_ngcontent-%COMP%]:hover{background:#ececec;border-radius:5px;padding:4px}.view-list-permission[_ngcontent-%COMP%]{background:#f3f3f3;border-radius:5px;padding:4px}@media screen and (max-width: 750px){.body-popup-delete[_ngcontent-%COMP%]{width:90%!important}}.btn-menu-item-custom[_ngcontent-%COMP%]{line-height:35px;height:35px;color:#2f3542;text-transform:initial}.btn-menu-item-custom[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#2f3542;vertical-align:middle;font-size:20px;width:20px;height:20px}img[_ngcontent-%COMP%]{display:initial!important}"]}),S})()}}]);