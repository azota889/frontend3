"use strict";(self.webpackChunkTeacherMod=self.webpackChunkTeacherMod||[]).push([[718],{84718:(Ft,Z,m)=>{m.r(Z),m.d(Z,{AzotaBusinessRoutingModule:()=>Wr,documentMarketRoutes:()=>fe});var h=m(65162),$=m(1133),H=m(50866),u=m(54460),t=m(48891),r=m(10936),B=m(60260),tt=m(46289),C=m(15343),x=m(5502),I=m(44155),X=m(46723),j=m(46899),d=m(36894),p=m(47348),v=m(70050),y=m(59640),O=m(11065),A=m(22613),E=m(37497),U=m(75421),w=m(52811),R=m(18718),wt=m(32099),At=m(27208),pt=m(5800),zt=m(94743),et=m(81519),Wt=m(34514),_t=m(47426),N=m(89163),Q=m(17818),Ce=m(14999),Jt=m(99503),Ht=m(79347),ot=m(33887),at=m(9691),Ie=m(74742),ft=m(2915),ye=m(43165),ke=m(6440);function Me(o,s){1&o&&(t.qex(0),t.j41(1,"li",24)(2,"span",25),t.nrm(3,"azt-loading-ui"),t.k0s()(),t.bVm())}function Oe(o,s){if(1&o&&(t.qex(0),t.j41(1,"li",26),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s(),t.bVm()),2&o){const n=t.XpG(2);t.R7$(2),t.SpI(" ",t.bMT(3,1,n.firstInit?"lang_auto_nhap_ten_hoac_sdt_hoc_sinh":"lang_student_classroom_list_detail_not_student")," ")}}function je(o,s){if(1&o){const n=t.RV6();t.j41(0,"li",28),t.bIt("click",function(){const a=t.eBV(n).$implicit,i=t.XpG(3);return t.Njj(i.selectStudent(a))}),t.nrm(1,"azt-student-info-box",29),t.k0s()}if(2&o){const n=s.$implicit;t.R7$(),t.Y8G("name",n.fullName)("avatar",n.avatar)("gender",n.gender)("phone",n.phone)("email",n.email)("showPhone",!0)("showTooltip",!1)}}function Se(o,s){if(1&o&&(t.qex(0),t.DNE(1,je,2,7,"li",27),t.bVm()),2&o){const n=t.XpG(2);t.R7$(),t.Y8G("ngForOf",n.listStudentSearched)}}function Re(o,s){if(1&o&&t.DNE(0,Oe,4,3,"ng-container",19)(1,Se,2,1,"ng-container",19),2&o){const n=t.XpG();t.Y8G("ngIf",!n.listStudentSearched.length),t.R7$(),t.Y8G("ngIf",n.listStudentSearched.length)}}function Te(o,s){1&o&&(t.qex(0),t.j41(1,"div",30)(2,"span",31),t.EFF(3),t.nI1(4,"mytranslate"),t.k0s()(),t.bVm()),2&o&&(t.R7$(3),t.JRh(t.bMT(4,1,"lang_business_no_student_selected_yet")))}function Fe(o,s){if(1&o){const n=t.RV6();t.j41(0,"div",32)(1,"button",33),t.bIt("click",function(){const a=t.eBV(n).$implicit,i=t.XpG();return t.Njj(i.removeStudent(a))}),t.nrm(2,"lucide-icon",34),t.k0s(),t.nrm(3,"azt-student-info-box",35),t.k0s()}if(2&o){const n=s.$implicit;t.R7$(3),t.Y8G("name",n.fullName)("avatar",n.avatar)("gender",n.gender)("phone",n.phone)("email",n.email)}}let Qt=(()=>{var o;class s extends ot._{saveData(){var e=this.studentForm.form.getRawValue();this.isSaving=!0;var a={id:this.data?.id,studentParentIds:this.listStudentChoose.map(i=>i.id),fullName:e.fullName,gender:Number(e.gender)??1,phone:e.phoneNumber,email:e.email,birthday:e.birthday?this.timeService.formatDateTimeToPostToServer(new Date(e.birthday).toDateString()):void 0,password:e.password??""};this.waitDestroy(this.studentService.apiStudentUpsertParentUsersPost(a).subscribe(i=>{i&&i.success?(this.isSaving=!1,this.successStatusObj("lang_student_utils_add_parent_successfully",!0),this.dialogRef.close(!0)):(this.isSaving=!1,this.errorStatusObj(i.message,!0))}))}selectStudent(e){this.commonService.isExistInArray(this.listStudentChoose,e)||(this.listStudentChoose.push(e),this.listStudentSearched=this.listStudentSearched.filter(a=>a.id!=e.id))}removeStudent(e){this.data?this.sAztDialogService.open(Ce.d,{data:{deleteOnParent:!0,studentObj:Object.assign({classroomId:0,parentId:this.data.id},e),classroomObj:{id:0,name:"",teacherId:0,countStudents:0,showAddStudent:0,grade:0,isShareClassroom:!1,isWaitingConfirm:0,permissionObj:{},teamPermissions:[]}},restoreFocus:!1,width:"550px"}).afterClosed().subscribe(i=>{i&&this.data&&(this.isSaving=!0,this.waitDestroy(this.studentService.apiStudentRemoveParentUsersPost({id:this.data.id,studentParentIds:[e.id]}).subscribe(c=>{if(this.isSaving=!1,!c.success)return this.errorStatusObj(c.message,!0);this.listStudentChoose=this.listStudentChoose.filter(g=>g.id!=e.id),this.isEdited=!0,this.successStatusObj("lang_auto_xoa_hoc_sinh_thanh_cong",!0)})))}):this.listStudentChoose=this.listStudentChoose.filter(i=>i.id!=e.id)}searchStudent(){if(!this.searchStudentControl.value)return this.firstInit=!0,void(this.listStudentSearched=[]);this.isSearching=!0,this.firstInit=!1,this.listStudentSearched=[],this.waitDestroy(this.domainUsersManagementService.apiDomainUsersManagementGetUsersInDomainPost({page:1,pageSize:100,textSearch:this.searchStudentControl.value,role:"STUDENT"}).subscribe(a=>{if(this.isSearching=!1,!a.success)return this.errorStatusObj(a.message,!0);this.menuTrigger.openMenu(),this.listStudentSearched=a.data?.objs.filter(this.commonService.notEmpty).filter(i=>!this.listStudentChoose.find(l=>i.id==l.id))??[],this.isSearching=!1}))}closeDialog(){this.dialogRef.close(this.isEdited)}ngOnInit(){super.ngOnInit()}constructor(e,a,i,l,c,g,b){super(b,g),this.studentService=e,this.sAztDialogService=a,this.sAztTimeService=i,this.domainUsersManagementService=l,this.timeService=c,this.dialogRef=g,this.data=b,this.histories=[],this.searchStudentControl=new r.MJ("",{nonNullable:!0}),this.studentForm=new Ie.d,this.isSaving=!1,this.firstInit=!0,this.isSearching=!1,this.isEdited=!1,this.currentDate=new Date,this.listStudentSearched=[],this.listStudentChoose=[],this.studentForm.form=new r.gE(this.data?{fullName:new r.MJ(this.data?.fullName??"",{nonNullable:!0,validators:[r.k0.required]}),gender:new r.MJ(this.data?.gender??0,{nonNullable:!0}),birthday:new r.MJ(new Date(this.data?.birthday??""),{nonNullable:!0,validators:[r.k0.required]}),email:new r.MJ(this.data?.email??"",{nonNullable:!0,validators:[r.k0.email,r.k0.pattern(/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/)]}),phoneNumber:new r.MJ(this.data?.phone??"",{nonNullable:!0,validators:[r.k0.required,r.k0.pattern(/^[0-9\-]*$/),r.k0.minLength(10),r.k0.maxLength(10)]}),parentPhoneNumber:new r.MJ(this.data?.phone??"",{nonNullable:!0,validators:[r.k0.required,r.k0.pattern(/^[0-9\-]*$/),r.k0.minLength(10),r.k0.maxLength(10)]})}:{fullName:new r.MJ("",{nonNullable:!0,validators:[r.k0.required]}),gender:new r.MJ(0,{nonNullable:!0}),birthday:new r.MJ(new Date(""),{nonNullable:!0,validators:[r.k0.required]}),email:new r.MJ("",{nonNullable:!0,validators:[r.k0.email,r.k0.pattern(/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/)]}),phoneNumber:new r.MJ("",{nonNullable:!0,validators:[r.k0.required,r.k0.pattern(/^[0-9\-]*$/),r.k0.minLength(10),r.k0.maxLength(10)]}),password:new r.MJ("",{nonNullable:!0,validators:[r.k0.required,r.k0.minLength(6)]}),parentPhoneNumber:new r.MJ("",{nonNullable:!0,validators:[r.k0.required,r.k0.pattern(/^[0-9\-]*$/),r.k0.minLength(10),r.k0.maxLength(10)]})}),this.listStudentChoose=this.data?.childUsers?.map(_=>Object.assign({isParent:!1,isAdmin:!1},_))??[]}ngOnDestroy(){super.ngOnDestroy()}}return(o=s).\u0275fac=function(e){return new(e||o)(t.rXU(ke.b0),t.rXU(j.i),t.rXU(at.F),t.rXU(B.ZF),t.rXU(at.F),t.rXU(N.CP,8),t.rXU(N.Vh,8))},o.\u0275cmp=t.VBU({type:o,selectors:[["azt-add-parent"]],viewQuery:function(e,a){if(1&e&&t.GBs(Q.Cp,5),2&e){let i;t.mGM(i=t.lsd())&&(a.menuTrigger=i.first)}},standalone:!0,features:[t.Jv_([{provide:et.$O,useClass:Jt.fb,deps:[_t.Ju,Wt.ij]},{provide:et.vq,useFactory:Ht.fJ,deps:[at.F]}]),t.Vt3,t.aNF],decls:36,vars:26,consts:[["listStudentMenu","matMenu"],["doneSearch",""],[1,"box"],[1,"p-3","border-b","border-slate-200","dark:border-darkmode-400"],[1,"text-base","font-medium","flex","items-center"],[1,"document-market-list",2,"margin-left","5px"],[1,"grid","grid-cols-12","gap-4","p-3"],[1,"col-span-12","md:col-span-6",2,"margin-top","-0.75rem"],[3,"closeDialog","studentForm","hasUser","isAddParent"],[1,"col-span-12","md:col-span-6"],[1,"relative","flex"],[1,"search","w-full"],["type","text",1,"form-control","py-1","px-4","w-full","box","pr-10","h-10",2,"border-radius","0.375rem",3,"keyup.enter","formControl","matMenuTriggerFor","placeholder"],[1,"absolute","my-auto","inset-y-0","mr-3","right-0","text-slate-500","cursor-pointer",3,"click"],["name","search","size","16"],[1,"dropdown-menu","show","relative"],[1,"dropdown-content",2,"max-height","200px","overflow-y","auto","width","250px"],[4,"ngIf","ngIfElse"],[1,"text-md","font-medium","flex","items-center","mt-3"],[4,"ngIf"],["class","flex mt-2",4,"ngFor","ngForOf"],[1,"p-3","text-right","border-t","border-slate-200","dark:border-darkmode-400"],["azt-track-service","add-parent-dialog-Yv0rmUIbhV",1,"mr-3","btn","btn-secondary","min-width-100",3,"click","disabled"],["azt-track-service","add-parent-dialog-RJ4JwiS_xG",1,"btn","btn-primary","min-width-100",3,"click","disabled"],[1,"text-center","mt-2"],[1,"w-6","h-6","inline-block"],[1,"p-2","text-center","text-xs"],["azt-track-service","add-parent-dialog-O3q5vOzZp","class","p-2",3,"click",4,"ngFor","ngForOf"],["azt-track-service","add-parent-dialog-O3q5vOzZp",1,"p-2",3,"click"],[3,"name","avatar","gender","phone","email","showPhone","showTooltip"],["role","alert",1,"bg-red-100","mt-2","border","border-red-400","text-red-700","px-4","py-1","rounded","relative"],[1,"block","sm:inline"],[1,"flex","mt-2"],["azt-track-service","add-parent-dialog-CxnSrTyDC_",1,"btn","btn-outline-danger","btn-sm","border-0","shadow-0","mr-2",3,"click"],["name","trash-2","size","18"],[3,"name","avatar","gender","phone","email"]],template:function(e,a){if(1&e){const i=t.RV6();t.j41(0,"div",2)(1,"div",3)(2,"h3",4),t.EFF(3),t.nI1(4,"mytranslate"),t.k0s()(),t.j41(5,"azt-mat-dialog-content")(6,"div",5)(7,"div",6)(8,"div",7)(9,"azt-form-enter-info-student",8),t.bIt("closeDialog",function(){return t.eBV(i),t.Njj(a.closeDialog())}),t.k0s()(),t.j41(10,"div",9)(11,"div",10)(12,"div",11)(13,"input",12),t.nI1(14,"mytranslate"),t.bIt("keyup.enter",function(){return t.eBV(i),t.Njj(a.searchStudent())}),t.k0s(),t.j41(15,"button",13),t.bIt("click",function(){return t.eBV(i),t.Njj(a.searchStudent())}),t.nrm(16,"lucide-icon",14),t.k0s()(),t.j41(17,"mat-menu",null,0)(19,"div",15)(20,"ul",16),t.DNE(21,Me,4,0,"ng-container",17)(22,Re,2,2,"ng-template",null,1,t.C5r),t.k0s()()()(),t.j41(24,"h3",18),t.EFF(25),t.nI1(26,"mytranslate"),t.k0s(),t.DNE(27,Te,5,3,"ng-container",19)(28,Fe,4,5,"div",20),t.k0s()()()(),t.j41(29,"div",21)(30,"button",22),t.bIt("click",function(){return t.eBV(i),t.Njj(a.closeDialog())}),t.EFF(31),t.nI1(32,"mytranslate"),t.k0s(),t.j41(33,"button",23),t.bIt("click",function(){return t.eBV(i),t.Njj(a.saveData())}),t.EFF(34),t.nI1(35,"mytranslate"),t.k0s()()()}if(2&e){const i=t.sdS(18),l=t.sdS(23);t.R7$(3),t.SpI(" ",t.bMT(4,16,"lang_student_utils_add_parent")," "),t.R7$(6),t.Y8G("studentForm",a.studentForm)("hasUser",!1)("isAddParent",!0),t.R7$(4),t.FS9("placeholder",t.bMT(14,18,"lang_auto_nhap_ten_hoac_sdt_hoc_sinh")),t.Y8G("formControl",a.searchStudentControl)("matMenuTriggerFor",i),t.R7$(8),t.Y8G("ngIf",a.isSearching)("ngIfElse",l),t.R7$(4),t.SpI(" ",t.bMT(26,20,"lang_student_utils_parent_childs")," "),t.R7$(2),t.Y8G("ngIf",!a.listStudentChoose.length),t.R7$(),t.Y8G("ngForOf",a.listStudentChoose),t.R7$(2),t.Y8G("disabled",a.isSaving),t.R7$(),t.JRh(t.bMT(32,22,"lang_cms_common_close_btn")),t.R7$(2),t.Y8G("disabled",a.isSaving||a.studentForm.form.invalid||!a.listStudentChoose.length),t.R7$(),t.JRh(t.bMT(35,24,"lang_button_save"))}},dependencies:[ft.U,ye.s,w.R,pt.B,u.MD,u.Sq,u.bT,r.X1,r.me,r.BC,r.l_,h.iI,r.YN,p.wp,I.s,Q.kk,Q.Cp,C.flO,C.WGl,v.L,x.Id,d.k]}),s})();var we=m(74871),it=m(44233),Ae=m(19),ze=m(49842),gt=m(95670),Et=m(4375),Pt=m(43166);const Ee=o=>({"error-border":o});function Pe(o,s){if(1&o&&(t.j41(0,"mat-option",20),t.EFF(1),t.k0s()),2&o){const n=s.$implicit;t.Y8G("value",n.id),t.R7$(),t.SpI(" ",n.name," ")}}function De(o,s){1&o&&(t.j41(0,"div",21),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&o&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"lang_auto_vui_long_chon_lop")," "))}let Ge=(()=>{var o;class s extends ot._{constructor(e,a,i){super(a,e),this.dialogRef=e,this.data=a,this.classroomGroupService=i,this.dialogService=(0,t.WQX)(j.i),this.classroomList=[],this.classroomSelected=new r.MJ(0,{nonNullable:!0,validators:[r.k0.required,r.k0.min(1)]})}ngOnInit(){super.ngOnInit(),this.getClassroomList()}getClassroomList(){this.initStatusObj(),this.waitDestroy(this.classroomGroupService.apiClassroomGroupGetObjsGet("all").subscribe(e=>{if(!e.success)return this.errorStatusObj(e.message,!0);this.classroomList=this.commonService.concatMultipleArray((e.data?.activeClassroomData??[]).map(i=>i.classroomObjs)),this.successStatusObj()}))}createClassroom(){this.dialogService.open(Ae.F,{data:{classroomObj:void 0,multipleImport:!0},restoreFocus:!1,width:"600px"}).afterClosed().subscribe(a=>{a&&this.getClassroomList()})}handleCloseDialog(){this.dialogRef.close()}confirmDialog(){if(this.classroomSelected.invalid)return this.classroomSelected.markAllAsTouched();const e=this.classroomList.find(a=>a.id===this.classroomSelected.value);this.dialogRef.close(e)}}return(o=s).\u0275fac=function(e){return new(e||o)(t.rXU(N.CP,8),t.rXU(N.Vh,8),t.rXU(ze.kG))},o.\u0275cmp=t.VBU({type:o,selectors:[["dialog-select-classroom"]],standalone:!0,features:[t.Vt3,t.aNF],decls:34,vars:31,consts:[["searchInListProvince","searchInList"],[1,"box"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400","p-3"],[1,"text-base","font-medium"],[1,"p-3","border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"intro"],[1,"flex","items-center"],["for","group-name",1,"form-label","font-medium","mb-0"],[1,"btn","btn-primary-soft","btn-sm","p-1","ml-auto",3,"click"],["name","plus","size","16"],[1,"ml-1"],[1,"mt-3"],["appearance","outline",2,"width","100%",3,"ngClass"],["searchInList","","name","provinceId","id","provinceId",3,"placeholder","formControl"],[3,"formControl","placeholderLabel","noEntriesFoundLabel"],[3,"value",4,"ngFor","ngForOf"],["class","mt-2 text-xs font-medium text-danger",4,"ngIf"],[1,"p-3","text-right"],[1,"btn","w-24","btn-secondary","mr-2",3,"click"],[1,"btn","w-24","btn-primary",3,"click"],[3,"value"],[1,"mt-2","text-xs","font-medium","text-danger"]],template:function(e,a){if(1&e){const i=t.RV6();t.j41(0,"div",1)(1,"div",2)(2,"h3",3),t.EFF(3),t.nI1(4,"mytranslate"),t.k0s()(),t.j41(5,"div",4)(6,"div",5)(7,"div",6)(8,"label",7),t.EFF(9),t.nI1(10,"mytranslate"),t.k0s(),t.j41(11,"button",8),t.bIt("click",function(){return t.eBV(i),t.Njj(a.createClassroom())}),t.nrm(12,"lucide-icon",9),t.j41(13,"span",10),t.EFF(14),t.nI1(15,"mytranslate"),t.k0s()()(),t.j41(16,"div",11)(17,"mat-form-field",12)(18,"mat-select",13,0),t.nI1(20,"mytranslate"),t.j41(21,"mat-option"),t.nrm(22,"ngx-mat-select-search",14),t.nI1(23,"mytranslate"),t.nI1(24,"mytranslate"),t.k0s(),t.DNE(25,Pe,2,2,"mat-option",15),t.k0s()(),t.DNE(26,De,3,3,"div",16),t.k0s()()(),t.j41(27,"div",17)(28,"button",18),t.bIt("click",function(){return t.eBV(i),t.Njj(a.handleCloseDialog())}),t.EFF(29),t.nI1(30,"mytranslate"),t.k0s(),t.j41(31,"button",19),t.bIt("click",function(){return t.eBV(i),t.Njj(a.confirmDialog())}),t.EFF(32),t.nI1(33,"mytranslate"),t.k0s()()()}if(2&e){const i=t.sdS(19);t.R7$(3),t.JRh(t.bMT(4,13,"lang_transfer_students")),t.R7$(6),t.JRh(t.bMT(10,15,"lang_auto_chon_lop")),t.R7$(5),t.JRh(t.bMT(15,17,"lang_student_classroom_list_utils_create_class_add_class")),t.R7$(3),t.Y8G("ngClass",t.eq3(29,Ee,a.classroomSelected.invalid&&a.classroomSelected.touched)),t.R7$(),t.FS9("placeholder",t.bMT(20,19,"lang_auto_vui_long_chon_lop")),t.Y8G("formControl",a.classroomSelected),t.R7$(4),t.FS9("placeholderLabel",t.bMT(23,21,"lang_search_by_name")),t.FS9("noEntriesFoundLabel",t.bMT(24,23,"lang_search_not_found")),t.Y8G("formControl",i.searchControl),t.R7$(3),t.Y8G("ngForOf",i.filter(a.classroomList,"name")),t.R7$(),t.Y8G("ngIf",a.classroomSelected.invalid&&a.classroomSelected.touched),t.R7$(3),t.SpI(" ",t.bMT(30,25,"lang_auto_huy")," "),t.R7$(3),t.SpI(" ",t.bMT(33,27,"lang_auto_xac_nhan")," ")}},dependencies:[it.An,it.U9,u.MD,u.YU,u.Sq,u.bT,r.X1,r.BC,r.l_,h.iI,r.YN,p.wp,I.s,_t.wT,gt.rl,Et.VO,C.flO,C.WGl,v.L,x.Id,d.k,Pt.x],encapsulation:2}),s})();const q=()=>({"mr-2":!0}),$e=o=>({opacity:o}),Be=o=>[o],Ne=o=>({backTo:o}),qt=o=>({user:o}),bt=()=>({"ml-1":!0});function Le(o,s){1&o&&(t.j41(0,"div",36),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&o&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"lang_core_huong_dan_chon_vao_bang_va_vuot_sang_trai_de_xem_cac_thong_tin_khac")," "))}function Ye(o,s){1&o&&t.nrm(0,"div",37)}function Ue(o,s){if(1&o&&(t.j41(0,"div",38),t.nrm(1,"azt-loading-effect",39),t.k0s()),2&o){const n=t.XpG();t.R7$(),t.Y8G("currentStatusObj",n.statusObj)}}function Ve(o,s){1&o&&t.nrm(0,"lucide-icon",58)}function Xe(o,s){1&o&&t.nrm(0,"azt-loading-ui",59),2&o&&t.Y8G("size",14)}function We(o,s){if(1&o){const n=t.RV6();t.j41(0,"div",52)(1,"div",53),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s(),t.j41(4,"button",54),t.bIt("click",function(){t.eBV(n);const a=t.XpG(2);return t.Njj(a.dialogTransferStudent())}),t.DNE(5,Ve,1,0,"lucide-icon",55)(6,Xe,1,1,"azt-loading-ui",56),t.j41(7,"span",57),t.EFF(8),t.nI1(9,"mytranslate"),t.k0s()()()}if(2&o){const n=t.XpG(2);t.R7$(2),t.SpI(" ",t.bMT(3,4,"lang_auto_da_chon")+" "+n.totalSelected," "),t.R7$(3),t.Y8G("ngIf",!n.isLoadingTransfer),t.R7$(),t.Y8G("ngIf",n.isLoadingTransfer),t.R7$(2),t.JRh(t.bMT(9,6,"lang_transfer_students"))}}function Je(o,s){1&o&&(t.j41(0,"div",60),t.nrm(1,"azt-svg-icon",61),t.j41(2,"div",62),t.EFF(3),t.nI1(4,"mytranslate"),t.k0s()()),2&o&&(t.R7$(),t.Y8G("size",84),t.R7$(2),t.SpI(" ",t.bMT(4,2,"lang_not_data")," "))}function He(o,s){1&o&&t.eu8(0)}function Qe(o,s){if(1&o&&(t.j41(0,"a",77),t.nI1(1,"navigationLocalize"),t.DNE(2,He,1,0,"ng-container",78),t.k0s()),2&o){const n=t.XpG().$implicit,e=t.XpG(3),a=t.sdS(70);t.Y8G("routerLink",t.eq3(6,Be,t.bMT(1,4,"/admin/student/profile-student/"+n.classrooms[0].id+"/"+n.classrooms[0].studentId)))("queryParams",t.eq3(8,Ne,"/business/account-management?page="+e.pageObj.page)),t.R7$(2),t.Y8G("ngTemplateOutlet",a)("ngTemplateOutletContext",t.eq3(10,qt,n))}}function qe(o,s){1&o&&t.eu8(0)}function Ke(o,s){if(1&o&&t.DNE(0,qe,1,0,"ng-container",78),2&o){const n=t.XpG().$implicit;t.XpG(3);const e=t.sdS(70);t.Y8G("ngTemplateOutlet",e)("ngTemplateOutletContext",t.eq3(2,qt,n))}}function Ze(o,s){1&o&&(t.j41(0,"span",79),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&o&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"lang_azt_disable")," "))}function tn(o,s){1&o&&(t.j41(0,"span",80),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&o&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"lang_azt_active")," "))}function en(o,s){if(1&o){const n=t.RV6();t.j41(0,"button",87),t.bIt("click",function(){t.eBV(n);const a=t.XpG(2).$implicit,i=t.XpG(3);return t.Njj(i.editStudentDialog(a))}),t.nrm(1,"lucide-icon",88),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s()}2&o&&(t.R7$(),t.Y8G("ngClass",t.lJ4(4,q)),t.R7$(),t.SpI(" ",t.bMT(3,2,"lang_auto_sua")," "))}function nn(o,s){if(1&o){const n=t.RV6();t.j41(0,"div",81),t.DNE(1,en,4,5,"button",82),t.j41(2,"button",83),t.bIt("click",function(){t.eBV(n);const a=t.XpG().$implicit,i=t.XpG(3);return t.Njj(i.deleteAccount(a))}),t.nrm(3,"lucide-icon",84),t.EFF(4),t.nI1(5,"mytranslate"),t.k0s(),t.j41(6,"button",85),t.bIt("click",function(){t.eBV(n);const a=t.XpG().$implicit,i=t.XpG(3);return t.Njj(i.openDialogResetPass(a))}),t.nrm(7,"lucide-icon",86),t.EFF(8),t.nI1(9,"mytranslate"),t.k0s()()}if(2&o){const n=t.XpG().$implicit;t.R7$(),t.Y8G("ngIf",n.student&&!(null!=n.roles&&n.roles.includes("TEACHER"))&&(null==n.classrooms?null:n.classrooms.length)||n.isParent),t.R7$(),t.Y8G("disabled",n.isAdmin),t.R7$(),t.Y8G("ngClass",t.lJ4(11,q)),t.R7$(),t.SpI(" ",t.bMT(5,7,"lang_auto_xoa")," "),t.R7$(2),t.Y8G("disabled",n.isAdmin),t.R7$(),t.Y8G("ngClass",t.lJ4(12,q)),t.R7$(),t.SpI(" ",t.bMT(9,9,"lang_core_dat_lai_mat_khau")," ")}}function on(o,s){1&o&&t.nrm(0,"azt-loading-ui",93)}function an(o,s){if(1&o){const n=t.RV6();t.j41(0,"div",89)(1,"button",90),t.bIt("click",function(){t.eBV(n);const a=t.XpG().$implicit,i=t.XpG(3);return t.Njj(i.revertStudent(a))}),t.DNE(2,on,1,0,"azt-loading-ui",91),t.nrm(3,"lucide-icon",92),t.EFF(4),t.nI1(5,"mytranslate"),t.k0s()()}if(2&o){const n=t.XpG().$implicit,e=t.XpG(3);t.R7$(),t.Y8G("disabled",e.userIdRevert==n.id),t.R7$(),t.Y8G("ngIf",e.userIdRevert==n.id),t.R7$(),t.Y8G("ngClass",t.lJ4(6,q)),t.R7$(),t.SpI(" ",t.bMT(5,4,"lang_azt_khoi_phuc_tai_khoan")," ")}}function sn(o,s){if(1&o){const n=t.RV6();t.qex(0),t.j41(1,"div",64)(2,"div",65)(3,"div",66)(4,"input",67),t.mxI("ngModelChange",function(a){const i=t.eBV(n).$implicit;return t.DH7(i.isChecked,a)||(i.isChecked=a),t.Njj(a)}),t.bIt("change",function(){t.eBV(n);const a=t.XpG(3);return t.Njj(a.handleUserSelect())}),t.k0s(),t.j41(5,"div",68),t.DNE(6,Qe,3,12,"a",69)(7,Ke,1,4,"ng-template",null,3,t.C5r),t.k0s()(),t.j41(9,"div",70),t.EFF(10),t.nI1(11,"maxRoleNameBusinessForUser"),t.nI1(12,"mytranslate"),t.k0s(),t.j41(13,"div",71),t.DNE(14,Ze,3,3,"span",72)(15,tn,3,3,"span",73),t.k0s(),t.j41(16,"div",74),t.DNE(17,nn,10,13,"div",75)(18,an,6,7,"div",76),t.k0s()()(),t.bVm()}if(2&o){const n=s.$implicit,e=t.sdS(8);t.R7$(),t.Y8G("ngStyle",t.eq3(14,$e,n.isChecked?.8:1)),t.R7$(3),t.R50("ngModel",n.isChecked),t.Y8G("disabled",!!n.deletedAt),t.R7$(2),t.Y8G("ngIf",n.classrooms&&n.classrooms.length)("ngIfElse",e),t.R7$(4),t.SpI(" ",t.bMT(12,12,t.bMT(11,10,n.listRoles))," "),t.R7$(4),t.Y8G("ngIf",n.deletedAt),t.R7$(),t.Y8G("ngIf",!n.deletedAt),t.R7$(2),t.Y8G("ngIf",!n.deletedAt),t.R7$(),t.Y8G("ngIf",n.deletedAt)}}function rn(o,s){if(1&o&&(t.j41(0,"div"),t.DNE(1,sn,19,16,"ng-container",63),t.k0s()),2&o){const n=t.XpG(2);t.R7$(),t.Y8G("ngForOf",n.userList)}}function ln(o,s){if(1&o){const n=t.RV6();t.j41(0,"azt-paging",96),t.bIt("goToPaginationPage",function(a){t.eBV(n);const i=t.XpG(3);return t.Njj(i.setPageStudent(a))}),t.k0s()}if(2&o){const n=t.XpG(3);t.Y8G("pageObj",n.pageObj)}}function cn(o,s){if(1&o&&(t.j41(0,"div",94),t.DNE(1,ln,1,1,"azt-paging",95),t.j41(2,"span"),t.EFF(3),t.nI1(4,"mytranslate"),t.k0s()()),2&o){const n=t.XpG(2);t.R7$(),t.Y8G("ngIf",n.totalUser>n.pageObj.pageSize),t.R7$(2),t.JRh(n.totalUser+" "+t.bMT(4,2,"lang_student_frontend_fooder_account"))}}function mn(o,s){if(1&o){const n=t.RV6();t.j41(0,"div",40),t.DNE(1,We,10,8,"div",41),t.k0s(),t.j41(2,"div",42)(3,"div",43)(4,"input",44),t.bIt("change",function(){t.eBV(n);const a=t.XpG();return t.Njj(a.toggleSelectAll())}),t.k0s(),t.j41(5,"div",45),t.EFF(6),t.nI1(7,"mytranslate"),t.k0s(),t.j41(8,"div",46),t.EFF(9),t.nI1(10,"mytranslate"),t.k0s(),t.j41(11,"div",46),t.EFF(12),t.nI1(13,"mytranslate"),t.k0s(),t.j41(14,"div",47),t.EFF(15),t.nI1(16,"mytranslate"),t.k0s()(),t.j41(17,"div",48),t.DNE(18,Je,5,4,"div",49)(19,rn,2,1,"div",50),t.k0s()(),t.DNE(20,cn,5,4,"div",51)}if(2&o){const n=t.XpG();t.R7$(),t.Y8G("ngIf",n.totalSelected),t.R7$(3),t.Y8G("checked",n.isSelectAll),t.R7$(2),t.JRh(t.bMT(7,9,"lang_auto_ho_va_ten")),t.R7$(3),t.JRh(t.bMT(10,11,"lang_azt_role")),t.R7$(3),t.JRh(t.bMT(13,13,"lang_azt_status")),t.R7$(3),t.SpI(" ",t.bMT(16,15,"lang_auto_hanh_dong")," "),t.R7$(3),t.Y8G("ngIf",!n.userList.length),t.R7$(),t.Y8G("ngIf",n.userList.length),t.R7$(),t.Y8G("ngIf",n.totalUser>0)}}function dn(o,s){1&o&&t.nrm(0,"lucide-icon",97),2&o&&t.Y8G("ngClass",t.lJ4(1,bt))}function un(o,s){1&o&&t.nrm(0,"lucide-icon",97),2&o&&t.Y8G("ngClass",t.lJ4(1,bt))}function pn(o,s){1&o&&t.nrm(0,"lucide-icon",97),2&o&&t.Y8G("ngClass",t.lJ4(1,bt))}function _n(o,s){1&o&&t.nrm(0,"lucide-icon",97),2&o&&t.Y8G("ngClass",t.lJ4(1,bt))}function gn(o,s){if(1&o&&t.nrm(0,"azt-student-info-box",98),2&o){const n=s.user;t.Y8G("name",n.fullName)("parentUserName",n.userName)("phone",n.phone)("showPhone",!0)("email",n.email)("gender",n.gender)("birthday",n.birthday)("classrooms",n.classrooms)("identificationNumber",null==n.student?null:n.student.identificationNumber)}}let hn=(()=>{var o;class s extends y.H{constructor(){super(...arguments),this.dialogService=(0,t.WQX)(j.i),this.domainUsersManagementService=(0,t.WQX)(tt.Z),this.backLink="/business/dashboard",this.userList=[],this.totalUser=0,this.searchContentObj=new At.Z,this.pageObj=new E.d(20),this.userIdRevert=0,this.roleFilter="",this.onDelete=!1,this.isSelectAll=!1,this.totalSelected=0,this.isLoadingTransfer=!1}ngOnInit(){super.ngOnInit(),this.initStatusObj(),this.commonService.translateMetaData({title:"lang_core_quan_ly_tai_khoan",image:"lang_cms_test_image"}),this.pageObj.setPageNumber(Number(this.commonService.getMyQueryParam("page")??"1")),this.getData()}getData(){this.waitDestroy(this.domainUsersManagementService.apiDomainUsersManagementGetUsersInDomainPost({page:this.pageObj.page,pageSize:this.pageObj.pageSize,textSearch:this.searchContentObj.searchContent,role:this.roleFilter}).subscribe(a=>{if(this.searchContentObj.setLoading(!1),!a.success)return this.errorStatusObj(a.message,!0);this.userList=a.data?.objs??[],this.userList.map(i=>i.isChecked=!1),this.totalUser=a.data?.total??0,this.pageObj.setTotalPages(this.totalUser),this.stopStatusObj()}))}transferStudent(e,a){const i=this.userList.filter(l=>l.isChecked).map(l=>l.id);i.length&&(this.isLoadingTransfer=!0,this.waitDestroy(this.domainUsersManagementService.apiDomainUsersManagementAddUsersToClassroomPost({userIds:i,classroomId:e}).subscribe(l=>{if(!l.success)return this.errorStatusObj(l.message,!0);const c=this.commonService.myTranslateInstant("lang_transfer_students_success_msg")?.replace("______",i.length.toString()).replace("------",a);this.successStatusObj(c,!0),this.userList.forEach(g=>g.isChecked=!1),this.isSelectAll=!1,this.totalSelected=0,this.isLoadingTransfer=!1})))}search(e){this.searchContentObj.setLoading(!0),this.searchContentObj=e,this.setPageStudent(1)}changeRoleFilter(e){this.roleFilter=e,this.initStatusObj(),this.getData()}setPageStudent(e){this.myNavigationWithQueryString("/business/account-management","?page="+e),this.pageObj.setPageNumber(e),this.initStatusObj(),this.getData()}openDialogResetPass(e){this.dialogService.open(we.$,{width:"500px",restoreFocus:!1,data:{id:e.id,name:e.fullName}}).afterClosed().subscribe(a=>{a&&(this.initStatusObj(),this.getData())})}deleteAccount(e){const a=`\n\t\t\t${this.commonService.myTranslateInstant("lang_auto_ban_co_chac_chan_muon_xoa")}&nbsp;\n\t\t\t${this.commonService.myTranslateInstant("lang_student_frontend_fooder_account")?.toLowerCase()}:&nbsp;\n\t\t\t<div class="text-md font-bold inline"> ${e.fullName} </div>\n\t\t`;this.dialogService.open(U.u,{data:{content:a},restoreFocus:!1,width:"500px"}).afterClosed().subscribe(l=>{l&&(this.onDelete=!0,this.waitDestroy(this.domainUsersManagementService.apiDomainUsersManagementDeleteUsersPost({userIds:[e.id]}).subscribe(c=>{if(this.onDelete=!1,!c.success)return this.errorStatusObj(c.message,!0);this.getData(),this.successStatusObj("lang_cms_delete_success",!0)})))})}editStudentDialog(e){let a=Object.assign({},e.student),i=Object.assign({teacherId:0,countStudents:0,showAddStudent:0,grade:0,isShareClassroom:!1,isWaitingConfirm:0,permissionObj:{},teamPermissions:[]},e.classrooms?.[0]);(e.isParent?this.dialogService.open(Qt,{data:e,restoreFocus:!1,width:"900px"}):this.dialogService.open(X.B,{data:{studentObj:a,classroomObj:i},restoreFocus:!1,width:"550px"})).afterClosed().subscribe(c=>{c&&(this.initStatusObj(),this.getData())})}revertStudent(e){this.userIdRevert=e.id;const a={isShow:!0,content:this.commonService.myTranslateInstant("lang_azt_ban_co_chac_chan_muon_khoi_phuc_tai_khoan")+"<b>"+e.fullName+"</b>?"};this.dialogService.open(U.u,{data:a,restoreFocus:!1,width:"550px"}).afterClosed().subscribe(l=>{l?this.waitDestroy(this.domainUsersManagementService.apiDomainUsersManagementRevertUserPost({userId:e.id}).subscribe(g=>{if(this.userIdRevert=0,!g.success)return this.errorStatusObj(g.message,!0);this.getData(),this.successStatusObj("lang_azt_khoi_phuc_tai_khoan_thanh_cong",!0)})):this.userIdRevert=0})}dialogTransferStudent(){this.dialogService.open(Ge,{width:"600px"}).afterClosed().subscribe(a=>{a&&this.transferStudent(a.id,a.name)})}toggleSelectAll(){this.isSelectAll=!this.isSelectAll,this.userList.forEach(e=>{e.deletedAt||(e.isChecked=this.isSelectAll)}),this.totalSelected=this.isSelectAll?this.userList.length:0}handleUserSelect(){this.totalSelected=this.userList.filter(e=>e.isChecked).length,this.isSelectAll=this.userList.every(e=>e.isChecked)}redirectToAddAdmin(){this.myNavigationWithQueryString("/business/admin-management",`?backto=${encodeURIComponent("/business/account-management&showDialogAddUser=1")}`)}redirectToAddTeacher(){this.myNavigationWithQueryString("/admin/teacher-group/0/0",`?backto=${encodeURIComponent("/business/account-management&showDialogAddUser=1")}`)}redirectToAddStudent(){this.myNavigationWithQueryString("/business/student-management/1",`?backto=${encodeURIComponent("/business/account-management&showDialogAddUser=1")}`)}}return(o=s).\u0275fac=(()=>{let n;return function(a){return(n||(n=t.xGo(o)))(a||o)}})(),o.\u0275cmp=t.VBU({type:o,selectors:[["app-azota-business-account-management"]],standalone:!0,features:[t.Vt3,t.aNF],decls:71,vars:52,consts:[["doneLoading",""],["menuRoleFilter","matMenu"],["studentInfo",""],["isNotYetClassroom",""],[3,"headerBackToLink"],[1,"mt-5"],[1,"col-span-12"],[1,"text-xl","font-medium"],["class","mt-1",4,"ngIf"],[1,"col-span-12","lg:col-span-12","2xl:col-span-12","mt-5"],[1,"flex","flex-col-reverse","sm:flex-row","items-center"],[1,"w-full","sm:w-auto","mr-auto","mt-3","sm:mt-0"],[3,"onSearch","isServerSearch","placeholder","searchContentObj"],[1,"w-full","sm:w-auto","grid","grid-cols-12","gap-4"],[1,"col-span-12","md:col-span-1"],[1,"col-span-12","md:col-span-3"],[1,"btn","btn-primary","text-white","shadow-md","w-full",3,"click"],["name","user-cog","size","16"],[1,"ml-2"],[1,"btn","px-2","box","shadow-md","mr-2","lg:flex","hover:bg-slate-100","dark:hover:bg-darkmode-400","w-full",3,"click"],["name","user-plus","size","16"],["name","plus","size","16"],[1,"col-span-12","md:col-span-2"],[1,"w-full","shadow-md","dropdown-toggle","btn","px-2","box","hover:bg-slate-100","dark:hover:bg-darkmode-400",3,"matMenuTriggerFor"],["name","filter","size","16",3,"ngClass"],["style","width: 10px; height: 10px; border-radius: 50%; margin-left: 5px","class","bg-primary",4,"ngIf"],["class","flex w-full justify-center",4,"ngIf","ngIfElse"],["xPosition","before"],[1,"dropdown-menu","w-56","show","relative"],[1,"dropdown-content"],[1,"dropdown-item","w-full",3,"click"],["name","rows-4","size","16",3,"ngClass"],["name","check","size","16",3,"ngClass",4,"ngIf"],["name","shield-check","size","16",3,"ngClass"],["name","notebook","size","16",3,"ngClass"],["name","baby","size","16",3,"ngClass"],[1,"mt-1"],[1,"bg-primary",2,"width","10px","height","10px","border-radius","50%","margin-left","5px"],[1,"flex","w-full","justify-center"],[3,"currentStatusObj"],[1,"flex","mt-5"],["class","ml-auto flex items-center",4,"ngIf"],[1,"intro-y","col-span-12","overflow-auto","box","mt-5"],[1,"p-5","flex","items-center","border-b","border-slate-200/60","font-medium",2,"min-width","860px"],["type","checkbox",1,"form-check-input",3,"change","checked"],[1,"ml-5","w-80","flex"],[1,"w-32","flex-none","flex","items-center","mr-5"],[1,"flex","items-center","justify-center","ml-auto",2,"width","220px"],[1,"sm:overflow-x-visible"],["class","empty-box p-3 flex items-center justify-center flex-col h-full","style","height: 250px",4,"ngIf"],[4,"ngIf"],["class","flex justify-between items-center mt-2 pb-3",4,"ngIf"],[1,"ml-auto","flex","items-center"],[1,"font-medium","mr-1"],[1,"btn","btn-sm","btn-primary",3,"click"],["name","folder-input","size","14",4,"ngIf"],[3,"size",4,"ngIf"],[1,"ml-1"],["name","folder-input","size","14"],[3,"size"],[1,"empty-box","p-3","flex","items-center","justify-center","flex-col","h-full",2,"height","250px"],["type","inbox-empty",3,"size"],[1,"mt-3","font-medium"],[4,"ngFor","ngForOf"],[1,"inbox__item","inline-block","sm:block","border-b","border-slate-200/60","dark:border-darkmode-400",3,"ngStyle"],[1,"flex","items-center","px-5","py-3"],[1,"w-90","flex-none","flex","items-center","mr-5"],["type","checkbox",1,"form-check-input","flex-none",3,"ngModelChange","change","ngModel","disabled"],[1,"ml-5"],[3,"routerLink","queryParams",4,"ngIf","ngIfElse"],[1,"w-32","truncate","mr-5"],[1,"w-32","truncate","flex","justify-center"],["class","py-0.5 px-2 rounded-full text-xs bg-danger text-white cursor-pointer font-medium shadow-md",4,"ngIf"],["class","py-0.5 px-2 rounded-full text-xs bg-success text-white cursor-pointer font-medium shadow-md",4,"ngIf"],[1,"inbox__item--time","whitespace-nowrap","ml-auto","pl-10"],["class","flex items-center justify-end",4,"ngIf"],["class","flex items-center",4,"ngIf"],[3,"routerLink","queryParams"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"py-0.5","px-2","rounded-full","text-xs","bg-danger","text-white","cursor-pointer","font-medium","shadow-md"],[1,"py-0.5","px-2","rounded-full","text-xs","bg-success","text-white","cursor-pointer","font-medium","shadow-md"],[1,"flex","items-center","justify-end"],["class","btn btn-sm btn-outline-primary mr-3 w-20",3,"click",4,"ngIf"],[1,"btn","btn-outline-danger","btn-sm","shadow-md","mr-3","whitespace-nowrap",3,"click","disabled"],["name","trash-2","size","16",3,"ngClass"],[1,"btn","btn-sm","shadow-md","whitespace-nowrap",3,"click","disabled"],["name","list-restart","size","16",3,"ngClass"],[1,"btn","btn-sm","btn-outline-primary","mr-3","w-20",3,"click"],["name","square-pen","size","16",3,"ngClass"],[1,"flex","items-center"],[1,"btn","btn-outline-pending","btn-sm","shadow-md","whitespace-nowrap",3,"click","disabled"],["class","mr-1",4,"ngIf"],["name","rotate-ccw","size","16",3,"ngClass"],[1,"mr-1"],[1,"flex","justify-between","items-center","mt-2","pb-3"],[3,"pageObj","goToPaginationPage",4,"ngIf"],[3,"goToPaginationPage","pageObj"],["name","check","size","16",3,"ngClass"],[3,"name","parentUserName","phone","showPhone","email","gender","birthday","classrooms","identificationNumber"]],template:function(e,a){if(1&e){const i=t.RV6();t.j41(0,"teacher-layout",4)(1,"div",5)(2,"div",6)(3,"h3",7),t.EFF(4),t.nI1(5,"mytranslate"),t.k0s(),t.DNE(6,Le,3,3,"div",8),t.k0s(),t.j41(7,"div",9)(8,"div",10)(9,"div",11)(10,"azt-search-box",12),t.nI1(11,"mytranslate"),t.bIt("onSearch",function(c){return t.eBV(i),t.Njj(a.search(c.searchObj))}),t.k0s()(),t.j41(12,"div",13),t.nrm(13,"div",14),t.j41(14,"div",15)(15,"button",16),t.bIt("click",function(){return t.eBV(i),t.Njj(a.redirectToAddAdmin())}),t.nrm(16,"lucide-icon",17),t.j41(17,"span",18),t.EFF(18),t.nI1(19,"mytranslate"),t.k0s()()(),t.j41(20,"div",15)(21,"button",19),t.bIt("click",function(){return t.eBV(i),t.Njj(a.redirectToAddTeacher())}),t.nrm(22,"lucide-icon",20),t.j41(23,"span",18),t.EFF(24),t.nI1(25,"mytranslate"),t.k0s()()(),t.j41(26,"div",15)(27,"button",19),t.bIt("click",function(){return t.eBV(i),t.Njj(a.redirectToAddStudent())}),t.nrm(28,"lucide-icon",21),t.j41(29,"span",18),t.EFF(30),t.nI1(31,"mytranslate"),t.k0s()()(),t.j41(32,"div",22)(33,"button",23),t.nrm(34,"lucide-icon",24),t.EFF(35),t.nI1(36,"mytranslate"),t.DNE(37,Ye,1,0,"div",25),t.k0s()()()()(),t.DNE(38,Ue,2,1,"div",26)(39,mn,21,17,"ng-template",null,0,t.C5r),t.k0s()(),t.j41(41,"mat-menu",27,1)(43,"div",28)(44,"ul",29)(45,"li")(46,"button",30),t.bIt("click",function(){return t.eBV(i),t.Njj(a.changeRoleFilter(""))}),t.nrm(47,"lucide-icon",31),t.EFF(48),t.nI1(49,"mytranslate"),t.DNE(50,dn,1,2,"lucide-icon",32),t.k0s()(),t.j41(51,"li")(52,"button",30),t.bIt("click",function(){return t.eBV(i),t.Njj(a.changeRoleFilter("ADMIN"))}),t.nrm(53,"lucide-icon",33),t.EFF(54),t.nI1(55,"mytranslate"),t.DNE(56,un,1,2,"lucide-icon",32),t.k0s()(),t.j41(57,"li")(58,"button",30),t.bIt("click",function(){return t.eBV(i),t.Njj(a.changeRoleFilter("TEACHER"))}),t.nrm(59,"lucide-icon",34),t.EFF(60),t.nI1(61,"mytranslate"),t.DNE(62,pn,1,2,"lucide-icon",32),t.k0s()(),t.j41(63,"li")(64,"button",30),t.bIt("click",function(){return t.eBV(i),t.Njj(a.changeRoleFilter("STUDENT"))}),t.nrm(65,"lucide-icon",35),t.EFF(66),t.nI1(67,"mytranslate"),t.DNE(68,_n,1,2,"lucide-icon",32),t.k0s()()()()(),t.DNE(69,gn,1,9,"ng-template",null,2,t.C5r)}if(2&e){const i=t.sdS(40),l=t.sdS(42);t.Y8G("headerBackToLink",a.backLink),t.R7$(4),t.SpI(" ",t.bMT(5,27,"lang_core_quan_ly_tai_khoan")," "),t.R7$(2),t.Y8G("ngIf",a.isMobileDevice&&a.userList.length>0),t.R7$(4),t.Y8G("isServerSearch",!0)("placeholder",t.bMT(11,29,"lang_core_tim_theo_ten_phone_email"))("searchContentObj",a.searchContentObj),t.R7$(8),t.JRh(t.bMT(19,31,"lang_azt_add_an_admin_account")),t.R7$(6),t.JRh(t.bMT(25,33,"lang_teacher_group_group_add_student")),t.R7$(6),t.JRh(t.bMT(31,35,"lang_auto_them_hoc_sinh")),t.R7$(3),t.Y8G("matMenuTriggerFor",l),t.R7$(),t.Y8G("ngClass",t.lJ4(47,q)),t.R7$(),t.SpI(" ",t.bMT(36,37,"lang_homework_homework_score_list_sort")," "),t.R7$(2),t.Y8G("ngIf",""!=a.roleFilter),t.R7$(),t.Y8G("ngIf",a.statusObj.loading)("ngIfElse",i),t.R7$(9),t.Y8G("ngClass",t.lJ4(48,q)),t.R7$(),t.SpI(" ",t.bMT(49,39,"lang_homework_content_store_all")," "),t.R7$(2),t.Y8G("ngIf",""==a.roleFilter),t.R7$(3),t.Y8G("ngClass",t.lJ4(49,q)),t.R7$(),t.SpI(" ",t.bMT(55,41,"lang_azt_admin")," "),t.R7$(2),t.Y8G("ngIf","ADMIN"==a.roleFilter),t.R7$(3),t.Y8G("ngClass",t.lJ4(50,q)),t.R7$(),t.SpI(" ",t.bMT(61,43,"lang_auto_giao_vien")," "),t.R7$(2),t.Y8G("ngIf","TEACHER"==a.roleFilter),t.R7$(3),t.Y8G("ngClass",t.lJ4(51,q)),t.R7$(),t.SpI(" ",t.bMT(67,45,"lang_auto_hoc_sinh")," "),t.R7$(2),t.Y8G("ngIf","STUDENT"==a.roleFilter)}},dependencies:[zt.m,O.Q,wt.W,R.K,pt.B,w.R,A.q,p.F2,u.MD,u.YU,u.Sq,u.bT,u.T3,u.B3,r.X1,r.Zm,r.BC,h.iI,h.Wk,r.YN,r.vS,p.wp,I.s,Q.kk,Q.Cp,C.flO,C.WGl,v.L,p.VM,x.Id,d.k],encapsulation:2}),s})();var fn=m(44477),nt=m(15766),st=m(81587);const bn=()=>({"dark:text-slate-500":!0});function vn(o,s){1&o&&(t.j41(0,"div",26)(1,"span"),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s()()),2&o&&(t.R7$(2),t.SpI("",t.bMT(3,1,"lang_cms_utils_folder_name_validate_space"),"!"))}function xn(o,s){if(1&o&&(t.j41(0,"div",26),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&o){const n=t.XpG(2);t.R7$(),t.SpI(" ",t.bMT(2,1,n.msgError)," ")}}function Cn(o,s){if(1&o&&(t.j41(0,"div",11)(1,"label",27),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s(),t.j41(4,"div",8),t.nrm(5,"input",28),t.nI1(6,"mytranslate"),t.k0s(),t.DNE(7,xn,3,3,"div",10),t.k0s()),2&o){const n=t.XpG();t.R7$(2),t.JRh(t.bMT(3,3,"lang_auto_nhap_sdt_hoac_email")),t.R7$(3),t.FS9("placeholder",t.bMT(6,5,"lang_auto_nhap_sdt_hoac_email")),t.R7$(2),t.Y8G("ngIf",n.form.controls.phoneOrEmail.touched&&n.isInvalidUserPhoneOrEmail())}}function In(o,s){1&o&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&o&&(t.R7$(),t.JRh(t.bMT(2,1,"lang_auto_vui_long_nhap_mat_khau")))}function yn(o,s){1&o&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&o&&(t.R7$(),t.JRh(t.bMT(2,1,"lang_auto_mat_khau_phai_dai_toi_thieu_la_6")))}function kn(o,s){if(1&o&&(t.j41(0,"div",26),t.DNE(1,In,3,3,"span",34)(2,yn,3,3,"span",34),t.k0s()),2&o){const n=t.XpG(2);t.R7$(),t.Y8G("ngIf",n.form.controls.password.errors.required),t.R7$(),t.Y8G("ngIf",n.form.controls.password.errors.minlength)}}function Mn(o,s){if(1&o){const n=t.RV6();t.j41(0,"div",11)(1,"label",29),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s(),t.j41(4,"div",30),t.nrm(5,"input",31),t.nI1(6,"mytranslate"),t.j41(7,"button",32),t.bIt("click",function(){t.eBV(n);const a=t.XpG();return t.Njj(a.togglePassword())}),t.nrm(8,"lucide-icon",33),t.k0s()(),t.DNE(9,kn,3,2,"div",10),t.k0s()}if(2&o){const n=t.XpG();t.R7$(2),t.JRh(t.bMT(3,6,"lang_auto_mat_khau")),t.R7$(3),t.FS9("placeholder",t.bMT(6,8,"lang_auto_mat_khau")),t.Y8G("type",n.showPassword?"text":"password"),t.R7$(3),t.FS9("name",n.showPassword?"eye":"eye-off"),t.Y8G("ngClass",t.lJ4(10,bn)),t.R7$(),t.Y8G("ngIf",n.form.controls.password.errors&&n.form.controls.password.touched)}}function On(o,s){1&o&&t.nrm(0,"azt-loading-ui",35),2&o&&t.Y8G("size",15)}let jn=(()=>{var o;class s extends ot._{handleCloseDialog(){this.dialogRef.close()}handleSubmit(){if(this.form.invalid||this.isInvalidUserPhoneOrEmail())return this.form.markAllAsTouched();this.initStatusObj();const e=this.form.getRawValue(),a={fullName:e.fullName,phoneOrEmail:e.phoneOrEmail,password:e.password,gender:e.gender},l=this.data?this.domainAdminManagementService.apiDomainAdminManagementUpdateObjPost({userId:this.data?.id,fullName:e.fullName,password:e.password?e.password:void 0,gender:e.gender}):this.domainAdminManagementService.apiDomainAdminManagementAddObjPost(a);this.waitDestroy(l.subscribe(c=>{if(!c.success)return this.errorStatusObj(c.message,!0);this.dialogRef.close(c.data),this.successStatusObj(this.data?"lang_auto_cap_nhat_thanh_cong":"lang_auto_them_thanh_cong",!0)}))}isInvalidUserPhoneOrEmail(){return!this.data&&(this.msgError=fn.U.validPhoneOrEmail(this.form.getRawValue().phoneOrEmail),""!=this.msgError)}togglePassword(){this.showPassword=!this.showPassword}initData(){this.data&&this.form.patchValue({fullName:this.data.fullName,phoneOrEmail:this.data.phone?this.data.phone:this.data.email?this.data.email:"",gender:this.data.gender??0})}constructor(e,a,i){super(i,a),this.domainAdminManagementService=e,this.dialogRef=a,this.data=i,this.msgError="",this.showPassword=!1,this.form=new r.gE(i?{fullName:new r.MJ("",{nonNullable:!0,validators:[r.k0.required,nt.M.noWhiteSpace]}),phoneOrEmail:new r.MJ("",{nonNullable:!0}),gender:new r.MJ(0,{nonNullable:!0,validators:[r.k0.required]}),password:new r.MJ("",{nonNullable:!0,validators:[r.k0.minLength(6)]})}:{fullName:new r.MJ("",{nonNullable:!0,validators:[r.k0.required,nt.M.noWhiteSpace]}),phoneOrEmail:new r.MJ("",{nonNullable:!0,validators:[r.k0.required,nt.M.noWhiteSpace]}),gender:new r.MJ(0,{nonNullable:!0,validators:[r.k0.required]}),password:new r.MJ("",{nonNullable:!0,validators:[r.k0.required,r.k0.minLength(6),nt.M.noWhiteSpace]})})}ngOnInit(){super.ngOnInit(),this.initData()}}return(o=s).\u0275fac=function(e){return new(e||o)(t.rXU(B.ax),t.rXU(N.CP,8),t.rXU(N.Vh,8))},o.\u0275cmp=t.VBU({type:o,selectors:[["selector-name"]],standalone:!0,features:[t.Vt3,t.aNF],decls:44,vars:31,consts:[[1,"box"],[3,"formGroup"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-3","border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"text-base","font-bold","flex","items-center"],[1,"p-3"],[1,"azt-form-group"],["for","full-name",1,"form-label","font-medium"],[1,"input-group"],["type","text","id","full-name","autocomplete","new-full-name","formControlName","fullName",1,"form-control",3,"placeholder"],["class","text-danger text-xs font-medium mt-2",4,"ngIf"],[1,"azt-form-group","mt-3"],[1,"flex","justify-between","border","border-slate-200","dark:border-darkmode-300","p-2","rounded-md"],["for","gender",1,"text-sm"],[1,"flex","justify-end"],[1,"form-check","w-20","mr-2"],["id","azt-acs-gender-male","formControlName","gender","type","radio",1,"form-check-input",3,"value"],["for","azt-acs-gender-male",1,"form-check-label"],["id","azt-acs-gender-female","type","radio","formControlName","gender",1,"form-check-input",3,"value"],["for","azt-acs-gender-female",1,"form-check-label"],["class","azt-form-group mt-3",4,"ngIf"],[1,"p-3","flex"],[1,"ml-auto"],["type","button",1,"btn","btn-secondary","min-width-100","mr-2",3,"click"],[1,"btn","btn-primary","min-width-100",3,"click"],["class","mr-1",3,"size",4,"ngIf"],[1,"text-danger","text-xs","font-medium","mt-2"],["for","phoneOrEmail",1,"form-label","font-medium"],["type","text","autocapitalize","none","formControlName","phoneOrEmail","id","phoneOrEmail",1,"form-control",3,"placeholder"],["for","password",1,"form-label","font-medium"],[1,"relative"],["id","password","formControlName","password","autocapitalize","none","autocomplete","new-password",1,"form-control","px-4","block",3,"type","placeholder"],["type","button",1,"btn-toggle-password",2,"position","absolute","top","10px","right","5px","border","none","background","transparent","z-index","99",3,"click"],["size","20",3,"name","ngClass"],[4,"ngIf"],[1,"mr-1",3,"size"]],template:function(e,a){1&e&&(t.j41(0,"div",0)(1,"form",1)(2,"div",2)(3,"div",3)(4,"h3",4),t.EFF(5),t.nI1(6,"mytranslate"),t.k0s()(),t.j41(7,"div",5)(8,"div",6)(9,"label",7),t.EFF(10),t.nI1(11,"mytranslate"),t.k0s(),t.j41(12,"div",8),t.nrm(13,"input",9),t.nI1(14,"mytranslate"),t.k0s(),t.DNE(15,vn,4,3,"div",10),t.k0s(),t.j41(16,"div",11)(17,"div",12)(18,"label",13),t.EFF(19),t.nI1(20,"mytranslate"),t.k0s(),t.j41(21,"div",14)(22,"div",15),t.nrm(23,"input",16),t.j41(24,"label",17),t.EFF(25),t.nI1(26,"mytranslate"),t.k0s()(),t.j41(27,"div",15),t.nrm(28,"input",18),t.j41(29,"label",19),t.EFF(30),t.nI1(31,"mytranslate"),t.k0s()()()()(),t.DNE(32,Cn,8,7,"div",20)(33,Mn,10,11,"div",20),t.k0s()(),t.j41(34,"div",21)(35,"div",22)(36,"button",23),t.bIt("click",function(){return a.handleCloseDialog()}),t.EFF(37),t.nI1(38,"mytranslate"),t.k0s(),t.j41(39,"button",24),t.bIt("click",function(){return a.handleSubmit()}),t.DNE(40,On,1,1,"azt-loading-ui",25),t.j41(41,"span"),t.EFF(42),t.nI1(43,"mytranslate"),t.k0s()()()()()()),2&e&&(t.R7$(),t.Y8G("formGroup",a.form),t.R7$(4),t.SpI(" ",t.bMT(6,15,a.data?"lang_azt_update_admin":"lang_azt_create_admin")," "),t.R7$(5),t.JRh(t.bMT(11,17,"lang_auto_ho_va_ten")),t.R7$(3),t.FS9("placeholder",t.bMT(14,19,"lang_auto_ho_va_ten")),t.R7$(2),t.Y8G("ngIf",a.form.controls.fullName.errors&&a.form.controls.fullName.touched),t.R7$(4),t.SpI(" ",t.bMT(20,21,"lang_auto_gioi_tinh")," "),t.R7$(4),t.Y8G("value",1),t.R7$(2),t.SpI(" ",t.bMT(26,23,"lang_auto_nam")," "),t.R7$(3),t.Y8G("value",0),t.R7$(2),t.SpI(" ",t.bMT(31,25,"lang_auto_nu")," "),t.R7$(2),t.Y8G("ngIf",!a.data),t.R7$(),t.Y8G("ngIf",!a.data),t.R7$(4),t.SpI(" ",t.bMT(38,27,"lang_button_cancel")," "),t.R7$(3),t.Y8G("ngIf",a.statusObj.loading),t.R7$(2),t.JRh(t.bMT(43,29,a.data?"lang_button_update":"lang_button_save")))},dependencies:[w.R,u.MD,u.YU,u.bT,r.X1,r.qT,r.me,r.Fm,r.BC,r.cb,r.j4,r.JD,h.iI,r.YN,p.wp,I.s,C.flO,C.WGl,v.L,x.Id,d.k,st.t],encapsulation:2}),s})();const Kt=()=>["fullName","phone","email"],Zt=()=>({"mr-2":!0});function Sn(o,s){1&o&&(t.j41(0,"div",16),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&o&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"lang_core_huong_dan_chon_vao_bang_va_vuot_sang_trai_de_xem_cac_thong_tin_khac")," "))}function Rn(o,s){if(1&o&&(t.j41(0,"div",17),t.nrm(1,"azt-loading-effect",18),t.k0s()),2&o){const n=t.XpG();t.R7$(),t.Y8G("currentStatusObj",n.statusObj)}}function Tn(o,s){if(1&o){const n=t.RV6();t.j41(0,"tr")(1,"td",26),t.nrm(2,"azt-student-info-box",27),t.k0s(),t.j41(3,"td",28),t.EFF(4),t.nI1(5,"mytranslate"),t.k0s(),t.j41(6,"td",29)(7,"div",30)(8,"button",31),t.bIt("click",function(){const a=t.eBV(n).$implicit,i=t.XpG(3);return t.Njj(i.createOrUpdateAdmin(a))}),t.nrm(9,"lucide-icon",32),t.EFF(10),t.nI1(11,"mytranslate"),t.k0s(),t.j41(12,"button",33),t.bIt("click",function(){const a=t.eBV(n).$implicit,i=t.XpG(3);return t.Njj(i.removeAdminRole(a))}),t.nrm(13,"lucide-icon",34),t.EFF(14),t.nI1(15,"mytranslate"),t.k0s()()()()}if(2&o){const n=s.$implicit;t.R7$(2),t.Y8G("name",n.fullName)("phone",n.phone)("parentUserName",n.userName)("showPhone",!0)("email",n.email)("gender",n.gender)("birthday",n.birthday)("phone",n.phone),t.R7$(2),t.SpI(" ",t.bMT(5,13,"")," "),t.R7$(5),t.Y8G("ngClass",t.lJ4(19,Zt)),t.R7$(),t.SpI(" ",t.bMT(11,15,"lang_auto_sua")," "),t.R7$(3),t.Y8G("ngClass",t.lJ4(20,Zt)),t.R7$(),t.SpI(" ",t.bMT(15,17,"X\xf3a quy\u1ec1n")," ")}}function Fn(o,s){if(1&o&&(t.j41(0,"div")(1,"div",21)(2,"table",22)(3,"thead")(4,"tr")(5,"th",23),t.EFF(6),t.nI1(7,"mytranslate"),t.k0s(),t.nrm(8,"th",24)(9,"th",24),t.k0s()(),t.j41(10,"tbody"),t.DNE(11,Tn,16,21,"tr",25),t.nI1(12,"appFilter"),t.k0s()()()()),2&o){const n=t.XpG(2);t.R7$(6),t.JRh(t.bMT(7,2,"lang_auto_ho_va_ten")),t.R7$(5),t.Y8G("ngForOf",t.brH(12,4,n.userList,n.searchContentObj.searchContent,t.lJ4(8,Kt)))}}function wn(o,s){1&o&&(t.j41(0,"div",35),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&o&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"lang_core_khong_co_tai_khoan")," "))}function An(o,s){if(1&o&&(t.j41(0,"div",19),t.DNE(1,Fn,13,9,"div",20),t.nI1(2,"appFilter"),t.DNE(3,wn,3,3,"ng-template",null,1,t.C5r),t.k0s()),2&o){const n=t.sdS(4),e=t.XpG();t.R7$(),t.Y8G("ngIf",t.brH(2,2,e.userList,e.searchContentObj.searchContent,t.lJ4(6,Kt)).length>0)("ngIfElse",n)}}let zn=(()=>{var o;class s extends y.H{search(e){this.searchContentObj=e}createOrUpdateAdmin(e){this.sAztDialogService.open(jn,{width:"600px",restoreFocus:!1,data:e}).afterClosed().subscribe(i=>{i&&(e?(e.fullName=i.fullName,e.phone=i.phone,e.email=i.email,e.gender=i.gender):this.userList.unshift(i))})}removeAdminRole(e){const a=`${this.commonService.myTranslateInstant("lang_azt_title_confirm_remove_admin_role")?.replace("________",e.fullName)}`;this.sAztDialogService.open(U.u,{data:{content:a,iconName:"trash-2"},restoreFocus:!1,width:"500px"}).afterClosed().subscribe(l=>{l&&this.callApiRemoveAdminRole(e)})}callApiRemoveAdminRole(e){this.initStatusObj(),this.waitDestroy(this.domainAdminManagementService.apiDomainAdminManagementRemoveAdminRoleGet(e.id).subscribe(a=>{if(!a.success)return this.errorStatusObj(a.message,!0);const i=this.userList.findIndex(l=>l.id===e.id);this.userList.splice(i,1),this.successStatusObj("lang_auto_xoa_quyen_thanh_cong",!0)}))}getData(){this.waitDestroy(this.domainAdminManagementService.apiDomainAdminManagementGetObjsGet().subscribe(e=>{if(this.searchContentObj.setLoading(!1),!e.success)return this.errorStatusObj(e.message,!0);this.userList=e.data?.objs??[],this.totalUser=e.data?.objs?.length??0,this.pageObj.setTotalPages(this.totalUser),this.stopStatusObj()}))}ngOnInit(){super.ngOnInit(),this.commonService.translateMetaData({title:"lang_azt_admin",image:"lang_cms_test_image"}),this.backLink=this.commonService.getMyQueryParam("backto")??"/business/dashboard";const e=Number(this.commonService.getMyQueryParam("showDialogAddUser")??0);this.getData(),e&&this.createOrUpdateAdmin()}constructor(e,a){super(),this.sAztDialogService=e,this.domainAdminManagementService=a,this.backLink="",this.userList=[],this.totalUser=0,this.searchContentObj=new At.Z,this.pageObj=new E.d(20),this.userIdRevert=0}}return(o=s).\u0275fac=function(e){return new(e||o)(t.rXU(j.i),t.rXU(B.ax))},o.\u0275cmp=t.VBU({type:o,selectors:[["app-azota-business-admin-management"]],standalone:!0,features:[t.Vt3,t.aNF],decls:21,vars:15,consts:[["doneLoading",""],["emptyUser",""],[3,"headerBackToLink"],[1,"mt-5"],[1,"col-span-12"],[1,"text-xl","font-medium"],["class","mt-1",4,"ngIf"],[1,"col-span-12","lg:col-span-12","2xl:col-span-12","mt-5"],[1,"flex","flex-col-reverse","sm:flex-row","items-center"],[1,"w-full","sm:w-auto","mr-auto","mt-3","sm:mt-0"],[3,"onSearch","isServerSearch","placeholder","searchContentObj"],[1,"ml-auto"],[1,"btn","btn-primary",3,"click"],["name","plus","size","16"],[1,"ml-2"],["class","flex w-full justify-center",4,"ngIf","ngIfElse"],[1,"mt-1"],[1,"flex","w-full","justify-center"],[3,"currentStatusObj"],[1,"intro-y","col-span-12","overflow-auto"],[4,"ngIf","ngIfElse"],[2,"height","100%"],[1,"table","table-report","mt-2",2,"white-space","initial"],[1,"whitespace-nowrap"],[1,"whitespace-nowrap",2,"padding-left","0"],[4,"ngFor","ngForOf"],[1,"!py-3.5","clickable","w-full"],[3,"name","phone","parentUserName","showPhone","email","gender","birthday"],[2,"min-width","120px"],[2,"min-width","170px"],[1,"flex","items-center"],[1,"btn","btn-sm","btn-primary-soft","mr-3","w-20",3,"click"],["name","square-pen","size","16",3,"ngClass"],[1,"btn","btn-danger-soft","btn-sm","shadow-md","w-full","w-32","whitespace-nowrap",3,"click"],["name","trash-2","size","16",3,"ngClass"],[1,"mt-10","text-center"]],template:function(e,a){if(1&e){const i=t.RV6();t.j41(0,"teacher-layout",2)(1,"div",3)(2,"div",4)(3,"h3",5),t.EFF(4),t.nI1(5,"mytranslate"),t.k0s(),t.DNE(6,Sn,3,3,"div",6),t.k0s(),t.j41(7,"div",7)(8,"div",8)(9,"div",9)(10,"azt-search-box",10),t.nI1(11,"mytranslate"),t.bIt("onSearch",function(c){return t.eBV(i),t.Njj(a.search(c.searchObj))}),t.k0s()(),t.j41(12,"div",11)(13,"button",12),t.bIt("click",function(){return t.eBV(i),t.Njj(a.createOrUpdateAdmin())}),t.nrm(14,"lucide-icon",13),t.j41(15,"span",14),t.EFF(16),t.nI1(17,"mytranslate"),t.k0s()()()()(),t.DNE(18,Rn,2,1,"div",15)(19,An,5,7,"ng-template",null,0,t.C5r),t.k0s()()}if(2&e){const i=t.sdS(20);t.Y8G("headerBackToLink",a.backLink),t.R7$(4),t.SpI(" ",t.bMT(5,9,"lang_azt_admin")," "),t.R7$(2),t.Y8G("ngIf",a.isMobileDevice&&a.userList.length>0),t.R7$(4),t.Y8G("isServerSearch",!1)("placeholder",t.bMT(11,11,"lang_core_tim_theo_ten_phone_email"))("searchContentObj",a.searchContentObj),t.R7$(6),t.JRh(t.bMT(17,13,"lang_azt_create_admin")),t.R7$(2),t.Y8G("ngIf",a.statusObj.loading)("ngIfElse",i)}},dependencies:[O.Q,wt.W,R.K,pt.B,u.MD,u.YU,u.Sq,u.bT,r.X1,h.iI,r.YN,p.wp,I.s,C.flO,C.WGl,v.L,p.WL,x.Id,d.k],encapsulation:2}),s})();const En=o=>({"text-danger":o});function Pn(o,s){if(1&o&&t.nrm(0,"azt-loading-effect",3),2&o){const n=t.XpG();t.Y8G("currentStatusObj",n.statusObj)}}function Dn(o,s){1&o&&(t.j41(0,"span",17),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&o&&(t.R7$(),t.JRh(t.bMT(2,1,"lang_business_config_billing_is_active_subscription")))}function Gn(o,s){1&o&&(t.j41(0,"span",18),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&o&&(t.R7$(),t.JRh(t.bMT(2,1,"lang_business_config_billing_is_inactive_subscription")))}function $n(o,s){if(1&o&&(t.qex(0),t.j41(1,"tr")(2,"td"),t.EFF(3),t.nI1(4,"formatFullDateTimeByUserUnitPipe"),t.k0s(),t.j41(5,"td"),t.EFF(6),t.nI1(7,"formatFullDateTimeByUserUnitPipe"),t.k0s(),t.j41(8,"td"),t.EFF(9),t.nI1(10,"mytranslate"),t.k0s(),t.j41(11,"td"),t.EFF(12),t.nI1(13,"formatMoney"),t.nI1(14,"mytranslate"),t.k0s()(),t.bVm()),2&o){const n=s.$implicit;t.R7$(3),t.JRh(t.bMT(4,4,n.createdAt)),t.R7$(3),t.JRh(t.bMT(7,6,n.endDate)),t.R7$(3),t.JRh(t.bMT(10,8,n.packageName)),t.R7$(3),t.JRh(t.bMT(13,10,n.packageMoney)+" "+t.bMT(14,12,"lang_auto_vnd_upper"))}}function Bn(o,s){if(1&o){const n=t.RV6();t.qex(0),t.j41(1,"div")(2,"b"),t.EFF(3),t.nI1(4,"mytranslate"),t.k0s(),t.EFF(5),t.nI1(6,"mytranslate"),t.DNE(7,Dn,3,3,"span",7)(8,Gn,3,3,"span",8),t.EFF(9," ) "),t.j41(10,"button",9),t.bIt("click",function(){t.eBV(n);const a=t.XpG(2);return t.Njj(a.extendPackage())}),t.EFF(11),t.nI1(12,"mytranslate"),t.k0s(),t.j41(13,"button",10),t.bIt("click",function(){t.eBV(n);const a=t.XpG(2);return t.Njj(a.upgradePackage())}),t.EFF(14),t.nI1(15,"mytranslate"),t.k0s()(),t.j41(16,"div",11)(17,"b"),t.EFF(18),t.nI1(19,"mytranslate"),t.k0s(),t.EFF(20),t.nI1(21,"formatFullDateTimeByUserUnitPipe"),t.j41(22,"b"),t.EFF(23),t.nI1(24,"mytranslate"),t.k0s(),t.EFF(25),t.nI1(26,"formatFullDateTimeByUserUnitPipe"),t.j41(27,"span",12),t.EFF(28),t.nI1(29,"mytranslate"),t.nI1(30,"mytranslate"),t.k0s()(),t.nrm(31,"hr",13),t.j41(32,"div")(33,"b"),t.EFF(34),t.nI1(35,"mytranslate"),t.k0s(),t.j41(36,"table",14)(37,"thead")(38,"tr",15)(39,"td"),t.EFF(40),t.nI1(41,"mytranslate"),t.k0s(),t.j41(42,"td"),t.EFF(43),t.nI1(44,"mytranslate"),t.k0s(),t.j41(45,"td"),t.EFF(46),t.nI1(47,"mytranslate"),t.k0s(),t.j41(48,"td"),t.EFF(49),t.nI1(50,"mytranslate"),t.k0s()()(),t.j41(51,"tbody"),t.DNE(52,$n,15,14,"ng-container",16),t.k0s()()(),t.bVm()}if(2&o){const n=t.XpG(2);t.R7$(3),t.SpI("",t.bMT(4,21,"lang_business_config_billing_current_subscription_package"),":"),t.R7$(2),t.SpI(" ",t.bMT(6,23,null==n.subscriptionObj.businessPackage?null:n.subscriptionObj.businessPackage.name)," ( "),t.R7$(2),t.Y8G("ngIf",n.isActiveSubscription),t.R7$(),t.Y8G("ngIf",!n.isActiveSubscription),t.R7$(3),t.JRh(t.bMT(12,25,"lang_business_config_billing_extend_package")),t.R7$(3),t.JRh(t.bMT(15,27,"lang_business_config_billing_upgrade_package")),t.R7$(4),t.SpI("",t.bMT(19,29,"lang_business_config_billing_start_time"),":"),t.R7$(2),t.SpI(" ",t.bMT(21,31,n.subscriptionObj.startTime),"\xa0\xa0 "),t.R7$(3),t.SpI("",t.bMT(24,33,"lang_business_config_billing_end_time_subscription"),":"),t.R7$(2),t.SpI(" ",t.bMT(26,35,n.subscriptionObj.endTime)," ( "),t.R7$(2),t.Y8G("ngClass",t.eq3(51,En,n.subscriptionTimeDtoObj.days<10)),t.R7$(),t.LHq("",n.subscriptionTimeDtoObj.days," ",t.bMT(29,37,"lang_auto_day"),", ",n.subscriptionTimeDtoObj.hours," ",t.bMT(30,39,"lang_auto_clock"),")"),t.R7$(6),t.JRh(t.bMT(35,41,"lang_business_config_billing_history_list")),t.R7$(6),t.JRh(t.bMT(41,43,"lang_business_config_billing_history_start_date")),t.R7$(3),t.JRh(t.bMT(44,45,"lang_business_config_billing_history_end_date")),t.R7$(3),t.JRh(t.bMT(47,47,"lang_business_config_billing_history_package_name")),t.R7$(3),t.JRh(t.bMT(50,49,"lang_business_config_billing_history_package_price")),t.R7$(3),t.Y8G("ngForOf",n.subscriptionObj.subscriptionHistories)}}function Nn(o,s){1&o&&(t.EFF(0),t.nI1(1,"mytranslate")),2&o&&t.SpI(" ",t.bMT(1,1,"lang_business_config_billing_there_is_no_subscription")," ")}function Ln(o,s){if(1&o&&(t.j41(0,"div",4)(1,"div",5),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s(),t.j41(4,"div"),t.DNE(5,Bn,53,53,"ng-container",6)(6,Nn,2,3,"ng-template",null,1,t.C5r),t.k0s()()),2&o){const n=t.sdS(7),e=t.XpG();t.R7$(2),t.SpI(" ",t.bMT(3,3,"lang_business_config_billing_title")," "),t.R7$(3),t.Y8G("ngIf",e.subscriptionObj)("ngIfElse",n)}}let Yn=(()=>{var o;class s extends y.H{extendPackage(){this.myNavigation("/auth/business-packages/extend_package/0/0")}upgradePackage(){this.myNavigation("/auth/business-packages/upgrade_package/0/0")}initData(){this.initStatusObj(),this.waitDestroy(this.businessPackageService.apiPackagesMeGet().subscribe(e=>{e.success?(this.subscriptionObj=e.data?.obj,this.subscriptionTimeDtoObj=this.sAztTimeService.getDayHourMinuteOfSubtract(this.subscriptionObj?.endTime),(this.subscriptionTimeDtoObj.days<0||this.subscriptionTimeDtoObj.hours<0||this.subscriptionTimeDtoObj.minutes<0)&&(this.subscriptionTimeDtoObj={days:0,hours:0,minutes:0},this.isActiveSubscription=!1),this.stopStatusObj()):this.errorStatusObj(e.message,!0)}))}ngOnInit(){super.ngOnInit(),this.initData()}constructor(e,a){super(),this.businessPackageService=e,this.sAztTimeService=a,this.subscriptionObj=void 0,this.subscriptionHistories=[],this.subscriptionTimeDtoObj={days:0,hours:0,minutes:0},this.isActiveSubscription=!0}}return(o=s).\u0275fac=function(e){return new(e||o)(t.rXU(B.WC),t.rXU(at.F))},o.\u0275cmp=t.VBU({type:o,selectors:[["app-business-billing-configs"]],standalone:!0,features:[t.Vt3,t.aNF],decls:3,vars:2,consts:[["doneLoading",""],["notFoundSubscription",""],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[1,"config-business-billing"],[1,"flex","items-center","border-b","border-slate-200/60","pb-5","mb-5","text-base","font-medium","dark:border-darkmode-400"],[4,"ngIf","ngIfElse"],["class","text-success",4,"ngIf"],["class","text-dagner",4,"ngIf"],[1,"btn","btn-pending","mr-2",3,"click"],[1,"btn","btn-primary","mr-2",3,"click"],[1,"pt-3"],[3,"ngClass"],[1,"mt-6","mb-6"],[1,"table","table-bordered","mt-3"],[1,"table-header"],[4,"ngFor","ngForOf"],[1,"text-success"],[1,"text-dagner"]],template:function(e,a){if(1&e&&t.DNE(0,Pn,1,1,"azt-loading-effect",2)(1,Ln,8,5,"ng-template",null,0,t.C5r),2&e){const i=t.sdS(2);t.Y8G("ngIf",a.statusObj.loading)("ngIfElse",i)}},dependencies:[R.K,u.MD,u.YU,u.Sq,u.bT,r.X1,h.iI,r.YN,p.wp,I.s,C.flO,v.L,p.Rr,p.t0,x.Id,d.k],encapsulation:2}),s})();var te=m(69223),vt=m(73014),ee=m(86388);const Un=["wrapper"],Vn=["sourceImage"];function Xn(o,s){if(1&o){const n=t.RV6();t.j41(0,"img",5,1),t.bIt("load",function(){t.eBV(n);const a=t.XpG();return t.Njj(a.imageLoadedInView())})("mousedown",function(a){t.eBV(n);const i=t.XpG();return t.Njj(i.startMove(a,i.moveTypes.Drag))})("touchstart",function(a){t.eBV(n);const i=t.XpG();return t.Njj(i.startMove(a,i.moveTypes.Drag))})("error",function(a){t.eBV(n);const i=t.XpG();return t.Njj(i.loadImageError(a))}),t.k0s()}if(2&o){const n=t.XpG();t.xc7("visibility",n.imageVisible?"visible":"hidden")("transform",n.safeTransformStyle),t.AVh("ngx-ic-draggable",!n.disabled&&n.allowMoveImage),t.Y8G("src",n.safeImgDataUrl,t.B4B),t.BMQ("alt",n.imageAltText)}}function Wn(o,s){if(1&o){const n=t.RV6();t.qex(0),t.j41(1,"span",9),t.bIt("mousedown",function(a){t.eBV(n);const i=t.XpG(2);return t.Njj(i.startMove(a,i.moveTypes.Resize,"topleft"))})("touchstart",function(a){t.eBV(n);const i=t.XpG(2);return t.Njj(i.startMove(a,i.moveTypes.Resize,"topleft"))}),t.nrm(2,"span",10),t.k0s(),t.j41(3,"span",11),t.nrm(4,"span",10),t.k0s(),t.j41(5,"span",12),t.bIt("mousedown",function(a){t.eBV(n);const i=t.XpG(2);return t.Njj(i.startMove(a,i.moveTypes.Resize,"topright"))})("touchstart",function(a){t.eBV(n);const i=t.XpG(2);return t.Njj(i.startMove(a,i.moveTypes.Resize,"topright"))}),t.nrm(6,"span",10),t.k0s(),t.j41(7,"span",13),t.nrm(8,"span",10),t.k0s(),t.j41(9,"span",14),t.bIt("mousedown",function(a){t.eBV(n);const i=t.XpG(2);return t.Njj(i.startMove(a,i.moveTypes.Resize,"bottomright"))})("touchstart",function(a){t.eBV(n);const i=t.XpG(2);return t.Njj(i.startMove(a,i.moveTypes.Resize,"bottomright"))}),t.nrm(10,"span",10),t.k0s(),t.j41(11,"span",15),t.nrm(12,"span",10),t.k0s(),t.j41(13,"span",16),t.bIt("mousedown",function(a){t.eBV(n);const i=t.XpG(2);return t.Njj(i.startMove(a,i.moveTypes.Resize,"bottomleft"))})("touchstart",function(a){t.eBV(n);const i=t.XpG(2);return t.Njj(i.startMove(a,i.moveTypes.Resize,"bottomleft"))}),t.nrm(14,"span",10),t.k0s(),t.j41(15,"span",17),t.nrm(16,"span",10),t.k0s(),t.j41(17,"span",18),t.bIt("mousedown",function(a){t.eBV(n);const i=t.XpG(2);return t.Njj(i.startMove(a,i.moveTypes.Resize,"top"))})("touchstart",function(a){t.eBV(n);const i=t.XpG(2);return t.Njj(i.startMove(a,i.moveTypes.Resize,"top"))}),t.k0s(),t.j41(18,"span",19),t.bIt("mousedown",function(a){t.eBV(n);const i=t.XpG(2);return t.Njj(i.startMove(a,i.moveTypes.Resize,"right"))})("touchstart",function(a){t.eBV(n);const i=t.XpG(2);return t.Njj(i.startMove(a,i.moveTypes.Resize,"right"))}),t.k0s(),t.j41(19,"span",20),t.bIt("mousedown",function(a){t.eBV(n);const i=t.XpG(2);return t.Njj(i.startMove(a,i.moveTypes.Resize,"bottom"))})("touchstart",function(a){t.eBV(n);const i=t.XpG(2);return t.Njj(i.startMove(a,i.moveTypes.Resize,"bottom"))}),t.k0s(),t.j41(20,"span",21),t.bIt("mousedown",function(a){t.eBV(n);const i=t.XpG(2);return t.Njj(i.startMove(a,i.moveTypes.Resize,"left"))})("touchstart",function(a){t.eBV(n);const i=t.XpG(2);return t.Njj(i.startMove(a,i.moveTypes.Resize,"left"))}),t.k0s(),t.bVm()}}function Jn(o,s){if(1&o){const n=t.RV6();t.j41(0,"div",6),t.bIt("keydown",function(a){t.eBV(n);const i=t.XpG();return t.Njj(i.keyboardAccess(a))}),t.j41(1,"div",7),t.bIt("mousedown",function(a){t.eBV(n);const i=t.XpG();return t.Njj(i.startMove(a,i.moveTypes.Move))})("touchstart",function(a){t.eBV(n);const i=t.XpG();return t.Njj(i.startMove(a,i.moveTypes.Move))}),t.k0s(),t.DNE(2,Wn,21,0,"ng-container",8),t.k0s()}if(2&o){const n=t.XpG();t.xc7("top",n.cropper.y1,"px")("left",n.cropper.x1,"px")("width",n.cropper.x2-n.cropper.x1,"px")("height",n.cropper.y2-n.cropper.y1,"px")("margin-left","center"===n.alignImage?n.marginLeft:null)("visibility",n.imageVisible?"visible":"hidden"),t.AVh("ngx-ic-round",n.roundCropper),t.R7$(2),t.Y8G("ngIf",!n.hideResizeSquares)}}class Hn{constructor(){this.format="png",this.output="blob",this.maintainAspectRatio=!0,this.transform={},this.aspectRatio=1,this.resetCropOnAspectRatioChange=!0,this.resizeToWidth=0,this.resizeToHeight=0,this.cropperMinWidth=0,this.cropperMinHeight=0,this.cropperMaxHeight=0,this.cropperMaxWidth=0,this.cropperStaticWidth=0,this.cropperStaticHeight=0,this.canvasRotation=0,this.initialStepSize=3,this.roundCropper=!1,this.onlyScaleDown=!1,this.imageQuality=92,this.autoCrop=!0,this.backgroundColor=null,this.containWithinAspectRatio=!1,this.hideResizeSquares=!1,this.alignImage="center",this.cropperScaledMinWidth=20,this.cropperScaledMinHeight=20,this.cropperScaledMaxWidth=20,this.cropperScaledMaxHeight=20,this.stepSize=this.initialStepSize}setOptions(s){Object.keys(s).filter(n=>n in this).forEach(n=>this[n]=s[n]),this.validateOptions()}setOptionsFromChanges(s){Object.keys(s).filter(n=>n in this).forEach(n=>this[n]=s[n].currentValue),this.validateOptions()}validateOptions(){if(this.maintainAspectRatio&&!this.aspectRatio)throw new Error("`aspectRatio` should > 0 when `maintainAspectRatio` is enabled")}}var L=function(o){return o.Drag="drag",o.Move="move",o.Resize="resize",o.Pinch="pinch",o}(L||{});function ne(o,s){return o/100*s}let to=(()=>{class o{crop(n,e,a,i,l){const c=this.getImagePosition(n,e,a,i),g=c.x2-c.x1,b=c.y2-c.y1,_=document.createElement("canvas");_.width=g,_.height=b;const f=_.getContext("2d");if(!f)return null;null!=i.backgroundColor&&(f.fillStyle=i.backgroundColor,f.fillRect(0,0,g,b));const M=(i.transform.scale||1)*(i.transform.flipH?-1:1),F=(i.transform.scale||1)*(i.transform.flipV?-1:1),{translateH:S,translateV:T}=this.getCanvasTranslate(n,e,i),D=e.transformed;f.setTransform(M,0,0,F,D.size.width/2+S,D.size.height/2+T),f.translate(-c.x1/M,-c.y1/F),f.rotate((i.transform.rotate||0)*Math.PI/180),f.drawImage(D.image,-D.size.width/2,-D.size.height/2);const G={width:g,height:b,imagePosition:c,cropperPosition:{...a}};i.containWithinAspectRatio&&(G.offsetImagePosition=this.getOffsetImagePosition(n,e,a,i));const z=this.getResizeRatio(g,b,i);return 1!==z&&(G.width=Math.round(g*z),G.height=i.maintainAspectRatio?Math.round(G.width/i.aspectRatio):Math.round(b*z),function Zn(o,s,n){const e=o.width,a=o.height,i=e/(s=Math.round(s)),l=a/(n=Math.round(n)),c=Math.ceil(i/2),g=Math.ceil(l/2),b=o.getContext("2d");if(b){const _=b.getImageData(0,0,e,a),f=b.createImageData(s,n),M=_.data,F=f.data;for(let S=0;S<n;S++)for(let T=0;T<s;T++){const D=4*(T+S*s),G=S*l;let z=0,mt=0,jt=0,k=0,J=0,St=0,be=0;const Jr=Math.floor(T*i),Hr=Math.floor(S*l);let Vt=Math.ceil((T+1)*i),Xt=Math.ceil((S+1)*l);Vt=Math.min(Vt,e),Xt=Math.min(Xt,a);for(let Rt=Hr;Rt<Xt;Rt++){const ve=Math.abs(G-Rt)/g,Qr=T*i,qr=ve*ve;for(let Tt=Jr;Tt<Vt;Tt++){const xe=Math.abs(Qr-Tt)/c,dt=Math.sqrt(qr+xe*xe);if(dt>=1)continue;z=2*dt*dt*dt-3*dt*dt+1;const ut=4*(Tt+Rt*e);be+=z*M[ut+3],jt+=z,M[ut+3]<255&&(z=z*M[ut+3]/250),k+=z*M[ut],J+=z*M[ut+1],St+=z*M[ut+2],mt+=z}}F[D]=k/mt,F[D+1]=J/mt,F[D+2]=St/mt,F[D+3]=be/jt}o.width=s,o.height=n,b.putImageData(f,0,0)}}(_,G.width,G.height)),"blob"===l?this.cropToBlob(G,_,i):(G.base64=_.toDataURL("image/"+i.format,this.getQuality(i)),G)}cropToBlob(n,e,a){var i=this;return(0,vt.A)(function*(){return n.blob=yield new Promise(l=>e.toBlob(l,"image/"+a.format,i.getQuality(a))),n.blob&&(n.objectUrl=URL.createObjectURL(n.blob)),n})()}getCanvasTranslate(n,e,a){if("px"===a.transform.translateUnit){const i=this.getRatio(n,e);return{translateH:(a.transform.translateH||0)*i,translateV:(a.transform.translateV||0)*i}}return{translateH:a.transform.translateH?ne(a.transform.translateH,e.transformed.size.width):0,translateV:a.transform.translateV?ne(a.transform.translateV,e.transformed.size.height):0}}getRatio(n,e){return e.transformed.size.width/n.nativeElement.offsetWidth}getImagePosition(n,e,a,i){const l=this.getRatio(n,e),c={x1:Math.round(a.x1*l),y1:Math.round(a.y1*l),x2:Math.round(a.x2*l),y2:Math.round(a.y2*l)};return i.containWithinAspectRatio||(c.x1=Math.max(c.x1,0),c.y1=Math.max(c.y1,0),c.x2=Math.min(c.x2,e.transformed.size.width),c.y2=Math.min(c.y2,e.transformed.size.height)),c}getOffsetImagePosition(n,e,a,i){const g=e.transformed.size.width/n.nativeElement.offsetWidth;let b,_;(i.canvasRotation+e.exifTransform.rotate)%2?(b=(e.transformed.size.width-e.original.size.height)/2,_=(e.transformed.size.height-e.original.size.width)/2):(b=(e.transformed.size.width-e.original.size.width)/2,_=(e.transformed.size.height-e.original.size.height)/2);const f={x1:Math.round(a.x1*g)-b,y1:Math.round(a.y1*g)-_,x2:Math.round(a.x2*g)-b,y2:Math.round(a.y2*g)-_};return i.containWithinAspectRatio||(f.x1=Math.max(f.x1,0),f.y1=Math.max(f.y1,0),f.x2=Math.min(f.x2,e.transformed.size.width),f.y2=Math.min(f.y2,e.transformed.size.height)),f}getResizeRatio(n,e,a){const i=a.resizeToWidth/n,l=a.resizeToHeight/e,c=new Array;a.resizeToWidth>0&&c.push(i),a.resizeToHeight>0&&c.push(l);const g=0===c.length?1:Math.min(...c);return g>1&&!a.onlyScaleDown?g:Math.min(g,1)}getQuality(n){return Math.min(1,Math.max(0,n.imageQuality/100))}}return o.\u0275fac=function(n){return new(n||o)},o.\u0275prov=t.jDH({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),eo=(()=>{class o{resetCropperPosition(n,e,a){if(!n?.nativeElement)return;const i=n.nativeElement;if(a.cropperStaticHeight&&a.cropperStaticWidth)e.x1=0,e.x2=i.offsetWidth>a.cropperStaticWidth?a.cropperStaticWidth:i.offsetWidth,e.y1=0,e.y2=i.offsetHeight>a.cropperStaticHeight?a.cropperStaticHeight:i.offsetHeight;else{const l=Math.min(a.cropperScaledMaxWidth,i.offsetWidth),c=Math.min(a.cropperScaledMaxHeight,i.offsetHeight);if(a.maintainAspectRatio)if(i.offsetWidth/a.aspectRatio<i.offsetHeight){e.x1=0,e.x2=l;const g=l/a.aspectRatio;e.y1=(i.offsetHeight-g)/2,e.y2=e.y1+g}else{e.y1=0,e.y2=c;const g=c*a.aspectRatio;e.x1=(i.offsetWidth-g)/2,e.x2=e.x1+g}else e.x1=0,e.x2=l,e.y1=0,e.y2=c}}move(n,e,a){const i=this.getClientX(n)-e.clientX,l=this.getClientY(n)-e.clientY;a.x1=e.x1+i,a.y1=e.y1+l,a.x2=e.x2+i,a.y2=e.y2+l}resize(n,e,a,i,l){const c=this.getClientX(n)-e.clientX,g=this.getClientY(n)-e.clientY;switch(e.position){case"left":a.x1=Math.min(Math.max(e.x1+c,a.x2-l.cropperScaledMaxWidth),a.x2-l.cropperScaledMinWidth);break;case"topleft":a.x1=Math.min(Math.max(e.x1+c,a.x2-l.cropperScaledMaxWidth),a.x2-l.cropperScaledMinWidth),a.y1=Math.min(Math.max(e.y1+g,a.y2-l.cropperScaledMaxHeight),a.y2-l.cropperScaledMinHeight);break;case"top":a.y1=Math.min(Math.max(e.y1+g,a.y2-l.cropperScaledMaxHeight),a.y2-l.cropperScaledMinHeight);break;case"topright":a.x2=Math.max(Math.min(e.x2+c,a.x1+l.cropperScaledMaxWidth),a.x1+l.cropperScaledMinWidth),a.y1=Math.min(Math.max(e.y1+g,a.y2-l.cropperScaledMaxHeight),a.y2-l.cropperScaledMinHeight);break;case"right":a.x2=Math.max(Math.min(e.x2+c,a.x1+l.cropperScaledMaxWidth),a.x1+l.cropperScaledMinWidth);break;case"bottomright":a.x2=Math.max(Math.min(e.x2+c,a.x1+l.cropperScaledMaxWidth),a.x1+l.cropperScaledMinWidth),a.y2=Math.max(Math.min(e.y2+g,a.y1+l.cropperScaledMaxHeight),a.y1+l.cropperScaledMinHeight);break;case"bottom":a.y2=Math.max(Math.min(e.y2+g,a.y1+l.cropperScaledMaxHeight),a.y1+l.cropperScaledMinHeight);break;case"bottomleft":a.x1=Math.min(Math.max(e.x1+c,a.x2-l.cropperScaledMaxWidth),a.x2-l.cropperScaledMinWidth),a.y2=Math.max(Math.min(e.y2+g,a.y1+l.cropperScaledMaxHeight),a.y1+l.cropperScaledMinHeight);break;case"center":const b=n.scale,_=Math.min(Math.max(l.cropperScaledMinWidth,Math.abs(e.x2-e.x1)*b),l.cropperScaledMaxWidth),f=Math.min(Math.max(l.cropperScaledMinHeight,Math.abs(e.y2-e.y1)*b),l.cropperScaledMaxHeight);a.x1=e.clientX-_/2,a.x2=e.clientX+_/2,a.y1=e.clientY-f/2,a.y2=e.clientY+f/2,a.x1<0?(a.x2-=a.x1,a.x1=0):a.x2>i.width&&(a.x1-=a.x2-i.width,a.x2=i.width),a.y1<0?(a.y2-=a.y1,a.y1=0):a.y2>i.height&&(a.y1-=a.y2-i.height,a.y2=i.height)}l.maintainAspectRatio&&this.checkAspectRatio(e.position,a,i,l)}checkAspectRatio(n,e,a,i){let l=0,c=0;switch(n){case"top":e.x2=e.x1+(e.y2-e.y1)*i.aspectRatio,l=Math.max(e.x2-a.width,0),c=Math.max(0-e.y1,0),(l>0||c>0)&&(e.x2-=c*i.aspectRatio>l?c*i.aspectRatio:l,e.y1+=c*i.aspectRatio>l?c:l/i.aspectRatio);break;case"bottom":e.x2=e.x1+(e.y2-e.y1)*i.aspectRatio,l=Math.max(e.x2-a.width,0),c=Math.max(e.y2-a.height,0),(l>0||c>0)&&(e.x2-=c*i.aspectRatio>l?c*i.aspectRatio:l,e.y2-=c*i.aspectRatio>l?c:l/i.aspectRatio);break;case"topleft":e.y1=e.y2-(e.x2-e.x1)/i.aspectRatio,l=Math.max(0-e.x1,0),c=Math.max(0-e.y1,0),(l>0||c>0)&&(e.x1+=c*i.aspectRatio>l?c*i.aspectRatio:l,e.y1+=c*i.aspectRatio>l?c:l/i.aspectRatio);break;case"topright":e.y1=e.y2-(e.x2-e.x1)/i.aspectRatio,l=Math.max(e.x2-a.width,0),c=Math.max(0-e.y1,0),(l>0||c>0)&&(e.x2-=c*i.aspectRatio>l?c*i.aspectRatio:l,e.y1+=c*i.aspectRatio>l?c:l/i.aspectRatio);break;case"right":case"bottomright":e.y2=e.y1+(e.x2-e.x1)/i.aspectRatio,l=Math.max(e.x2-a.width,0),c=Math.max(e.y2-a.height,0),(l>0||c>0)&&(e.x2-=c*i.aspectRatio>l?c*i.aspectRatio:l,e.y2-=c*i.aspectRatio>l?c:l/i.aspectRatio);break;case"left":case"bottomleft":e.y2=e.y1+(e.x2-e.x1)/i.aspectRatio,l=Math.max(0-e.x1,0),c=Math.max(e.y2-a.height,0),(l>0||c>0)&&(e.x1+=c*i.aspectRatio>l?c*i.aspectRatio:l,e.y2-=c*i.aspectRatio>l?c:l/i.aspectRatio);break;case"center":e.x2=e.x1+(e.y2-e.y1)*i.aspectRatio,e.y2=e.y1+(e.x2-e.x1)/i.aspectRatio;const g=Math.max(0-e.x1,0),b=Math.max(e.x2-a.width,0),_=Math.max(e.y2-a.height,0),f=Math.max(0-e.y1,0);(g>0||b>0||_>0||f>0)&&(e.x1+=_*i.aspectRatio>g?_*i.aspectRatio:g,e.x2-=f*i.aspectRatio>b?f*i.aspectRatio:b,e.y1+=f*i.aspectRatio>b?f:b/i.aspectRatio,e.y2-=_*i.aspectRatio>g?_:g/i.aspectRatio)}}getClientX(n){return n.touches?.[0].clientX||n.clientX||0}getClientY(n){return n.touches?.[0].clientY||n.clientY||0}}return o.\u0275fac=function(n){return new(n||o)},o.\u0275prov=t.jDH({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();let so=(()=>{class o{constructor(){this.autoRotateSupported=function oo(){return new Promise(o=>{const s=new Image;s.onload=()=>{o(1===s.width&&2===s.height)},s.src="data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q=="})}()}loadImageFile(n,e){return n.arrayBuffer().then(a=>this.checkImageTypeAndLoadImageFromArrayBuffer(a,n.type,e))}checkImageTypeAndLoadImageFromArrayBuffer(n,e,a){return this.isValidImageType(e)?this.loadImageFromArrayBuffer(n,a):Promise.reject(new Error("Invalid image type"))}isValidImageType(n){return/image\/(png|jpg|jpeg|bmp|gif|tiff|webp|x-icon|vnd.microsoft.icon)/.test(n)}loadImageFromURL(n,e){return fetch(n).then(a=>a.arrayBuffer()).then(a=>this.loadImageFromArrayBuffer(a,e))}loadBase64Image(n,e){const a=this.base64ToArrayBuffer(n);return this.loadImageFromArrayBuffer(a,e)}base64ToArrayBuffer(n){n=n.replace(/^data\:([^\;]+)\;base64,/gim,"");const e=atob(n),a=e.length,i=new Uint8Array(a);for(let l=0;l<a;l++)i[l]=e.charCodeAt(l);return i.buffer}loadImageFromArrayBuffer(n,e){return new Promise((a,i)=>{const l=new Blob([n]),c=URL.createObjectURL(l),g=new Image;g.onload=()=>a({originalImage:g,originalObjectUrl:c,originalArrayBuffer:n}),g.onerror=i,g.src=c}).then(a=>this.transformImageFromArrayBuffer(a,e))}transformImageFromArrayBuffer(n,e){var a=this;return(0,vt.A)(function*(){const i=yield a.autoRotateSupported,l=yield function ao(o){switch("object"==typeof o&&(o=function io(o){const s=new DataView(o);if(65496!==s.getUint16(0,!1))return-2;const n=s.byteLength;let e=2;for(;e<n;){if(s.getUint16(e+2,!1)<=8)return-1;const a=s.getUint16(e,!1);if(e+=2,65505==a){if(1165519206!==s.getUint32(e+=2,!1))return-1;const i=18761==s.getUint16(e+=6,!1);e+=s.getUint32(e+4,i);const l=s.getUint16(e,i);e+=2;for(let c=0;c<l;c++)if(274==s.getUint16(e+12*c,i))return s.getUint16(e+12*c+8,i)}else{if(65280&~a)break;e+=s.getUint16(e,!1)}}return-1}(o)),o){case 2:return{rotate:0,flip:!0};case 3:return{rotate:2,flip:!1};case 4:return{rotate:2,flip:!0};case 5:return{rotate:1,flip:!0};case 6:return{rotate:1,flip:!1};case 7:return{rotate:3,flip:!0};case 8:return{rotate:3,flip:!1};default:return{rotate:0,flip:!1}}}(i?-1:n.originalArrayBuffer);return n.originalImage&&n.originalImage.complete?a.transformLoadedImage({original:{objectUrl:n.originalObjectUrl,image:n.originalImage,size:{width:n.originalImage.naturalWidth,height:n.originalImage.naturalHeight}},exifTransform:l},e):Promise.reject(new Error("No image loaded"))})()}transformLoadedImage(n,e){var a=this;return(0,vt.A)(function*(){const i=e.canvasRotation+n.exifTransform.rotate,l={width:n.original.image.naturalWidth,height:n.original.image.naturalHeight};if(0===i&&!n.exifTransform.flip&&!e.containWithinAspectRatio)return{original:{objectUrl:n.original.objectUrl,image:n.original.image,size:{...l}},transformed:{objectUrl:n.original.objectUrl,image:n.original.image,size:{...l}},exifTransform:n.exifTransform};const c=a.getTransformedSize(l,n.exifTransform,e),g=document.createElement("canvas");g.width=c.width,g.height=c.height;const b=g.getContext("2d");b?.setTransform(n.exifTransform.flip?-1:1,0,0,1,g.width/2,g.height/2),b?.rotate(Math.PI*(i/2)),b?.drawImage(n.original.image,-l.width/2,-l.height/2);const _=yield new Promise(F=>g.toBlob(F,e.format));if(!_)throw new Error("Failed to get Blob for transformed image.");const f=URL.createObjectURL(_),M=yield a.loadImageFromObjectUrl(f);return{original:{objectUrl:n.original.objectUrl,image:n.original.image,size:{...l}},transformed:{objectUrl:f,image:M,size:{width:M.width,height:M.height}},exifTransform:n.exifTransform}})()}loadImageFromObjectUrl(n){return new Promise((e,a)=>{const i=new Image;i.onload=()=>e(i),i.onerror=a,i.src=n})}getTransformedSize(n,e,a){const i=a.canvasRotation+e.rotate;if(a.containWithinAspectRatio){if(i%2){const c=n.height/a.aspectRatio;return{width:Math.max(n.height,n.width*a.aspectRatio),height:Math.max(n.width,c)}}{const c=n.width/a.aspectRatio;return{width:Math.max(n.width,n.height*a.aspectRatio),height:Math.max(n.height,c)}}}return i%2?{height:n.width,width:n.height}:{width:n.width,height:n.height}}}return o.\u0275fac=function(n){return new(n||o)},o.\u0275prov=t.jDH({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),ro=(()=>{class o{constructor(n,e,a,i,l,c){this.cropService=n,this.cropperPositionService=e,this.loadImageService=a,this.sanitizer=i,this.cd=l,this.hammerLoader=c,this.settings=new Hn,this.setImageMaxSizeRetries=0,this.resizedWhileHidden=!1,this.marginLeft="0px",this.maxSize={width:0,height:0},this.moveTypes=L,this.imageVisible=!1,this.output=this.settings.output,this.format=this.settings.format,this.transform={},this.maintainAspectRatio=this.settings.maintainAspectRatio,this.aspectRatio=this.settings.aspectRatio,this.resetCropOnAspectRatioChange=this.settings.resetCropOnAspectRatioChange,this.resizeToWidth=this.settings.resizeToWidth,this.resizeToHeight=this.settings.resizeToHeight,this.cropperMinWidth=this.settings.cropperMinWidth,this.cropperMinHeight=this.settings.cropperMinHeight,this.cropperMaxHeight=this.settings.cropperMaxHeight,this.cropperMaxWidth=this.settings.cropperMaxWidth,this.cropperStaticWidth=this.settings.cropperStaticWidth,this.cropperStaticHeight=this.settings.cropperStaticHeight,this.canvasRotation=this.settings.canvasRotation,this.initialStepSize=this.settings.initialStepSize,this.roundCropper=this.settings.roundCropper,this.onlyScaleDown=this.settings.onlyScaleDown,this.imageQuality=this.settings.imageQuality,this.autoCrop=this.settings.autoCrop,this.backgroundColor=this.settings.backgroundColor,this.containWithinAspectRatio=this.settings.containWithinAspectRatio,this.hideResizeSquares=this.settings.hideResizeSquares,this.allowMoveImage=!1,this.cropper={x1:-100,y1:-100,x2:1e4,y2:1e4},this.alignImage=this.settings.alignImage,this.disabled=!1,this.hidden=!1,this.imageCropped=new t.bkB,this.startCropImage=new t.bkB,this.imageLoaded=new t.bkB,this.cropperReady=new t.bkB,this.loadImageFailed=new t.bkB,this.transformChange=new t.bkB,this.reset()}ngOnChanges(n){this.onChangesUpdateSettings(n),this.onChangesInputImage(n),this.loadedImage?.original.image.complete&&(n.containWithinAspectRatio||n.canvasRotation)&&this.loadImageService.transformLoadedImage(this.loadedImage,this.settings).then(e=>this.setLoadedImage(e)).catch(e=>this.loadImageError(e)),(n.cropper||n.maintainAspectRatio||n.aspectRatio)&&(this.setMaxSize(),this.setCropperScaledMinSize(),this.setCropperScaledMaxSize(),!this.maintainAspectRatio||!this.resetCropOnAspectRatioChange&&this.aspectRatioIsCorrect()||!n.maintainAspectRatio&&!n.aspectRatio?n.cropper&&(this.checkCropperPosition(!1),this.doAutoCrop()):this.resetCropperPosition(),this.cd.markForCheck()),n.transform&&(this.transform=this.transform||{},this.setCssTransform(),this.doAutoCrop(),this.cd.markForCheck()),n.hidden&&this.resizedWhileHidden&&!this.hidden&&setTimeout(()=>{this.onResize(),this.resizedWhileHidden=!1})}onChangesUpdateSettings(n){this.settings.setOptionsFromChanges(n),this.settings.cropperStaticHeight&&this.settings.cropperStaticWidth&&this.settings.setOptions({hideResizeSquares:!0,cropperMinWidth:this.settings.cropperStaticWidth,cropperMinHeight:this.settings.cropperStaticHeight,cropperMaxHeight:this.settings.cropperStaticHeight,cropperMaxWidth:this.settings.cropperStaticWidth,maintainAspectRatio:!1})}onChangesInputImage(n){(n.imageChangedEvent||n.imageURL||n.imageBase64||n.imageFile)&&this.reset(),n.imageChangedEvent&&this.isValidImageChangedEvent()&&this.loadImageFile(this.imageChangedEvent.target.files[0]),n.imageURL&&this.imageURL&&this.loadImageFromURL(this.imageURL),n.imageBase64&&this.imageBase64&&this.loadBase64Image(this.imageBase64),n.imageFile&&this.imageFile&&this.loadImageFile(this.imageFile)}isValidImageChangedEvent(){return this.imageChangedEvent?.target?.files?.length>0}setCssTransform(){const n=this.transform?.translateUnit||"%";this.safeTransformStyle=this.sanitizer.bypassSecurityTrustStyle(`translate(${this.transform.translateH||0}${n}, ${this.transform.translateV||0}${n}) scaleX(`+(this.transform.scale||1)*(this.transform.flipH?-1:1)+") scaleY("+(this.transform.scale||1)*(this.transform.flipV?-1:1)+") rotate("+(this.transform.rotate||0)+"deg)")}ngOnInit(){this.settings.stepSize=this.initialStepSize,this.activatePinchGesture()}reset(){this.imageVisible=!1,this.loadedImage=void 0,this.safeImgDataUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=",this.moveStart={active:!1,type:null,position:null,x1:0,y1:0,x2:0,y2:0,clientX:0,clientY:0},this.maxSize={width:0,height:0},this.cropper.x1=-100,this.cropper.y1=-100,this.cropper.x2=1e4,this.cropper.y2=1e4}loadImageFile(n){this.loadImageService.loadImageFile(n,this.settings).then(e=>this.setLoadedImage(e)).catch(e=>this.loadImageError(e))}loadBase64Image(n){this.loadImageService.loadBase64Image(n,this.settings).then(e=>this.setLoadedImage(e)).catch(e=>this.loadImageError(e))}loadImageFromURL(n){this.loadImageService.loadImageFromURL(n,this.settings).then(e=>this.setLoadedImage(e)).catch(e=>this.loadImageError(e))}setLoadedImage(n){this.loadedImage=n,this.safeImgDataUrl=this.sanitizer.bypassSecurityTrustResourceUrl(n.transformed.objectUrl),this.cd.markForCheck()}loadImageError(n){console.error(n),this.loadImageFailed.emit()}imageLoadedInView(){null!=this.loadedImage&&(this.imageLoaded.emit(this.loadedImage),this.setImageMaxSizeRetries=0,setTimeout(()=>this.checkImageMaxSizeRecursively()))}checkImageMaxSizeRecursively(){this.setImageMaxSizeRetries>40?this.loadImageFailed.emit():this.sourceImageLoaded()?(this.setMaxSize(),this.setCropperScaledMinSize(),this.setCropperScaledMaxSize(),this.resetCropperPosition(),this.cropperReady.emit({...this.maxSize}),this.cd.markForCheck()):(this.setImageMaxSizeRetries++,setTimeout(()=>this.checkImageMaxSizeRecursively(),50))}sourceImageLoaded(){return this.sourceImage?.nativeElement?.offsetWidth>0}onResize(){this.loadedImage&&(this.hidden?this.resizedWhileHidden=!0:(this.resizeCropperPosition(),this.setMaxSize(),this.setCropperScaledMinSize(),this.setCropperScaledMaxSize()))}activatePinchGesture(){var n=this;return(0,vt.A)(function*(){yield n.hammerLoader?.();const e=window?.Hammer||null;if(e){const a=new e(n.wrapper.nativeElement);a.get("pinch").set({enable:!0}),a.on("pinchmove",n.onPinch.bind(n)),a.on("pinchend",n.pinchStop.bind(n)),a.on("pinchstart",n.startPinch.bind(n))}else(0,t.naY)()&&console.warn("[NgxImageCropper] Could not find HammerJS - Pinch Gesture won't work")})()}resizeCropperPosition(){const n=this.sourceImage.nativeElement;(this.maxSize.width!==n.offsetWidth||this.maxSize.height!==n.offsetHeight)&&(this.cropper.x1=this.cropper.x1*n.offsetWidth/this.maxSize.width,this.cropper.x2=this.cropper.x2*n.offsetWidth/this.maxSize.width,this.cropper.y1=this.cropper.y1*n.offsetHeight/this.maxSize.height,this.cropper.y2=this.cropper.y2*n.offsetHeight/this.maxSize.height)}resetCropperPosition(){this.cropperPositionService.resetCropperPosition(this.sourceImage,this.cropper,this.settings),this.doAutoCrop(),this.imageVisible=!0}keyboardAccess(n){this.changeKeyboardStepSize(n),this.keyboardMoveCropper(n)}changeKeyboardStepSize(n){const e=+n.key;e>=1&&e<=9&&(this.settings.stepSize=e)}keyboardMoveCropper(n){if(!["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(n.key))return;const a=n.shiftKey?L.Resize:L.Move,i=n.altKey?function qn(o){switch(o){case"ArrowUp":return"bottom";case"ArrowRight":return"left";case"ArrowDown":return"top";default:return"right"}}(n.key):function Qn(o){switch(o){case"ArrowUp":return"top";case"ArrowRight":return"right";case"ArrowDown":return"bottom";default:return"left"}}(n.key),l=function Kn(o,s){switch(o){case"ArrowUp":return{clientX:0,clientY:-1*s};case"ArrowRight":return{clientX:s,clientY:0};case"ArrowDown":return{clientX:0,clientY:s};default:return{clientX:-1*s,clientY:0}}}(n.key,this.settings.stepSize);n.preventDefault(),n.stopPropagation(),this.startMove({clientX:0,clientY:0},a,i),this.moveImg(l),this.moveStop()}startMove(n,e,a=null){this.disabled||this.moveStart?.active&&this.moveStart?.type===L.Pinch||e===L.Drag&&!this.allowMoveImage||(n.preventDefault&&n.preventDefault(),this.moveStart={active:!0,type:e,position:a,transform:{...this.transform},clientX:this.cropperPositionService.getClientX(n),clientY:this.cropperPositionService.getClientY(n),...this.cropper})}startPinch(n){this.safeImgDataUrl&&(n.preventDefault&&n.preventDefault(),this.moveStart={active:!0,type:L.Pinch,position:"center",clientX:this.cropper.x1+(this.cropper.x2-this.cropper.x1)/2,clientY:this.cropper.y1+(this.cropper.y2-this.cropper.y1)/2,...this.cropper})}moveImg(n){if(this.moveStart.active){if(n.stopPropagation&&n.stopPropagation(),n.preventDefault&&n.preventDefault(),this.moveStart.type===L.Move)this.cropperPositionService.move(n,this.moveStart,this.cropper),this.checkCropperPosition(!0);else if(this.moveStart.type===L.Resize)!this.cropperStaticWidth&&!this.cropperStaticHeight&&this.cropperPositionService.resize(n,this.moveStart,this.cropper,this.maxSize,this.settings),this.checkCropperPosition(!1);else if(this.moveStart.type===L.Drag){const e=this.cropperPositionService.getClientX(n)-this.moveStart.clientX,a=this.cropperPositionService.getClientY(n)-this.moveStart.clientY;this.transform={...this.transform,translateH:(this.moveStart.transform?.translateH||0)+e,translateV:(this.moveStart.transform?.translateV||0)+a},this.setCssTransform()}this.cd.detectChanges()}}onPinch(n){this.moveStart.active&&(n.stopPropagation&&n.stopPropagation(),n.preventDefault&&n.preventDefault(),this.moveStart.type===L.Pinch&&(this.cropperPositionService.resize(n,this.moveStart,this.cropper,this.maxSize,this.settings),this.checkCropperPosition(!1)),this.cd.detectChanges())}setMaxSize(){if(this.sourceImage){const n=this.sourceImage.nativeElement;this.maxSize.width=n.offsetWidth,this.maxSize.height=n.offsetHeight,this.marginLeft=this.sanitizer.bypassSecurityTrustStyle("calc(50% - "+this.maxSize.width/2+"px)")}}setCropperScaledMinSize(){this.loadedImage?.transformed?.image?(this.setCropperScaledMinWidth(),this.setCropperScaledMinHeight()):(this.settings.cropperScaledMinWidth=20,this.settings.cropperScaledMinHeight=20)}setCropperScaledMinWidth(){this.settings.cropperScaledMinWidth=this.cropperMinWidth>0?Math.max(20,this.cropperMinWidth/this.loadedImage.transformed.image.width*this.maxSize.width):20}setCropperScaledMinHeight(){this.settings.cropperScaledMinHeight=this.maintainAspectRatio?Math.max(20,this.settings.cropperScaledMinWidth/this.aspectRatio):this.cropperMinHeight>0?Math.max(20,this.cropperMinHeight/this.loadedImage.transformed.image.height*this.maxSize.height):20}setCropperScaledMaxSize(){if(this.loadedImage?.transformed?.image){const n=this.loadedImage.transformed.size.width/this.maxSize.width;this.settings.cropperScaledMaxWidth=this.cropperMaxWidth>20?this.cropperMaxWidth/n:this.maxSize.width,this.settings.cropperScaledMaxHeight=this.cropperMaxHeight>20?this.cropperMaxHeight/n:this.maxSize.height,this.maintainAspectRatio&&(this.settings.cropperScaledMaxWidth>this.settings.cropperScaledMaxHeight*this.aspectRatio?this.settings.cropperScaledMaxWidth=this.settings.cropperScaledMaxHeight*this.aspectRatio:this.settings.cropperScaledMaxWidth<this.settings.cropperScaledMaxHeight*this.aspectRatio&&(this.settings.cropperScaledMaxHeight=this.settings.cropperScaledMaxWidth/this.aspectRatio))}else this.settings.cropperScaledMaxWidth=this.maxSize.width,this.settings.cropperScaledMaxHeight=this.maxSize.height}checkCropperPosition(n=!1){this.cropper.x1<0&&(this.cropper.x2-=n?this.cropper.x1:0,this.cropper.x1=0),this.cropper.y1<0&&(this.cropper.y2-=n?this.cropper.y1:0,this.cropper.y1=0),this.cropper.x2>this.maxSize.width&&(this.cropper.x1-=n?this.cropper.x2-this.maxSize.width:0,this.cropper.x2=this.maxSize.width),this.cropper.y2>this.maxSize.height&&(this.cropper.y1-=n?this.cropper.y2-this.maxSize.height:0,this.cropper.y2=this.maxSize.height)}moveStop(){this.moveStart.active&&(this.moveStart.active=!1,this.moveStart?.type===L.Drag?this.transformChange.emit(this.transform):this.doAutoCrop())}pinchStop(){this.moveStart.active&&(this.moveStart.active=!1,this.doAutoCrop())}doAutoCrop(){this.autoCrop&&this.crop()}crop(n=this.settings.output){if(null!=this.loadedImage?.transformed?.image){if(this.startCropImage.emit(),"blob"===n)return this.cropToBlob();if("base64"===n)return this.cropToBase64()}return null}cropToBlob(){const n=this.cropService.crop(this.sourceImage,this.loadedImage,this.cropper,this.settings,"blob");return n?Promise.resolve(n).then(e=>(this.imageCropped.emit(e),n)):null}cropToBase64(){const n=this.cropService.crop(this.sourceImage,this.loadedImage,this.cropper,this.settings,"base64");return n?(this.imageCropped.emit(n),n):null}aspectRatioIsCorrect(){return(this.cropper.x2-this.cropper.x1)/(this.cropper.y2-this.cropper.y1)===this.aspectRatio}}return o.\u0275fac=function(n){return new(n||o)(t.rXU(to),t.rXU(eo),t.rXU(so),t.rXU(ee.up),t.rXU(t.gRc),t.rXU(ee.Bn,8))},o.\u0275cmp=t.VBU({type:o,selectors:[["image-cropper"]],viewQuery:function(n,e){if(1&n&&(t.GBs(Un,7),t.GBs(Vn,5)),2&n){let a;t.mGM(a=t.lsd())&&(e.wrapper=a.first),t.mGM(a=t.lsd())&&(e.sourceImage=a.first)}},hostVars:6,hostBindings:function(n,e){1&n&&t.bIt("resize",function(){return e.onResize()},!1,t.tSv)("mousemove",function(i){return e.moveImg(i)},!1,t.EBC)("touchmove",function(i){return e.moveImg(i)},!1,t.EBC)("mouseup",function(){return e.moveStop()},!1,t.EBC)("touchend",function(){return e.moveStop()},!1,t.EBC),2&n&&(t.xc7("text-align",e.alignImage),t.AVh("disabled",e.disabled)("ngx-ix-hidden",e.hidden))},inputs:{imageChangedEvent:"imageChangedEvent",imageURL:"imageURL",imageBase64:"imageBase64",imageFile:"imageFile",imageAltText:"imageAltText",output:"output",format:"format",transform:"transform",maintainAspectRatio:"maintainAspectRatio",aspectRatio:"aspectRatio",resetCropOnAspectRatioChange:"resetCropOnAspectRatioChange",resizeToWidth:"resizeToWidth",resizeToHeight:"resizeToHeight",cropperMinWidth:"cropperMinWidth",cropperMinHeight:"cropperMinHeight",cropperMaxHeight:"cropperMaxHeight",cropperMaxWidth:"cropperMaxWidth",cropperStaticWidth:"cropperStaticWidth",cropperStaticHeight:"cropperStaticHeight",canvasRotation:"canvasRotation",initialStepSize:"initialStepSize",roundCropper:"roundCropper",onlyScaleDown:"onlyScaleDown",imageQuality:"imageQuality",autoCrop:"autoCrop",backgroundColor:"backgroundColor",containWithinAspectRatio:"containWithinAspectRatio",hideResizeSquares:"hideResizeSquares",allowMoveImage:"allowMoveImage",cropper:"cropper",alignImage:"alignImage",disabled:"disabled",hidden:"hidden"},outputs:{imageCropped:"imageCropped",startCropImage:"startCropImage",imageLoaded:"imageLoaded",cropperReady:"cropperReady",loadImageFailed:"loadImageFailed",transformChange:"transformChange"},features:[t.OA$],decls:5,vars:10,consts:[["wrapper",""],["sourceImage",""],["class","ngx-ic-source-image",3,"src","visibility","transform","ngx-ic-draggable","load","mousedown","touchstart","error",4,"ngIf"],[1,"ngx-ic-overlay"],["class","ngx-ic-cropper","tabindex","0",3,"ngx-ic-round","top","left","width","height","margin-left","visibility","keydown",4,"ngIf"],[1,"ngx-ic-source-image",3,"load","mousedown","touchstart","error","src"],["tabindex","0",1,"ngx-ic-cropper",3,"keydown"],[1,"ngx-ic-move",3,"mousedown","touchstart"],[4,"ngIf"],[1,"ngx-ic-resize","ngx-ic-topleft",3,"mousedown","touchstart"],[1,"ngx-ic-square"],[1,"ngx-ic-resize","ngx-ic-top"],[1,"ngx-ic-resize","ngx-ic-topright",3,"mousedown","touchstart"],[1,"ngx-ic-resize","ngx-ic-right"],[1,"ngx-ic-resize","ngx-ic-bottomright",3,"mousedown","touchstart"],[1,"ngx-ic-resize","ngx-ic-bottom"],[1,"ngx-ic-resize","ngx-ic-bottomleft",3,"mousedown","touchstart"],[1,"ngx-ic-resize","ngx-ic-left"],[1,"ngx-ic-resize-bar","ngx-ic-top",3,"mousedown","touchstart"],[1,"ngx-ic-resize-bar","ngx-ic-right",3,"mousedown","touchstart"],[1,"ngx-ic-resize-bar","ngx-ic-bottom",3,"mousedown","touchstart"],[1,"ngx-ic-resize-bar","ngx-ic-left",3,"mousedown","touchstart"]],template:function(n,e){1&n&&(t.j41(0,"div",null,0),t.DNE(2,Xn,2,8,"img",2),t.nrm(3,"div",3),t.DNE(4,Jn,3,15,"div",4),t.k0s()),2&n&&(t.xc7("background",e.imageVisible&&e.backgroundColor),t.R7$(2),t.Y8G("ngIf",e.safeImgDataUrl),t.R7$(),t.xc7("width",e.maxSize.width,"px")("height",e.maxSize.height,"px")("margin-left","center"===e.alignImage?e.marginLeft:null),t.R7$(),t.Y8G("ngIf",e.imageVisible))},dependencies:[u.bT],styles:['[_nghost-%COMP%]{display:flex;position:relative;width:100%;max-width:100%;max-height:100%;overflow:hidden;padding:5px;text-align:center}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{width:100%;position:relative}[_nghost-%COMP%] > div[_ngcontent-%COMP%]   img.ngx-ic-source-image[_ngcontent-%COMP%]{max-width:100%;max-height:100%;transform-origin:center}[_nghost-%COMP%] > div[_ngcontent-%COMP%]   img.ngx-ic-source-image.ngx-ic-draggable[_ngcontent-%COMP%]{user-drag:none;-webkit-user-drag:none;user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;cursor:grab}[_nghost-%COMP%]   .ngx-ic-overlay[_ngcontent-%COMP%]{position:absolute;pointer-events:none;touch-action:none;outline:var(--cropper-overlay-color, white) solid 100vw;top:0;left:0}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]{position:absolute;display:flex;color:#53535c;background:transparent;outline:rgba(255,255,255,.3) solid 100vw;outline:var(--cropper-outline-color, rgba(255, 255, 255, .3)) solid 100vw;touch-action:none}@media (orientation: portrait){[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]{outline-width:100vh}}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]:after{position:absolute;content:"";inset:0;pointer-events:none;border:dashed 1px;opacity:.75;color:inherit;z-index:1}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-move[_ngcontent-%COMP%]{width:100%;cursor:move;border:1px solid rgba(255,255,255,.5)}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]:focus   .ngx-ic-move[_ngcontent-%COMP%]{border-color:#1e90ff;border-width:2px}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize[_ngcontent-%COMP%]{position:absolute;display:inline-block;line-height:6px;padding:8px;opacity:.85;z-index:1}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize[_ngcontent-%COMP%]   .ngx-ic-square[_ngcontent-%COMP%]{display:inline-block;background:#53535C;width:6px;height:6px;border:1px solid rgba(255,255,255,.5);box-sizing:content-box}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-topleft[_ngcontent-%COMP%]{top:-12px;left:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-top[_ngcontent-%COMP%]{top:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-topright[_ngcontent-%COMP%]{top:-12px;right:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-right[_ngcontent-%COMP%]{top:calc(50% - 12px);right:-12px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-bottomright[_ngcontent-%COMP%]{bottom:-12px;right:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-bottom[_ngcontent-%COMP%]{bottom:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-bottomleft[_ngcontent-%COMP%]{bottom:-12px;left:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-left[_ngcontent-%COMP%]{top:calc(50% - 12px);left:-12px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar[_ngcontent-%COMP%]{position:absolute;z-index:1}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-top[_ngcontent-%COMP%]{top:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-right[_ngcontent-%COMP%]{top:11px;right:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-bottom[_ngcontent-%COMP%]{bottom:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-left[_ngcontent-%COMP%]{top:11px;left:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]{outline-color:transparent}[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]:after{border-radius:100%;box-shadow:0 0 0 100vw #ffffff4d;box-shadow:0 0 0 100vw var(--cropper-outline-color, rgba(255, 255, 255, .3))}@media (orientation: portrait){[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]:after{box-shadow:0 0 0 100vh #ffffff4d;box-shadow:0 0 0 100vh var(--cropper-outline-color, rgba(255, 255, 255, .3))}}[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]   .ngx-ic-move[_ngcontent-%COMP%]{border-radius:100%}.disabled[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-move[_ngcontent-%COMP%]{display:none}.ngx-ix-hidden[_nghost-%COMP%]{display:none}'],changeDetection:0}),o})(),lo=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.$C({type:o}),o.\u0275inj=t.G2t({imports:[[u.MD]]}),o})();var oe=m(64198),co=m(9516);const mo=[[["","btnUpload",""]],[["","btnRemove",""]],[["","body",""]],[["","header",""]]],uo=["[btnUpload]","[btnRemove]","[body]","[header]"];function po(o,s){if(1&o){const n=t.RV6();t.j41(0,"div",6)(1,"div",7)(2,"div",8)(3,"div",9),t.SdG(4,3),t.k0s(),t.j41(5,"div",10)(6,"div",11)(7,"image-cropper",12),t.bIt("imageCropped",function(a){t.eBV(n);const i=t.XpG();return t.Njj(i.imageCropped(a))}),t.k0s()()(),t.j41(8,"div",13)(9,"button",14),t.bIt("click",function(){t.eBV(n);const a=t.XpG();return t.Njj(a.removeDialog())}),t.EFF(10),t.nI1(11,"mytranslate"),t.k0s(),t.j41(12,"button",15),t.bIt("click",function(){t.eBV(n);const a=t.XpG();return t.Njj(a.submitImage())}),t.EFF(13),t.nI1(14,"mytranslate"),t.k0s()()()()()}if(2&o){const n=t.XpG();t.Y8G("ngClass",n.isMobileWebView?"box-mobile-web-view":"box-web"),t.R7$(7),t.Y8G("imageChangedEvent",n.imageChangedEvent)("maintainAspectRatio",!0)("aspectRatio",n.aspectRatio)("resizeToWidth",n.widthResize)("cropperMinWidth",128),t.R7$(3),t.JRh(t.bMT(11,8,"lang_auto_huy")),t.R7$(3),t.JRh(t.bMT(14,10,"lang_auto_cap_nhat"))}}let _o=(()=>{var o;class s extends co.L{constructor(){super(...arguments),this.aspectRatio=1,this.widthResize=150,this.uploadComplete=new t.bkB,this.imageChangedEvent=void 0,this.imageFileName="",this.hasClicked=!1}checkPermissionCameraAndImagePicker(e){this.hasClicked=!1,this.onOpenFileDictionary();var a=this.commonService.appVersion();this.isMobileWebView&&a?(this.mobileWebviewService.sendSimpleMessage("CHECK_PERMISSION_IMAGE_PICKER"),this.mobileWebviewService.getWebviewPermissionImagePicker().subscribe(i=>{this.hasClicked||(i?.url&&this.uploadComplete.emit({url:i.url}),this.hasClicked=!0)})):e.click()}fileChangeEvent(e){const i=e.target.files;if(i){if((0,oe.hD)(i[0]?.size)>=this.limitSize)return this.showErrorSnack(this.commonService.translateToKeyParam("lang_auto_vui_long_chon_tep_co_kich_thuoc_nho_hon",this.limitSize.toString(),"MB"));this.imageChangedEvent=e,this.imageFileName=i?.length?i[0]?.name:""}}imageCropped(e){fetch(e.objectUrl??"").then(a=>a.blob()).then(a=>{const i=new FileReader;i.onload=()=>{let c=this.b64toFile(i.result,this.imageFileName);this.saveImage=c},i.readAsDataURL(a)}).catch(a=>{console.error(this.commonService.translateToKeyParam("lang_auto_co_loi_xay_ra",a))})}submitImage(){const e=this.imageChangedEvent?.target;e.files=null,this.imageChangedEvent=void 0,this.saveImage&&this.uploadFile(this.saveImage,"").then(a=>{a&&this.uploadComplete.emit(a)})}removeDialog(){const e=this.imageChangedEvent?.target;e.files=null,this.imageChangedEvent=void 0}emitUploadComplete(e){}b64toFile(e,a){e=e.replace("data:image/png;base64,","");let c=window.atob(e),g=[];for(let _=0;_<c.length;_+=512){let f=c.slice(_,_+512),M=new Array(f.length);for(let S=0;S<f.length;S++)M[S]=f.charCodeAt(S);let F=new Uint8Array(M);g.push(F)}return new File(g,a,{type:"image/png"})}}return(o=s).\u0275fac=(()=>{let n;return function(a){return(n||(n=t.xGo(o)))(a||o)}})(),o.\u0275cmp=t.VBU({type:o,selectors:[["azt-upload-image-cropper"]],inputs:{aspectRatio:"aspectRatio",widthResize:"widthResize"},outputs:{uploadComplete:"uploadComplete"},standalone:!0,features:[t.Vt3,t.aNF],ngContentSelectors:uo,decls:10,vars:2,consts:[["formChoseFile",""],[1,"h-full"],["type","file","id","box-left-file-input",1,"form-control","file-input",2,"display","none",3,"change","cancel","accept"],[1,"flex","items-center","ml-0","sm:ml-3"],[1,"cursor-pointer",3,"click"],[3,"ngClass",4,"ngIf"],[3,"ngClass"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-body",2,"max-height","430px","overflow-y","auto"],[1,"img-container"],[3,"imageCropped","imageChangedEvent","maintainAspectRatio","aspectRatio","resizeToWidth","cropperMinWidth"],[1,"modal-footer"],["control-id","ControlID-2",1,"btn","btn-secondary","w-24","mr-2",3,"click"],["id","crop-button","control-id","ControlID-3",1,"btn","btn-primary","w-24",3,"click"]],template:function(e,a){if(1&e){const i=t.RV6();t.NAR(mo),t.j41(0,"div",1)(1,"input",2,0),t.bIt("change",function(c){return t.eBV(i),t.Njj(a.fileChangeEvent(c))})("cancel",function(c){return t.eBV(i),t.Njj(a.onCancelSelect(c))}),t.k0s(),t.j41(3,"div",3)(4,"div",4),t.bIt("click",function(){t.eBV(i);const c=t.sdS(2);return t.Njj(a.checkPermissionCameraAndImagePicker(c))}),t.SdG(5),t.k0s(),t.SdG(6,1),t.k0s(),t.j41(7,"div",4),t.bIt("click",function(){t.eBV(i);const c=t.sdS(2);return t.Njj(a.checkPermissionCameraAndImagePicker(c))}),t.SdG(8,2),t.k0s()(),t.DNE(9,po,15,12,"div",5)}2&e&&(t.R7$(),t.FS9("accept",a.fileType),t.R7$(8),t.Y8G("ngIf",a.imageChangedEvent))},dependencies:[lo,ro,u.MD,u.YU,u.bT,r.X1,h.iI,r.YN,p.wp,I.s,C.flO,v.L,x.Id,d.k],styles:[".source-image{margin:auto!important}.modal-dialog[_ngcontent-%COMP%]{max-width:500px;margin:auto}.box-web[_ngcontent-%COMP%]{position:fixed;left:0;top:0;z-index:9999;background:#303030b0;width:100%;height:100%;padding:20px}.box-mobile-web-view[_ngcontent-%COMP%]{position:fixed;left:0;top:0;z-index:9999;background:#303030b0;width:100%;height:100%;padding:20px;display:flex;align-items:center;justify-content:center}"]}),s})();var xt=m(39712);const go=o=>({src:o,type:"bigLogo"}),ho=o=>({src:o,type:"favicon"}),fo=o=>({src:o,type:"smallLogo"}),bo=o=>({src:o,type:"socialLogo"}),vo=()=>({standalone:!0}),xo=(o,s)=>({width:o,height:s}),Co=o=>[o],Io=()=>({"mr-2":!0});function yo(o,s){if(1&o&&t.nrm(0,"azt-loading-effect",3),2&o){const n=t.XpG();t.Y8G("currentStatusObj",n.statusObj)}}function ko(o,s){1&o&&t.eu8(0)}function Mo(o,s){1&o&&t.eu8(0)}function Oo(o,s){1&o&&t.eu8(0)}function jo(o,s){1&o&&t.eu8(0)}function So(o,s){if(1&o){const n=t.RV6();t.j41(0,"div",4)(1,"div",5),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s(),t.j41(4,"div",6),t.DNE(5,ko,1,0,"ng-container",7),t.k0s(),t.j41(6,"div",8),t.DNE(7,Mo,1,0,"ng-container",7),t.k0s(),t.j41(8,"div",8),t.DNE(9,Oo,1,0,"ng-container",7),t.k0s(),t.j41(10,"div",8),t.DNE(11,jo,1,0,"ng-container",7),t.k0s(),t.j41(12,"div",9)(13,"label",10),t.EFF(14),t.nI1(15,"mytranslate"),t.k0s(),t.j41(16,"div",11)(17,"input",12),t.nI1(18,"mytranslate"),t.mxI("ngModelChange",function(a){t.eBV(n);const i=t.XpG();return t.DH7(i.domainConfigObj.defaultPageTitle,a)||(i.domainConfigObj.defaultPageTitle=a),t.Njj(a)}),t.k0s()()(),t.j41(19,"div",9)(20,"div",13),t.EFF(21),t.nI1(22,"mytranslate"),t.k0s(),t.j41(23,"div",11)(24,"editor",14),t.nI1(25,"getTinyMceKey"),t.nI1(26,"getTinyMceConfig"),t.mxI("ngModelChange",function(a){t.eBV(n);const i=t.XpG();return t.DH7(i.domainConfigObj.welcomeTextAtLogin,a)||(i.domainConfigObj.welcomeTextAtLogin=a),t.Njj(a)}),t.k0s()()(),t.j41(27,"div",15)(28,"button",16),t.bIt("click",function(){t.eBV(n);const a=t.XpG();return t.Njj(a.saveConfigObj())}),t.EFF(29),t.nI1(30,"mytranslate"),t.k0s()()()}if(2&o){const n=t.XpG(),e=t.sdS(4);t.R7$(2),t.SpI(" ",t.bMT(3,18,"lang_business_config_logo_title")," "),t.R7$(3),t.Y8G("ngTemplateOutlet",e)("ngTemplateOutletContext",t.eq3(32,go,n.domainConfigObj.bigLogo)),t.R7$(2),t.Y8G("ngTemplateOutlet",e)("ngTemplateOutletContext",t.eq3(34,ho,n.domainConfigObj.favicon)),t.R7$(2),t.Y8G("ngTemplateOutlet",e)("ngTemplateOutletContext",t.eq3(36,fo,n.domainConfigObj.smallLogo)),t.R7$(2),t.Y8G("ngTemplateOutlet",e)("ngTemplateOutletContext",t.eq3(38,bo,n.domainConfigObj.socialLogo)),t.R7$(3),t.SpI(" ",t.bMT(15,20,"lang_azt_page_title")," "),t.R7$(3),t.FS9("placeholder",t.bMT(18,22,"lang_azt_enter_page_title")),t.R50("ngModel",n.domainConfigObj.defaultPageTitle),t.R7$(4),t.SpI(" ",t.bMT(22,24,"lang_business_config_welcome_text_at_login_page")," "),t.R7$(3),t.FS9("apiKey",t.bMT(25,26,"")),t.R50("ngModel",n.domainConfigObj.welcomeTextAtLogin),t.Y8G("ngModelOptions",t.lJ4(40,vo))("init",t.bMT(26,28,"upload_for_business_config")),t.R7$(5),t.SpI(" ",t.bMT(30,30,"lang_auto_luu")," ")}}function Ro(o,s){1&o&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&o&&(t.R7$(),t.JRh(t.bMT(2,1,"lang_business_config_big_logo_title")))}function To(o,s){1&o&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&o&&(t.R7$(),t.JRh(t.bMT(2,1,"lang_business_config_social_title")))}function Fo(o,s){1&o&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&o&&(t.R7$(),t.JRh(t.bMT(2,1,"lang_business_config_small_logo_title")))}function wo(o,s){1&o&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&o&&(t.R7$(),t.JRh(t.bMT(2,1,"lang_business_config_favicon_title")))}function Ao(o,s){1&o&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&o&&(t.R7$(),t.JRh(t.bMT(2,1,"lang_azt_note_big_logo")))}function zo(o,s){1&o&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&o&&(t.R7$(),t.JRh(t.bMT(2,1,"lang_azt_note_socialLogo")))}function Eo(o,s){1&o&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&o&&(t.R7$(),t.JRh(t.bMT(2,1,"lang_azt_note_small_logo")))}function Po(o,s){1&o&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&o&&(t.R7$(),t.JRh(t.bMT(2,1,"lang_azt_note_favicon")))}function Do(o,s){1&o&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&o&&(t.R7$(),t.JRh(t.bMT(2,1,"lang_business_config_big_logo_title")))}function Go(o,s){1&o&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&o&&(t.R7$(),t.JRh(t.bMT(2,1,"lang_business_config_social_title")))}function $o(o,s){1&o&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&o&&(t.R7$(),t.JRh(t.bMT(2,1,"lang_business_config_small_logo_title")))}function Bo(o,s){1&o&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&o&&(t.R7$(),t.JRh(t.bMT(2,1,"lang_business_config_favicon_title")))}function No(o,s){if(1&o){const n=t.RV6();t.j41(0,"div",6)(1,"div",13),t.DNE(2,Ro,3,3,"span",17)(3,To,3,3,"span",17)(4,Fo,3,3,"span",17)(5,wo,3,3,"span",17),t.k0s(),t.j41(6,"div",18)(7,"div",19),t.nrm(8,"img",20),t.nI1(9,"mycdn"),t.nI1(10,"getSystemDefaultLogo"),t.k0s(),t.j41(11,"azt-upload-image-cropper",21),t.bIt("uploadComplete",function(a){const i=t.eBV(n).type,l=t.XpG();return t.Njj(l.uploadNewLogo(i,a))}),t.j41(12,"div",22)(13,"button",23),t.nrm(14,"lucide-icon",24),t.EFF(15),t.nI1(16,"mytranslate"),t.k0s()(),t.j41(17,"div",25)(18,"button",26),t.bIt("click",function(){const a=t.eBV(n).type,i=t.XpG();return t.Njj(i.deleteLogo(a))}),t.nrm(19,"lucide-icon",27),t.j41(20,"span",28),t.EFF(21),t.nI1(22,"mytranslate"),t.k0s()()(),t.j41(23,"div",29)(24,"div",30),t.DNE(25,Ao,3,3,"span",17)(26,zo,3,3,"span",17)(27,Eo,3,3,"span",17)(28,Po,3,3,"span",17),t.k0s()(),t.j41(29,"div",31),t.DNE(30,Do,3,3,"span",17)(31,Go,3,3,"span",17)(32,$o,3,3,"span",17)(33,Bo,3,3,"span",17),t.k0s()()()()}if(2&o){const n=s.src,e=s.type,a=t.XpG();t.R7$(2),t.Y8G("ngIf","bigLogo"===e),t.R7$(),t.Y8G("ngIf","socialLogo"===e),t.R7$(),t.Y8G("ngIf","smallLogo"===e),t.R7$(),t.Y8G("ngIf","favicon"===e),t.R7$(2),t.Y8G("ngStyle",t.l_i(30,xo,"bigLogo"===e?"190px":"socialLogo"===e?"600px":"75px","socialLogo"===e?"315px":"auto")),t.R7$(),t.Y8G("src",n?t.bMT(9,22,n):t.bMT(10,24,"bigLogo"),t.B4B),t.R7$(3),t.Y8G("uploadToCdnMenu",a.allUploadToCdnMenuTypes.AVATAR)("fileType",t.eq3(33,Co,a.allUploadFileTypes.IMAGE))("limitSize",5)("widthResize","socialLogo"===e?600:150)("aspectRatio","bigLogo"===e?10/3:"socialLogo"===e?40/21:1),t.R7$(3),t.Y8G("ngClass",t.lJ4(35,Io)),t.R7$(),t.SpI(" ",t.bMT(16,26,"lang_auto_tai_len")," "),t.R7$(6),t.JRh(t.bMT(22,28,"lang_auto_xoa")),t.R7$(4),t.Y8G("ngIf","bigLogo"===e),t.R7$(),t.Y8G("ngIf","socialLogo"===e),t.R7$(),t.Y8G("ngIf","smallLogo"===e),t.R7$(),t.Y8G("ngIf","favicon"===e),t.R7$(2),t.Y8G("ngIf","bigLogo"===e),t.R7$(),t.Y8G("ngIf","socialLogo"===e),t.R7$(),t.Y8G("ngIf","smallLogo"===e),t.R7$(),t.Y8G("ngIf","favicon"===e)}}let Lo=(()=>{var o;class s extends y.H{deleteLogo(e){const a=this.commonService.myTranslateInstant("lang_business_config_are_your_sure_to_delete_this_logo");this.sAztDialogService.open(U.u,{data:{content:a,iconName:"trash-2"},restoreFocus:!1,width:"500px"}).afterClosed().subscribe(l=>{l&&("smallLogo"==e&&this.domainConfigObj&&(this.domainConfigObj.smallLogo=void 0),"bigLogo"==e&&this.domainConfigObj&&(this.domainConfigObj.bigLogo=void 0),"favicon"==e&&this.domainConfigObj&&(this.domainConfigObj.favicon=void 0),"socialLogo"==e&&this.domainConfigObj&&(this.domainConfigObj.socialLogo=void 0),this.saveConfigObj())})}uploadNewLogo(e,a){"smallLogo"==e&&this.domainConfigObj&&(this.domainConfigObj.smallLogo=a.url),"bigLogo"==e&&this.domainConfigObj&&(this.domainConfigObj.bigLogo=a.url),"favicon"==e&&this.domainConfigObj&&(this.domainConfigObj.favicon=a.url),"socialLogo"==e&&this.domainConfigObj&&(this.domainConfigObj.socialLogo=a.url),this.saveConfigObj()}saveConfigObj(){this.initStatusObj(),this.waitDestroy(this.domainConfigService.apiDomainConfigsPost(this.domainConfigObj).subscribe(e=>{if(!e.success)return this.errorStatusObj(e.message,!0);this.successStatusObj("lang_auto_luu_thanh_cong",!0)}))}initData(){this.initStatusObj(),this.waitDestroy(this.domainConfigService.apiDomainConfigsGet().subscribe(e=>{if(!e.success)return this.errorStatusObj(e.message,!0);e.data?.obj&&(this.domainConfigObj=e.data.obj,this.domainConfigObj.socialLogo||(this.domainConfigObj.socialLogo=this.domainConfigObj.bigLogo)),this.successStatusObj()}))}ngOnInit(){super.ngOnInit(),this.initData()}constructor(e,a){super(),this.domainConfigService=e,this.sAztDialogService=a,this.allUploadToCdnMenuTypes=xt.b8,this.allUploadFileTypes=xt.PO}}return(o=s).\u0275fac=function(e){return new(e||o)(t.rXU(B.K1),t.rXU(j.i))},o.\u0275cmp=t.VBU({type:o,selectors:[["app-business-info-configs"]],standalone:!0,features:[t.Vt3,t.aNF],decls:5,vars:2,consts:[["doneLoading",""],["uploadSection",""],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[1,"config-business-logo"],[1,"flex","items-center","border-b","border-slate-200/60","pb-5","mb-5","text-base","font-medium","dark:border-darkmode-400"],[1,"mt-0"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"mt-6"],[1,"mt-4"],["for","title",1,"font-medium"],[1,"mt-2"],["type","text","id","title",1,"form-control",3,"ngModelChange","ngModel","placeholder"],[1,"font-medium"],[3,"ngModelChange","ngModel","ngModelOptions","apiKey","init"],[1,"mt-4","pt-4","flex","items-center","border-t","border-slate-200","dark:border-darkmode-400"],[1,"btn","btn-primary","min-width-100","ml-auto",3,"click"],[4,"ngIf"],[1,"flex","flex-col","sm:flex-row","md:items-center","mt-1"],[1,"box","p-2","overflow-hidden","border","border-slate-200","dark:border-darkmode-400",3,"ngStyle"],["width","100%","height","100%",3,"src"],[3,"uploadComplete","uploadToCdnMenu","fileType","limitSize","widthResize","aspectRatio"],["btnUpload",""],[1,"btn","btn-sm","btn-outline-primary"],["name","upload","size","16",3,"ngClass"],["btnRemove","",1,"ml-2"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],["name","trash-2","size","16"],[1,"ml-1"],["body","",1,"ml-0","sm:ml-3","mt-2","sm:mt-0","mr-auto"],[1,"text-slate-500","mt-1","text-xs"],["header","",1,"font-medium","text-base","mr-auto"]],template:function(e,a){if(1&e&&t.DNE(0,yo,1,1,"azt-loading-effect",2)(1,So,31,41,"ng-template",null,0,t.C5r)(3,No,34,36,"ng-template",null,1,t.C5r),2&e){const i=t.sdS(2);t.Y8G("ngIf",a.statusObj.loading)("ngIfElse",i)}},dependencies:[p.yc,te.sv,te.xn,R.K,_o,u.MD,u.YU,u.bT,u.T3,u.B3,r.X1,r.me,r.BC,h.iI,r.YN,r.vS,p.nf,p.wp,I.s,C.flO,C.WGl,v.L,p.Vo,p.Hw,x.Id,d.k],encapsulation:2}),s})(),Yo=(()=>{var o;class s extends y.H{ngOnInit(){this.commonService.translateMetaData({title:"lang_business_config_title",image:"lang_cms_test_image"}),super.ngOnInit()}constructor(){super()}}return(o=s).\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.VBU({type:o,selectors:[["app-business-configs"]],standalone:!0,features:[t.Vt3,t.aNF],decls:12,vars:1,consts:[[3,"headerBackToLink"],[1,"azt-config-business-domain","mx-auto","mt-5",2,"max-width","1150px"],[1,"grid","grid-cols-12","gap-5","mt-5"],[1,"col-span-12"],[1,"setting-advanced","mt-5"],[1,"box","p-5","mt-3"],[1,"p-0"]],template:function(e,a){1&e&&(t.j41(0,"teacher-layout",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6),t.nrm(7,"app-business-billing-configs"),t.k0s()()(),t.j41(8,"div",4)(9,"div",5)(10,"div",6),t.nrm(11,"app-business-info-configs"),t.k0s()()()()()()()),2&e&&t.Y8G("headerBackToLink","/business/dashboard")},dependencies:[O.Q,Yn,Lo,u.MD,r.X1,h.iI,r.YN,I.s,C.flO,v.L,x.Id,d.k],encapsulation:2}),s})();var W=m(76627),Ct=m(47947),It=m(17178);class yt{static tuitionFeeValidator(s){const n=s;return n?!n.value||yt.validateTuitionFee(n.value)?(n.setErrors(null),null):(n.setErrors({wrongFormatTuitionFee:!0}),{wrongFormatTuitionFee:!0,identityRevealed:!0}):null}static validateTuitionFee(s){return s.match(/^\d{1,3}(\.\d{3})*$/)}}var P=m(73202),rt=m(93518);const Uo=()=>[];function Vo(o,s){1&o&&(t.j41(0,"div",19),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&o&&(t.R7$(),t.SpI("*",t.bMT(2,1,"lang_core_vui_long_nhap_ten_chuong_trinh"),""))}function Xo(o,s){if(1&o&&(t.j41(0,"mat-option",12),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&o){const n=s.$implicit;t.Y8G("value",n.id),t.R7$(),t.SpI(" ",t.bMT(2,2,n.key)," ")}}function Wo(o,s){1&o&&(t.j41(0,"div",19),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&o&&(t.R7$(),t.SpI("*",t.bMT(2,1,"lang_auto_vui_long_chon_khoi_hoc"),""))}function Jo(o,s){if(1&o&&(t.j41(0,"mat-option",20),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&o){const n=s.$implicit;t.Y8G("value",n.id)("hidden",43==n.id),t.R7$(),t.SpI(" ",t.bMT(2,3,n.key)," ")}}function Ho(o,s){1&o&&(t.j41(0,"div",19),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&o&&(t.R7$(),t.SpI("*",t.bMT(2,1,"lang_auto_vui_long_chon_mon_hoc"),""))}let ae=(()=>{var o;class s extends y.H{setListSubject(){let e=this.schoolAndLevelObjs.schoolLevelSubjectObjs.find(a=>this.form.controls.schoolLevelId.value==a.schoolLevel?.id);this.listSchoolSubjectObjs=e?.schoolSubjectObjs??[],this.form.controls.schoolSubjectId.setValue(this.listSchoolSubjectObjs.find(a=>a.id==this.form.controls.schoolSubjectId.value)?.id??0)}setValueAmount(){var e=this.commonService.formatMoney(this.form.controls.tuition.value??""),a=this.getPositionCaret()+(e.length-this.form.controls.tuition.value.length);this.form.controls.tuition.setValue(e),this.goToPositionCaret(a)}getPositionCaret(){try{return document.getElementById("tuition").selectionEnd??0}catch{return 0}}goToPositionCaret(e){try{document.getElementById("tuition").setSelectionRange(e,e)}catch{}}initData(){this.form.patchValue({educationalProgramName:this.educationalProgramObj?.name??"",schoolLevelId:this.educationalProgramObj?.schoolLevelId??0,schoolSubjectId:this.educationalProgramObj?.schoolSubjectId??0,tuition:(this.educationalProgramObj?.fee??0)>0?this.educationalProgramObj?.fee?.toString():"0",description:this.educationalProgramObj?.description??""}),this.setListSubject(),(this.educationalProgramObj?.fee?.toString().length??0)>3&&this.setValueAmount()}ngOnInit(){super.ngOnInit(),this.form=this.programForm.controls.generalFormGroup,this.avoidWarningError(()=>{this.initData()})}constructor(){super(),this.listSchoolSubjectObjs=[]}}return(o=s).\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.VBU({type:o,selectors:[["app-educational-program-general-info-form"]],inputs:{programForm:"programForm",schoolAndLevelObjs:"schoolAndLevelObjs",educationalProgramObj:"educationalProgramObj"},standalone:!0,features:[t.Vt3,t.aNF],decls:47,vars:48,consts:[["searchInListSchoolLevel","searchInList"],["searchInListSchoolSubject","searchInList"],[3,"formGroup"],[1,"mt-1"],["for","educationalProgramName",1,"form-label","font-medium","text-sm"],["id","educationalProgramName","formControlName","educationalProgramName","type","text",1,"form-control",3,"placeholder"],["class","text-xs text-danger mt-1",4,"ngIf"],[1,"mt-2"],["for","schoolLevelId",1,"form-label","font-medium","text-sm"],["appearance","outline"],["searchInList","","formControlName","schoolLevelId",3,"selectionChange"],[3,"formControl","placeholderLabel","noEntriesFoundLabel"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["for","schoolSubjectId",1,"form-label","font-medium","text-sm"],["searchInList","","formControlName","schoolSubjectId"],[3,"value","hidden",4,"ngFor","ngForOf"],["for","description",1,"form-label","font-medium","text-sm"],["formControlName","description",1,"description",3,"placeholder"],[1,"text-xs","text-danger","mt-1"],[3,"value","hidden"]],template:function(e,a){if(1&e){const i=t.RV6();t.j41(0,"form",2)(1,"div",2)(2,"div",3)(3,"label",4),t.EFF(4),t.nI1(5,"mytranslate"),t.k0s(),t.nrm(6,"input",5),t.nI1(7,"mytranslate"),t.DNE(8,Vo,3,3,"div",6),t.k0s(),t.j41(9,"div",7)(10,"label",8),t.EFF(11),t.nI1(12,"mytranslate"),t.k0s(),t.j41(13,"mat-form-field",9)(14,"mat-select",10,0),t.bIt("selectionChange",function(){return t.eBV(i),t.Njj(a.setListSubject())}),t.j41(16,"mat-option"),t.nrm(17,"ngx-mat-select-search",11),t.nI1(18,"mytranslate"),t.nI1(19,"mytranslate"),t.k0s(),t.j41(20,"mat-option",12),t.EFF(21),t.nI1(22,"mytranslate"),t.k0s(),t.DNE(23,Xo,3,4,"mat-option",13),t.k0s()(),t.DNE(24,Wo,3,3,"div",6),t.k0s(),t.j41(25,"div",7)(26,"label",14),t.EFF(27),t.nI1(28,"mytranslate"),t.k0s(),t.j41(29,"mat-form-field",9)(30,"mat-select",15,1)(32,"mat-option"),t.nrm(33,"ngx-mat-select-search",11),t.nI1(34,"mytranslate"),t.nI1(35,"mytranslate"),t.k0s(),t.j41(36,"mat-option",12),t.EFF(37),t.nI1(38,"mytranslate"),t.k0s(),t.DNE(39,Jo,3,5,"mat-option",16),t.k0s()(),t.DNE(40,Ho,3,3,"div",6),t.k0s(),t.j41(41,"div",7)(42,"label",17),t.EFF(43),t.nI1(44,"mytranslate"),t.k0s(),t.nrm(45,"textarea",18),t.nI1(46,"mytranslate"),t.k0s()()()}if(2&e){let i;const l=t.sdS(15),c=t.sdS(31);t.Y8G("formGroup",a.programForm),t.R7$(),t.Y8G("formGroup",a.form),t.R7$(3),t.SpI(" ",t.bMT(5,23,"lang_core_ten_chuong_trinh")," "),t.R7$(2),t.FS9("placeholder",t.bMT(7,25,"lang_core_nhap_ten_chuong_trinh")+" ..."),t.R7$(2),t.Y8G("ngIf",a.form.controls.educationalProgramName.errors),t.R7$(3),t.SpI(" ",t.bMT(12,27,"lang_auto_khoi_hoc")," "),t.R7$(6),t.FS9("placeholderLabel",t.bMT(18,29,"lang_search_by_name")),t.FS9("noEntriesFoundLabel",t.bMT(19,31,"lang_search_not_found")),t.Y8G("formControl",l.searchControl),t.R7$(3),t.Y8G("value",0),t.R7$(),t.SpI("---",t.bMT(22,33,"lang_auto_chon_khoi"),""),t.R7$(2),t.Y8G("ngForOf",l.filter(l.mergeSchoolLevel(null!==(i=null==a.schoolAndLevelObjs?null:a.schoolAndLevelObjs.schoolLevelSubjectObjs)&&void 0!==i?i:t.lJ4(47,Uo)),"key")),t.R7$(),t.Y8G("ngIf",a.form.controls.schoolLevelId.errors),t.R7$(3),t.SpI(" ",t.bMT(28,35,"lang_auto_mon_hoc")," "),t.R7$(6),t.FS9("placeholderLabel",t.bMT(34,37,"lang_search_by_name")),t.FS9("noEntriesFoundLabel",t.bMT(35,39,"lang_search_not_found")),t.Y8G("formControl",c.searchControl),t.R7$(3),t.Y8G("value",0),t.R7$(),t.SpI(" ",t.bMT(38,41,"lang_auto_---chon_mon")," "),t.R7$(2),t.Y8G("ngForOf",c.filter(a.listSchoolSubjectObjs,"key")),t.R7$(),t.Y8G("ngIf",a.form.controls.schoolSubjectId.errors),t.R7$(3),t.SpI(" ",t.bMT(44,43,"lang_auto_mo_ta")," "),t.R7$(2),t.FS9("placeholder",t.bMT(46,45,"lang_auto_nhap_noi_dung"))}},dependencies:[it.An,it.U9,Pt.x,u.MD,u.Sq,u.bT,r.X1,r.qT,r.me,r.BC,r.cb,r.l_,r.j4,r.JD,h.iI,r.YN,p.wp,I.s,_t.wT,gt.rl,Et.VO,C.flO,v.L,x.Id,d.k,st.t],styles:[".box-info[_ngcontent-%COMP%]{background:#fff;border-radius:5px;box-shadow:0 0 5px #d3d3d3;margin-top:5px}.description[_ngcontent-%COMP%]{min-height:100px;border-radius:5px;font-size:14px;width:100%}.btn-add-document[_ngcontent-%COMP%]{color:#2262ae}.lucide-x[_ngcontent-%COMP%]{stroke-width:4.5px;color:#2262ae}.box-session[_ngcontent-%COMP%]{background:#fff;border-radius:5px;box-shadow:0 0 5px #d3d3d3}.btn-add-session[_ngcontent-%COMP%]{color:#2262ae;border-radius:5px;padding:15px;background:#fff}.btn-clear-form-content[_ngcontent-%COMP%]{stroke-width:4.5px;color:gray;margin-left:-25px}.btn-add-session[_ngcontent-%COMP%]:hover{background:#fafafa}.box-image[_ngcontent-%COMP%]{height:91px;width:69px;border:2px solid lightgray;border-radius:3px;display:grid}.box-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:65px;max-height:87px;margin:auto}.input-name-book[_ngcontent-%COMP%]{height:25px;border-radius:5px;font-size:14px}.textarea-description[_ngcontent-%COMP%]{max-height:93px;min-height:93px;border-radius:5px;font-size:14px}.box-book[_ngcontent-%COMP%]{background-color:#ededed;border:none;border-radius:5px;padding:.5rem .5rem .1rem;min-width:100px}.scroll[_ngcontent-%COMP%]{overflow:auto}.scroll[_ngcontent-%COMP%]::-webkit-scrollbar{height:5px}.scroll[_ngcontent-%COMP%]::-webkit-scrollbar-track{-webkit-box-shadow:inset 0 0 6px rgba(0,0,0,.3);border-radius:10px}.scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:10px;background:#a9a9a9}.btn-danger[_ngcontent-%COMP%]{width:100%;padding:2px;margin-top:5px}.add-image-label[_ngcontent-%COMP%]{background:#87ceeb;display:flex;position:relative;bottom:48px;line-height:12px;width:40px;padding:5px;justify-content:center;align-items:center;margin:auto;font-size:10px;text-align:center;border-radius:2px}.icon-file-document[_ngcontent-%COMP%]{min-width:16px;max-width:16px;height:21px}.icon-file-document[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-left:-2px}.box-image[_ngcontent-%COMP%]   .btn-edit-image[_ngcontent-%COMP%]{bottom:79px!important;height:30px!important}.box-image[_ngcontent-%COMP%]:hover   .btn-edit-image[_ngcontent-%COMP%]{background:#767c7fbd!important;width:90%!important;height:30px!important;bottom:79px!important;color:#fff!important;font-weight:500!important}.box-image[_ngcontent-%COMP%]:hover   .btn-edit-image[_ngcontent-%COMP%]:hover{background:#596367bd!important}.btn-edit-image[_ngcontent-%COMP%]{background:none!important;color:transparent!important}.btn-edit-image[_ngcontent-%COMP%]   .loading-upload[_ngcontent-%COMP%]{color:#000!important}"]}),s})();var kt=m(53043),ie=m(23750),Dt=m(91584),Gt=m(40111);function Qo(o,s){if(1&o){const n=t.RV6();t.j41(0,"div",6)(1,"azt-document-type-file",7),t.bIt("click",function(){t.eBV(n);const a=t.XpG().$implicit,i=t.XpG();return t.Njj(i.previewDocumentFileDialog(a))}),t.k0s(),t.j41(2,"div",8)(3,"button",9),t.bIt("click",function(){t.eBV(n);const a=t.XpG().$implicit,i=t.XpG();return t.Njj(i.removeObj(a))}),t.nrm(4,"lucide-icon",10),t.k0s()()()}if(2&o){const n=t.XpG().$implicit;t.R7$(),t.Y8G("type",n.documentType)("name",n.name)("url",n.link)("showBorder",!1)("onlyOneLine",!0)("iconVerticalStyle","baseline")("customClass","w-4 h-4")("textWidth","90%")}}function qo(o,s){if(1&o&&(t.j41(0,"div"),t.DNE(1,Qo,5,8,"div",5),t.k0s()),2&o){const n=s.$implicit;t.R7$(),t.Y8G("ngIf",!n.willRemove)}}let Ko=(()=>{var o;class s extends y.H{uploadFileEmitted(e){this.listDocumentObjs.push({id:this.commonService.getVirtualIdWithoutInList(!0,this.listDocumentObjs.map(a=>a.id)),name:e.name??"",link:e.link??"",type:e.type??"",documentType:this.commonService.getEnumTypeWithDefault(P.d,e.type??"",P.d.unknown),groupType:this.commonService.getEnumTypeWithDefault(rt.k,e.groupType??"",rt.k.unknown),willRemove:!1}),this.listDocumentObjsChange.emit(this.listDocumentObjs)}removeObj(e){this.listDocumentObjs.map(a=>a.willRemove=a.id==e.id||a.willRemove),this.listDocumentObjsChange.emit(this.listDocumentObjs)}previewDocumentFileDialog(e){const a={name:e.name,mimes:this.sAztFileTypeService.getMineTypeByFileType(e.type),type:e.type,url:e.link};this.sAztDialogService.open(kt.V,{maxWidth:"100vw",maxHeight:"100vh",height:"100%",width:"100%",data:{fileOption:{...a,index:0},showDownloadIcon:!1},restoreFocus:!1})}ngOnInit(){super.ngOnInit()}constructor(e,a){super(),this.sAztDialogService=e,this.sAztFileTypeService=a,this.listDocumentObjsChange=new t.bkB}}return(o=s).\u0275fac=function(e){return new(e||o)(t.rXU(j.i),t.rXU(Gt.k))},o.\u0275cmp=t.VBU({type:o,selectors:[["app-educational-program-document-form"]],inputs:{listDocumentObjs:"listDocumentObjs"},outputs:{listDocumentObjsChange:"listDocumentObjsChange"},standalone:!0,features:[t.Vt3,t.aNF],decls:7,vars:5,consts:[[1,"mt-2","flex","justify-between"],["for","description",1,"text-sm","mb-1","items-center","font-medium"],[1,"flex","justify-end","btn-add-document"],[3,"emitFileDocument","isBtn"],[4,"ngFor","ngForOf"],["class","items-center mb-2 relative",4,"ngIf"],[1,"items-center","mb-2","relative"],[1,"clickable",3,"click","type","name","url","showBorder","onlyOneLine","iconVerticalStyle","customClass","textWidth"],[1,"flex","absolute","right-0",2,"width","13px","height","13px","top","3px"],[1,"btn","btn-sm","p-0","btn-danger-soft",3,"click"],["name","x","size","16"]],template:function(e,a){1&e&&(t.j41(0,"div",0)(1,"label",1),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s(),t.j41(4,"div",2)(5,"app-upload-document-for-session",3),t.bIt("emitFileDocument",function(l){return a.uploadFileEmitted(l)}),t.k0s()()(),t.DNE(6,qo,2,1,"div",4)),2&e&&(t.R7$(2),t.SpI(" ",t.bMT(3,3,"lang_testbank_document_list_header_title")," "),t.R7$(3),t.Y8G("isBtn",!1),t.R7$(),t.Y8G("ngForOf",a.listDocumentObjs))},dependencies:[ie.J,Dt.m,u.MD,u.Sq,u.bT,r.X1,h.iI,r.YN,p.wp,I.s,C.flO,C.WGl,v.L,x.Id,d.k],styles:[".box-info[_ngcontent-%COMP%]{background:#fff;border-radius:5px;box-shadow:0 0 5px #d3d3d3;margin-top:5px}.description[_ngcontent-%COMP%]{min-height:100px;border-radius:5px;font-size:14px;width:100%}.btn-add-document[_ngcontent-%COMP%]{color:#2262ae}.lucide-x[_ngcontent-%COMP%]{stroke-width:4.5px;color:#2262ae}.box-session[_ngcontent-%COMP%]{background:#fff;border-radius:5px;box-shadow:0 0 5px #d3d3d3}.btn-add-session[_ngcontent-%COMP%]{color:#2262ae;border-radius:5px;padding:15px;background:#fff}.btn-clear-form-content[_ngcontent-%COMP%]{stroke-width:4.5px;color:gray;margin-left:-25px}.btn-add-session[_ngcontent-%COMP%]:hover{background:#fafafa}.box-image[_ngcontent-%COMP%]{height:91px;width:69px;border:2px solid lightgray;border-radius:3px;display:grid}.box-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:65px;max-height:87px;margin:auto}.input-name-book[_ngcontent-%COMP%]{height:25px;border-radius:5px;font-size:14px}.textarea-description[_ngcontent-%COMP%]{max-height:93px;min-height:93px;border-radius:5px;font-size:14px}.box-book[_ngcontent-%COMP%]{background-color:#ededed;border:none;border-radius:5px;padding:.5rem .5rem .1rem;min-width:100px}.scroll[_ngcontent-%COMP%]{overflow:auto}.scroll[_ngcontent-%COMP%]::-webkit-scrollbar{height:5px}.scroll[_ngcontent-%COMP%]::-webkit-scrollbar-track{-webkit-box-shadow:inset 0 0 6px rgba(0,0,0,.3);border-radius:10px}.scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:10px;background:#a9a9a9}.btn-danger[_ngcontent-%COMP%]{width:100%;padding:2px;margin-top:5px}.add-image-label[_ngcontent-%COMP%]{background:#87ceeb;display:flex;position:relative;bottom:48px;line-height:12px;width:40px;padding:5px;justify-content:center;align-items:center;margin:auto;font-size:10px;text-align:center;border-radius:2px}.icon-file-document[_ngcontent-%COMP%]{min-width:16px;max-width:16px;height:21px}.icon-file-document[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-left:-2px}.box-image[_ngcontent-%COMP%]   .btn-edit-image[_ngcontent-%COMP%]{bottom:79px!important;height:30px!important}.box-image[_ngcontent-%COMP%]:hover   .btn-edit-image[_ngcontent-%COMP%]{background:#767c7fbd!important;width:90%!important;height:30px!important;bottom:79px!important;color:#fff!important;font-weight:500!important}.box-image[_ngcontent-%COMP%]:hover   .btn-edit-image[_ngcontent-%COMP%]:hover{background:#596367bd!important}.btn-edit-image[_ngcontent-%COMP%]{background:none!important;color:transparent!important}.btn-edit-image[_ngcontent-%COMP%]   .loading-upload[_ngcontent-%COMP%]{color:#000!important}"]}),s})();var Zo=m(20013);const ta=o=>[o];function ea(o,s){1&o&&(t.j41(0,"small",19),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&o&&(t.R7$(),t.SpI("*",t.bMT(2,1,"lang_core_vui_long_nhap_ten_sach"),""))}function na(o,s){if(1&o){const n=t.RV6();t.j41(0,"div",6)(1,"div",7)(2,"div",8)(3,"azt-upload-single-box",9),t.bIt("uploadComplete",function(a){const i=t.eBV(n).$implicit,l=t.XpG();return t.Njj(l.handleUploadComplete(a,i))}),t.j41(4,"div")(5,"div",10),t.nrm(6,"img",11),t.nI1(7,"coreModConvertCdnLinkOfGitHub"),t.nI1(8,"mycdn"),t.nI1(9,"mytranslate"),t.k0s(),t.j41(10,"div",12)(11,"div"),t.EFF(12),t.nI1(13,"mytranslate"),t.k0s()()()(),t.j41(14,"div",13),t.bIt("click",function(){const a=t.eBV(n).$implicit,i=t.XpG();return t.Njj(i.previewBookImageDialog(a))}),t.EFF(15),t.nI1(16,"mytranslate"),t.nI1(17,"mytranslate"),t.k0s()(),t.j41(18,"button",14),t.bIt("click",function(){const a=t.eBV(n).$implicit,i=t.XpG();return t.Njj(i.removeBookForm(a))}),t.EFF(19),t.nI1(20,"mytranslate"),t.k0s()(),t.j41(21,"div",15),t.nrm(22,"input",16),t.nI1(23,"mytranslate"),t.nrm(24,"textarea",17),t.nI1(25,"mytranslate"),t.DNE(26,ea,3,3,"small",18),t.k0s()()}if(2&o){const n=s.$implicit,e=t.XpG();t.Y8G("formGroup",n)("hidden",n.controls.willRemove.value),t.R7$(3),t.Y8G("uploadToCdnMenu",e.allUploadToCdnMenuTypes.BUSINESS_PLUGINS)("fileType",t.eq3(36,ta,e.allUploadFileTypes.IMAGE))("limitSize",e.limitSize),t.R7$(3),t.FS9("src",""==n.controls.iconLink.value?t.bMT(7,18,"images/business-book.svg"):t.bMT(8,20,n.controls.iconLink.value),t.B4B),t.FS9("alt",t.bMT(9,22,"lang_core_anh_sach")),t.R7$(4),t.Y8G("ngClass",""==n.controls.iconLink.value?"":"btn-edit-image"),t.R7$(2),t.SpI(" ",t.bMT(13,24,""==n.controls.iconLink.value?"lang_core_them_anh":"lang_auto_tai_len")," "),t.R7$(2),t.Y8G("hidden",""==n.controls.iconLink.value),t.R7$(),t.Lme(" ",t.bMT(16,26,"lang_test_market_view_question")," ",t.bMT(17,28,"lang_testbank_update_exam_image")," "),t.R7$(4),t.SpI(" ",t.bMT(20,30,"lang_button_delete")," "),t.R7$(3),t.FS9("placeholder",t.bMT(23,32,"lang_core_ten_sach")),t.Y8G("value",n.controls.name.value),t.R7$(2),t.FS9("placeholder",t.bMT(25,34,"lang_auto_mo_ta")),t.Y8G("value",n.controls.description.value),t.R7$(2),t.Y8G("ngIf",n.controls.name.invalid)}}let oa=(()=>{var o;class s extends y.H{previewBookImageDialog(e){this.sAztDialogService.open(kt.V,{maxWidth:"100vw",maxHeight:"100vh",height:"100%",width:"100%",data:{fileOption:{name:e.controls.name.value,mimes:"image/jpeg",url:e.controls.iconLink.value,index:-1}},restoreFocus:!1})}handleUploadComplete(e,a){a.controls.iconLink.setValue(e.url??"")}removeBookForm(e){e.patchValue({willRemove:!0,name:"empty"}),this.bookFormArray.controls.map(a=>a.controls.id.value==e.controls.id.value?e:a),this.programForm.controls.bookFormArray=this.bookFormArray,this.programForm.updateValueAndValidity()}addMoreBookForm(){this.bookFormArray.push(new r.gE({id:new r.MJ(this.commonService.getVirtualIdWithoutInList(!0,this.bookFormArray.getRawValue().map(e=>e.id)),{nonNullable:!0,validators:[r.k0.required]}),name:new r.MJ("",{nonNullable:!0,validators:[r.k0.required,nt.M.noWhiteSpace]}),description:new r.MJ("",{nonNullable:!0}),iconLink:new r.MJ("",{nonNullable:!0}),willRemove:new r.MJ(!1,{nonNullable:!0,validators:[r.k0.required]})})),this.programForm.controls.bookFormArray=this.bookFormArray,this.programForm.updateValueAndValidity()}initFormArray(){this.bookFormArray.clear(),this.bookObjs.forEach(e=>{this.bookFormArray.push(new r.gE({id:new r.MJ(e.id,{nonNullable:!0,validators:[r.k0.required]}),name:new r.MJ(e.name,{nonNullable:!0,validators:[r.k0.required,nt.M.noWhiteSpace]}),description:new r.MJ(e.description??"",{nonNullable:!0}),iconLink:new r.MJ(e.iconLink??"",{nonNullable:!0}),willRemove:new r.MJ(!1,{nonNullable:!0,validators:[r.k0.required]})}))})}ngOnInit(){super.ngOnInit(),this.bookFormArray=this.programForm.controls.bookFormArray,this.avoidWarningError(()=>{this.initFormArray()})}constructor(e){super(),this.sAztDialogService=e,this.allUploadToCdnMenuTypes=xt.b8,this.allUploadFileTypes=xt.PO,this.limitSize=5}}return(o=s).\u0275fac=function(e){return new(e||o)(t.rXU(j.i))},o.\u0275cmp=t.VBU({type:o,selectors:[["app-educational-program-book-form"]],inputs:{programForm:"programForm",bookObjs:"bookObjs"},standalone:!0,features:[t.Vt3,t.aNF],decls:11,vars:11,consts:[[1,"mt-3","flex","justify-between"],["for","description",1,"form-label","font-medium","text-sm"],["azt-track-service","add-or-edit-educational-program--eJ6MP8NK",1,"btn-add-document","text-sm","clickable",3,"click"],[3,"formGroup"],["formArrayName","bookFormArray"],["class","flex mt-2 box-book",3,"formGroup","hidden",4,"ngFor","ngForOf"],[1,"flex","mt-2","box-book",3,"formGroup","hidden"],[1,"pb-1"],[1,"box-image"],[3,"uploadComplete","uploadToCdnMenu","fileType","limitSize"],[1,"flex",2,"height","87px"],["id","blah",3,"src","alt"],["azt-track-service","add-or-edit-educational-program-ySondJc2qe",1,"add-image-label","clickable",2,"margin-bottom","10px",3,"ngClass"],["azt-track-service","add-or-edit-educational-program-4lu0PqnQg",1,"btn-edit-image","add-image-label","clickable",3,"click","hidden"],["azt-track-service","add-or-edit-educational-program-TGWpE3kwi6",1,"btn","btn-danger",3,"click"],[1,"ml-3",2,"width","100%"],["type","text","formControlName","name",1,"form-control","input-name-book","mb-1",3,"placeholder","value"],["formControlName","description",1,"form-control","textarea-description",3,"placeholder","value"],["class","text-danger text-left mt-1",4,"ngIf"],[1,"text-danger","text-left","mt-1"]],template:function(e,a){1&e&&(t.j41(0,"div",0)(1,"label",1),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s(),t.j41(4,"div",2),t.bIt("click",function(){return a.addMoreBookForm()}),t.EFF(5),t.nI1(6,"mytranslate"),t.nI1(7,"mytranslate"),t.k0s()(),t.j41(8,"form",3)(9,"div",4),t.DNE(10,na,27,38,"div",5),t.k0s()()),2&e&&(t.R7$(2),t.SpI(" ",t.bMT(3,5,"lang_core_sach")," "),t.R7$(3),t.Lme("+ ",t.bMT(6,7,"lang_button_add")," ",t.bMT(7,9,"lang_core_sach"),""),t.R7$(3),t.Y8G("formGroup",a.programForm),t.R7$(2),t.Y8G("ngForOf",a.bookFormArray.controls))},dependencies:[Zo.T,u.MD,u.YU,u.Sq,u.bT,r.X1,r.qT,r.me,r.BC,r.cb,r.j4,r.JD,r.v8,h.iI,r.YN,p.nf,p.wp,p.Vs,I.s,C.flO,v.L,x.Id,d.k,st.t],styles:[".box-info[_ngcontent-%COMP%]{background:#fff;border-radius:5px;box-shadow:0 0 5px #d3d3d3;margin-top:5px}.description[_ngcontent-%COMP%]{min-height:100px;border-radius:5px;font-size:14px;width:100%}.btn-add-document[_ngcontent-%COMP%]{color:#2262ae}.lucide-x[_ngcontent-%COMP%]{stroke-width:4.5px;color:#2262ae}.box-session[_ngcontent-%COMP%]{background:#fff;border-radius:5px;box-shadow:0 0 5px #d3d3d3}.btn-add-session[_ngcontent-%COMP%]{color:#2262ae;border-radius:5px;padding:15px;background:#fff}.btn-clear-form-content[_ngcontent-%COMP%]{stroke-width:4.5px;color:gray;margin-left:-25px}.btn-add-session[_ngcontent-%COMP%]:hover{background:#fafafa}.box-image[_ngcontent-%COMP%]{height:91px;width:69px;border:2px solid lightgray;border-radius:3px;display:grid}.box-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:65px;max-height:87px;margin:auto}.input-name-book[_ngcontent-%COMP%]{height:25px;border-radius:5px;font-size:14px}.textarea-description[_ngcontent-%COMP%]{max-height:93px;min-height:93px;border-radius:5px;font-size:14px}.box-book[_ngcontent-%COMP%]{background-color:#ededed;border:none;border-radius:5px;padding:.5rem .5rem .1rem;min-width:100px}.scroll[_ngcontent-%COMP%]{overflow:auto}.scroll[_ngcontent-%COMP%]::-webkit-scrollbar{height:5px}.scroll[_ngcontent-%COMP%]::-webkit-scrollbar-track{-webkit-box-shadow:inset 0 0 6px rgba(0,0,0,.3);border-radius:10px}.scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:10px;background:#a9a9a9}.btn-danger[_ngcontent-%COMP%]{width:100%;padding:2px;margin-top:5px}.add-image-label[_ngcontent-%COMP%]{background:#87ceeb;display:flex;position:relative;bottom:48px;line-height:12px;width:40px;padding:5px;justify-content:center;align-items:center;margin:auto;font-size:10px;text-align:center;border-radius:2px}.icon-file-document[_ngcontent-%COMP%]{min-width:16px;max-width:16px;height:21px}.icon-file-document[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-left:-2px}.box-image[_ngcontent-%COMP%]   .btn-edit-image[_ngcontent-%COMP%]{bottom:79px!important;height:30px!important}.box-image[_ngcontent-%COMP%]:hover   .btn-edit-image[_ngcontent-%COMP%]{background:#767c7fbd!important;width:90%!important;height:30px!important;bottom:79px!important;color:#fff!important;font-weight:500!important}.box-image[_ngcontent-%COMP%]:hover   .btn-edit-image[_ngcontent-%COMP%]:hover{background:#596367bd!important}.btn-edit-image[_ngcontent-%COMP%]{background:none!important;color:transparent!important}.btn-edit-image[_ngcontent-%COMP%]   .loading-upload[_ngcontent-%COMP%]{color:#000!important}"]}),s})();var aa=m(11002),ia=m(69135),sa=m(50589),ra=m(51113),se=m(59518),lt=m(47712);const la=o=>({flex:o}),ca=o=>({"flex mt-3":o}),ma=o=>[o],da=o=>({backto:o}),ua=()=>({"text-pending":!0}),pa=()=>({"text-primary":!0}),_a=o=>({"p-3":o});function ga(o,s){if(1&o){const n=t.RV6();t.j41(0,"lucide-icon",24),t.bIt("click",function(){t.eBV(n);const a=t.XpG().$implicit,i=t.XpG();return t.Njj(i.removeSessionForm(a))}),t.k0s()}2&o&&t.Y8G("size",16)}function ha(o,s){1&o&&(t.j41(0,"div",25)(1,"span"),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s()()),2&o&&(t.R7$(2),t.SpI("*",t.bMT(3,1,"lang_core_vui_long_nhap_noi_dung"),""))}function fa(o,s){if(1&o){const n=t.RV6();t.j41(0,"lucide-icon",31),t.bIt("click",function(){t.eBV(n);const a=t.XpG().$implicit,i=t.XpG().$implicit,l=t.XpG();return t.Njj(l.removeDescriptionForm(i,a))}),t.k0s()}2&o&&t.Y8G("size",16)}function ba(o,s){1&o&&(t.j41(0,"div",32)(1,"span"),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s()()),2&o&&(t.R7$(2),t.SpI("*",t.bMT(3,1,"lang_core_vui_long_nhap_noi_dung"),""))}function va(o,s){if(1&o&&(t.j41(0,"div",26)(1,"div",27),t.nrm(2,"input",28),t.nI1(3,"mytranslate"),t.DNE(4,fa,1,1,"lucide-icon",29),t.k0s(),t.DNE(5,ba,4,3,"div",30),t.k0s()),2&o){const n=s.$implicit,e=t.XpG().$implicit;t.Y8G("formGroup",n)("hidden",n.controls.willRemove.value),t.R7$(),t.Mz_("id","description-conten-session-",n.controls.id.value,""),t.R7$(),t.FS9("placeholder",t.bMT(3,7,"lang_core_nhap_noi_dung_buoi_hoc")),t.R7$(2),t.Y8G("ngIf",e.controls.totalDescriptionNotDeleted.value>1),t.R7$(),t.Y8G("ngIf",n.controls.content.errors)}}function xa(o,s){1&o&&(t.qex(0),t.j41(1,"div",42),t.nrm(2,"img",43),t.nI1(3,"coreModConvertCdnLinkOfGitHub"),t.k0s(),t.bVm()),2&o&&(t.R7$(2),t.Y8G("src",t.bMT(3,1,"images/type_file/unknown-file.svg"),t.B4B))}function Ca(o,s){1&o&&(t.qex(0),t.nrm(1,"lucide-icon",44),t.bVm()),2&o&&(t.R7$(),t.Y8G("ngClass",t.lJ4(1,ua)))}function Ia(o,s){1&o&&(t.qex(0),t.nrm(1,"lucide-icon",45),t.bVm()),2&o&&(t.R7$(),t.Y8G("ngClass",t.lJ4(1,pa)))}function ya(o,s){if(1&o&&(t.j41(0,"div",34)(1,"a",35),t.nI1(2,"navigationLocalize"),t.j41(3,"div",36)(4,"div",37),t.DNE(5,xa,4,3,"ng-container",38)(6,Ca,2,2,"ng-container",38)(7,Ia,2,2,"ng-container",38),t.k0s(),t.j41(8,"div",39)(9,"div",40)(10,"span",41,0),t.EFF(12),t.k0s()()()()()()),2&o){const n=t.sdS(11),e=t.XpG().$implicit,a=t.XpG(2);t.R7$(),t.Y8G("routerLink",t.eq3(11,ma,t.bMT(2,9,e.controls.type.value==a.allDocumentTypes.exam?"/admin/testbank/exam-results-list/0/"+(null==e.controls.refId?null:e.controls.refId.value)+"/0":"/admin/testbank/homework-results-list/0/"+e.controls.id.value+"/0")))("queryParams",t.eq3(13,da,a.currentUrl)),t.R7$(4),t.Y8G("ngIf",!e.controls.type.value),t.R7$(),t.Y8G("ngIf",e.controls.type.value==a.allDocumentTypes.exam),t.R7$(),t.Y8G("ngIf",e.controls.type.value==a.allDocumentTypes.homework),t.R7$(3),t.FS9("matTooltip",e.controls.name.value),t.Y8G("isDisabledTooltip",!1)("matTooltipDisabled",n.isDisabled),t.R7$(2),t.SpI(" ",e.controls.name.value," ")}}function ka(o,s){if(1&o&&(t.j41(0,"div",26),t.DNE(1,ya,13,15,"div",33),t.k0s()),2&o){const n=s.$implicit,e=t.XpG(2);t.Y8G("formGroup",n)("hidden",n.controls.willRemove.value),t.R7$(),t.Y8G("ngIf",n.controls.type.value===e.allDocumentTypes.exam||n.controls.type.value===e.allDocumentTypes.homework)}}function Ma(o,s){if(1&o){const n=t.RV6();t.j41(0,"div",47)(1,"azt-document-type-file",48),t.bIt("click",function(){t.eBV(n);const a=t.XpG().$implicit,i=t.XpG(2);return t.Njj(i.previewDocumentFileDialog(a))}),t.k0s(),t.j41(2,"button",49),t.bIt("click",function(){t.eBV(n);const a=t.XpG().$implicit,i=t.XpG().$implicit,l=t.XpG();return t.Njj(l.removeDocumentForm(i,a))}),t.nrm(3,"lucide-icon",50),t.k0s()()}if(2&o){const n=t.XpG().$implicit,e=t.XpG(2);t.Y8G("ngClass",t.eq3(9,_a,e.isMobileWebView)),t.R7$(),t.Y8G("type",n.controls.documentType.value)("name",n.controls.name.value)("url",n.controls.link.value)("showBorder",!1)("iconVerticalStyle","baseline")("customClass","w-4 h-4 image-fit")("textWidth","100%"),t.R7$(2),t.Y8G("size",16)}}function Oa(o,s){if(1&o&&(t.j41(0,"div",26),t.DNE(1,Ma,4,11,"div",46),t.k0s()),2&o){const n=s.$implicit,e=t.XpG(2);t.Y8G("formGroup",n)("hidden",n.controls.willRemove.value),t.R7$(),t.Y8G("ngIf",n.controls.type.value!==e.allDocumentTypes.exam&&n.controls.type.value!==e.allDocumentTypes.homework)}}function ja(o,s){if(1&o){const n=t.RV6();t.j41(0,"div",6)(1,"div",7)(2,"h3",8),t.EFF(3),t.nI1(4,"mytranslate"),t.k0s(),t.DNE(5,ga,1,1,"lucide-icon",9),t.k0s(),t.DNE(6,ha,4,3,"div",10)(7,va,6,9,"div",11),t.j41(8,"div",12)(9,"div",13)(10,"span",14),t.bIt("click",function(){const a=t.eBV(n).$implicit,i=t.XpG();return t.Njj(i.addMoreDescriptionForm(a))}),t.EFF(11),t.nI1(12,"mytranslate"),t.nI1(13,"mytranslate"),t.k0s()()(),t.j41(14,"div",15)(15,"div",16)(16,"span",17),t.EFF(17),t.nI1(18,"mytranslate"),t.k0s()(),t.j41(19,"div",18),t.DNE(20,ka,2,3,"div",11),t.j41(21,"div",19)(22,"a",20),t.bIt("click",function(){const a=t.eBV(n).index,i=t.XpG();return t.Njj(i.redirectToCreateNewDocument(a))}),t.j41(23,"span",21),t.EFF(24,"+"),t.k0s(),t.EFF(25),t.nI1(26,"mytranslate"),t.k0s()()()(),t.j41(27,"div",15)(28,"div",16)(29,"span",17),t.EFF(30),t.nI1(31,"mytranslate"),t.k0s()(),t.j41(32,"div",22),t.DNE(33,Oa,2,3,"div",11),t.j41(34,"div",19)(35,"app-upload-document-for-session",23),t.bIt("emitFileDocument",function(a){const i=t.eBV(n).$implicit,l=t.XpG();return t.Njj(l.uploadFileEmitted(a,i))}),t.j41(36,"span"),t.EFF(37),t.nI1(38,"mytranslate"),t.k0s()()()()()()}if(2&o){const n=s.$implicit,e=t.XpG();t.Y8G("formGroup",n)("hidden",n.controls.willRemove.value),t.R7$(3),t.Lme("",t.bMT(4,21,"lang_core_buoi")," ",n.controls.session.value,""),t.R7$(2),t.Y8G("ngIf",e.programForm.controls.totalSessionNotDeleted.value>1),t.R7$(),t.Y8G("ngIf",n.controls.totalDescriptionNotDeleted.value<=0),t.R7$(),t.Y8G("ngForOf",n.controls.descriptionObjs.controls),t.R7$(4),t.Lme(" + ",t.bMT(12,23,"lang_button_add")," ",t.bMT(13,25,"lang_auto_noi_dung").toLowerCase()," "),t.R7$(6),t.JRh(t.bMT(18,27,"lang_cms_auto_gen_test_exam_title")),t.R7$(2),t.Y8G("ngClass",t.eq3(35,la,!e.isMobileWebView)),t.R7$(),t.Y8G("ngForOf",n.controls.documentObjs.controls),t.R7$(2),t.HbH("btn btn-transparent w-48 block font-weight-400"),t.R7$(3),t.SpI(" ",t.bMT(26,29,"lang_business_assign_exams")," "),t.R7$(5),t.JRh(t.bMT(31,31,"lang_testbank_document_list_header_title")),t.R7$(2),t.Y8G("ngClass",t.eq3(37,ca,!e.isMobileWebView)),t.R7$(),t.Y8G("ngForOf",n.controls.documentObjs.controls),t.R7$(2),t.Y8G("isBtn",!0)("customClass"," font-weight-400"),t.R7$(2),t.JRh(t.bMT(38,33,"lang_core_dinh_kem_tai_lieu"))}}let Sa=(()=>{var o;class s extends y.H{previewDocumentFileDialog(e){const a={name:e.controls.name.value,mimes:this.sAztFileTypeService.getMineTypeByFileType(e.controls.type.value),type:e.controls.type.value,url:e.controls.link.value};this.sAztDialogService.open(kt.V,{maxWidth:"100vw",maxHeight:"100vh",height:"100%",width:"100%",data:{fileOption:{...a,index:0},showDownloadIcon:!1},restoreFocus:!1})}addNewSession(){let e=this.commonService.concatMultipleArray(this.sessionFormArray.controls.map(l=>l.controls.descriptionObjs).map(l=>l.controls.map(c=>c.controls.id.value))),a=this.sessionFormArray.controls.map(l=>l.controls.sessionId.value),i=new r.gE({id:new r.MJ(this.commonService.getVirtualIdWithoutInList(!0,e),{nonNullable:!0,validators:[r.k0.required]}),content:new r.MJ("",{nonNullable:!0,validators:[r.k0.required]}),willRemove:new r.MJ(!1,{nonNullable:!0,validators:[r.k0.required]})});this.sessionFormArray.push(new r.gE({sessionId:new r.MJ(this.commonService.getVirtualIdWithoutInList(!0,a),{nonNullable:!0,validators:[r.k0.required]}),session:new r.MJ(0,{nonNullable:!0,validators:[r.k0.required]}),documentObjs:new r.Yp([]),totalDocumentNotDeleted:new r.MJ(0,{nonNullable:!0,validators:[r.k0.required]}),descriptionObjs:new r.Yp([i],{validators:[r.k0.required,r.k0.minLength(1)]}),totalDescriptionNotDeleted:new r.MJ(1,{nonNullable:!0,validators:[r.k0.required]}),isUploadingImage:new r.MJ(!1,{nonNullable:!0,validators:[r.k0.required]}),willRemove:new r.MJ(!1,{nonNullable:!0,validators:[r.k0.required]})})),this.updateFormData()}removeSessionForm(e){e.controls.sessionId.value<0?this.sessionFormArray.controls=this.sessionFormArray.controls.filter(a=>a.controls.sessionId.value!=e.controls.sessionId.value):(e.controls.willRemove.setValue(!0),e.controls.descriptionObjs.controls.map(a=>{a.controls.content.setValue(a.controls.content.defaultValue&&""!=a.controls.content.defaultValue?a.controls.content.defaultValue:"remove")})),this.sessionFormArray.controls.map(a=>a.controls.sessionId.value==e.controls.sessionId.value?e:a),this.updateFormData()}addMoreDescriptionForm(e){let a=this.commonService.concatMultipleArray(this.sessionFormArray.controls.map(i=>i.controls.descriptionObjs).map(i=>i.controls.map(l=>l.controls.id.value)));e.controls.descriptionObjs.push(new r.gE({id:new r.MJ(this.commonService.getVirtualIdWithoutInList(!0,a),{nonNullable:!0,validators:[r.k0.required]}),content:new r.MJ("",{nonNullable:!0,validators:[r.k0.required]}),willRemove:new r.MJ(!1,{nonNullable:!0,validators:[r.k0.required]})})),this.sessionFormArray.controls.map(i=>i.controls.sessionId.value==e.controls.sessionId.value?e:i),this.updateFormData()}removeDescriptionForm(e,a){e.controls.descriptionObjs.controls.map(i=>{i.controls.willRemove.setValue(i.controls.id.value==a.controls.id.value||i.controls.willRemove.value),i.controls.content.setValue(i.controls.id.value==a.controls.id.value?i.controls.content.defaultValue&&""!=i.controls.content.defaultValue?i.controls.content.defaultValue:"remove":i.controls.content.value)}),this.sessionFormArray.controls.map(i=>i.controls.sessionId.value==e.controls.sessionId.value?e:i),this.updateFormData()}removeDocumentForm(e,a){e.controls.documentObjs.controls.map(i=>i.controls.willRemove.setValue(i.controls.id.value==a.controls.id.value||i.controls.willRemove.value)),this.sessionFormArray.controls.map(i=>i.controls.sessionId.value==e.controls.sessionId.value?e:i),this.updateFormData()}uploadFileEmitted(e,a){a&&this.addDataFormDocument({url:e.link,name:e.name,extension:e.type},e.groupType,a)}addDataFormDocument(e,a,i){i.controls.documentObjs.push(new r.gE({id:new r.MJ(this.commonService.getVirtualIdWithoutInList(!0,[]),{nonNullable:!0,validators:[r.k0.required]}),name:new r.MJ(e.name??"",{nonNullable:!0,validators:[r.k0.required]}),link:new r.MJ(e.url??"",{nonNullable:!0,validators:[r.k0.required]}),type:new r.MJ(e.extension??"",{nonNullable:!0,validators:[r.k0.required]}),documentType:new r.MJ(this.commonService.getEnumTypeWithDefault(P.d,e.extension??"",P.d.unknown),{nonNullable:!0,validators:[r.k0.required]}),groupType:new r.MJ(a,{nonNullable:!0}),willRemove:new r.MJ(!1,{nonNullable:!0,validators:[r.k0.required]})})),i.controls.isUploadingImage.setValue(!1),this.sessionFormArray.controls.map(c=>c.controls.sessionId.value==i.controls.sessionId.value?i:c),this.updateFormData()}redirectToCreateNewDocument(e){const a=this.programForm.getRawValue(),i=this.zipDataService.convertContentGzip(this.serializeJson(a));this.browserStorageService.saveSessionStorage(`${this.programFormService.key+this.educationalProgramObj?.id}`,i),this.myNavigationWithQueryString("/admin/testbank/create-new-document/0",`?backTo=${this.currentUrl}&programId=${this.educationalProgramObj?.id}&levelId=${this.educationalProgramObj?.schoolLevelId??0}&subjectId=${this.educationalProgramObj?.schoolSubjectId??0}&indexSession=${e}`)}initFormArray(){this.sessionFormArray.clear();const e=this.extractValueFromZipData();e?e.sessionFormArray.forEach(this.processItem.bind(this)):this.convertSessionDtoToSessionFormArray(this.sessionObjs).forEach(this.processItem.bind(this)),this.sessionObjs.length<=0&&!e?.sessionFormArray.length&&this.addNewSession(),this.updateFormData()}updateFormData(){let e=1;this.sessionFormArray.controls.forEach(a=>{a.controls.willRemove.value||(a.controls.session.setValue(e),e+=1),a.controls.totalDescriptionNotDeleted.setValue(a.controls.descriptionObjs.controls.filter(i=>!i.controls.willRemove.value).length),a.controls.totalDocumentNotDeleted.setValue(a.controls.documentObjs.controls.filter(i=>!i.controls.willRemove.value).length)}),this.programForm.controls.totalSessionNotDeleted.setValue(this.programForm.controls.sessionFormArray.controls.filter(a=>!a.controls.willRemove.value).length),this.programForm.controls.sessionFormArray=this.sessionFormArray,this.programForm.updateValueAndValidity()}extractValueFromZipData(){const e=this.browserStorageService.getSessionStorage(`${this.programFormService.key+this.educationalProgramObj?.id}`);if(!e)return;const a=this.zipDataService.decodeContentGzip(e);return this.castJsonToObj(a)}createDocumentFormGroup(e){return new r.gE({id:new r.MJ(e.id,{nonNullable:!0,validators:[r.k0.required]}),refId:new r.MJ(e.refId??0,{nonNullable:!0}),name:new r.MJ(e.name??"",{nonNullable:!0,validators:[r.k0.required]}),link:new r.MJ(e.link??"",{nonNullable:!0}),type:new r.MJ(e.type,{nonNullable:!0,validators:[r.k0.required]}),documentType:new r.MJ(this.commonService.getEnumTypeWithDefault(P.d,e.type,P.d.unknown),{nonNullable:!0,validators:[r.k0.required]}),groupType:new r.MJ(e.groupType??"",{nonNullable:!0}),willRemove:new r.MJ(!1,{nonNullable:!0,validators:[r.k0.required]})})}createDescriptionFormGroup(e){return new r.gE({id:new r.MJ(e.id,{nonNullable:!0,validators:[r.k0.required]}),content:new r.MJ(e.content,{nonNullable:!0,validators:[r.k0.required]}),willRemove:new r.MJ(!1,{nonNullable:!0,validators:[r.k0.required]})})}processItem(e){const a=e.documentObjs.filter(l=>l&&!l.willRemove).map(this.createDocumentFormGroup.bind(this)),i=e.descriptionObjs.filter(l=>document&&!l.willRemove).map(this.createDescriptionFormGroup.bind(this));this.sessionFormArray.push(new r.gE({sessionId:new r.MJ(e.sessionId,{nonNullable:!0,validators:[r.k0.required]}),session:new r.MJ(0,{nonNullable:!0,validators:[r.k0.required]}),documentObjs:new r.Yp(a),totalDocumentNotDeleted:new r.MJ(0,{nonNullable:!0,validators:[r.k0.required]}),descriptionObjs:new r.Yp(i,{validators:[r.k0.required,r.k0.minLength(1)]}),totalDescriptionNotDeleted:new r.MJ(i.length,{nonNullable:!0,validators:[r.k0.required]}),isUploadingImage:new r.MJ(!1,{nonNullable:!0,validators:[r.k0.required]}),willRemove:new r.MJ(!1,{nonNullable:!0,validators:[r.k0.required]})}))}convertSessionDtoToSessionFormArray(e){let a=[];return e.forEach(i=>{let l=[];i.documents.forEach(b=>{l.push({id:b.id,refId:b.refId,name:b.name??"",link:b.link,type:b.type,documentType:b.type,willRemove:!1})});let c=[];i.contents.forEach(b=>{c.push({id:b.id,content:b.content,willRemove:!1})}),a.push({sessionId:i.id,documentObjs:l,descriptionObjs:c,totalDescriptionNotDeleted:0,totalDocumentNotDeleted:0,session:i.sort,isUploadingImage:!1,willRemove:!1})}),a}ngDoCheck(){this.cd.detectChanges()}ngOnInit(){super.ngOnInit(),this.sessionFormArray=this.programForm.controls.sessionFormArray,this.avoidWarningError(()=>{this.initFormArray()})}constructor(e,a,i,l,c,g){super(),this.cd=e,this.sAztDialogService=a,this.sAztFileTypeService=i,this.browserStorageService=l,this.zipDataService=c,this.programFormService=g,this.sessionObjs=[],this.currentUrl=this.commonService.getCurrentUrlWithoutLocale(),this.allDocumentTypes=P.d}}return(o=s).\u0275fac=function(e){return new(e||o)(t.rXU(t.gRc),t.rXU(j.i),t.rXU(Gt.k),t.rXU(sa.z),t.rXU(ra.j),t.rXU(se.s))},o.\u0275cmp=t.VBU({type:o,selectors:[["app-educational-program-session-form"]],inputs:{programForm:"programForm",sessionObjs:"sessionObjs",educationalProgramObj:"educationalProgramObj"},standalone:!0,features:[t.Vt3,t.aNF],decls:7,vars:5,consts:[["c","isDisabled"],[3,"formGroup"],["formArrayName","sessionFormArray"],["class","box pt-3 pl-3 pr-3 mt-3",3,"formGroup","hidden",4,"ngFor","ngForOf"],[1,"flex","justify-center"],["azt-track-service","add-or-edit-educational-program-22QBASGLIe",1,"btn-add-session","mt-2","clickable",3,"click"],[1,"box","pt-3","pl-3","pr-3","mt-3",3,"formGroup","hidden"],[1,"flex"],[1,"text-md","font-medium","truncate","mr-auto"],["name","x","class","clickable ml-1",3,"size","click",4,"ngIf"],["class","text-xs font-medium text-danger ng-star-inserted mt-2",4,"ngIf"],[3,"formGroup","hidden",4,"ngFor","ngForOf"],[1,"flex","justify-start","py-2"],[1,"btn-add-document","text-sm","px-3"],["azt-track-service","add-or-edit-educational-program-izd-G_-kRf",1,"clickable",3,"click"],[1,"azt-answer"],[1,"strike"],[1,"uppercase","text-slate-600","text-xs"],[1,"items-center","mt-3","pb-3","scroll",3,"ngClass"],[1,"btn-add-document","text-sm"],["azt-track-service","session-form-7wsWmtscNU",2,"text-align","left",3,"click"],[1,"inline-block"],[1,"items-center","pb-3","scroll",3,"ngClass"],[3,"emitFileDocument","isBtn","customClass"],["name","x",1,"clickable","ml-1",3,"click","size"],[1,"text-xs","font-medium","text-danger","ng-star-inserted","mt-2"],[3,"formGroup","hidden"],[1,"flex","items-center",3,"id"],["type","text","formControlName","content",1,"form-control","mt-2","mb-2","pr-5",3,"placeholder"],["name","x","class","clickable btn-clear-form-content ml-1",3,"size","click",4,"ngIf"],["class","text-xs font-medium text-danger ng-star-inserted",4,"ngIf"],["name","x",1,"clickable","btn-clear-form-content","ml-1",3,"click","size"],[1,"text-xs","font-medium","text-danger","ng-star-inserted"],["class","flex items-center mr-4",4,"ngIf"],[1,"flex","items-center","mr-4"],["azt-track-service","session-form-uEv4oFbN4",3,"routerLink","queryParams"],[1,"flex","p-3"],[1,"flex","lg:mr-1","text-center",2,"align-items","center"],[4,"ngIf"],[1,"ml-1","text-left","mt-0",2,"align-self","center"],[1,"azt-student-name",2,"display","inline-grid"],[1,"whitespace-nowrap",3,"matTooltip","isDisabledTooltip","matTooltipDisabled"],[1,"w-4","h-4","font-medium","image-fit","flex-none"],["alt","unknown-icon",3,"src"],["name","file-check","size","16",3,"ngClass"],["name","file-text","size","16",3,"ngClass"],["class","flex items-center mr-4",3,"ngClass",4,"ngIf"],[1,"flex","items-center","mr-4",3,"ngClass"],[1,"clickable",3,"click","type","name","url","showBorder","iconVerticalStyle","customClass","textWidth"],[1,"btn","btn-sm","btn-danger-soft","p-0","ml-1",3,"click"],["name","x",3,"size"]],template:function(e,a){1&e&&(t.j41(0,"form",1)(1,"div",2),t.DNE(2,ja,39,39,"div",3),t.j41(3,"div",4)(4,"div",5),t.bIt("click",function(){return a.addNewSession()}),t.EFF(5),t.nI1(6,"mytranslate"),t.k0s()()()()),2&e&&(t.Y8G("formGroup",a.programForm),t.R7$(2),t.Y8G("ngForOf",a.sessionFormArray.controls),t.R7$(3),t.SpI("+ ",t.bMT(6,3,"lang_core_them_bui_hoc"),""))},dependencies:[ia.f,Dt.m,ie.J,p.F2,u.MD,u.YU,u.Sq,u.bT,r.X1,r.qT,r.me,r.BC,r.cb,r.j4,r.JD,r.v8,h.iI,h.Wk,r.YN,p.wp,p.Vs,I.s,lt.oV,C.flO,C.WGl,v.L,x.Id,d.k,st.t],styles:[".box-info[_ngcontent-%COMP%]{background:#fff;border-radius:5px;box-shadow:0 0 5px #d3d3d3;margin-top:5px}.description[_ngcontent-%COMP%]{min-height:100px;border-radius:5px;font-size:14px;width:100%}.btn-add-document[_ngcontent-%COMP%]{color:#2262ae}.lucide-x[_ngcontent-%COMP%]{stroke-width:4.5px;color:#2262ae}.box-session[_ngcontent-%COMP%]{background:#fff;border-radius:5px;box-shadow:0 0 5px #d3d3d3}.btn-add-session[_ngcontent-%COMP%]{color:#2262ae;border-radius:5px;padding:15px;background:#fff}.btn-clear-form-content[_ngcontent-%COMP%]{stroke-width:4.5px;color:gray;margin-left:-25px}.btn-add-session[_ngcontent-%COMP%]:hover{background:#fafafa}.box-image[_ngcontent-%COMP%]{height:91px;width:69px;border:2px solid lightgray;border-radius:3px;display:grid}.box-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:65px;max-height:87px;margin:auto}.input-name-book[_ngcontent-%COMP%]{height:25px;border-radius:5px;font-size:14px}.textarea-description[_ngcontent-%COMP%]{max-height:93px;min-height:93px;border-radius:5px;font-size:14px}.box-book[_ngcontent-%COMP%]{background-color:#ededed;border:none;border-radius:5px;padding:.5rem .5rem .1rem;min-width:100px}.scroll[_ngcontent-%COMP%]{overflow:auto}.scroll[_ngcontent-%COMP%]::-webkit-scrollbar{height:5px}.scroll[_ngcontent-%COMP%]::-webkit-scrollbar-track{-webkit-box-shadow:inset 0 0 6px rgba(0,0,0,.3);border-radius:10px}.scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:10px;background:#a9a9a9}.btn-danger[_ngcontent-%COMP%]{width:100%;padding:2px;margin-top:5px}.add-image-label[_ngcontent-%COMP%]{background:#87ceeb;display:flex;position:relative;bottom:48px;line-height:12px;width:40px;padding:5px;justify-content:center;align-items:center;margin:auto;font-size:10px;text-align:center;border-radius:2px}.icon-file-document[_ngcontent-%COMP%]{min-width:16px;max-width:16px;height:21px}.icon-file-document[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-left:-2px}.box-image[_ngcontent-%COMP%]   .btn-edit-image[_ngcontent-%COMP%]{bottom:79px!important;height:30px!important}.box-image[_ngcontent-%COMP%]:hover   .btn-edit-image[_ngcontent-%COMP%]{background:#767c7fbd!important;width:90%!important;height:30px!important;bottom:79px!important;color:#fff!important;font-weight:500!important}.box-image[_ngcontent-%COMP%]:hover   .btn-edit-image[_ngcontent-%COMP%]:hover{background:#596367bd!important}.btn-edit-image[_ngcontent-%COMP%]{background:none!important;color:transparent!important}.btn-edit-image[_ngcontent-%COMP%]   .loading-upload[_ngcontent-%COMP%]{color:#000!important}"]}),s})();var ht=m(65728),$t=m(87157),Bt=m(3826),re=m(93422);const Ra=o=>[o];function Ta(o,s){if(1&o&&t.nrm(0,"azt-loading-effect",3),2&o){const n=t.XpG();t.Y8G("currentStatusObj",n.statusObj)}}function Fa(o,s){if(1&o&&t.nrm(0,"app-educational-program-general-info-form",21),2&o){const n=t.XpG(2);t.Y8G("programForm",n.form)("educationalProgramObj",n.educationalProgramObj)("schoolAndLevelObjs",n.schoolAndLevelObjs)}}function wa(o,s){if(1&o&&t.nrm(0,"app-educational-program-book-form",22),2&o){const n=t.XpG(2);t.Y8G("programForm",n.form)("bookObjs",n.bookObjs)}}function Aa(o,s){1&o&&t.nrm(0,"azt-loading-ui",23)}function za(o,s){if(1&o){const n=t.RV6();t.j41(0,"form",4)(1,"div",5)(2,"div",6)(3,"div",7)(4,"div",8),t.DNE(5,Fa,1,3,"app-educational-program-general-info-form",9),t.j41(6,"app-educational-program-document-form",10),t.mxI("listDocumentObjsChange",function(a){t.eBV(n);const i=t.XpG();return t.DH7(i.generalDocumentObjs,a)||(i.generalDocumentObjs=a),t.Njj(a)}),t.k0s(),t.DNE(7,wa,1,2,"app-educational-program-book-form",11),t.nI1(8,"allowFeatureBusinessForUser"),t.nI1(9,"async"),t.k0s()(),t.j41(10,"div",12)(11,"div",13)(12,"h3",14),t.EFF(13),t.nI1(14,"mytranslate"),t.k0s(),t.j41(15,"flexed-on-the-top",15)(16,"a",16),t.nI1(17,"navigationLocalize"),t.EFF(18),t.nI1(19,"mytranslate"),t.k0s(),t.j41(20,"button",17),t.bIt("click",function(){t.eBV(n);const a=t.XpG();return t.Njj(a.saveEducationalProgram())}),t.DNE(21,Aa,1,0,"azt-loading-ui",18),t.EFF(22),t.nI1(23,"mytranslate"),t.k0s()()(),t.nrm(24,"app-educational-program-session-form",19),t.k0s()()()(),t.nrm(25,"azt-scroll-to-top-bottom",20)}if(2&o){const n=t.XpG();t.Y8G("formGroup",n.form),t.R7$(5),t.Y8G("ngIf",n.schoolAndLevelObjs),t.R7$(),t.R50("listDocumentObjs",n.generalDocumentObjs),t.R7$(),t.Y8G("ngIf",t.bMT(9,18,t.i5U(8,15,"training_center_student_book",!1))),t.R7$(6),t.SpI(" ",t.bMT(14,20,"lang_core_noi_dung_chuong_trinh")," "),t.R7$(2),t.Y8G("colorBackground","#f0f8ffe8"),t.R7$(),t.Y8G("routerLink",t.eq3(28,Ra,t.bMT(17,22,n.backLink))),t.R7$(2),t.JRh(t.bMT(19,24,"lang_cms_common_close_btn")),t.R7$(2),t.Y8G("disabled",n.form.invalid||n.isSaving),t.R7$(),t.Y8G("ngIf",n.isSaving),t.R7$(),t.SpI(" ",t.bMT(23,26,"lang_button_save")," "),t.R7$(2),t.Y8G("programForm",n.form)("sessionObjs",n.sessionObjs)("educationalProgramObj",n.educationalProgramObj),t.R7$(),t.Y8G("isScrollToTop",!0)}}let le=(()=>{var o;class s extends y.H{saveEducationalProgram(){let e=this.form.getRawValue(),a=[];if(null!=this.educationalProgramId){let _=this.educationalProgramId,f=e.sessionFormArray.filter(k=>k.willRemove&&k.sessionId>0).map(k=>k.sessionId),M=this.generalDocumentObjs.filter(k=>k.willRemove&&k.id>0).map(k=>k.id),F=this.commonService.concatMultipleArray(e.sessionFormArray.map(k=>k.documentObjs)).filter(k=>k.willRemove&&k.id>0).map(k=>k.id),S=e.sessionFormArray.map(k=>({sessionId:k.sessionId,contentIds:k.descriptionObjs.filter(J=>J.willRemove&&J.id>0).map(J=>J.id)})).filter(k=>k.contentIds.length>0),T=e.bookFormArray.filter(k=>k.willRemove&&k.id>0).map(k=>k.id),D=f.map(k=>this.programService.apiProgramsProgramIdSessionsSessionIdDelete(_,k)),G=M.map(k=>this.programService.apiProgramsProgramIdDocumentsDocumentIdDelete(_,k)),z=F.map(k=>this.programService.apiProgramsProgramIdDocumentsDocumentIdDelete(_,k)),mt=this.commonService.concatMultipleArray(S.map(k=>{let J=[];return k.contentIds.forEach(St=>{J.push(this.programService.apiProgramsProgramIdSessionsSessionIdContentsContentIdDelete(_,k.sessionId,St))}),J})),jt=T.map(k=>this.bookService.apiBooksIdDelete(k));a=this.commonService.concatMultipleArray([D,G,z,mt,jt])}let i=[];e.sessionFormArray.filter(_=>!_.willRemove).forEach(_=>{i.push({id:_.sessionId>0?_.sessionId:void 0,contents:_.descriptionObjs.filter(f=>!f.willRemove).map(f=>({id:f.id>0?f.id:void 0,content:f.content})),documents:_.documentObjs.filter(f=>!f.willRemove&&f.id<=0).map(f=>({refId:f.refId,name:f.name,link:f.link,type:f.type,groupType:f.groupType}))})});let l=this.generalDocumentObjs.filter(_=>!_.willRemove&&_.id<=0).map(_=>({name:_.name,link:_.link,type:_.type,groupType:_.groupType})),c=e.bookFormArray.filter(_=>!_.willRemove).map(_=>({id:_.id>0?_.id:void 0,name:_.name,description:_.description,iconLink:_.iconLink}));var g={name:e.generalFormGroup.educationalProgramName,fee:Number(e.generalFormGroup.tuition.replace(/\./g,"")??"0"),schoolLevelId:e.generalFormGroup.schoolLevelId,schoolSubjectId:e.generalFormGroup.schoolSubjectId,description:e.generalFormGroup.description,sessions:i,documents:l,books:c};this.isSaving=!0;let b=(0,W.z)([...a,this.programService.apiProgramsIdPut(this.educationalProgramId??0,g)]);this.waitDestroy(this.wrapApiResponse(b).subscribe(_=>{if(this.isSaving=!1,!_.success)return this.errorStatusObj(_.message,!0);this.successStatusObj("lang_core_sua_chuong_trinh_thanh_cong",!0),this.commonService.myNavigation(this.backLink),this.programFormService.removeProgramDataLocal(this.educationalProgramId??0)}))}callMultipleApi(){const a=this.bookService.apiBooksListPost({page:1,size:-1,programId:this.educationalProgramId}),i=this.commonListService.apiCommonListSubjectAndLevelsGet(this.commonService.getBusinessDomainUrl());if(this.educationalProgramId){const l=this.programService.apiProgramsIdDocumentsGet(this.educationalProgramId),c=this.programService.apiProgramsIdClassroomsListPost(this.educationalProgramId,{page:1,size:-1}),g=this.programService.apiProgramsIdGet(this.educationalProgramId),b=this.programService.apiProgramsIdSessionsGet(this.educationalProgramId);return(0,W.z)([a,l,c,g,b,i]).pipe((0,Ct.T)(([_,f,M,F,S,T])=>({bookResponse:_,documentResponse:f,classroomResponse:M,programResponse:F,sessionResponse:S,subjectAndLevelResponse:T})),(0,It.W)(_=>{throw _}))}return(0,W.z)([i]).pipe((0,Ct.T)(([l])=>({bookResponse:void 0,documentResponse:void 0,classroomResponse:void 0,programResponse:void 0,sessionResponse:void 0,subjectAndLevelResponse:l})),(0,It.W)(l=>{throw l}))}getData(){this.initStatusObj(),this.waitDestroy(this.wrapApiResponse(this.callMultipleApi()).subscribe(e=>{if(!e.success)return this.errorStatusObj(e.message,!0);this.educationalProgramObj=e.data?.programResponse,this.schoolAndLevelObjs=e.data?.subjectAndLevelResponse.data,this.generalDocumentObjs=e.data?.documentResponse?.list.map(a=>({id:a.id,name:a.name??"",link:a.link??"",type:a.type,documentType:this.commonService.getEnumTypeWithDefault(P.d,a.type,P.d.unknown),groupType:this.commonService.getEnumTypeWithDefault(rt.k,a.groupType??"",rt.k.unknown),willRemove:!1}))??[],this.bookObjs=e.data?.bookResponse?.list??[],this.sessionObjs=(e?.data?.sessionResponse?.list??[]).sort((a,i)=>a.sort-i.sort),this.stopStatusObj()}))}ngOnInit(){this.commonService.translateMetaData({title:"lang_core_chuong_trinh_hoc",image:"lang_cms_test_image"}),super.ngOnInit(),this.educationalProgramId=Number(this.commonService.getMyParam(this.activeRoute,"id")),this.backLink=this.commonService.getMyQueryParam("backto")??`/business/educational-program/${this.educationalProgramId}`,this.getData()}constructor(e,a,i,l,c){super(),this.activeRoute=e,this.programService=a,this.commonListService=i,this.bookService=l,this.programFormService=c,this.backLink="",this.bookObjs=[],this.generalDocumentObjs=[],this.sessionObjs=[],this.isSaving=!1,this.allDocumentTypes=P.d,this.form=new r.gE({generalFormGroup:new r.gE({educationalProgramName:new r.MJ("",{nonNullable:!0,validators:[r.k0.required,nt.M.noWhiteSpace]}),tuition:new r.MJ("",{nonNullable:!0,validators:[r.k0.required,yt.tuitionFeeValidator]}),schoolLevelId:new r.MJ(0,{nonNullable:!0,validators:[r.k0.min(1),r.k0.pattern(/^[1-9]\d*$/)]}),schoolSubjectId:new r.MJ(0,{nonNullable:!0,validators:[r.k0.min(1),r.k0.pattern(/^[1-9]\d*$/)]}),description:new r.MJ("",{nonNullable:!0})}),bookFormArray:new r.Yp([]),sessionFormArray:new r.Yp([],{validators:[r.k0.required,r.k0.minLength(1)]}),totalSessionNotDeleted:new r.MJ(0,{nonNullable:!0,validators:[r.k0.required]})})}}return(o=s).\u0275fac=function(e){return new(e||o)(t.rXU(h.nX),t.rXU($t.s),t.rXU(Bt.N),t.rXU(re.l),t.rXU(se.s))},o.\u0275cmp=t.VBU({type:o,selectors:[["app-add-or-edit-educational-program"]],standalone:!0,features:[t.Vt3,t.aNF],decls:4,vars:3,consts:[["doneLoading",""],[3,"headerBackToLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[3,"formGroup"],[1,"container-fluid","mt-3","overflow-hidden","document-market-list"],[1,"grid","grid-cols-12","gap-5"],[1,"col-span-12","md:col-span-3"],[1,"box","p-3"],[3,"programForm","educationalProgramObj","schoolAndLevelObjs",4,"ngIf"],[3,"listDocumentObjsChange","listDocumentObjs"],[3,"programForm","bookObjs",4,"ngIf"],[1,"col-span-12","md:col-span-9"],[1,"flex","justify-between"],[1,"text-md","font-medium","mr-auto","uppercase"],[3,"colorBackground"],["azt-track-service","dialog-confirm-EqayhO0oQs",1,"mr-3","btn","btn-secondary",2,"width","100%",3,"routerLink"],["azt-track-service","dialog-confirm-rXeH54A3ZE",1,"btn","btn-primary",2,"width","100%",3,"click","disabled"],["class","mr-1",4,"ngIf"],[3,"programForm","sessionObjs","educationalProgramObj"],[3,"isScrollToTop"],[3,"programForm","educationalProgramObj","schoolAndLevelObjs"],[3,"programForm","bookObjs"],[1,"mr-1"]],template:function(e,a){if(1&e&&(t.j41(0,"teacher-layout",1),t.DNE(1,Ta,1,1,"azt-loading-effect",2)(2,za,26,30,"ng-template",null,0,t.C5r),t.k0s()),2&e){const i=t.sdS(3);t.Y8G("headerBackToLink",a.backLink),t.R7$(),t.Y8G("ngIf",a.statusObj.loading)("ngIfElse",i)}},dependencies:[O.Q,R.K,ae,Ko,oa,aa.$,w.R,Sa,ht.I,p.F2,u.MD,u.bT,u.Jj,r.X1,r.qT,r.cb,r.j4,h.iI,h.Wk,r.YN,p.wp,I.s,C.flO,v.L,p.bj,x.Id,d.k],styles:[".box-info[_ngcontent-%COMP%]{background:#fff;border-radius:5px;box-shadow:0 0 5px #d3d3d3;margin-top:5px}.description[_ngcontent-%COMP%]{min-height:100px;border-radius:5px;font-size:14px;width:100%}.btn-add-document[_ngcontent-%COMP%]{color:#2262ae}.lucide-x[_ngcontent-%COMP%]{stroke-width:4.5px;color:#2262ae}.box-session[_ngcontent-%COMP%]{background:#fff;border-radius:5px;box-shadow:0 0 5px #d3d3d3}.btn-add-session[_ngcontent-%COMP%]{color:#2262ae;border-radius:5px;padding:15px;background:#fff}.btn-clear-form-content[_ngcontent-%COMP%]{stroke-width:4.5px;color:gray;margin-left:-25px}.btn-add-session[_ngcontent-%COMP%]:hover{background:#fafafa}.box-image[_ngcontent-%COMP%]{height:91px;width:69px;border:2px solid lightgray;border-radius:3px;display:grid}.box-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:65px;max-height:87px;margin:auto}.input-name-book[_ngcontent-%COMP%]{height:25px;border-radius:5px;font-size:14px}.textarea-description[_ngcontent-%COMP%]{max-height:93px;min-height:93px;border-radius:5px;font-size:14px}.box-book[_ngcontent-%COMP%]{background-color:#ededed;border:none;border-radius:5px;padding:.5rem .5rem .1rem;min-width:100px}.scroll[_ngcontent-%COMP%]{overflow:auto}.scroll[_ngcontent-%COMP%]::-webkit-scrollbar{height:5px}.scroll[_ngcontent-%COMP%]::-webkit-scrollbar-track{-webkit-box-shadow:inset 0 0 6px rgba(0,0,0,.3);border-radius:10px}.scroll[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:10px;background:#a9a9a9}.btn-danger[_ngcontent-%COMP%]{width:100%;padding:2px;margin-top:5px}.add-image-label[_ngcontent-%COMP%]{background:#87ceeb;display:flex;position:relative;bottom:48px;line-height:12px;width:40px;padding:5px;justify-content:center;align-items:center;margin:auto;font-size:10px;text-align:center;border-radius:2px}.icon-file-document[_ngcontent-%COMP%]{min-width:16px;max-width:16px;height:21px}.icon-file-document[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-left:-2px}.box-image[_ngcontent-%COMP%]   .btn-edit-image[_ngcontent-%COMP%]{bottom:79px!important;height:30px!important}.box-image[_ngcontent-%COMP%]:hover   .btn-edit-image[_ngcontent-%COMP%]{background:#767c7fbd!important;width:90%!important;height:30px!important;bottom:79px!important;color:#fff!important;font-weight:500!important}.box-image[_ngcontent-%COMP%]:hover   .btn-edit-image[_ngcontent-%COMP%]:hover{background:#596367bd!important}.btn-edit-image[_ngcontent-%COMP%]{background:none!important;color:transparent!important}.btn-edit-image[_ngcontent-%COMP%]   .loading-upload[_ngcontent-%COMP%]{color:#000!important}"]}),s})();var ct=m(62221),ce=m(92540);const Ea=o=>[o];function Pa(o,s){if(1&o&&t.nrm(0,"azt-loading-effect",3),2&o){const n=t.XpG();t.Y8G("currentStatusObj",n.statusObj)}}function Da(o,s){if(1&o&&t.nrm(0,"app-educational-program-general-info-form",15),2&o){const n=t.XpG(2);t.Y8G("programForm",n.form)("educationalProgramObj",n.educationalProgramObj)("schoolAndLevelObjs",n.schoolAndLevelObjs)}}function Ga(o,s){1&o&&t.nrm(0,"azt-loading-ui",16)}function $a(o,s){if(1&o){const n=t.RV6();t.j41(0,"div",4)(1,"form",5)(2,"div",6)(3,"h3",7),t.EFF(4),t.nI1(5,"mytranslate"),t.k0s(),t.j41(6,"div",8),t.DNE(7,Da,1,3,"app-educational-program-general-info-form",9),t.k0s(),t.j41(8,"div",10)(9,"div",11)(10,"button",12),t.nI1(11,"navigationLocalize"),t.EFF(12),t.nI1(13,"mytranslate"),t.k0s(),t.j41(14,"button",13),t.bIt("click",function(){t.eBV(n);const a=t.XpG();return t.Njj(a.saveEducationalProgram())}),t.DNE(15,Ga,1,0,"azt-loading-ui",14),t.EFF(16),t.nI1(17,"mytranslate"),t.k0s()()()()()()}if(2&o){const n=t.XpG();t.R7$(),t.Y8G("formGroup",n.form),t.R7$(3),t.SpI(" ",t.bMT(5,8,"lang_program_create_new_curriculum")," "),t.R7$(3),t.Y8G("ngIf",n.schoolAndLevelObjs),t.R7$(3),t.Y8G("routerLink",t.eq3(16,Ea,t.bMT(11,10,n.backLink))),t.R7$(2),t.SpI(" ",t.bMT(13,12,"lang_auto_huy")," "),t.R7$(2),t.Y8G("disabled",n.form.invalid||n.isSaving),t.R7$(),t.Y8G("ngIf",n.isSaving),t.R7$(),t.SpI(" ",t.bMT(17,14,"lang_auto_luu")," ")}}let Ba=(()=>{var o;class s extends y.H{saveEducationalProgram(){let e=this.form.getRawValue(),i=[];e.sessionFormArray.filter(_=>!_.willRemove).forEach(_=>{i.push({id:_.sessionId>0?_.sessionId:void 0,contents:_.descriptionObjs.filter(f=>!f.willRemove).map(f=>({id:f.id>0?f.id:void 0,content:f.content})),documents:_.documentObjs.filter(f=>!f.willRemove&&f.id<=0).map(f=>({name:f.name,link:f.link,type:f.type,groupType:""}))})});let l=this.generalDocumentObjs.filter(_=>!_.willRemove&&_.id<=0).map(_=>({name:_.name,link:_.link,type:_.type,groupType:""})),c=e.bookFormArray.filter(_=>!_.willRemove).map(_=>({id:_.id>0?_.id:void 0,name:_.name,description:_.description,iconLink:_.iconLink}));const g={name:e.generalFormGroup.educationalProgramName,fee:Number(e.generalFormGroup.tuition.replace(/\./g,"")??"0"),schoolLevelId:e.generalFormGroup.schoolLevelId,schoolSubjectId:e.generalFormGroup.schoolSubjectId,description:e.generalFormGroup.description,sessions:i,documents:l,books:c};this.isSaving=!0;let b=(0,W.z)([this.programService.apiProgramsPost(g)]);this.waitDestroy(this.wrapApiResponse(b).subscribe(_=>{if(this.isSaving=!1,!_.success)return this.errorStatusObj(_.message,!0);this.successStatusObj("lang_core_them_chuong_trinh_thanh_cong",!0);const f=_.data?.[0];f?.id&&this.commonService.myNavigation(`/business/edit-educational-program/${f?.id}`)}))}getData(){this.initStatusObj(),this.waitDestroy(this.wrapApiResponse(this.callMultipleApi()).subscribe(e=>{if(!e.success)return this.errorStatusObj(e.message,!0);this.educationalProgramObj=e.data?.programResponse,this.schoolAndLevelObjs=e.data?.subjectAndLevelResponse.data,this.generalDocumentObjs=e.data?.documentResponse?.list.map(a=>({id:a.id,name:a.name??"",link:a.link??"",type:a.type,documentType:this.commonService.getEnumTypeWithDefault(P.d,a.type,P.d.unknown),groupType:this.commonService.getEnumTypeWithDefault(rt.k,a.groupType??"",rt.k.unknown),willRemove:!1}))??[],this.stopStatusObj()}))}callMultipleApi(){const e=this.commonListService.apiCommonListSubjectAndLevelsGet(this.commonService.getBusinessDomainUrl());return(0,W.z)([e]).pipe((0,Ct.T)(([a])=>({bookResponse:void 0,documentResponse:void 0,classroomResponse:void 0,programResponse:void 0,sessionResponse:void 0,subjectAndLevelResponse:a})),(0,It.W)(a=>{throw a}))}ngOnInit(){super.ngOnInit(),this.backLink=this.commonService.getMyQueryParam("backto")??"/business/educational-program",this.getData()}constructor(e,a,i){super(),this.programService=e,this.commonListService=a,this.bookService=i,this.backLink="",this.generalDocumentObjs=[],this.isSaving=!1,this.bookObjs=[],this.form=new r.gE({generalFormGroup:new r.gE({educationalProgramName:new r.MJ("",{nonNullable:!0,validators:[r.k0.required,nt.M.noWhiteSpace]}),tuition:new r.MJ("",{nonNullable:!0,validators:[r.k0.required,yt.tuitionFeeValidator]}),schoolLevelId:new r.MJ(0,{nonNullable:!0,validators:[r.k0.min(1),r.k0.pattern(/^[1-9]\d*$/)]}),schoolSubjectId:new r.MJ(0,{nonNullable:!0,validators:[r.k0.min(1),r.k0.pattern(/^[1-9]\d*$/)]}),description:new r.MJ("",{nonNullable:!0})}),bookFormArray:new r.Yp([]),sessionFormArray:new r.Yp([]),totalSessionNotDeleted:new r.MJ(0,{nonNullable:!0,validators:[r.k0.required]})})}}return(o=s).\u0275fac=function(e){return new(e||o)(t.rXU(ct.sC),t.rXU(ce.Nz),t.rXU(ct.lb))},o.\u0275cmp=t.VBU({type:o,selectors:[["create-general-education-program"]],standalone:!0,features:[t.Vt3,t.aNF],decls:4,vars:3,consts:[["doneLoading",""],[3,"headerBackToLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[1,"intro-y","mt-5"],[3,"formGroup"],[1,"mx-auto",2,"max-width","1000px"],[1,"font-medium","text-md","uppercase"],[1,"box","mt-5","p-3"],[3,"programForm","educationalProgramObj","schoolAndLevelObjs",4,"ngIf"],[1,"mt-5"],[1,"text-right"],[1,"btn","btn-secondary","w-24","mr-2",3,"routerLink"],[1,"btn","w-24","btn-primary",3,"click","disabled"],["class","mr-1",4,"ngIf"],[3,"programForm","educationalProgramObj","schoolAndLevelObjs"],[1,"mr-1"]],template:function(e,a){if(1&e&&(t.j41(0,"teacher-layout",1),t.DNE(1,Pa,1,1,"azt-loading-effect",2)(2,$a,18,18,"ng-template",null,0,t.C5r),t.k0s()),2&e){const i=t.sdS(3);t.Y8G("headerBackToLink",a.backLink),t.R7$(),t.Y8G("ngIf",a.statusObj.loading)("ngIfElse",i)}},dependencies:[O.Q,R.K,ae,w.R,p.F2,u.MD,u.bT,r.X1,r.qT,r.cb,r.j4,h.iI,h.Wk,r.YN,p.wp,I.s,C.flO,v.L,x.Id,d.k],encapsulation:2}),s})();var Na=m(47160);const Nt=o=>[o],La=o=>({programId:o}),me=o=>({backTo:o});function Ya(o,s){if(1&o&&t.nrm(0,"azt-loading-effect",4),2&o){const n=t.XpG();t.Y8G("currentStatusObj",n.statusObj)}}function Ua(o,s){if(1&o&&(t.j41(0,"div",19)(1,"span",20),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s(),t.EFF(4," : "),t.j41(5,"span",21),t.EFF(6),t.nI1(7,"mytranslate"),t.k0s()()),2&o){const n=t.XpG(3);t.R7$(2),t.JRh(t.bMT(3,2,"lang_auto_mon_hoc")),t.R7$(4),t.JRh(t.bMT(7,4,n.schoolSubjectKey))}}function Va(o,s){if(1&o&&(t.j41(0,"div",19)(1,"span",20),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s(),t.j41(4,"div",21),t.nrm(5,"azt-see-more-content",28),t.k0s()()),2&o){const n=t.XpG(3);t.R7$(2),t.SpI(" ",t.bMT(3,3,"lang_auto_mo_ta")," "),t.R7$(3),t.Y8G("content",n.educationalProgramObj.description)("maxLength",200)}}function Xa(o,s){if(1&o){const n=t.RV6();t.j41(0,"div")(1,"azt-document-type-file",30),t.bIt("click",function(){const a=t.eBV(n).$implicit,i=t.XpG(4);return t.Njj(i.previewFile(a))}),t.k0s()()}if(2&o){let n;const e=s.$implicit;t.R7$(),t.Y8G("type",e.documentType)("name",null!==(n=e.name)&&void 0!==n?n:"")("url",e.link)("showBorder",!1)("customClass","w-4 h-4")("textWidth","100%")}}function Wa(o,s){if(1&o&&(t.qex(0),t.DNE(1,Xa,2,6,"div",29),t.bVm()),2&o){const n=t.XpG(3);t.R7$(),t.Y8G("ngForOf",n.listDocumentObjs)}}function Ja(o,s){1&o&&(t.j41(0,"div",31),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&o&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"lang_document_market_no_data_found")," "))}function Ha(o,s){if(1&o&&(t.j41(0,"div",33)(1,"span",21),t.EFF(2),t.k0s()()),2&o){const n=s.$implicit;t.Y8G("hidden",s.index>1),t.R7$(2),t.SpI("- ",n.name,"")}}function Qa(o,s){1&o&&(t.j41(0,"div",34),t.EFF(1,"..."),t.k0s())}function qa(o,s){if(1&o&&(t.j41(0,"div",19)(1,"span",20),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s(),t.DNE(4,Ha,3,2,"div",32)(5,Qa,2,0,"div",26),t.k0s()),2&o){const n=t.XpG(3);t.R7$(2),t.SpI(" ",t.bMT(3,3,"lang_core_sach")," "),t.R7$(2),t.Y8G("ngForOf",n.listBookObjs),t.R7$(),t.Y8G("ngIf",n.listBookObjs.length>1)}}function Ka(o,s){1&o&&(t.j41(0,"div",35),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&o&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"lang_auto_chua_co_noi_dung")," "))}function Za(o,s){if(1&o&&(t.j41(0,"div",39)(1,"span",40),t.EFF(2),t.k0s()()),2&o){const n=s.$implicit;t.R7$(2),t.SpI("- ",n.content,"")}}function ti(o,s){if(1&o&&(t.j41(0,"div",36)(1,"h3",37),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s(),t.DNE(4,Za,3,1,"div",38),t.k0s()),2&o){const n=s.$implicit;t.Y8G("hidden",s.index>1),t.R7$(2),t.Lme("",t.bMT(3,4,"lang_core_buoi")," ",n.sort,""),t.R7$(2),t.Y8G("ngForOf",n.contents)}}function ei(o,s){1&o&&(t.j41(0,"div",34),t.EFF(1,"..."),t.k0s())}function ni(o,s){if(1&o&&(t.j41(0,"div",17)(1,"h3",18),t.EFF(2),t.k0s(),t.j41(3,"div",19)(4,"span",20),t.EFF(5),t.nI1(6,"mytranslate"),t.k0s(),t.EFF(7," : "),t.j41(8,"span",21),t.EFF(9),t.nI1(10,"mytranslate"),t.k0s()(),t.DNE(11,Ua,8,6,"div",22)(12,Va,6,5,"div",22),t.j41(13,"div",19)(14,"span",20),t.EFF(15),t.nI1(16,"mytranslate"),t.k0s(),t.DNE(17,Wa,2,1,"ng-container",23)(18,Ja,3,3,"ng-template",null,1,t.C5r),t.k0s(),t.DNE(20,qa,6,5,"div",22),t.j41(21,"div",19)(22,"span",20),t.EFF(23),t.nI1(24,"mytranslate"),t.k0s(),t.DNE(25,Ka,3,3,"div",24)(26,ti,5,6,"div",25)(27,ei,2,0,"div",26),t.k0s(),t.j41(28,"div",19)(29,"a",27),t.nI1(30,"navigationLocalize"),t.EFF(31),t.nI1(32,"mytranslate"),t.k0s()()()),2&o){const n=t.sdS(19),e=t.XpG(2);t.R7$(),t.FS9("matTooltip",e.educationalProgramObj.name),t.R7$(),t.SpI(" ",e.educationalProgramObj.name," "),t.R7$(3),t.JRh(t.bMT(6,18,"lang_homework_create_homework_success_class")),t.R7$(4),t.Lme("",t.bMT(10,20,"lang_homework_create_homework_success_class")," ",e.schoolLevelValue,""),t.R7$(2),t.Y8G("ngIf",e.schoolSubjectKey),t.R7$(),t.Y8G("ngIf",e.educationalProgramObj.description&&e.educationalProgramObj.description.length>0),t.R7$(3),t.SpI(" ",t.bMT(16,22,"lang_testbank_document_list_header_title")," "),t.R7$(2),t.Y8G("ngIf",e.listDocumentObjs.length>0)("ngIfElse",n),t.R7$(3),t.Y8G("ngIf",e.listBookObjs.length>0),t.R7$(3),t.SpI(" ",t.bMT(24,24,"lang_core_noi_dung_chuong_trinh")," "),t.R7$(2),t.Y8G("ngIf",0==e.listEducationProgramSessionObjs.length),t.R7$(),t.Y8G("ngForOf",e.listEducationProgramSessionObjs),t.R7$(),t.Y8G("ngIf",e.listEducationProgramSessionObjs.length>1),t.R7$(2),t.Y8G("routerLink",t.eq3(30,Nt,t.bMT(30,26,"/business/edit-educational-program/"+e.educationalProgramId)))("queryParams",t.eq3(32,me,"/business/educational-program/"+e.educationalProgramId)),t.R7$(2),t.SpI(" ",t.bMT(32,28,"lang_testbank_folder_and_file_edit")," ")}}function oi(o,s){if(1&o&&(t.j41(0,"div",41)(1,"a",42),t.nI1(2,"navigationLocalize"),t.j41(3,"div",43)(4,"div",44)(5,"div",45)(6,"div",46)(7,"h3",18),t.EFF(8),t.k0s()(),t.j41(9,"div",47)(10,"span",21),t.EFF(11),t.nI1(12,"mytranslate"),t.k0s()(),t.j41(13,"div",39)(14,"span",21),t.EFF(15),t.nI1(16,"mytranslate"),t.k0s()()(),t.j41(17,"div",48),t.EFF(18),t.k0s()()()()()),2&o){const n=s.$implicit,e=t.XpG(2);t.R7$(),t.Y8G("routerLink",t.eq3(16,Nt,t.bMT(2,10,"/admin/student/classroom-details/"+n.classroomId+"/3")))("queryParams",t.eq3(18,me,"/business/educational-program/"+e.educationalProgramId)),t.R7$(6),t.FS9("matTooltip",n.classroomName),t.R7$(),t.SpI(" ",n.classroomName," "),t.R7$(3),t.Lme("",t.bMT(12,12,"lang_student_classroom_list_detail_quantity"),": ",n.totalStudent,""),t.R7$(4),t.E5c("",t.bMT(16,14,"lang_core_so_buoi_da_hoc"),": ",n.totalLearnedSession,"/",n.totalSession,""),t.R7$(3),t.SpI("",n.learnedPercent,"%")}}function ai(o,s){if(1&o&&(t.j41(0,"div",5)(1,"div",6)(2,"div",7),t.DNE(3,ni,33,34,"div",8),t.k0s(),t.j41(4,"div",9)(5,"div",10)(6,"h3",11),t.EFF(7),t.nI1(8,"mytranslate"),t.k0s(),t.j41(9,"div",12),t.DNE(10,oi,19,20,"div",13),t.k0s(),t.j41(11,"div",14)(12,"a",15),t.nI1(13,"navigationLocalize"),t.EFF(14),t.nI1(15,"mytranslate"),t.k0s()()()()()(),t.nrm(16,"azt-scroll-to-top-bottom",16)),2&o){const n=t.XpG();t.R7$(3),t.Y8G("ngIf",n.educationalProgramObj),t.R7$(4),t.Lme("",t.bMT(8,8,"lang_core_cac_lop_hoc_chuong_trinh_nay")," (",n.listClassroomObjs.length,")"),t.R7$(3),t.Y8G("ngForOf",n.listClassroomObjs),t.R7$(2),t.Y8G("routerLink",t.eq3(14,Nt,t.bMT(13,10,"/admin/student/manage-classroom/0")))("queryParams",t.eq3(16,La,n.educationalProgramId)),t.R7$(2),t.SpI("+",t.bMT(15,12,"lang_auto_them_lop_cho_chuong_trinh_hoc"),""),t.R7$(2),t.Y8G("isScrollToTop",!0)}}let ii=(()=>{var o;class s extends y.H{previewFile(e){const a={name:e.name,mimes:this.sAztFileTypeService.getMineTypeByFileType(e.type),type:e.type,url:e.link};this.sAztDialogService.open(kt.V,{maxWidth:"100vw",maxHeight:"100vh",height:"100%",width:"100%",data:{fileOption:{...a,index:0},showDownloadIcon:!1},restoreFocus:!1})}callMultipleApi(){const a=this.bookService.apiBooksListPost({page:1,size:-1,programId:this.educationalProgramId}),i=this.programService.apiProgramsIdDocumentsGet(this.educationalProgramId),l=this.programService.apiProgramsIdClassroomsListPost(this.educationalProgramId,{page:1,size:-1}),c=this.programService.apiProgramsIdGet(this.educationalProgramId),g=this.programService.apiProgramsIdSessionsGet(this.educationalProgramId),b=this.commonListService.apiCommonListSubjectAndLevelsGet(this.commonService.getBusinessDomainUrl());return(0,W.z)([a,i,l,c,g,b]).pipe((0,Ct.T)(([_,f,M,F,S,T])=>({bookResponse:_,documentResponse:f,classroomResponse:M,programResponse:F,sessionResponse:S,subjectAndLevelResponse:T})),(0,It.W)(_=>{throw _}))}getData(){this.initStatusObj(),this.waitDestroy(this.wrapApiResponse(this.callMultipleApi()).subscribe(e=>{if(!e.success)return this.errorStatusObj(e.message,!0);this.educationalProgramObj=e.data?.programResponse,this.listBookObjs=e.data?.bookResponse.list.sort((i,l)=>i.id-l.id)??[],this.listClassroomObjs=e.data?.classroomResponse.list??[],this.listDocumentObjs=e.data?.documentResponse.list.map(i=>({...i,documentType:this.commonService.getEnumTypeWithDefault(P.d,i.type,P.d.unknown)}))??[],this.listEducationProgramSessionObjs=e.data?.sessionResponse.list.sort((i,l)=>i.sort-l.sort)??[];let a=e.data?.subjectAndLevelResponse.data?.schoolLevelSubjectObjs.find(i=>i.schoolLevel?.id==this.educationalProgramObj?.schoolLevelId);this.schoolLevelValue=a?.schoolLevel?.value?.toString()??"",this.schoolSubjectKey=a?.schoolSubjectObjs.find(i=>i.id==this.educationalProgramObj?.schoolSubjectId)?.key??"",this.stopStatusObj()}))}ngOnInit(){this.commonService.translateMetaData({title:"lang_core_chi_tiet_chuong_trinh_hoc",image:"lang_cms_test_image"}),super.ngOnInit(),this.educationalProgramId=Number(this.commonService.getMyParam(this.activeRoute,"id")),this.getData()}constructor(e,a,i,l,c,g){super(),this.activeRoute=e,this.commonListService=a,this.sAztDialogService=i,this.bookService=l,this.programService=c,this.sAztFileTypeService=g,this.backLink="/business/educational-program",this.educationalProgramId=0,this.schoolLevelValue="",this.schoolSubjectKey="",this.listDocumentObjs=[],this.listClassroomObjs=[],this.listEducationProgramSessionObjs=[],this.listBookObjs=[]}}return(o=s).\u0275fac=function(e){return new(e||o)(t.rXU(h.nX),t.rXU(Bt.N),t.rXU(j.i),t.rXU(re.l),t.rXU($t.s),t.rXU(Gt.k))},o.\u0275cmp=t.VBU({type:o,selectors:[["app-educational-program-detail"]],standalone:!0,features:[t.Vt3,t.aNF],decls:4,vars:3,consts:[["doneLoading",""],["emptyListDocument",""],[3,"headerBackToLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[1,"container-fluid","mt-5","overflow-hidden","document-market-list"],[1,"grid","grid-cols-12","gap-4"],[1,"col-span-12","md:col-span-3"],["class","box-info p-3",4,"ngIf"],[1,"col-span-12","md:col-span-9"],[1,"box-content","p-3"],[1,"text-md","font-medium","truncate","mr-auto"],[1,"grid","grid-cols-12","gap-3","sm:gap-6"],["class","col-span-12 sm:col-span-6 md:col-span-6 xl:col-span-4 clickable",4,"ngFor","ngForOf"],[1,"flex","justify-start","mt-4"],[1,"btn-add-class",3,"routerLink","queryParams"],[3,"isScrollToTop"],[1,"box-info","p-3"],[1,"text-md","font-medium","truncate","mr-auto",3,"matTooltip"],[1,"mt-2"],[1,"text-sm","mb-1","items-center","font-medium"],[1,"text-sm"],["class","mt-2",4,"ngIf"],[4,"ngIf","ngIfElse"],["class","text-sm flex justify-center m-2 mb-1","style","color: gray",4,"ngIf"],["class","items-center mb-2",3,"hidden",4,"ngFor","ngForOf"],["class","flex justify-start",4,"ngIf"],["azt-track-service","detail-educational-program-zQWRXarDBe",1,"btn","btn-primary",2,"width","100%","background","rgba(22, 155, 213, 1)","border-width","0px",3,"routerLink","queryParams"],[3,"content","maxLength"],[4,"ngFor","ngForOf"],[1,"clickable",3,"click","type","name","url","showBorder","customClass","textWidth"],[1,"text-sm","flex","justify-center","m-2",2,"color","gray"],["class","items-center",3,"hidden",4,"ngFor","ngForOf"],[1,"items-center",3,"hidden"],[1,"flex","justify-start"],[1,"text-sm","flex","justify-center","m-2","mb-1",2,"color","gray"],[1,"items-center","mb-2",3,"hidden"],[1,"text-sm","font-medium","mr-auto"],["class","flex items-center",4,"ngFor","ngForOf"],[1,"flex","items-center"],[1,"text-sm",2,"white-space","pre-line"],[1,"col-span-12","sm:col-span-6","md:col-span-6","xl:col-span-4","clickable"],["azt-track-service","detail-educational-program-2h2h8T3CP",3,"routerLink","queryParams"],[1,"box-info-content","zoom-in"],[1,"flex","justify-between","items-center","py-2","px-4"],[1,"col-information"],[1,"grid","items-center"],[1,"flex","items-center","mt-1"],[1,"box-percent"]],template:function(e,a){if(1&e&&(t.j41(0,"teacher-layout",2),t.DNE(1,Ya,1,1,"azt-loading-effect",3)(2,ai,17,18,"ng-template",null,0,t.C5r),t.k0s()),2&e){const i=t.sdS(3);t.Y8G("headerBackToLink",a.backLink),t.R7$(),t.Y8G("ngIf",a.statusObj.loading)("ngIfElse",i)}},dependencies:[O.Q,R.K,Na.l,Dt.m,ht.I,p.F2,u.MD,u.Sq,u.bT,r.X1,h.iI,h.Wk,r.YN,p.wp,I.s,lt.oV,C.flO,v.L,x.Id,d.k],styles:[".box-info-content[_ngcontent-%COMP%]{background:#f2f2f2;border-radius:5px}.box-info[_ngcontent-%COMP%]{background:#fff;border-radius:5px}.description[_ngcontent-%COMP%]{min-height:150px;border-radius:5px;font-size:14px;width:100%}.btn-add-class[_ngcontent-%COMP%]{color:#2262ae}.btn-add-class[_ngcontent-%COMP%]:hover{color:#2a74cf}.lucide-x[_ngcontent-%COMP%]{stroke-width:4.5px;color:#2262ae}.text-sm[_ngcontent-%COMP%]{font-size:13px!important}.box-content[_ngcontent-%COMP%]{background:#fff;border-radius:5px}.btn-add-session[_ngcontent-%COMP%]{color:#2262ae;border-radius:5px;padding:15px;background:#fff}.box-percent[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%;background:#a4e6f4;display:flex;align-items:center;justify-content:center;font-weight:500;border:1px solid #00a8cc}.btn-primary[_ngcontent-%COMP%]:hover{background:#5dc0ea!important}.col-information[_ngcontent-%COMP%]{width:75%}"]}),s})();const de=o=>[o],si=()=>({"mr-2":!0}),ri=o=>({"py-1 px-3 rounded-full bg-success text-white font-medium":o}),li=()=>({"mr-2 text-danger":!0});function ci(o,s){if(1&o&&t.nrm(0,"azt-loading-effect",3),2&o){const n=t.XpG();t.Y8G("currentStatusObj",n.statusObj)}}function mi(o,s){1&o&&t.nrm(0,"azt-loading-ui",26)}function di(o,s){if(1&o){const n=t.RV6();t.j41(0,"div",14)(1,"div",15)(2,"a",16),t.nI1(3,"navigationLocalize"),t.j41(4,"div",17)(5,"h3",18),t.EFF(6),t.k0s()(),t.j41(7,"div",19)(8,"span",20),t.EFF(9),t.nI1(10,"mytranslate"),t.j41(11,"span",21),t.EFF(12),t.k0s()()(),t.j41(13,"div",17)(14,"span",20),t.EFF(15),t.nI1(16,"mytranslate"),t.k0s()(),t.j41(17,"div",17)(18,"span",20),t.EFF(19),t.nI1(20,"mytranslate"),t.nI1(21,"formatMoney"),t.k0s()()(),t.j41(22,"div",22)(23,"button",23),t.nI1(24,"mytranslate"),t.bIt("click",function(){const a=t.eBV(n).$implicit,i=t.XpG(3);return t.Njj(i.showDeleteDialog(a))}),t.DNE(25,mi,1,0,"azt-loading-ui",24),t.nrm(26,"lucide-icon",25),t.k0s()()()()}if(2&o){const n=s.$implicit,e=t.XpG(3);t.R7$(2),t.Y8G("routerLink",t.eq3(25,de,t.bMT(3,13,"/business/educational-program/"+n.id))),t.R7$(3),t.FS9("matTooltip",n.name),t.R7$(),t.SpI(" ",n.name," "),t.R7$(3),t.SpI(" ",t.bMT(10,15,"lang_core_so_lop_hoc"),": "),t.R7$(2),t.Y8G("ngClass",t.eq3(27,ri,n.totalClassroom)),t.R7$(),t.JRh(n.totalClassroom),t.R7$(3),t.Lme("",t.bMT(16,17,"lang_core_buoi_tiet_hoc"),": ",n.totalSession,""),t.R7$(4),t.Lme("",t.bMT(20,19,"lang_core_hoc_phi"),": ",t.bMT(21,21,n.fee)," \u0111"),t.R7$(4),t.FS9("matTooltip",t.bMT(24,23,"lang_auto_xoa")),t.R7$(2),t.Y8G("ngIf",e.isDeletingId==n.id),t.R7$(),t.Y8G("ngClass",t.lJ4(29,li))}}function ui(o,s){if(1&o&&(t.j41(0,"div",10)(1,"h3",11),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s(),t.j41(4,"div",12),t.DNE(5,di,27,30,"div",13),t.k0s()()),2&o){const n=s.$implicit;t.Y8G("hidden",0==n.programObjs.length),t.R7$(2),t.Lme("",t.bMT(3,4,"lang_homework_create_homework_success_class")," ",n.schoolLevelObj.value,""),t.R7$(3),t.Y8G("ngForOf",n.programObjs)}}function pi(o,s){if(1&o&&(t.j41(0,"div",4)(1,"h3",5),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s(),t.j41(4,"a",6),t.nI1(5,"navigationLocalize"),t.nrm(6,"lucide-icon",7),t.EFF(7),t.nI1(8,"mytranslate"),t.k0s()(),t.DNE(9,ui,6,6,"div",8),t.nrm(10,"azt-scroll-to-top-bottom",9)),2&o){const n=t.XpG();t.R7$(2),t.SpI(" ",t.bMT(3,6,"lang_student_educational_program")," "),t.R7$(2),t.Y8G("routerLink",t.eq3(12,de,t.bMT(5,8,"/business/create-general-educational-program"))),t.R7$(2),t.Y8G("ngClass",t.lJ4(14,si)),t.R7$(),t.SpI(" ",t.bMT(8,10,"lang_testbank_create_new_matrix")," "),t.R7$(2),t.Y8G("ngForOf",n.groupEducationalProgramDtoObjs),t.R7$(),t.Y8G("isScrollToTop",!0)}}let _i=(()=>{var o;class s extends y.H{showDeleteDialog(e){var a=this.commonService.myTranslateInstant("lang_auto_ban_co_chac_chan_muon_xoa")+' <div class="text-md font-medium inline"> '+e.name+" </div> ?";this.sAztDialogService.open(U.u,{data:{content:a},restoreFocus:!1,width:"500px"}).afterClosed().subscribe(i=>{i&&(this.isDeletingId=e.id,this.waitDestroy(this.wrapApiResponse(this.programService.apiProgramsIdDelete(e.id)).subscribe(l=>{if(this.isDeletingId=0,!l.success)return this.errorStatusObj(l.message,!0);this.groupEducationalProgramDtoObjs.forEach(c=>c.programObjs=c.programObjs.filter(g=>g.id!=e.id)),this.successStatusObj("lang_core_xoa_chuong_trinh_hoc_thanh_cong",!0)})))})}getSchoolLevel(){this.initStatusObj(),this.waitDestroy(this.commonListService.apiCommonListSubjectAndLevelsGet(this.commonService.getBusinessDomainUrl()).subscribe(e=>{e.success?(e.data?.schoolLevelSubjectObjs.filter(a=>a.schoolLevel).forEach(a=>{a.schoolLevel&&this.groupEducationalProgramDtoObjs.push({schoolLevelObj:a.schoolLevel,programObjs:[]})}),this.getListProgramObjs()):this.errorStatusObj(e.message,!0)}))}getListProgramObjs(){this.waitDestroy(this.wrapApiResponse(this.programService.apiProgramsListPost({page:1,size:-1})).subscribe(e=>{if(!e.success)return this.errorStatusObj(e.message,!0);this.groupEducationalProgramDtoObjs.forEach(a=>{a.programObjs=[...a.programObjs,...(e.data?.list??[]).filter(i=>a.schoolLevelObj.id==i.schoolLevelId)]}),this.stopStatusObj()}))}ngOnInit(){this.commonService.translateMetaData({title:"lang_student_educational_program",description:"lang_student_educational_program",image:"lang_cms_test_image"}),this.waitDestroy((0,W.z)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{let e=this.commonService.getMyQueryParam("backto");this.backLink=e||"/business/dashboard"})),super.ngOnInit(),this.getSchoolLevel()}constructor(e,a,i,l){super(),this.activeRoute=e,this.programService=a,this.commonListService=i,this.sAztDialogService=l,this.backLink="",this.groupEducationalProgramDtoObjs=[],this.isDeletingId=0}}return(o=s).\u0275fac=function(e){return new(e||o)(t.rXU(h.nX),t.rXU($t.s),t.rXU(Bt.N),t.rXU(j.i))},o.\u0275cmp=t.VBU({type:o,selectors:[["app-azt-business-educational-program"]],standalone:!0,features:[t.Vt3,t.aNF],decls:4,vars:3,consts:[["doneLoading",""],[3,"headerBackToLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[1,"flex","justify-between","mt-5",2,"flex-wrap","wrap"],[1,"text-md-title","font-medium","mr-auto","mt-1"],["azt-track-service","business-educational-program-H1qyTyPt5",1,"btn","btn-primary","px-5","py-2","mt-1",3,"routerLink"],["name","plus","size","16",3,"ngClass"],["class","mt-5",3,"hidden",4,"ngFor","ngForOf"],[3,"isScrollToTop"],[1,"mt-5",3,"hidden"],[1,"text-md-class","font-medium","truncate","mr-auto","mb-3"],[1,"grid","grid-cols-12","gap-3","sm:gap-6"],["class","col-span-12 sm:col-span-6 md:col-span-4 xl:col-span-3",4,"ngFor","ngForOf"],[1,"col-span-12","sm:col-span-6","md:col-span-4","xl:col-span-3"],[1,"flex","info-infrastructure"],["azt-track-service","business-educational-program-ETIELn-OoJ",1,"col-information","clickable",3,"routerLink"],[1,"flex","items-center"],[1,"text-md","font-medium","truncate","mr-auto",3,"matTooltip"],[1,"flex","items-center","mt-1"],[1,"text-sm"],[3,"ngClass"],[1,"flex","justify-end","items-center"],["azt-track-service","business-educational-program-Kk4G8pkpL",1,"flex","items-center","justify-center",3,"click","matTooltip"],["class","mr-1",4,"ngIf"],["name","trash-2","size","16",3,"ngClass"],[1,"mr-1"]],template:function(e,a){if(1&e&&(t.j41(0,"teacher-layout",1),t.DNE(1,ci,1,1,"azt-loading-effect",2)(2,pi,11,15,"ng-template",null,0,t.C5r),t.k0s()),2&e){const i=t.sdS(3);t.Y8G("headerBackToLink",a.backLink),t.R7$(),t.Y8G("ngIf",a.statusObj.loading)("ngIfElse",i)}},dependencies:[O.Q,R.K,w.R,ht.I,p.F2,u.MD,u.YU,u.Sq,u.bT,r.X1,h.iI,h.Wk,r.YN,p.wp,I.s,lt.oV,C.flO,C.WGl,v.L,p.t0,x.Id,d.k],styles:[".btn-activity[_ngcontent-%COMP%]{padding:4px 20px;background:#228b22;color:#fff;border-radius:10px;font-weight:500}.btn-un-activity[_ngcontent-%COMP%]{padding:4px 20px;background:#8b0000;color:#fff;border-radius:10px;font-weight:500}.text-sm[_ngcontent-%COMP%]{font-size:.82rem;line-height:1.2rem}.col-information[_ngcontent-%COMP%]{padding:2px 5px;width:calc(100% - 20px)}.truncate[_ngcontent-%COMP%]{max-width:100%!important}.text-add-cs[_ngcontent-%COMP%]{font-size:14px;color:#a9a9a9;font-weight:500;padding-top:2px;padding-left:5px}.info-infrastructure[_ngcontent-%COMP%]{background:#fff;padding:10px;border-radius:6px;height:100%;box-shadow:0 0 9px #00000024}.btn-delete[_ngcontent-%COMP%]{padding:2px;border-radius:5px}.btn-delete[_ngcontent-%COMP%]:hover{background:#f0f0f0;transform:scale(1.1)}.text-md-title[_ngcontent-%COMP%]{font-size:20px}.text-md-class[_ngcontent-%COMP%]{font-size:16px}.truncate[_ngcontent-%COMP%]{width:100%!important}"]}),s})();var ue=m(74151),Mt=m(63244);function gi(o,s){1&o&&(t.j41(0,"div",19),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&o&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"lang_core_vui_long_nhap_ten_phong_hoc")," "))}function hi(o,s){1&o&&(t.j41(0,"div",19),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&o&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"lang_core_vui_long_nhap_so_cho_ngoi")," "))}function fi(o,s){1&o&&(t.j41(0,"div",20),t.nrm(1,"azt-loading-ui",21),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s()),2&o&&(t.R7$(2),t.SpI(" ",t.bMT(3,1,"lang_auto_dang_luu_doing")," "))}function bi(o,s){if(1&o){const n=t.RV6();t.j41(0,"button",22),t.bIt("click",function(){t.eBV(n);const a=t.XpG();return t.Njj(a.saveRoom(!0))}),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()}if(2&o){const n=t.XpG();t.Y8G("disabled",n.statusObj.loading||n.form.invalid),t.R7$(),t.SpI(" ",t.bMT(2,2,"lang_core_luu_va_dong")," ")}}let vi=(()=>{var o;class s extends ot._{closeDialog(){this.dialogRef.close(this.isLoadData)}saveRoom(e){var a={name:this.form.getRawValue().roomName,numberSeat:this.form.getRawValue().numberSeat};this.initStatusObj(),this.waitDestroy(this.data.room?this.wrapApiResponse(this.infrastructureService.apiInfrastructuresInfrastructureIdRoomsRoomIdPut(this.data.infrastructureId,this.data.room.id,a)).subscribe(i=>{if(!i.success)return this.errorStatusObj(i.message,!0);this.dialogRef.close(!0),this.successStatusObj("lang_core_sua_phong_hoc_thanh_cong",!0)}):this.wrapApiResponse(this.infrastructureService.apiInfrastructuresInfrastructureIdRoomsPost(this.data.infrastructureId,a)).subscribe(i=>{if(!i.success)return this.errorStatusObj(i.message,!0);e?this.dialogRef.close(!0):(this.isLoadData=!0,this.form.reset(),this.stopStatusObj()),this.successStatusObj("lang_core_them_phong_hoc_thanh_cong",!0)}))}ngOnInit(){}constructor(e,a,i){super(i,a),this.infrastructureService=e,this.dialogRef=a,this.data=i,this.isLoadData=!1,this.form=new r.gE({roomName:new r.MJ(i.room?.name??"",{nonNullable:!0,validators:[r.k0.required]}),numberSeat:new r.MJ(i.room?.numberSeat,{nonNullable:!0,validators:[r.k0.required,r.k0.pattern(/^[0-9]+$|^[1-9][0-9]*$/)]})})}}return(o=s).\u0275fac=function(e){return new(e||o)(t.rXU(Mt.B),t.rXU(N.CP,8),t.rXU(N.Vh,8))},o.\u0275cmp=t.VBU({type:o,selectors:[["app-create-business-room-dialog"]],standalone:!0,features:[t.Vt3,t.aNF],decls:33,vars:27,consts:[[1,"box"],[3,"formGroup"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-3","border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"text-md","font-medium","flex","items-center"],[2,"padding","1px"],[1,"p-5","pt-0","list-class"],[1,"mt-2"],["for","roomName",1,"form-label"],["type","text","id","roomName","formControlName","roomName",1,"form-control",3,"placeholder"],["class","text-xs text-danger mt-1",4,"ngIf"],[1,"mt-3"],["for","numberSeat",1,"form-label"],["type","text","id","numberSeat","formControlName","numberSeat",1,"form-control",3,"placeholder"],["class","box-save-doing",4,"ngIf"],[1,"p-3","flex","justify-end"],["azt-track-service","create-or-update-classroom-dialog-kKoehX_GgaD",1,"btn","btn-secondary","mr-2",3,"click"],["azt-track-service","create-or-update-classroom-dialog-GmD3tfo-w-8",1,"btn","btn-primary",3,"click","disabled"],["azt-track-service","create-or-update-classroom-dialog-GmD3tfo-w-8","class","btn btn-info ml-2",3,"disabled","click",4,"ngIf"],[1,"text-xs","text-danger","mt-1"],[1,"box-save-doing"],[1,"mr-1"],["azt-track-service","create-or-update-classroom-dialog-GmD3tfo-w-8",1,"btn","btn-info","ml-2",3,"click","disabled"]],template:function(e,a){1&e&&(t.j41(0,"div",0)(1,"form",1)(2,"div",2)(3,"div",3)(4,"h3",4),t.EFF(5),t.nI1(6,"mytranslate"),t.k0s()(),t.j41(7,"azt-mat-dialog-content")(8,"div",5)(9,"div",6)(10,"div",7)(11,"label",8),t.EFF(12),t.nI1(13,"mytranslate"),t.k0s(),t.nrm(14,"input",9),t.nI1(15,"mytranslate"),t.DNE(16,gi,3,3,"div",10),t.k0s(),t.j41(17,"div",11)(18,"label",12),t.EFF(19),t.nI1(20,"mytranslate"),t.k0s(),t.nrm(21,"input",13),t.nI1(22,"mytranslate"),t.DNE(23,hi,3,3,"div",10),t.k0s(),t.DNE(24,fi,4,3,"div",14),t.k0s()()()(),t.j41(25,"div",15)(26,"button",16),t.bIt("click",function(){return a.closeDialog()}),t.EFF(27),t.nI1(28,"mytranslate"),t.k0s(),t.j41(29,"button",17),t.bIt("click",function(){return a.saveRoom(!1)}),t.EFF(30),t.nI1(31,"mytranslate"),t.k0s(),t.DNE(32,bi,3,4,"button",18),t.k0s()()()),2&e&&(t.R7$(),t.Y8G("formGroup",a.form),t.R7$(4),t.SpI(" ",t.bMT(6,13,a.data.room?"lang_auth_sua_phong_hoc":"lang_core_tao_phong_hoc")," "),t.R7$(7),t.SpI(" ",t.bMT(13,15,"lang_core_ten_phong")," "),t.R7$(2),t.FS9("placeholder",t.bMT(15,17,"lang_core_nhap_ten_phong")),t.R7$(2),t.Y8G("ngIf",a.form.controls.roomName.dirty&&a.form.controls.roomName.errors),t.R7$(3),t.SpI(" ",t.bMT(20,19,"lang_core_so_cho_ngoi")," "),t.R7$(2),t.FS9("placeholder",t.bMT(22,21,"lang_auto_nhap_so_cho_ngoi")),t.R7$(2),t.Y8G("ngIf",a.form.controls.numberSeat.dirty&&a.form.controls.numberSeat.errors),t.R7$(),t.Y8G("ngIf",a.statusObj.loading),t.R7$(3),t.JRh(t.bMT(28,23,"lang_button_close")),t.R7$(2),t.Y8G("disabled",a.statusObj.loading||a.form.invalid),t.R7$(),t.SpI(" ",t.bMT(31,25,a.data.room?"lang_student_classroom_list_update":"lang_button_save")," "),t.R7$(2),t.Y8G("ngIf",!a.data.room))},dependencies:[ft.U,w.R,u.MD,u.bT,r.X1,r.qT,r.me,r.BC,r.cb,r.j4,r.JD,h.iI,r.YN,p.wp,I.s,C.flO,v.L,x.Id,d.k,st.t],styles:[".truncate[_ngcontent-%COMP%]{max-width:90px;vertical-align:middle;cursor:pointer}@media (max-width: 640px){.truncate[_ngcontent-%COMP%]{max-width:180px}.list-class[_ngcontent-%COMP%]{max-height:60vh}}.box-save-doing[_ngcontent-%COMP%]{position:fixed;height:100%;width:100%;left:0;top:0;display:flex;justify-content:center;align-items:center;background:#ffffffad}"]}),s})();var xi=m(9241);function Ci(o,s){if(1&o&&(t.nrm(0,"iframe",1),t.nI1(1,"safe")),2&o){const n=t.XpG();t.Y8G("src",t.bMT(1,2,n.embedGoogleMapUrl),t.f$h)("width",n.width)}}let pe=(()=>{var o;class s extends y.H{checkValidLink(){this.embedGoogleMapUrl=(0,oe.lR)(this.htmlEmbedCode)??""}onLoad(){setTimeout(()=>{this.loadedEvent.emit(!0)},0)}ngOnChanges(){this.checkValidLink()}ngOnInit(){super.ngOnInit(),this.checkValidLink()}constructor(){super(),this.width="600px",this.height="400px",this.loadedEvent=new t.bkB,this.embedGoogleMapUrl=""}}return(o=s).\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.VBU({type:o,selectors:[["azt-google-map-embed"]],inputs:{htmlEmbedCode:"htmlEmbedCode",width:"width",height:"height"},outputs:{loadedEvent:"loadedEvent"},standalone:!0,features:[t.Vt3,t.OA$,t.aNF],decls:1,vars:1,consts:[["allowfullscreen","","loading","lazy","referrerpolicy","no-referrer-when-downgrade","style","width: -webkit-fill-available; height: auto;min-height:300px",3,"src","width",4,"ngIf"],["allowfullscreen","","loading","lazy","referrerpolicy","no-referrer-when-downgrade",2,"width","-webkit-fill-available","height","auto","min-height","300px",3,"src","width"]],template:function(e,a){1&e&&t.DNE(0,Ci,2,4,"iframe",0),2&e&&t.Y8G("ngIf",a.embedGoogleMapUrl)},dependencies:[u.MD,u.bT,r.X1,h.iI,r.YN,I.s,C.flO,v.L,p.JI,x.Id,d.k,xi.w],encapsulation:2}),s})();var Lt=m(45785);const Ii=["drawer"],yi=(o,s)=>({"w-85":o,"w-25":s}),ki=o=>({"azt-mobile-draw-left":o}),Mi=o=>({"ml-25":o}),Oi=o=>({"ml-5":o}),ji=()=>({height:"80%"}),Si=()=>({"text-primary":!0}),Ri=()=>({"text-danger":!0});function Ti(o,s){if(1&o&&t.nrm(0,"azt-loading-effect",6),2&o){const n=t.XpG();t.Y8G("currentStatusObj",n.statusObj)}}function Fi(o,s){1&o&&t.nrm(0,"azt-loading-ui",37)}function wi(o,s){if(1&o&&(t.j41(0,"div",38),t.nrm(1,"azt-google-map-embed",39),t.k0s()),2&o){const n=t.XpG(2);t.R7$(),t.Y8G("htmlEmbedCode",n.obj.mapAddress)}}function Ai(o,s){if(1&o){const n=t.RV6();t.j41(0,"button",40),t.nI1(1,"mytranslate"),t.bIt("click",function(){t.eBV(n);const a=t.XpG(2);return t.Njj(a.sAztMatDrawerService.openDrawer())}),t.nrm(2,"lucide-icon",41),t.k0s()}2&o&&t.FS9("matTooltip",t.bMT(1,1,"lang_auto_mo_menu"))}function zi(o,s){if(1&o){const n=t.RV6();t.j41(0,"button",42),t.nI1(1,"mytranslate"),t.bIt("click",function(){t.eBV(n);const a=t.XpG(2);return t.Njj(a.sAztMatDrawerService.closeDrawer())}),t.nrm(2,"lucide-icon",43),t.k0s()}2&o&&t.FS9("matTooltip",t.bMT(1,1,"lang_auto_dong_menu"))}function Ei(o,s){1&o&&(t.j41(0,"span",44),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&o&&(t.R7$(),t.JRh(t.bMT(2,1,"lang_auto_them_phong_hoc")))}function Pi(o,s){1&o&&t.nrm(0,"azt-loading-ui",37)}function Di(o,s){if(1&o){const n=t.RV6();t.j41(0,"div",47)(1,"div",48)(2,"div",49)(3,"h3",50),t.EFF(4),t.k0s(),t.j41(5,"div"),t.EFF(6),t.nI1(7,"mytranslate"),t.k0s()(),t.j41(8,"div",51)(9,"button",52),t.nI1(10,"mytranslate"),t.bIt("click",function(){const a=t.eBV(n).$implicit,i=t.XpG(3);return t.Njj(i.addOrUpdateRoom(a))}),t.nrm(11,"lucide-icon",53),t.k0s(),t.j41(12,"button",54),t.nI1(13,"mytranslate"),t.bIt("click",function(){const a=t.eBV(n).$implicit,i=t.XpG(3);return t.Njj(i.showDeleteRoomDialog(a))}),t.DNE(14,Pi,1,0,"azt-loading-ui",18),t.nrm(15,"lucide-icon",55),t.k0s()()()()}if(2&o){const n=s.$implicit,e=t.XpG(3);t.R7$(3),t.FS9("matTooltip",n.name),t.R7$(),t.SpI(" ",n.name," "),t.R7$(2),t.Lme("",t.bMT(7,9,"lang_core_so_cho_ngoi"),": ",n.numberSeat,""),t.R7$(3),t.FS9("matTooltip",t.bMT(10,11,"lang_button_edit")),t.R7$(2),t.Y8G("ngClass",t.lJ4(15,Si)),t.R7$(),t.FS9("matTooltip",t.bMT(13,13,"lang_student_classroom_list_delete")),t.R7$(2),t.Y8G("ngIf",e.isDeletingId==n.id),t.R7$(),t.Y8G("ngClass",t.lJ4(16,Ri))}}function Gi(o,s){if(1&o&&(t.j41(0,"div")(1,"div",45),t.DNE(2,Di,16,17,"div",46),t.k0s()()),2&o){const n=t.XpG(2);t.R7$(2),t.Y8G("ngForOf",n.roomObjs)}}function $i(o,s){1&o&&(t.j41(0,"div",56),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&o&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"lang_core_danh_sach_phong_hoc_trong")," "))}function Bi(o,s){if(1&o){const n=t.RV6();t.j41(0,"mat-drawer-container",7)(1,"mat-drawer",8,1)(3,"div",9)(4,"div",10)(5,"div",11)(6,"div",12)(7,"h3",13),t.EFF(8),t.k0s()(),t.j41(9,"div",14)(10,"span",15),t.EFF(11),t.nI1(12,"mytranslate"),t.k0s()(),t.j41(13,"div",14)(14,"span",15),t.EFF(15),t.nI1(16,"mytranslate"),t.k0s()(),t.j41(17,"div",14)(18,"span",15),t.EFF(19),t.nI1(20,"mytranslate"),t.k0s()(),t.j41(21,"div")(22,"div",16)(23,"div",17),t.DNE(24,Fi,1,0,"azt-loading-ui",18),t.EFF(25),t.nI1(26,"mytranslate"),t.nrm(27,"lucide-icon",19),t.k0s()(),t.j41(28,"mat-menu",null,2)(30,"div",20)(31,"ul",21)(32,"li")(33,"button",22),t.bIt("click",function(){t.eBV(n);const a=t.XpG();return t.Njj(a.changeActivity())}),t.EFF(34),t.nI1(35,"mytranslate"),t.k0s()()()()()(),t.DNE(36,wi,2,1,"div",23),t.k0s()()()(),t.j41(37,"mat-drawer-content",24)(38,"div",25)(39,"div",26),t.DNE(40,Ai,3,3,"button",27)(41,zi,3,3,"button",28),t.j41(42,"div",29)(43,"button",30),t.bIt("click",function(){t.eBV(n);const a=t.XpG();return t.Njj(a.addOrUpdateRoom())}),t.nrm(44,"lucide-icon",31),t.DNE(45,Ei,3,3,"span",32),t.k0s()()(),t.j41(46,"div",33)(47,"h2",34),t.EFF(48),t.nI1(49,"mytranslate"),t.k0s(),t.DNE(50,Gi,3,1,"div",35)(51,$i,3,3,"ng-template",null,3,t.C5r),t.k0s()()()(),t.nrm(53,"azt-scroll-to-top-bottom",36)}if(2&o){const n=t.sdS(29),e=t.sdS(52),a=t.XpG();t.Y8G("hasBackdrop",a.sAztMatDrawerService.hasBackdrop),t.R7$(),t.FS9("opened",a.sAztMatDrawerService.isOpenSideNav?"true":"false"),t.Y8G("ngClass",t.l_i(41,yi,a.isMobileDevice,!a.isMobileDevice))("mode",a.sAztMatDrawerService.mode),t.R7$(2),t.Y8G("ngClass",t.eq3(44,ki,a.isMobileDevice)),t.R7$(4),t.FS9("matTooltip",a.obj.name),t.R7$(),t.SpI(" ",a.obj.name," "),t.R7$(3),t.Lme("",t.bMT(12,29,"lang_test_market_address"),": ",a.obj.address,""),t.R7$(4),t.Lme("",t.bMT(16,31,"lang_auto_dien_thoai"),": ",a.obj.phone,""),t.R7$(4),t.Lme("",t.bMT(20,33,"lang_auto_tong_so_phong_hoc"),": ",a.obj.totalRoom,""),t.R7$(3),t.Y8G("matMenuTriggerFor",n),t.R7$(),t.Y8G("ngClass",1==a.obj.status?"btn-activity":"btn-not-activity"),t.R7$(),t.Y8G("ngIf",a.isChangingActivityId==a.obj.id),t.R7$(),t.SpI(" ",t.bMT(26,35,0==a.obj.status?"lang_core_khong_hoat_dong":"lang_auto_hoat_dong")," "),t.R7$(9),t.SpI(" ",t.bMT(35,37,1==a.obj.status?"lang_core_khong_hoat_dong":"lang_auto_hoat_dong")," "),t.R7$(2),t.Y8G("ngIf",a.obj.mapAddress),t.R7$(),t.Y8G("ngClass",t.eq3(46,Mi,!a.isMobileDevice&&a.sAztMatDrawerService.isOpenSideNav)),t.R7$(),t.Y8G("ngClass",t.eq3(48,Oi,!a.isMobileDevice&&a.sAztMatDrawerService.isOpenSideNav)),t.R7$(2),t.Y8G("ngIf",!a.sAztMatDrawerService.isOpenSideNav||a.isMobileDevice),t.R7$(),t.Y8G("ngIf",a.sAztMatDrawerService.isOpenSideNav&&!a.isMobileDevice),t.R7$(4),t.Y8G("ngIf",!a.isMobileDevice||a.isMobileWebView),t.R7$(),t.Y8G("ngStyle",t.lJ4(50,ji)),t.R7$(2),t.SpI(" ",t.bMT(49,39,"lang_core_danh_sach_phong_hoc")," "),t.R7$(2),t.Y8G("ngIf",a.roomObjs.length>0)("ngIfElse",e),t.R7$(3),t.Y8G("isScrollToTop",!0)}}let Ni=(()=>{var o;class s extends y.H{set drawer(e){this.sAztMatDrawerService.resizeDrawerHeight(!0,e)}addOrUpdateRoom(e){this.sAztDialogService.open(vi,{data:{infrastructureId:this.infrastructureId,room:e},restoreFocus:!1,width:"800px"}).afterClosed().subscribe(i=>{i&&this.getRooms()})}showDeleteRoomDialog(e){var a=this.commonService.myTranslateInstant("lang_auto_ban_co_chac_chan_muon_xoa")+' <div class="text-md font-medium inline"> '+e.name+" </div>";this.sAztDialogService.open(U.u,{data:{content:a},restoreFocus:!1,width:"800px"}).afterClosed().subscribe(i=>{i&&(this.isDeletingId=e.id,this.waitDestroy(this.wrapApiResponse(this.infrastructureService.apiInfrastructuresInfrastructureIdRoomsRoomIdDelete(this.obj.id,e.id)).subscribe(l=>{if(this.isDeletingId=0,!l.success)return this.errorStatusObj(l.message,!0);this.roomObjs=this.roomObjs.filter(c=>e.id!=c.id),this.successStatusObj("lang_core_xoa_phong_hoc_thanh_cong",!0)})))})}changeActivity(){if(!this.obj)return;this.isChangingActivityId=this.obj.id;let e=0==this.obj.status?this.infrastructureService.apiInfrastructuresIdActivatePut(this.obj.id):this.infrastructureService.apiInfrastructuresIdDeactivatePut(this.obj.id);this.waitDestroy(this.wrapApiResponse(e).subscribe(a=>(this.isChangingActivityId=0,a.success?a.data&&this.obj?void(this.obj.status=0==this.obj.status?1:0):this.errorStatusObj("lang_core_co_loi_khi_doi_trang_thai",!0):this.errorStatusObj(a.message,!0))))}initData(){this.initStatusObj(),this.waitDestroy(this.wrapApiResponse(this.infrastructureService.apiInfrastructuresIdGet(this.infrastructureId)).subscribe(e=>{if(!e.success||!e.data)return this.errorStatusObj(e.message,!0);this.obj=e.data,this.getRooms()}))}getRooms(){this.initStatusObj(),this.waitDestroy(this.wrapApiResponse(this.infrastructureService.apiInfrastructuresInfrastructureIdRoomsGet(this.infrastructureId,-1,100)).subscribe(e=>{if(!e.success)return this.errorStatusObj(e.message,!0);this.roomObjs=e.data?.list??[],this.stopStatusObj()}))}ngOnInit(){this.commonService.translateMetaData({title:"lang_core_chi_tiet_co_so",image:"lang_cms_test_image"}),super.ngOnInit(),this.infrastructureId=Number(this.commonService.getMyParam(this.activeRoute,"id")),this.initData()}constructor(e,a,i,l){super(),this.activeRoute=e,this.infrastructureService=a,this.sAztDialogService=i,this.sAztMatDrawerService=l,this.backToLink="/business/infrastructure",this.infrastructureId=0,this.roomObjs=[],this.isChangingActivityId=0,this.isDeletingId=0}}return(o=s).\u0275fac=function(e){return new(e||o)(t.rXU(h.nX),t.rXU(Mt.B),t.rXU(j.i),t.rXU(ue.n))},o.\u0275cmp=t.VBU({type:o,selectors:[["app-list-classroom-in-infrastructure"]],viewQuery:function(e,a){if(1&e&&t.GBs(Ii,5),2&e){let i;t.mGM(i=t.lsd())&&(a.drawer=i.first)}},standalone:!0,features:[t.Jv_([ue.n]),t.Vt3,t.aNF],decls:4,vars:3,consts:[["doneLoading",""],["drawer",""],["menuSelectActivity","matMenu"],["emptyList",""],[3,"headerBackToLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[1,"azt-drawer-container","mt-5",3,"hasBackdrop"],[3,"ngClass","mode","opened"],[1,"azt-draw-left",2,"overflow-x","hidden",3,"ngClass"],[1,"box"],[1,"p-3"],[1,"flex","items-center"],[1,"text-md","font-medium","truncate","mr-auto","mt-2",3,"matTooltip"],[1,"flex","items-center","mt-1"],[1,"text-sm"],[1,"flex","items-center","mt-2",3,"matMenuTriggerFor"],[1,"text-sm","clickable","btn","btn-primary",3,"ngClass"],["class","mr-1",4,"ngIf"],["name","chevron-down","size","16"],[1,"dropdown-menu","w-56","show","relative"],[1,"dropdown-content"],["azt-track-service","class-list-1UlnYstZqkD",1,"dropdown-item","w-full","clickable",3,"click"],["class","pt-3",4,"ngIf"],[3,"ngClass"],[1,"azt-drawer-content",3,"ngClass"],[1,"flex","box","sm:h-auto","rounded-md","border","border-slate-200/60","dark:border-darkmode-400","p-2","text-slate-500","mb-2"],["azt-track-service","detail-infrastructure-dBQFBBora","class","btn btn-sm mr-2",3,"matTooltip","click",4,"ngIf"],["azt-track-service","detail-infrastructure-qa6EG4yZyv","class","btn btn-sm mr-2",3,"matTooltip","click",4,"ngIf"],[1,"relative","flex","ml-auto"],["azt-track-service","detail-infrastructure-LAD7A9vcci",1,"btn","btn-primary","pl-2","pr-2","py-1",3,"click"],["name","plus","size","16"],["class","text-sm ml-2",4,"ngIf"],[1,"box","relative","p-3",3,"ngStyle"],[1,"font-medium","truncate","mr-auto"],[4,"ngIf","ngIfElse"],[3,"isScrollToTop"],[1,"mr-1"],[1,"pt-3"],[3,"htmlEmbedCode"],["azt-track-service","detail-infrastructure-dBQFBBora",1,"btn","btn-sm","mr-2",3,"click","matTooltip"],["name","panel-left-open","size","16"],["azt-track-service","detail-infrastructure-qa6EG4yZyv",1,"btn","btn-sm","mr-2",3,"click","matTooltip"],["name","panel-left-close","size","16"],[1,"text-sm","ml-2"],[1,"grid","grid-cols-12","gap-3"],["class","col-span-12 sm:col-span-6 md:col-span-4 2xl:col-span-3",4,"ngFor","ngForOf"],[1,"col-span-12","sm:col-span-6","md:col-span-4","2xl:col-span-3"],[1,"flex","justify-between","info-class-room"],[1,"col-information"],[1,"text-md","font-medium","truncate","mr-auto",3,"matTooltip"],[1,"flex"],["azt-track-service","list-classroom-in-infrastructure--l-N2YP70a",1,"btn-flex","items-center","justify-center","mr-2",3,"click","matTooltip"],["name","square-pen","size","16",3,"ngClass"],["azt-track-service","list-classroom-in-infrastructure-QSKDgXBGhe",1,"flex","items-center","justify-center",3,"click","matTooltip"],["name","trash-2","size","16",3,"ngClass"],[1,"flex","justify-center"]],template:function(e,a){if(1&e&&(t.j41(0,"teacher-layout",4),t.DNE(1,Ti,1,1,"azt-loading-effect",5)(2,Bi,54,51,"ng-template",null,0,t.C5r),t.k0s()),2&e){const i=t.sdS(3);t.Y8G("headerBackToLink",a.backToLink),t.R7$(),t.Y8G("ngIf",a.statusObj.loading)("ngIfElse",i)}},dependencies:[O.Q,R.K,w.R,pe,ht.I,u.MD,u.YU,u.Sq,u.bT,u.B3,r.X1,h.iI,r.YN,p.wp,I.s,Q.kk,Q.Cp,Lt.qe,Lt.$C,Lt.$l,lt.oV,C.flO,C.WGl,v.L,x.Id,d.k],styles:[".btn-activity[_ngcontent-%COMP%]{padding:5px 5px 5px 10px;background:#228b22;color:#fff;border-radius:10px;font-weight:500}.btn-activity[_ngcontent-%COMP%]:hover{background:#37ca37!important}.btn-not-activity[_ngcontent-%COMP%]{padding:5px 5px 5px 10px;background:#98110c;color:#fff;border-radius:10px;font-weight:500}.btn-not-activity[_ngcontent-%COMP%]:hover{background:#b61a15!important}.text-sm[_ngcontent-%COMP%]{font-size:.82rem;line-height:1.2rem}.col-information[_ngcontent-%COMP%]{padding:2px 5px;width:calc(100% - 50px)}.info-class-room[_ngcontent-%COMP%]{background:#f0f8ff;padding:10px;border-radius:6px}.setting_options[_ngcontent-%COMP%]{display:flex;align-items:center;border-radius:.375rem;padding:.5rem}.azt-draw-left-container[_ngcontent-%COMP%] > .mat-drawer-inner-container[_ngcontent-%COMP%]{overflow:auto!important}.hide[_ngcontent-%COMP%]{display:none!important}.hover[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]:hover{width:20px!important;height:20px!important;stroke-width:1.8px!important}*[_ngcontent-%COMP%]:focus{outline:none}input[type=checkbox][_ngcontent-%COMP%]{zoom:.9;cursor:pointer}label[_ngcontent-%COMP%]{cursor:pointer}.slider[_ngcontent-%COMP%]{height:calc(100vh - 80px)}.slider-nav[_ngcontent-%COMP%]{background:#f9f9f9;border:1px solid #e9e9e9;border-radius:5px;height:calc(100vh - 80px);padding:15px}.slider-content[_ngcontent-%COMP%]{background:#fff;border:1px solid #e9e9e9;height:calc(100vh - 80px);border-radius:5px;padding:15px 0 15px 15px;position:relative}.slider-content-block[_ngcontent-%COMP%]{border:1px solid #e9e9e9;border-radius:3px;margin-right:15px}.slider-bar[_ngcontent-%COMP%]{background:#fafafa;display:flex;align-items:center;justify-content:space-between;padding:5px 15px;flex-wrap:wrap;border-bottom:1px solid #e9e9e9}.slider-bar-title[_ngcontent-%COMP%]{margin:0;font-size:14px;color:#333}.btn-delete[_ngcontent-%COMP%]{margin-left:10px;font-weight:700;color:#838383;padding-top:5px}.group-body-item[_ngcontent-%COMP%]{display:flex;align-items:center;margin-right:15px;margin-bottom:15px}.group-content[_ngcontent-%COMP%]{padding:0!important}.add-member[_ngcontent-%COMP%]{margin-bottom:15px;position:relative;display:flex}.search-result[_ngcontent-%COMP%]{height:166px;overflow-y:auto}.bg-custom[_ngcontent-%COMP%]{background:#ecf0f5}.w-33[_ngcontent-%COMP%]{width:33%}.w-80[_ngcontent-%COMP%]{width:80%}.mat-drawer-custom[_ngcontent-%COMP%]{background:#ecf0f5;border:none}.search-member[_ngcontent-%COMP%]{padding:10px;z-index:99}.search-member[_ngcontent-%COMP%]   .search-input[_ngcontent-%COMP%]::placeholder{font-size:13px;color:#999}.search-icon[_ngcontent-%COMP%]{display:flex;align-items:center;height:40px}.btn-add-member[_ngcontent-%COMP%]{font-size:11px;text-transform:inherit;display:flex;align-items:center;border-radius:3px;border:1px solid #e9e9e9;padding:2px 10px}.btn-add-member[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px;margin-right:5px}.btn-del-all-member[_ngcontent-%COMP%]{font-size:11px;text-transform:inherit;display:flex;color:#fff;margin-left:5px;align-items:center;border:1px solid #f44336;background-color:#f44336;border-radius:3px;padding:2px 10px}.btn-del-all-member[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px;margin-right:5px}.btn-add-all-member[_ngcontent-%COMP%]{font-size:11px;text-transform:inherit;display:flex;color:#fff;margin-left:5px;align-items:center;border:1px solid #169bd5;background-color:#169bd5;border-radius:3px;padding:2px 10px}.btn-add-all-member[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px;margin-right:5px}.btn-add-member[_ngcontent-%COMP%]:hover{background:#eee}.btn-del-all-member[_ngcontent-%COMP%]:hover{background:#d3392e}.btn-add-all-member[_ngcontent-%COMP%]:hover{background:#066d99}.slider-bar-body[_ngcontent-%COMP%]{display:flex;padding:15px 15px 0;flex-wrap:wrap;overflow-y:auto}.slider-bar-left[_ngcontent-%COMP%]{display:flex;align-items:center}.link-research[_ngcontent-%COMP%]{margin-left:15px;font-size:12px}.link-research[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:10px}.link-research[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#a7a7a7}.form-check-input[_ngcontent-%COMP%]{margin-top:2px}.text-checkbox[_ngcontent-%COMP%]{font-size:13px;margin-bottom:0;font-family:Arial,Helvetica,sans-serif;display:inline}.role-teacher[_ngcontent-%COMP%]{border:1px solid #e9e9e9;padding:12px;border-radius:3px}.role-item[_ngcontent-%COMP%]{margin-bottom:5px}.checkbox-input[_ngcontent-%COMP%]{margin-right:3px}.slider-content-footer[_ngcontent-%COMP%]{position:absolute;bottom:20px;right:20px}.btn-save[_ngcontent-%COMP%], .btn-cannel[_ngcontent-%COMP%]{font-size:12px;border-radius:5px;padding:5px 25px;transition:all .5s}.btn-save[_ngcontent-%COMP%]{border:none;background:#169bd5;margin-left:10px;color:#fff;padding:6px 25px}.btn-save[_ngcontent-%COMP%]:hover:not([disabled]){background:#066d99}.btn-cannel[_ngcontent-%COMP%]{border:1px solid #797979;color:#797979}.btn-cannel[_ngcontent-%COMP%]:hover{background:#eee}.btn-save[_ngcontent-%COMP%]:disabled{background:#e0e0e0!important}.class-title[_ngcontent-%COMP%]{width:100%;font-size:13px;font-weight:700;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.slider-body[_ngcontent-%COMP%]{min-height:20vh;padding:15px 20px 0;overflow-y:auto;overflow-x:hidden}.slider-body-main[_ngcontent-%COMP%]{height:calc(100vh - 200px);overflow:hidden}.h300[_ngcontent-%COMP%]{height:calc(100vh - 260px)}.search[_ngcontent-%COMP%]{position:relative;background:#fff;border-radius:3px}.search-input[_ngcontent-%COMP%]{width:88%;font-weight:400;font-style:normal;margin-right:25px;border:none}.search-input[_ngcontent-%COMP%]:focus-visible{border:none!important}.search-input[_ngcontent-%COMP%]::placeholder{font-size:13px;color:#999}.search-icon[_ngcontent-%COMP%]{font-size:20px;color:#b8b8b8;position:absolute;top:5px;right:0;cursor:pointer}.note-text[_ngcontent-%COMP%]{font-size:16px;font-weight:600;text-align:center}.group[_ngcontent-%COMP%]{margin:10px 0;background:#fff;border-radius:3px;border:1px solid #e9e9e9;overflow:hidden;height:calc(100vh - 195px)}.group-block[_ngcontent-%COMP%]{margin-bottom:20px}.group-content[_ngcontent-%COMP%]{margin-top:15px;padding:0 15px}.group-item[_ngcontent-%COMP%]{margin-bottom:15px;padding:3px;position:relative}.group-btn[_ngcontent-%COMP%]{background:transparent;border:none;text-transform:inherit;display:flex;align-items:center;width:100%;transition:all .5s;border-radius:5px}.group-info[_ngcontent-%COMP%]{text-align:left;line-height:1}.group-icon[_ngcontent-%COMP%]{font-size:30px;color:#169bd5;width:30px;height:30px}.group-name[_ngcontent-%COMP%]{font-size:13px;margin:0 0 0 15px;max-width:120px}.group-text[_ngcontent-%COMP%]{font-size:10px;color:#a2a2a2;margin-bottom:0;margin-left:15px;margin-top:5px}.class-active[_ngcontent-%COMP%]{width:100%;background:#eee;border-radius:5px}  .dark .class-active{background:#354567}.group-btn-menu[_ngcontent-%COMP%]{position:absolute;top:50%;right:0;z-index:99;transform:translateY(-50%)}.slider-bottom[_ngcontent-%COMP%]   .btn-add[_ngcontent-%COMP%]{font-size:13px;color:#00a7d0;background:transparent;border:none;text-transform:inherit;transition:all .3s}.slider-bottom[_ngcontent-%COMP%]   .btn-add[_ngcontent-%COMP%]:hover{color:#0a5264}.color-disabled[_ngcontent-%COMP%]{color:#8b8b8b}.group-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}@media screen and (max-width: 1200px){.p-mbr-0[_ngcontent-%COMP%]{padding-right:0}.slider-content[_ngcontent-%COMP%], .slider-nav[_ngcontent-%COMP%]{height:86vh}.slider-body[_ngcontent-%COMP%]{min-height:20vh}.slider-body-main[_ngcontent-%COMP%]{height:calc(100vh - 220px);overflow:hidden}.group[_ngcontent-%COMP%]{height:calc(100vh - 270px)}.group-name[_ngcontent-%COMP%]{max-width:190px}}@media screen and (max-width: 480px){.slider-body-main[_ngcontent-%COMP%]{height:auto!important}.slider-body[_ngcontent-%COMP%]{height:auto}.fixed-nav[_ngcontent-%COMP%]{position:fixed;top:0;left:15px;padding:5px;background:#ecf0f5;width:100%;z-index:99}.slider-content[_ngcontent-%COMP%]{min-height:calc(100vh - 112px);height:auto}.slider-nav[_ngcontent-%COMP%]{height:100vh}.slider-content-block[_ngcontent-%COMP%]{margin-bottom:50px}.slider-content[_ngcontent-%COMP%]{margin-bottom:15px}.slider-bar-body[_ngcontent-%COMP%]{height:auto}.class-title[_ngcontent-%COMP%]{white-space:normal;overflow:auto}.group[_ngcontent-%COMP%]{height:calc(100vh - 150px)}.group-name[_ngcontent-%COMP%]{max-width:145px}}@media screen and (max-width: 321px){.group[_ngcontent-%COMP%]{height:80%}.group-name[_ngcontent-%COMP%]{max-width:100px}}"]}),s})();function Li(o,s){1&o&&(t.j41(0,"div",24),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&o&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"lang_core_vui_long_nhap_ten_co_so")," "))}function Yi(o,s){1&o&&(t.j41(0,"div",24),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&o&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"lang_core_vui_long_nhap_dia_chi")," "))}function Ui(o,s){1&o&&(t.j41(0,"div",24),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&o&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"lang_auto_so_dien_thoai_phai_la_so_va_10_ky_tu")," "))}function Vi(o,s){1&o&&(t.j41(0,"div",25),t.nrm(1,"azt-loading-ui",26),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s()),2&o&&(t.R7$(2),t.SpI(" ",t.bMT(3,1,"lang_auto_dang_luu_doing")," "))}function Xi(o,s){if(1&o){const n=t.RV6();t.j41(0,"button",27),t.bIt("click",function(){t.eBV(n);const a=t.XpG();return t.Njj(a.saveData(!0))}),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()}if(2&o){const n=t.XpG();t.Y8G("disabled",n.statusObj.loading||n.form.controls.infrastructureName.errors||n.form.controls.phoneNumber.errors||n.form.controls.address.errors),t.R7$(),t.SpI(" ",t.bMT(2,2,"lang_core_luu_va_dong")," ")}}let Wi=(()=>{var o;class s extends ot._{closeDialog(){this.dialogRef.close(this.isLoadData)}saveData(e){var a={name:this.form.getRawValue().infrastructureName,address:this.form.getRawValue().address,mapAddress:this.form.getRawValue().mapAddress,phone:this.form.getRawValue().phoneNumber};this.initStatusObj(),this.waitDestroy(this.data?this.infrastructureService.apiInfrastructuresIdPut(this.data.id,a).subscribe(i=>{i.success?(this.successStatusObj("lang_core_tsua_co_so_thanh_cong",!0),this.dialogRef.close(!0)):this.errorStatusObj("lang_core_sua_co_so_khong_thanh_cong",!0)}):this.wrapApiResponse(this.infrastructureService.apiInfrastructuresPost(a)).subscribe(i=>{if(!i.success)return this.errorStatusObj(i.message,!0);e?this.dialogRef.close(!0):(this.isLoadData=!0,this.form.reset(),this.stopStatusObj()),this.successStatusObj("lang_core_them_co_so_thanh_cong",!0)}))}ngOnInit(){}constructor(e,a,i){super(i,a),this.infrastructureService=e,this.dialogRef=a,this.data=i,this.isLoadData=!1,this.form=new r.gE({infrastructureName:new r.MJ(i?.name??"",{nonNullable:!0,validators:[r.k0.required]}),address:new r.MJ(i?.address??"",{nonNullable:!0,validators:[r.k0.required]}),phoneNumber:new r.MJ(i?.phone??"",{nonNullable:!0,validators:[r.k0.pattern(/^[0-9\-]*$/),r.k0.minLength(10),r.k0.maxLength(10)]}),mapAddress:new r.MJ(i?.mapAddress??"",{nonNullable:!0})})}}return(o=s).\u0275fac=function(e){return new(e||o)(t.rXU(Mt.B),t.rXU(N.CP,8),t.rXU(N.Vh))},o.\u0275cmp=t.VBU({type:o,selectors:[["app-create-or-info-infrastructure"]],standalone:!0,features:[t.Vt3,t.aNF],decls:56,vars:51,consts:[[1,"box","infrastructure-dialog"],[3,"formGroup"],[1,"border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"p-3","border-b","border-slate-200/60","dark:border-darkmode-400"],[1,"text-md","font-medium","flex","items-center"],[1,"p-5","list-class"],["for","infrastructureName",1,"form-label"],["type","text","id","infrastructureName","formControlName","infrastructureName",1,"form-control",3,"placeholder"],["class","text-xs text-danger mt-1",4,"ngIf"],[1,"mt-3"],["for","address",1,"form-label"],["type","text","id","address","formControlName","address",1,"form-control",3,"placeholder"],["for","phoneNumber",1,"form-label"],["type","text","id","phoneNumber","formControlName","phoneNumber",1,"form-control",3,"placeholder"],["for","map",1,"form-label"],[1,"text-sm"],["azt-track-service","create-or-update-info-infrastructure-dialog-0UswBviDw","href","https://www.google.com/maps","target","_blank",2,"color","blue","text-decoration","underline"],["type","text","formControlName","mapAddress",1,"form-control",3,"placeholder"],[3,"htmlEmbedCode"],["class","box-save-doing",4,"ngIf"],[1,"p-3","flex","justify-end"],["azt-track-service","create-or-update-classroom-dialog-kKoehX_GgaD",1,"btn","btn-secondary","mr-2",3,"click"],["azt-track-service","create-or-update-classroom-dialog-GmD3tfo-w-8",1,"btn","btn-primary",3,"click","disabled"],["azt-track-service","create-or-update-classroom-dialog-GmD3tfo-w-8","class","btn btn-info ml-2",3,"disabled","click",4,"ngIf"],[1,"text-xs","text-danger","mt-1"],[1,"box-save-doing"],[1,"mr-1"],["azt-track-service","create-or-update-classroom-dialog-GmD3tfo-w-8",1,"btn","btn-info","ml-2",3,"click","disabled"]],template:function(e,a){1&e&&(t.j41(0,"div",0)(1,"form",1)(2,"div",2)(3,"div",3)(4,"h3",4),t.EFF(5),t.nI1(6,"mytranslate"),t.k0s()(),t.j41(7,"azt-mat-dialog-content")(8,"div",5)(9,"div")(10,"label",6),t.EFF(11),t.nI1(12,"mytranslate"),t.k0s(),t.nrm(13,"input",7),t.nI1(14,"mytranslate"),t.DNE(15,Li,3,3,"div",8),t.k0s(),t.j41(16,"div",9)(17,"label",10),t.EFF(18),t.nI1(19,"mytranslate"),t.k0s(),t.nrm(20,"input",11),t.nI1(21,"mytranslate"),t.DNE(22,Yi,3,3,"div",8),t.k0s(),t.j41(23,"div",9)(24,"label",12),t.EFF(25),t.nI1(26,"mytranslate"),t.k0s(),t.nrm(27,"input",13),t.nI1(28,"mytranslate"),t.DNE(29,Ui,3,3,"div",8),t.k0s(),t.j41(30,"div",9)(31,"label",14),t.EFF(32),t.nI1(33,"mytranslate"),t.k0s(),t.j41(34,"div",15),t.EFF(35),t.nI1(36,"mytranslate"),t.j41(37,"a",16),t.EFF(38,"Google Maps"),t.k0s(),t.EFF(39),t.nI1(40,"mytranslate"),t.nrm(41,"br"),t.EFF(42),t.nI1(43,"mytranslate"),t.k0s(),t.nrm(44,"input",17),t.nI1(45,"mytranslate"),t.k0s(),t.nrm(46,"azt-google-map-embed",18),t.DNE(47,Vi,4,3,"div",19),t.k0s()()(),t.j41(48,"div",20)(49,"button",21),t.bIt("click",function(){return a.closeDialog()}),t.EFF(50),t.nI1(51,"mytranslate"),t.k0s(),t.j41(52,"button",22),t.bIt("click",function(){return a.saveData(!1)}),t.EFF(53),t.nI1(54,"mytranslate"),t.k0s(),t.DNE(55,Xi,3,4,"button",23),t.k0s()()()),2&e&&(t.R7$(),t.Y8G("formGroup",a.form),t.R7$(4),t.SpI(" ",t.bMT(6,23,a.data?"lang_core_sua_co_so":"lang_core_them_co_so")," "),t.R7$(6),t.SpI(" ",t.bMT(12,25,"lang_core_ten_co_so")," "),t.R7$(2),t.FS9("placeholder",t.bMT(14,27,"lang_core_nhap_ten_co_so")),t.BMQ("autofocus",!1),t.R7$(2),t.Y8G("ngIf",a.form.controls.infrastructureName.dirty&&a.form.controls.infrastructureName.errors),t.R7$(3),t.SpI(" ",t.bMT(19,29,"lang_test_market_address")," "),t.R7$(2),t.FS9("placeholder",t.bMT(21,31,"lang_core_vui_nhap_dia_chi")),t.R7$(2),t.Y8G("ngIf",a.form.controls.address.dirty&&a.form.controls.address.errors),t.R7$(3),t.SpI(" ",t.bMT(26,33,"lang_number_phone")," "),t.R7$(2),t.FS9("placeholder",t.bMT(28,35,"lang_auto_nhap_so_dien_thoai")),t.R7$(2),t.Y8G("ngIf",a.form.controls.phoneNumber.dirty&&a.form.controls.phoneNumber.errors),t.R7$(3),t.SpI(" ",t.bMT(33,37,"lang_auto_ban_do")," "),t.R7$(3),t.SpI(" ",t.bMT(36,39,"lang_core_khong_hoat_dong_huong_dan_copy_ma_html_map_1")," "),t.R7$(4),t.SpI(" ",t.bMT(40,41,"lang_core_khong_hoat_dong_huong_dan_copy_ma_html_map_2")," "),t.R7$(3),t.SpI(" ",t.bMT(43,43,"lang_core_khong_hoat_dong_huong_dan_copy_ma_html_map_3")," "),t.R7$(2),t.FS9("placeholder",t.bMT(45,45,"lang_core_dan_dia_chi_da_sao_chep")),t.R7$(2),t.Y8G("htmlEmbedCode",a.form.controls.mapAddress.value),t.R7$(),t.Y8G("ngIf",a.statusObj.loading),t.R7$(3),t.JRh(t.bMT(51,47,"lang_cms_common_close_btn")),t.R7$(2),t.Y8G("disabled",a.statusObj.loading||a.form.controls.infrastructureName.errors||a.form.controls.phoneNumber.errors||a.form.controls.address.errors),t.R7$(),t.SpI(" ",t.bMT(54,49,a.data?"lang_student_classroom_list_update":"lang_button_save")," "),t.R7$(2),t.Y8G("ngIf",!a.data))},dependencies:[ft.U,pe,w.R,u.MD,u.bT,r.X1,r.qT,r.me,r.BC,r.cb,r.j4,r.JD,h.iI,r.YN,p.wp,I.s,C.flO,v.L,x.Id,d.k,st.t],styles:[".truncate[_ngcontent-%COMP%]{max-width:90px;vertical-align:middle;cursor:pointer}.iframeViewMap[_ngcontent-%COMP%]{width:-webkit-fill-available;height:auto}iframe[_ngcontent-%COMP%]{width:-webkit-fill-available}@media (max-width: 640px){.truncate[_ngcontent-%COMP%]{max-width:180px}.list-class[_ngcontent-%COMP%]{max-height:60vh}}.text-sm[_ngcontent-%COMP%]{font-size:12px}.box-save-doing[_ngcontent-%COMP%]{position:fixed;height:100%;width:100%;left:0;top:0;display:flex;justify-content:center;align-items:center;background:#ffffffad}"]}),s})();const Ji=()=>({"mr-2":!0}),Hi=o=>[o],Qi=()=>({"mr-2 text-danger":!0});function qi(o,s){if(1&o&&t.nrm(0,"azt-loading-effect",4),2&o){const n=t.XpG();t.Y8G("currentStatusObj",n.statusObj)}}function Ki(o,s){1&o&&t.nrm(0,"azt-loading-ui",32)}function Zi(o,s){1&o&&t.nrm(0,"azt-loading-ui",32)}function ts(o,s){if(1&o){const n=t.RV6();t.j41(0,"div",14)(1,"a",15),t.nI1(2,"navigationLocalize"),t.j41(3,"h3",16),t.EFF(4),t.k0s(),t.j41(5,"div",17)(6,"span",18),t.EFF(7),t.nI1(8,"mytranslate"),t.k0s(),t.EFF(9),t.k0s(),t.j41(10,"div",17)(11,"span",18),t.EFF(12),t.nI1(13,"mytranslate"),t.k0s(),t.EFF(14),t.k0s(),t.j41(15,"div",17)(16,"span",18),t.EFF(17),t.nI1(18,"mytranslate"),t.k0s(),t.EFF(19),t.k0s()(),t.j41(20,"div",19)(21,"div")(22,"div",20),t.DNE(23,Ki,1,0,"azt-loading-ui",21),t.EFF(24),t.nI1(25,"mytranslate"),t.nrm(26,"lucide-icon",22),t.k0s(),t.j41(27,"mat-menu",23,1)(29,"div",24)(30,"ul",25)(31,"li")(32,"button",26),t.bIt("click",function(){const a=t.eBV(n).$implicit,i=t.XpG(2);return t.Njj(i.changeActivity(a))}),t.EFF(33),t.nI1(34,"mytranslate"),t.k0s()()()()()(),t.j41(35,"div",27)(36,"button",28),t.nI1(37,"mytranslate"),t.bIt("click",function(){const a=t.eBV(n).$implicit,i=t.XpG(2);return t.Njj(i.openAddOrEditInfrastructure(a))}),t.nrm(38,"lucide-icon",29),t.k0s(),t.j41(39,"button",30),t.nI1(40,"mytranslate"),t.bIt("click",function(){const a=t.eBV(n).$implicit,i=t.XpG(2);return t.Njj(i.showDeleteRoomDialog(a))}),t.DNE(41,Zi,1,0,"azt-loading-ui",21),t.nrm(42,"lucide-icon",31),t.k0s()()()()}if(2&o){const n=s.$implicit,e=t.sdS(28),a=t.XpG(2);t.R7$(),t.Y8G("routerLink",t.eq3(34,Hi,t.bMT(2,18,"/business/infrastructure/"+n.id))),t.R7$(2),t.FS9("matTooltip",n.name),t.R7$(),t.SpI(" ",n.name," "),t.R7$(3),t.JRh(t.bMT(8,20,"lang_test_market_address")),t.R7$(2),t.SpI(" : ",n.address," "),t.R7$(3),t.JRh(t.bMT(13,22,"lang_auto_dien_thoai")),t.R7$(2),t.SpI(" : ",n.phone," "),t.R7$(3),t.JRh(t.bMT(18,24,"lang_auto_tong_so_phong_hoc")),t.R7$(2),t.SpI(" : ",n.totalRoom," "),t.R7$(3),t.Y8G("ngClass",1==n.status?"btn-activity":"btn-un-activity")("matMenuTriggerFor",e),t.R7$(),t.Y8G("ngIf",a.isChangingActivityId==n.id),t.R7$(),t.SpI(" ",t.bMT(25,26,0==n.status?"lang_core_khong_hoat_dong":"lang_auto_hoat_dong")," "),t.R7$(9),t.SpI(" ",t.bMT(34,28,1==n.status?"lang_core_khong_hoat_dong":"lang_auto_hoat_dong")," "),t.R7$(3),t.FS9("matTooltip",t.bMT(37,30,"lang_button_edit")),t.R7$(3),t.FS9("matTooltip",t.bMT(40,32,"lang_student_classroom_list_delete")),t.R7$(2),t.Y8G("ngIf",a.isDeletingId==n.id),t.R7$(),t.Y8G("ngClass",t.lJ4(36,Qi))}}function es(o,s){if(1&o){const n=t.RV6();t.j41(0,"h3",5),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s(),t.j41(3,"div",6),t.DNE(4,ts,43,37,"div",7),t.j41(5,"div",8)(6,"div",9),t.bIt("click",function(){t.eBV(n);const a=t.XpG();return t.Njj(a.openAddOrEditInfrastructure())}),t.j41(7,"div",10),t.nrm(8,"lucide-icon",11),t.j41(9,"div",12),t.EFF(10),t.nI1(11,"mytranslate"),t.k0s()()()()(),t.nrm(12,"azt-scroll-to-top-bottom",13)}if(2&o){const n=t.XpG();t.R7$(),t.SpI(" ",t.bMT(2,5,"lang_auto_quan_ly_co_so_vat_chat")," "),t.R7$(3),t.Y8G("ngForOf",n.objs),t.R7$(4),t.Y8G("ngClass",t.lJ4(9,Ji)),t.R7$(2),t.SpI(" ",t.bMT(11,7,"lang_auto_them_co_so")," "),t.R7$(2),t.Y8G("isScrollToTop",!0)}}let ns=(()=>{var o;class s extends y.H{openAddOrEditInfrastructure(e){this.sAztDialogService.open(Wi,{data:e,restoreFocus:!1,width:"800px"}).afterClosed().subscribe(a=>{a&&this.getData()})}showDeleteRoomDialog(e){var a=this.commonService.myTranslateInstant("lang_auto_ban_co_chac_chan_muon_xoa")+' <div class="text-md font-medium inline"> '+e.name+" </div> ?";this.sAztDialogService.open(U.u,{data:{content:a},restoreFocus:!1,width:"500px"}).afterClosed().subscribe(i=>{i&&(this.isDeletingId=e.id,this.waitDestroy(this.wrapApiResponse(this.infrastructureService.apiInfrastructuresIdDelete(e.id)).subscribe(l=>(this.isDeletingId=0,l.success?l?(this.objs=this.objs.filter(c=>c.id!=e.id),void this.successStatusObj("lang_core_xoa_co_so_thanh_cong")):this.errorStatusObj("lang_core_xoa_co_so_khong_thanh_cong",!0):this.errorStatusObj(l.message,!0)))))})}changeActivity(e){var a=this.objs.find(l=>l.id==e.id);if(!a)return;this.isChangingActivityId=e.id;let i=0==a.status?this.infrastructureService.apiInfrastructuresIdActivatePut(e.id):this.infrastructureService.apiInfrastructuresIdDeactivatePut(e.id);this.waitDestroy(this.wrapApiResponse(i).subscribe(l=>(this.isChangingActivityId=0,l.success?l.data&&a?void(a.status=0==a.status?1:0):this.errorStatusObj("lang_core_co_loi_khi_doi_trang_thai",!0):this.errorStatusObj(l.message,!0))))}getData(){this.initStatusObj(),this.waitDestroy(this.wrapApiResponse(this.infrastructureService.apiInfrastructuresListPost({size:-1,page:1})).subscribe(e=>{if(!e.success)return this.errorStatusObj(e.message,!0);this.objs=e.data?.list??[],this.stopStatusObj()}))}ngOnInit(){this.commonService.translateMetaData({title:"lang_auto_co_so_vat_chat",image:"lang_cms_test_image"}),super.ngOnInit(),this.getData()}constructor(e,a){super(),this.infrastructureService=e,this.sAztDialogService=a,this.objs=[],this.isChangingActivityId=0,this.isDeletingId=0}}return(o=s).\u0275fac=function(e){return new(e||o)(t.rXU(Mt.B),t.rXU(j.i))},o.\u0275cmp=t.VBU({type:o,selectors:[["list-infrastructure"]],standalone:!0,features:[t.Vt3,t.aNF],decls:4,vars:3,consts:[["doneLoading",""],["menuSelectActivity","matMenu"],[3,"headerBackToLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[1,"text-md-title","font-medium","truncate","mr-auto","mt-5"],[1,"grid","grid-cols-12","gap-3","sm:gap-6","mt-5"],["class","col-span-12 sm:col-span-6 xl:col-span-3 box",4,"ngFor","ngForOf"],[1,"col-span-12","sm:col-span-6","md:col-span-4","xl:col-span-3"],["azt-track-service","list-infrastructure-0HrlOWafsi",1,"grid","items-center","btn-add-infrastructure","clickable",3,"click"],[1,"flex","justify-center"],["name","plus","size","24",3,"ngClass"],[1,"text-add-cs"],[3,"isScrollToTop"],[1,"col-span-12","sm:col-span-6","xl:col-span-3","box"],["azt-track-service","list-infrastructure-tBcgbalH2n",1,"clickable","block","p-3","pb-0",3,"routerLink"],[1,"text-md","font-bold","truncate","mr-auto",3,"matTooltip"],[1,"text-sm"],[1,"font-medium"],[1,"flex","justify-between","items-center","p-3"],[1,"text-sm","medium","clickable","btn","btn-primary",3,"ngClass","matMenuTriggerFor"],["class","mr-1",4,"ngIf"],["name","chevron-down","size","16"],["xPosition","before"],[1,"dropdown-menu","w-56","show","relative"],[1,"dropdown-content"],["azt-track-service","class-list-1UlnYstZqkD",1,"dropdown-item","w-full",3,"click"],[1,"flex"],["azt-track-service","list-infrastructure-xLbmhq55M",1,"btn-flex","items-center","justify-center","mr-2",3,"click","matTooltip"],["name","square-pen","size","20",2,"color","dodgerblue"],["azt-track-service","list-infrastructure--kkgd3LUEQ",1,"flex","items-center","justify-center",3,"click","matTooltip"],["name","trash-2","size","16",3,"ngClass"],[1,"mr-1"]],template:function(e,a){if(1&e&&(t.j41(0,"teacher-layout",2),t.DNE(1,qi,1,1,"azt-loading-effect",3)(2,es,13,10,"ng-template",null,0,t.C5r),t.k0s()),2&e){const i=t.sdS(3);t.Y8G("headerBackToLink","/business/dashboard"),t.R7$(),t.Y8G("ngIf",a.statusObj.loading)("ngIfElse",i)}},dependencies:[O.Q,R.K,w.R,ht.I,p.F2,u.MD,u.YU,u.Sq,u.bT,r.X1,h.iI,h.Wk,r.YN,p.wp,I.s,Q.kk,Q.Cp,lt.oV,C.flO,C.WGl,v.L,x.Id,d.k],styles:[".btn-activity[_ngcontent-%COMP%]{padding:5px 5px 5px 10px;background:#228b22;color:#fff;border-radius:10px;font-weight:500}.btn-activity[_ngcontent-%COMP%]:hover{background:#37ca37!important}.btn-un-activity[_ngcontent-%COMP%]{padding:5px 5px 5px 10px;background:#8b0000;color:#fff;border-radius:10px;font-weight:500}.btn-un-activity[_ngcontent-%COMP%]:hover{background:#b61a15!important}.text-sm[_ngcontent-%COMP%]{font-size:.82rem;line-height:1.2rem}.col-information[_ngcontent-%COMP%]{width:100%}.text-add-cs[_ngcontent-%COMP%]{font-size:14px;color:#909090;font-weight:500;padding-top:2px;padding-left:5px}.info-infrastructure[_ngcontent-%COMP%], .btn-add-infrastructure[_ngcontent-%COMP%]{background:#fff;padding:10px;border-radius:6px;height:100%}.btn-add-infrastructure[_ngcontent-%COMP%]:hover{background:#e1e0e0}.lucide-plus[_ngcontent-%COMP%]{stroke-width:4px!important;color:#a9a9a9}.col-information[_ngcontent-%COMP%]{padding:2px 5px}.col-information[_ngcontent-%COMP%]:hover{background:#f0f0f0;border-radius:5px;padding:2px 5px}.btn-delete-room[_ngcontent-%COMP%]{z-index:999}.btn-delete-room[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{background:#f0f0f0;border-radius:5px;padding:2px}.text-md-title[_ngcontent-%COMP%]{font-size:20px}"]}),s})();var _e=m(26988),os=m(68323),as=m(78916);const is=o=>({"mt-5":o}),ss=o=>[o],rs=o=>({backTo:o}),ls=o=>({"z-index":o});function cs(o,s){if(1&o&&t.nrm(0,"azt-loading-effect",4),2&o){const n=t.XpG();t.Y8G("currentStatusObj",n.statusObj)}}function ms(o,s){1&o&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&o&&(t.R7$(),t.SpI("",t.bMT(2,1,"lang_config_educational_program_day_0"),","))}function ds(o,s){if(1&o&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&o){let n;const e=t.XpG().$implicit;t.R7$(),t.SpI("",t.bMT(2,1,"lang_config_educational_program_day_"+(null!==(n=e.day)&&void 0!==n?n:0)),",")}}function us(o,s){1&o&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&o&&(t.R7$(),t.SpI("",t.bMT(2,1,"lang_auto_hom_nay"),","))}function ps(o,s){if(1&o&&(t.j41(0,"div",27)(1,"div"),t.nrm(2,"azt-create-avatar",28),t.k0s()()),2&o){const n=s.$implicit,e=s.index,a=t.XpG(2).$implicit;t.Y8G("ngStyle",t.eq3(4,ls,a.users.length-e)),t.R7$(2),t.Y8G("linkAvatar",n.avatar)("nameCreateAvatar",n.fullName)("size",25)}}function _s(o,s){if(1&o&&(t.j41(0,"div",24)(1,"span",25),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s(),t.DNE(4,ps,3,6,"div",26),t.k0s()),2&o){const n=t.XpG().$implicit;t.R7$(2),t.SpI("",t.bMT(3,2,"lang_auto_giang_vien"),":\xa0"),t.R7$(2),t.Y8G("ngForOf",n.users)}}function gs(o,s){if(1&o&&(t.j41(0,"div",13)(1,"div",14)(2,"h3",15),t.EFF(3),t.k0s()(),t.j41(4,"a",16),t.nI1(5,"navigationLocalize"),t.j41(6,"div",17)(7,"h3",18),t.EFF(8),t.k0s(),t.j41(9,"div",19),t.EFF(10),t.nI1(11,"mytranslate"),t.k0s()(),t.j41(12,"div",20)(13,"span",21),t.EFF(14),t.nI1(15,"mytranslate"),t.k0s()(),t.j41(16,"div",22)(17,"span",21),t.EFF(18),t.nI1(19,"mytranslate"),t.k0s()(),t.DNE(20,_s,5,4,"div",23),t.k0s()()),2&o){const n=s.$implicit,e=t.XpG(4);t.R7$(3),t.Lme("",n.fromTime," - ",n.toTime,""),t.R7$(),t.Y8G("routerLink",t.eq3(21,ss,t.bMT(5,13,"/admin/student/classroom-details/"+n.classroomId+"/3")))("queryParams",t.eq3(23,rs,e.returnUrl)),t.R7$(4),t.SpI(" ",n.classroomName," "),t.R7$(2),t.Lme("",t.bMT(11,15,"lang_core_buoi")," ",null==n.currentSession?null:n.currentSession.sort,""),t.R7$(4),t.Lme("",t.bMT(15,17,"lang_student_educational_program"),": ",null==n.program?null:n.program.name,""),t.R7$(4),t.E5c("",t.bMT(19,19,"lang_core_phong_hoc"),": ",null==n.infrastructure?null:n.infrastructure.name," - ",null==n.room?null:n.room.name,""),t.R7$(2),t.Y8G("ngIf",n.users&&n.users.length>0)}}function hs(o,s){if(1&o&&(t.j41(0,"div",9)(1,"h2",10),t.DNE(2,ms,3,3,"span",11)(3,ds,3,3,"span",11)(4,us,3,3,"span",11),t.EFF(5),t.nI1(6,"formatOnlyDateByUserUnitPipe"),t.k0s(),t.DNE(7,gs,21,25,"div",12),t.k0s()),2&o){let n;const e=s.$implicit,a=t.XpG(3);t.R7$(),t.Y8G("ngClass",a.isTodayDate(e.date)?"date-color":""),t.R7$(),t.Y8G("ngIf",0==e.day&&!a.isTodayDate(e.date)),t.R7$(),t.Y8G("ngIf",(null!==(n=e.day)&&void 0!==n?n:0)>0),t.R7$(),t.Y8G("ngIf",0==e.day&&a.isTodayDate(e.date)),t.R7$(),t.SpI(" ",t.bMT(6,6,e.date)," "),t.R7$(2),t.Y8G("ngForOf",e.sessions)}}function fs(o,s){1&o&&t.nrm(0,"azt-loading-ui",33)}function bs(o,s){if(1&o){const n=t.RV6();t.j41(0,"div",29)(1,"span",30),t.bIt("click",function(){t.eBV(n);const a=t.XpG(3);return t.Njj(!a.sAztNextPaginationService.isLoadingNextPage&&a.getNextPage())}),t.EFF(2),t.nI1(3,"mytranslate"),t.nrm(4,"lucide-icon",31),t.DNE(5,fs,1,0,"azt-loading-ui",32),t.k0s()()}if(2&o){const n=t.XpG(3);t.R7$(2),t.SpI(" ",t.bMT(3,2,"lang_business_instructional_work_see_more")," "),t.R7$(3),t.Y8G("ngIf",n.sAztNextPaginationService.isLoadingNextPage)}}function vs(o,s){if(1&o&&(t.qex(0),t.DNE(1,hs,8,8,"div",7)(2,bs,6,4,"div",8),t.bVm()),2&o){const n=t.XpG(2);t.R7$(),t.Y8G("ngForOf",n.listGroupScheduleObjs),t.R7$(),t.Y8G("ngIf",n.listGroupScheduleObjs.length&&n.sAztNextPaginationService.hasNextPage)}}function xs(o,s){1&o&&(t.j41(0,"div",34),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&o&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"lang_list_null")," "))}function Cs(o,s){if(1&o&&(t.j41(0,"h3",5),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s(),t.DNE(3,vs,3,2,"ng-container",6)(4,xs,3,3,"ng-template",null,1,t.C5r)),2&o){const n=t.sdS(5),e=t.XpG();t.Y8G("ngClass",t.eq3(6,is,!e.isMobileWebView)),t.R7$(),t.SpI(" ",t.bMT(2,4,"lang_business_instructional_work_title")," "),t.R7$(2),t.Y8G("ngIf",e.listGroupScheduleObjs.length>0)("ngIfElse",n)}}let Is=(()=>{var o;class s extends y.H{isTodayDate(e){if(!e)return!1;var a=new Date;return a.getDay()==e.getDay()&&e.getMonth()==a.getMonth()&&a.getFullYear()==e.getFullYear()}getNextPage(){this.sAztNextPaginationService.setNextPage(),this.getData(!0)}formatHour(e){let a=new Date(e??"");return`${a.getHours().toString().padStart(2,"0")}:${a.getMinutes().toString().padStart(2,"0")}`}getData(e){e?this.sAztNextPaginationService.setLoading(!0):this.initStatusObj(),this.waitDestroy(this.wrapApiResponse(this.schedulerService.apiSchedulersListPost({page:this.sAztNextPaginationService.curPage,size:this.sAztNextPaginationService.itemPerPage})).subscribe(a=>{if(!a.success)return this.errorStatusObj(a.message,!0);this.scheduleObjs=this.scheduleObjs.concat(a.data?.list??[]);let i=this.commonService.arrayToDictionary(this.scheduleObjs,c=>c.currentSession?.date?.toString()??""),l=[];Object.entries(i).forEach(([c,g],b)=>{if(g.length<=0)return;let _=g[0],f=this.formatHour(_.currentSession?.fromTime),M=this.formatHour(_.currentSession?.toTime);var F=(g=g.sort((T,D)=>(T.currentSession?.sort??0)-(D.currentSession?.sort??1))).map(T=>({...T,fromTime:this.formatHour(T.currentSession?.fromTime),toTime:this.formatHour(T.currentSession?.toTime)}));const S={date:new Date(_.currentSession?.date??""),day:_.currentSession?.day,fromTime:f,toTime:M,sessions:F};l.push(S)}),this.listGroupScheduleObjs=l,this.sAztNextPaginationService.setLoading(!1),this.sAztNextPaginationService.setTotalRecord(a.data?.total??0),this.stopStatusObj()}))}ngOnInit(){this.commonService.translateMetaData({title:"lang_business_instructional_work_title",image:"lang_cms_test_image"}),this.waitDestroy((0,W.z)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{let e=this.commonService.getMyQueryParam("backto");this.backLink=e||"/business/dashboard"})),super.ngOnInit(),this.getData(!1)}constructor(e,a,i){super(),this.activeRoute=e,this.schedulerService=a,this.sAztNextPaginationService=i,this.backLink="",this.returnUrl="/business/instructional-work",this.scheduleObjs=[],this.listGroupScheduleObjs=[]}}return(o=s).\u0275fac=function(e){return new(e||o)(t.rXU(h.nX),t.rXU(as.P),t.rXU(_e.h))},o.\u0275cmp=t.VBU({type:o,selectors:[["app-azota-business-instructional"]],standalone:!0,features:[t.Jv_([_e.h]),t.Vt3,t.aNF],decls:4,vars:3,consts:[["doneLoading",""],["emptyList",""],[3,"headerBackToLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[1,"text-md-title","font-medium","truncate","mr-auto",3,"ngClass"],[4,"ngIf","ngIfElse"],["class","pt-5",4,"ngFor","ngForOf"],["class","pt-3 font-medium",4,"ngIf"],[1,"pt-5"],[1,"text-md","font-medium","truncate","mr-auto","title-day",3,"ngClass"],[4,"ngIf"],["class","flex mt-3","style","flex-wrap: wrap",4,"ngFor","ngForOf"],[1,"flex","mt-3",2,"flex-wrap","wrap"],[1,"mr-5"],[1,"text-md","font-medium",2,"white-space","pre"],["azt-track-service","business-instructional-work-wb-lhbFmj",1,"box-teaching-hour","clickable",3,"routerLink","queryParams"],[1,"flex"],[1,"text-md","font-medium","truncate","mr-auto"],[1,"session"],[1,"flex","items-center","mt-1"],[1,"text-sm"],[1,"flex","items-center","justify-between","mt-1"],["class","flex items-center mt-1","style","flex-wrap: wrap;",4,"ngIf"],[1,"flex","items-center","mt-1",2,"flex-wrap","wrap"],[2,"font-weight","500","white-space","nowrap"],["class","show-tickets clickable","style","margin: 3px 0 3px 0.25rem;",3,"ngStyle",4,"ngFor","ngForOf"],[1,"show-tickets","clickable",2,"margin","3px 0 3px 0.25rem",3,"ngStyle"],[3,"linkAvatar","nameCreateAvatar","size"],[1,"pt-3","font-medium"],["azt-track-service","comments-92wgKv717",1,"clickable",3,"click"],["name","chevron-down","size","20"],["class","ml-1",4,"ngIf"],[1,"ml-1"],[1,"flex","justify-center","pt-3"]],template:function(e,a){if(1&e&&(t.j41(0,"teacher-layout",2),t.DNE(1,cs,1,1,"azt-loading-effect",3)(2,Cs,6,8,"ng-template",null,0,t.C5r),t.k0s()),2&e){const i=t.sdS(3);t.Y8G("headerBackToLink",a.backLink),t.R7$(),t.Y8G("ngIf",a.statusObj.loading)("ngIfElse",i)}},dependencies:[O.Q,R.K,os.p,w.R,p.F2,u.MD,u.YU,u.Sq,u.bT,u.B3,r.X1,h.iI,h.Wk,r.YN,p.wp,I.s,C.flO,C.WGl,v.L,p.vv,x.Id,d.k],styles:[".title-day[_ngcontent-%COMP%]{color:#708090;font-weight:800}.box-teaching-hour[_ngcontent-%COMP%]{background:#fff;padding:15px;border:1px solid steelblue;border-radius:8px;width:100%;max-width:500px}.date-color[_ngcontent-%COMP%]{color:#4682b4}.session[_ngcontent-%COMP%]{background:#f5f5f5;border-radius:5px;font-size:12px;padding:0 5px;font-weight:500}.box-teaching-hour[_ngcontent-%COMP%]:hover{background:#f9f9f9}.text-md-title[_ngcontent-%COMP%]{font-size:20px}.show-tickets[_ngcontent-%COMP%]{display:inline-block;position:relative;transition:all .3s;border:1px solid #0110b1!important;border-radius:50%}.show-tickets[_ngcontent-%COMP%]:hover{transform:translateY(-5px);z-index:999!important}"]}),s})();var ys=m(20381),Y=m(23047);let ks=(()=>{var o;class s extends y.H{constructor(){super(...arguments),this.chart=new Y.t1}createChart(){let e=this.countExamByWeek.map(i=>i.total);e.length<7&&e.push(...Array(7-e.length).fill(0));let a=new Y.t1({chart:{type:"column",style:{fontFamily:"Arial"},width:this.isMobileDevice?220:290,height:120},colors:["#1e40af"],title:{text:""},credits:{enabled:!1},xAxis:{categories:["M","T","W","T","F","S","S"],gridLineWidth:0},yAxis:{title:{text:""},gridLineWidth:0},plotOptions:{area:{}},series:[{name:"",type:"column",data:e}]});this.chart=a}ngOnInit(){super.ngOnInit(),this.createChart()}}return(o=s).\u0275fac=(()=>{let n;return function(a){return(n||(n=t.xGo(o)))(a||o)}})(),o.\u0275cmp=t.VBU({type:o,selectors:[["app-chart-pre-exam-by-day"]],inputs:{countExamByWeek:"countExamByWeek"},standalone:!0,features:[t.Vt3,t.aNF],decls:2,vars:1,consts:[[1,"chart-pre-exam-by-day"],[3,"chart"]],template:function(e,a){1&e&&(t.j41(0,"div",0),t.nrm(1,"div",1),t.k0s()),2&e&&(t.R7$(),t.Y8G("chart",a.chart))},dependencies:[Y.Fr,Y.S6,u.MD,r.X1,h.iI,r.YN,I.s,C.flO,v.L,x.Id,d.k],encapsulation:2}),s})(),Ms=(()=>{var o;class s extends y.H{constructor(){super(...arguments),this.chart=new Y.t1}createChart(){const e=this.commonService.myTranslateInstant("lang_testbank_folder_and_file_times"),a=new Y.t1({chart:{type:"area",style:{fontFamily:"Arial"},zoomType:"xy"},colors:["#f97316"],title:{text:""},credits:{enabled:!1},xAxis:{scrollbar:{enabled:!0},categories:this.countExamResultByMonth.map(i=>this.formatDateToDayMonth(i.date))},yAxis:{title:{text:""}},plotOptions:{area:{}},series:[{name:e,type:"line",data:this.countExamResultByMonth.map(i=>i.total)}]});this.chart=a}formatDateToDayMonth(e){return e?`${(e=new Date(e)).getDate().toString().padStart(2,"0")}/${(e.getMonth()+1).toString().padStart(2,"0")}`:""}ngOnInit(){super.ngOnInit(),this.createChart()}}return(o=s).\u0275fac=(()=>{let n;return function(a){return(n||(n=t.xGo(o)))(a||o)}})(),o.\u0275cmp=t.VBU({type:o,selectors:[["app-chart-pre-exam-by-month"]],inputs:{countExamResultByMonth:"countExamResultByMonth"},standalone:!0,features:[t.Vt3,t.aNF],decls:2,vars:1,consts:[[1,"chart-pre-exam-by-month"],[3,"chart"]],template:function(e,a){1&e&&(t.j41(0,"div",0),t.nrm(1,"div",1),t.k0s()),2&e&&(t.R7$(),t.Y8G("chart",a.chart))},dependencies:[Y.Fr,Y.S6,u.MD,r.X1,h.iI,r.YN,I.s,C.flO,v.L,x.Id,d.k],encapsulation:2}),s})(),Os=(()=>{var o;class s extends y.H{constructor(){super(...arguments),this.chart=new Y.t1}createChart(){let e=this.countExamResultByWeek.map(i=>i.total);e.length<7&&e.push(...Array(7-e.length).fill(0));const a=new Y.t1({chart:{type:"area",style:{fontFamily:"Arial"},width:this.isMobileDevice?220:290,height:120},colors:["#68cc00"],title:{text:""},credits:{enabled:!1},xAxis:{categories:["Mo","Tu","We","Th","Fr","Sa","Su"],gridLineWidth:0},yAxis:{title:{text:""},gridLineWidth:0},plotOptions:{area:{}},series:[{name:"",type:"line",data:e}]});this.chart=a}ngOnInit(){super.ngOnInit(),this.createChart()}}return(o=s).\u0275fac=(()=>{let n;return function(a){return(n||(n=t.xGo(o)))(a||o)}})(),o.\u0275cmp=t.VBU({type:o,selectors:[["app-chart-pre-exam-result-by-day"]],inputs:{countExamResultByWeek:"countExamResultByWeek"},standalone:!0,features:[t.Vt3,t.aNF],decls:2,vars:1,consts:[[1,"chart-pre-exam-result-by-day"],[3,"chart"]],template:function(e,a){1&e&&(t.j41(0,"div",0),t.nrm(1,"div",1),t.k0s()),2&e&&(t.R7$(),t.Y8G("chart",a.chart))},dependencies:[Y.Fr,Y.S6,u.MD,r.X1,h.iI,r.YN,I.s,C.flO,v.L,x.Id,d.k],encapsulation:2}),s})();function js(o,s){1&o&&(t.j41(0,"span"),t.EFF(1,"(1)"),t.k0s())}function Ss(o,s){1&o&&(t.j41(0,"span"),t.EFF(1,"(2)"),t.k0s())}function Rs(o,s){1&o&&(t.j41(0,"span"),t.EFF(1,"(3)"),t.k0s())}function Ts(o,s){if(1&o&&(t.j41(0,"tr",15)(1,"td",16)(2,"span",17),t.EFF(3),t.nI1(4,"mytranslate"),t.DNE(5,js,2,0,"span",18)(6,Ss,2,0,"span",18)(7,Rs,2,0,"span",18),t.k0s()(),t.j41(8,"td",19)(9,"span",20),t.EFF(10),t.k0s()(),t.j41(11,"td",19)(12,"span",21),t.EFF(13),t.k0s()()()),2&o){let n,e,a;const i=s.$implicit;t.R7$(3),t.SpI(" ",t.bMT(4,6,i.subjectName)," "),t.R7$(2),t.Y8G("ngIf",(null!==(n=i.subjectTo)&&void 0!==n?n:0)<=5&&(null!==(n=i.subjectFrom)&&void 0!==n?n:0)>=1),t.R7$(),t.Y8G("ngIf",(null!==(e=i.subjectTo)&&void 0!==e?e:0)<=9&&(null!==(e=i.subjectFrom)&&void 0!==e?e:0)>=6),t.R7$(),t.Y8G("ngIf",(null!==(a=i.subjectTo)&&void 0!==a?a:0)<=13&&(null!==(a=i.subjectFrom)&&void 0!==a?a:0)>=10),t.R7$(3),t.JRh(i.totalExam),t.R7$(3),t.JRh(i.totalExamResult)}}function Fs(o,s){if(1&o&&(t.qex(0),t.DNE(1,Ts,14,8,"tr",14),t.bVm()),2&o){const n=t.XpG();t.R7$(),t.Y8G("ngForOf",n.countPreMonthBySubject)}}function ws(o,s){1&o&&(t.j41(0,"tr",15)(1,"td",22),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s()()),2&o&&(t.R7$(2),t.SpI(" ",t.bMT(3,1,"lang_testbank_statistical_cant_data_statistics")," "))}function As(o,s){if(1&o&&(t.j41(0,"tr",15)(1,"td",16)(2,"span",17),t.EFF(3),t.nI1(4,"mytranslate"),t.k0s()(),t.j41(5,"td",19)(6,"span",20),t.EFF(7),t.k0s()(),t.j41(8,"td",19)(9,"span",21),t.EFF(10),t.k0s()()()),2&o){const n=s.$implicit;t.R7$(3),t.JRh(t.bMT(4,3,n.classroomName)),t.R7$(4),t.JRh(n.totalExam),t.R7$(3),t.JRh(n.totalExamResult)}}function zs(o,s){if(1&o&&(t.qex(0),t.DNE(1,As,11,5,"tr",14),t.bVm()),2&o){const n=t.XpG();t.R7$(),t.Y8G("ngForOf",n.countPreMonthByClassroom)}}function Es(o,s){1&o&&(t.j41(0,"tr",15)(1,"td",22),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s()()),2&o&&(t.R7$(2),t.SpI(" ",t.bMT(3,1,"lang_testbank_statistical_cant_data_statistics")," "))}function Ps(o,s){if(1&o&&(t.j41(0,"tr",15)(1,"td",16)(2,"span",17),t.EFF(3),t.nI1(4,"mytranslate"),t.k0s()(),t.j41(5,"td",19)(6,"span",20),t.EFF(7),t.k0s()(),t.j41(8,"td",19)(9,"span",21),t.EFF(10),t.k0s()()()),2&o){const n=s.$implicit;t.R7$(3),t.JRh(t.bMT(4,3,n.teacherFullName)),t.R7$(4),t.JRh(n.totalExam),t.R7$(3),t.JRh(n.totalExamResult)}}function Ds(o,s){if(1&o&&(t.qex(0),t.DNE(1,Ps,11,5,"tr",14),t.bVm()),2&o){const n=t.XpG();t.R7$(),t.Y8G("ngForOf",n.countPreMonthByTeacher)}}function Gs(o,s){1&o&&(t.j41(0,"tr",15)(1,"td",22),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s()()),2&o&&(t.R7$(2),t.SpI(" ",t.bMT(3,1,"lang_testbank_statistical_cant_data_statistics")," "))}let $s=(()=>{var o;class s extends y.H{constructor(){super(...arguments),this.countPreMonthBySubject=[],this.countPreMonthByClassroom=[],this.countPreMonthByTeacher=[]}}return(o=s).\u0275fac=(()=>{let n;return function(a){return(n||(n=t.xGo(o)))(a||o)}})(),o.\u0275cmp=t.VBU({type:o,selectors:[["app-count-pre-month-table"]],inputs:{countPreMonthBySubject:"countPreMonthBySubject",countPreMonthByClassroom:"countPreMonthByClassroom",countPreMonthByTeacher:"countPreMonthByTeacher"},standalone:!0,features:[t.Vt3,t.aNF],decls:55,vars:33,consts:[["emptyPreMonthBySubject",""],["emptyPreMonthByClassroom",""],["emptyPreMonthByTeacher",""],[1,"grid","grid-cols-12","gap-4","intro-y"],[1,"col-span-12","md:col-span-4"],[1,"box","overflow-auto","custom-scroll",2,"height","208px"],[1,"w-full","table-sticky-header","text-xs","text-left","text-gray-500","dark:text-gray-400"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50","dark:bg-gray-700","dark:text-gray-400","py-5","border-b","border-slate-200","dark:border-darkmode-400","box"],["scope","col",1,"px-6","py-4","position-sticky"],["scope","col",1,"px-6","py-4","text-center","position-sticky"],[4,"ngIf","ngIfElse"],["scope","col",1,"px-6","py-4"],["scope","col",1,"px-6","py-4","text-center"],[1,"text-xs","text-gray-700","uppercase","bg-gray-50","dark:bg-gray-700","dark:text-gray-400","py-5","border-slate-200","dark:border-darkmode-400","box"],["class","bg-white border-b dark:bg-gray-800 dark:border-gray-700",4,"ngFor","ngForOf"],[1,"bg-white","border-b","dark:bg-gray-800","dark:border-gray-700"],["scope","row",1,"px-6","py-4"],[1,"font-medium"],[4,"ngIf"],["scope","row",1,"px-6","py-4","text-center"],[1,"text-primary","font-medium"],[1,"whitespace-nowrap","py-0.5","px-2","rounded-md","alert","alert-primary-soft","font-medium"],["colspan","3",1,"text-center","text-slate-500"]],template:function(e,a){if(1&e&&(t.j41(0,"div",3)(1,"div",4)(2,"div",5)(3,"table",6)(4,"thead",7)(5,"tr")(6,"th",8),t.EFF(7),t.nI1(8,"mytranslate"),t.k0s(),t.j41(9,"th",9),t.EFF(10),t.nI1(11,"mytranslate"),t.k0s(),t.j41(12,"th",9),t.EFF(13),t.nI1(14,"mytranslate"),t.k0s()()(),t.j41(15,"tbody"),t.DNE(16,Fs,2,1,"ng-container",10)(17,ws,4,3,"ng-template",null,0,t.C5r),t.k0s()()()(),t.j41(19,"div",4)(20,"div",5)(21,"table",6)(22,"thead",7)(23,"tr")(24,"th",11),t.EFF(25),t.nI1(26,"mytranslate"),t.k0s(),t.j41(27,"th",12),t.EFF(28),t.nI1(29,"mytranslate"),t.k0s(),t.j41(30,"th",12),t.EFF(31),t.nI1(32,"mytranslate"),t.k0s()()(),t.j41(33,"tbody"),t.DNE(34,zs,2,1,"ng-container",10)(35,Es,4,3,"ng-template",null,1,t.C5r),t.k0s()()()(),t.j41(37,"div",4)(38,"div",5)(39,"table",6)(40,"thead",13)(41,"tr")(42,"th",11),t.EFF(43),t.nI1(44,"mytranslate"),t.k0s(),t.j41(45,"th",12),t.EFF(46),t.nI1(47,"mytranslate"),t.k0s(),t.j41(48,"th",12),t.EFF(49),t.nI1(50,"mytranslate"),t.k0s()()(),t.j41(51,"tbody"),t.DNE(52,Ds,2,1,"ng-container",10)(53,Gs,4,3,"ng-template",null,2,t.C5r),t.k0s()()()()()),2&e){const i=t.sdS(18),l=t.sdS(36),c=t.sdS(54);t.R7$(7),t.SpI(" ",t.bMT(8,15,"lang_auto_mon_hoc")," "),t.R7$(3),t.JRh(t.bMT(11,17,"lang_azt_number_of_exam_papers")),t.R7$(3),t.JRh(t.bMT(14,19,"lang_testbank_tested_list_number_quizzes")),t.R7$(3),t.Y8G("ngIf",a.countPreMonthBySubject)("ngIfElse",i),t.R7$(9),t.SpI(" ",t.bMT(26,21,"lang_auto_lop_hoc")," "),t.R7$(3),t.JRh(t.bMT(29,23,"lang_azt_number_of_exam_papers")),t.R7$(3),t.JRh(t.bMT(32,25,"lang_testbank_tested_list_number_quizzes")),t.R7$(3),t.Y8G("ngIf",a.countPreMonthByClassroom)("ngIfElse",l),t.R7$(9),t.SpI(" ",t.bMT(44,27,"lang_auto_giao_vien")," "),t.R7$(3),t.JRh(t.bMT(47,29,"lang_azt_number_of_exam_papers")),t.R7$(3),t.JRh(t.bMT(50,31,"lang_testbank_tested_list_number_quizzes")),t.R7$(3),t.Y8G("ngIf",a.countPreMonthByTeacher)("ngIfElse",c)}},dependencies:[u.MD,u.Sq,u.bT,r.X1,h.iI,r.YN,p.wp,I.s,C.flO,v.L,x.Id,d.k],encapsulation:2}),s})();var Bs=m(10296),Ns=m(43234),V=m(66114),Ls=m(39471),Ys=m(97839);const Us=["startDatePicker"],Vs=["toDatePicker"],Xs=o=>[o],Ws=()=>({backto:"/business/business-statistics-overview-v2"}),Yt=(o,s)=>({"text-danger":o,"text-success":s});function Js(o,s){if(1&o&&t.nrm(0,"azt-loading-effect",5),2&o){const n=t.XpG();t.Y8G("currentStatusObj",n.statusObj)}}function Hs(o,s){1&o&&(t.j41(0,"div",66)(1,"div",67),t.nrm(2,"azt-loading-ui",68),t.j41(3,"h3",69),t.EFF(4),t.nI1(5,"mytranslate"),t.k0s()()()),2&o&&(t.R7$(4),t.JRh(t.bMT(5,1,"lang_cms_common_loading")))}function Qs(o,s){if(1&o&&t.nrm(0,"app-count-pre-month-table",70),2&o){const n=t.XpG(3);t.Y8G("countPreMonthBySubject",n.dashboardGeneral.countMonthBySubject)("countPreMonthByClassroom",n.dashboardGeneral.countMonthByClassroom)("countPreMonthByTeacher",n.dashboardGeneral.countMonthByTeacher)}}function qs(o,s){if(1&o){const n=t.RV6();t.j41(0,"div",7)(1,"div",8)(2,"div",9)(3,"div",10)(4,"div",11)(5,"div",12)(6,"div",13),t.EFF(7),t.nI1(8,"mytranslate"),t.k0s(),t.j41(9,"div",14),t.EFF(10),t.k0s(),t.j41(11,"div",15),t.EFF(12),t.nI1(13,"mytranslate"),t.k0s(),t.j41(14,"div",16)(15,"a",17),t.nI1(16,"navigationLocalize"),t.EFF(17),t.nI1(18,"mytranslate"),t.k0s()()(),t.j41(19,"div",18),t.nrm(20,"azt-svg-icon",19),t.k0s()()()(),t.j41(21,"div",20)(22,"div",21)(23,"div",22)(24,"div",23)(25,"div",24)(26,"div",25),t.EFF(27),t.nI1(28,"mytranslate"),t.k0s(),t.j41(29,"div",26)(30,"div",27),t.EFF(31),t.nI1(32,"mytranslate"),t.k0s()(),t.j41(33,"div",28)(34,"div",29)(35,"div",30),t.EFF(36),t.k0s(),t.j41(37,"div",31),t.nrm(38,"lucide-icon",32),t.j41(39,"span",33),t.EFF(40),t.k0s()()(),t.j41(41,"div",34),t.nrm(42,"app-chart-pre-exam-by-day",35),t.k0s()()()(),t.j41(43,"div",36)(44,"div",24)(45,"div",25),t.EFF(46),t.nI1(47,"mytranslate"),t.k0s(),t.j41(48,"div",26)(49,"div",27),t.EFF(50),t.nI1(51,"mytranslate"),t.k0s()(),t.j41(52,"div",28)(53,"div",29)(54,"div",30),t.EFF(55),t.k0s(),t.j41(56,"div",31),t.nrm(57,"lucide-icon",32),t.j41(58,"span",33),t.EFF(59),t.k0s()()(),t.j41(60,"div",34),t.nrm(61,"app-chart-pre-exam-result-by-day",37),t.k0s()()()()()()()(),t.j41(62,"div",38)(63,"div",39)(64,"span"),t.EFF(65),t.nI1(66,"mytranslate"),t.k0s(),t.j41(67,"div",40)(68,"span"),t.EFF(69),t.nI1(70,"mytranslate"),t.nI1(71,"formatOnlyDateByUserUnitPipe"),t.k0s(),t.j41(72,"div",41)(73,"input",42),t.bIt("click",function(){t.eBV(n);const a=t.sdS(77);return t.Njj(a.open())}),t.k0s(),t.j41(74,"button",43),t.bIt("click",function(a){return t.eBV(n),t.sdS(77).open(),t.Njj(a.stopPropagation())}),t.nrm(75,"lucide-icon",44),t.k0s(),t.j41(76,"ngx-mat-datetime-picker",45,1)(78,"ngx-mat-datepicker-actions")(79,"button",46),t.EFF(80,"OK"),t.k0s()()()(),t.j41(81,"span"),t.EFF(82),t.nI1(83,"mytranslate"),t.nI1(84,"formatOnlyDateByUserUnitPipe"),t.k0s(),t.j41(85,"div",41)(86,"input",47),t.bIt("click",function(){t.eBV(n);const a=t.sdS(90);return t.Njj(a.open())}),t.k0s(),t.j41(87,"button",43),t.bIt("click",function(a){return t.eBV(n),t.sdS(90).open(),t.Njj(a.stopPropagation())}),t.nrm(88,"lucide-icon",44),t.k0s(),t.j41(89,"ngx-mat-datetime-picker",45,2)(91,"ngx-mat-datepicker-actions")(92,"button",46),t.EFF(93,"OK"),t.k0s()()()(),t.j41(94,"span"),t.EFF(95,")"),t.k0s()()(),t.j41(96,"div",48)(97,"div",49),t.nrm(98,"lucide-icon",50),t.j41(99,"span",51),t.EFF(100),t.nI1(101,"mytranslate"),t.k0s()(),t.j41(102,"div",52)(103,"button",53),t.bIt("click",function(){t.eBV(n);const a=t.XpG(2);return t.Njj(a.exportExcel())}),t.nrm(104,"lucide-icon",54),t.j41(105,"span",55),t.EFF(106),t.nI1(107,"mytranslate"),t.k0s()()()(),t.j41(108,"div",56),t.DNE(109,Hs,6,3,"div",57)(110,Qs,1,3,"ng-template",null,0,t.C5r),t.k0s()(),t.j41(112,"div",58)(113,"div",40)(114,"div",59)(115,"div",13),t.EFF(116),t.nI1(117,"mytranslate"),t.k0s()(),t.j41(118,"div",60)(119,"div",61),t.EFF(120),t.k0s(),t.j41(121,"div",62),t.nI1(122,"mytranslate"),t.nrm(123,"lucide-icon",63),t.j41(124,"span",33),t.EFF(125),t.k0s()()()(),t.j41(126,"div",64),t.nrm(127,"app-chart-pre-exam-by-month",65),t.k0s()()()}if(2&o){const n=t.sdS(77),e=t.sdS(90),a=t.sdS(111),i=t.XpG(2);t.R7$(7),t.SpI(" ",t.bMT(8,47,"lang_azt_number_of_tests_per_month")," "),t.R7$(3),t.SpI(" ",i.dashboardGeneral.totalExamResultInCurrentMonth," "),t.R7$(2),t.SpI(" ",i.dashboardGeneral.totalExamInCurrentMonth+" "+t.bMT(13,49,"lang_testbank_test_list_exam")," "),t.R7$(3),t.Y8G("routerLink",t.eq3(81,Xs,t.bMT(16,51,"/admin/testbank/document-management/0/0/1")))("queryParams",t.lJ4(83,Ws)),t.R7$(2),t.SpI(" ",t.bMT(18,53,"lang_azt_view_exam_list")," "),t.R7$(3),t.Y8G("size",i.isMobileDevice?110:130),t.R7$(7),t.SpI(" ",t.bMT(28,55,"lang_azt_number_of_exam_questions_created_by_day")," "),t.R7$(4),t.SpI(" ",t.bMT(32,57,"lang_azt_compared_to_last_week")," "),t.R7$(5),t.SpI(" ",i.dashboardGeneral.totalExamInWeek," "),t.R7$(),t.Y8G("ngClass",t.l_i(84,Yt,i.dashboardGeneral.percentCompareExamInWeek<0,i.dashboardGeneral.percentCompareExamInWeek>=0)),t.R7$(),t.FS9("name",i.dashboardGeneral.percentCompareExamInWeek<0?"move-down":"move-up"),t.R7$(2),t.JRh(i.dashboardGeneral.percentCompareExamInWeek+"%"),t.R7$(2),t.Y8G("countExamByWeek",i.dashboardGeneral.countExamByWeek),t.R7$(4),t.SpI(" ",t.bMT(47,59,"lang_azt_number_of_times_doing_the_test_per_day")," "),t.R7$(4),t.SpI(" ",t.bMT(51,61,"lang_azt_compared_to_last_week")," "),t.R7$(5),t.SpI(" ",i.dashboardGeneral.totalExamResultInWeek," "),t.R7$(),t.Y8G("ngClass",t.l_i(87,Yt,i.dashboardGeneral.percentCompareExamResultInWeek<0,i.dashboardGeneral.percentCompareExamResultInWeek>=0)),t.R7$(),t.FS9("name",i.dashboardGeneral.percentCompareExamResultInWeek<0?"move-down":"move-up"),t.R7$(2),t.JRh(i.dashboardGeneral.percentCompareExamResultInWeek+"%"),t.R7$(2),t.Y8G("countExamResultByWeek",i.dashboardGeneral.countExamResultByWeek),t.R7$(4),t.JRh(t.bMT(66,63,"lang_azt_statistics_over_time")),t.R7$(4),t.JRh(" ("+t.bMT(70,65,"lang_auto_tu")+": "+t.bMT(71,67,i.startDate.value)),t.R7$(4),t.Y8G("min",i.minDate)("max",i.maxDate)("ngxMatDatetimePicker",n)("formControl",i.startDate),t.R7$(3),t.Y8G("touchUi",!0)("hideTime",!0),t.R7$(6),t.SpI("\xa0-\xa0",t.bMT(83,69,"lang_auto_den")+": "+t.bMT(84,71,i.toDate.value),""),t.R7$(4),t.Y8G("min",i.minDate)("max",i.maxDate)("ngxMatDatetimePicker",e)("formControl",i.toDate),t.R7$(3),t.Y8G("touchUi",!0)("hideTime",!0),t.R7$(11),t.JRh(t.bMT(101,73,"lang_azt_statistics_business_note")),t.R7$(6),t.JRh(t.bMT(107,75,"lang_payment_history_export_excel")),t.R7$(3),t.Y8G("ngIf",i.monthLoading)("ngIfElse",a),t.R7$(7),t.SpI(" ",t.bMT(117,77,"lang_azt_number_of_times_doing_the_test")," "),t.R7$(4),t.JRh(i.dashboardGeneral.totalExamResultInMonth),t.R7$(),t.FS9("matTooltip",t.bMT(122,79,"lang_azt_explain_statistical_calculations")),t.R7$(2),t.FS9("name",i.dashboardGeneral.percentCompareExamResultInMonth<0?"move-down":"move-up"),t.Y8G("ngClass",t.l_i(90,Yt,i.dashboardGeneral.percentCompareExamResultInMonth<0,i.dashboardGeneral.percentCompareExamResultInMonth>=0)),t.R7$(2),t.JRh(i.dashboardGeneral.percentCompareExamResultInMonth+"%"),t.R7$(2),t.Y8G("countExamResultByMonth",i.dashboardGeneral.countExamResultByMonth)}}function Ks(o,s){if(1&o&&t.DNE(0,qs,128,93,"div",6),2&o){const n=t.XpG();t.Y8G("ngIf",n.dashboardGeneral)}}const Ot=ys;let Zs=(()=>{var o;class s extends y.H{constructor(){super(...arguments),this.dashboardService=(0,t.WQX)(ce.I8),this.activatedRoute=(0,t.WQX)(h.nX),this.timeService=(0,t.WQX)(at.F),this.shareFileFlutterService=(0,t.WQX)(Bs.R),this.minDate=new Date("2017"),this.maxDate=Ns.c.maxDateTimePicker,this.monthLoading=!1,this.exportLoading=!1,this.startDate=new r.MJ("",{nonNullable:!0}),this.toDate=new r.MJ("",{nonNullable:!0})}ngOnInit(){super.ngOnInit(),this.startDate.setValue(`${Ot().month()+1}/1/${Ot().year()}`),this.toDate.setValue(`${Ot().month()+2}/1/${Ot().year()}`),this.waitDestroy((0,W.z)([this.activatedRoute.params,this.activatedRoute.queryParams]).subscribe(([])=>{this.getData()})),this.startDate.valueChanges.subscribe(e=>{this.pickTimeStatistical()}),this.toDate.valueChanges.subscribe(e=>{this.pickTimeStatistical()})}getData(){this.initStatusObj();let e=this.timeService.formatOnlyDateToPostToServer(this.startDate.value),a=this.timeService.formatOnlyDateToPostToServer(this.toDate.value);this.waitDestroy(this.dashboardService.apiDashboardGetGeneralDashboardPost({fromDate:e,toDate:a}).subscribe(i=>{if(!i.success)return this.errorStatusObj(i.message,!0);this.dashboardGeneral=i.data,this.monthLoading=!1,this.successStatusObj()}))}createStyledSheet(e){if(!e||0===e.length)return V.utils.aoa_to_sheet([[`${this.commonService.myTranslateInstant("lang_not_data")}`]]);const a=V.utils.json_to_sheet(e),i=Object.keys(e[0]);a["!cols"]=i.map((c,g)=>({wpx:0===g?220:100})),i.forEach((c,g)=>{const b=V.utils.encode_cell({c:g,r:0});a[b]||(a[b]={}),a[b].s={border:{top:{style:"thin",color:{rgb:"ff3c8dbc"}},bottom:{style:"thin",color:{rgb:"ff3c8dbc"}},left:{style:"thin",color:{rgb:"ff3c8dbc"}},right:{style:"thin",color:{rgb:"ff3c8dbc"}}},alignment:{horizontal:0===g?"left":"center",vertical:"center"},font:{sz:11,bold:!0,color:{rgb:"ffffffff"}},fill:{patternType:"solid",fgColor:{rgb:"2361ae"}}}});const l=V.utils.decode_range(a["!ref"]||"A1");for(let c=1;c<=l.e.r;++c)for(let g=l.s.c;g<=l.e.c;++g){const b=V.utils.encode_cell({r:c,c:g});a[b]||(a[b]={}),a[b].s={alignment:{horizontal:0===g?"left":"center",vertical:"center"},border:{top:{style:"thin",color:{rgb:"000000"}},bottom:{style:"thin",color:{rgb:"000000"}},left:{style:"thin",color:{rgb:"000000"}},right:{style:"thin",color:{rgb:"000000"}}}}}return a}getLevelSubject(e){return(e.subjectTo??0)<=5&&(e.subjectFrom??0)>=1?"(1)":(e.subjectTo??0)<=9&&(e.subjectFrom??0)>=6?"(2)":(e.subjectTo??0)<=13&&(e.subjectFrom??0)>=10?"(3)":""}pickTimeStatistical(){this.monthLoading=!0,this.getData()}exportExcel(){if(!this.dashboardGeneral)return;this.exportLoading=!1;const e={teacher:this.commonService.myTranslateInstant("lang_auto_giao_vien")??"",subject:this.commonService.myTranslateInstant("lang_auto_mon_hoc")??"",classroom:this.commonService.myTranslateInstant("lang_auto_lop_hoc")??"",totalExam:this.commonService.myTranslateInstant("lang_azt_number_of_exam_papers")??"",totalExamResult:this.commonService.myTranslateInstant("lang_testbank_tested_list_number_quizzes")??""},a=this.createStyledSheet(this.dashboardGeneral.countMonthByTeacher.map(M=>({[e.teacher]:M.teacherFullName||"",[e.totalExam]:M.totalExam,[e.totalExamResult]:M.totalExamResult}))),i=this.createStyledSheet(this.dashboardGeneral.countMonthBySubject.map(M=>({[e.subject]:this.commonService.myTranslateInstant(M.subjectName)+`${this.getLevelSubject(M)}`||"",[e.totalExam]:M.totalExam,[e.totalExamResult]:M.totalExamResult}))),l=this.createStyledSheet(this.dashboardGeneral.countMonthByClassroom.map(M=>({[e.classroom]:M.classroomName||"",[e.totalExam]:M.totalExam,[e.totalExamResult]:M.totalExamResult}))),c=V.utils.book_new();V.utils.book_append_sheet(c,a,e.teacher),V.utils.book_append_sheet(c,i,e.subject),V.utils.book_append_sheet(c,l,e.classroom);const g=`thong_ke_theo_thang_tu_ngay_${this.timeService.formatOnlyDateToPostToServer(this.startDate.value)}_den_ngay_${this.timeService.formatOnlyDateToPostToServer(this.toDate.value)}.xlsx`;if(!this.isMobileWebView)return V.writeFile(c,g);const b=V.write(c,{bookType:"xlsx",bookSST:!0,type:"array"}),f=new Blob([b],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});this.shareFileFlutterService.shareFileWithBlob(f,g)}}return(o=s).\u0275fac=(()=>{let n;return function(a){return(n||(n=t.xGo(o)))(a||o)}})(),o.\u0275cmp=t.VBU({type:o,selectors:[["app-business-statistics-overview-v2"]],viewQuery:function(e,a){if(1&e&&(t.GBs(Us,5),t.GBs(Vs,5)),2&e){let i;t.mGM(i=t.lsd())&&(a.startDatePicker=i.first),t.mGM(i=t.lsd())&&(a.toDatePicker=i.first)}},standalone:!0,features:[t.Jv_([u.vh,{provide:et.$O,useClass:Jt.fb,deps:[_t.Ju,Wt.ij]},{provide:et.vq,useFactory:Ht.fJ,deps:[at.F]},{provide:gt.U$,useValue:{floatLabel:"never"}}]),t.Vt3,t.aNF],decls:4,vars:3,consts:[["doneLoading",""],["startDatePicker",""],["toDatePicker",""],[3,"headerBackToLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],["class","mt-8 business-statistics",4,"ngIf"],[1,"mt-8","business-statistics"],[1,"grid","grid-cols-12","gap-6","mt-3"],[1,"col-span-12","md:col-span-4"],[1,"box","p-5","h-full"],[1,"flex"],[1,"mr-3"],[1,"font-medium","text-base"],[1,"mt-1","text-primary","font-bold","text-lg"],[1,"text-slate-500","text-md","-mt-0.5"],[1,"mt-3"],[1,"btn","btn-primary","px-4","w-full","whitespace-nowrap",3,"routerLink","queryParams"],[1,"box-icon","ml-auto"],["type","badge",3,"size"],[1,"col-span-12","md:col-span-8"],[1,"box","h-full"],[1,"grid","grid-cols-12"],[1,"col-span-12","md:col-span-6","sm:border-r","border-slate-200","dark:border-darkmode-400"],[1,"p-5","relative"],[1,"font-medium","text-base",2,"padding-right","118px"],[1,"absolute","top-0","right-0","p-4"],[1,"leading-relaxed","text-slate-500","text-xs","font-medium"],[1,"mt-5","flex"],[1,"mr-2","mt-2"],[1,"font-medium","text-4xl"],[1,"ml-2","mt-1","flex","items-center",3,"ngClass"],["size","16",3,"name"],[1,"ml-1","font-medium"],[1,"chart"],[3,"countExamByWeek"],[1,"col-span-12","md:col-span-6"],[3,"countExamResultByWeek"],[1,"mt-8"],[1,"text-base","font-medium","flex","flex-col","sm:flex-row","sm:items-center"],[1,"flex","items-center"],[1,"ml-2"],["azt-track-service","setting-general-w4tZZvRVV0","matInput","","id","azt-asc-time-picker","readonly","",1,"form-date","bg-white","azt-hidden",3,"click","min","max","ngxMatDatetimePicker","formControl"],["matSuffix","",1,"btn","btn-sm","btn-primary-soft","p-1",3,"click"],["name","calendar-days","size","18"],[3,"touchUi","hideTime"],["mat-raised-button","","color","primary","ngxMatDatepickerApply",""],["matInput","","id","azt-asc-time-picker-to","readonly","",1,"form-date","bg-white","azt-hidden",3,"click","min","max","ngxMatDatetimePicker","formControl"],[1,"mt-3","flex","flex-col","sm:flex-row","sm:items-center"],[1,"box","p-2","text-xs","font-medium","inline-flex","items-center","mr-auto"],["name","info","size","16"],[1,"ml-2","text-slate-500"],[1,"mt-2","sm:mt-0","ml-0","sm:ml-3"],[1,"btn","btn-sm","btn-primary",3,"click"],["name","file-down","size","16"],[1,"ml-1"],[1,"mt-2"],["class","box mt-2","style","height: calc(100vh - 250px); overflow-y: auto",4,"ngIf","ngIfElse"],[1,"mt-4","p-5","box"],[1,"mr-auto"],[1,"ml-2","flex","items-center"],[1,"font-medium","text-lg","mr-3"],[1,"alert","alert-secondary-soft","alert-dismissible","show",2,"padding","4px",3,"matTooltip"],["size","16",3,"name","ngClass"],[1,"mt-4"],[3,"countExamResultByMonth"],[1,"box","mt-2",2,"height","calc(100vh - 250px)","overflow-y","auto"],[1,"mx-auto","my-auto","text-center","midle-box"],[1,"mr-2"],[1,"text-slate-500","text-md",2,"font-weight","420"],[3,"countPreMonthBySubject","countPreMonthByClassroom","countPreMonthByTeacher"]],template:function(e,a){if(1&e&&(t.j41(0,"teacher-layout",3),t.DNE(1,Js,1,1,"azt-loading-effect",4)(2,Ks,1,1,"ng-template",null,0,t.C5r),t.k0s()),2&e){const i=t.sdS(3);t.Y8G("headerBackToLink","/business/dashboard"),t.R7$(),t.Y8G("ngIf",a.statusObj.loading)("ngIfElse",i)}},dependencies:[O.Q,R.K,zt.m,ks,Os,w.R,$s,Ms,p.F2,u.MD,u.YU,u.bT,r.X1,r.me,r.BC,r.l_,h.iI,h.Wk,r.YN,p.wp,I.s,Ls.$z,Ys.fg,gt.yw,lt.oV,et.m7,et.yF,et.HF,et.Uq,C.flO,C.WGl,v.L,p.vv,x.Id,d.k],encapsulation:2}),s})();function tr(o,s){if(1&o&&(t.j41(0,"div",18)(1,"div",19)(2,"div",20),t.EFF(3),t.nI1(4,"formatFullDateTimeWithoutSecondByUserUnitPipe"),t.k0s(),t.j41(5,"div",21),t.EFF(6),t.k0s()()()),2&o){const n=s.$implicit;t.R7$(3),t.JRh(t.bMT(4,3,n.createdAt)),t.R7$(3),t.Lme("",n.month,"/",n.year,"")}}function er(o,s){if(1&o&&(t.j41(0,"div")(1,"div",14)(2,"div",15),t.EFF(3),t.nI1(4,"mytranslate"),t.k0s(),t.j41(5,"div",16),t.EFF(6),t.nI1(7,"mytranslate"),t.k0s()(),t.DNE(8,tr,7,5,"div",17),t.k0s()),2&o){const n=t.XpG().$implicit;t.R7$(3),t.JRh(t.bMT(4,3,"lang_student_payment_time")),t.R7$(3),t.JRh(t.bMT(7,5,"lang_student_monthly_tuition_fee")),t.R7$(2),t.Y8G("ngForOf",n.payments)}}function nr(o,s){if(1&o&&(t.j41(0,"tr")(1,"td",10),t.nrm(2,"azt-student-info-box",11),t.k0s(),t.j41(3,"td",12),t.EFF(4),t.nI1(5,"formatStudentCodeToNumber"),t.k0s(),t.j41(6,"td"),t.DNE(7,er,9,7,"div",13),t.k0s()()),2&o){const n=s.$implicit,e=t.XpG();t.R7$(2),t.Y8G("name",n.fullName)("avatar",n.avatar)("gender",n.gender)("schoolName",n.schoolName)("hasUser",n.hasUser)("classrooms",n.classrooms)("joinedAt",n.joinedAt)("phone",n.phone)("email",n.email)("showPhone",!0),t.R7$(2),t.JRh(n.identificationNumber?t.i5U(5,12,n.identificationNumber,e.myEnvironment.maxStudentCodeLength):""),t.R7$(3),t.Y8G("ngIf",n.payments&&n.payments.length>0)}}let or=(()=>{var o;class s extends ot._{ngOnInit(){super.ngOnInit()}constructor(e,a,i){super(i,a),this.domainUsersManagementService=e,this.dialogRef=a,this.data=i}}return(o=s).\u0275fac=function(e){return new(e||o)(t.rXU(tt.Z),t.rXU(N.CP,8),t.rXU(N.Vh,8))},o.\u0275cmp=t.VBU({type:o,selectors:[["azt-list-student-not-paid"]],standalone:!0,features:[t.Vt3,t.aNF],decls:23,vars:13,consts:[[1,"box","pl-3","pr-3"],[1,"container-fluid","mb-1","overflow-hidden","document-market-list","w-full"],[1,"intro-y"],[2,"height","100%"],[1,"table","table-report",2,"white-space","initial"],[1,"whitespace-nowrap",2,"padding-left","0"],[1,"whitespace-nowrap","text-center"],[4,"ngFor","ngForOf"],[1,"p-3","text-right","border-t","border-slate-200","dark:border-darkmode-400"],[1,"btn","btn-secondary","min-width-100",3,"click"],["azt-track-service","class-list-details-DbKkCgISc7I",1,"!py-3.5","clickable"],[3,"name","avatar","gender","schoolName","hasUser","classrooms","joinedAt","phone","email","showPhone"],[1,"text-center","capitalize"],[4,"ngIf"],[1,"flex","mb-1"],[1,"w-full","bg-slate-100","mr-1","text-center","p-1"],[1,"w-full","bg-slate-100","text-center","p-1"],["class","w-full",4,"ngFor","ngForOf"],[1,"w-full"],[1,"flex"],[1,"w-full","mr-1","text-center","bg-light","pt-1","pb-1"],[1,"w-full","text-center","bg-light","pt-1","pb-1"]],template:function(e,a){1&e&&(t.j41(0,"div",0)(1,"div",1)(2,"azt-mat-dialog-content")(3,"div",2)(4,"div",3)(5,"table",4)(6,"thead")(7,"tr")(8,"th",5),t.EFF(9),t.nI1(10,"mytranslate"),t.k0s(),t.j41(11,"th",6),t.EFF(12),t.nI1(13,"mytranslate"),t.k0s(),t.j41(14,"th",6),t.EFF(15),t.nI1(16,"mytranslate"),t.k0s()()(),t.j41(17,"tbody"),t.DNE(18,nr,8,15,"tr",7),t.k0s()()()()()(),t.j41(19,"div",8)(20,"button",9),t.bIt("click",function(){return a.dialogRef.close()}),t.EFF(21),t.nI1(22,"mytranslate"),t.k0s()()()),2&e&&(t.R7$(9),t.JRh(t.bMT(10,5,"lang_auto_ho_va_ten")),t.R7$(3),t.JRh(t.bMT(13,7,"lang_auto_so_bao_danh")),t.R7$(3),t.JRh(t.bMT(16,9,"lang_core_da_dong_hoc_phi")),t.R7$(3),t.Y8G("ngForOf",a.data.list),t.R7$(3),t.JRh(t.bMT(22,11,"lang_button_close")))},dependencies:[ft.U,pt.B,u.MD,u.Sq,u.bT,r.X1,h.iI,r.YN,p.wp,I.s,C.flO,v.L,p.Po,p.bH,x.Id,d.k],styles:[".text-sm[_ngcontent-%COMP%]{font-size:14px!important}.box[_ngcontent-%COMP%]{height:100%;background:#f0f8ff!important}.btn-copy[_ngcontent-%COMP%]{width:140px}.bg-light[_ngcontent-%COMP%]{background:#f9f9f9}"]}),s})();var ar=m(35024);function ir(o,s){if(1&o&&(t.j41(0,"div",4)(1,"h3",5),t.nrm(2,"lucide-icon",6),t.EFF(3),t.nI1(4,"mytranslate"),t.k0s(),t.j41(5,"div",7)(6,"span",8),t.EFF(7),t.nI1(8,"mytranslate"),t.k0s(),t.EFF(9),t.k0s(),t.j41(10,"div",9)(11,"div",10),t.EFF(12),t.j41(13,"span",8),t.EFF(14),t.nI1(15,"mytranslate"),t.k0s()(),t.j41(16,"div",10),t.EFF(17),t.j41(18,"span",8),t.EFF(19),t.nI1(20,"mytranslate"),t.k0s()()(),t.j41(21,"div",9)(22,"div",10),t.EFF(23),t.j41(24,"span",8),t.EFF(25),t.nI1(26,"mytranslate"),t.k0s()(),t.j41(27,"div",10),t.EFF(28),t.j41(29,"span",8),t.EFF(30),t.nI1(31,"mytranslate"),t.k0s()()()()),2&o){const n=t.XpG();t.R7$(3),t.SpI(" ",t.bMT(4,11,"lang_core_nguoi_dung")," "),t.R7$(4),t.SpI("",t.bMT(8,13,"lang_azt_tong_so_nguoi_dung"),":"),t.R7$(2),t.SpI(" ",n.userCountByRole.totalAdmin+n.userCountByRole.totalTeacher+n.userCountByRole.totalStudent+n.userCountByRole.totalParent," "),t.R7$(3),t.SpI(" ",n.userCountByRole.totalAdmin," "),t.R7$(2),t.JRh(t.bMT(15,15,"lang_cms_business_dashboard_title").toLocaleLowerCase()),t.R7$(3),t.SpI(" ",n.userCountByRole.totalTeacher," "),t.R7$(2),t.JRh(t.bMT(20,17,"lang_auto_giao_vien").toLocaleLowerCase()),t.R7$(4),t.SpI(" ",n.userCountByRole.totalStudent," "),t.R7$(2),t.JRh(t.bMT(26,19,"lang_notify_list_students").toLocaleLowerCase()),t.R7$(3),t.SpI(" ",n.userCountByRole.totalParent," "),t.R7$(2),t.JRh(t.bMT(31,21,"lang_auto_phu_huynh").toLocaleLowerCase())}}function sr(o,s){if(1&o&&(t.j41(0,"div",4)(1,"h3",5),t.nrm(2,"lucide-icon",11),t.EFF(3),t.nI1(4,"mytranslate"),t.k0s(),t.j41(5,"div",12)(6,"div",10),t.EFF(7),t.j41(8,"span",8),t.EFF(9),t.nI1(10,"mytranslate"),t.k0s()(),t.j41(11,"div",10),t.EFF(12),t.j41(13,"span",8),t.EFF(14),t.nI1(15,"mytranslate"),t.k0s()()()()),2&o){const n=t.XpG();t.R7$(3),t.SpI(" ",t.bMT(4,5,"lang_auto_co_so_vat_chat")," "),t.R7$(4),t.SpI(" ",n.infrastructuresCountStatistic.totalInfrastructure," "),t.R7$(2),t.JRh(t.bMT(10,7,"lang_core_co_so").toLocaleLowerCase()),t.R7$(3),t.SpI(" ",n.infrastructuresCountStatistic.totalRoom," "),t.R7$(2),t.JRh(t.bMT(15,9,"lang_core_phong_hoc").toLocaleLowerCase())}}function rr(o,s){if(1&o&&(t.j41(0,"div",4)(1,"h3",5),t.nrm(2,"lucide-icon",13),t.EFF(3),t.nI1(4,"mytranslate"),t.k0s(),t.j41(5,"div",7),t.EFF(6),t.j41(7,"span",8),t.EFF(8),t.nI1(9,"mytranslate"),t.k0s()(),t.j41(10,"div",9)(11,"div",10),t.EFF(12),t.j41(13,"span",8),t.EFF(14),t.nI1(15,"mytranslate"),t.k0s()(),t.j41(16,"div",10),t.EFF(17),t.j41(18,"span",8),t.EFF(19),t.nI1(20,"mytranslate"),t.k0s()()()()),2&o){const n=t.XpG();t.R7$(3),t.SpI(" ",t.bMT(4,7,"lang_cms_classroom_program_title")," "),t.R7$(3),t.SpI(" ",n.programsCountStatistic.totalProgram," "),t.R7$(2),t.JRh(t.bMT(9,9,"lang_cms_classroom_program_title").toLocaleLowerCase()),t.R7$(4),t.SpI(" ",n.programsCountStatistic.totalLevel," "),t.R7$(2),t.JRh(t.bMT(15,11,"lang_auto_khoi_hoc").toLocaleLowerCase()),t.R7$(3),t.SpI(" ",n.programsCountStatistic.totalSubject," "),t.R7$(2),t.JRh(t.bMT(20,13,"lang_auto_mon_hoc").toLocaleLowerCase())}}function lr(o,s){if(1&o&&(t.j41(0,"div",4)(1,"h3",5),t.nrm(2,"lucide-icon",14),t.EFF(3),t.nI1(4,"mytranslate"),t.k0s(),t.j41(5,"div",7)(6,"span",8),t.EFF(7),t.nI1(8,"mytranslate"),t.k0s(),t.EFF(9),t.k0s(),t.j41(10,"div",15),t.EFF(11),t.j41(12,"span",8),t.EFF(13),t.nI1(14,"mytranslate"),t.k0s()(),t.j41(15,"div",15),t.EFF(16),t.j41(17,"span",8),t.EFF(18),t.nI1(19,"mytranslate"),t.k0s()()()),2&o){const n=t.XpG();t.R7$(3),t.SpI(" ",t.bMT(4,7,"lang_auto_lop_hoc")," "),t.R7$(4),t.SpI("",t.bMT(8,9,"lang_azt_tong_so_lop_hoc"),":"),t.R7$(2),t.SpI(" ",n.classroomsCountStatistic.totalLearningClassroom+n.classroomsCountStatistic.totalFinishClassroom," "),t.R7$(2),t.SpI(" ",n.classroomsCountStatistic.totalLearningClassroom," "),t.R7$(2),t.JRh(t.bMT(14,11,"lang_core_lop_hoc_dang_dien_ra").toLocaleLowerCase()),t.R7$(3),t.SpI(" ",n.classroomsCountStatistic.totalFinishClassroom," "),t.R7$(2),t.JRh(t.bMT(19,13,"lang_core_lop_hoc_da_ket_thuc").toLocaleLowerCase())}}function cr(o,s){1&o&&t.nrm(0,"azt-loading-ui",21),2&o&&t.Y8G("size",16)}function mr(o,s){if(1&o){const n=t.RV6();t.j41(0,"div",18)(1,"a",19),t.bIt("click",function(){t.eBV(n);const a=t.XpG(2);return t.Njj(a.getPaymentStudentsList())}),t.j41(2,"span",8),t.EFF(3),t.nI1(4,"mytranslate"),t.nI1(5,"mytranslate"),t.k0s(),t.DNE(6,cr,1,1,"azt-loading-ui",20),t.k0s()()}if(2&o){const n=t.XpG(2);t.R7$(3),t.Lme(" >> ",t.bMT(4,3,"lang_auto_xem_danh_sach")," ",t.bMT(5,5,"lang_core_chua_dong").toLocaleLowerCase()," "),t.R7$(3),t.Y8G("ngIf",n.statusObj.loading)}}function dr(o,s){if(1&o&&(t.j41(0,"div",4)(1,"h3",5),t.nrm(2,"lucide-icon",16),t.EFF(3),t.nI1(4,"mytranslate"),t.k0s(),t.j41(5,"div",7),t.EFF(6),t.j41(7,"span",8),t.EFF(8),t.nI1(9,"mytranslate"),t.nI1(10,"mytranslate"),t.k0s()(),t.j41(11,"div",15),t.EFF(12),t.j41(13,"span",8),t.EFF(14),t.nI1(15,"mytranslate"),t.nI1(16,"mytranslate"),t.k0s()(),t.DNE(17,mr,7,7,"div",17),t.k0s()),2&o){const n=t.XpG();t.R7$(3),t.SpI(" ",t.bMT(4,8,"lang_core_hoc_phi")," "),t.R7$(3),t.SpI(" ",n.paymentCountPaymentStatus.totalPaid," "),t.R7$(2),t.Lme(" ",t.bMT(9,10,"lang_student_utils_reques_notice_list_student").toLocaleLowerCase()," ",t.bMT(10,12,"lang_student_tuition_fee_paid").toLocaleLowerCase()," "),t.R7$(4),t.SpI(" ",n.paymentCountPaymentStatus.totalNotPaid," "),t.R7$(2),t.Lme(" ",t.bMT(15,14,"lang_student_utils_reques_notice_list_student").toLocaleLowerCase()," ",t.bMT(16,16,"lang_core_chua_dong").toLocaleLowerCase()," "),t.R7$(3),t.Y8G("ngIf",n.paymentCountPaymentStatus.totalNotPaid>0)}}let ur=(()=>{var o;class s extends y.H{getData(){this.initStatusObj(),this.getUserCountByRole(),this.getInfrastructuresCountStatistic(),this.getProgramsCountStatistic(),this.getClassroomsCountStatistic(),this.isTqbDomain&&this.getPaymentCountPaymentStatus(),this.stopStatusObj()}getUserCountByRole(){this.waitDestroy(this.userInfoService.apiUserInfoCountUserByRolesGet().subscribe(e=>this.userCountByRole=e.data))}getInfrastructuresCountStatistic(){this.waitDestroy(this.wrapApiResponse(this.infrastructureService.apiInfrastructuresCountStatisticGet()).subscribe(e=>{this.infrastructuresCountStatistic=e.data}))}getProgramsCountStatistic(){this.waitDestroy(this.wrapApiResponse(this.programService.apiProgramsCountStatisticGet()).subscribe(e=>{this.programsCountStatistic=e.data}))}getClassroomsCountStatistic(){this.waitDestroy(this.wrapApiResponse(this.classroomService.apiClassroomsCountStatisticGet()).subscribe(e=>{this.classroomsCountStatistic=e.data}))}getPaymentStudentsList(){this.initStatusObj(),this.waitDestroy(this.wrapApiResponse(this.paymentService.apiPaymentStudentsListPost({paidStatus:0})).subscribe(e=>{if(this.stopStatusObj(),!e.success)return this.errorStatusObj(e.message,!0);this.paymentStudentsList=e.data,this.showDialogListStudentNotPaid()}))}getPaymentCountPaymentStatus(){this.waitDestroy(this.wrapApiResponse(this.paymentService.apiPaymentCountPaymentStatusGet()).subscribe(e=>{this.paymentCountPaymentStatus=e.data}))}showDialogListStudentNotPaid(){this.sAztDialogService.open(or,{width:"95%",restoreFocus:!1,data:this.paymentStudentsList})}ngOnInit(){this.commonService.translateMetaData({title:"lang_core_thong_ke_tong_quan",image:"lang_cms_test_image"}),super.ngOnInit(),this.getData()}constructor(e,a,i,l,c,g){super(),this.userInfoService=e,this.infrastructureService=a,this.programService=i,this.classroomService=l,this.paymentService=c,this.sAztDialogService=g}}return(o=s).\u0275fac=function(e){return new(e||o)(t.rXU(ar.fv),t.rXU(ct.BU),t.rXU(ct.sC),t.rXU(ct.zS),t.rXU(ct.WG),t.rXU(j.i))},o.\u0275cmp=t.VBU({type:o,selectors:[["azt-statistics-overview"]],standalone:!0,features:[t.Vt3,t.aNF],decls:10,vars:9,consts:[[3,"headerBackToLink"],[1,"text-md-title","font-medium","truncate","mr-auto","mt-5"],[1,"grid","grid-cols-12","gap-3","sm:gap-6","mt-5"],["class","col-span-12 sm:col-span-6 xl:col-span-3 box p-3 font-bold",4,"ngIf"],[1,"col-span-12","sm:col-span-6","xl:col-span-3","box","p-3","font-bold"],[1,"text-md","mr-auto","flex","items-center"],["name","users",1,"mr-2"],[1,"text-sm","mt-3"],[1,"font-medium"],[1,"flex","justify-between","mt-1"],[1,"text-sm"],["name","building",1,"mr-2"],[1,"flex","justify-between","mt-3"],["name","graduation-cap",1,"mr-2"],["name","school",1,"mr-2"],[1,"text-sm","mt-1"],["name","circle-dollar-sign",1,"mr-2"],["class","text-sm mt-2",4,"ngIf"],[1,"text-sm","mt-2"],[1,"hover",3,"click"],[3,"size",4,"ngIf"],[3,"size"]],template:function(e,a){1&e&&(t.j41(0,"teacher-layout",0)(1,"h3",1),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s(),t.j41(4,"div",2),t.DNE(5,ir,32,23,"div",3)(6,sr,16,11,"div",3)(7,rr,21,15,"div",3)(8,lr,20,15,"div",3)(9,dr,18,18,"div",3),t.k0s()()),2&e&&(t.Y8G("headerBackToLink","/business/dashboard"),t.R7$(2),t.SpI(" ",t.bMT(3,7,"lang_core_thong_ke_tong_quan")," "),t.R7$(3),t.Y8G("ngIf",a.userCountByRole),t.R7$(),t.Y8G("ngIf",a.infrastructuresCountStatistic),t.R7$(),t.Y8G("ngIf",a.programsCountStatistic),t.R7$(),t.Y8G("ngIf",a.classroomsCountStatistic),t.R7$(),t.Y8G("ngIf",a.paymentCountPaymentStatus))},dependencies:[O.Q,w.R,u.MD,u.bT,r.X1,h.iI,r.YN,p.wp,I.s,C.flO,C.WGl,v.L,x.Id,d.k],styles:[".btn-activity[_ngcontent-%COMP%]{padding:5px 5px 5px 10px;background:#228b22;color:#fff;border-radius:10px;font-weight:500}.btn-activity[_ngcontent-%COMP%]:hover{background:#37ca37!important}.btn-un-activity[_ngcontent-%COMP%]{padding:5px 5px 5px 10px;background:#8b0000;color:#fff;border-radius:10px;font-weight:500}.btn-un-activity[_ngcontent-%COMP%]:hover{background:#b61a15!important}.text-sm[_ngcontent-%COMP%]{font-size:.82rem;line-height:1.2rem}.col-information[_ngcontent-%COMP%]{width:100%}.text-add-cs[_ngcontent-%COMP%]{font-size:14px;color:#909090;font-weight:500;padding-top:2px;padding-left:5px}.info-infrastructure[_ngcontent-%COMP%], .btn-add-infrastructure[_ngcontent-%COMP%]{background:#fff;padding:10px;border-radius:6px;height:100%}.btn-add-infrastructure[_ngcontent-%COMP%]:hover{background:#e1e0e0}.lucide-plus[_ngcontent-%COMP%]{stroke-width:4px!important;color:#a9a9a9}.col-information[_ngcontent-%COMP%]{padding:2px 5px}.col-information[_ngcontent-%COMP%]:hover{background:#f0f0f0;border-radius:5px;padding:2px 5px}.btn-delete-room[_ngcontent-%COMP%]{z-index:999}.btn-delete-room[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{background:#f0f0f0;border-radius:5px;padding:2px}.text-md-title[_ngcontent-%COMP%]{font-size:20px}.hover[_ngcontent-%COMP%]{color:#0000ffbd}.hover[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{color:#00f}"]}),s})();var pr=m(10127),_r=m(10490),gr=m(38922);const hr=o=>({"mt-1":o}),fr=(o,s)=>({"ml-2":o,"mt-1":s}),ge=()=>[];function br(o,s){1&o&&(t.j41(0,"div",19),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&o&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"lang_core_huong_dan_chon_vao_bang_va_vuot_sang_trai_de_xem_cac_thong_tin_khac")," "))}function vr(o,s){if(1&o){const n=t.RV6();t.j41(0,"mat-option",14),t.bIt("click",function(){const a=t.eBV(n).$implicit,i=t.XpG();return t.Njj(i.filterByClassId(a.id))}),t.EFF(1),t.k0s()}if(2&o){const n=s.$implicit;t.Y8G("value",n.id),t.R7$(),t.SpI(" ",n.name," ")}}function xr(o,s){if(1&o&&(t.j41(0,"div",20),t.nrm(1,"azt-loading-effect",21),t.k0s()),2&o){const n=t.XpG();t.R7$(),t.Y8G("currentStatusObj",n.statusObj)}}function Cr(o,s){1&o&&(t.j41(0,"div",28),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&o&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"lang_student_classroom_list_detail_not_student")," "))}function Ir(o,s){1&o&&(t.j41(0,"span"),t.EFF(1,"/"),t.k0s())}function yr(o,s){if(1&o&&(t.j41(0,"span"),t.EFF(1),t.DNE(2,Ir,2,0,"span",24),t.EFF(3),t.k0s()),2&o){const n=t.XpG().$implicit;t.R7$(),t.SpI(" ",n.lastMonthPaid," "),t.R7$(),t.Y8G("ngIf",n.lastMonthPaid),t.R7$(),t.SpI(" ",n.lastYearPaid," ")}}function kr(o,s){1&o&&(t.j41(0,"span",41),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&o&&(t.R7$(),t.SpI(" ",t.bMT(2,1,"lang_core_hoc_thu")," "))}function Mr(o,s){if(1&o&&(t.j41(0,"div",44),t.nrm(1,"azt-student-info-box",45),t.k0s()),2&o){const n=s.$implicit,e=t.XpG(2).$implicit;t.R7$(),t.Y8G("name",n.fullName)("phone",n.phone)("showPhone",!0)("avatar",n.avatar)("showTooltip",!1)("phone",e.phone)("identificationNumber",e.identificationNumber)}}function Or(o,s){if(1&o&&(t.j41(0,"div",42),t.DNE(1,Mr,2,7,"div",43),t.k0s()),2&o){const n=t.XpG().$implicit;t.R7$(),t.Y8G("ngForOf",n.userParents)}}function jr(o,s){if(1&o){const n=t.RV6();t.j41(0,"tr")(1,"td",35),t.bIt("click",function(){const a=t.eBV(n).$implicit,i=t.XpG(3);return t.Njj(i.addOrEditTuitionFee(a))}),t.nrm(2,"azt-student-info-box",36),t.k0s(),t.j41(3,"td",37),t.EFF(4),t.nI1(5,"formatStudentCodeToNumber"),t.k0s(),t.j41(6,"td",38),t.DNE(7,yr,4,3,"span",24)(8,kr,3,3,"span",39),t.k0s(),t.j41(9,"td",38),t.DNE(10,Or,2,1,"div",40),t.k0s()()}if(2&o){const n=s.$implicit,e=t.XpG(3);t.R7$(2),t.Y8G("name",n.fullName)("avatar",n.avatar)("gender",n.gender)("schoolName",n.schoolName)("hasUser",n.hasUser)("classrooms",n.classrooms)("joinedAt",n.joinedAt)("phone",n.phone)("email",n.email)("showPhone",!0)("phone",n.phone)("identificationNumber",n.identificationNumber),t.R7$(2),t.JRh(n.identificationNumber?t.i5U(5,16,n.identificationNumber,e.myEnvironment.maxStudentCodeLength):""),t.R7$(3),t.Y8G("ngIf",!n.isTrial),t.R7$(),t.Y8G("ngIf",n.isTrial),t.R7$(2),t.Y8G("ngIf",n.userParents)}}function Sr(o,s){if(1&o&&(t.j41(0,"div")(1,"div",29)(2,"table",30)(3,"thead")(4,"tr")(5,"th",31),t.EFF(6),t.nI1(7,"mytranslate"),t.k0s(),t.j41(8,"th",32),t.EFF(9),t.nI1(10,"mytranslate"),t.k0s(),t.j41(11,"th",33),t.EFF(12),t.nI1(13,"mytranslate"),t.nI1(14,"mytranslate"),t.k0s(),t.j41(15,"th",33),t.EFF(16),t.nI1(17,"mytranslate"),t.k0s()()(),t.j41(18,"tbody"),t.DNE(19,jr,11,19,"tr",34),t.k0s()()()()),2&o){let n;const e=t.XpG(2);t.R7$(6),t.JRh(t.bMT(7,6,"lang_auto_ho_va_ten")),t.R7$(3),t.JRh(t.bMT(10,8,"lang_auto_so_bao_danh")),t.R7$(3),t.Lme("",t.bMT(13,10,"lang_test_market_withdraw_time")," ",t.bMT(14,12,"lang_core_nop_hoc_phi").toLocaleLowerCase(),""),t.R7$(4),t.JRh(t.bMT(17,14,"lang_auto_phu_huynh")),t.R7$(3),t.Y8G("ngForOf",null!==(n=null==e.listPayment?null:e.listPayment.list)&&void 0!==n?n:t.lJ4(16,ge))}}function Rr(o,s){if(1&o){const n=t.RV6();t.j41(0,"div",46),t.EFF(1),t.nI1(2,"mytranslate"),t.j41(3,"span",47),t.bIt("click",function(){t.eBV(n);const a=t.XpG(2);return t.Njj(a.goBack())}),t.EFF(4),t.nI1(5,"mytranslate"),t.k0s()()}2&o&&(t.R7$(),t.SpI(" ",t.bMT(2,2,"lang_core_not_found_student"),"... "),t.R7$(3),t.JRh(t.bMT(5,4,"lang_powerpoint_frontend_chart_back")))}function Tr(o,s){if(1&o){const n=t.RV6();t.j41(0,"azt-paging",48),t.bIt("goToPaginationPage",function(a){t.eBV(n);const i=t.XpG(2);return t.Njj(i.setPageStudent(a))}),t.k0s()}if(2&o){const n=t.XpG(2);t.Y8G("pageObj",n.pageObj)}}function Fr(o,s){if(1&o&&(t.j41(0,"div"),t.EFF(1),t.nI1(2,"mytranslate"),t.k0s()),2&o){let n;const e=t.XpG(2);t.R7$(),t.Lme("",null!==(n=null==e.listPayment?null:e.listPayment.total)&&void 0!==n?n:0," ",t.bMT(2,2,"lang_auto_hoc_sinh"),"")}}function wr(o,s){if(1&o&&(t.j41(0,"div",22),t.DNE(1,Cr,3,3,"div",23)(2,Sr,20,17,"div",24)(3,Rr,6,6,"div",25),t.j41(4,"div",26),t.nrm(5,"div"),t.DNE(6,Tr,1,1,"azt-paging",27)(7,Fr,3,4,"div",24),t.k0s()()),2&o){let n,e,a,i;const l=t.XpG();t.R7$(),t.Y8G("ngIf",!l.searchContentObj.isLoading&&0==(null==l.listPayment?null:l.listPayment.total)&&""==l.searchContentObj.searchContent),t.R7$(),t.Y8G("ngIf",(null!==(n=null==l.listPayment?null:l.listPayment.total)&&void 0!==n?n:0)>0),t.R7$(),t.Y8G("ngIf",!l.searchContentObj.isLoading&&0==(null!==(e=null==l.listPayment?null:l.listPayment.list)&&void 0!==e?e:t.lJ4(5,ge)).length&&""!=l.searchContentObj.searchContent),t.R7$(3),t.Y8G("ngIf",(null!==(a=null==l.listPayment?null:l.listPayment.total)&&void 0!==a?a:0)>20),t.R7$(),t.Y8G("ngIf",(null!==(i=null==l.listPayment?null:l.listPayment.total)&&void 0!==i?i:0)>0)}}let Ar=(()=>{var o;class s extends y.H{goBack(){this.searchContentObj.resetSearchContentEvent("EMIT_EVENT")}search(e){this.isLoading=!0,this.searchContentObj.setLoading(!0),this.searchContentObj=e,this.getData(0==(this.listPayment?.list??[]).length?this.pageStudent:1)}setPageStudent(e){this.myNavigation("/business/student-management/"+e),this.isLoading=!0,this.pageStudent=e,this.getData(this.pageStudent)}addOrEditTuitionFee(e){this.sAztDialogService.open(pr.B,{width:"900px",restoreFocus:!1,data:e}).afterClosed().subscribe(a=>{a&&this.getData(this.pageStudent)})}addParent(){this.sAztDialogService.open(Qt,{width:"900px",restoreFocus:!1,data:void 0}).afterClosed().subscribe(e=>{e&&this.getData(this.pageStudent)})}filterByClassId(e){this.classroomId=e,this.getData(this.pageObj.page)}getData(e){this.pageObj.setPageNumber(e),this.waitDestroy(this.studentService.apiStudentsListPost({page:this.pageObj.page,size:this.pageObj.pageSize,classroomId:this.classroomId,name:this.searchContentObj.searchContent,getBook:!1,getMark:!1,getAttendance:!1,getPayment:!0,me:!1,getAssessment:!1}).subscribe(i=>{i?(this.listPayment=i,this.pageObj.setTotalPages(this.listPayment?.total??0),this.isLoading=!1):(this.errorStatusObj("lang_core_loi_khi_lay_danh_sach_hoc_sinh",!0),this.isLoading=!1),this.searchContentObj.setLoading(!1)}))}getOwnerClassroom(){this.waitDestroy(this.classroomGroupService.apiClassroomGroupListMyClassroomsGet().subscribe(e=>{e.success?(this.classroomOwner=e.data?.objs??[],this.getData(this.pageObj.page)):(this.errorStatusObj(e.message??"lang_core_co_loi_khi_lay_danh_danh_sach_lop",!0),this.isLoading=!1)}))}ngOnInit(){this.commonService.translateMetaData({title:"lang_core_hoc_phi",image:"lang_cms_test_image"}),this.commonService.getTranslate("lang_core_hoc_thu").subscribe(e=>{this.langName=e}),this.showDialogAddUser=Number(this.getMyQueryParam("showDialogAddUser")??0),this.showDialogAddUser&&this.addOrEditTuitionFee(),this.waitDestroy((0,W.z)([this.activeRoute.params,this.activeRoute.queryParams]).subscribe(([])=>{let e=this.commonService.getMyQueryParam("backto");this.pageObj.setPageNumber(Number(this.commonService.getMyParam(this.activeRoute,"page"))??1),this.backLink=e||"/business/dashboard"})),super.ngOnInit(),this.getOwnerClassroom()}constructor(e,a,i,l){super(),this.sAztDialogService=e,this.studentService=a,this.activeRoute=i,this.classroomGroupService=l,this.backLink="",this.isLoading=!0,this.langName="",this.pageStudent=1,this.searchContentObj=new At.Z,this.classroomOwner=[],this.pageObj=new E.d(20),this.showDialogAddUser=0}}return(o=s).\u0275fac=function(e){return new(e||o)(t.rXU(j.i),t.rXU(_r.b),t.rXU(h.nX),t.rXU(gr.k))},o.\u0275cmp=t.VBU({type:o,selectors:[["app-azota-business-tuition"]],standalone:!0,features:[t.Vt3,t.aNF],decls:33,vars:40,consts:[["searchInListClassroomName","searchInList"],["doneLoading",""],[3,"headerBackToLink"],[1,"mt-5"],[1,"col-span-12"],[1,"text-xl","font-medium"],["class","mt-1",4,"ngIf"],[1,"col-span-12","lg:col-span-12","2xl:col-span-12","mt-5"],[1,"intro-y","flex","flex-col-reverse","sm:flex-row","items-center"],[1,"w-full","sm:flex","sm:justify-start","sm:w-auto","mr-auto","mt-3","sm:mt-0"],[3,"onSearch","isServerSearch","placeholder","searchContentObj"],["id","classroomId","appearance","fill",1,"ml-0","sm:ml-2","mt-3","sm:mt-0",2,"border-radius","5px","background","white"],["searchInList","","name","classroomId",3,"placeholder"],[3,"formControl","placeholderLabel","noEntriesFoundLabel"],[3,"click","value"],[3,"value","click",4,"ngFor","ngForOf"],[1,"btn","btn-primary","shadow-md","w-full","sm:w-auto",3,"click","ngClass"],[1,"btn","btn-primary-soft","shadow-md","w-full","sm:w-auto",3,"click","ngClass"],["class","w-full flex justify-center items-center",4,"ngIf","ngIfElse"],[1,"mt-1"],[1,"w-full","flex","justify-center","items-center"],[3,"currentStatusObj"],[1,"intro-y","col-span-12","overflow-auto"],["class","flex justify-center mt-5",4,"ngIf"],[4,"ngIf"],["class","flex justify-center mt-19",4,"ngIf"],[1,"mt-2","pb-3","flex","justify-between","items-center"],[3,"pageObj","goToPaginationPage",4,"ngIf"],[1,"flex","justify-center","mt-5"],[2,"height","100%"],[1,"table","table-report","mt-2",2,"white-space","initial"],[1,"whitespace-nowrap",2,"padding-left","0"],[1,"whitespace-nowrap","text-center"],[1,"text-center","whitespace-nowrap"],[4,"ngFor","ngForOf"],["azt-track-service","class-list-details-DbKkCgISc7I",1,"!py-3.5","clickable",3,"click"],[3,"name","avatar","gender","schoolName","hasUser","classrooms","joinedAt","phone","email","showPhone","identificationNumber"],[1,"text-center","capitalize"],[1,"text-center"],["class","text-slate-500",4,"ngIf"],["class","grid-cols-12 gap-2",4,"ngIf"],[1,"text-slate-500"],[1,"grid-cols-12","gap-2"],["class","col-span-12 mb-1",4,"ngFor","ngForOf"],[1,"col-span-12","mb-1"],[3,"name","phone","showPhone","avatar","showTooltip","identificationNumber"],[1,"flex","justify-center","mt-19"],["azt-track-service","business-tuition-fee-hLqHhho7i",1,"clickable",2,"color","#2262ae !important",3,"click"],[3,"goToPaginationPage","pageObj"]],template:function(e,a){if(1&e){const i=t.RV6();t.j41(0,"teacher-layout",2)(1,"div",3)(2,"div",4)(3,"h3",5),t.EFF(4),t.nI1(5,"mytranslate"),t.k0s(),t.DNE(6,br,3,3,"div",6),t.k0s(),t.j41(7,"div",7)(8,"div",8)(9,"div",9)(10,"azt-search-box",10),t.nI1(11,"mytranslate"),t.bIt("onSearch",function(c){return t.eBV(i),t.Njj(a.search(c.searchObj))}),t.k0s(),t.j41(12,"mat-form-field",11)(13,"mat-select",12,0),t.nI1(15,"mytranslate"),t.j41(16,"mat-option"),t.nrm(17,"ngx-mat-select-search",13),t.nI1(18,"mytranslate"),t.nI1(19,"mytranslate"),t.k0s(),t.j41(20,"mat-option",14),t.bIt("click",function(){return t.eBV(i),t.Njj(a.filterByClassId())}),t.EFF(21),t.nI1(22,"mytranslate"),t.k0s(),t.DNE(23,vr,2,2,"mat-option",15),t.k0s()()(),t.j41(24,"button",16),t.bIt("click",function(){return t.eBV(i),t.Njj(a.addOrEditTuitionFee())}),t.EFF(25),t.nI1(26,"mytranslate"),t.k0s(),t.j41(27,"button",17),t.bIt("click",function(){return t.eBV(i),t.Njj(a.addParent())}),t.EFF(28),t.nI1(29,"mytranslate"),t.k0s()()(),t.DNE(30,xr,2,1,"div",18)(31,wr,8,6,"ng-template",null,1,t.C5r),t.k0s()()}if(2&e){let i;const l=t.sdS(14),c=t.sdS(32);t.Y8G("headerBackToLink",a.backLink),t.R7$(4),t.SpI(" ",t.bMT(5,19,"lang_business_tuition_fee_title_top")," "),t.R7$(2),t.Y8G("ngIf",a.isMobileDevice&&(null!==(i=null==a.listPayment?null:a.listPayment.total)&&void 0!==i?i:0)>0),t.R7$(4),t.Y8G("isServerSearch",!0)("placeholder",t.bMT(11,21,"lang_core_tim_theo_ten_phone_email"))("searchContentObj",a.searchContentObj),t.R7$(3),t.FS9("placeholder",t.bMT(15,23,"lang_core_tim_theo_lop")),t.R7$(4),t.FS9("placeholderLabel",t.bMT(18,25,"lang_search_by_name")),t.FS9("noEntriesFoundLabel",t.bMT(19,27,"lang_search_not_found")),t.Y8G("formControl",l.searchControl),t.R7$(3),t.Y8G("value",0),t.R7$(),t.SpI(" ",t.bMT(22,29,"lang_auto_tat_ca_cac_lop")," "),t.R7$(2),t.Y8G("ngForOf",l.filter(a.classroomOwner,"name")),t.R7$(),t.Y8G("ngClass",t.eq3(35,hr,a.isMobileDevice)),t.R7$(),t.SpI("+ ",t.bMT(26,31,"lang_student_utils_add_student"),""),t.R7$(2),t.Y8G("ngClass",t.l_i(37,fr,!a.isMobileDevice,a.isMobileDevice)),t.R7$(),t.SpI("+ ",t.bMT(29,33,"lang_student_utils_add_parent"),""),t.R7$(2),t.Y8G("ngIf",a.isLoading)("ngIfElse",c)}},dependencies:[it.An,it.U9,Pt.x,O.Q,wt.W,R.K,pt.B,A.q,u.MD,u.YU,u.Sq,u.bT,r.X1,r.BC,r.l_,h.iI,r.YN,p.wp,I.s,_t.wT,gt.rl,Et.VO,C.flO,v.L,p.Po,x.Id,d.k],encapsulation:2}),s})();const K=o=>[o],he=()=>({"text-primary mx-auto":!0}),Ut=()=>({"text-primary":!0});function zr(o,s){if(1&o&&t.nrm(0,"azt-loading-effect",3),2&o){const n=t.XpG();t.Y8G("currentStatusObj",n.statusObj)}}function Er(o,s){1&o&&(t.j41(0,"div",9)(1,"a",10),t.nI1(2,"navigationLocalize"),t.j41(3,"div",11),t.nrm(4,"lucide-icon",12),t.j41(5,"div",13),t.EFF(6),t.nI1(7,"mytranslate"),t.k0s()()()()),2&o&&(t.R7$(),t.Y8G("routerLink",t.eq3(7,K,t.bMT(2,3,"/business/infrastructure"))),t.R7$(3),t.Y8G("ngClass",t.lJ4(9,he)),t.R7$(2),t.SpI(" ",t.bMT(7,5,"lang_business_infrastructure_title")," "))}function Pr(o,s){1&o&&(t.j41(0,"div",9)(1,"a",14),t.nI1(2,"navigationLocalize"),t.j41(3,"div",11),t.nrm(4,"azt-svg-icon",15),t.j41(5,"div",13),t.EFF(6),t.nI1(7,"mytranslate"),t.k0s()()()()),2&o&&(t.R7$(),t.Y8G("routerLink",t.eq3(7,K,t.bMT(2,3,"/business/educational-program"))),t.R7$(3),t.Y8G("size",48),t.R7$(2),t.SpI(" ",t.bMT(7,5,"lang_business_educational_program_title")," "))}function Dr(o,s){1&o&&(t.j41(0,"div",9)(1,"a",16),t.nI1(2,"navigationLocalize"),t.j41(3,"div",11),t.nrm(4,"azt-svg-icon",17),t.j41(5,"div",13),t.EFF(6),t.nI1(7,"mytranslate"),t.k0s()()()()),2&o&&(t.R7$(),t.Y8G("routerLink",t.eq3(7,K,t.bMT(2,3,"/business/instructional-work"))),t.R7$(3),t.Y8G("size",48),t.R7$(2),t.SpI(" ",t.bMT(7,5,"lang_business_instructional_work_title")," "))}function Gr(o,s){1&o&&(t.j41(0,"div",9)(1,"a",18),t.nI1(2,"navigationLocalize"),t.j41(3,"div",11),t.nrm(4,"lucide-icon",19),t.j41(5,"div",13),t.EFF(6),t.nI1(7,"mytranslate"),t.k0s()()()()),2&o&&(t.R7$(),t.Y8G("routerLink",t.eq3(7,K,t.bMT(2,3,"/business/student-management/1"))),t.R7$(3),t.Y8G("ngClass",t.lJ4(9,he)),t.R7$(2),t.SpI(" ",t.bMT(7,5,"lang_notify_list_students")," "))}function $r(o,s){1&o&&(t.j41(0,"div",9)(1,"a",18),t.nI1(2,"navigationLocalize"),t.j41(3,"div",11),t.nrm(4,"lucide-icon",20),t.j41(5,"div",13),t.EFF(6),t.nI1(7,"mytranslate"),t.k0s()()()()),2&o&&(t.R7$(),t.Y8G("routerLink",t.eq3(7,K,t.bMT(2,3,"/business/account-management"))),t.R7$(3),t.Y8G("ngClass",t.lJ4(9,Ut)),t.R7$(2),t.SpI(" ",t.bMT(7,5,"lang_core_quan_ly_tai_khoan")," "))}function Br(o,s){1&o&&(t.j41(0,"div",9)(1,"a",18),t.nI1(2,"navigationLocalize"),t.j41(3,"div",21),t.nrm(4,"lucide-icon",22),t.j41(5,"div",13),t.EFF(6),t.nI1(7,"mytranslate"),t.k0s()()()()),2&o&&(t.R7$(),t.Y8G("routerLink",t.eq3(7,K,t.bMT(2,3,"/business/business-configs/0"))),t.R7$(3),t.Y8G("ngClass",t.lJ4(9,Ut)),t.R7$(2),t.SpI(" ",t.bMT(7,5,"lang_business_dashboard_business_configs")," "))}function Nr(o,s){1&o&&(t.j41(0,"a",24),t.nI1(1,"navigationLocalize"),t.j41(2,"div",21),t.nrm(3,"lucide-icon",25),t.j41(4,"div",13),t.EFF(5),t.nI1(6,"mytranslate"),t.k0s()()()),2&o&&(t.Y8G("routerLink",t.eq3(6,K,t.bMT(1,2,"/business/business-statistics-overview"))),t.R7$(5),t.SpI(" ",t.bMT(6,4,"lang_core_thong_ke_tong_quan")," "))}function Lr(o,s){1&o&&(t.j41(0,"a",24),t.nI1(1,"navigationLocalize"),t.j41(2,"div",21),t.nrm(3,"lucide-icon",25),t.j41(4,"div",13),t.EFF(5),t.nI1(6,"mytranslate"),t.k0s()()()),2&o&&(t.Y8G("routerLink",t.eq3(6,K,t.bMT(1,2,"/business/business-statistics-overview-v2"))),t.R7$(5),t.SpI(" ",t.bMT(6,4,"lang_core_thong_ke_tong_quan")," "))}function Yr(o,s){if(1&o&&(t.j41(0,"div",9),t.DNE(1,Nr,7,8,"a",23)(2,Lr,7,8,"a",23),t.k0s()),2&o){const n=t.XpG(2);t.R7$(),t.Y8G("ngIf",n.isTqbDomain),t.R7$(),t.Y8G("ngIf",!n.isTqbDomain)}}function Ur(o,s){1&o&&(t.j41(0,"div",9)(1,"a",18),t.nI1(2,"navigationLocalize"),t.j41(3,"div",21),t.nrm(4,"lucide-icon",26),t.j41(5,"div",13),t.EFF(6),t.nI1(7,"mytranslate"),t.k0s()()()()),2&o&&(t.R7$(),t.Y8G("routerLink",t.eq3(7,K,t.bMT(2,3,"/business/admin-management"))),t.R7$(3),t.Y8G("ngClass",t.lJ4(9,Ut)),t.R7$(2),t.SpI(" ",t.bMT(7,5,"lang_azt_admin")," "))}function Vr(o,s){if(1&o&&(t.j41(0,"div",4)(1,"div",5),t.EFF(2),t.nI1(3,"mytranslate"),t.k0s(),t.j41(4,"div",6)(5,"div",7),t.DNE(6,Er,8,10,"div",8),t.nI1(7,"allowFeatureBusinessForUser"),t.nI1(8,"async"),t.DNE(9,Pr,8,9,"div",8),t.nI1(10,"allowFeatureBusinessForUser"),t.nI1(11,"async"),t.DNE(12,Dr,8,9,"div",8),t.nI1(13,"allowFeatureBusinessForUser"),t.nI1(14,"async"),t.DNE(15,Gr,8,10,"div",8),t.nI1(16,"allowFeatureBusinessForUser"),t.nI1(17,"async"),t.DNE(18,$r,8,10,"div",8),t.nI1(19,"allowFeatureBusinessForUser"),t.nI1(20,"async"),t.DNE(21,Br,8,10,"div",8),t.nI1(22,"allowFeatureBusinessForUser"),t.nI1(23,"async"),t.DNE(24,Yr,3,2,"div",8)(25,Ur,8,10,"div",8),t.nI1(26,"allowFeatureBusinessForUser"),t.nI1(27,"async"),t.k0s()()()),2&o){const n=t.XpG();t.R7$(2),t.SpI(" ",t.bMT(3,9,"lang_cms_business_dashboard_title")," "),t.R7$(4),t.Y8G("ngIf",t.bMT(8,14,t.i5U(7,11,"training_center_infrastructure",!1))),t.R7$(3),t.Y8G("ngIf",t.bMT(11,19,t.i5U(10,16,"training_center_curriculum",!1))),t.R7$(3),t.Y8G("ngIf",t.bMT(14,24,t.i5U(13,21,"training_center_instructional",!1))),t.R7$(3),t.Y8G("ngIf",t.bMT(17,29,t.i5U(16,26,"training_center_tuition",!1))),t.R7$(3),t.Y8G("ngIf",t.bMT(20,34,t.i5U(19,31,"training_center_manage_account",!1))),t.R7$(3),t.Y8G("ngIf",t.bMT(23,39,t.i5U(22,36,"business_configs_menu",!1))),t.R7$(3),t.Y8G("ngIf",n.isBusinessDomain),t.R7$(),t.Y8G("ngIf",t.bMT(27,44,t.i5U(26,41,"business_configs_menu",!1)))}}let Xr=(()=>{var o;class s extends y.H{constructor(){super()}ngOnInit(){this.commonService.translateMetaData({title:"lang_cms_business_dashboard_title",description:"lang_cms_business_dashboard_description",image:"lang_cms_test_image"}),super.ngOnInit()}}return(o=s).\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.VBU({type:o,selectors:[["app-azota-business-dashboard"]],standalone:!0,features:[t.Vt3,t.aNF],decls:6,vars:7,consts:[["isReadyBusinessPermision",""],[3,"headerBackToLink"],[3,"currentStatusObj",4,"ngIf","ngIfElse"],[3,"currentStatusObj"],[1,"azt-dashboard","w-full","lg:w-80%","mx-auto","mt-5"],[1,"text-lg","font-medium","intro-y"],[1,"mb-3","grid","grid-cols-12","intro-y","sm:gap-10"],[1,"col-span-12","grid","grid-cols-12","gap-6","mt-4","flex","items-center"],["class","col-span-6 md:col-span-3 intro-y","tourAnchor","azt-tour-1",4,"ngIf"],["tourAnchor","azt-tour-1",1,"col-span-6","md:col-span-3","intro-y"],["azt-track-service","dashboard-MZWdTjtFv",3,"routerLink"],[1,"box","py-8","zoom-in","text-center"],["name","building","size","48",3,"ngClass"],[1,"font-medium","text-center","text-base","mt-3"],["azt-track-service","dashboard-dbDZTHWC53",3,"routerLink"],["type","book",1,"block","text-primary","mx-auto",3,"size"],["azt-track-service","dashboard-WiSckpXd7J",3,"routerLink"],["type","slide",1,"block","text-primary","mx-auto",3,"size"],["azt-track-service","dashboard-6wko4rwl-1",3,"routerLink"],["name","user","size","48",3,"ngClass"],["name","users","size","48",3,"ngClass"],[1,"box","py-8","text-center","zoom-in"],["name","settings","size","48",3,"ngClass"],[3,"routerLink",4,"ngIf"],[3,"routerLink"],["name","bar-chart-3","size","48",1,"text-primary"],["name","user-cog","size","48",3,"ngClass"]],template:function(e,a){if(1&e&&(t.j41(0,"teacher-layout",1),t.DNE(1,zr,1,1,"azt-loading-effect",2),t.nI1(2,"alreadyDataForBusinessPermission"),t.nI1(3,"async"),t.DNE(4,Vr,28,46,"ng-template",null,0,t.C5r),t.k0s()),2&e){const i=t.sdS(5);t.Y8G("headerBackToLink","/admin/dashboard"),t.R7$(),t.Y8G("ngIf",!t.bMT(3,5,t.bMT(2,3,"")))("ngIfElse",i)}},dependencies:[O.Q,R.K,zt.m,p.F2,u.MD,u.YU,u.bT,u.Jj,r.X1,h.iI,h.Wk,r.YN,p.wp,I.s,C.flO,C.WGl,v.L,p.bj,p.aJ,x.Id,d.k],encapsulation:2}),s})();const fe=[{path:"",component:(()=>{var o;class s extends y.H{}return(o=s).\u0275fac=(()=>{let n;return function(a){return(n||(n=t.xGo(o)))(a||o)}})(),o.\u0275cmp=t.VBU({type:o,selectors:[["azota-for-business"]],standalone:!0,features:[t.Vt3,t.aNF],decls:2,vars:0,consts:[["id","azota-business"]],template:function(e,a){1&e&&(t.j41(0,"div",0),t.nrm(1,"router-outlet"),t.k0s())},dependencies:[u.MD,r.X1,h.iI,h.n3,r.YN,I.s,C.flO,v.L,x.Id,d.k],encapsulation:2}),s})(),canActivate:[H.t],children:[{path:"dashboard",component:Xr},{path:"educational-program",component:_i},{path:"create-educational-program",component:le},{path:"create-general-educational-program",component:Ba},{path:"edit-educational-program/:id",component:le},{path:"educational-program/:id",component:ii},{path:"infrastructure",component:ns},{path:"infrastructure/:id",component:Ni},{path:"instructional-work",component:Is},{path:"student-management/:page",component:Ar},{path:"account-management",component:hn},{path:"business-configs/:configType",component:Yo},{path:"business-statistics-overview",component:ur},{path:"business-statistics-overview-v2",component:Zs},{path:"admin-management",component:zn}]}];let Wr=(()=>{var o;class s{}return(o=s).\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.$C({type:o}),o.\u0275inj=t.G2t({imports:[h.iI.forChild(fe),h.iI,$.XE]}),s})()},99503:(Ft,Z,m)=>{m.d(Z,{fb:()=>x,ij:()=>B});var h=m(81519),$=m(48891),H=m(20381),u=m.n(H),t=m(44172);const r=u()||H,B=new $.nKC("MAT_MOMENT_DATE_ADAPTER_OPTIONS",{providedIn:"root",factory:function tt(){return{useUtc:!1}}});function C(I,X){const j=Array(I);for(let d=0;d<I;d++)j[d]=X(d);return j}let x=(()=>{var I;class X extends h.$O{constructor(d){super(),this._options=d,this.commonService=(0,$.WQX)(t.R),this._localeData={firstDayOfWeek:0,longMonths:"",shortMonths:"",dates:"",longDaysOfWeek:"",shortDaysOfWeek:"",narrowDaysOfWeek:""},r.locale(),this.setLocale(this.commonService.getCurrentLang()||r.locale())}setLocale(d){super.setLocale(d);const p=r.localeData(d);this._localeData={firstDayOfWeek:p.firstDayOfWeek(),longMonths:p.months(),shortMonths:p.monthsShort(),dates:C(31,v=>this.createDate(2017,0,v+1).format("D")),longDaysOfWeek:p.weekdays(),shortDaysOfWeek:p.weekdaysShort(),narrowDaysOfWeek:p.weekdaysMin()}}getYear(d){return this.clone(d).year()}getMonth(d){return this.clone(d).month()}getDate(d){return this.clone(d).date()}getDayOfWeek(d){return this.clone(d).day()}getMonthNames(d){return"long"===d?this._localeData.longMonths:this._localeData.shortMonths}getDateNames(){return this._localeData.dates}getDayOfWeekNames(d){return"long"===d?this._localeData.longDaysOfWeek:"short"===d?this._localeData.shortDaysOfWeek:this._localeData.narrowDaysOfWeek}getYearName(d){return this.clone(d).format("YYYY")}getFirstDayOfWeek(){return this._localeData.firstDayOfWeek}getNumDaysInMonth(d){return this.clone(d).daysInMonth()}clone(d){return d.clone().locale(this.locale)}createDate(d,p,v){if(p<0||p>11)throw Error(`Invalid month index "${p}". Month index has to be between 0 and 11.`);if(v<1)throw Error(`Invalid date "${v}". Date has to be greater than 0.`);const y=this._createMoment({year:d,month:p,date:v}).locale(this.locale);if(!y.isValid())throw Error(`Invalid date "${v}" for month with index "${p}".`);return y}today(){return this._createMoment().locale(this.locale)}parse(d,p){return d&&"string"==typeof d?this._createMoment(d,p,this.locale):d?this._createMoment(d).locale(this.locale):null}format(d,p){if(d=this.clone(d),!this.isValid(d))throw Error("MomentDateAdapter: Cannot format invalid date.");return d.format(p)}addCalendarYears(d,p){return this.clone(d).add({years:p})}addCalendarMonths(d,p){return this.clone(d).add({months:p})}addCalendarDays(d,p){return this.clone(d).add({days:p})}toIso8601(d){return this.clone(d).format()}deserialize(d){let p;if(d instanceof Date)p=this._createMoment(d).locale(this.locale);else if(this.isDateInstance(d))return this.clone(d);if("string"==typeof d){if(!d)return null;p=this._createMoment(d,r.ISO_8601).locale(this.locale)}return p&&this.isValid(p)?this._createMoment(p).locale(this.locale):super.deserialize(d)}isDateInstance(d){return r.isMoment(d)}isValid(d){return this.clone(d).isValid()}invalid(){return r.invalid()}getHour(d){return d.hours()}getMinute(d){return d.minutes()}getSecond(d){return d.seconds()}setHour(d,p){d.hours(p)}setMinute(d,p){d.minutes(p)}setSecond(d,p){d.seconds(p)}_createMoment(d,p,v){const{strict:y,useUtc:O}=this._options||{};return O?r.utc(d,p,v,y):r(d,p,v,y)}}return(I=X).\u0275fac=function(d){return new(d||I)($.KVO(B,8))},I.\u0275prov=$.jDH({token:I,factory:I.\u0275fac}),X})()},65728:(Ft,Z,m)=>{m.d(Z,{I:()=>d});var h=m(59640),$=m(54460),H=m(10936),u=m(65162),t=m(44155),r=m(15343),B=m(70050),tt=m(5502),C=m(36894),x=m(48891);const I=()=>({"text-white":!0});function X(p,v){1&p&&x.nrm(0,"lucide-icon",3),2&p&&x.Y8G("ngClass",x.lJ4(1,I))}function j(p,v){1&p&&x.nrm(0,"lucide-icon",4),2&p&&x.Y8G("ngClass",x.lJ4(1,I))}let d=(()=>{var p;class v extends h.H{constructor(){super(...arguments),this.isScrollToTop=!1}scrollTo(){this.isScrollToTop?window.scrollTo(0,0):window.scrollTo(0,document.body.scrollHeight)}ngOnInit(){super.ngOnInit()}}return(p=v).\u0275fac=(()=>{let y;return function(A){return(y||(y=x.xGo(p)))(A||p)}})(),p.\u0275cmp=x.VBU({type:p,selectors:[["azt-scroll-to-top-bottom"]],inputs:{isScrollToTop:"isScrollToTop"},standalone:!0,features:[x.Vt3,x.aNF],decls:3,vars:2,consts:[["azt-track-service","azt-scroll-to-top-bottom-DbRV8ySsXT1",1,"toolBarMobile","clickable",3,"click"],["name","chevrons-up","size","24",3,"ngClass",4,"ngIf"],["name","chevrons-down","size","24",3,"ngClass",4,"ngIf"],["name","chevrons-up","size","24",3,"ngClass"],["name","chevrons-down","size","24",3,"ngClass"]],template:function(O,A){1&O&&(x.j41(0,"div",0),x.bIt("click",function(){return A.scrollTo()}),x.DNE(1,X,1,2,"lucide-icon",1)(2,j,1,2,"lucide-icon",2),x.k0s()),2&O&&(x.R7$(),x.Y8G("ngIf",A.isScrollToTop),x.R7$(),x.Y8G("ngIf",!A.isScrollToTop))},dependencies:[$.MD,$.YU,$.bT,H.X1,u.iI,H.YN,t.s,r.flO,r.WGl,B.L,tt.Id,C.k],styles:[".toolBarMobile[_ngcontent-%COMP%]{position:fixed;bottom:0;right:0;z-index:100;margin:0 40px 25px;padding:5px;background:#b5b5b587;border-radius:3px}"]}),v})()},20013:(Ft,Z,m)=>{m.d(Z,{T:()=>p});var h=m(48891),$=m(9516),H=m(52811),u=m(54460),t=m(10936),r=m(65162),B=m(44155),tt=m(15343),C=m(70050),x=m(5502),I=m(36894);const X=["*"];function j(v,y){1&v&&h.SdG(0,0,["*ngIf","!isUploadFile"])}function d(v,y){1&v&&(h.j41(0,"span",5),h.nrm(1,"azt-loading-ui"),h.k0s())}let p=(()=>{var v;class y extends $.L{constructor(){super(...arguments),this.uploadComplete=new h.bkB}emitUploadComplete(A){A.length>0&&this.uploadComplete.emit(A[0])}}return(v=y).\u0275fac=(()=>{let O;return function(E){return(O||(O=h.xGo(v)))(E||v)}})(),v.\u0275cmp=h.VBU({type:v,selectors:[["azt-upload-single-box"]],outputs:{uploadComplete:"uploadComplete"},standalone:!0,features:[h.Vt3,h.aNF],ngContentSelectors:X,decls:6,vars:4,consts:[["formChoseFile",""],[3,"click"],["type","file","id","box-left-file-input",1,"form-control","file-input",2,"display","none",3,"change","cancel","accept"],[4,"ngIf"],["class","w-4 h-4 inline-block",4,"ngIf"],[1,"w-4","h-4","inline-block"]],template:function(A,E){if(1&A){const U=h.RV6();h.NAR(),h.j41(0,"div",1),h.bIt("click",function(){h.eBV(U);const R=h.sdS(2);return h.Njj(E.onOpenFileDictionary()&&R.click())}),h.j41(1,"input",2,0),h.bIt("change",function(R){return h.eBV(U),h.Njj(E.onFileSelected(R))})("cancel",function(R){return h.eBV(U),h.Njj(E.onCancelSelect(R))}),h.k0s(),h.DNE(3,j,1,0,"ng-content",3),h.j41(4,"div"),h.DNE(5,d,2,0,"span",4),h.k0s()()}2&A&&(h.BMQ("class",E.containerClass),h.R7$(),h.FS9("accept",E.fileType),h.R7$(2),h.Y8G("ngIf",!E.isUploadFile),h.R7$(2),h.Y8G("ngIf",E.isUploadFile))},dependencies:[H.R,u.MD,u.bT,t.X1,r.iI,t.YN,B.s,tt.flO,C.L,x.Id,I.k],encapsulation:2}),y})()}}]);